# StackOverflow 问答 10088000-10088999

# c++ - 如何在 C++ 中实现 static_cast

> ID：10088002
> 
> 赞同：1
> 
> 时间：2012-04-10T11:37:44.423
> 
> 标签：c++, gmp, eigen, static-cast

我正在尝试将 GMP 编号库与特征矩阵库一起使用。我尝试实例化模板：

```
Matrix<typename Scalar, int RowsAtCompileTime, int ColsAtCompileTime> 
```

和

```
Matrix<mpz_class, 3, 3> matrix; 
```

其中 mpz_class 是 GMP 库中的数字类。

我得到一个编译器错误：

```
 /usr/include/eigen3/Eigen/src/Core/MathFunctions.h:409: error: 
 invalid static_cast from     
 type ‘const __gmp_expr<__mpz_struct [1], __mpz_struct [1]>’ 
 to type ‘int’ 
```

当我检查 Eigen 库的源代码时，我发现问题是 mpz_class 在这个模板中不能被 static_cast -ed 到 int ：

```
template<typename OldType, typename NewType>
struct cast_impl
{
  static inline NewType run(const OldType& x)
  {
    return static_cast<NewType>(x);
  }
}; 
```

我怎样才能绕过这个问题？我知道如何在运行时将 mpz_class 转换为 int，但它必须由编译器完成，因为 static_cast 是编译时。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T11:45:52.863

如果您知道如何实现它，则可以对`cast_impl`模板类进行专门化。

```
template <>
struct cast_impl<Type1, Typ2>
{
    static inline Type2 run(const Type1&x) {
        // Conversion here returning Type2 from Type1
    }
} 
```

类型 1 和类型 2 应替换为您的实际类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T11:46:36.893

除了其他答案之外，您可能还想阅读“[特征：使用自定义标量类型](http://eigen.tuxfamily.org/dox/TopicCustomizingEigen.html#user_defined_scalars)”以了解使用自定义标量类的其他要求，您可能会在某些时候遇到这些要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T11:43:13.817

假设`mpz_class`子类是安全的，您可以只使用子类并编写转换运算符：

```
class your_mpz_class : public mpz_class
{
public:

  // Write public constructors as needed

  operator int()
  {
    return /* Whatever must be returned */;
  }
}; 
```

# php - simple_html_dom.php 是否使用 cURL？

> ID：10088003
> 
> 赞同：0
> 
> 时间：2012-04-10T11:37:44.770
> 
> 标签：php, dom, curl, simple-html-dom

我想知道 simple_html_dom.php (http://simplehtmldom.sourceforge.net/manual.htm) 是否使用 cURL。我有一个网站，我在其中使用 simple_html_dom.php 来获取数据，我当前的托管服务提供商在我要求时启用了 simple_html_dom.php。但现在由于某些经济原因，我想更换我的托管服务提供商。我找到了另一个允许 curl 功能的虚拟主机提供商（显示在他们的网站上）；我打电话给他们询问，但他们告诉他们不确定 simple_html_dom.php，因为以前没有人问过。你能告诉我 simple_html_dom.php 是否可以在启用 cURL 的服务器中使用吗？

如果我问错了问题，请原谅我。我从来没有做过 dom 编程。我正在使用 simple_html_dom.php，因为它很简单，我不必担心 dom。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:42:45.463

是的，当然你可以在启用 cURL 的服务器上使用[Simple HTML Dom 。](http://simplehtmldom.sourceforge.net)两者是完全不同的东西。例子：

```
 $curl = curl_init(); 
curl_setopt($curl, CURLOPT_URL, 'http://????????');  
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);  
$str = curl_exec($curl);  
curl_close($curl);  

$html= str_get_html($str); 
```

# android - 列表视图中的切换按钮

> ID：10088008
> 
> 赞同：0
> 
> 时间：2012-04-10T11:38:10.187
> 
> 标签：android, android-listview, togglebutton

`ToggleButton`我在里面有问题`ListView`。

我是`CursorAdapter`用来填`ListView`的。问题是当我点击`ToggleView`里面的一些时，LogCat 显示不同的 id。

```
public void bindView(View view, final Context context, final Cursor cursor) {

        ToggleButton toggle = (ToggleButton) view.findViewById(R.id.setalarm_item_switch);
        TextView id = (TextView) view.findViewById(R.id.setalarm_item_desc);

            id.setText(cursor.getString(ITEM_ID));

        toggle.setOnClickListener(new OnClickListener() {

            public void onClick(final View v) {

            Log.d("mojaapp", "Click on " + cursor.getINT(ITEM_ID));

            }
        });

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        View view = LayoutInflater.from(context).inflate(R.layout.setalarm_item, null);
        return view;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:42:49.530

我认为您没有从光标正确读取**id 。**像这样做：

```
Log.d("mojaapp", "Click on " + cursor.getINT(cursor.getColumnIndex(ITEM_ID))); 
```

# javascript - 按下回车时如何模拟制表符和回车键，最好在 JavaScript 中

> ID：10088013
> 
> 赞同：0
> 
> 时间：2012-04-10T11:38:31.933
> 
> 标签：javascript, jquery, keyboard, enter

我找到了很多关于如何用 tab 键替换 enter 的解决方案，但是我需要模拟**tab 并在 enter**上输入，请帮助：

我有一个输入字段，然后是一个链接列表（该列表由输入过滤）。当我完成输入并按回车后，我希望第一个链接被“点击”。我认为我可以做到这一点的一种方法是在 enter 键之前模拟一个 tab 键，但我该怎么做呢？

还有其他选择吗？

这就是我所拥有的：

```
 <input type="text" id="search_filter" style="COLOR: #999" onFocus="if (this.value == 'sometext') {this.value=''; this.style.color='#000';}" name="filter" value="someothertext" />
        <div id="links">    
            <ul>
                <li><a href="someurl">Link 1</a></li>
                <li><a href="someurl">Link 2</a></li>
                <li><a href="someurl">And so on</a></li>
            </ul>
        </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:44:36.103

```
<input type="text" id="input1"/>
<a href="someUrl">Link</a>

<script>

   $(function(){
           $("#input1").keypress(function(event){
                var ENTER = 13;
                if ( event.which == ENTER ) {
                     $(this).next("a").click();
                     e.preventDeafult();
                     return false;
                }
           })
   })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:30:56.850

**注意keypress**和**keydown**之间的区别。Keypress 不会在某些键上触发。所以这是我使用 jQuery 和 keydown 的实现：

```
editorField.keydown( function(e) {
        switch ( e.keyCode ) {
        //13 for Enter
        case 13:
            saveCell();
            break;

        case 40: //I don't remeber which one of those is 'tab'. 
        case 9: //The other should be right arrow
            cell.parent().next().find('td.value').dblclick();
            return false;
            break;
        default:
            break;
        }
    } ); 
```

这是我的内联单元格编辑代码，但希望你能根据自己的需要调整它。

# ios5 - UITABBAR IOS 5.0如何定制？

> ID：10088016
> 
> 赞同：0
> 
> 时间：2012-04-10T11:38:34.073
> 
> 标签：ios5, uitabbaritem

我必须自定义标签栏项目中的图像才能在我的图标中插入图像，我该怎么办？我从朋友那里听说我应该创建一个新的 xib 并使用它来定制一个新的标签栏项目。这是真的吗？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:50:17.167

只需将以下方法放入

> appdelegate.m

文件

```
- (void)customizeAppearance

{

// Costomise UITabBar   

// Note you can also specify “finished” and “unfinished” images if you wish to modify the manner in which the selected & unselected images appear.

UIImage *tabBackground = [[UIImage imageNamed:@"tab_bg"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

[[UITabBar appearance] setBackgroundImage:tabBackground];

[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tab_select_indicator"]];

} 
```

这可能会对您有所帮助 [请在此站点上找到更多信息](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# java - 无法通过序列化正确给出值

> ID：10088019
> 
> 赞同：2
> 
> 时间：2012-04-10T11:38:47.593
> 
> 标签：java, serialization, reference, copy, clone

我想这将是一个非常基本的问题，但我一直在寻找答案几个小时，但我无法弄清楚我的代码哪里出错了。所以：我确实序列化了一个名为 SerializableObject 的对象，而不是读回它。在反序列化方法中，我得到一个临时对象，我想将其复制到另一个 new `SerializeableObject`，之后我想使用它，但我无法正确复制它，但是临时对象在反序列化时正确获取了值。这是我的课程： SeralizeableObject：

```
public class SerializableObject implements Serializable, Cloneable{

private Vector<int[]> mixMade;
private Vector<int[]> stepsMade;
private long time;
private int steps;
private int winnerState;

public SerializableObject(Vector<int[]> mixMade, Vector<int[]> stepsMade,
 long time, int steps, int winnerState) {
    this.mixMade = mixMade;
    this.stepsMade = stepsMade;
    this.time = time;
    this.steps = steps;
    this.winnerState = winnerState;
}

@Override
public String toString() {
    String str = "";
    for(int[] mixEl : mixMade){
        str += mixEl[0] + ", " + mixEl[1] + "|";
    }
    str += " mixes\n";
    for(int[] stepEl : stepsMade){
        str += stepEl[0] + ", " + stepEl[1] + "|";
    }
    str += " steps\n";
    str += "time: " + time + ", stepsnum: " + steps + ", 
winstate: " + winnerState;
    return str;
}    

@Override
public SerializableObject clone() {
    SerializableObject serObj;
    Vector<int[]> mixMadeTemp   = new Vector<int[]>();
    Vector<int[]> stepsMadeTemp   = new Vector<int[]>();
    for(int i = 0; i < mixMade.size(); ++i){
        mixMadeTemp.add(mixMade.get(i));
    }
    for(int i = 0; i < stepsMade.size(); ++i){
        stepsMadeTemp.add(stepsMade.get(i));
    }
    serObj = new SerializableObject(mixMadeTemp, stepsMadeTemp, 
time, steps, winnerstate);
    return serObj;
} 
```

}

序列化器：

```
public class ObjectSerializator {

public ObjectSerializator() {

}

public void toFile(String filepath, SerializableObject serObj){
    ObjectOutputStream out;
    try{
        FileOutputStream fileOut = new FileOutputStream(filepath);
        out = new ObjectOutputStream(fileOut);
        out.writeObject(serObj);
    }catch (IOException ex) {

    }    
}

public void fromFile(String filepath, SerializableObject serObj){
    SerializableObject tempSerObj;
    try {
        FileInputStream fileIn = new FileInputStream(filepath);
        ObjectInputStream in = new ObjectInputStream(fileIn);

        tempSerObj = (SerializableObject) in.readObject();
        System.out.println(tempSerObj + "TEMP");
        serObj = tempSerObj.clone();

        in.close();
        fileIn.close();
    } catch (IOException ex) {

    } catch (ClassNotFoundException ex) {

    }
} 
```

}

注意： serobj 引用正确地指向了良好的值，在 fromFile 方法 A filechooser 类中，用户可以从中选择要加载的文件：

```
public class FileChooser extends JFileChooser{

private ObjectSerializator serializator;

public FileChooser() {
    serializator = new ObjectSerializator();
}

public void load(SerializableObject serObj){
        int retValue = showOpenDialog(null);
        serializator.fromFile(getSelectedFile().getAbsolutePath(), serObj);
}} 
```

比在我的大型机中，我从按钮操作中调用它

```
public void load(){
    SerializableObject serObj = new SerializableObject(new Vector<int[]>(), new 
Vector<int[]>(), 10, 10, 200);
    fileChooser.load(serObj);
    System.out.println(serObj + " LAST");
} 
```

这是我的输出：

```
3, 2|4, 3| mixes

0, 0|0, 1|0, 0| steps

time: 6000, stepsnum: 3, winstate: 0TEMP

-------------------

 mixes

 steps

time: 10, stepsnum: 10, winstate: 200 LAST 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:52:40.237

您反序列化的对象会丢失。

在您的`fromFile`方法中，您有以下行：

```
serObj = tempSerObj.clone(); 
```

但是`serObj`是该方法的一个论据。上面的行更改了*局部* `serObj`变量，而原始对象保持不变。调用方法 ( `load`) 仍然持有对旧（原始）对象的引用。

您的`fromFile`方法不应接受 a`SerializableObject`作为参数；相反，它应该返回一个。然后该`FileChooser.load`方法也应该返回它。最后，`load`主框架的方法应该类似于：

```
public void load() {
    SerializableObject originalObject = new SerializableObject(new Vector<int[]>(), new Vector<int[]>(), 10, 10, 200);
    // Here you can do something with the newly created object, such as save it to a file.

    SerializableObject deserializedObject = fileChooser.load();
    System.out.println(deserializedObject + " LAST");
} 
```

# sql - 在sql server中将int增加1？

> ID：10088021
> 
> 赞同：3
> 
> 时间：2012-04-10T11:38:50.213
> 
> 标签：sql, sql-server, null

`1`如果下面的 SQL 返回，我该如何返回`NULL`？

类似的东西（伪代码）：

```
if sql return NULL value 
then set value to one 
otherwise returning sql result value. 
```

如果 SQL 结果为 NULL，是否有任何 SQL 用于将默认值定义为 1？

```
SELECT  Max(iCategoryOrder)+1 
FROM    [IVRFlowManager].[dbo].[tblCategory] 
WHERE   iCategoryLevel = 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:40:45.057

**选项1**

采用[`ISNULL()`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

> **描述**
> 
> 用指定的替换值替换 NULL。

```
SELECT    MAX(ISNULL(iCategoryOrder, 0))+1 
FROM      [IVRFlowManager].[dbo].[tblCategory] 
WHERE     iCategoryLevel = 1 
```

**选项 2**

采用[`COALESCE()`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

```
SELECT    MAX(COALESCE(iCategoryOrder, 0))+1 
FROM      [IVRFlowManager].[dbo].[tblCategory] 
WHERE     iCategoryLevel = 1 
```

> **描述**
> 
> 返回其参数中的第一个非空表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T11:39:52.483

使用 ISNULL 运算符，例如：

```
ISNULL(your_field, 1) 
```

尝试以下操作：

```
Select ISNULL(Max(iCategoryOrder), 0) + 1  
from [IVRFlowManager].[dbo].[tblCategory]  
where iCategoryLevel = 1 
```

# ruby-on-rails - ruby 1.9.3 和 rails 3.2.2 中的闪存消息问题

> ID：10088027
> 
> 赞同：1
> 
> 时间：2012-04-10T11:39:14.570
> 
> 标签：ruby-on-rails

我的应用程序中的 Flash 消息存在问题。实际上，在我的应用程序中，我使用了用于用户身份验证的设计，并且我的应用程序使用了 ruby​​ 1.9.3 和 rails 3.2.2。

当用户登录、注销并注册新帐户时，设备 flash[:notice] 工作正常。

在 Rails 中 flash[:notice] 和 flash[:alert] 是默认的 flash 消息。

刷新消息仅在页面重新加载或用户从一页到另一页否定时显示一次

问题是当用户登录时，设备 flash[:notice] 正在显示，但是当我重新加载页面时 flash[:notice] 正在显示，但在 rails 中 flash[:notice] 只会显示一次

实际上问题是当我尝试创建一个新帖子时，我已经重定向到显示页面，并且我已经为 flash 消息编写了辅助方法，我从应用程序布局中调用了这个方法来显示 flash 消息。

在控制器创建方法中

```
def create
  @asset = Asset.new(params[:asset])
  @asset.user_id = current_user.id

  respond_to do |format|
    if @asset.save
      format.html { redirect_to @asset, alert: 'Asset was successfully created.' }
      format.json { render json: @asset, status: :created, location: @asset }
    else
      format.html { render action: "new" }
      format.json { render json: @asset.errors, status: :unprocessable_entity }
    end
  end     
end 
```

显示 flash 消息的 Helper 方法

```
FLASH_TYPES = [:error, :warning, :success, :message,:notice,:alert]

def display_flash(type = nil)
  html = ""  
  if type.nil?
    FLASH_TYPES.each { |name| html << display_flash(name) }
  else
    return flash[type].blank? ? "" : "<div class=\"#{type}\"><p>#{flash[type]}</p>     </div>"
  end
  html.html_safe
end 
```

我已经从应用程序布局中调用了这个方法

```
= display_flash 
```

我尝试过使用 flash[:alert]、flash[:error]、flash[:message] 但视图页面上没有消息显示，我尝试过使用名为 flash_message 的 gem，这也只显示 flash[:notice]

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T11:55:19.877

嗨，我正在使用这种方法来显示 Flash 消息。首先我做部分

shared中的_flash.html.erb。这个部分的代码

```
 <% [:alert, :notice, :error].select { |type| !flash[type].blank? }.each do |type| %>
<p>
  <% if flash[:notice] %>
    <div class="alert-message error">
      <h2 style="color: #ffffff;">Notice:</h2> <br/>
      <%= flash[type] %>
    </div>
<% elsif flash[:error] %>
    <div class="alert-message error">
      <h2 style="color: #ffffff;">Errors</h2> <br/>
      <% flash[:error].each_with_index do |error, index| %>
          <%= index+1 %>. <%= error %> <br/>
      <% end %>
    </div>
  <% end %>

   </p>
  <% end %> 
```

我在这样的应用程序布局中调用它

```
 <div id="flash">
    <%= render :partial => 'shared/flash', :object => flash %>
  </div> 
```

并且在控制器使用通知中，像这样发出警报

```
 flash[:notice] = 'Admin was successfully created.'
  flash[:alert] = 'Admin was successfully created.' 
```

但是为了显示错误，我使用数组，因为它可能不止一个。像这样

```
 def create
         @user = User.new(params[:user])
         @user.is_activated = true
# @user.skip_confirmation!
if @user.save
  role = Role.find_by_name("admin")
  RoleUser.create!(:user => @user, :role => role)
  redirect_to :controller => '/administrator', :action => 'new'
  flash[:notice] = 'Admin was successfully created.'
else
  flash[:error]=[]
  @user.errors.full_messages.each do |error|
    flash[:error] << error
  end

  render :action => "new"
end 
```

结尾

在 application.js 中添加这一行

```
 setTimeout("$('#flash').html(' ');", 10000); 
```

使用它并享受！！！！！！！！！！！！！！！！

# jquery - jQuery：关于控制结构中的布尔值

> ID：10088028
> 
> 赞同：0
> 
> 时间：2012-04-10T11:39:16.037
> 
> 标签：jquery, boolean, control-structure

我有这个代码：

```
 console.log($(domElem).attr('selected'));

  console.log(typeof $(domElem).attr('selected'));

  if($(domElem).attr('selected') == true);
  {
      alert("there is one element selected");
  } 
```

输出是：

```
false
boolean
false
boolean
false
boolean
... 
```

我预计“这是一个选定的元素”从未显示过，但它显示的次数与项目存在的次数一样多。

jQuery 1.3.2

任何想法？

哈维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:07:12.763

在条件后面加上一个分号：

```
if($(domElem).attr('selected') == true);  
 {
       alert("there is one element selected");  
 } 
```

终止“if”语句，就像你写的一样：

```
if($(domElem).attr('selected') == true){}; 
alert("there is one element selected"); 
```

将其更改为：

```
if($(domElem).attr('selected') == true)
{
       alert("there is one element selected");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:07:32.337

这是一个很难回答的问题，因为您想要实现的目标有点不清楚。

如果它只是检查是否选择了列表项，我会这样做：

HTML（是的，我把它从 w3schools 拿走了，对不起！[为什么这很糟糕](http://www.w3fools.com)）：

```
<select id="selectedLIST">
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
</select> 
```

jQuery

```
var list = $('#selectedLIST');
$(list).change(function(){
    $.each(list.children(), function(index, value){
        if($(value).attr('selected') === true){
            alert("there is one selected");
        }
    });
}); 
```

这将生成一个列表，当用户在列表中选择一个新元素时，将根据 HTML 标记上的“selected”属性生成一个弹出窗口，显示“这是一个已选择”。

此外，在 if 语句之后放置分号会“终止”该语句。

忘记放置分号也会迫使 JS 引擎插入分号。

# asp.net - 将值绑定到 GridView

> ID：10088039
> 
> 赞同：0
> 
> 时间：2012-04-10T11:39:59.273
> 
> 标签：asp.net, gridview

我有一个包含以下值的列表

```
 List<Calculations> calcs = new List<Calculations>();
 Calculations cal = new Calculations();
    cal.TotalTotalC2 = Convert.ToInt32(reader["TotalTotalC2"].ToString());
     cal.TotalTotalC3 = Convert.ToInt32(reader["TotalTotalC3"].ToString());
     cal.TotalC1C4IOM = Convert.ToInt32(reader["TotalC1C4IOM"].ToString());
    cal.TotalC1C4MDR = Convert.ToInt32(reader["TotalC1C4MDR"].ToString());
calcs.Add(cal); 
```

我需要以下表格式绑定这些数值。左侧纯文本和右侧绑定值。

![在此处输入图像描述](../Images/219404829265c87e8435c4f9b802d35f.png)

有人可以告诉我如何使用 GridView 以上述格式绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:15:47.080

您必须在 RowDataBound 事件中编写代码，并在每次迭代中检查行号并根据行号将自定义列表的列文本绑定到列，我认为没有任何自动函数可以将列名绑定到网格！！！让我知道你是否找到了直接简单的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:41:36.793

我必须动态生成一个 DataTable，然后将它绑定到 GridView

```
 DataTable dt=new DataTable();
    dt.Columns.Add("Title", typeof(string));
    dt.Columns.Add("Count", typeof(int));

 foreach (Calculations item in calcs )
        {
    dt.Rows.Add("Total ...", item.TotalTotalC2);
    dt.Rows.Add("Total ...", item.TotalTotalC3);
} 
```

# .net - 如何使第一个标签中的数字大于第二个标签

> ID：10088052
> 
> 赞同：1
> 
> 时间：2012-04-10T11:40:45.880
> 
> 标签：.net, vb.net, conditional-statements

我制作了一个程序，它生成随机数并将数字放在两个单独的标签中。如何使第一个标签中的数字大于第二个标签中的数字。

这是我生成随机数的代码：

```
Dim nRandom As Integer
Dim nRandom1 As Integer
Dim randomgenerator As New Random

'Displays random numbers from 1 to 10
nRandom = randomgenerator.Next(1, 11)
nRandom1 = randomgenerator.Next(1, 11)
'Displays random numbers on the first label
lblNum1.Text = Convert.ToString(nRandom)
'Displays random numbers on the second label
lblNum2.Text = Convert.ToString(nRandom1) 
```

我想让第一个数字大于第二个数字，因为应该减去数字并且我试图避免得到否定的答案

该程序在 Windows 窗体应用程序 Visual Basic 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:45:05.737

只需比较您生成的两个随机数。如果`nRandom1`大于`nRandom`，则分配`nRandom1`给`lblNum1`和`nRandom`给`lblNum2`。

```
If nRandom >= nRandom1 Then
    'nRandom is greater, put it in first textbox
    lblNum1.Text = Convert.ToString(nRandom)
    lblNum2.Text = Convert.ToString(nRandom1)
Else
    'nRandom1 is greater, put it in first textbox
    lblNum1.Text = Convert.ToString(nRandom1)
    lblNum2.Text = Convert.ToString(nRandom)
End If 
```

第二种方法对数字进行置换，使 nRandom 始终大于或等于 nRandom1。

```
If nRandom1 > nRandom Then
    'Permute values
    Dim temp As Integer = nRandom
    nRandom = nRandom1
    nRandom1 = temp
End If
lblNum1.Text = Convert.ToString(nRandom)
lblNum2.Text = Convert.ToString(nRandom1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:43:30.987

计算第二个数字并`nRandom1`用作生成另一个数字的限制器。您已经使用`minValue`参数指定`1`为参数。

```
nRandom1 = randomgenerator.Next(1, 11)
nRandom = randomgenerator.Next(nRandom1 + 1, 11) 
```

`minValue`是包容的，所以我们需要调整它，你应该调整它以检查`nRandom1`不超过最大值。

# c# - OleDbDataAdapter Fill 方法导入更多行

> ID：10088055
> 
> 赞同：1
> 
> 时间：2012-04-10T11:41:00.793
> 
> 标签：c#, datatable, fill, oledbdataadapter

我正在将 excel 导入 DataTable。excel 文件包含 50x7 的单元格和数据。问题是 Fill() 方法导入 368(?) 行，而不管数据在前 50 行中。知道可能是什么问题吗？

我正在使用 OleDbDataAdapter 进行导入。

```
 connectionString = "provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + filename + ";Extended Properties=Excel 8.0;";
 string  commandString = "select * from [" + worksheetName + "]";
 OleDbDataAdapter adapter = new OleDbDataAdapter(commandString, connectionString);
 DataTable fileTable = new DataTable();
 adapter.Fill(fileTable); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:59:56.390

试试这个来删除空单元格`DataTable`：

```
adapter.Fill(fileTable);
fileTable = fileTable.AsEnumerable()
           .Where(row => !row.ItemArray.All(f => f is System.DBNull || String.IsNullOrWhiteSpace(f.ToString())))
           .CopyToDataTable(); 
```

请注意，它还会删除工作表内的空行。

# php - mysql/php 搜索引擎中的结果太多且结果缓慢

> ID：10088057
> 
> 赞同：2
> 
> 时间：2012-04-10T11:41:05.977
> 
> 标签：php, mysql

好的，所以我可能会看到为什么我会得到很多结果，因为我使用了 MATCH 查询。我想要的是输出相关搜索。例如，如果搜索是“对绿色感兴趣”，它只输出那些感兴趣的表格中的结果，或者如果有意义的话。

现在我得到了一切的结果，而且它真的很慢。我不想使用 mysql/php 以外的任何东西来实现这一点，所以没有第三方搜索引擎，如 Lucene 或替代品。

这是搜索代码：

```
 <?php

mysql_connect("webhost", "user", "pass") or die(mysql_error());
mysql_select_db("replies") or die(mysql_error());

// Retrieve result using term
$term = $_POST['term'];

$sql = mysql_query("SELECT * from 'replies' `where interest_in_green_it` MATCH '%$term%' or `green_it_good_thing MATCH` '%$term%' or    `green_it_save_environment` MATCH '%    $term%' or  `green_it_save_money` MATCH '%$term%' or    `green_it_incentive` MATCH '%$term%' or `uel_green_it MATCH` '%$term%' or   `MATCH_green_it` MATCH '%$term%' or     `printing_costs` MATCH '%$term%' or `travel_costs` MATCH '%$term%' or   `comments` MATCH '%$term%' or   `uel_green_modules` MATCH '%$term%' or  `year_of_study` MATCH '%    $term%' or      `questionnaire_filled` MATCH '%$term%'");

while ($row = mysql_fetch_array){
echo 'ID: '.$row['ID'];
echo '<br/> Do you have an interest in green IT?: '.$row['interest_in_green_it'];
echo '<br/> Do you think green IT is a good thing?: '.$row['green_it_good_thing'];
echo '<br/> Would you consider green IT if it meant saving the environment?: '.$row['green_it_save_environment'];
echo '<br/> Would you consider green IT if it meant saving money?: '.$row['green_it_save_money'];
echo '<br/> What would be the better incentive to practice green IT?: '.$row['green_it_incentive'];
echo '<br/> DO you think UEL is doing enough to practice green IT? : '.$row['uel_green_it'];
echo '<br/> Do you like green IT?: '.$row['like_green_it'];
echo '<br/> Your estimated monthly travel costs to UEL: '.$row['travel_costs'];
echo '<br/> Your estimated printing costs at UEL at any one time: '.$row['printing_costs'];
echo '<br/> Your comments: '.$row['comments'];
echo '<br/> Would you like to see more green modules at UEL?: '.$row['uel_green_modules'];
echo '<br/> What is your year of study?: '.$row['year_of_study'];
echo '<br/> If you did not fill in the questionnaire why not?: '.$row['questionnaire_filled'];
echo '<br/><br/>';
}

$_GET = array_map('trim', $_GET); 
$_POST = array_map('trim', $_POST); 
$_COOKIE = array_map('trim', $_COOKIE); 
$_REQUEST = array_map('trim', $_REQUEST); 
if(get_magic_quotes_gpc()): 
$_GET = array_map('stripslashes', $_GET); 
$_POST = array_map('stripslashes', $_POST); 
$_COOKIE = array_map('stripslashes', $_COOKIE); 
$_REQUEST = array_map('stripslashes', $_REQUEST); 
endif; 
$_GET = array_map('mysql_real_escape_string', $_GET); 
$_POST = array_map('mysql_real_escape_string', $_POST); 
$_COOKIE = array_map('mysql_real_escape_string', $_COOKIE); 
$_REQUEST = array_map('mysql_real_escape_string', $_REQUEST); 

?> 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:49:02.160

“我怎样才能改进这个查询？”

使用[索引](https://dev.mysql.com/doc/refman/5.0/en/create-index.html)。[`FULLTEXT`索引](https://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)在这里可能很有用。

我相信最新的 InnoDB Engine 也支持 FULLTEXT 索引。(MySQL 5.6+)

要获得所有可能的结果，请计算一个分数，以确定一个元组与您的条件的匹配程度`ORDER BY score DESC LIMIT 20`，并获得最佳的 20 个匹配项。有关示例，请参[见此答案。](https://stackoverflow.com/a/344213/1220835)

# c++ - Qt 对象信号未连接到方法（处理程序）

> ID：10088059
> 
> 赞同：2
> 
> 时间：2012-04-10T11:41:13.140
> 
> 标签：c++, qt, qgraphicsscene

我在处理 Qt 中的点击时遇到了问题。我有以下课程：

```
class MyRectItem : public QObject, public QGraphicsEllipseItem{
    Q_OBJECT
public:       
   MyRectItem(double x,double y, double w, double h)
   : QGraphicsEllipseItem(x,y,w,h)     
   {}

public slots:      
    void test() {
        QMessageBox::information(0, "This", "Is working");
        printf("asd");
    }
signals:       
    void selectionChanged(bool newState); 

protected:       
    QVariant itemChange(GraphicsItemChange change, const QVariant &value) {
        if (change == QGraphicsItem::ItemSelectedChange){
            bool newState = value.toBool();
            emit selectionChanged(newState);
        }
        return QGraphicsItem::itemChange(change, value);
    }
}; 
```

现在我想将一个插槽连接到信号，我执行以下操作：

```
 MyRectItem *i = new MyRectItem(-d, -d, d, d);
       i->setPen(QPen(Qt::darkBlue));
       i->setPos(150,150);
       // canvas is a QGraphicsScene
       canvas.addItem(i);
       i->setFlags(QGraphicsItem::ItemIsSelectable | QGraphicsItem::ItemIsMovable);
       QObject::connect(&canvas, SIGNAL(selectionChanged(bool)), this, SLOT(test())); 
```

当我运行它时，会显示圆圈，`canvas`但是当我单击圆圈时没有任何反应，控制台显示以下内容：

```
Object::connect: No such signal QGraphicsScene::selectionChanged(bool) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:57:37.510

您是否已经尝试过：

```
 QObject::connect(&canvas, SIGNAL(selectionChanged()), this, SLOT(test())); 
```

据我所知，来自 QGraphicsScene 的信号 selectionChanged 没有任何参数：http: [//qt-project.org/doc/qt-4.8/qgraphicsscene.html#selectionChanged](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#selectionChanged)。

在这里，您尝试将来自 QGRaphicsScene 的信号连接到插槽“测试”，而不是您在 MyRectItem 中定义的信号。如果您想连接来自 MyRectItem 的信号，您应该执行以下操作：

```
QObject::connect(i, SIGNAL(selectionChanged(bool)), this, SLOT(test())); 
```

第一个参数是信号的来源（发送者）。

杰拉德

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:47:06.263

控制台消息就是您的答案。由于您没有指定您使用的 Qt 版本，我将假设 4.8 作为最新的稳定版本。从[这里](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#signals)可以看出，确实没有这样的信号

```
selectionChanged(bool) 
```

但是，有一个信号

```
selectionChanged() 
```

# solr - 索尔。不存储原始字段，而是过滤一个

> ID：10088063
> 
> 赞同：3
> 
> 时间：2012-04-10T11:41:20.523
> 
> 标签：solr, lucene, indexing

我正在尝试索引维基百科的转储。为了为文章提供摘要（或者，将来可能启用突出显示功能），我想在没有 WikiMarkup 的情况下存储他们的文本。对于第一次尝试，我只留下字母数字符号就足够了。所以问题是可以存储在字符级别过滤的字段，而不是原始字段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:21:36.140

没有办法开箱即用。如果您希望 Solr 执行此操作，您可以创建自己的[UpdateHandler](http://lucene.apache.org/solr/api/org/apache/solr/update/UpdateHandler.html)，但这可能有点棘手。最简单的方法是在将文档发送到 Solr 之前对其进行预处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:21:11.570

默认情况下，Solr 在索引时间分析器为您的 fieldType 应用过滤器之前存储原始字段值。所以默认情况下它不存储过滤后的值。但是，您有两种选择来获得您想要的结果。

1.  您可以在查询时对字段应用与在索引时应用相同的过滤器来删除 wiki 标记。有关更多详细信息，请参阅[Solr Wiki 上的分析器、标记器和标记过滤器。](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)
2.  在将数据加载到 Solr 之前，您可以在单独的过程中将过滤器应用于数据，然后 Solr 将存储过滤后的值，因为您将在过滤状态下传递它们。

# sql - 在 SQL Server 2000 中处理大型表的性能

> ID：10088070
> 
> 赞同：0
> 
> 时间：2012-04-10T11:41:31.980
> 
> 标签：sql, sql-server, sql-server-2000, sqlperformance

我有一张`tbl_ECR_ProductData`近 92356143 行的表。每周将 100000 行导入此表。

该表有 16 列，其中 2 列构成主键，其余列的类型为`varchar`.

我的问题是当我根据剩余的列值搜索表格时.. 它需要很长时间，将近 10 分钟。

我怎样才能最大限度地减少时间？请在这方面帮助我..感谢您的帮助...提前致谢！表结构如下

`CREATE TABLE [tbl_ECR_ProductData]( [Serial Number] [varchar](255) NOT NULL, [Act Number] [varchar](255) NULL, [Act Date] [datetime] NULL, [Act Location] [varchar](255) NOT NULL, [Manufacturer] [varchar](255) NULL, [ManufacturerPN] [varchar](255) NULL, [Act Description] [varchar](255) NULL, [Act PtNumber] [varchar](255) NULL, [Act Code] [varchar](255) NULL, [Act DateCode] [varchar](255) NULL, [Pmrl] [varchar](255) NULL, [Act ReceiveDate] [datetime] NULL, [Act Channel] [varchar](255) NULL, [Act Supplier] [varchar](255) NULL, [ImportDate] [datetime] NULL
CONSTRAINT [PK_tbl_ECR_ProductData] PRIMARY KEY CLUSTERED ( [Serial Number] ASC, [Act Location] ASC )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY] )`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:45:01.923

不看代码很难说如何将时间最小化。但是，这些下面的链接应该可以帮助您找出问题所在并可能解决它们。我觉得这些很有帮助。

[http://www.simple-talk.com/sql/performance/finding-the-causes-of-poor-performance-in-sql-server,-part-1/](http://www.simple-talk.com/sql/performance/finding-the-causes-of-poor-performance-in-sql-server,-part-1/)

[http://www.simple-talk.com/sql/performance/finding-the-causes-of-poor-performance-in-sql-server,-part-2/](http://www.simple-talk.com/sql/performance/finding-the-causes-of-poor-performance-in-sql-server,-part-2/)

# android - 如何在 Dropbox 应用中制作菜单？

> ID：10088071
> 
> 赞同：2
> 
> 时间：2012-04-10T11:41:32.420
> 
> 标签：android, android-layout

我想在我的 android 应用程序中制作菜单，它看起来像 dropbox-app 中的菜单。

我想我必须使用片段，我已经做过，但我找不到任何关于如何实现它的例子。也许有人可以给我任何提示如何制作这个菜单，例如：

在这里，您可以找到 Dropbox 应用的示例图片：

![图片截图](../Images/839b5e6158b31e5add50a9852df28f42.png)

您只需单击一下即可打开它。我想在gridview上使用它。也许我只是不知道要搜索的此类菜单的正确名称。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:09:13.617

3.1 API 支持操作栏，但您可以为此使用上下文菜单 或者这也可以使用“滑动抽屉”来完成

# android - 安卓定位问题

> ID：10088072
> 
> 赞同：0
> 
> 时间：2012-04-10T11:41:32.583
> 
> 标签：android

所以我的问题很简单——我想使用 XML 布局来精确控制小部件在多个设备上的定位。为此，我彻底阅读了有关支持多种设备的谷歌[文档。](http://developer.android.com/guide/practices/screens_support.html)根据[这](http://developer.android.com/guide/practices/screens_support.html#testing)部分，WVGA854 和 HVGA 都被认为是“普通屏幕”尺寸。所以理论上，在 WVGA854 上放置一个小部件应该看起来与 HVGA 相同。但是，生成的屏幕截图显示不同。![在此处输入图像描述](../Images/24c61dc99a6f2d3e1d217ca1915ae17e.png)

**小部件在 WVGA854 皮肤上显得相对较高**。XML 代码如下所示，位于 layout-normal/ 文件夹下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/button1"
        android:src="@drawable/icon_unlock"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="300dp"
        android:text="Button" />

</RelativeLayout> 
```

我构建的绘图具有适当的比例（[建议](http://developer.android.com/guide/practices/screens_support.html#DesigningResources)为 3:4:6:8 ）。那么为什么会发生这种定位不匹配呢？我开始认为使用 XML 来定位事物是毫无结果的。我的应用程序需要非常准确的小部件定位，所以即使这种轻微的不匹配也是一个问题。有什么帮助我可以解决这个问题吗？

**编辑：** 我想要的是小部件的放置方式使得从顶部到底部的边距的比率在设备之间完全相同。从截图可以看出，这个比例对于WQVGA854和HVGA是不一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:51:19.397

“正常屏幕”尺寸并不意味着屏幕具有完全相同的倾角。您需要将其视为一个存储桶，其中包含许多不同的屏幕尺寸，它们的物理尺寸都相似。

所以使用固定大小的边距和填充不会（很容易）达到你需要的效果。因此，请澄清您的问题，并举例说明您到底想要实现什么。

# asp.net-mvc - 注销操作出现问题

> ID：10088073
> 
> 赞同：-2
> 
> 时间：2012-04-10T11:41:36.843
> 
> 标签：asp.net-mvc

这是我的注销操作：

```
 public ActionResult Logout()
    {
        FormsAuthentication.SignOut();

        Session.Clear();
        Response.Cache.SetExpires(DateTime.Now.AddSeconds(-1));
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.Cache.SetNoStore();
        Session.Abandon();

        return RedirectToAction("Logpage", "Home");
    } 
```

它可以工作，但唯一的问题是`Goback`导航器中的注销按钮仍然有效并且它允许在注销前返回到最后一页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:44:56.773

您不能在注销操作时使整个应用程序的缓存过期；缓存到期必须在每个页面上单独设置。在这种情况下，设置缓存过期仅适用于注销视图，并且可能不会因为重定向而影响日志页面（不是 100% 确定它如何与重定向一起工作）。

# php - 我想动态地将数字放在图像上

> ID：10088075
> 
> 赞同：0
> 
> 时间：2012-04-10T11:41:50.487
> 
> 标签：php, javascript, html, css

我想动态地将数字放在图像上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:47:05.753

取两个div。为一个 div 设置背景图像并在另一个 div 上放置一些数字。使用 css 属性（如位置、z-index）将第二个 div 放在第一个 div 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:55:14.980

There are 2 ways of doing that:

1.) In the client-side: You can use the HTML5 CANVAS API. This API allows you to draw arbitrary shapes and images inside a canvas element that is rendered into the browser. So to solve your problem you could load an image inside the canvas and after that draw a number on top of it.

2.) In the server-side: You will load the image and after that draw the number inside of it using a server-side application. Eg. an application developed using PHP, ASP.NET, Python, etc. In PHP you can use the GD library to do that.

# java - 为什么这段代码不返回 NullPointerException？

> ID：10088078
> 
> 赞同：16
> 
> 时间：2012-04-10T11:41:52.127
> 
> 标签：java, nullpointerexception

```
public class Main
{
   public static void main(String []ar)
   {
      A m = new A();
      System.out.println(m.getNull().getValue());
   }
}

class A
{
   A getNull()
   {
      return null;
   }

   static int getValue()
   {
      return 1;
   }
} 
```

我在一本 SCJP 书中遇到了这个问题。代码打印出来，`1`而不是预期的 NPE。有人可以解释一下原因吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-10T11:43:03.800

基本上，您调用的是静态方法*，就好像*它是实例方法一样。这只是解决了一个静态方法调用，所以就好像你写了：

```
A m = new A();
m.getNull();
System.out.println(A.getValue()); 
```

IMO，您的代码完全合法这一事实是 Java 的设计缺陷。它允许您编写非常具有误导性的代码，`Thread.sleep`例如我经常使用的示例：

```
Thread thread = new Thread(someRunnable);
thread.start();
thread.sleep(1000); 
```

哪个线程进入睡眠状态？当前的，“当然”……

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-10T11:45:49.447

它的行为符合[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#d5e19846)：

> 空引用可用于访问类（静态）变量而不会导致异常。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-10T11:45:40.103

静态方法调用在编译时解析。编译器看到`getNull()`返回值的类型`A`是静态`getValue()`方法（并且没有同名的实例方法），因此在字节码中，实际返回值`getNull()`被忽略并被`A.getValue()`调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T11:46:36.417

getNull 函数返回一个 A 对象。getValue 被声明为静态的，并且只需要 class_name 来运行，就像在 A.getValue() 中一样。因为 getNull 返回（实际上）一个 A 对象......你会得到 1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T12:00:51.367

**System.out.println(m.getNull().getValue());** 这行代码与 **System.out.println(A.getValue());相同**

因为**getValue()**方法是静态的，并且*所有静态调用都在 java 的编译时启动*。**因此，一旦您在非静态中创建getValue()**就不会产生任何错误，这将产生错误，因为它将在运行时调用

# objective-c - iOS - 流式上传大文件（使用 NSData 分配太大文件时应用程序崩溃）

> ID：10088079
> 
> 赞同：3
> 
> 时间：2012-04-10T11:41:57.320
> 
> 标签：objective-c, ios, xcode, file-upload, nsdate

**介绍**

我目前正在对一个Vimeo风格的应用程序进行一些错误修复，即用户可以从手机或iPad录制视频，然后将视频上传给其他用户观看。由于我们现在处理上传的方式，当前的问题与上传大文件有关。

**问题**

所以问题本质上是当上传文件到服务器时，我们首先将所有必须上传的字节分配在一个*NSData*对象中。然后，这个字节串将附加到标准 HTTP Post 消息，然后接收 API 将处理它。*问题在于，对于大文件（视频很快），应用程序将简单地崩溃，因为 NSData 对象在 iDevice 上占用了太多内存。*

这是该过程的工作方式：

```
 Byte *buffer = malloc(content.defaultRepresentation.size);

    NSUInteger buffered = [content.defaultRepresentation getBytes:buffer fromOffset:0.0 length:content.defaultRepresentation.size error:nil];

    NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered];

    NSData *movieData = [NSData dataWithData:data]; 
```

我只是从保存在 iPhone 或 iPad 的标准相机胶卷中的视频中获取字节。然后我将这些字节放入一个 NSData 对象中。然后，来自这个 NSData 对象的字节串将被简单地附加到一个简单的 HTTP post 消息并发送到 API。

**问题**

那么问题是，我看到的问题是整个字节字符串必须在单个 HTTP Post 消息中发送。那么有什么方法可以加载电影文件的块并将其附加到帖子消息中，这样就不会一次占用太多内存？或者你怎么能这样做？

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:53:55.063

我建议你使用 ASIHTTPRequest 库。它可以直接从手机上传文件，而不是先将文件加载到内存中。这里的逻辑是将电影文件分成几部分来上传，称为多部分，然后以队列的方式上传

# java - Struts2 如何在没有线程的情况下获得性能？

> ID：10088081
> 
> 赞同：0
> 
> 时间：2012-04-10T11:42:01.330
> 
> 标签：java, struts2, thread-safety

在 Struts2 中，每个请求都创建动作对象。所以这里没有线程。它完全线程安全。但是它如何提供良好的性能。在这里，每个对象都在一个堆栈中工作。（但线程会创建多个堆栈执行）

它如何处理没有线程的多个请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:33:29.190

简而言之，如果您了解 S2 的工作原理，您就会知道为什么要这样设计。

在 S2 中，您的操作类也可以用作模型对象，例如将数据从 UI 传输到 bean 以及从 bean 到 UI，这是决定为每个请求创建 Action 实例的新副本的原因之一。

关于性能，如果我正确地为每个请求创建线程，那么框架必须负责同步数据以便它应该是线程安全的，这确实是一个很大的开销，最终不会提高整体性能。

S2 动作既不是 servlet 也不是控制器。我相信您对 S2 过滤器和 S2 动作类感到困惑，并且最终每个请求都有自己的请求范围 S2 动作的实例。

# php - 持续时间至分钟

> ID：10088083
> 
> 赞同：0
> 
> 时间：2012-04-10T11:42:16.273
> 
> 标签：php, template-lite

我在 Google 和 Stackoverflow 上进行了一些搜索，但没有找到任何内容

我使用模板精简版并通过它检索电影持续时间。在我的数据库中，持续时间是这样的

```
0215
0310 
```

模板 lite 或 php 中有没有办法在几分钟内显示它们？

前任：

0215 = 135

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T11:44:56.670

```
$duration = "0215";
$mins = substr($duration,0,2)*60+substr($duration,2); 
```

很简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T11:45:28.590

```
function toMinutes($duration) {
  return ltrim(substr($duration, 0, 2), '0') * 60 
           + ltrim(substr($duration, 2), '0');
} 
```

修剪是为了避免将字符串转换为八进制而不是整数，以防万一。

# java - 等待完成的 Java 进程

> ID：10088092
> 
> 赞同：1
> 
> 时间：2012-04-10T11:42:48.963
> 
> 标签：java, process

我有一个调用可执行 jar 的 java 应用程序（主体）：

```
Process p = Runtime.getRuntime().exec(java -jar C:\\PFC\\maestro.jar)
p.waitFor(); 
```

maestro.jar 是一个 Java 应用程序，它创建 2 个线程，并调用另一个可执行 jar（进程变量为“b”）。然后我像这样等待他们：

```
 b.destroy();  //kill other executable jar that is called
    manejadora.join();  //thread finished
    controlador.join();  //thread finished
    System.out.println("all finished"); 
```

maestro.jar 运行正确，当我运行它时它在 Eclipse 上显示“终止”，所以没有问题。

当主体尝试运行 maestro.jar 时，它会正确运行，但是当 maestro.jar 已经完成时，主体会继续在“p.waitFor()”上等待 maestro.jar。

我不明白为什么。

你能给我一些关于这个的方向吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:52:26.417

这可能是因为进程可能会在控制台上输出您没有在单独的线程中使用的东西。阅读这篇文章了解更多信息：

[http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

apache exec 库很好地为您完成所有这些事情.. 使用该库来解决您的问题..

[http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:40:58.647

问题解决了。

我不得不退出所有“System.out.println();” 句子。

所以我必须做一个日志才能看到程序活动。

谢谢大家 ：-）

# php - 某些设备的令牌无效

> ID：10088095
> 
> 赞同：4
> 
> 时间：2012-04-10T11:42:55.837
> 
> 标签：php, apple-push-notifications, devicetoken

给定：

*   工作 iPod 应用程序
*   php中的服务器端（修改过的easyapns）。

我正在沙箱中发送请求 ssl://gateway.sandbox.push.apple.com:2195 如果我正在向 ssl://gateway.push.apple.com:2195 发送请求，则没有返回错误，但是通知没有到达。在这种情况下，如果我发送完全错误的设备令牌（例如 12345），APN 仍然没有返回错误。

问题：APN 向查询增强通知格式返回 status_code => 8（用于说明码头：无效令牌），并为 5 个设备的 5 个令牌中的 4 个返回错误代码。

我有正确的 dev crtificate，至少 iPod 的应用程序开发人员是这样说的，该开发人员将该证书发送给我。并且 iPod 的应用程序开发人员认为应用程序每次都发送正确的开发令牌（我不知道如何在没有 mac 和开发人员工具的情况下检查设备令牌）。

检查：

*   服务器端口 2195,2196 已打开
*   我的 iPod 连接到网络的路由器设置正确（并且用于接收的端口 5223 已打开） - 我在“iPusher”和“iPush 测试”应用程序上进行了测试
*   连接APN成功
*   尝试从本地机器发送
*   尝试从 VPS 发送
*   已选中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:21:05.373

当我遇到这个问题时，原来是因为密钥和证书不匹配。尝试使用 openssl 连接：

`openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert cert.pem -key key.pem`

直到喷出一堆以“已连接”开头的东西，你才没有正确连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T09:16:10.783

我们面临着同样的问题。问题出在配置文件中：它是生产环境，但对于沙盒来说，它必须是开发环境。我们在[此评论中找到了更多描述](https://stackoverflow.com/questions/16501519/apns-invalid-token-8#comment23730118_16502533)

# jquery - Jquery 从跨度中获取价格，我想让它成为静态的

> ID：10088096
> 
> 赞同：0
> 
> 时间：2012-04-10T11:42:58.927
> 
> 标签：jquery, static, field, html, creation

我做这个功能：

```
function price(val){
var test = $('span.hikashop_product_price_full:visible').text();
var test2 = test.split('%');
var test3 = test2[1].split(' ');
var test4 = test3[0].replace(',','.');
var eyy = parseFloat(test4) *val/100 + parseFloat(test4);
eyy = eyy.toFixed(2)
var ett = test.replace(test3[0]+' '+test3[1],'<span class=\"hikashop_product_price hikashop_product_price_0 hikashop_product_price_with_discount\">'+eyy+' '+test3[1]+'</span>');
$('span.hikashop_product_price_full:visible').html(ett);

} 
```

我从动态`<span>`标签中获取一个值（说它是动态的，因为它会根据其他字段而变化）。我有一个领域

```
<select id="custome_vara" name="data[item][custome_vara]" size="1" onchange="price(this.value);">
<option value="" id="custome_vara_" selected="selected">alb</option>
<option value="20" id="custome_vara_20">stejar auriu</option>
<option value="30" id="custome_vara_30">moreiche</option>
</select> 
```

每次我调用它都会触发。我只需要运行一次即可添加`%`到初始价格。

跨度看起来像这样

```
<span class="hikashop_product_discount">-10%</span><span class="hikashop_product_price hikashop_product_price_0 hikashop_product_price_with_discount">51,34 €&lt;/span> </span> 
```

问题：

当我调用函数 price() 时，它会在此函数上运行选择并将选择设为 int。如何使选择成为静态，并且字段选择/选项在此静态选择中添加一个百分比，每个选项仅一次。

我希望你明白。

对不起我的英语不好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:57:21.113

改变

```
<select id="custome_vara" name="data[item][custome_vara]" size="1" onchange="price(this.value);"> 
```

到

```
<select id="custome_vara" name="data[item][custome_vara]" size="1"> 
```

然后添加：

```
$('#custome_vara').one('change',function(){
    price($(this+'option:selected').val());
}); 
```

编辑：为了使您的意图明确，我将在此处发布一些“错误”：

首先，您缺少以下标记示例：

```
'span.hikashop_product_price_full:visible' 
```

第二：

```
eyy = eyy.toFixed(2) 
```

应该：

```
eyy = eyy.toFixed(2); 
```

第三：

```
'<span class=\"hikashop_product_price hikashop_product_price_0 hikashop_product_price_with_discount\">' 
```

可以写成：

```
'<span class="hikashop_product_price hikashop_product_price_0 hikashop_product_price_with_discount">' 
```

我创建了这个小提琴页面来帮助我们互相理解：http: [//jsfiddle.net/2fxxD/](http://jsfiddle.net/2fxxD/)

EDIT2：我想我明白你想要什么。在此处查看以下操作：http: [//jsfiddle.net/2fxxD/3/](http://jsfiddle.net/2fxxD/3/)

```
function priceNew(val) {
    var discountedPrice = $('.hikashop_product_price_with_discount');
    var percentOff = $('.hikashop_product_discount');
    var price = discountedPrice.text().split(' ');
    var decimalPrice = price[0].replace(',', '.');
    var eyy = parseFloat(decimalPrice) * val / 100 + parseFloat(decimalPrice);
    eyy = eyy.toFixed(2);
    var newPrice = eyy + ' ' + price[1];
    discountedPrice.text(newPrice);
    percentOff.text('-' + val + '%');
    $('.hikashop_product_price').text(newPrice);
}

$('#custome_vara').one('change', function() {
    priceNew($(this + 'option:selected').val());
}); 
```

标记：

```
<select id="custome_vara" name="data[item][custome_vara]" size="1">
    <option value="" id="custome_vara_" selected="selected">alb</option> 
    <option value="20" id="custome_vara_20">stejar auriu</option>
    <option value="30" id="custome_vara_30">moreiche</option>
</select>
<div>
<span class="hikashop_product_price_full" id="hikashop_product_price_full"> 
    <span class="hikashop_product_discount">-10%</span>
    <span class="hikashop_product_price hikashop_product_price_0 hikashop_product_price_with_discount">51,34 €&lt;/span> 
    </span>
</div> 
```

# functional-programming - Racket 中的 define-struct 是什么，为什么没有变量？

> ID：10088098
> 
> 赞同：6
> 
> 时间：2012-04-10T11:43:00.270
> 
> 标签：functional-programming, scheme, racket

在我大学的一门 CS 课程中，我们必须使用 Racket。我在大学之前的大部分编程时间都花在了 PHP 和 Java 以及 JavaScript 上。我知道 Racket 是一种函数式编程语言，就像 JavaScript 一样（编辑：当然不是。但我觉得我正在用它进行“函数式”编程，在看到答案之后，这是一种错误的看法。）但我仍然不了解 Racket (Scheme) 的一些基本特征。

1.  为什么没有“真正的”变量？为什么 Racket/Scheme 中的一切都是函数？为什么语言设计者不包括他们？

2.  是什么`define-struct`？它是一个函数吗？是一堂课吗？我不知何故，由于我的 PHP 背景，总是认为它是一个类，但这并不完全正确。

我的问题是我想了解语言的概念。我**个人**仍然认为它真的很奇怪，不像我以前使用的任何东西，所以我的大脑试图将它与 JavaScript 进行比较，但它对我来说似乎如此不同。与 JavaScript 的并行/差异将有很大帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-10T12:05:20.590

1.  Racket 中有“真实的”变量。例如，如果您编写此代码

    ```
    (define x 3) 
    ```

    'global' 变量`x`将被设置为值 3。如果你现在写

    ```
    (set! x 4) 
    ```

    该变量`x`会将其值更改为 4。因此，在 Racket 中，您可以根据需要使用任何“正常”语言中的“正常”变量。事实上，在 Racket 中，首选的编程风格是功能性的，而不是过程性的。在函数式编程风格中，不鼓励变量突变。

2.  `define-struct`是一个球拍宏，用于定义“结构模板”以及其他一些东西。例如，如果你写：

    ```
    (define-struct coord (x y)) 
    ```

    您刚刚定义了一个“结构模板”（即`coord` 具有两个“插槽”的用户类型：`x`和`y)`。之后，您现在可以：

    *   创建结构的新“实例” `coord`，例如： `(make-coord 2 3)`

    *   从结构对象中提取槽值：

        ```
        (coord-x (make-coord 2 3)) ;will return 2 
        ```

        或者

        ```
        (coord-y (make-coord 2 3)) ;will return 3 
        ```

    *   你可以问一些给定的对象是否就是那个结构。例如，`(coord? 3)`将返回`#f`，因为 3 不是`coord` 结构类型，而是

        ```
        (coord? (make-coord 2 3)) ;will return #t 
        ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T17:58:35.910

也许最流行或最时尚的编程方式（使用 C++、Javascript 和 Java 等语言）具有一些特点。你可能认为它们是理所当然的，是不言而喻的，唯一可能的方式。它们包括：

*   至关重要的

你专注于说“做这一步，然后是下一步”等等。

*   使用突变。

您声明一个变量，并不断为其分配不同的值（“改变它”）。

*   面向对象。

您将代码和数据捆绑到类中，并将它们的实例声明为对象。然后你改变对象。

学习计划或球拍将帮助您了解这些并不是唯一的方法。

一开始它可能会让你的大脑受伤，就像哲学课可能会让你质疑你认为理所当然的事情一样。然而，与哲学课不同的是，让大脑受伤会有一些实际的回报。:)

替代：

*   函数式（而不是命令式）。专注于返回值的表达式，而不是制作步骤的待办事项列表。
*   不可变。同上。
*   不是面向对象的。使用类的对象可能是解决某些问题的好方法，但不是全部。如果您想将代码与数据捆绑在一起，还有一些更通用的方法可以实现，例如带有“let over lambda”的闭包等等。有时您不需要类的所有“包袱”，尤其是继承。

Scheme 和 Racket 使探索这些想法变得容易。但它们不像 Haskell 那样“纯函数式”，所以如果你真的想做命令式、可变、面向对象的事情，你也可以这样做。然而，学习 Racket 以与 Javascript 相同的方式做事并没有多大意义。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T11:55:26.667

计划非常有“真实”的变量。

函数式语言（如 Racket）和命令式语言（如 JavaScript 或 PHP）之间的区别在于，在函数式语言中，您通常不使用可变状态。变量最好被认为是值的名称，而不是可以保存值的容器。您无需使用循环构造来更改变量中的值，而是使用递归进行流控制。

`define-struct`是一种特殊的句法形式，有点像其他语言中的关键字。（与其他语言不同，在Scheme 中您可以创建自己的句法形式。）它定义了一个结构类型，它类似于一个类，但没有方法。它还定义了许多帮助您利用新结构类型的函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T11:52:23.790

1.  Scheme中有变量。

    ```
    > (define a 1)
    #<unspecified>
    > a
    1
    > (set! a 2)
    #<unspecified>
    > a
    2 
    ```

    这种语言中甚至还有可变数据结构。

    ```
    > (begin
    >   (define v (make-vector 4))
    >   (vector-set! v 0 'foo)
    >   (vector-set! v 1 'bar)
    >   (vector-set! v 2 'baz)
    >   (vector-set! v 3 'quux))
    #<unspecified>
    > v
    #(foo bar baz quux) 
    ```

    Scheme 不是纯 FP 语言；它确实允许命令式编程，尽管它主要面向函数式编程。这是 Scheme 的发明者做出的设计选择。

2.  `define-struct`是一种*特殊形式*；它的语法，就像 JavaScript 中的`function`or`return`关键字。

# php - PHP-函数调用

> ID：10088112
> 
> 赞同：0
> 
> 时间：2012-04-10T11:43:55.487
> 
> 标签：php, phpmyadmin

我设计了一个纯 html 网站，有一个查询表格。它有一些字段，如姓名，地址等。点击**提交**按钮，我希望这些数据进入数据库。我在**XAMPP**服务器上使用**phpmyadmin**创建了数据库和表。

 **我的代码如下（hello.php）：

```
<script>
function insert_db()
{

     <?php
     $username = $_POST['name'];
     print ($username);
     mysql_connect("localhost","root","");
     mysql_select_db("addressbook");

     mysql_query("insert into colleague values ('$username')");

     ?>

       }
 </script>

    <form  method="post">
   <input type="name" name="name" /><br />
   <input type="submit" name="mysubmit" value="Submit"  onclick="insert_db()"/> 
```

单击**提交**按钮后，会在数据库中输入**两个条目**。一个为空白，另一个为输入值。如何只调用一次函数？有没有其他出路..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:46:50.023

你不能，我再说一遍，不能以这种方式结合 JS 和 PHP。

右键单击该页面，选择查看源代码，您将清楚地看到原因。

PHP 在浏览器获取页面之前运行。

因此，当您加载表单时，您会得到一个空记录，然后在您提交它时得到一个已填充的记录，因为`$username`当时已定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T11:49:04.347

你不能像这样混合 php 和 javascript。你看，PHP 总是在服务器端执行，不管它在文件中的什么位置（PHP 不知道 JavaScript）。因此，第一次加载页面时，它将插入一个空行（因为 $_POST['name'] 为空）。然后，如果您单击提交，它将什么也不做，因为 JavaScript 代码是空的，将表单提交到服务器并再次评估 PHP 代码，这一次达到了预期的效果。

这样做的正确方法是：

```
<?php
if (!empty($_POST['name'])){ // check if form values are there
    $username = $_POST['name'];
    print ($username);
    mysql_connect("localhost","root","");
    mysql_select_db("addressbook");

    mysql_query("insert into colleague values ('$username')");
}
?>

<form  method="post">
    <input type="name" name="name" /><br />
    <input type="submit" name="mysubmit" value="Submit" />
</form> 
```

您可能还想先学习PHP[教程](http://tut.php-quake.net/en/index.html)**

# r - 将树状图导出为 R 中的表

> ID：10088117
> 
> 赞同：5
> 
> 时间：2012-04-10T11:44:13.223
> 
> 标签：r, cluster-analysis, dendrogram, hclust

我想将 hclust-dendrogram 从 R 导出到数据表中，以便随后将其导入另一个（“自制”）软件。`str(unclass(fit))`提供树状图的文本概述，但我正在寻找的实际上是一个数字表。我看过 Bioconductor ctc 包，但它产生的输出看起来有些神秘。我想要类似于这张表的东西：[http](http://stn.spotfire.com/spotfire_client_help/heat/heat_importing_exporting_dendrograms.htm) ://stn.spotfire.com/spotfire_client_help/heat/heat_importing_exporting_dendrograms.htm 有没有办法从 R 中的 hclust 对象中得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:05:29.527

如果有人也对树状图导出感兴趣，这是我的解决方案。很可能，它不是最好的，因为我最近才开始使用 R，但至少它有效。因此，欢迎提出有关如何改进代码的建议。

所以，if`hr`是我的 hclust 对象并且`df`是我的数据，它的第一列包含一个从 0 开始的简单索引，行名是聚集项的名称：

```
# Retrieve the leaf order (row name and its position within the leaves)
leaf.order <- matrix(data=NA, ncol=2, nrow=nrow(df),
              dimnames=list(c(), c("row.num", "row.name")))
leaf.order[,2] <- hr$labels[hr$order]
for (i in 1:nrow(leaf.order)) {
   leaf.order[which(leaf.order[,2] %in% rownames(df[i,])),1] <- df[i,1]
}
leaf.order <- as.data.frame(leaf.order)

hr.merge <- hr$merge
n <- max(df[,1])

# Re-index all clustered leaves and nodes. First, all leaves are indexed starting from 0.
# Next, all nodes are indexed starting from max. index leave + 1.
for (i in 1:length(hr.merge)) {
  if (hr.merge[i]<0) {hr.merge[i] <- abs(hr.merge[i])-1}
  else { hr.merge[i] <- (hr.merge[i]+n) }
}
node.id <- c(0:length(hr.merge))

# Generate dendrogram matrix with node index in the first column.
dend <- matrix(data=NA, nrow=length(node.id), ncol=6,
           dimnames=list(c(0:(length(node.id)-1)),
              c("node.id", "parent.id", "pruning.level",
              "height", "leaf.order", "row.name")) )
dend[,1] <- c(0:((2*nrow(df))-2))  # Insert a leaf/node index

# Calculate parent ID for each leaf/node:
# 1) For each leaf/node index, find the corresponding row number within the merge-table.
# 2) Add the maximum leaf index to the row number as indexing the nodes starts after indexing all the leaves.
for (i in 1:(nrow(dend)-1)) {
  dend[i,2] <- row(hr.merge)[which(hr.merge %in% dend[i,1])]+n
}

# Generate table with indexing of all leaves (1st column) and inserting the corresponding row names into the 3rd column.
hr.order <- matrix(data=NA,
           nrow=length(hr$labels), ncol=3,
           dimnames=list(c(), c("order.number", "leaf.id", "row.name")))
hr.order[,1] <- c(0:(nrow(hr.order)-1))
hr.order[,3] <- t(hr$labels[hr$order])
hr.order <- data.frame(hr.order)
hr.order[,1] <- as.numeric(hr.order[,1])

# Assign the row name to each leaf.
dend <- as.data.frame(dend)
for (i in 1:nrow(df)) {
      dend[which(dend[,1] %in% df[i,1]),6] <- rownames(df[i,])
}

# Assign the position on the dendrogram (from left to right) to each leaf.
for (i in 1:nrow(hr.order)) {
      dend[which(dend[,6] %in% hr.order[i,3]),5] <- hr.order[i,1]-1
}

# Insert height for each node.
dend[c((n+2):nrow(dend)),4] <- hr$height

# All leaves get the highest possible pruning level
dend[which(dend[,1] <= n),3] <- nrow(hr.merge)

# The nodes get a decreasing index starting from the pruning level of the
# leaves minus 1 and up to 0

for (i in (n+2):nrow(dend)) {
   if ((dend[i,4] != dend[(i-1),4]) || is.na(dend[(i-1),4])){
        dend[i,3] <- dend[(i-1),3]-1}
      else { dend[i,3] <- dend[(i-1),3] }
}
dend[,3] <- dend[,3]-min(dend[,3])

dend <- dend[order(-node.id),]

# Write results table.
write.table(dend, file="path", sep=";", row.names=F) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:46:28.887

有一个包与你想要的完全相反 - [Labeltodendro](http://cran.at.r-project.org/web/packages/labeltodendro/index.html) ;-)

但说真的，你不能手动从`hclust`对象中提取元素（例如`$merge`, `$height`, `$order`）并从提取的元素中创建自定义表吗？

# c++ - 在 LLVM 中，如何检查一个块是否为合并块

> ID：10088118
> 
> 赞同：5
> 
> 时间：2012-04-10T11:44:13.840
> 
> 标签：c++, llvm, clang

我正在写一个 LLVM Pass。我的通行证需要知道哪个块是合并块，即具有多个前辈的块。如何在我的代码中对此进行测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T00:17:53.117

您可以像这样遍历所有前辈：

```
#include "llvm/Support/CFG.h"
BasicBlock *BB = ...;

for (pred_iterator PI = pred_begin(BB), E = pred_end(BB); PI != E; ++PI) {
  BasicBlock *Pred = *PI;
  // ...
} 
```

您可以使用以下方法验证 BB 是否有多个前任：

```
BasicBlock *BB = ...;

if (BB->getSinglePredecessor() != null) /// one predecessor
{ ... } 
else /// more than one predecessor
{ ... } 
```

# iphone - xCode - 工具栏按钮项标签更改

> ID：10088120
> 
> 赞同：1
> 
> 时间：2012-04-10T11:44:31.543
> 
> 标签：iphone, objective-c, toolbar

在我的项目（“Xcode 4.3.2 - Single View Application”）中，我手动添加了一个带有按钮项的工具栏，我需要以编程方式更新按钮标签。我怎样才能做到这一点？请你帮助我好吗？

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIWebViewDelegate>{
    IBOutlet UIWebView *webDisplay;
    IBOutlet UIToolbar *menuBar; //my toolBar
}
@property(nonatomic,retain) UIWebView *webDisplay;
@property(nonatomic,retain) UIToolbar *menuBar;

- (IBAction) changeLabel:(id)sender;

@end 
```

视图控制器.m

```
- (IBAction) changeLabel:(id)sender{

  //code for updating label

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:48:48.947

```
@interface ViewController : UIViewController <UIWebViewDelegate>{
    IBOutlet UIWebView *webDisplay;
    IBOutlet UIToolbar *menuBar; //my toolBar
    IBOutlet UIBarButtonItem *barButton;
}
...

- (IBAction) changeLabel:(id)sender{

barButton.title = @"test";

} 
```

请务必将 BarButtonItem 设置为引用插座“barButton”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:53:24.123

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIWebViewDelegate>{

IBOutlet UIWebView *webDisplay;
IBOutlet UIToolbar *menuBar; //my toolBar

  UIButton* btnBack;
}

@property(nonatomic,retain) UIWebView *webDisplay;

@property(nonatomic,retain) UIToolbar *menuBar;

- (IBAction) changeLabel:(id)sender;

@end 
```

视图控制器.m

```
btnBack = [UIButton buttonWithType:UIButtonTypeCustom];
[btnBack setFrame:CGRectMake(0, 0, 49, 30)];
[btnBack setBackgroundImage:[UIImage imageNamed:@"backbtn.png"] forState:UIControlStateNormal];
[btnBack.titleLabel setFont:[UIFont boldSystemFontOfSize:12]];
UIBarButtonItem *abackButton = [[UIBarButtonItem alloc] initWithCustomView:btnBack]

- (IBAction) changeLabel:(id)sender{

//code for updating label
[btnBack setTitle:NSLocalizedString(@"Detail_Back", nil) forState:UIControlStateNormal];

} 
```

# iphone - 加载 NSURLRequest 时 UIWebview 中的内存泄漏

> ID：10088122
> 
> 赞同：2
> 
> 时间：2012-04-10T11:44:36.913
> 
> 标签：iphone, ios, uiwebview, memory-leaks

我为我的应用程序创建了一个自定义浏览器。每当我将 url 请求加载到 web 视图中时，都会看到内存泄漏。请注意，没有显示回溯。应用程序有一个 web 视图，下面给出了一个刷新按钮。

刷新按钮上的代码如下

```
 - (IBAction)refresh:(id)sender
{
// Some solution suggested by online community but in vain
    [wvWebView loadHTMLString:@"" baseURL:nil];
    [wvWebView stopLoading];
    wvWebView.delegate = nil;

// Clearing cache Memory
    [[NSUserDefaults standardUserDefaults] setInteger:0 forKey:@"WebKitCacheModelPreferenceKey"];
    [[NSURLCache sharedURLCache] removeAllCachedResponses];
    [[NSURLCache sharedURLCache] setDiskCapacity:0];
    [[NSURLCache sharedURLCache] setMemoryCapacity:0];

// Deleting all the cookies
    for(NSHTTPCookie *cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies])
    {     
            [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:cookie];
    }

// Loading webview with desired url
    [wvWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]];
} 
```

请尽快帮我解决这个问题

# bash - 在 .bash_profile 中定义路径

> ID：10088126
> 
> 赞同：0
> 
> 时间：2012-04-10T11:44:48.827
> 
> 标签：bash, node.js, path, .bash-profile

我最近一直在安装几个 Node.js 模块/应用程序，以便能够开始一个新的 Web 项目。我使用 NPM 安装模块，但每次遇到同样的问题：模块无法全局访问。

我没有在一本安装手册中阅读过有关更改/添加到 .bash_profile 的任何内容，但我通过一些教程发现这是必要的。

我设法让一些模块以这种方式工作，但不是每个人，我真的可以在这里使用一些帮助。我遇到的最后一个安装问题是 Expresso。我应该输入什么 .bash_profile 才能全局访问它？

可执行的 Expresso 文件位于以下文件夹中：/Users/toby/node/imapp/imagebridge/node_modules/expresso/bin/expresso

以下不起作用： `export PATH="/Users/toby/node/imapp/imagebridge/node_modules/expresso/bin/expresso/:$PATH"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:49:53.300

从您的路径中删除浓缩咖啡，例如

```
export PATH="/Users/toby/node/imapp/imagebridge/node_modules/expresso/bin/:$PATH" 
```

因为 espresso 很可能是可执行文件。路径是搜索可执行文件的目录列表，而不是可执行文件列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:25:41.530

这也是捆绑模块的一个很好的补充：

```
export PATH="./node_modules/.bin:$PATH" 
```

它允许您从当前工作目录的`node_modules`子目录运行二进制文件

# iphone - 如何以编程方式绘制边框并在 UIImageview 周围的文字后将其删除？

> ID：10088128
> 
> 赞同：1
> 
> 时间：2012-04-10T11:44:50.853
> 
> 标签：iphone, ios, uiview, border

请在将其标记为重复或重复问题之前阅读我的问题...

1.  我有一个 scoleView，我在其中以表格形式放置了一些图像。

2.  当用户单击其中一个时，将显示下一个视图控制器，并且单击的图像的 uiview 获得绿色边框。

3.  当用户导航回此视图时，单击的图像显示为绿色边框。这一切都很好

但是当用户单击其他图像时问题就开始了：先前单击的图像没有恢复正常，即即使我将其宽度设置为 0.0 并将其颜色设置为`clearColor`

请指导我如何删除这些边框

我的代码如下：

```
for (int row = 0; row < r; ++row)
    {
        for (int col = 0; col < 2; ++col)
        {
            int index = (row * 2) + col;
            if(index < [tempArr count])
            {
                CGRect frame = CGRectMake(10+col*(10+145),10+row*(5+100),145, 100);
                UIView *fr = [[UIView alloc] initWithFrame:frame];
                CGRect imgFrame = CGRectMake(0, 0, 145, 100);
                UIImageView *imgView = [[UIImageView alloc]initWithFrame:imgFrame];
                imgView.image = [UIImage imageNamed:[[tempArr objectAtIndex:index]valueForKey:@"add"]];
                UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapAction:)];
                fr.layer.borderWidth = 0.0f;
                fr.layer.borderColor = [UIColor greenColor].CGColor;
                if(selctedFrame == index)//Here i put border
                {
                    fr.layer.borderWidth = 2.0f;
                    fr.layer.borderColor = [UIColor greenColor].CGColor;
                }
                else //here i remove them
                {
                    fr.layer.borderWidth = 0.0f;
                    fr.layer.borderColor = [UIColor clearColor].CGColor;
                }
                tapGesture.numberOfTapsRequired = 1;
                tapGesture.numberOfTouchesRequired = 1;
                [fr addGestureRecognizer:tapGesture]; 
                [fr addSubview:imgView];
                fr.tag = index;
                [self.scrollDisplay addSubview:fr];
                [self.scrollDisplay bringSubviewToFront:fr];
            }
        }
    }
    [self.view addSubview:self.scrollDisplay]; 
```

该方法在`viewWillAppear:animated:`方法中被调用

**编辑**

![在此处输入图像描述](../Images/559179bd36da6d51a401066f6bd0b8a5.png)

经过一些来回导航

![在此处输入图像描述](../Images/2c0563fa39ef552f5fcb52d385b18e8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:14:34.190

**新答案-**我认为问题在于您一次又一次地添加新视图。而不是做`UIView *fr = [[UIView alloc] initWithFrame:frame];`，找到已经存在的视图为：`UIView *fr = [self.scrollDisplay viewWithTag:index];`并对其进行更改。实际上，除了导致上述问题之外，新的图像视图正在添加到效率极低的旧图像视图上。我假设您已经将视图添加到`scrollDisplay`. 您也不应该`imgView`再次创建新对象。为它们设置标签，使它们独一无二且易于获取。例如，`999`为每个设置标签`imgView`并将其检索为：`UIImageView *imgView = [fr viewWithTag:999];`此外，摆脱`[fr addSubview:imgView];`,`[self.scrollDisplay addSubview:fr];`并`[self.view addSubview:self.scrollDisplay];`接近尾声。所以你的代码应该是这样的：

```
for (int row = 0; row < r; ++row)
    {
        for (int col = 0; col < 2; ++col)
        {
            int index = (row * 2) + col;
            if(index < [tempArr count])
            {
                CGRect frame = CGRectMake(10+col*(10+145),10+row*(5+100),145, 100);
                UIView *fr = [self. scrollDisplay viewWithTag:index];
                CGRect imgFrame = CGRectMake(0, 0, 145, 100);
                UIImageView *imgView = [fr viewWithTag:999];
     //imgView.image = [UIImage imageNamed:[[tempArr objectAtIndex:index]valueForKey:@"add"]]; //<--You've already set the image before so you don't need this
                UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapAction:)];
                fr.layer.borderWidth = 0.0f;
                fr.layer.borderColor = [UIColor greenColor].CGColor;
                if(selctedFrame == index)//Here i put border
                {
                    fr.layer.borderWidth = 2.0f;
                    fr.layer.borderColor = [UIColor greenColor].CGColor;
                }
                else //here i remove them
                {
                    fr.layer.borderWidth = 0.0f;
                    fr.layer.borderColor = [UIColor clearColor].CGColor;
                }
                tapGesture.numberOfTapsRequired = 1;
                tapGesture.numberOfTouchesRequired = 1;
    //[fr addGestureRecognizer:tapGesture]; //<-- Not needed if you've already done this
    //[fr addSubview:imgView];//<-- Not needed
                fr.tag = index;
    //[self.scrollDisplay addSubview:fr];//<-- Not needed
                [self.scrollDisplay bringSubviewToFront:fr];//<-- probably not needed
            }
        }
    }
    //[self.view addSubview:self.scrollDisplay];//<-- Not needed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:32:32.950

我只需要做的就是将边框颜色设置为视图的背景颜色。任何其他选项都没有做任何其他事情都没有隐藏边框我得到的唯一解决方法是这个

# css - CSS3 - 移动网站和媒体查询

> ID：10088137
> 
> 赞同：0
> 
> 时间：2012-04-10T11:45:25.170
> 
> 标签：css, xhtml, mobile-website, media-queries

只是为了测试和学习 css3，我正在尝试创建小型移动网站。但是现在我在定位样式表方面遇到了小问题。我这样做是这样的：

```
<link rel="stylesheet" media="only screen and (max-width: 180px)" href="xsmall.css" />
<link rel="stylesheet" media="only screen and (min-width: 240px)" href="small.css" />
<link rel="stylesheet" media="only screen and (min-width: 320px)" href="medium.css" />
<link rel="stylesheet" media="only screen and (min-width: 480px)" href="large.css" />
<link rel="stylesheet" media="only screen and (min-width: 540px)" href="wide.css" /> 
```

不幸的是，更改 xsmall.css 后更改在其他 Web 版本中也可见（对于 480 像素、540 像素等）。我在 Opera Mobile Emulator 上测试网站（移动版）。我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:51:15.547

你做错的是认为你的样式表选择只包括一个样式表。

您包含的样式表`min-width`将包含在任何更大的分辨率中，因此，例如，如果我有一个 600 像素宽的屏幕，我将得到`small.css`、和`medium.css`，而不仅仅是.`large.css``wide.css``wide.css`

（另外，如果我有一个 200 像素宽的屏幕，它根本不会包含任何样式表......）

您需要同时使用这两者`min-width`并`max-width`使其仅包含其中一个样式表。

# java - spring security - 编写自定义 SPEL 访问表达式。我的方法正确吗？

> ID：10088138
> 
> 赞同：3
> 
> 时间：2012-04-10T11:45:26.140
> 
> 标签：java, spring, spring-security

我希望指定一个拦截 URL 模式，例如`pattern = hasCollege('college1',college2')`. 为此，我正在考虑以下方法：

a) 配置`WebExpressionVoter`为使用自定义表达式处理程序

```
<beans:bean id="accessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
    <beans:property name="decisionVoters">
        <beans:list>
            <beans:bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
                <beans:property name="expressionHandler" ref="myWebSecurityExpressionHandler"/>
            </beans:bean>
        </beans:list>
    </beans:property>
</beans:bean>
<beans:bean id="myWebSecurityExpressionHandler" class="com.daud.security.EEWebSecurityExpressionHandler"/> 
```

b)以设置自定义根对象的方式实现`EEWebSecurityExpressionHandler`和使用。`WebSecurityExpressionHandler``DefaultWebSecurityExpressionHandler``createEvaluationContext`

```
@Override
    public EvaluationContext createEvaluationContext(Authentication authentication, FilterInvocation fi) {
        StandardEvaluationContext ctx = new StandardEvaluationContext();
        SecurityExpressionRoot root = new MyWebSecurityExpressionRoot(authentication, fi);
        root.setTrustResolver(trustResolver);
        root.setRoleHierarchy(roleHierarchy);
        ctx.setRootObject(root);
        return ctx;
    } 
```

c)`MyWebSecurityExpressionRoot`扩展`WebSecurityExpressionRoot`并声明一个对应于新 SPEL 表达式的新方法：

```
public final boolean hasCollege(String... colleges){
       // logic goes here
    } 
```

这是解决问题的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:44:38.387

在您的 spring 安全配置中，您可以执行以下操作。

```
<http use-expressions="true">
    <intercept-url pattern="/**" access="isFullyAuthenticated() and principal.college matches 'Duke|USC'"/> 
```

那是假设您的主体上有一个 getCollege() 方法。

# objective-c - 收到内存警告。Webview 中的 Level=1

> ID：10088140
> 
> 赞同：-3
> 
> 时间：2012-04-10T11:45:30.277
> 
> 标签：objective-c, iphone, memory-leaks, uiwebview

我正在开发 Location Finder 应用程序，其中我将我当前的纬度和经度传递到`UIWebview`.

现在会发生什么，有时当我放大该页 3-4 次后，它开始发出警告消息：

```
Received memory warning. Level=2 
```

**编辑：**

这是代码：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSString *urlAddress = [NSString stringWithFormat:@"https://www.google.com/maps?saddr=%25f,%25f&daddr=%25f,%25f%2522,appDel.curr_lat,appDel.curr_long,degreeslat,degresslong%255D";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [self.webview loadRequest:requestObj];
} 
```

**重要的提示 ：**

*   我已经尝试使用内存管理工具来查找泄漏。但我无法找到此警告背后的确切原因。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:12:22.557

您收到内存警告是因为... iOS 内存不足。你应该少用一些，也许是清除临时数据的缓存，或者优化你的代码。如果您不减少正在使用的内存量，操作系统可能会关闭您的应用程序。

# android - Android：资产目录和多语言

> ID：10088141
> 
> 赞同：0
> 
> 时间：2012-04-10T11:45:38.777
> 
> 标签：android, localization, assets

早上好。在我的 android 应用程序中，我在 assets 目录中有一个文件更改日志。我也创建了目录 assets-it，并且我已经将意大利语放入了文件更改日志，但是当我启动应用程序时，如果设备语言设置为意大利语，它也总是将文件显示到 assets 目录中。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T02:17:57.897

这是预期的行为。`res/`可以以这种方式本地化资源，但`assets/`目录不能。

由于它只是一个变更日志，我建议将其作为本地化字符串资源存储在`res/values-LOCALE/`. 如果您真的想要资产本地化，您可以通过获取当前语言环境并加载，例如`assets/changelog-en`vs.来手动重新创建它`assets/changelog-it`，但我认为这通常不是一个好主意，而且在您的情况下当然没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T18:24:26.553

尝试这个：

1.  将两个变更日志文件放入 assets 文件夹：

路径例如： assets/ **en** /changelog_file 和 assets/ **it** /changelog_file

2.  将此输入您的**值**/strings.xml：

`<string name="changelog_file">file:///android_asset/en/changelog_file</string>`

3.  输入你的**值 - 它**/strings.xml：

`<string name="changelog_file">file:///android_asset/it/changelog_file</string>`

像这样，您可以从代码中调用字符串：getResources().getString(R.string.changelog_file)，它会根据设备区域设置调用 values-en 或 values-it。

# c# - 如何在 C# 中处理需要互联网访问的应用程序的 Android 开发？

> ID：10088144
> 
> 赞同：2
> 
> 时间：2012-04-10T11:45:42.983
> 
> 标签：c#, android, xamarin.android

我将需要很快开始在 Android 应用程序上进行开发。此应用程序需要通过 Internet 与服务器通信。我希望能够在似乎可用的各种开发环境之一中使用 C# 进行开发，例如用于 Android 的 Mono。

我的问题是：

*   为 Android 开发 C# 应用程序的最佳框架是什么？
*   什么可以让我在 Internet 上进行通信时获得最大的灵活性？（我的老板告诉我现有的 c# --> Android 框架对互联网访问有限制）
*   使用 C# 执行此操作会遇到哪些限制？
*   您采用这种方法的经验是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:59:32.193

对于通过 Internet 进行的通信，可能有多种方式，具体取决于您的需要。它可以是带有一些 POST 数据的 HTTP 请求，也可以是通过 Sockets 进行的适当的低级通信。

如果您需要与接受 POST 请求并以 XML 格式提供一些数据的 Web 服务进行通信（例如），那么您可以使用 HTTP 请求方式。

如果您有实时服务器来处理 Socket 通信，那么您可能希望使用带有某种数据协议的 Sockets（基于服务器接受/服务的数据协议）。

完全支持使用 MonoDroid 建立 Sockets 通信。它与 Windows 上的 x86 .Net 实现几乎相同。

# java - 我可以访问 ViewPreparer 中的 Apache Tiles 定义名称吗？

> ID：10088148
> 
> 赞同：6
> 
> 时间：2012-04-10T11:45:53.187
> 
> 标签：java, tiles2, apache-tiles

是否可以在 ViewPreparer 中访问 Apache Tiles 定义名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T07:19:52.757

只需将属性添加到 xml 中，例如

```
<definition name="t.*" extends="t.container">
    <put-attribute name="body" value="/WEB-INF/jsp/{1}.jsp"/>
    <put-attribute name="title" expression="${song.title} - ${song.author} in ${jukebox.name}"/>
    <put-attribute name="view" value="t.{1}"/>
</definition> 
```

# graphics - 如何在生成 NURBS 曲面时强加 C1 连续性？

> ID：10088150
> 
> 赞同：1
> 
> 时间：2012-04-10T11:46:03.453
> 
> 标签：graphics, computational-geometry, geometry-surface, nurbs

我正在以补丁的形式将 NURBS 曲面拟合到一些数据点上。我有一定数量的补丁和每个补丁 17x17 数据点的统一分辨率。每个方向的度数值为 3。

每个面片都使用例程拟合 NURBS 曲面。相邻块之间的数据点相互匹配 - 因此满足 C0 连续性。但对于 C1 的连续性，我没有做任何特别的事情。我应该如何修改我的算法以获得 C1 连续性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:27:28.837

有几种方法可以做到这一点。

您可以做的一件事就是独立解决，然后通过将边界控制点放在两个控制点的中点朝向两个相邻补丁的内部来强制相邻补丁为 C1。换句话说，如果您有四个控制点 Q0、Q1、P0 和 P1，其中 P 点在一个表面上，Q 点在另一个表面上，并且 P0 = Q0，则设置 P0 = 0.5 * (Q1 + P1 ）。如果 NURBS 面片的节点宽度不同，或者您有超过 4 个 NURBS 面片作为角点，则该等式将需要不同。我还假设您有多个末端结（贝塞尔末端条件）。

您可以做的另一件事是求解一个包含 C1 条件作为线性等式约束的全局系统。这会给你一个最佳的结果，但它可能会慢得多。

# php - 使用带有下拉选项的 php 更新 mysql 数据

> ID：10088153
> 
> 赞同：1
> 
> 时间：2012-04-10T11:46:14.670
> 
> 标签：php, mysql, variables, undefined

***我正在尝试使用产品表单更新我的产品表，但它为未定义的变量抛出错误这是我的 productform.php 代码***

```
<?php
$ProductID= $_GET['ProductID'];
//Connect and select a database
mysql_connect ("localhost", "root", "");
mysql_select_db("supplierdetails");
{
$result = mysql_query("SELECT * FROM products WHERE ProductID=$ProductID");
while($row = mysql_fetch_array($result))
  {
 $ProductID= $_GET['ProductID'];
 $ProdDesc = $row['ProdDesc'];       
 $SupplierID = $row['SupplierID'];   
 $Location = $row['Location'];
 $Cost = $row['Cost'];
 $Status = $row['Status'];
 $MRL = $row['MRL'];        
 $ProductID = $row['ProductID'];   
}     
?>     
//form 
<form action="Edit_Prod.php" method="post">

<input type="hidden" name="ProductID" value="<?php echo $ProductID; ?>"/> 

<label>Product Description:
 <span class="small">Please enter a description for the product </span>
 </label>
 <input type="text" name="ProdDesc" value="<?php echo $ProdDesc ;?>" />
<label>Supplier ID
 <span class="small">Please enter the Supplier ID</span>
 </label>
  <input type="text" name="SupplierID" value="<?php echo $SupplierID ;?>" />
   <label>Bay Location:
 <span class="small">Please select the bay location for this product </span>
 </label>
  <select name="Location" value="<?php echo $Location ;?>" />
 <option>A1</option>
 <option>A2</option>
 <option>A3</option>
 <option>A4</option>
 <option>A5</option>
 <option>B1</option>
 <option>B2</option>
 <option>B3</option>
 <option>B4</option>
 <option>B5</option>
 <option>C1</option>
 <option>C2</option>
 <option>C3</option>
 <option>C4</option>
 <option>C5</option>
 <option>D1</option>
 <option>D2</option>
 <option>D3</option>
 <option>D4</option>
 <option>D5</option>
 <option>E1</option>
 <option>E2</option>
 <option>E3</option>
 <option>E4</option>
 <option>E5</option>
</select>

<label>Product Cost:
 <span class="small">Please enter a  new cost for the product (per roll) </span>
 </label>
  <input type="text" name="Cost" value="<?php echo $Cost ;?>" />

<label>Status:
 <span class="small">Please select a status for the product </span>
 </label>
  <select name="Status" value="<?php echo $Status ;?>" />
 <option>Live</option>
 <option>Mature</option>
 <option>Obsolete</option>
 </select>
 <label>MRL
 <span class="small">Please enter a minimum re-order level for this product </span>
 </label>
 <input type="text" name="MRL" value="<?php echo $MRL ;?>" />
 <input type="submit" value= "Edit Product Details"/> 
```

**未定义变量所有行，如果使用下拉区域，我是否必须做任何不同的事情***

* **Edit_Prod.php***

```
<?php
     $con = mysql_connect("localhost", "root", "");  
        mysql_select_db("supplierdetails");   
          if (!$con)     
             {       
        die('Could not connect: ' . mysql_error());        
         }    
      //Run a query        
          $ProductID = $_POST['ProductID'];
      $result = mysql_query ("SELECT * FROM products WHERE Productid= '".$Productid."'") or die(mysql_error());     
      $row = mysql_fetch_array($result); 
      $ProdDesc = $_POST['ProdDesc'];       
      $SupplierID = $_POST['SupplierID'];   
      $Location = $_POST['Location'];
      $Cost = $_POST['Cost'];
      $Status = $_POST['Status'];
      $MRL = $_POST['MRL'];        
      $Productid=$row['Productid'];   
      $query="UPDATE products SET ProdDesc='".$ProdDesc."', SupplierID='".$SupplierID."', Location='".$Location."', Cost='".$Cost."', Status='".$Status."', MRL='".$MRL."' WHERE   ProductID='".$ProductID."'";
      $result = mysql_query($query);  
//Check whether the query was successful or not    
 if($result) 
{          
     echo "Products Updated";
     header ("Location: Products.php");    
 }
else 
{        
     die ("Query failed");    
      }    
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:59:13.423

回答您的问题“如果使用下拉区域，我是否必须做任何不同的事情”，当然您必须更改它。改变：

```
<select name="Location" value="<?php echo $Location ;?>" />
 <option>A1</option>
 <option>A2</option>
 <option>A3</option>
 <option>A4</option>
 <option>A5</option>
.
. 
```

. . ... 至：

```
<select name="Location"  />
 <option value="<?=$Location;?>" selected="selected" ></option>
 <option>A1</option>
 <option>A2</option>
 <option>A3</option>
 <option>A4</option>
 <option>A5</option> 
```

像那样。我想你明白了。您必须将价值作为选择下的一个选项。试试看。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:59:07.207

我认为 $row vairable 用于从数据库中获取您错过的值

```
$productID= $_GET['productid'];
$records =mysql_query(" select * from tableName where productid=$productID");

$row=mysql_fetch_array($records); 
```

那么您的代码将起作用

```
$supplId= $row['supplId'];
... 
```

# cakephp - Cakephp FormHelper 创建选择框

> ID：10088156
> 
> 赞同：1
> 
> 时间：2012-04-10T11:46:26.563
> 
> 标签：cakephp, cakephp-2.0, form-helpers, cakephp-2.1

我是 cakephp 初学者。

我的员工模型，

```
 class Employee extends AppModel {
            var $belongsTo = array(
                'Department'=>array(
                'className'=>'Department',
                'foreignKey'=>'department_id',
                'conditions'=>null,
                'fields'=>null
               )
         );
          blah-- 
```

现在在员工 add.ctp 中，我想创建一个列出所有部门的选择框。我正在阅读官方 cakephp 2.1 文档（[这里](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)）它告诉我添加

```
 $this->set('departments', $this->Employee->Department->find('list')); 
```

在我的控制器中..

我不知道放哪个控制器？它在EmployeesController 还是DepartmentsController 中？以及控制器的哪个动作？

查看以创建选择框（在 add.ctp 中）

```
 echo $this->Form->input('Department'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:28:03.987

你几乎是正确的 - 只有一个小故障：

```
echo $this->Form->input('department_id'); 
```

您需要像在数据库中一样命名字段。如果它是 BelongsTo 关系，那么您的员工表中应该有一个`department_id`外键。

PS：cake 知道，如果您向下传递 $departments，则该数组将需要成为该表单字段的选项。所以不需要额外的配置！

```
// in your add action at the very bottom
$departments = $this->Employee->Department->find('list');
$this->set(compact('departments')); 
```

# c# - 插入查询错误

> ID：10088158
> 
> 赞同：2
> 
> 时间：2012-04-10T11:46:34.093
> 
> 标签：c#, asp.net, mysql

我的代码主要是从一个文件中读取一些数据，并保存在mySql数据库中。我使用了 insert sql 查询，然后使用了 select sql 查询来读取数据库中的所有数据。

运行此代码时，我收到错误“键不能为空。\r\n参数名称：键} System.Exception {System.ArgumentNullException}”

我该如何解决？

private void bindGrid()//连接数据库的函数{

```
 string DocID = User.Identity.Name.ToString();

        string connectionString = "server=127.0.0.1;"
                                  + "database=hospital;"
                                   + "uid=root;"
                                   + "pwd=missy3asoola;";

        MySqlConnection conn = new MySqlConnection(connectionString);

        try
        {
            conn.Open();
            StreamReader objReader = new StreamReader("D:/Senior/WebApplication-metbhdelaXD/WebApplication2/Textfile.txt");
            string sLine = "";
            ArrayList arrText = new ArrayList();

            while (sLine != null)
            {
                sLine = objReader.ReadLine();
                if (sLine != null)
                    arrText.Add(sLine);
            }
            objReader.Close();

            MySqlCommand cmdread = new MySqlCommand();
            cmdread.Connection = conn;
            //Defining Mysql Parameters
            MySqlParameter Temperature, Pulserate, Timestamp, Doctor_idDoctor, Personal_PatientID;
            Temperature = new MySqlParameter();
            Pulserate = new MySqlParameter();
            Timestamp = new MySqlParameter();
            Doctor_idDoctor = new MySqlParameter();
            Personal_PatientID = new MySqlParameter();
            //Defining Types
            Temperature.MySqlDbType = MySqlDbType.Int32;
            Pulserate.MySqlDbType = MySqlDbType.Int32;
            Timestamp.MySqlDbType = MySqlDbType.Timestamp;
            Doctor_idDoctor.MySqlDbType = MySqlDbType.Int32;
            Personal_PatientID.MySqlDbType = MySqlDbType.Int32;
            //Defining values
            Temperature.Value = arrText[0];
            Pulserate.Value = arrText[1];
            Timestamp.Value = arrText[2];
            Doctor_idDoctor.Value = arrText[3];
            Personal_PatientID.Value = arrText[4];

            //cmdread.Parameters.Clear();
            //Adding parameters
            cmdread.Parameters.Add(Temperature);
            cmdread.Parameters.Add(Pulserate);
            cmdread.Parameters.Add(Timestamp);
            cmdread.Parameters.Add(Doctor_idDoctor);
            cmdread.Parameters.Add(Personal_PatientID);
            cmdread.Connection = conn;
            cmdread.CommandText = "INSERT INTO medical(Temperature,`Pulse rate`,Timestamp,Doctor_idDoctor,Personal_PatientID)VALUES([@Temperature],[@`Pulse rate`],[@Timestamp],[@Doctor_idDoctor],[@Personal_PatientID]);";
            cmdread.CommandType = CommandType.Text;

            cmdread.ExecuteNonQuery();

            cmdread.Dispose();

            string sqlQuery1 = "Select * from medical where Doctor_idDoctor=" + DocID;

            MySqlCommand cmdmedical = new MySqlCommand(sqlQuery1, conn);

            GridView1.DataSource = cmdmedical.ExecuteReader() ;  //ex reader for retrieving
            GridView1.DataBind();
            conn.Close();

        }
        catch (Exception ex)
        {
            Response.Write(ex.StackTrace);
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:49:43.423

您没有将文本文件中的值应用于您的参数。如果您不这样做，并且您的列是不可为空的列，那么您将得到一个异常，而这正是这里发生的事情。

您应该将其更改为：

```
cmdread.Parameters.Add("@Temperature",MySqlDbType.Int32, 5).Value = //value from text file;
cmdread.Parameters.Add("@Pulse rate", MySqlDbType.Int32, 3).Value = //value from text file;
cmdread.Parameters.Add("@Timestamp", MySqlDbType.Timestamp, 15).Value = //value from text file;
cmdread.Parameters.Add("@Doctor_idDoctor", MySqlDbType.Int32, 3).Value = //value from text file;
cmdread.Parameters.Add("@Personal_PatientID", MySqlDbType.Int32, 3).Value = //value from text file; 
```

* * *

此外，尽量不要在列名和参数名中使用空格。我会`@Pulse rate`改为`@PulseRate`

* * *

此外，我不明白您为什么将`cmdread.ExecuteNonQuery()`作为 DataSource 的返回值提供给 GridView。这似乎不对。

# iphone - 为什么 -(id)init 看不到我的对象；

> ID：10088159
> 
> 赞同：0
> 
> 时间：2012-04-10T11:46:35.603
> 
> 标签：iphone, xcode

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil

{

  self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

preview.text = "hello";

}

return self;

} 
```

预览它是一个简单的 UILabel；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:49:33.050

因为您的 iboutlets（UI 组件）是在 viewdidload 方法中加载的，所以
您无法在 init 中访问它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:50:33.080

仅仅因为您从 nib 创建了视图控制器并不意味着它会立即加载它。

您需要将需要创建ui组件的任何代码放在`viewDidLoad`ie中

```
- (void)viewDidLoad {
    preview.text = "hello";
} 
```

如果您检查，`preview`将`nil`在您的 init 方法中，因此在其上设置文本将不起作用！

# emacs - 如何检查次要模式（例如flymake-mode）是否打开？

> ID：10088168
> 
> 赞同：26
> 
> 时间：2012-04-10T11:47:00.393
> 
> 标签：emacs, flymake

使用 flymake-mode 时总是出错。并且flymake-mode关闭。

![在此处输入图像描述](../Images/bf148c153800ca676c04a8a1e617b5c7.png)

所以我想检查 flymake-mode 是否打开。如果没有打开，我会在调用 flymake-next-error 之前打开它。

谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-10T12:40:42.553

大多数次要模式是使用`define-minor-mode`宏定义的。对于缓冲区局部模式，该宏会创建一个与模式本身同名的缓冲区局部变量¹。`nil`当为当前缓冲区启用模式时，该变量为非。

因此，要检查是否`flymake-mode`启用，您可以测试该变量`flymake-mode`（注意，如果未启用该模式，则可能根本没有定义此变量）：

```
(and (boundp 'flymake-mode) flymake-mode) 
```

正如 Thom 在评论中指出的那样，可以使用方便的宏来表示：

```
(bound-and-true-p flymake-mode) 
```

我们可以将其用作`if`or `when`or`unless`表达式的条件：

```
(if (bound-and-true-p flymake-mode)
    (message "flymake-mode is on")
  (message "flymake-mode is off")) 
```

* * *

¹对于全局次要模式，对应的变量是全局的；但 flymake-mode 是缓冲区本地的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-07T02:04:48.360

另一种解决方案是使用`M-x describe-mode`显示所有活动的次要模式（和主要模式）和每个的简要说明。

如果当前缓冲区中打开了次要模式，您可以在弹出缓冲区中找到它的名称。

# android - SurfaceView 绘图失败

> ID：10088173
> 
> 赞同：0
> 
> 时间：2012-04-10T11:47:17.313
> 
> 标签：android, canvas, surfaceview, ondraw, surfaceholder

我正在尝试一个具有`SurfaceView`. 我继承了我的类`SurfaceView`并使用如下：

```
public class MySurfaceView extends SurfaceView  implements  SurfaceHolder.Callback {

    Context context;
    MySurfaceViewThread mThread;
    SurfaceHolder holder;
    Paint paint;

    int x = 20, y = 20, r = 10;

    public void init() {
        holder = getHolder();
        holder.addCallback(this);
        mThread = new MySurfaceViewThread(getHolder(), this);

        paint = new Paint();
        paint.setStyle(Style.STROKE);
        paint.setStrokeCap(Cap.ROUND);
        paint.setStrokeWidth(1);
        paint.setColor(Color.rgb(255, 255, 255));
    }

    public MySurfaceView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        this.context = context;
        init();

    }

    public MySurfaceView(Context context, AttributeSet attr) {
        super(context,attr);
        this.context = context;
        init();
    }

    public MySurfaceView(Context context, AttributeSet attr, int defStyle) {
        super(context, attr, defStyle);
        this.context = context;
        init();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        mThread.isRunning = false;
        while (true) {
            try {
                mThread.join();
                break;
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

    }

    @Override
    public void onDraw(Canvas canvas) {
//      super.onDraw(canvas);
//      canvas.drawColor(0, Mode.CLEAR);
        x += 2;
        y += 2;
        r += 3;
        canvas.drawColor(Color.rgb(x%255, y%255, (x+y)%255));
        canvas.drawCircle(x, y, r, paint);
        canvas.drawText("x:"+x, 100, 100, paint);
        Log.d("onDraw","onDraw()"+"x:"+x + ",y:"+y+",r:"+r);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        Log.d("surfaceCreated", "surfaceCreated()");
        mThread.isRunning = true;
        mThread.start();
    }

} 
```

我正在从以下更新我`Canvas`的`Thread`：

```
public class MySurfaceViewThread extends Thread {

    SurfaceHolder holder;
    MySurfaceView surfaceView;
    boolean isRunning = false;

    public MySurfaceViewThread(SurfaceHolder holder, MySurfaceView surfaceView) {
        Log.d("thread","thread constructor");
        this.holder = holder;
        this.surfaceView = surfaceView;
    }

    @Override
    public void run() {
        Log.d("run","run()");
        while(isRunning) {

            Canvas canvas = null;
            try {
                canvas = holder.lockCanvas();

                synchronized(holder) {
                    surfaceView.onDraw(canvas);
                }
                sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally {
                holder.unlockCanvasAndPost(canvas);
                Log.d("canvas status", "canvas unlocaked...");
            }
        }
    }

} 
```

当应用程序启动并被`onDraw()`调用时，它也会绘制圆圈和文本，但在进一步调用`onDraw()`它时不会绘制任何内容。表示第一次更新后屏幕上没有任何变化。知道我哪里错了吗？我是安卓新手，学习速度也很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:36:56.883

我得到了答案。它很奇怪。我不知道为什么这有效。我从我的活动中评论了以下行并运行。

```
surfaceView.setBackgroundColor(Color.rgb(0, 255, 0)); 
```

活动代码是：

```
public class SurfaceViewTutorialActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MySurfaceView surfaceView = new MySurfaceView(this);
//        surfaceView.setBackgroundColor(Color.rgb(0, 255, 0));
        surfaceView.setBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher));
        setContentView(surfaceView);
    }
} 
```

如果有人知道这一点，请引导我走向正确的方向。

# .net - Wcf。休息。建筑学。需要建议

> ID：10088175
> 
> 赞同：1
> 
> 时间：2012-04-10T11:47:27.010
> 
> 标签：.net, wcf, rest, architecture

假设我有这个简单的合同，我从 MS 示例中获取并进行了一些修改：

```
 [ServiceContract(SessionMode = SessionMode.Allowed)]
        public interface IService
        {
            [WebInvoke(Method = "POST", UriTemplate = "", ResponseFormat = WebMessageFormat.Xml,
                RequestFormat = WebMessageFormat.Xml),
             Description(
                 "Adds a customer to customers collection. The response Location header contains a URL to the added item.")]
            [OperationContract]
            Customer AddCustomer(Customer customer);

            [WebInvoke(Method = "DELETE", UriTemplate = "{id}"),
             Description(
                 "Deletes the specified customer from customers collection. Returns NotFound if there is no such customer.")
            ]
            [OperationContract]
            void DeleteCustomer(string id);

            [WebGet(UriTemplate = "{id}"),
             Description(
                 "Returns the specified customer from customers collection. Returns NotFo`enter code here`und if there is no such customer.")
            ]
            [OperationContract]
            Customer GetCustomer(string id);

            [WebGet(UriTemplate = ""), Description("Returns all the customers in the customers collection.")]
            [OperationContract]
            List<Customer> GetCustomers();

            [WebInvoke(Method = "PUT", UriTemplate = "{id}"),
             Description("Updates the specified customer. Returns NotFound if there is no such customer.")]
            [OperationContract]
            Customer UpdateCustomer(string id, Customer newCustomer);
        } 
```

我需要这份合同通过 webhttp REST 和 nettcp 绑定（带有会话）公开。

我的案例（合同）要困难得多，所以我需要了解是否为两种目的都有一个实现，并以某种方式区分 webhttpbinding 调用或 nettcpbinding 调用，或者为每个端点提供不同的实现。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:14:20.707

我认为您不需要混合不同的架构风格 - SOAP/WS-* (nettcpbinding) 和 REST。通过正确的实施，它们会有所不同。当您将在一个服务中混合此类样式时，您的服务方法的逻辑肯定会包含多个 if-than 或 switch 案例以确定您正在使用哪种模式，这在同时使用 HTTP 或 WCF 上下文时可能会出现问题。

我建议您创建单独的端点（合同）——一个用于 REST，一个用于 WS-*/SOAP，并遵循它们的架构风格。

要在它们之间共享逻辑，请将您的业务逻辑封装在单独的层（类）中，然后您可以简单地重用它，而无需混合 REST 或 WS-* 特定逻辑和您的业务逻辑。

在处理简单的 CRUD 操作时，请考虑使用 WCF 数据服务，它可以基于数据库为您生成 REST/OData 端点。

来自评论的 UPD：您可以使用无状态 REST 服务，但可以“模拟”您的会话。例如，通常在每个请求的特殊“身份验证”HTTP 标头中传递用户身份验证结果令牌以识别和区分用户。此类标头随每个请求一起传递，并实际模拟与授权用户的会话。因此，当会话只是两个端点的一个原因时，这个问题可以只用其中一个来解决。

# fancybox - 加载新的ajax内容后将fancybox重新定位到中心

> ID：10088181
> 
> 赞同：1
> 
> 时间：2012-04-10T11:47:51.610
> 
> 标签：fancybox

我已经实现了一个fancybox，它可以毫无问题地打开和加载ajax 内容。但是，当我使用 jquery 将新的 ajax 内容加载到 FancyBox 中的 div 中时，我需要再次将 FancyBox 置于屏幕中心。

```
function refreshContent(url) {
    $("#content").fadeOut("slow", function(){
      $.fancybox.showLoading();
      $("#content").load(url,false, function() {         
        $.fancybox.hideLoading()
        $("#content").fadeIn("slow");
        $.fancybox.reposition();
    });
  }) 
```

如您所见，我尝试过使用 reposition() 方法，但没有效果。同样适用于 center()

我在这里想念什么？

我正在使用 Fancybox 2.0.5 版

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:52:45.030

也许有点晚了，但在花式 2 中有一种方法：

$.fancybox.reposition();

您可以在此处查看其他方法：

[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:56:48.520

可能需要将您重新定位调用放在 fadeIn 的完整函数中。否则，它会在内容可见之前被调用。

# eclipse - 如何在没有“res”目录的情况下编译 Eclipse 项目

> ID：10088182
> 
> 赞同：0
> 
> 时间：2012-04-10T11:47:53.350
> 
> 标签：eclipse, build

我有一个没有“res”目录的 Android Eclipse 项目。

它只有一个文件是一项通用服务，我不需要这个项目的资源。

那么我怎么能告诉 eclipse 我不需要这个项目的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:51:41.020

右键单击您的项目 -> `Properties`。然后`Java Build Path`-> `Source`，选择`res`条目并单击`Remove`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:58:44.743

假设您没有使用资源文件夹中的任何内容，例如值、布局或图像，您可以删除该文件夹 - 这包括您的应用程序图标。

要删除文件夹，只需右键单击它并删除它并确保它不在您的构建路径中。

但是，您将无法摆脱 gen 文件夹，因为 Android 会动态构建它，因为它是通过 SDK 访问的。

# mysql - 如何组合不同表的 SUM 值？（很好的表现？）

> ID：10088184
> 
> 赞同：0
> 
> 时间：2012-04-10T11:47:54.207
> 
> 标签：mysql, performance, sum

我有以下表结构，有很多这样的表：

```
data_1:
+-------+--------+-------+
| views | clicks | date  |
+-------+--------+-------+
|    29 |     1  | ..... |
|   458 |     9  | ..... |
+-------+--------+-------+ 
....

data_43:
+-------+--------+-------+
| views | clicks | date  |
+-------+--------+-------+
|     0 |     0  | ..... |
|     0 |     0  | ..... |
+-------+--------+-------+ 
... 
```

我的问题是，如何在一个查询中获取所有总和值？

我尝试了一个简单的连接：

```
mysql> SELECT SUM(t1.views)  data_1_views,
              SUM(t1.clicks) data_1_clicks,
              SUM(t2.views)  data_43_views,
              SUM(t2.clicks) data_43_clicks
       FROM data_1 t1, data_43 t2; 
```

但我的结果不是我所期望的：

```
+--------------+---------------+---------------+----------------+
| data_1_views | data_1_clicks | data_43_views | data_43_clicks |
+--------------+---------------+---------------+----------------+
|         NULL |          NULL |          NULL |           NULL |
+--------------+---------------+---------------+----------------+ 
```

我期望它是：

```
+--------------+---------------+---------------+----------------+
| data_1_views | data_1_clicks | data_43_views | data_43_clicks |
+--------------+---------------+---------------+----------------+
|         487  |          10   |             0 |              0 |
+--------------+---------------+---------------+----------------+ 
```

这里有人可以帮助我解决这个问题吗？
如果这比在多个查询中执行所有这些操作更高效，我也很感兴趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:10:43.397

使用`Union`查询。

如下所示：

```
SELECT sum(t.data_1_views) as data_1_views,SUM(t.data_1_clicks) as data_1_clicks,
SUM(t.data_43_views) as data_43_views,SUM(t.data_43_views) as data_43_views
    FROM (
        SELECT SUM(t1.views)  data_1_views,SUM(t1.clicks) data_1_clicks,
        0 as data_43_views,0  as data_43_clicks
        FROM FROM data_1 as t1

        UNION

        SELECT 0 as data_1_views,0  as data_1_clicks,SUM(t1.clicks) as data_43_views, SUM(t2.clicks) 
        FROM data_43_clicks as t2 
       ) as t GROUP BY 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:21:40.030

在这种情况下，多个查询很好，特别是如果您对许多行进行分组。将这两个表集中在一个查询中几乎没有任何好处（实际上是潜在的错误）。我只会做两个查询

```
SELECT SUM(t1.views) data_1_views, SUM(t1.clicks) data_1_clicks
FROM data_1 t1 

SELECT SUM(t2.views) data_43_views, SUM(t2.clicks) data_43_clicks
FROM data_43 t2; 
```

# objective-c - 如何提高 NSDictionary 的性能

> ID：10088194
> 
> 赞同：0
> 
> 时间：2012-04-10T11:48:23.160
> 
> 标签：objective-c, performance, nsdictionary

我有很多对象，每个对象都有一些标签，这些标签存储在 NSDictionary 中。我还有一个循环，在其中我遍历所有对象并根据对象的标签做一些事情。方法 objectForKey：如果调用太多，性能会大大降低。我怎样才能提高性能？例如，我尝试在@property 中设置“strong”而不是“copy”，但这并没有解决问题。谢谢！

编辑：

这是某种代码，当然，它比我项目中的代码简单得多。Profiler 说热点在 objectForKey: 中，而不是在 doSomeStuff: 中。可能是因为它的电话数量吗？标签的对象很少，每个对象大约10个，但是对象的数量相当大

。H：

```
@interface MyObject : NSObject

@property (nonatomic, readwrite, strong/*copy*/  ) NSDictionary *tags;

-(void)doSomeStuff;

@end 
```

米：

```
@implementation MyObject
{
    NSDictionary *tags; // about 10 values for each object
}

-(NSDictionary *)tags
{
    return tags;
}

-(void)setTags:(NSDictionary *)newTags
{
    tags = [newTags copy];
}

-(void)doSomeStuff;

@end 
```

使用：

```
NSArray *objects = ... // a lot of items, > 1000
NSArray *rules = ... // NSArray of objects with property NSArray* Strings, about 50 strings

for (MyObject *object in objects)
{
    for (NSArray *rule in rules)
    {
        for (NSString *ruleString in rule.Strings)
        {
            // there is a more complicated check in my project, so you may imagine that there are 10 calls of objectForKey:, with different keys
            if ([object objectForKey:ruleString] isEqualToString:@"yes"])
            {
                [object doSomeStuff];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:10:09.500

如果`objectForKey`速度很慢，您最好的选择可能是为`hash`您正在添加的对象创建一个自定义（更有效）的实现。默认实现可能会产生大量可能影响性能的冲突。

话虽如此，您并没有说要添加多少对象，要使用它们做什么或使用什么环境。很难说比猜测更多。一般来说，NSDictionary 非常有效。

*编辑*：根据您添加的额外信息进行澄清......我不认为这是关于提高 NSDictionary 的性能。鉴于您的号码，您拨打`objectForKey:`了超过 50 万次；当然，这将是最苛刻的操作。你需要考虑优化你的算法（预计算？），而不是试图让已经很快的东西变得稍微快一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:31:41.343

您应该使用像 hash_map 这样更快的标准库容器。

```
#include <string>
#include <ext/hash_map>

typedef __gnu_cxx::hash_map<std::string,id> YouMap; 
```

使用此容器，您必须自己管理对象的保留/释放周期。您的 .m 文件也应该重命名为 .mm 以允许 Objective-C 和 C++ 编译。

您必须与 libstd++ 链接

# internet-explorer - IE9 和 HTML5 以及类似 XFBML 的按钮在 IE 保护模式下不起作用

> ID：10088195
> 
> 赞同：4
> 
> 时间：2012-04-10T11:48:28.047
> 
> 标签：internet-explorer, facebook-like, facebook-javascript-sdk, facebook-social-plugins

我在让我的like按钮在IE9中工作时遇到了严重的问题。它在 Chrome 和 Firefox 中运行良好，但在 IE9 中，当我单击“赞”或“发送新窗口”时会打开。我用谷歌搜索了这个问题，发现了一些类似的帖子，但没有解决我的问题。我刚刚注意到我的站点和我的开发人员环境都包含在 IE 受信任站点中，因此标记为不使用保护模式。打开保护模式后，它可以工作。

所以我去 FB 看看我是否可以在[http://developers.facebook.com/bugs](http://developers.facebook.com/bugs)上报告错误，但找不到实际发布错误的地方 - 只能浏览。因此，除了发布此消息以将我的发现通知其他开发人员之外 - 任何人都可以指出我发布错误报告的正确方向。试图谷歌它，但没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:05:43.847

我的一切似乎都运行良好。
我只能建议

1.  以异步方式初始化 javascript sdk，并将其代码放在 <body> 标记下方，以使其有时间加载。“它确实在 14 次尝试中失败了 1 次，这就是我建议的原因 [。https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)
2.  使用频道 html 文件来加快 Internet Explorer 的加载速度。

这是我如何使用解析 xfbml 和异步 javascript 呈现登录按钮的示例。

* * *

```
<div id="loginbutton"></div>
<div id="fb-root"></div>
<script>
      window.fbAsyncInit = function() {
        FB.init({
    appId  : '135669679827333',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true, // parse XFBML
    channelUrl : 'https://anotherfeed.com/emo/channel.html', // channel.html file
    oauth  : true // enable OAuth 2.0
        });
function loginbutton(){
var loginb=document.getElementById('loginbutton');
loginb.innerHTML='<div class="fb-login-button" data-show-faces="false" data-width="200" data-max-rows="1" data-autologoutlink="true" data-scope="read_stream,user_likes,publish_stream,publish_actions,read_friendlists,user_photos,user_groups,user_interests,user_videos"></div>';
FB.XFBML.parse(loginb);
};
loginbutton();
      };
  // Load the SDK Asynchronously
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=135669679827333";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

# javascript - 如何相对于鼠标拖动旋转的画布旋转 div

> ID：10088197
> 
> 赞同：0
> 
> 时间：2012-04-10T11:48:37.867
> 
> 标签：javascript, html, jquery, css

我有一个帆布 tube1Ctx 和一个 id 为 sineWave 的 div。使用纯 Javascript 在鼠标拖动时旋转画布。现在我需要相对于画布同时旋转 div（相同的角位移）。当我尝试使用以下代码时，拖动旋转画布时变换样式不会更新。有人可以帮我解决吗？

```
function tubeRotate(e){

    if (moveFlag2){

    tube1XPos = e.clientX - tube1Canvas.offsetLeft;
    tube1YPos = e.clientY - tube1Canvas.offsetTop;  

    rotate = tube1XPos-((e.clientX-tube1Canvas.offsetLeft));    
    rotate = (Math.atan(240/rotate))* Math.PI / 180;
    tube1Ctx.clearRect(240,10,tube1Canvas.width,tube1Canvas.height);    
    tube1Ctx.translate(275, 10);
    tube1Ctx.rotate(rotate);    
    tube1Ctx.translate(-275,-10 );  
    tube1Ctx.drawImage(tube1Img,240 , 10 , 46 , 235 );

        var angle=rotate;

    document.getElementById("sineWave").style.MozTransformOrigin='0% 0%';
    document.getElementById("sineWave").style.MozTransform =  'rotate('+angle+'rad)';

    document.getElementById("sineWave").style.webkitTransformOrigin='0% 0%';
    document.getElementById("sineWave").style.webkitTransform = 'rotate('+angle+'rad)';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:26:43.080

缺少报价

document.getElementById("sineWave).style.MozTransformOrigin='0% 0%';

# raphael - 在 Raphael.js 中对集合应用转换

> ID：10088206
> 
> 赞同：5
> 
> 时间：2012-04-10T11:49:16.387
> 
> 标签：raphael

使用[Raphael 2.0](http://raphaeljs.com/reference.html)，我试图以相对于集合中所有对象的方式将变换应用于一组对象。但是，我得到的效果是变换单独应用于每个项目，而与集合中的其他对象无关。

例如： http: [//jsfiddle.net/tim_iles/VCca9/8/](http://jsfiddle.net/tim_iles/VCca9/8/) - 如果您现在取消对最后一行的注释并运行代码，每个圆圈都会缩放到 0.5 倍。我试图达到的实际效果是缩放整组圆圈，因此它们的相对距离也被缩放，这应该将它们全部放在白色正方形的边界框内。

有没有办法使用 Raphael 的内置工具来实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T00:35:18.840

缩放时，第一个参数是 X 比例。如果您不提供其他参数，它将使用它作为 Y 比例，并围绕对象的中心进行缩放。

当您缩放矩形时，它会围绕矩形的中心进行缩放。如果您希望圆圈也围绕该点而不是它们的中心缩放，您应该提供该点。

所以最后一行可能是`set.transform("s0.5,0.5,100,100");`（100,100 是您缩放的矩形的中心）

至少，我认为这是你所要求的。

# java - 从小程序对象调用 id 会在 IE 中引发 js 错误

> ID：10088213
> 
> 赞同：0
> 
> 时间：2012-04-10T11:49:41.537
> 
> 标签：java, javascript, object, applet

从 JS 调用 applet id 时`Object doesn't support this property or method`出现错误。

请检查代码...

```
<!--[if !IE]> Firefox and others will use outer object -->
    <object
        classid     = "java:com.mypack.myclass.ABCClass.class"
        type        = "application/x-java-applet"
        height      = "200"
        width       = "480"
        id          = "myappletId">
        <!-- Konqueror browser needs the following param -->
        <param name="cache_archive" value="a.jar, b.jar, c.jar" />
        <param name="codebase" value="applets/" />
        <param name="OnMouseLeftClickJS" value="showModal()">
        <!--<![endif]-->
        <!-- MSIE (Microsoft Internet Explorer) will use inner object -->
        <object 
            classid     = "clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"
            codebase    = "http://java.sun.com/update/1.5.0/jinstall-1_5_0-windows-i586.cab"
            height      = "200"
            width       = "480"
            id          = "myappletId">
            <param name="code" value="com.mypack.myclass.ABCClass" />
            <param name="cache_archive" value="a.jar, b.jar, c.jar" />
            <param name="OnMouseLeftClickJS" value="showModal()">
            <param name="codebase" value="applets/" />
            <strong>No Java Support</strong>
        </object>
        <!--[if !IE]> close outer object -->
    </object>
<!--<![endif]--> 
```

现在，在我的 showModal() js 函数中，

```
var myId = document.getElementById("myappletId"); //At this point I am getting the object data. 
```

我在我的模态窗口中执行一些操作，这是一个 jquery 模态窗口，我有一个按钮。当我点击它时，我正在调用一个函数，比如 xyz()。

```
function xyz() {
    var myId = document.getElementById("myappletId"); 
    //At this point myId is getting empty.
} 
```

这仅在 IE 浏览器中发生。我在IE8中测试过。在 Firefox 和 chrome 中运行良好。

我没有浏览我的页面，在查看源代码时我可以看到我的对象标签。

请帮帮我。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:53:50.223

在您的评论中，您有

```
<!-- MSIE (Microsoft Internet Explorer) will use inner object --> 
```

怎么用`document.getElementById('myappletId').getElementById('innerApplet')`？为内部小程序使用唯一 id 是个好主意，也许你的解决方案会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:32:59.223

感谢您的努力，错误出在我的代码中。当我打开一个模态窗口时，对象标签的可见性隐藏在后面。即使我在关闭模式窗口后使其可见，此 IE 也无法识别它。奇怪但真实...

# hibernate - 无法使用注释访问 ejb 类

> ID：10088219
> 
> 赞同：0
> 
> 时间：2012-04-10T11:50:02.610
> 
> 标签：hibernate, ejb

目前我正在使用带有休眠功能的 ejb 3.o。为了映射 bean，我使用的是 hbm 文件。但是现在我们想使用带有注释的 bean 来删除 hbm 配置文件。因此，为此我删除了 hbm 文件并使用注释替换为 bean 类。部署并运行后出现以下错误

```
16:59:03,274 ERROR [AbstractLoginModule] UserProfileTbl is not mapped [select l from UserProfileTbl as l where username = 'admin
org.hibernate.hql.ast.QuerySyntaxException: UserProfileTbl is not mapped [select l from UserProfileTbl as l where username = 'ad
        at org.hibernate.hql.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:158)
        at org.hibernate.hql.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:87)
        at org.hibernate.hql.ast.tree.FromClause.addFromElement(FromClause.java:70)
        at org.hibernate.hql.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:255)
        at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3056)
        at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:2945)
        at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:688)
        at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:544)
        at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
        at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229)
        at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228)
        at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160)
        at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
        at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
        at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
        at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
        at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
        at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
        at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623)
        at com.cgsl.neura.security.org.LoginHandler.setLogin(LoginHandler.java:146)
        at com.cgsl.neura.security.org.LoginHandler.doUserLogin(LoginHandler.java:104)
        at com.cgsl.neura.security.org.LoginHandler.login(LoginHandler.java:130)
        at com.cgsl.neura.security.LocalLoginModule.authenticate(LocalLoginModule.java:25)
        at com.cgsl.neura.security.AbstractLoginModule.login(AbstractLoginModule.java:93)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at javax.security.auth.login.LoginContext.invoke(LoginContext.java:769)
        at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186)
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)
        at javax.security.auth.login.LoginContext.login(LoginContext.java:579)
        at org.jboss.security.plugins.JaasSecurityManager.defaultLogin(JaasSecurityManager.java:603)
        at org.jboss.security.plugins.JaasSecurityManager.authenticate(JaasSecurityManager.java:537)
        at org.jboss.security.plugins.JaasSecurityManager.isValid(JaasSecurityManager.java:344)
        at org.jboss.web.tomcat.security.JBossSecurityMgrRealm.authenticate(JBossSecurityMgrRealm.java:491)
        at org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:257)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:416)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Thread.java:595)
16:59:03,274 WARN  [NeuraAuthentication] Aborted login for admin
16:59:03,289 ERROR [CachedConnectionValve] Application error: default did not complete its transaction 
```

# javascript - JavaScript / SharePoint - 强制文件下载

> ID：10088221
> 
> 赞同：0
> 
> 时间：2012-04-10T11:50:12.347
> 
> 标签：javascript, file, sharepoint

**情况**：

我的 SharePoint 网站上有一个文件必须由未知数量的用户打开。这是一个 InfoPath 表单，由浏览器根据 MIME 类型设置自动打开。我的组织使用 IE，由于我是组织的“节点”，我无法访问标题或 .htaccess 文件。它也是一个具有大量安全设置的 Intranet，其中许多设置在个别计算机上经常更改，因此无法解释它们。

**尝试**：

我试过 JavaScript`target='_blank'`和`execCommand`. 不幸的是，它们都不起作用，我束手无策！Infopath 表单**不**支持浏览器，文档库设置为在客户端程序中打开，但大多数人无法打开表单。

**问题**：

有没有办法使用 JavaScript 或类似的客户端语言来提示“打开”框？除非有人知道将其配置为始终提示而不是在浏览器中自动打开的方法，否则就是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:05:39.343

灵魂是在服务器上真正使用它。需要设置 Content-disposition 标头。[MS 知识库文章](http://support.microsoft.com/kb/260519)

共享点管理员应该能够在常规设置中设置设置并设置`Browser File Handling`为严格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:20:22.727

我以前没有使用过 InfoPath，但似乎这个问题可能与浏览器文件处理设置有关。

默认情况下，浏览器文件处理在 web 应用程序级别设置为严格（应该如此）。但是，这可以在文档库级别被覆盖，据我所知，它是一个隐藏设置（至少我从未在 UI 中看到它），因此您需要使用 SharePoint Manager 或 PowerShell 来查看/更改。

如果需要，您可以使用 PS 在 Web 应用级别为此设置添加例外。不确定您是否可以在 doclib 级别执行相同的操作。

# opengl - glColor，glMatrixMode 神秘地给出“无效操作”错误

> ID：10088222
> 
> 赞同：1
> 
> 时间：2012-04-10T11:50:14.923
> 
> 标签：opengl, luagl

最近，我正在开发的游戏引擎开始在不应该出现的地方抛出 OpenGL 错误。渲染几帧后，突然我开始从 glColor 收到错误：

```
print(gl.GetError()) --> nil
gl.Color(1, 1, 1, 1)
print(gl.GetError()) --> INVALID_OPERATION 
```

如果我不在这里调用 glColor，我稍后会从 glMatrixMode 得到一个无效的操作错误。

根据 GL 手册，glColor 永远不应该引发错误，并且 glMatrixMode 仅当它位于 glBegin 和 glEnd 之间时，我检查过的情况并非如此。这些函数是否还有其他原因会引发错误，我不知道？可能与渲染到纹理/渲染缓冲区扩展有关？我一直在疯狂地调试，找不到任何会导致此类故障的东西。整个程序有点太大和复杂，无法在此处发布。它使用 luagl，它只是 OpenGL API 和 SDL 的一个薄包装器。报告的版本是：2.1 Mesa 7.10.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:36:07.467

[https://bugs.freedesktop.org/show_bug.cgi?id=48535](https://bugs.freedesktop.org/show_bug.cgi?id=48535) 看起来这实际上是一个驱动程序错误。>.>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:17:27.433

如果没有活动的 OpenGL 上下文，glColor 将导致错误。如果您使用多个上下文或 glBindFramebuffer，请检查您是否始终切换有效的上下文。还要记住，使用来自多个线程的 OpenGL 调用需要[特别注意](http://www.opengl.org/wiki/OpenGL_and_multithreading)。

# javafx-2 - 切换到下一个选项卡时选项卡和淡出效果的皮肤

> ID：10088224
> 
> 赞同：1
> 
> 时间：2012-04-10T11:50:16.400
> 
> 标签：javafx-2

1.  想改变标签的皮肤，我需要在哪里使用 Graident 混合，可以吗？
2.  如何在切换到下一个选项卡时使用动画（旧面板淡入到新面板）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:22:56.170

您可以使用简单的 css 更改选项卡的外观。例如

```
 tabName.setStyle("-fx-background-color:  linear-gradient(#2EB8B8 , #2EB8B8 )"); 
```

要实现淡入/淡出动画，请查看本教程：

```
http://java-buddy.blogspot.com/2012/02/implement-fade-infade-out-animation.html 
```

# sql-server-2008 - 使用 SQL Server 2008 中的触发器和存储过程发送 SMS

> ID：10088230
> 
> 赞同：2
> 
> 时间：2012-04-10T11:50:39.833
> 
> 标签：sql-server-2008, stored-procedures, triggers, sms-gateway

`smslog`我在桌子上写了一个触发器

```
ALTER TRIGGER [dbo].[mytrigger]    
   ON  [dbo].[smslog]   
   AFTER INSERT    
AS   
   Declare @MobileNo int   
   Declare @smstext as varchar(300)   
Begin    
   set @MobileNo = ( select mobile from inserted)  
   set @smstext = (select smstext from inserted)  
   set @sResponse = 'test'
   Exec pr_SendSmsSQL @MobileNo, @smstext, @sResponse  
END 
```

存储过程是

```
create procedure [dbo].[pr_SendSmsSQL] 
    @MobileNo varchar(12), 
    @smstext as varchar(300), 
    @sResponse varchar(1000) OUT 
as 
BEGIN 
   Declare @iReq int,@hr int 
   Declare @sUrl as varchar(500) 
   DECLARE @errorSource VARCHAR(8000)
   DECLARE @errorDescription VARCHAR(8000) 

   -- Create Object for XMLHTTP 
   EXEC @hr = sp_OACreate 'Microsoft.XMLHTTP', @iReq OUT 

   print @hr 

   if @hr <> 0 
      Raiserror('sp_OACreate Microsoft.XMLHTTP FAILED!', 16, 1) 

   set @sUrl='http://api.clickatell.com/http/sendmsg?user=devendar&password=csx19csx&api_id=3360313&to=#MobNo#&text=#Msg#' 

   set @sUrl=REPLACE(@sUrl,'#MobNo#',@MobileNo) 
   set @sUrl=REPLACE(@sUrl,'#Msg#',@smstext) 

   print @sUrl 

   -- sms code start 
   EXEC @hr = sp_OAMethod @iReq, 'Open', NULL, 'GET', @sUrl, true 
   print @hr 

   if @hr <> 0 
      Raiserror('sp_OAMethod Open FAILED!', 16, 1) 

   EXEC @hr = sp_OAMethod @iReq, 'send' 
   select @iReq
   print @hr 

   if @hr <> 0 
   Begin 
       EXEC sp_OAGetErrorInfo @iReq, @errorSource OUTPUT, @errorDescription OUTPUT

       SELECT [Error Source] = @errorSource, [Description] = @errorDescription

       Raiserror('sp_OAMethod Send FAILED!', 16, 1) 
   end 
else 
Begin
    EXEC @hr = sp_OAGetProperty @iReq,'responseText', @sResponse OUT 
    print @hr

    insert into send_log (Id, mobile, sendtext, response, created, createddate) 
    values(0, @MobileNo, @smstext, @sResponse, 'System', GETDATE())
end
end 
```

我在这里使用clickatell网关请帮助我这是什么问题

`smslog`当我在表格中插入一行时，我无法发送短信

我在插入触发器后使用并将参数传递给存储过程以发送短信。

请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T09:56:27.637

```
ALTER TRIGGER [dbo].[mytrigger]    
   ON  [dbo].[smslog]   
   AFTER INSERT    
AS   
   Declare @MobileNo int   
   Declare @smstext as varchar(300)   
Begin    
   set @MobileNo = ( select mobile from inserted)  
   set @smstext = (select smstext from inserted)  
   set @sResponse = 'test'
   Exec pr_SendSmsSQL @MobileNo, @smstext, @sResponse  
END 
```

程序

```
create procedure [dbo].[pr_SendSmsSQL] 
    @MobileNo varchar(12), 
    @smstext as varchar(300), 
    @sResponse varchar(1000) OUT 
as 
BEGIN 
   Declare @iReq int,@hr int 
   Declare @sUrl as varchar(500) 
   DECLARE @errorSource VARCHAR(8000)
   DECLARE @errorDescription VARCHAR(8000) 

   -- Create Object for XMLHTTP 
   EXEC @hr = sp_OACreate 'Microsoft.XMLHTTP', @iReq OUT 

   print @hr 

   if @hr <> 0 
      Raiserror('sp_OACreate Microsoft.XMLHTTP FAILED!', 16, 1) 

   **set @sUrl='http://api.clickatell.com/http/sendmsg?user=devendar&password=csx19csx&api_id=3360313&to=#MobNo#&text=#Msg#'** 
```

** APi 无法正常工作 - 剩余代码非常出色，可以很好地工作 **

```
 set @sUrl=REPLACE(@sUrl,'#MobNo#',@MobileNo) 
   set @sUrl=REPLACE(@sUrl,'#Msg#',@smstext) 

   print @sUrl 

   -- sms code start 
   EXEC @hr = sp_OAMethod @iReq, 'Open', NULL, 'GET', @sUrl, true 
   print @hr 

   if @hr <> 0 
      Raiserror('sp_OAMethod Open FAILED!', 16, 1) 

   EXEC @hr = sp_OAMethod @iReq, 'send' 
   select @iReq
   print @hr 

   if @hr <> 0 
   Begin 
       EXEC sp_OAGetErrorInfo @iReq, @errorSource OUTPUT, @errorDescription OUTPUT

       SELECT [Error Source] = @errorSource, [Description] = @errorDescription

       Raiserror('sp_OAMethod Send FAILED!', 16, 1) 
   end 
else 
Begin
    EXEC @hr = sp_OAGetProperty @iReq,'responseText', @sResponse OUT 
    print @hr

    insert into send_log (Id, mobile, sendtext, response, created, createddate) 
    values(0, @MobileNo, @smstext, @sResponse, 'System', GETDATE())
end
end 
```

# javascript - JQuery 并在 TD 元素上查找以删除 BR

> ID：10088233
> 
> 赞同：2
> 
> 时间：2012-04-10T11:50:51.130
> 
> 标签：javascript, jquery

我试图弄清楚如何删除具有特定 ID 的特定 TD 元素下的 BR 标签。到目前为止，我还没有成功。这是通过 jfiddle 的一些示例代码：

HTML：

```
<br>
<table border='1'>
 <tr>
  <td id="attachmentsOnClient">
   <span dir="ltr">
    <input id="ontidIOFile" type="file" />
    <br>
   </span>
   <input id="fileupload1" type="file" />
   <br>
   <input id="fileupload2" type="file" />
   <br>
  </td>
  <td>
    Leave <br> This <br> Alone <br> Here
  </td>
 </tr>
</table> 
```

Javascript 加载：

```
$('#attachmentsOnClient').find('br').remove();​ 
```

​</p>

更改上面的 HTML 使其不再是表格，但“attachmentsOnClient”TD 是一个 div，上面的 javascript 可以工作，但是在 TD 元素上它失败了。我不确定我是否选择正确，这只是我第二次尝试 JQuery

jfiddle 中的一个例子可以在[这里](http://jsfiddle.net/Z5szT/1/)看到。

编辑：如下所述，换行符是由于通过 jfiddle 格式化输入文件块。JQuery 本身确实在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:36:08.413

您看到这种情况的原因是文件上传输入部分由浏览器呈现，但也由操作系统呈现。例如，不同的浏览器会以不同的方式显示它们，但不同操作系统（windows 2000、windows xp、mac 等）上的相同浏览器也会以不同的方式显示它们。

你最好的选择是使用一些使用 CSS 的自定义样式，结合你`display: inline-block;`在容器上使用的 CSS 和一些`position:relative;`在输入上的 CSS，然后将其放置在你想要的地方。由于您有多个，您也可能需要在每个上放置一个类，以便您能够相对于彼此定位它们。例如，您可以通过标记或通过 jQuery 代码添加类属性。

编辑注意：作为您的 jQuery 工作的证明，以下警报 (3)，然后 (0)：

```
alert($('#attachmentsOnClient').find('br').length);
$('#attachmentsOnClient').find('br').remove();
alert($('#attachmentsOnClient').find('br').length); 
```

# python - 使用python进行日期时间转换

> ID：10088234
> 
> 赞同：0
> 
> 时间：2012-04-10T11:50:57.027
> 
> 标签：python, datetime

我有日期

```
'Apr, 2012' 
```

我想将其转换为“mx datetime”对象。

谁能告诉我如何转换相同的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:54:41.850

您可以使用 dateutil.parser 将日期解析为 python datetime 对象：

```
from dateutil.parser import parse
from mx.DateTime import DateFrom
date = DateFrom(parse('Apr, 2012')) 
```

# facebook - Facebook如何在服务器端实现彗星（长轮询）？

> ID：10088235
> 
> 赞同：1
> 
> 时间：2012-04-10T11:51:00.363
> 
> 标签：facebook, real-time, comet, long-polling

Facebook 似乎实施了长轮询技术来获取“真实”数据。他们在服务器端使用什么实现？我以为他们在使用 Tornado，但他们只将它用于他们的 FriendFeed 服务。

有谁知道？

谢谢

# javascript - 如何将包含带有连字符的值的字符串变量作为 java 脚本函数参数传递

> ID：10088236
> 
> 赞同：0
> 
> 时间：2012-04-10T11:51:09.943
> 
> 标签：javascript

嗨，我是 java 脚本的新手。在传递值包含连字符作为函数参数的字符串变量时遇到问题。Fire bug 引发错误，提示“标识符在数字文字后立即开始”

我正在使用 flexigrid 来显示数据。在每一行都放置了一个图像。单击该图像时，应调用 java 脚本函数。flexigrid记录内容的设置是在java中完成的，如下所示，

```
record.put("view","<img src='images/ic_text_document.png' onclick='view_content("+objid+")'/> "); 
```

变量 objid 的值类似于 c2692d22-a407-4d38-85ee-5c16f25bcce7。Firebug 通过指向第 14 位（在上面的示例中为 4）在数字文字错误之后立即引发标识符。

尝试按照其他帖子中的建议使用不同的引号组合传递变量，但效果很好。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:17:39.717

您需要在生成 html 之前转义 objid，并在使用 javascript 中的值时取消转义。

**或者**做这样的事情......

```
record.put("view","<img src='images/ic_text_document.png' onclick='view_content("+ COUNTER + ")'/><div style='display:none' id='objid"+ COUNTER + "'>" + objid + "</div> "); 
```

其中 counter 只是每个 obj/objid 的不同数字/值。在js中：

```
function view_content(objidcounter){    
var real_objid = document.getElementById('objid' + objidcounter).innerText;
...
...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:58:22.947

您应该引用该`objid`值，例如

```
record.put("view","<img src='images/ic_text_document.png' onclick='view_content(\""+objid+"\")'/> "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:59:41.217

因为当它渲染时它显示为

```
view_content(FOOBARSTRING) 
```

你需要那里的报价。

```
record.put("view","<img src='images/ic_text_document.png' onclick='view_content(\""+objid+"\")'/> "); 
```

理想情况下，您不会直接在 html 标记中添加 onclick 处理程序。

# java - 如何增加高斯模糊的不透明度

> ID：10088237
> 
> 赞同：2
> 
> 时间：2012-04-10T11:51:12.797
> 
> 标签：java, image-processing, alpha

我有一个 Java 应用程序，我需要在图像上绘制文本。文本、字体和图像都是在运行时确定的。文本需要看起来不错，但在图像顶部是可读的（足够对比）。

为了满足这些要求，我创建了一个投影。这是通过在空白/透明的 BufferedImage 上以不透明的黑色绘制文本，然后应用高斯模糊滤镜来完成的。然后我再次在阴影的顶部以不透明的白色绘制文本。所以我有不透明的白色文本，周围有一个黑色模糊的阴影，很快就会消失到完全透明的状态。然后我可以在背景图像上绘制这个图像。

我要解决的问题是阴影看起来太透明了。因此，在明亮、繁忙的背景下，它并没有给白色文本提供足够的分离度。

那么如何增加阴影的不透明度呢？我尝试增加高斯模糊的半径，这会使阴影更宽，但不会使其更不透明。

我使用的代码基于Romain Guy 的[DropShadowDemo](http://www.java2s.com/Code/Java/Advanced-Graphics/DropShadowDemo.htm)。我使用他的 createDropShadow() 和 gaussianBlurFilter()。但不是在 期间分别`paintComponent()`绘制阴影和文本，而是提前将它们都绘制到 BufferedImage 上；我在`paintComponent()`. 也许这是我的问题？但我不明白这会如何降低阴影的不透明度。`g2.setComposite()`期间我不使用`paintComponent()`。

我已经研究过使用某种[BufferedImageOp](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImageOp.html)来调整阴影的不透明度，例如 LookupOp。但是对于一个简单的调整来说似乎需要做很多工作（我猜是创建四个数字数组）。我不认为 RescaleOp 会起作用，因为我希望结果 alpha 与源 alpha 处于同一范围（0 到 1）内。如果我可以指定一个设置 new alpha = sqrt(old alpha) 的 BufferedImageOp 或类似的东西，那将是理想的。但我不知道一个简单的方法来做到这一点。

代码的详细信息可以在这里看到：

*   [ShadowedText.java](http://www.huttar.net/lars-kathy/graphics/setbeforeme/src/net/huttar/setBeforeMe/ShadowedText.java)（创建带有阴影的文本图像）
*   [SetBeforeMe.java](http://www.huttar.net/lars-kathy/graphics/setbeforeme/src/net/huttar/setBeforeMe/SetBeforeMe.java)（实现绘制图像的paintComponent()）

我会在这里包含相关的代码块，但似乎相关的代码量太大（代码墙）......不妨只提供指向源文件的链接。

## 更新

看起来像[更改 BufferedImage 的 alpha 值？](https://stackoverflow.com/questions/660580/change-the-alpha-value-of-a-bufferedimage)将是一种改变阴影不透明度的方法......基本上是一个一个地重新计算每个像素的 alpha 值。待定：它是否可移植（例如，对于 64 位机器），以及它是否足够快。如果我这样做`a = sqrt(a)`或`a = sin(a * pi * 0.5)`在每个像素上（考虑`a`在 0 到 1 的范围内），那会很慢吗？我很高兴知道是否有一种更简单的方法可以利用可用的优化，比如内置的 BufferedImageOps 大概就是这样做的。也许答案毕竟是为 LookupOp 构建数组。有人知道一些示例代码吗？

## 最终更新

使用 LookupOp 解决；请参阅下面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:07:51.873

下面是我最终使 BufferedImage 更加不透明的代码。我决定继续使用 LookupOp，而不是在每个像素上对 getRGB / setRGB 进行潜在的不可移植且缓慢的循环。设置 Lookup 数组的工作还不错。

```
/* Make alpha channel more opaque.
 * Modify the alpha (opacity) channel so that values are higher, but still
 * continuous and monotonically increasing.
 */
private static void adjustOpacity(BufferedImage shadowImage) {
    // Use a lookup table with four arrays;
    // the three for RGB are identity arrays (no change).
    byte identityArray[] = new byte[256];
    for (int i=0; i < 256; i++)
        identityArray[i] = (byte)i;

    byte alphaArray[] = new byte[256];
    // map the range (0..256] to (0..pi/2]
    double mapTo90Deg = Math.PI / 2.0 / 256.0;
    for (int i=0; i < 256; i++) {
        alphaArray[i] = (byte)(Math.sin(i * mapTo90Deg) * 256);
    }

    byte[][] tables = {
            identityArray,
            identityArray,
            identityArray,
            alphaArray
    };
    ByteLookupTable blut = new ByteLookupTable(0, tables);
    LookupOp op = new LookupOp(blut, null);

    // With LookupOp, it's ok for src and dest to be the same image.
    op.filter(shadowImage,  shadowImage);
} 
```

它似乎有效（尽管我没有截取前后的屏幕截图进行比较）。

# javascript - 如何从另一个移到灯箱？

> ID：10088238
> 
> 赞同：-1
> 
> 时间：2012-04-10T11:51:14.827
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我们如何从灯箱打开另一个潜水。实际上，我们需要在当前的灯箱应该关闭的时候打开灯箱。

这是[**演示**](http://jsfiddle.net/sweetmaanu/m9RaN/1/)链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:03:22.117

您的代码有几个问题。您的所有代码都只是以 为目标`.box`，因此无法区分您要在任何地方打开哪个框。请注意，您的两个链接都打开同一个框。你的“下一个”按钮和你的“上一个”按钮（后者你永远不会看到）都只有“关闭”类，甚至没有尝试打开*任何*灯箱。

# javascript - 如何创建一个动态导航栏，当您到达某个位置时跟随您

> ID：10088243
> 
> 赞同：1
> 
> 时间：2012-04-10T11:51:28.537
> 
> 标签：javascript, html, css, navigationbar

我想创建一个类似于本网站的导航栏：

[http://www.mysupermarket.co.uk/#/shelves/top_offers_in_asda.html](http://www.mysupermarket.co.uk/#/shelves/top_offers_in_asda.html)

谁能告诉我如何创建导航栏，它在您向下滚动页面时跟随您，但在页面初始加载时不跟随您？

当您访问给[定的网站](http://www.mysupermarket.co.uk/#/shelves/top_offers_in_asda.html)时，尝试向下滚动，您就会明白我在说什么。由MY SHOP、OFFERS、IDEAS & LIFESTYLE、BAKERY等组成的导航栏...

我真的不知道它叫什么。至少告诉我它叫什么，这样我就可以搜索了。

***这是我已经完成的解决方案***

```
window.onscroll = function(){
    if(getScrollTop()>140) {
        document.getElementById("menu").style.position="fixed";
    } else {
        document.getElementById("menu").style.position="";
    }
}

function getScrollTop() {
    if (window.onscroll) {
        // Most browsers
        return window.pageYOffset;
    }

    var d = document.documentElement;
    if (d.clientHeight) {
        // IE in standards mode
        return d.scrollTop;
    }

    // IE in quirks mode
    return document.body.scrollTop;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:54:04.203

将元素保持在同一位置可以通过[固定位置](http://www.quirksmode.org/css/position.html)样式来实现。如果您希望导航栏保持在完全相同的位置，`position:fixed;`就足够了。（至少非 IE6）

您可以[在此处找到](http://www.jtricks.com/javascript/navigation/fixed_menu.html)[一个工作示例](http://www.jtricks.com/javascript/navigation/fixed_menu.html)和一些详细信息

但是，如果您希望导航栏在向下滚动页面时从其初始位置移动到页面的顶部边框，则必须实现一些 JavaScript 来捕获页面滚动事件并`<div>`相应地移动。

有关如何执行此操作的示例，请参阅[此问题。](https://stackoverflow.com/questions/6691558/how-do-i-make-a-div-follow-me-as-i-scroll-down-the-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T10:24:21.227

注意：这不适用于 Android 2.3 浏览器；`position:fixed`不会像预期的那样运行——它在跳回顶部之前会暂时将其位置附加到滚动元素上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T18:42:13.593

如果您愿意，您可以将 z-index 设置为特定的编号，这应该可以。

例如 z-index:100;

# xcode - 将图像带入背景

> ID：10088245
> 
> 赞同：1
> 
> 时间：2012-04-10T11:51:40.130
> 
> 标签：xcode

有谁知道我如何将这个（见代码）图像带到背景？它不是“悬挂”在我放置在 Interface Builder 中的其他图像上

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 104)];
    [imageView setImage:[UIImage imageNamed:@"helloworld.png"]];
    [self.view addSubview:imageView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:54:15.057

也许 `[yourSubView.superview sendSubviewToBack:yourSubView];` 看看这个问题：[如何将 UIImageView 放在布局的背景上](https://stackoverflow.com/questions/5565505/how-to-put-uiimageview-on-the-background-of-the-layout)

# c++ - QApplication 使用 gcc 4.7 编译但崩溃

> ID：10088247
> 
> 赞同：1
> 
> 时间：2012-04-10T11:51:46.527
> 
> 标签：c++, gcc4

从这里[http://nuwen.net/mingw.html](http://nuwen.net/mingw.html)我下载了 gcc 4.7 并在 qt 中进行了设置。一切都在 qt 中编译得很好，不幸的是，当我运行我的应用程序（来自 qt）时它崩溃了。
有什么想法吗？
编辑（这是这个应用程序，OS Win7，Qt 4.8）：

```
#include <QApplication>
#include <QDialog>
int main(int c, char** v)
{
    QApplication app(c,v);
    QDialog* d = new QDialog();
    d->show();
    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:18:16.437

如果您更新编译器，您可能应该重新编译 Qt。

不同版本的 gcc 可以一起工作，但它们本身可能使用不兼容的选项编译。

# nant - 如何使 nant 构建 32 位程序集

> ID：10088253
> 
> 赞同：1
> 
> 时间：2012-04-10T11:52:09.320
> 
> 标签：nant

我有一个最初配置为使用 Release|Any CPU 构建配置构建的 Visual Studio 项目。

我需要对此进行更改，以便所有程序集都是使用 Release|x86 构建的。

我可以在 Visual Studio 中更改它，但如何在我的 nant 构建脚本中指定等效项？

**编辑**：我正在使用 csc 任务构建我的程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:17:34.713

我的经验可能已经过时（3 年前做过），但[NAnt`<csc>`文档](http://nant.sourceforge.net/nightly/latest/help/tasks/csc.html)仍然支持它：这是不可能的。

我们通过[`corflags`](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx)在构建后运行输出程序集来设置`32BIT`标志来解决这个问题。您可以通过`<exec>`任务从 NAnt 执行此操作。`CorFlags`已作为 SDK 的一部分安装，因此您应该已经拥有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T14:09:50.200

我使用的是 nant 0.92 版本。我已经使用 csc/vbc 编译器标签的平台属性解决了这个问题。

```
<csc target="library" output="xxxx.dll" platform="x86" verbose="true" debug="true">
<vbctarget="library" output="xxxx.dll" platform="x86" verbose="true" debug="true"> 
```

# python - 提供经过验证的脚本配置输入（在 Python 中）

> ID：10088258
> 
> 赞同：0
> 
> 时间：2012-04-10T11:52:25.530
> 
> 标签：python, configuration-files

我有需要不同配置数据的脚本。大多数时候它是表格格式或参数列表。目前我为此读出了excel表格。然而，不仅读取 excel 有一点问题（excel 并不是为了成为一个稳定的数据提供者），而且我还想包括一些数据验证和对配置器的一些帮助，以便部分验证输入。不过，它不必很漂亮——只是功能性的。纯文本文件将难以阅读和检查。

您能否提出一种易于实施的方法来实现这一点？当然可以编写复杂的 Web 界面和表单，但也许这太费力了？！

是一种易于编辑的方式来提供数据表和其他配置参数吗？配置信息只是带有参数列表或带有数学系数的矩阵的小表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:56:19.477

我喜欢使用[YAML](http://yaml.org/)。[它非常灵活，python 可以使用PyYAML](http://pyyaml.org/)将其作为 dict 读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:25:34.137

如果不知道您正在使用的数据是什么样的，这有点难以回答，但有几种方法可以做到。例如，您可以使用 csv 或 sqlite 之类的东西，前提是数据可以轻松地以表格格式表示，但我认为您可能会发现 xml 最适合您的用例。它非常通用，如果你找到一个好的编辑器（例如[serna](http://www.syntext.com/products/serna-free/)或[oxyxml](http://www.oxygenxml.com/)），它很容易使用，但是，为它编写你自己的编辑器可能仍然符合你的兴趣（这可能不会像你那么复杂思考！）。通过标准的 xml.etree 模块，XML 很容易在 python 中使用，并且[XML 模式](http://en.wikipedia.org/wiki/XML_schema)可用于验证。

# android - 如何解析json响应android

> ID：10088264
> 
> 赞同：0
> 
> 时间：2012-04-10T11:52:50.240
> 
> 标签：android, json, parsing

如何在下面的 json 响应中解析它。我正在开发一个预订应用程序。我从服务器得到的响应是

```
 {"HotelInformationResponse": {
 "@hotelId": "210985",
  "customerSessionId": "0ABAA826-9AAF-5791-3692-A03326791310",
 "HotelSummary": {
   "@order": "0",
  "hotelId": 210985,
  "name": "Seattle Marriott Waterfront",
  "address1": "2100 Alaskan Way",
  "city": "Seattle",
  "stateProvinceCode": "WA",
  "postalCode": 98121,
  "countryCode": "US",
  "propertyCategory": 1,
  "hotelRating": 4,
  "tripAdvisorRating": 4,
  "locationDescription": "Near Seattle Aquarium",
  "highRate": 645,
  "lowRate": 279,
  "latitude": 47.61016,
  "longitude": -122.34651
},
"HotelDetails": {
  "numberOfRooms": 358,
  "numberOfFloors": 8,
  "checkInTime": "4:00 PM",
  "checkOutTime": "12:00 PM",
  "propertyInformation": "Pets not allowed   Check-in time starts at 4 PM  Check-out  time is Noon  ",
   } 
```

任何方法都值得赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:14:31.147

我希望这段代码可以帮助你

```
 public static String Profile_response(String response){
            try{
                JSONArray jsonarray = new JSONArray("["+response+"]");
                JSONObject jsonobject = jsonarray.getJSONObject(0);
                parseForcitydetail1(jsonobject.getString("HotelInformationResponse"));

                return response;

            }catch (Exception e) {
                return "\"" + "Access Denied" + "\"";
            }
        }

    public static void parseForcitydetail1(String res){
            try{
                 JSONArray jsonarray1 = new JSONArray(res);
                for(int i=0;i<jsonarray1.length();i++){
                        JSONObject jsonobject = jsonarray1.getJSONObject(i);
                        Hotal_ID.add(jsonobject.getString("@hotelId"));
                        customer_ID.add(jsonobject.getString("customerSessionId"));

            }
 parseForcitydetail2(jsonobject.getString("HotelSummary"));

            }catch (Exception e) {
                System.out.println(e.toString());
            }
        }

    public static void parseForcitydetail2(String res){
            try{
                 JSONArray jsonarray1 = new JSONArray(res);
                for(int i=0;i<jsonarray1.length();i++){
                        JSONObject jsonobject = jsonarray1.getJSONObject(i);
                        Order.add(jsonobject.getString("@order"));
                        hote_ID.add(jsonobject.getString("hotelId"));
    Name.add(jsonobject.getString("name"));                     Address.add(jsonobject.getString("address1"));....
    City.add(jsonobject.getString("city"));
    StateProvinceCode.add(jsonobject.getString("stateProvinceCode")); PostalCode.add(jsonobject.getString("postalCode"));
    CountryCode.add(jsonobject.getString("countryCode"));
    PropertyCategory.add(jsonobject.getString("propertyCategory"));                     HotelRating.add(jsonobject.getString("hotelRating"));....
    TripAdvisorRating.add(jsonobject.getString("tripAdvisorRating"));
    LocationDescription.add(jsonobject.getString("locationDescription")); Latitude.add(jsonobject.getString("latitude"));
    Longitude.add(jsonobject.getString("longitude"));
            }

            }catch (Exception e) {
                System.out.println(e.toString());
            }
        } 
```

**与“HotelDetails”解析相同的过程**

享受 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:04:31.800

```
Using JSONOBject, JSONArray to contain data like JSONObject, JSONArray
Using methods like: getJSONObject(), getString(), getXXX(). . to get data which you want.
with XXX -  data type like int, string 
```

您将通过描述如何清晰解析 JSON 的链接（示例）轻松了解如何在 Android 中解析 JSON： [http ://www.technotalkative.com/android-json-parsing/](http://www.technotalkative.com/android-json-parsing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:55:10.657

您可以使用 JSONArray 和 JSONObject 手动解析它。但它很无聊，并且在循环运行时可能需要特别注意按键。最简单且强烈推荐的方法是使用[Google Gson](http://code.google.com/p/google-gson/)库自动处理此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:00:51.707

```
private JSONObject jObject;
jObject = new JSONObject(your response as string);
//this will give you json object for HotelInformationResponse
JSONObject menuObject = jObject.getJSONObject("HotelInformationResponse");
by this way you can get values
String hotelId = menuObject.getString("@hotelId");
String customerSessionId = menuObject.getString("customerSessionId");
//...rest are same do same thing for HotelDetails 
```

欲了解更多信息，[请查看此链接](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)

# jquery - IE 渲染 JQuery slideDown 不正确

> ID：10088265
> 
> 赞同：0
> 
> 时间：2012-04-10T11:52:57.433
> 
> 标签：jquery, css, internet-explorer

我有一个很好的 jquery 向下滑动效果在这里工作：

[http://georgedesign.co.uk/test/markupV2/index.html](http://georgedesign.co.uk/test/markupV2/index.html)

在“服务”部分或“团队”部分中，您可以单击任何面板并打开“更多信息”框。再次单击该框，它就消失了。

问题是这样的：在 IE(7) 中，名为“关于”的第一个面板的行为与其他面板不同。相反，它滑到父 div 下方并且似乎没有采用“位置：像其他人一样固定'css风格..

这个面板的内容也是不可见的。。

我已经盯着这个问题一两个星期了，我的眼睛正在融化..

我只是不明白为什么它在所有其他浏览器上都能正常工作，而其他面板工作正常，但不是第一个。

如果有人可以快速查看代码并查看我（必须拥有！）错过的内容，我将不胜感激另一双眼睛..！

非常感谢，

G

ps，我确信 JQuery 可以缩短，但我仍在掌握它！;)

如果有帮助，这是代码：

HTML：

```
<div class="our-services">
                    <strong class="slogan main-strap">Property Investment for Private Equity</strong>

                    <span id="services" class="scroll">&nbsp;</span>

                    <h2>Our Services</h2>

                    <p>We are a UK &amp; European Property Investment and Asset Management Business, dedicated to generating value and providing real returns to our investors in any environment.</p>
                    <ul class="services-list">

                        <li class="slide1">
                            <div class="holder">
                                <div class="frame">
                                    <h3><a href="#">About</a></h3>
                                    <div class="description">
                                        <p>Our business was established in 2002 and we remain an inspired and motivated team of property professionals.</p>
                                    </div>
                                    <img src="images/img1.jpg" width="233" height="139" alt="about" />
                                    <a class="more" href="#">Read more...</a>
                                </div>
                            </div>

                        </li>
                         <div class="Text1 round">
                                    <img src="images/X.gif" class="x-class" width="12" height="12" alt="X">
                                    <p>Our success is driven by our integrity which is at the heart of everything we do, our recognition of the wisdom and vision of others around us, and our will to succeed. 
                                Collectively the Athanor Team have in excess of 80 years experience working in real estate and financial markets.   This has given us a deep understanding of how to innovate and drive value in changing  conditions.   We have been involved in property transactions with a value of in excess of £3 billion.<br>
                                Athanor are specialists in :</p>
                                <ul>
                                    <li>The origination of property investment opportunities
                                    </li>
                                    <li>Strategy &amp; analysis
                                    </li>
                                    <li>Debt origination
                                    </li>
                                    <li>Establishment of appropriate corporate, tax and fund structures
                                    </li>
                                    <li>Property asset management. 
                                    </li>
                                    <li>Property disposals.
                                    </li>
                                </ul>
                                <img class="round" src="images/img88.jpg" width="300" height="154" alt="Mission Crane">
                        </div>

                        <li class="slide2">
                            <div class="holder">
                                <div class="frame">
                                    <h3><a href="#">Mission</a></h3>
                                    <div class="description">
                                        <p>To excel in providing our clients with a focused, individual  and comprehensive solution to property investing.</p>
                                    </div>
                                    <img src="images/img2.jpg" width="233" height="139" alt="mission" />
                                    <a class="more" href="#">Read more...</a>
                                </div>
                            </div>
                        </li>

                        <li class="slide3">
                            <div class="holder">
                                <div class="frame">
                                    <h3><a href="#">Strategy</a></h3>
                                    <div class="description">
                                        <p>At Athanor we focus on ‘value’ investing into primarily institutional quality property.</p>
                                    </div>
                                    <img src="images/img3.jpg" width="233" height="139" alt="strategy" />
                                    <a class="more" href="#">Read more...</a>
                                </div>
                            </div>
                        </li>
                    </ul>

                    <div class="Text2 round">

                <img class="round" src="images/mission-crane.jpg" width="450" height="306" alt="Mission Crane">
                    <img src="images/X.gif" class="x-class" style="float:right" width="12" height="12" alt="X">
                <h3>Mission</h3>
                <p>"To excel in providing our clients with a focused, individual  and comprehensive solution to property investing.   To generate value and real returns in any environment."
                    </p>
            </div>

                    <div class="Text3 round">
                            <img src="images/X.gif" class="x-class" width="12" height="12" alt="X">
                            <p>At Athanor we focus on 'value' investing into primarily institutional quality property. We target assets providing long term locational stability, with secure and attractive income returns and which also have the potential for both income and capital growth. Cash forms a significant proportion of our total return expectations.<br>
                                New opportunities are selected via a combination of research, intelligence and experience.<br>
                                Our approach is opportunistic both geographically and by property sector, although always with a view to having a balance commensurate with our perception of the risks and rewards associated with those sectors and geographies.<br>
                                We understand that real estate assets are very responsive to active management.   Consequently asset management is a core activity which ensures returns are maximised throughout the life of investments.<br>
                                Primary geographies – UK and Continental Europe.<br>
                                Property sectors – all property sectors but primarily retail, logistics/industrial, offices, leisure and residential.</p>
                    </div>

                </div> 
```

CSS：

```
li.slide1, li.slide2, li.slide3, li.mug1, li.mug2, li.mug3, li.mug4 {cursor:pointer;}

div.Text1, div.Text2, div.Text3, div.mugText1, div.mugText2, div.mugText3, div.mugText4 {display:none; margin-top:24px;}

div.Text1, .Text2, .Text3, .mugText1, .mugText2, .mugText3, .mugText4 {
    background-color: white; 
    position:fixed; 
    top:215px; 
    width:860px; 
    height:323px; 
    padding:20px; 
    border: 1px solid #e6e6e6;
    }

.mugText1, .mugText2, .mugText3, .mugText4 {position:fixed; top:215px; height:400px;}

.Text1 img {float:right;}

.Text1 p {margin:0; font-size:18px;}

.Text1 ul {font-size:16px; width:440px; float:left;}

.Text2 img {float:left}

.Text2 p, .Text2 h3 {margin: 0 90px 0 490px !important;}

.Text3 p {font-size:18px} 
```

JS：

```
$('.slide1').click( function() { $('.Text1').slideDown(500).fadeIn(500);

$('.Text2').slideUp(250).fadeOut(0); $('.Text3').slideUp(250).fadeOut(0); } );

  $('.slide2').click( function() { $('.Text1').slideUp(250).fadeOut(0);

 $('.Text2').slideDown(500).fadeIn(500); $('.Text3').slideUp(250).fadeOut(0); } );

  $('.slide3').click( function() { $('.Text1').slideUp(250).fadeOut(0); $('.Text2').slideUp(250).fadeOut(0);

 $('.Text3').slideDown(500).fadeIn(500); } );

$('.Text1, .Text2, .Text3').click( function() { $('.Text1, .Text2, .Text3').slideUp(250).fadeOut(0); } );

$('.mug1').click( function() { $('.mugText1').slideDown(500).fadeIn(500);
$('.mugText2').slideUp(250).fadeOut(0); $('.mugText3').slideUp(250).fadeOut(0);
$('.mugText4').slideUp(250).fadeOut(0);  } );
$('.mug2').click( function() { $('.mugText2').slideDown(500).fadeIn(500);
$('.mugText1').slideUp(250).fadeOut(0); $('.mugText3').slideUp(250).fadeOut(0);
$('.mugText4').slideUp(250).fadeOut(0);  } );
$('.mug3').click( function() { $('.mugText3').slideDown(500).fadeIn(500);
$('.mugText1').slideUp(250).fadeOut(0); $('.mugText2').slideUp(250).fadeOut(0);
$('.mugText4').slideUp(250).fadeOut(0);  } );
$('.mug4').click( function() { $('.mugText4').slideDown(500).fadeIn(500);
$('.mugText1').slideUp(250).fadeOut(0); $('.mugText2').slideUp(250).fadeOut(0);
$('.mugText3').slideUp(250).fadeOut(0);  } );

$('.mugText1, .mugText2, .mugText3, .mugText4').click( function() { $('.mugText1, .mugText2, .mugText3, .mugText4').slideUp(150).fadeOut(0); } );

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:04:17.707

好吧，经过多次撕裂头发后，我终于找到了一个很好的解决方法。

我正在使用一个用于圆角的 jquery 插件，名为“curvycorners”。它很酷，任何你想要一个圆角的东西，只要给它一个圆角就可以了。

唯一的缺点是.. IE 无法处理它，并且有点困惑，添加了一个 draw 类和一个相对于它找到的第一个 div 的位置以及“round”类。

我所做的只是在我想要圆角的第一个正确元素之前添加一个带有“round”和“display:none”类的虚拟 div。嘿presto，没有更多的问题！

如果他们遇到同样的怪事，我希望这会有所帮助！;)

多谢你们，

G

# jquery - 为什么我的 jQuery-UI 对话框中的 HTML 表单没有提交？

> ID：10088267
> 
> 赞同：2
> 
> 时间：2012-04-10T11:53:14.713
> 
> 标签：jquery, html, ajax, jquery-ui

这是一个 HTML 表单的代码，如 Firebug 所示：

```
<form action="http://localhost/home/newuser" method="post">
    <input type="hidden" value="48" name="user_id">
    <input type="text" name="username">
    <input type="submit" value="Next">
</form> 
```

下面是一些绑定到它的 jQuery 代码：

```
$('.popup .newuser form').live('submit', function()
{
    $(this).ajaxSubmit(function(data)
    {
     // handle response
    });
    return false;
}); 
```

但是，当我单击“下一步”按钮时，文本字段会显示先前输入值的组合框（Firefox 功能）。Firebug 的 Network 选项卡上没有显示 HTML 请求，并且 jQuery 侦听器中的断点未命中。

感觉就像我错过了一些非常明显的东西......

**更新：**我意识到发生了更奇怪的事情：我无法通过键盘在文本字段中*输入任何内容。*我只能从 Firefox 组合框中选择以前的值。之后，我什至无法选择框中的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:02:25.410

事实证明，这个问题与 jQuery 或 Javascript 无关。相反，它位于 CSS 中，其中包含表单的 DIV 的 z-index 为 1，并且本身包含在 jQuery-UI 对话框中，框架给出的 z-index 为 1001。显然这导致了内部 DIV (因此表单）根本不接收任何键盘或鼠标事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:56:57.933

```
<form action="http://localhost/home/newuser" method="post">
    <input type="hidden" value="48" name="user_id" />
    <input type="text" name="username" />
    <input type="submit" value="Next" />
</form> 
```

将 / 放在输入元素的末尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:09:18.297

你为什么不使用`<form ... OnSubmit="yourfunction()"></form>`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:27:48.983

我会将此放在评论中，但似乎我还没有这样做的特权。

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

**编辑**

用逗号而不是空格分隔选择器：

`$('form, .popup, .newuser')`

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:29:21.530

[.live()](http://api.jquery.com/live/)现在已弃用。对于跨浏览器支持，当您使用 jQuery 1.7+ 时使用 .on() 或[在](http://api.jquery.com/on/)较低版本中使用[.delegate() 。](http://api.jquery.com/delegate/)

.on() 示例：

```
$(document).on('submit', '.popup .newuser form', function(){
    $(this).ajaxSubmit(function(data){
       // handle response
    });
    return false;
}); 
```

.delegate() 示例：

```
$(document).on('.popup .newuser form', 'submit', function(){
    $(this).ajaxSubmit(function(data){
       // handle response
    });
    return false;
}); 
```

# iphone - 将核心数据与现有的单视图应用程序一起使用

> ID：10088274
> 
> 赞同：4
> 
> 时间：2012-04-10T11:53:48.400
> 
> 标签：iphone, objective-c, ios, core-data

我正在尝试了解 Core Data 并正在关注 Apple 的“位置”教程。我遇到的一个直接绊脚石是我已经开始构建我想要使用 Core Data 的应用程序。它是一个单一的视图应用程序。

为了在此应用程序中使用 Core Data，我需要采取哪些步骤？该教程说在创建项目时选中“使用核心数据进行存储”复选框，但必须有一种方法可以在项目创建后启用核心数据。

我真的很感激一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T10:25:01.393

1.) 创建一个名为 CoreDataTutorial 的基于视图的应用程序。

2.) 将核心数据框架添加到项目中。右键单击框架，选择添加 > 现有框架……找到 CoreData.frameworks 并单击添加。

3.) 将数据模型添加到项目中。右键单击 Resources，选择 Add > New File ... 在 iOS 下选择 Resource，然后选择 Data Model 并点击 Next。

将文件命名为 CoreDataTutorial.xcdatamodel，然后点击下一步。

4.) 双击我们刚刚创建的文件CoreDataTutorial.xcdatamodel。这将打开模型对象编辑器。

在左上窗格中单击 + 符号以添加新实体。

通过在右上方窗格中输入名称来命名实体“SomeName”。

在实体仍处于选中状态时，单击顶部中间窗格中的 + 符号并选择添加属性。将此属性命名为“some_attribute_name”并将其设置为字符串类型。

5.) 现在我们要在两个实体之间创建关系。在实体窗格中选择您的实体。单击属性窗格中的 + 符号并选择添加关系。将关系命名为“creation”，将 Destination 设置为 Release，将 Delete Rule 设置为 Cascade。

要执行相反的操作，我们在实体窗格中选择 Release。单击属性窗格中的 + 符号并选择添加关系。将关系命名为“creator”，将 Destination 设置为 Artist，将 Inverse 设置为 release，将 Delete Rule 设置为 Cascade。

您现在可以关闭对象编辑器。

6.) 展开其他源并双击 CoreDataTutorial_Prefix.pch。为 CoreData 添加导入。

```
#ifdef __OBJC__
    #import <foundation foundation.h="">
    #import <uikit uikit.h="">
    #import <coredata coredata.h="">
#endif 
```

这使我们不必将其导入每个文件。

7.) 接下来我们将设置应用程序委托头文件，然后是实现文件。

首先是头文件。我们需要为我们的 NSManagedObjectContext、NSManagedObjectModel 和 NSPersistentStoreCoordinator 创建变量。

我们还将声明一个名为 applicationDocumentsDirectory 的操作，该操作获取我们的数据将存储在 SQLite 文件中的调味品目录的路径。以及在应用退出时保存上下文的操作。

这是我们完成后头文件的样子。请记住，我们将 import 语句添加到 CoreDataTutorial_Prefix.pch 文件中，因此我们不需要在此处导入它。

```
#import <uikit uikit.h="">

@class CoreDataTutorialViewController;

@interface CoreDataTutorialAppDelegate : NSObject <uiapplicationdelegate> 
{
    UIWindow *window;
    CoreDataTutorialViewController *viewController;

@private
    NSManagedObjectContext *managedObjectContext;
    NSManagedObjectModel *managedObjectModel;
    NSPersistentStoreCoordinator *persistentStoreCoordinator;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet CoreDataTutorialViewController *viewController;

@property (nonatomic, retain, readonly) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, retain, readonly) NSManagedObjectModel *managedObjectModel;
@property (nonatomic, retain, readonly) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (NSURL *)applicationDocumentsDirectory;
- (void)saveContext;

@end 
```

8.) 如果您不使用 ARC，请注意释放内存

9.) 实现 applicationDocumentsDirectory 方法。

```
/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory 
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

10.) 接下来，实现 saveContext 方法：

```
- (void)saveContext 
{

    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) 
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) 
        {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.
             */
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
} 
```

11.) 最后为你的变量实现你的访问器方法，就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:57:38.967

转到*目标*->*构建阶段*->将*二进制文件与库链接*并添加`CoreData.framework`. 你应该很高兴去...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:00:03.013

当然，您可以在启动或创建应用程序后添加核心数据支持。

我建议您执行以下操作：

*   将核心数据框架添加到您的目标
*   添加对象模型“添加新文件 -> 核心数据 -> 数据模型”
*   创建您的初始对象模型
*   为对象模型中的所有模型创建 NSManagedObject 子类
*   创建一个控制器（子类 NSObject），在其中执行单例/静态实例（[单例](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html)）
*   在您的控制器中添加一些数据层方法，例如“getObjectsXYZ”、“saveData”等。

*   然后，在您现有的应用程序中，您可以通过控制器类加载对象，例如“ `[[mycontroller sharedInstance] getObjectYByName:@"some text"]`”

当然，您需要深入挖掘核心数据。:)

如果您使用过 ORM，那么您可能会查看：mogenerator vimrentsch。 [http://rentzsch.github.com/mogenerator/](http://rentzsch.github.com/mogenerator/)

这使得数据模型非常非常容易。我对那个工具发誓！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:02:42.867

如果您需要查看访问 Core Data 需要添加的代码类型，请创建一个包含 Core Data 的虚拟项目，并查看应用程序委托中支持它的方法类型。

或者，您可以采用更好的方法将 Core Data 访问代码放在自己的类中。可以在这里找到对该策略的一个很好的描述：http: [//nachbaur.com/blog/smarter-core-data](http://nachbaur.com/blog/smarter-core-data)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:03:48.567

老实说，如果您只有一个视图，那么按照教程所述从头开始创建应用程序可能是最简单的。您需要包含很多零碎的内容，从长远来看，它可以为您节省大量时间。

但是，您可以手动完成：

*   将 Core Data 框架添加到您的项目中
*   添加数据模型
*   在您的应用委托中添加代码以创建托管对象上下文（包括所有错误条件）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T13:07:02.140

根据我的经验，在项目中包含 Core Data 的更好方法是选择具有“使用 Core Data 进行存储”选项的项目类型。您可以将现有项目中的文件包含在新项目中。当然你可以手动包含Core Data，但是会产生很多问题。

# c++ - Windows下C++项目中使用cpp-netlib

> ID：10088277
> 
> 赞同：10
> 
> 时间：2012-04-10T11:53:51.130
> 
> 标签：c++, cpp-netlib

我想在我在 Windows 上运行的 C++ 项目中使用 cpp-netlib 库。我已经严格按照[http://cpp-netlib.github.com/getting_started.html](http://cpp-netlib.github.com/getting_started.html)下的说明进行操作，直到“Getting CMake”部分，这是我停止理解该说明的地方。CMake 真的是非强制性的吗？如果是这样，我可以在我的项目中使用该库所需的确切步骤是什么？

如果有人可以在此处向我提供说明，或向我推荐详细指南，那就太好了。谷歌对我帮助不大。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T14:21:19.940

这里同样的问题：

我得到了它

从我转储 cpp-netlib-0.9.4 的目录中

```
cd ..
mkdir cpp-netlib-build
cd cpp-netlib-build
cmake.exe -G "Visual Studio 10" -DBOOST_ROOT:string="C:\Dev\Boost\boost_1_51_0" ../cpp-netlib-0.9.4 
```

（您的路径可能会有所不同）这会使用 VS10 解决方案和项目填充 cpp-netlib-build 目录。

# android - 我如何从 android listview 中获取值？

> ID：10088281
> 
> 赞同：1
> 
> 时间：2012-04-10T11:54:00.690
> 
> 标签：android, android-layout

嗨，这是我的代码，我想访问`KEY_ID`我放在 maplist 中的列表项单击变量。请帮助我如何做到这一点。

```
ArrayList (HashMap)  (String, String) mapList = new ArrayList(HashMap(String, String)) ();
    XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(xml); 
// getting DOM element
    NodeList nl = doc.getElementsByTagName(KEY_Route);

    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        Element e = (Element) nl.item(i);

        // adding each child node to HashMap key => value

        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_SchoolName, parser.getValue(e, KEY_SchoolName));
        map.put(KEY_ChildrenName, parser.getValue(e, KEY_ChildrenName));
        map.put(KEY_AlertTime, parser.getValue(e, KEY_AlertTime));
        map.put(KEY_RouteName, parser.getValue(e, KEY_RouteName));
        map.put(KEY_Notification, parser.getValue(e, KEY_Notification));
        map.put(KEY_StopName, parser.getValue(e, KEY_StopName));
        // adding HashList to ArrayList
        mapList.add(map);
    }

    list = (ListView) findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter = new LazyAdapter(this, mapList);
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            int idw = position;
            long logss = id;

// There i want to access the KEY_ID..              

            } catch (Exception e) {
                e.printStackTrace();
                progressDialog.dismiss();
            }

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:00:47.267

在您的**onItemClick**方法中，您需要从特定*位置的**mapList对象中获取**HaspMap*：

 **```
HashMap<String, String> map = mapList.get(position);

//and then read values out from 'map' object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:59:50.090

使用此代码获取所选列表项的位置。

```
ListView lv1 = (ListView) findViewById(R.id.ListView01); 

     lv1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a, View v, int position, long id) {

             Object o = lv1.getItemAtPosition(position);

        }
    }); 
```**

# .net - 将格式化文本保存到 SQL .Net

> ID：10088283
> 
> 赞同：-4
> 
> 时间：2012-04-10T11:54:07.973
> 
> 标签：.net, winforms

如何将格式化文本从富文本框中保存和检索到 SQL 数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:29:41.250

I solved it myself and want to share with you..Thanks

You can use RichTextBox1.rtf.

Insert Into Table1(Note)Values('" + RichTextBox1.rtf + "')

This will insert as formatted text. You can retreive the text with same format you edited in the UI.

Thanks all for you feedback..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:11:02.807

你可以这样做

```
 string queryString = 
        "INSERT INTO Users (Description) VALUES('" + RichTextBox1.Text + "')";
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        SqlCommand command = new SqlCommand(queryString, connection);
        connection.Open();

        try
        {
            command.ExecuteNonQuery();
        }
        Catch
        {

        }
        finally
        {

        }
    } 
```

# objective-c - 从画廊或相机 IOS 中获取图像的菜单

> ID：10088288
> 
> 赞同：1
> 
> 时间：2012-04-10T11:54:26.913
> 
> 标签：objective-c, ios

我一直在寻找 IOS 菜单名称以从用户图库中获取图像或激活相机。我的目的是在用户触摸 UIImageView 为其应用配置文件选择图像后显示此菜单。

很抱歉问，但我没有成功搜索信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:19:39.897

还有一个关于这个主题的很好的教程，我发现它很有用：

[http://www.roseindia.net/tutorial/iphone/examples/PhotoLibrary.html](http://www.roseindia.net/tutorial/iphone/examples/PhotoLibrary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:55:57.613

该类`UIActionSheet`用于此目的。[这是Apple 的 HIG](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/UIKitUICatalog/UIActionSheet.html)和[API 参考](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)中的Action Sheets 链接。

# xcode - 无需用户交互的UITableview的有效自动刷新（IOS 5）

> ID：10088298
> 
> 赞同：2
> 
> 时间：2012-04-10T11:55:10.350
> 
> 标签：xcode, ios5, push-notification

我从未使用推送通知编写过应用程序，我有一个非常笼统的问题。我想在没有“拉刷新”或任何其他用户交互的情况下自动刷新 UITableview 的数据（来自网络服务）。是否可以使用推送通知来通知我的应用程序发生数据更改，以避免每 xx 秒轮询一次而浪费带宽和电池？

换句话说，当我的应用程序在前台运行时（也许）我可以处理消息并且用户不会收到弹出窗口，但否则会发生什么？

有没有其他方法可以达到相同的结果？

我将使用IOS 5.0+

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:58:51.280

您可以创建一个服务器 HTTP-Request，它仅在发生更改时才返回某些内容。然后，如果此响应不为空，您可以重新加载数据。您可以通过 NSTimer 调用的函数。

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(get) userInfo:nil repeats:YES]; 
```

和

```
-(void)get {
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://example.com/app.php"]];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    if(![responseString isEqualToString:@""]) {
    // reload
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:00:59.347

当您的应用程序运行时，您可以注册以接收推送通知。然后只需实现该方法，使其更新您的表格视图。

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif { 
```

[Apple](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)有很好的记录。

# c# - 没有默认构造函数的设计

> ID：10088302
> 
> 赞同：7
> 
> 时间：2012-04-10T11:55:22.747
> 
> 标签：c#, default-constructor

我想限制使用默认构造函数创建对象。因为我有如下设计：

```
class Program
{
    static void Main(string[] args)
    {
        BaseClass bc = new BaseClass("","");
        XmlSerializer xml = new XmlSerializer(typeof(BaseClass));
        StreamWriter sw = new StreamWriter(File.Create("c:\\test.txt"));
        xml.Serialize(sw,bc);
        sw.Flush();
        sw.Close();
    }
}
[Serializable]
public class BaseClass
{
    public string UserName, Password;
    // I don't want to create default constructor because of Authentication
    public BaseClass(string _UserName, string _Password)
    {
        UserName = _UserName;
        Password = _Password;
        f_Authenticate();
    }
    private void f_Authenticate() { }
}

public class DerivedClass:BaseClass
{
    public DerivedClass(string _UserName, string _Password) : base(_UserName, _Password)
    {
    }
} 
```

还行吧。但是当我将 BaseClass 设置为 Serializable 时，它​​会产生这个错误： `Unhandled Exception: System.InvalidOperationException: ConsoleApplication1.BaseC lass cannot be serialized because it does not have a parameterless constructor.`

现在我的设计正在崩溃，因为我需要有`Username`,`Password`参数，但默认构造函数正在破坏我的设计......

我该怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T11:58:03.760

创建私有默认构造函数

```
private DerivedClass()
{
    // code
} 
```

即使它是私有的，序列化程序也会成功调用它

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-10T11:58:21.440

反序列化您的实例的类需要一个无参数的构造函数来创建实例，但您不必实现公共构造函数——只要它不需要参数，就有一个`private`or构造函数就足够了。`internal`

顺便说一句，您也可以使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)，它不需要无参数构造函数并且也可以创建 XML；这始终是我的主要选择:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:02:16.647

*   您是否尝试过创建私有无参数构造函数？

*   如果需要公共的，您可以随时评论说不应该使用它（不是最好的解决方案）

您还需要在 Serializable 类中创建属性。在序列化/反实现过程中不考虑变量，也不会读取或写入变量

# python - 十六进制转二进制程序 - Python

> ID：10088306
> 
> 赞同：0
> 
> 时间：2012-04-10T11:55:35.443
> 
> 标签：python

我正在做复习试卷。这不是我需要帮助的特定问题，但我不确定为什么在输入某些数据时程序输出不正确。

```
def Binary(Hex):
    Result = ''
    ErrorFound = False
    BinaryEquivalent = ''
    EmptyInput=""
    for ThisHexDigit in Hex:
        if ThisHexDigit in ['1','2','3','4','5','6','7','8','9','0','A','B','C','D','E','F']:
            if ThisHexDigit == '0': BinaryEquivalent = '0'
            elif ThisHexDigit == '1': BinaryEquivalent = '1'
            elif ThisHexDigit == '2': BinaryEquivalent = '2'
            elif ThisHexDigit == '3': BinaryEquivalent = '3'
            elif ThisHexDigit == '4': BinaryEquivalent = '4'
            elif ThisHexDigit == '5': BinaryEquivalent = '5'
            elif ThisHexDigit == '6': BinaryEquivalent = '6'
            elif ThisHexDigit == '7': BinaryEquivalent = '7'
            elif ThisHexDigit == '8': BinaryEquivalent = '8'
            elif ThisHexDigit == '9': BinaryEquivalent = '9'
            elif ThisHexDigit == 'A': BinaryEquivalent = '10'
            elif ThisHexDigit == 'B': BinaryEquivalent = '11'
            elif ThisHexDigit == 'C': BinaryEquivalent = '12'
            elif ThisHexDigit == 'D': BinaryEquivalent = '13'
            elif ThisHexDigit == 'E': BinaryEquivalent = '14'
            elif ThisHexDigit == 'F': BinaryEquivalent = '15'
            Result = Result + BinaryEquivalent
        elif ErrorFound == True:
            print('You have made a mistake')
        elif Hex==EmptyInput:
            print('Empty input, try again.')

    return Result 
```

是的，我知道这是一段过于复杂的代码，但它在试卷中，所以我必须使用它。就是这样，除了所有的 BinaryEquivalent 字符串`BinaryEquivalent = ''`里面没有数字。

问题是当我在程序显示时输入两个字符。例如，输入“BBB”将输出 11，“BBBBBB”也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:00:37.150

您应该将`return`语句排除在`for`循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:01:27.557

该`return`语句在`for`循环内，因此只进行了一次迭代，它应该是：

```
for ThisHexDigit in Hex:
    #code

return result 
```

并不是：

```
for ThisHexDigit in Hex:
    #code
    return result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:09:13.663

仅当您的十六进制数是单个十六进制数字时，您的解决方案才有效。如果要转换更长的数字，则必须进行一些更正。

1.  `Result`可以是简单的int，以0开头
2.  所有 BinaryEquivalent 都应该是整数，所以使用`BinaryEquivalent = 0`
3.  在 for 循环中，您必须增加结果，使用：`Result = 16 * Result + BinaryEquivalent`

# r - 增加 R 中的矢量分辨率

> ID：10088307
> 
> 赞同：0
> 
> 时间：2012-04-10T11:55:42.480
> 
> 标签：r, vector, plot

我试图找出一种增加向量元素数量的方法，以便在绘制这些向量的值时消除可见的角度效应。例如，假设我有两个向量，每个向量包含 10 个元素：

```
a = c(4,2,10,5,3,4,8,9,6,2)
b = seq(0,4.5, by=0.5) 
```

它们受到数据平滑的影响，但我想提高它们的“分辨率”以获得比 10（它的长度）更多的预测点。因此，换句话说，取向量*a*并将其元素数量加倍（例如），同时保持其一致性。结果向量应该是这样的：

```
a = c(4,3,2,6,10,7,5,4,3,4,6,8,8.5,9,7.5,6,4,2,2) 
```

当然，在这种特殊情况下，我可以轻松地成对计算元素的平均值。但我想有一个任意长度的通用方法。我尝试过：

```
seq(a[1],a[10], length.out=20) 
```

但当然这并不能完成这项工作，因为只考虑了向量的第一个和最后一个元素。它适用于第二个向量*b*（包含横坐标值）。任何帮助，将不胜感激。谢谢。马吕斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:29:25.447

你只想要基于`b`序列的线性插值吗？

```
 f <- approxfun(b, a)
 f(seq(b[1], b[length(b)], length = 20))
 [1] 4.000000 3.052632 2.105263 5.368421 9.157895 8.157895 5.789474 4.368421 3.421053 3.263158 3.736842 4.842105 6.736842 8.157895 8.631579 8.684211 7.263158 5.789474
 [19] 3.894737 2.000000 
```

请参阅`?approx`其他选项及其`See also`其他形式的插值，`?round`以及以各种方式四舍五入的值。

# bash - 同时设置 PROMPT_COMMAND 和 PS4（在命令启动时设置日期和棘手的打印路径）

> ID：10088308
> 
> 赞同：3
> 
> 时间：2012-04-10T11:55:56.743
> 
> 标签：bash, command-prompt, prompt, ps1

我正在尝试显示我的命令的执行日期。[因此我在这里](http://www.linuxquestions.org/questions/linux-software-2/bash-display-current-time-in-prompt-698120)使用 PS4 bash 环境变量

```
PS1="[\u@\h \W]\\$ "
PS4=:\D{%F %T}: ; set -x 
```

是什么给了我以下提示

```
[user@host temp]$ \ls
:2012-04-10 13:43:52: ls
dir1  dir12  test
[user@host temp]$ 
```

另一方面，当我在一个很深的目录中时（也就是说经常说），我希望我的路径不会太长。我找到了以下代码（我不记得在哪里），非常好

```
bash_prompt_command() {
# How many characters of the $PWD should be kept
local pwdmaxlen=25
# Indicate that there has been dir truncation
local trunc_symbol=".."
local dir=${PWD##*/}
pwdmaxlen=$(( ( pwdmaxlen < ${#dir} ) ? ${#dir} : pwdmaxlen ))
NEW_PWD=${PWD/#$HOME/\~}
local pwdoffset=$(( ${#NEW_PWD} - pwdmaxlen ))
if [ ${pwdoffset} -gt "0" ]
then
    NEW_PWD=${NEW_PWD:$pwdoffset:$pwdmaxlen}
    NEW_PWD=${trunc_symbol}/${NEW_PWD#*/}
fi
}
PS1="[\u@\h \${NEW_PWD}]\\$ "
PROMPT_COMMAND=bash_prompt_command 
```

这给了我以下

```
[user@host semishort_path]$ 
```

当我同时使用 PS4 和 PROMPT_COMMAND 时会出现问题，这给了我可怕的东西：

```
[user@host temp]$ \ls
:2012-04-10 13:48:32: ls
dir1  dir12  test
::2012-04-10 13:48:32: bash_prompt_command
::2012-04-10 13:48:32: local pwdmaxlen=25
::2012-04-10 13:48:32: local trunc_symbol=..
::2012-04-10 13:48:32: local dir=temp
::2012-04-10 13:48:32: pwdmaxlen=25
::2012-04-10 13:48:32: NEW_PWD='~/temp'
::2012-04-10 13:48:32: local pwdoffset=-19
::2012-04-10 13:48:32: '[' -19 -gt 0 ']'
[user@host temp]$ 
```

在 PROMPT_COMMAND 函数中使用的命令由 PS4 显示。

我正在寻找一种方法来避免这种影响：

*   通过在我的提示符（PS1 或 PROMPT_COMMAND）中显示实时时间（在同一提示行上每秒更新一次）
*   寻找另一种减少路径长度的方法（我不在时需要打印最后两个目录〜）
*   也许其他想法？

我知道这是一个棘手的问题，但我认为 BASH 应该能够做我想做的事！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:32:51.177

最简单的方法是在每个命令之前执行一段代码

```
function tsprint() {
        if [[ $BASH_COMMAND != bash_prompt_command ]]
        then
                echo $(date) ": $BASH_COMMAND"
        fi
}
PS1="[\u@\h \${NEW_PWD}]\\$ "
PROMPT_COMMAND="bash_prompt_command;trap 'tsprint; trap DEBUG' DEBUG" 
```

这里是示例输出：

```
[shaman@shamanbook ~]$ cd Music/
Fri Apr 13 02:22:34 EEST 2012 : cd Music/
[shaman@shamanbook ~]$ ls
Fri Apr 13 02:22:34 EEST 2012 : ls --color=auto
[shaman@shamanbook ~/Music]$
[shaman@shamanbook ~/Music]$ pwd
Fri Apr 13 02:22:39 EEST 2012 : pwd
/home/shaman/Music
[shaman@shamanbook ~/Music]$
[shaman@shamanbook ~/Music]$ 
```

# java - Javadoc @return 标记注释重复是否必要？

> ID：10088311
> 
> 赞同：42
> 
> 时间：2012-04-10T11:56:12.143
> 
> 标签：java, javadoc

对于不改变实例状态的函数，该方法的 javadoc 注释通常与 Java-API 中 @return-tag 的注释相同或非常相似。

**布尔集合.isEmpty()**

*   如果此集合不包含任何元素，则返回 true。
*   返回：如果此集合不包含任何元素，则返回 true

现在我正在为许多简单的方法（如 getExpression()）编写 javadoc，但我遇到了同样的问题。我应该像在 API 中那样做还是忽略它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-10T12:01:43.953

来自 Oracle 的建议[How to Write Doc Comments for Javadoc Tool](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#@return)：

> @return（参考页）
> 
> 对于返回 void 的方法和构造函数，省略 @return；**将它包含在所有其他方法中，即使它的内容与方法描述完全多余**。有一个明确的@return 标签可以让人们更容易快速找到返回值。只要有可能，为特殊情况提供返回值（例如在提供越界参数时指定返回值）。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-09-21T09:19:43.913

如果您（像我一样）真的不喜欢违反 DRY，那么这是 javadoc ref 中最重要的几行之一：

> 可以有一个只有标签部分而没有主要描述的评论。

（@参见[http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#tagsection](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#tagsection)）

因此，编写 javadoc 的简单方法是完全有效的（并且有效），例如：

```
/**
* @return the name of the object
*/
public String getName(); 
```

所以你甚至可以写这样的东西：

```
/**
* @return the n-th element of the object
*
* @param n index of element to get
*/
public String get( int n ); 
```

哪个（在彼此了解一点之后）在源代码中更具可读性，并且作为违反 DRY 的较长形式更易于维护。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-02-16T08:02:03.530

对于`javadoc`16，您可以使用新的组合`{@return ...}`标签，以*“避免在简单情况下重复返回信息”*。

```
/**
 * {@return the name of the object}
 */
public String getName(); 
```

等效于（仍然支持的）样式：

```
/**
 * Returns the name of the object.
 *
 * @return the name of the object
 */
public String getName(); 
```

[在https://bugs.openjdk.java.net/browse/JDK-8075778](https://bugs.openjdk.java.net/browse/JDK-8075778)找到更多详细信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-22T14:32:54.100

从 Java 16 开始，推荐的解决方案是使用标准 Doclet新引入的[内联标记：`{@return *description*}`](https://docs.oracle.com/en/java/javase/16/docs/specs/javadoc/doc-comment-spec.html#return)

```
/**
 * {@return the name} {@code null} if unknown.
 */
public String getName() {
    ...
} 
```

这将生成一个“退货*说明*”。总结，后面跟着你写的任何东西，另外使用*描述*作为返回值的描述：
[![Javadoc 屏幕截图](../Images/5438648544ac712d478cffeb2a467f99.png)](https://i.stack.imgur.com/Fj0wZ.png)

请注意，“Returns ...”语句已经以句点结尾；你不应该在`{@return }`.

# visual-c++ - 使用 VS2010 部署 MFC 应用程序

> ID：10088314
> 
> 赞同：0
> 
> 时间：2012-04-10T11:56:24.077
> 
> 标签：visual-c++, mfc

我创建了两个 MFC 应用程序，它们可以从 IDE 编译和运行。但是，假设第二个应用程序不是使用应用程序向导创建的，而是我复制了第一个应用程序文件夹，然后开始重命名源文件和相关信息，例如字符串表、版本等，以便第二个应用程序与众不同且独一无二到应用程序#1。这两个应用程序都是 SDI 类型，我遇到的问题是，当我运行安装程序以安装第二个应用程序时，安装中止，因为它检测到第一个已安装（我猜它是 Windows 注册表项）。

我去了 app.h、app.cpp、appdoc.h、appdoc.cpp、文件并检查了以下代码行：

SetAppID(_T("SVGovCfg.AppID.NoVersion")); 确保两个应用程序之间没有重复，但是看起来仍然缺少一些东西。

非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:41:59.540

使用以下正则表达式在文件中搜索重复的 UUID：

```
[0-9a-fA-F]^8-[0-9a-fA-F]^4-[0-9a-fA-F]^4-[0-9a-fA-F]^4-[0-9a-fA-F]^12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:20:59.763

检查您的应用程序是否在 OnInitInstance() 中调用 SetRegistryKey()。该密钥需要在应用程序之间有所不同。也许它没有在您的应用程序中调用，并且某些默认值是从某些东西派生的 - 查看 MFC 源代码以了解它是如何处理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T05:06:37.233

这似乎与应用程序本身无关。当您**安装**应用程序时，**安装程**​​序会检测安装 ID。您需要修改安装程序以区分两者。

# c++ - 当通过引用传递成为强制通过地址/指针传递时

> ID：10088315
> 
> 赞同：2
> 
> 时间：2012-04-10T11:56:25.063
> 
> 标签：c++, pointers, pass-by-reference

有人可以举一些例子，其中通过引用传递优于通过指针传递。

基本上两者都提供相同的功能，但我想知道在哪里通过引用成为强制性的。

另外，请建议如何决定使用两者中的任何一个。

请提出一些基本的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:58:32.643

**复制构造函数和赋值运算符。**

```
struct A {
  ...
  A(const A& copy);
  A& operator = (const A& copy);
}; 
```

这些是强制性的情况。除了这些之外，还可能存在其他情况（例如重载其他运算符，如,`+`等）。`<``>`

> 另外，请建议如何决定使用两者中的任何一个。

在大多数地方，我更喜欢引用（更多 C++ 风格），如果不能使用引用，我倾向于使用指针（更多 C 风格）。
引用是`const`指针的类比表示；即`A&`类似于`A* const`。因此，它们提供了一些内置的安全性，以防止意外覆盖该位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:58:40.633

我的简单经验法则是在可能的情况下总是更喜欢通过引用传递。如果您需要传递空值的能力，那么您必须使用指针传递。否则使用按引用传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:59:43.700

重载运算符时，必须传递引用。例如 ：

```
class A {
    A& operator=(const A &other);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T12:10:10.467

复制构造函数必须通过引用获取它们的参数。

运算符重载必须通过值或引用而不是指针来获取参数。

对于普通功能，您可以选择；尽管如果要接受空参数或动态数组，则必须使用指针。

有些人喜欢尽可能使用引用；无需检查它是否为空，也无需混淆它是指单个对象还是数组，或者函数是否可能删除该对象。其他人更喜欢使用指针，因为它在调用站点提供了一个可见的指示，表明该函数可能会更改对象。

# java - 将数据同步到/从多个设备到云？

> ID：10088317
> 
> 赞同：1
> 
> 时间：2012-04-10T11:56:30.757
> 
> 标签：java, android, cloud

对现有的 api 包、示例、指南、最佳实践等有关将数据从多个 android 设备同步到服务器感兴趣。这将是存储在我的应用程序中的数据，并且可以使用任何必要的方式（可能是 JSON）向服务器发送/从服务器发送。

服务器不必是java，但这是首选。

# python - 使用 BeautifulSoup 解码 html 实体

> ID：10088318
> 
> 赞同：5
> 
> 时间：2012-04-10T11:56:36.357
> 
> 标签：python, beautifulsoup

我正在尝试使用 BeautifulSoup 解码实体，但没有运气。

```
from BeautifulSoup import BeautifulSoup

decoded = BeautifulSoup("&lt;p&gt; &lt;/p&gt;",convertEntities=BeautifulSoup.HTML_ENTITIES)

print decoded 
```

输出根本不解码。我在这里找到了很多使用这种方法的答案。我做错了什么吗？

我想为此使用 BeautifulSoup，所以请不要告诉我标准库有解码实体的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:01:53.723

你需要[`print decoded.contents`](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Entity%20Conversion)：

```
>>> print decoded
&lt;p&gt; &lt;/p&gt;
>>> print decoded.contents
[u'<p> </p>'] 
```

# php - 无法通过 curl 请求连接到 Facebook

> ID：10088320
> 
> 赞同：6
> 
> 时间：2012-04-10T11:56:45.857
> 
> 标签：php, facebook, facebook-graph-api, curl

几周前我创建了一个简单的 Facebook 应用程序。我通过征求用户的许可通过 Facebook API 获取用户信息。但它上周无故停止工作，从那时起我一直在寻找答案。

基本上我曾经使用 file_get_contents 从 Facebook API 获取用户信息。但是我尝试在它开始失败后将其更改为 cURL，但仍然无法正常工作。我尝试使用 Facebook PHP-SDK，甚至调试了 makeRequest 方法的代码，但我在所有方法中都得到了相同的返回。

当向 Facebook Open Graph URL 发出 cURL 请求时，请求失败，错误号为 7 或 28。它们都是无法连接到站点或超时的错误代码。

我的网站位于共享主机上，我尝试使用 cURL 获取其他网站，并且效果很好。但是当我尝试获取[http://www.facebook.com](http://www.facebook.com)时，cURL 返回 FALSE。

主机有 SSL 证书，启用了 cURL 等。它在一段时间前工作正常。我已经阅读了有关此的各种线程和帖子，尝试了许多不同的 cURL 选项，但似乎没有一个有效。

有任何想法吗？

## 索引.php

```
$auth_url = "https://www.facebook.com/dialog/oauth?client_id=" . $app_id . "&redirect_uri=" . urlencode($GLOBALS['canvas_page']) . "&scope=publish_stream,email";
$signed_request = $_POST["signed_request"];
list($encoded_sig, $payload) = explode('.', $signed_request, 2);
$data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
if (empty($data["user_id"])) {
    echo("<script> top.location.href='" . $auth_url . "'</script>");
} else {
    $_SESSION['oauth_token'] = $data['oauth_token'];
    $_SESSION['user_id'] = $data["user_id"];
    $user = new User($_SESSION['user_id'], $_SESSION['oauth_token']); 
```

## 用户类

```
function __construct($fid, $at) {
    $this->facebook = new Facebook(array(
                'appId' => "<APP_ID>",
                'secret' => "<FACEBOOK_SECRET_ID>",
            ));
    $this->fid = $fid;
    $this->token = $at;
    if ($data = $this->getGraph()) {
    ...
    }
}

public function getGraph() {
    $session = $this->facebook->getUser();
    if ($session) {
        try {
            $access_token = $this->facebook->getAccessToken();
            $attachment = array('access_token' => $access_token);
            //$result = $this->facebook->api('/' . $this->fid, 'GET', $attachment);
            $result = $this->facebook->api('/' . $this->fid, 'GET');
            return $result;
        } catch (FacebookApiException $e) {
            return false;
        }
    }
} 
```

**笔记：**

*   检查 Facebook PHP SDK 方法后，我意识到我不需要发送访问令牌，因为如果访问令牌不在 $params 中，它将设置它。
*   它下降到 sdk 中的 makeRequest() 方法，并从 curl_exec 中返回 false。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:38:04.183

显然这与 Facebook 的循环 DNS 结构有关。我猜 Facebook 的其中一个地址失败了，由于 DNS 缓存，服务器仍在尝试连接到该地址。

托管服务提供商必须清除其 DNS 缓存才能解决问题。

有关循环 DNS 的更多信息，您可以访问[http://en.wikipedia.org/wiki/Round-robin_DNS](http://en.wikipedia.org/wiki/Round-robin_DNS)。

# asp.net-mvc-3 - EF 到 ADO.NET 的转换

> ID：10088327
> 
> 赞同：2
> 
> 时间：2012-04-10T11:57:16.963
> 
> 标签：asp.net-mvc-3, entity-framework, ado.net, dapper

需要迁移一些 asp.net mvc 3 应用程序模块的建议：现在我们正在使用带有 POCO 类的 EF，但将来对于一些性能驱动的模块，我们需要迁移到 ADO.NET 或其他一些 ORM 工具（可能是 DAPPER 。网）。

我们现在面临的问题是：我们的视图依赖于通过 EF 加载的 Collection 类，我应该使用什么策略来加载这些实体类，与 EF 使用其他 ADO.NET 或 ORM 工具的加载方式完全相同.

我想要的是能够在 EF 和 ADO.NET 之间切换，而数据访问层的更改最少，因为我不希望我的视图因此而生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:47:54.173

到目前为止我所看到的，从一个 ORM/DAL 到另一个的无缝过渡是一种错觉。Kevin 建议的存储库模式是一个很大的帮助，甚至是一个先决条件（+1）。但尽管如此，每个 ORM 在领域层都有自己的足迹。使用 EF，您可能会使用虚拟属性，可能是数据注释，或者很容易被遗忘的验证框架，它很容易适合（并忽略其他不适合的）。您可能会依赖 EF 跨连接表进行映射的能力。由于 EF，您可能*不会*（但愿意）做一些事情。

（更不用说在 EF 上下文之上执行脚手架的工具了。这会使锁定更加紧密。）

在你的情况下我可能会做的一些事情（如果我为你说明显而易见的事情，请原谅我）

*   最佳使用 EF。（最好的映射，最好的关联，......）为未来做准备是好的，但它很容易退化为[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)模式。
*   精通 linq + EF：有很多方法可以不必要地扼杀 EF 的性能。假设 EF 足够好！
*   继续寻找高性能的替代方案，例如使用存储过程、并行化、后台处理和/或减少数据量，并在需求（功能性和非功能性）足够明确时选择一种。
*   也许现在引入一个带有 DTO 的抽象层来为您的视图服务，并且将来可以很容易地由另一个 ORM 或 ADO 实现。
*   将 POCO 公开为接口，以后可以由其他对象实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:22:09.533

您应该使用[存储库设计模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)来隐藏数据访问层的实现。无论您在后台使用什么数据访问层，存储库都将返回相同的 POCO 并具有相同的操作合同。现在，如果您使用的是没有用于延迟加载的虚拟方法的真实 POCO，则此方法可以正常工作。您将需要显式处理实体上依赖集合的加载以使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:58:30.887

## 只是添加到这两个答案...

我总是将我的解决方案构建到这些基本项目中：

*   **前端**（通常是 asp.net MVC web app），
*   **具有业务流程的**服务/核心，****
***   **具有应用程序模型 POCO 和通信接口的对象**- 被所有其他项目引用，因此它们用作数据交换合约和*   ***实现从对象*返回 POCO 实例的存储库的**数据****

    ****   前端引用对象和服务/核心

    *   服务核心引用对象和数据*   数据引用对象*   对象不引用任何其他对象，因为它们是领域应用程序模型*****

 *****如果前端需要任何额外的 POCO，我会在前端创建它们作为视图模型，并且只看到该项目（即注册过程通常使用具有比`Objects.User`实体（POCO）更多（和不同）属性的单独类型。不需要将这些类型放在*Objects*中。

纯数据类型也是如此。如果需要额外的属性，这些类通常继承自同一个*Objects*类，并添加额外的属性和方法，例如`ToPoco()`准确知道如何从数据类型映射到应用程序模式类的泛型方法。

## 更改 DAL

因此，每当我需要更改（正如@GetArnold 指出的那样）我的数据访问代码时，我只需要提供一个使用不同库/框架的不同数据项目。所有其他特定于数据的类型等也是它的一部分......但是与其他层的所有通信都保持不变。

除了创建新的*数据*项目，您还可以通过更改存储库代码并在其中使用不同的 DAL 来更改现有项目。*****

# .net - 使用 .Net 中的节点值在分层 xml 中查找特定节点的级别

> ID：10088331
> 
> 赞同：2
> 
> 时间：2012-04-10T11:57:24.777
> 
> 标签：.net, xml, vb.net, xml-parsing

使用 .Net 中的节点值查找特定 xml 的级别

专家！这是我的示例 Xml。这是一个树结构`T->T.1,T.2->T.2.2,TA->TA.1`- 这是树结构。我知道 tag 的价值。即 1232,1343.. 等。使用这个 ID 我怎么能找到`1343`它`1232`。or `1490`is under `1090`which is under `1232`。非常感谢任何帮助。谢谢。

**预期输出：如果我通过 1490，那么我需要知道 1490、1090、1232 等（从该节点到顶部节点）。我使用的是 .net 2.0**

```
<Abc>
 <A> 
  <Name>T</Name>
  <Id>1232</Id>
  <Val>140</Val>
  <Branch>
   <A>
   <Name>T.1</Name>
  <Id>1343</Id>
  <Val>14qw0</Val>
   </A>
   <A>
   <Name>T.2</Name>
  <Id>1090</Id>
  <Val>14qwd0</Val>
   <Branch>
   <A>
   <Name>T.2.2</Name>
    <Id>1490</Id>
    <Val>rt56</Val>
   </A>
   </Branch>
 </A>
 <A>
   <Name>TA</Name>
    <Id>1339</Id>
    <Val>uiui</Val>
    <Branch>
    <A>
    <Name>TA.1</Name>
        <Id>1338</Id>
        <Val>bije</Val>
    </A>
    </Branch>
</A>
</Abc> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:50:05.017

你能用 Linq 解析到 Xml，然后简单地使用[Ancestors](http://msdn.microsoft.com/en-us/library/bb339717.aspx)方法列出它的祖先吗？

# iphone - 如何从 iOS 应用程序 ping 服务器？

> ID：10088333
> 
> 赞同：1
> 
> 时间：2012-04-10T11:57:28.833
> 
> 标签：iphone, ios5, xcode4.3, ios5.1

> **可能重复：**
> [使用 iPhone SDK Ping](https://stackoverflow.com/questions/1130963/ping-with-iphone-sdk)

我正在创建一个应用程序。在向服务器发送请求之前，我需要长服务器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:00:24.327

您应该检查 Apple 制作的可达性实用程序：

[developer.apple.com 上的可达性](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

我认为这会做你想做的事。

**编辑**

像这样使用它：

```
+(BOOL)canConnect {
    Reachability *r = [Reachability reachabilityWithHostName:@"www.example.com"];
    NetworkStatus internetStatus = [r currentReachabilityStatus];
    return ((internetStatus == ReachableViaWiFi) || (internetStatus == ReachableViaWWAN));
} 
```

它将检查您是否可以连接到互联网，以及您是否可以使用给定的地址/IP 连接到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:01:07.767

检查苹果中的可达性示例。这提供了逐步检查 ip 是否可连接的步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:01:58.957

您可能会使用从`NSURLRequest`等开始的很多变体

# c# - ASP.net 在页面之间传递链接

> ID：10088344
> 
> 赞同：0
> 
> 时间：2012-04-10T11:58:10.030
> 
> 标签：c#, asp.net, .net

我正在尝试将页面显示到 IFrame 中。IFrame 显示在 fancyBox 覆盖弹出窗口中。我有一个包含 http 链接的列表（在运行时编译并不断变化）。使用全局变量，我可以通过链接访问列表。但是列表中的http链接必须和我点击的链接一致。如果我什至可以得到我点击的链接也足够了（链接会弹出一个fancyBox弹出窗口，所以它实际上不会弹出一个新页面）怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:08:01.023

您必须编写一些棘手的代码来实现这一点，主要目标是通过在所有链接周围添加包装标记（带有 onclick 事件）来编辑动态添加的页面内容，编写要使用该包装调用的 javascript 以找出已单击的链接,

您可以通过以下步骤尝试此操作

1) 获取 IFrame 的内容，使用下面的 JQuery 代码可以获取 IFrame 的内容

```
var $currentIFrame = $('#myIFrame');
var content = $currentIFrame.contents(); 
```

2) 现在，通过查找该页面内的所有链接并使用应该具有 onclick 事件的标签（例如 span ）包装它们来处理这些内容，如果用户单击它，您必须编写一些 javascript 函数来触发链接。

有关如何操作内容，请参阅以下链接

[获取 iframe 内的所有链接并添加空白目标属性](https://stackoverflow.com/questions/8890699/get-all-links-inside-iframe-and-add-blank-target-attribute)

# android - 如何设置 PreferenceActivity(R.xml.preferences) 的值从 SharedPreferences 动态加载？

> ID：10088353
> 
> 赞同：0
> 
> 时间：2012-04-10T11:58:37.170
> 
> 标签：android, sharedpreferences, preferenceactivity

我有一个像这样扩展 PreferenceActivity 的 MyPreferenceActivity：

```
public class MyPreferenceActivity extends PreferenceActivity{

  @Override
  public void onCreate(Bundle savedInstanceState) {     
    super.onCreate(savedInstanceState);        
    addPreferencesFromResource(R.xml.preferences);  
  }

} 
```

我也有 R.xml.preferences 与个人偏好类绑定的自定义共享偏好......例如

首选项.xml 有

```
 <!--EditTextPreference-->
            <com.myapp.preferences.PrimaryNumberPreference
                android:key="PREFS_PRIMARY_NUMBER"
                android:title="@string/primary_number_preference_title" 
                android:summary="@string/primary_number_preference_summary"
                android:dialogTitle="@string/primary_number_preference_dialog_title" 
                    android:dialogMessage="@string/primary_number_preference_dialog_message"  
            /> 
```

PrimaryNumberPreference.java ：

```
public class PrimaryNumberPreference extends EditTextPreference {

Context ctx = null;

public PrimaryNumberPreference(Context context) {
    super(context);
    this.ctx = context;
}

public PrimaryNumberPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.ctx = context;
}

public PrimaryNumberPreference(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    this.ctx = context;

}

@Override
protected void onDialogClosed(boolean positiveResult) {
    super.onDialogClosed(positiveResult);
    if (positiveResult){    
        customPreferenceibrary.setPrefsPrimaryNumber(getText());
    }
}

} 
```

好的，一切似乎都已到位。现在我想要的是每次加载 PreferenceActivity 时，它应该获取存储在各自键中的当前 sharedpreference 值并预填充 PreferenceActivity 的元素......

例如：安装我的应用程序时，PrimaryNumber 共享首选项设置为 1234。现在，如果我转到 MyPreferenceActivity 并浏览 PrimaryNumber EditTextPreference，则文本框应预填充 1234。

像这样的东西（伪代码）：

MyPreferenceActivity.PrimaryNumberPreference.Val = getSharedPreferences(prefsPrimaryNumber)

我怎样才能做到这一点？

**编辑**

如果问题不清楚并且需要更好的解释，请告诉我。我确信答案是在 android 中非常标准的东西的简单实现。所有 PreferenceActivity 元素仅从存储的 SharedPreferences 中选择要显示的当前值，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:34:02.297

我想我看到了两个潜在的问题：

***问题一***

如果您有自定义首选项，例如 PrimaryNumberPreference.java，则需要在对话框关闭时手动保存首选项。这就是你在**customPreferenceibrary.setPrefsPrimaryNumber(getText());中所做的吗？**??

如果他们没有在这个功能中提交，那么我认为他们需要这样做。（或在 onDialogClosed 的其他地方提交）

***问题二***

***假设您***在 setPrefsPrimaryNumber 中提交首选项，我认为 setPrefsPrimaryNumber 需要接收两个参数，

1.  首选项名称
2.  实际值

我认为仅在 XML 中设置键名是不够的（android:key="PREFS_PRIMARY_NUMBER 是不够的）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:11:11.273

我在@Mel 提供的建议的帮助下找到了答案，而且非常简单。

在扩展相应 PreferenceActivity 元素的类中（如下所示），只需在该偏好元素类的构造函数中添加 this.setValue 即可。就是这样！

```
public class selectColorPreference extends ListPreference{

    Context ctx = null;
    private String error = null;
    private int prefsRemoteSMSAccess;
    MyPreferencesLibrary myPreferencesLibrary;

    public selectColorPreference(Context context) {
        super(context);
        this.ctx = context;

        myPreferencesLibrary = new MyPreferencesLibrary(ctx);
        this.setValue(myPreferencesLibrary.getSharedPreferenceValueForColor());

    }
} 
```

# html - HTML5 和 CSS 3 - Div 文本垂直居中对齐

> ID：10088355
> 
> 赞同：1
> 
> 时间：2012-04-10T11:58:43.977
> 
> 标签：html, css

请帮忙，

我想对齐标题菜单/导航链接以垂直对齐。看：

[http://hyindia.com/demo/myoffshore/index.html](http://hyindia.com/demo/myoffshore/index.html)

请参阅此处的代码：

```
nav ul { list-style-type:none; padding:0px; margin:0px; float:left; width:100%;}
nav ul li { float:left; width:119px; height:66px;}
nav ul li a { 
 float:left;
 width:119px;
 height:66px;
 font:bold 15px 'Myriad Pro';
 color:#fff;
 text-shadow:1px 1px #1f1f1f;
 text-align:center;
}

<nav>
<ul>
    <li><a href="#" class="nav1">HOME</a></li>
    <li><a href="#" class="nav2">HEALTH INSURANCE</a></li>
    <li><a href="#" class="nav3">LIFE INSURANCE</a></li>
    <li><a href="#" class="nav4">OVERSEAS MORTGAGES</a></li>
    <li><a href="#" class="nav5">ESTATE PLANNING</a></li>
    <li><a href="#" class="nav6">BANKING</a></li>
    <li><a href="#" class="nav7">WEALTH MANAGEMENT</a></li>
    <li><a href="#" class="nav8">QROPS</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:33:30.410

由于您的某些导航项目的文本跨越多行，您将无法使用经典的行高技巧（将行高设置为等于高度）。

相反，我建议更改您的菜单样式以使用`display: table/table-row/table-cell`，因为表格非常擅长垂直对齐中间的东西。

您需要做的是将整个`nav`样式更改为：

```
nav {
    display: table;
    width: 100%;
}

    nav ul {
        display: table-row;
        list-style: none;
        padding: 0;
        margin: 0;
    }

        nav ul li {
            display: table-cell;
            vertical-align: middle;
        }

            nav ul li a {
                display: block;
                padding: 5px 10px;
            } 
```

删除所有的浮动和宽度+高度（使用填充`a`代替）等（我上面所拥有的就是你应该拥有的）。

您还需要将实际背景样式从`a`s 移动到`li`s ，因为`a`s 的高度不再相等（但`li`s 会）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-26T10:00:56.020

这是很好解释的五种方法：http: [//blog.themeforest.net/tutorials/vertical-centering-with-css/](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

# php - 无法上传文件

> ID：10088359
> 
> 赞同：0
> 
> 时间：2012-04-10T11:58:49.030
> 
> 标签：php, file-upload

这是我的脚本：-

```
if (isset($_POST['confirm_close_complaint_submit']))
{
    if($_FILES['complaint_file']['tmp_name'] == "none")
    {
        header('Location: complaint-register.php?FileSizeError=1');
        exit();
    }
    $filename = basename($_FILES['complaint_file']['name']);
    $ext = substr($filename, strrpos($filename, '.') + 1);
    if (($ext != "jpg") && ($_FILES["uploaded_file"]["type"] != "image/jpeg"))
    {
        header('Location: complaint-register.php?FileTypeError=1');
        exit();
    }
    else
    {
        $destination = '../../stored/complaint-files/'.$_POST['confirm_close_complaint'].$_FILES['complaint_file']['name'];
        $temp_file = $_FILES['complaint_file']['temp_name'];
        move_uploaded_file($temp_file, $destination);
        $insertSQL = sprintf("UPDATE complaints SET complaint_status='CLOSED', complaint_solved_date=NOW(), complaint_remark=%s WHERE complaint_number=%s",
                       GetSQLValueString($_POST['complaint_remark'], "text"),
                       GetSQLValueString($_POST['confirm_close_complaint'], "text"));
        $Result1 = mysql_query($insertSQL, $dacreint) or die(mysql_error());  
        header('Location: complaint-register.php?ComplaintClose=Successful');
        exit();
    }
} 
```

此脚本执行 mysql 插入但不上传文件。它向我显示了成功的消息。

这是我的表格：-

```
<form enctype="multipart/form-data" method="post" action="complaint-register.php">
    <table border="0">
    <tr>
    <td>Remark</td>
    <td><textarea name="complaint_remark" class="textarea"></textarea></td>
    </tr>
    <tr>
    <td>Complaint File</td>
    <td>
        <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
        <input name="complaint_file" type="file" size="100" /></td>
    </tr>
    </table>
    <div class="clear"></div>
    <input name="confirm_close_complaint" type="hidden" value="'.$close_complaint.'" />
    <input name="confirm_close_complaint_submit" type="submit" class="Button" style="float:left;" value="Yes" />
    <input name="" type="button" class="Button" style="float:left;" onClick="javascript:history.go(-1)" value="No" />
    </form> 
```

我定义路径的方式是否正确，即`$destination = '../../stored/complaint-files/'.$_POST['confirm_close_complaint'].$_FILES['complaint_file']['name'];`？

并且做这个条件是可以的`$temp_file = $_FILES['complaint_file']['tmp_name'];`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:00:47.870

```
 $_FILES['complaint_file']['temp_name']; 
```

应该

```
 $_FILES['complaint_file']['tmp_name']; 
```

如果上传，请在其中添加您的更新声明，例如

```
 if(move_uploaded_file($temp_file, $destination)) {
  //your update statement here
}
else {
  //error
} 
```

尝试检查您的目标路径是否有效。设置错误报告：

```
 ini_set('display_errors',1);
error_reporting(E_ALL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:01:04.887

尝试处理来自 move_uploaded_file 的错误。您不应显示该呼叫失败的“成功”消息。

# c# - 打开包含附件的默认邮件管理器 (Windows)

> ID：10088361
> 
> 赞同：2
> 
> 时间：2012-04-10T11:58:57.120
> 
> 标签：c#, .net, vb.net, email

我需要通过我使用的默认邮件管理器（没有 SMTP 代码）打开一封带有附件的新电子邮件：

```
System.Diagnostics.Process.Start(String.Format("mailto:{0}", txtEmail.Text)) 
```

是否也可以添加附件？

* * *

我可以试试这个

[http://www.codeproject.com/Articles/17561/Programmatically-adding-attachments-to-emails-in-C](http://www.codeproject.com/Articles/17561/Programmatically-adding-attachments-to-emails-in-C)

但我应该明白，客户端计算机总是需要 Microsoft Outlook ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:07:18.143

不可能 ？！
我提供了使用 System.Net.Mail 命名空间的详细方法；

```
private void button1_Click(object sender, EventArgs e)
{
    SmtpClient smtpserver = new SmtpClient();
    smtpserver.Credentials = new NetworkCredential("email@domain", "passphrase");
    smtpserver.Port = 587;
    smtpserver.Host = "smtp.live.com";
    smtpserver.EnableSsl = true;

    MailMessage mail = new MailMessage();
    mail.From = new MailAddress("email@domain");
    mail.To.Add("recipient@domian");
    mail.Subject = "testing";

    string pathTOAttachment;
    string _Attachment = pathToAttachment;
    Attachment oAttch = new Attachment(_Attachment);
    mail.Attachments.Add(oAttch);

    mail.Body = "message body";

    ThreadPool.QueueUserWorkItem(delegate
    {
        try
        {
            smtpserver.Send(mail);
        }
        //you can get more specific in here
        catch
        {
            MessageBox.Show("failure sending message");
        }
    });
} 
```

值得注意（此代码示例中未考虑）：

1.  有些 isp 可能会对附件施加大小限制，有些请确保在尝试发送电子邮件之前检查它。
2.  smtp 主机/端口可能会有所不同，最有效的方法是检查定期更新的数据库，或者让用户自己设置它们。
3.  线程部分是关于 UI 响应的，但是，如果用户在邮件仍在发送的情况下关闭主应用程序窗口，它将被抢占。

# struts2 - struts 和 struts 有什么区别 我可以在一些论坛中看到他们将 struts 标签初始化为 <%@taglib prefix="html" uri="http://struts.apache.org/tags-html" %> 他们正在初始化标签 <html: 2="" 2385="" 问问题="" 2012-04-10t11:58:57.130="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我可以在一些论坛中看到他们将="" struts="" 标签初始化为="" <%@taglib="" prefix="html" uri="http://struts.apache.org/tags-html" %="">他们正在初始化标签<html:form>等。 但我使用 struts 标签作为 <%@taglib prefix="s" uri="/struts-tags" %> 并用作<s:form>标签。我的问题是，struts<html:form>标签和<s:form>标签之间是否有任何区别，或者它们只有前缀变化。 java.net.SocketException：没有可用的缓冲区空间（达到最大连接数？）：JVM_Bind Tomcat 在 Windows 下运行一个 webapp。几天后（在非常低的负载下），标题中提到的异常开始出现在日志中，从那时起无法建立新的连接，唯一的解决方法是重新启动服务器。 环境： 最新的 Tomcat 6 视窗服务器 2008 R2 JDK 6 更新 30 SQL Server 2008 Kerberos 身份验证 目前收集的证据： netstat 显示没有过多的连接 ProcessExplorer 显示没有过多的打开文件句柄 系统主内存使用率平均 JVM 堆使用率平均 重启Tomcat并没有解决问题 开放式问题： 如果我们泄漏了连接，它们不应该出现在 netstat 中吗？ 重新启动应用服务器不应该解决问题吗，因为操作系统应该释放所有进程资源？ 有没有办法追踪问题的根源？例如安装监控软件，可能类似于 lsof 等？ 我没有想法，任何提示表示赞赏！ struts2 4 2 回答 2 This answer is useful 1 我对 Struts1 不太了解，但如果我是正确的，你提到<html:form>的那个来自经典 Struts1，<s:form>来自 S2。 基本上，您可以使用任何前缀在 S2 标签中定义，例如a, b,c 等。如果您希望可以自由使用 html 作为前缀，您需要告诉 S2 类似 <%@taglib prefix="html" uri="/struts-tags" %> 简而言之，它唯一的声明和使用s作为前缀是一种约定。 于 2012-04-10T12:13:39.637 回答 This answer is useful 0 taglib 声明设置了前缀是什么，只要您保持一致并引用相同的 taglib，您使用的前缀就没有区别。 于 2012-04-10T12:13:32.403 回答 Related 2 sql-server-2008 - ssas维度处理键未找到错误 1 emacs - 样式模式线：如何删除边框？ 1 python - 我可以用 Python 在 Xcode 中开发 Qt GUI 吗？ 2 php - Node.js + Socket.IO 和 CodeIgniter 1 c - 为什么这个移植函数适用于二叉搜索树？ 4 android - Android：NoClassDefFound 错误 1 c# - 每个派生表都必须有自己的别名？ 1 php - PHP连接数据库成功后也找不到表 1 ssis - SSIS：设置（1）inventorycountNr和（2）StoreNr的列表变量，然后在where子句中使用它们 1 .htaccess - 使用图像。带有 cmsms 的子域以增加加载时间 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</s:form></html:form></s:form></html:form></s:form></html:form></html:>

> ID：10088362
> 
> 赞同：2
> 
> 时间：
> 
> 标签：struts2

我可以在一些论坛中看到他们将 struts 标签初始化为

```
<%@taglib prefix="html" uri="http://struts.apache.org/tags-html" %> 
```

他们正在初始化标签`<html:form>`等。

但我使用 struts 标签作为

```
<%@taglib prefix="s" uri="/struts-tags" %> 
```

并用作`<s:form>`标签。我的问题是，struts`<html:form>`标签和`<s:form>`标签之间是否有任何区别，或者它们只有前缀变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:13:39.637

我对 Struts1 不太了解，但如果我是正确的，你提到`<html:form>`的那个来自经典 Struts1，`<s:form>`来自 S2。

基本上，您可以使用任何前缀在 S2 标签中定义，例如`a, b,`c 等。如果您希望可以自由使用 html 作为前缀，您需要告诉 S2 类似

```
<%@taglib prefix="html" uri="/struts-tags" %> 
```

简而言之，它唯一的声明和使用`s`作为前缀是一种约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:13:32.403

taglib 声明设置了前缀是什么，只要您保持一致并引用相同的 taglib，您使用的前缀就没有区别。

# windows - java.net.SocketException：没有可用的缓冲区空间（达到最大连接数？）：JVM_Bind

> ID：10088363
> 
> 赞同：38
> 
> 时间：2012-04-10T11:58:57.777
> 
> 标签：windows, tomcat, jvm, socketexception, connection-leaks

Tomcat 在 Windows 下运行一个 webapp。几天后（在非常低的负载下），标题中提到的异常开始出现在日志中，从那时起无法建立新的连接，唯一的解决方法是重新启动服务器。

环境：

*   最新的 Tomcat 6
*   视窗服务器 2008 R2
*   JDK 6 更新 30
*   SQL Server 2008
*   Kerberos 身份验证

目前收集的证据：

*   netstat 显示没有过多的连接
*   ProcessExplorer 显示没有过多的打开文件句柄
*   系统主内存使用率平均
*   JVM 堆使用率平均
*   重启Tomcat并没有解决问题

开放式问题：

*   如果我们泄漏了连接，它们不应该出现在 netstat 中吗？
*   重新启动应用服务器不应该解决问题吗，因为操作系统应该释放所有进程资源？
*   有没有办法追踪问题的根源？例如安装监控软件，可能类似于 lsof 等？

我没有想法，任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-18T10:49:36.357

我们收到此错误的原因是 Windows Server 2008 R2 / Windows 7 中的错误。由于具有多个内核的机器上的竞争条件，内核泄漏了环回套接字，此补丁修复了该问题：http: [//support.microsoft。 com/kb/2577795](http://support.microsoft.com/kb/2577795)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-13T15:22:33.047

我在 Windows 7 64 位上运行 Alfresco Community 4.0d 并且有相同的症状和错误。

微软的补丁解决了这个问题：“**运行 Windows Server 2008 R2 或 Windows 7 的多处理器计算机上的内核套接字泄漏**”（[http://support.microsoft.com/kb/2577795](http://support.microsoft.com/kb/2577795)）（即 Buddy Casino 的回答（参见以下））。

我想补充的另一个观察结果是，Windows 连接（Internet Explorer、远程桌面等）将在 Alfresco 服务关闭后大约 5-10 分钟再次工作。

Alfresco 是一款出色的产品，我担心我不得不报废它。幸运的是，stackoverflow 来救援了！

再次感谢 Buddy Casino 的回答。

向对问题投反对票的人嘘声。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T20:21:20.253

我们在类似的设置 W2008R2、Tomcat 6.0.29、Java 1.6.0.25 上看到了同样的情况。重新启动 tomcat 没有帮助，但重新启动服务器本身可以，至少在一段时间内。在上次我们开始关闭个别服务之后，我们相信我们已将其范围缩小到也在服务器上运行的 Alfresco 实例或 Backup Exec 代理服务。在这些服务（总共四个）停止后，Tomcat 中的应用程序再次开始工作，尽管我们仍然在标准输出日志中看到缓冲区/连接错误，这很奇怪。需要等待问题再次出现，然后才能确认是罪魁祸首，这可能需要几天到一周或更长时间。

您是否有机会在您的服务器上运行 Alfresco 或 BE？

# hadoop - 在 Hbase 表上插入后重新计算一些列

> ID：10088370
> 
> 赞同：0
> 
> 时间：2012-04-10T11:59:34.183
> 
> 标签：hadoop, hbase

插入发生后是否有一种简单的方法来重新计算某些值？我有一个包含多个列族的表，其中一个是统计的。我想插入原始记录，而不是使用一些特定于 HBase 的工具来离线计算值 - 而不会阻止插入。

假设我将一些文件放入 hbase 表中，并希望获得有关其中行数以及存储在那里的日期的信息。

我一直在研究 RegionObserver 及其 preGet 方法。该解决方案有效，但恐怕它会阻止实际插入发生，直到计算完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:56:26.290

试试 apache Pig，这最适合静态计算，可以在本地和 mapred 模式下运行

有关更多详细信息，您可以访问

[http://pig.apache.com](http://pig.apache.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:21:40.137

使用 postPut 方法。[您可以在此处查看](https://blogs.apache.org/hbase/entry/coprocessor_introduction)HBase 协处理器的简短介绍

# java - 在 Ubuntu 中从 java 打印原始数据

> ID：10088383
> 
> 赞同：0
> 
> 时间：2012-04-10T12:00:34.760
> 
> 标签：java, eclipse, ubuntu, printing, ubuntu-11.10

我打算使用 Eclipse 和一个简单的 swing gui 来打印原始数据。我的条形码打印机使用`.prn`文件进行打印，所有文件都编码在文件中，所以如果我能设法将文件的确切内容作为原始数据发送到我的打印机，我可以让它打印出我想要的确切格式。我可以选择文件并使用`StringBuffer`它来读取其内容并写入字符串。现在我怎样才能设法将此字符串作为原始数据发送到我的打印机？

问候。

编辑：

也许我应该详细说明我的问题；现在它可以在 Windows 中使用；

```
 int ch;

            FileInputStream fin = null;
            try {
                fin = new FileInputStream(prnfile);
                while ((ch = fin.read()) != -1)
                    strContent.append((char) ch);
                fin.close();
                JOptionPane.showMessageDialog(frame, strContent);
            } catch (Exception e1) {
                System.out.println(e1);
            }

            try {

                PrintService service = PrintServiceLookup.lookupDefaultPrintService();
                JOptionPane.showMessageDialog(frame, service);

                DocPrintJob job = service.createPrintJob();
                InputStream is = new ByteArrayInputStream(strContent.toString().getBytes());

                DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;

                Doc doc = new SimpleDoc(is, flavor, null);
                job.print(doc, null);

            is.close(); 
```

但是当我尝试在 Ubuntu 中运行它时，我只收到“打印取消，java 打印”通知，并且打印机什么也不做（通常我的打印机在 ubuntu 中使用`cat xxx.prn | lpr`终端工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-11T15:39:30.243

首先，按照评论将打印机创建为原始打印机。

其次，正如评论的那样，将您的文件读入字节数组，而不是 String 以避免将字节解码为 un​​icode。

第三，不要使用 defaultPrintService()，寻找特定的服务，指定我们将向打印机发送一个字节数组（原始数据）以确保目标打印机支持原始数据：

```
DocFlavor.byteFlavor = DocFlavor.BYTE_ARRAY.AUTOSENSE;
PrintServiceAttributeSet aset = new HashPrintServiceAttributeSet();
aset.add(new PrinterName(sPrinterName, null)); 
PrintService[] services = PrintServiceLookup.lookupPrintServices(byteFlavor, aset); 
```

services[0] 应该是能够发送您的原始数据的服务。这对我有用。

# linux - 如何更改 Linux 中所有计划作业的队列名称？

> ID：10088385
> 
> 赞同：1
> 
> 时间：2012-04-10T12:00:42.243
> 
> 标签：linux, task-queue

我有一个应用程序，其中作业按设定的优先级顺序触发。现在它被解雇了，我在中途。仍然有很多工作正在等待并排队。现在我想将所有计划作业的队列名称更改为加载不多的队列（我知道要加载哪个）。做`bmod -q <queue_name> <job_id>`是不可能的，因为有数百个工作要做。谁能建议我一个快速的方法来做到这一点？我尝试过这样的事情：

```
bjobs | cut -d' ' -f1 | sed '1d' | xargs bmod -q high 
```

但这不起作用。有什么建议么？

# css - 带css的透明文本

> ID：10088388
> 
> 赞同：3
> 
> 时间：2012-04-10T12:00:48.783
> 
> 标签：css

![透明文字](../Images/e3298fe515edd9d44d9733e130395f35.png)

我需要像图像一样以透明（而不是“200”）写任何文本。我需要更改此文本，而不是“ 200 ”。可能吗？？？

HTML：

```
<div class="blocks">
      <div class="trans-200">200</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:09:20.843

除非您使用图像，否则无法跨浏览器执行此操作。不过，webkit 有一种可能性：

```
background: url(images/wood_texture.jpg) repeat;
-webkit-text-fill-color: transparent;
-webkit-background-clip: text; 
```

[http://www.silenceit.ca/2011/03/11/css-gradients-and-webkit-image-masks-on-text/](http://www.silenceit.ca/2011/03/11/css-gradients-and-webkit-image-masks-on-text/)

# javascript - 单击取消按钮时无法关闭 Facebook 邀请弹出窗口

> ID：10088395
> 
> 赞同：0
> 
> 时间：2012-04-10T12:01:01.130
> 
> 标签：javascript, html, facebook

我已经创建了 facebook 应用程序，它还具有邀请朋友功能。我已经创建了 facebook 的 inivite 弹出窗口。这来自以下链接

[http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

我的问题是当我单击取消按钮弹出页面重定向到[另一个 url](https://s-static.ak.fbcdn.net/connect/xd_proxy.php#cb=f40ba6e94&origin=http://lms.linkmusicservices.com/f2f685cad&relation=opener&transport=postmessage&frame=f18ce141f8&result=null)时。所以我不能从页面中删除弹出窗口。单击取消按钮时如何直接删除此弹出窗口而不重定向到另一个网址。 ![在此处输入图像描述](../Images/9b753337dbe427331a1ca2731cf10138.png) 谢谢。
雷霍

（对不起我的英语不好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:12:59.597

```
<!doctype html>
<html>
<body>
  <h3>Thank you!</h3>
  <a href="javascript:close();">Close this window</a>
  <script type="text/javascript">
    close();
  </script>
  </body>
</html> 
```

您正面临这个问题，因为 Facebook 会自动将您重定向到应用程序的 URL。

请创建一个单独的 HTML 页面并复制/粘贴上述代码，并提供 Facebook 重定向 URL：[http ://www.abcde.com/example.php](http://www.abcde.com/example.php)

弹出窗口将关闭。

# html - 如何突出整个 在 Vim 中？

> ID：10088399
> 
> 赞同：6
> 
> 时间：2012-04-10T12:01:06.423
> 
> 标签：html, vim

我在 Ubuntu 和 Vimrc 中使用最新的 Vim，由 nvie.com 的 Vincent Driessen 提供。如何突出显示匹配的 div 和 /div 对之间的整个部分？当我在 DIV 标记的 < 上时，同一行上的 DIV 标记会突出显示，但我想突出显示整个部分，以查看 div 是否在整个页面上一一匹配。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T12:15:05.787

移动到起始`<div>`标签，然后点击`v``a``t`。

# html - 列表项锚点中的css3第一个孩子

> ID：10088402
> 
> 赞同：3
> 
> 时间：2012-04-10T12:01:09.430
> 
> 标签：html, css, css-selectors

```
<style type="text/css">
#featured a:first-child
{
 background-color:yellow;
}
</style>

<div id="featured">
   <ul class="ui-tabs-nav">
     <li><a href="#"><span>test 1</span></a></li>
     <li><a href="#"><span>test 2</span></a></li>
     <li><a href="#"><span>test 3</span></a></li>
     <li><a href="#"><span>test 4</span></a></li>
   </ul>
</div> 
```

我想突出显示列表中的第一个锚点，但不幸的是所有锚点都被突出显示。这里有什么错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T12:10:09.597

它们都被突出显示，因为每个`a`都是其父级的第一个孩子`li`

你可能想要的是这样的：

```
#featured li:first-child a
{
 background-color:yellow;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:10:01.157

因为所有的主播都是父母的第一个孩子。你需要：

```
#featured li:first-child a {
    background-color: yellow;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:32:03.730

如果你总是有一个列表，我会更喜欢 @powerbuoy 和 @danwellman 之类的 CSS 解决方案。如果您只想格式化嵌套在`featured`具有任意嵌套级别的任意标签（带有 id ）内的第一个锚标签，那么我更喜欢 jQuery：

```
$('#featured a').first().css('background-color', 'yellow'); 
```

使用 div 而不是无序列表的示例：http: [//jsfiddle.net/9vAZJ/](http://jsfiddle.net/9vAZJ/)
格式化列表的相同 jQuery 代码（如问题中所示）：http: [//jsfiddle.net/9vAZJ/1/](http://jsfiddle.net/9vAZJ/1/)

jQuery 代码是一个更通用的解决方案，更适合您最初尝试格式化问题中的锚标记，因为这两种解决方案都**与列表标记分离**。

尽管如此，当列表样式是您唯一的任务时，我会推荐 CSS 解决方案。

# c# - 抛出异常并通知用户

> ID：10088406
> 
> 赞同：8
> 
> 时间：2012-04-10T12:01:15.433
> 
> 标签：c#, asp.net, exception-handling

我最近加入了一个 asp.net mvc 项目，该项目正在进行中，在处理控制器中的异常方面没有太大的一致性；一些开发人员将数据返回给客户端，让用户知道出了什么问题，而其他开发人员则将它们返回给处理和记录它们的服务器级处理程序——而不让用户知道发生了什么。

在我看来，这两种方法本身都是错误的，需要相互补充。我坚持的是如何做到这一点。我假设最终的异常处理程序/记录器可以在捕捉到特别讨厌的东西时将用户重定向到错误网页，但这将机制限制为严重的东西。

我正在寻找一种在捕获异常时同时执行“抛出”和“返回...”的方法，因此我对其进行排序和记录服务器端并获取数据客户端，让我告诉用户出现了问题。

我在 asp.net 方面的专业知识非常有限，虽然我相信我对 mvc 的了解足以让它不会成为问题，但这是一种“最佳实践是什么？” 与不太关心最佳实践的人一起工作的人提出的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:08:18.237

有一个名为 Elmah 的好项目，用于记录 ASP.NET 应用程序中的错误和异常。你可以在[这里找到](http://code.google.com/p/elmah/)

> ELMAH（错误记录模块和处理程序）是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。
> 
> 将 ELMAH 放入正在运行的 Web 应用程序并进行适当配置后，您无需更改任何一行代码即可获得以下功能：
> 
> *   记录几乎所有未处理的异常。
> *   用于远程查看重新编码异常的整个日志的网页。
> *   用于远程查看任何记录的异常的完整详细信息的网页，包括彩色堆栈跟踪。
> *   在许多情况下，即使关闭了 customErrors 模式，您也可以查看 ASP.NET 为给定异常生成的原始黄屏死机。
> *   每个错误发生时的电子邮件通知。
> *   来自日志的最后 15 个错误的 RSS 提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:10:53.897

我正在开发的 MVC 应用程序实现了`Application_Error`in`Global.asax`以处理从应用程序抛出的异常，然后将用户重定向到标准错误页面。错误页面的控制器处理日志并显示有关错误的足够信息，以允许支持人员在系统中找到他们的会话并帮助解决任何问题。

# javascript - 计算递减值的算法，接近极限

> ID：10088412
> 
> 赞同：4
> 
> 时间：2012-04-10T12:01:36.560
> 
> 标签：javascript, math, calculus

我一直在尝试找到一个我不久前在 LPC 中使用（未编写）的方便方法的 Javascript 版本，它被称为 dimval()，它采用以下形式：

```
NAME
     dimval() - returns values with a reduced increase in output
                as input values grow larger.

SYNOPSIS
     float dimval(float input, float max_input, float max_output,
                  float min_input, float min_output, float rate);

DESCRIPTION
     Returns (as a float) a value between min_output and max_output,
     with values increasing at a reduced rate as they move from
     min_input toward max_output.

     Input is the input value.

     Max_input is the maximum acceptable input. Any higher input
     value will be capped to this.

     Max_output is the maximum value returned.

     Min_input is the (optional) minimum input. Default is zero.

     Min_output is the (optional) minimum output. Default is zero.

     Rate determines how quickly the cost increases to achieve
     greater return values. Higher numbers are faster, lower numbers
     are slower. 
```

我[读了这篇文章](http://lostsouls.org/grimoire_diminishing_returns)，但它似乎并没有捕捉到我想要的东西（开始看起来要简单得多）。我还[阅读了这个 SO 问题](https://stackoverflow.com/questions/2813621/how-do-you-create-a-formula-that-has-diminishing-returns)，并且......好吧，我认为这可以工作......但说实话，数学超出了我的范围。我了解上面的描述以及参数如何协同工作以产生我想要的结果。

如果有人可以在 Javascript 中提供具有上述约束的方法，我将不胜感激。

干杯！

## 编辑：原始方法的示例输出。

*   评估返回值 (5.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 22.360680
*   评估返回值 (10.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 31.622776
*   评估返回 dimval(50.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 70.710678

*   评估返回值 (10.0, 100.0, 100.0, 0.0, 0.0, 2.0) => 15.811388

*   评估返回暗值（10.0、100.0、100.0、0.0、0.0、10.0）=> 3.162278

*   评估返回值 (200.0, 100.0, 100.0, 0.0, 0.0, 10.0) => 10.000000

*   评估返回值 (200.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 100.000000

*   评估返回值 (1.0, 100.0, 100.0, 10.0, 0.0, 10.0) => 0.000000

* * *

如果您希望我运行更多示例，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:10:35.227

也许是这样的？

```
function dimval(n, min_in, max_in, min_out, max_out, exponent) {
  // unscale input
  n -= min_in
  n /= max_in - min_in

  n = Math.pow(n, exponent)

  // scale output
  n *= max_out - min_out
  n += min_out
  return n
} 
```

`0 < exponent < 1`先快速增加，再小幅增加，`exponent > 1`反之。

例子：

```
> dimval(0, 0, 1, 0, 100, 2)
0
> dimval(0.1, 0, 1, 0, 100, 2)
1.0000000000000002
> dimval(0.2, 0, 1, 0, 100, 2)
4.000000000000001

> dimval(0, 0, 1, 0, 100, 0.5)
0
> dimval(0.1, 0, 1, 0, 100, 0.5)
31.622776601683793
> dimval(0.2, 0, 1, 0, 100, 0.5)
44.721359549995796
> dimval(0.3, 0, 1, 0, 100, 0.5)
54.77225575051661
> dimval(0.4, 0, 1, 0, 100, 0.5)
63.245553203367585
> dimval(0.5, 0, 1, 0, 100, 0.5)
70.71067811865476
> dimval(0.6, 0, 1, 0, 100, 0.5)
77.45966692414834
> dimval(0.7, 0, 1, 0, 100, 0.5)
83.66600265340756
> dimval(0.8, 0, 1, 0, 100, 0.5)
89.44271909999159
> dimval(0.9, 0, 1, 0, 100, 0.5)
94.86832980505137
> dimval(1, 0, 1, 0, 100, 0.5)
100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T16:30:32.100

我刚刚通过一个练习来创建类似的东西，并想出了：

z*(最大 - 最大^(-x) )

其中 z 是起始值，max 是渐近线，x 是变化值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-29T04:33:58.913

功能：

```
function dimval( input, max_in, max_out, min_in, min_out, rate) {
    if (rate < 0.000001) {rate = 0.000001}
    if (input > max_in) {input = max_in}
    if (input < min_in) {input = min_in}
    mult = (max_out - min_out);

    input = (input - min_in) / (max_in - min_in);
    input = Math.sqrt(input) / rate;
    input = (input * mult) + min_out;
    if (input > max_out) {input = max_out}
    return input;
} 
```

测试：

```
dim1 = 'dimval(5.0, 100.0, 100.0, 0.0, 0.0, 1.0)';
dim2 = 'dimval(10.0, 100.0, 100.0, 0.0, 0.0, 1.0)';
dim3 = 'dimval(50.0, 100.0, 100.0, 0.0, 0.0, 1.0)';
dim4 = 'dimval(10.0, 100.0, 100.0, 0.0, 0.0, 2.0)';
dim5 = 'dimval(10.0, 100.0, 100.0, 0.0, 0.0, 10.0)';
dim6 = 'dimval(200.0, 100.0, 100.0, 0.0, 0.0, 10.0)';
dim7 = 'dimval(200.0, 100.0, 100.0, 0.0, 0.0, 1.0)';
dim8 = 'dimval(1.0, 100.0, 100.0, 10.0, 0.0, 10.0)';

console.log(dim1 + ' => ' + eval(dim1).toFixed(6));
console.log(dim2 + ' => ' + eval(dim2).toFixed(6));
console.log(dim3 + ' => ' + eval(dim3).toFixed(6));
console.log(dim4 + ' => ' + eval(dim4).toFixed(6));
console.log(dim5 + ' => ' + eval(dim5).toFixed(6));
console.log(dim6 + ' => ' + eval(dim6).toFixed(6));
console.log(dim7 + ' => ' + eval(dim7).toFixed(6));
console.log(dim8 + ' => ' + eval(dim8).toFixed(6)); 
```

结果：

```
dimval(5.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 22.360680
dimval(10.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 31.622777
dimval(50.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 70.710678
dimval(10.0, 100.0, 100.0, 0.0, 0.0, 2.0) => 15.811388
dimval(10.0, 100.0, 100.0, 0.0, 0.0, 10.0) => 3.162278
dimval(200.0, 100.0, 100.0, 0.0, 0.0, 10.0) => 10.000000
dimval(200.0, 100.0, 100.0, 0.0, 0.0, 1.0) => 100.000000
dimval(1.0, 100.0, 100.0, 10.0, 0.0, 10.0) => 0.000000 
```

# wix - 在 WIX 条件消息中显示下载链接

> ID：10088419
> 
> 赞同：0
> 
> 时间：2012-04-10T12:02:13.297
> 
> 标签：wix, windows-installer, wix3

我创建了一个 WIX 安装程序。安装程序的先决条件之一是应安装 ASOLEDB（Microsoft Utility）。我能够找出是否安装了 ASOLEDB。如果它不存在，我想向用户显示一条带有下载链接的消息，以手动下载和安装 ASOLEDB。我使用了以下条件：

```
<Condition Message="ASOLEDB is not installed.">IS_ASOLEDB_INSTALLED</Condition> 
```

我根据是否找到 ASOLEDB 在 WIX 中设置属性 IS_ASOLEDB_INSTALLED。而不是显示“ASOLEDB 未安装”消息。我想显示一条完整的消息，例如“未安装 ASOLEDB。请从以下链接下载并安装 ASOLEDB：”

当用户点击链接时，网页被打开。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:53:23.570

LaunchConditions 无法显示超链接。Windows Installer 最近才在 MSI 5.0 中添加了超链接控件，这意味着它只能在 Windows 7 / Server 2008R2 中使用。

如果这对您来说真的很重要，您将不得不编写一个自定义操作来显示您自己的自定义 UI，而不是使用 Condition 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-22T08:51:30.417

它适用于 wix v3.11

```
<bal:Condition  Message="install KB00000 from &lt;a href=&quot;http://yahoo.com &quot;&gt;here&lt;/a&gt;.">
      CONDITION_VAR
</bal:Condition> 
```

# sql-server - 如何将参数传递给将执行存储过程的 SQL 作业

> ID：10088427
> 
> 赞同：10
> 
> 时间：2012-04-10T12:03:05.393
> 
> 标签：sql-server, sql-server-2008, tsql, sql-agent-job

我有以下代码（仅需要的部分）

```
EXEC @ReturnCode = msdb.dbo.sp_add_jobstep @job_id=@jobId, @step_name=N'SomeStep', 
        @step_id=1, 
        @cmdexec_success_code=0, 
        @on_success_action=1, 
        @on_success_step_id=0, 
        @on_fail_action=2, 
        @on_fail_step_id=0, 
        @retry_attempts=0, 
        @retry_interval=0, 
        @os_run_priority=0, @subsystem=N'TSQL', 
        @command=N'exec [dbo].[PORT_Insert_Record] ''https://localhost''',  
        @database_name=N'MyDatabase', 
        @flags=0 
```

现在，我想将`https://localhost`值传递给变量并传递给存储过程（由于某种原因，我无法在 SP 内部传递它）。

所以我尝试了

```
DECLARE @domainName varchar(max)
DECLARE @sp varchar(max)
SET @domainName ='https://localhost:'
SET @sp ='exec [dbo].[PORT_Insert_Record]' + @domainName

EXEC @ReturnCode = msdb.dbo.sp_add_jobstep @job_id=@jobId, @step_name=N'InsertRecordIntoResellerOpportunities', 
        @step_id=1, 
        @cmdexec_success_code=0, 
        @on_success_action=1, 
        @on_success_step_id=0, 
        @on_fail_action=2, 
        @on_fail_step_id=0, 
        @retry_attempts=0, 
        @retry_interval=0, 
        @os_run_priority=0, @subsystem=N'TSQL', 
        @command=@sp,  
        @database_name=N'MyDatabase',  
        @flags=0 
```

但它不工作。我还在网上搜索任何想法/语法等。但到目前为止还没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:12:03.633

那`@ReturnCode`在那儿做什么？它是在某处宣布的吗？

我在一份新工作上试过这个，它奏效了：

```
DECLARE @domainName varchar(max)
DECLARE @sp varchar(max)
SET @domainName ='https://localhost:'
SET @sp ='exec [dbo].[PORT_Insert_Record]' + @domainName

    EXEC msdb.dbo.sp_add_jobstep @job_id=N'a756bfcb-2abf-4d7a-a871-85e234e7ef53', @step_name=N'Step 1', 
            @step_id=1, 
            @cmdexec_success_code=0, 
            @on_success_action=1, 
            @on_fail_action=2, 
            @retry_attempts=0, 
            @retry_interval=0, 
            @os_run_priority=0, @subsystem=N'TSQL', 
            @command=@sp, 
            @database_name=N'master', 
            @flags=0
    GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:11:50.957

我认为你需要双引号

```
SET @domainName ='https://localhost:' 
SET @sp ='exec [dbo].[PORT_Insert_Record] ''' + @domainName  + '''' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-18T21:44:06.797

您必须将任何信息写入命令脚本。作业有自己的会话。他们如何知道您的参数是什么

这是一个例子

```
--here is your existing parameters
declare @dateparam date = '2017-10-19'
declare @intparam int= 100
declare @stringparam nvarchar(20)= 'hello'

--now start write you sql job command
declare @command nvarchar(max)
set @command  = N'declare @dateparam date =' + CAST(@dateparam AS NVARCHAR(20)) + CHAR(13)
--+ CHAR(13) IS FOR LINEBREAK
set @command  = @command  + N'declare @intparam date =' + CAST(@intparam AS NVARCHAR(20)) + CHAR(13)
set @command  = @command  + N'declare @stringparam nvarchar(20) =' + @stringparam  + CHAR(13)
set @command  = @command  + N'exec dbo.my_store_procedure @dateparam, @intparam, @stringparam'

--NOW YOUR COMMAND HAVE ALL informations
 EXEC msdb.dbo.sp_add_jobstep @job_id=N'a756bfcb-2abf-4d7a-a871-85e234e7ef53', @step_name=N'Step 1', 
        @step_id=1, 
        @cmdexec_success_code=0, 
        @on_success_action=1, 
        @on_fail_action=2, 
        @retry_attempts=0, 
        @retry_interval=0, 
        @os_run_priority=0, @subsystem=N'TSQL', 
        @command=@command, 
        @database_name=N'master', 
        @flags=0 
```

# java - 使用进度数据库获取 StringIndexOutOfBounds 异常

> ID：10088428
> 
> 赞同：0
> 
> 时间：2012-04-10T12:03:07.280
> 
> 标签：java, relational-database

当我尝试从 Progress 数据库中检索数据时，出现以下异常。

```
 Exception::java.lang.StringIndexOutOfBoundsException: String index out of range: -1
 at java.lang.String.substring(String.java:1768)
 at com.progress.sql.jdbc.JdbcProgressResultSet.reWordAsCountQuery(JdbcProgressResultSet.java:6634)
 at com.progress.sql.jdbc.JdbcProgressResultSet.calculateRowCount(JdbcProgressResultSet.java:6427)
 at com.progress.sql.jdbc.JdbcProgressResultSet.initialize(JdbcProgressResultSet.java:157)
 at com.progress.sql.jdbc.JdbcProgressStatement.getResultSet(JdbcProgressStatement.java:435)
 at com.progress.sql.jdbc.JdbcProgressPreparedStatement.executeQuery(JdbcProgressPreparedStatement.java:97)
 at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:93)
 at com.esb.service.DBService.handleStatement(DBService.java:992) 
```

我注意到的一件事是，如果我在查询的开头或结尾放置一个空格，则查询可以正常工作。但这对我来说看起来很奇怪。谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:07:43.133

鉴于此[错误报告页面](http://www-01.ibm.com/support/docview.wss?uid=swg21543521)，您基本上需要更新到更高版本。

# visual-c++ - 64位windows VMware检测

> ID：10088433
> 
> 赞同：9
> 
> 时间：2012-04-10T12:03:39.103
> 
> 标签：visual-c++, assembly, 64-bit, vmware, detection

我正在尝试开发一个应用程序来检测程序是否在虚拟机中运行。

对于 32 位 Windows，以下链接中已经说明了方法：http: [//www.codeproject.com/Articles/9823/Detect-if-your-program-is-running-inside-a-Virtual](http://www.codeproject.com/Articles/9823/Detect-if-your-program-is-running-inside-a-Virtual)

我正在尝试在 64 位 Windows 操作系统中调整有关 Virtual PC 和 VMware 检测的代码。对于 VMware，该代码可以在 Windows XP 64 位操作系统中成功检测。但是当我在本机系统（Windows 7 64 位操作系统）中运行它时，程序会崩溃。

我将代码放在 .asm 文件中，并使用 ml64.exe 文件定义自定义构建步骤。64 位 Windows 的 asm 代码为：

```
IsInsideVM proc

      push   rdx
      push   rcx
      push   rbx

      mov    rax, 'VMXh'
      mov    rbx, 0     ; any value but not the MAGIC VALUE
      mov    rcx, 10    ; get VMWare version
      mov    rdx, 'VX'  ; port number

      in     rax, dx    ; read port
                        ; on return EAX returns the VERSION
      cmp    rbx, 'VMXh'; is it a reply from VMWare?
      setz   al         ; set return value
      movzx rax,al

      pop    rbx
      pop    rcx
      pop    rdx

      ret
IsInsideVM endp 
```

我在一个 cpp 文件中称这部分为：

```
__try
{
returnValue = IsInsideVM();
}
__except(1)
{
    returnValue = false;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T01:22:09.893

[乔安娜](http://en.wikipedia.org/wiki/Joanna_Rutkowska)的旧*红药丸*可能有用：[invisiblethings.org 博客的随机备份页面](http://www.ouah.org/Red_%20Pill.html)：

> 吞下红色药丸或多或少等同于以下代码（在 Matrix 中返回非零）：
> 
> ```
>  int swallow_redpill () {
>    unsigned char m[2+4], rpill[] = "\x0f\x01\x0d\x00\x00\x00\x00\xc3";
>    *((unsigned*)&rpill[3]) = (unsigned)m;
>    ((void(*)())&rpill)();
>    return (m[5]>0xd0) ? 1 : 0;
>  } 
> ```
> 
> 这段代码的核心其实是SIDT指令（编码为0F010D[addr]），它在目的操作数中存储了中断描述符表寄存器（ID​​TR）的内容，目的操作数其实是一个内存位置。SIDT 指令的特殊和有趣之处在于，它可以在非特权模式（ring3）下执行，但它返回敏感寄存器的内容，供操作系统内部使用。
> 
> 因为IDTR寄存器只有一个，但至少有两个OS同时运行（即host和guest OS），VMM需要把guest的IDTR重新定位到一个安全的地方，这样才不会和host的冲突。不幸的是，VMM 无法知道来宾操作系统中运行的进程是否（以及何时）执行 SIDT 指令，因为它没有特权（并且它不会产生异常）。这样进程就得到了IDT表的重定位地址。据观察，在 VMWare 上，IDT 的重定位地址为地址 0xffXXXXXX，而在 Virtual PC 上为 0xe8XXXXXX。这在 VMWare Workstation 4 和 Virtual PC 2004 上进行了测试，两者都在 Windows XP 主机操作系统上运行。

注意：我自己没有测试过，但看起来它使用了非特权方法。如果它最初不适用于 x64，则进行一些调整可能会有所帮助。

另外，刚刚发现了一个可能对您有帮助的问题：[Detecting VMM on linux](https://stackoverflow.com/q/3668804/1000282)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T03:43:03.613

我的猜测是你的函数损坏了寄存器。

在真实硬件（非 VM）上运行可能会在“in rax, dx”处触发异常。如果发生这种情况，则控制权将传递给您的异常处理程序，该处理程序会设置结果，但不会恢复寄存器。调用者将完全意外此行为。例如，它可以将某些内容保存到 EBX/RBX 寄存器中，然后调用您的 asm 代码，您的 asm 代码执行“mov RBX, 0”，它执行、捕获异常、设置结果、返回 - 然后调用者突然意识到他保存的数据不在 EBX/RBX 中了！如果在 EBX/RBX 中存储了一些指针 - 你将很难崩溃。任何事情都有可能发生。

当然，您的 asm 代码会保存/恢复寄存器，但这仅在没有引发异常时才会发生。即，如果您的代码在 VM 上运行。然后您的代码将执行正常的执行路径，不会引发异常，寄存器将正常恢复。但如果有异常 - 您的 POP 将被跳过，因为执行将被传递给异常处理程序。

正确的代码可能应该在 try/except 块之外而不是内部执行 PUSH/POP。

# image - CKEditor 为插入的图像定义自定义边距

> ID：10088434
> 
> 赞同：6
> 
> 时间：2012-04-10T12:03:43.493
> 
> 标签：image, ckeditor, wysiwyg, fckeditor, margins

我遇到了一个非常典型的操作限制。简单文档：http: [//i.stack.imgur.com/JNI9v.png](https://i.stack.imgur.com/JNI9v.png)

如您所见，图像具有右边距和下边距。但是... CKEditor 图像对话框提供了 VSpace 和 HSpace 参数，它们共同影响 Top-Bottom 或 Left-Right 双值并添加不必要的顶部和左侧边距：http: [//i.stack.imgur.com/vo3oC.png](https://i.stack.imgur.com/vo3oC.png)

当然，用户不会使用纯代码在 style="..." 属性中定义这个。那么，如何让用户插入第一张图片所示的图片呢？也许存在 CKEditor 插件或补丁......我只是找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:35:06.767

另一种，甚至可能更简单的方法来实现您想要的效果是使用一组预定义的图像样式，并使用“样式”组合来应用一个预选的类。这样，用于图像的样式可以更加一致。

要了解我的意思，您可以查看[“标准”演示](http://ckeditor.com/demo#standard)- 单击图像并在“样式”组合中选择*“对象样式 -> 样式图像（右）”*

# symfony1 - 为什么我的 ymfony 1.4 项目中没有显示 favicon.ico？

> ID：10088441
> 
> 赞同：0
> 
> 时间：2012-04-10T12:04:35.303
> 
> 标签：symfony1, symfony-1.4, favicon

我已将 favicon.ico 文件放在 web 目录中，在我的标题中

```
<link rel="shortcut icon" href="/favicon.ico" /> 
```

然而我还是看不到。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T17:52:57.597

我`href="/myproject/web/favicon.ico"`在开发（wamp 服务器，仅 FF 浏览器）和生产服务器（Apache，用 FF、IE 和 Chrome 测试）中都使用它。当然，`/myproject`如果您在部署中不使用项目文件夹，则必须删除。

更改图标后不要忘记清除浏览器缓存。

# .net - @ServiceHost Debug="true" - 性能损失？

> ID：10088447
> 
> 赞同：9
> 
> 时间：2012-04-10T12:04:59.500
> 
> 标签：.net, wcf, performance, svc

在 svc 文件中设置 Debug="true" 是否会降低性能？是否足以保证在生产环境中将其设置为“假”？

```
%@ ServiceHost Language="C#" **Debug="true"** Service="AwesomeService" %> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:38:32.740

在您的`".svc"`文件中，如果您将服务编写为**内联**代码，或者在“ **App_Code** ”文件夹中实现服务并启用`debug`模式，则会影响性能。

通常，始终`debug="false"`在部署到生产之前进行设置。如果启用调试模式，您的应用程序的性能可能会降低。

> 在发布模式下，调试符号不会烘焙到程序集中，因此您无法使用 Visual Studio .NET 或其他源代码调试器对其进行调试。很酷的是，在此构建操作期间代码也得到了优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:50:21.473

似乎此开关仅控制内联代码的调试符号生成。

由其他选项控制的代码隐藏生成的调试符号。

如果您没有内联代码，则不会影响性能。

* * *

同时[MSDN 声明](http://msdn.microsoft.com/en-us/library/aa967286.aspx)如下：

> 调试
> 
> 指示是否应使用调试符号编译 Windows Communication Foundation (WCF) 服务。如果应使用调试符号编译 WCF 服务，则为 true；否则为假。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:33:16.617

简短的回答是**肯定**的，但如果您想要所有血淋淋的细节，请查看这个关于该主题的良好[StackOverflow 答案。](https://stackoverflow.com/questions/4043821/performance-differences-between-debug-and-release-builds?answertab=votes#tab-top)

# shell - 通过 KornShell (ksh) 跳过以“#”开头的文本文件中的行

> ID：10088449
> 
> 赞同：1
> 
> 时间：2012-04-10T12:05:02.163
> 
> 标签：shell, unix, scripting, ksh

我正在尝试编写一个脚本来读取文本文件并将每一行保存到一个字符串中。我还希望脚本跳过任何以井号开头的行。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:10:41.437

您不应将跳线留给`ksh`. 例如这样做：

```
grep -v '^#' INPUTFILE | while IFS="" read line ; do echo $line ; done 
```

而不是`echo`部分做任何你想做的事。

或者如果`ksh`不支持这种语法：

```
grep -v '^#' INPUTFILE > tmpfile
while IFS="" read line ; do echo $line ; done < tmpfile
rm tmpfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:22:53.690

```
while read -r line; do
    [[ "$line" = *( )#* ]] && continue
    # do something with "$line"
done < filename 
```

在 ksh 手册页中查找“文件名模式”或“文件名生成”。

# java - 如何获取 JTree 中当前节点的深度？

> ID：10088450
> 
> 赞同：7
> 
> 时间：2012-04-10T12:05:08.403
> 
> 标签：java, swing, jtree, treenode, depth

我有一个带有几个节点和子节点的 JTree。当我单击一个节点时，我想知道它的深度（0、1、3）。我怎么知道？

```
selected_node.getDepth(); 
```

不返回当前节点的深度..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T12:09:53.253

你应该使用`getLevel`. [`getLevel`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/tree/DefaultMutableTreeNode.html#getLevel%28%29)返回此节点上方的层数 - 从根到此节点的距离。如果此节点是根节点，则返回 0。或者，如果您出于某种原因获得了`Treenode[]`路径（使用`getPath()`），那么获取该数组的长度就足够了。

`getDepth`不同，因为它返回以该节点为根的树的深度。这不是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:14:11.880

基本上你必须在`Iterate`里面`JTree`，但`TreeSelectionListener`可以返回有趣的值，例如

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;

public class TreeSelectionRow {

    public TreeSelectionRow() {
        JTree tree = new JTree();
        TreeSelectionListener treeSelectionListener = new TreeSelectionListener() {

            @Override
            public void valueChanged(TreeSelectionEvent treeSelectionEvent) {
                JTree treeSource = (JTree) treeSelectionEvent.getSource();
                System.out.println("Min: " + treeSource.getMinSelectionRow());
                System.out.println("Max: " + treeSource.getMaxSelectionRow());
                System.out.println("Lead: " + treeSource.getLeadSelectionRow());
                System.out.println("Row: " + treeSource.getSelectionRows()[0]);
            }
        };
        tree.addTreeSelectionListener(treeSelectionListener);
        String title = "JTree Sample";
        JFrame frame = new JFrame(title);
        frame.add(new JScrollPane(tree));
        frame.setSize(300, 150);
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TreeSelectionRow treeSelectionRow = new TreeSelectionRow();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:20:46.687

如果您有一个`TreeSelectionListener`处理 的`TreeSelectionEvent`，您可以使用该[`TreeSelectionEvent#getPaths`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/TreeSelectionEvent.html#getPaths%28%29)方法来检索选定`TreePath`的 s。该[`TreePath#getPathCount`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreePath.html#getPathCount%28%29)方法返回所选路径的深度。

您也可以使用该方法直接询问`JTree`（尽管您需要在选择更改时通知侦听器）[`JTree#getSelectionPaths`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#getSelectionPaths%28%29)。

# python - 如何解压缩具有非唯一文件名的文件

> ID：10088451
> 
> 赞同：0
> 
> 时间：2012-04-10T12:05:11.070
> 
> 标签：python, unzip

我正在重新编写一个 bash 脚本，该脚本从 .pencast 文件（实际上只是 .zip）中提取 aac 文件......

```
import os
import glob
import zipfile

app_path = os.path.dirname(os.path.realpath(__file__)) + os.sep
temp = app_path + 'AudioFiles'

for pencast in (glob.glob( app_path + '*.pencast')):
    f = zipfile.ZipFile(pencast, 'r')
    for number, audio in enumerate(f.namelist()):
        if 'aac' in audio:
            print(os.path.basename(pencast), number, audio) 
```

返回（这样您就可以看到文件的样子）

:!/usr/local/bin/python3 pencast.py

```
Cancer1-1.pencast 29 userdata/Sessions/PRS-a6959094a/audio-0.aac
Cancer1-1.pencast 32 userdata/Sessions/PRS-a695732e5/audio-0.aac
Cancer1-2.pencast 30 userdata/Sessions/PRS-a696fa7ab/audio-0.aac
Cancer1-2.pencast 33 userdata/Sessions/PRS-a699046df/audio-0.aac
Cancer1-3.pencast 32 userdata/Sessions/PRS-a699046df/audio-0.aac
Cancer1-3.pencast 35 userdata/Sessions/PRS-a696fa7ab/audio-0.aac 
```

如何解压缩每个文件，给它一个唯一的名称，即

```
Cancer1-1-1.aac
Cancer1-1-2.aac
Cancer1-2-1.aac 
```

...并且只是将音频文件移至“AudioFiles”文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:13:36.093

首先，使用 os.path.join 加入路径。

并尝试这样的事情：

```
import os
import glob
import zipfile

def is_audio(file):
    return 'acc' in file

app_path = os.path.dirname(os.path.realpath(__file__))
os.chdir(app_path)
try:
    os.mkdir('AudioFiles')
except OSError:
    pass

for pencast in (glob.glob('*.pencast')):
    f = zipfile.ZipFile(pencast, 'r')
    for number, audio in enumerate(filter(is_audio, f.namelist())):
        basename = os.path.basename(os.path.splitext(pencast)[0])
        newfilename = '{}-{}.acc'.format(basename, number)
        print(newfilename, number, audio)
        f.extract(audio, os.path.join('AudioFiles', newfilename)) 
```

我没有尝试代码，它可能包含错误，但我想你会明白的。

# android - 测试平板电脑移动 webapp

> ID：10088457
> 
> 赞同：1
> 
> 时间：2012-04-10T12:05:31.740
> 
> 标签：android, mobile, mobile-website, tablet

我正在为 10" android 平板电脑开发 web 应用程序，你会说什么是最好/最快的方式来查看应用程序在这样的屏幕上会如何 lokk？也许在模拟器中，但如何设置它，也许它是让我快速刷新速度慢吗？难道没有可能只拥有适用于 Windows 的 android 浏览器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:52:36.507

最快、最准确的方法永远是真实的设备。

除此之外，您始终可以使用 Android 模拟器来模拟不同的屏幕尺寸和分辨率（这适用于 android 应用程序开发，但没有理由不能将其用于移动 Web 开发）。

Android 模拟器是[Android SDK](http://developer.android.com/sdk/index.html)的一部分，您只需要使用 AVD 管理器来创建一个新的虚拟设备。

# java - 如何将郁郁葱葱与 j2me 波兰语 2.1.4 集成

> ID：10088461
> 
> 赞同：0
> 
> 时间：2012-04-10T12:05:49.837
> 
> 标签：java, java-me, j2mepolish

我正在开发 j2me Polish 2.1.4，我想使用 LUSH UI 进行 symbian 移动应用程序开发。我在当前版本的 j2me 波兰语中找不到任何内容。

当我使用网站上的 css (http://www.enough.de/products/j2me-polish/documentation/lush-ui/visual-guide-to-backgrounds/gui-background-partial.html) 它给了我以下错误：

```
D:\Mobile development\rising\build.xml:87: Invalid CSS: The CSS setting "type: horizontal-gradient;" is not supported. Please check style "recordbg" in your "polish.css" file(s).
BUILD FAILED (total time: 6 seconds). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:25:37.393

我找到了自己问题的答案。

实际上 Lush UI 已经集成到 J2me Polish 并且我做错了，我使用 CSS 的嵌套属性作为主要属性，所以我收到了这个错误。

# java - 使用运行时类从 java 执行 unix 命令

> ID：10088462
> 
> 赞同：-2
> 
> 时间：2012-04-10T12:05:51.673
> 
> 标签：java, unix, runtime.exec

```
Process log_remover = Runtime.getRuntime().exec("echo \"bleh\" > test.txt");
log_remover.waitFor();
log_remover.destroy(); 
```

这什么也没做

```
Process node_creation = Runtime.getRuntime().exec("cp -r ../HLR"+String.valueOf(count-1)+" ../HLR"+String.valueOf(count));
node_creation.waitFor();
node_creation.destroy(); 
```

但是这有效：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:08:56.847

重定向仅在使用 shell 时才有效。Runtime.exec() 不使用外壳。

请参阅[Java 执行 Linux 命令](https://stackoverflow.com/questions/9993873/java-executing-linux-command)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:09:49.833

重定向是由一个 shell 处理的，你在这里没有调用一个 shell，所以你不能使用重定向。另一方面，这样的事情会起作用：

```
Runtime.getRuntime().exec(new String[] {"sh",  "-c", "echo 'bleh' > text.txt"}); 
```

请注意，我已将其更改为使用`exec()`字符串数组的形式，因为在命令行上正确标记带引号的字符串是只有 shell 才能做到的其他事情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:12:16.313

我以前见过很多次的经典错误...

的第一个参数`Runtime.getRuntime().exec()`是*可执行文件*，因此您的代码正试图执行一个字面上称为的命令`echo \"bleh\" > test.txt`，但它应该试图执行`echo`。可执行文件的参数在可执行文件之后传入，如下所示：

```
Runtime.getRuntime().exec("echo", new String[]{"bleh"}); 
```

重定向输出是另一回事，因为 *nix 操作符`>`是一个外壳程序。要在 java 中复制它，您必须获取命令的输出流并将其泵入另一个进程的输入流

# c# - 如何在 C# 互操作中使用 InternetQueryOption？

> ID：10088463
> 
> 赞同：1
> 
> 时间：2012-04-10T12:05:57.373
> 
> 标签：c#, c++, interop, marshalling, wininet

在我的 C# 代码中，我想使用[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385101%28v=vs.85%29.aspx)中定义的 InternetQueryOption，例如：

```
BOOL InternetQueryOption(
  __in     HINTERNET hInternet,
  __in     DWORD dwOption,
  __out    LPVOID lpBuffer,
  __inout  LPDWORD lpdwBufferLength
); 
```

在我的 C# 代码中，我写道：

```
 [DllImport("wininet.dll", SetLastError = true)]
            static extern bool InternetQueryOption(
            IntPtr hInternet, 
            uint dwOption, 
            IntPtr lpBuffer, 
            ref int lpdwBufferLength); 
```

我的 C++ 代码：

```
...
HINTERNET hRequest = HttpOpenRequest(hConnect, "POST","/BM-Login/auth-cup", NULL, NULL, accept, secureFlags, 0);
    DWORD dwFlags;
    DWORD dwBuffLen = sizeof(dwFlags);

    InternetQueryOption (hRequest, INTERNET_OPTION_SECURITY_FLAGS,
            (LPVOID)&dwFlags, &dwBuffLen);

    dwFlags |= SECURITY_FLAG_IGNORE_UNKNOWN_CA;
      dwFlags |= SECURITY_FLAG_IGNORE_REVOCATION;
      dwFlags |= SECURITY_FLAG_IGNORE_CERT_DATE_INVALID;
      dwFlags |= SECURITY_FLAG_IGNORE_CERT_CN_INVALID | SECURITY_FLAG_IGNORE_WRONG_USAGE;

    InternetSetOption (hRequest, INTERNET_OPTION_SECURITY_FLAGS,
                            &dwFlags, sizeof (dwFlags) );
... 
```

**如何在 C# 中编写相同的代码？**谢谢。（对不起我的英语很差）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:22:00.407

我建议为此使用托管代码，而不是通过互操作执行此操作。看看[WebRequest 类](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)。另外，请查看我对 stackoverflow 问题[C# https login and download file](https://stackoverflow.com/questions/9841344/c-sharp-https-login-and-download-file/9842925#9842925)的回答，了解如何使用此类的工作示例。

# android - 保存使用自定义适配器构建的列表视图的复选框列表

> ID：10088464
> 
> 赞同：0
> 
> 时间：2012-04-10T12:05:57.317
> 
> 标签：android, listview, checkbox, custom-adapter

现在这是困扰我很久的事情。但不知何故，我仍然无法弄清楚如何在使用自定义适配器构建的列表视图中保存复选框的状态。这是我的自定义适配器。任何帮助都感激不尽。谢谢你。

> ```
>  public class ListAdapter  extends BaseAdapter{
>   boolean[] itemChecked=new boolean[20];
>   public String title[];  
> public String description[];  
> public Activity context;  
> public LayoutInflater inflater;
> HttpClient ht = new DefaultHttpClient() 
> public ListAdapter(Activity context,String[] title, String[] description) {  
>     super();  
>     for(int i=0;i<itemChecked.length;i++)
>     {
>         itemChecked[i]=false;
>     }
>     this.context = context;  
>     this.title = title;  
>     this.description = description; 
> ```

```
 this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
}  

public static class ViewHolder  
{  

    TextView txtViewTitle;  
    TextView txtViewDescription;  
    CheckBox cb;
}  

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return title.length; 
}
@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    final ViewHolder holder;  

    LayoutInflater inflater =  context.getLayoutInflater();  
    if(convertView==null)  
    {  
        convertView = inflater.inflate(R.layout.custom_list, null);
        holder = new ViewHolder();  
        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.title_text);  
        holder.txtViewTitle.setTextColor(Color.parseColor("#008ab5"));
        holder.txtViewDescription = (TextView) convertView.findViewById(R.id.description_text);
        holder.txtViewDescription.setTextColor(Color.parseColor("#008ab5"));
        holder.cb=(CheckBox) convertView.findViewById(R.id.cb);

        convertView.setTag(holder);  

    }  

    else  
    {
        holder=(ViewHolder)convertView.getTag();  

     }  

    holder.cb.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub

                 itemChecked[position] = isChecked;
                 if(itemChecked[position])
                 {
                     holder.cb.setChecked(true);
                 }
                 else
                 {
                     holder.cb.setChecked(false);
                 }

                boolean sub=isChecked;

        }
            }        
        });
boolean item[]=load();
    holder.txtViewTitle.setText(title[position]);  
    holder.txtViewDescription.setText(description[position]);  
    holder.cb.setChecked( item[position]);
  holder.txtViewDescription.setFocusable(false);
  holder.txtViewTitle.setFocusable(false);
 save(itemChecked);
return convertView;  

}  

void subscribe(List<NameValuePair> nameValuePairs,boolean sub)
    {
    if(sub==true)
    {

          try {
            subscription.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            ht.execute(subscription);
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   

    }
else
{
    if(sub==false)
    {
        {

              try {
                unSubscription.setEntity(new     UrlEncodedFormEntity(nameValuePairs));
                try {
                    ht.execute(unSubscription);
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } catch (UnsupportedEncodingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }   

        }
}

}   
    }
   private void save(final boolean[] isChecked) {
    SharedPreferences sharedPreferences = context.getPreferences(Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    for(Integer i=0;i<isChecked.length;i++)
     {
         editor.putBoolean(i.toString(), isChecked[i]);
     }
    editor.commit();
    }
  public boolean[] load() {
    SharedPreferences sharedPreferences = context.getPreferences(Context.MODE_PRIVATE);
        boolean [] reChecked = new boolean[itemChecked.length];
        for(Integer i = 0; i < itemChecked.length; i++)
        {
             reChecked[i] = sharedPreferences.getBoolean(i.toString(), false);
        }
        return reChecked;
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:51:48.790

你可以试试这个：

```
holder.cb.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub

             itemChecked[position] = isChecked;
             if(itemChecked[position])
             {
                 holder.cb.setChecked(true);
             }
             else
             {
                 holder.cb.setChecked(false);
             }

             boolean sub=isChecked;

             ***save(itemChecked);***
       }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:31:15.743

试试这个，而不是使用 OnCheckedChangeListener，只使用 OnClickListener ：

```
 @Override
    public View getView(final int position, View convertView, ViewGroup arg2) {
        // TODO Auto-generated method stub
        final ViewHolder holder;  
        LayoutInflater inflater =  ((Activity) context).getLayoutInflater();  
        if(convertView==null)  
        {  
            convertView = inflater.inflate(R.layout.custom_list, null);
            holder = new ViewHolder();  

             holder.txtViewTitle = (TextView) convertView.findViewById(R.id.title_text);  

             holder.txtViewDescription = (TextView) convertView.findViewById(R.id.description_text);

            holder.cb=(CheckBox) convertView.findViewById(R.id.cb);

            convertView.setTag(holder);  

        }  

        else  
        {
            holder=(ViewHolder)convertView.getTag();  

         }  

        holder.txtViewTitle.setTextColor(Color.parseColor("#008ab5"));
        holder.txtViewTitle..setText(title[position]);
        holder.txtViewDescription.setTextColor(Color.parseColor("#008ab5"));
        holder.txtViewDescription.setText(description[position]);
        if (itemChecked[position])
              holder.cb.setChecked(true);
         else
              holder.cb.setChecked(false);

        holder.cb.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    if (holder.cb.isChecked())
                        itemChecked[position] = true;
                     else
                         itemChecked[position] = false;
                }        
        });
        return convertView;

    } 
```

# java - 需要更快的方法来获取缓冲图像的每个像素的 RGB 值

> ID：10088465
> 
> 赞同：8
> 
> 时间：2012-04-10T12:06:01.297
> 
> 标签：java, image-processing, pixels

获取 a 的每个像素的 RGB 值的最快方法是`BufferedImage`什么？

现在我正在使用两个`for`循环获取 RGB 值，如下面的代码所示，但是由于嵌套循环对我的图像总共运行了 479999 次，因此获取这些值花费了太长时间。如果我使用 16 位图像，这个数字会更高！

我需要一种更快的方法来获取像素值。

这是我目前正在尝试使用的代码：

```
BufferedImage bi=ImageIO.read(new File("C:\\images\\Sunset.jpg"));

int countloop=0;  

for (int x = 0; x <bi.getWidth(); x++) {
    for (int y = 0; y < bi.getHeight(); y++) {
        Color c = new Color(bi.getRGB(x, y));
        System.out.println("red=="+c.getRed()+" green=="+c.getGreen()+"    blue=="+c.getBlue()+"  countloop="+countloop++);                                                                                                                                                  
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T12:42:54.623

我不知道这是否有帮助，我还没有测试过，但你可以通过这种方式获取 rgb 值：

```
BufferedImage bi=ImageIO.read(new File("C:\\images\\Sunset.jpg"));
int[] pixel;

for (int y = 0; y < bi.getHeight(); y++) {
    for (int x = 0; x < bi.getWidth(); x++) {
        pixel = bi.getRaster().getPixel(x, y, new int[3]);
        System.out.println(pixel[0] + " - " + pixel[1] + " - " + pixel[2] + " - " + (bi.getWidth() * y + x));
    }
} 
```

如您所见，您不必在循环内初始化新颜色。我还按照 onemasse 的建议反转了宽度/高度循环，以从我已有的数据中检索计数器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T04:23:10.617

~~通过从一堆单独的 getRGB 更改为一个大的 getRGB 以将整个图像复制到一个数组中，执行时间从 33,000 毫秒下降了一个数量级到 3,200 毫秒，而创建数组的时间仅为 31 毫秒。~~

~~毫无疑问，对数组的一次大读取和对数组的直接索引比许多单独的读取要快得多。~~

性能差异似乎与在类末尾使用断点语句有关。虽然断点在循环之外，但类中的每一行代码似乎都经过了断点测试。更改为个人获取不会提高速度。

由于代码仍然正确，答案的其余部分可能仍然有用。

旧读声明

```
colorRed=new Color(bi.getRGB(x,y)).getRed(); 
```

读取语句将位图复制到数组中

```
int[] rgbData = bi.getRGB(0,0, bi.getWidth(), bi.getHeight(), 
                null, 0,bi.getWidth()); 
```

数组中的 getRGB 将所有 3 个颜色值放入单个数组元素中，因此必须通过旋转和“与”来提取单个颜色。y 坐标必须乘以图像的宽度。

从数组中读取单个颜色的代码

```
colorRed=(rgbData[(y*bi.getWidth())+x] >> 16) & 0xFF; 

colorGreen=(rgbData[(y*bi.getWidth())+x] >> 8) & 0xFF; 

colorBlue=(rgbData[(y*bi.getWidth())+x]) & 0xFF; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:20:21.900

您是否尝试[过 BufferedImage.getRGB(int, int ,int ,int, int[] , int , int)](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int,%20int,%20int,%20int%5B%5D,%20int,%20int%29)？

就像是：

```
int[] rgb = bi.getRGB(0,0, bi.getWidth(), bi.getHeight(), new int[bi.getWidth() * bi.getHeight(), bi.getWidth()]) 
```

没有尝试，所以不确定它是否更快。

**编辑** 看过@代码，它可能不是，但值得一试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T12:25:11.997

您应该循环外部循环中的行和内部循环中的列。这样您就可以避免缓存未命中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-08T14:03:21.550

我在这里找到了解决方案 [https://alvinalexander.com/blog/post/java/getting-rgb-values-for-each-pixel-in-image-using-java-bufferedi](https://alvinalexander.com/blog/post/java/getting-rgb-values-for-each-pixel-in-image-using-java-bufferedi)

```
BufferedImage bi = ImageIO.read(new File("C:\\images\\Sunset.jpg"));

for (int x = 0; x < bi.getWidth(); x++) {
    for (int y = 0; y < bi.getHeight(); y++) {
        int pixel = bi.getRGB(x, y);
        int red = (pixel >> 16) & 0xff;
        int green = (pixel >> 8) & 0xff;
        int blue = (pixel) & 0xff;
        System.out.println("red: " + red + ", green: " + green + ", blue: " + blue);                                                                                                                                                  
    }
} 
```

# php - MySQL：如果表 A 中的特定字段不为空，则连接两个表/从表 B 中的特定行读取所有数据

> ID：10088467
> 
> 赞同：4
> 
> 时间：2012-04-10T12:06:16.367
> 
> 标签：php, mysql, sql, join, inner-join

[http://i.stack.imgur.com/ZRH9c.jpg](http://i.stack.imgur.com/ZRH9c.jpg)（请参阅数据库结构示例图）

大家好，

我正在尝试在两个以特定字母开头的表中搜索单词，但我不知道如何进行正确的连接。

**如果“user_vocabulary”中没有给出 voc_id，我想从 user_vocabulary 中获取单词，但如果有 voc_id，我想从“system_vocabulary”中读取所有数据，其中 user_vocabulary.voc_id=system.vocabulary.id 。**

我用来读取一张表（仅供参考）：SELECT * FROM user_vocabulary WHERE word LIKE '$user_input%' ORDER BY word ASC

我发现了一些或多或少相似的帖子，但似乎无法将它们转换为这个问题。

任何帮助深表感谢。欢呼汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:13:28.550

试试这个

```
SELECT *
FROM user_vocabulary
left join system_vocabulary
on system_vocabulary.voc_id = user_vocabulary.id
WHERE user_vocabulary.word LIKE '%$user_input%' or system_vocabulary.word like     '%$user_input%'
ORDER BY word ASC 
```

已编辑

另一种方法

```
SELECT *
FROM user_vocabulary as uv
, system_vocabulary as sv
WHERE uv.word LIKE '%$user_input%'
or sv.word like '%$user_input%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:33:01.267

这应该根据您的要求工作：

```
SELECT user_vocabulary.id,
   COALESCE(system_vocabulary.word, user_vocabulary.word) word
FROM user_vocabulary
LEFT JOIN system_vocabulary
   ON system_vocabulary.id = voc_id AND voc_id <> 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:59:07.990

您需要取自`user_vocabulary.word`并`system_vocabulary.word`最终出现在输出的同一列中的值。您可以使用以下`IF`功能执行此操作：

```
SELECT
  uv.id,
  IF(uv.voc_id = 0,uv.word,sv.word) AS WORD
FROM user_vocabulary uv
LEFT JOIN system_vocabulary sv
ON (uv.voc_id = sv.id)
HAVING word LIKE '%user_input%'

+------+-------+
| id   | word  |
+------+-------+
|    1 | hat   |
|    2 | home  |
|    3 | hello |
+------+-------+
3 rows in set (0.00 sec) 
```

# c# - 使用 LINQ 将 double[][][] 初始化为 double[1][2][3]

> ID：10088470
> 
> 赞同：2
> 
> 时间：2012-04-10T12:06:40.773
> 
> 标签：c#, linq

我们可以使用 linq 将一个 double[][][] 数组初始化为 double[1][2][3]（这不是正确的语法）吗？

使用 for 循环的一种方法是

```
double[][][] myarr = new double[1][][];
for(int i=0; i<1; i++)
{
    myarr[i] = new double[2][];
    for(int j=0; j<2; j++)
    {
         myarr[i][j] = new double[3];
    }
} 
```

但我想要一个更干净的代码。我试过 Select 但它只填充第一级。如何去做。谢谢

&顺便说一句，这不是家庭作业！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:13:37.953

```
double[][][] threeDimensionArray = 
  Enumerable.Range(0, 1)
            .Select(h1 => Enumerable.Range(0, 2)
                                    .Select(h2 => new double[3])
                                    .ToArray())
            .ToArray(); 
```

但这需要多次`ToArray()`调用来进行内存复制（请参见下面的实现），因此对于大量项目而言，它效率不高，因此这种“优雅”的解决方案不是免费的。顺便说一句，我更喜欢`for`循环解决方案。

`Enumerable.ToArray()`实施：（归功于[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)）

```
// System.Linq.Enumerable
public static TSource[] ToArray<TSource>(this IEnumerable<TSource> source)
{
    if (source == null)
    {
        throw Error.ArgumentNull("source");
    }

     // sll: see implementation of Buffer.ToArray() below
    return new Buffer<TSource>(source).ToArray();
}

// System.Linq.Buffer<TElement>
internal TElement[] ToArray()
{
    if (this.count == 0)
    {
        return new TElement[0];
    }
    if (this.items.Length == this.count)
    {
        return this.items;
    }
    TElement[] array = new TElement[this.count];
    Array.Copy(this.items, 0, array, 0, this.count);
    return array;
} 
```

# android - 当tab改变时，除了onTabChange调用哪个方法

> ID：10088472
> 
> 赞同：0
> 
> 时间：2012-04-10T12:06:48.713
> 
> 标签：android, android-tabhost, onresume

我有一个标签主机和里面的几个标签。每个选项卡都是一个活动。当我更改选项卡时，是否有任何方法可以调用选项卡，例如 onCreate()、onRestart()、onResume()。顺便说一句，我不想​​将 ontabchangedlistener 设置为 tabhost。PS：版本api8

编辑：此外，当一个选项卡被禁用时，它们中的任何一个是否都会被调用（其他一些选项卡出现在屏幕上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:21:56.250

默认情况下不是，但如果您不想使用 OnTabChangedListener，您可以将 OnTouchListener 设置为每个选项卡：

```
for(int i=0;i<tabWidget.getTabCount();i++) {
    tabWidget.getChildAt(i).setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) { 
             //do things 
             return false; 
        } 
    }); 

} 
```

# encoding - 为什么有不同的编码类型？

> ID：10088473
> 
> 赞同：18
> 
> 时间：2012-04-10T12:06:50.697
> 
> 标签：encoding, character-encoding

这是一个菜鸟问题，但我想知道为什么有不同的编码类型以及它们有什么区别（即 ASCII、utf-8 和 16、base64 等）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T12:11:46.143

我相信原因很多，但重点是：“您需要显示（编码）多少个字符？” 例如，如果你住在美国，你可以用 ASCII 走得很远。但在许多国家，我们需要 ä、å、ü 等字符。（如果 SO 仅是 ASCII 或您尝试将此文本读取为 ASCII 编码文本，您会在 ä、å 和 ü 的位置看到一些奇怪的字符。 ) 想想中国、日本、泰国和其他“异国情调”的国家。你可能在世界各地看到的照片上那些奇怪的数字可能只是字母，而不是漂亮的照片。

至于不同编码类型之间的区别，你需要看他们的规范。这是 UTF-8 的内容。

*   [http://www.unicode.org/standard/standard.html](http://www.unicode.org/standard/standard.html)
*   [http://www.utf-8.com/](http://www.utf-8.com/)
*   [http://en.wikipedia.org/wiki/UTF-8#Compared_to_other_multi-byte_encodings](http://en.wikipedia.org/wiki/UTF-8#Compared_to_other_multi-byte_encodings)

我不熟悉 UTF-16。以下是有关差异的一些信息。

*   [http://en.wikipedia.org/wiki/Unicode](http://en.wikipedia.org/wiki/Unicode)
*   [http://en.wikipedia.org/wiki/Unicode_plane](http://en.wikipedia.org/wiki/Unicode_plane)

当需要对二进制数据进行编码时，可以使用 Base64，这些二进制数据需要通过旨在处理文本数据的媒体进行存储和传输。如果您曾经使用 PHP 制作过某种电子邮件系统，那么您可能遇到过 Base64。

*   [http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)
*   [http://www.phpeveryday.com/articles/PHP-Email-Using-Embedded-Images-in-HTML-Email-P113.html](http://www.phpeveryday.com/articles/PHP-Email-Using-Embedded-Images-in-HTML-Email-P113.html)

简而言之：支持将计算机程序的用户界面本地化为多种不同的语言。（编程语言仍然主要由 ASCII 编码中的字符组成，尽管例如在 Java 中可以在变量名中使用 UTF-8 编码，并且源代码文件通常存储为 ASCII 编码文本以外的其他内容，例如 UTF- 8 编码。）

简而言之，第 2 卷：总是当不同的人试图从特定的角度解决某个问题时（或者如果可能的话，甚至没有任何角度），结果可能会大不相同。引用 Joel 的 unicode 文章（链接如下）：“因为字节最多可容纳 8 位，所以很多人开始思考，“天哪，我们可以将代码 128-255 用于我们自己的目的。”问题是，很多的人同时有这个想法，他们对从 128 到 255 的空间应该去哪里有自己的想法。”

感谢 Joachim 和 tchrist 提供的所有信息和讨论。这是我刚刚读到的两篇文章。（这两个链接都在我之前链接的页面上。）自从几年前我上次阅读 Joel 的文章以来，我已经忘记了大部分内容。我希望很好地介绍这个主题。马克戴维斯更深入一点。

*   [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)
*   [http://www.icu-project.org/docs/papers/forms_of_unicode/](http://www.icu-project.org/docs/papers/forms_of_unicode/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T12:59:12.967

有这么多变体的真正原因是[Unicode 联盟](https://en.wikipedia.org/wiki/Unicode_Consortium)来得太晚了。

在《开始》中，内存和存储非常昂贵，并且使用超过 8 位（有时仅 7 位）的内存来存储单个字符被认为是过多的。因此，几乎所有文本都使用每个字符 7 或 8 位存储。显然，8 位内存不足以表示**所有**人类语言的字符。仅代表*一种语言中使用的**大多数*字符（对于某些语言甚至不可能）。因此，许多不同的字符编码旨在允许不同的语言（英语、德语、希腊语、俄语……）以每个字符 8 位*对其文本进行编码。*毕竟，单个文本文件（通常甚至是单个计算机系统）只会以一种语言使用，对吧？

 **这导致了一种情况，即没有单一商定的字符到任何类型的数字的映射。产生了许多不同的、不兼容的解决方案，并且不存在真正的中央控制。一些计算机系统使用[ASCII](https://en.wikipedia.org/wiki/Unicode)，另一些使用[EBCDIC](https://en.wikipedia.org/wiki/EBCDIC)（或更准确地说：EBCDIC 的众多变体之一）、[ISO-8859-*](https://en.wikipedia.org/wiki/ISO/IEC_8859)（或其众多派生词之一）或现在几乎没有听说过的大量编码中的任何一种.

最后，Unicode Consortium 加紧了生成该单一映射的任务（以及**许多**有用但超出此答案范围的辅助数据）。

当 Unicode 联盟最终生成了一个*相当*全面的计算机可能表示的字符列表时（连同许多编码方案将它们编码为二进制数据，具体取决于您的具体需求），其他字符编码方案已经被广泛使用。这大大减慢了 Unicode 及其编码（UTF-8、UTF-16）的采用速度。

如今，如果您想表示文本，最好的办法是使用少数可以表示所有 Unicode 字符的编码之一。UTF-8 和 UTF-16 一起应该足以满足 99% 的所有用例，UTF-32 几乎涵盖了所有其他用例。需要明确的是：所有 UTF-* 编码都可以编码所有有效的 Unicode 字符。但由于 UTF-8 和 UTF-16 是可变宽度编码，它们可能并不适合所有用例。除非您需要能够与*无法*处理这些编码的遗留系统进行交互，否则现在几乎没有理由选择其他任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:18:31.063

最主要的原因是能够展示更多的角色。当互联网还处于起步阶段时，没有人真正提前计划，以为有一天会有来自世界各地所有国家和所有语言的人使用它。所以一个小的字符集就足够了。逐渐发现它是有限的和以英语为中心的，因此需要更大的字符集。**

# android - Tesseract for android，不会编译，open_memstream.c Ubuntu11.04

> ID：10088477
> 
> 赞同：0
> 
> 时间：2012-04-10T12:07:06.150
> 
> 标签：android, android-ndk, tesseract

我已经为 android 使用了 tesseract 工具。我已按照自述文件中的每个步骤进行操作。但是当尝试使用 ndk-build 时，我得到以下信息：

```
make: *** No rule to make target `/jni/com_googlecode_leptonica_android/stdio/open_memstream.c', needed by `obj/local/armeabi/objs/lept/jni/com_googlecode_leptonica_android/stdio/open_memstream.o'.  Stop. 
```

我检查了路径是否正确（LEPTONICA、LIBJPEG、TESSERACT、+_PATH）。它们是正确的，libjpeg 也可以编译（它是 .mk 文件中的第一个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:20:32.153

从[http://code.google.com/p/tesseract-android-tools/](http://code.google.com/p/tesseract-android-tools/)下载项目 没有用，我或我的同事都没有让它工作。但新版本正在源中。如果您检查了那个，您可以按照自述文件中的说明安装它并且它可以工作。 [http://code.google.com/p/tesseract-android-tools/source/checkout](http://code.google.com/p/tesseract-android-tools/source/checkout)

# javascript - Jquery 日期选择器在手机和 PC 上显示不同的日期？

> ID：10088478
> 
> 赞同：1
> 
> 时间：2012-04-10T12:07:09.733
> 
> 标签：javascript, jquery, datetime, mobile, datepicker

我对目前的情况感到困惑。

我的电脑正确显示 Jquery 日期选择器。从手机访问相同的网页显示日期选择器天数偏移 1。

IE

```
10/4/2012 = Tuesday on PC. 
10/4/2012 = Monday on phone. 
```

我检查过的事情：

*   两者都在顶部表示 2012 年 4 月。
*   日期和时间在手机上设置正确。
*   两者都使用 GMT 伦敦时间。
*   两者都从同一页面运行，因此代码相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T11:21:18.383

这是因为 javascript 是客户端而不是服务器端。

所以它需要设备日期。

# java - 使用 facebook-java-api 的 Facebook 聊天应用程序

> ID：10088479
> 
> 赞同：1
> 
> 时间：2012-04-10T12:07:10.213
> 
> 标签：java, facebook

我正在尝试使用[facebook-java-api开发一个](http://code.google.com/p/facebook-java-api/)**桌面聊天应用程序**。但是有人告诉我它不再工作了，因为它在 2 年前就被废弃了。 [Facebook 开发者文档](http://developers.facebook.com/docs/chat/)说它仍然支持使用 XMPP 协议的聊天 API。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:47:09.477

facebook-java-api 已被放弃，我认为[RestFB](http://restfb.com/)现在是 Graph、FQL 和“遗留 REST”api 的事实上的 Java 客户端。但是对于桌面聊天应用程序，您需要使用 Java XMPP 客户端，例如[Smack](http://www.igniterealtime.org/projects/smack/) - facebook-java-api 从不支持 XMPP。

# google-chrome-extension - Google Chrome 扩展 - 如何从热门网站列表中删除条目（多功能框建议）？

> ID：10088481
> 
> 赞同：4
> 
> 时间：2012-04-10T12:07:12.973
> 
> 标签：google-chrome-extension, autocomplete, address-bar

我可以轻松地从 Chrome 的历史记录中删除一个条目：

[http://code.google.com/chrome/extensions/history.html#method-deleteUrl](http://code.google.com/chrome/extensions/history.html#method-deleteUrl)

但已删除的网页仍显示在地址栏中的建议站点中（称为多功能框）。我发现，这些条目在`.config/google-chrome/Default/Top\ Sites`. 如何从该列表中删除单个条目（通过 Google Chrome API）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-30T14:55:58.507

您可以使用以下步骤从列表中删除条目：

1.  开始输入网站名称或其他名称

2.  按下`↓`键盘，应出现所有“记住”条目的列表。

3.  使用`↑`&`↓`突出显示您要删除的条目。

4.  按`delete`。（请注意，在某些情况下，您可能需要使用`shift`+ `delete`、`fn`+ `delete`、`ctrl`+ `delete`（Ubuntu），例如记住的条目位于地址/ URL 栏中）。

5.  重复步骤 2-4，直到满意为止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:51:26.927

您可以使用 topSites API 在领先版本的 Chrome 中*获取它们：* [http ://code.google.com/chrome/extensions/trunk/topSites.html](http://code.google.com/chrome/extensions/trunk/topSites.html)

我会挖掘这些东西：[http ://code.google.com/chrome/extensions/trunk/api_index.html](http://code.google.com/chrome/extensions/trunk/api_index.html)

看起来 chrome.types api 可能有一些有用的东西，但我对我可以提供给你的这个特定的东西没有太多的专业知识:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T06:16:03.757

还有另一种删除方法，如果您使用的是 Windows 机器，请从已安装的程序中卸载“搜索产品”应用程序

# spring-security - 使用带有 spring-security 的静态编织

> ID：10088486
> 
> 赞同：3
> 
> 时间：2012-04-10T12:07:35.477
> 
> 标签：spring-security, aop

同事们，在[春季安全文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html)中，我遇到了以下概念：

> 如果你想保护不是由 Spring 创建的实例（例如使用 new 运算符），那么你需要使用 AspectJ。

任何人都可以向我展示这种用法的可行示例。最好的情况是在静态编织的帮助下完成。

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:14:43.430

Spring Security 代码库中有一个[Aspectj 示例](https://github.com/SpringSource/spring-security/tree/master/samples/aspectj)。它针对`spring-security-aspects`模块进行编译，然后使用：

```
<global-method-security secured-annotations="enabled" mode="aspectj" /> 
```

启用安全注释。代码非常简单——它实际上只是一组[JUnit 测试](https://github.com/SpringSource/spring-security/blob/master/samples/aspectj/src/test/java/sample/aspectj/AspectJInterceptorTests.java)。如果您看一下，您会发现这些测试包括对 Spring-bean 实例和使用`new`操作符创建的实例的测试。

如果您想知道如何`spring-security-aspects`工作，请查看[方面源](https://github.com/SpringSource/spring-security/blob/master/aspects/src/main/java/org/springframework/security/access/intercept/aspectj/aspect/AnnotationSecurityAspect.aj)。

# android - Android：Html 5 视频在活动完成时不会停止

> ID：10088487
> 
> 赞同：2
> 
> 时间：2012-04-10T12:07:37.120
> 
> 标签：android, html, video, webview

我创建了一个 android 活动，其中我有一个 web 视图。我给了 webview 的 html5 文件路径。

Html 5 文件包含一个视频标签，我在其中从服务器调用 android 兼容的 mp4 视频，例如：“http://xxx/test/abc.mp4”。

视频在 webview 中可以很好地播放，但是当视频处于缓冲模式并且我关闭 webview 或通过按 android 平板电脑上的后退按钮关闭活动时，即使活动完成，该视频仍会在背景中播放。

当我关闭活动并且视频处于播放模式（而不是缓冲模式）时，视频会正常停止而没有任何问题。

我试图关闭 webview 线程，如：“http://stackoverflow.com/questions/5946698/how-to-stop-youtube-video-playing-in-android-webview”中所述，但没有运气......

请帮助解决这个问题。我被困在过去 5 天的问题中。

在此先感谢... Ketan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T09:45:40.567

Raneez Ahmed 的回答是正确的。但是，如果你是为 API 级别 11 或更高级别开发，则可以直接访问 WebView.onPause 而无需反射：

```
@Override
public void onPause() {
    webview.onPause();
    super.onPause();
} 
```

记住还要实现 onResume：

```
@Override
public void onResume() {
    super.onResume();
    webview.onResume();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T06:39:41.660

[参考这篇文章](https://stackoverflow.com/a/6230902/1219456)

唯一的办法就是从自己Activity的onPause方法中调用WebView的onPause方法

```
@Override
public void onPause() {
    super.onPause();

    try {
        Class.forName("android.webkit.WebView")
                .getMethod("onPause", (Class[]) null)
                            .invoke(webview, (Object[]) null);

    } catch(ClassNotFoundException cnfe) {
    ...
    } catch(NoSuchMethodException nsme) {
    ...
    } catch(InvocationTargetException ite) {
    ...
    } catch (IllegalAccessException iae) {
        ...
    }
} 
```

# java - 创建一个按钮并以编程方式将其添加到视图中

> ID：10088490
> 
> 赞同：0
> 
> 时间：2012-04-10T12:07:45.497
> 
> 标签：java, android, android-layout

我正在为 Android 创建一个流行的扫雷游戏版本。我正在尝试以编程方式创建一个按钮并将其添加到RelativeLayout。我在这里发现了一些非常相似的东西：[如何以编程方式将按钮逐行添加到布局中？](https://stackoverflow.com/questions/7195056/how-do-i-programmatically-add-buttons-into-layout-one-by-one-in-several-lines)

当我尝试运行它时，我在以下位置收到 NullPointerException：

```
RelativeLayout layout1 = (RelativeLayout) findViewById(R.layout.game); 
```

这是整个代码块：

```
public void create() {
    RelativeLayout layout1 = (RelativeLayout) findViewById(R.layout.game);
    for(int i = 0; i < gridSize; i++) {
        if(grid[i] == 0) { //if grid pos. indicates an empty cell
            Button empty = new Button(this);
            empty.setBackgroundResource(R.drawable.emptybutton); //set background to empty
            empty.setId(i); //set id to value of i
            empty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            layout1.addView(empty); //add the button to the relativeLayout view
            //((Button) findViewById(i)).setOnClickListener(emptyListener); 
        } 
```

提前感谢您的任何回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:58:52.977

我认为你得到一个空白屏幕，因为你没有设置内容视图。我的意思是代码做了它应该做的事情，但是你应该删除顶部的“setContentView()”方法并将它放在最后，然后你应该在关闭 onCreate() 之前将它设置为RelativeLayout方法！像这样的东西：

```
public void create() {
RelativeLayout layout1 = new RelativeLayout(this);
for(int i = 0; i < gridSize; i++) {
    if(grid[i] == 0) { //if grid pos. indicates an empty cell
        Button empty = new Button(this);
        empty.setBackgroundResource(R.drawable.emptybutton); //set background to empty
        empty.setId(i); //set id to value of i
        empty.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        layout1.addView(empty); //add the button to the relativeLayout view
        //((Button) findViewById(i)).setOnClickListener(emptyListener); 
     }
    }
     setContentView(layout1);
   } 
```

另请注意，我稍微更改了 Relativelayout 的声明。我希望这有帮助。:) ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:12:28.067

已设置 Activity 的布局 xml `setContentView(R.layout.xxxx)`？

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game);

... 
```

这个

```
 RelativeLayout layout1 = (RelativeLayout) findViewById(R.layout.game); 
```

应该

```
 RelativeLayout layout1 = (RelativeLayout) findViewById(R.id.relative_id); 
```

`R.id...`用于映射控件，RelativeLayout 是一个控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:16:44.477

您必须输入 RelativeLayout 的 ID，而不是 xml 文件名。尝试使用 RelativeLayout layout1 = (RelativeLayout) findViewById(R.id.yourRelativeLayoutViewID);

# android - 在Android上运行（同步）mina客户端，如何解决ClassNotFoundException

> ID：10088492
> 
> 赞同：1
> 
> 时间：2012-04-10T12:07:57.760
> 
> 标签：android, decode, classnotfoundexception, synchronize, apache-mina

我已经在 PC 上设置了一个 mina(2.0.4) 服务器，它工作正常，因为我在 PC 上编写了一个 mina 客户端来与它通信。然后我在android上实现了一个同步的Mina Client，但是客户端无法解码收到的响应消息。

我是 Java 和 android 的新手，我已经为此付出了 3 天的努力。任何人请帮忙。提前谢谢大家。

我在这里总结了我的部分代码：

首先设置mina客户端。

```
public boolean startMinaClient(){
    MessageCodecFactory factory  = new MessageCodecFactory();
    factory.addMessageDecoder(ResponseDecoder.class);
    factory.addMessageEncoder(TransRequest.class, RequestEncoder.class);
    connector = new NioSocketConnector();
    connector.setConnectTimeoutMillis(30000L);
    connector.getFilterChain().addLast("codec", new ProtocolCodecFilter(factory));

    SocketSessionConfig cfg = (SocketSessionConfig) connector.getSessionConfig();
    cfg.setUseReadOperation(true);
    ConnectFuture future = connector.connect(new InetSocketAddress(server, Config.MINA_SERVER_PORT));
    future.awaitUninterruptibly();
    session = future.getSession();
} 
```

然后发送消息功能。

```
public synchronized MessageBase send(MessageBase message) throws MinaException {

    TransRequest request = new TransRequest(); //TransRequest is a wrapper class, with the to be sent message embedded inside.
    request.setMessage(message);  //This message can be RegisterRequest.
    WriteFuture future = session.write(request);  //write to server.
    future.awaitUninterruptibly();    //wait server reply.
    if(future.getException() != null){
        throw new MinaException(future.getException().getMessage()); //
    }
    ReadFuture readFuture = session.read();  //server replied, and the client try to read the response.
    readFuture.awaitUninterruptibly();
    if(readFuture.getException() != null) {
        throw new MinaException(readFuture.getException().getMessage());
    }
    TransResponse response = (TransResponse) readFuture.getMessage(); //read operation, need to call decoder.
    if(response == null){
        throw new MinaException("No response from MINA server.");
    }
    return response.getMessage();
} 
```

和我的解码器课程。

```
//base class of DecoderBase
public abstract class DecoderBase<T extends MessageBase> extends CodecBase implements MessageDecoder {

    private static CharsetDecoder decoder = CodecBase.getCharset().newDecoder();
    private Class<T> messageType;
    private T decodingMessage;

    protected CharsetDecoder getCharsetDecoder() {
            return decoder;
    }

    public GeoDecoderBase() {
            messageType = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
    }

    public MessageDecoderResult decodable(IoSession session, IoBuffer in) {
            try {
                    decodingMessage = messageType.newInstance();
                    Log.d(TAG, "Decoding messate type: " + messageType.getName()
                                    + ", content: " + decodingMessage.toString());
            } catch (InstantiationException e) {
                    return MessageDecoderResult.NOT_OK;
            } catch (IllegalAccessException e) {
                    return MessageDecoderResult.NOT_OK;
    }

            if (in.remaining() < 8/* message header length */) {
                    return MessageDecoderResult.NEED_DATA;        //data not receive complete.
            }

            int messageCode = in.getInt();
            if (messageCode != decodingMessage.getMessageCode()) {
                    return MessageDecoderResult.NOT_OK;          //ensure receive the right message.
            }

            int messageLen = in.getInt();
            if (in.remaining() < messageLen) {
                    return MessageDecoderResult.NEED_DATA;
            }

            return MessageDecoderResult.OK;
    }

    //start to decode message from iobuffer.
public MessageDecoderResult decode(IoSession session, IoBuffer in,
        ProtocolDecoderOutput out) throws Exception {

    // First decode message header.
    int messageCode = in.getInt();
    decodingMessage.setMessageCode(messageCode);    //decodingMessage is the message instance.
    int messageLen = in.getInt();   

    int start = in.position();

    DecodeMessageBody(in, decodingMessage);       //decode the embedded message inside TransResponse.

    int actlen = in.position() - start;
    if (actlen != messageLen) {
        Log.e(TAG, Config.ERROR_STRING + messageType.getName() + " decodes error length. actlen=" + actlen);
        return MessageDecoderResult.NOT_OK;
    }

    out.write(decodingMessage);
    return MessageDecoderResult.OK;
}

protected abstract void DecodeMessageBody(IoBuffer in, final T message)
        throws Exception;
} 
```

响应消息解码器。

```
public class ResponseDecoder extends DecoderBase<TransResponse> {

    private String TAG = "ResponseDecoder";

    @Override
    protected void DecodeMessageBody(IoBuffer in, TransResponse message)
            throws Exception {
            int messageCode = in.getInt();
            message.setCode(messageCode);

            MessageBase base = null;
            switch(messageCode){
            case MessageCode.REGISTER_RESPONSE:
                    base = (MessageBase) in.getObject();
                    break;
            default:
                    Log.e(TAG, Config.ERROR_STRING + "unknown Message Code:0x%x" + messageCode);
                    break;
            }
            message.setMessage(base);
    } 
```

我可以将 TransRequest(RegisterRequest) 从 android 客户端发送到 mina 服务器，并且可以接收 TransResponse(RegisterResponse)。但是客户端总是无法解码，错误是：

```
java.lang.ClassNotFoundException: com.geoxy.message.user.RegisterResponse 
(Hexdump: 12 00 00 2A 00 00 00 D4 12 04 00 02 00 00 00 CC AC ED 00 05 73 72 01 00 27 63 6F 6D 2E 67 
65 6F 78 79 2E 6D 65 73 73 61 67 65 2E 75 73 65 72 2E 52 65 67 69 73 74 65 72 52 65 73 70 6F 6E 73 
65 78 72 01 00 1D 63 6F 6D 2E 67 65 6F 78 79 2E 63 6F 6D 6D 6F 6E 2E 52 65 73 70 6F 6E 73 65 42 61 
73 65 78 72 01 00 1C 63 6F 6D 2E 67 65 6F 78 79 2E 63 6F 6D 6D 6F 6E 2E 4D 65 73 73 61 67 65 42 61 
73 65 78 70 12 04 00 02 73 72 01 00 2D 63 6F 6D 2E 67 65 6F 78 79 2E 63 6F 6D 6D 6F 6E 2E 4D 65 73 
73 61 67 65 42 61 73 65 24 4D 65 73 73 61 67 65 53 69 67 6E 61 74 75 72 65 78 70 00 00 00 00 00 00 
00 07 00 00 00 00 00 00 00 00 71 00 7E 00 03 00 70 00 00 00 00 00 00 00 07) 
```

消息头 12 00 00 2A 00 00 00 D4 12 04 00 02 00 00 00 CC 是正确的。（2 个消息代码/长度对）。

我的消息类。

```
public abstract class MessageBase implements Serializable {
    private static final long serialVersionUID = -6083872909378830262L;
    private MessageSignature signatures = new MessageSignature();
    private int messageCode;

    public MessageBase(){}  //c-tor

    //inner class.
    private class MessageSignature implements Serializable {
            private static final long serialVersionUID = -4028675440079310028L;
            long  para;

        public MessageSignature(){} //c-tor
    }
}

public abstract class ResponseBase extends MessageBase {
    private static final long serialVersionUID = -1007022532151329442L;
    protected byte result;
    protected String indication = null;    

    public ResponseBase(){} //c-tor
}
public class RegisterResponse extends ResponseBase {
    private long userId;

    public RegisterResponse() {} //c-tor
} 
```

我调试到mina源代码。异常代码行在 IoBuffer:getObject() 方法中：

```
IoBuffer:getObject() 

@Override
public Object getObject(final ClassLoader classLoader)  
        throws ClassNotFoundException {
**//classLoader is passed Thread.currentThread().getContextClassLoader()**
    if (!prefixedDataAvailable(4)) {
        throw new BufferUnderflowException();
    }

    int length = getInt();
    if (length <= 4) {
        throw new BufferDataException(
                "Object length should be greater than 4: " + length);
    }

    int oldLimit = limit();
    limit(position() + length);
    try {
        ObjectInputStream in = new ObjectInputStream(asInputStream()) {
            @Override
            protected ObjectStreamClass readClassDescriptor()
                    throws IOException, ClassNotFoundException {
                int type = read();
                if (type < 0) {
                    throw new EOFException();
                }
                switch (type) {
                case 0: // NON-Serializable class or Primitive types
                    return super.readClassDescriptor();
                case 1: // Serializable class
                    String className = readUTF();   //**className is correct. "com.....RegisterResponse"**
                    Class<?> clazz = Class.forName(className, true,
                            classLoader);           //**run to exception.**
                    return ObjectStreamClass.lookup(clazz);   
                default:
                    throw new StreamCorruptedException(
                            "Unexpected class descriptor type: " + type);
                }
            }

            @Override
            protected Class<?> resolveClass(ObjectStreamClass desc)
                    throws IOException, ClassNotFoundException {
                String name = desc.getName();
                try {
                    return Class.forName(name, false, classLoader);  
                } catch (ClassNotFoundException ex) {
                    return super.resolveClass(desc);
                }
            }
        };
        return in.readObject();
    } catch (IOException e) {
        throw new BufferDataException(e);
    } finally {
        limit(oldLimit);
    }
} 
```

异常代码行：readClassDescriptor() 函数。

```
Class<?> clazz = Class.forName(className, true,
                        classLoader);           //**run to exception.** 
```

并且我已经将所有请求/响应类放在与服务器端代码中相同的包名称下。发送/接收在 AsyncTask 中运行。我也尝试在我的包中包含 mina 源代码，但没有解决。

我怀疑以下几点。

> 1.  我可以发送 Request 出来，它在编码时调用 IoBuffer.putObject ，它可以加载 Request 类。为什么不能加载响应类。
> 2.  我发现 Thread.currentThread().getContextClassLoader() 似乎很奇怪。它是一个 PathClassLoader，其中 libPath 为空，mLibPaths 只包含“/system/lib/”，路径为“.”，不像其他类加载器，它可以从 .apk 文件加载类。使用此 ClassLoader，我认为它无法加载 RegisterResponse 类。这是线程问题吗？-- 在 nio 处理器中运行的解码过程。

# c++ - 如何将 jpg 文件加载到 CBitmap (visual c++ 6.0) 中？

> ID：10088494
> 
> 赞同：4
> 
> 时间：2012-04-10T12:08:12.980
> 
> 标签：c++, visual-c++, mfc

如何将 jpg 加载到使用 Visual c++ 6.0 且无权访问 CImage 的 CBitmap 中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:27:07.387

我会简单地调用 OleLoadPicturePath api 来加载不仅 jpg 还加载其他常见格式。

将其加载到 IPicture 对象后，您可以调用 get_Handle 来获取 HBITMAP 的句柄。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:17:29.563

您不能，或者至少没有内置方式。看看 CxImage，你可能可以让它工作，特别是当你只需要 jpg 支持时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:19:06.160

这种转换很复杂，所以我建议使用外部库，看看[这个](http://www.imagemagick.org/Magick++/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T14:53:16.857

```
CBitmap bmp;
HANDLE h = ::LoadImage(NULL, _T("c:\\MyImage.jpg"), IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
bmp.Attach(h); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T14:58:23.290

没有我知道的本地方式。我一直将[FreeImage](http://freeimage.sourceforge.net/)用于 JPG 和 PNG - 它非常强大，FAQ 中有关于如何将 PNG 加载到 HBITMAP 中的示例代码（它对 JPG 的工作方式完全相同）。

来自经验的警告-如果您将 JPG 存储为资源，请确保创建“JPG”资源类型并将其存储，不要尝试将其添加为 BITMAP 资源，否则您将拥有尝试加载它的各种问题。我知道这听起来很明显，但我花了一段时间才弄清楚。

# jquery - jquery重新排序div

> ID：10088496
> 
> 赞同：9
> 
> 时间：2012-04-10T12:08:13.870
> 
> 标签：jquery, html

我有 3 个 div 想要颠倒文档准备好的顺序

```
<div id="block-1">First</div>
<div id="block-2">Second</div>
<div id="block-3">Third</div> 
```

我怎样才能在 jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T12:15:56.140

```
<div id="parent">
<div id="block-1">First</div>
<div id="block-2">Second</div>
<div id="block-3">Third</div>
</div> 
```

并在 Jquery 中尝试这个

```
$('#parent > div').each(function() {
    $(this).prependTo(this.parentNode);
});​ 
```

您可以在 jsfiddle [http://jsfiddle.net/N7PGW/中查看示例](http://jsfiddle.net/N7PGW/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-10T12:15:15.220

只需使用

```
$('#block-2').insertBefore('#block-1');
$('#block-3').insertBefore('#block-2'); 
```

小提琴示例：http: [//jsfiddle.net/2DUXF/](http://jsfiddle.net/2DUXF/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T12:14:40.403

这将反转 id 为“div1”的 div 中的所有 div

```
 $(function(){
    var items=$("#div1 div").toArray();
        items.reverse();
        $.each(items,function(){
           $("#div1").append(this); 
        });     
    });​ 
```

这是 jsFiddle [http://jsfiddle.net/bCAVz/8/](http://jsfiddle.net/bCAVz/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:39:55.913

```
$(
   $("div[id|=block]")
      .slice(1)
      .get()
      .reverse()
 )
    .insertBefore("div[id|=block]:first"); 
```

[http://jsfiddle.net/8adwS/](http://jsfiddle.net/8adwS/)

另请注意，您可以将数组反向语法添加到 jQuery 函数语法中，这将为您节省一个选择器。

# php - Maxminds GeoIP php根据国家代码重定向

> ID：10088499
> 
> 赞同：0
> 
> 时间：2012-04-10T12:08:21.400
> 
> 标签：php, redirect, geoip

我已经为此工作了一个星期，并用我的 .htaccess 文件进行了尝试，但即使这在 Firefox 中也基本不起作用，它的说法...

> 页面未正确重定向 Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。此问题有时可能是由禁用或拒绝接受 cookie 引起的。

在铬它的说法......

> 这个网页有一个重定向循环 [https://www.website.com/row/index.php](https://www.website.com/row/index.php)的网页导致了太多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

我从 Maxminds 网站的 GeoIP PHP API 将 GeoIP.dat 和 geoip.inc 文件上传到我的主机上的一个目录，然后我使用以下 php 代码块编辑了我的 index.php 文件....

```
<?php
require_once("geoIP/geoip.inc");
$gi = geoip_open('geoIP/GeoIP.dat', GEOIP_MEMORY_CACHE);
$country = geoip_country_code_by_addr($gi, $_SERVER['REMOTE_ADDR']);
// prints the country code  your visitor is in
$my_countriesrow = array('AD','AE','AF','AG','AI'.....ect);
$my_countrieseuro = array('AN','AT','BA','BE','BG','BY','CH'.....ect);
/* $my_country = array('GB','UK'); */
if (!in_array(strtolower($country), $my_countriesrow)) {
header('Location: https://www.website.com/row/index.php');
exit();
}
else if(!in_array(strtolower($country), $my_countrieseuro)){
header('Location: https://www.website.com/euro/index.php');
exit();
}
else {
header('Location: https://www.website.com/index.php');
exit();
}
// the end
geoip_close($gi);
?> 
```

我认为这可能与我的 .htaccess 文件有关，因为它包含在其中......

```
# Make all requests have www in them
 RewriteEngine On
 RewriteCond %{HTTP_HOST} ^website\.com
 RewriteRule ^(.*)$ https://www.website.com$1 [R=permanent,L] 
```

不知道还能做什么已经把我所有的头发都拔掉了！非常感谢你们！

问候-菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:47:08.250

更新

假设此代码包含在“https://www.website.com/row/index.php”中

如果我从 BE 访问此页面，将触发第一个 if 语句，并一遍又一遍地将我带到同一页面。

更新：

这样的事情可能会阻止循环：

```
require_once("geoIP/geoip.inc");
$gi = geoip_open('geoIP/GeoIP.dat', GEOIP_MEMORY_CACHE);
$country = geoip_country_code_by_addr($gi, $_SERVER['REMOTE_ADDR']);
$my_countriesrow = array('AD','AE','AF','AG','AI');
$my_countrieseuro = array('AN','AT','BA','BE','BG','BY','CH');

/* if you got redirected, do not redirect again */
if (!isset($_GET['redirected'])) {
    if (!in_array(strtolower($country), $my_countriesrow)) header('Location: https://www.website.com/row/index.php?redirected');
    else if(!in_array(strtolower($country), $my_countrieseuro)) header('Location: https://www.website.com/euro/index.php?redirected');
    else header('Location: https://www.website.com/index.php?redirected');
}

geoip_close($gi); 
```

# php - 如何通过 MVC 中的 URL 访问控制器

> ID：10088500
> 
> 赞同：0
> 
> 时间：2012-04-10T12:08:22.263
> 
> 标签：php, model-view-controller

我还没有找到一个非常简单的 MVC 框架。框架如何使仅通过 URL 访问控制器成为可能？我认为这与该有关，`QUERY_STRING`但不是应该有一个`?`吗？

```
http://localhost/public/controllername 
```

位于`localhost/public`：

```
C:\wamp\www\public\ 
```

其中包含一个 index.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:14:23.087

通常，这是通过使用`.htaccess`重写（[Apache mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）来完成的：

1.  您使用`.htaccess`重写将不是静态文件的每个查询定向到您的主入口点，例如`index.php`，假设您使用 PHP 作为您的服务器端语言。
2.  然后从内部解析 URI`index.php`并在应用程序中建立一些路由。

**快速示例：**

`.htaccess`文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

`index.php`文件：

```
$uri = $_SERVER['REQUEST_URI'];
$parts = explode('/', $uri);
// assuming you want /controller/action/* mapping
$controller = 'index'; // default
$action = 'index'; // default
if (isset($parts[0])) $controller = $parts[0];
if (isset($parts[1])) $action = $parts[1];
// now, you'd try to establish some logic to test wether this controller/action
// actually exists, and load it. I'll leave this up to you. 
```

当然，这只是一个快速粗略的示例，但应该让您了解如何执行此操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T12:12:01.470

它可以解析 $_SERVER['REQUEST_URI']

# ruby-on-rails - 检测设计会话何时到期

> ID：10088501
> 
> 赞同：4
> 
> 时间：2012-04-10T12:08:23.860
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, session, devise

我想使用 devise 和`:timeoutable`.

目前，`:timeoutable`它正在按预期工作，并在指定的非活动时间段后将用户重定向到登录页面，但除此之外，我们还希望在发生这种情况时进行记录，以帮助优化我们的超时时间。

（显然，除非用户明确注销，否则所有会话都会超时。我们将检查自上次活动以来的时间，以确定它是自然超时还是更可能是我们设置的超时时间太短的结果。）

是否有我可以挂钩的事件或其他检测会话超时的方法`SessionController`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:40:48.440

我没有看到任何类型的钩子，但您可以覆盖设计使用的可超时模块中的代码：

```
module Devise
  module Models
    module Timeoutable
      def timedout?(last_access)
        #  your custom code goes into this method
        return false if remember_exists_and_not_expired?
        !timeout_in.nil? && last_access && last_access <= timeout_in.ago
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:09:13.993

我认为您需要做的是记录用户明确单击“注销”的时间。因为`:timeoutable`有一个默认时间段，用户会话将在该时间段后自动过期。

您可以通过创建`Sessions_Controller`继承自[`Devise::SessionsController`](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb). 记录当前时间后，不要忘记做`super`.

# java - 如何知道从另一个 android 应用程序读取的可能参数

> ID：10088503
> 
> 赞同：3
> 
> 时间：2012-04-10T12:08:24.943
> 
> 标签：java, android, android-intent, parameter-passing

我正在制作一个应用程序来启动其他在 Android 智能手机上安装的应用程序。

基本上，这是我用来启动我自己制作的另一个应用程序的代码，带有一个参数。

应用 1：

```
PackageManager pm = getApplicationContext().getPackageManager();
Intent appStartIntent = pm.getLaunchIntentForPackage(mypackage);
    appStartIntent.putExtra("message", s);

    if (null != appStartIntent) {
        getApplicationContext().startActivity(appStartIntent);
    } 
```

在我的其他应用程序中，我如何获取参数：

应用 2：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Bundle extras = getIntent().getExtras(); 
    String result;
    try {
        result= (String) extras.getString("message");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        recup = "nothing received";
    }

    Toast.makeText(getApplicationContext(), recup, Toast.LENGTH_SHORT).show();
} 
```

这里的问题是，我们需要知道第二个应用程序可以接收一个名为“消息”的参数。

这是一个问题：是否有可能从应用程序 1 中知道应用程序 2 所期望的所有可能参数？如果是，是否有可能知道例如我手机上安装的任何应用程序所接受的参数？（例如：Handcent、Facebook、纬度...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:14:51.670

Android 没有定义允许您检索应用程序期望的参数的元数据 API。因此，不可能做你想做的事。您将不得不依赖每个应用程序的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:37:31.977

这件事发生在我身上，所以我知道的最好的方法是反编译目标应用程序，并查看所需的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:27:28.917

您可以尝试反射以查看类内部并获取其方法和预期参数。不确定这是否能完全解决您的问题，但这是一个开始......

# iphone - 如何以编程方式检查麦克风和扬声器是否被其他应用程序使用

> ID：10088504
> 
> 赞同：2
> 
> 时间：2012-04-10T12:08:42.610
> 
> 标签：iphone, objective-c, audio, core-audio

我想检查其他应用程序是否正在使用麦克风和扬声器在 iPhone 上。有可能这样做吗？

我使用了下面的代码。

```
 UInt32 otherAudioIsPlaying;                                   
  UInt32 propertySize = sizeof (otherAudioIsPlaying);
  OSStatus result = AudioSessionGetProperty (kAudioSessionProperty_OtherAudioIsPlaying,
                                                 &propertySize,&otherAudioIsPlaying); 
```

但是，当我刚刚打开 VoiceMemos 时，还没有按下开始按钮，结果是 otherAudioIsPlaying 为 1。

# mysql - 即使不应该，mySQL 也会返回空？

> ID：10088513
> 
> 赞同：0
> 
> 时间：2012-04-10T12:08:59.233
> 
> 标签：mysql

我是一个完整的 mySQL 新手，但我不知道如何搜索这个问题的答案，所以我把它带到这里：

```
 DESCRIBE rParam;
            +----------------+---------------+------+-----+---------+-------+
            | Field          | Type          | Null | Key | Default | Extra |
            +----------------+---------------+------+-----+---------+-------+
            | p              | float         | YES  |     | NULL    |       |
            | d              | float         | YES  |     | NULL    |       |
            | LTP            | float         | YES  |     | NULL    |       |
            | LTD            | float         | YES  |     | NULL    |       |
            | alpha          | float         | YES  |     | NULL    |       |
            | N              | smallint(6)   | YES  |     | NULL    |       |
            | g              | float         | YES  |     | NULL    |       |
            | a              | float         | YES  |     | NULL    |       |
            | seed           | float         | YES  |     | NULL    |       |
            | startingWeight | float         | YES  |     | NULL    |       |
            | path           | varchar(1000) | YES  | UNI | NULL    |       |
            | type           | varchar(100)  | YES  |     | NULL    |       |
            +----------------+---------------+------+-----+---------+-------+
            12 rows in set (0.00 sec)

            SELECT p FROM rParam GROUP BY p;

            +--------+
            | p      |
            +--------+
            |      0 |
            |  0.001 |
            |  0.002 |
            |  0.003 |
            |  0.004 |
            |  0.005 |
            | 0.0075 |
            |  0.008 |
            |   0.01 |
            |  0.012 |
            | 0.0125 |
            |  0.014 |
            |  0.015 |
            |   0.02 |
            |  0.025 |
            |   0.03 |
            |  0.035 |
            |   0.04 |
            |   0.05 |
            |    0.1 |
            |    0.2 |
            |    0.3 |
            |    0.4 |
            |    0.5 |
            |    0.6 |
            |    0.7 |
            +--------+
            26 rows in set (0.00 sec) 
```

我可以获得一种查询的结果：

```
 SELECT p FROM rParam WHERE p=0.5 GROUP BY p;
            +------+
            | p    |
            +------+
            |  0.5 |
            +------+
            1 row in set (0.00 sec) 
```

但是，更改我要求的 p 值：

```
 SELECT p FROM rParam WHERE p=0.6 GROUP BY p;
            Empty set (0.00 sec) 
```

但是我们可以从第一个输出中清楚地看到有 p=0.6 的行？这是大多数 p 值的问题 - 为什么 mySQL 返回空集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:12:42.367

这听起来像是一个舍入错误。浮点数不能总是以二进制形式精确表示。尝试应用一些 epsilon：

```
SELECT DISTINCT p
FROM rParam
WHERE ABS(p - 0.6) < 0.00001 
```

如果您想要精确的小数，请使用`DECIMAL`而不是`FLOAT`作为列数据类型。

附言。可能更好地使用`SELECT DISTINCT`而不是`GROUP BY`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:15:13.197

值 0.6 不能完全存储在浮点数中，但 0.5 可以。浮点数以二进制形式存储。1/2 可以精确存储，也可以存储 1/4 和 3/4、1/8、3/8、5/8 和 7/8。但是 0.6 不能写成分母上 2 次方的分数。所以它不能完全以二进制格式存储。

# fortran - Fortran 代码的 gprof 输出中的 _IO_wfile 是什么？

> ID：10088515
> 
> 赞同：4
> 
> 时间：2012-04-10T12:09:04.100
> 
> 标签：fortran, intel-fortran, gprof

我有一些用英特尔 fortran 编译器 ifort 编译的 fortran 代码。当我使用 gprof 进行配置文件测试时，我发现大部分时间都用于 IO 操作，我想找到文件的结尾，但我找不到更多关于此的文档：

```
index % time    self  children    called     name
                                                 <spontaneous>
[1]     20.6    0.07    0.00                 _IO_wfile_seekoff [1]
-----------------------------------------------
                                                 <spontaneous>
[2]     20.6    0.07    0.00                 sforcepf_ [2]
-----------------------------------------------
                                                 <spontaneous>
[3]     20.6    0.02    0.05                 _IO_wfile_underflow [3]
                0.01    0.04  258716/258717      strncmp [4]
-----------------------------------------------
                0.00    0.00       1/258717      _IO_wdefault_doallocate [15]
                0.01    0.04  258716/258717      _IO_wfile_underflow [3]
[4]     14.7    0.01    0.04  258717         strncmp [4]
                0.04    0.00 3104592/3109256     strerror_r [5]
-----------------------------------------------
                0.00    0.00    4664/3109256     __strcmp_sse42 [14]
                0.04    0.00 3104592/3109256     strncmp [4]
[5]     11.8    0.04    0.00 3109256         strerror_r [5]
----------------------------------------------- 
```

所以，问题是，这个 IO 是特定于 Linux、ifort 还是 fortran 的？我正在尝试优化此代码，但在 google 中没有找到有关此术语的有用信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T13:08:51.667

您编写 Fortran 语句。英特尔 Fortran 编译器将这些语句翻译成汇编程序，包括对系统函数的调用。例如，`strncmp`是一个比较部分字符串的 ISO C 标准函数。所以看起来您正在编写 Fortran 语句来比较字符串，而英特尔 Fortran 编译器正在调用现有函数来实现比较。其中一些系统功能本身将（部分）通过调用您平台上提供的更基本功能来实现。

`gprof`正在向您显示对在您的编译产品中引用的函数的调用。您看到的大部分内容都是特定于 Linux I/O 的——在 Windows 机器上，I/O 将使用具有不同名称的类似功能。您看到的某些内容可能特定于英特尔编译器，所有英特尔编译器都对某些操作使用相同的（英特尔创建的）函数，并且该函数使用特定于平台的低级函数。

除非您准备重写这些低级函数，并冒着为使用相同函数的其他程序搞砸它们的风险，否则您可以做的唯一优化就是减少调用它们的频率。例如，如果您有理由认为读取文件末尾是一项昂贵的 I/O 操作，并且如果您的程序策略是读取文件直到您读取文件末尾然后处理出现的错误，那么您可能想要实施一个卓越的计划策略。这将比重写处理策略后果的低级 I/O 例程更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:52:46.617

假设您用任何语言编写以下内容

```
loop for a long time
  write something to somewhere 
```

并使用*gprof*对其进行分析。

*gprof*在 IO 或任何其他阻塞状态期间暂停采样。这个程序做的很少，周期，但它确实花费的周期中，大部分都花在进出启动 IO 并等待它完成的内置库例程中。

因此，如果您的程序是这样的，那么您所看到的也就不足为奇了。

[这个问题还有很多。](https://stackoverflow.com/a/1779343/23771)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T09:33:12.117

看起来您正在看到 Fortran I/O 操作。格式化的 I/O 在`ifort`. 如果使用标准输入/标准输出重定向，情况会更糟；更糟糕的是管道——英特尔文档特别警告不要这样做。`gfortran`几乎没有那么糟糕，但仍然很慢。

一些可能性是：

*   尝试做尽可能少的 I/O 调用（例如将它们移出循环）
*   避免重定向和直接读/写文件
*   check`blocksize`和`buffercount`其他与 I/O 相关的选项`open()`

如果这还不够，并且 I/O 是您的主要瓶颈，您可以考虑：

*   在 中查看流 I/O `ifort`，它更快，并且您可以自己做缓冲之类的事情，以避免进行多次调用。但是，它可能会引入可移植性问题，因为其他编译器可能还不支持它或以不同的方式执行它。不要在标准输入/输出上执行此操作（可能在 ifort 中工作，但它没有记录，并且不适用于其他编译器）。
*   用于`iso_c_binding`调用 C 函数——例如，如果您正在写入标准输出，则可以`puts()`从 libc 调用。由于它是标准的，因此它甚至更快并且实际上非常便携，事实上，我在每个操作系统（Win32/linux64/sparc solaris）上完成的每个编译器都需要（并自动链接）libc；但它相当难看，而且您必须自己处理诸如空终止之类的事情（例如，通过编写包装函数），这会使代码变得模糊并可能导致错误。
*   不要在同一个文件中将这些方法与常规 I/O 混合使用！！

If you are doing string comparisons explicitly in your code, these would eventually call `strncmp()` too. String operations are also a bit slow in ifort (although nowhere near as bad as I/O), so if you are doing *A LOT* of comparisons, you might gain a few seconds by calling `strncmp()` directly, but I would advice against that -- the gain is not that large, and again, it obscures the code.

# netbeans - 在 Netbeans IDE 中找不到驱动程序

> ID：10088521
> 
> 赞同：6
> 
> 时间：2012-04-10T12:09:19.387
> 
> 标签：netbeans, netbeans-7

我已经在这里、这里和这里阅读[了](https://stackoverflow.com/questions/4533317/netbeans-with-glassfish-have-no-suitable-driver-found-for-mysqljdbc)所有[可能](https://stackoverflow.com/questions/9622105/java-sql-sqlexception-no-suitable-driver-found-for-netbeans)的[答案](https://stackoverflow.com/questions/2839321/java-connectivity-with-mysql/2840358#2840358)。我相信我在其他地方有问题，它也可能对其他人有用。

我有一个 Java Servlet，它在 Eclipse IDE 中运行良好，但后来我将项目转移到了 Netbeans。我在库中导入了 MySQL JDBC 驱动程序并使用下面的代码进行连接

```
connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/bolsms", "root", "@#$5869@#$"); 
```

但我收到此错误**没有找到适合 jdbc:mysql://localhost:3306/bolsms 的驱动程序**

我找了两天的答案，社区会感谢我没有重复这个问题。

**编辑1：**

![库文件夹中的 MySQL JDBC 驱动程序](../Images/e292838e94a63c2e3e6773821a7fff1c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:43:45.553

当您在 Tomcat 中使用它时，您必须显式加载 jdbc 驱动程序。我在 Tomcat 的 servlet 中遇到了同样的错误。并添加`Class.forName("com.mysql.jdbc.Driver");`解决它。

我认为的另一件事是将 jar 文件放入您的 .jar 文件中`WEB-INF/lib`，然后在您的项目属性中的 Libraries 中，添加您存储在`WEB-INF/lib`.

要创建`lib`目录，请右键单击`WEB-INF`并选择`New -> Folder...` If you don't see `Folder`choose `Other`then 在新窗口中`Other`再次选择 和`Folder`。

Tomcat / JDBC 问题[在此处](http://issues.apache.org/bugzilla/show_bug.cgi?id=48214)被引用以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:53:59.383

在您的代码中包含以下代码：

```
Class.forName("com.mysql.jdbc.Driver");//load driver
connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/bolsms", "root", "@#$5869@#$");//connect to the database 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:40:39.020

您也可以使用 jsp 标签 <%@page import='com.mysql.jdbc.*'%> 或通常的方式导入它 Class.forName("com.mysql.jdbc.Driver").newInstance(); 在jsp页面的try catch中。祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T23:11:12.370

检查以确保您的 mysql-connector-java-(version)-bin.jar 在这里：

C:\Murach\Servlets 和 JSP\jsp2_allfiles\servlet_jsp\netbeans\ex_starts\ch14sqlGateway\build\web\WEB-INF\lib

还要检查它是否在这里：

C:\Murach\Servlets 和 JSP\jsp2_allfiles\servlet_jsp\netbeans\ex_starts\ch14sqlGateway\web\WEB-INF\lib

如果不是，请将您的 mysql 驱动程序 jar 粘贴到这些目录中，看看是否有效。

之后，确保您明确加载驱动程序：

Class.forName("com.mysql.jdbc.Driver");

# java - 相互添加双打

> ID：10088522
> 
> 赞同：-2
> 
> 时间：2012-04-10T12:09:19.463
> 
> 标签：java, double

我在编写一种方法来计算大学项目的一些订单总数时遇到了麻烦。Eclipse 说有一个错误，仅详细说明*+*是无效的 AssignmentOperator。

一些细节：

*   没有隐私问题。
*   *数量*是一个整数。
*   *getPrice()*返回一个双精度值。
*   *总计*是双倍

这可能是一件非常简单的事情，但正因为如此，四处寻找答案非常困难。

* * *

```
public double calculateTotal(){
    for(OrderItem currentItem:items){
        for(int i=0;i<currentItem.quantity;i++){
            total+currentItem.product.getPrice();
        }
    }
    return total;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T12:10:37.280

我认为你需要`+=`：

```
public double calculateTotal(){
    for(OrderItem currentItem:items){
        for(int i=0;i<currentItem.quantity;i++){
            total += currentItem.product.getPrice();
        }
    }
    return total;
} 
```

在您的示例中，您只是将两个数字相加，而对结果不做任何事情。您需要将结果分配给变量。使用`+=`是简写`total = total + currentItem.product.GetPrice();`

您可能还需要初始化`total`变量；但也许它在你班上的其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:10:51.873

你不能只添加两个值而不对结果做一些事情。我怀疑你的意思是

```
 total += currentItem.product.getPrice(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:10:52.913

而不是`+`使用`+=`：

```
total += currentItem.product.getPrice(); 
```

# mysql - 在where子句中的MYSQL子选择

> ID：10088524
> 
> 赞同：2
> 
> 时间：2012-04-10T12:09:27.300
> 
> 标签：mysql, database, subquery

我对这种简单的代码和平感到头疼，它不想工作，而且我想不出任何其他解决方案......

你能帮忙让它工作吗？

```
SELECT chart FROM chart WHERE (select count(user_id) FROM users join charts ON
user_id=charts.UID and charts.chart=chart WHERE INET_NTOA(user_ip)='127.0.0.1')=0; 
```

以下列涉及 3 个表：

```
chart(
chart int(5)
);

charts(
UID int(11),
chart int(5)
);

`users` (
`user_id` int(11),
`user_ip` int(10)
); 
```

关键是第一次选择的“图表”列应该传递给子查询到charts.chart=chart，但子查询最终会与自身进行比较，即chart=chart - 总是正确的。

我知道它不会那样工作......但我真的想不出任何其他方式。我想做的事情有什么办法吗？

编辑1：基本上我需要一个反向选择：

```
 select chart.chart from chart join charts on chart.chart=charts.chart join users
  on user_id=charts.UID and INET_NTOA(user_ip)='127.0.0.1'; 
```

此查询返回由用户使用给定 ip 标记的图表，例如：1、4、5、9。但我需要选择未标记的图表，即：2、3、6、7、8、10等等...

编辑2：我现在正在寻找某种否定加入。我认为这可以，但我不知道如何使用它。同时做一些研究...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:42:15.993

尝试：

```
SELECT c.chart FROM chart c
LEFT JOIN
( SELECT cn.chart FROM chart cn
  JOIN charts cs ON cn.chart = cs.chart
  JOIN users u ON u.user_id = cs.UID
  WHERE user_ip = 2130706433 ) charts_localhost
ON c.chart = charts_localhost.chart
WHERE charts_localhost.chart IS NULL 
```

请注意，而不是`INET_NTOA(user_ip)='127.0.0.1'`更好地使用

`user_ip = 2130706433`这是等效的，但也是索引友好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:14:35.427

您是否尝试过使用别名？

`select a.chart from chart a where (select count(user_id) from users join charts on user_id=charts.UID and charts.chart=a.chart where INET_NTOA(user_ip)='127.0.0.1')=0;`

我不知道它是否适用于 MYSQL，但我认为它适用于 MSSQL 和 Oracle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:15:06.970

我想这是一个命名问题......尝试这样做：

```
SELECT c.chart FROM chart c
WHERE (
    SELECT COUNT(u.user_id) FROM users u
    INNER JOIN charts ch
     ON u.user_id = ch.UID 
     AND ch.chart = c.chart
    WHERE INET_NTOA(user_ip)='127.0.0.1'
       ) = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-26T10:22:22.123

您可以使用 where select 子句进行过滤：

```
SELECT TS.*, T.* 
FROM tbl_teams as T
LEFT JOIN tbl_teamstats TS 
    ON TS.tbl_teams_id = T.id
WHERE 
TS.id = (
        SELECT TS.id FROM tbl_teamstats TS 
        WHERE TS.tbl_teams_id = T.id
        ORDER BY TS.id DESC
        LIMIT 1
    ) 
```

# iphone - 使用 for 循环将对象添加到字典中

> ID：10088529
> 
> 赞同：0
> 
> 时间：2012-04-10T12:10:04.463
> 
> 标签：iphone, ios, for-loop, nsdictionary, nsmutabledictionary

在我的程序中，我想使用 for 循环将 20 个对象添加到字典中，所以我做到了

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    self.responseData = nil;

    NSArray* latestLoans = [(NSDictionary*)[responseString JSONValue] objectForKey:@"loans"];
    NSLog(@"%i",[latestLoans count]);

parsedDict = [[NSMutableDictionary alloc] init];

for (int i=0; i<[latestLoans count]; i++) {

    //get latest loan
    NSDictionary* loan = [latestLoans objectAtIndex:i];

    //fetch the data
    NSNumber* fundedAmount = [loan objectForKey:@"funded_amount"];
    NSNumber* loanAmount = [loan objectForKey:@"loan_amount"];
    float outstandingAmount = [loanAmount floatValue] - [fundedAmount floatValue];

    NSString* name = [loan objectForKey:@"name"];
    NSString* country = [(NSDictionary*)[loan objectForKey:@"location"] objectForKey:@"country"];

    [parsedDict setObject:fundedAmount forKey:@"funded_amount"];
    [parsedDict setObject:loanAmount forKey:@"loan_amount"];
    [parsedDict setObject:name forKey:@"name"];
    [parsedDict setObject:country forKey:@"location"];
        }
nslog(@"%@",parsedDict); 
```

但是当我将它从循环中注销时，我只得到最后添加的值..不是所有的值..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:14:55.490

如果您使用相同的键添加 2 个值，则只会显示最后一个值，因为其他值都将被覆盖。您可能想要（即使它不是那么漂亮）为每个循环添加一个字典到一个数组/字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:19:13.197

使用数组来存储记录...

```
 NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
        self.responseData = nil;

        NSArray* latestLoans = [(NSDictionary*)[responseString JSONValue] objectForKey:@"loans"];
        NSLog(@"%i",[latestLoans count]);

     NSMutableArray someArray=[[NSMutableArray alloc]init];

    for (int i=0; i<[latestLoans count]; i++) {

    parsedDict = [[NSMutableDictionary alloc] init];
        //get latest loan
        NSDictionary* loan = [latestLoans objectAtIndex:i];

        //fetch the data
        NSNumber* fundedAmount = [loan objectForKey:@"funded_amount"];
        NSNumber* loanAmount = [loan objectForKey:@"loan_amount"];
        float outstandingAmount = [loanAmount floatValue] - [fundedAmount floatValue];

        NSString* name = [loan objectForKey:@"name"];
        NSString* country = [(NSDictionary*)[loan objectForKey:@"location"] objectForKey:@"country"];

        [parsedDict setObject:fundedAmount forKey:@"funded_amount"];
        [parsedDict setObject:loanAmount forKey:@"loan_amount"];
        [parsedDict setObject:name forKey:@"name"];
        [parsedDict setObject:country forKey:@"location"];
        [someArray addObject:parsedDict];
            }
    NSLog(@"%@",parsedDict);

//Read from Array

for(NSDictionary *tempDict in someArray) 
{
   //use [tempDict objectForKey:@"keyName"] to get values from each dictionary
} 
```

# java - 关闭循环的 javax.sound.sampled 剪辑

> ID：10088530
> 
> 赞同：3
> 
> 时间：2012-04-10T12:10:05.910
> 
> 标签：java, javasound

我可能不正确地处理这个问题，但我需要找出如何停止循环 javax.sound.sampled 剪辑。我有 9 种不同的声音。当用户按下增加幅度按钮时，我希望播放不同的声音。目前我每次点击按钮时都会调用 playSound 方法并且它正在工作，但是它并没有停止已经播放的声音。声音只是相互播放。

当用户按下按钮时，有没有办法关闭所有现有的声音？

这是我的 playSound 代码：

```
 public void playSound(){
    try {
        audio = AudioSystem.getAudioInputStream(soundFile[activeSound]);
        clip = AudioSystem.getClip();
        clip.open(audio);
        clip.start();
        clip.loop(Clip.LOOP_CONTINUOUSLY);           
    }

    catch (IOException ex){
        System.out.println("Sorry but there has been a problem reading your file.");
        ex.printStackTrace();
    }

    catch (UnsupportedAudioFileException ex1){
        System.out.println("Sorry but the audio file format you are using is not supported.");
        ex1.printStackTrace();
    }

    catch (LineUnavailableException ex2){
        System.out.println("Sorry but there are audio line problems.");
        ex2.printStackTrace();
    } 
} 
```

我已经在这里待了两天了，这让我很生气。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:16:37.710

您想要的是停止播放所有现有剪辑。这可以使用[Dataline.stop()](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html#stop%28%29)方法来完成。您所需要的只是能够访问所有现有的剪辑。下面是我的建议。请注意，我只使用一个引用来链接到当前循环的剪辑。如果您有多个，请使用`ArrayList<Clip>`而不是仅使用一个。

```
private Clip activeClip;
public void playSound(){
    activeClip.stop();
    try {
        audio = AudioSystem.getAudioInputStream(soundFile[activeSound]);
        clip = AudioSystem.getClip();
        clip.open(audio);
        clip.start();
        clip.loop(Clip.LOOP_CONTINUOUSLY);
        activeClip = clip;
    }

    catch (IOException ex){
        System.out.println("Sorry but there has been a problem reading your file.");
        ex.printStackTrace();
        }

    catch (UnsupportedAudioFileException ex1){
        System.out.println("Sorry but the audio file format you are using is not     supported.");
        ex1.printStackTrace();
    }

    catch (LineUnavailableException ex2){
        System.out.println("Sorry but there are audio line problems.");
        ex2.printStackTrace();
    } 
} 
```

# java - 使用 OpenEJB 控制无状态会话 bean 的名称

> ID：10088534
> 
> 赞同：1
> 
> 时间：2012-04-10T12:10:15.250
> 
> 标签：java, ejb, openejb, apache-tomee

我正在使用 OpenEJB (TomEE++) 容器开发 EJB 项目。有一个会话 bean，其 JNDI 查找名称需要在代码中进行控制。

```
@Stateless(mappedName="SlideService", name="SlideService")
public class SlideService {

    public Map<Category, List<SlideShow>> fetchSlideShowsBycategory() {
        // TODO Auto-generated method stub
        return null;
    }

    public SlideShow fetchSlideShow(long id) {
        // TODO Auto-generated method stub
        return null;
    }

    public List<SlideShow> fetchSlideShowsByTitle(String title) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

我的问题是，这个 bean 绑定的名称是 'global/slides/SlideService'

OpenEJB 似乎使用了应用程序名称，尽管我没有特别提到它。

这会损害便携性吗？是否有可能其他容器可能不使用应用程序名称？

使用 name 和 mappedName 属性是控制无状态 bean 名称的正确方法，还是有其他（更好的）方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:22:27.683

您的问题在 EJB 3.1 规范中得到解决，任何经过 Java EE 6 认证的容器都将为您的 bean 使用多个 JNDI 名称。在您的代码中，您可以控制名称的最后一部分，这里是关于[Portable Global JNDI Names的文档](https://blogs.oracle.com/kensaks/entry/portable_global_jndi_names)

[在这里，您可以找到EJB 3.1](http://javahowto.blogspot.it/2009/12/portable-jndi-names-in-ejb-31.html)中 JNDI 可移植 JNDI 名称的 3 个标准范围的简单指南

所以是的，您的代码可以在任何 Java EE 6 认证的容器中移植

# extjs - EXtjs Grid Filters，过滤特定行

> ID：10088535
> 
> 赞同：1
> 
> 时间：2012-04-10T12:10:21.883
> 
> 标签：extjs, filter, grid

我是 Extjs 库的新用户，我成功创建了一个网格，它工作得很好，现在我想使用 Ext.grid.GridFilters 向我的网格添加过滤，但是当我添加过滤时它可以工作，但它过滤了所有行，但我想从过滤中排除最后 3 行。

如何仅过滤指定的行？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:30:50.053

当您到达具有特定 idkey 或特定字段值的行时，您可以使用函数来过滤网格并排除以应用它。

像 ext js 文档

```
var longNameFilter = new Ext.util.Filter({
filterFn: function(item) {
    return item.name.length > 4;
}}); 
```

# visual-studio - 当加载需要第三方应用程序或插件时，如何支持“结帐-构建-运行”？

> ID：10088549
> 
> 赞同：1
> 
> 时间：2012-04-10T12:10:58.817
> 
> 标签：visual-studio, svn, version-control, msbuild, continuous-integration

有时（通常？）项目需要依赖于第三方工具的本地安装才能进行编译。其中一种依赖是[来自 Tigris 的 MS Build Tasks](http://msbuildtasks.tigris.org/)，但我们也会遇到其他依赖。

我们尝试遵循**最小意外的原则**：*结帐-打开解决方案-构建-运行*。如果构建无法触发第三方工具的安装，则此方法不起作用。更糟糕的是，有时`csproj`文件具有这些依赖项并导致 Visual Studio 中的加载失败错误。

一种解决方案是添加 setup-visualstudio.txt 文件，但这并不理想。

我真正想要的是在加载解决方案时进行健全性检查，或者在签出后**立即通知用户为了成功构建或加载项目，他需要安装软件 X。**除了自己构建这个之外，还有什么处理这个问题的常见做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-19T21:50:06.457

*（我自己的一个迟来的答案）*

该解决方案应用于我此后的许多项目，使用 NuGet 或 Paket 来解决外部依赖关系。如果您有不公开可用的包，您可以托管自己的 NuGet，这很容易设置。

这个想法是由尼克在评论中提供的。请注意他提到[Chocolatey](http://chocolatey.org/)，这在某些情况下肯定会有所帮助。

# android - NDK r7c 编译问题

> ID：10088552
> 
> 赞同：0
> 
> 时间：2012-04-10T12:11:12.457
> 
> 标签：android, android-ndk

我只想知道是否有人在 Windows 7 和 Cygwin 上遇到 NDK r7c 问题。我收到这条消息：“/usr/bin/mount.exe：加载共享库时出错：？：无法打开共享对象文件：没有这样的文件或目录” 在版本 r7 和 r7b 上，我的代码编译得很好。

提前感谢您提供有关如何解决此问题的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:49:40.467

我不知道它是否相关，但可能是：我刚刚发布了一个与您的问题非常相似的问题。

一般的答案是 cygwin1.dll 文件的路径需要在您的 PATH 某处 - 在大多数情况下，这是最简单的解决方案。然而，这并没有解决我的问题——我的问题仍然很突出。

看看围绕我的问题的对话，看看是否有适合你的解决方案。

[这是我问的问题。](https://stackoverflow.com/questions/10092730/launching-cygwin-built-executable-from-java-on-windows-7-fails-with-error-while)

问候， R

# php - 在 PHP 中从物理内存中清除变量的值

> ID：10088553
> 
> 赞同：5
> 
> 时间：2012-04-10T12:11:14.680
> 
> 标签：php, memory, encryption

*一般的问题是：*在 PHP 中未设置该变量后，是否可以从物理内存中删除字符串变量的值？

该问题源于安全标准的某些要求（在处理某些重要数据时，不应将数据从内存转储到磁盘）。根据“[内存加密吗？](https://stackoverflow.com/questions/6337807/is-memory-encrypted) ”主题没有加密内存数据的好方法。

因此，在 PHP 中取消设置 String 变量时，您不能确定内存中的数据已被覆盖。关于将新值设置为变量的相同故事。

因此，我很感兴趣是否可以在不更改`unset`方法核心代码的情况下从内存中清除变量值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:48:59.797

首先，我不确定擦除字符串是否符合您描述的安全要求，因为理论上仍然可以在字符串被擦除之前转储内存。但这无论如何都是不可能的，因为如果没有将数据存储在内存中，您就无法处理数据。

无论如何，如果你想确保字符串被擦除，我认为在 PHP 中这样做的唯一方法是遍历字符串并修改每个字符：记住，内存的内容在被覆盖之前不会消失，即使你有没有对变量的引用并且 PHP GC 已经运行。

我相信这会奏效：

```
for( $i=0; $i < strlen($str); $i++ )
    $str[$i] = 'x'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T15:10:12.810

**tl; dr：**在彻底测试了许多组合之后，似乎`for`覆盖每个字符的循环清除/更改了内存中的字符串内容。请注意初始内容的来源，它可能仍然存在于这些变量中！请参阅下面的**更新**。

用 PHP 5.6 做了一些测试：

```
<?php
     $cc = 'AAAABBBBCCCCDDDD';
     #v1:  unset($cc);
     #v2:  $cc=null;
     #v3:  for( $i=0; $i < strlen($cc); $i++ ) $cc[$i] = 'x';
     sleep(500); // enough time for taking script pid and run the memory dump
?> 
```

尝试了上述脚本的每个版本（启用#v1，启用#v2，启用#v3）；转储进程的内存（请参阅[https://serverfault.com/a/408929/374467](https://serverfault.com/a/408929/374467)）并且“AAAABBBBCCCCDDDD”字符串始终显示在生成的二进制文件中（其中包含进程内存）。当 $cc 值作为命令行参数 ($argv) 发送时也进行了测试。结果相同。

迄今为止，我发现在 PHP 中没有可靠的方法来做到这一点。

**更新**

正如评论中所建议的，使用字符串文字来初始化变量可能会影响结果，因为文字可能保存在内存中。因此，我更改了脚本，使其从 cli 获取参数并通过应用`str_rot13()`来初始化变量，确保变量的内容是*new*。我还添加`gc_collect_cycles()`了强制垃圾收集。所以测试脚本看起来像这样：

```
<?php
     $cc = str_rot13($argv[1]);
     #v1:  unset($cc);
     #v2:  $cc=null;
     #v3:  for( $i=0; $i < strlen($cc); $i++ ) $cc[$i] = 'x';
     gc_collect_cycles();
     sleep(120); // enough time for taking script pid and run the memory dump
     echo "done \n";
?> 
```

似乎前两种方法（unset/null）不会从内存中清除*新*值`$cc`（即使 gc_collect_cycles 开启）但**循环`for`实际上改变了它！**即使使用或不使用 gc_collect_cycles。

使用 PHP 7.2.20 (cli) 测试。

*注意*您仍然可以在内存中找到参数 ($argv) 的初始值！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-10T12:38:14.020

据我了解，问题不在于使用`unset()`或 PHP 的垃圾收集器，而是确保使用的内存实际上在物理级别被清除？

简单的方法 - 只需在取消设置（或任何其他值）*之前将其设置为 null 查看*[使用 PHP 释放内存的好处：unset() 或 $var = null](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)

艰难而愚蠢的方法是用垃圾分配所有 php 内存，以确保其被覆盖，但我不确定虚拟内存是否固定在预定义的音调上，或者根据进程需要进行更改。

# sql - 通过删除光标提高性能

> ID：10088554
> 
> 赞同：0
> 
> 时间：2012-04-10T12:11:20.493
> 
> 标签：sql, sql-server, cursor

这个脚本需要几个小时才能执行，有没有办法删除光标并仍然在主键上迭代表`responseId`？

```
DECLARE ResponseCursor CURSOR
FOR
     SELECT responseId FROM ResponseTable

FETCH NEXT FROM ResponseCursor INTO @ResponseId

WHILE @@fetch_Status =0
BEGIN
    --Insert Logic 
    FETCH NEXT FROM ResponseCursor INTO @ResponseId
END

CLOSE ResponseCursor
DEALLOCATE ResponseCursor 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:53:11.623

实际上插入逻辑中有很多选择语句。

所以我删除了 Cursor 并使用连接插入了该表，该表有 100 列和近 10 万行，插入所有数据需要 2 分钟。

使用游标需要 18 个小时，因此使用连接速度非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:14:21.310

当然......只需插入/选择

```
insert into MyOtherTable
SELECT responseId, anotherField, 'static text'
FROM ResponseTable
-- add where clause as needed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T07:35:46.643

使用函数并将选择语句的行放入该函数的插入逻辑中，该函数返回结果表并使用交叉应用将函数与游标的选择语句连接 SELECT mytable1.result FROM ResponseTable cross apply ( select *from function (ResponseTable.responseId) dd 其中 dd.responseId=ResponseTable.responseId) mytable1

其中 mytable1.responseId=ResponseTable.responseId

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:48:26.277

很有可能问题不是光标，而是您的插入逻辑。你应该验证你的机器上有足够的内存来执行这个循环，并且你的表上有一个索引。

一些开始的地方：

1.  运行游标所做的选择语句需要多长时间？
2.  插入逻辑的单次迭代需要多长时间？
3.  你是在做插入还是插入选择？检查选择需要多长时间运行，并检查该查询的索引。

# jquery - 如何在 JqueryMultiColumn 上使用 OnSelectedChange 事件？

> ID：10088555
> 
> 赞同：1
> 
> 时间：2012-04-10T12:11:23.023
> 
> 标签：jquery, asp.net, postback

我在 ASP.NET 项目中使用 jquerymulticolumn。如何在我的多列组合框 selectedchange 事件中进行回发。当我单击组合框上的一个项目时，我将它设置为我的隐藏字段。我想将它发送到后面的代码。

aspx：

```
.
.
<td>

   <asp:HiddenField runat="server" id="HiddenAksiyonId" />

   <div id="datatable">
       <table cellspacing="0" width="100%">
         <tr>
             <th>ID</th><th>Action Name</th><th>Action ID</th>
          </tr>
          <tr>
            <asp:repeater id="rep" runat="server">
               <itemtemplate>
                  <tr>
                     <td><%#Eval("AKSIYON_ID")%></td><td><%#Eval("AKSIYON_ADI")%></td><td><%#Eval("AKSIYON_ID")%></td>
                   </tr>
               </itemtemplate>
             </asp:repeater>
          </table>
      </div>

   </td>
   .
   . 
     <script type="text/javascript">

      $("#datatable").multicolselect({
          buttonImage: "../Images/selectbutton.gif",
          valueCol: 1,
          hideCol: 0
      });

      </script> 
```

# visual-c++ - 如何使用 Visual C++ (Windows) 从哪里移动文件/文件夹？

> ID：10088560
> 
> 赞同：0
> 
> 时间：2012-04-10T12:11:57.373
> 
> 标签：visual-c++

我想知道，如果我监视一个目录（C:\test），如何使用 Visual C++（Windows）来获取一个实际从哪里移动的新文件或文件夹（文件/文件夹本机/上一个路径），如果是否有任何文件/文件夹已移至此目录 (C:\test)？谢谢你。

问候，

戈登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:36:35.733

我认为目录更改通知是您所追求的（您的问题对我来说不是 100% 清楚） - 看看[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261( v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261(v=vs.85).aspx)

# python - 从非 R 脚本（例如 Python）访问/提取 R 帮助

> ID：10088571
> 
> 赞同：1
> 
> 时间：2012-04-10T12:12:35.893
> 
> 标签：python, r

我在stackoverflow上找到了许多从R中提取帮助文件的html代码的函数，但我想从外部脚本（Python）访问帮助文件。如何从 R 外部获取帮助文件的实际 html 代码？

以下是可能的解决方案：

1.  使用从 Python 或其他语言对 R 的控制台调用，例如 R --slave -e 'library(MASS); help(survey)' >survey.txt 这种方法的问题是我经常不知道具体的函数在哪个包中。所以这种方法实际上并不奏效。或者有变通办法吗？

2.  从 R 中提取所有帮助文件并将它们保存在数据库中，该数据库可以从外部脚本访问。应该不难，但它也有点烦人，因为这个帮助数据库必须通过重新运行脚本来更新。

3.  直接访问 R 的帮助数据库，但我不知道结构等！？

有什么想法和可能的解决方案吗？

编辑：我也考虑过这个包，但由于这个错误[https://github.com/hadley/helpr/issues/27](https://github.com/hadley/helpr/issues/27)`helpr`无法使用 R 2.15 进行尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:49:10.857

如果您能够从其源代码编译 R，那么直接访问帮助文件（您的选项 3）似乎是最干净和最简单的方法。

R 二进制发行版附带的各种 html 帮助文件存储在：

```
R_HOME/doc/html/                 # CHANGES, NEWS, other miscellany
R_HOME/doc/manual/               # An Intro to R, R Language Definition, etc.
R_HOME/library/<pkg-name>/html/  # help files for packages 
```

不幸的是，出于您的目的（如[R-admin 的第 2.2 节所述](http://cran.r-project.org/doc/manuals/R-admin.html#Help-options)），“默认情况下，HTML 帮助页面是在需要时创建的，而不是在安装时构建的”。至少对于 Windows（而且似乎对于 Mac），CRAN 提供的标准 R 二进制文件是使用这些默认设置构建的。

如果您*愿意*/能够从其源代码编译 R，您可以设置一个可选标志/指令，告诉 R 创建那些静态 HTML 帮助页面。在 UNIX（我猜是 Mac OS X）操作系统上，通过设置 configure 选项来做到这一点`--enable-prebuilt-html`。在 Windows 上，`BUILD_HTML = YES`在运行之前在“MkRules.dist”或“MkRules.local”中设置`make all recommended`。

# wordpress - 由用户 IP 地址确定的 Wordpress 功能主题重定向

> ID：10088572
> 
> 赞同：0
> 
> 时间：2012-04-10T12:12:36.293
> 
> 标签：wordpress

**理念**

我想开发一个新的 wordpress 主题，而我的旧主题在新主题开发期间保持活跃。

将进行主题重定向的函数将进入当前激活的主题functions.php - 我将手动输入**我的主题名称**和**我的IP**到函数中。

如果您可以添加一组 IP 以便客户可以检查进度，那就太棒了。

**我能想到的问题...**

1.  我添加到 wordpress cms 的新内容将出现在 live 主题上 -***是的，这会发生，但在我的情况下，我当前的 live 主题只是一个保留页面，主题模板文件通过 php header 重定向到主页- 并且没有循环可以查看任何 worpress 内容***
2.  页面加载之间可能会出现延迟/闪烁 -***这对我来说也不是问题，因为这只是一个开发站点，这个问题会在上线后消失***

这就是我能想到的所有问题，如果有人能想到其他可能的问题，请发表:-)

**功能代码**

下面的代码不起作用...

```
 // THEME IP REDIRECT
    add_filter('template', 'dev_theme');
    add_filter('option_template', 'dev_theme');
    add_filter('option_stylesheet', 'dev_theme');
    function dev_theme($theme) {
        if ( $_SERVER['REMOTE_ADDR'] == 'XXX.XX.XXX.XXX' ) {
            return 'development-theme-name';
        }
        return $theme
    } 
```

如果有人认为他们可以解决这个问题，那将非常有帮助并且是一个非常棒的功能。

显然取决于是否有任何编译的想法。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:32:57.180

您应该使用开发服务器来构建新主题。将所有内容复制到该服务器上的另一个虚拟主机或本地计算机，包括您的数据库。按照说明[移动 wordpress 站点](http://codex.wordpress.org/Moving_WordPress)。然后在那里开发您的主题，并在准备好后将其移动到您的实时站点。

如果您真的必须在您的实时网站上开发您的主题，您可以使用过滤器将它们换掉......

```
add_filter('template', 'dev_theme');
add_filter('option_template', 'dev_theme');
add_filter('option_stylesheet', 'dev_theme');
function dev_theme($theme) {
    return 'twentyten';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:29:14.920

使用`switch_theme` [http://codex.wordpress.org/Function_Reference/switch_theme](http://codex.wordpress.org/Function_Reference/switch_theme)

# sql - 当两个线程都尝试插入相同的数据时，在多线程程序中忽略 ConcurrencyFailureException 是否安全？

> ID：10088579
> 
> 赞同：1
> 
> 时间：2012-04-10T12:13:03.160
> 
> 标签：sql, multithreading, oracle, spring, concurrency

在极少数情况下，两个线程会尝试在同一事务期间将相同的数据插入数据库。当第二个线程尝试进行插入时，我得到一个并发失败异常：ORA-00028：您的会话已被终止..（仅当数据相同时）

我正在使用 springframework.jdbc

捕获并忽略此异常是否安全？springjdbc中是否有锁定机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:39:48.763

你有一个棘手的问题。如果可能，重新设计您的数据模型以避免这些并发插入。否则，请看这里： http: [//michaeljswart.com/2011/09/mythbusting-concurrent-updateinsert-solutions/](http://michaeljswart.com/2011/09/mythbusting-concurrent-updateinsert-solutions/)

# intel - 我在哪里可以找到英特尔酷睿 i5 M560 的规格？

> ID：10088581
> 
> 赞同：0
> 
> 时间：2012-04-10T12:13:07.110
> 
> 标签：intel

我想从头开始编写一个“Hello World”应用程序。没有 C 库、编译器、链接器，什么都没有。只是一个十六进制编辑器。

处理器：Intel Core i5 CPU M 560, 2.67GHz

我在哪里可以找到该处理器的规格（包括指令代码、寄存器值等）。（我正在寻找类似[DCPU 规格](http://0x10c.com/doc/dcpu-16.txt)的东西，但适用于 Intel Core i5 M560）。

我找到了以下文档： http: [//download.intel.com/products/processor/manual/325462.pdf](http://download.intel.com/products/processor/manual/325462.pdf) 我不确定这是正确的规格，如果是的话，我会对“最低限度的写作”感兴趣你好世界”版本。

* * *

更新：根据评论中的大量反馈，我现在正在寻找的是关于为给定 CPU编写**程序集的****教程。**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:33:43.697

似乎您正在寻找的只是一般的 x86 组装教程。这应该为您提供在 Assembly 中创建 Hello World 应用程序所需的一切。请注意，您不需要寻找“Intel 程序集”或任何东西，x86 是 AMD 和 Intel 都支持的通用架构。**

# c++ - 消除 std::vector 中的重复项

> ID：10088583
> 
> 赞同：1
> 
> 时间：2012-04-10T12:13:20.853
> 
> 标签：c++, algorithm, stdvector

我有一个非常大的 std::vector 的 std::vectors 包含固定数量的无符号整数。

uint 的所有向量都按升序排序。

我目前消除重复向量的方法是

```
unsigned int i = 0;
while ( i < new_combs.size() )
{
  unsigned int j = i + 1;
  while ( j < new_combs.size() )
  {
     unsigned int k = 0;
     while ( k < new_combs.at(i).size() && new_combs.at(i).at(k) == new_combs.at(j).at(k) )
        ++k;
     if ( k == new_combs.at(j).size() )
        new_combs.erase(new_combs.begin() + j);
     else
        ++j;
  }
  ++i;
} 
```

这里，new_combs 是一个包含上述向量的向量。

如果向量的向量未排序，是否有更有效的方法来消除重复项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T12:16:42.807

更短的方法是使用`<algorithm>`：

```
std::sort(new_combs.begin(), new_combs.end());
new_combs.erase(std::unique(new_combs.begin(), new_combs.end()), new_combs.end()); 
```

除非您特别需要 a `std::vector`，否则您可以使用它`std::set`来避免重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:17:35.350

您是否考虑过使用 std::set？它是有序的，不允许以重复项开头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:17:51.647

如果向量未排序，您无能为力。但是，如果已排序，则可以使用算法中定义的[唯一](http://www.cplusplus.com/reference/algorithm/unique/)方法：

```
new_combs.erase(unique(new_combs.begin(), new_combs.end()), new_combs.end()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:19:15.920

您的代码中有几个元素敲响了我关于性能的警钟。

首先，您正在使用向量。从向量中擦除元素总是很慢。您可能会考虑使用不同的容器（std::list）或调整您的代码，以便您有一个特殊的值（例如零或-1）。

其次，您可以使用 std::set 或 std::unordered_set 来保留您已经遇到的值。这样，您只需循环一次向量。

**编辑：**忘记这个答案。我误读了这个问题，并认为必须删除重复值（而不是重复向量）。

尽管如此，对给出的评论的一些反应：

*   @Jerry：我同意向量在大多数情况下比列表快，但前提是向量的大小是有限的。如果向量包含 100 万个元素，并且您需要删除第 3 个、第 5 个、第 10 个，......您最终会移动很多元素。在这种情况下，列表可能会更快。
*   @James：在最初的问题中，元素不是从向量的末尾删除，而是在中间。如果向量非常大（比如说 100 万个元素），那么删除元素仍然会成为瓶颈。但是，我同意比使用排序，然后是唯一的可能更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:19:50.413

渐近地，您的算法看起来像通常的 O(n) 实现，因此是最优的。（尽管我不了解您的对角化策略`i`以及`j`为什么只擦除而不移动元素。您的代码非常不清楚。）但是，您正在复制 STL，并且唯一循环的较短版本是：

```
struct unique {
    template <class C>
    void operator()( C& c ) {
         c.erase( std::unique( c.begin(), c.end() ), c.end() );
    }
};

std::for_each( new_combs.begin(), new_combs.end(), unique() ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T13:09:12.103

我同意[Luchian Grigore 的回答](https://stackoverflow.com/a/10088633/533120)，但您也可以考虑将整个外部`vector`转换`unordered_set`为用于排序）。您甚至可以在 中使用**指向**子向量的指针`unordered_set`，以避免不必要的复制。对于大量数据，这可能是一个重要的性能差异。

[这个例子](https://stackoverflow.com/a/9685502/533120)说明了使用你自己的散列函数和指针的基本思想（它处理`vector`of `string`s 和 uses `unordered_map`， not `unordered_set`，但你应该能够很容易地修改它以满足你的需要）。

# php - 如何为 cent OS 启用 PHP 的 json 扩展

> ID：10088589
> 
> 赞同：1
> 
> 时间：2012-04-10T12:14:09.547
> 
> 标签：php, centos

我是cent OS 的新手。遵循[本教程](http://www.arckid.com/blog/amfphp/how-to-add-install-json-support-to-php-on-centos-in-10-steps/)，但仍然无法完成工作。它仍然显示我的脚本需要 JSON 扩展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:18:59.140

尝试这个。希望这会奏效。

```
You have to install:
* php-pear
* php-devel
* gcc
* make 
```

然后它将编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:24:47.537

教程很好。

当您转到扩展目录“/etc/php.d”时，您可以检查是否安装了扩展，如果安装了扩展，则应该有**json.ini**。

打开**json.ini**并查看**"extension=json.so"**行是否没有**#**。

当一切都正确时，应该启用扩展。

最后一步是重新启动您的http。有时您可能必须停止并启动服务。

```
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));
var_dump(json_decode($json, true)); 
```

您可以使用这些行对其进行测试。如果它不起作用，请在此处发布错误消息。

# flex4 - 使用 flex/AMF 多次调用 Web 服务？

> ID：10088593
> 
> 赞同：1
> 
> 时间：2012-04-10T12:14:17.860
> 
> 标签：flex4, amf

我正在使用 flex & AMF 进行网络服务调用。当应用程序加载时，我从同一个服务调用 4 个操作。据我所知，一旦得到结果，flex 应该开始渲染 UI。但就我而言，我可以在提琴手中看到所有对操作的调用都使用相同的 HTTP 请求。这意味着 flex 正在等待所有操作的响应。我想知道是否有什么办法可以分开通话？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:27:09.847

是的当然。在响应者的结果方法中执行下一个服务调用。

# php - 一种处理将唯一单词保存到文件的有效算法

> ID：10088599
> 
> 赞同：1
> 
> 时间：2012-04-10T12:14:34.810
> 
> 标签：php, file, unique

我目前所做的是，从 URL 解析文本，然后清理文本并用空格分解它们并保存到文件中。

我觉得困难的是，

仅保存唯一文件以防刮取多个 url：

案例：从 site.com/page1 抓取单词并将唯一单词保存到文件中。抓取 site.com/page2 时，我需要检查每个单词是否已经在文件中，只有在不存在时才保存。

我的想法是，取 $word[0]，然后从文件中获取每一行，如果找不到，则检查并保存。但这就像成千上万次迭代。

我不是在寻找任何代码，而只是想知道如何有效和快速地处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:34:44.147

我假设您已经将从 site1 获得的唯一单词存储在一个名为 的文件中，并且您`site1.txt`已经从 site2 刮取单词在一个名为独特的词：`$site2``$site2``site2.txt`

```
$wordsInFile1 = file('site1.txt');
$wordsInFile1 = array_flip($wordsInFile1);

foreach($site2 as $i => $word) {
    if(isset($wordsInFile1[$word])) {
       unset($site2[$i]);
    }
}

// now $site2 contains unique words from site2 and words that are not in site1.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:45:00.443

您可以使用允许快速搜索的内存表示（如哈希表）有效且快速地处理它。

假设你有一个函数，它返回文件中的所有单词，标准化，没有标点符号，没有空格：

```
$words = extract_words('Hello my dear!'); 
```

where-as`$words`结果：

```
array(
    'hello' => 1,
    'my'    => 1,
    'dear'  => 1,
); 
```

您可以使用以下方法将此哈希表快速存储到文件中[`var_export`](http://php.net/var_export)：

```
$file = 'words1.txt';
file_put_contents(sprintf('return %s;', var_export($words, TRUE))); 
```

并在使用中读回[`include`](http://php.net/include)：

```
$words = include($file); 
```

要检查该哈希图是否包含该单词，请使用`isset`：

```
$exist = isset($words[$word]); 
```

由于您在这里有数组，您可以跨文件合并它们，区分它们等 - PHP 有许多可用的基于数组的函数。如果你想用 PHP 来做，我认为这非常快。

如果您有更大的列表，我建议您使用用于通常[用 C 编写](http://hashcat.net/forum/thread-323.html)的数 GB 字表的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:19:53.133

据我所知，您当前的算法属于复杂性类`O(n^2)`。您正在为每个单词再次遍历列表，这不太好，对吧。我建议您首先将所有单词写入文件，然后使用有效的算法对列表进行排序。完成后，您可以删除重复项。例如，在 linux 下，您可以使用以下命令：

```
sort -u unsortedList > sortedAndCleanedList 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T12:20:35.717

`grep <word> file`应该工作得很快

或者，您可以创建一个名为 md5 的空文件，然后在将单词添加到主文件之前检查 md5(word) 文件是否存在。请注意，某些文件系统不允许目录中的文件超过 32767 个（因此您可能需要根据 md5 哈希的前几个字符创建子目录）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:55:44.760

您可以对文件进行排序，然后搜索该单词。

想法是保持文件排序，然后使用任何搜索算法在文件中查找具有相同模式的现有条目。如果找不到现有条目，请插入新条目。

成本是保持文件排序需要硬盘操作。

# sql-server - sql数据集中可以创建多少个数据表？

> ID：10088603
> 
> 赞同：1
> 
> 时间：2012-04-10T12:14:44.600
> 
> 标签：sql-server, datatable, dataset

在 sql server 中，Dataset 中可以创建多少个数据表？

在数据集中定义数据表是否有任何限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:18:47.393

你的记忆。除此之外，它仅受[Int32](http://msdn.microsoft.com/en-us/library/system.int32.aspx)限制。你可以在一个（**2,147,483,648**个表，快乐编码）中容纳`2^32`的最大数量也是如此。`DataTables``DataSet`

 **顺便说一句，a[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)可以包含**16,777,216**行，但这不是您所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:19:15.660

最大大小受 Int32 限制为 2^32，因为 Tables.Count 属性将返回一个整数值。

例如：数据集 ds=new DataSet(); int count=ds.Tables.Count;//它将给出数据集中表的总数。

此外，DataTable 可以存储的最大行数是 16,777,216。**

# java - 如何在 WAR 文件中包含依赖项？

> ID：10088604
> 
> 赞同：12
> 
> 时间：2012-04-10T12:14:51.497
> 
> 标签：java, eclipse, jakarta-ee, jar, war

我`Dynamic Web Project`在 Eclipse 中有一个依赖于我的工作区中的另一个 Java 项目。在内置 Tomcat 服务器中运行 Web 项目时，我已将项目依赖项添加到*运行配置*中的类路径中。我想创建一个 WAR 用于在外部服务器上部署 Web 项目。依赖项 Java 项目已添加到 Eclipse 中的*Java Build 路径*中，但是当我导出 WAR 文件时，该库不包括在内。Java 项目也在*Order 和 Export*中被选中。如何创建包含我的依赖项的 WAR？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T06:05:32.467

我正在使用 Eclipse Helios Java EE。右键单击项目。在该项目的属性窗口中，选择左侧树中的“部署程序集”。单击添加，然后在出现的窗口中选择“Java Build Path Entries”。选择您希望包含在 .war 文件中的所有库。继续将项目导出为 .war 文件。您将在 /WEB-INF/lib 下找到这些库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T12:18:07.517

[Maven 多模块项目](http://maven.apache.org/plugins/maven-eclipse-plugin/reactor.html)非常适合这里，

如果您不想这样做，那么只需将依赖项构建到（.jar）中，将其添加到 Web 项目的运行时依赖项（/WEB-INF/lib）并构建 WAR

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T12:49:49.600

您需要[为 Eclipse 安装 Maven](http://maven.apache.org/eclipse-plugin.html)并将您的项目转换为 Maven 项目（右键单击项目 -> 配置 -> 转换为 Maven 项目）。

[配置项目](http://maven.apache.org/pom.html)后，您可以将其作为“Maven Build...”运行并指定[install:install](http://maven.apache.org/plugins/maven-install-plugin/usage.html)以构建一个 war 文件，默认情况下，该文件包含来自 Maven 的库。

Maven 现在有很多功能可以解释这一切。只需看看项目网站。您需要一些时间来理解和配置，但是当您理解它时，它将为您节省大量时间:)

# objective-c - 动态添加新的表格视图单元格

> ID：10088607
> 
> 赞同：0
> 
> 时间：2012-04-10T12:15:02.897
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uitableview

我看过很多关于在表格视图中添加和删除单元格的帖子。我想要的是当用户单击单元格中的添加按钮时，它必须询问用户在该单元格中输入什么文本，然后用户在单元格中输入文本，然后将其添加到表格视图中。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:53:13.987

我会将添加按钮放在页脚或页眉中，而不是放在单元格中，我个人认为管理单元格的添加会更容易。

除此之外，不确切知道您的问题是什么，如果您将控制器设置为合适的委托，那么您可以通过访问所有相关方法轻松添加或删除单元格，特别是那个：

```
- (void)tableView:(UITableView *)aTableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleInsert) {
       // ......
    }
} 
```

由以下方式调用：

```
[yourTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath ] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:05:25.380

有一个类似的方法`(UITableViewCell *) createNewCellForTableView`。这将创建并返回 UITableViewCell。

在您`CellForRowAtIndexPath`使用此方法为您的`tableView`. 这需要以这种方式完成，因为当您执行时，`[tableView reloadData];`每次添加新单元格时都需要创建新单元格。

最后，在创建新单元格后，在`ADD`按钮的 IBAction 中，确保重新加载 tableView。

**〜一个更简单的选择：**

由于您只是在寻找用户添加文本，因此您可以`textField`在 uitableViewcell 中嵌入一个。用户完成输入后，您可以将文本添加到`dataSource`（填充 的数组`tableView`）并重新加载 tableView。确保你有 textField`enabled`或`disabled`你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T08:00:09.217

这就是我的做法，它的工作原理：

首先，创建一个实例变量，如下所示：

```
int numRows = 0; 
```

实现方法`numberOfRowsInSection`如下：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return numRows;
} 
```

现在在我的应用程序中，在一个地方，我正在使用 REST API 并获取 JSON，我将 numRows 的值更新为`numRows = [jsondata count];`

`cellForRowAtIndexPath`如果您有动态内容，请按照您希望的方式编写您的方法。例如，在我的情况下，我正在使用 indexPath.row 并准备单元格并返回它。

仅当变量 numRows 大于 0 时才会调用此方法。因此，一旦您拥有动态内容，请按照我上面的说明更新 numRows 的内容并立即调用该方法`[YourtableView reloadData];`

* * *

# xml - 在 xslt 中缺少前同级的 for-each 循环中的第一个元素

> ID：10088608
> 
> 赞同：1
> 
> 时间：2012-04-10T12:15:04.830
> 
> 标签：xml, xslt, foreach, xsl-fo

我在使用 XSLT 通过属性对 xml 条目进行分组时遇到问题。

这是我的源xml：

```
<chron>
<chronEntry type="education" order="1" blockorder="1">
    <foo>bar</foo>
</chronEntry>
    <chronEntry type="education" order="2" blockorder="1">
<foo>bar</foo>
    </chronEntry>
<chronEntry type="education" order="3" blockorder="1">
    <foo>bar</foo>
</chronEntry>
<chronEntry type="communityservice" order="1" blockorder="2">
    <foo>bar</foo>
</chronEntry>
<chronEntry type="experience" order="1" blockorder="3">
    <foo>bar</foo>
</chronEntry>
<chronEntry type="experience" order="2" blockorder="3">
    <foo>bar</foo>
</chronEntry>
<chronEntry type="experience" order="3" blockorder="3">
    <foo>bar</foo>
</chronEntry>
<chronEntry type="experience" order="4" blockorder="3">
    <foo>bar</foo>
</chronEntry>
</chron> 
```

我想要得到的是属性“类型”的所有可用值的列表。在这种情况下，它应该是： - 教育 - 社区服务 - 经验

我是这样尝试的：

```
<xsl:for-each select="/foobar/chron/chronEntry">
            <xsl:sort select="@blockorder"/>
                <xsl:if test ="@blockorder != preceding-sibling::chronEntry[1]/@blockorder">
                    <fo:table-row>
                        <fo:table-cell>
                            <fo:block><xsl:value-of select="@type"/></fo:block>
                        </fo:table-cell>
                    </fo:table-row>
                </xsl:if>
            </xsl:for-each> 
```

我得到的是：-社区服务-经验

我缺少“教育”（第一个）

我该怎么做才能得到它？

谢谢你的帮助！

格雷茨

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:34:41.640

问题在于，尽管您正在创建一个排序的节点列表，但`preceding-sibling::`（或任何轴）只能用于表达文档中节点之间的关系（而不是节点列表中的节点）。

因此，*当前文档*中上下文节点的`preceding-sibling::`chronEntry[1] chronEntry`不在排序的节点列表中。`selects the first preceding sibling`

 ***解决方案**：

1.  在 XSLT 1.0 中，捕获`xsl:for-each`变量中的结果。由于这是臭名昭著的 RTF 类型，因此您必须使用`xxx:node-set()`正在使用的 XSLT 1.0 处理器支持的扩展函数将其转换为常规树。然后，在这棵常规树中，包括 在内的轴`preceding-sibling::`具有所需的含义。

2.  推荐的解决方案。使用 Muenchian 分组：

像这样：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kType" match="@type" use="."/>

 <xsl:template match=
  "chronEntry
    [generate-id(@type)
    =
     generate-id(key('kType', @type)[1])
    ]">
     <xsl:value-of select="concat(@type, ' ')"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<chron>
    <chronEntry type="education" order="1" blockorder="1">
        <foo>bar</foo>
    </chronEntry>
    <chronEntry type="education" order="2" blockorder="1">
        <foo>bar</foo>
    </chronEntry>
    <chronEntry type="education" order="3" blockorder="1">
        <foo>bar</foo>
    </chronEntry>
    <chronEntry type="communityservice" order="1" blockorder="2">
        <foo>bar</foo>
    </chronEntry>
    <chronEntry type="experience" order="1" blockorder="3">
        <foo>bar</foo>
    </chronEntry>
    <chronEntry type="experience" order="2" blockorder="3">
        <foo>bar</foo>
    </chronEntry>
    <chronEntry type="experience" order="3" blockorder="3">
        <foo>bar</foo>
    </chronEntry>
    <chronEntry type="experience" order="4" blockorder="3">
        <foo>bar</foo>
    </chronEntry>
</chron> 
```

**产生了想要的正确结果**：

```
education communityservice experience 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:50:57.613

你真的需要 xsl:sort 吗？还是你用它来分组？如果是这样，您可以删除 xsl:sort 并更正您的 xsl:if-test：

```
 <xsl:for-each select="/foobar/chron/chronEntry">
            <xsl:if test ="not(@blockorder = preceding-sibling::chronEntry/@blockorder)">
                <fo:table-row>
                    <fo:table-cell>
                        <fo:block><xsl:value-of select="@type"/></fo:block>
                    </fo:table-cell>
                </fo:table-row>
            </xsl:if>
        </xsl:for-each> 
```

如果你需要 xsl:sort，你可以使用这个：

```
 <xsl:variable name="types" select="/foobar/chron/chronEntry[not(preceding-sibling::*/@blockorder=@blockorder)]"/>
        <xsl:for-each select="$types">
            <xsl:sort select="@blockorder"/>
            <fo:table-row>
                <fo:table-cell>
                    <fo:block>
                        <xsl:value-of select="@type"/>
                    </fo:block>
                </fo:table-cell>
            </fo:table-row>
        </xsl:for-each> 
```*

# jquery - jQuery Alert -jAlert OK 点击

> ID：10088615
> 
> 赞同：2
> 
> 时间：2012-04-10T12:15:21.960
> 
> 标签：jquery

在 jAlert 中单击 OK 时不会触发任何内容，即使对话框也不会关闭：

```
$(document).ready(function () {
     $("#confirm_button").click(function () {
         jAlert("Submitted", "Approval", function () {
             //My code goes in here
         }); 
     });
}); 
```

我需要点击 OK 来获取事件，请帮我解决这个问题！

的HTML

```
<html>
<head>
    <title>Demo</title>
    <script src="jquery.js" charset="utf-8" type="text/javascript"></script>
    <script src="jquery.alerts.js" charset="utf-8" type="text/javascript"></script>
    <link href="jquery.alerts.css" charset="utf-8" rel="stylesheet" type="text/css" media="screen" />
    <script type="text/javascript">
        $(document).ready(function () {
            $("#confirm_button").click(function () {
                jAlert("Submitted", "Approval", function () { 
                    //
                }); 
            });
        });
    </script>
</head>
<body>
    <form runat="server">
    <asp:Button ID="btnAlert" runat="server" Text="Click"/>
    </form>
    <input id="confirm_button" type="button" value="Show Confirm" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:21:14.370

`jAlert`应该像这样调用：

```
$.jAlert(...) 
```

更改它，代码将起作用。[小提琴](http://jsfiddle.net/LhLhM/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:21:53.170

我不得不对你的代码做一个小改动

```
jAlert 
```

到

```
$.jAlert 
```

[它对我来说很好用](http://jsfiddle.net/uUTqE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:21:00.710

名为 confirm_button 的选择器是输入吗？如果是，请尝试这样做：

```
$("input[name=confirm_button").click(function () { 
```

如果选择器以如下类命名：

```
<a class="confirm_button"></a> 
```

然后这样做：

```
$(".confirm_button").click(function() { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:20:24.003

据我了解，jAlert 弹出窗口的 OK 按钮是“#popup_ok”，这意味着这是实例的唯一 ID。因此，在触发 jAlert 函数后，您必须将事件绑定到此按钮。在这里，我将 jAlert 调用包装在另一个这样做的函数中：

```
function showAlert(msg, title) {
jAlert(msg, title);
$("#popup_ok").click(
  function () {
    // Do something after the OK button is clicked...
  });   
} 
```

现在你调用“母亲”函数：

```
showAlert("Click OK if you're OK...", "Hey how are you doing?"); 
```

# ruby-on-rails - 如何清除rails会话表

> ID：10088619
> 
> 赞同：19
> 
> 时间：2012-04-10T12:15:38.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我将活动记录存储用于 Rails 会话存储。

在很短的时间内，`sessions`桌子的大小增加了很多。这些会话行在一段时间后如何转储。还是我应该在 24 小时内手动清除一次？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-20T12:57:50.337

在 Rails 3.2 中使用对 ActiveRecord 的标准调用。对于日期，传递一个与“记住我”持续时间长度相匹配的值。在我的示例中，这将清除两周内不活动的所有会话。

```
ActiveRecord::SessionStore::Session.delete_all(["updated_at < ?", 2.weeks.ago]) 
```

正如下面@journeyer 所述，如果使用 Devise gem，可以参考 Devise 的配置。

```
ActiveRecord::SessionStore::Session.delete_all(["updated_at < ?", Devise.remember_for.ago]) 
```

如果使用魔法宝石，可以参考魔法的配置。

```
ActiveRecord::SessionStore::Session.delete_all(["updated_at < ?", User.sorcery_config.remember_me_for.ago]) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-10T12:22:10.650

关于您的问题的一篇好博文：http: [//blog.brightbox.co.uk/posts/clearing-out-rails-sessions](http://blog.brightbox.co.uk/posts/clearing-out-rails-sessions)

解决方案是创建一个自定义 rake 任务：

```
task :clear_expired_sessions => :environment do
    sql = 'DELETE FROM sessions WHERE updated_at < DATE_SUB(NOW(), INTERVAL 1 DAY);'
    ActiveRecord::Base.connection.execute(sql)
end 
```

...并每天使用 cron 作业运行它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-10T12:20:44.057

当您调用`reset_session`rails 时，将从会话表中删除该行。然而，并不是每个会话都会`reset_session`调用它：如果用户在没有注销的情况下关闭浏览器，那么浏览器将丢弃会话 cookie，因此该会话行将永远不会被再次使用，但`reset_session`不会被调用。

Rails 不会为你清除那些积累的垃圾——你可以在你认为合适的时候对它进行任何整理。在之前的作业中，我们使用运行删除旧会话行的 cronjob。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T12:20:31.123

我建议使用 cron 作业或其他方式清除您的 Rails 会话。也许不是 24 小时，这取决于您希望用户会话可用多长时间。Rails 为此提供了一个 rake 任务

> 耙分贝：会话：清除

# c# - 无法将 DELPHI XE2 DLL 添加到 C# 应用程序

> ID：10088620
> 
> 赞同：3
> 
> 时间：2012-04-10T12:15:46.727
> 
> 标签：c#, delphi, dll

为了测试，我试图在 C# 应用程序（在 Visual C# 2010 Express 中开发）中调用 Delphi XE2 DLL（参见代码）。

```
procedure CLP; stdcall; export;
begin
  showmessage('TEST');
end;

exports CLP; 
```

但是，当尝试将 DLL 添加为对 C# 项目的引用时，会出现以下消息：

> 无法添加对“D:\temp\test.dll”的引用。请确保该文件是可访问的，并且该文件是有效的程序集或 COM 组件。

在 Delphi 2010 下编译相同的 DLL 时，它可以正常工作。

任何如何解决问题的建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T12:20:46.517

不能将非托管 DLL 添加到 .NET 项目。

但是您可以导入函数，例如参见[Platform Invoke Tutorial](http://msdn.microsoft.com/en-us/library/aa288468%28VS.71%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:15:32.383

您正在尝试链接到非托管的本机 DLL。您不能将这样的东西作为参考添加到托管应用程序中。

调用 DLL 的方法是使用 p/invoke：

```
[DllImport(@"test.dll", CallingConvention=CallingConvention.Stdcall)]
static extern void CLP(); 
```

当你开始为你的 DLL 设置参数时，事情自然会变得有点复杂，但你可以用 p/invoke 走很长的路。

您需要注意的一件事是，如果您的 DLL 是 32 位，您的托管项目以 x86 为目标，或者如果您的 DLL 是 64 位，您的托管项目以 x64 为目标。

作为最后一点，注意`export`在现代 Delphi 中使用 是毫无意义的。您应该简单地删除它，因为编译器无论如何都会忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:09:32.980

Henk is right and I want to add a few things.

First of all, You can add a dll only if it is a .NET managed dll(which calls assembly). But you can import unmanged functions from unmanaged dll or exe files. So the right question is how I can import functions from unmanaged dll, and you should seek the answer for it. And I think the best start position is [pinvoke](http://pinvoke.net/) website.

# android - 从 Android 代码定义 C 宏

> ID：10088625
> 
> 赞同：1
> 
> 时间：2012-04-10T12:15:59.403
> 
> 标签：android, c, macros, java-native-interface

我有一个头文件 header.h，其中变量定义为 x。

**#定义变量X**

基于变量 x 我在 ac 文件中有一个结构 y - program.c ：

```
#include header.h

Structure y 
{
int val[variable];
.
.
//other elements

}

void func()
{
//here instance of y->val[variable] is used heavily

} 
```

这个 c 代码（header.h 和 program.c）是一个 JNI 代码，我正在制作一个共享库 .so 并将其加载到 Android java 代码中。现在最近我开始知道我的代码中有一个错误，解决方案是动态地将变量值定义为 x。现在除了将这个值从 AAndroid 传递给 JNI 之外，还有一种方法可以直接在 Android java 中#define 一个宏，比如 C 的 MACRODEFINED_FROM_ANDROID 语言，这样头文件就变成了这样：

```
#ifdef MACRODEFINED_FROM_ANDROID
#define variable x
#elif
#define variable y
#endif 
```

其他解决方案是我将创建两个共享库，一个变量 = x，另一个变量 = y，并在 android 代码中动态加载。

PLz建议。

Rgds，索拉布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:09:55.870

据此，有一些宏可以帮助您测试您是否正在为 android 编译

[http://annoyingtechnicaldetails.wordpress.com/2012/02/01/which-macros-does-the-android-ndk-gcc-define/](http://annoyingtechnicaldetails.wordpress.com/2012/02/01/which-macros-does-the-android-ndk-gcc-define/)

在我的系统上：

```
# $CC  -dM -E - < /dev/null | grep -i android
#define __ANDROID__ 1
# echo $CC
android-ndk-r7b//toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin//arm-linux-   androideabi-gcc --sysroot=platforms/android-9/arch-arm 
```

# pcap - Microsoft 网络监视器的工作原理

> ID：10088626
> 
> 赞同：0
> 
> 时间：2012-04-10T12:16:03.007
> 
> 标签：pcap

Microsoft 网络监视器是否依赖于 pcap/winpcap/libpcap 库？或者它已经建立了自己的库/驱动程序来捕获网络数据包？我找不到有关该主题的任何信息。我在问，因为 Microsoft 网络监视器在安装后不需要重新启动（所以它不会加载内核级驱动程序？）并且即使在原始数据包捕获不起作用的 Windows 7 上也能捕获传入数据包。

有关原始数据包限制的其他信息：http: [//social.technet.microsoft.com/Forums/en-US/w7itpronetworking/thread/65ce9bee-897b-4c19-a4c6-4d3da103be44/](http://social.technet.microsoft.com/Forums/en-US/w7itpronetworking/thread/65ce9bee-897b-4c19-a4c6-4d3da103be44/)

编辑：我自己找到答案 - 网络监视器引擎分为两部分：捕获引擎和解析引擎。

捕获引擎是与网络驱动程序接口规范 (NDIS) 接口以读取帧数据的驱动程序。它是在 Windows Vista 上自动安装的系统驱动程序。在以前的操作系统上，捕获驱动程序是系统的一部分。

另一方面，解析引擎处于用户模式。该引擎使用网络监视器解析语言 (NPL) 文件来确定如何解析原始帧数据。它还过滤帧。

API 可以访问引擎的这两个部分，以及保存和加载捕获文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:32:47.893

Windows 可能支持加载内核模块（`.sys`文件）而无需重新启动，因此安装网络监视器后可能不必重新启动。

网络监视器不使用 WinPcap；正如您所注意到的，它有自己的 NDIS 驱动程序，其用途与 WinPcap 的 NDIS 驱动程序类似。

# objective-c - 沿着 UIBezierPath 将 UIImage 分成两部分

> ID：10088629
> 
> 赞同：2
> 
> 时间：2012-04-10T12:16:20.090
> 
> 标签：objective-c, ios, uiimage, uibezierpath

如何`UIImage`通过黑线将其分为两部分。的上等高线集`UIBezierPath`。

![](../Images/7c1ee9a8dfd472b1374464d59af41c5a.png)

我需要得到两个结果`UIImage`s。那么有可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T13:28:15.050

以下一组例程创建 UIImage 的版本，其中要么仅包含路径**内的内容，要么仅包含路径****外**的内容。

两者都使用了`compositeImage`使用 CGBlendMode 的方法。CGBlendMode 非常强大，可以将您可以绘制的任何内容与您可以绘制的任何其他内容进行屏蔽。调用 compositeImage: 与其他混合模式可以产生有趣的（如果不是总是有用的）效果。有关所有模式，请参阅[CGContext 参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html#//apple_ref/c/tdef/CGBlendMode)。

我在对您的 OP 的评论中描述的剪辑方法确实有效并且可能更快，但前提是您有 UIBezierPaths 定义了要剪辑的所有区域。

```
- (UIImage*) compositeImage:(UIImage*) sourceImage onPath:(UIBezierPath*) path usingBlendMode:(CGBlendMode) blend;
{
    // Create a new image of the same size as the source.
    UIGraphicsBeginImageContext([sourceImage size]);

    // First draw an opaque path...
    [path fill];
    // ...then composite with the image.
    [sourceImage drawAtPoint:CGPointZero blendMode:blend alpha:1.0];

    // With drawing complete, store the composited image for later use.
    UIImage *maskedImage = UIGraphicsGetImageFromCurrentImageContext();

    // Graphics contexts must be ended manually.
    UIGraphicsEndImageContext();

    return maskedImage;
}

- (UIImage*) maskImage:(UIImage*) sourceImage toAreaInsidePath:(UIBezierPath*) maskPath;
{
    return [self compositeImage:sourceImage onPath:maskPath usingBlendMode:kCGBlendModeSourceIn];
}

- (UIImage*) maskImage:(UIImage*) sourceImage toAreaOutsidePath:(UIBezierPath*) maskPath;
{
    return [self compositeImage:sourceImage onPath:maskPath usingBlendMode:kCGBlendModeSourceOut];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:53:10.050

这可以做到，但它需要一些三角函数。让我们考虑上图的情况。首先，确定最底端的端点，`UIBezierPath`并使用它`UIGraphicsBeginImageContext`来获取图像的顶部线以上。这将如下所示：

![顶部](../Images/778bfcc0ca7802cb331fab2b9729e968.png)

现在，假设您的线是直的，沿着绘制垂直`stroke`s 的线逐个像素移动`clearColor`（顶部循环。在底部继续类似的线）：

```
for(int currentPixel_x=0;currentPixel_x<your_ui_image_top.size.width)
    UIGraphicsBeginImageContext(your_ui_image_top.size);
    [your_ui_image_top drawInRect:CGRectMake(0, 0, your_ui_image_top.size.width, your_ui_image_top.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 1.0);
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeClear); 
    CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(),[UIColor clearColor].CGColor);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), currentPixel_x, m*currentPixel_x + c);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPixel_x, your_ui_image_top.size.height);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    your_ui_image_top = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

你的`UIBezierPath`将不得不转换成直线的形式`y = m*x + c`。这个`x`等式中的 将在`currentPixel_x`上面。遍历图像的宽度，`currentPixel_x`每次增加 1。`next_y_point_on_your_line`将计算为：

```
next_y_point_on_your_line = m*currentPixel_x + c 
```

每个垂直线`stroke`的宽度为 1 像素，其高度取决于您穿过它们的方式。经过一些迭代后，您的图像将大致看起来（请原谅我糟糕的照片编辑技能！），例如：

![在此处输入图像描述](../Images/d38f45c96b22e02b63173a45c33bc7e5.png)

有多种方法可以绘制**清晰**的笔触，这只是其中一种方法。如果效果更好，您还可以使用与给定路径平行的清晰笔划。

另一种方法是将线条下方像素的 alpha 设置为 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T22:24:41.780

我测试了裁剪，在一些不同的测试中，它比屏蔽**慢 25%**`[maskImage: toAreaInsidePath:]` ，以达到与我其他答案中的方法相同的结果。为了完整起见，我将其包含在此处，但请不要在没有充分理由的情况下使用它。

```
- (UIImage*) clipImage:(UIImage*) sourceImage toPath:(UIBezierPath*) path;
{
    // Create a new image of the same size as the source.
    UIGraphicsBeginImageContext([sourceImage size]);

    // Clipping means drawing only happens within the path.
    [path addClip];

    // Draw the image to the context.
    [sourceImage drawAtPoint:CGPointZero];

    // With drawing complete, store the composited image for later use.
    UIImage *clippedImage = UIGraphicsGetImageFromCurrentImageContext();

    // Graphics contexts must be ended manually.
    UIGraphicsEndImageContext();

    return clippedImage;
} 
```

# python - 重新加载目录中的所有模块

> ID：10088630
> 
> 赞同：2
> 
> 时间：2012-04-10T12:16:29.383
> 
> 标签：python, import, module, directory, reload

我需要重新加载指定目录中的所有 python 模块。

我试过这样的事情：

```
import sys, os
import_folder = "C:\\myFolder"
sys.path.insert( 0 , import_folder )
for dir in os.listdir(import_folder):
    name = os.path.splitext(dir)[0]
    ext = os.path.splitext(dir)[1]
    if ext == ".py":
        import( eval(name) )
        reload( eval(name) ) 
```

任何人都知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:58:33.733

```
import os # we use os.path.join, os.path.basename
import sys # we use sys.path
import glob # we use glob.glob
import importlib # we use importlib.import_module

import_folder = 'C:\\myFolder'
sys.path.append(import_folder) # this tells python to look in `import_folder` for imports
for src_file in glob.glob(os.path.join(import_folder, '*.py')):
    name = os.path.basename(src_file)[:-3]
    importlib.import_module(name)
    reload(sys.modules[name])
    importlib.import_module(name) 
```

有代码。现在到整个事情的语义：使用[importlib](http://docs.python.org/2/library/importlib.html#importlib.import_module)使这更正常一点，但它仍然会引发一些错误。您可以看到这会中断子目录中的源文件。您可能应该做的是：导入包，（导入整个文件夹），并`.`像这样使用运算符：

```
import sys # we use sys.path
sys.path.append('C:\\')
import myFolder
...
myFolder.func1(foo)
myFolder.val
bar = myFolder.Class1() 
```

也许您应该查看[modules 的文档](http://docs.python.org/2/tutorial/modules.html#packages)，但不要忘记更新路径以包含要导入的文件夹的父级。

# c++ - 可以在多个头文件中拆分类吗？

> ID：10088631
> 
> 赞同：4
> 
> 时间：2012-04-10T12:16:34.923
> 
> 标签：c++

我有一个由几个函数和许多运算符组成的类。几乎所有的函数和运算符都使用模板，这就是我在头文件中实现它们的原因。这使得很难在代码中找到某些内容，因此我决定将所有运算符移动到一个单独的头文件中。

现在我有类似的东西：

fstring.h

```
class fstring{
    ...
    #include "fstring_operators.h"
} 
```

和 fstring_operators.h

```
...
template<int RSIZE>
bool operator==(const fstring<RSIZE>& rhs) const {
    return equals(rhs._chars, RSIZE);
}
... 
```

可以做这样的事情吗？我还省略了 fstring_operators.h 的标头保护，因为它不能包含在 fstring.h 之外的任何地方

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T12:21:46.203

虽然我以前在生产代码中看到过这种风格，但我并不真正同意这种风格，原因有两个：

1）您希望 a`class`在标题中完全定义。您无需查看其他标题即可找到您要查找的内容。

2）您可以在其他地方包含另一个标题。即使没有包括警卫，也不能保证它不会起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T12:22:25.720

我认为您应该将这些方法定义为自由函数。然后你可以在你的常规头文件的底部#include，这是许多 C++ 库使用的一种做法（其中一些会使操作符文件名以 .i 或 .inl 或其他东西结尾）。

如果你这样做似乎很好。您在 OP 中编写的方式有点陌生，即使它有效，也可能会甩掉您代码的一些维护者，甚至可能会甩掉一些开发工具。

# java - Eclipse、Tomcat项目上下文根是eclipse文件夹

> ID：10088635
> 
> 赞同：7
> 
> 时间：2012-04-10T12:17:00.863
> 
> 标签：java, eclipse, tomcat, enterprise, contextpath

我在配置我的 Tomcat 项目时遇到了一点问题。简而言之，我正在开发一个动态网页项目，但对于我从哪里运行应用程序似乎有些混乱。

运行以下代码

```
File f = new File("");
System.err.println(f.getAbsolutePath()); 
```

产生`C:/Eclipse`恰好是我运行 Eclipse 的输出。通常我希望这是输出目录，但这次不是这样。

我的 Eclipse 项目配置为将 myProject/WebContent/WEB-INF/classes 作为输出文件夹

如何配置到所需的目录？现在我需要使用不适用于项目所有成员的绝对路径。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T14:23:50.583

好吧，我找到了解决方案。

似乎我的默认工作目录设置为项目的 eclipse 文件夹，所以我通过指定项目根文件夹来解决它，而不是通常情况。

我在这里配置了这个：

运行配置 > Apache Tomcat 运行配置 > 参数选项卡，在“工作目录”下选择“其他”并指定目录。

感谢您的意见！

# html - HTML5：如何在滚动时隐藏 div

> ID：10088636
> 
> 赞同：0
> 
> 时间：2012-04-10T12:17:01.153
> 
> 标签：html, jquery-mobile, jquery-selectors, html5-canvas, html5-animation

当有人滚动页面时，我需要隐藏一个 div。并在停止滚动时显示 div。

是否可以为带有 HTML5 或 jQuery 的触摸屏应用程序执行此操作。

谁能帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:23:51.800

您可以在这里找到解决方案：[当滚动条与 jQuery 一起移动时，如何隐藏 Div？](https://stackoverflow.com/questions/7390960/how-to-hide-a-div-when-the-scroll-bar-is-moving-with-jquery)

向下滚动以回答并单击链接

# html - 如何将xml数据解析成html？

> ID：10088637
> 
> 赞同：1
> 
> 时间：2012-04-10T12:17:01.143
> 
> 标签：html, xml, xml-parsing, html-parsing

这是我的xml：

```
<Catalog>
    <catalogDetail catalogId="DemoCatalog">
        <catalogName>Demo Catalog</catalogName>
    </catalogDetail>
    <catalogDetail catalogId="GoogleCatalog">
        <catalogName>Google Catalog</catalogName>
    </catalogDetail>
</Catalog> 
```

我希望它在 HTML 文件中被读取，我该怎么做？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:59:03.567

为此，您的 HTML 文件应包含一些 JavaScript 代码，因此您需要学习如何在 Javascript 中解析 XML。

这是关于这个主题的一个很好的 StackOverflow 问题：[JavaScript 中的 XML 解析](https://stackoverflow.com/questions/649614/xml-parsing-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:07:20.753

> **注意：**如果您可以详细说明您正在使用什么技术，我将尝试提供一个更完整的示例。

我建议为此使用 XSLT。使用 XSLT，您可以传入 XML 片段、解析它并返回格式化的 HTML。

下面是一个将 XML 转换为 HTML 的示例 XSLT 文档：

```
<?xml version="1.0" encoding="utf-8"?>  
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">  
    <xsl:output method="html" indent="yes"/>       
    <xsl:template match="/">  
      <html>  
        <body>  
          <h2>My CD Collection</h2>  
          <table border="1">  
            <tr bgcolor="#9acd32">  
              <th>Title</th>  
              <th>Artist</th>  
            </tr>  
            <xsl:for-each select="catalog/cd">  
              <tr>  
                <td>  
                  <xsl:value-of select="title"/>  
                </td>  
                <td>  
                  <xsl:value-of select="artist"/>  
                </td>  
              </tr>  
            </xsl:for-each>  
          </table>  
        </body>  
      </html> 
    </xsl:template>   
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:21:36.683

您可以使用 PHP 的名为 simplexml 的 XML 库来获取更多信息，请查看此链接 [http://www.w3schools.com/php/php_xml_simplexml.asp](http://www.w3schools.com/php/php_xml_simplexml.asp)

# apache - 查询字符串中带有空格的 Apache 重定向

> ID：10088638
> 
> 赞同：1
> 
> 时间：2012-04-10T12:17:03.867
> 
> 标签：apache, .htaccess

如果查询字符串包含空格，是否可以使用 .htaccess 重定向到未找到的页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:40:11.270

我知道您可以在规则中使用 '\ ' 或 '\s' （所有空格字符）对其进行转义，但我不确定 %{QUERY_STRING} 是否符合您的要求。

# c# - 通过jQuery在asp.net中存储innerhtml？

> ID：10088640
> 
> 赞同：0
> 
> 时间：2012-04-10T12:17:16.280
> 
> 标签：c#, javascript, jquery, asp.net, innerhtml

我有

```
<div id="ulAndil" runat="server">

</div> 
```

和按钮

```
<asp:Button ID="btnAssignJudToCourse" runat="server" Text="تاكيد " 
      CssClass="button" CausesValidation="false" 
      OnClientClick="javascript:getShape();" 
      OnClick="btnAssignJudToCourse_Click" Visible="false" /> 
```

在运行时，我创建了很多可排序的 html 控件，然后单击确认我想在回发会话中的按钮或任何内容之前保存此 div 的内部 html

使用 jQuery，所以当用户单击按钮 jQuery 获取 div 的内部 html 并将其存储在 cookie 会话中任何东西在回发后存储它我可以检索它

请我想要这个 jQuery 或 javascript 方法的确切代码以及如何调用按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:34:45.560

为什么不将生成的 HTML 放在隐藏字段中并回发。

说 getShape() 是你的javascript函数

```
function getShape()
{

//your validations applied

document.getElementById('hdnHTML').value = document.getElementById('ulAndil').value;

return true;

} 
```

其中 hdnHTML 是 HTML 的隐藏元素。

# encryption - 短（6 位）加密密钥散列

> ID：10088645
> 
> 赞同：3
> 
> 时间：2012-04-10T12:17:42.643
> 
> 标签：encryption, cryptography, hash

我必须实现一个简单的散列算法。

输入数据：

*   值（16 位整数）。
*   密钥（任意长度）。

输出数据：

*   **6 位**哈希（数字 0-63）。

要求：

*   **如果您只有输入值而没有 key ，实际上**应该不可能预测哈希值。更具体地说：如果我知道 x < M 的 hash(x)，那么在不知道密钥的情况下应该很难预测 hash(M)。

可能的解决方案：

1.  保持完整映射作为关键。所以密钥的长度为 2^16*6 位。我的情况太长了。
2.  线性代码。Key 是一个生成矩阵。它的长度是16*6。但是使用几个已知的哈希值很容易找到生成矩阵。

还有其他可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:24:56.670

[HMAC](http://en.wikipedia.org/wiki/HMAC)似乎是您想要的。因此，您可能会使用基于 SHA 的 HMAC 并仅使用生成的哈希的子字符串。这应该是相对安全的，因为加密哈希的位应该尽可能独立和不可预测。

但是，根据您的环境，这可能会花费过多的处理时间，因此您可能必须选择更简单的散列方案来构建 HMAC。

**原始答案评论中的讨论基于：**

由于您无论如何都可以忘记加密属性（通过对 5 位哈希的暴力攻击来发现冲突是微不足道的），您不妨使用 CRC 或汉明码之类的东西并免费获得错误检测

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T20:34:14.190

Mensi 建议使用截断的[HMAC](http://en.wikipedia.org/wiki/HMAC)是一个很好的建议，但是如果您碰巧在一个高度受限的系统上并且想要更快或更简单的东西，您可以采用任何[分组密码](http://en.wikipedia.org/wiki/Block_cipher)，加密您的 16 位值（填充到一个完整的块) 并将结果截断为 6 位。

与计算[伪随机函数](http://en.wikipedia.org/wiki/Pseudorandom_function)的 HMAC 不同，分组密码是[伪随机排列](http://en.wikipedia.org/wiki/Pseudorandom_permutation)——每个输入映射到不同的输出。但是，当您丢弃分组密码输出中除了 6 位之外的所有内容时，剩下的部分看起来非常像伪随机函数。对重复输出会有一个*非常*小的偏差，但是（假设分组密码的块大小远大于 6 位，它应该是）它会小到几乎无法检测到。

对于非常低端的系统来说，一个好的分组密码选择可能是[TEA](http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm)或其继任者[XTEA](http://en.wikipedia.org/wiki/XTEA)和[XXTEA](http://en.wikipedia.org/wiki/XXTEA)。虽然对这些密码有一些已知的攻击，但它们都需要对密码进行更广泛的访问，而不是在您的应用程序中应该有的权限。

# android - 在 Android 中创建 ViewPager 或等效的 WITH 功能

> ID：10088647
> 
> 赞同：1
> 
> 时间：2012-04-10T12:17:45.303
> 
> 标签：android, http, android-layout, android-viewpager

我知道这听起来像是一个可怕的问题，但我一直在尽可能多地研究这个问题。我有一个应用程序需要视图寻呼机水平滚动以显示不同的视图。在每个视图中，它都需要功能，对于一个视图，它可能只是按下一个按钮，另一个视图需要从服务器下载数据（例如，检索最新的 Twitter 提要）以及其他功能。要点是在 View Pager 中，每个视图都需要功能。

我最初的想法是遵循本教程：

[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

但是，这只是提供没有交互的视图。我已经设法实现了这一点并添加了我的布局，但这只是解决了一半的问题。它显示了如何在注释中添加基本操作，例如单个按钮。我希望每个视图都有自己的活动，能够做自己独特的事情。

这是我最初拥有的：

```
public class DashboardContainerActivity extends Activity{

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //Set content view to the dashboard container xml view
    setContentView(R.layout.dashboard_container);

    //Create a new instance of my page adapter from below
    MyPageAdapter adapter = new MyPageAdapter();
    //Reference the view pager used in the dashboard container xml view
    ViewPager myPager = (ViewPager) findViewById(R.id.dashboardpanelpager);
    //set an adapter to the view pager
    myPager.setAdapter(adapter);
    //First panel to be shown when opened
    myPager.setCurrentItem(3);
  }

}

/*------------------------------------------------------*/
class MyPageAdapter extends PagerAdapter {

  public int getCount() {
      //Return 7 as there will be 7 panes in the dashboard
      return 7;
  }

  public Object instantiateItem(View collection, int position) {

      LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      View v = null;
      switch (position) {
      case 0:
          v = inflater.inflate(R.layout.dashboard_social, null);
          break;
      case 1:
          v = inflater.inflate(R.layout.dashboard_info, null);
          //DISPLAY INFORMATION FROM SERVER AND DISPLAY HERE
          break;
      case 2:
          v = inflater.inflate(R.layout.dashboard_allcourses, null);
          //LIST OF COURSES

          break;
      case 3:
          v = inflater.inflate(R.layout.dashboard_news, null);
          //USE HTTP HERE FOR TWITTER FEED

          break;
      case 4:
          v = inflater.inflate(R.layout.dashboard_mycourse, null);
          //DOWNLOAD USER'S PERSONAL INFORMATION AND DISPLAY HERE

          break;
      case 5:
          v = inflater.inflate(R.layout.dashboard_media, null);
          //DISPLAY LATEST UPLOADED MULTIMEDIA
          break;
      case 6:
          v = inflater.inflate(R.layout.dashboard_extras, null);
          break;
      }

      ((ViewPager) collection).addView(v, 0);

       return v;
  }

  @Override
  public void destroyItem(View arg0, int arg1, Object arg2) {
      ((ViewPager) arg0).removeView((View) arg2);

  }

  @Override
  public boolean isViewFromObject(View arg0, Object arg1) {
      return arg0 == ((View) arg1);

  }

  @Override
  public Parcelable saveState() {
      return null;
  }
 } 
```

我为添加到 ViewPager 的每个布局都有单独的活动，但我猜测这些活动不能添加到 ViewPager 而不仅仅是布局。

我读过一些关于片段的东西，但我不确定这是否与 API 级别 8 兼容，显然这是针对 Honeycomb 和 Ice Cream Sandwich。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:29:47.697

不可能将 Activity 作为 ViewPager 的一部分，但是没有理由不能将您描述的功能添加到 ViewPager 中的每个页面。要将交互或事件分配给每个视图中的组件，只需在每个 case 语句中的 instantiateItem() 中添加正确的侦听器：

```
case 0:
      v = inflater.inflate(R.layout.dashboard_social, null);
      Button myButton = (Button) v.findViewById(R.id.name_of_button_in_social_dashboard);
      myButton.setOnClickListener(...);
      break; 
```

对于任何其他交互，例如获取 twitter 提要的 http 请求，只需将它们作为主要活动的一部分执行（当然，http 请求应该在后台线程中完成）。当你想更新 twitter 页面中的 UI 时，只需使用`ViewPager.getChildAt(3)`获取子元素。将您的 Activity 想象成一个包含 7 个子视图的大布局，这些视图一次都可用（但用户只会在滑动时看到它们）。

综上所述，更好的设计模式可能是使用 Fragment 和[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)支持您的 ViewPager。这允许将各种页面更好地逻辑分解为不同的类 - 片段还提供其他用途，例如能够一次加载多个屏幕以用于更大的屏幕布局（平板电脑）。

与 ViewPager 一样，Fragment 可以通过支持库一直追溯到 API 级别 4（请参阅[Fragment](http://developer.android.com/reference/android/support/v4/app/Fragment.html)）。因此，您无需担心向后兼容性。

# c# - 新窗口复制

> ID：10088649
> 
> 赞同：0
> 
> 时间：2012-04-10T12:18:01.840
> 
> 标签：c#, .net, wcf

我正在开发一个使用 Wcf 从数据库中获取数据的界面，我遇到了以下问题，我正在使用动态窗口来显示信息以及一些日期时间按钮和关闭等...

但是，当我关闭窗口并重新打开它时，它会将所有内容添加回已经存在的表单中，这会产生双重影响并导致一些问题，任何建议都会很棒，在此先感谢

这里有一些代码可以更好地描述我所拥有的......

这是我的主要表单上的按钮，它创建了新窗口

```
private void butMoreInf_Click(object sender, RoutedEventArgs e)
{
    winMain.DataContext = null;
    winMainContainer.DataContext = null;
    winMainContainerLeft.DataContext = null;
    winMainContainerRight.DataContext = null;
    datGrid.DataContext = null;

    //Generate the new window and panel to go within the window
    winMain.Height = 750;
    winMain.Width = 950;
    winMainContainer.Width = 1000;
    winMainContainer.HorizontalAlignment = HorizontalAlignment.Left;
    winMainContainerLeft.Width = 120;
    winMainContainerLeft.HorizontalAlignment = HorizontalAlignment.Left;
    winMainContainerRight.Width = 880;
    winMainContainerRight.HorizontalAlignment = HorizontalAlignment.Left;

    //Generate the datagrid to contain the date to be changed etc.
    datGrid.Margin = new Thickness(0, 12, 12, 12);
    datGrid.HorizontalAlignment = HorizontalAlignment.Right;

    //Generate a datepicker (start) and label
    Label labS = new Label();
    labS.Content = "Pick a start date";
    labS.Width = 100;
    labS.Margin = new Thickness(12, 1, 0, 1);
    labS.HorizontalAlignment = HorizontalAlignment.Left;

    DatePicker datPickStart = new DatePicker();
    datPickStart.Width = 100;
    datPickStart.Margin = new Thickness(12, 12, 1, 0);
    datPickStart.HorizontalAlignment = HorizontalAlignment.Left;
    datPickStart.SelectedDate = DateTime.Now.AddDays(-7);
    datStartPick = datPickStart.SelectedDate == null ? DateTime.Now : Convert.ToDateTime(datPickStart.SelectedDate);

    //Generate a datepicker (end) and label
    Label labE = new Label();
    labE.Content = "Pick an end date";
    labE.Width = 100;
    labE.Margin = new Thickness(12, 1, 0, 1);
    labE.HorizontalAlignment = HorizontalAlignment.Left;

    DatePicker datPickEnd = new DatePicker();
    datPickEnd.Width = 100;
    datPickEnd.Margin = new Thickness(12, 12, 1, 0);
    datPickEnd.HorizontalAlignment = HorizontalAlignment.Left;
    datPickEnd.SelectedDate = DateTime.Now;
    datEndPick = datPickEnd.SelectedDate == null ? DateTime.Now : Convert.ToDateTime(datPickEnd.SelectedDate);

    //Generate dropdown and label for that box
    Label labY = new Label();
    labY.Content = "";
    labY.Width = 100;
    labY.Margin = new Thickness(12, 1, 0, 1);
    labY.HorizontalAlignment = HorizontalAlignment.Left;

    ComboBox txtY = new ComboBox();
    txtY.Width = 100;
    txtY.Margin = new Thickness(12, 12, 1, 0);
    txtY.HorizontalAlignment = HorizontalAlignment.Left;
    txtY.SelectedIndex = 0;
    txtY.SelectionChanged += CLLoadErrors;

    txtY.SelectedIndex = 0;

    //Generate error list button
    Button butError = new Button();
    butError.Width = 100;
    butError.Margin = new Thickness(12, 12, 1, 0);
    butError.HorizontalAlignment = HorizontalAlignment.Left;
    butError.Content = "Get Errors";
    butError.Click += CLLoadErrors;

    //Generate clear button
    Button butClear = new Button();
    butClear.Width = 100;
    butClear.Margin = new Thickness(12, 12, 1, 0);
    butClear.HorizontalAlignment = HorizontalAlignment.Left;
    butClear.Content = "Clear Grid";
    butClear.Click += clearDataGrid;

    //Generate close button
    Button butClose = new Button();
    butClose.Width = 100;
    butClose.Margin = new Thickness(12, 12, 1, 0);
    butClose.HorizontalAlignment = HorizontalAlignment.Left;
    butClose.Content = "Close";
    butClose.Click += CLHide;

    //Add elements to the stackpanel / Also updates them before each instance
    winMainContainerLeft.UpdateLayout();

    winMainContainerLeft.Children.Add(labS);
    winMainContainerLeft.Children.Add(datPickStart);
    winMainContainerLeft.Children.Add(labE);
    winMainContainerLeft.Children.Add(datPickEnd);
    winMainContainerLeft.Children.Add(labY);
    winMainContainerLeft.Children.Add(txtY);
    winMainContainerLeft.Children.Add(butError);
    winMainContainerLeft.Children.Add(butClear);
    winMainContainerLeft.Children.Add(butClose);

    winMainContainerRight.UpdateLayout();
    winMainContainerRight.Children.Remove(datGrid);
    winMainContainerRight.Children.Add(datGrid);

    winMainContainer.UpdateLayout();
    winMainContainer.Orientation = Orientation.Horizontal;
    winMainContainer.Children.Remove(winMainContainerLeft);
    winMainContainer.Children.Add(winMainContainerLeft);
    winMainContainer.Children.Remove(winMainContainerRight);
    winMainContainer.Children.Add(winMainContainerRight);

    winMain.ResizeMode = ResizeMode.NoResize;

    //Display the new form
    winMain.UpdateLayout();
    winMain.Content = winMainContainer;
    winMain.Show();

    datGrid.MouseDoubleClick += datGridDClick;
    txtY.SelectionChanged += new SelectionChangedEventHandler(txtY_SelectionChanged);
} 
```

如果需要，将提供更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:22:57.683

您一次又一次地重用同一个窗口（为什么？），因此您需要在添加新元素之前清除子集合，否则每次单击按钮都会显示窗口+您添加的每个控件，从而导致双/三/... 控制。

更新：我假设您使用`StackPanels`（来自您的评论/`Children`枚举）。`Children`枚举是一个[UIElementCollection](http://msdn.microsoft.com/en-us/library/system.windows.controls.uielementcollection.aspx)，它允许调用该`Clear`方法。只需在添加新控件之前调用它。(在`winMainContainer`,`winMainContainerRight`和`winMainContainerLeft`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:27:32.013

你在哪里初始化winMain？它是静态变量还是存在于您当前的形式中？

我猜你一直在向现有对象添加控件（这会导致复制效果）。要解决此问题，您可以重新初始化表单对象

```
winMain = new WinMainForm(); 
```

或者您可以在添加新子项之前删除 winMain 变量上的所有控件

```
foreach(var c in winMainContainer.children){
  winMainContainer.children.remove(c)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:27:48.240

看起来您根本没有创建新窗口，而只是对存在于更高范围内的“winMain”执行操作。因此，每次调用该函数时，您只是在堆栈面板中添加越来越多的子项。

您可以通过在方法开始时执行类似的操作来解决问题。

```
winMainContainerLeft.Clear();
winMainContainerRight.Clear();
winMainContainer.Children.Clear(); 
```

我还注意到您在示例中包含了以下几行：

```
winMainContainer.Children.Remove(winMainContainerLeft);
winMainContainer.Children.Add(winMainContainerLeft);
winMainContainer.Children.Remove(winMainContainerRight);
winMainContainer.Children.Add(winMainContainerRight); 
```

但是你不需要在添加它们之前删除它们（无论如何这没有任何意义。）

# c# - wp7 xna手势不起作用

> ID：10088651
> 
> 赞同：1
> 
> 时间：2012-04-10T12:18:11.380
> 
> 标签：c#, windows-phone-7, silverlight-4.0

我正在尝试在我的代码中使用拖动手势。但不幸的是它不起作用。以下是我正在使用的代码片段。有什么问题吗？如果是这样帮助我。

```
TouchPanel.EnabledGestures = GestureType.DragComplete | GestureType.Tap | GestureType.Pinch | GestureType.FreeDrag;
while (TouchPanel.IsGestureAvailable)
{
    GestureSample gesture = TouchPanel.ReadGesture();

    if (gesture.GestureType == GestureType.DragComplete)
    {
        // do something                
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:36:15.763

```
 TouchPanel.EnabledGestures = GestureType.Tap | GestureType.DragComplete;
            foreach (GestureSample gestureSample in input.Gestures)
            {
                if (gestureSample.GestureType == GestureType.Tap)
                {
                    Debug.WriteLine("tapped  ");
                }
                else if (gestureSample.GestureType == GestureType.DragComplete)
                {
                    Debug.WriteLine("dragged");
                }
            } 
```

# android - 通过添加 onclick 监听事件来控制 ExpandableList。

> ID：10088654
> 
> 赞同：0
> 
> 时间：2012-04-10T12:18:32.057
> 
> 标签：android

当我单击它时，我创建了一个自定义可扩展列表，将移动到子项目，我可以使用单击侦听器控制可扩展列表（例如，如果我单击其中一个组项目，它应该转到其他视图（布局）而不是继续子项目这是我的代码

```
 public class MainActivity extends Activity
    {

        private ExpandListAdapter ExpAdapter;
        private ArrayList<ExpandListGroup> ExpListItems;
        private ExpandableListView ExpandList;
        Header1 header;
        ExpandableList ExpandableList;

        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.main);
            header = (Header1)findViewById(R.id.header);
            header.initHeader();
            ExpandableList = (ExpandableList)findViewById(R.id.Expanadable);
            ExpandableList.Expandableview();
            ExpandList = (ExpandableListView) findViewById(R.id.ExpList);
            ExpListItems = SetStandardGroups();
            ExpAdapter = new ExpandListAdapter(MainActivity.this, ExpListItems);
            ExpandList.setAdapter(ExpAdapter);
        }

        public ArrayList<ExpandListGroup> SetStandardGroups() {
            ArrayList<ExpandListGroup> list = new ArrayList<ExpandListGroup>();
            ArrayList<ExpandListChild> list2 = new ArrayList<ExpandListChild>();
            ArrayList<ExpandListChild> list3 = new ArrayList<ExpandListChild>();

            ExpandListGroup gru1 = new ExpandListGroup();
            gru1.setName("Employee Search");

            ExpandListChild ch1_1 = new ExpandListChild();
            ch1_1.setName("First Name");
            ch1_1.setTag(null);
            list2.add(ch1_1);

            ExpandListChild ch1_2 = new ExpandListChild();
            ch1_2.setName("Last Name");
            ch1_2.setTag(null);
            list2.add(ch1_2);

            ExpandListChild ch1_3 = new ExpandListChild();
            ch1_3.setName("Email ID");
            ch1_3.setTag(null);
            list2.add(ch1_3);

            ExpandListChild ch1_4 = new ExpandListChild();
            ch1_4.setName("Associate ID");
            ch1_4.setTag(null);
            list2.add(ch1_4);
            gru1.setItems(list2);
            list2 = new ArrayList<ExpandListChild>();

            ExpandListGroup gru2 = new ExpandListGroup();
            gru2.setName("Working Time");

            ExpandListChild ch2_1 = new ExpandListChild();
            ch2_1.setName("Leave Request");
            ch2_1.setTag(null);
            list2.add(ch2_1);

            ExpandListGroup gru4 = new ExpandListGroup();
            gru4.setName("Leave Request");
            list3 = new ArrayList<ExpandListChild>();
            ExpandListChild ch21_1 = new ExpandListChild();
            ch21_1.setName("create Leave");
            ch21_1.setTag(null);
            list3.add(ch21_1);
            gru4.setItems(list3);

            ExpandListChild ch2_2 = new ExpandListChild();
            ch2_2.setName("CATS Regular/Record Working time");
            ch2_2.setTag(null);
            list2.add(ch2_2);

           /* ExpandListChild ch2_3 = new ExpandListChild();
            ch2_3.setName("And an other movie");
            ch2_3.setTag(null);
            list2.add(ch2_3);*/
            gru2.setItems(list2);

            list2 = new ArrayList<ExpandListChild>();
            ExpandListGroup gru3 = new ExpandListGroup();
            gru3.setName("Travel and Expenses");

            ExpandListChild ch3_1 = new ExpandListChild();
            ch3_1.setName("Travel Request");
            ch3_1.setTag(null);
            list2.add(ch3_1);

            ExpandListChild ch3_2 = new ExpandListChild();
            ch3_2.setName("Travel Expenses");
            ch3_2.setTag(null);
            list2.add(ch3_2);
            gru3.setItems(list2);

            list.add(gru1);
            list.add(gru2);
            list.add(gru3);

            return list;
        }

    } 
```

现在，如果我单击“employeesearch”组，它应该移动到另一个布局。并保持其余组与可扩展列表相同。下面是适配器类。

```
public class ExpandListAdapter extends BaseExpandableListAdapter  {

    private Context context;
    private ArrayList<ExpandListGroup> groups;
    public ExpandListAdapter(Context context, ArrayList<ExpandListGroup> groups) {
        this.context = context;
        this.groups = groups;
    }

    public void addItem(ExpandListChild item, ExpandListGroup group) {
        if (!groups.contains(group)) {
            groups.add(group);
        }
        int index = groups.indexOf(group);
        ArrayList<ExpandListChild> ch = groups.get(index).getItems();
        ch.add(item);
        groups.get(index).setItems(ch);
    }
    public Object getChild(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        ArrayList<ExpandListChild> chList = groups.get(groupPosition).getItems();
        return chList.get(childPosition);
    }

    public long getChildId(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return childPosition;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view,
            ViewGroup parent) {
        ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);
        if (view == null) {
            LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = infalInflater.inflate(R.layout.expandlist_child_item, null);
        }
        TextView tv = (TextView) view.findViewById(R.id.tvChild);
        tv.setText(child.getName().toString());
        tv.setTag(child.getTag());
        // TODO Auto-generated method stub
        return view;
    }

    public int getChildrenCount(int groupPosition) {
        // TODO Auto-generated method stub
        ArrayList<ExpandListChild> chList = groups.get(groupPosition).getItems();

        return chList.size();

    }

    public Object getGroup(int groupPosition) {
        // TODO Auto-generated method stub
        return groups.get(groupPosition);
    }

    public int getGroupCount() {
        // TODO Auto-generated method stub
        return groups.size();
    }

    public long getGroupId(int groupPosition) {
        // TODO Auto-generated method stub
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isLastChild, View view,
            ViewGroup parent) {
        ExpandListGroup group = (ExpandListGroup) getGroup(groupPosition);
        if (view == null) {
            LayoutInflater inf = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = inf.inflate(R.layout.expandlist_group_item, null);
        }
        TextView tv = (TextView) view.findViewById(R.id.tvGroup);
        tv.setText(group.getName());
        // TODO Auto-generated method stub
        return view;
    }

    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return true;
    }

    public boolean isChildSelectable(int arg0, int arg1) {
        // TODO Auto-generated method stub
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:14:16.367

似乎很好用`onGroupClick`

从文档：

```
public abstract boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id)
 Since: API Level 1
Callback method to be invoked when a group in this expandable list has been clicked.
Parameters
parent            The ExpandableListConnector where the click happened
v                 The view within the expandable list/ListView that was clicked
groupPosition     The group position that was clicked
id                The row id of the group that was clicked 
```

# c++ - 将字符串分配给 char 数组

> ID：10088661
> 
> 赞同：24
> 
> 时间：2012-04-10T12:19:04.873
> 
> 标签：c++

我想知道为什么第一个语句有效，为什么不能在 c++ 中使用第二个语句

```
char a[10]="iqbal";  // it works

a="iqbal"; // does not work 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-10T12:20:43.050

严格来说，数组不是指针！***并且数组（数组的基地址）不能是可修改的左值***。即它不能出现在赋值运算符的左侧。数组仅在某些情况下衰减为指针。阅读这篇[SO 帖子](https://stackoverflow.com/questions/1461432/what-is-array-decaying)以了解数组何时衰减为指针。这是另[一篇很好的文章](http://www.lysator.liu.se/c/c-faq/c-2.html)，它解释了数组和指针之间的区别

[还可以在此处](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=/com.ibm.vacpp7a.doc/language/ref/clrc05lvalue.htm)阅读有关左值和右值的信息，以便您了解不能出现在 LHS 上的事物`=`

> char a[10]="iqbal"; // 有用

在这种情况下，内部发生的是

```
a[0] = 'i';
a[1] = 'q'; 
 .
 .
a[5] = '\0'; 
```

所以一切都很好，`array[i]`可修改的左值也是如此。

> a="iqbal"; // 不起作用

在内部，这大致相当于

```
0x60000(Address of a, but is a simple number here ) = Address of "iqbal" 
```

这是错误的，因为我们不能为数字分配一些东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T12:27:33.110

char 数组 a 将是静态的，如果您像这样初始化它，则无法更改。无论如何，您永远不能在 c 中分配字符串 a="iqbal"。为此，您必须使用 strncpy 或 memcpy。否则，您将尝试覆盖指向字符串的指针，这不是您想要的。

所以正确的代码会做这样的事情：

```
char a[10];
strncpy(a, "iqbal", sizeof(a) - 1);
a[sizeof(a) - 1] = 0; 
```

-1 是为终止零保留一个字节。请注意，您必须自己检查字符串是否为空终止。糟糕的api。有一个 strlcpy() 调用可以为您执行此操作，但它不包含在 glibc 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T13:35:03.770

> 为什么第一个语句有效，为什么在 C++ 中没有第二个

因为它们是不同的陈述，几乎完全不相关。不要因为他们都使用这个`=`符号而感到困惑。在一种情况下，它代表对象初始化。在另一种情况下，赋值运算符。

您的第一行是合法的，因为初始化聚合是合法的，包括字符数组。

您的第二行不合法，因为分配给数组是不合法的。

由于这是 C++，我可以建议您避免使用裸数组吗？对于字符串使用`std::string`. 对于其他数组，请使用`std::vector`. 如果这样做，您的示例将变为：

```
std::string a = "iqbal";  // it works
a="iqbal"; // so does this 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T12:21:24.453

第一行不是语句，而是带有初始化的声明。第二行是带有赋值运算符的表达式语句。

您不能在 C 中分配数组。

但是您可以使用字符串文字的元素初始化数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-03T23:02:23.400

尝试：

```
char a[10]="iqbal";
char *my_a = a; 
```

并与 my_a 一起工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T12:28:01.517

**在编写 char a[10]="iqbal" 时，您正在使用字符初始化字符数组a**的元素。我们可以对**int**类型做同样的事情（注意**char**类型的处理方式略有不同）： int a[10]={1,2,...};

但是在声明部分之后编写以下内容将是无效的，因为**a**将被视为指针。所以写类似 a={1,2,...}; 或 a="iqbal" 没有任何意义！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-05T08:43:33.460

在后者的声明之后，您不能将字符串文字分配给 char 数组。

一个不错、简单且有效的替代方法是使用`std::strcpy`这样做，如下所示：

```
struct S
{
    char name[30];
};

S s;
std::strcpy( s.name,
    "The moribunds salute you." ); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-16T12:04:17.630

在 C++11 中，您可以使用 lambda 进行初始化，如下所示：

```
bool test = true;
/*const*/ char a[10] = { //Aggregate initialization
                        [=] //capture by value
                           ()//no parameters
                             { //start lambda
    switch (test) {
        case true: return *"test=true"; //*"xxx" don't return a pointer, but the 'string' itself
        case false: return *"test=false"; 
    } //switch
}()};  //}, close the lambda, (), call it, }; close aggregate initialization 
```

当您的环境不支持时，这会派上用场`std::string`，例如 NVidia 的 CUDA 或一些奇怪的嵌入式环境。lambda 被内联，因此在内部它转换为`char a[10] = test?"xxx":"yyy";`

如果您可以选择这样做，您显然希望始终使用`std::string`，因为固定大小的字符缓冲区从根本上来说是个坏主意。

如果您使用`std::string`，您可以使用以下方法将其转换为 char 数组：`chararray = mystring.c_str();`。如果您坚持使用`printf`: ，这很有用`printf("s = %s", mystring.c_str());`。

# android - 如何使用 SurfaceView 将画布绘图保存为图像？

> ID：10088662
> 
> 赞同：1
> 
> 时间：2012-04-10T12:19:09.327
> 
> 标签：android

如何使用 SurfaceView 将画布绘图保存为图像而不是视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:21:32.953

试试下面的代码可能会有所帮助

```
 Bitmap bitmap = Bitmap.createBitmap(mSurfaceView.getWidth(), mSurfaceView.getHeight(), Bitmap.Config.ARGB_8888);
mSurfaceView.draw(new Canvas(bitmap));
try {
    OutputStream out = new BufferedOutputStream(new FileOutputStream(saved.png));
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
} catch (IOException e) {
    Log.w(TAG, e);
} 
```

# jquery - Fancybox iframe 等待上传文件

> ID：10088670
> 
> 赞同：0
> 
> 时间：2012-04-10T12:19:54.833
> 
> 标签：jquery, fancybox

我尝试在 iframe（fancybox）中提交图片，但如果我关闭 iframe，我不会在服务器上获得数据。

（此代码在框架内）

```
<a class="button" id="finishButton" onclick="closeME()"><span>@PhotoPremier.Resources.Global.btnSubmit</span></a>

<script>
function closeME() {
    if (ValidationToSubmit() == true) {
        $('#FormToSubmit').submit();
    }
}

$('#FormToSubmit').submit(function() {
    event.preventDefault();
    parent.$.fancybox.close();
});​
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:34:10.797

关键是您必须等到帖子成功完成，然后才能关闭 iframe。

您是否有能力编辑文件上传响应的服务器端？如果是，那么只需执行常规提交并在响应打印上：

```
<script>parent.$.fancybox.close();</script> 
```

您也可以尝试通过[jQuery.post](http://docs.jquery.com/Post)提交表单并成功关闭 iframe，但这可能不适用于文件上传：

```
<a class="button" id="finishButton" onclick="submit()"><span>@PhotoPremier.Resources.Global.btnSubmit</span></a>

<script>
$('#FormToSubmit').submit(submit);

function submit() {
    if (!ValidationToSubmit()) {
        return;
    }
    var data = {
        x: $("#x").val(),
        y: $("#y").val(),
        ...
    };
    $.post({
        url:"...",
        data: data,
        success: function(){
            parent.$.fancybox.close();
        }
    })
}
</script> 
```

不幸的是，您必须准备要发布的数据对象，但是如果您有几个字段，那应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:22:24.260

我的解决方法非常简单，而且有点创意。

我重定向到一个简单的页面（对我来说，创建一个共享页面 [MVC]，用于所有情况），这个页面获取新的 URL，并通过 javascript 重定向到新的目的地并关闭 iframe。

```
<script type="text/javascript">
if("@ViewBag.Url" != "False")
{
    window.parent.location.href = "@ViewBag.Url";
}
parent.$.fancybox.close();
</script> 
```

# wpf - DataGridTextColumn 上的 DataTrigger

> ID：10088672
> 
> 赞同：0
> 
> 时间：2012-04-10T12:20:02.147
> 
> 标签：wpf, wpf-4.0

我正在尝试在我的一个组合框元素上附加一个数据触发器。触发器应读取 DataGridTextColumn（组合框的祖先）的附加属性并据此做出决定。现在的问题是 DataGridTextColumn 不是 Visual Tree 的一部分，所以我无法通过 RelativeSource Ancestor 获取它。这是示例代码。

```
<ComboBox Name="cmbFilter" DisplayMemberPath="CategoryName">
    <ComboBox.Style>
        <Style>
            <Style.Triggers>
               <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGridTextColumn}}, 
                             Path=Header}"
                             Value="Id">
                    <Setter Property="Control.Visibility" Value="Collapsed"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ComboBox.Style>
</ComboBox> 
```

任何人都可能提出一些替代方案

**编辑：**

@denis我不太了解您的解决方案，所以让我详细解释一下。我正在开发一个通用过滤器，它适用于所有需要过滤功能的 DataGrid。DataGrid 定义将通过在 DataGrid 上指定自定义附加属性“IsFilterable”来指定是否要过滤。各个 DataGridColum 将通过在 DataGridColumn 上指定“FilterDisplayType”来指定他们想要的过滤器类型（组合框或文本框）。除了上述之外，DataGrid 将一无所知。然后，过滤器将根据 DataGrid 和 DataGridColumn（所有类型的列）上的上述附加属性来处理所有功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:42:17.397

我在评论中的观点是，您可以触发绑定到的属性，而不是标题。因为如果您响应标题更改，则必须触发标题，这很好，但这可以是您响应的模型上完全相同的属性，只是在不同的地方。

此外，您不能在 DataGridTextColumn 中放置组合框，因此您必须：

```
<DataGridComboBoxColumn ItemsSource="{Binding CategoryNameItems}" 
                        DisplayMemberPath="{Binding CategoryName}" 
                        Visibility="{Binding MyVisibilityProperty, Converter={StaticResource BoolToVisibility}}" /> 
```

这将隐藏整个列或仅隐藏组合框，将其放在 CellTemplate 中：

```
<DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox ItemsSource="{Binding CategoryNameItems}" DisplayMemberPath="{Binding CategoryName}" 
                                Visibility="{Binding MyVisibilityProperty, Converter={StaticResource BoolToVisibility}}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

# vb.net - ComoboBox 自动将新项目插入数据库

> ID：10088673
> 
> 赞同：0
> 
> 时间：2012-04-10T12:20:14.083
> 
> 标签：vb.net, combobox

我在 VB .net 中使用组合框来显示客户的姓名。如果愿意，他们还可以键入新名称。我可以以某种方式将这些新名称动态地保存在我的 sql 数据库中吗？

我的意思是如果名称是新的并且在我的数据库中不存在，它可以自动保存到数据库中吗？

我的组合框绑定到我的姓名表。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:36:43.470

如果您的组合框绑定到数据表，那么您应该能够使用 DataAdapter 根据您的数据表更新数据库表。

您也可以通过将其绑定到组合框 Validated 事件中来自动执行此操作。

# javascript - 位置感知链接

> ID：10088674
> 
> 赞同：0
> 
> 时间：2012-04-10T12:20:14.793
> 
> 标签：javascript, windows-phone-7, localization

我有一个网页可以让用户访问多个搜索引擎，接下来我唯一想做的就是启用位置感知搜索：如果有人从英国搜索，我希望它是 British Uk 而不是例如希腊语。有什么方法可以检测用户使用 Javascript 时所在的国家/地区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:42:15.957

地理位置 API：

[http://html5doctor.com/finding-your-position-with-geolocation/](http://html5doctor.com/finding-your-position-with-geolocation/)

# c# - LINQ 连接来自不同类的值

> ID：10088682
> 
> 赞同：2
> 
> 时间：2012-04-10T12:20:36.013
> 
> 标签：c#, linq, lambda

我是 LINQ 的新手，如果有人问我的问题，我很抱歉

我有 2 节课

```
public class Person
{
    int ID {get;set;}
    string FirstName {get;set;}
    string LastName {get;set;}
} 
```

和

```
public class House
{
    int ID {get;set;}
    string Address {get;set;}
    string ZipCode {get;set;}
    int PersonId {get;set;}
} 
```

我将房屋列表保存在 IEnumerable 列表中

```
IEnumerable<House> ListHouses = GetAllHouses(); 
```

GetAllHouses 从数据库中返回房屋列表

我想在 LINQ 中使用 Lamda select 来执行以下操作

```
var st = ListHouses .Select(h => new
{
    id = h.ID,
    Address= h.Address,
    Zip= h.ZipCode ,
    PersonFirstName = GetPersonByID(h.PersonId ).FirstName, 
    PersonLastname = GetPersonByID(h.PersonId ).lastname

}); 
```

其中 GetPersonByID 返回`Person`具有给定 ID 的 Type 对象。然后我取他的名字和姓氏。

我的问题是这样的：

而不是为变量（personFirstName 和 PersonLastName）获取 Person 2 次有没有一种方法可以让我一次获取它然后使用它。就像是

```
PersonForId = GetPersonByID(h.PersonId)
PersonFirstName =  PersonLastName.FirstName,
PersonLastname = PersonLastName.lastname 
```

我正在寻找类似于 Join in SQL 的东西，您可以在其中加入另一个表中的值。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:44:01.753

You're extremely close! Using your code (and making all properties on House and Person public), here is a method using the LINQ Join method:

```
var st = GetAllHouses().Join(GetAllPersons(),
    outerKey => outerKey.PersonId,
    innerKey => innerKey.ID,
    (house, person) => new
    {
        house.ID,
        house.Address,
        house.ZipCode,
        PersonFirstName = person.FirstName,
        PersonLastname = person.LastName
    }); 
```

Note: I would recommend the GetAllPersons() and the GetAllHouses() methods return IQueryable rather than IEnumerable. Doing so will build the expression (including the join), which means LINQ-to-SQL (or Entities) will build a proper SQL statement with the JOIN included, instead of enumerating the collections and *then* joining.

Additional information on such can be found here: [Returning IEnumerable<T> vs. IQueryable<T>](https://stackoverflow.com/questions/2876616/returning-ienumerablet-vs-iqueryablet)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:24:04.373

```
using System;
using System.Linq;

class Customer
{
    public int ID { get; set; }
    public string Name { get; set; }
}

class Order
{
    public int ID { get; set; }
    public string Product { get; set; }
}

class Program
{
    static void Main()
    {
    // Example customers.
    var customers = new Customer[]
    {
        new Customer{ID = 5, Name = "Sam"},
        new Customer{ID = 6, Name = "Dave"},
        new Customer{ID = 7, Name = "Julia"},
        new Customer{ID = 8, Name = "Sue"}
    };

    // Example orders.
    var orders = new Order[]
    {
        new Order{ID = 5, Product = "Book"},
        new Order{ID = 6, Product = "Game"},
        new Order{ID = 7, Product = "Computer"},
        new Order{ID = 8, Product = "Shirt"}
    };

    // Join on the ID properties.
    var query = from c in customers
            join o in orders on c.ID equals o.ID
            select new { c.Name, o.Product };

    // Display joined groups.
    foreach (var group in query)
    {
        Console.WriteLine("{0} bought {1}", group.Name, group.Product);
    }
    }
} 
```

输出

Sam 买了 Book Dave 买了 Game Julia 买了 Computer Sue 买了 Shirt

# sockets - 在 CentOS 上的 Hadoop 数据节点上打开套接字连接

> ID：10088683
> 
> 赞同：0
> 
> 时间：2012-04-10T12:20:36.157
> 
> 标签：sockets, hadoop, centos, cloudera

我在我的 centos 6.2.64 机器上运行示例 hadoop 作业以进行调试，

```
hadoop jar hadoop-examples-0.20.2-cdh3u3.jar randomtextwriter o 
```

并且似乎在作业完成后，与数据节点的连接仍然存在。

```
java       8979 username   51u     IPv6          326596025        0t0       TCP localhost:50010->localhost:56126 (ESTABLISHED)
java       8979 username   54u     IPv6          326621990        0t0       TCP localhost:50010->localhost:56394 (ESTABLISHED)
java       8979 username   59u     IPv6          326578719        0t0       TCP *:50010 (LISTEN)
java       8979 username   75u     IPv6          326596390        0t0       TCP localhost:50010->localhost:56131 (ESTABLISHED)
java       8979 username   84u     IPv6          326621621        0t0       TCP localhost:50010->localhost:56388 (ESTABLISHED)
java       8979 username   85u     IPv6          326622171        0t0       TCP localhost:50010->localhost:56395 (ESTABLISHED)
java       9276 username   77u     IPv6          326621714        0t0       TCP localhost:56388->localhost:50010 (ESTABLISHED)
java       9276 username   78u     IPv6          326596118        0t0       TCP localhost:56126->localhost:50010 (ESTABLISHED)
java       9408 username   75u     IPv6          326596482        0t0       TCP localhost:56131->localhost:50010 (ESTABLISHED)
java       9408 username   76u     IPv6          326622170        0t0       TCP localhost:56394->localhost:50010 (ESTABLISHED)
java       9408 username   77u     IPv6          326622930        0t0       TCP localhost:56395->localhost:50010 (ESTABLISHED) 
```

最终我在一段时间后在datanode日志中得到了这个错误。

```
2012-04-12 15:56:29,151 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: DatanodeRegistration(127.0.0.1:50010, storageID=DS-591618896-176.9.25.36-50010-1333654003291, infoPort=50075, ipcPort=50020):DataXceiver
java.io.FileNotFoundException: /tmp/hadoop-serendio/dfs/data/current/subdir4/blk_-4401902756916730461_31251.meta (Too many open files)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:137)
        at org.apache.hadoop.hdfs.server.datanode.FSDataset.getMetaDataInputStream(FSDataset.java:996)
        at org.apache.hadoop.hdfs.server.datanode.BlockSender.<init>(BlockSender.java:125)
        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.readBlock(DataXceiver.java:258)
        at org.apache.hadoop.hdfs.server.datanode.DataXceiver.run(DataXceiver.java:163) 
```

这会导致生产系统出现问题，即 datanode 用尽 xcievers。这种行为似乎不会发生在我的 Ubuntu 开发盒上。我们将 cloudera hadoop-0.20.2-cdh3u3 用于我们的目的。

有解决此问题的任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:56:11.447

如果您尚未指定，请添加 hdfs-site.xml：

```
<property>
<name>dfs.datanode.max.xcievers</name>
<value>4096</value>
</property> 
```

我认为默认值是 256....

这是公式类型计算你应该有多少 xciever 以避免这样的错误......

```
 # of xcievers = (( # of storfiles + # of regions * 4 + # of regioServer * 2 ) / # of datanodes)+reserves(20%) 
```

# objective-c - NSPredicate 忽略空格

> ID：10088688
> 
> 赞同：9
> 
> 时间：2012-04-10T12:20:47.693
> 
> 标签：objective-c, cocoa-touch, whitespace, nspredicate

我需要使用 NSPredicate 来匹配两个字符串，不区分大小写、不区分变音符号**和不区分空格**。

谓词看起来像这样：

```
[NSPredicate predicateWithFormat:@"Key ==[cdw] %@", userInputKey]; 
```

'w' 修饰符是为了表达我想使用的东西而发明的。

我不能只修剪，`userInputKey`因为数据源“键”值中也可能有空格（它们需要那些空格，我不能只事先修剪它们）。

例如，给定一个`userInputKey`“abc”，谓词应该匹配所有

```
{“abc”、“ab c”、“a BC”}
```

等等。给定一个`userInputKey`“a B C”，谓词也应该匹配上面集合中的所有值。

这不可能很难做到，不是吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T12:23:22.793

如何定义这样的东西：

```
+ (NSPredicate *)myPredicateWithKey:(NSString *)userInputKey {
    return [NSPredicate predicateWithBlock:^BOOL(NSString *evaluatedString, NSDictionary *bindings) {
        // remove all whitespace from both strings
        NSString *strippedString=[[evaluatedString componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] componentsJoinedByString:@""];
        NSString *strippedKey=[[userInputKey componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] componentsJoinedByString:@""];
        return [strippedString caseInsensitiveCompare:strippedKey]==NSOrderedSame;
    }];
} 
```

然后像这样使用它：

```
NSArray *testArray=[NSArray arrayWithObjects:@"abc", @"a bc", @"A B C", @"AB", @"a B d", @"A     bC", nil];
NSArray *filteredArray=[testArray filteredArrayUsingPredicate:[MyClass myPredicateWithKey:@"a B C"]];               
NSLog(@"filteredArray: %@", filteredArray); 
```

结果是：

```
2012-04-10 13:32:11.978 Untitled 2[49613:707] filteredArray: (
    abc,
    "a bc",
    "A B C",
    "A     bC"
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-12T04:14:19.030

**斯威夫特 4**：

```
func ignoreWhiteSpacesPredicate(id: String) -> NSPredicate {
    return NSPredicate(block: { (evel, binding) -> Bool in
        guard let str = evel as? String else {return false}
        let strippedString = str.components(separatedBy: CharacterSet.whitespaces).joined(separator: "")
        let strippedKey = id.components(separatedBy: CharacterSet.whitespaces).joined(separator: "")
        return strippedString.caseInsensitiveCompare(strippedKey) == ComparisonResult.orderedSame
    })
} 
```

例子：

```
let testArray:NSArray =  ["abc", "a bc", "A B C", "AB", "a B d", "A     bC"]
let filteredArray = testArray.filtered(using: ignoreWhiteSpacesPredicate(id: "a B C")) 
```

结果：

> [“abc”，“a bc”，“AB C”，“A bC”]

# django - 如何在模型中保存上传文件的文件名

> ID：10088693
> 
> 赞同：0
> 
> 时间：2012-04-10T12:21:05.440
> 
> 标签：django, django-admin

我需要保存没有文件的完整路径以及文件名。我这样做：

```
class Photo(models.Model):
    photo = models.ImageField(upload_to = settings.PATH_PHOTOS_SOURCE)
    user = models.ForeignKey(UserProfile, editable=False)
    item = models.ForeignKey(Item, default=0)
    filename = models.CharField(max_length=100, default='', editable=False)

    def save(self, *args, **kwargs):
        self.filename = os.path.basename(self.photo.url)
        super(Photo, self).save(*args, **kwargs) 
```

这是可行的，但存在的情况是，当具有现有名称的文件已经存在，并且在磁盘中写入文件 example_1.jpg、example_2.jpg，但在文件名中保存不正确的文件名 example.jpg

我改变了我的保存方法：

```
def save(self, *args, **kwargs):
    super(Photo, self).save(*args, **kwargs)        
    self.filename = os.path.basename(self.photo.url)
    super(Photo, self).save() 
```

它的工作，但我不喜欢这个代码，也许是更优雅的代码。

我试图用信号来做到这一点，但我遇到了保存递归的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:53:37.840

而不是`settings.PATH_PHOTOS_SOURCE`，[将函数传递给 upload_to](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)。

```
def upload_path_handler(self, filename):
    return os.path.join(settings.PATH_PHOTOS_SOURCE,
                        os.path.basename(self.photo.url))

# in model
photo = models.ImageField(upload_to=upload_path_handler) 
```

如果您想使用模型实例 ID 作为文件名，请参考[Django 管理文件上传与当前模型 ID](https://stackoverflow.com/questions/9968532/django-admin-file-upload-with-current-model-id)

您可能需要考虑 photo.url 的可能值，以确保直接将其用作文件名是安全的。

# java - 为什么我无法安装 Android SDK r18？在 Google 服务器中找不到 repository-6.xml

> ID：10088694
> 
> 赞同：0
> 
> 时间：2012-04-10T12:21:07.950
> 
> 标签：java, android, eclipse, sdk

这是日志：获取[http://dl-ssl.google.com/android/repository/addons_list-1.xml](http://dl-ssl.google.com/android/repository/addons_list-1.xml) 验证 XML 获取的附加组件列表成功获取 URL：[http ://dl-ssl.google.com/ android/repository/repository-6.xml](http://dl-ssl.google.com/android/repository/repository-6.xml) 完成加载包。

事实上，repository-6.xml 没有正确下载。所以对话框中没有列出需要安装的包。

我已经尝试检查选项：“强制 https://... 使用 http://... 获取源”，但仍然无法更新或安装 SDK 工具和平台。

所以我在浏览器中复制网址“https://dl-ssl.google.com/android/repository/repository-6.xml”并打开它，显示404页面。但是同一 url 目录中的文件“repository-5.xml”是可用的。

有人安装 SDK r18 成功吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:23:26.390

问题已解决。好像是google自己的problem，4小时后我现在可以安装和更新了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:30:42.010

在 Eclipse 中转到：Windows-检查更新，如果有，eclipse 会找到 android sdk 的更新。

# wcf - 我可以使用具有传输安全性 (https) 但没有客户端证书的 NetTcpBinding

> ID：10088695
> 
> 赞同：4
> 
> 时间：2012-04-10T12:21:09.140
> 
> 标签：wcf, ssl, nettcpbinding, transport

我们使用 SecurityMode.None 运行 NetTcpBinding。

现在我们还想要对发送的数据进行加密。将 SecurityMode 设置为*Transport*似乎还不够，因为尽管服务器已启动，但客户端无法再连接到服务器（在此更改之前有效）。

我还需要改变什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T13:57:16.040

HTTPS 是 HTTP 协议的一部分。

NetTcpBinding 使用不是 HTTP 的二进制协议。因此，您不能将 HTTPS 与 NetTcp 一起使用。

有关保护 NetTcp 的信息，请参阅：http: [//msdn.microsoft.com/en-us/library/ms789011.aspx](http://msdn.microsoft.com/en-us/library/ms789011.aspx)

# android - 从代码中取消设置默认主屏幕

> ID：10088698
> 
> 赞同：1
> 
> 时间：2012-04-10T12:21:17.377
> 
> 标签：android, homescreen

我正在尝试以编程方式取消设置默认主屏幕。我的应用在清单中被定义为主页，但如果用户选择手机主屏幕作为默认设置（在选择主屏幕的对话框中），我无法再次将我的应用设置为主页。

如果用户选择我的应用作为默认主屏幕（使用“设置为默认”复选框），我只需要做：

clearPackagePreferredActivity("MypackageApp"); //来自包管理器

然后选择器再次出现。但是我不知道如何再次出现选择当前主屏幕的对话框（当用户默认选择手机主屏幕时）。我试过这个：

clearPackagePreferredActivities("com.android.launcher"); //来自包管理器但我得到一个错误：java.lang.security.exception 用户***和当前进程都没有android.permission.SET_PREFERRED_APPLICATIONS。但我已经在我的清单应用程序中定义了这个权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:26:31.390

> 我正在尝试以编程方式取消设置默认主屏幕。

幸运的是，出于明显的安全原因，这是不可能的。

> 我的应用在清单中被定义为主页，但如果用户选择手机主屏幕作为默认设置（在选择主屏幕的对话框中），我无法再次将我的应用设置为主页。

切换回不同主屏幕的用户会认为这是一件非常好的事情。

> 但我已经在我的清单应用程序中定义了这个权限。

仅当您的应用程序使用与用于签署固件相同的签名密钥签署时，您才能持有该权限。

# blackberry - 将字符串格式转换为另一种日期格式

> ID：10088699
> 
> 赞同：0
> 
> 时间：2012-04-10T12:21:22.197
> 
> 标签：blackberry, java-me, time

我的字符串格式是：M/d/yyyy h:m:s aa

现在，我想将其更改为 yyyy-MM-ddTHH:mm:ss 格式。

我怎样才能以这种格式更改它。请告诉我适当的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:11:34.293

该方法`getConvertedDate(String)`将进行纯文本解析以进行转换。

```
private String getConvertedDate(String inputDate) {
    // extract and adjust Month
    int index = inputDate.indexOf('/');
    String month = inputDate.substring(0, index);
    if (month.length() < 2) {
        month = "0" + month;
    }

    // extract and adjust Day
    inputDate = inputDate.substring(index + 1);
    index = inputDate.indexOf('/');
    String day = inputDate.substring(0, index);
    if (day.length() < 2) {
        day = "0" + day;
    }

    // extract Year
    inputDate = inputDate.substring(index + 1);
    index = inputDate.indexOf(' ');
    String year = inputDate.substring(0, index);

    // extract Hour
    inputDate = inputDate.substring(index + 1);
    index = inputDate.indexOf(':');
    String hour = inputDate.substring(0, index);

    // extract and adjust Minute
    inputDate = inputDate.substring(index + 1);
    index = inputDate.indexOf(':');
    String minute = inputDate.substring(0, index);
    if (minute.length() < 2) {
        minute = "0" + minute;
    }

    // extract and adjust Second
    inputDate = inputDate.substring(index + 1);
    index = inputDate.indexOf(' ');
    String second = inputDate.substring(0, index);
    if (second.length() < 2) {
        second = "0" + second;
    }

    // extract AM/PM marker
    // adjust hour, +12 for PM
    inputDate = inputDate.substring(index + 1);         
    String am_pm_marker = inputDate.substring(0);
    if (am_pm_marker.equalsIgnoreCase("pm")) {
        int hourValue = 0;
        try {
            hourValue = Integer.parseInt(hour);
        } catch (Exception e) {
        }
        hourValue += 12;
        hour = "" + hourValue;
        if (hour.length() < 2) {
            hour = "0" + hour;
        }
    } else {
        if (hour.length() < 2) {
            hour = "0" + hour;
        }
    }

    String outputDate = year + "-" + month + "-" + day;
    outputDate += "T" + hour + ":" + minute + ":" + second;
    return outputDate;
} 
```

样本输入和输出：

```
String input = "04/01/2012 9:55:47 pm"; 
System.out.println("Output: " + getConvertedDate(input));
// Output: 2012-04-01T21:55:47 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-10T12:32:56.863

```
Date date = (Date)new SimpleDateFormat("M/d/yyyy h:m:s aa").parse(your_string_date);
String finalFormat = new SimpleDateFormat("yyyy-MM-ddTHH:mm:ss").format(date) 
```

基本上第一个 SimpleDateFormat 识别您的原始格式并将其解析为日期。然后第二个将日期对象格式化为您需要的格式。

我没有 jdk 来测试这里，但它应该可以工作。

检查此链接的格式语法以防万一出现问题：
[http ://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# dicom - dicom 窗口中心，窗口宽度

> ID：10088701
> 
> 赞同：11
> 
> 时间：2012-04-10T12:21:25.657
> 
> 标签：dicom

我正在尝试实现 dicom veiwer。我以为我快完成了。但有些 CT 图像与 MATLAB 不同。所以我检查了标签。然后我发现了一些东西。

这些图像具有窗口中心和窗口宽度两个值。

> 窗口中心 = [2000]，窗口宽度 = [8000]

然后我计算 yMin，yMax。

> yMin = (winCenter - 0.5 * winWidth)
> yMax = (winCenter + 0.5 * winWidth)

```
if(inPixel <= yMin)
  outpixel = 0;
else if (inPixel > yMax) 
  outPixel = 255;  
else  
  outPixel = (((i - (winCenter - 0.5)) / (winWidth - 1)) + 0.5) * 255; 
```

但问题是这种情况。

> 窗口中心 = [-600;40]，窗口宽度 = [400;1200]

我如何计算这个值？任何人都知道我可以如何实现这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T14:41:23.860

使用多个窗口设置查看 CT 图像以查看图像的不同特征的情况并不少见。例如，您将使用一个窗口设置来查看骨骼，而使用另一个窗口设置来查看软组织。这可能是模态设备发送的[窗口中心 (0028, 1050)](http://dicom.innolitics.com/ciods/ct-image/voi-lut/00281050)和[窗口宽度 (0028, 1051)](http://dicom.innolitics.com/ciods/ct-image/voi-lut/00281051)的值重数大于 1 的原因。因此，在这种情况下，您的窗口设置 (center, width) 是 (-600, 400) 或 (40, 1200)，您可以使用任一设置进行显示。

# sharepoint - 如何使用 sharepoint 2010 在网站集中查找访问次数最多的页面

> ID：10088705
> 
> 赞同：0
> 
> 时间：2012-04-10T12:21:34.050
> 
> 标签：sharepoint, web, analytics

我想在整个网站集中找到 3 个浏览次数最多的页面并显示它们的页面标题。使用 Web 分析 webpart，我获得了前 10 个页面的 URL。但我想要页面标题而不是 URL。有没有办法做到这一点？

问候， 拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:24:04.340

这个帖子（http://auditlogsp.codeplex.com/）可以给你一个参考。该解决方案可以帮助我们记录 SharePoint 事件的来源，实际上包括“查看”操作。您可以将这些信息存储在隔离的数据库中，以分析“热门”报告。

# css - Twitter Bootstrap - 如何水平或垂直居中元素

> ID：10088706
> 
> 赞同：293
> 
> 时间：2012-04-10T12:21:34.187
> 
> 标签：css, twitter-bootstrap

有没有办法在主要父母中垂直或水平居中html元素？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2013-02-01T09:09:01.993

**更新**：虽然这个答案在 2013 年初可能是正确的，但不应再使用它。正确的解决方案[使用 offsets](https://stackoverflow.com/a/40002430/1729885)，如下所示：

```
class="mx-auto" 
```

* * *

至于其他用户的建议，还有本地引导类可用，例如：

```
class="text-center"
class="pagination-centered" 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2014-04-22T21:47:55.943

从[引导文档](http://getbootstrap.com/css/#helper-classes-center)：

> 通过 将元素设置为`display: block`并居中`margin`。可作为 mixin 和 class 使用。

```
<div class="center-block">...</div> 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2016-01-01T22:17:04.343

如果您试图在 div 中将图像居中，但图像不会居中，这可以描述您的问题：

[JSFiddle Demo 问题](https://jsfiddle.net/e0cr1nL2/)

```
<div class="col-sm-4 text-center">
    <img class="img-responsive text-center" src="myPic.jpg" />
</div> 
```

该类向图像标签`img-responsive`添加一条`display:block`指令，该指令停止`text-align:center`（`text-center`类）工作。

解决方案：

```
<div class="col-sm-4">
    <img class="img-responsive center-block" src="myPic.jpg" />
</div> 
```

[**解决方案的 JSFiddle 演示**](https://jsfiddle.net/e0cr1nL2/1/)

添加`center-block`类会覆盖`display:block`使用类放入的指令`img-responsive`。没有`img-responsive`类，图像将通过添加`text-center`类来居中

* * *

此外，您应该了解[flexbox](https://medium.com/codingthesmartway-com-blog/introduction-to-bootstrap-4-flex-layout-flexbox-for-bootstrap-f85405ce5ebf)的基础知识以及如何使用它，因为[Bootstrap 4 现在](https://www.w3schools.com/bootstrap4/bootstrap_flex.asp)原生使用它。

[这是Brad Schiff](https://www.youtube.com/watch?v=k32voqQhODc)提供的出色的快节奏视频教程

这是一个很棒的[备忘单](https://yoksel.github.io/flex-cheatsheet/)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2017-03-20T14:10:59.490

在**Bootstrap 4**中，**居中**方法发生了变化。

**Bootstrap 4中的水平中心**

*   `text-center`仍然用于`display:inline`元素
*   `mx-auto`取代`center-block`中心`display:flex`儿童
*   `offset-*` *或* `mx-auto`可用于居中网格列

`mx-auto`（自动 x 轴边距）将居中`display:block`或`display:flex`具有*定义宽度*的元素、（`%`、、、等）。**网格列上默认使用弹性盒**，因此弹性盒居中的方法也多种多样。`vw``px`

 **[**演示**Bootstrap 4 水平居中](http://www.codeply.com/go/SOSvvKpLOc)

**对于 BS4 中的垂直居中，请参阅** [https://stackoverflow.com/a/41464397](https://stackoverflow.com/a/41464397)

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2016-03-22T11:19:30.567

您可以像这样直接写入您的 CSS 文件：

```
.content {
  position: absolute;
  top: 50%;
  left:50%;
  transform: translate(-50%,-50%);
  }
```

```
<div class = "content" >

   <p> some text </p>
  </div>
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-06-19T21:16:38.210

我用这个

```
<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0 0;
    }

    .container-fluid {
        height: 100%;
        display: table;
        width: 100%;
        padding-right: 0;
        padding-left: 0;
    }

    .row-fluid {
        height: 100%;
        display: table-cell;
        vertical-align: middle;
        width: 100%;
    }

    .centering {
        float: none;
        margin: 0 auto;
    }
</style>
<body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="offset3 span6 centering">
                content here
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-04-06T16:52:57.353

对于水平居中，你可以有这样的东西：

```
.centering{
float:none;
margin:0 auto
}

 <div class="span8 centering"></div> 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-07-12T13:14:49.873

使用 Bootstrap 4，您可以使用基于 flex 的 HTML 类`d-flex`、`justify-content-center`和`align-items-center`：

```
<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<div class="d-flex justify-content-center align-items-center">
    <button type="submit" class="btn btn-primary">Create</button>
</div>
```

来源：[引导 4.1](https://getbootstrap.com/docs/4.1/utilities/flex/)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-06-18T12:56:20.133

我喜欢[类似问题的解决方案](https://stackoverflow.com/a/25036303)：

> `text-center`在实际的表数据`<td>`和表头`<th>`元素上使用引导程序的类。所以
> 
> `<td class="text-center">Cell data</td>`和`<th class="text-center">Header cell data</th>`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-19T10:20:21.203

Bootstrap 4 使用 flex 属性解决了这个问题。您可以使用这些类：

```
<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<div class="d-flex justify-content-center align-items-center">
    <button type="submit" class="btn btn-primary">Create</button>
</div>
```

这些类将使您的内容水平和垂直居中。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-11-19T15:19:51.960

我在 Bootstrap 4 中发现你可以这样做：

**中心水平**确实是`text-center`类

**center vertical**但是使用引导类会添加两者`mb-auto mt-auto`，以便将边距顶部和边距底部设置为自动。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-29T10:48:22.320

对于[bootstrap4](https://getbootstrap.com/docs/4.3/utilities/flex/#justify-content)几个项目的垂直中心

**d-flex**用于弹性规则

**用于项目垂直方向的**flex-column****

 ****align-items-center**用于水平居中

**justify-content-center**用于垂直居中

**样式='高度：300px;'** 必须具有中心为计算或使用**h-100**类的设定点

```
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<div class="d-flex flex-column align-items-center justify-content-center bg-secondary" style="
    height: 300px;
">
    <div class="p-2 bg-primary">Flex item</div>
    <div class="p-2 bg-primary">Flex item</div>
    <div class="p-2 bg-primary">Flex item</div>
</div>
```****

# c - 从 winapi 更改麦克风灵敏度

> ID：10088708
> 
> 赞同：3
> 
> 时间：2012-04-10T12:21:34.687
> 
> 标签：c, winapi, audio

我怎样才能改变麦克风灵敏度，就像我可以从控制面板使用一样？，我想通过winapi来做，代码必须兼容windows 7 + windowXp 32bit和64bit ..

# redirect - 带有 meta http-equiv="REFRESH" 重定向的谷歌分析

> ID：10088718
> 
> 赞同：4
> 
> 时间：2012-04-10T12:21:47.070
> 
> 标签：redirect, google-analytics

是否可以将谷歌分析应用于使用`<meta http-equiv="REFRESH" content="0;url={url}">`重定向方法的页面？

我假设此类页面上的重定向会在 js 有机会运行之前发生，因此分析无法对其进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:20:08.977

是的，如果你想跟踪这些页面，你需要先触发谷歌分析跟踪，然后再重定向。

我会推荐：

*   在异步语法上使用 ga.js 传统语法
*   在调用跟踪后等待大约 150 毫秒，然后再重定向（使用 setTimeout() ，在 Javascript 中，而不是使用元标记）

例如，使用 Google Chrome 的[Google Analytics 调试器](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)扩展来检查它的运行情况

# linq - EF Linq 查询比较多行数据

> ID：10088726
> 
> 赞同：1
> 
> 时间：2012-04-10T12:22:14.433
> 
> 标签：linq, entity-framework

我想创建一个 Linq 查询来比较单个表中多行的日期。该表包含轮询 Web 服务以获取帐户余额数据的数据。不幸的是，轮询间隔不是 100% 确定的，这意味着每个帐户每天可以有 0-1 个条目。

对于应用程序，我需要将这些数据重新格式化为某种格式（见下面的输出）。我包括了样本数据和表格的描述。

任何人都可以帮助我处理将产生所需输出的 ​​EF Linq 查询吗？

桌子：

```
id 账户编号
balance 计量时账户中的可用额度
create_date 检索数据的日期时间

```

表名：Balances
字段：id（int）
字段：balance（bigint）
字段：create_date（datetime）

样本数据：

```
id 余额 create_date
3 40 2012-04-02 07:01:00.627
1 55 2012-04-02 13:41:50.427
2 9 2012-04-02 03:41:50.727
1 40 2012-04-02 16:21:50.027
1 49 2012-04-02 16:55:50.127
1 74 2012-04-02 23:41:50.627
1 90 2012-04-02 23:44:50.427
3 3 2012-04-02 23:51:50.827

3 -10 2012-04-03 07:01:00.627
1 0 2012-04-03 13:41:50.427
2 999 2012-04-03 03:41:50.727
1 50 2012-04-03 15:21:50.027
1 49 2012-04-03 16:55:50.127
1 74 2012-04-03 23:41:50.627
2 -10 2012-04-03 07:41:50.727
1 100 2012-04-03 23:44:50.427
3 0 2012-04-03 23:51:50.827

```

预期输出：

**id** *帐户 ID*
**日期** *用于在行中生成日期的数据组件*
**balance_last_measurement** *日期*
**差** *的最后一次测量的余额 日期的第一次和最后一次测量之间的余额差*

*   在 2012 年 4 月 2 日，id 2 只有 1 个测量值，它将差值设置为最后（也是唯一的）测量值。

```
id 日期 balance_last_measurement 差异
1 2012-04-02 90 35
1 2012-04-03 100 10
2 2012-04-02 9 9
2 2012-04-03 -10 -19
3 2012-04-02 3 -37
3 2012-04-03 0 37

```

## 更新时间 2012-04-10 20:06

Raphaël Althaus 的回答非常好，但我在最初的请求中确实犯了一个小错误。“预期输出”中的差异字段应该是：

1.  前一天最后一次测量与当天最后一次测量的差值
2.  如果没有前一天，则应使用当天的第一次测量和最后一次测量

这可能吗？好像很复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:38:01.453

我会尝试这样的事情。

```
var query = db.Balances
                .OrderBy(m => m.Id)
                .ThenBy(m => m.CreationDate)
                .GroupBy(m => new
                                  {
                                      id = m.Id,
                                      year = SqlFunctions.DatePart("mm", m.CreationDate),
                                      month = SqlFunctions.DatePart("dd", m.CreationDate),
                                      day = SqlFunctions.DatePart("yyyy", m.CreationDate)
                                  }).ToList()//enumerate there, this is what we need from db
                .Select(g => new
                                 {
                                     id = g.Key.id,
                                     date = new DateTime(g.Key.year, g.Key.month, g.Key.day),
                                     last_balance = g.Select(m => m.BalanceValue).LastOrDefault(),
                                     difference = (g.Count() == 1 ? g.First().BalanceValue : g.Last().BalanceValue - g.First().BalanceValue)
                                 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:04:52.663

好吧，一个可能没有优化的解决方案，但看看它是否有效。

首先，我们创建一个结果类

```
public class BalanceResult
    {
        public int Id { get; set; }
        public DateTime CreationDate { get; set; }
        public IList<int> BalanceResults { get; set; }
        public int Difference { get; set; }

        public int LastBalanecResultOfDay {get { return BalanceResults.Last(); }}
        public bool HasManyResults {get { return BalanceResults != null && BalanceResults.Count > 1; }}
        public int DailyDifference { get { return HasManyResults ? BalanceResults.Last() - BalanceResults.First() : BalanceResults.First(); } }

    } 
```

然后我们稍微改变一下我们的查询

```
var query = db.Balances
                .GroupBy(m => new
                                  {
                                      id = m.Id,
                                      year = SqlFunctions.DatePart("mm", m.CreationDate),
                                      month = SqlFunctions.DatePart("dd", m.CreationDate),
                                      day = SqlFunctions.DatePart("yyyy", m.CreationDate)
                                  }).ToList()//enumerate there, this is what we need from db
                .Select(g => new BalanceResult
                                 {
                                     Id = g.Key.id,
                                     CreationDate = new DateTime(g.Key.year, g.Key.month, g.Key.day),
                                     BalanceResults = g.OrderBy(l => l.CreationDate).Select(l => l.BalanceValue).ToList()
                                 }).ToList(); 
```

最后

```
foreach (var balanceResult in balanceResults.ToList())
            {
                var previousDayBalanceResult = balanceResults.FirstOrDefault(m => m.Id == balanceResult.Id && m.CreationDate == balanceResult.CreationDate.AddDays(-1));
                balanceResult.Difference = previousDayBalanceResult != null ? balanceResult.LastBalanecResultOfDay - previousDayBalanceResult.LastBalanecResultOfDay : balanceResult.DailyDifference;
            } 
```

如前所述，性能（例如字典的使用）、代码可读性当然应该提高，但是……这就是想法！

# c# - 使用表达式调用属性和对象并确定对象是否为空

> ID：10088727
> 
> 赞同：3
> 
> 时间：2012-04-10T12:22:16.767
> 
> 标签：c#, lambda, expression

我希望能够调用可能为空但未明确地在调用时检查它们是否为空的对象的属性。

像这样：

```
var something = someObjectThatMightBeNull.Property; 
```

我的想法是创建一个采用表达式的方法，如下所示：

```
var something = GetValueSafe(() => someObjectThatMightBeNull.Property);

TResult? GetValueSafe<TResult>(Expression<Func<TResult>> expression) 
    where TResult : struct
{
    // what must I do?
} 
```

我需要做的是检查表达式并确定是否`someObjectThatMightBeNull`为空。我该怎么做？

如果有任何更聪明的懒惰方式，我也会很感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:28:58.643

你所说的被称为空安全解除引用——这个 SO 特别提出了这个问题：[C# if-null-then-null expression](https://stackoverflow.com/questions/4244225/c-sharp-if-null-then-null-expression)。

表达式并不是真正的答案（请参阅下文以澄清我对该声明的原因）。但是，此扩展方法可能是：

```
public static TResult? GetValueSafe<TInstance, TResult>(this TInstance instance,
  Func<TInstance, TResult> accessor)
  where TInstance : class
  where TResult : struct
{  
   return instance != null ? (TResult?)accessor(instance) : (TResult?)null;
} 
```

现在你可以这样做：

```
MyObject o = null;
int? i = o.GetValueSafe(obj => obj.SomeIntProperty);

Assert.IsNull(i); 
```

显然，当属性是结构时，这是最有用的；你可以减少到任何类型，只使用`default(TResult)`- 但你会得到`0`整数，双打等：

```
public static TResult GetValueSafe<TInstance, TResult>(this TInstance instance,
  Func<TInstance, TResult> accessor, TResult def = default(TResult))
  where TInstance : class
{  
   return instance != null ? accessor(instance) : def;
} 
```

第二个版本特别有用，因为它适用于任何`TResult`. 我已经扩展了一个可选参数以允许调用者提供默认值，例如（使用`o`以前的代码）：

```
int i = o.GetValueSafe(obj => obj.SomeIntProperty); //yields 0
i = o.GetValueSafe(obj => obj.SomeIntProperty, -1); //yields -1

//while this yields string.Empty instead of null
string s = o.GetValueSafe(obj => obj.SomeStringProperty, string.Empty); 
```

# 编辑 - 回应大卫的评论

David 认为我的回答是错误的，因为它没有提供基于表达式的解决方案，而这正是我们所要求的。我的观点是，任何真正正确且确实负责任的 SO 答案都应始终尝试为提出问题的人寻求更简单的解决方案（如果存在）。我相信人们普遍认为，在我们的日常职业生活中，应该避免对原本简单的问题采取过于复杂的解决方案。SO 之所以如此受欢迎，是因为它的社区行为方式相同。

David 还对我的“它们不是解决方案”的不合理陈述提出了异议——所以我现在将对此进行扩展，并说明为什么基于表达式的解决方案在很大程度上是毫无意义的，除非在 OP 的罕见边缘情况下实际上并没有要求（顺便说一句，大卫的回答也没有涵盖）。

*具有讽刺意味的是，它本身可能使这个答案变得不必要地复杂:)* **如果您实际上并不关心为什么表达式不是最佳途径，那么您可以从这里开始安全地忽略**

虽然说你*可以*用表达式解决这个问题是正确的，但对于问题中列出的例子来说，根本没有理由使用它们——它使最终非常简单的问题过于复杂；并且在运行时编译表达式的开销（然后将其丢弃，除非您放入缓存，除非您发出诸如调用站点之类的东西，如 DLR 使用的东西，否则很难正确处理）与解决方案相比我在这里介绍。

最终，任何解决方案的动机都是尝试将调用者所需的工作保持在最低限度，但同时您还需要将表达式分析器要做的工作保持在最低限度，否则如果没有大量工作，解决方案几乎无法解决。为了说明我的观点 - 让我们看一下我们可以使用带有表达式的静态方法实现的最简单的方法，给定我们的对象`o`：

```
var i = GetValueSafe(obj => obj.SomeIntProperty); 
```

哦，那个表达式实际上并没有做任何事情——因为它没有*传递*给`o`它——表达式本身对我们没有用，因为我们需要对它的实际*引用`o`*可能是`null`。所以 - 对此的第一个解决方案自然是显式*传递*引用：

```
var i = GetValueSafe(o, obj => obj.SomeIntProperty); 
```

（注意——也可以写成扩展方法）

因此，静态方法的工作是获取第一个参数并在调用它时将其传递给编译后的表达式。这也有助于识别要寻找其属性的表达式的类型。然而，它也**完全否定**了首先使用表达式的理由；因为方法本身可以*立即*决定是否访问该属性 - 因为它具有对可能是的对象的引用`null`。因此，在这种情况下，像我的扩展方法一样，简单地传递引用和访问器*委托*（而不是表达式）会更容易、更简单和*更快。*

 *正如我所提到的，有一种方法可以绕过必须传递实例，那就是执行以下操作之一：

```
var i = GetValueSafe(obj => o.SomeIntProperty); 
```

或者

```
var i = GetValueSafe(() => o.SomeIntProperty); 
```

*我们正在打折扩展方法版本——因为这样我们得到了一个传递给方法的引用，并且一旦我们得到一个引用，我们就可以取消表达式，正如我最后一点所证明的那样。*

在这里，我们依靠调用者来理解它们必须在成员的左侧的表达式主体中包含一个表示*实际*实例（无论是范围内的属性、字段或局部变量）的表达式读取，以便我们实际上可以从中获取具体值以进行空值检查。

首先，这不是表达式参数的自然使用，所以我相信您的调用者可能会感到困惑。还有另一个问题，如果您打算经常使用它，我认为这将是一个杀手 - 您无法缓存这些表达式，因为每次您想要回避其“null-ness”的实例都被烘焙到表达式中即通过。这意味着您总是必须为每次调用重新编译表达式；这将*非常*缓慢。如果您在表达式中对实例进行参数化，则可以将其缓存 - 但最终您会得到我们的第一个解决方案，该解决方案需要传递实例；再一次，我已经在那里展示了我们可以只使用一个委托！

[使用ExpressionVisitor](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx)类编写一些可以将所有属性/字段读取（以及与此相关的方法调用）转换为您想要的“安全”调用的东西相对容易。但是，除非您打算对以下内容进行安全阅读，否则我看不出这样做有什么好处：`a.b.c.d`. 但是随后将值类型扩充为自身的可空版本将在表达式树重写中给您带来一些麻烦，我可以告诉您；留下一个几乎没有人会理解的解决方案:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:38:12.423

这很复杂，但可以在不离开“表达式空间”的情况下完成：

```
// Get the initial property expression from the left 
// side of the initial lambda. (someObjectThatMightBeNull.Property)
var propertyCall = (MemberExpression)expression.Body;

// Next, remove the property, by calling the Expression 
// property from the MemberExpression (someObjectThatMightBeNull)
var initialObjectExpression = propertyCall.Expression;

// Next, create a null constant expression, which will 
// be used to compare against the initialObjectExpression (null)
var nullExpression = Expression.Constant(null, initialObjectExpression.Type);

// Next, create an expression comparing the two: 
// (someObjectThatMightBeNull == null)
var equalityCheck = Expression.Equal(initialObjectExpression, nullExpression);

// Next, create a lambda expression, so the equalityCheck 
// can actually be called ( () => someObjectThatMightBeNull == null )
var newLambda = Expression.Lambda<Func<bool>>(equalityCheck, null);

// Compile the expression. 
var function = newLambda.Compile();

// Run the compiled delegate. 
var isNull = function(); 
```

That being said, as Andras Zoltan has so eloquently put in the comments: "Just because you can doesn't mean you should." Make sure you have a good reason to do this. If there's a better way to, then do that instead. Andras has a great workaround.*

# c# - AppStore 上的嵌入式脚本 - 使用 Python，还是绕道而行？

> ID：10088731
> 
> 赞同：0
> 
> 时间：2012-04-10T12:22:18.037
> 
> 标签：c#, python, lua

我正在构建一个科学/教育应用程序，我需要提供高级用户脚本功能。我的选择是：

*   嵌入现有语言，例如 Python 或 Lua
*   或者用 coco/R 创建我自己的语言，例如

（最初我使用 C# 构建，但以后可能会移植到 C++ 以供 iPad 和 Android 使用。）每种方法都有其优点，但一个重要因素是我不想被应用商店拒之门外。苹果显然禁止运行解释代码的应用程序。我真的不明白这是如何定义的——肯定*任何*应用程序都是通过解释自己的数据结构来运行的吗？我认为这是某种“当我们看到色情内容时我们就知道它”的定义，您只是不能让您的系统看起来太强大。如果是这种情况，我在想，如果我构建自己的语言并且只传输活动语法树而不是脚本源，那么我不太可能触发他们的警钟 - 它看起来像任何旧数据结构体。有谁知道这是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:58:00.957

几年前，Apple 放宽了许可协议中的语言以允许 Lua。它被用于大量 iOS 游戏（包括愤怒的小鸟、所有 EA 游戏等）。事实上，App Store 上有许多使用 Lua 编写*的*游戏，使用基于 Lua 的框架，如 Corona 或 MOAI（例如*Crimson: Steam Pirates*，Bungie Aerospace 资助的游戏，在 App Store 上连续数周排名第一） . 还有像 Codea 这样的应用程序，这是一个 Lua 脚本环境，最终用户可以使用它在设备上构建游戏/玩具。Lua在 iOS 平台上*非常流行。*

IMO，创建自己的语言将是荒谬的。Lua 太好了，非常适合 iOS：轻量级、快速、可破解、用户友好、易于嵌入和扩展等。但是，您可能无法将其集成到 C# 应用程序中。我真的不知道 MonoTouch 是如何工作的，但在桌面世界中，C# 是托管代码，编译为字节码，但 Lua 的 API 是本机代码。弥合这一差距是可以做到的，但工作量更大。

简而言之，你*可以*使用 Lua 而不必隐藏它。您不允许做的是创建一个“元平台”，用户基本上可以通过您的应用程序下载全新的应用程序（未经 Apple 审查）。

编辑：关于“我正在用 C# 构建，但以后可能会移植到 C++ 以供 iPad 和 Android 使用”，您可能需要查看 MOAI。它是一个用 C++ 编写的开源跨平台（PC、Mac、iPad、Android、Chrome）框架，用于在 Lua 中编写游戏。可能会节省您从那里开始的时间，而不是稍后移植。您可以直接在 Lua 中完成几乎所有事情，如果您遇到需要裸机性能或访问尚未通过 Lua API 公开的功能的事情，您可以用 C 或 C++ 编写它。

# iphone - iPhone 摄像头不显示

> ID：10088740
> 
> 赞同：1
> 
> 时间：2012-04-10T12:23:03.363
> 
> 标签：iphone, ios, uiimagepickercontroller

我在使用操作表中的 ios 相机时遇到尴尬的问题：当用户触摸“图片按钮”时，操作表会显示两个选项（使用照片库中的照片或使用相机拍照） .

无论我选择什么选项，都不会发生任何事情，但是当我再次选择媒体类型时，它就会起作用。

贝娄是我的代码：

```
 - (IBAction)selectMediaType: (id)sender {
    [appDelegate hideTabBar];
    UIActionSheet *action = [[UIActionSheet alloc] 
                             initWithTitle: nil
                             delegate:self 
                             cancelButtonTitle:@"Fechar" 
                             destructiveButtonTitle: nil 
                             otherButtonTitles:@"Galeria", @"Tirar Foto", nil];

    [action showFromTabBar: appDelegate.tabController.tabBar];
}

- (void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        NSArray *mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];

        imagePicker.delegate = self;
        imagePicker.hidesBottomBarWhenPushed = YES;
        imagePicker.mediaTypes = mediaTypes;
        imagePicker.allowsEditing = NO;
        imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

        [self presentModalViewController:imagePicker animated:YES];
        imagePicker.hidesBottomBarWhenPushed = YES;
    } else if (buttonIndex == 1) {
        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
            UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
            NSArray *mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];

            imagePicker.delegate = self;
            imagePicker.mediaTypes = mediaTypes;
            imagePicker.allowsEditing = YES;
            imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
            imagePicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

            [self presentModalViewController:imagePicker animated:YES];
        } else {
            UIAlertView *alert = [[UIAlertView alloc] 
                                  initWithTitle:@"" 
                                  message:@"Your device does not support this feature!" 
                                  delegate:self 
                                  cancelButtonTitle:@"OK" 
                                  otherButtonTitles: nil];
            [alert show];
            [alert release];

        }
    } else {
        [appDelegate showTabBar];
    }
}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    UIImage *image;
    NSURL *mediaURL;

    mediaURL = (NSURL *) [info valueForKey:UIImagePickerControllerMediaURL];

    if (mediaURL == nil) {
        image = (UIImage *) [info valueForKey:UIImagePickerControllerOriginalImage];
    }

    imageView.image = image;

    [picker dismissModalViewControllerAnimated:YES];

    [appDelegate showTabBar];
}

- (void) imagePickerControllerDidCancel:(UIImagePickerController *)picker {

    [picker dismissModalViewControllerAnimated:YES];

    [appDelegate showTabBar];
} 
```

谁能帮我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:29:53.327

我知道了。

基本上这是一个内存泄漏问题：我正在切换视图，在超级视图中添加子视图（不是在当前视图中），但我没有从超级视图中删除旧视图，所以我遇到了内存泄漏；）

# c++ - 为什么临时对象的引用在这里有效？

> ID：10088741
> 
> 赞同：1
> 
> 时间：2012-04-10T12:23:12.950
> 
> 标签：c++, visual-c++

> **可能重复：**
> [Microsoft VS C++ 编译器可以从临时对象初始化引用是否是一个错误](https://stackoverflow.com/questions/6501014/is-it-a-bug-that-microsoft-vs-c-compiler-can-initialize-a-reference-from-a-tem)

```
#include <iostream>
#include <string>
using namespace std;
class test
{
public:
    string a;
public:
    test(string b){a=b;}
    friend string operator+(test);
};
string operator+(string &c,test a)
{
    c=c+a.a;
    return c;
}
void main()
{
    test d("the ");
    test e("world!");
    string s="Hello ";
     s=s+d+e;
    cout<<s<<endl;
} 
```

倒数第二行**s=s+d+e;** 在第一个重载的operator +之后返回了一个临时对象，第二个重载的operator +意外工作了！但是operator+函数的第一个参数是一个引用。为什么临时对象的引用在这里有效，或者我错过了什么？

PS：VC++6.0编译，运行结果如下。![在此处输入图像描述](../Images/c76364fb2f63fe1fafb501763e2d24b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:30:10.440

临时对象一直持续到创建它们的完整表达式的末尾 - 粗略地说，直到`;`行尾。在此之前对它们的引用都是有效的。

`const`但是，像您一样将其绑定到非引用是无效的。编译的唯一原因是您的编译器已经使用了 15 年以上，并且该语言从那时起经历了两次重大变化。我建议你升级到这个千禧年的编译器之一。

# expressionengine - 如何将编码与多个电子邮件地址和主题行一起使用

> ID：10088743
> 
> 赞同：0
> 
> 时间：2012-04-10T12:23:22.363
> 
> 标签：expressionengine

我是 Expression Engine 的新手，并尝试将 {encode} 用于两个电子邮件地址，并且还希望在用户单击链接时将主题行传递给电子邮件。

我正在查看编码标准全局变量的用户指南：

```
{encode="you@example.com" title="Email Me!"} 
```

有人可以提供一个示例，说明如何使用编码来包含两个电子邮件地址以及传递主题行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:30:22.090

您不能将多个电子邮件地址传递给 EE 电子邮件编码功能，也不能设置主题行。

# jquery - 无法将css图像插入伪：之前

> ID：10088748
> 
> 赞同：1
> 
> 时间：2012-04-10T12:23:38.347
> 
> 标签：jquery

我正在尝试将背景图像插入 header:before 元素，但 jquery 失败。

**HTML** 内容

```
 <a href="image.jpg" class="image-source">Try insert image into .header:before</a> 
```

**JS**

```
 $('.image-source').click(function() {
   var src = $(this).attr('href');
    // slash is okay
    $('.header:before').css('backgroundImage', 'url(/' + src + ')'); 
    return false;
 }); 
```

CSS：

```
.header {
  position: relative;
  background: url(anotherimage.jpg) no-repeat;
}
.header:before  {
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:0;
  margin:auto;
  min-width:50%;
  min-height:50%;
  content: "";
} 
```

有谁知道我是在这里处理一个错误，还是错过了一个明显的错误？请注意，我不能使用`.header`自己，因为我正在使用多个背景图像，这就是我需要`:before`.

**更新：** 可能是这样的：

*   [http://www.w3.org/TR/2009/CR-CSS2-20090908/generate.html#x2](http://www.w3.org/TR/2009/CR-CSS2-20090908/generate.html#x2)

*   [使用 jQuery 定位 :before 和 :after 伪元素](https://stackoverflow.com/questions/5814810/target-before-and-after-pseudo-elements-with-jquery#comment6671974_5814824)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:43:19.927

您不能使用 jQuery 操作伪元素。它们不是 DOM 的一部分。您可能也希望避免丑陋的解决方法。

最丑陋但我最好的解决方法之一是这个

```
var css = '.image:after { content: url("https://www.google.com/images/srpr/logo3w.png");  width: 400px; height: 100px; }';

$("#replaceable").html(css);
$("div").addClass('image');

$("div").click(function() {
    var css = '.image:after { content: url("http://www.google.com/logos/2012/elias_lonnrot-2012-hp.jpg");  width: 400px; height: 100px; }';
    $("#replaceable").html(css);
}); 
```

### [演示](http://jsfiddle.net/Starx/ssPHv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:26:57.103

您可以将背景图像作为直接内容插入，而不是使用 javascript

```
.header:before  {
  ...
  content: url(...);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:34:57.817

我认为你最好的办法是这样做：css：

```
header.first:after{/* your image etc */}
header.second:after{/* your image etc */}
header.third:after{/* your image etc */} 
```

然后是 jQuery：

```
var headers = ["first","second","third"];
var i = 0;
$(".next").click(function(){
  i %= headers.length;
  $("header").removeClass(headers[i-1]).addClass(headers[i]);
  i++;
}); 
```

# django - （如何）我可以让 django-registration 使用 registration_closed 模板吗？

> ID：10088753
> 
> 赞同：2
> 
> 时间：2012-04-10T12:23:53.417
> 
> 标签：django, django-registration

我有一个网站即将进行 betatesting。我已经用 django-registration 设置了整个注册过程，但我现在不想允许外部注册。

我想我记得一个教程或描述说 django-registration 可以设置为“注册关闭”，然后它将使用registration_closed模板而不是注册模板。这样注册就无法开始，因此无法完成，因此注册将被关闭。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:32:08.260

```
REGISTRATION_OPEN = False # in settings.py 
```

这意味着您正在使用默认后端。如果没有，您应该`False`在`registration_allowed`后端的方法中返回。

# iphone - 可以在同一个程序 Xcode 中打开 2 个 sqlite 数据库

> ID：10088755
> 
> 赞同：2
> 
> 时间：2012-04-10T12:23:54.680
> 
> 标签：iphone, uiviewcontroller

我有一个使用 sqlite 的应用程序。我从“资源”中的 sqlite 文件中读取表。我试图从另一个 sqlite 文件中读取表，但程序失败并出现以下错误

> for2012-04-10 14:12:14.331 SQL[1804:f803] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，
> 
> 原因：'无法在包中加载 NIB：'NSBundle（已加载）'，名称为 'RootViewController''

如果我不阅读第一个 sqlite 文件，我可以阅读第二个。如果我不读第二个，我可以读第一个。但不能一起读。

不能在同一个程序中读取两个 sqlite 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:32:05.697

是的，您可以在一个项目中使用多个 SQLite 文件。如果它们在您的文档目录中，那么您可以选择其中任何一个：

```
NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 

NSString* sqlfilePath = [documentsPath stringByAppendingPathComponent:@"file1.sqlite"]; 

BOOL file1Exists = [[NSFileManager defaultManager] fileExistsAtPath:sqlfilePath];

NSString* sqlfilePath = [documentsPath stringByAppendingPathComponent:@"file2.sqlite"]; 

BOOL file2Exists = [[NSFileManager defaultManager] fileExistsAtPath:sqlfilePath];

if(file1)
{
     // do necessary operations here
} 

else if (file2)
{
     // do necessary operations here
} 
```

但是，在您的情况下，我认为`RootViewController`是问题的原因，而不是 SQLlite 文件。

# c# - 通过 DataContractSerializer 跳过 DataMember

> ID：10088758
> 
> 赞同：0
> 
> 时间：2012-04-10T12:24:07.663
> 
> 标签：c#, datacontractserializer, datamember

我有一堂课：

```
[DataContract]
public class Result
{
  [DataMember] public String Log {get; set;}
  [DataMember] public String Data {get; set;}
} 
```

我通过 WCF 发送这个类，它工作正常。但是我想在接收后将这个类保存到一个xml文件中。我试着写：

```
var serializer = new DataContractSerializer(typeof (T),null,int.MaxValue,
    false,true,null,new SharedTypeXmlResolver());
var settings = new XmlWriterSettings { Indent = true };
using (var backing = new StringWriter(CultureInfo.InvariantCulture))
{
    using (var writer = XmlWriter.Create(backing, settings))
    {
        serializer.WriteObject(writer, result);                                        
    }
    return backing.ToString();
} 
```

但我想将“日志”属性保存到 XML 文件中，并且不想保存“数据”属性。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:40:51.600

XmlIgnore 不适用于 DataContract 序列化。这个合约是可选的，而不是 Serializable 是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T14:13:03.127

使数据可选：

```
[DataMember(EmitDefaultValue = false)] public String Data {get; set;} 
```

然后擦除数据：

```
result.Data = null; 
```

# python - python RegDeleteKey 错误 5 访问被拒绝

> ID：10088767
> 
> 赞同：0
> 
> 时间：2012-04-10T12:25:02.777
> 
> 标签：python, python-2.7, pywin32

我从 Activestate.org 获取了以下 python 配方，然后我简单地添加了删除密钥的方法，但是我收到错误 5，访问被拒绝，并且密钥只是我刚刚创建的用于试用该功能的假密钥。这是代码

```
## {{{ http://code.activestate.com/recipes/576860/ (r2)
import win32api
import win32con

def regquerysubkeys(handle, key, keylist=[]):

#get registry handle
    reghandle = win32api.RegOpenKeyEx(handle, key, 0, win32con.KEY_ALL_ACCESS)    
    try:
        i = 0
    #enumerates subkeys and recursively calls this function again
        while True:
            subkey = win32api.RegEnumKey(reghandle, i)
            #the following is the line I added myself
            win32api.RegDeleteKey(handle, key)

            i += 1
        #braintwister here ;-)
            regquerysubkeys(handle, key + subkey + "\\", keylist)
    except win32api.error as ex:
        #If no more subkeys can be found, we can append ourself
        if ex[0] == 259:
            keylist.append(key)
        #unexpected exception is raised
        else:
            raise
    finally:
    #do some cleanup and close the handle
        win32api.RegCloseKey(reghandle)
#returns the generated list
    print keylist

#call to the function
regquerysubkeys(win32con.HKEY_LOCAL_MACHINE, "SOFTWARE\\suga\\") 
```

这些是我在控制台中遇到的错误。

```
Traceback (most recent call last):
File "C:\EclipseWorkspaces\csse120\MMS-auto\test1.py", line 34, in <module>
regquerysubkeys(win32con.HKEY_LOCAL_MACHINE, "SOFTWARE\\suga\\")
File "C:\EclipseWorkspaces\csse120\MMS-auto\test1.py", line 14, in regquerysubkeys
win32api.RegDeleteKey(handle, key)
pywintypes.error: (5, 'RegDeleteKey', 'Access is denied.') 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:32:30.937

您是否正在运行 64 位 Windows 7？注册表结构发生了一些变化，以考虑运行需要使用不同 API 进行删除的 32 位和 64 位程序。 [Win32 API 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724845%28v=vs.85%29.aspx)提到在某些情况下[使用。`RegDeleteKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724845%28v=vs.85%29.aspx)`RegDeleteKeyEx`Win32 API 很难从一个主要版本的 Windows 到下一个主要版本可靠地使用。不幸的是，`pywin32`它尽力隐藏了一些令人头疼的问题，但它仍然需要您真正了解 Win32 API 及其注意事项，然后才能有效地使用它。

# java - 如何查找从 ChannelGroup 中特定主机名连接的所有客户端

> ID：10088769
> 
> 赞同：0
> 
> 时间：2012-04-10T12:25:08.850
> 
> 标签：java, netty

我正在学习 netty 框架和 Google protobuf，所以现在我正在编写一些简单的服务器和客户端应用程序。

我基于来自 netty 的 SecureChat 示例编写了一个服务器，我想编写一个方法来返回从特定 ip 连接的所有通道（无论是什么端口）。我有一个包含所有连接通道的 ChannelGroup，我考虑过使用 write 方法 - write(Object message, SocketAddress remoteAddress)，但在 SocketAddress 类中我必须插入端口。

所以我想到了其他方法，但我发现工作的唯一方法是使用 for 循环，但还有其他方法吗？某种方式可以给我更好的表现？

谢谢，BBLN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:19:51.150

您可以拥有自己的 ChannelGroup 实现来支持这一点。为此，您可以拥有一个使用通道的 InetAddress 作为键的通道映射。因此，您将能够通过 IP 快速查找所有频道。

# java - Java - ActionListener 类变量的一致性.. 为什么会这样？

> ID：10088775
> 
> 赞同：0
> 
> 时间：2012-04-10T12:25:35.420
> 
> 标签：java, swing, variables, scope, actionlistener

我一直在尝试学习和弄乱代码。我遇到了一些我没想到会发生的事情。我在 MainApp 类中有一个 JLabel，我创建了一个通过 JLabel 传递的 ActionListener (HelloListener)。按下按钮时，actionPerformed 方法应将 JLabel 更新为“Hello again！”。确实如此，但为什么会这样让我感到困惑。

但是，我认为我必须退回新的 JLabel？当我把HelloListener传给JLabel的时候，那JLabel不就是传完之后HelloListener类的属性吗？所以当它更新时，它只会更新 HelloListener 中的那个，然后我必须返回它？

为什么当我在 HelloListener 中更新 JLabel 时，它也会在 MainApp 类中更新？

这是代码：

```
public class MainApp extends JFrame {

    public static void main(String[] args) {

        new MainApp();

    }

    public MainApp() {

        setLayout(new GridLayout (2,1));

        setSize(200,200);

        JLabel jl = new JLabel("Hello!");
        add(jl);

        JButton jb = new JButton("Click me!");
        jb.addActionListener(new HelloListener(jl));
        add(jb);

        setVisible(true);

    }

} 
```

和

```
public class HelloListener implements ActionListener {

    JLabel jl;

    public HelloListener(JLabel jl) {
        this.jl = jl;
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        jl.setText("Hello again!");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:29:47.477

> 当我把HelloListener传给JLabel的时候，那JLabel不就是传完之后HelloListener类的属性吗？所以当它更新时，它只会更新 HelloListener 中的那个，然后我必须返回它？

这就是你的理解崩溃的地方。当您“传递 JLabel”时，您传递的是**对 JLabel 的引用**（实际上是按值传递引用，一旦您了解当前问题，就应该查找它，因为它对 Java 非常重要）。底层对象实例仍然存在于它之前所做的任何地方。因此`JLabel jl`，`HelloListener`实例中的 只是对 gui 中显示**的同一实际 JLabel 实例的引用。**

这是 Java（和许多编程语言）如何工作的基础。如果你这样做

`Dog d = new Dog();`

然后传递`d`给一个方法

`walk(d);`

看起来`walk`像

```
public void walk(Dog dog) {
   dog.setLastWalkTime(now());
   dog.attachLeash(); 
} 
```

`dog`在方法和`d`调用范围内，**都指向同一个 Dog 实例**。因此，当您设置 lastWalkTime 时，底层实例就会被修改。如果在`walk`您查看之后`d`，您会看到`lastWalkTime`您在方法中设置的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:31:21.937

当一个函数将一个对象作为参数时，它被传递一个对该对象的引用。在您的代码中，两者`MainApp`都`HelloListener`引用了同一个`JLabel`实例。

当`actionPerformed()`被调用时，监听器修改实例的属性。由于`JFrame`可以访问同一个实例，它会检测到更改并更新 GUI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:30:31.577

您为什么希望返回新的 JLabel？（然后呢？删除旧的，添加新的，让您的窗口再次进行布局？）您传递给侦听器的 JLabel 实例用作对您的 JLabel 的引用，这就是它的美妙之处 -您正在修改现有实例。

# perl - perl 脚本执行监控工具

> ID：10088778
> 
> 赞同：2
> 
> 时间：2012-04-10T12:25:53.263
> 
> 标签：perl, automation, perl-data-structures

> **可能重复：**
> [Perl 的代码分析工具](https://stackoverflow.com/questions/1078980/code-profiling-tools-for-perl)
> [如何在 mod_perl 中跟踪 CPU 密集型请求？](https://stackoverflow.com/questions/2194077/how-can-i-track-down-cpu-intensive-requests-in-mod-perl)

我正在寻找一种可以监视基于 Perl 脚本的工具的执行的工具

我正在寻找的是说我们有很多脚本，它们会经常运行..但我们想知道 perl 代码的瓶颈，所以在哪里进行更多优化以及哪些例程需要更改，所花费的时间一个脚本以及何时创建线程等..，

这样我就可以在工具中优化我的代码，使用 perl 调试器很难解码

任何帮助是极大的赞赏。

提前致谢！

阿迪亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:49:15.093

请参阅[Devel::NYTProf](http://search.cpan.org/~timb/Devel-NYTProf-4.06/lib/Devel/NYTProf.pm) - 功能强大的快速功能丰富的 perl 源代码分析器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:53:32.810

[Benchmark](http://perldoc.perl.org/Benchmark.html)不是分析器，它只会测量代码片段所花费的总时间，但有时这就是您所需要的。

您对其他分析器感兴趣吗？Devel::NYTProf 的“背景”部分提到了其他九个：

```
子程序级分析器：

*开发::DProf         | 1995-10-31 | ILYAZ 它推荐 NYTProf
*开发::AutoProfiler | 2002-04-07 | 格伦登
*开发::分析器     | 2002-05-20 | 萨姆特雷格
*开发::简介      | 2003-04-13 | 颚
*开发::DProfLB       | 2006-05-11 | 颚
*开发::WxProf        | 2008-04-14 | MKUTTER

语句级分析器：

*开发::SmallProf     | 1997-07-30 | ASHTED FastProf 是这个的一个分支
*开发::FastProf      | 2005-09-20 | SALVA NYTProf 是这个的一个分支
* 开发::NYTProf | 2008-03-04 | 阿卡普兰
*开发::利润       | 2008-05-19 | LBROCARD 未维护

```

不过，真的，听从 Nikhil 的建议，就用 NYTProf。

# java - 如何读取读取文件中单独Java包中的文本文件的内容

> ID：10088782
> 
> 赞同：1
> 
> 时间：2012-04-10T12:26:32.107
> 
> 标签：java, user-interface, text-extraction

我有一个带有 GUI 的包，在这个 GUI 中我需要读取一个可能看起来像的文本文件（称为 list.txt）

上午 8:00 有事

9:00 AM 其他

1:00 PM 不一样的东西

每个时间/事件都在单独的一行上。

如何分别阅读每一行并从每一行中提取时间部分？我需要完成的是将这样的列表中的时间与我之前确定的时间范围进行比较，并重新打印该列表中仅包含该范围内的事件/时间，但我不确定如何逐行阅读线。

这个问题怎么没有意义？我要问的是如何获取一个文本文件（一个写在一个单独的 java 包中）以及如何基本上一次读取一行并从每一行中获取时间部分。时间总是在每行的开头。对不起，但我不知道如何更清楚地说明这一点，这就是它的全部内容。

并且用户通过 GUI 应用程序提供文本文件名，以及时间范围。但那部分我已经下来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:30:56.850

*   使用`java.io.BufferedReader`'s`readLine()`方法逐行读取文件。
*   使用`java.lang.String`'`indexOf()`方法定位第一个空格。
*   使用`java.lang.String`'`substring()`方法提取前后空格。

# asp.net - 将静态内容从 ASP.NET 项目迁移到 Windows Azure 平台

> ID：10088788
> 
> 赞同：0
> 
> 时间：2012-04-10T12:27:05.357
> 
> 标签：asp.net, static, azure

我有 asp.net 项目。我想在天蓝色平台上发布它。我的项目包含不同的静态内容：图像、javascript、css、html 页面等。我想将此内容存储在 azure blob 存储中。所以，我的问题是： 1) 有没有办法自动将这些内容从我的应用程序迁移到 blob 存储的过程？2) 如何使用从 blob 存储中检索的数据？任何例子都会很棒！

最好的问候，亚历山大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:33:28.737

首先，您尝试做的可能是创建跨站点脚本（它们将位于不同的域名上）或安全问题（如果您使用 SSL）。因此，请确保您确实想要将静态文件与网站的其余部分分开。

也就是说，最简单的方法是使用多种 Windows Azure 存储管理实用程序中的任何一种（Storage Explorer 或 Cerebrata 的 Storage Studio 都可以使用），将静态内容上传到 Windows Azure 存储 blob 容器。然后将该容器的权限设置为 publis read，以便任何使用 Web 浏览器的人都可以访问该容器的内容。

最后，更改对内容的所有引用以指向 blob 存储中的新 URI，并部署您的 ASP.NET Web 角色。

不过，如果我是你，我真的会看看你想用这种方法完成什么。通过将它放在 blob 存储中，您确实可以访问一些东西（例如启用 CDN），但作为一种权衡，您会失去对许多其他东西的控制（例如通过 IIS 对请求日志进行简化的访问控制，以告知何时有人在下载您的图像文件数万亿次以尝试增加您的账单）。因此，除非对此有坚实的需求，否则我通常建议不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:47:58.467

在@Brent 的回答中添加一点：将静态内容卸载到 blob 存储时，您将获得更多好处，例如减少 Web 角色实例的负载。

[我在这个类似的 StackOverflow 问题](https://stackoverflow.com/a/9518657/272109)上写了一个更详细的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:43:59.973

根据您对 Brent 的评论，您可能需要考虑将内容上传到 Blob 存储，然后通过 WebRole 代理它。您可以使用 HttpModule 之类的东西来相当无缝地完成此任务。

这有两个主要优点：

1.  您可以添加/修改文件，而无需重新加载您的 Web 角色或在角色刷新时丢失它们。
2.  如果您正在迁移站点，则文件可以保留在迁移前的相同 URL。

缺点：

1.  您需要支付 Blob 访问的货币成本和 Web 角色的性能成本。
2.  不能使用 Azure CDN。
3.  Blob 存储通常比磁盘访问更慢（延迟更高）。

我写了一个相当简单的模块来完成这个。我还没有把它张贴在任何公开的地方，但如果你要这样做，我可以给你发代码或其他东西。

# c++ - 错误 C2662 问题

> ID：10088790
> 
> 赞同：1
> 
> 时间：2012-04-10T12:27:11.487
> 
> 标签：c++, c, visual-studio-2010, visual-c++

我正在做一些程序，到目前为止，在实施方面做得很好，但是现在我遇到了一些琐碎的问题，但我无法找到解决方案。问题出在这部分代码中，它说

> 错误 1 ​​错误 C2662：“Smetler::action”：无法将“this”指针从“const Smetler”转换为“Smetler &”

任何人都知道这里的问题是什么，因为我确信我应用了它所说的所有内容。

```
 virtual void action()
  {
    std::cout << "I'm a copy" << copy() << ". Doing observations." << std::endl;
  }      
  Smetler* copy() const { return new Smetler (*this); }     
   private:
   void writeDown(ostream& wd) const                            
   { 
      wd << Worker::getOccupation() << " " << Worker::getName() << ',' <<  Worker::getPosition()  << action(); 
   }
   }; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:30:09.513

~~你有这个：~~

 ~~```
Smetler* copy() const { return new Smetler* (*this); } 
```~~ 

这不会分配`Smetler`对象。它分配一个类型的指针`Smetler`。您正在尝试将 a `const Smetler&`（这是`*this`in`const`函数的类型）转换为 a `Smetler*`，这当然没有多大意义。

你可能想要的是这样的：

```
Smetler* copy() const { return new Smetler(*this); } 
```

~~以上将在空闲存储区分配一个新对象并将对象`Smetler`复制`this`到新空间中。您`delete`最终必须返回指针以避免内存泄漏。~~

您真正想要的是使用智能指针，这样您就不必担心`delete`从`copy()`. 在 C++03 中，您可以使用`std::auto_ptr`（尽管它已被弃用，因为它可能会在不安全的情况下意外使用，例如您不能`auto_ptr`在 s 等容器中使用 s `std::vector`）：

```
std::auto_ptr<Smetler> copy() const
{
    return std::auto_ptr<Smetler>(new Smetler(*this));
} 
```

`std::unique_ptr`或者，如果您可以使用 C++11，请使用没有任何问题的更高级`auto_ptr`的。

```
std::unique_ptr<Smetler> copy() const
{
    return std::unique_ptr<Smetler>(new Smetler(*this));
} 
```

上面的两个代码片段都有助于防止内存泄漏（而且一开始就不必担心它们！）

# android - Android：检测 SD 卡何时作为磁盘驱动器安装到计算机

> ID：10088802
> 
> 赞同：11
> 
> 时间：2012-04-10T12:27:53.557
> 
> 标签：android, broadcastreceiver, android-sdcard

我正在编写一个应用程序，它需要检测 SD 卡何时作为磁盘驱动器通过 USB 安装到计算机上，或者何时被手动移除。为此，我尝试使用广播接收器，但没有调用 onReceive。我的代码如下。

```
IntentFilter filter2 = new IntentFilter();
        //filter2.addAction(Intent.ACTION_AIRPLANE_MODE_CHANGED);
        filter2.addAction(Intent.ACTION_MEDIA_UNMOUNTED);
        filter2.addAction(Intent.ACTION_MEDIA_SHARED);
        filter2.addAction(Intent.ACTION_MEDIA_REMOVED);
        filter2.addAction(Intent.ACTION_MEDIA_MOUNTED);

        registerReceiver(new CustomBroadcastReceiver(), filter2); 
```

我的广播接收器如下...

```
public class CustomBroadcastReceiver extends BroadcastReceiver{

    public CustomBroadcastReceiver(){

    }

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if(action.equals(Intent.ACTION_MEDIA_UNMOUNTED) || action.equals(Intent.ACTION_MEDIA_SHARED) || action.equals(Intent.ACTION_MEDIA_REMOVED)){
            HardwareManager.IS_MEDIA_MOUNTED = false;
        }else if(action.equals(Intent.ACTION_MEDIA_MOUNTED)){
            HardwareManager.IS_MEDIA_MOUNTED = true;
        }else if(action.equals(Intent.ACTION_AIRPLANE_MODE_CHANGED)){
            HardwareManager.IN_AIRPLANE_MODE = intent.getBooleanExtra("state", false);
        }
    }

} 
```

当我通过 USB 作为磁盘驱动器连接时，onReceive 方法不会触发。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T17:14:02.653

您必须添加“文件”方案 (addDataScheme("file")) 以使 IntentFilter 匹配广播 ACTION_MEDIA_* 操作意图。

ACTION_MEDIA_* 意图在 Intent.mData 字段中具有到挂载点的路径（请参阅[Intent 文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_MOUNTED)），但没有设置方案的 IntentFilter 只会匹配不包含数据的意图（请参阅[IntentFilter 文档](http://developer.android.com/reference/android/content/IntentFilter.html#addDataScheme(java.lang.String))）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:01:08.683

SDK 级别目前不支持此功能。

*来源：[Android：检测插入的 USB 闪存驱动器](https://stackoverflow.com/questions/8088338/android-detect-usb-flash-drive-plugged-in)*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T04:00:41.060

似乎 ACTION_UMS_CONNECTED 不起作用。我需要使用 API 版本 8，因此任何 android.os.storage.StorageEventListener 都不适用。

[我使用此处](https://stackoverflow.com/questions/4600896/android-detecting-usb)发布的答案来更新线程中的静态变量。这也可以用于执行自定义广播。方法如下... *注意：HardwareManager是一个用户定义的类

```
private static class SDCardMountStatusMonitor implements Runnable{

    public void run() {
        // TODO Auto-generated method stub
        while(true){
            try {
                HardwareManager.IS_MEDIA_MOUNTED = sdIsCardMounted(); //YOU CAN BROADCAST SOMETHING FROM HERE INSTEAD
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

}

public static boolean sdIsCardMounted() {
        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            return true;
        } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            return false;
        } else {
            return false;
        }
} 
```

然后在另一个地方，我从这个 Runnable 创建一个线程并启动它。

```
Thread t = new Thread(new SDCardMountStatusMonitor());
t.start(); 
```

# model - 如何过滤来自商店的分层数据填充的 Ext.List？

> ID：10088810
> 
> 赞同：2
> 
> 时间：2012-04-10T12:28:25.380
> 
> 标签：model, sencha-touch, store, sencha-touch-2, ext.list

### 问题：

过滤填充了来自商店的分层数据的 Ext.List 的推荐方法是什么？我需要过滤掉属于我选择过滤的父对象的子对象。孩子们，在这种情况下，*游戏*应该填充列表。

### 我需要的

*   Ext.List 应该可以按轮次过滤，即“Omgång 1”、“Omgång 2”等。("Omgång" = "Round" in Swedish) When selecting "Omgång 1" as filter the list should only display games from that round in the list. 请参阅下面的 JSON 文档。
*   该列表应按日期（“kickOff”）分组并按“gameId”ASC 排序。

### 我做了什么

*   创建了一个 Ext.List，其中填充了通过 Ext.data.Store 检索的数据，该数据从通过 ReST 代理读取的 JSON 文档中获取数据。
*   Ext.List 从存储 Rounds 中读取其数据（见下文）。问题是我只看到一轮“Omgång 1”的一场比赛，而应该有 8 场比赛。

这是我迄今为止所取得的成就。使用按钮过滤列表，但仅显示其中一个列表项。

![列表和过滤器的示例。](../Images/ce147e42503ab4f7a3be3a02300f8319.png)

### EM.model.Round

圆形的模型。它与 Match 具有一对多的关系。

```
Ext.define('EM.model.Round', {
extend: 'Ext.data.Model',

init: function() {},

config: {
    storeId: 'Rounds',

    fields: [
        'name', 
        'lockedDate',
    ],
    associations: { 
        type: 'hasMany', 
        model: 'EM.model.Match', 
        primaryKey: 'gameId',
        name: 'matches',
        autoLoad: true,
        associationKey: 'games'
    }   
},
}); 
```

### EM.model.Match

匹配的模型。它属于圆形。

```
Ext.define('EM.model.Match', {
extend: 'Ext.data.Model',

init: function() {},

config: {
    fields: [
        { 
            name: 'gameId', 
            type: 'int'
        }, 
        {
            name: 'firstTeam',
            type: 'string'
        },
        {
            name: 'firstTeamClass',
            type: 'string',

            convert: function(value, record) {
                return util.convertFieldValueToLowerCase('firstTeam', record);
            }
        }, 
        {
            name: 'secondTeam',
            type: 'string'
        },
        {
            name: 'secondTeamClass',
            type: 'string',

            convert: function(value, record) {
                return util.convertFieldValueToLowerCase('secondTeam', record);
            }
        },
        'kickOff',
        {
            name: 'kickOffHour',
            convert: function(value, record) {
                var timestamp = new Date(util.convertUnixTimeToMilliseconds(record.get('kickOff')));

                return Ext.Date.format(timestamp, 'H:i');                   
            }
        },
        { 
            name: 'firstTeamGoals', 
            type: 'int', 
            defaultValue: 0 
         },
        { 
            name: 'secondTeamGoals', 
            type: 'int', 
            defaultValue: 0 
         },          
        { 
            name: 'firstTeamGoalsBet', 
         }, 
        { 
            name: 'secondTeamGoalsBet', 
         },
        'points',
        {
            name: 'pointsEarned',
            convert: function(value, record) {
                var className = 'no-points-earned';
                var points = record.get('points'); 

                if (typeof points == 'undefined') {
                    return '';
                }

                if (points > 0) {
                    className = 'points-earned';
                }

                return '<div class="' + className + '">' + points + '</div>'
            }
        },
    ],

    associations: {
        type: 'belongsTo',
        model: 'EM.model.Round',
        name: 'round',
        autoLoad: true
    }

}
}); 
```

### EM.store.Rounds

读取 JSON 文档的存储。然后使用该存储来填充 Ext.List。

```
Ext.define('EM.store.Rounds', {
extend: 'Ext.data.Store',

config: {
    model: 'EM.model.Round',
    storeId: 'Rounds',
    filters: [{
        property: 'name',
        value: 'Round 1'
    }],
    /*grouper: {
        groupFn: function (item) {
            //var kickOff = new Date(util.convertUnixTimeToMilliseconds(item.get('kickOff')));
            //return kickOff.format('d mmmm yyyy');
        },
        //sortProperty: 'kickOff'
    },*/        
    proxy: {
        type: 'rest',
        url : 'resources/json/matches.json',
        reader: {
            type: 'json',
        }
    },
    autoLoad: true,
}
}); 
```

### JSON 文件

这是*EM.store.Rounds*中的代理读取的 JSON 文档。

```
[
{   
    "name": "Omgång 1",
    "lockedDate": 1325420111,
    "games": [
        {
            "gameId": 1,
            "firstTeam": "Pol",
            "secondTeam": "Gre",
            "kickOff": 1339178400,
            "firstTeamGoals": 0,
            "secondTeamGoals": 3,
            "firstTeamGoalsBet": 0,
            "secondTeamGoalsBet": 3,
            "points": 3
        },
        {
            "gameId": 2,
            "firstTeam": "Rus",
            "secondTeam": "Cze",
            "kickOff": 1339188300,
            "firstTeamGoals": 4,
            "secondTeamGoals": 1,
            "firstTeamGoalsBet": 1,
            "secondTeamGoalsBet": 2,
            "points": 0
        },{
            "gameId": 3,
            "firstTeam": "Ned",
            "secondTeam": "Den",
            "kickOff": 1339264800,
            "firstTeamGoals": 2,
            "secondTeamGoals": 1,
            "firstTeamGoalsBet": 4,
            "secondTeamGoalsBet": 2,
            "points": 2
        },
        {
            "gameId": 4,
            "firstTeam": "Ger",
            "secondTeam": "Por",
            "firstTeamGoalsBet": 4,
            "secondTeamGoalsBet": 0,
            "kickOff": 1339274700
        },
        {
            "gameId": 5,
            "firstTeam": "Spa",
            "secondTeam": "Ita",
            "firstTeamGoalsBet": 3,
            "secondTeamGoalsBet": 2,
            "kickOff": 1339351200
        },  
        {
            "gameId": 6,
            "firstTeam": "Irl",
            "secondTeam": "Cro",
            "kickOff": 1339361100
        },
        {
            "gameId": 7,
            "firstTeam": "Fra",
            "secondTeam": "Eng",
            "kickOff": 1339437600
        },
                    {
            "gameId": 8,
            "firstTeam": "Ukr",
            "secondTeam": "Swe",
            "kickOff": 1339447500
        }
    ]
},
{
     "name": "Omgång 2",
     "games": [
         {
            "gameId": 4,
            "firstTeam": "Gre",
            "secondTeam": "Cze",
            "kickOff": 1339524000
        }
     ]
},
{
     "name": "Omgång 3",
     "games": [
         {
            "gameId": 4,
            "firstTeam": "Gre",
            "secondTeam": "Rus",
            "kickOff": 1339869600
        }
     ]
},
{
     "name": "Kvart",
     "games": [
         {
            "gameId": 4,
            "firstTeam": "1A",
            "secondTeam": "2B",
            "kickOff": 1340311500
        }
     ]
},
{
     "name": "Semi",
     "games": [
         {
            "gameId": 4,
            "firstTeam": "#25",
            "secondTeam": "#27",
            "kickOff": 1340829900
        }
     ]
},
{
     "name": "Final",
     "games": [
         {
            "gameId": 4,
            "firstTeam": "#29",
            "secondTeam": "#30",
            "kickOff": 1341175500
        }
     ]
}
] 
```

### EM.view.MatchList

显示匹配列表的列表视图。

```
Ext.define('EM.view.MatchList', {
extend: 'Ext.List',
xtype: 'matchlist',

requires: [
    'Ext.TitleBar',
    'EM.store.Rounds'
],

config: {
    id: 'match-list',       
    store: 'Rounds',
    //grouped: true,
    scrollable: false,

    items: [
        {
            xtype: 'titlebar',

            scrollable: {
                direction: 'horizontal',
                directionLock: true
            },

            items: [
                {
                    xtype: 'button',
                    text: 'Omgång 1',
                    handler: function() {
                        var sto = Ext.getStore('Rounds');
                        sto.clearFilter();
                        sto.filter('name', 'Omgång 1');
                        console.log(sto);
                    }
                },
                {
                    xtype: 'button',                        
                    text: 'Omgång 2',
                    handler: function() {
                        var sto = Ext.getStore('Rounds');
                        sto.clearFilter();
                        sto.filter('name', 'Omgång 2');

                    }
                },
                {
                    xtype: 'button',
                    text: 'Omgång 3',
                    handler: function() {
                        var sto = Ext.getStore('Rounds');
                        sto.clearFilter();
                        sto.filter('name', 'Omgång 3');

                    }
                },
                {
                    xtype: 'button',                        
                    text: 'Kvart',
                    handler: function() {
                        var sto = Ext.getStore('Rounds');
                        sto.clearFilter();
                        sto.filter('name', 'Kvart');

                    }
                },
                {
                    xtype: 'button',                        
                    text: 'Semi',
                    handler: function() {
                        var sto = Ext.getStore('Rounds');
                        sto.clearFilter();
                        sto.filter('name', 'Semi');

                    }
                },
                {
                    xtype: 'button',                        
                    text: 'Final',
                    handler: function() {
                        var sto = Ext.getStore('Rounds');
                        sto.clearFilter();
                        sto.filter('name', 'Final');

                    }
                }                           

            ],
        },
        {
            xtype: 'panel',
            html: 'Senast uppdaterad: Idag kl 20:12'
        }
    ],

    itemTpl: [

        '<div class="match-meta-data">',
        '<tpl for="matches">',          
            '<div class="team-wrapper home-team">{firstTeam} <div class="flag {firstTeamClass}"><span></span></div> <span class="goals-scored">{firstTeamGoals}</span></div>',
            '<div class="kick-off-time">{kickOffHour}</div>',
            '<div class="team-wrapper away-team"><span class="goals-scored">{secondTeamGoals}</span> <div class="flag {secondTeamClass}"><span></span></div> {secondTeam}</div>',
            '<div class="bet-meta-data">',
                '<img class="user-icon" src="resources/images/user-22x26.png" />',
                '<div class="home-team goals-bet">{firstTeamGoalsBet}</div>',
                '<div class="away-team goals-bet">{secondTeamGoalsBet}</div>',
                '{pointsEarned}',   
            '</div>',
        '</tpl>',
        '</div>',

        ].join('')
    },

}); 
```

这是我的第一个 Sencha Touch 应用程序，因此请随时指出您在代码中看到的任何不良做法。有人可以提供一个如何实现我的目标的例子吗？我花了很多时间试图弄清楚这一点。

完整的项目可以从 GitHub 下载，地址为[https://github.com/eriktoyra/EM-Tipset](https://github.com/eriktoyra/EM-Tipset)。最新的分支是 _filter-match-list。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:09:50.630

这确实是两个问题。我不知道为什么您的整个商店似乎没有在列表视图中呈现；一些步进和暂停可能会更清楚地说明这一点。如果您在某处托管了演示，我很乐意查看它。

关于您的多轮过滤问题，我现在可以想到两件事：

*   据我所知，`filter`对存储执行操作会导致它“丢失”数据，即丢弃所有与过滤器不匹配的数据（而不是对访问者隐藏它）。如果您在同一个服务器调用中将所有回合加载到一个商店中，我不确定过滤是否适合您。我可能错了，但我只是尝试从 Javascript 控制台过滤我的一个应用程序中的商店；当我应用与任何商品都不匹配的过滤器时，商店清空了。基于此，过滤可能不是最好的选择。

*   为每个回合创建一个单独`listview`的回合，每个回合都使用相同的通用回合商店。使用`itemTpl`config 和 an`XTemplate`来决定哪些匹配项应该进入每个列表。根据需要，使用 Omgång 按钮从视口中换出这些列表。

在更好地理解您的问题和代码后更新答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:52:37.150

我设法通过使用类似于我所拥有的实际测试场景的测试场景找到了解决此问题的方法。

### 解决方案

我所做的是：

1.  让 Division 模型处理代理并从*match.json*读取数据，而不是让 Division 存储读取数据。
2.  设置 Division 和 Team 模型之间的关系，以便它们相互了解。
3.  设置两个商店。一个用于部门，一个用于团队。加载 Division 存储时，我使用回调来使用 Division 存储中的 Team 数据填充 Team 存储。
4.  然后，我使用 Team 存储填充列表，其中包含 Team 对象，这些对象现在知道它们对 Division 模型/存储的引用。
5.  实际过滤是通过在列表中查找每个 Team 项目的 Division 对象并将 Division 的*name*属性与过滤器提供的属性进行比较来完成的。

下面提供了完整的解决方案，也可以在[GitHub](https://github.com/eriktoyra/Sencha-Touch-2.0-Playground)上找到。

如果其他人应该找到更好的解决方案或指出一些改进，我会在几天内保持这个问题没有答案。

```
 /**
     * @description The main purpose of this mockup is to test how to filter a list using hierarchical data. The code is adapted from the example 
     * "Filtering data in an Ext.List component in Sencha Touch 2" by Peter deHaan.  
     * @see <a href="http://senchaexamples.com/2012/03/15/filtering-data-in-an-ext-list-component-in-sencha-touch-2/">Filtering data in an Ext.List component in Sencha Touch 2</a>.
     * @author <a href="mailto:erik.toyra[at]gmail.com">Erik Töyrä</a>      
     */
    Ext.application({
        launch: function () {
            /**
             * Division model
             */
            Ext.define("Division", {
                extend: 'Ext.data.Model',
                config: {
                    fields: [
                        'division'
                    ],
                    // Setup a hasMany relations between Division and Team
                    hasMany: {model: 'Team', name: 'teams'},

                    // Load data from teams.json into the Division model
                    proxy: {
                        type: 'rest',
                        url : 'teams.json',
                        reader: {
                            type: 'json'
                        }
                    }
                }
            });

            /**
             * Team model
             */
            Ext.define("Team", {
                extend: 'Ext.data.Model',
                config: {
                    fields: [
                        'name', 'league'
                    ],
                    // Setup a belongsTo relationship between Team and Division
                    belongsTo: {model: 'Division'},
                }
            });                

            /**
             * Division store
             */
            var divisionStore = Ext.create('Ext.data.Store', {
                model: "Division",
                storeId: 'divisionStore',
            });

            /**
             * Team store
             */
            var teamStore = Ext.create('Ext.data.Store', {
                model: "Team",
                storeId: 'teamStore', // This is the store we will reference in our Ext.list below.
                fields: ['division', 'leage', 'name'],
            });

            /**
             * Load the Division store which holds all of the data read from teams.json. 
             * After the data has been loaded we add the team data to the teamStore.
             */
            divisionStore.load({
                callback: function() {
                    // Loop through each division and retrieve the all teams that resides as 
                    // childs to the division. Then we add each team to the teamStore.
                    divisionStore.each(function(division) {
                        division.teams().each(function(team) {
                            teamStore.add(team);
                        });
                    });
                }
            });

            /**
             * Create the list that should be filtered by Division and display a filtered list with Team objects.
             */
            Ext.create('Ext.List', {
                fullscreen: true,

                items: [{
                    xtype: 'titlebar',
                    docked: 'top',
                    ui: 'neutral',

                    items: [{
                        text: 'West only',
                        handler: function () {
                            return util.doFilter('West');
                        } // handler
                    }, {
                        text: 'Central only',
                        handler: function () {
                            return util.doFilter('Central');
                        } // handler
                    }, {
                        text: 'East only',
                        handler: function () {
                            return util.doFilter('East');                               
                        } // handler
                    }, {
                        text: 'Clear filters',
                        ui: 'decline',
                        align: 'right',
                        handler: function () {
                            Ext.getStore('teamStore').clearFilter();
                        } // handler
                    }
                    ] // items (toolbar)
                }], // items (list)
                store: 'teamStore',
                itemTpl: '{name}, {league}',
            }); // create()

            /**
             * Utility functions
             */
            var util = (function() {
                var util = {};

                /**
                 * Filter the teamStore by the passed in Division name.
                 */
                util.doFilter = function(filterOption) {
                    var store = Ext.getStore('teamStore');

                    // Clear all existing filters first...
                    store.clearFilter();

                    // ... then apply the selected filter
                    store.filterBy(function(record, id) {
                            return record.getDivision().get('division') == filterOption;
                        }, this);
                }

                return util;
            })();
        } // launch
    }); // application() 
```

### JSON数据

```
[
{
    division: 'East',
    teams: [
        {
            name: 'New York Yankees',
            league: 'AL',
        }, {
            name: 'Tampa Bay',
            league: 'AL',
        }, {
            name: 'Boston',
            league: 'AL',
        }, {
            name: 'Toronto',
            league: 'AL',
        }, {
            name: 'Baltimore',
            league: 'AL',
        }
    ]
},
{
    division: 'Central',
    teams: [
        {
            name: 'Detroit',
            league: 'AL',

        }, {
            name: 'Cleveland',
            league: 'AL',
        }, {
            name: 'Chicago White Sox',
            league: 'AL',
        }, {
            name: 'Kansas City',
            league: 'AL',
        }, {
            name: 'Minnesota',
            league: 'AL',
        }                            
    ]
},
{
    division: 'West',
    teams: [
    {
            name: 'Texas',
            league: 'AL',
        }, {
            name: 'Los Angeles Angels',
            league: 'AL',
        }, {
            name: 'Oakland',
            league: 'AL',
        }, {
            name: 'Seattle',
            league: 'AL',
        }
    ]
}
] 
```

# android - 在listview中单击sqlite？

> ID：10088812
> 
> 赞同：0
> 
> 时间：2012-04-10T12:28:40.233
> 
> 标签：android, sqlite, listview

我已经创建了在 Listview 中填充 SQLite 的代码，但我正在苦苦挣扎的是，我想根据用户从 listview 中选择的内容来显示 TOAST 消息。我应该使用 onClick 方法吗？

```
 public void createTable(SQLiteDatabase mDb, String table) {
        try {
            mDb.execSQL("create table if not exists "
                    + table
                    + " (id integer primary key autoincrement, "
                    + "username text not null, birthday text not null,image text);");
        } catch (SQLException e) {
            Toast.makeText(getApplicationContext(), "yes",
                    Toast.LENGTH_LONG).show();
        }
    }

    public void insert(SQLiteDatabase mDb, String table) {

                    ContentValues values = new ContentValues();

    public void getAllData(String table) {
        Cursor c = mDb.rawQuery("select * from " + table, null);
        int columnsSize = c.getColumnCount();
        listData = new ArrayList<HashMap<String, Object>>();
        while (c.moveToNext()) {
            HashMap<String, Object> map = new HashMap<String, Object>();
            for (int i = 0; i < columnsSize; i++) {
                map.put("id", c.getString(0));
                map.put("username", c.getString(1));
                map.put("birthday", c.getString(2));
                map.put("image", c.getString(3));
            }
            listData.add(map);
        }           
    }
    public boolean delete(SQLiteDatabase mDb, String table, int id) {
        String whereClause = "id=?";
        String[] whereArgs = new String[] { String.valueOf(id) };
        try {
            mDb.delete(table, whereClause, whereArgs);
        } catch (SQLException e) {
            Toast.makeText(getApplicationContext(), "هˆ é™¤و•°وچ®ه؛“ه¤±è´¥",
                    Toast.LENGTH_LONG).show();
            return false;
        }
        return true;
    }
}

OnCreateContextMenuListener listviewLongPress = new OnCreateContextMenuListener(){
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        final AdapterView.AdapterContextMenuInfo info =
        (AdapterView.AdapterContextMenuInfo) menuInfo;
        new AlertDialog.Builder(ListView_SqliteActivity.this)
                .setTitle("عنوان1")
                .setIcon(android.R.drawable.ic_dialog_info)
                .setMessage("عنوان 2")
                .setPositiveButton("وک¯",
                        new DialogInterface.OnClickListener() {
                            public void onClick(
                                    DialogInterface dialoginterface, int i) {
                                int mListPos = info.position;
                                HashMap<String, Object> map = listData
                                        .get(mListPos);
                                int id = Integer.valueOf((map.get("id")
                                        .toString()));
                                if (dao.delete(mDb, "student", id)) {                                       
                                    listData.remove(mListPos);
                                    listItemAdapter.notifyDataSetChanged();
                                }
                            }
                        })
                .setNegativeButton("هگ¦",
                        new DialogInterface.OnClickListener() {
                            public void onClick(
                                    DialogInterface dialoginterface, int i) {

                            }
                        }).show();
    }
};

@Override
public void finish() {
    // TODO Auto-generated method stub
    super.finish();
    mDb.close();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:33:38.197

我从您的问题中几乎没有假设您想为 ListView 实现 Click 事件，并且您想为单击显示 Toast 消息。

因此，**`setOnItemClickListener`**为您的列表视图实施以处理列表项单击。

```
 list.setOnItemClickListener(new ListView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, int i, long l) {
           // do whatever you want
        }
    }); 
```

# sql - SQL Server：如何使用带有 group by 的聚合函数来维护数据完整性？

> ID：10088814
> 
> 赞同：0
> 
> 时间：2012-04-10T12:28:46.543
> 
> 标签：sql, sql-server, sql-server-2005

这是我的问题：如何使用带有 group by 的聚合函数来维护记录完整性？

为了进一步解释，这里有一个例子。

我有一个包含以下列的表：（将其视为“订单”表）

```
Customer_Summary (first 10 char of name + first 10 char of address)
Customer_Name
Customer_Address
Customer_Postal Code
Order_weekday 
```

每个“订单”有一行，有很多行具有相同的客户名称、地址和摘要。

我要做的是显示客户的姓名、地址和邮政编码，以及他们在每个工作日下的订单数量，按客户的摘要分组。

所以数据应该是这样的：

```
Summary             | Name        | Address    | PCode | Monday | Tuesday | Wednesday | Thursday | Friday

test custntest addre|test custname|test address|123456 | 1      | 1       | 1         | 1        | 1 
```

我只想将类似客户摘要的记录分组在一起，但显然我希望显示一个姓名、地址和邮政编码。我目前正在使用 min()，所以我的查询如下所示：

```
SELECT Customer_Summary, min(customer_name), min(customer_address), min(customer_postal_code) 
FROM Order
Group by customer_summary 
```

我省略了我的工作日逻辑，因为我认为没有必要。

我的问题是——其中一些具有相同客户摘要的客户具有不同的地址和邮政编码。

所以我可能有两个客户，看起来像：

```
test custntest addre|test custname |test address |323456|

test custntest addre|test custname2|test address2|123456| 
```

使用 group by，我的查询将返回以下内容：

```
test custntest addre|test custname |test address |123456| 
```

由于我使用的是 min，它将为我提供所有字段的最小值，但不一定来自同一记录。所以我在这里失去了我的记录完整性 - 查询返回的地址和名称与邮政编码不正确匹配。

那么在使用 group by 子句时如何维护非分组字段的数据完整性呢？

希望我解释得足够清楚，并提前感谢您的帮助。

编辑：解决。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:41:31.897

你总是可以使用`ROW_NUMBER`而不是`GROUP BY`

```
WITH A AS (
    SELECT Customer_Summary, customer_name, customer_address, customer_postal_code,
        ROW_NUMBER() OVER (PARTITION BY Customer_Summary ORDER BY customer_name, customer_address) AS rn
    FROM Order
)
SELECT Customer_Summary, customer_name, customer_address, customer_postal_code
FROM A
WHERE rn = 1 
```

然后，您可以在 ORDER BY 子句中自由订购要使用​​的客户。目前我按名称订购它们，然后按地址订购。

**编辑：**

我的解决方案可以满足您的要求。但我肯定同意其他人的观点：如果允许您更改数据库结构，这将是一个好主意……您不是（看到您的评论）。那么，那么 ROW_NUMBER() 是一个好方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:42:41.027

我认为你需要重新考虑你的结构。

理想情况下，您将拥有一个`Customer`具有唯一 ID 的表。`Order`然后，您将在表中使用该唯一 ID 。那么你就不需要你正在使用的奇怪的“前 10 个字符”方法了。相反，您只需按表中的唯一 ID 进行分组`Customer`。

您甚至还可以有一个单独的地址表，将每个地址与客户相关联，包含多行*（字段将它们标记为家庭地址、送货地址、帐单地址等）*。

这样您就可以将客户信息与地址信息和订单信息分开。这样，如果客户更改姓名（婚姻）或地址（搬家），您就不会破坏您的数据 - 一切都与 ID 相关，而不是数据本身。

*[这种关系称为外键。]*

# c# - 从数据库中获取信息

> ID：10088815
> 
> 赞同：0
> 
> 时间：2012-04-10T12:28:56.413
> 
> 标签：c#, sql, database

这将是一个菜鸟问题，但我有一个问题，当我想根据另一个表中的外键获取数据时，问题是我无法弄清楚执行此操作的 sql。

我有以下表格：

*   **用户**：`login, password, role_id, userDetail_id`

*   **角色**：`role_id, role_name`

*   **用户详细信息**：`userDetail_id, name surname`

现在我想获取role_id为4的所有用户的姓名和姓氏，并将它们显示在一个asp下拉控件中。

感谢您的帮助，因为它真的让我感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:35:18.643

你的 sql 将是：

```
 DataTable dt =   @"Select name, surname from USER_DETAILS as ud
    Inner Join USERS as u on ud.userDetail_id = u.userDetail_id
    Inner join ROLES as r on u.role_id = r.role_id
    where u.role_id = 4"; 
```

然后您可以将数据表绑定到下拉列表：

```
 dropdown.DataSource = dt;
    dropdown.DataTextField = "name";
    dropdown.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:32:15.727

```
SELECT name, surname
FROM USER_DETAILS ud, USERS u
WHERE ud.userDetail_id = u.userDetail_id
 AND u.role_id = 4; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:41:22.317

```
SELECT ud.name, ud.surname 
FROM user_details ud, roles uroles, users u
WHERE ud.userDetail_id = u.userDetail_id 
AND u.role_id = uroles.role_id 
AND uroles.role_id = 4 
```

# javascript - 根据父 div id 加载 Javascript 文件

> ID：10088816
> 
> 赞同：0
> 
> 时间：2012-04-10T12:28:56.790
> 
> 标签：javascript, jquery, if-statement, dom-events

---按照人们所说的---

这是一个多页面表单，它在 DOM 中加载多个页面。DOM 加载 page_2_2 和 page_3_3 但是，一个具有 display:none 的样式属性，另一个没有。脚本是否可以通过检查哪个具有 display:none 的方式完成，然后加载适当的 Javascript 文件？例如：

如果 DIV ID=page_2_2 的 style="display:none"，则加载 page2.js，否则加载 page1.js？

* * *

我有两个 Javascript 文件...称为 page1.js 和 page2.js。

我需要一个基于 Javascript 的 if 函数

如果父DIV ID = page_2_2，则加载page1.js，如果父DIV ID = page_3_3，则加载page2.js，否则不加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:36:07.207

```
function loadscript(divID) {
    var scriptURL;
    if (divID == "page_2_2")
       scriptURL = "page1.js";
    else if (divID == "page_3_3")
       scriptURL = "page2.js";
    $.getScript(scriptURL);
} 
```

这并不复杂，函数获取字符串作为参数。

```
loadscript("page_2_2") // will load page1.js
loadscript("page_3_3") // will load page2.js 
```

您作为字符串参数传递的元素 ID 类型并不重要。

* * *

**编辑：**

据我了解，您有两个 div，其中一个将“none”作为显示值，因此您可以这样做。

```
<div id="page_2_2" style="display:none"></div>
<div id="page_3_3"></div>

$(document).ready(function() {
    if ($('#page_2_2').is(':visible'))
        $.getScript("page1.js");
    else 
        $.getScript("page2.js");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:38:16.570

只需运行检查然后加载

```
if($('#page_2_2').is(":visible")){
    $.getScript("/page1.js", function(data, textStatus, jqxhr) {
       console.log(data); //data returned
       console.log(textStatus); //success
       console.log(jqxhr.status); //200
       console.log('Load was performed.');
    });
}else if($('#page_3_3').is(":visible")){
    $.getScript("/page2.js", function(data, textStatus, jqxhr) {
       console.log(data); //data returned
       console.log(textStatus); //success
       console.log(jqxhr.status); //200
       console.log('Load was performed.');
    });
} 
```

[工作演示](http://jsfiddle.net/mcgrailm/45sV9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:35:08.390

您可以检查 div id，然后将脚本节点注入标头。自己没有测试过。

```
 if($('#[insert id]').length != 1){ inject script etc } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T12:37:28.360

我建议使用基于功能的方法，根据***使用它的用途***而不是使用它的***位置***将逻辑放在不同的文件中。

示例文件结构：

> /Scripts/Utils.js
> /Scripts/SpecificEditor.js
> /Scripts/Wysiwyg.js

在需要所见即所得的页面上，您将引用 Wysiwyg.js，在需要“SpecificEditor”的页面上，您将引用“SpecficEditor.js”。

使用您的方法，您的网站在增长时将难以管理。例如，您如何在页面之间共享逻辑？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:38:11.977

这应该可以解决问题：

```
function loadScript(filename){
 var fileref=document.createElement('script')
 fileref.setAttribute("type","text/javascript")
 fileref.setAttribute("src", filename)
 document.getElementsByTagName("head")[0].appendChild(fileref)
}

if(document.getElementById("page_2_2")===null){
 loadScript("page1.js");
}else if(document.getElementById("page_3_3")===null){
 loadScript("page2.js");
} 
```

使用 jQuery 会稍微短一些，将 if-else-if 块转换为：

```
 if($(".page_2_2").length==0){
     loadScript("page1.js");
    }else if($(".page_3_3").length==0){
     loadScript("page2.js");
    } 
```

您不清楚“父” div 的含义。*在这种情况下，如果该页面上的任何*div 具有该 ID ，这将加载脚本。你不应该有多个具有相同 id 的元素，所以我想这没关系。否则 jQuery`closest()`方法将起作用。

# c# - 指定日期时 WebDAV Exchange 2003 失败

> ID：10088821
> 
> 赞同：0
> 
> 时间：2012-04-10T12:29:10.330
> 
> 标签：c#, exchange-server, webdav

我正在使用以下代码从 Exchange 2003 服务器检索电子邮件。一切都在星期五工作，现在失败了。

通过一些调查，我将其范围缩小到 targetDate 变量。似乎日期是在 4 月，它会从服务器返回 400 失败。我已经评论了这条线并尝试了各种日期 2012-3-29、2012-4-1、2012-4-10（今天），而 4 月份的日期似乎失败了。

某种病态的愚人节玩笑？

代码本身来源于这篇文章： http: [//www.codeproject.com/Articles/42458/Using-Exchange-2003-with-Webdav-Send-Retrieve-Atta](http://www.codeproject.com/Articles/42458/Using-Exchange-2003-with-Webdav-Send-Retrieve-Atta)

```
 public XmlDocument GetMailAll()
    {
        HttpWebRequest request = default(HttpWebRequest);
        HttpWebResponse response = default(HttpWebResponse);
        string rootUri = null;
        string query = null;
        byte[] bytes = null;

        Stream requestStream = default(Stream);
        Stream responseStream = default(Stream);
        XmlDocument xmlDoc = default(XmlDocument);
        xmlDoc = new XmlDocument();
        try
        {
            DateTime targetDateTime = DateTime.Today.AddDays(-5);
            String targetDate = ""+targetDateTime.Year + "-" + targetDateTime.Month + "-" + targetDateTime.Day;

            rootUri = server + "/Exchange/" + alias + "/" + inbox;
            query = "<?xml version=\"1.0\"?>"
                        + "<D:searchrequest xmlns:D = \"DAV:\" xmlns:m=\"urn:schemas:httpmail:\">"
                        + "<D:sql>SELECT \"urn:schemas:httpmail:hasattachment\", \"DAV:displayname\", "
                        + "\"urn:schemas:httpmail:from\", \"urn:schemas:httpmail:subject\", "
                        //+ "\"urn:schemas:httpmail:htmldescription\","  //Return full body (not necessary right now)
                        + "\"urn:schemas:httpmail:datereceived\", \"urn:schemas:httpmail:read\" FROM \"" + rootUri
                        + "\" WHERE \"DAV:ishidden\" = false "
                        + "AND \"DAV:isfolder\" = false " 
                        //+ "AND \"urn:schemas:httpmail:read\" = false"
                        + "AND \"urn:schemas:httpmail:datereceived\" >= CAST(\"" + targetDate + "T00:00:000Z\" AS 'dateTime.tz')"
                        + "</D:sql></D:searchrequest>";
            request = (HttpWebRequest)WebRequest.Create(rootUri);
            request.Timeout = 5000;
            request.Credentials = new NetworkCredential(alias, password, domain);
            request.Method = "SEARCH";
            request.ContentType = "text/xml";
            request.Headers.Add("Translate", "F");
            bytes = System.Text.Encoding.UTF8.GetBytes(query);
            request.ContentLength = bytes.Length;

            requestStream = request.GetRequestStream();
            requestStream.Write(bytes, 0, bytes.Length);
            requestStream.Close();
            response = (HttpWebResponse)request.GetResponse();

            authCookies = new List<Cookie>();
            foreach(Cookie cookie in response.Cookies)
            {
                authCookies.Add(cookie);
            }

            responseStream = response.GetResponseStream();
            xmlDoc.Load(responseStream);
            responseStream.Close();
        }
        catch (WebException ex)
        {
            if (ex.Response == null)
            {
                throw new Exception();
            }
            else if ((ex.Response as HttpWebResponse).StatusCode == HttpStatusCode.Unauthorized)
            {
                throw new ExchangeCatastrophicException();
            }
            else
            {
                throw new ExchangeFailedException();
            }
        }
        catch (Exception ex)
        {
            throw;
        }
        return xmlDoc;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:37:01.700

终于让它工作了。要转换的确切 targetDate 包括 T00:00:..Z 部分必须与[http://msdn.microsoft.com/en-us/library/aa123600%28v=exchg.65%29.aspx上的规范匹配](http://msdn.microsoft.com/en-us/library/aa123600%28v=exchg.65%29.aspx)

我现在有：

```
DateTime targetDateTime = DateTime.Today;
string targetDate = targetDateTime.ToString("yyyy-MM-dd"); 
```

剪断

```
+ "AND \"urn:schemas:httpmail:datereceived\" >= CAST(\"" + targetDate + "T00:00:00Z" + "\" AS 'dateTime.tz')" 
```

请注意，秒部分是两个零而不是三个。

# android - 活动控制

> ID：10088823
> 
> 赞同：0
> 
> 时间：2012-04-10T12:29:19.160
> 
> 标签：android

假设有 3 个活动 A、B 和 C。在我的应用程序第一次启动时，B 是通过 A 创建的。但是在应用程序的后续使用中，我希望应用程序从 B 启动并转到 C。我该怎么做那？

（例如，Activity A 询问创建的按钮数量，而在 B 中，为 C 执行的进一步活动创建了这么多按钮。A 应仅在初始化时使用，而不应在应用程序的进一步使用时使用。但是创建的 Activity 的状态by A in B 必须保持不变）

任何参考资料或示例代码都可能会有所帮助
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:43:57.587

您始终可以通过活动 A 启动您的应用程序。在 A 中，检查它是否是第一次。如果是第一次，则进行多次初始化操作并启动 B。否则直接启动 B。您可以将 isFirstTime 标志存储到首选项中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:59:07.693

在您的 A、B 和 C 类中使用此代码

```
 public boolean onKeyDown(int keyCode, KeyEvent event)
     {
         if(keyCode == KeyEvent.KEYCODE_BACK){  
            finish();
            }
            return super.onKeyDown(keyCode, event);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:48:57.603

这可以通过多种方式完成，但确定的方式并不多：您将使用的基本方法是启动屏幕以及存储在某处的标志变量。正如您的评论之一所提到的，每当您进入活动 A 时，您始终可以在 SharedPreferences 中设置标志。当您将来返回此活动时，您可以简单地检查是否设置了标志，然后可能会创建一个新的 Intent 以从 B 开始活动 C。您也可以对 A 做类似的事情，检查标志你选择去应用程序。一个棘手的情况是如何重置标志。有几个选项，您可以在考虑生命周期后保守地重置 onStop() 中的标志，这可能是一个好主意，也可能不是一个好主意。您还可以注册一个启动完成处理程序，然后在那里重置标志，

# mysql - 使用 DISTINCT 时会发生什么？

> ID：10088828
> 
> 赞同：5
> 
> 时间：2012-04-10T12:29:26.710
> 
> 标签：mysql, sql, select, distinct

这是我的表格和其中包含的数据：

```
Table: first

+----------+------+
| first_id | data |
+----------+------+
|        1 |    5 |
|        2 |    6 |
|        3 |    7 |
|        4 |    6 |
|        5 |    7 |
|        6 |    5 |
|        7 |    7 |
|        8 |    6 |
|        9 |    5 |
|       10 |    7 |
+----------+------+

Table: second
+-----------+----------+----------+
| second_id | first_id | third_id |
+-----------+----------+----------+
|         1 |        1 |        2 |
|         2 |        2 |        3 |
|         3 |        3 |        4 |
|         4 |        4 |        2 |
|         5 |        5 |        3 |
|         6 |        6 |        4 |
|         7 |        7 |        2 |
|         8 |        8 |        2 |
|         9 |        9 |        4 |
|        10 |       10 |        4 |
+-----------+----------+----------+ 
```

我的目的是获取按字段`third_id`排序的 s列表。`data`现在，我为此运行了以下查询。

```
SELECT
    third_id, data
FROM 
    first f JOIN second s ON ( s.first_id = f.first_id )
ORDER BY 
    data ASC; 
```

我得到了预期的以下结果。

```
+----------+------+
| third_id | data |
+----------+------+
|        4 |    5 |
|        2 |    5 |
|        4 |    5 |
|        2 |    6 |
|        3 |    6 |
|        2 |    6 |
|        2 |    7 |
|        4 |    7 |
|        4 |    7 |
|        3 |    7 |
+----------+------+ 
```

以下查询也按预期工作。

```
SELECT 
    third_id
FROM 
    first f JOIN second s ON ( s.first_id = f.first_id )
ORDER BY 
    data ASC; 
```

带输出

```
+----------+
| third_id |
+----------+
|        4 |
|        2 |
|        4 |
|        2 |
|        3 |
|        2 |
|        2 |
|        4 |
|        4 |
|        3 |
+----------+ 
```

然后我跑了以下。

```
SELECT DISTINCT
    third_id
FROM 
    first f JOIN second s ON ( s.first_id = f.first_id )
ORDER BY 
    data ASC; 
```

但是，在这里我得到了一个意想不到的结果：

```
+----------+
| third_id |
+----------+
|        2 |
|        3 |
|        4 |
+----------+ 
```

在这里，`3`必须在`2`and之后`4`，因为我在`data`现场订购。我究竟做错了什么？还是我必须采取不同的策略。

注意：这种情况发生在我的项目中。此处提供的表不属于原始数据库。它是由我创建来解释问题的。原始表包含数千行。如果您想试验数据，我将插入数据库转储：

```
--
-- Table structure for table `first`
--

CREATE TABLE IF NOT EXISTS `first` (
  `first_id` int(11) NOT NULL AUTO_INCREMENT,
  `data` int(11) NOT NULL,
  PRIMARY KEY (`first_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

--
-- Dumping data for table `first`
--

INSERT INTO `first` (`first_id`, `data`) VALUES
(1, 5),
(2, 6),
(3, 7),
(4, 6),
(5, 7),
(6, 5),
(7, 7),
(8, 6),
(9, 5),
(10, 7);
--
-- Table structure for table `second`
--

CREATE TABLE IF NOT EXISTS `second` (
  `second_id` int(11) NOT NULL AUTO_INCREMENT,
  `first_id` int(11) NOT NULL,
  `third_id` int(11) NOT NULL,
  PRIMARY KEY (`second_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

--
-- Dumping data for table `second`
--

INSERT INTO `second` (`second_id`, `first_id`, `third_id`) VALUES
(1, 1, 2),
(2, 2, 3),
(3, 3, 4),
(4, 4, 2),
(5, 5, 3),
(6, 6, 4),
(7, 7, 2),
(8, 8, 2),
(9, 9, 4),
(10, 10, 4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:35:31.840

你可能想做类似的事情

```
SELECT third_id
FROM first JOIN second USING (first_id)
GROUP BY third_id
ORDER BY aggregatesomething(data) 
```

那是`min(data)`或`max(data)`什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:36:07.170

执行 a`SELECT DISTINCT`要求数据库对列中的值进行排序，因为这是查找不同值的最有效方法。据我所知`ORDER BY`，不包含在查询中输出的列的子句不会得到尊重（SQL SERVER 不会接受查询），因为不清楚按不参与的东西排序意味着什么.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:41:00.733

您可以使用子查询 -

```
SELECT DISTINCT third_id FROM (
  SELECT
    third_id
  FROM 
    first f JOIN second s ON ( s.first_id = f.first_id )
  ORDER BY 
    data ASC
) t; 
```

这将有助于首先选择和排序所有数据，然后选择不同的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T12:53:20.323

我以前遇到过这个确切的问题。我终于想出了一个简单的解决方案，似乎太简单了。您需要使用子查询作为选择查询的列。在该子查询中，您将按日期进行排序。当您在一个查询中使用 ORDER BY 完成所有操作时，会发生在 JOIN 之前。您想先订购，所以使用子查询。[http://nathansnoggin.blogspot.com/2009/04/select-distinct-with-order-by.html](http://nathansnoggin.blogspot.com/2009/04/select-distinct-with-order-by.html)

# version-control - 是否可以在 TFS 中“创建”（无根据的）合并候选者？

> ID：10088829
> 
> 赞同：1
> 
> 时间：2012-04-10T12:29:27.583
> 
> 标签：version-control, tfs, merge, branch

在我工作的地方，我们有一个分支，仅用于检查正在进行的错误和任务。小任务在下周签到时被搁置和恢复。

我们开发了一个*自动合并系统*，这些小签到都合并到所有特定的项目分支。然后，在项目结束时，它被反向合并到主分支，从而自动转到另一个项目分支。

但是，假设我有一个带有**Feature A**的分支，另一个带有**Feature B**。我需要第三个，同时具有**Feature A + Feature B + Bug Fixes**。我不想反向合并它们，因为我不想弄乱主分支（还）

我从 Feature A 创建了一个分支，并启用了从**"Feature A"**到**"Feature A+B"**的自动合并。所以每个错误修复都是这样的：**Main -> Feature A -> Feature A+B**。并且 Feature A 中的每次签入**都会转到 Feature A+B**。

> 现在我想做从**"Feature B" 到 "Feature A+B" 的**毫无根据的合并。
> 
> **有没有办法在它们之间启用合并（在 TFS 内）？**

我知道它会破坏层次结构，而且我知道我可以通过 执行 x 无基础合并`tf.exe`，或者手动（或使用任何已知工具）三向合并文件。

但我不负责这样做，这是另一个习惯了 Team Explorer 界面的开发人员，所以这会让他的生活更轻松。

现在，现在，我知道一个可能的答案/评论将是：

> “*你需要重新审视你的分支结构，因为有问题！”*

如果可能的话，把它和一些技巧放在一起，我目前正在尝试改变它，但我不确定当我们开发 2 个分离的项目时该怎么做，突然之间，需要放在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T01:54:25.993

您对情况的评估是正确的，您需要在此处使用无根据的合并来建立 Feature B 和 Feature A+B 之间的关系。tbergstedt 是正确的，TFS 一旦建立起来就会记住分支之间的合并关系。因此，这意味着您只需要在这种情况下执行一次毫无根据的合并，然后 Team Explorer 中的正常合并 UI 将获取后续更改。

现在，就实际执行 baseless 合并而言，需要使用 /baseless 选项从 tf.exe 完成，除非您有 Team Explorer 2012 Beta 客户端。在 Team Explorer 2012 中，我们添加了在 UI 中执行无根据合并的功能。如果您没有，我建议您只执行第一次毫无根据的合并，然后让您的同事使用 UI 进行后续合并。

-Taylor，TFS 版本控制开发主管。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:54:49.033

据我了解，一旦您使用 对两个分支进行了毫无根据的合并`tf merge /baseless`，TFS 就会记住这种关系，从那时起，任何用户都可以“正常”地在两个分支之间执行合并。

问题是，毫无根据的合并可能会检测到每个项目的冲突，您需要检查所有内容的新版本，以便在项目的分支之间创建关系。因此，使用您的分支结构并在**FeatureB**与**Feature A+B**之间进行毫无根据的合并，在解决冲突时必须非常小心 - 如果您只是选择目标版本，目标分支上的任何**FeatureA**更改都将被**FeatureB**覆盖！

我应该补充一点，我还没有一直这样做；我也遇到过类似的情况，但当我意识到我需要详细解决每一个冲突时，我就放弃了。我们的产品很大，所以不值得我们花时间和冒险。

# html - 无序列表在 ie7 中没有均匀分隔

> ID：10088831
> 
> 赞同：1
> 
> 时间：2012-04-10T12:29:41.843
> 
> 标签：html, css

我试图将 4 个项目均匀地分布在其父容器中，但由于某种原因，在 ie7 中，第四个项目被推到下一行。如果我为每个项目指定 25% 的宽度，我不明白这怎么可能。这是我的html/css：

```
<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <style>
        html, body, ul, li { padding:0; margin:0; }
        ul { list-style:none outside none; }
        ul li { float:left; height:40px; width:25%; }
        ul li a { display:block; height:20px; padding-top:20px; text-align:center; }
    </style>
</head>
<body>
    <div style="overflow:hidden">
        <ul>
            <li><a href="a">A</a></li>
            <li><a href="b">B</a></li>
            <li><a href="c">C</a></li>
            <li><a href="d">D</a></li>
        </ul>
    </div>
</body>
</html> 
```

似乎在其他浏览器中工作正常，但不是 ie7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:38:47.080

如果您调整浏览器的大小，您可能会发现有时最后一项在您想要的第一行。使用百分比宽度进行布局时如何[修复 Internet Explorer 7 错误](https://stackoverflow.com/questions/1309964/how-to-fix-internet-explorer-7-bug-when-using-percentage-widths-for-layout)的[公认答案？](https://stackoverflow.com/a/1310448/637889)解释了问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:39:19.067

看到[这个问题](https://stackoverflow.com/questions/1309964/how-to-fix-internet-explorer-7-bug-when-using-percentage-widths-for-layout)。基本上，当您使用百分比宽度时，IE 会四舍五入，因此有可能超过 100%，它只会将您的最后一项降低。因此，要解决这个问题，您应该使用 24% 而不是 25%，或者只计算正确的 px 宽度。

它不太~~好~~，但您可以像这样更改代码：

### CSS

```
 ul { list-style:none; position:relative; }
 li { position:absolute; top:0; height:40px; width:25%;}
 li.two {left:25%;}
 li.three {left:50%;}
 li.four {left:75%;} 
```

### HTML

```
<div> <!-- removed the overflow:hidden -->
    <ul>
        <li><a href="a">A</a></li>
        <li class="two"><a href="b">B</a></li>
        <li class="three"><a href="c">C</a></li>
        <li class="four"><a href="d">D</a></li>
    </ul>
</div> 
```

在 IE7 和 Chrome 中对我有用

# c# - 使用 C# MVC 项目中的 Transsoft 驱动程序连接到 .UDD

> ID：10088833
> 
> 赞同：1
> 
> 时间：2012-04-10T12:30:04.027
> 
> 标签：c#, asp.net-mvc, odbc, database-connection

您好，我正在尝试使用**Transoft ODBC 驱动程序**连接到数据库（Symology），但打开连接只会挂起项目。我实际上需要在 IIS 中重新启动应用程序池。

DSN 是一个奇怪的东西，称为 .UDD 文件（通用数据字典）

我可以使用 MS Access 打开 .UDD，然后公开表，因此连接不是问题。

```
OdbcConnection connection = new OdbcConnection("DSN=test.udd;Uid=;Pwd=;");
connection.Open(); 
```

有没有人成功地做到了这一点，我做错了什么？

提前致谢。

# iphone - 如何创建自动启动 iTunes 的 App Store 链接？

> ID：10088851
> 
> 赞同：3
> 
> 时间：2012-04-10T12:31:20.673
> 
> 标签：iphone, ios, ipad, hyperlink, app-store

我们发现最成功的应用开发商“Tapbots”有一种特殊的 App Store 链接。

首先，链接如下所示： 这是一个巧妙的附属链接： [http ://click.linksynergy.com/fs-bin/stat?id=Fu2a2g8N61Q&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes .apple.com%252FWebObjects%252FMZStore.woa%252Fwa%252FviewSoftware%253Fid%253D308928075%2526mt%253D8%2526partnerId%253D30](http://click.linksynergy.com/fs-bin/stat?id=Fu2a2g8N61Q&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes.apple.com%252FWebObjects%252FMZStore.woa%252Fwa%252FviewSoftware%253Fid%253D308928075%2526mt%253D8%2526partnerId%253D30)

然后它被重定向到这个：http: [//itunes.apple.com/app/convertbot-amazing-unit-converter/id308928075 ?mt=8](http://itunes.apple.com/app/convertbot-amazing-unit-converter/id308928075?mt=8)

重定向后 iTunes 在我的 Mac 上启动。在 iPad 上，App Store 应用程序启动。我们尝试修改最后一个链接以匹配我们的应用程序。但是当点击它时，它只显示这个 iTunes 网页并且永远不会启动 iTunes。

iTunes 网页显示“打开 iTunes 以购买和下载应用程序”。听起来像“自己做”，没有任何反应。

这只发生在附属链接上吗？我没有找到来自 Apple 的文档来解释如何创建一个自动启动 iTunes 的链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T19:19:00.540

看来您必须链接到 itms:// 而不是 http://

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T12:49:19.417

您可以使用[iTunes 链接器来做到这一点](http://itunes.apple.com/linkmaker/)。[如果您需要帮助，这里](http://www.apple.com/itunes/linkmaker/faq/)有一个很好的常见问题解答。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T23:37:06.953

有两种方法可以保证 iTunes Stpre 在桌面上加载并且您不会在 iTunes 预览页面上停止。

1.) 这是一个附属链接。

2.) 链接包含“&ls=1”

我会鼓励你去追求#1，因为绝对没有理由链接到 iTunes 而不是附属它。

# java - 无法将列宽设置为零，即没有使列不可见

> ID：10088853
> 
> 赞同：9
> 
> 时间：2012-04-10T12:31:23.933
> 
> 标签：java, swing, jtable, tablecolumn

我试图`JTable`通过将宽度设置为零来使一列不可见，但它不会发生，并且它对宽度 = 15 仍然可见。这是代码 -

```
public void restoreColumnWithWidth(int column, int width) {
        try {
            TableColumn tableColumn = table.getColumnModel().getColumn(column);
            table.getTableHeader().setResizingColumn(tableColumn);
            tableColumn.setWidth(width);
            tableColumn.setMaxWidth(width);
            tableColumn.setMinWidth(width);
            tableColumn.setPreferredWidth(width);
        } catch (Exception ex) {
        }
    } 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T12:49:57.217

*   `TableColumn`不，永远不要从中删除`TableModel`，这是错误的建议，而不是使用内置方法[JTable#removeColumn(TableColumn aColumn)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#removeColumn%28javax.swing.table.TableColumn%29)，

*   请注意，此方法仅从 View 中删除列，在模型中删除列仍然存在，您可以通过使用[JTable#addColumn(TableColumn aColumn)将其还原为可见的已删除列](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#addColumn%28javax.swing.table.TableColumn%29)

编辑

![在此处输入图像描述](../Images/7d2dc7542aab66906bb00c1c4cf78ac0.png)![在此处输入图像描述](../Images/020958bd9ba646b55c8996201f441de5.png)![在此处输入图像描述](../Images/127befda65e625c0fc4517c9726b9641.png)![在此处输入图像描述](../Images/26b00d7659f08d9bb305362b66a5563a.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Stack;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.WindowConstants;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

public class TableRowHeight {

    private static final long serialVersionUID = 1L;
    private JFrame frame = new JFrame("p*s*s*s*s*t*t");
    private String[] columnNames = {"one", "two", "Playing with", "four", "five",};
    private String[][] data = {
        {"aaaaaa", "bbbbbb", "cccccc", "dddddd", "eeeeeee",},
        {"bbbbbb", "cccccc", "dddddd", "eeeeeee", "aaaaaa",},
        {"cccccc", "dddddd", "eeeeeee", "aaaaaa", "bbbbbb",},
        {"dddddd", "eeeeeee", "aaaaaa", "bbbbbb", "cccccc",},
        {"eeeeeee", "aaaaaa", "bbbbbb", "cccccc", "dddddd",}};
    private JTable table = new JTable(new DefaultTableModel(data, columnNames));
    private TableColumnModel tcm = table.getColumnModel();
    private Stack<TableColumn> colDeleted = new Stack<TableColumn>();
    private JButton restoreButton = new JButton("Restore Column Size");
    private JButton hideButton = new JButton("Set Column Size to Zero");
    private JButton deleteButton = new JButton("Delete Column");
    private JButton addButton = new JButton("Restore Column");

    public TableRowHeight() {
        table.setRowMargin(4);
        table.setRowHeight(30);
        table.setFont(new Font("SansSerif", Font.BOLD + Font.PLAIN, 20));
        JScrollPane scrollPane = new JScrollPane(table);
        for (int i = 0; i < (tcm.getColumnCount()); i++) {
            tcm.getColumn(i).setPreferredWidth(100);
        }
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        restoreButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                tcm.getColumn(2).setPreferredWidth(100);
            }
        });
        hideButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                tcm.getColumn(2).setPreferredWidth(000);
            }
        });
        deleteButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if (table.getColumnCount() > 0) {
                    TableColumn colToDelete = table.getColumnModel().getColumn(table.getColumnCount() - 1);
                    table.removeColumn(colToDelete);
                    table.validate();
                    colDeleted.push(colToDelete);
                    addButton.setEnabled(true);
                } else {
                    deleteButton.setEnabled(false);
                }
            }
        });
        addButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if (colDeleted.size() > 0) {
                    table.addColumn(colDeleted.pop());
                    table.validate();
                    deleteButton.setEnabled(true);
                } else {
                    addButton.setEnabled(false);
                }
            }
        });
        JPanel btnPanel = new JPanel();
        btnPanel.add(hideButton);
        btnPanel.add(restoreButton);
        btnPanel.add(deleteButton);
        btnPanel.add(addButton);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.add(scrollPane, BorderLayout.CENTER);
        frame.add(btnPanel, BorderLayout.SOUTH);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                TableRowHeight frame = new TableRowHeight();
            }
        });
    }
} 
```

编辑2

你也必须检查

```
JTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
JTable.getTableHeader().setReorderingAllowed(false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T12:38:28.370

如果它应该被删除，而不仅仅是隐藏：从表模型中删除它。如果它只是应该被隐藏并稍后显示，您可以从 TableColumnModel 中删除 TableColumn

使列高为 0 有点假。

# css - CSS div 高度太短头疼

> ID：10088854
> 
> 赞同：2
> 
> 时间：2012-04-10T12:31:26.850
> 
> 标签：css, html, height, footer, stretch

我有一个 div (id="main") 没有拉伸以适应其中动态创建的（即高度可变的）内容；'main' div 只下降到'user-info' 的底部。

这个页面的基本结构布局是'user-info'和'stream' divs在'container'内部的'main' div内并排放置；'meal-category-box' div 只是 'stream' 中的内容列表。这是 HTML 和 CSS（我也在使用 Bootstrap CSS 2）。

[http://jsfiddle.net/7yvSj/1/](http://jsfiddle.net/7yvSj/1/)

我也喜欢一个粘性页脚修复，因为我看过的没有一个与我所拥有的相结合。

请帮忙！马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:56:08.487

好吧，因为 #stream 有`position:absolute`，它不参与计算外部 div 的高度。

尝试使用填充或边距而不是使用`position:absolute`.

# oracle - 创建导致删除触发行的 UPDATE 触发器

> ID：10088856
> 
> 赞同：2
> 
> 时间：2012-04-10T12:31:32.060
> 
> 标签：oracle

我在 Oracle Express 11g 上。我正在尝试创建此触发器：

```
CREATE TRIGGER remove_useless_surveys 
     BEFORE UPDATE OF agent_id, agency_id, province_id ON surveys 
     FOR EACH ROW WHEN (
     new.agent_id IS NULL AND 
     new.agency_id IS NULL AND
     new.province_id IS NULL)
DELETE FROM surveys WHERE survey_code = :new.survey_code 
```

agent_id、agency_id 和province_id 是外键，带有ON DELETE SET NULL 子句。

当所有三个外键都设置为 NULL 时，我需要在调查表中删除一行（因为删除了引用的行）。

触发器编译没有问题，但是当条件触发时，我得到这个错误：

> SQL 错误：ORA-04091：表 REALESTATE.SURVEYS 正在变异，
> 触发器/函数可能看不到它 ORA-06512：在
> “REALESTATE.REMOVE_USELESS_SURVEYS”，第 1 行 ORA-04088：
> 执行触发器 'REALESTATE.REMOVE_USELESS_SURVEYS'
> 04091 期间出错。 00000 - “表 %s.%s 正在发生变化，触发器/函数可能看不到它”
> *原因：触发器（或此语句中引用的用户定义的 plsql 函数
> ）试图查看（或修改）一个表正在
> 被触发它的语句修改。
> *操作：重写触发器（或函数），使其不读取该表。

实际上，我知道我正在编辑触发触发器的同一张表。但是我想取消更新，或者敲定它，我不在乎，然后**删除那一行**。

你能帮助我吗？我怎样才能实现我想要做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:09:19.267

您可以使用这样的语句级触发器：

```
CREATE TRIGGER remove_useless_surveys 
AFTER UPDATE OF agent_id, agency_id, province_id ON surveys 
BEGIN
  DELETE FROM surveys 
  WHERE  agent_id IS NULL 
  AND    agency_id IS NULL
  AND    province_id IS NULL;
END; 
```

# iphone - 出现情节提要之前的标签栏项目标题

> ID：10088857
> 
> 赞同：3
> 
> 时间：2012-04-10T12:31:34.927
> 
> 标签：iphone, uitabbarcontroller, storyboard

我的应用程序以一个标签栏控制器开始，它有 5 个标签。开始时第一个显示其名称，但其他四个没有名称，直到我单击它们。然后根据用户使用的语言显示名称。如何在标签栏出现之前设置标签的名称？我正在使用故事板。当所有其余部分都用故事板完成时，有没有办法以编程方式在标签栏设置标题？我在 AppDelegate 中尝试过类似`[FirstViewController setTitle:NSLocalizedString(@"Titel1", nil)];` 但我收到一个错误，即选择器 setTitle 没有类方法。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T01:03:45.270

我今天遇到了同样的问题。我也在使用故事板。就我而言，我使用了以下方式。

1.  我创建了一个名为“MainTabBarViewController”的新“Objective-C 类”作为“UITabBarController”的子类。
2.  在“身份检查器”的故事板中，我将“自定义类”更改为“MainTabBarViewController”。

3.  在“MainTabBarViewController”的方法“viewDidLoad”中，我添加了：

    [[self.viewControllers objectAtIndex:0] setTitle:NSLocalizedString(@"home", nil)];

    [[self.viewControllers objectAtIndex:1] setTitle:NSLocalizedString(@"statistics", nil)];

    [[self.viewControllers objectAtIndex:2] setTitle:NSLocalizedString(@"settings", nil)];

    [[self.viewControllers objectAtIndex:3] setTitle:NSLocalizedString(@"info", nil)];

我想这不是完美的方式，但对我来说它很完美。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-23T17:28:56.650

我有一个带有两个这样的选项卡的配置：

```
MainTabBarController : UITabBarController
    +- MessagesNavigationController : UINavigationController
    +- ContactsNavigationController : UINavigationController 
```

在使用 Storyboard 和 ARC 的配置中，我覆盖了`initWithCoder:`我的 UITabBarController 视图控制器（在这种情况下）的自定义类中的选择器，`ContactsNavigationController`并像这样初始化`tabBarItem.title`那里：

```
@implementation ContactsNavigationController

...

- (id)initWithCoder:(NSCoder *)decoder
{
    self = [super initWithCoder:decoder];
    if (self) {
        self.tabBarItem.title = NSLocalizedString(@"Contacts", nil);
    }
    return self;
} 
```

当使用故事板时，iOS 调用`(id)initWithCoder:`而不是`-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`在 UITabBarController 启动期间初始化故事板视图控制器时。另请注意，`viewDidLoad`在从选项卡栏中选择视图控制器选项卡之前不会调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:35:50.417

在您正在创建视图控制器的应用程序委托中，在此处（而不是在 中`viewDidLoad`）设置 title 属性，例如：

```
vc1 = [[VC1 alloc] init];
vc1.title = @"List";

vc2 = [[VC2 alloc] init];
vc2.title = @"Map";

tabBarController.viewControllers = [[NSArray alloc] initWithObjects:vc1, vc2, nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T12:47:32.783

如果您查看 Xcode 使用基于该`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`方法的模板 Tab-Bar 应用程序创建的 FirstViewController，您会看到如下内容：

```
if (self) {  
    //check your language
    self.title = NSLocalizedString(@"First", @"First");
    self.tabBarItem.image = [UIImage imageNamed:@"first"];  
} 
```

所以你必须检查你的语言，然后设置`title`属性，这将在标签栏和导航栏中设置标题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:52:08.230

试试这个，在每个视图中你都必须使用这个方法

假设这是您第一次查看

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        self.title = NSLocalizedString(@"homepage", @"homepage");
        [self.tabBarItem setTag:0];
        self.tabBarItem.image = [UIImage imageNamed:@"homepage"];
    }
    return self;
} 
```

在您的应用程序委托类中编写此代码以添加`UITabBarController`

```
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2,viewController3,viewController4,viewController5, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible]; 
```

将上面的代码添加到

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {} 
```

# html - 向 html 页面表格布局寻求帮助

> ID：10088858
> 
> 赞同：0
> 
> 时间：2012-04-10T12:31:41.690
> 
> 标签：html, css

我要求提供两种布局的小帮助：

1-在母版页中，我希望在上栏旁边放一个徽标。

我怎样才能创建这样的定位：

一个左对齐的标志，靠近它的右栏的 div。

2-在特定内容页面上，我想创建两个 div 将中心平均分割

并在宽 div 下方。

这是我对顶栏的蹩脚尝试

[http://jsfiddle.net/vYgLL/](http://jsfiddle.net/vYgLL/)

表格布局会是最简单的吗？ ![在此处输入图像描述](../Images/603d955d7e324874e241d5e9f6d2eae1.png)

# wpf - WPFToolkit：拆分按钮下拉按钮禁用按钮

> ID：10088861
> 
> 赞同：1
> 
> 时间：2012-04-10T12:32:05.540
> 
> 标签：wpf, wpf-controls, wpftoolkit

![在此处输入图像描述](../Images/11f227643d54ce1cf3745b6abe5d3878.png)

我正在使用继承自的 WPF 拆分按钮

```
xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended" 
```

问题是我想禁用，按钮'下面的那个（按钮'Conf'的右侧出现在下图中的'downarrow中），如果用户单击按钮的左侧，则右侧应该被禁用并且按钮（左侧）背景应更改为黄色。请在 xaml 下方找到，我正在使用 wpf 拆分按钮，在这种情况下为下拉内容。如果您有任何想法，请告诉我

```
<extToolkit:SplitButton x:Name="ABCbutton"
                        VerticalAlignment="Center"
                        Command="{Binding ACommand}"
                        FontSize="16> 
    <TextBlock HorizontalAlignment="Center"
               IsEnabled="{Binding IsEnabled, ElementName=AButton}"
               Text="A"/>
    <extToolkit:SplitButton.DropDownContent>
        <StackPanel>
            <Button Command="{Binding BCommand}"
                    Padding="3"
                    Style="{DynamicResource   
                    DropDownButtonMenuButton}">
                <TextBlock Margin="0,3,6,3" 
                           Text="B"/>
            </Button>
            <Button Command="{Binding BCommand}"
                    Padding="3"
                    Style="{DynamicResource 
                    DropDownButtonMenuButton}">
                <TextBlock Margin="0,3,6,3"
                           HorizontalAlignment="Stretch"
                           Text="C"/>
            </Button>
        </StackPanel>
    </extToolkit:SplitButton.DropDownContent>
</extToolkit:SplitButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:54:00.417

在这种情况下，创建自己的控件可能会更好。如果没有大量修改，拆分按钮无法真正处理您正在谈论的内容。

从本质上讲，您的新控件将包含两个按钮，它们的视觉风格使它们看起来像是融合在一起。每个都有自己的背景和启用的属性。添加一个 ViewModel 来帮助控制行为和设置属性，我想你会做生意的。请记住，任何工具包、框架、控件包等中提供的所有控件都是使用原始类型的绘图和框架元素（线、矩形、边框、内容呈现器、面板等）制作的，并具有专门的行为代码。

我最终制作了很多自定义控件，只是因为没有一个可以完美地复制我想要的东西。

# nservicebus - NServiceBus 记录到自定义日志

> ID：10088864
> 
> 赞同：4
> 
> 时间：2012-04-10T12:32:14.837
> 
> 标签：nservicebus

我注意到，当我在 NServiceBus.host.exe 上调用 /install 标志时，会在应用程序事件日志下创建一个事件日志源。问题是，我们已经将 NServiceBus L4N 配置为将事件写入同一源，但在自定义事件日志下。

这会导致问题，因为如果我们在自定义事件日志下创建源，安装将失败（NserviceBus 安装程序抛出 System.ArgumentException: Source blah already exists on the local computer）。

那么我们如何才能阻止 NServiceBus 安装程序尝试在 Application 事件日志下创建事件源呢？

我们正在使用 NServiceBus 3.0.1.0

谢谢

**编辑**- 完整的堆栈跟踪

```
Creating EventLog source blah in log Application...

An exception occurred during the Install phase.
System.ArgumentException: Source blah already exists
on the local computer.

The Rollback phase of the installation is beginning.
Restoring event log to previous state for source blah
.
Service blah is being removed from the system...
Service blah was successfully removed from the system
.

The Rollback phase completed successfully.

Unhandled Exception: System.InvalidOperationException: The installation failed, and the rollback has been performed. ---> System.ArgumentException: Source blah already exists on the local computer.
   at System.Diagnostics.EventLog.CreateEventSource(EventSourceCreationData sourceData)
   at System.Diagnostics.EventLogInstaller.Install(IDictionary stateSaver)
   at System.Configuration.Install.Installer.Install(IDictionary stateSaver)
   at System.ServiceProcess.ServiceInstaller.Install(IDictionary stateSaver)
   at System.Configuration.Install.Installer.Install(IDictionary stateSaver)
   at Topshelf.Internal.Hosts.HostServiceInstaller.Install(IDictionary stateSaver) 
in d:\dev\open-source\topshelf\src\Topshelf\Internal\Hosts\HostServiceInstaller.cs:line 120
   at System.Configuration.Install.Installer.Install(IDictionary stateSaver)
   at System.Configuration.Install.TransactedInstaller.Install(IDictionary savedState)
   --- End of inner exception stack trace ---
   at System.Configuration.Install.TransactedInstaller.Install(IDictionary savedState)
   at Topshelf.Internal.Hosts.HostServiceInstaller.Register() in d:\dev\open-source\topshelf\src\Topshelf\Internal\Hosts\HostServiceInstaller.cs:line 61
   at Topshelf.Internal.Actions.InstallServiceAction.Do(IRunConfiguration configuration) in d:\dev\open-source\topshelf\src\Topshelf\Internal\Actions\InstallServiceAction.cs:line 42
   at Topshelf.Runner.Host(IRunConfiguration configuration, String[] args) in d:\dev\open-source\topshelf\src\Topshelf\Runner.cs:line 70
   at NServiceBus.Hosting.Windows.Program.Main(String[] args) in d:\BuildAgent-03\work\nsb.masterbuild1\src\hosting\NServiceBus.Hosting.Windows\Program.cs:line 122 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:00:53.470

仅当我们使用与端点名称相同的事件源名称配置 Log4net 时，才会出现此问题。

所以我们可以在我们的事件日志中使用不同的源名称（在我们的例子中，`<endpoint-name>.l4n`）。这将暂时解决该问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T12:01:31.327

如果事情真的很糟糕，您可以在注册表中找到事件日志源

```
HKLM/SYSTEM/ControlSet001/services/eventlog/... 
```

从那里，您可以手动删除不再需要的事件日志源。

# postgresql - 在使用 Doctrine2 创建数据库时，如何定义要使用的 Postgres 模板？

> ID：10088868
> 
> 赞同：0
> 
> 时间：2012-04-10T12:32:47.240
> 
> 标签：postgresql, symfony, doctrine, doctrine-orm, postgis

我正在使用 PostgreSQL 作为新 Symfony2 + Doctrine2 项目的数据库后端。我想利用 PostGIS 的一些功能，因此为 PostGIS 创建了一个 Postgres 模板。

现在，我看不到如何告诉 Doctrine2 使用 PostGIS 模板而不是默认模板，查看 Doctrine2 代码并没有引导我到任何地方（老实说，我正在努力弄清楚它是如何工作的） .

这甚至可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:32:47.250

您的一个非常基本的问题可能是当您进行抽象时，您会失去低级控制。据我所知，模板数据库不太可能是其他地方的常见概念。所以你真的必须降到一个较低的级别，手动连接到 postgres db 并`CREATE DATABASE foo WITH TEMPLATE bar`自己发出你的语句。

# java - 埃拉托色尼筛故障

> ID：10088871
> 
> 赞同：2
> 
> 时间：2012-04-10T12:32:53.283
> 
> 标签：java

我正在尝试在 Java 中创建一个 Eratosthenes 筛，但我编写的代码似乎有缺陷。我想知道是否有其他人可以发现我的错误，因为我不能。我得到的输出只是 [2]，这意味着我的主循环不起作用。我刚刚开始使用Java，如果您能给出详细的答案，我将不胜感激。

我的代码：

```
public static int[] primes(int n)
{
    //Variable assignement
    double sqrt;
    List<Integer> primes= new ArrayList<Integer>();
    //Adds 2 to primes so i don't need to include the even numbers in my for loop.
    if(n>1)
    {
        primes.add(2);
    }
    //For loop that goes through the oneven numbers up to n
    for(int counter1=3;counter1<=n;counter1+=2)
    {
        sqrt=Math.floor(Math.sqrt(0.0+counter1));
        //for loop that tests if the first for loops number is prime
        for(int counter2=0;sqrt<=primes.get(counter2);counter2++)
        {
            if(counter1 % primes.get(counter2) != 0 && counter2 ==sqrt)
            {
                primes.add(counter1);
            }

            if(counter1 % primes.get(counter2)==0)
            {
                break;
            }
        }
    }
    return convertIntegers(primes);
}
//Converts the list to an array
public static int[] convertIntegers(List<Integer> integers)
{
    int[] ret = new int[integers.size()];
    for (int i=0; i < ret.length; i++)
    {
        ret[i] = integers.get(i).intValue();
    }
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:35:26.860

```
if(counter1 % primes.get(counter2)==0);{
    break;}
} 
```

不太可能有帮助。您在左大括号前有一个分号 - 您的 break 将始终被执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:48:17.167

我没有彻底检查您的代码，但可能涉及精度问题。请注意，它`double`可能不能精确地表示整数值，因此`counter2 ==sqrt`即使`sqrt`看起来是整数也可能是错误的。

为防止这种情况，请尝试以下操作：

```
//this is not necessarily a square root anymore, btw :)
int sqrt = (int) Math.floor( Math.sqrt( (double)counter1 ) );
...
for( ... ) {
  ...
  if(... && counter2 ==sqrt ) {
    ...
  }
  ...
} 
```

*编辑*：

稍微深入一点的分析得出这样的结论：

假设 n = 5，因此将在您的代码中执行以下步骤：

1.  `counter1 = 3`
2.  `sqrt = 1` // 楼层(sqrt(2))
3.  `counter2 = 0`
4.  `counter1 % primes.get(counter2) != 0 && counter2 ==sqrt`是假的，因为`3 % 2 = 1`BUT`0 != 1`
5.  `counter1 % primes.get(counter2)==0`是假的，因为`3 % 2 = 1`
6.  `counter2 = 1`（下一次迭代）
7.  `primes.get(counter2)`抛出异常，因为`primes.get(1)`需要`primes`至少 2 个元素。

你可能会尝试的是`counter2 <=sqrt`。

# objective-c - 如何使用 NSDictionary

> ID：10088872
> 
> 赞同：3
> 
> 时间：2012-04-10T12:32:54.107
> 
> 标签：objective-c, nsdictionary

我试图了解如何使用 in `NSDictionary`，所以我创建了 2 个文件，第一个是 bookStore

这是界面：

```
#import <Foundation/Foundation.h>
#import "Book.h"

@interface Bookstore : NSObject {

    NSDictionary* myBookStore;

}

@property(retain) NSDictionary* myBookStore;

-(id)init;
-(void)printInvetory;
-(BOOL)addBook:(Book*)newBook;
-(BOOL)removeBookWithTitle:(NSString*)whichTitle;
-(BOOL) findBook:(NSString*)whatLook;
-(void) dealloc;

@end 
```

这是实现

```
#import "Bookstore.h"
#import "Book.h"

@implementation Bookstore

@synthesize myBookStore;

-(id)init {

    self=[super init];
    if (self!=nil) {
        myBookStore=[[NSMutableDictionary alloc] init];
    }
    return self;

}

-(BOOL)addBook:(Book*)newBook {

    [myBookStore setObject:newBook forKey:newBook.title];
    return YES;

}

-(BOOL) removeBookWithTitle:(NSString *)whichTitle {

//    if ([myBookStore ObjectForKey:whichTitle]!=nil) {
        [myBookStore removeObjectForKey:whichTitle];
        return YES;

 //   }

    return NO;

}

-(BOOL) findBook:(NSString *)whatLook {

    Book *book;
    for (NSString* key in myBookStore) {
       if ([myBookStore objectForKey:key]==whatLook ){
            book=[myBookStore objectForKey:key];
            NSLog(@"      Title: %@ ",book.title);
            NSLog(@"     Author: %@ ",book.author);
            NSLog(@"Description: %@ ",book.description);
            NSLog(@"Id number: %d " , book.idNumber);
        }

    }

}

-(void) printInvetory {

    Book *book;
    for (NSString* key in myBookStore) {
        book= [ myBookStore objectForKey:key];
        NSLog(@"      Title: %@ ",book.title);
        NSLog(@"     Author: %@ ",book.author);
        NSLog(@"Description: %@ ",book.description);
        NSLog(@"Id number: %d " , book.idNumber);
    }

}

-(void) dealloc {

    self.myBookStore = nil;
    [super dealloc];

}

@end 
```

第二个是书

这是界面

```
#import <Foundation/Foundation.h>

@interface Book : NSObject {

    NSString *title;
    NSString *author;
    NSString *description;
    int idNumber;
}

@property (nonatomic,retain) NSString* title;
@property (nonatomic,retain) NSString* author;
@property (nonatomic,retain) NSString* description;
@property (nonatomic) int idNumber;

-(id) initWithTitle:(NSString*)newTitle author:(NSString*)newAuthor description:(NSString*)newDescription idNumber:(int) newIdNumber;

@end 
```

这就是实现

```
#import "Book.h"

@implementation Book

@synthesize title,author,description,idNumber;

-(void) initWithTitle:(NSString*)newTitle author:(NSString*)newAuthor description:(NSString*)newDescription idNumber:(int)newIdNumber {

    title=newTitle;
    author=newAuthor;
    description=newDescription;
    idNumber=newIdNumber;

}

@end 
```

这是主文件

```
#import <Foundation/Foundation.h>
#import "Book.h"
#import "Bookstore.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSString* find=@"gingi";
        // insert code here...
        Bookstore* theBookNook = [[Bookstore alloc] init];
        NSString* newTitle = @"A Farwell To Arms";
        Book* newBook = [[Book alloc] initWithTitle:newTitle author:@"Ernest Hemingway" description:@"The story of an " "affair between an English nurse and an American soldier on the Italian front during World War I." idNumber:3];
        [theBookNook addBook:newBook];
        newTitle =@"gingi";
        [newBook initWithTitle:newTitle author:@"bla bla" description:@"bla bla bla" idNumber:98];
        [newBook release];
        [theBookNook addBook:newBook];
        [theBookNook findBook:find];
        [theBookNook release];

    }
    return 0;
} 
```

我有3个问题：

1：为什么当我添加第二本书然后我打印所有我看到的书是同一本书

例如，在这个输入中，输出将是

```
2012-04-10 15:26:45.476 MyBookstore[43574:403]       Title: gingi 
2012-04-10 15:26:45.478 MyBookstore[43574:403]      Author: bla bla 
2012-04-10 15:26:45.478 MyBookstore[43574:403] Description: bla bla bla 
2012-04-10 15:26:45.479 MyBookstore[43574:403] Id number: 98 
2012-04-10 15:26:45.479 MyBookstore[43574:403]       Title: gingi 
2012-04-10 15:26:45.480 MyBookstore[43574:403]      Author: bla bla 
2012-04-10 15:26:45.480 MyBookstore[43574:403] Description: bla bla bla 
2012-04-10 15:26:45.481 MyBookstore[43574:403] Id number: 98 
```

2：我不明白为什么 findBook 方法不起作用？3：我想知道我是否可以在`NSDictionary`不使用密钥的情况下找到书籍，（在我的例子中，密钥是标题）比如作者或idNumber？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:41:18.257

在 findBook().. 里面你正在做一个字符串匹配所以使用

```
if ([[myBookStore objectForKey:key] isEqualToString:whatLook] ){ 
```

代替

```
 if ([myBookStore objectForKey:key]==whatLook ){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:42:43.530

1.  添加书籍对象时，请执行以下操作：

    ```
    Book* newBook = [[Book alloc] initWithTitle:newTitle author:@"Ernest Hemingway" description:@"The story of an " "affair between an English nurse and an American soldier on the Italian front during World War I." idNumber:3];
    [theBookNook addBook:newBook];
    [newBook release];
    newTitle =@"gingi";
    newBook = [[Book alloc] initWithTitle:newTitle author:@"bla bla" description:@"bla bla bla" idNumber:98];
    [theBookNook addBook:newBook];
    [newBook release]; 
    ```

2.  改变你的`findBook:`方法如下：

    `-(BOOL)findBook:(NSString *)whatLook{`

    ```
    Book *book;
    for (NSString* key in [myBookStore allKeys]) 
    {
        if ([[myBookStore objectForKey:key] isEqualToString:whatLook] )
        {
            book=[myBookStore objectForKey:key];
            NSLog(@"      Title: %@ ",book.title);
            NSLog(@"     Author: %@ ",book.author);
            NSLog(@"Description: %@ ",book.description);
            NSLog(@"Id number: %d " , book.idNumber);
        }
    } 
    ```

    `}`

# java - 使用 Spring AOP 捕获 Spring 运行时异常

> ID：10088881
> 
> 赞同：4
> 
> 时间：2012-04-10T12:33:05.553
> 
> 标签：java, spring, aop, aspectj, spring-aop

出于日志记录的目的，我们正在尝试通过 Spring 自己的 AOP 捕获各种 Spring 的运行时异常，我必须说我没有成功，所以我会很感激任何关于如何解决这个问题的想法。

我试过这样的事情：

```
@Aspect
@Component
public class SomeAspect {

@AfterThrowing(pointcut = "execution(* org.springframwork.oxm..*(..))", throwing = "exception")
@Transactional(propagation = Propagation.REQUIRES_NEW, isolation = Isolation.READ_COMMITTED)
public void adviseSpringErrorEvents(JoinPoint joinPoint, final UnmarshallingFailureException exception) throws Throwable {

         LOG.debug(this.getClass().getSimpleName() + " - Error message advice fired on method: " + joinPoint.getSignature().getName());
     }
} 
```

该类是自动代理的，并且方面类中的其余建议正确触发，因此 AspectJ 表达式肯定存在问题。

更新：方法中的代码没有运行，我无意在建议中捕获异常。

有任何想法吗？提前谢谢。

PS Spring框架版本是3.0.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:04:57.280

以下是一些对我来说很突出的事情：

1.  你的切入点是你试图捕捉它的异常所在的弹簧包，它应该是你试图加入的地方`execution(* com.mypackage..*(..))`。
2.  您正在投掷可投掷的东西，但您不需要声明任何被投掷的东西。被告知的异常不会通过此代码传播。

要尝试的事情：

1.  将您的异常参数扩展为`Exception`. 也许您正在寻找的例外是在不同的层次结构中。
2.  将切入点扩大到 * 包级别 - 但最好不要同时执行 1 和 2。
3.  将日志记录提高到更严格的级别，以确保它不会被您的日志记录框架吞噬。

# python - Python：将两个值传递给过滤器中使用的函数

> ID：10088883
> 
> 赞同：0
> 
> 时间：2012-04-10T12:33:07.567
> 
> 标签：python

我做了一个过滤功能来过滤掉文件名列表中的文件类型。

```
>>> l1
['180px-Cricketball.png', 'AgentVinod_450.jpg', 'Cricketball.bmp', 'Django-1.4', 'Django-1.4.tar.gz', 'Firefox Setup 11.0.exe', 'I-Will-Do-The-Talking-Tonight-(Muskurahat.Com).mp3', 'kahaani-.jpg', 'Never gonna leave this bed.mp3', 'Piya-Tu-Kaahe-Rootha-Re-(Muskurahat.Com).mp3', 'pygame-1.9.1release', 'pygame-1.9.1release.zip', 'pygame-1.9.2a0.win32-py2.7.msi', 'python-2.7.2.msi', 'python-3.1.2.msi', 'Resume.doc', 'selenium-2.20.0', 'selenium-2.20.0.tar.gz', 'sqlite-shell-win32-x86-3071100.zip', 'wxdesign_220a.exe', 'YTDSetup.exe']
>>> def myfilt(subject):
    if re.search('.jpg',subject):
        return True

>>> filter(myfilt,l1)
['AgentVinod_450.jpg', 'kahaani-.jpg'] 
```

这工作正常。

现在假设我想让它更灵活。我想将文件类型传递给函数。所以我重写了函数

```
>>> def myfilt(subject,filetype):
    if re.search(filetype,subject):
        return True 
```

现在如何通过过滤器函数传递文件类型？

我试过：

```
>>> filter(myfilt(l1,filetype),l1)

Traceback (most recent call last):
  File "<pyshell#32>", line 1, in <module>
    filter(myfilt(l1,filetype),l1)
  File "<pyshell#28>", line 2, in myfilt
    if re.search(filetype,subject):
  File "C:\Python27\lib\re.py", line 142, in search
    return _compile(pattern, flags).search(string)
TypeError: expected string or buffer 
```

没有任何工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T12:35:09.130

您通常会使用列表推导而不是`filter()`这种情况：

```
[x for x in l1 if myfilt(x, filetype)] 
```

如果你真的想使用`filter()`，你可以使用 lambda 函数

```
filter(lambda x: myfilt(x, filetype), l1) 
```

或`functools.partial()`：

```
filter(functools.partial(myfilt, filetype=filetype), l1) 
```

不过，列表推导似乎是最简单、最易读的选项。

# c# - Skyhook c# 包装器？

> ID：10088885
> 
> 赞同：0
> 
> 时间：2012-04-10T12:33:22.860
> 
> 标签：c#, .net, positioning

有谁知道用 C#/VB 编写的功能性 Skyhook 无线 API 包装器，我可以将其用作我自己集成的参考点？去年有一篇文章引用了一个 API，但它的链接现在已经死了。任何帮助，将不胜感激！

这是我引用的帖子：[Skyhook API/StackOverflow](https://stackoverflow.com/questions/4323165/is-there-a-good-framework-sdk-on-wifi-positioning-with-c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:06:51.020

使用托管代码 (c#) 的 Skyhook 的最佳示例可以在 Joel Ivory Johnson 的[Code Project](http://www.codeproject.com/Articles/32301/Using-the-Skyhook-Wireless-XPS-Positioning-Service)文章中找到。

自文章发布以来，Skyhook API 可能会发生一些变化，因此您可能需要重构代码的某些部分。

我希望它有所帮助。

# javascript - 从 html 页面打印表格

> ID：10088890
> 
> 赞同：21
> 
> 时间：2012-04-10T12:33:38.677
> 
> 标签：javascript, html, printing

我有一个 html 页面，需要将表格发送到打印机。我现在正在使用 window.print .. 但这会打印整个页面...而我只需要打印表格。有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-10T12:38:04.497

1.  您可以使用[媒体类型打印](http://www.w3.org/TR/CSS21/media.html) （[这里是提示](https://css-tricks.com/css-tricks-finally-gets-a-print-stylesheet/)，如何使用样式表打印 html 页面）。

2.  您可以通过弹出窗口实现这一点 - 在此窗口中仅显示表格并将其发送到打印机。

简单的例子

```
<script>
    function printDiv() {
        var divToPrint = document.getElementById('areaToPrint');
        newWin = window.open("");
        newWin.document.write(divToPrint.outerHTML);
        newWin.print();
        newWin.close();
   }
</script> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-16T06:16:54.627

`display:none`您可以为页面中所有不需要的部分赋予样式。这样你就可以只打印表格。

例如：

```
<style>
    @media only print {
        footer, header, .sidebar {
            display:none;
        }
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T09:40:18.903

为了使它工作，我还需要在我的文档的头部之间放置这条线。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> 
```

# php - Facebook 画布是空白的

> ID：10088891
> 
> 赞同：0
> 
> 时间：2012-04-10T12:33:49.513
> 
> 标签：php, facebook

我只是想用 Facebook 画布包装我的 php 表单，但它显示为空白屏幕。当我直接尝试表单时，效果很好。我应该怎么办？我没有使用任何 SDK，因为我不需要任何权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:44:54.623

我有同样的问题，因为我不能发表评论。我就这么说吧。检查以确保引用了确切的文件，而不仅仅是其所在的目录。即页面选项卡 URL：域/目录/index.html。很快你也需要一个 https 版本。

# sql - 非常简单的 SQL 查询

> ID：10088896
> 
> 赞同：1
> 
> 时间：2012-04-10T12:34:04.120
> 
> 标签：sql, sql-server-2008

```
SELECT Id, to, Subject, Body, DateCreated, DateSent 
FROM Emails 
```

给出以下错误：

> 消息 156，级别 15，状态 1，行 1
> 关键字“to”附近的语法不正确。

知道为什么吗？

`TO`是突出显示的，所以我猜，是因为它认为那是一个关键字，反正要防止这种情况发生？

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:34:53.560

是的，`to`像这样放在括号中`[to]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:35:24.353

`[]`您可以通过用（特定于 SQL Server 的）包围它来逃避它：

```
SELECT Id,[to],Subject,Body,DateCreated,DateSent 
FROM Emails 
```

您还可以使用标准 SQL 转义，`"`详见[此处](https://stackoverflow.com/questions/2901453/sql-standard-to-escape-column-names)：

```
SELECT Id,"to",Subject,Body,DateCreated,DateSent 
FROM Emails 
```

# javascript - 创建自定义 HTML 页面页眉和页脚

> ID：10088897
> 
> 赞同：1
> 
> 时间：2012-04-10T12:34:05.143
> 
> 标签：javascript, html, css, printing, wkhtmltopdf

我正在使用 wkhtmltopdf 应用程序创建 html 到 pdf 转换器，并且在尝试插入自定义页眉和页脚以显示在输出文档上时遇到了麻烦。对于我正在制作的程序，我需要在 html 页面中创建这些内容，该页面出于打包原因传递到转换器。wkhtmltopdf 程序不接受@media print css 方法，所以我想知道是否有任何其他方法可以在 HTML、JavaScript 或 CSS 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:27:07.593

使用`--header-html`and`--footer-html`选项将 URL 或文件路径传递给可执行文件。[文档](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf_0.10.0_rc2-doc.html#Headers%20And%20Footer%20Options)

如果您要链接到库，请使用对象设置页眉和页脚属性： `settings.header.htmlUrl`

# ruby-on-rails - 如何解决 LinkController#callback rails 中的这个 TypeError？

> ID：10088898
> 
> 赞同：0
> 
> 时间：2012-04-10T12:34:23.823
> 
> 标签：ruby-on-rails

嗨，这是我使用的代码

```
user = client.profile(:fields => %w(positions))
    puts "User client :"+user.positions[0] 
```

当我运行代码时，出现以下错误。

```
TypeError in LinkController#callback
can't convert LinkedIn::Position::Resource into Stringcan't convert LinkedIn::Position::Resource into String 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:19:13.533

您是否尝试将其转换为字符串？

```
将“用户客户端：”+user.positions[0].to_s
```

或更好 ：

```
提出“用户客户端：#{user.positions[0]}”
```

# .net - 网站无法找到 silverlight 库的程序集

> ID：10088906
> 
> 赞同：2
> 
> 时间：2012-04-10T12:34:52.303
> 
> 标签：.net, silverlight, iis, gac

我在 Visual Studio 中有一个网站类型的项目，并且包含了对我的 silverlight 5 库项目的引用。在 SL5 项目中，我包括 System.Runtime.Serialization 程序集。当我尝试访问使用 SL5 库的网站页面之一时，我收到以下错误：

```
Could not load file or assembly 'System.Runtime.Serialization, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' or one of its dependencies. The system cannot find the file specified. 
```

我已经在发布网站的盒子上安装了 SL5 SDK，但似乎找不到该程序集。关于发生了什么的任何想法？我已经重新启动了 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:00:51.243

您不能在 asp 网站项目中使用 SL5 类库，因为它们具有不同的运行时。有时它可以工作，当库很简单时，但在你的情况下，库依赖于 System.Runtime.Serialization。

如果您需要在 SL 和 ASP 项目之间共享代码，您可以创建简单的 .Net 类库（不是 SL5）并将 SL5 库中的所有文件作为链接添加到 .Net 库（添加/现有项目.../添加为链接）。为您的 ASP Web 项目添加对新库的引用并删除旧 (SL5) 库。

这是在不同库类型之间共享代码的一种方式。如果您的代码中有特定于 SL 的依赖项，则可能无法构建新库。希望我的想法对你有所帮助。

# iphone - 如何在谷歌地图自动完成 API 中获得五个以上的结果

> ID：10088909
> 
> 赞同：3
> 
> 时间：2012-04-10T12:34:57.540
> 
> 标签：iphone, google-maps

我正在使用这个 API，并且在这个 API 文档中写的地方搜索中只得到了五个结果。 [https://developers.google.com/maps/documentation/places/autocomplete](https://developers.google.com/maps/documentation/places/autocomplete)

有什么办法可以得到更多的结果。如果是，请告诉我非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T12:56:29.427

根据您链接的文章：预测包含一系列地点，以及有关地点的信息。有关这些结果的信息，请参阅放置自动完成结果。**Places API 最多返回 5 个结果。**

您将无法获得超过 5 个结果。

# unix - 查找（Unix shell 命令）：如何对不存在的文件使用相同文件运算符

> ID：10088912
> 
> 赞同：1
> 
> 时间：2012-04-10T12:35:07.987
> 
> 标签：unix, command-line, find

我们有一个使用 find 命令的脚本，如下所示（删除一些特殊目录以外的旧文件）

```
find /data/foo -mtime 30 -and -not -samefile /data/foo -and -not -samefile /data/foo/specialdir -delete 
```

现在，在多台机器上使用相同的脚本，其中一些没有 /data/foo/specialdir 可用。这会导致错误“find: /data/foo/specialdir: No such file or directory”。

我们可以在那里创建那个目录，但是如果 xyz 不存在，还有其他方法可以让“-not -samefile xyz”（或类似的东西）工作吗？

兄弟，图科

编辑：在原始问题的命令末尾忘记了 -delete

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:42:25.143

你可以把它变成一个两线：

```
test -d /data/foo/specialdir || test_specialdir='-and -not -samefile /data/foo/specialdir'
find /data/foo -mtime 30 -and -not -samefile /data/foo "$test_specialdir" 
```

# c# - ScrollViewer 向下滚动但又回到顶部

> ID：10088915
> 
> 赞同：0
> 
> 时间：2012-04-10T12:35:11.390
> 
> 标签：c#, windows-phone-7

嗨，我正在尝试使用 ScrollViewer，但它无法正常工作，当我向下拖动以查看视图的其余部分时，它会一直弹回顶部。

我尝试将高度静态设置为页面的设计高度，但这也不起作用，并尝试将其包装在网格中。

这是我的 xaml

```
<ScrollViewer Height="768">
    <!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">

    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>

    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0"  Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="myApp" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="Menu" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

        <Button Background="{StaticResource PhoneAccentBrush}" Height="221" Width="223"  HorizontalAlignment="Left" Margin="0,15,0,0" Name="rectangle1"  VerticalAlignment="Top" Click="rectangle1_Click">
            <Image Name="image1" Source="/Images/1.png" />

        </Button>
        <Button Background="{StaticResource PhoneAccentBrush}" Height="221" Width="223" Margin="227,15,0,0"  HorizontalAlignment="Left" Name="rectangle2"  VerticalAlignment="Top" Click="rectangle2_Click">
            <Image Name="image2" Source="/Images/2.png" />

        </Button>
        <Button Background="{StaticResource PhoneAccentBrush}" Height="221" Width="223" Margin="0,0,0,138"  HorizontalAlignment="Left" Name="rectangle3"  VerticalAlignment="Bottom" Click="rectangle3_Click">
            <Image Name="image3" Source="/Images/3.png" />

        </Button>
        <Button Background="{StaticResource PhoneAccentBrush}" Height="221" Width="223" Margin="227,0,0,138"  HorizontalAlignment="Left" Name="rectangle4"  VerticalAlignment="Bottom">
            <Image Name="image4" Source="/Images/4.png" />

        </Button>
        <Button Background="{StaticResource PhoneAccentBrush}" Height="221" Width="223" Margin="0,0,0,-89" HorizontalAlignment="Left" Name="rectangle" VerticalAlignment="Bottom" IsTabStop="True">
            <Image Name="image5" Source="/Images/5.png" />
        </Button>
        <TextBlock Foreground="White" Height="59" FontSize="30" HorizontalAlignment="Left" Margin="79,183,0,0" Name="textBlock1" Text="Stop Gap" VerticalAlignment="Top" Width="133" />
            <TextBlock Foreground="White" Height="59" FontSize="30" HorizontalAlignment="Left" Margin="285,183,0,0" Name="textBlock2" Text="Time Lapse" VerticalAlignment="Top" Width="150" />
            <TextBlock Foreground="White" Height="40" FontSize="30" HorizontalAlignment="Left" Margin="96,413,0,0" Name="textBlock3" Text="Projects" VerticalAlignment="Top" Width="116" />
            <TextBlock Foreground="White" Height="50" HorizontalAlignment="Left" FontSize="30" Margin="321,413,0,0" Name="textBlock4" Text="Settings" VerticalAlignment="Top" Width="114" />

        </Grid>
    <ScrollViewer>
    </ScrollViewer>

</Grid>
</ScrollViewer> 
```

如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:08:50.683

您当前的实现不起作用的原因是您的定义实质上是告诉 Silverlight 将所有 Image 控件和 TextBlock 控件放置到单个网格单元中。这意味着所有对象都使用网格作为其定位和缩放的基础，而不是像您在代码中所期望的那样相互堆叠。

这样做的结果是控件相互重叠，看起来只有 1 个控件可见（当您强制“底部”对齐网格中的某些项目时，您可能会看到 2 个控件，这意味着这些将对齐到单元格的底部，并且不会与与顶部对齐的其他控件重叠。这可能是为什么它看起来只有部分列表由 ScrollViewer 显示）。

Josemiguel 的回答确实解释了一种合适的解决方案。另一种（我认为）更简单的选择是使用一个或多个**StackPanel**控件，这将强制控件以指定的方向相互堆叠（默认为垂直）。也可以将 StackPanel 相互堆叠和嵌套。

MSDN： http: [//msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel(v=vs.95).aspx - T](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel%28v=vs.95%29.aspx) - 滚动到 MSDN 页面底部以查看一个很好的示例使用几个彩色矩形的堆栈面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:10:20.793

实现它的最佳方法是使用某种控件（如 WrapPanel）并创建一个空的 DataTemplate 来动态添加所需的所有项目。[在这里](http://www.kotancode.com/2010/12/29/wp7-presenting-listbox-items-inside-a-wrappanel/)和[这里](http://www.windowsphonegeek.com/articles/WP7-WrapPanel-in-depth)你会找到一个例子。

# c# - SignalR：我无法从服务器调用 .net 客户端方法

> ID：10088919
> 
> 赞同：4
> 
> 时间：2012-04-10T12:35:29.393
> 
> 标签：c#, signalr

我想用 .NET 客户端实现一个 pub/sub 应用程序，所以我正在通过这个最少的代码测试 SignalR。

这是服务器：

```
namespace Test.SignalRComm.SimpleServer
{
    using System.Threading.Tasks;
    using log4net;
    using SignalR;
    using SignalR.Hosting.Self;
    using SignalR.Hubs;
    using SignalR.Infrastructure;

    class Program
    {
        private static SignalRServer signalRServer = null;

        static void Main(string[] args)
        {
            signalRServer = new SignalRServer();
            signalRServer.Start();

            System.Console.WriteLine("Press Enter to close...");
            System.Console.ReadLine();

            signalRServer.Stop();
        }
    }

    public class SignalRServer
    {
        private string serverUrl = null;
        public Server signalRServer = null;

        public SignalRServer()
        {
            serverUrl = @"http://localhost:5001/";
            signalRServer = new SignalR.Hosting.Self.Server(serverUrl);
            signalRServer.EnableHubs();
        }

        public void Start()
        {
            signalRServer.Start();
        }

        public void Stop()
        {
            IConnectionManager connManager = signalRServer.DependencyResolver.Resolve<IConnectionManager>();
            dynamic clients = connManager.GetClients<SignalRTestHub>();
            clients.AddMessage("Test");

            signalRServer.Stop();
        }
    }

    public class SignalRTestHub : Hub, IDisconnect
    {
        private static readonly ILog logger = LogManager.GetLogger(typeof(SignalRTestHub));

        public void Register(string token)
        {
            AddToGroup(token).ContinueWith(task =>
            {
                if (task.IsFaulted)
                    logger.Error(task.Exception.GetBaseException());
                else
                {
                    string message = string.Format("Client {0} registered with token <{1}>", Context.ConnectionId, token);
                    logger.Info(message);

                }
            });
        }

        public void Unregister(string token)
        {
            RemoveFromGroup(token).ContinueWith(task =>
            {
                if (task.IsFaulted)
                    logger.Error(task.Exception.GetBaseException());
                else
                    logger.InfoFormat("Client {0} unregistered from token <{1}>", Context.ConnectionId, token);
            });
        }

        public Task Disconnect()
        {
            string message = string.Format("Client {0} disconnected", Context.ConnectionId);
            logger.Info(message);

            return null;
        }
    }
} 
```

这是客户：

```
namespace Test.SignalRComm.SimpleClient
{
    using System.Threading.Tasks;
    using log4net;
    using SignalR.Client.Hubs;

    class Program
    {
        private static readonly ILog logger = LogManager.GetLogger(typeof(Program));

        static void Main(string[] args)
        {
            SignalRClient client = new SignalRClient("http://localhost:5001/");
            client.Start().ContinueWith(task =>
            {
                if (task.IsFaulted)
                {
                    logger.Error("Failed to start!", task.Exception.GetBaseException());
                }
                else
                {
                    logger.InfoFormat("Success! Connected with client connection id {0}", client.ConnectionId);
                    // Do more stuff here
                    client.Invoke("Register", "Test").ContinueWith(tsk =>
                    {
                        if (tsk.IsFaulted)
                            logger.Error("Failed to start!", tsk.Exception.GetBaseException());
                        else
                            logger.Info("Success! Registered!");
                    });
                }
            });

            System.Console.WriteLine("Press Enter to close...");
            System.Console.ReadLine();

            client.Invoke("Unregister", "Test").ContinueWith(tsk =>
            {
                if (tsk.IsFaulted)
                    logger.Error("Failed to stop!", tsk.Exception.GetBaseException());
                else
                    logger.InfoFormat("Success! Unregistered!");
            });
            client.Stop();
        }
    }

    public class SignalRClient : HubConnection
    {
        private static readonly ILog logger = LogManager.GetLogger(typeof(SignalRClient));

        IHubProxy hub = null;

        public SignalRClient(string url)
            : base(url)
        {
            hub = CreateProxy("Test.SignalRComm.SimpleServer.SignalRTestHub");
        }

        public Task Invoke(string methodName, params object[] args)
        {
            return hub.Invoke(methodName, args);
        }

        public void AddMessage(string data)
        {
            logger.InfoFormat("Received {0}!", data);
        }
    }
} 
```

虽然从客户端（`Register`和`Unregister`）调用集线器方法工作正常，但我无法`AddMessage`从集线器调用客户端方法。此外，`Disconnect`当客户端关闭时，永远不会调用集线器的方法。

我做错了什么？我找不到任何工作示例。

## 编辑

在客户端订阅 hubs 事件，如下所示：

```
hub.On<string>("Notify", message => Console.Writeline("Server sent message {0}", message); 
```

并像这样在集线器上触发事件：

```
Clients.Notify("Something to notify"); 
```

使从服务器到客户端的通知正常工作。

我仍然无法检测到客户端断开连接。我`IDisconnect`在集线器上实现了接口，但是当客户端连接停止时，`Disconnect`集线器上的方法不会被触发。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:37:30.450

看看如何在此处使用 .NET 客户端：

[https://gist.github.com/1324342](https://gist.github.com/1324342)

和这里的 API 文档：

[https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

TL;DR 您需要订阅特定的方法，从 hubConnection 派生不会使任何魔术发生。

# ruby-on-rails - 如何在控制器中测试 Rspec

> ID：10088920
> 
> 赞同：1
> 
> 时间：2012-04-10T12:35:30.400
> 
> 标签：ruby-on-rails, rspec

在控制器中，

```
def admin_search
   @admins = User.find(:all,:joins=>[:roles],:conditions=>["name IN (?) and email like '#{params[:email]}%'",["content team","ops team"]]).paginate(:page => params[:page], :per_page => 10)
end 
```

请建议我在 rspec 中的一些代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:58:42.163

首先，最好提取`find(:all, ...)`对 User 模型的调用。例如，称之为`search`。

```
class User < ActiveRecord::Base
  scope :search_by_email, lambda { |email|
    joins(:roles).where(["name IN (?) and email like '#{email}%'",["content team","ops team"]])
  }
end 
```

然后在控制器中使用它：

```
def admin_search
   @admins = User.search_by_email(params[:email]).paginate(:page => params[:page], :per_page => 10)
end 
```

现在，您可以单独测试该`search_by_email`方法 - 检查它是否仅返回“内容团队”和“操作团队”的结果，是否正确使用空电子邮件字符串等等。

我认为您不必测试`paginate`方法，因为它应该已经在 kaminari、will_paginate 或您使用的任何东西中进行了测试。但是，如果您想确定它正在被调用，那么您可以`should_receive`在控制器规范中使用模拟期望 ()。

**编辑：**规格如何

```
describe User do
  describe ".search_by_email" do
    let(:content_team) { Role.create! name: "content team" }
    let(:ops_team)     { Role.create! name: "ops team"     }
    let(:another_team) { Role.create! name: "another team" }

    it "should search in content team" do
      content_team_user = User.create! email: "joe.black@example.com", roles: [content_team]
      User.search_by_email("black").should == [content_team_user]
    end

    it "should search in ops team" do
      ops_team_user = User.create! email: "joe.black@example.com", roles: [ops_team]
      User.search_by_email("black").should == [ops_team_user]
    end

    it "should not search in other teams" do
      other_team_user = User.create! email: "joe.black@example.com", roles: [another_team]
      User.search_by_email("black").should == []
    end

    it "should not search by empty string" do
      content_team_user = User.create! email: "joe.black@example.com", roles: [content_team_user]
      User.search_by_email("").should == []
      User.search_by_email(nil).should == []
    end

    # more specs for search...
  end
end

describe UsersController do
  describe "admin search" do
    let(:admin_user) { double(:admin_user).as_null_object }
    let(:search_string) { 'joe' }

    it "should search for admin users" do
      User.should_receive(:search_by_email).with(search_string).and_return([admin_user])
      get :admin_search, email: search_string
      assigns(:admins).should == [admin_user]
    end
  end
end 
```

# wordpress - 将自定义分类法添加到自定义帖子，如何？

> ID：10088929
> 
> 赞同：0
> 
> 时间：2012-04-10T12:36:08.610
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我在自定义帖子中添加自定义分类时遇到了一些问题。我已经创建了这样的自定义帖子：

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
register_post_type( 'profiel_pagina',
    array(
        'labels' => array(
            'name' => __( 'Profiel pagina' ),
            'singular_name' => __( 'Profiel pagina' )
        ),
    'public' => true,
    'has_archive' => true,
    'supports'   => array('title', 'editor', 'thumbnail')
    )
); 
```

像这样的自定义分类法：

```
function create_my_taxonomies() {
register_taxonomy('vakgebied', 'post', array(
'hierarchical' => false, 'label' => 'Vakgebied',
'query_var' => true, 'rewrite' => true));
}register_taxonomy('specialisatie', 'post', array(
'hierarchical' => false, 'label' => 'Specialisatie',
'query_var' => true, 'rewrite' => true));
 }
add_action('init', 'create_my_taxonomies', 0); 
```

这一切都很好，但我怎样才能将这两者相互连接？使用 'taxonomies' => array('post-tag') 不起作用。根据法典，在添加自定义分类时也使用“post”不是正确的方法，但我应该怎么做呢？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:03:06.853

您当前正在将分类法添加到`post`内容类型。您想将它们添加到，`profiel_pagina`以便您使用`register_taxonomy('vakgebied', 'profiel_pagina', array(...));`

# jquery - 如何根据img高度更改img宽度

> ID：10088930
> 
> 赞同：0
> 
> 时间：2012-04-10T12:36:13.990
> 
> 标签：jquery, image, resize, height, width

我需要根据 img 高度更改 img 宽度。我使用了 jQuery 高度属性，但它不起作用。请在下面查看我的功能。

```
$(function imagesSizer(){
    var img = document.getElementsByClassName('.offer_img');
    if  ($('.offer_img').height() < 210) {
         $('.offer_img').css('width','360px')
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:39:06.103

你应该试试

```
//Wait until the DOM is ready
$(function(){
    //get all images and iterate over them
    $('.offer_img').each(function(){;
        //if the height of this img is < 210
        if  ($(this).height() < 210) {
            //set the width to 360
             $(this).width(360);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:44:56.800

对于单个元素，

```
$( function(){
    if ( $('.offer_img')[0].height() < 210 )
        $('.offer_img').width(360);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:39:40.507

改变

```
var img = document.getElementsByClassName('.offer_img'); 
```

至

```
var img = document.getElementsByClassName('offer_img'); 
```

[https://developer.mozilla.org/en/DOM/document.getElementsByClassName](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)

# php - 如何使用 PHP 代码从服务器下载文件

> ID：10088932
> 
> 赞同：3
> 
> 时间：2012-04-10T12:36:21.110
> 
> 标签：php

如何从任何服务器从 PHP 代码下载文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:39:26.103

您可以使用 Curl 使用 php 从 Web 下载文件

```
function curl_get_file_contents($URL) {
  $c = curl_init();
  curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
  curl_setopt($c, CURLOPT_URL, $URL);
  $contents = curl_exec($c);
  $err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
  curl_close($c);
  if ($contents) return $contents;
  else return FALSE;
} 
```

将 url 传递给此函数并下载内容。或者，您可以使用文件读取器/写入器

```
private function downloadFile ($url, $path) {
  $newfname = $path;
  $file = fopen ($url, "rb");
  if ($file) {
    $newf = fopen ($newfname, "wb");
    if ($newf)
    while(!feof($file)) {
      fwrite($newf, fread($file, 1024 * 8 ), 1024 * 8 );
    }
  }
  if ($file) {
    fclose($file);
  }
  if ($newf) {
    fclose($newf);
  }
} 
```

[来自：这个堆栈问题](https://stackoverflow.com/questions/3938534/download-file-to-server-from-url)

# php - 柠檬语法的问题（优先级？）

> ID：10088937
> 
> 赞同：5
> 
> 时间：2012-04-10T12:36:37.617
> 
> 标签：php, parser-generator, lemon

我为支持函数调用而创建的简单语法遇到了麻烦。
我正在使用 Greg 的基于柠檬的 PHP_ParserGenerator。

这是语法的相关部分：

```
program ::= expr(A).                        { $this->result = A; }

value(A) ::= SIMPLE_STRING(B).              { A = B; }
value(A) ::= NUMBER(B).                     { A = B; }
value(A) ::= CONTEXT_REFERENCE(B).          { A = B; }

arg_list ::= arg_list SEPARATOR value(B).   { $this->args[] = B; }
arg_list ::= value(B).                      { $this->args[] = B; }
arg_list ::= . 

expr(A) ::= SIMPLE_STRING(B) PAREN_LEFT arg_list PAREN_RIGHT. { A = call_user_func_array(B, $this->args); }

expr(A) ::= CONTEXT_REFERENCE(B). {
    list($context, $key) = explode('.', B);
    A = $this->context[$context][$key]; 
} 
```

当我使用上下文初始化解析器`array('user' => array('name' => 'Dennis'));` 并执行以下代码时：

```
$parser->doParse(PelParser::CONTEXT_REFERENCE, 'user.name');
$parser->doParse(0, 0); 
```

`$result`如下：“丹尼斯” 。生活很好。

但是当我提供一个 CONTEXT_REFERENCE 作为函数调用的参数时，它不起作用：

```
$parser->doParse(PelParser::SIMPLE_STRING, 'str_replace');
$parser->doParse(PelParser::PAREN_LEFT, '(');
$parser->doParse(PelParser::SIMPLE_STRING, 'e');
$parser->doParse(PelParser::SEPARATOR, ',');
$parser->doParse(PelParser::NUMBER, 3);
$parser->doParse(PelParser::SEPARATOR, ',');
$parser->doParse(PelParser::CONTEXT_REFERENCE, 'user.name');
$parser->doParse(PelParser::PAREN_RIGHT, ')');
$parser->doParse(0, 0); 
```

这`$result`是'us3r.nam3'。不太像预期的那样。作为记录，预期的输出当然是“D3nnis”。（user.name**首先**被字符串 'Dennis' 替换，然后传递给`str_replace()`函数）。

我怀疑这与优先级有关。但我不知道我应该改变什么来做到这一点。非常稀疏的 Lemon 文档并没有太大的帮助。

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:32:52.380

我似乎找到了我的问题的答案。

当我将语法更改为：

```
program ::= expr(A).                        { $this->result = A; }

value(A) ::= SIMPLE_STRING(B).              { A = B; }
value(A) ::= NUMBER(B).                     { A = B; }
value(A) ::= CONTEXT_REFERENCE(B). {
    // B=='{context}.{name}' 
    list($context, $key) = explode('.', B);
    A = $this->context[$context][$key]; 
}

arg_list ::= arg_list SEPARATOR value(B).   { $this->args[] = B; }
arg_list ::= value(B).                      { $this->args[] = B; }
arg_list ::= . 

expr(A) ::= SIMPLE_STRING(B) PAREN_LEFT arg_list PAREN_RIGHT. { A = call_user_func_array(B, $this->args); } 
```

它似乎按预期工作。
问题是我在第一个语法中产生了歧义：

```
value(A) ::= CONTEXT_REFERENCE(B).          { A = B; }

expr(A) ::= CONTEXT_REFERENCE(B). {
    list($context, $key) = explode('.', B);
    A = $this->context[$context][$key]; 
} 
```

我将把问题和答案留在这里，这样其他人可能会从我的错误中受益:) 如果有人有什么要分享的，请做。

# php - 链接表的 PHP 映射器模式

> ID：10088940
> 
> 赞同：4
> 
> 时间：2012-04-10T12:36:40.610
> 
> 标签：php, mysql, design-patterns, pdo, datamapper

我终于开始使用 Mapper 设计模式来构建我在 PHP 中构建的面向对象的系统。

我有类`User`，和`Project`，每个都有相应的 MySQL 表（和 Mapper 类，例如`ProjectMapper`，`UserMapper`）

我想知道的是如何在使用这种模式时处理链接表。我有另一堂课`Invitation`邀请 a`User`从事`Project`. （这只是一个标准的链接表，带有 a`project_id`和 a `user_id`）。

假设我想获取分配给特定项目的所有用户的集合，首先，这个功能应该去哪里？`ProjectMapper`上课，`InvitationMapper`上课？

其次。我怎样才能使这个整洁和明智？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:40:40.873

看看这篇非常有趣的文章——当我在自己的模型上工作时，它帮助了我很多，它应该是高效且易于使用的：

[http://www.survivethedeepend.com/zendframeworkbook/en/1.0/implementing.the.domain.model.entries.and.authors](http://www.survivethedeepend.com/zendframeworkbook/en/1.0/implementing.the.domain.model.entries.and.authors)

作者解释了如何在 Zend Framework 中构建可靠的模型，但您也可以在其他框架中使用他的想法，或者在没有任何框架的情况下构建自己的模型。

我还建议您（如果您正在使用 Zend）跳过测试部分 - 主题本身非常复杂，并且可以在您完成模型后完成测试。

建立我自己的模型，我修改了一些东西，所以如果你还有其他问题 - 你知道 - 不要犹豫，问他们;）

# zend-framework - Zend 表单填充功能不适用于选择类型的元素

> ID：10088944
> 
> 赞同：0
> 
> 时间：2012-04-10T12:37:13.713
> 
> 标签：zend-framework, zend-form, zend-form-element

我正在将 zend 表单设置为：

```
class Application_Form_Ticket_Search extends Zend_Form
{
    private $_itemList;

    public function setItemList($itemList)
    {
        $this->_itemList[0] = 'Select Item';      // Default selected value
        foreach($itemList AS $key => $value)
        {
            $this->_itemList[$value['REFERENCE']] = $value['DESCRIPTION'];
        }
    }

    // Initializes search form
    public function init()
    {           
        // Settings POST type request
        $this->setName('search')->setMethod('GET');        

        $this->addElement('select', 'item',
                array(  'label'     =>    'Item',
                        'filters'   =>    array('StringTrim'),
                        'multiOptions' => $this->_itemList
        ))->removeDecorator('HtmlTag');

        $this->addElement('submit', 'search',
                array(  'class'     =>    'btn btn-primary btn-small',
                        'label'     =>    'Search',
                        'style'     =>    'margin-left:70px;')
        )->removeDecorator('HtmlTag');        
    }    
} 
```

并在控制器中传递表单的选择框列表为：

```
$searchForm = new Application_Form_Ticket_Search(array('itemList' => $itemList)); 
```

并填充值（在发出搜索请求后），例如：

```
$searchForm->populate($filters); 
```

当我调试`$filters`数组时，输出是：

```
array(1) { ["item"]=> string(36) "201031999999992010051000000170430719" } 
```

现在问题出在 HTML 上：我收到了一个输出（当在下拉列表中选择了一个值时）：

```
<select name="item" id="item">
<option value="0" label="Select Item">Select Item</option>
<option value="201031999999992010051000000170430719" label="ELITE FRT CHWG N/AV GUM ST 15CT" selected="selected">ELITE FRT CHWG N/AV GUM ST 15CT</option>
<option value="201031999999992010051000000170430869" label="Consolidator" selected="selected">Consolidator</option>
<option value="201031999999992010051100000170450719" label="DAVID PUMPKIN SEEDS" selected="selected">DAVID PUMPKIN SEEDS</option>
<option value="201031999999992010051100000170450739" label="Consolidator" selected="selected">Consolidator</option>
<option value="201031999999992010051000000170430809" label="GARDETTO ORIGINAL" selected="selected">GARDETTO ORIGINAL</option> 
```

现在您可以看到在下拉列表中选择了每个值，并且我总是得到最后选择的值。我做错了什么或者可以为此做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:24:42.843

尝试：

```
class Application_Form_Ticket_Search extends Zend_Form
{
    public function setItemList($itemList)
    {
        $items = array('Select Item');      
        foreach($itemList as $key => $value) {
            $items[$value['REFERENCE']] = $value['DESCRIPTION'];
        }
        $this->getElement('item')->setMultiOptions($items);
    }

    // Initializes search form
    public function init()
    {           
        // Settings POST type request
        $this->setName('search')->setMethod('GET');        

        $this->addElement('select', 'item',
                array(  'label'     =>    'Item',
                        'filters'   =>    array('StringTrim')
        ))->removeDecorator('HtmlTag');

        $this->addElement('submit', 'search',
                array(  'class'     =>    'btn btn-primary btn-small',
                        'label'     =>    'Search',
                        'style'     =>    'margin-left:70px;')
        )->removeDecorator('HtmlTag');        
    }    
}

$searchForm = new Application_Form_Ticket_Search();
$searchForm->setItemList(array('itemList' => $itemList)); 
```

# mysql - mysql 事件运行年度计算

> ID：10088948
> 
> 赞同：3
> 
> 时间：2012-04-10T12:37:34.117
> 
> 标签：mysql, sql, events

我有以下代码

```
CREATE EVENT myevent2
ON SCHEDULE EVERY '1' YEAR
STARTS commit_date + INTERVAL 1 YEAR
DO
UPDATE lms.loan 

        if new.app_loan_type='Computer Loan' then 
    SET NEW.app_yearly_intrst = (NEW.app_ln_amnt *(NEW.computer_interest/100));
    end if;

    if new.app_loan_type="Miscellaneous Loan" then 
    SET NEW.app_yearly_intrst = (NEW.app_ln_amnt *(NEW.miscellaneous_interest/100));
    end if;

    if new.app_loan_type="Motor Vehicle Loan" then 
    SET NEW.app_yearly_intrst = (NEW.app_ln_amnt *(NEW.motor_vehicle_interest/100));
    end if;

    if new.app_loan_type="Motor Vehicle Insurance Loan" then 
    SET NEW.app_yearly_intrst = (NEW.app_ln_amnt *(NEW.mv_insurance_interest/100));
    end if;

    if new.app_loan_type="Motor Vehicle Repair Loan" then 
    SET NEW.app_yearly_intrst = (NEW.app_ln_amnt *(NEW.mv_repair_interest/100));
    end if;

    if new.app_loan_type="Salary Advance Loan" then 
    SET NEW.app_yearly_intrst = (NEW.app_ln_amnt *(NEW.salary_advance_interest/100));
    end if;

    if new.app_loan_type="Tertiary Loan" then 
    SET NEW.app_yearly_intrst = (NEW.app_ln_amnt *(NEW.tertiary_interest/100));
    end if;

    SET NEW.app_mnthly_intrest = (NEW.app_yearly_intrst/12);
    SET NEW.app_quarterly_intrest = (NEW.app_mnthly_intrest * 3);
    SET NEW.app_amnt_owed = (NEW.app_ln_amnt+ NEW.app_yearly_intrst);

  END$$ 
```

我正在尝试创建一个事件来计算两种贷款类型的利息：“计算机贷款”和“杂项贷款”等，每年一次，但是每年一次取决于 commit_date 列，该列将是一年commit_date 列，然后如果 app_loan_type 是 'Computer Loan' 或 'miscellaneous Loan' 则计算年利息 我还计算月利息、季度利息和欠款总额，但我的主要问题是如何设置 commit_date 的间隔和当前日期为 1 年

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:07:45.727

我不认为您可以`timestamp`在创建事件语法中使用动态值。而是每天运行您的事件，您可以使用`datediff`事件中更新查询的 where 子句中的函数来检查应该更新哪些数据。你也可以像这样检查确切的日期：`where day(now()) = day(commit_date) and month(now()) = month(commit_date) and year(now()) = year(commit_date) + 1;`，但你不会在leap eyar的情况下更新，所以你应该使用这样的东西：

```
delimiter ||

CREATE EVENT myevent2
ON SCHEDULE EVERY 1 DAY
STARTS now()
DO
    UPDATE lms.loan SET app_yearly_intrst = (app_ln_amnt *(computer_interest/100)) where app_loan_type = 'Computer Loan' and datediff(date(now()),commit_date) >= 365;
    UPDATE lms.loan SET app_yearly_intrst = (app_ln_amnt *(miscellaneous_interest/100)) where app_loan_type = 'Miscellaneous Loan' and datediff(date(now()),commit_date) >= 365;
    UPDATE lms.loan SET app_yearly_intrst = (app_ln_amnt *(motor_vehicle_interest/100)) where app_loan_type = 'Motor Vehicle Loan' and datediff(date(now()),commit_date) >= 365;
    UPDATE lms.loan SET app_yearly_intrst = (app_ln_amnt *(mv_insurance_interest/100)) where app_loan_type = 'Motor Vehicle Insurance Loan' and datediff(date(now()),commit_date) >= 365;
    UPDATE lms.loan SET app_yearly_intrst = (app_ln_amnt *(mv_repair_interest/100)) where app_loan_type = 'Motor Vehicle Repair Loan' and datediff(date(now()),commit_date) >= 365;
    UPDATE lms.loan SET app_yearly_intrst = (app_ln_amnt *(salary_advance_interest/100)) where app_loan_type = 'Salary Advance Loan' and datediff(date(now()),commit_date) >= 365;
    UPDATE lms.loan SET app_yearly_intrst = (app_ln_amnt *(tertiary_interest/100)) where app_loan_type = 'Tertiary Loan' and datediff(date(now()),commit_date) >= 365;
    UPDATE lms.loan SET app_mnthly_intrest = (app_yearly_intrst/12), app_quarterly_intrest = (NEW.app_mnthly_intrest * 3), app_amnt_owed = (app_ln_amnt+ app_yearly_intrst) where datediff(date(now()),commit_date) >= 365;
END|| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:02:30.123

我不确定您是否可以在`STARTS`子句中使用列值，但是有一种解决方法，您可以每天安排此事件，并在您拥有的所有子句中进行额外检查，**以**检查和`IF`之间的日期差异是一个年。`commit_date``current_date()`

就像是：

```
if new.app_loan_type="Salary Advance Loan" and DATE_FORMAT(FROM_DAYS(DATEDIFF(NOW(), commit_date)), "%Y")+0 = 1 then 
```

# asp.net - 检查网络服务是否存在

> ID：10088950
> 
> 赞同：6
> 
> 时间：2012-04-10T12:37:53.310
> 
> 标签：asp.net, .net, web-services, .net-4.0, asmx

有人可以向我展示确定给定 URL 是否存在 Web 服务 (ASP.NET) 的最佳方法吗？

我假设一种方法类似于使用 System.Net.Webclient 发出请求，但我如何确定它是否是有效的 web 服务以及我应该发出什么样的请求？

**编辑：为了添加更多上下文，我正在确定是否存在 Web 服务，因为我正在尝试构建一个使用任意 Web 服务的通用工具。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:57:25.480

恕我直言，确保服务启动的唯一方法是能够在服务上调用无害的方法并验证响应。检索 WSDL 是不够的。

这里有一个类似的 SO 问题：- [如何在 C# 中测试与未知 Web 服务的连接性？](https://stackoverflow.com/questions/330496/how-do-i-test-connectivity-to-an-unknown-web-service-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:50:53.870

我会要求 WSDL 文档。如果您将其取回，则表示该服务存在，您可以检查 WSDL 以获取已实现的方法。

考虑阅读**WS-Discovery**

[http://docs.oasis-open.org/ws-dd/discovery/1.1/wsdd-discovery-1.1-spec.html](http://docs.oasis-open.org/ws-dd/discovery/1.1/wsdd-discovery-1.1-spec.html)

# facebook - 填充 facebook 提要对话框消息框

> ID：10088951
> 
> 赞同：3
> 
> 时间：2012-04-10T12:37:55.837
> 
> 标签：facebook, facebook-graph-api

我的网站上有一个小游戏，我希望人们在 facebook 上发布他们最好的时间。为此，我制作了一个应用程序，然后使用以下链接：

[https://www.facebook.com/dialog/feed?app_id=363262997057304&name=Myname&link=http://www.mywebsite.com&redirect_uri=http://www.mywebsite.com&description=MyDescription](https://www.facebook.com/dialog/feed?app_id=363262997057304&name=Myname&link=http://www.mywebsite.com&redirect_uri=http://www.mywebsite.com&description=MyDescription)

但我不知道我该怎么做才能填充消息字段。我能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:21:38.507

不推荐使用 message 参数，您也可以使用 FBJS API 在用户提要中发布，

```
function postToFeed() {
    var obj = {
        method:      'feed',
        link:        'https://apps.facebook.com/APP_NAMESPACE/',
        picture:     'https://domain.tld/75x75.jpg',
        name:        'TITLE',
        caption:     'CAPTION',
        description: 'My Score: '+score
    };
    FB.ui(obj);
} 
```

但您必须先向用户询问`publish_stream`权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:05:23.263

您不应该按照 Facebook 预先填写消息字段，除非来自自然流程，例如用户在文本框中键入并在提交时发送到消息字段。您应该根据您的目的使用描述、标题字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T22:35:01.837

由于您有一个游戏应用程序，您需要做的就是使用此处描述的游戏得分 API 发布他们的得分：http: [//developers.facebook.com/docs/score/](http://developers.facebook.com/docs/score/)

来自：http: [//developers.facebook.com/docs/guides/games/](http://developers.facebook.com/docs/guides/games/)

> **分数和成就**
> 
> 分数和成就 API 建立在 Open Graph 之上，并接收与所有 Open Graph 故事相同的分发点 - Ticker、Newsfeed 和 Timeline。除了这些分数和成就外，Facebook 设计的内置聚合和故事也受益于这些。

# jquery - cfc 中的 500 错误

> ID：10088953
> 
> 赞同：1
> 
> 时间：2012-04-10T12:37:57.317
> 
> 标签：jquery, coldfusion, cfc

当我尝试在 cfc 中调用方法时出现 500 错误。由于我没有得到任何调试信息，我很难弄清楚发生了什么。我查看了日志，没有任何内容可以表明发生了什么。我正在使用 jquery`.ajax`来调用 cfc`POST`

这是jQuery：

```
$("#edit_button").click(function(){
    if(theArray.length > 0){
        theJson = JSON.stringify(theArray);
    }
    $.ajax({type:"POST",
            url: "/CFCs/fund_profile.cfc?method=updateProfile",
            data:theJson,
            dataType:"json",
            success:(function(response){
                var content = ''
                response = JSON.parse(response);    
                alert("the response is" + response);
        });
    });     
}); 
```

cfc 中的方法现在非常基本：

```
<cffuntion name="updateProfile" access="public" returnFormat="json">
    <cfargument name="theJson">
     <cfif isJson(theJson)>
         <cfset var theArray = deserializeJson(theJson)>
         <cfset var passingJson = serializeJson(theArray)>
     </cfif>
     <cfreturn passingJson> 
```

这是堆栈跟踪：

```
500

javax.servlet.ServletException
    at coldfusion.xml.rpc.CFCServlet.invoke(CFCServlet.java:154)
    at coldfusion.xml.rpc.CFCServlet.doPost(CFCServlet.java:289)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at jrun.servlet.FilterChain.service(FilterChain.java:101)
    at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.http.WebService.invokeRunnable(WebService.java:172)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

我被难住了，没有任何真正的调试信息可以继续，我被困住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:41:32.650

您的 CFC 方法的访问属性对于 Ajax 调用（或类似 Flex 应用程序的服务）需要是远程的。本质上，如果没有将访问权限设置为远程，则在进行该调用时，所讨论的方法是不“可用的”。

尝试：

```
<cffunction name="updateProfile" access="remote" returnFormat="json">
  ...
</cffunction> 
```

# xml - 如何使用 Vb.net 在 xml 中找到相应的节点

> ID：10088954
> 
> 赞同：0
> 
> 时间：2012-04-10T12:37:59.857
> 
> 标签：xml, vb.net, xml-parsing

这是我的xml。我有 ID 1490。如何使用 Vb.net 在 xml 中找到相应的节点 **我不能使用 LINQ**

```
 <Abc>
     <A> 
      <Name>T</Name>
      <Id>1232</Id>
      <Val>140</Val>
      <Branch>
       <A>
       <Name>T.1</Name>
      <Id>1343</Id>
      <Val>14qw0</Val>
       </A>
       <A>
       <Name>T.2</Name>
      <Id>1090</Id>
      <Val>14qwd0</Val>
       <Branch>
       <A>
       <Name>T.2.2</Name>
        <Id>1490</Id>
        <Val>rt56</Val>
       </A>
       </Branch>
     </A>
</Branch>
     </A>
     <A>
       <Name>TA</Name>
        <Id>1339</Id>
        <Val>uiui</Val>
        <Branch>
        <A>
        <Name>TA.1</Name>
            <Id>1338</Id>
            <Val>bije</Val>
        </A>
        </Branch>
    </A>
    </Abc> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:52:40.563

您可以将 selectNodes 与 XmlDocument 一起使用。请点击此链接：http: [//msdn.microsoft.com/en-us/library/Aa335969](http://msdn.microsoft.com/en-us/library/Aa335969)

可以在这里看到一个 vb.net 示例，将 xml 字符串加载到文档中，然后选择节点：[http ://www.daniweb.com/software-development/vbnet/threads/349552/getting-single-node-通过-id-then-get-childnode-innertext](http://www.daniweb.com/software-development/vbnet/threads/349552/getting-single-node-by-id-then-get-childnode-innertext)

# c++ - 如何通过shell杀死父子进程？

> ID：10088961
> 
> 赞同：1
> 
> 时间：2012-04-10T12:38:17.160
> 
> 标签：c++, linux, shell, fork, parent-child

我有一个由 shell 启动并由 shell 终止的应用程序。现在在我的应用程序中，我创建了一个 fork 来减少应用程序的负载，因此目前两个进程以不同的 PID 以相同的名称运行。现在我想终止我的程序，如果我在 shell 中使用我的进程的 PID 杀死它只会杀死父进程，使其成为僵尸进程，而子进程仍然存在。那么如何通过shell杀死子进程和父进程呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:45:01.993

见命令[`killall`](http://linux.die.net/man/1/killall)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:56:00.847

你`ps -el`会得到以下

```
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD 
```

get`pid`和`ppid`of 你的进程确实`pkill -P <parent_pid_name>`意味着你的父进程 id 已经产生了子进程，然后是`kill <signal number> <pid>`在这种情况下，`pid`你也必须提供已经产生所有子进程的父进程 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:16:12.363

你的父进程应该在退出前捕获 SIGTERM 并杀死它的子进程。

我用C写了这个

```
int child;

void sighandler(int sig) {
        if (sig == SIGTERM) {
                if (child != -1) kill(child, SIGTERM);
        }
}

int main() {
        int i;

        child = -1;
        signal(SIGCHLD, SIG_IGN);
        signal(SIGTERM, sighandler);

        setsid();
        setpgid(0,0);

        i = fork();
        switch(i) {
        case -1:
                break;
        case 0: // child
                sleep (100);
                break;
        default:
                child = i;
                sleep (100);
                break;
        }

        return 0;
} 
```

您可以使用“killall”命令杀死所有具有相同名称的进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:52:41.670

pkill 命令可以用来杀死进程。也杀了

# c - mmap() 返回 EINVAL

> ID：10088962
> 
> 赞同：5
> 
> 时间：2012-04-10T12:38:20.867
> 
> 标签：c, mmap

我无法让**mmap**功能工作。它返回*EINVAL*错误代码。

```
void* mapped = 
        mmap((void*)(map_addr + slide),
             map_size,
             PROT_WRITE | PROT_READ,
             MAP_PRIVATE | MAP_ANON,
             bprm->file,
             map_offset); 
```

我已经在我的平台 ( **Darwin** ) 上检查了此功能的文档，似乎没有任何问题。mmap 的手册页提供了四种情况下会返回 EINVAL。

```
 [EINVAL]           MAP_FIXED was specified and the addr argument was not page
                    aligned, or part of the desired address space resides out of the
                    valid address space for a user process. 
```

MAP_FIXED 未指定，所以不是这个。

```
 [EINVAL]           flags does not include either MAP_PRIVATE or MAP_SHARED. 
```

存在 MAP_PRIVATE。

```
 [EINVAL]           The len argument was negative. 
```

调用时的 len (map_size) 参数是 8192。

```
 [EINVAL]           The offset argument was not page-aligned based on the page size as
                    returned by getpagesize(3). 
```

偏移量参数 (map_offset) 为 0，因此它必须是页面对齐的。（也许我错了？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:42:44.693

您确定您阅读了第一个描述吗？它也可以被解读为描述两个不相交的案例：

1.  指定了 MAP_FIXED 并且 addr 参数不是页面对齐的，
2.  或所需地址空间的一部分位于用户进程的有效地址空间之外。

如果这样读，`map_addr + slide`表达式的实际值就会变得有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:44:41.387

我建议使用`NULL`参数`addr`并让实现完全自由地放置您的`mmaped`区域（因为您指定的地址可能与进程的地址空间有关），直到有充分的理由不这样做。

# xml - 如何处理重复的属性名称和十六进制值

> ID：10088971
> 
> 赞同：1
> 
> 时间：2012-04-10T12:38:50.910
> 
> 标签：xml, xslt

我有一个像这样的未格式化的 XML 文件：

```
<ROOT>
    <A0>Hi</A0>
    <A1 A="hi" A="how" A="are" A="You?"></A1>
    <A2 A2="Bye"> </A2>
    <A3>In this tag have hexadecimal value</A3>
</ROOT> 
```

问题：

1.  如何处理标签中的重复属性名称`<A1>`？
2.  如何处理标签中的十六进制值`<A3>`？

我必须使用这种类型的文件作为 SSIS 包中的源。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T12:42:50.137

> ```
> <ROOT>
>   <A0>Hi</A0>
>   <A1 A="hi" A="how" A="are" A="You?"></A1>
>   <A2 A2="Bye"> </A2>
>   <A3>In this tag have Hexa deimal value </A3>
> </ROOT> 
> ```

**根据定义，格式良好的 XML 文档中不允许有重复的属性（在同一元素上）。**

因此，提供的文本不是 XML 文档，不能被任何兼容的 XML 解析器解析——因此，所描述的问题不存在。

# java - 使用 ui:include 在 JSF 中显示动态编辑器

> ID：10088975
> 
> 赞同：1
> 
> 时间：2012-04-10T12:39:06.987
> 
> 标签：java, jsf, include, primefaces, uiinclude

我想在标签视图中显示一组编辑器。每个编辑器都有一个名为*component*的属性，用于存储渲染的编辑器。简单的编辑器使用 HTML 标签来呈现编辑器，而复杂的编辑器使用在其他页面中定义的编辑器。我发现我不能`editor.component`与**ui:include**一起使用，因为在构建树时该值不可用。我该如何解决这个问题？是否有任何替代 ui:include 没有此限制？

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.prime.com.tr/ui">

<h:panelGroup>
    <p:tabView value="#{groupsBean.groups}" var="group">  
        <p:tab title="#{group.name}">  
            <h:panelGroup>  
                <p:dataTable value="#{group.editors}" var="editor">  
                    <p:column headerText="Key">  
                        <h:outputText value="#{editor.name}" />  
                    </p:column>  
                    <p:column headerText="Value">
                        <h:panelGroup rendered="#{not editor.href}">
                            <h:outputText value="#{editor.component}" escape="false" />
                        </h:panelGroup>
                        <h:panelGroup rendered="#{editor.href}">
                            <ui:include src="#{editor.component}" />
                        </h:panelGroup>  
                    </p:column>  
                </p:dataTable>  
            </h:panelGroup>  
        </p:tab>  
    </p:tabView>  
</h:panelGroup> 
```

**编辑 1**

**web.xml**包含以下条目：

```
<context-param>  
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>  
    <param-value>/WEB-INF/springsecurity.taglib.xml; /WEB-INF/custom.taglib.xml</param-value>  
</context-param> 
```

**custom.taglib.xml**位于 WEB-INF 文件夹中。

```
<facelet-taglib>  
    <namespace>http://www.custom.ro/</namespace>  
    <tag>  
        <tag-name>dynamic</tag-name>  
        <component>  
            <component-type>ro.custom.DynamicInclude</component-type>                 
        </component>  
    </tag>  
</facelet-taglib> 
```

DynamicInclude 注释为`@FacesComponent("ro.custom.DynamicInclude")`

在**groups.xhtml 中**，我添加了动态包含的命名空间 - `xmlns:custom="http://www.custom.ro/"`。

**编辑2**

最后我设法使它工作。缺少的是处理程序类（com.corejsf.tag.DynamicIncludeHandler）的条目。我还删除了在 DynamicInclude 的 getSrc 方法中测试 src 是否为 null 的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:14:25.820

据我所知，没有这样的组件可以替代 ui:include。我们已经使用 FaceletContext.includeFacelet api 自己实现了这样的事情。

一个相当简单的替代方法是使用 c:forEach 循环呈现表格 - 无需自己编写额外的组件。缺点是您将为每一行获得一个组件，在某些情况下这可能会占用大量资源。

# java - 没有正确计算分页到 JSF 页面

> ID：10088981
> 
> 赞同：6
> 
> 时间：2012-04-10T12:39:29.280
> 
> 标签：java, sql, jsf, jsf-2

我想实现本[教程中的代码](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)

我用 14 行数据填充了 Oracle 表，但是当我每次第二页为空时尝试在 JSF 页面之间导航时：

![在此处输入图像描述](../Images/c359d551e769fd8f92e4038efad0b401.png)

![在此处输入图像描述](../Images/024c740b5eeffb92946e892daeedf3e1.png)

这是 JSF 页面的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="greenBand" class="ui-state-default ui-corner-allh" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable value="#{SessionsController.dataList}" var="item">

                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>

                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>

                </div>   

                <div id="settingsdiva" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

    </h:body>
</html> 
```

会议：

```
 import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/* include SQL Packages */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.bean.ViewScoped;
import javax.faces.component.UICommand;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean; 
import javax.faces.event.ActionEvent;

import org.glassfish.osgicdi.OSGiService;

// source http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html
@Named("SessionsController")
@ViewScoped
public class Sessions implements Serializable {

    /* Call the Oracle JDBC Connection driver */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    // Data.
    private List<ActiveSessionObj> dataList;
    // Rows
    private int totalRows;
    // Paging.
    private int firstRow;
    private int rowsPerPage;
    private int totalPages;
    private int pageRange;
    private Integer[] pages;
    private int currentPage;
    // Sorting.
    private String sortField;
    private boolean sortAscending;

    /* Constructor */
    public Sessions() {
        /* Set default properties */
        rowsPerPage = 10; // Default rows per page (max amount of rows to be displayed at once).
        pageRange = 10; // Default page range (max amount of page links to be displayed at once).
        sortField = "ASESSIONID"; // Default sort field.
        sortAscending = true; // Default sort direction.
    }

    public static class ActiveSessionObj {

        /* Oracle table structure
        CREATE TABLE ACTIVESESSIONSLOG(
        ASESSIONID VARCHAR2(30 ) NOT NULL,
        USERID VARCHAR2(30 ),
        ACTIVITYSTART TIMESTAMP(6),
        ACTIVITYEND TIMESTAMP(6),
        ACTIVITY CLOB
        )
         */
        private String aSessionID;
        private String userID;
        private Date activityStart;
        private Date activityEnd;
        private String activity;

        public ActiveSessionObj(String aSessionID, String userID, Date activityStart, Date activityEnd, String activity) {
            this.aSessionID = aSessionID;
            this.userID = userID;
            this.activityStart = activityStart;
            this.activityEnd = activityEnd;
            this.activity = activity;
        }

        public String getaSessionID() {
            return aSessionID;
        }

        public void setaSessionID(String aSessionID) {
            this.aSessionID = aSessionID;
        }

        public String getactivity() {
            return activity;
        }

        public void setactivity(String activity) {
            this.activity = activity;
        }

        public Date getactivityEnd() {
            return activityEnd;
        }

        public void setactivityEnd(Date activityEnd) {
            this.activityEnd = activityEnd;
        }

        public Date getactivityStart() {
            return activityStart;
        }

        public void setactivityStart(Date activityStart) {
            this.activityStart = activityStart;
        }

        public String getuserID() {
            return userID;
        }

        public void setuserID(String userID) {
            this.userID = userID;
        }

        private ActiveSessionObj() {
            throw new UnsupportedOperationException("Not yet implemented");
        }
    }

    // Paging actions -----------------------------------------------------------------------------
    public void pageFirst() {
        page(0);
    }

    public void pageNext() {
        page(firstRow + rowsPerPage);
    }

    public void pagePrevious() {
        page(firstRow - rowsPerPage);
    }

    public void pageLast() {
        page(totalRows - ((totalRows % rowsPerPage != 0) ? totalRows % rowsPerPage : rowsPerPage));
    }

    public void page(ActionEvent event) {
        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);
    }

    private void page(int firstRow) {
        this.firstRow = firstRow;
        loadDataList(); // Load requested page.
    }

    // Sorting actions ----------------------------------------------------------------------------
    public void sort(ActionEvent event) {
        String sortFieldAttribute = (String) event.getComponent().getAttributes().get("sortField");

        // If the same field is sorted, then reverse order, else sort the new field ascending.
        if (sortField.equals(sortFieldAttribute)) {
            sortAscending = !sortAscending;
        } else {
            sortField = sortFieldAttribute;
            sortAscending = true;
        }

        pageFirst(); // Go to first page and load requested page.
    }

    // Loaders ------------------------------------------------------------------------------------
    private void loadDataList() {

        // Load list and totalCount.
        try {
            dataList = list(firstRow, rowsPerPage, sortField, sortAscending);
            totalRows = countDBRowNum(); //count the tablerows
        } catch (Exception e) {
            throw new RuntimeException(e); 
        }

        // Set currentPage, totalPages and pages.
        currentPage = (totalRows / rowsPerPage) - ((totalRows - firstRow) / rowsPerPage) + 1;
        totalPages = (totalRows / rowsPerPage) + ((totalRows % rowsPerPage != 0) ? 1 : 0);
        int pagesLength = Math.min(pageRange, totalPages);
        pages = new Integer[pagesLength];

        // firstPage must be greater than 0 and lesser than totalPages-pageLength.
        int firstPage = Math.min(Math.max(0, currentPage - (pageRange / 2)), totalPages - pagesLength);

        // Create pages (page numbers for page links).
        for (int i = 0; i < pagesLength; i++) {
            pages[i] = ++firstPage;
        }
    }

    // Getters ------------------------------------------------------------------------------------
    public List<ActiveSessionObj> getdataList() {
        if (dataList == null) {
            loadDataList(); // Preload page for the 1st view.
        }
        return dataList;
    }

    public int getTotalRows() {
        return totalRows;
    }

    public int getFirstRow() {
        return firstRow;
    }

    public int getRowsPerPage() {
        return rowsPerPage;
    }

    public Integer[] getPages() {
        return pages;
    }

    public int getCurrentPage() {
        return currentPage;
    }

    public int getTotalPages() {
        return totalPages;
    }

    // Setters ------------------------------------------------------------------------------------
    public void setRowsPerPage(int rowsPerPage) {
        this.rowsPerPage = rowsPerPage;
    }

    // Actions ------------------------------------------------------------------------------------
    /**
     * Returns list of ActiveSessionObj items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @param firstRow First index of rows to be returned.
     * @param rowCount Amount of rows to be returned.
     * @param sortField Field to sort the data on.
     * @param sortAscending Whether to sort data ascending or not.
     * @return list of ActiveSessionObj items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @throws DAOException If something fails at DAO level.
     */
    public List<ActiveSessionObj> list(int firstRow, int rowCount, String sortField, boolean sortAscending) throws SQLException {

        String SqlStatement = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        String sortDirection = sortAscending ? "ASC" : "DESC";

        SqlStatement = "SELECT c.*" +
                          " FROM (SELECT b.*, rownum rn" +
                                 " FROM (SELECT a.*" +
                                          " FROM activeSessionsLog a" +
                                         " ORDER BY %s %s) b" +
                                 " WHERE rownum <= ?) c" +
                       " WHERE rn >= ?";

        String sql = String.format(SqlStatement, sortField, sortDirection);

        PreparedStatement ps = null;
        ResultSet resultSet = null;
        List<ActiveSessionObj> dataList = new ArrayList<ActiveSessionObj>();

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                ps = conn.prepareStatement(sql);
                ps.setInt(1, firstRow);
                ps.setInt(2, rowCount);

                resultSet = ps.executeQuery();
                /* take the result from the SQL query and insert it into Array List collection */
                dataList = ActiveSessionsArrayList(resultSet);

                conn.commit();
                committed = true;

            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }

        } finally {
            ps.close();
            conn.close();
        }

        return dataList;
    }

    /**
     * Returns total amount of rows in table.
     * @return Total amount of rows in table.
     * @throws DAOException If something fails at DAO level.
     */
    public int countDBRowNum() throws Exception {

        String SqlStatement = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        SqlStatement = "SELECT count(*) FROM ACTIVESESSIONSLOG";

        PreparedStatement ps = null;
        ResultSet resultSet = null;
        int count = 0;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                SqlStatement = "SELECT count(*) FROM ACTIVESESSIONSLOG";

                ps = conn.prepareStatement(SqlStatement);
                resultSet = ps.executeQuery();

                if (resultSet.next()) {
                    count = resultSet.getInt(1);
                }

                conn.commit();
                committed = true;
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            ps.close();
            conn.close();
        }

        return count;
    }

    /**
     * Map the current row of the given ResultSet to ActiveSessionObj.
     * @param resultSet The ResultSet of which the current row is to be mapped to ActiveSessionObj.
     * @return The mapped ActiveSessionObj from the current row of the given ResultSet.
     * @throws SQLException If something fails at database level.
     */
    private static ArrayList<ActiveSessionObj> ActiveSessionsArrayList(ResultSet rs) throws SQLException {
        ArrayList<ActiveSessionObj> list = new ArrayList<>();

        try {
            while (rs.next()) {
                list.add(new ActiveSessionObj(
                        rs.getString("ASESSIONID"),
                        rs.getString("USERID"),
                        timestampToDate(rs.getTimestamp("ACTIVITYSTART")),
                        timestampToDate(rs.getTimestamp("ACTIVITYEND")),
                        rs.getString("ACTIVITY")));
            }
        } catch (Exception x) {
            x.printStackTrace();
        }

        return list;

        /*
        CREATE TABLE ACTIVESESSIONSLOG(
        ASESSIONID VARCHAR2(30 ) NOT NULL,
        USERID VARCHAR2(30 ),
        ACTIVITYSTART TIMESTAMP(6),
        ACTIVITYEND TIMESTAMP(6),
        ACTIVITY CLOB
        )
         */
    }
    // select all button handle
    private Map<Long, Boolean> selectedIds = new HashMap<Long, Boolean>();

    // get the list from the JSF page
    public Map<Long, Boolean> getSelectedIds() {
        return selectedIds;
    }

    // call this method from the JSF page to delete the selected rows
    public String deleteAction() {

        // do something with the selected rows
        return null;
    }

    private static Date timestampToDate(java.sql.Timestamp ts) {
        Date d = null;
        try {
            d = new Date(ts.getTime());
        } catch (Exception e) {
            e.printStackTrace();
        }

        return d;
    }
} 
```

可能是分页算法错误或SQL查询未更正？我还没有触及原始代码中的分页算法。

最良好的祝愿

**编辑**

SQL 查询错误。

**编辑 2** 我更新了 SQL 代码，但现在第一页是错误的，第二页等等显示数据。问题出在某处：

**编辑 3 工作代码**

公共列表列表（int firstRow，int rowCount，String sortField，boolean sortAscending）抛出 SQLException {

```
String SqlStatement = null;

if (ds == null) {
    throw new SQLException();
}

Connection conn = ds.getConnection();
if (conn == null) {
    throw new SQLException();
}

int countrow = firstRow + rowCount;
String sortDirection = sortAscending ? "ASC" : "DESC";

SqlStatement = "SELECT c.*" +
                  " FROM (SELECT b.*, rownum rn" +
                         " FROM (SELECT a.*" +
                                  " FROM activeSessionsLog a" +
                                 " ORDER BY %s %s) b" +
                         " WHERE rownum <= ?) c" +
               " WHERE rn > ?";

String sql = String.format(SqlStatement, sortField, sortDirection);

PreparedStatement ps = null;
ResultSet resultSet = null;
List<ActiveSessionObj> dataList = new ArrayList<ActiveSessionObj>();

try {
    conn.setAutoCommit(false);
    boolean committed = false;
    try {
        ps = conn.prepareStatement(sql);
        ps.setInt(1, countrow);
        ps.setInt(2, firstRow);

        resultSet = ps.executeQuery();
        /* take the result from the SQL query and insert it into Array List collection */
        dataList = ActiveSessionsArrayList(resultSet);

        conn.commit();
        committed = true;

    } finally {
        if (!committed) {
            conn.rollback();
        }
    }

} finally {
    ps.close();
    conn.close();
}

return dataList; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:35:34.480

我认为您的查询参数是错误的，第一个参数是`rownum <= ?`so must be `rownum < firstRow + rowCount`，而第二个参数是`rn >= firstRow`

您遵循的教程使用 MySQL LIMIT，您可以从这里看到[MySQL 5.0 参考手册](http://dev.mysql.com/doc/refman/5.0/en/select.html)（查找 LIMIT）教程使用的参数是第一行和每页的行数。在您的查询中使用 > 和 <=，那么您必须提供第一个结果和最后一个结果。

# java - h:commandLink 在没有 f:ajax 的情况下不会触发文件下载操作

> ID：10088983
> 
> 赞同：1
> 
> 时间：2012-04-10T12:39:33.837
> 
> 标签：java, jsf, jsf-2, pdf-generation, download

我有一个`h:datatable`包含一个链接的列，该链接将调用支持 bean 并“应该”返回生成的 PDF 文档。

该列如下所示：

```
<h:form>
    ...
    <h:datatable>
        ...
        <h:column >
            <h:commandLink action="#{bean.downloadPDF}" target="_blank" >
                <f:param name="value1" value="#{bean.val1}"/>
                <f:param name="value2" value="#{bean.val2}"/>
                <f:param name="value3" value="#{bean.val3}"/>
                <h:graphicImage name="certificate.jpg" library="images"/>
            </h:commandLink>
        </h:column>
        ...
    </h:datatable>
...
</h:form> 
```

我的页面上没有 javascript 错误（根据 chrome 和 firebug）。支持 bean 看起来像这样：

```
public void downloadPDF() {
...
File outputPDF = new File(outputFileName);

//Get ready to return pdf to user
BufferedInputStream input = null;
BufferedOutputStream output = null;
try {
    // Open file.
    input = new BufferedInputStream(new FileInputStream(outputPDF), 10240);

    //Return PDF to user
    // Init servlet response.
    response.reset();
    response.setHeader("Content-Type", "application/pdf");
    response.setHeader("Content-Length", String.valueOf(outputPDF.length()));
    response.setHeader("Content-Disposition", "inline; filename=\"" + pdfName + "\"");
    output = new BufferedOutputStream(response.getOutputStream(), 10240);

    // Write file contents to response.
    byte[] buffer = new byte[10240];
    int length;
    while ((length = input.read(buffer)) > 0) {
        output.write(buffer, 0, length);
    }

    // Finalize task.
    output.flush();
} catch(IOException e) {
    e.printStackTrace();
} finally {
    output.close();
    input.close();
}
facesContext.responseComplete();
} 
```

现在，我知道我的 PDF 生成工作正常，因为我可以创建自定义 PDF 并将其保存在驱动器上。

然后，如果我添加`<f:ajax/>`到`h:commandLink`该方法被调用。没有它，它会重新加载当前页面，而不会调用 action 方法。

我尝试了一些不同的东西......有或没有任何`f:param`s。向函数添加`String`返回值`downloadPDF()`。**编辑**：带走`target="_blank"`参数。使用`actionListener`而不是`action`. 使用时`action`，不会调用 bean 方法，但我在`h:messages`:中收到此错误消息`Conversion Error setting value '' for 'null Converter'.`。

无法让它调用该函数。我希望得到的是，当单击 downloadPDF 链接时，它会打开一个新窗口并下载 PDF。

任何帮助将不胜感激。

### 编辑 2 / 解决方案（临时）

我已经设法使用属性来完成这项工作`immediate="true"`。仍然没有找到给我的确切字段`Conversion Error`，但我假设是表单中的一个字段，不需要为此特定功能提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:02:20.603

与问题相关的逻辑很好。问题在于表单中的其他项目保持为空。与**Edit 2**一样，添加`immediate="true"`make it 以便将我需要的字段单独发送到 servlet。

**学过的知识**

在 JSF 中提交表单的一部分时，请确保只提交您需要的字段。尤其是在大型表单中并将 ajax 与表单的子部分集成。

# c# - 在 C# 中是否有适用于 Android 和 iPhone 开发的框架？

> ID：10088997
> 
> 赞同：-2
> 
> 时间：2012-04-10T12:40:51.147
> 
> 标签：c#, android, iphone, .net

基本上我们希望开发一个相对简单的应用程序，但我们只想做一次。我们是一家.net 开发公司。因为这是我们的优势，我们愿意坚持下去。

我看过适用于 Android 的 Mono (http://xamarin.com/monoforandroid)。这个好吗？有没有人在 Android 和 iPhone 上都使用过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:48:43.697

[Mono for Android](http://xamarin.com/monoforandroid)将只允许您开发 Android 应用程序，而不是 iPhone 应用程序。对于 iPhone 应用程序，请考虑使用[MonoTouch](http://xamarin.com/monotouch)。我没有任何使用这些的经验，但请记住，它们不是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:09:19.543

如果您了解该语言，则从现有应用程序编写端口应用程序并不难。如果您了解 Java，您可以轻松地为 Android 重写 .Net 应用程序。没有通用的框架，但是具有完整的原生功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:46:56.480

我从不在移动设备上尝试单声道，但在其他平台上它的效果还不错。

现在有一些应用程序在线。