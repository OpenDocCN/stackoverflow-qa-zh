# StackOverflow 问答 12082000-12082999

# database - 将 Neo4j Web 管理连接到我的数据时出现问题

> ID：12082003
> 
> 赞同：0
> 
> 时间：2012-08-22T21:57:59.090
> 
> 标签：database, neo4j, embedded-database, graph-databases, web-administration

我已经将一堆数据加载到我的 java 应用程序的数据库中。但是，当我启动 Web 管理服务器时，我只能看到默认的 1 个节点，1 个关系。我如何（指向？）此服务器到我在 EmbeddedGraphdatabase 实例中指定的数据文件？如果有帮助，我已经包含了一段代码。谢谢！

```
// The path to my data files is var/graphDb/full_abstract1\. I want Web Admin to point HERE
graphDb = new GraphDatabaseFactory().newEmbeddedDatabase( "var/graphDb/full_abstract1" );
registerShutdownHook(graphDb);

Transaction tx = graphDb.beginTx();
    int count = 0;
    try {
        for (org.openbel.framework.common.model.Statement s : statements) {

            firstNode = graphDb.createNode();
            String str = s.getSubject().toBELShortForm();
            firstNode.setProperty("getSubject()", str);

            secondNode = graphDb.createNode();
            String str0 = s.getObject().toBELShortForm();
            secondNode.setProperty( "getObject()", str0);

            // have to convert the Relationship Type
            org.openbel.framework.common.enums.RelationshipType r = s.getRelationshipType();
            RelationshipType r_neo = makeNeoRType(r);
            relation = firstNode.createRelationshipTo(secondNode, r_neo);

            tx.success();
            out.println("# statements: " +count++);
        }
    }
    finally {
        tx.finish();
    }
    // Some debug code, to make sure I get all the nodes I expect.
    for (Node n : graphDb.getAllNodes()) {
        for (Relationship r : n.getRelationships()) {
            out.println("Node Id: " +n.getId());
            out.println("Relationship Type: " +r.getType());
        }
    }
    out.println("Done"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:28:38.870

您编辑`conf/neo4j-server.properties`并将数据库路径设置为`var/graphDb/full_abstract1`

您还可以将 Web 界面作为 Java 应用程序的一部分启动，请参阅：[http ://docs.neo4j.org/chunked/snapshot/server-embedded.html](http://docs.neo4j.org/chunked/snapshot/server-embedded.html)

# asp.net - VB.net 1.1 - 有继续吗？

> ID：12082006
> 
> 赞同：2
> 
> 时间：2012-08-22T21:58:04.960
> 
> 标签：asp.net, vb.net, loops, for-loop

必须使用记事本使用 VB.net 1.1 维护一个旧网站 :( 我有一些我为我们的一些 .Net 4 网站编写的代码，老板想要移植到旧网站。找到 VB.net 1.1 代码示例这显示了在 For/Next 块中使用“Continue For”来跳到下一次迭代。但是，当我在代码中尝试它时，我得到一个异常，“Name 'Continue' has not been declared。”这是否可用，还是示例不正确，它是.Net 2.0 的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T22:05:20.200

[`Continue`声明](http://msdn.microsoft.com/en-us/library/801hyx6f%28v=vs.80%29.aspx)是在 VS 2005 中添加的。

如果你真的需要，你可以使用一个[`GoTo`语句](http://msdn.microsoft.com/en-us/library/69whc95c%28v=vs.71%29.aspx)跳到最后。在 VB.NET 和 VS 2003 的 7 年开发中，我从来不需要一个`GoTo`自己。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T22:02:57.263

似乎记得 Continue For 是在 2005 年添加到该语言中的。

是的，一些研究导致了这一确认

```
Continue For
Continue Do
Continue While 
```

在 VB.2005 中添加，以前你只有讨厌的`GOTO`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T07:28:12.353

这是 GoTo 可以正常工作的极少数情况之一。看：

```
For count = 1 To 100
   If itsMillerTime Then Goto ContinueFor

   ' More stuff here

  ContinueFor:
Next 
```

语义上与 Continue For 相同。

# php - UNION 在 phpmyadmin 中工作，但不在我的 PHP 代码中

> ID：12082009
> 
> 赞同：-1
> 
> 时间：2012-08-22T21:58:30.040
> 
> 标签：php, mysql, database, union

所以下面的查询将在我的 phpmyadmin 中运行（变量作为实际值作为课程），但是当我在我的 php 代码中运行它时，我只返回第一个字段（好像 UNION 之后的第二个查询从未运行过）。

```
$result=mysql_query("(SELECT RID, Name, Address, City, State, Zip_Code, Phone 
                      FROM restaurant 
                      WHERE Name = '$sql_name' AND City = '$sql_location') 
                      UNION 
                      (SELECT RID, Name, Address, City, State, Zip_Code, Phone 
                      FROM restaurant 
                      WHERE Name = '$sql_name' OR City = 'sql_location') "); 
```

谁能帮我解释这是为什么？感谢您的阅读，我感谢任何和所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:01:42.333

```
City = 'sql_location')
        ^ missing '$' symbol 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:04:19.707

您的两个联合语句都将返回完全相同的记录。联合将过滤掉重复项。

# javascript - 将变量从 Javascript 发送到文本框

> ID：12082013
> 
> 赞同：0
> 
> 时间：2012-08-22T21:58:45.897
> 
> 标签：javascript, jquery

在过去的一个小时里，我搜索了谷歌，但找不到答案。我有一个变量，我需要将它发送到一个文本框作为默认值：

```
if (totalcustomamount < 105)  {
          totalcustomamount = 105;
} 
```

是我的代码，它可以工作，但我不知道如何在下面的文本框中将变量设置为该值：

```
<input name="name_of_box" type="text" id="name_of_box" size="4" class="name_of_class"> 
```

我通常只会放`value="something"`，但我需要使用 JavaScript 中的变量。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:59:30.347

```
// id="name_of_box"
document.getElementById('name_of_box').value = totalcustomamount; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:00:49.617

jQuery方式：

```
$(function() {
    if (totalcustomamount < 105)  {
        $("#name_of_box").val(105);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:01:04.190

```
if (totalcustomamount < 105)  {
          totalcustomamount = 105;
        document.getElementById('name_of_box').value = totalcustomamount;

} 
```

# javascript - 将数据从一页发送到另一页

> ID：12082020
> 
> 赞同：0
> 
> 时间：2012-08-22T21:59:37.570
> 
> 标签：javascript

假设我的网站中有一个页面，其中包含一个成员列表（我所有成员的列表），我想在我的主页上显示前 5 名海报的名称（包括在成员列表页面上）。我将如何将这些数据从我的成员列表页面传递到我的主页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:02:15.440

您指的是[跨页面发布](http://msdn.microsoft.com/en-us/library/ms178139.aspx)（通过使用`PreviousPage`页面的属性可以完成）。检查[微软的文章](http://msdn.microsoft.com/en-us/library/ms178139.aspx)。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:04:06.003

由于 HTTP 是无状态协议。您可以通过以下方式传递数据：

```
 1: Using QuerySdatring like  http://yourpageB?data1=1&data2=2
  and retrieve these values in second page.

 2\. You can maintain session variables which takes help of cookies to store data in clients        machine and can be retrieved later. 
```

# yii - Yii 高级 url 重写

> ID：12082021
> 
> 赞同：9
> 
> 时间：2012-08-22T22:00:04.537
> 
> 标签：yii

注意 ANYTHING_ELSE 所以，我有我的控制器和操作，我希望在响应这样的示例时表现正常：

```
// for UserContoller with actionList and actionEdit
user/list
user/edit/25 
```

但是对于不属于特定控制器和操作的所有内容，我希望它们属于一个默认控制器和操作，例如：BlogController 和 actionView。这就是 ANYTHING_ELSE 的来源。

```
// ANYTHING_ELSE can be:
this-is-a-test-page
this/is/another/page/with/lots/of/slashes
this-has-extension.html

'urlManager' => array(
  'urlFormat' => 'path',
  'showScriptName' => false,
  'rules' => array(
    '<controller:\w+>/<id:\d+>' => '<controller>/view',
    '<controller:\w+>/<action:\w+>/<id:\d+>' => '<controller>/<action>',
    '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
    'ANYTHING_ELSE' => 'blog/view',
   ),
), 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T09:55:11.727

我将逐步解释如何使其正常工作。

第 1 步 - 创建一个 Yii 网络应用

导航到控制台中的 Yii 框架路径并创建一个新的 webapp。就我而言，我在控制台中使用了它：

```
cd c:\zeus\yii-1.1.10.r3566\framework
yiic webapp c:\zeus\www\yiiblog 
```

其中 c:\zeus\yii-1.1.10.r3566\framework 是我的 Yii php 框架的路径，而 c:\zeus\www\yiiblog 是我的 Yii webapp 测试文件夹的路径

第 2 步 - 将我的域名伪装成 dev.yiiblog.com

转到 C:\Windows\System32\drivers\etc 并通过添加以下行来编辑您的主机文件：

```
127.0.0.1 dev.yiiblog.com 
```

第 3 步 - 更改 apache httpd.conf 文件

```
<VirtualHost *:80>
    DocumentRoot "c:/zeus/www/yiiblog"
    ServerName dev.yiiblog.com
    ErrorLog "logs/dev.yiiblog.com-error.log"
    CustomLog "logs/dev.yiiblog.com-access.log" common
</VirtualHost> 
```

并重新启动apache服务。我在我的 Windows 控制台中使用：

```
net stop apache
net start apache 
```

我的 Apache 2 服务被命名为“apache”，而不是默认的“apache2.2”。

第 4 步 - 创建数据库并配置数据库连接到 Yii

我创建了一个数据库 yiitest 和一个用户 yiitest。然后我打开位于 ad /protected/config/main.php 的 Yii 配置文件并编辑了与 MySQL 的连接：

```
'db'=>array(
  'connectionString' => 'mysql:host=localhost;dbname=yiitest',
  'emulatePrepare' => true,
  'username' => 'yiitest',
  'password' => 'password',
  'charset' => 'utf8',
), 
```

第 5 步 - 下载 dburlmanager Yii 扩展

进入 Yii dburlmanager，下载 Yii dburlmanager 扩展[http://www.yiiframework.com/extension/dburlmanager/](http://www.yiiframework.com/extension/dburlmanager/)并解压到你的 /protected/extensions 文件夹

第 6 步 - 创建 MySQL 数据库表并添加虚拟数据

```
CREATE TABLE IF NOT EXISTS `articles` (
  `seoURL` varchar(100) NOT NULL
) ENGINE=InnoDB;

INSERT INTO `articles` (`seoURL`) VALUES
('first-post'),
('another-post'),
('post/value'),
('website/page1');

CREATE TABLE IF NOT EXISTS `pages` (
  `seoURL` varchar(100) NOT NULL
) ENGINE=InnoDB;

INSERT INTO `pages` (`seoURL`) VALUES
('page-first-post'),
('page-another-post'),
('page/post/value.html'),
('page-website/page1'); 
```

第 7 步 - 创建您的 Yii 自定义控制器

在 /protected/controllers 文件夹下创建两个名为 ArticleController.php 和 PageController.php 的 php 文件：

ArticleController.php 内容：

```
<?php
/**
 * @filename ArticleController.php
 */

class ArticleController extends CController {
  public function actionView() {
    $this->render('view', array(
      'article' => isset($_GET['article'])?$_GET['article']:'',
    ));
  }
} 
```

PageController.php 内容：

```
<?php
/**
 * @filename PageController.php
 */
class PageController extends CController {
  public function actionView() {
    $this->render('view', array(
      'page' => isset($_GET['page'])?$_GET['page']:'',
    ));
  }
} 
```

第 8 步 - 创建您的自定义 Yii 视图

使用路径 /protected/views/article/view.php 和 /protected/views/page/view.php 创建与上述控制器对应的视图文件：

文章查看内容：

```
<h1>Article View Test</h1>
<br />
<?php
    if (isset ($article)) echo "article: $article";
?> 
```

页面浏览内容：

```
<h1>Page View Test</h1>
<br />
<?php
    if (isset ($page)) echo "page: $page";
?> 
```

第 9 步 - 添加自定义 Yii url 规则

再次打开你的 main.php Yii 配置文件并将你的 urlManager 设置为类似于：

```
'urlManager'=>array(
  'urlFormat'=>'path',
  'class'=>'ext.DbUrlManager.EDbUrlManager',
  'connectionID'=>'db',
  'rules'=>array(
    '<article:[\w\/.-]+>'=>array(
      'article/view',
      'type'=>'db',
      'fields'=>array(
        'article'=>array(
          'table'=>'articles',
          'field'=>'seoURL'
        ),
      ),
    ),

    '<page:[\w\/.-]+>'=>array(
      'page/view',
      'type'=>'db',
      'fields'=>array(
        'page'=>array(
          'table'=>'pages',
          'field'=>'seoURL'
        ),
      ),
    ),

    '<controller:\w+>/<id:\d+>' => '<controller>/view',
    '<controller:\w+>/<action:\w+>/<id:\d+>' => '<controller>/<action>',
    '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
  ),
  'showScriptName'=>false,
), 
```

第 10 步 - 创建 .htaccess 文件

在您的 Web 应用根目录下创建一个 .htaccess 文件，并将其内容设置为：

```
Options +FollowSymLinks
IndexIgnore */*
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

第 11 步 - 测试您的 SEO 友好 URL

```
dev.yiiblog.com/first-post
dev.yiiblog.com/page-first-post 
```

ETC

使用完整的 url 管理能力创建很棒的博客或其他 web 应用程序，玩得开心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:04:53.747

如果我正确地意识到你，你可以使用这样的东西：

```
 'rules' => array(
    //You should define all the controllers exactly:
    '<controller:user|archive|office>/<action:\w+>' => '<controller>/<action>',
    //Or more complicated rule:
    '<lang:(es|it|en)>/(turismo|visita|travel)/<slug:>' => array('visit/page', 'urlSuffix' => '.html'),

    //After that you can process all remaining urls as you want:
    '<alias:[\w\d\-_\/]+>' => array('blog/view', 'urlSuffix' => '.html'),
  ), 
```

和控制器：

```
class BlogController extends Controller
{
    public function actionView($alias)
    {
        echo $alias;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T00:18:40.967

阅读我关于如何使用 Wordpress 处理特定场景（以及其他内容）的文章：[http ://www.yiiframework.com/wiki/322/integrating-wordpress-and-yii-still-another-approach-using-yii-作为路由器控制器/](http://www.yiiframework.com/wiki/322/integrating-wordpress-and-yii-still-another-approach-using-yii-as-the-router-controller/)

本质上，为了处理这样的默认值（并将其交给不同的系统），最简单的方法是覆盖 Yii 的异常处理系统，捕获 404 错误并将其交给您的博客控制器。

如果您通过将控制器操作设置为错误处理程序将人们发送到您的博客控制器，Yii 会发送一个 404 错误标头（即使您正确处理了错误）。是的，我已经深入研究了很多。不，我不相信有更简单的答案:-)。我很想知道你是否找到更简单的东西......

# objective-c - 为什么如果在 AppDelegate 中定义了一个属性，但在 ViewController 中不可用？

> ID：12082022
> 
> 赞同：0
> 
> 时间：2012-08-22T22:00:15.797
> 
> 标签：objective-c, ios

说如果我们有`AppDelegate.h`

```
@property (strong, nonatomic) NSMutableArray *someList; 
```

和`.m`

```
@synthesize someList; 
```

然后我想`ViewController.m`，我们可以做

```
NSLog(@"%@", [[UIApplication sharedApplication] delegate].someList); 
```

但它实际上编译时出现 Property `someList`not found on object错误`UIApplicationDelegate`？为什么会这样？（实际上，这是将数据传递给 ViewController 的首选方式吗？另一种方式似乎是将其声明为 的属性`ViewController`，并在方法内部的代码中设置此属性`application:didFinishLaunchingWithOptions`。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:04:43.283

您需要转换`[[UIApplication sharedApplication] delegate]`为适当的类型，因为此时编译器只是认为它是`id<UIApplicationDelegate>`. 在您的 中考虑以下内容`ViewController.m`：

```
- (NSMutableArray *)someList {
    return ((AppDelegate *)[[UIApplication sharedApplication] delegate]).someList;
} 
```

有了它，您可以`self.someList`在视图控制器中的任何位置访问。请注意，您可能需要`#import "AppDelegate.h"`在`ViewController.m`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T22:05:17.227

`someList`是`AppDelegate`and not的属性`UIApplicationDelegate`。所以你必须添加一个演员：

```
NSLog(@"%@", [(AppDelegate *)[UIApplication sharedApplication].delegate someList]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:04:55.030

投射它：

```
NSLog(@"%@", ((AppDelegate *)[[UIApplication sharedApplication] delegate]).someList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T22:20:15.087

你需要投射它。但我经常使用它，以至于我在我的类上创建了一个方法。

```
- (MyApplicationDelegate*) appDelegate{
    return (MyApplicationDelegate*)[UIApplication sharedApplication].delegate;
} 
```

那么您只需要从项目中调用应用程序委托。

```
- (void) someAction {
    [[self appDelegate].someList addObject:@"new object"];
} 
```

我觉得这是一个更好的方法。

# javascript - 如何选择这个特定的 div？

> ID：12082023
> 
> 赞同：0
> 
> 时间：2012-08-22T22:00:19.390
> 
> 标签：javascript, jquery, toggle

假设我有 HTML：

```
<span class="random"></span>
<div class="parentdiv">
    <img src="" class="button">
</div>
<div class="content-one">
    <div class="content-two">
    </div>
</div>

<span class="random"></span>
<div class="parentdiv">
    <img src="" class="button">
</div>
<div class="content-one">
    <div class="content-two">
    </div>
</div> 
```

我目前可以使用以下 JavaScript 选择 div content-one：

```
$(".button").toggle(function(){
    $(this).parent().nextAll(".content-one").first().slideUp('slow');
}, 
```

我将如何去选择 div`.content-two`呢？因为我只是无法弄清楚它会是什么！

这样做的原因是页面上有多个类的实例进行切换，因此`content-two`每次按下按钮时只需要选择 div 的第一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:07:43.197

```
$(".button").toggle(function(){
  $(this).parent().nextAll(".content-one").find(".content-two").first().slideUp('slow');
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:07:48.927

```
$(".button").toggle(function(){
  $(this).next(".content-one").children('.content-two').first().slideUp('slow');
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:04:56.710

你不会用 ".content-two" 替换 ".content-one" 吗？由于您选择的是“.content-one”类，我假设如果您只是将其更改为您想要的类，它会起作用吗？

```
$(".button").toggle(function(){
    $(".content-two").first().slideUp('slow');
}, 
```

[http://api.jquery.com/class-selector/](http://api.jquery.com/class-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T22:14:25.080

```
$(".button").click(function(){
    $(this).parent().next(".content-one").first(".content-two").toggle('slow');
}); 
```

这将获取单击的 .button，然后获取父级，然后获取具有“.content-one”作为类的下一个兄弟，然后获取具有“.content-two”作为类的第一个子级并切换显示。示例：[jsFiddle 示例](http://jsfiddle.net/GyQ4e/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T22:17:48.410

玩这个：

```
$(".content-one:first").css({border:'3px solid red'});
$(".content-one:first div:first").css({border:'3px dotted blue'});

$("div").eq(2).css({border:'3px solid #003366'});
$("div:eq(2)").css({border:'3px dotted blue'});
$("div:eq(2)>div:first").css({border:'3px dotted blue'}); 
```

您的问题不够具体，但其中一条有您的答案，还请检查此链接以查看它的实际效果：http: [//jsfiddle.net/e7MCy/](http://jsfiddle.net/e7MCy/)

# php - HTML/JQuery 对子表进行排序并使某些行无法排序？

> ID：12082028
> 
> 赞同：0
> 
> 时间：2012-08-22T22:00:57.327
> 
> 标签：php, jquery, html, jquery-ui, jquery-ui-sortable

布局：具有“展开”按钮的行的表格。展开按钮显示该行的所有子行，所有这些子行都与父行共享一些公共数据。

目标：在父母之间拖拽孩子；即将数据的某个子集移动到另一个集合，并根据新父级的数据自动编辑某些字段。

到目前为止，我有一张带有扩展子行的表格，但我无法理解如何让孩子们可以在父母之间拖动。我也不希望能够重新排序父行，它们应该是静态的。该表是动态创建的，数据是从数据库中获取的。

桌子：

```
 <table id="loot-table" class="table table-striped">
                    <thead>
                    <tr>
                        <th>Min Level Required</th>
                        <th>Min Tokens Required</th>
                        <th>Type of Loot Dropped</th>
                        <th>Loot Group</th>
                        <th>Name of Loot Dropped</th>
                        <th>Quantity of Loot Dropped</th>
                        <th>Weight of Loot Dropped</th>
                        <th>Loot Is Available:</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php $loot_group_count=-1; foreach($event['lockbox_loot'] as $lockbox_loot){ $loot_group_count++; ?>
                        <tr class="loot-header-row">
                            <td><input type="number" value="<?php echo $lockbox_loot['min_level_required']; ?>"></td>
                            <td><input type="number" value="<?php echo $lockbox_loot['min_tokens_required']; ?>"></td>
                            <td><input name="loot_group_id[<?php echo $loot_group_count; ?>]" type="text" value="<?php echo $lockbox_loot['loot_group_id']; ?>"></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><a href="#" class="loot-table-expand-btn" data-group-id="<?php echo $loot_group_count; ?>">Expand</a></td>
                        </tr>
                        <?php if($loot){ $i=-1; foreach($loot as $lootitem){
                            if($lockbox_loot['loot_group_id'] === $lootitem['loot_group_id']){ $i++; ?>
                            <tr class="loot-row-<?php echo $loot_group_count; ?> hide">
                                <td></td>
                                <td></td>
                                <td><input name="item_loot_group_id[<?php echo $loot_group_count; ?>][<?php echo $i; ?>]" type="text" value="<?php echo $lootitem['loot_group_id']; ?>" disabled="disabled"></td>
                                <td>
                                    <select name="loot-type[<?php echo $i; ?>]">
                                        <option value="money" <?php if($lootitem['loot_type']==="money"){echo "selected";}; ?>>Money</option>
                                        <option value="respect" <?php if($lootitem['loot_type']==="respect"){echo "selected";}; ?>>Respect</option>
                                        <option value="item" <?php if($lootitem['loot_type']==="item"){echo "selected";}; ?>>Item</option>
                                        <option value="mafia" <?php if($lootitem['loot_type']==="mafia"){echo "selected";}; ?>>Mafia</option>
                                    </select>
                                </td>
                                <td><input name="loot_id[<?php echo $i; ?>]" type="text" value="<?php echo $lootitem['loot_id']; ?>"></td>
                                <td><input name="quantity[<?php echo $i; ?>]" type="number" min="0" value="<?php echo $lootitem['quantity']; ?>"></td>
                                <td><input name="loot_weight[<?php echo $i; ?>]" type="number" min="0" value="<?php echo $lootitem['loot_weight']; ?>"></td>
                                <td><input name="is_available[<?php echo $i; ?>]" type="checkbox" value="<?php echo $lootitem['is_available']; ?>" <?php if($lootitem['is_available']){echo "checked";}; ?>></td>
                            </tr>
                    <?php }}}} ?>
                    </tbody>
                </table> 
```

用于扩展隐藏单元格的 JQuery 代码：

```
 $(".loot-table-expand-btn").each(function() {
        $(this).on('click', function(){
            var group_id = $(this).attr('data-group-id');
            $('.loot-row-' + group_id).each(function(){
               if($(this).is(":visible")) {
                   hidden = true;
                   $(this).hide();
               } else {
                   hidden = false;
                   $(this).show();
               }
            });
            if(hidden) {
                $(this).html('Expand');
            } else {
                $(this).html('Collapse');
            }
            return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:09:08.927

jQuery UI - Sortable 有一个关于如何在父母之间共享可拖动孩子的[演示。](http://jqueryui.com/demos/sortable/#connect-lists)至于将排序限制为某些行，或者`<td>`您可以使用相同的 API 并使用“项目”选项仅选择您想要/需要的元素，例如

`items: "td[class='mark']"`

只允许您对具有该类的项目进行排序。

# javascript - JavaScript 如何决定来自不同字符集的字符的排序顺序？

> ID：12082043
> 
> 赞同：1
> 
> 时间：2012-08-22T22:01:45.563
> 
> 标签：javascript

我正在编写一些需要执行字母升序排序（标准`.sort()`）行为的代码，我想知道排序如何处理特殊字符和来自不同字符集的字符。例如：

```
var aChars = [];

aChars.push("¢");
aChars.push("™");
aChars.push("È");
aChars.push("~");
aChars.push("p");
aChars.push("_");
aChars.push("P");
aChars.push("治");
aChars.push("す");

aChars.sort();

for (var i = 0;i<aChars.length;i++) {
    console.log(aChars[i]);
    //alert(aChars[i]);   
}​ 
```

执行此代码时，我总是得到一致的顺序。JavaScript 如何决定顺序？我以为可能是 HTML 实体编号，但我找不到那些日文字符的 HTML 实体编号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:10:37.570

如果您不提供自己的比较函数，那么根据[ECMAScript 规范](http://www.mit.edu/~gsstark/e262-pdf.pdf)，以下是规则：

1.  如果 x 和 y 都未定义，则返回 +0。
2.  如果 x 未定义，则返回 1。
3.  如果 y 未定义，则返回 -1。
4.  如果在 sort 调用中未提供参数 comparefn，则转到步骤 7。
5.  使用参数 x 和 y 调用 comparefn。
6.  返回结果（5）。
7.  调用 ToString(x)。
8.  调用 ToString(y)。
9.  如果 Result(7) < Result(8)，则返回 -1。
10.  如果 Result(7) > Result(8)，则返回 1。
11.  返回+0。

对于您的特定情况，由步骤 7-11 确定。

并且，`<`and`>`运算符比较第一个不同字符的 Unicode 编码值。

为了更精细地控制情况，MDN 建议使用您自己的自定义比较函数，[`String.localeCompare()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare)该函数包含更智能的字符排序逻辑。

# drupal - 升级的 Drupal 7 - 无法安装/管理模块

> ID：12082045
> 
> 赞同：0
> 
> 时间：2012-08-22T22:02:09.807
> 
> 标签：drupal, drupal-6, drupal-7

我有一个共享相同代码库的多站点设置。我已经尽可能地关注[http://drupal.org/node/570162 。](http://drupal.org/node/570162)

我卡住的地方是我的新站点安装 - 我无法访问或安装任何新模块。如果我尝试访问 /admin/modules 我会收到一个 ACCESS DENIED 错误。

我正在尝试通过安装新版本的 CCK 来迁移我的字段 - 但我没有在“结构”下看到“迁移字段”选项，也无法通过直接 url (/admin/structure/content_migrate) 访问它。

我可以强制 Drupal 检查我的模块并以某种方式重新编译列表吗？还是这里有更大的问题？

我能够访问其他模块，例如块、菜单、分类。我的模块都存在于具有 755 权限的 /sites/all/modules 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T22:44:14.637

好吧，这感觉就像是您花费大量时间并想知道这是否是对系统、文档或人类健忘的知识不足的问题之一。

升级后，我必须手动设置自己能够管理 /admin/people/permissions 中的模块。

*瞧*

# javascript - 匿名函数下未定义的javascript对象

> ID：12082047
> 
> 赞同：2
> 
> 时间：2012-08-22T22:02:24.440
> 
> 标签：javascript, object

我们先来看看 JavaScript 代码 =>

```
function ConstructNodes(className,hiddenId,alertMsg,formName){
    this.className = className;
    this.hiddenId  = hiddenId;
    this.alertMsg  = alertMsg;
    this.formName  = formName;
}

ConstructNodes.prototype.getId = function(){
    var nodes = document.getElementsByClassName(this.className);
    for (var i=0;i<nodes.length;i++){
        nodes[i].onclick = function(){
            var r = confirm(this.alertMsg);
            if (r==true){
                alert(this.hiddenId); // undefined
            } else {
                return;
            }
        };
    }
};

var obj = new ConstructNodes("className","hiddenId","Are you sure ?","formName");
obj.getId(); 
```

我在这种情况下的问题是在getId的匿名函数下定义的对象是未定义的，我该如何解决这种情况？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:07:30.497

您的代码错误地假设`this`它将引用事件处理程序内的“ConstructNodes”对象。它不会；这将是元素。相反，存储`this`在一个对象中，事情会更好：

```
ConstructNodes.prototype.getId = function(){
    var nodes = document.getElementsByClassName(this.className), obj = this;
    for (var i=0;i<nodes.length;i++){
        nodes[i].onclick = function(){
            var r = confirm(obj.alertMsg);
            if (r==true){
                alert(obj.hiddenId); // undefined
                document.getElementById(obj.hiddenId).value = this.id;
                alert(obj.hiddenId);
            } else {
                return;
            }
        };
    }
}; 
```

（完全不清楚您要做什么，因此可能仍然存在一些问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:06:00.290

我花了一分钟才明白你的问题。

您不能`this`在 getId 的匿名函数中引用。您必须保存`this`到变量中，例如`var me = this`在匿名函数之外，然后使用`me.hiddenId`.

这是一个[JSFiddle](http://jsfiddle.net/SMu7q/1/)来证明这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:13:25.973

这是`undefined`因为您无法`this`像那样访问该功能。任何函数都使用它自己的*执行上下文*调用，因此`this`在这种情况下与函数外部不同。

您可以通过在外部范围中定义 a`var`并在内部访问它来解决这个问题，如下所示：

```
function ConstructNodes(className,hiddenId,alertMsg,formName){
  this.className = className;
  this.hiddenId  = hiddenId;
  this.alertMsg  = alertMsg;
  this.formName  = formName;
}

ConstructNodes.prototype.getId = function() {
  var _this = this; // a reference that will be known in your closure/function
  var nodes = document.getElementsByClassName(this.className);
  for (var i = 0; i < nodes.length; i++) {
    nodes[i].onclick = function(){
      if (confirm(_this.alertMsg)) {
        alert(_this.hiddenId); // no longer undefined
      } else {
        return;
      }
    };
  }
};

var obj = new ConstructNodes("className", "hiddenId", "Are you sure?", "formName")
obj.getId(); 
```

# testing - 如何让 WebDriver 关闭 Firefox 安全警报？

> ID：12082052
> 
> 赞同：4
> 
> 时间：2012-08-22T22:02:38.060
> 
> 标签：testing, webdriver, spock, selenium-webdriver, geb

我正在使用 spock、geb 和 WebDriver 编写测试脚本。该脚本在不安全的页面上提交表单。该页面提交到安全的 HTTPS URL。Firefox 对此显示警告，特别是：

![安全警告](../Images/a75610a9f559fa6f196c6ae8f7185403.png)

这会导致以下错误：

```
org.openqa.selenium.UnhandledAlertException: Modal dialog present
Build info: version: '2.23.0', revision: '17137', time: '2012-06-07 09:08:12'
System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.4', java.version: '1.6.0_33'
Driver info: driver.version: RemoteWebDriver
Session ID: 79e0444f-4c8e-2b4c-9066-601e7cdb3aa9
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
    at org.openqa.selenium.remote.ErrorHandler.createUnhandledAlertException(ErrorHandler.java:169)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:141)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:458)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:462)
    at org.openqa.selenium.remote.RemoteWebDriver.getTitle(RemoteWebDriver.java:204)
    at geb.Page.getTitle(Page.groovy:200)
    at groovy.lang.Closure.getPropertyTryThese(Closure.java:197)
    at groovy.lang.Closure.getPropertyDelegateFirst(Closure.java:187)
    at groovy.lang.Closure.getProperty(Closure.java:172) 
```

如果出现此警报，我如何让 WebDriver 消除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T22:13:15.860

在一个问题中找到答案：[Handling Alert in webdriver 2.21and mozilla11](https://stackoverflow.com/questions/10947857/handling-alert-in-webdriver-2-21and-mozilla11)

```
driver.switchTo().alert().accept() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T05:44:20.110

请记住在执行 accept 之前添加等待警报。在java中为我提供以下功能。

```
 private void acceptSecurityAlert() {

    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver).withTimeout(10, TimeUnit.SECONDS)          
                                                            .pollingEvery(3, TimeUnit.SECONDS)          
                                                            .ignoring(NoSuchElementException.class);    
    Alert alert = wait.until(new Function<WebDriver, Alert>() {       

        public Alert apply(WebDriver driver) {

            try {

                return driver.switchTo().alert();

            } catch(NoAlertPresentException e) {

                return null;
            }
        }  
    });

    alert.accept();
} 
```

# google-app-engine - 用户对象的 GAE ndb 查询

> ID：12082053
> 
> 赞同：0
> 
> 时间：2012-08-22T22:02:40.993
> 
> 标签：google-app-engine, google-cloud-datastore

```
for car in  Car.query().fetch():
        print car.owner == users.get_current_user() 
```

正如预期的那样，这将为当前用户拥有的所有汽车打印 True。

```
for car in  Car.query(Car.owner == users.get_current_user()).fetch():
        print car 
```

虽然当前用户拥有几辆汽车，但这不会返回任何结果。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:50:45.627

在数据存储中存储用户对象充满了问题；失败的查询只是一个例子（不，对不起，我不知道为什么在你的情况下它会失败）。

您最好只存储“用户 ID”（即 users.get_current_user().user_id()，一个字符串）或电子邮件地址——这取决于您认为如果用户更改与相关联的电子邮件地址应该发生的情况他们的 Google (GMail) 帐户。user_id 保持不变，电子邮件地址（显然）发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:39:37.917

我已经添加了我拥有的新车，并且查询正在按预期拾取这些车辆。这并不能解决技术问题（也就是说，我仍然不明白为什么查询不起作用） - 但它确实解决了我的实际问题。

# php - PHP文件上传写入磁盘错误

> ID：12082056
> 
> 赞同：2
> 
> 时间：2012-08-22T22:02:49.160
> 
> 标签：php, file, upload, disk

突然，我无法使用我的 GoDaddy 托管帐户通过 Web 表单上传文件。这是位于[http://www.fordcorepro.com/upload.php](http://www.fordcorepro.com/upload.php)的基本表格：

```
<form action="upload_submit.php" method="post" enctype="multipart/form-data" name="form1" id="form1">
  <label for="fileField"></label>
  <input type="file" name="fileField" id="fileField" />
  <input type="submit" name="button" id="button" value="Submit" />
</form> 
```

它只是将文件发布到upload_submit.php：

```
print_r($_FILES); 
```

我尝试上传的任何文件，无论类型或大小，都不会写入磁盘进行处理：

> 数组 ( [fileField] => 数组 ( [name] => Whining.txt [type] => [tmp_name] => [error] => 7 [size] => 0 ) )

我收到错误代码 7，或磁盘写入错误。GoDaddy 说他们没有什么原因导致这种情况，这是我的脚本中的内容。我告诉他们可能有写权限，他们拒绝了。有任何想法吗？我尝试上传的文件只有 13KB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:08:03.107

我刚刚在您提供的 URL 上传了一个 11KB 的文本文件，它上传了文件（数组显示错误 = 0 和正确的文件大小）

你上传的是什么类型的文件，上传数组告诉你什么？

上传数组告诉我：

`Array ( [fileField] => Array ( [name] => New Text Document.txt [type] => text/plain [tmp_name] => /tmp/phpCBroC6 [error] => 0 [size] => 12161 ) )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:05:44.457

我遇到了这种情况......我已经填满了磁盘（实际上是临时文件上传的分区）:-(。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T19:21:31.573

这可能只是服务器上的 /tmp 文件夹的问题：有时它有一个特殊的分区，而该分区只是空间不足。

您可以更改`php_tmp_dir`php.ini 中的设置。[在 PHP 的文档中](http://php.net/manual/en/ini.core.php#ini.upload-tmp-dir)阅读有关它的 mroe 。

# ruby - 如何将 Vim 中的文本“扩展”为一种易于阅读的方式？

> ID：12082057
> 
> 赞同：6
> 
> 时间：2012-08-22T22:02:54.587
> 
> 标签：ruby, vim, text

我经常使用嵌套数据结构，而且很多时候我必须从控制台手动分析它们。问题是它们全部打印在一行中。

有没有一种简单的方法可以基于逗号重新构建数据结构的显示`{,[,],}`，使其看起来像 Ruby 的 pretty_print 输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T22:14:30.260

```
:%s/\([{,]\)/\1\r/g
ggVG=
:set ft=ruby 
```

哇哦

# compoundjs - 在 CompoundJS 中，数据库播种是如何工作的？

> ID：12082059
> 
> 赞同：1
> 
> 时间：2012-08-22T22:03:10.087
> 
> 标签：compoundjs, railway.js

我看到有一个用于数据库种子的文件夹和一个命令，但我找不到任何关于它如何工作的文档。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T22:33:27.783

这是一个老问题，RailwayJS 框架现在称为[CompoundJS](https://github.com/1602/compound)，但 Johnny 的建议仍然有效。对于任何寻求更多细节的人来说，这可能会有所帮助。

**数据库/schema.js**

```
var Country = describe('Country', function () {
    property('name', String);
    set('restPath', pathTo.countries);
}); 
```

**db/seeds/development/country.js**

```
console.log('Seeding countries...');

var countries = [{
    name: 'Canada'
}, {
    name: 'USA'
}];

countries.forEach(function(obj) {
    Country.create(obj, function(country) {
        console.log('Added: ', country);
    });  
}); 
```

然后运行：

```
$ compound seed
Seeding countries...
Added: { name: 'Canada', id: 1 }
Added: { name: 'USA', id: 2 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:52:20.000

我敢肯定，答案有点晚了，但是如果您还没有找到答案，那就去吧。

创建种子：

```
railway seed harvest 
```

该关键字`harvest`将调用铁路应用程序，以便它根据您当前在数据库中的任何内容创建种子。至于它的去向，取决于您设置的环境，例如开发、生产等，它将像这样放置您的种子文件：

```
root/db/seeds/[environment]/[model].coffee 
```

...其中 [model] 是您的模型（用户、帖子、帐户等），而 [environment] 是您的环境（开发、测试、生产等）。

要为数据库播种：

```
railway seed 
```

该文档现在对播种有所了解。

# asp.net - 保护 ASP.NET MVC 应用程序中的 ajax 调用

> ID：12082062
> 
> 赞同：3
> 
> 时间：2012-08-22T22:03:17.513
> 
> 标签：asp.net, asp.net-mvc, security

我有一个基于 ASP.NET MVC 的应用程序，它允许根据用户进行不同级别的访问。它当前的工作方式是当用户访问页面时，对数据库进行检查以确定用户拥有的权限。然后根据用户拥有的访问级别选择视图。一些用户比其他用户看到更多的数据并且拥有更多可用的功能。每个页面还进行各种ajax调用来显示和更新页面上显示的数据。

我的问题是确保特定 ajax 调用源自视图并且不是手动制作以返回或更新用户无权访问的数据的最佳方法是什么？我宁愿不必每次进行 ajax 调用时都去数据库重新检查，因为在用户最初加载页面时已经完成了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:53:23.833

查看[Authorize Attribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)，您可以将其放在整个控制器上或仅放在控制器中的特定方法上。

例子：

```
[Authorize(Roles = "Administrator")]
public class AdminController : Controller
{
 //your code here
} 
```

或者

```
public class AdminController : Controller
{
    //Available to everyone
    public ActionResult Index()
    {
        return View();
    }

    //Just available to users in the Administrator role.
    [Authorize(Roles = "Administrator")]
    public ActionResult AdminOnlyIndex()
    {
        return View();
    }
} 
```

或者，您可以编写自定义 Authorize 属性来提供您自己的逻辑。

```
public class CustomAuthorizeAttribute : AuthorizeAttribute 
{           
    protected override bool AuthorizeCore(HttpContextBase httpContext)     
    {
        IPrincipal user = httpContext.User;     
        var validRoles = Roles.Split(',');//Roles will be a parameter when you use the Attribute        
        List<String> userRoles = GetRolesFromDb(user);//This will be a call to your database to get the roles the user is in.

        return validRoles.Intersect(userRoles).Any();
    }
} 
```

要使用：

```
 [CustomAuthorizeAttribute(Roles = "Admin,Superuser")] 
 public class AdminController : Controller {

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:11:49.567

这取决于您使用的会话机制类型。您是否使用默认会员服务提供商？如果不是，您可以传递用户的 id 和 sessionid 确保用户会话有效并且用户具有进行该调用所需的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T00:11:47.270

除了 Authorize 属性，您还可以只允许使用自定义属性的 Ajax 请求，如此[处所示](http://www.dotnetcurry.com/ShowArticle.aspx?ID=551)。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-25T06:45:01.863

如果我使用的是帖子使用

```
[Authorize]
[ValidateAntiForgeryToken] 
```

如果你正在使用 get 使用

```
[Authorize] 
```

您也可以使用此自定义属性

```
public class HttpAjaxRequestAttribute : ActionMethodSelectorAttribute
{
    public override bool IsValidForRequest(ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)
    {
        if (!controllerContext.HttpContext.Request.IsAjaxRequest())
        {
            throw new Exception("This action " + methodInfo.Name + " can only be called via an Ajax request");
        }
        return true;
    }
} 
```

然后如下装饰你的动作

```
[Authorize]
[HttpAjaxRequest]
public ActionResult FillCity(int State)
{
    //code here
} 
```

如果这能解决您的问题，请记住“标记/打勾”。

# c# - 在列表中查找缺失的项目

> ID：12082065
> 
> 赞同：1
> 
> 时间：2012-08-22T22:03:47.340
> 
> 标签：c#, linq

有人可以帮我把它转换成 C# LINQ 吗？？

```
SELECT *
FROM   vf
       LEFT JOIN dbvf
       ON     vf.sid  =dbvf.sid
       AND    vf.cid  =dbvf.cid
WHERE  dbvf.sid IS NULL 
```

vf 和 dbvf 都是`List<T>`. sid 和 cid 是整数。

我想做的是在 vf 中找到 dbvf 中缺少的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:10:44.667

像下面的东西

```
 from dbvf in dbvfs
 from vf in vfs
 where vf.sid == dbvf.sid && vf.cid == dbvf.cid
 where dbvf.sid == null
 select new { dbvf = dbvf, vf = vf} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:13:52.657

尝试这个

```
 var ret =   from p1 in vf
                              join p2 in dbvf
                              on p1.sid equals p2.sid && p1.cid equals p2.cid into g
                              from p2 in g.DefaultIfEmpty()
                              where p2 == null
                              select new {vf=p1, dbvf=p2} 
```

或者这个简单的

```
vf.Except(dbvf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:15:46.597

尝试这样的事情：

```
var query =
    from v in vf
    join d in dbvf
    on new { v.sid, v.cid }
    equals new { d.sid, d.cid } into gj
    where !gj.Any()
    select v; 
```

如前所述，您的目的是做一个“例外”。我已经回答了如何使用左连接语义来做到这一点。

```
var query =
    from v in vf
    join d in dbvf
    on new { v.sid, v.cid }
    equals new { d.sid, d.cid } into gj
    from d in gj.DefaultIfEmpty()
    where d == null
    select v; 
```

这里使用的匿名类型对于外行来说似乎是黑魔法。但是，编译器创建匿名类型（实际上它只是一种类型），其中恰好有两个名为`sid`and`cid`的属性，并提供了用于`Equals`和`GetHashCode`将`Join`在其实现中使用的实现。我选择`gj`for`into`子句是因为引入了`into`编译器执行 a`GroupJoin`而不是常规`Join`调用的原因。

我可以添加到查询中，通过添加一个`from d in gj.DefaultIfEmpty()`子句来恢复`d`以前被该子句隐藏的范围变量，从而获得与您的 SQL 示例类似的感觉`into`。现在我可以添加`where d == null`几乎与原始 SQL 相同的子句。

如果您想要执行其他操作，例如 group by both`sid`和 ，则可能需要再次使用此匿名类型介绍`cid`。

# javascript - 如何在.aspx文件上使用Javascript检查超时值后调用.ascx的按钮单击事件

> ID：12082072
> 
> 赞同：0
> 
> 时间：2012-08-22T22:04:14.127
> 
> 标签：javascript, c#, sql, dom-events

*   我有 2 个文件。一种是 aspx 及其 ascx。
*   aspx 包含计算考试倒计时时间的 Javascript。
*   当计时器值达到 00:00:00 时，我想调用 ascx 文件中的事件“提交考试”。

> 最终论文.aspx.cs

```
public partial class Final_Paper : System.Web.UI.Page 
{
    long timerStartValue = 600;

    protected void Page_Load(object sender, EventArgs e)
    {            
        if (!Page.IsPostBack)
        {
            this.timerStartValue = long.Parse(ConfigurationManager.AppSettings["Delay"].ToString());
            this.TimerInterval = 500;
        }
    }

    public string message()
    {
        string val;
        val = Request.Form["timerData"].ToString();
        TimeSpan ts = TimeSpan.FromMilliseconds(Convert.ToDouble(val.ToString()));
        return ts.ToString();            
    }

    void Page_PreRender(object sender, EventArgs e)
    {
        StringBuilder bldr = new StringBuilder();            
        bldr.AppendFormat("var Timer = new myTimer({0},{1},'{2}','timerData');", this.timerStartValue, this.TimerInterval, this.lbltime.ClientID);
        bldr.Append("Timer.go()");
        Page.ClientScript.RegisterStartupScript(this.GetType(), "TimerScript", bldr.ToString(), true);
        Page.ClientScript.RegisterHiddenField("timerData", timerStartValue.ToString());
    }

    void Page_PreInit(object sender, EventArgs e)
    {
        string timerVal = Request.Form["timerData"];
        if (timerVal != null || timerVal == "")
        {
            timerVal = timerVal.Replace(",", String.Empty);
            timerStartValue = long.Parse(timerVal);
        }
    }

    private Int32 TimerInterval
    {
        get
        {
            object o = ViewState["timerInterval"];
            if (o != null) { return Int32.Parse(o.ToString()); }
            return 50;
        }
        set { ViewState["timerInterval"] = value; }

    }

} 
```

> 最终论文.aspx

```
<script type="text/javascript">
    function myTimer(startVal, interval, outputId, dataField) {
        this.value = startVal;
        this.OutputCntrl = document.getElementById(outputId);
        this.currentTimeOut = null;
        this.interval = interval;
        this.stopped = false;
        this.data = null;
        var formEls = document.form1.elements;
        if (dataField) {
            for (var i = 0; i < formEls.length - 1; i++) {
                if (formEls[i].name == dataField) {
                    this.data = formEls[i];
                    i = formEls.length + 1;
                }
            }
        }

        myTimer.prototype.go = function() {
            if (this.value > 0 && this.stopped == false) {
                this.value = (this.value - this.interval);
                if (this.data) {
                    this.data.value = this.value;
                }
                var current = this.value;
                this.OutputCntrl.innerHTML = this.Hours(current) + ':' + this.Minutes(current) + ':' + this.Seconds(current);
                this.currentTimeOut = setTimeout("Timer.go()", this.interval);
            }
            else {                
                alert('Time Out!');
                window.location('index.aspx');
            }

        }
        myTimer.prototype.stop = function() {
            this.stopped = true;
            if (this.currentTimeOut != null) {
                clearTimeout(this.currentTimeout);
            }
        }
        myTimer.prototype.Hours = function(value) {
            return Math.floor(value / 3600000);
        }
        myTimer.prototype.Minutes = function(value) {
            return Math.floor((value - (this.Hours(value) * 3600000)) / 60000);
        }
        myTimer.prototype.Seconds = function(value) {
            var hoursMillSecs = (this.Hours(value) * 3600000)
            var minutesMillSecs = (this.Minutes(value) * 60000)
            var total = (hoursMillSecs + minutesMillSecs)
            var ans = Math.floor(((this.value - total) % 60000) / 1000);

            if (ans < 10)
                return "0" + ans;

            return ans;
        }
    }           

</script> 
```

> Exam_paper.ascx

```
protected void btnSubmit_Click(object sender, EventArgs e)
    {
        lbTime.Text = ((Final_Paper)this.Page).message();
        foreach (ListViewItem item in paper_list.Items)
        {
            RadioButton ansA = (RadioButton)item.FindControl("ansA");
            RadioButton ansB = (RadioButton)item.FindControl("ansB");
            RadioButton ansC = (RadioButton)item.FindControl("ansC");
            RadioButton ansD = (RadioButton)item.FindControl("ansD");
            Label rightAns = (Label)item.FindControl("rightAns");

            if (ansA.Checked && rightAns.Text == "ansA")
            {
                a = a + 1;
            }
            else if (ansB.Checked && rightAns.Text == "ansB")
            {
                a = a + 1;
            }
            else if (ansC.Checked && rightAns.Text == "ansC")
            {
                a = a + 1;
            }
            else if (ansD.Checked && rightAns.Text == "ansD")
            {
                a = a + 1;
            }
            else
            {
                a = a + 0;
            }
        }

        marks = (float)2 * (float)a;

        addResult();

        Session.Remove("stud");
        if (Session["stud"] == null)
        {
            Response.Redirect("index.aspx");
        }            

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:16:56.273

使您的 btnSubmit 成为您的用户控件的公共属性，以便可以从您的 aspx 文件访问它，同时可以从客户端脚本访问它。这是一个小例子。

用户控制代码：

```
public partial class Sample : System.Web.UI.UserControl
{
    public Button SubmitButton
    { get { return this.btnSubmit; } set { this.btnSubmit = value; } }

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        //Do Something
    }
} 
```

用户控件 HTML：

```
<asp:Button ID="btnSubmit" runat="server" Text="Button" 
    onclick="btnSubmit_Click" /> 
```

ASPX：

```
<head runat="server">
    <script>
        setTimeout(function () {
            document.getElementById("<%=Sample1.SubmitButton.ClientID %>").click();
        }, 2000);
    </script>
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <uc1:Sample ID="Sample1" runat="server" />
    </div>
    </form>
</body>
</html> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:13:41.447

提交按钮在哪里都没关系。你只需要它的ID。然后，在超时调用按钮的单击方法。像这样的东西：

```
document.getElementById("mySubmitExamButtonId").click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:15:58.080

您可以添加一个隐藏按钮，然后附加 btnSubmit_click 事件。然后您可以使用 javascript 调用事件

```
__doPostBack('<%=btnSubmit.ClientID%>',"OnClick") 
```

# xslt - xslt 基于日期计算值

> ID：12082073
> 
> 赞同：1
> 
> 时间：2012-08-22T22:04:15.457
> 
> 标签：xslt

再会，

我有一个看起来像这样的 xml 文件：

```
<albums xmlns="http://www.someurl.com/schema">
    <album>
        <artist>Rush</artist>
        <name>Moving Pictures</name>
        <releaseDate>05-31-1981</releaseDate>
    <album>
</albums> 
```

我想要的是使用 xlst 显示艺术家、姓名以及自发布日期以来已有多少年。

```
<div id="recordInfo">
    <div class="col"><xsl:value-of select="/t:albums/t:album/t:artist"></div>
    <div class="col"><xsl:value-of select="/t:albums/t:album/t:name"></div>
    <!-- I want the value of 31 here -->
</div> 
```

有谁知道如何在 XSLT 中做到这一点？

TIA,

科森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:49:08.930

这是一个 XSLT 2.0 选项...

**XML 输入**

```
<albums xmlns="http://www.someurl.com/schema">
    <album>
        <artist>Rush</artist>
        <name>Moving Pictures</name>
        <releaseDate>05-31-1981</releaseDate>
    </album>
</albums> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:t="http://www.someurl.com/schema" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    exclude-result-prefixes="#all">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="albums">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="t:album">
        <div id="recordInfo">
            <xsl:apply-templates/>
        </div>
    </xsl:template>

    <xsl:template match="t:artist|t:name">
        <div class="col"><xsl:value-of select="."/></div>
    </xsl:template>

    <xsl:template match="t:releaseDate">
        <xsl:variable name="vOrigDate" select="tokenize(.,'-')"/>
        <xsl:variable name="vDate" select="xs:date(concat($vOrigDate[3],'-',$vOrigDate[1],'-',$vOrigDate[2]))" as="xs:date"/>
        <div class="col"><xsl:value-of select="floor(days-from-duration(current-date() - $vDate) div 365)"/></div>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<div id="recordInfo">
   <div class="col">Rush</div>
   <div class="col">Moving Pictures</div>
   <div class="col">31</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T02:55:24.027

**这种转变**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vTokens" select="tokenize(/*, '-')"/>
    <xsl:variable name="vDate" select=
     "string-join(($vTokens[3], $vTokens[1], $vTokens[2]), '-')"/>

 <xsl:template match="/*">
     <xsl:sequence select=
     "floor((current-date() - xs:date($vDate)) div xs:dayTimeDuration('P365D')) "/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<t>05-31-1981</t> 
```

**产生想要的正确结果**：

```
31 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T03:03:51.670

这个 XSLT 1.0 模板...

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:t="http://www.someurl.com/schema"
  exclude-result-prefixes="xsl t" >
<xsl:output method="xml" indent="yes"/>

<xsl:variable name="current-year" select="2012" />

<xsl:template match="/">
  <r>
    <xsl:apply-templates select="t:albums/t:album" />
  </r> 
</xsl:template>

<xsl:template match="t:album">
  <div id="recordInfo">
    <div class="col"><xsl:value-of select="t:artist" /></div>
    <div class="col"><xsl:value-of select="t:name" /></div>
    <div class="col"><xsl:value-of select="$current-year - substring(t:releaseDate,7)" /></div>
  </div> 
</xsl:template>

</xsl:stylesheet> 
```

...将产生此输出...

```
<r>
  <div id="recordInfo">
    <div class="col">Rush</div>
    <div class="col">Moving Pictures</div>
    <div class="col">31</div>
  </div>
</r> 
```

我使用了一个变量来存储日期。在实践中，您将使用一个函数来获取当前日期。哪个函数取决于 XSLT 版本和引擎。

# cuda - CUDA 中的多个纹理引用 - 在内核时使用

> ID：12082075
> 
> 赞同：2
> 
> 时间：2012-08-22T22:04:25.970
> 
> 标签：cuda, textures

我有一些数据要处理，每个块负责给定的数据子集。

由于我的应用程序的性质，我希望这些数据驻留在纹理内存中。但是，数据太大而无法放入单个纹理参考中。

如果我理解正确，我可以有多个纹理引用，但不能有纹理引用数组。

由于我需要处理每个块中的不同数据子集，因此我正在考虑（在内核中）做一些事情，例如

```
while(counter < 10000) {

 if(blockIdx.x == 0)
     foo = tex2D(tex0, x, y);

 else if(blockIdx.x == 1)
     foo = tex2D(tex1, x, y);

 ...

} 
```

但这不仅不好看，我也不确定我是否会遇到分歧问题。

做类似的事情

```
texture<int, 2, cudaReadModeElementType> ref;

(..)

/* kernel code from now on */

if(blockIdx.x == 0)
    ref = tex0;

else if(blockIdx.x == 1)
    ref = tex1;

...

while(counter < 10000)
    foo = tex2D(ref, x, y) 
```

似乎也不完全正确，因为我相信纹理引用是全局的，而不是线程私有的。

还有其他选择吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:31:57.070

如果可能，您应该尝试将纹理数据保存在单个纹理中，并根据需要对坐标应用一些变换以适应硬件限制。

否则，您可以通过谓词从多个纹理引用中进行选择。只有非谓词指令才会真正生成纹理内存引用。

The CUDA Handbook 中的 tex1dfetch_big.cu 示例显示了如何执行此操作，以增加硬件支持的 27 位索引之外的寻址。

[https://github.com/ArchaeaSoftware/cudahandbook/blob/checkpoint/texturing/tex1dfetch_big.cu](https://github.com/ArchaeaSoftware/cudahandbook/blob/checkpoint/texturing/tex1dfetch_big.cu)

# .net - 使用 .NET 4.5 连接到 SQL Server Azure 时发生握手异常

> ID：12082077
> 
> 赞同：14
> 
> 时间：2012-08-22T22:04:32.947
> 
> 标签：.net, sql-server, entity-framework, azure, azure-sql-database

所以我打开了一些大约2个月没有动过的代码。

上次我打开应用程序时，所有单元测试都通过了。现在没有代码更改，我的所有数据单元测试都失败并出现以下错误：

> 初始化方法 PerTrac.Pictor.Data.Test.RequestLogRepositoryShould.CreateLog 抛出异常。System.Data.EntityException：System.Data.EntityException：基础提供程序在打开时失败。---> System.Data.SqlClient.SqlException: 与服务器建立连接成功，但在登录前握手过程中发生错误。（提供者：SSL 提供者，错误：0 - 等待操作超时。）---> System.ComponentModel.Win32Exception：等待操作超时。

我意识到存在与此类似的问题，但这些解决方案对我的情况没有任何影响。

有没有人特别遇到过实体框架和 SQL Azure 的这个错误？

我应该注意，我可以使用相同的凭据毫无问题地从 SSMS 连接。我没有在禁用协议上设置强制加密，并且我已经多次重置本地 IIS。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T18:02:14.457

很可能您的计算机上安装了一些应用程序，该应用程序使用已弃用的网络协议来拦截网络流量。正确的解决方案是禁用或卸载这些应用程序。

运行命令行命令**netsh WinSock Show Catalog >> winsock.txt**然后**记事本winsock.txt**打开文件。

查看返回的每个**Winsock 目录提供程序条目**。如果**服务标志**值设置了 0x20000 位，则提供程序使用 IFS 句柄并且可以正常工作。如果“服务标志”0x20000 位被清除（未设置），则它是非 IFS BSP 或 LSP，可能是一个问题。尝试禁用此应用程序并让我们知道它是否有效。

查看文本文件结果时，请忽略“名称空间提供者条目”。他们不是问题。

下面是 netsh WinSock Show Catalog 文件输出的干净系统的样例。

```
Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        MSAFD Tcpip [TCP/IP]
Provider ID:                        {E70F1AA0-AB8B-11CF-8CA3-00805F48A192}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1001
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x20066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        MSAFD Tcpip [UDP/IP]
Provider ID:                        {E70F1AA0-AB8B-11CF-8CA3-00805F48A192}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1002
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        MSAFD Tcpip [RAW/IP]
Provider ID:                        {E70F1AA0-AB8B-11CF-8CA3-00805F48A192}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1003
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        3
Protocol:                           0
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        MSAFD Tcpip [TCP/IPv6]
Provider ID:                        {F9EAB0C0-26D4-11D0-BBBF-00AA006C34E4}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1004
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x20066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        MSAFD Tcpip [UDP/IPv6]
Provider ID:                        {F9EAB0C0-26D4-11D0-BBBF-00AA006C34E4}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1005
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        MSAFD Tcpip [RAW/IPv6]
Provider ID:                        {F9EAB0C0-26D4-11D0-BBBF-00AA006C34E4}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1006
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        3
Protocol:                           0
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        RSVP TCPv6 Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1007
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x22066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        RSVP TCP Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1008
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x22066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        RSVP UDPv6 Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1009
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x22609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider
Description:                        RSVP UDP Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1010
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x22609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        MSAFD Tcpip [TCP/IP]
Provider ID:                        {E70F1AA0-AB8B-11CF-8CA3-00805F48A192}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1001
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x20066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        MSAFD Tcpip [UDP/IP]
Provider ID:                        {E70F1AA0-AB8B-11CF-8CA3-00805F48A192}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1002
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        MSAFD Tcpip [RAW/IP]
Provider ID:                        {E70F1AA0-AB8B-11CF-8CA3-00805F48A192}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1003
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        3
Protocol:                           0
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        MSAFD Tcpip [TCP/IPv6]
Provider ID:                        {F9EAB0C0-26D4-11D0-BBBF-00AA006C34E4}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1004
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x20066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        MSAFD Tcpip [UDP/IPv6]
Provider ID:                        {F9EAB0C0-26D4-11D0-BBBF-00AA006C34E4}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1005
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        MSAFD Tcpip [RAW/IPv6]
Provider ID:                        {F9EAB0C0-26D4-11D0-BBBF-00AA006C34E4}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1006
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        3
Protocol:                           0
Service Flags:                      0x20609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        RSVP TCPv6 Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1007
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x22066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        RSVP TCP Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1008
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        1
Protocol:                           6
Service Flags:                      0x22066
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        RSVP UDPv6 Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1009
Version:                            2
Address Family:                     23
Max Address Length:                 28
Min Address Length:                 28
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x22609
Protocol Chain Length:              1

Winsock Catalog Provider Entry
------------------------------------------------------
Entry Type:                         Base Service Provider (32)
Description:                        RSVP UDP Service Provider
Provider ID:                        {9D60A9E0-337A-11D0-BD88-0000C082E69A}
Provider Path:                      %SystemRoot%\system32\mswsock.dll
Catalog Entry ID:                   1010
Version:                            2
Address Family:                     2
Max Address Length:                 16
Min Address Length:                 16
Socket Type:                        2
Protocol:                           17
Service Flags:                      0x22609
Protocol Chain Length:              1

Name Space Provider Entry
------------------------------------------------------
Description:                        Network Location Awareness Legacy (NLAv1) Namespace
Provider ID:                        {6642243A-3BA8-4AA6-BAA5-2E0BD71FDD83}
Name Space:                         15
Active:                             1
Version:                            0

Name Space Provider Entry
------------------------------------------------------
Description:                        E-mail Naming Shim Provider
Provider ID:                        {964ACBA2-B2BC-40EB-8C6A-A6DB40161CAE}
Name Space:                         37
Active:                             1
Version:                            0

Name Space Provider Entry
------------------------------------------------------
Description:                        PNRP Cloud Namespace Provider
Provider ID:                        {03FE89CE-766D-4976-B9C1-BB9BC42C7B4D}
Name Space:                         39
Active:                             1
Version:                            0

Name Space Provider Entry
------------------------------------------------------
Description:                        PNRP Name Namespace Provider
Provider ID:                        {03FE89CD-766D-4976-B9C1-BB9BC42C7B4D}
Name Space:                         38
Active:                             1
Version:                            0

Name Space Provider Entry
------------------------------------------------------
Description:                        Tcpip
Provider ID:                        {22059D40-7E9E-11CF-AE5A-00AA00A7112B}
Name Space:                         12
Active:                             1
Version:                            0

Name Space Provider Entry
------------------------------------------------------
Description:                        NTDS
Provider ID:                        {3B2637EE-E580-11CF-A555-00C04FD8D4AC}
Name Space:                         32
Active:                             1
Version:                            0

Name Space Provider Entry
------------------------------------------------------
Description:                        WindowsLive NSP
Provider ID:                        {4177DDE9-6028-479E-B7B7-03591A63FF3A}
Name Space:                         12
Active:                             1
Version:                            1

Name Space Provider Entry
------------------------------------------------------
Description:                        WindowsLive Local NSP
Provider ID:                        {229F2A2C-5F18-4A06-8F89-3A372170624D}
Name Space:                         19
Active:                             1
Version:                            1

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        Network Location Awareness Legacy (NLAv1) Namespace
Provider ID:                        {6642243A-3BA8-4AA6-BAA5-2E0BD71FDD83}
Name Space:                         15
Active:                             1
Version:                            0

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        E-mail Naming Shim Provider
Provider ID:                        {964ACBA2-B2BC-40EB-8C6A-A6DB40161CAE}
Name Space:                         37
Active:                             1
Version:                            0

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        PNRP Cloud Namespace Provider
Provider ID:                        {03FE89CE-766D-4976-B9C1-BB9BC42C7B4D}
Name Space:                         39
Active:                             1
Version:                            0

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        PNRP Name Namespace Provider
Provider ID:                        {03FE89CD-766D-4976-B9C1-BB9BC42C7B4D}
Name Space:                         38
Active:                             1
Version:                            0

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        Tcpip
Provider ID:                        {22059D40-7E9E-11CF-AE5A-00AA00A7112B}
Name Space:                         12
Active:                             1
Version:                            0

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        NTDS
Provider ID:                        {3B2637EE-E580-11CF-A555-00C04FD8D4AC}
Name Space:                         32
Active:                             1
Version:                            0

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        WindowsLive NSP
Provider ID:                        {4177DDE9-6028-479E-B7B7-03591A63FF3A}
Name Space:                         12
Active:                             1
Version:                            1

Name Space Provider Entry (32)
------------------------------------------------------
Description:                        WindowsLive Local NSP
Provider ID:                        {229F2A2C-5F18-4A06-8F89-3A372170624D}
Name Space:                         19
Active:                             1
Version:                            1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T01:28:40.730

The key to understand the problem here is the provider and in your case it is "SSL Provider" and the main problem is that connection time out. If problem was related with "TCP Provider" there could be several reasons related with network etc however in your case it is a security related issue within the connection framework.

Next step to investigate this problem is that on the same machine, you can connect from SSMS to same SQL Database however not from IIS which means the IIS application process is not able to get proper certificate to create the SSL tunnel to create the successful connection. It is possible that you have some log written System Event log so please check there.

Because you are using Entity Framework and depend on EF version there are some changed in the connection string so verify if that is what you have:

```
<add name="MyDatabaseModelEntities" connectionString="metadata=res://*/MyDBModel.csdl|res://*/MyDatabaseModel.ssdl|res://*/MyDatabaseModel.msl;provider=System.Data.SqlClient;provider connection string="data source=abcdefg123.database.windows.net;initial catalog=MyDatabase;persist security info=True;user id=MyDatabaseUser@abcdefg123;password=p@$$w0rd;multipleactiveresultsets=True;Trusted_Connection=False;Encrypt=True;App=EntityFramework"" providerName="System.Data.EntityClient" /> 
```

Finally if you are using EF 4.3.1 and connecting to SQL Database please have a look at [this](http://www.codeproject.com/Articles/418671/Using-the-Entity-Framework-in-ASP-NET-MVC) article and check if you have similar configuration.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:00:49.313

另一个提示：SQL 服务器可能内存不足。我遇到了这个错误，当我检查 SQL 服务器计算机时，SQL 服务使用了 15G 内存，总共 16 个。所以重启服务来修复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T22:02:37.687

就我而言，在尝试修复我的 VS2012RC 几次但没有运气后，我偶然发现了[这个链接](http://connect.microsoft.com/VisualStudio/feedback/details/729323/visual-studio-11-beta-installation-disabled-my-abillity-to-connect-remote-ms-sql-server-but-not-local-databases)，其中一条评论与名为“sendori”的第三方软件有关。我卸载了它，我的世界一切都恢复了正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T18:00:53.993

[此问题在此处](https://connect.microsoft.com/VisualStudio/feedback/details/729323/visual-studio-11-beta-installation-disabled-my-abillity-to-connect-remote-ms-sql-server-but-not-local-databases#tabs)的 microsoft connect 站点中报告。解决方案[在这里](http://support.microsoft.com/kb/2568167)可用。您需要删除非 IFS LSP 安装的 Winsock Catalog Provider。有时您的机器上已经安装了一些软件可能会导致问题。为了删除非 IFS LSP，首先在命令提示符下运行以下命令以查看导致问题的应用程序（[参考](http://www.herongyang.com/Windows/Winsock-netsh-winsock-show-catalog-LSP.html)）

```
netsh winsock show catalog > LSP.txt 
```

查看输出并分析导致问题的应用程序并将其卸载。希望它能解决这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T07:48:46.103

我在 SSMS 2012 上遇到了同样的问题，但在 SSMS 2008 上连接到同一个远程服务器的同一个盒子上都可以正常工作。

Moca.io 代理给我带来了麻烦。已卸载，现在一切正常。（“删除非 IFS LSP”）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-01T17:51:25.220

问题最终成为vs11 beta。

如果您遇到此问题，您需要执行以下操作：

1) 卸载 vs11 beta 和 .NET 4.5 beta

2）重新安装.NET 4.0

再次观看一切正常！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-28T15:11:27.977

有同样的问题。就我而言，卸载 T-Mobile Web 'n Walk Manager 解决了问题。它的软件通过 sim 卡 Josip 建立移动连接到互联网

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-15T17:26:51.070

如果您使用点“。” 或部分服务器名称（不带域名）作为数据源，请尝试使用实际的 SQL Server 实例名称和完整的服务器名称。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-26T17:20:52.540

我有这个确切的错误。通过将服务器设置为不是 XXXXXXXXX 而是设置为完整的域名 XXXXXXXXX.YYY.com 来解决

然后出现一条消息说不支持加密连接没有。

当我做一切工作。

# jsf - Primefaces TreeTable - 如何获取所选节点的索引？

> ID：12082080
> 
> 赞同：2
> 
> 时间：2012-08-22T22:04:47.760
> 
> 标签：jsf, primefaces, jsf-2, tree

我正在使用 primefaces 树表，并尝试在每一行上创建按钮，以便用户可以重新排序树表中的元素。

例如，如果我有一个树表，其中有 3 个节点都在同一级别，并且树表中的这三个节点中的每一个都有一个“向上”按钮，如果在其中一个节点上单击向上按钮，我想要那个节点向上移动（基本上重新排序节点）。

如何获取所选节点的索引？

```
for(int i = 0; i < selectedNode.getParent().getChildren().size(); i++) {

    // how can i compare the index of the current child in the loop to the selected child?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:27:07.457

它不干净，但你可以

1.  使用`selection`table 上的属性，获取 backing bean 中所选节点的句柄，然后

2.  使用`indexOf`您支持的方法（我假设）`List`，获取项目的索引。primefaces 的动态生成的数据绑定项的顺序通常遵循支持集合的索引/排序，因此您可以信任索引。

或者，您可以尝试使用该`<p:ajax/>`组件来设置所选选项并按照上述方式进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T07:45:20.200

您可以使用“getRowKey()”方法获取选定的节点索引

也许：

```
selectedNode.getRowKey() 
```

而且，如果 U 想要计数节点大小 U 可以使用方法“getChildCount()”，也许：

```
selectedNode.getParent().getChildCount() 
```

# java - 如何将 Java 字节数组直接发送到 MATLAB 矩阵？

> ID：12082083
> 
> 赞同：4
> 
> 时间：2012-08-22T22:05:07.480
> 
> 标签：java, matlab

我有一个 Java GUI，它将视频帧转换为字节数组，并将它们直接保存到原始输出文件中。然后我可以将此文件加载到 MATLAB 中并执行我的信号处理算法。但是，原始文件最终大约为 1GB，并且需要很长时间才能在 MATLAB 中打开。

目前，我在 SwingWorker 内使用 Process 来运行 MATLAB 实例并让算法执行并生成结果。这一切正常，但是将 1GB 原始文件加载到 MATLAB 中非常慢，大约需要 30 秒。

我想知道是否有直接将Java字节数组传递给MATLAB？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T01:16:21.390

Matlab 运行自己的 Java 虚拟机，因此您可以[在其中调用 Java 类](http://www.mathworks.com/support/solutions/en/data/1-195EX/index.html?product=ML&solution=1-195EX)并[接收从调用 java 类的方法返回的 java 对象](http://www.mathworks.com/help/techdoc/matlab_external/f6671.html)。在这种情况下，您的字节数组将直接转换为 uint8 数组。

根据 JVM 和与 Java 程序的交互约束，这可能是传输数据的最简单方法。

# android - 如何检索 facebook SSO 的 apk 密钥哈希？

> ID：12082084
> 
> 赞同：1
> 
> 时间：2012-08-22T22:05:15.170
> 
> 标签：android, facebook, openssl, single-sign-on

我在 Goole 的 Play Store 上部署了一个使用 Facebook SSO 登录的应用程序。主要问题是我在提交之前没有检查过 keyhash，并且我不再拥有用于构建该版本的计算机（因此没有 debug.keystore，但我仍然拥有我签署 apk 的证书）。

我尝试解压缩 APK，转到 META-INF 并提取文件 CERT.RSA... 从那里我使用了命令：keytool -printcert -file CERT.RSA | openssl sha1 -二进制 | openssl base64

但输出是错误的（这是我在 facebook 应用程序设置中已经拥有的 keyhash）。

我想避免仅针对该问题进行更新，考虑到我可以通过在 facebook 应用程序设置中设置正确的 keyhash 来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:38:03.483

好的，问题是证书内的别名。找到合适的使用，一切都像一个魅力。

最后的命令行是：

```
keytool -exportcert -alias user_alias -keystore dev_certificate | openssl sha1 -binary | openssl base64 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T00:27:52.680

如果您登录 developer.facebook.com 并查看您的应用程序（点击顶部的“应用程序”）

选择您要为其查找哈希键的应用程序（从左侧开始）

单击设置面板中的“编辑设置”。

向下滚动直到你看到“Native Android App”面板，在那里你应该找到“Android Key Hash”

我希望这能解决你的问题。

# android - android facebook SDK 哪些社交对话框可用于 android

> ID：12082094
> 
> 赞同：0
> 
> 时间：2012-08-22T22:05:47.290
> 
> 标签：android, facebook, dialog

我正在尝试使用 Facebook SDK 和 Facebook 对象，以便在我的 android 应用程序中使用 facebook 的对话框。

现在我发现“提要”对话框在这种显示类型下工作，但“发送”和“朋友”没有..

有人可以提供某种可用于 android 平台的 Facebook 对话框列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:06:30.783

[在此处](https://developers.facebook.com/docs/reference/androidsdk/dialog/)查看官方文档。

对话框有三个参数，动作参数决定了对话框的类型。

引用：

> action - 要调用的对话框类型。目前支持的方法是 feed、apprequests 和 oauth。

# mysql - 使用 CodeIgniter 中的活动记录类在一个查询中计数、分组、排序？

> ID：12082096
> 
> 赞同：1
> 
> 时间：2012-08-22T22:06:04.380
> 
> 标签：mysql, activerecord

我正在使用 CodeIgniter，我的数据库中有 2 个表。

第一个称为**大洲**，如下所示：

```
 id     | continent_name
    -----------------------
    1      | Africa
    2      | Antarctica
    3      | Asia
    4      | Australia
    5      | Europe
    6      | North America
    7      | South America 
```

第二个称为**状态**，如下所示：

```
 id | continent_id  | country_name
        -----------------------------------
        1  | 5             | Denmark
        2  | 1             | Angola
        3  | 7             | Peru
        4  | 5             | Germany
        5  | 7             | Venezuela
        6  | 1             | Egypt
        7  | 5             | Spain
        8  | 5             | France
        9  | 7             | Argentina
        10 | 6             | Canada 
```

现在我想要一个按continent_id 分组的有序列表，并从大多数记录（在我的情况下为欧洲）到最少的（亚洲）结果排序，如下所示：

```
Europe (4)
South America (3)
Africa (2)
North America (1)
Asia (0) 
```

记录的数量并不重要，我将在里面使用另一个 foreach 循环。但我需要以某种方式在一个查询中实现计数、分组和订购活动记录功能：

到目前为止，我的模型中有这个：

```
function get_top_continents() {

            $q = $this->db->from('states')
                          ->join('continents', 'states.continent_id = continents.id')
                          ->group_by('continent_id')
                          ->get();
            return $q;

    } 
```

但是我还需要根据组中的项目数对结果进行排序。

如何**按条件进行此类排序**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:05:28.283

```
$q = $this->db->select('continents.id as continent_id,max(continents.continent_name) as   continent_name, COUNT(states.id) as states_count',FALSE)
                      ->from('continents')
                      ->join('states', 'continents.id=states.continent_id','left')
                      ->group_by('continents.id')
                      ->order_by('states_count', 'desc');
                      ->get(); 
```

# java - 如何防止 TCP 数据包被丢弃？

> ID：12082098
> 
> 赞同：0
> 
> 时间：2012-08-22T22:06:16.613
> 
> 标签：java, node.js, tcp, network-programming, udp

我正在我的 Android 手机上创建一个程序，将相机的输出发送到同一网络上的服务器。这是我的Java代码：

```
camera.setPreviewCallbackWithBuffer(new Camera.PreviewCallback() {

    public void onPreviewFrame(byte[] data, Camera cam) {

        try {
            socket = new Socket("XXX.XXX.XXX.XXX", 3000);
            out = socket.getOutputStream();
            out.write(data);
            socket.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

        camera.addCallbackBuffer(data);
        } 
```

服务器是 NodeJS 服务器：

```
time = 0

video_server.on 'connection', (socket) ->
    buffer = []
    socket.on 'data', (data) ->
            buffer.push data
    socket.on 'end', ->
            new_time = (new Date()).getTime()
            fps = Math.round(1000/(new_time - time)*100)/100
            console.log fps
            time = new_time

            stream = fs.createWriteStream 'image.jpg'
            stream.on 'close', ->
                    console.log 'Image saved.', fps
            stream.write data for data in buffer
            stream.end() 
```

我的终端显示大约 1.5 fps (5 Mbps)。我对网络编程知之甚少，但我知道绝对应该有足够的带宽。每张图像为 640x480x1.5，速度为 18 fps，约为 63 Mbps。本地网络应该很容易处理这个问题，但是我在 Android 中的调试器给了我很多“连接被拒绝”的消息。

任何有助于解决我的不良网络做法的帮助都会很棒。（我稍后会进行图像压缩——但现在我需要优化这一步）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T02:30:12.907

你已经设计了这个系统，使它必须做的工作比它应该做的要多很多倍。您需要为传输的每个帧建立和拆除连接。这不仅会扼杀您的吞吐量，还会耗尽您的资源。

使用合理的设计，传输帧所需的只是发送和接收帧数据。在您的设计中，对于每一帧，都必须建立一个 TCP 连接（3 个步骤），必须发送和接收帧数据，并且必须断开 TCP 连接。更糟糕的是，在连接关闭发生之前，接收器无法知道它已接收到所有帧数据。所以这不能隐藏在后台。

设计一个合理的协议，问题就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:42:02.027

这真的有效吗？我看不到您绑定到服务器上端口 3000 的位置。

无论如何，如果这是一个视频流，您可能应该使用 UDP 而不是 TCP。在 UDP 中，可能会丢弃数据包，但对于视频流，这可能不会引起注意。由于交换的消息数量，UDP 通信所需的开销比 TCP 少得多。TCP 包含很多“确认”，以确保每条数据都到达目的地；UDP 不在乎，因此发送的数据包更少。根据我的经验，基于 UDP 的代码通常不如基于 TCP 的代码复杂。

_瑞安

# php - 在搜索词的字母位置前后选择 n 行

> ID：12082103
> 
> 赞同：0
> 
> 时间：2012-08-22T22:06:58.130
> 
> 标签：php, mysql

**困境：**我有一张桌子，里面有几百行。我想提交一个带有特定搜索词的 mysql_query，其中查询查找该词在列中按字母顺序排列的位置，然后返回放置前的 n 行和放置后的 n 行。

**示例：**假设我有一个如下所示的列（为了空间，我将其水平放置，但为了论证，我们假设这是列值的垂直列表）：

```
|apple|asus|adder|billy|cat|dog|zebra|computer|mouse|cookie|donkey| 
```

如果我要对 term 运行查询`courage`，假设 n = 3，我希望它按此顺序返回以下行：

```
|cat|computer|cookie|dog|donkey|mouse| 
```

按字母顺序，这个词`courage`会出现在这些结果的中间，我们会遇到前面的 3 个条目和后面的 3 个条目。

**语言注释：**我使用的是 php 和 mysql。我没有任何代码要显示，因为我不确定这是否需要在`where`子句中，或者它是否需要子查询，或者是否需要在 php 中对变量进行处理，然后再将其传递给查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:11:13.690

您可以尝试两个 SELECTS 的 UNION。或者手动进行。

```
SELECT term FROM table WHERE term < 'courage' ORDER BY term DESC LIMIT 3; 
```

将返回 cookie、computer 和 cat（按降序排列）。

然后 SELECT term FROM table WHERE term >= 'courage' ORDER BY term ASC LIMIT 3;

将返回狗、驴和老鼠。

在 PHP 中，你得到两组，反转第一组并加入。

一个完全 SQL 的解决方案可能是

```
SELECT term FROM (
    SELECT term FROM table WHERE term < 'courage' ORDER BY term DESC LIMIT 3 )
    UNION
    SELECT term FROM table WHERE term >= 'courage' ORDER BY term ASC LIMIT 3 )
) ORDER BY term; 
```

# python - 处理 (1) 一种对象类型的一般属性和 (2) 该对象实例的单个属性的最 Pythonic 方式

> ID：12082104
> 
> 赞同：1
> 
> 时间：2012-08-22T22:07:00.910
> 
> 标签：python, class, coding-style

首先是一个一般性的解释，然后是我实际工作的内容：假设你有一组苹果。某些属性可以共享，例如`type = "Green Apple"`and `picked_date = "Aug 12 2012"`，但其他数据在苹果之间可能不同，例如`is_bruised`and `weight`or `size`。*在苹果之间共享可编辑*值的最pythonic方法是什么，例如`type`组中的每个苹果都有单独的属性？来自`C`, `C++`，我的第一直觉是一个通用结构，每个苹果的结构都有一个指向通用结构的指针，因为每个苹果实例包含组信息似乎很愚蠢，因为如果`type = "Red Apple"`我愿意，我必须迭代尽管所有的苹果都要编辑他们的`type`值，这是对编程能力的浪费。

在实际代码中，在我当前的工作项目中，我目前正在编写一个 git 脚本，以帮助以对我的公司有意义的方式解析输出。我一直在阅读 python 中的 (a) 列表、(b) 元组、(c) 字典和 (d) 类，我真的一直在努力找出表示这些数据的最佳方式。

具体来说，我正在处理 git 提交，我关心两种类型的值：所有提交之间共享的通用属性，例如“我是否打印出提交的作者？”，以及特定属性，例如“提交 x 有作者 y”。我目前的解决方案不优雅：

```
class Commit(object):
    def __init__(self, author="", committer="", date="", issue="",
                 instruction="", message="", review="", sha="", short=""):
        self.author = author     
        self.committer = committer   
        self.date = date  
        self.instruction = instruction         
        self.issue = issue
        self.message = message
        self.review = review           
        self.sha = sha
        self.short = short 
```

此类包含与特定提交关联的数据。现在，所有提交的数据都是这样存储的：

```
 Attribute = namedtuple('Attribute', ['display', 'critical'])

 commit_attr = {'author': Attribute(display = True, critical = True),
                'committer': Attribute(display = True, critical = True),
                'date': Attribute(display = False, critical = False),
                'instruction': Attribute(display = True, critical = False),
                'issue': Attribute(display = True, critical = False),
                'message': Attribute(display = True, critical = False),
                'review': Attribute(display = True, critical = False),
                'sha': Attribute(display = True, critical = True),
                'short': Attribute(display = True, critical = True)} 
```

这是一个带有字段命名元组的字典。“Critical”表示提交中是否需要该字段才能显示，display 用于确定是否应该打印它。

这是我的问题：我知道python中的相关数据应该以连贯的方法分组，但我不知道如何在这里做到：我可以有一个“指针”，比如`self.attr = commit_attr`在`Commit()`类中，但这不是非常干净，并且将取决于该对象保持其地址，即可变，否则如果我更改通用属性的值，它将不再与`Commit()`该类关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:15:16.433

我不完全确定这是否会对您有所帮助，但 Python 具有类属性，这些属性在类实例之间共享：

```
>>> class A(object):
...   foo = 'bar'  # Notice that this isn't in an __init__ function definition
... 
>>> a = A()        # Just creating two distinct instances of A
>>> b = A()
>>> A.foo = 'baz'  # Now, I'm setting the class attribute
>>> b.foo
'baz'              # Notice how all instances of A changed
>>> a.foo
'baz'
>>> 
```

编辑类属性会立即影响所有实例。

# ruby - 尝试使用现有 git 存储库上传 Sinatra 应用程序时，“Heroku 推送被拒绝，未检测到 Cedar 支持的应用程序”

> ID：12082116
> 
> 赞同：4
> 
> 时间：2012-08-22T22:07:45.037
> 
> 标签：ruby, git, heroku, sinatra

我的个人网站有一个现有的 git 存储库，我将其移植到 Sinatra（主要用于模板，它是一个静态站点）。我不想丢失/重置这个 git 存储库。

当我尝试推送到 Heroku 时，出现以下错误。我有一个 config.ru 文件、一个 Gemfile 和一个 Gemfile.lock，以及 Sinatra 的其他一些东西。运行`rackup`工作，运行`bundle exec rackup`工作，我没有从 Heroku 收到任何关于缺少依赖项的警告。

我错过了什么吗？如果有帮助，我可以发布我网站的目录结构（尽管它是封闭的）。

```
~/Repos/website ➜ gp heroku master
Counting objects: 2836, done.
Compressing objects: 100% (2669/2669), done.
Writing objects: 100% (2836/2836), 3.48 MiB | 252 KiB/s, done.
Total 2836 (delta 481), reused 2117 (delta 155)

-----> Heroku receiving push
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:APP_NAME_HERE.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:APP_NAME_HERE.git' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:41:35.150

Cedar 应用程序*应该*识别该`config.ru`文件并为您创建一个 Web 进程，因此 git 可能无法跟踪某些重要文件。检查`config.ru`,`Gemfile`并且`Gemfile.lock`都已提交（您可以使用`git status`，但请注意，它不会为忽略的文件输出任何内容，因此您还应该检查您的`.gitignore`文件）。

如果所有文件都已提交，您还可以尝试在`Procfile`. 有关更多信息，请参阅 Heroku 文档：

*   [Ruby 入门：使用 Procfile 声明进程类型](https://devcenter.heroku.com/articles/ruby#declare-process-types-with-procfile)
*   [使用 Procfile 声明和扩展进程类型](https://devcenter.heroku.com/articles/procfile)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T05:59:58.023

问题解决了。我在一个 git 分支上工作，特别是为了 Heroku/Sinatra 支持，结果我正在运行`git push heroku master`，它将本地 master 推送到远程 master。主分支没有有效的 Heroku 应用程序。我以为它会将当前本地分支推送到远程主分支，但事实并非如此。`git push sinatra:master`解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T03:21:42.963

对于那些发现接受的答案不能解决他们的问题的人，这个相关问题可能会提供解决方案：[“Heroku 推送被拒绝，没有检测到 Cedar 支持的应用程序”当尝试使用现有的 git 存储库上传 Sinatra 应用程序时](https://stackoverflow.com/questions/12082116/heroku-push-rejected-no-cedar-supported-app-detected-when-trying-to-upload-a)

# ruby-on-rails - 渲染：更新做|页面| Rails3.X 不能正常工作

> ID：12082121
> 
> 赞同：0
> 
> 时间：2012-08-22T22:08:16.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rjs

我的 routes.rb 中有以下内容：

```
 match 'admins/approve' => 'admins#approve', :as => :admins_approve, :method => :post 
```

在我的 admins_controller.rb 我有：

```
def approve
  render :update do |page|
      page << "alert(" + params[:note] + ");"  
  end           
end 
```

在我的管理员/index.html.erb 中：

```
<% @users.each do |user| %>
  <tr>
    <td class= "action_add_note">
        <%= form_tag admins_approve_path, :id => "form_note_#{user.id}", :remote=> true  do %> 
          <%= text_area_tag 'note' %>
        <% end %>
        <%= link_to_function content_tag(:i, "", :class => 'icon-ok' ), 
                  "$('#form_note_#{user.id}').submit();", :class => "btn"%>
    </td>
  </tr>
<% end %> 
```

我知道我可以使用按钮代替功能，但这里不是这种情况，无论如何，每当我提交它时，我都会以某种方式得到错误的路径并出现以下错误：

```
ActionView::MissingTemplate (Missing template admins/update, application/update with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee]}. Searched in:
* "/Users/Apple/code/rails_pp/app/views"
* "/Users/Apple/.rvm/gems/ruby-1.9.2-p180/gems/twitter-bootstrap-rails-2.1.1/app/views"
app/controllers/admins_controller.rb:11:in `approve'

Rendered /Users/Apple/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.2.6/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.6ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:43:56.137

取出 link_to_function 并将其添加到您的 form_tag

```
<%= text_area_tag 'note' %>
<%= submit_tag "Submit %>
 <% end %> 
```

在您的管理控制器中

```
def approve
  @note = params[:note]
  current_user.update_attribute(:note, @note)
  respond_to do |format|
    format.js
  end
end 
```

然后创建一个approve.js.erb 文件

```
 alert("<%= j(@note) %>"); 
```

# cakephp - CakePHP 2.2.1 - 在表单上显示 CakePHP 错误 - 自定义验证

> ID：12082124
> 
> 赞同：0
> 
> 时间：2012-08-22T22:08:25.780
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

手动验证表单时出现一系列错误：

```
 $this->CalculationElement->set($this->request->data);
        if($this->CalculationElement->validates()){
            WHEN OK...

        }else{
        debug($this->CalculationElement->invalidFields());
            die;
        } 
```

所以，使用 ->invalidFields() 我得到了一系列错误......我怎样才能在输入的底部显示它们，就像 CakePHP 在 $this->Model->save(); 上所做的那样？

我可以 $this->Model->set() 它们，但这又是 VIEW 中的一系列错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:30:30.740

试试这个代码：

```
if ($this->CalculationElement->validates()){
    //WHEN OK...
}
else
{
    $this->validateErrors($this->CalculationElement);
    $this->render();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:22:44.633

在您的情况下，您似乎必须在视图中手动添加所有类和消息。

输入本身在输入之后立即获得类“form-error”，您必须使用类“error-message”创建一个div

```
<div class="error-message">$_your_error_message_from_the_array</div> 
```

我认为这应该可以解决问题。

# javascript - 在内容刷新或更新时调整 iframe 的大小

> ID：12082125
> 
> 赞同：0
> 
> 时间：2012-08-22T22:08:34.573
> 
> 标签：javascript, jquery

我有一个 iframe，我想在内容自动刷新（每隔几分钟）或用户与之交互时调整其大小以匹配其内容。虽然内容在同一个域中，但我很难修改内容。理想情况下，iframe 会自行调整到其内容的大小。

当前仅调整一次大小的代码：

```
<iframe id="ganglia-frame" src="ganglia.url" width="100%" height="500%">
    blah not supported blah
</iframe>

<script language="Javascript">
    function setIframeHeight(iframe) {
        if (iframe) {
            var iframeWin = iframe.contentWindow ||
                    iframe.contentDocument.parentWindow;
            if (iframeWin.document.body) {
                iframe.height =
                        iframeWin.document.documentElement.scrollHeight ||
                        iframeWin.document.body.scrollHeight;
            }
        }
    }

    $(window).load(function () {
        setIframeHeight(document.getElementById('ganglia-frame'));
    });
</script> 
```

相关问题：[调整 iframe 的宽度高度以适应其中的内容](https://stackoverflow.com/questions/819416/adjust-width-height-of-iframe-to-fit-with-content-in-it)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:59:08.377

您需要做的是设置一个计时器并在片刻后检查 iFrame 大小。您可能需要多次检查，因为并非所有浏览器都会立即返回正确的大小。

此方法仅适用于同域 iFrame。

将函数绑定到 iFrame onload 事件，并在执行时检查 iFrame 的高度。如果没有找到高度，请在稍后安排另一次检查。

```
var iFrameSizeCount = 0;
var onloadFunction = function(event){
    var contentHeight = document.getElementById('iFrameId').contentWindow.document.body.offsetHeight;

    if(contentHeight == 0){
         // Schedule a recheck in a few moments
         iFrameSizeCount++; // we keep a count of how many times we loop just in case
         if(iFrameSizeCount  < 10){ // after a while we have to stop checking and call it a fail
             setTimeout(function(){ onloadFunction(event); }, 200);
             return false;
         }
         else {
              contentHeight  = 100; // eventually if the check fails, default to a fixed height. You could possibly turn scrolling to auto/yes here to give the iFrame scrollbars.
         }
     }
    contentHeight += 30; // add some extra padding (some browsers give a height that's slightly too short)

    document.getElementById('iFrameId').style.height = contentHeight + 'px';
} 
```

然后将事件绑定到 iFrame 的 onload 事件（无论您想要什么）：

“scrolling=auto”很有用，以防调整大小失败，至少它们有滚动条。如果 iFrame 重新加载，则会触发 onload 事件，因此如果他们单击了其中的链接，则该事件很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T19:32:39.977

我对这个 jQuery 插件很幸运 - [https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

# mysql - 计算比例mysql

> ID：12082128
> 
> 赞同：0
> 
> 时间：2012-08-22T22:08:53.297
> 
> 标签：mysql, count

假设我有下表，

我想选择以开头的所有名称与`A`以开头的所有名称的比率`B`

例如

```
Name

ABC
DEF
VVV
BBB
BCD
ZZZ 
```

所以输出将是 0.5。我想将该输出称为“输出”。所以输出应该是

```
out

0.5 
```

几乎我想要的是

`Select count(*) from table where name like 'A%' / select count(*) from table where name like 'B%`'

但在一个查询中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:13:33.240

您可以执行以下操作：

```
select
   (select count(*) from table where name like 'a%') / (select count(*) from table where name like 'b%'); 
```

这是一个[SQL Fiddle](http://www.sqlfiddle.com/#!2/883c6/1)。

请注意，如果除数为零，mySql 会将零合并为 null，结果值为`null`. 这与说 Oracle 不同，它将抛出*除数等于零的*异常。

[这是一个显示此行为的 SQL Fiddle](http://www.sqlfiddle.com/#!2/883c6/2)，您可能应该适当地捕获和处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:15:41.130

此查询将满足您的需求：

```
SELECT ((SELECT COUNT(*) FROM `table` WHERE name LIKE 'A%') /
            (SELECT COUNT(*) FROM `table` WHERE name LIKE 'B%')) AS `out` 
```

# .net - 如何将 Visual Basic 应用程序移至联机状态以在浏览器中显示？

> ID：12082129
> 
> 赞同：0
> 
> 时间：2012-08-22T22:09:01.237
> 
> 标签：.net, vb.net, browser

是否可以将 .NET 4.5 Visual Basic 应用程序移动到在线表单？如果是这样，显示应用程序所需的代码是什么（实际应用程序代码除外）？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:32:38.207

是的，但它需要工作！应该是相当多的工作。

你有没有把 UI 分成一个单独的层？那将是第一份工作。

它是 WinForms 应用程序吗？如果是这样，请查看[WebForms](http://www.asp.net/web-forms/what-is-web-forms)。微软发明 WebForms 是为了让 WinForms 程序员更容易创建 Web 应用程序。但是[没有简单的方法](https://stackoverflow.com/questions/4379130/is-it-possible-to-convert-a-winform-to-a-webform-in-net)可以[将](https://stackoverflow.com/questions/5597212/vb-net-easiest-way-to-export-convert-winform-app-to-web-asp-net-app)WinForms 应用程序转换为 WebForms 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:27:55.393

你可以使用[silverlight](http://www.microsoft.com/silverlight/)。Silverlight 就像一个闪光灯，但更不兼容。不要期望一切都能正常工作，因为它可能不会，你将不得不重写一些东西。这取决于你的目标是什么，但也许它可以帮助你；）

# java - gwt-query / jquery - 选项标签内联样式

> ID：12082140
> 
> 赞同：0
> 
> 时间：2012-08-22T22:10:19.903
> 
> 标签：java, jquery, html, gwtquery

我一直在尝试设置 html 选项标签的样式，但没有成功。我发布的代码如下：

```
String htmlString = <something inline styled>;
$("#nombreFuenteLB > option[value^='" + "Helvetica" + "']").replaceWith(htmlString); 
```

但是没有什么好处，有什么想法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:11:51.533

在选择任何内容之前，您必须将元素附加到文档中，您应该测试选择是否返回某些内容。Proly 您的过滤器不匹配任何元素。

# python - 在 3D 中计算梯度

> ID：12082148
> 
> 赞同：0
> 
> 时间：2012-08-22T22:11:02.593
> 
> 标签：python, numpy, gradient

我在 3d 空间中有以下一组点，我想计算各处的梯度，即返回一个向量场。

```
points = []
for i in np.linspace(-20,20,100):   
    for j in np.linspace(-20,20,100):
        points.append([i,j,i**2+j**2])
points = np.array(points) 
```

它是一个椭圆抛物面。

使用`np.gradient(points)`， [http://docs.scipy.org/doc/numpy/reference/generated/numpy.gradient.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.gradient.html)

我既没有得到正确的值，也没有得到我期望的尺寸。谁能给我一个提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:40:57.047

您将索引和“点”中的值混合在一起，因此梯度会给您错误的结果。这是用 numpy 构造点并计算梯度的更好方法：

```
x, y = np.mgrid[-20:20:100j, -20:20:100j]
z = x**2 + y**2
grad = np.gradient(z) 
```

生成的梯度是一个包含两个数组的元组，一个用于第一个方向的梯度，另一个用于第二个方向的梯度。请注意，此梯度没有考虑点之间的分离（即 delta x 和 delta y），因此要获得导数，您需要除以它：

```
deriv = grad/(40./100.) 
```

如果你想像以前一样重建你的“点”，你只需要这样做：

```
points = np.array([x.ravel(), y.ravel(), z.ravel()]).T 
```

您可能还对 numpy 的[diff](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)函数感兴趣，它给出了沿给定轴的离散差异。

# facebook - 如何从 localhost 测试我的 Facebook 页面选项卡应用程序

> ID：12082151
> 
> 赞同：5
> 
> 时间：2012-08-22T22:11:13.010
> 
> 标签：facebook

我正在开发一个 facebook 页面标签应用程序。当我在应用程序设置中将页面选项卡 URL 设置为类似`localhost/fbapp`时，它不起作用，因为页面选项卡不仅仅是 iframe。有什么办法可以解决这个问题吗？

**编辑**

我正在使用带有 fb C# SDK 的 ASP.NET MVC-3.0构建 facebook***页面选项卡。***

到目前为止，我尝试的是修改`hosts`文件以将我在应用程序设置上的 URL 指向 localhost(127.0.0.1)。我一直在以这种方式测试 facebook 应用程序，但它在 facebook 页面选项卡中不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T09:20:56.717

在页面选项卡 url 集中的应用程序设置中

```
http://localhost/yourpagetabdir/ 
```

![脸书上的设置](../Images/48466c3f4e27f0da3fc7632a2fa95845.png)

我将这个设置用于我的页面应用程序测试 frmlocalhost 如果您使用的是 IIS 服务器，它在我的 ASP.Net 开发服务器上工作正常，请确保您的 IIS 服务器允许 iframe 中的页面。

在此之后，如果您想获得页面签名的请求

```
 Facebook.FacebookConfigurationSection s = new FacebookConfigurationSection();
                s.AppId = "AppID";
                s.AppSecret = "Secret";
                FacebookWebContext wc = new FacebookWebContext(s);
                dynamic da = wc.SignedRequest.Data;
                dynamic page = da.page;
                string curpageid = page.id;
                bool isLiked = page.liked;
                bool isAdmin = page.admin; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:03:26.583

尝试编辑您的主机文件，以便当您访问`http://example.com`它时链接到您的`http://localhost/yourapp`

这是如何做到的：

*   **Windows**：[http](http://www.trailheadinteractive.com/creating_multiple_virtual_sites_a_single_apache_install_windows_xp) ://www.trailheadinteractive.com/creating_multiple_virtual_sites_a_single_apache_install_windows_xp （您的本地主机 URL 应具有有效的网站格式：127.0.0.1 dummydomainname.tld）
*   **MacOS**：[http](http://danilo.ariadoss.com/how-to-setup-virtual-hosts-mamp-environment/) ://danilo.ariadoss.com/how-to-setup-virtual-hosts-mamp-environment/ （再次确保您的网站格式有效）
*   **Linux**：您可能已经知道如何做到这一点:)

这应该可以工作，因为 iframe 将指向一个有效的 URL，在您的本地计算机上将指向您的内容。请注意，如果您从其他计算机访问该选项卡，这将不起作用，因为对于他们而言，URL 将指向其他内容（或不指向任何内容，具体取决于您选择的域名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T17:20:51.270

例如，使用 FB PHP SDK，您可以发布 signed_request 并用几行解析它：-

```
require_once ("facebook.php"); // this file comes from the SDK
$config = array();
$config['appId'] = 'get_appID_from_app_menu';
$config['secret'] = 'get_secret_below_appID';
$facebook = new Facebook($config);
$signed_request = $facebook->getSignedRequest();
print_r($signed_request); 
```

避免 FB 博客中给出的冗长示例。祝你编码好运:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T23:31:00.457

我发现了 facebook 页面标签的问题。`http`即使我启用了沙盒模式，他们似乎也不接受页面选项卡。我所要做的就是设置 IIS 以使用`https`并通过 ssl 运行应用程序。它现在运行良好。谢谢大家的帮助

# vb6 - VB6 应用程序 - 移动服务器

> ID：12082155
> 
> 赞同：0
> 
> 时间：2012-08-22T22:11:41.767
> 
> 标签：vb6

我支持 vb6 应用程序。我正在尝试将可执行文件和 DLL 传输到新服务器，并提示我组件未注册错误。我通过在新服务器上手动注册组件来解决这个问题。

我找到了两个文件扩展名为 000 和 001 的文件，其中包含注册表命令（注册组件） 谁能解释这些文件是如何生成的？我在一定程度上有在 vb.net 中创建安装文件的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:10:44.870

重新打包和重新部署不是开发人员的问题，也不属于这里。这样的问题更适合像 ServerFault 这样的地方。

丢失应用程序的所有源代码是一回事，但在某些方面丢失部署包更糟糕。可悲的是，一些商店未能归档其中任何一个。

然而，对于商店来说，将 VB6、Delphi、PowerBuilder 等 RAD 工具视为最糟糕的开发人员中最糟糕的事情也很常见。这些可怜的懒汉很少接受微软官方培训，而这些培训应该强调创建正确安装程序的重要性。就此而言，即使是那些课程也倾向于边缘化这个话题。即使在今天，Web 上也充斥着“莫特教莫特”的半生不熟的开发，或者编写许多早期严肃的 VB 编程书籍的先驱者往往是松散的大炮和不相信的逆势者，这无济于事部署是一个严重的问题。

最终结果是，许多商店的机器上都安装了半生不熟的 VB6 程序。通常，当最后期限迫近时，他们会让*Old Mort*将 VB6 直接安装到生产服务器上，然后让他直接破解！因此，一旦需要更换服务器或更新其操作系统，人们就会陷入困境也就不足为奇了。

我所知道的那些带有 .000、.001 等扩展名的 REG 文件并不正常。据我所知，他们已经退出了 REGMON 运行或某些 3rd 方打包工具。使用 REGEDIT 创建的手动注册表导出通常具有 .REG 扩展名。

如果您实际上“支持”此应用程序，则意味着您拥有源代码、VB6 编译器、任何第三方控件的开发人员安装包，以及描述任何特殊打包和安装要求（目标机器 DCOM/COM+ 配置、系统要求）的说明例如 IIS 或 MSMQ 或第 3 方 DBMS 提供程序和驱动程序、特殊文件夹要求、软件防火墙规则等）。

从这些文件中，应该可以编译一个干净的新 EXE、DLL 等副本并创建一个干净的部署包——即使在运行安装程序之前和之后仍然需要手动完成一些配置。

没有这些，您就是计算机管理员，您的问题属于 ServerFault。这一点也不好玩，我知道。我自己不得不经常参加这样的清洁服务。

# javascript - 具有任意多条线的 D3 折线图（以及特定的数据格式）

> ID：12082156
> 
> 赞同：5
> 
> 时间：2012-08-22T22:11:48.990
> 
> 标签：javascript, d3.js

我在使用 D3 时遇到了一些问题，而且我已经束手无策了。本质上，我有一个带有任意多行的时间序列图，并且为了方便起见，不能事先修改源数据（但它可以在客户端进行操作）。

数据是这样格式化的（带有任意多个标签）：

```
object = [
{
  "_id": "2012-08-01T05:00:00",
  "value": {
    "label1": 1.1208746110529344,
    "label2": 0.00977592175310571
  }
},
{
  "_id": "2012-08-15T05:00:00",
  "value": {
    "label1": 0.7218920737863477,
    "label2": 0.6250727456677252
  },
  .... 
```

我试过类似的东西：

```
var vis = d3.select.(element)
    .append("svg:svg")
    .attr("width", width)
    .attr("height", height)
    .append("svg:g");

var line = d3.svg.line()
    .x(function(data) {return x(new Date(data._id));})
    .y(function(data) {return y(data.value);});

vis.append("svg:path")
    .attr("d", line(object))
    .attr("stroke", "black"); 
```

这似乎无法通过 y 访问器访问正确的值，因为我收到“错误：解析问题”和很多“NaNL3.384615384615385,NaNL6.76923076923077,NaNL10.153846153846155”。但是，如果我通过以下方式对标签值进行硬编码：

```
.y(function(data) {return y(data.value.label1);}); 
```

它工作得很好，但只适用于一行。有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T03:29:33.783

我首先将数据转换为相同格式的并行数组：

```
var series = ["label1", "label2"].map(function(name) {
  return data.map(function(d) {
    return {date: new Date(d._id), value: d.value[name]};
  });
}); 
```

（您可以使用[d3.keys](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_keys)自动计算系列名称，而不是像上面那样对它们进行硬编码。）现在`series`是一个数组数组。单个系列，例如 label1，将如下所示：

```
{date: new Date(2012, 7, 1, 5, 0, 0), value: 1.1208746110529344},
{date: new Date(2012, 7, 15, 5, 0, 0), value: 0.7218920737863477},
… 
```

由于它们具有相同的格式，因此您可以对所有系列使用相同的行生成器：

```
var line = d3.svg.line()
    .x(function(d) {return x(d.date); })
    .y(function(d) {return y(d.value); }); 
```

同样，嵌套数组也很适合数据连接以创建所需的路径元素：

```
svg.selectAll(".line")
    .data(series)
  .enter().append("path")
    .attr("class", "line")
    .attr("d", line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:14:33.360

尝试合并 parseFloat 以确保您正在转换为浮点数而不是隐式转换为整数。如果这仍然不起作用，请尝试获取字符串的子字符串（砍掉一些精度），直到它起作用。

# sql - 根据邮政编码表更新表

> ID：12082158
> 
> 赞同：0
> 
> 时间：2012-08-22T22:12:27.970
> 
> 标签：sql, sql-server, zip

我正在寻找一种方法来更新包含`city, state, zip, and county`通过使用包含所有必要信息的不同表的表。

简而言之，我有一张表（我们称之为`Table1`），列出了所有的`cities, states, and counties`by `zip code`（或任何你想要放入的顺序）。我想更新一个不同的表（调用它`Table2`），特别`city, state, and county`是使用`zip code`来自 Table1.

编辑：MS SQL 服务器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:17:09.590

```
UPDATE A
SET A.City = B.City
FROM Table2 AS A
INNER JOIN Table1 B
ON A.PostalCode = B.PostalCode
WHERE A.City IS NULL --Or Some Other Criteria 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:28:49.607

试试这个

```
UPDATE Table2
SET t2.City = t1.City,
t2.state= t1.state,
t2.county= t1.county

FROM Table2 AS t2
LEFT JOIN Table1 t1
ON t2.zipcode= t1.zipcode 
```

# r - R中的子区域地图

> ID：12082159
> 
> 赞同：2
> 
> 时间：2012-08-22T22:12:38.987
> 
> 标签：r, maps

我正在尝试在地图上绘制地理位置。我将 ggplot2 与地图库结合使用。

一切都很好，除了在非常拥挤的地区。我想放大这个区域，但我做不到。

所以我想放大加拉帕戈斯岛。这是我使用的脚本：

```
library(ggplot2)
library(maps)

measurements <- read.csv("all_podo.count.csv", header=T)
allworld <- map_data("world")

d <- ggplot(measurements, aes(long, lat)) + 
geom_polygon(data = allworld, xlim = c(-50, 100), aes(x = long, y = lat, group = group),
colour = "grey70", fill = "grey70") +
geom_point(size = 0.7, shape = 8) + 
opts(axis.title.x = theme_blank(), 
axis.title.y = theme_blank()) +
geom_text(aes(label = name), size = 1, vjust = 0,  hjust = 0)
d 
```

测量结果如下所示：

```
structure(list(site_num = c(59L, 54L, 44L, 42L, 38L, 37L, 43L, 
39L, 36L, 40L, 34L, 35L, 33L, 41L, 32L, 31L, 30L, 29L, 28L, 27L, 
26L, 25L, 24L, 23L, 22L, 21L, 20L, 19L, 18L, 17L, 16L, 15L, 14L, 
13L, 12L, 11L, 10L, 7L, 8L, 9L, 1L, 3L, 6L, 5L, 79L, 77L, 78L, 
76L, 75L, 74L, 80L, 81L, 72L, 73L, 71L, 70L, 69L, 68L, 66L, 67L, 
65L, 63L, 64L, 62L, 60L, 61L), name = structure(c(44L, 43L, 42L, 
40L, 36L, 35L, 41L, 37L, 34L, 38L, 32L, 33L, 31L, 39L, 30L, 29L, 
28L, 27L, 26L, 25L, 24L, 23L, 22L, 21L, 20L, 19L, 18L, 17L, 16L, 
15L, 14L, 13L, 12L, 11L, 10L, 9L, 8L, 5L, 6L, 7L, 1L, 2L, 4L, 
3L, 64L, 62L, 63L, 61L, 60L, 59L, 65L, 66L, 57L, 58L, 56L, 55L, 
54L, 53L, 51L, 52L, 50L, 48L, 49L, 47L, 45L, 46L), .Label = c("GS000a", 
"GS000b", "GS000c", "GS000d", "GS001a", "GS001b", "GS001c", "GS002", 
"GS003", "GS004", "GS005", "GS006", "GS007", "GS008", "GS009", 
"GS010", "GS011", "GS012", "GS013", "GS014", "GS015", "GS016", 
"GS017", "GS018", "GS019", "GS020", "GS021", "GS022", "GS023", 
"GS025", "GS026", "GS027", "GS028", "GS029", "GS030", "GS031", 
"GS032", "GS033", "GS034", "GS035", "GS036", "GS037", "GS047", 
"GS051", "GS108a", "GS108b", "GS109", "GS110a", "GS110b", "GS111", 
"GS112a", "GS112b", "GS113", "GS114", "GS115", "GS116", "GS117a", 
"GS117b", "GS119", "GS120", "GS121", "GS122a", "GS122b", "GS123", 
"GS148", "GS149"), class = "factor"), lat = c(-15.143611, -10.131389, 
-1.9738889, 1.3891667, -0.3011111, 0.27222222, -0.020833334, 
-0.5938889, -0.2, -1.2283334, -1.2161111, -1.2169445, 1.2641667, 
-0.38305557, 5.552778, 5.64, 6.492778, 8.129167, 9.164444, 10.716389, 
18.036667, 20.5225, 24.174723, 24.488333, 32.506943, 36.003887, 
38.946945, 39.417778, 38.94, 41.09111, 41.485832, 43.63222, 45.111668, 
44.690277, 44.137222, 42.85278, 42.503056, 32.166668, 32.166668, 
32.166668, 31.175, 31.175, 31.175, 32.174835, -32.399166, -30.898333, 
-30.898333, -29.348888, -26.035, -23.21611, -6.3166666, -6.3166666, 
-4.613611, -4.613611, -4.635, -4.6625, -4.990278, -7.0075, -8.505, 
-8.505, -9.596945, -10.446111, -10.446111, -10.943611, -12.0925, 
-12.0925), long = c(-147.435, -135.44945, -95.014725, -91.81695, 
-91.651665, -91.63333, -91.19778, -91.06944, -90.83528, -90.42917, 
-90.422775, -90.319725, -90.295, -90.279724, -87.087776, -86.56528, 
-82.90389, -79.69111, -79.83611, -80.25445, -83.78472, -85.41361, 
-84.344444, -83.07, -79.263885, -75.39472, -76.41722, -75.504166, 
-74.685, -71.60222, -71.35111, -66.84722, -64.94666, -63.637222, 
-63.644444, -66.217224, -67.24, -64.5, -64.5, -64.5, -64.32433, 
-64.32433, -64.32433, -64.01017, 36.591946, 40.420277, 40.420277, 
43.215557, 50.123055, 52.30611, 39.009167, 39.009167, 55.50861, 
55.50861, 56.836113, 60.523056, 64.97667, 76.33139, 80.37556, 
80.37556, 84.1975, 88.30278, 88.30278, 92.05889, 96.88167, 96.88167
)), .Names = c("site_num", "name", "lat", "long"), class = "data.frame", row.names =     c(NA, 
-66L)) 
```

你能帮助我吗 ？

谢谢，

西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:15:23.940

这向您表明，当您下降到加拉帕戈斯的水平时，包裹地图上的世界地图并不是特别高分辨率：

```
if (require("maps")) { 
world <- map_data("world") 
mid_range <- function(x) mean(range(x)) 
library(plyr) 
ggplot(world, aes(long, lat)) + 
   geom_polygon( aes(group = group), fill = "green", colour = "red")+
   ylim(c(-2, 1 )) + xlim( c(-93,-88) ) } 
```

![在此处输入图像描述](../Images/4b1dfc51595c8dc3d5e3a048a746cdea.png)

好像没有同名的群。我想你可能想为这个项目找到一个更好的 shapefile。：

> grep("Is", unique(world$region), value=TRUE) [1](https://i.stack.imgur.com/nBaYl.png) "以色列"
> [2] "马绍尔群岛"
> [3] "所罗门群岛"
> [4] "库克群岛"
> [5] "南桑威奇群岛"
> [6] “
> 索索罗尔岛” [7] “莫格岛”
> [8] “皮特凯恩群岛”
> [9] “马恩岛”
> [10] “安达曼群岛”
> [11] “北马里亚纳群岛” [12] “马德拉群岛” ”
> [13] “辛考岛”
> [14] “西沙群岛”
> [15] “福克兰群岛”
> [16] “开曼群岛”
> [17] “维尔京群岛”
> [18] “加那利群岛”
> [19] “南沙群岛”
> [20] “怀特岛”

RSeek 搜索会找到几个链接。其中之一：

[http://downloads.cloudmade.com/americas/south_america/ecuador/galapagos/galapagos.shapefiles.zip](http://downloads.cloudmade.com/americas/south_america/ecuador/galapagos/galapagos.shapefiles.zip)

“downloads.cloudmade.com 上的所有文件均基于来自 OpenStreetMap 的数据，并根据知识共享署名相同方式共享 2.0 许可条款获得许可。如果您使用这些文件，请确保您通过包含链接到 www.openstreetmap.org.:

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:46:09.777

尝试在上面的代码之后运行以下命令：

```
library(grid)
pushViewport(
  viewport( x=unit(0.1,'npc'), y=unit(0.1,'npc'), width=unit(0.2,'npc'),
    height=unit(0.2,'npc'))
)

d2 <- ggplot(measurements, aes(long, lat)) +
  geom_polygon(data = allworld, xlim = c(-50, 100), aes(x = long, y = lat, group = group), colour = "grey70", fill = "grey70") +
 geom_point(size = 0.7, shape = 8) + ylim(c(-2, 1 )) + xlim( c(-93,-88) )

print(d2, newpage=FALSE) 
```

这应该给出添加子地图的一般概念，但您需要调整上述内容以获得更好的缩放和更好看的结果。

# java - 无法在 java 命令行程序中捕获中断

> ID：12082164
> 
> 赞同：0
> 
> 时间：2012-08-22T22:13:09.327
> 
> 标签：java, multithreading, interrupt

> **可能重复：**
> [Java：我如何在 CLI 应用程序中“拦截”Ctrl+C？](https://stackoverflow.com/questions/1216172/java-how-could-i-intercept-ctrlc-in-a-cli-application)

在 Windows 上，我启动一个 java 非 gui 应用程序执行任务然后按 CNTL-C 程序就退出了，我的中断处理代码似乎都没有触发，即使在 main 方法中放置 try/catch 也不会显示堆栈跟踪来指示它被打断了。

```
public static void main(final String[] args) throws Exception
{
    try
    {
         CmdLineDecoder cld = new CmdLineDecoder();
         cld.start(args);
         System.exit(0);
    }
    catch(Exception e)
    {
         e.printStackTrace();
        throw e;
    }
} 
```

我显然误解了 Cntl-C 的效果，但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:17:12.120

你不能在 java 中做一般的信号处理，但你可以处理`Ctrl-c`.

如果您需要在 VM 关闭时执行某些操作，请使用关闭挂钩：[Runtime.addShutdownHook](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)。

从文档：

> Java 虚拟机关闭以响应两种事件：
> 
> 程序正常退出，当最后一个非守护线程退出或调用 exit（等效于 System.exit）方法时，或
> 
> 虚拟机响应用户中断（例如键入 ^C）或系统范围的事件（例如用户注销或系统关闭）而终止。

我过去在 Windows/OSX 上使用过这个。

# mysql - 日志中未知的 SQL 平均查询 Rails

> ID：12082172
> 
> 赞同：0
> 
> 时间：2012-08-22T22:13:56.620
> 
> 标签：mysql, ruby-on-rails, ruby, database

晚上所有，

我刚刚有一个关于 SQL 平均查询的快速问题。

我有一个有很多评级的帖子模型。将特定帖子的所有评分相加并除以平均评分数。所以这个计算在 post 模型中声明并保存在数据库中。在我的索引视图中，我列出了所有帖子及其作者、姓名和评级，这些来自帖子评级数据库列。

我的问题是，当这些值已保存在数据库中时，为什么 rails 会执行所有这些 SQL 平均查询？

我的代码如下：

在控制台中

```
Post Load (1.0ms)  SELECT `posts`.* FROM `posts` ORDER BY posts.created_at ASC LIMIT 1
 => #<Post id: 48, user_id: 5, song_name: "Enter Sandman", song: "ewwe wer ere rr erew rewr r erw erw rewedwde", created_at: "2012-08-16 13:35:32", updated_at: "2012-08-22 21:11:34", rating: 5.0, ratings_count: 2> 
```

Post.rb

```
def rating
    if self.ratings.any?
      self.rating = self.ratings.average(:rating)
    end
  end 
```

帖子/index.html.erb

```
<legend>Music library</legend>  

    <%= will_paginate @paginate_posts %>

            <% if @paginate_posts.any? %>
                <% @paginate_posts.each do |post| %>
            <h4><%= link_to post.song_name, post %></h4>
                Author: <%= link_to post.user.name, "#" %><br/>
                    <% if post.rating == nil %>
                        No one has rated this yet<br/>
                    <% else %>
                        Rating: <%= post.rating %>/10<br/>
                    <% end %>
                <br/>
        <% end %>
<% end %>

<%= will_paginate @paginate_posts %> 
```

posts_controller.rb 索引操作（我尝试过急切加载，但平均查询仍然存在）

```
def index
    @paginate_posts = Post.paginate(page: params[:page], per_page: 10).includes(:user).search(params[:search])
  end 
```

包含大量查询的 SQL 日志

```
Started GET "/" for 127.0.0.1 at 2012-08-22 22:51:38 +0100
Processing by PostsController#index as HTML
  Post Load (0.3ms)  SELECT `posts`.* FROM `posts` ORDER BY posts.created_at DESC LIMIT 10 OFFSET 0
  User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` IN (5)
   (0.3ms)  SELECT COUNT(*) FROM `posts` 
  Rendered posts/_copy.html.erb (0.1ms)
   (0.3ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 63
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 63
   (0.3ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 62
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 62
   (0.2ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 61
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 61
   (0.2ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 60
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 60
   (0.2ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 59
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 59
   (0.2ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 58
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 58
   (0.2ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 57
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 57
   (0.2ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 56
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 56
   (0.2ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 55
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 55
   (0.3ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 54
  CACHE (0.0ms)  SELECT AVG(`ratings`.`rating`) AS avg_id FROM `ratings` WHERE `ratings`.`post_id` = 54
  Rendered posts/index.html.erb within layouts/application (60.8ms)
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 2012ms (Views: 1871.7ms | ActiveRecord: 33.1ms) 
```

像往常一样，如果您需要更多代码，请大喊。非常感谢，安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:38:33.877

您在帖子中有一个名为 rating 的方法，它会覆盖模型上的访问器，因此即使您有一个 db 列“rating”，当您请求 model.rating 时它也不会被调用，该方法将是，它将迭代再次收视。另外该方法不保存（只是设置一个属性不会持久化到数据库，您需要调用保存或类似的方法）。因此，如果您想保存评级中的值，我会摆脱这种方法。

当帖子添加或更改评级时，您应该这样做 - 此时，调用 update_rating 或其他东西（见下文），然后确保您在调用 post.save 之后（要么将其设为 before_save 回调，要么调用self.update_attribute 或 self.save 明确地在 update_rating 中） - 这会将更改保存到数据库，然后您可以使用

```
<%= post.rating %> 
```

在视图或其他任何地方作为缓存的平均评分值。

在 Post 模型中：

```
before_save :update_rating

def update_rating
  if self.ratings.any?
    self.rating = self.ratings.average(:rating)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:57:48.647

你循环你的帖子。在您调用的每个循环中：

```
post.rating 
```

这反过来会触发您的 AVG SQL 查询：

```
self.ratings.average(:rating) 
```

它没有保存，它只是计算所以你的'if post.rating ='有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T14:26:34.080

根据我的经验，我发现@Kenny-Grant 的`update_rating`方法在计算和保持更新的评分时实际上不会在平均值中包含新添加的评分。

这对我有用：

```
after_save :update_rating!

def update_rating
  self.rating = ratings.average(:rating) || 0.0
end

def update_rating!
  self.update_columns(rating: update_score)
end 
```

这确保新添加的记录显示出来，因为`ratings`这是对数据库的调用，而不是在这个阶段的内存中。让您重写记录而不会导致触发其所有回调`update_columns`的额外操作。在写入列时`save`使用该方法还会设置内存评级属性，除非您之后还重新加载模型，否则不会这样做。`update_rating``update_columns`

# r - rgdal / readOGR - 无法从 .zip 读取 shapefile

> ID：12082174
> 
> 赞同：10
> 
> 时间：2012-08-22T22:14:27.627
> 
> 标签：r, ggplot2, gis, rgdal

我正在尝试加载一个 zip 级别的 shapefile 来进行一些绘图，每个： [https](https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles) ://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles http://www.nceas.ucsb.edu/scicomp/用例/ReadWriteESRIShapeFiles 等

我的代码：

```
library(rgdal)
library(RColorBrewer)
library(ggplot2)
zipmap = readOGR(dsn="file.zip/", layer="myZIPmap") 
```

我收到此错误：

```
Error in ogrInfo(dsn = dsn, layer = layer, input_field_name_encoding = input_field_name_encoding) : 
  Cannot open file 
```

我检查了驱动程序，但老实说我无法解释输出：

```
ogrDrivers()
             name write
1      AeronavFAA FALSE
2          ARCGEN FALSE
3          AVCBin FALSE
4          AVCE00 FALSE
5             BNA  TRUE
6             CSV  TRUE
7             DGN  TRUE
8             DXF  TRUE
9          EDIGEO FALSE
10 ESRI Shapefile  TRUE
11     Geoconcept  TRUE
12        GeoJSON  TRUE
13       Geomedia FALSE
14         GeoRSS  TRUE
15            GML  TRUE
16            GMT  TRUE
17       GPSBabel  TRUE
18  GPSTrackMaker  TRUE
19            GPX  TRUE
20            HTF FALSE
21         Idrisi FALSE
22            KML  TRUE
23   MapInfo File  TRUE
24         Memory  TRUE
25   MSSQLSpatial  TRUE
26           ODBC  TRUE
27        OpenAir FALSE
28         PCIDSK  TRUE
29            PDS FALSE
30         PGDump  TRUE
31           PGeo FALSE
32            REC FALSE
33            S57  TRUE
34           SDTS FALSE
35       SEGUKOOA FALSE
36           SEGY FALSE
37            SUA FALSE
38            SVG FALSE
39          TIGER  TRUE
40        UK .NTF FALSE
41            VFK FALSE
42            VRT FALSE
43         XPlane FALSE 
```

file.info 给出：

```
 file.info(path="K:/2012 - IPD - Policy Maps/fe_2007_us_zcta500.zip/")
                                                             size isdir mode               mtime               ctime
    K:/2012 - IPD - Policy Maps/fe_2007_us_zcta500.zip/ 661131516 FALSE  666 2012-08-22 14:54:53 2012-08-22 14:50:43
                                                                      atime exe
    K:/2012 - IPD - Policy Maps/fe_2007_us_zcta500.zip/ 2012-08-22 14:58:38  no 
```

鉴于我尝试过的互联网搜索，看起来我不是唯一一个遇到此问题的人，但我一直无法找到答案。我不确定问题是否与 .zip 文件夹中的 shapefile 有关。由于它是一台工作计算机，我必须等待 IT 安装 WinZip，以便我可以提取 shapefile 并在 .zip 文件夹之外尝试。希望那是明天。

此外，软件包帮助声明“请注意，数据源目录中的杂散文件（例如 *.dbf）可能会导致伴随 *.shp 丢失的异常错误。” .zip 文件夹具有以下内容：a.dbf、b.prj、c.shp、d.shp.xml、e.shx。

你能提供的任何帮助都会很棒！-亚历克斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T22:39:27.290

您应该能够在不需要外部程序的情况下解压缩文件`unzip`。要读取带有 的 shapefile `readOGR`，`dsn`是“解压缩”文件所在的目录名称，并且`layer`是不带扩展名的 shape 文件的名称。在下面的示例中，将 myZIPmap 替换为适当的 shapefile 名称。

```
library(utils)
library(rgdal)

unzip("K:/2012 - IPD - Policy Maps/fe_2007_us_zcta500.zip")
zipmap <- readOGR(dsn = "K:/2012 - IPD - Policy Maps/fe_2007_us_zcta500", layer = "myZIPmap" ) 
```

# c# - MEF 自定义属性类是否需要 ctor(IDictionary<,>)

> ID：12082177
> 
> 赞同：2
> 
> 时间：2012-08-22T22:14:51.933
> 
> 标签：c#, mef

`CompositionContractMistachException`在 .NET 4.0 上的 MEF 中使用自定义属性类时，我得到了一个。

`Unable to create an instance of the Metadata view '(snip).ModuleExportAttribute, (snip), Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' because a constructor could not be selected. Ensure that the type implements a constructor which takes an argument of type IDictionary<string, object>.`

这是我的`ModuleExportAttribute`课，没什么特别的：

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false, Inherited = false)]
public sealed class ModuleExportAttribute : ExportAttribute
{
    public ModuleExportAttribute(string name) : base(typeof(IModule))
    {
        this.Name = name;
    }

    public string Name { get; private set; }
} 
```

用法是这样的：

```
[ModuleExport("MyModule")]
public class MyModule : IModule
{ 
   ...
} 
```

添加要求的构造函数后，异常消失。

但是，我找不到任何说明此要求的参考资料。相反，我看到许多使用自定义属性类而没有此类构造函数的示例和博客文章。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T02:43:38.857

你是如何尝试导入这个的？我怀疑错误是由您导入类似的东西引起的，`Lazy<IModule, MetadataExportAttribute>`在这种情况下是的，为了使用具体类型作为元数据类型，它必须是一个接口，在这种情况下我们生成一个代理类型，或者它必须是一个接受`IDictionary<string,object>`以便可以将元数据传递给它。

尝试类似：

```
public interface IModuleMetadata
{
  string Name { get; }
} 
```

然后将您的导入更改为：

```
[Import]
Lazy<IModule, IModuleMetadata> Module; 
```

我还想让我的 ExportAttribute 实现 IModuleMetadata 接口，以确保它们保持一致，但这不是绝对必要的。

# ruby-on-rails - 在没有持久对象的 RESTful 路由 ID 上提交表单

> ID：12082180
> 
> 赞同：0
> 
> 时间：2012-08-22T22:15:20.357
> 
> 标签：ruby-on-rails, forms, rest, routes, resource-id

导轨 3.2.0 | 红宝石 1.9.2

路线：

```
xyz_catalog_device_info 
GET|POST /xyz/catalog/devices/:device_id/info(.:format)
xyz/catalog/devices#info` 
```

我的应用程序将多个 API 服务封装到一个系统中，以提供一个单一的位置来维护 SSL 证书和复杂的 XML 生成逻辑。我的控制器对第 3 方 API 进行 HTTP 调用以获取信息，因此没有 XYZ::Catalog::Device 持久化（没有 @device）来实现通常的 rails form helper 技巧。

我想创建一个如下形式：

```
%form{ :action => xyz_catalog_device_info_path(:format => :xml) }
  = label_tag :device_id, "Device ID:"
  = text_field_tag :device_id
  = submit_tag "Search" 
```

以便它将在操作中填写 device_id。

这可能不使用javascript吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:22:53.737

听起来你正在寻找的是[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)

你会在哪里使用类似...

```
= form_tag(xyz_catalog_device_info_path(:format => :xml)) do
  = label_tag :device_id, "Device ID:"
  = text_field_tag :device_id
  = submit_tag "Search" 
```

# iphone - 以编程方式安装 .mobileconfig

> ID：12082184
> 
> 赞同：4
> 
> 时间：2012-08-22T22:15:50.627
> 
> 标签：iphone, objective-c, ios, mobile, uiwebview

我正在编写一个应用程序，以自动化将 Apple 移动设备连接到 wifi 网络并将配置文件下载到设备的过程。由于它是自动化的（通过诸如 Native Driver 之类的东西），所有功能都需要由应用程序本身控制，而不是发送到其他应用程序，例如设置或 Safari。

我已经在使用 Apple80211 私有框架连接到 wifi 网络以及 UIWebView 代替浏览器以导航到特定网页。导航到此网页后，我的服务器将向移动设备发送一个 .mobileconfig 文件以安装配置文件。一旦服务器发送了这个 .mobileconfig 文件，我还没有找到一个明确的答案。我在几个不同的地方读到 UIWebView 一旦发送就无法处理 .mobileconfig 文件。发送此文件时处理此文件的最佳方法是什么？

此外，一旦发送并允许某些东西可以处理该文件，有没有办法以编程方式安装配置文件而无需用户输入？即是否有任何公共或私有框架可以实现以“在幕后”安装配置文件？

这个应用程序只会用于测试目的，并且只会在少数设备上运行。在此先感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:41:30.790

我尝试了类似的事情。

不幸的是，我没有让它与`UIWebView`. 一起运行，但切换到 Safari 时它起作用了：

切换到 safari，让用户安装配置并将他发送回您的应用程序。只需注册到自定义 URL 方案，如“ `yourapp://`”，然后`URL`在`HTML`.

# javascript - dataTable (class?) 带来了一些奇怪的问题

> ID：12082185
> 
> 赞同：0
> 
> 时间：2012-08-22T22:15:53.687
> 
> 标签：javascript, jquery, css, datatables

我会尽力解释，如果您需要更多信息，请告诉我。

我正在使用一个模板，其中数据表的定义如下：

```
<table id="id_table" class='table table-striped dataTable table-bordered'> 
```

当数据就在那里时，这会产生一个很好的表格。但是，当尝试通过 ajax 填充数据时，出现以下错误：

```
DataTables warning (table id = 'id_table'): Requested unknown parameter '1' from the data source for row 0 
```

我确认 php 文件没有任何问题。如果我从表类中删除“dataTable”部分，我会得到没有错误的数据，但是样式会受到影响并且表看起来很糟糕。也就是说，像这样保留表的定义：

```
table id="id_table" class='table table-striped table-bordered'> 
```

（请注意，“dataTable”已被删除）。有了上面的表格，所有数据都正确存在，唯一受到影响的是样式。

我去了css（我正在加载的唯一一个），这就是我能看到的关于那个类的全部内容：

```
 .table.dataTable {
  border-top: 1px solid #bbb;
  border-bottom: 1px solid #bbb;
}
.table.dataTable.dataTable-noheader {
  border-top: 0;
}
.table.dataTable.dataTable-nofooter {
  border-bottom: 0;
} 
```

奇怪的是，如果我更改该类的名称，即使我不更改 html 中的类，行为也是一样的，这个类与数据表有关吗？我完全迷失了，我已经看了好几个小时了，我看不出这一切背后的逻辑。请有人扔灯！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:23:54.033

您是否使用了一些依赖于 dataTable 类的[插件？](http://datatables.net/)听起来有些东西正在尝试将数据附加到表中或修改它，并通过在类名上使用 css 选择器来查找表`$(".dataTable")`，当您更改类名时，您正在破坏此选择器，这就是您不这样做的原因再也看不到错误了。

您应该尝试检查从 ajax 调用返回的数据，并确认它与您的 javascript 代码所期望的匹配。

**编辑：**

事实上，数据表[常见问题解答](http://datatables.net/faqs)提到了这个错误：

> Q.“请求的未知参数”错误
> 
> A. 当 DataTables 请求表的数据源中不存在的属性时，您会收到此错误。这可能是由于在正文中指定了不正确的列数、缺少参数和 colspan / rowspan。如果这些要点不能帮助解决问题，请使用 DataTables 调试器并在论坛中发布问题。

显然，您收到的错误意味着数据表在返回的 JSON 数组的索引 1 处找不到元素的值。`Requested unknown parameter '1' from the data source for row 0`. 检查 JSON 数据，尤其是检查是否为数据表中的每一列返回了一个值。

# c++ - C ++将类指针存储在可以从派生类访问的抽象基类中？

> ID：12082187
> 
> 赞同：1
> 
> 时间：2012-08-22T22:15:58.910
> 
> 标签：c++, polymorphism, derived-class

我想在我的抽象实体类中存储一个指向主游戏类的指针。

实体.h

```
#include "Game.h"

class Entity
{
public:
    Entity(Game* game);
    ~Entity(void);

    virtual void Draw(float dt) = 0;
    virtual void Update(float dt) = 0;          // '= 0' means pure virtual function (like 'abstract' in C#)

protected:
    Game* m_game;                               // Missing type specifier error C4430
}; 
```

实体.cpp

```
#include "Entity.h"

Entity::Entity(Game* game)
{
    m_game = game;
}

Entity::~Entity(void)
{

} 
```

然后我应该能够实例化一个派生类并将 Game 类引用传递给构造函数，以便将其传递给存储它的基类：

边界.h

```
#include "Entity.h"

class Boundary : public Entity
{
public:
    Boundary(Game* game);
    ~Boundary(void);

    // Override pure virtual functions
    void Draw(float dt);
    void Update(float dt);
}; 
```

Boundary 构造函数然后可以使用引用的 Game 类来将自身添加到列表中：

```
#include "Boundary.h"

Boundary::Boundary(Game* game) : Entity(game)
{
    // Add entity to the main entity list
    game->m_entities->push_back(*this);
}

Boundary::~Boundary(void)
{
}

void Boundary::Draw(float dt)
{
    // Call the base class as follows (C# equivalent: 'base.Draw(dt)')
    //Entity::Draw(dt);
}

void Boundary::Update(float dt)
{

} 
```

这会导致 3 种问题：

`game->m_entities->push_back(*this);`

> 错误 C2663：“std::list<_Ty,_Ax>::push_back”：2 个重载对“this”指针没有合法转换

`Game* m_game;`在实体.h

> 错误 C4430：缺少类型说明符 - 假定为 int

`list<Entity>* m_entities;`在游戏.h

> 错误 C2065：“实体”：未声明的标识符

`Entity(Game* game);`在实体.h

> 错误 C2061：语法错误：标识符“游戏”

我想要实现的 C# 等价物是：

```
public abstract class Entity
{
    protected Game game;

    public abstract void Draw(float dt);
    public abstract void Update(float dt);
}

public class Boundary : Entity
{
    public Boundary(Game game)
    {
        this.game = game;

        game.Entities.Add(this);
    }

    public override void Draw(float dt)
    {

    }

    public override void Update(float dt)
    {

    }
} 
```

我哪里出错了？

编辑：

```
Game.h

#include "btBulletDynamicsCommon.h"
//#include "LinearMath\btQuaternion.h"
#include <list>

using namespace std;        // Required for list

class Entity;               // Forward declaration

class Game
{
public:
    list<Entity>* m_entities;

    Game(void);
    ~Game(void);

    void init();
    void draw(float dt);
    void loadContent();
    void update(float dt);

private:
    class btDefaultCollisionConfiguration* m_collisionConfiguration;
    class btCollisionDispatcher* m_dispatcher;
    class btDiscreteDynamicsWorld* m_dynamicsWorld;
    class btBroadphaseInterface* m_overlappingPairCache;
    class btSequentialImpulseConstraintSolver* m_solver;

    void exitPhysics();
    void initPhysics();
}; 
```

编辑2：

我现在剩下的唯一问题是尝试在构造函数中引用游戏：

```
 Boundary::Boundary(Game *game) 
    : Entity(game)                  // Initialise base
{
    // Add entity to the main entity list
    game->m_entities->push_back(*this);      // ERROR
} 
```

基类遇到同样的问题

```
 Entity::Entity(Game* game) 
    : m_game(game)                  // Initialise members
{
    m_game->m_entities->push_back(this);     // ERROR here too
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:34:19.973

## 后期编辑

Game.h 中的这一行：

```
list<Entity>* m_entities; 
```

声明一个指向实体实例列表的指针。除了在看到 Entity 的定义之前您不能*使用*此列表（这在此处不是问题）之外，这还意味着您放入列表中的任何 Entity 都将被*复制*。由于您使用的是实体的子类，因此这将对对象进行[切片](https://stackoverflow.com/q/274626/212858)并仅复制基类部分。因此，您的列表*不是*多态的。而且，每次创建边界（或其他）时，它都会尝试*仅*将其实体基类子对象的副本添加到列表中*。*

 *考虑一下：

```
list<Entity*> m_entities; 
```

并且也许也将其`push_back`移至基类：

```
Entity::Entity(Game *game) : m_game(game)
{
    game->m_entities.push_back(this);
}

Boundary::Boundary(Game *game) : Entity(game) {} 
```

（因此您不必为每个子类复制它）。

通常，当您需要*运行时多态性*（派生类和虚函数）时，您需要使用*间接寻址*，例如指针或引用。既然您正在存储指针，那么考虑所有权和生命周期也是一个好主意（在该实体列表中存储智能指针而不是原始指针可能是一个好的开始）。

```
std::list<std::unique_ptr<Entity> > m_entities; 
```

哦，如果您通过基类间接删除派生类型（如此处），则基类析构函数也应声明为虚拟。

* * *

## 预编辑

*缺少类型说明符*错误是您的第一个线索：`Game`当您在`Entity`.

由于您包含`Game.h`，因此该标头存在问题，或者存在循环依赖项（即，`Game.h`还包含`Entity.h`）。

但是，您根本不需要包括`Game.h`：

## 实体.h

```
#ifndef USER1423893_ENTITY_H
#define USER1423893_ENTITY_H

class Game; // forward declaration

class Entity
{
public:
    virtual ~Entity(void);

    virtual void Draw(float dt) = 0;
    virtual void Update(float dt) = 0;

protected:
    explicit Entity(Game* game);

    Game* m_game;
};
#endif 
```

## 实体.cpp

```
#include "Entity.h"

Entity::Entity(Game* game) : m_game(game)
{
} 
```

现在你已经修复了这个错误会发生什么？*

# android - 在 MenuScene 上重复 SpriteBackground

> ID：12082188
> 
> 赞同：3
> 
> 时间：2012-08-22T22:16:03.780
> 
> 标签：android, background, andengine, repeat

我已经开始使用 Andengine，在学习了一些教程之后，我开始为自己开发。现在我有一个 BaseGameActivity，我在其中调用了一个 splashScene（工作正常），然后是我的 MenuScene。如果我设置一个简单的背景（只是颜色）它加载正常（显示所有菜单文本），但是当我尝试将重复的精灵设置为背景时，出现黑屏（logcat 中没有错误显示）我正在使用示例背景代码

```
super(BaseActivity.getSharedInstance().mCamera);
activity = BaseActivity.getSharedInstance();
RepeatingSpriteBackground mGrassBackground = new RepeatingSpriteBackground(mCamera.getWidth(), mCamera.getHeight(), activity.getTextureManager(), AssetBitmapTextureAtlasSource.create(activity.getAssets(), "images/menu/background.png"), activity.getVertexBufferObjectManager());
this.setBackground(mGrassBackground); 
```

我将此代码放在 MenuScene 构造函数中。

提前感谢，对不起我的英语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:11:38.767

我只是发现我的问题。代码是对的，问题出在图像格式上，它必须是 2 的幂（它在源代码注释中清楚地说明了这一点）

下次我会尝试在询问之前仔细阅读

# arrays - Powershell - 将一个文件中的字符串替换为另一个文件

> ID：12082190
> 
> 赞同：0
> 
> 时间：2012-08-22T22:16:36.480
> 
> 标签：arrays, string, powershell, powershell-2.0

我有两个文件；A 和 B。它们都包含相似的文本，但当然每个都有细微的差异。

我需要替换来自文件 A 的文件 B 中的一行文本，将文件 B 中的所有其余文本保持原样。问题是我不知道文件 A 中存在的整行文本，只知道前几个字母。

**换一种说法：**

我可以从文件 A 中获取单行文本（字符串）： $a = (get-content $original_file)[5]

如何用变量 $A 中的内容替换文件 B 的第 5 行

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:49:43.350

PowerShell 数组从零开始，因此第 5 行的索引为 4。脚本的其余部分类似于：

```
$b = (get-content $another_file)
$b[4] = $a
$b | Out-File -Encoding Ascii $another_file 
```

您可以选择 Ascii 或 Unicode（或 UTF8）进行编码。

# java - String.length() 与 Array.length

> ID：12082196
> 
> 赞同：8
> 
> 时间：2012-08-22T22:17:19.893
> 
> 标签：java, programming-languages

> **可能重复：**
> [为什么 String.length() 是一种方法？](https://stackoverflow.com/questions/8720220/why-is-string-length-a-method)
> [Java - 数组的长度属性](https://stackoverflow.com/questions/9297899/java-arrays-length-property)

关于为什么 String 具有长度方法但 Array 具有可变长度，是否有特定的设计/性能原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T22:44:00.410

Java中没有`Array`类（反射除外）。数组是 Java 中的一种“原语”，按照与声明的类不同的规则进行操作。

当然，`length()`可以在数组上定义一个方法，但设计者希望将其保留`length`为属性而不是伪方法。（在某种程度上，这可能使早期的 Java 实现更容易。）原因在某种程度上已被历史所掩盖。

（一个更好的问题是为什么 Java 无法决定是否将概念称为“长度”、“计数”或“大小”——我总是在为聚合类找到正确的一个之前尝试所有这三个。）

# c# - 为什么在 C# 中为 DBBool (TriState) 实现的重载运算符返回时是新的

> ID：12082201
> 
> 赞同：0
> 
> 时间：2012-08-22T22:17:58.033
> 
> 标签：c#, tri-state-logic

如果您[`DBBool`在 C# 中查找实现，](http://msdn.microsoft.com/en-us/library/6292hy1k.aspx)则返回时几乎没有重载运算符（逻辑运算符`|`、、、`&`）`!`。我相信这是没有必要的，而且有点浪费内存。DBBool 是一个结构，当它被传递给一个方法时会生成一个副本，所以没有理由这样做。

```
// Logical negation operator. Returns True if the operand is False, Null 
// if the operand is Null, or False if the operand is True. 
public static DBBool operator !(DBBool x)
{
    return new DBBool(-x.value);
}
// Logical AND operator. Returns False if either operand is False, 
// Null if either operand is Null, otherwise True. 
public static DBBool operator &(DBBool x, DBBool y)
{
    return new DBBool(x.value < y.value ? x.value : y.value);
}
// Logical OR operator. Returns True if either operand is True,  
// Null if either operand is Null, otherwise False. 
public static DBBool operator |(DBBool x, DBBool y)
{
    return new DBBool(x.value > y.value ? x.value : y.value);
} 
```

不加新应该就是这样。

```
public static DBBool operator !(DBBool x)
{
    if (x.value > 0) return False;
    if (x.value < 0) return True;
    return Null;
}
public static DBBool operator &(DBBool x, DBBool y)
{
    return x.value < y.value ? x : y;
}
public static DBBool operator |(DBBool x, DBBool y)
{
    return x.value > y.value ? x : y;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:22:16.100

1.  它是一个结构，所以“new”真正的意思是“在堆栈上初始化一个值”——这很便宜而且与新对象不同
2.  大多数结构是不可变的；我猜这也是；因此它不能只改变参数值并返回它 - 它必须用所需的内容初始化一个新值

# sql - rails - 搜索具有各种匹配的两个组合字段

> ID：12082203
> 
> 赞同：0
> 
> 时间：2012-08-22T22:18:21.700
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql

我的用户模型有：

用户（id、fname、lname）

我需要一个查询来按名称搜索用户。我一直在使用：

```
@users = User.find( :all,
                      :select => 'users.*',
                      :conditions => ["fname || ' ' || lname LIKE ?", '%'+"James Bond"+'%']
                    ) 
```

如果您搜索 James，则返回用户 (James Bond)，但如果您搜索“Bond”，则不会返回任何内容。如何更新此查询以通过 fname、lname 或 fname 和 lname 返回用户？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:14:05.703

我不知道您如何在 RoR 中指定它，但在 PostgreSQL 级别，听起来您可能想要使用三元组搜索。如果您使用的是 PostgreSQL 版本 9.1 或更高版本，您可以将其与“K 最近邻”（KNN）搜索结合起来，直接返回 K 最佳匹配。这通常比其他名称的“模糊”搜索技术快几个数量级。

要安装 trigram 支持，如果您的机器上有 contrib 模块，请键入：

```
CREATE EXTENSION pg_trgm; 
```

假设两个名称字段都是`NOT NULL`（只是为了避免用`COALESCE`谓词混淆答案），可以使用以下方法创建索引：

```
CREATE INDEX users_name ON users USING gist
  ((fname || ' ' || lname) gist_trgm_ops); 
```

这是有趣的部分，您可以在几毫秒内从数百万条记录中找到近似匹配：

```
SELECT *
  FROM users
  ORDER BY (fname || ' ' || lname) <-> 'James Bond'
  LIMIT 10; 
```

`<->`算子是“距离”算子。当该`ORDER BY`子句用于针对用 定义的索引的子句`gist_trgm_ops` *并且*您使用 a`LIMIT`时，将从索引中以“最佳匹配”序列返回行。

# memory - Cuda - 选择性内存存储

> ID：12082206
> 
> 赞同：0
> 
> 时间：2012-08-22T22:18:34.010
> 
> 标签：memory, if-statement, cuda, store, coalescing

在我的内核中，如果满足条件，我会更新输出缓冲区的一项

```
if (condition(input[i])) //?
    output[i] = 1; 
```

否则输出可能保持不变，值为 0。

更新的密度非常不可预测，具体取决于输入。此外，哪个输出位置将被更新也是未知的。（在某些情况下，我可能会强迫他们）

我的问题是，写所有项目、实现合并还是选择性写更好？

```
output[i] = condition(input[i]); //? 
```

你介意讨论你的陈述吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:32:18.177

在我的设置内核上，条件设置（选项 1）运行 1.727 us 和选项 2 1.399 us。这是我的代码（setConditional 更快）：

```
__global__ void conditionalSet(unsigned int* array) {
    if ((threadIdx.x & 3) == 0) {
        array[threadIdx.x] = 1;
    }
}

__global__ void setConditional(unsigned int* array) {
    array[threadIdx.x] = (threadIdx.x & 3) == 0 ? 1 : 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T01:36:27.370

即使 warp 中的某些线程不参与加载或存储，只要所有参与的线程都满足合并的要求，就可以实现合并。所以条件写入应该对内存吞吐量没有影响。

但是，由于涉及分支，执行条件写入可能会涉及额外的指令（例如，这可能会解释 Eugene 在他的回答中测量的性能差异）。

# php - php按值传递对象

> ID：12082208
> 
> 赞同：2
> 
> 时间：2012-08-22T22:18:36.197
> 
> 标签：php, recursion, reference

我在 php 中玩了一下递归。不幸的是，php 值智能复制想法和默认通过引用传递对象并没有使它更容易。出现问题是因为迭代编号 X 所做的修改在迭代 ex X-2 中可见

例如：

```
/**
 * Silly function to find last element in array
 * @param ArrayObject $input  
 */
function process(ArrayObject $input) {
    if ($input->count() == 1) {
        return $input->getIterator()->current();
    }
    $ar = $input->getArrayCopy();
    array_shift($ar);
    $input->exchangeArray($ar);
    return process($input);
}

$in = new ArrayObject(range('a', 'd'));
echo 'Before ' . PHP_EOL;
var_dump($in);
echo PHP_EOL . 'Process - last element is: ' . process($in) . PHP_EOL;
echo 'After ' . PHP_EOL;
var_dump($in); 
```

输出是

```
Before 
object(ArrayObject)#1 (1) {
  ["storage":"ArrayObject":private]=>
  array(4) {
    [0]=>
    string(1) "a"
    [1]=>
    string(1) "b"
    [2]=>
    string(1) "c"
    [3]=>
    string(1) "d"
  }
}

Process - last element is: d
After 
object(ArrayObject)#1 (1) {
  ["storage":"ArrayObject":private]=>
  array(1) {
    [0]=>
    string(1) "d"
  }
} 
```

正如您所见，递归也修改了原始 $in 变量，我期望每次新迭代都将对值的副本进行操作。在这个例子中它不是必需的，但是如果递归函数更复杂的话。

简单的解决方案 - 克隆

```
function process(ArrayObject $input) {
    $input = clone ($input);
    if ($input->count() == 1) {
        return $input->getIterator()->current();
    }
    $ar = $input->getArrayCopy();
    array_shift($ar);
    $input->exchangeArray($ar);
    return process($input);
} 
```

好的，可以，但是如果输入是非常复杂的多对象嵌套循环结构怎么办？好的，那么我可以序列化和反序列化值作为深拷贝的替代品

```
function process(ArrayObject $input) {
    $input = unserialize(serialize($input));
    if ($input->count() == 1) {
        return $input->getIterator()->current();
    }
    $ar = $input->getArrayCopy();
    array_shift($ar);
    $input->exchangeArray($ar);
    return process($input);
} 
```

完美 - 它可以工作，但是在每次迭代中取消/序列化（尤其是使用巨大的 $ 输入）有点浪费时间和 cpu。

有没有其他方法可以做到这一点，这让我不必担心我需要“破解一点”才能使用 php 进行标准用法。

//编辑带有 Tigrang 建议的示例

Tigrang 你的建议很有趣，但是

```
function process(ArrayObject $input) {
    $input = new ArrayObject(($input));
    $input->offsetSet(null, 'f');
}

$in = new ArrayObject(range('a', 'd'));
echo 'Before ' . PHP_EOL;
var_dump($in);
process($in);
echo 'After ' . PHP_EOL;
var_dump($in);

 After 
object(ArrayObject)#1 (1) {
  ["storage":"ArrayObject":private]=>
  array(5) {
    [0]=>
    string(1) "a"
    [1]=>
    string(1) "b"
    [2]=>
    string(1) "c"
    [3]=>
    string(1) "d"
    [4]=>
    string(1) "f"
  }
} 
```

它仍然保持对外部变量的引用

//编辑 2

```
class Engine {

    public $power = 999;

}

class Car {

    public $name = '';
    public $engine = '';

    public function __construct($name, $power) {
        $this->name = $name;
        $this->engine = new Engine();
        $this->engine->power = $power;
    }

}

function process(ArrayObject $input) {
    $input = new ArrayObject(($input->getArrayCopy()));
    $ford = $input[0];
    $ford->name = 'Audi';
    $ford->engine->power  = 1500;
}

$ar = array(new Car('Ford',  130));
$in = new ArrayObject($ar);
echo 'Before ' . PHP_EOL;
var_dump($in);
process($in);
echo 'After ' . PHP_EOL;
var_dump($in); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:26:38.107

AFAIK，这是 PHP 的一个限制。正如您所指出的，发生这种情况是因为 PHP 5x 中有两件事不是免费的。

*   对象总是作为引用传递
*   clone() 只做浅拷贝，没有语言固有的深拷贝机制

`unserialize(serialize($obj)`是目前唯一可用的（非常低效的）解决方法。让我们希望众神在即将到来的版本中解决其中的一些问题，而不是仅仅对如何在大肆宣传（和延迟）版本 6 中实现 unicode 感到头疼！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:59:26.333

为什么不`$input = new ArrayObject($input);`

据我所知，它复制深度嵌套并且比序列化更快：http: [//viper-7.com/kHLCCP](http://viper-7.com/kHLCCP)

# javascript - JavaScript 从函数声明而不是 $(document).ready() 开始执行？

> ID：12082211
> 
> 赞同：0
> 
> 时间：2012-08-22T22:19:25.230
> 
> 标签：javascript, jquery, oop, function

我正在尝试为动态下拉菜单编写脚本，作为学习 OOP javascript 和 jQuery 的一种方式。[您可以在www.industrialMerchants.com/industrialMerchants](http://www.industrialMerchants.com/industrialMerchants)查看虚拟网站。该脚本可在[www.industrialMerchants.com/industrialMerchants/javascript/horizo​​ntalDropMenu2.js找到](http://www.industrialMerchants.com/industrialMerchants/javascript/horizontalDropMenu2.js)

该脚本首先定义了一些对象，然后我有一个`$(document).ready()`带有闭包的闭包，用于启动将相关 jQuery 对象和 DOM 元素包装到我的对象模型中的过程。

问题是，当我加载用作虚拟网站的静态 html 文档时，Firebug 给了我以下错误：

```
"TypeError: jqObject is undefined." 
```

错误指向以下函数的第五行。

```
function Menu(jqObject) {
    self = this;
    this.self = jqObject;
    this.submenus = (function(){
        jqObject.children().children("ul").each(function() { <<--- Error
            submenu = new Submenu($(this), self);
            submenus.push(submenu);
            return submenus;
        });
    }());
} 
```

调用该函数的行在这里：

```
$(document).ready(function(){ 
     menus = new Array();
     $("ul.horizontalDropMenu").each(function(){
         menu = new Menu($(this));
         menus.push(menu);
     });
 }); 
```

如您所见，对`Menu()`对象构造函数的调用包括作为参数的对 jQuery 对象的引用，因此已`jqObject`明确定义。那么给了什么？

当我在从声明开始的代码中插入断点时`$(document).ready()`，执行完全跳过它，并从函数声明本身开始。就好像浏览器在对它们进行任何显式调用之前尝试执行函数声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:24:14.703

设置断点并向上调用堆栈给了我这一行（外部`.ready`- 但没关系）：

```
Submenu.prototype = new Menu(); 
```

您正在创建一个*没有*jQuery 对象但使用的菜单实例`undefined`。

# javascript - 制作选项自动“点击”假设我有一个这样的下拉列表：<select name="perPage"><option value="5">5</option> <option value="10">10</option> <option value="15">15</option> <option value="25">25 ID：12082212 赞同：2 时间：2012-08-22T22:19:50.733 标签：javascript, jquery, html, forms 回答 #1 赞同：8 时间：2012-08-22T22:22:58.563 您可以使用选择的“onchange”元素： <select name="dropdown" id="dropdown" onchange="this.form.submit()"> 这仅使用 javascript 而无需加载整个 JQuery 库 - 除非您将 JQuery 用于站点上的其他功能。 回答 #2 赞同：2 时间：2012-08-22T22:23:41.717 您可以使用 jQuery 监听change事件并自动提交父表单。像这样的东西： $('.selector select[name=perPage]').on('change', function(e) { $(e.currentTarget).closest('form').submit(); }); 回答 #3 赞同：1 时间：2012-08-22T22:23:01.453 分配一个 id 来选择，例如selectID，然后添加 jQuery 的形式： $('#selectID').change(function(){ this.form.submit() }); 回答 #4 赞同：0 时间：2012-08-22T22:22:53.940 $('select[name="perPage"]').on('change', submitForm); 其中 submitForm 是提交表单的函数。</option></select>

# php - 如果 # 登录 URL，则 Codeigniter 重定向功能失败

> ID：12082215
> 
> 赞同：0
> 
> 时间：2012-08-22T22:20:42.903
> 
> 标签：php, codeigniter, url, session

如果用户未登录到我们的门户，我正在使用 PHP Codeigniter 库中的重定向将用户重定向到上次访问的 URL。

$uri = $this->ci->uri->uri_string(); $this->ci->session->set_flashdata('redirect' , $uri);

它工作正常，除了在一种情况下：

当 URL 中有 # 符号表示 ex 时：

[http://myview.com/library#portal/sh2qQXF3SxAbJ](http://myview.com/library#portal/sh2qQXF3SxAbJ)

它重定向回[http://myview.com/library](http://myview.com/library)

它不采用# 符号后的地址。

在我们的前端，我们使用 Backbone.js 来检测 # 符号并启动接下来需要使用 Javascript 完成的操作。

我的问题是是否有办法将整个 URL 存储在 codeigniter 会话变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:25:45.343

带有 的部分`#`称为片段，它永远不会传输到服务器（除非您手动执行，作为 AJAX 中的参数或其他东西）。因此，您的 PHP 永远不会在查询 URL 中看到它。

# ruby-on-rails - 如何构建 Rails 分析仪表板

> ID：12082218
> 
> 赞同：0
> 
> 时间：2012-08-22T22:21:27.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在寻找在 Rails 应用程序中为我的数据构建分析仪表板。

假设我有一个请求类型列表“Fizz”、“Buzz”、“Bang”、“Bar”。

我想根据类型显示每天的计数。

我该怎么做？

这是我打算做的事情：

1.  将 get_bazz_by_day、get_fizz_by_day 等添加到适当的模型中。
2.  在每个模型中获取 Fizz 类型的所有记录，然后创建一个存储日期和计数的数组。
3.  format in view 以便 JS 库可以将其格式化为漂亮的图形。

这听起来合理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:17:59.270

根据记录的数量，您的仪表板可能很快就会出现性能问题。

第 1 步具有误导性。不要单独获取每一天的数据，尝试一次获取所有数据。

在第 2 步中，您可以让数据库使用 group 方法在几天内进行聚合。

请参阅[http://guides.rubyonrails.org/active_record_querying.html#group](http://guides.rubyonrails.org/active_record_querying.html#group)

```
Fizz.select("date(created_at) as fizzed_day, count(*) as day_count").
     group("date(created_at)") 
```

在第 3 步中，您需要注意仍然显示没有任何 fizzbuzz 的日期，因为它们不会在查询中返回。

# ruby-on-rails - 使用 has_secure_password 进行 Capybara / Rspec 控制器测试

> ID：12082220
> 
> 赞同：0
> 
> 时间：2012-08-22T22:21:42.113
> 
> 标签：ruby-on-rails, rspec, capybara

我正在尝试使用 Capybara 测试我的控制器。我尝试了很多方法，但由于某种原因，我无法让它看到 current_user 会话。当我运行我的规范时，我知道登录有效。在我的控制器测试之前，我也在访问登录页面。但是当 :logged_in 函数被击中时，它似乎总是将我重定向回来。

所以不确定我错过了什么？

这就是我所拥有的..

session_controller

```
 def create
    user = User.find_by_username(params[:username])
    if( user && user.authenticate(params[:password]))
        user.update_attribute(:token, User.token_digest)
        flash[:notice] = "Success"
        session[:user_id] = user.id
        session[:token] = user.token
        redirect_to dashboard_index_path  
    else
        flash[:notice] = "Failed"
        flash.now.alert = "Invalid user name or password"
        render "new"
    end
end 
```

应用程序控制器

```
protect_from_forgery
  before_filter :logged_in 
private  

      def current_user 
        @current_user ||= User.find(session[:user_id]) if session[:user_id]
      end
      helper_method :current_user

      def logged_in
        if !current_user
            redirect_to root_url
          return
        end
        if session[:token] != current_user.token
          redirect_to root_url
        end
      end 
```

products_controller_spec

```
it 'Should display new product form' do
    user_login
    visit new_product_path
    response.body.should have_content("<h1>Create New Product</h1>")
end 
```

spec_helper.rb

```
def user_login
  visit root_path #this is new_session
  fill_in "username", :with => "admin"
  fill_in "password", :with => "111111"
  click_button "Login"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:05:23.140

好吧，我得到了它的工作，不确定它在政治上正确的方式但是..而不是访问页面，我只是很难设置会话。在 spec_helper.rb..

```
def user_login
    user = FactoryGirl.create(:user)
    session[:user_id] = user.id
    session[:token] = User.token_digest
end 
```

# c# - 找不到源类型“System.Data.DataRow”的查询模式的实现。未找到“加入”。

> ID：12082223
> 
> 赞同：1
> 
> 时间：2012-08-22T22:21:45.943
> 
> 标签：c#, linq-to-sql

错误在 qRow 上。如何用 linq 解决这个问题？我试图找到答案，但没有运气。

```
IEnumerable<DataColumn> iCols = (from i in Interlocks
        join r in Results on i.InterlockID equals r.InterlockID
        where r.StationType.Equals("RT") && r.LineID.Equals("1") && r.TestNo == 1 && r.StationID == 1
        && i.SerialNumber.Equals("C11205150001") && (r.DateTested >= DateTime.Now.AddMonths(-48) && r.DateTested <= DateTime.Now)
        select new { i.SerialNumber,i.ModelNumber,r.DateTested,r.InterlockID,r.ResultID,r.ProgramDescription,r.TestStatus,r.CycleTime}).Distinct().Cast<DataColumn>();
interlock.Columns.Add("SerialNumber",Type.GetType("System.String"));
interlock.Columns.Add("ModelNumber", Type.GetType("System.String"));
interlock.Columns.Add("DateTested", Type.GetType("System.DateTime"));
interlock.Columns.Add("InterlockID", Type.GetType("System.Int32"));
interlock.Columns.Add("ResultID",Type.GetType("System.Int32"));
interlock.Columns.Add("ProgramDescription",Type.GetType("System.String"));
interlock.Columns.Add("CycleTime", Type.GetType("System.Int32"));
interlock.Columns.AddRange(iCols.ToArray());
interlock.AcceptChanges();

foreach (DataRow qRow in interlock.Rows)
{
    var details = (from d in qRow
            join rd in Results_Details on d.ResultID equals rd.ResultID
            select new {d.DateTested,d.ResultID,rd.ResultNameID,rd.ResultValue}).Distinct(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:29:11.193

A`DataTable`不是强类型，您需要使用 a[`DataRow`的字段扩展名](http://msdn.microsoft.com/en-us/library/bb360891.aspx)或相应地转换对象。

```
from d in qRow
join rd in Results_Details on d.Field<String>("ResultID") equals rd.ResultID 
```

还记得添加一个引用 `System.Data.DataSetExtensions.dll`，`using System.Data;`正如 stakx 提到的那样。

# android - Android随机数和edittext

> ID：12082225
> 
> 赞同：1
> 
> 时间：2012-08-22T22:21:51.177
> 
> 标签：android

这里有什么问题？

随机数效果很好。

检查零件编号也很有效。

但是当我输入一个随机选择的相同数字时，总是“Toast Bad”。

代码： http: [//pastebin.com/0pdySnW9](http://pastebin.com/0pdySnW9)

抱歉，我无法在此处粘贴代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:26:43.083

在您的`onClick`方法中，您实际上是在生成另一个随机数。

因此，您输入的数字不会等于随机数，因为它不是屏幕上显示的数字。

根据您要实现的目标..删除第 32 行，并创建`random`一个全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:26:54.640

在您的 onClick 中，您正在使用此行生成一个新的随机数

```
int random = random(); 
```

您应该使您的随机变量成为成员变量，以便可以在整个活动中访问它而无需更改

前任

```
public class MainActivity extends Activity implements OnClickListener {

        private TextView display;
        private Button ok;
        public EditText et;
        private int random; //note this is now a member variable

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            ok = (Button) findViewById(R.id.button1);
            ok.setOnClickListener(this);
            display = (TextView) findViewById(R.id.textView1);
            et = (EditText) findViewById(R.id.etNumbers);
                random = random();
            display.setText("Random Number:" + random); // Show the random number

        }

        // ************RANDOM******************************
        public static int random() {
            Random generator = new Random();

            int x = generator.nextInt(100);
            return x;
        }

        // ************************************************

        public void onClick(View v) {
            // TODO Auto-generated method stub

            int numberEntered = -1;
            try {
                numberEntered = Integer.parseInt(et.getText().toString());
            } catch (NumberFormatException nfe) {
                Toast.makeText(et.getContext(), "That's not a number!",
                        Toast.LENGTH_LONG).show();
            }
            if (random == numberEntered) {
                Toast.makeText(et.getContext(), "Great!", Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(et.getContext(), "Bad!", Toast.LENGTH_LONG).show();
            }

        }

} 
```

# objective-c - 从 segue Objective-C 从另一个属性的 setter 设置一个属性

> ID：12082226
> 
> 赞同：0
> 
> 时间：2012-08-22T22:22:04.343
> 
> 标签：objective-c, ios, cocoa-touch, setter

作为参考，我正在尝试通过斯坦福 iTunes-U 课程学习 Objective-C。我想从另一个属性的设置器中更新一个属性（它们本质上是连接的。另外，那是不好的风格吗？）。我要更新的属性是一个 UILabel，但它不像我想的那样工作。这段代码在我的一个视图控制器中：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    [segue.destinationViewController setProgram:self.brain.program];
} 
```

自然地，这段代码调用了传入 viewController 的 Program 属性的 setter。这是设置器代码：

```
-(void)setProgram:(id)program {
    _program = program;
    self.title = [CalculatorBrain descriptionOfProgram:program];
    [self.graphview setNeedsDisplay];
    self.testLabel.text = @"Trying to update your text!";
} 
```

和头文件：

```
#import <UIKit/UIKit.h>

@interface GraphViewController : UIViewController
@property (nonatomic, strong) id program;

@property (weak, nonatomic) IBOutlet UILabel *testLabel;

@end 
```

现在，当这段代码运行时，随着 segue 的发生，新视图的标题确实发生了变化（self.title 行有效）。但是，UILabel 不会更新。此外，如果我在 viewDidLoad 中再次调用 setter，它确实会更改 UILabel。是因为`self`更新了吗？这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:14:36.090

在其中一场讲座中，教授解释说在 prepareForSegue 中还没有设置出口。这意味着 testLabel 为 nil，并且您正在向 nil 发送消息（这是允许的并且不会使您的应用程序崩溃）。要解决您的问题，请在 viewDidLoad 或 viewWillAppear 中设置 textLabel 的文本。

我相信这在 iOS 6 中是“固定的”，但它不会向后兼容，所以如果你还想支持 iOS 5，你必须使用 viewDidLoad 或 viewWillAppear 来更新 outlets（我认为这样做更好反正）。

# google-app-engine - Google App Engine、Eclipse、SDK 不可用？

> ID：12082230
> 
> 赞同：2
> 
> 时间：2012-08-22T22:22:30.340
> 
> 标签：google-app-engine

今天早些时候，我按照此处的说明在 eclipse 4.2 上安装了 google app 引擎：

[https://developers.google.com/appengine/docs/java/tools/eclipse](https://developers.google.com/appengine/docs/java/tools/eclipse)

我现在正试图将它安装在另一台机器上。但是，当我按照第 2 步操作时，即将[https://dl.google.com/eclipse/plugin/4.2](https://dl.google.com/eclipse/plugin/4.2)插入到 Work With 文本中，我遇到了问题。

我被告知要单击 SDK 复选框，然后单击“Google App Engine Java SDK”。但是，“Google App Engine Java SDK”不再位于 SDK 复选框下，尽管我确信它以前是。

我尝试下载不同版本的 Eclipse，看看是否是兼容性问题，但这无济于事。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:22:29.010

[这里](https://stackoverflow.com/questions/12082268/google-app-engine-sdk-does-not-appear-under-sdks-group-while-installing-it-using)同样的问题。

安装谷歌的eclipse插件后，我终于手动安装了sdk。

我创建了一个新的 Web 应用程序项目（“蓝色 g”图标）-> 新的 Web 应用程序->（Google SDK）配置 sdks-> 添加。然后选择从这里下载的解压sdk：[https ://developers.google.com/appengine/downloads?hl=es](https://developers.google.com/appengine/downloads?hl=es)

但是，对于缺少的可下载 SDK 仍然没有答案。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T14:47:07.687

在更新 App Engine SDK 期间存在一个暂时性问题，这意味着 Eclipse 用户暂时无法使用该通道。此问题已得到解决，您应该能够像以前一样从频道查看和更新​​。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T09:13:10.720

用于 Eclipse 更新站点 URL 的 Google 插件：

Eclipse 4.3（开普勒）

[https://dl.google.com/eclipse/plugin/4.3](https://dl.google.com/eclipse/plugin/4.3)

Eclipse 3.8/4.2 (朱诺)

[https://dl.google.com/eclipse/plugin/4.2](https://dl.google.com/eclipse/plugin/4.2)

Eclipse 3.7（靛蓝）

[https://dl.google.com/eclipse/plugin/3.7](https://dl.google.com/eclipse/plugin/3.7)

# javascript - 如何从gsp页面上的javascript调用messages.property（参数化）值

> ID：12082235
> 
> 赞同：3
> 
> 时间：2012-08-22T22:22:56.957
> 
> 标签：javascript, grails, internationalization

我是 grails 的新手，并试图在 gsp 上的 g:set 标记中设置 messages.property (i18n) 的值，然后在同一个 gsp 页面上的 java 脚本中使用它。例如：

我的 messages.property 应该如下所示： **operation.hello=Hello '{0}'**

在普惠制中应该有：

```
<g:set var="foo" value="${operation.hello('Patty')}" scope="page"/> 
```

和

```
<g:javascript>
  alert( $foo )
</g:javascript> 
```

不知道如何处理。有人可以帮忙吗？

**我们的基本意图是使用来自 javascript 的 parametrized-messages.property 值。**

尝试了 JAWR 插件，效果很好，但 JAWR 存在我们不希望出现的其他问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:46:35.583

只要您了解所有这些都是在服务器端处理的，我认为您需要做的就是使用正确的语法：

```
<g:set var="foo" value="${g.message(code: 'operation.hello', args: ['Patty'])}" scope="page"/>

<g:javascript>
  alert( "${foo}" );
</g:javascript> 
```

当它到达浏览器时，它应该只是读取：

```
<script type="text/javascript">
  alert( "Hello Patty" );
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:27:59.430

这回答了你的问题了吗？

```
<script type="text/javascript">
     var helloTo = "Patty";
     var message = "${g.message(code: 'operation.hello', args: ["+ helloTo + "])}";
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T10:15:32.473

如果我明白你的意思，基本上你不能。

G 标签是服务器端的东西。在呈现 g 标签时，它们的值 args 必须存在，您不能将 javascript（客户端）值传递给 g 标签（基本上它是一个服务器端代码段）。您可以将 ag 标记的结果放入 javascript 字符串中，而不是相反。

# unit-testing - 用于 Visual Studio 2012 的带有 Xunit 测试运行器扩展的混合模式程序集

> ID：12082238
> 
> 赞同：4
> 
> 时间：2012-08-22T22:23:18.067
> 
> 标签：unit-testing, visual-studio-2012, xunit

我无法获得 Visual Studio 2012 RTM 的 Xunit 测试运行器扩展来加载我的 x64 混合模式程序集。

错误是：System.IO.FileLoadException：混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有其他配置信息，则无法在 4.0 运行时中加载。

这里有一个类似的问题：[Visual Studio 2012 Test Project Mixed Mode Runtime](https://stackoverflow.com/questions/11970686/visual-studio-2012-test-project-mixed-mode-runtime-net-2-0)

我已在此文件夹中的所有 .config 文件中添加了以下行：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
</startup> 
```

我什至将它添加到此文件夹：C:\Users\Alex\AppData\Local\Microsoft\VisualStudio\11.0\Extensions\zuclypws.1z3 包含 xunit.runner.visualstudio.dll .. 我将其命名为 xunit.runner.visualstudio。 dll.config

有谁知道如何让这个工作？我希望这不是那么不必要的复杂。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T04:23:40.517

您还需要将 .net 2.0 程序集添加到列表中。

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
    <supportedRuntime version="v2.0.50727"/>
  </startup>
</configuration> 
```

我在 VS 2012 中写了一篇关于这个问题的帖子：

[http://www.diaryofaninja.com/blog/2012/09/13/net-20-mixed-mode-assemblies-in-visual-studio-net-45-test-projects](http://www.diaryofaninja.com/blog/2012/09/13/net-20-mixed-mode-assemblies-in-visual-studio-net-45-test-projects)

在 Visual Studio 2012 中，您需要将启动代码添加到以下文件：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.executionengine86.exe.config 
```

**您可能还需要将此添加到 xunit 测试运行程序的应用程序文件夹内的 app.config（即程序文件内）**

# c# - 无法在 Windows 图像采集 (WIA) 中使用 iMac 的内置网络摄像头

> ID：12082241
> 
> 赞同：0
> 
> 时间：2012-08-22T22:23:31.930
> 
> 标签：c#, windows-8, webcam, visual-studio-2012, wia

我正在尝试使用 iMac 中的内置网络摄像头与 Windows 图像采集 (WIA) 一起使用，我正在尝试从我的网络摄像头捕获图像，但是当我尝试将设备连接到我的计算机时出现异常被扔了`Exception from HRESULT: 0x80210015`。我正在使用 Windows 8、Visual Studio 2012，并且正在用 C# 制作程序。是我的网络摄像头吗？我应该购买另一个网络摄像头吗？

# opencl - OpenCL 中的内存偏移

> ID：12082242
> 
> 赞同：0
> 
> 时间：2012-08-22T22:23:39.953
> 
> 标签：opencl

有没有办法做这样的事情。

```
int length = 1000;
float *h_input = new float[length * 100];
size_t bytes = length * 100 * sizeof(float);
cl_mem m_input  = clCreateBuffer(context, CL_MEM_READ_WRITE, bytes, NULL, &err);
cl_mem m_output = clCreateBuffer(context, CL_MEM_READ_WRITE, bytes, NULL, &err);
clEnqueueReadBuffer (queue, m_input, true, 0, bytes, h_input, 0, NULL, NULL);
for (int i = 0; i < 100; i++)
{
 some_function(length, m_input + i, m_output + i);
} 
```

我对此进行了一些天真的测试，但它似乎不起作用。这是我得到的错误。

```
 invalid use of incomplete type 'struct _cl_mem' 
```

除了将 i 作为额外参数传递之外，还有什么解决方法吗？引入额外参数需要将上游代码一直更改到内核..

**编辑**为清楚起见添加了更多信息。

m_input 的偏移量可以通过**`clEnqueueReadBuffer`**使用适当的偏移量来解决（即使它可能比单次调用更昂贵）。但是 m_output 稍后会重复使用，因此不能选择传输回主机。

**编辑**我的谷歌技能让我失望了。

但是我通过查看 cl.h 找到了答案。[**`clCreateSubBuffer`**](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clCreateSubBuffer.html)是答案。还没有答案。因此，我将使用示例代码接受第一个答案**`clCreateSubBuffer()`**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:47:39.193

我通过查看 cl.h 找到了答案。[**`clCreateSubBuffer`**](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clCreateSubBuffer.html)是答案。还没有答案。因此，我将使用示例代码接受第一个答案**`clCreateSubBuffer()`**。

# maven - maven 跳过打包阶段

> ID：12082249
> 
> 赞同：4
> 
> 时间：2012-08-22T22:24:10.307
> 
> 标签：maven, ant, package, pom.xml, maven-antrun-plugin

我正在构建一个 ANT 项目并构建 POM 文件。当前的 ANT 构建文件有一个使用 weblogic 的 JwscTask 生成 2 个 EAR 文件的目标。现在我只需将这 2 个 EAR 文件部署到远程 repo 的 weblogic 服务器。我不希望 Maven 生成任何包，而是获取生成的 2 个 EAR 文件并部署它。本质上，清理、编译和部署阶段必须由 Maven 处理；包装由ANT完成。我使用 pom 文件中的 maven-antrun-plugin 来调用 build.xml 文件中的目标。

如果我选择打包为“POM”，那么 Maven 将不会生成任何打包，但它也不会编译 src 文件。

有什么方法可以跳过 Maven 生命周期中的包阶段？假设我在 POM 中指定打包为 WAR，有没有办法跳过 WAR 文件的生成，并部署 2 个 EAR 文件？

这是POM文件的一部分：

```
<build>
  <plugins>
   <plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-antrun-plugin</artifactId>
     <version>1.3</version>
     <executions>
      <execution>
        <phase>package</phase>
        <configuration>
        <tasks>
            <ant antfile="${basedir}/build.xml" target="build-service"/>
        </tasks>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
     </executions>
   </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:18:05.290

使用[`mvn deploy:deploy-file`](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)目标。这允许您将文件部署到存储库中，而无需在 Maven 中完成项目的其余部分。你可以给它一个`pom.xml`来部署它，或者指定各种参数：

```
$ mvn deploy:deploy-file -Dfile=app.ear \
    -DpomFile=pom.xml \
    -DrepositoryId=VeggieCorp \
    -Durl=http://mvn.veggiecorp.com/releases 
```

或者

```
$ mvn deploy:deploy-file -Dfile=app.ear \
    -DgroupId=com.veggicorp \
    -DartifactId=app \
    -Dversion=3.2.1 \
    -DrepositoryId=VeggieCorp \
    -Durl=http://mvn.veggiecorp.com/releases 
```

`-DrepositoryId`事实上，除非您创建了 a ，否则您甚至不需要该参数，`settings.xml`因为存储库需要用户名和密码或需要代理。

# html - 没有 iframe 的沙箱到 HTML？

> ID：12082255
> 
> 赞同：2
> 
> 时间：2012-08-22T22:25:37.073
> 
> 标签：html, xhtml

我有一个包含爬虫提供的动态内容的页面。但有时此内容在 HTML 中存在问题（没有关闭标签、标签关闭而不打开等）。所以，这个错误的内容破坏了整个页面，因为关闭或打开了他们不应该打开的东西。

HTML的常见错误。

`<div><p>foo</p>`

`<p>bar</p></div>`

`<p><a>link</p></a>`

如何将此内容放入沙箱中以不破坏页面？由于 SEO，无法使用 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:49:13.650

如何处理动态内容以找出哪些标签尚未关闭，并（使用堆栈）在末尾或必要时添加它们（以确保正确的标签嵌套）？但是，如果您这样做，我建议在客户端执行此操作。

# java - 类不会使用 GWT-RPC 序列化？

> ID：12082257
> 
> 赞同：0
> 
> 时间：2012-08-22T22:25:53.183
> 
> 标签：java, gwt, serialization, gwt-rpc

这是我要发送的课程：

```
public class DummyClass implements Serializable, IsSerializable {

  private Map<String, Object> properties = new HashMap<String, Object>();

  public DummyClass() {
    // stuff
  }
  public Object getValue(String key) {
    return properties.getValue(key);
  }
  public void setValue(String key, Object value) {
    properties.put(key, value);
  }
} 
```

但是当我尝试将它作为参数发送到 GWT RPC 中的方法时，我得到了一个伞形异常。

```
 DummyClass dummy = new DummyClass();
  dummy.setValue("foo", "bar");
  ServiceImpl impl = Gwt.create(SampleService.class).doSomething(dummy); 
```

我可以删除 ... 中指定的泛型类型，`Map properties`但除此之外，`Object`或者`Serializable`对可以存储在属性映射中的内容没有限制。

使用 Java 的标准序列化可以很好地序列化类的实例。

此外，GWT 编译器没有显示警告或错误。

有什么人可以指出我可以尝试让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:36:34.507

也许您可以尝试用更具体的东西（例如）替换方法的`java.lang.Object`返回类型`getValue()`和参数类型。`setValue()``java.io.Serializable`

另请注意，如果您的对象仅`Serializable`实现（除此之外无需实现`IsSerializable`），您也可以。

# django - 如果评估的变量为 False，为什么我的 django 模板中的这个 IF 语句会执行？

> ID：12082260
> 
> 赞同：1
> 
> 时间：2012-08-22T22:26:17.140
> 
> 标签：django, django-templates

我正在开发一个不属于我的 django 项目，但正在尝试将本地 css/js 选项添加到 webapp。

在 settings_local.py 我添加了这个：

```
if os.path.exists('templates_local/local.css'):
    LOCAL_CSS = True
    logging.debug('LOCAL_CSS: %s' % LOCAL_CSS)
else:
    LOCAL_CSS = False
if os.path.exists('templates_local/local.js'):
    LOCAL_JS = True
    logging.debug('LOCAL_JS: %s' % LOCAL_JS)
else:
    LOCAL_JS = False 
```

这似乎有效（见下文）。在我的主模板中，我添加了

```
{% if LOCAL_CSS %}
    {% compress css  %}
        {% include "../templates_local/local.css" %}
    {% endcompress  %}
{% endif %} 
```

（该项目使用 django-compressor）。

如果存在 local.css 文件，这将按我的预期工作，但如果该文件不存在，我会收到错误消息：

> 渲染时捕获 TemplateDoesNotExist：../templates_local/local.css

在堆栈跟踪中，LOCAL_CSS 被列为 False。不幸的是，堆栈跟踪下降以显示 IF 没有找到文件（这是预期的），但似乎不包括 IF 的评估方式，尽管它正在执行，就好像它正在评估为 True ......但无论如何，这并不能帮助我找出问题所在。

我还尝试明确检查`if LOCAL_CSS == True`如果上面的 if 语句仅仅因为变量存在而被评估为 True 。

无论如何，我希望这是迄今为止我错过的关于 django 的一个奇怪的细节，或者有更多经验的人会立即看到我做错了什么。

如果您认为我以错误的方式处理此问题，请随时仔细阅读我没有接受者的原始问题： [https ://stackoverflow.com/questions/11975054/django-recipe-for-local-css-and- local-js-like-settings-local-py-for-app-with-m](https://stackoverflow.com/questions/11975054/django-recipe-for-local-css-and-local-js-like-settings-local-py-for-app-with-m)

* * *

## 回答！- 三个独立的问题

通常情况下，多个错误步骤似乎是一个更简单的单一问题

最终的工作实际上非常简单：

在[supervacuo 的建议](https://stackoverflow.com/a/12082432/602581)和一些争论之后，我添加了一个上下文处理器，templates_local/context.py：

```
import os.path

install_dir = os.path.normpath(os.path.join(os.path.dirname(__file__), '..'))
localcss = os.path.join(install_dir, 'templates_local', 'local.css')
localjs =  os.path.join(install_dir, 'templates_local', 'local.js')

def local_static(context):
    return {
        'LOCAL_CSS': localcss if os.path.exists(localcss) else False,
        'LOCAL_JS':  localjs  if os.path.exists(localjs)  else False,
        } 
```

并添加`"rooibos.templates_local.context.local_static",`到 settings.py 文件中预先存在的 TEMPLATE_CONTEXT_PROCESSORS 列表中。

我只需要将模板中的 if 语句切换为 if not：

```
{% if LOCAL_CSS != False %}
    {% compress css  %}
        {% include LOCAL_CSS %}
    {% endcompress  %}
{% endif %} 
```

* * *

## 什么地方出了错？

### 问题 1 - 我对模板上下文中可用的内容感到困惑

查看[supervacuo 的第一个建议](https://stackoverflow.com/a/12082432/602581)

### 问题 2 - 缺乏经验/熟悉环境

我没有发现/怀疑在 django 的上下文中，像 os.path.exists() 这样的方法是从 manage.py 的位置执行的，而不是你调用它的 path/file.py （这在事后诸葛亮）

### 问题 3 - 有缺陷的逻辑，太简单的方法，也许是别的

我怀疑如果文件不存在，`TEMPLATE_DEBUG = True`您可能无法包含路径字符串（例如）而不会出现错误。`{% include "../templates_local/local.css" %}`

但无论如何，它现在的工作方式（确定文件存在，然后保存绝对路径或 False 作为模板变量似乎是一个更强大的解决方案，并且在模板中更具可读性。

再次感谢 supervacuo，您的建议和评论非常有用——我觉得我因为他们而对 django 有了一些了解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:46:48.380

*（根据您的评论回复）*

您实际上并没有将新`LOCAL_CSS`变量传递给模板，这绝对是您在继续之前需要解决的问题。*默认情况下，其中的一些*值`settings.py`是可用的（*例如* `MEDIA_URL`），但这些是由[Django 的默认上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)添加的，在[`TEMPLATE_CONTEXT_PROCESSORS`](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS). `{{ MEDIA_URL }}`是可用的，例如，因为[`django.core.context_processors.media`](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django-core-context-processors-media).

那么，向每个页面添加上下文变量的最佳方法是[自定义上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#writing-your-own-context-processors)。类似于以下内容：

```
# app/context.py
from django.conf import settings

def local_static(context):
    # Make sure to return a dictionary
    return {
        'LOCAL_CSS': settings.LOCAL_CSS,
        'LOCAL_JS': settings.LOCAL_JS,
    }

# settings.py
TEMPLATE_CONTEXT_PROCESSORS = (
    # ... keep the defaults
    'app.context.local_static'
)
LOCAL_CSS = 'foo'

# template.html
{{ LOCAL_CSS }}
{# should output "foo" #} 
```

为此，您应该使用a`RequestContext`而不是plain`Context`来呈现您的模板；Django 文档说：

> 如果您使用 Django 的`render_to_response()`快捷方式来使用字典的内容填充模板，则`Context`默认情况下您的模板将被传递一个实例（而不是 a `RequestContext`）。要`RequestContext`在模板渲染中使用 a，请将可选的第三个参数传递给`render_to_response()`：`RequestContext`实例

事实上，最简单的方法是[使用`render()`而不是`render_to_response()`](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#render)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:50:34.440

好的，这个兔子洞越来越深了（希望我们可以编辑现有的问题并回答一些普遍有用的东西——一旦这一切都整理好了）。

相对路径（如`"local.css"`）`os.path.exists()`是相对于您在运行时所在的目录进行解释的`runserver`。因此，尽管`os.path.exists('local.css') == True`在该目录中，您的调试内容需要指定相对路径`manage.py`（或为简单起见将它们设为绝对路径）。

我不确定`try .. finally`在这里做什么，但也许只是这样做：

```
from django.conf import settings
import os

def local_static(context):
    # Make sure to return a dictionary
    return {
        'LOCAL_CSS': '/path/to/local.css' if os.path.exists('/path/to/local.css') else False,
        'LOCAL_JS': '/path/to/local.js' if os.path.exists('/path/to/local.js') else False,
        } 
```

一旦你确认它按预期工作，从那里开始构建（在*etc.*`if os.path.exists()`中进行测试）`local_settings.py`

# javascript - 验证用户输入是否符合某些标准，而不是将输入输入到数组中，可能需要最基本的解决方案

> ID：12082263
> 
> 赞同：0
> 
> 时间：2012-08-22T22:26:42.883
> 
> 标签：javascript, arrays, validating

大家好。我正在尝试找到一种解决方案来根据某些规范检查用户输入，如果它们有效，请将它们输入到数组中。对数组没有限制，因此长度等是未知的。该程序应该实现的所有细节都显示在下面的代码中。我只需要弄清楚如何测试输入，如果它是有效的，则将其放入要存储的数组中。我需要的解决方案是基本的而不是高级的，因为我才刚刚开始。

请帮忙。:)

```
 /**
 * To capture valid user inputs for calculation
 */
while (confirm('Do you want to continue?') == true)
{   

    //Ask user input for course code
    CourseCode = prompt('Enter Your Course Code like CSC1401');

    //Ask user input for grade      
    CourseGrade = prompt('enter your grade for this course 0-7');

    // Check if the user inputs are valid:
    //      A: the course code is in valid format: (i) 7 characters; (ii) first 3 are letters in uppercase; (iii) last 4 are digits;        
    //      B: the grade is a valid number: (i) a number; (ii) in the range of 0-7; 
    //      C: a new course code that hasn't been recorded yet; 

    //<<YOUR CODE GOES HERE>>
    if (CourseCode == CourseArray[CourseArray.indexOf(CourseCode)])
        { alert (CourseCode + 'Error C: Duplicate Record')
        }
    if ( CourseCode.slice(0,3) != CourseCode.slice(0,3).toUpperCase()  || CourseCode.length != 7 || isNaN(CourseCode.slice(3)))
        {alert(CourseCode +' Error A: Invalid Course Code');
        }
    if (CourseGrade < 0 || CourseGrade > 7 || isNaN(CourseGrade)  )
        {alert(CourseGrade +' Error B: Invalid Grade');
        }

    else
        {CourseArray.push(CourseCode);
         GradesArray.push(parseInt(CourseGrade));
        }

    //if the course and grade are valid then store them somewhere for future process
    //if invalid then display to user an error message corresponding to the problem type(s). 
    //Error messages:   'Problem Type A - Invalid course code; '
    //                  'Problem Type B - Invalid grade; '
    //                  'Problem Type C - Duplicate Record.'
    //Note that 
    //  1\. a combination of multiple error messages is possible if more than one error type is captured;
    //  2\. the error messages don't need to go for further details.

    //<<YOUR CODE GOES HERE>>       

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:48:32.713

1.  按照惯例，在命名 javascript 变量时使用[lowerCamelCase是最常见/最佳实践。](http://c2.com/cgi/wiki?LowerCamelCase)

2.  您将课程代码和成绩存储在两个单独的数组中，您可能希望查看 JSON 对象或地图以 { CourseCode: CourseGrade } 的格式存储数据

3.  您需要第三个对象来存储您的错误消息，而不是像您已经在做的那样警告（）错误消息[即：一个数组]`var errorMessages = []; errorMessages.push("error message 1")`

4.  为了验证输入，您可以查看正则表达式模式/匹配。

5.  你真的应该声明你的变量`var`以避免使用全局变量

*[如果是这样，请将此问题标记为“作业”]*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:40:43.063

这是输入的测试：

```
var CourseCode = 'AAA4331'; // from prompt
var CourseGrade = '7'; // from prompt 

var CourseCode_pat = /[A-Z][A-Z][A-Z]\d\d\d\d/;
var CourseGrade_pat = /[0-7]/;
if(CourseCode.match(CourseCode_pat) && CourseGrade.match(CourseGrade_pat))
     alert('passed') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:44:20.880

这是家庭作业，对吧？如果您找到自己的答案，对您更好。这是一个开始：使用 substring 方法选择输入字符串的一部分并对其进行测试。

```
str.substring(1, 2) 
```

[http://www.w3schools.com/jsref/jsref_substring.asp](http://www.w3schools.com/jsref/jsref_substring.asp)

另一种选择是使用正则表达式

[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

但也许事实并非如此......

# ruby-on-rails - 如何让 Rails 的acts_as_list 将新项目添加到列表的开头？

> ID：12082264
> 
> 赞同：5
> 
> 时间：2012-08-22T22:26:49.463
> 
> 标签：ruby-on-rails, acts-as-list

我有一个与[acts_as_list](https://github.com/swanandp/acts_as_list)集成的模型。但是，默认情况下，创建的新项目会添加到列表的*末尾*。是否有默认方式将新项目添加到*开头*？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-12T21:52:37.687

尝试使用`add_new_at`配置选项：

```
acts_as_list scope: :todo, add_new_at: :top 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T22:35:14.300

您可以更改列表项的显示方式。颠倒顺序`todo_items`有效地实现了这一点。

`has_many :todo_items, :order => "position ASC"`

否则，也许您可`position`​​以在`after_create`.

# android - Android - 在按下时开始动作并在发布时停止

> ID：12082273
> 
> 赞同：0
> 
> 时间：2012-08-22T22:28:00.817
> 
> 标签：android, onclicklistener

我有一个项目列表，我希望当用户按下其中一个项目时会打开一个弹出窗口，当他放手时它会关闭。

我知道如何通过使用 setOnItemClickListener 按下键（互联网上的无数示例）打开弹出窗口。当我重新启动该项目时，如何让它停止？

谢谢你。

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:36:58.930

考虑使用 OnTouchListener() 代替，它为向下、向上、移动等捕获单独的事件：

```
view.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            // Open popup
            break;
        case MotionEvent.ACTION_UP:
            // Close popup
        }
        return true;
    }
}); 
```

# mysql - Python MySQLdb 在重复时执行多次更新

> ID：12082274
> 
> 赞同：0
> 
> 时间：2012-08-22T22:28:12.017
> 
> 标签：mysql

我在 python 中使用 MySQLdb 的 executemany 函数来插入多行，并进行重复更新。它就是这样工作的。但有一个问题。大多数行通常需要通过一两次插入来更新。我在该表中有一个自动编号字段。每次运行此查询时，即使实际插入的计数远低于跳转，自动编号字段也会跳转。ids基本上是浪费了。任何线索这里发生了什么以及如何避免这种情况？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:08:13.333

这是 MySQL 服务器如何处理自动增量字段的结果。MySQLdb 模块根本不会影响自动增量行为。

[MySQL 性能博客](http://www.mysqlperformanceblog.com/2011/11/29/avoiding-auto-increment-holes-on-innodb-with-insert-ignore/)详细解释了为什么会出现差距，以及如何使用[互斥表](http://www.xaprb.com/blog/2005/09/22/mutex-tables-in-sql/)来避免它们。简而言之：

```
create table mutex(
    i int not null primary key
);
insert into mutex(i) values (1);

insert into foo(name) select 1 from mutex left outer join foo on foo.name=1 where mutex.i = 1 and foo.name is null; 
```

即插入与对互斥表执行左外连接的子选择。为什么这行得通？如果 id 已经在 mutex 表中，则重复使用；否则，连接会产生 NULL，并触发自动增量。

# mysql - Mysql插入语法错误，找不到位置

> ID：12082275
> 
> 赞同：1
> 
> 时间：2012-08-22T22:28:13.190
> 
> 标签：mysql, database, syntax

我是 Stackoverflow 的新手（对于提问的新手，我一直在使用我自己没有提出的问题的建议和帮助，我想为此表示感谢。）但是直截了当，我有一个 mysql 错误并且有一直在将“更改为”并使用了很多转义方法，但我仍然不断收到mysql错误。这是一个语法错误**您的SQL语法有错误；请查看与您的MySQL服务器版本相对应的手册以获取正确的信息在第 1 行的“条件、地区、性别允许、内部、互联网、max_nr_people、mediation_cost”附近使用的语法

```
 INSERT INTO kamerfeed (title
        ,link
        ,description
        ,minimum_price
        ,daisycon_unique_id
        ,category
        ,internal_id
        ,address
        ,area
        ,city
        ,condition
        ,district
        ,gender_allowed
        ,interior
        ,internet
        ,max_nr_people
        ,mediation_costs
        ,own_kitchen
        ,own_shower
        ,pets_allowed
        ,smoking_allowed
        ,toilet
        ,zipcode
        ,source)
        VALUES 
        (
        "Kamer Abersonlaan, Wageningen"
        ,"http://ds1.nl/c/?wi=162822&si=1271&li=1234742&dl=details-kamer-abersonlaan-in-wageningen%2F125379.html&ws="
        ,"Royale kamer met balkon op het oosten. Gedeelde woonkamer met balkon op het westen, eetkeuken, badkamer met douche, bad, wastafel, toilet en wasmachine. Eigen koelkast. Neem contact op, ook als de huur hoog lijkt. Kijken kost niets!..."
        ,"550.00","Df18a0377e4b0f8d53fa068cbb006ba49"
        ,"Kamers in Wageningen"
        ,"125379"
        ,"Abersonlaan"
        ,"26"
        ,"Wageningen"
        ,"Goed"
        ,"Ja"
        ,"Man"
        ,"Gemeubileerd"
        ,"Ja"
        ,"1"
        ,"nee"
        ,"Gedeeld"
        ,"Gedeeld"
        ,"Ja"
        ,"Ja"
        ,"Gedeeld"
        ,"6703GE"
        ,"kamer"
        ) 
```

我已经尝试了一个多小时，但我仍然无法弄清楚是什么问题。这可能很容易，但我似乎无法找到自己。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:40:44.887

您似乎在以下位置缺少逗号`zipcode`：

```
,toilet
zipcode
,source 
```

And`condition`是一个[保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)，在它周围加上反引号：

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a57ba/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T22:39:57.343

你之前少了一个逗号`zipcode`吗？

另外，干得好@a_horse_with_no_name：[http ://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:43:20.937

您缺少`comma`, 应该是：

```
INSERT INTO kamerfeed (title
,link
,description
,minimum_price
,daisycon_unique_id
,category
,internal_id
,address
,area
,city
,condition
,district
,gender_allowed
,interior
,internet
,max_nr_people
,mediation_costs
,own_kitchen
,own_shower
,pets_allowed
,smoking_allowed
,toilet
,zipcode
,source)
    ... 
```

# xaml - WinRT 类库 (DLL) 中的资源字典

> ID：12082276
> 
> 赞同：3
> 
> 时间：2012-08-22T22:28:14.130
> 
> 标签：xaml, windows-runtime, resourcedictionary

有谁知道 WinRT 是否真的支持使用带有嵌入式 XAML 资源字典的 C#（或我想是 VB）创建类库 (DLL)，然后在另一个项目中添加对这些 DLL 的引用并合并到该字典中，甚至从“资源”中加载字典" 变成内存中的字符串？

似乎这应该从根本上得到支持，但我似乎无法让它工作，因为当我添加对该 DLL 的引用时，我总是得到一个错误，即缺少有效负载。现在我知道 XAML 文件实际上并没有编译到 DLL 中，而只是作为 appx 的一部分进行部署。Visual Studio 显然对此有问题，但我可以手动将文件复制到不同的位置，至少可以解决这个问题。（据我所知，这在发布之前被认为是一个已知问题，但我似乎也无法让它在发布版本中开箱即用）。此外，即使我确实设法添加了引用，我似乎仍然无法访问资源字典。我尝试了各种方式，例如将其合并到其他资源中（使用 ms-appx 语法）。我还尝试将文件中的字典加载到字符串中，以查看是否可以访问。似乎没有骰子。

哦，如果我想将这样的 DLL 提供给其他人，我将如何部署它？有推荐的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T02:56:46.383

[Tim 的文章](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)是创建自定义控件的最佳指南，它也适用于资源字典。基本上，您可以选择构建 NuGet 包（这些包实际上不必公开共享 - 您可以轻松共享/添加私有 NuGet 包）或构建安装到 Visual Studio 并可供所有应用程序使用的扩展。

当然，您也可以手动共享包。假设您的应用程序引用了位于

```
MySolution/MyApplication/Dependencies/MyLibrary.dll 
```

您还需要将[.pri](http://msdn.microsoft.com/en-us/library/windows/apps/jj552947.aspx)文件放在同一个文件夹中，如下所示：

```
MySolution/MyApplication/Dependencies/MyLibrary.pri 
```

然后将资源放在与库项目中相同的子文件夹层次结构中名为库的子文件夹中，例如

```
MySolution/MyApplication/Dependencies/MyLibrary/Themes/Generic.xaml
MySolution/MyApplication/Dependencies/MyLibrary/Resources/Brushes.xaml
MySolution/MyApplication/Dependencies/MyLibrary/Resources/TextBlockStyles.xaml
MySolution/MyApplication/Dependencies/MyLibrary/Resources/ButtonStyles.xaml
... 
```

一旦你这样做了 - Visual Studio 将在构建应用程序时自动选择这些文件并将它们放入 appx 包中。

# java - 如何从 Maven POM 中的文件设置构建属性？

> ID：12082277
> 
> 赞同：8
> 
> 时间：2012-08-22T22:28:14.100
> 
> 标签：java, maven, ant

我需要从我的项目之外的位置读取和过滤属性文件，比如 ${user.home}/my.properties。此属性文件如下所示：

```
res.dir=/my/stuff/here
resource.dir=C:/${res.dir}
bin.dir=${resource.dir}/bin
cfg.dir=${resource.dir}/config 
```

我必须在我的构建和运行时在我的应用程序中执行此操作。这在 Ant 中很容易做到，使用[PROPERTY 标记](http://ant.apache.org/manual/Tasks/property.html)。但是，在 Maven 中似乎没有一个好的方法来做到这一点。

到目前为止，我已经尝试过 Maven`<property>`标签、Maven`<filter>`标签和其他标签的各种排列。我的构建失败或单元测试失败，或两者兼而有之。

如果我将这些属性硬编码到 POM 中，一切正常，所以我知道问题只是读取属性。

我查看了[properties-maven-plugin](http://mojo.codehaus.org/properties-maven-plugin/)，但该插件似乎不再被维护。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T10:58:33.047

你可以简单地实现你自己的`maven-plugin`，它会为你解决这个问题。

这是一个具有以下结构的示例：

```
.
 |-- pom.xml
 |-- plugin
 |   `-- pom.xml
 |   `-- src
 |       `-- main
 |           `-- java
 `-- app
     `-- pom.xml
     `-- src
         `-- main
             `-- java 
```

您将需要创建一个 Mojo，它将属性文件作为输入，然后将属性传播`pom.xml`到`app`. `pom.xml`实际上不会更新，而只是其中的项目数据。

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q12082277</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <modules>
        <module>plugin</module>
        <module>app</module>
    </modules>

</project> 
```

`plugin/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q12082277</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12082277-plugin</artifactId>
    <packaging>maven-plugin</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-plugin-api</artifactId>
            <version>3.0.4</version>
        </dependency>
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-project</artifactId>
            <version>2.2.1</version>
        </dependency>
    </dependencies>
</project> 
```

`plugin/src/main/java/com/stackoverflow/Q12082277/plugin/PropertiesMojo.java`

```
package com.stackoverflow.Q12082277.plugin;

import org.apache.maven.plugin.AbstractMojo;
import org.apache.maven.plugin.MojoExecutionException;
import org.apache.maven.plugin.MojoFailureException;
import org.apache.maven.plugin.logging.Log;
import org.apache.maven.project.MavenProject;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Properties;

/**
 * @author maba, 2012-08-24
 *
 * @goal extract
 */
public class PropertiesMojo extends AbstractMojo {

    private Log log;

    /**
     * The current project representation.
     * @parameter expression="${project}"
     * @required
     * @readonly
     */
    private MavenProject project;

    /**
     * A properties file
     *
     * @parameter expression="${propertiesFile}"
     * @required
     */
    private File propertiesFile;

    @Override
    public void execute() throws MojoExecutionException, MojoFailureException {
        log.info("Executing PropertiesMojo on " + propertiesFile.getAbsolutePath());

        try {
            Properties fileProperties = new Properties();
            fileProperties.load(new FileInputStream(propertiesFile));
            Properties projectProperties = project.getProperties();
            for (Object key : fileProperties.keySet()) {
                projectProperties.setProperty((String)key, (String) fileProperties.get(key));
            }
            project.getProperties().list(System.out);
        } catch (FileNotFoundException e) {
            throw new MojoFailureException("The file " + propertiesFile.getAbsolutePath() + " was not found!", e);
        } catch (IOException e) {
            log.error("");
        }

    }

    @Override
    public void setLog(Log log) {
        this.log = log;
    }
} 
```

您将使用以下插件`app/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q12082277</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q12082277-app</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <build>
        <plugins>
            <plugin>
                <groupId>com.stackoverflow</groupId>
                <artifactId>Q12082277-plugin</artifactId>
                <version>1.0-SNAPSHOT</version>
                <executions>
                    <execution>
                        <phase>initialize</phase>
                        <goals>
                            <goal>extract</goal>
                        </goals>
                        <configuration>
                            <propertiesFile>${user.home}/my.properties</propertiesFile>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>java</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <mainClass>com.stackoverflow.Q12082277.App</mainClass>
                </configuration>
            </plugin>
        </plugins>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
</project> 
```

然后您必须添加以下内容`app.properties`作为模板并获取我们刚刚从文件中读取的值并设置它们并创建一个`app.properties`可从 jar 中访问的具体文件。

`app/src/main/resources/app.properties`

```
res.dir=${res.dir}
resource.dir=${resource.dir}
bin.dir=${bin.dir}
cfg.dir=${cfg.dir} 
```

最后是一个测试应用程序，它只从类路径加载`app.properties`并打印结果。

`app/src/main/java/com/stackoverflow/Q12082277/App.java`

```
package com.stackoverflow.Q12082277;

import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

/**
 * @author maba, 2012-08-23
 */
public class App {

    public static void main(String[] args) throws IOException {
        ClassLoader loader = App.class.getClassLoader();
        InputStream in = loader.getResourceAsStream("app.properties");
        Properties properties = new Properties();
        properties.load(in);
        properties.list(System.out);
    }
} 
```

现在你可以站在顶层目录执行

```
mvn install 
```

然后进入`app`文件夹并执行

```
mvn exec:java 
```

它会打印

```
-- listing properties --
resource.dir=C://my/stuff/here
cfg.dir=C://my/stuff/here/config
bin.dir=C://my/stuff/here/bin
res.dir=/my/stuff/here 
```

这正是你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T06:42:35.653

我认为如果将属性文件转换为*模板*文件并从`pom.xml`using [maven 资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)中获取属性会更好。

一个简单的设置可能看起来像这样

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q12082277</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <res.dir>/default/stuff/here</res.dir>
        <resource.dir>${res.dir}</resource.dir>
        <bin.dir>${resource.dir}/bin</bin.dir>
        <cfg.dir>${resource.dir}/config</cfg.dir>
    </properties>

    <dependencies>
    <!-- Your dependencies -->
    </dependencies>

    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>

</project> 
```

`src/main/resources/app.properties`

```
res.dir=${res.dir}
resource.dir=${resource.dir}
bin.dir=${bin.dir}
cfg.dir=${cfg.dir} 
```

`src/main/java/com/stackoverflow/Q12082277/App.java`

```
package com.stackoverflow.Q12082277;

import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

/**
 * @author maba, 2012-08-23
 */
public class App {

    public static void main(String[] args) throws IOException {
        ClassLoader loader = App.class.getClassLoader();
        InputStream in = loader.getResourceAsStream("app.properties");
        Properties properties = new Properties();
        properties.load(in);
        properties.list(System.out);
    }
} 
```

`System.out`

```
-- listing properties --
resource.dir=/default/stuff/here
cfg.dir=/default/stuff/here/config
bin.dir=/default/stuff/here/bin
res.dir=/default/stuff/here 
```

将`pom.xml`具有每个人都使用的默认属性。

如果要覆盖这些值，请使用输入参数调用 maven：

```
mvn install -Dres.dir=/my/stuff/here -Dresource.dir="C:/${res.dir}" 
```

`System.out`

```
-- listing properties --
resource.dir=C://my/stuff/here
cfg.dir=C://my/stuff/here/config
bin.dir=C://my/stuff/here/bin
res.dir=/my/stuff/here 
```

通过这种方式，每个人都将拥有相同的属性视图，如果你想在你自己的机器上运行，你可以覆盖它们。

# jquery - 图像 CSS 更改 onClick 与动画 Jquery

> ID：12082278
> 
> 赞同：0
> 
> 时间：2012-08-22T22:28:18.793
> 
> 标签：jquery

我已使用 CSS 将图像的高度和宽度设置为 100 像素，但我希望在单击图像时将高度和宽度更改为 400 像素，但我也希望它能够为更改设置动画。

我已经开始尝试这个：

```
$('img').click(function() {
  $('img').animate({
    height: '400px',
    width: '400px',
  }, 5000, function() {
  });
}); 
```

编辑：对类型感到抱歉，目标是只为选择的图像设置动画。

另外：这是我试图让它工作的网站的链接。单击我们的工作，然后单击缩略图。我希望图像在点击时调整大小。[点击这里](http://fourthfloorcreative.com/vari)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:31:17.603

在处理函数内部使用`this`来指定当前图像，也可以使用数字而不是字符串来设置动画属性，也可以使用两次高度而不是 witdh 和高度。

```
$('img').click(function() {
  $(this).animate({
    height: 400,
    width: 400,
  }, 5000, function() {
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:35:18.073

```
$('img').click(function() {
  $(this).animate({
    height: '400px',
    width: '400px',
  }, 1000, function() {
  });
}); 
```

1）您要使用`this`而不是`'img'`您的内部选择器，否则当您单击一张图像时，所有图像都会被动画化。

2）你包括`height`了两次。

# c# - 如何在 C# 中自动命名实例？

> ID：12082279
> 
> 赞同：2
> 
> 时间：2012-08-22T22:28:22.417
> 
> 标签：c#, class, methods, instance

我是新来的，所以如果这个问题很愚蠢，请原谅我。但是让我说我​​在上面找不到任何东西。

每当您启动一个新实例时，您都会执行以下操作：

```
Word word1 = new Word(link, 24); 
```

但是说，我将如何自动命名实例？如果一个方法自动创建新实例，它如何自动为实例选择一个唯一的名称，例如 word2、word3、word4 等。

预先感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T22:30:33.000

听起来您正在寻找实例的“列表”。在这种情况下，使用 List：

```
List<Word> words = new List<Word>();
words.Add(new Word(link, 24)); 
```

正如其他人评论的那样，如果您需要按名称查找“变量”，字典也可以：

```
Dictionary<string, Word> words = new Dictionary<string, Word>();
words.Add("word1", new Word(link, 24)); 
```

然后您可以通过该字符串引用它：

```
if (words.ContainsKey("word1")) {
  Word useWord = words["word1"]; 
```

或直接引用该类：

```
words["word1"].SomeProperty... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T22:31:07.200

重要的是要了解您在那里命名*变量*，而不是*实例*。对象通常没有名称。接下来，如果你想要一个*集合*，就这么说吧：

```
List<Word> words = new List<Word>();
words.Add(new Word(link, 24));
... 
```

（或者你可以使用一个数组，或者任何最适合你的用例的东西。）

变量永远不会在 C# 中使用动态名称动态声明 - 您的代码指定了确切的名称。

如果这对您没有帮助，请告诉我们更多关于您想要实现的目标，而不是您期望如何实现它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T22:30:51.850

你不能在像 c# 这样的编译语言中做这样的事情。您可以做的最好的事情是创建一个单词数组。

```
Word[] words = new Word[10];
words[0] = new Word(link, 24);
... 
```

另一方面，您是否考虑过比 word1、word2 等更好的名称，这可以解释变量的用途是什么？

# c# - C# HtmlAgilityPack 解析

> ID：12082281
> 
> 赞同：3
> 
> 时间：2012-08-22T22:29:02.600
> 
> 标签：c#, html, parsing, html-agility-pack

我想解析以下 HTML。

我目前拥有的是

```
var node = document.DocumentNode.SelectSingleNode("//div[@class='wrapper']"); 
```

html是

```
<div class="wrapper">
    <ul>
                <li data="334040566050326217">
                    <span>test1</span>
                </li>
                <li data="334040566050326447">
                    <span>test2</span>
                </li>
    </ul> 
```

我需要从标签中获取数字`li data`和标签之间的值`span`。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T23:38:48.370

像这样的东西可能适合您的需求。

```
//Assumes your document is loaded into a variable named 'document'

List<string> dataAttribute = new List<string>(); //This will contain the long # in the data attribute
List<string> spanText = new List<string>();      //This will contain the text between the <span> tags
HtmlNodeCollection nodeCollection = document.DocumentNode.SelectNodes("//div[@class='wrapper']//li");

foreach (HtmlNode node in nodeCollection)
{
    dataAttribute.Add(node.GetAttributeValue("data", "null"));
    spanText.Add(node.SelectSingleNode("span").InnerText);
} 
```

# perl - 如何从 Perl 开放管道捕获 STDOUT？

> ID：12082291
> 
> 赞同：2
> 
> 时间：2012-08-22T22:30:25.937
> 
> 标签：perl, wget

我将如何捕获从 wget 以下列方式被 Perl 调用的 STDOUT 返回并将其放入变量中？

```
my @urls = ('url1', 'url2', 'url3');

open(GET, "| xargs -n1 -P 3 wget -qO- ") || die "get failed: $!\n";
print GET "@urls"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:55:56.807

如果您想一次性获取所有数据，[IPC::Run](http://search.cpan.org/perldoc?IPC%3a%3aRun)可以做到这一点。

```
use IPC::Run qw(run);
run [qw(xargs -n1 -P 3 wget -qO-)], \"@urls", \my $out;
print "$out"; 
```

如果您想在数据可用时对其进行处理，[IPC::Run](http://search.cpan.org/perldoc?IPC%3a%3aRun)也可以做到这一点。

```
use IPC::Run qw(run);
run [qw(xargs -n1 -P 3 wget -qO-)], \"@urls", sub {
    print $_[0];
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:38:47.983

首先，[您的管道是输入管道，`open`不支持输入和输出管道](http://perldoc.perl.org/functions/open.html)。作为替代方案，使用管道输出并为每个 URL 打开一个文件句柄：

```
use strict;
use warnings;

my @urls=qw(url1 url2 url3);

foreach my $url(@urls)
{
  open(my $get,"-|","wget $url") or die $!;

  print while(<$get>);

  close($get);
} 
```

# c# - 发布项目时，使用向导而不是仅仅提供 bin 文件夹有什么好处？

> ID：12082295
> 
> 赞同：1
> 
> 时间：2012-08-22T22:30:39.527
> 
> 标签：c#, visual-studio, wizard, bin

如果我的理解是正确的，对于一个自包含的项目，您可以复制 bin 文件夹并完美运行它。

那么法师有什么用呢？如果不需要，我宁愿不必使用向导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T22:49:11.313

通常，您会出于以下几个原因制作安装程序：

1.  除了复制“\bin”文件夹中的文件之外，您可能还需要执行自定义操作。例如：

    *   检测依赖关系
    *   在注册表中设置键
    *   安装windows服务
    *   检查 Windows 设置以进一步自定义安装。
    *   将程序集安装到 GAC 中。
2.  您可能需要执行一些需要管理权限的操作。安装程序可以为您处理权限升级。

3.  对于最终用户来说，看到真正的安装程序通常是一种“更好”的体验。

4.  安装程序将在 Windows 的“添加/删除程序”列表中创建一个“卸载”项。

5.  您可以将它们打包成单个 .msi 文件，而不是复制/分发/下载多个文件（.exe、多个 .dll、.config 等）。

这只是您可能想要使用安装程序的几个原因。当然，这并不意味着它是唯一的选择。只是一个对很多情况都有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T22:36:07.347

我猜您的客户宁愿有一个向导来指导他完成整个安装过程。此外，如果您谈论的是桌面应用程序，您可以配置您的向导以执行[自定义操作](http://msdn.microsoft.com/en-us/library/d9k65z2d%28v=vs.100%29.aspx)，例如配置数据库或连接到许可服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:48:57.600

回复：安装向导-哦，我以为您在我之前的回答中谈论的是部署向导。

安装向导对用户来说很好，你可以包装很多其他的小改动，比如自动解包、对注册表的更改等等。

使用 InstallShield 之类的另一个主要原因是初始感知的安装速度与免费向导相比会更快。此外，对可执行文件使用合法的第 3 方签名，这样 Windows 就不会弹出 Unknown Publisher（它看起来很粗略）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T22:44:19.723

这是“为什么使用 IDE，我喜欢在文本编辑器中编写代码”辩论的缩影版本。

例如，向导的一个好处是有时您可能能够保存 ftp 凭据。再说一次，如果您在本地网络上并且您不必登录，或者您有其他缓存凭据的方式（例如使用 FileZilla），那么您节省的少量时间可能非常少，以至于它真的没关系。

通常，向导可能有用的另一个原因是，当它们在下拉列表中提供一小组最近使用的选项/服务器/连接/表/文件夹时，您可以从中进行选择，而不必再次键入它们或再次导航到它们.

巫师的缺点：您可能过于依赖他们。如果它们以某种方式神秘地重置，您可能会丢失设置，因此如果您确实使用它们，请记住记录您如何设置向导或您通常如何使用它。

使用 IDE 也是如此。如果您总是在您的机器上打开您的解决方案，请确保每隔一段时间在新机器上打开它，以检查您的机器上是否没有正确设置某些神奇/瞬态/易失性设置，无论是在注册表中或在解决方案/项目属性、插件、您的 .suo 等中。

# c# - WP7 IsolatedStorageFileStream 错误“在 IsolatedStorageFileStream 上不允许操作”

> ID：12082296
> 
> 赞同：0
> 
> 时间：2012-08-22T22:30:45.387
> 
> 标签：c#, xna, text-files, isolatedstorage, isolatedstoragefile

我正在尝试打开一个在我的应用程序中保存为内容的 txt 文件，但是我遇到了线程标题中显示的错误。这是给我带来麻烦的代码行：
`var readStream = new IsolatedStorageFileStream(mapFileName, FileMode.Open, store);`

在调用方法时使用
`map.loadMap(string mapFileName)`
。

任何帮助将不胜感激。

**编辑**

我创建了一个新方法来使用IsolatedStorageFile 和IsolatedFileStream 读取文本文件但是我完全不知道如何使用我的旧解析代码和我的屏幕截图将数据读入2D int 数组map01.txt 供参考，任何人都可以提出解决此问题的方法，因为我没有在线找到任何相关文档：

![map01.txt](../Images/9939ff1bf852b508d4690c56721b1dc5.png)

```
 int x = 0, y = 0;
        var store = IsolatedStorageFile.GetUserStoreForApplication();
        var readStream = new IsolatedStorageFileStream(mapFileName, FileMode.Open, store);
        var stream = new StreamReader(readStream);

        do
        {
            string line = stream.ReadLine();
            string[] numbers = line.Split(',');

            foreach (string e in numbers)
            {
                int tile = int.Parse(e);
                this.tileID[x,y] = tile;

                x++;
            }
            y++;
        }
        while (!stream.EndOfStream);` 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:44:33.280

您不会将 IsolatedStorage 用于项目文件，它们用于存储在缓存/应用程序数据中的文件，您实际上像普通文件一样读取它们。

转到：http: [//msdn.microsoft.com/en-us/library/bb199073.aspx](http://msdn.microsoft.com/en-us/library/bb199073.aspx)

学习如何打开/读取/保存文件。

# python - Python重新函数

> ID：12082300
> 
> 赞同：0
> 
> 时间：2012-08-22T22:31:17.873
> 
> 标签：python

我一直在绞尽脑汁想如何做到以下几点：

如果我有大量数据，例如`"003 HELLO, banana apple,xyz 004 HELLI, pear peach,lmn"` 我有一个完整的文档，其中包含这样的行，需要拆分为：

```
003     HELLO, banana apple,xyz
004     HELLI, pear peach,lmn 
```

对我来说，合乎逻辑的做法是在第二个逗号后面的单词之后拆分行，因为这是一种贯穿始终的模式。

当然，必须有一种方法可以使用 re 函数来做到这一点。

知道怎么做吗？

非常感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:35:37.920

您能否更具体地说明您期望的结果？如果您试图将一堆行拆分为一个列表，您可以随时使用`.split( '\n' )`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:38:21.977

要遍历整个文件，您可以执行以下操作：

```
lines = []

with open('file.txt', 'r') as handle:
  for line in handle:
    lines.append(line.split(',')[-1].strip())

print lines 
```

我对您要从文件中提取的内容感到有些困惑，因此，如果澄清了这一点，我的答案可能会变得无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:39:37.377

也许这

```
import re
result = re.findall(["[^,\s]*,[^,]*,\S*", data) 
```

例如

> > > re.findall(["[^,\s] *,[^,]* ,\S*", "003 HELLO, 香蕉苹果,xyz 004 HELLI, 梨桃,lmn")
> > > ['003 HELLO, 香蕉苹果,xyz' ,'004 HELLI,梨桃,lmn']

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T22:39:52.267

是的，您可以使用正则表达式来提取数字。这是一个例子：

```
import re

s = '003 HELLO, banana apple,xyz'

m = re.match(r'^(\d+) ', s)
if m:
    digits = m.group(1)
    value = int(digits)
    print "{} : `{}`".format(value, s[len(digits):].strip())
else:
    print "Invalid format" 
```

正则表达式看起来`^(\d+)`和可以解释为：

*   字符串的开头`^`
*   一组`(...)`
*   一个数字`\d`
*   ...重复 1 次以上`+`
*   空间

 `稍后使用 提取匹配组的值（即数字）`m.group(1)`。`

# azure - 启动现有角色的新实例需要多长时间

> ID：12082303
> 
> 赞同：0
> 
> 时间：2012-08-22T22:31:48.013
> 
> 标签：azure

例如，我有网络角色和 2 个实例。我想再添加一个我的 Web 角色实例（通过服务 API 和 C#）。此操作平均花费多少时间？这个值的最小值和最大值是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:41:06.077

根据角色的大小和复杂性而有很大差异。我能想到的对此进行基准测试的最佳方法是多次部署并测量您的时间并取平均值。请小心，因为不到一小时的部署算作全小时，这样您就可以轻松地开始计算您的计算费用。因此，为什么我通常不会太担心它，只需使用 10-15 分钟的时间。:)

# java - Google 云端硬盘缩略图链接没有 Google Apps 域信息

> ID：12082304
> 
> 赞同：2
> 
> 时间：2012-08-22T22:31:57.990
> 
> 标签：java, google-drive-api

我的网络应用程序使用 SDK 查询用户 Google Drive 存储库，然后向用户显示文件列表，我想利用缩略图并显示文件缩略图。

如果用户仅登录到一个 Google 帐户，则缩略图会按预期显示。但是，如果用户一次登录多个用户帐户（我们总是这样），图像就会损坏。通过手动复制缩略图链接并将其输入浏览器，您必须首先选择您要访问链接的帐户。

通过检查缩略图链接，没有 Google Apps 域信息，但是在检查 AlternativeLink（它允许您在适用时将文件作为 Google 文档打开）时，此链接确实具有 Google Apps 域特定信息，并且不需要您选择帐户它应该被访问。

有什么我想念的吗？或者这是一个缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:16:15.787

很奇怪，我刚刚测试过，我的 2 个帐户的工作方式不同：

对于常规文件（PDF、图像...），即使我没有登录任何帐户，图像也始终公开且始终可见。

对于本地 Google 文档文档，如果我登录是，我只会看到图像。但是，当多次登录时，我没有获得帐户选择器，但对于非 gmail 帐户，它总是失败。PS：显示图像的解决方法，您可以附加 URL 参数：&authuser=1（或 0），具体取决于您登录的顺序，这就是它无法以编程方式使用的原因。

也没有办法使用 OAuth 来显示缩略图，这样做时出现 401 错误。

IMO 这是一个错误，缩略图理论上应该始终是公开的。我已向我们的工程团队提交了一个错误，我会及时通知您。

# java - 如何在服务器上运行公共 JSP 页面

> ID：12082309
> 
> 赞同：1
> 
> 时间：2012-08-22T22:32:32.193
> 
> 标签：java, jquery, jsp

我不知道我是否写了正确的问题，但这是我想做的：

在主页`index.jsp`中，我有一个`DIV`.

```
<div id="test">
</div> 
```

使用`JQUERY`我将`JSP`在 this 中加载另一个页面`DIV`。

```
$("#test").load("chat.jsp"); 
```

在 chat.jsp 中，我将使用 TIMER 或 THREAD 每 5 秒打印一条消息。

```
<% out.println("Welcome"); %> 
```

或者

```
<%="Welcome"%> 
```

假设有两个客户端要访问加载`chat.jsp`页面，客户端 A 和客户端 B，并且该页面在服务器上运行，它在 打印“欢迎”，在`12:00:00`打印另一个“欢迎” `12:00:05`。

假设客户端 A 在 加载页面`12:00:01`，客户端 B 在 加载页面`12:00:04`。

我希望两个客户都在 收到“欢迎” `12:00:05`，而不是在`12:00:06`（对于 A）和`12:00:09`（对于 B）。

做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:21:12.833

好吧，如果您正在寻找一种方法，那么建议您使用`mod %`运算符来获取余数，然后使用 some`if-else` `conditional construct`来获取

`5`通过应用一些基本逻辑（例如`floor-ceiling values`获取值）来最接近的倍数。休息是你和你的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:40:47.313

如果您想确保他们收到相同的内容，请生成一次并将其发送给双方。

# java - 线程 objectoutputstream objectinputstream 阻塞不读取

> ID：12082312
> 
> 赞同：0
> 
> 时间：2012-08-22T22:33:12.617
> 
> 标签：java, concurrency, objectoutputstream, objectinputstream, concurrenthashmap

我的代码有问题；看起来相当简单的对象写入和读取操作，似乎永远不会触发它的辅助操作。远程对等点上的内部类线程`ConcurrentHashMap`通过 OOS 发送一个。

当它到达时 - 它确实，好的 - 接收代码继续，在一个布尔确定的循环中，在 OIS 上侦听该 CCHM 的更新。这些更新来自发送原始 CCHM 的同级（每个接收对等方有一个服务同级）。这些`ObjectOutputStreams`兄弟姐妹的使用取自兄弟姐妹的可见`HashMap`。兄弟姐妹们并不关心他们是发送给该组的新成员，还是发送给现有成员。对等点是新的还是现有的差异仅在接收对等端知道，原始 CCHM 被接收和使用，然后代码继续等待同一 OIS 上的更新。加入的新对等点将其详细信息添加到远程`Hashtable`，因此每次发送给所有对等点（新的，加上现有的 n 个），要发送的 CCHM 都会大一个元素。

但是现有的对等体没有收到更新的 CCHM。我没有用调用填充我的代码`System.out.println()`或粗暴地停止它，而是我可能忽略了哪些陷阱来陷入这种混乱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:37:40.570

见规范[`ObjectOutputStream.reset()`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#reset%28%29)...

> 重置将忽略已写入流的任何对象的状态。状态被重置为与新的 ObjectOutputStream 相同。流中的当前点被标记为重置，因此相应的 ObjectInputStream 将在同一点重置。之前写入流的对象不会被称为已经在流中。它们将再次写入流。

# python - 如何使用 python 将 url 字符串转换为安全字符？

> ID：12082314
> 
> 赞同：25
> 
> 时间：2012-08-22T22:33:23.950
> 
> 标签：python

假设我有以下字符串：

```
"http://earth.google.com/gallery/kmz/women_for_women.kmz?a=large" 
```

是否有一些函数或模块能够将上面的字符串转换为下面的字符串，其中所有字符都被更改为与 url 兼容：

```
"http%3A%2F%2Fearth.google.com%2Fgallery%2Fkmz%2Fwomen_for_women.kmz%3Fa%3Dlarge" 
```

在 python 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-22T22:37:37.110

Python 2 的[urllib.quote_plus](https://docs.python.org/2/library/urllib.html#urllib.quote_plus)和 Python 3 的[urllib.parse.quote_plus](https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote_plus)

```
url = "http://earth.google.com/gallery/kmz/women_for_women.kmz?a=large"
# Python 2
urllib.quote_plus(url)
# Python 3
urllib.parse.quote_plus(url) 
```

输出：

```
'http%3A%2F%2Fearth.google.com%2Fgallery%2Fkmz%2Fwomen_for_women.kmz%3Fa%3Dlarge' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-03T12:32:57.740

在 Windows 平台上可用

```
#! python3.6
from urllib.parse import quote

# result: http://www.oschina.net/search?scope=bbs&q=C%E8%AF%AD%E8%A8%80
quote('http://www.oschina.net/search?scope=bbs&q=C语言',safe='/:?=&') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T22:39:23.170

您在寻找[urllib.quote](http://docs.python.org/library/urllib.html#urllib.quote)还是[urllib.quote_plus](http://docs.python.org/library/urllib.html#urllib.quote_plus)？请注意，您没有引用问题中提到的整个 url 字符串。您通常引用路径中或查询字符串之后的部分。无论您要在应用程序中使用哪个。

# html - IE9 中的@keyframes 规则

> ID：12082316
> 
> 赞同：1
> 
> 时间：2012-08-22T22:33:36.833
> 
> 标签：html, internet-explorer, css-animations

我的动画`@keyframes`在 IE 中不起作用。在网上各种消息来源说它在 IE9 中受支持，有些人说它不受支持。有人确定我应该停止朝那个方向工作吗……如果不是，`@-ms-keyframes`我认为它是 IE 的前缀是什么……谢谢！

```
@-webkit-keyframes move {
  0% {left: 0px;}
  49% {left: 940px; opacity: 1;}
  50% {left: 940px; opacity: 0;}
  51% {left: -940px; opacity: 0;}
  52% {left: -940px; opacity: 1;}
  100% {left: 0px;}
}

@-webkit-keyframes backup {
  0% {left: -940px;}
  100% {left: 940px;}  

}  

@-moz-keyframes move {
  0% {left: 0px;}
  49% {left: 940px; opacity: 1;}
  50% {left: 940px; opacity: 0;}
  51% {left: -940px; opacity: 0;}
  52% {left: -940px; opacity: 1;}
  100% {left: 0px;}
}

@-moz-keyframes backup {
  0% {left: -940px;}
  100% {left: 940px;}  

}  

@-ms-keyframes move {
  0% {left: 0px;}
  49% {left: 940px; opacity: 1;}
  50% {left: 940px; opacity: 0;}
  51% {left: -940px; opacity: 0;}
  52% {left: -940px; opacity: 1;}
  100% {left: 0px;}
}

@-ms-keyframes backup {
  0% {left: -940px;}
  100% {left: 940px;}  

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T06:45:03.360

或者将 robertc 的评论放入答案中：从版本 10 开始，IE 支持 CSS3 动画。如果您不确定浏览器是否支持，请查看 caniuse.com - 该页面很少出错，因为表格是基于来自浏览器开发人员的测试和信息。这是 css3-animation 支持概述的链接： http: [//caniuse.com/#feat=css-animation](http://caniuse.com/#feat=css-animation)

对于 IE9（和更早版本），您必须依赖 JavaScript 并接受动画不起作用。

# asp.net-mvc-3 - 参数值“33.42922222”超出范围

> ID：12082318
> 
> 赞同：10
> 
> 时间：2012-08-22T22:34:04.433
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework

我有一个名为 ad Latitude 的表的属性，我将其设置`data type`为，`decimal(9,8) null`但是当我尝试插入该值`33.42922222`时，它给了我错误

> 参数值“33.42922222”超出范围。

当我尝试直接在数据库表中输入值时，它给出了`Arithmetic overflow error`

我试图将数据类型更改为`numeric(9,8) null`但无济于事

请帮我找出问题...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-22T22:35:46.540

澄清`DECIMAL(9,8)`是小数点前1位和小数点后8位。

所以`DECIMAL(10,8)`应该为`33.42922222`.

[十进制和数字 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187746.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T22:37:37.173

[你的精度不够](http://msdn.microsoft.com/en-us/library/aa258832%28v=sql.80%29.aspx)。根据您排除的最大值设置精度。例如，如果您希望 999,999 作为最大值并且您需要 8 的刻度，请将其设置为小数 (14,8)。

# c# - 如何确定滚动查看器内的 ListtBoxItem 高度？

> ID：12082322
> 
> 赞同：1
> 
> 时间：2012-08-22T22:34:36.043
> 
> 标签：c#, listbox, scrollview, listboxitem, stackpanel

我在 Scrollviewer 中有一个列表框。Listbox 没有 scrollviewer( `vertical scroll bar visibility=disabled`)，所以我不能使用`SrollIntoView`. 我只能使用`Scrollviewer.ScrollToVerticalOffset`.

那么如何通过索引确定 ListBoxItemHeight 呢？当我可以确定 listboxItem 的高度时，我可以使用 ScrollToVertical 偏移方法。

# jquery - .ajax 调用后无法更新 Knockout.js ViewModel

> ID：12082323
> 
> 赞同：1
> 
> 时间：2012-08-22T22:34:41.820
> 
> 标签：jquery, ajax, knockout.js

在初始页面加载时，我的数据加载正常。我有一个删除函数，它通过 .ajax 调用我的控制器并删除数据库中的项目 OK，然后发回新的 JSON 项目列表。一切正常，直到我调用 ko.mapping.fromJS(data.newData, viewModel) 然后页面停止，没有错误消息。如果我添加一个警报（data.newData），我会看到正确的 Json。以下是代码，谁能看到我做错了什么？

```
<script>
var initialData = @Html.Raw(Json.Encode(Model));

var viewModel = {
    trainingDocs : ko.observableArray(initialData)
};

function deleteDoc(doc) {
    $.ajax({
        url: "/Admin/_DeleteTrainingDocument/"+doc.TrainingDocumentId,
        type: "POST",
        data: "",
        success: function (data) {
            if (data.Result) {
                $("#userMessage").html("<img src='/content/Status_1.png' align='bottom' />" + data.Message);
                ko.mapping.fromJS(data.newData, viewModel);
            } else {
                $("#userMessage").html("<img src='/content/Status_0.png' align='bottom' />" + data.Message);
            }
        },
        error: function (jqXhr, textStatus, errorThrown) {
            alert("Error '" + jqXhr.status + "' (textStatus: '" + textStatus + "', errorThrown: '" + errorThrown + "')");
        },
        complete: function () {
        }
    });
};

ko.applyBindings(viewModel, document.body);
</script>

<table class="agent-info">
<thead>
    <tr> 
        <th>Title</th> 
        <th>Action</th> 
    </tr> 
</thead>
<tbody data-bind="foreach: trainingDocs">
    <tr> 
        <td><span data-bind="text:Title"></span></td> 
        <td><a href="#" id="whiteLinks" data-bind="click: function() { if(confirm('Are you sure you want to delete '+$data.Title+'?')) deleteDoc($data) }">delete</a></td>
    </tr> 
</tbody>
</table>​
<div id="userMessage">
    Results
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:33:11.550

我不确定您的 AJAX 调用返回的确切结构，但如果要更新现有数据，您需要：

*   使用映射插件创建您的原始 observableArray，例如：

    `var viewModel = { trainingDocs : ko.mapping.fromJS(initialData) };`

*   或在回调中更新时传入空映射选项，例如：

    `ko.mapping.fromJS(data.newData, {}, viewModel);`

另外，对于更新调用，我会密切注意`data.newData`包含的内容，因为我怀疑如果数据是实际数组，您可能需要使用`viewModel.trainingDocs`而不是 just 。`viewModel`

# spring-roo - 从 REST 服务填充的 Spring Roo 模型（无持久性）

> ID：12082333
> 
> 赞同：4
> 
> 时间：2012-08-22T22:35:21.220
> 
> 标签：spring-roo

我正在构建一个没有本地持久性的小型 Web 应用程序。它从远程 RESTful 端点加载数据。

它有一个模型对象，称为 Order。当 web 应用程序收到 example.com/order/1234 之类的请求时，我希望 web 应用程序向远程 REST 端点发出 GET 请求（来自服务层？），然后填充我的域模型。

解决此问题的最佳方法是什么？在没有设置持久层的情况下以任何有用的方式使用 roo 是否可能且值得？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-02T08:50:34.200

2个选项：

*   仅在内存中使用 H2 持久性提供程序
*   正常创建 roo 实体，然后推入所有方法并覆盖以使用本地 HashMap。我以前这样做过，如下所示：

    ```
    @RooJavaBean
    @RooToString
    @RooJpaActiveRecord(versionField="", identifierField="name", identifierType=String.class, versionType=Byte.class)
    @RooJson
    public class MonitorMetric {
    static Map<String, MonitorMetric> data=new HashMap<String, MonitorMetric>();

    @Id
    private String name;

    long totTime;
    long minTime=Long.MAX_VALUE;
    long maxTime=Long.MIN_VALUE;
    int countStarted;
    int countFinished;

    @DateTimeFormat(style = "SS")
    private Date lastAttempt;
    @DateTimeFormat(style = "SS")
    private Date lastSuccess;
    @DateTimeFormat(style = "SS")
    private Date lastFailure;

    public double getAvgTime() {
        return (countFinished>0 ? totTime/countFinished : 0);
    }

    public String getName() {
        return this.name;
    }

    public void setName(String id) {
        this.name = id;
    }

    public static long countMonitorMetrics() {
        return data.size();
    }

    public static List<MonitorMetric> findAllMonitorMetrics() {
        return new ArrayList<MonitorMetric>(data.values());
    }

    public static List<MonitorMetric> findMonitorMetricEntries(int firstResult, int maxResults) {
        int lastResult = (firstResult+maxResults > data.size() ? data.size() : firstResult+maxResults);
        return new ArrayList<MonitorMetric>(data.values()).subList(firstResult, lastResult);
    }

    public static MonitorMetric findMonitorMetric(String name) {
        if (name == null || name.length() == 0) return null;
        return data.get(name);
    }

    public void persist() {
        data.put(getName(), this);
    }

    public MonitorMetric merge() {
        data.put(getName(), this);
        return this;
    }

    public void remove() {
        data.remove(getName());
    }

    public void flush() {
    }

    public void clear() {
        data.clear();
    }
    } 
    ```

# java - 一个字符串中有多少个点。（爪哇）

> ID：12082337
> 
> 赞同：4
> 
> 时间：2012-08-22T22:35:38.177
> 
> 标签：java, regex

所以，我正在开发一个程序，我需要检查一个字符串是否有多个点。我去看了文档`regex`，发现了这个：

```
X{n,m}?  X, at least n but not more than m times 
```

按照这个逻辑，我尝试了这个：

```
mString = "He9.lo,"

if (myString.matches(".{1,2}?")){

    System.out.print("it works");
} 
```

但这不起作用（它没有给出任何错误，它只是不会做里面的事情`if`）。我认为问题在于认为点意味着其他东西。我也看了这个问题：[regex](https://stackoverflow.com/questions/11452678/how-to-get-number-data-with-dots-within-a-string) but is for php，我不知道如何将它应用于java。

**编辑**：基本上我想知道一个字符串是否包含多个点，例如：

He......lo（真，包含多个），hel.llo（假，包含一个），..hell.o（真包含多个）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T22:37:25.860

正则表达式中的点表示“任何字符”。因此，如果您想要*实际的点*，则需要使用反斜杠对其进行转义 - 然后您需要在 Java 本身中转义反斜杠...

```
if (myString.matches("\\.{1,2}?")){ 
```

接下来，您需要了解`matches`尝试匹配*整个*文本 - 这不仅仅是尝试*在*字符串中查找模式。

尚不完全清楚您的要求是什么 - 只是“多个点在一起”还是“文本中的任何位置多个点”？如果是后者，应该这样做：

```
if (myString.matches(".*\\..*\\..*")) { 
```

...换句话说，任何东西，然后是一个点，然后是任何东西，然后是一个点，然后是任何东西——“任何东西”可以是“无”。所以这将匹配“He..llo”和“Hello”，但不匹配“He.llo”。

希望这就是你想要的。如果你*真的*只是想要“它必须有..在它的某个地方”，那么它更容易：

```
if (myString.contains("..")) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T22:44:42.130

正如其他答案中提到的，您的正则表达式包含一个错误。您可以修复它（转义点），或者`String.contains`改用：

```
if (myString.contains("..")){
    System.out.print("it works");
} 
```

这将匹配两个连续的点。如果您还在字符串中的任意位置寻找两个点（例如在字符串“He.llo.”中），您可以这样做

```
if(myString.indexOf('.', myString.indexOf('.') + 1) != -1) {
    System.out.print("it works"); //there are two or more dots in this string
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T22:58:44.863

我认为其他答案更好，但是，只是为了不同的观点

```
if (myString.indexOf(".") != myString.lastIndexOf(".")) {
    // More then one dot...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-23T01:14:50.057

[StringUtils.countMatches](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#countMatches%28java.lang.String,%20java.lang.String%29)使正在发生的事情变得更加明显。

```
boolean multipleDots = StringUtils.countMatches( myString, "." ) > 1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T00:00:38.367

您需要对已经属于正则表达式元字符集的那些字符使用转义序列字符

> `\ | ( ) [ { ^ $ * + ? . < >`

自从“。” 字符也是元字符集的一部分，您需要使用“\”。用多个“.”匹配字符串模式 人物。

在这种情况下`myString.matches("\\.{1,2}?")`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T22:39:38.427

您可以使用`[]`或`\`转义特殊字符，即点字符`.`，表示任何字符。

例如使用括号来转义它： `myString.matches("[.]{1,2}?")`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-27T10:03:54.453

如果我想检查字符串是否有 2 个点，这个解决方案非常适合我。换句话说，它是对 URL 的验证

```
private boolean isValid(String urlString) {
        try {
            String extensionValidator;
            extensionValidator = urlString.substring(urlString.lastIndexOf('.') + 1);
            URL url = new URL(urlString);

            if (urlString.indexOf('.', urlString.indexOf('.') + 1) != -1) {
                if (extensionValidator.length() >= 2 && urlString.contains(".")) {
                    return URLUtil.isValidUrl(urlString) && Patterns.WEB_URL.matcher(urlString).matches();
                }
            }

        } catch (MalformedURLException e) {

        }

        return false;
    } 
```

# mysql - 选择所有孩子都满足条件的自我关系中的行

> ID：12082353
> 
> 赞同：0
> 
> 时间：2012-08-22T22:37:54.753
> 
> 标签：mysql, sql, join, tree, self-join

我正在使用具有`documents`以下字段的单个表（称为 ）：`id`、`parent_id`和`status`。`parent_id`字段是指同一个表中的字段`id`。该`status`字段的类型为`ENUM('submitted', 'accepted', 'rejected')`。

我想选择所有**没有**`documents`孩子的地方。**`status = 'accepted'`**

 **我的第一次尝试是这样的：

```
SELECT DISTINCT `documents`.*
FROM (`documents`)
LEFT OUTER JOIN `documents` children_documents
  ON `documents`.`id` = `children_documents`.`parent_id`
WHERE `children_documents`.`id` IS NULL
  OR `children_documents`.`status` != 'accepted' 
```

这样做的问题是仍然会选择包含已接受和未接受子项的文档。不应选择包含**任何**已接受子项的文档。

我有一种感觉`GROUP BY`可能是我的朋友，但我不知道如何使用它来获得预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:00:25.230

我用[MySQL`CASE`语句](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)解决了这个问题。

```
SELECT DISTINCT `documents`.*
FROM (`documents`)
LEFT OUTER JOIN `documents` children_documents
  ON `documents`.`id` = `children_documents`.`parent_id`
GROUP BY `documents`.`id`
HAVING SUM(CASE `children_documents`.`status` WHEN 'accepted' THEN 1 ELSE 0 END) = 0 
```

这将选择所有文档，无论它们是否有孩子，并计算他们拥有的已接受孩子的数量。对于要选择的行，该数字必须为零。

**编辑：**出于好奇，我设法在 DataMapper ORM（CodeIgniter）中模拟查询：

```
$d->distinct()->where('status', 'accepted')->group_by('id')
  ->having_func('!SUM', array('[CASE]', '@children/status', '[WHEN]', 'accepted', '[THEN]', 1, '[ELSE]', 0, '[END]'), NULL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T02:02:06.307

如果我正确理解您要查找的内容，我将使用以下方法使事情变得简单。

```
SELECT *
FROM `documents`
WHERE `id` NOT IN ( 
    SELECT `parent_id`
    FROM `documents` children_documents
    WHERE `status` = 'accepted' ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T02:59:56.667

```
SELECT DISTINCT `documents`.*
FROM (`documents`)
LEFT OUTER JOIN `documents` children_documents
  ON `documents`.`id` = `children_documents`.`parent_id`
  AND `children_documents`.`status` = 'accepted'
WHERE `children_documents`.`parent_id` IS NULL 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T01:45:00.903

MySQL中最快的方式大概是这样的：

```
select d.*
from documents d
where not exists (select 1
                  from documents c
                  where c.parent_id = d.id and
                        coalesce(c.status, '') = 'Accepted'
                  limit 1
                 ) 
```

这使用相关子查询来识别任何不符合条件的子文档。**

# grammar - 无法加载外部 ruleref Microsoft Speech Grammar

> ID：12082354
> 
> 赞同：1
> 
> 时间：2012-08-22T22:38:16.390
> 
> 标签：grammar, speech, microsoft-speech-api

我正在使用 Microsoft Speech API 来执行语音识别。

一切都很好，直到我使用外部规则引用（根据[http://msdn.microsoft.com/en-us/library/hh361619](http://msdn.microsoft.com/en-us/library/hh361619)）

```
<grammar version="1.0" xml:lang="fr-FR" mode="voice" root="ruleCalendar" xmlns="http://www.w3.org/2001/06/grammar" tag-format="semantics/1.0">
  <rule id="ruleAddEvent">
    <item>Hello</item>
    <ruleref uri="#world" />
  </rule>
</grammar> 
```

工作正常，但如果我用外部文件替换 ruleref，识别器会在 RecognizeCompleted 事件上循环并且似乎匹配任何东西。

```
 <ruleref uri="other.xml#world" /> 
```

*   我试图引用一个非常简单的文件
*   我试图参考 cmnrules.cfg
*   我尝试设置绝对路径
*   文件上升解析错误如果我输入错误
*   如果我像 other2.xml 这样在 ruleref 中输入错误的值，它仍然会循环

C#code 在这里 l.75： [https ://github.com/JpEncausse/WSRMacro/blob/master/WSRMacro/WSRMacro.cs](https://github.com/JpEncausse/WSRMacro/blob/master/WSRMacro/WSRMacro.cs)

我认为它没有找到由 ruleref 定义的文件。

*   它是否在相对路径中搜索？
*   有没有办法设置默认语法目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:40:17.443

根据[之前的评论](http://bliny.net/blog/post/SystemSpeechSpeechRecognizer-works-SpeechRecognitionEngine-doesnt.aspx)，这似乎是一个已知的错误......

# javascript - Ajax设置全局变量，但外面的值消失

> ID：12082356
> 
> 赞同：-1
> 
> 时间：2012-08-22T22:38:22.500
> 
> 标签：javascript, jquery, ajax

对象窗口上的设置只有在我在警报下调用函数 [ctrUpadateCount] 时才会“固定”，如果我直接调用它就不起作用。知道为什么吗？我在另一个项目中遇到了同样的问题。并且必须应用无法在此处应用的解决方案。我试图解释下面的代码...... ps：抱歉英语不好。

```
function ctrUpdateCount(idCtrForm)
{     
   $.ajaxSetup({ assync: false});
   tableName= 'clients';
   p_comando="select count(*) total from "+tableName;
   $.post("execute.php", {comando : p_comando}, function(json){           
    v_total=json[1].total ; // <= this retuns 3
    window['ctrBuffer_'+idCtrForm].count=v_total;
    alert("count inside = "+ window['ctrBuffer_'+idCtrForm].count );//this alerts 3
   },'json'); 
}

jQuery.fn.extend( { ctrLoad: function()
   { 
    if( $(this).get(0).tagName =='FORM'){       
     idCtrForm=$(this).attr('id');
     alert("direct count ="+ctrUpdateCount(idCtrForm) ); // this will alert 3
                                                         // and so  the next alert
     //teste=ctrUpdateCount(idCtrForm); // but if I use this, 
                                        //the next alert will show  "undefined"
     alert("count after = "+ window['ctrBuffer_'+idCtrForm].count );
    }
  } 
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:42:01.810

您的“ctrUpdateCount”函数正在使用`$.post()`，它是**异步**的。让函数返回由异步操作的结果决定的值是不可能的；这本质上是荒谬的。

我真的不知道你在做什么，但基本上你必须对回调函数**内部**的“POST”操作的结果做你需要做的事情`$.post()`。

# visual-studio-2010 - 在 windows7 中使用 Visual Studio 2010 使用 opengl 缓冲区时出错

> ID：12082357
> 
> 赞同：0
> 
> 时间：2012-08-22T22:38:33.673
> 
> 标签：visual-studio-2010, opengl, cuda, windows-7-x64

我正在编写 CUDA C 代码并尝试使用 OpenGL 来可视化模拟数据。

我正在使用 Visual Studio 2010 进行开发。

我正在阅读“CUDA by example”一书，并试图重现书中的示例。因此，在 CUDA OpenGL 互操作性部分，一切正常，直到我开始使用`glGenBuffers`. 其他与缓冲区对象相关的函数，例如`glBindBuffer`在编译期间也没有识别。我对此进行了很多搜索，并且有很多建议，例如我都尝试过的“GL/gext.h”。

我还想提一下，所有头文件（`glut.h`、`glew.h`和）`glxew.h`和`wglew.h`lib 文件（`glut.lib`、`glew32.lib`、`glew32s.lib`）都存在于 Visual Studio SDK`lib`和`inc`目录中。在 VS 2010 项目 → 属性 → 链接器 → 输入 → 附加依赖项中，我按以下顺序添加了库文件：

cudart.lib glut32.lib glu32.lib glew32.lib glew32s.lib freeglut.lib opengl32.lib

这是我的程序的源核心供参考

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define GL_GLEXT_PROTOTYPES
#include <GL/gl.h>
#include <GL/glut.h>
#include <GL/freeglut.h>
#include <GL/glew.h>
#include <GL/glext.h>
#include <cuda.h>
#include <cuda_runtime.h>
#include <cutil.h>
#include <cudagl.h>
#include <cuda_gl_interop.h>

#define DIM 512;

GLuint bufferObj;
cudaGraphicsResource *resource;

    void display (void) 
    { 
    glClearColor(1.0f, 0.0f, 0.0f, 1.0f); 
    glClear(GL_COLOR_BUFFER_BIT); 
    glLoadIdentity(); 
    glFlush(); 
    } 
    void reshape (int width, int height) 
    { 
    glViewport(0, 0, (GLsizei)width, (GLsizei)height); 
    glMatrixMode(GL_PROJECTION); 
    glLoadIdentity(); 
    gluPerspective(60, (GLfloat)width / (GLfloat)height, 1.0, 100.0); 
    glMatrixMode(GL_MODELVIEW); 
    } 

    int main(int argc,char **argv)
    {
    cudaDeviceProp prop;
    int dev;

    memset(&prop,0,sizeof(cudaDeviceProp));
    prop.major = 1;
    prop.minor = 0;

    cudaChooseDevice(&dev,&prop);
    cudaGLSetGLDevice(dev);
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA);
    glutInitWindowSize(512, 512);
    glutInitWindowPosition (100, 100); 
    glutCreateWindow("Bitmap");
    glutDisplayFunc(display); 
    glutReshapeFunc(reshape); 
    glutMainLoop(); 
    glGenBuffers(1,&bufferObj);
    //glBindBuffer()
    } 
```

编译时，出现以下错误：

```
1> C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\inc\GL/glut.h(574) : see previous definition of 'GLUT_GAME_MODE_DISPLAY_CHANGED'
1>C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\inc\GL/glew.h(84): fatal error C1189: #error : gl.h included before glew.h
1> 
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizatio ns\CUDA 4.2.targets(361,9): error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2008 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin" -I"C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\inc" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include" -G --keep-dir "Debug" -maxrregcount=0 --machine 32 --compile -g -Xcompiler "/EHsc /nologo /Od /Zi /MDd " -o "Debug\OPENGL_PRAC_1.cu.obj" "C:\Users\umdutta\Desktop\SANKHA_ALL_MATERIALS\PRO GRAMMING_FOLDER\CUDA_OPENGL_C\2_PRACTICE_PROG_FOLD ER_(OPENGL_PRAC)\PROJ_NUM_1_OPENGL\PROJ_NUM_1_OPEN GL\OPENGL_PRAC_1.cu"" exited with code 2.
1>
1>Build FAILED. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:05:11.470

阅读错误消息确实很有帮助。您的问题是，您盲目地包含了一堆标题。首先，你只需要`glew.h`，不要使用`glext.h`. 然后以正确的顺序包含标题也很重要。

这应该有效：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/* GLEW covers everything OpenGL.
   When you use GLEW you do not need any other OpenGL header */
#include <GL/glew.h>

/* GLUT is not part of OpenGL. Either use glut.h or freeglut.h – not both. */
#include <GL/glut.h>

#include <cuda.h>
#include <cuda_runtime.h>
#include <cutil.h>
#include <cuda_gl_interop.h> 
```

顺便说一句：`cudagl.h`适用于旧的、已弃用的 GL 交互 API。如果你使用`cuda_gl_interop.h`你不应该使用`cudagl.h`.

# python - python mysql删除语句不起作用

> ID：12082360
> 
> 赞同：13
> 
> 时间：2012-08-22T22:38:37.960
> 
> 标签：python, sql, transactional

在这里，我试图删除任何在其电子邮件/用户名中包含“”的用户。

```
 def removeQuote(self, tbl,record):
            """ Updates the record """
            statmt="select id from %s WHERE `email` LIKE '%%\"%%'" % (tbl)
            self.cursor.execute(statmt)
            rows=list(self.cursor.fetchall())
            for idx, val in enumerate(rows):
                    id= val[0]
                    delstatmt = "DELETE FROM `maillist_subscription` WHERE id = '%s'" % id
                    print delstatmt
                    self.cursor.execute(delstatmt) 
```

输出显示好像操作已成功完成，但记录仍保留在数据库中。输出还显示了正确的 mysql 语句：

```
DELETE FROM `maillist_subscription` WHERE id = '8288754' 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T22:41:47.673

您需要使用连接对象上的 commit() 方法提交更改。大多数 DBAPI 接口使用隐式事务。

此外，不要使用字符串格式生成 SQL 查询！它将打开你的 SQL 注入：

**不安全！！**

```
# What happens if id = "1'; DROP DATABASE somedb" ?
delstatmt = "DELETE FROM `maillist_subscription` WHERE id = '%s'" % (id,)
cursor.execute(delstatmt)
conn.commit() 
```

**安全的！**

```
delstatmt = "DELETE FROM `maillist_subscription` WHERE id = ?"
cursor.execute(delstatmt, (id,))
conn.commit() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-19T09:47:57.600

cursor.execute("DELETE FROM maillist_subscription WHERE id = '"+id+"'")

conn.commit()

# ssrs-2008 - 如何强制一个数据源总是先于另一个加载？

> ID：12082363
> 
> 赞同：0
> 
> 时间：2012-08-22T22:39:10.847
> 
> 标签：ssrs-2008, reporting-services

我有一个包含两个数据源的报告 - 一个 Web 服务调用和一个 SQL Server Select。

Web 服务调用使用基于执行报告的参数的数据填充数据库中的表。选择然后检索此数据。

由于 SQL Server 选择依赖于在它之前运行的 Web 服务 - 我该如何强制执行此操作？有没有办法强制 SSRS在尝试从数据库中检索信息*之前始终执行 Web 服务数据源？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:07:41.727

您不想定义数据源的顺序，而是定义数据集的执行。

通常，数据集的运行取决于它们在报告中指定或使用的顺序。但是，如果您真的想在两个数据集上指定因果关系，只需定义一个内部参数，该参数的值来自 webservice 数据集，然后将该参数传递给 SQL 数据集（`@param = @param`例如，您可以输入查询）

# google-app-engine - Google App Engine/JPA：使用 Embeddable 类的奇怪行为

> ID：12082365
> 
> 赞同：1
> 
> 时间：2012-08-22T22:39:20.993
> 
> 标签：google-app-engine, jpa, google-cloud-datastore, datanucleus

我有一个`Embaddable`类，`List<String>`其修改不会被保存，除非我也修改另一个字段。请看这个以了解：

```
@Embeddable
public class EmbeddableClass {

    private Integer someField;

    @Basic
    private List<String> someList;

    public EmbeddableClass() {}

    public Integer getSomeField() {
        return someField;
    }
    public void setSomeField(Integer someField) {
        this.someField = someField;
    }

    public List<String> getSomeList() {
        return someList;
    }
    public void setSomeList(List<String> someList) {
        this.someList = someList;
    }
} 
```

如果我不修改`Integer someField`，则不会保留任何修改`someList`。

这是我用来测试的代码：

```
 // ... lookup entity user...

        log.severe("some list size before changing: " + user.getMainTeam().getEc().getSomeList().size());

        //user.getMainTeam().getEc().setSomeField(new Random().nextInt()); // <- PROBLEM HERE!
        user.getMainTeam().getEc().getSomeList().add("darn");

        // ...  persist entity user... 
```

该行`setSomeField`是必要的，否则“更改前的大小”将是`0`我第二次为给定用户运行测试。

最后，这是 Embeddable 类在其所有者（类`Team`）中定义的方式：

```
 @Embedded
    private EmbeddableClass ec;

    public EmbeddableClass getEc() {
        return ec;
    }

    public void setEc(EmbeddableClass ec) {
        this.ec = ec;
    } 
```

我正在使用 GAE SDK 1.7.0。

# objective-c - 从ios5中的按钮单击调用时Viewcontroller为空白

> ID：12082374
> 
> 赞同：0
> 
> 时间：2012-08-22T22:39:48.763
> 
> 标签：objective-c, ios

当我创建一个没有 nib 文件的视图控制器实例时，单击视图控制器的按钮会显示一个空白视图。

```
 - (IBAction)OK:(id)sender {
    mainViewController *main = [[mainViewController alloc]init];
    [self presentModalViewController:main animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:49:04.447

您可能希望使用 nib 名称对其进行初始化：

```
mainViewController *main = [[mainViewController alloc] initWithNibName:@"mainViewController" bundle:nil]; 
```

# windows - 在 Windows 7 中从命令行打开目录中的最新文件

> ID：12082378
> 
> 赞同：1
> 
> 时间：2012-08-22T22:40:02.310
> 
> 标签：windows, command-line

我正在使用生成 .txt 格式的输出文件的设备。使用实验名称的标记和递增的标记生成文件名：<ExperimentName><IncrementedToken>.txt。输出目录中充满了一系列实验的输出文件，因此很难找到最新的输出文件。

我正在尝试编写一个脚本来从使用命令行保存这些文件的目录中启动最新的输出文件。

到目前为止，我已经能够使用它`dir PathToOutputFolder /b /o-d | head -1`来查找最新的文件，但是无法从命令行启动该文件。

到目前为止，我得到的最接近的（我认为）是这样的： `start "" notepad dir PathToOutputFolder /b /o-d | head -1`但这给了我一个“系统找不到指定的路径”错误。

我在想`dir`命令的输出不能传递给`start`命令，但想找到一种解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:53:54.113

（警告：如果您的控制台设置为光栅字体并且您的文件名包含不适合 OEM 代码页的字符，这将失败。）

```
for /f "delims=" %%x in ('dir PathToOutputFolder /b /o-d') do if not set filename set "filename=%%x"
start "" "%filename%" 
```

但是，如果您可以选择使用更容易的 PowerShell：

```
$filename = (Get-ChildItem PathToOutputFolder | sort LastWriteTime)[-1]
Invoke-Item $filename 
```

# java - 数据库到 JTable

> ID：12082379
> 
> 赞同：-2
> 
> 时间：2012-08-22T22:40:04.673
> 
> 标签：java, database, jtable

我想将数据添加`MySql`到`JTable`. 我只是写了这个简单的代码来做到这一点，但它不起作用。

```
Properties props = new Properties();
    props.put("user", "root"); 
    props.put("password", "password");  
    props.put("useUnicode", "true"); 
    props.put("characterEncoding", "UTF-8");
    props.put("useServerPrepStmts", "false");
    props.put("characterEncoding", "UTF-8");
    url = "jdbc:mysql://localhost/library_System";
    Connection conn = (Connection) DriverManager.getConnection(url, props);
           Statement stmt = (Statement) conn.createStatement();    

    String SQL = "select * from library_system";

    ResultSet rs = stmt.executeQuery(SQL);

DefaultTableModel model = new DefaultTableModel();

model.addColumn("Name");
model.addColumn("Email");

JTable table = new JTable(model);
table.setSize(Int2.getWidth(), Int2.getHeight());
panel3.add(table);

while(rs.next()) 
{ 
    model.addRow(new Object[]{rs.getString("Full_Name"), rs.getString("Email")});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:09:41.380

添加行后始终使用[fireTableRowsInserted() 。](http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/table/AbstractTableModel.html#fireTableRowsInserted%28int,%20int%29)还请参考以下链接

[向 JTable 添加行](https://stackoverflow.com/questions/295649/adding-rows-to-a-jtable)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:29:05.317

不太确定，但先尝试 addRow() 。稍后使用模型创建 JTable。

# php - yii 视图在 activeInputField 验证器上加载失败

> ID：12082380
> 
> 赞同：0
> 
> 时间：2012-08-22T22:40:06.147
> 
> 标签：php, activerecord, yii, validation

我正在尝试使用 yii ActiveRecord 实现用户注册。问题是每次加载视图时都会出现以下异常：

```
Users has an invalid validation rule. The rule must specify attributes to be validated and the validator name.
#0  
+  /Applications/MAMP/htdocs/yiiRoot/framework/base/CModel.php(259): CModel->createValidators()
#1  
+  /Applications/MAMP/htdocs/yiiRoot/framework/web/helpers/CHtml.php(1758): CModel->getValidators("username")
#2  
+  /Applications/MAMP/htdocs/yiiRoot/framework/web/helpers/CHtml.php(1205): CHtml::activeInputField("text", Users, "username", array("name" => "Users[username]", "id" => "Users_username")) 
```

这是用户模型的相关部分：

```
public function rules()
{
        return array(
        array('username, password, confirmation_uuid, created_at', 'required'),
        array('is_male, is_online, is_idle, is_confirmed', 'numerical', 'integerOnly'=>true),
        array('username, password, first_name, last_name, conformation_uuid', 'length', 'max'=>255),
        array('birthdate, updated_at', 'safe'),
        array('id, username, password, first_name, last_name, birthdate, is_male, is_online, is_idle, is_confirmed, confirmation_uuid, created_at, updated_at', 'safe', 'on'=>'search'),
        array('username','email','allowName'=>true,'allowEmpty'=>false ),
        array('username','required'),
        array('password','application.extensions.validators.password','strength'=>'weak', 'on'=>'register'),
        array('password', 'compare', 'compareAttribute'=>'confirm_password', 'on'=>'register'),
        array('username,password,confirm_password,first_name,last_name,birthdate,is_male,confirmation_uuid','on'=>'register'),

    );
    } 
```

控制器：

```
public function actionRegister()
{
    $form=new Users;
            // collect user input data
            if(isset($_POST['Users']))
            {
                    $form->attributes=$_POST['User']; // set all attributes with post values
                    $form->email=$form->username;

                    // NOTE Changes to any $form->value have to be performed BEFORE $form-validate()
                    // or else it won't save to the database. 

                    // validate user input and redirect to previous page if valid
                    if($form->validate())
                    {
                            // save user registration
                            $form->save();
                            $loginURL = Yii::app()->createUrl('site/login');
                            $this->redirect($this->render('login',array('loginURL'=>$loginURL))); // Yii::app()->user->returnUrl
                    }
            }
            // display the registration form
            $this->render('register',array('form'=>$form));
} 
```

看法：

```
<div class="row">
    <?php echo CHtml::activeLabel($form,'username'); ?>
    <?php echo CHtml::activeTextField($form,'username'); ?>
    <?php //echo $form->error($model,'username'); ?>
</div> 
```

为什么此时要检查验证器？是什么导致它失败？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:42:13.387

你的最后一条规则

```
array('username,password,confirm_password,first_name,last_name,birthdate,is_male,confirmation_uuid','on'=>'register'), 
```

没有验证器名称。您列出所有属性，然后列出方案，但不列出验证器名称。

# powershell - ftpwebrequest 适用于 Windows 7 而不是 Windows Server

> ID：12082382
> 
> 赞同：0
> 
> 时间：2012-08-22T22:40:31.240
> 
> 标签：powershell, ftpwebrequest

所以我正在连接到 z/OS ftp 服务器。我正在使用下面的代码尝试使用 Powershell 2.0 下载文件。此代码适用于 Windows 7，但在 Windows Server 2003 或 Windows Server 2008 R2 上，我收到错误消息：

System.Net.WebException：远程服务器返回错误：（501）参数或参数中的语法错误。

除了操作系统的差异之外，没有更改任何参数，似乎没有防火墙或其他因素在起作用（我可以说）。

我正在使用的代码如下：

```
function Get-FTPFile ($Source,$Target,$UserName,$Password) 
 { 
      $ftprequest = [System.Net.FtpWebRequest]::create($Source) 
      $ftprequest.Credentials = New-Object      System.Net.NetworkCredential($username,$password) 
      $ftprequest.Method = [System.Net.WebRequestMethods+Ftp]::DownloadFile 
      $ftprequest.UseBinary = $false 
      $ftprequest.KeepAlive = $false 

      $ftpresponse = $ftprequest.GetResponse() 
      $responsestream = $ftpresponse.GetResponseStream() 

      $targetfile = New-Object IO.FileStream ($Target,[IO.FileMode]::Create) 
      [byte[]]$readbuffer = New-Object byte[] 1024 

      do{ 
          $readlength = $responsestream.Read($readbuffer,0,1024) 
          $targetfile.Write($readbuffer,0,$readlength) 
      } 
      while ($readlength -ne 0) 

      $targetfile.close() 
  } 
```

是的 UseBinary 必须为假。我正在下载一个文本文件，如果 useBinary 设置为 true，它就会出现乱码。

有没有人见过这个？

# php - 警告：implode() [function.implode]：在表单复选框中传递的参数无效

> ID：12082397
> 
> 赞同：2
> 
> 时间：2012-08-22T22:42:17.057
> 
> 标签：php, html, sql

现在一直在努力解决这个问题，可能很简单......

我在尝试提交联系表时不断收到以下错误

> 警告：implode() [function.implode]：在第 240 行传入的参数无效。

代码

```
<input type="checkbox" name="socialmedia[]" value="Facebook">Facebook<br>
<input type="checkbox" name="socialmedia[]" value="Twitter">Twitter<br>
<input type="checkbox" name="socialmedia[]" value="YouTube">YouTube<br>
<input type="checkbox" name="socialmedia[]" value="Flickr">Flickr<br>
<input type="checkbox" name="socialmedia[]" value="Vimeo">Vimeo<br> 
```

PHP代码

```
$socialmedia = array();
$socialmedia = implode(",",$_POST['socialmedia']); 
```

任何想法任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:47:18.180

当用户没有选中任何框时，我以前见过这种情况。您收到警告的原因是因为`$_POST['socialmedia']`如果没有选中复选框，则实际上不存在。你实际上是在打电话`implode(",", NULL);`

* * *

要在字符串中获取选定的复选框：

```
$checkboxes = !empty($_POST['socialmedia']) ? $_POST['socialMedia'] : array();
$socialmedia = implode(',' $checkboxes); 
```

* * *

似乎您可能希望它们在一个数组中。从你的问题很难判断。如果你想把它们放在一个数组中，你可以这样做：

```
$socialmedia = !empty($_POST['socialmedia']) ? $_POST['socialMedia'] : array(); 
```

`$socialmedia`如果没有选中复选框，则将是一个空数组，或者将包含复选框的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:52:49.337

干得好：

```
<form method="post">
<input type="checkbox" name="socialmedia[]" value="Facebook">Facebook<br>
<input type="checkbox" name="socialmedia[]" value="Twitter">Twitter<br>
<input type="checkbox" name="socialmedia[]" value="YouTube">YouTube<br>
<input type="checkbox" name="socialmedia[]" value="Flickr">Flickr<br>
<input type="checkbox" name="socialmedia[]" value="Vimeo">Vimeo<br>
<input type="submit">
</form>
<?
$socialmedia = array();
if(isset($_POST['socialmedia'])) $socialmedia = implode(",",$_POST['socialmedia']);
print_r($socialmedia);
?> 
```

唯一的变化是`if(isset($_POST['socialmedia']))`在数组内爆之前进行额外检查

# python - setuptools 的 install 和 easy_install 有什么区别（setup.py install vs setup.py easy_install）？

> ID：12082400
> 
> 赞同：5
> 
> 时间：2012-08-22T22:42:49.273
> 
> 标签：python, setuptools, easy-install

Setuptools 有两个安装选项。

```
python setup.py install 
```

还有：

```
python setup.py easy_install 
```

这些有不同的论据。这里的文档：http: [//peak.telecommunity.com/DevCenter/setuptools](http://peak.telecommunity.com/DevCenter/setuptools)提到这`install`主要是一个包装器`easy_install`，但是它不采用相同的参数，例如它缺少`--always-unzip`and`--allow-hosts`选项。

使用一个而不是另一个的含义是什么？

# javascript - 在javascript中匹配单词到一个空格

> ID：12082402
> 
> 赞同：0
> 
> 时间：2012-08-22T22:43:02.643
> 
> 标签：javascript, regex

我有以下字符串

```
var str = "Format-ABC-D Type-O" 
```

我想从这个字符串中得到“ABC-D”。我太胖了

```
str.(/Format-(\w+)/i)[1] 
```

但这只是给了我“ABC”。如何匹配空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:45:41.620

匹配除空格以外的任何内容，而不仅仅是单词字符：

```
/Format-(\S+)/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:47:32.840

您可以先将字符串修剪到空格，然后再执行您的操作。所以

```
str = str.substr(0, str.indexOf(" ")) // str is "Format-ABC-D" 
```

# python - 如何使用 python ctypes 处理 wchar_t **？

> ID：12082403
> 
> 赞同：0
> 
> 时间：2012-08-22T22:43:18.883
> 
> 标签：python, ctypes, wchar-t

我有一个动态 C 库（比如*foo.so*），其中有一个具有以下原型的函数

```
wchar_t **foo(const char *);

/*
  The structure of the return value is a NULL terminated (wchar_t **),
  each of which is also NULL terminated (wchar_t *) strings
*/ 
```

现在我想使用**ctypes**模块从 python 通过这个 API 调用函数

这是我尝试过的片段：

```
from ctypes import *

lib = CDLL("foo.so")

text = c_char_p("a.bcd.ef")
ret = POINTER(c_wchar_p)
ret = lib.foo(text)
print ret[0] 
```

但它显示以下错误：

> 回溯（最近一次通话最后）：
> 
> 文件“./src/test.py”，第 8 行，在
> 
> 打印 ret[0]
> 
> TypeError：“int”对象没有属性“_ _ getitem _ _”

任何帮助在 python 中进行的事情都是非常明显的。

PS：我已经在示例**C**代码中交叉检查了 foo("a.bcd.ef") 的功能，[这](http://i.imgur.com/fLhan.png)就是返回指针的样子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T02:05:21.407

缺少的步骤是定义[参数](http://docs.python.org/library/ctypes.html#specifying-the-required-argument-types-function-prototypes)和[返回](http://docs.python.org/library/ctypes.html#return-types)`foo`类型：

```
from ctypes import *
from itertools import takewhile

lib = CDLL("foo")
lib.foo.restype = POINTER(c_wchar_p)
lib.foo.argtypes = [c_char_p]

ret = lib.foo('a.bcd.ef')

# Iterate until None is found (equivalent to C NULL)
for s in takewhile(lambda x: x is not None,ret):
    print s 
```

简单（Windows）测试 DLL：

```
#include <stdlib.h>

__declspec(dllexport) wchar_t** foo(const char *x)
{
    static wchar_t* y[] = {L"ABC",L"DEF",L"GHI",NULL};
    return &y[0];
} 
```

输出：

```
ABC
DEF
GHI 
```

# c++ - 提升 shared_lock。阅读首选？

> ID：12082405
> 
> 赞同：18
> 
> 时间：2012-08-22T22:43:35.040
> 
> 标签：c++, boost

我正在检查 boost 库（1.45 版）的读/写锁。当我对其进行测试时，似乎 shared_ptr 更喜欢我的读者线程，即当我的作者试图为其操作获取锁时，它并没有阻止任何后续读取的发生。

是否有可能改变这种行为？

```
using namespace std;
using namespace boost;

mutex outLock;
shared_mutex workerAccess;
bool shouldIWork = true;

class WorkerKiller
{
public:   

    void operator()()  
    {
        upgrade_lock<shared_mutex> lock(workerAccess); 
        upgrade_to_unique_lock<shared_mutex> uniqueLock(lock);

        cout << "Grabbed exclusive lock, killing system" << endl;
        sleep(2);
        shouldIWork = false;
        cout << "KILLING ALL WORK" << endl;  
    }  

private:  
};

class Worker
{  
public:   

    Worker()
    {  
    }  

    void operator()()  
    {
        shared_lock<shared_mutex> lock(workerAccess); 

        if (!shouldIWork) {
            outLock.lock();
            cout << "Workers are on strike.  This worker refuses to work" << endl;
            outLock.unlock();
        } else {
            sleep(1);

            outLock.lock(); 
            cout << "Worked finished her work" << endl;
            outLock.unlock(); 
        }
    }  
};  

int main(int argc, char* argv[])  
{  
    Worker w1;
    Worker w2;
    Worker w3;
    Worker w4;
    WorkerKiller wk;

    boost::thread workerThread1(w1);
    boost::thread workerThread2(w2);

    boost::thread workerKillerThread(wk);

    boost::thread workerThread3(w3);
    boost::thread workerThread4(w4);

    workerThread1.join();
    workerThread2.join();
    workerKillerThread.join();
    workerThread3.join();

    return 0;
} 
```

**这是每次的输出：**

工作完成了她的工作 工作
完成了
她
的 工作

**我的要求**

如果作者试图获取独占锁，我希望所有之前的读取操作都完成。然后将所有后续的读操作阻塞。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-19T00:06:17.360

我对这个问题有点晚了，但我相信我有一些相关的信息。

boost 库所基于的 C++ 委员会的提案`shared_mutex`故意没有指定一个 API 来给予读者或作者优先权。这是因为 Alexander Terekhov 大约十年前提出了一个完全公平的算法。它让操作系统决定下一个获取互斥锁的线程是读取器还是写入器，操作系统完全不知道下一个线程是读取器还是写入器。

由于该算法，不再需要指定阅读器或作者是首选。据我所知，boost 库现在（boost 1.52）是用这种公平的算法实现的。

Terekhov 算法包括让读/写互斥体由两个门组成：gate1 和 gate2。每次只有一个线程可以通过每个门。门可以用一个互斥锁和两个条件变量来实现。

读者和作者都试图通过gate1。为了通过gate1，编写器线程当前不在gate1内部必须是真的。如果有，则试图通过 gate1 的线程会阻塞。

一旦读取器线程通过gate1，它就读取了互斥锁的所有权。

当写入线程通过gate1 时，它还必须通过gate2 才能获得互斥锁的写入所有权。直到 gate1 内的读卡器数量降为零，它才能通过 gate2。

这是一个公平的算法，因为当 gate1 内部只有 0 个或多个读取器时，由操作系统决定下一个进入 gate1 的线程是读取器还是写入器。只有在通过 gate1 之后，写入者才会被“优先化”，因此接下来将获得互斥锁的所有权。

我使用了针对最终`shared_timed_mutex`在 C++14 中的示例实现编译的示例（对您的示例稍作修改）。下面的代码调用它`shared_mutex`，这是它提出时的名称。

我得到以下输出（都具有相同的可执行文件）：

有时：

```
Worked finished her work
Worked finished her work
Grabbed exclusive lock, killing system
KILLING ALL WORK
Workers are on strike.  This worker refuses to work
Workers are on strike.  This worker refuses to work 
```

而有时：

```
Worked finished her work
Grabbed exclusive lock, killing system
KILLING ALL WORK
Workers are on strike.  This worker refuses to work
Workers are on strike.  This worker refuses to work
Workers are on strike.  This worker refuses to work 
```

而有时：

```
Worked finished her work
Worked finished her work
Worked finished her work
Worked finished her work
Grabbed exclusive lock, killing system
KILLING ALL WORK 
```

我相信理论上也应该有可能获得其他输出，尽管我没有通过实验证实这一点。

为了充分披露，这里是我执行的确切代码：

```
#include "../mutexes/shared_mutex"
#include <thread>
#include <chrono>
#include <iostream>

using namespace std;
using namespace ting;

mutex outLock;
shared_mutex workerAccess;
bool shouldIWork = true;

class WorkerKiller
{
public:   

    void operator()()  
    {
        unique_lock<shared_mutex> lock(workerAccess); 

        cout << "Grabbed exclusive lock, killing system" << endl;
        this_thread::sleep_for(chrono::seconds(2));
        shouldIWork = false;
        cout << "KILLING ALL WORK" << endl;  
    }  

private:  
};

class Worker
{  
public:   

    Worker()
    {  
    }  

    void operator()()  
    {
        shared_lock<shared_mutex> lock(workerAccess); 

        if (!shouldIWork) {
            lock_guard<mutex> _(outLock);
            cout << "Workers are on strike.  This worker refuses to work" << endl;
        } else {
            this_thread::sleep_for(chrono::seconds(1));

            lock_guard<mutex> _(outLock);
            cout << "Worked finished her work" << endl;
        }
    }  
};  

int main()  
{  
    Worker w1;
    Worker w2;
    Worker w3;
    Worker w4;
    WorkerKiller wk;

    thread workerThread1(w1);
    thread workerThread2(w2);

    thread workerKillerThread(wk);

    thread workerThread3(w3);
    thread workerThread4(w4);

    workerThread1.join();
    workerThread2.join();
    workerKillerThread.join();
    workerThread3.join();
    workerThread4.join();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:47:40.733

谷歌搜索“提升共享锁饥饿”出现了这个链接：

*   [boost shared_mutex（多次读取/一次写入）的示例？](https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write)

看起来“升级”可能是关键。也可以看看：

*   [如何使用 boost 可升级互斥锁的示例](https://stackoverflow.com/questions/3896717/example-of-how-to-use-boost-upgradeable-mutexes)

*   [http://HowardHinnant.github.io/shared_mutex](http://HowardHinnant.github.io/shared_mutex)

# ruby-on-rails-3 - CSV 格式的模板丢失错误

> ID：12082406
> 
> 赞同：0
> 
> 时间：2012-08-22T22:43:46.837
> 
> 标签：ruby-on-rails-3

我正在生成一个 csv 文件作为报告。如果模型验证通过，它工作正常。如果验证失败，我想在“新”操作视图上显示错误，并让用户保持在那里，直到他们纠正错误，就像任何 HTML 表单一样。但是，由于我在表单中使用 format=>'csv'，所以当用户输入未通过模型验证时，我会收到模板丢失错误。

```
Missing template /new.html with {:formats=>[:csv], 
```

我在我的控制器中尝试了以下渲染，但它不起作用：

```
format.csv { render :template=>"new.html.erb"} 
```

我什至尝试在初始化程序中添加一个处理程序，但没有奏效：

```
ActionController::Renderers.add :csv do |csv, options|
  self.content_type ||= Mime::CSV
  self.response_body  = csv.respond_to?(:to_csv) ? csv.to_csv : csv
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:21:12.803

您可以重定向到控制器中的新路径吗？

```
redirect_to :action => 'new', :format => 'html' 
```

# ajax - Extjs如何访问store正在使用的图表名称

> ID：12082410
> 
> 赞同：0
> 
> 时间：2012-08-22T22:43:56.903
> 
> 标签：ajax, json, charts, extjs

我有一个商店被几个图表使用。我通过 ajax 调用远程获取我的数据。在我也链接它的 php 脚本中，我只是要更改查询的参数以适应不同的图表。

这是我的想法：我将图表面板的标题作为参数传递给我的 php 脚本。那会告诉我它是哪个图表。

如何访问商店正在使用的任何图表的标题？

```
 var my_store = Ext.create('Ext.data.JsonStore', {
fields: ['project', 'accepted', 'rejected', 'deleted', 'undefined'],
proxy: {
    type: 'ajax',
    url: 'generate_proj.php',
    extraParams: {foo: **chart.id**},
    reader: {
    type: 'json'
    }
},
autoLoad: true,
listeners:  { 
    beforeload: function(store,operation) {
    //operation.params.foo = this.idname;
    },

    load: function(obj,records) {
    var text = Ext.decode(obj.responseText);
    Ext.each(records,function(rec) {                     
    });
    }
    }
}); 
```

这是我到目前为止所做的。获取单个图表/面板的名称是没有问题的。我希望**商店能够动态读取正在使用它的名称**。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:01:16.380

在某个地方，您有一些代码可以在各种图表之间切换。在该代码中，您可以执行类似的操作

```
activeChart.getChartStore().proxy.extraParams.foo = activeChart.getId(); 
```

其中 activeChart 是您对即将显示的图表的任何引用。然后，当您加载商店时，它会发送正确的参数。

# javascript - jQuery“认识团队”效果

> ID：12082412
> 
> 赞同：0
> 
> 时间：2012-08-22T22:44:04.093
> 
> 标签：javascript, jquery, arrays, onmouseover

我正在尝试为[这个块](http://i.stack.imgur.com/41qW0.jpg)创建一个 jQuery 效果。这个想法是，在鼠标悬停时，其他照片正在“查看”选定的照片。这是html代码。

```
<ul class="team">
    <li><img src="pics/team/t-0001.jpg" alt=""/></li>
    <li><img src="pics/team/t-0002.jpg" alt=""/></li>
    <li><img src="pics/team/t-0003.jpg" alt=""/></li>
    ...
</ul> 
```

理论上我明白，当鼠标悬停在其中一个 li 元素上时，我必须更改其他图像的 src 值。并且需要几个数组来存储这些路径。

但在实践中我有很大的问题。

我应该先做什么？可能有一些例子或插件？

我将不胜感激。

* * *

谢谢你的帮助！抱歉，不能早点回答，还有很多工作要做。

我找到了解决方案。它非常简单且不那么灵活，但它确实有效。我正在使用背景图片。

这是示例[http://jsfiddle.net/KSYUC/4/](http://jsfiddle.net/KSYUC/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:29:17.697

一种简化问题的方法是，通过每个人不包含 9 张图像，实际使用每个人一张合成图像，并具有所有可能性。在一张图片中可能是这样的（箭头表示人应该看的方向）：

![面方向](../Images/4cf6b61bf5d9a522bc40ad469b198115.png)

这使您可以通过 CSS 更改图像的背景位置（使用由图像大小确定的常规间隔）来改变方向。它还有一个好处是同时加载面部的所有可能性，而不是在面部变化时（这可能导致图像闪烁或需要预加载）。

然后，您必须根据其与所选人脸的相对位置来计算每个人脸要使用的图像。这是坐标之间的算术比较问题。

因此，如果您将所有面与选定的面进行迭代，那么如果当前的 Y 高于选定的 Y，那么它将是前三个“子图像”之一，然后您将比较 X 以查看它是否小于、等于或大于，以确定三者中的哪一个。这同样适用于所有三行可能的面。归根结底，它归结为比较 Y 和 X 的更小、相等或更大。这样你就可以计算背景位置中 X 和 Y 的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:51:14.707

```
$('img.smart').hover(function () {
    $(this).css('background-position':'-150px 0');
  },
  function () {
    $(this).css('background-position':'0 0');
  },
); 
```

放置一张带有显示块的“双”图像，普通图像的宽度和高度，并将css位置更改为负值并返回。注意：我为每个图像添加了 class="smart" 以便于 jQuery 选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:51:57.660

好吧，我建议您使用 json 而不是常规数组...为什么？好吧，您可以为给定的 json 对象分配一个用户名，该用户名包含该用户的所有图像以及其余用户的相同内容，然后只需在鼠标悬停时遍历该用户的 json 对象。说你有一个像这样的对象

```
 myvalues = [{"userone":['srcone','srctwo'],"usertwo":['srcone','srctwo']}] 
```

你像这样迭代它

```
for (var key in myvalues) {
    var obj = myvalues[key];
    for (var prop in obj) {
        alert("User:"+prop+" Valueone: "+obj[prop][0]+" Valuetwo:"+obj[prop][1]);
   }

} 
```

[http://jsfiddle.net/xRuBR/2/](http://jsfiddle.net/xRuBR/2/)

# python - 在python中显式传递函数

> ID：12082421
> 
> 赞同：2
> 
> 时间：2012-08-22T22:44:56.680
> 
> 标签：python, function

出于好奇，更希望将函数显式传递给其他函数，或者让函数从内部调用函数。这是显式比隐式更好的情况吗？

例如（以下仅用于说明我的意思）

```
def foo(x,y):
    return 1 if x > y else 0

partialfun = functools.partial(foo, 1)

def bar(xs,ys):
    return partialfun(sum(map(operator.mul,xs,ys)))

>>> bar([1,2,3], [4,5,6]) 
```

- 或者 -

```
def foo(x,y):
    return 1 if x > y else 0

partialfun = functools.partial(foo, 1)

def bar(fn,xs,ys):
    return fn(sum(map(operator.mul,xs,ys)))

>>> bar(partialfun, [1,2,3], [4,5,6]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:48:49.890

这在很大程度上取决于上下文。

基本上，如果函数是 的参数`bar`，那么调用者有责任知道如何实现该函数。`bar`不必在意。但因此，`bar`的文档必须描述它需要什么*样*的功能。

通常这是非常合适的。最明显的例子是`map`内置函数。`map`实现将函数应用于列表中的每个项目并返回结果列表的逻辑。`map`它本身既不知道也不关心这些项目是什么，或者函数对它们做了什么。`map`的文档必须描述它需要一个参数的函数，并且每个调用者`map`都必须知道如何实现或找到合适的函数。但是这种安排很棒；它允许您传递自定义对象的列表，以及专门对这些对象进行操作的函数，并且`map`可以离开并执行其通用操作。

但这种安排往往是不合适的。函数为高级操作命名并隐藏内部实现细节，因此您可以将操作视为一个单元。允许其部分操作作为函数参数从外部传入，这表明它以使用该函数接口的方式工作。

一个更具体（虽然有些人为）的例子可能会有所帮助。假设我已经实现了表示`Person`and的数据类型`Job`，并且我正在编写一个函数`name_and_title`，用于将某人的全名和职位格式化为字符串，以便客户端代码插入电子邮件签名或信头或其他任何内容。这显然需要一个`Person`and `Job`。它可能需要一个函数参数来让调用者决定如何格式化人名：类似于`lambda firstname, lastname: lastname + ', ' + firstname`. 但这样做是为了暴露我用单独的名字和姓氏来代表人们的名字。如果我想更改为支持中间名，那么要么`name_and_title`将无法包含中间名，或者我必须更改它接受的函数的类型。当我意识到有些人有 4 个或更多名称并决定更改为存储名称列表时，我肯定必须更改函数`name_and_title`接受的类型。

所以对于你的`bar`例子，我们不能说哪个更好，因为它是一个没有意义的抽象例子。这取决于调用是否是应该做`partialfun`的任何事情的实现细节，或者调用是否是调用者知道的事情（并且可能想要做其他事情）。如果它是 "part of" ，那么它不应该是一个参数。如果它是调用者的“一部分”，那么它应该是一个参数。`bar``partialfun``bar`

值得注意的是，它`bar`可能有*大量*的函数参数。您调用`sum`、`map`和`operator.mul`，它们都可以被参数化以使其`bar`更灵活：

```
def bar(fn, xs,ys, g, h, i):
    return fn(g(h(i,xs,ys)) 
```

也可以抽象`g`出调用输出的方式：`h`

```
def bar(fn, xs, ys, g, h, i, j):
    return fn(j(g, h(i, xs, ys))) 
```

而且我们可以一直继续下去，直到`bar`什么都不做，一切都由传入的函数控制，调用者还不如直接做他们想做的事情，而不是写100个函数来做并将它们传递`bar`给执行功能。

因此，实际上并没有一个始终适用的明确答案。这取决于您正在编写的特定代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T22:52:53.197

在这种情况下，功能和其他任何东西之间没有任何区别。如果某个参数可能随函数的不同调用而变化，则将其作为参数传递。如果您正在调用的函数（`bar`在您的示例中）始终调用相同的其他函数，则没有理由将其作为参数传递。如果您需要对其进行参数化以便可以使用许多不同的函数（即，`bar`可能需要调用除 之外的许多函数`partialfun`，并且需要知道要调用哪个函数），那么您需要将其作为参数传递。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T22:53:02.467

一般来说，是的，但一如既往，这取决于。您在此处说明的内容称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。一般来说，这是一个好主意，因为它允许将可变性与给定函数的逻辑分开。例如，这意味着您可以非常轻松地测试此类代码。

```
# To test the process performed in bar(), we can "inject" a function
# which simply returns its argument
def dummy(x):
    return x

def bar(fn,xs,ys):
    return fn(sum(map(operator.mul,xs,ys)))

>>> assert bar(dummy, [1,2,3], [4,5,6]) == 32 
```

# javascript - 支持 Windows 的 Node.js 云主机

> ID：12082422
> 
> 赞同：-1
> 
> 时间：2012-08-22T22:44:58.573
> 
> 标签：javascript, node.js, cloud-hosting

我研究了许多 node.js 云主机，但我很难找到一个适合我需要的。只要应用程序处于开发阶段（沙盒模式），主机就需要免费服务。它还需要有一个 Windows 客户端，而且易用性是一个巨大的优势。如果可能的话，我希望主机不再是测试版。

谁能推荐一个满足我需求的简单 node.js 主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:52:46.983

您检查过 Azure 托管吗？

> 只要应用程序处于开发阶段，主机就需要免费服务（沙盒模式）

他们目前提供[90 天的免费试用期](http://www.windowsazure.com/en-us/pricing/free-trial/)，并且他们付出了一些真正的努力让[Node.js 与他们的平台一起工作](http://www.windowsazure.com/en-us/develop/nodejs/)。

> 它还需要有一个 Windows 客户端，而且易用性是一个巨大的优势。

他们有一个 socket.io 示例和一个使用基于 Windows 的免费开发工具启动和运行的示例。

> 如果可能的话，我希望主机不再是测试版。

Node.JS 尚未发布 1.0 版。在某种程度上，整个工具链是测试版。但是，Windows Azure 是付费并受支持的。他们有一些人积极致力于 Node.JS 和一些驱动程序（*例如 SQL Server 支持*）。对我来说，这就像你现在会得到的那样“非测试版”。

# c# - 文本框自动完成未从 WebMethod 返回对象填充

> ID：12082423
> 
> 赞同：0
> 
> 时间：2012-08-22T22:45:03.047
> 
> 标签：c#, jquery-ui, jquery-ui-autocomplete, webmethod

我有一个连接到 jQuery UI 自动完成小部件的文本框。自动完成的来源是返回“Person”对象列表的 WebMethod。用户将开始输入人名，然后从自动完成列表中进行选择。然后，我希望其他几个文本框根据从自动完成列表中选择的项目填充值（公司、电话、电子邮件等）。这些其他值包含在返回的“Person”对象中。

我的 WebMethod 已成功填充对象列表，但在用户输入文本时未出现自动完成列表。我不确定如何判断对象列表是否真的被正确地传回给 jQuery 自动完成。

所以这是一个两部分的问题：

1.  为什么没有填充自动完成列表？
2.  我填充辅助文本框的代码是否正确？

请注意，我已经查看了所有其他“可能被认为是重复的”问题，但没有一个解决了这种特殊情况。

我的人类：

```
public class Person
{
    //New properties -------------
    public string label {get; set;}
    public string value {get; set;}
    // ----------------------------
    public string Name {get; set;}
    public string Company {get; set;}
    public string Phone {get; set;}
    public string Mobile {get; set;}
    public string Email {get; set;}
    public string Fax {get; set;}
} 
```

HTML/Javascript：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <link href="Scripts/themes/ui-lightness/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui-1.8.12.custom.min.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="True">
    </asp:ScriptManager>
    <div>
        <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
    </div>
    <div>
        <asp:TextBox ID="txtCompany" runat="server" ></asp:TextBox>
        <asp:TextBox ID="txtPhone" runat="server" ></asp:TextBox>
        <asp:TextBox ID="txtMobile" runat="server" ></asp:TextBox>
        <asp:TextBox ID="txtEmail" runat="server" ></asp:TextBox>
        <asp:TextBox ID="txtFax" runat="server" ></asp:TextBox>
    </div>
    <script type="text/javascript">
        PageMethods.SearchContacts(function (results) {
            $("#txtName").autocomplete({
                source: results,
                select: function (event, ui) {
                    $('#txtCompany').val(ui.item.company);
                    $('#txtPhone').val(ui.item.phone);
                    $('#txtMobile').val(ui.item.mobile);
                    $('#txtEmail').val(ui.item.mobile);
                    $('#txtFax').val(ui.item.mobile);
               }
            });
        });
    </script>
</asp:Content> 
```

WebMethod 返回的 Person 对象列表：

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static List<Person> SearchContacts()
{
    try
    {
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = ConfigurationManager.ConnectionStrings["ConnStr"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "SELECT Name, Company, PhoneOffice, PhoneMobile, Email, Fax FROM Contacts";
                cmd.Connection = conn;
                conn.Open();
                List<Person> contacts = new List<Person>();
                using (SqlDataReader sdr = cmd.ExecuteReader())
                {
                    while (sdr.Read())
                    {
                        Person person = new Person();
                        //New properties --------------------
                        person.label = sdr["Name"].ToString();
                        person.value = sdr["Name"].ToString();
                        // ----------------------------------
                        person.Name = sdr["Name"].ToString();
                        person.Company = sdr["Company"].ToString();
                        person.Phone = sdr["PhoneOffice"].ToString();
                        person.Mobile = sdr["PhoneMobile"].ToString();
                        person.Email = sdr["Email"].ToString();
                        person.Fax = sdr["Fax"].ToString();
                        contacts.Add(person);
                    }
                }
                conn.Close();
                return contacts;
            }
        }
    }
    catch (Exception ex)
    {
        throw new Exception(ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:44:01.307

[在安德鲁](https://stackoverflow.com/users/497356/andrew-whitaker)的帮助下想通了

首先是在我的 Person 类中添加 ' **label** ' 和 ' **value** ' 属性。[jQuery Autocomplete 小部件](http://jqueryui.com/demos/autocomplete/)需要以下对象数组的数据格式：

```
[ { label: "Choice1", value: "value1" }, ... ] 
```

第二件事是我需要在所有文本框中将[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)设置为“静态”。

```
<asp:TextBox ID="txtName" runat="server" ClientIDMode="Static"></asp:TextBox> 
```

第三件事是在 javascript 中引用对象属性是区分大小写的。

```
$('#txtCompany').val(ui.item.Company);  //Needed uppercase 'C' on Company to match class definition 
```

# url - 如何让 Firefox 在 url 或文件路径中处理正斜杠和反斜杠？

> ID：12082424
> 
> 赞同：0
> 
> 时间：2012-08-22T22:45:07.410
> 
> 标签：url, firefox

有没有办法让 Firefox 在 url 或本地文件路径中处理 / 喜欢 \ 反之亦然（重写它）？通过调整、附加组件或其他方式？

*   这与某些文件中的某些本地页面和链接有关。

*PS 这种行为已经存在于 IE 和 Chrome 中。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:29:03.843

这里有一些可以帮助你的东西：

```
<html>
<head>
<script language="javascript">
    function onload() {
        var list=document.getElementsByTagName("A");
        for(i = 0; i < list.length; i++)
        {
            if (list[i].href != null && list[i].href.length > 2 && list[i].href.substring(2,1) == ":") {
                list[i].href = "file:///"+list[i].href.replace(/\\/g, '\/');
            }
        }   
    }
</script>
</head>
<body onload="onload();">
    <a href="D:\Perso\gwt/eclipse"> hey you </a>
</body>
</html> 
```

在 IE、Chrome、Safari 和 FF 上测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:51:55.507

实际上，您永远不应该在 URL 中使用反斜杠。反斜杠不是 url 安全的 - 尽管大多数浏览器对它们有点放松，但它可能会在 url 解释的许多点上引起问题。

为确保您不必这样做，Windows 浏览器应该能够在这种情况下理解正斜杠。

喜欢：

```
file:///C|/W95/Calc.exe 
```

我听说有一个叫做 Slashy 的插件可以做你想做的事。我没有尝试过，只是把它扔进谷歌。

# matlab - 从矩阵输出将向量输入重构为算法

> ID：12082425
> 
> 赞同：0
> 
> 时间：2012-08-22T22:45:34.697
> 
> 标签：matlab, mathematical-optimization, numerical-methods

我编写了一些代码来实现一种算法，该算法将`q`实数向量作为输入，并作为输出返回一个复矩阵`R`。下面的 Matlab 代码生成了一个显示输入向量`q`和输出矩阵的图`R`。

仅给定复数矩阵输出`R`，我想获得输入向量`q`。我可以使用最小二乘优化来做到这一点吗？由于代码中存在递归运行和 (`rs_r`和`rs_i`)，因此输出矩阵的某一列的计算取决于前一列的计算。

也许可以设置非线性优化来`q`从输出矩阵重构输入向量`R`？

换一种方式来看，我使用了一种算法来计算矩阵`R`。我想“反向”运行算法以`q`从输出矩阵中获取输入向量`R`。

如果无法从输出中重构起始值，从而将问题视为“黑匣子”，*那么模型本身的数学是否可以用于优化*？该程序评估以下等式：

![方程](../Images/935338981513395c585155e684ba72b2.png)

Utilde(tau, omega) 是输出矩阵`R`。tau（时间）变量包含响应矩阵 的列`R`，而 omega（频率）变量包含响应矩阵 的行`R`。积分作为从 tau = 0 到当前 tau 时间步长的递归运行总和执行。

以下是由下面发布的程序创建的图：

![q值输入](../Images/1008278c5016410b55cc425916e70f9c.png) ![矩阵输出](../Images/b30553c460a0d5a0f4ac2f4033b56c5e.png)

这是完整的程序代码：

```
N = 1001;
q = zeros(N, 1); % here is the input
q(1:200) = 55;
q(201:300) = 120;
q(301:400) = 70;
q(401:600) = 40;
q(601:800) = 100;
q(801:1001) = 70;
dt = 0.0042;
fs = 1 / dt;
wSize = 101;
Glim = 20;
ginv = 0;
R = get_response(N, q, dt, wSize, Glim, ginv); % R is output matrix
rows = wSize; 
cols = N;

figure; plot(q); title('q value input as vector'); 
ylim([0 200]); xlim([0 1001])

figure; imagesc(abs(R)); title('Matrix output of algorithm')
colorbar 
```

这是执行计算的函数：

```
function response = get_response(N, Q, dt, wSize, Glim, ginv)

fs = 1 / dt; 
Npad = wSize - 1; 
N1 = wSize + Npad;
N2 = floor(N1 / 2 + 1);
f = (fs/2)*linspace(0,1,N2);
omega = 2 * pi .* f';
omegah = 2 * pi * f(end);
sigma2 = exp(-(0.23*Glim + 1.63));

sign = 1;
if(ginv == 1)
    sign = -1;
end

ratio = omega ./ omegah;
rs_r = zeros(N2, 1);  
rs_i = zeros(N2, 1);   
termr = zeros(N2, 1);
termi = zeros(N2, 1);
termr_sub1 = zeros(N2, 1);
termi_sub1 = zeros(N2, 1);
response = zeros(N2, N);

 % cycle over cols of matrix
for ti = 1:N               

    term0 = omega ./ (2 .* Q(ti));
    gamma = 1 / (pi * Q(ti));

    % calculate for the real part
    if(ti == 1)
        Lambda = ones(N2, 1);
        termr_sub1(1) = 0;  
        termr_sub1(2:end) = term0(2:end) .* (ratio(2:end).^-gamma);  
    else
        termr(1) = 0; 
        termr(2:end) = term0(2:end) .* (ratio(2:end).^-gamma); 
        rs_r = rs_r - dt.*(termr + termr_sub1);
        termr_sub1 = termr;
        Beta = exp( -1 .* -0.5 .* rs_r );

        Lambda = (Beta + sigma2) ./ (Beta.^2 + sigma2);  % vector
    end 

    % calculate for the complex part  
    if(ginv == 1)  
        termi(1) = 0;
        termi(2:end) = (ratio(2:end).^(sign .* gamma) - 1) .* omega(2:end);
    else
        termi = (ratio.^(sign .* gamma) - 1) .* omega;
    end
    rs_i = rs_i - dt.*(termi + termi_sub1);
    termi_sub1 = termi;
    integrand = exp( 1i .* -0.5 .* rs_i );

    if(ginv == 1) 
        response(:,ti) = Lambda .* integrand;
    else        
        response(:,ti) = (1 ./ Lambda) .* integrand;
    end  
end % ti loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:43:47.200

不，除非您知道此过程的“模型”本身，否则您不能这样做。如果您打算将该过程视为一个完整的黑匣子，那么一般来说这是不可能的，尽管在任何特定情况下，任何事情都可能发生。

即使您确实知道底层过程，但它可能仍然不起作用，因为任何最小二乘估计器都依赖于起始值，因此如果您在那里没有很好的猜测，它可能会收敛到错误的参数集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:39:39.890

事实证明，通过使用模型的数学，可以估计输入。一般来说，这不是真的，但对于我的问题，它似乎有效。通过偏导数消除累积积分。

```
N = 1001;
q = zeros(N, 1);
q(1:200) = 55;
q(201:300) = 120;
q(301:400) = 70;
q(401:600) = 40;
q(601:800) = 100;
q(801:1001) = 70;
dt = 0.0042;
fs = 1 / dt;
wSize = 101;
Glim = 20;
ginv = 0;
R = get_response(N, q, dt, wSize, Glim, ginv);
rows = wSize; 
cols = N;
cut_val = 200;

imagLogR = imag(log(R));

Mderiv = zeros(rows, cols-2);
for k = 1:rows
   val = deriv_3pt(imagLogR(k,:), dt);
   val(val > cut_val) = 0;
   Mderiv(k,:) = val(1:end-1);
end

disp('Running iteration');
q0 = 10;
q1 = 500;
NN = cols - 2;
qout = zeros(NN, 1);
for k = 1:NN
    data = Mderiv(:,k); 
    qout(k) = fminbnd(@(q) curve_fit_to_get_q(q, dt, rows, data),q0,q1);
end

figure; plot(q); title('q value input as vector'); 
ylim([0 200]); xlim([0 1001])

figure;
plot(qout); title('Reconstructed q')
ylim([0 200]); xlim([0 1001]) 
```

以下是支持功能：

```
function output = deriv_3pt(x, dt)

% Function to compute dx/dt using the 3pt symmetrical rule
% dt is the timestep

N = length(x);
N0 = N - 1;
output = zeros(N0, 1);
denom = 2 * dt;

for k = 2:N0 
   output(k - 1) = (x(k+1) - x(k-1)) / denom;  
end

function sse = curve_fit_to_get_q(q, dt, rows, data)

fs = 1 / dt;
N2 = rows;
f = (fs/2)*linspace(0,1,N2);  % vector for frequency along cols
omega = 2 * pi .* f';
omegah = 2 * pi * f(end);
ratio = omega ./ omegah;

gamma = 1 / (pi * q);

termi = ((ratio.^(gamma)) - 1) .* omega;

Error_Vector =  termi - data;
sse = sum(Error_Vector.^2); 
```

![原来的](../Images/6f8e6e8ed7ac27927504d081d4c69ad0.png) ![估计的](../Images/3f8eda388ff96dca0111d31eaf9ac99b.png)

# .htaccess - 如何从根目录中的子文件夹重写 url

> ID：12082426
> 
> 赞同：-1
> 
> 时间：2012-08-22T22:45:35.620
> 
> 标签：.htaccess, seo

我在 Google es 中有更多链接：

```
http://www.mysite.com/blog/23-08-2012/example.html
http://www.mysite.com/blog/more/
http://www.mysite.com/blog/test/example.html 
```

如何通过删除 htaccess es 中的“blog”一词来重写 url：

```
http://www.mysite.com/23-08-2012/example.html
http://www.mysite.com/more/
http://www.mysite.com/test/example.html 
```

* * *

# 编辑

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
</IfModule> 
```

* * *

# 重新编辑解决方案

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
</IfModule>
  RedirectMatch 301 ^/blog/(.*)$ /$1 
```

重要的是把这条线放在最后，而不是开始

```
RedirectMatch 301 ^/blog/(.*)$ /$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:08:16.777

只需一两分钟阅读[Apache 的 Rewrite Rule](http://kb.mediatemple.net/questions/85/Using+.htaccess+rewrite+rules#gs/httpexamplecomfilehtml-to-httpexamplecomfolder1fil)文档就会为您提供答案。以下是您可以执行的操作的概述：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond ^blog/
RewriteRule ^blog/(.*)$ http://mysite.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:12:59.813

你只需要 mod_alias 来做到这一点：

```
RedirectMatch 301 ^/blog/(.*)$ /$1 
```

您可以在您的虚拟主机配置或文档根目录中的 htaccess 文件中使用它。

* * *

惊讶于您没有 mod_alias，默认情况下它几乎已加载。但是由于您已经在使用 mod_rewrite：

如果这是您所拥有的：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteBase /
   RewriteRule ^index\.php$ - [L]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . /index.php [L]
</IfModule> 
```

然后在上面`RewriteBase`，添加：

```
RewriteRule ^blog/(.*)$ /$1 [L,R=301] 
```

# javascript - javascript：切换一对类

> ID：12082428
> 
> 赞同：1
> 
> 时间：2012-08-22T22:45:43.310
> 
> 标签：javascript, jquery

在 Stackoverflow 网站上，如果用户没有投票，投票箭头最初可以是“vote-up-off”/“vote-down-off”。如果用户之前投票，它也可以是一个向上/另一个向下。从这3个案例开始，当用户点击时，我想切换类。在这个网站上好心人的帮助下，到目前为止我得到了这段代码：

```
if($("a.vote-up-down").hasClass("vote-up-on")){
    $(".vote-up-on").removeClass("vote-up-on").addClass("vote-up-off");
    $(".vote-down-off").removeClass("vote-down-off").addClass("vote-down-on");
}
else if($("a.vote-up-down").hasClass("vote-down-on")){
    $(".vote-down-on").removeClass("vote-down-on").addClass("vote-down-off");
    $(".vote-up-off").removeClass("vote-up-off").addClass("vote-up-on");
} 
```

如果您在已经投票支持时不再次单击向上箭头，或者在已经投票反对时不再次单击向下箭头，则此方法有效。否则，它会不断切换而忽略实际投票。如果最初两个箭头都关闭，则此代码将同时更改。在我的 ajax 函数中，我可以提供实际投票值（1 或 -1）的响应消息，如何更正上述代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:59:06.437

如果你不使用`vote-up-on`和`vote-down-on`作为不同的类名，整个事情会更容易。只需切换一类`on`：http: [//jsfiddle.net/ghSEb/](http://jsfiddle.net/ghSEb/)。

```
$(".vote").on("click", function() {
    $(".vote").not(this).removeClass("on");  // make sure to remove other vote
    $(this).toggleClass("on");​​​​​​​​​               // switch this one
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T22:59:56.717

[使用.toggleClass()](http://api.jquery.com/toggleClass/)内部的条件

```
var $voteDown = $("a.vote-up-down");
$(".vote-up-on").toggleClass('vote-up-off',$voteDown.hasClass("vote-up-off"))
$(".vote-up-off").toggleClass('vote-up-on',$voteDown.hasClass("vote-up-on")) 
```

# solaris - 如何在电子邮件正文中显示图表

> ID：12082429
> 
> 赞同：0
> 
> 时间：2012-08-22T22:46:16.427
> 
> 标签：solaris, sunos

这是我在下面绘制图形的 HTML 文件。当我使用 IE/Firefox/Chrome 打开我的 HTML 文件时，我可以正确地看到我的图表。

我需要在电子邮件正文中发送此图表。当我尝试使用以下命令时，我只能看到此 HTML 的纯文本版本：

```
mail -r techgeeky@domain.com < graph.html 
```

所以我修改了我的文件，*graph.html*，如下所示，在顶部添加了几行。然后当我再次触发上述命令时，我的邮件正文中什么也没有。我需要在电子邮件顶部专门添加什么来完成这项工作吗？我正在运行 SunOS 5.10。

```
From: techgeeky@domain.com
To: techgeeky@domain.com
Subject: MIME Test
Mime-Version: 1.0
Content-type: text/html; charset=utf-8
Content-transfer-encoding: us-ascii

<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Title');
        data.addColumn('number', 'Value');
        data.addRows([
          ['No Error Percentage', 100-16.81336174073654],
             ['Error Percentage', 16.81336174073654]
        ]);

        // Set chart options
        var options = {'title':'LIP Data Quality Report',
                       'width':700,
                       'height':600};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div" style="width:900px; height: 800px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:57:06.783

你必须：

1.  获取使用 javascript 库生成的 HTML
2.  去掉任何脚本、事件等。
3.  将 HTML 字符串发送到您的服务器（您可能需要对其进行编码）
4.  从您的服务器发送带有 HTML 字符串作为正文的电子邮件。

# python - Python：如何将while循环的值的总和存储到一个变量中？

> ID：12082442
> 
> 赞同：3
> 
> 时间：2012-08-22T22:47:40.887
> 
> 标签：python, loops, while-loop

我只是一个初学者：P。我正在 Codeacademy 上做一个关于 while 循环的教程“点击[这里](http://www.codecademy.com/courses/a-dash-of-python/1#!/exercises/1)！” ，但我在这部分卡住了：编写一个while循环，将`theSum`前10个正整数（包括10）的总和存储到“”中。这就是它给你的工作：

```
theSum = 0
num = 1
while num <= 10:
    print num
    num = num + 1 
```

它在控制台的单独行上打印出数字 1 到 10。谁能向我解释如何让它将值的总和存储在变量“ `mySum`”中？到目前为止，我尝试过的任何事情都对我不起作用。:(

编辑：好的，所以我只是尝试了这个：

```
theSum = 0
num = 1
while num <= 10:
    num += 1
    mySum = num
    mySum = mySum + num

print mySum 
```

这给了我22，这是为什么呢？我到底是不是很亲近？（感谢所有回复，但我明天再试一次。）

编辑：好的，我明白了！感谢您的帮助。:)

```
mySum = 0 
num = 1 
while num <= 10: 
    mySum += num 
    num += 1    
print mySum 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T22:49:49.177

您已经显示了几乎所有需要的代码。

剩下的问题是，当您在-loop中正确生成要添加的值 ( `num`)时，您并*没有*在变量中累积这些值。`while`*`theSum`*

 **我不会故意给你缺少的代码*，这样你就可以从你的问题中学到一些东西......但是你需要在循环*内*`num`将值添加到你的变量中。执行此操作的代码（实际上只有 *一个*语句，即一行代码）将与您在循环内处理/更新值的方式有些相似。`theSum` **`num`**

 **这有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T00:28:16.037

让我们试一下您发布的代码。我已经对这些行进行了编号，以便我可以参考它们。

```
1\. num = 1
2\. while num <= 10:
3\.     num += 1
4\.     mySum = num
5\.     mySum = mySum + num

6\. print mySum 
```

这是一个试运行

```
1\. 很简单，创建一个新变量`num`并将其绑定到数字`1`
2.`num`小于10，循环体也是如此
3\. `num` 是 `1` 所以现在将它绑定到 `2`
4.创建一个新变量`mySum`并绑定到`2`（与num相同）
5\. `mySum` 是 `2` 而 `num` 是 `2` 所以将 `mySum` 绑定到 `4`
回到循环顶部
2.`num`小于10，循环体也是如此
3\. `num` 是 `2` 所以现在将它绑定到 `3`
4.将`mySum`绑定到`3`（与num相同）
5\. `mySum` 是 `3` 而 `num` 是 `3` 所以将 `mySum` 绑定到 `6`
回到循环顶部
2.`num`小于10，循环体也是如此
3\. `num` 是 `3` 所以现在将它绑定到 `4`
4.将`mySum`绑定到`4`（与num相同）
5\. `mySum` 是 `4` 并且 `num` 是 `4` 所以将 `mySum` 绑定到 `8`
回到循环顶部
...

```

看起来有些不对劲。`mySum = num`你为什么在循环中这样做？你期望它做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:04:21.947

对于循环！嗯，我说！

```
n=10
sum(range(n+1)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-02T21:10:56.457

我也为此苦苦挣扎。

这是我的解决方案，但我得到了 interactivepython.org 的帮助（[http://interactivepython.org/runestone/static/pip2/IndefiniteIteration/ThewhileStatement.html](http://interactivepython.org/runestone/static/pip2/IndefiniteIteration/ThewhileStatement.html)）

如果没有“返回”功能，我无法弄清楚如何做到这一点。请参阅下面的解决方案和说明：

```
def problem1_3(x):
    my_sum=0
    count = 1
    while count<=x:
        my_sum=my_sum+count
        count = count+1
    return my_sum
    print(my_sum) 
```

假设您设置 x = 3 我*相信*python 解释的方式如下：设置 my_sum = 0 和 count = 1 1\. 使用 while 循环的第一次迭代：1 <= 3 ：真所以 my_sum = 0+1 加上计数增加by 1 and now count = 2 “Return my_sum”是关键，因为它允许 my_sum 现在以 1 而不是 0 循环回到循环的顶部。

2.  while 循环的第二次迭代： 2 <= 3 : True 所以 my_sum = 1+2 ; count 再次增加 1 所以现在 count = 3 Return my_sum 再次将 my_sum 的新值 3 返回到循环的顶部

3.  while 循环的第三次迭代： 3 <= 3 : True 所以 my_sum = 3+3 ；count 增加 1 所以现在 count = 4 Return my_sum 再次将 my_sum 的新值 6 返回到循环的顶部

4.  自 4 <=3 以来，while 循环的第四次迭代从未发生过：False 现在程序打印 my_sum 现在等于 6。

但是，我认为会有一种更简单的方法来做到这一点。python有没有办法生成一个列表，然后对列表中的值求和？例如，我可以编写一个名为 sumlist(n) 的程序，其中 python 列出从 0 到 n 的整数，然后将它们相加吗？***

# python - 如何在每个进程一个线程的情况下使用带有 mod_wsgi 的信号？

> ID：12082443
> 
> 赞同：0
> 
> 时间：2012-08-22T22:47:44.727
> 
> 标签：python, signals, mod-wsgi

我正在尝试使用[中间件](https://github.com/zmanji/plop/blob/master/plop/wsgi.py)来分析 WSGI 应用程序。这个中间件使用`plop`的是一个低开销的 python 分析器，它依赖于`signal`模块。

如果我运行一个通过运行使用此中间件的 Django 应用程序，`./manage.py runserver --forked`那么它的中间件将按预期工作。但是，当同一个 Django 应用程序在 apache 上运行时，`mod_wsgi`它不会按预期工作。

该`mod_wsgi`实例配置了 Django 应用程序`WSGIRestrictSignal Off`，`WSGIDaemonProcess example processes=5 threads=1`并且当运行 Django 应用程序时，会发生以下错误：

`ValueError: signal only works in main thread`

如果我在没有`--forked`标志的情况下运行开发服务器，则会发生相同的错误。我认为它不应该发生在 apache 上，因为线程数是 1。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:19:15.013

使用在样本之间执行 sleep() 的后台线程在技术上应该可行，并且在我自己完成此操作之前使用过该方法。

有一个为此目的创建后台线程的示例：

[http://code.google.com/p/modwsgi/wiki/DebuggingTechniques#Extracting_Python_Stack_Traces](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques#Extracting_Python_Stack_Traces)

# android - 如何从服务中打开 Activity.openOptionsMenu()

> ID：12082444
> 
> 赞同：0
> 
> 时间：2012-08-22T22:47:54.180
> 
> 标签：android, service, android-activity, android-optionsmenu

我有一项服务（用于通信），需要调用当前正在运行的活动的 openOptionsMenu() 。我有大约 3 个左右的活动需要根据服务的请求显示他们的选项菜单。如何找到当前正在运行的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:35:22.930

我的建议是从活动的活动中调用 bindService() 并打开与服务的连接。在您的服务的活页夹连接上定义的方法之一应该将活页夹作为参数。Activity 将实例化这个 Binder 并将其传递给 Service 的 binder 方法。当有趣的事件发生时，Service 应该调用 Activity 传递给它的 Binder 上的方法。

当您的一个活动进入后台时，它应该取消注册之前传入的 Binder 并从服务中取消绑定。

所以，你有一个服务的 AIDL，看起来像

```
interface IServiceConnection {
    void registerCallback(IActivityCallback callback);
    void unregisterCallback(IActivityCallback callback);
} 
```

然后你有一个 IActivityCallback.aidl 看起来像

```
oneway interface IActivityCallback {
    void openOptionsMenu();
} 
```

在您的服务中，您有

```
private ArrayList<IActivityCallback> mCallbacks = new ArrayList<IActivityCallback>();
private IServiceConnection.Stub mBinder = new IServiceConnection.Stub() {
    public void registerCallback(IActivityCallback callback) { 
        mCallbacks.add(callback);
    }

    public void registerCallback(IActivityCallback callback) { 
        mCallbacks.remove(callback);
    }
}

private void onEvent() {
    for (int ptr = mCallbacks.size() - 1; ptr > -1; ptr--) {
        mCallbacks.get(ptr).openOptionsMenu();
    }
} 
```

在您的服务的 onBind 方法中，您返回 mBinder。

在您的活动中，您有

```
private IActivityCallback.Stub mPlayerBinder = new IActivityCallback.Stub() {
    public void openOptionsMenu() {
        // call method in Activity to show options menu
    }
} 
```

您使用 bindService 调用从您的 Activity 绑定到您的服务，当 ServiceConnection 接收到 onServiceConnected 时，您将其存根转换为 IServiceConnection，然后调用 registerCallback 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:03:33.407

我不建议采取这种行动计划。在未经用户许可和预知的情况下操作和 UI 功能是不友好的。但要做到这一点，您需要通过静态字段或应用程序扩展中的字段（或单例状态机等）维护对您的活动的可靠引用。

# linux - 在linux内核中挂载ext4文件系统的代码在哪里？

> ID：12082445
> 
> 赞同：1
> 
> 时间：2012-08-22T22:47:58.267
> 
> 标签：linux, debugging, kernel, breakpoints

我只是在学习如何修改linux内核。我正在使用 gdb 远程调试内核，但我的断点（b console_init，b start_kernel）不起作用。现在我想尝试在 ext4 文件系统挂载时设置断点。谁能告诉我在代码中的哪里设置断点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:54:39.223

我可以建议跑步吗

```
grep -rn mount /usr/src/linux/fs/ext4/ 
```

甚至

```
grep -rn 'mount.*(' /usr/src/linux/fs/ext4/ 
```

并检查结果？如果你打算使用 Ext4 代码，你应该非常熟悉它，无论如何......

# sencha-touch-2 - Sencha Touch 2 如何在 Nestedlist 上检测顶级

> ID：12082446
> 
> 赞同：0
> 
> 时间：2012-08-22T22:48:04.340
> 
> 标签：sencha-touch-2

我想创建一个事件侦听器来检测我的嵌套列表何时处于顶层，然后在页面上隐藏一个组件。例如：

```
onNestedlistActiveItemChange: function(container, value, oldValue, options) {
     if (this.getMyNestedList().atLevel(0)) <-- seudo code, does not work
           {
           Ext.getCmp('myButton').hide();
           }
    } 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:04:56.967

嵌套列表的`_backButton._hidden`属性将`true`在默认返回按钮隐藏和`false`按钮显示时返回。仅当嵌套列表位于顶层时，该按钮才会隐藏。

诀窍是使用嵌套列表的“后退”事件，它在后退事件发生*后返回工具栏的状态：*

```
onMynestedlistBack: function(nestedlist, node, lastActiveList, detailCardActive, options){
    if(nestedlist._backButton._hidden) {
        Ext.ComponentQuery.query('#myButton')[0].hide();
    }
} 
```

也就是说，如果嵌套列表的后退按钮是隐藏的，那么列表就在顶层，所以 hide `myButton`。

当然有更严格的方法可以做到这一点，但其中大多数会涉及覆盖工具栏的默认按钮处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T10:47:49.577

您可以通过检查列表的索引来获取列表级别

```
var idx = nestedlist.getInnerItems().indexOf(list);
if (idx === 0) { 
    // top level...
} 
```

**[更新]**

您还可以检查记录的深度级别

```
var depth = record.getData().depth;
if (depth === 1) { 
    // top level...
} 
```

# javascript - ExtJS4 网格：重置列顺序按钮

> ID：12082460
> 
> 赞同：1
> 
> 时间：2012-08-22T22:49:36.550
> 
> 标签：javascript, extjs, grid, extjs4

我正在使用包含多列数据的网格。我希望用户能够移动列（通过在网格上将 enableColumnMove 属性设置为 true），但我还需要能够将列顺序重置为我启动网格的顺序。

创建列后，无法更改列的 dataIndex 属性。有没有不同的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:28:41.823

您可以使用`grid.reconfigure(null, grid.initialConfig.columns)`将网格重置为其原始状态。第一个参数用于在网格上设置新存储，但如果将其保留为空/未定义，则网格存储将不受影响。

请注意，重新配置方法可能会对锁定的网格和带有嵌套列标题的网格产生意想不到的副作用。但是对于大多数网格，它应该可以正常工作。

# erlang - 一个连接，两个通道。大信息

> ID：12082461
> 
> 赞同：2
> 
> 时间：2012-08-22T22:49:37.270
> 
> 标签：erlang, rabbitmq

如果对于一个客户端，它会建立一个连接，并在此连接中创建两个通道。它开始通过第一个通道向rabbitmq 的交易所发送一条大消息（5MB）。网络速度较低，例如每秒 100kb。一秒钟后，它开始通过第二个通道发送另一个小消息（10kb）到另一个rabbitmq的交换。

在第一条消息（5MB）完成之前，第二条消息（10kb）是否不会发送任何字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:24:37.963

消息被分割成帧，来自不同通道的帧可以在同一个连接上交错。这意味着您的第二条（较小的）消息不必等待第一条消息完成，5MB 消息被分成几个帧（给定 RabbitMQ 的默认最大帧大小为 128KB），并且两条消息的帧的发送将交错.

# android - 一次调用android弹出多个对话框

> ID：12082464
> 
> 赞同：0
> 
> 时间：2012-08-22T22:50:08.170
> 
> 标签：android, android-alertdialog

我对此很陌生，所以请原谅我的天真。我已经在论坛中正确搜索了这个问题，但找不到解决方案，但可能是没有人像我一样粗心犯错误.. :)

我在两个对话框中调用的表单上有两个按钮。我有一个 Onprepare 方法和 On create 方法，用于通过开关和案例处理的对话框。

```
 public void onClick(View arg0) {
    // TODO what needs to be done on button clicks
    switch (arg0.getId()) {
    case R.id.bAddtrans:

    case R.id.btransdate:
        showDialog(1);
        date.setText(strDate);
    case R.id.bpaidfor:
        showDialog(2);
    } 
```

我的 On Prepare 和 On Create 方法是：

```
@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    super.onPrepareDialog(id, dialog);
    switch (id) {
    case 1:
        // Some initialization needed.
        DatePickerDialog dateDlg = (DatePickerDialog) dialog;
        int iDay,
        iMonth,
        iYear;
        Calendar cal = Calendar.getInstance();
        iDay = cal.get(Calendar.DAY_OF_MONTH);
        iMonth = cal.get(Calendar.MONTH);
        iYear = cal.get(Calendar.YEAR);
        dateDlg.updateDate(iYear, iMonth, iDay);
        break;
    case 2:
        // Static dialog hence no initialization needed
        break;
    }
    return;

}

protected Dialog onCreateDialog(int id) {
    switch (id) {
    case 1:
        DatePickerDialog dateDlg = new DatePickerDialog(this,
                new DatePickerDialog.OnDateSetListener() {
                    public void onDateSet(DatePicker view, int year,
                            int monthOfYear, int dayOfMonth) {
                        Time chosenDate = new Time();
                        chosenDate.set(dayOfMonth, monthOfYear, year);
                        long dtDob = chosenDate.toMillis(true);
                        strDate = DateFormat.format("MMMM dd, yyyy", dtDob);
                        // Toast.makeText(this, "Date picked: " + strDate,
                        // Toast.LENGTH_SHORT).show(); }
                    }
                }, 2011, 0, 1);
        dateDlg.setMessage("Please select date..");
        /*Toast toast = Toast.makeText(this, "Date picked: " + strDate,
                Toast.LENGTH_SHORT);
        toast.show();*/
        return dateDlg;
        //break;
    case 2:
        // TODO show multiselect dialog box
        // ArrayList<String> adapterpaidfor = new ArrayList<String>(Data);
        final CharSequence[] peoplelist = Data
                .toArray(new CharSequence[Data.size()]);
        final ArrayList<CharSequence> selectedpeople = new ArrayList<CharSequence>();
        boolean[] checkedpeople = new boolean[peoplelist.length];
        int count = peoplelist.length;

        for (int i = 0; i < count; i++)
            checkedpeople[i] = selectedpeople.contains(peoplelist[i]);

        DialogInterface.OnMultiChoiceClickListener peopleDialogListener = new DialogInterface.OnMultiChoiceClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which,
                    boolean isChecked) {
                if (isChecked)
                    selectedpeople.add(peoplelist[which]);
                else
                    selectedpeople.remove(peoplelist[which]);

                onChangeSelectedpeople();
            }

            private void onChangeSelectedpeople() {
                // TODO change the button name
                StringBuilder stringBuilder = new StringBuilder();

                for (CharSequence peoplelist : selectedpeople)
                    stringBuilder.append(peoplelist + ",");

                paidfor.setText(stringBuilder.toString());
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Select People");
        builder.setMultiChoiceItems(peoplelist, checkedpeople,
                peopleDialogListener);
        builder.setPositiveButton( "OK", onChangeSelectedpeople());

        AlertDialog dialog = builder.create();
        dialog.show();
        return dialog;
        //break;
    }
    return null;    

}

private android.content.DialogInterface.OnClickListener onChangeSelectedpeople() {
    // TODO Auto-generated method stub
    return null;
} 
```

问题是，当我单击按钮 btransdate 时，案例 2 的对话框也会在前端弹出，我必须按对话框的 Ok 按钮，然后我可以在背景上找到具有日期选择器的第二个对话框。当我单击按钮 bpaid 时，一切正常，并且不会调用 datepicker 对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:00:00.490

在您的第一个代码块中，您缺少 break 语句。您正在通过 switch 语句并随后在返回之前进行所有调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:02:27.370

在你的 onClick 方法中你应该写一个 break；每种情况下的命令，如下所示：

```
public void onClick(View arg0) {
// TODO what needs to be done on button clicks
switch (arg0.getId()) {
case R.id.bAddtrans:
break;
case R.id.btransdate:
    showDialog(1);
    date.setText(strDate);
break;
case R.id.bpaidfor:
    showDialog(2);
break;
} 
```

# python - 调用 load_tests() 时的奇怪行为

> ID：12082465
> 
> 赞同：0
> 
> 时间：2012-08-22T22:50:14.230
> 
> 标签：python, unit-testing

在 Python 2.7 中使用新的发现功能时，我遇到了一个奇怪的错误。我有一些单元测试需要一些额外的设置和文件中的一些成员数据。我正在尝试将我的设置测试用例添加到传递给`load_tests()`. 但是因为测试套件`tests`已经包含标准测试（包括`TestCase`当前模块中的对象），所以自动添加的测试用例的正确设置没有完成，我得到一个 AttributeError。

在下面的代码中，`load_tests()`用于为 csv 文件中的每一行数据创建一个测试用例。该文件有三行，但由于某种原因，正在创建第四个测试用例。

```
#!/usr/bin/python
import unittest

class Foo(unittest.TestCase):    
    def setup(self,bar):
        print "Foo.setup()"
        self.bar = bar 
    def runTest(self):
        print self.bar

def load_tests(loader, tests, pattern):
    f = open('data.csv')  # data.csv contains three lines: "a\nb\nc"
    for line in f:
        tc = Foo()
        tc.setup(line)
        tests.addTest(tc)
    return tests

unittest.main() 
```

当我执行这段代码时，输​​出显示执行了 4 个测试，其中一个失败了。数据文件只包含三行，并且`Foo.setup()`只被调用了 3 次。因此`load_tests()`按设计创建了三个测试用例。

```
Foo.setup()
Foo.setup()
Foo.setup()
Ea

.b

.c

.
======================================================================
ERROR: runTest (__main__.Foo)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "./foo.py", line 11, in runTest
    print self.bar
AttributeError: 'Foo' object has no attribute 'bar'

----------------------------------------------------------------------
Ran 4 tests in 0.002s 
```

有没有办法删除套件中自动加载的 TestCase？我无法创建一个新的空 TestSuite，因为我需要已经存在的所有其他测试。我只想将这些测试添加到套件中。

编辑：澄清了我的问题和代码示例。我之前有点模棱两可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:54:59.337

有几种方法可以做到这一点。

如果你总是要实例化 Foo，你可以在`__init__`类的方法中设置 bar。

```
class Foo(unittest.TestCase):
    def __init__(self, bar, *args, **kwargs):
        super(Foo, self).__init__(*args, **kwargs)
        self.bar = bar
    def runTest(self):
        print self.bar

f = Foo("some string") 
```

我之前没有`load_tests`直接使用过该模式——我通常只依赖鼻子的自动测试发现，但所有这些都适用于您的设置。如果你以后想使用`TestSuite`s 和`unittest`/`nose`的测试自动发现，并且想使用类，你可以使用类工厂：

```
def make_foo_case(the_bar):
    class Foo(unittest.TestCase):
        bar = the_bar
        def runTest(self):
            print self.bar
    return Foo

f = (make_testcase("some string"))() 
```

或用于`type`子类化 foo 并在成员中设置元素，（与前一个基本相同）例如：

```
class Foo2(object):
    def runTest(self):
        print self.bar

f = (type("Tester2", (Foo2,unittest.TestCase), {"bar":"some string"}))() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:07:05.623

显然我误会了`load_tests()`。根据 中的 Python 代码`/usr/lib/python2.7/unittest/loader.py`，测试是从模块中正常加载的。然后，如果`load_tests()`存在，它也会被调用。

```
def loadTestsFromModule(self, module, use_load_tests=True):
    """Return a suite of all tests cases contained in the given module"""
    tests = []
    for name in dir(module):
        obj = getattr(module, name)
        if isinstance(obj, type) and issubclass(obj, case.TestCase):
            tests.append(self.loadTestsFromTestCase(obj))

    load_tests = getattr(module, 'load_tests', None)
    tests = self.suiteClass(tests)
    if use_load_tests and load_tests is not None:
        try:
            return load_tests(self, tests, None)
        except Exception, e:
            return _make_failed_load_tests(module.__name__, e,
                                           self.suiteClass)
    return tests 
```

所以我想我的解决方案是接受创建的额外测试用例，检查它，然后通过它。非常感谢杰夫试图帮助我。

# android - 如何从另一个活动（创建它的活动）中停止使用（处理程序和 postAtTime）创建的循环？

> ID：12082468
> 
> 赞同：0
> 
> 时间：2012-08-22T22:50:17.227
> 
> 标签：android

我有一个方法可以让我使用（处理程序）每隔 x 秒使用 postAtTime 连续循环，除了这个方法被放置在活动 A 中，当进入活动 B 然后返回到 A 以按下停止按钮进行 finsih 循环，我无法阻止它，`mHandler.removeCallbacks (..)`我在这里附上了方法

按钮开始：

```
mHandler.postAtTime(mUpdateTimeTask, 100); 
```

环形：

```
private  Runnable mUpdateTimeTask = new Runnable() {
     public void run() {
          Toast.makeText(getBaseContext(),"ok!",Toast.LENGTH_SHORT).show();
          mHandler.postDelayed(this, 1000);
      }
   }; 
```

按钮停止：

```
mHandler.removeCallbacks(mUpdateTimeTask); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:28:55.610

如果您试图从创建它的 Activity 中阻止它，这应该可以工作。如果不是，则有其他问题。

你在哪里分配 mHandler？如果它在 onResume 中，那么您正在尝试从不同的 Handler 实例中删除回调。

您是从 Activity B 返回到 Activity A 的同一个实例，还是一个新实例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:55:05.173

```
// In your handler
SharedPreferences sp = context.getPreferences();
boolean loop = sp.getBoolean("should_loop_ad_infinatium", false);
if (loop) {
    Toast.makeText(context, "ok", Toast.LENGTH_SHORT).show();
    mHandler.postDelayed(this, 1000);
} 
```

从另一个活动

```
SharedPreferences sp = context.getPreferences();
Editor e = sp.edit();
e.putBoolean("should_loop_ad_infinatium", false);
e.commit(); 
```

# php - php imagerotate() 会破坏 png 上的 alpha？

> ID：12082472
> 
> 赞同：3
> 
> 时间：2012-08-22T22:51:27.693
> 
> 标签：php, gd, php-gd

我一直在抨击一些简单的事情。

```
// ....all prev code is fine.... 
$pasteboard =imagecreatetruecolor($imgs['bg']["width"],$imgs['bg']["height"]);
imagealphablending($pasteboard, false);
imagecopyresampled($pasteboard, $imgs['bg']["img"],0,0,0,0,$imgs['bg']["width"],$imgs['bg']["width"],imagesx($imgs['bg']["img"]),imagesy($imgs['bg']["img"]));
imagecopyresampled($pasteboard, $imgs['photo']["img"],20,20,0,0,$imgs['photo']["width"],$imgs['photo']["width"],imagesx($imgs['photo']["img"]),imagesy($imgs['photo']["img"]));
imagesavealpha($pasteboard,true);
//send it out
$out = $pasteboard;

header('Content-type: image/png');
imagepng($out);
//then garbage collection 
```

给了我这个：

![在此处输入图像描述](../Images/2bc6f650bdfe5a0114db8d760c3eb6c1.png)

万岁！

完美的 alpha png 合成...

现在我想旋转它，而不是 $out=$pasteboard 我这样做：

```
imagesavealpha($pasteboard,true);
//rotate it
$out = imagerotate($pasteboard,5,imagecolorexactalpha($pasteboard,255,255,255,50),0);

header('Content-type: image/png');
imagepng($out); 
```

可悲的是，这给了我这个：

![在此处输入图像描述](../Images/e830ee63d5a3ee9b9d8836101087fff6.png)

嘘！

我尝试将颜色设置为：

```
imagerotate($pasteboard,5,0x00000000,0); 
```

还有最后一个attr，例如：

```
imagerotate($pasteboard,5,0x00000000,1); 
```

新的空图像采样等...

没有骰子....

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T02:46:58.687

我回答我的问题仅仅是因为我已经尝试了 10-15 条我在网上看到的所有建议，所有这些建议都提供了“几乎”正确的解决方案，但没有确切的解决方案，而且我已经看到这个问题现在发布了几个地方，并且希望如果将来有人访问此页面，最好将解决方案显示为直接答案。

非常感谢@cristobal 的帮助和努力，如果我能再投票给你，我会的！

诀窍似乎是：

```
//rotate it
$pasteboard = imagerotate($pasteboard,5,0XFFFFFF00,0); //<-- here must be RRGGBBAA, also last attr set to 0
imagesavealpha($pasteboard, true); // <-- then to save it... dont ask me why..
//send it out
header('Content-type: image/png');
imagepng($pasteboard); 
```

产生这个（即使你看不到白页，它也有一个完美的 alpha）：

![在此处输入图像描述](../Images/7154abab21c2b6d26c951a86e45ae4fe.png)

真的不是我生命中最有趣的 5 小时......希望它会阻止其他人经历同样的痛苦......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T00:04:59.773

使用上面相同的代码并在操作中为第三个参数使用蓝色`imagerotate`，它将用于在旋转后填充未覆盖的区域，即：

```
imagerotate($pasteboard, 5, 255); 
```

我们得到以下图像

![使用蓝色作为第三个参数旋转](../Images/6beb06721cc638f423e96cc47bde5595.png)

我们看到蓝色区域是它填充的未覆盖区域，而黑色是图像的边界阴影，GD 似乎无法很好地处理旋转中使用的插值。

使用 imagemagick 的转换来旋转相同的图像。命令ie`$> convert -rotate 5 image.png image_rotated.png`结果如下图

![使用 imagemagick 旋转](../Images/d0aea576e29809421384d23d2c00afcd.png)

Clearly GD does not handle alpha colors well when rotating.

If you have access to use the `convert` commmand using `exec` or `process`, you should pipe those image operation to imagemagick instead. GD is a simple image library which has not been updated much the latest years. Otherwise try Imagemagick, Cairo or Gmagick which there are pecl plugins for too [http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php).

Last resort somebody made a function that which uses GD [http://www.exorithm.com/algorithm/view/rotate_image_alpha](http://www.exorithm.com/algorithm/view/rotate_image_alpha) for what you are looking after but the result is not pretty since its a simple linear interpolation:

![线性插值](../Images/91bde8df0cdbe8ee67ba4da74769ca4a.png)

taken from [How to rotate an image in GD Image Library while keeping transparency?](https://stackoverflow.com/questions/4099207/how-to-rotate-an-image-in-gd-image-library-while-keeping-transparency). Perhaps if you convert the linear interpolation function to a Bicubic or Quad it will look better.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T09:07:46.763

请注意，这些答案对我不起作用，但确实如此。

```
$destimg = imagecreatefromjpeg("image.png");
$rotatedImage = imagerotate($destimg, 200, 0);
imagesavealpha($rotatedImage, true);
imagepng($rotatedImage,"rotated.png"); 
```

# mysql - 按比率计数，然后按 MSQL 分组

> ID：12082475
> 
> 赞同：0
> 
> 时间：2012-08-22T22:51:56.983
> 
> 标签：mysql

我有一张像

```
ID Name

1 ABC
1 DEF
1 VVV
1 BBB
1 BCD
2 ZZZ
2 BAA
3 AAA
3 BBB
3 BBC 
```

我想通过 ID 获取以 A 开头的所有名称与以 B 组开头的所有名称的比率。

所以输出应该是

```
ID Ratio

1  0.5
2  0
3  0.33 
```

.

```
SELECT (ID, (SELECT COUNT(*) FROM `table` WHERE name LIKE 'A%') /
            (SELECT COUNT(*) FROM `table` WHERE name LIKE 'B%')) AS `ratio` from table Group by ID 
```

没有给我正确的答案。它考虑了所有 ID 中 A/B 的总比率，并为所有 ID 写入该数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:16:04.620

我会尝试：

```
SELECT ID, CASE WHEN B = 0 THEN 0 ELSE A/B END AS Ratio FROM
    ( SELECT ID,
         SUM(CASE WHEN Name LIKE 'A%' THEN 1 ELSE 0 END) AS A,
         SUM(CASE WHEN Name LIKE 'B%' THEN 1 ELSE 0 END) AS B
      FROM my_table GROUP BY ID ) AS grouped; 
```

内部 SELECT 获取组 ID，并且对于每个 ID，以 A 开头的项目数和以 B 开头的项目数。

外部 SELECT （如果您确定总会有至少一个 B 行，则可以省略它）在尝试计算该比率之前检查该比率是否有意义。

要不然：

```
SELECT ID, COALESCE(SUM(CASE WHEN Name LIKE 'A%' THEN 1 ELSE 0 END)
        /  SUM(CASE WHEN Name LIKE 'B%' THEN 1 ELSE 0 END), 0)
FROM my_table GROUP BY ID; 
```

这利用了这样一个事实，即如果 B 行数为零，则除法将产生 NULL。COALESCE 将 NULL 转换为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:18:59.877

这将做到：

```
SELECT 
    id, 
    SUM(IF(name LIKE 'A%',1,0))/SUM(IF(name like 'B%',1,0)) 
FROM `table` 
GROUP BY ID 
```

# c# - 提交后 YUI 日历未更新

> ID：12082477
> 
> 赞同：0
> 
> 时间：2012-08-22T22:52:00.780
> 
> 标签：c#, asp.net, calendar, postback, yui

我有一个包含 YUI 日历的 ASP.NET (c#) 网页。我可以选择一个日期并单击我的书本按钮，该按钮通过后面的 c# 代码将该日期插入数据库。但是，即使数据库进行了回发，日历也不会突出显示已预订的那一天。但是，当我在浏览器中刷新整个页面时，日期显示为已预订（我已设置日历以突出显示已预订的日期）。它通过从我正在使用的数据库表中选择日期来做到这一点。

有没有一种简单的方法可以让日历在图书按钮的回发完成后立即突出显示这一天？如果这篇文章中没有足够的细节，请致歉！

谢谢

---编辑---这个问题的答案帮助我解决了这个问题：[ASP.NET C#，需要按两次按钮才能使某些事情发生](https://stackoverflow.com/questions/297217/asp-net-c-need-to-press-a-button-twice-to-make-something-happen)

基本上，我从我的数据库中选择了要从 page_load 中突出显示的日期的代码，并创建了另一个私有 void 并将代码粘贴在那里。然后我在每个按钮 onclick 事件的代码中调用它，并在我的 page_load 中添加了这个：

```
if (!Page.IsPostBack)
    {
        PrivateVoidName();
    } 
```

这解决了这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:07:30.727

您必须查看 YUI 文档，但是是的，您可以这样做，您只需编写一些 JavaScript 即可在发布后实时操作日历。您必须考虑是否要乐观地执行此操作，在验证它是否保存在数据库中之前，或者等到您确认它已保存，然后编辑 javascript 对象。YUI日历可能有一个API，例如addEvent之类的，如果日历已经加载，您必须主动调用它。即使没有这样的调用，您也可以编辑 js 并使之成为可能。如果它太难，请尝试使用 FullCalendar - 这太棒了。

# html - 识别表单的主要提交按钮

> ID：12082481
> 
> 赞同：0
> 
> 时间：2012-08-22T22:52:14.727
> 
> 标签：html, forms, submit, form-submit

我有一个包含几个文本框和两个提交按钮的表单。当一个文本框被选中并按下`Enter`时，第一个提交按钮被触发。但是，这不是当时应该按下的按钮。我怎样才能使它在`Enter`按下按钮时，点击第二个提交按钮（或至少最后一次出现的提交按钮）？

我有一个目前使用 JavaScript 的实现，但我希望有一个本机选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:57:43.307

获得比 javascript 更原生的东西是相当困难的。你会在这里需要它。顺便说一句，您注意到的行为是预期的行为。html 中的第一个提交按钮将与您的标题一起发送。

我想如果您真的不想使用 js，您可以先放置另一个按钮，然后使用 css 将它们正确定位在页面本身上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:47:56.983

如果您使用的是 asp .net，那么您可以在按钮上使用“UseSubmitBehavior”属性。请参见下面的代码。

```
<asp:TextBox runat="server" ID="txt1"></asp:TextBox> <br/>
    <asp:Button runat="server" ID="btn1" UseSubmitBehavior="False" Text="1" OnClick="test1"/> <br/>
    <asp:Button runat="server" ID="btn2" UseSubmitBehavior="True" Text="2" OnClick="test2"/> 
```

# javascript - jquery 使用引荐来源网址滚动到产品

> ID：12082482
> 
> 赞同：0
> 
> 时间：2012-08-22T22:52:34.767
> 
> 标签：javascript, jquery

我编写了以下 javascript 来检测引荐来源网址是否与我的产品表中的网址匹配。然后我们向下滚动页面到相关产品。实际的滚动部分正常工作，问题出在 if 语句中。

```
$("tr td:first").each(function(){
    var product_href = $(this).find("td a:eq(0)");
    if(product_href.length && document.referrer.indexOf(product_href.attr("href")) == 1){
        $(this).scrollTo({
            easing: 'easeOutQuad',
            offsetTop: -40,
            target: $(this)
        }).click(); 
    }
}); 
```

当我`alert(document.referrer + ' | ' + product_href.attr("href"));`在 IF 语句上方添加时，我得到

```
http://localhost/product/product-uri | /product/product-uri 
```

滚动到插件

```
$.fn.scrollTo = function(options) {
    var defaults = {
        target : false, 
        speed  : 400,
        easing: 'swing',
        offsetTop: -20,
        offsetLeft: 0
    };
    var opts = $.extend({}, defaults, options);
    if(this.length > 0){
        var elem = this;
        // Element instance specific actions
        $(elem).each(function() {
            var dis = $(this);
            var settings = $.meta ? $.extend({}, opts, dis.data()) : opts;
            var url = $(dis).attr("href");
            var anchor = '';
            if(url && url.indexOf("#") != -1 && url.indexOf("#") == 0) {
                anchor = $(this.hash);
            } else
                anchor = $(settings.target);

            $(dis).bind('click', function(){
                $('html, body').animate({
                    scrollTop: (anchor.offset().top + parseInt(settings.offsetTop,10)),
                    scrollLeft: (anchor.offset().left + parseInt(settings.offsetLeft,10))
                }, settings.speed, settings.easing);
            });
        });
    }
    return this;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:54:23.557

尝试改变：

```
document.referrer.indexOf(product_href.attr("href")) == 1) 
```

至：

```
document.referrer.indexOf(product_href.attr("href")) !== -1) 
```

您想测试产品是否存在于引荐来源网址字符串中的任何位置，而不是产品是否存在并从引荐来源网址字符串的第二个字符（基于 0 的索引）开始。

# android - TimePickerDialog 取消按钮不删除数据

> ID：12082495
> 
> 赞同：0
> 
> 时间：2012-08-22T22:53:41.437
> 
> 标签：android, timepicker

我知道这已被多次询问，但我找不到适合我的问题的答案。

所以我有一个活动，它有一个按钮，其文本是当前时间（访问活动的时间）。我可以单击按钮以显示一个 TimePickerDialog，我可以在其中更改时间，单击“设置”按钮，按钮将更新为新时间。到目前为止，一切都很好，很基础。

我的问题是，如果我启动 TimePicker，更改时间，单击取消按钮，然后再次启动 TimePicker，显示的时间是我取消的时间，而不是启动它的按钮的原始时间。如果我取消 TimePicker，我希望它忘记任何以前的数据。

这是我的代码：

```
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
        recordTime = new TimePickerDialog(this,mTimeSetListener, mHour, mMinute, true);
        recordTime.setOnCancelListener(new OnCancelListener(){

            @Override
            public void onCancel(DialogInterface arg0) {

final Calendar c = Calendar.getInstance();
                mHour = c.get(Calendar.HOUR_OF_DAY);
                mMinute = c.get(Calendar.MINUTE);
                recordTime.dismiss();
            }
        });

        recordTime.setOnDismissListener(new OnDismissListener(){
            @Override
            public void onDismiss(DialogInterface arg0) {
                recordTime.cancel();
                recordTime.dismiss();
            }

        });
        return recordTime;

    }
    return null;
}

// the callback received when the user sets the time in the dialog
    private TimePickerDialog.OnTimeSetListener mTimeSetListener =
        new TimePickerDialog.OnTimeSetListener() {
            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                mHour = hourOfDay;
                mMinute = minute;
                updateTimeDisplay();
            }
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:11:00.397

> 如果我取消 TimePicker，我希望它忘记任何以前的数据。

每次打开 Dialog 时`showDialog()`，`onPrepareDialog()`只需在此处重置时间。如果用户单击`Set`新时间保存在`mHour`和中`mMinute`，如果对话框因任何原因被取消，这将恢复原始数据：

```
@Override
protected void onPrepareDialog(int id, Dialog dialog, Bundle args) {
    switch (id) {
    case TIME_DIALOG_ID:
        recordTime.updateTime(mHour, mMinute);
    }
} 
```

您也可以在 OnCancelListener 中轻松调用它：

```
recordTime.setOnCancelListener(new OnCancelListener() {
    @Override
    public void onCancel(DialogInterface dialog) {
        recordTime.updateTime(mHour, mMinute);
    }
}); 
```

此外，您原来的 OnCancel 和 OnDismiss 侦听器似乎是多余的。你想对他们做什么？

您应该知道，`onDismiss()`如果用户单击 、 或使用后退按钮，则会调用`Set`它`Cancel`。如果用户单击`Set`您不想调用的`onCancel()`方法是`onDismiss()`. 不要把`onCancel()`和`onDismiss()`当作同一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:56:49.667

你永远不会重置你的日期。如果您在`onCancel`方法中重置日期/时间，一切都应该正常。

# node.js - 有没有一种简单的方法来获取嵌套的子引用？

> ID：12082496
> 
> 赞同：2
> 
> 时间：2012-08-22T22:53:41.520
> 
> 标签：node.js, mongodb, mongoose

我有这样的模式（简化）

```
var Language = new Schema({
    name: String
});
var PartOfSpeech = new Schema({
    name: String,
    language: { type: ObjectId, ref: "Language" }
});
var Attribute = new Schema({
    name: String,
    partOfSpeech: { type: ObjectId, ref: "PartOfSpeech" }
}); 
```

是否有一种简单的方法来查询 MongoDB，例如给定`_id`一种语言，它返回一个结果集，其中包含`PartOfSpeech`引用该语言的所有条目，以及`Attribute`引用每个词性的所有条目？

结果集如下所示：

```
[
   {
     name: "Noun",
     attributes: [
       { name: "Plural" },
       { name: "Possessive" }
     ]
   },
   {
     name: "Verb",
     attributes: [
       { name: "Past" },
       { name: "Future" }
     ]
   }
] 
```

在 Mongoose 中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T22:46:05.563

像这样的东西

```
PartOfSpeech.find({ language: langId }, function (err, parts) {
  if (err) return done(err);

  var pending = parts.length;
  if (0 === pending) return done(null, parts);

  parts.forEach(function (part) {
    Attr.find({ partOfSpeech: part }, function (err, attributes) {
      if (err) return done(err, parts);
      part.attributes = attributes;
      if (--pending) return;
      done(null, parts)
    })
  });
}) 
```

# javascript - IE8 中的 slideDown/slideUp 与子容器中的隐藏元素

> ID：12082497
> 
> 赞同：0
> 
> 时间：2012-08-22T22:53:45.580
> 
> 标签：javascript, height, hidden, offset, slidedown

所以我有一个带有不同级别下拉菜单的侧边菜单。每个级别的容器设置为 display:none; 然后javascript在单击父框时向上或向下滑动这些容器。

当我打开每个块时，它不会展开父 div，并且菜单会在页脚上向下滑动。现在我知道你在想什么，但我**已经**尝试将父元素扩展相同的高度，我已经在我网站的其他区域成功使用了它。

问题是，当我计算父 div 的高度时，即使它们是 display:none; ，它也会将内部每个 div 的高度加在一起。这意味着当我在侧边菜单中展开一个部分时，页脚会下降到超过 10,000 像素！（使用父高度 = 父高度 + 展开部分高度）

我已经尝试获取页脚菜单的 offset.top 并且仍然返回超过 10,000 像素。在其他浏览器中发出警报只会返回我期望的结果，而且我对 javascript 并不十分聪明，无法确切知道为什么会发生这种情况。有什么想法吗？

示例代码 -

```
<div class="content">
    <div class="level1">
        <div class="level2">
            <div class="level3">
                <div class="level4">
                    SOME PRODUCTS....
                </div>
            </div>
            <div class="level3">
                SOME PRODUCTS....
            </div>
        </div>
        <div class="level2">
            <div class="level3">
                SOME PRODUCTS....
            </div>
            <div class="level3">
                SOME PRODUCTS....
            </div>
        </div>
    </div>
</div> 
```

然而，实际列表中大约有 850 种产品。单击每个 div 会扩展其内容，一直到产品级别。有些是 3 深，有些是 5 或 6 深。所有 div 都设置为 display:none; 最初，除非当前正在查看产品，否则父 div 会自动打开。似乎 IE8 会读取每个 div 的高度，即使它们设置为 display:none;？

# mysql - 当某些字段超过字段长度时保存到mysql数据库

> ID：12082501
> 
> 赞同：0
> 
> 时间：2012-08-22T22:54:18.667
> 
> 标签：mysql, hibernate, truncation

我在 mysql 上使用休眠来保存某些字段可能超过长度限制的数据：

```
引起：com.mysql.jdbc.MysqlDataTruncation：数据截断：第 1 行的“电话”列数据太长

```

我无法更改字段长度，该字段是 varchar(45)。有没有一种简单的方法可以将记录保存到数据库中？我不在乎保存的字段是否被截断或根本没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:40:37.137

我只是在字符串字段的设置器中截断，然后对象的行为与创建或保存并从数据库加载时相同。

# objective-c - 拖动和调整 UIImage (OSX)

> ID：12082503
> 
> 赞同：-5
> 
> 时间：2012-08-22T22:54:24.563
> 
> 标签：objective-c, xcode, macos, resize, drag

我对objective-c很陌生，但我想制作一些执行以下操作的应用程序：

1 它有对象库（形状、文本字段等），我保留在我的应用程序的面板上。- 任务是将一个形状拖到主窗体并将其放置在我喜欢的窗体上的某个位置：就像在界面构建器中一样。

2 调整形状（实际上是一个 UIIMage）。

与界面生成器非常相似。

我将非常感谢任何可以帮助我解决此任务的示例代码。

编辑：完全一样，但这里存在 iOS： [https ://github.com/spoletto/SPUserResizableView](https://github.com/spoletto/SPUserResizableView)

正如我在代码中看到的那样，这不是一件容易的事，所以这个问题被认为是已回答的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:00:25.333

您可以先检查一下：

[https://developer.apple.com/library/mac/#samplecode/DragItemAround/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/DragItemAround/Introduction/Intro.html)

# java - JFXPanel 拖放

> ID：12082506
> 
> 赞同：0
> 
> 时间：2012-08-22T22:54:51.730
> 
> 标签：java, swing, javafx-2

我有一个带有两个组件的 JPanel。一个是 JFXPanel 和 JLabel，当我在单独的窗口中从 JTree 中拖动项目时，我得到 NPE 异常

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javafx.embed.swing.SwingDnD$2.dragDropEnd(SwingDnD.java:119)
    at java.awt.dnd.DragSource.processDragDropEnd(DragSource.java:769)
    at java.awt.dnd.DragSourceContext.dragDropEnd(DragSourceContext.java:437)
    at sun.awt.dnd.SunDragSourceContextPeer$EventDispatcher.run(SunDragSourceContextPeer.java:491)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:711)
    at java.awt.EventQueue.access$000(EventQueue.java:104)
    at java.awt.EventQueue$3.run(EventQueue.java:672)
    at java.awt.EventQueue$3.run(EventQueue.java:670)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:681)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

如果我删除 JFXPanel 我没有得到任何异常，当 JFXPanel 存在时，当我将元素拖放到 JLabel 或 JFXPanel 时会发生异常。

我通过实现我的 TransferHandler 进行拖放，并将其安装到 JLalbel 中，调用 setTransferHandler。

我尝试在 JFXPanel 中设置一个始终从 canImport 返回 false 的传输处理程序，但这没有任何区别。

有什么想法可以解决或解决这个问题吗？

使用：Linux 机器上的 Java(TM) SE 运行时环境（内部版本 1.7.0_06-b24）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:39:29.003

有一个 Jira 问题可以跟踪该问题：http: [//javafx-jira.kenai.com/browse/RT-21836](http://javafx-jira.kenai.com/browse/RT-21836)

Currently it marked as 2.2.2 candidate so you may expect a fix in JavaFX 2.2.2 update. Also you are welcome to vote for it once Jira will be back from maintenance.

# php - PHP - 最轻量级的 psr-0 兼容自动加载器

> ID：12082507
> 
> 赞同：19
> 
> 时间：2012-08-22T22:54:56.660
> 
> 标签：php, autoload, psr-0

我有一个需要自动加载器的小型应用程序。我可以很容易地使用 symfony2 类加载器，但它似乎有点矫枉过正。

那里有稳定的极其轻量级的 psr-0 自动加载器吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-12T11:28:51.203

您要求非常轻巧，让我们这样做；）

Timothy Boronczyk 写了一个不错的最小 SPL 自动加载器：http: [//zaemis.blogspot.fr/2012/05/writing-minimal-psr-0-autoloader.html](http://zaemis.blogspot.fr/2012/05/writing-minimal-psr-0-autoloader.html)

我把代码压缩成这样：

```
function autoload1( $class ) {
    preg_match('/^(.+)?([^\\\\]+)$/U', ltrim( $class, '\\' ), $match ) );
    require str_replace( '\\', '/', $match[ 1 ] )
        . str_replace( [ '\\', '_' ], '/', $match[ 2 ] )
        . '.php';
} 
```

然后将此 [autoload3] 的（缩小版本）与[简短的@Alix Axel 代码](https://stackoverflow.com/a/14416954/1154106)[autoload4] 进行比较：

```
function autoload3($c){preg_match('/^(.+)?([^\\\\]+)$/U',ltrim($c,'\\'),$m);require str_replace('\\','/',$m[1]).str_replace(['\\','_'],'/',$m[2]).'.php';}
function autoload4($c){require (($n=strrpos($c=ltrim($c,'\\'),'\\'))!==false?str_replace('\\','/',substr($c,0,++$n)):null).str_replace('_','/',substr($c,$n)).'.php';} 
```

autoload3 是最短的！

让我们使用稳定且极其轻量级（175b！）的自动加载器文件：

```
<?php spl_autoload_register(function ($c){preg_match('/^(.+)?([^\\\\]+)$/U',ltrim($c,'\\'),$m);require str_replace('\\','/',$m[1]).str_replace(['\\','_'],'/',$m[2]).'.php';}); 
```

也许我疯了，但你要求极端，不是吗？

**编辑：**感谢 Alix Axel，我缩短了代码（只有 100b！）并使用 include 而不是 require，以防您有旧库的各种自动加载策略（然后是 spl 自动加载堆栈中的各种自动加载器......）。

```
<?php spl_autoload_register(function($c){@include preg_replace('#\\\|_(?!.+\\\)#','/',$c).'.php';}); 
```

如果你想让它更短/更好，请使用这个[要点](https://gist.github.com/adriengibrat/4761717)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-11T09:38:59.283

[PSR-0 规范文档](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md#splclassloader-implementation)有一个示例兼容的自动加载器功能，它已经很短了：

```
function autoload($className)
{
    $className = ltrim($className, '\\');
    $fileName  = '';
    $namespace = '';
    if ($lastNsPos = strripos($className, '\\')) {
        $namespace = substr($className, 0, $lastNsPos);
        $className = substr($className, $lastNsPos + 1);
        $fileName  = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
    }
    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

    require $fileName;
} 
```

它的用法非常简单：

```
spl_autoload_register('autoload'); 
```

它的缺点是，您需要配置它与`include_path`指令一起使用的基本目录。为了支持依赖于 SPL 语义的混合 PSR-0 自动加载器，以下支持包括路径和 spl 自动加载扩展：

```
$spl_autoload_register_psr0 = function ($extensions = null) 
{
    $callback = function ($className, $extensions = null) 
    {
        if (!preg_match('~^[a-z0-9\\_]{2,}$~i', $className)) {
            return;
        }
        null !== $extensions || $extensions = spl_autoload_extensions();
        $extensions = array_map('trim', explode(',', $extensions));
        $dirs = array_map('realpath', explode(PATH_SEPARATOR, get_include_path()));

        $classStub = strtr($className, array('_' => '/', '\\' => '/'));

        foreach ($dirs as $dir) {
            foreach ($extensions as $extension) {
                $file = sprintf('%s/%s%s', $dir, $classStub, $extension);
                if (!is_readable($file)) {
                    continue;
                }
                include $file;
                return;
            }
        }
    };

    return spl_autoload_register($callback);
}; 
```

[Symfony2 类加载器组件](http://symfony.com/doc/2.0/components/class_loader.html)的好处是允许在此处进行更多配置。您可以通过 Pear 或 Composer（[Packagist 上的 symfony/class-loader](https://packagist.org/packages/symfony/class-loader)）轻松安装它。它是一个独立的组件，被许多人使用，并且经过很好的测试和支持。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-22T23:01:48.807

[SplClassLoader](https://gist.github.com/221634)似乎是一个正确的选择。这是[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md#splclassloader-implementation)本身提出的实现。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-19T17:35:47.263

与[@hakre 提供的答案完全相同](https://stackoverflow.com/a/12836587/89771)，只是更短：

```
function autoload($class) {
  $path = null;

  if (($namespace = strrpos($class = ltrim($class, '\\'), '\\')) !== false) {
    $path .= strtr(substr($class, 0, ++$namespace), '\\', '/');
  }

  require($path . strtr(substr($class, $namespace), '_', '/') . '.php');
} 
```

您还可以通过更改`$path = null;`为另一个值来设置基本目录，或者只是这样做：

```
$paths = array
(
    __DIR__ . '/vendor/',
    __DIR__ . '/vendor/phunction/phunction.php',
);

foreach ($paths as $path)
{
    if (is_dir($path) === true)
    {
        spl_autoload_register(function ($class) use ($path)
        {
            if (($namespace = strrpos($class = ltrim($class, '\\'), '\\')) !== false)
            {
                $path .= strtr(substr($class, 0, ++$namespace), '\\', '/');
            }

            require($path . strtr(substr($class, $namespace), '_', '/') . '.php');
        });
    }

    else if (is_file($path) === true)
    {
        require($path);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T16:01:58.453

[教义类加载器](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/class-loading.html)是另一个不错的选择。您可以使用[composer轻松安装它](https://packagist.org/packages/doctrine/common)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T06:05:13.690

这不是问题的直接答案，但我发现上述答案在独立的 PHP 脚本上效果很好，但在某些框架（如 Joomla）中使用时会导致问题。

对于使用 Joomla 的任何人，事实证明框架中已经内置了兼容的自动加载器，因此您不需要使用上述功能。在这种情况下，只需调用 JLoader::registerNamespace().... 例如：

```
JLoader::registerNamespace('Solarium', JPATH_LIBRARIES . DS . 'solarium-3.2.0' . DS . 'library'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-01T01:17:19.910

```
function autoload($fullClassName) {
    $name_elems = explode('\\', $fullClassName);
    require __DIR__.DIRECTORY_SEPARATOR.implode(DIRECTORY_SEPARATOR, $name_elems).'.php';
} 
```

这甚至支持以下内容： $transformerContstraint = new \Recurr\Transformer\Constraint\AfterConstraint(new DateTime());

只需将其放入 /vendor/Recurr/Transformer/Constraint/AfterConstraint.php

# php - JSON在一个地方工作，但不在另一个地方

> ID：12082508
> 
> 赞同：0
> 
> 时间：2012-08-22T22:54:59.900
> 
> 标签：php, jquery, json

我正在重新设计我的网站以使其基于 WordPress，在此过程中，我需要导入一些 PHP/jQuery。我发现它在[原始页面上运行良好，但在](http://www.guestvibe.com)[新](http://www.guestvibe.com/wordpress)页面上却不行。

以下是 JSON 转储的结果：

*   [旧](http://www.guestvibe.com/eventinfo.php)的 - 应该是空的，因为没有数据
*   [新](http://www.guestvibe.com/wordpress/wp-content/themes/guestvibe/eventinfo.php)- 不喜欢使用 $_POST['club'] 导入

两种情况下的代码都是：

```
<script type="text/javascript">
    $(document).ready(function() {
        $.ajax({
            type: "post",
            url: "eventinfo.php",
            data:  $('#club').serialize(),
            success: function(data) {
                $('#right_inside').html('<h2>' + $('#club').val() + '<span style="font-size: 14px"> (' + data[0].day + ')</h2><p>Entry: ' + data[0].entry + '</p><p>Queue jump: ' + data[0].queuejump + '</p><p>Guestlist closes at ' + data[0].closing + '</p>');
                },
            dataType: "json"
        });
    });

    $('#club').change(function(event) {
        $.ajax({
            type: "post",
            url: "eventinfo.php",
            data:  $(this).serialize(),
            success: function(data) {
                $('#right_inside').hide().html('<h2>' + $('#club').val() + '<span style="font-size: 14px"> (' + data[0].day + ')</h2><p>Entry: ' + data[0].entry + '</p><p>Queue jump: ' + data[0].queuejump + '</p><p>Guestlist closes at ' + data[0].closing + '</p>').fadeIn('500');
                },
            dataType: "json"
        });

    });
</script> 
```

我的 eventinfo.php 是：

```
<?php

header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

include('guestvibe_functions.php');
connect();

$night = $_POST['club'];
$night = mysql_real_escape_string($night);

$query = "SELECT * FROM nights WHERE name = '" .$night. "'";

    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
        $items[] = array("entry"=>$row['entry'], "day"=>getLongDateString($row['day']), "queuejump"=>$row['queue jump'], "closing"=>$row['closing']);
        }
    } 

    mysql_close(); 
    // convert into JSON format and print

    echo json_encode($items);
?> 
```

已经很晚了，所以我希望我已经解释清楚了。有什么想法有什么问题吗？

**编辑**

我应该补充一点，两者都在同一个服务器/托管计划上。新的只是一个目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:00:34.210

[请参阅此答案以获取线索](https://stackoverflow.com/questions/4465728/php-error-notice-undefined-index)

我认为您可能在新的 PHP 服务器上有更新版本的 PHP 或不同的服务器设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:04:48.017

我看到了两种可能性。

第一个是在新站点上，AJAX 不会填充 club= 变量，而在旧站点中它是。然后您必须发现为什么 serialize() 不包含名为“club”的变量。

第二个是即使在旧站点中也不一定会填充 club= 变量，而您只是没有收到通知警告。

在这种情况下，修改代码

```
$night = $_POST['club']; 
```

在

```
$night = isset($_POST['club']) ? $_POST['club'] : ''; 
```

应该解决问题。

**更新**

我检查了该网站，但`eventinfo`我收到的 URL 与您引用的不同。我的 Firefox 得到的是：

```
 http://www.guestvibe.com/wordpress/eventinfo.php 
```

...导致 404 错误。

# erlang - 超出帧最大尺寸

> ID：12082516
> 
> 赞同：1
> 
> 时间：2012-08-22T22:56:49.580
> 
> 标签：erlang, rabbitmq

在 的源代码中`rabbit.app`， frame 有 max size `{frame_max,131072}`。如果邮件的大小超出限制，是会拒绝发送邮件还是将邮件拆分后再发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:56:43.640

`frames`如果消息大于`frame_max`变量，您的消息将被拆分为多个，请参阅[AMQP 规范](http://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf)中的第 2.3.5.2 节。在接收方，它会自动重新组装，并向您显示消息。

实际使用的帧大小可能与配置的不同，`frame_max`因为它是与客户端协商的。我认为帧大小可配置主要用于性能调整，请参阅[RabbitMQ 配置文档中的注释](http://www.rabbitmq.com/configure.html)

# google-chrome - 默认情况下如何在 Google Chrome 中启用“模拟触摸事件”？

> ID：12082517
> 
> 赞同：2
> 
> 时间：2012-08-22T22:56:53.747
> 
> 标签：google-chrome, touch, dom-events

如何在启动时打开开发工具的情况下启动 Google Chrome？我需要它，因为我想在启动 Chrome 时启用开发工具设置页面中的“模拟触摸事件”。有任何想法吗？是否有用于 Chrome 的 .ini 文件，可以在其中设置标志或其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T13:31:09.913

意识到这有点晚了，但是；

打开开发工具设置菜单时，在“启用”覆盖复选框旁边，还有另一个复选框说“在 DevTools 启动时启用”。

选中此项将在打开 DevTools 窗口时默认启用选定的覆盖。

希望能帮助到你！

# java - 调用没有实际参数但具有显式类型参数的泛型方法时出现编译器错误

> ID：12082519
> 
> 赞同：0
> 
> 时间：2012-08-22T22:56:59.327
> 
> 标签：java, generics, language-design

来自“Java Generic and Collections”一书，第 1.4 节有这个代码片段

```
class Lists {
    public static <T> List<T> toList(T... arr) {
        List<T> list = new ArrayList<T>();
        for (T elt : arr)
            list.add(elt);
        return list;
    }
} 
```

然后是这样的说法：

> 当一个类型参数被传递给一个泛型方法调用时，它出现在左边的尖括号中，就像在方法声明中一样。Java 语法要求类型参数只能出现在使用点分形式的方法调用中。即使 toList 方法定义在调用代码的同一个类中，我们也不能将其缩短如下：
> 
> ```
> List<Integer> ints = <Integer>toList(); // compile-time error 
> ```
> 
> 这是非法的，因为它会混淆解析器。

所以我试图理解为什么会出现编译器时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:23:11.380

> 所以我试图理解为什么会出现编译器时错误。

因为那是[规范](http://docs.oracle.com/javase/specs/)。见[JLS §15.12](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#20448)：

> 方法调用表达式用于调用类或实例方法。
> 
> ```
> *MethodInvocation* :
>        *MethodName* ( *ArgumentList [opt]* )
>       *主要*的。*NonWildTypeArguments [opt]* * Identifier* ( *ArgumentList [opt]* )
>       极好的 。*NonWildTypeArguments [opt]* * Identifier* ( *ArgumentList [opt]* )
>        *ClassName*。极好的 。*NonWildTypeArguments [opt]* * Identifier* ( *ArgumentList [opt] )
>        *TypeName*。*NonWildTypeArguments* *标识符*（ArgumentList [opt]*）
> 
> ```

至于为什么要这样写规范，只有语言设计者才能回答。

# git - 一次将 git 与多个分支一起使用

> ID：12082525
> 
> 赞同：0
> 
> 时间：2012-08-22T22:58:17.803
> 
> 标签：git

git 是否支持不同文件来自不同分支的视图？

这是我的设置——我有一个简单的 git 分支结构，其中 master 用于所有开发并在客户端站点安装。由于客户端设置与我的设置不同，我在不同的分支上有少量文件，称为“my_company_name”。例如，指定主机名的文件将属于此类别。

我想做的是在主分支上工作，但从 my_company_name 获取特定文件。我知道我可以通过以下方式完成同样的事情：

1.  git checkout my_company_name
2.  git 合并原始主机

但是每次推送时我都需要指定“原始主机”，否则文件将转到 my_company_name。如果我反其道而行之：

1.  git结账大师
2.  git merge origin my_company_name

那么我需要在客户端站点安装之前对站点特定的文件进行更改。

git 如何支持这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:05:40.177

您可以使用[repo](http://code.google.com/p/git-repo/)来管理带有几个 git 存储库的工作空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:06:24.623

为此，您应该查看 smudge/clean 脚本而不是分支。请参阅 progit.org/book 中的 git 属性章节。或者只使用普通脚本。

# java - android - 无法自定义 ActionBar

> ID：12082527
> 
> 赞同：1
> 
> 时间：2012-08-22T22:58:51.413
> 
> 标签：java, android, android-actionbar

不知何故，我很难弄清楚一个看似简单的问题。我指定的所有属性，包括`android:text`、`android:textSize`、`android:textColor`、`android:textAppearance`，似乎都对我的 ActionBar 没有任何作用。当我在 ActionBar 上运行我的项目“MainActivity”时仍然是白色的并且默认字体大小。我正在使用 API 级别 16。

这是我的styles.xml：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="android:style/Theme.Holo">
        <item name="android:actionBarStyle">@style/ActionBar</item>
    </style>

    <style name="ActionBar" parent="android:style/Widget.Holo.ActionBar">
        <item name="android:text">This String Is Not Showing Up In ActionBar!</item>
        <item name="android:textColor">@android:color/holo_orange_dark</item>
        <item name="android:textSize">44dp</item>
    </style>
</resources> 
```

和我的 AndroidManifest.xml：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:42:30.720

一些东西：

```
<item name="android:text">This String Is Not Showing Up In ActionBar!</item> 
```

这行不通。~~应使用清单中的活动标签字段或通过访问活动中的操作栏对象来设置操作栏标题。~~

**更新**：被删除的信息部分不准确。事实证明，您*可以*使用 android:title 标记在 styles.xml 中设置操作栏的标题。这是一个更准确的解决方案：

```
 <style name="ActionBar" parent="android:style/Widget.Holo.ActionBar">
    <item name="android:title">This String WILL show up in the ActionBar!</item>
    <item name="android:textColor">@android:color/holo_orange_dark</item>
    <item name="android:textSize">44dp</item>
</style> 
```

**旧答案**：

要更改操作栏标题 ( [titleTextStyle](http://developer.android.com/reference/android/R.attr.html#titleTextStyle) ) 的文本样式，您将需要一个新样式：

```
<style name="Text.ActionBar">
    <item name="android:textColor">@android:color/holo_orange_dark</item>
    <item name="android:textSize">44dp</item>
</style> 
```

并从您的操作栏样式中引用它

```
<style name="ActionBar" parent="android:style/Widget.Holo.ActionBar">
    <item name="android:titleTextStyle">@style/Text.ActionBar</item>        
</style> 
```

有关可以在操作栏中设置主题的样式的更多信息，请查看[R.attr](http://developer.android.com/reference/android/R.attr.html)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T11:42:05.810

我可以用下面的代码做类似的事情。PS - 我使用了 Appcompat，但由于您使用的是 ApI 16，您可以使用当前的 ActionBar 本身。

```
<!-- general styles for the action bar -->
<style name="MyActionBar" parent="@style/Widget.AppCompat.ActionBar">
    <item name="android:titleTextStyle">@style/TitleTextStyle</item>
    <item name="android:background">@drawable/actionbar_background</item>
</style>

<!-- action bar title text -->
<style name="TitleTextStyle"  parent="@style/TextAppearance.AppCompat.Widget.ActionBar.Title">
    <item name="android:textColor">@color/actionbar_text</item>
    <item name="android:textSize">100sp</item>
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppCompatTheme">

    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style> 
```

# xcode - 哪个函数有“pushViewController”的后退按钮？

> ID：12082529
> 
> 赞同：0
> 
> 时间：2012-08-22T22:59:10.683
> 
> 标签：xcode, ipad, uinavigationcontroller, navigation

我想以编程方式使用由“pushViewController”放在叠加层上的视图后退按钮的功能。我已经尝试过“dismissModalViewControllerAnimated”，但它不起作用。

换句话说，我只是想模拟单击后退按钮以返回到推动视图的上一个视图。

# python - 使用 elasticutils 的基本 ES 查询

> ID：12082534
> 
> 赞同：1
> 
> 时间：2012-08-22T22:59:53.573
> 
> 标签：python, elasticsearch, pyes

在制定基本的 elasticutils 搜索查询时需要帮助

我正在尝试测试elasticutils，主要是因为我无法获得#searches 结果/秒的最佳性能。（更多细节：[这里](https://stackoverflow.com/questions/12079117/elastic-search-performance-using-pyes)）

到目前为止，这是我所做的。

```
es=get_es(hosts=['localhost:9200'],timeout=30,default_indexes=['ncbi_taxa_names'],dump_curl=CurlDumper())

es.get_indices()
# [2012-08-22T15:36:10.639102]
curl -XGET
 http://localhost:9200/ncbi_taxa_names/_status
Out[26]: {u'ncbi_taxa_names': {'num_docs': 1316005}}

S().indexes('ncbi_taxa_names').values_dict()
Out[27]: [{u'tax_name': u'Conyza sp.', u'tax_id': u'41553'}, ... 
```

所以我想要做的是制定一个查询，我可以在其中搜索 {“taxa_name”：“cellvibrio”}，然后与 pyes 相比，我可以使用 elasticutils 检索多少搜索结果。

可能与 ES 在本地运行的方式有关，而与 API 无关。

**更新1**

我尝试了以下方法，搜索结果仍然与我从 pyes 得到的结果非常相似。现在我开始怀疑它是否与本地 ES 的运行方式有关。仍然需要帮助解决这个问题。

```
es=get_es(hosts=['localhost:9200'],timeout=30,default_indexes=['ncbi_taxa_names'],dump_curl=CurlDumper())

es.get_indices()
# [2012-08-22T15:36:10.639102]
curl -XGET
 http://localhost:9200/ncbi_taxa_names/_status
Out[26]: {u'ncbi_taxa_names': {'num_docs': 1316005}}

s=S().indexes('ncbi_taxa_names').values_dict()
Out[27]: [{u'tax_name': u'Conyza sp.', u'tax_id': u'41553'}, ...

results = s.query(tax_name='aurantiacus')  # using elasticutils 
```

感谢你的帮助。

谢谢！

# c# - 匹配季节和剧集的正则表达式

> ID：12082536
> 
> 赞同：5
> 
> 时间：2012-08-22T22:59:59.733
> 
> 标签：c#, .net, regex

我正在为自己制作小应用程序，我想找到与模式匹配的字符串，但我找不到正确的正则表达式。

```
Stargate.SG-1.S01E08.iNT.DVDRip.XviD-LOCK.avi 
```

那是我拥有的字符串的示例，我只想知道它是否包含 S[NUMBER]E[NUMBER] 的子字符串，每个数字最长为 2 位。

你能给我一个线索吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T07:12:30.783

## 正则表达式

[这](http://regexr.com?31tqs)是使用命名组的正则表达式：

```
S(?<season>\d{1,2})E(?<episode>\d{1,2}) 
```

## 用法

然后，您可以像这样获得**命名组**（季节和剧集）：

```
string sample = "Stargate.SG-1.S01E08.iNT.DVDRip.XviD-LOCK.avi";
Regex  regex  = new Regex(@"S(?<season>\d{1,2})E(?<episode>\d{1,2})");

Match match = regex.Match(sample);
if (match.Success)
{
    string season  = match.Groups["season"].Value;
    string episode = match.Groups["episode"].Value;
    Console.WriteLine("Season: " + season + ", Episode: " + episode);
}
else
{
    Console.WriteLine("No match!");
} 
```

## 正则表达式的解释

```
S                // match 'S'
(                // start of a capture group
    ?<season>    // name of the capture group: season
    \d{1,2}      // match 1 to 2 digits
)                // end of the capture group
E                // match 'E'
(                // start of a capture group
    ?<episode>   // name of the capture group: episode
    \d{1,2}      // match 1 to 2 digits
)                // end of the capture group 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:05:50.597

这里有一个很棒的在线测试站点：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

使用它，这是您想要的正则表达式：

```
S\d\dE\d\d 
```

除此之外，您还可以做很多花哨的技巧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:08:14.477

看看一些媒体软件，比如 XBMC，它们都有非常强大的电视节目正则表达式过滤器

看[这里](http://wiki.xbmc.org/index.php?title=Adding_videos_to_the_library/Naming_files/TV_shows)，[这里](http://wiki.xbmc.org/index.php?title=Talk%3aUserdata/advancedsettings.xml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T04:49:56.343

我为 S[NUMBER1]E[NUMBER2] 输入的正则表达式是

```
S(\d\d?)E(\d\d?)       // (\d\d?) means one or two digit 
```

您可以获得`<matchresult>.group(1)`NUMBER1 和 NUMBER2 `<matchresult>.group(2)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-25T09:27:47.290

我想提出一个更复杂的正则表达式。我没有 ". : - _" 因为我用空格替换它们

```
str_replace(
        array('.', ':', '-', '_', '(', ')'), ' ', 
```

这是将标题拆分为标题季节和剧集的捕获正则表达式

```
(.*)\s(?:s?|se)(\d+)\s?(?:e|x|ep)\s?(\d+) 
```

例如达芬奇的恶魔 se02ep04 和变体 [https://regex101.com/r/UKWzLr/3](https://regex101.com/r/UKWzLr/3)

我无法涵盖的唯一情况是在季节和数字之间有间隔，因为如果标题对我不起作用，字母 s 或 se 将成为一部分。无论如何，我还没有看到这样的案例，但这仍然是一个问题。

编辑：我设法用第二条线绕过它

```
 $title = $matches[1];
    $title = preg_replace('/(\ss|\sse)$/i', '', $title); 
```

这样，如果名称是系列的一部分，我将删除“s”和“se”的结尾

# javascript - javascript 查询字符串 > window.location.search.substring > 使用 # 而不是 ? 开始查询字符串

> ID：12082540
> 
> 赞同：2
> 
> 时间：2012-08-22T23:00:29.890
> 
> 标签：javascript, google-analytics, query-string, window.location, url-parameters

我正在尝试**从 window.location 提取哈希子字符串值**并将它们写入 HTML 以供用户查看，其 URL 语法不允许`?`用作查询字符串分隔符。

好的，感谢@Gabe，我有这个很棒的代码示例：

```
<html>

<input type="button" id="test" value="Test" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script>

$(function() {
    $('#test').click(function() {

        window.location = (window.location);
        GetURLParameter('source');  

    });

});

function GetURLParameter(sParam) {
    var sPageURL = window.location.hash.substring(1);

    console.log(sPageURL);

    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {

            alert(sParameterName[1]);

            return sParameterName[1];
        }
    }
}

</script>

</html> 
```

我对他的例子做了一个修改，所以我们使用客户端的实际窗口位置::

```
window.location = (window.location); 
```

当我在包含上述代码的页面上点击“测试”提交按钮时（URL 是这样形成的）：

[http://example.com/pagename.html#source=FOO&medium=BAR&campaign=FRED](http://example.com/pagename.html#source=FOO&medium=BAR&campaign=FRED)

（注意没有`?`作为查询字符串分隔符，只是`#`）

...然后我收到一个成功的警报，显示来自 URL 的源“FOO”。惊人的。

**但是如何获取其他两个 SParamaterNames**，然后**如何将它们作为 HTML 写入页面**而不是返回警报。

我知道这对你们来说是一个基本问题。我在这里是因为我已经尝试解决这个问题好几天了，查看了许多不同的解决方案。任何帮助是极大的赞赏！！非常感谢你们所有的巫师。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:03:52.140

只需从`hash`_`search``location` `object`

[这](http://jsfiddle.net/jsKcr/)是一个工作示例。

```
function GetURLParameter(sParam)
{
   var sPageURL = window.location.hash.substring(1);
   var sURLVariables = sPageURL.split('&');
   for (var i = 0; i < sURLVariables.length; i++)
   {
     var sParameterName = sURLVariables[i].split('=');
     if (sParameterName[0] == sParam)
     {
        return sParameterName[1];
     }
   }
} 
```

# mongodb - 使用聚合框架创建从 SQL 到 MongoDB 的值层次结构

> ID：12082543
> 
> 赞同：0
> 
> 时间：2012-08-22T23:01:08.063
> 
> 标签：mongodb, nosql-aggregation

我有一个我正在努力解决的数据转换问题：

假设我有一组来自民意调查的问答记录加载到表单的 mongo 中

ID PollTitle 创建者问题答案受访者

我想将它们转换成我认为更紧凑的 JSON 结构：

```
{
 ID,
 Poll Title,
 Questions : [
    { QuestionTitle, QuestionNumber, Answers : [ 
        { RespondentName, Answer, SubmittedTime }
        ]
    ]
} 
```

这似乎是减少记录数量并代表 Poll -> Questions -> Answers 的自然层次结构的更好方法。以下是单次投票的一些记录示例：

```
_id Poll ID Poll Title  Creator Question  Quest#  Responder Answer  Response Time
742888  9258    Daily Checkin   Mike    Was it a good meeting   1   John    Yes  8/16
742889  9258    Daily Checkin   Mike    Was it a good meeting   1   Len No   8/16
742890  9258    Daily Checkin   Mike    Do you agree with goal  2   John    Yes  8/16
742891  9258    Daily Checkin   Mike    Do you agree with goal  2   Len Yes  8/16 
```

努力弄清楚如何使用聚合框架在查询语言中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:00:58.903

您必须在聚合框架中执行不止一个 $group 步骤。

这是您的示例数据和您将获得的输出的样子：

```
db.poll.aggregate(
[
    {
        "$group" : {
            "_id" : {
                "ID" : "$ID",
                "title" : "$title",
                "QuestionTitle" : "$question",
                "QuestionNumber" : "$questionNum"
            },
            "answer" : {
                "$push" : {
                    "responder" : "$responder",
                    "Answer" : "$answer",
                    "respTime" : "$respTime"
                }
            }
        }
    },
    {
        "$group" : {
            "_id" : {
                "ID" : "$_id.ID",
                "title" : "$_id.title"
            },
            "Questions" : {
                "$push" : {
                    "QuestionTitle" : "$_id.QuestionTitle",
                    "QuestionNumber" : "$_id.questionNumber",
                    "Answers" : "$answer"
                }
            }
        }
    }
])
{
    "result" : [
        {
            "_id" : {
                "ID" : 9258,
                "title" : "Daily Checkin"
            },
            "Questions" : [
                {
                    "QuestionTitle" : "Do you agree with goal",
                    "Answers" : [
                        {
                            "responder" : "John",
                            "Answer" : "Yes",
                            "respTime" : "8/16"
                        },
                        {
                            "responder" : "Len",
                            "Answer" : "Yes",
                            "respTime" : "8/16"
                        }
                    ]
                },
                {
                    "QuestionTitle" : "Was it a good meeting",
                    "Answers" : [
                        {
                            "responder" : "John",
                            "Answer" : "Yes",
                            "respTime" : "8/16"
                        },
                        {
                            "responder" : "Len",
                            "Answer" : "No",
                            "respTime" : "8/16"
                        }
                    ]
                }
            ]
        }
    ],
    "ok" : 1
} 
```

如果要重命名任何字段或以其他方式转换文档的确切格式，可以在末尾使用 $project。

# android - 如何在不重复布局和业务逻辑的情况下创建一个可以跨多个活动使用的 UI？

> ID：12082544
> 
> 赞同：1
> 
> 时间：2012-08-22T23:01:10.607
> 
> 标签：android, android-layout

如何在不重复布局和业务逻辑的情况下创建一个可以跨多个活动使用的 UI？请提供一些例子。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:03:36.830

[您可以像这样](http://android-developers.blogspot.com/2009/02/android-layout-tricks-2-reusing-layouts.html)重用布局。另外，请参阅[此答案](https://stackoverflow.com/questions/2289730/android-layout-is-reusable-component-ui-possible)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:06:56.140

这是相对简单的，有几种方法可以做到，但本质上你想创建一个自定义 UI 组件。[文档在此处](http://developer.android.com/guide/topics/ui/custom-components.html)描述了一些方法，并且有一些教程以及 SO 问题：

*   [http://www.anotherandroidblog.com/2011/05/26/custom-composite-android-component/](http://www.anotherandroidblog.com/2011/05/26/custom-composite-android-component/)
*   [如何在 Android 中创建自定义控件？](https://stackoverflow.com/questions/1046256/how-can-i-create-custom-controls-in-android)
*   [Android - 编写自定义（复合）组件](https://stackoverflow.com/questions/1476371/android-writing-a-custom-compound-component)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:13:18.020

除了其他答案，[片段](http://developer.android.com/guide/components/fragments.html)可以填补你正在寻找的角色。

# entity-framework - Entity Framework 5.0 是否有 ObjectContext 生成器？

> ID：12082546
> 
> 赞同：3
> 
> 时间：2012-08-22T23:01:29.467
> 
> 标签：entity-framework, generator, objectcontext

我正在寻找 Entity Framework 5.0 的 ObjectContext 生成器，而不是 DbContext 生成器。WCF 数据服务需要 ObjectContext 并且不能与 DbContext 一起使用。如果我想将 EF5 与 DataService 一起使用，我必须提供一个 ObjectContext。Visual Studio 2010 和在线的 ObjectContext 生成器适用于“ADO”和“EF 4.x”。“EF 5.x”的所有产品 DbContext 对象的生成器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T18:31:46.750

右键单击设计器中的空白区域并选择属性，然后将代码生成策略更改为“默认”。您还必须删除代码优先的 TT 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:59:06.873

虽然为时已晚 - 您必须先删除 edmx 文件下的所有内容（所有 tt 模板）。之后，您必须下载创建 ObjectContext 的代码生成器。为此，请右键单击您的 edmx 并选择添加代码生成项。之后选择 Online（在左侧）并选择**EF 5.x EntityObject Generator for C#** - 这是创建 ObjectContext 的生成器，您将在描述中看到它（这对 EF 4.x 也有效，只需找到相同的生成器，但名称中有 4.x）。安装它，您将在继承 ObjectContext 的 edmx 下拥有您的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:15:30.117

您可能希望将 WCF 数据服务的版本更新到 5.x。然后它将与 DBContext 一起工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T02:40:51.280

```
using System.Data.Entity.Infrastructure;

ObjectContext context = ((IObjectContextAdapter)DbContextObject).ObjectContext; 
```

# java - Java Scanner Validation 返回第二个输入

> ID：12082557
> 
> 赞同：1
> 
> 时间：2012-08-22T23:02:41.593
> 
> 标签：java, input, io, java.util.scanner

我在这里有一个函数，它可以验证用户输入是数字还是在范围内。

```
public static int getNumberInput(){
    Scanner input = new Scanner(System.in);
    while(!Inputs.isANumber(input)){
        System.out.println("Negative Numbers and Letters are not allowed");
        input.reset();
    }
    return input.nextInt();
}

public static int getNumberInput(int bound){
    Scanner input = new Scanner(System.in);
    int val =   getNumberInput();
    if(val > bound){
        System.out.println("Maximum Input is only up to: "+ bound+" Please Try Again: ");
        input.reset();
        getNumberInput(bound);
    }
    return val;
} 
```

每次我用这个函数调用 getNumberInput(int bound) 方法

```
public void askForDifficulty(){
    System.out.print("Difficulty For This Question:\n1)Easy\n2)Medium\n3)Hard\nChoice: ");
    int choice = Inputs.getNumberInput(diff.length);
    System.out.println(choice);
} 
```

如果我插入了一个超出范围的数字，可以说唯一的最大数字是 5。 getNumberInput(int bound) 将再次调用自己。当我插入正确的值或在边界值内时，它只会返回我插入的第一个值/上一个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:44:44.240

`if`中的应该`getNumberInput(int bound)`是`while`. **编辑**您还应该结合这两种方法：

```
public static int getNumberInput(int bound){
    Scanner input = new Scanner(System.in);
    for (;;) {
        if (!Inputs.isANumber(input)) {
            System.out.println("Negative Numbers and Letters are not allowed");
            input.reset();
            continue;
        }
        int val = getNumberInput();
        if (val <= bound) {
            break;
        }
        System.out.println("Maximum Input is only up to: "+ bound+" Please Try Again: ");
        input.reset();
    }
    return val;
} 
```

# scala - 如何使用 scala Lift 中的 Props 对象保存属性？

> ID：12082558
> 
> 赞同：1
> 
> 时间：2012-08-22T23:02:54.943
> 
> 标签：scala, configuration-files, lift

首先，我应该使用 Lift Props 来存储我的 App 的特定配置吗？Lift 文档解释说您可以使用此 Props 来配置环境（生产、测试​​等），但从未说明您是否可以将它们用于其他目的。

如果使用它们没有任何问题，我该如何存储这些属性（保存它们）。我可以在 Props 对象中看到的所有函数都是 getter。例如，如果我有财产`myapp.myconf1`

我想做类似的事情：

```
Prop.save("myapp.myconf1","value1") 
```

这是否可以使用 Props 或者我应该使用其他库，如 Typesafe config 或 java props？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:33:50.670

Lift Props 对象不打算用作读/写存储。它是部署特定配置信息的存储库（即，您的开发/测试/发布环境之间的设置不同）。该文件存储在类路径中，如果您将其部署为 WAR 文件，我不相信即使存在 API 也无法更改它。

如果您只需要存储名称值对，那么 java props 应该可以正常工作。

# ruby-on-rails - Rails：使用 calendar_date_select gem

> ID：12082559
> 
> 赞同：0
> 
> 时间：2012-08-22T23:02:58.920
> 
> 标签：ruby-on-rails

环境：Rails 3.2.3，ruby 1.9.3-p125

我的 gemfile 有以下内容：

```
gem 'calendar_date_select' 
```

我的 layouts/application.html.erb 有以下语句（作为 head 部分的最后一条语句）：

```
<%= calendar_date_select_includes %> 
```

我通过 gem install calendar_date_select 安装了 gem 并运行了 rake bundle:install

我阅读了文档，以及 StackOverflow 上的一些回复，这就是我最终提出的观点：

```
<%= form_for(@panel) do |f| %>
 .......
   Start Date/Time: <%= f.calendar_date_select :start_time, :iso_date => true %> 
```

我收到以下错误消息：

#<#:0x007fae3b136938> 的未定义方法“calendar_date_select”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-07T09:58:49.543

使用此代码在日历选择标签中启用时间

```
<%= f.calendar_date_select "date", :time => true , :readonly=>true, :popup=>"force"  %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:09:32.807

我已经从使用该 gem 切换到仅使用具有相同功能的 jqueryUI。

![在此处输入图像描述](../Images/979d98307ab4a34aa34583f2f5a28ce8.png)

要做到这一点：

```
view
= f.text_field :content_date, id: 'datepicker', size:10
= f.time_select :content_date, :ignore_date => true # Added later. not shown in screenshot

Gemfile
# Nothing - jquery & jqueryUI are now the default.  
# Check web pages to see what really gets included (in the header).

application.js
%script
  # The main code
  $(function() {
  $( "#datepicker" ).datepicker();
  });
  # This makes the pop-up show the actual db date by fixing a format difference.
  $(function (){
  var dateInput = $("#datepicker");
  var format = 'yy-mm-dd';
  dateInput.datepicker({dateFormat: format});
  dateInput.datepicker('setDate', $.datepicker.parseDate(format, dateInput.val()));
  }); 
```

# wpf - WPF 组合框绑定文本

> ID：12082560
> 
> 赞同：3
> 
> 时间：2012-08-22T23:03:04.310
> 
> 标签：wpf, combobox

也许是一个简单的任务，但我找不到解决方案。我有一个连接到数据库的组合框。而不是显示内容，`ProductLookup`我只想在弹出菜单上显示“男性”和“女性”这两个词。

谢谢

```
<ComboBox Height="23" Name="ComboBox2" Width="120"  IsEditable="False"
                      ItemsSource="{Binding Source={StaticResource ProductLookup}}"
                      SelectedValue="{Binding Path=ProductID}" 
                      SelectedValuePath="ProductID" 
                      DisplayMemberPath="Name"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:16:37.973

编写一个`Converter`接受您的“产品”对象之一的...查看其中的性别相关数据，或者执行性别确定逻辑，然后返回性别字符串“男性”或“女性”。

然后在您的 XAML 中使用它来设置`TextBlock`：

```
<StackPanel Height="197" HorizontalAlignment="Left" Margin="300,6,0,0" Name="StackPanel5" VerticalAlignment="Top" Width="285"
                             DataContext="{Binding Source={StaticResource DetailViewPagos}}">
    <StackPanel.Resources>
        <local:ProductToGenderConverter x:Key="prodtogenderconv"/>
    </StackPanel.Resources>

    <ComboBox Height="23" Name="ComboBox2" Width="120" IsEditable="False"
        ItemsSource="{Binding Source={StaticResource ProductLookup}}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
             <TextBlock Text="{Binding Converter={StaticResource prodtogenderconv}}" />
        </DataTemplate>
    </ComboBox.ItemTemplate>
    </ComboBox> 
```

```
public class ProductToGenderConverter : IValueConverter {

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {

        MyProduct prod = value as MyProduct;

        if (prod is for a male) // Pseudocode for condition
            return "male";

        if (prod is for a female) // Pseudocode for condition
            return "female";

        return null or "";
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        throw new NotImplementedException();
    }
} 
```

或者，您可以提供一个包装您的产品对象的 ViewModel，该对象具有指示产品“性别”的特定属性...然后创建这些对象的集合以在您的 ComboBox 中进行设置...然后您可以使用`DisplayMemberPath`指向到那个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T00:02:16.860

请参阅[此](https://stackoverflow.com/a/11892834/4490)答案，这是一种包装您的值以便在 WPF 中进行良好绑定和显示的方法。

可以修改 Item 类以支持 Code 属性的对象。

# d - SSE2 movddup 不移动值

> ID：12082561
> 
> 赞同：1
> 
> 时间：2012-08-22T23:03:17.903
> 
> 标签：d, sse, sse2

有人不能向我解释为什么这个程序的输出是`[nan, nan]`？该代码应该将 的值加载`d`到 XMM1 寄存器的高 64 位和低 64 位，然后将 XMM1 的内容移动到`a`. 因为`a`没有初始化为一组特定的值，所以 D 将每个元素初始化为`nan`. 如果`movupd`指令不在 objdump 中，我会理解结果，但指令在那里。想法？

```
import std.stdio;

void main()
{
    enum double d = 1.0 / cast(double)2;
    double[] a = new double[2];
    auto aptr = a.ptr;

    asm
    {
        movddup XMM1, d;
        movupd [aptr], XMM1;
    }
    writeln(a);
} 
```

这是主函数的objdump：

```
0000000000426b88 <_Dmain>:
  426b88:       55                      push   %rbp
  426b89:       48 8b ec                mov    %rsp,%rbp
  426b8c:       48 83 ec 50             sub    $0x50,%rsp
  426b90:       f2 48 0f 10 05 77 81    rex.W movsd 0x28177(%rip),%xmm0
  426b97:       02 00 
  426b99:       f2 48 0f 11 45 b0       rex.W movsd %xmm0,-0x50(%rbp)
  426b9f:       48 be 02 00 00 00 00    movabs $0x2,%rsi
  426ba6:       00 00 00 
  426ba9:       f2 48 0f 10 05 66 81    rex.W movsd 0x28166(%rip),%xmm0
  426bb0:       02 00 
  426bb2:       48 8d 7d c0             lea    -0x40(%rbp),%rdi
  426bb6:       e8 65 d1 00 00          callq  433d20 <_memsetDouble>
  426bbb:       f2 48 0f 10 0d 4c 81    rex.W movsd 0x2814c(%rip),%xmm1
  426bc2:       02 00 
  426bc4:       f2 48 0f 11 4d c0       rex.W movsd %xmm1,-0x40(%rbp)
  426bca:       f2 48 0f 10 15 3d 81    rex.W movsd 0x2813d(%rip),%xmm2
  426bd1:       02 00 
  426bd3:       f2 48 0f 11 55 c8       rex.W movsd %xmm2,-0x38(%rbp)
  426bd9:       48 8d 45 c0             lea    -0x40(%rbp),%rax
  426bdd:       48 89 45 d0             mov    %rax,-0x30(%rbp)
  426be1:       48 8d 55 e0             lea    -0x20(%rbp),%rdx
  426be5:       48 b8 02 00 00 00 00    movabs $0x2,%rax
  426bec:       00 00 00 
  426bef:       48 89 c1                mov    %rax,%rcx
  426bf2:       49 89 d0                mov    %rdx,%r8
  426bf5:       51                      push   %rcx
  426bf6:       41 50                   push   %r8
  426bf8:       48 be 02 00 00 00 00    movabs $0x2,%rsi
  426bff:       00 00 00 
  426c02:       48 bf c0 84 65 00 00    movabs $0x6584c0,%rdi
  426c09:       00 00 00 
  426c0c:       e8 87 ce 00 00          callq  433a98 <_d_arrayliteralTX>
  426c11:       48 89 45 f0             mov    %rax,-0x10(%rbp)
  426c15:       f2 48 0f 10 05 02 81    rex.W movsd 0x28102(%rip),%xmm0
  426c1c:       02 00 
  426c1e:       f2 48 0f 11 00          rex.W movsd %xmm0,(%rax)
  426c23:       f2 48 0f 10 0d f4 80    rex.W movsd 0x280f4(%rip),%xmm1
  426c2a:       02 00 
  426c2c:       48 8b 45 f0             mov    -0x10(%rbp),%rax
  426c30:       f2 48 0f 11 48 08       rex.W movsd %xmm1,0x8(%rax)
  426c36:       48 8b 55 f0             mov    -0x10(%rbp),%rdx
  426c3a:       48 be 02 00 00 00 00    movabs $0x2,%rsi
  426c41:       00 00 00 
  426c44:       41 58                   pop    %r8
  426c46:       59                      pop    %rcx
  426c47:       48 bf 08 00 00 00 00    movabs $0x8,%rdi
  426c4e:       00 00 00 
  426c51:       e8 8e 95 00 00          callq  4301e4 <_d_arraycopy>
  426c56:       f2 0f 12 4d b0          movddup -0x50(%rbp),%xmm1
  426c5b:       66 0f 11 4d d0          movupd %xmm1,-0x30(%rbp)
  426c60:       ff 75 c8                pushq  -0x38(%rbp)
  426c63:       ff 75 c0                pushq  -0x40(%rbp)
  426c66:       e8 09 00 00 00          callq  426c74 <_D3std5stdio16__T7writelnTG2dZ7writelnFG2dZv>
  426c6b:       48 83 c4 10             add    $0x10,%rsp
  426c6f:       31 c0                   xor    %eax,%eax
  426c71:       c9                      leaveq 
  426c72:       c3                      retq   
  426c73:       90                      nop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T06:05:21.977

我调查了它，显然编译器决定`movupd [aptr], XMM1`你的意思是`movupd aptr, XMM1`. 预先加载`aptr`到寄存器中 ( `mov aptr, RAX; movupd [RAX], XMM1`) 将使其工作。

您可能应该提交错误报告。

# java - 字符串值和数组值之间的相等性

> ID：12082563
> 
> 赞同：0
> 
> 时间：2012-08-22T23:03:21.103
> 
> 标签：java, arrays, string, compare

所以这是我的代码的一部分。如果我为 preTranslation 字符串输入“1111”，它应该打印出 true，但打印出 false。我猜 .equal() 无法比较这两个值，但我不知道另一种方式。有什么帮助吗？

```
import javax.swing.JOptionPane;
import java.util.Arrays;

public class test3
{
    public static void main ( String [] args )
    {

    String s1 = "Morse";

    // Decide whether Morse code or English
    String decide = JOptionPane.showInputDialog("Enter 'English' for Morse to English code translation and 'Morse' for English to Morse code translation. Pay attention to Caps.");

    // Enter String & decide whether to convert to Morse or English
    String preTranslation = JOptionPane.showInputDialog("Enter the words you wish to translate.");

    if ( decide.equals( s1 ))
        toMorse( preTranslation );

    else
        toEnglish( preTranslation );
    }

// Translate to Morse
public static void toMorse( String preTrans )
{
    // Initialize english letters
    char[] english = new char[3];

    // Initialize english numbers
    english[0] = 1;
    english[1] = 2;
    english[2] = 3;

    // Initialize morse characters
    String[] morse = {".","-", ".-"};

    // Replace spaces with |
    String phraseWithDelimiter = preTrans.replace( " ", "|");

    String[] translation = new String[phraseWithDelimiter.length()];
    System.out.println( phraseWithDelimiter.substring(0, 1).equals( english[0] )); // Should print out to be true
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:08:46.587

您正在将 String 对象与字符（char）进行比较，因此 equals 将始终返回 false。如果要从字符串中获取单个字符，请使用 charAt 方法而不是子字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:12:09.360

使用**String.valueOf(phraseWithDelimiter.substring(0, 1)).equals(english[0] ));**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:18:55.523

用于纠正`charAt`字符比较：

```
phraseWithDelimiter.charAt(0) == english[0] 
```

你定义：

```
english[0] = 1; 
```

这是ASCII 1，用户无法输入的字符。您需要定义：

```
english[0] = '1'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T23:19:42.767

只是为了详细说明 JamesB 的答案，如果您看一下 String 类的 equals 方法的实现：

```
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String) anObject;
        int n = value.length;
        if (n == anotherString.value.length) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = 0;
            while (n-- != 0) {
                if (v1[i] != v2[i])
                        return false;
                i++;
            }
            return true;
        }
    }
    return false;
} 
```

您会注意到，如果您要比较的对象不是字符串的实例（在您的示例中是一个字符），它会立即返回 false。:)

# pandas - pandas 箱线图中的胡须到底说明了什么？

> ID：12082568
> 
> 赞同：16
> 
> 时间：2012-08-22T23:03:38.483
> 
> 标签：pandas, boxplot

在默认设置的 python-pandas 箱线图中，红色条是~~中~~ *位数*，方框表示第 25 和第 75 个四分位数，但在这种情况下，胡须到底意味着什么？找出确切定义的文档在哪里（找不到）？

示例代码：

```
df.boxplot() 
```

示例结果：

![在此处输入图像描述](../Images/4f9e8187c3334775f4fb3454dad9adc8.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-04-11T17:58:41.563

Pandas 只是包装了 matplotlib 中的 boxplot 函数。[matplotlib 文档](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.boxplot.html)详细定义了胡须：

> whis：浮点数、序列或字符串（默认 = 1.5）
> 
> 作为浮点数，确定胡须的范围超出第一和第三四分位数。换句话说，如果 IQR 是四分位距 (Q3-Q1)，则上须线将延伸到小于 Q3 + whis*IQR 的最后一个数据。类似地，下须线将延伸到大于 Q1 - whis*IQR 的第一个数据。除了胡须，数据被认为是异常值，并被绘制为单个点。

Matplotlib（和 Pandas）还为您提供了很多选项来更改胡须的默认定义：

> 将此设置为不合理的高值以强制胡须显示最小值和最大值。或者，将其设置为百分位数的升序（例如，[5, 95]）以将须线设置在数据的特定百分位数。最后，whis 可以是字符串“范围”，以强制胡须达到数据的最小值和最大值。

[下面的图表从stats.stackexchange answer](https://stats.stackexchange.com/a/149178)说明了这一点。请注意，如果您未`whis`在 Pandas 中提供关键字，则 k=1.5。

[![在此处输入图像描述](../Images/cf974d8c1946df82bffd8dfe1b54e2cc.png)](https://i.stack.imgur.com/ty5wN.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-16T13:15:50.807

你在你的问题中提到红线是平均值 - 它实际上是中位数。

从上面常涉提到的matplotlib链接：

> 该框从数据的下四分位数延伸到上四分位数，中间有一条线。晶须从盒子延伸以显示数据的范围。飞行点是那些超过胡须末端的点。

我没有进行实验，但有一个“平均线”选项可能会将线置于平均线。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-06T16:08:24.373

来自[Amelio Vazquez-Reina](https://stackoverflow.com/users/283296/amelio-vazquez-reina)[在 matplotlib 箱形图中](https://stackoverflow.com/a/23324730/395857)的回答：标记和异常值：

> ![在此处输入图像描述](../Images/bb761920d3198759458a41d17470b7af.png)
> 
> 异常值（`+`箱线图中的标记）只是下方宽边**之外**`[(Q1-1.5 IQR), (Q3+1.5 IQR)]`的点。

仅供参考：[对箱须图中栅栏的位置感到困惑](https://stats.stackexchange.com/q/149161/12359)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-23T01:34:04.427

这些在[matplotlib](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.boxplot)文档中指定。胡须是四分位数范围的一些倍数（默认为 1.5）。

# python - 覆盖 sphinx 的 autodoc 中的函数声明

> ID：12082570
> 
> 赞同：11
> 
> 时间：2012-08-22T23:03:45.260
> 
> 标签：python, documentation, python-sphinx, autodoc

我有一个类似这样的模块：

```
#!/usr/bin/env python

#: Documentation here.
#: blah blah blah
foobar = r'Some really long regex here.'

def myfunc(val=foobar):
    '''Blah blah blah'''
    pass 
```

...我有一个`.rst`文件是这样的：

```
:mod:`my_module` Module
-----------------------

..automodule:: my_module
    :members:
    :private-members:
    :show-inheritance: 
```

当我构建文档时，我得到一个带有如下代码段的 html 文件：

> 我的模块.foobar。**foob​​ar** = *'这里有一些荒谬的长而丑陋的正则表达式'*
> 
> *这里有额外的文档*
> 
> 我的模块。**myfunc** ( *val='这里有一些又长又丑的正则表达式'* )
> 
> *等等等等等等*

基于this [stackoverflow post](https://stackoverflow.com/questions/5365684/is-it-possible-to-override-sphinx-autodoc-for-specific-functions)，我认为可以通过将模块更改为：

```
#!/usr/bin/env python

#: .. data:: my_module.foobar
#: Extra documentation here
foobar = 'Some really long regex here.'

def myfunc(val=foobar):
    '''.. function:: my_module.myfunc(val=foobar)

    Blah blah blah'''
    pass 
```

...但这并没有奏效，只是将我想要的签名附加在丑陋的签名下面作为身体的一部分。有人知道我如何正确地覆盖它吗？

*（我正在使用 Sphinx v1.1.3，顺便说一句。）*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-23T08:34:53.863

您有一个模块级变量，用作函数中关键字参数的默认值。Sphinx 在函数签名中显示该变量的值（而不是名称）。这个问题在[另一个问题](https://stackoverflow.com/q/7228797/407651)中讨论过，OP 也已经在 GitHub 上提交[了一个关于它的问题票。](https://github.com/sphinx-doc/sphinx/issues/759)

但是，您可以通过两种方式解决此问题：

1.  `autofunction`如链接问题[的答案](https://stackoverflow.com/a/5368194/407651)中所述，使用 覆盖 .rst 文件中的签名。

2.  如果文档字符串的第一行看起来像一个签名，并且[autodoc_docstring_signature](http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#confval-autodoc_docstring_signature)配置变量设置为`True`（默认情况下），那么 Sphinx 将使用该行作为签名。

    因此，如果您有一个如下所示的文档字符串，

    ```
    def myfunc(val=foobar):
        '''myfunc(val=foobar)

        Blah blah blah'''
        pass 
    ```

    它应该以您想要的方式工作。

    在问题中，您在文档字符串中有第一行：

    ```
    .. function:: my_module.myfunc(val=foobar) 
    ```

    这不起作用，因为它看起来不像一个正确的签名。

# c++ - 如何在编译时找出可以表示数字的最小整数类型

> ID：12082571
> 
> 赞同：9
> 
> 时间：2012-08-22T23:03:46.043
> 
> 标签：c++, templates, c++11, typetraits

我需要在编译时找出可以表示特定数字的最小无符号整数类型。像这样的东西...

```
//////////////////////////////////////////////////////////////////////////
template<size_t Bits>
struct uint_least{};

template<>
struct uint_least<8>{ typedef std::uint8_t type; };

template<>
struct uint_least<16>{ typedef std::uint16_t type; };

//////////////////////////////////////////////////////////////////////////
template<size_t max>
struct uint_least_bits
{
    static const size_t value = 14; // just a placeholder
};

//////////////////////////////////////////////////////////////////////////
template<size_t max>
class A
{
    typedef typename uint_least<uint_least_bits<max>::value>::type underlying_type;

    underlying_type m_X;
}; 
```

`uint_least`旨在为您提供至少`Bits`大的最小无符号整数类型，它应该适用于高达 64 的任何值（不仅仅是 8、16、32、64，还有 1、4、13 等）。

`uint_least_bits`旨在为您提供表示`max`.

*   我该如何实施`uint_least`？
*   我该如何实施`uint_least_bits`？
*   应该`bits`、、`min`和`max`是什么类型？如果答案是模板类型，我该如何防范无效输入？

**特征的确切结构并不重要。随意废弃我提供的内容。我只需要提供一个数字并取回可以容纳它的最小无符号整数类型。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T00:13:49.223

我昨天刚做的，真是巧合。我会把它留在这里，即使它不*完全*是你所需要的（无论如何它修复了最好的整数类型）：

```
#include <type_traits>
#include <stdint.h>

template<size_t i>
struct best_type {
    typedef typename std::conditional<
        (i <= 8),
        uint8_t,
        typename std::conditional<
            (i <= 16),
            uint16_t,
            typename std::conditional<
                (i <= 32),
                uint32_t,
                uint64_t
            >::type
        >::type
    >::type type;
}; 
```

然后，你会像这样使用它：

```
#include <type_traits>
#include <iostream>
#include <stdint.h>

template<size_t i>
struct best_type {
    typedef typename std::conditional<
        (i <= 8),
        uint8_t,
        typename std::conditional<
            (i <= 16),
            uint16_t,
            typename std::conditional<
                (i <= 32),
                uint32_t,
                uint64_t
            >::type
        >::type
    >::type type;
};   

int main() {
    std::cout << sizeof(best_type<2>::type) << std::endl;
    std::cout << sizeof(best_type<8>::type) << std::endl;
    std::cout << sizeof(best_type<15>::type) << std::endl;
    std::cout << sizeof(best_type<17>::type) << std::endl;
} 
```

现场演示，[在这里](http://ideone.com/kZ8mu)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T00:05:08.643

如果你有`constexpr`，这将工作：

```
#include <climits>
#include <cstdint>
#include <cstddef>

inline
constexpr
unsigned
clz(unsigned x)
{
    return x == 0 ? sizeof(x)*CHAR_BIT : x & 0x80000000 ? 0 : 1 + clz(x << 1);
}

inline
constexpr
unsigned
clp2(unsigned x)
{
    return x == 0 ? 0 : 1 << (sizeof(x)*CHAR_BIT - clz(x-1));
}

inline
constexpr
unsigned
at_least8(unsigned x)
{
    return x < 8 ? 8 : x;
}

template<size_t Bits>
struct uint_least{};

template<>
struct uint_least<8>{ typedef std::uint8_t type; };

template<>
struct uint_least<16>{ typedef std::uint16_t type; };

template<>
struct uint_least<32>{ typedef std::uint32_t type; };

template<>
struct uint_least<64>{ typedef std::uint64_t type; };

template<size_t max>
struct uint_least_bits
{
    static const size_t value = clp2(max);
};

template<size_t max>
class A
{
    typedef typename uint_least<at_least8(uint_least_bits<max>::value)>::type underlying_type;

    underlying_type m_X;
};

int main()
{
    A<3> a;
} 
```

如果你没有`constexpr`，你可以将 clp2 翻译成一个模板元函数（这留给读者练习:-)）。

哦，免责声明：假设 32 位`unsigned`. 如果需要，这也可以概括。

# php - 通过 REST api 流式传输/触发文件下载

> ID：12082573
> 
> 赞同：1
> 
> 时间：2012-08-22T23:04:02.833
> 
> 标签：php, file, api, rest, download

我正在开发 REST API。其中一个调用应该允许下载文件。API调用如下：

```
 /music/mp3s/jenkins/12/ 
```

12 是存储在dataabse 中的file_id。实际文件名是根据该文件的数据库记录生成的。类似的东西`jenkin_494_334_12.mp3`。文件 ID 附加在文件名部分的末尾。

但是，不能通过 URL 直接访问此文件。它存储在 webroot 之外。如何通过上面的 REST API 调用流式传输/触发下载。

如果是网页，我们可以将所有的PHP文件然后发出`header`调用来触发下载。

有任何想法吗？

# delphi - 向 Delphi 设计器公开子组件

> ID：12082582
> 
> 赞同：1
> 
> 时间：2012-08-22T23:05:10.957
> 
> 标签：delphi, composite-component

我创建了一个组件，继承`TFrame`并添加了一个 ActionList 和 ToolBar 到框架，因为我想让一个基本表单可供其他项目和开发人员使用。问题是：如何在设计时公开 ActionList 属性？ActionList 显示在对象检查器中，我可以看到它的事件和属性，但 ActionList 中的操作在设计时不可用。

更多细节：

我创建了一个继承自Delphi IDE 设计器的类，`TFrame`并在其中添加了一个类。`TActionList`然后我将它添加到一个包中并将它作为一个组件安装。现在我可以将该组件拖放到表单上，并将我设计的整个框架添加到表单中。我在对象检查器中看到了 ActionList，但问题是我看不到 ActionList 中的动作。我需要在使用该组件的表单上向 ActionList 添加操作。

[![在此处输入图像描述](../Images/8bd0504a0d5da44fcf4aaf25a756be17.png "点击查看完整尺寸")](https://i.stack.imgur.com/7jOtx.png)

# javascript - jQuery .on 绑定不触发

> ID：12082586
> 
> 赞同：0
> 
> 时间：2012-08-22T23:05:30.633
> 
> 标签：javascript, jquery, ajax, onclick

我通过 AJAX 请求数据并将其附加到页面，如下所示：

```
$('#post-images').append('<div class="image-holder"><img src="' + resp.images[i].imageUrl + '" /><br /><input type="checkbox" value="' + i + '" /></div>'); 
```

我已经设置了一个事件监听器来监听点击事件：

```
$('.image-holder').on('click', function() {
    alert("testing");
}); 
```

但是，该方法永远不会被触发。

使用 Chrome 开发人员工具，我可以看到正确的 HTML 被插入到页面中，并且`.image-holder`div 被点击（它没有 1x1 尺寸或其他东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:07:07.700

这段代码：

```
$('.image-holder').on('click', function() {
    alert("testing");
}); 
```

仅将事件处理程序绑定到运行该代码时存在的对象。如果稍后将对象添加到页面中，它们将没有事件处理程序。

相反，您可以使用这样的委托形式`.on()`：

```
$("#post-images").on('click', '.image-holder', function() {
    alert("testing");
}); 
```

This will bind a single event handler to `#post-images` which will catch the bubbling up clicks coming from any child objects that match the selector `.image-holder` so it will work with dynamically added objects.

# mysql - 查找取消订阅的会员

> ID：12082588
> 
> 赞同：0
> 
> 时间：2012-08-22T23:05:46.577
> 
> 标签：mysql, ruby-on-rails, activerecord, arel

所以，会员有很多订阅。如果最后一个订阅 cancelled_at 不为零，则取消成员。但我似乎无法让查询正常工作，找到所有目前取消订阅的成员。

我在成员模型中这样做

```
 scope :canceled, includes(:subscriptions).
    where('subscriptions.canceled_at IS NOT NULL') 
```

但它也会为之前取消订阅的用户返回。我需要使用限制或类似的东西，我将关系定义为

```
has_many :subscriptions, :order => "subscriptions.created_at DESC", :dependent => :destroy 
```

所以我可以解决.first，但不知道如何将该逻辑应用于类范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:14:21.430

如何添加另一个关联

```
 Class Member < ActiveRecord::Base
   has_one :last_subscription, :class_name => "Subscription", :foreign_key => "member_id", :order => "created_at desc" 
```

然后尝试

```
 scope :canceled, includes(:last_subscription).where('subscriptions.canceled_at IS NOT NULL') 
```

# javascript - jQuery 过度使用 .add()？

> ID：12082595
> 
> 赞同：3
> 
> 时间：2012-08-22T23:06:57.283
> 
> 标签：javascript, jquery, arrays, add

有没有更好的方法：

```
$(obj1).add(obj2).add(obj3).add(obj4)... etc? 
```

我正在编写一个包含许多用户可选组件的脚本，有时我需要获取其中的许多组件。我只是想知道是否有更好的方法来做到这一点，或者是否有办法将多个对象传递到 1 .add？这是否值得（例如，如果它涉及构建一个对象数组然后将其传入？？？）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:14:07.970

您可以使用对象数组：

```
$([obj1, obj2, obj3, obj4]); 
```

# php - 如何在 PHP 中使用 InfoPath 表单

> ID：12082596
> 
> 赞同：1
> 
> 时间：2012-08-22T23:06:56.713
> 
> 标签：php, ms-office, infopath, infopath2010

我正在寻找一种将 microsoft office infopath 2010 表单与 php 一起使用的简单方法。

# javascript - 仅选择两个选择器之一

> ID：12082603
> 
> 赞同：0
> 
> 时间：2012-08-22T23:07:32.083
> 
> 标签：javascript, jquery

`$c`给定一个包含多个元素的包含 jQuery 对象，其中包含具有类*名 tmpSelected*和*selected*的元素，我想`$c`为每个类名只选择一个元素，最好*是 tmpSelected*。标记是这个的复杂版本：

```
<ul id="a">
    <li class="selected"><a href="foo">Foo</a></li>
    <li><a href="bar">Bar</a></li>
    <li><a href="baz">Baz</a></li>
    <li><a href="biz">Biz</a></li>
</ul>
<ul id="b">
    <li><a href="woo">Woo</a></li>
    <li><a href="war">War</a></li>
    <li class="tmpSelected"><a href="waz">Waz</a></li>
    <li><a href="wiz">Wiz</a></li>
</ul>
<ul id="c">
    <li class="selected"><a href="xuu">Xuu</a></li>
    <li class="tmpSelected"><a href="xur">Xur</a></li>
    <li><a href="xuz">Xuz</a></li>
    <li><a href="xyz">Xyz</a></li>
</ul> 
```

在这种情况下，我想要结束的是-如果元素有 的兄弟，`$("#a > .selected, #b > .tmpSelected, #c > .tmpSelected")`我想避免它，并且我不想为where的每个成员选择多个子元素。`.selected``.tmpSelected``$c``$c = $("#a, #b, #c")`

所以这就是我想出的：

```
var $c = $("#a, #b, #c");
var $selected = $c.map(function (idx, el) {
    var $el = $(el);
    var $tmpSel = $el.children(".tmpSelected");
    return $tmpSel.length ? $tmpSel : $el.children(".selected");
}); 
```

有没有一种合理的方法可以在没有显式循环的情况下做到这一点？（PS - 当没有`.tmpSelected`或`.selected`子项存在时返回一个空的选择器是可以的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:17:40.207

我建议这在概念上与您已经拥有的非常相似，除了这保证它只为每个父母返回一个项目。

```
var selected = $("#a, #b, #c").map(function() {
   var item = $(this).find(".tmpSelected");
   if (!item.length) {
       item = $(this).find(".selected");
   }
   return(item.get(0));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:19:12.830

这是一个选择器，但它非常混乱。我相信它给出了正确的解决方案：

```
$("ul > li.tmpSelected, ul:not(:has(li.tmpSelected)) > li.selected"); 
```

首先你要寻找和`.tmpSelected`元素。然后你寻找任何`ul`只有`.selected`元素的东西。选择`:has`器查找子元素，我使用`:not`选择器查找`ul`元素。然后我简单地抓住孩子`selected`元素。

[jsFiddle](http://jsfiddle.net/bCvAp/2/)

# javascript - 使用 javascript：在没有阻止 html 标记的情况下阻止脚本编写的最佳方法是什么 ( , ， ETC。）？

> ID：12082608
> 
> 赞同：2
> 
> 时间：2012-08-22T23:08:27.057
> 
> 标签：javascript, escaping, xss

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:12:43.900

如果您使用 javascript 进行用户输入，那么无论您做什么，它都不会是防弹的。

假设您正在编写服务器端后端，您应该使用经过验证的真实 bbcode，它必须有一个库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:30:52.837

如果您有一个简单的标签白名单，并且您不需要担心编码级别或以下的攻击（就像浏览器端 JavaScript 中的情况一样），您可以执行以下操作：

```
function sanitize(tagWhitelist, html) {
  // Get rid of all uses of '['.
  html = String(html).replace(/\[/g, '&#91;');

  // Consider all uses of '<' and replace whitelisted tags with markers like
  // [1] which are indices into a list of approved tag names.
  // Replace all other uses of < and > with entities.
  var tags = [];
  html = html.replace(
    /<!--[\s\S]*?-->|<(\/?)([a-z]\w*)(?:[^"'>]|"[^"]*"|'[^']*')*>/g,
    function (_, close, tagName) {
      if (tagName) {
        tagName = tagName.toLowerCase();
        if (tagWhitelist.hasOwnProperty(tagName) && tagWhitelist[tagName]) {
          var index = tags.length;
          tags.push('<' + (close || '') + tagName + '>');
          return '[' + index + ']';
        }
      }
      return '';
    });

  // Escape HTML special characters.  Leave entities alone.
  html = html.replace(/[<>"'@\`\u0000]/g,
    function (c) {
      switch (c) {
        case '<': return '&lt;';
        case '>': return '&gt;';
        case '"': return '&quot;';
        case '\'': return '&#39;';
        case '@': return '&#64;';
      }
      return '&#' + c.charCodeAt(0) + ';';
    });
  if (html.indexOf('<') >= 0) { throw new Error(); }  // Sanity check.

  // Throw out any close tags that don't correspond to start tags.
  // If <table> is used for formatting, embedded HTML shouldn't be able
  // to use a mismatched </table> to break page layout.
  var open = [];
  for (var i = 0, n = tags.length; i < n; ++i) {
    var tag = tags[i];
    if (tag.charAt(1) === '/') {
      var idx = open.lastIndexOf(tag);
      if (idx < 0) { tags[i] = ""; }  // Drop close tag.
      else {
        tags[i] = open.slice(idx).reverse().join('');
        open.length = idx;
      }
    } else if (!HTML5_VOID_ELEMENTS.test(tag)) {
      open.push('</' + tag.substring(1));
    }
  }
  // Now html contains no tags or less-than characters that could become
  // part of a tag via a replacement operation and tags only contains
  // approved tags.
  // Reinsert the white-listed tags.
  html = html.replace(
       /\[(\d+)\]/g, function (_, index) { return tags[index]; });

  // Close any still open tags.
  // This prevents unclosed formatting elements like <ol> and <table> from
  // breaking the layout of containing HTML.
  return html + open.reverse().join('');
}

var HTML5_VOID_ELEMENTS = new RegExp(
     '^<(?:area|base|br|col|command|embed|hr|img|input'
     + '|keygen|link|meta|param|source|track|wbr)\\b'); 
```

可以像这样使用

```
sanitize({ p: true, b: true, i: true, br: true },
         "Hello, <b>World</b>!<script>alert(1337)<\/script>"); 
```

如果您需要更多可配置性，例如允许标签上的属性，请参阅[Caja HTML sanitizer](http://code.google.com/p/google-caja/wiki/JsHtmlSanitizer)。

正如其他人指出的那样，您的服务器不应该信任来自客户端的结果，因此您应该在将结果嵌入服务器生成的标记之前重新对服务器进行清理。

# vbscript - VBS 检查窗口是否打开

> ID：12082611
> 
> 赞同：0
> 
> 时间：2012-08-22T23:08:46.713
> 
> 标签：vbscript

我正在寻找 vbscript 可以检查是否打开特定命名窗口然后运行以下内容的过程。

objShell.SendKeys ("^{w}")

我还是新手，所以任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:50:19.493

快速的答案是查看以下内容：

```
Const TimeToAllowActivationToComplete = 250 ' YMMV so experiment
WshShell.AppActivate "Put Window Title Here"
Wscript.Sleep TimeToAllowActivationToComplete
WshShell.SendKeys "^{w}" 
```

另请参阅“vbscript appactivate sendkeys”上的网络搜索，结果如下：

[ASP 免费论坛 > 系统管理 > Windows Scripting VBScript - SendKey to Application in APPActivcate](http://forums.aspfree.com/windows-scripting-64/sendkey-to-application-in-appactivcate-248918.html)

[PC Tools Scripting 主页 > > WScript 方法 SendKeys 方法](http://www.pctools.com/guides/scripting/detail/149/?act=reference)

# ruby - 进入日期间隔

> ID：12082612
> 
> 赞同：1
> 
> 时间：2012-08-22T23:08:50.097
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我试图在 Rails 3.2 的日期间隔上做一个 each .. 像这样：

```
(1.months.ago.to_date..5.months.from_now.to_date).step(1.month).each do |date|  
    puts date.strftime('%m/%Y')  
end 
```

但是，这`step(1.month)`不起作用..似乎是第一个月（例如：今天是八月，它将在七月返回）并且不会重复其他月份..

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:35:43.773

您使用 Date 作为您的迭代基础，我相信 1.month （在幕后）转换为秒。

当您添加到 Date 对象时，它以天为单位，因此：

Date.today + 1 将是明天

因此，在您的示例中，您尝试步长​​ 2592000 天。

您可能想要的更像是：

```
 (1.months.ago.to_date..5.months.from_now.to_date).step(30).each { |date| puts date.strftime('%m/%Y') } 
```

如果您正在寻找足够聪明的迭代器来知道每个月有多少天当您“步进”时，那是不会发生的。你需要自己滚动它。

您可以使用 >> 运算符智能地迭代几个月，因此：

```
date = Date.today
while date < 5.months.from_now.to_date do
     puts date.strftime('%m/%Y')
     date = date>>1
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T12:04:36.820

这个怎么样：

```
current_date, end_date = Date.today, 5.monthes.from_now.to_date
while current_date <= end_date
  puts current_date
  current_date = current_date.next_month
end 
```

# django - Django模板如果条件失败

> ID：12082620
> 
> 赞同：0
> 
> 时间：2012-08-22T23:10:20.440
> 
> 标签：django, templates, conditional

我无法弄清楚为什么 if 条件之间的代码没有显示。没有条件，代码显示正常。

```
{% if current_user_is_not_crew %}
<p>
<form action="/commit/" method="post" id="event-commit">
<input type="hidden" name="event_id" value="{{ event.id }}">
<input type="submit" value="Commit to this event">
{% csrf_token %}
</form>
</p>
{% endif %} 
```

我知道变量 current_user_is_not_crew 是真的，因为我已经调试过：

```
Assert False, locals() 
```

在视图中，它向我展示了它。view.py 看起来像这样：

```
@login_required
def event(request, event_id):
    event = Event.objects.get(pk=event_id)
    crew = event.userprofile_set.all()
    current_user = request.user.get_profile()
    if current_user in crew:
         current_user_is_not_crew = False
    else:
         current_user_is_not_crew = True
    context = RequestContext(request)
    context['event'] = event
    context['crew'] = crew
    context['current_user'] = current_user_is_not_crew
    return render_to_response('event.html', context) 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:12:38.307

您传递给模板的变量是`current_user`，而不是`current_user_is_not_crew`。

您的模板 if 块应该引用`current_user`.

# java - While循环构造

> ID：12082623
> 
> 赞同：-1
> 
> 时间：2012-08-22T23:10:53.447
> 
> 标签：java, while-loop

你能解释一下吗？我查看了这个网站的数据

[http://www.d.umn.edu/~gshute/java/statements.html](http://www.d.umn.edu/~gshute/java/statements.html)

```
while (boolean-expression) {
    nested-statements
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:16:00.267

“布尔表达式”是返回布尔值（`true`或`false`）的表达式。术语“嵌套语句”是指 while 循环内的语句。

例如：

```
int x = 10;
while (x > 0) { // x > 0 is an expression with a boolean result
   System.out.println(x); // nested statement 1
   x--;                   // nested statement 2
} 
```

（这将打印 10, 9 .. 1 到控制台）。

# javascript - Javascript将所有文本框值更改为连字符

> ID：12082629
> 
> 赞同：1
> 
> 时间：2012-08-22T23:11:28.090
> 
> 标签：javascript

只是想知道我应该在函数 insertDash(){ 之后放置什么以在所有文本框中放置一个连字符。有二十八个文本框。好像如果我尝试： Document.GetElementByName("bsu").value="-"; 它不起作用。还有其他建议吗？

```
<form name='table1' method='post' action='u.php'>
        <script language='javascript'>
            function insertDash(){

            }
        </script>
        <table name='hworld' border="1" bordercolor='black'>
            <tr><th></th>
                <th>Sunday</th>
                <th>Monday</th>
                <th>Tuesday</th>
                    <th>Wednesday</th>
                <th>Thursday</th>
                <th>Friday</th>
                <th>Saturday</th>
            </tr>
            <tr>
                <th>Breakfast</th>
                <th><input tabindex='1' type='text' name='bsu' id ="bsu" /></th>
                <th><input tabindex='5' type='text' name='bmo' /></th>
                <th><input tabindex='9' type='text' name='btu' /></th>
                <th><input tabindex='13' type='text' name='bwe' /></th>
                <th><input tabindex='17' type='text' name='bth' /></th>
                <th><input tabindex='21' type='text' name='bfr' /></th>
                <th><input tabindex='25' type='text' name='bsa' /></th>
            </tr>
                <tr>
                <th>Lunch</th>
                <th><input tabindex='2' type='text' name='lsu' /></th>
                <th><input tabindex='6' type='text' name='lmo' /></th>
                <th><input tabindex='10' type='text' name='ltu' /></th>
                <th><input tabindex='14' type='text' name='lwe' /></th>
                <th><input tabindex='18' type='text' name='lth' /></th>
                <th><input tabindex='22' type='text' name='lfr' /></th>
                <th><input tabindex='26' type='text' name='lsa' /></th>
            </tr>
            <tr>
                <th>Dinner</th>
                <th><input tabindex='3' type='text' name='dsu' /></th>
                <th><input tabindex='7' type='text' name='dmo' /></th>
                <th><input tabindex='11' type='text' name='dtu' /></th>
                <th><input tabindex='15' type='text' name='dwe' /></th>
                <th><input tabindex='19' type='text' name='dth' /></th>
                <th><input tabindex='23' type='text' name='dfr' /></th>
                <th><input tabindex='27' type='text' name='dsa' /></th>
            </tr>
            <tr>
                <th>Snack</th>
                <th><input tabindex='4' type='text' name='ssu' /></th>
                <th><input tabindex='8' type='text' name='smo' /></th>
                <th><input tabindex='12' type='text' name='stu' /></th>
                <th><input tabindex='16' type='text' name='swe' /></th>
                <th><input tabindex='20' type='text' name='sth' /></th>
                <th><input tabindex='24' type='text' name='sfr' /></th>
                <th><input tabindex='28' type='text' name='ssa' /></th>
            </tr>
        </table>
        <input type='submit' value='Submit'>
        <input type='button' value='---' onclick="insertDash()">
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:21:18.870

如果你可以使用 jQuery，你可以这样做：

```
function insertDash() {
    $('input[type=text]').val('-');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:15:33.373

用于[`getElementsByName`](http://www.w3schools.com/jsref/met_doc_getelementsbyname.asp)更改具有给定名称的输入的值：

```
document.getElementsByName("bsu")[0].value = "-"; 
```

用于[`getElementsByTagName`](http://www.w3schools.com/dom/met_document_getelementsbytagname.asp)更改*所有*文本输入的值：

```
function insertDash() {
    var elements = document.getElementsByTagName("input");
    for (var i = 0; i < elements.length; i++) {
        if (elements[i].type == "text") {
          elements[i].value = "-";
        }
    }
} 
```

**[演示](http://jsfiddle.net/St3wR/)**。

# python - 替换文本文件中的单词并将其写入python中的新文件

> ID：12082631
> 
> 赞同：1
> 
> 时间：2012-08-22T23:11:47.527
> 
> 标签：python, text, line

所以我有一个包含以下内容的文本文件：

```
NUM,123
FRUIT
DRINK
FOOD,BACON
CAR
NUM,456
FRUIT
DRINK
FOOD,BURGER
CAR
NUM,789
FRUIT
DRINK
FOOD,SAUSAGE
CAR 
```

我用“PIZZA”代替“BURGER”这个词

```
with open('input.txt','r') as f:
    data = f.readlines()
    for i, line in enumerate(data):
        if '456' in line:
            field = ','.join(data[i+3].split(',')[1])
            field = field.replace(field,'PIZZA') 
```

如何将所有内容写回新文件，以便在新文件中具有：

```
NUM,123
FRUIT
DRINK
FOOD,BACON
CAR
NUM,456
FRUIT
DRINK
FOOD,PIZZA
CAR
NUM,789
FRUIT
DRINK
FOOD,SAUSAGE
CAR 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:21:07.647

您非常接近，请尝试以下操作：

```
with open('input.txt','r') as f:
    data = f.readlines()

with open('output.txt','w') as f:
    for i, line in enumerate(data):
        if '456' in line:
            fields = data[i+3].split(',')
            fields[-1] = 'PIZZA\n'
            data[i+3] = ','.join(fields)
        f.write(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:23:22.827

这适用于您已有的代码。它只是添加一行来更新您的数据，然后将其全部写入文件的代码：

```
# read the data
with open('data.txt') as f:
    data = f.readlines()

# process data
for i, line in enumerate(data):
    if "456" in line:
        field = ','.join(data[i+3].split(',')[1])
        field = field.replace(field,'PIZZA')
        data[i+3] = '{},{}\n'.format(data[i+3].split(',')[0],field) # added 

# write data to file
with open('result.txt', 'w') as outfp: # to write out data 
    outfp.write(''.join(data)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:16:55.367

以追加模式打开文件并替换单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T02:06:44.633

此解决方案更安全一些，因为如果一行后的字段少于三个，它不会中断`'456'`。它还避免了创建中间列表，只是将每个输入行直接写入输出文件。

```
with open('output.txt', 'w') as outfile:
    with open('input.txt', 'r') as infile:
        index = -1
        for line in infile:
            if index >= 0:
                index += 1
                if index == 3:
                    line = '%s,PIZZA\n' % line.rstrip().split(',')[0]
                    index = -1
            elif '456' in line:
                index = 0
            outfile.write(line) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T09:22:47.957

好吧，如果您只是用另一个字符串替换一个字符串，为什么要逐行处理？像这样的东西应该工作：

```
with open('input.txt', 'r') as f:
    with open('output.txt', 'w') as target:
        target.write(f.readline().replace("BURGER","PIZZA")) 
```

# java-native-interface - JNI 及其链接的库

> ID：12082635
> 
> 赞同：1
> 
> 时间：2012-08-22T23:12:25.663
> 
> 标签：java-native-interface

我搜索但没有找到这个“问题”的答案。基本上，通常需要包含 jni.h 头文件才能访问 jni 函数，但头文件主要包含函数原型和结构声明，因此我们要么包含解析函数的源代码，要么包含静态或动态库（目前还没有找到） ) 所以链接器可以解析函数原型声明。

到目前为止，我已经使用 Android NDK 构建了一个原生库，我所做的只是包含 jni.h 头文件以使用 jni 函数，但即使在 Oracle 的文档和示例中，他们所做的只是包含 jni.h 头文件并指定包含目录到编译器，那么编译器如何找到实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:38:20.297

> 编译器如何找到实现？

编译器不必找到实现，JVM 会动态地告诉你它们在哪里：

`JNIEnv`是 struct 的 typedef `JNIEnv_`。该结构包含一个`const struct JNINativeInterface_*`被调用的`functions`方法和许多方法。如果您查看[JNI 文档](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html)，您会注意到大多数方法都有 a`JNIEnv*`作为它们的第一个参数，但是您使用 来调用它们`env->method(...)`，而没有`JNIEnv*`参数。文档中的方法是实际方法，指向它们的指针`functions`位于`JNIEnv_`. 中的方法`JNIEnv_`是简单地调用中的方法指针的包装器`functions`。每当 JVM 创建 a`JNIEnv_`和对应的`JNINativeInterface_`时，它都会动态写入所有方法地址。

# cocoa - NSArrayController：如何以编程方式清除选择？

> ID：12082639
> 
> 赞同：4
> 
> 时间：2012-08-22T23:12:44.250
> 
> 标签：cocoa, binding, nsarraycontroller

让我发疯的非常简单的问题：以编程方式清除 NSArrayController 选择的正确方法是什么？

我正在设计一个包含以下组件的视图：

*   NSArrayController *controller1：绑定到对象数组
*   NSPopUpView view1：绑定到controller1.arrangedObjects的内容；绑定到 controller1.selection 的值；选择“插入空占位符”
*   NSArrayController *controller2：绑定到存储在controller1.selection中的数组
*   NSPopupView view2：绑定到controller2.arrangedObjects的内容；绑定到 controller2.selection 的值；选择“插入空占位符”

最初，view1 的内容被填充；controller1 和 controller2 的选择值为零；并且 view1 和 view2 显示空占位符。选择控制器 1 会导致控制器 1 的选择发生变化并填充视图 2 的内容。都好。

我想实现一个清除按钮来清除控制器 1 的选择，由于绑定，它还应该清除控制器 2 的选择并将 view1 和 view2 重置为空占位符。对于我的生活，我无法为这个非常简单的功能找出正确的代码。更改控制器 1 的选择无法更新 view1 中显示的值。更糟糕的是，以编程方式更改控制器 1 的选择会导致控制器 2 中发生奇怪的事情：视图 1 中值的进一步选择无法对视图 2 产生任何影响。

我尝试过的事情：

*   使用 [NSArray new] 调用 controller1 的 SetSelectedObjects 方法。

*   使用 null 调用 controller1 的 SetSelectedObjects 方法。

*   使用 NSNotFound 调用 controller1 的 SetSelectedIndex 方法。

*   使用 controller1 的 SelectedIndex 属性调用 controller1 的 RemoveSelectedIndex 方法。

*   在 Cocoa NSArrayController 文档中查找任何用于清除选择值的类方法或建议。那里什么都没有——甚至没有提到这是可取的，更不用说如何实现它了。

有任何想法吗？谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-21T18:18:54.650

根据[Apples Developer 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSArrayController_Class/index.html#//apple_ref/occ/instm/NSArrayController/setSelectionIndexes:)，这可以使用 setSelectionIndexes 来完成：

> 要取消选择所有索引，请传递一个空索引集。

目标-C：

`[arrayController setSelectionIndexes:[NSIndexSet indexSet]];`

迅速：

`arrayController.setSelectionIndexes( NSIndexSet() )`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T04:55:56.983

试试 controller1.selectionIndex = NSIntegerMax; 看看这是否有效。我做了一个简单的测试，标签绑定到数组控制器的选择，当我将 selectionIndex 设置为 NSIntegerMax 时，标签中显示了无选择占位符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T16:39:20.703

事实证明，NSArrayController 页面确实包含一个清除选择的建议：

> 设置选择索引：
> 
> 设置接收者的选择索引并返回一个布尔值，指示选择是否改变。
> 
> (BOOL) setSelectionIndexes: (NSIndexSet *) 索引
> 
> 讨论
> 
> 尝试更改选择可能会导致提交编辑消息失败，从而拒绝选择更改。
> 
> 要选择所有接收者的对象，索引应该是索引为 [0...count -1] 的索引集。**要取消选择所有索引，请传递一个空索引集。**

但是，我实际上已经尝试过，它仍然给我留下了一个问题。

概括：

*   创建两个类，A 和 B，其中 A 包含一个属性“NSArray *b_list”，其中包含 B 的实例列表。

*   创建一个具有“NSArray *a_list”属性的应用程序。用一些 A 实例填充它，并用一些 B 实例填充每个 A 实例的 b_list。

*   创建一个包含两个数组控制器的窗口，Controller_A（绑定到 a_list）和 Controller_B（绑定到 Controller_A.selection.b_list）。

*   在窗口中创建两个弹出按钮，Popup_A（绑定到Controller_A.arrangedObjects）和Popup_B（绑定到Controller_B.arrangedObjects）。

*   使用一些逻辑创建一个“清除”按钮以清除对 Controller_A 的选择。（“某些逻辑”是 Apple 文档中推荐的方法，或任何其他方法。）

*   运行应用程序。在 Popup_A 中选择一个条目。请注意，Popup_B 填充了 Controller_A.selection.b_list 的实例，正如它应该的那样。

*   现在点击清除按钮。

错误：请注意，虽然 Popup_A 的内容和选择正确地变为空，但在 Popup_B 中不会发生同样的情况：它显示一个带有单个选定（空白）项目的空白条目。另请注意，Controller_B 的选择属性表示存在选择，但它的属性很奇怪：selectedIndex 指向 0 而不是 NSNotFound，并且 selectedIndexes 包含一个非空的选择整数范围。

这显然是绑定逻辑的错误，肯定会导致一些异常和逻辑错误。例如，如果有任何类型的绑定附加到 B_controller.selection，清除 A_controller 将引发与 B_controller 中的选择值相关的异常，因为它指示选择但指向垃圾。

我的解决方法是不要将任何内容直接绑定到 B_controller 选择。相反，以编程方式访问 B_controller，并鉴于 A_controller 的选择值，如下所示：

```
// setting some property c to the value of b_controller:
if ((B_controller.selectedIndex == NSNotFound) || A_controller.selectedIndex == NSNotFound))
    c = nil;
else
    c = [B_controller objectAtIndex: [B_controller.selectedIndex]]; 
```

我还将使用此信息向 Apple 提交错误报告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-04T07:17:39.330

回答一个非常古老的问题，但仍然如此。

我只需要同样的东西，对我来说这很有效：

```
[arrayController setAvoidsEmptySelection:NO];
NSIndexSet *indexes = [NSIndexSet indexSetWithIndexesInRange:
    NSMakeRange(NSNotFound, 0)];
[arrayController setSelectionIndexes:indexes]; 
```

# backbone.js - 如何在单页应用程序中处理非根 URL？

> ID：12082643
> 
> 赞同：6
> 
> 时间：2012-08-22T23:13:11.863
> 
> 标签：backbone.js, routing, ruby-on-rails-3.2, singlepage

我尝试使用 Rails 3.2 和 Backbone.js 使用 pushState 选项制作单页应用程序，但遇到了一些我不理解的问题。

如果我加载应用程序的根 URL (/)，一切正常：Rails 返回一个带有 JS 的 HTML 布局，它引导 Backbone，它为 JSON 实体生成一些 XHR 并呈现内容。

但是，如果我从*非根 URL*开始使用应用程序（例如，通过在浏览器的地址栏中手动键入它），那么 Rails 将尝试使用来自 routes.rb 的路由规则来处理此请求 - 这是错误的，因为它是“主干”路由. 在这种情况下，如何加载页面和引导 Backbone 以处理此 URL？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T21:25:18.970

最后我找到了解决方案。

我将以下代码放入我的 routes.rb

```
class XHRConstraint
  def matches?(request)
    !request.xhr? && !(request.url =~ /\.json$/ && ::Rails.env == 'development')
  end
end

match '(*url)' => 'home#index', :constraints => XHRConstraint.new 
```

使用这个匹配器，所有非 XHR 请求都被路由到返回 HTML 页面的 HomeController。XHR 请求将由返回 JSON 响应的其他控制器处理。此外，我还保留了以“.json”结尾的请求在开发环境中有效以进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:19:26.200

这是一个有点棘手的问题，但基本上简而言之，您需要使用相同（根）页面响应 rails 中的所有有效（HTML）请求，从那里主干将接管并路由到正确的路由处理程序（在您的bakckbone 路由器）。

我在这里更详细地讨论了这个问题：[rails andbone work together](https://stackoverflow.com/questions/11918586/rails-and-backbone-working-together/11922573#11922573)

基本上我所做的是为我想要处理的每个页面和空白视图创建操作。我`respond_with`用来返回页面（在每种情况下都是相同的），并且因为我*只*处理 HTML 请求的 GET 操作，所以我在控制器的顶部添加了这一行：

```
respond_to :html, :only => [ :show, :new ] 
```

JSON 请求也被处理`respond_with`，但与 HTML 请求不同，它实际上返回请求的资源（并在`PUT`,`POST`和的情况下执行请求的操作`DELETE`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T11:00:14.273

如果您手动进行，Backbone 将不会被告知您的 url 更改。此更改将被浏览器捕获，并且它将像往常一样将请求发送到服务器。

同样，如果您单击普通*链接*，它将在`href`不通知 Backbone 的情况下跟随它。

如果您希望 Backbone 负责更改 url，您必须通过可用的 Backbone 工具来完成，这是自己的路由器。

因此，如果您想以 Backbone 方式更改 URL，您必须明确地进行，例如：

```
app.router.navigate("my/route", {trigger: true}); 
```

# php - Websocket 收不到消息

> ID：12082645
> 
> 赞同：0
> 
> 时间：2012-08-22T23:13:19.297
> 
> 标签：php, javascript, sockets, websocket

**服务器端：**

```
<?php
  $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
  socket_bind($socket, '127.0.0.1', 8000);
  socket_listen($socket);
  $client = socket_accept($socket);
  $handshake = socket_read($client, 1024);
  preg_match('/Sec-WebSocket-Key\: (.+?)\r\n/', $handshake, $accept);
  $accept = base64_encode(sha1("$accept[1]258EAFA5-E914-47DA-95CA-C5AB0DC85B11", true));
  $handshake = "HTTP/1.1 101 Switching Protocols\r\n";
  $handshake .= "Upgrade: websocket\r\n";
  $handshake .= "Connection: Upgrade\r\n";
  $handshake .= "Sec-WebSocket-Accept: $accept\r\n\r\n";
  socket_write($client, $handshake.chr(0), strlen($handshake.chr(0)));
  socket_write($client, 's'.chr(0));
  sleep(5);
  socket_close($client);
  socket_close($socket);
?> 
```

**客户端：**

```
<div id="output"></div>
<script>
    if ("WebSocket" in window) {
        var socket = new WebSocket('ws://127.0.0.1:8000');
        socket.onopen = function() {
            document.getElementById('output').innerHTML += 'socket open<br />';
        }
        socket.onmessage = function(msg) {
            document.getElementById('output').innerHTML += 'new msg: '+msg.data+'<br />';
        }
        socket.onclose = function() {
            document.getElementById('output').innerHTML += 'socket close';
        }
    }
</script> 
```

我得到“socket open”，5秒后“socket close”。我没有收到服务器发送的“s”。
在 Firefox 和 Chrome 上试过。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:32:14.693

客户端和服务器之间的消息不是纯文本。有关如何编码/解码消息的详细信息，请参阅协议规范的[数据帧部分。](https://www.rfc-editor.org/rfc/rfc6455#section-5)

[其他 SO 问题（例如此处](https://stackoverflow.com/questions/10805023/websocket-client-doesnt-receive-data)）中有很多代码片段可能有助于您入门。

# c# - 报告查看器在发布后不显示任何数据

> ID：12082646
> 
> 赞同：1
> 
> 时间：2012-08-22T23:13:19.850
> 
> 标签：c#, sql-server-ce

您好，我正在使用 C# 2010 和 sql server compact edition 3.5 来构建我的数据库，我使用报告向导从我的数据库生成报告，但不幸的是，在我发布应用程序后，我的报告查看器没有显示任何内容，即使我有插入了一条新记录。这是我在报表查看器上简单显示数据的代码：

```
this.jadwalkuliahTableAdapter.Fill(this.Dataset.jadwalkuliah);

        this.reportViewer1.RefreshReport(); 
```

注意：报告查看器在调试过程中显示来自我的数据库的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:09:33.550

您缺少的 ReportDataSource：

```
this.reportViewer.LocalReport.DataSources.Clear(); 
DataTable dt = new DataTable(); 
dt = this.inputValuesTableAdapter.GetData();     

Microsoft.Reporting.WinForms.ReportDataSource rprtDTSource = new Microsoft.Reporting.WinForms.ReportDataSource(dt.TableName, dt); 

this.reportViewer.LocalReport.DataSources.Add(rprtDTSource); 
this.reportViewer.RefreshReport(); 
```

检查以下网站：

[如何将数据表加载为 ReportDataSource？所以](https://stackoverflow.com/questions/4004307/how-can-i-load-datatable-as-reportdatasource)

[使用 ReportViewer c-sharp 从数据集构建报表](http://www.c-sharpcorner.com/UploadFile/mahesh/DataSetReports04252007100945AM/DataSetReports.aspx)

[在 C# 中动态创建数据集并传递给 Report Viewer.. asp.net 论坛](http://forums.asp.net/p/1681823/4948182.aspx/1?Re%20Creating%20Dataset%20Dynamically%20in%20c%20and%20passing%20to%20Report%20Viewer%20)

此致

# c# - 使用 Linq to Entities 和 XSD 创建嵌套 XML 文档

> ID：12082655
> 
> 赞同：1
> 
> 时间：2012-08-22T23:14:37.713
> 
> 标签：c#, xml, linq, xsd, entities

我正在尝试使用 Linq to Entities 从 SQL 数据源创建 XML 文档。我使用 XSD 为 XML 文档创建类。XML结构如下（部分列举）：

```
<?xml version="1.0" encoding="UTF-8"?>
<ExecutedShipment>
   <ExecutedShipmentIdentifier>098098</ExecutedShipmentIdentifier>
   <ShipDirection>Outbound</ShipDirection>
   <FreightTerms>Pre-Paid</FreightTerms>
   <CarrierSCAC>SEFL</CarrierSCAC>
   <EquipmentType>LTL</EquipmentType>
   <CarrierTrackingNumber>100283534</CarrierTrackingNumber>
   <LoadList>
      <Load>
         <ExecutedLoadIdentifier>098098</ExecutedLoadIdentifier>
         <Schedule>
            <ActualShipDate timezone="EST">2004-03-19T15:35:00</ActualShipDate>
         </Schedule>
         <PickupSequenceNumber>1</PickupSequenceNumber>
         <DropoffSequenceNumber>1</DropoffSequenceNumber>
         <ShipFrom>
            <SiteIdentifier>123456</SiteIdentifier>
         <FullName>ABC Inc.</FullName>
             <Location>
               <Address1>354 Main Street</Address1>
               <Postal>01234</Postal>
               <Country>US</Country>
            </Location>
        </ShipFrom> 
```

这是我用来填充类的代码，以便我可以将其序列化为 XML 文件：

```
 List<ExecutedShipment> Shipments = new List<ExecutedShipment>();

    Shipments = (
                from sh in ShipData.shiphead
                where sh.shipdate >= Yesterday && sh.shipdate <= Yesterday
                select new ExecutedShipment
                {
                    ExecutedShipmentIdentifier = SqlFunctions.StringConvert((double)sh.packnum),
                    ShipDirection = "Outbound",
                    FreightTerms = "Pre-Paid",
                    CarrierSCAC = sh.shipviacode,
                    EquipmentType = "LTL",
                    CarrierTrackingNumber = sh.trackingnumber,
                    LoadList = new ExecutedShipmentLoadListLoad
                               { 
                                   ExecutedLoadIdentifier = SqlFunctions.StringConvert((double)sh.packnum),
                                   DropoffSequenceNumber = "TEST"
                                   //Schedule = (new ExecutedShipmentLoadListLoadScheduleActualShipDate
                                   //           {
                                   //               timezone = "EST",
                                   //               Value = "0000-00-00"  //sh.shipdate
                                   //           }).ToArray()
                               }

                }).ToList<ExecutedShipment>(); 
```

代码的第一部分工作正常。当我到达“LoadList”时，我遇到了问题。在 Visual Studio 中，“新的 ExecutedShipmentLoadListLoad”带有红色下划线，错误是无法将类型“ExecutedShipmentLoadListLoad”隐式转换为“ExecutedShipmentLoadListLoad[]”。'LoadList' 是一个数组，但我没有尝试将其转换为相同类型的数组。那么，一般来说，您如何引用 XSD 生成的类中的子元素并为其赋值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:39:20.737

您只需创建一个数组并将实例放入数组声明中，如下所示：

```
// Start array declaration.
LoadList = new [] {

    // First element.
    new ExecutedShipmentLoadListLoad { 
        ExecutedLoadIdentifier = SqlFunctions.StringConvert((double)sh.packnum),
        DropoffSequenceNumber = "TEST"
        //Schedule = (new ExecutedShipmentLoadListLoadScheduleActualShipDate
        //           {
        //               timezone = "EST",
        //               Value = "0000-00-00"  //sh.shipdate
        //           }).ToArray()
    }

    // Other elements here.

// End array declaration
} 
```

# javascript - 有什么方法或技巧可以将溢出的可见内容设置为隐藏在javascript css中？

> ID：12082657
> 
> 赞同：0
> 
> 时间：2012-08-22T23:15:00.507
> 
> 标签：javascript, iframe, overflow, hidden

我在iframe 周围使用*div并将溢出设置为隐藏在**div*的 css 内容被剪裁。

我想知道，有没有办法只获得可见的内容？

这是代码：

```
 <div class="problemBox">
      <iframe id="problem" src="child.html"></iframe>
  </div>

<style>
  .problemBox {
    width: 300px;
    height: 300px;
    overflow: hidden;
  }
  .problemBox iframe {
    width: 100%;
    height: 100%;
  }
</style> 
```

# java - Weblogic 服务器上的所有应用程序

> ID：12082658
> 
> 赞同：0
> 
> 时间：2012-08-22T23:15:18.327
> 
> 标签：java, web-applications, weblogic, weblogic-10.x, wlst

> **可能重复：**
> [通过 Java Web 应用程序查找在 WebLogic 服务器上运行的所有应用程序的名称](https://stackoverflow.com/questions/12081341/find-name-of-all-application-running-on-a-weblogic-server-through-a-java-web-app)

我正在编写一个 Java Web 应用程序，它需要知道在将部署该应用程序的同一服务器上运行的所有应用程序的名称。

也许我可以将 WLST 与 java 结合使用？

有任何想法吗？

谢谢， Shehryar Farooq

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:00:19.113

> JMX 就是这个问题的答案。[请在此处](https://stackoverflow.com/questions/12081341/find-name-of-all-application-running-on-a-weblogic-server-through-a-java-web-app)查看答案

# android - 带有 ListAdapter 的 Android ListView，需要始终有一个选中的条目

> ID：12082659
> 
> 赞同：0
> 
> 时间：2012-08-22T23:15:24.243
> 
> 标签：android, listview, highlight, listadapter, selected

我有一个 ListView (lvProperties)，其适配器是自定义 ListAdapter（不是 ArrayAdapter）。该适配器从自定义类型 Section 的实例变量中获取数据（包含一些字符串、整数、数组列表和方法）。

我需要这个列表来始终显示选择（必须始终有一个选定的元素，即使在活动启动时也是如此）。

在过去使用简单的 ArrayAdapter 时，这样的事情就足够了：

```
lvProperties.requestFocus();
lvProperties.setSelection(0); 
```

但是，在这种情况下，它根本不起作用。我一直在寻找 SO 和网络并使用：

```
lvProperties.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
lvProperties.setFocusable(true);            
lvProperties.setFocusableInTouchMode(true);
lvProperties.requestFocus();
lvProperties.setSelection(0); 
```

仍然一无所有。

我的列表适配器：

```
 lvProperties.setAdapter(new ListAdapter() {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
                View v=convertView;

                if(v==null) {
                    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v=vi.inflate(R.layout.detail_row1, null);
                }

                TextView name=(TextView)v.findViewById(R.id.propName);
                TextView value=(TextView)v.findViewById(R.id.propValue);

                if(name!=null) {
                    name.setText(section.propNames.get(position));
                }
                if(value!=null) {
                value.setText(section.propValues.get(position));
                }

                return v;
            }

        @Override
        public void unregisterDataSetObserver(DataSetObserver observer) {}

        @Override
        public void registerDataSetObserver(DataSetObserver observer) {}

        @Override
        public boolean isEmpty() {
            return false;
        }

        @Override
        public boolean hasStableIds() {
            return false;
        }

        @Override
        public int getViewTypeCount() {
            return 2;
        }

        @Override
        public int getItemViewType(int position) {
            return 0;
        }

        @Override
        public long getItemId(int position) {
            return 0;
        }

        @Override
        public Object getItem(int position) {
            return null;
        }

        @Override
        public int getCount() {
            return section.propNames.size();
        }

        @Override
        public boolean isEnabled(int position) {
            return true;
        }

        @Override
        public boolean areAllItemsEnabled() {
            return true;
        }
    }); 
```

我未实现的 OnItemSelectedListener：

```
 lvProperties.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

还有我的 detail_row1.xml（接下来我将实现行的布局，但现在是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:orientation="horizontal" 
  android:layout_height="wrap_content"
  android:padding="6dip"
  >

  <TextView
    android:id="@+id/propName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
    android:layout_weight="1"    
    android:textSize="16sp"
    android:textStyle="bold" 
    android:textColor="#000000"
    android:gravity="center_vertical|left"
    android:paddingTop="10sp"
    android:paddingBottom="10sp"
    android:paddingLeft="4sp"
     />

  <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:id="@+id/propValue"       
    android:textColor="#000000"
    android:textSize="16sp"
    android:textStyle="bold"
    android:paddingTop="10sp"
    android:paddingBottom="10sp"
    android:paddingRight="4sp"
    android:gravity="center_vertical|right"
    />  

</LinearLayout><?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:orientation="horizontal" 
  android:layout_height="wrap_content"
  android:padding="6dip"
  >

  <TextView
    android:id="@+id/propName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
    android:layout_weight="1"    
    android:textSize="16sp"
    android:textStyle="bold" 
    android:textColor="#000000"
    android:gravity="center_vertical|left"
    android:paddingTop="10sp"
    android:paddingBottom="10sp"
    android:paddingLeft="4sp"
    />

  <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:id="@+id/propValue"       
    android:textColor="#000000"
    android:textSize="16sp"
    android:textStyle="bold"
    android:paddingTop="10sp"
    android:paddingBottom="10sp"
    android:paddingRight="4sp"
    android:gravity="center_vertical|right"
    />  

</LinearLayout> 
```

任何帮助/指针来指导如何做到这一点？我不想使用可绘制对象，只是我正在使用的主题的默认选择器。

同样，列表中必须始终有一个选定的条目。

我意识到，通过设计，这不是列表的预期行为，但这是一种尺寸不适合所有人的情况之一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:15:43.667

对于所有其他感兴趣的人，我只是复制了我需要的东西，不得不弄乱 ChoiceMode、requestFocus、setSelection 等等等等，在 API 8 以上工作得很好

当应用程序启动时，我希望第一行已经突出显示：

selectedItem.setValue(0) // 我有一个内部类，也可以是一个简单的整数

我的内部类 ArrayDapter（我需要它来一直看到父 selectedItem）：

注意：接下来我将更改硬编码颜色，我刚刚解决了我遇到的问题：

```
public class DetailsAdapter extends ArrayAdapter<Section> {

    public Section section;
    public View v;
    public Context c;

    public DetailsAdapter(Context context, int textViewResourceId,
            Section s) {
        super(context, textViewResourceId);

        this.section=s;

        this.c=context;

    }

    @Override
    public int getCount() {
        return section.propNames.size();
    }

    @Override
    public View getView(int pos, View convertView, ViewGroup parent){
        this.v = convertView;

        LayoutInflater vi = (LayoutInflater)c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if(v==null) {     
            v=vi.inflate(R.layout.detail_row1, null); 
        }

        **LinearLayout llc=(LinearLayout) v.findViewById(R.id.detail_container);**
        TextView name=(TextView)v.findViewById(R.id.propName);
        TextView value=(TextView)v.findViewById(R.id.propValue);
        if(pos==selectedItem.value) {
           llc.setBackgroundColor(Color.LTGRAY);
        } else
        { llc.setBackgroundColor(Color.WHITE);}
        Log.e("Pos",""+pos);

        if(llc!=null) {

        }

        if(name!=null) {

            name.setText(section.namesAsArray()[pos]);
        }
        if(value!=null) {
            value.setText(section.valuesAsArray()[pos]);
        }

        return v;

    }
} 
```

我可以避免在我的 XML 文件中使用 android:state_xxxxxxx 的技巧是用一个嵌套的 LinearLayout 填充我的自定义行来填充外部行。

该行的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:orientation="horizontal" 
android:layout_height="wrap_content"
android:id="@+id/detail_linearLayout"
>

<LinearLayout 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:layout_weight="0"
   android:id="@+id/detail_container"
     android:padding="6dip"
   >

<TextView 
android:id="@+id/propName"
android:layout_width="wrap_content"
android:layout_height="wrap_content"   
android:layout_weight="1"    
android:textSize="16sp"
android:textStyle="bold" 
android:textColor="#000000"
android:gravity="center_vertical|left"
android:paddingTop="10sp"
android:paddingBottom="10sp"
android:paddingLeft="4sp"
/>

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="2"
android:id="@+id/propValue"       
android:textColor="#000000"
android:textSize="16sp"
android:textStyle="bold"
android:paddingTop="10sp"
android:paddingBottom="10sp"
android:paddingRight="4sp"
android:gravity="center_vertical|right"
/>  

</LinearLayout>
</LinearLayout> 
```

最后，我设置了我的 OnItemClickListener：

```
 lvProperties.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

                **selectedItem.value=arg2;
                lvProperties.invalidateViews();**
                        .
                                    .
                                    .
                     }}); 
```

完成了！

# java - 简单游戏的背景图片？

> ID：12082660
> 
> 赞同：5
> 
> 时间：2012-08-22T23:15:25.200
> 
> 标签：java, image, swing, background-image

我一直在关注[*Java Game Programming for Beginners*](http://www.youtube.com/playlist?list=PL6E90696571998DC2)教程系列，并希望通过应用背景图像来进行实验。不幸的是，当我通过该`paintComponent`方法渲染它时，它会随着我的精灵移动（尽管连续一个单位而不是五个）；当我通过paint方法渲染它时，我得到一个奇怪的闪烁框，它与`setBackground (color)`属性中指定的颜色相匹配，`JFrame`并且它与精灵一起移动，与前一个实例的精灵相同（在 内`paintComponent`）。

我如何编码图像以保持静态，作为背景应该是？

代码：

```
public class JavaGame extends JFrame{

int x, y;
private Image dbImage;
private Graphics dbg;
Image ghost;
Image bg;

public class AL extends KeyAdapter{
    public void keyPressed(KeyEvent e){
        int keyCode = e.getKeyCode();

        if(keyCode == e.VK_LEFT){
            if(x <= 8)
                x = 8;
            else
                x += -5;
        }
        if(keyCode == e.VK_RIGHT){
            if(x >= 235)
                x = 235;
            else
                x += +5;
        }
        if(keyCode == e.VK_UP){
            if(y <= 18)
                y = 18;
            else
                y += -5;
        }
        if(keyCode == e.VK_DOWN){
            if(y >= 235)
                y = 235;
            else
                y += +5;
        }
    }
    public void keyReleased(KeyEvent e){

    }

}

public JavaGame(){
    //Load images
    ImageIcon i = new ImageIcon("C:/Users/Taylor/workspace/Java game/src/ghost.png");
    ghost = i.getImage();

    ImageIcon j = new ImageIcon("C:/Users/Taylor/workspace/Java game/src/bg.png");
    bg = j.getImage();

    //Game properties
    addKeyListener(new AL());
    setTitle("Java Game");
    setSize(500, 500);
    setResizable(false);
    setVisible(true);
    setBackground(Color.GRAY);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    x = 150;
    y = 150;
}

public void paint(Graphics g){
    g.drawImage(bg, 0, 0, null);

    dbImage = createImage(getWidth(), getHeight());
    dbg = dbImage.getGraphics();
    paintComponent(dbg);
    g.drawImage(dbImage, x, y, this);
}

public void paintComponent(Graphics g){
    g.setColor(Color.WHITE);
    g.drawImage(ghost, x, y, this);

    repaint();
}

public static void main(String[] args) {
    new JavaGame();

} 
```

图片：

![通过“绘画”渲染](../Images/858469882b37e422bc23d612a7f2de08.png) ![通过“paintComponent”渲染](../Images/6ff28e625d4d4c0d786c5173cb4b98a5.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T00:51:25.823

您是否随机复制/粘贴代码？这就是它的样子。该代码有很多奇怪的方面，我没有将它们全部记录下来（也许是一个很好的代码审查）。该示例使用异步方法加载图像（为了获取动画图像，动画）。用于`ImageIO.read(URL)`以同步方式加载静态图像。

以下是一些简短的提示：

1.  当它被部署时，图像可能会成为嵌入式资源，并且不会被`File`对象访问。将它们添加到运行时类路径并通过 URL 访问它们。
2.  Swing GUI 应该在 EDT 上启动和更改（参见对 的更改`main()`）。
3.  始终在方法开始时调用`super.paint(g);`（或`paintComponent(g)`）。
4.  不要扩展框架，不要绘制到顶级组件。而是扩展面板并覆盖`paintComponent()`. 将面板添加到框架中。

## 代码

```
import java.awt.*;
import java.awt.event.*;
import java.net.URL;
import javax.swing.*;

public class JavaGame extends JPanel {

    int x, y;
    private Image dbImage;
    private Graphics dbg;
    Image ghost;
    Image bg;

    public class AL extends KeyAdapter {
        public void keyPressed(KeyEvent e) {
            int keyCode = e.getKeyCode();

            if (keyCode == e.VK_LEFT) {
                if (x <= 8)
                    x = 8;
                else
                    x += -5;
            }
            if (keyCode == e.VK_RIGHT) {
                if (x >= 235)
                    x = 235;
                else
                    x += +5;
            }
            if (keyCode == e.VK_UP) {
                if (y <= 18)
                    y = 18;
                else
                    y += -5;
            }
            if (keyCode == e.VK_DOWN) {
                if (y >= 235)
                    y = 235;
                else
                    y += +5;
            }
        }

        public void keyReleased(KeyEvent e) {
        }
    }

    public JavaGame() throws Exception {
        // Load images
        //ImageIcon i = new ImageIcon(
            //  "C:/Users/Taylor/workspace/Java game/src/ghost.png");
        URL urlGhost = new URL("http://1point1c.org/gif/thum/plnttm.gif");
        ghost = Toolkit.getDefaultToolkit().createImage(urlGhost);

        //ImageIcon j = new ImageIcon(
            //  "C:/Users/Taylor/workspace/Java game/src/bg.png");
        URL urlBG = new URL("http://pscode.org/media/stromlo2.jpg");
        bg = Toolkit.getDefaultToolkit().createImage(urlBG);

        setFocusable(true);

        // Game properties
        addKeyListener(new AL());
        x = 150;
        y = 150;

        ActionListener al = new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                repaint();
            }
        };
        Timer timer = new Timer(50,al);
        timer.start();
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(bg, 0, 0, null);

        //dbImage = createImage(getWidth(), getHeight());
        //dbg = dbImage.getGraphics();
        //paintComponent(dbg);
        g.drawImage(dbImage, x, y, this);

        g.setColor(Color.WHITE);
        g.drawImage(ghost, x, y, this);

        //repaint();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    JFrame f = new JFrame("Java Game");
                    f.setSize(500, 500);
                    f.setResizable(false);
                    f.setVisible(true);
                    f.setBackground(Color.GRAY);
                    f.setContentPane(new JavaGame());
                    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

# objective-c - 你必须在 UIButton 上调用 removeTarget 吗？

> ID：12082663
> 
> 赞同：3
> 
> 时间：2012-08-22T23:15:35.650
> 
> 标签：objective-c, ios, uibutton, action, target

在我的应用程序中，我以编程方式创建了一堆 UIButton。现在，当我在用户点击按钮时添加一个动作时，我显然是 addTarget 。现在，当我离开这个视图时***，我应该还是应该***分别在每个 UIButton 上调用 removeTarget？

如果我不这样做，会有任何错误或挥之不去的副作用吗？如果我然后回到这个视图并在 UIButtons 上调用 addTarget，它会用新的目标覆盖当前目标还是会为一个按钮创建一堆目标？

我只是想知道，这样我就不会在没有问题的情况下向我的应用程序添加一堆不必要的代码行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:31:31.990

您不需要也不应该调用 removeTarget！您应该在 viewDidLoad 中创建您的 UIButtons 并在那里添加目标。当您离开视图并且视图被破坏时，按钮无论如何都应该被破坏。当您的视图停留在背景中并且您返回到它时，您的按钮仍然存在并且它们仍然具有目标。无需添加新的。

# silverlight - 如何将 ResourceDictionary 设置为 ContentControl.Content？

> ID：12082664
> 
> 赞同：0
> 
> 时间：2012-08-22T23:15:37.240
> 
> 标签：silverlight, xaml, styles, silverlight-5.0, resourcedictionary

在我的应用程序中，我有一个`ContentControl`，这显示了`Content`使用`DataTemplates`.

现在，我需要将它传递`DictionaryResource`给 content 属性。所以我做了这个（我不确定）

```
 <ContentControl Content="{Binding CurrentViewModel">
            <ContentControl.Resources>
                <ResourceDictionary Source="/MathematicsBusiness.Infrastructure;component/Resources/ThemeResources.xaml" />
            </ContentControl.Resources>
        </ContentControl> 
```

这包含我的字典：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="TextBlock">
        <Setter Property="FontSize" Value="40" />
        <Setter Property="FontFamily" Value="Georgia" />
    </Style>

    <!--<Style x:Key="TextBlockStyle" TargetType="TextBlock">
        <Setter Property="FontSize" Value="40" />
        <Setter Property="FontFamily" Value="Georgia" />
    </Style>-->
</ResourceDictionary> 
```

它有效，所有数据模板都显示具有该样式的文本块。但是如果我使用注释样式，它就不起作用。它给我一个错误：

> 找不到具有名称/键 TextBlockStyle 的资源

为什么会这样？如果样式没有键，它可以工作。但是如果我设置一个键，它就不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:55:24.463

如果您指定一个密钥而不使用它，它应该不是问题。我的猜测是您在其他地方调用 TextBlockStyle（可能是您的视觉状态或您的代码）。

如果您尝试使用密钥，但您没有在 xaml.xml 中指定它，通常会发生您遇到的错误。

其他可能的原因是您尝试使用 ContentControl 之外的密钥。

# ruby-on-rails - Rails 没有在 en.yml 中选择自定义日期和时间格式

> ID：12082665
> 
> 赞同：4
> 
> 时间：2012-08-22T23:15:56.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, formatting, date-format

我对 Rails 中的 I18N 不太熟悉，所以请耐心等待。尝试设置自定义日期和时间格式：

```
#config/locales/en.yml
en:
  date:
    formats:
      long_dateweek: "%A, %B %d, %Y"
  time:
    formats:
      very_short: "%H:%M" 
```

但是当我尝试使用它们时，我只会得到默认格式：

```
1.9.3p194 :001 > Time.now.to_date.to_s(:long_dateweek)
 => "2012-08-22" 
1.9.3p194 :002 > Time.now.to_time.to_s(:very_short)
 => "2012-08-22 16:12:47 -0700" 
```

尝试重新启动控制台（甚至服务器）无济于事......**我错过了什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T01:27:40.520

@alexsanford1 有正确的答案。我在下面修改了我的以在视图中工作。

```
<%= l Time.now, :format => :very_short %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T02:04:59.547

您需要使用`I18n.l`如下方法：

```
1.9.3p194 :001 > I18n.l Time.now.to_date, :format => :long_dateweek
 => "Wednesday, August 22, 2012" 
1.9.3p194 :002 > I18n.l Time.now, :format => :very_short
 => "23:03" 
```

您还可以`l`在视图中使用辅助方法。查看此[导轨指南](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)以获取更多信息。

# jquery - Jquery 工具，范围 onSlide

> ID：12082666
> 
> 赞同：0
> 
> 时间：2012-08-22T23:15:58.940
> 
> 标签：jquery, jquery-tools

我似乎无法弄清楚如何使用 onSlide 事件，并且 jquerytools 的论坛似乎不起作用

基本上，我想在幻灯片上获取当前范围值，而不是 onchange。

这是我为 onchange 所做的工作，但我想在滑动范围选择器时获取当前值。

[http://jsfiddle.net/rx3AJ/](http://jsfiddle.net/rx3AJ/)

我一直在尝试的JS：

```
$(function () {

      $("#slideshow img").each(function(index, element){$(element).attr("id", index+1);});    

      var count = $("#slideshow img").length;

      $('#slideshow img:gt(0)').hide();
      $("#date p").text($("#slideshow img#1").attr("alt"));

      $(":range").rangeinput({
            precision: 0, value: 1, min: 1, max: count,
            onSlide: function() {
                console.log("you\'re sliding");
                //this is where i want to update do stuff on slide I think? but it won't work
                return true;
              }   
        });

      $(':range').bind('onSlide', function(){})
      $(":range").change(function(event, value) {
          //i'd like to do this onslide
          console.info("value changed to", value);
          $('#slideshow img').hide();
          $('#slideshow img#' + value).show();
          $("#date p").text($("#slideshow img#" + value).attr("alt"));
      });

  });​ 
```

任何想法都非常感谢，因为我不知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:03:40.293

首先，不要使用 jsfiddle，因为它不包含 jQuery 工具库。其次，将您的范围输入代码更改为：

```
$(":range").rangeinput({
    precision: 0, value: 1, min: 1, max: count,
    onSlide: function(event, i) {
        $('#slideshow img').hide();
        $('#slideshow img').eq(i).show(); 
        // the way you had works too, but you don't have to assign id's this way
        $("#date p").text($("#slideshow img").eq(i).attr("alt"));

    }   
}); 
```

并确保包含 jQuery 工具（其中包括 jQuery）

# gnuplot - gnuplot - 使用位于多个文件中的数据制作直方图

> ID：12082670
> 
> 赞同：0
> 
> 时间：2012-08-22T23:16:18.933
> 
> 标签：gnuplot, histogram

我知道如何[在 gnuplot 中制作直方图](https://stackoverflow.com/questions/2471884/histogram-using-gnuplot)，但是当数据位于**单个文件**中时，我看到的所有指令都是有效的。我的问题是我的数据跨越**了几个文件**。有什么办法可以做到这一点`gnuplot`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T00:21:59.647

并不真地。Gnuplot 真的只擅长一次处理一个文件。但是，有许多有用的外部工具可以为您将文件组合在一起：

```
plot "<magic_external_tool file1 file2 file3 file4 ..."  ... 
```

当然，您选择的外部工具是您的文件已经格式化的问题。如果备用 ( `awk`, `sed`, `join`, `cat`...) 不起作用，我经常依靠`python`编写一个快速脚本来完成这项工作，但我相信很多其他人会使用类似`perl`or的东西`java`。你使用什么工具并不重要，只要你能哄它把一个格式正确的文件写入标准输出，你就很成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:07:21.537

正如 mgilson 所说，这在 gnuplot 中是不可能的。

您可能需要考虑的一件事（我是该项目的作者，我在这里有偏见）是 Pyxplot [http://www.pyxplot.org.uk](http://www.pyxplot.org.uk)，它是由一群感到沮丧的 gnuplot 用户编写的有这样的问题。与 gnuplot 一样，它是免费和开源的，而且它的语法几乎相同。

根据您的需要，它有一个 histogram 命令，它产生一个数学函数，表示从提供的数据计算的直方图（参见[http://pyxplot.org.uk/current/doc/html/sec-histogram.html](http://pyxplot.org.uk/current/doc/html/sec-histogram.html)）。您可以执行以下操作：

```
histogram f1() 'file1.dat'
histogram f2() 'file1.dat'
histogram f3() 'file1.dat'
plot f1(x) + f2(x) + f3(x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T16:50:57.837

在我看来，你确实可以只使用 Gnuplot 来做到这一点，我就是这么做的。我使用的解决方案可以在这里找到：[https ://stackoverflow.com/a/11092650/448700](https://stackoverflow.com/a/11092650/448700)

# java - 如何在java中确定keycode

> ID：12082675
> 
> 赞同：1
> 
> 时间：2012-08-22T23:16:38.940
> 
> 标签：java

> **可能重复：**
> [Java - 获取字符的键码](https://stackoverflow.com/questions/8504615/java-get-keycode-of-a-char)

我有一个可以包含字母、数字、+、-、= 等的字符串。我想获取每个字符的键码，以便我可以在`KeyEventData()`参数中使用它。我只能检测到字母数字字符。

如何检测需要按 shift 键的 +、:、} 等按键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:35:29.660

使用[`AWTKeyStroke.getKeyStroke`](http://docs.oracle.com/javase/7/docs/api/java/awt/AWTKeyStroke.html#getAWTKeyStroke%28char%29)：

```
assert KeyEvent.VK_A == AWTKeyStroke.getAWTKeyStroke("pressed A").getKeyCode();
  && KeyEvent.VK_COLON
    == AWTKeyStroke.getAWTKeyStroke("pressed COLON").getKeyCode();
  && KeyEvent.VK_BRACERIGHT
    == AWTKeyStroke.getAWTKeyStroke("pressed BRACERIGHT").getKeyCode(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:22:29.997

在 KeyEvent 中，您作为 KeyListener 中的参数接收 - 我假设您正在使用此侦听器 - ，您有方法`getKeyCode()`和`getKeyChar()`.

# loops - 你如何循环遍历列表框并编辑 VB express 2010 中的每个行项目

> ID：12082676
> 
> 赞同：0
> 
> 时间：2012-08-22T23:16:38.917
> 
> 标签：loops, listbox

我已经学习 VB 4 周了，我已经达到了我的知识极限。我当然可以从更有经验的程序员那里得到一些帮助！！

我试图遍历我的列表框并删除每个行项目的前 4 个字符。

具体来说，我希望它表现得像这样：

选择列表框的第一行并将其发送到字符串（减去第一个 4 个字符） 从列表框中删除列表框的第一行 修改版本的列表框的第一行添加到与原始位置相同的列表框

列表框的下一行被选中……等等……重复直到整个列表框被修改

这是我尝试执行此操作的示例....它几乎可以工作:)

暗淡测试 As String test = ListBox1.SelectedItem.ToString.Substring(4) ListBox1.Items.RemoveAt(ListBox1.SelectedIndex) ListBox1.Items.Add(test)

有人可以帮我填空吗？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:15:53.120

可以通过这种方式访问​​和编辑 ListBox 项。

```
 listBox1.BeginUpdate();
try {
  for(int i = listBox1.Items.Count - 1; i >= 0 ; i--) {
    // do with listBox1.Items[i]

  }
} finally {
  listBox1.EndUpdate();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:33:17.703

首先，只是为了仔细检查一下，你是在循环吗？

接下来，我们可以看看这一行：

```
ListBox1.Items.RemoveAt(ListBox1.SelectedIndex) ListBox1.Items.Add(test) 
```

如果我理解正确，您将删除特定索引处的项目，然后将新字符串 test 添加回列表中。看着这个，[http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.add.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.add.aspx)，似乎 add 会将此项粘贴在列表框的末尾，但是您正在删除指定索引处的内容。

因此，您实际上并没有替换您可能认为要替换的内容。这是我最好的猜测。例如，如果您删除了列表中的第二个元素，但是当您将 test 放回列表中时，它会被添加到末尾。所以像 [a,b,c,d] 这样的东西变成 [a,c,d,b]

也许将其更改为：

```
ListBox1.Items.RemoveAt(ListBox1.SelectedIndex) ListBox1.Items.Insert(ListBox1.SelectedIndex, test) 
```

# java - 在 Spring MVC 中设置会话超时

> ID：12082677
> 
> 赞同：19
> 
> 时间：2012-08-22T23:16:40.100
> 
> 标签：java, spring, session, spring-mvc

有没有办法在 Spring 中指定会话超时？**我不能在 web.xml 中指定它**。因为我在控制器中使用会话范围 bean，如下所示

我已经通过 spring xml 文件配置了控制器。

```
class xyzController{

     ABCSessionScopeClass objectWhichWillBeStoredInSession;
} 
```

我也不能用这个

```
session.setMaxInactiveInterval(60*60); 
```

有没有其他方法可以做到这一点。我不介意为每个会话或同时为所有会话设置超时。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T04:27:41.370

使用 Pure Spring MVC、sevlet context.xml 的解决方案

```
<mvc:interceptors>
    <bean class="com.xxx.SessionHandler" />
</mvc:interceptors> 
```

处理程序适配器

```
@Component
public class SessionHandler extends HandlerInterceptorAdapter {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        request.getSession().setMaxInactiveInterval(60*60);
        return true;
    }
} 
```

假设您使用的是spring security，

对于每次成功登录，我认为最好的方法是为正常登录创建`LoginSuccessHandler`并指定身份验证成功处理程序以及记住我。

```
@Service
public class LoginSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {
    @Override
    public void onAuthenticationSuccess(
            HttpServletRequest request,
            HttpServletResponse response,
            Authentication authentication) throws ServletException, IOException {
        request.getSession().setMaxInactiveInterval(60*60);
        super.onAuthenticationSuccess(request, response, authentication);
    }

} 
```

```
<http auto-config="true" use-expressions="true">
    <form-login login-page="/login"
        authentication-failure-url="/login.hst?error=true"
        **authentication-success-handler-ref="loginSucessHandler"** />
    <logout invalidate-session="true" logout-success-url="/home" logout-url="/logout" />
    <remember-me key="jbcp" **authentication-success-handler-ref="loginSucessHandler"**/>
    <session-management>
        <concurrency-control max-sessions="1" />
    </session-management>
</http> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T18:50:47.830

我无法找到通过任何 Spring 配置文件指定会话超时值的任何方法。我正在使用`<aop:scoped-proxy>`bean，这样我就不必管理会话的读/写值/对象。现在，我也希望在不使用 servlets API 的情况下设置会话超时值。但看起来除了 web.xml 文件之外没有其他方法可以指定它。所以最终使用 servlet api`request.getSession()`来设置超时时间。我将时间值外部化，以便无需重新编译代码即可轻松更改它。如果有人找到更好的方法，请随时发布。如果发现更好，我可以接受它作为答案。

# php - php5 文件（在 aws amazon ec2 suse 上运行 apache2）子目录似乎被阻止

> ID：12082678
> 
> 赞同：1
> 
> 时间：2012-08-22T23:16:54.577
> 
> 标签：php, amazon-ec2, amazon-web-services, apache2, suse

我有一个 Aws Amazon-EC2 SuSe 实例的问题，安装了 apache2、php5、mysql 以及运行 Web 应用程序所需的一切，我们能够看到简单的 .html 或 .php 页面，但是当我们尝试查看更多时“像这样带有“令人难以置信的复杂代码”（请原谅讽刺）的详细页面

```
<link href="css/XXXX.css" rel="stylesheet" type="text/css"> 
```

或者

```
<div style="background-image:url(img/XXXXX.png);> 
```

或者

```
<?php include('inc/XXXX.php'); ?> 
```

或者

```
<script type="text/javascript" src="js/XXXXX.js"></script> 
```

或指向子目录（css、js、inc、img 等）的任何其他代码（html、php、js 等）都不起作用（所有响应都是一个不错的空白页面，没有任何错误消息，如 404 或 403 ），如果我将任何必要的文件移动到根目录似乎工作正常，当然我不会维护一个根目录下有超过 3000 个文件的站点。

不确定我是否在 SuSe、Apache 或 PHP .conf 文件中遗漏了任何配置，但已经用谷歌搜索了这个问题，但我找不到任何东西（也许我对此有点压力，看不到答案）来解决这个问题为了能够保持“正常”的目录结构，有人可以帮助我吗？提前很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:18:56.407

可能您在虚拟主机的根目录中有一个 .htaccess 文件，这导致了这个问题！

# php - PHP中的项目递归列表，未知深度和节点

> ID：12082680
> 
> 赞同：1
> 
> 时间：2012-08-22T23:16:55.803
> 
> 标签：php, recursion, tree

大师！首先，我花了半天时间 googlin'n'stackoverflowing 但找不到解决方案。这是我第一次使用递归。希望有人可以提供帮助。

我有一个 MySQL 表，这是一种参考系统：

```
Table 'users'

ID   SPONSORID
---------
1    2         
2    1         
3    1         
4    1         
...  ... 
```

有几件事情要记住：

1.  用户 1 和 2 是彼此的赞助商/推荐人。
2.  每个用户可以有无限数量的推荐。
3.  每个用户的推荐人也成为赞助商，并且还可以拥有无​​限数量的推荐人
4.  深度是无限的。

任务是递归地构建单个“团队”的树，例如：

```
User 1
    User 2
        User 1
        User 5
             ...
                 ....
    User 3
        User 295
             User 356
                 ....
    User 4 
```

等等...

这是我正在尝试做的事情：

```
$team = Array();
function build_team( $userID, $team ){
    if ( !in_array($userID, $team ) :
        // get 1st level of referals
        // returns associative array ('id', 'login', 'sponsorid')
        $referals = get_user_referals( $userID );
        for ( $i=0; $i<count($referals); $i++ ) :
            $team[] = $referals[$i];
            build_team( $referals[$i]['id'] );
        endfor;
    endif;
} 
```

并且还尝试将该 IF 放在 FOR 块中，但它仍然处于无限循环中。据我了解，当没有深度级别但我不明白如何计算/确定它时，我需要一个条件来退出递归。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:30:34.640

将已经“构建”的用户 ID 保存在某处。正如您自己所说的那样 - “用户 1 和 2 是彼此的赞助商/推荐人。”，所以有你的无限循环。

就像是

```
if (!in_array($userId, $already_looped_users){

  //continue loop...

} 
```

添加一些代码：

```
$team = Array();
function build_team( $userID, $team ){
     if ( !in_array($userID, $team ) :
        // get 1st level of referals
        // returns associative array ('id', 'login', 'sponsorid')
        $referals = get_user_referals( $userID );
        if (count($referals) > 0){ //added this line
          for ( $i=0; $i<count($referals); $i++ ) :
              $team[] = $referals[$i];
              $team[$referals[$i] = build_team( $referals[$i]['id'], $team ); // i've edited this line
          endfor;
          return $team; 
        }
    endif;
} 
```

# php - php数组和子数组

> ID：12082681
> 
> 赞同：-1
> 
> 时间：2012-08-22T23:16:59.457
> 
> 标签：php, sub-array

我在这里看到了以下符号：[http ://www.php.net/manual/en/features.http-auth.php](http://www.php.net/manual/en/features.http-auth.php)

什么是

```
($users[$data['username']] 
```

为了？

是数组和子数组吗？

请给我一个明确的例子

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:20:34.400

你应该这样想：

```
$username = $data['username'];
$user = $users[$username]; 
```

它使用 from 的值`$data['username']`作为键`$users`来查找特定的用户记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:19:32.743

`$data['username']`只是关联数组的关键

```
$data = Array(
  'username' => 'george';
);
$users = Array(
  'george' => "George Clooney",
  'angelina' => "Angelina Jolie"
);

echo $users['george']; // George Clooney
echo $users['angelina']; // Angelina Jolie
echo $users[$data['username']]; // George Clooney
echo $data['username']; // george 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T23:20:51.233

**$users**是一个关联数组（参见声明）。**$data['username']**是用于从该数组中提取特定值的键。

# css - 将 div 框放在后面的元素的末尾

> ID：12082683
> 
> 赞同：4
> 
> 时间：2012-08-22T23:17:14.920
> 
> 标签：css, html, position

如果我在以下庄园订购了 3 个 Div 框（实际上是任何数量）：

```
<div>
    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
</div> 
```

如何在不改变 html 结构的情况下让 id`one`的 div 显示在 id 的 div 之后？`three`

这就是 html 应该显示的内容：

```
________________________
| ____________________ |
| | id=two           | |
| |                  | |
| |__________________| |
| ____________________ |
| | id=three         | |
| |                  | |
| |__________________| |
| ____________________ |
| | id=one           | |
| |                  | |
| |__________________| |
|______________________| 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T23:43:47.730

这可能取决于这些 div 之后的内容。如果那里什么都没有，您可以`position: absolute; top: 100%;`在第一个 div 上使用来实现：

```
<div id="container">
    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
</div>​​​ 
```

```
​#container { position: relative; border: 1px solid red; }
#one { position: absolute; top: 100%; }
#one, #two, #three { width: 300px; height: 200px; border: 1px solid #ccc; } 
```

[http://jsfiddle.net/xjnrE/](http://jsfiddle.net/xjnrE/)

但是，如果`#container`div 后面有任何东西，它会在下面`#one`（至少部分地，取决于高度；参见[demo](http://jsfiddle.net/xjnrE/11/)）。

请记住，如果元素“在流中”（即，它没有定位也没有浮动），它将根据标记（以及因此，DOM）上出现的顺序呈现。这意味着您必须借助 JavaScript 来更改元素在 DOM 中的实际位置：

```
var container = document.getElementById('container');
var one = document.getElementById('one');
container.appendChild(one); 
```

[http://jsfiddle.net/xjnrE/3/](http://jsfiddle.net/xjnrE/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:26:37.427

如果您控制 div 的尺寸并确保它们的内容不会破坏您的布局，则可以使用 css 定位它们。有点尴尬，但类似：

```
#one, #two, #three {
   position: absolute;
   width: 200px;
   height: 200px;
}
#one {
   top: 400px;
}
#two {
   top: 0px;
}
#three {
   top: 200px;
} 
```

如果需要，可以使用 javascript 更改这些位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:18:22.690

下面抓取第一个 DIV 并将其移动到父容器中的最后一项。

但是，您需要确保可以以某种方式定位容器 DIV。因此，如果您无法编辑 HTML，请根据其他具有唯一 ID 或类的父元素来定位该元素。

标记：

```
<div id="container">
    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
</div> 
```

JavaScript：

```
$('#container #one').appendTo('#container'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-16T13:37:39.853

FTR：`flexbox`从那时起支持已经成熟，提供了一个[干净的解决方案](https://stackoverflow.com/a/28159766/1479945)。

```
/* That's all: */
#container { display: flex; flex-direction: column; /* omit the latter for horiz. stacking */ }
#one { order: 99999; /* Alas, no "last"... */ }

/* Demo visuals only: */
#one { background: pink; }
#container > div { width: 100px; height: 100px; border: 1px solid grey; }
```

```
<div id="container">
    <div id="one"> FIRST </div>
    <div id="two"> second </div>
    <div id="three"> third </div>
</div>
```

# sql - Excel QueryTable 参数不绑定 Sql 参数

> ID：12082688
> 
> 赞同：2
> 
> 时间：2012-08-22T23:17:56.817
> 
> 标签：sql, excel, parameters

我是 Excel 开发的新手，我有一个问题让我发疯。我希望你能帮助我。让我解释一下情况，我正在尝试创建一个 QueryTable 以从 SQL 导入数据，但是......我在刷新 QueryTable 时遇到错误，错误消息表明我没有传递所需参数的值. （它工作硬编码：[）

经过数小时的调查，我无法找到解决方案或示例来指导我......我在这里：| 我不知道我在做什么错，这是一些代码

```
foreach (Range row in main.Rows)
    {
            //row.Clear();
            rowID = row.Row;
            if (string.IsNullOrEmpty(getAccounts(rowID, columnID)) )  
                continue;

            /*  string connectionString = // \"
                    string.Format("OLEDB;Provider=SQLOLEDB;Data Source={0};Initial Catalog={1};User ID={2};Password={3}",
             */      

            //string sql = "EXECUTE [Funciones].[Cuenta_Saldo_Anho] ?,?";
            //if (!string.IsNullOrEmpty(txtTipoSaldo.Text)) sql +=  ",?";

           string sql = "{CALL [Funciones].[Cuenta_Saldo_Anho] (?, ?";
           sql += (!string.IsNullOrEmpty(txtTipoSaldo.Text))? "" : ", ?" + ")}"; // optional parameter

           var qt = wSheet.QueryTables.Add( connectionString, row.Cells , sql);
           qt.CommandType = XlCmdType.xlCmdSql;

           var ctas = qt.Parameters.Add("@ctas", XlParameterDataType.xlParamTypeLongVarChar);
           //ctas.SetParam(XlParameterType.xlConstant, cuentas);
           ctas.SetParam(XlParameterType.xlRange, wSheet.Cells[rowID, columnID]));
           ctas.RefreshOnChange = true;

           qt.Parameters.Add("@anho", XlParameterDataType.xlParamTypeInteger)
 .SetParam(XlParameterType.xlConstant, Int32.Parse(anho));

           qt.Parameters.Add("@tipoSaldo", XlParameterDataType.xlParamTypeVarChar)
 .SetParam(XlParameterType.xlConstant, txtTipoSaldo.Text);

            //qt.BackgroundQuery = true;
            qt.FieldNames = false;
            qt.AdjustColumnWidth = false;
            qt.RefreshOnFileOpen = false;
            qt.Refresh();
      } 
```

欢迎任何帮助。谢谢。

# ruby-on-rails - 当我尝试使用 heroku 进行部署时，为什么会出现默认的“欢迎加入”屏幕？

> ID：12082693
> 
> 赞同：0
> 
> 时间：2012-08-22T23:18:33.673
> 
> 标签：ruby-on-rails, heroku

我的应用程序可以在本地运行，但是当我尝试部署到 Heroku 时，我得到了“欢迎加入：您正在使用 ruby​​ on rails！” 屏幕。

到目前为止，我有：

*   删除 public/index.html 并在 config/routes 文件中设置新的根路径。

*   尝试运行 rails s --environment production 以查看问题是否是生产环境配置，但这也有效。

*   运行“heroku 运行 rake db：迁移

我错过了什么？日志看起来很正常，没有给我任何明显的错误消息......请让我知道提供哪些其他信息对我有用，我完全迷失在这里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:40:20.853

我最好的猜测是它未能从你的 git repo 中删除

运行 git status 并查看是否已删除 public/index.html 显示

如果是，则运行

```
 git rm public/index.html 
 git commit -m "Removed public/index.html" 
```

然后推送到heroku

```
git push heroku master 
```

# ruby - 方法中的变量问题

> ID：12082697
> 
> 赞同：1
> 
> 时间：2012-08-22T23:18:44.557
> 
> 标签：ruby, variables, scope

在上一个问题（[Ruby 中的方法是否类似于子例程？](https://stackoverflow.com/questions/11869802/is-a-method-in-ruby-similar-to-a-subroutine)）中，我询问了 Ruby 中的方法。现在，在编写我的第一个方法时，我显然遇到了变量范围的问题。当我不调用方法时，下面的程序解释并运行良好`learn`。也就是说，如果我删除第 33 行中的调用，一切正常，我在主程序和方法中`learn(2)`使用各种变量（例如）似乎并不重要。`stimulus[]`但是当我插入调用（并通过`u`按键使用它）时，我收到下面的消息，显然表明在方法中使用它是不合适`stimulus`的。

```
brain.rb:26:in `block in learn': undefined local variable or method `stimulus' for main:Object (NameError)
    from brain.rb:25:in `each'
    from brain.rb:25:in `learn'
    from brain.rb:33:in `ucr'
    from brain.rb:69:in `<main>' 
```

但是我需要在那里使用它（和大脑），并且它们的当前值由主程序确定。我遇到的有关范围问题的所有答案似乎都相反，即在其他地方的方法中使用变量的问题。我想过让刺激和大脑全球化，但显然这是不行的。如何告诉方法使用程序中的变量？

附言。一旦这个方法有效，我将从程序中的其他六个地方调用它。

```
require 'matrix'
class Matrix
  def []=(i, j, x)
    @rows[i][j] = x
  end
end #code to allow putting individual elements in matrix at i,j
def read1maybe
  return $stdin.read_nonblock 1
rescue Errno::EAGAIN
  return ''
end # part of code to get keypress
brain=  Matrix[ [0,0,0,0,99,0,0,0,0,1,0],
                [0,0,0,0,0,99,0,0,0,1,0],
                [0,0,0,0,0,0,99,0,0,1,0],
                [25,0,0,0,0,0,0,1,-1,1,-99],
                [0,23,0,0,0,0,0,1,-1,1,1],
                [0,0,24,0,0,0,0,1,-1,1,1],
                [0,0,0,22,0,0,0,1,-1,1,1] ]
stimulus=Matrix.column_vector([0,0,0,0,0,0,0,0,0,0,0])
behavior=Matrix.column_vector([0,0,0,0,0,0,0])
t=500 # t=threshold
energy=50
# begin defining behavioral methods
def learn(ix)
    for j in (7..10)
    if stimulus[j]>0 && brain[ix,j] != 0 && brain[ix,j] < 99 then
        brain[ix,j]+=int(0.1 * stimulus[j]) * (99-brain[ix,j])
    end # if stim
    end # for j
end # learn
def ucr
    puts "Show UCR"
    learn(2)
end
def positive_fixer
    puts "Positive fixer"
end
def negative_fixer
    puts "Negative fixer"
end
# end defining behavioral methods

# begin main program
while(energy>0) do
(0..10).each {|n| if stimulus[n,0]>2 then stimulus[n,0]+= -2 else stimulus[n,0]==0 end}
input=false
system 'stty cbreak'
look=0
while look < 40000
  q = read1maybe
  break if q.length > 0
  look +=1
end # while look
case q
when "f" then stimulus[4,0]=9 and puts "Good!"
when "p" then stimulus[5,0]=9 and puts "Bad!"
when "u" then stimulus[6,0]=9
when "l" then stimulus[7,0]=9 and stimulus[8,0]=9 and puts "ight on"
when "c" then stimulus[9,0]=9 and puts "   BUZZZ"
input=true
end # case q
system 'stty cooked'

if input==false then (0..3).each { |n| stimulus[n,0]=rand(25)} end

behavior=brain*stimulus
if behavior[0,0] > t then positive_fixer end
if behavior[1,0] > t then negative_fixer end
if behavior[2,0] > t then ucr end
if behavior [3,0] > t then puts "show operant 1" end # and stimulus[10,0]=9
if behavior[4,0] > t then puts "show operant 2" end
if behavior[5,0] > t then puts "show operant 3" end
if behavior[6,0] > t then puts "show operant 4" end
energy += -1
# temp to test development of memory
puts brain[2,9]
end # while energy > 0
puts
puts "It's dead Jim."
# end main program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:30:11.443

`stimulus`并`brain`在方法之外声明。您需要将它们作为参数传递，如下所示：

```
def learn(ix, brain, stimulus)
    for j in (7..10)
    if stimulus[j]>0 && brain[ix,j] != 0 && brain[ix,j] < 99 then
        brain[ix,j]+=int(0.1 * stimulus[j]) * (99-brain[ix,j])
    end # if stim
end # for j end # l 
```

`ucr`并像这样编辑：

```
def ucr(brain, stimulus)
    puts "Show UCR"
    learn(2, brain, stimulus)
end 
```

并调用`ucr`like `ucr(brain, stimulus)`。看到图案了吗？您需要将参数添加到使用它们的方法定义中，然后在调用方法时将它们传递进去。

# php - PHP - 如何在 mysql 查询中添加数组值并从每个类别中检索单个数据

> ID：12082703
> 
> 赞同：0
> 
> 时间：2012-08-22T23:19:23.277
> 
> 标签：php

我有一个以下数组输出...我想在 mysql 查询中使用这个数组值。

**数组值的输出：**

```
Array ( [0] => Array ( [0] => 144 [category_id] => 144 ) [1] => Array ( [0] => 98
[category_id] => 98 ) [2] => Array ( [0] => 146 [category_id] => 146 ) [3] => 
Array ( [0] => 142 [category_id] => 142 ) ) 

Array Value : 144 98 146 142 
```

**我希望 Sql 查询获取与上述 id 相关的四个记录 (144 98 146 142)**

```
$Sql_array = mysql_query("SELECT * FROM product_table") 
```

谢谢你的帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:21:46.993

尝试：

```
SELECT * FROM product_table WHERE id IN (144,98,146,142); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:27:26.803

那么你可以使用这样的循环

```
(string)$select;
foreach($array as $k){
 $select.= $k[0].",";
}
$select = substr_replace($select ,"",-1);
$query = "SELECT * FROM product_table WHERE id IN (".$select.")"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:21:40.060

```
SELECT * FROM product_table WHERE category_id IN (1,2,3,4) 
```

在你的例子中

```
$Sql_array = mysql_query("SELECT * FROM product_table WHERE category_ID IN (".join(',',$array).")") 
```

# java - 考虑到客户端除了起始 url 之外没有任何先验知识，您如何构建 REST 客户端？

> ID：12082704
> 
> 赞同：3
> 
> 时间：2012-08-22T23:19:24.750
> 
> 标签：java, flash, rest, web-applications, client

我已经开始研究一个现有的 REST 应用程序，并且无法理解如何制作一个 RESTful 客户端？

[维基百科](http://en.wikipedia.org/wiki/Representational_state_transfer#Guiding_principles_of_the_interface)上的页面声明如下

“客户端仅通过服务器在超媒体中动态识别的动作（例如通过超文本中的超链接）进行状态转换。除了应用程序的简单固定入口点外，客户端不假设任何特定动作可用于任何特定资源超出了先前从服务器收到的陈述中描述的资源。”

如果客户端只能假设一个起始 url，那么除了在浏览器中运行的纯 HTTP REST 服务之外，客户端如何知道如何显示返回的任何信息。

例如，java/flash 客户端必须假设返回什么数据才能知道如何显示它，然后当然实现将不再是宁静的？

感谢您的任何见解。

码头

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:32:01.510

状态转换和告诉客户端如何显示信息是有区别的。在 HTTP 中，数据类型通常由`Content-Type`客户端决定如何显示它的头字段确定（例如，浏览器会请求`text/html`并呈现结果）。REST 没有假设数据是自我描述的，只是假设它们应该通过 URI 进行语义连接。`application/json`wiki 页面说明的是，如果您请求`http://example.com`它会返回如下内容：

```
{
    "users" : "http://example.com/users",
    "todos" : "http://example.com/todos"
} 
```

现在您知道要请求什么 URI 来获取待办事项列表，并且请求`http://example.com/todos`可能会返回如下内容：

```
[
    {
        "description" : "Do dishes",
        "user" : "http://example.com/users/20"
    },
    {
        "description" : "Do dishes",
        "user" : "http://example.com/users/42"
    }
] 
```

用户键不只是返回一个 id，而是引用连接的用户资源的实际 URI，因此您可以直接请求它。

# php - 输入中的国际电话号码格式

> ID：12082706
> 
> 赞同：1
> 
> 时间：2012-08-22T23:19:25.953
> 
> 标签：php, javascript, jquery, jquery-ui

我有这样的输入：

```
<textarea name='phone_number' id='phone_number' cols='80' rows='1'><? echo $_POST['phone_number']; ?></textarea> 
```

好吧，我在 PHP 中创建了一个函数来验证电话号码（检查它不为空且其中没有字符，只有 + 和数字）

***现在***，我想用一些 JQuery/JavaScript 的东西在那个输入中内联格式化它，但是我想的格式是**国际**化的，如果我有：

`0016073222153`成为`+1 607-322-2153`

`0049329351525`成为`+49 329-351-525`

有什么想法我该怎么做？欣赏它！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:47:34.883

我假设很多，但它适合您的用例，可能会让您入门

```
var num1 = "0016073222153",
    num2 = "0049329351525";

$(document).ready(function() {

    $('body').append(
        phoneFormat(num1) + "<br />" + 
        phoneFormat(num2)
    );
});

function phoneFormat(num) {

    num = num.replace(/^0+/, '');
    num = num.replace(/[^0-9]/, '');

    if (num.length == 11) {

        if (num.substr(0, 1) == 1) num = "+1 " + num.substr(1, 3) + "-" + num.substr(4, 3) + "-" + num.substr(7, 4);
        else num = "+" + num.substr(0, 2) + " " + num.substr(2, 3) + "-" + num.substr(5, 3) + "-" + num.substr(8, 3);
    }

    return num;
}​ 
```

[http://jsfiddle.net/tnv2m/](http://jsfiddle.net/tnv2m/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:26:18.297

对于国家代码，这不是很复杂（我认为），只是有点繁重的工作。

您可以在[此处](http://en.wikipedia.org/wiki/List_of_country_calling_codes)获取国家/地区代码列表。然后您获取第一个数字并从调用代码表中确定是否有下一个数字您应该阅读；重复直到你确定了国家代码。

对于其余的数字，您可以执行以下操作：

```
join('-', str_split($nr, 3)); 
```

这为您提供了 3 位数字组，以破折号分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:26:25.630

你将无法以普遍的方式做到这一点。每个国家都有不同的格式，不同的区域编号等等。如果没有保留所有格式规则的精确数据库，您将无处可去。您知道规则的国家/地区的格式或放弃该想法。

# java - InputStream.available() 什么时候有用？

> ID：12082709
> 
> 赞同：2
> 
> 时间：2012-08-22T23:19:32.673
> 
> 标签：java, sockets

Java 中的套接字编程什么`InputStream.available()`时候有用？`BufferedInputStream.available()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:33:59.483

我的看法是，除非您知道“估计”有多好，否则该方法没有用。并且在流连接到套接字的情况下，估计不能在所有情况下都是可靠的。

问题是该方法的返回值无法区分您已经到达套接字上的流末尾的情况，以及套接字上*当前*没有可用字符但可能会传递更多字符的情况。根据javadoc，两者都可以返回零。

这种不确定性使该方法几乎毫无用处。

*   在套接字情况（和类似情况）中，`available()`如果结果为零，该方法并没有真正告诉您是否读取。而且，如果您做出错误的选择，您将在您不打算这样做时阻塞，或者永远不会发现套接字实际上已关闭。其中任何一个都可能是坏的。

*   在其他情况下（例如从本地文件读取），还有其他方法可以确定读取是否可能阻塞。此外，无论如何，读取不太可能长时间阻塞，因此避免阻塞通常没有多大意义。

*   最后，在某些情况下，我认为您可以获得非零响应并且无论如何都会有读取调用块。（我正在考虑远程安装的文件系统上的文件......以及当您尝试阅读时远程服务器冻结的可能性。）

底线`available()`是记录为返回*估计值*。javadoc 不保证该估计在所有可能的情况下的可靠性，并且确实在某些情况下估计不能准确，因为这需要知道远程服务器将要做什么。

# jquery - 使用colorbox jQuery插件显示两组不同内容时，关闭colorbox时显示第一组内容

> ID：12082711
> 
> 赞同：0
> 
> 时间：2012-08-22T23:20:24.127
> 
> 标签：jquery, colorbox

jQuery 1.6.4 颜色框 1.3.19

我使用以下代码打开一个颜色框：

```
$.colorbox({inline: true,
            href: '#floatbox',
            innerHeight: '480',
            innerWidth: '530',
            top: '15%'}); 
```

'#floatbox' 内部是一个按钮，单击该按钮最终会导致以下第二次调用颜色框：

```
$.colorbox({html: 'some_valid_html',
            transition: 'none',
            escKey: false,
            overlayClose: false); 
```

我观察到的是第二个 HTML 内容显示正确，但在调用之前

```
$.colorbox.close() 
```

稍后，“#floatbox”的内容（第一次调用的内容）在屏幕上闪烁。这不是我所期望的。一旦第一次调用的内容从屏幕上删除，我不希望用户再次看到它。

这是 Chrome/Safari 中的行为。

我尝试了几件事，包括：

1) 在第二次调用 $.colorbox 之前从 DOM 中强制删除 '#floatbox'。

2) 将对 $.colorbox 的第二次调用绑定到在第一个颜色框内容中单击的链接。

3) 操作 $.colorbox 设置以从第一次调用中“撤消”'inline' 和 'href' 属性（尽管看起来我并不需要这样做）。

就好像 ColorBox 从第一次调用中复制了 DOM 节点并保留了它。

这里有一些问题：

1）是否有可能以某种方式记住第一次调用的“内联”和“href”设置？

2) 有什么方法可以操作打开的彩盒的当前设置？

任何其他想法表示赞赏。

谢谢，韦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:55:44.623

> 就好像 ColorBox 从第一次调用中复制了 DOM 节点并保留了它。

ColorBox 不会复制该元素，它会将节点从其在 DOM 中的原始位置移动。当您更改内容时，它会将其移回。

> 1）是否有可能以某种方式记住第一次调用的“内联”和“href”设置？

不，该信息被丢弃。我不确定是什么导致了这些问题，但我怀疑这是实施过程中的疏忽。我会查看您的代码以确保您不会意外调用 colorbox。

# django - 使用 django-pipeline 指定要编译的文件时，如何控制传递给编译器的 infile 和 outfile？

> ID：12082718
> 
> 赞同：2
> 
> 时间：2012-08-22T23:21:24.713
> 
> 标签：django

我已经为 Django-Pipeline 编写了一个基本的 requirejs 编译器，我正在尝试对其进行改进，但我遇到了一个问题。我注意到 SASS 编译器存在同样的“问题”，所以我想知道这是我缺少的设置还是什么。

```
PIPELINE_CSS = {
    'main': {
        'source_filenames': (
            'sass/main.scss',
        ),
        'output_filename': 'css/crushcode.css',
        'extra_context': {
            'media': 'screen,projection',
        }
    }
}

PIPELINE_JS = {
    'requirejs': {
        'source_filenames': (
            'js/lib/requirejs-2.0.4.js',
        ),
        'output_filename': 'js/require.js',
        'extra_context': {
            'data': '/static/js/bootstrap'
        }
    }
} 
```

这两个都在源目录中创建一个与输入文件同名的输出文件，扩展名更改为`output_extension`相应编译器类的扩展名。对于 SASS，这是可以的，因为扩展名是 .css，所以你最终会在 main.scss 旁边看到 main.css，但是在我第一次运行它时使用我的 requirejs 插件，因为扩展名是相同的，我实际上覆盖了我*的*原始文件（当然没有丢失，谢谢版本控制）。

我注意到 infile 和 outfile 都指向：

APP_ROOT/static/js/lib/require-2.0.4.js

当我认为outfile应该指向`output_filename`设置时。

简单的解决方法是将`output_extension`我的自定义编译器类更改为“optimized.js”，但此时我为每个编译的文件添加了一个 .gitignore，更不用说 collectstatic 然后带来所有内容，并创建目标目录中所需的 output_filename 文件。

我所希望的是 collectstatic 会简单地在我的`STATIC_ROOT`目录中创建 js/require.js 文件。

感觉好像我在这里做错了什么，有什么提示吗？这是预期的行为吗？如果是这样，我应该如何改变它？

# php - PHP Preg 替换以删除所有 xml

> ID：12082719
> 
> 赞同：0
> 
> 时间：2012-08-22T23:21:37.440
> 
> 标签：php, regex, preg-replace

我的 UI 中有一个文本区域，我想过滤掉用户使用 preg_replace 输入的所有 xml（包括 html）文本。我需要一些帮助。

例如：

```
Emailed user sam at 12:15 PM
<details><email>sam@sam.com</email></details> 
```

preg_replace 之后：

```
Emailed user sam at 12:15 PM 
```

除此之外，任何指向 preg_replace 正则表达式的指针都会很棒。我尝试在 preg_replace 中使用一些 java 正则表达式（我是 PHP 新手），但发现它不起作用。我不确定我的正则表达式是否错误或 preg_replace 使用了不同类型的正则表达式。

非常感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:33:16.480

`mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &$count ]] )`

因此，在大多数情况下，以下内容将起作用，

```
$str_out = preg_replace('/<[\/]{0,1}\w[^>]*>/g', '', $str_in); 
```

`'/<[\/]{0,1}\w[^>]*>/g'`<name stuff> 和 </name stuff> 的正则表达式在哪里。如果您在属性中有一个 > 它将失败（即`<name blah=">hello">`会导致`hello">`

虽然`strip_tags`是原生的，所以会更快。记住的论点是**不能剥夺**`strip_tags`的东西

* * *

**编辑：如果您希望标签之间的内容也被剥离，那么正则表达式就是`'/<\w[^>]*>[\s\S]*?<\/\w[^>]*>/g'`，但这会在更多情况下失败（即严重关闭/嵌套的标签），所以您可能想先运行它然后上面的结果来确定。

编辑：拼写**

# python - 从 python 程序中安装模块

> ID：12082723
> 
> 赞同：1
> 
> 时间：2012-08-22T23:21:50.487
> 
> 标签：python, module

有没有办法让python程序告诉用户它需要一个模块才能运行，然后程序可以为用户安装它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:42:35.023

你可以捕获 ImportError 异常来告诉用户程序需要某个模块；

```
try:
  import numpy as np
except ImportError: 
  print "This program requires numpy!"
  print "Please download it from http://numpy.scipy.org/ and install it"
  print "before running this program."
  exit(1) 
```

请注意，这只是一种以更好的方式退出程序的方法，而没有用户可能不清楚的回溯。如果找不到模块，无论如何都会引发异常。

您应该只对不属于 python 标准库的模块执行此操作。

尝试自动安装它不是一个好主意。首先是因为它是一种安全风险（传播恶意软件的好方法），其次是因为不同的操作系统或发行版具有不同的处理和注册软件安装的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:25:30.593

您可以创建一个尝试加载特定模块的函数，如果无法加载，则为用户提供手动下载的说明，或者您可以编写脚本以自动下载模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:53:01.137

这并不能准确回答您的问题，但我认为这可能是您想要*做*的事情的答案。如果可能，我建议不要编辑用户已安装的模块，如果您只需要它们来运行脚本，那么您应该真正考虑[PyInstaller](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCAQFjAA&url=http%3A%2F%2Fwww.pyinstaller.org%2F&ei=aHA1UK-dKeWAiwKIiIDwBA&usg=AFQjCNE3CAfsCfZ16eMLQbWSToEGAz-eZw&sig2=iXwSddMry2B7hD_FjNIRBw)，它将您的程序捆绑到 .exe 文件中。

如果您正在制作一个设置脚本来配置某人的机器，这显然是行不通的，但否则它可能是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T05:48:22.597

这很容易，但由于并非所有用户都会在他们的系统中安装 python 或 pip，因此它不适用于每个系统。代码是-

```
import os
os.system('<command here>')
os.system('pip install numpy') 
```

它会工作...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T23:43:44.643

您可以使用

```
import os
os.system('[sudo] [install whatever]') 
```

安装您需要的任何模块...如果它还没有管理员权限，它将提示用户输入管理员密码

[http://forums.devshed.com/python-programming-11/running-bash-command-110687.html](http://forums.devshed.com/python-programming-11/running-bash-command-110687.html)

**编辑：**

根据下面 Matthew Trevor 的建议，您还可以尝试将依赖项添加到 setup.py，如本文所述[http://www.siafoo.net/article/77](http://www.siafoo.net/article/77)

# php - 计算平均时间

> ID：12082730
> 
> 赞同：2
> 
> 时间：2012-08-22T23:22:30.710
> 
> 标签：php, time, average

我有一系列时间如下：

```
Array
(
    [0] => 00:00:04
    [1] => 00:00:05
    [2] => 00:00:02
    [3] => 00:00:09
    [4] => 00:00:03
    []...
) 
```

我正在尝试使用以下代码计算平均时间：

```
foreach($times as $t) {          
    $unixtime += strtotime($t);      
}      

$unixtime = $unixtime / count($times);  

echo "Unix Time: " . $unixtime . "<br />";  
echo "Formatted: " . date("h:i:s",$unixtime) . "<p/>"; 
```

但我得到的输出是：

> Unix 时间：1345669204.37 格式：12:00:04

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:29:43.677

如果您将日期格式字符串从更改`h:i:s`为`H:i:s`它应该开始工作。

该`h`格式用于 12 小时制，从`12`午夜开始；24 小时制时钟从 开始`00`。

# css - 如何删除未使用的 CSS 但保留评论？

> ID：12082736
> 
> 赞同：3
> 
> 时间：2012-08-22T23:23:37.633
> 
> 标签：css, optimization, stylesheet, code-cleanup

我知道[这个](https://stackoverflow.com/questions/135657/tool-to-identify-unused-css-definitions) [问题](https://stackoverflow.com/questions/7147441/firefox-addon-to-find-unused-css-styles) [已经](https://stackoverflow.com/questions/33242/how-can-i-find-unused-images-and-css-styles-in-a-website) [被](https://stackoverflow.com/questions/10743314/unused-css-how-do-you-clean-it-up) [问过](https://stackoverflow.com/questions/7409980/detect-unused-css-rules) [很多](https://stackoverflow.com/questions/7957881/tool-for-checking-unused-css-selectors) [次](https://stackoverflow.com/questions/6650146/css-find-unused-css) [了](https://stackoverflow.com/questions/3574136/how-do-i-identify-and-eliminate-unused-css-styles-from-my-bloated-stylesheet)，但我仍然找不到适合我情况的合适的解决方案。

我有一个*巨大*的CSS 文件，其中大约 50% 根本没有在我当前的网站中使用。它还包含许多我想保留的宝贵意见。

由于 CSS 文件的大小，只能识别未使用的 CSS 定义的工具不是很有帮助 - 我需要一个可以*更改*我未使用的定义的工具，以便我可以在之后应用正则表达式删除它们，或者*删除*未使用的定义我，自动。

[CSS Usage](https://addons.mozilla.org/en-US/firefox/addon/css-usage/)在更改所有未使用的定义方面做得很好，我可以使用正则表达式轻松删除所有这些 - 问题是 CSS Usage 也会自动从我的文件中删除所有注释。

**如何删除 CSS 文件中所有未使用的定义但保留所有注释？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T00:00:31.283

我可以说我设法做到了你所要求的，但它不是那么整洁！实际上我修改了扩展代码（我不知道这是否可以接受:-D）但我知道如何让你复制它:-)！

我在扩展代码中注释了这一行

```
/* CssUsage.js : 110 */
cssSource = cssSource.replace(/\/\*[\S\s]*?\*\//g, ""); 
```

它会删除类似的评论`/* this is a comment */`

它给了我[这个输出](http://pastebin.com/StA9d2Dz)

无论如何，如果你想复制这个...
-[下载扩展名](https://addons.mozilla.org/firefox/downloads/latest/10704/addon-10704-latest.xpi?src=dp-btn-primary)（保存到..）
- 用任何应用程序打开下载`.xpi`的 winrar
- 编辑`chrome/content/cssusage/CssUsage.js`和评论第 110 行
- 将其拖到 firefox 以重新安装

或者只需下载此[xpi](http://www.mediafire.com/?0dz928d4vmoc8pe)并将其拖到 firefox 以重新安装扩展！
也许您也可以尝试使用您提到的正则表达式使其删除 UNUSED 行 `cssSource = cssSource.replace(/your regex/g, "");`

# python - 在 Active Directory 中管理 dns 的 Python 脚本

> ID：12082744
> 
> 赞同：0
> 
> 时间：2012-08-22T23:24:28.297
> 
> 标签：python, dns, active-directory

我想做的是用Python编写一个应用程序并将其部署在django中（我想在Linux平台上实现它），并且该应用程序可以在Active Directory（Windows环境）中远程管理DNS。最好所有脚本都是用 Cpython 编写的。我尝试了以下几种方法但失败了：

1.  使用一个名为 dnspython 的模块，但它似乎只适用于 BIND DNS，它仍然不支持 Window DNS。
2.  使用 pywin32 模块调用 WMI，但 pywin32 是一个仅适用于 Windows 平台的模块，无法在 Linux 中工作。
3.  使用 Ironpython，这是我得到的唯一解决方法，但不是很好，因为所有其他应用程序都在 Cpython 中。

有人可以提供解决方案吗？或解决方法。

据我了解，我需要一个在 Linux 中运行的 cpython 脚本，它可以在 Windows 平台上远程管理 Active Directory 中的 DNS。如果有任何问题，请告诉我。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:36:53.167

将 windows 机器设置为 chaching 名称服务器，将 linux 机器作为其权威名称服务器。这样你就可以在 linux 机器上更改 BIND 的设置，windows 机器也应该随之而来。

不过，这个问题可能属于[server fault](https://serverfault.com/)。

# sql - 如何处理显然既存在又不存在的 Firebird 表

> ID：12082745
> 
> 赞同：3
> 
> 时间：2012-08-22T23:24:37.500
> 
> 标签：sql, firebird

我刚刚用 Firebird 数据库发生了一些非常奇怪的事情。

我试图创建一个表，但 CREATE TABLE 由于某种原因失败了。但是现在它陷入了一种非常奇怪的状态：

如果我再次尝试`CREATE TABLE`使用相同的表名，则会出现错误：该表已存在。但是，如果我尝试访问`DROP TABLE`该表，则会出现错误：该表不存在。尝试使用`SELECT * FROM`该表会出现“表不存在”错误，并且该名称不会出现在元数据查询中：

```
SELECT RDB$RELATION_NAME
  FROM RDB$RELATIONS
 WHERE RDB$SYSTEM_FLAG=0 
```

因此，出于某种原因，该表似乎确实不存在，但我无法创建它，因为某处的某些东西表明它确实存在。

有谁知道如何解决这个问题？我已经尝试关闭与该数据库的所有连接，这在过去有助于解决不一致问题，但这次没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:10:04.623

当您尝试创建表时，您没有详细说明错误是什么，所以我无法评论它。但`RDB$RELATIONS`不是创建表时唯一受影响的系统表。也许您现在处于一种不一致的情况，即有关该表的某些信息存在于某些系统表中，而在其他系统表中不存在。

另一种选择是系统表中的索引损坏，因此记录不存在，但索引认为它仍然存在。

尝试进行备份/恢复，看看是否有帮助。如果它不起作用，请尝试在其他系统表（`RDB$RELATION_FIELDS`等）中搜索与该“未创建”表相关的记录，如果找到，请尝试删除它们。

作为最后一个选项，您可以使用正确的元数据创建一个新的干净数据库，并使用`IBDataPump`.

# matlab - 将结构数组的字段提取到新数组

> ID：12082746
> 
> 赞同：11
> 
> 时间：2012-08-22T23:25:03.223
> 
> 标签：matlab, vector, struct

我有一个结构，它有 2 个字段：`time`和`pose`. 我有这个结构的多个实例组成一个数组，所以一个例子是：

```
poses(1)
    -time = 1
    -pose = (doesn't Matter)
poses(2)
    -time = 2
    -pose = (doesn't Matter)
poses(3)
    -time = 3
    -pose = (doesn't Matter)
... 
```

现在当我打印这个：

```
 poses.time 
```

我明白了：

```
ans =
      1
ans =
      2
ans =
      3 
```

如何获取该输出并将其放入向量中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T23:28:35.023

使用括号：

```
timevec=[poses.time]; 
```

棘手的matlab，我知道我知道，如果你正在使用结构，你只需要记住这个；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-20T23:03:38.960

对于字段值是向量（大小相同）并且您需要矩阵形式的结果的情况：

```
posmat = cell2mat({poses.pose}'); 
```

这将返回`pose`不同行中的每个向量`posmat`。

# wpf - 如果由 WCF 服务调用，Linq to SQL varbinary 返回 null？

> ID：12082748
> 
> 赞同：0
> 
> 时间：2012-08-22T23:25:27.673
> 
> 标签：wpf, wcf, linq-to-sql

今天我在尝试使用 Linq2Sql 从 Sql Server 2008 数据库中检索数据时遇到了一个奇怪的情况。

数据 = 几个产品。它是一个简单的表格，包含产品ID、产品名称、产品描述和产品图片等字段。图片在数据库中存储为 BLOB (Varbinary(MAX)) 类型。

数据库中还有一个用于获取所有产品的存储过程。

在 Linq to SQL dbml 文件中，Varbinary(MAX) 的返回类型设置为 System.Data.Linq.Binary。

现在，当我通过 WPF 应用程序作为顶层查询数据库时，一切正常 - 产品列表与表示图片的二进制数据一起正确接收，但是当我通过 WCF 服务作为顶层调用相同的存储过程时，二进制数据全部突然变成'null'值！！！

所有其他数据，如产品名称、描述等都存在，但只是缺少图片？

有人知道这里有什么问题吗？还是我应该简单地切换到 EF？

问候..

# mysql - 是否可以按升序以外的任何顺序进行分组？

> ID：12082757
> 
> 赞同：2
> 
> 时间：2012-08-22T23:26:38.753
> 
> 标签：mysql

我有一个查询，它连接了几个表并产生了很多行，在这种情况下，我只希望每个用户看到一行。我已经通过 user.id 使用 group 解决了“只有一个用户”的问题，但是，我注意到现在对于每个用户，我从连接表中获取表示第一个条目（而不是最后一个条目）的值。

所以换句话说

```
user:
id | phone

item:
id | user_id | timestamp 
```

我的意图是加入这些表并选择最新的项目（基于时间戳或 item.id desc），但每个用户只能获得一个项目（而不是查看每个用户拥有的所有项目）。 `group by user.id`解决了每个用户只给我一个项目的问题，但他们总是出现第一个 item.id 最低的项目，而我想要最近的一个。

有没有更好的方法来实现这一点......我最初只是在思考，`distinct`但这似乎并没有奏效。

TIA

[编辑] 针对乔斯林的以下问题： `select user.id, item.timestamp from item join user on user.id = item.user_id order by user.id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:35:39.143

~~使用`ORDER BY`with`DESC`子句：~~

 ~~```
select 
  user.id, item.timestamp 
from 
  item 
join 
  user on user.id = item.user_id 
group by
  user.id
order by 
  user.id DESC 
```~~  ~~我怀疑（从您下面的评论中）您的问题并不是您所描述的。尝试这样的事情（未经测试，因为我不使用 MySQL - 它适用于 SQL Server 和 SQLite）：

```
select
  user.id, i.ts
from 
  (select id, max(timestamp) as ts from items group by id) i
join
  user u on u.id = i.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:11:05.347

mysql 有一个“作弊”，用于仅获取每个组的第一行：

```
select *
from (select
        u.id as user_id,
        u.name,
        i.id as item_id,
        i.timestamp
      from user u
      join item i on i.user_id = u.id
      order by timestamp desc -- "desc" = order descending
    ) x
group by user_id 
```

“作弊”是 mysql 不允许您*按*列聚合非分组（与我知道的所有其他数据库不同）。它不会给出 SQL 语法错误，而是仅返回每个组的*第一*条记录。不是 SQL 标准，但非常方便。

这样做的好处是您不需要任何相关的子查询，这些子查询非常慢。

内部查询用于以时间戳最新优先顺序对记录进行排序，因此每个用户遇到的第一条记录是“最近的”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:57:59.327

您将需要使用`JOIN`. 首先按用户创建一个子选择分组并选择`MAX`时间戳。这将为每个用户提供一行，其中包含最新条目（并丢失所有其他字段）。

然后使用表达式中的时间戳将其连接回来`JOIN`，以恢复丢失的字段。

抱歉，但如果没有表模式，就很难比这更具体。希望`JOIN`参考资料指出您修改查询的正确方向。~~

# java - 获取Java中指定值以下的所有值

> ID：12082758
> 
> 赞同：-1
> 
> 时间：2012-08-22T23:26:58.670
> 
> 标签：java, arrays

我正在尝试获取数组中低于用户指定的 BigDecimal 值的所有值。这是我到目前为止所拥有的：

```
class MyClass {
    public static void mymethod(BigDecimal[] values, BigDecimal uservalues) {
          for (int i = 0; i < values.length(); i++) {
              System.out.prinln(String.valueof(list.get(i)));
          }
    }
} 
```

我不明白如何做到这一点的逻辑。

因此，可以说`values`具有以下值：

```
24.50
23.58
24.68
21.68
2.05
48.36

USER INPUT: 23

2.05
21.68 
```

希望我的问题很清楚。任何人都可以提供任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:35:11.993

因为我认为这是家庭作业，所以我不会给你答案。但可以告诉你，你会感兴趣的[`BigDecimal#compareTo(BigDecimal)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)。;)

哦，顺便说一句：查看您正在使用但不熟悉的类的文档**总是**一个好主意。或者，如果您使用 Eclipse 之类的 IDE，您可以*使用*自动完成功能为您提供所有可能方法的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:39:13.907

一些东西：

*   你的语法有点不对劲。应该是`System.out.println`。
*   `list`不知从何而来；我想你的意思是使用`values`.
*   你正在使用一个数组；要访问数组中的元素，您可以使用定义的索引位置（在您的情况下是`i`）。
*   提示：如果您发现一个高于指定值的值，则跳过它。你会想用它[`BigDecimal.compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)来帮助实现这一点。您还必须将结果存储在某个地方，也许是`String`?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T23:48:17.613

使用[`NavigableSet.headSet`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableSet.html#headSet%28E%29):-)

> 返回此集合中元素严格小于 的部分的视图`toElement`。

这可能是比手动迭代和使用更简单的解决方案`compareTo`。

```
/* use this in place of an array */
final NavigableSet<BigDecimal> values = new TreeSet<BigDecimal>();
/* read from the user e.g. Scanner.nextBigDecimal() */
final BigDecimal ceiling = ...;
for (final BigDecimal lower : values.headSet(ceiling)) {
  /* lower will be less than ceiling */
} 
```

# wordpress - 为什么wordpress会改变mathml标签的顺序

> ID：12082761
> 
> 赞同：0
> 
> 时间：2012-08-22T23:27:26.507
> 
> 标签：wordpress, mathml

我将以下数学代码正确存储在数据库中。但是，当它显示时，似乎 wordpress 改变了“mfrac”内结束标签“mrow”的顺序。所以渲染的数学表达式是错误的。

这是原始的mathml代码：

```
<math>
    <mrow>
            <mi selected="true">f</mi>
            <mo stretchy="false">(</mo>
            <mi>x</mi>
            <mo stretchy="false">)</mo>
            <mo>=</mo>
            <mo>&minus;</mo>
            <mfrac>
                    <mi>x</mi>
                    <mrow>
                            <mn>1</mn>
                            <mo>+</mo>
                            <mrow>
                                    <mo>|</mo>
                                    <mi>x</mi>
                                    <mo>|</mo>
                            </mrow>
                    </mrow>
            </mfrac>
            <mo stretchy="false">(</mo>
            <mi>x</mi>
            <mo>&isin;</mo>
            <mi>R</mi>
            <mo stretchy="false">)</mo>
    </mrow>
</math> 
```

这是在浏览器中呈现的 html 代码：

```
 <math>
    <mrow>
            <mi selected="true">f</mi>
            <mo stretchy="false">(</mo>
            <mi>x</mi>
            <mo stretchy="false">)</mo>
            <mo>=</mo>
            <mo>&minus;</mo>
            <mfrac>
                    <mi>x</mi>
                    <mrow>
                        <mn>1</mn>
                        <mo>+</mo>
                     </mrow>
                     <mrow>
                        <mo>|</mo>
                        <mi>x</mi>
                        <mo>|</mo>
                    </mrow>
            </mfrac>
            <mo stretchy="false">(</mo>
            <mi>x</mi>
            <mo>&isin;</mo>
            <mi>R</mi>
            <mo stretchy="false">)</mo>
    </mrow>
</math> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:57:57.790

`mrow`并且`mfrac`在 MathML 标记层次结构的同一级别上，这称为表示布局模式，因此[规范](http://www.w3.org/Math/DTD/mathml2/mathml2.dtd)可能被误解为不允许嵌套`mrow`s：

> 表达式内容的递归定义。在最低级别包括演示结构，以便演示布局模式包含演示或内容元素。在最低级别包含内容构造，以便内容元素在叶级别保存 PCDATA 或表示元素（对于上下文中允许的可替换元素）

也可能与[现有的错误](http://core.trac.wordpress.org/ticket/13340)有关。

# java - 玩！框架 2.0.3，i18n 错误，预期为 `=' 但找到了 `-'

> ID：12082763
> 
> 赞同：0
> 
> 时间：2012-08-22T23:27:50.777
> 
> 标签：java, scala, internationalization, playframework

我是“Play！Framework”的新手，我正在尝试为 pt-BR 做一个 i18n。

我的消息文件名为“Message.pt-BR”，我将 pt-BR 语言放在 application.conf 中。

在 Java 中，我使用这样的东西：

```
flash("success", Messages.get("logout.success")); 
```

在 scala.html 文件中，我正在使用它：

```
@Messages("logout") 
```

在我的 Message.pt-BR 文件中，我有这个：

```
logout=Sair
logout.success=Logout realizado com sucesso. Volte sempre! 
```

当我编译项目时我没有错误，但是当我请求某些页面时出现此错误：

```
`=' expected but `-' found
Messages.pt-BR 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:44:30.697

我认为您必须将消息文件从 to 重命名`Messages.pt-BR`（`Messages.pt_BR`使用较低的“_”）。

# php - 构建 Pecl 扩展时出错

> ID：12082764
> 
> 赞同：1
> 
> 时间：2012-08-22T23:27:50.887
> 
> 标签：php, build, makefile, pecl

我正在尝试构建 SCA_SDO 扩展，但是当我运行`make`命令时出现以下错误：

```
make
/bin/sh /home/Alison/Downloads/SCA_SDO-1.2.4/libtool --mode=compile g++ -I/home/Alison/Downloads/SCA_SDO-1.2.4 -I. -I/home/Alison/Downloads/SCA_SDO-1.2.4 -DPHP_ATOM_INC -I/home/Alison/Downloads/SCA_SDO-1.2.4/include -I/home/Alison/Downloads/SCA_SDO-1.2.4/main -I/home/Alison/Downloads/SCA_SDO-1.2.4 -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -I/usr/include/libxml2  -DHAVE_CONFIG_H  -g -O2   -c /home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp -o sdo.lo 
libtool: compile:  g++ -I/home/Alison/Downloads/SCA_SDO-1.2.4 -I. -I/home/Alison/Downloads/SCA_SDO-1.2.4 -DPHP_ATOM_INC -I/home/Alison/Downloads/SCA_SDO-1.2.4/include -I/home/Alison/Downloads/SCA_SDO-1.2.4/main -I/home/Alison/Downloads/SCA_SDO-1.2.4 -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -I/usr/include/libxml2 -DHAVE_CONFIG_H -g -O2 -c /home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp  -fPIC -DPIC -o .libs/sdo.o
In file included from /home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:42:0:
/home/Alison/Downloads/SCA_SDO-1.2.4/php_sdo_int.h:128:20: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:80:8: error: conflicting specifiers in declaration of 'arginfo_sdo_dataobject'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:86:8: error: conflicting specifiers in declaration of 'arginfo___get'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:90:8: error: conflicting specifiers in declaration of 'arginfo___set'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:95:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:103:8: error: conflicting specifiers in declaration of 'arginfo_sdo_dataobject_createdataobject'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:107:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:119:8: error: conflicting specifiers in declaration of 'arginfo_sdo_sequence_getproperty'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:123:8: error: conflicting specifiers in declaration of 'arginfo_sdo_sequence_move'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:128:8: error: conflicting specifiers in declaration of 'arginfo_sdo_sequence_insert'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:134:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:144:8: error: conflicting specifiers in declaration of 'arginfo_sdo_list_insert'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:149:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:158:8: error: conflicting specifiers in declaration of 'arginfo_sdo_datafactory_create'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:163:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:170:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:177:8: error: conflicting specifiers in declaration of 'arginfo_sdo_das_datafactory_addType'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:183:8: error: conflicting specifiers in declaration of 'arginfo_sdo_das_datafactory_addPropertyToType'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:192:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:201:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:214:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:225:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:234:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:253:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:263:8: error: conflicting specifiers in declaration of 'arginfo_sdo_model_type_identifier'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:267:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:281:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:298:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:310:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:325:8: error: conflicting specifiers in declaration of 'arginfo_sdo_model_reflectiondataobject_export'
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:330:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:352:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:359:1: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:373:13: error: 'function_entry' does not name a type
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp: In function 'int zm_startup_sdo(int, int)':
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:447:2: warning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:450:2: error: 'sdo_propertyaccess_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:454:2: error: 'sdo_dataobject_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:460:2: error: 'sdo_sequence_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:465:2: error: 'sdo_list_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:469:2: error: 'sdo_list_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:473:2: error: 'sdo_list_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:477:2: error: 'sdo_datafactory_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:481:2: error: 'sdo_das_dataobject_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:486:2: error: 'sdo_das_datafactory_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:491:2: error: 'sdo_das_changesummary_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:495:2: error: 'sdo_das_setting_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:499:2: error: 'sdo_list_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:503:2: error: 'sdo_model_type_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:507:2: error: 'sdo_model_property_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:511:5: error: 'sdo_das_df_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:515:5: error: 'sdo_dataobjectimpl_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:519:5: error: 'sdo_sequenceimpl_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:523:5: error: 'sdo_model_typeimpl_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:527:5: error: 'sdo_model_propertyimpl_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:531:5: error: 'sdo_model_reflectiondataobject_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:535:5: error: 'sdo_exception_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:539:5: error: 'sdo_exception_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:544:5: error: 'sdo_exception_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:549:5: error: 'sdo_exception_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:554:5: error: 'sdo_exception_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:559:5: error: 'sdo_exception_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:564:5: error: 'sdo_exception_methods' was not declared in this scope
/home/Alison/Downloads/SCA_SDO-1.2.4/sdo.cpp:569:5: error: 'sdo_cppexception_methods' was not declared in this scope
make: *** [sdo.lo] Error 1 
```

似乎我不是唯一一个： [https ://bugs.php.net/bug.php?id=58951](https://bugs.php.net/bug.php?id=58951)

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:49:15.760

我现在遇到同样的问题，除了破解构建文件之外找不到解决方法。

我正在使用 CentOS 6.3、PHP5.3 并尝试对 UPS Quantum View 项目进行一些测试。

在我看来，这个问题从未真正得到解决，因为我到处都找到了对它的引用。

我想到目前为止我发现的唯一解决方案是根本不使用扩展，而是使用更通用的 XML 构建器。

如果我遇到任何有用的东西，我会在这里更新。

[编辑]好的，我刚遇到这个：[https ://groups.google.com/forum/#!topic/phpsoa/HQVxiBmsFv0](https://groups.google.com/forum/#!topic/phpsoa/HQVxiBmsFv0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T18:18:34.647

我在尝试构建其他东西时遇到了类似的问题，结果证明我使用的是相关头文件之一的修改版本。检查您正在构建的程序是否指定了所需头文件的特定版本或来源（可能在自述文件中），并尝试获取指定文件的新副本并确保它们是构建时使用的文件（通常只需将它们复制到源树的根目录即可）。

# mysql - MySQL 查询以在查找不匹配项时加入 3 个表

> ID：12082765
> 
> 赞同：2
> 
> 时间：2012-08-22T23:27:54.590
> 
> 标签：mysql, sql, join

（我想不出一个简洁的标题）

大家好

我一直是该网站的长期浏览者，但在遇到无法解决的问题后，我想我会注册问一个问题。我不知道如何表达这个问题，这使得寻找帮助变得困难，很可能这个问题已经得到解答，我只是不知道找到答案的正确搜索条件。也可能是我正在尝试做的事情没有答案。抱歉，如果我没有使用正确的程序来询问。

我想要实现的目标可以通过脚本轻松实现，这可能是唯一合适的方法。我的情况使我处于被问到是否只能通过 MySQL 查询执行此操作的情况。

## 问题：

这是情况的性质（我不知道如何轻松地总结为一个主题）。我在 mySQL 数据库中有 3 个表：

```
Table: account
column: number (unique id)

Table: user
column: number (unique id)
column: account (links the user to an account)

Table: service
column: number (unique id)
column: user  (links the service to a user)
column: servdef (the type of service) 
```

基本上一个帐户拥有多个用户，每个用户可以拥有多个服务。

我被要求编写一个查询，它将显示*不*包含特定类型（service.servdef）的服务（service.number）的所有帐户（account.number）。我在这个网站上看到过关于使用 NOT EXISTS 的帖子，但我无法让它在我的情况下正常工作。这甚至可以通过单个 SQL 查询实现吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:49:50.797

使用`LEFT JOIN`它，因为有些`users`在 table 上没有记录`service`。尝试，

```
SELECT  a.*
FROM    account a
            LEFT JOIN `user` b
                on a.number = b.account
            LEFT JOIN service c
                ON b.number = c.`user`
WHERE   c.`user` IS NULL OR
        c.servdef <> 'particularService' 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/ab1d4/1 "点击这里重定向")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:52:07.473

使用`NOT EXISTS`：

```
SELECT a.number
FROM account a
WHERE NOT EXISTS (
  SELECT u.account
  FROM user u INNER JOIN service s ON (u.number = s.user)
  WHERE u.account = a.number
    AND s.servdef = 'your_particular_type'
) 
```

**[演示](http://sqlfiddle.com/#!2/841cf/2)**（sqlfiddle）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:54:17.133

`NOT IN`通常是最慢的形式，但`NOT EXISTS`可能比`LEFT JOIN`取决于您的引擎和索引更快。试一试，看看。

```
SELECT a.number
FROM account a
WHERE a.number NOT IN (
  SELECT u.account
    FROM user u
    INNER JOIN service s ON u.number = s.user
    WHERE s.servdef = 'your_particular_type'
) 
```

**编辑：**错误的推理`NOT IN`，对不起。虽然我发现它比可空列更容易阅读`NOT EXISTS`，但我认为这不适用于可空列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T00:03:15.257

这是我昨天看到的另一篇文章中给出的公认答案的改编。

@servdef 是您要查找的帐户不存在的服务类型。

```
select a.number
from account a 
  inner join user u on a.number = u.account
  inner join service s on u.number = s.user
group by a.number
having max(case when s.servdef = @servdef then 1 else 0 end) = 0 
```

（戈登如果你读到这里，请随意笑）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-28T17:15:53.290

问题原来是 MySQL 的版本太旧，无法支持子查询。一台服务器升级到新硬件和现代操作系统，问题就解决了。其他答案在技术上是正确的，但仅适用于现代版本的 MySQL。在提出问题时，我并不知道 MySQL 的版本是一个因素。我什至没有想过要检查的东西。

# javascript - 当图像位于窗口顶部时自动翻页

> ID：12082768
> 
> 赞同：0
> 
> 时间：2012-08-22T23:28:15.230
> 
> 标签：javascript, jquery

好的，我有一个带有堆叠`div`和锚点的页面，它们使用 jquery 幻灯片向下滑动。当堆叠 div 的底部到达屏幕顶部时，我希望 jquery 自动滚动到下一个 div，可能是 1000px 南。我怎么能在javascript中做到这一点？

我的想法是将图像放在 div 的底部并以某种方式检查屏幕以查看图像是否位于监视器的上半部分，这将调用一个函数来滚动到下一个锚点。

这可能吗？

![我需要什么](../Images/d7aff7f64fe0ec32b4deba1c57a02df8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:45:44.423

```
var wHeight =$(window).height()/2;  
$(window).scroll(function(){   

    var imgOff = $('#two').offset().top-$(window).scrollTop();

    if(imgOff<wHeight){    
        alert('Kill BILL!');    
    }    
}); 
```

还没有尝试过，但它应该可以工作编辑：这个工作在这里试试 [http://jsfiddle.net/BG2Cz/](http://jsfiddle.net/BG2Cz/) PS被警告一旦你通过中间它会垃圾邮件警报

# ruby - Ruby Net::SSH 在 PTY 中获取退出状态

> ID：12082769
> 
> 赞同：1
> 
> 时间：2012-08-22T23:28:31.040
> 
> 标签：ruby, ssh, net-ssh

我正在尝试将一些功能写入我的项目的 Net::SSH::Telnet 库。具体来说，我需要能够读取我编写的任何命令的退出状态。

这是我正在修改的 Net::SSH::Telnet 库的原始来源

```
@buf = ""
@eof = false
@channel = nil
@ssh.open_channel do |channel|
  channel.request_pty { |ch,success|
    if success == false
      raise "Failed to open ssh pty"
    end
  }
  channel.send_channel_request("shell") { |ch, success|
    if success
      @channel = ch
      waitfor(@options['Prompt'], &blk)
      return
    else
      raise "Failed to open ssh shell"
    end
  }
  channel.on_data { |ch,data| @buf << data }
  channel.on_extended_data { |ch,type,data| @buf << data if type == 1 }
  channel.on_close { @eof = true }
end
@ssh.loop 
```

现在这是我所做的更改：

```
@stderr = ""
@exit_code = nil
@buf = ""
@eof = false
@channel = nil
@ssh.open_channel do |channel|
  channel.request_pty { |ch,success|
    if success == false
      raise "Failed to open ssh pty"
    end
  }
  channel.send_channel_request("shell") { |ch, success|
    if success
      @channel = ch
      waitfor(@options['Prompt'], &blk)
      return
    else
      raise "Failed to open ssh shell"
    end
  }
  channel.on_data { |ch,data| 
    @stdout << data
    @buf << data
  }
  channel.on_extended_data { |ch,type,data| 
    @stderr << data
    @buf << data if type == 1
  }
  channel.on_request("exit-status") do |ch,data|
    @exit_code = data.read_long
  end
  channel.on_close { 
    @eof = true
  }
end
@ssh.loop 
```

问题是当我运行它时，@exit_code 变量永远不会从 nil 改变。

我这样做的原因是因为我需要三个主要功能： 1\. 有状态（交互式）通信（这样如果我 cd 进入一个目录，下一个命令将出现在该目录中） 2\. 读取退出状态的能力我执行的任何命令 3\. 响应提示的能力

我选择 Net::SSH::Telnet 进行调整，因为它已经提供了 1 和 3。我想我可以修复它以支持数字 2。
如果有人能看到如何解决这个问题，我将不胜感激。Net::SSH::Telnet 其余部分的来源在这里：

[https://github.com/jasonkarns/net-ssh-telnet/](https://github.com/jasonkarns/net-ssh-telnet/)

我有一个 repo 的分叉版本，我很乐意接受拉取请求。

[https://github.com/0x783czar/net-ssh-remotescript](https://github.com/0x783czar/net-ssh-remotescript)

此外，如果有人对提供这三个功能的任何其他 ruby​​ 库有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:06:54.800

您可能想查看 Ruby “ssh” gem 和 “remote_task” gem 的源代码。

*   [http://rubygems.org/gems/ssh](http://rubygems.org/gems/ssh)

相关源代码在这里：

*   [https://github.com/seattlerb/ssh/blob/master/lib/ssh.rb](https://github.com/seattlerb/ssh/blob/master/lib/ssh.rb)

它具有处理“cd”命令、i/o 通道和退出状态的代码。

# xcode - 如何让 UIImageView 加载视网膜和非视网膜图像

> ID：12082771
> 
> 赞同：0
> 
> 时间：2012-08-22T23:28:35.320
> 
> 标签：xcode, uiimageview, uiimage, retina-display

我是 iOS 编程新手，我不知道如何根据运行应用程序的屏幕使 UIImageView 加载内容。就我而言，我有一个 100 帧的动画。是否可以使用代码自动缩放非视网膜显示器的图像（图像为 640x960 分辨率）？谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T00:14:25.587

是的。只需在您的项目（image1.png，image2.png，...）和您的视网膜版本（image1@2x.png，image2@2x.png，...）中添加普通图像。视网膜版本必须在名称末尾附加“@2x”。

只需在您的代码中使用没有“@2x”的版本，Xcode 将完成剩下的工作。此外，您可以只导入“@2x”版本，在代码中使用不带“@2x”的图像，iOS 将在非视网膜设备中自动下采样。

# iphone - UITableviewCell 取消选中回调

> ID：12082773
> 
> 赞同：1
> 
> 时间：2012-08-22T23:28:54.047
> 
> 标签：iphone, objective-c, ios, ipad

我有一个自定义 UItableviewcell （我已将其子类化）。我必须在选择时更改它的选择样式，并在选择其他单元格时恢复更改。我有一个回调 setSelectionStyle ，我可以在其中更改外观以显示其被选中，但我没有回调来恢复该更改。

任何想法苹果如何从 UItableviewcell 中删除蓝色的选择层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:34:06.857

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

   /*

     All required implementation with the selected row 

   */

    // Use the following code to deselect the row.
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

注意：不要忘记在 .m 文件中添加 tableview 委托。

# java - 在通配符类型 ArrayList 中添加元素

> ID：12082780
> 
> 赞同：1
> 
> 时间：2012-08-22T23:29:28.577
> 
> 标签：java, generics, arraylist, wildcard, bounded-wildcard

我正在尝试在列表类型参数是扩展问题的通配符的列表中添加一个元素

```
 ArrayList<? extends Question> id  = new ArrayList<? extends Question>();
    id.add(new Identification("What is my name?","some",Difficulty.EASY));
    map.put("Personal", id); 
```

其中标识是问题的子类。问题是一个抽象类。

它给了我这个错误

在线#1`Cannot instantiate the type ArrayList<? extends Question>`

在第 2 行

```
The method add(capture#2-of ? extends Question) in the type ArrayList<capture#2-of ? extends Question> is not applicable for the arguments (Identification) 
```

为什么会显示这样的错误？是什么原因造成的？我将如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:42:51.123

想象以下场景：

```
List<MultipleChoiceQuestion> questions = new ArrayList<MultipleChoiceQuestion>();
List<? extends Question> wildcard = questions;
wildcard.add(new FreeResponseQuestion()); // pretend this compiles

MultipleChoiceQuestion q = questions.get(0); // uh oh... 
```

将某些内容添加到通配符集合是危险的，因为您不知道`Question`它实际包含什么类型。它*可能*是`FreeResponseQuestion`s，但也可能不是，如果不是，那么你将`ClassCastException`在路上的某个地方得到 s。由于向通配符集合中添加内容几乎总是会失败，因此他们决定将运行时异常转为编译时异常，从而为大家省去一些麻烦。

为什么要创建一个`ArrayList<? extends Question>`? 由于上述原因，您无法向其中添加任何内容，因此它几乎没有用。您几乎可以肯定要完全省略通配符：

```
List<Question> id = new ArrayList<Question>();
id.add(new Identification(...)); 
```

# debugging - 使用 WinDbg 在运行时修改函数内容

> ID：12082782
> 
> 赞同：2
> 
> 时间：2012-08-22T23:29:58.543
> 
> 标签：debugging, windbg, disassembly

我想使用 WinDbg 附加到正在运行的进程，并修改某个函数的代码以简单地在调用时返回（出于教育目的）。

我使用了以下命令：

*uf dll！名称*

这给了我函数的反汇编。

我在某个位置选择了一个特定地址并将其修改为*ret*：

*新地址 c3*

每次都会崩溃，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T00:04:06.440

您需要确保进行了适当的清理，以使堆栈处于正确的状态。根据调用约定，该方法通常会将内容作为[序言](http://en.wikipedia.org/wiki/Function_prologue)的一部分推送到堆栈上。这必须作为结语的一部分撤消。

这是使用 WinDbg 更改 JIT 编译方法的示例。

编码：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Message();
            Console.ReadLine();
            Message();
            Console.WriteLine("done");
        }

        private static void Message()
        {
            Console.WriteLine("message");
        }
    }
} 
```

我将其编译为 Debug 以防止编译器内联对`Message`.

然后我运行可执行文件并将调试器附加到`ReadLine`.

对于托管代码，我需要使用 SOS.dll 来定位 JIT 编译的代码。于是我加载了SOS，找到代码的地址如下。

```
0:004> .loadby sos clr
0:004> !name2ee *!ConsoleApplication1.Program
Module:      04a11000
Assembly:    mscorlib.dll
--------------------------------------
Module:      001b2e94
Assembly:    ConsoleApplication1.exe
Token:       02000002
MethodTable: 001b37b4
EEClass:     001b125c
Name:        ConsoleApplication1.Program
0:004> !dumpmt -md 001b37b4
EEClass:         001b125c
Module:          001b2e94
Name:            ConsoleApplication1.Program
mdToken:         02000002
File:            c:\temp\ConsoleApplication1\ConsoleApplication1\bin\Debug\ConsoleApplication1.exe
BaseSize:        0xc
ComponentSize:   0x0
Slots in VTable: 7
Number of IFaces in IFaceMap: 0
--------------------------------------
MethodDesc Table
   Entry MethodDe    JIT Name
04d14960 04a16728 PreJIT System.Object.ToString()
04d08790 04a16730 PreJIT System.Object.Equals(System.Object)
04d08360 04a16750 PreJIT System.Object.GetHashCode()
04d016f0 04a16764 PreJIT System.Object.Finalize()
001bc019 001b37ac   NONE ConsoleApplication1.Program..ctor()
002a0050 001b3794    JIT ConsoleApplication1.Program.Main(System.String[])
002a00a8 001b37a0    JIT ConsoleApplication1.Program.Message()
0:004> !u 001b37a0    
Normal JIT generated code
ConsoleApplication1.Program.Message()
Begin 002a00a8, size 21
*** WARNING: Unable to verify checksum for c:\temp\ConsoleApplication1\ConsoleApplication1\bin\Debug\ConsoleApplication1.exe

c:\temp\ConsoleApplication1\ConsoleApplication1\Program.cs @ 20:
002a00a8 55              push    ebp        <-- prologue
002a00a9 8bec            mov     ebp,esp    
002a00ab 833d60311b0000  cmp     dword ptr ds:[1B3160h],0   <-- start of method
002a00b2 7405            je      ConsoleApplication1!ConsoleApplication1.Program.Message()+0x11 (002a00b9)
002a00b4 e8fb6ff570      call    clr!JIT_DbgIsJustMyCode (711f70b4)
002a00b9 90              nop

c:\temp\ConsoleApplication1\ConsoleApplication1\Program.cs @ 21:
002a00ba 8b0d34217403    mov     ecx,dword ptr ds:[3742134h] ("message")
002a00c0 e82bd3ad04      call    mscorlib_ni!System.Console.WriteLine(System.String) (04d7d3f0)
002a00c5 90              nop

c:\temp\ConsoleApplication1\ConsoleApplication1\Program.cs @ 22:
002a00c6 90              nop
002a00c7 5d              pop     ebp   <-- epilogue
002a00c8 c3              ret 
```

然后我打开内存窗口并将其指向 002a00ab，它是实际方法体的第一部分，`Message`并将两个操作码分别更改为`5d`和`c3`for`pop edb`和`ret`。如果我跳过这一`pop edb`部分，堆栈就会被弄乱，我会得到一个异常。

我点击Go，应用程序继续运行，没有第二次打印“消息”。

# jquery - 在 jquery datepicker 中选择的日期不能再次选择

> ID：12082784
> 
> 赞同：0
> 
> 时间：2012-08-22T23:30:20.537
> 
> 标签：jquery, datepicker

我正在使用 jquery datepicker。我可以在日历上选择一个日期。但是，当我从输入框中删除日期时，单击日历并选择我之前选择的相同日期，我无法选择它。重新选择的日期不会显示在输入框中。

任何指针都会很有用。

感谢关注。

# java - 为什么 Fragment 不能是公共静态类？

> ID：12082789
> 
> 赞同：1
> 
> 时间：2012-08-22T23:31:16.877
> 
> 标签：java, android, android-activity, android-fragments

我遇到了这样的问题：我想让一些 Fragment 作为`public static`我的`Activity`班级成员。

但是当我把这样的片段放到布局文件中时，我收到了这样的异常：

```
Caused by: android.support.v4.app.Fragment$InstantiationException: 
Unable to instantiate fragment com.tst.MainActivity.InnerFragment:
make sure class name exists, is public, 
and has an empty constructor that is public
... 
```

我的代码如下所示：

```
package com.tst;

public final class MainActivity extends SherlockFragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public static class InnerFragment extends SherlockFragment {

        public InnerFragment() {
            super();
        }
        ...
    }
} 
```

布局文件如下所示：

```
<LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" >

  <fragment
        android:id="@+id/inner_fragment"
        android:name="com.tst.MainActivity.InnerFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</LinearLayout> 
```

现在我的问题是为什么这样的代码会抛出这个异常？由于Android应该能够按原样进行实例`InnerFragment`化`public static`。更重要的是，我曾经使用`public static`Fragments 并且它们起作用了，但是当时我以编程方式将它们添加到代码中，而不是在 xml 定义中。

问候， 迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:42:59.577

改变

```
android:name="com.tst.MainActivity.InnerFragment" 
```

到

```
android:class="com.tst.MainActivity$InnerFragment" 
```

# javascript - 关于动态元素中的循环事件

> ID：12082792
> 
> 赞同：0
> 
> 时间：2012-08-22T23:31:37.470
> 
> 标签：javascript, jquery

我需要将事件设置为“即时”的元素，例如`var X = $('HTML CODE HERE')`，但是当我将事件设置为最后一个元素时，所有其他元素都会获得最后一个事件。

这里的例子：http: [//jsfiddle.net/QmxX4/6/](http://jsfiddle.net/QmxX4/6/)

```
$(document).ready(function() {

    var ulItem = $('.lst');

    for (var x=0; x<5; x++) {

        var newItemElement = $('<li style="border:solid 1px blue;width:200px;height:40px;"></li>');
        ulItem.append(newItemElement);

        var generator = Math.random();
        newItemElement.on('click', function() {
            console.log(generator);  
        });

    }

}); 
```

所有元素都是不同的，我直接在元素中附加事件，我尝试在将事件添加到元素之前和之后附加，但不起作用，所有元素都获取最后一个事件。

如果您单击`<li></li>`最后一个事件中生成的获取代码，但“理论上”所有元素都附加了不同的事件..

但是，如果我在将所有项目附加到 之后制作其他循环附加元素`<ul></ul>`，如下所示：

```
$.each($(ulItem).children('li'), function(i, item) {
    console.log($(this));
    var generator = Math.random();
    $(this).on('click', function() {
         console.log(generator);
    });
}); 
```

工作......有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:41:01.647

在你的第一个循环中，`generator`变量属于`ready`回调函数，内部日志函数都共享它。

在您的第二个循环中，该`generator`变量属于`each`每个项目调用一次的回调函数，因此日志函数都看到一个不同的变量。

# java - 在Android中重新定位后获取图像顶部和左侧

> ID：12082793
> 
> 赞同：0
> 
> 时间：2012-08-22T23:31:56.870
> 
> 标签：java, android

我编写了一个可以拖动图像的 android 应用程序。默认模式下图像的顶部和左侧是 0, 0。我的问题是如何在拖动后获得可见图像的顶部和左侧。

触摸类：

```
public class Touch implements OnTouchListener {

    private static final int NONE = 0;
    private static final int DRAG = 1;
    private static final int ZOOM = 2;

    private static final float MIN_ZOOM = 1f;
    private static final float MAX_ZOOM = 5f;

    private Matrix matrix = new Matrix();
    private Matrix savedMatrix = new Matrix();

    private PointF start = new PointF();
    private PointF mid = new PointF();

    private float[] values = new float[9];

    private int mode = NONE;
    private float dx;
    private float dy;
    private float matrixX = 0;
    private float matrixY = 0;
    private float width = 0;
    private float height = 0;
    private float oldDistance = 1f;

    public boolean onTouch(View view, MotionEvent event) {
         ImageView imageView = (ImageView)view;

         switch(event.getAction() & MotionEvent.ACTION_MASK) {

             case MotionEvent.ACTION_DOWN:
                 savedMatrix.set(matrix);
                 start.set(event.getX(), event.getY());
                 mode = DRAG;
                 break;

             case MotionEvent.ACTION_POINTER_DOWN:
                 oldDistance = spacing(event);
                 if(oldDistance > 10f) {
                    savedMatrix.set(matrix);
                    midPoint(mid, event);
                    mode = ZOOM;
                 }
                 break;

             case MotionEvent.ACTION_UP:
             case MotionEvent.ACTION_POINTER_UP:
                 mode = NONE;
                 break;

             case MotionEvent.ACTION_MOVE:
                if(mode == DRAG) {
                    matrix.set(savedMatrix);
                    matrix.getValues(values);
                    matrixX = values[Matrix.MTRANS_X];
                    matrixY = values[Matrix.MTRANS_Y];
                    width = values[Matrix.MSCALE_X] * imageView.getDrawable().getIntrinsicWidth();
                    height = values[Matrix.MSCALE_Y] * imageView.getDrawable().getIntrinsicHeight();
                    dx = event.getX() - start.x;
                    dy = event.getY() - start.y;
                    if(matrixY + dy > 0)
                        while(matrixY + dy > 0)
                            dy--;
                    if(matrixX + dx + width < imageView.getWidth())
                        while(matrixX + dx + width < imageView.getWidth())
                            dx++;
                    if(matrixY + dy + height < imageView.getHeight())
                         while(matrixY + dy + height < imageView.getHeight())
                             dy++;
                    if(matrixX + dx > 0)
                         while(matrixX + dx > 0)
                             dx--;
                    matrix.postTranslate(dx, dy);
                 }
                 else if(mode == ZOOM) {
                    float newDistance = spacing(event);
                    if(newDistance > 10f) {
                        matrix.set(savedMatrix);
                        float scale = newDistance / oldDistance;
                        matrix.getValues(values);
                        float currentScale = values[Matrix.MSCALE_X];
                        if(scale * currentScale > MAX_ZOOM) 
                            scale = MAX_ZOOM / currentScale;
                        else if (scale * currentScale < MIN_ZOOM)
                            scale = MIN_ZOOM / currentScale;
                        matrix.postScale(scale, scale, mid.x, mid.y);
                    }
                 }
                 break;
        }
        imageView.setImageMatrix(matrix);
        return true;
    }

    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    private void midPoint(PointF point, MotionEvent event) {
        point.set((event.getX(0) + event.getX(1)) / 2, (event.getY(0) + event.getY(1)) / 2);
    }

} 
```

活动类：

```
public class RepositionTestActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.reposition_test_layout);
        imageView = (ImageView)findViewById(R.id.android_image);
        imageView.setOnTouchListener(new Touch());
    }

} 
```

布局xml：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/reposition_test_layout"
    android:paddingLeft="20dp"
    android:paddingTop="20dp"
    android:paddingRight="20dp"
    android:paddingBottom="20dp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
         android:id="@+id/android_image"
         android:src="@drawable/android"
         android:layout_width="300dp"
         android:layout_height="300dp"
         android:scaleType="matrix"
         android:contentDescription="@string/android_image_description" >
    </ImageView>

</LinearLayout> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:04:48.673

我终于解决了这个问题。当用户重新定位图像时，我们可以将矩阵信息保存在文件或数据库中。

活动类：

```
public class RepositionTestActivity extends Activity {

    private ImageView imageView;
    private Button button;
    private SQLiteDatabase db;
    private Cursor cursor;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.reposition_test_layout);
        imageView = (ImageView)findViewById(R.id.android_image);
        button = (Button)findViewById(R.id.reposition_button);
        ViewTreeObserver viewTreeObserver = imageView.getViewTreeObserver();
        if(viewTreeObserver.isAlive()) {
            viewTreeObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
                public void onGlobalLayout() {
                    db = openOrCreateDatabase("DB_DATING", MODE_PRIVATE, null);
                    db.execSQL("" +
                        "CREATE TABLE IF NOT EXISTS tbl_images (" +
                        "   id INTEGER PRIMARY KEY AUTOINCREMENT," +
                        "   name VARCHAR(50) UNIQUE NOT NULL," +
                        "   scale_x FLOAT NOT NULL," +
                        "   scale_y FLOAT NOT NULL," +
                        "   trans_x FLOAT NOT NULL," +
                        "   trans_y FLOAT NOT NULL" +
                        ");");
                    cursor = db.query("tbl_images", new String[] {"name", "scale_x", "scale_y", "trans_x", "trans_y"}, "name = \"android\"", null, null, null, null);
                    imageView.setScaleType(ScaleType.MATRIX);
                    cursor.moveToNext();
                    if(cursor.getCount() > 0) {
                        Matrix matrix = new Matrix();
                        matrix.postScale(cursor.getFloat(1), cursor.getFloat(2));
                        matrix.postTranslate(cursor.getFloat(3), cursor.getFloat(4));
                        imageView.setImageMatrix(matrix);
                    }
                    imageView.setOnTouchListener(new Touch(imageView.getImageMatrix()));
                    button.setOnClickListener(new OnClickListener() {
                        public void onClick(View view) {
                            float[] values = new float[9];
                            imageView.getImageMatrix().getValues(values);
                            ContentValues contentValues = new ContentValues();
                            contentValues.put("scale_x", values[Matrix.MSCALE_X]);
                            contentValues.put("scale_y", values[Matrix.MSCALE_Y]);
                            contentValues.put("trans_x", values[Matrix.MTRANS_X]);
                            contentValues.put("trans_y", values[Matrix.MTRANS_Y]);
                            if(cursor.getCount() > 0) {
                                long count = db.update("tbl_images", contentValues, "name = \"android\"", null);
                                Log.d("Update Count", "===========> " + count);
                            }
                            else {
                                contentValues.put("name", "android");
                                long count = db.insert("tbl_images", null, contentValues);
                                Log.d("Insert Count", "===========> " + count);
                            }
                        }
                    });
                }
            });
        }
    }

} 
```

# php - 通过 AJAX 在另一个页面上的 JQuery GET PHP 数组

> ID：12082795
> 
> 赞同：0
> 
> 时间：2012-08-22T23:32:07.093
> 
> 标签：php, jquery, ajax, arrays

是否可以通过 AJAX 在另一个页面上创建 PHP 数组？这是我到目前为止所拥有的：

`index.php`

```
$.ajax({
   url: 'array.php', 
   type: 'GET',

   complete: function(data) {
      $('#div').html(data.responseText);
   }
}); 
```

`array.php`

```
$arr = array('red', 'blue', 'green');
echo $arr; //echo it? 
```

如您所见，我正在尝试加载`$arr`到 index.php 上的 div 中。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:36:43.937

除非您使用 PHP，否则您无法将其作为 PHP 数组获取。但是，您可以使用 json_encode 将其作为数组获取：

`echo json_encode($arr);`

可以用javascript解析。

使用 datatype: json （参见[http://api.jquery.com/jQuery.ajax](http://api.jquery.com/jQuery.ajax)）或其快捷方式 jQuery.getJSON() 在 JS 端读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:46:34.627

你不能回显一个数组，但你可以 print_r 例如在被调用的 php 文件中。

# ios - GData iPhone 存档错误

> ID：12082796
> 
> 赞同：5
> 
> 时间：2012-08-22T23:33:09.663
> 
> 标签：ios, xcode, gdata

按照此处的说明：http: [//hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)
我将 GData 添加到我的 iOS 5 项目中。当需要归档项目时，我收到以下错误：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_GDataServiceGoogleYouTube", referenced from:
      objc-class-ref in DataManager.o
  "_OBJC_CLASS_$_GDataEntryYouTubeVideo", referenced from:
      objc-class-ref in DataManager.o
      objc-class-ref in ListController.o
      objc-class-ref in ShareController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经检查了 GData.xcodeproj -> GDataTouchStaticLib 的构建设置，这就是我将它们设置为如图所示：) ![在此处输入图像描述](../Images/fd77d670c28dc0a4190f16788cc66cc7.png)

任何帮助表示赞赏，以帮助存档我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:48:05.633

您没有正确链接库。确保在添加库路径时仔细按照说明进行操作。有关详细信息，请参阅[架构 armv7 的未定义符号](https://stackoverflow.com/questions/6429494/undefined-symbols-for-architecture-armv7)。

# join - Symfony 2.1 中带有两个实体管理器的 JOIN 错误

> ID：12082803
> 
> 赞同：0
> 
> 时间：2012-08-22T23:33:56.667
> 
> 标签：join, doctrine, symfony-2.1

我有一个包含大量数据的数据库，我想用 JOIN 在 DQL 中构建一个简单的查询，但是我有一个“没有命名的关联”错误。我在一个 DB 中有 2 个表，“main”和“users_main”，另一个 DB 中有一个表“

这是我的代码：

**AdsMain.php：**

```
/**
 * @ORM\Column(name="user", type="integer", nullable=false)
 * @ORM\ManyToOne(targetEntity="Vt\KohanaBundle\Entity\AdsUsersMain")
 * @ORM\JoinColumn(name="user", referencedColumnName="id")
 */
private $user; 
```

**AdsMainRepository.php**

```
class AdsMainRepository extends EntityRepository {

    public function findPremiumsCallCenter() {

        $em = $this->getEntityManager();
        $consulta = $em->createQuery(
                'SELECT  a.title , u.fullname
                    FROM
                        KohanaBundle:Main AS a
                            JOIN 
                        a.user AS u'
        );

        $consulta->setMaxResults(20);
        $lista = $consulta->getResult();
        return $lista;
    }
} 
```

**AdsUsersMain**

```
class AdsUsersMain{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

} 
```

# 教义配置

```
doctrine:
    dbal:
        default_connection: vt #default connection
            connections:
            vt:
                driver:   %database_driver%
                        host:     %database_host%
                port:     %database_port%
                        dbname:   %database_name_vt%
                user:     %database_user_vt%
                password: %database_password_vt%
                charset:  UTF8
            kohana:
                driver:   %database_driver%
                host:     %database_host%
                    port:     %database_port%
                dbname:   %database_name_kohana%
                user:     %database_user_kohana%
                    password: %database_password_kohana%
                charset:  UTF8
    orm:
        auto_generate_proxy_classes: %kernel.debug%
        #auto_mapping: true

        default_entity_manager: vt   
        entity_managers:
        vt:
            connection: vt
            mappings:
                VentaBundle : ~
                UsuarioBundle : ~                    
        kohana:
            connection: kohana
            mappings:
                KohanaBundle : ~ 
```

当我调用函数 findPremiumsCallCenter() 我有这个错误：

[语义错误] 第 0 行，'AS u' 附近的第 161 列：错误：Vt\KohanaBundle\Entity\AdsMain 类没有名为用户 500 内部服务器错误的关联 - QueryException

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:16:34.977

请检查文档

[http://doctrine-orm.readthedocs.org/en/2.0.x/reference/association-mapping.html](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/association-mapping.html)

您的映射不正确。

# ruby-on-rails - API Signature is required to make requests to PayPal error, 我已经设置了 API 签名

> ID：12082805
> 
> 赞同：1
> 
> 时间：2012-08-22T23:34:03.430
> 
> 标签：ruby-on-rails, heroku, activemerchant

我现在有一个大问题。我的网站是用 Ruby on Rails 编写的，我正在使用活跃的商家 gem 与 PayPal 交互。该网站托管在 heroku 上。

我在 Heroku 应用程序中将 API 密钥和 API 签名设置为配置变量。但是，我仍然收到错误：

```
Running: rake assets:precompile
(in /tmp/build_3pvaswdp7wvca1)
rake aborted!
An API Certificate or API Signature is required to make requests to PayPal
(See full trace by running task with --trace) 
```

我可以单独运行 heroku run rake assets:precompile 并且工作得很好。

此外，我的登台站点在我的登台站点上设置了完全相同的配置变量（RACK_ENV 和 RAILS_ENV 在登台站点上设置为生产），并且似乎工作正常。但是，我的生产站点崩溃了。

关于可能发生的事情/如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:38:32.567

我刚刚发现了这个命令：

```
heroku labs:enable user-env-compile -a myapp 
```

但它是实验性的。

# mysql - mySQL 多个结果到一个结果行中

> ID：12082809
> 
> 赞同：4
> 
> 时间：2012-08-22T23:34:30.867
> 
> 标签：mysql

我有一个按产品 ID 存储图像 URL 的表，并且正在尝试编写一个查询，将所有图像结果拉到一行上。该表看起来像：

```
photoFlag photoName objectID 
```

其中 photoName 保存图像的相对路径，而 photoFlag 标识图像的类型（完整、拇指等）。我首先编写了一个快速查询来获取两个图像（具有不同的标志）来拉起。这就是我所拥有的：

```
select t2.pic, t4.pic, t2.id from
 (select p2.photoName as pic, p2.objectID as id from ds_photos as p2 where p2.photoFlag = 2) as t2,
 (select p4.photoName as pic, p4.objectID as id from ds_photos as p4 where p4.photoFlag = 4) as t4
where t2.id=t4.id 
```

这似乎是一个正确的查询，但是当我通过 phpMyAdmin 执行时，它永远不会返回结果并无限期地显示（嗯，至少大约 40 分钟）在“显示过程”列表中。有什么我在这里没有看到的错误导致无限循环吗？

理想情况下，我只想抓取带有 photoFlag=2 的图片（某些产品有多个图像）并将它们放在同一行中，但我不知道从哪里开始。有什么建议么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T23:43:46.047

用途`GROUP_CONCAT`：：

```
SELECT id, GROUP_CONCAT(photoName ) As pic 
FROM ds_photos 
WHERE (photoFlag = 2 or photoFlag = 4) and id = ?;
GROUP BY id 
```

`?`用你想要的ID替换。

# ruby - 我可以在中间停止 RSpec 测试运行吗？

> ID：12082811
> 
> 赞同：3
> 
> 时间：2012-08-22T23:34:51.410
> 
> 标签：ruby, rspec

有时在我开始 rspec 测试后，我意识到我想改变一些东西；如果它是一个长期的运行，我希望能够在中间停止它，改变它是什么，然后重新运行测试。有人会告诉我这是否可行，如果可行，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-03T21:18:10.540

通过按两次 ctrl-C 可以在中间停止 RSpec 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T23:30:55.160

正如@zetetic 所说，按Control-C。或者，如果您从 IDE 运行，请单击测试的停止按钮（不是您正在测试的服务器或其他代码！）

# jquery - 简单的悬停效果问题

> ID：12082813
> 
> 赞同：0
> 
> 时间：2012-08-22T23:34:59.617
> 
> 标签：jquery

我正在尝试使用以下代码在 div 上创建简单的悬停效果。

[http://jsfiddle.net/9kVXS/](http://jsfiddle.net/9kVXS/)

我无法让它显示警报框。我做错了什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:38:34.827

您忘记在左侧的下拉菜单中选择 jQuery：http: [//jsfiddle.net/9kVXS/2/](http://jsfiddle.net/9kVXS/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:44:18.473

您没有在 JSFiddle 中包含 jQuery。选择任何版本的 jQuery，它都会工作。

截图：[http ://www.evernote.com/shard/s1/sh/b2fb419c-6c73-45c3-9a38-52a3ab5c23b3/1b2ef5293842ccb366d43c21ef02324d](http://www.evernote.com/shard/s1/sh/b2fb419c-6c73-45c3-9a38-52a3ab5c23b3/1b2ef5293842ccb366d43c21ef02324d)

# android - POST REQUEST HttpURLConnection Android 4.0+ 上的问题

> ID：12082815
> 
> 赞同：1
> 
> 时间：2012-08-22T23:35:13.880
> 
> 标签：android, post, android-4.0-ice-cream-sandwich, httpurlconnection

我在网站上发出简单的 HTTP POST 请求时遇到了一些麻烦。好像没有发送 POST 参数！
场景：
HTTP 响应代码 200 - 错误的用户/密码 - 发生在 Android 4.0+ 上
HTTP 响应代码 302 - 用户/密码 OK - 发生在其他 SDK 版本上

可以正常工作的 Web 表单：

```
<form id="form_mn_login" enctype="application/x-www-form-urlencoded" action="http://dummyhost/r.php" class="estil" accept-charset="utf-8" method="post">
<input type="text" name="m_email" id="m_email" />
<input type="password" name="m_senha" id="m_senha" /> 
```

代码（在 doInBackground AsyncTask 的方法中）：

```
urlParameters = "m_email="
                    + URLEncoder.encode(username, "UTF-8") + "&m_senha="
                    + URLEncoder.encode(password, "UTF-8");

            URL url;
            HttpURLConnection connection = null;

            // Create connection
            url = new URL("http://dummyhost/r.php");
            connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Content-Type",
                    "application/x-www-form-urlencoded");
            connection.setRequestProperty("Content-Language", "en-US");

            connection.setUseCaches(false);
            connection.setDoInput(true);
            connection.setDoOutput(true);

            // Send request
            DataOutputStream wr = new DataOutputStream(
                    connection.getOutputStream());
            wr.writeBytes(urlParameters);
            wr.flush();
            wr.close();
            publishProgress(30);

            Log.w("responsecode", Integer.toString(connection.getResponseCode())); 
```

此问题仅在我在 Android 4.0+ AVD 设备上模拟时出现。（在 2.2、2.3.3、3.0 上试过，它完美无缺）我错过了什么？

我知道这可能是服务器问题，但我真的相信必须有一个解决方法。我已经尝试了数千种不同的方法，但似乎没有一种方法可以正常工作。

非常感谢，RC

# javascript - Handsontable - 慢粘贴

> ID：12082818
> 
> 赞同：1
> 
> 时间：2012-08-22T23:35:29.933
> 
> 标签：javascript, jquery, handsontable

当我尝试将大量数据粘贴到**handsontable**中时，接收数据的速度非常慢，以至于有时我会收到`jquery.js`文件无响应的脚本警告。有没有办法让速度更快？我现在使用的数据集是 ~1600 行和 5 列。

这是我当前尝试粘贴的表的链接[http://wiki.stat.ucla.edu/socr/index.php/SOCR_Data_Dinov_042108_Antarctic_IceThicknessMawson](http://wiki.stat.ucla.edu/socr/index.php/SOCR_Data_Dinov_042108_Antarctic_IceThicknessMawson)

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-23T01:27:12.383

尝试升级到[最新版本](http://handsontable.com/)：

```
http://handsontable.com/ 
```

现在应该解决这个问题

# php - 如何订购这个特定的内连接？

> ID：12082824
> 
> 赞同：0
> 
> 时间：2012-08-22T23:36:02.237
> 
> 标签：php, mysql, join

现在我正在创建一个在线游戏，其中列出了玩家的最后一次转会。

处理玩家历史的表具有 history_join_date 和 history_end_date 列。

当history_end_date被填满时，意味着球员离开了俱乐部，当它像默认值（0000-00-00 00:00:00）并且history_join_date有某个日期时，意味着球员加入俱乐部（在那个日期）。

现在，我有以下查询：

```
SELECT 
    player_id,
    player_nickname,
    team_id,
    team_name,
    history_join_date,
    history_end_date
FROM 
    players
        INNER JOIN history
            ON history.history_user_id = players.player_id
        INNER JOIN teams
            ON history.history_team_id = teams.team_id
ORDER BY 
    history_end_date DESC, 
    history_join_date DESC
LIMIT 7 
```

但是，此查询返回类似（使用上面的 PHP 过滤）：

```
(22-Aug-2012 23:05): Folha has left Portuguese Haxball Team.
(22-Aug-2012 00:25): mancini has left United.
(21-Aug-2012 01:29): PatoDaOldSchool has left Reign In Power.
(22-Aug-2012 23:37): Master has joined Born To Win.
(22-Aug-2012 23:28): AceR has joined Born To Win.
(22-Aug-2012 23:08): Nasri has joined Porto Club of Haxball.
(22-Aug-2012 18:53): Lloyd Banks has joined ARRIBA. 
```

PHP过滤器：

```
foreach ($transfers as $transfer) {

//has joined
if($transfer['history_end_date']<$transfer['history_join_date']) {
    $type = ' has joined ';
    $date = date("d-M-Y H:i", strtotime($transfer['history_join_date']));
} else {
    $type = ' has left ';
    $date = date("d-M-Y H:i", strtotime($transfer['history_end_date']));
} 
```

如您所见，在转移订单中，日期没有被严格遵守（22-8 月 => 21-8 月 => 22-8 月）。

我在 SQL 中缺少什么？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:43:55.400

问题是您是根据两个不同的值订购的。因此，您的结果首先按 history_end_date 排序，当结束日期相等时（即，当它是默认值时），然后按 history_join_date 排序

（请注意，您的第一个结果都是结束，然后您的后续结果都是连接，并且每个子集都正确排序）。

你对这个数据结构有多少控制权？您也许可以重组历史表，以便只有一个日期，以及 JOINED 或 END 的历史类型...您可以查看joined_date 和 end_date 并对其进行排序...

* * *

根据您在问题中的内容，我编写了以下 DDL 和数据：

```
create table players (
    player_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    player_nickname VARCHAR(255) NOT NULL UNIQUE
);

create table teams (
    team_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    team_name VARCHAR(255) NOT NULL UNIQUE
);

create table history (
    history_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    history_user_id INT NOT NULL, history_team_id INT NOT NULL, 
    history_join_date DATETIME NOT NULL, 
    history_end_date DATETIME NOT NULL DEFAULT "0000-00-00 00:00:00"
);

insert into players VALUES 
    (1,'Folha'),
    (2,'mancini'),
    (3,'PatoDaOldSchool'),
    (4,'Master'),
    (5,'AceR'),
    (6,'Nasri'),
    (7,'Lloyd Banks');

insert into teams VALUES 
    (1,'Portuguese Haxball Team'),
    (2,'United'),
    (3,'Reign In Power'),
    (4,'Born To Win'),
    (5,'Porto Club of Haxball'),
    (6,'ARRIBA');

insert into history VALUES 
    (DEFAULT,1,1,'2012-08-01 00:04','2012-08-22 23:05'),
    (DEFAULT,2,2,'2012-08-21 19:04','2012-08-22 00:25'),
    (DEFAULT,3,3,'2012-08-19 01:29','2012-08-21 01:29'),
    (DEFAULT,4,4,'2012-08-22 23:37',DEFAULT),
    (DEFAULT,5,4,'2012-08-22 23:28',DEFAULT),
    (DEFAULT,6,5,'2012-08-22 23:08',DEFAULT),
    (DEFAULT,7,6,'2012-08-22 18:53',DEFAULT); 
```

* * *

解决方案一 - 历史事件视图

这显然不是唯一的解决方案（您必须根据需要评估选项，但您可以在 MySQL 中为您的历史事件创建一个视图并加入它并使用它进行类似于以下的排序：

```
create view historyevent (
    event_user_id,
    event_team_id,
    event_date,
    event_type
) AS
    SELECT 
        history_user_id,
        history_team_id,
        history_join_date,
        'JOIN' 
    FROM history
    UNION
    SELECT
        history_user_id,
        history_team_id,
        history_end_date,
        'END'
    FROM history 
    WHERE history_end_date <> "0000-00-00 00:00:00"; 
```

然后您的选择变为：

```
SELECT 
    player_id,
    player_nickname,
    team_id,
    team_name,
    event_date,
    event_type
FROM players
INNER JOIN historyevent
        ON historyevent.event_user_id = players.player_id
INNER JOIN teams
        ON historyevent.event_team_id = teams.team_id
ORDER BY 
    event_date DESC; 
```

这里的好处是您可以同时获得同一玩家的加入和离开。

* * *

解决方案二 - 伪列。使用 IF 构造来选择一列或另一列。

```
SELECT 
    player_id,
    player_nickname,
    team_id,
    team_name,
    history_join_date,
    history_end_date,
    IF(history_end_date>history_join_date,history_end_date,history_join_date) as order_date
FROM 
    players
    INNER JOIN history
        ON history.history_user_id = players.player_id
    INNER JOIN teams
        ON history.history_team_id = teams.team_id
ORDER BY 
    order_date DESC; 
```

根据@Barmar 的回答，您还可以使用[GREATEST()](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_greatest)来选择最大的参数。（[MAX()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)是一个分组函数......实际上不是你要找的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:12:34.297

我想你想要的是：

```
ORDER BY MAX(history_join_date, history_end_date) 
```

# hadoop - Hadoop 向所有 reducer 发送记录

> ID：12082825
> 
> 赞同：6
> 
> 时间：2012-08-22T23:36:27.867
> 
> 标签：hadoop, mapreduce, partitioning, reduce, partitioner

如何将特定记录发送给我的所有减速器？

我知道 Partitioner 类及其作用，但我没有看到任何简单的方法可以确保记录发送到所有减速器。

基本上，Partitioner 有这个方法：

```
 int getPartition(K2 key,
             V2 value,
             int numPartitions) 
```

我的第一个想法是让 Partitioner 和 Mapper 协作如下：Mapper 不断输出记录的次数等于 reduce 任务的数量，并且 Partitioner 以这种方式返回所有整数（从 0 到 numPartitions-1）确保记录到达所有分区。

有没有其他更聪明的方法来解决这个问题？例如，我为需要发送到所有分区的记录返回 -1，并且框架在看到返回的 -1 时为我执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T00:38:49.173

分区器不是这样工作的。它的工作是查看键（通常）和值（很少）以确定该对应该发送到哪个减速器。这发生在 mapper 之后和 reducer 之前。

相反，您（映射器）应该能够向上下文询问可以回答减速器（分区）总数的配置。然后，您的映射器可以输出一个复杂的键，其中包含您想要的实际键和分区号。您知道要写多少次，因为映射器可以找出减速器的数量（见上文）。分区器所要做的就是分解复合键值，提取目标减速器索引并返回该索引。

顺便说一句，这意味着如果您使用此技术发送计数（如果您正在排序）或其他元数据以供稍后在处理中使用，那么您的真实数据键必须遵循相同的复合格式。事实上，您可能必须在复合键中包含一个描述键/值对类型的指示符（例如，1=真实数据，0=处理元数据）。

# c# - 获取以数字结尾的最大 ilist 项目

> ID：12082826
> 
> 赞同：0
> 
> 时间：2012-08-22T23:36:39.907
> 
> 标签：c#, ilist

如果我有一个包含以下数据的 IList：

```
{ Price = 220, OtherData = "Zsdd1" }, 
{ Price = 202, OtherData = "Zddsd2" }, 
{ Price = 20, OtherData ="S2A4" }, 
{ Price = 202, OtherData = "ZfdfZ3" }, 
{ Price = 20, OtherData ="SA4" } 
```

我怎样才能得到最大的OtherData，在上面的“SA4”和S2A4“将是最大值的情况下。我想返回数字4。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:03:08.940

您可以执行 LINQ 表达式，如下所示：

```
list.Where(item => char.IsDigit(item.OrderData.Last())).Max(item => item.OrderData.Last()); 
```

# c# - Linq to Sql 链式相交

> ID：12082828
> 
> 赞同：0
> 
> 时间：2012-08-22T23:36:44.563
> 
> 标签：c#, linq, entity-framework, iqueryable, intersect

我不知道为什么这不与循环中的所有项目相交，只是最后两个。我认为它与 IQueryable 有关

```
var outerquery = db.Employees.Where(x => x.Name = "Smith").Select(x => x.EmployeeID);

foreach(var name in nameList){
var innerQuery = db.Employees.Where(x => x.Name = name).Select(x => x.EmployeeID);
outerquery = outerquery.Intersect(innerQuery);
}

return outerquery.ToList(); 
```

编辑 - 一个更具体的例子。该表有大约 3500 万条记录。

该表有 ID、ConceptID、Word。单词可以有多个 ConceptID，每条记录有 1 个单词。我要与搜索字符串“慢性肩痛”相交，并获取所有共享这 3 个单词的 ConceptID。它应该返回：

```
Concept1234 - shoulder
Concept1234 - pain
Concept1234 - chronic 
```

我得到了什么（只是最后两个）：

```
Concept1234 - pain
Concept1234 - chronic 
```

即使使用我拥有的这台怪物服务器，对 3500 万条记录进行 OR 操作也很困难，并且相交是在不到一秒的时间内完成操作的唯一方法。

我试图用 LINQ to SQL（实体框架）生成的是这个 -

```
SELECT ConceptID FROM WordTable WHERE Word = 'shoulder'
INTERSECT
SELECT ConceptID FROM WordTable WHERE Word = 'pain'
INTERSECT
SELECT ConceptID FROM WordTable WHERE Word = 'chronic' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:13:03.020

您`outerquery`在`foreach`循环的每次迭代中都会被替换，并且您会丢失以前的数据。

# android - 如何将计时器添加到应用程序

> ID：12082831
> 
> 赞同：1
> 
> 时间：2012-08-22T23:36:58.527
> 
> 标签：android, timer

我是一个新的安卓开发者。最近，推出了一款单词拼图应用~~[——Wozzle](https://play.google.com/store/apps/details?id=com.amit.wozzle)~~

我想在游戏中添加计时器，以便玩家在有限的时间内做出动作。怎么做 ？此外，计时器应该显示给玩家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T04:31:15.297

试试这个，

```
public class CountDownTest extends Activity {

    TextView tv; // textview to display the countdown

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        tv = new TextView(this);
        this.setContentView(tv);

        // 5000 is the starting number (in milliseconds)
        // 1000 is the number to count down each time (in milliseconds)
        MyCount counter = new MyCount(5000, 1000);

        counter.start();

    }

    //countdowntimer is an abstract class, so extend it and fill in methods
    public class MyCount extends CountDownTimer{

        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            tv.setText("done!");
        }

        @Override
        public void onTick(long millisUntilFinished) {
            tv.setText("Left: " + millisUntilFinished/1000);

        }

    }
} 
```

看看这些链接

*   [时间之针](http://android-developers.blogspot.kr/2007/11/stitch-in-time.html)

*   [Android应用程序中的屏幕计时器？](https://stackoverflow.com/questions/8248298/on-screen-timer-in-android-application)

*   [秒表逻辑](https://stackoverflow.com/questions/3733867/stop-watch-logic)

*   [Android 游戏编程：游戏循环](http://aubykhan.wordpress.com/2010/04/25/android-game-programming-the-game-loop/)

# ios - 在 iOS 中，当分配给 tableView 的 dataSource 和委托时，应该将 self 转换为“id”吗？

> ID：12082834
> 
> 赞同：0
> 
> 时间：2012-08-22T23:37:11.133
> 
> 标签：ios, uitableview

我只看到代码在做：

```
tableview.delegate = self;
tableview.dataSource = self; 
```

但它确实在 XCode 4.3 上发出警告。我们是否需要转换它并且是`id`正确的转换类型？（所以应该如下：）

```
tableview.delegate = (id) self;
tableview.dataSource = (id) self; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:50:49.767

`id`简短的回答：如果您的代码设置正确，您不应该强制转换为直接分配应该没问题。

问题是您试图**通过**强制转换为`(id)`. 这是不好的做法，应该避免！表视图期望其`delegate`和`dataSource`成员都实现它将调用的某些方法。**协议**（类似于 Java 中的接口）有助于确保委托实现所有必需的方法，并在您尝试滥用对象时抛出警告，该对象未实现所有必需的方法或未声明自己支持协议。

要正确修复您遇到的警告，请将您的类接口声明（通常在标题中）修改为如下所示：

`@interface MyObject : NSObject <UITableViewDelegate, UITableViewDataSource>`

<> 中的项目声明了您的类将支持哪些协议的列表。

您可以在此处阅读有关协议的更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:50:03.260

您面临的最可能的问题可能是您没有扩展 tableview 所需的协议。

在您的 .h 文件中，请务必在您的接口声明中添加以下代码。

```
@interface HomeScreenViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

然后设置

```
yourTableName.delegate =self;
yourTableName.dataSource=self; 
```

如果您在情节提要上创建此控件，您始终可以从表格视图控制并拖动到文件所有者并选择委托和源。 ![在此处输入图像描述](../Images/b6a7372c6dde49468031372b037cf77e.png)

# web-services - API 何时使用 http 标头作为参数

> ID：12082835
> 
> 赞同：0
> 
> 时间：2012-08-22T23:37:17.307
> 
> 标签：web-services, http-headers, jersey

我一直在为 iPhone 应用程序（主要是 Jersey REST）做这个 Java 后端，并实现了一些 Web 服务，比如注册和登录。显然我需要用户名和 pin 等参数。由于此服务更改了数据库中的状态，因此我将它们设置为 POST，并且我使用了 @FormParams Jersey 注释作为参数。在客户端工作的人不断在标题中发送用户名和 pin，并且花了一点时间才发现问题出在哪里。

这是将类似身份验证的数据放在标头中的标准吗？你怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:48:04.070

如果您使用基本身份验证等标准 http 身份验证机制，
则凭据将在 http 标头中发送

像这样的东西

```
POST /private/index.html HTTP/1.1
Host: localhost
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

如果您打算通过不安全的网络公开此后端，我建议您使用 https - 因为它会加密您的标头

但是，如果您正在实现自己的身份验证机制 - 那么您可以将凭据传递到您喜欢的任何地方（标题或正文），这样 - 您的后端将知道在哪里查找用户名和密码。

检查这些链接以供参考
[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)
[http身份验证](http://www.httpwatch.com/httpgallery/authentication/)

# magento - 如何在 Magento 的内页上显示类别列表？

> ID：12082837
> 
> 赞同：0
> 
> 时间：2012-08-22T23:37:23.797
> 
> 标签：magento

在我使用的 Magento 主题中，有一个左侧边栏，在主页上，侧边栏包含一个类别列表，但在内页（类别页面、产品页面等）上，该列表不存在。如何将此块复制到产品和类别页面上，以便用户可以从任何地方选择一个类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:20:35.180

您可以在该部分下的布局（catalog.xml）中包含该块

1.  产品视图

    > ```
    >  <catalog_product_view translate="label">
    >   <reference name="left">
    >     Your block comes here
    >    </reference>
    > </catalog_product_view></li> 
    > ```
    > 
    > *   类别页面
    >     
    >     > ```
    >     >  <catalog_category_default translate="label">
    >     >     <reference name="left">
    >     >       Your block comes here
    >     >     </reference>
    >     >    </catalog_category_default></li> 
    >     > ```
    >     > 
    >     > *   否则，只需放入 catalog.xml 的默认部分，我认为这也应该有效。
    >     >     
    >     >     > ```
    >     >     >  <default>
    >     >     >      <reference name="left">
    >     >     >       Your block comes here
    >     >     >       </reference>
    >     >     >   </default> 
    >     >     > ```
    >     >     > 
    >     >     > 我认为通常显示类别左侧导航的块是
    >     >     > 
    >     >     > > ```
    >     >     > >  <reference name="left">
    >     >     > >     <block type="catalog/navigation" name="catalog.leftnav" after="currency"         template="catalog/navigation/left.phtml"/>
    >     >     > >     </reference> 
    >     >     > > ```
    >     >     > > 
    >     >     > > 希望这对您有所帮助。干杯

# c# - 如何从 XML 文件中仅获取文本？

> ID：12082839
> 
> 赞同：0
> 
> 时间：2012-08-22T23:37:36.427
> 
> 标签：c#, asp.net, xml-parsing

我试过这段代码：

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string xmlString = System.IO.File.ReadAllText(@"d:\adilipman1937067724.xml");

            XmlDocument doc = new XmlDocument();
            doc.Load(xmlString);
            string t = doc.InnerText;

            textBox1.Text = t;
        }
    }
} 
```

但出现错误：

错误：无效的 URI：Uri 字符串太长。我试图读取的文件是我和我兄弟的信使中的聊天记录的 xml。文件大小为：492kb。

获取错误异常消息：

```
System.UriFormatException was unhandled
  Message=Invalid URI: The Uri string is too long.
  Source=System
  StackTrace:
       at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
       at System.Uri..ctor(String uriString, UriKind uriKind)
       at System.Xml.XmlResolver.ResolveUri(Uri baseUri, String relativeUri)
       at System.Xml.XmlUrlResolver.ResolveUri(Uri baseUri, String relativeUri)
       at System.Xml.XmlTextReaderImpl..ctor(String url, XmlNameTable nt)
       at System.Xml.XmlDocument.Load(String filename)
       at WindowsFormsApplication1.Form1.button1_Click(Object sender, EventArgs e) in D:\C-Sharp\AnimatedGifEditor\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs:line 25
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at WindowsFormsApplication1.Program.Main() in D:\C-Sharp\AnimatedGifEditor\WindowsFormsApplication1\WindowsFormsApplication1\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:46:35.950

几件事。

查看 xml 文档格式是否正确的最简单方法是在 Internet Explorer 中打开它。它会告诉你是否有问题。

一种查看 xml 文档内容的简单方法，去除了所有 xml 标记：

```
XmlDocument doc = new XmlDocument();
doc.Load(@"C:\tt.xml");
string xmlString = doc.InnerText; 
```

上面的方法也会告诉你你的xml文档是否有问题。

您的调用语法看起来是正确的，所以我认为您的 xml 文档一定有问题。先解决这个问题（一次一个问题！），然后再解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:53:51.183

首先，您得到的编译错误是正确的，您需要关闭您的字符串文字。

```
string xmlString = System.IO.File.ReadAllText(@"C:\tt.xml"); 
```

您使用的方法从文件中读取所有文本，因此您当然会看到标签！

如果您只需要节点值，则将 xml 加载到 XmlDocument 中并使用 InnerText 属性。

```
 var doc = new XmlDocument();
        doc.Load(@"C:\tt.xml");
        var str = doc.InnerText; 
```

变量 str 将包含文本，减去 xml 标记。

# c# - 标识列的 Int32 限制

> ID：12082841
> 
> 赞同：1
> 
> 时间：2012-08-22T23:37:44.350
> 
> 标签：c#, .net, sql-server, identity-column, type-conversion

这只是对正在创建的站点和其他大型站点的考虑。

我正在使用标识列来存储我的一些表的 ID，并且我有一些类，其 Id 被装饰`Int32`以保存从数据库中检索到的 ID 的值。

我担心的是，随着网站变得越来越大，一些呈指数增长的表格，例如将来`QuestionComments`可能会超过`Int32`限制。所以我把我的班级改成使用`long`.

```
public class Question
{
   public long QuestionID { get; set; }
   ...
} 
```

//将数据库值转换为.Net类型

```
 Question q = new Question();
 q.QuestionID = Convert.ToInt32(myDataRow["QuestionID"]); 
```

我的假设有多真实？使用 UniqueIdentifier 会更好吗？还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:44:29.900

您能想象为任何一个实体存储数十亿条记录吗？如果是这样，您可以切换到`BigInt`另一个称为`Int64`. 当然，一旦您开始看到数百万条记录，您就需要开始考虑数据分区和归档以避免严重的性能问题。如果您有一个基础架构团队，您可能想让他们知道您预计会大量使用并且需要一个认真的维护计划。如果您是基础架构团队，那么您最好看书！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:44:12.037

如果您真的认为拥有超过 20 亿条评论是合理的，那么请`BIGINT`在 SQL Server 中使用（`Int64`在 .Net 中）。这需要 8 个字节的存储而不是 4 个字节`INT`，但是如果您使用数据压缩，您可以为前 2+十亿个值抵消这个。

# c++ - 预处理器指令语法和礼仪

> ID：12082843
> 
> 赞同：0
> 
> 时间：2012-08-22T23:37:49.960
> 
> 标签：c++, c, preprocessor-directive

我有两个不相关的问题：

1.  是否可以`#define`用来定义数字以外的东西？（例如扩展的 ASCII 字符）。

2.  `main()`在函数中使用预处理器指令是否被认为是一种好习惯？我认为这样做的唯一原因是根据正在运行的操作系统执行不同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:42:02.533

类似对象的宏（`#define`没有参数的宏）只是简单的替换。因此，您的代码中可能包含的任何内容都可以替换，例如文字字符串：`#define PROGRAM_NAME "MyProgram"`或多行代码块。这是后者的一个无用示例：

```
#define INFINITE_PRINTF while (1) \
                        { \
                            printf("looping..."); \
                        } 
```

至于第二个问题，通常的做法是在整个 C 代码中使用预处理器指令来完成您提到的事情：有条件地包括/排除代码，在`main`其他地方。为了清楚起见，有时我会在使用`#define`它们的位置附近使用常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:47:24.950

您不仅可以#define 字符串，还可以#define 代码。尽管 C++ 的创建者不赞成使用预处理器。

我认为 main() 对于特定于操作系统的代码来说太高了。我会尝试制作包装任何操作系统特定代码的函数/类。放置操作系统特定代码的位置越低越好。

# objective-c - 需要 CCRenderTexture 来渲染更快的 ios

> ID：12082844
> 
> 赞同：0
> 
> 时间：2012-08-22T23:37:51.820
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在制作一个绘图应用程序，并且让用户使用 CCRenderTexture 进行绘图。它基本上一直在渲染一个黑色圆圈的图片来模拟绘图。当我慢慢移动我的手指时，效果非常好，因为圆圈聚集在一起形成一条线。但是，当我快速移动手指时，它最终只是一堆未连接的圆圈（[http://postimage.org/image/wvj3w632n/](http://postimage.org/image/wvj3w632n/)）。我的问题是如何获得渲染纹理以更快地渲染图像或让它为我填补空白。

另外，我对这种方法并不完全满意，但这是我环顾四周时发现的。随意提出任何你认为会更好的建议。我最初使用的是 ccdrawline，但它确实扼杀了我的表现。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:17:30.347

起点和终点之间的差距需要理清。我粘贴的代码可能会帮助您解决链接中显示的情况。

在 .h 文件中

```
CCRenderTexture *target;
CCSprite* brush; 
```

在.m文件的init方法中

```
target = [[CCRenderTexture renderTextureWithWidth:size.width height:size.height] retain];
[target setPosition:ccp(size.width/2, size.height/2)];
[self addChild:target z:1];
brush = [[CCSprite spriteWithFile:@"brush_i3.png"] retain]; 
```

添加我正在显示 touchesMoved 代码的 touches 方法。

```
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint start = [touch locationInView: [touch view]];   
    start = [[CCDirector sharedDirector] convertToGL: start];
    CGPoint end = [touch previousLocationInView:[touch view]];
    end = [[CCDirector sharedDirector] convertToGL:end];
    printf("\n x= %f \t y= %f",start.x,start.y);
    float distance = ccpDistance(start, end);
    if (distance > 1)
    {
        int d = (int)distance;
        for (int i = 0; i < d; i++)
        {
            float difx = end.x - start.x;
            float dify = end.y - start.y;
            float delta = (float)i / distance;

            [brush setPosition:ccp(start.x + (difx * delta), start.y + (dify * delta))];
            [target begin];
            [brush setColor:ccc3(0, 255, 0)];

            brush.opacity = 5;
            [brush visit];
            [target end];

        }
    }
} 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:41:09.570

并不是说 CCRenderTexture 绘制得太慢，而是事件只会如此频繁地触发。您确实需要填补您收到的接触点之间的空白。

这里有一个很棒的教程，你可能已经看过了，[http://www.learn-cocos2d.com/2011/12/how-to-use-ccrendertexture-motion-blur-screenshots-drawing-sketches/#素描](http://www.learn-cocos2d.com/2011/12/how-to-use-ccrendertexture-motion-blur-screenshots-drawing-sketches/#sketching)

# javascript - 如何过滤要写入新文档的 HTML，删除 JavaScript 中的某些类和/或 ID？

> ID：12082845
> 
> 赞同：1
> 
> 时间：2012-08-22T23:37:52.900
> 
> 标签：javascript, jquery, filter

在这里，我尝试用 JS 制作一个新文档：

```
 objDoc.open();
  objDoc.write( "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">" );
  objDoc.write( "<html>" );
  objDoc.write( "<body>" );
  objDoc.write( "<head>" );
  objDoc.write( "<title>" );
  objDoc.write( document.title );
  objDoc.write( "</title>" );
  objDoc.write( jStyleDiv.html() );
  objDoc.write( "</head>" );
  objDoc.write( this.html() );
  objDoc.write( "</body>" );
  objDoc.write( "</html>" );
  objDoc.close(); 
```

在我关闭文档之前（可能是在我将内存中的另一个文档的 html 写入新文档的正文之后），我想删除与某个类和/或 ID 匹配的任何元素。jQuery 解决方案还可以。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:08:10.177

使用 jQuery[删除](http://api.jquery.com/remove/)功能。

```
$(".myclass").remove(); 
```

或者

```
$("#myID").remove(); 
```

**编辑**：这不会改变 CSS。“.myclass”等类 CSS 表示法是一种选择节点的 jQuery 方法，它使用类 css 表示法，以便程序员使用熟悉的选择 DOM 节点的方法。remove() API 从 DOM 中删除所有匹配的节点。例如，执行 $(".myclass").remove() 你会得到：

**在执行 $(".myclass").remove() 之前**

```
<html>
    <head>
        <style type="text/css">
            .myclass {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <p class="myclass">Paragraph one</p>
        <p>Paragraph two</p>
    </body>
</html> 
```

**执行 $(".myclass").remove() 之后**

```
<html>
    <head>
        <style type="text/css">
            .myclass {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <p>Paragraph two</p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T20:44:22.357

AresAvatar 建议的解决方案是正确的，添加了一个解决您提到的问题的附加项：要执行的 jQuery 命令是

```
$(".myclass", objDoc).remove(); 
```

jQuery 的第二个参数是执行命令的上下文。这样它就不会应用于整个页面！请参阅以下来自 jQuery 文档的 URL。

api.jquery.com/jQuery/

平底锅

# android - 安卓聊天服务

> ID：12082847
> 
> 赞同：5
> 
> 时间：2012-08-22T23:38:12.523
> 
> 标签：android

我正在尝试创建一个类似于 what's up 或 messenger 的应用程序以用于学习目的。

基本上，我创建了一个绑定到使用 TCP/IP 连接到 java 服务器的服务的活动。

当服务处于活动状态时，用户接收和发送消息。问题是当用户关闭应用程序时（例如使用任务管理器 - 按住主页按钮）。如果应用程序关闭，服务将被终止，因为它有 0 个绑定。

我的问题是：此类应用程序的模式是什么，以便用户始终接收消息，最新情况如何始终设法发送消息并保持其服务活跃。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-08T21:12:53.517

聊天应用程序使用套接字连接和 GCM/APN。如果应用程序在前台，则建立套接字连接。当应用程序在后台时，在收到 GCM 消息后，再次建立套接字连接。这样您还可以节省电池。长时间保持插座连接打开会耗尽设备的电池电量。有关示例代码，您可以参考我们的 android chat sdk：

[https://github.com/AppLozic/Applozic-Android-SDK](https://github.com/AppLozic/Applozic-Android-SDK)

[https://github.com/AppLozic/Applozic-iOS-SDK](https://github.com/AppLozic/Applozic-iOS-SDK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:53:09.923

Google Talk 和其他即时通讯程序等应用程序经常使用[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)。有一个关于这个的[Google I/O 演讲](http://www.youtube.com/watch?v=YoaP6hcDctM)，你可能会觉得有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T18:48:55.893

如果您有后端，那么您可以查看`OneSignal`它完全免费且有良好文档的：[OneSignal](https://onesignal.com/)

我想你已经知道推送通知：基本上你不会每次都听服务器。当推送到来时，云消息平台将为您触发电话。

如果您希望您的服务始终在关闭状态下打开应用程序，请使用`STICKY_SERVICE`：[start-sticky-and-start-not-sticky](https://stackoverflow.com/questions/9093271/start-sticky-and-start-not-sticky)

此外，如果您想了解定价计划，请阅读`FCM`：[Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging/)

在这个页面：[android-migrate-fcm](https://developers.google.com/cloud-messaging/android/android-migrate-fcm)你应该看到这个注释：

> Firebase 云消息传递 (FCM) 是 GCM 的新版本。它继承了可靠且可扩展的 GCM 基础架构，以及新功能！请参阅常见问题解答以了解更多信息。如果您要在新应用程序中集成消息传递，请从 FCM 开始。强烈建议 GCM 用户升级到 FCM，以便从现在和将来的新 FCM 功能中受益。

# box-api - 是否可以通过路径检索文件或文件夹资源？

> ID：12082848
> 
> 赞同：0
> 
> 时间：2012-08-22T23:38:14.530
> 
> 标签：box-api

有没有办法获取有关 Box 上文件或文件夹的信息，因为它是完整路径，而不是 ID？

例如，我想检查`/Foo/Bar/test.txt`Box 上是否存在。目前，我必须从根目录开始，递归遍历每个文件夹级别，搜索路径中的下一段。

可以想象，这个过程在编写完全异步的代码时是非常繁琐的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:03:59.357

目前没有办法通过路径检索文件或文件夹。这是我们将来可能会考虑的事情，但没有计划在短期内实施。

# sql - 为什么这个 SQL 返回 15 行而不是 12 行？

> ID：12082856
> 
> 赞同：0
> 
> 时间：2012-08-22T23:39:05.223
> 
> 标签：sql, oracle, datagridview, union

我需要以“电子表格”类型的方式显示数据库中的数据，值垂直显示，而不是像通常那样水平显示为行。

网格需要正好是 16 列乘 12 行。在正常情况下，它将是两列，最多 96 行。

我从 ClearLogic 的答案中得出的查询：

[是否有一条 SQL 语句可以将 2 个长列分成几对列？](https://stackoverflow.com/questions/12078637/is-there-a-sql-statement-that-will-break-what-would-be-2-long-columns-into-sever)

..非常接近，但它生成了 15 列，并添加了两次值。它看起来足够近，让我想继续沿着这条路走下去。

注意：Val1 始终是 1..96 之间的值

我的 sql（产生 16 列乘 15 行的结果集）是：

```
Select Val1 AS col1, Val2 AS col2,NULL AS Col3,NULL AS Col4 ,NULL AS 
Col5,NULL AS Col6,NULL AS col7,NULL AS Col8, NULL AS Col9, NULL AS Col10, NULL AS 
Col11, NULL AS Col12, NULL AS Col13, NULL AS Col14, NULL AS Col15, NULL AS Col16 
from PLATYPUSAVAILABILITY where Val1 < 13 and PLATYPUSID = 42
AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd')

UNION select NULL AS col1,NULL AS col2,Val1 AS Col3, Val2 AS Col4,NULL 
AS Col5,NULL AS Col6,NULL AS col7,NULL AS Col8, NULL AS Col9, NULL AS Col10, NULL AS
Col11, NULL AS Col12, NULL AS Col13, NULL AS Col14, NULL AS Col15, NULL AS Col16 
from PLATYPUSAVAILABILITY where Val1 > 12 and Val1 < 25 and 
PLATYPUSID = 42 AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd')

UNION select NULL AS col1,NULL AS col2 ,NULL AS Col3, NULL AS Col4,Val1 AS 
Col5, Val2 AS Col6,NULL AS col7,NULL AS Col8, NULL AS Col9, NULL AS Col10, NULL 
AS Col11, NULL AS Col12, NULL AS Col13, NULL AS Col14, NULL AS Col15, NULL AS Col16 
from PLATYPUSAVAILABILITY where Val1 > 24 and Val1 < 37 and 
PLATYPUSID = 42 AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd')

UNION select NULL AS col1,NULL AS col2 ,NULL AS Col3, NULL AS Col4, NULL AS 
Col5, NULL AS Col6,Val1 AS col7,Val2 AS Col8, NULL AS Col9, NULL AS 
Col10, NULL AS Col11, NULL AS Col12, NULL AS Col13, NULL AS Col14, NULL AS Col15, 
NULL AS Col16 from PLATYPUSAVAILABILITY where Val1 > 36 and Val1 
< 49 and PLATYPUSID = 42 AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd')

UNION select NULL AS col1,NULL AS col2 ,NULL AS Col3, NULL AS Col4,Val1 AS 
Col5,Val2 AS Col6,NULL AS col7,NULL AS Col8, Val1 AS Col9, Val2 AS 
Col10, NULL AS Col11, NULL AS Col12, NULL AS Col13, NULL AS Col14, NULL AS Col15, 
NULL AS Col16 from PLATYPUSAVAILABILITY where Val1 > 48 and Val1 
< 61 and PLATYPUSID = 42 AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd')

UNION select NULL AS col1,NULL AS col2 ,NULL AS Col3, NULL AS Col4,NULL AS 
Col5,NULL AS Col6,NULL AS col7,NULL AS Col8, NULL AS Col9, NULL AS Col10, 
Val1 AS Col11, Val2 AS Col12, NULL AS Col13, NULL AS Col14, NULL AS 
Col15, NULL AS Col16 from PLATYPUSAVAILABILITY where Val1 > 60 and 
Val1 < 73 and PLATYPUSID = 42    AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd')

UNION select NULL AS col1,NULL AS col2 ,NULL AS Col3, NULL AS Col4,NULL AS 
Col5,NULL AS Col6,NULL AS col7,NULL AS Col8, NULL AS Col9, NULL AS Col10, NULL AS 
Col11, NULL AS Col12, Val1 AS Col13, Val2 AS Col14, NULL AS Col15, NULL 
AS Col16 from PLATYPUSAVAILABILITY where Val1 > 72 and Val1 < 85 
and PLATYPUSID = 42 AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd') 

UNION select NULL AS col1,NULL AS col2 ,NULL AS Col3, NULL AS Col4,NULL AS 
Col5,NULL AS Col6,NULL AS col7,NULL AS Col8, NULL AS Col9, NULL AS Col10, NULL AS 
Col11, NULL AS Col12, NULL AS Col13, NULL AS Col14, Val1 AS Col15, Val2 
AS Col16 from PLATYPUSAVAILABILITY where Val1 > 84 and PLATYPUSID = 42 
AND AVAILABLEDATE = to_date('20120823', 'yyyymmdd') 
```

我怎样才能让它自己限制在 12 行而不是溢出到 15 行？

我在 TOAD 中运行此查询后看到的屏幕截图可以在以下位置看到：

[http://warbler.posterous.com/so-close-and-yet-so-far-away-sqlizers-lament](http://warbler.posterous.com/so-close-and-yet-so-far-away-sqlizers-lament)

应该只有 12 行，并且值应该从第 9 列和第 10 列的顶部开始，并溢出到第 11 列和第 12 列的一行（顶部）。

我使用 Datagridview 作为标签，因为这是数据的最终目标：datagridview1.DataSource = //query result as OracleDataTable

## 更新

得到它的工作。请参阅[是否可以使用交替的垂直列填充 DataGridView？](https://stackoverflow.com/questions/12065611/is-it-possible-to-populate-a-datagridview-with-alternating-vertical-columns)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:32:32.503

我认为为什么显示错误的问题的答案源于您的数据。如果您有所有可能值为 Val1 的行，而当前没有 val1 的行的 Val2 为 null，我希望显示是正确的。我认为问题的出现是因为不存在需要（在我看来）存在以使格式正确的行。

我很欣赏这可能不会过于积极，因为无论如何您可能并不总是拥有 val1 的所有值 - 但有一种方法可以解决这个问题：

如果你创建一个从 1 到 96 的整数表，让我们调用这个 tblArray，那么你的 from 子句可以是：

```
 FROM tblArray t LEFT JOIN PlatypusAvailability p ON t.ID = p.Val1 
```

＆这应该可以完成工作。但我建议先在第一段中测试我的想法。

# java - 如何在 Java 中引发并发发布错误

> ID：12082857
> 
> 赞同：0
> 
> 时间：2012-08-22T23:39:10.520
> 
> 标签：java, multithreading, concurrency

我一直试图在一些多线程 Java 代码中引发发布错误。

下面的示例似乎应该可以解决问题，但到目前为止它按预期运行。不可否认，我在只有两个内核（和超线程）的 MacBook Pro（OSX 10.7.4 和 2.8 GHz Intel Core i7）上运行它。所以一次只能运行 4 个线程。

任何想法如何更好地引发出版失败？

```
package demo;

import java.util.concurrent.CyclicBarrier;

public class UnsafePublicationTest {
private static final String FIRST_VAL = "FAIL";
private static final String SECOND_VAL = "GOOD";

public void test() throws Exception {
    UnsafePublisher unsafe = new UnsafePublisher();
    unsafe.setValue(FIRST_VAL);
    CyclicBarrier gate = launchThreads(10, unsafe);
    gate.await();  // Start all threads at once
    gate.await();  // Each thread reads the first value

    // Should cause errors since update is not published
    unsafe.setValue(SECOND_VAL);
    gate.await();  // Each thread tries for the second value
    gate.await();  // Wait for the readers finish
}

private CyclicBarrier launchThreads(int count, UnsafePublisher unsafe) {
    CyclicBarrier gate = new CyclicBarrier(count + 1);
    for (int id = 0; id < count; id++) {
        ValueReader rdr = new ValueReader(id, gate, unsafe);
        rdr.start();
    }
    return gate;
}

private static class UnsafePublisher {
    private String fValue;

    public UnsafePublisher() { /* no synthetic ctor */ }

    public void setValue(String value) {
        this.fValue = value;
    }

    public String getValue() {
        return fValue;
    }
}

private static class ValueReader extends Thread {
    private final int fId;
    private final CyclicBarrier fGate;
    private final UnsafePublisher fTest;

    public ValueReader(int id, CyclicBarrier gate, UnsafePublisher test) {
        fId = id;
        fGate = gate;
        fTest = test;
    }

    public void run() {
        try {
            fGate.await();
            int noOp = this.hashCode();
            // Try to get the thread to cache the value.
            for (int i = 0; i < 10000; i ++) {
                for (int j = 0; j < 10000; j++) {
                    String first = fTest.getValue();
                    noOp = noOp ^ first.hashCode();
                    if (!FIRST_VAL.equals(first))
                        System.out.println("Thread " + fId + " read " + first);
                }
            }
            fGate.await();

            // Between these awaits, the value is changed.

            fGate.await();
            String second = fTest.getValue();
            if (!SECOND_VAL.equals(second))
                System.out.println("Thread " + fId + " read " + second);
            System.out.println("Thread " + fId + " hash " + noOp);
            fGate.await();

        } catch (Exception err) { /* ignore */ }
    }
}

public static void main(String[] args) throws Exception {
    UnsafePublicationTest test = new UnsafePublicationTest();
    test.test();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:34:24.610

这很难调试 :) 我仍在尝试了解您想要实现的目标，但是对我而言，您所看到的是正常的和预期的（如果您深入研究并理解代码）。这是发生的事情：

*   CyclicBarrier 设置为 11。

    假设主线程启动了 10 个其他线程并且它们都开始执行它们的 run 方法。但他们立即阻止。现在主线程和这 10 个线程的启动顺序在这里并不重要。这*并不重要*，因为在主线程中您第二次调用 gate.await()，从而允许每个线程执行 for 循环。在完成 for 循环后，他们调用 gate.await() - 第二次，从而再次解除障碍。

    *   现在是最让我困惑的部分。您在 run 方法中对 gate.await() 进行了**第三次调用**，因此它们都阻塞了，因为在上一步中屏障被“解除”了。现在这里的顺序又不重要了，可以说是先调用主线程，将“fValue”的值设置为“GOOD”，然后10个线程等待屏障。这并不重要。重要的是，这个声明：

代码（我们称之为sample1）：

```
String second = test.getValue();
if (!SECOND_VAL.equals(second)){
     System.out.println("Thread " + i + " read " + second); 
} 
```

即在 run 方法中，只有在 main 调用之后才会 100% 执行：

```
 unsafe.setValue(SECOND_VAL); // call it sample2 
```

我认为问题出在某个地方（魔鬼总是在细节中:)）。

如果*您同意 sample2 在 sample1 之前 100% 执行*，那么这段代码的几率是多少？

```
 if (!SECOND_VAL.equals(second)){
      System.out.println("Thread " + i + " read " + second);
 } 
```

好吧，对我来说，没有。

因此，我的问题是，您要证明什么？可能我们可以想到一个更好/更简单的例子吗？如果您仍然想坚持这一点，那么您可能必须解释更多您想要实现的目标。

# html - HTML5 兼容性

> ID：12082859
> 
> 赞同：1
> 
> 时间：2012-08-22T23:39:20.697
> 
> 标签：html

我对理解 HTML5 有点困惑。我明白这不是一回事。这是一堆东西。语义、存储、媒体、效果等等，但我应该如何构建我的“基本网站”，而这些网站不会真正触及这些。我能想到我将使用的唯一区别是不同的语义。我是否需要为旧版浏览器提供某种向后兼容性？示例：`<!DOCTYPE html>`html 5 网页的 doctype 标记，但旧版浏览器会很难显示我的网站吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:51:48.063

DOCTYPE 很好。它经过精心挑选以向后兼容。

如果您不需要 HTML5 的新功能，请不要使用它们。

对于您确实想要使用的每个新的 HTML5 功能，您必须确定浏览器对该功能的支持情况。（HTML4 也是如此，但现在它的工作原理相当稳定且广为人知。） caniuse.com 是一个很好的资源。如果某个功能尚未得到普遍支持，您将需要确定是否有可用的解决方法或 shim，使用它们的缺点是什么（例如需要 JavaScript）以及您的用户是否可以接受它们的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:49:10.033

HTML5 中的绝大多数 HTML 和属性都向后兼容您现在所做的任何事情。使用新的文档类型（请注意其中没有提到 HTML5）将使旧版本的 IE 保持在标准模式下，回到 IE6。现在没有理由不使用基本的 HTML 元素，因为知道它们的工作方式与您现在看到的一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T01:18:02.593

虽然有些浏览器不支持 HTML5，但现在很多都支持，我认为学习一些 HTML5 很重要，因为这是世界前进的方向。如果您不需要 HTML5，则不必使用它们，并且仅`<!DOCTYPE html>`在顶部包含 不会强迫您做任何事情，它只是为您提供这些特权。

我强烈推荐观看[这个](http://www.youtube.com/watch?v=hMRmLmeo6So)斯坦福大学讲座的视频，因为这位教授总体上讲了一些关于 HTML5 的话题。虽然他确实致力于谈论它的移动潜力，但他基本上让您了解 HTML5 是如何产生的，等等，以及其他一些技术等。

视频有点长，如果你想跳到 HTML5，直接跳到 26:20

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T03:20:27.800

我建议从[HTML5 Boilerplate 之](http://html5boilerplate.com/)类的模板开始，它会处理很多向后兼容性，以支持旧浏览器中的新 HTML5 元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T23:42:46.700

很可能 IE 会出现一些问题（尤其是旧的 IE），但是网上有很多解决方法

[这个](https://stackoverflow.com/questions/2674655/how-to-write-backwards-compatible-html5)先前的问题确实有一些很好的指示

# sql-server-2008 - 查询优化技巧

> ID：12082860
> 
> 赞同：-1
> 
> 时间：2012-08-22T23:39:20.933
> 
> 标签：sql-server-2008, sql-server-2008-r2, query-optimization

我一直在寻找 SQL Server 2008 中查询优化的一般提示和技巧。

我遇到了下面的问题，非常不确定使用视图/触发器的后果是什么

*   尝试用原始源表替换视图
*   尽量不要使用触发器，在存储过程中加入触发器的逻辑

有人可以阐明这些解释的利弊，并指出我查询优化的一般提示和技巧列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:58:16.783

视图是由诸如“SELECT a, b FROM tableC”之类的查询形成的虚拟表，这将创建 a 和 b 的“虚拟表”。源表是它自己的表，能够'SELECT * FROM tableC'这样效率更高，因此不会创建虚拟表。

触发器是在指定事件发生时触发的事件，例如特定查询。存储过程是编译的事务，可以像触发器一样工作，但它们的效率要高得多。简而言之，不要使用触发器。

我会认真考虑这个[http://www.amazon.com/SQL-Tuning-Dan-Tow/dp/0596005733/ref=sr_1_1?ie=UTF8&qid=1345679033&sr=8-1&keywords=sql+optimization](https://rads.stackoverflow.com/amzn/click/com/0596005733)

# ruby-on-rails - rails 命名空间模型 - 关联

> ID：12082862
> 
> 赞同：2
> 
> 时间：2012-08-22T23:39:44.670
> 
> 标签：ruby-on-rails

当我尝试使用 has_many :through 关联时，它似乎在连接表中寻找通用键。例子

```
class Ots::Foo < ActiveRecord::Base
  has_many :foo_bars, :class_name => '::Ots::FooBar', :foreign_key => :ots_foo_id
  has_many :bars, :class_name => '::Ots::Bar', :through => :foo_bars
end

class Ots::Bar < ActiveRecord::Base
  has_many :foo_bars, :class_name => '::Ots::FooBar', :foreign_key => :ots_bar_id
  has_many :bars, :class_name => '::Ots::Bar', :through => :foo_bars
end

class Ots::FooBar < ActiveRecord::Base
  belongs_to :foo, :class_name => "::Ots::Foo", :foreign_key => :ots_foo_id
  belongs_to :bar, :class_name => "::Ots::Bar", :foreign_key => :ots_bar_id
end

f = Foo.find(1)
f.bars  =># invalid column name 'bar_id' 
```

这是我应该期待的吗？命名空间有更优雅的解决方案吗？

# jquery - 使 slides.js 与 JQuery 1.3.2 兼容

> ID：12082863
> 
> 赞同：1
> 
> 时间：2012-08-22T23:39:44.690
> 
> 标签：jquery, drupal, slider, version, jquery-1.3.2

我最喜欢的滑块插件兼容 JQuery 1.4.4+ 版本，但我只能使用 1.3.2。

[幻灯片.js](http://slidesjs.com/)

我看到它在它的**fadeIn()**和**fadeOut()调用中使用了****缓**动选项，我知道1.3.2 不支持它，所以我尝试去掉这些部分，但仍然没有运气。

 ****这是一个小提琴：http: [//jsfiddle.net/AsXpR/](http://jsfiddle.net/AsXpR/)

有什么办法让它兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:46:22.503

很抱歉回答我自己的问题，但实际上我在删除它们时错过了一个**缓动选项。**一旦我删除它，滑块就开始工作了！

这是一个使用 javascript 的小提琴：http: [//jsfiddle.net/3dUXN/](http://jsfiddle.net/3dUXN/)****

# jquery - 如何在 iPad 上使用 jQuery Mobile 让 IFrame 占据整个宽度？

> ID：12082864
> 
> 赞同：2
> 
> 时间：2012-08-22T23:39:58.287
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery Mobile 库。我正在显示一个 IFrame，如下所示：

```
<iframe width="100%" height="600" frameborder="0" title="Content" src="https://c.na6.content.force.com/servlet/servlet.FileDownload?file=00P8000500D26o6EAB" name="docframe" id="docframe"></iframe> 
```

在桌面浏览器上查看 iFrame 占据了我希望的整个宽度。在 iPad 上，iFrame 似乎占据了大约 50% 的可用空间。iFrame 似乎没有包含在将其大小限制为 50% 的任何内容中（即它似乎不在网格中等......）

我应该尝试什么类型的东西让我的 iFrame 全宽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T18:47:46.227

这是一个可能有帮助的替代方案：

```
 <head>
       <script type="text/javascript">
       function jqUpdateSize(){
            // Aspect ratio of the video's height and width. For eg: 360/480 
            var aspect_ratio = <height of the video>/<width of the video>;
            // Get the dimensions of the content div
            var width = $('#iframes-div-container').width();
            var height = width * aspect_ratio;

            $('#video-iframe').css("width",width);
            $('#video-iframe').css("height",height);
        };
        $(document).ready(jqUpdateSize);    // When the page first loads
        $(window).resize(jqUpdateSize);     // If the browser's size changes
        </script>
    </head>
    <body>
    <div data-role='page'>
     .
     .
     <your code>
     .
     .
     <div data-role="content" id="iframes-div-container">
        <center>
          <iframe id="video-iframe" src="https://c.na6.content.force.com/servlet/servlet.FileDownload?file=00P8000500D26o6EAB" frameborder="0" allowfullscreen></iframe>
        </center>
     </div> 

    </div>
    </body> 
```

希望这可以帮助。

# encoding - 经典的asp字符编码

> ID：12082867
> 
> 赞同：7
> 
> 时间：2012-08-22T23:40:41.697
> 
> 标签：encoding, asp-classic, utf-8, character-encoding, vbscript

我在经典的 asp 站点中遇到了西班牙语字符的问题。用户可以在 aspx 页面上以表单形式提交他们的姓名/地址。然后，aspx 页面将 ajax 发布到经典的 asp 页面，它所做的一切都存储在我们的 Sql 2008 DB 中。我可以在数据库中看到该字符未正确存储。例如，名字看起来`MÂª`应该在哪里`Mª`。

然后，当我读取该数据并将其显示在文本框中时，它仍在显示`MÂª`。

我尝试过的事情：

*   `<%@ Language=VBScript codepage=65001 %> <% Response.Charset="UTF-8" %>`
*   将文件编码为 UTF-8（使用记事本++）

还有其他想法吗？我是否需要先返回数据库并修复字符，或者当我读取字符并显示它们时可以这样做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T17:23:17.163

我在 ASP 上开始使用 utf-8 时遇到了同样的问题，发现 session.CodePage 有所作为。在经典的 ASP 页面中，总是首先进行 ASP 声明，以确保所有页面都使用 UTF-8 来表示数据、表单、asp 代码、接收或发送的数据。

```
<%@Language=VBScript CodePage = 65001%>
<%
Session.CodePage = 65001
Response.charset ="utf-8"
Session.LCID     = 1033 'en-US
%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T04:10:28.570

您正在查看的是 UTF-8。它可能正是它应该的样子，问题是您用于查看的工具没有正确处理 UTF-8，要么是因为它不能，要么是因为它没有正确配置。

# javascript - AngularJS 或 Backbone 适合初学者

> ID：12082868
> 
> 赞同：0
> 
> 时间：2012-08-22T23:40:54.297
> 
> 标签：javascript, backbone.js, google-chrome-extension, angularjs

我正在为我的 Chrome 扩展编程（localStorage、大量 ajax 调用、过滤、json 操作）选择一个 javascript 框架。你推荐 AngularJS 还是 Backbone？几个月前我开始使用 JS（我有 PHP 和 Java 背景），对我来说主要问题是我的 Web 应用程序结构良好且干净。

我喜欢 AngularJS 的哪些方面？两种方式绑定和概念本身。

我喜欢 Backbone 的哪些方面？对于初学者来说真的很简单。而且资源很多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T23:47:33.793

完全披露：我在 AngularJS 上工作，显然有一点偏见。;)

如果您正在寻找一个固执己见的应用程序结构，我肯定会坚持使用 AngularJS。Backbone 提供了许多有用的实用程序，但是对于如何连接事物，您必须做出许多选择。根据我使用 Backbone.js 编写中型/大型应用程序的经验，我发现与 AngularJS 相比，我必须付出更多努力来保持事物的有序性，后者的关注点分离更加清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:39:32.167

最好的选择是在这两个库中编写小项目。

为什么不测试并查看[Addy Osmani的](https://plus.google.com/115133653231679625609/)[Todo MVC](http://addyosmani.github.com/todomvc/)项目的代码，然后做出选择？

# backbone.js - Backbone JS - 模型保存方法和错误回调

> ID：12082871
> 
> 赞同：1
> 
> 时间：2012-08-22T23:41:18.210
> 
> 标签：backbone.js, local-storage

我正在尝试覆盖模型保存方法并设置错误回调。我混合使用 localStorage 和服务器端数据，所以如果应用程序无法连接到服务器，我想将模型保存到本地存储。这是我的模型代码：

```
var Project = Backbone.Model.extend({
        urlRoot: Settings.urls.projects.project,

        save: function(attributes, options){
            options || (options = {});

            this.set("last_updated", new Date().toISOString(), {silent: true});

            options.error = function(){
                console.log("Error callback");
            }

            return this.constructor.__super__.save.apply(this, arguments);
        }, 
```

如您所见，我试图在 save 方法中设置 options.error ，然后调用 super 方法来实际操作保存。由于某种原因，它忽略了该函数，并且没有调用控制台日志语句。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:53:38.477

检查此参考： [http ://backbonejs.org/#Model-extend](http://backbonejs.org/#Model-extend)

你需要做这样的事情：

```
return Backbone.Model.prototype.save.call(this, attributes, options); 
```

# python - 按唯一反向绝对条件对列表进行排序

> ID：12082872
> 
> 赞同：0
> 
> 时间：2012-08-22T23:41:21.310
> 
> 标签：python, list, sorting, duplicates

上下文 - 开发算法以确定潮流网络中的回路流。

问题：

我有一个列表列表，每个列表代表通过我的算法确定的网络中的一个循环。不幸的是，该算法还将拾取反向重复。

IE

```
L1 = [a, b, c, -d, -a]

L2  = [a, d, c, -b, -a] 
```

（请注意，c 不应为负数，由于网络结构和定义的流程，它是正确的）

现在这两个循环是等价的，只是在整个网络中遵循相反的结构。

我希望保留 L1，同时从列表中丢弃 L2。因此，如果我有一个包含 6 个循环的列表，其中 3 个是反向重复，我希望保留所有三个。

此外，循环不必遵循上面指定的格式。它可以更短，也可以更长，并且符号结构（例如 pos pos pos neg neg）不会在所有情况下都出现。

我一直试图通过反转列表并比较绝对值来对此进行排序。

我完全被难住了，任何帮助将不胜感激。

基于 mgibson 提供的一些代码，我能够创建以下内容。

```
def Check_Dup(Loops):
    Act = []
    while Loops:
        L = Loops.pop()
        Act.append(L)
        Loops = Popper(Loops, L)
    return Act

def Popper(Loops, L):
    for loop in Loops:
        Rev = loop[::-1]
        if all (abs(x) == abs(y) for x, y in zip(loop_check, Rev)):
            Loops.remove(loop)
    return Loops 
```

这段代码应该一直运行，直到每次都没有循环丢弃重复项。我接受 mgibsons 的答案，因为它提供了创建解决方案所需的密钥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:54:06.460

我不确定我是否得到您的问题，但反转列表很容易：

```
a = [1,2]
a_rev = a[::-1]  #new list -- if you just want an iterator, reversed(a) also works. 
```

`a`比较和的绝对值`a_rev`：

```
all( abs(x) == abs(y) for x,y in zip(a,a_rev) ) 
```

可以简化为：

```
all( abs(x) == abs(y) for x,y in zip(a,reversed(a)) ) 
```

现在，为了尽可能提高效率，我将首先根据绝对值对数组进行排序：

```
your_list_of_lists.sort(key = lambda x : map(abs,x) ) 
```

现在您知道如果两个列表相等，它们必须在列表中相邻，您可以使用 enumerate 将其拉出：

```
def cmp_list(x,y):
    return True if x == y else all( abs(a) == abs(b) for a,b in zip(a,b) )

duplicate_idx = [ idx for idx,val in enumerate(your_list_of_lists[1:]) 
                  if cmp_list(val,your_list_of_lists[idx])  ]

#now remove duplicates:
for idx in reversed(duplicate_idx):
    _ = your_list_of_lists.pop(idx) 
```

* * *

如果您的（子）列表严格增加或严格减少，这将变得更加**简单**。

```
lists = list(set( tuple(sorted(x)) for x in your_list_of_lists ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T00:45:02.227

```
[pair[0] for pair in frozenset(sorted( (c,negReversed(c)) ) for c in cycles)] 
```

在哪里：

```
def negReversed(list):
    return tuple(-x for x in list[::-1]) 
```

`cycles`元组必须在哪里。

这需要每个循环，计算其副本，并对它们进行排序（将它们放在一对规范上等效的）。该集合`frozenset(...)`使所有重复项均独一无二。然后你提取规范元素（在这种情况下，我任意选择它为`pair[0])`.

* * *

*请记住，您的算法可能会返回从任意位置开始的循环。*如果是这种情况（即您的算法可能会返回`[1,2,-3]`or `[-3,1,2]`），那么您需要将它们视为等效[项链](http://en.wikipedia.org/wiki/Necklace_(combinatorics))

有很多方法可以规范化项链。上述方法效率较低，因为我们不关心直接规范化项链：我们只是将整个等价类视为规范元素，将每个循环`(a,b,c,d,e)`转换为`{(a,b,c,d,e), (e,a,b,c,d), (d,e,a,b,c), (c,d,e,a,b), (b,c,d,e,a)}`. 在您的情况下，由于您认为负数是等效的，因此您会将每个循环变成`{(a,b,c,d,e), (e,a,b,c,d), (d,e,a,b,c), (c,d,e,a,b), (b,c,d,e,a), (-a,-b,-c,-d,-e), (-e,-a,-b,-c,-d), (-d,-e,-a,-b,-c), (-c,-d,-e,-a,-b), (-b,-c,-d,-e,-a)}`. 确保`frozenset`用于性能，因为`set`它是不可散列的：

```
eqClass.pop() for eqClass in {frozenset(eqClass(c)) for c in cycles} 
```

在哪里：

```
def eqClass(cycle):
    for rotation in rotations(cycle):
        yield rotation
        yield (-x for x in rotation) 
```

旋转类似于[在python中移动列表](https://stackoverflow.com/questions/2150108/efficient-way-to-shift-a-list-in-python)但产生元组的有效方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T00:49:12.987

如果您在两个方向上都有，我看不出它们如何等效`c`-其中之一必须是`-c`

```
>>> a,b,c,d = range(1,5)
>>> L1 = [a, b, c, -d, -a]
>>> L2  = [a, d, -c, -b, -a]
>>> L1 == [-x for x in reversed(L2)]
True 
```

现在您可以编写一个函数来将这两个循环折叠成一个值

```
>>> def normalise(loop):
...     return min(loop, [-x for x in reversed(L2)])
... 
>>> normalise(L1)
[1, 2, 3, -4, -1]
>>> normalise(L2)
[1, 2, 3, -4, -1] 
```

消除重复的一个好方法是使用集合，我们只需要将列表转换为元组

```
>>> L=[L1, L2]
>>> set(tuple(normalise(loop)) for loop in L)
set([(1, 2, 3, -4, -1)]) 
```

# objective-c - Core Data - 批量处理获取结果的属性

> ID：12082877
> 
> 赞同：0
> 
> 时间：2012-08-22T23:42:31.403
> 
> 标签：objective-c, ios, core-data

我有一堆从托管对象上下文中获取的托管对象。这些对象有一个 imageFilePath 属性，它只是保存到手机目录中的图像数据对象的路径。我的问题是——将所有这些数据对象批量转换为一组照片的最佳方法是什么？

我正在考虑只遍历托管对象的数组，但这似乎效率低下。我也可以在我的模型中从这个属性创建一个单独的实体，并直接获取它们。

有没有一种方法可以在获取的每个结果中应用一个块？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:34:47.797

如果您担心核心数据方面的问题，请查看`fetchBatchSize`您可以设置的`NSFetchRequest`. 您必须进行一些试验才能看到最适合您的尺寸，但类似的东西`25`是一个很好的起点。这样，Core Data 不会一次从磁盘中获取所有对象，而是一次对 25 个对象进行故障处理。你仍然可以看到一个正常的`NSArray`，Core Data 在后台完成了所有的魔法。

# java - Android将字符串添加到ListView

> ID：12082880
> 
> 赞同：1
> 
> 时间：2012-08-22T23:42:46.370
> 
> 标签：java, android, xml, listview, textview

作为我正在制作的 SMS 应用程序的一部分，我需要随着 TextView 的变化动态地将 TextView 中的文本添加到 ListView 中的 Row ... 每次 TextView 说不同的内容时添加另一个 Row。

话虽如此，我创建了一个小示例项目来尝试掌握这样做的窍门，并且我查找了很多示例，但仍然无法正常工作。启动应用程序后，它会暂停一会儿然后崩溃。

我正在尝试将来自 main.xml 布局的 TextView(id:tvContent) 中的文本添加到 ListView 的一行中。

这是我的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/black" >

<Button
    android:id="@+id/addBtn"
    android:text="Add New Item"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:onClick="addItems" >
</Button>

<TextView
    android:id="@+id/tvContent"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Hey there!" >     
</TextView>

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:drawSelectorOnTop="false"
    android:background="@color/black" >     
</ListView>

</LinearLayout> 
```

我的活动课：

```
package com.example.addtolistview;

import java.util.ArrayList;
import android.os.Bundle;
import android.app.ListActivity;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ListViewDemo extends ListActivity {

ArrayList<String> listItems=new ArrayList<String>();

ArrayAdapter<String> adapter;

TextView theFact = (TextView) findViewById(R.id.tvContent);
String shareFact = theFact.getText().toString();

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    adapter=new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1,
            listItems);
    setListAdapter(adapter);

    listItems.add(shareFact);
    adapter.notifyDataSetChanged();
    }
} 
```

这是我的日志猫...我无法弄清楚如何在问题 niceley 中实现它...

```
D/AndroidRuntime(11420): Shutting down VM
W/dalvikvm(11420): threadid=1: thread exiting with uncaught exception (group=0x40c5fa68)
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.addtolistview/com.example.addtolistview.ListViewDemo}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1894)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
at android.app.ActivityThread.access$600(ActivityThread.java:128)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.app.Activity.findViewById(Activity.java:1794)
at com.example.addtolistview.ListViewDemo.<init>(ListViewDemo.java:15)
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1319)
at android.app.Instrumentation.newActivity(Instrumentation.java:1027)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1885)
... 11 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T00:03:06.160

您想在扩展布局之前获取 TextView，因此它是一个简单的 NullPointerExecption。更改您的代码：

```
public class ListViewDemo extends ListActivity {

    ArrayList<String> listItems=new ArrayList<String>();
    ArrayAdapter<String> adapter;

    TextView theFact;
    String shareFact;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        theFact = (TextView) findViewById(R.id.tvContent)
        shareFact = theFact.getText().toString();

        adapter=new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1,
        listItems);
        setListAdapter(adapter);

        listItems.add(shareFact);
        adapter.notifyDataSetChanged();
    }
} 
```

如果你按下按钮，它会调用 addItems() 函数（正如你设置的那样），但它还没有实现，所以它会产生另一个错误。

```
public void addItems(View v) {
    listItems.add(shareFact);
    adapter.notifyDataSetChanged();
} 
```

在 onCreate() 方法下方添加此函数，并将 listItems.add() 和 adapter.notifyDataSetChanged() 行移至此新方法。

# linux - 如何在目录 shell 脚本中列出文件

> ID：12082884
> 
> 赞同：0
> 
> 时间：2012-08-22T23:43:07.077
> 
> 标签：linux, shell

我需要列出目录上的文件。但只有真正的文件，而不是文件夹。只是找不到测试文件是文件夹还是目录的方法....

有人可以为此提供一个 pic o 脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:45:13.407

怎么用[`find`](http://linux.die.net/man/1/find)？

在当前目录中查找常规文件并输出排序列表：

```
$ find -maxdepth 1 -type f | sort 
```

要查找*不是目录的*任何内容（注意：在类 Unix 系统中，除了常规文件和目录之外，还有更多内容）：

```
$ find -maxdepth 1 ! -type d | sort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:50:46.903

你可以用它`ls -l | grep ^d -v`来实现你想要的。我在 Redhat 9.0 中对其进行了测试，它只列出了真实文件，包括隐藏文件。

如果您想获取目录上的文件夹列表。但只有文件夹，而不是真正的文件。您可以使用`ls -l | grep ^d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:47:28.513

在`bash`shell`test -f $file`中会告诉你 $file 是否是一个文件：

```
if test -f $file; then echo "File"; fi 
```

# python - Python 正则表达式中的错误？（re.sub 与 re.MULTILINE）

> ID：12082886
> 
> 赞同：7
> 
> 时间：2012-08-22T23:43:14.017
> 
> 标签：python, regex

我注意到 Python 的 Regex 库中有一些奇怪的行为，我不确定我是否做错了什么。

如果我使用`re.sub()`, with对其运行正则表达式`re.MULTILINE`。它似乎只替换了前几次出现。如果我关闭`re.MULTILINE`、使用`re.subn(..., count = 0, flags = re.MULTILINE)`或编译正则表达式，它会替换所有出现的`re.compile(..., re.MULTILINE)`.

我在 Ubuntu 12.04 上运行 Python 2.7。

我在以下位置发布了一个随机示例：

*   [Pastebin.com](http://pastebin.com/49SU8Mm2) - 终端输出
*   [codepad](http://codepad.org/2RO2iS4O) - 脚本，确认行为（除了 re.subn()，它在 2.5 上有所不同）

有人可以在他们的机器上确认/否认这种行为吗？

编辑：意识到我应该继续在 Python 错误跟踪器上发布这个。编辑 2：报告的问题：http: [//bugs.python.org/msg168909](http://bugs.python.org/msg168909)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-23T00:01:48.180

利用

```
re.sub(pattern, replace, text, flags=re.MULTILINE) 
```

代替

```
re.sub(pattern, replace, text, re.MULTILINE) 
```

这相当于

```
re.sub(pattern, replace, text, count=re.MULTILINE) 
```

这是您的代码中的一个错误。

见[re.sub()](http://docs.python.org/library/re.html#re.sub)

# ruby-on-rails-3 - 运行 rake apn:notifications:deliver 后 sent_at 未更新

> ID：12082887
> 
> 赞同：0
> 
> 时间：2012-08-22T23:43:18.097
> 
> 标签：ruby-on-rails-3, apple-push-notifications

嗨，我正在使用 gem [https://github.com/PRX/apn_on_rails.git](https://github.com/PRX/apn_on_rails.git)并按照说明为我的 iOS 应用程序发送推送通知。我创建了如下通知：

```
device = APN::Device.create(:token => "XXXX XXXX XXXXX XXXX XXXX .... XXXX")   
notification = APN::Notification.new   
notification.device = device   
notification.badge = 5   
notification.sound = true   
notification.alert = "My first push"   
notification.save 
```

并在我的本地服务器中运行 rake 命令：

```
rake apn:notifications:deliver 
```

发送通知。一切顺利，但我的手机仍然没有收到任何消息。我检查了 apn_notifications 表，发现在运行 rake 命令后 sent_at 仍然为零。我在数据库中保存了几个通知，但没有一个被传递（所有 sent_at 都保持为零）。好吧，我得到了一些东西

```
$ rake apn:notifications:deliver --trace
** Invoke apn:notifications:deliver (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute apn:notifications:deliver 
```

包括我

```
begin
 require 'apn_on_rails_tasks'
rescue MissingSourceFile => e
 puts e.message
end 
```

在我的 Rakefile 中。我错过了什么以致无法发送通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:13:33.443

我有同样的行为，对我来说，事实证明我使用了不正确的 PEM 证书。一旦我将证书从 .P12 正确转换为 .PEM，并将其放入 /config 文件夹，它就可以工作了。

调试它的一种方法是，您可以尝试在 ruby​​/rails 控制器中的 notification.save 之后立即调用 APN::App.send_notifications ，而不是等待使用 RAKE 将交付推送到 Apple 服务器。从运行它时的日志中，我看到 Apple 拒绝了我的连接，因此我知道我的证书不正确。

# twitter-bootstrap - 使用 Backbone.Marionette 呈现 Twitter Bootstrap 兼容的选项卡标记

> ID：12082888
> 
> 赞同：5
> 
> 时间：2012-08-22T23:43:21.053
> 
> 标签：twitter-bootstrap, marionette

我正在选择一个 JavaScript MVC 框架，以供 UI 小组决定使用 Twitter Bootstrap 来设置样式和基本 UI 组件的团队使用。这意味着如果我们要渲染[引导选项卡](http://twitter.github.com/bootstrap/components.html#navs)，我需要能够分别为选项卡标签和选项卡窗格呈现兄弟标记。我喜欢 Marionette 作为比 Backbone 本身更高级别的框架，但不像 Ember 那样复杂。但是，我在尝试构建显示选项卡 ala Bootstrap 所需的标记时遇到了问题。

我相信我需要将“选项卡”作为一个整体使用布局，并使用“标签”区域和“窗格”区域，使用 CollectionView 分别呈现每个区域。然而，由于每个视图都需要它自己的 HTML 元素，因此在我的集合标记周围放置了一个“div”，位于标签/窗格容器及其各自的项目之间。

我整理了一个[jsFiddle 示例](http://jsfiddle.net/heuristocrat/2BnT5/2/)来说明这一点。

我的问题是：

1) 这是组织集合渲染的正确方法，其中您有两个或多个视图渲染的所述集合需要是 DOM 中的兄弟姐妹？

2）如果是，有没有办法让你的区域元素成为你的集合视图的根，而不是中间的 HTML 元素？

**笔记：**

我确实看到了[第一个问题的可能答案](https://stackoverflow.com/questions/11243026/backbone-marionette-collectionview-compositeview-rendering)，但这似乎是为一组项目生成单个标题。

我也确实看到了[我的问题第二部分的可能答案](https://stackoverflow.com/questions/11195242/extra-wrappers-in-backbone-and-marionette)，但这似乎暗示您仍在生成 HTML 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:22:26.480

1) 是的，我就是这样做的。重用同一个集合可确保两个集合视图保持同步，以防集合被动态修改。

2）简短的回答是否定的。长答案是你必须重写一些方法来实现这一点。`CollectionView`'s很容易`el`与区域相同，但是如果视图关闭，`el`它将从 DOM 中删除，从而使区域不可用。

# javascript - 覆盖 在javascript中使用变量

> ID：12082896
> 
> 赞同：0
> 
> 时间：2012-08-22T23:44:04.547
> 
> 标签：javascript, jquery, html, variables

我正在开发一个模拟购物车的原型移动网络应用程序。我已经能够创建购物车并将产品添加到购物车。我遇到的麻烦是覆盖总成本值。我能够转换这些值以执行计算，但我无法覆盖存储总值的值。这是我到目前为止的代码：

```
<div data-role="content">
              <div class="ui-grid-b">
                <div class="ui-block-a">Title</div>
                <div class="ui-block-b">Format</div>
                <div class="ui-block-c">Price</div>
                <div class="ui-block-a"><p id = "myTitle"></p></div>
                <div class="ui-block-b"><p id = "myFormat"></p></div>
                <div class="ui-block-c"><p id = "myPrice"></p></div>
                <div class="ui-block-a"></div>
                <div class="ui-block-b"></div>
                <div class="ui-block-c"><p id="myTotal"></p></div>
               </div>   

            </div> 
```

现在我希望更新存储在“myTotal”id 中的值。我有一个名为 addtocart() 的函数，这里是它的代码：

```
`
var total = 0;
function addtocart() {

var title = game.Title ;
var price = game.Price ;
var format = game.Format ; 
var newParagraph = document.createElement('p');
newParagraph.textContent = title;
var newParagraph2 = document.createElement('p');
newParagraph2.textContent = format;
var newParagraph3 = document.createElement('p');
newParagraph3.textContent = price;

document.getElementById("myTitle").appendChild(newParagraph);
document.getElementById("myFormat").appendChild(newParagraph2);
document.getElementById("myPrice").appendChild(newParagraph3);

price = parseInt(price, 10);
price = total + price;
var newParagraph4 = document.createElement('p');
newParagraph4.textContent = total;

document.getElementById("myTotal").appendChild(newParagraph4); 
```

} `

现在我知道 appendChild 用于向文档添加文本，但我似乎可以找到一种解决方案，在添加新项目时用存储在“总计”中的新值覆盖该值。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:45:24.633

使用 innerHTML 属性。这会将元素内的 HTML 设置为您设置的任何内容，而不是添加节点。

```
var newParagraph4 = "<p>" + total + "</p>";
document.getElementById("myTotal").innerHTML = newParagraph4; 
```

这执行的 DOM 操作更少，并且比在 DOM 上创建段落然后添加它更快。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T23:47:35.190

将 .textContent 更改为 innerHTML：

```
var newParagraph4 = document.createElement('p');
newParagraph4.innerHTML = total; 
```

# ios - Dynamically updating buttons on a view in IOS?

> ID：12082897
> 
> 赞同：0
> 
> 时间：2012-08-22T23:44:11.643
> 
> 标签：ios, button

I hope I can ask this question clearly, I have a viewController that I build programmatically (not with NIB), this view controller has two buttons I draw on the lower portion of the view

"prev" and "next" what I'd like to do is, when I've reached the "end" I'd like to only draw the "prev" button, and not the "next", and vice-versa, when I'm at the beginning, I'd like to only draw the "next" and not the prev.

Any general ideas on how to approach this ?

Thanks,

uba

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:03:08.933

You can use "hidden" property of UIButton:

```
if (page == firstPage) {
    self.myButtonPrev.hidden = YES;
} else {
    self.myButtonPrev.hidden = NO;
}

if (page == lastPage) {
    self.myButtonNext.hidden = YES;
} else {
    self.myButtonNext.hidden = NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:03:49.680

The first thing to do is to addTarget for your button to listen to touch events

```
[yourButtonNameHere addTarget:self action:@selector(yourCallBackFunctionNameHere:) forControlEvents:UIControlEventTouchUpInside]; 
```

What this does is whenever your button is pressed it calls the yourCallBackFunctionNameHere function. Do this for the other button too. The semi colon after the function indicates that the function has to send the information of the UIElement that caused the event to occur.

Assign tags to both the buttons.

```
youButtonNameHere.tag=yourTag; 
```

In the function check which button is sending the UIcontrolEvent by comparing the tags

```
- (void)yourFunctionNameHere:(id)sender {
   UIButton *yourButton =(UIButton *)sender;

    if(yourButton.tag==501){

      // logic to check if this is the first or last page and act accordingly
       yourButton.hidden = YES / NO based on what you want to do.
     }else{  
     // logic to do otherwise.
     } 
```

# django - 如何仅使用 collectstatic 忽略特定应用程序的静态文件？

> ID：12082902
> 
> 赞同：7
> 
> 时间：2012-08-22T23:44:27.950
> 
> 标签：django, django-staticfiles

**只是为了解决这个问题，如果可能的话，我想这样做而不是将它们全部嵌套在应用程序的静态文件夹中的应用程序名称的目录中，这感觉是多余的。如果这是唯一的方式，那么这就是生活。**

我在用：

```
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

和：

```
STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage' 
```

它在运行 collectstatic 时编译 JS 和 SASS。它们都位于 APP_ROOT/static/ 目录中。

唯一的“问题”是它附带了所有源 sass 和 js 文件。在某个时候，我将把这一切都推到 S3 上，如果可能的话，我想避免这种情况。

我发现如果你运行：

```
python manage.py collectstatic -i sass -i js 
```

它仍然编译我指定的 JS 和 CSS 文件，而将其余的“源”文件排除在外。不幸的是，它也会忽略 /admin/ 中的每个 js 文件，因为它匹配 /admin/js/ 等。我什至不知道这是否可能是这个特定项目的问题，但我可以预见未来其他应用程序在哪里我肯定会想要包含保存在应用程序中的静态 js/css。

我想做的是：

```
python manage.py collectstatic -i app_name/sass -i app_name/js 
```

正如我在顶部提到的，简单的解决方案就是在文件夹中的静态文件前面加上 app_name/，就像 django.contrib.admin 的做法一样。但是，此时您最终会得到 PROJECT_ROOT/app_name/static/app_name/[js|sass|img|data]/ 的目录结构，我认为应该可以避免冗余。

话又说回来，也许这是最好的选择，以保证避免与其他应用程序冲突？

我已经研究过编写自定义存储和查找器，我认为可以自己动手。不过，我想先在这里检查一下，看看这是否是其他人已经解决的问题，或者，要实际检查一下压倒性的反应是否只是添加前缀目录。

如果我要自己动手，我认为我会走的路将是扩展`django.contrib.staticfiles.finders.AppDirectoriesFinder`和压倒一切`list()`。我还不确定这种方法会起作用，我需要更多地跟踪 collectstatic 管理命令的进展情况，所以如果有人以前做过这个或类似的事情，或者知道它为什么会/不会起作用，任何帮助都是赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-08T23:19:54.607

我设法通过像这样子类化 Django 查找器来解决这个问题：

**蟒蛇2.X**

```
from django.contrib.staticfiles import finders
from django.conf import settings

def add_ignores(ignore_patterns):
    ignore = settings.STATICFILES_FINDERS_IGNORE

    if ignore:
        if ignore_patterns:
            ignore_patterns.extend(ignore)
        else:
            ignore_patterns = ignore

    return ignore_patterns

class FileSystemFinderIgnore(finders.FileSystemFinder):
    def list(self, ignore_patterns):
        return super(FileSystemFinderIgnore, self).list(add_ignores(ignore_patterns))

class AppDirectoriesFinderIgnore(finders.AppDirectoriesFinder):
    def list(self, ignore_patterns):
        return super(AppDirectoriesFinderIgnore, self).list(add_ignores(ignore_patterns))

class DefaultStorageFinderIgnore(finders.DefaultStorageFinder):
    def list(self, ignore_patterns):
        return super(DefaultStorageFinderIgnore, self).list(add_ignores(ignore_patterns)) 
```

**蟒蛇3.X**

```
from django.contrib.staticfiles import finders
from django.conf import settings

def add_ignores(ignore_patterns):
    ignore = settings.STATICFILES_FINDERS_IGNORE

    if ignore:
        if ignore_patterns:
            ignore_patterns.extend(ignore)
        else:
            ignore_patterns = ignore

    return ignore_patterns

class FileSystemFinderIgnore(finders.FileSystemFinder):
    def list(self, ignore_patterns):
        return super().list(add_ignores(ignore_patterns))

class AppDirectoriesFinderIgnore(finders.AppDirectoriesFinder):
    def list(self, ignore_patterns):
        return super().list(add_ignores(ignore_patterns))

class DefaultStorageFinderIgnore(finders.DefaultStorageFinder):
    def list(self, ignore_patterns):
        return super().list(add_ignores(ignore_patterns)) 
```

并将其添加到我的设置中：

```
STATICFILES_FINDERS_IGNORE = [
    '*.scss',
    '*.js',
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T13:59:00.087

我是新手`django-pipeline`，但我相信它现在已经`pipeline.finders.FileSystemFinder`并且`pipeline.finders.AppDirectoriesFinder`可以做到这一点。

[请参阅https://django-pipeline.readthedocs.org/en/latest/storages.html](https://django-pipeline.readthedocs.org/en/latest/storages.html)上的“如果您想从收集的静态文件中排除流水线内容”部分。

另外，从1.5的源代码：

```
class AppDirectoriesFinder(PatternFilterMixin, DjangoAppDirectoriesFinder):
    """
    Like AppDirectoriesFinder, but doesn't return any additional ignored
    patterns.

    This allows us to concentrate/compress our components without dragging
    the raw versions in via collectstatic.
    """ 
```

请注意，在撰写本文时，这会导致空的压缩/缩小内容`DEBUG==True`，请参阅[https://github.com/cyberdelia/django-pipeline/issues/418](https://github.com/cyberdelia/django-pipeline/issues/418)。我认为这将在 django-pipeline 的未来版本中得到修复。

# spring - Spring Security 方法安全注解

> ID：12082904
> 
> 赞同：1
> 
> 时间：2012-08-22T23:45:04.797
> 
> 标签：spring, security, annotations

最近，我开始了一个个人项目，我决定实现 Spring Security。我以前曾尝试过这样做，但那时我的运气并不比现在好。然后我解决了这个问题，但是那个方法（直接从代码中访问安全上下文并检查它包含的当前用户的角色字符串）感觉就像一个 hack，我希望这次能做对。

现在，据我所知，我的 Spring Security 大部分都在运行……我可以尝试使用基于角色的重定向转到一个页面，它会将我重定向到登录页面。我可以使用好的或坏的信息登录并被发送到正确的位置。我不能做的，我从来没有做过的，是让@Secured 或@PreAuthorize 注释像我希望的那样运行。

让我试着解释一下（代码将遵循）。我的欢迎/登录页面是 index.jsp，当您登录时，Spring Security 会将您发送到 login.html，这是我在 LoginController 类中映射的方法。在该方法中，我尝试调用大量其他方法：这些方法都不应该是最终的，我只是想向自己证明事情正在运行。

我调用了两种受@Secured 保护的方法，以及两种受@PreAuthorize 保护的方法，一个是“ROLE_ADMIN”，一个是“ROLE_USER”。我登录的帐户只有 ROLE_USER 权限。在这种情况下，我希望根据将其设置为我的 Spring Security 的 access-denied-page 属性的目标来重定向到我的 accessdenied.jsp 页面。我没想到的是，我看到的是，当我登录时，每个方法都被成功调用并运行。

我已经（至少尝试过）遵循教程。我在谷歌上花了几天时间，阅读我能找到的所有东西。我已将我的安全上下文合并到我的上下文中，以及作为潜在解决方案引起我注意的所有其他内容。如果我啰嗦了，我很抱歉，但我宁愿提供太多信息而不是太少。为此，以下是我的代码：

索引.jsp

```
 <html>
    <body>
        <form action="j_spring_security_check" method="POST">
            <label for="j_username">Name:</label> 
            <input id="j_username" type='text' name='j_username' /> 
            <br /> 
            <label for="j_password" class="passwordField">Password:</label> 
            <input id="j_password" type='password' name='j_password' /> 
            <br />
            <input id="proceed" type="submit" value="Submit" />
        </form>
    </body>
    </html> 
```

登录控制器.java

```
package cribbage.controller;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.access.annotation.Secured;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import org.springframework.jdbc.core.JdbcTemplate;

import cribbage.database.entity.Test;

@Controller
public class LoginController {
    @Autowired
    JdbcTemplate t;

    @RequestMapping(value = "/login")
    public ModelAndView login(HttpServletRequest request) {
        test();
        test2();
        test3();
        test4();
        return new ModelAndView("test.jsp");
    }

    @Secured("ROLE_ADMIN")
    public void test(){
        System.out.println("Test One");
    }

    @Secured("ROLE_USER")
    public void test2(){
        System.out.println("Test Two");
    }

    @PreAuthorize("hasRole('ROLE_ADMIN')")
    public void test3(){
        System.out.println("Test Three");
    }

    @PreAuthorize("hasRole('ROLE_USER')")
    public void test4(){
        System.out.println("Test Four");
    }
} 
```

web.xml

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<display-name>Spring Security Tutorial Application</display-name>

<!-- - Location of the XML file that defines the root application context 
    - Applied by ContextLoaderListener. -->

<context-param>
    <description>Spring context file</description>
    <param-name>contextConfigLocation</param-name>
    <param-value>
       /WEB-INF/applicationContext.xml
       /WEB-INF/applicationContext-security.xml
   </param-value>
</context-param>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- - Provides core MVC application controller. See bank-servlet.xml. -->
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/applicationContext-security.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd            
                    http://www.springframework.org/schema/tx
                    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd         
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.1.xsd            
                    http://www.springframework.org/schema/aop 
                    http://www.springframework.org/schema/aop/spring-aop.xsd
                    http://www.springframework.org/schema/mvc
                    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<context:property-placeholder location="classpath:*.properties" />

<mvc:annotation-driven />

<!-- Which packages to scan when looking for beans defined with @Component -->
<context:component-scan scoped-proxy="targetClass"
    base-package="cribbage.controller
                  cribbage.database.dao
                  cribbage.database.entity" />
<context:annotation-config />

<!-- Turn on AspectJ @Configurable support -->

<!-- Turn on @Autowired, @PostConstruct etc support -->
<bean
    class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" />
<bean
    class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" />

<!-- Add Transaction support -->
<!-- Use @Transaction annotations for managing transactions -->
<tx:annotation-driven transaction-manager="txManager" />

<bean id="txManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource" />

<bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.SessionLocaleResolver"
    p:defaultLocale="en_US" />

<!-- For database, uses maven filtering to fill in place holders -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${db.driver}" />
    <property name="url" value="${db.url}" />
    <property name="username" value="${db.username}" />
    <property name="password" value="${db.password}" />
    <property name="maxActive" value="10" />
    <property name="maxIdle" value="1" />
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource" />
</bean>

<security:global-method-security
    secured-annotations="enabled" pre-post-annotations="enabled" /> 
```

applicationContext-security.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/security 
                http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http pattern="/CSS/**" security="none" />

<http auto-config="true" use-expressions="true" access-denied-page="/accessdenied.jsp">
    <form-login always-use-default-target="false"
        login-processing-url="/j_spring_security_check" default-target-url="/login.html"
        login-page="/index.jsp" authentication-failure-url="/loginFailed.jsp" />
    <logout logout-url="/j_spring_security_logout" />
    <intercept-url pattern="/test.jsp" access="hasRole('ROLE_USER')" />
</http>

<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"
            users-by-username-query="select username,user_password,enabled from users where username=?"
            authorities-by-username-query="select username,authority,enabled from users where username=?" />
    </authentication-provider>
</authentication-manager> 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T04:21:10.153

实际上，spring security 仅在涉及方面/安全拦截器时才有效。在您的代码中 test(),test2(),test3(),test4() 直接从控制器方法登录调用。所以不会有任何方面的参与导致安全被绕过。

如果测试方法是另一个 spring bean 的一部分，那么这应该像你所期望的那样工作。

或者如果它们在同一个类中，则应该使用 spring bean 而不是 this（当前对象）调用它。

# jquery - 为什么要在 Rails 中使用 Backbone.js？

> ID：12082905
> 
> 赞同：11
> 
> 时间：2012-08-22T23:45:14.617
> 
> 标签：jquery, ruby-on-rails, ajax, backbone.js

Rails 可以通过 js 文件和 js.erb 文件更新其表示层，使用像 Backbone.js 这样的框架有哪些具体好处？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-22T23:45:14.617

这里有几个原因：

**1)** Backbone 是专门为 Rails 构建的，并且在[Backbone-on-rails](https://github.com/meleyal/backbone-on-rails)的帮助下很容易集成。虽然 Knockout 和 Angular 的模型-视图-视图模型 (MVVM) 模式可以很容易地并入 Rails 应用程序而不显眼，但如果您的应用程序有大量异步页面更新，Backbone 的 MVC 架构提供了一个似乎确实必要的组织级别。以这个 Stack Overflow 页面为例：

如果您在 Rails 中构建此问题视图，您将拥有问题 show.html.erb、question_show.js、show.js.erb 以及与异步更新此页面上的内容有关的所有其他 js.erb 文件（诸如赞成/反对投票、收藏、评论等操作）。

在 Backbone 中，视图不是像 show.html.erb 这样的标记模板，而是在一个位置包含与该标记资源相关的所有代码。因此，与其在远程 question_show.js 文件中定义所有事件侦听器并在各种 js.erb 文件中处理所有 AJAX 更新，不如将*所有与问题显示资源相关的事件侦听和发布都包含在一个地方*，即 Backbone 问题显示视图。当然，comment 可以有自己的视图和评论自己的集合，以及我没有提到的其他 MVC 元素。但重点是，Backbone 可以帮助您定义前端资源。

**2)**选择像 Backbone 这样的 JavaScript 框架有助于减轻服务器的一些负载，因为这些代码实际上不需要在服务器端执行。当可以在客户端的浏览器中完成时，为什么要在服务器上的 html.erb 模板中呈现所有标记元素。针对安全问题，您可以在将数据库对象格式化为 JSON 并将其发送到客户端时将数据库对象属性列入白名单/黑名单。

**3）**骨干（特别是）似乎提供了很大的自由度。它提供了一组约定来帮助组织您的应用程序，但归根结底，它是您正在开发的框架。Backbone 的 MVC 框架不像 Rails 那样单向，但仍然保持可靠的约定。

**4)**使用 Backbone（不支持或反对其他框架），pushState 很容易实现到期望其用例的框架中。但是，pushState 在爬虫访问您的内容方面有其缺点，并且需要以爬虫友好的方式合并一些服务器端呈现。不过，很棒的是，您可以在使用 Backbone 开箱即用时获得相同的历史/可降解性；他们的 url 片段允许相同的功能，他们只是有一个额外的 # 在那里。

使用像 Backbone 这样的框架还有很多其他原因，而且看起来确实有很多替代方案，因为一个框架并不适合所有人。但据我所知，如果您从头开始构建应用程序，Backbone 似乎是一个很棒的框架。如果您想将其合并到现有应用程序中，它似乎也非常可行。

资料来源：[Rails 上的 Backbone.js](https://learn.thoughtbot.com/products/1-backbone-js-on-rails)

# git - git仓库浏览

> ID：12082909
> 
> 赞同：1
> 
> 时间：2012-08-22T23:45:45.190
> 
> 标签：git, browser, mercurial, repository, local

如果我可以通过以下方式使用 git 进行存储库浏览，我很感兴趣：

给定一个远程存储库 - 在开始时仅获取有关某个修订的目录结构的数据 - 考虑到先前获得的知识，根据选择单独获取文件

例如（假命令仅用于说明意图）：

git clone --dont_get_me_repo_contents_please // 关于文件内容的信息在某处，我看到 my/cool/file 和其他人一起 git get my/cool/file

假设我不会拥有该服务器（存储远程存储库的服务器）。我只能通过 git 客户端与之交互。

我只想使用尽可能少的网络传输和尽可能少的空间。

基本上，您在 github 上所做的事情，当您查看修订文件时，您会看到目录，然后单击文件并获得这些内容。通过网络发送的唯一信息是目录结构和您正在查看的文件的内容。我假设它正在与服务器上的 git repo 交互。现在它是怎么做到的？

我不想要这样做的东西，也许只是作为一个例子，我想知道这是如何完成的。

我做了一些阅读，我觉得答案是否定的，这不能以这种形式完成。是不是一个人无法做到这一点而需要在某个地方进行检查修订？如果是这样，考虑到我的目标（使用尽可能少的网络流量，次要 - 尽量减少空间），我最好的选择是什么。

如果我对 git 术语的使用是滥用的，我很抱歉（这里是 n00b）。我希望我能理解这个想法。

编辑： MERCURIAL 呢？这些事情可以用它来完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:56:17.133

您可以从浅 git clone 开始（例如，历史上只有 1 个修订版）：

```
git clone --depth 1 
```

# java - 模拟 Mongo 写锁来衡量性能

> ID：12082911
> 
> 赞同：0
> 
> 时间：2012-08-22T23:45:47.810
> 
> 标签：java, multithreading, performance, mongodb, mongo-java

我正在尝试使用 mongo 1.8.0 模拟 mongo 写锁，但无法看到正确的预期结果。

我在同一台服务器上的两个不同数据库中创建了两个 mongo 集合。我创建了一个 DBObject 数组并将它们插入到两个集合中。使用两个线程同时触发批量插入。我还跟踪调用 DBCollection.insert(DBObject arr, WriteConcern.SAFE) 之前和之后的时间。

尽管使用了不同的对象大小和数组大小，但我总是发现插入两个数据库所花费的时间有点接近。我希望一个线程首先写入阻塞另一个线程，导致两个线程之间花费的时间显着不同。我在这里缺少什么吗？

```
class BenchTest {

public static void main() {

    Mongo m = new Mongo(host,port);
    DBCollection coll1 = m.getDB("db0").getColl("coll0");
    DBCollection coll2 = m.getDB("db1").getColl("coll0");

    Thread t1 = new WriteThread();
    t1.setCollection(coll1);
    Thread t2 = new WriteThread();
    t2.setCollection(coll2);

    t1.run();
    t2.run();

}

}

   class WriteThread extends Thread {

    DBCollection coll; 

    public void setCollection (DBCollection coll) {
        this.coll = coll;
    }

    long startTime = System.currentTimeMillis();
    coll.insert( (DBObject1, DBObject2, …, DBObjectn), WriteConcern.SAFE);
    long endTime = System.currentTimeMillis();

    System.out.println ("Time taken = "+(endTime-startTime));

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:45:41.163

为什么不直接使用[fsync & lock](http://docs.mongodb.org/manual/reference/method/db.fsyncLock/#db.fsyncLock)来模拟“写锁”呢？

很难模拟“写锁”，因为它基本上不会挂起，它只存在很短的时间。[此处](http://www.mongodb.org/display/DOCS/How+does+concurrency+work)概述的版本（1.8、2.0 和 2.2）有许多变化（以免重复我自己）。

这是一篇关于其他人对“写锁”进行类似测试的非常好的[博客文章。](http://blog.serverdensity.com/goodbye-global-lock-mongodb-2-0-vs-2-2/)

# html - CSS 帮助。使验证消息出现在输入字段旁边

> ID：12082912
> 
> 赞同：1
> 
> 时间：2012-08-22T23:45:47.593
> 
> 标签：html, css

我在该字段下有一条验证消息，但我希望它在同一行。（请不要评判我的前端技能，特别是 css 和 html =））

# 现在

![在此处输入图像描述](../Images/f26f087d564b29e68bd3d7e2e21de605.png)

# 我想要的是

![在此处输入图像描述](../Images/33cd2d1bb89c5f7111c63637e79f6f8f.png)

# CSS

```
@CHARSET "UTF-8";

#reg-form {
    display: block;
    width: 600px;
}

#reg-form li {
    width: 250px;
    display: block;
    padding: 5px 5px;
}

    #reg-form li label {
        width: 150px;
        float: left;
    }

.status {
    font-size: 14px;
    color: red;

}

#register-user {
    float: left;
    margin-left: 7px;
    padding: 5px 5px 5px 5px;
} 
```

# HTML

```
{% block main-menu %} 
    <div class="contentarea">
            <form method="post" action="">{% csrf_token %}
                <ul id="reg-form">
                    <li>
                        <label for="id_username">Username:</label>
                        <input id="id_username" type="text" name="username" maxlength="30" />
                    </li>
                    <div class="status"></div>
                    <li>
                        <label for="id_email">Email:</label>
                        <input type="text" name="email" id="id_email" />
                    </li>
                    <div class="status"></div>
                    <li>
                        <label for="id_password">Password:</label>
                        <input type="password" name="password" id="id_password" />
                    </li>
                    <div class="status"></div>
                    <li>
                        <label for="id_password2">Password (Again):</label>
                        <input type="password" name="password2" id="id_password2" />
                    </li>
                    <div class="status"></div>
                </ul>
                <input type="button" value="register" id="register-user"/>
            </form>
    </div>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T00:09:01.083

你不应该把`<div>`s 放在 a `<ul>`-- 这是不好的语法。（Javascript 错误伴随着语法错误。）提示：使用[W3 验证器](http://validator.w3.org/)检查您的源代码。

尝试使用`<span>`-- 这是一个内联元素 -- 而不是`<div>`（但将跨度放在相应`<li>`的 s 内）。

例如：http: [//jsfiddle.net/Q7R4k/3/](http://jsfiddle.net/Q7R4k/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:01:01.680

你`<li>`的 s`display: block;`在他们身上。尝试将其更改为`display: inline`或`display: inline-block`和。请参阅[http://jsfiddle.net/Q7R4k/](http://jsfiddle.net/Q7R4k/)。默认情况下，内联元素将堆叠在右侧，而块则占据整条水平线。`.status``#reg-form li`

但是，您需要在 s 之间有换行符`li`，以便将`li`s 放在单独的行上。请参阅[http://jsfiddle.net/Q7R4k/1/](http://jsfiddle.net/Q7R4k/1/)。

**编辑：** 请参阅[http://jsfiddle.net/Q7R4k/2/](http://jsfiddle.net/Q7R4k/2/)以获取在输入之后直接带有 div 的版本。在这里，给出了标签`display:block;`，输入`display:inline-block;`（内联也可以）和`.status` `display:inline;`。`ul`此外，还取出了宽度。

# html - 使用 CSS，如何使图像跨越页面的整个宽度作为背景图像？

> ID：12082913
> 
> 赞同：8
> 
> 时间：2012-08-22T23:46:09.863
> 
> 标签：html, css

说，就像这里的例子：[http ://www.electrictoolbox.com/examples/wide-background-image.html](http://www.electrictoolbox.com/examples/wide-background-image.html)

当我这样做时，无论我做什么，最终都会在图像周围出现白色边框。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T23:53:17.537

如果您希望使用`background-image: url(...);`，我认为您不能。但是，如果你想玩分层，你可以这样做：

```
<img class="bg" src="..." /> 
```

然后是一些CSS：

```
.bg
{
  width: 100%;
  z-index: 0;
} 
```

您现在可以通过使用 z-indexes 等在拉伸图像上方分层内容。一个快速说明，图像不能包含在任何其他元素中`width: 100%;`以应用于整个页面。

如果您不能依赖，这里有一个快速演示：http `background-size`: [//jsfiddle.net/bB3Uc/](http://jsfiddle.net/bB3Uc/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-25T17:10:44.813

理想情况下，背景图像总是使用 CSS 完成的。所有其他图像都是用 html 完成的。这将跨越您网站的整个背景。

```
body {
  background: url('../images/cat.ong');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:53:26.673

您将 CSS 设置为：

```
#elementID {
    background: black url(http://www.electrictoolbox.com/images/rangitoto-3072x200.jpg) center no-repeat;
    height: 200px;
} 
```

它使图像居中，但不缩放。

[**小提琴**](http://jsfiddle.net/7t2VT/)

在较新的浏览器中，您可以使用该`background-size`属性并执行以下操作：

```
#elementID {
    height: 200px; 
    width: 100%;
    background: black url(http://www.electrictoolbox.com/images/rangitoto-3072x200.jpg) no-repeat;
    background-size: 100% 100%;
} 
```

[**小提琴**](http://jsfiddle.net/7t2VT/1/)

除此之外，常规图像是一种方法，但它并不是真正的背景图像。

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-03T23:39:22.470

问题是身体的边距他的默认值是边距：8px，我把它设为边距：0 所以图像拉伸并且没有白色的地方

# python - 命令提示符 Python

> ID：12082918
> 
> 赞同：0
> 
> 时间：2012-08-22T23:46:42.607
> 
> 标签：python, terminal, progress-bar, command-prompt

通过命令提示符/终端与 ide 相比，运行代码有什么好处？

我最近在使用 python 的进度条模块时注意到，进度文本在命令提示符窗口的同一行上更新，而 ide 在下一行打印每个文本。为什么这些不同？他们不是通过同一个解释器运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T00:09:58.417

IDE 在程序和 python 解释器之间增加了一层额外的软件。

您看到的可能是 IDE 的输出窗口不是一个完整的终端仿真器，并且不理解或忽略进度条模块使用的命令。保持输出在同一行。

看看[ipython](http://ipython.org/)。这是一个*非常*好的测试和运行 python 代码的环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:15:52.233

实际上，每个 IDE 都通过命令行进行交互，并将流重定向到显示这些输出的实现中，每个 IDE 都有自己的执行方式，如果您有经验且易于尝试一次性脚本，则命令提示符会更强大，试试 ipython 哪个非常适合初学者和学习者快速访问编程环境和试用模块。

# cocoa - Lion 和 Mountain Lion 中 NSProgressIndicator 和 NSOpenPanel 的奇怪行为和内存泄漏

> ID：12082919
> 
> 赞同：1
> 
> 时间：2012-08-22T23:46:58.723
> 
> 标签：cocoa, memory-leaks, osx-lion, osx-mountain-lion, nsprogressindicator

所以我知道这可能很难回答，但我在 Mountain 和 Lion 上遇到了一些奇怪的行为，我希望这可能会给一些 Cocoa 大师敲响警钟。

在我们的应用程序中，我们有一个文件选择对话框，它是一个 NSOpenPanel，在用户选择适当的文件后，会弹出一个 NSProgressIndicator，并在用户项目加载时使用对 incrementBy 的调用进行更新，最后会弹出一个 NSWindow，其中包含很多乐趣和有趣的视图（有些是 NSOpenGLViews）。

在 Snow Leopard 上，所有这些都顺利进行：文件选择器打开，用户选择文件，文件选择器关闭，然后进度表弹出迭代然后项目窗口弹出。这是我所期待的。

当我在 Lion 上测试它时，它有一个细微的变化：文件选择器打开，用户选择一个文件，文件选择器没有关闭，进度表要么不弹出，要么只弹出一小会儿，项目窗口弹出，最后文件选择器消失了。这似乎很奇怪，因为它是一个模态对话框，所以文件选择器会逗留。

当我最终在 Mountain Lion 上对此进行测试时，它的行为与 Lion 相同，除了时不时进度表会弹出并停止其中一个更新，并且应用程序的内存将失控并且非常迅速地增长，直到应用程序正在使用向上 3GB 并且应用程序崩溃。

我想知道是否有人知道 Lion/Mountain Lion 的任何变化可以解释这种奇怪的行为。

# jqgrid - 根据网格另一列中的id值获取Jqgrid一列中的图像

> ID：12082927
> 
> 赞同：0
> 
> 时间：2012-08-22T23:47:47.020
> 
> 标签：jqgrid, get, rowid, identify

我有一个有 4 列的 JQGrid，如下所示

```
<script type="text/javascript">
        $(function(){
            jQuery("#toolbar").jqGrid({
                url:'<%=request.getContextPath()%>/TestServlet?q=1&action=fetchData',
                datatype: "xml",
                mtype: 'POST',
                height: '100%',
                width: '100%',
                colNames:['LocationImage','City','State','LocationID'],
                colModel:[
                    {name:'LocationImage',index:'LocationImage',align: 'center', formatter: imageFormatter},
                    {name:'City',index:'City', width:200,fixed:true,sortable:true,align:'center',editable:true, editoptions:{readonly:false,size:500}},
                    {name:'State',index:'State', width:200,fixed:true,sortable:true,align:'center',editable:true, editoptions:{readonly:false,size:50}},
                    {name:'LocationID',index:'LocationID',width:60,align:'center',hidden:true,editable:false, editoptions:{readonly:true,size:30}
                ],
                paging: true,
                rowNum:16,
                rowTotal:2000,
                rownumbers: true,
                rownumWidth: 25,
                rowList:[16,32,48],
                viewrecords: true,
                loadonce: true,
                gridview: true,
                pager: $("#ptoolbar"),
                sortname: 'Name',
                sortorder: "asc",
                caption: "Test Grid"
            })
            jQuery("#toolbar").jqGrid('navGrid','#ptoolbar',{del:false,add:false,edit:false});
            jQuery("#toolbar").jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});
        });
        function imageFormatter(el, cval, opts) {
    var num = '2';
            return ("<center><img src='../gd/images/" + num+".png' height='180px' width='180px' /></center>")
        } 
```

在这里，我将 num 硬编码为“2”，因此在第一列（即 LocationImage）中显示 2.png，我需要的是 num 的值应该来自第 4 列，即 LocationID（注意它是一个隐藏列）。

请让我知道如何做到这一点。

谢谢，迪普纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:04:37.247

好吧，我不确定，我现在无法测试。但这是你可以做的

从选项参数中，您可以获取行 ID，检查[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)，然后您可以使用 getCell 或 getGridParam 获取具有该行 ID 的位置 ID。您可以使用此值来设置图像。

如果这对自定义格式化程序不起作用，您可以在 JqGrid 的 gridComplete 属性中使用 setCol 方法。

现在这仅适用于一个 id。如果要为所有行设置图像，请在变量中使用 getDataIDs 方法获取行 ID，然后使用 for 循环并使用 setCol。

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T00:41:36.873

你应该改变你的`imageFormatter`功能是这样的：

```
function imageFormatter(cellvalue, options, rowObject){     
  var num = $("#" + options.rowId).find("td[aria-describedby='toolbar_LocationID']").text();                
  return "<center><img src='../gd/images/" + num + ".png' height='180px' width='180px' /></center>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:55:43.973

我能够通过以下方式解决问题

1.  将网格中的第一列更改为位置 ID
2.  现在在格式化程序中 - 当我说“cellvalue”时，它实际上返回了位置 ID
3.  然后将此位置 id 设置到变量 num 中（即 num = cellvalue）
4.  现在格式化程序代码将 id 值替换为基于 id.png 的图像

谢谢，迪普纳

# c++ - 讨论为什么没有内联虚函数

> ID：12082930
> 
> 赞同：4
> 
> 时间：2012-08-22T23:48:09.377
> 
> 标签：c++, inline, virtual-functions

嗨，我和朋友讨论过为什么没有内联虚函数。

我的回答是内联函数在编译时，虚函数在动态时绑定。在编译时，无法知道哪个函数会调用虚函数。所以内联虚函数不是一个好主意。

然而，他说，这是不正确的。

他的回答是内联函数没有地址，所以在虚表中，没办法放内联函数的地址，所以没有内联虚函数。

我想知道三点：

1.  我的答案是否正确？我觉得我的回答是对的。
2.  内联函数没有地址吗？我认为它有地址；
3.  连内联函数都有地址，他的回答比我的好？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T23:52:27.800

我不喜欢任何一个答案。

`inline`函数是可以多次定义的函数（但定义必须匹配）。这就是为什么它们可以放在头文件中的原因。他们有一个地址，就像任何其他功能一样。

`virtual`函数是可以被派生类覆盖的函数。

您可以拥有一个可以被派生类覆盖并且可以轻松拥有多个定义的函数：

```
struct foo {
    virtual void f();
}

inline void foo::f() {} 
```

也就是说，任何函数都可以内联，即在调用点插入其代码，而不是实际调用它。这并不妨碍以任何方式获取其地址。如果编译器可以静态解析它们，即使没有标记的虚函数`inline`也可以内联。

# java - C++ 中的“派生”与 Java 中的“扩展”是一样的吗？

> ID：12082931
> 
> 赞同：0
> 
> 时间：2012-08-22T23:48:09.580
> 
> 标签：java, c++, inheritance, terminology

正如标题所述：当我在 CPP 中“派生”一个类时，这与在 Java 中“扩展”一个类几乎相同，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:49:44.713

是的，它们的意思是一样的。尽管“派生”在 C++ 中不像`extends`在 Java 中那样是关键字，尽管 C++ 标准使用“派生”一词来表示子类的概念。C++ 中的继承使用`:`符号以及可选的访问限定符（如`public`or ）来表示`private`。

C++ 继承也比 Java 继承稍微复杂一些，因为它支持多重继承，因此虚拟继承也是一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:52:26.007

是的。由于 Java 没有多重继承，因此该语言可能会更加冗长。Java`class D extends B` 是`class D : public B`在 C++ 中的，但在 C++ 中，您也可以拥有像`struct D : B1, private B2, protected B3`.

同样，在 Java`super`中指的是（唯一的）基础子对象，可以理解的是，在 C++ 中没有可比的概念（您必须按名称指定基础）。

（请注意，`implements`Java 中也有专用*接口*类。由于它们没有成员，只有抽象函数，因此无需从派生（即“实现”）类中引用这些接口基类。）

# php - PDO 不插入值

> ID：12082932
> 
> 赞同：0
> 
> 时间：2012-08-22T23:48:12.487
> 
> 标签：php, mysql

在下面的代码中，`sessionId`我的数据库中没有更新：

```
$stmt = $dbh->prepare("UPDATE user SET attempts = 0, sessionId = :sid WHERE userName = :postUser");
$stmt->bindParam(':postUser', $postUser);
$stmt->bindParam(':sessionId', $sid);
$stmt->execute(); 
```

我没有收到任何错误。我不太擅长 SQL，所以我不确定这是否是有效的语法。

`attempts`应有的更新。为什么不`sessionId`更新了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T23:50:35.447

您准备好的语句使用`:sid`，但您正在绑定一个名为 的参数`:sessionId`。

使用 PDO 时，我通常会将错误转化为异常：

```
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

...它可以帮助我捕捉语法错误等。

# objective-c - 将 Core-Plot 导出为 CSV / Excel - iOS

> ID：12082933
> 
> 赞同：1
> 
> 时间：2012-08-22T23:48:16.243
> 
> 标签：objective-c, ios, csv, core-plot

我被要求扩展我已构建的应用程序以包含导出使用 Core-Plot 创建的图形的功能，以便在 Excel 中使用。

目前有没有办法做到这一点？或者是将图形数据导出为 CSV 文件的“唯一”方法，然后用户将其转换为图形？

我目前的想法是让用户使用内置邮件 API 中的 iPad/iPhone 通过电子邮件发送 CSV 文件。

干杯。

# c# - 自定义基于默认 SystemExceptions 引发的错误

> ID：12082935
> 
> 赞同：2
> 
> 时间：2012-08-22T23:48:23.093
> 
> 标签：c#, error-handling

我有一条线： `string[] cPathDirectories = Directory.GetDirectories(Properties.Settings.Default.customerFolderDirectory);`

如果用户没有指定搜索路径（此时此设置保存为 String.Empty），这将引发错误“路径不是合法形式”。我想抛出这个错误说，“嘿，你这个白痴，进入应用程序设置并指定一个有效路径”。有没有办法做到这一点，而不是：

```
...catch (SystemException ex)
{
   if(ex.Message == "Path is not of legal form.")
      {
          MessageBox.Show("Hey you idiot, go into the application settings and specify a valid path","Error");
      }
      else
      {
          MessageBox.Show(ex.Message,"Error");
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:58:08.513

不，您需要检查异常的类型并明确捕获。测试异常消息中的字符串不是一个好主意，因为它们可能会从一个版本的框架更改为另一个版本。我很确定微软不保证消息永远不会改变。

在这种情况下，查看[文档](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)可能会得到 a`ArgumentNullException`或`ArgumentException`，因此您需要在 try/catch 块中进行测试：

```
try {
    DoSomething();
}
catch (ArgumentNullException) {
    // Insult the user
}
catch (ArgumentException) {
    // Insult the user more
}
catch (Exception) {
    // Something else
} 
```

你在这里需要哪个例外，我不知道。您需要确定这一点并相应地构建您的 SEH 块。但总是试图捕捉异常，而不是它们的属性。

注意最后一个`catch`是强烈推荐的；它确保如果*发生其他*事情，您不会得到未处理的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:54:56.177

您可能会检查参数异常

```
...catch (SystemException ex)
{
   if(ex is ArgumentException)
      {
          MessageBox.Show("Hey you idiot, go into the application settings and specify a valid path","Error");
      }
      else
      {
          MessageBox.Show(ex.Message,"Error");
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:55:59.297

那是一个`ArgumentException`：

```
catch (ArgumentException) {
    MessageBox.Show("Please enter a path in settings");
} catch (Exception ex) {
    MessageBox.Show("An error occurred.\r\n" + ex.Message);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T23:56:13.483

有几种方法可以解决它。

首先，在拨打电话之前先检查设置`GetDirectories()`：

```
if(string.IsNullOrEmpty(Properties.Settings.Default.customerFolderDirectory))
{
    MessageBox.Show("Fix your settings!");
} 
else 
{
    string[] cPathDirectories = Directory.GetDirectories(Properties.Settings.Default.customerFolderDirectory);
} 
```

或者捕获一个更具体的异常：

```
catch (ArgumentException ex)
{
    MessageBox.Show("Hey you idiot, go into the application settings and specify a valid path","Error");
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

我可能会选择前者，因为那时你不会因为抛出异常而受到惩罚（尽管是轻微的），并且可以进行任何其他你想要的验证，例如检查路径是否存在等。

但是，如果您更喜欢后者，您可以在[此处](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)`Directory.GetDirectories()`找到异常列表，以便您可以适当地调整您的消息。

PS我也不会称你的用户为白痴，但那是你和你的上帝之间的事。:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T23:53:25.627

是的，您可以再次从 catch 块中抛出异常，例如：

```
catch (SystemException ex)
{
      if(ex.Message == "Path is not of legal form.")
      {
          throw new Exception("Hey you idiot, go into the application settings and specify a valid path", ex);
      }
      else
      {
          MessageBox.Show(ex.Message,"Error");
      }
} 
```

# jquery - 如何将单个项目附加到 jQuery UI 自动完成结果集下拉列表？

> ID：12082937
> 
> 赞同：1
> 
> 时间：2012-08-22T23:48:40.113
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

有没有办法将**一个**项目附加到自动完成下拉列表的末尾，该下拉列表将包含 1-5 个项目？我使用过`open`，但是因为我在加载时在下拉列表中附加了一个微调器，所以它不能很好地工作。

jQuery：

```
$("#search").autocomplete({
  source: function(request, response) {
    response([{loading: true}]);
    return $.ajax({
      url: "/search",
      timeout: 10000,
      dataType: "json",
      data: {
        query: request.term
      },
      success: function(data) {
        var results;
        results = [];
        results = $.map(data, function(result) {
          return {
            label: result.name,
          };
        });
        return response(results);
      }
    });
  }
  //open doesn't work because I have a spinning effect that opens a dropdown
  //when the search is loading.
  //open: function() {
  //  alert('test');
  //}
})
.data( "autocomplete" )._renderItem = function( ul, item ) {
  if(item.loading) {
    return $( "<li id='spinner'></li>" )
      .appendTo( ul );
  }
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T00:37:40.720

`push`在将其发送到`response`回调之前，您应该能够将任何您想要的项目放到结果列表中：

```
$("#search").autocomplete({
    source: function(request, response) {
        response([{loading: true}]);
        $.ajax({
            url: "/search",
            timeout: 10000,
            dataType: "json",
            data: {
                query: request.term
            },
            success: function(data) {
                var results = $.map(data, function(result) {
                    return {
                        label: result.name,
                    };
                });

                results.push({ label: "My Custom Item" });
                response(results);
            }
        });
    }
}); 
```

**示例：http:** [//jsfiddle.net/m3MGH/1/](http://jsfiddle.net/m3MGH/1/)

# javascript - Backbonejs：模型呈现在视图中，但集合中不存在

> ID：12082939
> 
> 赞同：0
> 
> 时间：2012-08-22T23:48:58.613
> 
> 标签：javascript, backbone.js

我只是不知道是什么导致了问题并需要帮助。在发布之前，我已经提出了替代解决方案，但我想了解为什么它不能正常工作。

我有初始化视图的路由器，它初始化实体集合和视图，如下所示：

```
advertiser_manage_campaign: function () {
    this.campaignListView = new window.CampaignListView;
    this.mainSidebar = new window.MainSidebar;
}, 
```

活动列表视图：

```
window.CampaignListView = Backbone.View.extend({

    el: ("#right_column"),

    initialize: function () {   
        this.render();

        this.campaignCollection = new Campaign.CampaignCollection;
        this.campaignCollectionView = new Campaign.CampaignCollectionView({ model: this.campaignCollection });
        this.campaignCollection.fetch();
    },

    events: {
        "click .campaign_dialog": "openCampaignDialog"
    },

    openCampaignDialog: function (e) {        
        var that = this;
        var itemID = $(e.target).attr("item-id");
        var model = {}; //model to populate dialog inputs
        if (!isNaN(itemID))
            model = this.campaignCollection.get(itemID).toJSON(); //get existing model from collection <- after described procedure, error

        Campaign.Dialog.open(model, function (data) {
            if (isNaN(itemID)) {//model does not exist, create
            that.campaignCollection.create(data, { wait: true,
                    error: function (model, error) {
                        dialoger.showErrors(JSON.parse(error.responseText).errors);
                    },
                    success: function (mdl, response) { window.Campaign.Dialog.close(); }
                });               

            } else {//model exist, update
                model = that.campaignCollection.get(itemID);
                model.save(data, { wait: true,
                    error: function (mdl, error) {
                        dialoger.showErrors(JSON.parse(error.responseText).errors);
                    },
                    success: function (mdl, response) { window.Campaign.Dialog.close(); }
                });
            }
        });
        return false;
    },

    render: function () { 
        $(this.el).html(window.Templates.getHTML("campaign_list_view", {}));
        $(".button", $(this.el)).button();
    }
}); 
```

-

```
openCampaignDialog 
```

适用于编辑模型和创建新模型。模型的每个视图（表格行）都有类“.campaign_dialog”的按钮，并且有用于添加具有相同类的新模型的按钮。

```
Campaign.Dialog.open 
```

显示填充有模型的对话框，并在回调中从对话框表单返回 JSON。

如果我通过对话框创建新模型，我可以立即对其进行编辑，但是当我创建新模型时，更改视图，返回此视图，再次创建新模型，更改视图然后再次返回，单击最后添加的项目上的编辑，我在注释行上出现错误，因为具有此 ID 的模型不在集合中，尽管它在集合中。服务器响应正常。显然，我做错了什么，一天后，我看不出它是什么。

我想出的替代解决方案是从模型视图的事件中创建和填充对话框（这可行），但我认为 CampaingCollectionView 或 CampaingView 不应该处理添加或编辑模型，所以我在“更高”视图中实现了这个.

谢谢大家帮助我...

编辑：

```
var CampaignCollectionView = Backbone.View.extend({

    el: (".content_table tbody"),

    initialize: function () {
        this.model.bind("reset", this.render, this);
        this.model.bind("add", this.add, this);
    },

    render: function () {
        $(this.el).empty();
        _.each(this.model.models, function (campaign) {
            $(this.el).append(new CampaignView({ model: campaign }).render().el);
        }, this);
        return this;
    },

    add: function (model) {
        window.Appender.AppendAndScroll($(new CampaignView({ model: model }).render().el), this.el);
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:21:34.180

我找到了解决方案。

> 但是，当我们通过这些事件将对象绑定在一起但我们不费心解绑它们时，就会出现问题。只要这些对象绑定在一起，并且在我们的应用程序代码中至少有一个引用，它们就不会被清理或垃圾收集。由此产生的内存泄漏就像电影中的僵尸——躲在黑暗的角落里，等着跳出来吃我们的午餐。

资料来源： http: [//lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

作者建议解除绑定机制，但如果存在，我将重用相同的对象。

路由器：

```
advertiser_manage_campaign: function () {
    if (!this.campaignListView)
        this.campaignListView = new window.CampaignListView;
    else
        this.campaignListView.initialize();

    this.mainSidebar = new window.MainSidebar;
}, 
```

如果有人认为这不是最佳解决方案，我想听听为什么。

感谢所有试图提供帮助的人！

# android - 检查android应用程序内存文件

> ID：12082940
> 
> 赞同：0
> 
> 时间：2012-08-22T23:48:58.567
> 
> 标签：android, memory, storage

我正在开发一个 android 应用程序，该应用程序将数据保存到内存中。无论如何我可以查看通过我的电脑保存的文件吗？这对调试有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:53:40.387

如果您通过 USB 连接将设备连接到 PC，您可以像浏览普通文件夹一样浏览文件。您的应用程序文件将在 /data 文件夹中找到。

# grails-orm - 在 grails 2 中使用多个数据源时，我可以指定条件应该使用哪个数据源吗？

> ID：12082944
> 
> 赞同：2
> 
> 时间：2012-08-22T23:49:41.390
> 
> 标签：grails-orm, criteria, grails-2.0

在我的 grails 2 应用程序中，我在 Datasources.groovy 中配置了多个数据源。我的域类映射指定应使用所有数据源

```
class Book {
    static mapping = { datasource 'ALL' } 
```

对于基本的 Gorm 调用，我可以指定要使用的数据源。

`Book.lookup.save()` 正确使用“查找”数据源

**有没有办法指定条件应该使用哪个数据源？**

我已经尝试了以下 4 个解决方案，但没有任何运气

1.  `def c = Book.lookup.createCriteria(); c.list{...`

    对 .list 的调用抛出：java.sql.SQLException: Connection is closed

2.  `def c = Book.createCriteria(); c.lookup.list{...`
    没有这种方法

3.  注入数据源

    `def dataSource_lookup`

    ...

    `Book.createCriteria(dataSource_lookup)`
    没有这种方法

4.  指定标准所在的整个服务应该使用特定的数据源似乎不适用于标准，也不适用于基本的 save() 调用。我正在运行 grails 2.1.0。

    `static datasource = 'lookup'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:46:13.963

不是一个很好的解决方案，但是如果您事先访问数据源（大概在同一个休眠会话中），它确实有效。

```
Book.lookup.read(1)
def c = Book.lookup.createCriteria()
c.list{... 
```

# selenium - selenium webdriver：org.openqa.selenium.ElementNotVisibleException：元素当前不可见，因此可能无法与之交互

> ID：12082946
> 
> 赞同：8
> 
> 时间：2012-08-22T23:49:45.013
> 
> 标签：selenium, webdriver

我正在尝试使用文本克隆概念单击跨度。以下是html

```
<ul class="context-menu-list context-menu-root" style="width: 210px; top: 500px; left: 231px; z-index: 2;">
    <li class="context-menu-item">
    <li class="context-menu-item">
    <li class="context-menu-item disabled">
    <li class="context-menu-item">
    <li class="context-menu-item icon icon-evn-icon-clone-concept">
        <span>Clone concept</span>
    </li>
    <li class="context-menu-item">
    <li class="context-menu-item icon icon-delete disabled">
</ul> 
```

我使用的javascript代码是：

```
driver.findElement(By.xpath("//span[text()='Clone concept']")).click(); 
```

我通过火路验证了这对元素是正确的。

我还确保根据链接[如何强制 Selenium WebDriver 单击当前不可见的元素，该元素是可见的？](https://stackoverflow.com/questions/6101461/selenium-2-0-element-is-not-currently-visible)

这是**计算出来的css**

```
font-family Verdana,?Arial,?Helvetica,?sans-serif
    .context-menu-list  Verdana,?Arial,?Helvetica,?sans-serif   
    jquery...enu.css (line 15)
    body    Arial,?Helvetica,?sans-serif    
    swa.css (line 3)
    font-size   11px
    .context-menu-list  11px    
    jquery...enu.css (line 15)
    list-style-type none
    .context-menu-list  none    
    jquery...enu.css (line 15) 
```

还尝试了以下代码：

```
WebElement foo = driver.findElement(By.xpath("//span[text()='Clone concept']"));
Actions bar = new Actions(driver);
bar.click(foo).perform(); 
```

**异常：** org.openqa.selenium.ElementNotVisibleException：元素当前不可见，因此可能无法与命令持续时间或超时：30.04 秒构建信息：版本：'2.24.1'，修订：'17205'，时间：'2012 -06-19 16:53:24' 系统信息：os.name：'Windows 7'，os.arch：'amd64'，os.version：'6.1'，java.version：'1.7.0' 驱动程序信息： driver.version: RemoteWebDriver

任何帮助将不胜感激。

对于那些被困在这里的人的另一个技巧：
目前我已经能够通过将这个巨大的测试用例拆分成更简单的测试用例来继续前进。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T05:02:37.510

不幸的是，Webdriver 似乎并不擅长处理您的问题中描述的情况。不过，您有几个选择。使用 Javascript 模拟点击：

```
JavascriptLibrary jsLib = new JavascriptLibrary(); 
jsLib.callEmbeddedSelenium(selenium,"triggerMouseEventAt", elementToClick,"click", "0,0"); 
```

或者

```
((JavascriptExecutor) driver).executeScript("arguments[0].click();", elementToClick); 
```

或者您可以尝试使用操作来单击菜单链中的所有元素。不幸的是，我发现这是不可靠的。

我有一个脚本，它检测一个元素是否在菜单链中，如果它以所需的顺序点击它们，最终点击用户想要的，如果你想要它我可以把它贴在某个地方，但它不漂亮或短的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T06:58:34.887

对于上面的查询，这里是 xpath：

```
//ui[@class='context-menu-list context-menu-root']/span[contains(text(),'Clone concept')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T18:57:08.653

问题出在您的 xpath 中。selenium webdriver 正在通过屏幕中的 xpath 找到一个重复的元素，该元素被隐藏并试图对其执行操作。请更改 xpath，它将起作用。我在我的代码中做了同样的事情..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-31T10:15:11.847

基本上，元素不可交互的原因有四个。没有四个通常是解决方案。

1) 时间 - 元素加载所需的时间。为此，您需要检查如何使用隐式显式等待

2）检查元素是否在框架中

3) 定位器不正确

4) 响应性的错误实现。这仍然源于3）。有些网站只为移动版和网页版启用了一个代码。因此，当您检查 xxxxx.size 时，该元素将具有多个实例。您必须在列表中搜索显示！= 无的列表。然后，您可以将元素的位置附加到您的 xpath 或您正在使用的任何定位器。例如`xxxx/yyyyy/zzzz[3]`，如果位置是列表中的 4。

将此代码用于java，
假设
a）定位器类型是id
b）列表名称是nameOfYourElements

```
List<WebElement> nameOfYourElements = wd.findElements(By.id("nameOfYourID"));
System.out.println(nameOfYourElements.size()); 
```

# css - 调整内容属性的图像大小

> ID：12082948
> 
> 赞同：31
> 
> 时间：2012-08-22T23:49:57.623
> 
> 标签：css

我有一个无序列表的链接，每个链接都有一个唯一的 ID。
我使用该 id 和`:before`选择器将
关联网站的图标放在链接之前（使用 content 属性）。
其中一个图标的大小是其他图标的两倍。
有没有办法使用 CSS 来改变这个图标的大小？
如果答案是否定的，除了编辑图像之外还有其他方法吗？

视觉参考：

![在此处输入图像描述](../Images/c8995735d364c5c01082385dd4df809e.png)

这是我尝试过的（它似乎不起作用）：

```
#geog:before
{
    content: url("icons/geogebra.ico") " ";
    height: 50%;
    width: 50%;
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-04T22:38:47.210

我以前遇到过同样的问题。试试这个：

```
#geog:before
{
    display: inline-block;
    width: 16px;
    height: 16px;
    margin-right: 5px;
    content: "";
    background: url("icons/geogebra.ico") no-repeat 0 0;
    background-size: 100%;
} 
```

我相信你必须调整这些值，但这对我有用。当然，如果由于某种原因不能将其设置为背景图像，这将不起作用。祝你好运！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-05T15:26:42.100

我相信您正在寻找该`zoom`物业。检查[这个jsfiddle](https://jsfiddle.net/70wm1n8u/)

您还可以`margin-right`在图标和元素内容之间添加间距。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-22T23:57:44.307

使用 PX 而不是 %

```
#geog:before
{
content: url("icons/geogebra.ico") " ";
height: 5px;
width: 5px;
} 
```

试试看:-)

# objective-c - 带模态视图的横向模式

> ID：12082951
> 
> 赞同：1
> 
> 时间：2012-08-22T23:50:15.043
> 
> 标签：objective-c, xcode, osx-mountain-lion, ios5.1

我正在尝试向我的 ipad 应用程序添加模式视图。所有视图都应该处于横向模式。对于样式，我选择了表单或页面表。

这是问题所在。当我使用以下代码将模态视图添加到我的视图时：

```
TempController *tmpViewController = [[TempController alloc] initWithNibName:@"TempView" bundle:nil];
tmpViewController.modalPresentationStyle = UIModalPresentationPageSheet;
[self presentModalViewController:tmpViewController animated:YES]; 
```

我的模态视图以横向模式显示，但它下面的视图以纵向显示。在模态被解雇后，视图仍然处于肖像中。如果我不将模式附加到视图，则视图会以横向模式正常显示。

我玩了 statusBarOrientation 和 shouldAutootateToInterfaceOrientation，但仍然没有运气。我在 Mountain Lion 上运行 xcode 4.4.1

更新：这是我的 shouldAutorotateToInterfaceOrientation：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {
    return YES;
}
return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:09:03.603

快速说明：`presentModalViewController:animated:`已弃用。苹果推荐使用`presentViewController:animated:completion:`.

为了确保我理解这个问题，呈现模态视图控制器的视图控制器在横向模式下正确显示，但是一旦它呈现模态，它就会自行更改为纵向模式，即使模态视图控制器也在横向模式下正确显示? 这是否发生在 iPhone/iPod touch 或 iPad 上？*对于呈现*视图控制器的`shouldAutoRotateToInterfaceOrientation`方法，您的代码是什么样的？

# android - 在滚动视图中包含一个新的图像视图导致错误

> ID：12082952
> 
> 赞同：0
> 
> 时间：2012-08-22T23:50:17.537
> 
> 标签：android, android-layout

我有这样的滚动视图。里面有一个带有 id="@+id/but_logo_view1 的图像视图。我想在其右侧添加另一个图像视图。我尝试了几种方法。但是出现强制关闭错误。我怎样才能达到预期的结果。请帮忙

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/lineartop"
    android:layout_marginBottom="50dip"
    android:paddingLeft="10dip"
    android:paddingRight="10dip" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    android:gravity="center|center_horizontal"
    android:orientation="vertical" >
 <ImageView
            android:id="@+id/but_logo_view1"
            android:layout_width="60dip"
            android:visibility="visible"
             android:layout_height="60dip"
            android:scaleType="fitXY"
            android:src="@drawable/camera" />

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="10dip"
        android:gravity="center" >

          <TextView
              android:id="@+id/textView2"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:text="User Name"
              android:textColor="#000000"
              android:textSize="18dip" />

        <EditText
            android:id="@+id/edit_signup_user"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:maxLength="10"
            android:textSize="18dip"
            android:padding="3dip"
            android:hint="Name"
            android:singleLine="true"
           android:textColor="@color/black" android:gravity="center"/>

    </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="10dip"
            android:gravity="center" >

          <TextView
              android:id="@+id/textView2"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:text="Email"
              android:textColor="#000000"
              android:textSize="18dip" />

        <EditText
            android:id="@+id/edit_signup_email"
            android:layout_width="150dip"
            android:layout_height="fill_parent"
            android:hint="optional"
            android:padding="3dip"
            android:singleLine="true"
            android:textSize="18dip"
             android:textColor="@color/black"
            android:textColorHint="#858585" android:gravity="center"/>

    </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="20dip"
            android:gravity="center" >

          <TextView
              android:id="@+id/textView2"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:text="Password"
              android:textColor="#000000"
              android:textSize="18dip" />

        <EditText
            android:id="@+id/edit_signup_passwd"
            android:textSize="18dip"
          android:singleLine="true"
        android:inputType="number" android:maxLength="4"

             android:layout_width="fill_parent"
            android:layout_height="40dip"
           android:textColor="@color/black"

            android:padding="3dip"
           />

    </TableRow>

             <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="20dip"
            android:gravity="center" >

          <TextView
              android:id="@+id/textView2"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:text="Retype Password"
              android:textColor="#000000"
              android:textSize="18dip" />

        <EditText
            android:id="@+id/edit_signup_repasswd"
            android:textSize="18dip"
          android:singleLine="true"
        android:inputType="number" android:maxLength="4"

             android:layout_width="fill_parent"
            android:layout_height="40dip"
           android:textColor="@color/black"

            android:padding="3dip"
           />

    </TableRow>

    </TableLayout>
       <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

        android:gravity="center" >

           <Button
               android:id="@+id/but_signup_twitter"
               android:layout_width="70dip"
               android:layout_height="70dip"
               android:background="@drawable/twitter_icon"
               android:visibility="invisible" />

        <Button
            android:id="@+id/but_signup_login"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/sign_in_unlit" android:typeface="serif" android:layout_marginLeft="20dip" android:layout_marginRight="20dip"/>

<Button
    android:id="@+id/but_signup_fb"
    android:layout_width="70dip"
    android:layout_height="70dip"
    android:background="@drawable/facebook_icon" />

            </TableRow>

<TableRow
    android:id="@+id/tableRow3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dip"
    android:gravity="center|right" >

       </TableRow>
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:15:47.803

可能会发生错误，因为它是 LinearLayout，您可以尝试改用并设置 imageview，如下所示：

```
 <ImageView
        android:id="@+id/image2"
    android:layout_alignLeft="@+id/but_logo_view1"
        android:layout_width="60dip"
        android:visibility="visible"
        android:layout_height="60dip"
        android:scaleType="fitXY"/> 
```

然后，您可以根据您希望图像的距离调整填充或 x 轴。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T18:29:51.300

不确定之前的发帖人是否在回复中漏掉了一个字，但要使用“layout_alignLeft”，您需要使用 RelativeLayout 而不是 LinearLayout

# php - 合并多个 API 的最佳实践

> ID：12082954
> 
> 赞同：0
> 
> 时间：2012-08-22T23:50:40.323
> 
> 标签：php, mysql, search-engine

所有经验丰富的程序员。我需要以下建议。

以下问题的最佳实践是什么

我们有 2-3 个对象（公寓）的 api（XML、JSON、SOAP、协议现在无关紧要）

他们每个人都有几个关键点

a) 地理 - 每个 api 都有自己的地理数据库，具有自己的名称和 ID，用于相同的城市和地点

b) 每个 api 都有不同的对象属性描述方式......比如房子有什么（游泳池、轮椅友好等）

所以我们需要的是导入这些数据，在本地合并它们并搜索....

在架构上解决此类问题的正确方法是什么……

一个非常接近的例子是酒店搜索引擎，他们在其中搜索来自 10-20 个不同系统的数据。...

所以我们需要一个类似的东西，但完全是另一种类型的对象。非常感谢您的笔记、评论和回答。非常感谢您的参与。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:00:25.790

这是一个非常笼统的问题，所以遗憾的是答案也将非常笼统。我会这样处理这个问题：

*   为各种 API 中的每一个创建`wrappers`，这将标准化它们在内部调用的方式，使其更容易与它们交互。

*   将所有结果转换为`uniform format`（如果可能的话），至少是那些将被搜索、排序、操作的字段。

如果您将此信息持久保存到数据库中，那么以易于查询的方式制作结构将很重要。

例如，将定义房屋的整个`JSON`字符串存储到名为 description 的字段中是不可取的。为房屋的每个属性创建字段也是如此，例如`swimming pool (BOOLEAN yes/no)`. 取而代之的是`key-value`像这样的字段`attribute-name`，并且`attribute-value`可能有像这样的记录：

*   游泳池：有
*   卧室数量：三间

等等。你明白了。根据我的经验，您可以拥有一个统一的数据模型，您可以在其中塑造要包含的 API 值，更容易对它们进行整理和比较。

# sql-server - SQL Server 2008 R2 Varbinary 最大大小

> ID：12082961
> 
> 赞同：8
> 
> 时间：2012-08-22T23:51:45.583
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, varbinary, varbinarymax

我可以在 SQL Server 2008 R2 中使用 varbinary(max) 插入的文件的最大大小是多少？我试图将列中的最大值更改为超过 8,000 字节，但它不会让我，所以我猜测最大值是 8,000 字节，但是从[MSDN 上的这篇文章中](http://msdn.microsoft.com/en-us/library/ms188362.aspx)，它说最大存储大小是 2 ^31-1 字节：

> **varbinary** [ ( *n* | **max** ) ]
> 
> 可变长度二进制数据。n 可以是 1 到 8,000 之间的值。**max**表示最大存储大小为 2^31-1 字节。存储大小是输入数据的实际长度 + 2 个字节。输入的数据长度可以是 0 字节。**varbinary**的 ANSI SQL 同义词是**binary varying**。

那么如何将较大的文件存储在 varbinary 字段中？我不考虑使用 FILESTREAM，因为我要保存的文件最大为 200kb 到 1mb，我正在使用的代码：

```
UPDATE [table]
SET file = ( SELECT * FROM OPENROWSET ( BULK 'C:\A directory\A file.ext', SINGLE BLOB)    alias) 
WHERE idRow = 1 
```

我已经能够成功地将该代码执行到小于或等于 8000 字节的文件。如果我尝试使用 8001 字节大小的文件，它将失败。我在表格上的文件字段有一个名为“文件”类型的字段`varbinary(8000)`，正如我所说，我不能更改为更大的值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T00:15:14.377

我无法重现这种情况。我尝试了以下方法：

```
USE tempdb;
GO

CREATE TABLE dbo.blob(col VARBINARY(MAX));

INSERT dbo.blob(col) SELECT NULL;

UPDATE dbo.blob 
  SET col = (SELECT BulkColumn 
    FROM OPENROWSET( BULK 'C:\Folder\File.docx', SINGLE_BLOB) alias
  );

SELECT DATALENGTH(col) FROM dbo.blob; 
```

结果：

```
--------
39578 
```

如果这被限制为 8K，那么我猜想以下任何一项都是正确的：

1.  该列实际上是`VARBINARY(8000)`.

2.  您正在 Management Studio 中选择数据，并分析那里显示的数据的长度。这限制在文本结果中最多 8192 个字符，如果是这种情况，那么`DATALENGTH()`直接对列使用是一种更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:37:50.280

我敢说，根据以下内容对大于 1 MB 的文件使用文件流： [MS TechNet | 文件流概述](http://technet.microsoft.com/en-us/library/bb933993(v=sql.105).aspx)。

> 在 SQL Server 中，BLOB 可以是将`varbinary(max)`数据存储在表中的标准数据，也可以是将数据`FILESTREAM varbinary(max)`存储在文件系统中的对象。数据的大小和用途决定了您应该使用数据库存储还是文件系统存储。如果满足以下条件，则应考虑使用`FILESTREAM`：
> 
> *   正在存储的对象平均大于 1 MB。
> *   快速读取访问很重要。
> *   您正在开发将中间层用于应用程序逻辑的应用程序。
> 
> 对于较小的对象，将`varbinary(max)`BLOB 存储在数据库中通常可以提供更好的流式传输性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-08T05:12:53.840

"SET TEXTSIZE" 指定语句返回的`varchar(max)`、`nvarchar(max)`、`varbinary(max)`、`text`、`ntext`和图像数据的大小。`SELECT`

```
select @@TEXTSIZE 
```

SQL Server Native Client ODBC 驱动程序和用于 SQL Server 的 SQL Server Native Client OLE DB Provider`TEXTSIZE`在连接时自动设置为 2147483647。最大设置为`SET TEXTSIZE`2 GB，以字节为单位。设置为 0 会将大小重置为默认值 (4 KB)。

如前所述，对于大文件，您应该更喜欢文件流。

# java - EclipseLink OneToOne 映射错误

> ID：12082969
> 
> 赞同：1
> 
> 时间：2012-08-22T23:52:49.833
> 
> 标签：java, jpa, persistence, weblogic, eclipselink

我设置了3个班。`ClassA`分别具有`ClassB`和的 FK `ClassC`。我在我的`ClassA`

```
 @Entity
    @Table(name="ClassA")
    public class ClassA{
    //rest of the code

        @OneToOne(fetch=FetchType.LAZY, targetEntity=ClassB.class)
        @JoinColumn(name="ClassB_ColA", columnDefinition="ClassB_ColA", updatable=false, insertable=false)
        private ClassB classB;

        @OneToOne(fetch=FetchType.LAZY, targetEntity=ClassC.class)
        @JoinColumn(name="ClassC_ColA", columnDefinition="ClassC_ColA", updatable=false, insertable=false)
        private ClassC classC;
} 
```

我得到以下异常

```
Exception [EclipseLink-60] (Eclipse Persistence Services - 2.1.1.v20100817-r8050): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The method [_persistence_set_classB_vh] or [_persistence_get_classB_vh] is not defined in the object [project.persistence.entities.ClassA].
Internal Exception: java.lang.NoSuchMethodException: project.persistence.entities.ClassA._persistence_get_classB_vh()
Mapping: org.eclipse.persistence.mappings.OneToOneMapping[classB]
Descriptor: RelationalDescriptor(project.persistence.entities.ClassA --> [DatabaseTable(ClassA)]) 
```

我做了一些搜索，我可以找到一些关于挥动静态加载或其他东西的[旧线程。](http://dev.eclipse.org/mhonarc/lists/eclipselink-users/msg03432.html)有人可以提出解决方案吗？

PS：我正在使用 weblogic 10 和 eclipselink2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:57:38.853

考虑复制粘贴属性名称如何？

```
..
private ClassB classB;
..
private ClassB classB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:02:58.127

该问题与物体的静态波动有关。所以我做了什么，我改变了加载机制。

从`ClassB`，我没有为`ClassA`和加载任何东西`ClassA`，我保持延迟加载..它工作正常。

# php - php - 在数组中添加逗号

> ID：12082970
> 
> 赞同：1
> 
> 时间：2012-08-22T23:52:52.943
> 
> 标签：php

我有以下数组，我试图用下面的代码添加逗号，但我没有得到值，它只显示“数组”..

**数组值**

```
Array (
[0] => Array ( 
   [0] => 144 [category_id] => 144 ) 
   [1] => Array ( [0] => 98 [category_id] => 98 ) 
   [2] => Array ( [0] => 146 [category_id] => 146 ) 
   [3] => Array ( [0] => 142 [category_id] => 142 )
) 
```

**尝试使用逗号显示值的代码**

```
$comma_separated = implode(",", $result_array);
echo $comma_separated; 
```

**我得到的输出**

```
Array,Array,Array,Array 
```

请检查我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:55:20.937

```
$comma_separated = implode(',', array_map(function($i) { return $i[0]; }, $result_array));
echo $comma_separated; 
```

# git - 获取自上次标记以来的所有 git 提交

> ID：12082981
> 
> 赞同：157
> 
> 时间：2012-08-22T23:53:49.550
> 
> 标签：git, version-control

当我要标记提交时，我需要知道自上次标记提交以来发生了什么变化。例如：

```
a87a6sdf87a6d4 Some new feature
a87a6sdf87a6d3 Some bug fix
a87a6sdf87a6d2 Some comments added
a87a6sdf87a6d1 Some merge <- v1.4.0 
```

在这个例子中，我想知道 3 个最新的提交，或者能够像上面那样打印一个日志，显示两个提交的标签（如果有的话）。当我看到添加了一个新功能时，我会标记它 v1.5.0。

你如何处理这个问题？这就是我应该使用标签的方式吗？我应该在标签消息中写什么？我总是把它留空：`git tag -a v1.2.3 -m ''`

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-08-22T23:59:02.373

`git log <yourlasttag>..HEAD`?

如果您希望它们像您的示例中一样，在提交 id + 消息的一行中，然后

`git log <yourlasttag>..HEAD --oneline`

如果你不知道你的最新标签或希望它是动态的，你可以在 Windows 上做

```
for /f "delims=" %a in ('git describe --tags --abbrev^=0') do @set latesttag=%a
git log %latesttag%..HEAD --oneline 
```

并在 linux / git bash / windows bash

```
git log $(git describe --tags --abbrev=0)..HEAD --oneline 
```

此外，如果您知道历史中的某个标签并且想要打印从该标签到当前情况的所有内容，您可能还需要添加`--decorate`它以便打印出介于两者之间的任何标签。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-07-30T09:17:31.397

如果您当前的提交也是一个标签，并且您想动态获取自上一个标签以来的更改，而不知道最新标签或前一个标签名称，您可以这样做：

```
git log --oneline $(git describe --tags --abbrev=0 @^)..@ 
```

请注意，它`@`是`HEAD`.

# objective-c - NSURLConnection 将 JSON 数据发布到 ASP.Net WebAPI 不返回响应

> ID：12082985
> 
> 赞同：1
> 
> 时间：2012-08-22T23:54:12.510
> 
> 标签：objective-c, ios, asp.net-web-api

我目前正在使用异步 NSURLConnection 将 json 数据发布到 ASP.Net WebAPI 资源。正在调用 connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:，并且正在写入正确数量的数据。但是 connection:didReceiveResponse:, connection:didReceiveData: 或 connectionDidFinishLoading: 没有被调用，但最终它放弃了，连接丢失了。

我正在按如下方式设置连接：

```
NSURL *url = [[NSURL URLWithString:[Common baseUrl]] URLByAppendingPathComponent:@"api/iCat/wishlists/upload"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60.f];
NSString *jsonString = [self generateStrippedJsonForWishlist:wishlist];
NSData *requestData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [jsonString lengthOfBytesUsingEncoding:NSUTF8StringEncoding]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:requestData]; 
```

并启动连接：

```
connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

最终，请求将超时并显示“网络连接丢失”错误消息。在我看来，该应用程序似乎从未完全完成编写消息正文。

从 api 方面来看，该方法实际上从未被调用（没有命中断点）。但是，如果我发送没有正文的请求，那么它会发送。

我已经使用 curl 测试了相同的调用，它按预期工作：

```
curl -v -i -X POST -H "Content-Type: application/json" -d '{"CreatedBy":"iPad Simulator","ContactName":"Ddd","ContactEmail":"ddd","Products":[{"ProductId":117,"ProductName":"Internal doors - deco","Specification":""}]}' http://SCMOBILE02:1861/api/iCat/wishlists/upload 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:01:24.587

在发布 json 数据时尝试库[https://github.com/AFNetworking/AFNetworking 。](https://github.com/AFNetworking/AFNetworking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T18:52:20.630

你可以试试下面的代码吗？

```
-(void) post
{
    NSString * a = @"{company_name : \"com\"}";
    NSString * URL = @"yourUrl";

    NSString *post = [NSString stringWithFormat: @"%@",a];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%lu", (unsigned long)[postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:[NSURL URLWithString:URL]];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setTimeoutInterval:20.0];
    [request setHTTPBody:postData];

    [NSURLConnection connectionWithRequest:request delegate:self];

} 
```

在您的 web api 中，您应该具有以下类和 post 方法，如下所示

```
 public class company 
        {
            public string company_name { get; set; }

        }

       // POST api/values
        public void Post([FromBody]company value)
        {
            var t = value;
        } 
```

# php - 如果时间少于 24 小时前，则显示 x 时间前

> ID：12082987
> 
> 赞同：1
> 
> 时间：2012-08-22T23:54:18.560
> 
> 标签：php, codeigniter

我使用 Codeigniter，它具有将时间返回为 .timespan() 的函数`1 Year, 10 Months, 2 Weeks, 5 Days, 10 Hours, 16 Minutes`。

如果时间在过去 24 小时内，我想做的只是显示 x 小时前格式化的时间，否则只显示正常的日期时间。

我觉得必须有一个功能可以做到这一点，但我没有找到它的运气。

这是 Codeigniter 包含的时间跨度函数，我该如何更改它？

```
/**
 * Timespan
 *
 * Returns a span of seconds in this format:
 *  10 days 14 hours 36 minutes 47 seconds
 *
 * @access  public
 * @param   integer a number of seconds
 * @param   integer Unix timestamp
 * @return  integer
 */
if ( ! function_exists('timespan'))
{
    function timespan($seconds = 1, $time = '')
    {
        $CI =& get_instance();
        $CI->lang->load('date');

        if ( ! is_numeric($seconds))
        {
            $seconds = 1;
        }

        if ( ! is_numeric($time))
        {
            $time = time();
        }

        if ($time <= $seconds)
        {
            $seconds = 1;
        }
        else
        {
            $seconds = $time - $seconds;
        }

        $str = '';
        $years = floor($seconds / 31536000);

        if ($years > 0)
        {
            $str .= $years.' '.$CI->lang->line((($years > 1) ? 'date_years' : 'date_year')).', ';
        }

        $seconds -= $years * 31536000;
        $months = floor($seconds / 2628000);

        if ($years > 0 OR $months > 0)
        {
            if ($months > 0)
            {
                $str .= $months.' '.$CI->lang->line((($months   > 1) ? 'date_months' : 'date_month')).', ';
            }

            $seconds -= $months * 2628000;
        }

        $weeks = floor($seconds / 604800);

        if ($years > 0 OR $months > 0 OR $weeks > 0)
        {
            if ($weeks > 0)
            {
                $str .= $weeks.' '.$CI->lang->line((($weeks > 1) ? 'date_weeks' : 'date_week')).', ';
            }

            $seconds -= $weeks * 604800;
        }

        $days = floor($seconds / 86400);

        if ($months > 0 OR $weeks > 0 OR $days > 0)
        {
            if ($days > 0)
            {
                $str .= $days.' '.$CI->lang->line((($days   > 1) ? 'date_days' : 'date_day')).', ';
            }

            $seconds -= $days * 86400;
        }

        $hours = floor($seconds / 3600);

        if ($days > 0 OR $hours > 0)
        {
            if ($hours > 0)
            {
                $str .= $hours.' '.$CI->lang->line((($hours > 1) ? 'date_hours' : 'date_hour')).', ';
            }

            $seconds -= $hours * 3600;
        }

        $minutes = floor($seconds / 60);

        if ($days > 0 OR $hours > 0 OR $minutes > 0)
        {
            if ($minutes > 0)
            {
                $str .= $minutes.' '.$CI->lang->line((($minutes > 1) ? 'date_minutes' : 'date_minute')).', ';
            }

            $seconds -= $minutes * 60;
        }

        if ($str == '')
        {
            $str .= $seconds.' '.$CI->lang->line((($seconds > 1) ? 'date_seconds' : 'date_second')).', ';
        }

        return substr(trim($str), 0, -1);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T00:21:04.803

此函数将接受字符串、数字（unix）时间戳或`DateTime`对象。它也接受`jQuery.now()`. 时间可能在未来或过去。

```
function time_ago($time=false, $just_now=false) {
    if ($time instanceOf DateTime)
        $time = $time->getTimestamp();
    elseif (is_numeric($time))
        $time = date('m/d/y h:i A', $time);
    if (strtotime($time) === false)
        $time = date('m/d/y h:i A', time());
    $interval =  date_create($time)->diff(date_create('now'));
    $adjective = strtotime($time) > time() ? 'from now' : 'ago';
    return (
        $interval->days > 0 ? 
            $time : (
                $interval->h < 1  && $interval->i < 1 && $just_now ? 
                    'just now' : 
                    (
                        $interval->h > 1 ? 
                            $interval->h.' hour'.(
                                $interval->h > 1 ? 
                                    's' : 
                                    ''
                            ).' ago' : 
                            $interval->i.' minutes'.' '.$adjective
                    )
            )
    );
}

echo time_ago('8/22/2012 5:00 PM'); // 3 hours ago
echo time_ago('8/21/2012 5:00 PM'); // 8/21/2012 5:00 PM
echo time_ago(time()); // 0 hours ago
echo time_ago(time(), true); // just now
echo time_ago(strtotime('5 days ago')); // 08/17/12 08:18 PM
echo time_ago(strtotime('5 hours ago')); // 5 hours ago
echo time_ago(strtotime('5 minutes ago')); // 5 minutes ago
echo time_ago(strtotime('+5 minutes')); // 5 minutes from now

echo time_ago('jQuery.now()', true); // just now
echo time_ago('sweet explosions, bro!', true); // just now 
```

**文档**

*   `date`- [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)
*   `DateTime`对象 - [http://www.php.net/manual/en/book.datetime.php](http://www.php.net/manual/en/book.datetime.php)
*   `DateInterval`对象 - [http://www.php.net/manual/en/class.dateinterval.php](http://www.php.net/manual/en/class.dateinterval.php)
*   `is_numeric`- [http://php.net/manual/en/function.is-numeric.php](http://php.net/manual/en/function.is-numeric.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T00:01:54.477

```
if( time() - $yourTime <= 86400 ) {  // 86400 seconds in a day
    echo timespan($yourTime);
} else { 
   echo date('m/d/Y \a\t H:i:s', $yourTime);
} 
```

不要依赖任何框架，尤其是糟糕的框架！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T00:25:58.110

摆弄 $format 以满足您的需求。将接受几乎任何东西作为输入。

```
<?php

/**
 * RelativeTime - pretty printed
 * @author Dejan Marjanovic
 */
class Site5_RelativeTime
{

    private $interval = '';

    public function __construct()
    {
        call_user_func_array(array($this, 'calculate'), func_get_args());
    }

    public function calculate($start, $end = NULL)
    {

        if ( empty($start))
            return false;

        if (empty($end))
            $end = time();

        if ( ! is_numeric($start))
            $start = strtotime($start);

        if ( ! is_numeric($end))
            $end = strtotime($end);        

        if($start > $end)
            $future = TRUE;

        $start = '@' . $start;
        $end = '@' . $end;

        if ( ! ($start instanceof DateTime))
            $start = new DateTime($start);

        if ($end === null)
            $end = new DateTime();

        if ( ! ($end instanceof DateTime))
            $end = new DateTime($end);

        $interval = $end->diff($start);

        $get_plural = function($int, $str)
        {
            return $int > 1? $str.'s': $str;
        };

        $format = array();

        if ($interval->y !== 0)
            $format[] = "%y " . $get_plural($interval->y, "year");
        if ($interval->m !== 0)
            $format[] = "%m " . $get_plural($interval->m, "month");
        if ($interval->d !== 0)
            $format[] = "%d " . $get_plural($interval->d, "day");
        if ($interval->h !== 0)
            $format[] = "%h " . $get_plural($interval->h, "hour");
        if ($interval->i !== 0)
            $format[] = "%i " . $get_plural($interval->i, "minute");

        if ($interval->s !== 0)
        {
            if ( ! count($format))
            {
                $this->interval = "less than a minute";
                return;
            }
            else
            {
                $format[] = "%s " . $get_plural($interval->s, "second");
            }
        }

        if (count($format) > 1)
        {
            $format = array_shift($format) . " and " . array_shift($format);
        }
        else
        {
            $format = array_pop($format);
        }

        $tense = ($future === TRUE)? 'from now': 'ago';

        $this->interval = $interval->format($format) . ' ' . $tense;
    }

    public function __toString()
    {
        return $this->interval;
    }

} 
```

# asp.net-mvc - 提交时 MVC 4 模型绑定到单选按钮列表

> ID：12082988
> 
> 赞同：1
> 
> 时间：2012-08-22T23:54:25.963
> 
> 标签：asp.net-mvc, jquery-mobile, razor

我的项目是带有 jquery mobile 的 MVC 4。我试图弄清楚如何在提交时使用以下数据填充我的模型：

1.  来自将在获取请求中填充的隐藏值

2.  从视图列表中选中单选按钮值

这是我的模型：

```
 public class ResultsModel
{

    [Display(Name = "PatientFirstName")]
    public string PatientFirstName { get; set; }

    [Display(Name = "PatientLastName")]
    public string PatientLastName { get; set; }

    [Display(Name = "PatientMI")]
    public string PatientMI { get; set; }

    public List<QuestionModel> QuestionList = new List<QuestionModel>();

}

public class QuestionModel
{
    public string Question { get; set; }
    public int QuestionID { get; set; }
    public int AnswerID { get; set; }
} 
```

它有一组问题，其中包含有关获取请求的数据。这是控制器代码：

```
 public class ResultsController : Controller
{
    //
    // GET: /Results/

    public ActionResult Index()
{

    if (Request.IsAuthenticated)
    {
            ResultsModel  resultsModel = new ResultsModel();

            //Get data from webservice
            myWebService.TestForm  inrform;
            var service = new myWebService.myService();
            testform = service.TestForm(id);

            if (testform != null)
            {
                //Render the data into results data model
                int count = 1;
                string text = string.Empty;
                foreach (myWebService.Question questiontext in testform.QuestionList)
                {
                    QuestionModel newquestion = new QuestionModel();
                    text = "Question "  + count + ": " + questiontext.text;
                    if (questiontext.text != null)
                    {
                        newquestion.Question = text;
                        newquestion.QuestionID = questiontext.id;
                    }
                    resultsModel.QuestionList.Add(newquestion);

                    count += 1;
                }                     

            }
            else
            {
                //Error
            }

            return View(resultsModel);
        }

        // Error
        return View();

}

[AllowAnonymous]
[HttpPost]
public ActionResult Index(ResultsModel model,FormCollection fc)
{
    if (fc["Cancel"] != null)
    {
        return RedirectToAction("Index", "Home");
    }
    if (ModelState.IsValid)
    { 
```

在 post 操作中，model.QuestionList 始终为空。这是我的观点：

```
 @model Models.ResultsModel 

@{
    ViewBag.Title = Resources.Account.Results.Title;
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

        <li data-role="fieldcontain">
            @Html.LabelFor(m => m.INRTestDate)
            @Html.EditorFor(m => m.INRTestDate)
            @Html.ValidationMessageFor(model => model.INRTestDate)

        </li>

        <li data-role="fieldcontain">
            @Html.LabelFor(m => m.INRValue)
            @Html.TextBoxFor(m => m.INRValue)            
        </li>

    <li>

    @for (int i = 0; i < Model.QuestionList.Count; i++)
    {
                    <div data-role="label" name="question" >
                @Model.QuestionList[i].Question</div>  
        @Html.HiddenFor(m => m.QuestionList[i].QuestionID)

     <div data-role="fieldcontain">
         <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain" >
             <input id="capture_type_yes" name="answer_type" type="radio" data-theme="c" value="1" />
             <label for="capture_type_yes" >
                 Yes</label>
             <input id="capture_type_no" name="answer_type" type="radio" data-theme="c" value="0" />
             <label for="capture_type_no">
                 No</label>
             <input id="capture_type_na" name="answer_type" type="radio" data-theme="c" value="2" />
             <label for="capture_type_na">
                 Not Applicable</label>
         </fieldset>
        </div> } 
        <label for="textarea-a">
            Comments</label>
        <textarea name="textarea" id="textarea-a"> </textarea>
        <fieldset class="ui-grid-a">
            <div class="ui-block-a">
                <button type="submit" name="Submit" data-theme="c">Submit</button></div>
            <div class="ui-block-b">
                <button type="submit" name="Cancel" data-theme="b" class="cancel">Cancel</button></div>
        </fieldset>
    </li> 
```

在上面的每个代码中，我的 model.Questionlist 集合没有被更新。我还需要弄清楚如何将单选按钮单击（是、否或不适用）绑定到我的 model.Questionlist 集合的 AnswerID 属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:46:24.833

它实际上最终成为这条线：

```
 public List<QuestionModel> QuestionList = new List<QuestionModel>(); 
```

我需要 get/set 来初始化

```
 public List<QuestionModel> QuestionList { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T00:03:24.387

请问你能在之后添加代码吗

```
[AllowAnonymous]
[HttpPost]
public ActionResult Index(ResultsModel model,FormCollection fc)
{
    if (fc["Cancel"] != null)
    {
        return RedirectToAction("Index", "Home");
    }
    if (ModelState.IsValid)
    { 
```

如果您完成代码，这将是一篇好文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T22:44:25.707

MVC5 为带有 Razor 的单选按钮绑定一个列表

在程序的任意位置创建一个 RadioList 类

```
 public class RadioList
    {
        public int Value { get; set; }
        public string Text { get; set; }

        public RadioList(int Value, string Text)
        {
            this.Value = Value;
            this.Text = Text;
        }

    } 
```

在你的控制器中

```
 List<RadioList> Sexes = new List<RadioList>();
        Sexes.Add(new RadioList(1, "Male"));
        Sexes.Add(new RadioList(2, "Female"));
        Sexes.Add(new RadioList(3, "Other"));

        ViewBag.SexeListe = Sexes; 
```

在 Razor 视图中（将 model.Sexe 替换为数据库/模型字段中的值

> @foreach（ViewBag.SexeListe 中的 RadioList radioitem）{
> @Html.RadioButtonFor(model => model.Sexe, @radioitem.Value) @Html.Label(@radioitem.Text) }

# c# - Esc 处理程序被忽略

> ID：12082997
> 
> 赞同：0
> 
> 时间：2012-08-22T23:56:30.400
> 
> 标签：c#, wpf

`Esc`以下代码，按下时不会触发。有人可以给我见解吗？我喜欢改变光标（比如说从绘图模式变成指针模式）

```
 public override void OnKeyDown(MyCanvas dc, KeyEventArgs e)
    {
        if (e.Key == Key.Escape)
        {
            _line = null;
            e.Handled = true;
        }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:29:24.963

@amit 的解决方案：

```
public override void OnKeyDown(MyCanvas dc, KeyEventArgs e)
{
    if (e.Key == Key.Escape)
    {
        _line = null;
        dc.CurrentTool = ToolType.Pointer;
        dc.Cursor = Cursors.Arrow;
        dc.ReleaseMouseCapture();

    }
} 
```

# c# - OpenCL 主机同步要求

> ID：12082999
> 
> 赞同：1
> 
> 时间：2012-08-22T23:56:34.953
> 
> 标签：c#, debugging, opencl, cloo

我的 OpenCL 内核遇到了奇怪的错误。基本上它是双音排序升级到 N != pow of 2。我所做的是我检查主机是否正确排序了序列，而将我带到这里的是答案不是。

现在这个错误很难追踪，因为它是随机发生的。我对许多不同的序列进行排序，每次生成的序列都以相同的方式排序，只是发生一个序列未排序，然后是另一个序列。但是，高百分比的输出是正确的，而且我在 for 循环中的主机实现对相同的输入进行了正确的排序。最有趣的是，当我保持输入并再次在设备上运行它时，它突然被正确排序。

我想到这可能是竞争条件，因为它的行为就是这样。但是我在设备代码中没有这样的地方，所以唯一的可能是主机。我有有序队列，并且我的读写被阻塞，所以应该没有问题，但是在执行内核后我没有同步点。

需要这样的同步吗？OpenCL 对有序队列有什么保证？我是否可能在内核完成对同一内存块的所有操作之前阅读？

这种随机事件的唯一其他想法是设备中的内存错误，但这是我接受的最后一个选项，所以我也欢迎一些其他想法，即何时使用 OpenCL 获得随机结果/错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:13:41.267

根据规范，如果您有一个有序队列，您的内核和内存读取/写入将按照它们排队的顺序完成：请参阅此处的 clCreateCommandQueue [http://www.khronos.org/registry/cl/sdk /1.1/docs/man/xhtml/](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/)。

如果您想 100% 确定是这种情况，您可以在读取内存之前将屏障排入队列。