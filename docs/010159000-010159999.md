# StackOverflow 问答 10159000-10159999

# xcode - iPad 上现有 UIPopoverController 中的 UIImagePickerController 调整大小问题

> ID：10159001
> 
> 赞同：4
> 
> 时间：2012-04-15T02:11:10.173
> 
> 标签：xcode, uiimagepickercontroller, uipopovercontroller

我正在开发一个 iPad 应用程序，其中有一个按钮，可以生成一个弹出框控制器，我正在使用特定的视图控制器填充该控制器。这是生成 UIPopoverController 并使用特定视图 (signUpListAddEditViewController) 加载它的按钮代码：

```
-(void)addSignUpList:(id)sender {
    signUpListAddEditViewController = [[SignUpListAddEditViewController alloc] init];
    popover = [[UIPopoverController alloc] initWithContentViewController:signUpListAddEditViewController];
    popover.popoverContentSize = signUpListAddEditViewController.view.frame.size;
    [popover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
    signUpListAddEditViewController.popover = popover;
} 
```

在 SignUpListAddEditViewController.m 中，我有几个字段和一个表格视图。其中一个字段是 UIButton，我在其中显示图像并允许用户使用此按钮加载新图像。由于我已经在弹出窗口中，我将内容控制器与 UIImagePickerController 交换。到目前为止，一切都很好。

```
-(void)takePicture:(id)sender
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [popover setPopoverContentSize:popupScreenSize animated:YES]; // popupScreenSize is a CGSIZE set to 500 x 900
    [popover setContentViewController:imagePicker animated:YES];
} 
```

视图与 imagePicker 交换，大小与原始视图相同，我可以看到各种图片库（相机胶卷、照片流等）。这就是奇怪的地方。一旦我选择了其中一个画廊，该视图就会被该画廊中图片的缩略图视图替换，然后视图将调整为更窄的宽度。图像失真，几乎不可能选择其中之一。

我已经尝试在每次访问弹出框控制器之前设置 [popover setPopoverContentSize:CGSIZE animated:YES] ，除了详细的图像视图之外，所有内容都正确调整大小？有什么想法可以覆盖缩略图图库视图吗？

这是 didFinishPickingMediaWithInfo 方法的代码，我再次覆盖了内容大小：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [thisList setThumbnailDataFromImage:image];
    [popover setPopoverContentSize:popupScreenSize animated:YES];
    [popover setContentViewController:self animated:YES];
    listImageButton.imageView.image = image;
} 
```

# java - 从文件中读取十六进制字符串块并将它们放入java中的数组中

> ID：10159003
> 
> 赞同：0
> 
> 时间：2012-04-15T02:12:01.077
> 
> 标签：java

我想读取一个文件，其中数据包存储为十六进制文件并将它们存储在数组中。例如，这里有三个块，我需要将它们存储在 3 个单独的数组中。数组应包含这些十六进制字符串。有人可以告诉我正确的方法吗？我尝试使用缓冲读取器和字符串缓冲区，但无法正确实现，因为每个块都需要放在不同的数组中。

00 04 75 8d 49 c7 00 01 03 cd 50 3c 08 00 45 00 00 30 07 28 40 00 80 06 00 00 c0 a8 ec 20 c0 a8 ec 1e 04 05 00 17 aa a2 9e b3 00 00 fa 00 0 0 0 e1 2b 00 00 02 04 05 b4 01 01 04 02

00 01 03 cd 50 3c 00 01 03 dd 4c 2d 08 00 45 00 00 30 00 00 40 00 40 06 e1 37 c0 a8 ec 1e c0 a8 ec 20 00 17 04 05 aa 5a b0 04 a1a a2 9e b04 7 6a 直流 00 00 02 04 05 b4 01 01 04 02

00 04 75 8d 49 c7 00 01 03 cd 50 3c 08 00 45 00 00 28 07 29 40 00 80 06 00 00 c0 a8 ec 20 c0 a8 ec 1e 04 05 00 17 aa a2 9e b4 aa 5a b0 05 fa 59 ab 00 00

我已经做到了这一点，但无法以我想要的方式得到它。特别是我想区分每个块。

```
 BufferedReader br=null;
    try{
    br = new BufferedReader(new FileReader(cmd));
    StringBuffer sb = new StringBuffer();
    String line;
            while((line = br.readLine())!= null)
            {
            sb.append(line);
            }
    String [] store = sb.toString().split(" ");
    pkt = store;
    }catch(IOException ie) {ie.printStackTrace();} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:35:44.290

您需要在行之间添加一个空格才能使拆分起作用。

```
sb.append(line).append(' '); 
```

您还应该使用 StringBuilder 而不是 StringBuffer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:25:39.487

您可以将数组放入列表中。

```
 ArrayList<String[]> list = new ArrayList<String[]>();
    String line;
    while((line = br.readLine())!= null)
        { 
          if(!"".equals(line.trim())){
                   list.add(line.split(" "));
          }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:38:31.213

您只需将所有数据包存储在一个数组列表中，然后在循环结束时按照您的意愿处理它们

```
BufferedReader br=null;
ArrayList<String[]> pkts = new ArrayList<String[]>(); 

try{
        br = new BufferedReader(new FileReader(cmd));

        String line;
        while((line = br.readLine())!= null)
        {
            pkts.add(line.trim().toString().split(" "));
        }

}catch(IOException ie) {ie.printStackTrace();}

for(String[] pkt : pkts) {
    // process your hex string array 
} 
```

# processing - Java 会帮助我理解处理吗？

> ID：10159008
> 
> 赞同：-1
> 
> 时间：2012-04-15T02:13:09.033
> 
> 标签：processing, csound

在我看来，大多数书籍都是基于 Java 6 的。我对 Java 几乎一无所知。

我只是想让 Csoundo 从事处理工作。Csoundo 是一个 Processing 库，因此您可以在 Processing 中使用 Csound 技术并创建自己的图形乐器。

我是 Csound 邮件列表的一员，用户名：Cacophony7

[http://csound.1045644.n5.nabble.com/Trying-to-get-Csoundo-Processing-library-to-work-on-Windows-7-td5639076.html](http://csound.1045644.n5.nabble.com/Trying-to-get-Csoundo-Processing-library-to-work-on-Windows-7-td5639076.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:15:14.850

是的，它会有所帮助，但您可能不需要学习那么多。你应该看看如何构建处理库......

[http://code.google.com/p/processing/wiki/LibraryGuidelines](http://code.google.com/p/processing/wiki/LibraryGuidelines)

有模板等等...

[http://code.google.com/p/processing/w/list](http://code.google.com/p/processing/w/list)

# iphone - 从哪里获得 MobileSafari 使用的书签/文件夹/历史图标？

> ID：10159010
> 
> 赞同：0
> 
> 时间：2012-04-15T02:13:29.433
> 
> 标签：iphone, ios, icons

我在哪里可以获得 MobileSafari 使用的书签/文件夹/历史图标？我试图从 MobielSafari.app 复制它们，但不幸的是这些图标无法打开。似乎它们是加密的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:21:06.223

不是您问题的答案，但对于类似的图标，请务必检查：

*   **Glyphish**：非视网膜版免费，视网膜版 25 美元：http: [//www.greepit.com/open-source-icons-gcons/](http://www.greepit.com/open-source-icons-gcons/)

*   **GLYPHICONS**：非视网膜免费，视网膜 25 美元，视网膜+矢量版 50 美元：http: [//glyphicons.com/](http://glyphicons.com/)

*   **gcons**：免费：[http ://www.greepit.com/open-source-icons-gcons/](http://www.greepit.com/open-source-icons-gcons/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:37:42.283

我发现创建一个名为 Bookmark.png 的 UImage 会给你 ios 书签图标。但是不确定历史记录和文件夹。试过 History.png ......没有运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:20:35.200

去坐，向下滚动> safari，向下滚动> 历史祝你好运

# javascript - jQuery 仅绑定到 keyup，而不是焦点

> ID：10159016
> 
> 赞同：5
> 
> 时间：2012-04-15T02:14:35.683
> 
> 标签：javascript, jquery, events, navigation, keyup

这似乎是一件简单的事情，但谷歌没有为我找到任何东西：

如何仅绑定到文本/值更改事件，不包括获得焦点的输入？即，给定以下内容：

```
$(function(){
  $('input#target').on('keyup', function(){
    alert('Typed something in the input.');
  });
}); 
```

...当用户进入和退出元素时，无论他们是否实际输入文本，都会触发警报。除非用户在文本字段中输入/更改文本，否则如何允许用户在不触发事件的情况下在表单中进行键盘导航？

**注意：**我展示的是脚本的简化版本，不使用`change`事件的原因是在我的真实代码中我有一个延迟计时器，以便在用户停止输入一秒钟后事件发生，而无需更改聚焦触发事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T02:30:09.613

存储该值，并在任何关键事件上检查它是否已更改，如下所示：

```
$(function(){
  $('input#target').on('keyup', function(){
      if ($(this).data('val')!=this.value) {
          alert('Typed something in the input.');
      }
      $(this).data('val', this.value);
  });
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/faKfD/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T02:16:24.080

只需使用[`.change`](http://api.jquery.com/change/)事件。

**更新：**如果您想要实时更改通知，那么您是否必须通过`keyup`事件，这意味着您需要对处理程序进行编程以忽略那些不会导致值被修改的键。

您可以使用忽略的键代码白名单来实现这一点，但它可能会变得丑陋：按下`Del`会导致值被更改，除非光标位于输入的末尾，在这种情况下它不会，除非碰巧是输入中的选定范围，在这种情况下它确实如此。

如果不是“纯粹”的话，我个人认为更理智的另一种方法是对您的处理程序进行编程以记住元素的旧值，并且只有在它发生变化时才做出反应。

```
$(function() {
    // for each input element we are interested in
    $("input").each(function () {
        // set a property on the element to remember the old value,
        // which is initially unknown
        this.oldValue = null;
    }).focus(function() {
        // this condition is true just once, at the time we
        // initialize oldValue to start tracking changes
        if (this.oldValue === null) {
            this.oldValue = this.value;
        }
    }).keyup(function() {
        // if no change, nothing to do
        if (this.oldValue == this.value) {
            return;
        }

        // update the cached old value and do your stuff
        this.oldValue = this.value;
        alert("value changed on " + this.className);
    });
});​ 
```

如果您不想直接在 DOM 元素上设置属性（真的，它没有任何问题），那么您可以在它出现时替换`$(this).data("oldValue")`它`this.oldValue`。从技术上讲，这将具有使代码变慢的缺点，但我相信没有人会注意到。

**[看到它在行动](http://jsfiddle.net/qrxLE/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T02:28:14.037

这将做到这一点，设置一个自定义属性并检查：

```
$('input').focus(function(){ 
    $(this).attr('originalvalue',$(this).val()); 
});

$('input').on('keyup',function(){ 
    if($(this).val()===$(this).attr('originalvalue')) return; 
    alert('he must\'ve typed something.'); 
}); 
```

警惕多次触发的事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T09:35:42.410

这是另一个版本，它明确测试输入字段是否为空。

如果输入为空，则不执行操作。

> ```
> $(function(){
>     $(selector).on('keyup', function(){
>         if ($(this).val()!='') {
>             alert('char was entered');
>         }
>     })
> }); 
> ```

# mysql-python - mysql-python：无法打开和锁定特权表：表 'mysql.host' 不存在

> ID：10159019
> 
> 赞同：6
> 
> 时间：2012-04-15T02:14:46.140
> 
> 标签：mysql-python, python-db-api

我使用自制软件安装了 mysql。

我现在正在尝试安装 mysql-python，当我运行 mysql 时，我不断收到以下错误。

我是编程新手，对识别问题了解不足。

任何帮助将不胜感激。谢谢。

```
 TDNS-Mac-mini:~ TDNS$ easy_install mysql-python
    /Library/Frameworks/Python.framework/Versions/2.7/bin/easy_install:5: UserWarning: Module pkg_resources was already imported from /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.pyc, but /Library/Python/2.7/site-packages/distribute-0.6.24-py2.7.egg is being added to sys.path
      from pkg_resources import load_entry_point
    /Library/Frameworks/Python.framework/Versions/2.7/bin/easy_install:5: UserWarning: Module site was already imported from /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.pyc, but /Library/Python/2.7/site-packages/distribute-0.6.24-py2.7.egg is being added to sys.path
      from pkg_resources import load_entry_point
    Searching for mysql-python
    Reading http://pypi.python.org/simple/mysql-python/
    Reading http://sourceforge.net/projects/mysql-python/
    Reading http://sourceforge.net/projects/mysql-python
    Best match: MySQL-python 1.2.3
    Downloading http://download.sourceforge.net/sourceforge/mysql-python/MySQL-python-1.2.3.tar.gz
    Processing MySQL-python-1.2.3.tar.gz
    Running MySQL-python-1.2.3/setup.py -q bdist_egg --dist-dir /var/folders/c9/xzv35t2n3ld9lgjrtl0vd0xr0000gn/T/easy_install-LsUpDW/MySQL-python-1.2.3/egg-dist-tmp-vzGMr9
    warning: no files found matching 'MANIFEST'
    warning: no files found matching 'ChangeLog'
    warning: no files found matching 'GPL'
    unable to execute gcc-4.2: No such file or directory
    error: Setup script exited with error: command 'gcc-4.2' failed with exit status 1

TDNS-Mac-mini:~ TDNS$ mysqld
        120414 22:02:41 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
        mysqld: Table 'mysql.plugin' doesn't exist
        120414 22:02:41 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
        120414 22:02:41 InnoDB: The InnoDB memory heap is disabled
        120414 22:02:41 InnoDB: Mutexes and rw_locks use GCC atomic builtins
        120414 22:02:41 InnoDB: Compressed tables use zlib 1.2.5
        120414 22:02:41 InnoDB: Initializing buffer pool, size = 128.0M
        120414 22:02:41 InnoDB: Completed initialization of buffer pool
        120414 22:02:41 InnoDB: highest supported file format is Barracuda.
        InnoDB: The log sequence number in ibdata files does not match
        InnoDB: the log sequence number in the ib_logfiles!
        120414 22:02:41  InnoDB: Database was not shut down normally!
        InnoDB: Starting crash recovery.
        InnoDB: Reading tablespace information from the .ibd files...
        InnoDB: Restoring possible half-written data pages from the doublewrite
        InnoDB: buffer...
        120414 22:02:41  InnoDB: Waiting for the background threads to start
        120414 22:02:42 InnoDB: 1.1.8 started; log sequence number 1595675
        120414 22:02:42 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T14:01:02.407

我想到了。我忘了按照终端中自制软件安装说明顶部的说明进行操作。

希望为犯同样错误的其他人节省时间。

```
Set up databases to run AS YOUR USER ACCOUNT with:
    unset TMPDIR
    mysql_install_db --verbose --user=`whoami` --basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp

To set up base tables in another folder, or use a different user to run
mysqld, view the help for mysqld_install_db:
    mysql_install_db --help

and view the MySQL documentation:
  * http://dev.mysql.com/doc/refman/5.5/en/mysql-install-db.html
  * http://dev.mysql.com/doc/refman/5.5/en/default-privileges.html

To run as, for instance, user "mysql", you may need to `sudo`:
    sudo mysql_install_db ...options...

Start mysqld manually with:
    mysql.server start

    Note: if this fails, you probably forgot to run the first two steps up above 
```

# javascript - 如果光标在元素之外，如何应用 mousdown 光标？

> ID：10159024
> 
> 赞同：1
> 
> 时间：2012-04-15T02:15:46.700
> 
> 标签：javascript, jquery

在这个小提琴中，您可以围绕一个圆圈抓住并拖动黑盒子

[http://jsfiddle.net/S5AT6/](http://jsfiddle.net/S5AT6/)

`#marker`当用户抓住黑匣子但他们的光标位于元素外部和文档内部时，如何显示 mousedown cursor(closedhand) 而不是默认光标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T02:31:53.133

你去：[jsFiddle上的解决方案](http://jsfiddle.net/marcgrabow/N8c99/1/)

事情发生了变化：

**CSS**

```
// removed the !important flag here
cursor: url(https://mail.google.com/mail/images/2/openhand.cur), default; 

// removed the div#marker here
.mouseDown { 
```

**JS**

在准备好的文档上添加了这个：

```
$(document).on('mouseup', function(event) {
    $('body').removeClass("mouseDown");
}); 
```

在你的 mousedown 函数中添加了这个：

```
$('body').addClass("mouseDown"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:33:13.763

只需将`cursor`样式应用于整个`<html>`. [更新了 jsFiddle](http://jsfiddle.net/minitech/S5AT6/5/)

# android - 在表格中输入多行的最简单方法

> ID：10159041
> 
> 赞同：1
> 
> 时间：2012-04-15T02:20:34.167
> 
> 标签：android, sqlite, android-intent

当我第一次运行应用程序时，我想创建一个表并在表中输入一些行。为此，我编写了这段代码，它运行良好：

```
 //Creating the table
        db.execSQL(MRM_BOOKING_LOGIN_TABLE_CREATE);         
        //Setting the values in the table
        ContentValues contentValuesLogin = new ContentValues();
        contentValuesLogin.put(USER_ID, "asdf");
        contentValuesLogin.put(PASSWORD, "1234");
        //Inserting a row in the table
        db.insert(MRM_BOOKING_LOGIN_TABLE, null, contentValuesLogin); 
```

但我想在表中输入至少 15 到 20 行。每次插入一行后，我都会清除 ContentValues 对象（或创建另一个 ContentValues 对象）并在新创建的表中输入另一行，这是一个好主意吗？这样，代码行数也会增加很多。我相信可能还有其他更好的替代方法可以做到这一点。请建议

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:46:45.387

我认为，插入多条记录的唯一方法`db.insert`是使用*循环*。**将它与 SQLite Transaction**结合起来，它会加快这个过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T04:36:25.310

示例代码：

```
try {
            // open the database
            db.beginTransaction();

            for (your objects) {
                ContentValues cv = new ContentValues();
                cv.put(COL1, obj.p1);
                cv.put(COL2, obj.p2);
                //.....

                long id = db.insertOrThrow(DATABASE_TABLE, COL_Id, cv);
            }

            db.setTransactionSuccessful();
} catch (Exception e) {
            throw e;
        } finally {
            db.endTransaction();
            // close database
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T02:44:34.903

您可以使用 插入多行 `ContentResolver.bulkInsert (Uri url, ContentValues[] values)`。

可以从这里获得更多信息：

[使用 applyBatch 插入数千个联系人条目很慢](https://stackoverflow.com/questions/5596354/insertion-of-thousands-of-contact-entries-using-applybatch-is-slow)

希望这会帮助你。

# sql - SQL Azure 连接字符串速度（IP 或域）

> ID：10159042
> 
> 赞同：0
> 
> 时间：2012-04-15T02:20:34.730
> 
> 标签：sql, azure, connection-string, azure-sql-database

到目前为止，我们始终在 SQL 的连接字符串中使用 IP 地址。这种方式我们认为会更快，因为用户不需要查找域的 IP。

现在我们正在尝试 Microsoft Azure，我们看到他们在连接字符串中使用了域名。

会慢些吗？有时我们知道将域名解析为 IP 地址需要 100-400 毫秒，我们是否每次重新加载页面都花费这段时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:00:50.613

您需要通过给定的服务器名称访问 SQL Azure，因为您要连接到大规模系统，而不是单台计算机。关于页面加载延迟：我不知道您是如何构建解决方案的，但重新加载网页并不等同于重新建立从 Web 应用程序到数据库的数据库连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:36:10.537

DNS 解析将被缓存 - 它不必每次都进行新的查找。您可以通过测试页面上的[System.Net.Dns.GetHostAddresses()](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)以编程方式解析 DNS 条目来证明这一点。

编辑：它将由调用服务器缓存。

# git - 选择性提交到主仓库的技术

> ID：10159044
> 
> 赞同：2
> 
> 时间：2012-04-15T02:20:59.877
> 
> 标签：git, workflow, git-cherry-pick

假设您从远程开源项目（例如在 Github 上）克隆了一个本地存储库。您在本地存储库中进行更改，添加分支等。

您有以下目标：您所做的一些更改是出于您自己的目的，不会回馈给主存储库，其他更改是社区感兴趣的，例如错误修复和功能添加以及您会喜欢回馈主回购。

因此，基于此，让我们假设两个主要分支：一个用于所有更改的 dev-proj，一个带有子集的 dev-comm 将被贡献回主 repo。

在一般情况下，您会知道给定的一组更改是否会进入 dev-comm，因此您可以将它们隔离到一个分支中。

但是，在一些复杂的情况下，您不希望分支受制于是否应在上游贡献更改。

以 Web 应用程序的本地化为例——翻译和视图的变化等。您为它创建了一个分支并打算将其保密，但在处理它时您发现原始代码存在 i18n 问题，因此您将这些问题作为您在此分支上工作的一部分进行修复。这些将 WRT 更改为 i18n，您希望将其隔离并推回主存储库。

我的问题是：挑选处理这种情况的最佳方法 - 我担心尝试细化提交会分散注意力，如果我错误地做出涉及大量私人和社区的提交会发生什么更改，那么我将不得不尝试为此应用修复程序。或者是否有更好的技术，即使它涉及一些手动元素。

**编辑：**我将用一个粗略的草图澄清一下：p 用于本地项目，c 用于专门为社区推送到上游的更改：

```
 Ep--Fc--Gp--Hc--Ipc(commit not granular!)--Jc topicA
                  /
   A--B--C devProj
       |
        \ Q--R devComm
                      |
                       \ Fc--Hc--I2c--Jc topicAcomm 
```

在处理主题 A 时，我们不想关心哪些部分是为社区服务的。但最后，我们希望有一些类似 topicAcomm 的东西，可以合并到 devComm 中并推送到上游。

我的问题是挑选樱桃是否是处理这个问题的方法，从检查文档/教程来看，这似乎是一种合理的方法。或者是否还有其他一些技巧，例如稍后注释代码或其他一些我不知道的技巧。

意外混合提交只是可能出现的问题之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:03:55.510

看看'git rebase --onto ...'。对于您的示例，将其视为两个步骤：1）使用“rebase”将您的“i18n”更改隔离到他们自己的分支上，以及 2）将该分支与 dev-proj 合并。来自 'git help rebase' 的示例之一：

```
If we have the following situation:

                                         H---I---J topicB
                                        /
                         E---F---G  topicA
                        /
   A---B---C---D  master

  then the command

       git rebase --onto master topicA topicB

   would result in:

                        H'--I'--J'  topicB
                       /
                       | E---F---G  topicA
                       |/
   A---B---C---D  master 
```

然后，您可以将 topicB 合并到 master (dev-proj) 并返回 topicB (dev-comm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:03:57.930

您可以从[原始的 git 分支管理中获取一些想法，在“](https://github.com/git/git/blob/master/Documentation/howto/maintain-git.txt) [gitworkflows 手册页](http://schacon.github.com/git/gitworkflows.html)”中也有详细说明。

我宁愿重新排序您的主题分支的历史记录，以便合并到公共分支，而不是依赖单独的樱桃采摘（稍后可能会出现问题：请参阅“[如何在 git 中合并特定提交](https://stackoverflow.com/questions/881092/how-to-merge-a-specific-commit-in-git/881112#881112)”）

任何变基都会迫使您的团队将他/她的主题分支重置为新排序的主题分支，但这比要求*社区*（更大的一群人）重置任何东西更容易管理。

*自动*重新排序的一个技巧是`git rebase --interactive --autosquash`重新排序和分组提交（请参阅“[修剪 GIT 签入/压缩 GIT 历史](https://stackoverflow.com/questions/2302736/trimming-git-checkins-squashing-git-history/2302947#2302947)”。

# http - 如何使用 UITextField/UIWebView 访问 URL，但不包括 IOS5 中的 http:// 前缀

> ID：10159055
> 
> 赞同：1
> 
> 时间：2012-04-15T02:25:45.620
> 
> 标签：http, url, ios5, uiwebview, uitextfield

我在 veiwController 中有一个 textField 和一个 webView。

我的问题是，当我输入要访问的 url 时，除非我包含 http:// 前缀，否则它不会加载。我希望我的 textField 像 safari 中的一样，无论我输入什么，它都会找到网站。

我希望能够输入“stackoverflow.com”而不是“http://stackoverflow.com”

是否有一些代码应该在其中指定或者应该自动工作？

如果需要我的代码，请告诉我，但似乎没有它就可以回答这个问题。

谢谢！

# objective-c - 超过 5 个 UIImage 的 Xcode 错误

> ID：10159056
> 
> 赞同：2
> 
> 时间：2012-04-15T02:25:48.787
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [iPhone，“尝试注册的过滤专辑列表超过 5 个。这将失败。” 错误](https://stackoverflow.com/questions/7167373/iphone-more-than-maximum-5-filtered-album-lists-trying-to-register-this-will)

当我通过 Popover Controller 或 Modal View Controller 将图像添加到 UIImageViews 时，在第 4 个图像之后，当我去添加第 5 个图像时，Xcode 的调试器输出：**“错误：超过最大 5 个过滤的专辑列表试图注册。这将失败.** ” 它仍然可以让我添加 5 张以上的图片，但只保存其中的 4 张。我在这里对此进行了一些研究，发现了这个问题： [iOS 5 GM: <Error>: More than maximum 5 个过滤的专辑列表试图注册。这将失败](https://stackoverflow.com/questions/7689119/ios-5-gm-error-more-than-maximum-5-filtered-album-lists-trying-to-register)

这里的答案似乎是Apple的一个错误，应该忽略它。好吧，Apple 通常（有点）快速修复他们的 Xcode 错误，这已经存在了一段时间，所以我开始想知道真正的原因是什么。我认为此错误与我的应用程序仅保存最多 4 张图片有关。

这是我正在使用的代码：

```
- (IBAction)grabImage {
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        _popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
        [_popover presentPopoverFromRect:self.imageView.bounds inView:self.imageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 

    else {
        [self presentModalViewController:imgPicker animated:YES];
    }
    [self.imgPicker resignFirstResponder];
}
// Sets the image in the UIImageView
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    if (imageView.image == nil) {
        imageView.image = img;

        [self.array addObject:imageView];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;

    }

    if (imageView2.image == nil) {
        imageView2.image = img;
        NSLog(@"The image is a %@", imageView);
        [self.array addObject:imageView2];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView3.image == nil) {
        imageView3.image = img;

        [self.array addObject:imageView3];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView4.image == nil) {
        imageView4.image = img;

        [self.array addObject:imageView4];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }
    if (imageView5.image == nil) {
        imageView5.image = img;

        [self.array addObject:imageView5];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }
} 
```

**更新：**这是我当前的代码：

```
- (IBAction)grabImage {
    if (self.imgPicker == nil) {
        self.imgPicker = [[UIImagePickerController alloc] init];
    }

    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        _popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
        [_popover presentPopoverFromRect:self.imageView.bounds inView:self.imageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 

    else {
        [self presentModalViewController:imgPicker animated:YES];
    }
    [self.imgPicker resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T06:35:02.130

从链接的其他问题来看，这听起来像是一个 Apple 错误，但与创建多个`UIImagePickerController`s. 您一次只提供一个图像选择器控制器，因此也许您应该在第一次调用时创建一个`grabImage`然后重用它，而不是每次都创建一个新的。

# operating-system - Linux 中的虚拟软盘驱动器

> ID：10159058
> 
> 赞同：3
> 
> 时间：2012-04-15T02:27:07.750
> 
> 标签：operating-system, virtual, floppy

[我在这里](http://www.brokenthorn.com/Resources/OSDev3.html)玩操作系统开发教程。但是，由于它基于 Windows 作为开发平台，我想知道是否有等效的软件（或某种方式）来拥有虚拟软盘驱动器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T07:25:56.407

有一个非常普遍的误解，即简单地安装映像会神奇地模拟硬件。在 Linux 中使用 mount 命令挂载文件系统映像只会将该映像中的文件显示在您挂载到的目录中。没有软盘驱动器的仿真。我不知道有任何适用于 Linux 的软盘模拟器。请阅读此线程，尤其是我的帖子，目前位于线程的末尾，简单解释安装与仿真： http: [//forum.osdev.org/viewtopic.php](http://forum.osdev.org/viewtopic.php?f=1&t=21589) ?f=1&t=21589 。

请注意，QEMU、Bochs 和 VirtualBox 确实将软盘驱动器模拟到虚拟机。那是硬件的管理程序级仿真。我不知道任何用于 Linux 的软盘驱动器的内核级仿真。

但是您有可能使用 dd、wxHex、mount 命令和一些虚拟化和/或机器仿真软件（例如 QEMU、Bochs 或 VirtualBox）来完成您想做的事情。

映像软盘示例（某些命令可能需要 root 权限，前置“sudo”或通过“su”放入 root shell 以获得 root 权限）：

```
dd if=/dev/floppy0 of=$HOME/images/my_floppy_image 
```

然后做：

```
openssl md5 $HOME/images/my_floppy_image 
```

获取图像的 md5 哈希，然后再次图像到第二个文件：

```
dd if=/dev/floppy0 of=$HOME/images/my_floppy_image2 
```

散列第二张图像，并确保它们匹配。

您可以使用 wxHex 打开图像进行十六进制编辑。如果您以 root 身份运行 wxHex，它甚至可以通过硬件抽象文件打开和编辑，直接进入软盘（打开 /dev/floppy0 或其他）。

通过回送设备挂载镜像：

```
sudo mount -o loop $HOME/images/my_floppy_image /media/floppy 
```

软盘或映像的第一个扇区（前 512 个字节）是 VBR（卷引导记录），应该包括引导加载程序。由于这在技术上是文件系统的一部分，因此您可以从仅挂载文件系统的环回设备访问它。如果您改为通过环回设备挂载硬盘映像中的分区，并且引导加载程序位于 MBR（已挂载分区的文件系统之外），则*无法*从环回设备访问引导加载程序，这又是, 只挂载一个文件系统。

仅获取 VBR：

```
dd if=/dev/floopy0 of=$HOME/images/my_floppy_VBR bs=512 count=1 
```

当然，您可以颠倒任何 dd 事情以从映像转到软盘或其他映像。

将图像吹到软盘上：

```
dd if=$HOME/images/my_floppy_image of=/dev/floppy0 
```

仅将 VBR 吹到软盘上：

```
dd if=$HOME/images/my_floppy_VBR of=/dev/floppy0 bs=512 count=1 
```

或者，如果上面的内容把你不想被吹倒的东西吹倒了，也许是这样的：

```
dd if=$HOME/images/my_floppy_VBR of=/dev/floppy0 bs=440 count=1 
```

只要做你必须做的事。

从图像中获取 VBR：

```
dd if=$HOME/images/my_floppy_image of=$HOME/images/my_floppy_VBR bs=512 count=1 
```

从图像中获取前 440 个字节：

```
dd if=$HOME/images/my_floppy_image of=$HOME/images/my_floppy_first_440 bs=440 count=1 
```

从上面的示例中，您应该能够弄清楚如何将 VBR 或仅来自给定源（软盘或图像）的前 440 个字节吹到图像上，编辑图像。“if”代表“输入文件”，“of”代表“输出文件”。请记住，即使是真正的软盘（与映像相反）也由文件（如 /dev/floppy0）引用。是的，/dev/floppy0 实际上是一个您可以在文件浏览器中导航并查看的文件。它是一个由内核创建的抽象文件，用于与实际的软盘驱动器通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:33:40.387

虚拟软盘驱动器似乎只在该教程中用于创建 Bochs 可以启动的虚拟磁盘。Linux 在这方面实际上更加灵活。您需要使用的是[循环设备](http://en.wikipedia.org/wiki/Loop_device)。我不知道如何将它与 Bochs 一起使用 - 你需要阅读文档:)

# python - 扭曲的试验在测试之间挂起

> ID：10159059
> 
> 赞同：1
> 
> 时间：2012-04-15T02:27:17.993
> 
> 标签：python, twisted, trial

我对扭曲很陌生，我正在尝试使用试用测试框架编写一些单元测试。我的测试按预期运行并通过，但由于某种原因，测试在测试之间挂起。我必须在每次测试后点击`CTRL`+`C` 才能让它进入下一个测试。我猜我的某些配置不正确，或者我没有调用一些我应该告诉试验测试已经完成的方法。

这是正在测试的类：

```
from twisted.internet import reactor, defer
import threading
import time

class SomeClass:
   def doSomething(self):
      return self.asyncMethod()

   def asyncMethod(self):
       d = defer.Deferred()
       t = SomeThread(d)
       t.start()
       return d

class SomeThread(threading.Thread):
    def __init__(self, d):
        super(SomeThread, self).__init__()
        self.d = d

    def run(self):
        time.sleep(2) # pretend to do something
        retVal = 123
        self.d.callback(retVal) 
```

这是单元测试类：

```
from twisted.trial import unittest
import tested

class SomeTest(unittest.TestCase):
    def testOne(self):
        sc = tested.SomeClass()
        d = sc.doSomething()
        return d.addCallback(self.allDone)

    def allDone(self, retVal):
        self.assertEquals(retVal, 123)

    def testTwo(self):
        sc = tested.SomeClass()
        d = sc.doSomething()
        return d.addCallback(self.allDone2)

    def allDone2(self, retVal):
        self.assertEquals(retVal, 123) 
```

这是命令行输出的样子：

```
me$ trial test.py 
test
  SomeTest
    testOne ... ^C                                                           [OK]
    testTwo ... ^C                                                           [OK]

-------------------------------------------------------------------------------
Ran 2 tests in 8.499s

PASSED (successes=2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:09:00.810

我*猜*你的问题与你的线程有关。Twisted 不是线程安全的，如果你需要与线程交互，你应该让反应器使用`deferToThread`, `callInThread`,来处理事情`callFromThread`。有关如何使用 Twisted 实现线程安全的信息，请参见[此处。](http://twistedmatrix.com/documents/current/core/howto/threading.html)

# jquery - Jquery合并JSON对象中的两个字段

> ID：10159065
> 
> 赞同：0
> 
> 时间：2012-04-15T02:29:07.627
> 
> 标签：jquery, json

我在 JQuery 中有一个 JSON 对象，如下所示：

```
["state":"06","population":9},{"state":"32","population":13},{"state":"01","population":4}, 
```

我想最终得到一个 JSON 对象，例如：

```
{"06":9,"32":13,"01":4} 
```

我将如何在 JQuery 中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:33:29.840

你会想使用该[`.each`](http://api.jquery.com/jQuery.each/)方法。如果`my_array`包含您描述的原始数组，则应该这样做：

```
var result = {};
$.each(my_array, function(index, val) {
  result[val.state] = val.population;
}); 
```

# debugging - 从返回的 PowerShell 函数将调试消息打印到控制台

> ID：10159066
> 
> 赞同：3
> 
> 时间：2012-04-15T02:29:10.347
> 
> 标签：debugging, function, powershell

有没有办法从返回值的 PowerShell 函数将调试消息打印到控制台？

例子：

```
function A
{
    $output = 0

    # Start of awesome algorithm
    WriteDebug # Magic function that prints debug messages to the console
    #...
    # End of awesome algorithm

    return $output
}

# Script body
$result = A
Write-Output "Result=" $result 
```

是否有符合此描述的 PowerShell 函数？

我知道[Write-Output](https://docs.microsoft.com/en-gb/powershell/module/Microsoft.PowerShell.Utility/Write-Output?view=powershell-5.1)和 Write-*，但是在我所有的测试中，在上述函数中使用任何这些函数都不会写入任何调试消息。我也知道只调用函数而不使用返回值确实会导致函数编写调试消息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T03:20:30.013

当然，使用`Write-Debug`cmdlet 来执行此操作。请注意，默认情况下您不会看到调试输出。为了查看调试输出，设置`$DebugPreference`为`Continue`（而不是`SilentlyContinue`）。对于简单的功能，我通常会这样做：

```
function A ([switch]$Debug) {
    if ($Debug) { $DebugPreference = 'Continue' }
    Write-Debug "Debug message about something"
    # Generate output
    "Output something from function"
} 
```

请注意，我不建议使用表单`return $output`。函数输出任何未被变量捕获、重定向到文件（或 Out-Null）或强制转换为`[void]`. 如果您需要从函数中提前返回，那么一定要使用`return`.

对于高级功能，您可以更轻松地获得调试功能，因为 PowerShell 为您提供了无处不在的参数，包括`-Debug`：

```
function A {
    [CmdletBinding()]
    param()

    End {
        $pscmdlet.WriteDebug("Debug message")
        "Output something from cmdlet"
    }
} 
```

仅供参考，声明`[CmdletBinding()]`上的属性`param()`是使它成为高级功能的原因。

也不要忘记`Write-Verbose`，`$pscmdlet.WriteVerbose()`如果您只是想要一种输出与调试无关的附加信息的方法。

# jquery - 鼠标悬停期间在表格行中显示/隐藏按钮

> ID：10159067
> 
> 赞同：6
> 
> 时间：2012-04-15T02:29:20.543
> 
> 标签：jquery, html-table, mouseover, jquery-hover

我有一个行表（duh），在其中一列中，我试图在悬停/鼠标悬停期间出现两个按钮。现在，它是一个具有设定宽度/高度和背景位置的锚标记。

这是它们不隐藏时的样子：

![](../Images/c2a7162d1747db817f016f93a891bd38.png)

成品的一个很好的例子是grooveshark的悬停控件：

![](../Images/12d8cb3272864d2d3d90a9bb0966d2ea.png)

基本上，我想知道如何隐藏所有图像，除了当前悬停在一行中的图像。然后该行将显示这些图像，但一旦鼠标移动到不同的行就会消失。

html代码：

```
echo '<td><a href="/servers/detail.php?id='. $row['id'] .'">'.$row['server_name'].'</a><a id="option-favorite" class="rowOption"></a><a id="option-vote" class="rowOption"></a></td>'; 
```

JS代码：

```
jQuery('td').live('mouseover', function () {
    jQuery(this).closest("tr").find('a.rowOption').visible();
}); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-15T02:34:06.517

当您有行表（duh）时，您可以像这样使用 CSS：

```
 table#mytableofrows tr td a.button { display:none;}
  table#mytableofrows tr:hover td a.button { display:inline-block;} 
```

将适用于此标记：

```
<table id="mytableofrows" width="100%">
    <tr><td> <a class="button">Hello yes this is dog</a> </td></tr>
</table> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T20:34:27.970

尝试使用 HTML5 样式标签。

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      table tr button { opacity:0; float:right }
      table tr:hover button { opacity:1 }
    </style>
  </head>

  <body>
    <table border=1 width=300px>
      <tr><td>LINE1 <button>BUTTON1</button></td></tr>
      <tr><td>LINE2 <button>BUTTON2</button></td></tr>
      <tr><td>LINE3 <button>BUTTON3</button></td></tr>
    </table>
  </body>
</html> 
```

# c++ - 我很难将我的一些代码从 main 移动到函数

> ID：10159068
> 
> 赞同：0
> 
> 时间：2012-04-15T02:29:26.313
> 
> 标签：c++, string, function, pointers, char

当我按原样运行程序时，它工作正常。但是，当我在 while 循环之后立即移动该部分直到 cout<<"pp1>" 出现两个错误。从 'char' 到 'const char*' 的无效转换和初始化 'char* strncpy(char*, const char*, size_t)' 的参数 2。关于我需要更改的任何想法，以便我可以将该代码移动到函数中。我在网上或我的 c++ 书籍中找不到很好的解释来解释解决这个问题的方法。我知道该错误是说它需要文字而不是指针，但无法弄清楚解决方法（有吗？）。

这是我的主要内容。

```
int main(){
       char  cmd_str[500];
       int length=0;
       bool cont=true;
     while(cont){

 // strncpy(cmd_str, infile(), 500 - 1); this line causes the two errors
 // cmd_str[500 - 1] = '\0';

 mode_t perms=S_IRUSR;
 int i=0;
 int fd = open("text.txt",O_RDONLY , perms);
 char *returnArray;
  cout<<fd<<endl;

 if(fd<0){
    perror( strerror(errno));
   } else{
   ifstream readFile;
   readFile.open("text.txt");
   readFile.seekg (0, ios::end);
   int length = readFile.tellg();
   readFile.seekg (0, ios::beg);
   returnArray=new char[i];//memory leak need to solve later
   readFile.getline(returnArray,length);
       cout<<returnArray<<endl;
   strncpy(cmd_str, returnArray, length - 1);
   cmd_str[length - 1] = '\0';

    }

 cout<<"pp1>";
cout<< "test1"<<endl;
//  cin.getline(cmd_str,500);
cout<<cmd_str<<endl;
cout<<"test2"<<endl;
length=0;
    length= shell(returnArray);
cout<<length<<endl;
if(length>=1)
  {
    cout<<"2"<<endl;
  }
else{
  cont=false;
}
  } 
```

}

这是我尝试过的功能

```
char infile()
{
  mode_t perms=S_IRUSR;
 int i=0;
  int fd = open("text.txt",O_RDONLY , perms);
  char *returnArray;
 cout<<fd<<endl;
if(fd<0){
        perror( strerror(errno));
 }else{
 ifstream readFile;
readFile.open("text.txt");
//int length = readFile.tellg();
readFile.seekg (0, ios::end);
int length = readFile.tellg();
readFile.seekg (0, ios::beg);
returnArray=new char[i];//memory leak need to solve later
readFile.read(returnArray,length);
readFile.getline(returnArray,length);
  }
 return  *returnArray; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:55:48.257

取消引用`returnArray`并尝试返回 a`char`是*行不通的*，因为：

1.  您将只返回字符串的第一个字符。
2.  该`strncpy`函数将不接受它（这就是您收到这些错误的原因）。
3.  您需要一种方法来释放`char*`占用的堆分配内存。

`char infile()`将您的函数定义从to更改为`const char* infile()`仅返回指针。理想情况下，这会将填充的数组作为`const char*`（C 样式的字符串）返回，您可以将其`strncpy`成功传递给该数组。此外，当你完成它时，你需要调用`delete []`它（以防止内存泄漏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:37:04.010

废话，修复代码（让它看起来更干净，即缩进），你可能会得到更多的回应。我看到了两件事：while 循环的括号，现在函数返回类型是单个字符，而您正在寻找返回 char*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T03:03:07.727

首先，您的 infile 函数返回一个 char，而 strncpy 需要一个 const char *，这基本上意味着它需要 ac 字符串（或 char 数组）。

# c# - 可以创建多少个嵌套控件？

> ID：10159069
> 
> 赞同：2
> 
> 时间：2012-04-15T02:29:45.487
> 
> 标签：c#, winforms

我有一个`UserControl`包含一个`FlowLayoutPanel`. 许多此类控件实例需要以嵌套形式在`Form`. 我发现*只能*创建 15 个嵌套实例！所以我决定检查一个更简单的控制模型。该模型由`GroupBox`包含 a的 a 组成`Panel`：

```
Control parent = this;
for (int groupIndex = 0; groupIndex < 100; groupIndex++)
{
    GroupBox grp = new GroupBox();
    Panel pnl = new Panel();
    pnl.Dock = DockStyle.Fill;
    pnl.Parent = grp;

    grp.Parent = parent;
    grp.Size = new Size(parent.Width - 10, parent.Height - 10);

    parent = pnl;
} 
```

当`groupIndex`达到 24 时，遇到*Error created window handle*异常。是什么原因以及如何克服它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T22:36:40.413

这是以下问题的副本：

[在 WinForms 中控制嵌套限制](https://stackoverflow.com/questions/18060438/control-nesting-limits-in-winforms)

为了回答您的问题，Windows 限制为 50 个嵌套控件（[来源](http://blogs.msdn.com/b/oldnewthing/archive/2003/12/18/44379.aspx)）。

您的示例创建了一个组框并在其中嵌套了一个面板，并且您在崩溃发生之前这样做了 24 次。如果您考虑表单本身，那么您将达到该限制。

绘制控件时会强制执行该限制。根据我的测试，我能够创建和嵌套数百个控件，但是当我将该嵌套的顶层控件添加到可见控件时，它仍然崩溃。

# excel - 将数组复制到过滤范围会产生不合理的结果

> ID：10159073
> 
> 赞同：4
> 
> 时间：2012-04-15T02:30:10.433
> 
> 标签：excel, excel-2010, vba

将过滤范围的值复制到数组似乎没有问题：然后数组包含来自过滤和未过滤单元格的值。但是，当我将数组的内容复制回过滤范围时，结果对我来说是难以理解的。

这是我的代码：

```
Sub test()
    Dim rangecopy() As Variant

    rangecopy() = Range(Cells(2, 1), Cells(14, 3)).Value
    For c = LBound(rangecopy, 1) To UBound(rangecopy, 1)
        rangecopy(c, 1) = c
        rangecopy(c, 2) = c * 10
        rangecopy(c, 3) = c * 100
    Next
    Range(Cells(2, 1), Cells(14, 3)).Value = rangecopy()
End Sub 
```

它应该给出以下结果。在这里，当宏将数组复制到该范围时，该范围未过滤。

![伊姆古尔](../Images/342264b863080a1339d805e895496c57.png)

如果范围按 D 列过滤（“NO”被过滤掉），结果如下所示：

![伊姆古尔](../Images/f63675ad5d786f446bd85ac202cee22e.png)

首先，过滤的单元格不会更新。然后，B 列中的大多数单元格从数组的第一列 (4, 5, 6) 中获取值，而其他一些单元格从数组的第二列 (10) 中正确获取值。最后两行填充了#N/A 错误。这应该这样工作吗？我正在使用 Office 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:35:57.603

我真的希望了解 VBA 内部工作原理的人可以对您的问题提供更多见解。我可以分享以下内容：

首先，它按预期工作。但是，我不知道为什么这是设计，也不知道分配过程中到底发生了什么。

有很多案例会产生类似的问题。例如，如果您打开过滤器（某些行被隐藏）并尝试向下填充（拖动）公式，您将看到类似的结果，因为隐藏的行没有被填充，但它们确实会影响（相对）引用在公式。另一方面，如果您手动复制并粘贴到过滤范围中，则数据将粘贴到隐藏行中（如您所愿）。

似乎作为自动过滤器范围一部分的任何引用范围实际上都是不连续的*。使用 Range.Address 并不总是揭示这一点，循环 Range.Areas 也不会。如果我们修改您的示例，我们可以看到“真正的”错误在哪里：

```
Dim r1 as range
Dim r2 as range

Set r1 = Sheet1.Range("A1:B5") 'some numbers in a range
Set r2 = Sheet2.Range("A2:B6") 'same-size range underneath a filtered header

r1.Copy Destination:=r2 
```

它在所有行都可见时起作用。当 Sheet2 上的过滤器创建隐藏行时，结果是“运行时错误 '1004': ...复制区域和粘贴区域的大小和形状不同。” 另一方面，使用“手动”/剪贴板方法适用于隐藏行：

```
r1.Copy    
r2.PasteSpecial (xlPasteValues) 
```

由于将数组分配给一个范围会绕过剪贴板（如在第一个块中），我们应该收到一个错误（而不是你最终得到错误的结果）。

我知道的唯一解决方案是遍历范围并为每个单元格分配一个值：

```
For i = 1 to LastRow
  For j = 1 to LastCol
    Sheet1.Cells(i,j).Value = myArr(i,j)
  Next
Next 
```

或（更好）删除自动过滤器，将数组分配给范围，然后重新应用过滤器。

*从技术上讲，它是连续的，因此最好说该范围由多个范围/区域组成，尽管使用 .Address 并不表示这一点，并且当您尝试遍历 Range.Areas 时只有一个区域

# cocoa-touch - CCLayer 子类上的点击检测问题

> ID：10159090
> 
> 赞同：1
> 
> 时间：2012-04-15T02:33:53.477
> 
> 标签：cocoa-touch, cocos2d-iphone, subclass, cclayer

我有一个处理触摸事件的`CCLayer`子类：`MyLayer`

```
(BOOL) ccTouchBegan:(UITouch *) touch withEvent:(UIEvent *) event 
```

`MyLayer`我这样设置实例的内容大小：

```
`myLayer.contentSize = CGSizeMake(30.0, 30.0);` 
```

然后我将`MyLayer`实例添加为`ParentLayer`. 出于某种原因，我可以点击屏幕上的**任何位置**`MyLayer`，并且一个实例会检测到点击。我只想检测可见部分/内容大小的点击。**我怎样才能做到这一点？**

这些`MyLayer`实例是否以某种方式从其他地方继承了“可点击区域”？我已经验证了`contentSize`刚刚点击的实例的`(30, 30)`符合预期。也许 contentSize 不是指定`CCLayer`子类的可点击区域的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T02:47:18.413

当在特定 CCLayer 上启用触摸时，它会接收窗口中的所有触摸事件。话虽如此，如果有多个层，所有层都会收到相同的触摸。

为了缓解这种情况，从 UITouch 中获取位置，将其转​​换为 Cocos2d 坐标，然后检查它是否在您关注的图层的范围内。

这是一些可以使用的代码：

```
CCLayer * ccl = [[CCLayer alloc] init];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector] convertToGL:location];
if (CGRectContainsPoint(CGRectMake(ccl.position.x - ccl.contentSize.width/2, ccl.position.y - ccl.contentSize.height/2, ccl.contentSize.width, ccl.contentSize.height), location)) {
   //continue from there...
} 
```

# php - 取消选中先前选中的复选框时删除行

> ID：10159092
> 
> 赞同：2
> 
> 时间：2012-04-15T02:34:05.593
> 
> 标签：php, html, mysql, forms, checkbox

我有一个名为related_products 的表，

`products_id`主要产品在哪里 。

并由`related_products_ids`与主要产品相关的产品 ID 组成。

```
--------------------------------------------
|   products_id   |   related_products_ids |
| -----------------------------------------
|    1            |   2                 |
| -----------------------------------------
|    1            |   4                 |
| -----------------------------------------
|    1            |   3                 |
------------------------------------------- 
```

我有复选框，

```
<input value="2" type="checkbox" name="rp_product[]" id="in-category2"> Microsoft IntelliMouse Pro 2
<input value="3" type="checkbox" name="rp_product[]" id="in-category3"> Microsoft IntelliMouse Pro 3
<input value="4" type="checkbox" name="rp_product[]" id="in-category3"> Microsoft IntelliMouse Pro 4 
```

复选框由php生成，

```
<?php
echo '<ul id="categorychecklist" class="list:category categorychecklist form-no-clear">';
  global $wpdb;
  $sql = "SELECT related_products_ids FROM ".TABLE_RELATED_PRODUCTS." where products_id = '" . (int)$HTTP_GET_VARS['pID']."'";
  $result = mysql_query($sql);
  $rps = array();
   while($row = mysql_fetch_assoc($result)) {
   $rps[]=$row["related_products_ids"];     
   }
$rp_sql = "select products_id, products_name from ".TABLE_PRODUCTS_DESCRIPTION." where products_id !='" . (int)$HTTP_GET_VARS['pID']."' order by products_name";
  $rp_1 = mysql_query($rp_sql);
  while($rp_2 = mysql_fetch_array($rp_1)) {
    $checked = '';
    if (in_array($rp_2['products_id'], $rps)) $checked = " checked";
    echo "<li id=\"category-".$rp_2['products_id']."\" class=\"popular-category\"><label class=\"selectit\"><input value=\"".$rp_2['products_id']."\" type=\"checkbox\" name=\"rp_product[]\" class=\"rp_item\"" . $checked . "> <span>".$rp_2['products_name']."</span></label></li>";
  }
mysql_free_result($rp_1);
echo '</ul></div></div>';
?> 
```

我使用此代码将选中的复选框保存到`related_products`表中，

```
for ($i=0; $i<count($_POST['rp_product']); $i++)
 {
  $check_val1 .= $_POST['rp_product'][$i] .","; //gather data
 }
$check_val = trim($check_val1, ',');  //clean last ,
unset($check_val1); //flush

$insert_rp_ids1 = explode(',', $check_val);

foreach($insert_rp_ids1 as $id){ 
   $rps_each2 = array('products_id' => $products_id, 'related_products_ids' => $id);
   $wpdb->insert(TABLE_RELATED_PRODUCTS, $rps_each2);
} 
```

我想要的是在`related_products_ids`取消选择先前选择的复选框时删除列下的特定ID。

假设我正在编辑 products_id 所在的帖子`1`以及`related_products_ids`它的所在位置`2, 3 and 4`.. 我取消选中了值所在的复选框`3`（在 上`related_products_ids`），在点击保存按钮后，将删除`3`上的值，`related_products_ids`以便当前行现在是`2 and 4`。怎么做？我无法思考并找到解决方案。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:56:49.540

```
<script type="text/javascript">
var home = "http://www.mysite.com/";
function performAction(url) {
    document.getElementById("actionFrame").src = (home+url)
}
</script>

<iframe id="actionFrame" width=1 height=1 frameborder=0> </iframe>

<input type="checkbox" onClick="javascript:performAction('index.php?check=1&action=del');" /> Delete row
<input type="checkbox" onClick="javascript:performAction('index.php?check=2&action=del');" /> Delete row 
```

编写页面时，所有变量都应该用 PHP 编写，例如：

```
for ($i=0; $i<sizeof($some_array); $i++) {
    $input = "<input type=\"checkbox\""
           . "onClick=\"javascript:performAction('index.php?check=".($i+1)."&action=del');\" />";
    echo $input;
} 
```

PHP 页面将有这样的东西来执行删除：

```
$action = $_GET["action"];
$check = $_GET["check"];

switch ($action) {
    case "del":
        delRow($check);
        break;
}

require_once("database.php"); #file which creates the PDO object $db

function delRow($check) {
    global $db; //because $db is out of scope until we do this
    $sql = "DELETE FROM tbl_name WHERE col_id='?';";
    $query = $db->prepare($sql);
    $query->bindParam((int)$check);
    $query->execute();
    $rows = $query->rowCount();
    echo "$rows were deleted.";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T10:31:21.397

这里的逻辑是，在编辑操作时，所有相关产品都会重新填充到数据库中。如果它们被重新填充，那么最简单的方法是之前将它们删除。

为了实现这一点，在提交时，就在您向`related_products`表中插入任何内容之前，删除所有`products_id`等于的行`$products_id`。在代码的两行之间执行此操作：

```
$insert_rp_ids1 = explode(',', $check_val); 
```

和

```
foreach($insert_rp_ids1 as $id){ 
```

此外，您可以考虑使用事务，或者，如果您的表不支持，请检查删除语句是否成功。

# mips - MIPS 打印编号随机

> ID：10159102
> 
> 赞同：-4
> 
> 时间：2012-04-15T02:37:08.507
> 
> 标签：mips

我需要使用 MIPS 编写一个简单的记忆游戏。游戏开始时在屏幕上随机打印一个 10-99 之间的数字，然后要求用户输入准确的数字。如何使用 MIPS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:14:14.113

SO上已经有一些类似的问题：

[使用系统调用生成随机数](https://stackoverflow.com/questions/8394537/random-numbers-in-mips)

[MIPS 汇编 - 随机整数范围](https://stackoverflow.com/questions/4103766/mips-assembly-random-integer-range)

看看那些，你的教科书，可能还有一些在线教程。最重要的是：自己试一试；只有这样你才能做得更好。

# android - 在 android/linux (x86) libc.so 与 libc.so.6 上链接到 libc

> ID：10159107
> 
> 赞同：0
> 
> 时间：2012-04-15T02:38:22.407
> 
> 标签：android, x86, libc

我正在尝试为 android 设备构建，但我没有真正的 SDK/NDK。与通常具有 libc.so 的 Android 设备不同，此设备具有符号链接 libc.so.6 --> libc-2.7.so。如果我使用常规的 android NDK-x86 构建我的共享库（由 readelf -d 报告）从设备上不存在的 libc.so 导入。

那个编号是关于什么的，如果我简单地说 -lc，gcc/ld 怎么知道链接到 libc.so.6？

更具体地说，该设备是一个 android 谷歌电视盒（Logitech revue），它似乎与普通的 android 有点不同，我猜它不使用延迟仿生并且使用普通的 libc，普通的 pthread，它似乎是更接近普通的linux。

那么，我可以使用常规的 android-x86 工具链为具有不同 libc 的谷歌电视设备生成代码吗？它怎么知道链接到 libc.so.6 （所以我可以告诉它链接到什么库？）。我试图在链接时简单地对这些库进行硬编码，但随后在运行时遇到了一些问题（缺少符号，因为它使用了不兼容的标头和库）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:31:47.587

> 那个编号是关于什么的

[您可以在此处](http://docs.oracle.com/cd/E19082-01/819-0690/chapter5-5/index.html)阅读有关外部库版本控制的信息。

> 如果我简单地说 -lc，gcc/ld 怎么知道链接到 libc.so.6？

在带有 glibc 的 Linux 上，`libc.so`它实际上是一个链接器脚本，包含以下内容：

```
GROUP ( /lib/libc.so.6 /usr/lib/libc_nonshared.a 
         AS_NEEDED ( /lib/ld-linux-x86-64.so.2 ) ) 
```

> 那么，我可以使用常规的 android-x86 工具链为具有不同 libc 的谷歌电视设备生成代码吗？

不，你需要一个*交叉*编译器。交叉编译器是在一个操作系统（这里是常规 Linux）上运行的，但会创建一个可以在其他地方运行的可执行文件（在 Google V 上）。

最好的办法是下载适用于 GoogleTV 的 SDK，其中包括这样的交叉编译器以及所需的库。

# c++ - 字符串在 find_last_of() 和 substr() 之后变为空？

> ID：10159108
> 
> 赞同：0
> 
> 时间：2012-04-15T02:38:29.213
> 
> 标签：c++

自学 C++，我知道我遗漏了一些关键的东西，但我无法终生弄清楚它是什么。

原谅一大段代码，我很想把它精简到关键元素，但我想如果我保持原样，你们可能会对我的编码风格有其他教育性的批评......

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
#include <fstream>

using namespace std;

//  main routine
int main(int argc, char *argv[]) {
    // will store filetype here for later
    string filetype = "";
    string filename;

    // if no arguments, die.
    if (argc < 2) {
        cout << "ERROR: Nothing to do." << endl;
        return 1;
    }

    // if more than one argument, die.
    else if (argc > 2) {
        // TODO: support for multiple files being checked would go here.
        cout << "ERROR: Too many arguments." << endl;
        return 1;
    }

    // otherwise, check filetype
    else {
        string filename = argv[1];
        cout << "Filename: " << filename << endl;
        //searching from the end, find the extension of the filename
        int dot = filename.find_last_of('.');
        if (dot == -1){
            // TODO: Add support for filenames with no extension
            cout << "ERROR: Filename with no extension." << endl;
            return 1;
        }
        string extension = filename.substr(dot); 
        if (extension == ".htm" || extension == ".html"){
            filetype = "html";
        }
        else if (extension == ".c"){
            filetype = "c";
        }
        else if (extension == ".c++" || extension == ".cpp") {
            filetype = "cpp";
        }
        else {
            cout << "ERROR: unsupported file extension" << endl;
            // TODO: try to guess filetype from file headers here
        }
    }

    cout << "Determined filetype: " << filetype << endl;
    cout << "Filename: " << filename << endl;

    return 0;
}
                                            // All done :] 
```

我遇到的问题很神秘。我将传递的参数放入一个字符串中，如下所示：

```
string filename = argv[1]; 
```

然后搜索它的扩展名，从头开始，一直到头：

```
int dot = filename.find_last_of('.');
string extension = filename.substr(dot); 
```

这一切都按预期工作，但是之后，当我尝试输出文件名时，它神秘地为空？我尝试使用 cout 进行调试。当我在搜索之前打印出字符串时，它会正确打印。之后，什么都没有打印。像这样：

```
$ g++ test.cpp -o test.out; ./test.out foo.html
Filename: foo.html
Determined filetype: html
Filename: 
```

我记得过去关于迭代器的一些事情，并尝试使用`filename.begin()`它来重置它，但这没有任何作用。有人可以阐明这个令人费解的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T02:44:42.947

您在此处声明了第二个名为 filename 的变量，之后是`else`：

```
string filename = argv[1]; 
```

当您到达这里时，这超出了范围：

```
 cout << "Filename: " << filename << endl; 
```

您现在正在打印您声明的第一个变量的内容`filename`，就在`main`.

# events - Backbone：触发函数的工作原理

> ID：10159111
> 
> 赞同：4
> 
> 时间：2012-04-15T02:39:45.407
> 
> 标签：events, backbone.js, callback

我正在尝试通过查看我认识的人与骨干文档一起制作的应用程序来学习 Backbone。该应用程序有一个 Bucket 模型和一个 Company 模型（即您将公司放入桶中）。有一点我不清楚，即它是如何使用该`trigger`方法的。

骨干文档有这样的说法`trigger`：

### 扳机`object.trigger(event, [*args])`

> 触发给定事件或以空格分隔的事件列表的回调。触发的后续参数将传递给事件回调。

在我正在查看的代码中，`trigger`这样调用：

```
this.trigger("add:companies", Companies.get(companyId)); 
```

**两个问题：**

1.  我`event`假设是`add`一家公司，但在下面的代码中，这实际上是在什么时候发生的？是什么时候`this.set({ "companies": arr }, { silent: true });`运行还是什么时候`this.save();`运行（或其他）？

2.  如果`Companies.get(companyId)`是可选参数，它实际传递给什么函数？

**摘自原始代码**

```
window.Bucket = Backbone.Model.extend({
  defaults: function() {
    return {
      companies: []
    };
  },

  addCompany: function(companyId) {
    var arr = this.get("companies");
    arr.push(companyId);
    this.set({ "companies": arr }, { silent: true });
    this.save();
    this.trigger("add:companies", Companies.get(companyId));
  },

  // ... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T02:45:31.987

存储桶的`companies`属性正在`addCompany`您描述的方法中更新。您的示例的注释版本显示了正在发生的事情：

```
 // 1\. get array of companies currently included in the bucket:
  var arr = this.get("companies");

  // 2\. add a company to the array
  arr.push(companyId);

  // 3\. replace the bucket's company list with the array,
  //    suppressing validation and events:
  this.set({"companies": arr}, {silent: true});

  // 4\. save the bucket:
  this.save(); 
```

`trigger`实际上并没有影响模型——它只是让应用程序的其他部分知道已添加公司的一种方式。[`on`](http://documentcloud.github.com/backbone/#Events-on)您可以使用铲斗模型转身并在其他地方捕捉它：

```
var bucket = new window.Bucket();

// do stuff

bucket.on('add:companies', function(company) {
  alert('a new company has been added to the bucket.');
}); 
```

# google-maps-api-3 - 获取路线问题后的 Google Maps API 渲染

> ID：10159112
> 
> 赞同：0
> 
> 时间：2012-04-15T02:40:00.000
> 
> 标签：google-maps-api-3

我有谷歌地图的方向，但是如何在同一张地图上呈现它（从一个起点到目的地的蓝线），我的代码是一个简单的 html，如下所示：[http:// pastebin.com/60Rz8a5H](http://pastebin.com/60Rz8a5H) 我已经按照谷歌给出的关于 v3 API 的 tut 进行操作，但没有运气。我是这方面的菜鸟，所以我不确定问题出在哪里。

托塔斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:40:12.340

`directionsService`您已经省略了和的初始化`DirectionsDisplay`

# javascript - Jquery .load 和 POST 数据

> ID：10159113
> 
> 赞同：3
> 
> 时间：2012-04-15T02:40:48.690
> 
> 标签：javascript, jquery, html, asp-classic, web

这真的很令人沮丧，我将不胜感激。我有一个 div，称为评论和该 div 内的表单。我想要做的是将表单发布到当前页面并将其加载到 div 内而不重新加载整个内容。这是我当前的代码：

```
<div id="comments">
<form action="#" method="post" onsubmit="return false;" >
<input type="hidden" name="txtname" value="test">
<textarea id="wysiwyg" name="wysiwyg" rows="5" cols="50"></textarea>
<input type="submit" name="post" id="post" value="Submit">
</form>
<script type="text/javascript">
EDIT: Read edit below for current code
</script>        
</div> 
```

当我提交时，警报会触发，但页面不会加载。如果我按如下方式进行事件，它工作正常：

```
$("#comments").load("comments.asp"); 
```

它不喜欢发布数据。我以前使用过 .load 但从未发布过数据。我从这些相同的论坛获得了上述代码。

老实说，我不确定“name”和“tel”的用途——在处理代码时我是指那些变量还是表单变量名？这是 ASP 经典。

上面的代码有什么问题，我怎样才能让它通过 POST 从论坛发送数据？谢谢！

编辑：我现在使用以下代码：

```
$("#post").submit(function(event){
    var $form = $(this),
        $inputs = $form.find("input, select, button, textarea"),
        serializedData = $form.serialize();
    $inputs.attr("disabled", "disabled");

    $.ajax({
        url: "/comments.asp",
        type: "post",
        data: serializedData,
        success: function(response, textStatus, jqXHR){
            console.log("comment posted");
        },
        error: function(jqXHR, textStatus, errorThrown){
            console.log(

                textStatus, errorThrown
            );
        },
        complete: function(){
            // enable the inputs
            $inputs.removeAttr("disabled");
        }
    });

    event.preventDefault();
}); 
```

现在它正在正确处理表单......但是它转到了comments.asp。如何使所有动作发生在某个 div 中（评论 div？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:29:18.313

在我看来，您正在以一种不完全连贯的方式混合一堆不同的技术。

$.post 是 $.ajax 的缩短版本（[请参见此处](http://api.jquery.com/jQuery.post/)）。

$.load 接受一个 url 并将其粘贴到一个`<div>`或其他 DOM 元素中（[参见此处](http://api.jquery.com/load/)）。

如果我理解正确（我可能不会！），您并不是真的想要加载表单，而是将值放入表单字段中。$.load 是一种奇怪的方法。（它可能有效，但我用另一种方式。）

如果您使用 $(#...).submit，您还可以在表单中省略一大堆内容。以下应该可以正常工作。

```
<form id="form_id">
...
<input type="submit" value="Submit">
</form> 
```

我的方法是：（1）有一个硬编码的 HTML 表单（或通过 AJAX 构建），（2）使用 $.post（或 $.ajax）从数据库（或任何地方）获取值，（3）粘贴值使用 .val() （或等效的 - 任何适合输入类型的内容）和该输入的 DOM id 进入表单，然后（4）使用 .submit （以类似于您的方式）。您将需要按照其他人的建议添加 preventDefault 。

您还使用 #post 作为 DOM id 来搅浑水。你真的想给表单本身的ID，然后使用 $(#form_id).submit(... 我现在无法测试它，但是`submit`在输入字段上可能会导致一些悲伤。[官方示例](http://api.jquery.com/submit/)附上.submit 到表单 id。

我也不确定`<div>`with id 'comments' 真的有多大作用。我有一个像您的“评论”一样的容器 ID，但那是因为我通过 AJAX 构建表单并将它们粘贴到容器中。如果您不需要这样做，则整个过程不需要 id 'comments'。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T02:49:51.907

您的文本框元素没有带有 value 的 id `txtname`。但是在您的脚本中，您尝试使用 using 访问`#`（应该使用 id 上下文）。因此，在您的输入框中添加一个 id 元素。

```
<input type="hidden" name="txtname" id="txtname"  value="test"> 
```

正如 expascarello 所说，您需要停止提交按钮的默认行为。否则它将执行正常的表单发布，因此您将无法感受到 ajax 效果。采用`preventDefault`

```
$(function(){
   $("#post").click(function(e) {
     e.preventDefault()
     alert("clicked");
        $("#comments").load("comments.asp", { 
         'name': $("#wysiwyg").val(), 
         'tel': $("#txtname").val()
        });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T02:44:43.803

您没有取消单击按钮，因此表单正在提交并重置页面。

```
$("#post").click(function(evt) {
    evt.preventDefault();
    ... 
```

[jQuery event.preventDefault()](http://api.jquery.com/event.preventDefault/)

load() 方法执行的是 get 而不是 post。

# django - Django | 当我应该在 hostgator 上使用 fcgi 获得 404 或 500 时出现未处理的异常

> ID：10159114
> 
> 赞同：0
> 
> 时间：2012-04-15T02:41:00.297
> 
> 标签：django, fastcgi

我在hostgator上托管并为我的django应用程序使用fcgi，它是一个共享主机，所以我对flup和fcgi没有太多选择。当 Debug = False 我得到一个 fcgi Unhandled Exception 页面而不是 Apache 404 错误，即使使用 Debug = True 我会从 django/python 得到一个 404。

我是否必须在 fcgi 文件中捕获 python 404 异常，还是应该将它们冒泡到 Apache？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:36:32.973

如果您的 DEBUG 为 False 并且您没有 404 的模板，则 404 会产生 500 Internal server error。确保您的模板目录中有 404.html 和 500.html。还可以查看您的管理员电子邮件中的错误日志。

# iphone - ARC 应用程序中的 UIAlertView

> ID：10159115
> 
> 赞同：3
> 
> 时间：2012-04-15T02:41:03.200
> 
> 标签：iphone, automatic-ref-counting

我有一个带有一个按钮的 iphone 示例应用程序。点击它会调用代码：

```
UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle:@"test"
                          message:@"test"
                          delegate:self
                          cancelButtonTitle:@"Ok"
                          otherButtonTitles: nil];
[alert show]; 
```

应用程序已启用 ARC。

问题是，如果我单击警报中的确定按钮，应用程序会因 EXC_BAD_ADDRESS 崩溃 - 可能是因为警报已被弧删除。

有什么推荐的方法来解决这个问题？不向视图控制器添加属性

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:59:37.293

UIAlertView 的委托属性被声明为弱引用（由 assign 关键字指示）。这意味着 ARC 不会增加保留计数，您需要保留对委托对象的引用（无论是自身还是单独的对象）。此参考应在 UIAlertView 的整个生命周期内保持不变。

```
@property(nonatomic,assign) id /*<UIAlertViewDelegate>*/ delegate;    // weak reference 
```

我认为这样做的原因是为了防止循环和释放失败，因为在常见情况下，创建 UIAlertView 的对象将保留对它的引用，并且它是委托，因此关闭循环并阻止释放。

这可能是代表的常见模式，但直到我遇到完全相同的问题时我才意识到。我在启用僵尸检测的模拟器中运行，它清楚地指示了引用计数，我看到它没有被 UIAlertView 保留。那是我检查头文件的时候。

这个问题的答案提供了一些关于系统类的委托和assign关键字的附加信息。 [iPhone ARC 发行说明 - 在系统类代表上解除分配？](https://stackoverflow.com/questions/7934615/iphone-arc-release-notes-dealloc-on-system-classes-delegates?rq=1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T05:55:32.193

我的猜测是你没有实现[UIAlertViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)方法或者 self 已经超出范围。

如果您不关心在有人关闭警报框时收到警报，请将代理更改为 nil。例如

```
UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle:@"test"
                          message:@"test"
                          delegate:nil
                          cancelButtonTitle:@"Ok"
                          otherButtonTitles: nil];
[alert show]; 
```

# asp.net - 有没有办法将 ASP.NET 应用程序指向引用而不是将它们复制到 Bin 文件夹？

> ID：10159123
> 
> 赞同：1
> 
> 时间：2012-04-15T02:44:44.107
> 
> 标签：asp.net, reference, web-config

我们有一堆示例 ASP.NET 应用程序。我不想在每个示例中将 DLL 复制到 Bin 文件夹，因为这样所有文件都必须在更改时更新。

有没有办法将 ASP.NET 应用程序指向引用，例如可以使用表单或命令行应用程序完成？

**更新：**为了回答下面的问题，让我更好地解释一下这里的情况。我们有一个商业产品，它是一组 DLL。我们提供了许多使用它的示例应用程序，包括几个 ASP.NET 应用程序。所有这些，我们的产品 DLL 和我们的示例源，都安装在用户的计算机上。

当他们编译其中一个示例时，我们希望该示例使用与它一起安装的 DLL 版本。安装过程在 GAC 中作为默认选项，但用户可以取消选中是否不希望 GAC 中的 DLL，在这种情况下，我们必须访问安装它们的 DLL，或者将它们复制到每个 Bin 目录.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T03:01:43.623

要添加引用，请右键单击 Visual Studio 中的 bin 文件夹，您将在那里找到添加引用选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T04:08:45.003

问题很清楚，但背景不是。

有几个应用程序都使用相同的应用程序 dll 对我来说毫无意义。它只是所有应用程序使用的库吗？

有一些选项取决于你有什么和你需要什么：

**1.直接添加引用**

如果你真的只是想添加一个引用，在你的 VS 项目中右键单击“引用”并选择“添加引用”。选择参考并单击确定。之后，右键单击添加的引用并选择“属性”并将“本地复制”设置为 false，因此它不会复制到 bin 文件夹中。

也许选项名称有点不同，但我现在没有英文 VS。应该几乎是你必须做的。

***编辑***

在此窗口中，将“本地副本”设置为“false”（此处显示为“Lokale Kopie”，抱歉，它是德语）。

![设置本地副本](../Images/bfc7efee609d0e9c64e9e80e502844fe.png)

**2\. 将dll放入GAC**

如果您在同一台服务器上有几个应用程序的共享代码库，您可以考虑将该库放入[GAC](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)中。

**3\. 源代码控制问题**

正如 IrishChieftain 中提到的，您可能会使用源代码控制并且不想每次都更新 bin 文件夹中的 dll。解决方案就是忽略源代码管理中的 bin 文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T04:12:33.257

您可以使用项目的 References 节点上的上下文菜单添加您想要的任何引用： ![在此处输入图像描述](../Images/c0df79c218da571c18c35682e30ca45f.png)

在“添加参考”对话框中，单击“浏览”选项卡，您可以浏览并添加您需要的任何外部参考。对于公共程序集，我们通常将它们放在文件系统上的公共位置，然后在需要时从该位置引用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T04:19:06.583

在某些情况下，您不想在设计时引用某些程序集。您可以根据逻辑在运行时使用 AppDomain.AssemblyResolve 事件处理程序加载它们。如果您有可以通过抽象级别引用的程序集并且您不想直接引用，则可以使用以下模式省略它们并在运行时执行一些算法来查找程序集并将其添加到 AppDomain。

这是我放入 global.asax, Application_Start 处理程序的片段：

```
public class Global : System.Web.HttpApplication
{

    protected void Application_Start(object sender, EventArgs e)
    {
        AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(CurrentDomain_AssemblyResolve);
    }

    System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
    {
        // use this space to add logic to find your assemblies

        return null; // will throw a Dependency-related exception
    } 
```

让我知道是否有任何问题，或者我是否错过了您的问题的重点。

-G

# java - 映射允许 putIfAbsent 在键已经存在时不创建值

> ID：10159124
> 
> 赞同：2
> 
> 时间：2012-04-15T02:45:24.880
> 
> 标签：java, concurrency, map, garbage

我想使用一个相当于`ConcurrentMap`（我想要*putIfAbsent*方法的等价物）的映射，但这不会强迫我事先创建对象。

例如，当我这样做时：

```
m.putIfAbsent( key, new CyclingArray() ); 
```

我最终可能会创建一个新的*CyclingArray*（不管是什么）对象。

当然，我意识到我可以锁定整个地图，但这将打败`ConcurrentMap`.

可以像下面这样的东西在概念上起作用吗？

```
 m.putIfAbsent( key, new Callback<CyclingArray>() {
     @Override
     public CyclingArray provide() {
       return new CyclingArray();  // only called if the key wasn't already present
     }         
   } 
```

您是否知道任何提供地图的图书馆：

1.  提供一个类似于 ConcurrentMap 提供的“接口”，包括一个`putIfAbsent`方法。
2.  只锁定我们将要使用的段（例如，就像`ConcurrentHashMap`实现一样）
3.  允许选择性地创建值，当且仅当密钥不存在并因此躲避无用的垃圾生成时。
4.  不会强迫我先使用*containsKey*然后使用*putIfAbsent*因为这也以某种方式违背了*putIfAbsent*的目的。

请注意，我**不是**在问上面的例子是否可以用 a 完成`ConcurrentMap`（它不能 AFAIK）。

我正在考虑使用回调版本扩展`ConcurrentHashMap`和重载*putIfAbsent*，但遗憾的是在`ConcurrentHashMap`内部使用了最终的*Segment*类。

在重新发明轮子之前，我想知道是否有任何地图已经提供了类似的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T03:59:01.510

这是您正在寻找的一个常见用例，称为 memoization。我会看看[MapMaker](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/MapMaker.html)

您将能够创建一个 computingMap 并将您的创建函数放在那里：

```
 ConcurrentMap<Key, CyclingArray> graphs = new MapMaker()
       .concurrencyLevel(32)
       .makeComputingMap(
           new Function<Key, CyclingArray>() {
                public CyclingArray  apply(Key key) {
                    return new CyclingArray();  // only called if the key wasn't already    
                }              
           }); 
```

这里只有在不存在`Function`时才会调用`Key`

而且我确实知道 Java 的未来计划有一个计算地图类型接口将随标准 Java 一起提供，不幸的是，此时您将不得不委托给 google-collections。

# vba - 这段 VBA 代码有什么问题？

> ID：10159126
> 
> 赞同：6
> 
> 时间：2012-04-15T02:46:23.507
> 
> 标签：vba, ms-word

```
 If TextBox1.Text = "" Or TextBox1.Text = "False" Then
        msgbox("Filename invalid. Try again.",vbOKOnly) 
```

我收到“编译器错误：预期：=”错误消息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-15T02:50:09.790

这是因为您只能在 VBA 中调用带括号或不带括号的`Sub`s 。`Call`所以改成：

```
MsgBox "Filename invalid. Try again.", vbOKOnly 
```

或者，如果你更喜欢这种风格：

```
Call MsgBox("Filename invalid. Try again.", vbOKOnly) 
```

（并且您收到错误的原因是因为它希望您将结果分配给一个变量，因此它需要一个`=`.）

# javascript - document.head.appendChild 或 document.createElement 在 IE 中不起作用

> ID：10159130
> 
> 赞同：18
> 
> 时间：2012-04-15T02:47:20.690
> 
> 标签：javascript, internet-explorer

我在我的 html 文档的头部运行了一个脚本，它适用于除 Internet Explorer 之外的所有浏览器。在 Opera、Safari、Chrome、Firefox、Internet Explorer 中测试。

我的代码如下：

```
<html>
  <head>
    <script type = "text/javascript">
      var date = new Date();
      var month = date.getMonth() + 1;
      if (month >= 3 && month <= 5)
      {
        var NewScript = document.createElement("script");
        NewScript.type = "text/javascript";
        NewScript.src = "source1.js";
        var NewStyles = document.createElement("link");
        NewStyles.rel = "stylesheet";
        NewStyles.type = "text/css";
        NewStyles.href = "css1.css";
        document.head.appendChild(NewScript);
        document.head.appendChild(NewStyles);
      }
      else
      {
        var NewScript = document.createElement("script");
        NewScript.type = "text/javascript";
        NewScript.src = "source2.js";
        var NewStyles = document.createElement("link");
        NewStyles.rel = "stylesheet";
        NewStyles.type = "text/css";
        NewStyles.href = "css2.css";
        document.head.appendChild(NewScript);
        document.head.appendChild(NewStyles);
      }
    </script>
  </head>
  <body>
  <!-- MY CONTENT GOES HERE -->
  </body>
</html> 
```

我不确定是不是在 IE 中不起作用的 document.createElement 或 document.head.appendChild。如前所述，它适用于我测试过的所有其他浏览器。非常感谢您提供帮助，因为我将继续自己寻找问题/解决方案。谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-15T02:53:28.380

尝试`document.getElementsByTagName('head')[0]`代替`document.head`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-03T16:35:07.250

尝试`document.head.appendChild`代替`append`

# c++ - '*' 标记之前的预期主表达式？

> ID：10159131
> 
> 赞同：0
> 
> 时间：2012-04-15T02:48:02.717
> 
> 标签：c++, sql, qt

我似乎无法弄清楚这一点！我不断收到一条错误消息，上面写着“'*' 标记之前的预期主表达式”，没有其他提示。它发生在看起来像的线上

```
todoList->addItem(QListWidgetItem *taskStr->append(taskQry.value(1).toString())); 
```

这是什么意思，从我通过搜索发现它似乎是一个语法错误，但有人可以向我解释为什么它是一个语法错误吗？有没有更好的方法将字符串附加到列表中？

```
todoList = new QListWidget(todoGroupBox);

QSqlDatabase localdb = QSqlDatabase::database("TestERP");
if (localdb.open())
{
    QSqlQuery taskQry;

    if (taskQry.exec("SELECT * FROM erp_data.todo_lists;"))
    {
        if (taskQry.value(1).toString() == "")
        {
            QMessageBox::information(this,"No Connection","Nothing in the Manufacturer Database\n"
                                     "\nError: " + db.lastError().text());
        }
        else
        {
            while (taskQry.next())
            {
                QString *taskStr = new QString;
                todoList->addItem(QListWidgetItem *taskStr->append(taskQry.value(1).toString()));
            }
        }
    }
    else
    {
        QMessageBox::information(new QWidget,"Not Connected","Connection to the Database could not be Established\n"
                                 "\nError: " + db.lastError().text());
    }
}
else
{
    QMessageBox::information(new QWidget,"Not Connected","Connection to the Database could not be Established\n"
                             "\nError: " + db.lastError().text());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:53:02.687

我不确定您要做什么。但这将使它编译：

```
todoList->addItem(taskQry.value(1).toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:39:24.470

可能你需要改变

```
while (taskQry.next())
        {
            QString *taskStr = new QString;
            todoList->addItem(QListWidgetItem *taskStr->append(taskQry.value(1).toString()));
        } 
```

至

```
while (taskQry.next())
        {   
            // The QListWidgetItem is added automatically to todoList
            new QListWidgetItem(taskQry.value(1).toString(), todoList );
        } 
```

# c - 仅在 Solarix Unix Box 上运行时出现总线错误

> ID：10159138
> 
> 赞同：0
> 
> 时间：2012-04-15T02:49:19.847
> 
> 标签：c, unix, sun, sparc, bus-error

它在我的 Linux 机器（Ubuntu）以及 x86 和 x64 的其他 linux 机器上编译并运行，但在 SunOS Generic_142900-02 sun4u sparc unix 机器上，它在线崩溃

```
matrix->col_head[i] = col_h; 
```

出现总线错误，另外，当我用 GCC -G 编译它时，GDB 找不到任何调试符号

这是代码：

```
typedef unsigned short short_u;
typedef struct node{
  short_u         row;
  short_u         col;
  int             value;
  struct node*    row_l;
  struct node*    col_l;
}node_t;

typedef struct matrix{
  short_u     N;
  node_t**    row_head;
  node_t**    col_head;
}matrix_t;

matrix_t* init_matrix(int N){
  matrix_t* matrix = malloc(sizeof(matrix_t*));
  matrix->row_head = malloc(sizeof(node_t*)*N);
  matrix->col_head = malloc(sizeof(node_t*)*N);
  matrix->N = N;
  for (int i = 0; i < N; i++){
      /* row */
      node_t* row_h = malloc(sizeof(node_t*));
      row_h->col = 0;
      row_h->row = i+1;
      row_h->value = 0;
      row_h->col_l = row_h;
      if (i != 0)
          matrix->row_head[i-1]->row_l = row_h;
      matrix->row_head[i] = row_h;
      /* col */
      node_t* col_h = malloc(sizeof(node_t*));
      col_h->col = i+1;
      col_h->row = 0;
      col_h->value = 0;
      col_h->row_l = col_h;
      if (i != 0)
          matrix->col_head[i-1]->col_l = col_h;
      matrix->col_head[i] = col_h;
  }
  matrix->row_head[N-1]->row_l = matrix->row_head[0];
  matrix->col_head[N-1]->col_l = matrix->col_head[0];

  return matrix;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:00:07.767

当你这样做

```
matrix_t* matrix = malloc(sizeof(matrix_t*)); 
```

您分配指向 a 的指针的空间`matrix_t`，这对于整个`matrix_t`. 您的总线错误可能是在 和 访问未分配内存的`matrix->row_head`结果`matrix->col_head`。

你重复这个错误

```
 node_t* row_h = malloc(sizeof(node_t*)); 
```

和

```
 node_t* col_h = malloc(sizeof(node_t*)); 
```

您没有在 Linux 机器上遇到段错误这一事实是一个令人高兴的意外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:42:40.673

`valgrind`您的代码在 Mac OS X下无法正常运行。

我将它包装成一个完整的程序，因此：

```
#include <stdlib.h>
#include <stdio.h>

typedef unsigned short short_u;
typedef struct node{
  short_u         row;
  short_u         col;
  int             value;
  struct node*    row_l;
  struct node*    col_l;
}node_t;

typedef struct matrix{
  short_u     N;
  node_t**    row_head;
  node_t**    col_head;
}matrix_t;

static matrix_t* init_matrix(int N){
  matrix_t* matrix = malloc(sizeof(matrix_t*));
  matrix->row_head = malloc(sizeof(node_t*)*N);
  matrix->col_head = malloc(sizeof(node_t*)*N);
  matrix->N = N;
  for (int i = 0; i < N; i++){
      /* row */
      node_t* row_h = malloc(sizeof(node_t*));
      row_h->col = 0;
      row_h->row = i+1;
      row_h->value = 0;
      row_h->col_l = row_h;
      if (i != 0)
          matrix->row_head[i-1]->row_l = row_h;
      matrix->row_head[i] = row_h;
      /* col */
      node_t* col_h = malloc(sizeof(node_t*));
      col_h->col = i+1;
      col_h->row = 0;
      col_h->value = 0;
      col_h->row_l = col_h;
      if (i != 0)
          matrix->col_head[i-1]->col_l = col_h;
      matrix->col_head[i] = col_h;
  }
  matrix->row_head[N-1]->row_l = matrix->row_head[0];
  matrix->col_head[N-1]->col_l = matrix->col_head[0];

  return matrix;
}

#if 0
static void free_matrix(matrix_t *matrix)
{
    for (int i = 0; i < matrix->N; i++)
    {
        free(matrix->row_head[i]);
        free(matrix->col_head[i]);
    }
    free(matrix->row_head);
    free(matrix->col_head);
    free(matrix);
}
#endif /* 0 */

int main(void)
{
    matrix_t *m = init_matrix(100);
    //free_matrix(m);
    return(0);
} 
```

它编译干净。它在 Mac OS X 10.7.3 上运行而不会真正崩溃。

### 输出自`valgrind`

但是，`valgrind`这样的抱怨（我调用了程序`xx`，来源是`xx.c`）：

```
==73807== Memcheck, a memory error detector
==73807== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==73807== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==73807== Command: ./xx
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000D11: init_matrix (xx.c:21)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005128 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000D2F: init_matrix (xx.c:22)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005130 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000D8A: init_matrix (xx.c:30)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005840 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000D5A: init_matrix (xx.c:26)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000DB7: init_matrix (xx.c:33)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005128 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000E0A: init_matrix (xx.c:39)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005888 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000DDA: init_matrix (xx.c:35)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000E37: init_matrix (xx.c:42)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005130 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000D9A: init_matrix (xx.c:32)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005128 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000DAF: init_matrix (xx.c:32)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005838 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000D5A: init_matrix (xx.c:26)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000E1A: init_matrix (xx.c:41)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005130 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000E2F: init_matrix (xx.c:41)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005890 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000DDA: init_matrix (xx.c:35)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000E64: init_matrix (xx.c:44)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005128 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000E79: init_matrix (xx.c:44)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005128 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000E80: init_matrix (xx.c:44)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100009618 is 0 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000D5A: init_matrix (xx.c:26)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000E88: init_matrix (xx.c:45)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005130 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid read of size 8
==73807==    at 0x100000E9D: init_matrix (xx.c:45)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100005130 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000CF2: init_matrix (xx.c:20)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== Invalid write of size 8
==73807==    at 0x100000EA4: init_matrix (xx.c:45)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807==  Address 0x100009670 is 8 bytes after a block of size 8 alloc'd
==73807==    at 0xB823: malloc (vg_replace_malloc.c:266)
==73807==    by 0x100000DDA: init_matrix (xx.c:35)
==73807==    by 0x100000EE3: main (xx.c:66)
==73807== 
==73807== 
==73807== HEAP SUMMARY:
==73807==     in use at exit: 5,303 bytes in 235 blocks
==73807==   total heap usage: 235 allocs, 0 frees, 5,303 bytes allocated
==73807== 
==73807== LEAK SUMMARY:
==73807==    definitely lost: 1,608 bytes in 3 blocks
==73807==    indirectly lost: 1,600 bytes in 200 blocks
==73807==      possibly lost: 0 bytes in 0 blocks
==73807==    still reachable: 2,095 bytes in 32 blocks
==73807==         suppressed: 0 bytes in 0 blocks
==73807== Rerun with --leak-check=full to see details of leaked memory
==73807== 
==73807== For counts of detected and suppressed errors, rerun with: -v
==73807== ERROR SUMMARY: 804 errors from 16 contexts (suppressed: 1 from 1) 
```

当我启用该`free_matrix()`功能时，我又遇到了一些错误，但我相信它们是`init_matrix()`. 然后我没有得到任何泄漏的内存（“仍然可以访问”的内存在系统库中；所有的运行`valgrind`在 Mac OS X 上都有大量的此类内存）。

### 修改后的代码

[George Skoptsov](https://stackoverflow.com/users/1257977/george-skoptsov)在他的[回答](https://stackoverflow.com/questions/10159138/bus-error-only-when-running-on-solarix-unix-box/10159187#10159187)中的诊断是准确的。此固定代码`free_matrix()`启用后，在`valgrind`. 注意成语的使用：

```
SomeType *variable = malloc(sizeof(*variable));
SomeType *arrayvar = malloc(sizeof(*arrayvar) * N); 
```

虽然一开始有点不舒服，但这些避免了你遇到的问题。我试图记住使用它们；我仍然在重新学习很久以前第一次学习的技术，以至于我正在遭受“很难教老狗新技巧”的痛苦。

```
#include <stdlib.h>
#include <stdio.h>

typedef unsigned short short_u;
typedef struct node{
  short_u         row;
  short_u         col;
  int             value;
  struct node*    row_l;
  struct node*    col_l;
}node_t;

typedef struct matrix{
  short_u     N;
  node_t**    row_head;
  node_t**    col_head;
}matrix_t;

static matrix_t* init_matrix(int N){
  matrix_t* matrix = malloc(sizeof(*matrix));
  matrix->row_head = malloc(sizeof(*matrix->row_head)*N);
  matrix->col_head = malloc(sizeof(*matrix->col_head)*N);
  matrix->N = N;
  for (int i = 0; i < N; i++){
      /* row */
      node_t* row_h = malloc(sizeof(*row_h));
      row_h->col = 0;
      row_h->row = i+1;
      row_h->value = 0;
      row_h->col_l = row_h;
      if (i != 0)
          matrix->row_head[i-1]->row_l = row_h;
      matrix->row_head[i] = row_h;
      /* col */
      node_t* col_h = malloc(sizeof(*col_h));
      col_h->col = i+1;
      col_h->row = 0;
      col_h->value = 0;
      col_h->row_l = col_h;
      if (i != 0)
          matrix->col_head[i-1]->col_l = col_h;
      matrix->col_head[i] = col_h;
  }
  matrix->row_head[N-1]->row_l = matrix->row_head[0];
  matrix->col_head[N-1]->col_l = matrix->col_head[0];

  return matrix;
}

static void free_matrix(matrix_t *matrix)
{
    for (int i = 0; i < matrix->N; i++)
    {
        free(matrix->row_head[i]);
        free(matrix->col_head[i]);
    }
    free(matrix->row_head);
    free(matrix->col_head);
    free(matrix);
}

int main(void)
{
    matrix_t *m = init_matrix(100);
    free_matrix(m);
    return(0);
} 
```

有五个地方`malloc()`被称为；也有五个地方`free()`被称为。五个分配和释放中的两个在 0..N-1 循环中，所有这些都很好地平衡。

### 修订后的输出`valgrind`

```
==73943== Memcheck, a memory error detector
==73943== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==73943== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==73943== Command: ./xx
==73943== 
==73943== 
==73943== HEAP SUMMARY:
==73943==     in use at exit: 2,095 bytes in 32 blocks
==73943==   total heap usage: 235 allocs, 203 frees, 8,519 bytes allocated
==73943== 
==73943== LEAK SUMMARY:
==73943==    definitely lost: 0 bytes in 0 blocks
==73943==    indirectly lost: 0 bytes in 0 blocks
==73943==      possibly lost: 0 bytes in 0 blocks
==73943==    still reachable: 2,095 bytes in 32 blocks
==73943==         suppressed: 0 bytes in 0 blocks
==73943== Rerun with --leak-check=full to see details of leaked memory
==73943== 
==73943== For counts of detected and suppressed errors, rerun with: -v
==73943== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 1 from 1) 
```

## 要学习的教训

因此，可以从这个简短的故事中吸取各种教训：

1.  感谢太阳向您指出了问题。
2.  了解如何使用`valgrind`。
3.  考虑使用`Type *pointer = malloc(sizeof(*pointer));`习语进行分配。

# php - NSXMLParser 行为异常

> ID：10159140
> 
> 赞同：0
> 
> 时间：2012-04-15T02:49:54.207
> 
> 标签：php, iphone, xml, post, nsxmlparser

很难解析使用 POST 从 Web 表单创建的 XML。

这是场景：

1) 用户来到一个网页，在一个文本字段中输入他们的名字，然后点击提交

2) 这会调用一个 PHP 文件（称为“makeXML.php”），该文件会生成一个 XML 文件，该文件包含一个名为“currentUserName”的标签中的用户名

3) iPhone App 然后加载这个“makeXML.php”文件（使用'loadXMLByURL'）并解析它，专门寻找将“currentUserName”标签的内容输出到一个UILabel 对象中。

应该很简单——但由于某种原因，“currentUserName”标签的内容在应用程序中是*空*的——尽管它们在浏览器中生成的 XML 代码中显示得非常好。

更奇怪的是，如果我在 PHP 文件（“makeXML.php”）中将值*硬编码*为“uName”，而不是从 FORM 中获取该值（使用 $_POST[“userName”];） - 这一切都运作良好。我能够从“currentUserName”标签中获取值并将其输出到 UILabel 对象。

由于某种原因，NSXMLParser 似乎只是不喜欢 POST 的值。

有任何想法吗？

这是代码：

门户网站.html：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Web-Form</title>
</head>

<body>

<form name="form1" method="post" action="makeXML.php">
  <p>Enter your name:</p>
  <p>
    <input name="userName" type="text" />
  </p>
  <p>
    <input type="submit" value="SUBMIT" />
  </p>
</form>

</body>
</html> 
```

这是“makeXML.php”：

```
<?php
header("Content-type: text/xml");
echo "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>";

echo "<document>";

$uName = $_POST["userName"]; 

echo "Here is the name you typed:";
echo "<br/>";
echo "<theUsersName>$uName</theUsersName>";

echo "</document>";

?> 
```

这是 makeXML.php 的输出代码：（请注意，此代码全部出现在一行上 - 它应该是这样的吗？“br”标签不应该工作并在那里强制换行吗？）

```
<?xml version="1.0" encoding="UTF-8" ?><document>Here is the name you typed:<br/><theUsersName>johnson</theUsersName></document> 
```

同样，请注意，如果我更换：

```
 $uName = $_POST["userName"]; 
```

与普通旧：

```
 $uName = "John"; 
```

一切正常*，* “约翰”这个名字正确出现在我的 UILabel 中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:58:18.413

正如`psoft`他在评论中提到的那样，很难具体回答这样的问题，因为您的最终目标似乎有些不清楚。我将假设您刚刚开始尝试所有涉及的技术。

您的`PHP`脚本可以运行，我已经在本地 Apache 服务器上对其进行了测试。虽然有一些奇怪的地方；比如插入一个`html` `<br/>`into `XML`。`XML`是一种数据格式（至少在这种情况下），并非真正用于演示。您的`html`文件也可以正常工作。

从您所在的位置出发，有三种非常明显的方式。

**1）**做你上面的评论所说的。使用脚本写入数据库，然后使用另一个脚本访问它。第一个来自网页，第二个来自 Objective-c 代码。我很确定这不是你现在想尝试的。

**2)**中断应用程序中`post`from a的发送。`UIWebView`通过其他方式将该数据发送到您的服务器并解析结果。

**3）**忽略网络视图，直接将参数发送到服务器。

2和3都非常相关。主要区别在于`NSURLRequest`.

对于 2，获取 post 请求非常容易。首先，您将设置一些对象，比如说您的视图控制器，作为 Web 视图的委托。然后实现下面的方法。

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
    // Very simple example of checking for the php script in the url
    if ([request.URL.absoluteString.lastPathComponent isEqualToString:@"makeXML.php"]){
        // Use the "request" parameter to
        // post the request yourself
        return NO; // Because you will handle it.
    } else {
        return YES;
    }
} 
```

对于 3，您只需创建`NSURLRequest`自己并根据需要进行配置。这需要`NSMutableURLRequest`子类。

```
NSString *nameToPost = @"Mr Ducky";

NSURL *url = [[NSURL alloc] initWithString:@"http://Address&FolderOfScriptHere/makeXML.php"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
request.HTTPMethod = @"POST";
[request setHTTPBody:[[NSString stringWithFormat:@"userName=%@",nameToPost] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

然后在任何一种情况下（2 或 3），您都可以使用它`request`来加载要解析的数据。例如，这是一种非常糟糕（同步）的数据加载方式。

```
NSData *xmlData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

然后可以将此数据提供给解析器或简单地记录用于测试：

```
NSString *xmlString = [[NSString alloc] initWithData:xmlData encoding:NSUTF8StringEncoding];
NSLog(@"xml:%@",xmlString); 
```

# apache - Apache MPM 混乱——需要澄清

> ID：10159145
> 
> 赞同：0
> 
> 时间：2012-04-15T02:50:36.667
> 
> 标签：apache

我正在研究没有编译和构建 Apache 的 linux 机器。我不知道我正在使用哪个 Apache MPM（prefork 或 worker），因为 /usr/sbin/ 中似乎有两者的可执行文件。这是一个 CentOS 盒子：

```
httpd
httpd.worker 
```

在脚本 /usr/sbin/apachectl 中是以下行：

```
# the path to your httpd binary, including options if necessary
HTTPD='/usr/sbin/httpd' 
```

但是，/usr/sbin/apachectl 还在以下文件中显示了 HTTPD 配置，这让我相信它覆盖了 HTTPD 的上述选项并将其指向 httpd.worker：

```
$ cat /etc/sysconfig/httpd
# Configuration file for the httpd service.

#
# The default processing model (MPM) is the process-based
# 'prefork' model.  A thread-based model, 'worker', is also
# available, but does not work with some modules (such as PHP).
# The service must be stopped before changing this variable.
#
HTTPD=/usr/sbin/httpd.worker

#
# To pass additional options (for instance, -D definitions) to the
# httpd binary at startup, set OPTIONS here.
#
#OPTIONS=

#
# By default, the httpd process is started in the C locale; to 
# change the locale in which the server runs, the HTTPD_LANG
# variable can be set.
#
#HTTPD_LANG=C

#
# By default, the httpd process will create the file
# /var/run/httpd/httpd.pid in which it records its process
# identification number when it starts.  If an alternate location is
# specified in httpd.conf (via the PidFile directive), the new
# location needs to be reported in the PIDFILE.
#
#PIDFILE=/var/run/httpd/httpd.pid 
```

我的结论是我正在使用 MPM 工作者。但是，为什么我会在 /usr/sbin 中有一个似乎编译为 MPM prefork 的 httpd 可执行文件？看看这些命令？可能是人工制品？：

```
# httpd -l
compiled in modules:
core.c
prefork.c
http_core.c
mod_so.c

$ httpd -V
Server version: Apache/2.2.15 (Unix)
Server built:   Feb 13 2012 22:31:42
Server's Module Magic Number: 20051115:24
Server loaded:  APR 1.3.9, APR-Util 1.3.9
Compiled using: APR 1.3.9, APR-Util 1.3.9
Architecture:   64-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR="server/mpm/prefork"
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/etc/httpd"
 -D SUEXEC_BIN="/usr/sbin/suexec"
 -D DEFAULT_PIDLOG="run/httpd.pid"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_LOCKFILE="logs/accept.lock"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="conf/mime.types"
 -D SERVER_CONFIG_FILE="conf/httpd.conf"

$ httpd.worker -l
Compiled in modules:
core.c
worker.c
http_core.c
mod_so.c

$ apachectl -l
Compiled in modules:
core.c
worker.c
http_core.c
mod_so.c
# apachectl -V
Server version: Apache/2.2.15 (Unix)
Server built:   Feb 13 2012 22:33:00
Server's Module Magic Number: 20051115:24
Server loaded:  APR 1.3.9, APR-Util 1.3.9
Compiled using: APR 1.3.9, APR-Util 1.3.9
Architecture:   64-bit
Server MPM:     Worker
   threaded:     yes (fixed thread count)
   forked:     yes (variable process count)
Server compiled with....
-D APACHE_MPM_DIR="server/mpm/worker"
-D APR_HAS_SENDFILE
-D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/etc/httpd"
 -D SUEXEC_BIN="/usr/sbin/suexec"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="conf/mime.types"
 -D SERVER_CONFIG_FILE="conf/httpd.conf" 
```

我相信我正在运行 httpd.worker 的最后一个原因：

```
ps -C httpd.worker -F
UID        PID  PPID  C    SZ   RSS PSR STIME TTY          TIME CMD
root     13603     1  0 34690  4852   1 01:58 ?        00:00:00 /usr/sbin/httpd.worker
apache   13605 13603  0 34619  2352   1 01:58 ?        00:00:00 /usr/sbin/httpd.worker
apache   13606 13603  0 123554 7444   1 01:58 ?        00:00:00 /usr/sbin/httpd.worker
apache   13607 13603  0 240987 52604  0 01:58 ?        00:00:00 /usr/sbin/httpd.worker
apache   13609 13603  0 273755 52396  0 01:58 ?        00:00:00 /usr/sbin/httpd.worker
apache   13611 13603  0 290139 52128  0 01:58 ?        00:00:00 /usr/sbin/httpd.worker 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:30:31.043

如果您在 CentOS 上，请打开 /usr/sbin/apachectl 并在您提到的以下行下方

```
# the path to your httpd binary, including options if necessary 
HTTPD='/usr/sbin/httpd' 
```

你会发现以下几行：

```
# Source /etc/sysconfig/httpd for $HTTPD setting, etc.
if [ -r /etc/sysconfig/httpd ]; then
   . /etc/sysconfig/httpd
fi 
```

这就是您的 apachectl 获取和覆盖 apachectl 自己的 HTTPD 变量的方式。

这也意味着您确实在使用 worker mpm 而不是 prefork。

# java - 带有 java.lang.OutOfMemoryError 的 JAVA 处理文件：超出 GC 开销限制错误

> ID：10159146
> 
> 赞同：0
> 
> 时间：2012-04-15T02:51:10.403
> 
> 标签：java, file-io, hash, split

我有以下 JAVA 类可以从包含多行制表符分隔字符串的文件中读取。示例行如下所示：

```
GO:0085044      GO:0085044      GO:0085044 
```

代码读取每一行并使用 split 函数将三个子字符串放入一个数组中，然后将它们放入一个两级哈希中。

```
public class LCAReader {
    public static void main(String[] args) {
        Map<String, Map<String, String>> termPairLCA = new HashMap<String, Map<String, String>>();
        File ifile = new File("LCA1.txt");
        try {
            BufferedReader reader = new BufferedReader(new FileReader(ifile));
            String line = null;
            while( (line=reader.readLine()) != null ) {
                String[] arr = line.split("\t");
                if( termPairLCA.containsKey(arr[0]) ) {
                    if( termPairLCA.get(arr[0]).containsKey(arr[1]) ) {
                        System.out.println("Error: Duplicate term in LCACache");
                    } else {
                        termPairLCA.get(arr[0]).put(new String(arr[1]), new String(arr[2]));
                    }
                } else {
                    Map<String, String> tempMap = new HashMap<String, String>();
                    tempMap.put( new String(arr[1]), new String(arr[2]) );
                    termPairLCA.put( new String(arr[0]), tempMap );
                }
            }
            reader.close();
        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

当我运行程序时，运行一段时间后出现以下运行时错误。我注意到内存使用量不断增加。

线程“主”java.lang.OutOfMemoryError 中的异常：在 java.util.regex.Pattern.(Pattern.java:1150) 处的 java.util.regex.Pattern.compile(Pattern.java:1469) 处超出 GC 开销限制java.util.regex.Pattern.compile(Pattern.java:840) 在 java.lang.String.split(String.java:2304) 在 java.lang.String.split(String.java:2346) 在 LCAReader.main (LCAReader.java:17)

输入文件差不多2G，我运行程序的机器有8G内存。我还尝试了 -Xmx4096m 参数来运行程序，但这没有帮助。所以我猜我的代码中有一些内存泄漏，但我找不到它们。

谁可以帮我这个事？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T03:02:03.320

没有内存泄漏；你只是想存储太多的数据。2GB 的文本将占用 4GB 的 RAM 作为 Java 字符；加上每个 String 对象开销大约有 48 个字节。假设文本是 100 个字符行，大约还有另一个 GB，总共 5GB——我们甚至还没有计算`Map.Entry`对象！您需要至少（保守地说）6GB 的 Java 堆才能在您的数据上运行该程序，甚至可能更多。

您可以做一些简单的事情来改善这一点。首先，失去`new String()`构造函数——它们毫无用处，只会让垃圾收集器更努力地工作。字符串是不可变的，因此您永远不需要复制它们。其次，您可以使用实习生池来共享重复的字符串——这可能有帮助，也可能没有帮助，具体取决于数据的实际外观。但是你可以尝试，例如，

```
tempMap.put(arr[1].intern(), arr[2].intern() ); 
```

这些简单的步骤可能会有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:31:02.457

我没有看到任何泄漏，您只需要非常大量的内存来存储您的地图。有一个非常好的工具可以验证这一点：使用选项 - **XX:+HeapDumpOnOutOfMemoryError**进行堆转储并将其导入独立版本的[Eclipse 内存分析器。](http://www.eclipse.org/mat/downloads.php)它可以显示最大的保留对象和可能阻止垃圾收集器完成其工作的引用树。此外，诸如**Netbeans Profiler**之类的分析器可以为您提供许多有趣的实时信息（例如检查 String 和 Char 实例的数量）。

此外，将代码拆分为不同的类也是一个很好的做法，每个类都有不同的责任：一侧的“双键映射”类（TreeMap）和另一侧的“解析器”类，它应该使调试更容易.. .

将这个巨大的地图存储在 RAM 中绝对不是一个好主意……或者您需要使用一些较小的文件**进行基准测试**并推断以获得系统上所需的估计 RAM 以适应最坏的情况.. . 并将 Xmx 设置为适当的值。为什么不使用诸如 Berckley DB 之类的**键值存储**：比关系 DB 更简单，并且应该完全适合您对两级索引的需要。查看此帖子以了解商店的选择：[键值存储建议](https://stackoverflow.com/questions/6639080/key-value-store-suggestion)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:50:58.030

您可能不应该使用`String.split`和存储纯粹的信息，`String`因为这会动态生成大量`String`对象。

尝试使用`char`基于方法，因为您的格式似乎相当固定，因此您知道一行上不同数据点的确切索引。

如果您更多地进行实验，您可以尝试使用 NIO 支持的方法，该方法具有内存映射`DirectByteBuffer`或`CharBuffer`用于遍历文件的内存。在那里，您可以将不同数据点的 indizes 标记到标记对象中，并且仅`String`在需要时在过程中稍后加载真实数据。

# gwt - 将 GWT 应用程序部署到 Godaddy

> ID：10159147
> 
> 赞同：-1
> 
> 时间：2012-04-15T02:51:11.147
> 
> 标签：gwt, external

我已经阅读了所有我能找到的东西，但并不适合我。有没有人偶然知道将 GWT 部署到 Godaddy 等外部域服务器的详细分步说明？

我正在使用 Maven 来管理我的应用程序。我可以在开发模式下运行它，但是当我尝试复制到 tomcat 时，它不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:45:15.647

经过越来越多的尝试导致挫折，我决定将我的 GWT 应用程序托管在 GAE（Google 应用程序引擎）上。部署到 GAE 比尝试设置 GWT 以在 Godaddy 服务上工作更容易。

对于 mvn 相关问题，我使用 GWT Maven Archetype 版本 2.3.0-1 重新创建了我的应用程序

我在tomcat的webapps目录中弹出.war，瞧……它有效

干杯铅

# java - 如何按需自动填充 Map <string,collection>中的值</string,collection>

> ID：10159150
> 
> 赞同：3
> 
> 时间：2012-04-15T02:51:53.473
> 
> 标签：java, collections

我发现自己经常写这样的代码：

```
Map < String, Set < String > > map = new TreeMap < String, Set < String > >();
String key;
String element;
/* ... */
Set < String > value = map.get(key);
if (value == null) {
  value = new TreeSet < String >();
  map.put(key, value);
}
value.add(element); 
```

我讨厌`if`上面的陈述——我怎样才能在标准 Java 中摆脱它？如果您可以确认没有标准的 Java 解决方案，那么如果您可以建议一个满足此需求的非标准库，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:58:05.497

Apache Commons Collections 有一个[MultiMap](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)：

```
MultiMap mhm = new MultiHashMap();
mhm.put(key, "A");
mhm.put(key, "B");
mhm.put(key, "C");
Collection coll = (Collection) mhm.get(key); 
```

Guava（以前是 Google Collections）[也有一个](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html)，它支持泛型，并且有[树](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/TreeMultimap.html)和[哈希](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/HashMultimap.html)版本：

```
Multimap<String,String> mhm = new TreeMultimap<String,String>();
// etc. 
```

澄清一下，`Multimap<T, S>`基本上与 a 相同`Map<T, Collection<S>>`，并`put`在需要时自动创建集合。

编辑：更新链接到番石榴，因为显然谷歌收藏已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:02:26.223

Hmm... I like Brendan's multimap answer, but you could also use a static utility method and keep to standard java.util classes/interfaces:

```
public static <K,V> Set<V> getTreeSet(Map<K,Set<V>> map, K key) {
    Set<V> set = map.get(key);
    if (set == null) {
        set = new TreeSet<V>();
        map.put(key, set);
    }
    return set;
} 
```

Then your code with the null checks could be written:

```
Map < String, Set < String > > map = new TreeMap < String, Set < String > >();
String key;
String element;
/* ... */
MapUtils.getTreeSet(map, key).add(element); 
```

You'd need static method for each collection type, but that seems better than writing the same code over and over again.

# python - 在python中引用另一个类

> ID：10159164
> 
> 赞同：0
> 
> 时间：2012-04-15T02:53:41.527
> 
> 标签：python, google-app-engine

我刚刚开始使用 Python for Google App Engine。我有一个文件notifications.py，在这里，我将创建在users.py 中指定的用户实体。我怎样才能做到这一点？我试过`import users`了，但我得到一个错误：`NameError: global name 'User' is not defined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:47:27.970

哦，我也刚遇到这个问题！之后：

```
import users 
```

让`User`你必须输入`users.User`

或者，您可以像这样导入它：

```
from users import User 
```

然后直接引用它，`User`但如果你这样做，你将不得不以下列格式列出你想要的用户的每一位：

```
from users import User, Somthingelse, Somthing 
```

如果您感觉超级懒惰并且不想输入任何前缀或列出您想要的所有内容，只需输入

```
from users import * 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:15:10.497

代替

```
import users 
```

做

```
from users import User 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T03:08:23.807

```
# module.py
foo = "bar"
# main.py
import module
print foo # This will cause error because foo is not located in the current namespace
print module.foo # this will print "bar"
from module import foo # But you can import contents of module "module" in the current namespace 
```

[http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

# ios - 是否可以使用 iOS SDK 检测 LTE 连接？

> ID：10159167
> 
> 赞同：7
> 
> 时间：2012-04-15T02:53:55.857
> 
> 标签：ios, sdk, wireless, 3g, connectivity

我正在使用可达性 API 来检测我当前的连接，但我只能区分 WIFI 和 3G。

我得到以下标志：

LTE：`kSCNetworkReachabilityFlagsIsLocalAddress|kSCNetworkReachabilityFlagsIsWWAN|kSCNetworkReachabilityFlagsTransientConnection|kSCNetworkReachabilityFlagsReachable`

无线上网：`kSCNetworkReachabilityFlagsIsDirect|kSCNetworkReachabilityFlagsReachable`

问题是 LTE 返回与 3G 连接相同的标志。有什么方法可以判断用户当前是LTE还是3G？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-22T20:18:02.193

从 iOS 7 开始，您可以使用CoreTelephony 框架中的`currentRadioAccessTechnology`属性找到这一点。`CTTelephonyNetworkInfo`

```
#import <CoreTelephony/CTTelephonyNetworkInfo.h>

CTTelephonyNetworkInfo *networkInfo = [CTTelephonyNetworkInfo new];

if ([networkInfo.currentRadioAccessTechnology isEqualToString:CTRadioAccessTechnologyLTE]) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T01:10:37.130

我想知道这个隐藏的 Core Telephony API 是否可以为您提供足够的信息来确定您是否连接到 LTE 或速度较慢的技术。

```
CTRegistrationGetCurrentMaxAllowedDataRate(); 
```

可能值得尝试。

有关在此处使用私有 API 的更多信息：[使用 Core 电话的 iPhone 手机号码](https://stackoverflow.com/questions/3407556/iphone-mobile-number-using-core-telephony/9191683#9191683)

但是，我了解到如果您使用私有 API，您的应用程序将被苹果拒绝。

# indexing - directX 9 中的对象加载器

> ID：10159168
> 
> 赞同：0
> 
> 时间：2012-04-15T02:54:32.277
> 
> 标签：indexing, directx, mesh, vertex, wavefront

我写了一个程序来在directx 9中加载一个obj文件。我所做的只是从文件中读取顶点数据和索引数据（我没有读取任何纹理或顶点法线数据）。然后我将这些数据直接插入顶点和索引缓冲区。

当我运行代码时，对象被渲染，但它们不是正确的形状。网格变形。这是我的代码 -

```
D3DXCreateMeshFVF(
    index_size,  // NumFaces 
    vertex_size,  // NumVertices 
    D3DXMESH_MANAGED, // Options 
    D3DFVF_XYZ, // FVF 
    Device,  // The Device 
    &Mesh[id].MeshData);  // The Mesh 

VOID* pVertices; 
// Copy the vertices into the buffer 
Mesh[id].MeshData->LockVertexBuffer(D3DLOCK_DISCARD, (void**)&pVertices);

memcpy( pVertices, VertexData, vertex_size*sizeof(FLOAT)*3); // VertexData is the vertex data that I obtained form the obj file

// Unlock the vertex buffer 

 Mesh[id].MeshData->UnlockVertexBuffer();

// Prepare to copy the indices into the index buffer 

VOID* IndexPtr;

// Lock the index buffer

 Mesh[id].MeshData->LockIndexBuffer( 0, &IndexPtr );

// Check to make sure the index buffer can be locked 

// Copy the indices into the buffer

 memcpy( IndexPtr, IndexData, index_size*sizeof(WORD));// IndexData is the list of indices I obtained form he obj file.

// Unlock the buffer 

Mesh[id].MeshData->UnlockIndexBuffer(); 
```

当我显示一个立方体时，它只显示了一半，并且缺少一些面。我怀疑是索引缓冲区有问题，但我不知道如何解决。

我真的需要帮助。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:36:11.130

我现在没有时间阅读代码，但据我记得，.obj 文件中的索引数据不是从 0 开始，而是从 1 开始，我的意思是，一旦加载了所有索引数据，就应该减去 - 1 到每个索引。

如果您将 .OBJ 与 .X 文件进行比较，您将看到索引数据之间的差异。

# c - 使用 memcpy 而不是 mallocing 将空间存储到堆栈中

> ID：10159171
> 
> 赞同：-1
> 
> 时间：2012-04-15T02:55:23.360
> 
> 标签：c, stack, malloc, heap-memory

我正在为一个存储一些股票市场数据的类项目创建一个链接列表。我试图将一些数据存储到堆栈中，而不是分配到堆中。我正在尝试使用 memcpy 来做到这一点。我的代码是这样的：

```
struct trade{

int a,b;
float c;
struct trade *n;
};
char stack[100];
int i = 0;

void newNode(struct trade **head, int a, int b, float c){
 struct trade *node;
 if(i<99){
  memcpy(&a,&stack[i],4);
  i = i + 4;
  node = (struct lnode*) malloc(16);
 }

  else 
   node = (struct lnode*) malloc(20);
}
.....
.....
} 
```

每当我创建一个新节点并且我需要为其分配空间时，都会调用我的 newnode 函数。

如果堆栈数组中仍有空间，我将 int 复制到堆栈数组中，否则我 malloc 到堆中。我使用 20 和 16，因为如果我将 int 存储在堆栈中，那么我需要为结构中剩余的 16 个字节分配空间，否则我将分配 20 个字节的空间。

出于某种原因，当我这样做时会出现段错误。如果有人能指出我正确的方向，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:48:23.370

1.  你已经交换了你的 memcpy 参数。目的地应该是第一个参数：

    ```
    memcpy(&stack[i],&a,4); 
    ```

    从手册页：

    ```
    SYNOPSIS

    void * memcpy(void *restrict s1, const void *restrict s2, size_t n);

    DESCRIPTION

    The memcpy() function copies n bytes from memory area s2 to memory area
    s1\.  If s1 and s2 overlap, behavior is undefined.  Applications in which
    s1 and s2 might overlap should use memmove(3) instead. 
    ```

2.  如果您正在编译除 32 位 x86 之外的任何内容，则整数和指针将不是 4 个字节，而是例如 8 个字节用于 64 位，这会导致问题。你真的应该使用`sizeof(int)`. 这也会影响 16 和 20，您可以将其替换为`sizeof(lnode)`. 这些在编译时设置为正确的值，因此不会影响速度。

3.  除了定义“堆栈”与堆的问题之外：如果将 int 放入其中，为什么要将堆栈定义为 char 数组而不是 int？可以使用 char 数组，但是只分配而不是 memcpy 到相同类型的数组要容易得多且不易出错。

4.  Valgrind 是您进行此类调试的朋友。我发现自己将它用作段错误和内存泄漏的标准调试工具。

# php - MySQL 没有插入所有成功的插入查询...为什么？

> ID：10159173
> 
> 赞同：0
> 
> 时间：2012-04-15T02:55:59.117
> 
> 标签：php, mysql, insert, bulkinsert, fgetcsv

在我继续之前，这纯粹是一个直觉问题。也就是说，我不是在寻找解决我的 PHP/MySQL 代码中特定错误的答案。相反，我想了解在解决我的问题时需要考虑的可能问题范围。为此，我不会发布代码或附加脚本 - 我将简单地解释我做了什么以及发生了什么。

我已经编写了 PHP 脚本

1.  读取 X 记录的 CSV 文本文件以插入 MySQL 数据库表和/或更新适用的**重复条目；**
2.  将所述记录插入我将称为该数据集的“根”表中；
3.  从“根”表中选择特定字段的子集记录，然后将这些记录插入“主”表；和
4.  从主表创建输出导出文本文件以进行分发。

我每 30 分钟通过单独的计划 cron 任务处理几个 CSV 文件。总而言之，从各种来源来看，估计有 420,000 个从文件到根表的插入事务，另外还有 420,000 个通过计划任务从根表到主表的插入事务。

其中一项任务涉及一个包含大约 400,000 条记录的 CSV 文件。处理过程没有错误，但问题是：在 MySQL 指示已成功插入根表的 400,000 条记录中，只有大约 92,000 条记录实际存储在根表中 - 我从计划中丢失了大约 308,000 条记录任务。

其他计划任务分别处理大约 16,000 和 1,000 个事务，并且这些事务处理完美。事实上，如果我将交易数量从 400,000 减少到 10,000，那么这些过程也很好。显然，这不是这里的目标。

为了解决这个问题，我尝试了几种补救措施......

1.  增加我的服务器的内存（并增加 php.ini 文件中的最大限制）
2.  获得具有扩展内存的专用数据库（与共享 VPS 数据库相反）
3.  重写我的代码以大大消除存储数组，这些数组会占用内存并在运行时处理 fgetcsv() 进程
4.  使用 INSERT DELAYED MySQL 语句（与普通的 INSERT 语句相反）

...而且这些补救措施都没有达到预期的效果。

鉴于迄今为止采取的行动缺乏成功，此时应考虑采取何种范围的补救行动？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:32:56.537

我怀疑 CSV 文件有问题。

我的建议：

*   在从 CSV 读取的每一行上打印一些用于调试信息的内容。这将显示处理了多少行。
*   在每次插入/更新时，打印任何错误（如果有）

是这样的：

```
<?php
$csv = fopen('sample.csv', 'r'); $line = 1;
while (($item = fgetcsv($csv)) !== false) {
    echo 'Line ' . $line++ . '... ';

    $sql = ''; // your SQL query
    mysql_query($sql);
    $error = mysql_error();

    if ($error == '') {
        echo 'OK' . PHP_EOL;
    } else {
        echo 'FAILED' . PHP_EOL . $error . PHP_EOL;
    }
} 
```

因此，如果有任何错误，您可以查看并找到问题（CSV 的哪些行有问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:25:44.783

csv 中的源数据可能有重复记录。即使 csv 中有 400,000 条记录，您的“插入或更新”逻辑也会将它们修剪成缩减集。更少的内存可能会导致异常等，但这种数据丢失。

# python - 如何在 numpy 中创建一个二维“矩形”数组（1 的方形块，否则为 0）？

> ID：10159178
> 
> 赞同：6
> 
> 时间：2012-04-15T02:57:38.337
> 
> 标签：python, arrays, numpy, rect

创建 2D numpy“rect”数组的“正确”方法是什么，例如：

```
0000000000000000000
0000000000000000000
0000000000111110000
0000000000111110000
0000000000111110000
0000000000000000000 
```

即在特定范围内具有给定值的数组，否则为零？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T03:04:27.600

只需创建一个零数组并将您想要的区域设置为一个。

例如

```
import numpy as np
data = np.zeros((6,18))
data[2:5, 9:14] = 1
print data 
```

这产生：

```
[[ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  1\.  1\.  1\.  1\.  1\.  0\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  1\.  1\.  1\.  1\.  1\.  0\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  1\.  1\.  1\.  1\.  1\.  0\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.]] 
```

# java - 关于ListActivity、游标和SQL数据更新的问题

> ID：10159183
> 
> 赞同：0
> 
> 时间：2012-04-15T02:58:35.967
> 
> 标签：java, android, sql

目前我正在使用 ListActivity。我使用游标从 SQL 中获取数据，并根据 SQL 查询结果构建 ListView。对于我的 ListView 中的每个对象，如果我按下该对象（onListItemClick），它将更改光标将读取的 SQL 中的值，并打开一个新的意图。（按下不同的对象将更改 SQL 表中的不同值） . 为了让我的 ListView 保持最新状态，我使用

```
//adapter is the SimpleCursorAdapter I use
protected void onListItemClick(ListView l, View view, int position, long id) {
    super.onListItemClick(l, view, position, id);
    //change the data in sql
    ...
    //change the data end
    adapter.changeCursor(dbAdapter.getResult(id));
    adapter.notifyDataSetChanged();
    //create intent here
    //startActivity(intent)
} 
```

问题是，如果我继续按下同一个对象，留下它创建的意图，它工作正常。但是，一旦我在离开之前的意图后按下不同的对象，我的 ListView 就会变空。例如，如果我按下对象 a，我输入意图 a，然后我离开意图 a，回到列表视图（ListView 现在很好），然后我按下对象 b，我输入意图 b。当我离开意图 b 时，ListView 变为空。有人对这个问题有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:02:49.703

听起来您的某些数据正在被破坏。我认为如果您将列表创建代码移至 onResume，您的问题将自行解决，因为每次返回时都会重新生成列表，而 onCreate 仅在首次创建活动时完成。

一张图片胜过千言万语： ![活动生命周期](../Images/9ea72fc8fdcf2debca34acb97fa14709.png)

# java - 如何在 Java 中获取父 URL？

> ID：10159186
> 
> 赞同：15
> 
> 时间：2012-04-15T02:59:50.917
> 
> 标签：java, url

在 Objective-C 中，我`-[NSURL URLByDeletingLastPathComponent]`用来获取父 URL。Java 中的 this 等价物是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-15T03:35:28.530

我能想到的最短的代码片段是这样的：

```
URI uri = new URI("http://www.stackoverflow.com/path/to/something");

URI parent = uri.getPath().endsWith("/") ? uri.resolve("..") : uri.resolve("."); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T03:33:37.520

我不知道库函数可以一步完成。但是，我相信以下（诚然繁琐）代码可以完成您所追求的（并且您可以将其包装在您自己的实用程序函数中）：

```
import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;

public class URLTest
{
    public static void main( String[] args ) throws MalformedURLException
    {
        // make a test url
        URL url = new URL( "http://stackoverflow.com/questions/10159186/how-to-get-parent-url-in-java" );

        // represent the path portion of the URL as a file
        File file = new File( url.getPath( ) );

        // get the parent of the file
        String parentPath = file.getParent( );

        // construct a new url with the parent path
        URL parentUrl = new URL( url.getProtocol( ), url.getHost( ), url.getPort( ), parentPath );

        System.out.println( "Child: " + url );
        System.out.println( "Parent: " + parentUrl );
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-20T10:29:54.133

这是非常简单的解决方案，这是我用例中的最佳方法：

```
private String getParent(String resourcePath) {
    int index = resourcePath.lastIndexOf('/');
    if (index > 0) {
        return resourcePath.substring(0, index);
    }
    return "/";
} 
```

我创建了简单的函数，我受到`File::getParent`. 在我的代码中，Windows 上的反斜杠没有问题。我假设这`resourcePath`是 URL 的资源部分，没有协议、域和端口号。（例如`/articles/sport/atricle_nr_1234`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-29T06:11:11.620

Guava 库提供的简单解决方案。

***代码：***

```
URL url = new URL("https://www.ibm.watson.co.uk");
String host = url.getHost();

InternetDomainName parent = InternetDomainName.from(host).parent(); // returns ibm.watson.co.uk
System.out.println("Immediate ancestor: "+parent);

ImmutableList<String> parts = InternetDomainName.from(host).parts(); 
System.out.println("Individual components:  "+parts);

InternetDomainName name = InternetDomainName.from(host).topPrivateDomain(); // watson.co.uk
System.out.println("Top private domain - " + name); 
```

***输出：***

```
Immediate ancestor: ibm.watson.co.uk

Individual components:  [www, ibm, watson, co, uk]

Top private domain - watson.co.uk 
```

供参考： [https ://guava.dev/releases/snapshot/api/docs/com/google/common/net/InternetDomainName.html](https://guava.dev/releases/snapshot/api/docs/com/google/common/net/InternetDomainName.html)

需要依赖：

[https://mvnrepository.com/artifact/com.google.guava/guava](https://mvnrepository.com/artifact/com.google.guava/guava)

我使用的是 19.0 版

```
<dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
</dependency> 
```

**而且，这个类InternetDomainName**提供了更多相关的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T23:01:30.300

使用 java.nio.file.Paths 这可以在一行中完成。

例如：

```
String parent = Paths.get("https://stackoverflow.com/questions/10159186/how-to-get-parent-url-in-java/").getParent().toString();
System.out.println(parent); 
```

将打印：

```
https:/stackoverflow.com/questions/10159186 
```

# javascript - 如何使用谷歌地图 API V3 显示城市范围

> ID：10159188
> 
> 赞同：2
> 
> 时间：2012-04-15T03:00:09.050
> 
> 标签：javascript, google-maps, google-maps-api-3

如果我搜索 google 识别的城市或社区，例如[Fernwood, Victoria](http://maps.google.ca/maps?q=fernwood%20victoria&um=1&ie=UTF-8&hq=&hnear=0x548f746349c1243b:0xb97bf6f39d5e69fc,Fernwood,%20Victoria,%20BC&gl=ca&ei=hziKT8WoD8nJiQLYo5TlCw&sa=X&oi=geocode_result&ct=title&resnum=2&ved=0CDEQ8gEwAQ)，我会得到一张带有绘制边界的漂亮地图。有没有办法使用谷歌地图 API 访问这类信息？

我不想在地图上画自己的线，我想制作一张地图，在同一张地图上显示多个有限制的社区。为这些限制设置样式的能力加分（例如：像正多边形一样填充它们）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:07:46.123

我很确定 api 不支持这种功能，仅适用于谷歌地图。
我通过找到需要将它们插入我的 postgis db 的边界来实现这一点，然后只要多边形在地图视口内，就用 json 发送它们。

希望能帮助到你

# java - 用于 EFL 的 Clojure/Java 绑定的快速通道

> ID：10159201
> 
> 赞同：1
> 
> 时间：2012-04-15T03:04:28.037
> 
> 标签：java, binding, clojure, java-native-interface, jna

我想为[EFL](http://www.enlightenment.org/)制作 Clojure/Java 绑定。 [JNA](https://github.com/Chouser/clojure-jna)似乎需要大量显式结构映射（Bridj 也做同样的事情）。JNI 有 Gluegen，所以我认为这可能更简单。

使用 Gluegen 并决定 Elementary 模块是一个不错的起点，我跑了：

java -jar /usr/share/java/gluegen2.jar -I。$(pkg-config 基本--cflags) /usr/include/elementary-0/Elementary.h

...并很快发现我需要创建大量的标头存根，即 > 29

我有三个问题：

1.  为这个项目生成 Java 绑定的最快和最简单的方法是什么？
2.  如果是 Gluegen，是否有生成显着标头存根的程序？
3.  如果是 JNA，是否有生成显着指针/结构映射的程序？

快速跟进。看来我可以用 clojure-jna 开箱即用地做一些事情

```
user=> (use 'net.n01se.clojure-jna)
nil
user=> (jna-invoke Integer eina/eina_init)
1
user=> (jna-invoke String eina/eina_str_escape "They'll start going ripe on us pretty soon.")
"They\\'ll\\ start\\ going\\ ripe\\ on\\ us\\ pretty\\ soon."
user=> (vec (jna-invoke (class (into-array String [])) eina/eina_str_split "Calvin;Leoben;D'anna;Simon;Dora2;105Rl;Six;Daniel;Sharon" ";" 0))
["Calvin" "Leoben" "D'anna" "Simon" "Dora2" "105Rl" "Six" "Daniel" "Sharon"]
user=> (jna-invoke Integer eina/eina_shutdown)
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:55:05.050

[JNAerator](http://code.google.com/p/jnaerator/)将为您生成 JNA 和 Bridj 的绑定。

# http - HTTP 流水线与无流水线的示例

> ID：10159203
> 
> 赞同：0
> 
> 时间：2012-04-15T03:05:22.020
> 
> 标签：http

有人可以给我一个带/不带流水线的 HTTP 的具体示例吗？我一直认为这两种方法都可以处理多个请求/响应，除了流水线的情况，它只使用一个套接字，这意味着只有一个连接。相反，如果没有流水线，每个套接字（连接）对于每个请求都是唯一的，因此它具有打开/关闭套接字的开销。但是，在当今高速互联网的情况下，差异可以忽略不计。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:24:56.880

不，即使没有流水线，HTTP/1.1 也会使用一个套接字来处理多个请求；一个接一个地。不，打开一个新的套接字很昂贵，因为它会导致额外的往返。

# java - 获取用户当前的纬度/经度

> ID：10159204
> 
> 赞同：0
> 
> 时间：2012-04-15T03:05:42.547
> 
> 标签：java, android, geolocation, locationmanager

我正在尝试使用以下代码获取用户当前的纬度/经度：

```
LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
Location location = (Location) lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

double longitude = location.getLongitude();
double latitude = location.getLatitude(); 
```

我不断收到错误，即方法 getLatitude()/getLongitude() 未定义类型**Location**。

我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:12:09.843

```
import android.location.Location;
import android.location.LocationManager; 
```

添加这两个导入，或者如果您使用的是 eclipse，只需按 ctrl+shift+O 并尝试

# sql-server - SQL 管理工作室：替换“\n”符号？

> ID：10159205
> 
> 赞同：0
> 
> 时间：2012-04-15T03:05:59.557
> 
> 标签：sql-server

是否可以将`\n`SQL Management Studio (2008) 中的所有内容替换为空格？

我试图这样做，并且：

![在此处输入图像描述](../Images/796170cea285ceeac2325cfc4209356a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T03:17:37.593

如果您展开 Find Options，您可以选中该框以启用正则表达式，这将允许您使用 \n 表示法换行。

# linux - unix - 文件中有多少记录以及字符出现次数的细分

> ID：10159207
> 
> 赞同：4
> 
> 时间：2012-04-15T03:06:24.830
> 
> 标签：linux, perl, bash, shell, unix

是否有内置命令可以执行此操作，或者是否有人对执行此操作的脚本有任何运气？

我希望计算有多少记录（由特定的 EOL 定义，例如“^%！”）有多少次出现特定字符。（按出现次数降序排列）

例如，使用此示例文件：

```
jdk,|ljn^%!dk,|sn,|fgc^%!
ydfsvuyx^%!67ds5,|bvujhy,|s6d75
djh,|sudh^%!nhjf,|^%!fdiu^%! 
```

建议输入：分隔符 EOL 和文件名作为参数。

```
bash/perl some_script_name ",|" "^%!" samplefile 
```

期望的输出：

```
occs    count
3        1
2        1
1        2
0        2 
```

这是因为第 1 条记录有一个分隔符，第 2 条记录有 2，第 3 条记录有 0，第 4 条记录有 3，第 5 条记录有 1，第 6 条记录有 0。

如果您可以使分隔符和 EOL 参数接受十六进制输入（即 2C7C）或普通字符输入（即 ,|），则可以加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:19:28.057

***脚本：***

```
#!/usr/bin/perl
use strict;

$/ = $ARGV[1];
open my $fh, '<', $ARGV[2] or die $!;
my @records = <$fh> and close $fh;

$/ = $ARGV[0];
my %counts;
$counts{(split $_)-1}++ for @records;
delete $counts{-1};

print "$_\t$counts{$_}\n" for (reverse sort keys %counts); 
```

***测试：***

```
perl script.pl ',|' '^%!' samplefile 
```

***输出：***

```
3   1
2   1
1   2
0   2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:06:31.103

这就是 perl 的目的：

```
#!perl -w
use 5.12.0;

my ($delim, $eol, $file) = @ARGV;

open my $fh, "<$file" or die "error opening $file $!";
$/ = $eol; # input record separator

my %counts;
while (<$fh>) {
    my $matches = () = $_ =~ /(\Q$delim\E)/g; # "goatse" operator
    $counts{$matches}++;
}

say "occs\tcount";
foreach my $num (reverse sort keys %counts) {
    say "$num\t$counts{$num}";
} 
```

（如果您没有 5.12，请删除 " `use 5.12`" 行并替换`say`为`print`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T04:16:15.710

好吧，文件末尾还有一个空记录，它有 0。所以，这里有一个脚本来做你想做的事。添加标题和以其他方式调整 printf 输出留给您作为练习。:)

基本上，读入整个文件，将其拆分为记录，对于每条记录，使用 /g 正则表达式来计算子分隔符。由于 /g 返回一个包含所有匹配项的数组，请使用 @{[]} 创建一个数组引用，然后在标量上下文中取消引用它以获取计数。对于问题的特定部分，必须有一个更优雅的解决方案，但无论如何；这是 perl 线路噪音。;)

```
user@host[/home/user]
$ ./test.pl ',|' '^%!' test.in
3   1
2   1
1   2
0   3
user@host[/home/user]
$ cat test.in
jdk,|ljn^%!dk,|sn,|fgc^%!
ydfsvuyx^%!67ds5,|bvujhy,|s6d75
djh,|sudh^%!nhjf,|^%!fdiu^%!
user@host[/home/user]
$ cat test.pl
#!/usr/bin/perl

my( $subdelim, $delim, $in,) = @ARGV;
$delim = quotemeta $delim;
$subdelim = quotemeta $subdelim;
my %counts;

open(F, $in) or die qq{Failed opening $in: $?\n};
foreach( split(/$delim/, join(q{}, <F>)) ){
  $counts{ scalar(@{[m/.*?($subdelim)/g]}) }++;
}
printf( qq{%i% 4i\n}, $_, $counts{$_} ) foreach (sort {$b<=>$a} keys %counts); 
```

这是一个修改后的版本，它只保留至少包含一个非空格字符的字段。这会删除最后一个字段，但也会导致删除任何其他空字段。它还使用 $/ 和 \Q\E 来减少几个显式函数调用（感谢 Alex）。而且，和前一个一样，它适用于严格的 + 警告；

```
#!/usr/bin/perl

my( $subdelim, $delim, $in ) = @ARGV;
local $/=$delim;

my %counts;
open(F, $in) or die qq{Failed opening $in: $?\n};
foreach ( grep(/\S/, <F>) ){
  $counts{ scalar(@{[m/.*?(\Q$subdelim\E)/g]}) }++;
}
printf( qq{%i% 4i\n}, $_, $counts{$_} ) foreach (sort {$b<=>$a} keys %counts); 
```

如果您真的只想无条件地删除最后一条记录，我偏爱使用 pop：

```
#!/usr/bin/perl

my( $subdelim, $delim, $in ) = @ARGV;
local $/=$delim;

my %counts;
open(F, $in) or die qq{Failed opening $in: $?\n};
my @lines = <F>;
pop @lines;
$counts{ scalar(@{[m/.*?(\Q$subdelim\E)/g]}) }++ foreach (@lines);
printf( qq{%i% 4i\n}, $_, $counts{$_} ) foreach (sort {$b<=>$a} keys %counts); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T13:09:29.613

中的解决方案`awk`：

```
BEGIN {
    RS="\\^%!"
    FS=",\\|"
    max_occ = 0
} 
{
    if(match($0, "^ *$")) {  # This is here to deal with the final separator.
        next
    }

    if(NF - 1 > max_occ) {
        max_occ = NF - 1
    }
    count[NF - 1]=count[NF - 1] + 1
}
END {
    printf("occs    count\n")
    for(i = 0; i <= max_occ; i++) {
        printf("%s    %s\n", i, count[i])
    }
} 
```

# c# - 确保特定线程接下来运行（获取资源）？

> ID：10159209
> 
> 赞同：4
> 
> 时间：2012-04-15T03:07:23.347
> 
> 标签：c#, multithreading, locking

我有一个函数，我想在一个单独的线程中执行，避免两个线程访问相同的资源。**另外我想确保如果线程当前正在执行，则停止该线程并开始执行新线程。**这就是我所拥有的：

```
volatile int threadCount = 0; // use it to know the number of threads being executed
private void DoWork(string text, Action OncallbackDone)
{
    threadCount++;
    var t = new Thread(new ThreadStart(() =>
    {
        lock (_lock) // make sure that this code is only accessed by one thread
        {
            if (threadCount > 1) // if a new thread got in here return and let the last one execute
            {
                threadCount--;
                return;
            }
            // do some work in here
            Thread.Sleep(1000);
            OncallbackDone();
            threadCount--;
        }
    }));
    t.Start();
} 
```

如果我触发该方法 5 次，那么所有线程都将等待锁，直到锁被释放。我想确保我执行最后一个线程。当线程正在等待成为锁的所有者时，我如何确定下一个拥有锁的线程。我希望他们按照我创建线程的顺序拥有资源......

编辑

我不是用 .net 4.0 创建这个应用程序。很抱歉没有提到我想要完成的事情。我正在创建一个自动完成控件，在其中过滤大量数据。我不希望主窗口在我想过滤结果时冻结。我还想根据用户类型过滤结果。如果用户一次输入 5 个字母，我想停止所有线程，我只会对最后一个感兴趣。因为锁会阻塞所有线程，有时我创建的最后一个线程可能首先拥有锁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:15:05.900

我认为你过于复杂了。如果您能够使用 4.0，则只需使用[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。有了它，您只需设置一个[ContinueWith](http://msdn.microsoft.com/en-us/library/dd321405.aspx)函数，以便必须以特定顺序发生的线程按照您指定的顺序完成。如果这不是您想要的，那么我实际上建议您不要使用线程，因为这听起来像是您试图强制进入并行的同步操作。

如果您只是想取消任务：那么[这里有一个关于如何取消 TPL 任务的 SO 问题。](https://stackoverflow.com/questions/4783865/how-do-i-abort-cancel-tpl-tasks)如果您只想倾倒所有资源，除了最后一个，为什么还要浪费资源。

如果您不使用 4.0，那么您可以使用[Background Worker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)完成同样的事情。只需要更多样板代码来完成同样的事情:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:37:31.313

我同意 Justin 的观点，即您应该使用 .NET 4 Task Parallel Library。但是，如果您想要完全控制，您不应该使用支持 LIFO 的默认任务计划程序，而是创建您自己的任务计划程序 ( [http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler。 aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx) ) 并实现您想要确定哪个任务获得偏好的逻辑。

除非您对 .NET 线程有深入的了解，否则不建议直接使用线程。如果您使用的是 .NET 4.0；任务和 TPL 是首选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:54:15.323

这是我在阅读你们发布的链接后想到的。我想我需要一个队列，因此我实现了：

```
volatile int threadCount = 0;
private void GetPredicateAsync(string text, Action<object> DoneCallback)
{          
    threadCount++;
    ThreadPool.QueueUserWorkItem((x) =>
    {                
        lock (_lock)
        {
            if (threadCount > 1) // disable executing threads at same time
            {
                threadCount--;
                return; // if a new thread is created exit. 
                        // let the newer task do work!
            }
            // do work in here

            Application.Current.Dispatcher.BeginInvoke(new Action(() =>
            {
                threadCount--;                        
                DoneCallback(Foo);
            }));

        }
    },text);
} 
```

# python - 在 Python 中解析 XML 和我的“NodeList”对象没有属性“len”

> ID：10159211
> 
> 赞同：3
> 
> 时间：2012-04-15T03:08:03.700
> 
> 标签：python, xml, minidom

我对 Python 非常陌生，并试图编写一个解析一些 XML 的程序。我遇到的问题是，当我尝试调用`.len()`我认为是 NodeList 的内容时，我得到了错误`'NodeList' object has no attribute 'len'`。这对我来说真的很令人惊讶，因为[文档](http://docs.python.org/library/xml.dom.html)说：

> 此外，Python DOM 接口要求提供一些额外的支持，以允许将 NodeList 对象用作 Python 序列。所有 NodeList 实现必须包含对**len** ()的支持

这是我的代码：

```
import xml.dom.minidom

def testFunction(translationDOM):
    textCollection = translationDOM.getElementsByTagName("onscreen_text")
    for onscreenText in textCollection:
        print textCollection.len() 
```

然后在`Main()`...

```
translationDom  = parse(xmlFileName)
testFunction(translationDom) 
```

我不想在这里发布我的整个 xml（它很大），但是有许多类似于：

```
<onscreen_text>
    <source id="2036" unique_name="blah" should_be_translated="True">
    ....
 </onscreen_text> 
```

这是完整的错误文本：

```
 File "trophytool.py", line 155, in <module>
    main()
  File "trophytool.py", line 134, in main
    testFunction(translationDom)
  File "trophytool.py", line 64, in testFunction
    print textCollection.len()
AttributeError: 'NodeList' object has no attribute 'len' 
```

您会认为它会打印`<onscreen_text>`找到的标签数量，但事实并非如此。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:10:00.390

试试这个：

```
print len(textCollection) 
```

解释：支持`len`通常意味着一个类实现了`__len__()`方法（不是`len()`），这反过来又允许你调用`len(object)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:10:57.760

getElementsByTagName() 方法总是返回一个列表，即使只有一项。例如在下一个 xml

```
<school>
   <department />
</school> 
```

如果你有指向“学校”标签的指针并且你打电话

```
myNode.getElementsByTagName("department") 
```

它将返回一个长度为 1 的节点列表

如果您确定对方法 getElementsByTagName() 的调用将只返回一项，您可以这样做而不是上面的语句

```
myNode.getElementsByTagName("department").item(0) 
```

它将返回一个节点，而不是只有一个节点的节点列表。

# javascript - 为什么动态更改复选框不会触发表单更改事件？

> ID：10159214
> 
> 赞同：25
> 
> 时间：2012-04-15T03:09:24.243
> 
> 标签：javascript, jquery

我编写了这段 javascript/jQuery 来更改复选框。 [http://jsfiddle.net/johnhoffman/crF93/](http://jsfiddle.net/johnhoffman/crF93/)

Javascript

```
$(function() {
    $("a").click(function() {
       if ($("input[type='checkbox']").attr('checked') == "checked")
           $("input[type='checkbox']").removeAttr('checked');
       else
           $("input[type='checkbox']").attr('checked', 'checked');
       return false;
    });

    $("input[type='checkbox']").change(function(){ 
        console.log("Checkbox changed.");            
    });    
});​ 
```

HTML

```
<input type="checkbox" />
<a href="#">Change CheckBox</a>​ 
```

有趣的是，单击链接会更改文本框，但不会触发表单更改事件，该事件会调用在 Chrome Web 开发人员控制台中记录消息的函数。为什么？我如何让它做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-15T03:16:17.383

您需要触发更改事件`.trigger('change')`，以便该事件知道发生了更改。

从[http://api.jquery.com/change/](http://api.jquery.com/change/)：

> **描述：**将事件处理程序绑定到“更改”JavaScript 事件，或在元素上触发该事件。
> 
> 这种方法是`.on( "change", handler )`前两种变体和`.trigger( "change" )`第三种变体的捷径。
> 
> 当元素的值发生变化时，该`change`事件被发送到元素。此事件仅限于`<input>`元素、`<textarea>`框和`<select>`元素。对于选择框、复选框和单选按钮，当用户使用鼠标进行选择时会立即触发该事件，但对于其他元素类型，该事件会延迟到元素失去焦点为止。

**演示：**

[http://jsfiddle.net/nPkPw/3/](http://jsfiddle.net/nPkPw/3/)

使用链接：http: [//jsfiddle.net/nPkPw/5/](http://jsfiddle.net/nPkPw/5/)
即`$("input[type='checkbox']").trigger('change').attr('checked', 'checked');`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-15T03:16:07.007

[这并不奇怪，但我想您可以将其列为msdn](http://msdn.microsoft.com/en-us/library/ie/ms536912%28v=vs.85%29.aspx)中的非影响列表。

*   “提交内容时会触发此事件，而不是在值更改时触发。”
*   “以编程方式更改选择对象的选定选项时，不会触发 onchange 事件。”

你总是可以只是`.click()`它[jsFiddle](http://jsfiddle.net/crF93/3/)

# wpf - 扩展器垂直对齐

> ID：10159215
> 
> 赞同：1
> 
> 时间：2012-04-15T03:09:37.390
> 
> 标签：wpf, xaml, layout, expander

嗨，我想让这个扩展器垂直对齐而不是水平对齐，箭头垂直面向以及 atm 它看起来像这样：

打开：

![在此处输入图像描述](../Images/9bf77f477fa04c838dc181a0b16d1185.png)

关闭：

![在此处输入图像描述](../Images/1d6bef1bac71b9c25f48a7e889ff88d4.png)

```
 <StackPanel>
        <StackPanel.Triggers>
            <EventTrigger RoutedEvent="Expander.Expanded" SourceName="expander">
                <EventTrigger.Actions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation From="0" To="1" Duration="0:0:0.25" Storyboard.TargetName="listBox" Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleY)"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger.Actions>
            </EventTrigger>
        </StackPanel.Triggers>
        <Expander x:Name="expander" Header="Expander" Expanded="expander_Expanded">
            <ListBox x:Name="listBox">
                <ListBoxItem Content="ListBoxItem" />
                <ListBoxItem Content="ListBoxItem" />
                <ListBoxItem Content="ListBoxItem" />
                <ListBox.LayoutTransform>
                    <ScaleTransform ScaleX="1" ScaleY="0"/>
                </ListBox.LayoutTransform>
            </ListBox>
        </Expander>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:51:13.210

更改[`ExpandDirection`](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander.expanddirection.aspx).

# vba - 在 Word VBA 中调用 Application.GetOpenFilename 方法有什么问题？

> ID：10159216
> 
> 赞同：2
> 
> 时间：2012-04-15T03:09:47.520
> 
> 标签：vba, ms-word

即，我在按钮处理程序中调用了以下代码段：

```
TextBox1.Text = Application.GetOpenFilename("All files (*.*),*.*", _
        1, "Open the Raw Data Files", , False)
If TextBox1.Text = "False" Then TextBox1.Text = "" 
```

错误说：“编译器错误：找不到方法或数据成员”

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T03:32:44.903

Word中没有`Application.GetOpenFilename`。

你需要`FileDialog`改用。这是一个简单的例子：

```
Private Sub CommandButton1_Click()
  Dim s As Variant
  Dim Res As Integer

  Dim dlgSaveAs As FileDialog
  Set dlgSaveAs = Application.FileDialog( _
                   FileDialogType:=msoFileDialogSaveAs)
  Res = dlgSaveAs.Show
  If Not Res = 0 Then
    For Each s In dlgSaveAs.SelectedItems  'There is only one
      MsgBox s
    Next
  End If
End Sub 
```

# erlang - 使用 erlang WebAppmon 显示进程树获取错误列表，追加，2 badarg

> ID：10159219
> 
> 赞同：0
> 
> 时间：2012-04-15T03:10:58.090
> 
> 标签：erlang

```
{badarg,
               [{erlang,'++',
                    [error,
                     [{mgeew_letter_server,"4358.603.0",supervisor,
                          [mgeew_letter_server]},
                      {mgeew_skill_server,"4358.602.0",worker,[mgeew_skill_server]},
                      {mod_team_server,"4358.601.0",worker,[mod_team_server]},
                      {mod_team_sup,"4358.600.0",supervisor,[mod_team_sup]},
                      {mod_family_manager,"4358.596.0",worker,[mod_family_manager]},
                      {mod_family_sup,"4358.595.0",supervisor,[mod_family_sup]},
                      {mod_family_data_server,"4358.594.0",worker,
                          [mod_family_data_server]},
                      {mgeew_country_treasure_log_server,"4358.593.0",worker,
                          [mgeew_country_treasure_log_server]},
                      {mgeew_bank_sheet_log_server,"4358.592.0",worker,
                          [mgeew_bank_sheet_log_server]},
                      {mgeew_loop_mission_log_server,"4358.591.0",worker,
                          [mgeew_loop_mission_log_server]},
                      {mgeew_mission_log_server,"4358.590.0",worker,
                          [mgeew_mission_log_server]},
                      {mgeew_super_item_log_server,"4358.589.0",worker,
                          [mgeew_super_item_log_server]},
                      {mgeew_pet_log_server,"4358.588.0",worker,
                          [mgeew_pet_log_server]},
                      {common_item_log_server,"4358.587.0",worker,
                          [common_item_log_server]},
                      {common_general_log_server,"4358.586.0",worker,
                          [common_general_log_server]},
                      {mgeew_consume_log_server,"4358.585.0",worker,
                          [mgeew_consume_log_server]},
                      {mgeew_behavior_log_server,"4358.584.0",worker,
                          [mgeew_behavior_log_server]},
                      {mgeew_system_buff,"4358.583.0",worker,[mgeew_system_buff]},
                      {mgeew_event,"4358.582.0",worker,[mgeew_event]},
                      {mgeew_office,"4358.581.0",worker,[mgeew_office]},
                      {mgeew_pay_server,"4358.577.0",worker,[mgeew_pay_server]},
                      {mgeew_user_event,"4358.576.0",worker,[mgeew_user_event]},
                      {db_role_rank_info_subscriber,"4358.574.0",worker,
                          [db_subscriber]},
                      {db_role_friend_subscriber,"4358.572.0",worker,[db_subscriber]},
                      {db_role_exe_fb_info_subscriber,"4358.570.0",worker,
                          [db_subscriber]},
                      {db_role_sq_fb_info_subscriber,"4358.568.0",worker,
                          [db_subscriber]},
                      {db_family_donate_subscriber,"4358.566.0",worker,
                          [db_subscriber]},
                      {db_activity_reward_subscriber,"4358.564.0",worker,
                          [db_subscriber]},
                      {db_world_counter_subscriber,"4358.562.0",worker,
                          [db_subscriber]},
                      {db_offline_msg_subscriber,"4358.560.0",worker,[db_subscriber]},
                      {db_role_money_event_counter_subscriber,"4358.558.0",worker,
                          [db_subscriber]},
                      {db_money_event_subscriber,"4358.556.0",worker,[db_subscriber]},
                      {db_role_rece_flowers_this_week_rank_subscriber,"4358.554.0",
                          worker,
                          [db_subscriber]},
                      {db_role_give_flowers_this_week_rank_subscriber,"4358.552.0",
                          worker,
                          [db_subscriber]},
                      {db_role_rece_flowers_last_week_rank_subscriber,"4358.550.0",
                          worker,
                          [db_subscriber]},
                      {db_role_give_flowers_last_week_rank_subscriber,"4358.548.0",
                          worker,
                          [db_subscriber]},
                      {db_role_rece_flowers_yesterday_rank_subscriber,"4358.546.0",
                          worker,
                          [db_subscriber]},
                      {db_role_rece_flowers_today_rank_subscriber,"4358.544.0",
                          worker,
                          [db_subscriber]},
                      {db_role_rece_flowers_rank_subscriber,"4358.542.0",worker,
                          [db_subscriber]},
                      {db_role_give_flowers_yesterday_rank_subscriber,"4358.540.0",
                          worker,
                          [db_subscriber]},
                      {db_role_give_flowers_today_rank_subscriber,"4358.538.0",
                          worker,
                          [db_subscriber]},
                      {db_role_give_flowers_rank_subscriber,"4358.536.0",worker,
                          [db_subscriber]},
                      {db_event_state_subscriber,"4358.534.0",worker,[db_subscriber]},
                      {db_waroffaction_counter_subscriber,"4358.532.0",worker,
                          [db_subscriber]},
                      {db_waroffaction_record_subscriber,"4358.530.0",worker,
                          [db_subscriber]},
                      {db_faction_subscriber,"4358.528.0",worker,[db_subscriber]},
                      {db_pay_log_index_subscriber,"4358.526.0",worker,
                          [db_subscriber]},
                      {db_pay_log_subscriber,"4358.524.0",worker,[db_subscriber]},
                      {db_pet_understanding_rank_subscriber,"4358.522.0",worker,
                          [db_subscriber]},
                      {db_role_pet_rank_subscriber,"4358.520.0",worker,
                          [db_subscriber]},
                      {db_family_gongxun_persistent_rank_subscriber,"4358.518.0",
                          worker,
                          [db_subscriber]},
                      {db_role_yesterday_gongxun_rank_subscriber,"4358.516.0",worker,
                          [db_subscriber]},
                      {db_role_today_gongxun_rank_subscriber,"4358.514.0",worker,
                          [db_subscriber]},
                      {db_role_gongxun_rank_subscriber,"4358.512.0",worker,
                          [db_subscriber]},
                      {db_equip_stone_rank_subscriber,"4358.510.0",worker,
                          [db_subscriber]},
                      {db_equip_reinforce_rank_subscriber,"4358.508.0",worker,
                          [db_subscriber]},
                      {db_magic_equip_rank_subscriber,"4358.506.0",worker,
                          [db_subscriber]},
                      {db_equip_refining_rank_subscriber,"4358.504.0",worker,
                          [db_subscriber]},
                      {db_family_active_rank_subscriber,"4358.502.0",worker,
                          [db_subscriber]},
                      {db_role_world_pkpoint_rank_subscriber,"4358.500.0",worker,
                          [db_subscriber]},
                      {db_role_pkpoint_rank_subscriber,"4358.498.0",worker,
                          [db_subscriber]},
                      {db_role_level_rank_subscriber,"4358.496.0",worker,
                          [db_subscriber]},
                      {db_system_config_subscriber,"4358.494.0",worker,
                          [db_subscriber]},
                      {db_shortcut_bar_subscriber,"4358.492.0",worker,[db_subscriber]},
                      {db_bank_sheets_subscriber,"4358.490.0",worker,[db_subscriber]},
                      {db_common_letter_subscriber,"4358.488.0",worker,
                          [db_subscriber]},
                      {db_family_assets_subscriber,"4358.486.0",worker,
                          [db_subscriber]},
                      {db_family_skill_research_subscriber,"4358.484.0",worker,
                          [db_subscriber]},
                      {db_warofking_subscriber,"4358.482.0",worker,[db_subscriber]},
                      {db_title_counter_subscriber,"4358.480.0",worker,
                          [db_subscriber]},
                      {db_spec_title_subscriber,"4358.478.0",worker,[db_subscriber]},
                      {db_normal_title_subscriber,"4358.476.0",worker,[db_subscriber]},
                      {db_warofking_history_index_subscriber,"4358.474.0",worker,
                          [db_subscriber]},
                      {db_family_request_subscriber,"4358.472.0",worker,
                          [db_subscriber]},
                      {db_family_invite_subscriber,"4358.470.0",worker,
                          [db_subscriber]},
                      {db_role_family_parttake_subscriber,"4358.468.0",worker,
                          [db_subscriber]},
                      {db_family_ext_subscriber,"4358.466.0",worker,[db_subscriber]},
                      {db_family_subscriber,"4358.464.0",worker,[db_subscriber]},
                      {db_role_ext_subscriber,"4358.462.0",worker,[db_subscriber]},
                      {db_role_attr_subscriber,"4358.460.0",worker,[db_subscriber]},
                      {db_role_base_subscriber,"4358.458.0",worker,[db_subscriber]},
                      {db_family_counter_subscriber,"4358.456.0",worker,
                          [db_subscriber]},
                      {db_broadcast_message_subscriber,"4358.454.0",worker,
                          [db_subscriber]},
                      {db_bank_buy_subscriber,"4358.452.0",worker,[db_subscriber]},
                      {db_bank_sell_subscriber,"4358.450.0",worker,[db_subscriber]},
                      {db_sheet_counter_subscriber,"4358.448.0",worker,
                          [db_subscriber]},
                      {mgeew_config,"4358.58.0",worker,[mgeew_config]},
                      {common_role_line_map,"4358.57.0",worker,
                          [common_role_line_map]}
                     ]
                    ]
                },
                {lists,append,2},
                {process_info,get_by_supervisors,3},
                {process_info,mark_supervisors_workers,3},
                {process_info,fix_links,3},
                {process_info,build_graph,5},
                {process_info,start_collecting_data,3},
                {process_info,handle_call,3}
               ]
        } 
```

当我启动 erlang 节点并通过 webtool:start(standard_path,[{port,8888},{bind_address,{0,0,0,0}},{server_name, "kfweb"}]) 启动 webtool 时。并启动 WebAppmon 并单击进程以显示它的进程树。并且它无法在 shell 中显示和获取错误。谁能告诉我发生了什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:16:41.853

```
vi /dist/src/otp_src_R14A/lib/appmon/src/process_info.erl
%%%%%%%%%%%%%%%%
Find:
Children = supervisor:which_children(Pid),
Chg With:
    case supervisor:which_children(Pid) of
    [_] = Children ->
        next;
    _ ->
        Children = []
    end,
%%%%%%%%%%%%%%%%
cd /dist/src/otp_src_R14A
make
make install
%%%%%%%%%%%%%%%%
mt_common:load_nodes(process_info). 
```

# java - Java-WS UnsupportedEncodingException

> ID：10159227
> 
> 赞同：0
> 
> 时间：2012-04-15T03:12:42.380
> 
> 标签：java, web-services, jboss, jax-ws

当我尝试使用在 JBoss 4.0.2 上运行的 web 服务时，它返回以下错误

```
org.apache.axis2.AxisFault: java.io.UnsupportedEncodingException: utf-8,text/xml
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:83)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.sendUsingOutputStream(CommonsHTTPTransportSender.java:330)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:213)
    at org.apache.axis2.engine.AxisEngine.sendFault(AxisEngine.java:530)
    at org.apache.axis2.transport.http.AxisServlet.handleFault(AxisServlet.java:414)
    at org.apache.axis2.transport.http.AxisServlet.processAxisFault(AxisServlet.java:377)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:165)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    ...
Caused by: javax.xml.stream.XMLStreamException: java.io.UnsupportedEncodingException: utf-8,text/xml
    at com.ctc.wstx.stax.WstxOutputFactory.createSW(WstxOutputFactory.java:257)
    at com.ctc.wstx.stax.WstxOutputFactory.createXMLStreamWriter(WstxOutputFactory.java:124)
    at org.apache.axiom.om.util.StAXUtils$5.run(StAXUtils.java:252)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.axiom.om.util.StAXUtils.createXMLStreamWriter(StAXUtils.java:248)
    at org.apache.axiom.om.impl.MTOMXMLStreamWriter.&lt;init&gt;(MTOMXMLStreamWriter.java:94)
    at org.apache.axiom.om.impl.llom.OMNodeImpl.serializeAndConsume(OMNodeImpl.java:470)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:79)
    ... 30 more
Caused by: java.io.UnsupportedEncodingException: utf-8,text/xml
    at sun.nio.cs.StreamEncoder.forOutputStreamWriter(StreamEncoder.java:42)
    at java.io.OutputStreamWriter.&lt;init&gt;(OutputStreamWriter.java:83)
    at com.ctc.wstx.stax.WstxOutputFactory.createSW(WstxOutputFactory.java:253) 
```

环顾四周，这似乎是 JAX-WS 的问题。这里有几个支持这个结论的错误报告

*   [http://java.net/jira/browse/JAX_WS-793](http://java.net/jira/browse/JAX_WS-793)
*   [http://java.net/jira/browse/WSIT-285](http://java.net/jira/browse/WSIT-285)

很难判断 JBoss 包含哪个版本的 JAX-WS，因为它实际上是 AXIS2 包的一部分，但我最好的猜测是它是 1.4 版。JBoss 是否有解决此问题的方法，还是需要不同版本的 JAX-WS？我对 JBoss 一点也不熟悉，所以我不知道是否可以将 JAR 换成新版本。

# css - 如何基于base64对css中的图片路径进行编码？

> ID：10159228
> 
> 赞同：0
> 
> 时间：2012-04-15T03:13:04.077
> 
> 标签：css, encoding, assets

我最近遇到了一些网站，他们的网站资产（徽标、资源图片）如下所示：

```
background: url("data:image/gif;base64,R0lGODlhbAAbAMQAADRNU////8PAvwCq3KunpYeCf+fm5RSGp3BpZgDW7tvZ2WRdWaCbmVhQTRSltPPy8re0sszMzHt1cgDs9xTBwJOOjBCNsgC/5TRZWBDOzd7e1vf39xCduYiCgEA3MwAAACH5BAEHAB4ALAAAAABsABsAAAX/oCeKDaEEaGBA0ui+cCzPdG3fM5HuqYHgQBtvNAzCeClZ44REdozQV9EzjVKbMl2zubBGp9UvFtZAKgiQCBLihYJ37SsyxuD9RgheJB58J9tbMWopbC55O3t8gHCKYSKDKAwvDQ87kopejlaakCoNLwsGKASYi398mlo9LUANDBGVKixHcx4VTAoMn3IoRFsBChW7SgSivzELTQbCNqpIBqwiTUtr0oy8Ww9PMc7HMQK  /AndkTL8B29go5UV+5gGXLhDup5PrSBHjI90BEcY7u  /N6WDsVEAU6D3UK0tjHg9SIMjsI7JLQ0EWTfpYG9tLo7sEuSgUD1Ggg71chD84E/7igiMgijwoeGoBb5ovgtQYSOr0TUYGHAgldON5oUMGfHRHrhnlgSchlCngx2ol8YdTAox0epVy7saDkDpW8FMBYl0+T043YYCT8EwvFyZpoXWhRcFAEgrYbW05KEyGaUBpSYRz6wwPqXxdrgcXowC6FWCBm4U5N+6Ino4paUTwYq2nwxnVBb0Q+7MirCqQ7HjtVoJTjZBeW/zhjjWM05dsiku0oZDqA3ytZMVDIQAGDB6P8JOxakDgAWM8BHhDIJ8N24BEd8Aa4wxgrM2ukMEwYPx5D83nodHpLt5X95JBgRSBv8sNBgvv3HVArmIiE9kCutQege0hkNQJTv/zAwV8FDDLIQUzqNUGbC6HMI1kYAwb0QGgjxLbFDwcMIKKIB4xQwHwRKdFbLQS+5t6F97SG3X9PeQDAiCIC8IIEBEBigADfzUCUACjCSM+LAWomQF1kVIAREjABcIAFB+gYAgA7") no-repeat scroll 0 0 transparent; 
```

这怎么可能？以及我们如何在我们的网站中进行这种编码？

**编辑**
在这一点上我不是很好，如果可能的话，请多帮忙以获得答案，我对我的图片进行了编码，得到的代码太长了大约 2 页，现在我在 css 中添加了它但没有成功！ ！（顺便说一句，这有助于提高性能吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T03:33:51.610

如上所述，它不是加密而是编码；基本上，它与您通常引用的外部嵌入到 css 中的资源相同。您可以尝试自己制作或使用[在线提供的众多工具之一](http://dataurl.net/#dataurlmaker)；[wiki 文章](http://en.wikipedia.org/wiki/Data_URI_scheme)也非常详尽。

虽然它不提供任何内容保护（即任何人仍然可以保存文件），但如果使用得当，它确实提供了一些好处。主要的一个是更少的 http 请求——而不是请求每个单独的图像资源，它们已经全部下载了！只是不要将您网站的*所有*图形转储到 css 文件中，而是坚持使用几乎每个页面上使用的元素。

IMO，另一个很大的好处是更容易的资源管理。您可以有效地对单个图形文件进行操作（没有背景出血伪影等），而不是精灵小图标 - 但您不会因此而受到显着文件大小开销的惩罚（建议在启用 gzip 的情况下低至 3%）。

基本上除了IE7之外的所有浏览器都在一定程度上支持该方法。关于内容类型/大小还有一些进一步的限制（例如 IE8 最大 32kb）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T03:21:23.887

图像源只是使用 BASE-64 编码。它更快。如果你想解码这个使用例如[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)并选择导出到`.bin`文件。比保存，将扩展名更改为 .gif 和瞧。:)

正如我所写的那样，它更快，但在我看来不太方便。

# c - 验证用户输入的文件名

> ID：10159230
> 
> 赞同：2
> 
> 时间：2012-04-15T03:14:33.460
> 
> 标签：c

如果我要让用户输入文件的文件名（允许空格）并验证它以查看它是否是错误的文件名，我该怎么做？

现在我能想到的唯一方法是创建 char 数组

```
char filename[100] 
```

并使用 for 循环并嵌套 if 语句来检查字符串的每个字符是否为 !@%^*~| 等等通过像这样的写作行

```
for(...) {
    if(filename[i] == '@'){...}
    if(filename[i] == '!'){...}
} 
```

有没有更好的方法来解决这个问题？因为如果我这样做，我会有很多单独的 if 语句来测试所有可能的非法字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T03:33:30.240

你可以使用[`strchr`](http://www.cplusplus.com/reference/clibrary/cstring/strchr/)它，如果返回不为空，你发现了一个坏字符。

```
char bad_chars[] = "!@%^*~|";
char invalid_found = FALSE;
int i;
for (i = 0; i < strlen(bad_chars); ++i) {
    if (strchr(filename, bad_chars[i]) != NULL) {
        invalid_found = TRUE;
        break;
    }
}
if (invalid_found) {
    printf("Invalid file name");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T03:36:58.253

你可以试试正则表达式：

```
#include <stdlib.h> 
#include <string.h>
#include <regex.h>

int main (void) {
    char fileName[100];
    int comp; 
    regex_t myregex; 

    // Compile the regular expression 
    comp = regcomp(&myregex, "^[a-zA-Z0-9.' '\[\]_-]+$", REG_EXTENDED | REG_NOSUB) ;

    printf("Enter a file name\n");
    scanf("%s",fileName) ; 

    // Compare fileName to the regex 
    if (!regexec(&myregex, fileName, 0 , 0 , 0)) {
        printf("fileName %s is valid.\n", fileName);  
    } else {
        printf("fileName %s is invalid.\n", fileName);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T03:59:09.453

这可能是一个独特的解决方案（我没有足够的关于您的应用程序的信息，所以无论如何我都会发布它），但是如果您只想要字母数字名称，您可以比较一系列字符的整数值，这将是一个简单的（ r) if 语句：

如果您想查看它是小写/大写还是数字：

**//伪** if(0-9, az, AZ)continue;

否则拒绝；

```
for(i=0;...;...){
    if((filename[i]==32)||(filename[i]>47 && filename[i]<58 )||(filename[i]>64 && filename[i]<91)||
    (filename[i]>96 && filename[i]<123))
        continue;
else{
...//reject filename
} 
```

或者，您可以查看它是否是非字母数字...

```
for(i=0;...;...){
    if((filename[i]<=47) || (filename[i]<=64 && filename[i]>=58) ||
    (filename[i]<=96 && filename[i]<=91) || (filename[i]<=123)){
        reject;
    else{
        ...//nothing
    } 
```

[http://www.asciitable.com/](http://www.asciitable.com/)

# linux - 如何用双引号将名称中包含空格的名称

> ID：10159235
> 
> 赞同：1
> 
> 时间：2012-04-15T03:15:33.483
> 
> 标签：linux, bash

错误：似乎它显示为 _ 而不是

文件树如下所示：

```
.
|-- Christina Aguilera
|   |-- Back To Basics . Ain't No Other Man.mp3 
```

但是，脚本显示了这一点：

```
.
|-- Christina Aguilera
|   |-- Back To Basics _ Ain't No Other Man.mp3 
```

编码：

```
 tag=$(tail -c 128 $path)
    song_name=$(echo "$tag" | cut -c 4-33 | sed -r 's/ +$//')
    artist_name=$(echo "$tag" | cut -c 34-63 | sed -r 's/ +$//')
    album_name=$(echo "$tag" | cut -c 64-93 | sed -r 's/ +$//')
    test -e "$2/$artist_name" || mkdir "$2/$artist_name"
    ln -s $path "$2/$artist_name/$album_name _ $song_name.mp3"
done 
```

如何编辑此代码以解决错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:28:42.627

一些想法：

*   尝试运行脚本以显示调试信息。这应该向您准确显示错误发生的位置。`bash -x *script*`

*   当你写一个问题时，包括将重现错误的*最小的完整片段，以及错误消息的**确切*文本。

*   您评论说“它只是说它无法创建目录。” 这听起来像是`mkdir`失败了。顶级目录（即，无论`$2`是什么）是否存在？如果没有，请使用`mkdir -p "$2/$artist_name"`创建整个路径。

*   一个小的简化：`sed -r 's/ +$//'`你可以使用`tr -d ' '`而不是使用来删除空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:28:35.177

首先，您的输出将显示为“ `_`”，并且您想将其替换为“ `.`”，您需要做的就是将“ `_`”替换为“ `.`”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T03:26:11.013

我不确定我是否理解这个问题，但看起来脚本的最后一行正在引入`_`，所以只需将其更改为 a `.`。那是你想要的吗？

# c++ - 使用光流进行特征跟踪

> ID：10159236
> 
> 赞同：24
> 
> 时间：2012-04-15T03:15:50.060
> 
> 标签：c++, opencv, computer-vision

我在论坛里发现了一个[类似的问题](https://stackoverflow.com/questions/9701276/opencv-tracking-using-optical-flow/9702540#comment13031247_9702540)。但是那里的答案并没有回答我的问题。

*   如果我**在第一张图片上只做一次**特征检测（goodFeaturesToTrack） ，然后使用光流（calcOpticalFlowPyrLK）跟踪这些特征，问题是：只能跟踪在第一张图片上检测到的特征。当这些特征超出图像时，将没有要跟踪的特征。

*   如果我**对每张新图像**进行特征检测，特征跟踪是不稳定的，因为上次检测到的特征这次可能检测不到。

我正在使用光流进行 3D 重建。所以我对跟踪什么特征不感兴趣，相反，我只关心视野中的特征是否可以稳定地跟踪。总而言之，**我的问题是**：如何使用光流跟踪旧特征，同时添加进入视野的新图像特征并删除超出视野的旧特征？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T10:14:22.897

几种方法是可能的。一个好的方法是这样的：

1.  在第 1 帧中检测 N 个特征，这是**关键帧**m=1
2.  在第 k 帧中，通过光流跟踪特征
3.  如果成功跟踪的特征数量下降到 N/2 以下，则在第 k 帧中：
    *   这一帧是**关键帧**m+1
    *   计算描述**关键帧**m 和 m+1之间运动的单应性或基本矩阵
    *   检测 N 个特征并丢弃旧特征
    *   k := k+1 转到 2

在这种方法中，您基本上可以估计最后两个关键帧之间的相机运动。

由于您没有提到用于 3D 重建的方法，我假设**H**或**F**首先被计算为估计运动。为了准确地估计它们，关键帧之间的基线应该尽可能宽。一般来说，最好的策略是考虑相机的粗略运动模型。如果相机是用手握住的，则与将相机固定在汽车或机器人顶部时相比，应该使用不同的策略。如果有帮助，我可以在 Python 中提供一个最小的工作示例，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:04:58.927

仅出于文档目的，光流跟踪有几个很好的 GPU / C++ 实现。您的代码可能更适合您的目的，但如果您只需要轨道的输出数据，请考虑检查以下任何来源：[here](http://www.eecs.berkeley.edu/~narayans/Software.html)、[here](http://lmb.informatik.uni-freiburg.de/Publications/2010/Bro10e/)或[here](http://gpu4vision.icg.tugraz.at/index.php?content=subsites/flowlib/flowlib.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T20:39:30.000

还有另一种向现有功能添加新功能的好方法。您可以将掩码传递到`cv::goodFeaturesToTrack()`. 因此，您将创建一个新 Mat（与原始图像大小相同`type: CV_8UC1`），将所有像素设置为 255，并将每个特征点作为黑色圆圈绘制到该 Mat 中。当您将此掩码传递给`goodFeaturesToTrack()`那些黑色圆圈时，该功能将跳过这些圆圈。

我还建议限制功能的数量。假设您将其限制为`MAX_FEATURES = 300`. 然后，您检查每个周期是否有少于`MAX_FEATURES - z (e.g. z = 30)`. 如果您这样做，请按照上述方法搜索多达 z 个新功能并将它们添加到您的功能容器中。

另请注意，您必须在跟踪失败时主动删除要素。因此，您必须查看 的状态输出`calcOpticalFlowPyrLK`。

# c - 如何找到正在运行的进程的内存泄漏？

> ID：10159239
> 
> 赞同：1
> 
> 时间：2012-04-15T03:16:36.787
> 
> 标签：c, debugging, memory-leaks

有没有办法，我可以找到正在运行的进程的内存泄漏？我可以在进程开始之前使用 Valgrind 来查找内存泄漏。我可以使用 GDB 将其附加到正在运行的进程。如何调试正在运行的进程的内存泄漏？请指教。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T03:33:27.093

Profilers 检测代码..因此您必须“通过”它们运行您的应用程序。如果您无法使用 gdb 解决问题，并且由于某种原因无法创建新实例并使用分析器进行测试，我会说您有麻烦。

# android - 以编程方式使用 SSH Android

> ID：10159241
> 
> 赞同：1
> 
> 时间：2012-04-15T03:17:19.043
> 
> 标签：android, ssh, jsch

我正在尝试使用 SSH 从我正在开发的 Android 应用程序连接到我自己的服务器，但是我一生都无法让它工作，我尝试了很多不同的东西，包括 JSch，但是我无法让它工作，我尝试的每一件事都以同样的错误告终：

```
04-14 22:06:57.329: E/AndroidRuntime(5641): FATAL EXCEPTION: main
04-14 22:06:57.329: E/AndroidRuntime(5641): java.lang.NoClassDefFoundError: com.jcraft.jsch.JSch
04-14 22:06:57.329: E/AndroidRuntime(5641):     at com.xynteq.terminal.LinuxCommandsActivity.executeRemoteCommand(LinuxCommandsActivity.java:51)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at com.xynteq.terminal.LinuxCommandsActivity.onCreate(LinuxCommandsActivity.java:25)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.os.Looper.loop(Looper.java:130)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at android.app.ActivityThread.main(ActivityThread.java:3835)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at java.lang.reflect.Method.invokeNative(Native Method)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at java.lang.reflect.Method.invoke(Method.java:507)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-14 22:06:57.329: E/AndroidRuntime(5641):     at dalvik.system.NativeStart.main(Native Method) 
```

我想想办法让这个方法工作，或者想办法在 Android 应用程序中使用 SSH，并能够执行命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:51:34.763

在 Eclipse 中：

```
Project > Properties > Java Build Path > Order and Export > Check jsch and jzlib 
```

# c++ - 在 C++ 的 for 循环中将新对象分配给变量

> ID：10159246
> 
> 赞同：0
> 
> 时间：2012-04-15T03:18:44.693
> 
> 标签：c++, performance, memory-management

希望这不是一个太基本的问题。我想知道做之间是否有区别

```
while (1) {
    int *a = new int(1);
    // Do stuff with a
} 
```

与

```
int *a;
while (1) {
    a = new int(1);
    // Do stuff with a
} 
```

在这两种情况下，相同数量的对象都是动态分配的。但是，在第一个示例中，在循环内部使用了 int 关键字这一事实会影响所使用的内存吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:23:05.737

区别在于***范围***。

```
while (1) {
    int *a = new int(1);
    // Do stuff with a

    // Don't forget to delete a.
}

// Cannot access `a` here... 
```

然而：

```
int *a;
while (1) {
    a = new int(1);
    // Do stuff with a

    // Don't forget to delete a.
}

// Can access `a` here. 
```

您的两个示例中都有[内存泄漏](https://stackoverflow.com/questions/3373854/what-is-a-memory-leak)。更喜欢[智能指针](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T03:24:46.670

它们本质上是相同的，并且几乎可以肯定会以相同的方式编译。即使他们不是，你正在进行堆分配的事实也比额外的堆栈更昂贵。

不过更喜欢第一个，因为它的范围更窄。

# android - 如何保存在 webview 中显示的图像？

> ID：10159247
> 
> 赞同：8
> 
> 时间：2012-04-15T03:19:01.213
> 
> 标签：android

我想将 webview 中显示的图像保存到本地存储中，webview 应该已经缓存了它显示的图像，我如何访问缓存的图像并将它们保存到存储中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:13:44.930

然后你必须为你的 WebView设置一个[WebViewClient并覆盖](http://developer.android.com/reference/android/webkit/WebViewClient.html)[shouldOverrideUrlLoading](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)和[onLoadResource](http://developer.android.com/reference/android/webkit/WebViewClient.html#onLoadResource%28android.webkit.WebView,%20java.lang.String%29)方法。让我给你一个简单的例子：

```
WebView yourWebView; // initialize it as always...
// this is the funny part:
yourWebView.setWebViewClient(yourWebClient);

// somewhere on your code...
WebViewClient yourWebClient = new WebViewClient(){
    // you tell the webclient you want to catch when a url is about to load
    @Override
    public boolean shouldOverrideUrlLoading(WebView  view, String  url){
        return true;
    }
    // here you execute an action when the URL you want is about to load
    @Override
    public void onLoadResource(WebView  view, String  url){
        if( url.equals("http://cnn.com") ){
            // do whatever you want
           //download the image from url and save it whereever you want
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T03:23:46.967

```
WebView webView = new WebView(this);
//your image is in webview

Picture picture = webView.capturePicture();
Canvas canvas = new Canvas();
picture.draw(canvas);
Bitmap image = Bitmap.createBitmap(picture.getWidth(),
picture.getHeight(),Config.ARGB_8888);
canvas.drawBitmap(mimage, 0, 0, null);
if(image != null) {
    ByteArrayOutputStream mByteArrayOS = new
    ByteArrayOutputStream();
    image.compress(Bitmap.CompressFormat.JPEG, 90, mByteArrayOS);
    try {
        fos = openFileOutput("image.jpg", MODE_WORLD_WRITEABLE);
        fos.write(mByteArrayOS.toByteArray());
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

尝试以上从 webView 捕获图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:14:05.770

我确实使用了上面的代码并且它“工作”，但它只产生黑色图像，所以几个小时后这里是我的更正，现在它写在外部 SD 卡上，没有弃用风险或路径问题......

```
public void captureWV() {
    Picture picture = webview.capturePicture();
    Bitmap image = Bitmap.createBitmap(picture.getWidth(),picture.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(image);
    picture.draw(canvas);
    if (image != null) {
        ByteArrayOutputStream mByteArrayOS = new ByteArrayOutputStream();
        image.compress(Bitmap.CompressFormat.JPEG, 90, mByteArrayOS);
        try {
            File sdCard = Environment.getExternalStorageDirectory();
            File dir = new File(sdCard.getAbsolutePath());
            File file = new File(dir, "filename.jpg");
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(mByteArrayOS.toByteArray());
            fos.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

这也是我的 MainActivity 的开始

```
public class MainActivity extends Activity {
private static final String URL = "http://punto.gt"; //your website
WebView webview;
// your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T09:17:24.227

也许您应该检查该文件是否存在于缓存文件中。

1.  获取 url 的哈希键。

    ```
    MessageDigest md;
    try {
        md = MessageDigest.getInstance(“SHA-1”);
    } catch (NoSuchAlgorithmException e) {
        return "";
    }
    md.update(url.getBytes());
    byte b[] = md.digest(); 
    ```

    Chromium 使用前 8 个字节的哈希码。所以也许你应该做

    ```
    int i;
    StringBuffer buf = new StringBuffer("");
    for (int offset = 0; offset < 8; ++offset) {
        i = b[8 - offset - 1];
        if (i < 0)
            i += 256;
        if (i < 16)
            buf.append("0");
        buf.append(Integer.toHexString(i));
    } 
    ```

    然后你得到哈希字符串。chromium 中的缓存文件名是 hash + "_" + fileindex，通常文件名为零。所以文件名应该是hash_0；

2 从缓存文件中获取内容。

```
try {
    input = new FileInputStream(filename);
    FileOutputStream output = new FileOutputStream("/sdcard/img.jpg"); // save to this file
    input.skip(12); // length of key
    int len = input.read() + 12; 
    input.skip(len - 1); // skip the  key and the header
    int read;
    // magic  0xd8410d97456ffaf4;
    int flag = 0;
    while ((read = input.read()) != -1) {
          if ((flag == 0 && read == 0xd8) ||
          (flag == 1 && read == 0x41) ||
          (flag == 2 && read == 0x0d) ||
          (flag == 3 && read == 0x97) ||
          (flag == 4 && read == 0x45) ||
          (flag == 5 && read == 0x6f) ||
          (flag == 6 && read == 0xfa) ||
          (flag == 7 && read == 0xf4)) {
          flag++;
          if(flag == 8) {
              // success
              break;
          }
      } else if (flag > 0) {
          flag = 0;
      }
      output.write(read);
    }
    input.close();
    output.close();
    } catch (Exception e) {
    }
    return true;
} catch (Exception e) {
    return false;
} 
```

# r - 确定包下载的数量

> ID：10159249
> 
> 赞同：7
> 
> 时间：2012-04-15T03:19:59.267
> 
> 标签：r, r-package

这可能不是该问题的合适位置，因为该站点更像是一个编码站点，但与其他选项相比，这似乎也是该问题最合适的位置。

**有没有办法确定一个 R 包被下载了多少次，或者有什么其他方法可以评估一个包的受欢迎程度？**

*如果这不是这个问题最合适的地方，我提前道歉。如果您有更好的建议，请指导我。*

# ruby-on-rails - 嵌套的 Set rails 应用程序，辅助方法不返回我需要的内容

> ID：10159251
> 
> 赞同：2
> 
> 时间：2012-04-15T03:20:50.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-sets

我在[这里](https://github.com/skyeagle)使用 Sky Eagles 嵌套镶嵌宝石。

我只允许深度为两深，并且我有一个保存前过滤器检查深度，但我似乎无法让它在视图中限制它，所以客户甚至没有选择的选项它。我正在使用所描述的视图助手，如图所示。

应用程序/视图/_form.html.erb

```
<%= form_for(@category) do |f| %>
  <p>
    <%= f.label(:name) %>
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.label(:parent_id) %>
    <%= f.select :parent_id, nested_set_options(Category.roots.to_a, @category) {|i, level| "#{'-' * level} #{i.name}" } %>
  </p>
  <p>
    <%= f.submit("Submit") %>
  </p>
<% end %> 
```

我主要感兴趣的是这个

```
<%= f.select :parent_id, nested_set_options(Category.roots.to_a, @category) {|i, level| "#{'-' * level} #{i.name}" } %> 
```

现在它总是返回嵌套集的所有级别，但我只希望显示根节点，因为我只允许两个深度。我被困在这里，因为当我在[这里](https://github.com/skyeagle/nested_set/blob/master/lib/nested_set/helper.rb#L20)查看代码时，我只看到一个包含 root 的选项，这是真的，我可以接受。我试过这样做

```
<%= f.select :parent_id, nested_set_options(Category.roots.to_a, @category) {|i, level| "#{'-' * level} #{i.name}" if i.level < 1} %> 
```

但这所做的只是将级别低于 2 的选项排除在外，我需要它实际上根本不返回它们。

那么，如何让 nested_set_options 只返回根，而不是任何具有深度的类别？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:14:46.210

我认为您在这里使用了错误的助手。`nested_set_options`也是为了得到所有的后代而写的。我建议只手动添加它：

```
f.select :parent_id, Category.roots.collect {|c| [ c.name, c.id ] } 
```

# forms - 如何使用当前日期发布验证 symfony 表单日期字段？

> ID：10159252
> 
> 赞同：0
> 
> 时间：2012-04-15T03:20:56.657
> 
> 标签：forms, date, symfony-1.4

如果 symfony1.4 及其形式，我在前/表单/后验证方面存在问题。我想用当前日期验证一个字段。由于它是当前日期，我不必明确提供它。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:22:27.240

正确的方法是将当前日期从操作传递到表单作为选项，然后从表单传递到验证器作为选项。

```
$form->addOption("name","value");
$this->validatorSchema['field']=new myValidator(array('option1'=>'value); 
```

在我们的例子中，上面的选项应该是当前日期。

# javascript - 如何将 Facebook API 与 Google Chrome 一起使用？

> ID：10159256
> 
> 赞同：2
> 
> 时间：2012-04-15T03:22:06.000
> 
> 标签：javascript, jquery, facebook, google-chrome-extension

我正在为 Google Chrome 构建一个扩展，它需要一个后台脚本来连接到 Facebook 并调用 Graph API 和 FQL。不幸的是，我在如何实现这一点上遇到了一些障碍。Chrome 使用内置的 CSP 来阻止任何内联脚本运行，我没有任何运气使用 JQuery 加载 Facebook 的 JavaScript SDK。

有人知道如何实现这一点吗？在我什至可以加载 Facebook 的 SDK 之前，我无法继续前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:36:07.530

您需要在扩展程序中编写 JavaScript 才能访问公共 Facebook API。您还需要为用户获取 OAuth2 令牌以访问他们的公共数据。以下是一些可能对您有所帮助的项目：

[https://github.com/jjNford/html5-storage](https://github.com/jjNford/html5-storage)

[https://github.com/jjNford/chrome-extension-socket](https://github.com/jjNford/chrome-extension-socket)

[https://github.com/jjNford/oauth2-chrome-extension](https://github.com/jjNford/oauth2-chrome-extension)

第一个是 HTML5 localStorage 包装器，可帮助您在浏览器存储中存储一些数据（不要存储个人数据）。第二个使用 Chrome API 在后台页面和弹出窗口之间创建一个端口，以允许双向通信，以便您可以卸载 API 请求。第三个是在 Chrome 扩展中获取 OAuth2 的解决方案——您需要根据 Facebook 的规范对其进行调整。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T22:59:05.313

如果您想使用更新速度快或比您自己的服务器更快的外部脚本，这通常是一个问题。出于安全原因，为了防止跨站点脚本，您需要在 manifest.json 文件中具有特殊权限。

```
"content_security_policy": "script-src 'self' https://connect.facebook.net; object-src 'self'" 
```

如果您准确指定要从何处加载外部脚本，则可以加载外部脚本。如果您不了解 CSP，则会导致很多问题。在最终得到答案之前，我花了几个小时试图弄清楚我的扩展程序出了什么问题。

# javascript - 为什么我可以在不是数组的对象上调用 Array.prototype.filter()？

> ID：10159258
> 
> 赞同：0
> 
> 时间：2012-04-15T03:22:41.137
> 
> 标签：javascript

```
filter    Creates a new array with all elements that pass
          the test implemented by the provided function. 
```

* * *

```
>>> 'abc'.filter(function(e){return e!='b'})
TypeError: "abc".filter is not a function

>>> Array.prototype.filter.call('abc', function(e){return e!='b'})
["a", "c"]

>>> jQuery.isArray('abc')
false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:27:15.117

所有数组方法都是通用的；即，它们适用于具有数字属性和`length`属性的任何对象。例如，请参阅[规范`Array.prototype.filter`](http://es5.github.com/#x15.4.4.20)：请注意，该算法完全是根据以下内容来表述的

> 让是使用参数`lenValue`调用`[[Get]]`内部方法的结果。`O``"length"`

或者

> 让`kPresent`是调用with argument的`[[HasProperty]]`内部方法的结果。`O``Pk`

* * *

`Array.filter`是[一个 Firefox 特定的扩展](https://developer.mozilla.org/en/New_in_JavaScript_1.6#Array_and_String_generics)，顺便说一句。跨浏览器版本是`Array.prototype.filter.call`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:28:33.033

您可以这样做，因为`Array.filter`¹被定义为泛型；例如，您可以在`NodeList`s 上调用它。这只是对开发者的一种方便。它也适用于字符串，因为在现代浏览器（除了 IE 8 和更早版本）中，您可以像访问数组索引一样访问字符串中的字符，这`filter`就是基于以下内容的内容`length`：

```
var str = "Hello, world!";

str[2] // 'l' 
```

但是，如果您计划支持 Internet Explorer 8 或更早版本，我不建议使用此功能，因为 ES5 shiv 可能不会检测到上下文是字符串的事实，这会破坏事情。

[¹以及所有其他`Array`方法。再次，在 Internet Explorer 8 和更早版本上除外。]

# android - 仅使用 Context 而不是 Activity 实例显示对话框

> ID：10159263
> 
> 赞同：2
> 
> 时间：2012-04-15T03:23:55.727
> 
> 标签：android, dialog

如果我使用 Activity 实例，我可以显示对话框，但是当我使用 Context 或 Application Context 实例时，Dialog 没有显示。

```
AlertDialog.Builder builder = new AlertDialog.Builder(activity);
            builder.setTitle(title);
            builder.setMessage(msg);

            if (null != positiveLabel) {
                builder.setPositiveButton(positiveLabel, new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {

                        dialog.cancel();
                        if (null != listener) {
                            listener.onOk();
                        }
                    }
                });
            }

            if (null != negativeLable) {
                builder.setNegativeButton(negativeLable, new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {

                        dialog.cancel();
                        if (null != listener) {
                            listener.onCancel();
                        }
                    }
                });
            }

            builder.create().show(); 
```

你能给我一个不使用 Activity 实例来显示对话框的解决方案吗

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-15T03:47:58.743

This is one of the **MOST** important things that you must always remember about Contexts. There are 2 types of contexts, `Activity contexts` and `Application contexts`. You will observe in many UI related classes, a Context is passed. This is not the Application context! In such cases you must always pass an Activity Context. Except for a `Toast`, no other UI component will work with Application context.

Application Context is always passed when you want some service or component which is Application related, like the Telephony Manager, Location Manager etc.

For UIs, you must always pass a context that is UI related which is the Activity.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T03:40:03.747

问题是我最近也面临的问题，如果没有活动实例，您将无法创建对话框。getApplicationContext() 调用也不起作用。我这样做的方法是从一个活动调用一个创建对话框的方法，并传递“this”，即对该活动的引用作为参数。

如果您打算重用此代码，作为可重用组件或作为在多个位置创建对话框的机制，请创建一个基本活动类并在其中包含此方法，并根据需要在子类活动中使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T13:15:06.960

出于某种原因 [至少在 android 2.1 中] toast 可以在应用程序上下文中，但不能在进度对话框中

MyActivity.this 是一个特定于活动的上下文，不会崩溃

MyActivity.getApplicationContext() 是全局的，会导致进度条崩溃，在以后的版本中也会触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-25T14:31:22.153

要使用上下文，它必须从创建对话框的活动中传递。这只有在您创建自己的对话框而不是使用`AlertDialog.Builder`Java 提供的对话框时才有可能。这是一个自定义的，我们将使用它来获取应用程序上下文。

```
public class CustomDialogPopUp extends Dialog implements View.OnClickListener {

public Activity a;
public Context c;
public Dialog d;
//CUSTOMIZE YOUR DIALOG AS YOU LIKE
RecyclerView pointAbsorber;
ImageButton addPoint, attachPoint;
EditText addContent;

//VERY IMPORTANT CONSTRUCTOR THAT WE SHALL USE TO GET THE CONTEXT
public CustomDialogPopUp(@NonNull Context context, Activity a, Context c) {
    super(context);
    this.a = a;
    this.c = c;
}

//INITIALIZING YOUR CUSTOM DIALOG VIEWS AND WHAT NOT. IT NEEDS AN XML FILE BY THE WAY
public void initViewSnActions(){
    pointAbsorber = findViewById(R.id.pointsRV);
    addPoint = findViewById(R.id.addPoint);
    attachPoint = findViewById(R.id.attachPoint);
    addContent = findViewById(R.id.addContent);

}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.custom_dialog);
    initViewSnActions();
}

//ON CLICK LISTENER FOR YOUR VIEWS
@Override
public void onClick(View v) {

} 
```

}

要传递应用程序上下文，必须在您希望它出现的任何类中对其进行初始化，如下所示。注意**活动**和**上下文**是如何传递的

```
NotesPopUp notesPopUp = new NotesPopUp(PersistentTest.this, getParent(), getApplicationContext());
notesPopUp.show(); 
```

# assembly - x86 程序集中令人困惑的添加命令

> ID：10159264
> 
> 赞同：-1
> 
> 时间：2012-04-15T03:24:16.533
> 
> 标签：assembly, syntax, x86, add, cmp

我正在查看一些代码，发现有两行让我感到困惑：

```
add    -0x4(%esi,%ebx,4),%eax
cmp    %eax,(%esi,%ebx,4) 
```

我已经习惯了这个标准`add src,dst`，`cmp x1,x2`而且我不确定这些行实际上在做什么。

我相信它是用 GCC 编译的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:00:03.057

那是使用 Base + (Index * Scale) + Displacement 寻址模式。至少，我是这么认为的。我对 AT&T 语法并不熟悉。我认为英特尔的语法是：

```
add eax,[esi + ebx*4 - 4]
cmp [esi + ebx*4],eax 
```

这看起来像是在索引一个整数数组（4 字节值）。想象一下，在 C 语言中，您想将某个数组元素的值添加到总数中，如下所示：

```
int a[100];
int i = 10;
int total = 0;
total += a[i-1]; 
```

现在，`esi`保持数组的地址，`ebx`保持 的值`i`，并`eax`保持值 33。你会得到：

```
add eax,[esi + ebx*4 - 4] 
```

比较指令正在测试结果 (in `eax`) 是否等于数组中的下一个值。在 C 示例中，这相当于`total`比较`a[i]`.

# google-app-engine - 静态内容更改 Google App Engine

> ID：10159265
> 
> 赞同：2
> 
> 时间：2012-04-15T03:24:40.727
> 
> 标签：google-app-engine, jakarta-ee, servlets, google-cloud-datastore

是否有可能动态更改静态内容？

我有数据`DataStorage`，而大多数 HTML/CSS/JavaScript 内容和各种模板（用于`StringTemplate`）在 servlet 部署期间复制到静态文件服务器。问题是没有内容是纯粹静态的——例如，当客户要求新图标或网页上的更改时，我必须重新部署整个 servlet，有时只是因为静态 HTML 中的微小变化。

是否有任何“类似 FTP”的存储或其他更好的方式如何将静态内容放在 GAE 上？

问候， STeN

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:40:19.657

很不幸的是，不行。您根本无法更改应用程序中的静态内容，因为我相信静态内容在部署过程中会移动到不同的、更高效的静态服务器。

您始终可以考虑通过动态处理程序提供内容 - 将静态内容存储在数据存储中或根据最新版本重定向到不同的文件。鉴于您陈述的用例，您需要类似 CMS 的功能，我认为将这些资产存储在数据存储中更有意义，最好也存储在 memcache 中，并动态提供它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T04:22:49.827

不会。一般来说，人们会重新部署整个战争。另请注意，appengine 的 cdn 有时过于热衷于缓存，并且无法手动刷新它，因此如果您的 CSS 和 JavaScript 正在更改，它可能需要 10-15 分钟才能过期。如果存在破坏事物的风险，我们有时会将内部版本号附加到这些资产中。

# c++ - 使用 WM_GETTEXT 获取窗口标题

> ID：10159278
> 
> 赞同：4
> 
> 时间：2012-04-15T03:27:32.217
> 
> 标签：c++, winapi

尝试使用以下代码获取 win32 窗口的标题，然后尝试使用 wostringstream 更改相同的窗口标题。这是获取标题的代码

```
std::wstring Window::getTitle()const
{
    int length = SendMessage(hwnd,WM_GETTEXTLENGTH,0,0);
    if(length == -1)
        return L"";
    wchar_t* buffer = new wchar_t[length+1];
    SendMessage(hwnd,WM_GETTEXT,length+1,(LPARAM)buffer);
    std::wstring str(buffer);
    delete[] buffer;

    return str;
} 
```

这是尝试使用它的代码：

```
std::wostringstream oss;

while(window->isRunning)
{

    oss.str(L"");

    oss<<window->getTitle()<<" FPS : "<<100<<" Frame Time"<<100;
    window->setText(oss.str());
} 
```

最终发生的不是显示窗口标题加上 frs 和帧时间，而是显示窗口标题，然后多次重复 FPS 和帧时间文本。我尝试在缓冲区末尾添加一个 '\0' ：

```
buffer[length] = '\0'; 
```

哪个没有解决问题。如果我从 getTitle 返回 L"some title" 一切正常，所以我认为问题出在 getTitle 函数内部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T03:38:14.207

当然，字符串将被重复。您正在获取窗口文本，添加 FPS 和帧时间，然后将窗口文本设置为修改后的字符串。下次您调用 时`getTitle`，它将返回修改后的字符串。

所以我希望如果你从窗口标题开始`foo`，你的循环的前两次迭代将导致：

```
foo FPS : 100 Frame Time100
foo FPS : 100 Frame Time100 FPS : 100 Frame Time100 
```

当您从`getTitle`. 否则，您将拥有无限增长的头衔。

# zend-framework - 在zend框架中集成phpthumb

> ID：10159281
> 
> 赞同：-1
> 
> 时间：2012-04-15T03:28:27.860
> 
> 标签：zend-framework, phpthumb

有没有一种简单的方法可以将 phpthumb 集成到 zend 框架中？如果可能，请帮助我提供示例代码，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:38:32.147

应用程序/Bootstrap.php

```
protected function _initAutoload()
{
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->registerNamespace('PhpThumb_');
    return $autoloader;
} 
```

应用程序/配置/application.ini

```
[production]
includePaths.library = APPLICATION_PATH "/../library" 
```

把文件放进去

```
library
--PhpThumb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T08:50:15.167

我的回答基于[David Weinraub 的这个回答，](https://stackoverflow.com/a/8820536/212940)因为您可能不清楚如何将该回答翻译为您的情况。我想你不会发布这个问题，否则。

我假设您使用的是[Zend Framework 推荐的目录结构](http://framework.zend.com/manual/en/project-structure.project.html)。

在您的`library`目录下创建一个`phpthumb`目录并将 zip 存档中的所有文件复制到其中。

将以下行添加到 application.ini

```
autoloadernamespaces[] = "phpthumb_" 
```

创建你的自动装载机，我的在里面`App/Loader/Autoloader/PHPThumb.php`，看起来像这样：-

```
class App_Loader_Autoloader_PHPThumb implements Zend_Loader_Autoloader_Interface
{
    public function autoload($class)
    {
        if ('phpthumb' != $class){
            return false;
        }
        require_once 'phpthumb/phpthumb.class.php';
        return $class;
    }
} 
```

在引导程序中初始化自动加载器：-

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap 
{
    protected function _initAutoloading() {
        $autoloader = Zend_Loader_Autoloader::getInstance();
        $autoloader->pushAutoloader(new App_Loader_Autoloader_PHPThumb());
    }
} 
```

完成后，您可以这样使用 php thumb：-

```
$phpthumb = new phpthumb();
var_dump($phpthumb); 
```

我只是为了实例化 phpthumb 的实例而对此进行了测试，我还没有测试它的功能。此外，您也许可以删除 phpthumb 目录中的许多文件，因为在我看来它们中的许多文件都是演示文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:55:11.957

在您的“库”文件夹中创建一个目录名称自定义。在这个“自定义”目录中，按原样放置 PHPThumb 库。基本上我们正在利用事实库目录是 include_path 的一部分。所以现在无论你想在哪里使用它，只需简单地做

```
require_once'Custom/PHPThumb/ThumbLib.inc.php' 
```

# android - ActionBarSherlock 开关切换

> ID：10159284
> 
> 赞同：2
> 
> 时间：2012-04-15T03:28:35.147
> 
> 标签：android, android-layout, android-widget, actionbarsherlock

我正在尝试在操作栏上放置一个主开关切换，但我的运气为零。有人能告诉我我做错了什么吗？谢谢你。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"> 
<item android:id="@+id/menu_item_action_provider_action_bar"> 
<Switch android:id="@+id/monitored_switch" 
            android:text="Monitored switch" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:showAsAction = "always" /> 
</item> 
</menu> 
```

和

```
public boolean onCreateOptionsMenu(Menu menu) { 
    super.onCreateOptionsMenu(menu); 
    getSupportMenuInflater().inflate(R.menu.menu, menu); 
    return true; 
} 
```

我很肯定菜单正在创建和显示，因为如果我添加它们显示的其他项目。只是不是切换..我正在测试运行 4.0.3 的 AVD 和运行 4.0.4 的手机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:34:50.820

您可以使用[`action view`](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:05:20.277

尝试这个..

```
public boolean onCreateOptionsMenu(Menu menu) { 
    getSupportMenuInflater().inflate(R.menu.menu, menu); 
    return(super.onCreateOptionsMenu(menu)); 
} 
```

我不知道这是否会为您带来任何改变，但值得一试:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:37:08.597

顺便说一句，如果您使用开关，为什么要使用 ActionBar Sherlock？开关出现在 API 14 中，它不需要兼容框架:)（我只是好奇）

# mysql - 在mysql上双重左连接和双重计数？

> ID：10159285
> 
> 赞同：0
> 
> 时间：2012-04-15T03:28:40.850
> 
> 标签：mysql, sql

```
select SQL_NO_CACHE a.id,
       date_format(a.data_cron,'%d/%m/%Y às %H:%i:%s') as data_pt,a.msgal,
       a.status,
       b.nome,
       c.msg,
       if((select count(*) from moips_temps where envio_id=a.id group by envio_id) > 0,1,0) as senvio,
       if((select count(*) from moips_temps2 where envio_id=a.id group by envio_id) > 0,1,0) as senvio2 
  from moips_envios a, 
       moips_listas b, 
       moips_msgs c 
 where a.lista_id = b.id 
   and a.msg_id = c.id 
   and a.moips_id = 44 
order by a.id desc 
```

**时间：0.0146**

```
select SQL_NO_CACHE a.id,date_format(a.data_cron,'%d/%m/%Y às %H:%i:%s') as data_pt, a.msgal, a.status, b.nome, c.msg, 
  if(count(d.envio_id) > 0,1,0) as senvio,
  if(count(e.envio_id) > 0,1,0) as senvio2 
from moips_envios a 
left join moips_temps d 
  on a.id=d.envio_id 
left join moips_temps2 e 
  on a.id=e.envio_id, moips_listas b, moips_msgs c 
where a.lista_id=b.id 
  and a.msg_id=c.id 
  and a.moips_id=25 
group by a.id 
order by a.id desc 
```

**时间：0.1107**

为什么用子查询计数更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:40:43.997

一个非常简单的、非标准的、仅在 MySQL 中可用的改进正在改变：

```
GROUP BY a.id 
ORDER BY a.id DESC 
```

至：

```
GROUP BY a.id DESC 
```

# php - CodeIgniter 表单助手文本输入字段导致 html 解析

> ID：10159286
> 
> 赞同：5
> 
> 时间：2012-04-15T03:28:43.947
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter 并在编辑表单上从数据库中提取数据。有时，此数据包含撇号、& 符号等。

我怎样才能让 CI 不解析它并将其更改为 HTML 版本，以便最终用户可以编辑它。！

**这是编辑表单的图像，此文本字段具有从数据库中提取的数据并填充到输入文本字段中。如下图所示，数据不包含任何特殊字符。**

![在此处输入图像描述](../Images/bb330d894e681491bb5a98634f37973f.png)

这是表格中数据外观的屏幕截图，注意我只是从最右边的列中提取。不是第 4 列： ![在此处输入图像描述](../Images/e98495910fe6c7c92e70693e96f14b8f.png)

正如您所知道的那样，数据并未存储为转换后的 html，但 CI 仍在转换它。

**以下是上述文本字段的片段：**

```
<?php    
/**
 * Form Field attribute settings
 * @author Mike DeVita
 */
$companyname = array(
    'name'  => 'companyname',
    'placeholder' => 'Enter Your Companies Name',
    'id'    => 'companyname',
    'value' => set_value('', $points['pointFields']['companyname']->uf_fieldvalue),
    'maxlength' => 80,
    'size'  => 30
);
            <div class="_100">
                <p><?php echo form_label('Company Name', $companyname['id']); ?><?php echo form_input($companyname); ?></p>
                <?php echo form_error($companyname['id']); ?>
            </div> 
```

**这是插入数据库的片段：**

```
function addUserFieldHtml($compiledHtml){
    foreach ($compiledHtml as $cHK => $cHV){
        $data = array (
            'pointid' => $cHV['pointId'],
            'timestamp' => time(),
            'html' => $cHV['html'],
            'fieldid' => $cHV['fieldId'],
            'fieldvalue' => $cHV['fieldValue']
        );
        $this->db->insert('userfields', $data);

    }
}#end addUserFieldHtml() function 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:45:49.603

问题在这里：

```
$companyname = array(
    'value' => set_value('', $points['pointFields']['companyname']->uf_fieldvalue),
); 
```

`set_value()`将一些字符转换为实体，并且只能在原始 HTML 中使用 - 不能传递给任何表单辅助函数，如下所示：

```
<input name="email" value="<?php echo set_value('email'); ?>"> 
```

这将调用`form_prep()`转义输入字符串的函数，如下所示：

```
<input name="username" value="<?php echo form_prep($row->username); ?>"> 
```

因此，只需将您的配置更改为`value`：

```
$companyname = array(
    'value' => $points['pointFields']['companyname']->uf_fieldvalue,
); 
```

...并且当与`form_input()`或任何其他用于显示输入的[表单辅助函数](http://codeigniter.com/user_guide/helpers/form_helper.html)`value`一起使用时，将为您正确转义。例如：

```
echo form_input('myinput', '</div>"someJunkInput"<?php'); // Good to go 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:25:17.663

CodeIgniter 在 post 变量中自动处理魔术引号，并确保 post 变量不带有任何额外的斜杠。

因此，您必须确保在使用 simple_query() 或 query() 运行查询之前通过 addlashes() 传递数据。这可确保您的查询正常且不受 sql 注入的影响。在插入数据库之前不要使用 htmlspecialchars() 或 htmlentities()。那是错误的做法。

但是，如果您使用 $this->db->insert(); 或 $this->db->update() 您不需要在发布数据上应用 addlashes() 。

现在在渲染数据之前，在视图中使用 htmlspecialchars()。这将为您提供针对 XSS 攻击的保护。

```
<input value="<?php=htmlspecialchars($val)?>" type="button"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:16:45.350

我这样使用它：

```
$tavall = html_entity_decode($task->description, ENT_QUOTES, 'UTF-8'); 
```

然后在表单输入中（在我的情况下为 textarea）：

```
form_textarea(array(
    'name'          => 'task_description',
    'id'            => 'task_description',
    'value'         => set_value('task_description', $tavall), // 
    'rows'          => 10,
    'cols'          => 40,
)) 
```

文本输入也一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-07T10:42:23.463

来自 CodeIgnitor 3.0 文档：

```
set_value($field[, $default = ''[, $html_escape = TRUE]])
Parameters: 
$field (string) – Field name
$default (string) – Default value
$html_escape (bool) – Whether to turn off HTML escaping of the value
Returns:    
Field value

Return type:    
string 
```

*允许您设置输入表单或文本区域的值。您必须通过函数的第一个参数提供字段名称。第二个（可选）参数允许您为表单设置默认值。第三个（可选）参数允许您关闭值的 HTML 转义，以防您需要结合使用此功能，即 form_input() 并避免双重转义。*

通过将第三个参数设置为 false，您可以防止转换引号，如下所示：

```
 ....
 'value' => set_value('control_name',$control[0]['control_name'],false),
  .... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T23:17:09.390

当您使用 set_value() 时，CodeIgniter 会自动通过 htmlspecialchars() 传递 $_POST 数组。如果您查看 form_helper.php 中的 set_value() 函数，您会看到所需的值是通过 form_prep() 传递的，它在所需字段上执行 htmlspecialchars()。

为了避免这种情况，您需要扩展 form_helper 添加第三个可选参数来跳过 form_prep() 执行。只需将以下代码复制到 MY_form_helper.php 并将其复制到 application/helpers/

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/**
 * Form Value
 *
 * Grabs a value from the POST array for the specified field so you can
 * re-populate an input field or textarea.  If Form Validation
 * is active it retrieves the info from the validation class
 * NEW: Added a third parameter prep to skip htmlspecialchars escaping
 *
 * @access  public
 * @param   string
 * @return  mixed
 */
if ( ! function_exists('set_value'))
{
    function set_value($field = '', $default = '', $prep = true)
    {
        if (FALSE === ($OBJ =& _get_validation_object()))
        {
            if ( ! isset($_POST[$field]))
            {
                return $default;
            }

            return $prep ? form_prep($_POST[$field], $field) : $_POST[$field];
        }

        return $prep ? form_prep($OBJ->set_value($field, $default), $field) : $OBJ->set_value($field, $default);
    }
}

/* End of file MY_form_helper.php */
/* Location: ./application/helpers/MY_form_helper.php */ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-16T17:00:57.573

使用此代码：

```
$test = 'hello "B"';
set_value('test', $test, false) 
```

# java - 动画一条从一点到一点的线

> ID：10159291
> 
> 赞同：1
> 
> 时间：2012-04-15T03:30:18.110
> 
> 标签：java, swing, animation, javafx

嗨，我在解决一个问题时遇到了问题，我需要解决这个问题才能继续我正在做的项目。我想将一条线从 JPanel 的一角动画到由用户输入的角度确定的面板边框上的任意点。

很多与此类似的帖子都建议使用增加一条线的 x2、y2 的摆动计时器，但我的问题是我不知道要绘制的线，因为它是由我必须编写的函数确定的考虑到角度（斜率）。

假设它恰好是 30 度......我不能只增加 x2 和 y2 因为我不知道上升和运行是以像素为单位的动画正确的角度线......

是否有任何函数可以帮助解决这个问题，可能在数学或任何东西中......我也在研究 javafx.animation

我不是在寻找解决方案，只是为了指出正确的方向，我想谢谢

 **从另一篇文章**编辑**
： 嗨，我正在尝试做一个项目，该项目基本上显示了一个台球穿过台球桌的路径。我了解基本的三角函数，但我没有使用 Java 动画的经验。**

 **现在我有一个用作台球桌的JPanel。球总是从某个点开始。

我知道如何使用paint()“绘制”线条，但我怎样才能轻松地对其进行动画处理。

我的预感是通过使用带有摆动计时器的循环来为球的路径设置动画（基本上是为增长线设置动画），从而导致每次传球都有延迟，并在循环的每次传球时绘制线的下一个像素。我的问题是如何引用这些像素值。例如，如果线是水平或垂直的，您可以只增加 y2 或 x2 值并在每次通过时重新绘制线，但如果线的斜率能够改变，我了解如何获得线的端点，但是每个线上的活动像素坐标。我可以用某种方法“绘制”一个线对象并以某种方式引用其路径中的每个像素吗？我对 PathIterator() 进行了一些研究，但我不相信我在正确的轨道上（或者我更担心我不是在最简单、更高级别的轨道上）。

有没有更简单的方法可以做到这一点，或者我至少在正确的轨道上？我正在自己研究，但我很担心，因为它是针对学校的一个软件工程项目，而动画方面确实阻碍了我们的团队。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:26:15.077

一旦你弄清楚了三角函数，就去`Math`上课。这些[方法](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#method_summary)包括计算顶部顶点所需像素高度所需的常用 sin、cos、tan 方法。但请注意，这些方法以弧度为单位，因此在使用它们时需要将它们从度数转换为弧度。 [`Math.PI`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#PI)将对此有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T03:40:23.613

> 我的预感是通过使用带有摆动计时器的循环来为球的路径设置动画（基本上是为增长线设置动画），从而导致每次传球都有延迟，并在循环的每次传球时绘制线的下一个像素。

是的，这差不多。

> 我的问题是如何引用这些像素值。

我不会担心像素值。而是将您的问题分成其组成部分-

*   给你的类一个 int 常量来表示时间片长度。您可能希望对此进行试验。
*   有球的物理代码，这将了解球在每个时间片的位置
*   有单独的代码在它的当前位置绘制球。
*   计时器将更新时间，并调用您的物理代码来更新球的位置。物理部分将设置描述该位置的类字段（可能是ballX 和ballY 变量），然后调用`repaint()`JPanel 的`paintComponent(...)`方法可以使用ballX 和ballY 变量在正确的位置绘制球。
*   对程序的逻辑和视图部分使用单独的类是最好的，但在早期阶段可能没有必要。**

# android - 如何查询android sqlite数据库并将结果存储在可以在webview中显示的字符串中？

> ID：10159292
> 
> 赞同：1
> 
> 时间：2012-04-15T03:31:23.407
> 
> 标签：android, html, sqlite, webview, cursor

我已经阅读了大量有关该主题的文章和书籍。在大多数情况下，对android开发有一个不错的掌握。但是我很难合并数据库。我有一个名为“图书馆”的数据库。在数据库中，我有一个名为“Books”的表。在“书籍”表中，我有 3 列“id、Book、Chapter”。我想引用基于 Book 字段的 Chapter 字段，例如..."Select Chapter FROM Books WHERE Book ="Genesis1";。Chapter 字段的内容是纯 html，所以我想保存我的输出查询一个字符串，然后将该字符串放入 webview，目的是让我可以创建一个搜索框或小部件，以使用户能够搜索所有书籍内容。这是我目前所拥有的：

常量.java

```
package watchtower.library.org;

import android.provider.BaseColumns;

public interface Constants extends BaseColumns {
public static final String TABLE_NAME = "Books";

public static final String Book = "book";
public static final String Chapter = "chapter";
} 
```

图书馆数据.java

```
package watchtower.library.org;

import static android.provider.BaseColumns._ID;
import static watchtower.library.org.Constants.TABLE_NAME;
import static watchtower.library.org.Constants.Book;
import static watchtower.library.org.Constants.Chapter;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class LibraryData extends SQLiteOpenHelper {
private static final String DATABASE_NAME = "WatchtowerLibrary.db";
private static final int DATABASE_VERSION = 1;

public LibraryData(Context ctx){
    super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
}
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + TABLE_NAME +"( +_ID" 
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + Book
            + " INTEGER," + Chapter + " TEXT NOT NULL);");

}
@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

}
} 
```

Genesis1.java

```
package watchtower.library.org;

import static watchtower.library.org.Constants.TABLE_NAME;
import static watchtower.library.org.Constants.Chapter;
import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Bundle;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class Genesis1 extends Activity {
private LibraryData WatchtowerLibrary;
private Cursor getEvents() {
    SQLiteDatabase db = WatchtowerLibrary.getReadableDatabase();
    Cursor cursor = db.rawQuery("SELECT Chapter" + "FROM" + TABLE_NAME + "WHERE                                                                                                              
Book is Genesis1", null); 
    startManagingCursor(cursor);
    return cursor;
}
private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.scriptures);

    webView = (WebView) findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient());
    webView.setWebChromeClient(new WebChromeClient());   
}
} 
```

这就是我卡住的地方！哈哈！我可能已经偏离轨道了。我很乐意为您提供任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:47:31.193

这部分代码：

```
Cursor cursor = db.rawQuery("SELECT Chapter" + "FROM" + TABLE_NAME + 
"WHERE  Book is Genesis1", null); 
```

需要这样

```
Cursor cursor = db.rawQuery("SELECT Chapter FROM " + TABLE_NAME + " WHERE                 
Book is Genesis1", null); 
```

猜猜有什么区别？适当的空间...

# valgrind - 为什么 Valgrind 在有效块内报告读/写错误？

> ID：10159293
> 
> 赞同：1
> 
> 时间：2012-04-15T03:31:54.787
> 
> 标签：valgrind

所以给定这个输出：

```
==80518== Invalid read of size 4
==80518==    at 0x558D: Node::ReadFolder(GFile*) (in ./ScribeRecoverMail2)
==80518==    by 0x7B61: Worker::Export(GFile*, GArray<Node*>&) (in ./ScribeRecoverMail2)
==80518==    by 0x8F7A: Worker::Main() (in ./ScribeRecoverMail2)
==80518==    by 0x142D64: ThreadEntryPoint(void*) (in /Users/matthew/Code/Scribe-Branches/v2.00/Utils/ScribeRecoverMail2/build/Debug/ScribeRecoverMail2.app/Contents/Frameworks/Lgi.framework/Versions/A/Lgi)
==80518==    by 0x47E258: _pthread_start (in /usr/lib/libSystem.B.dylib)
==80518==    by 0x47E0DD: thread_start (in /usr/lib/libSystem.B.dylib)
==80518==  Address 0x1d72f590 is 16 bytes inside a block of size 72 alloc'd
==80518==    at 0x41581: malloc (vg_replace_malloc.c:266)
==80518==    by 0x3D5616: operator new(unsigned long) (in /usr/lib/libstdc++.6.0.9.dylib)
==80518==    by 0x77A6: Worker::Scan(GFile*, GArray<Node*>&) (in ./ScribeRecoverMail2)
==80518==    by 0x8F0C: Worker::Main() (in ./ScribeRecoverMail2)
==80518==    by 0x142D64: ThreadEntryPoint(void*) (in /Users/matthew/Code/Scribe-Branches/v2.00/Utils/ScribeRecoverMail2/build/Debug/ScribeRecoverMail2.app/Contents/Frameworks/Lgi.framework/Versions/A/Lgi)
==80518==    by 0x47E258: _pthread_start (in /usr/lib/libSystem.B.dylib)
==80518==    by 0x47E0DD: thread_start (in /usr/lib/libSystem.B.dylib)
==80518== 
==80518== Invalid read of size 4
==80518==    at 0x10B70F: GFile::Read(void*, int, int) (in /Users/matthew/Code/Scribe-Branches/v2.00/Utils/ScribeRecoverMail2/build/Debug/ScribeRecoverMail2.app/Contents/Frameworks/Lgi.framework/Versions/A/Lgi)
==80518==    by 0x360E: Node::Read(GFile*, unsigned int&) (in ./ScribeRecoverMail2)
==80518==    by 0x55CF: Node::ReadFolder(GFile*) (in ./ScribeRecoverMail2)
==80518==    by 0x7B61: Worker::Export(GFile*, GArray<Node*>&) (in ./ScribeRecoverMail2)
==80518==    by 0x8F7A: Worker::Main() (in ./ScribeRecoverMail2)
==80518==    by 0x142D64: ThreadEntryPoint(void*) (in /Users/matthew/Code/Scribe-Branches/v2.00/Utils/ScribeRecoverMail2/build/Debug/ScribeRecoverMail2.app/Contents/Frameworks/Lgi.framework/Versions/A/Lgi)
==80518==    by 0x47E258: _pthread_start (in /usr/lib/libSystem.B.dylib)
==80518==    by 0x47E0DD: thread_start (in /usr/lib/libSystem.B.dylib)
==80518==  Address 0x1a198900 is 0 bytes inside a block of size 24 alloc'd
==80518==    at 0x41581: malloc (vg_replace_malloc.c:266)
==80518==    by 0x3D5616: operator new(unsigned long) (in /usr/lib/libstdc++.6.0.9.dylib)
==80518==    by 0xDFADB: GFile::GFile() (in /Users/matthew/Code/Scribe-Branches/v2.00/Utils/ScribeRecoverMail2/build/Debug/ScribeRecoverMail2.app/Contents/Frameworks/Lgi.framework/Versions/A/Lgi)
==80518==    by 0x8E4E: Worker::Main() (in ./ScribeRecoverMail2)
==80518==    by 0x142D64: ThreadEntryPoint(void*) (in /Users/matthew/Code/Scribe-Branches/v2.00/Utils/ScribeRecoverMail2/build/Debug/ScribeRecoverMail2.app/Contents/Frameworks/Lgi.framework/Versions/A/Lgi)
==80518==    by 0x47E258: _pthread_start (in /usr/lib/libSystem.B.dylib)
==80518==    by 0x47E0DD: thread_start (in /usr/lib/libSystem.B.dylib) 
```

Valgrind 似乎在抱怨正常的日常行为。有问题的块仍然被分配，并且访问是在内存块的开始和结束内。那么为什么 valgrind 会抱怨呢？

这个程序确实在 Windows 上崩溃了，所以我在 Mac 上构建了它来验证它，看看哪里出了问题。到目前为止，这些“块内错误”警告很多，但没有像“写入释放的内存”或任何东西这样可疑的东西。我很困惑。

PS 运行最新的稳定 valgrind v3.7.0，在我运行它的同一台机器上编译和安装。我已经使用 valgrind 很长时间了，以前从未见过这种消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:02:48.510

> Valgrind 似乎在抱怨正常的日常行为

确实如此，这似乎是 Mac OSX 版本的 Valgrind 中的一个错误。

您可以尝试创建一个小测试用例并将其报告给 Valgrind 开发人员。

您也可以尝试使用[地址消毒剂](http://code.google.com/p/address-sanitizer/)并查看它报告的内容。

# objective-c - 从已经初始化的其他类调用 NSView

> ID：10159295
> 
> 赞同：0
> 
> 时间：2012-04-15T03:32:19.473
> 
> 标签：objective-c, xcode, cocoa, initialization

如何调用已经用另一个窗口初始化的 NSView？

```
newContentView = [[CutoutView alloc]initWithFrame:window.frame]; //make a new CutoutView
    [window setContentView:newContentView]; //set it as the contentview of our window
    [newContentView release]; 
```

newContentView 是一个 NSView 子类，它被设置为我的窗口的 contentView。在 NSView 子类“CutoutView”中，我让它绘制了一个简单的矩形。

在另一个 NSView 子类中，我希望能够告诉 newContentView 或只是 CutoutView 它需要重绘，`[setNeedsDisplay:YES]`但我能想到的唯一方法是制作另一个`[[CutoutView alloc] init];`，当我这样做并且调用 set 需要显示没有任何效果时。它说它正在执行它，但是它没有显示可能是因为 CutOutView 已经初始化。我怎样才能访问 newContentView 或只是从它已经初始化的地方访问 CutoutView 以便它实际显示。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T04:23:45.680

因此，首先，您需要获取对`CutoutView`您创建的特定实例的引用，以便您可以告诉该特定实例重新显示自身。

您可以通过以下几种方式执行此操作：

*   如果您仍有参考`window`，只需调用`[[window contentView] setNeedsDisplay:YES]`.
*   使 newContentView 成为特定类的属性，以便您的其他类可以访问它...从根本上讲，您必须了解类的实际工作方式才能回答您的问题，因为这不是技术问题，而是概念性的一。

* * *

所以第一个问题是你认为你的`CutoutView`代表一个对象，正如你所说的，“已经被初始化了”。这是错误的思考方式。`CutoutView`是一个类，而不是一个实例。

你可能已经听说过关于类和蓝图的比喻，所以我将使用稍微不同的东西。`CutoutView`是丰田普锐斯——不是汽车，而是模型，有设计蓝图和制造过程等等。路上有成千上万的普锐斯，同样的方式可能有成千上万的`CutoutView`.

您的问题似乎暗示您认为`CutoutView`这是一辆汽车，是一辆普锐斯坐在车道上的物理表现；但它基本上不是。

* * *

一个*类*是一个模型，丰田普锐斯的设计/品牌，甚至是[尼米兹级航空母舰](http://en.wikipedia.org/wiki/Nimitz_class_aircraft_carrier)，它描述了一种船（其中有 10 艘）。这些*课程*本身并没有多大意义。

*对象*或类的*实例*是您*的*程序使用的实际事物。这就是代码中的*newContentView*。您只是比喻性地告诉了它：（我希望这是有道理的）

```
NimitzClassCarrier *USSGeorgeHWBush = [[NimitzClassCarrier constructBoat] prepareForLaunch]; 
```

![在此处输入图像描述](../Images/df51977466a9adf1b2ec55d715b71d37.png)

^ 乔治·H·W·布什号航空母舰于 2009 年完工，并于当年年初`alloc`被委托、编辑并交付给海军。`init`

![在此处输入图像描述](../Images/ce3789e4f9e4aa0f00bf27e37d32aec3.png)

^*尼米兹号航空母舰*是尼米兹级航母的另一个例子*。*

您已经创建了该类的一个*实例*，`CutoutView`因此您可以实际使用它。您可以创建同一类的多个*实例/对象*；毕竟有 10 艘尼米兹级航母。

* * *

**因此**，

你不能通过打电话告诉 USS George HW Bush 发射它的飞机

```
NimitzClassCarrier *aCarrier = [[NimitzCarrierClass construct] prepareForLaunch];
[aCarrier launchPlanes]; 
```

考虑一下。你所做的只是花费数百万建造另一艘你称为“aCarrier”（一个不太适合航海的名字）的航母，并告诉它发射它的飞机。

**相反**，您想要做的是实际获得对乔治·H·W·布什号航空母舰本身的*参考，以告诉它发射飞机。*所以现在让我们回到你的`CutoutView`. 您创建了一个实例`CutoutView`并将其发送到您的窗口进行显示。然后，您基本上通过放开*引用*来切断您与该实例之间的直接无线电链接（因为我假设您再次与 NewContentView 无关。

`CutoutView`幸运的是，该窗口仍然与您创建的实例有直接的无线电通信链接。因此，我建议的第一个选项是 call `[[window contentView] setNeedsDisplay:YES]`，它告诉您的特定实例*获取*`NSWindow`它`contentView`恰好是您要显示的*实例。*`CutoutView`

毕竟，你可以做你想做的事情的方法是无穷无尽的。您可以保持与您的航空母舰的直接无线电通信链接，并将该通信方式提供给您希望能够发送航空母舰消息的其他 NSView 实例。您可以切断与 的所有直接通信`contentView`并让窗口处理这一切，告诉 NSView 的另一个实例向窗口询问无线电线路。

^(*[顺便说一句，你到底是怎么和航空母舰沟通的？我不认为它是无线电......在Objective-C中它有一个指向载体/对象的内存地址的指针，但船完全是另一个世界。]*)

或者，如果按照上面`rdelmar`的评论方式询问，`instance`您希望能够与 contentView 通信的 NSView 实际上是 contentView 的子视图......好吧，这样想吧。第 15 艘救生艇希望能够告诉乔治·H·W·布什号航空母舰发射它的飞机。如何？`[[self parentBoat] launchPlanes]`. 这转化为`[[self superview (a.k.a. parentNSView)] setDisplayNeeded:YES]`.

另请参阅@Dmorneault 的回答，了解您可以与您刚刚发送到百慕大三角地区的受人尊敬的航空母舰建立无线电通信的其他方式。

问题是，构建一个新的`contentView/boat`并不能解决问题，这就是你想要做的，这就是你遇到的问题。

我认为我解释得不是很好，如果这对您来说不是新事物，我深表歉意，但我认为您的问题表明对课程的运作方式存在误解。我对航空母舰也一无所知，但这是我在维基百科上遇到的第一件事。

有用的概念资源：

*   [Oracle/Java 概念文档](http://docs.oracle.com/javase/tutorial/java/concepts/class.html)
*   [苹果文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:20:27.793

我不完全确定您的代码是如何设置的，但您应该使用属性来引用对象。将以下内容添加到您的 .h 文件中

```
@property (nonatomic, strong) CutoutView * newContentView; 
```

现在在您的 .m 文件中，您可以通过添加使用 self.newContentView 访问对象

```
@synthesize newContentView = _newContentView;
newContentView = [[CutoutView alloc]initWithFrame:window.frame]; //make a new CutoutView
self.newContentView = newContentView;
[window setContentView:self.newContentView]; //set it as the contentview of our window
[newContentView release]; 
```

# java - 将调试器附加到在 Netbeans（不是模拟器）中不起作用的 Android 设备

> ID：10159297
> 
> 赞同：1
> 
> 时间：2012-04-15T03:32:54.513
> 
> 标签：java, android, debugging, netbeans

尝试在 Galaxy 2 T989 上执行我的代码时，我似乎无法附加调试器。我正在使用带有标准 Android 开发插件的 Netbeans。

当我尝试附加调试器时，netbeans 中会弹出对话框。没有显示设备（我猜它默认为我的手机，因为它让我选择进程。我选择了进程（图中未显示），但是当我尝试单击确定时，它完全没有任何作用。对话框保持打开状态，没有任何变化。我的手机仍然显示“等待调试器”。

```
 //cant post image as I don't have enough points 
```

我更喜欢在手机上进行调试，因为我正在处理套接字，并且更愿意对正在传输的数据进行真实世界的模拟。我正在使用 4.0.3 SDK，代码在我的手机上的 2.3.5 上运行良好，我还没有在我的 Prime 上尝试过。

[http://i.stack.imgur.com/nZTeY.png](http://i.stack.imgur.com/nZTeY.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T18:32:25.593

我通过使用 ddms 作为设备和 netbeans 之间的桥梁来让它工作。您必须在 ddms 中配置本地调试器端口，并使用常规 java 调试器使您的 netbeans 连接到该端口。我[在我的博客上写了一篇教程文章。](http://mindstack.de/2013/11/04/debugging-android-apps-on-device-with-netbeans/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:28:04.377

1）安装usb_driver

2）在USB调试上设置您的设备选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:51:01.347

对于那些来解决这个问题的人，我找到了解决方案。它很简单。从工具进入插件菜单。完成后，进入已安装选项卡并确保您的“用户安装的插件”标记为“活动”（确保圆圈为绿色）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-19T23:57:21.327

**手机设置：**

设置->“开发者选项”->“选择 USB 配置”从列表中选择 MIDI。

**Netbeans 设置**

Options->HTML/JS Tab->Mobile Platforms->Android SDK Location 也必须正确选择 Android SDK Location 通常是：C:\Users\\AppData\Local\Android\Sdk

# queue - 如何向rabbitmq发送不同的数据？

> ID：10159305
> 
> 赞同：0
> 
> 时间：2012-04-15T03:34:07.157
> 
> 标签：queue, rabbitmq

我的工作需要队列获得 3 条不同的数据才能工作。一个 int、一个 double 和一个 int[] 列表。

从教程中，我只看到发送单个字符串。我可以在队列中发送多种类型的数据而无需将其转换为字符串吗？

编辑：我想我的工作是将所有内容转换为字符串，我可以一次提交一个，但是需要多个数据的队列呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:24:37.707

RabbitMQ 消息只是字节流。您可以在这些消息中发送您想要的任何内容，因此如果您从 Java 执行此操作，您应该选择一个序列化程序来将您的对象转换为 XML 或 JSON 或您喜欢的任何字节流：

[Java中的XML序列化？](https://stackoverflow.com/questions/35785/xml-serialization-in-java)

[http://flexjson.sourceforge.net/](http://flexjson.sourceforge.net/)

# actionscript-3 - 让我的对象在 box2d AS3.0 中飞行

> ID：10159306
> 
> 赞同：0
> 
> 时间：2012-04-15T03:34:23.457
> 
> 标签：actionscript-3, object, box2d

只是主要问题，因为在 box2d 中对象会自动下降到底部，所以我想创建我的对象飞行并保持相同的高度。

这是我从某个网络获得的代码：

```
gravityOffset.Multiply(-body.GetMass());
body.ApplyForce(gravityOffset, body.GetWorldCenter()); 
```

我的对象是飞，但它飞走了，永远不会像火箭一样回来。

我修改了这样的代码：

```
gravityOffset.x = 0;
gravityOffset.y = 0;
body.ApplyForce(gravityOffset, body.GetWorldCenter()); 
```

但它仍然缓慢地飞起来..

当飞行时间结束时，我想让它再次下降。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:44:37.487

如果您只想向空中发射一枚火箭并让它落下，那么：

```
body.ApplyImpulse(velocity,body.GetWorldCenter()); 
```

但是，如果您想要对火箭进行更多控制，而不仅仅是发射后忘记，那么它会变得有点困难。

在这种情况下，我可能会使用一些[转向行为](http://books.google.com.au/books?id=gDLpyWtFacYC&pg=PA85&source=gbs_toc_r&cad=4#v=onepage&q&f=false)并使用 seek 函数让它朝着一个向量移动（然后你可以继续把这个向量移动到任何地方让火箭跟随它）。

# c++ - 寻求一种在 C++ 中设置 128 位或更高位的位集的方法

> ID：10159307
> 
> 赞同：0
> 
> 时间：2012-04-15T03:34:55.683
> 
> 标签：c++, bitset

我在我的代码中使用了一个大数字（超过 128 位整数）。我发现 C++ 有 std::bitset 来简单一些操作，所以我不必将我的数据分成几个整数。但是我很快就发现了另一个问题，如果我必须将几个（长）整数转换为位集，那么最好的方法是什么？例如，我正在尝试将四个长整数（每个 32 位）转换为 128 位位集，以下方式不起作用，因为对于每个整数（移位操作仅适用于小于 32 的移位位）

```
std::bitset<256> b;
unsigned long v1=2, v2=9, v3=19, v4=1021;
b |= v1 | (v2<<32) | (v3<<64) | (v4<<128); 
```

现在我使用一个 for 循环来设置 bitset 上的每个位，但我正在寻找一种更有效和更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:45:39.270

这可能不是最好的选择，但这又如何呢？

```
typedef std::bitset<256> bs256;
b |= bs256(v1) | (bs256(v2) << 32) | (bs256(v3) << 64) | (bs256(v4) << 128); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:44:03.987

我认为您可能不得不在循环中一点一点地设置它们：

```
int v[4]; //< keep your bitmasks in an array
int nbits = 8 * sizeof(v[0]);
for(int i = 0; i < 128; ++i) {
  int t = v[i / nbits];
  bit.set(i, t & (1 << (i % nbits)));
} 
```

另一种方法是从中派生一个类，该类`bitset`不仅可以设置单个位，还可以设置任意位置的整个位集。

# php - 根据下拉选项重定向一个动态页面还是多个页面更好？

> ID：10159308
> 
> 赞同：1
> 
> 时间：2012-04-15T03:35:04.897
> 
> 标签：php, javascript, html, forms, drop-down-menu

我有一个带有多个选择的下拉框的表单，我将对其进行设置，以便根据选择，表单中的字段会发生变化。

我目前想到了两种方法来做到这一点（请记住，我对 Web 开发相对较新）：

*   第一种方法是使用带有 JS 函数的 HTML 页面，该函数将根据部分显示值显示特定字段，a la: `elem.style.display="inline"`或`elem.style.display="none"`
*   第二种方法是有多个页面，并根据选择的项目使用JS进行重定向。

有首选方法吗？用户是否更喜欢一种特定的方法，哪种方法更有效？我相信第二个将来会更容易管理，但我想知道它的可用性和效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:48:53.437

如今，基于下拉框或其他元素更改页面的标准方法是让 javascript 隐藏/显示页面的某些部分，或者以其他方式修改页面以适应使用 DOM 方法。

有许多 javascript 工具包可以处理编写 javascript 代码的大部分杂乱细节，这些代码会做一些棘手的事情，比如更改页面，同时确保一切都在所有浏览器上运行。一定要检查一个。[jQuery](http://jquery.com/)是最流行的工具包之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T03:49:49.833

对于用户来说，使用第一种方法通常会更好，因为不需要等待页面加载。可能在某些时候和地方使用单独的页面会更好，但在大多数情况下，我会说在一个页面上完成所有操作会更好。

以下是一些优点和缺点的快速列表

第一种方法：
优点：
1\. 没有额外的页面加载（但是如果您尝试加载太多，第一页可能会很慢）
2\. 用户更容易保持流程的流程
3\. 当页面会立即响应输入（我知道有些主观）
缺点：
1\. 维护起来可能相当复杂
2\. 随之而来的是更容易引入错误

第二种方法：
优点：
1\. 开发简单
2\. 向用户发出信号，您正在做的事情发生了变化（在某些情况下，切换页面会在用户心中产生逻辑中断。）
缺点：
1\. 可能看起来有点过时（再次是主观的）
2.后端有一些维护，以确保所有内容都能正确安全地从一个页面传递到下一个页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T03:44:56.520

不完全确定我是否理解您想要实现的目标，但我所做的是在 PHP 中构建一个“控制器”类型的页面，它将从 JavaScript/jQuery 异步接收所有帖子。然后控制器页面将根据 post 变量的内容引出它需要的任何额外形式。

所以基本上 onclick 选择将被传递给控制器​​，然后控制器将返回要由 JavaScript 发布的新 HTML 表单。

希望这不会太令人困惑，但是如果您提交项目示例，布局可能会更容易一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T03:47:26.573

第一个选项更好，因为它更快并且需要更少的 HTTP 请求。

# ruby-on-rails - collection_select 不传递下拉选择的参数

> ID：10159310
> 
> 赞同：0
> 
> 时间：2012-04-15T03:36:21.923
> 
> 标签：ruby-on-rails, forms

我正在尝试根据我在下拉菜单中选择的内容传递参数。出于某种原因，无论我在下拉菜单中选择什么，发送的唯一参数都是 "bag"=>{"id"=>"1"}}

这是我的视图代码（@bags = current_user.bags）

```
<%= form_tag(update_default_bag_path, :method => :put) do %>
  <div class="field">
    <%= collection_select :bag, :id, @bags, :id, :name, {} %>
  </div>
  ...
<% end %> 
```

无论我在下拉列表中选择什么，它总是将 current_user 的第一个包作为 params[:bag][:id] 传递。关于为什么发布的参数没有改变以及如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:13:00.557

发生这种情况的主要原因是因为在代码中出现了两次。在选择之前我试图改变一次。所以一定要检查你的代码（使用检查元素）来搜索“bag[id]”，并确保它不会出现在同一页面的其他地方！

# iphone - 后退按钮不起作用，自定义相机覆盖

> ID：10159314
> 
> 赞同：0
> 
> 时间：2012-04-15T03:37:08.317
> 
> 标签：iphone

在[此处](https://stackoverflow.com/a/10147745/251513)添加用于自定义相机叠加层的顶部导航栏后。现在我试图通过向后退按钮添加一个动作来返回上一个屏幕。我正在做的是

> -(IBAction)backButton:(id)sender {
> 
> ```
> NSLog(@"back button is clicked");
> 
> [self dismissModalViewControllerAnimated:YES]; 
> ```
> 
> }

但是，即使控制台显示转换也不会执行

> 后退按钮被点击

我也试试

> [self popToRootViewControllerAnimated:YES]

但是，它也不起作用您以前是否遇到过此问题，请咨询我。谢谢

PS：我不想使用取消按钮内置控件（当 showsZBarControls=YES 时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:11:31.233

我假设您发送此消息的控制器是模态视图控制器。你必须发送

```
dismissModalViewControllerAnimated: 
```

到实际的模态视图控制器。所以它看起来像这样

```
[self.someModalViewController dismissModalViewControllerAnimated:YES]; 
```

或者您可以将此代码添加到您的模态视图控制器

```
-(IBAction)backButton:(id)sender {

  NSLog(@"back button is clicked");

 [self dismissModalViewControllerAnimated:YES]; 
} 
```

此代码意味着您了解上一个视图中的模态视图控制器。您可能会考虑将这些视图控制器添加到 UINavigationController 中，以便处理所有这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T08:49:05.557

您可以将 ZBarViewController 声明为类 var，然后可以调用：

```
[self.yourZbarReder dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:48:05.383

我假设你正在使用 zbarreader 或类似的东西，你必须让那个实例关闭这个东西，阅读它的文档，他们清楚地说 zbar 选择器应该是关闭它自己的那个，所以让 zbarimagepicker 实例关闭它。

# algorithm - 比嵌套循环更快的算法？

> ID：10159318
> 
> 赞同：1
> 
> 时间：2012-04-15T03:38:42.697
> 
> 标签：algorithm, loops, big-o

对于 google codeJam 资格认证，问题之一是找出两个给定整数之间有多少“回收对”。

这是我的解决方案，但对于大型数据输入集来说还不够快。给定 @a = 10, @b = 200000 之类的东西，它开始变慢。

我认为我的解决方案是 O(2^n) （我还没有对大 O 分析有扎实的了解），这太可怕了。我想知道是否有一种标准方法可以用更快的算法迭代这样的两个循环？

```
def getPairs
    (@a..@b).each do |n|
      (n..@b).each do |m|
        if (containsSame(n,m)) && (isMatch(@a, n, m, @b))
          @recycledPairs += 1
        end
      end
    end
  end 
```

编辑：来自[Google CodeJam 网站](https://codingcompetitions.withgoogle.com/codejam/round/0000000000432b33/0000000000432be6#problem)：

> 假设一对不同的正整数 (n, m) 被回收，如果您可以通过将一些数字从 n 的后面移动到前面而不改变它们的顺序来获得 m。例如，(12345, 34512) 是一个循环对，因为您可以通过将 345 从 12345 的末尾移动到前面来获得 34512。请注意，n 和 m 必须具有相同的位数才能成为循环对。n 和 m 都不能有前导零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T12:55:36.430

您可以阅读[官方对此问题](https://codingcompetitions.withgoogle.com/codejam/round/0000000000432b33/0000000000432be6#analysis)的分析以获得正确的解决方案。

基本上，解决方案是计算所有大于 的不同旋转`n`，但不大于`B`每个`n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T10:53:30.403

描述说“请注意，n 和 m 必须具有相同的位数才能成为循环对。”

您的内部循环没有考虑到这一点。如果@a = 2 和@b = 20,000，那么你可以切掉整个内循环块。如果`n`是两位数，那么您只需要测试 的两位数值`m`。仔细查看内循环的上限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T10:59:35.790

从声明中：max b 最多为 2*10^6。与所有代码堵塞问题一样，您需要进行多重测试。

第 1 步：预计算。对于每个数字 n = [1..maxb]，保存所有从它循环的数字，严格小于它（每个不超过 7），例如

```
10 - 1
321 - 132, 213 
```

第 2 步：针对每个测试。从 A 到 B 遍历每个数字，并计算 A 和 B 之间“循环”的数量。

时间复杂度：步骤 1 对每个数字起作用（位数），即 O(ln n)。你必须做 b 次。总而言之O（b * ln b）。第 2 步也是如此。这在大型测试用例上的工作时间不到一秒。

# xpages - 使用链接控件访问存储为资源的文件

> ID：10159322
> 
> 赞同：1
> 
> 时间：2012-04-15T03:41:45.517
> 
> 标签：xpages

我有一组文件（DOC、XLS、PDF）存储在 Resources-Files 下。我希望能够在表单上创建一组链接以打开它们。这可以使用链接控件还是我需要做其他事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:41:36.213

您只需使用相对路径引用文件名。以下示例将创建指向 PDF 的链接：

```
<xp:link escape="true" text="Download file" id="link1" value="example.pdf">
</xp:link> 
```

# javascript - 似乎无法使用带有 JavaScript 的 node-mysql 查询特定的东西

> ID：10159323
> 
> 赞同：0
> 
> 时间：2012-04-15T03:42:19.050
> 
> 标签：javascript, mysql, node.js, node-mysql

```
p_info_query('SELECT * FROM ' + <table> + ' WHERE name = ' + user_name, password, client_connect.id, p_info, function(results) { 
```

这似乎会产生一个未知列“用户名”。我在网上搜索了一些这样做的人的例子，但我找不到任何人。我想查询特定的东西，甚至可能比较两个值，用户和密码。

有什么帮助吗？

// 为 p_info_query 函数编辑

```
function p_info_query(sql, password, client_socket_id, player_info_object, callback) {
  var result =  mysql_client.query(sql, function (error, results, fields) {
    if (error) {
        console.log('ERROR IN MYSQL LOGIN CALLBACK : '+ error);
        return false;
    }
    if (results.length  > 0) {

    // do stuff

    callback(true);
    } else {

    callback(false);
    }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:08:11.463

你的问题是你没有引用，`user_name`所以你最终得到这样的 SQL：

```
select * from table where name = whatever 
```

`whatever`的值在哪里`user_name`，像这样的未引用值被解析为标识符（本质上是该上下文中的列名），因此您的“未知列”错误。

大概`p_info_query`是您自己的东西，因为它不是[node-mysql](https://github.com/felixge/node-mysql)的一部分。您应该修改它以使用占位符，以便它可以在内部执行以下操作：

```
client.query(
    'select * from ' + table_name + ' where name = ?',
    [ user_name ],
    function(err, results, fields) { /* ... */ }
); 
```

注意`?`SQL 和`[user_name]`数组中的 。

* * *

现在我们知道是什么`p_info_query`样子了，我们也可以修复它；你应该更新它看起来更像这样：

```
function p_info_query(sql, params, password, client_socket_id, player_info_object, callback) {
  var result =  mysql_client.query(sql, params, function (error, results, fields) {
    // ... 
```

然后你可以这样说：

```
p_info_query(
  'SELECT * FROM ' + table_name + ' WHERE name = ?',
  [user_name],
  password,
  client_connect.id,
  p_info,
  function(results) { /* ... */ }
); 
```

使用占位符。

# extjs - ExtJS - 使用 roweditor 防止在网格中单击/输入编辑

> ID：10159331
> 
> 赞同：0
> 
> 时间：2012-04-15T03:44:42.530
> 
> 标签：extjs, extjs4, extjs-mvc

我想在我的网格上有一个专用的编辑工具栏按钮，并使用双击/Enter键用于其他目的。

我可以以某种方式更改行编辑器插件的单击/进入编辑行为，而不会破坏其内部结构吗？乍一看代码似乎很死板，但我想也许有人已经遇到过这个问题并且有一个创造性的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T03:48:10.723

看起来这行得通，如果有人有更好的主意，我愿意接受建议

```
plugins: [
    Ext.create('Ext.grid.plugin.RowEditing', {
        startEditByClick: function (){},
        onEnterKey: function (){}
    })
], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T09:25:31.313

在 ExtJs 4.2 中，这个解决方案不起作用。您应该覆盖`onCellClick`上面发布的方法：

```
plugins: [
    Ext.create('Ext.grid.plugin.RowEditing', {
        onCellClick: function (){}            
    })
] 
```

这对我有用。

# bash - 连接 csv 文件中的字段

> ID：10159336
> 
> 赞同：1
> 
> 时间：2012-04-15T03:45:50.577
> 
> 标签：bash, unix

我有一个包含 20 个字段的 csv 文件：v1:v20。有没有办法在 v5 之后添加另一个字段，即字段 2 到 5 的串联？例如，假设文件头是：

```
v1, v2, v3, v4, v5, v5, v7,...
a,  b,  c,  d,  e,  f,  g,.... 
```

我希望它看起来像这样：

```
v1, v2, v3, v4, v5, new.field, v5, v7,...
a,  b,  c,  d,  e,   bcde,     f,  g,... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:00:05.217

```
gawk -F ' *, *' -v OFS=',' '
{
    $6 = (NR==1 ? "new.field," : $2 $3 $4 $5 ",") $6
    print
}' input.csv 
```

* * *

### 结果：

```
v1,v2,v3,v4,v5,new.field,v5,v7,...
a,b,c,d,e,bcde,f,g,.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:10:48.940

这可能对您有用：

```
 sed 's/,/\n,/5;h;s/\n.*//;s/[, ]//g;G;s/\([^\n]*\)\n\([^\n]*\)\n/\2, \1/' file 
```

# objective-c - box2d body / cocos2d sprite 的捏合手势

> ID：10159338
> 
> 赞同：0
> 
> 时间：2012-04-15T03:46:10.300
> 
> 标签：objective-c, cocoa-touch, cocos2d-iphone, box2d, uigesturerecognizer

我想检测 cocos2d iPhone 中 box2d 身体上的夹点，但我不知道从哪里开始。这些对象是简单的 b2circleshapes。我知道 ios 有 uipinchgeasture 识别器，但我不知道这是要走的路还是如何在 box2d 对象上实现它。多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:01:00.867

试试这个 -

```
UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchGesture:)];
[self.box2d addGestureRecognizer:pinchGesture]; 
```

有了这个 -

```
- (void)pinchGesture:(UIPinchGestureRecognizer *)pinch {   
if (pinch.velocity < 0) {
    //close pinch
}
else {
    //open pinch
} 
```

}

# php - 财产存在

> ID：10159340
> 
> 赞同：0
> 
> 时间：2012-04-15T03:46:50.357
> 
> 标签：php

这段代码：

```
 $_post = &get_post($post->ID); 
 $classname = ($_post->iconsize[0] <= 128 ? 'small' : '') . 'attachment'; 
```

有时会产生此错误：

```
[Sun Apr 15 08:51:35 2012] [error] [client 180.76.5.150] PHP Notice:  Undefined property: stdClass::$iconsize in /srv/www/virtual/myblog.com/htdocs/wp-content/themes/mimbo/attachment.php on line 8 
```

我想修改该行以添加 property_exists 检查属性并默认为 '' 如果它不存在但对处理属性的语法有点不熟悉。这条线看起来如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:48:47.657

只需使用`isset`：

```
if(isset($_post->iconsize)) {
    // ...
} 
```

所以：

```
<?php
$_post = &get_post($post->ID);
$classname = (isset($_post->iconsize) && $_post->iconsize[0] <= 128 ? 'small' : '') . 'attachment';
?> 
```

# jquery - 960 网格内的中心菜单

> ID：10159347
> 
> 赞同：0
> 
> 时间：2012-04-15T03:48:38.820
> 
> 标签：jquery, html, css, 960.gs

我一直在研究 960 网格，（http://960.gs/），我使用了几年前我过去使用过的旧样式菜单，由于某种原因，960 网格，菜单是浮动的左，我希望它居中。

```
 ul#menu {
width:940px;
height:61px;
background: url(../images/menu_bg.png) no-repeat;
list-style:none;
padding-top:0;
padding-left:0;
margin: 0;
}

ul#menu li {
float:left;
}

ul#menu li a {
background: url(../images/menu_splice_color.png) no-repeat scroll top left;
display:block;
height:61px;
position:relative;
}

ul#menu li a.shel {
width:135px;
}

ul#menu li a.golf {
width:84px;
background-position:-135px 0px;
}
ul#menu li a.pro {
width:119px;
background-position:-219px 0px;
}
ul#menu li a.event {
width:94px;
background-position:-338px 0px;
}
ul#menu li a.member {
width:148px;
background-position:-432px 0px;
}
ul#menu li a.bistro {
width:91px;
background-position:-580px 0px;
}
ul#menu li a.contact {
width:115px;
background-position:-671px 0px;
}

ul#menu li a span {
    background: url(../images/menu_splice_color.png) no-repeat scroll bottom left;
    display:block;
    position:absolute;
    top:0;
    left:0px;
    height:100%;
    width:100%;
    z-index:100;
}

ul#menu li a.shel span {
background-position:0px -61px;
}

ul#menu li a.golf span {
background-position:-135px -61px;
}
ul#menu li a.pro span {
background-position:-219px -61px;
}
ul#menu li a.events span {
background-position:-338px -61px;
}
ul#menu li a.member span {
background-position:-432px -61px;
}
ul#menu li a.bistro span {
background-position:-580px -61px;
}
ul#menu li a.contact span {
background-position:-672px -61px;
} 
```

我的通用 html 标记是

```
<div class="container_16">

    <!-- Navigation Start -->
    <div class="grid_16">
        <ul id="menu">
            <li><a href="#" class="shel"><span></span></a></li>
            <li><a href="#" class="golf"><span></span></a></li>
            <li><a href="#" class="pro"><span></span></a></li>
            <li><a href="#" class="events"><span></span></a></li>
            <li><a href="#" class="member"><span></span></a></li>
            <li><a href="#" class="bistro"><span></span></a></li>
            <li><a href="#" class="contact"><span></span></a></li>
        </ul>
    </div>
    <div class="clear"></div>

</div> 
```

我使用 jquery 动画来翻转图像。

```
 $(function() {

    $("ul#menu span").css("opacity","0");

    $("ul#menu span").hover(function () {

        $(this).stop().animate({
            opacity: 1
        }, "slow");
    },

    function () {

        $(this).stop().animate({
            opacity: 0
        }, "slow");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:59:42.363

将菜单包装在容器中并将其设置为`position: relative`. 然后绝对定位`#menu`50% 从左边和`margin-left: -(outerWidth/2)`。

像这样的东西应该工作：

```
<nav id="container">
    <ul id="menu">
    ...
    </ul>
</nav> 
```

CSS：

```
#container { position: relative; } 
```

jq:

```
var $menu = $('#menu'),
    menuWidth = $menu.outerWidth();

$menu.css({
    position: 'absolute',
    left: '50%',
    margin-left: -(menuWidth/2)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:25:32.310

只需将您的菜单项定义为`display:inline-block`而不是将它们浮动到左侧，并通过将`text-align:center`属性提供给菜单的容器将它们与中心对齐，如下所示：

**CSS**

```
.container_16 {
    text-align: center;
}

ul#menu li {
    display: inline-block;
    *display:inline; /* ie7 hack, since it doesn't support inline-block */
} 
```

# java - java数独求解器值不变

> ID：10159354
> 
> 赞同：1
> 
> 时间：2012-04-15T03:50:57.663
> 
> 标签：java, multidimensional-array

我的 indexoutofbounds 问题已解决，但我的程序没有编译但打印出一个未更改的谜题.. 不知道我哪里出错了？原始拼图读取 ROM 标准输入用 0 代替数独拼图的“空”单元格。我也包含了我的arraylist 初始化程序。

```
public ArrayList<Integer> create(){

    ArrayList<Integer> possible = new ArrayList<Integer>(); 

    for(int i=1; i<10; i++){
        possible.add(i);
    }
    return possible;
  }
  public sudoku( int size )
  {
    SIZE = size;
    N = size*size;

    Grid = new int[N][N];
    for( int i = 0; i < N; i++ ) 
        for( int j = 0; j < N; j++ ) 
            Grid[i][j] = 0;
   }

  public void solve()
  { 
    int a, b, c, d, i, j, k, l; 

    int count = 0;
    int value= 0;

    for(i=0; i<N;i++){
        for(j=0; j<N;j++){  
            if(Grid[i][j]==0){

                ArrayList<Integer> possible = create();

                //check row             
                for(a=0; a<N;a++){
                    for(b=0; b<N; b++){  
                        if(Grid[a][0]==possible.get(a)){
                            possible.set(a, 0);
                        }
                    }
                }
                //check column
                for(c=0; c<N;c++){
                    for(d=0; d<N;d++){  
                        if(Grid[0][d]==possible.get(d)){
                            possible.set(d,0);
                        }
                    }
                }
                for(k=0; k<9; k++){
                    if(possible.get(k)!=0){
                        count++;
                    }
                }
                if(count==1){
                    for(l=0; l<9; l++){
                        if(possible.get(l)!=0){
                            value=possible.get(l);
                        }
                    }
                }
                Grid[i][j]=value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:58:33.910

我看到了您的问题，您在嵌套的 for 循环中多次使用 i 和 j 变量作为索引：

```
 for (i = 0; i < N; i++) { // **** you use "i" it here
     for (j = 0; j < N; j++) { // **** and "j" here
        if (Grid[i][j] == 0) {

           ArrayList<Integer> possible = create();

           for (i = 0; i < N; i++) { // **** and again here
              for (j = 0; j < N; j++) { // **** and again here
                 if (Grid[i][0] == possible.get(i)) {
                    possible.set(i, 0);
                 }
              }
           }

           for (i = 0; i < N; i++) { // **** and again here
              for (j = 0; j < N; j++) { // **** and again here
                 if (Grid[0][j] == possible.get(i)) {
                    possible.set(i, 0);
                 }
              }
           }

           // ....

           Grid[i][j] = value;
        }
     }
  } 
```

通过从 for 循环中推进索引，您可能会超过最大索引，因此当您到达底部时，您的 i 和 j 一直递增到 9，超过了行和列的大小。您几乎不应该从 for 循环内部更改 for 循环索引。您将需要重新编写此代码。

编辑：它比这更简单：您在 for 循环结束后检查 i ，因此 i 是上界的值。运行这个看看我的意思：

```
 for (i = 0; i < N; i++) {
     for (i = 0; i < N; i++) {
        System.out.println("C) i = " + i);
     }
     System.out.println("D) i = " + i);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:07:25.417

尝试打印出 possible.get(0) 以确保它不为空！如果这引发了错误，那么你去吧！

或者，您可以尝试在循环之间使用 try 语句来确定哪个部分抛出了它，如下所示。

```
try{
    ArrayList<Integer> possible = create();
}
catch(ArrayIndexOutOfBoundsException e){
         System.out.println(1);
}
try{
                //check row             
                for(i=0; i<N;i++){
                    for(j=0; j<N;j++){  
                        if(Grid[i][0]==possible.get(i)){
                            possible.set(i, 0);
                        }
                    }
                }
}
catch(ArrayIndexOutOfBoundsException e){
         System.out.println(2);
}
try{
                //check column
                for(i=0; i<N;i++){
                    for(j=0; j<N;j++){  
                        if(Grid[0][j]==possible.get(i)){
                            possible.set(i,0);
                        }
                    }
                }
}
catch(ArrayIndexOutOfBoundsException e){
         System.out.println(3);
}
try{
                for(k=0; k<9; k++){
                    if(possible.get(k)!=0){
                        count++;
                    }
                }
}
catch(ArrayIndexOutOfBoundsException e){
         System.out.println(4);
}
try{
                if(count==1){
                    for(l=0; l<9; l++){
                        if(possible.get(l)!=0){
                            value=possible.get(l);
                        }
                    }
                }
}
catch(ArrayIndexOutOfBoundsException e){
         System.out.println(5);
}
try{
                Grid[i][j]=value;}
catch(ArrayIndexOutOfBoundsException e){
         System.out.println(6);
} 
```

# php - Does PHP XMLReader::open require allow_url_fopen to be on?

> ID：10159356
> 
> 赞同：1
> 
> 时间：2012-04-15T03:51:13.380
> 
> 标签：php, xmlreader

Does PHP XMLReader::open require allow_url_fopen to be on? I found no official documents regarding this. If it is, what is the workaround if I have allow_url_fopen disabled?

# internet-explorer - backbone.js - Refresh button loads raw JSON to Internet Explorer

> ID：10159357
> 
> 赞同：1
> 
> 时间：2012-04-15T03:51:52.507
> 
> 标签：internet-explorer, backbone.js

When I hit the refresh button in Internet Explorer, my backbone.js application dumps the last JSON output it fetched to the screen. I am not using the router. I know there's a way to disable this but I can't remember. Could someone point me in the right direction?

Edit:

My application already disables cache:

```
$.ajaxSetup cache: false 
```

Also, I am performing a fetch() after the application initialises which is an anti-pattern according to the backbone docs: [http://documentcloud.github.com/backbone/#Collection-fetch](http://documentcloud.github.com/backbone/#Collection-fetch)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:33:35.237

如果将 .html 附加到 url，IE8 将正常运行。这表明 IE8 不发送正确的内容类型标头。

[正确的方法是按照 Backbone.js 网站http://backbonejs.org/#FAQ-bootstrap](http://backbonejs.org/#FAQ-bootstrap)上的建议在初始页面加载时引导所有 json 集合

# python - Python 3.1 和 MySQL？

> ID：10159358
> 
> 赞同：0
> 
> 时间：2012-04-15T03:52:01.523
> 
> 标签：python, mysql

我一直在尝试让 MySQL 与 Python 一起工作，但我找不到任何可以与它一起工作的脚本 :(

我找不到 3.1 兼容的 setuptools、easy_install 或 MySQLdb 包。我应该使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:59:18.377

看起来 PyMySQL 正在使用正确的构建选项使用 3.1，但我自己还没有尝试过： [https ://github.com/petehunt/PyMySQL/#python-3-0-support](https://github.com/petehunt/PyMySQL/#python-3-0-support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:59:43.820

如果你不使用 windows，你可以使用 mypysql [http://mypysql.sourceforge.net/](http://mypysql.sourceforge.net/)

# iis-7 - IIS7 auto rewrites when no trailing slash found

> ID：10159359
> 
> 赞同：0
> 
> 时间：2012-04-15T03:52:24.147
> 
> 标签：iis-7, url-rewriting

when I don't have a trailing slash IIS7 automatically does a redirect, how do I fix this..

so [http://mydomain.com/deals](http://mydomain.com/deals) will redirect to [http://mydomain.com/deals/](http://mydomain.com/deals/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:14:13.097

首先，您需要安装[URL Rewrite Module](http://www.iis.net/download/URLRewrite)。

然后创建这样的规则：

```
<rule name="AddTrailingSlashRule" stopProcessing="true">
    <match url="(.*[^/])$"/>
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
    </conditions>
    <action type="Redirect" url="{R:1}/" logRewrittenUrl="true"/>
</rule> 
```

# backbone.js - Backbonejs 集合长度始终为零

> ID：10159360
> 
> 赞同：2
> 
> 时间：2012-04-15T03:52:36.107
> 
> 标签：backbone.js

我在集合视图中有一个功能：

```
addAll: function() {
  console.log(this.collection);
  console.log(this.collection.length);
  console.log(this.collection.models);
  this.collection.each(this.addOne);
}, 
```

为什么结果是：

1.

```
d
_byCid: Object
_byId: Object
length: 6
models: Array[6]
__proto__: x 
```

2\. 0

3\. []

我们可以看到 this.collection 在第一个结果中有模型和长度 = 6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:52:35.513

当心[console.log 会欺骗你](https://stackoverflow.com/questions/9911637/backbone-js-model-get-returning-undefined-even-though-i-can-see-the-attribut/9912865#9912865)

# ios - Does the size of transparent area of a non-opaque image affect rendering performance?

> ID：10159362
> 
> 赞同：0
> 
> 时间：2012-04-15T03:53:07.483
> 
> 标签：ios, core-graphics

Say I have two non-opaque images of the same size and format on the same background view, one with only four corners being transparent, and the other with four corners and a center hole being transparent. Will there be any rendering performance differences when doing color blending for these two images and the background view?

More generally, if a image is non-opaque — so color blending will happen whether it is wholly transparent or only partially transparent — does the number of transparent areas and the sizes of these areas matter in the blending performance?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:52:37.003

嗯，是的......会有性能差异。在这种情况下的问题是它是否足够大让您注意到？可能不是。每当您有一个不透明的图像时，渲染引擎必须计算每个像素的颜色来渲染该图像下方的图层。您拥有的非透明像素越多，此计算需要进行的次数就越多。然而，iOS 在单精度浮点计算方面非常快（从 armv7 架构开始），因此除非您将大量图像分层，否则您不太可能注意到差异。

# android - Bluetooth remote connection with Android

> ID：10159364
> 
> 赞同：0
> 
> 时间：2012-04-15T03:56:03.520
> 
> 标签：android

I'm attempting to implement this application wrote by this guy here

[http://luugiathuy.com/2011/02/android-java-bluetooth/](http://luugiathuy.com/2011/02/android-java-bluetooth/)

I managed to compile the .apk and also the server in .jar. I run the server in my pc, already make the pc discoverable. i run the apps on the phone and manage to search for the available bluetooth device in the network. but when i try to connect, it say that unable to connect to device, any idea where i should look into next?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:27:52.813

很明显，但仍然！您是否检查过 PC 上的服务器蓝牙设备是否可*发现*（在蓝牙中可见）？

此外，您可以使用它们的**默认**软件配对 2 个设备（这将简化您的第一次连接尝试，消除配对）。

# android - Ormlite 与 MySQL

> ID：10159365
> 
> 赞同：1
> 
> 时间：2012-04-15T03:56:29.143
> 
> 标签：android, mysql, ormlite

我正在开发需要数据库的 android 应用程序。我有使用 Hibernate 的经验，但我没有尝试过，因为我听说它对于 android 来说太多了。

我按照这个不错的教程 [1] 用 sqlite 设置 ormlite。但我需要使用像 MySQL 这样的真实数据库。有没有什么好的教程可以将 MySQL 与 ormlite 一起使用？

1.  [http://logic-explained.blogspot.com/2011/12/using-ormlite-in-android-projects.html](http://logic-explained.blogspot.com/2011/12/using-ormlite-in-android-projects.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:34:55.373

> 有没有什么好的教程可以将 MySQL 与 ormlite 一起使用？

不，但是您可以查看在`HelloAndroidH2`Android 上使用 JDBC 连接到 H2 数据库的示例程序：

> [http://ormlite.com/android/examples/](http://ormlite.com/android/examples/)

您可以使用 ormlite-core 和 ormlite-jdbc 包，而不是使用 ormlite-core 和 ormlite-android 包。在示例程序中，您可以看到：

```
connectionSource =
    new JdbcConnectionSource(
            "jdbc:h2:/data/data/helloandroidh2/databases/helloAndroidH2"); 
```

该 JDBC URI 将 H2 数据库存储在本地 Android 存储上。相反，您将使用类似以下内容作为数据库 URI：

```
jdbc:mysql://my-database-host/my-database-name 
```

这种方法让我担心的一件事是 Android 不正式支持 JDBC。在下一个 Android 代码发布之前，您可能会发现一切正常。仅供参考。

# php - Good methods for loading looped queries

> ID：10159369
> 
> 赞同：0
> 
> 时间：2012-04-15T03:58:08.510
> 
> 标签：php, mysql, ajax

How can I run a file (mysql query loop) without the need to load a page. Is the only way by using a cronjob or is there any alternative solution. Solutions I tried so far: 1) Keeping the php file open and auto reload it every 10 minutes. 2) Using an ajax to load the page while the user is on the page. The problem is; The query is looped, it requires time to complete. How can this be established without the need to persist on reloading the page. Codes:

```
<meta http-equiv="refresh" content="600" >
<?php
    include("./includes/connect.php");
    $i = 1;
    $numberOfRows = mysql_query('SELECT COUNT(`id`) FROM table_name');
    $scoreboardquery = mysql_query("SELECT * FROM table_name ORDER BY points DESC");
    while(($row = mysql_fetch_assoc($scoreboardquery)) || $i<=$numberOfRows){
        $scoreid = $row['id'];
        $mysql_qeury = mysql_query("UPDATE table_name SET scoreboard_rank = '$i' WHERE id = '$scoreid'");
    $i++;
    }
            if($mysql_qeury){
            echo "Done!";
        }else
            echo "Not Done";
?> 
```

To give a clear idea about what I am trying to do. I am trying to give users a rank (1st, 2nd, 3rd) based on descending order of their points. So on the fly, if there any solution to implement what I am trying to do, better, please come forward.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:05:03.623

run it in the background, use exec to call it from the command line

something like

```
exec("nohup php file.php >/dev/null 2>&1 &"); 
```

add path to file if needed, and sometimes path to php is needed.

# c# - C# windows service location

> ID：10159371
> 
> 赞同：0
> 
> 时间：2012-04-15T03:58:40.407
> 
> 标签：c#

By using following code[C#], we can know the path where googlechrome is installed. But, this code first starts chrome.exe, then takes its path. My question is without starting chrome.exe, how can I know the path?

```
 ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.FileName = "chrome.exe";
        string argmnt = @"-g";
        startInfo.Arguments = argmnt;

        String path = null;
        try
        {
            Process p = Process.Start(startInfo);
            path = p.MainModule.FileName;
            p.Kill();
        }
        catch (Exception e)
        {
            return String.Empty;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:02:46.480

Parse the PATH environment variable and enumerate through all of the directories looking for that exe. This is essentially what the OS does when you call the p.Start method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:26:08.487

首先从 Microsoft 下载一个名为“Process Monitor”的工具：[Microsoft SysInternals 提供的 ProcessMonitor，](http://technet.microsoft.com/en-us/sysinternals/bb896645)然后启动 Chrome 以找出它的位置。

**提示：“进程监视器”实时监控硬盘驱动器、注册表和线程/进程信息，并允许您保存它捕获的跟踪。**

![在此处输入图像描述](../Images/a963f6f8014d9f3f282926ae435950b8.png)

一个。打开进程监视器，它将开始跟踪信息。

湾。通过单击放大镜工具栏按钮（它的开/关跟踪按钮）停止跟踪。

C。然后单击清除跟踪按钮以清除跟踪。

d。启动 Chrome，一旦打开，搜索 Chrome.exe，它会告诉你文件路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T05:34:55.693

使用[WHERE](http://ss64.com/nt/where.html)命令`chrome.exe`作为参数。这将告诉您将由 shell 加载的可执行文件的路径。

您只需要读回命令的输出。

这与您当前的版本一样，假定可执行文件位于系统 PATH 中。

这是一些您可以根据需要定制的代码。它本质上包装了 WHERE 命令（顺便说一句，它是一个可执行文件，因此`WHERE WHERE`将显示其路径）。

```
using System;
using System.Diagnostics;

public sealed class WhereWrapper
{
    private static string _exePath = null;

    public static int Main(string[] args) {

        int exitCode;
        string exeToFind = args.Length > 0 ? args[0] : "WHERE";

        Process whereCommand = new Process();

        whereCommand.OutputDataReceived += Where_OutputDataReceived;

        whereCommand.StartInfo.FileName = "WHERE";
        whereCommand.StartInfo.Arguments = exeToFind;
        whereCommand.StartInfo.UseShellExecute = false;
        whereCommand.StartInfo.CreateNoWindow = true;
        whereCommand.StartInfo.RedirectStandardOutput = true;
        whereCommand.StartInfo.RedirectStandardError = true;

        try  {
            whereCommand.Start();
            whereCommand.BeginOutputReadLine();
            whereCommand.BeginErrorReadLine();
            whereCommand.WaitForExit();
            exitCode = whereCommand.ExitCode;

        } catch (Exception ex) {
            exitCode = 1;
            Console.WriteLine(ex.Message);

        } finally {
            whereCommand.Close();
        }

        Console.WriteLine("The path to {0} is {1}", exeToFind, _exePath ?? "{not found}");

        return exitCode;
    }

    private static void Where_OutputDataReceived(object sender, DataReceivedEventArgs args) {

        if (args.Data != null) {
            _exePath = args.Data;
        }
    }
} 
```

# android - Android 视图 layout_width - 如何以编程方式更改？

> ID：10159372
> 
> 赞同：75
> 
> 时间：2012-04-15T03:58:51.350
> 
> 标签：android, android-layout

这是我的观点，我希望将 layout_width 更改为“10dip”。我如何以编程方式执行此操作？请注意，这不是 LinearLayout，而是 View。

```
<View 
    android:id="@+id/nutrition_bar_filled" 
    android:background="@drawable/green_rectangle" 
    android:layout_height="30dp"
    android:layout_width="50dp"/> 
```

我知道 LayoutParams。如何使用它将宽度设置为 10dip？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-04-15T07:33:29.860

我相信您的问题是仅动态更改视图的宽度，而上述方法会将布局属性完全更改为新的，因此我建议首先从视图中获取布局参数（），然后在 layoutParams 上设置宽度，最后将 layoutParams 设置为视图，所以按照下面的步骤做同样的事情。

```
View view = findViewById(R.id.nutrition_bar_filled);
LayoutParams layoutParams = view.getLayoutParams();
layoutParams.width = newWidth;
view.setLayoutParams(layoutParams); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-15T04:26:57.420

您也可以像这样设置高度和宽度：

```
viewinstance.setLayoutParams(new LayoutParams(width, height)); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-01-29T12:27:20.180

或者简单地说：

```
view.getLayoutParams().width = 400;
view.requestLayout(); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-15T04:14:59.110

尝试使用

```
View view_instance = (View)findViewById(R.id.nutrition_bar_filled);
view_instance.setWidth(10); 
```

使用[Layoutparams](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html) 来设置宽度和高度，如下所示。

```
LayoutParams lp = new LayoutParams(10,LayoutParams.wrap_content);
View_instance.setLayoutParams(lp); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-11-24T16:08:59.960

androidx( `core-ktx`) 包含一个更新布局参数的扩展函数，例如：

```
view.updateLayoutParams<ConstraintLayout.LayoutParams> {
    width = ConstraintLayout.LayoutParams.MATCH_PARENT
    // or wrap_content
    width = ConstraintLayout.LayoutParams.WRAP_CONTENT
    // or size measured in pixels
    width = 200 
} 
```

# arrays - Rotate a 2D NxN matrix in Concentric Circles

> ID：10159394
> 
> 赞同：3
> 
> 时间：2012-04-15T04:03:36.423
> 
> 标签：arrays, multidimensional-array

Given a 2D NxN matrix, visualize it as concentric circles. You have to find the rotated matrix where each element in the circle is rotated by 1 position layer by layer in an alternate clockwise and anticlockwise direction. All rotations should be in-place.

```
2 3 4 5
1 6 7 8
4 2 1 9
5 3 2 4 
```

should get transformed to

```
1 2 3 4 
4 7 1 5 
5 6 2 8 
3 2 4 9 
```

I thought about the solution

1> For clockwise circle rotation, read elements in the order

```
i -> 0 to n-1 and j = 0
j -> 0 to n-1 and i = n-1
i -> n-1 to 0 and j = n-1
j -> n-1 to 0 and i = 0 
```

2> For anti-clockwise circle rotation, read elements in the order

```
j -> 0 to n-1 and i = 0
i -> 0 to n-1 and j = n-1
j -> n-1 to 0 and i = n-1
i -> n-1 to 0 and j = 0 
```

Code

```
for(int cnt = 0; cnt < n/2; cnt++)
    {   
        if(cnt%2 == 0) // Clockwise
        {   
            i = cnt; j = cnt;
            // while loops for each case
        }
        else // anti-clockwise
        {
            i = cnt; j = cnt;
            // while loops for each case
        }       
} 
```

Is there any better approach to solve this problem in O(n2) or better ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T11:01:56.197

由于您的数组大小为 N*N，并且所需的计算要求每个元素至少访问一次，因此没有比`O(n^2)`使用二维数组更好的解决方案。

我认为如果必须在同一个阵列上一次性完成操作，您的解决方案会很好。

如果您必须在同一个输入数组上多次执行此操作，最好从输入数组创建圆。circle的数据结构应该是CLL（循环链表）。因此，多次执行该操作将是小菜一碟，因为您必须根据方向更改存储圆信息的 CLL 的根元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-11T17:30:33.003

我认为这可以在 O(n) 时间内轻松解决。

（注意：O(N) 其中 N 是矩阵元素的总数）

以下解决方案不使用四个连续循环，而是使用一个小的`[X, Y]`增量表来描述当前坐标与下一个坐标之间的差异，当下一个坐标无效（即在当前窗口之外）时，该表的索引本身是先进的，查找重复。该算法从全窗口开始，每次嵌套循环完成时从每一侧减少一个元素。整个过程一直重复，直到定义为的窗口`[minX, minY, maxX, maxY]`有效（即至少包含 2x2 个元素）。

此解决方案不实现交换 cw 和 ccw，但这是最容易添加的部分。

```
function pad(s, n) {
  while(s.length < n)
    s = " " + s;
  return s;
}

// Create a matrix of [WxH] size.
function Matrix(w, h, data) {
  if (Array.isArray(data)) {
    if (data.length !== w * h)
      throw new Error("Data.length has to match the size " + (w * h) + ".");
  }
  else {
    var n = typeof data === "number" ? data : 0.0;
    data = [];
    for (var i = 0; i < w*h; i++) data.push(n);
  }

  this.w = w;
  this.h = h;
  this.data = data;
}

// Get value at [x, y]
Matrix.prototype.get = function(x, y) {
  if (x < 0 || x >= this.w || y < 0 || y >= this.h)
    throw new Error("Index [" + x + ", " + y + "] out of bounds");
  return this.data[y * this.w + x];
}

// Set value at [x, y] and return the previous value.
Matrix.prototype.set = function(x, y, value) {
  if (x < 0 || x >= this.w || y < 0 || y >= this.h)
    throw new Error("Index [" + x + ", " + y + "] out of bounds");

  var i = y * this.w + x;
  var prev = this.data[i];

  this.data[i] = value;
  return prev;
}

// Log the matrix data.
Matrix.prototype.dump = function() {
  var s = "["
  var i = 0;
  for (var y = 0; y < this.h; y++) {
    for (var x = 0; x < this.w; x++, i++) {
      s += pad("" + this.data[i], 2);
      if (x !== this.w - 1)
        s += ","
    }
    if (y !== this.h - 1)
      s += ",\n ";
  }
  s += "]";
  console.log(s);
}

// Shift, `dir` can be "cw" or "ccw".
Matrix.prototype.shift = function(dir) {
  var instructions = {
    cw : [1, 0, 0, 1,-1, 0, 0,-1],
    ccw: [0, 1, 1, 0, 0,-1,-1, 0]
  };

  var inst = instructions[dir];

  // A window, shrink by one from each side after the nested loop is done.
  var minX = 0;
  var minY = 0;
  var maxX = this.w - 1;
  var maxY = this.h - 1;

  while (minX < maxX && minY < maxY) {
    // Always start at the top-left corner and iterate.
    var x0 = minX;
    var y0 = minY;
    var v0 = this.get(x0, y0);
    var n = 0;

    for (;;) {
      var x1 = x0 + inst[n + 0];
      var y1 = y0 + inst[n + 1];

      if (x1 < minX || x1 > maxX || y1 < minY || y1 > maxY) {
        n += 2;
        x1 = x0 + inst[n + 0];
        y1 = y0 + inst[n + 1];
      }

      v0 = this.set(x1, y1, v0);

      // Last one.
      if (x1 === minX && y1 === minY)
        break;

      x0 = x1;
      y0 = y1;
    }

    minX++;
    minY++;
    maxX--;
    maxY--;
  }
}

var a = new Matrix(3, 3, [
  1,2,3,
  4,5,6,
  7,8,9,
]);

a.dump();
a.shift("cw");
a.dump();

var b = new Matrix(4, 4, [
  1 ,2 ,3 ,4 ,
  5 ,6 ,7 ,8 ,
  9 ,10,11,12,
  13,14,15,16
]);

b.dump();
b.shift("ccw");
b.dump();
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T17:33:15.897

我最近在一次求职面试中遇到了这个问题，但我在不到一小时的时间内没有解决。

然后我回到家并用java生成了下面的代码。它是递归的，我相信它具有 O(n^2) 复杂性。您还可以在此处查看代码：[https ://github.com/lotif/rotateMatrix](https://github.com/lotif/rotateMatrix)

您必须首先输入（正方形）矩阵的维度，然后输入矩阵本身的数字，由空格分隔，一行一行。例如：

3

1 2 3

4 5 6

7 8 9

它将返回以同心圆顺时针旋转的矩阵。

```
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class RotateMatrix {

    public static void main(String args[] ) throws Exception {
        Scanner s = new Scanner(System.in);

        int d = s.nextInt();

        int[][] matrix = new int[d][d];
        for(int i = 0; i < d; i++) {
            for(int j = 0; j < d; j++) {
                matrix[i][j] = Integer.parseInt(s.next());
            }
        }

        matrix = rotate(matrix);

        for(int i = 0; i < matrix.length; i++) {
            for(int j = 0; j < matrix.length; j++) {
                System.out.print(matrix[i][j] + " ");
            }
            System.out.println();
        }

        s.close();
    }

    public static int[][] rotate(int[][] matrix) {
        if(matrix == null || matrix.length == 0 || matrix.length == 1) {
            return matrix;
        }

        List<Integer> outerCircle = getOuterCircle(matrix);
        matrix = removeOuterCircle(matrix);
        //rotating outer circle
        outerCircle.add(0, outerCircle.remove(outerCircle.size() - 1));

        matrix = rotate(matrix);

        matrix = addOuterCircle(outerCircle, matrix);

        return matrix;

    }

    private static int[][] addOuterCircle(List<Integer> outerCircle, int[][] matrix) {

        int d = matrix.length + 2;
        int[][] newMatrix = new int[d][d];

        //Adding the outer circle to the matrix
        for(int j = 0; j < d; j++) {
            newMatrix[0][j] = outerCircle.remove(0);
        }
        for(int i = 1; i < d; i++) {
            newMatrix[i][d-1] = outerCircle.remove(0);
        }
        for(int j = d-2; j >= 0; j--) {
            newMatrix[d-1][j] = outerCircle.remove(0);
        }
        for(int i = d-2; i >= 1; i--) {
            newMatrix[i][0] = outerCircle.remove(0);
        }

        //Adding the inner matrix
        for(int i = 0; i < matrix.length; i++) {
            for(int j = 0; j < matrix[i].length; j++) {
                newMatrix[i + 1][j + 1] = matrix[i][j];
            }
        }

        return newMatrix;

    }

    private static List<Integer> getOuterCircle(int[][] matrix) {
        int d = matrix.length;

        List<Integer> outerCircle = new ArrayList<Integer>();

        for(int j = 0; j < d; j++) {
            outerCircle.add(matrix[0][j]);
        }
        for(int i = 1; i < d; i++) {
            outerCircle.add(matrix[i][d-1]);
        }
        for(int j = d-2; j >= 0; j--) {
            outerCircle.add(matrix[d-1][j]);
        }
        for(int i = d-2; i >= 1; i--) {
            outerCircle.add(matrix[i][0]);
        }

        return outerCircle;
    }

    private static int[][] removeOuterCircle(int[][] matrix) {      
        int d = matrix.length;
        int[][] newMatrix = new int[d-2][d-2];

        for(int i = 1; i < d-1; i++) {
            for(int j = 1; j < d-1; j++) {
                newMatrix[i-1][j-1] = matrix[i][j];
            }
        }

        return newMatrix;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T09:05:44.677

```
public class ShiftArray {
    static void shiftArray(int[][]a, int index, int n) {
       if ((n%2 == 0) && (index >= n/2))
           return;
       if ((n%2 != 0) && (index > n/2))
           return;

       int tempRowTopLast = a[index][n-1-index]; 
       int tempColRightLast = a[n-1-index][n-1-index];
       int tempRowBottomLast = a[n-1-index][index]; 
       int tempColLeftLast = a[index][index];

       int temp, temp2;

       temp = tempColLeftLast; 

       for (int k = index + 1; k < n-index; k++) {
           temp2 = a[index][k];
           a[index][k] = temp;
           temp = temp2;
       }

       temp = tempRowTopLast; 
       for (int k = index + 1; k < n-index; k++) {
           temp2 = a[k][n-1-index];
           a[k][n-1-index] = temp; 
           temp = temp2; 
       }

       temp = tempColRightLast; 
       for (int k = n-2-index; k >=index; k--) {
           temp2 = a[n-1-index][k];
           a[n-1-index][k] = temp; 
           temp = temp2; 
       }

       temp = tempRowBottomLast;
       for (int k = n-2-index; k >=index; k--) {
           temp2 = a[k][index];
           a[k][index] = temp;
           temp = temp2;
       } 

       shiftArray(a, index+1, n);

    }

    public static void main(String[] args) {
        int a[][] = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};

        shiftArray(a, 0, 3);
        System.out.println("Rotated array...");

        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                System.out.print(a[i][j] + ",");
            }
            System.out.println();
       }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-19T11:51:11.327

顺时针旋转 90 度。Python3 中的 O(n^2) 时间和 O(1) 内存：

```
# @param A : list of list of integers
# @return the same list modified
def rotate(A):
    for row in range(len(A) // 2):
        for col in range(row, len(A)-1 - row): # First col already takes care of last.
            r = row
            c = col
            tmp1 = A[r][c]
            while True:
                next_r = c
                next_c = len(A) - 1 - r
                tmp2 = A[next_r][next_c]
                A[next_r][next_c] = tmp1
                if next_r == row and next_c == col:
                    break
                tmp1 = tmp2
                r = next_r
                c = next_c
    return A 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-02T02:21:48.217

```
import java.util.Scanner;

public class RotateMatrix
{
    static int rows = 0;
    static int cols = 0;

    public static void main(String[] args)
    {
        // TODO Auto-generated method stub
        Scanner scan = new Scanner(System.in);
        rows = scan.nextInt();
        cols = scan.nextInt();
        int rots = scan.nextInt();
        int[][] matrix = new int[rows][cols];
        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                matrix[i][j] = scan.nextInt();
            }
        }
        for (int i = 0; i < rots; i++)
            rotate(matrix, 0, rows - 1, 0, cols - 1);

        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                System.out.print(matrix[i][j] + " ");
            }
            System.out.println();
        }
        scan.close();
    }

    public static int[][] rotate(int[][] arr, int rowStart, int rowEnd, int colStart, int colEnd)
    {

        if (rowStart == rowEnd && colStart == colEnd)
        {
            return arr;
        }
        if (rowStart > rowEnd || colStart > colEnd)
        {
            return arr;
        }

        int temp = arr[rowStart][colStart];
        for (int j = colStart; j < colEnd; j++)
        {
            arr[colStart][j] = arr[colStart][j + 1];
        }
        for (int i = rowStart; i < rowEnd; i++)
        {
            arr[i][colEnd] = arr[i + 1][colEnd];
        }
        for (int i = colEnd; i > colStart; i--)
        {
            arr[rowEnd][i] = arr[rowEnd][i - 1];
        }
        for (int i = rowEnd; i > rowStart; i--)
        {
            arr[i][colStart] = arr[i - 1][colStart];
        }

        if (rows == 1)
        {
            arr[colEnd][rowStart] = temp;
        }
        else
            arr[rowStart + 1][colStart] = temp;

        System.out.println("-----------------------------------------\n");
        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                System.out.print(arr[i][j] + " ");
            }
            System.out.println();
        }
        System.out.println("-----------------------------------------\n");
        rotate(arr, rowStart + 1, rowEnd - 1, colStart + 1, colEnd - 1);
        return arr;
    }
} 
```

# javascript - List not populating with a JsonP proxy

> ID：10159398
> 
> 赞同：0
> 
> 时间：2012-04-15T04:05:04.497
> 
> 标签：javascript, list, proxy, extjs, sencha-touch-2

I want to have a Navigation view. I am trying to populate the list in Sencha Touch using a JsonP proxy.

Here's the sample code snippet of what I have tried till now :

```
var view = Ext.define('MyApp.view.NavigateView', {
    extend: 'Ext.navigation.View',
    xtype:'navigateview',

    config : {
        fullscreen:true,
        styleHtmlContent:true,
        scrollable:true,

        items : [
            {
                title:'Navigation',
                items : [
                    {
                        xtype:'list',
                        store: {
                            fields : ['title','author'],
                            proxy : {
                                type:'jsonp',
                                url:'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://feeds.feedburner.com/SenchaBlog',
                                    reader: {
                                         type: 'json',
                                         rootProperty: 'responseData.feed.entries'
                                    }
                            },
                            autoLoad:true,
                        },
                        itemTpl:'<div class="contact">{title} <strong>{author}</strong></div>',
                        listeners : {
                            itemtap : function(){
                                Ext.Msg.alert('Called');
                                }
                            }
                        }
                ],

            }
        ]   
   }
}); 
```

But the problem is, my list is not getting populated. No items are being shown up in the list.

Also, I am constantly getting this error on console.

> XMLHttpRequest cannot load [http://api.tinyhippos.com/xhr_proxy?tinyhippos_apikey=ABC&tinyhippos_rurl=list.php%3F_dc%3D1334462633038%26page%3D1%26start%3D0%26limit%3D25](http://api.tinyhippos.com/xhr_proxy?tinyhippos_apikey=ABC&tinyhippos_rurl=list.php%3F_dc%3D1334462633038%26page%3D1%26start%3D0%26limit%3D25). Origin [http://localhost](http://localhost) is not allowed by Access-Control-Allow-Origin.

Anyone please guide ? Anything that I am missing here ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:50:52.947

在跨域中使用 AJAX 请求时，我遇到了同样的错误。看看[这里](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.JsonP)

您必须确保使用 jsonp 正确配置服务器部分

作为第一步，确定当您在浏览器中禁用网络安全时您的应用程序是否能正常运行

找到您的 chrome 安装目录，然后输入您的 cmd： `chrome --disable-web-security`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:11:07.347

您的[Ext.navigation.View](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View)对象包含一个包含您的列表的[Ext.Component](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component)对象（xtype 未定义，因此默认为“组件”）。如果您将列表直接作为视图的一个项目，它将被渲染：

```
var view = Ext.define('MyApp.view.NavigateView', {
  extend: 'Ext.navigation.View',
  xtype: 'navigateview',

  config : {
    fullscreen: true,
    styleHtmlContent: true,
    scrollable: true,

    items : [{
      title: 'Navigation',
      xtype: 'list',
      store: {
        fields: ['title','author'],
        proxy: {
          type: 'jsonp',
          url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://feeds.feedburner.com/SenchaBlog',
          reader: {
            type: 'json',
            rootProperty: 'responseData.feed.entries'
          }
        },
        autoLoad:true
      },
      itemTpl: '<div class="contact">{title} <strong>{author}</strong></div>'
    }]
  }
}); 
```

注意1：不确定为什么您的代码不起作用。

注意2：您提到的错误与您的代码段无关

# java - Regarding Notify()

> ID：10159399
> 
> 赞同：1
> 
> 时间：2012-04-15T04:05:07.573
> 
> 标签：java

I was going through threads and I read that the `notify()` method is used to send a signal to one and only one of the threads that are waiting in that same object's waiting pool. The method `notifyAll()` works in the same way as `notify()`, only it sends the signal to all of the threads waiting on the `Object`.

Now my query is that if let's say I have 5 threads and one main thread, so initially the main thread starts and then five other threads start. Now I want to send notification to third thread only. How could it be possible with the use of `notify()`, since here I am sending notification to third thread only? Please advise.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:11:19.957

如果你想通知一个特定的线程，让它`wait()`在一个不同的对象上，然后调用`notify()`这个对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T05:15:10.407

[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)`synchronized`类通过允许每个对象有多个等待集，为您提供比关键字更细粒度的控制。

您可以使用ReentrantLock从[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)获取多个[条件](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)。然后一个线程可能会调用（在功能上与 类似）并将阻塞直到另一个线程调用（在功能上与 类似）。`ReentrantLock.newCondition()``Condition.await()``Object.wait()``Condition.signal()``Object.notify()`

不同之处在于您可以`Conditions`为单个`ReentrantLock`. 因此，您可以`Condition`为每个创建一个`Thread`并调用与您想要唤醒`signal()`的条件相对应的条件。`Thread`

* * *

这是一个演示上述内容的简单示例代码。它创建了 5 个`Threads`，它们都等待不同`Conditions`的相同`ReentrantLock`。然后主线程调用`signal()`以唤醒特定的`Threads`.

```
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;

public class ReentranLockTest
{
    public static void main( String[] args )
    {
        final ReentrantLock lock = new ReentrantLock( );

        int numThreads = 5;

        Condition[] conditions = new Condition[numThreads];

        // start five threads, storing their associated Conditions
        for ( int i = 0; i < numThreads; i++ )
        {
            final int threadNumber = i;

            System.out.printf( "Started thread number %d%n", threadNumber );

            // to create a Condition we must lock the associated ReentrantLock
            lock.lock( );
            try
            {
                final Condition condition = lock.newCondition( );
                conditions[i] = condition;

                // start the worker Thread
                ( new Thread( )
                {
                    @Override
                    public void run( )
                    {
                        // wait on the Condition
                        // to do so we must be holding the
                        // associated ReentrantLock
                        lock.lock( );
                        try
                        {
                            condition.await( );
                        }
                        catch ( InterruptedException e )
                        {
                            e.printStackTrace( );
                        }
                        finally
                        {
                            lock.unlock( );
                        }

                        // print something when signal()
                        // is called on our Condition
                        System.out.printf( "Thread number %d woke up!%n", threadNumber );
                    }
                } ).start( );
            }
            finally
            {
                lock.unlock( );
            }
        }

        // acquire the ReentrantLock and call
        // Condition.signal() to wake up Thread number 3    
        lock.lock( );
        try
        {
            System.out.printf( "Waking up Thead number %d%n", 3 );

            conditions[3].signal( );
        }
        finally
        {
            lock.unlock( );
        }
    }
} 
```

这应该打印以下内容：

> 启动线程号 0
> 
> 开始线程号 1
> 
> 启动线程号 2
> 
> 启动线程号 3
> 
> 启动线程号 4
> 
> 醒来头号 3
> 
> 3号线程醒了！

# c++ - 在每个类中包含相同的标题

> ID：10159404
> 
> 赞同：1
> 
> 时间：2012-04-15T04:06:42.250
> 
> 标签：c++, stl, header-files

我在项目的所有代码文件中都包含了几个 STL 标头，例如列表和矢量。我知道我自己的标题应该使用包含防护，但是当它们不是由我定义时，对于这种情况怎么办？

在我的每个文件中包含相同的标题是否很糟糕？每次包含它都会有性能损失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:09:21.243

没有性能成本。标准头文件有自己的包含保护，并且所有包含保护都由预处理器优化，因此文件实际上不会每次都重新加载。

正确性和可维护性始终是首要问题……当您重新排列文件并出现“未定义的标识符”错误或更糟时，您必须节省多少编译时间来弥补修复工作所花费的工作！

**编辑：**从所有头文件中包含相同的标准头文件并没有性能成本。从源文件中包含额外的标准头会产生一些性能成本。这个问题有点模棱两可……但无论哪种方式，C++ 编译中真正昂贵的部分通常是模板实例化，而不是解析文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:08:58.693

作为一般规则，
**您必须仅在源文件需要时才包含头文件。**

包含保护可以防止同一个头文件多次包含在同一个翻译单元中，并防止链接错误，但是，当然标准库头有自己的。

但是，请注意，如果您在不需要它们的源文件中包含头文件，那么它可能会增加您的编译并导致命名空间名称的污染。

# vba - 如何将 ActiveDocument 的句柄保存到变量中？

> ID：10159405
> 
> 赞同：3
> 
> 时间：2012-04-15T04:06:49.693
> 
> 标签：vba, ms-word

如何在 Microsoft Word 中获取 ActiveDocument 的 Windows 句柄？

我希望将句柄值保存到变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:37:14.237

您可以使用 FindWindow 函数来获取当前活动 Word 应用程序中的窗口句柄：

```
Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
(ByVal lpClassName As String, ByVal lpWindowName As String) As Long 
```

MS Word 的类名是“OpusApp”。如果您只打开了一个 Word 应用程序，则以下内容会将句柄返回到该窗口：

```
Public Function Test1()
Dim lhWnd As Long
lhWnd = FindWindow("OpusApp", vbNullString)
End Function 
```

请注意，当您有多个活动的 Word 应用程序时，您可以添加窗口标题的名称。例如，如果它保存为“Stanigator.doc”，则标题将显示为“Stanigator - Microsoft Word”。所以：

```
Public Function Test2()
Dim lhWnd As Long
lhWnd = FindWindow(vbNullString, "Stanigator - Microsoft Word")
End Function 
```

另一个可能派上用场的 API 是：

```
Private Declare Function GetActiveWindow Lib "user32" () As Long 
```

**编辑：**

我将推荐 VSTO 方法，但基于此链接似乎并不明智： [连接问题：MS Word 主窗口句柄的 VSTO API 支持](http://connect.microsoft.com/VisualStudio/feedback/details/492190/api-support-for-getting-the-main-window-handle-for-microsoft-word-via-vsto)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T03:19:56.120

正如蒂姆威廉姆斯指出的那样，它是`Set myDoc = ActiveDocument`.

# c - Using memory mapping in C to read binary files

> ID：10159408
> 
> 赞同：0
> 
> 时间：2012-04-15T04:07:17.360
> 
> 标签：c, binary, memory-mapped-files

While processing a very large binary file can using memory mapping in C make any difference when compared to fread ? Even if there are small differences in time it would be fine. And if it does make the process fsater any idea how to use memory mapping on a large binary file and extract data from it ?

Thanks!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:48:42.860

如果您要从头到尾阅读整个文件，最重要的是让平台知道这一点。这将允许它进行积极的预读，并允许它避免用无论如何都不会再次读取的数据污染缓存。您可以使用内存映射或不使用它来执行此操作。关键功能是`posix_fadvise`和`posix_madvise`。

当您有随机的小访问时，内存映射是一个巨大的胜利。当您对同一页面进行多次写入时尤其如此。如果没有内存映射，每次读取或写入都需要用户/内核转换和副本。使用内存映射，大多数操作都不会。

但是对于顺序访问，所有将保存的只是副本。奇怪的是，用户/内核转换可能更糟。对于大型顺序读取，每次读取都会获得一个用户/内核转换，如果读取量很大，则可能是每 256KB。通过对内存映射文件的大量顺序访问，您可能会在每一页 (4KB) 中出错。这取决于内核的“故障提前”优化。

但是，使用内存映射，您将保存副本，假设您无论如何都不需要进行复制。如果您出于任何原因必须从映射的页面中复制出来，那么您不妨让`read`操作将它们复制到适当的位置。但是，如果您可以对数据进行操作，那么内存映射可能是一个胜利。

它通常不会像人们认为的那样有很大的不同。尤其是当您考虑与所有这些东西相比磁盘有多慢时。

# .net - 阻止通知窗口窃取焦点

> ID：10159409
> 
> 赞同：1
> 
> 时间：2012-04-15T04:07:22.303
> 
> 标签：.net, wpf, vb.net

在我的 WPF 应用程序中，我有一个通知窗口，它在右上角显示 3 秒钟并关闭。只是一个普通的通知窗口。

但是当它出现时，它会将焦点从任何处于活动状态的窗口中移开。例如，如果我在 Chrome 中键入并出现窗口，则 chrome 会失去焦点并且我的键入会停止。

通知窗口设置为最顶部，以便它出现在其他窗口的顶部，但是我该如何阻止它窃取用户的焦点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:00:32.740

[在通知窗口中将 Window.ShowActivated 属性](http://msdn.microsoft.com/en-us/library/system.windows.window.showactivated.aspx)设置为 false。

```
var notificationWindow= new NotificationWindow{
    ShowActivated = false, Topmost = true, ShowInTaskbar = false};
notificationWindow.Show(); 
```

# sql - 2列组合上的sql唯一约束

> ID：10159411
> 
> 赞同：4
> 
> 时间：2012-04-15T04:07:36.420
> 
> 标签：sql, database, indexing, constraints

如何对两列中的两个值的组合创建唯一约束。

意义

```
column1  column2 
   2        1 
```

寻找禁止的约束

```
column1  column2 
   1        2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T07:50:07.517

如果您的数据库允许在索引中使用表达式，您可以执行以下操作（ANSI SQL）：

```
CREATE UNIQUE INDEX on your_table (least(column1, column2)
                              , greatest(column1, column2)); 
```

请注意，这是唯一**索引**而不是唯一约束。大多数 DBMS 的唯一区别是您不能将唯一索引作为外键的目标，否则它们的用途相同。

如果您的 DBMS 没有，`least()`或者`greatest()`您可以使用 CASE 表达式替换它：

```
create unique index on your_table 
  (case column1 < column2 then column1 else column2 end, 
   case column2 > column1 then column2 else column1 end)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T08:43:02.890

查看文档，为 ORACLE SGBD 找到了这个：

```
CREATE TABLE b(
 b1 INT, 
 b2 INT, 
 CONSTRAINT bu1 UNIQUE (b1, b2) 
                USING INDEX (create unique index bi on b(b1, b2)),
 CONSTRAINT bu2 UNIQUE (b2, b1) USING INDEX bi); 
```

[ORACLE 文档](https://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes003.htm#ADMIN11728)页面上的“指定与约束关联的索引”一章。

跳这个帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:09:56.003

对 2 列的唯一约束只会阻止插入那些确切的 2 个值（允许切换它们）：

所以你需要一个这样的触发器（ORACLE）：

```
 CREATE TRIGGER trig1
        BEFORE INSERT ON TAB
        REFERENCING NEW AS NEW
        FOR EACH ROW
    DECLARE
        FOUND NUMBER;
    BEGIN
        SELECT COUNT(1) into FOUND FROM TAB WHERE
        (COLUMN1=:NEW.column2 AND COLUMN2=:NEW.column1) 
         OR (COLUMN1=:NEW.column1 AND COLUMN2=:NEW.column2); 
    IF FOUND>0 THEN
    raise_application_error (-20001,'INSERT not allowed');
    END IF;
        END trig1; 
```

警告：未检查语法。

# mips - 在 MIPS 中，如何按降序打印数组

> ID：10159412
> 
> 赞同：0
> 
> 时间：2012-04-15T04:07:49.147
> 
> 标签：mips

结果：.space 8

```
 .byte    0 
```

经过一些手续

结果变成 01234567

但我想把它变成 76543210

我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:15:15.037

您可以从在数据段中正确创建一个数组开始。你也可以使用`.space`然后填写。没关系。

```
arrSize: .word     8
arr:     .word     0, 1, 2, 3, 4, 5, 6, 7 
```

接下来，继续编写打印例程。如果您提出解决方案但遇到困难，请发布该解决方案，您可能会收到解决问题区域的帮助。如果您在开始使用 MIPS 编码时需要帮助，这里有一些很好的资源：

[MIPS 架构和汇编语言](http://gicl.cs.drexel.edu/people/sevy/architecture/MIPSRef%28SPIM%29.html)

[数据和文本段](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/dataseg.html)

[MIPS 程序员指南](http://www.tik.ee.ethz.ch/education/lectures/TI1/materials/assemblylanguageprogdoc.pdf)

# asp.net - 我需要帮助将 elFinder 与 ASP.NET 集成和使用

> ID：10159413
> 
> 赞同：2
> 
> 时间：2012-04-15T04:08:03.327
> 
> 标签：asp.net, integration, file-management, elfinder

我已经玩了一天，似乎无法让它工作。

`elFinder`有许多连接选项，例如`PHP`和`Python`其他。有人为其制作了第三方`ASP.NET`连接器，据报道它可以工作。

这是它的页面`DLL`：

[http://elfinderconnectornet.codeplex.com/releases/view/55319](http://elfinderconnectornet.codeplex.com/releases/view/55319)

我在弄清楚如何将现有的`elFinder`连接到`ASP.NET`.

我希望找到有这方面经验的人，可以帮助我。我不确定我还能给你什么其他信息。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T07:28:42.863

现在有一个更好的选择，叫做[ElFinder.Net 连接器](https://elfinder.codeplex.com/)，托管在 CodePlex。端口 Evgeny Noskov 的协调员和主要开发人员是一个超级体贴的人，他会听取反馈并采取行动，正如您在我发布的讨论中看到的那样：

[将 startPath 和 uploadMaxSize 添加到连接器选项](https://elfinder.codeplex.com/discussions/441737)

* * *

我非常喜欢 elFinder.Net，以至于我写了一篇文章来展示一个非常适合它的简单用例：

[使用 elFinder.Net 管理 ASP.NET MVC 应用程序中的文件夹和文件](http://www.leniel.net/2013/04/manage-folders-and-files-in-your-aspnet-mvc-project-with-elfinder-net-file-manager.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:58:07.907

请参阅此处：[http](http://elfinderaspnet.codeplex.com/) ://elfinderaspnet.codeplex.com/ 现在它提供了一些基本功能，但似乎可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T13:32:57.457

ElFinder 非常易于配置和使用。

我对“使用 MVC 在多个页面上实现 ElFinder”进行了一些研究，发现[“ElFinder.Net 连接器”](https://elfinder.codeplex.com/) *不可*用。

[从这里](https://drive.google.com/file/d/0B-bQMqpE_InLLVFtRFFBY1Z4RjA/view?resourcekey=0-PyKXyPbT95MOaiJInlsZdQ)下载简单的 MVC 示例项目

# delphi - 为什么 Synopse 断字代码给出与 TeX 不同的结果？

> ID：10159414
> 
> 赞同：4
> 
> 时间：2012-04-15T04:08:08.717
> 
> 标签：delphi, nlp, hyphenation

这个问题遵循[上一个问题](https://stackoverflow.com/questions/10122297/how-to-use-this-hyphenation-library-in-delphi)，但有所不同。[Synopse 的 delphi hyphenation](http://synopse.info/forum/viewtopic.php?id=74)非常快，并且建立在[使用 TeX hyphenation 的 OpenOffice libhnj 库上](http://www.openoffice.org/lingucomponent/hyphenator.html)。

一个简单的测试是：

如果我输入“发音”，则 Synopse 断字输出“pro=nun=ci=ation”（4 个可能的连字符或音节）。//（不是 'pro=nun=ci=a=tion'，5 个连字符或音节）。

我阅读了 2 篇关于在音节化中使用的 Tex 连字符算法的论文（[此处](http://eprints.soton.ac.uk/264285/1/MarchandAdsettDamper_ISCA07.pdf)和[此处）。](http://web.cs.dal.ca/~adsett/publications/AdsMar_CompSyllMeth_2009.pdf)作者表示音节的准确率约为 95%。我测试了 Synopse hyphenation 仅用于计算[CMU Pronouncing Dictionary](http://www.speech.cs.cmu.edu/cgi-bin/cmudict)上的音节，但准确率只有 53% 左右。

为什么结果显着不同？

我以稍微详细的方式重现了我的方法。

我解析 CMU 发音词典以计算所有单词数。CMU dic 是这样的：

```
PRONOUNS  P R OW1 N AW0 N Z
PRONOVOST  P R OW0 N OW1 V OW0 S T
PRONTO  P R AA1 N T OW0
PRONUNCIATION  P R OW0 N AH2 N S IY0 EY1 SH AH0 N
PRONUNCIATION(1)  P R AH0 N AH2 N S IY0 EY1 SH AH0 N 
```

我会有这个结果：

```
PRONOUNS=2
PRONOVOST=3
PRONTO=2
PRONUNCIATION(1)=5 // will be ignored
PRONUNCIATION=5   // use this one 
```

与 Synopse 连字符库相比，带括号的单词将被忽略。它们是替代或次要发音（变体）。

同样，我将使用连字符库来计算 CMU 词典中每个单词的音节数。然后我比较两者，看看有多少匹配。不同音节数的单词记录如下：

```
...

94814 cmu PROMULGATED=4 | PROMULGATED=3 Synopse Hyphenation
94821 cmu PRONGER=2 | PRONGER=1 Synopse Hyphenation
94829 cmu PRONOUNCES=3 | PRONOUNCES=2 Synopse Hyphenation
94833 cmu PRONTO=2 | PRONTO=1 Synopse Hyphenation
94835 cmu PRONUNCIATION=5 | PRONUNCIATION=4 Synopse Hyphenation

... 
```

CMU的总行数为123611（不包括带括号的行和无意义的单词行，如引号行'（'）。两者的*相同*单词的总不同音节数：57870。

CMU可能不是音节数的标准。在本次测试中，(123611-57870)/123611=53.183%。这与作者在上述论文中所说的准确率有很大不同。当然，他们使用另一个数据库 (CELEX) 进行测试。为什么结果如此不同？

Synopse 连字库非常快。我想进一步了解这是否是由于模式文件（用于连字符的 dic 文件最初来自 OpenOffice 中使用的 libhnj）。还是论文的作者使用了不同的字典文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:50:35.490

*简而言之，我认为我们在SPIRE 2009*论文中报告的结果与此处报告的结果之间的准确性差异如此之大的原因是因为我们训练了该方法，而不是使用通过先前训练生成的模式（根据我可以收集，就是你在这里做的）。

我们如何进行训练以获得我们的模式在我们论文的第三页（pg.176）中有简要描述，在我的论文第 4.3 节中有更详细的描述，你可以在这里找到： [http ://web.cs.dal.ca /~adsett/Adsett_SyllAlgs_2008.pdf](http://web.cs.dal.ca/~adsett/Adsett_SyllAlgs_2008.pdf)

# java - Java Swing：Swing Worker、invokeAndWait 和重叠 JLabels

> ID：10159424
> 
> 赞同：0
> 
> 时间：2012-04-15T04:10:15.947
> 
> 标签：java, jlabel, swingworker, invokeandwait

嘿伙计们，我遇到了 2 个问题，都与 Java Swing 相关。我正在用 Java 开发纸牌游戏。我使用数组类型列表来保存每张卡的值，并且我有一个主要的 Play() 方法，该方法使用 invokeLater 和对我的 GUI 类的 Singleton 方法调用对 GUI 的更新。

1.  第一个问题相当简单。我像这样使用 JLabels 在 GUI 上创建卡片；附加相关的侦听器并将它们添加到适当的面板，在本例中为“人手面板”：

    ```
     for (int i = 0; i < (HumanHand.size()); i++)
                {
                    Card card = HumanHand.get(i);

                    BufferedImage cardImage = null;

                    try {

                        cardImage = ImageIO.read(new File("card/" + card + ".jpg"));
                    } catch (IOException e) {

                        e.printStackTrace();
                    }
                    JLabel picLabel = new JLabel(new ImageIcon( cardImage ));

                    picLabel.addMouseListener((MouseListener) me);
                    HumanHandDisplay.add(picLabel);

                } 
                //HumanHandDisplay.validate();
                HumanHandDisplay.updateUI(); 
    ```

我遇到的问题是，当人手超过 7 张左右的牌时，它会创建一个更大的面板区域并在下面开始新的一排牌。我想做的是，当手达到一定大小时，卡片开始相互重叠（就像你手里拿着卡片一样）。我搞砸了 .validate() 但一无所获。您可以在这里提供的任何帮助都将受到欢迎。

1.  我的第二个问题是关于使用 Swing Worker 来返回人类玩家的卡片选择。我读过一些关于 Swing 工作者的文章，但我不确定在我自己的游戏中实现一个的最佳方式。目前，使用控制台我有一个扫描仪，而不是选择一个 int 的输入（特定卡在 ArrayList 中的位置）。我希望通过点击玩家手中的牌来选择这个int。目前我使用：

    ```
     String name = "" + i;
                picLabel.setName(name); 
    ```

    将卡片 JLabels 的名称设置为创建它们的 for 循环中的 int（如图所示^^），我使用：

    ```
     public void mouseClicked(MouseEvent e) {
        String name = ((JLabel)e.getSource()).getName();
        System.out.println("Working " + name);
        selection = Integer.parseInt(name);         
    } 
    ```

    单击其中一张卡片时返回该整数。这也是我用来从 Play() 调用 GUI 方法的方法：

    ```
     SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                GUI.getInstance().UpdateHand();

            }
        }); 
    ```

    我的问题是，如何让 Play 方法调用 GUI 类中的方法，该方法使用适当的侦听器设置手牌（现在我们称之为 GUIPlayerSelection()）然后等待玩家点击一张卡片，这然后将 int 返回到代表所选卡片的主类中的 Play() 方法。我不确定如何使用调用和等待，例如，如果我使用调用和等待，它会等待卡片设置好，还是等待 mouseClicked() 方法完成？还是我必须做其他事情来确保它在手动设置后等待鼠标点击？那么我将如何返回该 int 呢？我被告知要使用摇摆工人，但如果有人能解释我如何在这种情况下实现它，那就太棒了。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:29:41.647

对于您的第一个问题，您是否在重新绘制框架或卡片布局方面遇到问题？

如果是后者，那么您可能想看看[Java Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，它描述了 JFrame 内的内容窗格如何组织添加到其中的组件。

如果这些都不适合您（而且我认为它们不会与您描述的一样），您可以使用[setBounds](http://bit.ly/HzLB36)方法手动对齐您的 JLabels。

# regex - 寻找正则表达式模式键：值对

> ID：10159426
> 
> 赞同：0
> 
> 时间：2012-04-15T04:10:38.840
> 
> 标签：regex

我正在尝试为 Outlook 搜索找到一个正则表达式模式，我正在寻找分组模式来处理这个

```
from:Jack subject:(sending invoice) title:ibm 
```

我使用了这种模式，但我没有得到第一个单词之后的单词

```
(?<name>\\w+):[(](?<value>\\w*)[)]* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:06:07.710

`\w`不处理空格，将您的正则表达式更改为：

```
(?<name>\\w+):[(](?<value>[^)]*)[)] 
```

`[^)]*`表示 0 个或多个不是右括号的字符。

可能是你更喜欢使用`[^)]+`这意味着一个或多个不是正确括号的字符。

如果括号是可选的，请使用：

```
(?<name>\\w+):[(]?(?<value>[^)]+)[)]? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:56:12.187

'value' 中的第一个括号在您的正则表达式中不是可选的

来自：Jack 主题：（发送发票） 标题：ibm

至于空格，我会这样做，因为括号并不存在于每个键值对中：

```
(?<name>\\w+):[(]*(?<value>(?:\\w|\\s)+)[)]* 
```

但是，该值似乎是一个单词或一个单词序列，但在括号内 - 让我们重新编写正则表达式，否则您将在 ':' 作为第一个值之后得到整个内容：

```
(?<name>\\w+):(?:(?<value>\\w+)|(?:\\((?<value>(?:\\w|\\s)+))) 
```

# python - Python线程等待复制文件

> ID：10159430
> 
> 赞同：0
> 
> 时间：2012-04-15T04:11:59.673
> 
> 标签：python, c

我有一个在线程中运行并在文件中附加一些数据的 ac 程序。我想运行一个python线程，它将在一段时间后复制相同的文件（c线程正在写入）。有什么安全的方法可以做到这一点吗？我在 linux 操作系统中这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:28:10.187

您的方案有很多重要的细节没有提到，但是假设您不能在 C 程序中编写锁定机制，然后在 Python 程序中使用它（例如，您是使用系统上的现有应用程序），您可以查看 os.stat 并检查上次修改时间 m_time。这当然取决于您是否知道最近的 m_time 意味着该文件不会在 C 程序中再次打开并再次使用。

如果文件句柄在 C 程序中始终保持打开状态，并且偶尔写入，那么就没有很多简单的选项可以知道它何时被写入和不被写入。

# actionscript-3 - 实体编辑器 - 如何动态生成组件列表？

> ID：10159431
> 
> 赞同：0
> 
> 时间：2012-04-15T04:12:01.390
> 
> 标签：actionscript-3, reflection, dynamic, entity, metadata

我正在制作一个游戏，并且我是一个游戏内编辑器，它能够即时创建实体（而不是硬编码它们）。我使用的是组件聚合模型，所以我的实体只不过是一个组件列表。

获取或生成组件列表的最佳方式是什么？我真的不想在一些巨大的 registerAllComponents() 方法或其他东西中手动为所有可能的组件添加条目。

我在想可能以某种方式通过所有组件从基 Component 类继承的知识，或者可能通过自定义元标记进行反射，但我无法找到方法来获取从一个类或所有派生的所有类的列表具有自定义元标记的类。

我还有哪些选择？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:25:54.277

不幸的是，目前还没有适当的方法在 Flash API 中获取所有加载的类或类似的东西。因此，查找所有子类`Component`已经过时，检查所有类以查找特定元标记也已过时。

*不久前，我确实遇到了一个类/函数，它在加载时检查 SWF 自己的字节码以检索所有包含的类。这是这种事情的唯一选择。请参阅[此链接](http://etcs.ru/pre/getDefinitionNamesSource/)和我的帖子底部。*

因此，您必须指定要从中选择的组件类列表。

*想到的一个过于复杂/不可行的选择是创建一个外部工具来搜索您的源文件夹、解析 AS3 代码并确定 . 的所有子类`Component`，最后在某个 XML 文件中生成一个列表。但这不是胆小的人的任务……*

您自己可能会想到一堆手动解决方案，但一种方法是保持可访问性`Array`或`Vector.<Class>`某处，例如：

```
public static const COMPONENT_LIST:Vector.<Class> = Vector.<Class>( [
    CollisionComponent,
    VisualComponent,
    StatsComponent,
    ...
    ...
] ); 
```

例如，与保留名称列表相比，一个优点`String`是组件类可以保证编译到您的 SWF 中。

如果这些类没有在代码中的其他任何地方显式引用，则它们不会被编译。这可能发生在一个简单的组件上，您`update()`每帧左右只有一次，并且仅由某个 XML 文件中的字符串指定。

**澄清一下：**您可以使用上面链接中的代码来获取所有已加载类的名称列表，然后使用`getDefinitionByName(className)`它们中的每一个，然后调用以`describeType(classObj)`获取每种类型的 XML 描述。然后，将其解析为类型的超类型，您可以确定它是否为 extends `Component`。*我个人只会硬编码一个列表。*在启动时检查所有加载的类对*我来说感觉太乱了**，但这取决于你。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:30:47.987

对于我曾经做过的一个项目，我们使用 ruby​​ 脚本生成一个 AS 文件，其中包含对某个包中所有类的引用（确保它们被包含在编译中）。考虑到 Flash 只允许与其所在文件同名的类，这真的很容易，因此不需要解析实际代码。

将条目添加到字典（或类似的东西）以供以后使用的工厂类也是微不足道的。

我相信可以在编译之前执行程序（至少在 flashdevelop 中），因此它不会添加任何手动工作。

编辑：我添加了一个基本的 FlashDevelop 项目来演示。它要求您安装了 ruby​​。 [http://dl.dropbox.com/u/340238/share/AutoGen.zip](http://dl.dropbox.com/u/340238/share/AutoGen.zip)

# php - Zend Framework 缓存存储位置

> ID：10159434
> 
> 赞同：3
> 
> 时间：2012-04-15T04:14:01.357
> 
> 标签：php, zend-framework, caching, zend-cache

我将 Zend Framework 和 Zend_Cache 与 File 后端一起使用。

根据 ZF 手册，存储缓存文件的推荐位置将在下，`/data/cache`但我认为将它们存储在`/temp/cache`. 为什么是`/data/cache`首选？

这是我提到的 ZF 手册部分的链接：http: [//framework.zend.com/manual/en/project-structure.project.html](http://framework.zend.com/manual/en/project-structure.project.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T11:23:26.200

我猜你在谈论这些建议：[推荐的项目目录结构](http://framework.zend.com/manual/en/project-structure.project.html)。

有趣的部分是：

> *data/*：这个目录提供了一个存储应用程序数据的地方，这些数据是易失的**并且可能是临时**的。此目录中数据的干扰**可能会导致应用程序失败**。此外，此目录中的信息可能会或可能不会提交到 subversion 存储库。此目录中的内容示例包括会话文件、缓存文件、sqlite 数据库、日志和索引。

* * *

> *temp/ ：temp/ 文件夹是为***临时应用程序数据**留出的。此信息通常不会提交到应用程序 svn 存储库。如果 temp/ 目录下的数据被删除，应用程序**应该能够继续运行**，但性能可能会下降，直到数据再次恢复或重新缓存。

现在，您可以理解 Zend 不建议将 Zend_Cache 数据仅存储到*data/cache/*中，但也可以将其存储在*temp/*目录下。真正的问题是：我应该提交这些数据缓存文件吗？它们是应用程序正确运行所必需的吗？一旦你回答了这些问题，你就知道应该把缓存文件放在哪里。在我看来，在大多数情况下，缓存数据应该存储在*temp/*目录下。

最后，请记住，这只是一个建议，您始终可以自由地做自己想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T07:49:17.083

我找不到[Zend_Cache 手册](http://framework.zend.com/manual/en/zend.cache.html)中推荐`data/cache`用作缓存目录的部分，也许你可以链接到它。我确实找到[了一些](http://framework.zend.com/manual/en/zend.cache.introduction.html)使用`./temp/`.

无论哪种方式，Zend Cache 都不关心您决定将缓存文件存储在哪里，这取决于您。您只需要确保该目录是 PHP 可读可写的。

# c++ - 包含头文件时出错

> ID：10159437
> 
> 赞同：1
> 
> 时间：2012-04-15T04:14:27.410
> 
> 标签：c++, c++11

嗨，我有两个班级 A 和 B 。在 A 中，我正在使用 B 的头文件，以便我可以为 B 创建一个实例（例如 B *b ），而我在 B 类中所做的事情也包括 A 的头文件并为 A 创建实例（例如A *a) 在 B 中。

当我在 B 中包含 A 的头文件时，它在 Ah 中给了我以下错误

```
1>c:\Bibek\A.h(150) : error C2143: syntax error : missing ';' before '*'
1>c:\Bibek\A.h(150)(150) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\Bibek\A.h(150)(150) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T04:21:44.023

听起来您以循环方式包含头文件（Ah 包含 Bh，其中包含 Ah）。使用标头保护意味着当 Bh 在上述场景中包含 Ah 时，它会跳过它（由于 Ah 的现在活动的包含保护），因此在解析 Bh 时尚未定义 Ah 中的类型

要修复，您可以使用前向声明：

```
// A.h
#ifndef A_H
#define A_H

// no #include "B.h"

class B; // forward declaration of B
class A {
  B* b;
};

#endif 
```

同样对于 Bh

这允许您使用前向声明类的指针（例如，在成员变量声明、成员函数声明中），但不能在头文件中以任何其他方式使用它。

然后在 A.cpp 中你需要有正确的 Bh 定义，所以你包括它：

```
// A.cpp

#include "A.h"
#include "B.h" // get the proper definition of B

// external definitions of A's member functions 
```

这种结构避免了头文件的循环包含，同时允许充分使用类型（在 .cpp 文件中）。

注意：不支持默认 int 的错误是因为编译器没有正确定义`A`何时包含 Bh，（C 语言允许`int`对未知类型进行默认定义，但在 C++ 中不允许这样做）

# python - App Engine、事务和幂等性

> ID：10159439
> 
> 赞同：7
> 
> 时间：2012-04-15T04:14:53.667
> 
> 标签：python, google-app-engine, transactions

请帮我找出我的误解。

我正在 App Engine 上编写 RPG。玩家采取的某些行动会消耗一定的统计数据。如果统计数据达到零，则玩家不能再采取任何行动。不过，我开始担心作弊玩家——如果玩家非常快速地发送两个动作，紧挨着对方怎么办？如果减少统计数据的代码不在事务中，则玩家有机会执行该操作两次。所以，我应该将减少统计数据的代码包装在事务中，对吗？到目前为止，一切都很好。

但是，在 GAE Python 中，我们在[文档](https://developers.google.com/appengine/docs/python/datastore/transactions#Using_Transactions)中有这样的内容：

> **注意**：如果您的应用在提交交易时收到异常，并不总是意味着交易失败。在事务已提交并最终将成功应用的情况下，您可能会收到 Timeout、TransactionFailedError 或 InternalError 异常。尽可能使您的数据存储事务具有幂等性，这样如果您重复事务，最终结果将是相同的。

哎呀。这意味着我正在运行的函数如下所示：

```
 def decrement(player_key, value=5):
  player = Player.get(player_key)
  player.stat -= value
  player.put() 
```

好吧，那是行不通的，因为这东西不是幂等的，对吧？如果我在它周围放置一个重试循环（我需要在 Python 中这样做吗？我已经读过我不需要在 SO 上这样做......但我在文档中找不到它）它可能会将该值增加两次，正确的？由于我的代码可以捕获异常，但数据存储仍然提交了数据……嗯？我该如何解决？这是我需要[分布式事务](http://blog.notdot.net/2009/9/Distributed-Transactions-on-App-Engine)的情况吗？我真的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T05:27:43.547

首先，尼克的回答不正确。DHayes 的事务不是幂等的，所以如果它运行多次（即，当第一次尝试被认为失败时重试，当它没有失败时），那么该值将被多次递减。Nick 说“数据存储会检查实体在获取后是否已被修改”，但这并不能阻止问题的发生，因为两个事务有单独的获取，第二个获取是在第一个事务完成之后。

为了解决这个问题，您可以通过创建“事务密钥”并将该密钥作为事务的一部分记录在新实体中来使事务具有幂等性。第二个事务可以检查该事务密钥，如果找到，则什么也不做。一旦您对交易完成感到满意，或者您放弃重试，就可以删除交易密钥。

我想知道“极其罕见”对于 AppEngine 意味着什么（百万分之一，还是十亿分之一？），但我的建议是，幂等交易是财务问题所必需的，但不是游戏得分，甚至是“生命”；-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T10:28:50.043

**编辑：这是不正确的 - 请参阅评论。**

你的代码很好。文档中提到的幂等性是关于副作用的。正如文档所解释的，您的事务功能可能会运行不止一次；在这种情况下，如果函数有任何副作用，它们将被多次应用。由于您的交易功能不这样做，它会没事的。

关于幂等性的问题函数示例如下：

```
def do_something(self):
  def _tx():
    # Do something transactional
    self.counter += 1
  db.run_in_transaction(_tx) 
```

在这种情况下，`self.counter`可能会增加 1，或者可能超过 1。这可以通过在事务之外执行副作用来避免：

```
def do_something(self):
  def _tx():
    # Do something transactional
    return 1
  self.counter += db.run_in_transaction(_tx) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:19:22.660

您是否应该尝试将此类信息存储在 Memcache 中，这比 Datastore 快得多（如果您的应用程序中经常使用此统计信息，您将需要此信息）。Memcache 为您提供了一个不错的功能`decr`：

> 以原子方式递减键的值。在内部，该值是一个无符号的 64 位整数。Memcache 不检查 64 位溢出。该值，如果太大，将环绕。

`decr` [在这里](https://developers.google.com/appengine/docs/python/memcache/functions)搜索。然后，您应该每隔 x 秒或在满足特定条件时使用任务将此键中的值保存到数据存储区。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T05:41:34.797

如果您仔细考虑所描述的内容，它实际上可能不是问题。这样想：

你的玩家还剩一个统计点。然后，他立即恶意发送 2 个动作（A1 和 A2），每个动作都需要消耗该点。A1 和 A2 都是事务性的。

以下是可能发生的情况：

A1 成功。然后 A2 将中止。都好。

A1 正常失败（不更改数据）。计划重试。A2然后尝试，成功。当 A1 再次尝试时，它将中止。

A1成功但报错。计划重试。下次 A1 或 A2 尝试时，它们将中止。

为此，您确实需要跟踪 A1 和 A2 是否已完成 - 也许给他们一个任务 UUID 并存储已完成任务的列表？甚至只使用任务队列。

# ruby-on-rails - 基于联结对象字段查找记录的更好方法？

> ID：10159444
> 
> 赞同：0
> 
> 时间：2012-04-15T04:16:51.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我是 rails 新手，想看看是否有更有效的方法可以根据 junction 对象中设置的字段来查找位置。关系是事件通过 events_locations 有很多位置。这是一个简化的示例：

```
@locations=[]
events_locations = @event.events_locations.where(:fieldvalue=>1)
events_locations.each do |el|
  @locations<<Location.find(el.location_id)
end 
```

这似乎很浪费，并且可能会产生很多查询。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T08:09:12.027

我猜fieldvalue是events_locations的一个字段，那么

```
class Event
  has_and_belongs_to_many :locations
end

@locations = @event.locations.where(events_locations: {fieldvalue: 1}) 
```

# ios - ios访问可能未定义的对象

> ID：10159447
> 
> 赞同：0
> 
> 时间：2012-04-15T04:17:10.410
> 
> 标签：ios, cocoa-touch

我正在访问一个发送的通知，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleUnpresent:) name:UNPRESENT_VIEW object:nil];

...

-(void)handleUnpresent:(NSNotification *)note;
{
    NSLog(@"%@", note.object.footer);
    //property 'footer' not found on object of type 'id'
} 
```

有些传入的`note.object`对象有一个“页脚”，有些没有。但是，我不想费心费力地制作一个只有一个名为的属性的类`footer`来完成这项工作。我什至尝试过`((NSObject *)note.object).footer)`哪些适用于某些语言，但显然不是 obj-c。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:11:18.110

检查`isKindOfClass`当然是更强大的选择。但是，如果您有多个不相关的类返回您需要的属性，还有另一种方法：`respondsToSelector`. 只需询问对象是否有`footer`方法，您就可以放心地调用它。

```
-(void)handleUnpresent:(NSNotification *)note;
{
    id noteObject = [note object];
    if ([note respondsToSelector:@selector(footer)])
    {
        NSLog(@"Footer = %@", [noteObject footer]);
    }
} 
```

这种`respondsToSelector`方法在正确的地方是强大和方便的，但不要疯狂。此外，它无法告诉您有关返回类型的任何信息，因此`footer`您得到的可能不是您期望的类。

`noteObject.footer`和的语法`[noteObject footer]`很容易被视为等价的。但是，当 的类`noteObject`未知时，编译器将接受后者而不接受前者。如果`noteObject`有一个通常不响应的已定义类`footer`，它会给出警告，但仍会编译和运行。在这些情况下，您有责任保证该方法在需要时确实存在，因此该方法调用不会在运行时崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:30:25.203

`NSObject`没有任何名为 的属性`footer`，这就是编译器抱怨的原因。将 id 转换回 an`NSObject`无济于事。如果您知道该对象始终是您创建的某个自定义对象，则可以转换回该对象，然后调用 footer，编译器不会抱怨。最好实际检查一下。请参见下面的示例（例如，我将具有`footer`属性的类命名为`ViewWithFooter`，因此请适当地重命名）：

```
- (void)handleUnpresent:(NSNotification*)note
{
  ViewWithFooter view = (ViewWithFooter*)[note object];
  NSParameterAssert([view isKindOfClass:[ViewWithFooter class]]);
  UIView* footer = [view footer];
  // Do something with the footer...
  NSLog(@"Footer: %@", footer);
} 
```

如果您有一堆不相关的类（即不在同一个类层次结构中）都提供一个`footer`属性，那么您最好创建一个具有所需`footer`属性的协议并将对象转换为上面代码示例中的协议和断言它响应`-footer`选择器。

下面是一个使用协议的例子：

```
@protocol ViewWithFooter <NSObject>

- (UIView*)footer; // this could also be a readonly property, or whatever

@end

- (void)handleUnpresent:(NSNotification*)note
{
  id<ViewWithFooter> view = (id<ViewWithFooter>)[note object];
  NSParameterAssert([view respondsToSelector:@selector(footer)]);
  UIView* footer = [view footer];
  // Do something with the footer...
  NSLog(@"Footer: %@", footer);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:36:31.440

如果`object`传入的通知可能是多个类之一，并且您不想将对象强制转换为特定类，则可以使用该类`performSelector:`调用`footer`对象上的方法。如果你用 a 包装这个调用，`respondsToSelector:`如果对象没有方法，你将避免异常`footer`。

```
-(void)handleUnpresent:(NSNotification *)note;
{
    if ([[note object] respondsToSelector:@selector(footer)]) {
        NSString *footer = [[note object] performSelector:@selector(footer)];

        NSLog(@"%@", footer);
    }
} 
```

使用`performSelector`将停止编译器抱怨方法“'footer' not found on object of 'id'”。

# ios - 如何使用 Storyboards 在另一个控制器中子视图 UITableViewController

> ID：10159448
> 
> 赞同：12
> 
> 时间：2012-04-15T04:17:16.670
> 
> 标签：ios, uiviewcontroller, embed, uitableview

我已经将我所有的表视图逻辑封装在一个链接到视图的 UITableViewController 上。这是使用故事板完成的。

我想将此逻辑和视图嵌入到另一个视图控制器/视图中（有点像标题信息，下面有一个可滚动的表格。）

我有以下组件： 链接到 UIView 的 CustomViewController （从情节提要拖入） CustomTableViewController 链接到 UITableView （从情节提要拖入）

本质上，我试图在 iOS 时钟应用程序中模仿秒表的场景

*   对此的野兽方法是什么？
*   它是如何以编程方式完成的？
*   这可以以某种方式在情节提要上完成吗？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-06T03:07:04.760

好的，想通了。这个解决方案是 iOS 5 特有的，因为这个功能是在那里添加的。此方法适用于情节提要。

设置：目的是在另一个控制器中托管一个视图控制器视图和逻辑。

1.  由于没有内在的方式来引用故事板中的子视图控制器，我们需要给视图控制器一个名称。这可以通过在情节提要的控制器上填写“标识符”属性来完成。注意：确保您给控制器提供了标识符，而不是控制器视图。

2.  实例化您要聚合的控制器。这可以从主机控制器完成。

    ```
    UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"ControllerIdentifier"]; 
    ```

3.  将子控制器添加到父控制器

    ```
    [self addChildViewController: controller]; 
    ```

4.  将子控制器视图添加到父控制器视图。请注意，如果您希望将子视图添加到的父控制器中有一个占位符视图，那么这就是您执行此操作的地方。在这里，我在父控制器中添加了一个名为 stage 的 UIView。

    ```
    [self clearStage]; 
    [self.stageView addSubview:controller.view];
    presentedController.view.frame = self.stageView.bounds; 
    ```

就是这样。很简单。我已经成功地将它用于切换控制器并在自制选项卡控件中查看。子控制器在视图生命周期中登记其视图，因此 , 等都`viewDidLoad`在这个子视图控制器中按预期工作。

希望这可以帮助某人。

# c++ - 动态投射还是第二个对象容器？

> ID：10159449
> 
> 赞同：1
> 
> 时间：2012-04-15T04:17:40.247
> 
> 标签：c++, inheritance, casting, polymorphism

我有一个用于 Group 对象的模板类，其他更专业的组可以从中派生（将其用于复合模式）。无论如何，我的 Group 类处理所有实际的组代码。

现在我有一个包含 T 类型对象的容器，但我还需要通过交叉转换访问另一个基类的接口。您是否建议我为两个接口都有一个容器，或者当我循环通过第一个容器时只使用 dynamic_cast 每个对象？

```
class Sim_object {
  add(Sim_object_sp_t object)
  remove(Sim_object_sp_t object)
};

class Group<T> : public class Sim_object {
  add(Sim_object_sp_t object)
  remove(Sim_object_sp_t object)
  map<T>
  protected iterators begin(), end() (for use by Ship_group to use for dock, attack, move functions)
  // looking to add map<Sim_object> to prevent casting from T to Sim_object in Add/Remove but still give derived classes access to map<T> iterators.
};

class IShip {
  dock() = 0
  attack() = 0
  move() = 0
};

class Ship_group : public Group<IShip>, public IShip {
  dock()  // uses iterators provided by Group to loop through and call dock()
  attack() // same as dock
  move() // same as dock
};

class Ship : public Sim_object, public IShip {
  dock()
  attack()
  move()
}; 
```

所以我需要在 Group 中访问的两个接口是 T（本例中为 IShip）和 Sim_object。

来自组的示例：

```
template<typename T>
void Group<T>::add(Sim_object_sp_t object) { 
  if (object->get_parent())
    object->get_parent()->remove(object);

  std::tr1::shared_ptr<T> t_object = std::tr1::dynamic_pointer_cast<T>(object);
  if (!t_object)
    throw Error("Failed to cast to type T");

  objects[object->get_name()] = t_object;
  object->set_parent(shared_from_this());
} 
```

Ship_group 的示例：

```
void Ship_group::set_destination_position_and_speed(Point destination_position, double speed) {
  for (Iterator it = begin(); it != end(); ++it) {
    try {
      it->second->set_destination_position_and_speed(destination_position, speed);
    } catch (const Error& e) {
      cout << it->second->get_name() << " -- " << e.msg << endl;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:11:47.543

也许里面有嵌套类型`class Group<T>`：

```
class Group<T> : public class Sim_object {
    class Specialized_Sim_Object : public T, public Sim_object {}
    void add(Specialized_Sim_Object * object) {
        objects[object->get_name()] = object;
    }
} 
```

在这种`shared_ptr`情况下，也可能不需要 - 当`Ship_group`遍历地图时，类型已经保证是`IShip`.

# php - $.ajax 仲裁丢失；声明之前

> ID：10159450
> 
> 赞同：0
> 
> 时间：2012-04-15T04:17:51.053
> 
> 标签：php, jquery

最初我使用

$.get(../../一些网址);

它工作正常。但我必须更改网址以完成网址，如[http://thinkmovie.in/blah/blah](http://thinkmovie.in/blah/blah)。之后我开始收到 407 代理身份验证错误。然后我将这个 $.ajax 与 dataype:json 一起使用

```
$('#imgsearch').click(function(){
    $('#albumd').html("<img src='http://thinkmovie.in/images/ajax-loader.gif'>");
    var text = $('input[name=search]').val();
    var cat = $('input[name=cat]').val();
    $.ajax({
        url: "http://thinkmovie.in/calls/imagesearch.php",
        data: { text:text,cat:cat },
        chache:true,
        dataType: "jsonp",

    });

}); 
```

现在我得到的错误是这个

```
missing ; before statement
[Break On This Error]   

...margin-top:10px;">sruthi hasan</h2><div id="imagsch" style="float:left;margin-le... 
```

我试图将数据类型更改为其他格式，但仍然出现错误。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:21:04.207

```
 dataType: "jsonp",
                     ^---extra comma 
```

# php - nyroModal AJAX 和 Wordpress 数据

> ID：10159451
> 
> 赞同：1
> 
> 时间：2012-04-15T04:18:08.050
> 
> 标签：php, wordpress, jquery, nyromodal

我目前正在使用 nyroModal 来拉取 HTML 表单页面。当用户登录时，此表单的值会自动预填充当前用户的数据，以及来自当前页面的信息。我正在使用典型的 nyroModal 调用脚本，所以

```
 $('#get_deal, #contact_first').nyroModal(); 
```

当我只有没有 Wordpress 函数的表单时，表单加载得很好，但是当我调用 Wordpress 函数时 get_currentuserinfo(); 它出错并给了我对未定义函数的错误调用。当我转到特定页面时，它会显示正确提取的数据。

我认为这与它是 AJAX 有关，但不知道如何纠正它。nyroModal 完成加载后，我是否应该加载单独的脚本？如果是这样，有关如何执行此操作的任何提示？

谢谢您的帮助！

亚当

# linux - 在 Ubuntu 11.10 中显示经典视图

> ID：10159455
> 
> 赞同：-1
> 
> 时间：2012-04-15T04:19:14.610
> 
> 标签：linux, ubuntu-11.10

我已经安装了 Ubuntu 11.10 操作系统。默认情况下它显示其时尚的显示。我想将其配置为显示经典视图，该视图将显示任务栏和菜单，以显示所有程序。任何人都可以说出在 Ubuntu 11.10 中显示经典视图的配置步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:26:40.250

```
sudo apt-get install gnome-session-fallback 
```

完成此操作后，重新启动并在登录之前，在底部选择经典视图，它应该可以工作。

如果由于某种原因结果不如您的旧经典视图，我建议切换回 11.04（这就是我正在运行的），因为经典视图已经是该版本的一部分。

# c# - 有谁知道我在哪里可以找到将 OFX wsdl 文件与 C# 一起使用的好例子？

> ID：10159456
> 
> 赞同：3
> 
> 时间：2012-04-15T04:19:19.007
> 
> 标签：c#, ofx

我正在寻找一个结合 C# 的 OFX​​ 的好例子。我已经搜索示例，但找不到任何示例。我从未使用过 OFX，并且代码中几乎没有可用的文档，而且我以前从未使用过 wsdl。我知道如何将它包含在项目中，但实际上使用代码是令人困惑的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:28:34.827

对于 WSDL 客户端，您可以使用[WSDL.EXE](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.71%29.aspx)生成客户端代理类。

```
wsdl /out:myProxyClass.cs http://hostServer/WebserviceRoot/WebServiceName.asmx?WSDL 
```

你可以看看[OFXSharp](https://github.com/jhollingworth/OFXSharp)。它是一个用于 OFX 协议的开源 C# 解析器。

```
var parser = new OFXDocumentParser();
var ofxDocument = parser.Import(new FileStream(@"c:\ofxdoc.ofx", FileMode.Open)); 
```

# python - Python中单行的多个变量？

> ID：10159457
> 
> 赞同：1
> 
> 时间：2012-04-15T04:19:38.570
> 
> 标签：python, input

我试图弄清楚“输入表达式：”之类的内容如何包含 3 个变量：第一个 int、操作字符和第二个 int。这在 C++ 中非常简单，只需 cin >> num1 >> operation >> num2。

到目前为止，根据其他人的问题，我已经尝试将列表拆分。这有效，除了超过 1 位的整数。我正在做这样的事情：

```
list1=raw_input()
list1.split()
print list1
num1=list1[0]
plus=list1[1]
num2=list1[2]
print num1, plus, num2 
```

例如，输入 10+3 会输出 1 0 + 我觉得这里有一个简单的修复，但我不知道。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:22:23.557

字符串是不可变的，因此您需要捕获`list1.split()`某处的结果。但它不会帮助你，因为那不会做你想要的。使用解析器，可能使用[Python 的语言服务](http://docs.python.org/library/language.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:24:02.680

试试这个：

```
list1 = raw_input()
for x in list1.split():
    print x, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T04:41:12.017

我建议在这种情况下使用正则表达式，例如：

```
 re_exp = re.compile(r'\s*(\d+)\s*([^\d\s])+\s*(\d+)')
 expr = raw_input()
 match = re_exp.match(expr)
 if match:
     num1, oper, num2 = match.groups()
     print num1, oper, num2 
```

使用`split`，您可以解析，但使用（没有空格）或处理这两种情况`10 + 1`会更难。`10+1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-05T20:34:22.983

```
#You should write like this
list1 = raw_input()
a=list1.split()
num1=a[0]
plus=a[1]
num2=a[2]
print num1, plus, num2 
```

# php - 在用户注册时创建 MySQL 表

> ID：10159460
> 
> 赞同：0
> 
> 时间：2012-04-15T04:20:09.697
> 
> 标签：php, mysql

我正在开发一个网站，它将为用户收集和存储信息。

我需要在注册时创建一个特定于每个用户的表格，以存储他们使用网站搜索的信息。创建的表将以新注册用户的用户名命名。

然后，当用户登录并运行搜索时，收集的数据将使用 MySQL 插入查询存储在数据库中，其中表名是包含登录用户的用户名的变量，该用户名也是表名。

我是一名业余开发人员，并且到处搜索以尝试找到解决方案，但我似乎找不到任何与我的问题完全相似的东西。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:34:25.783

动态创建表比它的价值要麻烦得多，并且与任何 SQL 数据库逆流而上。

您没有找到有关您提到的方法的任何文档的原因是因为这个问题通常（几乎无一例外）通过将所有数据放在一个或多个表中并包含一列来指定哪个实体（用户）来最好地解决行相关联。在您的情况下，这可能是电子邮件地址、用户名或序列号。

例如

```
 | user_id | email   | first_name   | last_name   | fave_color   |
 -         -         -              -             -              -
 |       1 | "a@b.c" | "anton"      | "aardvark"  | "red"        |
 |       2 | "b@c.d" | "miles"      | "o'brien"   | "infrared"   |
 |     ... |         |              |             |              | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:28:58.470

首先取用户名，如：

```
$fullname="$fname"."_"."$lname"; 
```

然后，编写这样的查询来创建该名称的表

```
$sql="CREATE TABLE $fullname(ALL THE COLLUMNS YOU WANT TO CREATE)";
$result1=mysql_query($sql, $db_link); 
```

这个查询来自我的项目。在 wampserver 中运行良好。

# list - 如何从元组（单词，值）列表中返回单个元组（单词，值）的列表？

> ID：10159462
> 
> 赞同：0
> 
> 时间：2012-04-15T04:20:32.743
> 
> 标签：list, sorting

我需要一个函数的帮助，该函数可以返回具有“均匀”间隔的 3 个或更多字符的单词，即从左到右的连续字母的 ord() 值是偶数（相同的差异值）。这就是我到目前为止所拥有的......输出是这样的：

```
test_list2 = ['i', 'made', 'an', 'ace', 'today', 'at', 'tennis...yeaah', 'booi', ':d']

for word in test_list2:
    if len(word) >=3:
    temp_list = []
    for chr1 in word:
    if word.index(chr1) != (len(word)-1):
        chr2 = word.index(chr1)+1
        num = ord(word[chr2]) - ord(chr1)
        temp_list.append(num)
    temp_tup = (word, temp_list)
    final_list.append(temp_tup)

final_list = [('made', [-12, 3, 1]), ('ace', [2, 2]), ('today', [-5, -11, -3, 24]),
   ('tennis...yeaah', [-15, 9, 0, 0, 10, -69, 0, 0, 0, -20, 9, 0, 0]),
   ('booi', [13, 0, 0])] 
```

但我只需要返回那些间隔均匀的（'ace'）。输出应该是这样的，

```
[('ace',2)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:57:07.473

我在 Python 3.3 中解决了这个问题，在我的机器上编译和工作:)

如果你想用一些更复杂的数据（例如：长文本块）来测试它的错误，那里有一堆额外的调试垃圾，比如打印语句。

我使用了 enumerate()，而不是你的 word.index，不确定哪个更 Pythonic？

```
import sys

### Define variables
test_list = ['i', 'made', 'an', 'ace', 'today', 'at', 'tennis...yeaah', 'booi', ':d']
proc_check = [('made', [-12, 3, 1]),
                   ('ace', [2, 2]),
                   ('today', [-5, -11, -3, 24]),
                   ('tennis...yeaah', [-15, 9, 0, 0, 10, -69, 0, 0, 0, -20, 9, 0, 0]),
                   ('booi', [13, 0, 0])]
final_check = [('ace', [2,2])]

test_list2 = ['ace', 'ace', 'ace']
proc_check2 = [('ace', [2, 2]),
               ('poo', [3, 3]),
               ('ace', [2, 2])]
final_check2 = [('ace', [2,2]),('poo', [2,2]),('ace', [2,2])]

### Function definitions
def wordIsEven(word_list, proc_list_check):    
    final_list = []
    procd_list = []

    for word in word_list: 
        temp_list = []

        if len(word) >= 3:          
            for chr1 in word:
                if word.index(chr1) != (len(word)-1):
                    chr2 = word.index(chr1)+1
                    num = ord(word[chr2]) - ord(chr1)
                    temp_list.append(num)

            temp_tup = (word, temp_list)
            procd_list.append(temp_tup)

    errors = False
    for i, check in enumerate(procd_list):
        if check != proc_list_check[i]:
            errors = True
            print("Word Eval Fail! " + str(check) + " != " + str(proc_list_check[i]))

    if errors == True:
        print("List compare failed!" )
    else:
        print("Lists compare equally!")

    for tmp_tup in procd_list:
        print("Examining Slice: "+str(tmp_tup[1]))
        for i, num in enumerate(tmp_tup[1]):
           if i + 1 < len(tmp_tup[1]):
               num2 = tmp_tup[1][i+1]

               if num == num2:
                   if num != 0:
                       print("Got one! " + str(tmp_tup))
                       final_list.append(tmp_tup)               
    return final_list

### Code execution

my_list = wordIsEven(test_list2, proc_check2)
my_check = final_check2

print("Printing Final list:")
for i, item in enumerate(my_list):
    tempStr = str(item)
    if item != my_check[i]:
        tempStr += " doesn't match check data..." + str(my_check[i])
    print(tempStr)
sys.exit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:02:15.380

假设您不需要`final_list`具有非均匀间隔数字的 ，那么您可以跟踪`num`以查看它是否在整个单词中保持不变。如果您找到不同的`num`站点并转到下一个单词。如果`num`保持不变，则添加一个`(word, num)`元组`final_list`：

```
for word in test_list2:
  if len(word) >=3:
    all_nums_are_same = True
    prev_num = None
    for chr1 in word:
      if word.index(chr1) != (len(word)-1):
        chr2 = word.index(chr1)+1
        num = ord(word[chr2]) - ord(chr1)
        if not prev_num:
          prev_num = num
        elif prev_num != num:
          # different number is found, we can
          # stop and move on to next word
          all_nums_are_same = False
          break

    if all_nums_are_same:
      # only add tuple if all numbers we the same
      temp_tup = (word, prev_num)
      final_list.append(temp_tup) 
```

结果`[('ace',2)]`就是这样。

# javascript - Jquery UI modal（弹出框）控制大小和默认隐藏

> ID：10159463
> 
> 赞同：3
> 
> 时间：2012-04-15T04:20:48.733
> 
> 标签：javascript, jquery, twitter-bootstrap, popup, modal-dialog

[这个问题的 jsFiddle](http://jsfiddle.net/zkzuM/)

我目前正在使用引导模式，这是一个用于创建弹出框的 jQuery 插件。（如果有人想查看非常短的文档，这里有一个[链接](http://twitter.github.com/bootstrap/javascript.html#modals)——它非常短，所以只需要一分钟）。

不幸的是，我有几个问题：

1.  我需要能够定义模态弹出框的大小。我尝试了以下方法，但无法正确显示：

    `<div class="modal" id="myModal" style="width: 800px; height: 900px;">`

2.  我需要能够默认隐藏模式。目前，它会在页面加载后立即显示。我尝试了以下方法，但它似乎没有正确隐藏：

    `$(document).ready(function() { $('#myModal').modal("hide"); });`

知道如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:49:08.433

在源代码中尝试以下操作。为我工作。

```
 $('#ModalForm').dialog(
   {
        modal : true ,
        autoOpen : false ,
        height : 300,
        width : 400,
. . . . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T04:38:40.400

Answer 1: Try defining the modal CSS class and set the width and height. Answer 2: when calling the modal function, pass in an option object with th property "show" as false.

```
$("#myModal").modal({show: false}); 
```

Answer 3: you can handle the "shown" event and wire it up to make an AJAX call to web page and set the result as the inner HTML of the div.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T04:37:39.387

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T04:38:32.427

try this

```
<div class="modal" id="myModal" style="width:800px;height:900px;display:none;"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T05:04:29.567

您可以将`.hide`类提供给模态框的容器以隐藏它，这是隐藏模态框的默认引导方法。至于大小，您可以再次为您自己的类提供自定义宽度和高度的容器，它应该占用它，您将其添加到内联的方式现在也可以正常工作，只需确保将其添加到主容器。

所以你的模态容器应该看起来像这样：

```
<div class="modal hide fade custom-size" id="myModal"> ... </div> 
```

**注意：**添加了`.fade`添加过渡淡入淡出/滑动效果的类，如果您不想要这些效果，可以将其删除。

至于在加载页面时弹出的模态框，您要删除该行为所要做的就是不要像现在那样调用模态框，这样只有在您单击操作或“启动”时才会弹出模态框模态”按钮。

这是一个清理过的小提琴，你有一些无效的样式，比如`float:center`（我希望存在一个）：http: [//jsfiddle.net/zkzuM/2/](http://jsfiddle.net/zkzuM/2/)，整页演示：http: [//jsfiddle.net/zkzuM/ 2/秀/](http://jsfiddle.net/zkzuM/2/show/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-15T05:10:08.140

```
#myModal{
    height:200px;
    width:100px;
} 
```

尝试将这样的内容添加到 css

你的 javascript

```
$('#myModal').modal({'show':false}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-15T05:20:07.497

看看[小提琴](http://jsfiddle.net/Wncbm/1/)及其[结果](http://fiddle.jshell.net/Wncbm/1/show/)。

.modal-body 类的最大高度为 400 像素。如果你想要一个静态高度为 900 像素，你应该设置 .modal-body 的高度和最大高度。否则，关闭按钮及其栏可能会浮在盒子上。

```
#myModal .modal-body {
  height: 775px;
  max-height: 800px;
} 
```

由于盒子模型的边距和填充，900px 高的 #myModal 是 775px。它总是短 125 像素。如果你想让它动态化，你可以编写如下内容：

```
$('#myModal .modal-body').height($('#myModal').height()-125); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-16T01:29:11.713

1.  你做得对，但如果它使用最大宽度最小宽度并注释掉它，请查看引导 CSS。

2.  如果它在 JS 中不起作用，您可以通过将隐藏类放入模态包装器中来实现。

# php - CakePHP 模型查询返回数据格式化

> ID：10159465
> 
> 赞同：0
> 
> 时间：2012-04-15T04:21:01.683
> 
> 标签：php, mysql, cakephp, model, cakephp-2.0

我正在寻找一种方法来使蛋糕以相同的格式/结构返回所有数据库数据......目前它根据关系返回两种不同类型的格式。

如果模型“B”与正在查询的当前模型“A”相关联，则它将在其下方放置“B”的模型关联，如下面的 [用户] 所示。我想要它，以便所有查询都使用该结构。

例如： $this->find('all', .... 返回：

```
Array
(
    [0] => Array
        (
            [UserGroup] => Array
                (
                    [id] => 53
                    [user_id] => 100003332014851
                    [media_id] => 
                    [name] => john
                    [description] => qwasdfad
                )

            [User] => Array
                (
                    [id] => 100003332014851
                    [session_id] => ssm2qbrotmm13ho1ipm8ii2492
                    [username] => 
                    [password] => -1
                    [Planner] => Array
                         (
                         )

                     [Purchase] => Array
                         (
                         )

                     [Listing] => Array
                         (
                         )
               )
       ) 
```

我希望它看起来像：

```
Array
(
    [0] => Array
        (
            [UserGroup] => Array
                (
                    [id] => 53
                    [user_id] => 100003332014851
                    [media_id] => 
                    [name] => john
                    [description] => qwasdfad
                    [User] => Array
                         (
                              [id] => 100003332014851
                              [session_id] => ssm2qbrotmm13ho1ipm8ii2492
                              [username] => 
                              [password] => -1
                              [Planner] => Array
                                   (
                                   )

                               [Purchase] => Array
                                   (
                                   )

                               [Listing] => Array
                                   (
                                   )
                            )
                     )
               )
       ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T05:27:06.223

在这种情况下，您还可以使用 contains 以及 find as **UserGroup.User**来获得所需的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:25:02.123

在 CakePHP 中，该`find()`方法返回的数据类似于您的第一种格式。但是如果你想像第二个那样格式化，那么你必须手动处理它（如果可能的话尽量避免这种情况）

```
$data = $this->find('all');
$assocs = Set::extract('/User', $data); // extracting all `User` array

foreach($assocs as $key => $assoc) {
    unset($data[$key]['User']); // removing the associate `User` from `$data`
    $data[$key]['UserGroup']['User'] = $assoc['User']; // adding associate under `UserGroup`
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:43:28.140

最终这样做了……它将输出更改为我们需要的。顶级项目没有标题，这很好我只是为此调整了我们的脚本......如果他们需要自定义想法，这可能会对其他人有所帮助

也不能保证这涵盖了所有可能的结果，但到目前为止它适用于我们拥有的所有查询。

```
class AppModel extends Model {
    function afterFind($results, $primary) {
        //if this is a primary, structure like a secondary so entire site is same format
        if ($primary) {
            $class = get_class($this);

            //simple fix for primary
            foreach ($results as $key => $result) {
                $result = $this->formatData($result, $class);
                $results[$key] = $result;
            }
        }

        return $results;
    }

    function formatData($result, $class) {
        $array = array();
        if (isset($result[$class])) {
            $array = $result[$class];
            unset($result[$class]);
        }
        $array += $result;
        return $array;
    } 
```

# java - Java - 如何连接到 Mac OS 上的复制和粘贴菜单

> ID：10159469
> 
> 赞同：1
> 
> 时间：2012-04-15T04:21:39.470
> 
> 标签：java, macos, swing

我了解您可以：

```
// Where CustomMacOSXController implements implements MRJAboutHandler, ...
CustomMacOSXController macOSXController = new CustomMacOSXController()

MRJApplicationUtils.registerAboutHandler(macOSXController); 
MRJApplicationUtils.registerPrefsHandler(macOSXController);
//... and so on 
```

但是我找不到任何东西来挂钩复制和粘贴菜单，这样当它被调用时，当前选定的 JTextField 会受到影响（例如，粘贴会将剪贴板粘贴到选定的 JTextField 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T09:16:19.913

与 Mac OS X 系统和应用程序菜单不同，编辑菜单完全在您的程序范围内。您必须使用适当的[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html). 中定义的预定义子类[`javax.swing.text.TextAction`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/TextAction.html)很方便，因为它们知道焦点组件。另请参阅此相关[问答](https://stackoverflow.com/q/10075147/230513)和[示例](https://stackoverflow.com/a/8534162/230513)。例如，

```
Action pasteAction = new DefaultEditorKit.PasteAction();
JMenuItem pasteItem = new JMenuItem(pasteAction);
JButton pasteButton = new JButton(pasteAction); 
```

[附录：要将您的编辑菜单完全集成到 Mac OS X 中，您必须使用此处](https://stackoverflow.com/a/8956715/230513)显示的方法之一告诉操作系统使用您的菜单。要获取与平台相关的修饰键，请使用，如此[处](https://stackoverflow.com/a/10161155/230513)`getMenuShortcutKeyMask()`所示。最后，Charles Bell's是一个使用[文本操作](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/TextAction.html)的示例。[`HTMLDocumentEditor`](http://www.artima.com/forums/flat.jsp?forum=1&thread=1276)

# algorithm - 与优惠券索取逻辑相关的数据结构

> ID：10159471
> 
> 赞同：2
> 
> 时间：2012-04-15T04:21:45.677
> 
> 标签：algorithm, data-structures

假设我们正在为客户生成优惠券——每张优惠券都有一个 ID 和到期日期，我们想设计一个程序让客户领取他们的优惠券。特别是我们不打算使用任何支持数据库，但需要具有处理数百万优惠券的可扩展性 - 关键逻辑应该防止优惠券被两次索取

首先，我试图了解维持优惠券状态的最佳数据结构，即它是否已被声明-我知道有位图、哈希图、b-tree 之类的选项-我想了解哪个是最佳的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:01:52.220

没有存储机制是不可能做这样的事情的。您需要一个验证优惠券代码的算法。使用后，您需要在数据库中为该优惠券代码设置一个标志，这样任何人都不能使用同一张优惠券两次。

所以表结构将类似于：

表优惠券

优惠券代码：nvarchar(80)
已使用：位
到期日期：日期时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:30:11.667

你能维护两个文件吗？在第一个文件中，创建所有将在每一天到期的优惠券 ID 的倒排索引。所以你会有这样的东西 {mm/dd/yyyy:[ products which will expire on this mm/dd/yyyy]...}（所以这就像键/值对，其中 value 是一个列表。第二个是字典，您可以在其中拥有一个 hashmap，其中 coupon_id 作为键，布尔值作为值，指示您的优惠券是否已售出。

并且您每天根据第一个映射的触发响应更新您的第二个哈希映射。所以像这样的东西..

```
hashmap 1 :{ Today_date:[1234,2345,42234]....tomorrows date:[43225,2508502..]} 
```

所以这表明哪些优惠券将在今天和明天到期......等等

```
hashamp 2:{ 1234:1, 2345:0....} 
```

1 可能意味着优惠券已售出..

但是在今天日期过去之后..您返回产品 [1234,2345,42234...] 因为这些是设置为过期的优惠券..并且在 hashmap2 中：将具有“0”作为其价值的优惠券的价值设置为是-1或其他东西..意味着它们不再可用..所以在hashmap 2中只有具有0值的优惠券ID可用..??

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:16:18.253

我在想这样的事情 - 生成一个优惠券ID，类似于（发行日期+到期日期+运行计数器（单独的系列1......每个发行/到期日期对的N）+校验和）然后有类似HashMap（ ExpiryDate => HashMap ( IssueDate , BTree )) ... Btree 将存储与已领取的优惠券相对应的已领取计数器

在我的方法中，我们所做的是生成优惠券 id，以便在优惠券 id 中，我对优惠券发行日期和优惠券到期日和增量计数器值进行编码 - 1,2 ....N ，例如。优惠券 20120401-20120410-12345-XYZ ，然后我只维护在 BTree 中为每个发行日期/到期日期对声明的计数器 ...这个 Btree 而不是每个声明的计数器有 1 个数字，将存储一系列计数器值声称。每个问题/到期日期对将有 1 个 Btree。

但是这个 Btree 将每个节点作为 ( N1 , N2) ，其中 N1 <= N2 之间的所有数字都已被声明，如果它与任何现有节点不连续，我们将新节点插入到 btree 中，否则将其合并到现有节点，如果它是连续的并更新 N1 或 N2

# c++ - 带有套接字的 POST 请求

> ID：10159472
> 
> 赞同：0
> 
> 时间：2012-04-15T04:22:08.843
> 
> 标签：c++, sockets, http-headers, http-post

我必须在 C++ 中使用纯套接字发送后请求。我不明白将请求正文发送到哪里：

```
int *binary = new int[bufferLength];
...

std::stringstream out(data);
out << "POST /push1_pub?id=game HTTP/1.1\n";
out << "Host: http://0.0.0.0:80\n";
out << "Content-Length: ";
out << bufferLength*sizeof(int);
out << "\r\n\r\n";
out << binary;

if (socket.send(data.c_str(), data.size()) == -1)
{
    std::cout << "Failed to send headers\n";
}
else
{
    // Send request body
    socket.send(reinterpret_cast<char*>(binary), bufferLength*sizeof(int));
    // Get the answer of server
    char buf[1024];
    std::cout << socket.recv(buf, 1024) << std::endl;
    std::cout << buf << std::endl;
} 
```

但是在`buf`发送正文后，我有：

```
<html>
<head><title>400 Bad Request</title></head>
<body bgcolor="white">
<center><h1>400 Bad Request</h1></center>
<hr><center>nginx</center>
</body>
</html> 
```

这里有什么问题？

* * *

**更新**：

由于您的评论，我写了新的标题：

```
std::string data;
std::stringstream out(data);
out << "POST /push1_pub?id=game\r\n";
out << "Host: http://localhost\r\n";
out << "Content-Length: ";
out << bufferLength << "\r\n";
out << "\r\n\r\n";
out << binary; 
```

仍然有同样的问题。

* * *

**更新2**

使用此命令：`curl -s -v -X POST 'http://0.0.0.0/push1_pub?id=game' -d 'Test'`一切正常，并正确生成和发送发布请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:23:41.223

您的主机线路错误。它应该是一个简单的主机名，例如“localhost”或“example.com”，而不是`http://0.0.0.0:80`您现在获得的 URL。

网络服务器使用主机行来识别正在请求托管在单个 IP 上的潜在数千个站点中的哪一个。端口号也无用，因为在您发送 HTTP 标头时，TCP 连接已经建立。而且由于您已经在执行 HTTP 请求，因此无需冗余指定正在使用的协议。

# scala - 使用 Casbah/Scala 在 MongoDB 上执行自定义函数

> ID：10159475
> 
> 赞同：2
> 
> 时间：2012-04-15T04:23:33.353
> 
> 标签：scala, mongodb, casbah

我已经使用它的命令行客户端在 MongoDB 中定义了一个函数。

```
function something(){...} 
```

我想知道如何使用 Scala 的 casbah 执行自定义 MongoDB 函数。

有什么建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:51:38.060

有几种方法可以在服务器上运行任意 javascript 代码。您可以从客户端将其作为字符串提供并将其发送到服务器进行评估，或者首先在服务器上安装该功能，如此处所述：http: [//docs.mongodb.org/manual/core/server-side- javascript/](http://docs.mongodb.org/manual/core/server-side-javascript/)

服务器端函数在每个 db 中注册，在一个名为 system.js 的集合中。

无论哪种方式，您都可以使用 db.eval() 命令调用您的代码，如下所示：

```
/* Call like so:
     evalJavascript(myDB, "function (oid) { return coll.find({_id: oid}); }", someObjectId)
*/
def evalJavascript(db:MongoDB, func: String, args: String*): Validation[String, Object] = {
  val result = db.command(Map(
    "eval" -> func,
    "args" -> args.toList
  ));

  if (result.ok) {
    result.get("retval").success
  } else {
    result.getErrorMessage().failure
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:51:14.260

您是在谈论用 JavaScript 编写的 MapReduce 作业吗？如果是这样，你可以使用`.mapReduce(...)`集合的方法，但你需要指定map、reduce和finalize函数。
[这是示例](https://github.com/mongodb/casbah/blob/master/casbah-core/src/test/scala/MapReduceSpec.scala#L103)。

如果您正在谈论执行任意 JavaScript 代码，我认为这是不可能的（为什么不使用 scala 进行对象操作？）。

# php - php session_start() 警告

> ID：10159484
> 
> 赞同：-2
> 
> 时间：2012-04-15T04:25:25.460
> 
> 标签：php, session, warnings

我是 php 新手。我试图从会话中获取价值。下面是我的代码。

在登录页面设置会话

```
session_start(); 
$_SESSION["username"] = $username ; 
$_SESSION["password"] = $password ; 
$_SESSION["companycode"] = $companycode; 
```

获取会话

```
if(! isset($_SESSION))
session_start();  
$a=$_SESSION["companycode"];
echo $a; 
```

但是我在我的页面中收到了警告：

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在 C:\xampp\htdocs\lucent 中发送（输出开始于 C:\xampp\htdocs\lucent\clientlogin.php:216） \clientlogin.php 在第 219 行

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:27:14.400

您在开始会话之前在某处发送文本。别那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:24:24.553

`<?php`可能是您之前在某些文件中有空格。
检查你的文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T04:43:42.770

也许问题是您需要更改为“”的“”

```
$_SESSION['nome'] == "" in to $_SESSION['nome'] == '' 
```

或者

您的文件编码是 UTF8 并且有空白行，这可能会导致发送标头。将编码更改为 ANSI。

我使用 Notepad++，你可以在右下角看到编码。

如果上述方法均无效，请尝试在`<html>`标记之前移动它。

# php-5.3 - PHP处理多个复选框

> ID：10159486
> 
> 赞同：1
> 
> 时间：2012-04-15T04:25:49.463
> 
> 标签：php-5.3

好的，我的 index.html 格式如下：

```
<form action="process.php" method="post">
  <table>
    <tr>
      <td><input name="Field[]" type="checkbox" value="Accounting" />Accounting</td>
      <td><input name="Field[]" type="checkbox" value="Finance" />Finance</td>
      <td><input name="Field[]" type="checkbox" value="Marketing" />Marketing</td>
    </tr>
  </table>
</form> 
```

我有 process.php 如下：

```
<table>
  <tr>
    <th>Field(s):</th>
    <td>
      <?php
        if(isset($_POST['Field']))
        {
          for($i = 0; $i < count($_POST['Field']); $i++)
          { echo $_POST['Field'][$i] . ' '; }
        }
      ?>
    </td>
  </tr>
</table> 
```

然而由于某种原因，我只打印了最后一个复选框的第一个字母。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T04:45:07.397

```
Try this one in process.php to get the values from $_POST['Field']

   <table>
    <tr>
     <th>Field(s):</th>
     <td>
      <?php
        if(isset($_POST['Field']))
        {
          foreach ($_POST['Field'] as $value) {
            echo $value;
          }
        }
      ?>
     </td>
    </tr>
   </table> 
```

# sql - ORACLE sql查询获取前3名工资rownum大于

> ID：10159495
> 
> 赞同：3
> 
> 时间：2012-04-15T04:28:06.650
> 
> 标签：sql, oracle

我想写一个查询来显示获得前 3 名薪水的员工

```
 SELECT *
    FROM (SELECT salary, first_name
            FROM employees
        ORDER BY salary desc)
   WHERE rownum <= 3; 
```

但我不明白这个 rownum 是如何计算嵌套查询的，如果它有问题，请让我理解：

```
SELECT *
  FROM (SELECT salary, first_name 
          FROM employees
      ORDER BY salary )
 WHERE rownum >= 3; 
```

我浏览了这个链接[Oracle/SQL: Why does query "SELECT * FROM records WHERE rownum >= 5 AND rownum <= 10" - return zero rows](https://stackoverflow.com/questions/855422/oracle-sql-why-does-query-select-from-records-where-rownum-5-and-rownum)，但它再次指向一个链接，它没有给出答案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T08:16:25.000

a_horse_with_no_name 的答案很好，
但只是为了让您了解为什么您的第一个查询有效而您的第二个查询无效：

当您使用子查询时，Oracle 不会*神奇地使用***子查询**的 rownum ，它只是获取排序的数据，因此它相应地给出 rownum，匹配条件的第一行仍然获得 rownum 1，依此类推。这就是为什么您的第二个查询仍然不返回任何行的原因。

如果要限制起始行，则需要保留子查询的rownum，即：

```
SELECT *
FROM (SELECT * , rownum rn
  FROM (SELECT salary, first_name
          FROM employees
      ORDER BY salary ) )sq
WHERE sq.rn >= 3; 
```

但正如 a_horse_with_no_name 所说，有更好的选择......

**编辑：**为了让事情更清楚，看看这个查询：

```
with t as (
select 'a' aa, 4 sal from dual
union all
select 'b' aa, 1 sal from dual
union all
select 'c' aa, 5 sal from dual
union all
select 'd' aa, 3 sal from dual
union all
select 'e' aa, 2 sal from dual
order by aa
)
select sub.*, rownum main_rn 
  from (select t.*, rownum sub_rn from t order by sal) sub 
 where rownum < 4 
```

注意sub rownum和main rownum的区别，看哪个用于criteria

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T07:47:35.490

查询的“rownum”在order by 应用于结果**之前分配。**所以 rownumw 42 可能会成为第一行。

一般来说，您需要使用内部查询中的 rownum 来限制您的整体输出。这在手册中有很好的解释：

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns009.htm#i1006297](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns009.htm#i1006297)

我更喜欢使用 row_number() 代替，因为您可以更好地控制排序，而且它是适用于大多数现代 DBMS 的标准功能：

```
SELECT *
FROM (
  SELECT salary, 
         first_name, 
         row_number() over (order by salary) as rn
  FROM employees
)
WHERE rn <= 3
ORDER BY salary; 
```

您应该了解，在这种情况下，派生表只需要能够对生成的`rn`列应用条件。它不能避免“rownum 问题”，因为 的值`row_number()` **仅**取决于`over(...)`部件中指定的顺序（它独立于应用于查询本身的任何排序）

请注意，这不会返回具有相同薪水且仍属于前三名的员工。在这种情况下，使用`dense_rank()`可能更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T05:38:09.693

如果你想选择薪水前三名的人..也许你应该考虑使用分析..更像

```
SELECT *
FROM (
    SELECT salary, first_name, dense_rank() over(order by salary desc) sal_rank
    FROM employees 
)
WHERE  sal_rank <= 3 
```

即所有具有第三高（排名）工资金额（或更多）的人

与使用普通 rownum 相比，这样做的好处是，如果您有多个薪水相同的人，他们都将被退回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T19:17:05.337

打印第五高薪水的最简单方法。

```
SELECT MIN(SALARY) FROM (SELECT SALARY FROM EMPLOYEES ORDER BY DESC) WHERE ROWNUM BETWEEN 1 AND 5 
```

根据相同，如果您想打印第三或第四高薪水，则只需更改最后一个值。（意味着使用 3 或 4 而不是 5，您将获得第三或第四高薪水）。

```
SELECT MIN(SALARY) FROM (SELECT SALARY FROM EMPLOYEES ORDER BY DESC) WHERE ROWNUM BETWEEN 1 AND 4

SELECT MIN(SALARY) FROM (SELECT SALARY FROM EMPLOYEES ORDER BY DESC) WHERE ROWNUM BETWEEN 1 AND 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-30T10:36:17.100

SELECT EMPNO, SAL, (SELECT SUM(E.SAL) FROM TEST E WHERE E.EMPNO <= T.EMPNO) R_SAL FROM (SELECT EMPNO, SAL from TEST ORDER BY EMPNO) T

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T02:11:33.363

返回所有字段详细信息的 oracle 中查找前 3 名员工的最简单方法：

```
SELECT *
FROM (
    SELECT * FROM emp  
      ORDER BY sal DESC)
WHERE rownum <= 3 ; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-22T08:58:55.467

```
select * 
from (
    select emp.*, 
           row_number() over(order by sal desc)r 
    from emp
) 
where r <= 3; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-15T12:32:10.917

```
SELECT Max(Salary)
FROM Employee
WHERE Salary < (SELECT Max(salary) FROM employee WHERE Salary NOT IN (SELECT max(salary) FROM employee))
ORDER BY salary DESC; 
```

# javascript - Internet Explorer 和 Base64 图像显示

> ID：10159500
> 
> 赞同：21
> 
> 时间：2012-04-15T04:28:31.843
> 
> 标签：javascript, base64

为了使用 Javascript 在客户端更轻松地操作各种图像，我在服务器端（在 VB 2010 中）编写了一个函数来将文件转换为我发送给客户端的 base64 字符串。

当我在 Internet Explorer 8.0 中使用 3 个不同的图像、1 个纵向和 2 个横向进行尝试时，我意识到只有纵向图像完全显示，同时两个横向图像都被截断（我只能看到图像的上半部分）。

我以为我的转换功能有一个错误，直到我用 Firefox 尝试了我的本地页面：每个图像都被 Firefox 完美显示。

所以我的问题是：这是 Internet Explorer 的一个众所周知的错误吗？如果答案是肯定的，对于那个众所周知的错误是否有众所周知的补救措施？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T06:11:06.303

IE8 只能处理最大 32kb 的 Base64 URI 图像。这是一个有点烦人的限制，但您仍然可以使用图标/等。请记住，无论如何，Base64 编码图像平均多出 33% 的数据发送到管道中，所以它是......嗯，你知道的，请使用你的判断。

对于任何感兴趣的人，也可以在 IE6/7 中进行这些工作（我可能会补充说，没有 32kb 的限制......）：http: [//venodesigns.net/2010/06/17/you-got-your- base64-in-my-css/](http://venodesigns.net/2010/06/17/you-got-your-base64-in-my-css/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T22:59:36.490

IE8 限制为 32KB。解决此问题的一种方法是仅在“图块”中提供图像，其中每个图块小于 32KB。

# python - 用 Python 循环遍历行

> ID：10159502
> 
> 赞同：4
> 
> 时间：2012-04-15T04:28:39.363
> 
> 标签：python, loops

所以我有一个包含以下内容的文件：

```
SequenceName 4.6e-38 810..924
SequenceName_FGS_810..924 VAWNCRQNVFWAPLFQGPYTPARYYYAPEEPKHYQEMKQCFSQTYHGMSFCDGCQIGMCH
SequenceName 1.6e-38 887..992
SequenceName_GYQ_887..992 PLFQGPYTPARYYYAPEEPKHYQEMKQCFSQTYHGMSFCDGCQIGMCH 
```

我希望我的程序只读取包含这些蛋白质序列的行。到目前为止，我得到了这个，它跳过了第一行并阅读了第二行：

```
handle = open(filename, "r")
handle.readline()
linearr = handle.readline().split()
handle.close()

fnamealpha = fname + ".txt"
handle = open(fnamealpha, "w")
handle.write(">%s\n%s\n" % (linearr[0], linearr[1]))
handle.close() 
```

但它只处理第一个序列，我需要它来处理包含序列的每一行，所以我需要一个循环，我该怎么做？保存到 txt 文件的部分也很重要，所以我需要找到一种方法来结合这两个目标。我上面代码的输出是：

```
>SequenceName_810..924
VAWNCRQNVFWAPLFQGPYTPARYYYAPEEPKHYQEMKQCFSQTYHGMSFCDGCQIGMCH 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T04:42:41.343

好的，我想我理解你的问题——你想遍历文件中的行，对吧？但只有序列中的第二行——带有蛋白质序列的那一行——很重要，对吗？这是我的建议：

```
# context manager `with` takes care of file closing, error handling
with open(filename, 'r') as handle:
    for line in handle:
        if line.startswith('SequenceName_'):
             print line.split()
             # Write to file, etc. 
```

我的理由是您只对以 . 开头的行感兴趣`SequenceName_###`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:37:11.557

使用`readlines`并将其全部投入`for`循环。

```
with open(filename, 'r') as fh:
    for line in fh.readlines:
        # do processing here 
```

在该`#do processing here`部分中，您可以只准备另一个行列表以写入另一个文件。（使用`with`手柄所有正确的关闭和确定。）

# c# - 无法找到我的数据库文件和连接字符串的位置？

> ID：10159509
> 
> 赞同：0
> 
> 时间：2012-04-15T04:29:30.420
> 
> 标签：c#, sql-server, silverlight, wcf-ria-services

[我从http://code.msdn.microsoft.com/Authorization-based-aa2c0185/view/SourceCode](http://code.msdn.microsoft.com/Authorization-based-aa2c0185/view/SourceCode)下载了一个演示应用程序

我在我的 Visual Studio 上运行它，一切正常。`ASPNETDB.MDF`其文件夹中有一个数据库，`App_Data`用于存储用户信息或检索登录信息。

现在我想要的是用我的 SQL Server 中的另一个数据库更改这个数据库。

为此，可以有两种方法：

*   找到连接字符串等`ASPNETDB`并用我自己的数据库更改它们。

*   或通过附加将此`ASPNETDB`文件添加到 SQL Server。但它在附加它时显示错误。

此外，如果我从项目中排除`App_Data`文件夹......那么即使它也能工作......

在哪里可以找到 DB 的连接字符串？我想用我自己的更改数据库？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:38:13.373

它使用 machine.config 中的默认连接字符串：

```
<add name="LocalSqlServer" connectionString="data source=.\SQLEXPRESS;Integrated  Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:38:22.180

转到`Web.debug.config`文件。在那里你会发现注释如何连接你的配置文件。这将使用配置转换，因此当您在调试模式下构建时，它将更改您的配置文件以覆盖机器默认值（这是它当前使用的）。只要按照评论，你应该很好:)

# multithreading - 获取线程起始地址

> ID：10159516
> 
> 赞同：2
> 
> 时间：2012-04-15T04:30:44.590
> 
> 标签：multithreading, delphi, process, get

我正在写一个进程查看器，它完成了 99%，我只需要获取进程线程的起始地址，但我不知道该怎么做。谁能帮我？：/ 谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T04:40:12.657

您可以使用将[THREAD_INFORMATION_CLASS](http://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/NT%20Objects/Thread/THREAD_INFORMATION_CLASS.html)枚举的[ThreadQuerySetWin32StartAddress](http://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/NT%20Objects/Thread/THREAD_INFORMATION_CLASS.html#ThreadQuerySetWin32StartAddress)值作为参数[`NtQueryInformationThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684283%28v=vs.85%29.aspx)传递的函数。

检查这个示例应用程序

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  TlHelp32,
  Windows,
  SysUtils;

const
  THREAD_QUERY_INFORMATION   = $0040;
  STATUS_SUCCESS             = $00000000;
  ThreadQuerySetWin32StartAddress = 9;

type
  NTSTATUS = LONG;
  THREADINFOCLASS = DWORD;

function NtQueryInformationThread(
    ThreadHandle: THandle;  ThreadInformationClass: THREADINFOCLASS;
    ThreadInformation: Pointer; ThreadInformationLength: ULONG;  ReturnLength: PULONG): NTSTATUS; stdcall; external 'ntdll.dll';

function OpenThread(dwDesiredAccess: DWord;
                    bInheritHandle: Bool;
                    dwThreadId: DWord): DWord; stdcall; external 'kernel32.dll';

function GetThreadStartAddress(th32ThreadID : DWORD) : Pointer;
var
  hThread : THandle;
  ThreadStartAddress : Pointer;
begin
  Result:=0;
  hThread := OpenThread(THREAD_QUERY_INFORMATION , false, th32ThreadID);
  if (hThread = 0) then RaiseLastOSError;
  try
    if NtQueryInformationThread(hThread, ThreadQuerySetWin32StartAddress, @ThreadStartAddress, SizeOf(ThreadStartAddress), nil) = STATUS_SUCCESS then
      Result:=ThreadStartAddress
    else
    RaiseLastOSError;
  finally
      CloseHandle(hThread);
  end;
end;

function GetThreadsList(th32ProcessID:DWORD): Boolean;
var
  hSnapshot     : THandle;
  NextThread    : Boolean;
  TThreadEntry  : TThreadEntry32;
begin
  hSnapshot := CreateToolhelp32Snapshot(TH32CS_SNAPTHREAD, 0); //Takes a snapshot of the all threads
  Result := (hSnapshot <> INVALID_HANDLE_VALUE);
  if Result then
    try
      TThreadEntry.dwSize := SizeOf(TThreadEntry);
      NextThread := Thread32First(hSnapshot, TThreadEntry);//get the first Thread
      while NextThread do
      begin
        if TThreadEntry.th32OwnerProcessID = th32ProcessID then //Check the owner Pid against the PID requested
            Writeln(Format('Thread Id %.8x Start Address %p',[TThreadEntry.th32ThreadID, GetThreadStartAddress(TThreadEntry.th32ThreadID)]));
        NextThread := Thread32Next(hSnapshot, TThreadEntry);//get the Next Thread
      end;
    finally
      CloseHandle(hSnapshot);
    end;
end;

begin
  try
    GetThreadsList(4028);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  readln;
end. 
```

注意：要访问某些系统进程，您需要`SeDebugPrivilege`在应用程序中设置权限。

# python - Python：我将如何为任意长度的单词编写这个“if”语句？

> ID：10159517
> 
> 赞同：0
> 
> 时间：2012-04-15T04:30:46.350
> 
> 标签：python, python-2.7

> **可能重复：**
> [检查字符串的字符是否按字母顺序升序，其升序是否均匀分布 python](https://stackoverflow.com/questions/9922436/checking-if-a-strings-characters-are-ascending-alphabetically-and-its-ascent-is)

这是我目前拥有的：

```
wordlist = ['fox', 'aced', 'definite', 'ace']

for word in wordlist:
    a = len(word)
    if (ord(word[a-(a-1)] - ord(word[(a-a)])) == ord(word[a-(a-2)])-ord(word[a-(a-1)]:
        print "success", word
    else:
        print "fail", word 
```

我要做的是计算单词中每个字母之间的 ASCII 值。并检查字母的顺序是否增加了相同的值。

所以对于狐狸来说，它会检查第 2 个和第 1 个字母的序数之差是否等于第 3 个和第 2 个字母的序数之差。

但是，在我当前的“if”语句中，只比较一个单词的前 3 个字母。如何重写此语句以涵盖长度大于 3 的单词中的每个字母？

抱歉，如果我不能清楚地介绍这一点，谢谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:01:44.977

考虑

```
import operator

def diff(s):
    return map(operator.sub, s[1:], s[:-1])

wordlist = ['fox', 'aced', 'definite', 'ace']
print [w for w in wordlist if len(set(diff(map(ord, w)))) == 1]

## ['fox', 'ace'] 
```

后一个表达式分解为：

```
w = 'fox'
print map(ord, w) # [102, 111, 120]
print diff(map(ord, w)) # [9, 9]
print set(diff(map(ord, w))) # set([9])
print len(set(diff(map(ord, w)))) # 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T11:20:07.060

注意使用`len(set(...)) < 2`：

```
def check(word):
    return len(set(ord(a) - ord(b) for a,b in zip(word,word[1:]))) < 2

wordlist = ['fox', 'aced', 'definite', 'ace']
print filter(check, wordlist) 
```

印刷：

```
['fox', 'ace'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T04:45:00.470

尝试这个：

```
wordlist = ['fox', 'aced', 'definite', 'ace', 'x']

for word in wordlist:
    if len(word) < 2:
        print "fail", word
        continue
    diff = ord(word[1]) - ord(word[0])
    if all(ord(word[i+1])-ord(word[i])==diff for i in xrange(1, len(word)-1)):
        print "success", word
    else:
        print "fail", word 
```

请注意，此解决方案是有效的，因为它不会生成任何中间列表或单词切片，并且内部的处理`all()`是通过迭代器完成的，也是`all()`“短路”：它将在`False`找到的第一个处终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T04:57:36.407

我相信您正在寻找单词中每个字母之间的 ord 差异是相同的。

```
def check(word):
    return all((ord(ele_1) - ord(ele_2)) == (ord(word[0]) - ord(word[1])) for ele_1,ele_2 in zip(word,word[1:]) ) 
```

结果：

```
>>> check('abcde')
True
>>> check('wdjhrd')
False 
```

申请您​​的名单：

```
wordlist = ['fox', 'aced', 'definite', 'ace']

new_list = filter(check, wordlist) 
```

结果：

```
>>> new_list
['fox', 'ace'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T05:16:29.890

这是我的表单，我觉得它更具可读性并且可扩展为列表理解。

```
>>> a = 'ace'
>>> all(ord(a[n])-ord(a[n-1]) == (ord(a[1])-ord(a[0])) for n in xrange(len(a)-1,0,-1))
True 
```

并遍历单词列表，列表理解：

```
wordlist = ['fox', 'aced', 'definite', 'ace']
[a for a in wordlist if all(ord(a[n])-ord(a[n-1]) == (ord(a[1])-ord(a[0])) for n in xrange(len(a) -1,0,-1))] 
```

回报：

```
['fox', 'ace'] 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-15T04:40:08.230

也许尝试更改`ord(word[a-(a-2)])`为`ord(word[a-(a-len((word)-1))])`. 我不确定这是否是您的确切代码，但它似乎也是一些 EOF 错误。

# c - 如果我不在 GMP 中使用 mpz_clear 会发生什么？

> ID：10159522
> 
> 赞同：3
> 
> 时间：2012-04-15T04:31:47.470
> 
> 标签：c, gmp

在[GMP 手册](http://gmplib.org/manual/Initializing-Integers.html)的整数部分：

> 函数：void mpz_clear (mpz_t x)
> 
> 释放 x 占用的空间。完成后为所有 mpz_t 变量调用此函数。

调用这个过程会减慢我的程序，所以如果没有必要我不想这样做。

> **问题**：如果我不使用 mpz_clear 会发生什么？

我的猜测是可能会发生内存泄漏。虽然，我不确定我是否应该关注这一点（例如，C 可能会为我清理它，或者当程序退出时可能会返回内存）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T04:35:29.990

它会导致你的内存泄漏。
C 没有垃圾收集器来为您释放它。你必须通过调用上述函数来做到这一点。
是的，当程序退出时，操作系统会回收内存。但是，如果您通过连续分配而继续泄漏内存并且没有解除分配，那么您的程序可能无法正常运行更长的时间，因为由于连续的内存泄漏，它没有足够的内存。

如果调用该函数导致您崩溃，您应该调试并找到崩溃的原因并修复它。

# codeigniter - 在本地主机上使用 Codeigniter

> ID：10159523
> 
> 赞同：0
> 
> 时间：2012-04-15T04:32:03.767
> 
> 标签：codeigniter, localhost, live, base-url

我是codeigniter的新手。我最近开始研究一个在 codeigniter 中开发的项目。

我已经下载了该项目并在本地进行了处理，然后将更新上传到现场。

问题是当我在本地运行它以检查例如[http://localhost/example/index.php/home](http://localhost/example/index.php/home)或[http://localhost/example/](http://localhost/example/)它直接移动到实时网站 www.example.com/index.php /home 代替[http://localhost/example](http://localhost/example)，我还更改了 application/config/config.php 中的 base_url。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:29:45.607

将其保存在**.htaccess中**

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

# video - Fancybox + VideoJS - 为什么 2 点击激活？

> ID：10159524
> 
> 赞同：-1
> 
> 时间：2012-04-15T04:32:15.197
> 
> 标签：video, fancybox

搜索后 [为什么fancybox需要两次点击才能激活？](https://stackoverflow.com/questions/6510194/why-does-fancybox-require-two-clicks-activate)

但是我仍然无法解决问题。

我的文件位于此处

[http://bitstream.ca/beta/#](http://bitstream.ca/beta/#)

任何 FancyBox 专家可以告诉我为什么需要点击 2 次吗？

还有为什么我似乎无法摆脱垂直滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:40:09.187

您需要`.fancybox()`在 DOM 就绪时调用调用，而不是在单击时调用。

```
$(document).ready(function() {

    var $elt = $('div.jTscroller'),
        id = $elt[0].id,
        url = id + '.html',
        w = parseInt($elt.attr('w'), 10),
        h = parseInt($elt.attr('h'), 10);

    $elt.fancybox({
        padding: 2,
        height: h + 28,
        width: w + 23,

        autoScale: true,
        openEffect: 'elastic',
        openSpeed: 150,
        type: 'iframe',
        href: url,
        closeEffect: 'elastic',
        closeSpeed: 250,
        helpers: {
            title: {
                type: 'outside'
            },
            overlay: {
                speedIn: 750,
                opacity: 0.9
            }
        } //end helpers
    }) //end fancybox                
}); //end click
}); //end ready​​ 
```

显示讨厌的滚动条是因为`<body>`页面元素应用`video1.html`了用户代理默认的 8px 边距。添加`margin: 0`到该元素，您就可以开始了：

![在此处输入图像描述](../Images/13872cb90f988a82111d137dcb85d257.png)

# python - pyside + py2exe，应用程序随机崩溃，没有有意义的错误消息

> ID：10159530
> 
> 赞同：2
> 
> 时间：2012-04-15T04:33:39.133
> 
> 标签：python, py2exe, pyside

我有一个 pyside python 应用程序，我已经在主循环中进行了错误处理，如下所示。

```
app = QApplication(sys.argv)
try:
   wg = MyMainWindow(app)
   wg.show()
   sys.exit(app.exec_())
except Exception, e:
   print 'error' 
```

当我使用 py2exe 编译此应用程序时，有时会发生随机致命崩溃：“Microsoft Visual C++ 运行时库运行时错误！” “此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。”

而且我无法获得任何有意义的错误消息来帮助我找到问题的根本原因。我尝试从 Windows 任务管理器创建核心转储，但出现“拒绝访问”错误。

有谁知道这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:48:32.007

您需要安装[Visual c++ Runtime Library](http://www.microsoft.com/download/en/details.aspx?id=5555)。有关更多信息，请查看 py2exe[教程](http://www.py2exe.org/index.cgi/Tutorial#Step5)的“提供 Microsoft Visual C 运行时 DLL”部分。

# iphone - Time Profiler 中这个神秘的函数地址是什么？

> ID：10159533
> 
> 赞同：1
> 
> 时间：2012-04-15T04:34:43.290
> 
> 标签：iphone, xcode, instruments

一个函数出现在我的 iPhone 应用程序中，只有地址：0x8007c318。它消耗大量的CPU时间；所以我想知道它是什么并减少它的 CPU 消耗。

它的调用者大多是其他未知函数（见列表）。在我调用它的少数函数中，我找不到可以发生这种调用的地方。

有谁知道这个神秘的功能是什么？我在 iPhone4 上运行 iOS5.1

```
Running Time,Self,,Symbol Name
3332.0ms  100.0%,3332, ,0x8007c318
1050.0ms   31.5%,0, , __psynch_cvwait
496.0ms   14.8%,0, , 0x80079b83
427.0ms   12.8%,0, , 0x80021621
209.0ms    6.2%,0, , 0x801d9363
205.0ms    6.1%,0, , 0x80020fe7
198.0ms    5.9%,0, , mach_msg_trap
141.0ms    4.2%,0, , 0x800761d7
140.0ms    4.2%,0, , 0x8000f211
139.0ms    4.1%,0, , kevent
50.0ms    1.5%,0, , 0x8000f487
48.0ms    1.4%,0, , 0x80079533 
```

# javascript - 无法将 jQuery 中定义的变量用于 html

> ID：10159534
> 
> 赞同：-1
> 
> 时间：2012-04-15T04:34:57.800
> 
> 标签：javascript, jquery

我希望每次选择下拉菜单中的颜色时都使用 document.write() 打印变量“值”。

```
<script type="text/javascript">
    var value = 'xyz';

             $(document).ready(function(){ 
                  $('#button1').click(function(){ 
                    value = $('#combo').val();
                  alert (value);

                    });
        }); 

    </script>
<select id  = "combo">
    <option>White</option>
    <option>Yellow</option>
    <option>Fuchisa</option>
    <option>Red</option>
    <option>Silver</option>
    <option>Gray</option>
    <option>Olive</option>
</select>
<input id="button1" type="button" value="Click!" />
<p><script type="text/javascript"> document.write(value) </script></p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:39:38.553

Eek - 不要使用 document.write

[http://jsfiddle.net/2ahKH/](http://jsfiddle.net/2ahKH/)

```
$('#button1').click(function() {
    value = $('#combo').val();
    $('p').html(value);
}); 
```

# python - 如何使用 * 或 捕获字符串？在 python 正则表达式中使用组

> ID：10159537
> 
> 赞同：1
> 
> 时间：2012-04-15T04:35:23.353
> 
> 标签：python, regex, grouping, capture, metacharacters

我在下面有 str1 和 str2，我只想使用一个匹配两者的正则表达式。在 str1 的情况下，我还希望能够捕获 QSFP 端口的数量

```
>>> str1='''4 48 48-port and 6 QSFP 10GigE Linecard 7548S-LC''' 
>>> str2='''4 48 48-port 10GigE Linecard 7548S-LC''' 
>>> 
```

我希望能够捕获数字“4”、“48”、“6”（如果存在）和“7548”。但我无法使用“？”捕获“6” 元字符。

当我不使用元字符时，捕获适用于 str1，但我可以使用这个正则表达式，因为它不适用于 str2：

```
>>> re.search(r'^(\d+)\s+(\d+)\s+.*(?:(\d+)\s+QSFP).*\s+(\d+)S-LC', str1, re.I|re.M).group(3) 
'6' 
>>> 
```

即使我使用“+”表示一次出现，它也可以工作，但同样，这对 str2 不起作用：

```
>>> re.search(r'^(\d+)\s+(\d+)\s+.*(?:(\d+)\s+QSFP)+.*\s+(\d+)S-LC', str1, re.I|re.M).group(3) 
'6' 
>>> 
```

当我使用“？” 为了匹配 0 或 1 次出现，即使 str1 也捕获失败：

```
>>> re.search(r'^(\d+)\s+(\d+)\s+.*(?:(\d+)\s+QSFP)?.*\s+(\d+)S-LC', str1, re.I|re.M).group(3) 
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:54:52.970

我对这个问题的解释是，OP 想要一个匹配两个字符串的正则表达式，如果它存在，则返回 .group(1) 中的数字（就像它在 str1 中所做的那样）。我认为问题在于他/她无法同时捕获 str1 中的“6”并匹配 str2。

我从一些快速的试验和错误中得到了这个：

```
>>> str1='''4 48 48-port and 6 QSFP 10GigE Linecard 7548S-LC''' 
>>> str2='''4 48 48-port 10GigE Linecard 7548S-LC''' 
>>> re.search(r'^4\s+48\s+.*(?:(\d+)\s+QSFP)|.*-LC', str1, re.I|re.M).group(1)
'6'
>>> re.search(r'^4\s+48\s+.*(?:(\d+)\s+QSFP)|.*-LC', str2, re.I|re.M).group(1)
>>> # no error returned, implying a match was found. 
```

不同之处在于我用 .* “或”非捕获括号

不幸的是，这使得正则表达式更加难以理解，但也许它对你有用。

（为完整性而编辑）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:52:11.930

> 我希望能够捕获数字“4”、“48”、“6”（如果存在）和“7548”。但我无法使用“？”捕获“6” 元字符。

如果您避免使用正则表达式，您可以简化您的生活，因为您的查询非常简单。

```
str1='''4 48 48-port and 6 QSFP 10GigE Linecard 7548S-LC'''
str2='''4 48 48-port 10GigE Linecard 7548S-LC'''
lines = [str1,str2]
nums = []
for l in lines:
    r = []
    bits = l.split()
    last_num = bits.pop()[:-4]
    _ = [r.append(i) for i in bits if i.isdigit()]
    r.append(last_num)
    nums.append(r)

>>> nums
[['4', '48', '6', '7548'], ['4', '48', '7548']] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T04:51:31.620

我不确定您的具体要求是什么。

是这样的吗：

```
>>> str1 = "hello 12 world"
>>> str2 =  "hello world"
>>> obj = re.search(r'(\d+)',str1)
>>> obj.group(0)
'12' 
```

现在检查`str2`其中不包含任何十进制值。

```
>>> obj = re.search(r'(\d+)',str2)
>>> if obj is not None:
...     print obj.group(0)
... else:
...     print "not found"
...
not found
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T06:10:41.590

我认为问题在于它`.*`正在吃掉 QSFP 位，并且因为`?`它没有动力回溯。将其更改`.*`为非贪婪`.*?`（令人惊讶 - 至少对我而言）没有帮助。但是，移动`.*`非捕获组内部*确实有*帮助：

```
>>> re.match(r'^4\s+48\s+(?:.*(\d+)\s+QSFP)?.*-LC', str1, re.I|re.M).group(1)
'6'
>>> re.match(r'^4\s+48\s+(?:.*(\d+)\s+QSFP)?.*-LC', str2, re.I|re.M).group(1)
>>> 
```

# asp.net-mvc-3 - LINQ to Entities 不支持指定的类型成员。仅支持初始化器、实体成员和实体导航属性

> ID：10159539
> 
> 赞同：9
> 
> 时间：2012-04-15T04:35:49.723
> 
> 标签：asp.net-mvc-3, linq, entity-framework, grid

在过去的两天里，我一直在想为什么这不起作用，但对于我的其他表来说，它工作得非常好。我什至测试了包含许多字段的其他模型。但是这个特殊的，即使只有 2 个字段也不起作用。我知道我可能会遗漏一个明显的部分，请帮忙。

这是我的模型

```
public class ReceivedItem
{        
    public int ReceivedItemID { get; set; }
    public int ItemID { get; set; }
} 
```

视图模型

```
public class ReceivedItemViewModel
 {
    public int ReceivedItemID { get; set; }
    public int ItemID { get; set; }
 } 
```

控制器

```
[GridAction]
public ActionResult GetReceivedItems()
  {
      return View(new GridModel(GetReceivedItemsViewModels()));
  }

private IQueryable<ReceivedItemViewModel> GetReceivedItemsViewModels()
{
    return db.ReceivedItems
         .Select(
          c => new ReceivedItemViewModel
            { 
               ItemID = c.ItemID
             });
 } 
```

看法

```
 @(Html.Telerik().Grid<ReceivedItem>()
.Name("grdItems")
.DataBinding(binding => binding.Ajax()
    .Select("GetReceivedItems", "Receiving"))
.DataKeys(keys => keys.Add(o => o.ItemID))
.Columns(cols =>
{  
    cols.Bound(c => c.ItemID);
})
.Pageable()
.Sortable()
.Groupable()
.Filterable() 
```

)

我使用萤火虫时遇到的错误：

```
The specified type member 'ReceivedItemID' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T17:57:36.337

据我所知，您无法在 Linq-to-SQL 查询中初始化非实体对象。尝试枚举结果，然后使用 Linq 创建您的视图模型。

你有什么（我猜这是抛出异常的地方）：

```
// Original Code
return db.ReceivedItems
     .Select(
      c => new ReceivedItemViewModel
        { 
           ItemID = c.ItemID
         }); 
```

枚举，然后使用 Linq 创建您的视图模型：

```
// First statement
var items = db.ReceivedItems.ToArray(); // Enumerates the collection.
// Second statement
return items.Select(
  c => new ReceivedItemViewModel
    { 
       ItemID = c.ItemID
     }); 
```

第一个 Linq 语句被翻译成 SQL 语句，结果被返回并枚举为一个数组，最后，在第二个语句中，该数组用于创建视图模型的集合。使用您的原始语句，Linq 语句的 SQL 翻译必须考虑视图模型（它无法做到）。

我希望这有帮助。（并且有道理）:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-20T08:08:39.803

我相信这里的问题实际上源于 Telerik，因为我刚刚使用 Telerik Kendo Grid 遇到了这个问题。投影到视图模型（在选择内）不是异常的实际原因。

请注意，引用的列“ReceivedItemID”未映射到投影中。我通过简单地分配缺失的属性来解决我的问题。

```
return db.ReceivedItems
     .Select(
      c => new ReceivedItemViewModel
        { 
           ReceivedItemID = c.ReceivedItemID
           ItemID = c.ItemID
         }); 
```

在我的例子中，模型运行了一个额外的步骤：

```
return Json(model.ToDataSourceResult(request)); 
```

Telerik ToDataSourceRequest 扩展方法修改了 SQL 查询，并且变得混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T16:36:38.587

检查以确保您没有将`IEnumerable`其用于您的收藏，请在此处查看更多信息：[https ://stackoverflow.com/a/32997694/550975](https://stackoverflow.com/a/32997694/550975)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-02T01:48:16.157

在您的控制器代码中，您可以尝试更改以下内容以使其具有交互性

```
[GridAction]
public ActionResult GetReceivedItems([DataSourceRequest] DataSourceRequest request)
  {
      return Json(db.ReceivedItems.AsEnumerable().Select(x => x).ToDataSourceResult(request));
  } 
```

# database - 如何使用 AWK 附加文本

> ID：10159542
> 
> 赞同：0
> 
> 时间：2012-04-15T04:36:25.543
> 
> 标签：database, linux, unix, awk, db2

抱歉，如果我在搜索 SO 时错过了这个。我有一个具有以下结构的文本文件

```
AAAA21346A  
AAAA21346A  
AAAA21346A  
AAAA21346A 
.  
.  
. 
```

直到超过 50 万条记录（半百万条记录）。

我想在每一行前面附加 ^N^1 使用`awk`. 怎么做到呢？

*更新：*

我的输出必须如下所示：

```
AAAA21346A^N^1
AAAA21346A^N^1
AAAA21346A^N^1
AAAA21346A^N^1 
```

依此类推，直到 EOF。每条记录后必须有一个换行符。

*********更多解释****** ** *****
我使用的是 db2 和 linux，因此我想到了 Awk。我想要做的是，我需要使用 db2 中的“加载自”命令并使用 ^ 作为分隔符将数据插入到具有 3 列的表中。但由于文本文件只包含一列，我想附加 ^N^1 以使其成为 3 列。我希望你们现在明白了。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:08:39.803

你想要的似乎很容易：

```
awk '{print $0 "^N^1"}' data_file 
```

添加线程 ID 的唯一问题是决定这样做的算法。例如，交替也很容易：

```
awk '{printf "%s^N^%d\n", $0, (NF % 2) + 1}' data_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:38:28.173

以下是使用 AWK 的更多方法：

```
awk 'BEGIN { ORS = "^N^1\n"} 1' inputfile 
```

或者，更明确地说：

```
awk 'BEGIN { ORS = "^N^1\n"} {print}' inputfile 
```

或者

```
awk 'BEGIN { OFS = "^"} {$2 = "N"; $3 = 1}1' inputfile 
```

或者

```
awk 'BEGIN { OFS = "^"} {$2 = "N"; $3 = 1; print}' inputfile 
```**

# c# - C# 类创建

> ID：10159544
> 
> 赞同：0
> 
> 时间：2012-04-15T04:37:03.817
> 
> 标签：c#

我只想问是否可以在c#的类中添加一个方法？？

例如，我有一个名为 Sample Form 的表单，然后我有两个文本框供用户输入数据。然后我有一个按钮，可以将文本框中的数据保存到数据库中。但是在将它保存到数据库之前，它应该首先检查文本框是否有值。

我想要做的是添加一个类并放一个函数或方法来进行检查，以便我也可以在其他形式中使用它。我将如何做？请帮我。非常感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:47:15.883

您可以做一些基本的事情，但您可能总是需要根据场景进行更改。

```
public static class FormValidator
{
    public static bool IsValid<TForm>(TForm form) where TForm : Form {
        if (!string.IsNullOrEmpty(form.TextBox1.Text) && !string.IsNullOrEmpty(form.TextBox2.Text)) {
            return true;
        }
        else {
            return false;
        }
    }
}

// example:
bool isValid = FormValidator.IsValid<MyForm>(myFormInstance); 
```

老实说，尽管您应该在每个需要验证的表单中进行表单验证。您寻求的方法是糟糕的设计，因为它在验证时创建了非常紧密的耦合，并且如果您需要为一种形式定制一些东西，它就会中断。

另外，听起来你应该设计你的表单来处理多种场景，而不是设计一个验证器来验证多个表单，但我希望这至少可以帮助你解决你的问题并提供洞察力。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:45:18.480

添加一个在单击时检查文本框的按钮...或使用 evnt 处理程序 ontext changed

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T04:52:53.000

你不需要写 calass 来做到这一点。TextBox 类已经有了。

```
textBox1.TextLength

if(textBox1.TextLength > 0)
    MessageBox.Show("TextBox has value!"); 
```

# java - 时间戳格式匹配

> ID：10159556
> 
> 赞同：0
> 
> 时间：2012-04-15T04:38:31.033
> 
> 标签：java, android, jakarta-ee, datetime

我写了这段代码来将字符串转换为时间戳：

```
String timeStamp = "2012-04-13 09:00:30";

    try{

        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        java.util.Date parsedDate = sdf.parse(timeStamp);
        System.out.println(parsedDate.toString());
        java.sql.Timestamp timestamp = new java.sql.Timestamp(parsedDate.getTime());
        System.out.println(timestamp.toString());           

    }catch (Exception e) {
        // TODO: handle exception
    } 
```

我得到的输出是：

```
2012-04-13 09:00:30.0 
```

但我希望输出为：

```
2012-04-13 09:00:30 
```

即我最后不需要 .0

请建议

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:42:02.363

你需要使用`format()`的方法`SimpleDateFormat`

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    //parsing string to date
    java.util.Date parsedDate = sdf.parse(timeStamp);
    //invoking toString() method which has its fixed format output
    System.out.println(parsedDate.toString()); 
```

现在使用

```
 System.out.println(sdf.format(parsedDate)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:46:21.220

像这样再次使用你的 sdf

```
 System.out.println(sdf.format(parsedDate)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T05:17:18.253

format() 的输出总是一个字符串。你到底在找什么？

您抱怨的“.0”仅存在于对象的字符串表示中。当它被插入数据库时​​，它是一个时间戳，而不是一个字符串。（当您直接查询数据库时，您可能会或可能不会看到额外的小数；这取决于您如何编写我们的 SQL。）

# html - 生成的 html 的奇怪问题 - 内容突破 div

> ID：10159561
> 
> 赞同：0
> 
> 时间：2012-04-15T04:39:16.313
> 
> 标签：html

我有一个完全从 Python 文件生成的 HTML 页面。我首先创建了一个 HTML 文件，然后基本上从 Python 脚本再次打印了所有内容。不要问我为什么。这是我们导师的要求。奇怪的问题是，如果段落标签中的内容太长，它们就会脱离容器。但它并没有发生在 HTML 版本中。我已经使用 chrome 检查了源代码，一切似乎都很好。

有谁可以帮我离开这里吗？

这是它的链接：[http](http://www.luxuryparadise.co.nr/) ://www.luxuryparadise.co.nr/ 这个域名只是为了隐藏我的学校域名。

打开网站时搜索“a”，然后单击结果。它会将您带到一个愚蠢的帐户页面。并检查您的右侧显示最近消息的位置。单击小“显示更多”链接以查看我正在谈论的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:43:15.170

这很正常。浏览器不会破坏一个很长的“单词”以将其包装到下一行。如果该文本块中有一些空格，浏览器会将它们拆分在那里。

您可以尝试使用 CSS3 属性强制分词：

```
word-wrap: break-word; 
```

顺便说一句，这与 Python 无关。这纯粹是客户端显示问题。

# android - Android : Battery Consumption During Idle TCP connection

> ID：10159562
> 
> 赞同：2
> 
> 时间：2012-04-15T04:39:27.710
> 
> 标签：android, tcp, power-management

I am trying to implement a push notification system for my android application. Being logged into a Google account is not allowed as per the SRS. That being the case, C2DM is not possible.

My goal is to use an always on TCP connection that sends a message indicating connectivity periodically so that the server knows it is on.

My problem is battery consumption. I have not implemented this yet, but before I do I need an understanding of how an open TCP connection that is idle affects the battery.

Some guidance on this or where to look would be highly appreciated.

# sql - Oracle 触发器将数据从一个表复制到另一个表

> ID：10159564
> 
> 赞同：-2
> 
> 时间：2012-04-15T04:39:42.720
> 
> 标签：sql, database, oracle

```
Student table : student ID, student name, student contact
Evaluation: EvalID, Eval number 
```

学生从 1-7 对每节课进行评价。我需要创建一个触发器来复制学生信息，如果他们给出的评估为 7，他们给出的评估将被放入另一个表中

我所做的是

```
Create or replace trigger test
After Insert on evaluation
when (eval_number = 0)
Begin 
```

我不知道从这里做什么....有什么想法吗？我的第一个触发器是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:07:32.120

下表：

```
CREATE TABLE student(
studentId INTEGER,
student_name varchar2(100),
student_contact varchar2(100));

CREATE TABLE evaluation(
evalId  INTEGER,
eval_num INTEGER,
student_id INTEGER)

create table eval_audit(
studentId INTEGER,
student_name VARCHAR2(100),
student_contact VARCHAR2(100),
eval_num INTEGER) 
```

当有 7 的评估时触发插入来自学生的数据：

```
CREATE OR REPLACE TRIGGER AIEvaludation
AFTER INSERT ON evaluation
FOR EACH ROW
WHEN (new.eval_num = 7)
DECLARE
    CURSOR curStudent IS
        SELECT studentid, student_name, student_contact
          FROM student
         WHERE studentid = :new.student_id;
    --
    vRowStudent curStudent%ROWTYPE;
BEGIN
    OPEN curStudent;
    FETCH curStudent INTO vRowStudent;
    CLOSE curStudent;
    INSERT INTO eval_audit
    (studentid, student_name, student_contact, eval_num)
    VALUES (vRowStudent.studentid, vRowStudent.student_name, vRowStudent.student_contact, :new.eval_num);
END AIEvaludation; 
```

# objective-c - 在 iOS 中混合图像

> ID：10159568
> 
> 赞同：-1
> 
> 时间：2012-04-15T04:40:45.607
> 
> 标签：objective-c, ios, transparency

![透明的](../Images/d2362083cc94492b537d5753c0347bc7.png) ![有色](../Images/8da76b5a1e83512ca65b4b5f5fa796f5.png)

我有两个名为透明和彩色的图像，如上所示。我想要

1.  首先显示透明图像
2.  当用户触摸屏幕时，在手指抚摸上显示彩色图像。

这是我的 drawRect 代码。

```
- (void) drawRect:(CGRect)rect
{
    [[UIColor redColor] set];
    CGContextRef context1 = UIGraphicsGetCurrentContext();
    UIImage *colorImage = [UIImage imageNamed:@"color.png"];
    UIImage *bwImage    = [UIImage imageNamed:@"transparent.png"];    
    CGContextSetBlendMode(context1, kCGBlendModeSourceAtop);

    // Draw the finger Strokes
    for (UIBezierPath *path in [touchPaths allValues]) {
    [path stroke];

    }

CGContextDrawImage(context1, rect, colorImage.CGImage);
CGContextDrawImage(context1, rect, bwImage.CGImage);    
UIGraphicsEndImageContext(); 
```

}

上面的代码只是创建了一个空白屏幕。我在这里做错了什么？请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T06:12:52.637

使用单个视图的`drawRect`方法意味着每次用户绘制某些东西时，您都需要绘制两个图像和一个贝塞尔路径。这将是非常低效的。您需要一种将图像和绘图区域存储在不同位置的方法。

CALayer 可以很好地解决这类问题。您可以将图像存储在图层中，并让用户的绘图蒙版其中一个图层。从[CALayer Class Reference](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)开始，包括示例。

对于真正流畅的绘图，您需要使用 OpenGL——尽管它需要做更多的工作才能做到正确。请参阅 Apple 的[GLPaint](https://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007328)示例。

* * *

至于为什么这段代码不起作用，它确实绘制了两个图像。但是，绘制的第二张图像将是`transparentImage`. 您的附件暗示这是不透明的灰色。这将使您的视图充满灰色，看起来什么都不做。如果您确定它没有画那么多，请检查以下内容：

1.  您是否在某处构建此类的视图 - 无论是在 Interface Builder 中还是在代码中？
2.  您是否在您知道正在显示的视图控制器的视图中添加此视图？
3.  你给这个视图一个大小吗？新创建的视图的宽度和高度可以为零，从而使它们实际上是不可见的。
4.  您的图像加载例程是否返回任何内容？

其中一些可以通过日志记录进行测试。例如，检查图像是否正确加载：

```
UIImage *colorImage = [UIImage imageNamed:@"color.png"];
UIImage *bwImage    = [UIImage imageNamed:@"transparent.png"];    

// Check if the images loaded.
NSLog(@"colorImage = %@", colorImage);
if (!colorImage)
    NSLog(@"colorImage did not load, nothing to draw");

NSLog(@"bwImage = %@", bwImage);
if (!bwImage)
    NSLog(@"bwImage did not load, nothing to draw"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:48:18.493

您正在调用`UIGraphicsEndImageContext()`，但您从未调用`UIGraphicsBeginImageContext(...)`，因此它可能正在删除默认的绘图上下文（或同样疯狂的东西）。那条线不应该在那里；这些函数用于创建您自己的`UIImage`，您无需在此处执行此操作。

# jsp - 关于使用 JSP 从 Mysql 表中显示 Blob(Image) 的问题

> ID：10159572
> 
> 赞同：0
> 
> 时间：2012-04-15T04:41:42.353
> 
> 标签：jsp

我想在 JSP 页面中显示 MySQL 表中的 blob（图像），我的代码如下：

```
 <%
    Blob image = null;
    Connection con = null;
    Statement stmt = null;
    ResultSet rs = null;
    byte[ ] imgData = null ; 

    String DRIVER= "com.mysql.jdbc.Driver";
    String databaseName = "imd";
    String connectionUrl = "jdbc:mysql://127.0.0.1:3306/" + databaseName;
    String DB_USER = "root";
    String DB_PASSWD = "root";

    try{
    Class.forName(DRIVER);
    con = DriverManager.getConnection(connectionUrl,DB_USER,DB_PASSWD);
    stmt = con.createStatement();
    rs = stmt.executeQuery("select SiteKey from imd_user_sitekey where userName = 'lili'");
    if (rs.next()) {
       image = rs.getBlob(1);
       imgData = image.getBytes(1,(int)image.length());
    } else {
        out.println("Display Blob Example");
        out.println("image not found for given id>");
        return;
    }
    response.setContentType("image/gif");
    OutputStream out = response.getOutputStream();
    out.write(imgData);
    out.flush();
    oout.close();
    }catch (Exception e) {
        out.println("Unable To Display image");
        out.println("Image Display Error=" + e.getMessage());
        return;
        } finally {
        try {
        rs.close();
        stmt.close();
        con.close();
        } catch (SQLException e) {
        e.printStackTrace();
        }
        }

  %> 

 <h1>Hello, <%= message %>, Please enter your password!</h1>
 <br/>
    <html:form action="sitekey">
         <bean:message key="label.password"/>
         <html:password property="password"></html:password>             
        <html:submit/>
    </html:form> 
```

图片可以显示成功，但是我的JSP页面中<%%>代码下面的其他内容没有显示出来，整个页面就像一张图片一样。有人可以帮我弄清楚这个吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T11:42:09.040

此代码可能对您有所帮助....这是我的 show_image.jsp

```
<%
String id="1250";
session.setAttribute("num", id);
%>
  <body>
  <image src="display.jsp" border="0" height="200px" width="200px"/>

      <h1>Hello, Please enter your password!</h1>
     <br/>
     <html:form action="sitekey">
     <bean:message key="label.password"/>
     <html:password property="password"></html:password>             
    <html:submit/>
    </html:form>
 </body> 
```

在这里我通过 dispaly.jsp 文件从外部引用图像

```
 <% Blob image = null;
 String no=(String)session.getAttribute("num"); 
 byte[ ] imgData = null ;
 Statement stmt = null;
 ResultSet rs = null;
 try {
     Class.forName("com.mysql.jdbc.Driver");
     Connection con = (Connection);      DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","");
     stmt = con.createStatement();
     rs = stmt.executeQuery("select photo from file1 where id = '"+no+"'");
     if (rs.next()) {
     image = rs.getBlob(1);
     imgData = image.getBytes(1,(int)image.length());
     } else {
            out.println("Display Blob Example");
            out.println("image not found for given id");
            return;
            }
      // display the image
   response.setContentType("image/gif");
   OutputStream o = response.getOutputStream();
   o.write(imgData);
   o.flush();
   o.close();
    } catch (Exception e) {
                           out.println("Unable To Display image");
                           out.println("Image Display Error=" + e.getMessage());
                           return;
                          } finally {
                                    try {
                                         rs.close();
                                         stmt.close();
                                        } catch (SQLException e) {
                                                                 System.out.println(e);
                                                                 e.printStackTrace();
                                                                 }
                         }
       %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:01:10.640

这是因为你设置了`response.setContentType("image/gif");`. 要在您的页面中显示 HTMl，您的 JSP 页面内容类型必须是`response.setContentType("text/html");`

# ruby-on-rails-3 - Rails 3.2，更改语言环境时如何刷新当前 URL 语言环境？

> ID：10159573
> 
> 赞同：1
> 
> 时间：2012-04-15T04:41:51.813
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我的网址如下所示：

```
http://0.0.0.0:3000/en/experiments 
```

当我更改语言环境时，所有字符串都可以正常翻译，但是 url 语言环境不会更改为

`http://0.0.0.0:3000/ar/experiments`, 除非我按下任何链接，否则它会被刷新

这是我的路线.rb：

```
scope "(:locale)", :locale => /en|ar/ do
    resources :experiments
    resources :users
    resources :class_rooms
  end

match 'lang' => 'home#set_lang' 
```

这是家庭控制器：

```
def set_lang
    I18n.locale = params[:id]
    redirect_to :back
end 
```

查看链接：

```
= link_to "Arabic", :controller => 'home', :action => 'set_lang', :id => 'ar'
= link_to "English", :controller => 'home', :action => 'set_lang', :id => 'en' 
```

那么，如何刷新 url 以反映新的语言环境，不应该`redirect_to :back`这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-02T08:47:45.070

我知道这个问题已经 2 岁了，但是，嘿。我有完全相同的问题，我解决了。

前提是您已将其包含在您的`application_controller.rb`:

```
def default_url_options(options = {})
   {locale: I18n.locale}.merge options
end 
```

您不需要任何控制器或操作。相反，只需这样做：

```
= link_to 'Arabic', locale: :ar
= link_to 'English', locale: :en 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:31:02.657

您是否在应用程序控制器中尝试过此操作？

```
# pass in language as a default url parameter
def default_url_options(options = {})
   {locale: I18n.locale}
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:39:23.470

我建议使用类似[路由过滤器](https://github.com/svenfuchs/routing-filter)的东西，而不是使用自定义解决方案来解决这个问题。此外，调用参数“id”似乎*很奇怪*。一个更好的名字是“locale”，不是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T14:48:36.270

使用此代码您不能，因为您正在重定向到 :back ，这是具有旧语言环境的 url。

```
def set_lang
    I18n.locale = params[:id]
    redirect_to :back
end 
```

更改语言环境并保留当前 URL 的一种方法是执行以下操作

```
 - I18n.available_locales.each do |locale|
   = link_to t(locale, :scope => [:languages]), params.merge(:locale => locale), :id => locale, :title => t(locale, :scope => [:languages]), :alt => t(locale, :scope => [:languages]) 
```

# java - Java：使用 Servlet 进行 TCP/UDP 打孔？

> ID：10159579
> 
> 赞同：2
> 
> 时间：2012-04-15T04:42:52.983
> 
> 标签：java, networking, servlets

我是否可以使用部署在 AppEngine 上的 servlet 实现通过 TCP 打孔连接的客户端/服务器网络模型？

如果是这样，您如何将连接请求从客户端转发到主机并建立一个 2 路连接，一旦启动就消除服务器参与？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:51:04.253

上次我需要做类似的事情时，我开始使用[SOHT Socket over HTTP Tunneling](http://www.ericdaugherty.com/dev/soht/)。

然后，因为项目的范围是教学范围，我也实现了我自己的类似逻辑的实现，其中服务器部分是一个非常简单的`Servlet`.

但是，您可以直接使用该库或研究其来源以了解其工作原理。

# mysql - 存储过程定义上的 MySQL 错误 1064

> ID：10159580
> 
> 赞同：1
> 
> 时间：2012-04-15T04:43:09.180
> 
> 标签：mysql, sql, mysql-error-1064

我是 MySQL 程序的新手。我只是想在一个数据集上运行一个游标，并为每一行运行一个不同的过程（我碰巧知道一个有效的过程）。我在以下第三行收到错误代码 1064：

```
CREATE PROCEDURE `safecycle`.`sp_aggregateAllPORDaily` ()
BEGIN
  DECLARE done INT DEFAULT FALSE;
  DECLARE porID SMALLINT UNSIGNED;
  DECLARE cur1 CURSOR FOR SELECT ID FROM point_of_recycle;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

  OPEN cur1;

  read_loop: LOOP
    FETCH cur1 INTO porID;
    IF done THEN
      LEAVE read_loop;
    END IF;
    CALL sp_aggregatePORDaily(porID);
  END LOOP;

  CLOSE cur1;
END 
```

我已经把头撞在墙上有一段时间了，非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T04:45:28.163

您没有更改分隔符，因此`;`遇到的第一个分隔符会终止整个语句。

```
DELIMITER $$

CREATE PROCEDURE
    blah blah blah
END$$

DELIMITER ; 
```

通过以这种方式更改分隔符，您可以安全地定义多语句过程，将法线嵌入`;`其中，然后使用“新”分隔符结束创建语句。之后，您恢复标准分隔符并照常进行。

# python - 如何在仍然使用 unique = True 的同时允许 ModelForm 中的空字段？

> ID：10159587
> 
> 赞同：5
> 
> 时间：2012-04-15T04:44:27.310
> 
> 标签：python, django, django-forms

目前在`models.py`我有

```
class ModelName(models.Model):
    rowname = models.CharField(max_length=100, blank = True, unique=True) 
```

就确保相同的值不会两次提交到数据库而言，这确实很奇怪，但是当重复的值是空字符串时，有没有一种方法可以让我唯一不引发错误？是否`unique`接受异常参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T04:56:32.697

本质上，您需要遵循[此答案](https://stackoverflow.com/a/1400046/500584)中的建议。虽然 Django 出于唯一性的目的考虑`''`equal to `''`，但它不认为`NULL`equal to `NULL`。所以你需要存储`NULL`值而不是空字符串。

1.  通过在模型中`NULL`添加将字段更改为 allow ：`null = True`

    ```
    rowname = models.CharField(..., blank = True, null = True, unique = True) 
    ```

2.  将空字符串更改为`None`以下形式：

    ```
    class ModelNameForm(forms.ModelForm):
        class Meta:
            model = ModelName
        def clean_rowname(self):
            return self.cleaned_data['rowname'] or None

    class ModelNameAdmin(admin.ModelAdmin):
        form = ModelNameForm 
    ```

# javascript - 提交表单时如何启用后退按钮

> ID：10159588
> 
> 赞同：2
> 
> 时间：2012-04-15T04:44:27.420
> 
> 标签：javascript, html, google-app-engine, webapp2, wtforms

我有一个相当高级的表单，可以发布到预览页面： ![在此处输入图像描述](../Images/73018a15c51f856cb6a692d6b643ea97.png)

按下继续时到达的预览页面如下所示 ![在此处输入图像描述](../Images/74679b20a198844abd6c607b5ae93046.png)

现在我想实现“返回并编辑广告”按钮，但只是 javascript history -1 没有这样做，因为不记住表单字段。我在进行预览时将字段写入数据存储区，如果用户返回，它可能是带有新 id 的全新提交，并且旧实体不会被发布，因为它具有变量 submit=false 或类似的变量。

现在我无法使用 javascript 启用后退按钮，您知道如何实现我的按钮“返回并编辑广告”吗？

我正在使用 wtforms、jinja2 模板和 webapp2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:00:59.613

将“草稿”标志添加到您的广告数据存储模型。提交表单后，创建将草稿标志设置为 True 的记录，并将“编辑广告”按钮链接回表单，并将键作为 GET 变量。使用草稿记录中的数据以及用户点击“发布广告”时的数据预填充表单；将草案标志设置为 False。

这具有额外的优势，即为您提供一种机制，允许您的用户从旧会话恢复他们的工作流程，例如，如果他们不小心关闭了浏览器。

# yii - Yii 应用程序放置外部 API 类的位置

> ID：10159589
> 
> 赞同：0
> 
> 时间：2012-04-15T04:44:28.447
> 
> 标签：yii

在我的 Yii Web 应用程序中，我想放置一些（超过 10 个）与 e shopwindow 客户端相关的业务类。请建议放置这些 API 类的最佳位置目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:52:11.850

[里面`protected/vendors/`](http://www.yiiframework.com/doc/guide/1.1/en/extension.integration)。

# d3.js - 是否可以在具有动态域的序数尺度上使用 rangeBand()？

> ID：10159592
> 
> 赞同：5
> 
> 时间：2012-04-15T04:45:01.430
> 
> 标签：d3.js

我的数据看起来像这样......

```
var data = [{name:'a', value : 97},
          {name:'b', value : 24},
          {name:'c', value : 10}]; 
```

我有一个像这样创建的序数比例......

```
var y = d3.scale.ordinal().rangeBands([0, 30 * data.length]); 
```

我正在用它来创建一个像这样的基本图表......

```
 chart.selectAll("rect")
        .data(data)
        .enter().append("svg:rect")
        .attr("y", function(d,i){ return y(d.name);})
        .attr("width", function(d,i){ return x(d.value);})
        .attr("height", y.rangeBand()); 
```

根据 d3 文档（[此处](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-ordinal_domain)），您不必为序数比例指定域，并且在您尝试使用它时会填充它。然而，在我的情况下， y(d.name) 总是返回 0 并且 y.rangeBand() 引发异常，即使当我查看域数组已填充到缩放对象中时也是如此。

所以，我通过预先定义我的域来解决这个问题......

```
.domain(data.map(function (d){ return d.name;})) 
```

但我希望能够动态添加到这个域，如果我现在这样做，它不会超出创建时设置的原始值。这甚至可能吗？

我对 d3 很陌生，所以我可能在这里遗漏了一些重要的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T04:28:34.730

With [rangeBands](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-rangeBands) and [rangePoints](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-rangePoints), you must define a domain in order to access the range. The domain tells the ordinal scale how many bands or points you want to display. However, you *can* change the domain later (by calling `scale.domain(newDomain)`) and the range will update. You just can't do that implicitly by passing a previously-unseen value to the scale. It's generally a good idea to define domains with ordinal scales anyway, so that you always get deterministic behavior.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T02:45:42.037

域中的元素在强制转换为字符串时必须是唯一的，因此如果您将对象数组传递给域，则可能会出现意外结果。例如，如果每个对象的字符串表示形式看起来像“[object Object]”，d3 可能会将这些对象视为完全相同。我以前遇到过这个问题，我解决它的方法是做类似的事情

```
d3.scale.ordinal(d3.range(0,myData.length)).rangeBands([0,myRangeBound]) 
```

它将每个数据元素映射到唯一的数组索引。请记住，在这种情况下设置比例之前，如有必要，您的数据应进行排序，并且您必须在数据更改时重置域。通常最好定义一个渲染方法或类似的方法来重置比例并在新数据进入时重绘所有内容，并尽可能明确地设置域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T19:50:07.850

我在 d3 google 群组中找到了答案。显然，如果您使用 rangeBands() 或 rangePoints() 您必须已经定义了一个域。

[http://groups.google.com/group/d3-js/browse_thread/thread/10387d8ecf7ee412](http://groups.google.com/group/d3-js/browse_thread/thread/10387d8ecf7ee412)

# php - 如何为没有用户名的用户创建唯一 ID - PHP

> ID：10159593
> 
> 赞同：1
> 
> 时间：2012-04-15T04:45:04.930
> 
> 标签：php, login, unique-id

通常，当我开发与客户交互的网站时，我曾经使用他们的用户名或用户 ID 来保存他们的配置等。但是现在我正在开发一个没有登录系统的网站，我需要保存一些东西，比如“喜欢”、“访问的页面”等等。

我已经尝试过 Internet 协议 (IP)，但当访问者在 NAT 或代理下时它不会工作。

如何为每个用户创建一个唯一 ID 并将其保存在我的数据库中？

顺便说一句，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:51:46.707

您应该使用 cookie、ip 和会话的组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T05:11:13.297

如果您试图长期保存用户数据，这听起来像是灾难的秘诀。

我会推荐：

1.  创建一个随机但唯一的哈希并将其保存到数据库中。
2.  将哈希设置为用户计算机上的 cookie。
3.  保存所有“喜欢”、“访问的页面”等。到以哈希为键的数据库。

当用户清除他们的浏览历史记录/cookies并且现在无法检索该用户的活动时，就会出现问题，因为它完全基于该哈希。

我想一种解决方法是向用户发送一封带有哈希值的电子邮件，并指导他们如何重新初始化他们的活动历史记录。

您必须创建一个特殊页面，他们可以在其中输入他们的哈希值，您的系统将重置他们系统上的 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T04:50:44.133

```
do { 
$uniqueID = uniqid(); 
$exists = mysql_num_rows('SELECT * FROM table WHERE id = $uniqueID');
} while ($exists == 1) 
```

我正在使用类似的代码来生成唯一 ID，它对我来说很好用。或者，为了更简单，您可以只使用该`uniqid()`函数，它不应该真正生成两个相同的结果。

# json - 在 symfony2 的 Twig 模板中显示 JSON 数据

> ID：10159598
> 
> 赞同：0
> 
> 时间：2012-04-15T04:46:10.227
> 
> 标签：json, symfony

我正在尝试在我的应用程序中使用 jquery 扩展作为[事件日历](http://arshaw.com/fullcalendar/)。我先用core php试了一下，效果很好。现在我想在我的 symfony2 应用程序中使用它，但我无法在我的 twig 文件中显示它。这是我用来渲染的代码，但我不确定我在哪里做错了。

## 控制器

```
public function studentCalendarAction()
{
  $year = date('Y');
  $month = date('m');
  $response = new Response(json_encode(array(
        array(
                'id' => 111,
                'title' => "Event1",
                'start' => "$year-$month-10",
                'url' => "http://yahoo.com/"
        ),
  )));
  $response->headers->set('Content-Type', 'application/json');
  return $this->render('CollegeStudentBundle:StudentAttendance:calendar.html.twig',array('response'=>$response));
} 
```

## 路由器

```
CollegeStudentBundle_attendance_calendar:
    pattern:  /student/attendance/calendar
    defaults: { _controller: CollegeStudentBundle:StudentAttendance:studentCalendar }
    requirements:
        _method:  GET|POST 
```

## 枝条

```
 <script type='text/javascript'>

                $(document).ready(function() {

                $('#calendar').fullCalendar({

                    editable: true,

                    events: "../../student/attendance/calendar",

                    eventDrop: function(event, delta) {
                        alert(event.title + ' was moved ' + delta + ' days\n' +
                            '(should probably update your database)');
                    },

                    loading: function(bool) {
                        if (bool) $('#loading').show();
                        else $('#loading').hide();
                    }

                });

            });

    </script>

</head>

<body>
    <div id='calendar'></div>
</body> 
```

即使我试图让我`Router`喜欢这个

```
CollegeStudentBundle_attendance_calendar:
    pattern:  /student/attendance/calendar
    defaults: { _controller: CollegeStudentBundle:StudentAttendance:studentCalendar, _format: json }
    requirements: { _format: (xml|json), _method: GET } 
```

但这显示了树枝文件的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:49:07.453

只需返回 created `$response`，而不是呈现的响应。

**编辑：**你的修改`studentCalendarAction`是，

```
public function studentCalendarAction()
{
  $year = date('Y');
  $month = date('m');

  $jsonData = json_encode(array(
        array(
                'id' => 111,
                'title' => "Event1",
                'start' => "$year-$month-10",
                'url' => "http://yahoo.com/"
        ),
  ));

  $headers = array(
        'Content-Type' => 'application/json'
  );

  $response = new Response($jsonData, 200, $headers);
  return $response;
} 
```

另外我认为树枝文件是从不同的路线呈现的，而不是`CollegeStudentBundle_attendance_calendar`路线。

# java - 如何在 Eclipse 中将平板电脑连接到 android SDK

> ID：10159599
> 
> 赞同：2
> 
> 时间：2012-04-15T04:46:10.813
> 
> 标签：java, android

我在 android 中开发应用程序，我想将平板电脑连接到 Android Eclipse，以便我可以使用 Tablet 而不是 AVD。可以这样做吗？如果是，我该怎么做？

我有带有 android SDK 15 的 Eclipse，即 android 4.0.3 和带有 OS Android 4.0.3 的平板电脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:48:39.110

应该没有问题。两个注意事项：

*   对于某些设备，您需要安装适当的驱动程序，它们通常可以在供应商的网站上找到。
*   您需要启用设备进行调试，[看看这里](http://developer.android.com/guide/developing/device.html#setting-up)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:50:11.907

为您的平板电脑安装驱动程序或来自 google 的驱动程序。在您的设置>开发>启用 USB 调试中启用 USB 调试模式

你准备好了..只需调试你的代码，它就会在平板电脑上运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T07:35:37.257

我遇到了同样的问题，实际上我的笔记本电脑太慢了，无法使用模拟器，所以我决定在选项卡上进行调试。我遵循的步骤

1）让eclipse有usb调试软件 [http://developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)

2）从华硕获取并安装我的Windows 7操作系统的驱动程序，因为我正在使用fonepad 7。从这里 [http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver](http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver)

3）在android中打开usb调试，你会在google中找到如何做到这一点。需要多次点击构建版本才能打开它。然后开启usb调试

我正在使用的硬件/软件列表 a) Windows 7 b) Asus fonepad 7 android 4.4.2

关键是您需要为您的 android 设备找到正确的驱动程序。

# php - 错误 324 (net::ERR_EMPTY_RESPONSE)

> ID：10159602
> 
> 赞同：4
> 
> 时间：2012-04-15T04:46:37.650
> 
> 标签：php, apache, joomla

对于我们的许多网站，我现在经常面临上述问题。这些网站大约一个月前工作正常，但突然有 10 多个网站不仅在 crome 中而且在其他浏览器中也出现此错误（不相同但相关）。

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

所有站点都托管在同一台服务器和 joomla 中。当我尝试调试时，我发现问题可能在下面的代码中，但不确定..

```
modMainMenuHelper::render($params, 'modMainMenuXMLCallback');
//render function
function render(&$params, $callback){
//function body
} 
```

如果我`modMainMenuHelper::render($params, 'modMainMenuXMLCallback');`在输出回显上方回显任何内容。但`function render(&$params, $callback){`在上面的错误下方出现。我想问一下问题是否真的在上面的代码中，而不是如何解决这个问题或任何其他可以解决这个问题的建议谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T17:45:42.660

在我的情况下，我通过禁用 APC 模块解决了这个问题。因为它导致了分段错误。每当我更新上面的文件而不是代码时，网站开始正常工作。我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:03:34.697

`APC`或者`pagespeed`在服务器端可能是问题......如果使用`fcgi`，也许有一个链接到它。软件更新后，配置中的事情可能会变得混乱......

因为它发生在某个日期之后，所以这不应该是应用程序的问题。

# winforms - winforms datagrid 在编辑时将列更改为组合框

> ID：10159603
> 
> 赞同：0
> 
> 时间：2012-04-15T04:46:39.963
> 
> 标签：winforms, datagrid, combobox

我的 winforms 应用程序上有一个 datagrid 列。当用户选择特定单元格时，该单元格应变为数据绑定的组合框，并且用户可以编辑该单元格。

如何在编辑模式上显示组合框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:41:36.763

*   为了将单元格转换为组合框：

this.yourdatagridname.Rows[x].Cells[y] = new DataGridComboBoxCell();

其中 x,y 表示要转换的单元格

*   为了使其可编辑：

this.yourdatagridname.Rows[x].Cells[y].ReadOnly = false;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:07:56.160

EditingControlShowing 事件中有什么？

```
void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
 BindingSource bindingSource = this.dataGridView1.DataSource as BindingSource;
 Person person = bindingSource.Current as Person;
 BindingList<personType> bindingList = this.FindPersonTypes(person);

 DataGridViewComboBoxEditingControl comboBox = e.Control as DataGridViewComboBoxEditingControl;
 comboBox.DataSource = bindingList;
} 
```

参考：[http ://www.timvw.be/2007/01/17/exploring-datagridviewcomboboxcolumn-databinding/](http://www.timvw.be/2007/01/17/exploring-datagridviewcomboboxcolumn-databinding/)

# math - 查找算法的计算复杂度

> ID：10159624
> 
> 赞同：0
> 
> 时间：2012-04-15T04:49:08.237
> 
> 标签：math, optimization, computer-science, big-o

**算法：**

```
for (int i = 0; i < 2*n; i += 2)  
    for (int j = n; j >i; j--)  
        foo(); 
```

*我想找到调用 foo() 的次数。*

```
# of foo() calls for the second loop as i changes:

1st loop:   n - 0
2nd loop:   n - 2
3rd loop:   n - 4
nth loop:   n - f(x); f(x) = last term +2; where f(0) = 0

  Total # calls = Summation(n - f(x)) from [i = 0] to [i = n/2 (where f(x) == n)]
= Summation(n) - summation(f(x))
= (n/2)(n+n)/2 - (n/2)(0 + n)/2
= n^2/2        - n^2/4
= n^2/4 
```

我已经完成了所有的工作，但我的方程式总是给出有点偏离的值：

当 n = 5 时：记录的 foo() 调用为 9，但我的等式给出 6。
当 n = 6 时：记录的 foo() 调用为 16，但我的等式给出 9。

**我做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:02:29.127

有时，经验方法效果很好。请参阅[http://codepad.org/zpBDNkuj](http://codepad.org/zpBDNkuj)。

```
#include <stdio.h>

int count(int n) {
  int i, j, times = 0;
  for (i = 0; i < 2 * n; i += 2)  
    for (j = n; j > i; j--)  
      times++;
  return times;
}

int main() {
  int i;
  for (i = 0; i < 20; i++)
    printf("%2d%10d\n", i, count(i)); 
  return 0;
}

 0         0
 1         1
 2         2
 3         4
 4         6
 5         9
 6        12
 7        16
 8        20
 9        25
10        30
11        36
12        42
13        49
14        56
15        64
16        72
17        81
18        90
19       100 
```

查看输出，您可以从 T(n) 是如何从 T(n-1)、T(n-2) 等生成的推论，并且可以组成 T 的递归定义。这似乎是你采取的方法。

通过尝试直接从输出中找出模式，您可能能够更快地关闭。例如，我们从输出中看到：

*   当 n 为奇数时，T(n) 为 ceil(n/2) ** 2
*   当 n 为偶数时，T(n) 为 (n/2) * (n/2+1)

**附录**

我在键盘上加了一点；见[http://codepad.org/aEnFZ1Da](http://codepad.org/aEnFZ1Da)

这表明 T(n) 渐近收敛到 n^2/4。这与您得到的答案一致。也许您是说您的结果“有点偏离”，因为对于较小的 n 值，您并没有看到准确的 n^2/4。这可以。重要的是，在极限情况下，复杂度为 n^2/4。当然，你也可以只说 THETA(n^2)....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T06:03:37.827

The summation has n/2+1 terms; i=0 is the first term and i=n/2 is the last one!

**So you should have**

summation(n) = (n/2+1) (n+n)/2

and

summation(f(x)) = (n/2+1) (0+n)/2.

# api - 将 API 搜索限制为特定类别的页面

> ID：10159626
> 
> 赞同：0
> 
> 时间：2012-04-15T04:49:22.817
> 
> 标签：api, facebook-graph-api, facebook-page

我想搜索仅限于“音乐家/乐队”类别的 Facebook 页面。我尝试通过在我的 URL 中添加“category=Musician/band”来进行查询（如下面的 URL 所示），但这似乎并没有改变响应。

```
https://graph.facebook.com/search?    fields=name,location,category&q="+request.term+"&type=page&category=Musician/band 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:59:28.013

No, this is not a supported use-case in the search API, you'd need to do client-side filtering of the result set

# ios - 在 UITableView 单元格中定位 UIImageViews

> ID：10159627
> 
> 赞同：1
> 
> 时间：2012-04-15T04:49:38.837
> 
> 标签：ios, uitableview, uiimageview, cgrect

我正在创建一个缩略图网格，使用一个 UITableView，每个单元格显示 3。在这个阶段，我只是试图放置 3 个静态图像以获得正确的位置/大小。但我无法控制缩略图的位置和大小。这是我的一张缩略图的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
// after getting cell..

UIImage *image = [UIImage imageNamed:@"placeholder.png"];
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(50.0, 0.0, 85.0, 85.0)];
imageView = [[UIImageView alloc] initWithImage:image];        
[cell addSubview:imageView];

return cell;

} 
```

我的理解是否正确，我通过在 UIImageView 中设置图像来控制图像的位置和大小？

我很感激帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T04:52:59.983

您需要在视图中缩放图像：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
[imageView setFrame:CGRectMake(50.0, 0.0, 85.0, 85.0)];
[imageView setContentMode:UIViewContentModeScaleAspectFill];
[cell addSubview:imageView]; 
```

# macos - OS X 计时器分辨率和重新调度延迟

> ID：10159630
> 
> 赞同：1
> 
> 时间：2012-04-15T04:50:08.157
> 
> 标签：macos

我需要将现有的基于 WIN32/Linux 的应用程序移植到 OS X，并且想估计是否有任何潜在的障碍。

该应用程序具有“软”实时约束。

具体来说，它具有高优先级线程，需要以（可能）高速率（低至 1 毫秒）唤醒，进行一些检查，然后大部分时间几乎立即退出。

目的超出了这个消息的范围，但是设计是不可更改的（真的不可更改），所以请不要评论它如何更改以及它是否有效（它是）。

线程的逻辑结构是：

```
for (;;)
{
    wait(event_object, timeout);
    ... do something ...
} 
```

当 event_object 发出信号或超时到期时，线程需要唤醒。超时可能因情况而异，但可能低至 1 毫秒。

WIN32 版本的应用程序使用 timeBeginPeriod() 来影响系统调度程序并在涉及线程的情况下更改调度量。

您能否告知这是否也可以在 OS X 下实现，即 OS X 是否“真正可抢占”。

这归结为两个问题：

1) 如果高优先级线程变得可计算（因为 event_object 得到信号或超时到期），当前执行的低优先级线程将立即被抢占还是仅在下一个 100 Hz (kern.clockrate) 时钟滴答时被抢占。

2) 各种 OS X “等待”函数（例如 pthread_cond_timedwait）的实际计时器分辨率是多少？是 1/100（即 10 毫秒）还是 1 毫秒或更低？或者它是否依赖于某些东西并且可以通过编程方式进行更改（就像 Windows 中的 timeBeginPeriod 一样）？

重申一下，该应用程序是“软”实时的。如果线程没有一直按它的方式运行是可以的（没有飞机会坠毁或病人死亡），但需要的是它*通常*在大多数情况下按需要安排。

感谢您的意见。

# java - 如果我首先使用 `Arrays.toString` 将它转换为那样，如何将字符串转换回字符串 []？

> ID：10159633
> 
> 赞同：0
> 
> 时间：2012-04-15T04:50:31.847
> 
> 标签：java

我正在使用一个队列服务，它似乎只允许我发送一个字符串作为消息（有点不认为那是正确的，但无法证明其他），但我需要 3 个不同的数据项来处理我的工作（一个 int、double 和 int[]）。因此，我采用所有三种数据类型并将它们转换为使用`Arrays.toString`.

我的问题是，一旦我的工作进程收到我需要将它们转换回来的消息。工人看到了这一点：`[0, 43.0, [0, 59, 16]]`但我不确定如何最有效地转换它。我现在这样做的方式是删除第一个和最后一个字符，然后执行 a`String[] temp = queue_string.split(",");`以将其作为列表返回。

如果这种方式是唯一的方式，我很好，但我想知道是否有更清洁的方式？就像 `Arrays.toString`有类似的东西 `String.toArray`（这不存在，我已经尝试过:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T04:55:57.417

我认为最好使用像 JSON 这样的标准作为在进程之间传输数据的格式。可以轻松地将数据从字符串编组为本地数据类型，然后返回 Java。

```
Gson gson = new Gson();

int[] sub = { 0, 59, 16 };
Object[] values = { 0, 43.0, sub };
String output = gson.toJson(values);       // => [0, 43.0,[0,59,16]]

Object[] deserialized = gson.fromJson(output, Object[].class);
for ( Object obj : deserialized ) {
    // => 0.0, 43.0, [0.0, 59.0, 16.0]
} 
```

*   [谷歌的 gson 库](http://code.google.com/p/google-gson/)
*   [原始 Java JSON 库](http://www.json.org/java/)
*   [更多关于 Java 中的 JSON](https://www.google.com/search?q=java+json)

# objective-c - 查询 Xcode 文件所有者和 @property

> ID：10159634
> 
> 赞同：-2
> 
> 时间：2012-04-15T04:50:36.630
> 
> 标签：objective-c, ios

我有两个关于 Xcode 的基本问题；我来自 Windows 背景，主要是用 C# 编写代码。

一本书上的第一个示例项目让我创建了一个单视图应用程序，在视图上放置一个标签和按钮；拖动以创建开头和动作；最后在 .m 文件上，编写按钮操作单击更改 label.text 的代码。就是这样：没有设置文件所有者或@property

下一个示例，还添加了一个文本框，并且 label.text 使用 textBox 值更新；在这里我注意到

*   (BOOL)textFieldShouldReturn:(UITextField *)textField {}

如果我不将 textBox 拖到 FileOwner，则不会引发；这表明对于委托处理，我需要连接到 fileOwner。这个假设正确吗？在另一个示例中，教程实际上向我展示了将按钮连接到 fileOwner - 我为什么需要它？

下一个问题：在第一个示例中，我可以在不设置 @property 的情况下更改 label.text；我还可以从第二个示例中读取文本框。在另一个例子中，它使用了@propery 代码——我对@property 的理解是它就像c# 中的getter/setter；在 c# 中，我可以在没有任何其他设置的情况下获取或设置 textArea 的 .text 方法；那么为什么/何时使用@property。

我确信它真的很简单，但我想我可能将它与 c# 和 vb 进行了太多的比较。

更新：我试图浏览其他三本书，但没有一本能真正解释我为什么要做某些事情（即链接到 FileOwner）。我在玩代码之后对 FileOwner 进行了一些猜测；但我不明白为什么必须将按钮链接到 fileOwner。如果我拖动它来创建一个事件，我还需要做什么？

对于@property，我阅读了原子/非原子，零售，我明白这一点；我不明白的是，如果我可以读/写标签 textArea，为什么我需要 @property 呢？

改写问题：

如果我可以获取/设置 label.text = @"Hello"; 为什么我要为该标签创建一个@propery 和综合？还是带有用户输入的 textArea？

下一篇：教程为什么要我给fileOwner添加一个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:03:28.793

这种编程范式不是 ios 独有的（如您的标签所示），甚至不是 Objective-C 独有的。委托范例的存在使您可以在不修改原始类的情况下自定义类的行为。因此，对于某些逻辑，对象将调用其委托以获取有关如何进行的说明。

C# 属性和objective-c 属性几乎相同。两者都依赖底层的 getter 和 setter 方法来操作存储在类中（私有或受保护）的值。您可以通过手动 getter 和 setter 方法实现相同的目标（据我所知，这是大多数老牌 C 程序员在开始使用 Objective-c 时所做的事情），但是您会失去一个叫做 KVO 的东西（key-价值观察）。这是objective-c 中的一个系统，它允许您在属性值更改时通过事件进行监视。你也会有一堆毫无意义的代码......没有人需要 20 个函数，它们都只是设置一个成员变量，所以在 C# 中有一个编译器的快捷方式。在 C# 中这是`{ get; set; }`模式，在 Objective-C 中是`@synthesize`模式。

因此，对于上面的示例， text 是文本字段的**属性**， textFieldShouldReturn 是**behavior**。自定义行为主要由委托对象处理。C# 也有委托，我相信你知道。它们就像函数指针，允许您将函数设置为变量。Objective-c 委托行为就像通过代理对象（通常是 ViewController，但并非总是如此）将一组函数设置为变量（其中一些是可选的，有些不是）。

我希望这可以为您解决问题，我不擅长简洁明了。在 Objective-C 之前，我也有 C# 背景，所以这就是我对这个问题感兴趣的原因。

# android - 如何在Android中对中文进行排序？

> ID：10159640
> 
> 赞同：2
> 
> 时间：2012-04-15T04:52:03.327
> 
> 标签：android, cjk

我有一个字符串列表，每个字符串可能由汉字或数字或英文字符组成。（例如：“z莉z莉”、“露西”、“蒋豪”、“qwer”、“zout1iao”、“哈哈”）。我想要做的是像Android的联系人应用程序那样按英文字母顺序对它们进行排序。（即**“hah”，“蒋豪”，“露西”，“qwer”，“z莉z莉”，“zout1iao”**）所以我的策略是将所有汉字转换为拼音，然后照常进行比较。我已经尝试过库 yinpin4j，它在 J2SE 平台上运行良好，但是当我在 Android 上运行相同的代码时，它引发了错误。java代码是：

```
@Override
public int compareTo(People another) {
    String onePinyin = HanziHelper.words2Pinyin(name);
String theOtherPinyin = HanziHelper.words2Pinyin(another.getName());
return onePinyin.compareTo(theOtherPinyin);
}

private static String char2String(char c) {
    StringBuilder sb = new StringBuilder();
    return sb.append(c).toString(); 
}

public static String char2Pinyin(char c) {
    String[] pinyin = null;
    try {
        pinyin = PinyinHelper.toHanyuPinyinStringArray(c, format);
    } catch(BadHanyuPinyinOutputFormatCombination e) {
        e.printStackTrace();
    }
    if(pinyin == null) {
        return char2String(c);
    } else {
        return pinyin[0];
    }
}

public static String words2Pinyin(String words) {
    StringBuilder sb = new StringBuilder();
    char[] chars = words.toCharArray();
    for(int i = 0, length = chars.length; i < length; i++) {
        sb.append(char2Pinyin(chars[i]));
    }
    return sb.toString();
} 
```

错误是：

```
04-15 12:37:15.750: W/System.err(6898): java.io.IOException: BufferedInputStream is closed
04-15 12:37:15.791: W/System.err(6898):     at     java.io.BufferedInputStream.streamClosed(BufferedInputStream.java:116)
04-15 12:37:15.791: W/System.err(6898):     at java.io.BufferedInputStream.read(BufferedInputStream.java:294)
04-15 12:37:15.791: W/System.err(6898):     at java.io.InputStreamReader.read(InputStreamReader.java:255)
04-15 12:37:15.791: W/System.err(6898):     at java.io.BufferedReader.fillBuf(BufferedReader.java:128)
04-15 12:37:15.791: W/System.err(6898):     at java.io.BufferedReader.read(BufferedReader.java:236)
04-15 12:37:15.791: W/System.err(6898):     at java.util.Properties.load(Properties.java:307)
04-15 12:37:15.791: W/System.err(6898):     at java.util.Properties.load(Properties.java:266)
04-15 12:37:15.791: W/System.err(6898):     at net.sourceforge.pinyin4j.ChineseToPinyinResource.initializeResource(Unknown Source)
04-15 12:37:15.791: W/System.err(6898):     at net.sourceforge.pinyin4j.ChineseToPinyinResource.<init>(Unknown Source)
04-15 12:37:15.791: W/System.err(6898):     at net.sourceforge.pinyin4j.ChineseToPinyinResource.<init>(Unknown Source)
04-15 12:37:15.791: W/System.err(6898):     at net.sourceforge.pinyin4j.ChineseToPinyinResource$ChineseToPinyinResourceHolder.<clinit>(Unknown Source)
04-15 12:37:15.791: W/System.err(6898):     at net.sourceforge.pinyin4j.ChineseToPinyinResource.getInstance(Unknown Source)
04-15 12:37:15.796: W/System.err(6898):     at net.sourceforge.pinyin4j.PinyinHelper.getUnformattedHanyuPinyinStringArray(Unknown Source)
04-15 12:37:15.796: W/System.err(6898):     at net.sourceforge.pinyin4j.PinyinHelper.getFormattedHanyuPinyinStringArray(Unknown Source)
04-15 12:37:15.796: W/System.err(6898):     at net.sourceforge.pinyin4j.PinyinHelper.toHanyuPinyinStringArray(Unknown Source)
04-15 12:37:15.796: W/System.err(6898):     at com.sf.tools.HanziHelper.char2Pinyin(HanziHelper.java:29)
04-15 12:37:15.796: W/System.err(6898):     at com.sf.tools.HanziHelper.words2Pinyin(HanziHelper.java:44)
04-15 12:37:15.796: W/System.err(6898):     at com.sf.parse.PeopleListParser$Result$People.compareTo(PeopleListParser.java:156)
04-15 12:37:15.796: W/System.err(6898):     at com.sf.parse.PeopleListParser$Result$People.compareTo(PeopleListParser.java:1)
04-15 12:37:15.796: W/System.err(6898):     at java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:286)
04-15 12:37:15.796: W/System.err(6898):     at java.util.ComparableTimSort.sort(ComparableTimSort.java:153)
04-15 12:37:15.796: W/System.err(6898):     at java.util.ComparableTimSort.sort(ComparableTimSort.java:142)
04-15 12:37:15.796: W/System.err(6898):     at java.util.Arrays.sort(Arrays.java:1974)
04-15 12:37:15.796: W/System.err(6898):     at java.util.Collections.sort(Collections.java:1941)
04-15 12:37:15.796: W/System.err(6898):     at com.sf.activity.PeopleListActivity.initPageView(PeopleListActivity.java:73)
04-15 12:37:15.796: W/System.err(6898):     at com.sf.activity.ReceiverListActivity.initPageView(ReceiverListActivity.java:23)
04-15 12:37:15.796: W/System.err(6898):     at com.yek.android.base.BaseActivity.onCreate(BaseActivity.java:158) 
```

然后我改用`Collator usCollator = Collator.getInstance(Locale.SIMPLIFIED_CHINESE); usCollator.setStrength(Collator.PRIMARY);` 它只要有汉字就可以了。在上面的例子中，这个方法会分别对中文和英文进行排序。

那么，你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:20:51.133

你可以谷歌一个jar似乎pinyin.jar，它可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T06:09:20.647

通讯录应用程序使用“整理本地化 ASC”。你可以尝试同样的事情

[校对本地化 ASC 代表什么？](https://stackoverflow.com/questions/2380706/what-does-collate-localized-asc-stand-for)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:54:46.783

我的建议是，按代码点解析“单词”代码点并构建一个新字符串。如果下一个 codepoint 是 Latin/Common，不要调用 words2Pinyin()，只需将 chat 添加到新构建的字符串中。它是中文，调用 words2Pinyin() 并将拼音添加到新字符串中。环形。最后你有一个干净的拉丁字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T11:21:55.610

如果您正在从电话中提取联系人数据（例如姓名、电话号码、电子邮件...），请尝试再拉一列`ContactsContract.Contacts.SORT_KEY_PRIMARY`，它将显示名称的拼音与显示名称（如果有）一起存储。

比方说`DISPLAY_NAME`“阿妹”，就是`SORT_KEY_PRIMARY`“阿妹妹”；“大姨”，排序键为“DA 大YI姨”。从那里您可以轻松地应用字母排序并映射到原始显示名称。:)

# internet-explorer - IE 条件注释和 Chrome/Firefox

> ID：10159642
> 
> 赞同：11
> 
> 时间：2012-04-15T04:52:25.607
> 
> 标签：internet-explorer, firefox, google-chrome, rendering, conditional-comments

我正在使用以下 IE 条件注释：

```
<!--[if gt IE 7]>
Here is some code.
<![endif]--> 
```

这可以很好地防止代码在任何低于 8 的 IE 中呈现。
但是，这也可以防止代码在 Chrome 和 Firefox 中呈现。

关于为什么会发生这种情况以及如何让代码在 IE 以外的浏览器中呈现的任何想法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-15T05:28:18.430

条件注释是 Microsoft IE 特定的规则，它们不是任何标准的一部分。如果您检查条件注释的结构：

```
<!--[if gt IE 7]>
Here is some code.
<![endif]--> 
```

正如它的名字所暗示的，这只是一个大评论`<!-- comment -->`。IE 会检查注释中是否存在诸如此类的条件，这些条件同样不符合 HTML 标准。

要创建不在 IE 中呈现但在其他浏览器中呈现的代码，请使用以下条件：

```
<!--[if !IE]> -->
This will be rendered by anything but IE.
<!-- <![endif]--> 
```

看看条件是如何包含在封闭的评论中的？这就是为什么它在普通浏览器中呈现，而 IE 检查条件，并决定省略所有内容，直到`endif`.

编辑

如果您想添加另一个条件，并继续在非 IE 浏览器上呈现代码，您可以使用以下解决方法：

```
<!--[if gt IE 7]> <!-- -->
Here is some code for anything but IE 7 and below.
<!-- <![endif]--> 
```

注意我不得不再次使用打开注释来防止 IE`-->`在代码之前呈现。其他浏览器仍会将其视为评论的一部分。

# python - GAE“没有名为 urllib 的模块”

> ID：10159645
> 
> 赞同：3
> 
> 时间：2012-04-15T04:52:48.857
> 
> 标签：python, macos, google-app-engine

每当我尝试通过 python 在 GAE 上运行示例代码时，我都会收到此错误

```
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/cgi.py", line 31, in <module>
    import urllib
ImportError: No module named urllib
INFO     2012-04-15 04:44:54,345 dev_appserver.py:2884] "GET / HTTP/1.1" 500 - 
```

我不确定问题是什么，我尝试了各种修复，就像这里提出的类似问题一样。

示例代码：

```
import webapp2
import urllib

class MainPage(webapp2.RequestHandler):
  def get(self):
      self.response.headers['Content-Type'] = 'text/plain'
      self.response.out.write('Hello, webapp World!')

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

我在 Mac OSX 10.6.8 (Snow Leopard) 上运行并使用 Python 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:16:33.143

不确定这有多相关，但堆栈跟踪中的文件夹结构似乎暗示您使用的是 Python 2.6，而您说您使用的是 2.7.3。也许您需要使用最新版本的 Python 显式运行脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:21:13.800

有趣的是它是一个抛出错误的内置模块（cgi.py）。并且 urllib 就在那里！无法弄清楚为什么会这样！

Snow Leopard 还附带安装了 python 2.6 到 /system/Library/Frameworks/Python.framework/Versions/2.6 但我安装到 /Library/Frameworks/Python.framework/Versions/2.7 的那个。

据此[，](https://stackoverflow.com/questions/8127696/using-google-app-engine-sdk-with-python-2-7-on-mac-os-x-10-6%20helped%20me%20out.)我只需要更改 GAE 首选项中的 Python 引用即可。这行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T05:14:29.290

我不确定为什么`urllib`导入不起作用，但是在您的示例代码中，您没有使用该模块，因此您确实不需要导入它。

# c - 生成所有字母组合

> ID：10159649
> 
> 赞同：0
> 
> 时间：2012-04-15T04:53:15.997
> 
> 标签：c, combinations, permutation

有人可以帮我获得一个 C 算法来生成长度为 n 的所有字母组合吗？

我需要输出如下：

```
aaaaaaa
aaaaaab
aaaaaac
.
.
.
zzzzzzx
zzzzzzy
zzzzzzz

for(i = 0; i<length; i++){
    pass[i] = 'a';
}

while(1){
    for(j=0;j<26;j++){
        printf("%s\n",pass);
        pass[i] = (char)(pass[i]+1);
    }
    if(pass[i-1]==z)...
}
return 0; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T12:33:12.913

这是一个使用递归的版本：

```
#include <stdio.h>
#include <string.h>

void iterate(char *str, int idx, int len) {
    char c;

    if (idx < (len - 1)) {
        for (c = 'a'; c <= 'z'; ++c) {
            str[idx] = c;

            iterate(str, idx + 1, len);
        }
    } else {
        for (c = 'a'; c <= 'z'; ++c) {
            str[idx] = c;

            printf("%s\n", str);
        }
    }
}

#define LEN 3

int main(int argc, char **argv) {
    char str[LEN + 1];

    memset(str, 0, LEN + 1);

    iterate(str, 0, LEN);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:25:58.307

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int isFinish(char *str){
    return '\0'== str[strspn(str, "z")];
}

void inc_str(char *str){
    int index, carry;
    for(index = strlen(str)-1;index>=0;--index){
        if(str[index] == 'z'){
            carry = 1;
            str[index] = 'a';
        } else {
            carry = 0;
            str[index] += 1;
        }
        if(carry == 0)break;
    }
}

int main(){
    int n;
    char *str;

    n=7;//length
    str=(char*)malloc(sizeof(char)*(n+1));
    //initialize
    memset(str, 'a', n);//"aa..aa"
    str[n]='\0';

    while(1){
        printf("%s\n", str);
        if(isFinish(str))
            break;
        inc_str(str);
    }
    free(str);
    return 0;
} 
```

# c++ - 默认参数函数签名更改

> ID：10159652
> 
> 赞同：-1
> 
> 时间：2012-04-15T04:54:33.357
> 
> 标签：c++, overloading

我有一个当前签名为 f(a,b=0) 的函数。我想添加另一个参数 c。我希望我的函数以这样的方式调用，以便我可以调用当前行为的 f(a,b) 和 f(a,c)。一种方法是重载函数并复制函数代码。我不想从 f(a,c) 调用 f(a,b)。我正在使用 C++。

是否有任何标准设计模式或解决方案可以避免这种代码重复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T05:04:25.567

我不完全确定我是否关注您，但您可以对此使用变体：

```
void f(int a, int b=0, int c=0);
void f2(int a, int c=0) { f(a, 0, c); } 
```

请注意，没有重复的代码。现在你有另一个函数调用你的第一个函数，但允许你指定第三个参数而不是第二个。

# jquery - 数组中子字段的jQuery选择器？

> ID：10159653
> 
> 赞同：0
> 
> 时间：2012-04-15T04:55:03.977
> 
> 标签：jquery, arrays, selector, field

当名称声明数组中的子字段时，jQuery 选择对象的正确方法是什么？

我自发尝试：

```
$('select[name=field[subfield]]').change(function(){
  alert('houston we have contact');
}); 
```

DOM 对象是：

```
<select name="field[subfield]">
  <option>..</option>
  <option>..</option>
  <option>..</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:59:07.497

尝试添加引号：

```
$('select[name="field[subfield]"]').change(function(){
  alert('houston we have contact');
}); 
```

工作演示：http: [//jsfiddle.net/hHHMS/](http://jsfiddle.net/hHHMS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:05:38.667

按照eZaktos的回答。如果使用相同的引号，则反斜杠。

单引号：

```
 $('select[name=\'field[subfield]\']').change(function(){
    alert('houston we have contact');
  }); 
```

双引号：

```
 $("select[name=\"field[subfield]\"]").change(function(){
    alert('houston we have contact');
  }); 
```

双引号和单引号：

```
 $("select[name='field[subfield]']").change(function(){
    alert('houston we have contact');
  }); 
```

单引号和双引号：

```
$('select[name="field[subfield]"]').change(function(){
  alert('houston we have contact');
}); 
```

# c - 为每种打印方式使用一个函数？

> ID：10159654
> 
> 赞同：-1
> 
> 时间：2012-04-15T04:55:20.247
> 
> 标签：c, arrays, function, pointers

重写这个程序，为你打印的每一种方式使用一个函数。尝试将指针传递给这些函数，以便它们处理数据。请记住，您可以声明一个函数来接受指针，但只需像使用数组一样使用它。

你好吗？我有用于循环打印索引数组和指针索引的 c 代码。这里没有功能的正确代码：

```
 int main(int argc, char * argv[])
       {

       int number[] = {123, 456, 789};
       char *strchars[] = {
         "ABC", "DEF", "GHI"
       };

       int count = sizeof(number) / sizeof(int);
       int i = 0;

       for(i = 0; i < count; i++) {
          printf("%s has %d \n", strchars[i], number[i]);
       }

       // with pointers

       int *po_number = number;
       char **po_strchars = strchars;

       // loop with pointiers

       for(i = 0; i < count; i++) {
           printf("%s has %d \n", *(po_strchars+i), *(po_number+i));
       }
       return 0;
    } 
```

但我需要使用每种打印方式。但我想不通。这里我的代码有函数但没有指针和字符，只有整数。告诉我如何使它正确：

```
 #include <stdio.h>
    // void print_arg(int a[], int b[]);

    // now it right?

    // void print_arg(int a[], int b[])

    void print_arg(int a, int b);

    // or now it right?

    void print_arg(int a, int b)
    {
          int a;
          int b;
          int count = sizeof(a) / sizeof(int);
          int i = 0;
              //and it
          for(i = 0; i < count; i++) {
              printf("%d and %d\n", a[i], b[i]);
          }
    } 

    int main(void)
    {
          int number[] = {22, 32, 22, 82, 2};
          int strchars[] = {12, 12, 12, 12, 12};

          int count = sizeof(number) / sizeof(int);
          print_arg(number[], strchars[]);

          return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:04:49.857

您是否正在尝试编写一个打印数据的函数？

```
void print_array_args(int a[], int b[], int count)
{
  int i = 0;
  for(i = 0; i < count; i++) {
    printf("%d and %d\n", a[i], b[i]); // You can treat arrays as arrays...
    printf("%d and %d\n", *(a+i), *(b+i)); // ... or as pointers.
  }
} 

void print_pointer_args(int *a, int *b, int count)
{
  int i = 0;
  for (i = 0; i < count; i++) {
    printf("%d and %d\n", a[i], b[i]);     // You can treat pointers as arrays...
    printf("%d and %d\n", *(a+i), *(b+i)); // ... or as pointers.
  }
} 

int main(void)
{
  int number[] = {22, 32, 22, 82, 2};      // You can declare an array...
  int *strchars = malloc(5 * sizeof(int)); // ... or a pointer

  int i;
  for (i = 0; i < 5; i++) {
    strchars[i] = 12;      // You can initialize as an array....
    *(strchars + i) = 12;  // ... or as a pointer
  }

  int strchars[] = {12, 12, 12, 12, 12};
  int count = sizeof(number) / sizeof(int);
  print_array_args(number, strchars, count);
  print_pointer_args(number, strchars, count);
  return 0;
} 
```

# mysql - 将 MySQL 数据库从 Linux 迁移到 Mac？

> ID：10159656
> 
> 赞同：0
> 
> 时间：2012-04-15T04:56:03.087
> 
> 标签：mysql, database-migration

我在 Linux 计算机上有一个现有的 MySQL 数据库，我需要将它临时转移到运行 Mac OS X 的计算机上。这是一个相当小的数据库，所以应该不难做，我只需要知道我的需要移动。

我需要采取哪些步骤将我的数据从 Linux 计算机移动到 Mac 计算机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:58:49.913

使用 mysqldump 导出到文件，将该文件移动到新机器，然后使用 mysql 加载它，例如

```
$ mysqldump -p -u username > dump.sql 
```

然后

```
$ mysql -p -u newusername < dump.sql 
```

# python - Python：使用字符串作为变量？

> ID：10159658
> 
> 赞同：1
> 
> 时间：2012-04-15T04:56:45.017
> 
> 标签：python, string, variables

我想编写一个 python 脚本，一次创建几个字典，然后将字典打印出来，但我不知道如何将字符串转换为变量。

```
number = 0

while (number < 10):
    number = number + 1
    dictionarynumber = ("D"+str(number)) # creates the dictionarys name(D1,D2,D3,D4,D5,D6,D7,D8,D9,D10)
    var(dictionarynumber) = {"Fruit":"Apple","Book":"Oliver Twist","Building":"White House"} #Of course var() doesn't work but I placed it here to get my point across
    print(dictionarynumber) 
```

* * *

回答后：

我喜欢关于字典的想法，去掉不需要的“D”是有道理的。你们怎么看这件事？

```
dict = {}
n = 0

while (n < 10):
    n = n + 1
    d = n
    d = {"Key":"Information"}
    dict[n] = d

print(dict)

# Output = 
#          {1: {'Key': 'Information'},
#           2: {'Key': 'Information'},
#           3: {'Key': 'Information'},
#           4: {'Key': 'Information'},
#           5: {'Key': 'Information'},
#           6: {'Key': 'Information'},
#           7: {'Key': 'Information'},
#           8: {'Key': 'Information'},
#           9: {'Key': 'Information'},
#           10: {'Key': 'Information'}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T05:03:17.670

如果你想给每个字典一个名字，把它们放在字典里。

```
dicts = {}
# dict_list = []
for i in xrange(10):
    dictionary_key = ('d{0}'.format(i))
    dict_item = {"Fruit":"Apple","Book":"Oliver Twist","Building":"White House"}
    dicts[dictionary_key] = dict_item
    # dict_list.append(dict_item) 
```

如果您不想为您的字典使用名称，请将它们放在一个列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:34:22.787

您似乎正在尝试创建混合数据类型，但我不清楚您想要什么样的结构，所以我会给您 2 个答案，希望一个是正确的。

第一，如果你想创建一堆字典并打印出来，你会这样做：

```
diclist = [{"Fruit":"Apple"},{"Book":"Oliver Twist"},{"Building":"White House"}]
print(diclist[1]) 
```

第二，按照您给出的示例，您可能旨在创建一个列表字典。例如

```
listDic = {'Fruit':['Apples', 'Bannanas', 'Durian'], 'Book':['Oliver Twist','Flashman', 'Catch 22']}
print (listDic) 
```

你可以像这样访问它：

```
print(listDic['Fruit']) 
```

会导致

> ['苹果'，'香蕉'，'榴莲']

这个 print(listDic['Fruit'][1]) 会导致

> 香蕉

如果我错过了您想要的答案或者您想要更多详细信息，请发表评论。

# javascript - 在 Prototype/Scriptaculous 环境中运行 jQuery 脚本（灯箱 2）

> ID：10159665
> 
> 赞同：0
> 
> 时间：2012-04-15T04:58:48.093
> 
> 标签：javascript, jquery, magento, prototypejs, lightbox

我正在尝试在 Magento Go 商店中运行一个 jQuery 灯箱（灯箱 2），该商店在原型/scriptaculous 上运行。

我已经成功添加并运行了需要“激活”（因为缺少更好的术语）的 jQuery 脚本，例如轨道滑块，方法是将 $ 替换为 jQuery，例如

```
<script type="text/javascript">
 jQuery(window).load(function() {
     jQuery('#featured').orbit();
 });
</script> 
```

我的理解是，当执行轨道的 js 时，它会“知道”使用 jQuery，因为它是这样调用的。

但是，Lightbox 2 不需要以这种方式“激活”。我需要做的就是加载 js 文件并包含 css 文件。

```
<script src="js/lightbox.js"></script>
<link href="css/lightbox.css" rel="stylesheet" /> 
```

并且该脚本应该会获取所有带有 rel='lightbox' 的链接。

我无法让它正常工作，所以我的直觉告诉我它与其他库冲突？

问题是——如何加载 js 以使其在 jQuery.noconflict 模式下运行？

提前致谢。瑞安

ps-lightbox.js [https://github.com/lokesh/lightbox2/blob/master/js/lightbox.js](https://github.com/lokesh/lightbox2/blob/master/js/lightbox.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:07:49.593

在 lightbox.js 中，尝试替换第 43 行：

```
(function() { 
```

和：

```
(function($) { 
```

然后替换第 351 行（最后）：

```
}).call(this); 
```

有了这个：

```
}).call(this, jQuery); 
```

没有把握 ：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T16:38:55.040

在这个例子中尝试一些东西。

```
<script type="text/javascript"> 
    var $ = jQuery.noConflict();

    $(document).ready(function($) {
        $('#featured').orbit({
            interval: 4500  
        })
    }); 
</script> 
```

# iis - IIS 上的简单 URL 重写

> ID：10159669
> 
> 赞同：1
> 
> 时间：2012-04-15T04:59:11.570
> 
> 标签：iis, url-rewriting

我有**1 个**IIS 服务器，我想用它来托管**2 个**不同的网站（都在端口 80 上）。
我一直在尝试许多不同的组合（包括重定向），并且每次都出现问题（重定向循环、404、根本不工作等......）

我认为我需要的规则是这样的：

```
 - match any URL 
 - condition 1: match {HTTP_HOST} to my site URL 
 - condition 2: discard if {REQUEST_URI} is present 
 - action: rewrite URL to /dir1/index.html  

(repeat for site 2) 
```

这里的问题似乎是条件 2 永远不会为真（我应该用什么来**匹配**`{REQUEST_URI}`?

这是完整的 XML：

```
<rewrite>
    <rules>
        <rule name="RuleForSite1" stopProcessing="true">
            <match url="(.*)" ignoreCase="false" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^www\.mysite1\.com$" /> 
                <add input="{REQUEST_URI}" pattern=".+" negate="true" /> 
            </conditions>
            <action type="Rewrite" url="dir1/index.html" />
        </rule>
        <rule name="RuleForSite2" stopProcessing="true">
            <match url="(.*)" ignoreCase="false" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^www\.mysite2\.com$" /> 
                <add input="{REQUEST_URI}" pattern=".+" negate="true" /> 
            </conditions>
            <action type="Rewrite" url="dir2/index.html" />
        </rule>
    </rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:58:43.350

我终于弄明白了。
事实证明，它`{REQUEST_URI}`实际上从来都不是空`/`的，而是在其中没有任何内容时包含。
我还发现重定向效果更好。

这是我的最终设置：

```
<rewrite>
    <rules>
        <rule name="RuleForSite1" stopProcessing="true">
            <match url="(.*)" ignoreCase="false" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^www\.mysite1\.com$" /> 
                <add input="{REQUEST_URI}" pattern="^/$"" /> 
            </conditions>
            <action type="Redirect" url="dir1/index.html" />
        </rule>
        <rule name="RuleForSite2" stopProcessing="true">
            <match url="(.*)" ignoreCase="false" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^www\.mysite2\.com$" /> 
                <add input="{REQUEST_URI}" pattern="^/$"" /> 
            </conditions>
            <action type="Redirect" url="dir2/index.html" />
        </rule>
    </rules>
</rewrite> 
```

# c# - 将文件（csv、excel、制表符分隔）转换为 XML

> ID：10159670
> 
> 赞同：-1
> 
> 时间：2012-04-15T04:59:26.037
> 
> 标签：c#, java, xml

任何人都可以推荐我可以用来摄取文件的任何 Java 或 .NET 库——可以是 csv、excel 或制表符分隔的格式——并创建一个具有特定模式的 XML 文件。

换句话说，我不想只创建一个 XML 文件，而是需要在 XSD 文件后面的文件中添加其他元素。

我查看了一些现有的 stackoverflow 答案，它们似乎正在创建简单的 XML 文件（例如，每列都有一个元素），而不是基于现有 XSD 文件的文件。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:09:36.543

我会使用众多 Java CSV/Excel/Whatever 库之一。请参阅以下问题以了解其中之一：[CSV API for Java](https://stackoverflow.com/questions/101100/csv-api-for-java) 、 [Java library to display Excel data](https://stackoverflow.com/questions/2387201/java-library-to-display-excel-data)

然后我建议使用 JAXB 将其转换为 XML。您给 JAXB 一个模式，它会生成对象来表示 XSD 中的所有数据。然后，您可以非常轻松地使用从 CSV 或 Excel 文件中获取的数据填充这些对象，它将生成与您的架构兼容的 XML。

下面是一些关于从 XSD 生成 JAXB 对象的信息。我个人使用 maven 来执行此操作，但假设您只想生成一次对象，这应该可以工作： http: [//publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom。 ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Ftwbs_jaxbschema2java.html](http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Ftwbs_jaxbschema2java.html)

这是使用 JAXB 的教程：http: [//jaxb.java.net/tutorial/](http://jaxb.java.net/tutorial/)

# iphone - 带有 UILocalNotification 和 DetailViewController 的 TableView

> ID：10159680
> 
> 赞同：0
> 
> 时间：2012-04-15T05:02:09.033
> 
> 标签：iphone, notifications, tableview, uilocalnotification

你能帮我处理这段代码吗？我正在做一个可以添加 UIlocalNotifications 的应用程序，这些通知会发送到 tableView。

但我不知道如何执行以下操作：当我单击某行时，我希望 DetailViewController 类采用“notification.alertbody”.text 并将作为标签放在 DetailViewController 中。有人可以帮我解决这个问题吗？

这是行不通的！

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
UILocalNotification *notification = [self.notificationsArray objectAtIndex:indexPath.row];
DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
[dvController.nomeMedicamento setText:[notification alertBody]];
[self.navigationController pushViewController:dvController animated:YES];
[dvController release];
} 
```

其中'nomeMedicamento'是一个@property（非原子，保留）IBOutlet UILabel *nomeMedicamento；从 DetailViewController

我添加通知的类有这个方法：

```
- (void)addNotification {

UILocalNotification *localNotification = [[UILocalNotification alloc] init];

localNotification.fireDate = self.datePicker.date;
localNotification.alertBody = self.messageField.text;
.
.
.
} 
```

我想要这个 messageField.text！

谢谢，对不起我的英语！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:55:16.073

当您写“这不起作用！”时，您是什么意思？

你的方法没有调用？你的变量没有通过？你的 viewController 没有被推送？

你检查过内容`alertBody`吗？

```
[dvController.nomeMedicamento setText:[notification alertBody]];
NSLog(@"nomeMedicamento = %@", dvController.nomeMedicamento.text); 
```

# python - Django 不加载内部 .css 文件

> ID：10159685
> 
> 赞同：0
> 
> 时间：2012-04-15T05:03:12.723
> 
> 标签：python, css, django, uwsgi, cherokee

我在本地创建了一个 Django 项目，它运行没有任何问题。但是，在亚马逊 AWS 上安装了一个烦人且困难的 Cherokee + uWSGI 之后，我的项目没有显示 Django .css 内部文件。

[http://f.cl.ly/items/2Q2W3I3R0X1n2X3v0q2P/django_error.jpg](http://f.cl.ly/items/2Q2W3I3R0X1n2X3v0q2P/django_error.jpg) <--`/Admin/`看起来像这样

该图像是我的 /admin/ 的屏幕，它应该具有不同的样式，但没有加载 .css 文件。

```
[pid: 23206|app: 0|req: 19/19] 83.49.10.217 () {56 vars in 1121 bytes} [Sun Apr 15      05:50:24 2012] GET /static/admin/css/base.css => generated 2896 bytes in 6 msecs (HTTP/1.1 404) 1 headers in 51 bytes (1 switches on core 0)

[pid: 23206|app: 0|req: 20/20] 83.49.10.217 () {56 vars in 1125 bytes} [Sun Apr 15 05:50:24 2012] GET /static/admin/css/login.css => generated 2899 bytes in 5 msecs (HTTP/1.1 404) 1 headers in 51 bytes (1 switches on core 0) 
```

这是切诺基的日志。我不明白它为什么要在该路径中查找 .css 文件。Cherokee 应该在 Django 原始目录中搜索文件，所以我没有更改项目中的 .css 文件。

有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:23:17.347

听起来您正在使用 Django 1.4，这是预期的行为。

[查看发行说明](https://docs.djangoproject.com/en/dev/releases/1.4/)中的​​向后不兼容更改部分：

> 包含的管理应用程序 django.contrib.admin 长期以来一直附带一组默认的静态文件，例如 JavaScript、图像和样式表。Django 1.3 添加了一个新的 contrib 应用程序 django.contrib.staticfiles 以通用方式处理此类文件，并为应用程序中包含的静态文件定义了约定。
> 
> 从 Django 1.4 开始，管理员的静态文件也遵循此约定，以使文件更易于部署。在以前的 Django 版本中，定义 ADMIN_MEDIA_PREFIX 设置以指向管理员的静态文件在 Web 服务器上的 URL 也是很常见的。此设置现已弃用并由更通用的设置 STATIC_URL 取代。Django 现在将期望在 URL /admin/ 下找到管理静态文件。
> 
> 如果您以前使用过 ADMIN_MEDIA_PREFIX 的 URL 路径（例如 /media/），只需确保配置了 STATIC_URL 和 STATIC_ROOT 并且您的 Web 服务器正确地提供这些文件。开发服务器继续像以前一样提供管理文件。阅读静态文件 howto 以获取更多详细信息。
> 
> 如果您的 ADMIN_MEDIA_PREFIX 设置为特定域（例如 [http://media.example.com/admin/](http://media.example.com/admin/)），请确保您的 STATIC_URL 设置也设置为正确的 URL - 例如 [http://media.example。 com](http://media.example.com/) /.*

# macos - 如何确保 emacs 始终将编辑/创建的纯文本保存为 utf8？

> ID：10159693
> 
> 赞同：7
> 
> 时间：2012-04-15T05:05:17.760
> 
> 标签：macos, emacs

我将在 emacs 中打开以许多不同编码（在我知道编码是什么之前）创建的 txt 文件。有时它们无法正确显示，但事实证明，5 秒的查找和替换通常足以解决任何问题。为了尽量减少未来的麻烦，我希望我与 emacs 一起使用的所有文件都是 utf-8。**有什么方法可以 (1) 强制 emacs 显示文件，就好像它们是 utf-8 编码的和/或 (2) 始终使用 utf-8 编码保存新的/和或编辑的文本文件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T06:46:18.747

我有这个`.emacs`（当然我是从某个地方复制的）。我认为他们很容易理解

```
 (setq buffer-file-coding-system 'utf-8-unix)
 (setq default-file-name-coding-system 'utf-8-unix)
 (setq default-keyboard-coding-system 'utf-8-unix)
 (setq default-process-coding-system '(utf-8-unix . utf-8-unix))
 (setq default-sendmail-coding-system 'utf-8-unix)
 (setq default-terminal-coding-system 'utf-8-unix) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T07:17:25.737

尝试

```
(set-locale-environment "en_US.UTF-8") 
```

其中“en”是语言代码，“US”是国家代码（影响纸张大小，可能还有其他一些因素）。 `C-h f``set-locale-environment`更多细节。

# asp.net - 如何自定义aspxgridviewpager？

> ID：10159694
> 
> 赞同：0
> 
> 时间：2012-04-15T05:05:37.840
> 
> 标签：asp.net, devexpress, aspxgridview, custom-server-controls

目前我希望使用 wcf 获取数据并将其绑定到 aspxgridview 但 DataServiceConfiguration 已设置分页查询----> config.SetEntitySetPageSize(" *", 10); 所以每次我只能获得最多 10 条记录。无法自定义 aspxgridviewpager 以便它知道数据库中的总记录并仅从 wcf 检索当前页面记录？示例：我设置了 100000 条记录 config.SetEntitySetPageSize("* ", 10); 当我绑定到 aspxgridview 时，gridview 将显示它有 10000 页并仅检索当前页面记录，即仅 10 条记录。我曾尝试使用 wcfservermodesource 但它不会在 config.SetEntitySetPageSize("*", 10); 时显示数据 已设置...所以我更改为自定义 aspxgridviewpager .... 是' 不可能吗？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:37:56.760

DevExpress 推荐的实现方式是实现`IListServer`接口。WCF 实现是[WcfServerModeSource](http://documentation.devexpress.com/#WPF/clsDevExpressDataWcfLinqWcfServerModeSourcetopic)。有一个为 Windows 窗体构建的[示例](http://www.devexpress.com/Support/Center/kb/p/K18557.aspx)，但您也应该能够将其应用于 ASP.NET。`DevExpress.Xpf.Core`由于班级位置（ ），我有点困惑。但是，您应该联系 DevExpress 支持以明确是否支持 ASP.NET `WcfServerModeSource`。

另外，看看：

*   [IListServer / ServerMode 概述 - WPF 文档 - 也应适用于 ASP.NET](http://documentation.devexpress.com/#WPF/CustomDocument6279)
*   [服务器端数据管理](http://documentation.devexpress.com/#AspNet/CustomDocument3726)- 在我看来，这篇文章缺少有关 [EntityServerModeSource](http://documentation.devexpress.com/#WPF/clsDevExpressDataLinqEntityServerModeSourcetopic)和[WcfServerModeSource](http://documentation.devexpress.com/#WPF/clsDevExpressDataWcfLinqWcfServerModeSourcetopic)的信息。
*   [实现服务器模式功能的 IListServer 接口的可能实现](http://www.devexpress.com/Support/Center/e/E166.aspx)
*   [LINQ 服务器模式](http://documentation.devexpress.com/#AspNet/CustomDocument4059)
*   [DevEx 支持中有关 WCF 和 IListServer 的票证](http://search.devexpress.com/?q=IListServer+WCF&p=T4%7cP5%7c0)。

如果您选择在没有 的情况下实现此功能`IListServer`，您可能会丢失大部分`ASPxGridView`功能。

# java - 如何在android中将边框赋予列表视图

> ID：10159695
> 
> 赞同：1
> 
> 时间：2012-04-15T05:05:38.480
> 
> 标签：java, android, eclipse, android-listview

我正在 android java Eclipse 中开发一个应用程序，它有两个并排的列表视图，我想为每个添加边框**`list-view`**。怎么办？请帮我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T05:23:29.220

您可以使用 shape 为每个列表视图设置背景边框。下面是示例 shape.xml 文件，您可以创建并将其设置为列表视图的背景。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
    <solid android:color="#f3f3f3"/>    
    <stroke android:width="1dp" android:color="#bfbfbf"/>
    <padding android:left="0dp" android:top="0dp"
            android:right="0dp" android:bottom="0dp" />
</shape> 
```

如果您的列表需要圆角，您可以使用

```
<corners android:radius="8dp" /> 
```

即使您可以通过 xml 文件设置背景，如下所示：

```
 android:background="@drawable/shape" 
```

并通过如下代码:::

```
listview_instance.setBackgroundResource(R.drawable.shape); 
```

还要确保项目的 res/drawable 文件夹包含 shape.xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T12:35:27.397

一旦尝试这个在两个列表视图之间有分隔符

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="schemas.android.com/apk/res/android"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android1:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android1:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="433dp"
        android1:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="30dp" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="229dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="34dp"
            android:layout_weight="0.37" >
        </ListView>
        <TextView android:id="@+id/tv"
            android:layout_width="1dp"
            android:background="#FF0000"
            android:layout_height="wrap_content"/>

        <ListView
            android:id="@+id/listView2"
            android:layout_width="667dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.12" >
        </ListView>
    </LinearLayout>

</LinearLayout> 
```

# git - 如何从存储库及其子模块中签出特定修订

> ID：10159700
> 
> 赞同：1
> 
> 时间：2012-04-15T05:06:53.647
> 
> 标签：git, git-submodules

我有一个我克隆的存储库（或者至少，我被告知克隆）使用

```
git clone git://therepository --recursive 
```

存储库中有子模块。我想要做的是从存储库中获取某个日期的文件。我尝试这样做：

```
git checkout `git rev-list -n 1 --before="2011-12-10 13:37" master` 
```

但这似乎对子模块没有任何作用。

谁能建议我应该如何做才能影响子模块？（我实际上并不需要存储库的完整克隆，所以如果有一种方法可以通过子模块递归地获取特定的修订版也可以）。

**额外的**

如果我将 -b 开关添加到结帐，然后我可以运行：

```
git submodule sync
git submodule update 
```

没有任何错误，但子模块似乎仍然包含其文件的 HEAD 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:59:33.673

这里的小脚本：http: [//cemerick.com/2009/09/28/working-with-git-submodules-recursively/](http://cemerick.com/2009/09/28/working-with-git-submodules-recursively/)

给了我一种在每个子模块（以及每个子模块的子模块，无穷无尽）上递归调用 checkout 的替代方法，它对我不起作用（似乎抓住了某些文件的错误修订版），但这可能是我自己特有的问题，所以也许它适用于其他搜索相同功能的人。

请注意，我必须在结帐调用中更改 HEAD 的 master，这只是一个猜测，所以也许这也是为什么我仍然对它正在签出的文件的哪些修订存在问题的原因。

我很惊讶这似乎既困难又很少完成（找不到任何关于如何通过 Google 完成的参考）。我原以为从特定日期或标签获取文件，用于模块*和*子模块将是人们经常做的事情，以调试旧的代码构建等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:20:14.103

您是否`git submodule update`在结帐/克隆后运行？

# java - 给一个 Java 类名，我想返回它的参数和方法

> ID：10159702
> 
> 赞同：-3
> 
> 时间：2012-04-15T05:07:28.010
> 
> 标签：java

嘿，我想实现以下功能：

*   用户提供一个 Java 类名。
*   此功能将返回该类具有的所有方法签名和参数。

最简单的方法是什么？

注意：解析 txt 文件是可以接受的，但我正在寻找一种更快的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T05:11:18.250

使用反射：

```
Class clazz = Class.forName(className);
Method[] methods = clazz.getMethods();
Field[] fields = clazz.getFields(); 
```

正如其他人所建议的那样，请阅读如何使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。具体来说，查看Java API 中[Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)和[Method](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Method.html)提供的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:11:44.873

这是使用反射的教程。[http://java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:21:23.977

最简单的方法？使用现有程序 javap

# dynamic - Mathematica 动态列表操作

> ID：10159711
> 
> 赞同：6
> 
> 时间：2012-04-15T05:08:56.567
> 
> 标签：dynamic, wolfram-mathematica

我坚持我认为应该是一个相对简单的概念。我不了解 Dynamic[] 与增量列表操作有关的功能。考虑以下陈述：

```
In[459]:= x={{1,2}};
In[462]:= y=First[x]
Out[462]= {1,2}
In[463]:= z=First[y]
Out[463]= 1 
```

简单吧？现在，我希望 z 在我更改 x 时动态更新。这是我的尝试：

```
In[458]:= a={{1,2}};
In[452]:= b=Dynamic[First[a]]
Out[452]= {1,2}
In[449]:= c=Dynamic[First[b]]
Out[449]= {1,2} 
```

当我更改列表 a 中的值时，我看到相应的更改是 b 和 c；但是，我希望每个语句都包含**第**一个元素。没有对动态列表进行操作。

我的问题是为什么我们会看到这种行为，以及如何应用连续的动态列表操作？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T08:31:05.690

动态以一种不同寻常的方式工作。请参阅：[为什么这不起作用？选择中的动态](https://stackoverflow.com/questions/1179430/why-wont-this-work-dynamic-in-a-select/1581155#1581155)

除非该表达式在屏幕上可见地显示，否则赋值`b = Dynamic[First[a]]`不会计算为文字表达式以外的任何内容。`Dynamic[First[a]]`

因此，当您写作时，`First[b]`您要求的第一部分`Dynamic[First[a]]`是`First[a]`.

在某种程度上，它更像是一种显示技巧而不是内部功能，这一事实`Dynamic`不容忽视。错误的功能`Dynamic`会导致很多混乱和挫败感。尽管如此，在您的简单示例中，您至少可以通过以下方式获得您想要的行为：

```
b = Dynamic[First[a]]

c = Dynamic[First@First[b]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T11:06:34.750

您已经得到了答案，为什么`Dynamic`不能按预期工作，但是我将添加如何实现（我认为）您想要的：

```
a={{1,2}}
(*
==> {{1,2}}
*)

b:=First[a];Dynamic[b]
(*
==> {1,2}
*)

c:=First[b];Dynamic[c]
(*
==> 1
*)

a={{3,4}}
(*
==> {{3,4}}
-- The displays for b and c now change to {3,4} and 3
*) 
```

通过使用`SetDelayed`( `:=`)，您可以确保每次评估`b`和时，`c`都使用 的当前值`a`，而不是它在定义时的值。并`Dynamic`确保在`a`更改时重新评估显示的值。

# jquery - 如何在 CakePHP 中创建一个 jQuery 帖子来编辑用户名/密码？

> ID：10159712
> 
> 赞同：0
> 
> 时间：2012-04-15T05:09:03.813
> 
> 标签：jquery, cakephp

**TL;DR：**我在`POST`使用 jQuery 设置 a 时遇到了一些问题，并且在设置我的操作（也称为 post 处理程序）时遇到了问题。有人可以给我一个示例，说明我如何设置动作/视图以及如何从 jQuery 发布

* * *

所以，我做了一些挖掘工作，但我仍然无法让它工作，也没有找到我不确定的东西。所以，我想我把帖子部分写下来了，但我不确定如何设置我的帖子请求处理程序。更具体地说，我不确定如何设置控制器的操作和视图，以便我可以通过消息（成功/错误/验证器错误）得到正确的响应。对于用户名，我使用的是电子邮件和我在文档中阅读的内容，只要您设置您的`id`然后它将更新记录。但是，我遇到了很奇怪的问题，因为它也在更新我的密码，即使它没有作为 jQuery 帖子的一部分发送。另一件事是，我注意到即使我能够成功更新电子邮件，我所在的当前页面也没有更新电子邮件。我假设我必须在检查成功后重新设置值。谁能给我举个例子？

这是我所拥有的：

行动：

```
public function edit() {
    $this->autoRender = false; // I am not sure if I need this
    Configure::write('debug', 0 ); // I think this disables all the extra debug messages I get with jQuery
    $this->disableCache(); // No idea why I need this

    if($this->request->is('ajax')) {

        $id = $this->Auth->user('id');
        // Going to be adding other cases for name/password/etc...
        switch($this->params->data['post']) {
            case 'email':
                $result = $this->updateEmail($this, $id,  $this->params->data);
                break;

        }

    }

}

private function updateEmail($object, $id=null, $request=null) {
            // Do I need to re-log them back in after I change their email to create a new session?
    $object->AccountDetail->User->id = $id;
    if($object->AccountDetail->User->save($request)) {
        return $this->Session->setFlash(__('Your email has been updated!'));
    } else {
        return  $this->Session->setFlash(__($object->AccountDetail->User->validationErrors));
    }
} 
```

jQuery帖子：

```
 $('#email :button').click( function () {
        $.post('/account/edit', {post: 'email', email: $('#email').val() });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:32:36.750

尝试这个。这将只更新字段，而不是整行；

```
saveField(<fieldname>, <data>, <validation>);   // structure of saveField() method

$object->AccountDetail->User->saveField('email', $request, false);

if($object->AccountDetail->User->saveField('email', $request, false)) {
    return $this->Session->setFlash(__('Your email has been updated!'));
} else {
    return  $this->Session->setFlash(__($object->AccountDetail->User->validationErrors));
} 
```

您可以将您的`updateEmail()`功能更新为`updateField()`如下所示：

```
private function updateField($object, $field = null, $id=null, $request=null) {
            // Do I need to re-log them back in after I change their email to create a new session?
    $object->AccountDetail->User->id = $id;
    if($object->AccountDetail->User->saveField($field, $request, false)) {
        return $this->Session->setFlash(__("Your $field has been updated!"));
    } else {
        return  $this->Session->setFlash(__($object->AccountDetail->User->validationErrors));
    }
} 
```

并像这样使用它：

```
$result = $this->updateField($this, 'email', $id,  $this->params->data); 
```

# c# - 从 Java 中的字节获取 int，首先在 C# 中编码

> ID：10159713
> 
> 赞同：2
> 
> 时间：2012-04-15T05:09:27.510
> 
> 标签：c#, java, android, endianness

我在从首先用 C# 编码的字节数组转换 int 时遇到问题。我首先将其转换为大端序，因为 Java 以大端序而不是小端序工作。以下代码将 into 编码为字节

```
 Console.WriteLine("A new data client has connected!");
    byte[] welcomeMessage = ASCIIEncoding.ASCII.GetBytes("Welcome young chap! Please let me know about anything you need!");

    welcomeMessage = Byte.add(BitConverter.GetBytes(System.Net.IPAddress.HostToNetworkOrder(20)), welcomeMessage); 
```

Byte.add 将两个数组附加在一起。这很有效，因为我在 C# 到 C# 之间使用过它。欢迎消息首先加载一个标题字节，让客户端知道信息是什么。当我尝试对其进行解码时，我在 java 端得到了奇怪的值。我不确定我是否解码或编码不正确。java端就是这样。这是在安卓设备上运行的：

```
 if (ByteBuffer.wrap(buffer).getInt() == 20)
   {
          latestMessage = new String(buffer); 
   }
   latestMessage = String.valueOf(ByteBuffer.wrap(buffer).getInt(0)); //Lets me see what value this is. Cant attach debugger for some reason ATM. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:39:44.727

可以将[ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)[`order()`](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html#order%28java.nio.ByteOrder%29)配置为使用该方法将多字节值解码为大端或小端。

例如：

```
final ByteBuffer bb = ByteBuffer.wrap(buffer);
bb.order(ByteOrder.LITTLE_ENDIAN);

final int i = bb.getInt();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:34:11.630

也许[BitConverter](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)类可以提供帮助。看看[这里](https://stackoverflow.com/questions/2597715/difference-between-c-sharp-and-java-big-endian-bytes-using-miscutil)。

# algorithm - 设计相似度表

> ID：10159720
> 
> 赞同：1
> 
> 时间：2012-04-15T05:10:45.957
> 
> 标签：algorithm, data-structures, machine-learning, information-retrieval

我想不出更好的方法来解决以下问题......？想象一下，我有一张大桌子，其中的行和列是某种 ids .. 让我们说 book id

```
book_id-->1    2     3     .....
  1       1   0.92    0.33
  2
  3 
```

此表中的条目告诉您每本书的相似程度。所以从上表中......第 1 本书和第 2 本书的相似度指数为 0.92。

所以，我已经在银行端计算了这个......让我们说“n”个条目。

从 n+1 开始，数据是实时的。

所以我要做的第一步是填充这个新行。这是一个非常幼稚的方法。

```
 i = 0; i < total_books ; i++
    sim(book(n+1),book(i)) 
```

可以说计算任何书籍相似度的计算都非常快。但由于这必须发生“n”次，这加起来..

如果有“m”本新书，那么它是一个 n^2 操作（我认为）。是否有更好的算法/数据结构可以使这种计算可接受。

另外，只是为了补充一些背景。这种相似性只不过是两个向量之间的点积。（谷歌搜索余弦相似度会给出一个想法）。但它没什么特别的......只是在两个向量之间取点积......它会返回一个介于 0 和 1 之间的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T07:46:49.410

When you add 1 book to a collection of n books, it performs n operations When you add m books to a collection of n books, it performs (n) + (n+1) + ... (n+m-1) operations which is (to be verified) : n*m + (1+2 + ... (m-1)) so it should be O(n*m + m*m).

If you have implemented your solution in a naive way, you can half the computation time by computing and storing sim(book_i,book_j) only when id(book_i) < id(book_j) (this does not change the complexity). Then, when you want to retrieve sim(i,j), you just have to make sure that you are using argument in the correct order.

# c++ - 是否需要为每个线程或每个进程调用 srand() C 函数来为随机发生器播种？

> ID：10159728
> 
> 赞同：13
> 
> 时间：2012-04-15T05:12:20.607
> 
> 标签：c++, windows, random, random-seed

标题几乎说明了这一点。

PS。这是针对 C++ Windows 程序的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-15T05:17:06.833

根据[MSDN 文档`srand()`](http://msdn.microsoft.com/en-us/library/f0d4wb4t.aspx) （假设您使用的是 Microsoft 的 C 运行时库），种子是线程本地的，因此您需要`srand()`为使用`rand()`. 请注意，在其他实现中可能不是这种情况。

引用 MSDN：

> srand 函数设置在当前线程中生成一系列伪随机整数的起点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T05:43:01.170

即使答案不是特定于平台的，我也建议您避免`srand()`并`<random>`改用。C++11 库不仅`<random>`在多线程程序中提供了清晰的语义，而且还为随机数生成提供了更好的工具。它提供了几种不同的随机数生成器来满足不同的质量、速度和大小要求，以及许多标准分布，因此您不会犯人们在使用时经常犯的错误`rand`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T05:16:28.183

不，根据标准，因为一旦调用`srand()`它就会影响`rand()`来自所有线程的调用。

C 库函数`srand()`就像所有其他函数一样是单线程的，这意味着如果您从一个线程调用，它也会影响从其他线程`srand()`生成的数字序列。`rand()`

但是微软提供了非标准的`srand()`，*它*要求你从所有线程中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-11T12:51:35.250

请注意，状态是纤维本地的（比线程本地更细粒度）。因此，必须为每根光纤调用 srand。（当然，当你不使用纤维时，它相当于线程本地。）

# cuda - 推力::count 的表现

> ID：10159731
> 
> 赞同：4
> 
> 时间：2012-04-15T05:14:07.623
> 
> 标签：cuda, thrust

我将以下代码作为数据重组的一部分，以供以后在 CUDA 内核中使用：

```
thrust::device_ptr<int> dev_ptr = thrust::device_pointer_cast(dev_particle_cell_indices);
int total = 0;
for(int i = 0; i < num_cells; i++) {
    particle_offsets[i] = total;
    // int num = 0;
    int num = thrust::count(dev_ptr, dev_ptr + num_particles, i);
    particle_counts[i] = num;
    total += num;
} 
```

现在，如果我设置`num`为 0（取消注释第 5 行，并注释掉第 6 行），应用程序以超过 30 fps 的速度运行，这是我的目标。但是，当我设置`num`为等于`thrust::count`调用时，帧率下降到大约 1-2 fps。为什么会这样？

我的理解是，推力应该是一组高度优化的算法，这些算法利用了 GPU 的力量，所以我很惊讶它会对我的程序性能产生这种影响。这是我第一次使用推力，所以我可能不知道一些重要的细节。

在循环中使用`thrust::count`是否会导致它运行如此缓慢？我怎样才能优化我的使用呢？

给出一些数字，在我目前的测试用例中，`num_particles`大约是 2000，`num_cells`大约是 1500。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T14:30:06.273

的性能`thrust::count`很好，这是您尝试使用它的方式对性能有问题。如果您有很多粒子并且只有几个单元格，那么您的实现使用`thrust::count`可能不是一个坏主意。你的问题是你有 1500 个细胞。`count`这意味着每次您想要进行计算时，需要1500 次调用和 1500 次设备到主机内存传输。正如您所发现的，所有内核启动和所有 PCI-e 总线副本的延迟都会降低性能。

对于大量单元格的更好方法是这样的：

```
thrust::device_ptr<int> rawin = thrust::device_pointer_cast(dev_particle_cell_indices);

// Sort a scratch copy of the cell indices by value
thrust::device_vector<int> cidx(num_particles);
thrust::copy(rawin, rawin+num_particles, cidx.begin());
thrust::sort(cidx.begin(), cidx.end());

// Use binary search to extract all the cell counts/offsets
thrust::counting_iterator<int> cellnumber(0);
thrust::device_vector<int> offsets(num_cells), counts(num_cells);

// Offsets come from lower_bound of the ordered cell numbers
thrust::lower_bound(cidx.begin(), cidx.end(), cellnumber, cellnumber+num_cells, offsets.begin());

// Counts come from the adjacent_difference of the upper_bound of the ordered cell numbers
thrust::upper_bound(cidx.begin(), cidx.end(), cellnumber, cellnumber+num_cells, counts.begin());
thrust::adjacent_difference(counts.begin(), counts.end(), counts.begin());

// Copy back to the host pointer
thrust::copy(counts.begin(), counts.end(), particle_counts);
thrust::copy(offsets.begin(), offsets.end(), particle_offsets); 
```

在这里，我们首先对单元格索引的本地副本进行排序，然后使用推力二分搜索函数执行与您的代码相同的操作，但通过 GPU 内存中的数据要少得多，并且只需两个设备到主机内存副本即可获得将所有结果返回给主机。

当我`thrust::count`使用上面发布的代码对您的实现进行基准测试时（在 OS X 上使用 CUDA 4.1 的 GeForce 320M 上的 10000 个随机粒子和 2000 个单元），我发现您的版本运行大约需要 0.95 秒，而排序/搜索版本运行大约需要 0.003 秒。因此，如果您使用更有效的策略和更合适的算法，则使用推力可能会获得数百倍的加速。

# java - 如何从 DatagramPacket 中检索字符串

> ID：10159732
> 
> 赞同：2
> 
> 时间：2012-04-15T05:14:09.293
> 
> 标签：java, android, udp, bytearray

以下代码打印

```
[B@40545a60,[B@40545a60abc exp 
```

但我想打印`abc`，以便我可以从接收系统检索正确的消息。

```
public class Operation {
InetAddress ip;
DatagramSocket dsock;
DatagramPacket pack1;
byte[] bin,bout;
WifyOperation(InetAddress Systemip)
{
    ip=Systemip;
    try {
        dsock=new DatagramSocket();

        } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }

}

void sendbyte()
{
    String senddata="abc"; 
    bout=senddata.getBytes();
    pack1=new DatagramPacket(bout,bout.length,ip,3322);
    try {
        dsock.send(pack1);
        Log.d(pack1.getData().toString(),"abc exp");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

如何从数据包中检索字符串而不是字节`pack1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:26:13.793

**基于评论的新答案：**

确实，我的旧答案是不正确的。更新：

```
String str = new String(
    pack1.getData(),
    pack1.getOffset(),
    pack1.getLength(),
    StandardCharsets.UTF_8 // or some other charset
); 
```

* * *

**老答案：**

执行以下操作：

```
byte[] data = pack1.getData();
InputStreamReader input = new InputStreamReader(
    new ByteArrayInputStream(data), Charset.forName("UTF-8"));

StringBuilder str = new StringBuilder();
for (int value; (value = input.read()) != -1; )
    str.append((char) value); 
```

这假设字节数据代表（仅）UTF-8 文本，但情况可能并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-07T05:30:30.850

你可以试试： `String msg = new String(pack1.getData(), pack1.getOffset(), pack1.getLength());`

# ruby-on-rails - 在 REST JSON 结果中包含 has_many 结果

> ID：10159735
> 
> 赞同：13
> 
> 时间：2012-04-15T05:14:51.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我有一个模型叫做`List`那个`has_many :entries`。像往常一样，Rails 3 生成了这个 show 方法`List`

```
def show
    @list = List.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @list }
    end
end 
```

如何更改`format.json`以将`entries`结果也包含`@list`在 json 响应中？

我知道我可以转换`@list`为 Hash，将 Hash 值添加`.entries`到其中，然后渲染 Hash，但我怀疑 Rails 有一个更优雅的技巧。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-15T12:58:17.117

是的，`:include`您可以选择`to_json`：

```
format.json { render json: @list.to_json(:include => :entries) } 
```

# wamp - 如何使用 ZWAMP

> ID：10159739
> 
> 赞同：2
> 
> 时间：2012-04-15T05:15:55.487
> 
> 标签：wamp, wampserver

我是 ZWAMP 服务器的新手。我想问如何使用 ZWAMP 服务器。我下载并安装了 ZWAMP 包，但我不知道如何使用它。

我google了一下，没有得到任何信息，有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:43:36.020

如果您的计算机上卡住了 IIS 或其他一些 Web 服务器，您可以将 Apache 端口更改为其他数字，这会阻止我的工作。右键单击系统托盘图标，然后单击配置 -> Apache Main。

将以下行更改为：

```
ServerName localhost:81
Listen 81 
```

然后再次右键单击系统托盘图标，然后单击“重新启动”。

您现在可以浏览到`http://localhost:81`它应该可以工作。要编辑它们所在的网络文件：

```
installation_directory\vdrive\web\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:43:52.437

近 4 个月后，Z-WAMP 开发人员更新了页面和 hekp 支持。现在它将提供有关[此的信息](http://zwamp.sourceforge.net/)

谢谢！

# haskell - 在 HXT 中使用列表

> ID：10159740
> 
> 赞同：3
> 
> 时间：2012-04-15T05:16:10.987
> 
> 标签：haskell, hxt

[试图使用这里](http://hackage.haskell.org/packages/archive/hxt/9.2.2/doc/html/Control-Arrow-ArrowList.html)`>>.`定义的简单和`>.`函数我快疯了。

我想获取HXT 中节点的**所有文本的长度。**我正在使用这个：

```
runX (doc //> hasName "div" //> text >>. unlines) 
```

`doc`我的`XmlTree`箭在哪里。

这让我得到了所有 div 的所有文本（包括他们拥有的任何孩子的文本）。它将文本作为字符串获取，因为我使用的是`unlines`. 现在我想得到那个字符串的长度，所以我尝试：

```
runX (doc //> hasName "div" //> text >>. unlines >. length) 
```

HXT 似乎神奇地将我的字符串转换回数组，因为我得到了这个：

```
[0,17,0,20,0,11,...] 
```

我想要的是所有这些`Int`总结。我该怎么做？

**更新**：

文本函数定义如下：

```
text = deep (getChildren >>> getText) 
```

我发现如果我跳过这`getChildren`一点，这可以正常工作：

```
text = deep getText 
```

只要我只有一个`div`元素。如果我有多个`div`元素，我会返回一个包含每个元素长度的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:12:08.027

考虑接下来的两个例子：

```
Prelude Text.XML.HXT.Core> flip runLA undefined $ (constL [1, 2] >>>  arr id) >>. take 1
[1]
Prelude Text.XML.HXT.Core> flip runLA undefined $  constL [1, 2] >>> (arr id  >>. take 1)
[1,2] 
```

区别仅在括号中。如果没有括号，它将作为第二个示例工作。所以你有不同的问题。

# html - HTML5 中不推荐使用的框架，但 iFrame 不推荐使用

> ID：10159741
> 
> 赞同：9
> 
> 时间：2012-04-15T05:16:11.873
> 
> 标签：html, iframe, frames

为什么在 HTML5 中不推荐使用 Frames 而不是 iFrames。毕竟，两者几乎没有区别。在许多情况下，使用它们中的任何一个都会给出相同的输出（如果我错了，请原谅我）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:19:48.940

内联框架用于将“插件”嵌入到页面的某些部分。以前在网站上看过谷歌地图吗？这些是 iframe。

另一方面，实际框架是毫无意义的。它们几乎从未用于专业网站。如果您曾经上过高中，您可能会看到使用框架作为“导航栏”或其他东西的 IT 项目。它们占据页面的一半（或者无论您如何配置它）并作为单独的页面加载。

简单地说：iframe 可以用作插件。框架不优雅而且不是很有用

编辑：更具体地说，iframe 和框架是完全不同的。使用我的谷歌地图示例，iframe 应该在页面上出现一个小框，因为你已经习惯了。一个普通的框架将占据屏幕的一半来显示（您可以设置许多框架，以便特定的框架位于屏幕的中间，但是当您可以使用内联框架时为什么要这样做呢？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T00:47:18.320

在以前的 html 版本中，框架是一个很棒的功能。然而，由于许多原因（其中大部分超出了我的理解），它们被删除了。iframe 用于嵌入应用程序，而框架用于模板等其他内容。

框架在浏览器中有一个奇怪的行为，即使框架的来源发生变化，url 也不会改变[（如这个网站） 。](http://stuy.edu "网址不变")这是因为您一次查看多个带有框架的网页。在 html5 中这是没有意义的（iframe 和框架做的事情大多相同，但框架标签的规范不好）并且 w3c 删除了它们，因为它们已经被弃用了一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T19:56:15.820

`<frame>`工作完全不同`<iframe>`，并且通常是非用户友好的。大多数实现都使得站点的主地址始终出现在地址栏中，无论您在站点中的哪个位置。这使得几乎不可能为页面添加书签、发送到另一个页面的链接等。

基本上，框架是 HTML 世界的“goto”语句。当然，它们可能很有用，而且可以做得很好，但大多数时候，这只是糟糕的程序员所做的糟糕的编程。

# mongodb - 在查询中使用 MongoDB 自引用值

> ID：10159750
> 
> 赞同：3
> 
> 时间：2012-04-15T05:17:44.243
> 
> 标签：mongodb, mapreduce, pymongo

是否可以在 MongoDB 的更新查询中获取自引用值？在 MySQL 中，您可以运行：

`UPDATE table SET column1 = column2 + column3,...`

据我所知，只有 MapReduce 可用于在 MongoDB 的服务器端执行此操作。我如何使用 MapReduce 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:23:39.230

> 是否可以在 MongoDB 的更新查询中获取自引用值？

不，使用普通查询/更新系统无法进行此更新。

> 据我所知，只有 MapReduce 可用于在 MongoDB 的服务器端执行此操作。

Map / Reduce 用于汇总现有数据并将该数据输出到单独的集合/表。Map / Reduce 不打算更新现有数据。

要使用 MongoDB 运行此更新，您需要`for`在整个集合上运行一个简单的循环，更新每个集合。您可以从包括 shell 在内的任何驱动程序中执行此操作。

```
db.table.find().forEach( function(x) {
  var newValue = x.column2 + x.column3; // Add column2 & 3
  db.table.update({_id: x._id}, { $set: { column1: newValue } }); // Set the value on column1
} ) 
```

# python - 使用 Python 更新 csv 文件中的现有列和行

> ID：10159761
> 
> 赞同：3
> 
> 时间：2012-04-15T05:21:51.030
> 
> 标签：python, csv

因此，我一直在尝试使用 Python 中的 csv 模块将数据添加到现有的行和列中，但仅限于每行的特定列。因此，例如，假设我现有的 csv 文件具有以下内容：

```
id, name, city, age
1, Ed,, 34
2, Pat,, 23 
```

所以基本上每个人的城市都不见了，所以我想用那个人的城市更新每一行。但是， writerow 方法似乎只替换了 csv 文件中的现有数据。将打开的文件更改为附加模式只会将数据添加到新行。有没有办法跳过现有数据，只将城市添加到每一行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:41:14.623

这是一篇关于另一位开发人员尝试做类似事情的帖子 - 更新 csv 文件中的特定记录 - [http://www.dreamincode.net/forums/topic/196479-editing-a-csv-file/](http://www.dreamincode.net/forums/topic/196479-editing-a-csv-file/)

他帖子中的代码片段演示了他如何在 csv 文件中搜索特定的“位置”（单元格）（如 excel 中的特定单元格）并使用新信息更新该单元格。在您的情况下，特定用户的城市。

所以模仿他的示例代码，你可以达到你想要的结果。

但是，如果您看到自己一直在这样做——“更新 csv 文件中的单元格”，那么最好使用数据库来存储信息。通过从初始 csv 导入初始数据集以及通过对您选择的数据库的更新调用完成的任何进一步更新。使用提供 orm 的库来与您的数据库进行交互。:-)

即使是 sqlite3 也会比尝试更新 csv 文件中的特定单元格更好。

# ruby-on-rails - 如何在创建之前验证模型属性

> ID：10159768
> 
> 赞同：1
> 
> 时间：2012-04-15T05:24:28.260
> 
> 标签：ruby-on-rails

这里非常基本的问题，我需要在我的类别模型上编写一个前置过滤器，以确保深度永远不会超过 2。这是我到目前为止所拥有的。

应用程序/模型/category.rb

```
before_create :check_depth
  def check_depth
    self.depth = 1 if depth > 2
  end 
```

我需要它而不是将深度设置为 1，只是为了返回一条错误消息，但我什至无法让当前的设置正常工作，我得到了错误

```
undefined method `>' for nil:NilClass 
```

所以，与其将深度设置为我试图做的那样，我将如何发送错误？以及使当前功能用于信息目的的任何帮助？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T07:28:28.403

有多种方法可以做到这一点。

最直接的解决方案：

```
def check_depth
  self.errors.add(:depth, "Issue with depth") if self.value > 2 # this does not support I18n
end 
```

最干净的是使用模型验证（在 category.rb 的顶部，只需添加）：

```
validates :depth, :inclusion => { :in => [0,1,2] }, :on => :create 
```

如果您的验证逻辑变得更复杂，请使用自定义验证器：

```
# lib/validators/depth_validator.rb (you might need to create the directory)
class DepthValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    record.errors.add(attribute, "Issue with #{attribute}") if value > 2 # this could evene support I18n
  end
end 
```

在使用这个验证器之前，你需要在初始化器中加载它

```
# config/initializers/require_custom_validators.rb
require File.join('validators/depth_validator') 
```

在更改之后（以及在验证器中进行任何更改之后），您需要重新启动您的 rails 服务器。

现在在您的类别模型中：

```
validates :depth, :depth => true, :on => :create # the :on => :create is optional 
```

该问题将被提出，`@category.save`因此您可以像这样设置您的 Flash 通知：

```
if @category.save
  # success
else
  # set flash information
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T07:43:54.097

我会推荐简单明了的方法：

```
# in your Comment.rb
validates_inclusion_of :depth, in: 0..2, message: "should be in the range of 0..2" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:39:59.660

你现在得到的错误是因为`depth`是 nil。我相信您想使用`self.depth`，例如：

```
def check_depth
    self.depth = 1 if self.depth > 2
end 
```

我不太确定发送错误是什么意思...在哪里发送错误？你是模特...

# jquery - 动态生成的 td 中的 span 标签 - jquery

> ID：10159770
> 
> 赞同：0
> 
> 时间：2012-04-15T05:24:41.123
> 
> 标签：jquery, html

我有一个动态生成的企业应用程序页面。数据在表结构内。我需要访问该表内的 span 标签值。

页面代码看起来像

```
<td class="dCCItemValue" valign="bottom>
<span id="S_0_1_5">Problem type</span> 
```

span 标签的 id 也是动态生成的，我无法控制它。所以问题陈述变成：如何在类“dCCItemValue”的 td 中获取值跨度

我希望我已经正确解释了这个问题。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:47:06.297

在选择器中使用后代运算符（空格）：

```
var value = $('.dCCItemValue span').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:35:18.013

如果我理解正确，这应该有效：

```
$('.dCCItemValue').children('span').text() 
```

# c - 在 C 中使用内存映射来读取二进制文件

> ID：10159771
> 
> 赞同：-1
> 
> 时间：2012-04-15T05:24:53.493
> 
> 标签：c, binaryfiles, mmap

我正在尝试从一个非常大的二进制文件中读取数据并使用内存映射对其进行处理，因此可以逐字节读取它。我在执行此操作时遇到了一些编译器错误，我无法弄清楚是什么原因造成的。为了记录，我在 linux 平台上执行此操作。

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/mman.h>
#include<stdio.h>
#include<stdlib.h>
int fd;
char *data;

fd = open("data.bin", O_RDONLY);
pagesize = 4000;
data = mmap((caddr_t)0, pagesize, PROT_READ, MAP_SHARED, fd, pagesize); 
```

我得到的错误如下：

> caddr 未初始化
> 
> R_RDONLY 未初始化
> 
> mmap 的参数太少。

我正在使用 Makefile 来编译它，它看起来像这样：

```
all: order_book
CC = gcc 
CFLAGS = -std=c99

order_book: main.c
    $(CC) $(CFLAGS) -o order_book main.c
clean: 
    rm -f order_book 
```

我做错了什么，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:49:20.273

几个错误，如果这确实是失败的*整*段代码：

1.  `O_RDONLY`需要`fcntl.h`包括在内。
2.  代码是在任何函数之外定义的。
3.  的第一个参数`mmap`是 a `void *`，所以只需使用`NULL`.
4.  `pagesize`未声明。

以下编译：

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/mman.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>

int fd;
char *data;

void main(int argc, char *argv[]) {
  fd = open("data.bin", O_RDONLY);
  int pagesize = 4000;
  data = mmap(NULL, pagesize, PROT_READ, MAP_SHARED, fd, pagesize);
} 
```

# linux - 使用“git revert”来取消添加一行的更改？

> ID：10159775
> 
> 赞同：4
> 
> 时间：2012-04-15T05:25:30.153
> 
> 标签：linux, git

以下 pastebin 是一个包含一个文件的存储库，每行键入一、二、三、四、五。

每一行都单独提交到 git 中：

[http://pastebin.ca/raw/2136179](http://pastebin.ca/raw/2136179)

然后我尝试使用命令删除第二行`git revert <commmit which creates two>`

并得到：

```
error: could not revert b4e0a66... second
hint: after resolving the conflicts, mark the corrected paths
hint: with 'git add <paths>' or 'git rm <paths>'
hint: and commit the result with 'git commit' 
```

这么简单的事情不应该有冲突吗？还是我做错了/得到了错误的命令？

合并细节似乎也没有意义：

```
one
<<<<<<< HEAD
two
three
four
five
=======
>>>>>>> parent of b4e0a66... second 
```

这不是说除了一个之外删除所有内容吗？我原以为只有两个会受到影响...

混帐 1.7.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T13:45:17.897

我试图重复你的步骤，发现同样的问题。您似乎只能还原最近的提交。在我的存储库中：

```
$ git log --oneline
9a25594 five
f8f1ec4 four
3c75345 three
e6cd245 two
8349ccc one
d2f16c4 for stkofl  <<==== ignore this one

$ git revert 9a25 --no-edit
Finished one revert.
[master 82bbc79] Revert "five"
 1 files changed, 0 insertions(+), 1 deletions(-)
$ git reset --hard
HEAD is now at 82bbc79 Revert "five" 
```

似乎不允许恢复任何不是一组连续提交的提交，包括 HEAD（最近的提交）。

当然，你可以这样做：

```
 $ git show e6cd |patch -R
    patching file file
    Hunk #1 succeeded at 1 with fuzz 1. 
```

然后提交结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:42:07.603

更改保存为上下文差异...如果您查看差异`third`，您会注意到它是根据包含的行应用的`two`，这意味着它取决于引入的提交`two`。同样，每个连续的提交都依赖于前一个提交，这就是为什么它要删除引入的提交之后的所有提交`two`（因为它们最终都依赖于该提交）。这就是为什么你不应该依赖于在一般情况下能够恢复提交，而只能在提交之后立即恢复。

# c++ - 声明指针对象的二维数组

> ID：10159780
> 
> 赞同：0
> 
> 时间：2012-04-15T05:26:26.183
> 
> 标签：c++, pointers, multidimensional-array

我很难弄清楚如何实例化指针对象的二维数组。这是我的做法：

```
Pieces* chessBoard[9][9]; 
```

当我想将其设置为实际的对象指针时，我正在执行以下操作：

```
chessBoard[1][1] = new Rook(p1Rook); 
```

Rook 是一个从 Pieces 类继承属性的类，p1Rook 是一个设置为“R”的 char 变量。此类还实现了来自 Pieces 的虚函数（不是纯虚函数），例如特定棋子特有的 move() 或 getPiece()。但是，当我编译我的程序时，我收到以下错误：

```
ChessBoard.cpp:69: error: expected type-specifier before ‘Rook’
ChessBoard.cpp:69: error: cannot convert ‘int*’ to ‘Pieces*’ in assignment 
```

有人可以解释一下我应该改变什么来摆脱这个相当烦人的持续错误吗？我会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:34:12.323

编译器错误表明编译器不知道 a`Rook`是什么，也不知道它是从`Pieces`. 它看起来像一个失踪的`#include`.

# c# - .Split() 方法有问题

> ID：10159786
> 
> 赞同：1
> 
> 时间：2012-04-15T05:27:44.303
> 
> 标签：c#, arrays, split

此代码引发异常，“索引超出了数组的范围”。这不应该简单地将每个拆分数据添加到指定的数组槽中吗？

```
while (input != null)
{
    string[] splitInput = inputLine.Split();
    EmpNum = int.Parse(splitInput[0]);
    EmpName = (splitInput[1]);
    EmpAdd = (splitInput[2]);
    EmpWage = double.Parse(splitInput[3]);
    EmpHours = double.Parse(splitInput[4]);
    inputLine = (myFile.ReadLine());
    Console.WriteLine("test {0},{1},{2}", EmpNum, EmpWage, EmpHours);
} 
```

为了澄清一点，我正在从一个包含员工数据（姓名、地址、工作时间、员工编号、工资）的简单文本文件中读取数据。

为了清楚起见，我添加了整个主要方法。

```
using System;
using System.IO;

class Program
{
static void Main()
{

    //declare an array of employees
    Employee[] myEmployees = new Employee[10];

    //declare other variables
    string inputLine;
    string EmpName;
    int EmpNum;
    double EmpWage;
    double EmpHours;
    string EmpAdd;

    //declare filepath
    string environment =            System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal) + "\\";

    //get input
    Console.Write("\nEnter a file name in My Documents: ");
    string input = Console.ReadLine();
    string path = environment + input;
    Console.WriteLine("Opening the file...");

    //read file
    StreamReader myFile = new StreamReader(path);
    inputLine = (myFile.ReadLine());

    //split input
    while (inputLine != null)
    {

        string[] splitInput = inputLine.Split();
        EmpNum = int.Parse(splitInput[0]);
        EmpName = (splitInput[1]);
        EmpAdd = (splitInput[2]);
        EmpWage = double.Parse(splitInput[3]);
        EmpHours = double.Parse(splitInput[4]);
        Console.WriteLine("test {0},{1},{2}", EmpNum, EmpWage, EmpHours);
    }

    Console.ReadLine();
}//End Main()
}//End class Program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:17:01.890

也许这个版本会获得额外的荣誉 :) 说真的，虽然我不想在这里炫耀 - 只是即使它是一个学习示例，如果你找到一份工作并被赋予编写读取 CSV 的代码的任务例如，您不希望它崩溃并让您看起来很糟糕，因此您会帮自己一个忙，了解一些使其更健壮的步骤。

注意 - 这并不是试图就编写示例代码的完美方式展开辩论 - 只是试图展示一些我知道有用的技巧。希望它有帮助。

```
 StreamReader myFile = new StreamReader("TextFile1.txt");
            int lineNumber = 0;
            while (!myFile.EndOfStream)
            {
                // Read the next line.
                string inputLine = myFile.ReadLine();
                lineNumber++;

                // Extract fields line.
                string[] splitInput = inputLine.Split();

                // Make sure the line has the correct number of fields.
                if (splitInput.Length == 5)
                {
                    // Parse and validate each field.

                    if (!int.TryParse(splitInput[0], out EmpNum))
                    {
                        Console.WriteLine("could not parse int " + splitInput[0] + " on line " + lineNumber);
                        continue;
                    }

                    EmpName = (splitInput[1]);

                    EmpAdd = (splitInput[2]);

                    if(!double.TryParse(splitInput[3], out EmpWage))
                    {
                        Console.WriteLine("could not parse double " + " on line " + lineNumber);
                        continue;
                    }

                    EmpHours = double.Parse(splitInput[4]);

                    if (!double.TryParse(splitInput[4], out EmpHours))
                    {
                        Console.WriteLine("could not parse double: " + " on line " + lineNumber);
                        continue;
                    }

                    // Output
                    Console.WriteLine("test {0},{1},{2}", EmpNum, EmpWage, EmpHours);
                }
                else
                {
                    Console.WriteLine("Expecting 5 items from split opertation but got " + splitInput.Length  + " on line " + lineNumber);
                }
            }
            myFile.Close(); 
```

**文本文件1.txt**

```
1 2 3 4 5
6 7 8 f9 10
11 12 
```

**程序输出**

```
test 1,5,5
could not parse double:  on line 2
Expecting 5 items from split opertation but got 2 on line 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:53:21.783

您有一行不包含足够的项目。在读取项目之前检查数组的长度：

```
string[] splitInput = inputLine.Split();
if (splitInput.Length >= 5) {
  EmpNum = int.Parse(splitInput[0]);
  EmpName = (splitInput[1]);
  EmpAdd = (splitInput[2]);
  EmpWage = double.Parse(splitInput[3]);
  EmpHours = double.Parse(splitInput[4]);
} else {
  // not enough items - show an error message or something
} 
```

此外，您正在检查变量`input`而不是`inputLine`在 中`where`，但这不是您得到错误的原因。如果您阅读到文件末尾，则在尝试使用拆分中的空引用时会收到空引用异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:30:56.990

检查您的字符串，您可能没有在输入中获得 5 个元素并在拆分方法中提供一些字符

更改`inputLine.Split()`为 `inputLine.Split(',')`，如果您用逗号分隔元素

您的输入将像“第一”、“第二”、“第三”、“第四”、“第五”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T05:53:21.617

在拆分输入后在行中添加一个断点，然后您可以将鼠标悬停在结果数组上并单击加号。这样您就可以准确地看到数据是如何被拆分的。如果存在会导致拆分的隐藏字符 (\n,\t,\r)，这将特别有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T05:33:35.813

1）不`input`应该`inputLine`吗？

~~2）在使用它之前为每个数组元素添加一个空检查。~~

我也猜，

```
while (input != null)
    {
        string[] splitInput = inputLine.Split();
        EmpNum = int.Parse(splitInput[0]);
        EmpName = (splitInput[1]);
        EmpAdd = (splitInput[2]);
        EmpWage = double.Parse(splitInput[3]);
        EmpHours = double.Parse(splitInput[4]);
        inputLine = (myFile.ReadLine());
        Console.WriteLine("test {0},{1},{2}", EmpNum, EmpWage, EmpHours);
    } 
```

应该

```
while (input != null)
    {
        inputLine = (myFile.ReadLine());
        string[] splitInput = inputLine.Split();
        EmpNum = int.Parse(splitInput[0]);
        EmpName = (splitInput[1]);
        EmpAdd = (splitInput[2]);
        EmpWage = double.Parse(splitInput[3]);
        EmpHours = double.Parse(splitInput[4]);

        Console.WriteLine("test {0},{1},{2}", EmpNum, EmpWage, EmpHours); 
```

}

首先使用从文件中读取`inputLine = (myFile.ReadLine());` ，然后执行拆分操作...

3）正如@Aaron Anodide 所建议的，添加长度检查应该可以解决问题。

就像是..

```
inputLine = (myFile.ReadLine());
string[] splitInput = inputLine.Split();
if(splitInput!=null && splitInput.length ==5)
{
 EmpNum = int.Parse(splitInput[0]);
        EmpName = (splitInput[1]);
        EmpAdd = (splitInput[2]);
        EmpWage = double.Parse(splitInput[3]);
        EmpHours = double.Parse(splitInput[4]);
        Console.WriteLine("test {0},{1},{2}", EmpNum, EmpWage, EmpHours);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-15T06:02:47.750

你有几个问题。第一个问题是Split()。您需要更改`inputLine.Split()`为`inputLine.Split(',')`. 现在您正在调用的重载，`System.String.Split(params char[])`并且由于您没有指定要拆分的任何字符，因此它将返回整个字符串。

其他问题（作为 CS 学生），您应该真正致力于命名约定和错误检查。代码相当脆弱，很容易中断。您应该尽早开始学习良好的软件工程实践和编写高质量的代码。

```
using (FileStream fstream = new FileStream("path", FileMode.Open))
using (StreamReader reader = new StreamReader(fstream)) {
    string line;

    while (!reader.EndOfStream && (line = reader.ReadLine()) != null) {
        string[] data = line.Split(',');

        if (data.Length < 5) {
            // You will have IndexOutOfRange issues
            continue; // skip processing the current loop
        }

        int employeeNumber;
        string employeeName;
        string employeeAddress;
        double employeeWage;
        double employeeHours;

        // Will be used to check validity of fields that require parsing into a type.
        bool valid;

        valid = int.TryParse(data[0], out employeeNumber);

        if (!valid) {
            // employee number is not parsable
        }

        employeeName = data[1];
        employeeAddress = data[2];

        valid = double.TryParse(data[3], out employeeWage);

        if (!valid) {
            // employee wage is not parsable
        }

        valid = double.TryParse(data[4], out employeeHours);

        if (!valid) {
            // employee hours are not parsable
        }
    }
} 
```

# jquery - jQuery ajax 调用中 type:'get' 和 type:'post' 有什么区别

> ID：10159788
> 
> 赞同：0
> 
> 时间：2012-04-15T05:28:38.100
> 
> 标签：jquery

type:'get' 和 type:'post' 有什么区别

```
 $.ajax({
                type: 'GET', /'POST'
                url: '../common/AjaxPage.aspx',
                data: { action: 'SaveSafeData', safecost: cost, safeTime: Duration },
                cache: false
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:34:04.123

一个发送 HTTP GET 请求，而另一个发送 HTTP POST。

基本上，区别在于 GET，数据在 url（如`thing.php?action=doStuff&value=20`）中发送，而对于 POST，数据在单独的标头中发送。

从语义上讲，如果您从服务器获取数据并且不更改任何内容，则通常应该使用 GET，而如果您要更改某些内容，则应该使用 POST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:59:51.220

'type' 选项是指Ajax 请求的[HTTP 方法类型（GET/POST/PUT/DELETE/..）。](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)默认为 GET；除 GET&POST 外，并非所有浏览器都支持。jQuery Ajax 中针对这种方法类型有相应的简写函数：jQuery.get() 使用 Http Get，jQuery.post() 使用 Http Post。

如果您需要了解有关 GET 与 POST 的更多信息，这里有一些非常有用的 SO Q&A：

[什么时候使用 POST，什么时候使用 GET？](https://stackoverflow.com/questions/46585/when-do-you-use-post-and-when-do-you-use-get)

[https://stackoverflow.com/questions/340704/get-vs-post-in-html-forms](https://stackoverflow.com/questions/340704/get-vs-post-in-html-forms)

[GET 或 POST 是否比另一个更安全？](https://stackoverflow.com/questions/198462/is-either-get-or-post-more-secure-than-the-other)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T05:43:58.673

GET 或 POST 的类型取决于[超文本传输​​协议](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)(HTTP) 中请求的工作方式。所以你真的应该用 google http POST 或 http GET 来了解它们的[区别](http://wiki.answers.com/Q/What_is_the_difference_between_get_and_post_method_in_HTTP)。请注意，还要查看 HTTP 中的其他请求方法。

但是在 jquery 的上下文中，这里是整个[文档](http://api.jquery.com/jQuery.ajax/)的片段。请注意，还请查看 jquery ajax() 支持的当前 HTTP 请求方法是什么。

> 向服务器发送数据
> 
> 默认情况下，Ajax 请求使用 GET HTTP 方法发送。如果需要 POST 方法，可以通过设置 type 选项的值来指定该方法。此选项影响数据选项的内容如何发送到服务器。根据 W3C XMLHTTPRequest 标准，POST 数据将始终使用 UTF-8 字符集传输到服务器。
> 
> data 选项可以包含 key1=value1&key2=value2 形式的查询字符串，或 {key1: 'value1', key2: 'value2'} 形式的映射。如果使用后一种形式，则数据在发送之前使用 jQuery.param() 转换为查询字符串。可以通过将 processData 设置为 false 来规避此处理。如果您希望将 XML 对象发送到服务器，则该处理可能是不可取的；在这种情况下，将 contentType 选项从 application/x-www-form-urlencoded 更改为更合适的 MIME 类型。

# c# - C#：如何使用 RichTextBox.Select() 方法？

> ID：10159790
> 
> 赞同：2
> 
> 时间：2012-04-15T05:29:01.290
> 
> 标签：c#, select, methods, richtextbox

```
richTextBox1.Select(0, 1);
richTextBox1.Select();
richTextBox1.SelectionColor = Color.Yellow; 
```

这个片段导致整个文本变成黄色，但我实际上只希望指定的字符变成黄色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:32:23.030

只调用一次 Select 方法，传递文本范围的两个参数：

```
richTextBox1.Select(0, 1); 
richTextBox1.SelectionColor = Color.Yellow; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:37:44.577

```
richTextBox1.Select(0, 5);
richTextBox1.SelectionBackColor = Color.Yellow; 
```

# c# - 在 Farseer Physics 3.3.1/Box2d 中创建无限摆动的钟摆

> ID：10159792
> 
> 赞同：1
> 
> 时间：2012-04-15T05:30:18.223
> 
> 标签：c#, xna, box2d, farseer

**我是 Farseer Physics 的新手，使用的是 3.3.1 版。我正在寻求一些帮助，甚至很乐意收到 Box2d 的答案，以确保我得到回复，因为我应该能够转换它！ - 谢谢**

...经过大量修改后，我设法在屏幕上产生了一个薄的垂直矩形形状，我希望它可以在顶部固定在我设置的角度来回摆动（对于这个示例来说，90 度就可以了）。

当它接近顶部时，我希望它放慢速度，然后回到它刚刚来的方式，增加速度，然后明显减慢到再次在顶部停止。几乎就像一艘摆动的海盗船在主题公园里的工作方式。

这是我到目前为止摆动形状的代码，但它似乎在每次摆动时都会失去速度，最终会停止：

```
float playerWidth = ConvertUnits.ToSimUnits(5), playerHeight = ConvertUnits.ToSimUnits(68);
playerPosition = ConvertUnits.ToSimUnits(-350, 0);
playerBody = BodyFactory.CreateRectangle(World, playerWidth, playerHeight, 2f, playerPosition);
playerBody.BodyType = BodyType.Dynamic;
// create player sprite based on player body
_rectangleSprite = new Sprite(ScreenManager.Assets.TextureFromShape(playerBody.FixtureList[0].Shape, MaterialType.Player, Color.Orange, 1f));
// Create swinging joint
var joint = JointFactory.CreateFixedRevoluteJoint(World, playerBody, ConvertUnits.ToSimUnits(0, -34), playerBody.Position); 
```

如果有人也可以提供命令，我需要在鼠标单击或键盘命令上以当前角度暂停形状，然后在我松开鼠标单击时继续，这将是非常棒的！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:29:42.023

通常在这种情况下摆动的身体需要很长时间才能停下来（事实上我们有时会问如何让它停下来......）所以我猜测长而细的形状可能正在播放部分。与其他物理引擎一样，Box2D 在长而细的形状方面存在问题。

但这不是您的问题...要保持摆动不变，您需要手动设置每次摆动的速度，无论是在顶部还是在它通过摆动的中点时。我认为中点会更安全且不那么引人注目。

这个钟摆是否需要撞到其他物体？如果它捡起一个更重的物体但没有减速，或者它只是减速到你加快速度，然后突然变快，它可能看起来很奇怪。如果它不需要以动态方式做出反应，则最好使用运动体，您可以通过在每帧设置适当的角速度来控制自己。

运动学体也会使您的问题的最后一部分更简单，因为您可以将速度设置为零，直到您准备好再次移动。要通过动态身体/关节设置获得这种效果，您需要记下当前的线速度和角速度，然后在每帧中取消身体不应移动的重力，然后恢复速度以保持它再次移动。但是，如果在此期间有任何东西碰到它，那么这个技巧就会失败。您也可以暂时将关节限制（下/上）设置为相同的角度，以强制关节保持钟摆静止，但我真的怀疑 5x68 尺寸的身体在这些限制下能否很好地发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T13:20:52.830

随着时间的推移，任何非专用的钟摆模拟都可能会失去能量。

如果您需要钟摆与其他物理对象交互，请保留您现在拥有的东西，但随着模拟运行，调整它以使其继续运行；例如，每次它垂直摆动时，将线速度和角速度缩放到与第一次这样做时相同的大小（除非它例如撞到了什么东西，在这种情况下它*不应该*继续这样）。

如果你不需要它与任何东西交互，或者它不应该反应而只是推动其他物体，那么不要让它成为模拟刚体；而是根据当前时间对其进行动画处理（设置角度）。您的物理引擎可能有一个选项，用于移动但本身不被其他物体移动的对象，这可能是该`BodyType`属性。（我没有随时间变化的钟摆位置的公式，但我确信它在某处可用。）

* * *

我从您问题的另一份副本中看到（顺便说一句，请不要这样做；请让模组迁移您的问题）您不希望它进行交互，但确实想将其转换为未固定的（下落）身体和背部。我认为我上面描述的任何一种策略都可以解决这个问题，但第一种策略需要更少的摆弄来实现。

# java - 如何从另一个组件的侦听器设置 JTable 的表模型？

> ID：10159793
> 
> 赞同：3
> 
> 时间：2012-04-15T05:30:20.347
> 
> 标签：java, swing, jtable, jpanel, jtree

我创建了两个 JPanel。一个 JPanel 有一个带有节点的 JTree。另一个 JPanel 有一个 SQL 填充的 JTable。我正在尝试从 JTree 获取节点选择，以使用来自 JTree 的输入重新运行 JTable 的查询，为 JTable 提供部分过滤器。你能提供指导吗？我是 Java 新手。这是问题的代码：

```
import java.awt.BorderLayout;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Hashtable;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTable;
import javax.swing.JTree;
import javax.swing.ScrollPaneConstants;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeSelectionModel;

public class SCCEEforTreeAndTableInteraction {

    private static Connection conn = null;
    private static Statement stmt = null;
    private static ResultSet rs = null;
    private static ResultSetMetaData meta;
    private static int columnCount = 0;
    private static int rowCount = 0;
    private static Object[][] result;
    private static String[] columnNames;
    private static JTree tree;
    public static Hashtable<Object, Integer> treeData;
    public int tableTopicNodeID;

    public static void main(String[] args) {

        //Create and setup window
        JFrame frame = new JFrame("Tree and Table Interaction");
        JPanel panelMain = new JPanel(new BorderLayout());
        JPanel treePanel = new JPanel(new BorderLayout());
        JPanel tablePanel = new JPanel(new BorderLayout());
        JSplitPane split = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, treePanel, tablePanel);
        split.setOneTouchExpandable(true);
        myJTree tree = new myJTree();
        myJTable table = new myJTable();
        frame.add(panelMain);
        treePanel.add(tree);
        tablePanel.add(table);
        panelMain.add(split);
        frame.setVisible(true);
        panelMain.setVisible(true);
        treePanel.setVisible(true);
        tablePanel.setVisible(true);
        frame.pack();

    }

    private static class myJTable extends JPanel {
        //Getting the data from the database in order to fill the table
        public myJTable() {
            try {
                conn = DriverManager.getConnection("jdbc:derby://localhost:1527/FlamingDartDB;create=true;user=user;password=password");
                stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);

                rs = stmt.executeQuery("select count(*) from FLAMINGDART.TOPICDATA where NODEID =" + *Start with a default, then get data from the listener below*); //NodeID should be different every time I select a node
                rs.beforeFirst();
                while (rs.next()) {
                    rowCount = rs.getInt(1);
                }
                rs = stmt.executeQuery("select * from FLAMINGDART.TOPICDATA where NODEID =3");//NodeID should be different every time I select a node
                meta = rs.getMetaData();
                columnCount = meta.getColumnCount();   //The first 2 column are not for display to the user
                columnNames = new String[columnCount];
                for (int i = 0; i < columnCount; i++) {
                    columnNames[i] = meta.getColumnName(i + 1);
                }
                result = new Object[rowCount][columnCount];
                rs.beforeFirst();
                for (int i = 0; i < rowCount; i++) {
                    rs.next();
                    for (int j = 0; j < columnCount; j++) {
                        result[i][j] = rs.getObject(j + 1);
                    }
                }
                stmt.close();
                conn.close();
            } catch (SQLException sqlExcept) {
                sqlExcept.printStackTrace();
            }
            DefaultTableModel tableModel = new DefaultTableModel(result, columnNames);
            JTable table = new JTable(tableModel);
            JScrollPane topicTableScrollPane = new JScrollPane(table);
            topicTableScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
            add(topicTableScrollPane);
        }
    }

    private static class myJTree extends JPanel implements TreeSelectionListener {

        public myJTree() {
            //This is sample tree data with the node ID that is used to refine the table query.
            treeData = new Hashtable();
            treeData.put("Node 1", new Integer(1));
            treeData.put("Node 2", new Integer(2));
            treeData.put("Node 3", new Integer(3));
            treeData.put("Node 4", new Integer(4));
            treeData.put("Node 5", new Integer(5));
            treeData.put("Node 6", new Integer(6));
            treeData.put("Node 7", new Integer(7));
            treeData.put("Node 8", new Integer(8));
            treeData.put("Node 9", new Integer(9));
            tree = new JTree(treeData);
            tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
            tree.addTreeSelectionListener(this);
            this.add(tree);
        }

        @Override
        public void valueChanged(TreeSelectionEvent tse) {
            DefaultMutableTreeNode nodeSelected = (DefaultMutableTreeNode) tree.getLastSelectedPathComponent();
            if (nodeSelected == null) //Nothing is selected.     
            {
                System.out.println("Selected Node is Null");
                return;
            }
            Integer n = treeData.get(nodeSelected.getUserObject());//Returns the integer value associated with the key from the node table
            if (n != null) {
                System.out.println("Start a new query with " + n + " as a filter for the query.");
 *//This is supposed to set the node id that helps populate the table with a new query. Something along the lines of table.SetTableModel(n) that I'm having trouble implementing.*
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T09:35:41.540

在您的`TreeSelectionListener`中，使用 的实例在后台[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)更新您`JTable`的。`TableModel`更多示例可在[此处](http://sites.google.com/site/drjohnbmatthews/randomdata)和[此处](https://stackoverflow.com/a/4637725/230513)找到。

# linux - asm("pause") 做什么以及为什么要使用它

> ID：10159796
> 
> 赞同：14
> 
> 时间：2012-04-15T05:31:34.467
> 
> 标签：linux, assembly, x86

我在其他人的代码中看到了 asm("pause") ，我想知道它的作用。代码由 Linux 上的 g++ 编译。

此行位于另一个线程中的循环中，该线程会不断轮询是否发生更新。我怀疑它会使程序在再次轮询之前暂停一点，但我想知道（1）我的猜测是否正确（2）为什么需要暂停？我们在其上运行代码的机器有很多处理器，而我的线程完全只是不断地轮询它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-15T05:40:32.487

基本上这称为自旋循环或忙等待。它会消耗尽可能多的 CPU 资源。这会浪费 CPU 处理能力并增加功耗。

通过放置暂停指令，您是在暗示处理器“这是一个自旋循环”。这迫使处理器不要太聪明而无法做出不必要的预测（优化）。此外，在某些情况下，它可以释放 CPU 时间用于其他事情（例如超线程）。

# javascript - 如何将二进制数转换为八进制数？

> ID：10159797
> 
> 赞同：1
> 
> 时间：2012-04-15T05:31:40.557
> 
> 标签：javascript, numbers

我正在制作一个 JavaScript 计算器，它（假设）将二进制数（2）转换为八进制数（8）。我对此做了一段时间的研究，我发现的是一堆库。我不想要它们中的任何一个，并且可能有一种更简单的方法可以做到这一点，但是如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T05:35:01.373

你不需要图书馆。只需使用[`parseInt`函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)和[`toString`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toString)：

```
var binary = "10010100101";
var octal = parseInt(binary, 2).toString(8); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T11:47:55.030

```
private double binToOct(int nm){
   String hex = "" + nm;
   long num = Long.parseLong(hex);
   long rem;
   while (num > 0) {
    rem = num % 10;
    num = num / 10;
    if (rem != 0 && rem != 1) {
        Toast.makeText(getBaseContext(),
                "This is not a binary number.", Toast.LENGTH_LONG)
                .show();
        return 0.0;
    }
   }
   long l = Long.parseLong(hex, 2);
   System.out.println(Long.toOctalString(l));
   return Double.parseDouble(Long.toOctalString(l));
   }
} 
```

写下此代码。

# api - Getting specific user's track list with soundcloud API

> ID：10159802
> 
> 赞同：18
> 
> 时间：2012-04-15T05:33:08.237
> 
> 标签：api, soundcloud

Is it possible to get the track list from a specific user via the soundcloud API WITHOUT requiring that specific user to authenticate?

I'm looking for something like the YouTube feeds you can get here: [https://gdata.youtube.com/feeds/api/users/mrromandiaz/uploads?max-results=10](https://gdata.youtube.com/feeds/api/users/mrromandiaz/uploads?max-results=10) (I've pointed this at my account, but the username "mrromandiaz" can be replaced with any username to retrieve that user's videos...

Question is, does Soundcloud offer anything similar? I don't need to authenticate, or post, or upload, or control anything... just get user's track lists to show on their profiles, without resorting to the default player.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-15T08:32:54.940

Yep, the API endpoint is at `/users/{user_id}/tracks`. If you don't have the user id, but only their username (permalink), you can use the `/resolve` endpoint to get the user data, including their id.

Documentation here: [user resource](http://developers.soundcloud.com/docs/api/users) and here [resolve](http://developers.soundcloud.com/docs/api/resolve).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-28T10:37:40.567

To get the track list from a specific user via the soundcloud API without authenticating:

(javascript example)

```
SC.initialize({
      client_id: "YOUR_CLIENT_ID",
      redirect_uri: "http://example.com/callback.html",
  });

/**
Once that's done you are all set and ready to call the SoundCloud API. 
**/

/**
Call to the SoundCloud API. 
Retrieves list of tracks, and displays a list with links to the tracks showing 'tracktitle' and 'track duration'
**/

  var userId = 39090345; // user_id of Prutsonic

  SC.get("/tracks", {
      user_id: userId,
      limit: 100
  }, function (tracks) {

      for (var i = 0; i < tracks.length; i++) {
          console.log(tracks[i].title);
      }

  }); 
```

You can try my fiddle here: [http://jsfiddle.net/tobiasbeuving/26pHX/5/](http://jsfiddle.net/tobiasbeuving/26pHX/5/)

(PHP example:)

```
 try {
        $tracks = $client->get('tracks', array('user_id' => '39090345','limit' => 100));
    } catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
        print $e->getMessage();
    } 
```

(I just answered a similar question [Soundcloud stratus player won't dynamically add more than an individual track at a time](https://stackoverflow.com/questions/23260692/soundcloud-stratus-player-wont-dynamically-add-more-than-an-individual-track-at/23337734) but I don't know how to handle the 'duplicate question' situation.

Cheers, T

# java - Java新手试图找出 NullPointerException 和

> ID：10159803
> 
> 赞同：0
> 
> 时间：2012-04-15T05:33:14.510
> 
> 标签：java, nullpointerexception

我正在用 Java 学习 iTunes U Stanford CS106a 课程，我很喜欢它，但我对这个 Name Surfer 程序感到失望。

当我使用此代码时

```
public NameSurferEntry(String line) {
  int endOfName = line.indexOf(" ");
  name = line.substring(0,endOfName);
  String newLine = line.substring(endOfName+1);
  StringTokenizer tokenizer = new StringTokenizer(newLine);

  if (tokenizer.hasMoreTokens()) {
    name = tokenizer.nextToken();
  }

  for (int i = 0; tokenizer.hasMoreTokens(); i++) {
    array[i] = Integer.parseInt(tokenizer.nextToken());
  }
} 
```

我在第二行（int endOfName 等）上得到一个 Suspended/NullPointerException，上面写着“NameSurferEntry.(String) line: 16”。

如果我尝试这样做：

```
public NameSurferEntry(String line) {
  StringTokenizer tokenizer = new StringTokenizer(line);
  name = tokenizer.nextToken();

  for (int i = 0; tokenizer.hasMoreTokens(); i++) {
    array[i] = Integer.parseInt(tokenizer.nextToken());
  }
} 
```

我收到 Suspended/NullPointerException 消息“StringTokenizer.(String, String, boolean) line: 182”，后跟“Source not found”。

有人对我做错了什么有任何想法吗？

**更新**

谢谢您的帮助。

NameSurferEntry 实际上是由另一个为 提供值的类调用的`null`。但是在阅读了您的建议后，我已将其声明`line`为 ivar，但在 NameSurferEntry 的主体中对其进行了初始化，从而修复了它。（在我声明和初始化`line`为 ivar 之前。我不明白为什么我初始化它的地方会有所不同，但确实如此。）

下一个错误直到第 48 行！所以你可能很快就会再次收到我的来信......在我的路上，看看我是否能自己解决这个问题。再次感谢。

**哎呀**

没那么快。

当我`line`在 NameSurferEntry 的主体中初始化一个实际的字符串时，一切正常。

问题是 NameSurferEntry 被另一种方法调用：

```
public NameSurferDataBase(String filename) {
  try {
    BufferedReader br = new BufferedReader(new FileReader(filename));

    while (true) {
      String blah = br.readLine();

      if (blah == null) {
        break;
      }

      NameSurferEntry entry = new NameSurferEntry(blah);
      hmap.put(entry.getName(), entry);
    }
    br.close();
  }
  catch (IOException ex) {
    throw new ErrorException(ex);           
  }
} 
```

（这个方法又被另一个方法调用，它为它提供了一个实际的文件`filename`，所以我们没问题。）

但是如果我将参数传递`blah`给`NameSurferEntry`，`NameSurferEntry`然后初始化它的参数，那我就输了`blah`，对吧？然后我的冲动是在方法之外初始化`line`为 ivar，但随后我`NullPointerException`再次收到消息，我又回到了开始的地方。啊！

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:36:32.247

你给你的构造函数作为参数的`line`变量是`null`.

`null`如果您调用`NameSurferEntry`构造函数，请确保您不输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:41:28.930

你的`line`论点是空的。这就是为什么您要花一些`NullPointerException`时间尝试操作`line`（使用`indexOf`and `StringTokenizer`on`line`会引发`NullPointerException`if`line`为 null - 它没有什么可操作的）。

# javascript - 检测 JavaScript 中的事件支持？

> ID：10159808
> 
> 赞同：0
> 
> 时间：2012-04-15T05:34:13.393
> 
> 标签：javascript, events, detection

所以我已经为此绞尽脑汁很久了。这是情况。当它们可用时，我不想使用诸如 mouseup 和 mousedown 之类的事件。然而，对于 iPhone，这些显然必须被 touchend 和 touchstart 所取代。我要做的是检测是否支持前两个事件，而不是是否支持触摸事件。这是因为 Android 和其他设备确实支持 mouseup 和 mousedown。

至此我已经尝试了所有可以想象到的检测方法，包括（type是传入的事件类型）：

```
var el = document.createElement('div');
eventName = 'on' + type;
var isSupported = (eventName in el);
if (!isSupported) {
  el.setAttribute(eventName, 'return;');
  isSupported = typeof el[eventName] == 'function';
} 
```

和

```
if(document.hasOwnProperty('on' + type) 
  && typeof document['on' + type] !== 'undefined') {
  return true;
} 
```

和

```
return 'on' + type in document.documentElement; 
```

问题是这些方法中的每一种似乎都在我值得信赖的 iPhone 上评估为真。我真的可以使用一些洞察力。

一个要求是函数必须接受一个类型的字符串。我不能做类似“document.onEvent”的事情。我有一系列要测试的事件，无论如何它应该是动态的。也没有浏览器嗅探。

我也看过一些关于这些不同想法的文章，所以我做了我的谷歌搜索。

[http://perfectionkills.com/detecting-event-support-without-browser-sniffing/](http://perfectionkills.com/detecting-event-support-without-browser-sniffing/) [http://www.asiantravelhotel.com/javascript/onbeforeunload-support-detection.html](http://www.asiantravelhotel.com/javascript/onbeforeunload-support-detection.html)

# c - 第一次出现，除了 C 中的转义字符

> ID：10159813
> 
> 赞同：0
> 
> 时间：2012-04-15T05:35:04.527
> 
> 标签：c, string, strchr

如何找到`unescaped`str 中的第一个字符。在下面的代码中，我在位置 14 处获得了第一个字符，但我正在查看位置为 26 处的字符。

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] = "FOO + pHWAx \\\"bar AER/2.1\" BAZ";
  printf ("%s\n",str);
  char * pch;
  pch=strchr(str,'"');
  printf ("found at %d\n",pch-str+1);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:38:34.577

使用该`strpbrk`功能一次查找多个字符中的任何一个字符的第一次出现。您不能跳过转义字符；你必须检查它后面是否跟着你真正要找的字符。

即假设我们想寻找`"`可以作为`\"`. 实际上，这意味着我们必须寻找`"`或`\`。换句话说：

```
char *ptr = strpbrk(string, "\"\\"); /* look for chars in the set { ", \ } */ 
```

但是我们必须在循环中执行此操作，因为我们对转义引号不感兴趣并且必须继续：

```
char *quote = 0;
char *string = str; /* initially points to the str array */

while (*string != 0) {
  char *ptr = strpbrk(string, "\"\\"); 
```

接下来我们检查是否发现了什么：

```
 if (!ptr)
    break; 
```

如果我们发现某些东西必然是 a `\`or `"`：

```
 if (*ptr == '"') {
    quote = ptr;
    break;
  } 
```

如果它不是一个引用，那么它一定是一个转义。我们递增到下一个字符。如果它是一个终止空值，则意味着我们在字符串末尾有一个反斜杠：不正确的转义。

```
 if (*++ptr == 0)
    break; 
```

否则，我们可以跳过下一个字符并继续循环以扫描下一个转义或未转义的引号。

```
 string = ++ptr;
} 
```

如果出现未转义的引号，则`quote`在执行 while 循环后指向它。否则`quote`保持为空。

此代码假定除了 之外还存在其他转义`\"`，但它们都是一个字符长，例如`\b`or `\r`。如果有更长的转义，例如`\xff`. 转义符构成语言的约定：您必须知道要正确处理的语言是什么。

# lua - 如何将字符串的开头或结尾与 Lua 中的 string.match 匹配？

> ID：10159817
> 
> 赞同：6
> 
> 时间：2012-04-15T05:36:23.283
> 
> 标签：lua

我正在使用它来匹配出现在两个单词之间的文本：

```
a1 = "apple"
a2 = "bear"
match_pattern = string.format('%s(.*)%s', a1, a2)
str = string.match(str, match_pattern) 
```

如何在字符串的开头和数字或数字和字符串的结尾之间进行匹配？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T03:21:51.443

> 字符串的开头和数字或数字和字符串的结尾之间的匹配？

`^`在模式的开头将其锚定到字符串的开头。模式末尾的“$”将其锚定到字符串的末尾。

```
s = 'The number 777 is in the middle.'

print(s:match('^(.*)777')) --> 'The number '
print(s:match('777(.*)$')) --> ' is in the middle.' 
```

或匹配任何数字：

```
print(s:match('^(.-)%d+')) --> 'The number '
print(s:match('%d+(.*)$')) --> ' is in the middle.' 
```

第一个模式稍有改变以使用非贪婪匹配，它将匹配尽可能少的字符。如果我们使用`.*`而不是`.-`，我们会匹配`The number 77`。

# asp.net-mvc-3 - 保护记录的编辑和删除

> ID：10159824
> 
> 赞同：1
> 
> 时间：2012-04-15T05:38:12.627
> 
> 标签：asp.net-mvc-3, linq

我使用注释来阻止未经授权的用户访问数据，但现在面临阻止经过身份验证的用户编辑和删除彼此记录的问题。如果这是由登录用户 localhost/User/Edit/43 输入的 - 可以更改记录！即使您记录不属于已登录的用户。

这是我用于此查询的内容，仅允许登录用户查看他们自己的记录。

```
 var Adverts = from b in db.Adverts
                        .Where(c => c.Customer.Username == User.Identity.Name)
                                         select b; 
```

难以为用户实施编辑和删除安全。任何建议都将受到欢迎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:11:40.380

您在上面所做的是正确的，但您还应该在实际应用更改之前尝试此加载以进行编辑和删除。通过这种方式，您可以检查是否没有返回记录并返回 404（未找到而不是未经授权），因为此时这些是数据加载规则。相同类型的逻辑适用于任何仅根据用户 ID、公司 ID 等加载数据的多租户应用程序

您会很快意识到有多少表需要用户 ID、公司 ID 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:39:11.570

首先，您可以更改用户导航到他们的记录的方式。目前，您允许他们通过 URL（使用 GET）获取彼此的记录。您可以通过仅允许他们通过 POST（表单提交）访问来进一步锁定这一点。如果您的数据特别敏感，我强烈建议您进行此更改。

但是，无论哪种方式，如果数据是敏感的，您应该检查他们是否有权更改他们试图更改的内容。这不是由框架提供的——您需要对其进行编码。我会在您显示页面之前检查谁拥有该记录，如果他们试图规避您的安全性，则发回 401。但是当他们尝试发布更改时，您可能会决定这样做，因为您可能会很高兴他们看到它。

我希望这有帮助。

# unit-testing - VS 11 Beta 无法启动进程，因为未提供文件名

> ID：10159828
> 
> 赞同：8
> 
> 时间：2012-04-15T05:39:12.277
> 
> 标签：unit-testing, debugging, visual-studio-2012

这是我在构建我的测试项目时得到的：

![VS 11 单元测试意外错误](../Images/507629573335658705653aec83983da6.png)

有了这个，我无法运行我的测试，因为它们没有被 VS 发现。

`"Unexpected error detected. Check the Tests Output Pane for details."`请参阅窗口底部的消息。现在，如果您查看“测试输出”窗格，您将不知道问题出在哪里。这非常有帮助... :)

我知道 VS 11 处于测试阶段，但它曾经可以工作......

我已经重新启动了 VS，但之后它也没有工作。

关于发生了什么的任何想法？它会是某个地方的错误吗？

注意：我唯一能想到的与我前一段时间所做的 VS 2010 卸载有关。也许它卸载了一些必要的位。打败我...

**编辑 1**
我刚刚对 VS 11 Beta Ultimate 进行了修复。它要求重新启动计算机一次，我做到了。然后它继续修复，但持续工作了12个多小时。我刚刚杀死了修复过程。

与此同时，我卸载了 Visual Studio 11 Express for Web。我将它与 VS 11 Beta Ultimate 放在一起。

够疯狂的是，在我做了这两件事之后它又开始工作了。所以我不确定是什么解决了这个问题：被杀死的修复过程或 VS 11 Express for Web 的卸载。

**编辑 2**
令我失望的是，我现在看到这是断断续续的事情。重新启动 VS 11 Ultimate Beta 后，问题仍然存在。:(

**编辑 3**
我在 Microsoft 填写了[Connect 票](https://connect.microsoft.com/VisualStudio/feedback/details/736989/vs-11-beta-cannot-start-process-because-a-file-name-has-not-been-provided)，但他们将其关闭为不可复制。

我使用 VS 11 Ultimate Beta 修复选项进行了第二次尝试，这次它按预期完成。为了隔离问题，我在新解决方案中创建了一个带有默认`UnitTest1.cs`文件的全新测试项目，在构建它之后，我得到了与上图相同的错误屏幕。所以修复选项并没有解决问题。看起来我的系统中缺少某些东西。

这是来自 VS About 窗口的信息：

```
Microsoft Visual Studio 11
Version 11.0.50323.1 QRELB
Microsoft .NET Framework
Version 4.5.50131 QRELB

Installed Version: Ultimate 
```

**编辑 4我在**[这里](http://social.msdn.microsoft.com/Forums/pl-PL/vstest/thread/4035d43f-8581-4c76-9fd1-18b90df7035e)
发现了一个类似的问题，但那里给出的解决方案不适用于我的情况，因为我没有描述的 DLL。

**编辑 5**
在[Aseem Bansal](http://blogs.msdn.com/b/aseemb/archive/2012/03/02/how-to-enable-ute-logs.aspx)（微软员工）的帮助下，我终于得到了[日志](http://gist.github.com/2433068)并看到了这个异常：

```
W, 2124, 19, 2012/04/19, 11:51:32.644, 53768626724, devenv.exe, Exception occured while initialization System.InvalidOperationException: Cannot start process because a file name has not been provided.
   at System.Diagnostics.Process.Start()
   at Microsoft.VisualStudio.TestPlatform.Core.Utilities.CommonUtilities.LaunchProcess(String exeFileName, String commandLineArguments, String workingDirectory, IDictionary`2 environmentVariables)
   at Microsoft.VisualStudio.TestPlatform.Client.TestRunnerServiceClient.SetupProcess(Boolean forceX86Discoverer)
   at Microsoft.VisualStudio.TestPlatform.Client.TestRunnerServiceClient.Initialize_NoLock(Boolean forceX86Discoverer)
   at Microsoft.VisualStudio.TestPlatform.Client.TestRunnerServiceClient.EnsureInitialized(Boolean forceX86Discoverer)
   at Microsoft.VisualStudio.TestPlatform.Client.TestRunnerServiceClient.EnsureInitialized_NoError(Boolean forceDiscoveryInX86Mode) 
```

**编辑 6**
我尝试使用[`mstest.exe`](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.110%29.aspx)命令行工具（有和没有`/noisolation`选项）执行测试。测试按预期运行，如下[所示](https://gist.github.com/2438148)。所以问题出在 VS 11 Beta 内部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T12:06:15.613

莱尼尔，

感谢您提出这个问题。

正如我们在[这里](http://blogs.msdn.com/b/aseemb/archive/2012/03/02/how-to-enable-ute-logs.aspx)所讨论的，它表明[卷影副本](https://stackoverflow.com/q/8309411/114029)导致了问题。

请确保`Microsoft.VisualStudio.TestPlatform.Core.dll`从其安装位置`%VSInstallDir%\Commmon7\IDE\CommonExtensions\Microsoft\TestWindow`路径加载，而不是从`%appData%\assembly\dl3\`您现在观察的临时路径加载。这应该可以为您解决问题。

我还想告诉你，在最新的代码中，我们改进了我们的逻辑，并且通过改进的逻辑，从哪里加载二进制文件并不重要，它只会为你工作。

问候

阿西姆·班萨尔

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T00:08:39.387

找到相关性：

启用 NuGet 自动拉取功能后，在大约 15 次构建后，我在 VS 11 上遇到了这个问题。删除 Packages 文件夹并强制重新提取对构建更正的依赖项。

我还注意到，如果我手动清除解决方案根目录中的 obj/bin 文件夹，解决方案就会得到纠正。

因此，我认为这听起来像是测试套件没有使用当前解决方案配置更新缓存的 dll。在我们编辑时，dll 不同步，从而导致单元测试夹具无法启动。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T21:07:56.613

我遇到了这个问题，我在@chrisortman 的评论中尝试了这个建议，它解决了我的问题。

他建议删除： `%appdata%\assembly\dl3`

虽然我在这里找到了它： `%appdata%..\..\Local\dl3`

我快疯了。真是疯了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T10:54:23.680

感谢 Leniel 和 Aseem Bansal 的帮助。

我有类似的问题，但这篇文章的解决方案对我没有帮助，我的 VS 2012 + Silk4net 没有在测试资源管理器中进行负载测试。

在我从我的 PC 中删除 Telerik Test Studio 之前。但是 VS 的扩展名没有被删除。删除此扩展后，我开始正常工作。谁看到问题仍然存在，请查看扩展可能是他们的问题。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T21:14:12.637

还有一点：

```
Environment.ExitCode = 0; 
```

需要在清理过程中添加到每个测试的末尾！我学会了这种艰难的方式。MS 单元测试框架会检查这一点，并且不会使用上一个测试中的非零 ExitCode 运行下一个测试！

这是一个非常好的线程，我在这个线程中解决了几乎所有的单元测试问题。

# java - Java中搜索和排序算法的高效实现

> ID：10159834
> 
> 赞同：3
> 
> 时间：2012-04-15T05:40:28.073
> 
> 标签：java, performance, algorithm, search, sorting

有没有人对一组常见的搜索和排序算法的 Java 代码实现有很好的参考。

给猫剥皮的方法有很多（很容易在网上找到各种算法的 Java 代码），但是是否有 Java 中实现这些各种算法的最有效方法的列表？

例如[http://www.algorithmist.com](http://www.algorithmist.com)，但大多数实现都是在 C/C++ 中。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:07:17.567

我建议查看 Java 标准库源代码本身。

[Collections](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)和[Arrays](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)类具有您可以研究的二进制搜索和二进制排序实现。

这是来自 openjdk 的 Collections.java 的源代码：http: [//www.docjar.com/html/api/java/util/Collections.java.html](http://www.docjar.com/html/api/java/util/Collections.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T05:53:16.140

我发现 Sedgewick 的书“Java 中的算法（第 1-4 部分）”很有用。该代码[可在线获得](http://www.cs.princeton.edu/~rs/Algs3.java1-4/code.txt)，但没有这本书可能很难理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T06:05:53.443

一些用于地图、集合、列表等的标准算法是可用的。您必须[从 Oracle-Java 主页 下载 src.zip](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，它是可用的。

对于常见的用例，算法应该非常有效，但当然，对于每个算法，都需要提供数据的最坏情况。因此，在特殊情况下，您将能够找到或生产更好的产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T05:53:24.250

算法的运行时复杂性与其实现的编程语言无关 - 所以你不应该*太*在意。但是既然你问了，我会考虑使用[grepcode](http://www.grepcode.com)。例如，看看我在搜索“java quicksort”时[发现了什么。](http://grepcode.com/search/?query=java%20quicksort)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-27T09:48:43.057

[https://intelligentjava.wordpress.com/2014/07/05/sorting-algorithms/](https://intelligentjava.wordpress.com/2014/07/05/sorting-algorithms/)对实现和性能比较基准进行了很好的审查。

# java - Oracle中需要重新设置sequence的值

> ID：10159840
> 
> 赞同：7
> 
> 时间：2012-04-15T05:41:29.553
> 
> 标签：java, oracle, spring, hibernate, oracle10g

我正在与 Spring 和 Hibernate 一起使用 Java 开发 Web 应用程序。假设我有一张桌子。当我从这个表中删除一些记录时，有时我需要重置主键字段的值。

假设我在一个表中有 10 条记录，我删除了最后 5 条记录。现在，当我插入新记录时，主键字段的值应该开始于`6`但它会开始于`11`.

`6`如果我需要在MySql中的( )处开始主键值`maximum +1`，我只需要执行下面的SQL语句。

```
alter table table_name auto_increment=1; 
```

这将自动将值重置为该字段的`auto_increment`值`maximum + 1`（在概念上可能不正确，但它有效）。

在 Oracle (10g) 中，我使用`sequence`的是主键。当从数据库中删除某些记录时，Oracle 中有没有办法重置`sequence`to值的值？`maximum + 1`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-15T11:24:07.960

### 如果正在使用，则不应重置该值的原因：

如果您有 20 条记录并删除 5-10 条记录会怎样？您中间有一个间隙，重新设置序列将无法解决。序列[*永远不会*生成无间隙的数字序列](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:530735152441)，即完美的*1, 2 .. n*。

如果您调用`.nextval`并且不使用该值，它就*消失了*。您要删除并重新创建序列吗？如果您开始插入并取消它并且 Oracle[回滚](http://docs.oracle.com/cd/B19306_01/server.102/b14231/undo.htm#sthref1466)您所做的事情，那么这些值就*消失了*。如果您设置`nocache`，那么您将有更少的差距，但会以牺牲性能为代价；这值得么？

您的缓存应设置为您希望[*在所有会话*](http://docs.oracle.com/cd/B19306_01/server.102/b14231/views.htm#i1107995)中的任何时间执行的插入数量，以避免任何性能问题。序列旨在提供一种非常快速、可扩展的方式来创建没有任何锁等的代理键，而*不是*重新生成正整数集。

归根结底，这应该无关紧要。如果您依赖完整的序列作为表的键，那么您的数据而不是序列有问题。

* * *

### 回答问题：

要真正回答您的问题，您需要：

1.  首先，找出表中的最大 id（序列）值是多少。
2.  然后[删除并重新创建序列](http://docs.oracle.com/cd/E14072_01/server.112/e10592/statements_9001.htm#BGECFFGA)。

找到最大值意味着您需要以再次影响性能为代价动态地重新创建序列。

如果您在发生这种情况时尝试将某些内容插入表中，它将失败，并且可能会使使用该序列的任何触发器或其他对象无效：

```
declare

   l_max_value number;

begin

   select max(id)
     into l_max_value
     from my_table;

   execute immediate 'drop sequence my_sequence_name';

   -- nocache is not recommended if you are inserting more than
   -- one row at a time, or inserting with any speed at all.
   execute immediate 'create sequence my_sequence_name
                           start with ' || l_max_value
                      || ' increment by 1
                           nomaxvalue
                           nocycle
                           nocache';

end;
/ 
```

正如我所说，不建议这样做，您应该忽略任何差距。

* * *

### 更新 - 也就是一个更好的答案，感谢[Jeffrey Kemp](https://stackoverflow.com/users/103295/jeffrey-kemp)：

与文档的建议相反，正如 Jeffrey Kemp 在评论中所建议的那样，有一种方法可以在*不*删除和重新创建序列的情况下执行此操作。

即，通过：

1.  `id`计算出表中的最大值与序列的当前值之间的差异。
2.  改变序列以增加这个负数
3.  将序列更改为再次增加 1。

这样做的好处是对象仍然存在，并且触发器、授权等仍然保持不变。在我看来，不利的一面是，如果另一个会话与您的会话同时增加这个负数，您可能会回退太远。

这是一个演示：

### 设置测试：

```
SQL> create sequence test_seq
  2   start with 1
  3   increment by 1
  4   nomaxvalue
  5   nocycle
  6   nocache;

Sequence created.

SQL>
SQL> create table tmp_test ( id number(16) );

Table created.

SQL>
SQL> declare
  2     l_nextval number;
  3  begin
  4
  5    for i in 1 .. 20 loop
  6       insert into tmp_test values ( test_seq.nextval );
  7    end loop;
  8
  9  end;
 10  /

PL/SQL procedure successfully completed.

SQL>
SQL> select test_seq.currval from dual;

   CURRVAL
----------
        20

SQL>
SQL> delete from tmp_test where id > 15;

5 rows deleted.

SQL> commit;

Commit complete. 
```

### 还原序列

```
SQL>
SQL> declare
  2
  3     l_max_id number;
  4     l_max_seq number;
  5
  6  begin
  7
  8     -- Get the maximum ID
  9     select max(id) into l_max_id
 10       from tmp_test;
 11
 12     -- Get the current sequence value;
 13     select test_seq.currval into l_max_seq
 14       from dual;
 15
 16     -- Alter the sequence to increment by the difference ( -5 in this case )
.
 17     execute immediate 'alter sequence test_seq
 18                          increment by ' || ( l_max_id - l_max_seq );
 19
 20     -- 'increment' by -5
 21     select test_seq.nextval into l_max_seq
 22       from dual;
 23
 24     -- Change the sequence back to normal
 25     execute immediate 'alter sequence test_seq
 26                          increment by 1';
 27
 28  end;
 29  /

PL/SQL procedure successfully completed.

SQL>
SQL> select test_seq.currval from dual;

   CURRVAL
----------
        15

SQL> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T14:09:07.997

以下也有效（将您的序列值增加 100）：

```
select my_sequence.nextval from dual connect by level <= 100; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-15T06:30:09.467

参考 Oracle 的[ALTER SEQUENCE](http://docs.oracle.com/cd/E14072_01/server.112/e10592/statements_2012.htm)文档，

*   要以不同的编号重新启动序列，您必须删除并重新创建它。

您需要传递主键列的当前最大值来生成下一个序列号。
如果您继续删除一些最新的记录，并且想要重用已经生成的序列值，您可能需要一次又一次地重新启动该序列。如果服务器在序列准备好服务之前收到对下一个值的请求，则删除序列可能会导致 SQLException。

您还可以在[此处](http://www.cs.kent.edu/~wfan/link/dbapre/dbatest/54904f.htm#_Toc418313120)找到有关 Oracle 序列的一些有用说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T01:56:35.313

这个技巧对我有用。在我的序列（USERSUTPL_USERUTPL_SQ）中，最后一个数字是 53。我表中的最后一个 id 是 83

```
SELECT MAX(ID) FROM USERSUTPL_USERUTPL 
```

然后 83 - 53 = 31。所以：

```
ALTER SEQUENCE USERSUTPL_USERUTPL_SQ INCREMENT BY +31;
SELECT USERSUTPL_USERUTPL_SQ.NEXTVAL FROM dual;
ALTER SEQUENCE USERSUTPL_USERUTPL_SQ INCREMENT BY 1; 
```

它改变了最后一个数字。:D

# c++ - 尝试退出循环时 Ctrl+Z 不起作用

> ID：10159843
> 
> 赞同：1
> 
> 时间：2012-04-15T05:41:57.610
> 
> 标签：c++, class, exit, eof, do-loops

我正在尝试使用`Ctrl`+退出循环`Z`，但它不起作用。我仔细查看了我的代码，但我无法找出问题所在。您的帮助将不胜感激。我正在使用 Dev-C++。代码如下：

```
#include <iostream>
#include<conio.h>

using namespace std;

class student 
{
  private:
   string name;
   int age;
   double GPA;
  public:

   void read ();

};

void student::read()
{
  do
   {   //enter student data
     cout << "Name:  " ;
     cin>>name;
     cout<<"Age:  ";
     cin>>age;
     cout << "GPA:  ";
     cin>>GPA;

    cout<<"\n\n  any key to continue or Ctrl+Z to exit."<<endl<<endl;
   }
   while(getch()!=EOF);  //Ctrl+Z to exit
}

int  main()
{
  student stud;
  stud.read();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:58:51.673

控制台不是文件。控制台不会结束。控制台不可能有文件结尾。

我认为您忘记了您使用的是控制台 I/O ( `conio.h`/ `getch`)，而不是文件 I/O ( `stdio.h`/ `getchar`)。无论您在想什么`EOF`，这都不是控制台 I/O 的事情。我找不到任何建议可以返回的文档，*据*`getch`我所知，这没有任何意义。*`EOF`*

 *如果你想检查一个 Control-Z，你可以。它是十进制 26 或`0x1A`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T07:07:04.857

您正在将 Windows 控制台 I/O 与 C++ 流 I/O 混合使用。套用[Gary Larson](http://www.flickr.com/photos/teckelcar/4286543145/)的话说，你在玻璃容器中混合了不相容的物种。

尝试仅使用 C++ 结构，如下所示：

```
std::cout << "Enter name, age, GPA; or CTRL-Z to exit\n";
while ( cin >> name >> age >> GPA )
{
  // do something with one set of input
} 
```

或者，如果你想保持你的 do-while 格式：

```
do
{   //enter student data
  cout << "Name:  " ;
  if( !cin>>name ) break;
  cout<<"Age:  ";
  if( !cin>>age) break;
  cout << "GPA:  ";
  if( !cin>>GPA) break;
}
while(cin);  //Ctrl+Z to exit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:53:03.090

如果您使用的是 unix 派生编译器，请尝试`ctrl`- `D`。我对 Dev-C++ 不是很熟悉，但是当我查找它时，它说了一些关于 MinGW 的信息。*

# java - hibernate 被拒绝连接非默认 mysql 端口

> ID：10159846
> 
> 赞同：5
> 
> 时间：2012-04-15T05:43:27.370
> 
> 标签：java, mysql, spring, hibernate

我正在默认 3306 端口上从 Linux 连接到 MySQL（5.1.6）数据库，一切都很好：

```
<property name="driverClassName" value="com.mysql.jdbc.Driver" />
<property name="url" value="jdbc:mysql://localhost:3306/wpdb" />
<property name="username" value="root" />
<property name="password" value="" /> 
```

现在，我进入 /etc/mysql/my.cnf 并将默认端口更改为 3307（[client] 和 [mysqld]）重新启动 MySQL，调整休眠连接 url：

```
<property name="driverClassName" value="com.mysql.jdbc.Driver" />
<property name="url" value="jdbc:mysql://localhost:3307/wpdb" />
<property name="username" value="root" />
<property name="password" value="" /> 
```

并重新启动jboss。这次我无法再连接：

```
08:22:05,276 WARN  [org.hibernate.util.JDBCExceptionReporter] (MSC service thread 1-13) SQL Error: 0, SQLState: 08S01
08:22:05,276 ERROR [org.hibernate.util.JDBCExceptionReporter] (MSC service thread 1-13) Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
08:22:05,277 WARN  [org.hibernate.cfg.SettingsFactory] (MSC service thread 1-13) Could not obtain connection to query metadata: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.6.0_26]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [rt.jar:1.6.0_26]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_26]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_26]
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2209) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:776) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:46) [mysql-connector-java-5.1.9.jar:]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.6.0_26]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [rt.jar:1.6.0_26]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_26]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_26]
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:352) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:284) [mysql-connector-java-5.1.9.jar:]
    at java.sql.DriverManager.getConnection(DriverManager.java:582) [rt.jar:1.6.0_26]
    at java.sql.DriverManager.getConnection(DriverManager.java:154) [rt.jar:1.6.0_26]
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173) [spring-jdbc-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164) [spring-jdbc-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149) [spring-jdbc-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119) [spring-jdbc-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81) [spring-orm-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:114) [hibernate-core-3.5.1-Final.jar:3.5.1-Final]
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163) [hibernate-core-3.5.1-Final.jar:3.5.1-Final]
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159) [hibernate-core-3.5.1-Final.jar:3.5.1-Final]
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1383) [hibernate-core-3.5.1-Final.jar:3.5.1-Final]
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954) [hibernate-annotations-3.5.1-Final.jar:3.5.1-Final]
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860) [spring-orm-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779) [spring-orm-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211) [spring-orm-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:400) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:275) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139) [spring-tx-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79) [spring-tx-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70) [spring-tx-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103) [spring-tx-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:728) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26]
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.6.0_26]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [rt.jar:1.6.0_26]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_26]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_26]
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:343) [mysql-connector-java-5.1.9.jar:]
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2132) [mysql-connector-java-5.1.9.jar:]
    ... 59 more
Caused by: java.net.ConnectException: Connection refused 
```

知道mysql拒绝连接的原因是什么吗？没有更改其他配置..但是 MySQL 默认端口。也没有防火墙启动和运行。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T11:35:19.020

我也遇到过同样的问题。最好更改另一个版本的jdbc mysql驱动程序。因为当我使用mysql 5.1.9驱动程序时，它会引发连接被拒绝（最后一个成功发送到服务器的数据包是0毫秒前。驱动程序有没有收到来自服务器的任何数据包。）问题然后我切换了另一个版本，如 5.1.18 它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:19:15.880

首先，您可以检查可以运行的服务器中使用了哪些选项：

```
 mysqld --verbose --help 
```

停止服务

```
 sudo service mysql stop 
```

应该更改的选项是 [mysqld] 部分中的端口，正如您之前所说，在 /etc/mysql/my.cnf 上，但请确保文件“~/.my.cnf”（如果存在）不覆盖端口。无论如何，想法是设置端口，如下所示：

```
 port            = 3307 
```

最后再次启动 MySQL 服务，当然还有 JBoss。

```
 sudo service mysql start 
```

使用 mysqld --verbose --help 检查端口，看看是否一切都如您所愿。

另一方面，您可以使用一些客户端应用程序和相同的连接器 jar 来测试连接。即：SQuirrel，并在对应的lib目录下对应库。当我遇到这样的问题时，这对我很有帮助。

我希望这有帮助。

# c# - Tridion 2009 - 使用互操作 - 是否有可能为同名添加多个 setConditions

> ID：10159849
> 
> 赞同：6
> 
> 时间：2012-04-15T05:44:41.740
> 
> 标签：c#, tridion, tridion2009

我被小问题困住了。

我想为**PublicationTarget的****同名**添加多个 setConditions 。这是使用互操作 dll。

 **```
ListRowFilter rowFilter = mTDSE.CreateListRowFilter();
rowFilter.SetCondition("StartDate", sDate);
rowFilter.SetCondition("EndDate", eDate);
rowFilter.SetCondition("PublicationTarget", pubStgTarget); 
```

为此`PublicationTarget`，我想使用暂存和实时目标进行过滤，我尝试了所有方法但没有用。

```
rowFilter.SetCondition("PublicationTarget", pubStgTarget); 
```

请建议，
1.通过 xis 可能，最好的实现方法是什么？

我尝试了这种方法，但没有运气；-

```
rowFilter.SetCondition("PublicationTarget", "tcm:0-1-65537"); // Gives only staging
rowFilter.SetCondition("PublicationTarget", "tcm:0-2-65537"); // Gives only Live
rowFilter.SetCondition("PublicationTarget", "tcm:0-1-65537|tcm:0-1-65537"); // No result
rowFilter.SetCondition("PublicationTarget", oPubList); // No result - `oPubList` is a 
```

`List<string>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T08:15:05.377

不，不幸的是这是不可能的。如果要加一个条件`PublicationTarget`，就必须只给**一个** `PublicationTarget`。

但是有两种解决方法：

1.  创建两个`RowFilters`并在每个中设置不同的`PublicationTarget`条件。然后您将发出两次查询（每个过滤器一次）。这意味着您需要处理 2 个 XML 结果节点。

2.  执行时不要使用`PublicationTarget`条件`GetListPublishTransactions()`。然后，您将返回一个包含所有记录的 XML 元素`PublicationTargets`。在您的代码中，您将只过滤您感兴趣的那些（例如*Staging*或*Live*）。

我可能会使用#2（除非我知道发布队列可能会返回大量记录，在这种情况下，我会使用#1）。

#2 的示例代码：

```
tdse = new TDS.TDSEClass();
tdse.Impersonate(user.Title);
tdse.Initialize();

mgtInfo = tdse.GetManagementInfo();
filter = tdse.CreateListRowFilter();

filter.SetCondition("InfoType", 2); // InProgress
filter.SetCondition("Publication", "tcm:0-23-1");

XmlDocument dom = new XmlDocument();
dom.LoadXml(mgtInfo.GetListPublishTransactions(filter));

XmlNamespaceManager namespaceManager = new XmlNamespaceManager(new NameTable());
namespaceManager.AddNamespace("tcm", "http://www.tridion.com/ContentManager/5.0");

String xPath = String.Format(
    "tcm:ListPublishTransactions/tcm:Item[@PublicationTarget='{0}'] | " +
    "tcm:ListPublishTransactions/tcm:Item[@PublicationTarget='{1}']",
    stagingTcmUri, liveTcmUri);
XmlNodeList nodeList = dom.SelectNodes(xPath, namespaceManager);

foreach (XmlNode node in dom.DocumentElement.ChildNodes) {
    //do your thing
} 
```

***注意：***仔细检查 XPath 表达式，我还没有实际测试过那个位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T07:58:18.770

```
Public Function GetListPublishTransactions( Optional ByVal rowFilter As TDS.ListRowFilter ) As String 
```

GetListPublishTransactions 方法接受以下条件作为过滤器的一部分：

*   InfoType (string) (ScheduledForPublish 0, WaitingForPublish 1, InProgress 2, ScheduledForDeployment 3, WaitingForDeployment 4, Failed 5, Success 6) (全部省略)
*   StartDate (dateTime) 仅返回此日期之后的项目
*   EndDate (dateTime) 仅返回此日期之前的项目
*   用户（字符串）只返回用户的项目
*   Publication (string) 仅返回此发布的项目
*   PublicationTarget (string) 仅返回此发布目标的项目

条件不能多次使用。

您可能需要多次调用 TOM API 才能获得所需的结果？**

# java - Java - 将类的引用传递给另一个类

> ID：10159850
> 
> 赞同：0
> 
> 时间：2012-04-15T05:44:46.557
> 
> 标签：java, oop

我对 java 还很陌生。这参考了[将类的引用传递到另一个类](https://stackoverflow.com/questions/4717953/passing-reference-of-class-to-another-class)。有人可以用现实生活中的例子来解释 AedonEtLIRA 的回复吗？真的很混乱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:58:19.233

这是相关答案中示例的更具体版本：

```
class Door {
    public Door() {
        Doorknob knob = new Doorknob(this); 
    }
}

class Doorknob {
    public Doorknob(Door creator) {...}
} 
```

在这里，创建门创建了一个门把手，门把手知道创建它的门。

我认为原始示例最令人困惑的是他将类命名为“ClassA”和“ClassB”，这听起来像是这些类代表类。这里没有“将类的引用传递给另一个类”，而是将对一个类的实例的引用传递给另一个类的实例的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:58:09.233

正如您在提供的链接中看到的那样，已经有一个选择的答案。如果你不明白，问题不是java，而是类。学习面向对象设计，可以搜索java面向对象教程。或者你可以从这里开始 [http://docs.oracle.com/javase/tutorial/java/concepts/](http://docs.oracle.com/javase/tutorial/java/concepts/)

# php - 跟进字段 php/html 表单

> ID：10159854
> 
> 赞同：0
> 
> 时间：2012-04-15T05:46:12.083
> 
> 标签：php, select, option

我正在尝试为选择下拉菜单创建后续字段。

例如，在第一个下拉菜单中，我有（'yes' => 1，'no' => 2，'nothing' => 3）。我希望在我点击选择其中一个选项后更改随后出现的字段。例如：如果我选择“是”，则后面的字段将是一个选择下拉菜单，如果不是，它将是一个文本区域，如果没有，它将什么都不是。

我为自己尝试了一些代码，但没有成功，因为我不知道如何在选择某些内容后立即更新以下字段。我试过这样的事情：

```
if (select == 1) {
    echo "$select2";
} else if (select == 2) {
    echo "<input type='text' name='textarea1'/>";
}​ 
```

但我不知道如何使页面更新字段...

请帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:27:24.740

这个想法是，您想使用 JavaScript 根据上一个问题的答案来显示/隐藏问题。这称为[决策树](http://en.wikipedia.org/wiki/Decision_tree)。如果你[谷歌它](https://www.google.com/search?q=javascript%20decision%20tree)，他们会来的。您可以找到一堆示例和库来为您完成大部分繁重的工作。

如果你想建立自己的，这里有一种**非常**简单的方法。这不是一个可扩展的解决方案，但它应该让您了解它应该如何工作的基本概念。

### HTML

```
<label>Do you want this?
    <select name="choices" id="choices">
        <option value="1">Yes</option>
        <option value="2">No</option>
        <option value="3" selected>Nothing</option>
    </select>
</label>
<div id="choices-followup">
    <div id="followup1">
        <label>
            How bad do you want this?
            <select>
                <option>Give it to me now!</option>
                <option>Meh...</option>
            </select>
        </label>
    </div>
    <div id="followup2">
        <label>Why not?<br />
            <textarea></textarea>
        </label>
    </div>
</div>​ 
```

### JavaScript

```
// Whenever the user changes the value of
// the element with ID "choices", perform
// this function.
$('#choices').on('change', function() {

    // Grab the choice value
    var choice = $(this).val();

    // Cache the "choices-followup" object.
    // Every time to you call $('anything'), jQuery
    // goes through the entire DOM looking for that
    // object. Prevent this by making the lookup
    // once, and caching the value.
    var choices_followup = $('#choices-followup');

    // No matter what the choice, hide all possible
    // follup fields.
    $('div', choices_followup).hide();

    // Also, reset their values.
    $('select, textarea, input', choices_followup).val('');

    // If this, then that, etc.
    switch(choice) {
        case '1':
            $('#followup1').show();
            break;
        case '2':
            $('#followup2').show();
            break;
    }
});​ 
```

### CSS

```
#choices-followup > div { display: none; }​ 
```

# php - Jquery ajax php 需要帮助请

> ID：10159857
> 
> 赞同：3
> 
> 时间：2012-04-15T05:46:32.657
> 
> 标签：php, jquery, ajax, dynamic

我正在为我的大学最后一年项目创建一个网站，但我在一件看似很小的事情上遇到了真正的问题。

我正在使用 php 创建一个带有动态链接的论坛表，其中包含以下代码；

```
<td bgcolor="#FFFFFF"><? echo $rows['id']; ?></td>
<td bgcolor="#FFFFFF"><a id="viewTopic.php?id=<? echo $rows['id']; ?>" href="viewTopic.php?id=<? echo $rows['id']; ?>"><? echo $rows['topic']; ?></a><BR></td> 
```

我想使用 jquery 以 div ajax 样式打开上表中的链接。我已经使用此代码通过其他链接成功完成了此操作；

```
$("#forum").click(function(){

        $("#subConList").html(loadAni).load('mainForum.php');       
    }); 
```

由于表格链接的 href 中使用了 php，我不知道如何执行此操作。花了几个小时试图解决这个问题。任何帮助建议将不胜感激。

谢谢

我将标签更改为按钮，如下所示

```
<button id="topic<? echo $rows['id']; ?>" href="viewTopic.php?id=<? echo $rows['id']; ?>"><? echo $rows['topic']; ?></button> 
```

这是我用来尝试将内容加载到#subConList Div 的jquery。

```
$(document).ready(function(){
$("#topic<?php echo $rows['id']; ?>").click(function(){

        $("#subConList").html(loadAni).load('viewTopic.php?id=<?php echo $rows['id']; ?>');     
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T05:58:30.897

您还可以使用jquery[的 post](http://api.jquery.com/jQuery.post/)功能：

```
$("#forum").click(function(e){
e.preventDefault(); //Just to prevent page refreshing on link click
$.post('viewTopic.php', { id : 45 } function(data) {

   $("#subConList").html(data);
});
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T05:51:39.277

你的意思是这样的：

```
 $(document).ready(function() {
  $("a").click(function(e) {
     e.preventDefault();
     $("#yourContainerDivId").load($(this).attr("href"));
  });
}); 
```

# html - 执行此 HTML 的正确方法是什么：带有链接图标的标题

> ID：10159858
> 
> 赞同：0
> 
> 时间：2012-04-15T03:35:43.643
> 
> 标签：html

我知道如何使这些示例看起来和行为相同。但我想知道哪种方法是构建 HTML 结构的*正确方法。*

1.  `<a><img><h1></h1></a>`- 看起来不对，因为内联元素在块元素内

2.  `<a><img></a><h1><a></a></h1>`- 相同的`a`元素被定义了两次。我也不确定标头内的标记

3.  还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:51:36.293

根据 HTML5 草案（并被浏览器接受），标记 (1) 有效，但当前的 HTML 规范无效。如果两个链接指向同一个目的地，则标记 (2) 违反了可用性和可访问性原则。以下标记很自然，仅使图像和标题文本可点击（不是`h1`默认情况下占据可用宽度的整个元素）：

```
<h1><a href=...><img src=... alt=...>Heading text</a></h1> 
```

标题内始终允许链接，但反之则不然。

另一方面，很少有充分的理由让标题可点击，我想知道为什么图像在那里。如果你的意思是这应该是一个*标题*，一个整体的网站标题，而不是一个*标题*，如果图像实际上是一个公司徽标，那么适当的标记宁愿是这样的

```
<div class=header><a href="/"><img alt=ACME src=acme-logo.png> – American Company
Manufacturing Everything</a></div> 
```

（保留`h1`整个*页面*标题）。

# javascript - 在 html5 下的浏览器中无法播放动画 gif

> ID：10159861
> 
> 赞同：1
> 
> 时间：2012-04-15T05:47:16.197
> 
> 标签：javascript, html, html5-canvas, animated-gif

我正在尝试将动画 gif 添加到 html5 画布对象。问题是一旦添加它就不会播放并停留在第一帧。我已经在 Chrome 和 Firefox 中测试了 HTML5 文档，并且出现了同样的问题。我已经在 Chrome 和 Firefox 中打开了 gif，以确保它正在运行动画并且运行良好，只是不在 HTML5 画布对象中......

这是代码：

```
<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="200" height="100" style="border:1px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>

<script type="text/javascript">
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
var img=new Image();
img.onload = function(){
ctx.drawImage(img,0,0);
};
img.src="enemy1.gif";
</script>
</body>
</html> 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T05:56:53.327

你不能，因为画布没有提供任何处理动画 gif 的方法。您应该将 gif 拆分为单个帧，然后创建一个 spritesheet 并为其复制当前帧设置动画。

信用：[https ://stackoverflow.com/a/9278770/283863](https://stackoverflow.com/a/9278770/283863)

精灵表是什么样的？它看起来像这样：
![在此处输入图像描述](../Images/646cb0e07be4a5f34405759c0d7c0be9.png)

# asp.net - 如何获取在asp.net中动态加载的控件的值

> ID：10159863
> 
> 赞同：1
> 
> 时间：2012-04-15T05:47:43.020
> 
> 标签：asp.net, asp.net-controls

在我的页面中，我动态加载了一些控件。

**在页面中**

```
<asp:DropDownList runat="server" OnSelectedIndexChanged="onchanged"></asp:DropdownList>
<asp:PlaceHolder id="placeholder" runat="server"> 
```

**在 Page.aspx 中：**

```
public void onchanged(object sender,EventArgs e){
  Control c=loadControl('part.ascx');
  this.placeholder.Controls.Add(c);
} 
```

现在，然后这个页面被提交，我想获取'part.ascx'中控件的值，但我无法获取它。

问题是什么？

# ios - iOS后台队列两次检索数据？

> ID：10159869
> 
> 赞同：0
> 
> 时间：2012-04-15T05:49:53.627
> 
> 标签：ios, xcode, parsing, grand-central-dispatch

我正在尝试提高我的应用程序的响应能力，在查看调试器控制台时，我注意到该应用程序似乎两次检索 XML 数据。. . 也就是说，当页面出现时，我调度一个后台队列去获取一些 xml 数据，解析它，并返回一个对象数组。我使用 nslog 在控制台中输入数据字符串，并且由于某种原因它打印了两次。这是我的相关代码：

在 VC 中：

```
-(void)startBackgroundQueue{
dispatch_async(backgroundThread, ^(void){
    SDJConnection *connection = [[SDJConnection alloc]init];
    self.dataArray = [connection getVideoData];

    [[NSNotificationCenter defaultCenter]postNotificationName:@"tube_data_loaded" object:nil];
    });
} 
```

SDJConnection 中的 getVideoData 方法如下所示：

```
-(NSMutableArray *)getVideoData {

NSURL *dataURL = [[NSURL alloc]initWithString:@"https://gdata.youtube.com/feeds/api/users/dancingastronaut/uploads?start-index=1&max-results=10"];
NSData *data = [[NSData alloc]initWithContentsOfURL:dataURL];

NSString *dataString = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"data string: %@",dataString);

YouTubeParser *parser = [[YouTubeParser alloc]initWithData:data];
[parser setDelegate:parser];

[parser parse];

    return [parser videosArray];

} 
```

然后VC执行以下代码：

```
-(void)backgroundQueueDone{
dispatch_async(dispatch_get_main_queue(),^(void){
    [activityIndicator stopAnimating];
    if ([_dataArray count] >1) {
        self.tableView.separatorColor = [UIColor darkGrayColor];
        [self.tableView reloadData];}                
});
} 
```

我不确定这是否是一个问题，但我担心我以某种方式运行两次会浪费资源。关于可能发生的事情有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:40:03.680

您有可能两次调用您的方法“startBackgroundQueue”吗？在我的拙见中，该块将被执行一次。

以及为什么要使用通知来获取阻止的结果？您可以使用嵌套块，例如：

```
dispatch_async(backgroundThread, ^(void){
    SDJConnection *connection = [[SDJConnection alloc]init];
    self.dataArray = [connection getVideoData];

    dispatch_async(dispatch_get_main_queue(),^(void){
        [activityIndicator stopAnimating];
        if ([self.dataArray count] >1) {
            self.tableView.separatorColor = [UIColor darkGrayColor];
            [self.tableView reloadData];}                
    });
}); 
```

这样可以为您节省完整的通知；）

# php - 如果只读且未选中，如何获取复选框值

> ID：10159871
> 
> 赞同：0
> 
> 时间：2012-04-15T05:50:22.153
> 
> 标签：php, html

我有几个复选框

```
foreach ($result as $set){ 
    if ($set['Req']=='0')
    ?><input type="checkbox" name="select[]" value="1"> 
    <?else?>
    <input type="checkbox" name="select[]" value="1" checked READONLY DISABLED>?>
} 
```

> 如果 req!= 0 ，该复选框将是只读的并且必须选中。如果没有，允许用户检查或不检查

假设生成了四个复选框

```
checkbox1 : readonly
checkbox2 : select 
checkbox3 : not select
checkbox4 : readonly 
```

目前 select[] 只有 {1} 因为， readonly / not checked 不会发布 value 。如何获得 {1,1,0,1} 的 select[] ？谢谢

**`select[] = 0` 更新：如果用户没有选中该框，我怎么知道哪个复选框没有被选中并添加？**

我能想到的一种方法是在这种情况下我得到数组的总长度=4，我现在可以得到它

但问题是我怎样才能将它添加到正确的位置？

```
currently i have select[] = {1,1,1} and $len=4; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:58:34.390

您可以执行以下操作，而不是禁用复选框：

```
<input type="checkbox" name="select[]" value="0" style="display:none;"> 
```

...或者试试这个...

```
<input onfocus="this.blur();" type="checkbox" name="select[]" value="0"> 
```

...或这个...

```
//this function returns True if a given field is checked
function isChecked($chkname,$value){
        if(!empty($_POST[$chkname])){
            foreach($_POST[$chkname] as $chkval){
                if($chkval == $value){
                        return true;
                }
            }
        }
        return false;
    }

$checkboxValues = array(
        array('milk','required'),
        array('bread','not-required'),
        array('juice','required')
    );

$submittedValues = array();

foreach($item in $checkboxValues){
    if(isChecked('select', $item)){
        array_push($submittedValues, 1)
    }else{
        array_push($submittedValues, 0)
    }
} 
```

在您的 HTML 表单中...

```
foreach ($checkboxValues as $chkVals){ 
    if ($chkVals[1]=='required')
    ?>
            <input type="checkbox" name="select[]" value="<?=$chkVals[0];?>"> 
    <?else?>
            <input type="checkbox" name="select[]" value="<?=$chkVals[0];?>" checked READONLY DISABLED>
        ?>
} 
```

为了使它起作用，**每个选项值必须是不同的/唯一的**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:46:19.793

给每个复选框一个明确的索引可能更容易：

```
<input type="checkbox" name="select[1]" value="1" />
<input type="checkbox" name="select[2]" value="1" />
<input type="checkbox" name="select[3]" value="1" />
<input type="checkbox" name="select[4]" value="1" /> 
```

并检查在提交的表单中设置了哪些索引`isset`。未选中/禁用的复选框不会出现在提交的表单中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T07:03:23.750

试试这个：

```
<form name="myform" action="" method="post">

    <input type="hidden" name="select[1]" value="">
    <input type="checkbox" name="select[1]" value="1" checked readonly> 

    <input type="hidden" name="select[2]" value="">
    <input type="checkbox" name="select[2]" value="1"> 

    <input type="hidden" name="select[3]" value="">
    <input type="checkbox" name="select[3]" value="1" checked readonly>

    <input type="hidden" name="select[4]" value="">
    <input type="checkbox" name="select[4]" value="1">
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T05:59:03.250

您需要使用 javascript 将表单中的隐藏字段设置为您想要的值，因为禁用字段不会在请求中发送。

# ruby-on-rails - Apache 和乘客上的 Rails 应用程序

> ID：10159872
> 
> 赞同：2
> 
> 时间：2012-04-15T05:50:47.920
> 
> 标签：ruby-on-rails, apache, passenger

我有一个 Rails 3.0.7 应用程序，它在 Webrick 下的 Windows 7 机器上的开发模式下运行良好。

我开始将它移动到基于 ESX 4.2、CentOS 6.2、Apache 2.2.15、Ruby 1.9.3p125、Rails 3.2.3 和乘客 3.0.11 和 mysql 14.14 的生产主机上。各种安装似乎都很干净。捆绑安装很干净，我跑了`bundle exec rake db:migrate`它也跑干净了。

我是 Apache/passenger/rails 环境的新手，可能不明白如何正确配置所有这些。我已经阅读了很多关于这个问题的帖子，并按照这些想法取得了一些进展，但我仍然有一个错误。据我了解，如果您将`vituralhost`块添加到 Apache 配置文件中，它应该会启动`passenger`并且发现 rails 应用程序和生活应该很快乐，但事实并非如此。

在`VituralHost`块中，我确实在路径的尽头有 public`DocumentRoot`和`Directory`; 选项包括：

全部允许 AllowOverride all Options -MultiViews

从 Win7 主机上的 firefox 输入`172.16.2.226`并获得：

```
Ruby (Rack) application could not be started
These are the possible causes:

    There may be a syntax error in the application's code. Please check for such errors and fix them.
    A required library may not installed. Please install all libraries that this application requires.
    The application may not be properly configured. Please check whether all configuration files are written correctly, fix any incorrect configurations, and restart this application.
    A service that the application relies on (such as the database server or the Ferret search engine server) may not have been started. Please start that service.

Further information about the error may have been written to the application's log file. Please check it in order to analyse the problem.

Error message:
   git://github.com/mark-moseley/linecache (at master) is not checked out. Please run `bundle install` (Bundler::GitError)
Exception class:
    PhusionPassenger::UnknownError
Application root:
    /var/www/html/Scarfs 
```

我确实有 gem 行`linecache19`，`ruby-debug-base19`并且`ruby-debug19`在 Gemfile 中。我有一种感觉，各种版本一起玩不好？我担心线路缓存错误和`linechace19`Gemfile 中的指定？但我需要`linecache19`解决一个不同的问题。

我也尝试过停止`httpd`服务并`passenger`在独立模式下运行：

```
passenger start -a 172.16.2.226 -p 80 -d -e development 
```

我收到相同的“无法启动乘客”错误。

如果我将端口更改为 3000，我会`502 Bad Gateway`在 Firefox 中收到错误消息。

有人知道我哪里出错了吗？

# memory - 请求分页交换帧

> ID：10159877
> 
> 赞同：0
> 
> 时间：2012-04-15T05:52:17.903
> 
> 标签：memory, operating-system, paging, virtual-memory

免责声明：这个问题与我的操作系统类有关。但是，它不适用于任何特定的家庭作业问题。我只是想理解。

到目前为止，这是我认为我对需求分页的了解。每个进程都有自己的分页表。该表包含逻辑地址的索引、其对应的物理地址以及指示页面当前是否加载到主存储器中的有效/无效位。

当一个页面被访问时，如果有效/无效位被设置为有效，那么该页面只是通过表中的逻辑地址条目在主存储器中访问。如果页面不包含在物理内存中，则会产生页面错误。这会导致程序尝试将页面加载到内存中。

系统首先检查请求的地址是否有效。如果不是，则终止该过程。如果地址有效，则系统检查空闲帧。如果找到空闲帧，则系统从磁盘加载请求的数据并将其放置在空闲帧中。将分页表中的有效/无效位设置为有效，将逻辑地址设置为之前的空闲帧，程序可以继续执行。

如果不存在空闲帧，则系统必须换出当前使用的帧并将请求的数据放入帧中。系统采用LRU、MRU等算法来确定换出哪一页。系统换出旧页面，加载新页面，然后将控制权返回给进程。

**这是我的问题**：当整个帧被换出时，如何设置访问该帧的分页表的有效/无效位？也就是说，系统如何知道进程的页表访问了正在被换出的帧？

这是一个例子。假设有两个进程，每个进程都有大小为 2 的分页表和大小为 2 的物理内存。让进程的分页表如下：

进程A虚拟内存：

```
Address  Contents
0        'A'
1        'B' 
```

进程B虚拟内存：

```
Address  Contents
0        'C'
1        'D' 
```

处理一个分页表：

```
Logical  Physical  Valid/Invalid
0        0         Valid
1        0         Invalid 
```

进程B分页表：

```
Logical  Physical  Valid/Invalid
0        1         Valid
1        0         Invalid 
```

主内存：

```
Address  Contents
0        'A'
1        'C' 
```

现在假设进程 A 尝试访问其 B 的逻辑地址。系统将主存储器地址 1 的内容换出并换入“D”。系统如何知道将Process的B分页表中逻辑地址0的有效/无效位设置为无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:47:02.180

在页表本身或操作系统内核的其他地方有更多的控制字段来区分根本没有映射的内存范围（从未分配/映射或已释放/取消映射）和指向的内存范围已被换出的内存位置。在这两种情况下，都无法访问范围，并且访问会导致页面错误，但在这些情况下，操作系统会以不同的方式处理此页面错误。在前者中，它终止该过程。在后者中，它尝试将数据带回内存并将映射恢复到可以访问数据的状态。

操作系统知道物理内存的页面在哪里使用。它要么扫描页表以找出答案，要么查阅它自己维护的数据结构。如果操作系统需要从进程中窃取页面，它会保存它（如果它已被修改），它会更改映射，以便进程在没有操作系统干预的情况下无法再直接访问该页面，然后在其他地方重用该页面，例如在通过用正确的数据填充它并适当地映射它，以便进程可以访问数据，从而实现不同的进程。

# php - PHP：获取变量中每个单词的当前完整url和href

> ID：10159880
> 
> 赞同：0
> 
> 时间：2012-04-15T05:53:13.667
> 
> 标签：php, html

```
<?php

    $test = 'Ontario, Montreal, Quebec';

?> 
```

我如何用单个变量的页面当前完整 url 来引用这样的每个单词，但要单独引用多个单词。

```
<a href="http://www.domain.com/canada">Ontario</a> <a href="http://www.domain.com/canada"> Montreal</a> <a href="http://www.domain.com/canada"> Quebec</a> 
```

[安大略](http://www.domain.com/ontario) [蒙特利尔](http://www.domain.com/montreal) [魁北克](http://www.domain.com/quebec)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T05:59:13.810

这是 的一个简单应用[`explode`](http://php.net/manual/en/function.explode.php)，它根据分隔符将字符串拆分为多个子字符串，在本例中为“,”。

```
$test = "Ontario, Montreal, Quebec";
$words = explode(", ", $test);
foreach ($words as $word) {
    echo "<a href='http://www.domain.com/" . $_SERVER["REQUEST_URI"] . "'>$word</a>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:31:55.870

取自**@jli**，稍作修改。

```
<?php
$test = "Ontario, Montreal, Quebec";
$words = explode(",", $test);
array_walk($words,"trim");

foreach ($words as $word) {
    echo "<a href='http://www.domain.com/{$word}'>$word</a>";
}
?> 
```

# django - 如何在 Django 中处理日期？

> ID：10159887
> 
> 赞同：1
> 
> 时间：2012-04-15T05:54:17.980
> 
> 标签：django, django-models

我正在使用 jquery datepicker 在搜索表单上以“dd/mm/yyyy”格式向用户显示日期。我的目标受众是英国人。但是，当我尝试使用此日期对具有 DateField 的模型进行查询时，我得到了这个异常

```
Enter a valid date in YYYY-MM-DD format. 
```

那么，我应该如何处理这种情况呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T06:06:09.050

你有两个选择。

使用[`form.DateField`](https://docs.djangoproject.com/en/dev/ref/forms/fields/#datefield)- 将标准化为您可以直接在查询中使用的日期时间对象。只需将 jquery 对象分配给日期字段：

```
<script type="text/javascript">
 $(function() {
        $("#id_MyDateField").datepicker({ dateFormat: 'dd/mm/yy' });

 });
</script> 
```

手动转换日期：

```
form_date = request.GET.get('the_date',datetime.datetime.now()) # defaults to now
db_date = datetime.datetime.strptime(form_date,'%d/%m/%y') 
```

然后`db_date`在您的查询中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:56:28.467

以 YYYY-MM-DD 格式输入有效日期。

换句话说，将日期从一种格式转换为另一种格式。

# c# - .NET 会为列表分配内存吗？

> ID：10159888
> 
> 赞同：0
> 
> 时间：2012-04-15T05:54:52.587
> 
> 标签：c#

如果我实例化 Employee 类的五个对象：emp1,emp2.​​..emp5 并将它们放在 IList 的 listA 中。现在，如果我创建另一个包含 listA 子集的 IList listB，例如

```
IList<Employee> listB = listA.Take(3).ToList() 
```

listB 中的 Employee 对象是否引用了 listA 中的同一个 Employee？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T05:57:07.550

是的，需要注意的是`.Take`不会创建`IList`. 如果您写了`listA.Take(3).ToList()`，那么您对结果的描述（包含对相同对象的引用的列表）将是准确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T06:01:52.570

我不确定你是否可以这样做；您将需要创建一个新列表并将项目添加到其中 - 这意味着它将是一个副本。您认为也可以通过使用 .ToList() 来做到这一点

# css - 糟糕的 CSS 背景动画

> ID：10159891
> 
> 赞同：1
> 
> 时间：2012-04-15T05:55:21.043
> 
> 标签：css, animation, webkit, parallax, css-animations

所以我今天一直在为我正在开发的应用程序制作一个简单的启动页面

我想使用一些 css 动画来放置移动背景（视差），如下所示
[http://css-tricks.com/parallax-background-css3/](http://css-tricks.com/parallax-background-css3/)

我通过 webkit animate 函数在关键帧配置中使用了背景位置移动

这是一个样本

```
#BigWrapper{
    -webkit-animation-name: MOVE;
        transform: translate3d(0, 0, 0);
        -webkit-transform: translate3d(0, 0, 0);
        -webkit-animation-duration: 250s;
        -webkit-animation-timing-function: linear;
        -webkit-animation-iteration-count: infinite;
    }
     @-webkit-keyframes MOVE {
     from {

     background-position: 5% 5%;

    }
    to {
        background-position: 1300% 600%;
    }
    } 
```

这产生了相当差的性能。背景图像是一个 png32，透明度压缩为 896kb。我尝试使用空白 translate3d 语句启动硬件加速，但没有发生明显的变化。

我还尝试将 background-position 更改为 translate3d ，它移动​​了整个 div 以及它包含的内容。我不确定如何在不影响性能的情况下产生这种效果。

这是测试站点[www.auroragm.sourceforge.net](http://auroragm.sourceforge.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:34:05.573

虽然在 Windows XP 中使用 Chrome 和 Firefox 进行测试可以获得良好的性能，但您的 Tile.png 和 BlurBG.png 似乎都有相当大的大小。至于我，我会将 Tile.png 和 BlurBG.png 合并到一个文件中，因为 Tile.png 看起来不像是移动的 BlurBG.png 背后的静态背景。

但是，如果您想将其保存为单独的两个文件，则可能需要进一步减小文件大小。我个人选择的工具是[PNGoo](http://code.google.com/p/pngoo/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T07:31:21.350

在我看来，那个网站运行得非常好，在 Linux 上使用 Firefox 或 Chrome。

你在哪个浏览器上测试？也许 IE 对大型背景图像的动画效果不佳。

考虑将背景动画限制在某些浏览器上。

此外，考虑使背景图像稍微变暗 - 背景中移动的对比色淹没了中心部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:17:28.050

结果我所要做的就是告诉浏览器在每次有更新时停止缓存，这显然有很大帮助：

```
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
```

成功了:)

# ruby-on-rails - 大礼包管理员授权

> ID：10159894
> 
> 赞同：2
> 
> 时间：2012-04-15T05:56:25.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authorization, cancan, spree

`authorize! :admin, model`以下代码中的行是什么意思？我在代码中的任何地方都找不到该`:admin`操作。这类似于`:manage`选项吗？

```
spree_auth-1.0.3/app/controllers/spree/admin/admin_controller_decorator.rb:

require File.expand_path('../../base_controller_decorator', __FILE__)
Spree::Admin::BaseController.class_eval do
  before_filter :authorize_admin

  def authorize_admin
    begin
      model = model_class
    rescue
      model = Object
    end
    authorize! :admin, model
    authorize! params[:action].to_sym, model
  end

  protected
    def model_class
      "Spree::#{controller_name.classify}".constantize
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:35:32.083

该方法来自[康康](https://github.com/ryanb/cancan)宝石。它用于确保`current_user`有权在任何继承自的控制器中执行操作`Spree::Admin::BaseController.`

# php - php exec缺少输出

> ID：10159898
> 
> 赞同：3
> 
> 时间：2012-04-15T05:57:19.390
> 
> 标签：php, python, exec, nltk

我正在尝试通过 PHP 执行用于 POS 标记的 python 脚本。但它没有返回完整的输出。

**Python脚本：**

```
import nltk
import sys

text = sys.argv[1]

tokenize_into_words = nltk.word_tokenize(text)

print text

result = nltk.pos_tag(tokenize_into_words)

print result

print "Done!" 
```

**PHP 脚本**

```
$cmd = 'python /Library/WebServer/Documents/varticle/vcmdpos.py ' . $string2;

$tmp = exec($cmd,$output);

print_r($output); 
```

**命令：**

python /Library/WebServer/Documents/varticle/vcmdpos.py 科学家

**观察到的输出：**

数组（ [0] => 科学家）

**预期输出：**

数组 ([0] => 科学家 [1] => "[('Scientists', 'NNS')]" [2] => "完成！")

当我手动运行命令时，运行大约需要 5-10 秒。[这可能是由于进行 POS 标记或导入 nltk 所需的时间。]

但是当通过 PHP 运行时，它会立即返回并从 nltk.pos_tag 或 print 语句中输出，而不是返回。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:45:02.540

2>&1 需要在命令中添加才能得到完整的输出。这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:15:25.827

尝试使用[shell_exec——](http://de.php.net/manual/en/function.exec.php "shell_exec()")或者，如果你想要更多的控制，proc_open——而不是 exec()。

# ios - 您如何找到正在向其发送消息的已发布对象的名称/标识符？

> ID：10159899
> 
> 赞同：0
> 
> 时间：2012-04-15T05:57:22.387
> 
> 标签：ios, xcode, debugging, instruments

我在 Instruments 中做的事情是显示有关已发送消息的对象的信息，但与变量的实际名称相比，内存地址的用处不大。有没有办法找出它的标识符是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:13:36.573

尝试添加符号断点，例如：

```
[NSException raise]
objc_exception_throw
malloc_error_break 
```

还可以尝试启用 NSZombies，您应该能够看到在释放的实例上调用 release 的代码行。

# android - 我可以关闭模 拟器的省电功能吗？

> ID：10159900
> 
> 赞同：2
> 
> 时间：2012-04-15T05:57:25.140
> 
> 标签：android

每当我执行我的应用程序时，我必须再单击一次以使模拟器屏幕变亮。有什么办法可以关闭模​​拟器的省电功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T06:51:12.673

转到设置->显示->屏幕超时->30分钟（最大）。这将防止您的屏幕在模拟器中变暗。

# c# - spring.net 表达式求值器-spel-list 迭代

> ID：10159903
> 
> 赞同：0
> 
> 时间：2012-04-15T05:57:58.157
> 
> 标签：c#, list, spring.net

我正在尝试在 SpEL 中执行以下行，但它不起作用：

```
FileAttachments.?{DownloadedPath.Contains('CMA')}.count()>0 
```

where是属性为`FileAttachments`的类对象的列表。`FileAttachment``DownloadedPath`

基本上我正在尝试检查是否有任何属性包含`FileAttachment`" *CMA"*。`DownloadedPath`

 *但它返回错误：

> 选择只能用于实现 IEnumerable 的类型的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:45:10.830

我创建了一个简单的原型，因为我认为您的表达式应该有效并且确实有效：

```
using System.Collections.Generic;
using System.Diagnostics;
using Spring.Expressions;

namespace StackOverflow10159903
{
  internal class Program
  {
    private static void Main(string[] args)
    {
      var attachmentContainer = new FileAttachmentsContainer();
      attachmentContainer.AddAttachment(new FileAttachment {DownloadedPath = "CMA"});

      var attachments = new List<FileAttachment>();
      attachments.Add(new FileAttachment {DownloadedPath = "CMA"});

      var valueFromList =
        ExpressionEvaluator.GetValue(attachments, "?{DownloadedPath.Contains('CMA')}.count()>0") 
        as bool?;

      var valueFromContainer =
        ExpressionEvaluator.GetValue(attachmentContainer, "FileAttachments?{DownloadedPath.Contains('CMA')}.count()>0")
        as bool?;

      Debug.Assert(valueFromList == true);
      Debug.Assert(valueFromContainer == true);
    }
  }

  public class FileAttachmentsContainer
  {
    private readonly List<FileAttachment> _fileAttachments;

    public FileAttachmentsContainer()
    {
      _fileAttachments = new List<FileAttachment>();
    }

    public IEnumerable<FileAttachment> FileAttachments
    {
      get { return _fileAttachments; }
    }

    public void AddAttachment(FileAttachment fileAttachment)
    {
      _fileAttachments.Add(fileAttachment);
    }
  }

  public class FileAttachment
  {
    public string DownloadedPath { get; set; }
  }
} 
```

根据您的错误消息，我想您的`FileAttachment`课程与您描述的不同。最终，您将列表传递给表达式，而不是保存列表的容器对象。*

# javascript - Box2dWeb 和图像

> ID：10159905
> 
> 赞同：3
> 
> 时间：2012-04-15T05:58:08.390
> 
> 标签：javascript, box2d

如何在 Box2dWeb 中导入 PNG 或 GIF 并将其附加到形状？

我可以在网上找到的最好的资源是：http: [//www.jeremyhubble.com/box2d.html](http://www.jeremyhubble.com/box2d.html)

然而，这个“教程”并没有对图像的实际使用方式给出太多解释。所以这显然是可能的，但我无法让 userData 技巧起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:02:46.713

[我现在已经在gamedev](https://gamedev.stackexchange.com/questions/27407/box2dweb-and-images/27930#27930)上为你回答了这个问题（连同一个例子），但这是底线：

您通常负责渲染 box2d 世界的状态 - 您所指的“userData 技巧”实际上与 box2d 框架无关。

userData 是您想要关联到正文的任意数据的占位符。这可以是任何东西 - 字符串、函数、对象等。这些数据通常用于帮助您在更新循环期间渲染您的世界，这正是您链接到的资源所做的 - 如果您查看它使用的 processObjects 函数imgsrc 值来创建一个 Image 对象并将其绘制到画布上的正确位置。（这并不是一个好主意，因为每次迭代每个对象都会创建一次图像 - 我建议它应该只创建一次）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:27:34.120

更新：您可以尝试这个新链接：[http ://codingowl.com/readblog.php?blogid=134](http://codingowl.com/readblog.php?blogid=134)

也许这个网站可以帮助[--box2dweb.com/blog/2012/05/01/attaching-image-贴图/](http://box2dweb.com/blog/2012/05/01/attaching-image-%E8%B4%B4%E5%9B%BE/)

# php - CI中的多个数据库连接

> ID：10159916
> 
> 赞同：0
> 
> 时间：2012-04-15T05:59:45.567
> 
> 标签：php, codeigniter, datamapper

我可以连接多个数据库吗？主连接来自 database.php

但是模型中的另一个，我想在它之间切换

像这样

```
 $config['remote']['hostname'] = 'localhost';
        $config['remote']['username'] = 'root';
        $config['remote']['password'] = '';
        $config['remote']['database'] = 'countries';
        $config['remote']['dbdriver'] = 'mysql';
        $config['remote']['dbprefix'] = '';
        $config['remote']['pconnect'] = TRUE;
        $config['remote']['db_debug'] = TRUE;
        $config['remote']['cache_on'] = FALSE;
        $config['remote']['cachedir'] = '';
        $config['remote']['char_set'] = 'utf8';
        $config['remote']['dbcollat'] = 'utf8_general_ci';
        $config['remote']['swap_pre'] = '';
        $config['remote']['autoinit'] = TRUE;
        $config['remote']['stricton'] = FALSE;

        $this->load->database($config);

        $this->load->database('remote', TRUE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:09:43.847

使用多个数据库的基本语法如下。

```
$DB1 = $this->load->database('group_one', TRUE);
$DB2 = $this->load->database('group_two', TRUE); 
```

这里唯一的区别是你必须使用返回的数据库对象。

*请参阅连接到多个数据库*部分的[代码点火器用户指南](http://codeigniter.com/user_guide/database/connecting.html)的注释

 *> 注意：将单词“group_one”和“group_two”更改为您要连接到的特定组名称（或者您可以传递上述连接值）。
> 
> 通过将第二个参数设置为 TRUE（布尔值），函数将返回数据库对象。*

# tomcat - 如何设置 tomcat 以使用应用程序基目录的子目录来存储网站资源？

> ID：10159918
> 
> 赞同：1
> 
> 时间：2012-04-15T05:59:53.430
> 
> 标签：tomcat, tomcat7

我需要设置一个tomcat webapp，如下所示：

```
webapps/ABC
├── WebContent
│   ├── img
│   │   └── ABC.png
│   ├── ABC.jsp
│   ├── ABCDEF.jsp
│   └── styles
│       └── ABC.css
└── WEB-INF
    ├── classes
    │   ├── model
    │   │   └── ABCData.class
    │   └── servlet
    │       └── ABC.class
    │   └── otherstuff
    │       └── ABChelper.class
    ├── lib
    └── web.xml 
```

我设法让tomcat在访问[host] / ABC时显示ABC.jsp文件，但在ABC.jsp中存在许多对“img/ABC.png”或“styles/ABC.css”等的引用. 我想让tomcat在“WebContent”子目录中自动查找除.class-或.jar-Files之外的任何内容。最初，我更喜欢“资源”子目录，但后来我在一些网站上读到，在过去几个小时我读过的众多网站中，我现在不记得标准显然是“WebContent”；一个不起作用的标准。仅使用 webapp 本地的配置是否有可能？

理想情况下，我想稍后从 webapp 根目录创建一个 .jar 文件并将其部署到服务器。

我尝试设置一个本地 META-INF/context.xml，但这显然被忽略了（无论我在其中写入什么，tomcat 都不会抱怨），并且 web.xml 中的 -tags 不做任何事情（除了导致如果结束标签中有错字，则错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:33:18.960

是的，如果您想在部署应用程序时使资源可用，它们必须位于 WebContent 或其子目录中，或者如果您将其打包在一个 jar 中以供其他项目使用，那么您是对的META-INF/resources 目录（自动加载需要 Servlet 3.0）。我认为您唯一可能缺少的就是从上下文路径中检索它们。

使用这样的东西：

```
<link rel="stylesheet" href="${pageContext.request.contextPath}/styles/ABC.css" />
<img src="${pageContext.request.contextPath}/img/ABC.png" /> 
```

# c - 信号（）调用未触发

> ID：10159921
> 
> 赞同：0
> 
> 时间：2012-04-15T06:02:13.057
> 
> 标签：c, signals

我正在尝试编写一些代码来分叉一个新进程，但如果花费的时间太长，则会在一段时间后杀死该新进程。这段代码在没有时间限制的情况下运行良好，并且执行`execve`没有任何问题，但是当我将前 4 行代码放入并尝试调用`cat`我的 execve 时，孩子只是被杀死了，假设是调用警报。

在这种`signal`情况下，调用似乎根本没有做任何事情，我已经输入了许多痕迹`killproc`并且没有被调用。我如何错误地设置此计时系统？

```
void killproc(int sig) {
    printf("running?");
} 
```

**代码：（**儿童）

```
if(MAX_TIME != -1){
    signal(SIGALRM, killproc);
    alarm(MAX_TIME);
}
// Process we are timing
int ret = execve(path, newargv, envp); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:07:56.873

`printf`在信号处理程序中不安全；如果信号在错误的时间传递，内部结构将无效，并`printf`会跟随错误的指针并崩溃。您是否使用其他操作对此进行了测试？即使它没有崩溃，您也不会刷新输出或打印换行符，所以“运行？” 可能会卡在 stdio 缓冲区中。

此外，`signal()`已过时；你想用`sigaction()`. （手册页`sigaction`还应该说明哪些接口可以在信号处理程序中安全使用。）

那些说，也不是真正的问题。问题是您正在设置一个信号处理程序并期望它能够在`exec()`. 但是`exec()`替换了进程的地址空间，*包括你的信号处理程序*；因此，它重置处理程序，因为它知道信号处理程序的任何函数指针在之后都不会有效。 `SIG_DFL`如果您不想修改正在执行的程序，可能是您在这里想要的（实际上是您得到的）`exec()`；如果您需要更多东西，就像您认为自己需要的那样，您将需要修改正在`exec()`编辑的程序。

但是，我怀疑您真的想要其他东西：无论您认为要放入信号处理程序中的任何仪器，您确实希望在子进程退出并以`waitpid()`.

# c# - 使用 LINQ，如何转换 IList > 到 IList? I'm trying to convert a IList<ilist<object>> to IList, I mean to have a unique and one list where contains all the element (object) 问问题 问问题 2012-04-15T06:02:45.940 994 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm trying to convert a IList<ilist<object>> to IList, I mean to have a unique and one list where contains all the element (object) of the first one. public IList<ilist<page>> PMTs { get { var pmts = Processes.Select(x => x.PageMapTable) .ToList(); return pmts; } } public IList <page>BlockMapTable { get { // Incomplete var btm = PMTs.Select(x => x.?? .. } } You have a few problems. The first problem is that Split(). You need to change inputLine.Split() to inputLine.Split(','). Right now you are calling into the overload of System.String.Split(params char[]) and since you are not specifying any characters to split, it will return the entire string. The other issues (as an CS student), you should really work on your naming conventions and error checking. The code is rather brittle and will break very easily. You should start early on learning good software engineering practices and writing high quality code. using (FileStream fstream = new FileStream("path", FileMode.Open)) using (StreamReader reader = new StreamReader(fstream)) { string line; while (!reader.EndOfStream && (line = reader.ReadLine()) != null) { string[] data = line.Split(','); if (data.Length < 5) { // You will have IndexOutOfRange issues continue; // skip processing the current loop } int employeeNumber; string employeeName; string employeeAddress; double employeeWage; double employeeHours; // Will be used to check validity of fields that require parsing into a type. bool valid; valid = int.TryParse(data[0], out employeeNumber); if (!valid) { // employee number is not parsable } employeeName = data[1]; employeeAddress = data[2]; valid = double.TryParse(data[3], out employeeWage); if (!valid) { // employee wage is not parsable } valid = double.TryParse(data[4], out employeeHours); if (!valid) { // employee hours are not parsable } } } c#linqlambdalinq-to-objects 4 2 回答 2 This answer is useful 4 假设您想要 flatMap/flatten list<list<page>>，您可以使用 selectMany 方法来做到这一点，如下所示： public IList <page>BlockMapTable { get { var btm = PMTs.SelectMany(x => x).ToList(); } } 如果您想了解更多信息，这里有一篇关于 selectMany 扩展方法的精彩博文 于 2012-04-15T06:17:12.930 回答 This answer is useful 1 public IList <page>BlockMapTable { get { return PMTs.SelectMany(p => p).ToList(); } } 于 2012-04-15T06:17:17.447 回答 Related 1 sql-server - 用于获取 Spacetree 数据的 sql 查询（jit） 1 mysql - 如何检查数据库（MYSQL）中的哪些表在过去 1 小时/1 天内更新 6 ios - 如何在 iOS 中以 Nsdate 格式获取时间？ 3 sql - 如何从 Oracle 存储过程中查看 TOAD 中的 CLOB 输出参数？ 2 java - 为什么它第二次拒绝连接？ 0 android - 通过android中的蓝牙连接并向多个设备发送消息？ 3 android - 将小部件名称与小部件一起添加到主屏幕 2 scala - 使用 Scala 读取的简单文件不起作用 1 django - 在 Google Cloud SQL 上使用 Django ORM - 没有名为 grizzled 的模块 1 xslt - XSLT 理解变量中的重复匹配 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10159922
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, linq, lambda, linq-to-objects

I'm trying to convert a `IList<IList<object>>` to `IList<object>`, I mean to have a unique and one list where contains all the element (object) of the first one.

```
 public IList<IList<Page>> PMTs
    {
        get
        {
            var pmts = Processes.Select(x => x.PageMapTable)
                                .ToList();
            return pmts;
        }
    }

    public IList<Page> BlockMapTable
    {
        get
        {
            // Incomplete
            var btm = PMTs.Select(x => x.?? ..
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T06:17:12.930

假设您想要 flatMap/flatten `list<list<Page>>`，您可以使用 selectMany 方法来做到这一点，如下所示：

```
public IList<Page> BlockMapTable
{
    get
    {
        var btm = PMTs.SelectMany(x => x).ToList();
    }
} 
```

如果您想了解更多信息，这里有[一篇关于 selectMany 扩展方法的精彩博文](http://www.codethinked.com/the-linq-selectmany-operator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:17:17.447

```
public IList<Page> BlockMapTable
    {
        get
        {
            return PMTs.SelectMany(p => p).ToList();
        }
    } 
```</page></page></list<page></page></ilist<page></ilist<object></ilist<object>

# php - Detect which result were chosen from MYSQL selection?

> ID：10159926
> 
> 赞同：-1
> 
> 时间：2012-04-15T06:03:21.477
> 
> 标签：php, mysql, select, cookies

On my project i have a mysql query which select some results from my mysql table.So the problem is,for each result i display a button,when the user clicks on those button i need to store the result id in cookies,but every time i tried to make it work always the value stored on cookies is always from the first record!How can i make the value stored become the one from the chosen result?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-15T06:27:37.527

Cookie 只能存储字符串。它不能存储数组。在使用以下函数存储之前，使用 javascript join 将其转换为“，”分隔值 -

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

# matlab - Matlab 2012 doesn't run my functions properly

> ID：10159928
> 
> 赞同：0
> 
> 时间：2012-04-15T06:03:50.580
> 
> 标签：matlab

I wrote this m-file

```
function adhamm = adhamm(a,b)
    adhamm = a+b
end 
```

and when I try to run it via MATLAB's command line by writing

```
a = 2;
b = 3;
adhamm(a,b); 
```

I get this error

> Undefined function 'adhamm' for input arguments of type 'double'.

Why is this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:50:38.800

这些函数没有放在新版本的搜索路径中。MATLAB 根本不知道在哪里可以找到它们。但是，不要将它们放在 MATLAB 工具箱目录中。那不是放置您自己的功能的地方。将它们放在一个单独的目录中，您将告诉 MATLAB 如何使用路径工具进行查找。（如果你 cd 到那个目录，MATLAB 会自动查找那里，但这不是一个好的解决方案。）

您需要了解 matlab 中的搜索路径，以及 matlab 维护搜索路径的工具。因此，addpath、savepath、rmpath、pathtool。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T10:42:41.460

您使用名称 adhamm.m 保存了您的函数，对吗？然后尝试在 adhamm.m 文件夹中执行该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:18:59.483

您可能已经保存了一个带有 name 的变量`adhamm`。键入`clear adhamm`并重试。

# iphone - 将简单的 Obj-C 转换为 Python

> ID：10159930
> 
> 赞同：0
> 
> 时间：2012-04-15T06:04:25.333
> 
> 标签：iphone, python, objective-c, ios

我有一个我一直在开发的应用程序，但现在我需要将此行转换为 Python。

```
return (highValue > 21) ? lowValue : highValue; 
```

上面说如果数字highValue大于21，返回lowValue，如果小于21，返回highValue。如何将其转换为 Python？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T06:08:12.567

我相信你正在寻找

```
>>> highvalue = 25
>>> lowvalue = 21
>>> def myfunc():
...     return lowvalue if highvalue>21 else highvalue
...
>>> myfunc()
21
>>> 
```

也看看这里[python-ternary-operator](https://stackoverflow.com/questions/394809/python-ternary-operator)。

# mysql - 为 MySQL 字段分配一个数字范围

> ID：10159931
> 
> 赞同：0
> 
> 时间：2012-04-15T06:04:32.920
> 
> 标签：mysql

我想为下表中的 ID 字段分配一个数字范围，这是使用 MySQL Query 的主键。我该怎么做。

先感谢您。

Revenue_Account（**ID**范围为 500 到 600。上限为 600，下限为 500）

( **ID** --------姓名--------金额)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:30:06.243

在 MySQL 中，数值范围基于它们的列数据类型。如果将列定义为[INT](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)，则默认情况下它可以采用范围`-2147483648`和中的值`2147483647`。MySQL 不支持显式范围检查，即检查约束。您可能需要在 INSERT 和 UPDATE 调用之前触发范围检查的 SQL 触发器，并且超出所需范围的输入值需要抛出异常。

关于 MySQL 支持的[数字类型](http://dev.mysql.com/doc/refman/5.5/en/numeric-types.html)的一些注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:26:57.220

这是你的意思吗？

```
SELECT * FROM TableName WHERE ID >= MinValue AND ID <= MaxValue 
```

将 MinValue 设置为您的最小值，在您的示例中为 500。同样适用于 MaxValue。

# c - setTimeOut 等价于 c？

> ID：10159932
> 
> 赞同：1
> 
> 时间：2012-04-15T06:04:35.877
> 
> 标签：c, sockets, pthreads

我正在研究一个 pthread 多线程代码，每个线程都在文件描述符上调用 read()。read() 是一个阻塞调用，因此它等待数据。但我希望它只等待 3 秒来等待数据。

我曾想过使用alarm() 和hadling SIGALRM，但如果我在一个线程中发出警报，所有线程都会收到该SIGALRM 信号，并且所有线程都将放弃读取。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T06:18:08.490

为此使用[`select`](http://pubs.opengroup.org/onlinepubs/009695399/functions/select.html)电话。它有一个参数允许您指定超时。

Linux 手册页[`select`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)有一个示例用法，您可以在此处和网络上的其他地方找到很多示例。

如果您不担心便携性，还有更多现代/功能丰富的选项。

*   对于 Linux，有这个[`epoll`](http://www.kernel.org/doc/man-pages/online/pages/man7/epoll.7.html)工具。手册页有示例代码，[这个问题](https://stackoverflow.com/questions/27247/could-you-recommend-some-guides-about-epoll-on-linux)列出了几个带有其他使用信息的博客。
*   对于某些 *BSD（和 Mac OS X），有[`kqueue`](http://www.openbsd.org/cgi-bin/man.cgi?query=kqueue&sektion=2).
*   Solaris 有一个[事件完成框架](http://developers.sun.com/solaris/articles/event_completion.html)
*   AIX 有一个[pollset](http://www.ibm.com/developerworks/aix/library/au-pollset/index.html)接口。
*   对于 Windows，请参阅：Windows[上最好的 epoll/kqueue/select 等效项是什么？](https://stackoverflow.com/questions/67082/what-is-the-best-epoll-kqueue-select-equvalient-on-windows)

您可能想研究库以将所有这些抽象出来。[libevent](http://libevent.org/)值得一看，它封装了上述大多数特定于操作系统的接口。

# cassandra - 如何在 cassandra 中使用复合列创建计数器桶

> ID：10159937
> 
> 赞同：2
> 
> 时间：2012-04-15T06:05:04.283
> 
> 标签：cassandra

如何在 Cassandra 中创建计数器列表作为复合列。我要解决的问题是存储对特定对象的访问次数。json 表示的模型是这样的：

ColumnFamily：view_counts RowKey：object_id

价值：{总计：10，推荐人：{facebook：2，twitter：5，直接：2，其他：1}国家：{澳大利亚：4，美国：4，其他：2}}

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:06:43.427

你想要的是这样的（其中 X:Y 是一个复合列）：

```
ColumnFamily: view_counts
Rows:
object_id -> { "total": 10,
               "referrer:facebook": 2,
               "referrer:twitter": 5,
               "referrer:direct": 2, 
               "referrer:other": 1,
               "country:australia": 4,
               "country:us": 4, 
               "country:other": 2 } 
```

然后，当您通过 Twitter 从澳大利亚获得对 Object6 的新访问时，您将执行以下增量：

```
incr view_counts[Object6]['total']
incr view_counts[Object6]['referrer:twitter']
incr view_counts[Object6]['country:australia'] 
```

当然，您可以采用不同的方式来安排这一点 - 您也可以将组合放在行键中：

```
total:object_id    -> { "count": 10 }
referrer:object_id -> { "facebook": 2,
                        "twitter": 5,
                        "direct": 2, 
                        "other": 1 }
country:object_id  -> { "australia": 4, 
                        "us": 4, 
                        "other": 2 } 
```

或完全放弃复合列，并为 和 使用单独的列`view_counts_by_referrer`族`view_counts_by_country`。

[Acunu Analytics](http://www.acunu.com/blogs/andy-twigg/acunu-analytics-preview/ "阿库努分析")等实时分析系统将为您完成所有这些工作，因此您只需指定一个查询`SELECT COUNT_DISTINCT(user_ip_address) FROM view_counts WHERE object = Object6 AND time > '7 days ago' GROUP BY referrer`，它就会在后台计算出所有适当的计数器。

（ps 超级列已被弃用，因为您不能只修改超级列的一部分，这会减慢速度。）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-15T07:15:07.707

为什么不只使用一个超级列族，并为引用者和国家/地区设置一个超级列？

# .htaccess - 重写规则冲突

> ID：10159940
> 
> 赞同：0
> 
> 时间：2012-04-15T06:05:36.080
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我的 .htaccess 上有以下行

```
LINE 1: RewriteRule ^user/account$ /bootstrap/user/account.php [NC]
LINE 2: RewriteRule ^user/account/picture$ /bootstrap/user/upload_picture.php [NC]
LINE 3: RewriteRule ^user/account/preferences$ /bootstrap/json/edit-preferences.php [NC]
LINE 4: RewriteRule ^user/account/password$ /bootstrap/json/change-password.php [NC] 
```

第 1 行工作正常。第 2 行工作正常。第 3 行错误 404。第 4 行错误 404。

任何想法？

* * *

顺便说一句，在我的本地服务器上，它工作正常，因为它位于根目录中。在我的在线服务器上，它位于文件夹引导程序的根目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:25:03.863

您是否检查过您的在线 URL 是否有额外的/结尾？您可能想添加 /? 在您的网址中的 $ 之前，并且在 SEO 的上下文中，您可能会从另一个版本重定向到一个版本。

也不要忘记检查您重写的网址 - 您可能在使用真实网址时遇到问题，然后 rewriteRule 是错误的地方查看...

也请参考[这个问题](https://stackoverflow.com/questions/3616690/htaccess-rules-differs-in-local-and-live-server)

**编辑**

我检查了您的在线网址 - “真实”网址也不起作用。就像我说的，在你的情况下，重写规则是错误的地方。

确保所有文件及其依赖项都在那里，并且对您的文件夹结构没有内部依赖项，这在您的开发服务器和生产服务器中物理上是不同的。

# qt - QML 下拉菜单崩溃

> ID：10159942
> 
> 赞同：1
> 
> 时间：2012-04-15T06:06:06.753
> 
> 标签：qt, notifications, segmentation-fault, symbian, qml

当我在关闭标准实现的情况下下拉 QML（Qt Quick）应用程序中的通知菜单时，出现此错误：“线程已崩溃：访问 0x20 时发生数据中止异常”。如果我只是创建一个新的 Symbian Qt Quick 应用程序并在没有任何修改的情况下运行它，也会发生这种情况。你知道是什么原因造成的吗？

使用调试器时，它说：sigsegv 分段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:29:19.450

几个月前这也发生在我身上，我能够找到解决方案。一些诺基亚 beta 应用程序在其安装 sis 中捆绑了 QT Quick Components。这与内置安装冲突并导致此问题。

解决方案是安装另一个 QT Quick Components 副本，然后从应用程序管理器中将其卸载。您可以从诺基亚 QT SDK 安装程序中获取它，或者您可以在谷歌搜索 QtQuickComponents-1.1-for-Anna-Belle.sis

# java - 空白的“位置”标头，但重定向发生在 IE 中

> ID：10159944
> 
> 赞同：0
> 
> 时间：2012-04-15T06:06:19.353
> 
> 标签：java, httpurlconnection

我正在尝试使用 HttpURLCONNECTION 对象访问 URL，但由于 Location 标头为空白，因此似乎无法识别重定向。有没有其他方法可以跟踪重定向。setFollowRedirects 也无济于事。

```
private static boolean isLive(String link) {
HttpURLConnection urlConnection = null;
try {
  URL url = new URL(link);
  System.out.println(url);
  urlConnection = (HttpURLConnection) url.openConnection();
  urlConnection.setInstanceFollowRedirects(true);
  urlConnection.setRequestMethod("GET");
 // urlConnection.connect();

  //urlConnection.setConnectTimeout(5000); /* timeout after 5s if can't connect */
  //urlConnection.setReadTimeout(5000); /* timeout after 5s if the page is too slow */
  urlConnection.connect();
  int resp = urlConnection.getResponseCode();
  System.out.println(resp);
  String redirectLink = urlConnection.getHeaderField("Location");
  System.out.println(redirectLink);
  if (redirectLink != null && !link.equals(redirectLink)) {
    return isLive(redirectLink);
  } else {
    return urlConnection.getResponseCode() == HttpURLConnection.HTTP_OK;
  }
} catch (Exception e) {
  return false;
} finally {
  if (urlConnection != null) {
    urlConnection.disconnect();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:07:25.553

忽略 SSL 证书错误的略微修改的代码

```
import java.net.HttpURLConnection;
import java.net.URL;

import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

import org.slf4j.LoggerFactory;

public class RedirectTest {

    private static boolean isLive(String link) {
        HttpURLConnection urlConnection = null;
        try {
          URL url = new URL(link);
          System.out.println("link: " + url);
          urlConnection = (HttpURLConnection) url.openConnection();          
          urlConnection.setInstanceFollowRedirects(false);
          urlConnection.setRequestMethod("GET");
         // urlConnection.connect();

          //urlConnection.setConnectTimeout(5000); /* timeout after 5s if can't connect */
          //urlConnection.setReadTimeout(5000); /* timeout after 5s if the page is too slow */
          urlConnection.connect();
          int resp = urlConnection.getResponseCode();
          System.out.println(resp);
          String redirectLink = urlConnection.getHeaderField("Location");
          System.out.println("Location : " + redirectLink);
          if (redirectLink != null && !link.equals(redirectLink)) {
            boolean b = isLive(redirectLink);   
            System.out.println("isLive " + redirectLink + " =  " + b);
            return b;
          } else {
            return urlConnection.getResponseCode() == HttpURLConnection.HTTP_OK;
          }
        } catch (Exception e) {
            LoggerFactory.getLogger(RedirectTest.class).debug("Exception", e);
          return false;
        } finally {
          if (urlConnection != null) {
            urlConnection.disconnect();
          }
        }
    }

    public static void main(String[] args) throws Exception {

     // Create a trust manager that does not validate certificate chains
        TrustManager[] trustAllCerts = new TrustManager[]{
            new X509TrustManager() {
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                }
                public void checkClientTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
                }
                public void checkServerTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
                }
            }
        };

        SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

        isLive("https://www0.bankofamerica.com/home-loans/mortgage-purchase.go");
    }
} 
```

# ipad - 基于 Provisioning 配置文件的设备上的 iOS 钥匙串访问

> ID：10159946
> 
> 赞同：1
> 
> 时间：2012-04-15T06:06:58.917
> 
> 标签：ipad, ios5, app-store, keychain

我编写了一个 iPad (iOS 5+) 应用程序，它保存 GTM-Oauth 库以将 oauth 令牌保存到钥匙串。基于身份验证令牌的存在，我在视图控制器中执行不同的操作：

```
//Fetch the auth token from keychain
GTMOAuthAuthentication *auth = [self myCustomAuth];

//perform actions:
  if (auth) {
    BOOL didAuth = [GTMOAuthViewControllerTouch authorizeFromKeychainForName:@"My App: Custom Service" authentication:auth];
    // if the auth object contains an access token, didAuth is now true
    [self performSegueWithIdentifier..]
  }
  else {
   //do something else
  }

//The customAuth method:
- (GTMOAuthAuthentication *)myCustomAuth {
  NSString *myConsumerKey = @"abcd";    // pre-registered with service
  NSString *myConsumerSecret = @"efgh"; // pre-assigned by service

  GTMOAuthAuthentication *auth;
  auth = [[GTMOAuthAuthentication alloc]    initWithSignatureMethod:kGTMOAuthSignatureMethodHMAC_SHA1
                                                  consumerKey:myConsumerKey
                                                   privateKey:myConsumerSecret] ;

  // setting the service name lets us inspect the auth object later to know
  // what service it is for
  auth.serviceProvider = @"Custom Auth Service";

  return auth;
} 
```

虽然当我使用我的开发和临时分发配置文件对应用程序进行代码签名时，segue 工作正常（即 auth 存在于钥匙串中并返回 true），但在使用 appstore 分发配置文件时它不起作用，并且已被 Apple 拒绝为“展示虫子'。

我使用以下命令（来自 Apple 文档）检查了 appstore 配置文件的权利：

```
security cms -D -i /path/to/the.app/embedded.mobileprovision 
```

在权利下，我可以看到：

```
<key>keychain-access-groups</key>
    <array>
        <string>{My Bundle seed identifier}.*</string>
    </array> 
```

有人可以让我知道可能是什么问题，以及如何确保我的应用商店构建中的钥匙串访问？

# c++ - 发布请求中的二进制数据

> ID：10159947
> 
> 赞同：0
> 
> 时间：2012-04-15T06:07:08.263
> 
> 标签：c++, memory, http-post

我已阅读有关 http 请求的文档并最终编写了此标头：

```
int *binary = new int[bufferLength]; // And fill it

std::stringstream out;
out << "POST /push1_pub?id=game HTTP/1.1\r\n";
out << "User-Agent: Lotosoft soccer client\r\n";
out << "Host: localhost\r\n";
out << "Accept: */*\r\n";
out << "Content-Type: application/octet-stream\r\n";
out << "Content-Length: " << bufferLength << "\r\n\r\n";

// Take out string from stream
std::string headers = out.str();
// Length of new array of bytes (headers + binary data + \0)
const int rawLen = headers.size() + bufferLength*sizeof(int) + 1;

char *raw = new char[rawLen];
// Copy headers data into bytes array
strcpy(raw, headers.c_str());
// Apply offset to bytes array and fill another part with binary array of ints
memcpy(raw+headers.size(), binary, bufferLength*sizeof(int));

std::cout << raw << std::endl;

// Send it to socket
if (socket.send(raw, rawLen) == -1)
{
    std::cout << "Failed to send headers\n";
} 
```

发布请求发送成功，但我不确定将所有内容填充到字节数组中的想法是否一切正常。这是将二进制数据作为请求后正文传递的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:30:38.193

问自己这个问题：“我发送到服务器的发布数据的第一个字节是什么？”。您是否看到您不知道 - 这是您的平台碰巧存储为数组的第一个字节的任何内容，这取决于您的特定 CPU 如何存储整数。

服务器不知道您的 CPU 是如何存储整数的，因此您正在向它发送信息，不可能有任何意义。您必须向服务器发送一个查询，该查询由服务器期望的任何格式的字节组成，而不是您的平台喜欢的任何服务器。

此外，您告诉服务器您将向它发送`bufferLength`字节，但随后您向它发送`bufferLength*sizeof(int)`字节。你必须保持一致。（假设您不在使用单字节整数的平台上。）

# c# - 以编程方式修改 web.config c# vs2010

> ID：10159948
> 
> 赞同：0
> 
> 时间：2012-04-15T06:07:08.480
> 
> 标签：c#, asp.net-mvc, web-config

我可以从网络设置项目中修改数据库连接和邮件设置 web.config；但是无法弄清楚如何修改自定义部分：

```
<configuration>
<projectConfig siteName="name" supportEmail="" adminEmail="" thumbnailSize="120" />
</configuration> 
```

我从我的设置项目中的自定义操作中获得这些值。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:57:09.567

我想你正在寻找这样的东西：http: [//foreachbiscuit.wordpress.com/2007/10/11/custom-webconfig-settings/](http://foreachbiscuit.wordpress.com/2007/10/11/custom-webconfig-settings/)

# javascript - 检测 x-webkit-speech？

> ID：10159951
> 
> 赞同：4
> 
> 时间：2012-04-15T06:07:53.987
> 
> 标签：javascript, speech-to-text

我想检测浏览器是否支持`x-webkit-speech`（speech to text in `<input>`s）使用 JavaScript，但这似乎是不可能的。我怎样才能做到这一点？

（如果浏览器或其版本不支持，我想显示一条消息。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T08:20:11.663

您可以检查浏览器是否支持这样的语音：

```
if( document.createElement('input').webkitSpeech==undefined )
{
  //no speech support
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T06:47:31.233

在 webkit 浏览器（目前只有 Chrome）上检测，将来可能会在 W3C 上检测^_^

```
if ( !!("webkitSpeechRecognition" in window) || !!("speechRecognition" in window) )

       alert("yeah!")

} 
```

# syntax-highlighting - 在 Komodo Edit 7 中创建自定义语言突出显示

> ID：10159967
> 
> 赞同：2
> 
> 时间：2012-04-15T06:11:08.930
> 
> 标签：syntax-highlighting, komodoedit

我已经搜索了一段时间，并且想知道：有没有一种简单的方法可以在 Komodo Edit 7 中创建新的自定义语言？

[为了澄清我的意思，请查看用于Notepad++](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=User_Defined_Languages)的易于使用的 UDL

我轻松地为我用于工作/学习的自定义语言创建了一个语法荧光笔（它基本上是 Java 的精简子集）。Npp 允许我同时使用 GUI 并轻松编辑 .udl 来执行此操作。

在科莫多有类似的方法吗？我能找到的唯一一篇文章是 2007 年的，与 Komodo 4 有关：[ActiveState 社区文章](http://www.activestate.com/blog/2007/01/adding-new-languages-komodo-udl)

这是唯一的方法吗？我不需要它是一个完整的扩展，我当然也不想添加智能感知：我只想让它突出关键字，仅此而已。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T01:07:43.383

如果它是基于标签的语言，请使用[宏](http://community.activestate.com/forum/highlighting-matching-tags)。对于其他语言，找到[keywords.py](http://svn.openkomodo.com/openkomodo/view/openkomodo/trunk/src/silvercity/PySilverCity/SilverCity/Keywords.py)的路径，选择具有相似元素的受支持语言，然后将其关键字替换为您自己的关键字。重新启动 Komodo，打开该类型的文件，然后更新[颜色首选项](http://docs.activestate.com/komodo/7.0/prefs.html#colors)并[使用宏来调试](http://community.activestate.com/faq/debug-udl-language-styling)您的更改。

# database - ASP Classic 和 MSAccess 日期

> ID：10159970
> 
> 赞同：0
> 
> 时间：2012-04-15T06:11:47.973
> 
> 标签：database, ms-access, asp-classic

我之前已经从 ASP 将日期输入到 Access 中，并且我使用相同的代码......但无论如何它都不会接受查询。我已经工作了一整天，也许我只是累了，但是有人可以帮我看看这个吗？

这是代码生成的示例查询：

```
INSERT INTO COMMENTS (FID,AUTHOR,DATE,COMMENT) VALUES ("6","John Doe",#4/15/2012#,"test comment") 
```

就像我说的，代码的模板直接来自其他有效的地方。如果我从查询中删除日期，它工作正常。我已经三重检查了 DATE 字段是一个 DATE/TIME 列，并且我尝试删除并重新创建它，但没有成功。

将不胜感激一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:53:33.357

我有一段时间没有接触 Access，但您可以尝试一些查询：

查询 1：更改`DATE`为`[DATE]`since`DATE`可能是 Access 使用的常用关键字。

```
 INSERT INTO COMMENTS 
    (FID,AUTHOR,[DATE],COMMENT) 
    VALUES 
    ("6","John Doe",#4/15/2012#,"test comment") 
```

查询 2：更改`#4/15/2012#`为`GetDate()`（日期戳）

```
 INSERT INTO COMMENTS 
    (FID,AUTHOR,[DATE],COMMENT) 
    VALUES 
    ("6","John Doe",GETDATE(),"test comment") 
```

或者也许尝试它们的组合。如果其中任何一个不起作用，请报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:49:01.370

你可以试试`#MM-DD-YYYY#`。还建议使用YYYY-MM-DD，所以你可以尝试`#YYYY-MM-DD#`甚至`#'YYYY-MM-DD'#`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T07:57:44.563

Here's what I got to work for me:

```
 strDSNPath = "PROVIDER=MSDASQL;DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=" & Server.MapPath("data.mdb")
    strSQL_Insert = "INSERT INTO COMMENTS (FID,AUTHOR,CDATE,COMMENT) VALUES ('6','John Doe','4/15/2012','test comment')"

   Set Conn=Server.CreateObject("ADODB.Connection")
        Conn.Open strDSNPath
            Conn.Execute strSQL_Insert
        Conn.Close
    Set Conn = Nothing 
```

And here's the database: [Download](http://dl.dropbox.com/u/50750605/WebDesign/data.mdb)

Notes:

*I couldn't get it to work with the (") so I used (')

*The date has no hashtag (which may need fixing)

*Sorry it's so late, it took me like an hour and a half to figure it out, and it only ended up being "use single quotes"

# android - 如何在android中解码以Base64编码的jpeg图像并在ImageView上查看它？

> ID：10159972
> 
> 赞同：0
> 
> 时间：2012-04-15T06:12:24.587
> 
> 标签：android, bytearray, base64, jpeg, itemizedoverlay

我的服务器将编码的 Base64 字符串发送到我的 android 设备。之后，我在此方法中解码 Base64 字符串以使其可绘制。当我将图像添加到 Itemizedoverlay 中时，我看不到图像。

```
public Drawable seticon(String input){

    byte[] b = Base64.decode(input, Base64.DEFAULT);
    Bitmap decodedByte = BitmapFactory.decodeByteArray(b, 0, b.length);
    Drawable drawable = new BitmapDrawable(decodedByte);
    drawable.setBounds(0, 0, 50, 50);
    return drawable;
}

public void setphotopoint(String input){
    Drawable drawable = seticon(input);
    PhotoOverlay aPhotoOverlay = new PhotoOverlay(drawable, this);
    OverlayItem overlayitem = new OverlayItem();
    overlayitem.setMarker(drawable);
    aPhotoOverlay.addOverlay(overlayitem);
    overlays.add(aPhotoOverlay);
} 
```

这是我的 PhotoOverlay 课程

```
public class PhotoOverlay extends ItemizedOverlay<OverlayItem>{

    private ArrayList<OverlayItem> items = new ArrayList<OverlayItem>();

    Context mContext ;

    public PhotoOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        this.mContext = context;
    }
    public PhotoOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        // TODO Auto-generated constructor stub
    }

    protected boolean onTap(int index) {
        return true;
    }

    public void addOverlay(OverlayItem overlay) {
        items.add(overlay);
        //setLastFocusedIndex(-1);
        populate();
    }
    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return items.get(i);
    }
    public void clear() {
        items.clear();
        populate();
    }

    public void removeOverlay(OverlayItem overlay) {
        items.remove(overlay);
        populate();
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return items.size();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T09:19:49.293

将您的二进制文件转换为 Base64，然后使用以下代码检索它：

```
public static void base64ToFile(String path, String strBase64)
            throws IOException {
        byte[] bytes = Base64.decode(strBase64);
        byteArrayTofile(path, bytes);
    }

public static void byteArrayTofile(String path, byte[] bytes)
        throws IOException {
    File imagefile = new File(path);
    File dir = new File(imagefile.getParent());
    if (!dir.exists()) {
        dir.mkdirs();
    }
    FileOutputStream fos = new FileOutputStream(imagefile);
    fos.write(bytes);
    fos.close();
} 
```

* * *

将二进制文件转换为 Base64：

```
public static String fileToBase64(String path) throws IOException {
    byte[] bytes = fileToByteArray(path);
    return Base64.encodeBytes(bytes);
}

public static byte[] fileToByteArray(String path) throws IOException {
    File imagefile = new File(path);
    byte[] data = new byte[(int) imagefile.length()];
    FileInputStream fis = new FileInputStream(imagefile);
    fis.read(data);
    fis.close();
    return data;
} 
```

# sql-server-2005 - SQL server 2005 将图像上传到数据库

> ID：10159976
> 
> 赞同：0
> 
> 时间：2012-04-15T06:13:06.703
> 
> 标签：sql-server-2005

我想将图像上传到数据库中，因此我添加了一个上传文件控件，并且我正在使用这样的插入命令：

```
INSERT INTO tab_employee(inter_sn, card_no, Tazkara_N, Tazkara_Vol, Tazkara_Page, Tazkara_SN, Name_emp, Fname_emp, GrandFatherName, Family_name, Gender, Birth_Day, Birth_Month, Birth_year, Marital_status, DOJ_Day, DOJ_Month, DOJ_Year, Position, Type_empl, Grade, Work_grade, Prof_level, Kadri_a, Act_code, ethic_gr, File_no, Birth_place, rem1, rem2, rem3,EngName,EngLastName,position_eng,**photo**) VALUES (@inter_sn, @card_no, @Tazkara_N, @Tazkara_Vol, @Tazkara_Page, @Tazkara_SN, @Name_emp, @Fname_emp, @GrandFatherName, @Family_name, @Gender, @Birth_Day, @Birth_Month, @Birth_year, @Marital_status, @DOJ_Day, @DOJ_Month, @DOJ_Year, @Position, @Type_empl, @Grade, @Work_grade, @Prof_level, @Kadri_a, @Act_code, @ethic_gr, @File_no, @Birth_place, @rem1, @rem2, @rem3,@EngName,@EngLastName,@position_eng,**@photo**) 
```

在我浏览我的照片并尝试将数据插入数据库后，我得到了这个：

操作数类型冲突：nvarchar 与图像不兼容 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：操作数类型冲突：nvarchar 与图像不兼容

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:49:00.640

为了将图像（插入/更新）上传到数据库中，您需要在 or/and 中定义一个 controlParameter，如下所示：

```
<asp: ControlParameter Name="photo" ControlID = "FormView1$FileUpload1" DbType ="Binary"
    /> 
```

ControlID 应该是访问控件的完整路径：这里我的 fileupload 控件位于 formview 中。我将我的图像作为二进制存储到数据库中（我的 db 字段类型是 Varbinary ）。

# windows - TObject 虚拟方法的签名更新到 Delphi XE2

> ID：10159982
> 
> 赞同：3
> 
> 时间：2012-04-15T06:15:01.587
> 
> 标签：windows, delphi, 32-bit, signature, vmt

目前，Delphi XE 仅在我的机器上可用，我不知道 Delphi 2010/XE2 是否引入了一些重大更改。

请帮我更新以下定义：

```
TVmt = packed record
    SelfPtr           : TClass;
    IntfTable         : Pointer;
    AutoTable         : Pointer;
    InitTable         : PFieldTable;
    TypeInfo          : PTypeInfo;
    FieldTable        : Pointer;
    MethodTable       : Pointer;
    DynamicTable      : Pointer;
    ClassName         : PShortString;
    InstanceSize      : Cardinal;
    Parent            : PClass;
    {$IFDEF DELPHI2009_UP}
    Equals            : Pointer;
    GetHashCode       : Pointer;
    ToString          : Pointer;
    {$ENDIF}
    {$IFDEF DELPHIXE_UP}
    // ???
    {$ENDIF}
    {$IFDEF DELPHIXE2_UP}
    // ???
    {$ENDIF}
    SafeCallException : PSafeCallException;
    AfterConstruction : PAfterConstruction;
    BeforeDestruction : PBeforeDestruction;
    Dispatch          : PDispatch;
    DefaultHandler    : PDefaultHandler;
    NewInstance       : PNewInstance;
    FreeInstance      : PFreeInstance;
    Destroy           : PDestroy;
    {UserDefinedVirtuals: array of procedure;}
  end; 
```

提前致谢。

* * *

我需要的信息可以从单位**system.pas**中获取。当我将其作为 Delphi XE 版本进行检查时，我还发现 VMT 依赖于 CPU（归咎于我，很明显/搜索`{$IF defined(CPUX64)}`指令以获取更多详细信息）。

我对 32 位 Windows 平台感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:38:34.580

对 XE2 的快速回顾`System.pas`并没有发现 VMT 的顺序和内容有任何差异。这些值有`{$IFDEF CPUX64}`不同的偏移量`vmt*`，但顺序和类型似乎相同。你标记的区域肯定没有什么新东西？？？

# c# - C# 库节点边图

> ID：10159983
> 
> 赞同：3
> 
> 时间：2012-04-15T06:15:04.243
> 
> 标签：c#, .net, graphics, graph, physics-engine

我想编写一个程序来生成类似于[此视频](http://youtu.be/Onbn285lris)的力定向节点边图。有哪些好的 C# 库可以让我做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T06:34:30.713

如果您只是在寻找 .Net 图形库，请尝试 QuickGraph [http://quickgraph.codeplex.com/](http://quickgraph.codeplex.com/)。它是一个通用的图形库，实现了许多算法，并且易于单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:33:39.030

Graph# 使用 QuickGraph 来呈现节点图： http: [//graphsharp.codeplex.com/](http://graphsharp.codeplex.com/) 我发现它非常有用。

# python - Python：列表参考

> ID：10159984
> 
> 赞同：0
> 
> 时间：2012-04-15T06:15:10.533
> 
> 标签：python

我试图将这一行放在我的代码中，试图创建一个 80*80 的网格：

```
a = [[0] * 80] * 80 
```

然而，事实证明我有 80 次引用相同的列表，我花了很长时间才意识到这个问题。

我想知道有没有办法理解/记住python在常用方法中的引用方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:21:31.697

是的，如果您这样做，您将拥有同一列表的 N 个引用。

如果您想拥有可以独立操作的不同列表，您可以执行以下操作：

```
a = [[0 for x in xrange(80)] for y in xrange(80)] 
```

请注意，我使用的是 xrange 而不是 range：这是一个生成器，不会在内存中分配范围。

# c# - 我想要一个从用户那里收集信息的页面，并且我想获取该信息并将其用于其他页面和类

> ID：10159985
> 
> 赞同：0
> 
> 时间：2012-04-15T06:15:55.667
> 
> 标签：c#, windows-phone-7, windows-phone

是否有必要将其存储到文件和隔离存储中，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:33:02.877

不，您不必这样做。您可以将公共数据放在您的“应用程序”中，这些数据可以通过[Application.Current](http://msdn.microsoft.com/en-us/library/system.windows.application.current%28v=vs.95%29.aspx)属性随处访问。或者，如果您使用 MVVM 模式，您可以设置 的`DataContext`，`RootFrame`这将确保所有页面共享相同的数据上下文。

[请参阅我为一个简单的 MVVM WP7 示例](http://www.scottlogic.co.uk/blog/colin/2011/05/a-simple-windows-phone-7-mvvm-tombstoning-example/)编写的这篇博文。

# objective-c - 使用 UIViewController 进行协议

> ID：10159988
> 
> 赞同：1
> 
> 时间：2012-04-15T06:16:30.673
> 
> 标签：objective-c, ios, uiviewcontroller, delegates, protocols

我为我的应用程序构建了一个 UITableViewController，它与我的核心数据模型交互。它的主要目的是被推送到导航控制器上并显示实体列表，并允许我编辑/选择和深入了解它们等信息......

但是，在我的应用程序的其他地方，我现在想以模态方式显示一个简单的选择器来选择这些实体之一。我认为实现这一点的最佳方法是构建一个协议来处理选择器，该选择器可以向我的代表发送有关用户是否取消或选择实体等的消息......

由于大部分编码都是相同的，我的问题是：是否有可能/或以任何方式将 UITableViewController 作为协议启用？

即，当正常显示时，它的行为与当前一样（UIViewController 的标准子类），但随后也能够由委托以模态方式呈现并将消息传递给委托？

热衷于她对最佳实践的看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T08:35:48.143

你甚至不需要正式的协议。`@property (nonatomic, assign) id delegate`从另一个控制器实例化它时，只需给你的 UITableViewController 一个。将其设置为委托。用于`id`不要将你的类耦合得太紧，也不要保留委托。

在调用控制器中`didCancelPicking...:(id)sender`实现两个方法。`didPick...:(id)sender item:(id)pickedItem`

现在，当以模态方式查看 UITableViewController 时，您需要做两件事。提供一个取消按钮 + 对此作出反应 ( `didCancelPicking...`) 并可能修改`tableView:didSelectRowAtIndexPath:`以发送`didPick...`给代表。始终使用 和 测试委托，`respondsToSelector:`以防万一`performSelector:withObject:`。始终将发送者作为这些委托方法中的第一个参数。

此外，始终在调用类中显示和隐藏模态控制器。例如，不要让它从 UINavigationController 中移除。

这些是我能想到的最佳实践。

关于此处的特定代码重用：当您重用该 UITableViewController 并希望更改其在模态显示时的行为方式时，您必须确定您的代码是否过于混乱。例如，您以后可能希望在这种情况下阻止编辑和向下钻取。您当然可以始终将其封装在`if (self.delegate)`支票中，但是...

# java - JVM tomcat：线程从多核移动到带负载的单核

> ID：10159989
> 
> 赞同：2
> 
> 时间：2012-04-15T06:16:34.783
> 
> 标签：java, linux, multithreading, tomcat, jvm

在 tomcat 上部署了一场战争，它执行大量 I/O 操作，并有一些大文件作为训练数据集。现在，最初当 webapp 被击中时，负载分布在所有核心 (8) 上，随着时间的推移，所有负载开始转移到单个核心。线程转储显示所有任务都卡在 CPU 上，并且 top/htop 显示相同。

知道这种行为的原因是什么吗？

# php - 将 ereg_replace 转换为 preg_replace

> ID：10159990
> 
> 赞同：6
> 
> 时间：2012-04-15T06:16:39.423
> 
> 标签：php, deprecated

我必须转换`ereg_replace`为`preg_replace`

ereg_replace 代码是：

```
ereg_replace( '\$([0-9])', '&#36;\1', $value ); 
```

由于 preg 由开始和结束反斜杠表示，我假设转换是：

```
preg_replace( '\\$([0-9])\', '&#36;\1', $value ); 
```

由于我对正则表达式没有很好的了解，我不确定以上是否是正确的使用方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T07:06:28.030

`ereg_replace()`和之间的区别之一`preg_replace()`是模式必须用分隔符括起来：`delimiter + pattern + delimiter`. 如[文档](http://php.net/manual/en/regexp.reference.delimiters.php)中所述，*分隔符可以是任何非字母数字、**非反斜杠**、非空白字符*。这意味着有效的分隔符是：`/`, `#`, `~`, `+`, `%`, `@`,`!`和`<>`，前两个最常用（但这只是我的猜测）。

如果您`ereg_replace()`按预期工作，那么只需在模式中添加分隔符，它就会完成。下面的所有示例都将起作用：

```
preg_replace('/\$([0-9])/', '&#36;\1', $value); 
```

或者

```
preg_replace('#\$([0-9])#', '&#36;\1', $value); 
```

或者

```
preg_replace('%\$([0-9])%', '&#36;\1', $value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T06:29:31.053

尝试

```
preg_replace( '#\$([0-9])#', '\$$1', $value ); 
```

# meteor - 流星如何与 jQuery 插件一起使用以进行表格渲染？

> ID：10159994
> 
> 赞同：4
> 
> 时间：2012-04-15T06:17:11.680
> 
> 标签：meteor

喜欢数据表或 jQgrid？或者仅支持更新的基于模板的渲染

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:52:41.257

目前，您不能只将它们包含到 head 部分而不使用一些代码来延迟它们的加载，直到 Jquery 加载。然而，我提出了一个改变： [https ://github.com/meteor/meteor/pull/47](https://github.com/meteor/meteor/pull/47)

这应该允许您将脚本文件放入您的 head 部分。我还将考虑是否允许您也将其放置在身体的末端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T16:03:22.647

我正在使用 slick.grid 没有 Meteor 的问题...

你基本上必须：

*   最初用数据填充网格
*   使用 Meteor 的 Observe 方法将新数据推送到 Grid 中。触发插入/删除动画的好地方。

# php - 在自定义异常构造函数中访问 silex $app？

> ID：10159997
> 
> 赞同：0
> 
> 时间：2012-04-15T06:17:25.010
> 
> 标签：php, silex, monolog

我想在我的项目中使用一组基于 silex (silex.sensiolabs.org) 框架的自定义异常类。我更喜欢在函数“__construct”中将错误消息写入日志文件。有没有办法在 MyException 类的 __construct 函数中访问 $app['monolog'] ？我认为使用 $app 作为构造函数参数或全局变量不是优雅的方式。

```
class MyException extends Exception
{
    public function __construct($message = '')
    {
        parent::__construct($message);
        //how to do?
        $app['monolog']->addError($message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T11:23:22.623

如果你真的想要，你可以让服务容器（Pimple）创建你的异常：

```
class MyException extends Exception
{
    public function __construct($message = '', $monolog)
    {
        parent::__construct($message);
        $monolog->addError($message);
    }
}

// no share() => create new instance every time
$app['my_exception'] = function ($app) {
    return new MyException($app['monolog']);
}; 
```

强烈建议不要这样做，您不想将异常与日志记录逻辑结合起来。一种更好的方法是添加一个错误处理程序来记录它。

例子：

```
$app->get('/error', function () {
    throw new MyException('A totally expected error happened.');
});

$app->error(function ($e) use ($app) {
    if ($e instanceof MyException) {
        $app['monolog']->addError($message);
    }
}); 
```

如果一个错误处理程序没有返回任何东西，其他错误处理程序将被调用，直到一个返回。

注意：如果您不知道，独白服务提供商已经记录了所有异常。