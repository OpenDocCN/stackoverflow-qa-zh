# StackOverflow 问答 000675000-000675999

# vb.net - 如何通过 VB.NET 中的数组访问类变量？

> ID：675002
> 
> 赞同：0
> 
> 时间：2009-03-23T19:57:13.053
> 
> 标签：vb.net, class

如果我有以下类和声明：

```
Public Class objLocation
   Public SysLocationId As String
   Public NameFull As String
   Public LatRaw As String
   Public LongRaw As String
   Public Active As Integer
End Class

dim lLocation as new objLocation 
```

我可以访问每个变量`lLocation.SysLocationId`，等等。有没有另一种方法，所以我可以通过索引访问每个变量，比如 lLocation(0)、lLocation(1) 等，这让我可以灵活地与类进行比较通过 for next 循环或针对其他来源（如数据表）的相同类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T20:08:30.500

如果您的目标是比较，通常您要做的是实现`IComparable`接口或重载`>`,`<`运算符（如果需要排序）或仅`=`运算符（如果需要等价）。

您只需在一个位置编写一个函数，并在需要进行比较时调用该函数。与存储在数据库中的对象进行比较也是如此。将这些函数放在哪里取决于您的应用程序体系结构，但对于对象-对象比较，您可以将其作为`objLocation`类本身的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T19:59:42.800

不，你不能直接这样做。

您必须使用反射来获取属性，但您必须注意不能保证返回的属性的顺序（如果您想以数字方式索引它们，这一点很重要）。

因此，在使用属性（和索引）时，您必须保持排序顺序一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T20:06:56.917

您是否在寻找列表：

```
Dim LocationList As List<objLocation>;

For Each loc As objLocation In LocationList
    loc.whatever
Next 
```

或使用索引：

```
For i = 0 To LocationList.Length - 1
    LocationList(i).whatever
Next 
```

抱歉，如果 VB 语法不正确...我最近一直在做 C#，但没有 VB

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T20:07:16.260

您可以按如下方式进行。它是 C#，与在 VB 中使用索引器有些不同，但您绝对应该能够让它在 VB 中工作。

```
public class ObjLocation
{
   private String[] Properties = new String[5];

   public const Int32 IndexSysLocationId = 0;
   public const Int32 IndexNameFull = 1;
   public const Int32 IndexLatRaw = 2;
   public const Int32 IndexLongRaw = 3;
   public const Int32 IndexActive = 4;

   // Repeat this for all properties
   public String SysLocationId
   {
      get { return this.Properties[ObjLocation.IndexSysLocationId]; }
      set { this.Properties[ObjLocation.IndexSysLocationId] = value; }
   }         

   public String this[Int32 index]
   {
      get { return this.Properties[index]; }
      set { this.Properties[index] = value; }
   }
} 
```

现在您有了与以前一样具有属性的对象，但存储在一个数组中，您还可以通过索引器访问它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-23T20:24:48.947

对此没有内置语言支持。但是，您可以通过在类上创建默认索引器属性来模拟这一点

```
Public Class objLocation
  ...
Default Public ReadOnly Property Indexer(ByVal index As Integer)
    Get
        Select Case index
            Case 0
                Return SysLocationId
            Case 1
                Return NameFull
            Case 2
                Return LatRaw
            Case 3
                Return LongRaw
            Case 4
                Return Active
            Case Else
                Throw New ArgumentException
        End Select
    End Get
  End Property 
```

然后你可以按如下方式使用它

```
Dim x As objLocation = GetObjLocation
Dim latRaw = x(2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-04-28T12:58:38.660

我在公共结构中实现的这个方法返回存储在结构中的字符串变量数组：

```
Public Shared Function returnArrayValues() As ArrayList

    Dim arrayOutput As New ArrayList()
    Dim objInstance As New LibertyPIMVaultDefaultCategories()
    Dim t As Type = objInstance.GetType()
    Dim arrayfinfo() As System.Reflection.FieldInfo = t.GetFields()
    For Each finfo As System.Reflection.FieldInfo In arrayfinfo
        Dim str As String = finfo.GetValue(objInstance)
        arrayOutput.Add(str)
    Next

    Return arrayOutput
End Function 
```

将它放在结构或类中。也许这个示例代码有帮助。

# c++ - 在VS2008中使用Qt时，IntelliSense无法正常工作

> ID：675005
> 
> 赞同：4
> 
> 时间：2009-03-23T19:57:39.653
> 
> 标签：c++, visual-studio-2008, qt

我在 Visual Studio 2008 中使用 Qt 4.4.2。

当我编写代码时，IntelliSense 似乎死了——它没有显示 Qt 对象（如 QPushButton）中的任何方法或数据成员，看不到 QObject::connect 静态方法等。

这是典型情况还是我在安装库时做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-23T20:13:59.083

最有可能的非标准扩展，如`public slots:`等。

Qt 站点上已经有一个常见问题解答：[Intellisense 不适用于我的 Qt 应用程序。怎么了？](http://developer.qt.nokia.com/faq/answer/intellisense_does_not_work_for_my_qt_application._whats_wrong)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-23T20:14:25.867

您需要告诉 Intellisense QT 包含目录。这可以通过转到 Tools -> Options -> Projects and Solutions -> VC++ Directories 找到。将它们添加到右侧的*Show Directories for: Include Files*列表中。我不知道 QT 安装是否默认执行此操作。

此外，请确保您的 VS 项目文件将 QT 包含目录作为C/C++ 常规设置下的*附加包含目录的一部分。*（虽然如果你能成功编译，你可能已经有了这个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T14:55:29.840

切换到 VisualAssist。无论如何，这是必须的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T01:01:03.770

对我来说，问题是通过删除解决方案的 .ncb 文件，然后重建以重新生成它来解决的。在那之后，智能感知起作用了。

# asp.net - 如何从 Web 在我的服务器上创建数据库？

> ID：675007
> 
> 赞同：0
> 
> 时间：2009-03-23T19:58:04.113
> 
> 标签：asp.net, sql-server

我的网站有一个管理员帐户，可以在其中添加新客户。添加新客户时，他们会获得一个帐户和自己的数据库。

问题是我无法从我的管理员帐户在我的服务器上创建新数据库。在本地运行时，我可以在本地添加数据库。但是，当我尝试添加到从服务器运行我的网站的服务器时，我得到了

```
CREATE DATABASE permission denied in database 'master'. 
```

我已经能够通过几种方式（本地）添加数据库。这是更简单的工作版本之一：

```
tmpConn.ConnectionString = "Data Source=.\\SQLEXPRESS; DATABASE = master;Integrated Security=True;";
sqlCreateDBQuery = " CREATE DATABASE " + dbname;

SqlCommand myCommand = new SqlCommand(sqlCreateDBQuery, tmpConn);
try
{
    tmpConn.Open();
    myCommand.ExecuteNonQuery();

}
catch (System.Exception ex)
{} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T20:45:31.300

我怀疑您用来连接 Sql Server 的任何帐户都没有创建数据库的权限。您可能正在使用集成安全性，它将使用网络服务/ASP.NET 连接到 MSSQL。您需要创建一个[新的连接字符串](http://connectionstrings.com/)，该字符串使用带有 sa（或其他系统管理员）凭据的 Sql 身份验证。

哦 - 这将在本地工作，因为你在 Visual Studio 的 WebDev.exe 下运行它，它使用你的本地用户帐户运行 - 这可能在 MSSQL 中设置为系统管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T20:00:47.227

您应该联系您的服务提供商。（或服务器的维护者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T20:35:55.503

没有人建议的其他事情是您正在对`dbname`价值进行什么样的验证。你确定里面没有空格吗？这不是保留字吗？它不包含恶意代码？至少你应该把它括在括号中：

```
sqlCreateDBQuery = String.Format(" CREATE DATABASE [{0}]", dbname); 
```

我真的希望你不允许用户直接在某个地方的文本框中输入这个名称。即使您在初始输入上使用了属性安全性，并且这是从某种常见的“客户端”数据库中拉回的，您也可能正在为二阶 Sql 注入漏洞做好准备。

*解决该问题后*，我们可以在此处查看错误消息。在这种情况下，问题在于您的 Web 用户没有适当的 CREATE 权限。你需要纠正它，它应该允许你继续。您可能希望为此保留一个特殊帐户，此时您切换到该帐户，因此您的应用程序通常不会在允许此类操作的上下文中运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T20:21:05.790

您需要创建数据库和创建数据库用户权限。您的服务提供商应该能够促进这一点。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-23T20:20:59.050

检查 MySQL 的权限：您的管理员帐户是否对本地连接和任何主机有不同的设置？

# mysql - 问号在 MySQL 中“WHERE column = ?”的意义是什么？

> ID：675010
> 
> 赞同：49
> 
> 时间：2009-03-23T19:58:17.467
> 
> 标签：mysql, syntax

我正在剖析一些代码并遇到了这个，

```
$sql = 'SELECT page.*, author.name AS author, updator.name AS updator '
     . 'FROM '.TABLE_PREFIX.'page AS page '
     . 'LEFT JOIN '.TABLE_PREFIX.'user AS author ON author.id = page.created_by_id '
     . 'LEFT JOIN '.TABLE_PREFIX.'user AS updator ON updator.id = page.updated_by_id '
     . 'WHERE slug = ? AND parent_id = ? AND (status_id='.Page::STATUS_REVIEWED.' OR status_id='.Page::STATUS_PUBLISHED.' OR status_id='.Page::STATUS_HIDDEN.')'; 
```

我想知道“？”是什么？在 WHERE 语句中执行。它是某种参数持有者吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-03-23T20:03:46.533

准备好的语句使用“？” 在 MySQL 中允许将参数绑定到语句。如果使用得当，被高度认为对 SQL 注入更安全。这也允许更快的 SQL 查询，因为请求只需编译一次并且可以重复使用。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-03-23T20:05:50.600

问号表示稍后将被替换的参数。使用参数化查询比将参数直接嵌入查询更安全。

SQL Server 称之为参数化查询，Oracle 称之为绑定变量。

用法因您执行查询的语言而异。

这是一个如何从 PHP 中使用它的示例。

假设这`$mysqli`是一个数据库连接并且`people`是一个有 4 列的表。

```
$stmt = $mysqli->prepare("INSERT INTO People VALUES (?, ?, ?, ?)");

$stmt->bind_param('sssd', $firstName, $lastName, $email, $age); 
```

`'sssd'`是标识其余参数的标志，其中表示`s`字符串并`d`表示数字。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-24T11:17:22.857

**`?`在 MySQL 语句中没有特殊含义`WHERE =`，仅在准备好的语句中**

我们看到的最常见的情况是由于`?`几个 Web 框架（如 PHP 和 Rails）赋予的特殊含义。

`?`只是一个语法错误：

```
CREATE TABLE t (s CHAR(1));
SELECT * FROM t WHERE s = ?; 
```

因为它没有被引用，并且在：

```
INSERT INTO t VALUES ('a');
INSERT INTO t VALUES ("?");
SELECT * FROM t WHERE s = '?'; 
```

它返回：

```
s
? 
```

因此显然没有特殊意义。

**MySQL 5.0 准备好的语句**

MySQL 5.0 添加了[prepared statement 功能](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)，该功能与Web 框架中的问号具有相似的语义。

文档中的示例：

```
PREPARE stmt1 FROM 'SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse';
SET @a = 3;
SET @b = 4;
EXECUTE stmt1 USING @a, @b; 
```

输出：

```
hypotenuse
5 
```

这些也会按预期转义特殊字符：

```
PREPARE stmt1 FROM 'SELECT ? AS s';
SET @a = "'";
EXECUTE stmt1 USING @a; 
```

输出：

```
s
' 
```

**导轨示例**

例如，在 Rails 中，问号被库的编程语言 (Ruby) 的变量给出的参数替换，例如：

```
Table.where("column = ?", "value") 
```

它会自动引用参数以避免错误和 SQL 注入，生成如下语句：

```
SELECT * FROM Table WHERE column = 'value'; 
```

在以下情况下，引用将拯救我们：

```
Table.where("column = ?", "; INJECTION") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T13:57:13.800

这些是准备好的陈述，准备好的陈述有两个主要好处：

> 查询只需要解析（或准备）一次，但可以使用相同或不同的参数多次执行。准备好查询后，数据库将分析、编译和优化其执行查询的计划。对于复杂的查询，这个过程可能会占用足够的时间，如果需要使用不同的参数多次重复相同的查询，它会显着降低应用程序的速度。通过使用准备好的语句，应用程序避免重复分析/编译/优化循环。这意味着准备好的语句使用更少的资源，因此运行得更快。
> 
> 准备好的语句的参数不需要引用；驱动程序会自动处理这个。如果应用程序专门使用预准备语句，开发人员可以确定不会发生 SQL 注入（但是，如果查询的其他部分是使用非转义输入构建的，则 SQL 注入仍然是可能的）。

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

# perl - Perl：计算大量数据的相关系数时的编程效率

> ID：675021
> 
> 赞同：3
> 
> 时间：2009-03-23T20:04:05.253
> 
> 标签：perl, memory, performance, dataset

编辑：链接现在应该可以工作了，抱歉

我有一个看起来像这样的文本文件：

```
名称，测试 1，测试 2，测试 3，测试 4，测试 5
鲍勃, 86, 83, 86, 80, 23
爱丽丝, 38, 90, 100, 53, 32
吉尔，49 岁、53 岁、63 岁、43 岁、23 岁。

```

我正在编写一个程序，给定这个文本文件，它将生成一个 Pearson 的相关系数表，如下所示，其中条目 (x,y) 是人员 x 和人员 y 之间的相关性：

```
姓名，鲍勃，爱丽丝，吉尔
鲍勃，1，0.567088412588577，0.899798494392584
爱丽丝, 0.567088412588577, 1, 0.812425393004088
吉尔, 0.899798494392584, 0.812425393004088, 1

```

我的程序可以工作，只是我输入的数据集有 82 列，更重要的是，有 54000 行。当我现在运行我的程序时，它非常慢，并且出现内存不足的错误。有没有办法我可以首先消除内存不足错误的任何可能性，并可能使程序运行得更有效率？代码在这里：[代码](http://www.duke.edu/~jl128/correlation.txt)。

谢谢你的帮助，
杰克

编辑：如果其他人试图进行大规模计算，请将您的数据转换为 hdf5 格式。这就是我最终为解决这个问题所做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-23T20:09:02.853

您将不得不进行至少 54000^2*82 次计算和比较。当然，这将需要很多时间。你把一切都记在心里了吗？那也会相当大。它会更慢，但如果您可以将用户保存在数据库中并计算一个用户与所有其他用户，然后继续下一个用户并针对所有其他用户而不是一个庞大的数组或散列，它可能会使用更少的内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-23T20:55:33.710

查看[Tie::File](http://search.cpan.org/perldoc?Tie::File)以处理将输入和输出文件存储在内存中的高内存使用情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-23T21:47:23.180

你搜索过CPAN吗？我自己的搜索产生了另一种计算 Pearsons 相关性的方法 gsl_stats_correlation。这个在[Math::GSL::Statistics](http://search.cpan.org/search?query=Math::GSL::Statistics)中。该模块绑定到 GNU 科学库。

> gsl_stats_correlation($data1, $stride1, $data2, $stride2, $n) - 这个函数有效地计算数组引用 $data1 和 $data2 之间的 Pearson 相关系数，它们必须具有相同的长度 $n。r = cov(x, y) / (\Hat\sigma_x \Hat\sigma_y) = {1/(n-1) \sum (x_i - \Hat x) (y_i - \Hat y) \over \sqrt{1 /(n-1) \sum (x_i - \Hat x)^2} \sqrt{1/(n-1) \sum (y_i - \Hat y)^2} }

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-24T13:42:25.443

您可能想查看[PDL](http://pdl.perl.org/)：

> PDL（“Perl 数据语言”）使标准 Perl 能够紧凑地存储和快速操作大型 N 维数据数组，这些数组是科学计算的基础

.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-23T21:18:14.030

基本上 Paul Tomblin 已经给了你答案：计算量很大，所以需要很长时间。这是很多数据，所以会占用很多内存。

但是，可能有一个问题：如果您使用 perl 5.10.0，则在每个方法开始时的列表分配可能会成为该版本 perl 中细微性能错误的受害者（参见[perlmonks 线程](http://perlmonks.com/?node_id=658723)）。

几个小点：

打印输出实际上可能会减慢程序的速度，具体取决于它的位置。

无需为每一行重新打开输出文件！只需执行以下操作：

```
open FILE, ">", "file.txt" or die $!;
print FILE "Name, ", join(", ", 0..$#{$correlations[0]}+1), "\n";
my $rowno = 1;
foreach my $row (@correlations) {
  print FILE "$rowno, " . join(", ", @$row) . "\n";
  $rowno++;
}
close FILE; 
```

最后，虽然我确实尽可能使用 Perl，并使用您描述的程序和数据集，但它可能是简单地使用 C++ 及其 iostreams（这使得解析足够容易）来完成这项任务的最简单途径。

请注意，所有这些都只是轻微的优化。没有算法增益。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-23T20:56:56.140

我不太了解您正在尝试做什么以提供有关实施的良好建议，但您可能会看[`Statistics::LSNoHistory`](http://search.cpan.org/dist/Statistics-LSNoHistory/LSNoHistory.pm)，它声称有一种方法`pearson_r`可以返回 Pearson 的 r 相关系数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-10-10T12:41:36.713

除了上面关于 PDL 的评论之外，这里是如何非常有效地计算非常大的数据集的相关表的代码：

```
use PDL::Stats; # this useful module can be downloaded from CPAN
my $data = random(82, 5400); # your data should replace this
my $table = $data->corr_table(); # that's all, really 
```

您可能需要`$PDL::BIGPDL = 1;`在脚本的标题中进行设置，并确保在具有大量内存的机器上运行它。计算本身相当快，一张 82 x 5400 的表格在我的笔记本电脑上只用了几秒钟。

# mysql - MySQL 的 MEMORY 存储引擎的替代品

> ID：675032
> 
> 赞同：5
> 
> 时间：2009-03-23T20:08:46.647
> 
> 标签：mysql, performance, storage-engines

我目前正在对 MyISAM 表运行一些密集的 SELECT 查询。该表大约有 100 MiB（800,000 行）并且它永远不会改变。

我需要提高脚本的性能，所以我正在考虑将表从 MyISAM 移动到 MEMORY 存储引擎，这样我就可以将它完全加载到内存中。

除了 MEMORY 存储引擎，我还有哪些选项可以将 100 MiB 的表加载到内存中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T11:16:10.537

无论您使用什么存储引擎，一个有 800k 行的表对 mysql 来说都不是问题。大小为 100 MB 的完整表（数据和键）应该存在于内存中（mysql 键缓存、OS 文件缓存或两者兼有）。

首先，您检查索引。在大多数情况下，优化索引会给您带来最佳的性能提升。永远不要做任何其他事情，除非你很确定它们的形状。使用 调用查询`EXPLAIN`并注意未使用索引或使用错误索引的情况。这应该使用真实世界的数据而不是在具有测试数据的服务器上完成。

优化索引后，查询应在几分之一秒内完成。如果查询仍然太慢，那么只需尝试通过在应用程序中使用缓存（memcached 等）来避免运行它们。鉴于表中的数据永远不会改变，旧的缓存数据等应该没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T20:16:41.917

假设数据很少更改，您可能会使用[MySql 查询缓存](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)显着提高查询的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T20:21:24.837

如果您的表被大量查询，它可能已经在操作系统级别缓存，具体取决于您的服务器中有多少内存。

MyISAM 还允许使用称为[MyISAM Ke​​y Cache](http://dev.mysql.com/doc/refman/5.1/en/myisam-key-cache.html)的机制将 MyISAM 表索引预加载到内存中。创建键缓存后，您可以使用[CACHE INDEX](http://dev.mysql.com/doc/refman/5.1/en/cache-index.html)或[LOAD INDEX](http://dev.mysql.com/doc/refman/5.1/en/load-index.html)语法将索引加载到缓存中。

我假设您已经分析了您的表和查询并在实际查询之后优化了您的索引？否则，在尝试将整个表存储在内存中之前，这确实是您应该做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T20:23:58.950

如果您有足够的内存分配给 Mysql 使用 - 在 Innodb 缓冲池中，或供 MyIsam 使用，您可以将数据库读入内存（只是一个 'SELECT * from tablename'），如果没有理由删除它，它会保留那里。

您还可以获得更好的密钥使用，因为 MEMORY 表只使用哈希键，而不是完整的 btree 访问，对于较小的、非唯一的键可能足够胖，或者对于这么大的表来说就不够了。

像往常一样，最好的做法是对其进行基准测试。

另一个想法是，如果您使用的是 v5.1，则使用 ARCHIVE 表类型，它可以被压缩，并且还可以加快对内容的访问速度，如果它们易于压缩的话。这会交换 CPU 时间来解压缩以进行 IO/内存访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-23T21:17:04.283

如果数据从不改变，您可以轻松地将表复制到多个数据库服务器上。

这样，您可以将一些查询卸载到不同的服务器，为主服务器获得一些额外的喘息空间。

速度提升取决于当前的数据库负载，如果您的数据库负载非常低，则不会有任何提升。

PS：
您知道，当数据库重新启动时，MEMORY 表会忘记它们的内容！

# asp.net - DotNetNuke ObjectDataSource.SelectMethod 未保存在视图状态中

> ID：675034
> 
> 赞同：0
> 
> 时间：2009-03-23T20:09:02.043
> 
> 标签：asp.net, dotnetnuke, objectdatasource, dotnetnuke-module

我正在使用 DotNetNuke 4.9.2 并且遇到了一个奇怪的问题。

我正在开发的模块中有一个 MultiView，其中一个视图中有一个绑定到 ObjectDataSource 的 GridView。

在一个单独的视图中，我有几个按钮可以在第二个视图中切换 ObjectDataSource 的 SelectMethod，然后将该视图设置为活动状态。一切正常，直到网格在第二个视图上排序 - 这会导致回发并且 ODS 以某种方式获取其原始 SelectMethod。但是，在代码隐藏中同时分配的 SelectParameters 仍然存在。

在我看来，ObjectDataSource 应该记住视图状态中的 SelectMethod，不是吗？

```
<asp:ObjectDataSource runat="server" ID="MyObjectDataSource" SelectMethod="MyFirstSelectMethod" TypeName="Whatever"></asp:ObjectDataSource>

protected void Button1_Click(object sender, EventArgs e)
{
    MyObjectDataSource.SelectMethod = "MyNewMethod";
    // more code here to change the parameters as well...
    MyMultiView.SetActiveView(MyView2);
} 
```

当我运行该按钮单击时，网格按预期显示。当我单击 GridView 的列标题之一并中断页面加载以检查 SelectMethod 时，它已恢复为标记中声明的标题。

关于我的问题可能在这里的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T14:15:33.787

我猜你已经确定你没有在页面重新加载时重置 .SelectMethod ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T14:45:04.917

我最终解决了这个问题，只使用一个页面属性来保存选择方法，然后在每次回发时重置它......

```
protected string MySelectMethod
{
    get
    {
        return (string)ViewState["MySelectMethod"] ?? MySearchResultsDataSource.SelectMethod;
    }
    set
    {
        ViewState["MySelectMethod"] = value;

        MySearchResultsDataSource.SelectMethod = value;

    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        MySearchResultsDataSource.SelectMethod = MySelectMethod;
    }
}

protected void MyButton_Click(object sender, EventArgs e)
{
    MySelectMethod = "MyNewMethod";
} 
```

仍然不确定为什么 SelectMethod 道具不会粘在 nuke 中的回发上。我确信这在过去的直接 asp.net 项目中对我来说效果很好......

# mysql - 如何使用 phpMyAdmin 添加指向同一个表的外键？

> ID：675037
> 
> 赞同：7
> 
> 时间：2009-03-23T20:09:20.997
> 
> 标签：mysql, foreign-keys, innodb, self-join, phpmyadmin

我有一个现有的 InnoDB 表，它已经有指向不同表的外键。

但是当我尝试创建一个指向主索引的外键时，我得到一个错误（检查数据类型）。

该表是以 User_Id 作为主表的用户。

我想要一个外键 Manager_ID，它是 User_Id 的 FK。

两个 INT 两个 长度 10 无符号...

但我仍然收到数据检查错误...？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-23T20:24:15.923

确保 Manager_ID**未**设置为`NOT NULL`。

您必须在该字段上允许空值，因为公司中最高层的人将没有经理。

~~我在 MySQL 板上找到[了一篇可能有帮助的帖子。](http://forums.mysql.com/read.php?135,187196,189519#msg-189519)~~

# c++ - 如何在 C++/Linux 中创建目录树？

> ID：675039
> 
> 赞同：129
> 
> 时间：2009-03-23T20:10:26.110
> 
> 标签：c++, linux, directory

我想要一种在 C++/Linux 中创建多个目录的简单方法。

例如我想在目录中保存一个文件 lola.file ：

```
/tmp/a/b/c 
```

但如果目录不存在，我希望它们自动创建。一个工作示例将是完美的。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2009-03-23T20:29:58.077

使用 Boost.Filesystem 很容易：[`create_directories`](http://www.boost.org/doc/libs/1_57_0/libs/filesystem/doc/reference.html#create_directories)

```
#include <boost/filesystem.hpp>
//...
boost::filesystem::create_directories("/tmp/a/b/c"); 
```

返回：`true`如果创建了新目录，否则`false`。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2009-03-23T20:52:50.080

对于 C++17 或更高版本，有标准头文件`<filesystem>`和函数 [`std::filesystem::create_directories`](https://en.cppreference.com/w/cpp/filesystem/create_directory) ，应该在现代 C++ 程序中使用。但是，C++ 标准函数没有特定于 POSIX 的显式权限（模式）参数。

但是，这里有一个可以用 C++ 编译器编译的 C 函数。

```
/*
@(#)File:           mkpath.c
@(#)Purpose:        Create all directories in path
@(#)Author:         J Leffler
@(#)Copyright:      (C) JLSS 1990-2020
@(#)Derivation:     mkpath.c 1.16 2020/06/19 15:08:10
*/

/*TABSTOP=4*/

#include "posixver.h"
#include "mkpath.h"
#include "emalloc.h"

#include <errno.h>
#include <string.h>
/* "sysstat.h" == <sys/stat.h> with fixup for (old) Windows - inc mode_t */
#include "sysstat.h"

typedef struct stat Stat;

static int do_mkdir(const char *path, mode_t mode)
{
    Stat            st;
    int             status = 0;

    if (stat(path, &st) != 0)
    {
        /* Directory does not exist. EEXIST for race condition */
        if (mkdir(path, mode) != 0 && errno != EEXIST)
            status = -1;
    }
    else if (!S_ISDIR(st.st_mode))
    {
        errno = ENOTDIR;
        status = -1;
    }

    return(status);
}

/**
** mkpath - ensure all directories in path exist
** Algorithm takes the pessimistic view and works top-down to ensure
** each directory in path exists, rather than optimistically creating
** the last element and working backwards.
*/
int mkpath(const char *path, mode_t mode)
{
    char           *pp;
    char           *sp;
    int             status;
    char           *copypath = STRDUP(path);

    status = 0;
    pp = copypath;
    while (status == 0 && (sp = strchr(pp, '/')) != 0)
    {
        if (sp != pp)
        {
            /* Neither root nor double slash in path */
            *sp = '\0';
            status = do_mkdir(copypath, mode);
            *sp = '/';
        }
        pp = sp + 1;
    }
    if (status == 0)
        status = do_mkdir(path, mode);
    FREE(copypath);
    return (status);
}

#ifdef TEST

#include <stdio.h>
#include <unistd.h>

/*
** Stress test with parallel running of mkpath() function.
** Before the EEXIST test, code would fail.
** With the EEXIST test, code does not fail.
**
** Test shell script
** PREFIX=mkpath.$$
** NAME=./$PREFIX/sa/32/ad/13/23/13/12/13/sd/ds/ww/qq/ss/dd/zz/xx/dd/rr/ff/ff/ss/ss/ss/ss/ss/ss/ss/ss
** : ${MKPATH:=mkpath}
** ./$MKPATH $NAME &
** [...repeat a dozen times or so...]
** ./$MKPATH $NAME &
** wait
** rm -fr ./$PREFIX/
*/

int main(int argc, char **argv)
{
    int             i;

    for (i = 1; i < argc; i++)
    {
        for (int j = 0; j < 20; j++)
        {
            if (fork() == 0)
            {
                int rc = mkpath(argv[i], 0777);
                if (rc != 0)
                    fprintf(stderr, "%d: failed to create (%d: %s): %s\n",
                            (int)getpid(), errno, strerror(errno), argv[i]);
                exit(rc == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
            }
        }
        int status;
        int fail = 0;
        while (wait(&status) != -1)
        {
            if (WEXITSTATUS(status) != 0)
                fail = 1;
        }
        if (fail == 0)
            printf("created: %s\n", argv[i]);
    }
    return(0);
}

#endif /* TEST */ 
```

宏`STRDUP()`and`FREE()`是 and 的错误检查版本， 在`strdup()`and`free()`中声明`emalloc.h`（并在 `emalloc.c`and中实现`estrdup.c`）。标`"sysstat.h"`头处理损坏的版本，`<sys/stat.h>` 并且可以`<sys/stat.h>`在现代 Unix 系统上替换（但早在 1990 年就有很多问题）。并`"mkpath.h"`声明`mkpath()`。

v1.12（答案的原始版本）和 v1.13（答案的修改版本）之间的变化是对`EEXIST`in 的测试`do_mkdir()`。[Switch](https://stackoverflow.com/users/205938/switch)指出这是必要的 ——谢谢你，Switch。测试代码已升级并在一台MacBook Pro（2.3GHz Intel Core i7，运行Mac OS X 10.7.4）上重现问题，并提示问题在revision中已修复（但测试只能显示存在bug ，他们永远不会缺席）。显示的代码现在是 v1.16；自 v1.13 以来已经进行了外观或管理更改（例如使用`mkpath.h`而不是无条件地`jlss.h`包含在测试代码中）。除非你有一个异常顽固的系统，否则它应该被替换是 `<unistd.h>`合理的。`"sysstat.h"``<sys/stat.h>`

*（特此允许您出于任何目的使用此代码并注明出处。）*

此代码在我 的 GitHub 上的[SOQ](https://github.com/jleffler/soq)`mkpath.c` （堆栈溢出问题）存储库中作为文件和 `mkpath.h`（等）在 [src/so-0067-5039](https://github.com/jleffler/soq/tree/master/src/so-0067-5039) 子目录中可用。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2009-03-23T20:12:34.483

```
system("mkdir -p /tmp/a/b/c") 
```

是我能想到的最短方式（就代码长度而言，不一定是执行时间）。

它不是跨平台的，但可以在 Linux 下工作。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-04-23T16:08:06.277

这是我的代码示例（适用于 Windows 和 Linux）：

```
#include <iostream>
#include <string>
#include <sys/stat.h> // stat
#include <errno.h>    // errno, ENOENT, EEXIST
#if defined(_WIN32)
#include <direct.h>   // _mkdir
#endif

bool isDirExist(const std::string& path)
{
#if defined(_WIN32)
    struct _stat info;
    if (_stat(path.c_str(), &info) != 0)
    {
        return false;
    }
    return (info.st_mode & _S_IFDIR) != 0;
#else 
    struct stat info;
    if (stat(path.c_str(), &info) != 0)
    {
        return false;
    }
    return (info.st_mode & S_IFDIR) != 0;
#endif
}

bool makePath(const std::string& path)
{
#if defined(_WIN32)
    int ret = _mkdir(path.c_str());
#else
    mode_t mode = 0755;
    int ret = mkdir(path.c_str(), mode);
#endif
    if (ret == 0)
        return true;

    switch (errno)
    {
    case ENOENT:
        // parent didn't exist, try to create it
        {
            int pos = path.find_last_of('/');
            if (pos == std::string::npos)
#if defined(_WIN32)
                pos = path.find_last_of('\\');
            if (pos == std::string::npos)
#endif
                return false;
            if (!makePath( path.substr(0, pos) ))
                return false;
        }
        // now, try to create again
#if defined(_WIN32)
        return 0 == _mkdir(path.c_str());
#else 
        return 0 == mkdir(path.c_str(), mode);
#endif

    case EEXIST:
        // done!
        return isDirExist(path);

    default:
        return false;
    }
}

int main(int argc, char* ARGV[])
{
    for (int i=1; i<argc; i++)
    {
        std::cout << "creating " << ARGV[i] << " ... " << (makePath(ARGV[i]) ? "OK" : "failed") << std::endl;
    }
    return 0;
} 
```

用法：

```
$ makePath 1/2 folderA/folderB/folderC
creating 1/2 ... OK
creating folderA/folderB/folderC ... OK 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2009-03-23T20:15:20.123

```
#include <sys/types.h>
#include <sys/stat.h>

int status;
...
status = mkdir("/tmp/a/b/c", S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH); 
```

从[这里](http://linux.die.net/man/3/mkdir)。您可能必须为 /tmp、/tmp/a、/tmp/a/b/ 和 /tmp/a/b/c 执行单独的 mkdir，因为在 C api 中没有等效的 -p 标志。确保在执行上层操作时忽略 EEXISTS errno。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2018-10-29T18:13:45.553

需要注意的是，从 C++17 开始，文件系统接口是标准库的一部分。这意味着可以有以下内容来创建目录：

```
#include <filesystem>

std::filesystem::create_directories("/a/b/c/d") 
```

更多信息：[https ://en.cppreference.com/w/cpp/filesystem/create_directory](https://en.cppreference.com/w/cpp/filesystem/create_directory)

此外，使用 gcc，需要将“-std=c++17”设置为 CFLAGS。和“-lstdc++fs”到 LDLIBS。未来可能不需要后者。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-10-15T21:16:14.140

这与前面类似，但通过字符串向前而不是向后递归。将 errno 保留为上次失败的正确值。如果有一个前导斜线，则通过循环会有额外的时间，这可以通过循环外的一个 find_first_of() 或通过检测前导 / 并将 pre 设置为 1 来避免。无论我们是由 a 设置的，效率都是相同的第一个循环或预循环调用，使用预循环调用时复杂性会（略）高一些。

```
#include <iostream>
#include <string>
#include <sys/stat.h>

int
mkpath(std::string s,mode_t mode)
{
    size_t pos=0;
    std::string dir;
    int mdret;

    if(s[s.size()-1]!='/'){
        // force trailing / so we can handle everything in loop
        s+='/';
    }

    while((pos=s.find_first_of('/',pos))!=std::string::npos){
        dir=s.substr(0,pos++);
        if(dir.size()==0) continue; // if leading / first time is 0 length
        if((mdret=mkdir(dir.c_str(),mode)) && errno!=EEXIST){
            return mdret;
        }
    }
    return mdret;
}

int main()
{
    int mkdirretval;
    mkdirretval=mkpath("./foo/bar",0755);
    std::cout << mkdirretval << '\n';

} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2009-03-23T20:15:56.957

您说的是“C++”，但这里的每个人似乎都在想“Bash shell”。

查看 gnu 的源代码`mkdir`；然后你可以看到如何在 C++ 中实现 shell 命令。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-07-06T17:27:47.990

```
bool mkpath( std::string path )
{
    bool bSuccess = false;
    int nRC = ::mkdir( path.c_str(), 0775 );
    if( nRC == -1 )
    {
        switch( errno )
        {
            case ENOENT:
                //parent didn't exist, try to create it
                if( mkpath( path.substr(0, path.find_last_of('/')) ) )
                    //Now, try to create again.
                    bSuccess = 0 == ::mkdir( path.c_str(), 0775 );
                else
                    bSuccess = false;
                break;
            case EEXIST:
                //Done!
                bSuccess = true;
                break;
            default:
                bSuccess = false;
                break;
        }
    }
    else
        bSuccess = true;
    return bSuccess;
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-09-19T21:28:27.260

所以我`mkdirp()`今天需要，发现这个页面上的解决方案过于复杂。因此，我写了一个相当短的片段，很容易被其他偶然发现这个线程的人复制进去，想知道为什么我们需要这么多行代码。

**mkdirp.h**

```
#ifndef MKDIRP_H
#define MKDIRP_H

#include <sys/stat.h>

#define DEFAULT_MODE      S_IRWXU | S_IRGRP |  S_IXGRP | S_IROTH | S_IXOTH

/** Utility function to create directory tree */
bool mkdirp(const char* path, mode_t mode = DEFAULT_MODE);

#endif // MKDIRP_H 
```

**mkdirp.cpp**

```
#include <errno.h>

bool mkdirp(const char* path, mode_t mode) {
  // const cast for hack
  char* p = const_cast<char*>(path);

  // Do mkdir for each slash until end of string or error
  while (*p != '\0') {
    // Skip first character
    p++;

    // Find first slash or end
    while(*p != '\0' && *p != '/') p++;

    // Remember value from p
    char v = *p;

    // Write end of string at p
    *p = '\0';

    // Create folder from path to '\0' inserted at p
    if(mkdir(path, mode) == -1 && errno != EEXIST) {
      *p = v;
      return false;
    }

    // Restore path to it's former glory
    *p = v;
  }

  return true;
} 
```

如果您不喜欢 const 强制转换和临时修改字符串，只需执行 a`strdup()`和`free()`它之后。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-12-11T22:16:36.207

由于这篇文章在 Google 中的“创建目录树”排名很高，我将发布一个适用于 Windows 的答案——这将使用为 UNICODE 或 MBCS 编译的 Win32 API 工作。这是从上面的 Mark 代码移植而来的。

由于这是我们正在使用的 Windows，目录分隔符是反斜杠，而不是正斜杠。如果您希望使用正斜杠，请更改**`'\\'`**为**`'/'`**

它将与：

```
c:\foo\bar\hello\world 
```

和

```
c:\foo\bar\hellp\world\ 
```

（即：不需要斜杠，因此您不必检查它。）

在说“只在 Windows 中使用**SHCreateDirectoryEx()** ”之前，请注意**SHCreateDirectoryEx()**已被弃用，并且可以随时从 Windows 的未来版本中删除。

```
bool CreateDirectoryTree(LPCTSTR szPathTree, LPSECURITY_ATTRIBUTES lpSecurityAttributes = NULL){
    bool bSuccess = false;
    const BOOL bCD = CreateDirectory(szPathTree, lpSecurityAttributes);
    DWORD dwLastError = 0;
    if(!bCD){
        dwLastError = GetLastError();
    }else{
        return true;
    }
    switch(dwLastError){
        case ERROR_ALREADY_EXISTS:
            bSuccess = true;
            break;
        case ERROR_PATH_NOT_FOUND:
            {
                TCHAR szPrev[MAX_PATH] = {0};
                LPCTSTR szLast = _tcsrchr(szPathTree,'\\');
                _tcsnccpy(szPrev,szPathTree,(int)(szLast-szPathTree));
                if(CreateDirectoryTree(szPrev,lpSecurityAttributes)){
                    bSuccess = CreateDirectory(szPathTree,lpSecurityAttributes)!=0;
                    if(!bSuccess){
                        bSuccess = (GetLastError()==ERROR_ALREADY_EXISTS);
                    }
                }else{
                    bSuccess = false;
                }
            }
            break;
        default:
            bSuccess = false;
            break;
    }

    return bSuccess;
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-01-29T17:09:20.237

我知道这是一个老问题，但它在谷歌搜索结果中显示很高，这里提供的答案并不是真正的 C++ 或有点太复杂。

请注意，在我的示例中 createDirTree() 非常简单，因为所有繁重的工作（错误检查、路径验证）无论如何都需要由 createDir() 完成。如果目录已经存在或者整个事情都不起作用， createDir() 也应该返回 true。

以下是我在 C++ 中的做法：

```
#include <iostream>
#include <string>

bool createDir(const std::string dir)
{
    std::cout << "Make sure dir is a valid path, it does not exist and create it: "
              << dir << std::endl;
    return true;
}

bool createDirTree(const std::string full_path)
{
    size_t pos = 0;
    bool ret_val = true;

    while(ret_val == true && pos != std::string::npos)
    {
        pos = full_path.find('/', pos + 1);
        ret_val = createDir(full_path.substr(0, pos));
    }

    return ret_val;
}

int main()
{
    createDirTree("/tmp/a/b/c");
    return 0;
} 
```

当然 createDir() 函数将是系统特定的，并且在其他答案中已经有足够的示例如何为 linux 编写它，所以我决定跳过它。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-12-07T21:53:13.823

如果 dir 不存在，则创建它：

```
boost::filesystem::create_directories(boost::filesystem::path(output_file).parent_path().string().c_str()); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-01-25T08:38:48.000

这里已经描述了很多方法，但其中大多数都需要将路径硬编码到代码中。这个问题有一个简单的解决方案，使用 QDir 和 QFileInfo 这两个 Qt 框架类。由于您已经在 Linux 环境中，因此使用 Qt 应该很容易。

```
QString qStringFileName("path/to/the/file/that/dont/exist.txt");
QDir dir = QFileInfo(qStringFileName).dir();
if(!dir.exists()) {
        dir.mkpath(dir.path());
} 
```

确保您对该路径具有写入权限。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-04-18T06:05:38.470

这是 C/C++ 递归函数，`dirname()`用于自下而上遍历目录树。一旦找到现有的祖先，它就会停止。

```
#include <libgen.h>
#include <string.h>

int create_dir_tree_recursive(const char *path, const mode_t mode)
{
    if (strcmp(path, "/") == 0) // No need of checking if we are at root.
        return 0;

    // Check whether this dir exists or not.
    struct stat st;
    if (stat(path, &st) != 0 || !S_ISDIR(st.st_mode))
    {
        // Check and create parent dir tree first.
        char *path2 = strdup(path);
        char *parent_dir_path = dirname(path2);
        if (create_dir_tree_recursive(parent_dir_path, mode) == -1)
            return -1;

        // Create this dir.
        if (mkdir(path, mode) == -1)
            return -1;
    }

    return 0;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-03-23T20:12:59.973

```
mkdir -p /dir/to/the/file

touch /dir/to/the/file/thefile.ending 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-12-02T08:43:05.413

如果您还没有 C++17 并寻找与平台无关的解决方案，请使用[ghc::filesystem](https://github.com/gulrak/filesystem)。header-ony 代码与 C++17 兼容（实际上是向后移植），并且以后易于迁移。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2009-03-23T20:15:35.053

其他人给了你正确的答案，但我想我会展示你可以做的另一件巧妙的事情：

```
mkdir -p /tmp/a/{b,c}/d 
```

将创建以下路径：

```
/tmp/a/b/d
/tmp/a/c/d 
```

大括号允许您在层次结构的同一级别上一次创建多个目录，而该`-p`选项表示“根据需要创建父目录”。

# asp.net - 如何使用 javascript 访问 runat="server" ASP 元素？

> ID：675060
> 
> 赞同：9
> 
> 时间：2009-03-23T20:19:46.917
> 
> 标签：asp.net, javascript, runatserver

似乎每个人都在这样做（在代码帖子等中）......但我不知道如何。:(

每当我尝试使用 JavaScript 操作一个 asp 元素时，我都会收到一个`"element is null"`或其他`"document is undefined"`错误.....

JavaScript 通常可以正常工作，...但只有当我添加`runat="server"`属性时，该元素才会对我的 JavaScript 看起来不可见。

任何建议，将不胜感激。

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-03-23T20:24:20.337

可能发生的情况是您的元素/控件位于一个或多个 ASP.NET 控件中，这些控件充当命名容器（母版页、ITemplate、向导等），这导致其 ID 发生更改。

您可以在浏览器中使用“查看源代码”来确认呈现的 HTML 中发生的情况。

如果您的 JavaScript 在 ASPX 页面中，临时解决此问题的最简单方法是[使用元素的 ClientID 属性](http://encosia.com/2007/08/08/robust-aspnet-control-referencing-in-javascript/)。例如，如果您想通过 JS 引用一个名为 TextBox1 的控件：

```
var textbox = document.getElementById('<%= TextBox1.ClientID %>'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T20:24:55.687

创建一个元素`runat="server"`会根据它所在的 ASP.NET 命名容器更改该元素的客户端 ID。因此，如果您`document.getElementById`用于操作元素，则需要将 .NET 生成的新 ID 传递给它。查看[ClientId](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx "Control.ClientId")属性以获取生成的 ID ...您可以在 Javascript 中内联使用它，如下所示：

```
var element = document.getElementById('<%=myControl.ClientID%>'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-23T20:23:35.393

如果你有一个文本框：

```
<asp:TextBox id="txtText" runat="server" /> 
```

您可以使用：

```
var textBox=document.getElementById('<%=txtText.ClientID %>'); 
```

任何 WebControl 都公开相同的 ClientID 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-23T22:37:04.043

尽管问题已经得到解答，但我想我会发布一些进一步的信息......

Rick Strahl 为这个问题提供了相当有趣的工作。

[http://www.west-wind.com/WebLog/posts/252178.aspx](http://www.west-wind.com/WebLog/posts/252178.aspx)

值得庆幸的是，当 ASP .NET 4.0 到来时，它将允许您准确地指定客户端 ID 将是什么！

[http://www.codeproject.com/KB/aspnet/ASP_NET4_0ClientIDFeature.aspx](http://www.codeproject.com/KB/aspnet/ASP_NET4_0ClientIDFeature.aspx)

# java - 动作标签在 Struts 2 中不执行

> ID：675061
> 
> 赞同：0
> 
> 时间：2009-03-23T20:19:47.807
> 
> 标签：java, html, jsp, struts2, struts-action

我在使用 struts2 中的标记从我的 jsp 页面调用操作时遇到问题。我有 login.jsp 文件：

```
<s:action name="headerMenu" executeResult="true" namespace="/menu"</s:action>
<s:form action="executeLogin">
    <s:textfield name="username" label="Username"></s:textfield>
    <s:password name="password" label="Password"></s:password>
    <s:submit></s:submit>
</s:form> 
```

headerMenu 操作在 header.jsp 中呈现结果：

```
<div id="menu">
    <s:iterator value="menus">
        <s:property escape="false" value="'<a href=\"'+path+'\" title=\"'+description+'\">'+title+'</a>'"/>
    </s:iterator>
</div> 
```

此 jsp 文件呈现一个菜单，该菜单来自 headerMenu 操作的 Action 类中的 LinkedList（命名菜单）。

访问“login.action”时，菜单呈现正常，但是如果我在表单中输入数据，提交表单，并且提交有验证错误，我返回页面，表单呈现正常，但是菜单不见了。我仍然在页面中有“...”，但没有菜单...这就像调用了提供菜单的操作但 execute() 方法不执行...

有人可以帮我吗？

瓦西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-07-26T10:09:16.353

Please pay attention to the 1st line. The s:action tag is not closed properly. It should be as follows:

```
<s:action name="headerMenu" executeResult="true" namespace="/menu"></s:action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T03:25:19.963

我将调查原因是否与 struts2 标签文档中的以下 2 个片段有关：

“除非指定了 executeResult 参数，否则在 struts.xml 中为此操作定义的任何结果处理器都将被忽略。”

“在评估整个标签之前，该操作不会发布到上下文，这意味着在标签的主体内，无法访问该操作”

# c# - 重用会话标识符

> ID：675068
> 
> 赞同：4
> 
> 时间：2009-03-23T20:22:10.450
> 
> 标签：c#, .net, asp.net

A) 我假设 Asp.Net 仅当我们在无 cookie 模式下操作时才允许您重用会话标识符，但如果我们使用 cookie 存储会话 ID 则不允许？

B）从我的书中：

> 默认情况下，ASP.NET 允许您重用会话标识符。例如，如果您发出请求并且您的查询字符串包含过期会话，ASP.NET 会创建一个新会话并使用该会话 ID。问题是会话 ID 可能会无意中出现在公共场所 - 例如在搜索引擎的结果页面中。这可能导致多个用户使用相同的会话标识符访问服务器，然后都使用相同的共享数据加入同一个会话。”</p>

我不确定我是否了解重用会话标识符如何导致会话 ID 出现在搜索引擎的结果页面中？

C) 继续：

> 为避免这种潜在的安全风险，建议您在使用无 cookie 会话时包含可选的 regenerateExpiredSessionId 属性并将其设置为 true。这样，如果用户使用过期的会话 ID 进行连接，就会发出一个新的会话 ID。唯一的缺点是这个过程还强制当前页面丢失所有视图状态和表单数据，因为 ASP.NET 执行重定向以确保浏览器具有新的会话标识符。

为什么需要 Asp.Net 执行重定向以确保浏览器具有新的会话标识符？难道它不能从 URL 中提取会话 ID 并将其丢弃吗？

谢谢

* * *

> A) 不可以。当使用基于 cookie 的会话时，如果客户端发送了无效的会话 ID（例如来自陈旧的 cookie），服务器将拒绝该 ID，生成一个新 ID 并将该值与响应一起发送回 cookie .

只是为了确保我明白你在说什么：

*   当会话是基于 cookie 的并且如果您发出请求，但您的 cookie 包含已过期会话的会话 ID，那么服务器将生成一个新 ID？

*   但是如果会话是无 cookie 的（因此 ID 包含在 URL 中），那么默认情况下 Asp.Net 将使用相同的 ID 创建新会话？

> C) 执行重定向以确保客户端收到新的会话 id 值并正确地将其与后续请求一起发回。这只是发生了双重确认。

但是为什么不直接将新的会话 ID 放在 URL 中并将其发回。这一定是有原因的，为什么这不起作用，因此需要重定向？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-23T21:47:41.073

A) 不可以。当使用基于 cookie 的会话时，如果客户端发送了无效的会话 ID（例如来自陈旧的 cookie），服务器将拒绝该 ID，生成一个新 ID 并将该值与响应一起发送回 cookie .

B) 当使用无 cookie 会话时，搜索引擎很可能会在 URL 中植入会话 ID 来索引页面。在这种情况下，如果用户单击搜索引擎中的链接（并且 regenerateExpiredSessionid 为“true”），将使用相同的 ID 创建一个新会话。如果后续用户单击该链接，他们也将重新使用相同的 ID，如果多个用户同时使用相同的 ID 浏览，他们将在每个请求中覆盖彼此的会话值。

C) 执行重定向以确保客户端收到新的会话 id 值并正确地将其与后续请求一起发回。这只是发生了双重确认。

# yui-compressor - YUI Compressor：什么是微优化？

> ID：675079
> 
> 赞同：3
> 
> 时间：2009-03-23T20:24:54.017
> 
> 标签：yui-compressor

YUI Compressor 在其（不是很广泛的）文档中将其作为一个选项声明：

```
--disable-optimizations
    Disable all the built-in micro optimizations. 
```

有谁知道这意味着什么？
这将打开/关闭什么？
我还没有找到任何关于它的文档。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-23T20:59:15.387

查看 JavaScriptCompressor 的源码：

[第 548 行](https://github.com/yui/yuicompressor/blob/master/src/com/yahoo/platform/yui/compressor/JavaScriptCompressor.java#L548)-

```
 if (!disableOptimizations) {
        optimizeObjectMemberAccess(this.tokens);
        optimizeObjLitMemberDecl(this.tokens);
    } 
```

[第 467 行](https://github.com/yui/yuicompressor/blob/master/src/com/yahoo/platform/yui/compressor/JavaScriptCompressor.java#L467)-

```
/*
* Transforms obj["foo"] into obj.foo whenever possible, saving 3 bytes.
*/
private static void optimizeObjectMemberAccess(ArrayList tokens) { 
```

[第 497 行](https://github.com/yui/yuicompressor/blob/master/src/com/yahoo/platform/yui/compressor/JavaScriptCompressor.java#L497)-

```
/*
 * Transforms 'foo': ... into foo: ... whenever possible, saving 2 bytes.
 */
private static void optimizeObjLitMemberDecl(ArrayList tokens) { 
```

因此，它将常量字符串的使用转换为`foo['bar']`to`foo.bar`和`{'bar':x}`to `{bar:x}`。

# apache-flex - 弹性包装问题

> ID：675084
> 
> 赞同：0
> 
> 时间：2009-03-23T20:25:58.507
> 
> 标签：apache-flex, actionscript-3

在哪个 .swc 包中找到了 flash.net 命名空间类？

我认为它是 Flex.swc 或 Framework.swc，但我不确定。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T20:34:37.363

两者都不。它属于`playerglobal.swc`. 请参阅Flex 文档中的[关于 SWC 文件](http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=compilers_123_42.html)。

# regex - 如何使用正则表达式删除文件开头的文本？

> ID：675085
> 
> 赞同：3
> 
> 时间：2009-03-23T20:26:32.283
> 
> 标签：regex, perl, text, inline-editing

我有一堆包含半标准标题的文件。也就是说，它的外观非常相似，但文本有所变化。

我想从所有文件中删除此标头。

通过查看文件，我知道我要删除的内容被封装在相似的单词之间。

因此，例如，我有：

```
Foo bar...some text here...
more text
Foo bar...I want to keep everything after this point 
```

我在 perl 中尝试了这个命令：

```
perl -pi -e "s/\A.*?Foo.bar*?Foo.bar//simxg" 00ws110.txt 
```

但它不起作用。我不是正则表达式专家，但希望有人知道如何根据文本匹配而不是字符数从文件开头删除一大块文本......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-23T20:42:27.203

默认情况下，`ARGV`（又名`<>`在幕后使用`-p`）一次只读取一行。

解决方法：

1.  Unset `$/`，它告诉 Perl 一次读取整个文件。

    ```
    perl -pi -e "BEGIN{undef$/}s/\A.*?Foo.bar*?Foo.bar//simxg" 00ws110.txt 
    ```

    `BEGIN`在第一次读取完成之前运行该代码是必要的。

2.  使用`-0`，其中设置`$/ = "\0"`。

    ```
    perl -pi -0 -e "s/\A.*?Foo.bar*?Foo.bar//simxg" 00ws110.txt 
    ```

3.  利用[触发器运算符](http://perldoc.perl.org/perlop.html#Range-Operators)。

    ```
    perl -ni -e "print unless 1 ... /^Foo.bar/' 
    ```

    这将从第 1 行开始跳过打印到`/^Foo.bar/`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T20:49:20.603

如果你的标题超过一行，你必须告诉 perl 要读多少。如果文件与内存相比很小，您可能只想将整个文件放入内存中：

```
perl -0777pi.orig -e 's/your regex/your replace/s' file1 file2 file3 
```

该`-0777`选项将 perl 设置为 slurp 模式，因此`$_`每次循环都会保存每个整个文件。另外，请始终记住设置备份扩展名。如果你不这样做，你可能会发现你已经不小心删除了你的数据并且无法取回它。有关[`perldoc perlrun`](http://perldoc.perl.org/search.html?q=perlrun)更多信息，请参阅。

鉴于评论中的信息，您似乎正试图从[Project Gutenberg](http://www.gutenberg.org/wiki/Main_Page)电子书的前面去除所有烦人的东西。如果你了解所有涉及的版权问题，你应该可以像这样摆脱前面的事情：

```
perl -ni.orig -e 'print unless 1 .. /^\*END/' 00ws110.txt 
```

Project Gutenberg 标题以

```
*END*THE SMALL PRINT! FOR PUBLIC DOMAIN ETEXTS*Ver.04.29.93*END* 
```

更安全的正则表达式也会考虑到`*END*`行尾的，但我很懒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-23T21:19:35.447

我可能会误解您的要求，但在我看来很简单：

```
perl -ni -e 'print unless 1..($. > 1 && /^Foo bar/)' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T20:29:20.200

干得好！这将替换文件的第一行：

```
 use Tie::File;

tie my @array,"Tie::File","path_to_file" or die("can't tie the file");
$array[0] =~s/text_i_want_to_replace/replacement_text/gi;
untie @array; 
```

您可以对数组进行操作，您将看到数组中的修改。您可以从数组中删除元素，它将从文件中删除该行。对元素应用替换将替换行中的文本。

如果你想删除前两行，并保留第三行的内容，你可以这样做：

```
 # tie the @array before this
shift @array;
shift @array;
$array[0]=~s/foo bar\.\.\.//gi;
# untie the @array 
```

这将完全满足您的需求！

# algorithm - 计算“凯文培根”数字

> ID：675087
> 
> 赞同：11
> 
> 时间：2009-03-23T20:27:19.457
> 
> 标签：algorithm, graph, bacon-number

我一直在玩一些东西，并想出了试图找出[凯文培根](http://en.wikipedia.org/wiki/Six_Degrees_of_Kevin_Bacon)数字的想法。我有一个网站的数据，为此我们可以考虑一个社交网络。让我们假设它是 Facebook（为了简化讨论）。我有人，我有他们朋友的名单，所以我有他们之间的联系。如何计算一个人到另一个人的距离（基本上是凯文培根数）？

我最好的想法是具有深度限制的[双向搜索](http://en.wikipedia.org/wiki/Bidirectional_search)（以限制计算复杂性并避免在图中根本无法连接的人的问题），但我意识到这是相当蛮力的。

制作小的子图（比如 Facebook 上的群组），计算它们之间的最短距离（也许是提前），然后尝试使用 THOSE 来查找链接会更好吗？虽然这需要预先计算，但它可以搜索更少的节点（节点可以是组而不是个人，使图更小）。不过，这仍然是双向搜索。

我还可以预先计算个人连接的人数，首先在节点中搜索“受欢迎”的人，因为他们最有可能连接到给定的目标个人。我意识到这将是可能的最短路径的速度权衡。我想我还想使用深度优先搜索，而不是我计划在其他情况下使用的广度优先搜索。

有人能想出一种更简单/更快的方法吗？我希望能够找到两个人之间的最短距离，所以这并不像总是有相同的终点那么容易（例如在凯文培根问题中）。

我意识到有一些问题，比如我可以得到 200 人的连锁店之类的，但这可以解决我对我愿意搜索的深度的限制。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-23T20:31:11.867

这是一个标准的[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)。有很多解决方案，包括[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)和[Bellman-Ford](http://en.wikipedia.org/wiki/Bellman-Ford_algorithm)。您可能特别有兴趣查看[A* 算法](http://en.wikipedia.org/wiki/A*_search_algorithm)，并了解它如何使用成本函数相对于任何特定节点的度数的倒数执行。这个想法是首先访问更流行的节点（那些具有更高程度的节点）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-23T20:30:31.273

听起来像是 [Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstras_algorithm)的工作。

ED：呃，我不应该这么快扣动扳机。当权重为 1 时，Dijkstra（和 Bellman-Ford）简化为广度优先搜索，因此这不是太有用。那好吧。

tvanfosson 提到的[A* 算法](http://en.wikipedia.org/wiki/A-star_search_algorithm)可能是理想的选择。这个想法是，不是以任何顺序搜索和递归树的每个级别中的元素（根植于您的起点或终点），而是使用一些启发式方法来确定您将首先尝试哪个元素。在您的情况下，一个不错的选择可能是节点的度数（“朋友”的数量），但您可能希望使用给定人的任意度数内的人数（即拥有有 3 个朋友，每个人有 100 个朋友，这可能比在一个避开外人的小圈子里有 20 个朋友的人更好）。还有各种其他的东西可以用作启发式（朋友得到 2 分，朋友的朋友得到 1 分；无论如何，实验）。

将此与深度限制相结合（在 6 度分离后切断，或其他），您可以大大改善您的平均情况（最坏情况仍然与基本 BFS 相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T20:32:52.143

在两个方向（从每个端点）运行广度优先搜索，并在有连接或达到深度限制时停止

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T20:37:38.013

这可能是更好的整体[Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd-Warshall_algorithm)所有对最短距离。

# xslt - 如何在 XSLT 中迭代未知列

> ID：675088
> 
> 赞同：1
> 
> 时间：2009-03-23T20:27:32.590
> 
> 标签：xslt, xpath

标题基本概括了所有内容。我有一个使用 XSLT 处理的 XML 文档 .... 但我不知道 XML 文档中有多少列（字段）（因此，很明显，我不知道它们的名称）。 **如何确定有多少“未知”字段？另外，我如何读取未知字段的属性（如果有）？**

示例数据....

```
<Dataset>
   <Row>
       <UnknownCol1 Msg="HowDoIGetThisMsgAttribute?"/>
       <UnknownCol2 />
       <UnknownCol3 />
   </Row>
</Dataset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T20:37:31.007

有解决这个问题的简单方法。

对于您提供的示例，您可以使用以下 XPath：

```
select='/Dataset/Row/*/@Msg' 
```

如果你想要一个更具体的例子，你可能想让你的问题更清楚地说明你想对数据和未知列做什么。你真的是抄的吗？你具体想把它变成什么？你有什么想要匹配的钥匙吗？

那种事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-23T20:52:13.547

> 如何确定有多少“未知”字段？

**这个 XPath 表达式**：

```
count(/*/*/*) 
```

评估元素的计数，即作为 XML 文档顶部节点的子元素的元素的子元素——这正是本例中想要的。

如果`"Row"`元素可以有名称不以“UnknownCol”开头的子元素，

那么这个 XPath 表达式提供元素的计数，其名称以“UnknownCol”开头，并且是作为顶部元素的子元素的元素的子元素：

```
count(/*/*/*[starts-with(name(), "UnknownCol")]) 
```

如果顶部元素可能有其他子元素`"Row"`，则给出所需计数的 XPath 表达式为：

```
count(/*/Row/*[starts-with(name(), "UnknownCol")]) 
```

> 另外，我如何读取未知字段的属性（如果有）？

通过了解 XPath :)

```
/*/Row/*[starts-with(name(), "UnknownCol")]/@* 
```

选择所有“UnknownCol”{String} 元素的所有属性

这个 XPath 表达式为我们提供了这些属性的数量：

```
 count(/*/Row/*[starts-with(name(), "UnknownCol")]/@*) 
```

这个 Xpath 表达式为我们提供了第 k 个此类属性的名称（$ind 必须设置为数字 k）：

```
name( (/*/Row/*[starts-with(name(), "UnknownCol")]/@*)[$ind] ) 
```

最后，这个 XPath 表达式产生第 k 个这样的属性的值：

```
string( (/*/Row/*[starts-with(name(), "UnknownCol")]/@*)[$ind] ) 
```

**编辑： OP 评论说他完全不知道子元素的名称**。

修复很简单：只需从所有表达式中删除谓词：

```
count(/*/*/*)

count(/*/Row/*)

/*/Row/*/@*

count(/*/Row/*/@*)

name( (/*/Row/*/@*)[$ind] )

string( (/*/Row/*/@*)[$ind] ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T12:26:31.740

下面是一个将您的输入转换为 HTML 表格的 XSLT 1.0 代码的小示例。

```
<xsl:template match="Dataset">
  <table>
    <thead>
      <tr>
        <xsl:apply-templates select="Row[1]/*" mode="th" />
      </tr>
    </thead>
    <tbody>
      <xsl:apply-templates select="Row" />
    </tbody>
  </table>
</xsl:template>

<xsl:template match="Row">
  <tr>
    <xsl:apply-templates select="*" mode="td" />
  </tr>
</xsl:template>

<xsl:template match="Row/*" mode="th">
  <th>
    <xsl:value-of select="local-name()" />
  </th>
</xsl:template>

<xsl:template match="Row/*" mode="td">
  <td>
    <xsl:value-of select="@Msg" />
  </td>
</xsl:template> 
```

应用于此示例输入时：

```
<Dataset>
  <Row>
    <UnknownCol1 Msg="Data_1_1" />
    <UnknownCol2 Msg="Data_1_2" />
    <UnknownCol3 Msg="Data_1_3" />
  </Row>
  <Row>
    <UnknownCol1 />
    <UnknownCol2 Msg="Data_2_2" />
    <UnknownCol3 Msg="" />
  </Row>
</Dataset> 
```

返回此输出：

```
<table>
  <thead>
    <tr>
      <th>UnknownCol1</th>
      <th>UnknownCol2</th>
      <th>UnknownCol3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Data_1_1</td>
      <td>Data_1_2</td>
      <td>Data_1_3</td>
    </tr>
    <tr>
      <td></td>
      <td>Data_2_2</td>
      <td></td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-25T12:55:54.090

这也可以帮助某人：

遍历 start-with() AMT_ 的未知节点并检查它们是否为空

XML:

```
<INCOME_FARMING_OPERATIONS>
<PERSONAL_FARMING>
<IND_SCHEDULE>Y</IND_SCHEDULE>
<DESCRIPTION>FARMING OPERATIONS</DESCRIPTION>
<IDENTIFIER>111111111111</IDENTIFIER>
<AMT_FARM_INC_GROSS>22222222</AMT_FARM_INC_GROSS>
<AMT_FARM_INC_PARTNER></AMT_FARM_INC_PARTNER>
<AMT_BAL_LIVESTOCK>99999999</AMT_BAL_LIVESTOCK>
</PERSONAL_FARMING>
</INCOME_FARMING_OPERATIONS> 
```

XSLT

```
<xsl:variable name ="NodeValueIsEmpty">
<xsl:for-each select ="//INCOME_FARMING_OPERATIONS/PERSONAL_FARMING/*[starts-with(name(),'AMT_')]">
<xsl:if test ="string-length(.)=0">
empty found
</xsl:if>
</xsl:for-each>
</xsl:variable>
<xsl:value-of select="$IncomeFieldValues"/> 
```

输出：空发现因为空你可以更进一步：

```
<xsl:if test=string-length($NodeValueIsEmpty)>0>
//todo if any of the AMT_???? fields is not set
</xsl:if> 
```

# c# - 应用程序域和线程

> ID：675089
> 
> 赞同：2
> 
> 时间：2009-03-23T20:28:01.013
> 
> 标签：c#, .net, multithreading, applicationdomain

来自 MSDN 的引用：http: [//msdn.microsoft.com/en-us/library/6kac2kdh.aspx](http://msdn.microsoft.com/en-us/library/6kac2kdh.aspx)

> 一个或多个托管线程（由 System.Threading.Thread 表示）可以在同一托管进程内的一个或任意数量的应用程序域中运行。尽管每个应用程序域都以单个线程启动，但该应用程序域中的代码可以创建额外的应用程序域和额外的线程。**结果是托管线程可以在同一托管进程内的应用程序域之间自由移动**；您可能只有一个线程在多个应用程序域之间移动。

我尝试使用共享一个线程的 2 个应用程序域编写代码。但我放弃了。我真的不知道这怎么可能。你能给我一个代码示例吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-23T20:35:53.943

这可以通过简单地在单独的 AppDomain 中创建一个 MarshalByRef 对象然后调用该对象的方法来完成。

以下面的类定义为例。

```
public interface IFoo
{
    void SomeMethod();
}

public class Foo : MarshalByRefObject, IFoo
{
    public Foo()
    {
    }

    public void SomeMethod()
    {
        Console.WriteLine("In Other AppDomain");
    }
} 
```

然后，您可以使用此定义从当前的 AppDomain 调用单独的 AppDomain。在调用写入控制台时，您将在 2 个 AppDomain 中拥有 1 个线程（在调用堆栈中的 2 个不同点）。这是示例代码。

```
public static void CallIntoOtherAppDomain()
{
    var domain = AppDomain.CreateDomain("Other Domain");
    var obj = domain.CreateInstanceAndUnwrap(typeof(Foo).Assembly.FullName, typeof(Foo).FullName);
    var foo = (IFoo)obj;
    foo.SomeMethod();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T20:36:44.207

在另一个应用程序域的对象上调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T20:45:55.917

这可能是因为英语不是我的第一语言，但文档让我有点困惑。

只是为了澄清当您创建新的 AppDomain 时，您不会获得额外的线程。如果您通过`MarshalByRef`代理调用方法，除非您自己创建其他线程，否则这是通过主线程完成的。

即当创建额外的AppDomains 时的默认行为是一个线程将在不同的AppDomains 之间共享。

# regex - 用于查找正则表达式的正则表达式？

> ID：675090
> 
> 赞同：8
> 
> 时间：2009-03-23T20:28:06.973
> 
> 标签：regex, grep

有没有人有查找包含正则表达式的文件的代码？我假设您可以有两种不同的口味，一种用于 BRE，一种用于 ERE。

你会认为某种测试套件会有类似 isRegex() 测试的东西。任何人都可以有任何代码吗？当然要寻找全面的东西。

我看到这在[这里](https://stackoverflow.com/questions/416438/regular-expression-contains-another-regular-expression)被讨论过，但没有看到任何实际的回应。如果我想对任何包含正则表达式的文件进行 grep，可能以典型的 // 为界，我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-23T20:37:06.000

正则表达式本身不是[正则语言](http://en.wikipedia.org/wiki/Regular_language)。线索是它们包含括号和方括号，因此必须保持平衡。

正则表达式本身可以用[上下文无关文法](http://en.wikipedia.org/wiki/Context-free_grammar)来描述，并用[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)进行解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T20:33:05.167

超过

```
egrep '/.+/' file 
```

你正在看一个真正参与的练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T20:53:01.313

如果您正在寻找仅包含或主要包含正则表达式的文件，那么统计数据应该告诉您某个文件包含的该语法比其他文件更多。因此，您可以定义一组指标，并将它们的分数组合成一个指标，该指标对文件感兴趣的可能性进行评分。选择一个截止点，然后放手。一些指标：

*   存在多个 [0-9]、[AZ]、+ 等
*   /foo/ 的存在
*   不是标准代码文件
*   不太可压缩（狡猾，我知道，但正则表达式语法的紧凑性直觉上比普通单词更难压缩）
*   ETC

但是，如果这只是一次，那么您最好使用[Chaos 的答案](https://stackoverflow.com/questions/675090/regular-expression-for-finding-a-regular-expression/675115#675115)并手动缩减结果。您正在寻找的正则表达式中有什么特别的东西，可能更容易理解吗？

# java - 扭曲的Java

> ID：675093
> 
> 赞同：13
> 
> 时间：2009-03-23T20:29:26.567
> 
> 标签：java, network-programming, twisted

[与Twisted](http://twistedmatrix.com/trac/wiki/TwistedProject)最接近的 Java 替代品是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-23T21:01:14.990

Nio 非常低级，如果您在 Google 上充分挖掘示例，则仅支持 Socket 和 SSL。

Apache Mina 包装了复杂性并添加了一些协议，但没有 Twister 那么多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T21:11:02.080

和 Stephane 一样，我建议你看看[Mina](http://mina.apache.org/)。它是一个异步网络IO的框架。它建立在前面提到的 NIO 之上，IMO 隐藏了与选择器、通道等相关的一些复杂性。我在几个项目中使用过 Mina，它非常好，但请注意，我发现文档有点弱。再一次，就像 Stephane 提到的那样，它没有对太多协议的开箱即用支持。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-19T16:23:36.507

[我已经在启动板上的 AMP hacks 集合中](https://code.launchpad.net/~glyph/+junk/amphacks)实现了大部分 Twisted reactor - 但它需要维护者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-23T20:46:10.160

就 Deferreds 和复杂的回调链而言，我认为没有任何东西像 Twisted 那样。对于非阻塞IO，我认为[NIO](http://java.sun.com/j2se/1.4.2/docs/api/java/nio/package-summary.html)是最常用的方案。特别是，请查看有关选择器的[这一部分](http://java.sun.com/j2se/1.4.2/docs/api/java/nio/channels/package-summary.html#multiplex)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-09-09T15:00:39.017

如果对此仍有兴趣，我刚刚发布了“Reaction”框架的第一个 beta 版本，它支持 Java 中的 Twisted 风格的延迟回调模型。除了作为标准 Java 包工作外，它还可以用作 OSGi 服务。许可证是 Apache 版本 2。

我的网站上的更多详细信息，[>这里<](http://www.zynaptic.com/reaction)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-03T04:00:47.033

从 Spring.io 看到这个框架：http: [//spring.io/blog/2013/05/13/reactor-a-foundation-for-asynchronous-applications-on-the-jvm](http://spring.io/blog/2013/05/13/reactor-a-foundation-for-asynchronous-applications-on-the-jvm)

# c# - 您如何制作一个仅在 WinForms 中的父表单最顶层的非模态最顶层对话框？

> ID：675105
> 
> 赞同：2
> 
> 时间：2009-03-23T20:31:42.003
> 
> 标签：c#, winforms, dialog, topmost, non-modal

为“关于”对话框考虑这一点，但我确信它适用于其他地方（比如查找框）

抱歉，如果这是一个骗局，但我找不到这个或如何阐明最后一部分，它只是在父母之上。您如何制作一个始终位于父表单之上，但非模态，但不覆盖其他应用程序的表单？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-23T21:09:49.540

试试这个打开你的对话框：

```
FindDialog fd = new FindDialog();
fd.Show(this); 
```

关键是分配对话框的所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T21:43:36.403

不确定你的意思；Form.ShowDialog 仅相对于父级而不是应用程序是模态的，除非应用程序是单线程的。

例如，我制作了一个应用程序来测试它，它的组织如下：

mainform：2个按钮，每个按钮开始一个创建frmDialog1并调用ShowDialog的线程

frmDialog1：创建 frmDialog2 并在其上调用 ShowDialog 的单个按钮。

frmDialog2：什么都不做（即空白）

当它们都在运行时，我可以访问/拖动主窗体。如果我没有单击显示对话框 2 的按钮，我也可以对 frmDialog1（两个版本）执行相同的操作。

# ssl - 如何使用 IIS 6 以编程方式将虚拟目录配置为需要 SSL？

> ID：675107
> 
> 赞同：2
> 
> 时间：2009-03-23T20:31:45.217
> 
> 标签：ssl, iis-6, certificate, configure

如何以编程方式在 IIS 6 上配置虚拟目录以从本地证书存储中已有合适证书的起点开始要求 SSL 和客户端证书，但是当前网站（例如默认网站）尚未设置为使用证书？

我知道如何使用 inetmgr GUI 执行此操作，但是，我希望能够以编程方式执行这些操作，最好是从批处理脚本或 C# 程序。

我从 IIS 6.0 Resource Kit 中发现了 IISCertDeploy.vbs，但是，我认为它不能满足我的需要。如果可以使用它，那么我将欣赏一个比它提供的更有用的示例来说明如何使用它。

**更新：我设法找到了一个解决方案，只要默认网站安装了 SSL 证书就可以工作。这是我为遇到类似问题的任何人的解决方案的解释。**

我编写了一个使用[Microsoft 的 adsutil.vbs](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d3df4bc9-0954-459a-b5e6-7a8bc462960c.mspx?mfr=true)的批处理脚本（包括在下面） 。我还没有设法以编程方式针对默认网站安装证书，但是，目前可以接受将其作为手动一次性步骤。

```
@echo off

if [%1]==[] GOTO NOPARAM

echo Setting SSL requirements for virtual directory '%1' 

REM Setting: Require Secure Channel (SSL) = true
adsutil.vbs set w3svc/1/root/%1/AccessSSL true

REM Setting: Require client certificates = true
adsutil.vbs set w3svc/1/root/%1/AccessSSLNegotiateCert true

REM Set required SSL file permission flags
REM  (104 -> AccessSSL=8 | AccessSSLNegotiateCert=32 | AccessSSLRequireCert=64)
adsutil.vbs set w3svc/1/root/%1/AccessSSLFlags 104
GOTO END

:NOPARAM
REM Exit if no virtual directory was specified.
echo Error: Expected parameter specifying virtual directory was not defined.
GOTO END

:END 
```

# fluent-nhibernate - FluentNHibernate：让 Examples.FirstProject 工作

> ID：675108
> 
> 赞同：-1
> 
> 时间：2009-03-23T20:31:54.953
> 
> 标签：fluent-nhibernate

我试图让最基本的示例在 FnH 中运行。我从 Examples.FirstProject 开始。但是，我没有使用 SQL lite 配置。相反，我将配置设置为 SQL2005 并按照示例中的图示创建表。

单步执行代码时，创建会话工厂时似乎没有问题。但是，当代码到达“transaction.commit”行时，我确实收到了一个错误。错误内容如下：

```
Could not insert collection: [Examples.FirstProject.Entities.Store.Products#5][SQL:SQL not available] 
```

我想知道在 SQL Server 中创建表的方式是否存在问题。ID 是“int”类型，名称等是“varchar(50)”。我将 Store、Product 和 Employee 的 PK 设置为其各自的 ID 字段。我还使 ID 自动增加 1（SQL Server 中的 IdentitySpecification 列属性）。StoreProduct 是多对多的，并且根据图表也存在。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T09:08:33.590

除了更改数据库提供之外，您是否以任何方式修改了示例？您是否能够从示例中保存任何实体（即，如果您删除`Products`代码并仅保存`Store`）？

我针对 SQLExpress 开发了这个示例，所以我想不会有任何与 SQL 2005 不兼容的地方。

此外，这个问题可能更适合 Fluent NHibernate[邮件列表](http://groups.google.com/group/fluent-nhibernate)，因为 Stack Overflow 不适合这类调查性帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T15:21:21.603

谢谢詹姆斯。我将看看使用 Fluent NHibernate 邮件列表。作为我的问题的解决方案，我确实稍微简化了示例，并发现重建表有所帮助。在之前的尝试中，我在数据库图表工具中构建了表格。这就是我认为有些不对劲的地方。刚才我使用菜单重建了它们，并且仍然与数据库图部分建立了外键连接。像魅力一样工作。再次感谢并继续与 FnH 合作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-12T10:11:51.813

首先要检查：您确定您确实在 SQL Server 中创建了正确的表，并且架构是正确的吗？您可以通过使用[SQL Express management studio](http://www.microsoft.com/downloadS/details.aspx?familyid=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&displaylang=en)查看 sql 数据库来验证这一点。

# winforms - 从 Windows 应用程序调用 Web 服务

> ID：675109
> 
> 赞同：0
> 
> 时间：2009-03-23T20:32:01.457
> 
> 标签：winforms, web-services

我是 .NET 和 C# 的新手。我创建了一个 Web 服务，并且可以从 Web 页面查看它。当我尝试从 Windows 应用程序中调用它时，我得到了 Exception 401：未授权。代码编译正常，但运行时抛出异常。这是来自 Windows 应用程序的代码。：

```
namespace BookStore
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // Create a new instance of a service
            localhost.Service1 datasvc = new localhost.Service1();

            // Create instance of dataset, using WebService method GetTitleAuthors.
            DataSet myData = datasvc.GetTitleAuthors();

            // Set DataGrid's datasource to the myData DataSet.
            dataGridView1.DataSource = myData;

            //Expand all rows.            
            //dataGridView1.Expand(-1);

            //Expand DataTable
            //dataGridView1.NavigateTo(0, "Authors"); 
        }
    }
} 
```

PS：我在托管 Web 服务的网站中使用 Windows 身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T20:52:49.333

我不知道您的 Service1 对象继承什么类型，所以我不能说您与它关联的属性或方法，但是只要我知道您可以使用以下方式调用您的 Web 服务

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(URL); 
```

然后要么使用

```
req.UseDefaultCredentials = true; 
```

或者

```
req.Credentials = new NetworkCredential(userName, password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T20:37:09.807

我相信生成的代理上有一个属性可以`UseDefaultCredentials`尝试将其设置为 true。

```
datasvc.UseDefaultCredentials = true; 
```

虽然已经有一段时间了，但我认为这将迫使服务通过 Windows 凭据。

# mysql - 在 MySQL 数据库中获取链表

> ID：675117
> 
> 赞同：8
> 
> 时间：2009-03-23T20:33:43.653
> 
> 标签：mysql, data-structures, linked-list, hierarchical-data

我有一个具有这种结构的 MySQL 数据库表：

```
table
    id INT NOT NULL PRIMARY KEY
    data ..
    next_id INT NULL 
```

我需要按链表的顺序获取数据。例如，给定以下数据：

```
 id | next_id
----+---------
  1 |       2
  2 |       4
  3 |       9
  4 |       3
  9 |    NULL 
```

我需要按顺序获取 id=1、2、4、3、9 的行。如何使用数据库查询来做到这一点？（我可以在客户端做到这一点。我很好奇这是否可以在数据库端完成。因此，说这是不可能的（有足够的证据））。

最好有一个终止点（例如，在 10 次获取后停止，或者当行上的某些条件变为真时），但这不是必需的（可以在客户端完成）。我（希望我）不需要检查循环引用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-23T20:49:55.330

某些品牌的数据库（例如 Oracle、Microsoft SQL Server）支持额外的 SQL 语法来运行“递归查询”，但 MySQL 不支持任何此类解决方案。

您描述的问题与在 SQL 数据库中表示树结构相同。你只有一棵又长又瘦的树。

有几种解决方案可以从 RDBMS 中存储和获取这种数据结构。请参阅以下一些问题：

*   “[将平面表解析为树的最有效/优雅的方法是什么？](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/) ”
*   “[是否可以进行递归 SQL 查询？](https://stackoverflow.com/questions/53108/is-it-possible-to-make-a-recursive-sql-query) ”

* * *

既然您提到您想限制查询返回的“深度”，您可以在以这种方式查询列表时实现这一点：

```
SELECT * FROM mytable t1
 LEFT JOIN mytable t2 ON (t1.next_id = t2.id)
 LEFT JOIN mytable t3 ON (t2.next_id = t3.id)
 LEFT JOIN mytable t4 ON (t3.next_id = t4.id)
 LEFT JOIN mytable t5 ON (t4.next_id = t5.id)
 LEFT JOIN mytable t6 ON (t5.next_id = t6.id)
 LEFT JOIN mytable t7 ON (t6.next_id = t7.id)
 LEFT JOIN mytable t8 ON (t7.next_id = t8.id)
 LEFT JOIN mytable t9 ON (t8.next_id = t9.id)
 LEFT JOIN mytable t10 ON (t9.next_id = t10.id); 
```

它会像糖蜜一样执行，结果将全部返回一行（每个链表），但你会得到结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-08-31T18:46:59.873

如果您要避免的是有多个查询（每个节点一个）并且您可以添加列，那么您可以有一个链接到根节点的新列。这样，您可以通过根 ID 一次提取所有数据，但您仍然必须在客户端对列表（或树）进行排序。

因此，在此示例中，您将拥有：

```
 id | next_id | root_id
----+---------+---------
  1 |       2 |       1
  2 |       4 |       1
  3 |       9 |       1
  4 |       3 |       1
  9 |    NULL |       1 
```

当然，与传统的链表或树相比，这样做的缺点是根不能在不写入 O(n) 数量级的情况下更改，其中 n 是节点数。这是因为您必须更新每个节点的根 ID。幸运的是，除非您在中间划分列表/树，否则您应该始终能够在单个更新查询中执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-13T16:17:45.587

这与其说是一种解决方案，不如说是一种解决方法，但是对于线性列表（而不是 Bill Karwin 提到的树），在列表中使用排序列可能更有效。例如：

```
TABLE `schema`.`my_table` (
    `id` INT NOT NULL PRIMARY KEY,
    `order` INT,
    data ..,
    INDEX `ix_order` (`sort_order` ASC)
); 
```

然后：

```
SELECT * FROM `schema`.`my_table` ORDER BY `order`; 
```

这具有插入速度较慢的缺点（您必须将所有已排序的元素重新定位到插入点之后），但由于 order 列已编入索引，因此检索速度应该很快。

# .net - 我如何通过 .net 远程调用模拟经过 Windows 身份验证的 Web 用户？

> ID：675119
> 
> 赞同：0
> 
> 时间：2009-03-23T20:34:03.870
> 
> 标签：.net, security, remoting, impersonation

我有一个使用 Windows 集成安全性的 Web 应用程序。我还有一个作为本地系统运行的 Windows 服务。Web 应用程序使用 .NET 远程处理通过 tcpip 通道在服务上执行方法。在 .NET 2.0 上，有没有办法将 Windows 身份传递给服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T00:33:11.690

根据 MSDN 文档，配置客户端和服务器 app.config 文件。

服务器：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.runtime.remoting>
        <application>
            <channels>
              <channel ref="tcp" secure="true" impersonate="true" />
             </channels>
        </application>
    </system.runtime.remoting>
</configuration> 
```

客户：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.runtime.remoting>
        <application>
            <channels>
              <channel ref="tcp" secure="true" tokenImpersonationLevel="impersonation"/>
             </channels>
        </application>
    </system.runtime.remoting>
</configuration> 
```

请注意，对于服务器，该属性称为 impersonate，但对于客户端，该属性称为 tokenImpersonationLevel。

请参阅：http: [//msdn.microsoft.com/en-us/library/59hafwyt (VS.85).aspx](http://msdn.microsoft.com/en-us/library/59hafwyt(VS.85).aspx)

# javascript - 检查 gmail 按钮的 javascript 调用

> ID：675120
> 
> 赞同：2
> 
> 时间：2009-03-23T20:34:32.887
> 
> 标签：javascript, gmail, greasemonkey

我正在为gmail编写一个greasemonkey脚本，其中知道单击“发送”按钮时进行了哪些函数调用非常有用。（我无法使用 firebug 找到它，但我对 javascript 调试相对较新。）似乎应该能够检测到这一点，我只是不知道要使用什么工具。

非常感谢您的帮助。

ps 最终的目标是能够为传出的 gmail 消息提取一个唯一的消息 id，我认为它会出现在这个 javascript 调用中——所以如果有另一种方法可以做到这一点，那也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T05:21:20.950

Gmail's Javascript code is obfuscated to avoid this type of inspection (and also to reduce code size). It is very unlikely you'll be able to make heads or tails of it even if you manage to get Firebug to breakpoint in the code properly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-02T20:19:36.700

我不认为消息 id 会在创建的消息中（实际上所有标题都将不存在）。我的猜测是它们是在发送消息之前由 Google 在服务器端输入的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-25T13:17:03.797

As a sidenote, one would assume that the unique id gets assigned in the server, not in the javascript...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T15:28:54.203

JavaScript 中的所有对象都有一个`toString()`方法。如果您可以找到该按钮，那么您可以找到它的关联事件。然后，您可以`toString()`在 FireBug 控制台中处理这些事件——但正如[levik](https://stackoverflow.com/users/4465/levik)所写的那样；如果混淆了所有代码，那么您最终可能会`toString()`胡言乱语。

这里有一些伪代码可以帮助您入门：

```
document.getElementById("...").onclick.toString() 
```

**更新**

如果您无法控制要调试的代码，似乎[无法访问](https://stackoverflow.com/questions/681120/access-events-added-with-attachevent-addeventlistener-in-javascript)添加的事件。`attachEvent()``addEventListener()`

# silverlight - Silverlight 可以包含 ActiveX 吗？

> ID：675122
> 
> 赞同：3
> 
> 时间：2009-03-23T20:34:55.100
> 
> 标签：silverlight, activex, sandbox

你好，提前致谢！

我正在尝试从 Silverlight 应用程序访问 USB 端口。因为 Silverlight 在沙盒中运行，所以它不能这样做。

是否可以从 Silverlight 应用程序内部运行 ActiveX 控件？（最好不要叠加）

如果有：有哪些例子？这方面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-23T21:31:13.203

不，ActiveX 控件不可能在 Silverlight 中运行。

但是，可以让一个 html 页面同时托管 Silverlight 和 ActiveX 控件，并让这两者通过 javascript 进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-21T22:39:16.233

Action Script 3 支持外部接口，因此您可以结合 ActiveX 或 Flash 并通过 JavaScript 代理进行通信。无论哪种方式，除了访问 USB 端口外，您还可以播放电影。

# c# - 如何在 C# 中列出和创建所有 IIS 网站、网站中的文件夹和虚拟 Web 目录

> ID：675128
> 
> 赞同：0
> 
> 时间：2009-03-23T20:36:11.853
> 
> 标签：c#, iis

我试图首先列出所有 IIS 网站以及每个网站中的文件夹/虚拟 Web 目录（在树视图中）。然后，我想允许用户选择上述任何节点并在那里创建一个新的虚拟 Web 目录。如果我知道我打算使用的路径，我可以创建一个虚拟 Web 目录，但我无法获得网站中的文件夹/虚拟 Web 目录的列表（我可以获得网站列表）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T20:41:00.313

使用 System.DirectoryServices 从 IIS 获取网站。您可以在以下 URL 找到类似的讨论

[http://channel9.msdn.com/forums/TechOff/78084-Extracting-list-of-web-sites-from-IIS-manager/](http://channel9.msdn.com/forums/TechOff/78084-Extracting-list-of-web-sites-from-IIS-manager/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:24:04.283

有趣的是，我只是需要为 IIS 7.5 执行此操作，我创建了一个具有我想要的主要属性的类 IisSiteApplication

```
using Microsoft.Web.Administration;

 public class IisSiteApplicationList : List<IisSiteApplication>
    {
        public IisSiteApplicationList()
        {
            ServerManager iisManager = new ServerManager();
            SiteCollection sites = iisManager.Sites;
            foreach (Site iisSite in sites)
            {
                foreach (Application iisApp in iisSite.Applications)
                {
                    IisSiteApplication app = new IisSiteApplication
                        {
                            SiteId = iisSite.Id,
                            SiteName = iisSite.Name,
                             AppName = iisApp.ToString(),
                            ApplicationPoolName = iisApp.ApplicationPoolName,
                            Directories =
                                String.Join(";", iisApp.VirtualDirectories.Select(a =>   a.PhysicalPath).ToArray())
                        };
                    Add(app);
                }
            }
        }
    } 
```

# macos - Mac os 帮助浏览器失败，需要互联网连接

> ID：675129
> 
> 赞同：0
> 
> 时间：2009-03-23T20:36:16.580
> 
> 标签：macos, system, bundle

我正在为 Mac OS X 开发一个应用程序（我对这种东西不熟悉），我想包括在线帮助。帮助是使用 doxygen 生成的，帮助索引是使用 Help Indexer 生成的。我将 Info.plist 更改为指向文档，但是当我尝试访问它时，出现以下错误：

> 需要互联网连接。
> 
> 您打开的帮助主题需要 Internet 连接。选取 Apple > System Preferences，然后点按“网络”以检查您的网络设置，并在必要时连接到 Internet。

显然，我开发的计算机可以访问互联网，但更重要的是，我想知道为什么我需要互联网，而帮助在驱动器上（虽然帮助中有一些互联网链接）。还有，为什么浏览器看不到现有的互联网连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T21:46:52.323

我最近遇到了这个问题。我有一些临时链接指向我尚未创建的页面。问题是 Apple Help Viewer 找不到链接页面的本地副本。创建页面后，错误消息消失了。IIRC 我的实际问题是我尚未创建的图像的 img 标签。

# python - 带有超时的 TLS 连接（以及其他一些困难）

> ID：675130
> 
> 赞同：3
> 
> 时间：2009-03-23T20:36:33.520
> 
> 标签：python, ssl

我在 Python 中有一个 HTTP 客户端，它需要使用 TLS。我不仅需要进行加密连接，还需要从远程机器检索信息，例如证书颁发者。我需要连接到许多 HTTP 服务器，通常表现不佳，所以我绝对需要超时。使用非 TLS 连接， `mysocket.settimeout(5)`可以满足我的要求。

在众多 TLS Python 模块中：

[python-gnutls](http://pypi.python.org/pypi/python-gnutls)不允许在套接字上使用 settimeout() ，因为它使用非阻塞套接字：

```
gnutls.errors.OperationWouldBlock: Function was interrupted. 
```

[python-openssl](http://pyopenssl.sourceforge.net/)也有类似的问题：

```
OpenSSL.SSL.WantReadError 
```

标准库的[SSL 模块](http://docs.python.org/library/ssl.html)不适用于 Python 2.5。

[TLSlite](http://trevp.net/tlslite/)等其他库显然不提供对证书元数据的访问权限。

该程序是线程的，所以我不能使用信号。我需要对 HTTP 对话框进行详细控制，所以我不能使用像 urllib2 这样的标准库。

背景：这是调查项目[DNSwitness](http://www.dnswitness.net/)。相关 SO 线程：[Python 函数调用超时](https://stackoverflow.com/questions/492519/timeout-on-a-python-function-call)和[如何限制 Python 中函数调用的执行时间](https://stackoverflow.com/questions/366682/how-to-limit-execution-time-of-a-function-call-in-python)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-12T13:59:50.423

我假设您遇到的问题如下，您正在使用 PyOpenSSL 打开连接并且您总是会收到 WantReadError 异常。而且您无法区分此错误和超时。考虑以下示例：

```
#!/usr/bin/python

import OpenSSL
import socket
import struct

context = OpenSSL.SSL.Context(OpenSSL.SSL.TLSv1_METHOD)
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.settimeout(5)
connection = OpenSSL.SSL.Connection(context,s)
connection.connect(("www.gmail.com",443))

# Put the socket in blocking mode
connection.setblocking(1)

# Set the timeout using the setsockopt
tv = struct.pack('ii', int(6), int(0))
connection.setsockopt(socket.SOL_SOCKET, socket.SO_RCVTIMEO, tv)

print "Connected to " , connection.getpeername()
print "Sate " , connection.state_string()

while True:
    try:
        connection.do_handshake()
        break
    except OpenSSL.SSL.WantReadError:
        print "Exception"
        pass
print "Sate " , connection.state_string()

print connection.send("koekoek\r\n")

while True:
    try:
        recvstr = connection.recv(1024)
        break
    except OpenSSL.SSL.WantReadError:
        print "Exception"
        pass

print recvstr 
```

这将打开到 gmail 的 SSL 连接，发送无效字符串，读取响应并打印出来。请注意： * 连接明确设置为阻塞模式 * 在这种情况下，recv 超时明确设置为 6 秒。

现在会有什么行为，当超时发生时，WantReadError 异常将被 thornw，在这种情况下等待 6 秒后。（您可以删除 while True 以避免重试，但在这种情况下，我添加了它们以进行测试）。套接字上设置的超时似乎仅在 connect() 调用中有效。

另一种方法是将套接字保持在非阻塞模式（这可能也适用于 GNUTLS 情况）是自己执行计时，你得到启动调用的时间，并且在 while True 中，尝试：除了 WantReadError 你每次自己进行检查，看看您是否没有等待太久。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T21:07:43.133

虽然我从来没有将它用于这个目的，但[Twisted](http://twistedmatrix.com)应该做你想做的事。唯一的缺点是它是一个相当大的库，并且您还需要安装[PyOpenSSL](http://pyopenssl.sourceforge.net/)（Twisted 依赖于它）。如果您以前从未使用过它，那么 Twisted 基于回调的架构可能需要一些时间来适应（您**真的**想在开始之前阅读教程）。

但除此之外，它是围绕管理大量连接的想法设计的，它当然允许您指定超时、重新连接等，并且您可以检索证书信息（参见[此处](http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.ssl.Certificate.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-17T23:20:35.427

我还推荐[Twisted](http://twistedmatrix.com/)，并为[TLS 部分使用](http://svn.osafoundation.org/m2crypto/trunk/M2Crypto/SSL/TwistedProtocolWrapper.py)[M2Crypto](http://chandlerproject.org/Projects/MeTooCrypto)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-02T19:16:25.460

一种简单的解决方案是根据操作更改套接字类型。我用 gnutls 对此进行了测试，它起作用了：

1.  在 gnutls 包裹的裸套接字上执行 connect() 之前，先在套接字上执行 settimeout()，这样 connect() 会根据需要受到超时的影响。
2.  确保在 GnuTLS 的握手 () 之前使用 settimeout(None) 或 setblocking(1) 删除超时

# asp.net - 如何在从 SQL 检索的 DataSet 中按名称引用 DataRow 元素？

> ID：675133
> 
> 赞同：0
> 
> 时间：2009-03-23T20:36:49.277
> 
> 标签：asp.net, dataset, datarow

因此，我正在使用 a`XmlWriter`和 a构建一些 XML，`DataSet`但是当需要循环遍历其中的每个`DataRow`时，`DataSet`我无法弄清楚如何像“userid”这样的引用以及从存储过程中返回的引用。在页面代码中，我看到他们正在`Eval("userid")`使用相同的存储过程或其他方式执行此操作，但我现在在 ASHX 中使用它......请参阅“这里发生了什么？？” 在下面的代码中......

```
DataSet getData;
getData = SqlHelper.ExecuteDataset(ConfigurationManager.ConnectionStrings["connstr"].ConnectionString, CommandType.StoredProcedure, "Course_NewReportGet_Get_Sav", objPAra)

//COUNT NUMBER OF RESULTS FOR COUNT ATTRIBUTE (must add!)

XmlWriterSettings settings = new XmlWriterSettings();
settings.Indent = true;
settings.IndentChars = ("    ");
using(XmlWriter writer = XmlWriter.Create("data.xml", settings))
{
    writer.WriteStartElement("changes");
    writer.WriteAttributeString("clientname", foundCompany.CompanyName);
    writer.WriteAttributeString("clientid", foundCompany.Abbreviation);
    //writer... INSERT COUNT ATTRIBUTE

    foreach(DataRow dr in getData.Tables)
    {
        writer.WriteStartElement("change");
        writer.WriteStartElement("user");
        writer.WriteAttributeString("userid", dr... WHAT GOES HERE??;                    
    }                
    writer.WriteEndElement();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-23T20:40:18.287

尝试使用[DataRow.Item](http://msdn.microsoft.com/en-us/library/system.data.datarow.item.aspx)属性，如下所示

```
dr["userid"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T20:40:31.483

这很简单。您的数据行 (dr) 中的整数列将通过以下方式访问：

```
int someVal = (int)dr["ColumnName"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T20:41:47.613

首先，你的 foreach 是错误的。你需要循环过去`getData.Tables[0].Rows`。如果有超过 1 个表，则需要遍历 getData.Tables。

但是，答案是它是一个索引属性。所以，`dr["userId"]`会给你带来价值。

```
foreach (DataRow dr in getData.Tables[0].Rows) {
   / * blah, blah */
   writer.WriteAttributeString("userId", dr["userId"]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T20:43:17.717

你的内在 foreach 是问题所在。

应该

```
if(getData.Tables.Count > 0){
   foreach(DataRow dr in getData.Tables[0].Rows){
      writer.WriteAttributeString("userid", dr["UserID"]);
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-23T20:43:35.703

您将要添加一个迭代级别 - 您当前正在迭代您的 中的表`foreach(DataRow dr in getData.Tables)`，DataRow 对象低于一个级别。

# c# - 在 WinForms 中对一组单选按钮进行数据绑定的最佳方法

> ID：675137
> 
> 赞同：26
> 
> 时间：2009-03-23T20:37:25.720
> 
> 标签：c#, winforms, data-binding, radio-button

我目前正在对我现有的一些 Windows 窗体进行数据绑定，并且遇到了一个问题，我无法确定在组框中对一组单选按钮控件进行数据绑定的正确方法。

我的业务对象有一个整数属性，我想对 4 个单选按钮进行数据绑定（其中每个单选按钮代表值 0 - 3）。

我目前正在绑定一个演示者对象，该对象充当表单和业务对象之间的绑定器，我现在完成它的方式是拥有 4 个单独的属性，每个属性都绑定到这些值中的每一个（我确实使用 INotifyPropertyChanged ，但不包括这里）：

```
Private int _propValue;

Public bool PropIsValue0 
{ 
  get { return _propValue == 0; }
  set
  {
    if (value) 
      _propValue = 0;
  }
}

Public bool PropIsValue1 { // As above, but with value == 1 }
Public bool PropIsValue2 { // As above, but with value == 2 }
Public bool PropIsValue3 { // As above, but with value == 3 } 
```

然后我将每个单选按钮绑定到它们各自的属性，如上所述。

这对我来说似乎不正确，因此非常感谢任何建议。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2010-03-06T23:10:01.797

以下是本着 ArielBH 建议的精神的通用 RadioGroupBox 实现（一些代码从 Jay Andrew Allen 的[RadioPanel 借用](http://www.codeproject.com/KB/combobox/RadioPanel.aspx)）。只需将 RadioButtons 添加到其中，将它们的标签设置为不同的整数并绑定到“Selected”属性。

```
public class RadioGroupBox : GroupBox
{
    public event EventHandler SelectedChanged = delegate { };

    int _selected;
    public int Selected
    {
        get
        {
            return _selected;
        }
        set
        {
            int val = 0;
            var radioButton = this.Controls.OfType<RadioButton>()
                .FirstOrDefault(radio =>
                    radio.Tag != null 
                   && int.TryParse(radio.Tag.ToString(), out val) && val == value);

            if (radioButton != null)
            {
                radioButton.Checked = true;
                _selected = val;
            }
        }
    }

    protected override void OnControlAdded(ControlEventArgs e)
    {
        base.OnControlAdded(e);

        var radioButton = e.Control as RadioButton;
        if (radioButton != null)
            radioButton.CheckedChanged += radioButton_CheckedChanged;
    }

    void radioButton_CheckedChanged(object sender, EventArgs e)
    {
        var radio = (RadioButton)sender;
        int val = 0;
        if (radio.Checked && radio.Tag != null 
             && int.TryParse(radio.Tag.ToString(), out val))
        {
            _selected = val;
            SelectedChanged(this, new EventArgs());
        }
    }
} 
```

请注意，由于 InitializeComponent 中的初始化顺序问题，您无法通过设计器绑定到“Selected”属性（绑定是在初始化单选按钮之前执行的，因此它们的标记在第一个分配中为空）。所以像这样绑定自己：

```
 public Form1()
    {
        InitializeComponent();
        //Assuming selected1 and selected2 are defined as integer application settings
        radioGroup1.DataBindings.Add("Selected", Properties.Settings.Default, "selected1");
        radioGroup2.DataBindings.Add("Selected", Properties.Settings.Default, "selected2");
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T22:41:29.547

我知道这篇文章很旧，但是在寻找同样问题的答案时，我遇到了这篇文章，但它并没有解决我的问题。就在一分钟前，我最终有一个灯泡随机熄灭，并想分享我的解决方案。

我在一个组框中有三个单选按钮。我使用自定义类对象的 List<> 作为数据源。

类对象：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace BAL
{
class ProductItem
{

    // Global Variable to store the value of which radio button should be checked
    private int glbTaxStatus;
    // Public variable to set initial value passed from 
    // database query and get value to save to database
    public int TaxStatus
    {
        get { return glbTaxStatus; }
        set { glbTaxStatus = value; }
    }

    // Get/Set for 1st Radio button
    public bool Resale
    {
        // If the Global Variable = 1 return true, else return false
        get
        {
            if (glbTaxStatus.Equals(1))
            {
                return true;
            }
            else
            {
                return false;
            }
        }

        // If the value being passed in = 1 set the Global Variable = 1, else do nothing
        set
        {
            if (value.Equals(true))
            {
                glbTaxStatus = 1;
            }
        }
    }

    // Get/Set for 2nd Radio button
    public bool NeverTax
    {
        // If the Global Variable = 2 return true, else return false
        get
        {
            if (glbTaxStatus.Equals(2))
            {
                return true;
            }
            else
            {
                return false;
            }
        }

        // If the value being passed in = 2 set the Global Variable = 2, else do nothing
        set
        {
            if (value.Equals(true))
            {
                glbTaxStatus = 2;
            }
        }
    }

    // Get/Set for 3rd Radio button
    public bool AlwaysTax
    {
        // If the Global Variable = 3 return true, else return false
        get
        {
            if (glbTaxStatus.Equals(3))
            {
                return true;
            }
            else
            {
                return false;
            }
        }

        // If the value being passed in = 3 set the Global Variable = 3, else do nothing
        set
        {
            if (value.Equals(true))
            {
                glbTaxStatus = 3;
            }
        }
    }

// More code ... 
```

三个单独的公共变量，get/set 访问同一个全局变量。

在后面的代码中，我有一个在 Page_Load() 设置所有控件数据绑定期间调用的函数。对于每个单选按钮，我添加了自己的数据。

```
radResale.DataBindings.Add("Checked", glbProductList, "Resale", true, DataSourceUpdateMode.OnPropertyChanged, false);
radNeverTax.DataBindings.Add("Checked", glbProductList, "NeverTax", true, DataSourceUpdateMode.OnPropertyChanged, false);
radAlwaysTax.DataBindings.Add("Checked", glbProductList, "Always", true, DataSourceUpdateMode.OnPropertyChanged, false); 
```

我希望这可以帮助别人！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T16:51:35.630

我想我会使用我自己的 GroupBox。我会将 CustomGroupBox 绑定到您的模型并从绑定值设置正确的 RadioButton（使用标签或名称属性）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T09:38:01.617

这是我将单选按钮列表绑定到枚举的方法。

在按钮的 Tag 属性中使用 Enum 作为字符串，我使用**Binding.Format**和**Binding.Parse**事件来决定应该检查哪个按钮。

```
public enum OptionEnum
{
   Option1 = 0,
   Option2
}

OptionEnum _rbEnum = OptionEnum.Option1;
OptionEnum PropertyRBEnum
{
    get { return _rbEnum; }
    set
    {
        _rbEnum = value;
        RaisePropertyChanged("PropertyRBEnum");
    }
}

public static void FormatSelectedEnum<T>(object sender, ConvertEventArgs args) where T : struct
{
    Binding binding = (sender as Binding);
    if (binding == null) return;

    Control button = binding.Control;

    if (button == null || args.DesiredType != typeof(Boolean)) return;

    T value = (T)args.Value;
    T controlValue;

    if (Enum.TryParse(button.Tag.ToString(), out controlValue))
    {
        args.Value = value.Equals(controlValue);
    }
    else
    {
        Exception ex = new Exception("String not found in Enum");
        ex.Data.Add("Tag", button.Tag);

        throw ex;
    }
}

public static void ParseSelectedEnum<T>(object sender, ConvertEventArgs args) where T : struct
{
    Binding binding = (sender as Binding);
    if (binding == null) return;

    Control button = binding.Control;
    bool value = (bool)args.Value;

    if (button == null || value != true) return;

    T controlValue;

    if (Enum.TryParse(button.Tag.ToString(), out controlValue))
    {
        args.Value = controlValue;
    }
    else
    {
        Exception ex = new Exception("String not found in Enum");
        ex.Data.Add("Tag", button.Tag);

        throw ex;
    }
} 
```

然后像这样设置你的数据绑定：

```
radioButton1.Tag = "Option1";
radioButton2.Tag = "Option2";

foreach (RadioButtonUx rb in new RadioButtonUx[] { radioButton1, radioButton2 })
{
    Binding b = new Binding("Checked", this, "PropertyRBEnum");
    b.Format += FormatSelectedRadioButton<OptionEnum>;
    b.Parse += ParseSelectedRadioButton<OptionEnum>;

    rb.DataBindings.Add(b);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T20:22:30.540

我开始解决同样的问题。

我使用了 RadioButtonBinding 类，它封装了数据源中有关枚举的所有单选按钮。

下面这个类将所有单选按钮保存在一个列表中，并查找 enum ：

```
class RadioButtonBinding : ILookup<System.Enum, System.Windows.Forms.RadioButton>
{
    private Type enumType;
    private List<System.Windows.Forms.RadioButton> radioButtons;
    private System.Windows.Forms.BindingSource bindingSource;
    private string propertyName;

    public RadioButtonBinding(Type myEnum, System.Windows.Forms.BindingSource bs, string propertyName)
    {
        this.enumType = myEnum;
        this.radioButtons = new List<System.Windows.Forms.RadioButton>();
        foreach (string name in System.Enum.GetNames(this.enumType))
        {
            System.Windows.Forms.RadioButton rb = new System.Windows.Forms.RadioButton();
            rb.Text = name;
            this.radioButtons.Add(rb);
            rb.CheckedChanged += new EventHandler(rb_CheckedChanged);
        }
        this.bindingSource = bs;
        this.propertyName = propertyName;
        this.bindingSource.DataSourceChanged += new EventHandler(bindingSource_DataSourceChanged);
    }

    void bindingSource_DataSourceChanged(object sender, EventArgs e)
    {
        object obj = this.bindingSource.Current;
        System.Enum item = obj.GetType().GetProperty(propertyName).GetValue(obj, new object[] { }) as System.Enum;
        foreach (System.Enum value in System.Enum.GetValues(this.enumType))
        {
            if (this.Contains(value))
            {
                System.Windows.Forms.RadioButton rb = this[value].First();
                if (value.Equals(item))
                {
                    rb.Checked = true;
                }
                else
                {
                    rb.Checked = false;
                }
            }
        }
    }

    void rb_CheckedChanged(object sender, EventArgs e)
    {
        System.Windows.Forms.RadioButton rb = sender as System.Windows.Forms.RadioButton;
        System.Enum val = null;
        try
        {
            val = System.Enum.Parse(this.enumType, rb.Text) as System.Enum;
        }
        catch(Exception ex)
        {
            // cannot occurred if code is safe
            System.Windows.Forms.MessageBox.Show("No enum value for this radio button : " + ex.ToString());
        }
        object obj = this.bindingSource.Current;
        obj.GetType().GetProperty(propertyName).SetValue(obj, val, new object[] { });
        this.bindingSource.CurrencyManager.Refresh();
    }

    public int Count
    {
        get
        {
            return System.Enum.GetNames(this.enumType).Count();
        }
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.radioButtons.GetEnumerator();
    }

    public bool Contains(Enum key)
    {
        return System.Enum.GetNames(this.enumType).Contains(key.ToString());
    }

    public IEnumerable<System.Windows.Forms.RadioButton> this[Enum key]
    {
        get
        {
            return this.radioButtons.FindAll(a => { return a.Text == key.ToString(); });
        }
    }

    IEnumerator<IGrouping<Enum, System.Windows.Forms.RadioButton>> IEnumerable<IGrouping<Enum, System.Windows.Forms.RadioButton>>.GetEnumerator()
    {
        throw new NotImplementedException();
    }

    public void AddControlsIntoGroupBox(System.Windows.Forms.GroupBox gb)
    {
        System.Windows.Forms.FlowLayoutPanel panel = new System.Windows.Forms.FlowLayoutPanel();
        panel.Dock = System.Windows.Forms.DockStyle.Fill;
        panel.FlowDirection = System.Windows.Forms.FlowDirection.RightToLeft;
        foreach (System.Windows.Forms.RadioButton rb in this.radioButtons)
        {
            panel.Controls.Add(rb);
        }
        gb.Controls.Add(panel);
    }
} 
```

您可以通过在表单的构造函数中添加该代码来将该类用于表单：

```
 public PageView()
    {
        InitializeComponent();
        RadioButtonBinding rbWidth = new RadioButtonBinding(typeof(Library.EnumConstraint), this.pageBindingSource, "ConstraintWidth");
        rbWidth.AddControlsIntoGroupBox(this.groupBox1);
        RadioButtonBinding rbHeight = new RadioButtonBinding(typeof(Library.EnumConstraint), this.pageBindingSource, "ConstraintHeight");
        rbHeight.AddControlsIntoGroupBox(this.groupBox3);
        this.pageBindingSource.CurrentItemChanged += new EventHandler(pageBindingSource_CurrentItemChanged);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-27T12:36:15.677

将单选按钮的标签名称设置为代表值的名称。

创建一个字符串设置，例如 OptionDuplicateFiles，并为其指定默认单选按钮的标签名称的默认值。

要保存选中的单选按钮：

```
Settings.Default.OptionDuplicateFiles = gbxDuplicateFiles.Controls
   .OfType<RadioButton>()
   .Where(b => b.Checked)
   .Select(b => b.Tag)
   .First()
   .ToString(); 
```

要加载选中的单选按钮：

```
(gbxDuplicateFiles.Controls
   .OfType<RadioButton>()
   .Where(b => b.Tag.ToString() == Settings.Default.OptionDuplicateFiles)
   .First())
   .Checked = true; 
```

多田！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-24T17:36:44.890

我喜欢 RadioButtonGroupBox 的想法，但我决定创建一个自支持的版本。没有理由为 Tag 属性添加值或引入新的值属性。任何分配的单选按钮仍然是 RadioButtonGroupBox 的成员，并且单选按钮的顺序是在开发过程中定义的。所以，我修改了代码。现在我可以通过索引位置、控件名称和文本来获取和设置选定的单选按钮。BTW Text 仅在您为每个单选按钮分配的 Text 不同时才可用。

```
public class RadioButtonGroupBox : GroupBox
{
    public event EventHandler SelectedChanged = delegate { };

    int _nIndexPosCheckRadioButton = -1;
    int _selected;
    public int Selected
    {
        get
        {
            return _selected;
        }
    }

    public int CheckedRadioButtonIndexPos
    {
        set
        {
            int nPosInList = -1;
            foreach (RadioButton item in this.Controls.OfType<RadioButton>())
            {
                // There are RadioButtonItems in the list...
                nPosInList++;

                // Set the RB that should be checked
                if (nPosInList == value)
                {
                    item.Checked = true;
                    // We can stop with the loop
                    break;
                }
            }
            _nIndexPosCheckRadioButton = nPosInList;
        }
        get
        {
            int nPosInList = -1;
            int nPosCheckeItemInList = -1;

            foreach (RadioButton item in this.Controls.OfType<RadioButton>())
            {
                // There are RadioButtonItems in the list...
                nPosInList++;

                // Find the RB that is checked
                if (item.Checked)
                {
                    nPosCheckeItemInList = nPosInList;
                    // We can stop with the loop
                    break;
                }
            }
            _nIndexPosCheckRadioButton = nPosCheckeItemInList;
            return _nIndexPosCheckRadioButton;
        }
    }

    public string CheckedRadioButtonByText
    {
        set
        {
            int nPosInList = -1;
            foreach (RadioButton item in this.Controls.OfType<RadioButton>())
            {
                // There are RadioButtonItems in the list...
                nPosInList++;

                // Set the RB that should be checked
                if (item.Text == value)
                {
                    item.Checked = true;
                    // We can stop with the loop
                    break;
                }
            }
            _nIndexPosCheckRadioButton = nPosInList;
        }
        get
        {
            string cByTextValue = "__UNDEFINED__";
            int nPosInList = -1;
            int nPosCheckeItemInList = -1;

            foreach (RadioButton item in this.Controls.OfType<RadioButton>())
            {
                // There are RadioButtonItems in the list...
                nPosInList++;

                // Find the RB that is checked
                if (item.Checked)
                {
                    cByTextValue = item.Text;
                    nPosCheckeItemInList = nPosInList;
                    // We can stop with the loop
                    break;
                }
            }
            _nIndexPosCheckRadioButton = nPosCheckeItemInList;
            return cByTextValue;
        }
    }

    public string CheckedRadioButtonByName
    {
        set
        {
            int nPosInList = -1;
            foreach (RadioButton item in this.Controls.OfType<RadioButton>())
            {
                // There are RadioButtonItems in the list...
                nPosInList++;

                // Set the RB that should be checked
                if (item.Name == value)
                {
                    item.Checked = true;
                    // We can stop with the loop
                    break;
                }
            }
            _nIndexPosCheckRadioButton = nPosInList;
        }
        get
        {
            String cByNameValue = "__UNDEFINED__";
            int nPosInList = -1;
            int nPosCheckeItemInList = -1;

            foreach (RadioButton item in this.Controls.OfType<RadioButton>())
            {
                // There are RadioButtonItems in the list...
                nPosInList++;

                // Find the RB that is checked
                if (item.Checked)
                {
                    cByNameValue = item.Name;
                    nPosCheckeItemInList = nPosInList;
                    // We can stop with the loop
                    break;
                }
            }
            _nIndexPosCheckRadioButton = nPosCheckeItemInList;
            return cByNameValue;
        }
    }

    protected override void OnControlAdded(ControlEventArgs e)
    {
        base.OnControlAdded(e);

        var radioButton = e.Control as RadioButton;
        if (radioButton != null)
            radioButton.CheckedChanged += radioButton_CheckedChanged;
    }

    void radioButton_CheckedChanged(object sender, EventArgs e)
    {
        _selected = CheckedRadioButtonIndexPos;
        SelectedChanged(this, new EventArgs());
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-03T07:16:21.167

我的方法是在将每个单选按钮绑定到布尔属性之前将它们放入自己的面板中：

```
 public static Binding Bind<TObject>(this RadioButton control, object dataSource, string dataMember)
    {
        // Put the radio button into its own panel
        Panel panel = new Panel();
        control.Parent.Controls.Add(panel);
        panel.Location = control.Location;
        panel.Size = control.Size;
        panel.Controls.Add(control);
        control.Location = new Point(0, 0);

        // Do the actual data binding
        return control.DataBindings.Add("Checked", dataSource, dataMember);
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-04T15:20:04.737

我想对可能对阅读这些帖子的人有所帮助的代码块进行观察。由于其结构，以下代码可能并不总是按预期工作。

```
try
    {
      val = System.Enum.Parse(this.enumType, rb.Text) as System.Enum;
    }
    catch(Exception ex)
    {
      // cannot occurred if code is safe
      System.Windows.Forms.MessageBox.Show("No enum value for this radio button : " + ex.ToString());
    }
    object obj = this.bindingSource.Current;
    obj.GetType().GetProperty(propertyName).SetValue(obj, val, new object[] {
    }
  );
  this.bindingSource.CurrencyManager.Refresh(); 
```

如果 try 块发生错误，就会执行 catch 块。代码将在 catch 块之后继续执行。由于没有处理绑定源，因此 catch 后面的变量可能最终处于不确定状态，并可能引发另一个可能会或可能不会被处理的异常。

更好的方法如下

```
 try
        {
            val = System.Enum.Parse(this.enumType, rb.Text) as System.Enum;

        object obj = this.bindingSource.Current;
        obj.GetType().GetProperty(propertyName).SetValue(obj, val, new object[] { });
        this.bindingSource.CurrencyManager.Refresh();
        }
        catch(EntityException ex)
        {
            // handle error
        }
        catch(Exception ex)
        {
            // cannot occurred if code is safe
            System.Windows.Forms.MessageBox.Show("No enum value for this radio button : " + ex.ToString());
        } 
```

这允许处理枚举值错误以及可能发生的其他错误。但是，在 Exception 块之前使用 EntityException 或其变体（所有 Exception 的后代都必须先出现）。可以通过使用实体框架类而不是 Exception 基类来获取实体框架错误的特定实体状态信息。这有助于调试或为用户提供更清晰的运行时消息。

当我设置 try-catch 块时，我喜欢将其视为代码顶部的“层”。我决定异常在整个程序中的流程、它们向用户的显示，以及需要什么清理才能让程序继续正常工作，而对象不会处于不确定状态，可能会级联到其他错误。

# python - python类__getitem__负索引处理

> ID：675140
> 
> 赞同：2
> 
> 时间：2009-03-23T20:37:38.697
> 
> 标签：python, class, indexing

有没有共同的功能来做到这一点？现在我只是在做以下（和压倒一切`__len__`）

```
if idx < 0:
    idx = len(self) + idx
if idx < 0 or idx >= len(self):
    raise IndexError, "array index (%d) out of range [0, %d)" %(idx, len(self)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T20:52:14.200

这对我来说似乎很好。我认为没有更好或内置的方法可以做到这一点。毕竟，覆盖是关于提供您自己的功能。

编辑删除相当愚蠢的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T22:11:05.290

对于那些由谷歌带来的人，我想我会添加我刚刚想出的东西。似乎对我很有用。

```
def __getitem__(self, index):
    # Do this until the index is greater than 0.
    while index < 0:
        # Index is a negative, so addition will subtract.
        index += len(self)
    if index >= len(self):
        raise IndexError
    # Replace with your custom interface.
    return self.__instance.GetValue(index) 
```

# c# - C#中串行端口上的多端口异步I/O

> ID：675143
> 
> 赞同：2
> 
> 时间：2009-03-23T20:38:59.723
> 
> 标签：c#, .net, serial-port

我正在尝试用 C# 中的多个单元为串行[I/O](http://en.wikipedia.org/wiki/Input/output) ( [RS-232](http://en.wikipedia.org/wiki/RS-232) ) 编写一个测试应用程序，但由于缺乏线程经验，我遇到了问题，因此我正在征求对一种最知名的方法的反馈。

我有一个 COM 端口池 COM1-16，每个端口都可以随时读/写，我需要能够同时管理它们。这是线程池的情况吗？关于构建这个小程序的一些指导是什么？

编辑：经过审查，我想知道我是否真的需要在这里执行异步线程，我可以只维护每个 COM 端口的状态并单独为每个 COM 端口执行流逻辑（即状态机）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T20:50:55.420

围绕串行端口的许多困难都集中在一个假设上。假设是串行端口以方便的块接收数据，并且是预期的。

这是一个例子。我知道我的 GPS 接收器发送线路（以 CRLF 结尾）。这是 NMEA 句子之一的示例：

$GPGSV,3,1,11,10,75,053,29,29,52,311,32,24,50,298,30,02,39,073,30*77

但是，串行端口 DataReceived 事件处理程序可能（通常在我的 PC 上）使用该数据块触发多次。

事件触发 - 数据

```
1 $
2 GPGSV,3,1,11,10
3 ,75,053,29,29,52,311,32,24,50,298,30,02,39,073,30*77 
```

我没有与之抗争，而是创建了一些在事件触发时接收数据并将其排队的例程。当我需要数据时，我会调用一些其他例程，将数据按照**我想要**的块大小重新组合在一起。因此，在我第一次和第二次调用 read line(my readline) 时使用我的示例，我得到了一个空答案。第三次我得到了整个 NMEA 句子。

坏消息是我不会 C#。代码在这里[SerialPort](http://www.vbforums.com/showthread.php?t=530790)

根据端口的速度，代表可能不是一个好的选择。我使用代表而不是使用代表以接近 1Mbps 的速度测试了我的例程。在这样的速度下，不使用代表是更好的选择。

这里有一些知情人士的提示

[金汉密尔顿](http://blogs.msdn.com/bclteam/archive/2006/10/10/Top-5-SerialPort-Tips-_5B00_Kim-Hamilton_5D00_.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-24T11:14:59.817

如果您使用后台工作程序，您将不会抓取小块数据，您将获得整个字符串。你需要类似的东西：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    try
    {
        serialPort1.Open();
        if (serialPort1.IsOpen)
        {
            while (keepReading)
            {
                backgroundWorker1.ReportProgress(0, serialPort1.ReadLine());
                //backgroundWorker1.ReportProgress(0, sentence.Split(','));
                // split_gps_data();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T20:51:07.417

处理此问题的 .NET 方法是使用事件和委托。这最终会创建多个线程，但这样做的方式意味着您不会显式创建它们。如果您创建一个事件处理程序并将其添加到每个端口的 DataReceived 事件中，那么当任何端口接收到数据时，都会在单独的线程上调用该事件处理程序。自然，这意味着该方法必须是可重入的，并且必须保护对任何共享数据结构的访问免受并发访问。

您的处理程序例程将执行以下操作：

1.  调用 ReadExisting 以获取可用数据。
2.  处理数据。
3.  完毕。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-03-24T11:04:46.447

您需要知道接收器以什么速度吐出数据。是一秒钟一次，一秒钟两次，五次……

我在读取 GPS 数据时遇到了同样的问题。您需要使用 C# 中的后台工作程序来更新您的变量、屏幕。

# c# - 列表框中的进度条？

> ID：675147
> 
> 赞同：1
> 
> 时间：2009-03-23T20:39:59.817
> 
> 标签：c#, forms, visual-studio-2008, listbox, progress-bar

我有一个包含一堆文件下载的列表框，我想在当前下载中添加一个进度条，让用户知道下载的进度。我无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T21:07:51.170

您需要使用所有者绘制的列表框

使用普通的 ListBox 并设置 DrawMode = DrawMode.OwnerDrawFixed 并处理 MeasureItem 和 DrawItem 这两个事件。

缺点是你必须自己处理所有的绘图，但至少文本和进度条很容易绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T14:42:40.953

为什么选择列表框？使用 ListView，通过一个简单的谷歌你会发现大量的 ListView+Progress Bars。

# .net - 在 WinForms 数据网格中“旋转”数据

> ID：675158
> 
> 赞同：0
> 
> 时间：2009-03-23T20:42:34.863
> 
> 标签：.net, sql-server, crosstab

使用 Winforms .NET 2.0，我的客户要求 Datagrid 中的数据垂直而不是水平显示。应用程序的数据层是基于 NHibernate 构建的，因此我通常避免编写原始 SQL 来支持 HQL。但是，这种情况可能有助于利用 SQL Server 2005 的“交叉表”功能。

例如，当前的 gridview 布局（反映表格设计）绑定到 IList(of ClaimGroup)，如下所示：

```
 GroupName | ClaimType | PlanCode | AgeFrom | AgeTo | AgeSpan

BHFTConv 1| P         | CC       | 6       | 12    | Years 

```

需要变成：

```
 GroupName  | BHFTConv 1
ClaimType  | P
PlanCode   | CC
AgeFrom    | 6
AgeTo      | 12
AgeSpan    | Years 

```

网格当前具有并且仍然需要一个“应用”按钮，该按钮将保存对旋转网格所做的任何更改。

那你会怎么做？使用原始 SQL 交叉表数据，从而打破 NHibernate 避免特定数据库查询的规律？或者是否有一些内置到 DataSet 中的机制允许数据旋转？或者只是使用蛮力来旋转数据？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-28T18:00:47.740

我会使用datagridview的虚拟模式。
属性 VirtualMode = True

当您正常收集数据时
创建2列并准备datagridview

```
DataGridView.Columns.Add("colGroup", "Group");
DataGridView.Columns.Add("colBVH", "BVH");
DataGridView.Rows.Clear();
DataGridView.Rows.Add(6);
DataGridView.CellValueNeeded +=
  new DataGridViewCellValueEventHandler(NeedValue); 
```

现在实现“CellValueNeeded”事件..

```
private void NeedValue(object sender, DataGridViewCellValueEventArgs e)
{
    e.Value
    e.ColumnIndex
    e.RowIndex
} 
```

使用 rowindex 和 columnindex 设置需要显示的值。
您知道基于 rowvalue 的属性和基于 columnvalue 的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-29T17:50:11.813

您是否考虑过使用 DataList 而不是 DataGridView？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-28T03:11:05.023

我对旋转网格有同样的要求，因为我在 ASP.NET 中复制 QueryWizard 并且数据更易于管理。

我的原型由一个Repeater 组成，它将行从垂直行中转储出来，但是如果您有不可预测的数据长度，因为表格需要设置行高、宽度和溢出：隐藏以显示统一，格式设置会有点混乱。- 但我想一个简单的 nobr 就足够了。

```
<HeaderTemplate>
   <table>
   <tr><td>
         <table>
         <tr><td>ColumnName1</td></tr>
         <td><td>ColumnName2</td></tr>
         </table>
       </td>
</HeaderTemplate>
<ItemTemplate>
       <td>
         <table>
         <tr><td><%# Eval("Column1") %></td></tr>
         <tr><td><%# Eval("Column2") %></td></tr>
         </table>
       </td>
</ItemTemplate>
<FooterTemplate>
    </tr>
    </table>
</FooterTemplate> 
```

我星期一的攻击计划是覆盖 GridView 渲染方法，然后循环 Rows 以让它们按需要渲染。我会回帖让你知道我的进展

伪代码 - 类似

```
for(int c=0; c < columns.Count; c++)
{
   writer.Write("<tr>");
   writer.Write("<td>" + columns[c].Title + "</td>");

   for(int r=0; r < rows.Count; r++)
   {
       rows[r].Cells[c].render(writer);
   }

   writer.Write("</tr>");
} 
```

通过让 Cell 处理渲染，您不需要对 Binding 或 ViewState 做任何不同的事情。

# ruby-on-rails - Ubuntu linux 上的 Ruby on Rails：创建新类会引发 db 错误

> ID：675159
> 
> 赞同：0
> 
> 时间：2009-03-23T20:42:42.057
> 
> 标签：ruby-on-rails, linux, ubuntu

我是一个新手 linux 用户，试图接受使用 Ruby on Rails 进行 *nix 开发。我正在阅读一本名为“Simply Rails 2”[SitePoint:lenz] 的优秀书籍，直到我尝试在 rails 控制台中创建一个新的 Story 对象并且我得到一个“找不到 sqlite3 的驱动程序”错误之前没有任何问题：

$sudo ruby​​ script/console 加载开发环境（Rails 2.3.2）

> > class Story < ActiveRecord::Base end => nil story = Story.new RuntimeError: no driver for sqlite3 found from /usr/local/lib/ruby/gems/1.9.0/gems/sqlite3-ruby-1.2.4/lib /sqlite3/database.rb:621：在“加载驱动程序”中...

我认为这可能与我安装 Ruby 组件的位置有关。
我在我的桌面上安装了这些文件夹：

ruby-1.9.0-5 ruby​​gems-1.3.1 sqlite-3.6.11

我很确定这是一个配置/安装问题，但是当涉及到 Linux 时我很迷茫，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T20:49:41.510

尝试：

```
gem install sqlite3-ruby 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T20:48:55.567

我只能建议通过您的分发包管理器安装 gem（Debian 上的 aptitude/apt-get，Fedora 上的 yum，...），然后通过 gem 本身安装所有内容。

```
gem install rails 
```

这应该包括 sqlite 驱动程序。

# javascript - Javascript 菜单冲突

> ID：675160
> 
> 赞同：0
> 
> 时间：2009-03-23T20:42:56.003
> 
> 标签：javascript

我遇到了 Javascript 冲突。我有一个垂直的 javascript 左侧导航菜单和一个水平的 javascript 时区菜单。两者的工作代码，但是当我在同一页面中调用它们时，菜单树不起作用。如果我取出`<SCRIPT src="timezone.js" type=text/javascript></SCRIPT>`标签，菜单工作正常，但时区被否定。`<div>`问题？

## html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

        <html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">
        <head>

            <meta http-equiv="Content-Language" content="en-us" />
            <title>TEST</title>

        <link rel="stylesheet" type="text/css" href="test.css" />

        <SCRIPT src="BarMenu.js" type=text/javascript></SCRIPT>

        </head>

        <body onload="startw();" style="background-color: #808080">  

        <SCRIPT type=text/javascript>
        /* preload images, you can remove this code */
        img1 = new Image();
        img1.src = "images/tree-node.gif";
        img2 = new Image();
        img2.src = "images/tree-node-open.gif";
        img3 = new Image();
        img3.src = "images/tree-leaf.gif";
        img4 = new Image();
        img4.src = "images/tree-leaf-last.gif";

        window.onload = function() {
            var barMenu3a = new BarMenu('bar-menu3a');
            barMenu3a.box1Hover = false;
            barMenu3a.box2Hover = false;
            barMenu3a.init();
            var barMenu3b = new BarMenu('bar-menu3b');
            barMenu3b.box1Hover = false;
            barMenu3b.box2Hover = false;
            barMenu3b.init();
            var barMenu3c = new BarMenu('bar-menu3c');
            barMenu3c.box1Hover = false;
            barMenu3c.box2Hover = false;
            barMenu3c.init();
        }
        </SCRIPT>

        <table id="MainTable" cellspacing="0" cellpadding="0" style="width: 800px" class="style8">
            <tr>
                <td colspan="2" style="height: 91px" class="style10">
                <span class="FooterText"> <br />
                </span><br />
                </td>
        <tr>        
        <td colspan="2">

        <SCRIPT src="timezone.js" type=text/javascript></SCRIPT> 
        <div id="zonediv" class="GreenBar"></div>

            </td>   
            </tr>

        <tr>    
                <td valign="top" style="width: 200px" class="LeftNav">

        <DIV class=left>
        <TABLE cellSpacing=0 cellPadding=0 width="100%">
          <TBODY>
          <TR>
            <TD class=top>» Products</TD></TR>
          <TR>
            <TD class=section>
              <DIV class=bar-menu id=bar-menu3a>
              <TABLE cellSpacing=0 cellPadding=0 width="100%">
                <TBODY>
                <TR>
                  <TD>
                    <DIV><SPAN class=box1>Product One</SPAN></DIV>
                    <DIV class=section>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Overview</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Features</A></DIV>
                    <DIV class=box2-last><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Requirements</A></DIV></DIV></TD></TR>
                <TR>
                  <TD height=2></TD></TR>
                <TR>
                  <TD>
                    <DIV><SPAN class=box1>Product Two</SPAN></DIV>
                    <DIV class=section>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Overwiev</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Features</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Requirements</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Screenshots</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Flash 
                    Demos</A></DIV>
                    <DIV class=box2-last><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Live 
                    Demo</A></DIV></DIV></TD></TR>
                <TR>
                  <TD height=2></TD></TR>
                <TR>
                  <TD>
                    <DIV><SPAN class=box1>Product Three</SPAN></DIV>
                    <DIV class=section>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Overview</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Features</A></DIV>
                    <DIV class=box2-last><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Requirements</A></DIV></DIV></TD></TR>
                <TR>
                  <TD height=2></TD></TR>
                <TR>
                  <TD>
                    <DIV><SPAN class=box1>Product Four</SPAN></DIV>
                    <DIV class=section>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Overview</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Features</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Requirements</A></DIV>
                    <DIV class=box2><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Screenshots</A></DIV>
                    <DIV class=box2-last><A 
                    href="http://www.gosu.pl/MyGosuMenu/demo/BarMenu/example3.html">Live 
                    Demo</A></DIV></DIV></TD></TR></TBODY></TABLE></DIV></TD></TR>
         </TBODY></TABLE></DIV>
        </td></tr></tr>
        </table>

        </body>

        </html> 
```

## BarMenu.js

```
function BarMenu(id) {
    this.box1Hover = true;
    this.box2Hover = true;
    this.highlightActive = false;

    this.init = function() {
        if (!document.getElementById(this.id)) {
            alert("Element '"+this.id+"' does not exist in this document. BarMenu cannot be initialized");
            return;
        }
        this.parse(document.getElementById(this.id).childNodes, this.tree, this.id);
        this.load();
        if (window.attachEvent) {
            window.attachEvent("onunload", function(e) { self.save(); });
        } else if (window.addEventListener) {
            window.addEventListener("unload", function(e) { self.save(); }, false);
        }
    }

    this.parse = function(nodes, tree, id) {
        for (var i = 0; i < nodes.length; i++) {
            if (nodes[i].nodeType != 1) {
                continue;
            }
            if (nodes[i].className) {
                if ("box1" == nodes[i].className.substr(0, 4)) {
                    nodes[i].id = id + "-" + tree.length;
                    tree[tree.length] = new Array();
                    eval('nodes[i].onmouseover = function() { self.box1over("'+nodes[i].id+'"); }');
                    eval('nodes[i].onmouseout = function() { self.box1out("'+nodes[i].id+'"); }');
                    eval('nodes[i].onclick = function() { self.box1click("'+nodes[i].id+'"); }');
                }
                if ("section" == nodes[i].className) {
                    id = id + "-" + (tree.length - 1);
                    nodes[i].id = id + "-section";
                    tree = tree[tree.length - 1];
                }
                if ("box2" == nodes[i].className.substr(0, 4)) {
                    nodes[i].id = id + "-" + tree.length;
                    tree[tree.length] = new Array();
                    eval('nodes[i].onmouseover = function() { self.box2over("'+nodes[i].id+'", "'+nodes[i].className+'"); }');
                    eval('nodes[i].onmouseout = function() { self.box2out("'+nodes[i].id+'", "'+nodes[i].className+'"); }');
                }
            }
            if (this.highlightActive && nodes[i].tagName && nodes[i].tagName == "A") {
                if (document.location.href == nodes[i].href) {
                    nodes[i].className = (nodes[i].className ? ' active' : 'active')
                }
            }
            if (nodes[i].childNodes) {
                this.parse(nodes[i].childNodes, tree, id);
            }
        }
    }

    this.box1over = function(id) {
        if (!this.box1Hover) return;
        if (!document.getElementById(id)) return;
        document.getElementById(id).className = (this.id_openbox == id ? "box1-open-hover" : "box1-hover");
    }

    this.box1out = function(id) {
        if (!this.box1Hover) return;
        if (!document.getElementById(id)) return;
        document.getElementById(id).className = (this.id_openbox == id ? "box1-open" : "box1");
    }

    this.box1click = function(id) {
        if (!document.getElementById(id)) {
            return;
        }
        var id_openbox = this.id_openbox;
        if (this.id_openbox) {
            if (!document.getElementById(id + "-section")) {
                return;
            }
            this.hide();
            if (id_openbox == id) {
                if (this.box1hover) {
                    document.getElementById(id_openbox).className = "box1-hover";
                } else {
                    document.getElementById(id_openbox).className = "box1";
                }
            } else {
                document.getElementById(id_openbox).className = "box1";
            }
        }
        if (id_openbox != id) {
            this.show(id);
            var className = document.getElementById(id).className;
            if ("box1-hover" == className) {
                document.getElementById(id).className = "box1-open-hover";
            }
            if ("box1" == className) {
                document.getElementById(id).className = "box1-open";
            }
        }
    }

    this.box2over = function(id, className) {
        if (!this.box2Hover) return;
        if (!document.getElementById(id)) return;
        document.getElementById(id).className = className + "-hover";
    }

    this.box2out = function(id, className) {
        if (!this.box2Hover) return;
        if (!document.getElementById(id)) return;
        document.getElementById(id).className = className;
    }

    this.show = function(id) {
        if (document.getElementById(id + "-section")) {
            document.getElementById(id + "-section").style.display = "block";
            this.id_openbox = id;
        }
    }

    this.hide = function() {
        document.getElementById(this.id_openbox + "-section").style.display = "none";
        this.id_openbox = "";
    }

    this.save = function() {
        if (this.id_openbox) {
            this.cookie.set(this.id, this.id_openbox);
        } else {
            this.cookie.del(this.id);
        }
    }

    this.load = function() {
        var id_openbox = this.cookie.get(this.id);
        if (id_openbox) {
            this.show(id_openbox);
            document.getElementById(id_openbox).className = "box1-open";
        }
    }

    function Cookie() {
        this.get = function(name) {
            var cookies = document.cookie.split(";");
            for (var i = 0; i < cookies.length; i++) {
                var a = cookies[i].split("=");
                if (a.length == 2) {
                    a[0] = a[0].trim();
                    a[1] = a[1].trim();
                    if (a[0] == name) {
                        return unescape(a[1]);
                    }
                }
            }
            return "";
        }
        this.set = function(name, value) {
            document.cookie = name + "=" + escape(value);
        }
        this.del = function(name) {
            document.cookie = name + "=; expires=Thu, 01-Jan-70 00:00:01 GMT";
        }
    }

    var self = this;
    this.id = id;
    this.tree = new Array();
    this.cookie = new Cookie();
    this.id_openbox = "";
}

if (typeof String.prototype.trim == "undefined") {
    String.prototype.trim = function() {
        var s = this.replace(/^\s*/, "");
        return s.replace(/\s*$/, "");
    }
} 
```

## 时区.js

```
var wd=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
var D=[['Bucharest',120,60],['Madrid',60,60],['New York',-300,60],['Nairobi',180,0]]//city,standard time zone(minutes), DST(minutes)

//add in the array your cities,STZ, DST
function calc(){
var spans=document.getElementById('zonediv').getElementsByTagName('span')
for(var i=0;i<D.length;i++){
var t=new Date();
t.setTime(t.getTime()+(t.getTimezoneOffset()*60000)+((D[i][1]+D[i][2])*60000));//the zone's time
var Dy=t.getFullYear();
var Dd=t.getDate()<10?'0'+t.getDate():t.getDate();
var Dm=t.getMonth()<10?'0'+(t.getMonth()+1):t.getMonth()+1;
var Dh=t.getHours()<10?'0'+t.getHours():t.getHours(); 
var Di=t.getMinutes()<10?'0'+t.getMinutes():t.getMinutes();
var Ds=t.getSeconds()<10?'0'+t.getSeconds():t.getSeconds();
var Dz=wd[t.getDay()];
spans[i].firstChild.data=Dh+':'+Di+':'+Ds;
}
setTimeout('calc()',1000)
}
onload=function(){
var root = document.getElementById('zonediv');
for(var i=0;i<D.length;i++){
root.appendChild(document.createTextNode(D[i][0]+' '))
var sp= document.createElement('span');
sp.appendChild(document.createTextNode('span'));
root.appendChild(sp);root.appendChild(document.createTextNode(' | '));
}
calc();
} 
```

## 测试.css

```
/* Left Navigation Menu */

DIV.left {
    background-image: url('images/LeftNav.gif'); WIDTH: 190px; HEIGHT: 100%
}
TD.top {
    FONT-WEIGHT: bold; FONT-SIZE: 13px; COLOR: #D5D7C0; TEXT-INDENT: 10px; LINE-HEIGHT: 26px; font-family: Verdana;
background-color:#3D3D3D;
/*background-image: url('images/LeftNav.gif');*/
}
TD.section {
    PADDING-RIGHT: 12px; PADDING-LEFT: 12px; PADDING-BOTTOM: 6px; PADDING-TOP: 6px
}
.bar-menu {
    moz-user-select: none
}
.bar-menu .box1 {
    PADDING-LEFT: 19px; BACKGROUND: url(images/tree-node.gif) no-repeat; CURSOR: default
}
.bar-menu .box1-open {
    PADDING-LEFT: 19px; BACKGROUND: url(images/tree-node-open.gif) no-repeat; CURSOR: default
}
.bar-menu .box1 {
    font-family: Verdana;
    font-size: 13px;
    color:#3D3D3D;

}

.bar-menu .box1-open {
    font-family: Verdana;
    font-size: 11px;
    color:#3D3D3D;

    }
UNKNOWN {
    FONT-SIZE: 12px; PADDING-BOTTOM: 1px; COLOR: #000000; LINE-HEIGHT: 16px; FONT-FAMILY: arial
}
 HTML .bar-menu .box1 {
    FONT-SIZE: 12px; COLOR: #000000; FONT-FAMILY: arial; HEIGHT: 16px
}
 HTML .bar-menu .box1-open {
    FONT-SIZE: 12px; COLOR: #000000; FONT-FAMILY: arial; HEIGHT: 16px
}
.bar-menu .section {
    DISPLAY: none; FONT-SIZE: 12px; LINE-HEIGHT: 16px; FONT-FAMILY: arial
}
.bar-menu .section A {
    COLOR: #000000; WHITE-SPACE: nowrap; TEXT-DECORATION: none
}
.bar-menu .section A:hover {
    COLOR: #0000ff; WHITE-SPACE: nowrap; TEXT-DECORATION: none
}
.bar-menu .box2 {
    PADDING-LEFT: 19px; BACKGROUND: url(images/tree-leaf.gif) no-repeat
}
.bar-menu .box2-last {
    PADDING-LEFT: 19px; BACKGROUND: url(images/tree-leaf-last.gif) no-repeat
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T21:04:44.873

他们都在设置window.onload。

快速解决方法是从此更改 timezone.js：

```
onload=function(){
var root = document.getElementById('zonediv');
... 
```

对此

```
var oldOnload = window.onload;
window.onload = function()
{
    if (oldOnload)
        oldOnload();

    var root = document.getElementById('zonediv');
    ... 
```

# c# - 是否可以用 C# 以外的语言实现属性？

> ID：675161
> 
> 赞同：2
> 
> 时间：2009-03-23T20:43:04.193
> 
> 标签：c#, php, javascript, python, properties

最近在 C# 和 WPF 的较量中，我喜欢 C# 的属性：

```
public double length_inches
{
    get { return length_metres * 39.0; }
    set { length_metres = value/39.0; }
} 
```

当然，请注意，length_metres 可能会从一个字段变为一个属性，并且代码不需要关心。WPF 还可以非常愉快地将 UI 元素绑定到对象属性。

当我第一次了解类和对象时，我认为有办法做到这一点，因为它看起来很明显！在类中隐藏复杂性的关键在于您不再需要关心存储的内容。但直到现在才看到它。

有趣的是，我第一次看到它是在 VB.Net 中完成的。OO 纯度的领先优势。

问题是，我可以用我更经常使用的其他语言重新创建属性吗，比如 javascript、python、php？在javascript中，如果我将一个变量设置为一个闭包，我不会再次获得闭包，而不是它的结果吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-23T20:54:43.540

Python 绝对支持属性：

```
class Foo(object):

    def get_length_inches(self):
        return self.length_meters * 39.0

    def set_length_inches(self, val):
        self.length_meters = val/39.0

    length_inches = property(get_length_inches, set_length_inches) 
```

从 Python 2.5 开始，语法糖存在于只读属性中，在 2.6 中，也存在可写属性：

```
class Foo(object):

    # 2.5 or later
    @property
    def length_inches(self):
        return self.length_meters * 39.0

    # 2.6 or later
    @length_inches.setter
    def length_inches(self, val):
        self.length_meters = val/39.0 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-23T21:21:40.107

在[JavaScript 中](https://developer.mozilla.org/En/Core_JavaScript_1.5_Guide:Creating_New_Objects:Defining_Getters_and_Setters)：

```
var object = {
  // .. other property definitions ...
  get length_inches(){ return this.length_metres * 39.0; },
  set length_inches(value){ this.length_metres = value/39.0; }
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-23T20:49:51.180

在 C# 中，属性大多只是编译器功能。编译器生成特殊方法`get_PropertyName`并计算`set_PropertyName`出调用等等。它还设置`specialname`方法的 IL 属性。

如果您选择的语言支持某种预处理器，您可以实现类似的东西，但除此之外，您几乎被所拥有的东西所困扰。

当然，如果您正在实现自己的 .NET 语言，您也可以执行 C# 编译器所做的事情。

由于实现细节，字段和属性之间实际上存在细微差别。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c/653799#653799)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-23T20:58:51.907

衍生出 C# 的 Delphi 具有 go 一词的属性。Go 这个词大约是 15 年前的事了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-23T21:12:47.677

大多数动态语言都支持类似的东西。在 Smalltalk 和 Ruby 中，字段不是直接公开的——获得它们的唯一方法是通过方法。换句话说 - 所有变量都是私有的。Ruby 有一些宏（实际上是类方法），以使其更易于键入：

```
class Thing
  attr_accessor :length_inches
end 
```

将为`length_inches`. 在幕后，它只是生成这个：

```
class Thing
  def length_inches
    @length_inches
  end
  def length_inches=(value)
    @length_inches = value
  end
end 
```

（Ruby 速成课程：`@`前缀表示它是一个实例变量。`return`在 Ruby 中是隐式的。如果是，`t.length_inches = 42`将自动调用。）`length_inches=(42)``t``Thingy`

如果您稍后想要在 getter/setter 中添加一些逻辑，您可以简单地手动实现相同的方法：

```
class Thing
  def length_inches
    @length_metres * 39.0
  end
  def length_inches=(value)
    @length_metres = value / 39.0
  end
end 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-23T21:58:53.073

在 VB（即 VB 6.0，不是 VB.net）和 VBScript 中开箱即用！

```
Public Property Get LengthInches() As Double
  LengthInches = LengthMetres * 39
End Property

Public Property Let LengthInches(Value As Double)
  LengthMetres = Value / 39
End Property 
```

也可以在 PHP 中很好地伪造，创建一个您结合命名准则、受保护成员和魔术函数扩展的类。呵呵。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-23T20:53:55.710

Delphi 有一个属性模式（带有 Setter 和 Getter 方法），它也可以在接口中使用。具有“已发布”可见性的属性也将显示在 IDE 对象检查器中。

具有属性的类定义如下所示：

```
TFoo = class
private
  FBar: string;
  procedure SetBar(Value: string);
  function GetBar: string;

public
  property Bar: string read GetBar write SetBar;

end; 
```

或（没有 Setter / Getter）：

```
TFoo = class
private
  FBar: string;

public
  property Bar: string read FBar write FBar;

end; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-23T20:55:32.993

我认为这是 Python 等价物

```
class Length( object ):
    conversion = 39.0
    def __init__( self, value ):
        self.set(value)
    def get( self ):
        return self.length_metres
    def set( self, value ):
        self.length_metres= value
    metres= property( get, set )
    def get_inches( self ):
        return self.length_metres*self.conversion
    def set_inches( self, value ):
        self.length_metres= value/self.conversion
    inches = property( get_inches, set_inches ) 
```

它是这样工作的。

```
>>> l=Length(2)
>>> l.metres
2
>>> l.inches
78.0
>>> l.inches=47
>>> l.metres
1.2051282051282051 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-23T22:13:32.570

在 Objective-C 2.0 / Cocoa 中：

```
@interface MyClass : NSObject
{
    int myInt;
    NSString *myString;
}

@property int myInt;
@property (nonatomic, copy) NSString *myString;

@end 
```

然后在实现中，只需指定：

```
@synthesize myInt, myString; 
```

这将为该成员变量生成具有键值编码兼容命名约定的访问器，例如：

```
- (void)setMyString:(NSString *)newString
{
    [myString autorelease];
    myString = [newString copy];
} 
```

节省大量输入访问器的工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-23T20:46:31.703

绝对可以用其他语言实现属性。例如，VB 和 F# 具有显式属性支持。但是这些都针对具有属性支持的CLR。

VB。

```
Public Property Name As String 
  Get 
    return "someName"
  End Get
  Set
    ...
  End Set
End Property 
```

我不相信 javascript 或 PHP 支持属性语法，但我对这些语言不是很熟悉。几乎可以用任何模拟属性的语言创建字段获取/设置访问器方法。

在引擎盖下，.Net 属性实际上只是归结为 get/set 方法。他们只是有一个非常好的包装:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-23T20:57:44.483

ActionScript 3（类固醇上的 javascript）也具有 get/set 语法

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-24T04:15:15.527

[Boo](http://boo.codehaus.org/Fields+And+Properties)是一种与 Python 非常相似的 .NET 语言，但具有静态类型。它可以实现属性：

```
class MyClass:
    //a field, initialized to the value 1
    regularfield as int = 1 //default access level: protected

    //a string field
    mystringfield as string = "hello"

    //a private field
    private _privatefield as int

    //a public field
    public publicfield as int = 3

    //a static field: the value is stored in one place and shared by all
    //instances of this class
    static public staticfield as int = 4

    //a property (default access level: public)
    RegularProperty as int:
        get: //getter: called when you retrieve property
            return regularfield
        set: //setter: notice the special "value" variable
            regularfield = value

    ReadOnlyProperty as int:
        get:
            return publicfield

    SetOnlyProperty as int:
        set:
            publicfield = value

    //a field with an automatically generated property
    [Property(MyAutoProperty)]
    _mypropertyfield as int = 5 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-03-23T21:04:20.943

遗憾的是，我自己还没有尝试过，但我读到可以通过 __set 和 __get 魔术方法在 PHP 中实现属性。这是有关此主题的[博客文章。](http://blog.dougalmatthews.com/2008/07/php-__set-and-__get-magic-methods/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-03-23T21:12:38.957

您可以使用[PHP5 魔术函数](http://php.net/manual/en/language.oop5.overloading.php#language.oop5.overloading.members)制作类似的东西。

```
class Length {
    public $metres;
    public function __get($name) {
        if ($name == 'inches')
            return $this->metres * 39;
    }
    public function __set($name, $value) {
        if ($name == 'inches')
            $this->metres = $value/39.0;
    }
}

$l = new Length;
$l->metres = 3;
echo $l->inches; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-03-23T21:26:57.753

你可以用各种语言来做，有不同程度的语法糖和魔法。正如已经提到的，Python 对此提供了支持（并且，使用装饰器，您肯定可以进一步清理它）。PHP 可以提供一个合理的传真，带有适当的`__get()`和`__set()`方法（可能是一些间接的。如果你正在使用 Perl，你可以使用一些源过滤器来复制行为。Ruby 已经要求一切都通过。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-03-23T21:48:15.220

当我第一次使用 Visual Basic（比如版本 1 或其他东西）时，我做的第一件事就是尝试在 C++ 中重新创建属性。可能在当时我可以使用模板之前，但现在它会是这样的：

```
template <class TValue, class TOwner, class TKey>
class property
{
    TOwner *owner_;

public:
    property(TOwner *owner)
        : owner_(owner) {}

    TValue value() const
    {
        return owner_->get_property(TKey());
    }

    operator TValue() const
    {
        return value();
    }

    TValue operator=(const TValue &value)
    {
        owner_->set_property(TKey(), value);
        return value;
    }
};

class my_class
{
public:
    my_class()
        : first_name(this), limbs(this) {}

    struct limbs_k {};
    struct first_name_k {};

    property<std::string, my_class, first_name_k> first_name;
    property<int, my_class, limbs_k> limbs;

    std::string get_property(const first_name_k &);
    void set_property(const first_name_k &, const std::string &value);

    int get_property(const limbs_k &);
    void set_property(const limbs_k &, int value);
}; 
```

请注意，“key”参数在`get_property`/的实现中被忽略`set_property`- 它只是通过重载决议有效地充当函数名称的一部分。

现在 的用户`my_class`将能够引用公共成员`first_name`，并且`limbs`在许多情况下就像它们是原始字段一样，但它们只是提供了调用相应`get_property`/`set_property`成员函数的替代语法。

这并不完美，因为在某些情况下，当编译器无法推断所需的类型转换时，您必须在属性上调用 value() 才能获取值。此外，您可能会从构造函数中的成员传递中收到警告`this`，但在这种情况下您可以将其静音。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2009-03-23T20:53:23.310

约定是实现一个`get_PropertyName()`和一个`set_PropertyName()`方法（这也是 CLR 中的全部内容。属性只是 VB.NET/C# 中的语法糖 - 这就是为什么从字段更改为属性或反之亦然的更改会破坏并需要客户端重新编译的代码。

```
public int get_SomeValue() { return someValue; }
public void set_SomeValue(int value) { someValue = value; }
private int someValue = 10;

// client
int someValue = someClass.get_SomeValue();
someClass.set_SomeValue(12); 
```

# php - Codeigniter 安全性 - mysql 数据库

> ID：675172
> 
> 赞同：3
> 
> 时间：2009-03-23T20:46:02.157
> 
> 标签：php, mysql, security, codeigniter, admin

我正处于实现 CodeIgniter 站点的最后阶段，该站点需要一个非常简单的登录系统。一个用户和一个密码来保护管理区域。我想我将使用众多 CodeIgniter 身份验证库之一，它应该允许我确保人们在没有以管理员身份登录的情况下无法读取数据库（希望如此）。

1.  在这样的设置中是否有任何明显的漏洞？
2.  除了使用这样的库之外，我是否应该采取进一步措施来确保 MySQL 数据库中数据的安全性？

它将托管在共享服务器上；意味着很少或没有服务器配置是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T16:49:02.313

关于此处可用的身份验证系统进行了长时间的讨论：[我应该如何为 CodeIgniter 选择身份验证库？](https://stackoverflow.com/questions/346980/what-code-igniter-authentication-library-is-best)

最新版本的 Redux 似乎是最受欢迎的。

[http://code.google.com/p/reduxauth/](http://code.google.com/p/reduxauth/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T21:58:22.217

我过去使用过（效果很好）DX Auth 1.0.6。

您可以在[http://codeigniter.com/forums/viewthread/98465/找到它](http://codeigniter.com/forums/viewthread/98465/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T21:34:42.633

我会创建简单的基于表单的身份验证并使用强密码。

HTTP身份验证有太多问题恕我直言：

*   更容易暴力破解。
*   嗅探请求的任何人都可以确定正在使用的用户名和密码，但他们甚至不需要；他们可以自己使用相同的 HTTP。
*   一旦弹出该对话框，就很难消除，这可能会很烦人。
*   许多浏览器在让您进入之前会要求输入两次密码。
*   注销或更改用户很困难，您通常必须退出浏览器。
*   很容易忘记您让浏览器保存了您的凭据，这是另一个潜在的安全风险。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-23T20:57:02.677

如果它在 apache 服务器上，那么我会考虑只设置一个 htpasswd 保护目录。[在此处](http://webtools.live2support.com/misc_htaccess.php)阅读更多相关信息。

# linux - LAMP、XAMPP 用于生产

> ID：675188
> 
> 赞同：5
> 
> 时间：2009-03-23T20:51:46.997
> 
> 标签：linux, xampp, lamp

我看到的每个 LAMP 或 XAMPP 文章或教程都说“不用于生产”，那么我在生产中使用什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-23T20:55:23.740

您使用安装的 apache、php 和 mysql，因为它们应该用于生产。xampp 是一个包中的所有东西，基本上没有设置安全性.. root 密码为空.. 用户是众所周知的.. 但组件与您下载它们时使用的组件相同..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T21:01:08.797

[XAMPP 理念](http://www.apachefriends.org/en/xampp.html#300)说：

> XAMPP 背后的理念是为开发人员构建一个易于安装的发行版以进入 Apache 的世界。为了方便开发人员，XAMPP 配置为启用了所有功能。
> 
> 从安全的角度来看，默认配置并不好，并且对于生产环境来说不够安全 - 请不要在这样的环境中使用 XAMPP。

所以它主要被指定为开发环境而不是生产环境。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-23T20:54:47.020

推出您自己的 Apache、数据库和脚本语言组合，以满足您的需求。

这就是托管公司的谋生手段。

您可能会发现企业 Linux 发行版足以满足您的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-23T21:09:29.043

给定正确的安装选项，您可以将它们用作生产服务器的起点。但是有一些漏洞需要填补，主要是安全性。您提到的免责声明（明智地）确保您对开始的内容保持警惕和怀疑（并确保没有人可以声称他们在不让您知道的情况下为您提供了危险的东西，所以如果不好，请不要责怪他们事情发生。）

这就像卖给你一辆没有安全带的汽车。

但是你学到的东西和你开发的解决方案通常与“真实”服务器完全兼容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T08:45:06.243

与 LAMP 相比，XAMPP 的安装简单。如果您在开发服务器上，则没有区别，但如果您在生产服务器上，则最好从基本而不是依赖第三方来做，您将在生产服务器上获得所需的确切服务，没有额外的服务可以降低生产服务器的性能。并尝试在开发服务器和生产服务器上保持相同的设置，这将确保如果应用程序在开发服务器上运行，也将在生产服务器上运行，而无需进行任何额外设置。

有关更多安装详细信息，您可以阅读以下博客：[http ://codebucket.co.in/lamp-installation/](http://codebucket.co.in/lamp-installation/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-24T12:13:31.663

那么使用 CentOS 之类的东西并从他们的存储库中安装 apache Web 服务器、PHP 和 MySql 会是安全的第一步吗？

然后我想我需要对锁定和可能存在的孔进行一些阅读？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-25T23:34:45.963

对于生产，您已经进行了自己的配置，这取决于访问者数量、服务器上安装的 RAM、您正在使用的脚本。FE 您只需要 5 个用于 Wordpress 的 PHP 扩展，但如果您使用 Woocommerce，您需要更多的 PHP 内存，对于多个站点，您使用 VirtualHosts，如果您没有注册域，还需要用户 UserDir 模块。我所说的只是例子，你必须知道你的脚本要求，安装一切不是好主意。

# asp.net - 将转发器绑定到 DirectoryInfo.GetFiles

> ID：675218
> 
> 赞同：0
> 
> 时间：2009-03-23T20:59:35.603
> 
> 标签：asp.net, vb.net

如果我想将文件夹的文件绑定到gridview，我可以这样做：

```
GridView1.DataSource = New DirectoryInfo("C:\MyPix").GetFiles
GridView1.DataBind() 
```

...还有这个 asp.net

```
<asp:GridView ID="GridView1" runat="server">
 <Columns>
  <asp:BoundField DataField="Name" />
 </Columns>
</asp:GridView> 
```

...但是如果我想将它绑定到转发器，我想我可以像这样显示文件名：

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate><%#Container.DataItem("Name")%></ItemTemplate>
</asp:Repeater> 
```

...但这让我收到错误“找不到类型'FileInfo'的默认成员。”

该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-23T21:02:43.210

尝试：

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate><%#Eval("Name")%></ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T21:02:55.550

...在这里写问题来解释我的问题，让我有更多的想法来谷歌寻找正确的答案。

显然我只需要 User Databinder.eval... 然后它就像一个魅力。

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate><%#DataBinder.Eval(Container.DataItem, "Name")%></ItemTemplate>
</asp:Repeater> 
```

好吧，至少答案在这里供将来参考。;)

# ssl - 确定负载均衡器后面的 SSL 连接

> ID：675226
> 
> 赞同：3
> 
> 时间：2009-03-23T21:04:03.940
> 
> 标签：ssl, load-balancing

在这里寻找最佳实践。我们在负载均衡器级别处理 SSL 连接，因此从负载均衡器到 Web 服务器的所有连接都是 http。这样我们就无法知道客户端与我们的 Web 服务器建立什么样的连接，因为所有连接都是通过 http 进行的。我们目前有两种解决方案，一种是让负载均衡器在 URL 字符串中附加一个端口号，以便我们可以确定请求的类型（例如，80 表示 http，443 表示 https）。另一种解决方案是负载均衡器在收到 https 请求时附加一个特殊的标头，以便 Web 服务器知道连接的类型。

您在这两种解决方案中都看到了缺点吗？是否有关于在负载均衡器级别而不是 Web 服务器级别应用 SSL 的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T21:08:43.960

我想我更喜欢标题。在 URL 中添加一些内容会产生与应用程序想要使用的查询字符串参数发生冲突的可能性，但这种可能性很小。自定义标题会更容易。

第三种选择可能是让 ssl 连接重定向到不同的端口，比如 8080，所以在后端你知道端口 80 连接从 http 开始，端口 8080 连接从 443 开始，即使它们是那时都http。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T19:53:23.523

我建议使用标题。一个相关的概念是确定客户端的 IP 地址（用于记录目的），因为对 Web 服务器的所有请求似乎都源自负载平衡器。[`x-forwarded-for`](http://en.wikipedia.org/wiki/X-Forwarded-For)此处通常使用标头。

# javascript - 如果我不知道名称，如何访问 javascript 对象的属性？

> ID：675231
> 
> 赞同：126
> 
> 时间：2009-03-23T21:05:43.217
> 
> 标签：javascript, object, properties, iteration, introspection

假设你有一个这样的 javascript 对象：

```
var data = { foo: 'bar', baz: 'quux' }; 
```

您可以通过属性名称访问属性：

```
var foo = data.foo;
var baz = data["baz"]; 
```

但是，如果您不知道属性的名称，是否可以获得这些值？这些属性的无序性质是否无法区分它们？

在我的例子中，我特别考虑了一个函数需要接受一系列名称-值对，但属性的名称可能会改变的情况。

到目前为止，我对如何做到这一点的想法是将属性的名称与数据一起传递给函数，但这感觉就像一个 hack。如果可能的话，我更愿意通过内省来做到这一点。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2009-03-23T21:09:19.310

您可以像这样遍历键：

```
for (var key in data) {
  console.log(key);
} 
```

这会记录“名称”和“值”。

如果您有一个更复杂的对象类型（不仅仅是一个普通的类似哈希的对象，如原始问题中那样），您将只想遍历属于对象本身的键，而不是对象[原型](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Details_of_the_Object_Model)上的键：

```
for (var key in data) {
  if (data.hasOwnProperty(key)) {
    console.log(key);
  }
} 
```

正如您所指出的，不保证密钥按任何特定顺序排列。请注意这与以下内容有何不同：

```
for each (var value in data) {
  console.log(value);
} 
```

此示例循环遍历值，因此它会记录`Property Name`和`0`。注意：该[`for each`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for_each...in)语法大多仅在 Firefox 中受支持，而在其他浏览器中不支持。

如果您的目标浏览器支持 ES5，或者您的站点包含[`es5-shim.js`](https://github.com/es-shims/es5-shim)（推荐），您还可以使用`Object.keys`：

```
var data = { Name: 'Property Name', Value: '0' };
console.log(Object.keys(data)); // => ["Name", "Value"] 
```

并循环[`Array.prototype.forEach`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)：

```
Object.keys(data).forEach(function (key) {
  console.log(data[key]);
});
// => Logs "Property Name", 0 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-04-20T02:51:28.637

旧版本的 JavaScript (< ES5) 需要使用`for..in`循环：

```
for (var key in data) {
  if (data.hasOwnProperty(key)) {
    // do something with key
  }
} 
```

ES5 引入了[Object.keys](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)和[Array#forEach](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)，这使得这更容易一些：

```
var data = { foo: 'bar', baz: 'quux' };

Object.keys(data); // ['foo', 'baz']
Object.keys(data).map(function(key){ return data[key] }) // ['bar', 'quux']
Object.keys(data).forEach(function (key) {
  // do something with data[key]
}); 
```

[ES2017](https://github.com/tc39/proposals/blob/cba6aa3c8ace8d87c6fb8a0e9b9262240815ce34/finished-proposals.md)引入[`Object.values`](http://tc39.github.io/proposal-object-values-entries/#Object.values)和[`Object.entries`](http://tc39.github.io/proposal-object-values-entries/#Object.entries).

```
Object.values(data) // ['bar', 'quux']
Object.entries(data) // [['foo', 'bar'], ['baz', 'quux']] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-23T21:09:15.410

```
for(var property in data) {
    alert(property);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-24T01:26:52.980

您经常需要检查对象实例的**特定**属性，而不需要它的所有共享原型方法和属性：

```
 Obj.prototype.toString= function(){
        var A= [];
        for(var p in this){
            if(this.hasOwnProperty(p)){
                A[A.length]= p+'='+this[p];
            }
        }

    return A.join(', ');
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-22T12:14:46.253

```
function getDetailedObject(inputObject) {
    var detailedObject = {}, properties;

    do {
        properties = Object.getOwnPropertyNames( inputObject );
        for (var o in properties) {
            detailedObject[properties[o]] = inputObject[properties[o]];
        }
    } while ( inputObject = Object.getPrototypeOf( inputObject ) );

    return detailedObject;
} 
```

这将在一个新对象中获取所有属性及其值（继承或拥有，可枚举或不可枚举）。原始对象未受影响。现在可以使用遍历新对象

```
var obj = { 'b': '4' }; //example object
var detailedObject = getDetailedObject(obj);
for(var o in detailedObject) {
    console.log('key: ' + o + '   value: ' + detailedObject[o]);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T20:49:09.617

您可以使用[Object.keys()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)，“它返回给定对象自己的可枚举属性名称的数组，其顺序与我们使用普通循环获得的顺序相同。”

您可以使用任何对象代替`stats`：

```
var stats = {
  a: 3,
  b: 6,
  d: 7,
  erijgolekngo: 35
}
/*  this is the answer here  */
for (var key in Object.keys(stats)) {
  var t = Object.keys(stats)[key];
  console.log(t + " value =: " + stats[t]);
}
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-23T17:27:33.727

```
var obj = {
 a: [1, 3, 4],
 b: 2,
 c: ['hi', 'there']
 }
for(let r in obj){  //for in loop iterates all properties in an object
 console.log(r) ;  //print all properties in sequence
 console.log(obj[r]);//print all properties values
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-04-15T15:09:29.747

```
var attr, object_information='';

for(attr in object){

      //Get names and values of propertys with style (name : value)
      object_information += attr + ' : ' + object[attr] + '\n'; 

   }

alert(object_information); //Show all Object 
```

# objective-c - 在 objc 中需要 24 位类型

> ID：675236
> 
> 赞同：1
> 
> 时间：2009-03-23T21:08:03.633
> 
> 标签：objective-c, iphone

我需要一个包含 24 位值的变量，我应该使用什么？另外，你知道 Objc 中所有可用类型的列表吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T21:09:32.273

你可以使用一个`int`. 它将保存 24 位。（实际上是 32）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-26T11:41:00.477

Objective-C 具有与普通 C 完全相同的类型。所有对象引用和 id 类型在技术上都是指针。整数数据类型 ( `char`… `long long`) 的大小未定义，但它们的关系和最小大小已定义。

*   保证保持 24 位的最小整数数据类型`long int`必须至少为 32 位。
*   `int`在某些系统上可能是 16 位。
*   3 `char`s 至少是 24 位，因为 a`char`必须有 8 位或更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T21:11:07.353

3 个无符号字符的数组将是 24 位（在大多数系统上）。

# c++ - 为什么使用元组而不是对象？

> ID：675237
> 
> 赞同：45
> 
> 时间：2009-03-23T21:08:20.870
> 
> 标签：c++, tuples

我工作的代码库有一个名为 Pair 的对象，其中 A 和 B 是 Pair 中第一个和第二个值的类型。我觉得这个对象令人反感，因为它被用来代替具有明确命名成员的对象。所以我发现这个：

```
List<Pair<Integer, Integer>> productIds = blah();
// snip many lines and method calls

void doSomething(Pair<Integer, Integer> id) {
  Integer productId = id.first();
  Integer quantity = id.second();
} 
```

代替

```
class ProductsOrdered {
  int productId;
  int quantityOrdered;
  // accessor methods, etc
}

List<ProductsOrderded> productsOrdered = blah(); 
```

代码库中 Pair 的许多其他用途也同样难闻。

我用谷歌搜索了元组，它们似乎经常被误解或以可疑的方式使用。是否有令人信服的论据支持或反对使用它们？我可以理解不想创建巨大的类层次结构，但是如果不使用元组，是否存在类层次结构会爆炸的现实代码库？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-03-23T21:11:51.050

首先，元组既快速又简单：不是每次你想把两件事放在一起时都编写一个类，而是有一个模板可以为你做这件事。

其次，它们是通用的。例如，在 C++ 中，std::map 使用 std::pair 键和值。因此，可以使用 ANY 对，而不必为两种类型的每个排列创建某种带有访问器方法的包装类。

最后，它们对于返回多个值很有用。确实没有理由专门为函数的多个返回值创建一个类，如果它们不相关，则不应将它们视为一个对象。

公平地说，您粘贴的代码是对的错误使用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-23T21:13:59.000

元组在 Python 中一直被使用，它们被集成到语言中并且非常有用（它们允许初学者有多个返回值）。

有时，你真的只需要配对并创建一个真实的、对上帝诚实的类是矫枉过正的。另一方面，当你真正应该使用一个类时使用元组与相反的想法一样糟糕。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-23T21:48:10.307

代码示例有一些不同的味道：

*   重新发明轮子

框架中已经有一个可用的元组；`KeyValuePair`结构。类使用`Dictionary`它来存储对，但您可以在任何合适的地方使用它。（并不是说它适合这种情况......）

*   制作方轮

如果您有一个对列表，则最好使用`KeyValuePair`结构而不是具有相同目的的类，因为它会减少内存分配。

*   隐藏意图

具有属性的类清楚地显示了值的含义，而`Pair<int,int>`类不会告诉您有关值代表什么的任何信息（只是它们可能以某种方式相关）。为了使代码用这样的列表合理地自我解释，你必须给列表一个非常具有描述性的名称，比如`productIdAndQuantityPairs`......

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-03-23T21:33:10.030

就其价值而言，OP 中的代码一团糟，不是因为它使用元组，而是因为元组中的值类型太弱。比较以下内容：

```
List<Pair<Integer, Integer>> products_weak = blah1();
List<Pair<Product, Integer>> products_strong = blah2(); 
```

如果我的开发团队传递的是 ID 而不是类实例，我也会感到不安，因为整数可以代表*任何东西*。

* * *

话虽如此，当您正确使用元组时，它们非常有用：

*   存在元组以将特定值组合在一起。它们肯定比创建过多的包装类要好。
*   当您需要从函数返回多个值时，它是 out/ref 参数的有用替代方法。

然而，C# 中的元组让我眼花缭乱。许多语言（如 OCaml、Python、Haskell、F# 等）都有用于定义元组的特殊、简洁的语法。例如，在 F# 中，[Map 模块](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/FSharp.Core/Microsoft.FSharp.Collections.Map.html)定义了一个构造函数，如下所示：

```
val of_list : ('key * 'a) list -> Map<'key,'a> 
```

我可以使用以下方法创建地图实例：

```
(* val values : (int * string) list *)
let values = 
    [1, "US";
     2, "Canada";
     3, "UK";
     4, "Australia";
     5, "Slovenia"]

(* val dict : Map<int, string> *)
let dict = Map.of_list values 
```

C# 中的等效代码很可笑：

```
var values = new Tuple<int, string>[] {
     new Tuple<int, string>(1, "US"),
     new Tuple<int, string>(2, "Canada"),
     new Tuple<int, string>(3, "UK"),
     new Tuple<int, string>(4, "Australia"),
     new Tuple<int, string>(5, "Slovenia")
     }

 var dict = new Dictionary<int, string>(values); 
```

我不相信元组*原则上*有什么问题，但是 C# 的语法太麻烦了，无法充分利用它们。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-23T21:49:54.890

这是代码重用。与其编写与我们创建的最后 5 个类元组类具有完全相同结构的又一个类，不如创建...一个元组类，并在需要元组时使用它。

如果该类的唯一意义是“存储一对值”，那么我会说使用元组是一个明显的想法。如果您开始实现多个相同的类只是为了重命名这两个成员，我会说这是一种代码味道（尽管我讨厌这个术语）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-23T21:11:51.923

这只是原型质量的代码，很可能被拼凑在一起，从未被重构过。不修复它只是懒惰。

元组的真正用途是用于真正不关心组件部分是什么的通用功能，而只是在元组级别运行。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-12-08T21:23:58.370

Scala 具有元组值类型，从 2 元组（对）到具有 20 多个元素的元组。请参阅[Scala 的](http://www.artima.com/scalazine/articles/steps.html)第一步（第 9 步）：

```
val pair = (99, "Luftballons")
println(pair._1)
println(pair._2) 
```

如果您需要将值捆绑在一起以用于某些相对*特殊*的目的，则元组很有用。例如，如果您有一个函数需要返回两个完全不相关的对象，而不是创建一个新类来保存这两个对象，您可以从该函数返回一个 Pair。

我完全同意其他关于元组可能被滥用的海报。如果一个元组有任何对你的应用程序很重要的语义，你应该使用一个适当的类来代替。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-23T21:26:36.850

最明显的例子是坐标对（或三元组）。标签无关紧要；使用 X 和 Y（和 Z）只是一个约定。使它们统一表明可以以相同的方式对待它们。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-23T21:35:49.307

已经提到了很多事情，但我认为还应该提到，有一些编程风格与 OOP 不同，并且对于那些元组非常有用。

例如，像 Haskell 这样的函数式编程语言根本没有类。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-23T22:39:25.223

如果您正在执行[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)以按特定键排序（重复计算代价高昂）或类似的东西，那么一个类似乎有点矫枉过正：

```
val transformed = data map {x => (x.expensiveOperation, x)}
val sortedTransformed = transformed sort {(x, y) => x._1 < y._1}
val sorted = sortedTransformed map {case (_, x) => x} 
```

在这里拥有一个`class DataAndKey`或任何东西似乎有点多余。

不过，我同意你的例子不是一个很好的元组例子。

# formatting - AMF 可以用作 Web 服务的“另一种输出格式”吗？

> ID：675239
> 
> 赞同：3
> 
> 时间：2009-03-23T21:09:11.307
> 
> 标签：formatting, amf

我正在开发一个 RESTish 服务器项目，该项目以各种格式响应 HTTP 请求。这使我们能够编写面向用户的应用程序并检索当时看起来最方便的格式。例如，要查看是否有用户登录，我们可以发送：

```
http://serverurl/Authentication?command=whoami&format=xml 
```

可以想象，这将返回包含有关登录用户（如果有）的信息的 XML。我们可以在 json 中得到相同的信息：

```
http://serverurl/Authentication?command=whoami&format=json 
```

最近，我们一直在讨论添加对 yaml 的支持，因为它在一些 ruby​​ 和 python 开发人员中很受欢迎。同时，我们一直在谈论在 Flex 中编写原型客户端应用程序（如果您无法从我的问题中看出，那将是我们第一次涉足 Flex 开发）。我确实知道我们可以使用我们现有的格式之一与 Flex 应用程序进行通信，但是如果我们决定“仅仅因为我们可以”添加对这些额外格式的支持，那么使用 amf 是否会变得特别困难或不同于输出xml还是json？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-26T06:40:46.033

AMF 是动作消息格式，它只是一种以非常紧凑的二进制格式编码数据的方式。AMF 在任何严格意义上都与 RPC 无关。Flex（消费者/生产者）中可用的消息传递功能使用 AMF 对所有消息的数据进行编码，这绝对不是 RPC..

回到您的问题：您使用什么服务器端技术来构建您的应用程序？各种平台的 AMF 库都具有不同的质量和成熟度。大多数这些库应该允许您简单地传递要编码的对象并接收字节数组，您可以将其写入与 REST 端点相关联的 HTTP 请求的输出流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-27T10:27:37.250

我目前正在使用 AMF 作为序列化格式的平台，完全按照您提出的方式（在 .Net 平台上）工作。我们所做的是：

1.  创建一个代表您要发送的页面的 DTO。
2.  使用 WriteObject() 创建一个 ByteArray 并在其中存储 DTO
3.  将内容类型更改为 AMF
4.  将 ByteArray 的 Buffer 二进制写入 Response 流

在客户端，我们使用格式设置为二进制的常规 URLLoader。loader.data 属性将是一个 ByteArray 并使用 ReadObject，您将获得序列化的 DTO。如果您使用 [RemoteClass] 元数据和 registerClassAlias，您将获得相应的类型 - 否则您将获得具有一些动态属性的通用对象。

绕过类型化 DTO 的一个很酷的事情是，我们可以在其上使用常规的 XML 或 JSON 序列化程序，从而使格式版本控制非常简单。

我还运行测试，将 ByteArrays 发布回服务器以进行创建/更新，它似乎工作正常。所以本质上，您现在可以将 AMF 用于 REST。

我也在考虑将它用于服务器到服务器的通信，因为它重量轻，并且对于序列化复杂类型似乎非常健壮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T14:59:54.950

回答 Vineet Bhatia 的问题：你检查过 BlazeDS 吗？[http://opensource.adobe.com/wiki/display/blazeds/Overview](http://opensource.adobe.com/wiki/display/blazeds/Overview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-15T04:53:50.073

是的，你可以做到，但你必须编写自己的 AMF 序列化器和反序列化器（只需复制 Zend Framework 中的那个）。或者你可以等我完成我的。我会尽量记住把它贴在这里。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-03-23T21:21:18.967

AMF 是一种 RPC（远程过程调用）格式，与 SOAP 非常相似，但具有不同的目标受众。由于过程调用和对象之间存在根本区别，因此 AMF**不会**只是您的另一种输出格式。

您可能应该将 AMF 视为“Flex Remoting”，而不是针对使用您的 REST API 的 Flex 的输出格式。

打个比方：您是否认为 SOAP 或 XMLRPC 只是 REST API 的另一种输出格式？

# git - git 添加错误：“致命：malloc，内存不足”

> ID：675247
> 
> 赞同：2
> 
> 时间：2009-03-23T21:10:48.917
> 
> 标签：git, memory, malloc

当我尝试执行 git add 时，我收到错误“致命：malloc，内存不足”。我想系统显然内存不足，但有没有办法解决这个问题。

我也在运行 Windows Server 2003 并使用 msysGit。

编辑：经过更多搜索后，我认为这是 git 打包的问题，​​显然他们的压缩方法对小文件非常有用，但在大文件上却很难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T00:52:35.610

经过大量研究，我发现这是一个简单的打包程序内存不足的问题，这是由于 git 使用更适合大量小文件的压缩方法。

如果有人感兴趣，我会通过在添加文件之前拆分文件来解决这个问题，这样它仍然可以跟踪更改，但在取回文件时需要将其放在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-23T05:15:34.840

我增加了服务器上的内存，它解决了这个问题。

# java - C++ 解析器/Java 模型

> ID：675255
> 
> 赞同：2
> 
> 时间：2009-03-23T21:12:21.860
> 
> 标签：java, c++, model, parsing

我想知道是否有人知道可以在 Java 中以编程方式使用的现有 C++ 解析器/代码模型。我正在寻找类似于 Eclipse CDT 的东西，它可以用作 Java 的库（并且不依赖于 Eclipse）。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T08:55:00.137

您不想构建自己的 C++ 解析器。它会杀了你。

您已经了解 Eclipse CDT 项目：www.ibm.com/developerworks/library/os-ecl-cdt3/index.html AFAIK，该解析器的边缘有点模糊。YMMV。优势：在 Java 中（如果您愿意，也可以在 Eclipse 中）。如果您想处理 C++，并在 Java 中完成，这可能是您唯一实际的选择。

还有我们的 DMS Software Reengineering Toolkit C++ 前端： [http](http://www.semdesigns.com/Products/FrontEnds/CppFrontEnd.html) ://www.semdesigns.com/Products/FrontEnds/CppFrontEnd.html 适用于各种 C++ 方言（ANSI、GNU、MSVC 2005/2008），经测试触发数百万行代码。从您的角度来看的缺点：不是Java。但是如果你*真的*想分析 C++，那么制定一个你只愿意在 Java 中做的规则可能对你没有最好的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T21:25:15.573

对于 Lex、Yacc、Antlr、Jack 等解析器生成器，有一些不完整的 LALR 语法。

C++ 有一个不可判定的语法语法，所以 LALR 和 BNR 语法总是不完整的，但只要你不尝试编写 C++ 编译器，它们应该已经足够好了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-23T21:31:39.270

JavaCC 有一些 C++ 语法。试试谷歌。

# c++ - 避免 Visual Studio 项目的配置过多

> ID：675259
> 
> 赞同：2
> 
> 时间：2009-03-23T21:13:46.880
> 
> 标签：c++, visual-studio, configuration, msbuild

我目前正在将一个大型 Linux 项目移植到 Visual Studio。该项目依赖于许多第三方库（Python、MPI 等）以及一些内部库。但它也可以在没有这些库的情况下构建，或者只使用其中的几个。所以我不想为每个可能的组合创建不同的配置，例如“Parallel with Python”、“Parallel without Python”等。组合太多了。这是我可以使用 MSBuild 的情况吗？

编辑：我考虑的一种可能性是创建一堆 .vsprops 文件，但这本质上与创建一堆不同的配置相同。

编辑：也许 CMake 更符合我的要求？我很想听听任何 CMake 用户的意见......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-29T01:53:55.607

*一种方法是使用每个程序集引用*元素（Python、MPI 等）的*[Condition](http://msdn.microsoft.com/en-us/library/7szfhaft.aspx)*属性有条件地引用您的库。

 *这可以将您的库与配置和平台属性分开，并允许您在默认情况下或有条件地使用 MSBuild 属性来构建它们。

所以在你的 csproj 中：

```
<Reference Include="YourPythonLibrary" 
           Condition="$(BuildType) == '' Or $(BuildType) == 'TypeA'" />
<Reference Include="YourMpiLibrary" 
           Condition="$(BuildType) == 'TypeA' Or $(BuildType) == 'TypeB'" /> 
```

这包括默认情况下的 Python 和 MPI，前提是设置了正确的构建类型。配置或平台设置为什么无关紧要，您可以调整布尔逻辑以适合每种构建类型的每个库。

```
MSBuild /p:BuildType=TypeA
MSBuild /p:BuildType=TypeB 
```

在这种情况下使用某种形式的按位运算会很好，但我不确定这在 MSBuild 中是否可行？

注意：不一定要引用元素，如果它只是作为内容包含，这种方法仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T21:39:03.467

如果在 Visual Studio 中右键单击解决方案并选择配置管理器，则可以为每个配置创建构建目标。

如果您有默认设置，您可以使用工具栏中的组合框在这些目标之间进行选择。

使用 MSBuild 时也可以选择这些目标，就像您可以在 Release 和 Debug 之间进行选择一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-29T00:10:20.113

据我所知，没有好的解决方案。IDE 似乎需要为工具的每组命令行参数进行配置。因此，如果需要 N 个不同的参数集——就像这里的情况一样——将需要 N 个不同的配置。这就是 IDE 的工作方式，它出现了。

不幸的是，但很少有人在与 Visual Studio 的战斗中获胜，所以我个人总是屈服并根据需要创建尽可能多的配置。这很痛苦，而且很繁琐，是的，IDE 理想情况下应该提供一些更好的机制来管理组合——但它是可行的，而且实际上并不需要像当时感觉的那样长时间设置.

（据我了解，.vsprops 可以通过允许在配置之间轻松共享配置设置来减轻一些痛苦。因此 VS 中的那些微小文本框仅用于设置配置之间不同的设置。这可能会使它们仍然值得研究。不过，这不是我自己使用过的东西；只是最近才发现的。）

# .net - 在构建后更改 .NET 可执行文件的图标？

> ID：675264
> 
> 赞同：1
> 
> 时间：2009-03-23T21:16:24.160
> 
> 标签：.net, msbuild

我有一个 .NET 应用程序，我生成了几个不同的版本——完全相同的应用程序，但具有不同的“品牌”（启动画面、名称等）。我在主可执行文件之外拥有所有这些差异，因此它们在运行时被拾取。但是，我不能使用程序图标来执行此操作，因为它已被烘焙到 EXE 文件中。

我想避免只为图标制作很多不同的项目。有没有办法可以修改已构建的 .NET EXE 的图标？我有一种感觉[ILDASM.exe](http://msdn.microsoft.com/en-us/library/f7dy01k1(VS.80).aspx)和[ILAsm.exe](http://msdn.microsoft.com/en-us/library/496e4ekx(VS.80).aspx)在这里可能很方便，但我不确定如何处理反汇编的位来更改准备将其输入 ILAsm 的图标。

我应该只使用修改原始项目文件的脚本以使用新图标并重新构建整个东西吗？

或者，也许我的做法完全错误，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T21:43:19.133

您可以将 exe 保留为“无品牌”，并将您的图标保存为单独的文件。在部署期间，为应用程序快捷方式使用适当的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T22:24:06.603

查看 ResHacker.exe 或 XN 资源编辑器。我没有使用 XN 资源编辑器，但使用 ResHacker 更改 PE 中的图标资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T16:24:52.220

我最终需要改变的不仅仅是图标。因此，我使用[CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)生成一个存根 exe，其中包含引用“真实”起始程序集的所有正确位，并仅将其称为“主”版本。

为此设置正确的图标只是使用的问题

```
var compilerParams = new CompilerParameters
{
  GenerateExecutable = true,
  CompilerOptions = string.Format("/target:winexe /win32icon:\"{0}\"", iconPath)
  // ... other options ...
} 
```

打电话时：

```
var codeProvider = new CSharpCodeProvider();
codeProvider.CompileAssemblyFromSource(compilerParams, new[] { sourceCode }); 
```

# ruby-on-rails - 在 Rails 中验证多封电子邮件和处理错误的最佳方法是什么？

> ID：675271
> 
> 赞同：3
> 
> 时间：2009-03-23T21:18:32.813
> 
> 标签：ruby-on-rails, ruby, email, email-validation

在我正在构建的当前应用程序中，我有一个文本区域，用户将在其中输入以逗号分隔的电子邮件地址列表。

我目前正在将列表拆分为一个数组，然后一一保存。但是，如果说，我有这个输入......

blah@example.com、test@example、foo@example.com

...然后 blah@example.com 将被保存，但保存 test@example 将失败。因此，当我显示 test@example 不是有效的电子邮件地址的错误时，我需要从传递回 textarea 的逗号分隔值字符串中删除 blah@example.com。

有没有更好的方法在服务器端验证这些并处理错误，而不会在控制器中变得花哨/丑陋？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-24T00:59:57.053

假设这是一个有多个电子邮件的模型，并且电子邮件模型使用 :validate_email，您可以执行以下操作：

```
class Foo < ActiveRecord::Base
  validate :must_not_have_invalid_addresses

  ...

  def emails=(addresses)
    @invalid_addresses = []
    addresses.split(",").each do |address|
      @invalid_addresses.push(address) unless emails.create({:address => address})
    end
  end

  def must_not_have_invalid_addresses
    errors.add_to_base("Some email addresses were invalid") unless @invalid_addresses.empty?
  end

end 
```

这提供了一个验证错误 + 一组无效的电子邮件地址，如果您愿意，您可以将其访问到您的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T21:31:47.133

ruby 具有此处描述的拆分函数 (.each)[并支持](http://www.regular-expressions.info/ruby.html)[此处](http://www.ruby-doc.org/core/classes/String.html)描述的正则表达式

因此，您将拆分字符串（使用“，”作为分隔符），然后使用正则表达式来验证每封电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T21:47:24.850

您可以将保存的电子邮件放入事务中。然后，如果任何保存失败，则所有之前的保存都将被取消。在这种情况下，只能在模型层上进行验证。

我认为这将是清晰的代码，但可以肯定它不是最快的方式（但使用 Ruby 意味着你没有以更快的方式进行操作；））

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-23T21:31:03.843

如果您将它们放在一个名为 的变量中`emails`，也许这样的事情可能会起作用：

```
 if valid_emails?(emails)
      # then have your normal logic here
      if @user.save
           flash[:notice] .....

      end
  end

  private
     def valid_emails?(emails)
        not emails.find {|email| email =~ /[\w\.%\+\-]+@(?:[A-Z0-9\-]+\.)+(?:[A-Z]{2,}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|jobs|museum)/i }.nil?
     end 
```

编辑：实际上你可能只想使用这个正则表达式。它取自 restful-authentication 插件。

# asp.net - 如何在回发时对服务器控件进行单元测试？

> ID：675274
> 
> 赞同：3
> 
> 时间：2009-03-23T21:19:38.410
> 
> 标签：asp.net, unit-testing

我正在尝试创建自己的 EasyBinderDropDown，目前看起来像这样：

```
public class EasyBinderDropDown : DropDownList, ICanBindToObjectsKeyValuePair {
        public void BindToProperties<TYPE_TO_BIND_TO>(IEnumerable<TYPE_TO_BIND_TO>
                  bindableEnumerable,
        Expression<Func<TYPE_TO_BIND_TO, object>> textProperty, 
        Expression<Func<TYPE_TO_BIND_TO, object>> valueProperty) {...}
        public bool ShowSelectionPrompt { get; set; }
        public string SelectionPromptText { get; set; }
        public string SelectionPromptValue { get; set; }
    //...
} 
```

基本上它对于从内部代码轻松绑定到对象非常有帮助，因为您只需执行类似 _dropDown.BindToProperties(myCustomers, c=>c.Name, c=>c.Id) 之类的操作，它也适用于您，也可以通过设置 ShowSelectionPrompt 和SelectionPromptText 我可以很容易地有一个“选择客户”行。我不想过多地询问我的具体实现，而是对如何为某些场景编写单元测试感到困惑。

例如，我当前的测试涵盖了在加载期间正确创建的控件并使其输出正确呈现，但我不知道如何测试控件被回发时会发生什么。谁能给我一些关于如何测试的建议？我宁愿这样做而不必模拟 HTTPContext 或类似的东西，有没有办法可以模拟正在重建的控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-26T13:29:27.330

“我宁愿这样做，而不必模拟 HTTPContext 或类似的东西，有没有一种方法可以模拟正在重建的控件。”

根据定义，您不是要求“单元测试”；您正在寻找“集成测试”。如果您没有模拟主要依赖项，在这种情况下是 ASP.NET 运行时组件，那么您正在测试的是您的控件和 ASP.NET 之间的集成。

如果您不想模拟 HttpContext 和朋友，那么我建议您使用自动化 Web 测试框架，例如 Selenium 或 NUnitAsp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:54:20.300

**Update:** Based on the comment. Don't have the code access directly the IsPostback or other asp.net stuff. Wrap them with simple classes/interfaces. Once you have done that, send mocks that implement those interfaces. This way you don't have to mock the whole HttpContext, just the pieces that matter for the code (which are really clear based on the interfaces involved).

Also, given it is an asp.net custom control, you don't want to force requirements on external things like dependency injection. Have a default (no parameters) constructor, that sets up the control to use the asp.net stuff. Use a constructor with more parameters to send the mocked versions.

* * *

Initial answer:

It seems to me you are looking for a happy middle between unit tests and integration tests. You are working with a custom control, which can go wrong on different parts of the asp.net's page lifecycle.

I would:

*   Check if you can move parts of the code out of the custom control to separate classes, you can more easily unit test
*   For simple scenarios, rely on the functional tests of the rest of the project to catch any further issue with the control (use watin / selenium rc).
*   For more complex scenarios, as if the control will be used in different parallel projects or will be delivered to the public, set up some test pages and automate against it (again watin / selenium rc).

You write the tests in watin / selenium rc in c#, and run them in your "unit" test framework. Make sure to keep them separated from the unit tests, since they will clearly run slower.

Ps. I haven't used ms test support for asp.net, it might have some support for what you are looking for.

# c# - 如何打开锁定的 mdb 文件？

> ID：675275
> 
> 赞同：0
> 
> 时间：2009-03-23T21:19:39.737
> 
> 标签：c#, .net, database, ms-access

我有一个锁定 mdb 的数据库，因此我想备份。但是，我正在使用的工具（我有源代码）在备份之前打开文件并发现它已被锁定。

有没有办法可以打开它以用于只读目的？

作为参考，该工具使用 C# 和 .NET 2.0（但可以更新到 3.5）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-23T21:25:43.433

您的工具锁定文件的原因是为了防止在备份文件时对其进行更改。例如，如果您开始备份，但在 DBMS（即 SQL Server）中途决定对文件进行更改，那么您的备份将损坏。

我建议您使用随数据库解决方案提供的工具来执行备份。另一种选择是在备份之前停止数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T21:26:47.253

如果 DBMS 在文件上持有写锁，而您读取它，则您在读取文件时冒着 DBMS 写入文件的风险。根据写入的部分，您最终可能会得到文件的损坏备份。最好仅在 DBMS 不写入文件或让 DBMS 处理自己的备份时才读取文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-23T21:23:30.273

这类似于这个问题：

[如果当前副本正在使用中，则打开文件的卷影副本](https://stackoverflow.com/questions/660019/opening-a-files-shadow-copy-if-the-current-copy-is-in-use/660098)

这取决于数据库如何打开 MDB 文件。如果它不允许读取共享，那么除非您能够打开卷影副本，否则您就不走运了。这里有一个关于如何做到这一点的讨论：

[如何以编程方式复制在 Windows 下锁定的文件或文件夹？](https://stackoverflow.com/questions/259253/how-do-i-copy-a-file-or-folder-that-is-locked-under-windows-programmatically)

# cil - MSIL : 多余的分支

> ID：675278
> 
> 赞同：5
> 
> 时间：2009-03-23T21:20:56.987
> 
> 标签：cil

考虑这个 C# 片段：

```
static string input = null;
static string output = null;

static void Main(string[] args)
{
     input = "input";
     output = CallMe(input);
}

public static string CallMe(string input)
{
     output = "output";
     return output;
} 
```

使用 Reflector 反汇编显示：

```
.method private hidebysig static void Main(string[] args) cil managed
    {
        .entrypoint
        .maxstack 8
        L_0000: nop 
        L_0001: ldstr "input"
        L_0006: stsfld string Reflector_Test.Program::input
        L_000b: ldsfld string Reflector_Test.Program::input
        L_0010: call string Reflector_Test.Program::CallMe(string)
        L_0015: stsfld string Reflector_Test.Program::output
        L_001a: ret 
    }

 .method public hidebysig static string CallMe(string input) cil managed
    {
        .maxstack 1
        .locals init (
            [0] string CS$1$0000)
        L_0000: nop 
        L_0001: ldstr "output"
        L_0006: stsfld string Reflector_Test.Program::output
        L_000b: ldsfld string Reflector_Test.Program::output
        L_0010: stloc.0 
        L_0011: br.s L_0013
        L_0013: ldloc.0 
        L_0014: ret 
    } 
```

让我困惑的是：

```
L_0010: stloc.0 
L_0011: br.s L_0013
L_0013: ldloc.0 
```

它存储项目，分支到下一行（无论如何都会执行），然后再次加载它。

是否有一个原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-23T21:28:01.417

这只发生在调试中，而不是发布中。我怀疑它可以在调试期间提供帮助。它可能允许您在语句中间放置断点并查看返回值。

请注意，发布版本有更简洁的 IL：

```
.method private hidebysig static void Main(string[] args) cil managed
{
    .maxstack 8
    L_0000: ldstr "input"
    L_0005: stsfld string Reflector_Test.Program::input
    L_000a: ldsfld string Reflector_Test.Program::input
    L_000f: call string Reflector_Test.Program::CallMe(string)
    L_0014: stsfld string Reflector_Test.Program::output
    L_0019: ret 
}

.method public hidebysig static string CallMe(string input) cil managed
{
    .maxstack 8
    L_0000: ldstr "output"
    L_0005: stsfld string Reflector_Test.Program::output
    L_000a: ldsfld string Reflector_Test.Program::output
    L_000f: ret 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T21:33:43.760

我的猜测是，这是执行 return 语句的样板代码，编译器执行无条件跳转到最后一行，并在执行之前将返回值加载到寄存器中`ret`。JIT 会更好地优化它，我认为编译器不会费心做任何优化。

# solr - SOLR 的分面查询浏览器

> ID：675282
> 
> 赞同：8
> 
> 时间：2009-03-23T21:21:48.733
> 
> 标签：solr, faceted-search

你能推荐一个我可以指向 SOLR 索引的多面查询浏览器吗？理想情况下，这看起来像一个 Endeca 构建的 GUI，其中从索引中提取各种方面，用户单击一个，现在显示剩余项目的适用方面，最终在原始数据的一个子集中达到高潮. 对索引进行单独的 Lucene 查询很容易，但出于调试目的，我宁愿使用预构建的浏览器，也不愿使用自己的浏览器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-26T01:51:09.630

[Collex](http://web.archive.org/web/20100528145738/http://www.patacriticism.org/collex/screenshots/)和[Blacklight](http://blacklight.rubyforge.org/)是两个多面的 Solr 浏览器，但我不知道它们是否足够通用，适合您的用例。

编辑：Solr 3.2 发行版现在包括 contrib 包[Solritas (AKA VelocityResponseWriter)](http://wiki.apache.org/solr/VelocityResponseWriter)，可用作通用分面索引浏览器。

# java - EventActionDispatcher 可以在构造函数完成之前发布“this”吗？

> ID：675285
> 
> 赞同：0
> 
> 时间：2009-03-23T21:23:21.320
> 
> 标签：java, struts, thread-safety

使用 EventActionDispatcher 的推荐方法如下（根据 API 文档 @ [http://struts.apache.org/1.2.9/api/org/apache/struts/actions/EventActionDispatcher.html](http://struts.apache.org/1.2.9/api/org/apache/struts/actions/EventActionDispatcher.html)）

```
 public class MyCustomAction extends Action {

       protected ActionDispatcher dispatcher = new EventActionDispatcher(this);

       public ActionForward execute(ActionMapping mapping,
                                    ActionForm form,
                                    HttpServletRequest request,
                                    HttpServletResponse response)
                           throws Exception {
           return dispatcher.execute(mapping, form, request, response);
       }
   } 
```

这样做会在构造函数退出之前发布对“this”的引用吗？管理方法之外的字段分配的规则是什么。

提前致谢。

真诚的，LES

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T22:25:20.810

这需要 3 个人每周追踪一次......如果 EventActionDispatcher 启动一个线程或对导致使用“this”的线程执行任何操作，“this”可以为空。

***切勿***在构造函数完成之前传递“this”，否则在线程的情况下您将面临“this”为空的风险。

我所做的是向需要执行此类操作的类添加“init()”方法，并在创建对象后调用它。

还有其他微妙之处，例如这个例子：

```
public abstract class Foo
{
    protected Foo()
    {
        car();
    }

    public abstract void car();
}

public class Bar 
    extends Foo
{
    private final String value;

    public Bar(final String str)
    {
        value = str;
    }

    public void car()
    {
        // this line will crash because value is null
        System.out.println(value.charAt(0));
    }
}

public class Main
{
    public static void main(final String[] argv)
    {
        final Foo foo;

        foo = new Bar("Hello");
    }
} 
```

最安全的做法是：

*   在构造函数返回之前永远不要使用“this”
*   除非类是最终的，否则永远不要从构造函数调用任何类自己的非静态方法。

您可以调用 final 方法，但您必须确保它们不会调用可覆盖的方法......这可能意味着事情会发生故障......所以不要这样做更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T21:30:04.453

在这种情况下（我希望）`this`不会被发布。它仍然只能通过`MyCustomAction`实例访问。

在 Java 中（我相信 C# 正好相反），在（隐式或显式）调用超级构造函数之前直接调用实例字段初始化和实例初始化器。因此，您可以`this`在字段初始化中使用，尽管您的对象可能尚未完成构建。

发布`this`以便在构建期间从对象外部可以访问它通常是一个坏主意。

# web-services - 从 Xbox Live 和 PSN 获取游戏统计数据

> ID：675288
> 
> 赞同：1
> 
> 时间：2009-03-23T21:24:51.237
> 
> 标签：web-services, xbox360, ps3

是否可以从 XBox Live 和 PSN 上玩的游戏中获取游戏统计数据（谁在玩，谁赢等）？是否有任何额外的限制，例如：

1.  游戏是否需要支持一些额外的 API？
2.  我需要直接访问游戏服务器（控制台）吗？

如果 Microsoft 或 Sony 甚至游戏供应商自己提供 API，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T21:33:18.143

这两种服务似乎都没有发布的公共 API。您必须是 Microsoft 或 Sony 的注册开发人员才能使用 API，但我非常怀疑他们是否允许将其用作外部服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-23T21:36:15.530

这在这些平台的开发人员 XDK/SDK 中。您需要成为注册开发者才能获得访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-22T22:34:44.100

我一直在研究 API

你可以在这里查看 www.trofeosps3.com.ar/API/Psn.asmx

和这里

www.trofeosps3.com.ar/trophies.aspx

# mysql - MySQL：在同一个 MySql 实例上克隆 MySQL 数据库

> ID：675289
> 
> 赞同：218
> 
> 时间：2009-03-23T21:24:51.860
> 
> 标签：mysql, database, copy, clone

我想编写一个脚本，将我当前的数据库复制`sitedb1`到`sitedb2`同一个 mysql 数据库实例上。我知道我可以将 sitedb1 转储到 sql 脚本：

```
mysqldump -u root -p sitedb1 >~/db_name.sql 
```

然后将其导入到`sitedb2`. 有没有更简单的方法，无需将第一个数据库转储到 sql 文件？

* * *

## 回答 #1

> 赞同：420
> 
> 时间：2009-03-23T21:26:57.317

正如手册在[复制数据库](http://dev.mysql.com/doc/refman/5.0/en/copying-databases.html)中所说，您可以将转储直接通过管道传输到 mysql 客户端：

```
mysqldump db_name | mysql new_db_name 
```

如果您使用的是 MyISAM，您*可以*复制文件，但我不建议这样做。这有点狡猾。

**综合各种好的其他答案**

`mysqldump`和命令都`mysql`接受用于设置连接详细信息（以及更多）的选项，例如：

```
mysqldump -u <user name> --password=<pwd> <original db> | mysql -u <user name> -p <new db> 
```

此外，如果新数据库尚不存在，您必须事先创建它（例如使用`echo "create database new_db_name" | mysql -u <dbuser> -p`）。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2014-07-30T13:22:20.483

## 使用 MySQL 实用程序

MySQL Utilities 包含一个不错的工具[`mysqldbcopy`](http://dev.mysql.com/doc/mysql-utilities/1.3/en/mysqldbcopy.html)，它默认复制一个数据库，包括所有相关对象（“表、视图、触发器、事件、过程、函数和数据库级授权”）和数据从一个数据库服务器到相同或另一个数据库服务器。有很多选项可用于自定义实际复制的内容。

因此，要回答 OP 的问题：

```
mysqldbcopy \
    --source=root:your_password@localhost \
    --destination=root:your_password@localhost \
    sitedb1:sitedb2 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-05-29T06:24:09.747

最好和最简单的方法是在终端中输入这些命令并将权限设置为 root 用户。为我工作..！

```
:~$> mysqldump -u root -p db1 > dump.sql
:~$> mysqladmin -u root -p create db2
:~$> mysql -u root -p db2 < dump.sql 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-07-15T09:22:17.023

```
mysqladmin create DB_name -u DB_user --password=DB_pass && \
        mysqldump -u DB_user --password=DB_pass DB_name | \
        mysql     -u DB_user --password=DB_pass -h DB_host DB_name 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-03-23T21:28:33.850

您可以使用（在伪代码中）：

```
FOREACH tbl IN db_a:
    CREATE TABLE db_b.tbl LIKE db_a.tbl;
    INSERT INTO db_b.tbl SELECT * FROM db_a.tbl; 
```

我不使用 CREATE TABLE ... SELECT ... 语法的原因是为了保留索引。当然，这只会复制表格。视图和过程不会被复制，尽管可以以相同的方式完成。

请参阅[创建表](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-04-21T06:49:29.510

您需要从终端/命令提示符运行命令。

```
mysqldump -u <user name> -p <pwd> <original db> | mysql -u <user name> <pwd> <new db> 
```

例如：`mysqldump -u root test_db1 | mysql -u root test_db2`

这会将 test_db1 复制到 test_db2 并授予对 'root'@'localhost' 的访问权限

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-02-13T09:43:46.240

如果您安装了一个简单的方法`phpmyadmin`：

转到您的数据库，选择“操作”选项卡，您可以看到“将数据库复制到”块。使用它，您可以复制数据库。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-05-01T11:34:00.943

首先创建重复数据库：

```
CREATE DATABASE duplicateddb; 
```

确保权限等都到位，并且：

```
mysqldump -u admin -p originaldb | mysql -u backup -p password duplicateddb; 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-08-16T16:33:52.677

正如[Greg 的回答](https://stackoverflow.com/a/675299/526741)中提到的，`mysqldump db_name | mysql new_db_name`是在数据库之间传输数据的*免费、安全且简单的方法。*但是，它也*确实很慢*。

**如果您要备份数据，不能丢失数据（在此或其他数据库中），或者正在使用 以外的表`innodb`，那么您应该使用`mysqldump`.**

如果您正在寻找用于开发的东西，将所有数据库备份到其他地方，并且`mysql`在一切都出错时可以轻松地清除和重新安装（可能手动），那么我可能会为您提供解决方案。

我找不到一个好的替代方案，所以我构建了一个脚本来自己做。我花*了很多*时间第一次让它工作，老实说，现在对它进行更改让我有点害怕。Innodb 数据库不应该像这样复制和粘贴。微小的变化会导致它以惊人的方式失败。自从我完成代码以来，我没有遇到过问题，但这并不意味着你不会。

系统测试（但仍可能失败）：

*   Ubuntu 16.04，默认 mysql，innodb，每个表单独的文件
*   Ubuntu 18.04，默认 mysql，innodb，每个表单独的文件

*我们已经切换到 docker 和整个 mysql 数据文件夹的简单副本，因此不再维护此脚本。留下它以防将来它能够帮助任何人。*

# 它能做什么

1.  获取`sudo`权限并验证您有足够的存储空间来克隆数据库
2.  获取 root mysql 权限
3.  创建一个以当前 git 分支命名的新数据库
4.  将结构克隆到新数据库
5.  切换到 innodb 的恢复模式
6.  删除新数据库中的默认数据
7.  停止 mysql
8.  将数据克隆到新数据库
9.  启动mysql
10.  在新数据库中链接导入的数据
11.  退出 innodb 的恢复模式
12.  重启mysql
13.  授予 mysql 用户访问数据库的权限
14.  清理临时文件

# 与它相比如何`mysqldump`

在 3gb 数据库上，在我的机器上使用`mysqldump`and`mysql`需要 40-50 分钟。使用这种方法，同样的过程只需要大约 8 分钟。

# 我们如何使用它

我们将 SQL 更改与代码一起保存，并且升级过程在生产和开发中都是自动化的，每组更改都会备份数据库以在出现错误时进行恢复。我们遇到的一个问题是，当我们处理一个需要更改数据库的长期项目时，必须在其中切换分支以修复一个或三个错误。

过去，我们为所有分支使用单个数据库，并且每当我们切换到与新数据库更改不兼容的分支时都必须重建数据库。当我们切换回来时，我们必须再次运行升级。

我们尝试`mysqldump`为不同的分支复制数据库，但是等待时间太长（40-50 分钟），在此期间我们无能为力。

该解决方案将数据库克隆时间缩短到了 1/5 时间（想想喝咖啡和洗手间的时间，而不是长时间的午餐）。

## 常见任务及其时间

在单个数据库上切换具有不兼容数据库更改的分支需要 50 多分钟，但在使用`mysqldump`此代码的初始设置时间之后根本没有时间。这段代码恰好比`mysqldump`.

以下是一些常见任务以及每种方法大概需要多长时间：

### 使用数据库更改创建功能分支并立即合并：

*   单个数据库：~5 分钟
*   克隆`mysqldump`时间：50-60 分钟
*   使用此代码克隆：~18 分钟

### 使用数据库更改创建功能分支，切换到`main`错误修复，在功能分支上进行编辑，然后合并：

*   单个数据库：~60 分钟
*   克隆`mysqldump`时间：50-60 分钟
*   使用此代码克隆：~18 分钟

### 使用数据库更改创建功能分支，切换到`main`错误修复 5 次，同时在其间对功能分支进行编辑，然后合并：

*   单个数据库：~4 小时 40 分钟
*   克隆`mysqldump`时间：50-60 分钟
*   使用此代码克隆：~18 分钟

# 编码

**除非您已阅读并理解上述所有内容，否则请勿使用它。它不再维护，因此随着时间的推移，它越来越有可能被破坏。**

```
#!/bin/bash
set -e

# This script taken from: https://stackoverflow.com/a/57528198/526741

function now {
    date "+%H:%M:%S";
}

# Leading space sets messages off from step progress.
echosuccess () {
    printf "\e[0;32m %s: %s\e[0m\n" "$(now)" "$1"
    sleep .1
}
echowarn () {
    printf "\e[0;33m %s: %s\e[0m\n" "$(now)" "$1"
    sleep .1
}
echoerror () {
    printf "\e[0;31m %s: %s\e[0m\n" "$(now)" "$1"
    sleep .1
}
echonotice () {
    printf "\e[0;94m %s: %s\e[0m\n" "$(now)" "$1"
    sleep .1
}
echoinstructions () {
    printf "\e[0;104m %s: %s\e[0m\n" "$(now)" "$1"
    sleep .1
}
echostep () {
    printf "\e[0;90mStep %s of 13:\e[0m\n" "$1"
    sleep .1
}

MYSQL_CNF_PATH='/etc/mysql/mysql.conf.d/recovery.cnf'
OLD_DB='YOUR_DATABASE_NAME'
USER='YOUR_MYSQL_USER'

# You can change NEW_DB to whatever you like
# Right now, it will append the current git branch name to the existing database name
BRANCH=`git rev-parse --abbrev-ref HEAD`
NEW_DB="${OLD_DB}__$BRANCH"

THIS_DIR=./site/upgrades
DB_CREATED=false

tmp_file () {
    printf "$THIS_DIR/$NEW_DB.%s" "$1"
}
sql_on_new_db () {
    mysql $NEW_DB --unbuffered --skip-column-names -u root -p$PASS 2>> $(tmp_file 'errors.log')
}

general_cleanup () {
    echoinstructions 'Leave this running while things are cleaned up...'

    if [ -f $(tmp_file 'errors.log') ]; then
        echowarn 'Additional warnings and errors:'
        cat $(tmp_file 'errors.log')
    fi

    for f in $THIS_DIR/$NEW_DB.*; do
        echonotice 'Deleting temporary files created for transfer...'
        rm -f $THIS_DIR/$NEW_DB.*
        break
    done

    echonotice 'Done!'
    echoinstructions "You can close this now :)"
}

error_cleanup () {
    exitcode=$?

    # Just in case script was exited while in a prompt
    echo

    if [ "$exitcode" == "0" ]; then
        echoerror "Script exited prematurely, but exit code was '0'."
    fi

    echoerror "The following command on line ${BASH_LINENO[0]} exited with code $exitcode:"
    echo "             $BASH_COMMAND"

    if [ "$DB_CREATED" = true ]; then
        echo
        echonotice "Dropping database \`$NEW_DB\` if created..."
        echo "DROP DATABASE \`$NEW_DB\`;" | sql_on_new_db || echoerror "Could not drop database \`$NEW_DB\` (see warnings)"
    fi

    general_cleanup

    exit $exitcode
}

trap error_cleanup EXIT

mysql_path () {
    printf "/var/lib/mysql/"
}
old_db_path () {
    printf "%s%s/" "$(mysql_path)" "$OLD_DB"
}
new_db_path () {
    printf "%s%s/" "$(mysql_path)" "$NEW_DB"
}
get_tables () {
    (sudo find /var/lib/mysql/$OLD_DB -name "*.frm" -printf "%f\n") | cut -d'.' -f1 | sort
}

STEP=0

authenticate () {
    printf "\e[0;104m"
    sudo ls &> /dev/null
    printf "\e[0m"
    echonotice 'Authenticated.'
}
echostep $((++STEP))
authenticate

TABLE_COUNT=`get_tables | wc -l`
SPACE_AVAIL=`df -k --output=avail $(mysql_path) | tail -n1`
SPACE_NEEDED=(`sudo du -s $(old_db_path)`)
SPACE_ERR=`echo "$SPACE_AVAIL-$SPACE_NEEDED" | bc`
SPACE_WARN=`echo "$SPACE_AVAIL-$SPACE_NEEDED*3" | bc`
if [ $SPACE_ERR -lt 0 ]; then
    echoerror 'There is not enough space to branch the database.'
    echoerror 'Please free up some space and run this command again.'
    SPACE_AVAIL_FORMATTED=`printf "%'d" $SPACE_AVAIL`
    SPACE_NEEDED_FORMATTED=`printf "%'${#SPACE_AVAIL_FORMATTED}d" $SPACE_NEEDED`
    echonotice "$SPACE_NEEDED_FORMATTED bytes needed to create database branch"
    echonotice "$SPACE_AVAIL_FORMATTED bytes currently free"
    exit 1
elif [ $SPACE_WARN -lt 0 ]; then
    echowarn 'This action will use more than 1/3 of your available space.'
    SPACE_AVAIL_FORMATTED=`printf "%'d" $SPACE_AVAIL`
    SPACE_NEEDED_FORMATTED=`printf "%'${#SPACE_AVAIL_FORMATTED}d" $SPACE_NEEDED`
    echonotice "$SPACE_NEEDED_FORMATTED bytes needed to create database branch"
    echonotice "$SPACE_AVAIL_FORMATTED bytes currently free"
    printf "\e[0;104m"
    read -p " $(now): Do you still want to branch the database? [y/n] " -n 1 -r CONFIRM
    printf "\e[0m"
    echo
    if [[ ! $CONFIRM =~ ^[Yy]$ ]]; then
        echonotice 'Database was NOT branched'
        exit 1
    fi
fi

PASS='badpass'
connect_to_db () {
    printf "\e[0;104m %s: MySQL root password: \e[0m" "$(now)"
    read -s PASS
    PASS=${PASS:-badpass}
    echo
    echonotice "Connecting to MySQL..."
}
create_db () {
    echonotice 'Creating empty database...'
    echo "CREATE DATABASE \`$NEW_DB\` CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci" | mysql -u root -p$PASS 2>> $(tmp_file 'errors.log')
    DB_CREATED=true
}
build_tables () {
    echonotice 'Retrieving and building database structure...'
    mysqldump $OLD_DB --skip-comments -d -u root -p$PASS 2>> $(tmp_file 'errors.log') | pv --width 80  --name " $(now)" > $(tmp_file 'dump.sql')
    pv --width 80  --name " $(now)" $(tmp_file 'dump.sql') | sql_on_new_db
}
set_debug_1 () {
    echonotice 'Switching into recovery mode for innodb...'
    printf '[mysqld]\ninnodb_file_per_table = 1\ninnodb_force_recovery = 1\n' | sudo tee $MYSQL_CNF_PATH > /dev/null
}
set_debug_0 () {
    echonotice 'Switching out of recovery mode for innodb...'
    sudo rm -f $MYSQL_CNF_PATH
}
discard_tablespace () {
    echonotice 'Unlinking default data...'
    (
        echo "USE \`$NEW_DB\`;"
        echo "SET foreign_key_checks = 0;"
        get_tables | while read -r line;
            do echo "ALTER TABLE \`$line\` DISCARD TABLESPACE; SELECT 'Table \`$line\` imported.';";
        done
        echo "SET foreign_key_checks = 1;"
    ) > $(tmp_file 'discard_tablespace.sql')
    cat $(tmp_file 'discard_tablespace.sql') | sql_on_new_db | pv --width 80 --line-mode --size $TABLE_COUNT --name " $(now)" > /dev/null
}
import_tablespace () {
    echonotice 'Linking imported data...'
    (
        echo "USE \`$NEW_DB\`;"
        echo "SET foreign_key_checks = 0;"
        get_tables | while read -r line;
            do echo "ALTER TABLE \`$line\` IMPORT TABLESPACE; SELECT 'Table \`$line\` imported.';";
        done
        echo "SET foreign_key_checks = 1;"
    ) > $(tmp_file 'import_tablespace.sql')
    cat $(tmp_file 'import_tablespace.sql') | sql_on_new_db | pv --width 80 --line-mode --size $TABLE_COUNT --name " $(now)" > /dev/null
}
stop_mysql () {
    echonotice 'Stopping MySQL...'
    sudo /etc/init.d/mysql stop >> $(tmp_file 'log')
}
start_mysql () {
    echonotice 'Starting MySQL...'
    sudo /etc/init.d/mysql start >> $(tmp_file 'log')
}
restart_mysql () {
    echonotice 'Restarting MySQL...'
    sudo /etc/init.d/mysql restart >> $(tmp_file 'log')
}
copy_data () {
    echonotice 'Copying data...'
    sudo rm -f $(new_db_path)*.ibd
    sudo rsync -ah --info=progress2 $(old_db_path) --include '*.ibd' --exclude '*' $(new_db_path)
}
give_access () {
    echonotice "Giving MySQL user \`$USER\` access to database \`$NEW_DB\`"
    echo "GRANT ALL PRIVILEGES ON \`$NEW_DB\`.* to $USER@localhost" | sql_on_new_db
}

echostep $((++STEP))
connect_to_db

EXISTING_TABLE=`echo "SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = '$NEW_DB'" | mysql --skip-column-names -u root -p$PASS 2>> $(tmp_file 'errors.log')`
if [ "$EXISTING_TABLE" == "$NEW_DB" ]
    then
        echoerror "Database \`$NEW_DB\` already exists"
        exit 1
fi

echoinstructions "The hamsters are working. Check back in 5-10 minutes."
sleep 5

echostep $((++STEP))
create_db
echostep $((++STEP))
build_tables
echostep $((++STEP))
set_debug_1
echostep $((++STEP))
discard_tablespace
echostep $((++STEP))
stop_mysql
echostep $((++STEP))
copy_data
echostep $((++STEP))
start_mysql
echostep $((++STEP))
import_tablespace
echostep $((++STEP))
set_debug_0
echostep $((++STEP))
restart_mysql
echostep $((++STEP))
give_access

echo
echosuccess "Database \`$NEW_DB\` is ready to use."
echo

trap general_cleanup EXIT 
```

如果一切顺利，您应该会看到如下内容：

[![示例数据库的脚本输出屏幕截图](https://i.stack.imgur.com/N4ppu.png)](https://i.stack.imgur.com/N4ppu.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-07-21T06:18:39.253

您可以执行以下操作：

```
mysqldump -u[username] -p[password] database_name_for_clone 
 | mysql -u[username] -p[password] new_database_name 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-05-16T11:10:11.157

此语句在 MySQL 5.1.7 中添加，但被发现有危险并在 MySQL 5.1.23 中删除。它旨在使升级 5.1 之前的数据库能够使用 5.1 中实现的编码来将数据库名称映射到数据库目录名称。但是，使用此语句可能会导致数据库内容丢失，这就是它被删除的原因。不要在它存在的早期版本中使用 RENAME DATABASE。

要使用新编码执行升级数据库名称的任务，请改用 ALTER DATABASE db_name UPGRADE DATA DIRECTORY NAME：http: [//dev.mysql.com/doc/refman/5.1/en/alter-database.html](http://dev.mysql.com/doc/refman/5.1/en/alter-database.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-06T06:55:18.020

**使用 Mydumper**

```
sudo apt install mydumper 
```

**生成转储**

```
mydumper --user=YOUR_USER --password=YOUR_PASSWORD -B YOUR_CURRENT_DB \ 
         --triggers --routines --events --outputdir YOUR_OUTPUT_DIR 
```

**负载转储**

```
myloader --user=YOUR_USER --password=YOUR_PASSWORD --database=YOUR_NEW_DB \ 
         --directory=YOUR_OUTPUT_DIR 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-06T10:01:39.733

除了[Greg 的 answer](https://stackoverflow.com/a/675299)`new_db_name`之外，如果尚不存在 ，这是最简单和最快的方法：

```
echo "create database new_db_name" | mysql -u <user> -p <pwd> 
mysqldump -u <user> -p <pwd> db_name | mysql -u <user> -p <pwd> new_db_name 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-04T20:10:53.033

如果您的原始数据库中有触发器，则可以通过在导入之前通过管道替换来避免“触发器已存在”错误：

```
mysqldump -u olddbuser -p -d olddbname | sed "s/`olddbname`./`newdbname`./" | mysql -u newdbuser -p -D newdbname 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-04T10:14:54.780

使用 MySQL Workbench，您可以使用 Database > Migration Wizard 将数据库复制到相同或其他服务器实例。我相信它可以在服务器端工作，因此它应该是复制大型数据库的一个很好的解决方案。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-26T09:53:48.763

你可以做：

```
CREATE DATABASE copy_of_db;
create table copy_of_db.table LIKE source_db.table;

If you want to copy data too:
INSERT INTO copy_of_db.table SELECT * FROM source_db.table; 
```

对所有表、函数、过程等重复

（mysqldump 是正确的方法，但这是一种在许多情况下有用的快速而肮脏的解决方案）

# .htaccess - 无法通过域掩码在站点 B 上显示站点 A 的内容

> ID：675290
> 
> 赞同：0
> 
> 时间：2009-03-23T21:25:09.787
> 
> 标签：.htaccess, domain-mask

我有一个域*www.siteA.com*，它使用 Joomla，而域*www.siteB.com*是空的。

我想在*www.siteB.com显示域**www.siteA.com*的内容。

 *我首先尝试通过**.htaccess**进行域重定向来解决问题，但我无法在 SiteB 上显示 SiteA 的内容。

**如何通过 .htaccess 中的域掩码在 mysiteB.com 上显示 mysiteA.com 的内容？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T21:30:33.563

```
RewriteEngine On
RewriteRule ^.*$ http://www.siteA.tld/$1 [NC] 
```

这应该重写对站点A 的每个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T21:35:28.170

您确实应该通过对域进行 CNAME 来执行此操作，但是如果您真的想使用 .htaccess ，您可以按照@Unkwntech 的建议进行操作

编辑：它看起来像

```
www.siteB.com CNAME www.siteA.com 
```

无论您采用哪种方式（CNAME 或 htaccess），您都可能会因重复内容而受到 SEO 处罚。

# javascript - 隐藏/显示 div 时 Firefox 页面“移动”

> ID：675294
> 
> 赞同：0
> 
> 时间：2009-03-23T21:25:37.897
> 
> 标签：javascript, firefox, html, show-hide

我们有一个具有这种一般结构的网页：

```
<div id="container">
  <div id="basicSearch">...</div>
  <div id="advancedSearch" style="display: none">...</div>
<div> 
```

使用这个 CSS：

```
#container { MARGIN: 0px auto; WIDTH: 970px }
#basicSearch { width:100% }
#advancedSearch{ width:100%;} 
```

我们在页面上有一个链接，可让用户在使用“基本”搜索和“高级”搜索之间切换。切换链接调用此 Javascript：

```
var basic = document.getElementById('basicSearch');
var advanced = document.getElementById('advancedSearch');
if (showAdvanced) {
    advanced.style.display = '';
    basic.style.display = 'none';
} else {
    basic.style.display = '';
    advanced.style.display = 'none';
} 
```

这一切在 IE 中都很好用。

它也可以在 Firefox 中使用——除了——当我们从一个 div 切换到另一个 div 时（即：显示/隐藏），页面在 Firefox 中“移动”。当您来回切换时，“容器”中的所有文本都会向左/向右移动大约 5px。有谁知道为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-23T21:30:06.980

是否导致滚动条出现/消失？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-23T21:31:23.000

切换内容可以使页面内容更高。检查这是否会出现滚动条，因为这会稍微影响页面宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T13:44:55.733

我最终做的是：`HTML { OVERFLOW-Y:SCROLL; OVERFLOW-X:HIDDEN; }`

这是一个很好的相关[SO](https://stackoverflow.com/questions/311504/long-pages-in-firefox-offset-when-scrollbar-appears)帖子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-23T22:10:55.743

检查您的 XHTML 格式是否正确，听起来像是一个悬空的 DIV（萤火虫会对此有所帮助）。

在旁注 jquery 有一些非常好的动画，使这个开关在眼睛上更好看。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-23T21:29:51.240

我不知道为什么，但是如果您安装 Firebug 一个 Firefox 插件，您可以使用它来调试您的问题。

在 CSS 以及显示和隐藏 div 方面，Firebug 节省了我数小时的调试时间。

使用 firebug，您可以查看两个 div 之间可能存在的差异。

在 firefox 中，只需选择 Tools Menu，然后单击 Ad-Ons，然后单击 Get Ad-Ons 并搜索 firebug。

您可以尝试的一件事是在显示之前隐藏，这可能会减少闪烁。如果您导致页面变高，这可能是您的麻烦之源。

我希望这有帮助。

# asp.net-mvc - 是否有用于图像链接的 ASP.NET MVC HtmlHelper？

> ID：675319
> 
> 赞同：14
> 
> 时间：2009-03-23T21:33:14.743
> 
> 标签：asp.net-mvc, routes, html-helper

Html.RouteLink() HtmlHelper 非常适合文本链接。但是链接图像的最佳方式是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-03-23T21:34:53.867

```
<a href="<%=Url.RouteUrl(...)%>"><img src="..." alt="..." /></a> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-08-04T12:41:55.893

这是我的，它的核心功能是做一些重载

```
public static string ImageLink(this HtmlHelper htmlHelper, string imgSrc, string alt, string actionName, string controllerName, object routeValues, object htmlAttributes, object imgHtmlAttributes)
{
    UrlHelper urlHelper = ((Controller)htmlHelper.ViewContext.Controller).Url;
    string imgtag = htmlHelper.Image(imgSrc, alt,imgHtmlAttributes);
    string url = urlHelper.Action(actionName, controllerName, routeValues);

    TagBuilder imglink = new TagBuilder("a");
    imglink.MergeAttribute("href", url);
    imglink.InnerHtml =imgtag;
    imglink.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);

    return imglink.ToString();
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2010-01-25T03:48:55.737

这是我从上面的[MiniScalope](https://stackoverflow.com/questions/675319/is-there-an-asp-net-mvc-htmlhelper-for-image-links/1227295#1227295)答案中获得的更新版本。我正在使用 VS2010 和 ASP.Net MVC 2 预览版

```
 public static string ImageLink(this HtmlHelper htmlHelper, string imgSrc, string alt, string actionName, string controllerName, object routeValues, object htmlAttributes, object imgHtmlAttributes)
    {
        UrlHelper urlHelper = ((Controller)htmlHelper.ViewContext.Controller).Url;
        TagBuilder imgTag = new TagBuilder("img");
        imgTag.MergeAttribute("src", imgSrc);
        imgTag.MergeAttributes((IDictionary<string, string>) imgHtmlAttributes,true);
        string url = urlHelper.Action(actionName, controllerName, routeValues);

        TagBuilder imglink = new TagBuilder("a");
        imglink.MergeAttribute("href", url);
        imglink.InnerHtml = imgTag.ToString();
        imglink.MergeAttributes((IDictionary<string, string>)htmlAttributes, true);

        return imglink.ToString();

    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-23T21:40:30.497

```
<%= Html.ActionLink(Html.Image(imageUrl, imageAlt), actionName, controllerName) %> 
```

可以工作，图像扩展来自期货大会。或者自己做扩展。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-03-23T21:36:15.577

创建您自己的辅助扩展。

```
public static string Image(this HtmlHelper helper, string src, string alt)
{
    TagBuilder tb = new TagBuilder("img");
    tb.Attributes.Add("src", helper.Encode(src));
    tb.Attributes.Add("alt", helper.Encode(alt));
    return tb.ToString(TagRenderMode.SelfClosing);
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-10-22T15:43:15.367

我没有足够的自信来添加评论，但这是对 [上面 MiniScalope 评论的评论](https://stackoverflow.com/questions/675319/is-there-an-asp-net-mvc-htmlhelper-for-image-links/1227295#1227295)：

> `UrlHelper urlHelper = ((Controller)htmlHelper.ViewContext.Controller).Url;`

我建议将其作为 HtmlHelper 扩展方法本身（并简化它），以便重用：

```
private static UrlHelper Url(this HtmlHelper helper)
{ 
  return new UrlHelper(helper.ViewContext.RequestContext);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-23T21:41:09.340

```
<%= Html.RouteLink("PLACEHOLDER", ...).Replace("PLACEHOLDER", "<img src=""..."" alt=""..."" />")%> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-06-24T23:37:10.877

此代码已在 mvc4 上测试...

```
 public static MvcHtmlString ImageLink(this HtmlHelper htmlHelper, string imgSrc, string alt, string actionName, string controllerName, object routeValues, object htmlAttributes, object imgHtmlAttributes)
    {
        UrlHelper urlHelper = ((Controller)htmlHelper.ViewContext.Controller).Url;
        var imgTag = new TagBuilder("img");
        imgTag.MergeAttribute("src", imgSrc);
        imgTag.MergeAttributes((IDictionary<string, string>)imgHtmlAttributes, true);
        string url = urlHelper.Action(actionName, controllerName, routeValues);

        var imglink = new TagBuilder("a");
        imglink.MergeAttribute("href", url);
        imglink.InnerHtml = imgTag.ToString();
        imglink.MergeAttributes((IDictionary<string, string>)htmlAttributes, true);

        return MvcHtmlString.Create(imglink.ToString());

    } 
```

# c# - 数据绑定在值更改时更新，而不是在跳出时更新

> ID：675333
> 
> 赞同：5
> 
> 时间：2009-03-23T21:36:02.067
> 
> 标签：c#, .net, winforms, data-binding

是否有一个属性或设置来强制 Winforms 中的绑定控件在输入值（无论是文本框还是其他任何内容）实际更改时更新它绑定到的对象？

而不是在控件被标记出来之后。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-24T07:53:58.197

假设您已经将文本框绑定到某些东西：

*   在设计器中选择文本框
*   单击属性“数据绑定”
*   点击属性“高级”
*   在此对话框中查找“数据源更新模式”
*   选择**onpropery 改变而不是 onvalidate**

现在数据源在文本框的文本属性的每次更改时都会更新。

# sharepoint - 如何验证共享点表单上的数据输入？

> ID：675338
> 
> 赞同：6
> 
> 时间：2009-03-23T21:37:32.517
> 
> 标签：sharepoint, forms, validation, dataview

如何使用另一个列表的列验证文本字段？我目前正在使用数据源填充下拉列表，然后使用 javascript 将文本字段与下拉列表中的项目进行比较。有没有更好的办法？

我遇到的第二个问题是如何触发验证函数。

我知道用于将数据添加到共享点列表的两种自定义表单。一个是使用 Sharepoint Designer 中的 Dataview Webpart 创建的，另一个是使用 Sharepoint Designer 中的 List Form Webpart 创建的。

我有一个使用 Sharepoint Designer Insert Dataview -> Insert Selected Fields as New Item Form 创建的 DataFormWebPart。这会在表单末尾提供保存和取消按钮。如何拦截保存按钮事件？

我找到了一种解决方案，但它仅适用于具有确定取消按钮的 NewForm 页面。[http://www.codeproject.com/KB/sharepoint/Control_validation.aspx](http://www.codeproject.com/KB/sharepoint/Control_validation.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T21:47:02.510

如果要验证多个字段的状态，则必须使用事件处理程序。如果要取消正在添加/更新的项目，可以使用 ItemAdding/ItemUpdating 事件。

properties.cancle = true; properties.ErrorMessage = "您的验证信息。";

[http://msdn.microsoft.com/en-us/magazine/cc163318.aspx](http://msdn.microsoft.com/en-us/magazine/cc163318.aspx)

[http://blogs.msdn.com/brianwilson/archive/2007/03/05/part-1-event-handlers-everything-you-need-to-know-about-microsoft-office-sharepoint-portal-server-苔藓事件处理程序.aspx](http://blogs.msdn.com/brianwilson/archive/2007/03/05/part-1-event-handlers-everything-you-need-to-know-about-microsoft-office-sharepoint-portal-server-moss-event-handlers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T07:35:46.567

我认为您正在尝试构建一个类似的工具，称为[SharePoint 表单验证](http://www.boostsolutions.com/formvalidation.html)。

如果是这样，请查看此博客： http://office.microsoft.com/en-us/sharepointtechnology/HA101054791033.aspx?pid= [CH100650061033](http://office.microsoft.com/en-us/sharepointtechnology/HA101054791033.aspx?pid=CH100650061033)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T11:54:02.447

您可以将查询字符串添加到公式框中进行验证吗？

例如像这样：

```
 ^[a-zA-Z]{2}[0-9]{6}[A-Za-z]{1}$ 
```

它根据国家保险号码进行验证。

sharepoint 说该列必须 = true，所以我可以输入类似的内容吗

```
[column name] = ^[a-zA-Z]{2}[0-9]{6}[A-Za-z]{1}$ 
```

# sql - postgresql中的分组问题

> ID：675342
> 
> 赞同：4
> 
> 时间：2009-03-23T21:38:26.680
> 
> 标签：sql, postgresql, group-by

假设我有一个表“订单”创建为：

```
CREATE TABLE orders (id SERIAL, 
                     customerID INTEGER,
                     timestamp BIGINT, 
                     PRIMARY KEY(id)); 
```

Timestamp 是 UNIX 时间戳。现在我想为每个客户选择最新订单的 ID。作为一个视图会很好。

但是下面的语句

```
CREATE VIEW lastOrders AS SELECT  id,
                                  customerID, 
                                  MAX(timestamp) 
                                  FROM orders 
                                  GROUP BY customerID; 
```

导致 postgre 错误：

> 错误：列“orders.id”必须出现在 GROUP BY 子句中或在聚合函数中使用

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-23T22:43:14.230

对于这类事情，您可以使用 2 种方法。Jens 已经展示了一个。

其他，就是使用“DISTINCT ON”子句：

```
CREATE VIEW lastOrders AS
SELECT
DISTINCT ON (customerID)
    id,
    customerID,
    timestamp
FROM orders
ORDER BY customerID, timestamp desc; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T02:48:35.967

以下查询应仅返回每个客户的最后一个订单。

```
CREATE  VIEW last_orders AS
SELECT  id, customer_id, timestamp
FROM    orders AS o
WHERE   timestamp = (
            SELECT  MAX(timestamp)
            FROM    orders AS oi
            WHERE   o.customer_id = oi.customer_id
        ); 
```

（假设您不能有两个具有完全相同时间戳值的客户的订单。）

编辑：Postgres`DISTINCT ON`是一种更漂亮的方法。我很高兴我了解了它。但是，以上适用于其他 RDBMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T21:55:21.100

kquinns answer 将解决异常，但不是您要查找的内容。

我不知道 mysql 的功能，但这样的东西可以与 oracle 一起使用：

```
select a.*
from 
    orders a, 
    (select customerID, max(timestamp) timestamp 
        from orders group by customerID
    ) b
where a.customer_id = b.customerID
and a.timestamp = b.timestamp 
```

实际上使用 oracle 可以使用分析函数，但我认为它们在 mysql 中不可用

# c# - 使用 protobuf-net 反序列化未知类型

> ID：675349
> 
> 赞同：23
> 
> 时间：2009-03-23T21:40:58.390
> 
> 标签：c#, serialization, protocol-buffers, protobuf-net

我有 2 个联网应用程序，它们应该相互发送序列化的 protobuf-net 消息。我可以序列化对象并发送它们，但是，**我无法弄清楚如何反序列化接收到的字节**。

我试图用这个反序列化，但它失败了一个 NullReferenceException。

```
// Where "ms" is a memorystream containing the serialized
// byte array from the network.
Messages.BaseMessage message =
  ProtoBuf.Serializer.Deserialize<Messages.BaseMessage>(ms); 
```

我在包含消息类型 ID 的序列化字节之前传递了一个标头，我可以在一个巨大的 switch 语句中使用它来返回预期的子类类型。使用下面的块，我收到错误：System.Reflection.TargetInvocationException ---> System.NullReferenceException。

```
//Where "ms" is a memorystream and "messageType" is a
//Uint16.
Type t = Messages.Helper.GetMessageType(messageType);
System.Reflection.MethodInfo method =
  typeof(ProtoBuf.Serializer).GetMethod("Deserialize").MakeGenericMethod(t);
message = method.Invoke(null, new object[] { ms }) as Messages.BaseMessage; 
```

这是我用来通过网络发送消息的功能：

```
internal void Send(Messages.BaseMessage message){
  using (System.IO.MemoryStream ms = new System.IO.MemoryStream()){
    ProtoBuf.Serializer.Serialize(ms, message);
    byte[] messageTypeAndLength = new byte[4];
    Buffer.BlockCopy(BitConverter.GetBytes(message.messageType), 0, messageTypeAndLength, 0, 2);
    Buffer.BlockCopy(BitConverter.GetBytes((UInt16)ms.Length), 0, messageTypeAndLength, 2, 2);
    this.networkStream.Write(messageTypeAndLength);
    this.networkStream.Write(ms.ToArray());
  }
} 
```

这个类，带有基类，我正在序列化：

```
[Serializable,
ProtoContract,
ProtoInclude(50, typeof(BeginRequest))]
abstract internal class BaseMessage
{
  [ProtoMember(1)]
  abstract public UInt16 messageType { get; }
}

[Serializable,
ProtoContract]
internal class BeginRequest : BaseMessage
{
    [ProtoMember(1)]
    public override UInt16 messageType
    {
        get { return 1; }
    }
} 
```

* * *

**使用 Marc Gravell 的建议进行了**修复。**我从只读属性中删除了 ProtoMember 属性。也切换到使用 SerializeWithLengthPrefix。这是我现在拥有的：

```
[Serializable,
ProtoContract,
ProtoInclude(50, typeof(BeginRequest))]
abstract internal class BaseMessage
{
  abstract public UInt16 messageType { get; }
}

[Serializable,
ProtoContract]
internal class BeginRequest : BaseMessage
{
    public override UInt16 messageType
    {
        get { return 1; }
    }
} 
```

接收对象：

```
//where "this.Ssl" is an SslStream.
BaseMessage message =
  ProtoBuf.Serializer.DeserializeWithLengthPrefix<BaseMessage>(
    this.Ssl, ProtoBuf.PrefixStyle.Base128); 
```

发送对象：

```
//where "this.Ssl" is an SslStream and "message" can be anything that
// inherits from BaseMessage.
ProtoBuf.Serializer.SerializeWithLengthPrefix<BaseMessage>(
  this.Ssl, message, ProtoBuf.PrefixStyle.Base128); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T11:12:41.770

```
Serializer.NonGeneric.Deserialize(Type, Stream); //Thanks,  Marc. 
```

或者

```
RuntimeTypeModel.Default.Deserialize(Stream, null, Type); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-23T23:37:18.953

第一的; 对于网络使用，`SerializeWithLengthPrefix`您`DeserializeWithLengthPrefix`可以使用哪个句柄长度（可选地带有标签）。`MakeGenericMethod`乍一看还可以；这实际上与我为实现 RPC 堆栈所做的工作的挂起提交密切相关：挂起的代码`has an override of DeserializeWithLengthPrefix`（本质上）采用 a `Func<int,Type>`，将标记解析为类型，以便更容易反序列化意外数据在飞行中。

`BaseMessage`如果消息类型实际上与and之间的继承有关`BeginRequest`，那么你不需要这个；它总是转到层次结构中最顶层的合约类型并向下工作（由于一些电汇细节）。

另外-我还没有机会对其进行测试，但是以下内容可能会令人不安：

```
[ProtoMember(1)]
public override UInt16 messageType
{
    get { return 1; }
} 
```

它被标记为序列化，但没有设置值的机制。也许这就是问题所在？尝试删除`[ProtoMember]`此处，因为我不认为这很有用 - 它（就序列化而言）主要是`[ProtoInclude(...)]`标记的副本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-05T19:04:13.480

处理此问题的另一种方法是使用 protobuf-net 进行“繁重的工作”，但使用您自己的消息头。处理网络消息的问题是它们可以跨越边界被打破。这通常需要使用缓冲区来累积读取。如果您使用自己的标头，则可以在将消息传递给 protobuf-net 之前确保消息完整存在。

举个例子：

发送

```
using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
{
    MyMessage message = new MyMessage();
    ProtoBuf.Serializer.Serialize<BaseMessage>(ms, message);
    byte[] buffer = ms.ToArray();

    int messageType = (int)MessageType.MyMessage;
    _socket.Send(BitConverter.GetBytes(messageType));
    _socket.Send(BitConverter.GetBytes(buffer.Length));
    _socket.Send(buffer);
} 
```

接受

```
protected bool EvaluateBuffer(byte[] buffer, int length)
{
    if (length < 8)
    {
        return false;
    }

    MessageType messageType = (MessageType)BitConverter.ToInt32(buffer, 0);
    int size = BitConverter.ToInt32(buffer, 4);
    if (length < size + 8)
    {
        return false;
    }

    using (MemoryStream memoryStream = new MemoryStream(buffer))
    {
        memoryStream.Seek(8, SeekOrigin.Begin);
        if (messageType == MessageType.MyMessage)
        {
            MyMessage message = 
                ProtoBuf.Serializer.Deserialize<MyMessage>(memoryStream);
        }
    }
} 
```

后一种方法将在累加器缓冲区上“尝试”，直到有足够的数据。一旦满足大小要求，就可以对消息进行反序列化。

# c# - Monitor.Pulse 和 Monitor.PulseAll 之间的区别

> ID：675352
> 
> 赞同：27
> 
> 时间：2009-03-23T21:41:20.090
> 
> 标签：c#, .net, multithreading

`Monitor.PulseAll`通知队列中的**所有等待线程**。

`Monitor.Pulse`通知等待队列中**的线程**。（下一个等待线程）

只有下一个线程（一个线程）可以获取锁。那么区别是什么呢？

我什么时候应该使用`Pulse`vs `PulseAll`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-03-23T21:45:15.697

当您想唤醒多个线程时使用`PulseAll`，因为它们正在等待的条件现在可能满足多个线程。（等待几乎总是与条件相关联——您通常应该在`while`循环中测试该条件。）

当您只想唤醒一个线程时使用`Pulse`，因为实际上只有一个线程能够做有用的工作。

举两个比喻：

想象一下，您只有一台打印机。一次只有一个人可以使用它，所以如果你有很多人在等待，你可以让他们都进入睡眠状态——但是当打印机空闲时你只会唤醒一个人。这反映了`Pulse`.

现在想象你经营一家商店。当你关门时，顾客在店外等候。当您打开商店时，您不只是想叫醒一位顾客——他们现在都可以进来了。这反映了`PulseAll`.

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-03-23T22:00:50.807

A`Monitor`有两个队列：等待队列和就绪队列。在没有`Wait`and的情况下`Pulse`，所有试图获取锁的线程都进入就绪队列。当锁可用时，就绪队列中的一个线程将获取它。

当一个线程获得锁然后执行 a`Wait`时，该线程进入等待队列。它正在等待 a `Pulse`or `PulseAll`，并且将一直留在等待队列中，直到它收到 a `Pulse`，即使就绪队列中的其他线程获取并释放锁也是如此。

`Pulse`将一个线程从等待队列移动到就绪队列。 `PulseAll`将所有线程从等待队列移动到就绪队列。

这里的关键是等待队列中的线程永远无法获得锁。它们正在等待一个脉冲将它们移回就绪队列，以便在可用时获取锁。

关于 Wait 和 Pulse 的讨论相当不错——至少有一点能让你开始——在[这里](http://www.albahari.com/threading/part4.aspx#_Wait_and_Pulse)。

# c++ - 范围参考成语的最佳实践？

> ID：675362
> 
> 赞同：2
> 
> 时间：2009-03-23T21:47:22.633
> 
> 标签：c++, pointers

我刚刚被一个错误所困扰，部分原因是我缺乏理解，部分原因是我认为我们的代码库中的设计不理想。我很好奇如何改进我的 5 分钟解决方案。

我们正在使用引用计数的对象，在这些类的对象上我们有 AddRef() 和 Release()。一个特定对象派生自 ref-count 对象，但获取这些对象实例的通用函数 (GetExisting) 将 AddRef() 隐藏在其自身内部，而不宣传它正在这样做。这需要在功能块的末尾执行 Release 以释放隐藏的 ref，但是没有检查 GetExisting() 实现的开发人员不会知道这一点，并且忘记在末尾添加 Release 的人该函数（例如，在修复错误的关键时刻）会泄漏对象。这当然是我的烧伤。

```
 void SomeFunction(ProgramStateInfo *P)
{
   ThreadClass *thread = ThreadClass::GetExisting( P );
   // some code goes here
   bool result = UseThreadSomehow(thread);
   // some code goes here
   thread->Release();  // Need to do this because GetExisting() calls AddRef()
} 
```

所以我写了一个小类来避免在这些函数的末尾需要 Release()。

```
 class ThreadContainer
{
private:
    ThreadClass *m_T;
public:
    ThreadContainer(Thread *T){ m_T = T; }
    ~ThreadContainer() { if(m_T) m_T->Release(); }
    ThreadClass * Thread() const { return m_T; }
}; 
```

所以现在我可以这样做：

```
 void SomeFunction(ProgramStateInfo *P)
{
   ThreadContainer ThreadC(ThreadClass::GetExisting( P ));
   // some code goes here
   bool result = UseThreadSomehow(ThreadC.Thread());
   // some code goes here
   // Automagic Release() in ThreadC Destructor!!!
} 
```

我不喜欢的是，要访问线程指针，我必须调用 ThreadContainer 的成员函数 Thread()。是否有一些聪明的方法可以清理它以使其在语法上更漂亮，或者类似的东西会模糊容器的含义并为不熟悉代码的开发人员引入新问题？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-23T21:53:32.947

使用 boost::shared_ptr 可以定义自己的析构函数，例如我们在下一个示例中：http: [//www.boost.org/doc/libs/1_38_0/libs/smart_ptr/sp_techniques.html#com](http://www.boost.org/doc/libs/1_38_0/libs/smart_ptr/sp_techniques.html#com)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-23T21:50:55.823

是的，您可以`operator ->()`为该类实现，它将递归调用`operator ->()`您返回的任何内容：

```
class ThreadContainer
{
private:
    ThreadClass *m_T;
public:
    ThreadContainer(Thread *T){ m_T = T; }
    ~ThreadContainer() { if(m_T) m_T->Release(); }
    ThreadClass * operator -> () const { return m_T; }
}; 
```

它有效地为您的包装类使用智能指针语义：

```
Thread *t =  new Thread();
...
ThreadContainer tc(t);
...
tc->SomeThreadFunction(); // invokes tc->t->SomeThreadFunction() behind the scenes... 
```

您还可以编写一个转换函数以`UseThreadSomehow(ThreadContainer tc)`类似的方式启用您的类型调用。

如果 Boost 是一个选项，我认为您也可以设置 a`shared_ptr`作为智能参考。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-23T21:50:34.687

看看[ScopeGuard](http://www.ddj.com/cpp/184403758)。它允许这样的语法（无耻地从该链接中窃取）：

```
{
    FILE* topSecret = fopen("cia.txt");
    ON_BLOCK_EXIT(std::fclose, topSecret);
    ... use topSecret ...
} // topSecret automagically closed 
```

或者您可以尝试[Boost::ScopeExit](http://www.boost.org/doc/libs/1_38_0/libs/scope_exit/doc/html/index.html)：

```
void World::addPerson(Person const& aPerson) {
    bool commit = false;
    m_persons.push_back(aPerson);  // (1) direct action
    BOOST_SCOPE_EXIT( (&commit)(&m_persons) )
    {
        if(!commit)
            m_persons.pop_back(); // (2) rollback action
    } BOOST_SCOPE_EXIT_END

    // ...                        // (3) other operations

    commit = true;                // (4) turn all rollback actions into no-op
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-23T22:09:10.710

我建议遵循 bb的[建议](https://stackoverflow.com/questions/675362/best-practice-for-scoped-reference-idiom/675383#675383)并使用 boost::shared_ptr<>。如果 boost 不是一个选项，您可以查看 std::auto_ptr<>，它很简单，可能满足您的大部分需求。考虑到 std::auto_ptr 具有您可能不想模仿的特殊移动语义。

该方法同时提供 * 和 -> 运算符以及一个 getter（用于原始指针）和一个释放操作，以防您想要释放对内部对象的控制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-23T22:02:36.933

您可以添加一个自动类型转换运算符来返回您的原始指针。Microsoft 的 CString 类使用这种方法来轻松访问底层字符缓冲区，我一直觉得它很方便。使用这种方法可能会发现一些令人不快的惊喜，就像任何时候你有一个隐式转换一样，但我没有遇到任何问题。

```
class ThreadContainer
{
private:
    ThreadClass *m_T;
public:
    ThreadContainer(Thread *T){ m_T = T; }
    ~ThreadContainer() { if(m_T) m_T->Release(); }
    operator ThreadClass *() const { return m_T; }
};

void SomeFunction(ProgramStateInfo *P)
{
   ThreadContainer ThreadC(ThreadClass::GetExisting( P ));
   // some code goes here
   bool result = UseThreadSomehow(ThreadC);
   // some code goes here
   // Automagic Release() in ThreadC Destructor!!!
} 
```

# django-forms - 如何禁用表单集中特定表单的 5 个相同字段？

> ID：675365
> 
> 赞同：1
> 
> 时间：2009-03-23T21:47:24.957
> 
> 标签：django-forms

一些表单代表父对象，如果它们用于“父”对象，我希望在每个表单中禁用大多数字段。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-23T21:53:17.237

最简单的方法是给字段一个特定的语义类，然后使用[**jQuery**](http://jquery.com/)禁用该类的所有字段。假设表单都包含在某个更大的容器中，其 id 为`formgroup`并且您`dependent-field`用作类名，您可以使用如下内容：

```
// Set the 'disabled' attribute on every dependent field in this group of forms.
$('#formgroup').find('.dependent-field').attr('disabled', true); 
```

# python - OS X 终端中 Python 解释器中的制表符补全

> ID：675370
> 
> 赞同：21
> 
> 时间：2009-03-23T21:48:29.417
> 
> 标签：python, macos, configuration, interpreter, tab-completion

几个月前，我写了[一篇博](http://igotgenes.blogspot.com/2009/01/tab-completion-and-history-in-python.html)文，详细介绍了如何在标准 Python 交互式解释器中实现制表符补全——我曾经认为这个功能只能在 IPython 中使用。由于 IPython unicode 问题，我有时不得不切换到标准解释器，我发现它非常方便。

最近我在 OS X 上做了一些工作。令我不满的是，该脚本似乎不适用于 OS X 的终端应用程序。我希望你们中的一些有 OS X 经验的人能够帮助我解决它，以便它也可以在终端中工作。

我正在复制下面的代码

```
import atexit
import os.path

try:
    import readline
except ImportError:
    pass
else:
    import rlcompleter

    class IrlCompleter(rlcompleter.Completer):
        """
        This class enables a "tab" insertion if there's no text for
        completion.

        The default "tab" is four spaces. You can initialize with '\t' as
        the tab if you wish to use a genuine tab.

        """

        def __init__(self, tab='    '):
            self.tab = tab
            rlcompleter.Completer.__init__(self)

        def complete(self, text, state):
            if text == '':
                readline.insert_text(self.tab)
                return None
            else:
                return rlcompleter.Completer.complete(self,text,state)

    #you could change this line to bind another key instead tab.
    readline.parse_and_bind('tab: complete')
    readline.set_completer(IrlCompleter('\t').complete)

# Restore our command-line history, and save it when Python exits.
history_path = os.path.expanduser('~/.pyhistory')
if os.path.isfile(history_path):
    readline.read_history_file(history_path)
atexit.register(lambda x=history_path: readline.write_history_file(x)) 
```

请注意，我已经从我的博客文章的版本中稍微编辑了它，以便`IrlCompleter`使用真正的选项卡进行初始化，这似乎是终端中 Tab 键输出的内容。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-06-12T15:43:41.730

这应该在 Leopard 的 python 下工作：

```
import rlcompleter
import readline
readline.parse_and_bind ("bind ^I rl_complete") 
```

而这个没有：

```
import readline, rlcompleter
readline.parse_and_bind("tab: complete") 
```

将其保存在 ~/.pythonrc.py 并在 .bash_profile 中执行

```
export PYTHONSTARTUP=$HOME/.pythonrc.py 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-08-11T01:52:21.400

这是一个完整的跨平台版本的 Windows/OS X/Linux 一次性加载选项卡完成：

```
#Code  UUID = '9301d536-860d-11de-81c8-0023dfaa9e40'
import sys
try:
        import readline
except ImportError:
        try:
                import pyreadline as readline
        # throw open a browser if we fail both readline and pyreadline
        except ImportError:
                import webbrowser
                webbrowser.open("http://ipython.scipy.org/moin/PyReadline/Intro#line-36")
                # throw open a browser
        #pass
else:
        import rlcompleter
        if(sys.platform == 'darwin'):
                readline.parse_and_bind ("bind ^I rl_complete")
        else:
                readline.parse_and_bind("tab: complete") 
```

来自[http://www.farmckon.net/?p=181](http://www.farmckon.net/?p=181)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-26T11:47:57.620

为了避免使用更多的 GPL 代码，Apple 没有包含真正的 readline。相反，它使用 BSD 许可的[libedit](http://www.thrysoee.dk/editline/)，它只与大多数 readline 兼容。如果您想完成，请构建您自己的 Python（或使用 Fink 或 MacPorts）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-23T23:11:58.017

这在 Linux bash 和 OS X 10.4 上都适用于我

```
import readline
import rlcompleter
readline.parse_and_bind('tab: complete') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-28T10:17:56.927

如果尝试了以上方法还是不行，那么尝试在shell中执行：

```
sudo easy_install readline 
```

然后，使用以下内容创建*~/.profile*文件：

```
export PYTHONSTARTUP=$HOME/.pythonrc.py 
```

和一个包含以下内容的*~/.pythonrc.py*文件：

```
try:
    import readline
except:
    print ("Module readline is not available.")
else:
    import rlcompleter
    readline.parse_and_bind("tab: complete") 
```

感谢[Steven Bamford](http://stevenbamford.com/2010/01/06/python-tab-completion-in-os-x/)提供的 easy_install 提示，以及[Nicolas](https://nicolas.perriault.net/code/2010/python-tab-completion/)提供的文件内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-16T19:25:27.473

将 libedit（Mac OS 半读行）与真实行分开的记录方法是：如果读行中的“libedit”。**doc** : pass # Mac case else: pass # GNU readline case

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-01T16:35:13.463

在遇到许多在 FreeBSD 上处理 Python（2 和 3）的问题后，我终于得到了一个适当的扩展，可以直接使用 libedit 作为 Python 的完成者。

libedit/readline 的基本问题是 Python 的完成和输入严重倾向于 GNU readline... 遗憾的是，这实际上不是一个特别好的接口。它需要 C 语言中的大量全局变量，并且在“实例”基础上不能很好地工作。

解决方案：

[https://github.com/mark-nicholson/python-editline](https://github.com/mark-nicholson/python-editline)

这是一个真正的独立 python 扩展，它使用实际的“libedit”接口直接链接到 libedit——而不是侧面的 readline 胶水。

我已经在 Ubuntu、FreeBSD、OpenBSD、NetBSD 和 MacOS 上对它进行了相当彻底的测试——结果发布在自述文件中。与 Python 中的 readline.c 模块不同，c 代码非常干净，几乎没有平台相关位。

注意：它适用于 Python3 > 3.2。它不是其他脚本中“import readline”的直接替代品，但可以轻松调整这些脚本。它可以与 readline.so 共存——有用于启用选择的 sitecustomize.py 文件的代码。它可以使用发行版“libedit.so”、自定义构建的发行版或扩展本身内置的 libedit。

# sql - SQL 2000 单模式，与数据库 dbcc checkdb 有关

> ID：675372
> 
> 赞同：0
> 
> 时间：2009-03-23T21:48:44.160
> 
> 标签：sql, sql-server

我正在尝试破解在新数据库中打开 MDF 文件。我们丢失了备份。

在阅读了大量文章后，我发现唯一让我与成功解决方案区分开来的是将数据库设置为单用户模式。

我发出“sp_dboption 'MyDbName',single,true” SQL Server 报告“命令成功完成”。

然后我运行“DBCC CHECKDB ('MyDbName',REPAIR_ALLOW_DATA_LOSS)”

它抱怨“未处理修复语句。数据库需要处于单用户模式。”

这令人沮丧不已。这就像 MSFT 开发人员故意进行的令人费解的折磨。

我不是数据库管理员，我是需要恢复这个数据库的程序员，至少是我们丢失的存储过程。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T21:59:17.113

您可以尝试使用命令行上的 -m 开关进入单用户模式，而不是 sp_dboption 命令：

[http://msdn.microsoft.com/en-us/library/aa178018(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa178018(SQL.80).aspx)

# sql-server - 在 SQL 中使用数据透视

> ID：675376
> 
> 赞同：2
> 
> 时间：2009-03-23T21:50:34.497
> 
> 标签：sql-server, pivot

例如我有一张桌子

**IPPARSED**
127
0
0
1

现在我需要旋转桌子所以它可以像这样

**1 2 3 4**
127 0 0 1

你能帮我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T22:09:52.907

假设行总是按该顺序排列，您可以尝试使用 case 语句来透视表：

```
SELECT (case when (<condition to match first octet>) then IPPARSED else END) as 1,
       (case when (<condition to match second octet>) then IPPARSED else END) as 2,
       (case when (<condition to match third octet>) then IPPARSED else END) as 3,
       (case when (<condition to match fourth octet>) then IPPARSED else END) as 4
FROM <insert_table_name_or_table_definition_here> 
```

参照。Anthony Mollinaro 的[SQL 食谱](http://oreilly.com/catalog/9780596009762/index.html)第 365 页。

* * *

编辑：如果您在提出 a 时遇到问题`<condition to match (...) octet>`，您需要对查询结果进行 select 操作，以某种方式将行号添加到您的表中。在 Oracle 中，您将使用 rownum 伪列，但在 SQL Server 中不存在。在 SQL Server 2005 中，您确实可以将`ROW_NUMBER()`内置函数用作列，或者可能将该`IDENTITY(...)`函数用作该查询中的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T21:56:12.190

嗨，您的表中没有另一列来汇总 IP 地址吗？您不应该在没有任何其他组列的情况下每条记录只有一个整数，对吗？你用什么数据库？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T22:10:23.703

我认为当解析的 IP 以四行形式出现时，您正在做一些奇怪的事情。直接解析为一行应该很容易。您能否提供您的解析方法和/或输入格式？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-23T22:20:31.150

我同意sheepsimulator 的回答，但是正如您对我的回答David 所评论的那样，如果您的表中没有分组列和多个条目，则很难找到匹配的条件。如果您只有一个 IP 条目（所以 4 行），那么您可以：

*   使用 lineID（Oracle 中的 rownum）进行分组
*   解析 4 行 ;-)

编辑：第一个解决方案（使用 lineID）可用于解析多个 IP 条目，但它需要在数据库中顺序插入。

# ruby - 在 Ruby 中模拟 AES_ENCRYPT 和 AES_DECRYPT 函数

> ID：675380
> 
> 赞同：3
> 
> 时间：2009-03-23T21:51:39.083
> 
> 标签：ruby, openssl, aes, encryption

我需要模仿 MySQL 在使用内置函数 AES_ENCRYPT() 和 AES_DECRYPT() 加密和解密字符串时所做的事情。

我已经阅读了几篇博客文章，显然 MySQL 对这些功能使用了 AES 128 位加密。最重要的是，由于这种加密需要 16 位密钥，MySQL 用 x0 字符 (\0s) 填充字符串，直到它的大小为 16 位。

来自 MySQL 源代码的 C 语言算法在[此处](http://gtowey.blogspot.com/2009/01/mysql-aes-encryption-compatability.html)发现。

现在我需要复制 MySQL 在 Rails 应用程序中所做的事情，但是我尝试的每一件事都不起作用。

这是一种复制我得到的行为的方法：

1) 创建一个新的 Rails 应用程序

```
rails encryption-test
cd encryption-test 
```

2) 创建一个新的脚手架

```
script/generate scaffold user name:string password:binary 
```

3) 编辑你的 config/database.yml 并添加一个测试 MySQL 数据库

```
development:
    adapter: mysql
    host: localhost
    database: test
    user: <<user>>
    password: <<password>> 
```

4) 运行迁移

```
rake db:migrate 
```

5) 进入控制台，创建用户并从 MySQL 查询更新其密码

```
script/console
Loading development environment (Rails 2.2.2)
>> User.create(:name => "John Doe")
>> key = "82pjd12398JKBSDIGUSisahdoahOUASDHsdapdjqwjeASIduAsdh078asdASD087asdADSsdjhA7809asdajhADSs"
>> ActiveRecord::Base.connection.execute("UPDATE users SET password = AES_ENCRYPT('password', '#{key}') WHERE name='John Doe'") 
```

这就是我卡住的地方。如果我尝试解密它，使用 MySQL 它可以工作：

```
>> loaded_user = User.find_by_sql("SELECT AES_DECRYPT(password, '#{key}') AS password FROM users WHERE id=1").first
>> loaded_user['password']
=> "password" 
```

但是，如果我尝试使用 OpenSSL 库，我将无法使其工作：

```
cipher = OpenSSL::Cipher::Cipher.new("AES-128-ECB") 
cipher.padding = 0
cipher.key = key
cipher.decrypt 

user = User.find(1)
cipher.update(user.password) << cipher.final #=> "########gf####\027\227" 
```

我试过填充键：

```
desired_length = 16 * ((key.length / 16) + 1)
padded_key = key + "\0" * (desired_length - key.length)

cipher = OpenSSL::Cipher::Cipher.new("AES-128-ECB") 
cipher.key = key
cipher.decrypt 

user = User.find(1)
cipher.update(user.password) << cipher.final #=> ""|\e\261\205:\032s\273\242\030\261\272P##" 
```

但这真的行不通。

有没有人知道如何在 Ruby 中模仿 MySQL AES_ENCRYPT() 和 AES_DECRYPT() 函数的行为？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-24T13:41:47.487

备查：

根据我之前发送的博客文章，以下是 MySQL 如何使用您提供的密钥 AES_ENCRYPT / DECRYPT：

> “该算法只是创建一个 16 字节缓冲区设置为全零，然后遍历您提供的字符串的所有字符，并在两个值之间进行按位或赋值。如果我们迭代直到我们到达 16 字节缓冲区的末尾，我们只是从头开始做 ^=。对于短于 16 个字符的字符串，我们在字符串的末尾停止。

我不知道您是否可以阅读 C，但这里是提到的片段：

[http://pastie.org/425161](http://pastie.org/425161)

特别是这部分：

```
bzero((char*) rkey,AES_KEY_LENGTH/8);      /* Set initial key  */

for (ptr= rkey, sptr= key; sptr < key_end; ptr++,sptr++)
{
  if (ptr == rkey_end)
    ptr= rkey;  /*  Just loop over tmp_key until we used all key */
  *ptr^= (uint8) *sptr;
} 
```

所以我想出了这个方法（在 Rob Biedenharn 的帮助下，来自 ruby​​ 论坛）：

```
def mysql_key(key)
   final_key = "\0" * 16
   key.length.times do |i|
     final_key[i%16] ^= key[i]
   end
   final_key
end 
```

也就是说，给定一个字符串，返回 MySQL 在加密和解密时使用的密钥。所以你现在需要的是：

```
def aes(m,k,t)
  (aes = OpenSSL::Cipher::AES128.new("ECB").send(m)).key = k
  aes.update(t) << aes.final
end

def encrypt(key, text)
  aes(:encrypt, key, text)
end

def decrypt(key, text)
  aes(:decrypt, key, text)
end 
```

要使用 ruby​​ 内置的 openssl lib，然后您可以制作两个“最终”方法：

```
def mysql_encrypt(s, key)
  encrypt(mysql_key(key), s)
end

def mysql_decrypt(s, key)
  decrypt(mysql_key(key), s)
end 
```

你准备好了！此外，完整的代码可以在这个 Gist 中找到：

[http://gist.github.com/84093](http://gist.github.com/84093)

:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T22:07:15.487

通常，您不想填充密钥，而是填充/取消填充要加密/解密的数据。这可能是另一个问题的根源。我建议使用完整数量的块的测试数据来消除这种可能性。

另外，我怀疑 OpenSSL API 的密钥需要一个“文字”密钥，而不是代码中的密钥的 ASCII 表示。

鉴于 OpenSSL ruby​​ 文档的缺乏，并且如果您会一点 Java，您可能希望使用 BouncyCastle 提供程序在 JRuby 中进行原型设计——这是我在使用 TwoFish 时所做的事情（OpenSSL API 中不存在） .

编辑：我重新阅读了您关于填充密钥的评论。您的问题有一些位/字节混淆，我不确定这在任何情况下如何应用，因为您发布的密钥长度为 89 个字符（712 位）。也许您应该尝试使用 128 位密钥/密码来消除这种填充现象？

顺便说一句，MySQL 开发人员应该为弱加密而打屁股，有更好的方法来拉伸密码，而不是简单地用零字节填充:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-27T21:59:58.703

如果您不介意使用 openssl 实现[attr_encrypted](http://github.com/shuber/attr_encrypted)是一个 gem，它将允许对大多数类进行直接加密，无论是否为 ActiveRecord。不幸的是，它与 MySQL 的 AES_EN/DECRYPT 函数不兼容。

# java - Scala 集合标准实践

> ID：675381
> 
> 赞同：31
> 
> 时间：2009-03-23T21:52:46.630
> 
> 标签：java, scala, scala-collections

来自`Java`背景，我习惯于处理集合的常见做法：显然会有例外，但通常代码如下所示：

```
public class MyClass {
  private Set<String> mySet;

  public void init() {
    Set<String> s = new LinkedHashSet<String>();
    s.add("Hello");
    s.add("World"); 
    mySet = Collections.unmodifiableSet(s);
  }
} 
```

我不得不承认，我对 Scala 中过多的选项感到有些困惑。有：

*   `scala.List`（和`Seq`）
*   `scala.collections.Set`（和`Map`）
*   `scala.collection.immutable.Set`（和`Map`，`Stack`但不是`List`）
*   `scala.collection.mutable.Set`（和`Map`，`Buffer`但不是`List`）
*   `scala.collection.jcl`

所以问题！

1.  为什么`List`和`Seq`定义在包中`scala`而不是 `scala.collection`（即使实现`Seq`在集合子包​​中）？
2.  *初始化*集合然后*冻结*它的标准机制是什么（在 Java 中是通过包装在 中来实现的`unmodifiable`）？
3.  为什么某些集合类型（例如`MultiMap`）只定义为可变的？（没有不可变的`MultiMap`）？

我已经阅读了 Daniel Spiewak[关于 scala 集合的优秀系列](http://www.codecommit.com/blog/scala/scala-collections-for-the-easily-bored-part-1)，但我仍然对如何在实践中实际使用它们感到困惑。由于强制执行完整的包声明，以下内容似乎有点笨拙：

```
class MyScala {
  var mySet: scala.collection.Set[String] = null 

  def init(): Unit = {
     val s = scala.collection.mutable.Set.empty[String]
     s + "Hello"
     s + "World"
     mySet = scala.collection.immutable.Set(s : _ *)

  }
} 
```

尽管可以说这比 Java 版本*更正确*，因为不可变集合不能更改（如在 Java 情况下，可以在`unmodifiable`包装器下更改底层集合）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-23T22:21:57.713

> 为什么 List 和 Seq 在包 scala 而不是 scala.collection 中定义（即使 Seq 的实现在集合子包​​中）？

因为它们被认为非常有用，以至于它们会通过 scala.Predef 中的同义词自动导入所有程序。

> 初始化集合然后冻结它的标准机制是什么（在 Java 中是通过包装不可修改的来实现的）？

Java 没有冻结集合的机制。它只有一个习惯用法，用于将（仍可修改的）集合包装在引发异常的包装器中。Scala 中正确的习惯用法是将可变集合复制到不可变集合中 - 可能使用 :_*

> 为什么某些集合类型（例如 MultiMap）只定义为可变的？（没有不可变的MultiMap）？

团队/社区还没有到达那里。2.7 分支增加了很多，预计 2.8 会增加更多。

> 由于强制执行完整的包声明，以下内容似乎有点笨拙：

Scala 允许导入别名，因此在这方面它总是比 Java 更简洁（参见例如 java.util.Date 和 java.sql.Date - 使用这两种方法来完全限定）

```
import scala.collection.{Set => ISet}
import scala.collection.mutable.{Set => MSet}

class MyScala {
  var mySet: ISet[String] = null 

  def init(): Unit = {
     val s = MSet.empty[String]
     s + "Hello"
     s + "World"
     mySet = Set(s : _ *)
  }
} 
```

当然，你真的只是写 init as`def init() { mySet = Set("Hello", "World")}`并省去所有的麻烦，或者更好的是把它放在构造函数中`var mySet : ISet[String] = Set("Hello", "World")`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-11-19T12:40:34.010

可变集合有时很有用（尽管我同意您应该始终先查看不可变集合）。如果使用它们，我倾向于写

```
import scala.collection.mutable 
```

在文件的顶部，并且（例如）：

```
val cache = new mutable.HashMap[String, Int] 
```

在我的代码中。这意味着您只需要编写“mutable.HashMap”，而不是 scala.collection.mutable.HashMap”。正如上面的评论员所提到的，您可以在导入中重新映射名称（例如，“import scala.collection.mutable.{HashMap => MMap}”），但是：

1.  我不想弄乱名称，以便更清楚我正在使用哪些类，并且
2.  我很少使用'mutable'，以至于在我的源代码中包含“mutable.ClassName”并不是一个过度的负担。

（另外，我也可以回应“避免空值”的评论吗？它使代码更加健壮和易于理解。我发现我什至不必像你期望的那样使用 Option。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-05T21:16:32.097

一些随机的想法：

1.  我从不使用`null`，我使用`Option`，然后会抛出一个体面的错误。这种做法已经消除了*大量* `NullPointerException`的机会，并迫使人们写出体面的错误。
2.  除非你真的需要，否则尽量避免研究“可变”的东西。

因此，我对您的 scala 示例的基本看法是，您必须稍后在其中初始化集合

```
class MyScala {
  private var lateBoundSet:Option[ Set[ String ] ] = None
  def mySet = lateBoundSet.getOrElse( error("You didn't call init!") )

  def init {
     lateBoundSet = Some( Set( "Hello", "World" ) )
  }
} 
```

我最近在办公室里哭了。“空是邪恶的！”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-08-03T11:25:52.917

请注意，当前版本的 Scala 集合 API 可能存在一些不一致之处；对于 Scala 2.8（将在 2009 年晚些时候发布），集合 API 正在大修以使其更加一致和更加灵活。

请参阅 Scala 网站上的这篇文章：[http ://www.scala-lang.org/node/2060](http://www.scala-lang.org/node/2060)

添加到 Tristan Juricek 的带有 lateBoundSet 的示例：Scala 有一个用于延迟初始化的内置机制，使用“lazy”关键字：

```
class MyClass {
    lazy val mySet = Set("Hello", "World")
} 
```

通过这样做， mySet 将在第一次使用时初始化，而不是在创建新的 MyClass 实例时立即初始化。

# rpc - 使用rpcgen时，调用者如何找到被调用者？

> ID：675384
> 
> 赞同：3
> 
> 时间：2009-03-23T21:53:47.563
> 
> 标签：rpc

这是我对它的理解：

.x 文件定义了服务器和客户端共享的接口和参数。当您使用 rpcgen 编译它时，它会生成 .h、_xdr.c、_clnt.c 和 _svc.c。_clnt.c 是存根，_svc.c 是骨架，对吧？

我知道他们是两者之间的沟通的中间人，但怎么会呢？此外，我看到运行的示例让您指定要连接的机器的 IP 地址（在示例中它使用相同的 IP 地址，127.0.0.1），但您没有指定端口。它有保留端口吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-23T22:17:42.093

该程序有两个步骤。有一个端口映射器在端口 111 上运行，一个 RPC 服务通过该服务注册并被该服务发现，但它本身可能在任意端口上运行。

有关详细信息，请参阅[RFC 1833 - ONC RPC 版本 2 的绑定协议](http://www.rfc-editor.org/rfc/rfc1833.txt)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T23:12:55.190

在 RPC 服务器机器上，有一个名为端点映射器的进程正在运行（这特别适用于 ONC RPC，但其他 RPC 机制将类似）。此过程在*已知*端口上运行，因此任何人都可以连接到它（当然，安全性和存在性允许）。

RPC 服务器将启动并向端点映射器注册自己，提供其代码（例如，MULT）和端口号，端点映射器将尽职地存储该信息以供以后使用：

```
+---------+                             +--------+
| Mapper, | <- Register MULT, port Y -- | Server |
| known   |                             | for    |
| port X  |                             | MULT   |
+---------+                             +--------+ 
```

当客户端随后使用 IP 地址连接到*端点映射器*时，它会提供所需的代码 (MULT)，然后端点映射器会提供最终目的地 - 现在客户端知道MULT 服务的 IP 地址*和端口：*

```
+--------+                     +---------+
| Client | -- Request MULT  -> | Mapper, |
|        | <- Return port Y -- | known   |
|        |                     | port X  |
+--------+                     +---------+ 
```

此时，端点映射器可以让开，让客户端直接打开与 MULT 服务本身的会话。

```
+--------+                       +--------+
| Client | -- Connect to MULT -> | Server |
|        | <-     Do stuff    -> | for    |
|        |                       | MULT   |
+--------+                       +--------+ 
```

# nhibernate - 如何在 Castle ActiveRecord 查询中返回一组有限的列？

> ID：675387
> 
> 赞同：0
> 
> 时间：2009-03-23T21:54:32.007
> 
> 标签：nhibernate, hql, castle-activerecord

并让它映射到强类型对象？

假设我有一个带有 Id、Name、Posted、IsUglyFace、YerMom 的实体博客

但我只想要/需要 Name 和 Posted 列。我试图做类似的事情：

IList blogs = repository.SimpleQuery("select Name, Posted from Blog");

这会输出大量 SQL 并返回错误，无法映射到给定对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-25T04:37:01.877

请参阅[http://ayende.com/Blog/archive/2007/08/26/Partial-Object-Queries-With-NHibernate.aspx](http://ayende.com/Blog/archive/2007/08/26/Partial-Object-Queries-With-NHibernate.aspx)

奖金：[http ://ayende.com/Blog/archive/2007/08/26/Lazy-Property-Loading-In-NHibernate.aspx](http://ayende.com/Blog/archive/2007/08/26/Lazy-Property-Loading-In-NHibernate.aspx)

# sql-server-2005 - 我应该如何在 SQL Server 2005 中实现“自动编号”字段？

> ID：675388
> 
> 赞同：3
> 
> 时间：2009-03-23T21:54:53.130
> 
> 标签：sql-server-2005, transactions, identity, auto-increment, transaction-isolation

我知道 IDENTITY 字段，但我有一种感觉，我无法使用一个来解决我的问题。

假设我有多个客户。每个客户都有多个订单。每个客户都需要为他们的订单按顺序编号，具体到他们自己。

示例表结构：

```
Orders:
OrderID | ClientID | ClientOrderID | etc... 
```

此表的一些示例行将是：

```
OrderID | ClientID | ClientOrderID | etc...
1 | 1 | 1 | ...
2 | 1 | 2 | ...
3 | 2 | 1 | ...
4 | 3 | 1 | ...
5 | 1 | 3 | ...
6 | 2 | 2 | ... 
```

我知道天真的方法是将 MAX ClientOrderID 用于任何客户端并将该值用于 INSERT，但这会受到并发问题的影响。我正在考虑使用事务，但我不太确定可用于此的最广泛的隔离范围。我将使用 LINQ to SQL，但我觉得这无关紧要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T22:18:57.877

**如果我错了，有人纠正我，但**只要您的 MAX() 调用与您的插入在同一步骤中，您就不会有并发问题。

所以，你**不能**做

```
select @newOrderID=max(ClientOrderID) + 1
from orders
where clientid=@myClientID;

insert into ( ClientID, ClientOrderID, ...)
values( @myClientID, @newOrderID, ...); 
```

但你**可以**做

```
insert into ( ClientID, ClientOrderID, ...)
select @myClientID, max(ClientOrderID) + 1, ...
from orders
where clientid=@myClientID; 
```

我假设 OrderID 是一个标识列。

再次，如果我在这方面不正确，请告诉我。最好有网址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T22:01:28.247

您可以使用存储库模式来处理您的订单，并让它控制每个特定客户订单号的数量。如果您正确实施 OrderRepository，它可以在将订单保存到数据库之前控制并发和编号（让存储库而不是数据库设置编号）。

存储库模式：[http ://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T22:03:40.253

一种可能性（尽管我不喜欢这样做）是有一个查找表，它会告诉您为每个供应商提供的最大订单号。在事务内部，您将从 VendorOrderNumber 获取最新的订单，保存新订单，增加 VendorOrderNumber 中的值，提交事务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-23T22:33:15.580

这是一种奇怪的数据存储方式，但假设您需要它，则没有可以使用的内置内容。

您对 Max(ClientOrderID) 的建议很简单，而且很容易实施（遵循 John MacIntyre 的建议）。它在有几千个订单的桌子上可能会很好地工作。随着表的增长，这种方法当然会变慢。

Nick DeVore 的查找表建议实施起来有点麻烦，但不会受到数据增长的实质性影响。

根据您实际需要 ClientOrderID 的位置/时间，您可以在需要时计算 id，如下所示：

```
SELECT *,
ROW_NUMBER() OVER(ORDER BY OrderID) AS ClientOrderID
FROM Orders
WHERE ClientID = 1 
```

这假定 ClientOrderID 与 OrderID 的顺序相同。如果不实际保留 ID，将其用作其他任何内容的键是很尴尬的。这种方法不应受到数据增长的影响。

# javascript - 是否可以使用 Javascript 计算文件的 SHA1 ID？

> ID：675392
> 
> 赞同：4
> 
> 时间：2009-03-23T21:57:53.187
> 
> 标签：javascript, sha1

如果可以在发布表格之前这样做，它可能会节省我将文件上传到我的服务器的时间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T00:55:44.723

实际上，您现在**可以**读取客户端文件的内容，只要在文件上传字段中选择它并且您使用的是 Firefox。请参阅[input.files](https://developer.mozilla.org/en/NsIDOMFileList)数组。然后，您确实可以对其进行哈希处理，尽管它可能会相当慢。

请参阅[如何使用 Javascript 或 Flash 获取用户文件的哈希值？](https://stackoverflow.com/questions/539488/how-would-i-get-a-hash-value-of-a-users-file-with-javascript-or-flash/539886#539886)示例和紧凑的 SHA-1 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T22:00:39.980

为此，您必须将文件的二进制信息加载到 JavaScript 中。这是不可能的。

但这是 SHA1 在 JavaScript 中[的](http://www.webtoolkit.info/javascript-sha1.html)实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T22:01:54.050

可以使用 SHA1，但性能不会是最好的......

对于超过几百 KB 的任何内容，您都必须运行一些基准测试并确定它是否确实是一个可行的解决方案。

请参阅[此链接](http://www.movable-type.co.uk/scripts/sha1.html)以获得良好的实现（passpack 和相当多的 OS 项目使用它）

编辑：正如其他人已经回答的那样，实际获取文件内容可能是完全不同的事情 - 所以除非您使用 Google Gears 或 Adob​​e AIR 之类的东西，否则它几乎是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-31T06:31:26.397

One can read their local file using the HTML5 File interface: [https://developer.mozilla.org/en-US/docs/Web/API/File](https://developer.mozilla.org/en-US/docs/Web/API/File)

And then you can use a library for like Crypto.js [https://code.google.com/p/crypto-js/](https://code.google.com/p/crypto-js/) to finish the hash over the read text.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-23T22:00:56.627

不，您不能使用 JavaScript 从本地计算机访问文件。

您必须先将其上传到服务器，然后检查文件的校验和。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-23T22:01:19.917

不是本地的，不，无论如何这是一个坏主意。文件中的每个字节都必须通过 Javascript 加载到内存中，并且您需要一种方法将其加载到内存中。

如果您必须这样做，并且您有办法将文件的二进制信息放入脚本中，那么您可以使用[大量](http://www.google.com/search?q=javascript+sha1+implementation&ie=utf-8&oe=utf-8&aq=t&rls=com.ubuntu:en-US:unofficial&client=firefox-a)第三方脚本。[**例如，这是一个**](http://pajhome.org.uk/crypt/md5/sha1src.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-24T02:04:49.100

您可以使用 Java 小程序来做到这一点。我从来没有使用过它们中的任何一个，但是那里有很多 Java 上传小程序。哈希算法本身可用于 Java，并可通过 java.security.MessageDigest 访问。如果客户端没有可用的 Java 插件，您可以故障回复到服务器上的常规上传和散列。

A side note: depending upon why you're hashing the file you'll probably want to re-hash it on the server after the upload rather than trust the client.

# sql-server - 如何使用 TSQL 检查用户密码何时过期？

> ID：675395
> 
> 赞同：3
> 
> 时间：2009-03-23T21:59:05.163
> 
> 标签：sql-server, tsql, credentials

使用 SQL Server 2005 及更高版本，如何使用 TSQL 检查用户密码何时到期？

这最好使用同一用户的连接来完成。运行 SQL 语句需要哪些权限？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-23T22:22:15.250

在 SQL Server 2008 中，您可以使用 SELECT LOGINPROPERTY('sa', 'DaysUntilExpiration')。

对于更准确的数据 - 以及在不支持 DaysUntilExpiration 的 SQL Server 2005 中，SELECT LOGINPROPERTY('sa', 'PasswordLastSetTime') 和组策略中的密码到期策略的组合可以做到这一点。

[根据 SQL Server 帮助，](http://msdn.microsoft.com/en-us/library/ms345412%28SQL.90%29.aspx)此功能“需要 VIEW 登录权限”。

# oracle - 如何约束多个列以防止重复，但忽略空值？

> ID：675398
> 
> 赞同：8
> 
> 时间：2009-03-23T22:00:13.163
> 
> 标签：oracle, null, nullable, constraints, unique-index

这是我在 Oracle 数据库 (10g) 中运行的一个小实验。除了（Oracle 的）实现方便之外，我无法弄清楚为什么一些插入被接受而另一些被拒绝。

```
create table sandbox(a number(10,0), b number(10,0));
create unique index sandbox_idx on sandbox(a,b);

insert into sandbox values (1,1); -- accepted
insert into sandbox values (1,2); -- accepted
insert into sandbox values (1,1); -- rejected

insert into sandbox values (1,null); -- accepted
insert into sandbox values (2,null); -- accepted
insert into sandbox values (1,null); -- rejected

insert into sandbox values (null,1); -- accepted
insert into sandbox values (null,2); -- accepted
insert into sandbox values (null,1); -- rejected

insert into sandbox values (null,null); -- accepted
insert into sandbox values (null,null); -- accepted 
```

假设偶尔有一些列值未知的行是有意义的，我可以想到两个可能的涉及防止重复的用例：
1\. 我想拒绝重复，但在任何受约束的列的值未知时接受。
2\. 我想拒绝重复，即使在约束列的值未知的情况下。

显然，Oracle 实现了一些不同的东西：
3\. 拒绝重复，但（仅）在*所有*受约束的列值都未知时接受。

我可以想办法利用 Oracle 的实现来处理用例 (2)——例如，为“未知”设置一个特殊值，并使列不可为空。但我不知道如何使用用例（1）。

换句话说，我怎样才能让 Oracle 这样做呢？

```
create table sandbox(a number(10,0), b number(10,0));
create unique index sandbox_idx on sandbox(a,b);

insert into sandbox values (1,1); -- accepted
insert into sandbox values (1,2); -- accepted
insert into sandbox values (1,1); -- rejected

insert into sandbox values (1,null); -- accepted
insert into sandbox values (2,null); -- accepted
insert into sandbox values (1,null); -- accepted

insert into sandbox values (null,1); -- accepted
insert into sandbox values (null,2); -- accepted
insert into sandbox values (null,1); -- accepted

insert into sandbox values (null,null); -- accepted
insert into sandbox values (null,null); -- accepted 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-23T22:28:37.683

尝试基于函数的索引：

在沙盒上创建唯一索引 sandbox_idx(CASE WHEN a IS NULL THEN NULL WHEN b IS NULL THEN NULL ELSE a||','||b END);

还有其他方法可以给这只猫剥皮，但这是其中之一。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-23T22:29:36.870

```
create unique index sandbox_idx on sandbox
 (case when a is null or b is null then null else a end,
  case when a is null or b is null then null else b end); 
```

功能指标！基本上我只需要确保我想忽略（即接受）的所有元组都被转换为所有空值。丑，但不丑。根据需要工作。

在另一个问题的解决方案的帮助下弄清楚了：[如何约束数据库表，以便在一列中只有一行可以具有特定值？](https://stackoverflow.com/questions/182262/how-to-constrain-a-database-table-so-only-one-row-can-have-a-particular-value-in)

所以去那里也给托尼安德鲁斯积分。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-10T02:34:10.350

我不是 Oracle 人，但如果您可以在 Oracle 的索引中包含计算列，那么这个想法应该可行。

向您的表（和您的唯一索引）添加一个附加列，计算如下：如果 a 和 b 都不是 NULL，则为 NULL，否则为表的主键。出于显而易见的原因，我将此附加列称为“nullbuster”。

```
alter table sandbox add nullbuster as 
  case when a is null or b is null then pk else null end;
create unique index sandbox_idx on sandbox(a,b,pk); 
```

我在 2002 年左右的 Usenet 组 microsoft.public.sqlserver.programming 中多次给出了这个例子。如果您在 groups.google.com 中搜索“nullbuster”一词，您可以找到讨论。您使用 Oracle 的事实并不重要。

**PS**在 SQL Server 中，这个解决方案几乎被过滤索引所取代：

```
create unique index sandbox_idx on sandbox(a,b)
(where a is not null and b is not null); 
```

您引用的线程表明 Oracle 没有为您提供此选项。它是否也没有索引视图的可能性，这是另一种选择？

```
create view sandbox_for_unique as
select a, b from sandbox
where a is not null and b is not null;

create index sandbox_for_unique_idx on sandbox_for_unique(a,b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-23T22:23:56.273

我想你可以。

只是为了记录，我留下我的段落来解释如果你在两列上有一个简单的唯一索引，为什么 Oracle 会这样：

如果列是唯一索引的，Oracle 将永远不会接受两个 (1, null) 对。

一对 1 和一个 null，被认为是“可索引”对。一对两个空值不能被索引，这就是为什么它可以让你插入尽可能多的空值，你喜欢的空值对。

(1, null) 被索引，因为 1 可以被索引。下次您尝试再次插入 (1, null) 时，索引会拾取 1 并违反唯一约束。

(null,null) 未编入索引，因为没有要编入索引的值。这就是为什么它不违反唯一约束。

# actionscript-3 - AS3 [Event(name="", type="")]，意义何在？

> ID：675402
> 
> 赞同：13
> 
> 时间：2009-03-23T22:00:59.090
> 
> 标签：actionscript-3, flashdevelop

我使用 FlashDevelop3 R2 和 Flex 3.3 SDK 进行开发，在很多情况下我必须使用嵌入元数据标签：

```
 [Embed(source="path/to/file")]
  private var Asset:Class; 
```

我很好理解以上所有内容，我很感谢它的存在，因为我不喜欢经常打开 Flash IDE。

最近在翻阅其他作者课程的时候，发现了一个有趣的元数据标签，我看不懂：

```
[Event(name="", type="")] 
```

我还没有看到我需要这个的情况，而且我真的不明白它的用途。

提前感谢您的帮助。

Brian Hodge
[blog.hodgedev.com](http://blog.hodgedev.com) [hodgedev.com](http://hodgedev.com)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-09T13:20:59.250

这些`[Event(name, type)]`声明描述了类实例可能分派的事件。

它们实际上对**代码完成**很有用- 例如，当您键入: 时`mySprite.addEventListener(`，您的代码编辑器（Flex Builder 或 FlashDevelop）将显示此对象可以调度的有意义的事件列表。

因此，您可以在代码中添加这些声明，并从更丰富的代码完成中受益。

另请注意，这适用于自定义事件类（请参阅 FlashDevelop 的新事件类模板）。

```
package mycomp {
    import flash.events.Event;

    public class MyEvent extends Event {
         public const SOME_EVENT:String = "someEvent";
         // required Event type declarations
    }
}

package mycomp {
     [Event(name="someEvent", type="mycomp.MyEvent")]
     public class MyComp extends Sprite {
     }
}

package myproject {
     import mycomp.MyComp;

     public class MyProject {
          function MyProject() {
                var mc:MyComp = new MyComp();
                mc.addEventLister( //completes: SOME_EVENT + Sprite events
          }
     }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-23T22:18:23.370

我们使用它将自定义事件绑定到我们的自定义 MXML 组件。此标记允许您从 MXML 中引用它。请参阅[文档](http://livedocs.adobe.com/flex/3/html/help.html?content=metadata_2.html)：

> `[Event(name="enableChanged", type="flash.events.Event")]`
> 
> `class ModalText extends TextArea {` `...` `}`
> 
> `<MyComp:ModalText enableChanged="handleEnableChangeEvent(event);"/>`

但是，如果您尝试引用未使用事件元标记声明的 mxml 标记上的事件，编译器会报错。

# html - 在内容管理系统的 HTML 页面中嵌入 HTML 的最佳方式是什么？

> ID：675410
> 
> 赞同：1
> 
> 时间：2009-03-23T22:02:34.593
> 
> 标签：html, wysiwyg, fckeditor, content-management

我正在为科学期刊建立内容管理系统。该系统设计有编辑者可以使用 FCKEditor 操作的内容“块”。我试图在没有编辑器的情况下在系统中以只读方式显示这些“块”。我担心的是“流氓”HTML，如果 HTML 无效，它可能会破坏页面的其余部分。我正在考虑使用*iframe*将块与页面的其余部分隔离开来。

有没有更好的方法来隔离 HTML“数据”？也许是我没有想到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T22:08:31.227

让他们在 FCKEditor 上放任何他们想要的东西，然后在将其保存到数据库之前使用[http://htmlpurifier.org/](http://htmlpurifier.org/)过滤掉所有“坏 html”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T22:06:16.643

使用 javascript 填充 div 怎么样？这样 HTML 将被完全分开处理，并且不应该伤害页面的其余部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T22:38:57.487

我认为没有理由为此使用 iframe。使用 FCK Editior 的轻量版本要好得多，只显示强斜体文本的按钮、链接和您需要的元素（如果可能的话，只显示基本的：h2、h3、h4、p 和列表）。FCK 编辑器是高度可配置的，我认为给用户编写过于复杂的 html 的能力绝不是一个好主意。排版几乎是网页设计的 90%，插入内容的人应该只插入内容，而不是样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-26T18:37:30.290

我最终使用了 iframe，因为我不想加载*n* FCKEditors。

# iis - 如何配置 IIS 以解析 .xml 文件中的 c# 代码？

> ID：675412
> 
> 赞同：1
> 
> 时间：2009-03-23T22:02:43.940
> 
> 标签：iis, iis-6

我正在尝试将 IIS 配置为解析 .xml 文件，就像解析 .aspx 文件一样。原因是我在 <script> 块中有一些 c# 代码，它会扫描一些文件夹，然后吐出动态 xml。

现在通常我只是在 .aspx 文件中执行此操作，并设置使用代码以获取 xml 数据的 .aspx URL。但是，使用代码是一个旧的 .swf 文件，它被硬编码为使用同名的 .xml 文件，我们无权访问源 .fla 文件。

我以为这很容易……但事实证明它比我想象的要困难。我已经进入 IIS 中的应用程序配置，并将 .xml 的应用程序扩展名添加为与 .aspx 相同（属性 -> 主目录选项卡 -> 配置），但我现在正在尝试中似乎缺少一些东西加载 .xml 文件什么都不做，浏览器立即返回找不到页面。

有谁知道如何让 IIS 和 .Net 框架解析我的 .xml 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-23T22:16:05.840

在 IIS 中添加配置映射后，您还必须在 web.config **(edit)**以及构建提供程序**(/edit)** 中注册 HttpHandler：

```
<configuration><sytem.web>
    <httpHandlers>
        <add path="*.xml" verb="*" type="System.Web.UI.PageHandlerFactory" validate="true"/>
    </httpHandlers>
    <compilation>
       <buildProviders>
         <add extension=".xml" type="System.Web.Compilation.PageBuildProvider"/>
       </buildProviders>
    </compilation>
</sytem.web></configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T22:08:47.730

我想我重定向会更容易。

# amazon-s3 - 使用云存储进行 404 重定向

> ID：675413
> 
> 赞同：0
> 
> 时间：2009-03-23T22:02:47.730
> 
> 标签：amazon-s3, cloud, mosso

我希望通过这个问题与使用亚马逊 S3 之类的服务有一定经验的人联系。在我的网站上，我们有一个专用的图像服务器。在这台服务器上，我们通过 Apache 进行了自动 404 重定向，因此，如果用户尝试访问不存在的图像，他们将看到一个时髦的“图像不可用”图像。

我们正在寻找将这些图像的托管移动到云存储解决方案（S3 或 Rackspace 的 CloudFiles），我想知道是否有人成功地在云存储服务上复制了这种行为，如果有，他们是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-23T22:19:52.180

一旦 Amazon 实例启动并运行，它们就像正常的托管服务器实例一样，因此您的 Apache 配置可能与您当前拥有的相同。

您唯一的问题是存储图像的位置。新的 Amazon Elastic Block Store 可以轻松基于 S3 支持的数据安装驱动器。您可以将所有图像存储在这样的卷上，并将其与您的 Apache 实例一起使用。

# java - 如何参数化扩展集合

> ID：675430
> 
> 赞同：4
> 
> 时间：2009-03-23T22:11:16.837
> 
> 标签：java, collections, parameterized, extends

我一直在尝试扩展 ArrayList 类，但没有取得多大成功。我想扩展它，并能够对其进行参数化。

所以通常你有类似的东西

```
ArrayList<SomeObject> list = new ArrayList<SomeObject>(); 
```

我想

```
MyList<SomeObject> list = new MyList<SomeObject>(); 
```

简单地扩展 ArrayList 是行不通的。

```
public class MyList extends ArrayList ... 
```

当我尝试使用它时，我得到了错误

> MyList 类型不是通用的；它不能用参数 <SomeObject> 参数化

我已经尝试过

```
public class MyList extends ArrayList<Object>
public class MyList<SubObject> extends ArrayList<Object> 
```

没有成功，如果我使用类名后面的子对象，它似乎可以工作，但由于某种原因隐藏了子对象类中的方法。

任何关于如何正确工作的想法或建议都值得赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-23T22:15:01.787

您需要为`ArrayList`的类型参数指定一个类型。对于泛型类型参数，`T`是相当常见的。由于编译器不知道 a`T`是什么，因此您需要添加一个类型参数，`MyList`以便可以传入类型。因此，您会得到：

```
public class MyList<T> extends ArrayList<T> 
```

此外，您可能需要考虑实现`List`并委托给`ArrayList`，而不是继承自`ArrayList`. “优先于类继承的对象组合。[*设计模式*第 20 页]”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T22:15:23.347

```
public class MyList<T> 
    extends ArrayList<T>
{
}

MyList<SomeObject> list = new MyList<SomeObject>(); 
```

或者

```
public class MyList
    extends ArrayList<SomeObject>
{
}

MyList list = new MyList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T22:23:53.420

您不应该扩展 ArrayList，而是扩展[AbstractList](http://java.sun.com/javase/6/docs/api/java/util/AbstractList.html)：

```
public class MyList<T> extends AbstractList<T> {
    public int size() {...}
    public T get(int index) {...}
} 
```

# iphone - UITabBar 中的自定义颜色

> ID：675433
> 
> 赞同：40
> 
> 时间：2009-03-23T22:12:46.020
> 
> 标签：iphone, objective-c

是否可以在 UITabBar 中使用自定义颜色和背景图像？我意识到苹果希望每个人都使用相同的蓝色和灰色标签栏，但是有什么方法可以自定义吗？

其次，即使我要创建自己的类似 TabBar 的视图控制器以及自定义图像，这会违反**Apple 的人机界面指南吗？**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-06T19:52:30.157

[我在Silent Mac Design](http://silentmac.com/?p=386 "静音 Mac 设计")找到了答案。

我是这样实现的：

首先制作一个 UITabBarContoller 的子类

```
// CustomUITabBarController.h

#import <UIKit/UIKit.h>

@interface CustomUITabBarController: UITabBarController {
  IBOutlet UITabBar *tabBar1;
}

@property(nonatomic, retain) UITabBar *tabBar1;

@end 
```

```
// CustomUITabBarController.m

#import "CustomUITabBarController.h"

@implementation CustomUITabBarController

@synthesize tabBar1;

- (void)viewDidLoad {
  [super viewDidLoad];

  CGRect frame = CGRectMake(0.0, 0, self.view.bounds.size.width, 48);

  UIView *v = [[UIView alloc] initWithFrame:frame];

  [v setBackgroundColor:[[UIColor alloc] initWithRed:1.0
                                               green:0.0
                                                blue:0.0
                                               alpha:0.1]];

  [tabBar1 insertSubview:v atIndex:0];
  [v release];
}

@end 
```

并在您的 Nib 文件中将 TabBar 控制器的类替换为 CustomUITabBarController。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2011-11-16T16:26:24.117

仅供参考，从 iOS 5 开始，您可以自定义 UITabBar 的各个方面，包括使用[backgroundImage](http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UITabBar_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBar/backgroundImage)属性设置其背景图像。

iOS 5 中新的[UITabBar](http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UITabBar_Class/Reference/Reference.html) “自定义外观”属性是：

```
backgroundImage 
selectedImageTintColor  
selectionIndicatorImage  
tintColor 
```

鉴于 Apple 在 iOS 5 中引入了这些方法，那么他们可能会更赞同为早期操作系统定制 UITabBar 的尝试。该[网站](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)称 Twitter 应用程序使用自定义标签栏，所以这可能是 Apple 让这样的应用程序进入 App Store 的更多原因，但不能保证！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-07-01T10:30:08.717

使用以下图像（假设 tabBar 有 5 个选项卡，如下所示）

*   ![在此处输入图像描述](https://i.stack.imgur.com/rvYw2.png)
*   ![在此处输入图像描述](https://i.stack.imgur.com/fAwaD.png)
*   ![在此处输入图像描述](https://i.stack.imgur.com/dFX4F.png)
*   ![在此处输入图像描述](https://i.stack.imgur.com/hgWvk.png)
*   ![在此处输入图像描述](https://i.stack.imgur.com/qT6LM.png)

使用“TabBar Application”模板创建一个新项目并放置以下代码。

**AppDel.h 文件的内容。**

```
#import <UIKit/UIKit.h>

@interface cTabBarAppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate> {

}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;
@property (nonatomic, retain) IBOutlet UIImageView *imgV;

@end 
```

**AppDel.m 文件的内容。**

```
#import "cTabBarAppDelegate.h"

@implementation cTabBarAppDelegate
@synthesize window=_window;
@synthesize tabBarController=_tabBarController;
@synthesize imgV = _imgV;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.tabBarController.delegate=self;
    self.imgV.frame=CGRectMake(0, 425, 320, 55);
    [self.tabBarController.view addSubview:self.imgV];
    self.tabBarController.selectedIndex=0;
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewController];
    switch (index) {
        case 0:
            self.imgV.image=[UIImage imageNamed:@"tBar1.png"];
            break;
        case 1:
            self.imgV.image=[UIImage imageNamed:@"tBar2.png"];
            break;
        case 2:
            self.imgV.image=[UIImage imageNamed:@"tBar3.png"];
            break;
        case 3:
            self.imgV.image=[UIImage imageNamed:@"tBar4.png"];
            break;
        case 4:
            self.imgV.image=[UIImage imageNamed:@"tBar5.png"];
            break;
        default:
            break;
    }
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-05-03T06:15:47.473

在 ***ViewController.m 的开头添加以下内容可能有助于设置 UITabBar 的背景图像。

```
 @implementation UITabBar (CustomImage)
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed: @"background.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-11-19T11:10:40.713

如果您想为图标（而不仅仅是背景）使用自定义颜色而不是默认的灰色和蓝色，请这样做：[http ://blog.theanalogguy.be/2010/10/06/custom-colored- uitabbar-icons/](http://blog.theanalogguy.be/2010/10/06/custom-colored-uitabbar-icons/)

基本上，您需要为每个选定的选项卡创建完整的选项卡栏图像（背景和图标和文本），并将您的 UITabBarItems 设置为无图标和无标题，并将图像作为 viewWillAppear 中的 UIImageView 插入选项卡栏：

Apple 不会介意，因为我们没有使用任何私有 API。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-25T15:19:53.207

从 iOS 7.0 开始，您可以使用*-[UIImage imageWithRenderingMode:]*和*UIImageRenderingModeAlwaysOriginal*来保留颜色：

```
// Preserve the colors of the tabs.
UITabBarController *controller = (UITabBarController *)((UIWindow *)[UIApplication sharedApplication].windows[0]).rootViewController;

NSArray *onIcons = @[ @"tab1-on", @"tab2-on", @"tab3-on" ];
NSArray *offIcons = @[ @"tab1-off", @"tab2-off", @"tab3-off" ];
NSArray *items = controller.tabBar.items;
for (NSUInteger i = 0; i < items.count; ++i) {
    UITabBarItem *item = items[i];
    item.image = [[UIImage imageNamed:offIcons[i]] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
    item.selectedImage = [[UIImage imageNamed:onIcons[i]] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];
} 
```

奇迹般有效。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-08T07:05:44.630

> 在 AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[[UITabBar appearance] setSelectedImageTintColor:[UIColor redColor]];
return YES;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-23T22:23:22.453

就 UITabBar 类而言，栏中的图标仅限于颜色：蓝色表示选中，灰色表示未选中。这是因为标签栏仅使用您提供的图标中的 alpha 值在栏上创建图像。

据我所知，酒吧本身仅限于黑色。我在文档中没有看到 UINavigationBar 上的 'tint' 属性之类的东西。

我想你可以继续创建你自己的标签栏样式类并用它做你想做的事，但我完全不知道它如何与 Apple 的 HIG 相匹配，或者他们是否会在审查过程中挑战它。

根据我的经验，如果我没有根据 HIG 使用他们的 UI 元素，Apple 评论者只会拒绝我的应用程序。当您玩的是您自己的 UI 元素时，他们可能会有不同的看法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-08-30T11:38:43.963

这里的文档说我们不能用我们的图标改变按下或选择的外观。

[https://developer.apple.com/iphone/library/documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1](https://developer.apple.com/iphone/library/documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)

它位于导航栏、工具栏和标签栏的标题图标下

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-03T14:19:31.293

它可以不添加任何子视图。

在定义标签栏的类中，将 tabBarItem 的属性设置为 ->>

```
UITabBarItem *tabBarItem1 = [[self.tabBar.tabBar items] objectAtIndex:0];
[tabBarItem1 setFinishedSelectedImage:[UIImage imageNamed:@"campaigns_hover.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"campaigns.png"]]; 
```

它是 tabBarItem 的一个属性，你可以将默认的蓝色图像更改为自定义图像。campaigns_hover.png 是选定的自定义图像，并且campaigns.png 是未选择时的自定义图像...

享受这个秘密.. :)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-09T16:07:10.507

下面的代码可帮助您将具有 RGB 值的自定义颜色添加到您的 tabBar。

```
self.tabBarController.tabBar.tintColor = [[UIColor alloc] initWithRed:0.00
                                                                green:0.62
                                                                 blue:0.93
                                                                alpha:1.0]; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-01-30T16:04:13.627

你可以在没有 的情况下这样做`-insertSubview:atIndex`，因为不需要新的 UIView。您可以在每个视图（UITabBar 及其子视图）上使用 QuartzCore 应用主题。因此，UITabBar 的背景被添加，正如我在[这里](https://stackoverflow.com/a/14606061/1695348)所描述的那样。

现在我们必须在每个 UITabBarItem 上应用图像作为它的背景：

```
 // UITabBar+CustomItem.h
    #import <UIKit/UIKit.h>
    #import <QuartzCore/QuartzCore.h>

    @interface UITabBar (CustomItem)
    -(void)setSelectedItemBackground:(UIImage *)backgroundImage;
    @end 
```

现在 .m 文件：

```
 // UITabBar+CustomItem.m

    @implementation UITabBar (CustomItem)

    #define kItemViewTag      445533  // <-- casual number
    #define kItemViewOldTag   445599  // <-- casual number different from the above

    -(void)setSelectedItemBackground:(UIImage *)backgroundImage   {
        UIView *oldView = [self viewWithTag:kImageViewItemTag];
        oldView.layer.contents = nil;  // <-- remove the previous background
        oldView.tag = kItemViewOldTag;  // <-- this will avoid problems

        NSUInteger index = [self.items indexOfObject:self.selectedItem];
        UIView *buttonView = [self.subviews objectAtIndex:index];
        buttonView.tag = kItemViewTag;
        buttonView.layer.contents = (id)backgroundImage.CGImage;  // <-- add 
        // the new background
    }

    @end 
```

您还可以更改所选图像的颜色，就像有人在[这里](https://stackoverflow.com/a/1356560/1695348)所做的那样。但我想知道的是：我可以更改所选标签的颜色吗？答案是肯定的，如下所述（以下适用于 ios 3.x/4.x，不适用于 iOS5+）：

```
 @implementation UITabBar (Custom)

    #define kSelectedLabel  334499  // <-- casual number        

    -(void)changeCurrentSelectedLabelColor:(UIColor *)color  {
        UIView *labelOldView = [self viewWithTag:kSelectedLabel];
        [labelOldView removeFromSuperview];

        NSString *selectedText = self.selectedItem.title;
        for(UIView *subview in self.subviews)  {
            if ([NSStringFromClass([subview class]) 
                      isEqualToString:@"UITabBarButton"])  {
                for(UIView *itemSubview in subview.subviews)  {
                    if ([itemSubview isKindOfClass:[UILabel class]])  {
                         UILabel *itemLabel = (UILabel *)itemSubview;
                         if([itemLabel.text isEqualToString:selectedText])  {
                              UILabel *selectedLabel = [[UILabel alloc]
                                               initWithFrame:itemLabel.bounds];
                              selectedLabel.text = itemLabel.text;
                              selectedLabel.textColor = color;
                              selectedLabel.font = itemLabel.font;
                              selectedLabel.tag = kSelectedLabel;
                              selectedLabel.backgroundColor = [UIColor clearColor];
                              [itemSubview addSubview:selectedLabel];
                              [selectedLabel release];
                         }
                    }
                }

            }
        }
    }

    @end 
```

# python - 如何在 Python 中注释掉一段代码

> ID：675442
> 
> 赞同：532
> 
> 时间：2009-03-23T22:17:57.473
> 
> 标签：python, docstring

是否有一种机制可以注释掉大块 Python 代码？

现在，我能看到的注释掉代码的唯一方法是用 . 开头的每一行`#`，或者用三引号将代码括起来`"""`：

这些问题是`#`在每一行之前插入很麻烦，并且`"""`使我想用作注释的字符串显示在生成的文档中。

阅读所有评论后，答案似乎是“否”。

* * *

## 回答 #1

> 赞同：469
> 
> 时间：2009-03-23T22:20:55.457

Python 没有这样的机制。在每行前面添加一个`#`以阻止注释。有关详细信息，请参阅[PEP 8](http://www.python.org/dev/peps/pep-0008/)。大多数 Python IDE 都支持一种机制，可以自动为您执行带有哈希符号的块注释。例如，在我机器上的 IDLE 中，它是`Alt`+`3`和`Alt`+ `4`。

**不要使用三引号；**正如您所发现的，这是用于文档字符串而不是阻止注释，尽管它具有类似的效果。如果您只是暂时注释掉一些东西，这可以作为一种临时措施。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2009-03-23T22:22:31.410

我所知道的唯一治疗方法是一个好的编辑器。对不起。

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2009-03-24T00:47:22.203

在不会被误认为文档字符串的上下文中隐藏三引号，例如：

```
'''
...statements...
''' and None 
```

或者：

```
if False: '''
...statements...
''' 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2009-03-23T22:19:25.350

没有三引号的唯一方法是添加：

```
if False: 
```

然后缩进所有代码。请注意，代码仍然需要具有正确的语法。

* * *

许多 Python IDE 可以`#`在每个选定的行上为您添加，也可以在取消注释时删除它们。同样，如果您使用[vi](http://en.wikipedia.org/wiki/Vi)或[Emacs](http://en.wikipedia.org/wiki/Emacs)，您可以为代码块创建一个宏来为您执行此操作。

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2013-03-04T07:35:21.980

在 Mac 上的 JetBrains PyCharm 中，使用`Command`+`/`来注释/取消注释选定的代码块。在 Windows 上，使用`CTRL`+ `/`。

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2009-03-23T22:33:15.333

Mx 注释区域，在[Emacs](http://en.wikipedia.org/wiki/Emacs)的 Python 模式下。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2009-10-01T21:27:50.267

至少在 VIM 中，您可以使用块可视模式（`CTRL+V`在非 Windows VIM 中）选择要插入的第一列文本，然后`#`使用以下序列在每行之前添加一个：

```
I#<esc> 
```

在块可视模式`I`移动到插入模式，光标位于其第一行的块之前。插入的文本被复制到块中的*每一*行之前。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2010-09-16T17:48:52.490

在[vi](http://en.wikipedia.org/wiki/Vi)中：

*   转到块的顶部并用字母 a 标记它。
*   转到块的底部并用字母 b 标记它

然后做

```
:'a,'b s!^!#! 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2011-03-07T06:12:21.810

```
comm='''
Junk, or working code 
that I need to comment.
''' 
```

您可以替换`comm`为您选择的变量，该变量可能更短，易于触摸，并且您知道不会（也不会）出现在您的程序中。例子：`xxx`, `oo`, `null`, `nil`.

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2010-05-01T03:30:58.527

我在 Windows 机器上使用[Notepad++](http://en.wikipedia.org/wiki/Notepad++)，选择你的代码，输入`CTRL-K`. 要取消注释，请选择代码并按`Ctrl`+ `Shift`+ `K`。

顺便说一句，Notepad++ 可以很好地用作 Python 编辑器。具有自动完成、代码折叠、语法高亮等功能。它是免费的，就像演讲和啤酒一样！

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2012-05-25T15:41:41.220

是的，有（取决于您的编辑器）。在[PyDev](http://en.wikipedia.org/wiki/PyDev)中（以及在带有 PyDev 的[Aptana Studio](http://en.wikipedia.org/wiki/Aptana#Aptana_Studio)中）：

*   `Ctrl`+ `4`- 评论选中的区块

*   `Ctrl`+ `5`- 取消注释选中的块

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2013-01-10T20:18:07.680

在使用 Visual Studio 的[Python 工具的 Visual Studio](http://pytools.codeplex.com/)中，可以用`Ctrl`+ `K`、`Ctrl`+`C`注释掉块，用`Ctrl`+ `K`、`Ctrl`+取消注释`U`。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2012-06-09T19:00:46.690

在[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29) + [PyDev](http://en.wikipedia.org/wiki/PyDev)中，Python 块注释类似于 Eclipse Java 块注释；选择要评论的行并使用`Ctrl`+`/`进行评论。要取消注释已注释块，请执行相同操作。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2009-03-23T22:31:24.773

注释掉 Python 代码（理解为解释器忽略的代码）的唯一机制是[#](http://docs.python.org/reference/lexical_analysis.html#id2)。

正如您所说，您还可以使用解释器不会忽略的[字符串文字](http://docs.python.org/reference/lexical_analysis.html#string-literals)，但与程序执行完全无关。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-02-13T03:20:04.300

在使用[PyDev的](http://en.wikipedia.org/wiki/PyDev)[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)中，您可以选择一个代码块并按+ 。`Ctrl``#`

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-03-24T07:35:32.003

三引号对我来说是可以的。您可以将 ''' foo ''' 用于文档字符串，将 """ bar """ 用于注释，反之亦然，以使代码更具可读性。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2012-01-18T12:20:09.093

在 Eric4 上有一个简单的方法：选择一个块，键入`Ctrl`+`M`来评论整个块或`Ctrl`+ `alt`+`M`取消注释。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-01-19T22:56:46.227

另一个基于编辑器的解决方案：Emacs 中的文本“矩形”。

突出显示要注释掉的代码，然后 Cxrt #

取消注释代码：突出显示，然后是 Cxrk

我每天都用这个。（当然，分配给热键。）

这种强大的正则表达式搜索/替换是我容忍 Emacs 的其他“怪癖”的原因。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-03-24T07:22:26.013

使用像[SciTe](http://en.wikipedia.org/wiki/SciTE)这样的好编辑器，选择您的代码，按`Ctrl`+`Q`并完成。

如果您没有支持块注释的编辑器，您可以在代码块的开头和结尾使用三引号字符串来“有效地”将其注释掉。虽然这不是最佳做法。

# c# - 您可以将 LINQ 用于内存对象而不是 SQL Server 查询来提高性能吗？

> ID：675453
> 
> 赞同：4
> 
> 时间：2009-03-23T22:22:37.417
> 
> 标签：c#, sql, linq

我们一直在开发一个 DB Web 应用程序，它不断地查询一个 SQL 存储的对象（大约 80,000 个），这些对象在层次结构中相互关联。（即许多对象的 parentid 与同一张表中的另一个对象相关）

我一直认为将整个对象树加载到内存中并使用 LINQ 查询对象可能是一种更好的方法。这些对象大多是1-5K

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T22:34:29.790

“LINQ”包括LINQ to Objects、LINQ to SQL等。你当然可以在内存中查询，但也许你应该等到你做完性能分析后再优化。你可能会优化错误的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T22:35:47.930

临时将多达 250 兆字节的数据加载到客户端内存中似乎不是一个好主意。如果你有它的内存，你可以使用 LINQ to Object 并保存数据库往返。

问题是您的数据是分层的，您必须获取一行，检查它，然后检索相关的行，这会导致很多往返。

您可以使用延迟加载在程序运行期间将越来越多的行检索到客户端内存中，并在工作集稳定时在内存中执行越来越多的查询。但这只有在行被多次访问而不是一次或两次访问时才有帮助。

另一种解决方案可能是使用公共表表达式创建递归视图或存储过程，以检索与给定行相距一定距离的相关行。

# windows - 将系统剪贴板中的函数粘贴到 gVIM

> ID：675463
> 
> 赞同：1
> 
> 时间：2009-03-23T22:27:04.893
> 
> 标签：windows, vim, clipboard

以下是Windows系统剪贴板的内容

*   :function CurrentLineLength
*   : len = strlen(getline("."))
*   : 返回 len
*   :endfunction

我点击冒号然后控制 r 然后按 shift 8 粘贴系统剪贴板的内容。

我按回车键，vim 用 **E488 返回：尾随字符**

我在那里看到一些 ^M 字符，删除它们没有帮助。我确实知道我可以将函数粘贴到 .vim 文件中并以这种方式读取它们，因此它不会造成严重后果，但是当我通过一些 vim 脚本示例工作时，这将是很好的。

函数的输入方式是否有什么特别之处，或者是否可以从系统剪贴板中粘贴它们？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T23:00:00.883

我不确定将多行粘贴到命令模式，但是您可以通过简单地将函数放入寄存器并执行寄存器（与宏相同）来实现相同的目的。

此外，Vim 似乎不喜欢你粘贴的那个函数，我在下面做了一些更改。如果您将以下内容复制到系统剪贴板，然后`@*`在正常模式下按，它可以工作。

```
:function CurrentLineLength()
: let len = strlen(getline("."))
: return len
:endfunction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T22:36:12.737

Vim 在命令模式下的回车应该没有任何问题（这就是 ^M 字符）。我猜您要粘贴的代码中还有其他一些字符 - 如果您从网页粘贴，这很可能是问题所在。尝试将剪贴板的内容放入文件中，看看它是否真的是您所期望的（包括所有空白字符）。

# sql - SQL：选择许多记录到一个新表中

> ID：675465
> 
> 赞同：0
> 
> 时间：2009-03-23T22:27:53.630
> 
> 标签：sql

我想根据数字 1 到 20 从一个表中选择至少 20 条记录到一个新表中。

```
select * into blah from foo where fubar = '1' 
```

我如何在该语句中添加 1 到 20？

编辑：

```
select * into blah from foo where fubar = '1' and where fubar = '2' and where fubar = '3' 
```

对不起。让我看看我能不能说得更清楚。基本上我想根据 fubar = 1 到 20 选择 20 条记录。我尝试使用“and where”，但出现语法错误。

eidt：如果 fubar 是 nvarchar(11) 会怎样

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-23T22:32:16.207

*如果您的第一个表名是**“foo”**并且新表名是**“blah”***

```
SELECT * INTO blah FROM foo WHERE fubar BETWEEN 1 AND 20 
```

或者

```
SELECT * INTO blah FROM foo WHERE fubar >= 1 AND fubar <=20 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-23T22:36:47.413

```
SELECT * INTO blah FROM foo WHERE fubar BETWEEN 1 AND 20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T22:32:47.440

两种俗气的方法都涉及更改 where 子句：

如果 fubar 是数字列，请尝试 where fubar >0 和 fubar < 20 如果 fubar 是字符列，请尝试 where fubar in ('1','2','3', ... '19','20')

我相信有更有效的通用方法，但这可能会在特定情况下帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T22:31:00.813

```
select top 20 * into blah from foo where fubar = '1' 
```

我不确定你在问什么。

编辑：

```
select top 20 * into blah from foo where fubar IN ('1','2',...'20') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-23T22:32:14.883

您只是想插入前 20 条记录吗？

```
SELECT TOP 20 *
INTO
    blah
FROM
    foo
WHERE
    fubar = '1' 
```

还有很多方法可以[参数化 TOP 子句](https://web.archive.org/web/20150520123828/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-use-a-variable-in-a-top-clause-in-sql-server.html)（示例适用于 SQL Server）。

**编辑：**

为了响应您的更新，如果 fubar 列是数字，那么它就是

```
SELECT * INTO blah FROM foo WHERE fubar BETWEEN 1 AND 20 
```

如果 fubar 是一个字符字段但只包含数字，那么您可以将该字段转换为 Integer 并仍然使用 BETWEEN 子句

```
SELECT * INTO blah FROM foo WHERE CAST(fubar AS INT) BETWEEN 1 AND 20 
```

这适用于 SQL Server

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-23T22:34:50.493

这取决于您使用的数据库。对于 MS SQL Server，它将是

```
SELECT TOP 20 * into blah from foo order by fubar 
```

对于甲骨文

```
SELECT * into blah from foo  order by fubar where rownum()<=20 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-23T22:45:20.437

将您的“与”更改为“或”：

```
select * into blah 
from foo 
where fubar = 1 
OR fubar = 2 
OR fubar = 3 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-06-23T04:55:43.067

如果 fubar 确实是 1 到 20 整数（或其他数字类型），但存储在 nvarchar() 中，那么我会像 @TStamper 所说的那样使用 BETWEEN 以及 @Russ Cam 建议使用 CAST（fubar as Int），如果你是在 MSSQL 或 MySQL 中。

不像你的意思，但是......如果你说 fubar 可能是一个 nvarchar，并且你真的希望有经过测试的非数字值，那么 IN('1','x','5679fjdk' 等。 ..) 可能需要。

# linux - 在 wine (linux) 下运行的 windows 应用程序的屏幕截图

> ID：675471
> 
> 赞同：2
> 
> 时间：2009-03-23T22:29:46.447
> 
> 标签：linux

正如标题所说，我想截取一个在wine下运行的窗口应用程序的截图。不是整个桌面。C 将是首选，但也可以使用 java 或 Pascal。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T23:02:30.410

Linux shell 的一种可能方式：

*   使用 xwininfo 查找我们要查找的窗口 id
*   使用导入转储屏幕截图
*   （阅读 man import 和 man xwininfo 了解更多信息）

以酒为例：

```
import -window `xwininfo -root -children | grep "Wine" | awk '{print $1}'` outfile.pcx 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T22:42:14.420

使用 imagemagick 的导入命令抓取窗口并将其转储到文件中......

[进口文件](http://www.imagemagick.org/script/import.php)

将调用包装在 C 系统命令中

```
 system("import -window (your window name) capture.png"). 
```

然后，您可以使用任何标准图像加载库从文件中访问图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T23:37:00.203

You could duplicate the functionality of ImageMagick's import command using MagickWand (C API) or Magick++ (C++ API), but calling import directly via system() as suggested by justinhj is likely the simplest approach if you don't mind distributing import with your software.

# javascript - 雅虎事件.stopEvent

> ID：675472
> 
> 赞同：1
> 
> 时间：2009-03-23T22:30:37.773
> 
> 标签：javascript, dom-events, yui

我试图阻止 JavaScript 事件继续传播，使用 YUI。以下是一些最小的 HTML 和一些最小的 JavaScript，它们演示了这个问题：

HTML：

```
<a href="#foo" onClick="fooClickTest()" id="foo">foo</a>&nbsp;
<a href="#bar" id="bar">bar</a>&nbsp; 
```

JavaScript：

```
function fooClickTest(e) {
    alert('fooClickTest');
    YAHOO.util.Event.addListener('bar', 'click', barClickTest1);
    YAHOO.util.Event.addListener('bar', 'click', barClickTest2);
    YAHOO.util.Event.addListener('bar', 'click', barClickTest3);
    YAHOO.util.Event.preventDefault(e);
}

function barClickTest1(e) {
    alert('barClickTest1');
    YAHOO.util.Event.preventDefault(e);
}

function barClickTest2(e) {
    alert('barClickTest2');
    YAHOO.util.Event.preventDefault(e);
    YAHOO.util.Event.stopEvent(e);
// Also tried:
//  YAHOO.util.Event.stopPropagation(e);
// and:
//        if (e.stopPropagation) {
//            e.stopPropagation();
//        } else {
//            e.cancelBubble = true;
//        }
} 
```

我期望发生的是用户可以单击`foo`添加三键处理程序，然后单击`bar`. 然后，用户将看到两个警报，`barClickTest1`并且`barClickTest2`。相反，会出现所有三个警报。`YAHOO.util.Event.stopEvent(e)`不符合我的预期，即阻止事件传播到`barClickTest3`.

我已经在 Firefox 3.0.7 和 Safari 3.2.1 中测试了我的代码。正如您在上面看到的，我也尝试过`YAHOO.util.Event.stopPropagation(e)`and `e.stopPropagation()`。他们都没有成功。

这显然是一个人为的例子，尽管它确实证明了这个问题。在真正的解决方案中，我只会在满足某些条件时才阻止事件传播。

我对 JavaScript 事件的理解是不是一团糟？我如何实现我的目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-24T04:47:45.603

这不像您预期​​的那样工作，因为：

*   [`YAHOO.util.Event.preventDefault()`](http://developer.yahoo.com/yui/docs/YAHOO.util.Event.html#method_preventDefault)只是告诉浏览器不要执行与元素关联的默认操作，在这种情况下，导航到`href`锚点上的属性。
*   [`YAHOO.util.Event.stopPropagation()`](http://developer.yahoo.com/yui/docs/YAHOO.util.Event.html#method_stopPropagation)取消事件冒泡并触发父元素上的事件处理程序。
*   [`YAHOO.util.Event.stopEvent()`](http://developer.yahoo.com/yui/docs/YAHOO.util.Event.html#method_stopEvent)只需调用`preventDefault`and `stopEvent`。

如果不编写额外的代码，就无法阻止单个元素上的某些事件侦听器触发，即使可以，也无法保证触发事件侦听器的顺序。

您需要将代码重写为单个事件处理程序，以便能够控制与您的第三次单击处理程序关联的代码是否将执行。

# c# - 我可以给 GroupTemplate 或 ItemTemplate 编号吗？

> ID：675474
> 
> 赞同：2
> 
> 时间：2009-03-23T22:31:01.140
> 
> 标签：c#, asp.net, listview, paging

我想使用 GroupTemplate 将项目列表分成组。但是，我需要按顺序对每个组进行编号，以便我可以链接到它们并实现一些 JS 分页。我绑定到一个 IEnumerable

这是一些伪代码。我希望输出看起来像这样：

```
<a href="#group1">Go to Group 1<a>
<a href="#group2">Go to Group 2<a>
<a href="#group3">Go to Group 3<a>

<ul id="group1">
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
</ul>
<ul id="group2">
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
</ul>
<ul id="group3">
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
</ul> 
```

使用 GroupTemplate 和 ItemTemplate 在 ListView 中是否容易做到这一点？

```
<asp:ListView ID="lv" runat="server" GroupPlaceholderID="groupPlaceholder">
    <LayoutTemplate>
        <asp:PlaceHolder ID="groupPlaceholder" runat="server"></asp:PlaceHolder>
    </LayoutTemplate>
    <GroupTemplate>
        <ul id="<!-- group-n goes here -->">
            <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
        </ul>
    </GroupTemplate>
    <ItemTemplate>
        <li>Item</li>
    </ItemTemplate>
</asp:ListView> 
```

我可以从数据源和基本数学获取顶部链接的组数，但是如何将**id="groupN"**数字输入模板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T20:58:31.370

我不认为你可以 DataBind id，所以我可能会使用隐藏字段，让 JQuery 计算它们，或者使用 CssClass。您可以使用`Container.DataItemIndex`来获取您的号码。

编辑：只需将其更改`ul`为 runat="server"，ASP.NET 就会以臭名昭著的 INamingContainer 格式为您生成一个唯一的 ID。这也将包括一个索引，尽管它类似于`lv_ctrl0_group`, 并且是一个实现细节。

您可以将处理程序挂接到`ul`的 Init 事件并为其附加一个数字，使其类似于`lv_ctrl0_group1`. 我不认为您可以很容易地摆脱预先添加的 INamingContainer 的东西，这可能会破坏任何 IPostDataHandler 控件。

```
<script runat="server">
    void Group_Init(object sender, EventArgs e) {
       ((Control)sender).ID += groupId++.ToString();
    }
    int groupId = 0;
</script>

<asp:ListView id="lv" runat="server" GroupItemCount="3">
    <LayoutTemplate>
        <asp:PlaceHolder ID="groupPlaceHolder" runat="server" />
    </LayoutTemplate>
    <GroupTemplate>
        <ul id="group" runat="server" oninit="Group_Init">
            <asp:PlaceHolder ID="itemPlaceHolder" runat="server"/>
        </ul>
    </GroupTemplate>
    <ItemTemplate>
        <li>Item</li>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T00:25:02.223

在您的 aspx 文件中：

```
<GroupTemplate>
  <ul id='<%# "group"+GroupNumber %>'>
    <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
  </ul>
</GroupTemplate> 
```

在您的代码后面（假设 C#）：

```
int _GroupNumber=0;

protected string GroupNumber
{
   get { return (++_GroupNumber).ToString(); }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-28T12:18:49.990

上面 Keltex 的解决方案只需稍作改动即可；使用**<%=**而不是**<%#**，

**<%#**不起作用，因为 GroupTemplate 不支持数据绑定

# html - 最后几个html标签没有呈现？

> ID：675477
> 
> 赞同：0
> 
> 时间：2009-03-23T22:31:27.130
> 
> 标签：html, jsp, struts2

一个有趣的问题，我用谷歌搜索过，也找不到任何参考，也许是因为我自己对原因太模糊了。

我有一个从 struts 2 操作运行的简单 jsp 页面。它的 javascript 相当繁重，但它是我公司 Intranet 上的一个内部应用程序，所以这不是一个大问题。

到目前为止一切看起来都很正常，对吧？但有趣的是，此页面上的最后几个标签无法呈现。这适用于我尝试过的所有浏览器（IE、FF、Chrome）。

我所说的不渲染的意思是当您查看源代码时它们根本不存在！更糟糕的是，在 IE 中，实际上将半个标签声明作为文本打印在页面底部。都很奇怪。

但是更奇怪的是，如果我在`<br />`标签后面放了几个标签 `</html>`，那么所有浏览器都会渲染到`</html>`标签之外，但仍然会切断最后几个`<br />`'s。

有没有人听说过这样的事情？我什至不知道从哪里开始故障排除！我知道我的描述含糊不清，但这只是因为我自己对此有点含糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T22:37:00.330

如果“查看源代码”没有向您显示标签，那么这不是渲染问题，而是服务器或网络问题，因为内容没有被传递到浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T00:52:34.937

对我来说，这听起来像是一个缓冲区刷新问题。您是否有任何过滤器可能会在 html 到达浏览器之前对其进行缓冲？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T22:36:40.050

听起来你在某处有一个未闭合的引号。或类似的东西。像这样的东西甚至会弄乱源视图，因为某些浏览器不会显示它们在源视图中的套接字中接收到的确切字节流（我知道 IE 曾经这样做过）。尝试使用 wget 或 telnet 客户端或类似的东西执行 GET，看看会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T22:43:28.537

我们应该看到你的jsp的代码来回答。我怀疑jsp中有一个未闭合的标签或属性的未闭合引号 - 正如DrJokepu所说 - 在jsp中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T00:44:50.290

那是我第一次听说 IE 的行为方式与其他浏览器相同。意外地...

但是说真的，html没有错误吗？

我建议使用 Firefox 的**html 验证器**扩展来显示 html 是否产生任何错误或警告。

某处肯定有错误，但没有代码就不可能说出它是什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-15T15:56:37.460

前段时间我遇到了一个网站被“切断”的问题，同样，我通过快速破解解决了这个问题，但从来没有一个合适的解决方案。对我来说，归结为 Web 服务器似乎需要页面的内容长度才能正确呈现。当我缓冲输出并添加内容长度时，页面将完全加载。但不同的技术——这是一个基于 Perl CGI 构建的应用程序，在 Apache 2.2 上运行。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-03-24T02:41:35.000

感谢大家的帮助，但不幸的是，这些似乎都没有帮助。我找到了一种解决方法，因为它不是一个关键的应用程序，它只需要这样做。

再次感谢

# sql-server - 索引 varchar(max) 字段后如何使用散列计算列？

> ID：675480
> 
> 赞同：0
> 
> 时间：2009-03-23T22:32:42.010
> 
> 标签：sql-server, sql-server-2005, indexing

我创建了一个 varbinary 类型的计算列并引用了一个 varchar(max) 字段。现在，我如何使用或调用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T20:29:10.677

```
SELECT
    computedcolumn
FROM
    table 
```

[对于索引，请在CREATE INDEX](http://msdn.microsoft.com/en-us/library/ms188783(SQL.90).aspx)语句中查找“计算列” 。有确定性的规则，不超过 900 字节等。

这是你想要的吗？

# sql-server - SQL Server 的第一步

> ID：675504
> 
> 赞同：1
> 
> 时间：2009-03-23T22:39:29.590
> 
> 标签：sql-server

我已经与 Oracle 合作多年（非常喜欢它，而且还会持续很多年），我想了解 SQL Server。我已经安装了 SQL Server Express。

任何人都可以提供一些使用它的线索吗？例如：

*   Oracle 或 mysqladmin 上是否有类似 sql*plus 之类的命令？
*   哪些是超级用户的名字？他们的默认密码是什么？
*   哪些是最重要的元数据表？用于查询现有表、索引等。
*   对查询语言的任何参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-29T23:20:19.337

免责声明：我为 Toad 的制造商 Quest Software 工作。

如果您来自 Oracle 环境，您可能已经习惯了 Toad。为什么不使用 Toad for SQL Server？现在有 v4.5 的免费测试版：

[http://www.toadsoft.com/toadsqlserver/toad_sqlserver.htm](http://www.toadsoft.com/toadsqlserver/toad_sqlserver.htm)

您还可以使用我们的免费 SQL Server 社区门户，其中包含教程和 wiki 文章：

[http://sqlserverpedia.com/](http://sqlserverpedia.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T00:06:37.493

Some things I found useful doing the same switch ...

```
ORA:  select table_name from dba_tables 
MSSS: select name from sysobjects where type = 'U'
      (select distinct type from sysobjects -- I found it very important to know what
 each magic value represents)

ORA:   select * from v$session
MSSS:  select * from master..sysprocesses

ORA:   select * from dba_users
MSSS:  Does not directly translate.  Google the terms DB user and DB logon.  Take a 
look at sp_change_users_login and understand why this Stored Proc exists (for me this
 was the path to understanding the difference)
       select * from sysusers
       select * from master..syslogins

MSSS: Select * from systypes  -- major help in resolving the 'magic numbers' in MSSS 

data dictionary.

There are 3 system databases Master, Model and MSDB. (more in 2005, 2008 but 3 v. important to know) 
  Master is similar to the SYS schema.  
  Model is a template; set values in here you want any new DB to inherit.  
  MSDB holds detail of scheduled jobs, etc.

```

1 thing I wish I'd known earlier :) Prefixing a Stored Proc with sp_ and placing it in the Master DB allows it to bve called from any other DB.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-23T22:44:20.797

Sql*plus - 您将获得 Management Studio，它基本上相当于 Toad。图形查询编辑器/查看器（以及更多）。

您的默认用户是 sa。您决定安装时的密码。

您最好使用 GUI 来了解元数据表 - 有一棵树，其中包含所有约束、表、过程、触发器等。只需浏览并使用“脚本到”命令（关闭右键菜单）要生成如果您实际键入它们，您将键入创建它们的 sql，我发现在使用 GUI 提供的向导完成这些任务后，学习做什么是很强大的。

该语言很像 Oracle，我发现最大的区别是连接语法 - 如果您使用 (+) 语法，则将其丢失并使用 ansi '右外连接' 样式代替，它是 SQLServer 唯一理解的一种。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T22:48:08.370

sqlplus 的等价物是 osql。

通常有一个名为 sa 的用户，但可以在安装过程中给出密码。如果启用了 SQL Server 身份验证模式。

您可以使用以下命令查看带有元数据的可用视图：

```
SELECT
  TABLE_NAME
FROM
  INFORMATION_SCHEMA.Views
WHERE
  TABLE_SCHEMA = 'INFORMATION_SCHEMA'
ORDER BY
  TABLE_NAME; 
```

查找 T-SQL 以了解可在查询中使用的内置函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T09:49:45.253

在线书籍（应该与 SQL 一起安装，否则请参见[此处](http://msdn.microsoft.com/en-us/library/ms130214.aspx)），是我所知道的任何 Microsoft 产品的最佳文档（或者至少在 SQL2000 之前，我没有做过太多 SQL）。

# asp.net - 能够通过 .exe 发送电子邮件，但不能通过 ASP.NET？

> ID：675507
> 
> 赞同：0
> 
> 时间：2009-03-23T22:41:44.093
> 
> 标签：asp.net, iis, email

我正在尝试将电子邮件作为 Web 应用程序的一部分发送到外部地址。使用在服务器上运行的简单可执行文件时，我可以很好地发送电子邮件：

```
private void button1_Click(object sender, EventArgs e)
    {
        MailMessage message = new MailMessage(welcomeMessageFrom, toAddress, welcomeMessageSubject, welcomeMessageSubject);
        SmtpClient emailClient = new SmtpClient("mail.sortuv.com");

        System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential(username, password);
        emailClient.UseDefaultCredentials = false;
        emailClient.Credentials = SMTPUserInfo;
        emailClient.Send(message);
    } 
```

但是，从 ASP.NET 页面尝试相同的代码会出现以下异常：

```
Mailbox unavailable. The server response was: 5.7.1 Unable to relay for <user's email> 
```

我是 IIS 新手，但您对如何调试有什么建议吗？

**更新**：我还必须为用户指定域。仍然不确定为什么没有它的常规 .exe 是可以的。希望这可以帮助某人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T22:49:18.600

似乎是一个凭证问题。正常的 exe 在您的帐户下运行。ASP.NET 应用程序在 Windows Server 的 NETWORK SERVICE 和 Windows XP 的 ASPNET 下运行。您必须使用其他凭据才能从 ASP.NET 成功发送电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T22:48:32.737

尝试添加

```
emailClient .DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T15:10:09.663

您是否设置了任何与邮件参数相关的 web.config？IIRC，web.config 将覆盖您的代码设置。

此外，您可以做的其他事情是启用日志记录，以实际查看 SmtpClient 发送的内容。

您需要在 .config 文件中添加一些值。这是一个例子：

```
 <configuration>
    <system.diagnostics>
    <trace autoflush="true" />

    <sources>

      <source name="System.Net" >
        <listeners>
          <add name="MyTraceFile"/>
        </listeners>
      </source>

      <source name="System.Net.Sockets">
        <listeners>
          <add name="MyTraceFile"/>
        </listeners>
      </source>

    </sources>

    <sharedListeners>
      <add
        name="MyTraceFile"
        type="System.Diagnostics.TextWriterTraceListener"
        initializeData="System.Net.trace.log"                />
    </sharedListeners>

    <switches>
      <add name="System.Net" value="Verbose" />
      <add name="System.Net.Sockets" value="Verbose" />
    </switches>
 </configuration> 
```

这是一个包含更多信息的链接： http: [//systemnetmail.com/faq/4.10.aspx](http://systemnetmail.com/faq/4.10.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-25T17:49:29.990

这是 IIS7 的吗，因为我有一个类似的问题，我必须在服务器上启用 smtp 服务

并在那里为每个域设置邮件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T20:54:31.027

谢谢大家的帮助，我刚刚想通了。我必须指定域：

```
SmtpClient emailClient = new SmtpClient(servername);

            System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential(name, pass);
            SMTPUserInfo.Domain = domain; // i.e. "foo.com"
            emailClient.UseDefaultCredentials = false;
            emailClient.Credentials = SMTPUserInfo;
            emailClient.Send(message); 
```

# hibernate - 如何在 grails 脚本中建立 Hibernate 会话

> ID：675514
> 
> 赞同：4
> 
> 时间：2009-03-23T22:43:44.213
> 
> 标签：hibernate, grails, groovy, gant

以下 grails 脚本：

```
// Import.groovy

includeTargets << grailsScript("Bootstrap")

target(main: "Import some data...") {
    depends(bootstrap)

    def Channel = grailsApp.classLoader.loadClass("content.Channel")

    def c 

    // works: saving a valid Channel succeeds
    c = Channel.newInstance(title:"A Channel", slug:"a-channel", position:0).validate()

    // doesn't work: saving an invalid Channel fails with exception
    c = Channel.newInstance().validate()

    // this line is never reached due to exception
    println(c.errors)

}

setDefaultTarget(main) 
```

失败，但有以下例外：

> 执行脚本导入时出错：org.hibernate.HibernateException: No Hibernate Session bound to thread，并且配置不允许在此处创建非事务性会话

在无效域对象上调用 validate() 时。我想在验证失败时输出错误消息，但似乎我需要建立一个休眠会话才能这样做。任何人都知道克服这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-24T18:12:16.107

找到为您设置休眠会话的[RunScript.groovy](http://naleid.com/blog/2008/03/31/using-gant-to-execute-a-groovy-script-within-the-grails-context-updated/)，然后运行您指定为参数的脚本。我不得不将源代码从 Gant 脚本（上图）更改为：

```
// Import.groovy

def Channel = grailsApp.classLoader.loadClass("content.Channel")

def c 
c = Channel.newInstance(title:"A Channel", slug:"a-channel", position:0).validate()
c = Channel.newInstance().validate()
println(c.errors) 
```

我可以像这样运行它：

> $> grails 运行脚本脚本/Import.groovy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-02T10:59:53.960

我正在做这样的事情，它对我有用......

```
// Import.groovy

includeTargets << grailsScript("Bootstrap")

target(main: "Import some data...") {
    depends(bootstrap)

    // added this ------------------------------------------------------
    def sessionFactory = appCtx.getBean("sessionFactory")
    def session = SessionFactoryUtils.getSession(sessionFactory, true)
    TransactionSynchronizationManager.bindResource(
        sessionFactory, new SessionHolder(session))
    // added this ------------------------------------------------------

    def Channel = grailsApp.classLoader.loadClass("content.Channel")

    def c 

    // works: saving a valid Channel succeeds
    c = Channel.newInstance(title:"A Channel", slug:"a-channel", position:0).validate()

    // doesn't work: saving an invalid Channel fails with exception
    c = Channel.newInstance().validate()

    // this line is never reached due to exception
    println(c.errors)

}

setDefaultTarget(main) 
```

# sql-server - Sql 存储过程

> ID：675517
> 
> 赞同：0
> 
> 时间：2009-03-23T22:44:41.170
> 
> 标签：sql-server

我正在尝试编写一个存储过程，这就是我到目前为止所拥有的

```
Create procedure sp_Create_order
@P_nafn varchar(50),
@P_fj int,
@P_sótt datetime,
@F_kt varchar(10),
@V_nr int,
@L_id int

as 
begin
    set nocount on

if exists(
   select * from Lotur
   where L_id=@L_id and
   @P_sótt between L_hefst and L_pfrest
)
INSERT INTO Pantar(P_nafn, P_fj, P_sótt, F_kt, V_nr, L_id) 
VALUES (@P_nafn, @P_fj, @P_sótt, @F_kt, @V_nr, @L_id)
end 
```

但我收到这些错误

> 消息 102，级别 15，状态 1，过程 sp_Create_order，第 14 行“”附近的语法不正确。
> 
> 消息 102，级别 15，状态 1，过程 sp_Create_order，第 15 行“”附近的语法不正确。

在这些线上

```
select * from Lotur
where L_id=@L_id 
```

和

`@P_sótt`,`L_hefst`并且`L_pfrest` 都是日期，我试图提出一个条件，即除非`@P_sótt`等于或介于`L_hefst`和之间，否则不应插入任何内容`L_pfrest`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T23:01:14.220

*   请为您的变量使用有意义的名称
*   不要为上面的每一件事都创建 sp
*   将查询修改为 SELECT L_ID NOT SELECT *
*   至于错误，可能你打错了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:05:34.317

首先，我不建议在您的存储过程前加上**sp_**。[性能](http://www.sqlmag.com/articles/index.cfm?articleid=23011&)至少是它是一个坏主意的一个原因。

你的存储过程为我编译好了。另一个建议是使用

```
if exists (
   select 1 
   from 
       Lotur
   where 
       L_id= @L_id 
       and @P_sótt between L_hefst and L_pfrest
) 
```

与`SELECT *`. 您在编译或尝试使用时遇到错误了吗？

**编辑：**

为了回应您关于引发错误的帖子，您可能需要查看[RAISERROR](http://msdn.microsoft.com/en-us/library/ms178592.aspx)。这是一个[如何在存储过程中使用它的示例](http://www.sqlteam.com/article/handling-errors-in-stored-procedures)

# forms - ListBox.DataSource 的奇怪问题

> ID：675518
> 
> 赞同：9
> 
> 时间：2009-03-23T22:44:48.300
> 
> 标签：forms, c#-3.0, listbox, datasource

我正在编写一个 Windows 应用程序并使用 Listbox 控件。我正在使用 Visual Studio C# 2008 Express Edition 进行开发。

我有一个看起来像这样的数据对象

```
public class RootObject
{
   public List<SubObject> MySubObjects{ get; set;}
} 
```

我的表单上有一个 ListBox，还有一个属性“MyRootObject”，显然它包含一个 RootObject。当控件初始化时，我设置：

```
_listBox.DataSource = MyRootObject.MySubObjects; 
```

现在，当表单加载时，我调试并看到 DataSource 设置正确。但什么都没有显示。我已经覆盖了 SubObject 的 ToString() 方法，它甚至没有被调用。我尝试将 _listBox.DisplayMember 设置为 SubObject 的属性，以查看那里是否存在问题，但仍然没有。在设置数据源后，我尝试调用 _listBox.Update() 和 _listBox.Refresh()，但仍然没有爱。DataSource 拥有所有数据......它只是拒绝显示它。

所以在调试时，我想知道WTF，我决定就这样做

```
_listBox.DataSource = new List<SubObject>{ new SubObject(), new SubObject() }; 
```

果然，这行得通，我看到我的列表框中列出了两件事。

所以，真的很好奇，我决定尝试复制对象列表并将其放入列表框中，如下所示：

```
_listBox.DataSource = MyRootObject.MySubObjects.ToArray(); 
```

这行得通！这是我现在的问题的一种解决方法……但非常烦人。有谁知道为什么我需要基本上复制这样的对象列表才能使其工作，而不仅仅是设置 _listBox.DataSource = MyRootObject.MySubObjects; ? 同样，DataSource 在设置后无论哪种方式都具有所有正确的数据......它只是在复制数据时，它实际显示，而当它不是时，它不会显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T00:51:42.400

```
((CurrencyManager)_listBox.BindingContext[_listBox.DataSource]).Refresh(); 
```

Sux0r 我知道，但这有效。（最初在[这里](http://www.gamedev.net/topic/446341-listboxdatasource-not-updating/)找到答案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T03:57:55.177

在我的脑海中，这是因为`ListBox.DataSource`属性必须包含实现`IList`接口的东西。你的泛型`List<SubObject>`没有实现`IList`；它实现`IList<T>`（在`System.Collections.Generic`命名空间中）。`Array`另一方面，对象确实继承自`IList`，因此通过这种对象传递数据是可行的。

您可以尝试从您的对象中拉出一个`Enumerator`（也实现`IList`）`List<SubObject>`并将其插入。如果它有效，那么我描述的问题就是您的问题。如果没有，那我就是在胡说八道。

如果这确实是问题，我很惊讶推入不受支持的对象不会引发异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T08:14:41.617

到目前为止，我知道，每当您想将集合设置为

```
[ComboBox,ListBox].DataSource 
```

您必须设置 DisplayMember 和 ValueMember。DisplayMember 和 ValueMember 填充了集合中分配给列表框/组合框的类的属性名称。前任。

```
//Populate the data
RootObject root = new RootObject();
root.MySubObjects.Add(new SubObject("1", "data 1"));
root.MySubObjects.Add(new SubObject("2", "data 2"));

//Assign data to the data source
_listBox.DisplayMember = "DisplayProperty";
_listBox.ValueMember = "ValueProperty";
_listBox.DataSource = root.MySubObjects; 
```

root.MySubObjects 返回子对象列表，子对象必须具有名为 DisplayProperty 和 ValueProperty 的属性，例如。

```
public class RootObject
{
     public List<SubObject> MySubObjects { get; set; }
}

public class SubObject
{
     public string ValueProperty { get; set; }
     public string DisplayProperty { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-05T05:57:10.810

I have a special rule for problems like this that I always try to remember before wasting an entire day hammering on it (believe me, I've spent many days hammering!). The rule is: when system behavior is really strange, the underlying cause must be very stupid. As intelligent programmers, we have a tendancy to search for esoteric causes or bugs in framework code to explain our problems. Sometimes the answer is that we were in a hurry and made a careless mistake that we haven't yet caught.

To quote Sherlock Holmes, "when you've removed the impossible, then whatever remains, no matter how improbable, must be the truth". In this case, the improbable truth is that the MySubObjects property of MyRoot object is null.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T21:20:52.207

你可以试试

```
_listBox.DataSource = new BindingList<SubObject> (MyRootObject.MySubObjects); 
```

反而。BindingList 实现了比 List 更多的接口，这对于 DataBinding 是必不可少的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-27T01:39:48.700

you could try and use a BindingSource ( [http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx) )

inbetween the Listbox and your collection. Bindingsources handles a bunch of stuff and also includes Suspend/ResumeBinding properies that can be useful when updating the list

you could also try out wpf as its databinding is far superior to that of winforms :) but maybe thats not possible in your case

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-24T07:34:17.200

I think you have to call Bind method after assigning to the list box data source something like _listBox.DataSource.bind() and you will have your listbox disappeared

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-28T16:50:58.593

我相信你需要调用 _listbox.DataBind(); 分配数据源后。但是，我以前从未使用过属性作为数据源，我只使用过方法。您是否尝试过将您的属性更改为一种方法以查看是否存在问题？

# jpa - 如何在 JPA 中正确执行多对多连接表？

> ID：675519
> 
> 赞同：3
> 
> 时间：2009-03-23T22:44:52.497
> 
> 标签：jpa, jakarta-ee, ejb

我需要 3 个实体：用户、合同（这是多对多关系）和一个中间实体：用户合同（需要存储一些字段）。

我想知道的是在 JPA/EJB 3.0 中定义这些实体之间关系的正确方法，以便操作（持久化、删除等）正常。

例如，我想创建一个用户及其合约并以一种简单的方式持久化它们。

目前我所拥有的是：在 User.java 中：

```
@OneToMany(mappedBy = "user", fetch = FetchType.LAZY)
    private List<UserContract> userContract; 
```

在 Contract.java 中：

```
@OneToMany(mappedBy = "contract", fetch = FetchType.LAZY)
private Collection<UserContract> userContract; 
```

还有我的 UserContract.java：

```
@Entity
public class UserContract {
@EmbeddedId
private UserContractPK userContractPK;

@ManyToOne(optional = false)
private User user;

@ManyToOne(optional = false)
private Contract contract; 
```

还有我的 UserContractPK：

```
@Embeddable
public class UserContractPK implements Serializable {
@Column(nullable = false)
private long idContract;

@Column(nullable = false)
private String email; 
```

这是实现我的目标的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-25T21:41:02.633

一切看起来都不错。我的建议是`@MappedSuperclass`使用`@EmbeddedId`：

```
@MappedSuperclass
public abstract class ModelBaseRelationship implements Serializable {

@Embeddable
public static class Id implements Serializable {

    public Long entityId1;
    public Long entityId2;

    @Column(name = "ENTITY1_ID")
    public Long getEntityId1() {
        return entityId1;
    }

    @Column(name = "ENTITY2_ID")
    public Long getEntityId2() {
        return entityId2;
    }

    public Id() {
    }

    public Id(Long entityId1, Long entityId2) {
        this.entityId1 = entityId1;
        this.entityId2 = entityId2;
    }

   }

   protected Id id = new Id();

   @EmbeddedId
   public Id getId() {
        return id;
   }

   protected void setId(Id theId) {
        id = theId;
   }

 } 
```

为了便于阅读，我省略了明显的构造函数/设置器。然后您可以将 UserContract 定义为

```
@Entity
@AttributeOverrides( {
        @AttributeOverride(name = "entityId1", column = @Column(name = "user_id")),
        @AttributeOverride(name = "entityId2", column = @Column(name = "contract_id"))
})
public class UserContract extends ModelBaseRelationship { 
```

这样，您可以为其他多对多连接实体（如 UserContract）共享主键实现。

# apache-flex - 没有为带有嵌入内容的图像控件触发完成/进度事件

> ID：675521
> 
> 赞同：1
> 
> 时间：2009-03-23T22:45:21.137
> 
> 标签：apache-flex, image, mxml, flex3

我有以下 MXML 标签：

```
<mx:Image id="image" width="100%" height="100%" 
              source="@Embed('../assets/Test.swf')" 
              complete="completeHandler(event)" 
              progress="progressHandler(event)"/> 
```

但由于某种原因，我的 completeHandler / progressHandler 函数没有被调用。我需要完整事件的原因是因为我想在图像加载后操作位图数据。在 creationComplete 中，位图数据仍然为空。为什么这些事件没有触发？

**编辑：**资产在我的应用程序中正确显示 - 所以我知道资产在正确的位置（嵌入保证无论如何在编译时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T07:14:17.827

检查您的资产路径。最有可能的是，swf 不在正确的路径上，或者没有被复制到`assets`debug-build/release-build 目录中的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-25T20:53:15.273

如果您使用的是嵌入式资产，则宽度/高度属性可立即在源对象上使用：

```
var mySource:Object = new embeddedClass();
m_myWidth = mySource.width;
m_myHeight = mySource.height;
m_image = new Image();
m_image.source = mySource; 
```

因此，您必须先创建源实例，然后在图像对象上设置源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-20T22:59:58.290

因此，您只需将 Event.COMPLETE 侦听器直接添加到 loader.contentLoaderInfo 而不是加载器。我不敢相信这不是他的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T05:26:04.377

这似乎是这里的预期行为！

从文档中：

> 不保证会调度进度事件。可能会接收到完整的事件，而不会分派任何进度事件。当加载的内容是本地文件时，可能会发生这种情况。

所以我认为这部分可以解释为什么在您的示例中没有捕获任何进度事件。

> 内容加载完成时调度。与 complete 事件不同，此事件针对所有源类型调度。请注意，对于通过 Loader 加载的内容，会调度 ready 和 complete 事件。对于嵌入等其他源类型，仅调度就绪。

它清楚地表明在处理嵌入式源时应该监听 READY 事件而不是 COMPLETE ;)

# javascript - ASCX 文件中的 ClientID

> ID：675526
> 
> 赞同：2
> 
> 时间：2009-03-23T22:48:22.440
> 
> 标签：javascript, user-controls, ascx

我正在尝试在 .ascx（用户控制标记）文件中获取 CLientID。

虽然这

```
My id is: <%=this.ClientID%> 
```

呈现为我的 id 是：fracTemplateCtrl

这：

```
 <asp:Button ID="btnSave" runat="server" Text="Save Template" onclick="btnSave_Click" OnClientClick="return confirmSave('<%=this.ClientID%>');" /> 
```

呈现为（在源代码中）：

```
 <input type="submit" name="fracTemplateCtrl$btnSave" value="Save Template" onclick="return confirmSave('&lt;%=this.ClientID%>');" id="fracTemplateCtrl_btnSave" /> 
```

显然，ClientId 属性在第二种情况下不会被评估。我该如何克服这个问题？（除了硬编码，这不是答案，我想让用户控制独立）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T22:57:26.273

您可以像这样在服务器端设置 OnClientClick 属性的值：

```
btnSave.OnClientClick = "return confirmSave('" + this.ClientID + "')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-23T22:52:00.420

试试这个

```
<asp:Button ID="btnSave" runat="server" Text="Save Template" onclick="btnSave_Click" OnClientClick="return confirmSave(this.id);" /> 
```

# web-services - 需要具有某些特定条件的 http 服务器

> ID：675529
> 
> 赞同：0
> 
> 时间：2009-03-23T22:48:46.120
> 
> 标签：web-services, cgi, relative-path, cgi-bin

我一直在为我的项目寻找网络服务器，但我无法满足自己。我需要一个支持 Windows 编译 CGI 脚本 (exe) 的 http 服务器，并且必须能够使用相对路径。如果服务器可以尽可能小/轻量级，那将是一个额外的好处。

到目前为止，我的搜索中最难的部分是找到一个支持 CGI 和相对路径支持的服务器。当我说相对路径时，我指的是服务器根目录。我希望能够将它与我的项目一起打包，因此 conf 文件中的路径不能是绝对的。

我唯一满足所有标准的是Abyss Web，但他们的许可证是专有的，仅供个人免费使用。

编辑：我在我的方式中发现了错误。我在根目录下通过 cmd 启动了这个过程。因此，apache 在 conf 中使用的相对路径是相对于我在根目录下的位置。通过更改到根目录并在那里运行进程，一切都像 gbjbaanb 提到的那样工作。但我想我的问题的上下文可能仍然有效。如果我要在我的程序（C# .NET）中将服务器作为进程运行，那么“当前目录”会是什么？我是否必须确保在启动之前更改了当前目录环境变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-23T23:10:48.020

阿帕奇有什么问题？您可以将 DocumentRoot 设置为任何目录（尽管我没有在 C 上的 Windows 上尝试过它：）

它也适用于网络服务器根目录 - 不要以 / 开始指令，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T15:36:40.503

我已经快速启动了我应该使用的服务器的模拟版本，gbjbaanb 似乎也适用于 Windows。与 *nix 一样，相对路径的工作基于 apache 启动时的当前目录。因此，对于 Windows，只需确保将当前目录的环境变量设置为您希望 apache 与之相关的环境变量。对于 .NET，您只需适当地设置 System.IO.Directory.SetCurrentDirectory() 或 System.Environment.CurrentDirectory。我想对于 *nix，你要么在运行前 cd 进入目录，要么使用 chroot。

# java - 任何人都可以帮助解决有关日期属性的java问题吗？

> ID：675533
> 
> 赞同：0
> 
> 时间：2009-03-23T22:50:25.383
> 
> 标签：java, java-me

我基本上想说

如果日期未更改，请运行此警报

我的日期字段是这样设置的

```
 StartDate = new DateField("Start Date ", DateField.DATE);
                cal1 = Calendar.getInstance();
                cal1.set(Calendar.YEAR, 2009);
                cal1.set(Calendar.MONTH, 3);
                cal1.set(Calendar.DAY_OF_MONTH, 1);
                StartDate.setDate(cal1.getTime()); 
```

我有这个，但我不知道从哪里开始做对。

```
 if(StartDate.equals(Calendar.DAY_OF_MONTH, 1))
        {

        AlertNameNotEntered.setString("Please select a Start Date");
        mDisplay.setCurrent(AlertNameNotEntered);
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T23:10:20.953

在我看来，您在基本 Java 方面的知识有很多空白。了解语言和标准库没有捷径可走。有关[Calendar](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Calendar.html)、[Date](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Date.html)和[DateField](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/lcdui/DateField.html)类的信息，请参阅 javadocs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T23:22:08.710

我假设你想要这样的东西：

```
if(StartDate.getDate().getTime() == cal1.getTime()) // Date is unchanged
  {
    AlertNameNotEntered.setString("Please select a Start Date");
    mDisplay.setCurrent(AlertNameNotEntered);
  } 
```

# visual-studio - 为 Office System 安装 Visual Studio 工具

> ID：675537
> 
> 赞同：0
> 
> 时间：2009-03-23T22:52:20.107
> 
> 标签：visual-studio, visual-studio-2008, vsto, officedev

我有 VS 2008 Standard，我正在尝试打开一个作为 Outlook 插件的项目，该项目无法加载显示消息

> “找不到 C:\Program Files\MSBuild\Microsoft\VisualStudio\v9.0\Office Tools\Microsoft.VisualStudio.Tools.Office.Office2007.targets”。

缺少 Office 工具目录，但我已经安装了 Office 2007 主要互操作程序集和用于 Microsoft Office 系统 3.0 的 Visual Studio 工具。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-18T16:36:05.923

Visual Studio 标准版不包含 Visual Studio Tools for Office (VSTO)（来源：http: [//msdn.microsoft.com/en-us/library/bb398242.aspx](http://msdn.microsoft.com/en-us/library/bb398242.aspx)）。安装 VSTO 3.0 时，您只安装了运行时组件，它只允许您运行已发布的 VSTO 解决方案，而不是在 Visual Studio 中设计它们。

您将需要升级到 Visual Studio Team System 或 Visual Studio Professional。

# javascript - -webkit-transition-property 在 Safari 3.1.2 (Windows) 中收到意外值

> ID：675544
> 
> 赞同：1
> 
> 时间：2009-03-23T22:55:45.747
> 
> 标签：javascript, html, css, safari, webkit

我正在开发一个针对 iPhone 优化的网站，并在 Windows 上的 Safari 3.1.2 上对其进行测试。对于网站中的某些元素，我正在使用`-webkit-transition`样式应用隐式动画。

所以基本上，我有这样的元素：

```
<div style="-webkit-transition: left 2s linear;">...</div> 
```

有时从一开始就存在于文档中，有时从另一个文档加载并注入到 DOM 中。

在第一种情况下，动画按预期发生，但是当使用 JavaScript 注入 div 时，`-webkit-transition`似乎被忽略了（没有动画）。此外，在 Safari 的检查器中，我可以看到：

```
-webkit-transition: condensed 2s linear; 
```

这是什么`condensed`意思，我如何在注入后强制使用该样式？

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T12:04:01.047

您可能想尝试使用适用于 Windows 的 Safari 4 beta。正如苹果所说：

> “Safari 4 是适用于 Mac 和 Windows 的最快、最高效的浏览器，它完美地集成了 HTML 5 和 CSS 3 Web 标准，支持下一代交互式 Web 应用程序。”</p>

所以你可能对 Safari 4 很幸运，试试吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T22:34:54.480

我在这类事情上做得不多，但我看到了桌面和移动 Safari 之间的差异（例如[，我如何使用 iPhone 上的 CSS 过渡使元素缩小到零？](https://stackoverflow.com/questions/832099/how-do-i-make-an-element-scale-down-to-nothing-using-a-css-transition-on-the-ipho)）。

因此，我认为您需要使用 iPhone 或 iPod Touch 进​​行测试。

# c# - 是否可以将 ac# 对象初始化程序与工厂方法一起使用？

> ID：675545
> 
> 赞同：29
> 
> 时间：2009-03-23T22:55:54.123
> 
> 标签：c#, object, factory, initializer

我有一个带有静态工厂方法的类。我想调用工厂来检索类的实例，然后进行额外的初始化，最好通过 c# 对象初始化器语法：

```
MyClass instance = MyClass.FactoryCreate()
{
  someProperty = someValue;
} 
```

对比

```
MyClass instance = MyClass.FactoryCreate();
instance.someProperty = someValue; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-03-23T23:08:08.603

否。或者，您可以接受 lambda 作为参数，这也使您可以完全控制将调用“创建”过程的哪一部分。这样你就可以这样称呼它：

```
MyClass instance = MyClass.FactoryCreate(c=>
   {
       c.SomeProperty = something;
       c.AnotherProperty = somethingElse;
   }); 
```

创建看起来类似于：

```
public static MyClass FactoryCreate(Action<MyClass> initalizer)
{
    MyClass myClass = new MyClass();
    //do stuff
    initializer( myClass );
    //do more stuff
    return myClass;
} 
```

* * *

另一种选择是返回一个构建器（对 MyClass 使用隐式转换运算符）。你会这样称呼：

```
MyClass instance = MyClass.FactoryCreate()
   .WithSomeProperty(something)
   .WithAnotherProperty(somethingElse); 
```

为建设者检查[这个](http://elegantcode.com/2008/04/26/test-data-builders-refined/)

这两个版本都在编译时进行检查，并具有完整的智能感知支持。

* * *

需要默认构造函数的第三个选项：

```
//used like:
var data = MyClass.FactoryCreate(() => new Data
{
    Desc = "something",
    Id = 1
});
//Implemented as:
public static MyClass FactoryCreate(Expression<Func<MyClass>> initializer)
{
    var myclass = new MyClass();
    ApplyInitializer(myclass, (MemberInitExpression)initializer.Body);
    return myclass ;
}
//using this:
static void ApplyInitializer(object instance, MemberInitExpression initalizer)
{
    foreach (var bind in initalizer.Bindings.Cast<MemberAssignment>())
    {
        var prop = (PropertyInfo)bind.Member;
        var value = ((ConstantExpression)bind.Expression).Value;
        prop.SetValue(instance, value, null);
    }
} 
```

它介于编译时检查和未检查之间。它确实需要一些工作，因为它在分配上强制使用常量表达式。我认为其他任何事情都是答案中已经存在的方法的变体。请记住，您也可以使用普通作业，请考虑您是否真的需要其中任何一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-17T16:45:06.873

您可以使用如下扩展方法：

```
namespace Utility.Extensions
{
    public static class Generic
    {
        /// <summary>
        /// Initialize instance.
        /// </summary>
        public static T Initialize<T>(this T instance, Action<T> initializer)
        {
            initializer(instance);
            return instance;
        }
    }
} 
```

你可以这样称呼它：

```
using Utility.Extensions;
// ...
var result = MyClass.FactoryCreate()
                .Initialize(x =>
                {
                    x.someProperty = someValue;
                    x.someProperty2 = someValue2;
                }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-10T09:03:41.450

是的。您**可以**通过以下技巧将对象初始化程序用于已创建的实例。您应该创建一个简单的对象包装器：

```
public struct ObjectIniter<TObject>
{
    public ObjectIniter(TObject obj)
    {
        Obj = obj;
    }

    public TObject Obj { get; }
} 
```

现在您可以像这样使用它来初始化您的对象：

```
new ObjectIniter<MyClass>(existingInstance)
{
    Obj =
    {
        //Object initializer of MyClass:
        Property1 = value1,
        Property2 = value2,
        //...
    }
}; 
```

PS dotnet 仓库中的相关讨论： [https ://github.com/dotnet/csharplang/issues/803](https://github.com/dotnet/csharplang/issues/803)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-23T23:30:23.870

对“否”+1。

这是匿名对象方式的替代方法：

```
var instance = MyClass.FactoryCreate(
    SomeProperty => "Some value",
    OtherProperty => "Other value"); 
```

在这种情况下`FactoryCreate()`会是这样的：

```
public static MyClass FactoryCreate(params Func<object, object>[] initializers)
{
    var result = new MyClass();
    foreach (var init in initializers) 
    {
        var name = init.Method.GetParameters()[0].Name;
        var value = init(null);
        typeof(MyClass)
            .GetProperty(name, BindingFlags.Instance | BindingFlags.Public | BindingFlags.IgnoreCase)
            .SetValue(result, value, null);
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-23T22:57:35.460

不，对象初始值设定项只能用于使用构造函数调用“new”。一种选择可能是向您的工厂方法添加一些额外的参数，以便在工厂内创建对象时设置这些值。

```
MyClass instance = MyClass.FactoryCreate(int someValue, string otherValue); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-23T23:12:28.733

就像大家说的，不。

已经建议使用 lambda 作为参数。
更优雅的方法是接受匿名并根据对象设置属性。IE

```
MyClass instance = MyClass.FactoryCreate(new {
    SomeProperty = someValue,
    OtherProperty = otherValue
}); 
```

但这会慢得多，因为必须针对所有属性反映对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-23T22:58:57.983

不，那是你只能“内联”做的事情。工厂函数可以为您做的就是返回一个引用。

# c++ - Blob ...如何以非递归方式编写

> ID：675547
> 
> 赞同：0
> 
> 时间：2009-03-23T22:56:09.053
> 
> 标签：c++, recursion, flood-fill

我已经使用递归编写了以下程序，但我不知道如何以非递归方式编写它。每次我运行我的非递归版本时，数字都会偏离。关于如何在没有递归的情况下编写以下方法的任何建议？

```
int countCells(color grid[ROWS][COLS], int r, int c) {
 if (r < 0 || r >= ROWS || c < 0 || c >= COLS) {
   return 0;
 } else if (grid[r][c] != ABNORMAL) {
   return 0;
 } else {
   grid[r][c] = TEMPORARY;
   return 1
     + countCells(grid,r-1,c-1) + countCells(grid,r-1,c)
     + countCells(grid,r-1,c+1) + countCells(grid,r,c+1)
     + countCells(grid,r+1,c+1) + countCells(grid,r+1,c)
     + countCells(grid,r+1,c-1) + countCells(grid,r,c-1);
    }
} 
```

这是我尝试过的顺便说一句：

```
int countCells(color grid[ROWS][COLS], int r, int c)
{
  int temp = 0;
  if (r < 0 || r >= ROWS || c < 0 || c >= COLS)
  {
    return 0;
  }

  else if (grid[r][c] != ABNORMAL)
  {
    return 0;
  }

  else
  {
    int original_row = r;
    int original_column = c;

    while(r >= 0 && row < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      r = r - 1;
      c = c - 1;
    }
    r = original_r;
    c = original_c;

    while(r >= 0 && r < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      r = r - 1;
    }
    r = original_r;
    c = original_c;

    while(r >= 0 && r < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      r = r - 1;
      c = c + 1;
     }
    r = original_r;
    c = original_c;

    while(r >= 0 && r < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      c = c + 1;
    }
    r = original_r;
    c = original_c;

    while(r >= 0 && r < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      r = r + 1;
      c = c + 1;
    }
    r = original_r;
    c = original_c;

    while(r >= 0 && r < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      r = r + 1;
    }
    r = original_r;
    c = original_c;

    while(r >= 0 && r < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      r = r + 1;
      c = c - 1;
    }
    r = original_r;
    c = original_c;

    while(r >= 0 && r < ROWS && c >= 0 && c < COLS && grid[r][c] == ABNORMAL)
    {
      grid[r][c] = TEMPORARY;
      temp = temp + 1;
      c = c - 1;
    }
    r = original_r;
    c = original_c;

    return temp;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T23:16:27.083

以非递归方式执行此操作的最简单方法是维护要检查的位置列表。伪代码如下所示：

```
list horizon = new empty list;
horizon.push(r, c);
count = 0;
while(!horizon.empty())
{
   r, c = horizon.pop();
   if(boundscheck(r, c) && grid[r][c] == ABNORMAL)
   {
        count++;
        horizon.push(r-1, c-1);
        horizon.push(r-1, c  );
        // etc ...
        grid[r][c] = TEMPORARY;
   }
} 
```

编辑：你绝对应该看看这篇关于[洪水填充算法](https://stackoverflow.com/questions/367226/flood-fill-algorithms)的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T23:17:59.997

这似乎是一个经典的[洪水填充](http://en.wikipedia.org/wiki/Flood_fill)算法。一个非递归的洪水填充例程写起来有点棘手；您将需要在某个地方进行临时存储，而堆栈是最容易获得它的地方。链接的文章讨论了其他一些技术，包括将数组本身用作临时空间（右手填充算法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T23:01:14.750

```
int count = 0;
for (int i = 0; i < rows; i++)
{
    for (int j = 0; j < COLS; j++) 
    {
        if (grid[i,j] != ABNORMAL) count++;
    }
} 
```

# delphi - 在 Delphi 中将 TDateTime 声明为常量

> ID：675556
> 
> 赞同：29
> 
> 时间：2009-03-23T23:00:09.713
> 
> 标签：delphi, date, operator-overloading, constants, tdatetime

据我所知，没有办法做到这一点，但我会问以防万一其他人知道如何做到这一点。如何在 Delphi 中将日期声明为 const？

我找到的唯一解决方案是使用数字等价物，因为它不是人类可读的，所以维护起来 **有点麻烦。**

```
const
  Expire : TDateTime = 39895; // Is actually 3/23/2009 
```

我想做的是这样的：

```
const
  Expire : TDateTime = TDateTime ('3/23/2009'); 
```

或者

```
const
  Expire : TDateTime = StrToDate('3/23/2009'); 
```

所以让我知道这是一个功能请求还是我只是错过了如何做到这一点（是的，我知道这似乎是一件奇怪的事情......）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-15T17:03:01.630

好的，我的反应有点晚了，但这是新德尔福的解决方案。

它使用隐式类重载器，以便可以像使用 TDateTime 变量一样使用这种类型的记录。

```
 TDateRec = record
    year,month,day,hour,minute,second,millisecond:word;
    class operator implicit(aDateRec:TDateRec):TDateTime;
    class operator implicit(aDateTime:TDateTime):TDateRec; // not needed
    class operator implicit(aDateRec:TDateRec):String; // not needed
    class operator implicit(aDateRec:String):TDateRec; // not needed
  end; 
```

执行：

```
uses DateUtils;

class operator TDateRec.Implicit(aDateRec:TDateRec):TDateTime;
begin
  with aDateRec do // Yeah that's right you wankers. I like "with" :)
    Result := encodeDateTime(Year,Month,Day,Hour,Minute,Second,Millisecond);
end;

class operator TDateRec.Implicit(aDateTime:TDateTime):TDateRec;
begin
  with Result do
    DecodeDateTime(aDateTime,Year,Month,Day,Hour,Minute,Second,Millisecond);
end;

class operator TDateRec.Implicit(aDateRec:TDateRec):String;
begin
  Result := DateTimeToStr(aDateRec)
end;

class operator TDateRec.Implicit(aDateRec:String):TDateRec;
begin
  Result := StrToDateTime(aDateRec)
end; 
```

现在您可以像这样声明您的日期：

```
const
  Date1:TDateRec=(Year:2009;month:05;day:11);
  Date2:TDateRec=(Year:2009;month:05;day:11;hour:05);
  Date3:TDateRec=(Year:2009;month:05;day:11;hour:05;minute:00); 
```

要查看它是否有效，请执行以下操作：

```
ShowMessage(Date1); // it can act like a string
ShowMessage(DateToStr(Date1)); // it can act like a date 
```

如果您真的想用它替换所有 TdateTime 变量，您可能还需要重载一些其他运算符（加、减、显式......）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-23T23:26:16.110

唯一的？可能的方式，但可能不是您正在寻找的：

```
const
{$J+}
  Expire: TDateTime = 0;
{$J-}

initialization
  Expire := EncodeDate(2009, 3, 23); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-30T12:31:17.767

我倾向于用函数模拟**const**日期。从技术上讲，它们比“伪常量”可分配类型的**const更***恒定*。

 **```
function Expire: TDateTime;
begin
  Result := EncodeDate(2009, 3, 23);
end; 
```

**注意**使用`EncodeDate`而不是`StrToDate`。`StrToDate`受区域设置的影响，这意味着无法保证字符串会按预期进行解释。

例如，你知道有一群奇怪的人认为将日期部分“洗牌”成不一致的重要性顺序是有意义的吗？他们使用中间，然后是最小，然后是最重要的部分（例如 '3/23/2009'）**<cheeky grin>**。唯一合理的逻辑是当你 102 岁时——那么你可以声称你的年龄是 021 岁。

> 对于那些*不成熟的优化器*，如果函数被如此频繁地调用，以至于编码日期所需的纳秒成为一个问题 - 你遇到的问题远**不止**是可读、可维护代码的这种轻微的低效率问题。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-03-24T01:30:08.387

没有办法做到这一点，因为解释日期文字本身不是确定性的，它取决于您遵循的约定/语言环境。
例如，对于任何法国人来说，'1/4/2009' 不在 1 月，并且将编译器翻译为 1 月 4 日会使其成为傻瓜编译器；-)
除非编译器为将日期值和显示表示配对...无论如何，地球上的一半人都不喜欢它。
我现在看到的唯一明确的方式是提供价值，即使它看起来很痛苦......我的 0.02 美元

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-03-24T01:10:41.053

不，Delphi 不支持。

您的第一个想法是请求与普通浮点文字不同的日期时间文字。我找到了[QC 72000](http://qc.embarcadero.com/wc/qcmain.aspx?d=72000)，它是关于`TDateTime`在调试器中将值显示为日期，但与您的特定请求无关。不过，这不像以前没有人提到过。这是新闻组中常年出现的话题；我只是在 QC 中找不到任何关于它的信息。

您的第二个想法需要`StrToDate`在编译时进行评估。我在 QC 中也没有看到任何关于它的条目，但就其价值而言，C++ 正在为具有必要品质的函数获得这样的特性。`StrToDate`但是，它不能满足这些要求，因为它对当前语言环境的日期设置很敏感。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-24T01:27:15.413

Rob Kennedy 的回答表明 StrToDate 解决方案本质上是不可能的，因为您不希望您的代码在欧洲编译时中断！

我同意应该有某种方法来做 EncodeDate 但没有。

就我而言，编译器应该简单地编译和运行它在常量赋值中找到的任何代码，并将结果存储到常量中。我会把它留给程序员来确保代码对其环境不敏感。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-03-25T16:49:38.887

一种解决方案是创建一个多年的常量列表，另一个用于月偏移量的列表，然后动态构建它。您必须自己处理闰年，将每个结果常数加 1。下面的一些内容可以帮助您入门... :)

```
Const
  Leap_Day = 1;  // use for clarity for leap year dates beyond feb 29.
  Year_2009 = 39812;  // January 1, 2009
  Year_2010 = Year_2009 + 365; // January 1, 2010
  Year_2011 = Year_2010 + 365; // January 1, 2011
  Year_2012 = Year_2011 + 365; // January 1, 2012 (is leap year)
  Year_2013 = Year_2012 + Leap_Day + 365;  // January 1, 2013

Const
  Month_Jan = -1; // because adding the day will make the offset 0\. 
  Month_Feb = Month_Jan + 31; // 31 days more for the first day of Feb.
  Month_Mar = Month_Feb + 28; // 28 days more for the first day of Mar.  
  Month_Apr = Month_Mar + 30; // 30 days more for the first day of Apr.

Const
  Expire_Jan1 : tDateTime = Year_2009 + Month_Jan + 1;
  Expire : tDateTime = Year_2009 + Month_Mar + 23; 
```

如果您有闰年，那么您必须在该年 2 月之后的任何内容上加 1。

```
Const
  Expire : tDateTime = Year_2008 + Month_Mar + 23 + Leap_Day; 
```

**编辑**

为了清楚起见，又增加了几年，并添加了 Leap_Day 常量。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-24T13:36:04.383

Delphi 日期是[自 1899 年 12 月 30 日以来的天数](http://www.delphibasics.co.uk/RTL.asp?Name=TDateTime)。因此，您可能会想出一个复杂的数学公式来将日期表示为 const。然后你可以非常奇怪地格式化它，以强调人类可读的部分。我最好的尝试如下，但它非常不完整；一方面，它假设所有月份都有 30 天。

我的例子主要是为了好玩。在实践中，这是非常荒谬的。

```
const
  MyDate = ((
           2009  //YEAR
                                          - 1900) * 365.25) + ((
           3     //MONTH
                                          - 1) * 30) +
           24    //DAY
           ; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-14T17:09:30.890

我认为您可以使用*的*最佳解决方案是声明：

```
ArmisticeDay: TDateTime = 6888.0 + (11.0/24.0); //Nov 11, 1918 11 AM 
```

并接受它。

* * *

**我的尝试 Nº1**

```
Expire = EncodeDate(2009, 3, 23); 
```

> [错误] 应为常量表达式

**我的尝试 Nº2**

```
Expire: TDateTime = EncodeDate(2009, 3, 23); 
```

> [错误] 应为常量表达式

因此，即使它们是恒定的且具有确定性（即不依赖于任何语言环境信息），它仍然不起作用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-18T08:42:10.100

“TDateTime”类型 = “Double”类型。

算法：

1.  使用**StrToDateTime('01.01.1900 01:01:01')** *（或其他方式）*计算需要的 double_value。（'01.01.1900 01:01:01' => 2.04237268518519）

2\. **const DTZiro：TDateTime = 2.04237268518519；**

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-10T14:04:58.887

System.DateUtils 具有每个时间部分的常量。

```
const cDT : TDateTime = (12 * OneHour)   + ( 15 * OneMinute) 
                      + (33 * OneSecond) + (123 * OneMillisecond); 
```

# flash - fl.containers.ScrollPane（和其他 fl.* 组件）的源代码是否可用？

> ID：675557
> 
> 赞同：0
> 
> 时间：2009-03-23T23:00:47.903
> 
> 标签：flash

我在 Flash 应用程序中使用 CS3 fl.* 控件，并且在 ScrollPane 实现中似乎存在错误。如果有源代码可以找到解决方法，那就太好了。这在任何地方都可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T23:35:50.173

是的，Flash 附带了所有可用于其组件的源代码。

您可以在 Flash 安装目录中找到它们。我的默认安装将 ScrollPane 类放在这里：

C:\Program Files\Adobe\Adobe Flash CS3\en\Configuration\Component Source\ActionScript 3.0\User Interface\fl\containers

只需确保在进行任何更改之前进行备份。

您在使用滚动窗格时遇到什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:23:00.377

[Spark 项目](http://www.libspark.org/wiki/WikiStart/en)似乎有一些您可能感兴趣的代码..例如[这里](http://www.libspark.org/browser/mxp/specialbutton/as3/src/fl/containers?rev=1927)

# visual-studio-2008 - 我可以自动执行重复性任务，例如使用支持字段编写属性吗？

> ID：675567
> 
> 赞同：1
> 
> 时间：2009-03-23T23:05:58.857
> 
> 标签：visual-studio-2008

我经常需要在 C# 中编写具有支持字段的属性的类，以便我可以实现自定义逻辑（例如`if (m_x < 5) { // do something here }`。我还经常对事件及其处理程序进行编码。这是每个人每天都在做的所有常规编码，并没有真正考虑过.

但是，这会极大地消耗生产力，因为我在这方面花费了很多时间，而不是实际的业务逻辑。有没有办法可以自动化所有这些（例如通过向导）？

我正在使用 Visual Studio 2008 专业版。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T23:08:39.990

有片段 - Visual Studio 的一部分，或者如果你安装了 ReSharper，你甚至可以使用实时模板（你应该有:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:08:16.947

我想[这](http://www.youtube.com/watch?v=27bn7ab2vpc&fmt=18)就是你所描述的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T23:08:55.043

宏或代码片段是解决这种重复的好方法。

# sql-server - DDL 在 SQL Server 2005 上的 IF NOT EXISTS 语句内未正确执行

> ID：675570
> 
> 赞同：1
> 
> 时间：2009-03-23T23:08:12.283
> 
> 标签：sql-server, sql-server-2005, ddl

我有一个相当复杂的数据库，需要部署到各种服务器上，这些服务器上可能已经实现了数据库的现有部分，也可能没有。为了解决这种意外情况，我设置了以下测试：

```
USE [testDB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[wcSites]') AND type in (N'U'))
begin
    CREATE TABLE [dbo].[wcSites](
        [id] [int] IDENTITY(1,1) NOT NULL,
        [name] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
        [siteCSS] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
        [masterTemplate] [int] NULL,
        [errorPage] [int] NULL,
        [homePage] [int] NULL,
        [addressProduction] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
        [addressTest] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
        [routeHandler] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
        [publish] [bit] NOT NULL CONSTRAINT [DF_wcSites_publish]  DEFAULT ((0)),
        [publicAccess] [bit] NOT NULL CONSTRAINT [DF_wcSites_publicAccess]  DEFAULT ((1)),
        [siteAccessPermission] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
        [contentOwner] [int] NULL,
        [navStyle] [int] NULL,
        [incScripts] [int] NULL,
        [boxW] [int] NULL,
        [boxH] [int] NULL,
        [columns] [int] NULL,
        [rows] [int] NULL,
     CONSTRAINT [PK_wcSites] PRIMARY KEY CLUSTERED 
    (
        [id] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
     CONSTRAINT [IX_wcSites_Unique_Address] UNIQUE NONCLUSTERED 
    (
        [addressProduction] ASC,
        [addressTest] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO
    SET ANSI_PADDING OFF
    GO
    EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'Ensure unique addresses in the addressProduction, addressTest fields' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'wcSites', @level2type=N'CONSTRAINT',@level2name=N'IX_wcSites_Unique_Address'
end 
```

最终结果始终是：

```
Msg 102, Level 15, State 1, Line 32
Incorrect syntax near 'PRIMARY'.
Msg 102, Level 15, State 1, Line 2
Incorrect syntax near 'end'. 
```

如果我测试 IF 语句，它可以正常工作：

```
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[wcSites]') AND type in (N'U'))
begin
    PRINT 'Table does not exist'
end 
```

同样，当我测试 CREATE TABLE 脚本时。但是当我将 CREATE TABLE 脚本放在 begin..end 块内时，它每次都会失败。而且我有一个全面的问题，几乎每个使用这种方法的表都失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-23T23:20:26.483

尝试删除 begin..end 块中的“go”语句，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:25:47.687

我对 SQL Server 语法有点模糊，但是 GO 语句没有尝试执行 Block 吗？如果用分号替换 go 会发生什么？

此外，Set Ansi_padding off 位于 If 块中，而 set Ansi_padding on 在外面对我来说看起来很奇怪，你确定那是正确的吗？

# c# - 相对链接自动获取会话 ID

> ID：675578
> 
> 赞同：1
> 
> 时间：2009-03-23T23:11:09.967
> 
> 标签：c#, .net, asp.net, session, storage

> 因为会话 ID 是插入到当前 URL 中的，所以相对链接也会自动获得会话 ID。换言之，如果用户当前驻留在 Page1.aspx 上并单击到 Page2.aspx 的相对链接，则相对链接包括当前会话 ID 作为 URL 的一部分。无 cookie 状态的唯一真正限制是您不能使用绝对链接，因为它们不包含会话 ID。

我不明白为什么相对链接能够获得会话 ID，而不是绝对链接？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-24T00:04:47.203

If you use cookieless sessions, then a session id is inserted into the url like this:

```
http://www.mysite.com/12345/Default.aspx 
```

Now if you link from default.aspx to: "[http://www.mysite.com/dosomething.aspx](http://www.mysite.com/dosomething.aspx)" (`<a href="http://www.mysite.com/dosomething.aspx">...</a>`), the link with the session is lost. If you have used "dosomething.aspx" (`<a href="dosomething.aspx">...</a>`) as the link, the browser will resolve this to:

```
http://www.mysite.com/12345/dosomething.aspx 
```

As you can see, the sessionid now is known to the server.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T00:14:03.577

ASP.NET 使用解析 URL 的技巧，以便从客户端的角度来看，它位于同一目录中，因此它将始终保留会话 ID，而无需担心更改 javascript 或外部 javascript 文件等。

示例： [http://localhost:50311/SomeWebSite/(S(f2rvdgj1bj1nyuzhfeqrvveq))/Page2.aspx](http://localhost:50311/SomeWebSite/(S(f2rvdgj1bj1nyuzhfeqrvveq))/Page2.aspx)

通常 URL 是“ [http://localhost:50311/SomeWebSite/Page2.aspx](http://localhost:50311/SomeWebSite/Page2.aspx) ”，但由于 Web 客户端（浏览器）认为会话 id 是一个目录 (/(S(f2rvdgj1bj1nyuzhfeqrvveq))/)，它会很乐意尝试留在同一个目录中。

这样，ASP.NET 并没有真正重新解析输出的 url，客户端自动转发它。

如果您希望绝对 URL 获得会话 ID，那么创建一个特殊的锚点控件来验证目标 url 是否位于应用程序的根目录中应该很简单，这样您就不会将该会话 ID 传递给外部应用程序，这不知道该怎么办。

# ruby-on-rails - 如何将参数发送到前置过滤器？

> ID：675579
> 
> 赞同：10
> 
> 时间：2009-03-23T23:11:43.850
> 
> 标签：ruby-on-rails, ruby

我想像这样在我的应用程序控制器中创建一个 before_filter 方法......

```
def check_role(role_name)
  unless logged_in_user.has_role? role_name
    flash[:notice] = 'Access to that area requires additional privileges.'
    redirect_to :back
  end
end 
```

但是，在过滤器可以接受参数之前，它看起来并不像。

有没有办法参数化这个调用，或者我想用锤子敲螺丝？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-23T23:27:50.613

你应该可以用一个块来做到这一点：

```
before_filter {|controller| controller.check_role('admin') } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-23T23:37:29.123

您可以使用一些元编程。像这样的东西（完全未经测试，只是让您了解它的发展方式）：

```
Module RoleWithIt
  Role.all.each do |role|
    define_method("check_#{role.name}_role".to_sym) do
      check_role(role.name)
    end
  end

  def check_role(role_name)
    return if logged_in_user.has_role?(role_name)
    flash[:notice] = 'Access to that area requires additional privileges.'
    redirect_to :back
  end
end

ApplicationController.send :include, RoleWithIt 
```

要在您的应用程序初始化时加载它，只需将其放入名为 role_with_it.rb 的文件中，并将其放入您的 lib 目录中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-24T10:07:19.657

> 我想用锤子敲螺丝吗？

呃，可能;-)

如果我没看错，您会遇到控制器中的操作具有不同访问级别的情况，因此您想通过创建单个检查函数来删除重复项？

所以你想做这样的事情吗？

```
before_filter :check_role('admin'), :only => [:admin, :debug]
before_filter :check_role('power'), :only => [:edit, :delete] 
```

但是parens中的参数是不合法的。无论如何，我仍然在这里看到相当多的重复！

一般来说，对于控制器过滤器这样的功能领域，如果您不能做某事，可能是因为您以错误的方式看待某事。（请记住，Rails 很自豪地将自己描述为“有意见的软件”！）

如果您能够知道过滤器方法中的操作名称会怎样？

那我们就有

```
before_filter :check_role 
```

这很[干](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

我们可以在哈希中定义权限，也许：

```
Perms = { :admin => ['admin'], :edit => ['admin', 'power'], etc 
```

...这似乎封装了重复的不同元素。如果它变得复杂，那么整个事情可能会转移到一个表格中，尽管你可能会复制插件中已经可用的功能。

我们会有

```
protected
def check_role
  for required_role in Perms[params[:action]]
    return if logged_in_user.has_role? required_role
  end
  flash[:notice] = 'Access to that area requires additional privileges.'
  redirect_to :back
end 
```

或类似的东西。params[:action] 适用于我当前的 Rails 版本（2.1.2），尽管 Rails 书（v2）提到了一个`action_name`似乎对我来说返回空白的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-23T23:22:40.237

我不相信您可以将参数传递给过滤器。所以我过去所做的是制作静态方法，将参数传递给需要参数的方法。

所以我会有这样的事情：

```
def check_role(role_name)
  unless logged_in_user.has_role? role_name
    flash[:notice] = 'Access to that area requires additional privileges.'
    redirect_to :back
  end
end

def check_admin_role
   check_role('admin')
end

def check_blah_role
   check_role('blah')
end 
```

然后在您的控制器中，您只需调用

```
before_filter :check_admin_role 
```

可能有一些方法可以通过元编程来实现这一点，但我仍然是一个 n00b 并且还没有弄清楚那部分;）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-01T14:45:14.200

[这是一个老问题，但如果有人仍然想知道，可以在这里](https://stackoverflow.com/questions/19260288/rails-4-before-action-pass-parameters-to-invoked-method)找到关于 rails 4 的一个很好的答案

# vbscript - .bat 文件启动的 VBScript 结束进程

> ID：675581
> 
> 赞同：0
> 
> 时间：2009-03-23T23:11:52.617
> 
> 标签：vbscript, sendkeys

我有一个场景设置，我需要测试以查看 .bat 文件执行的结果是否返回结果。.bat 文件调用另一个 .exe，.bat 文件有一个 CMD DOS 窗口，该窗口将严重错误信息从 .exe 输出到该 DOS 框。如果 .exe 没有正确启动，我可以在我们的 SQL DB 中检查结果。我需要关闭当前的 .bat 文件并重新启动它。这看起来相当简单，我可以使用 WMI 调用获取 ProcessID。我可以使用 Terminate() 命令终止进程。这适用于我用于测试的任何 .exe：notepad、calc、iexplorer 等。当我运行 VBScript 以终止 .bat 文件时，它说它终止了 PID（它确实如此，因为我再也看不到 PID）但是，DOS 框仍处于打开状态，并且从 .bat 文件调用的 .exe 仍在运行。如果我点击“X” 在 DOS 框上或右键单击标题栏并选择“关闭”，DOS 框和 .exe 都将被杀死。如何让这个脚本正常工作。服务器运行的是 Windows Server 2003（有些是 x32，有些是 x64）。有任何想法吗？这是我的代码的一个版本，有几个版本：

```
If colFiles.Count = 0 Then
Wscript.Echo "The file does not exist on the remote computer."
Else
Wscript.Echo "The file exists on the remote computer."
Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colProcessList = objWMIService.ExecQuery("Select * from Win32_Process")
For Each objItem in colProcessList
If InStr(objItem.CommandLine, "r15_A.bat") Then
    Wscript.Echo "Batch file: " & objItem.CommandLine  & "  Process ID: " & objItem.ProcessID & "  Parent ID: " & objItem.ParentProcessID
    Call TerminateProcess(objItem.ParentProcessID)
    Call TerminateProcess(objItem.ProcessID)
End If
Next
dim shell
set shell=createobject("wscript.shell")
shell.run BATDIR & BATFILE
'set shell=nothing
End If

Function TerminateProcess(PID)

Set objWMIService = GetObject("winmgmts:\\.\root\CIMV2")
Set colProcesses = objWMIService.ExecQuery("SELECT * FROM Win32_Process WHERE Handle = '" & PID & "'")
For Each objProcess in colProcesses
On Error Resume Next
return = objProcess.Terminate()
Set colProcesses = objWMIService.ExecQuery("SELECT * FROM Win32_Process WHERE Handle = '" & PID & "'")

If Error Then

TerminateProcess = FALSE
Else
TerminateProcess = TRUE
msgBox colProcesses.Count
End If
Next

End Function 
```

我什至尝试使用 SendKeys 发送 ALt-F4、X、C 等。AppActivate 确实将正确的 DOS 框带到了前面。

```
 Set WshShell = CreateObject("WScript.Shell")
    WshShell.AppActivate "r15_A"
    'WshShell.SendKeys("+{F10}")
    WshShell.SendKeys("C") 
```

提前致谢

编辑-------------- 是的，我将不得不终止这个 .bat 文件调用的进程。唯一的缺点是这个 DOS 框保持打开状态。烦人，但我可以忍受。最后，我编写了一个与我的第一个脚本类似的脚本，但仅通过检查 CommandLine 参数来检查我想要杀死的实例：（带有“-FAIL.txt”的代码的第一位测试是否存在 FAIL 文件，如果是，则执行其余的 scipts）

```
Set colFiles = objWMIService. _
ExecQuery("Select * From CIM_DataFile Where Name = 'S:\\servers\\Logs\\" & LOGFILE & "-FAIL.txt'")

If colFiles.Count = 0 Then
'Wscript.Echo "The file does not exist on the remote computer."
Else
'Wscript.Echo "The file exists on the remote computer."
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colProcessList = objWMIService.ExecQuery _
("Select * from Win32_Process Where Name = 'AppStart.exe'")
For Each objProcess in colProcessList
    IF instr(objProcess.CommandLine, "robo05-A") > 0 THEN 
        'msgBox "Found text"
        objProcess.Terminate()
        'This part restarts the failed .bat file.
        wscript.sleep (200) 
        dim shell
        set shell=createobject("wscript.shell")
        shell.run BATDIR & BATFILE
        'set shell=nothing
    ELSE
        'msgBox "Not found"
    END IF
Next
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T21:13:51.223

您遇到的问题是从批处理文件中调用的可执行文件仍在运行。我试图用蝙蝠重新创建你的设置，刚刚做了一个`ping -t %computername%`，果然 vbscript 杀死了 cmd.exe 而不是 ping（请注意父 PID 是 explorer.exe，所以你可能不想尝试杀死它）。现在我可以轻松地从任务管理器中杀死 ping.exe，然后关闭窗口……但我只知道这样做，因为我知道蝙蝠在做什么以及什么是打开的。您可以对包含“ping.exe”的进程进行 WMI 搜索，获取 PID，然后关闭它，这基本上会做同样的事情。当然，在您的情况下，“ping.exe”可能与我的可执行文件不同。如果 exe 不时更改，那么您可以从进程中获取命令行找到包含 r15_A.bat 文件的文件路径的参数，然后使用文件系统对象打开此 bat 文件，

# c++ - 无法编译访问另一个 dll 的 dll

> ID：675584
> 
> 赞同：4
> 
> 时间：2009-03-23T23:12:25.427
> 
> 标签：c++, c, dll

所以，我有一个有趣的问题。我正在使用一组专有的 dll，我显然没有源代码。目标是编写一个中间 dll，将来自专有 dll 的大量函数调用组合在一起。使用 g++ 编译时，我遇到的问题是原始 dll 出现以下错误：无法导出 libname_NULL_THUNK_DATA。未找到符号。

如果我添加一个 main 并编译为可执行文件，一切都会按预期工作。我正在使用 mingw 进行编译。谢谢你的帮助。

回应第一个回复：要么我对你在说什么感到困惑，要么我没有很好地表达我的问题。我没有明确地试图从我的包装器中导出任何东西，我只是从他们的 dll 中调用函数。问题是我收到错误，它无法将这些特定符号从 dll 导出到我的包装器。问题是我什至不完全确定这些 _NULL_THUNK_DATA 符号的用途。我进行了搜索并在某处阅读了它们不应该导出的内容，因为它们是 Windows 使用的内部符号。我曾尝试对链接器使用 --exclude-symbols 指令，但它似乎没有做任何事情。如果我完全误解了你想说的话，我深表歉意。

所以，我认为我的问题与此有关。当仅编译使用 dll 的标准可执行文件时，我能够包含标头并直接调用函数，例如：

```
#include :3rdparty.h
int main(){
  dostuff(); // a function in the 3rdparty.dll
} 
```

这将编译并运行良好。我只需要在 g++ 命令中链接库。当与 -shared 标志链接时，我会收到这些错误（当然删除了 main ）。我认为这与默认情况下 g++ 尝试从 dll 导入所有符号这一事实有关。我不明白为什么会在 dll 和可执行文件中发生这种情况。我将尝试使用 GetProcAddress()。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T18:26:31.423

它应该像您认为的那样简单。

例如：您的 dll 代码需要：

```
void doStuff()
{
  3rdparty.login();
  3rdparty.dostuff();
  3rdparty.logoff();
}; 
```

到目前为止 - 太好了，你已经包含了正确的标题....（如果你有它们，如果你没有，那么你需要使用 LoadLibrary() 导入库，然后创建一个指向每个导出的 dll 入口点的函数指针使用 GetProcAddress() 然后调用该函数指针）

然后你链接到第 3 方库，就是这样。有时，您必须使用“extern "C"”来包装定义，以便正确处理链接名称。

正如您所说，您使用的是 g++，您不会与 __declspec(dllimport) 混淆，它是一个 MS VC 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T13:03:22.730

“编译”告诉我你从错误的一端接近这个。您的 DLL 不应导出自己的包装函数，而应直接引用其他 DLL 的导出。

例如，在 Windows Kernel32.DEF 文件中，存在以下转发：

```
   出口
   ...
   HeapAlloc = NTDLL.RtlAllocHeap

```

HeapAlloc 函数没有代码。

# macos - 在 Parallels 下运行的 Visual Studio 2005 中打开解决方案文件时出现问题

> ID：675588
> 
> 赞同：0
> 
> 时间：2009-03-23T23:14:04.000
> 
> 标签：macos, visual-studio-2005, parallels

我在工作的 Windows 机器上用 C# 在 Visual Studio 2005 上编写了一个简单的程序。我试图在我的 Mac 上的 Parallels 内部的 Visual Studio 2005 中在家中打开解决方案文件，但出现错误：

`Unable to read the project file 'filename.csproj'. Invalid URI: The hostname could not be parsed.`

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T23:28:23.843

奇怪的是项目文件引用的主机名仅在您的工作网络中有效。您必须找到它所引用的主机名，然后手动将其更改为可在您家中的网络中使用的主机名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:57:20.933

好吧，我想通了。共享文件夹是对 Visual Studio 无效的 .psf。

如果有人感兴趣：

1.  在 Parallels 中的 XP 中，将网络驱动器“X”映射到“主”文件夹。
2.  使用 Visual Studio 在联网驱动器中打开解决方案文件
3.  完毕。

# java - JVM 将内存发送回操作系统

> ID：675589
> 
> 赞同：19
> 
> 时间：2009-03-23T23:15:32.297
> 
> 标签：java, memory-management, jvm

我有一个关于 JVM 内存管理的问题（至少对于 SUN 来说）。

我想知道如何控制JVM将未使用的内存发送回操作系统（在我的情况下是Windows）。

我写了一个简单的 java 程序来说明我的期望。使用 -Dcom.sun.management.jmxremote 选项运行它，以便您还可以使用 jconsole 监控堆。

使用以下程序：

```
package fr.brouillard.jvm;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.LinkedList;
import java.util.List;

public class MemoryFree {
    private BufferedReader reader = new BufferedReader(new
        InputStreamReader(System.in));
    private List<byte[]> usedMemory = new LinkedList<byte[]>();
    private int totalMB = 0;
    private int gcTimes = 0;

    public void allocate(int howManyMB) {
        usedMemory.add(new byte[howManyMB * 1024 * 1024]);
        totalMB += howManyMB;
        System.out.println(howManyMB + "MB allocated, total allocated: " +
                totalMB + "MB");
    }

    public void free() {
        usedMemory.clear();
    }

    public void gc() {
        System.gc();
        System.out.println("GC " + (++gcTimes) + " times" );
    }

    public void waitAnswer(String msg) {
        System.out.println("Press [enter]" + ((msg==null)?"":msg));
        try {
            reader.readLine();
        } catch (IOException e) {
        }
    }

    public static void main(String[] args) {
        MemoryFree mf = new MemoryFree();
        mf.waitAnswer(" to allocate memory");
        mf.allocate(20);
        mf.allocate(10);
        mf.allocate(15);
        mf.waitAnswer(" to free memory");
        mf.free();
        mf.waitAnswer(" to GC");
        mf.gc();
        mf.waitAnswer(" to GC");
        mf.gc();
        mf.waitAnswer(" to GC");
        mf.gc();
        mf.waitAnswer(" to GC");
        mf.gc();
        mf.waitAnswer(" to exit the program");

        try {
            mf.reader.close();
        } catch (IOException e) {}
    }
} 
```

一旦第一次 GC 完成（预期的），内部堆是空闲的，但内存仅从第三次 GC 开始发送回操作系统。第四次之后，将全部分配的内存发送回操作系统。

如何设置 JVM 来控制这种行为？事实上，我的问题是我需要在服务器上运行多个 CITRIX 客户端会话，但我希望服务器上正在运行的 JVM 尽快释放内存（我的应用程序中只有几个高消耗内存功能）。

如果这种行为无法控制，我是否可以让它像这样并增加操作系统虚拟内存并让操作系统根据需要使用它而不会出现大的性能问题。例如，在具有足够虚拟内存的 4GB 服务器上拥有 10 个 1GB 内存的 java 进程（堆中只有 100MB 实际分配的对象）会不会有问题。

我猜其他人已经面临这样的问题/问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-23T23:42:41.267

要控制堆返回操作系统，从 Java 5 开始，使用`-XX:MaxHeapFreeRatio`选项，如[调优指南](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html#0.0.0.%20Total%20Heap|outline)中所述。

[如果您觉得您的问题与此](https://stackoverflow.com/questions/324499/java-still-uses-system-memory-after-deallocation-of-objects-and-garbage-collectio)问题有明显不同，请指出如何。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-23T23:27:02.130

首先， System.gc() 还不如什么都不做。您真的不能依靠它按照您建议的方式进行垃圾收集。

其次，您需要使用 GC 来监控实际发生的情况

```
-verbosegc -XX:+PrintGCDetails 
```

在您调用 java.util. 或者通过使用 JConsole，这听起来像是您正在做的。但是那个 System.gc() 让我害怕你在计算错误的东西......

我怀疑当您说第二次或第三次垃圾收集是在释放内存时，您只是误算了垃圾收集。对 GC 的请求不是 GC！因此，请检查PrintGCDetails 打印出的日志（[以这种方式解释它们）。](http://java.sun.com/docs/hotspot/gc1.4.2/example.html)

> 事实上，我的问题是我需要在服务器上运行多个 CITRIX 客户端会话，但我希望服务器上正在运行的 JVM 尽快释放内存（我的应用程序中只有几个高消耗内存功能）。

虽然您的问题是有效的，但您要寻求的解决方案有点可疑。正是因为这个原因，JVM 需要一个堆大小——这样才能保证在这个空间中运行。看起来你倾向于启动一个应用程序，然后等待 JVM 缩小它的堆大小，然后再启动另一个这样的你超额预订了机器上的资源。不要那样做，因为一旦应用程序占用的内存比你想象的要多，它就会爆炸，但它是有权获得的。

我完全相信您不希望以这种方式对 Java 堆进行微管理。

阅读足够的[http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html](http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html)以了解世代以及更大/更小堆的权衡是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T23:32:17.547

在您看到明显的放缓之前，我不会担心它。如果进程分配了未使用的内存，则操作系统将根据需要将未使用的块交换到磁盘。

# java - 如何让 java 1.6 小程序在 mac os x 上运行

> ID：675591
> 
> 赞同：3
> 
> 时间：2009-03-23T23:16:25.603
> 
> 标签：java, applet, jdk1.6

有人在 mac os x 上安装了 java 1.6 小程序吗？在 gemal.dk/browserspy/java.html 上查看我使用 Apple Inc. 的对象和小程序标签 1.5.0_16 (1.5.0_16-133) 获得了 Java，你呢？

在 Windows 和 linux 1.6 上正常工作：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T23:56:26.753

在 Leopard 上，打开`/Applications/Utilities/Java/Java Preferences.app`并选择 Java 6 作为您的小程序的默认值。当然，如果您没有运行 Leopard 的 Intel Mac（至少，我认为它需要 Leopard……也许有 Tiger 的安装程序），这将不起作用。在任何一种情况下，如果您需要向用户部署基于 1.6 的小程序，则不可靠，但可以为您自己的冲浪工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:30:21.670

应该有一个已安装的 Java JRE 选择器......有类似的障碍，给它一个高峰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-31T08:06:24.367

这是 OSX 本身的一个问题，它不支持 applet 上的 1.6，现在一切都已更新并且可以在 10.6.6 上运行，至少我在这里写了它，所以有人不要将此问题与另一个问题混淆。

# java - 无法在 JInternalFrame GUI 组件中更新标题

> ID：675593
> 
> 赞同：0
> 
> 时间：2009-03-23T23:17:36.020
> 
> 标签：java, eclipse, user-interface, components, jinternalframe

我正在尝试更新我的 Java 项目中的 JInternalFrame 组件的标题。

该组件是我的 ImageFrame 类的一个实例，它扩展了 JInternalFrame，在我的代码中，我在我的 ImageFrame 类中调用了一个 setter 方法来更新 title 属性。我运行了一个单元测试并且知道该属性正在正确更新，但我不知道如何刷新组件以显示新标题。

有任何想法吗？

仅供参考：我无法让 .repaint() 做到这一点。

这是代码：

```
File selectedFile = fileChooser.getSelectedFile();        // Gets File selected in JFileChooser
try {
    ImageReadWrite.write(img, selectedFile);              // Writes Image Data to a File
    frame.setFilePath(selectedFile.getAbsolutePath());    // Changes File Location Attribute in Instance Of ImageFrame
    frame.setFileName(selectedFile.getName());            // Changes Window Title Attribute
    //frame.??
}
catch (Exception event) {
    event.printStackTrace();
} 
```

所以我在这里需要知道我应该添加什么来使组件更新为新标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-23T23:38:38.483

您可以尝试替换：

```
frame.setFileName(selectedFile.getName()); 
```

和

```
 frame.setTitle(selectedFile.getName()); 
```

我不知道您的代码，但 setFileName 不是 JInternalFrame 公共接口的一部分。

可能您添加了该方法，可能没有。试试我的建议，看看是否有帮助。

# objective-c - 如何防止 OS X 文本布局引擎使用从右到左的文本自动“翻转”行？

> ID：675596
> 
> 赞同：1
> 
> 时间：2009-03-23T23:20:01.163
> 
> 标签：objective-c, cocoa, macos, unicode, layout

如何使 Apple 的 Cocoa GUI 控件*不会*自动“翻转”包含从右到左文本（例如阿拉伯语）的行？

看我的测试用例，我计划`**`在屏幕上打印时将星号 ( ) 保留在行的开头：

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[])
{
    NSAutoreleasePool *autoReleasePool = [[NSAutoreleasePool alloc] init];

    NSString *str1 = @"** english first then arabic تجر\n";
    NSString *str2 = @"** تجر arabic first then english\n";
    [str1 writeToFile:@"/dev/stdout" atomically:NO encoding:NSUTF8StringEncoding error:NULL];
    [str2 writeToFile:@"/dev/stdout" atomically:NO encoding:NSUTF8StringEncoding error:NULL];

    [autoReleasePool release];
    return 0;
} 
```

当我在 Terminal.app 中运行它时，我得到：

```
$ gcc -framework Foundation test.m
$ ./a.out
** english first then arabic تجر
arabic first then english تجر ** 
```

但是，在 iTerm 中，这些行不会“翻转”：

```
$ gcc -framework Foundation test.m
$ ./a.out
** english first then arabic تجر
** تجر arabic first then english 
```

根据对 iTerm 代码的一些粗略检查，这似乎是由于 iTerm 对输出的“手动”逐个字符处理以及 Terminal.app（假定）使用 OS 原生字符串布局 API。有什么方法可以防止这种“翻转”在使用时发生，例如，`NSTextView`显示这些类型的字符串？我在 Apple 的文档中找不到任何答案。

我正在运行英语 Mac OS 10.5.6，英语作为*System Preferences > International > Language*下列表中的#1 语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T23:36:01.687

你有没有尝试过：

```
[nstextviewobj setBaseWritingDirection:NSWritingDirectionLeftToRight]; 
```

此方法在`NSText`父类中。

# javascript - 哪个 JavaScript 图形库性能最好？

> ID：675602
> 
> 赞同：8
> 
> 时间：2009-03-23T23:22:10.207
> 
> 标签：javascript, graphics

我正在为一个 JavaScript 项目做一些研究，其中绘制简单基元（即线条）的性能是迄今为止的首要任务。

[这个问题](https://stackoverflow.com/questions/221710/are-there-any-good-javascript-graphics-libraries)的答案提供了一个很棒的 JS 图形库列表。虽然我意识到浏览器的选择比库的影响更大，但我想知道它们之间是否有任何区别，然后再选择一个。

有没有人对这些中的任何一个进行过性能比较？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-25T19:46:43.577

**更新答案（2019）：**

核心建议仍然是一样的：为了获得最大性能，使用瘦包装器或使用原始浏览器 API，同时避免使用 DOM 或任何类似 DOM 的结构。在 2019 年，这意味着避免使用 SVG（以及任何基于它构建的库），因为它在尝试快速更改 DOM 时可能会导致性能问题。

Canvas 是高性能 Web 图形的首选解决方案，适用于 2d 和 3d (webgl) 上下文。Flash 已死，因此不再是一种选择，但即使它不是，它的性能最终也能与本机浏览器 API 相匹配。

**原始答案（2009）：**

如果您不做 3d，只需使用原始画布和 excanvas 作为资源管理器后备。您的瓶颈将是 javascript 执行速度，而不是行渲染速度。除了 IE，当场景变得过于复杂时，它会陷入困境，因为 VML 实际上构建了一个 dom。

但是，如果您真的担心性能，请务必使用 flash 并将整个内容写在 actionscript 中。您将获得一个数量级的更好性能，并且使用 flex sdk，您甚至不需要购买任何东西。在 flash/flex 中有几个不错的 3d 库可用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-04-26T04:31:10.127

拉斐尔 JavaScript 库

[http://raphaeljs.com](http://raphaeljs.com)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-23T23:24:55.020

他们都没有很好的表现。现在是 2009 年，Web 浏览器中可编程图形渲染的状态确实令人沮丧。25 年前，我可以在 vt125 终端上进行更快的交互。如果您正在做任何互动，请考虑使用 Flash ...否则我会根据您的需要选择一些服务器端的重型解决方案

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-01-25T17:41:24.590

到目前为止 - 使用[processing.js](http://processingjs.org/ "处理.js")（“处理”语言的 javascript 画布实现）和/或[raphael.js](http://raphaeljs.com/ "拉斐尔.js")（小巧方便的 VML/SVG javascript 库）。

性能建议取决于任务：

*   高度动态、复杂的基元（或大量） - 画布（像素，低级 API）

*   更少的基元，高度可扩展，集成在 DOM - SVG/VML（矢量，高级 API）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T00:40:13.403

对于基本绘图（例如线、圆和多边形），我会推荐[Walter Zorn 的图形库](http://www.walterzorn.de/en/jsgraphics/jsgraphics_e.htm)。它在构建时考虑了性能，并且可以在大量浏览器中使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-24T01:58:25.807

我知道你说浏览器的影响更大，那么为什么不坚持使用优化的 SVG 调用呢？然后，它“可以”在所有浏览器中工作，但是......

Chrome 足够强大，可以有效地渲染 3D 建模：

[http://www.chromeexperiments.com/detail/monster/](http://www.chromeexperiments.com/detail/monster/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-01-04T06:55:36.040

[http://www.jsgl.org](http://www.jsgl.org)怎么样？它使用 SVG/VML。

# database-design - Mnesia 中的安全、顺序和可扩展的计数器

> ID：675608
> 
> 赞同：2
> 
> 时间：2009-03-23T23:24:11.730
> 
> 标签：database-design, erlang, mnesia

我正在用 Erlang/OTP 编写一个应用程序，并希望在版本记录系统上使用顺序计数器。

我首先用

```
mnesia:dirty_update_counter
```

但是使用它的经验排除了这些硬性要求：

计数器必须具有以下属性：

*   严格按顺序排列 - 1 后跟 2 后跟 3 依此类推，依此类推，该序列在一组分布式系统中共享，如果我将您视为“3”而您进入“5”，我需要知道我们已经输了一些通讯，应该重新同步

*   使用分布式数据库安全

```
mnesia:dirty_update_counter
```

都不符合这些要求。

如何实现顺序数据库计数器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T03:57:39.607

我将建议一个为您提供数字的 erlang 进程。由于 erlang 按顺序处理消息，因此您可以保证按顺序获取它们。以某种方式坚持它们是必要的。上面的 RabbitMQ 建议是一种方法，但如果您觉得它有点过头了，那么只需定期将进程存储到文件中就足够了。一个 gen_server 应该足以满足您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-27T03:47:55.287

您是否考虑过消息代理？[您可以通过加载RabbitMQ](http://www.rabbitmq.com)并设置持久队列和持久消息将其保存在 Erlang 中。构建一个消费者，将消息正文中的数字加 1，然后在新消息中将该新数字发布回队列，因为它确认原始数字。

不确定它是否适合您，但似乎一旦您手动发布正文中带有 1 的第一条消息，您就会关闭并运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-12T22:38:31.003

Perhaps the simplest answer is what you are looking for, simply by getting a write lock (for replicated syncing) and making a transactional function that gets the current value of the counter, increments it and saves it back to the DB. Certainly you will get increased overhead as the system scales, but I would recommend writing a server that does this for you and run that on a subset of the nodes, so the lock contention is not directly linked with the cluster size.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-25T18:41:15.590

好吧，由于 Mnesia 数据不能保证以原子方式复制，因此您必须以某种方式手动锁定。我看到了三种选择（两种有锁定，一种没有）：

*   在请求新版本号时使用表上的读锁。不过，这意味着交易。

*   使用中央服务器来跟踪版本号并自动增加它们，例如通过在您要求版本号的节点之一上设置一个进程。

*   将您的服务器与 NTP 同步并使用时间戳。

# c# - 使用 get vs property vs 方法

> ID：675612
> 
> 赞同：3
> 
> 时间：2009-03-23T23:26:12.240
> 
> 标签：c#

如果我在一个类中有一个私有属性，我想知道以下三种场景（内存使用、可用性、最佳实践等）在技术上的区别是什么：

```
class testClass
{
     private string myString1 = "hello";

     private string myString2 { get { return "hello"; } }

     private string myString3() { return "hello"; }
} 
```

除了显然能够在 myString1 中而不是在 myString2 或 myString3 中设置值之外，我想知道更多关于这些在效率方面有何不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-24T00:00:22.220

我尽量遵守这些规则：

*   字段应保密
*   应该使用属性来公开数据
*   应该使用方法来执行操作

显然在某些情况下，每一次性能下降都很重要，但总的来说，我会尝试遵循最佳实践，直到分析告诉您需要优化。

这里有一篇好文章：[为什么属性很重要](http://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-23T23:31:19.297

如果某些东西是动态计算的，我个人更喜欢没有副作用和显式吸气剂的东西的属性。例如：

```
class User {
    private string username;

    public string Username {
        get { return username; }
        set { username = value; }
    }

    public Post GetLatestPost() {
        // query the database or whatever you do here.
    }
} 
```

我见过的很多 API 似乎都这样做。希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-23T23:41:55.540

尽管在使用方面非常相似，但所有这些方法在编译成什么方面都非常不同。我将尝试简要总结差异：

1.  这是一个简单的私有实例变量。引用时它很容易成为最有效的。

2.  这是一个只读属性（即一个 get 但没有 set 访问器）。

3.  这是一个普通的无参数函数。我怀疑您只是提供这些示例纯粹是为了进行比较，并意识到这样的功能完全没有用（在几乎所有情况下，私有属性也是如此）。布局（即一条线上的所有内容）也相当可怕。

与方法 1 相比，方法 2 和 3 的效率同样低，因为它们都涉及函数调用的开销。我不知道它们都编译成的 CIL 代码（也许其他人可以生成），但它们肯定涉及更多指令，而引用`myString1`应该只需要 CIL 中的一条指令。

不确定我是否可以在不了解更多上下文的情况下对最佳实践做出非常有用的评论，但方法 2（即私有财产）通常被认为毫无用处。我认为永远不应该使用第三种方法（它乞求变成财产）。我认为您真正想要的只是一个普通的旧私有变量，所以一定要进行第一个声明。公共值应始终作为属性访问，而不是类中的变量（即属性的私有/受保护的支持变量），但这与您的问题稍有无关。（无论如何，您可以在快速搜索中找到大量讨论该问题的资源。）最后，请注意，如果您的“属性”将是只读的（即在任何时候都不会修改），那么您真的想使用一个常量，即`private const string myString1 = "hello";`。

希望这有助于澄清一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-23T23:35:55.633

这是个好问题：

你有这个选择：

```
private string myString = "hi!";   //Private Field

public string MyString             //Property created to the private field
{
  get {return myString;}
}

public string myString {get; private set;}   //VS2008 automatic properties

public string getMyString()                  //Method Way
{
   return myString;
} 
```

正如你所看到的想法是一样的，不违反封装原则。用你觉得更舒服的，都可以达到目的，但是我推荐属性方式或者VIsual Studio 2008的自动属性。

比方法更简洁明了。

希望这可以帮助！

问候！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-23T23:36:48.907

就最佳实践而言，

```
class testClass
{
   private string _myString;

   public string myString { get { return _myString; } set { _myString = value; } }

   public testClass()
   {
      myString = "Hello";  // Initial value.
   }
} 
```

通常建议使用它，因为它实现了封装（隐藏内部状态，以便所有操作都通过方法/接口）。当然，setter 和 getter 通常是方法本身。

在 C# 3.0 中，您可以将上述内容替换为：

```
class testClass 
{    
  public string myString { get; set; }

  public testClass()
  {
      ...
  }
} 
```

就效率而言，您真的*不*应该考虑直接访问变量是否比属性更*有效的设计。*差异是如此之小（如果有的话），最佳实践指南如此清晰，以至于您只是误入歧途担心效率。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-23T23:44:54.537

以上所有关于设计、风格等的讨论都是有效的。但问题是关于性能。很容易测试。在每个调用周围包裹一些计时器，重复到 int32.Max。在我的机器上，下面的代码显示 myString1 快得多。（请注意，我必须更改类定义以公开成员）：

```
 private void button2_Click(object sender, EventArgs e)
    {
        //performance test
        testClass t = new testClass();
        System.Diagnostics.Stopwatch sw1 = new System.Diagnostics.Stopwatch();
        sw1.Start();
        for (int i = 0; i < int.MaxValue; i++)
        {
            string result = t.myString1;
        }
        sw1.Stop();

        System.Diagnostics.Stopwatch sw2 = new System.Diagnostics.Stopwatch();
        sw2.Start();
        for (int i = 0; i < int.MaxValue; i++)
        {
            string result = t.myString2;
        }
        sw2.Stop();

        System.Diagnostics.Stopwatch sw3 = new System.Diagnostics.Stopwatch();
        sw3.Start();
        for (int i = 0; i < int.MaxValue; i++)
        {
            string result = t.myString3();
        }
        sw3.Stop();
        MessageBox.Show(string.Format("Direct: {0}, Getter: {1}, Method: {2}"
            , sw1.ElapsedMilliseconds.ToString()
            , sw2.ElapsedMilliseconds.ToString()
            , sw3.ElapsedMilliseconds.ToString()));
    }

class testClass 
{ 
    public string myString1 = "hello";
    public string myString2 { get { return "hello"; } }
    public string myString3() { return "hello"; } 
} 
```

# c++ - boost::asio::ip::tcp::resolver::resolve() 永远阻塞

> ID：675614
> 
> 赞同：5
> 
> 时间：2009-03-23T23:26:42.333
> 
> 标签：c++, boost, g++, boost-asio, resolver

我正在尝试创建与boost.asio 示例中的[此代码类似的内容。](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_client.cpp)

套接字.h：

```
class some_class {
private:
    ...
        boost::asio::io_service io_service;
public:
        some_class() {
             /* This stuff isn't used in the example...
               ...but it doesn't change anything... */
             io_service.run();
        }
}; 
```

套接字.cpp：

```
using boost::asio::ip::tcp;

bool some_class::connect(char* host, char* port) 
{
    printf("Resolving hostname...\n");

    /* Resolve hostname. */
    tcp::resolver resolver(io_service);
    tcp::resolver::query query(tcp::v4(), host, port);
    tcp::resolver::iterator iterator = resolver.resolve(query);

    printf("Connecting to %s:%s... ", host, port);

    /* Connect to resolved hosts. */
    sock->connect(*iterator);

    return true;
} 
```

g++ 构建它没有任何错误，但代码永远不会超过 resolver.resolve() 调用。
我已经为主机尝试了“127.0.0.1”和“localhost”，为端口尝试了“80”。（不认为这应该重要，但 apache2 已启动并正在运行）

当我 ctrl+c 退出我的应用程序时，它显然会终止，但它会在它之前输出“连接到字符串”。

我计划自己构建示例并查看是否出现相同的问题，并且肯定会在此处发布结果。有没有人遇到过这个问题或知道什么可能导致这种行为？

编辑：
这个例子运行得很好......我想我有一些调试要做。

第二次编辑：
我不明白，唯一可能不同的是主机/端口。
示例使用 char* argv[] 我正在使用：

```
char host[] = "localhost";
char port[] = "80"; 
```

第三次编辑：
它确实似乎在连接时阻塞，忘记了 fflush（stdout）。那么肯定是socket有问题了。要做更多的测试。

第四次编辑：
愚蠢的我，它根本没有阻塞！我只是过于依赖控制台输出..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T00:11:37.497

它可能在 printf 之后阻塞了连接调用。

stdout 默认情况下是行缓冲的，并且由于您的 printf 字符串末尾没有 \n，因此您将看不到它的输出。当您终止程序时，缓冲区正在被刷新，这就是您看到该消息的原因。

# svn - Synchronize SVN through FTP

> ID：675615
> 
> 赞同：2
> 
> 时间：2009-03-23T23:26:47.217
> 
> 标签：svn

My team is working with a group at another company with pretty stringent IT policies. We are not allowed any direct access to their SVN server. They are not allowed to access our SVN server. The only option we've been given is access to a shared FTP server. So, I'm looking for suggestions for keeping our repositories in synch. Note that this FTP server is the *only* communication mechanism other than email so svn:externals are not an option.

My current thought is a nightly (or as often as needed) diff/patch going in both directions. For what it's worth we're each working of pretty independent components so the chances of conflicts is pretty low.

Any better ideas?

Edit: I realize that I should "fight the man" a bit on this, but it has been weeks and the FTP (presumably SFTP) is not even in place yet. Thus I'm looking for clever solutions. The nature of our industry and the system we're working on precludes 3rd party storage of the code. Yes, this is silly and bureaucratic. Way it goes :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-23T23:29:57.177

You could use [git-svn](http://git-scm.com/docs/git-svn) on both sides and synchronize/exchange your [Git](http://git-scm.com/) repositories using the FTP connection.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-23T23:51:24.160

Why are you allowed an FTP server and no HTTP or SSH access?

If you're concerned about security, plain FTP certainly isn't providing it, and SFTP requires SSH anyway, so you could use SSH/SCP to synchronize with repositories (this works much better with Git than SVN, as most version control tasks do).

SVN can be utilized over HTTP without much fuss -- why not just run a nightly checkout and throw it up on an HTTP server that everyone can access, take their patches there, and only merge into the general working SVN repository when you like the patches you get?

And, not to beat a dead horse, but Git is more than worth the investment it takes to switch. Please consider switching.

Basically, that setup is non-sensical, and you should stand up to the thoughtless bureaucrats who've implemented it and try and find a workable solution where you can share at least somewhat directly some version control mechanisms, even if they're not first-level repositories that your groups use as their primary source control systems.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T00:27:22.920

如果您仅限于 FTP，我支持您当前的想法。FTP 不是“实时”传输协议；无论传输的文件如何，您都需要两端的观察者来注意到放置文件夹中的更改。

如果您的付费客户已经制定了需要一点创造力的参与条款，那就这样吧。使用`svn diff`、补丁、一些 cron 脚本和大量的电子邮件通知，以防出错。

过去曾与政府和大型企业实体合作过的任何人都会同情你的立场。事实上，有很多财富 100 强公司使用“投递箱模式”是有充分理由的……它确实创建了一定程度的间接攻击，这对于高目标或大容量站点很有用。很烦人，是的，但是直到你穿着他们的鞋子走一英里之前，真的值得推回去吗？毕竟，另一端的开发人员可能和您一样对这些限制感到不满，但是每个人都希望克服这些限制并尽可能地交付工作代码。

为“未来项目......在适当的时刻”提出替代技术建议，但要迎合当前项目的限制和要求。一旦您在客户中建立了信誉，就更容易提出将被采纳的建议。

现在，您可以编写最好、最强大的基于 FTP 的 SVN 合并脚本……会很有趣！

**编辑：**看来你并不孤单。我从来没有使用过这个项目，所以我不能相信它，但描述至少承认你的问题：[svn2web](http://sourceforge.net/projects/svn2web)。“Subversion 提交前或提交后挂钩，可用于通过 sftp 或 ftp 在同一或不同服务器上复制提交的文件。”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-24T01:12:50.423

我遇到了类似的情况，我们最终使用了[bazaar](http://bazaar-vcs.org/)而不是 subversion，因为它支持只使用 FTP 或 SFTP（不需要另一端的客户端程序）来读取/写入远程存储库。

您没有提及您的操作系统，但如果您使用的是 Windows，bazaar 附带 TortoiseBzr，如果您已经使用 TortoiseSVN，您会很熟悉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-24T00:24:41.850

我会建议一些回击。严格的 IT 政策的好处在于，这通常意味着有一个既定的更新政策的流程。确定流程可能具有挑战性，特别是如果您还“玩电话”（即您不能直接与其他人交谈）。

毫无疑问，源代码控制是最佳实践。禁止访问公共源代码控制存储库的策略不是最佳实践。仅提供源代码控制的中立第三方可能是最佳解决方案（“svn 托管”的大量点击）。您甚至可以通过 Apache 在端口 80（或 443）上安排 svn 托管......因此不需要防火墙调整。

由于没有共享源存储库的开销，我还建议 PM 为每个任务添加 X 分钟（甚至可能每周添加几个小时的“修复源存储库任务”）。我当然会考虑花一些时间和精力来跟踪该过程所涉及的工作（如果该过程每周只吃 1 小时，那么跟踪的时间仍然很重要）。

另外......只是好奇......你会用这个方案运行一个持续集成服务器吗？也许我很悲观，但我预计由于合并问题会有很多损坏的构建......而且几乎每次它看起来都像是对方的错。我想知道这个方案是否排除了 CI（又一个最佳实践）？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-24T00:59:16.120

他们无法为您创建一个分支并让您访问它，这似乎很奇怪。这样，如果有任何问题，他们根本不需要合并您的分支。

# version - 是否有一项任务可以将您的架构版本精确地推进或后退一个？

> ID：675617
> 
> 赞同：0
> 
> 时间：2009-03-23T23:27:20.460
> 
> 标签：version, rake, migrate

回到当您创建迁移时迁移版本号只是增加的时候，这很容易做到：

```
rake migrate VERSION=097
rake migrate VERSION=098
rake migrate VERSION=099
rake migrate VERSION=100 
```

...但我们现在有类似于 YYYYMMDDtimeofday 的迁移数字。并不是说这是一件坏事——它将迁移版本冲突保持在最低限度——但是当我有 50 个迁移并且想要一次完成一个迁移时，这很麻烦：

```
rake migrate VERSION=20090129215142
rake migrate VERSION=20090129219783 
```

...ETC。我必须在我面前打开所有迁移的列表，输入版本号以推进一个。是否有任何语法更简单的东西，例如：

```
rake migrate VERSION=NEXT 
```

或者

```
rake migrate VERSION=PREV 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-04-05T07:35:39.427

您也可以回滚到非常旧的版本。

> rake db:rollback VERSION=YYYYMMDDtimeofday

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:46:24.377

您使用 回滚到之前的迁移`rake db:rollback`。不过，您似乎不能只进行一次迁移。

# .net - 实体框架：有没有办法检查上下文是否有对象？

> ID：675625
> 
> 赞同：2
> 
> 时间：2009-03-23T23:31:57.233
> 
> 标签：.net, entity-framework, objectcontext

情况：来自过去上下文的会话中的对象不能设置为另一个对象的父对象，因为另一个对象位于新上下文中。

假设我在会话中有一个从上下文中检索到的用户。现在页面重新加载，该上下文已被解除，并创建了一个新上下文。

```
someUser = context.First(user => user.id == id);
Session["SomeUser"] = someUser
...
context.Dispose(); 
```

页面重新加载

```
userAddress = new UserAddress();
userAddress.User = (User)Session["SomeUser"]; //BOOM NOT IN SAME CONTEXT 
```

我想做的是：

```
if(!context.SomeUsers.Contains((User)Session["SomeUSer"]) //Only check context NOT DATABASE
{
   //Reload from database
   //Set user in session to new object
} 
```

这个想法是，如果会话中的对象不属于当前上下文，则从数据库中重新加载它，以便它现在由与当前上下文中的所有其他对象相同的上下文“拥有”。（我使用每个请求的上下文）

**更新**

所以我暂时这样做了，直到我能更好地了解如何解决这个问题：

```
Int32 sessionUser = sessionUser .UserID;
var userCheck = EntityContext.Context.ChatUsers.First(item => item.UserID == returnValueID);
if (userCheck != sessionUser)
{
   sessionUser = userCheck;
} 
```

这个想法是查看会话中的对象（sessionUser）是否与上下文中的对象相同。现在 if 工作得很好。第一次创建上下文时，应该访问数据库并获取用户。一旦比较，很明显它们是不一样的，并且 sessionUser 现在是上下文中的用户。下次如果选中，sessionUser 和 userToCheck 是相同的。

问题仍然是：

```
var userCheck = EntityContext.Context.ChatUsers.First(item => item.UserID == returnValueID); 
```

总是命中数据库。这不是一个好的解决方案。

**更多更新**

嗯，毕竟这可能是答案。我忘记了这条规则：

> x 是 ObjectQuery 类型的属性。当您执行 ObjectQuery 时，它总是会命中后备存储。他们就是这样做的。如果您不想执行数据库查询，请不要使用 ObjectQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T14:40:41.513

好的，我知道了。

```
ChatUser userCheck = (ChatUser)EntityContext.Context.GetObjectByKey(returnValue.EntityKey);

if(userCheck != returnValue)
{
   sessionUser = userCheck;
} 
```

GetObjectByKey 方法描述为：

> GetObjectByKey 尝试从 ObjectStateManager 检索具有指定 EntityKey 的对象。如果对象当前未加载到对象上下文中，则执行查询以尝试从数据源返回对象。

做了一些测试，它按照它说的做了。第一次通过（根据请求创建上下文）它会访问数据库并根据会话中的内容检查该对象。两者不同，因此它将 sessionUser 设置为新对象，因此现在 sessionUser 在上下文和会话中。下一次 GetObjectByKey 方法只检查上下文（因为 Profiler 显示没有数据库交互）。耶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T23:42:28.987

为什么不只检查用户 ID？

```
context.Users.Any(user => user.Id = ((User)session["SomeUser"]).Id) 
```

或者，您可能只是将用户对象从旧上下文中分离出来，然后使用 Context.Attach() 将其附加到新上下文。

# iphone - CoreAudio AudioTimeStamp.mHostTime 时钟频率？

> ID：675626
> 
> 赞同：23
> 
> 时间：2009-03-23T23:32:02.430
> 
> 标签：iphone, objective-c, audio

我在 iPhone 上的 AudioTimeStamps 遇到了一些问题。当我在模拟器中运行我的应用程序时，AudioTimeStamp.mHostTime 似乎以纳秒为单位（1,000,000,000 秒），而在我的设备（iPod Touch 2G）上运行时，频率似乎约为 6,000,000 秒。

在 OS X 上似乎有一个函数（CoreAudio/CoreAudioTypes.h 中的 AudioConvertHostTimeToNanos）将 HostTime 转换为纳秒和从纳秒转换，但这个函数不在 iPhone 标头中。

有没有办法在运行时找出 mHostTime 的速率？或转换为秒、纳秒或任何其他单位？这个值会在软件或硬件版本之间改变吗？（就像它在模拟器和我的设备之间一样）

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2010-05-10T21:47:15.453

存在以下文件：

```
<mach/mach_time.h> 
```

在此文件中，您将找到一个名为`mach_absolute_time()`. `mach_absolute_time()`返回一个没有定义含义的 uint64 数字。想象一下那些是*ticks*，但没有地方定义一个 tick 有多长。只定义了四件事：

1.  `mach_absolute_time()`返回自上次启动以来的“滴答声”数。
2.  每次启动时，滴答计数器都从零开始。
3.  滴答计数器严格向上计数（它永远不会倒退）。
4.  滴答计数器仅在系统运行时计算滴答。

如您所见，滴答计数器与正常的系统时钟有些不同。首先，系统启动时系统时钟不会从零开始，而是以系统当前“挂钟时间”的最佳近似值开始。正常的系统时钟也不是严格向上运行的，例如系统时钟可能提前并且系统使用 NTP（网络时间协议）定期同步系统时间。如果系统在下一次 NTP 同步时发现它提前了两秒，它会将系统时钟调回两秒以进行更正。这经常会破坏软件，因为许多程序员依赖于系统时间从不倒退的事实；但它确实如此，并且被允许这样做。最后一个区别是系统睡眠时正常的系统时间不会停止，但系统睡眠时滴答计数器不会增加。当系统再次唤醒时，它只比它进入睡眠时间提前了几个滴答声。

那么如何将这些刻度转换为真正的“时间值”呢？

上面的文件还定义了一个名为的结构`mach_timebase_info`：

```
struct mach_timebase_info {
        uint32_t        numer;
        uint32_t        denom;
}; 
```

您可以使用该函数获得此结构的正确值`mach_timebase_info()`，例如

```
kern_return_t kerror;
mach_timebase_info_data_t tinfo;

kerror = mach_timebase_info(&tinfo);
if (kerror != KERN_SUCCESS) {
    // TODO: handle error
} 
```

`KERN_SUCCESS`（和可能的错误代码）定义在

```
<mach/kern_return.h> 
```

但是，此函数返回错误的可能性很小，并且`KERN_SUCCESS`等于零，因此您也可以直接检查是否`kerror`不为零。

将信息输入`tinfo`后，您可以使用它来计算“转换因子”，以防您想将此数字转换为实时单位：

```
double hTime2nsFactor = (double)tinfo.numer / tinfo.denom; 
```

通过将第一个数字转换为`double`，GCC 会自动将第二个数字转换`double`为 ，结果也将是`double`. 知道这个因素，在 Intel 机器上似乎是 1.0，但在 PPC 机器上可能完全不同（在 ARM 上也可能不同），很容易将主机时间转换为纳秒，将纳秒转换为主机时间。

```
uint64_t systemUptimeNS = (uint64_t)(mach_absolute_time() * hTime2nsFactor); 
```

systemUptimeNS 包含系统在上次启动和现在之间运行（非睡眠）的纳秒数。如果您将任何时间（以纳秒为单位）除以该因子，您将得到滴答数。这对于函数非常有用`mach_wait_until()`。假设您希望当前线程休眠 800 纳秒。以下是你的做法：

```
uint64_t sleepTimeInTicks = (uint64_t)(800 / hTime2nsFactor);
mach_wait_until(mach_absolute_time() + sleepTimeInTicks); 
```

**小提示：**如果您经常需要将时间值转换为刻度，通常（取决于 CPU）乘法比除法更快：

```
double ns2HTimeFactor = 1.0 / hTime2nsFactor; 
```

现在您可以乘以`ns2HTimeFactor`而不是除以`hTime2nsFactor`。

当然，每次需要时重新计算因子是浪费时间。这些因素是恒定的，它们在系统运行时永远不会改变。因此，您可以在应用程序开始附近的某个地方计算它们并保留它们直到应用程序再次退出。

在 Cocoa 中，我建议自己为上述所有内容编写一个静态类。`+(void)initialize`您可以在类的方法中计算任一转换的转换因子。Cocoa 保证这个方法在任何消息发送到这个类之前肯定会自动执行，它肯定只在应用程序运行时执行一次，并且肯定以线程安全的方式执行，所以你没有担心锁定/同步或原子操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-04T21:02:37.633

您需要使用`mach_timebase_info`结构来解决这个问题。

```
struct mach_timebase_info {
    uint32_t    numer;
    uint32_t    denom;
}; 
```

看：[`http://shiftedbits.org/2008/10/01/mach_absolute_time-on-the-iphone/`](http://shiftedbits.org/2008/10/01/mach_absolute_time-on-the-iphone/)

最简单的做法就是使用 Apple 为您提供的 CAHostTimeBase 帮助器类——Developer/Examples/CoreAudio/PublicUtility。

CAHostTimeBase.cpp 和 CAHostTimeBase.h - 做你需要做的一切。

# c# - C#：“表 'sometable' 不能是嵌套关系中自身的子表。”

> ID：675640
> 
> 赞同：1
> 
> 时间：2009-03-23T23:38:17.827
> 
> 标签：c#, web-services, api, httpwebrequest

```
public string GetArtistThumbnail(string artistName)
{
    var request =
        WebRequest.Create("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=" + artistName +
        "&api_key=" +
         APIKey) as HttpWebRequest;

    using (var response = request.GetResponse() as HttpWebResponse)
    {
        var ds = new DataSet();
        ds.ReadXml(response.GetResponseStream()); // <-- Exception is thrown here
    }

    return "";   
} 
```

上述方法基本上是从[LastFM 的 API Services](http://www.last.fm/api/intro)之一检索 xml 文件。

现在，使用该方法从 xml 填充数据集时，我面临以下**异常**`ReadXml`：

`The table (artist) cannot be the child table to itself in nested relations.`

* * *

这是正在检索的 XML 文件[的示例](http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=iron%20maiden&api_key=b25b959554ed76058ac220b7b2e0a026)

请注意，在 XML 文件中有一个嵌套`Artist`，我显然认为这就是异常的原因。

* * *

我的问题，我**怎样才能防止这种情况发生？关于嵌套表**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-23T23:59:39.273

据我所知，DataSet 并不是要保存任何类型的 XML。在这种情况下你真的需要数据集吗？

我建议切换到 linq 2 xml 或 XmlDocument 来操作 Web 服务的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T00:01:47.193

我认为 Freddy 的回答有其优点，但您可以在调用 ReadXml 之前手动定义 DataSet 架构，而不是依赖 xml 来定义架构。

您还可以尝试将 ReadXml 与 GetResponse 分开，并在调用 ReadXml 之前执行 xslt，即使架构与 DataSet 兼容。

远射...关闭 DataSet.EnforceConstraints

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-24T20:55:39.133

尝试使用 [http://ws.audioscrobbler.com/2.0/artist/iron+maiden/info.xml](http://ws.audioscrobbler.com/2.0/artist/iron+maiden/info.xml) 格式

# c# - Using WPF, can I (easily) implement a panel control that allows me to display a single element multiple times

> ID：675643
> 
> 赞同：1
> 
> 时间：2009-03-23T23:40:54.700
> 
> 标签：c#, .net, wpf

Interface functionality isn't important (right now) with the children, but it would be handy if there were some way to say that the child can be both "here" and "there" and that it should be treated as a single object.

I am implementing a repeating, scrolling viewer that treats its canvas as a repeating plane, and I would like to be able to have it intelligently repeat child elements when the size occupied by all the displayed objects is less than the size of the panel. That is, at least one element would be shown twice.

AFAIK, this isn't possible using a naive panel implementation? Is there some wizardry I can use to arrange an element on the screen twice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T03:09:09.647

I would just use two lists with the same information. I may not be the best for perfomance, (I have no data for or against), but if you're using a VirtualizingScrollViewer it will only render whats visible.

```
<Window>
  <Window.Resources>
    <local:MyDataSource x:Key="myDataSource" />

    <ItemsPanelTemplate x:Key="stackTemplate">
        <StackPanel IsItemsHost="True" />
    </ItemsPanelTemplate>
  </Window.Resources>
  <Border>

    <ScrollViewer>
      <StackPanel VirtualizingStackPanel.IsVirtualizing="True" DataContext="{StaticResource cusomtersDataSource}">
        <ItemsControl ItemsSource="{Binding Customers}" ItemsPanel="{StaticResource stackTemplate}" />
        <ItemsControl ItemsSource="{Binding Customers}" ItemsPanel="{StaticResource stackTemplate}" />
      </StackPanel>
    </ScrollViewer>
  </Border>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T07:24:51.200

Have you tried using a visualbrush with tiling, or if you want to be able to position the "mirrored" element independently use a Rectangle with the VisualBrush as Fill.

I´m not entirely sure that we are on the same track here...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T20:41:48.087

我认为不可能在两个位置渲染一个元素（因为每个元素都从 Measure/Arrange pass 跟踪它自己的大小/位置）。此外，您不能将元素作为孩子添加到两个父母，您会遇到异常。

VisualBrush 方法可能会让您最接近，但正如您对该答案的评论，它不是交互式的。您是否对显示 UIElements 感兴趣，或者您是否绑定到某些数据？如果您正在显示数据对象，您始终可以创建一个新的 ContentPresenter，并将其内容设置为数据对象。如果您正在显示 UIElement，则不确定是否有办法实现您的目标。

# c# - A question about run program

> ID：675650
> 
> 赞同：0
> 
> 时间：2009-03-23T23:44:03.197
> 
> 标签：c#, sql-server

How can I run my application (written in C#) and use a SQL Server database without having to install SQL Server first?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-23T23:48:04.373

If it needs to connect to a Microsoft SQL Server database in order to work, then you need to run it on a network where you have a Microsoft SQL Server installed somewhere.

You can use the SQL Server Express, found [here](http://www.microsoft.com/Sqlserver/2005/en/us/express.aspx), if you haven't gotten the full server available.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-23T23:54:19.520

You might use the [SQL Server 2008 Compact Edition](http://www.microsoft.com/Sqlserver/2008/en/us/compact.aspx). This will include a small version of the SQL Server as a DLL directly into your application. It has by far not all features of a stand alone server, but is often sufficent for simpler tasks.

If installing a server is not a problem, just get [SQL Server 2008 Express Edition](http://www.microsoft.com/sqlserver/2008/en/us/express.aspx). It is free, too, and somewhere between the power of the Comapct Edition and the comercial editions.

If the server is just running on a other machine, just change the connection string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T23:56:00.813

If your question is about running a database application without a database, which would be kind of odd, then you need to gracefully handle exceptions from the connection, and have an alternative execution path that does not require data, or gets data from somewhere else.

If your question is about running a database application without a LOCAL database, then that's easy, just point your data source to a remote database.

If your question is about something else, then I am totally confused.

# c# - “.NET 框架默认使用 UTF-16 编码标准”是什么意思？

> ID：675651
> 
> 赞同：17
> 
> 时间：2009-03-23T23:44:48.047
> 
> 标签：c#, .net, encoding, stream

我的学习指南（针对 70-536 考试）在文本和编码章节中说了两次，就在 IO 章节之后。

到目前为止，所有示例都与使用 FileStream 和 StreamWriter 进行简单文件访问有关。

它还说诸如“如果您在创建文件时不知道要使用哪种编码，请不要指定一个，.NET 将使用 UTF16”和“使用 Stream 构造函数重载指定不同的编码”之类的内容。

不要介意实际重载在 StreamWriter 类上的事实，但是，无论如何。

我现在正在反射器中查看 StreamWriter，我确信我可以看到默认值是实际的 UTF8NoBOM。

但是这些都没有在勘误表中列出。这是一本旧书（检查了两个版本的错误）所以如果它是错误的，我会认为有人已经拿起它......

让我想也许我没有理解它。

那么......任何想法它在说什么？其他有默认值的地方？

这让我完全困惑。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-03-24T00:22:19.267

“UTF-16”是一个令人讨厌的术语，因为它有两个容易混淆的含义。

第一个含义是一系列 16 位代码点。其中大部分直接对应同号的Unicode字符；基本多语言平面之外的字符（U+10000 以上）存储为两个 16 位代码点，每个代码点都是[Surrogate](http://en.wikipedia.org/wiki/UTF-16#Encoding_of_characters_outside_the_BMP)。

许多语言在这个意义上使用 UTF-16 用于内部存储目的，包括作为本机字符串类型。这是诸如“.NET（或 Java）使用 UTF-16 作为其默认编码”之类的短语的常见来源。.NET 一次 16 位访问此类 UTF-16 字符串的元素（即，在实现级别，作为 uint16）。

接下来要考虑的是将这种 UTF-16 字符串编码为线性字节，以便存储在文件或网络流中。与往常一样，当您将较大的数字存储到字节中时，有两种可能的编码：little-endian 或 big-endian。因此，您可以使用“UTF-16LE”，将 UTF-16 编码为字节的小端编码，或“UTF-16BE”，即大端编码。

（“UTF-16LE”是更常用的。只是为了火上浇油，Windows 给它起了一个极具误导性和模棱两可的编码名称“Unicode”。实际上，使用 UTF-8 进行文件存储几乎总是更好和网络流比 UTF-16LE/BE 中的任何一个。）

但是，如果您不知道一堆字节是否包含“UTF-16LE”或“UTF-16BE”，您可以使用查看第一个代码点的技巧来解决它。此代码点字节顺序标记 (BOM) 仅在以一种方式读取时才有效，因此您不能将一种编码误认为另一种编码。

这种方法不关心你有什么字节顺序，而是使用 BOM 来表示它，通常以编码名称......“UTF-16”来引用。

因此，当有人说“UTF-16”时，您无法分辨它们是指短整型 Unicode 代码点序列，还是将解码为一个的未指定顺序的字节序列。

（“UTF-32”也有同样的问题。）

> 如果您在创建文件时不知道要使用什么编码，请不要指定一个，.NET 将使用 UTF16

如果那是实际的直接报价，那是谎言。[明确指定](http://msdn.microsoft.com/en-us/library/wtbhzte9.aspx)构造不带编码参数的 StreamWriter以提供 UTF-8。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-24T00:04:47.763

[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！） 作者：Joel Spolsky](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-23T23:49:31.717

测试一下。将字符串“abcd”写入文件。如果它使用 UTF8，则文件大小为 4 个字节。在 UTF16 下，它将是 8 个字节。（加上也许是 BOM）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-23T23:49:02.810

UTF16 是 .NET 用于对程序中的字符串（如字符串变量）进行编码的默认编码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-02-18T13:21:43.670

`System.IO.File`我对静态类有这个问题。

我想将包含 UTF-16 XML 的字符串写入文件。

首先，我用

```
using(StreamWriter writer = File.CreateText(xmlFilePathTarget))
{
    writer.Write(xmlString);
} 
```

但是因为它把字符串写成UTF-8，所以IE打不开并显示错误：

> 无法显示 XML 页面 无法使用样式表查看 XML 输入。请更正错误，然后单击“刷新”按钮，或稍后重试。
> 
> * * *
> 
> 不支持从当前编码切换到指定编码。错误处理资源'file:///C:/Documents and Setti...

很大程度上感谢这篇文章，我发现解决方案是显式使用`StreamWriter`构造函数：

```
StreamWriter writer = new StreamWriter(xmlFilePathTarget, false, Encoding.Unicode)); 
```

# command-line - VB6 - Line Numbering at build time

> ID：675658
> 
> 赞同：5
> 
> 时间：2009-03-23T23:46:40.850
> 
> 标签：command-line, vb6, numbers, line

One of the cool things about VB6 is that if you add a line numbers to your code is that the ERL function will return it if an error occurs.

I use MZ-Tools for VB6 to add line numbers to the entire project, which is really cool, however, it's a pain to work with code that is numbered. So I typically remove the lines while I work on it.

I was wondering whether there is a command line way to add/remove line numbers using either MZ-Tools or something else? I'd like to incorporate it into the build process.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:35:07.080

I once downloaded a great tool for line numbering VB6 applications during the build process (I think from a forum) but I've since lost the original location and author. I went and posted the tool [here on my blog](http://www.contactandcoil.com/software/vb6-line-numbering-build-tool/), at least until someone tells me where the original code is, and who the author was.

It's a GUI tool with a command line interface and Windows shell integration. Not bad. It comes with the source code in VB6, so it's pretty nifty. I've used it successfully.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-24T10:05:20.363

谷歌搜索发现了这些工具，这些工具显然是命令行工具，可以添加行号然后构建项目。我没试过。

*   [Visual Basic Expert](http://www.visualbasicexpert.com/visualbasicexpert/Tools_LineNumbering.aspx) - 免费软件
*   [VB Builder](http://www.gridlinx.com/builsum.htm) - 打字时 30 美元
*   [VB Watch Protector](http://www.aivosto.com/vbwatch.html) - 打字时 300 美元，但除此之外它还有许多其他功能。

您希望将其与您的版本控制系统挂钩并签入行号代码。

顺便说一句，[VB6 讨论组](http://groups.google.co.uk/group/microsoft.public.vb.general.discussion)是谷歌这类东西的好地方。

# c# - 检测图像中的线段

> ID：675664
> 
> 赞同：4
> 
> 时间：2009-03-23T23:52:57.480
> 
> 标签：c#, image-recognition

我正在尝试检测图像中的线段。

据我所知，霍夫算法检测线而不是线段。

有谁知道我会怎么做，或者任何适合这个的图书馆？

我的情况是，我正在尝试从照片中检测星迹（出于这些目的，它们都是笔直的），以便我可以将它们还原为点。

如果它很重要，我正在尝试在 C# 中实现它

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-14T23:00:59.727

对于 unsmearing 运动模糊，您应该查看[deconvolution](http://en.wikipedia.org/wiki/Deconvolution)。霍夫变换可能有助于找到原始运动矢量（我怀疑它对于一堆平行线段会很好），但是反卷积是你用来让原始恒星脱离它的方法，这些人使用估计原始运动矢量的另一种方法：

*   [从天文摄影图像中去除运动模糊](http://www.sweaglesw.com/cs448/)

[![前](https://i.stack.imgur.com/Y73tm.jpg)](https://i.stack.imgur.com/Y73tm.jpg) [![后](https://i.stack.imgur.com/agOZg.jpg)](https://i.stack.imgur.com/agOZg.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-28T15:38:58.400

openCV 霍​​夫变换 cvHoughLines2 具有检测线段的概率模式：

*   CV_HOUGH_PROBABILISTIC - 概率霍夫变换（如果图片包含一些长线性段，则更有效）。它返回线段而不是整条线。每个段都由起点和终点表示，并且矩阵必须是（创建的序列将是）CV_32SC4 类型。

我已经测试过它并且它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-24T12:39:07.707

查看[LSD 线段检测器](http://www.ipol.im/pub/algo/gjmr_line_segment_detector/)，发布了实现细节和源代码。

# asp.net - 使用 Google Chrome 时如何使用 Flex 发送自定义 HTTP 标头

> ID：675666
> 
> 赞同：0
> 
> 时间：2009-03-23T23:54:08.553
> 
> 标签：asp.net, apache-flex, google-chrome, http-headers, fiddler

我正在使用 UrlRequest 将数据发送到服务器。我通过以下方式通过自定义 HTTP 标头发送各种参数：

```
urlRequest.requestHeaders.push(new URLRequestHeader("someheader", "somevalue")); 
```

当请求到达我的 ASP.NET 端点（实现 IHttpHandler 的类）时，如果运行我的 Flex 应用程序的 Web 浏览器是 Google Chrome，则 HttpRequest Headers 属性不包含任何值。这适用于 IE6、IE7 和 Firefox。当我使用 Fiddler 查看流量时，如果浏览器是 Chrome，则自定义标头不存在。我在服务器上的 crossdomain.xml 是完全开放的，以允许所有标头：

```
<allow-http-request-headers-from domain="*" headers="*"/> 
```

我知道通常通过将 UrlRequest 的数据属性设置为 UrlVariables 字典来发送参数，但在这种情况下我已经使用数据字段来发送 XML 流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T20:20:49.573

浏览器限制了 Flash 应用程序在发出 HTTP 请求时可以发送的标头。不同的浏览器有不同的限制，但它们都有限制。

我最终在我的服务器上创建了一个代理，这样我就可以发送与各种第三方服务器通信所需的所有标头。

-布赖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-08T21:30:36.780

> 但在这种情况下，我已经在使用数据字段来发送 XML 流

定义您的 xml 模型以包含这些标头。从您的问题看来，您觉得您受到数据属性的限制。

```
<xmlObjects>
    <headers>
        <header name="header1" value="foo" />
        <header name="header1" value="foo" />
    </headers>
    <data>
        <ip>102.201.102.1</ip>
        <name>Andrew Rea</name>
    </data>
</xmlObjects> 
```

因此，如果我需要发送任何数据，我依赖于传输数据的模型设计。

安德鲁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-01T18:58:35.683

如何在 flex 中发送自定义 http 标头的方法

http://yasob.blogspot.com/2009/05/accessing-http-request-parameter-in.html

# c# - 如何使 ListBox.ItemTemplate 可重用/通用

> ID：675671
> 
> 赞同：16
> 
> 时间：2009-03-23T23:55:19.190
> 
> 标签：c#, wpf, data-binding, itemtemplate

我试图了解如何最好地扩展`ListBox`控制。作为一种学习体验，我想构建一个`ListBox`whos`ListBoxItem`显示 a`CheckBox`而不仅仅是文本。我使用 以基本方式工作`ListBox.ItemTemplate`，明确设置我想要数据绑定到的属性的名称。一个例子值一千字，所以...

我有一个用于数据绑定的自定义对象：

```
public class MyDataItem {
    public bool Checked { get; set; }
    public string DisplayName { get; set; }

    public MyDataItem(bool isChecked, string displayName) {
        Checked = isChecked;
        DisplayName = displayName;
    }
} 
```

（我建立了一个列表并将其设置`ListBox.ItemsSource`为该列表。）我的 XAML 看起来像这样：

```
<ListBox Name="listBox1">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding Path=Checked}" Content="{Binding Path=DisplayName}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这行得通。但我想让这个模板可重用，即我想绑定到具有除“Checked”和“DisplayName”之外的属性的其他对象。如何修改我的模板，使其成为资源，在多个`ListBox`实例上重用它，并为每个实例绑定`IsChecked`并绑定`Content`到任意属性名称？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-24T00:07:38.723

将 DataTemplate 创建为资源，然后使用 ListBox 的 ItemTemplate 属性引用它。[MSDN 有一个很好的例子](http://msdn.microsoft.com/en-us/library/ms742521.aspx)

```
<Windows.Resources>
  <DataTemplate x:Key="yourTemplate">
    <CheckBox IsChecked="{Binding Path=Checked}" Content="{Binding Path=DisplayName}" />
  </DataTemplate>
...
</Windows.Resources>

...
<ListBox Name="listBox1"
         ItemTemplate="{StaticResource yourTemplate}"/> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-03-24T13:46:21.503

最简单的方法可能是将`DataTemplate`作为*资源*放在应用程序中的某个`TargetType`位置，`MyDataItem`就像这样

```
<DataTemplate DataType="{x:Type MyDataItem}">
    <CheckBox IsChecked="{Binding Path=Checked}" Content="{Binding Path=DisplayName}" />
</DataTemplate> 
```

您可能还必须`xmlns`在本地程序集中包含一个并通过它引用它。然后，每当您使用 a `ListBox`（或`MyDataItem`在 a`ContentPresenter`或中使用 a 的任何其他东西`ItemsPresenter`）时，它都会使用它`DataTemplate`来显示它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T06:05:50.860

如果您想要一种方式显示，那么您可以使用转换器：

```
class ListConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return ((IList<MyDataItem>)value).Select(i => new { Checked = i.Checked2, DisplayName = i.DisplayName2 });
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后 xaml 看起来像这样：

```
<Window.Resources>
    <this:ListConverter x:Key="ListConverter" />
</Window.Resources>
<ListBox ItemsSource="{Binding Path=Items, Converter={StaticResource ListConverter}}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding Path=Checked, Mode=OneWay}" Content="{Binding Path=DisplayName, Mode=OneWay}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

您可以像上面那样通用的那个数据模板。双向绑定会更困难一些。

我认为您最好让您的基类实现一个 ICheckedItem 接口，该接口公开您希望数据模板绑定到的通用属性？

# iphone - 您如何在 iPhone 应用程序中以编程方式准确计算发送/接收的字节数？

> ID：675673
> 
> 赞同：2
> 
> 时间：2009-03-23T23:55:42.217
> 
> 标签：iphone

我正在编写一个 iPhone 应用程序，它可能会随着时间的推移发送/接收大量数据，具体取决于轮询间隔。

我想在运行时显示发送/接收的字节数，并在达到用户指定的阈值时提醒用户。关于如何跟踪我的应用程序中发送/接收字节量的任何提示？（我只对我的应用程序在运行时发送/接收的数据量感兴趣）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T08:28:38.753

如果您使用的是 NSURLconnection，那么您可以跟踪在 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 委托方法中发送的数据。

每次发送此消息时，查询大小`data`并将其添加到保存总数的实例变量中。

其他框架（例如 ASI 请求）具有特定的委托消息来更新进度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-29T23:17:16.193

显示字节，甚至 KB，会有些误导。我会使用[Roger 的技术](https://stackoverflow.com/questions/675673/how-do-you-accurately-count-sent-received-bytes-programmatically-in-an-iphone-app/676530#676530)并将您的总数四舍五入到最接近的 0.1MB。

严格来说，您无法精确测量通过网络发送和接收的数据。除了您*可以*测量的字节之外，还会有一些 TCP 开销以及由于连接问题而导致的任何重传。

即使 Apple 提供其全局计数器，您也无法区分您的字节和 Apple 后台应用程序的字节（例如推送邮件）。

# php - 通过 $var::$reference 访问静态变量

> ID：675676
> 
> 赞同：30
> 
> 时间：2009-03-23T23:56:41.777
> 
> 标签：php

我正在尝试使用变量类名访问类中的静态*变量。*我知道，为了访问类中的*函数*，您使用`call_user_func()`：

```
class foo {
    function bar() { echo 'hi'; }
} 
$class = 'foo';
call_user_func(array($class, 'bar')); // prints hi 
```

*但是，这在尝试访问类中的静态变量*时不起作用：

```
class foo {
    public static $bar = 'hi';
} 
$class = "foo";
call_user_func(array($class, 'bar')); // nothing
echo $foo::$bar; // invalid 
```

我如何得到这个变量？甚至可能吗？我有一种不好的感觉，这仅在 PHP 5.3 中可用，而我正在运行 PHP 5.2.6。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-02-29T06:18:25.673

我认为创建 ReflectionClass 实例有更好（更优雅）的方法。在几条评论之后，我还编辑了这段代码（和我的答案）。我添加了受保护变量的示例（您当然不能从类外部访问它们，所以我制作了静态 getter 并使用变量模式调用它）。您可以通过几种不同的方式使用它：

```
class Demo
{
    public static $foo = 42;
    protected static $boo = 43;
    public static function getProtected($name) {
        return self::$$name;
    }
}

$var1 = 'foo';
$var2 = 'boo';
$class = 'Demo';
$func = 'getProtected';
var_dump(Demo::$$var1);
var_dump($class::$foo);
var_dump($class::$$var1);
//var_dump(Demo::$$var2); // Fatal error: Cannot access protected property Demo::$boo
var_dump(Demo::getProtected($var2));
var_dump($class::getProtected($var2));
var_dump($class::$func($var2)); 
```

文档在这里：

[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-03-24T00:25:20.350

您可以使用[反射](http://uk3.php.net/language.oop5.reflection)来执行此操作。给定类名创建一个[ReflectionClass](http://php.net/manual/en/class.reflectionclass.php)对象，然后使用 getStaticPropertyValue 方法获取静态变量值。

```
class Demo
{
    public static $foo = 42;
}

$class = new ReflectionClass('Demo');
$value=$class->getStaticPropertyValue('foo');
var_dump($value); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-03-24T00:04:32.990

要调用静态成员，您可以使用如下代码：

```
call_user_func("MyClass::my_static_method");
// or
call_user_func(array("MyClass", "my_static_method")); 
```

不幸的是，从对象中获取静态成员的唯一方法似乎是[`get_class_vars()`](http://php.net/manual/function.get-class-vars.php)：

```
$vars = get_class_vars("MyClass");
$vars['my_static_attribute']; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T16:51:34.690

你试过这个吗？

```
class foo {
    static public $bar = "Hi";

    static public function bar() {
        echo "Hi";
    }
}

echo foo::$bar; // Output: Hi
foo::bar(); // Output: Hi

$class = "foo";
echo $class::$bar; // Output: Hi
$class::bar(); // Output: Hi
call_user_func($class, 'bar'); // Output: Hi 
```

# java - java.lang.NoClassDefFoundError：在 Resin 服务器启动时偶尔发生

> ID：675678
> 
> 赞同：1
> 
> 时间：2009-03-23T23:57:27.610
> 
> 标签：java, resin

java.lang.NoClassDefFoundError：在 Resin 服务器启动时偶尔发生

这是在 Resin 3.0.21 在 Linux 机器上使用 Java 1.5...

我在 web.xml 上定义了一个 servlet 来加载 log4j.properties。当 servlet 尝试在启动时加载时抛出此错误。

log4j-init：初始化 log4j：错误无法实例化类 [org.apache.log4j.DailyRollingFileAppender]。java.lang.ClassNotFoundException: org.apache.log4j.DailyRollingFileAppender [java.lang.NoClassDefFoundError: org/apache/log4j/FileAppender] 在 com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1264) 在 com.caucho。 loader.DynamicClassLoader.findClass(DynamicClassLoader.java:1149) 在 com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1072) 在 com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1021) 在 java.lang .ClassLoader.loadClassInternal(ClassLoader.java:319) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:164) at org.apache.log4j.helpers.Loader.loadClass (Loader.java:160) 在 org.apache.log4j.helpers.OptionConverter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T00:04:41.773

最有可能的是，该文件`log4j.jar`在类路径中被找到了两次，从而导致了类路径问题。如果 log4J 被加载两次，一次在 Web 应用程序中，一次在 Resin 中，那么您可能会遇到这种混乱。假设 log4j 已经存在于 Resin 中，如果它也存在于您的 Web 应用程序的类路径（lib 目录）中，则尝试将其从应用程序的 lib 目录中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-14T21:41:02.970

我们发现这通常发生在服务器上没有可用磁盘空间的情况下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T06:01:55.923

它可能不是“开始”而是“重启”的情况。

如果 log4j 在 webapp 中加载，某些类 log4j 不会在应用程序关闭时卸载，并且下次（重新）启动将导致两次进入的情况（查看 Eddie 的帖子）。解决办法是将log4j放到resin的lib/目录下。

# wpf - System.Windows.Input 对 C++/CLI 不可用？

> ID：675694
> 
> 赞同：1
> 
> 时间：2009-03-24T00:06:43.860
> 
> 标签：wpf, mvvm, namespaces, c++-cli

我正在使用 C++/CLI 中的 ViewModel 开发 WPF 应用程序，因此它可以使用旧版 C 代码。我在将命名空间 System.Windows.Input 暴露给 C++/CLI 代码时遇到问题，想知道这是否是因为 WPF 并不真正支持 C++/CLI？我真的必须插入一个 C# 层才能实现类似 Josh Smith 的[CommandSinkBinding](http://www.codeproject.com/KB/WPF/VMCommanding.aspx)吗？

当我尝试在 C++/CLI 项目中添加引用时，我只能看到 System.Windows.Presentation 和 System.Windows.Forms。

C# 程序可以说的地方

```
using System.Windows.Input; 
```

我在 C++/CLI 中遇到错误

```
using namespace System::Windows::Input; 
```

错误 1 ​​错误 C2039：“输入”：不是“系统::Windows”的成员

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-24T00:12:08.183

您需要将 Input 所在的程序集添加到您的引用中。它在 PresentationCore

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T00:11:42.927

您是否缺少项目参考？我通常首先在 Intellisense 中注意到这一点......

# sharepoint - 共享点选择字段

> ID：675695
> 
> 赞同：1
> 
> 时间：2009-03-24T00:06:59.803
> 
> 标签：sharepoint, sharepoint-2007

我需要一个选择字段（在站点列中）来引用我要导入 sharepoint 的列表。此列表将很少更新以添加其他选择。我将如何创建此列？以编程方式？

好吧，看它是每个人的查找...只是想弄清楚如何对其进行编码...我假设我需要首先将列表导入为新的内容类型。然后为内容类型创建一个查找列（有多个）？！？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-24T10:21:18.873

这是一些将查找字段添加到现有内容类型的代码。

如果您使用列表定义，那么这是包含查找字段的唯一方法。无法将其添加到列表定义的 CAML 中，因为需要查找列表的 guid，而这事先不知道。创建列表时，SharePoint 会自动生成此 Guid。

所以你需要先在 SPSite 的根 SPWeb 里面创建查找列

```
private void CreateLookup(SPWeb web, SPList lookupList, String lookupField, String fieldName, String fieldGroup, bool allowMultiLookup)
{
    using (SPSite site = web.Site)
    {
        using (SPWeb rootWeb = site.RootWeb)
        {
            rootWeb.Fields.AddLookup(fieldName, lookupList.ID, web.ID, false);
            SPFieldLookup fieldLookup = (SPFieldLookup)rootWeb.Fields[fieldName];
            if (fieldLookup == null) return;
            fieldLookup.AllowMultipleValues = allowMultiLookup;
            fieldLookup.LookupField = lookupField;
            fieldLookup.Group = fieldGroup;
            fieldLookup.Title = fieldName;
            fieldLookup.Update(true);
        }
    }
} 
```

然后您需要将此字段添加到现有的内容类型

```
private void AddLookupToContentType(SPWeb web, String fieldName, String contentTypeName)
{
    using (SPSite site = web.Site)
    {
        using (SPWeb rootWeb = site.RootWeb)
        {
            SPFieldLookup lookupField = (SPFieldLookup)rootWeb.Fields[fieldName];
            if (lookupField == null) return;
            SPContentType riskContentType = rootWeb.ContentTypes[contentTypeName];
            if (riskContentType == null) return;
            riskContentType.FieldLinks.Add(new SPFieldLink(lookupField));
            riskContentType.Update(true);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T01:55:09.480

听起来您正在寻找查找列。您必须先导入列表，然后将查找创建为网站栏。

# c# - 比较两个列表的差异

> ID：675699
> 
> 赞同：44
> 
> 时间：2009-03-24T00:10:04.710
> 
> 标签：c#, .net, list, .net-2.0

我想要一些关于我们如何最好地编写一个能够比较两个列表的通用函数的反馈。Lists 包含类对象，我们希望遍历一个列表，在第二个 List 中查找相同的项目并报告任何差异。

我们已经有了比较类的方法，所以我们需要关于如何从两个列表中提供方法（如下所示）的反馈。

例如，假设我们有一个简单的“Employee”类，它具有三个属性：Name、ID、Department。我们要报告 List 和另一个 List 之间的差异。

注意：
两个列表将始终包含相同数量的项目。

如上所述，我们有一个用于比较两个类的泛型方法，我们如何合并该方法来满足列表的需求，即从另一个方法循环遍历列表并将类提供给泛型方法....但是我们如何在第二个 List 中找到等效的类以传递给下面的方法；

```
public static string CompareTwoClass_ReturnDifferences<T1, T2>(T1 Orig, T2 Dest)
    where T1 : class
    where T2 : class
{
    // Instantiate if necessary
    if (Dest == null) throw new ArgumentNullException("Dest", "Destination class must first be instantiated.");

    var Differences = CoreFormat.StringNoCharacters;

    // Loop through each property in the destination  
    foreach (var DestProp in Dest.GetType().GetProperties())
    {
        // Find the matching property in the Orig class and compare
        foreach (var OrigProp in Orig.GetType().GetProperties())
        {

            if (OrigProp.Name != DestProp.Name || OrigProp.PropertyType != DestProp.PropertyType) continue;
            if (OrigProp.GetValue(Orig, null).ToString() != DestProp.GetValue(Dest, null).ToString())
                Differences = Differences == CoreFormat.StringNoCharacters 
                    ? string.Format("{0}: {1} -> {2}", OrigProp.Name,
                                                       OrigProp.GetValue(Orig, null),
                                                       DestProp.GetValue(Dest, null)) 
                    : string.Format("{0} {1}{2}: {3} -> {4}", Differences,
                                                              Environment.NewLine,
                                                              OrigProp.Name,
                                                              OrigProp.GetValue(Orig, null),
                                                              DestProp.GetValue(Dest, null));
        }
    }
    return Differences;
} 
```

任何建议或想法表示赞赏？

编辑：以 .NET 2.0 为目标，因此 LINQ 是不可能的。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2011-05-09T11:09:40.327

此解决方案生成一个结果列表，其中包含两个输入列表的所有差异。您可以通过任何属性来比较您的对象，在我的示例中是 ID。唯一的限制是列表应该是相同的类型：

```
var DifferencesList = ListA.Where(x => !ListB.Any(x1 => x1.id == x.id))
            .Union(ListB.Where(x => !ListA.Any(x1 => x1.id == x.id))); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-24T00:23:58.577

> ....但是我们如何在第二个 List 中找到等效的类以传递给下面的方法；

这是您的实际问题；你必须至少有一个不可变的属性，一个 id 或类似的东西，来识别两个列表中的对应对象。如果你没有这样的属性你，就不能不出错地解决问题。您可以通过搜索最小或逻辑更改来尝试猜测相应的对象。

如果你有这样的属性，解决方案就变得非常简单。

```
Enumerable.Join(
   listA, listB,
   a => a.Id, b => b.Id,
   (a, b) => CompareTwoClass_ReturnDifferences(a, b)) 
```

* * *

> 感谢 danbruc 和 Noldorin 的反馈。两个列表的长度和顺序相同。所以上面的方法很接近，但是你可以修改这个方法以将 enum.Current 传递给我上面发布的方法吗？

现在我很困惑......那有什么问题？为什么不只是以下？

```
for (Int32 i = 0; i < Math.Min(listA.Count, listB.Count); i++)
{
    yield return CompareTwoClass_ReturnDifferences(listA[i], listB[i]);
} 
```

如果保证相等的长度，甚至可以省略 Math.Min() 调用。

* * *

由于委托和使用枚举器而不是使用 ICollection，Noldorin 的实现当然更智能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-24T00:30:56.047

我认为您正在寻找这样的方法：

```
public static IEnumerable<TResult> CompareSequences<T1, T2, TResult>(IEnumerable<T1> seq1,
    IEnumerable<T2> seq2, Func<T1, T2, TResult> comparer)
{
    var enum1 = seq1.GetEnumerator();
    var enum2 = seq2.GetEnumerator();

    while (enum1.MoveNext() && enum2.MoveNext())
    {
        yield return comparer(enum1.Current, enum2.Current);
    }
} 
```

它未经测试，但它仍然可以完成这项工作。请注意，此方法特别有用的是它是完全通用的，即它可以采用两个任意（和不同）类型的序列并返回任何类型的对象。

这个解决方案当然假设您想要将 的第 n 项`seq1`与 中的第 n 项进行比较`seq2`。如果您想根据特定的属性/比较来匹配两个序列中的元素，那么您将需要执行某种[连接](http://en.wikipedia.org/wiki/Join_(relational_algebra)#Joins_and_join-like_operators)操作（如 danbruc 建议的那样使用`Enumerable.Join`。如果这两种方法都不是，请告诉我正是我所追求的，也许我可以提出其他建议。

**编辑：** 这是一个示例，说明您如何将该`CompareSequences`方法与您最初发布的比较器功能一起使用。

```
// Prints out to the console all the results returned by the comparer function (CompareTwoClass_ReturnDifferences in this case).
var results = CompareSequences(list1, list2, CompareTwoClass_ReturnDifferences);
int index;    

foreach(var element in results)
{
    Console.WriteLine("{0:#000} {1}", index++, element.ToString());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-18T01:55:57.943

Microsoft 的这种方法效果很好，并提供了将一个列表与另一个列表进行比较并切换它们以获得每个列表的差异的选项。如果您要比较类，只需将您的对象添加到两个单独的列表中，然后运行比较。

[http://msdn.microsoft.com/en-us/library/bb397894.aspx](http://msdn.microsoft.com/en-us/library/bb397894.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-24T00:45:53.797

我希望我正确理解了您的问题，但是您可以使用 Linq 快速完成此操作。我假设您将始终拥有 Id 属性。只需创建一个接口来确保这一点。

如果您将一个对象识别为相同的方式因类而异，我建议传入一个委托，如果这两个对象具有相同的持久 id，则该委托返回 true。

以下是在 Linq 中的操作方法：

```
List<Employee> listA = new List<Employee>();
        List<Employee> listB = new List<Employee>();

        listA.Add(new Employee() { Id = 1, Name = "Bill" });
        listA.Add(new Employee() { Id = 2, Name = "Ted" });

        listB.Add(new Employee() { Id = 1, Name = "Bill Sr." });
        listB.Add(new Employee() { Id = 3, Name = "Jim" });

        var identicalQuery = from employeeA in listA
                             join employeeB in listB on employeeA.Id equals employeeB.Id
                             select new { EmployeeA = employeeA, EmployeeB = employeeB };

        foreach (var queryResult in identicalQuery)
        {
            Console.WriteLine(queryResult.EmployeeA.Name);
            Console.WriteLine(queryResult.EmployeeB.Name);
        } 
```

# sql-server - Sql Server 2005 连接日志

> ID：675716
> 
> 赞同：2
> 
> 时间：2009-03-24T00:22:31.747
> 
> 标签：sql-server, sql-server-2005, sysadmin

我在一台 SQL Server 2005 服务器上有多个数据库。我想知道一种方法，我可以使用该方法查看今天与特定数据库建立的所有连接以及执行的活动。

提前致谢

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T00:24:44.533

您可以使用[SQL 事件探查器](http://msdn.microsoft.com/en-us/library/aa173918(SQL.80).aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T11:06:11.030

As pointed out by MichealGG, SQL Profiler is a pretty good tool for monitoring connections & events for an instance of SQL Server. Run SQL profiler and start a new trace. You can even filter for specific event classes that you are interested in.

Just be carefull not to leave the trace running indefinitely or for a long time as it takes up a lot of server resources.

# unit-testing - JUnit 断言扩展

> ID：675727
> 
> 赞同：3
> 
> 时间：2009-03-24T00:27:26.243
> 
> 标签：unit-testing, testing, junit, junit4

我经常为我的 JUnit 测试创建自定义断言方法。例如：

```
public void assertArrays(String[] actual, String[] expected) 
```

我想知道是否有任何像样的第三方库可以提供比 JUnit 默认提供的更广泛的断言。

我正在使用 JUnit 4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-24T05:43:50.897

JUnit4 中有用于此目的的标准方法：[assertArrayEquals](http://junit.org/apidocs/org/junit/Assert.html#assertArrayEquals(java.lang.Object[],%20java.lang.Object[]))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T02:39:55.513

永远存在的一个是[JUnit Addons](http://junit-addons.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T00:41:38.503

Google 将他们的 Asserts 类命名为 MoreAsserts。[这是针对一个特定项目的一个](http://code.google.com/p/uzaygezen/source/browse/trunk/core/src/test/java/com/google/uzaygezen/core/MoreAsserts.java?spec=svn27&r=27)，您可以搜索更多，因为大多数项目都有自己的，并且它们经常是开源的。

编辑：[Android](http://developer.android.com/reference/android/test/MoreAsserts.html)也有一个非常棒的，但不确定该来源是否可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T00:38:30.757

我不知道有任何这样的图书馆。但是，您可能并不真正需要这个。

JUnit 包含适用于 JDK 的大多数值类型的 assertEquals。对于您自己的类，您可以简单地覆盖 equals() 方法，并使用 assertEquals(Object,Object)。

这是我通常为自己的课程所做的。效果很好，无论如何，适当的 equals() 方法很有用。

# java - 仅使用 ServletContext 查找应用程序的 URL

> ID：675730
> 
> 赞同：51
> 
> 时间：2009-03-24T00:29:05.273
> 
> 标签：java, jakarta-ee, spring-mvc

我正在使用 Spring MVC 编写一个 Java Web 应用程序。我有一个后台进程，它通过数据库查找必须通过电子邮件发送给我的用户的通知。这些电子邮件消息需要包含指向应用程序的超链接。对于网络应用程序来说，这似乎是一种相当常见的模式，但我遇到了麻烦。

如何使用服务器名称和上下文路径派生我的应用程序的完全限定 URL？我无权访问 HttpServletRequest 中的任何方法，因为我将其作为后台进程运行，而不是响应 Web 请求。我能做的最好的就是访问 ServletContext。

目前我将基本 URL 放入配置文件并在启动时读取它，但该应用程序将获得许可并部署到客户的应用程序服务器，如果可能的话，我希望他们不必手动配置它。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-24T01:51:26.790

不建议在运行时动态准备 URL，尤其是基于 ServletRequest。这主要是因为您不知道用户将用于访问应用程序的 URL - 应用程序服务器可能位于 Web 服务器、防火墙或负载平衡器后面。简而言之，我们无法预测网络拓扑。

您当前从属性文件中获取 URL 的技术足以解决上述问题。也许您应该考虑提供一个管理控制台来管理邮件中出现的 URL，特别是如果有一个管理控制台，或者如果有相关的选项应该进入其中。

编辑：我的最后一点与托尼所说的相呼应。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-24T01:04:24.347

如果配置文件不存在（例如在 WEB-INF 文件夹中），为什么在第一次运行应用程序时没有设置网页。使用 ServletContext，您可以调用 getRealPath 并获取文件的真实路径和查看是否存在（）。如果存在，则重定向到应用程序起始页面，如果不存在，则打开管理页面）。

你可以用 ServletContext 做的最好的事情是从 web.xml 中读取一些设置，并获取上下文路径，只有 HttpRequest 可以给你 FQ URL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-05T12:57:10.037

我认为你可以使用类似的东西：

```
String host = InetAddress.getLocalHost().getCanonicalHostName();
String appUrl = String.format("http://%s:%s%s", host, port, contextPath); 
```

使用来自 ServletContext 的端口和 contextPath。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-27T08:38:15.197

Servlet 2.5 将[getContextPath()](https://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getContextPath%28%29)添加到`ServletContext`. 更新 EE 依赖版本肯定可以解决您的问题。

更多信息在这里：

*   [从 Spring Web 应用程序中检索 servlet 上下文路径](https://stackoverflow.com/questions/12236590/retrieving-the-servlet-context-path-from-a-spring-web-application)
*   [Web 上下文根是否有内置的 Spring 环境变量？](https://stackoverflow.com/questions/6931585/is-there-a-built-in-spring-environment-variable-for-the-web-context-root)
*   [如何在 Servlet 2.4 版的 init() 方法中获取 ContextPath](https://stackoverflow.com/questions/13879869/how-to-get-contextpath-in-init-method-of-servlet-version-2-4)

# c++ - 推向量的向量

> ID：675739
> 
> 赞同：3
> 
> 时间：2009-03-24T00:35:04.087
> 
> 标签：c++, stl, vector

推回向量向量有什么问题吗？像

```
typedef vector<Point> Polygon;
vector<Polygon> polys;
polys.push_back(some_poly); 
```

some_poly 中的所有元素都会被*复制*，对吗？

我的代码中有一个错误，我似乎无法弄清楚它有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-24T00:44:13.253

对，向量按预期复制。有一个名为[geordi](http://www.xs4all.nl/~weegen/eelis/geordi/)的好软件可以显示这一点：

```
{ 
    using namespace tracked; 
    typedef vector<B> poly_t; 
    poly_t poly(3); // contains 3 B's
    vector<poly_t> v; 
    v.push_back(poly); 
} 
```

它跟踪`tracked::B`. 这是输出：

```
B0* B1*(B0) B2*(B0) B3*(B0) B0~ B4*(B1) B5*(B2) B6*(B3) B4~ B5~ B6~ B1~ B2~ B3~ 
```

这是我们只跟踪时的输出`v.push_back`：

```
B4*(B1) B5*(B2) B6*(B3) 
```

如您所见，第一个 B0 被创建为向量构造函数的默认参数。然后将该对象复制到 3 个 B 中，然后 B0 在构造函数返回时再次被销毁。poly 然后被创建。然后，我们将它 push_back 成一个多边形向量。参数 poly 被复制到一个新向量中，该向量在多边形向量中创建并由该向量管理。

如果它崩溃，问题可能出在程序的另一部分。检查复制构造函数/构造函数和析构函数是否正常工作，如果您使用动态内存分配，它们是否不会删除两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T00:39:03.843

一点问题都没有。它不是插入/擦除最有效的结构，但它绝对应该有效。

如果您有兴趣使插入/擦除更有效，您可能应该切换到：

```
typedef vector<Point> Polygon;
typedef vector<Polygon*> Polygons;
Polygons polys;
polys.push_back(new Polygon()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T00:39:26.573

是的，只要您为 Point 类定义了复制构造函数和赋值运算符（并确保它们做正确的事情等），这应该可以正常工作。std::vector 会很好地推送，所以错误必须在其他地方 - 显然我们需要更多细节来进一步帮助。

如果您要推送事物的向量，则会对性能产生影响，但在它工作之前不要担心（只有当它成为问题时）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-24T06:22:08.997

尽管向量向量没有任何问题，但您可能想看看[Boost.MultiArray](http://www.boost.org/doc/libs/1_38_0/libs/multi_array/doc/user.html)。它可以更有效率。

```
 typedef boost::multi_array<Point, 2> Polygons; 
```

另一个想法是，您可能希望使 Polygon 成为一个真正的类（可能包含一个向量），以提供比 std::vector 默认提供的方法更适合的方法。

# .net - 如何将数据传递给 MSBuild 任务的 ITaskItem 属性？

> ID：675741
> 
> 赞同：3
> 
> 时间：2009-03-24T00:35:36.287
> 
> 标签：.net, msbuild, itaskitem

我有一个自定义任务，我在*MSBuild*中使用。效果很好。以前，我有一些属性可以接受一些`string`数据。有人建议我应该将它们更改为`ITaskItem`'s. 这样，如果我有空间，我不应该有问题。

### 以前的代码

```
public class CompressorTask : Task
    {
    ....
    public string CssFiles { get; set; }
    public string JavaScriptFiles { get; set; }
} 
```

示例 msbuild 文件（例如 MsBuildSample.xml）...

```
<CompressorTask
    CssFiles="StylesheetSample1.css, StylesheetSample2.css, 
              StylesheetSample3.css, StylesheetSample4.css"
    JavaScriptFiles="jquery-1.2.6-vsdoc.js"
... /> 
```

请注意我是如何获得 4 个 css 文件的？我通过 , 或空格分隔符手动提取它们。科尔。

### 新代码

```
 public ITaskItem[] CssFiles { get; set; }
 public ITaskItem[] JavaScriptFiles { get; set; } 
```

现在，我不确定我需要在 MSBuild 文件的 CssFiles 属性中设置哪些值。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-24T02:55:17.933

我认为您现在需要将文件放入带有属性名称的项目列表中：

```
<ItemGroup>
    <CssFiles Include="StylesheetSample1.css"/>
    <CssFiles Include="StylesheetSample2.css"/>
    <CssFiles Include="StylesheetSample3.css"/>
    <CssFiles Include="StylesheetSample4.css"/>
    <!-- or <CssFiles Include="*.css" /> -->
    <JavaScriptFiles Include="jquery-1.2.6-vsdoc.js"/>
</ItemGroup>
<CompressorTask CssFiles="@(CssFiles)" JavaScriptFiles="@(JavaScriptFiles)"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-24T17:32:37.573

这实际上更容易，只需使用字符串数组。指定值时，使用单个值、分号分隔的列表（如果您愿意，可以使用空格）或 ItemGroup（例如 @(someItemGroup)），MSBuild 足够聪明，可以为您解决这个问题：

```
<CompressorTask
    CssFiles="StylesheetSample1.css; StylesheetSample2.css;
              StylesheetSample3.css; StylesheetSample4.css"
    JavaScriptFiles="jquery-1.2.6-vsdoc.js"
... /> 
```

MSBuild 任务源：

```
public string[] CssFiles { get; set; }
public string[] JavaScriptFiles { get; set; } 
```

# c# - 为什么我的 finally 块在 C# 中不起作用？

> ID：675742
> 
> 赞同：6
> 
> 时间：2009-03-24T00:36:14.570
> 
> 标签：c#, finally

我一直在帮助一位同事调试他们代码中的一些奇怪行为。以下示例说明了这一点：

```
static void Main(string[] args)
{
    string answer = Sample();
    Console.WriteLine(answer);
}

public static string Sample()
{
    string returnValue = "abc";

    try 
    {
         return returnValue;
    }

    catch (Exception)
    {
         throw;
    }

    finally
    {
         returnValue = "def";
    }
} 
```

这个样本返回了什么？

您会认为由于 finally 块，它返回“def”，但实际上它返回“abc”？我已经单步执行了代码并确认 finally 块实际上已被调用。

真正的答案是你不应该首先编写这样的代码，但我仍然对这种行为感到困惑。

编辑：根据一些答案澄清流程。

当您单步执行代码时，finally 在返回之前执行。

**重复：** [在 try { return x; 中真正发生了什么 } 最后 { x = null; } 陈述？](https://stackoverflow.com/questions/421797/what-really-happens-in-a-try-return-x-finally-x-null-statement)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-24T00:41:04.713

您的“最终”块正在为 returnValue 分配一个值，而不是实际返回一个值。“返回”在 finally 块更改值之前已经发生，因此返回“abc”。

虽然代码令人困惑，因为您所做的没有意义，但它所做的却是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-24T00:43:06.783

该`finally`块在语句*之后有效地运行。*因此，在进入 finally 块之前，您`return`已经返回了旧值。`abc`

（这并不完全是引擎盖下的工作方式，但对于这里的观点来说已经足够接近了）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-24T00:58:32.470

是的，finally 块在函数返回后运行，但这并不重要。请记住，返回值是按值传递的，因此在返回时会为其创建一个新的临时变量，因此 finally 块不会影响实际返回值。如果您想支持所需的行为，您可以使用 out 参数，如下所示：

```
static void Main(string[] args)
{
    string answer;
    Sample(out answer);
    Console.WriteLine(answer);
}

public static void Sample(out string answer)
{

    try
    {
        answer = "abc";
        return;
    }

    catch (Exception)
    {
        throw;
    }

    finally
    {
        answer = "def";
    }
} 
```

或者，您可以简单地将 return 语句移到 try 块之外，如下所示：

```
static void Main(string[] args)
{
    string answer = Sample();
    Console.WriteLine(answer);
}

public static string Sample()
{
    string returnValue;
    try
    {
        returnValue = "abc";
    }

    catch (Exception)
    {
        throw;
    }

    finally
    {
        returnValue = "def";
    }

    return returnValue;
} 
```

然而，鉴于 finally 块将始终覆盖返回值，这是一个有问题的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T00:42:49.030

我不是专家，但我不得不猜测这个函数会返回，*然后*最终调用。由于`return returnValue`已经执行，所以 returnValue 在 finally 块中取什么值并不重要。这种行为是有道理的，因为它*应该*在 finally 块之前执行整个 try 块，并且它可以做到这一点的唯一方法是如果它像它应该的那样从函数返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T00:44:15.283

如果你真的很好奇发生了什么，那么你可以下载并安装[Reflector](http://www.red-gate.com/products/reflector/)。这是一个很棒的工具，可以放入您的“包 o 技巧”。它会告诉你引擎盖下发生了什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-24T00:45:23.393

猜测一下，我会说您正在确定在 return 语句所在的位置将返回什么（对字符串“abc”的引用）。

因此，finally 稍后将该引用设置为引用不同的字符串这一事实对返回值没有影响。

# syntax - 如何在 F# 中使用 let 创建新范围？

> ID：675743
> 
> 赞同：6
> 
> 时间：2009-03-24T00:37:19.183
> 
> 标签：syntax, f#

我正在尝试在 F# 中初始化一个 XmlDocument，而不会污染全局命名空间——我唯一的功能背景来自 LISP，其中可以使用“let”创建一个新范围。我想出了这个：

```
let doc = 
    let reader = new XmlTextReader("url")
    let doc = new XmlDocument()
    doc.Load(reader)
    doc 
```

当我的第一个解决方案不起作用时，我感到相当惊讶：

```
let doc = new XmlDocument() in
    let reader = new XmlTextReader("url");
    doc.Load(reader)

print_any reader.ToString // Still in scope! 
```

做我想做的事的首选方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-24T04:01:20.707

似乎当您使用“let .. in”时，您可以覆盖默认的“#light”设置，即空格很重要，所以我想这就是在这种情况下发生的情况以及为什么您没有收到任何警告/错误的原因第二种情况（您添加了“in”，因此编译器认为您要明确指定范围）。这似乎有点奇怪，所以它可能是一个错误。我相信来自 F# 团队的 Brian 很快就会回答这个疑问 :-)。

无论如何，我认为编译器将您的第二个示例视为（使用更易于编译的示例）：

```
open System

let ar = new ResizeArray<_>() in
let rnd = new Random();    
ar.Add(rnd.Next())

printfn "%A" (rnd.Next()) 
```

如果您添加括号并编写如下内容，您可以强制它按照您的意愿对待它：

```
let ar = new ResizeArray<_>() in
    (let rnd = new Random() 
     ar.Add(rnd.Next()))

printfn "%A" (rnd.Next()) 
```

通常，您可以使用括号在 F# 程序的任何位置指定范围。例如你可以写：

```
let a = 1
(let a = a + 10
 printfn "%d" a)
printfn "%d" a 
```

此示例打印“10”，然后打印“1”。当然，这似乎不是很实用，但在使用`use`行为类似的关键字时很有用`let`，但适用于`IDisposable`对象并确保对象在离开作用域时被释放（这就像`using`在 C# 中一样）：

```
let some = new Some()
(use file = new StreamReader(...)
 let txt = file.ReadToEnd()
 printfn "%s" txt)
doSomething() // continue, 'file' is now closed! 
```

**编辑**：我完全忘了提到重要的一点——第一种编写代码的方式对我来说似乎更自然（它充分利用了 F# 提供的“简单”#light 语法的好处），所以我更喜欢它 :-) .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T00:48:37.767

您的第一个示例似乎是 Don Syme 和其他 F# 爱好者采用的风格。混合`#light`和 ML 风格`let .. in`似乎不是一个好主意。

您可以阅读[Expert F#](http://books.google.com/books?id=NcrMkjVxahMC&dq=expert+f%23&printsec=frontcover&source=bn&hl=en&ei=iS3ISY2jH5m0sQPlhvyFAQ&sa=X&oi=book_result&resnum=4&ct=result)中的一些示例，感受当代 F# 风格。

还有Don Syme 编写的[F# Formatting Conventions 。](http://research.microsoft.com/fsharp/expert-fsharp-draft/FormattingConventions.doc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-26T05:53:04.883

部分问题可能是“let ... in ...”是一个表达式，而不是一个语句，所以在顶层使用这个结构并没有真正的意义。例如，这意味着什么：

```
let x = 1 in
  x - 5 
```

在顶层？似乎编译器应该在顶层将“let ... in ...”的任何使用标记为错误。

另一个问题是 XmlDocument API 不是以函数式风格（根本）编写的，这使得在 F# 中使用它有点尴尬。我想说您的第一次尝试与您将获得的一样好，但如果 API 允许更多类似的东西肯定会很好：

```
let doc =
  let reader = new XmlTextReader("url")
  reader.ReadAsDocument() 
```

或者，如果有一个用于 XmlDocument 的构造函数，它采用了 XmlReader，但由于 API 是毫无歉意的命令，你将不得不做。

# ruby-on-rails - 在 Ruby On Rails 中重新定义 Helper 方法

> ID：675753
> 
> 赞同：1
> 
> 时间：2009-03-24T00:40:57.490
> 
> 标签：ruby-on-rails, ruby

我有一种情况，标头部分被标准布局调用。（我认为这很常见）标题中是一个搜索框 - 就像在 stackoverlow 上一样。但是，当用户在搜索页面上时，我想从标题中删除搜索框。

我试图做的是在 ApplicationHelper.rb 文件中放置一个方法，如下所示：

```
def search_page?
    return false;
end 
```

然后在 SearchHelper.rb 我有这个：

```
def search_page?
    return true;
end 
```

这不起作用，因为无论哪个控制器呈现视图，SearchHelper.rb 中的 search_page 函数都是正在使用的函数。我知道我可以定义一个新的布局并向部分标题添加一个参数，以表示不呈现搜索框，但这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T01:49:53.533

首先，对您的 Ruby 进行一些调整。

```
def search_page?
  true
end 
```

您不需要分号或`return`（无论最后一行将是您的方法的返回值）。

其次，当你的应用程序初始化时，所有的助手都会被加载。您可以更改此行为，但这可能不值得。

至于其余的，假设您有一个名为`_search_form.html.erb`. 创建一个不错的辅助方法（例如，在 search_helper.rb 中）

```
def search_form
  render(:partial => 'search/search_helper') unless @search_page
end 
```

使用它从布局文件中调用搜索表单。从那时起，你就有了一些选择。

您可以`before_filter`在控制器中创建一个：

```
before_filter :set_search_page

...your actions here...

private

def set_search_page
  @search_page = true
end 
```

或在您的操作中设置变量：

```
def some_action
  @search_page = true
end 
```

我想说的是，这确实是一个视图问题，而不是您想在控制器中做的事情。我会创建一个这样的辅助方法（同样，在 中`search_helper.rb`）。

```
def search_page
  @search_page = true
end 
```

然后在该页面的视图顶部，我会使用如下内容：

```
<% search_page %> 
```

(Note that it's `<%` and not `<%=` -- there's no output.)

The advantage here is you keep needless instance variables free from your controller.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T07:44:22.263

In your application helper, define this method:

```
def search_page?
  controller.controller_name != "search"
end 
```

Replace `"search"` with whatever your controller is named.

# python - 在 ubuntu 上学习 python 3.0

> ID：675754
> 
> 赞同：0
> 
> 时间：2009-03-24T00:40:59.503
> 
> 标签：python, ubuntu, development-environment, komodo

[解决]

我在 komodo 编辑中调整了偏好，最终得到：

不要自动缩进

不允许文件内容覆盖选项卡设置

更喜欢制表符而不是空格

每个缩进 4 个空格

每个标签字符的 4 个宽度

我还设置了 komodo 以显示空白和制表符，这最终揭示了搞砸的部分。

是的 - 这有点挑剔。:)

[/解决]

我已经在 ubuntu 8.10 上安装了 python 3.0 以及 komodo-edit ide。

我刚刚进入 python，我正在阅读视觉快速入门指南 python 2nd ed。（下面的例子来自那本书）。我遇到了一些非常令人沮丧的错误，非常感谢您的想法。

我已经多次重新输入和检查标签。

我开始认为安装或设置中出现了问题。

我在 komodo-edit 中输入了以下内容：

```
#!/usr/bin/python3.0
for row in range(1, 10):
    for col in range(1, 10):
        p = row * col
        if p < 10:
            print(' ', end = '')
        print(row * col, ' ', end = '')
    print() 
```

我无法使用 python 3 测试这是 IDLE - 似乎无法安装该版本的 IDLE。现在，我正在尝试从 shell 中运行。

首先，只需使用“python”来调用程序......

```
PYTHON [1] $  python ktest.py 
      File "ktest.py", line 6
        print(' ', end = '')
                       ^
    SyntaxError: invalid syntax 
```

现在尝试调用python编译器的不同方式......

```
PYTHON [1] $  python ktest.py 
          File "ktest.py", line 6
            print(' ', end = '')
                           ^
        SyntaxError: invalid syntax

PYTHON [1] $  python3 ktest.py 
      File "ktest.py", line 4
        p = row * col
                    ^
    TabError: inconsistent use of tabs and spaces in indentation

PYTHON [1] $  python3.0 ktest.py 
      File "ktest.py", line 4
        p = row * col
                    ^
    TabError: inconsistent use of tabs and spaces in indentation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T00:44:07.607

该示例使用了 python 2.x ，因为`python`显然是指 python2.x （对于某些 x），而不是 python3.0 （这很好，因为大多数程序都是针对 2.x 的）。

后两个示例使用 python 3.0 。您在源代码中混合了制表符和空格，应该去掉制表符（不要重新输入——使用正则表达式替换）。Python 3.0 对此比 2.x 更敏感——您可以使用`python -tt`for 2.x 获得相同的行为。

# c# - 是否可以对哈希表进行排序？

> ID：675759
> 
> 赞同：15
> 
> 时间：2009-03-24T00:42:43.447
> 
> 标签：c#, sorting, hashtable

我有一个返回`HashTable`. 我想在不重构我的属性的情况下对其进行排序。*请注意*：我不想返回另一种类型。代码：

```
 /// <summary>
    /// All content containers.
    /// </summary>
    public Hashtable Containers
    {
        get
        {
            Hashtable tbl = new Hashtable();
            foreach (Control ctrl in Form.Controls)
            {
                if (ctrl is PlaceHolder)
                {
                    tbl.Add(ctrl.ID, ctrl);
                }
                // Also check for user controls with content placeholders.
                else if (ctrl is UserControl)
                {
                    foreach (Control ctrl2 in ctrl.Controls)
                    {
                        if (ctrl2 is PlaceHolder)
                        {
                            tbl.Add(ctrl2.ID, ctrl2);
                        }
                    }
                }
            }

            return tbl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-24T00:46:44.717

哈希表通过将键映射到值来工作。此映射中隐含的概念是键未按任何特定顺序排序或存储。

不过，你可以看看[`SortedDictionary<K,V>`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-24T01:45:51.827

另一种选择是像您已经在做的那样构造哈希表，然后简单地从键构造一个排序集。您可以遍历该排序键集，根据需要从哈希表中获取相应的值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-24T00:45:46.963

lubos 是对的：你*不能*对 HashTable 进行排序。如果可以，它就不会是 HashTable。可以枚举HashTable，然后对枚举进行排序。但这会很慢。改用 a 会好很多[`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-24T00:44:27.200

抱歉，您无法对哈希表进行排序。您将不得不重构代码以使用一些可排序的集合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-24T00:45:00.320

我很确定哈希表无法排序......;）

[维基百科哈希表](http://en.wikipedia.org/wiki/Hash_table)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-24T00:53:21.347

您将需要返回哈希表以外的其他内容。我不会重申您声称已经了解的内容，但是您需要重新考虑设计的任何部分要求您在哈希表中返回已排序的对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-24T02:00:02.543

不完全是 C# 答案，但我相信你可以有所作为。

在 Perl 中，通常对哈希表进行“排序”以用于输出到显示器。

例如：

```
print "Items: ";
foreach (sort keys %items) {
    print $_, '=', $items{$_}, ' ';
} 
```

这里的诀窍是 Perl 不对散列进行排序，而是对复制的散列键列表进行排序。在 C# 中应该很容易将哈希键提取到列表中，然后对该列表进行排序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-24T00:46:23.063

对哈希表进行排序是没有意义的，因为您已经拥有几乎恒定的查找时间。或者最坏的情况是 O(B)，其中 B 是桶大小。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-24T01:50:13.377

当然哈希表是可以排序的，但是你需要先定义对哈希表进行排序意味着什么。（这就是问题所在）

然而，一旦你这样做了，你总是消除了哈希表可以给你带来的所有优势，你不妨使用排序数组（使用二进制搜索），或者改用红黑树。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-02T20:59:28.407

我是一个新程序员，所以我说的每一句话都信以为真。但这是我遇到类似情况时所做的。我创建了一个有两个变量的类，然后`List`从这些变量中创建了一个对象，然后我使用 linq 对这些变量进行排序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-08T05:55:31.557

您还可以使用 DataView 对 Hashtable 进行排序。这是我 5 年前写的一篇文章：http: [//www.codeproject.com/Articles/37039/Sorting-Hashtable](http://www.codeproject.com/Articles/37039/Sorting-Hashtable)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-09T10:33:35.390

虽然你不能对哈希表进行排序

[https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_hash_tables?view=powershell-7.1](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_hash_tables?view=powershell-7.1) Powershell哈希表文档中的类似

# c# - Linq to Sql 父子

> ID：675772
> 
> 赞同：3
> 
> 时间：2009-03-24T00:45:36.747
> 
> 标签：c#, linq-to-sql

好的，所以我是 C# 处事方式的新手，我来自 ruby​​ 世界。

我有一对多的关系，（为了这个问题，父母与孩子），出于某种原因，L2S 想要创建一个新的父母而不是使用已经拥有的父母。这是代码。

```
 Console.WriteLine(parent.Id); // this equals 1
foreach (string names in names)
{
    Child new_child= new Child();
    new_child.Parent = parent;//now parent.Id would equal the next in the sequence.
    new_child.Name= name

    db.CommitLogs.InsertOnSubmit(new_child);
    db.SubmitChanges();
} 
```

但如果我只是说

```
new_child.ParentId = parent.Id 
```

效果很好。

有人可以向我解释发生了什么吗？

PS。使用 L2S 从数据库中找到父级。所有钥匙等都设置正确。感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T01:11:57.587

这两个都应该工作：

//选项1：

```
foreach (string names in names)
{
    Child new_child= new Child();
    new_child.ParentId = parent.Id;//now parent.Id would equal the next in the sequence.
    new_child.Name= name

    db.CommitLogs.InsertOnSubmit(new_child);
    db.SubmitChanges();
} 
```

//选项2：

```
foreach (string names in names)
{
    Child new_child= new Child();
    new_child.Name= name
    parent.Children.Add(child);
    db.SubmitChanges();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T01:33:22.200

你可以像弗雷迪所说的那样做：

```
foreach (string names in names)
{
    Child new_child= new Child();
    new_child.Name= name
    parent.Children.Add(child);
    db.SubmitChanges();
} 
```

但也许只是在 foreach 循环之外进行 1 DB 调用：

```
foreach (string names in names)
{
    Child new_child= new Child();
    new_child.Name= name
    parent.Children.Add(child);
}
db.SubmitChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T00:59:01.410

你有没有尝试过

parent.Children.Add(new_Child);

// 其他的东西

// 提交更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T01:59:08.253

ORM（SqlMetal 或通过 DBML）为父对象建模（您还会注意到父实体上的子对象集合）。

但是，实体保留了外键列（在本例中为 ParentId）的属性表示，也可以分配给该列。

如果您只知道父实体的 ID（而不是通过 DataContext 加载父实体），这会很有帮助。

AFAIK 使用直接分配（例如 Child.Parent = Parent）或通过分配 ID（例如 Child.ParentID = ID）没有直接的缺点，只要（显然）您尝试分配的 ID 属于父表。

# itunes - 有谁知道 daap 协议的良好参考/文档/教程？

> ID：675782
> 
> 赞同：1
> 
> 时间：2009-03-24T00:48:40.733
> 
> 标签：itunes, protocols, daap

对于那些第一次听到它的人来说，它代表数字音频访问协议。这就是 iTunes 用来流式传输音乐的方式。

该协议使用 HTTP 来传递播放列表信息、流式音频等。

我查看了规格，但有很多不清楚的地方。有没有人有这个协议的更好文档的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-24T01:07:37.770

这是你最好的选择：[非官方 DAAP 协议文档](http://tapjam.net/daap/)

此外，请参阅 Wikipedia[条目](http://en.wikipedia.org/wiki/Digital_Audio_Access_Protocol#External_links)中的其他外部链接。

# database-design - 多个外键

> ID：675785
> 
> 赞同：6
> 
> 时间：2009-03-24T00:49:24.723
> 
> 标签：database-design, normalization

我的数据库设计以前是相当线性的，所以我对可能很容易解决的问题感到困惑。

我有一个“POSTS”表，其中包含可能是“CATEGORY”或“TOPIC”子项的帖子。为“POSTS”表定义外键的最佳方法是什么？

我想我可以有一个名为 POST_CATEGORY_ID 的列和一个名为“POST_TOPIC_ID”的字段，它可以为空，但这听起来不对。当然，我缺少一个简单的解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T00:56:32.883

您在可以为空的 POST_CATEGORY_ID 和 POST_TOPIC_ID 字段的正确轨道上。这将模拟帖子可选地与类别相关并且可选地与主题相关。

如果这是排他性和强制性的，则需要添加一个检查约束，要么为空，但不能同时为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T00:58:31.113

您可以在 POST 和 CATEGORY 以及 POST 和 TOPIC 之间建立多对多关系：

```
POST
----
ID
Text ...
...

CATEGORY
--------
ID
Name

TOPIC
-----
ID
Name

POST_CATEGORY
-------------
POST_ID (FK)
CATEGORY_ID (FK)

POST_TOPIC
----------
POST_ID (FK)
TOPIC_ID (FK) 
```

这样，帖子可以与任意数量的类别和主题相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T00:55:47.173

我认为外键声明只能引用一个表：

```
FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORY(CATEGORY_ID);
FOREIGN KEY(TOPIC_ID) REFERENCES TOPIC(TOPIC_ID); 
```

如果我是正确的，您将必须有两个外键，一个用于 CATEGORY 表，另一个用于 TOPIC，并且都需要为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-24T00:58:29.990

如何将类别和主题放在同一个表中

创建表topics_categories（id号，描述varchar2（100），item_type char（1））；--C 或 T

然后是topics_categories的单个外键

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T00:57:17.483

最好的方法是使用继承。您将拥有“Posts”的两个特化：“Posts_Category”和“Posts_Topic”两者都有“post_id”（与父表“Posts”相关）和另一个字段：

“Category_ID”（“Posts_Category”）

“Topic_ID”（“Posts_Topic”）

如果这听起来令人困惑，请查看他们的文档中的 Doctrine (PHP ORM)：http: [//www.doctrine-project.org/documentation/manual/1_0/en/inheritance](http://www.doctrine-project.org/documentation/manual/1_0/en/inheritance)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-24T00:57:33.847

如果您想在数据库中定义外键，您建议的解决方案听起来不错。我还建议在触发器中编写一些代码，以确保两个字段都不为空。

# c++ - 拆分 STL 向量

> ID：675811
> 
> 赞同：1
> 
> 时间：2009-03-24T01:01:05.163
> 
> 标签：c++, geometry

假设我有一个顶点为 0..n-1 的（凸）多边形。我想把这个多边形分成两半，比如说，在顶点 i 和 j 之间。顶点 i 和 j 应该出现在两个多边形中。

据我所知，只有两种情况。当 i < j 或 i > j 时。i 永远不等于 j（它们也不相邻）。

我正在存储我的顶点，如`vector<Point> poly`. 您可以假设`Point`它只是一个具有两个双精度`x`和的基本结构`y`，点按 CCW 顺序索引。

如果 i < j，那么我只需将 i 到 j（含）的顶点复制到一个向量中，然后从 j 到 n-1 加上 0 到 i 到另一个向量中。或者在另一种情况下反之亦然，对吧？

这是我正在使用的代码，但它似乎无法正常工作（让 j == 最近索引）：

```
if (i < closestIndex) {
    lowerPoly.insert(lowerPoly.end(), poly.begin() + i, poly.begin() + closestIndex + 1);
    upperPoly.insert(upperPoly.end(), poly.begin() + closestIndex, poly.end());
    upperPoly.insert(upperPoly.end(), poly.begin(), poly.begin() + i + 1);
} else {
    lowerPoly.insert(lowerPoly.end(), poly.begin() + i, poly.end());
    lowerPoly.insert(lowerPoly.end(), poly.begin(), poly.begin() + closestIndex + 1);
    upperPoly.insert(upperPoly.end(), poly.begin() + closestIndex, poly.begin() + i + 1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T01:16:40.057

我认为除了 i 永远不等于 j 之外，您还需要包括另一个限制。

您还需要确保如果 i 是您没有在 i-1 或 i+1 处分裂的起点。如果边是线性的，在连续点处分割意味着分割线只是一条边，所以你得到了原来的多边形和一条边线，这看起来不是很有趣。

我建议使用一个二维点数组，而不是两个数组 x 和 y，顶点在多边形周围以逆时针方向连续编号。

所以这两个多边形将是：

多边形1：从i开始，迭代到结束点j，以从j回到i的边结束；

多边形2：从i开始，到终点j，然后在j+1，j+2上，回到i。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T02:22:48.510

作为旁注：

你真的没有2个案例。如果 i > j 则只需交换 i 和 j。那么你总是在 i < j 的情况下，假设 i != j。

我可能会将其编码如下：

```
if (i > closestIndex) 
    std::swap (i, closestIndex);
assert(closestIndex - i > 1); 
// make sure i != closestIndex and i is not adjacent to closestIndex

lowerPoly.insert(lowerPoly.end(), poly.begin() + i, poly.begin() + closestIndex + 1);
upperPoly.insert(upperPoly.end(), poly.begin() + closestIndex, poly.end());
upperPoly.insert(upperPoly.end(), poly.begin(), poly.begin() + i + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T01:58:09.473

我的错。上面的代码很好，我的显示例程有问题。我将太多多边形推到堆栈上，所以它看起来不正确。应该很明显，但我没有发现它。感谢达菲莫的帮助。

# c - 连续调用 recvfrom() 会丢失数据？

> ID：675812
> 
> 赞同：8
> 
> 时间：2009-03-24T01:03:18.467
> 
> 标签：c, sockets, udp

我正在开发一个使用 UDP 的可靠文件传输程序。（计算机网络课程。）

我的问题是 - 好吧，考虑一下这种情况：

1.  发送者（例如）有 12 个字节的数据要发送。所以发送者执行这个调用：

    ```
    sendto(fd, &buf, 12, 0, (struct sockaddr *)&cliaddr,sizeof(cliaddr)); 
    ```

    这会以不可靠的方式发送 12 个字节的数据。该数据的前 4 个字节恰好是“消息长度”字段。在这种情况下，前 4 个字节的值可能为 0x0000000C

2.  接收方想要使用 recvfrom() 读取前 4 个字节。看到段大小是 12 字节，它想读取剩余的 8 字节。所以接收器可能看起来像这样：

    ```
    /* read the segment size */
    recvfrom(sockfd,&buf,4,0,(struct sockaddr *)&cliaddr,&len);

    /* do some arithmetic, use bzero(), etc */

    /* read the rest of the data */
    recvfrom(sockfd,&buf,8,0,(struct sockaddr *)&cliaddr,&len); 
    ```

当我执行此代码时，我可以毫无问题地接收前 4 个字节。但是当我尝试获取剩余的数据时，这些数据似乎丢失了。在我的输出中，我得到了垃圾 - 它看起来像是发送者正在发送到（）的*下一个*12 个字节的一部分。

这是预期的行为吗？也就是说，如果单个recvfrom()调用没有读取所有发送的数据，是不是不能保证数据（剩余的8个字节）可供我使用？

似乎发送段标头（包括其大小）和有效负载的标准方法不起作用。这是否意味着我需要发送 2 个单独的段 - 一个仅包含标头信息，然后是带有有效负载的第二个段？还是我只是错误地使用了这些系统调用（或者是否有我缺少的标志或 setsockopt()？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-24T01:07:37.787

从 recv(2) 手册页：

> 如果消息太长而无法放入提供的缓冲区，则可能会丢弃多余的字节，具体取决于接收消息的套接字类型。

这就是发生在你身上的样子。

您应该有一个最大消息大小的缓冲区并读取该数量。您将只读取一个数据报并返回长度。然后，您可以解析缓冲区前面的长度，并根据 recvfrom(2) 返回的内容对其进行验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-10T18:32:59.437

Another method is to do a dummy recvfrom with the MSG_PEEK flag. While the returned size is the same as your buffer size (or more), get a bigger buffer and try again. Then do recvfrom again (without the MSG_PEEK flag) to remove the message from the UDP buffer.

But of course, this is fairly inefficient and should not be done when you can just decide a maximum packet size.

# c# - 在 JSON 中表示子对象的正确语法是什么？

> ID：675815
> 
> 赞同：2
> 
> 时间：2009-03-24T01:05:04.327
> 
> 标签：c#, javascript, json, serialization, syntax

我有一个从 JSON 反序列化为服务器端对象的简单对象。

JSON：

```
{
   name             : 'ObjectName',
   host             : 'http://localhost',
   ImagesPath       : '/Images/'
} 
```

在服务器端，上面的 JSON 代码通过以下方式反序列化到这个 C# 对象中`System.Web.Script.Serialization.JavaScriptSerializer`：

```
public class InfoObject
{
    public string Name { get; set; }
    public string Host { get; set; }
    public string ImagesPath { get; set; }
} 
```

目前上述工作正常，但我正在考虑为其添加很多属性。我想添加子对象来保存额外的数据，以便所有属性都不在一个长类中。

子对象对象：

```
public class TestSubObject
{
     public string TestString { get; set; }
} 
```

所以新的 C# 对象看起来像：

```
public class InfoObject
{
    public string Name { get; set; }
    public string Host { get; set; }
    public string ImagesPath { get; set; }
    public TestSubObject MoreInformation {get;set;}
} 
```

但问题是我不知道如何在 JSON 中表示子对象属性的初始化。也许我错过了一些明显的东西，但谷歌搜索并没有立即给出答案。

我试过：

```
{
    name             : 'ObjectName',
    host             : 'http://localhost',
    ImagesPath       : '/Images/',
    MoreInformation.TestString : 'hello world'
} 
```

但是没有骰子，那么我该如何正确地用 JSON 编写上面的内容呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-24T01:09:44.830

你可以这样写：

```
{
    Name             : 'ObjectName',
    Host             : 'http://localhost',
    ImagesPath       : '/Images/',
    MoreInformation  : {TestString : 'hello world'}
};

// And to access the nested object property:
obj.MoreInformation.TestString 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T01:25:50.877

JSON 本身是一个“对象”表示法，只需将另一个对象放在“对象”内

```
{
   key: value,
   key2 : { inner_key : value, inner_key2 : value }
} 
```

如您所见，表达式`{ ... }`产生一个对象

# objective-c - Apple 的 API 中的“k”前缀表示什么？

> ID：675816
> 
> 赞同：49
> 
> 时间：2009-03-24T01:05:08.243
> 
> 标签：objective-c, hungarian-notation

我遇到过许多名为`k`+`someVariableNameHere`或`k`++的核心基础变量`APILibraryName(2Char)`示例`someVariableNameHere`。这个前缀`K`表示什么？

示例包括：

`kGLPFAStereo`
`kCollectionLockBit`
`kSetDebugOption`

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-03-24T01:12:23.780

k 表示匈牙利符号中的常数...参见[Cocoa 中的小写“k”](https://stackoverflow.com/questions/472103/lower-case-k-in-cocoa/472118#472118)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T01:12:25.450

这是 Macintosh 编程早期的命名约定。它表示一个常数。

# c++ - 如何在 C++ 中创建一个位于堆而不是堆栈的数组？

> ID：675817
> 
> 赞同：24
> 
> 时间：2009-03-24T01:06:02.657
> 
> 标签：c++, arrays, stack, malloc, heap-memory

我有一个非常大的数组，它的长度必须是 262144 个元素（并且将来可能会更大）。我试过像这样在堆栈上分配数组：

```
#define SIZE 262144
int myArray[SIZE]; 
```

但是，似乎当我尝试添加元素超过某个点时，当我尝试访问它们时值是不同的。我知道这是因为堆栈上只有有限数量的内存，而不是具有更多内存的堆。

我尝试了以下方法，但运气不佳（无法编译）：

```
#define SIZE 262144
int *myArray[SIZE] = new int[SIZE]; 
```

然后我考虑使用`malloc`，但我想知道是否有更多类似 C++ 的方式来执行此操作...

```
#define SIZE 262144
int *myArray = (int*)malloc(sizeof(int) * SIZE); 
```

我应该去`malloc`吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-03-24T01:14:39.733

你会想像这样使用 new ：

```
int *myArray = new int[SIZE]; 
```

我还会提到这一点的另一面，以防万一......

由于您从堆栈过渡到堆，因此您还需要在完成后清理此内存。在堆栈上，内存会自动清理，但在堆上，你需要删除它，因为它是一个数组，你应该使用：

```
delete [] myArray; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-03-24T02:25:08.940

更多的 C++ 方法是使用向量。然后你就不用担心完成后删除内存；矢量将为您完成。

```
#include <vector>

std::vector<int> v(262144); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T01:09:02.757

`new`在堆上分配。

```
#define SIZE 262144
int * myArray = new int[SIZE]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-24T01:08:43.587

由于在编译时不一定知道数字，因此类型是指针：

```
int *myArray = new int[262144]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-24T01:09:42.913

第一次尝试失败的原因是语法不正确。试试这个：

```
int *myArray = new int[SIZE]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-24T01:09:46.173

我相信

```
#define SIZE 262144
int *myArray[SIZE] = new int[262144]; 
```

应该

```
#define SIZE 262144
int *myArray = new int[262144]; 
```

或者更好

```
#define SIZE 262144
int *myArray = new int[SIZE]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-24T01:10:14.550

您使用的语法`new`错误，应该是：

```
int *myArray = new int[262144]; 
```

您只需要将大小放在作业的右侧。

但是，如果您使用的是 C++，您可能希望查看使用[`std::vector`](http://www.sgi.com/tech/stl/Vector.html)（您将拥有）或类似的东西，[`boost::scoped_array`](http://www.boost.org/doc/libs/1_38_0/libs/smart_ptr/scoped_array.htm)以使内存管理更容易一些。

# unix - 哪些选项可用于在负载平衡服务器之间同步密码？

> ID：675823
> 
> 赞同：-1
> 
> 时间：2009-03-24T01:08:23.227
> 
> 标签：unix, authentication, passwords, load-balancing

我们有几台 UNIX 机器，当您 telnet 到某个机器时，您可以使用它们。passwd 文件不在共享挂载上（我不确定挂载它们有多安全）。最终结果是，如果您在一个框中更改密码，那么当您登录到第二个框时，它会告诉您您的密码无效。这对最终用户来说毫无意义，因为他们在两个实例中都输入了 telnet servername。有任何实用的经验、建议或指示来帮助解决这种情况吗？

## 环境包含

*   AIX 5.3、5.2、5.1、4.3
*   惠普 11 11.11 11.23 11.23I
*   周日 10
*   Linux

更新：

我正在考虑在除一个之外的所有盒子上禁用密码。然后 passwd 可以是对控制密码服务器的远程调用，或者明确地告诉用户去哪台机器以更改他们的密码。

更新：

IBM 产品看起来确实很有趣，有人谈论过 Centrify 吗？

想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-24T01:36:58.883

为什么不使用 LDAP，因为它的设计目的就是为了做到这一点，甚至更多？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-27T22:52:09.780

一种选择是从 telnet 转移到 ssh，并使用 ssh 密钥而不是密码。SSH 密钥的更改频率往往低于密码（用户可以在不接触远程服务器的情况下更改私钥的密码），而公钥通常位于用户的主目录中，您可以将其放在共享挂载上（大概是您已经做）。

除了解决同步问题之外，这将使您的环境更加安全。缺点是设置每个新用户的开销可能会稍高，因为您需要让他们创建一个密钥对并将公钥发送给管理员，管理员可以将其放置在他们的主目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T01:20:22.467

如果您有多个 UNIX 服务器，您可能希望在所有这些服务器上拥有一组密码和一组帐户。根据这是哪种 UNIX，您可能希望使用 nis 或 nis+ 或其他一些本机到该 UNIX 的解决方案来集中管理密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T07:18:37.820

LDAP 答案很好！

您可以尝试来自 sun 的 NIS+。服务器/管理部分位于 Solaris 机器上，但它具有大多数 *nix 机器的客户端。这会自动在服务器组上同步密码、用户 ID、组和访问规则。

另一种选择（但前提是您的老板有大量预算！）是 IBM 的 Tivoli Federated Identity Manager。哪个同步密码 - 或 - 当您在框之间传递时切换用户 ID 和密码。

# sql-server - 为什么方括号与表名一起出现？

> ID：675838
> 
> 赞同：7
> 
> 时间：2009-03-24T01:14:12.370
> 
> 标签：sql-server, database

我创建了一个包含几个表的数据库，一些表名用方括号括起来：[table_name]

有谁知道为什么会发生这种情况，以及如何摆脱它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-24T01:19:49.020

当您使用 SQL Server Management Studio 编写对象脚本时，它将用方括号将所有名称括起来。

仅当名称包含空格或保留字（例如`[Name])`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T01:15:15.223

有问题的表是 MSSQL 关键字吗？将 MSSQL 对象名称放在括号中是一种常见的表示法。这没什么大不了的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T01:15:48.670

方括号表示该名称代表一个对象而不是保留字。默认情况下，SQL Server 添加这些以确保它生成的脚本正确运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-24T15:17:56.120

放置方括号 Sql Server 允许您使用保留字或带有空格的短语作为标识符。如果您的表包含任何这些，这是正常行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-15T10:03:58.417

这是因为您的列名中有一个空格。

# latex - 在 LaTeX 中排版新功能

> ID：675840
> 
> 赞同：3
> 
> 时间：2009-03-24T01:14:55.600
> 
> 标签：latex, typesetting

所以，我只有一个小问题：

在 LaTeX 中排版尚未包含在各种包中的新功能的“最佳方式”是什么？现在我只是将`\mbox`其用作我的首选方法，但我只是想知道是否有一种更“可接受的方法”（与 mbox 一样，我必须确保在函数文本周围包含空格为了让它看起来不太奇怪）

这是一个例子：

```
$y(t)=2e^{1/2}\sqrt{\pi}\mbox{Erfi }(t)$ 
```

结果看起来像：

[$y(t)=2e^{1/2}\sqrt{\pi}\mbox{Erfi }(t)$ http://adamnbowen.com/images/error_function.jpg](http://adamnbowen.com/images/error_function.jpg)

不要误会我的意思......我认为它看起来不错，但我只是在寻找一些意见（就最佳实践而言）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-24T01:32:46.960

`\DeclareMathOperator`（或者，如果您正在使用一些没有 AMS 包的奇怪 LaTeX 发行版，`\mathop{\mathrm{Erfi}}`）

请参阅始终有用的 UK TeX 常见问题解答，特别[是在 LaTeX 中定义新的类似日志的函数](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=newfunction)。

# iphone - 提示而不是问题：通过推送电子邮件的伪推送功能

> ID：675845
> 
> 赞同：3
> 
> 时间：2009-03-24T01:17:14.127
> 
> 标签：iphone

我只是想知道是否有人在使用这种技术：

由于推送通知只会随 OS 3.0 一起提供，我一直在考虑使用电子邮件推送（Exchange、mobile.me）作为解决方法：

您可以注册一个 URL，例如。myxyappname:// 用于您自己在 iPhone 中的应用程序。（见例子@developer.apple.com/iphone）

如果您有一台服务器并想向您的订阅者推送特定于应用程序的内容，您可以向他们发送一封包含特定链接的电子邮件，例如。myxyappname://myxyappname?requesttype=X&id=Y

当用户收到电子邮件（推送，所以应该很快......）并点击提到的链接时，您的应用程序将自动在 iPhone 上启动（如果您的应用程序正确注册了 url），并且在您的应用程序中您可以解析url 并根据查询字符串显示相应的信息。

老屁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-29T21:10:14.983

效果很好。不要忘记您也可以通过短信发送您的自定义 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-24T04:44:13.760

不久前我也有同样的想法，但我不确定你是否可以在 iPhone 上注册自定义 URL 架构。很高兴知道你可以。我正在开发一款棋盘游戏，我曾想过通过电子邮件玩游戏，但最后要求用户设置他们的 SMTP 信息似乎太麻烦了。（在网络邮件时代，大多数人可能甚至不知道那是什么！）

顺便说一句，通过 SMS 发送 URL 会排除所有 iPod Touch 用户。恐怕不是什么好事。

# language-agnostic - 从（人类）客户收集在线结构化数据的软件/语言

> ID：675850
> 
> 赞同：-2
> 
> 时间：2009-03-24T01:21:11.747
> 
> 标签：language-agnostic, data-collection

我需要开发一个 Web 界面来收集和验证来自我组织的许多客户的一系列数据。

这不是一个单一的表单，而是一组具有相互依赖关系的表单（即，如果表单 B 上的字段 A 等于 C，则需要表单 Y 上的字段 X）和可变长度列表（请提供所有 X 的详细信息你的财产）。

我查看了 Microsoft InfoPath 和 Adob​​e LiveCycle 的营销，但我得到的印象是它们主要是电子表格解决方案，而不是数据收集工具。（例如，如果用户输入了他们的地址一次，他们就不必再在表单上看到它）。

有什么好的工具、应用程序或特定领域语言的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T01:27:29.470

听起来您正在寻找调查软件。如果您想遵循“买，不建”的原则，请查看[http://www.surveymonkey.com](http://www.surveymonkey.com)。如果您想在内部托管，那么[http://www.quask.com/](http://www.quask.com/)有一个不错的产品，叫做 FormArtist。

否则，您可以使用任何 Web 应用程序技术（ASP.NET、PHP 等）来构建您自己的调查应用程序。

# javascript - 刷新 div（导致浏览重绘它）

> ID：675855
> 
> 赞同：3
> 
> 时间：2009-03-24T01:26:11.673
> 
> 标签：javascript, jquery, jquery-ui, tabs

在 Web 应用程序中，我在动态内容方面遇到了一些问题——表单被隐藏或显示在 jQuery UI 选项卡控件上方会导致呈现问题，直到用户将鼠标悬停在选项卡上，然后导致选项卡标题重新绘制正确的位置。

它只发生在 IE7 中，作为一种快速破解，我在显示表单后执行此操作以在 IE 中刷新选项卡的 div：

```
$('#tabs').css('display', 'none').css('display', 'block'); 
```

我只是想知道是否有更合适/更强大的方法来使`div`元素重绘自身/重新计算页面上元素的布局，因为我担心我的方法可能会对其他浏览器产生不必要的副作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T01:42:49.167

疯狂的猜测，但可能是`hasLayout`。

尝试添加类似：

```
#tabs {
  zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T03:28:55.573

我曾经遇到过类似的问题，结果是显示的div上没有设置宽度的问题。当我在它工作的元素上设置静态像素宽度时。

# html - facebook问题的小部件

> ID：675856
> 
> 赞同：1
> 
> 时间：2009-03-24T01:26:32.093
> 
> 标签：html, flash, iframe

我刚刚通过 Clearsprings 制作了一个在 facebook 上使用的小部件。这是我们制作的第二个，第一个很好。这次我在尝试将其嵌入 facebook 时遇到了一些问题。

问题是 SWF 不会嵌入，所以我选择了 HTML 选项。然而，这将它放在一个 iFrame 中，然后位于 facebook 布局、菜单等的顶部。显然不是预期的行为，它还阻止用户单击添加。

关于我可以做些什么来解决这个问题的任何想法？

编辑：已解决，嵌入的问题是最大文档高度。重新做了 600 而不是 800px 高，这很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T13:57:02.147

解决了，嵌入的问题是最大文档高度。重新做了 600 而不是 800px 高，这很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T14:09:30.137

是的，看起来 800px 的最大尺寸有点接近骨骼。我不建议使用他们推荐的高度。

降低高度是个好主意。

我知道 iFrame 位于任何东西之上，因为 z-index 不会影响它们。

很高兴你把事情解决了。

# c# - 根据子类从基类指定抽象方法的返回类型

> ID：675857
> 
> 赞同：18
> 
> 时间：2009-03-24T01:26:40.517
> 
> 标签：c#, generics, polymorphism, abstract-class, overriding

我有以下结构：

```
abstract class Base {
        public abstract List<...> Get(); //What should be the generic type?
}

class SubOne : Base {
    public override List<SubOne> Get() {

    }
}

class SubTwo : Base {
    public override List<SubTwo> Get() {

    }
} 
```

我想创建一个抽象方法，它返回具体子类是什么类。因此，正如您从示例中看到的那样， in 中的方法`SubOne`应该返回`List<SubOne>`，而 in 中的方法`SubTwo`应该返回`List<SubTwo>`。

我在基类中声明的签名中指定什么类型？

* * *

**[更新]**

感谢您发布的答案。

解决方案是使抽象类通用，如下所示：

```
abstract class Base<T> {
        public abstract List<T> Get();
}

class SubOne : Base<SubOne> {
    public override List<SubOne> Get() {

    }
}

class SubTwo : Base<SubTwo> {
    public override List<SubTwo> Get() {

    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-03-24T01:32:55.947

您的抽象类应该是通用的。

```
abstract class Base<T> {
        public abstract List<T> Get(); 
}

class SubOne : Base<SubOne> {
    public override List<SubOne> Get() {

    }
}

class SubTwo : Base<SubTwo> {
    public override List<SubTwo> Get() {
    }
} 
```

如果您需要引用没有泛型类型参数的抽象类，请使用接口：

```
interface IBase {
        //common functions
}

abstract class Base<T> : IBase {
        public abstract List<T> Get(); 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-24T01:34:28.517

```
public abstract class Base<T> 
{       
    public abstract List<T> Get(); 
}

class SubOne : Base<SubOne> 
{
    public override List<SubOne> Get() { return new List<SubOne>(); }
}

class SubTwo : Base<SubTwo> 
{
    public override List<SubTwo> Get() { return new List<SubTwo>(); }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T01:33:44.383

试试这个：

```
public abstract class Base<T> {
  public abstract List<T> Foo();
}

public class Derived : Base<Derived> {   // Any derived class will now return a List of
  public List<Derived> Foo() { ... }     //   itself.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-24T01:33:06.180

我认为你不能让它成为特定的子类。你可以这样做：

```
abstract class Base<SubClass> {
        public abstract List<SubClass> Get(); 
}
class SubOne : Base<SubOne> {
    public override List<SubOne> Get() {
        throw new NotImplementedException();
    }
}
class SubTwo : Base<SubTwo> {
    public override List<SubTwo> Get() {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-05T08:42:15.807

如果您的**基类由于各种原因而无法泛型**，则此方法可能很有用：

```
abstract class Base {
}
interface IHasGetter<T> {
  List<T> Get();
}
static class HasGetterHelper {
    public static List<T> Get<T>(this T v) where T: IHasGetter<T>  => v.Get();
}
class SubOne : Base, IHasGetter<SubOne> {
    public List<SubOne> Get() {
        throw new NotImplementedException();
    }
}
class SubTwo : Base, IHasGetter<SubTwo> {
    public List<SubTwo> Get() {
        throw new NotImplementedException();
    }
} 
```

如果您**无法将接口添加到子类**，并且仍然**无法将泛型添加到 Base 类型，则**此方法可能很有用：（不幸的是，您无法使 GetImpl 受保护，因为不允许辅助类位于基类中)

```
abstract class Base {
    public abstract List<T> GetImpl<T>() where T:Base;
}
static class HasGetterHelper {
    public static List<T> Get<T>(this T v) where T: Base => v.GetImpl<T>();
}
class SubOne : Base {
    public override List<T> GetImpl<T>() {
        throw new NotImplementedException();
    }
}
class SubTwo : Base {
    public override List<T> GetImpl<T>() {
        throw new NotImplementedException();
    }
} 
```

在这两种情况下，这都会按预期工作：

```
class Tester
{
   List<SubOne> TestIt() => new SubOne().Get();
} 
```

# java - Java 首选项存储在 Mac OS X 上的什么位置？

> ID：675864
> 
> 赞同：44
> 
> 时间：2009-03-24T01:30:25.157
> 
> 标签：java, macos, preferences

在 Windows 上，您在应用程序中从 java.util.prefs.Preferences 访问的 Java 首选项存储在注册表中。Mac OS X 上存储在哪里？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-03-24T01:38:06.230

来自[Apple Developer Connection](http://developer.apple.com/documentation/Java/Conceptual/Java14Development/05-CoreJavaAPIs/CoreJavaAPIs.html#//apple_ref/doc/uid/TP40001902-210728-TPXREF143)：

> Preferences API 生成的首选项文件名为 `com.apple.java.util.prefs`. 用户的首选项文件存储在他们的主目录 ( `~/Library/Preferences/`) 中。`/Library/Preferences/`如果用户是管理员，则系统首选项存储在 磁盘中，并且仅保留在磁盘中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-11-02T22:55:15.900

另外，请注意，如果首选项嵌套足够多，它不会直接在 中`com.apple.java.util.prefs`，而是在它自己的文件中。例如，如果您有一个节点`/a/b/c`，则该节点的键/值对将存储在`a.b.c.plist`.

该文件将在`~/Library/Preferences/`或`/Library/Preferences/`中，对于该`com.apple.java.util.prefs`文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-29T08:57:33.510

当我使用代码创建首选项对象时：

```
package pl.marcinchwedczuk.iunrar.gui;

public class AppPreferences {
    private final Preferences preferences = Preferences
            .userNodeForPackage(AppPreferences.class); 
```

然后设置将存储在：

```
/Users/$USER/Library/Preferences/pl.marcinchwedczuk.iunrar.plist 
```

（由于某种原因`gui`，部分缺失，在 macOS BigSur 上进行了测试）。

还记得调用`.flush()`首选项对象。

# apache-flex - Flash 和 Flex 中的线程

> ID：675872
> 
> 赞同：7
> 
> 时间：2009-03-24T01:33:56.943
> 
> 标签：apache-flex, flash, actionscript-3, multithreading, concurrency

Flash、Actionscript 和 Flex 中是否可以像 C# 和 Java 中一样使用线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-24T02:19:23.307

我正在开发一个项目，该项目将使用 Pixel Bender 在单独的线程上进行计算。我希望很快有一些东西可以写博客。同时，请为此功能请求投票： [https ://bugs.adobe.com/jira/browse/ASC-3222](https://bugs.adobe.com/jira/browse/ASC-3222)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T18:54:13.193

我知道这个问题已经过时了，但是如果您仍在寻找 Flash 中的多线程解决方案（哈哈哈）。从 flex 3.4 开始，就有了线程。

[http://esdot.ca/site/2012/intro-to-as3-workers-hello-world](http://esdot.ca/site/2012/intro-to-as3-workers-hello-world)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T01:38:30.317

目前没有。如果你愿意，你可以使用伪线程。[http://blogs.adobe.com/aharui/2008/01/threads_in_actionscript_3.html](http://blogs.adobe.com/aharui/2008/01/threads_in_actionscript_3.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-24T01:39:46.367

唉，[**在 Actionscript 中没有多线程**](http://www.adobe.com/cfusion/communityengine/index.cfm?event=showdetails&productId=2&postId=12026)。但是，您可以使用伪线程来伪造它（有关详细信息，请参阅[**链接），尽管这有其自身的问题。**](http://www.adobe.com/cfusion/communityengine/index.cfm?event=showdetails&productId=2&postId=12026)

# java - 如何在三角形上填充颜色

> ID：675878
> 
> 赞同：7
> 
> 时间：2009-03-24T01:36:30.213
> 
> 标签：java, geometry, drawing

我用线画了一个三角形。我怎样才能在上面填充颜色？到目前为止，我只能成功为线条着色，但不能填充颜色。

```
public void paintComponent(Graphics g){
        super.paintComponents(g);
        int k=0;
        for (j=0 ; j < numOfLines; j++){    // the values of numOfLines retrieved from other method.
        g.setColor(Color.green);
        g.drawLine(x[k], x[k+1], x[k+2], x[k+3]);
        k = k+4;  //index files
        } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-24T01:42:32.960

[`Polygon`](http://java.sun.com/javase/6/docs/api/java/awt/Polygon.html)通过调用从顶点创建一个并填充它[`fillPolygon(...)`](http://java.sun.com/javase/6/docs/api/java/awt/Graphics.html#fillPolygon(java.awt.Polygon))：

```
// A simple triangle.
x[0]=100; x[1]=150; x[2]=50;
y[0]=100; y[1]=150; y[2]=150;
n = 3;

Polygon p = new Polygon(x, y, n);  // This polygon represents a triangle with the above
                                   //   vertices.

g.fillPolygon(p);     // Fills the triangle above. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-24T01:41:27.890

您需要指定多边形的顶点（在本例中为三角形）并传递给`fillPolygon():`

```
 public void paint(Graphics g) 
  {
    int xpoints[] = {25, 145, 25, 145, 25};
    int ypoints[] = {25, 25, 145, 145, 25};
    int npoints = 5;

    g.fillPolygon(xpoints, ypoints, npoints);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-16T23:46:12.633

```
 public void paintComponent(Graphics g){
         super.paintComponents(g);

      int x[] = {1,2,3};
      int y[] = {4,5,6};
      int npoints = x.length;//or y.length

      g.drawPolygon(x, y, npoints);//draws polygon outline
      g.fillPolygon(x, y, npoints);//paints a polygon

} 
```

# asp.net-mvc - 那里最好的 asp.net mvc 教程是什么？

> ID：675884
> 
> 赞同：3
> 
> 时间：2009-03-24T01:40:46.347
> 
> 标签：asp.net-mvc

答案可能包括博客、播客等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-24T01:42:54.610

看：

[http://asp.net/mvc](http://asp.net/mvc)

[ASP.NET MVC 快速入门——一站式教程？](https://stackoverflow.com/questions/52668/asp-net-mvc-quick-start-a-one-stop-tutorial)

[用 VB.net 2008 开始 ASP.NET MVC](https://stackoverflow.com/questions/32642/beginning-asp-net-mvc-with-vb-net-2008)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-24T02:07:55.720

免费的[前 185](http://weblogs.asp.net/scottgu/archive/2009/03/10/free-asp-net-mvc-ebook-tutorial.aspx)![汉塞尔书](https://www.hanselman.com/blog/content/binary/WindowsLiveWriter/517ae5ab1250_1BF9/image_3.png)页。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T03:40:01.147

Checkout the sample project [NerdDinner](http://nerddinner.codeplex.com/) by Microsoft dev's - Phil Haack, Hanselman and ScottGu.

[Here's the free](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf) CC licensed Ebook

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-24T09:38:04.453

查看 Rob Connery 制作的店面示例应用程序。您可以关注他博客上的截屏视频并从 CodePlex 下载源代码。在他的博客上，您可以观看一系列截屏视频，并观看 Rob 从地面构建一个真实世界的在线购物网站。他探讨了与 MVC 相关的现实世界问题，并试图坚持最佳实践。我发现代码和截屏视频是一个非凡的灵感来源（不仅适用于 MVC）。

[http://blog.wekeroad.com/mvc-storefront/](http://blog.wekeroad.com/mvc-storefront/)

# ios - 推送 UIView 时隐藏 UITabBar

> ID：675887
> 
> 赞同：34
> 
> 时间：2009-03-24T01:42:18.140
> 
> 标签：ios, objective-c, swift, uitabbarcontroller, uinavigationbar

我有一个`UITabBarController`默认视图控制器是`UINavigationController`. 当我在`UINavigationController`.

我试过添加：

```
delegate.tabBarController.hidesBottomBarWhenPushed = YES; 
```

在`UINavigationController`我推动观点之前，但这似乎并没有奏效。

关于我应该做什么或者是否有可能的任何提示？提前致谢！

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2009-11-09T17:08:57.453

这个更好：

```
viewController.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:viewController animated:YES]; 
```

您必须在要推入视图的控制器上设置 hidesBottomBarWhenPushed = YES ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-28T22:28:51.353

使用情节提要时，它易于设置视图控制器，它将在推送时隐藏标签栏，在目标视图控制器上只需选中此复选框：
![在此处输入图像描述](https://i.stack.imgur.com/NPxtJ.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-12-13T10:53:35.207

我已经弄清楚如何解决这个问题，我遇到了同样的问题，但 Apple 还在名为“The Elements”的示例中告诉我们如何做到这一点（[http://developer.apple.com/library/ ios/#samplecode/TheElements/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/TheElements/Introduction/Intro.html) )

请参阅下面的函数以了解如何执行此操作，将其**添加到要推送的视图的 init 函数中！**

```
-(id) init { 
    if(self = [super init]) { 
        self.hidesBottomBarWhenPushed = YES; 
    } 
    return self; 
} 
```

它会自动隐藏标签栏，就像你 iPhone 上的照片应用一样。当您返回时，父视图将再次显示标签栏。

祝你好运

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-01-07T18:49:33.323

我已经尝试了大多数建议的解决方案。最后，他们都没有为我工作。

hideTabBarWhenPushed 不仅为下一个推送的视图控制器隐藏标签栏，还为所有推送的视图控制器隐藏标签栏。对于那些我确实希望标签栏控制器重新出现的人。

Orafaelreis 的解决方案（见上文）似乎最适合。但他的尝试只适用于严格的纵向，甚至不适用于倒置。所以我不得不修补它。这是我最终得到的：

```
#define kTabBarHeight               49 // This may be different on retina screens. Frankly, I have not yet tried.

- (void) hideTabBar:(BOOL)hide {

    // fetch the app delegate
    AppDelegate         *delegate   = [[UIApplication sharedApplication] delegate];

    // get the device coordinates
    CGRect              bounds      = [UIScreen mainScreen].bounds;
    float               width;
    float               height;

    // Apparently the tab bar controller's view works with device coordinates  
    // and not with normal view/sub view coordinates
    // Therefore the following statement works for all orientations. 
    width                   = bounds.size.width;
    height                  = bounds.size.height;

    if (hide) {

        // The tab bar should be hidden too. 
        // Otherwise it may flickr up a moment upon rotation or 
        // upon return from detail view controllers. 
        [self.tabBarController.tabBar setHidden:YES];

        // Hiding alone is not sufficient. Hiding alone would leave us with an unusable black
        // bar on the bottom of the size of the tab bar. 
        // We need to enlarge the tab bar controller's view by the height of the tab bar. 
        // Doing so the tab bar, although hidden, appears just beneath the screen. 
        // As the tab bar controller's view works in device coordinations, we need to enlarge 
        // it by the tab bar height in the appropriate direction (height in portrait and width in landscape)
        // and in reverse/upside down orientation we need to shift the area's origin beyond zero. 
        switch (delegate.tabBarController.interfaceOrientation) {
            case UIInterfaceOrientationPortrait:
                // Easy going. Just add the space on the bottom.
                [self.tabBarController.view setFrame:CGRectMake(0,0,width,height+kTabBarHeight)];
                break;

            case UIInterfaceOrientationPortraitUpsideDown:
                // The bottom is now up! Add the appropriate space and shift the rect's origin to y = -49
                [self.tabBarController.view setFrame:CGRectMake(0,-kTabBarHeight,width,height+kTabBarHeight)];
                break;

            case UIInterfaceOrientationLandscapeLeft:
                // Same as Portrait but add the space to the with but the height
                [self.tabBarController.view setFrame:CGRectMake(0,0,width+kTabBarHeight,height)];
                break;

            case UIInterfaceOrientationLandscapeRight:
                // Similar to Upside Down: Add the space and shift the rect. Just use x and with this time
                [self.tabBarController.view setFrame:CGRectMake(0-kTabBarHeight,0,width+kTabBarHeight,height)];
                break;

            default:
                break;
        }
    } else {
        // reset everything to its original state. 
        [self.tabBarController.view setFrame:CGRectMake(0,0,width,height)];
        [self.tabBarController.tabBar setHidden:NO];
    }

    return; 
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{

    // It is important to call this method at all and to call it here and not in willRotateToInterfaceOrientation
    // Otherwise the tab bar will re-appear. 
    [self hideTabBar:YES];

    // You may want to re-arrange any other views according to the new orientation
    // You could, of course, utilize willRotateToInterfaceOrientation instead for your subViews. 
}

- (void)viewWillAppear: (BOOL)animated { 

    // In my app I want to hide the status bar and navigation bar too. 
    // You may not want to do that. If so then skip the next two lines. 
    self.navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;
    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];

    [self hideTabBar: YES];

    // You may want to re-arrange your subviews here. 
    // Orientation may have changed while detail view controllers were visible. 
    // This method is called upon return from pushed and pulled view controllers.   

    return;
}

- (void)viewWillDisappear: (BOOL)animated {     

    // This method is called while this view controller is pulled
    // or when a sub view controller is pushed and becomes visible
    // Therefore the original settings for the tab bar, navigation bar and status bar need to be re-instated

    [self hideTabBar:NO];

    // If you did not change the appearance of the navigation and status bar in viewWillAppear,
    // then you can skip the next two statements too. 
    self.navigationController.navigationBar.barStyle = UIBarStyleBlack;
    [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];

    return;
} 
```

内嵌注释应解释每个语句的推理。不过，可能有更聪明的编码方式。

隐藏状态栏和导航栏也有一个副作用，我不想对你们隐藏。1\. 当从这个导航控制器返回到调用导航控制器时，调用控制器上的状态栏和导航栏会重叠，直到设备旋转一次或直到另一个选项卡出现后再次选择相关选项卡。2\. 当调用视图控制器是一个表格视图并且当设备在返回表格时处于横向模式时，表格以适合横向的方向显示，但它的布局就像它是纵向的一样。左上角很好，但一些表格单元格和标签栏隐藏在屏幕下方。右侧有一些空闲空间。这也可以通过再次旋转设备来解决。

一旦找到解决这些小但令人讨厌的错误的方法，我会及时通知您。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-02-02T19:46:54.920

以下是如何让它发挥作用：

在`Application Delegate`您创建`UITabBarController`. 然后在特定选项卡中创建一个`UINavigationController`具有根控制器的视图控制器作为您想要的视图控制器。然后将其插入`UINavigationController`到“ *viewControllers* ”数组中`UITabBarController`。像这样：

```
ViewControllerForTab1 *tab1Controller = [[ViewControllerForTab1 alloc] initWithNibName:@"ViewControllerForTab1"];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:tab1Controller];

[tab1Controller release];

UITabBarController *tabBarController = [[UITabBarController alloc] init];
tabBarController.viewControllers = [NSArray arrayWithObjects: navController, nil];

[navController release];

[self.window addSubView:tabBarController.view]; 
```

这样，您可以在其中的任何视图控制器中将“ `hidesBottomBarWhenPushed`”属性设置为“” ，它将隐藏.`YES``UINavigationController``UITabBar`

希望有帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-12-02T17:03:07.910

我将在这里给出我的解决方案：

```
#define FRAME_HIDDEN CGRectMake(0, 0, 768, 1073) //1073 = 1024 (screen) + 49 (UITabBar) 
#define FRAME_APPEAR CGRectMake(0, 0, 768,1024)

-(void) setHidden: (BOOL) hidden{
    CGRect frame = (hidden)? FRAME_HIDDEN : FRAME_APPEAR;
    [self.tabBarController.view setFrame:frame];
    [self.tabBarController.tabBar setHidden:hidden];
} 
```

在需要的地方调用“setHidden”方法！我使用这个和“单例模式”，然后我的子视图可以在他的 Superview 中隐藏 UITabBar

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-24T03:57:48.377

事实证明，如果您设置视图`hidesBottomBarWhenPushed:YES`，它会在视图出现时隐藏栏（对我来说是这样）。我将它分配给`UITabBarController`，当您考虑它时，这并没有多大意义。

```
[self.view hidesBottomBarWhenPushed:YES];
[super pushViewController:viewController animated:animated]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-24T19:56:51.443

在第一个 UIViewController`FirstItemViewController`

```
@IBAction func pushToControllerAction(sender: AnyObject) {
  self.hidesBottomBarWhenPushed = true
  self.performSegueWithIdentifier("nextController", sender: self)
} 
```

在接下来的 UIViewController`ExampleViewController`

```
override func willMoveToParentViewController(parent: UIViewController?) {
  if parent == nil {
    var viewControllers = self.navigationController!.viewControllers
    if ((viewControllers[viewControllers.count - 2]).isKindOfClass(FirstItemViewController.self)) {
      (viewControllers[viewControllers.count - 2] as! FirstItemViewController).hidesBottomBarWhenPushed = false
    }
  }
} 
```

看看这个答案[https://stackoverflow.com/a/36148064/3078925](https://stackoverflow.com/a/36148064/3078925)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-13T17:13:58.263

`hidesBottomBarWhenPushed`在要隐藏的控制器中使用。

隐藏所有控制器放入`prepare for segue`

```
override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    segue.destination.hidesBottomBarWhenPushed = true
} 
```

# ruby - 高级语言中是否使用数据结构？

> ID：675892
> 
> 赞同：5
> 
> 时间：2009-03-24T01:43:30.117
> 
> 标签：ruby, data-structures

我目前还在上学，正在学习用 C++ 实现数据结构的课程。在业余时间，我喜欢用“高级”语言（主要是 Ruby 和一些 c#）进行编程。

因此，既然这些高级语言会为您管理内存，那么您将使用数据结构来做什么？我可以理解对队列和堆栈的需求，但是您是否需要在 Ruby 中使用二叉树？还是 2-3-4 树？为什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-24T01:48:03.490

> 因此，既然这些高级语言会为您管理内存，那么您将使用数据结构来做什么？

使用数据结构的主要原因不是垃圾收集。但它是以某种方式有效的方式存储数据。所以最重要的是你如何组织数据。这正是语言无法自动为您解决的问题。

当然，高级语言会附带几个预加载的数据结构（**当提供这些预加载的数据结构时，您应该 100% 使用它们，而不是自己制作**），但并非提供您可能需要的所有数据结构。

数据结构以某种方式组织内存的存储，以便可以实现在其上运行的算法以提供有效的结果。

对于大多数任务，您不需要实现自己的数据结构。但这完全取决于您编码的内容。

> 我可以理解对队列和堆栈的需求，但是您是否需要在 Ruby 中使用二叉树？

有很多使用二叉树的示例，但在日常项目中并不常见，例如您可能需要实现霍夫曼编码。

[其他数据结构](http://en.wikipedia.org/wiki/List_of_data_structures)可用于节省空间和使用 trie 进行快速查找，或者您可能需要使用 btree 快速查找存储大量数据。几种数据结构具有特定用途，并针对不同的事物进行了优化。该语言是否现代以及是否具有垃圾收集功能都不会改变这一点。

不过，趋势是自定义实现的数据结构编码更少，考虑更少。常见的算法也会发生类似的争论。在更现代的语言中，如 LINQ，您只需指定排序即可。你实际上并没有说如何排序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-24T01:50:07.947

根据我使用 Python（表面上类似于 Ruby）的经验，我从来不需要*实现*二叉树或哈希图或类似的东西。但原因与托管内存关系不大。标准库中有最有用的结构的实现，例如字典（哈希图）和列表；为了速度和效率，它们（至少部分地）以解释器所用的任何低级语言实现，它们几乎肯定会胜过您可能想出的任何自定义实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T01:48:07.360

一句话，是的。

尽管 GC 会简化您的工作，但在许多情况下，适当组织数据的能力会让您编写更有效（或性能更高）的程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-24T01:48:50.680

如果您希望能够有效地在已排序的集合中找到某些内容，您将使用二叉树，就像在任何其他语言中一样。数据结构的选择在任何语言中都很重要。它在高级语言中并没有变得不那么重要，除非高级语言提供了包含深思熟虑的智能设计的大型库来为您处理这个问题，在这种情况下，您不必自己设计数据结构，但是您必须知道要使用哪种内置数据结构。

Java Collections 框架是广泛而美妙的，但是如果你使用了错误的（不合适的）Collections 对象，你的程序的性能将会受到影响。

此外，某些数据结构比其他数据结构更节省空间。是的，内存很便宜，现代 GC 语言将为您管理内存，但如果您正在处理大量数据，那么数据结构将很重要，如果您可以使内存效率更高。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-24T02:52:28.687

### 大多数时候

你使用它们，但你*不需要*实现它们；它们是为您实施的。

例如，字典通常可以在内部实现为哈希图和二叉树的组合。该列表可以实现为链表等。

### 但有时候

您可能想要实现一个数据结构，例如，如果您要存储*大量*数据（例如，数百万行文本）。我自己还没有遇到需要做这样的事情的情况，但考虑过可能需要它的项目。（例如，有效地打开和编辑一个巨大的文本文件等）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-24T02:10:59.020

我使用 Ruby 进行专业编程，我发现全面了解数据结构非常有帮助，尽管我从未在校外实现具有任何特定性能特征的树（尽管我必须实现类似树的结构。）

当您必须跨多台机器进行扩展或在不同的服务之间进行协调时，由于语言为您提供它们而在微型数组上实现时似乎无关紧要的相同数据结构往往会在“企业”中重新出现。在编写这些内容时了解您可以使用哪些选项是一个有用的工具，可以放在您的口袋里。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-24T02:46:35.723

您可以使用这些数据结构来解决与其他语言完全相同的问题。不同之处仅在于现代语言。他们的标准库通常已经为他们提供了非常有效的实现。尽管如此，您仍然必须了解它们才能使用它们。“更高层次”并不意味着真正的魔法。

# plugins - 您可以使用 Microsoft Outlook 插件做什么

> ID：675893
> 
> 赞同：0
> 
> 时间：2009-03-24T01:43:51.303
> 
> 标签：plugins, outlook, add-in

我没有为 MS Office 开发插件的经验。谁能告诉我 MS Outlook 插件 API 可以做什么。我感兴趣的具体事情是改变 Outlook 显示电子邮件的方式。例如：

我可以制作一个插件来显示电子邮件对话线程并为每个备用 RE: 消息涂上不同的颜色吗？

我可以更改用于显示电子邮件的渲染引擎吗？

我可以在获取时解析电子邮件，更改它们并将更改后的版本保存在服务器和本地计算机上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-08T16:49:00.853

您可以创建一个表单区域并隐藏默认阅读窗格 - 类似于此处解释的内容：[1](https://stackoverflow.com/questions/834424/is-there-a-way-to-replace-the-reading-pane-with-a-vsto-customtaskbar-in-outlook-2 "相关展望问题")

您可以制作自定义窗口控件并将它们嵌入到您的窗体区域中，使用普通的 C# 或 VB 为它们着色。

您可以使用 Outlook 对象模型解析电子邮件和电子邮件属性并使用正确的权限设置保存它们。

# pdf - 如何基于模板动态创建高分辨率pdf

> ID：675897
> 
> 赞同：2
> 
> 时间：2009-03-24T01:48:06.237
> 
> 标签：pdf, pdf-generation

试图找出创建 PDF 格式的模板小册子的最佳方式。如果存在具有文本区域和图像区域的模板，则该模板已经定义，然后在发布时获取用户值，并将它们插入区域并以高分辨率或低分辨率发布。这只是 InDesign 服务器实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T01:54:38.857

[Prince XML](http://www.princexml.com)可以从 HTML+CSS 模板构建 PDF，这不是唯一的，但对我来说，Prince 的不同之处在于输出的稳健性和质量。一方面，他们支持 CSS 2.1 选择器（和一些 CSS3 选择器），并且他们的渲染引擎已经通过了 Acid2 测试。它是商业的，并不便宜，但却是一个非常有能力的产品。IIRC 我认为谷歌甚至将它用于某些事情（虽然不是 100% 肯定）。

它具有多种语言（PHP、Java、.Net 等）的接口。

# windows - 将应用程序部署到无人值守服务器的公认做法是什么？

> ID：675904
> 
> 赞同：2
> 
> 时间：2009-03-24T01:54:35.677
> 
> 标签：windows

我正在将我的应用程序部署到一个 Windows 机器上，它将住在一个偏远的地方，周围没有人，谁是计算机知识。可以通过 Internet 通过 LogMeIn 应用程序访问该框。所以公平地说，没有人会长时间物理接触服务器。

并且应用程序必须 24/7 全天候运行，并且不能关闭。

关于处理 Windows 更新等的公认做法是什么？我是否让 Windows 更新自动完成它的工作？理想情况下，我会关闭 Windows 更新，但该框是可访问的，因此拥有最新补丁可能是谨慎的做法。有人对这种情况有任何经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T02:05:26.600

好吧，我想我最初误解了这一点。保持自动更新运行，服务器可能会随着时间的推移而腐烂并变得无响应。鉴于您的 24X7 要求，谨慎的做法是安装每隔几分钟访问您的应用程序的监视器以获取一些报告状态。不幸的是，滚动更新运行 Windows 应用程序需要多次重启。最佳做法是为您的程序进行静默安装。另外考虑一种方法来保持安装应用程序的并行版本，这样安装新版本就不会遇到锁定的文件。我个人会关闭自动更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T02:17:23.453

确保机器在 BIOS 中设置为在电源故障的情况下开机。这也可能是值得的。您可能还想研究启用 IP 的电源系统（例如[www.synaccess-net.com](http://www.synaccess-net.com/?gclid=CMLE48O-upkCFQENDQodlg4Jug) ...我从未使用过该产品）。这样，您可以在必要时重新启动机器，而无需让任何人参与到远端。

如果盒子被很好地锁定并在防火墙后面，那么我认为你可以在关闭 Windows 更新的情况下运行。这将避免由于周二晚上的“计划外”中断。如果您认为需要更新，请务必应用它。对于每天都在积极使用的盒子，我不建议这样做，但在这种限制情况下，可以权衡不更新的风险与盒子看到的有限使用以及对高可用性/低攻击足迹的需求。

为了增加安全性，请不要使用 Internet Explorer，而是使用修补良好的替代方案（您可以安装它而无需重新启动系统）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T02:20:04.773

我将我的 Windows 服务器置于非常严格的防火墙之后，并关闭了自动 Windows 更新。每隔几个月（或可能更长），我会安排一个维护窗口来应用最新的 Windows 更新。实际上并没有任何诸如 24x7 Windows 服务器之类的东西，因为您将不得不对其进行修补，最终将需要重新启动。

您当然可以拥有基于 Windows 服务器的 24x7 服务，但您需要第二台服务器来接管该服务，同时修补主要服务器。

# shell - 您如何处理环境变量？

> ID：675908
> 
> 赞同：1
> 
> 时间：2009-03-24T01:55:52.163
> 
> 标签：shell, environment-variables

当我执行环境命令（例如`env`、`set`和`unset`）时，会发生一些事情，但是会发生什么？

```
set hello='hello world!'
unset find 
```

你用命令做什么？这些变化是永久性的还是暂时的？在哪里可以看到变化？我是一个 Ubuntu 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T02:04:59.723

这些变化是暂时的。它们只存在于当前的 shell 中。当您在`~/.profile`or中设置环境变量时`~/.bash_profile`（只需使用已经存在的环境变量，`ls -a ~`用于查看），它们将有效地永久存在，因为每次打开新 shell 时这些文件都是“来源”的。

例如，如果您添加：

```
export HELLO="world" 
```

对您`~/.profile`而言，每次打开新 shell 时，该变量都会变为可用（您可以使用 刷新当前 shell `source ~/.profile`）。您可以使用以下方法对其进行测试：

```
$ echo $HELLO
world 
```

环境变量用于整个系统的脚本。你可以做一些事情，比如设置你最喜欢的编辑器，例如：

```
export EDITOR="nano" 
```

您可以做的一件有用的事情是设置提示字符串，例如：

```
Bill:~$ export PS1="\u is awesome$ "
Bill is awesome$ ls
Bill is awesome$ du -h
Bill is awesome$ ...etc... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T02:12:50.140

创建的每个进程都有自己的环境，该环境与进程一样长。您的 shell 就像任何其他进程一样。它的环境是它自己的。

如果您键入不带参数的“set”，您将看到存在的内容。其中许多设置用于控制程序行为。您的搜索路径、所需的 X11 显示、主目录（如果不是 /home/yourname）等。

用途实际上是您需要的任何东西。每当您需要将一些有用的信息（例如某些程序的命令行选项的长列表）存储到其他应用程序可以读取的变量中，或者您可以从 shell 访问时，请使用环境。

例如：

```
USUAL_CONFIGURE_OPTS="--prefix=/home/charlie --sysconfdir=/home/charlie/tmp-etc"
./configure $USUAL_CONFIGURE_OPTS --and-additional-arguments 
```

**编辑：**

作为一名程序员，我阅读环境来确定用户的偏好并服从他们。例如，如果设置了变量 POSIXLY_CORRECT，它会影响我的程序的输出。环境是用户告诉程序如何表现的地方。它也发生了，正如我上面所描述的，环境是用户存储有用位的一个方便的地方。

再次（响应您的评论），执行的每个程序都是一个过程。一个进程拥有自己的地址空间（自己的内存），其环境存储在该空间中。这意味着，环境是特定于该过程的，并且仅与过程本身一样长。

**编辑2：**

我想我现在完全理解你的问题了。如果有人说“虚拟环境”，他们只是注意到环境驻留在应用程序的地址空间中，该地址空间被内核映射为虚拟内存（有些页面可能在物理内存中，有些可能在交换中，共享动态对象， ETC）。

除非进程显式创建到该特定区域的映射并与另一个进程共享，否则任何进程都无法访问另一个进程。同样，一个进程的地址空间是完全私有的并且与其他进程隔离。环境变量存在于该地址空间中，否则进程无法访问或操作它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T02:30:08.290

与参数列表一样，为存储环境变量的进程分配了一段内存。我相信它是一个`\0`单独的、未排序的 KEY=VALUE 对列表。

这部分内存会被复制`fork()`并不会被擦除，`exec()`因此任何更改都会被复制到子进程中。

Unix shell 在使用之前不会将变量写入此环境变量内存`export`。这就是shell变量和环境变量的区别。

在 bash shell 中，`"x=2"`不设置环境变量。 `"export x=2"`或者`"x=2; export x"`确实。

# php - 在 PHP 中循环遍历所有服务器的会话

> ID：675913
> 
> 赞同：50
> 
> 时间：2009-03-24T01:59:40.750
> 
> 标签：php, session

PHP中有没有办法获取服务器上所有会话（以及每个会话中的变量）的列表？

基本上，我们有一个维护功能，需要知道哪些用户当前登录了站点。我们已经将每个用户的数据存储在会话变量中，但我希望我可以遍历每个会话并提取出我需要的数据。

我的 PHP 非常有限（我通常是 .Net 开发人员），但如果有人知道这是否可能（以及如何做），我将不胜感激。我用谷歌搜索了这个，我发现的结果往往表明这是不可能的，但我觉得这很难接受。

尽管如此，如果你不能，但我认为我在 StackOverflow 上的朋友可以给我一个明确的答案！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-03-24T02:13:27.877

PHP 将每个用户的会话数据存储在服务器上的一个临时文件夹中。该文件夹在 php.ini 配置文件中的变量 session.save_path 下定义。从您的 php.ini 文件中找到此值，或者创建一个 php 文件：

```
<?php echo "Session Save Path: " . ini_get( 'session.save_path');?> 
```

作为它的内容，然后在浏览器中打开文件。

找到会话数据的保存路径后，打开该文件夹，您会发现一个相当简单的结构。所有会话都以以下格式存储： sess_$SESSIONID 。

会话数据在存储到磁盘之前被序列化。因此，存储在会话文件中的对象必须在可用之前进行反序列化。但是，如果您使用按原样存储的纯文本来存储会话数据（例如`$_SESSION['userid'] = 1234`）来存储有关用户的信息，那么从内部解析出您要查找的数据应该很容易文件。

还有一件事……我还没有研究过，但文件名中显示的会话 ID 似乎直接对应于存储在用户计算机上的 PHPSESSID cookie 的名称。因此，考虑到这一点，可以遍历临时会话目录中的文件，获取所有 $SESSIONID 值，使用设置当前会话 ID `session_id($SESSIONID)`，使用 PHP 启动会话`session_start()`并访问您需要的数据，而无需解析内容文件本身。谁能确认这是否可能？

**编辑：**调整后的帖子以匹配 Itay 的评论。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-09-19T13:08:11.620

这将为您获取所有会话的数据，存储在数组中并由会话 ID 索引：

```
<?php
$allSessions = [];
$sessionNames = scandir(session_save_path());

foreach($sessionNames as $sessionName) {
    $sessionName = str_replace("sess_","",$sessionName);
    if(strpos($sessionName,".") === false) { //This skips temp files that aren't sessions
        session_id($sessionName);
        session_start();
        $allSessions[$sessionName] = $_SESSION;
        session_abort();
    }
}
print_r($allSessions); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-21T16:55:43.183

这是通过存储的文件获取会话列表的更简洁的方法：

```
<?php
print_r(scandir(session_save_path()));
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-18T08:38:12.570

我在ajax调用中使用了@mgroat方法，但是在HTTP响应的头部出现了Set-Cookie头部多次出现jQuery报错的问题：

> Set-Cookie 标头在来自 url:mysite.com/admin/ajax/main_ajax 的响应中被忽略。Cookie 长度应小于或等于 4096 个字符。

解决方案是`header_remove("Set-Cookie")`在`session_start()`.

# audio - 音频和视频文件压缩器

> ID：675921
> 
> 赞同：0
> 
> 时间：2009-03-24T02:06:11.187
> 
> 标签：audio, video-encoding

有谁知道一个很棒的音频和视频文件压缩器？

我目前正在使用 AVS 软件将 wmv 压缩为 3gp。

当我将文件压缩到 250kb 时，只有大约 2 分 30 秒的视频。

我想将声音和视频压缩得更小，以便为我的视频添加更多时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-24T02:11:57.850

[FFmpeg](http://www.ffmpeg.org/)可能是最好的选择。它具有广泛的格式、灵活性和编解码器支持。比较少。如果您需要 UI，还可以在其上构建各种桌面应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T02:12:58.457

如果您正在寻找一个应用程序[super (c) 非常擅长所有类型的视频压缩](http://www.erightsoft.com/SUPER.html)，但它有一个非常奇怪的 UI

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T02:49:58.240

[我是ffmpeg](http://ffmpeg.mplayerhq.hu/)的忠实粉丝。找出您的移动设备需要的编解码器和分辨率。如果幸运的话，将支持 H.264。如今，该编解码器似乎产生了出色的压缩效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-05T21:17:33.920

前几天我发现了一件疯狂的事。我使用 QuickTime 来 File->Export->iPhone 我的 250MB .avi 文件，并将文件输出到四个新的/不同的文件中。其中三个采用 .m4v 格式，大小从 62.3MB 到 6.8MB 不等。然而，第四个文件是一个只有 381 字节大小的 .mov 文件。你没看错。它将视频从 250MB 压缩到 381b 或 <1KB。如果我的数学对我有用，那比原始文件小 600K 多倍。

仅供参考。希望这可以帮助。

# c# - 整数验证

> ID：675926
> 
> 赞同：0
> 
> 时间：2009-03-24T02:10:07.540
> 
> 标签：c#, int

愚蠢的问题，但这种说法毫无价值

```
int a;

if (a != null) 
```

因为整数 var 在定义时会被编译器自动设置为 null

检查整数总是检查 a >= 0 是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T02:13:45.770

如果您不分配原始变量，编译器会将其值设置为其“默认”值。int 的默认值为 0。所以是的，你提到的比较并没有真正做任何事情。

如果您的代码中需要一个可为空的 int，您应该使用“可为空”类型“int?”。

如果您的 int 可以为空，那么您提到的比较可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T02:10:48.507

int 是一个类，不等于 null

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T02:15:36.170

是的，除非整数恰好是可为空的类型。

```
int? myInt = null;

if(myInt == null)
{
    Console.WriteLine("myInt was null.");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T02:15:57.123

假设您的标签和语法是 C#，您是否在特定场景中尝试过 int.TryParse(...) ？不确定您要从提供的代码中尝试做什么 - 正如安迪所提到的，如果您的 int 可以为空，则空检查可能很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T02:16:33.360

An`int`是一种值类型，并且永远不会是`null`，除非您将其声明为可为空的整数：

```
int? i = null;
if (i == null)
    Console.WriteLine("it's null"); 
```

# apache-flex - 需要在 AIR 上设置 cookie 标头，使用 SWFLoader 检索远程 Flex .swf 文件

> ID：675934
> 
> 赞同：0
> 
> 时间：2009-03-24T02:12:53.790
> 
> 标签：apache-flex, cookies, air, http-headers, swfloader

我正在编写一个 AIR 1.5 应用程序，我想在其中从 Web 服务器远程加载 Flex .swf 文件。

我正在使用 Flex 3.2 SDK 并尝试通过 SWFLoader 使用子应用程序功能。我一直在参考**开发和加载子应用程序**文档以了解如何执行此操作。

我确实可以从远程 Web 服务器成功加载 Flex .swf 文件，并将其加载到远程沙箱中。这个 .swf 文件的运行形式甚至尊重我在 AIR 本机窗口上设置的透明度设置。

这是摩擦：

对于生产环境，我们的 Web 服务器使用 Spring Security 来转移对登录网页的任何未经授权的访问（这也是正常开发/QA 构建部署的情况）。如果成功登录，则登录的响应会设置一个 cookie。此 cookie 标头应出现在所有后续的寻求从站点检索内容的 HTTP 交互中。

我不知道如何在使用 SWFLoader 检索 Flex .swf 文件时设置 cookie 标头。

如何使用 SWFLoader 从受 Spring Security 保护的网站检索文件（这是一种广泛使用的保护对基于 Java 的网站的访问的方法——在与 Spring Source 融合之前，它曾经被称为 Acegi 安全性）。

在浏览器 Flash Player 沙箱中运行我们的基于 Flex 的代码是一件轻而易举的事——Spring Security 的东西由浏览器管理。但是，尝试在 AIR 中将我们基于 Flex 的应用程序作为子应用程序运行在远程沙箱的安全范围内，这被证明是一种地狱般的体验。

AIR HTML 控件虽然与 Spring Security 配合得很好，但它是不行的，因为如果在 AIR 本机窗口上将透明度设置为 true，则加载的任何 .swf 或 .pdf 内容都不会显示。我们特定的 UI 设计绝对要求将透明度设置为 true，因为我们正在制作浮动在用户桌面上的 MDI 子窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-08T04:24:22.583

我解决了这个问题，方法是将 AIR HTML 控件的使用与 SwfLoader 结合使用，然后加载所需的远程 .swf 文件。

我在我的 AIR 应用程序加载到 HTML 实例中的 HTML 网页上编写了一个 JavaScript 函数（当页面完成事件触发时，从 AIR Flex 代码调用 JavaScript 函数是安全的 - Flex 代码当然可以处理HTML 完成事件）。

此 JavaScript 函数使用 XmlHttpRequest() 登录到使用 Spring Security 进行授权的网站。成功登录后会处理 Set-Cookie 标头。当 XmlHttpRequest() 的响应完成时，会在已放置在网页上的虚拟 DIV 对象上调度合成单击事件。AIR Flex 代码能够注册和处理这个合成点击事件。

处理完点击事件后，AIR Flex 代码就知道继续实例化 SwfLoader 实例是安全的。当来自 SwfLoader 对象的 complete 事件触发时，SwfLoader 的对象引用将放置在 AIR 应用程序显示列表中。

然后，用户会看到远程加载的 swf 文件开始执行并显示其自己的 UI。它在子应用程序远程沙箱上下文中运行。Flex SDK 3.2 通过 SwfLoader 控件支持子应用程序功能。

因此，AIR 应用程序正在管理由 HTML 控件建立的 cookie 标头。当 SwfLoader 控件用于加载远程 .swf 文件时，会在其 HTTP 请求中发出该 cookie 标头。Spring Security 过滤器看到这一点并发现请求来自经过身份验证的用户会话。

# html - 有人试过为psp设计网页吗？

> ID：675938
> 
> 赞同：2
> 
> 时间：2009-03-24T02:13:35.240
> 
> 标签：html, css, cross-browser, playstation-portable

我正在尝试为我的 psp 制作个人圣经

（我试过谷歌搜索，但我在略读时看到的唯一圣经版本是在 KJV 上，我试图让我的版本有 3 个版本，即 TNIV、NLT 和 Amplified Bible）

所以我唯一的解决方案是自己做，我的方法是在我的记忆棒上保存一个 html 文件并通过控制台的浏览器打开它

我的担忧是：

1.  psp浏览器如何处理css和javascript？
2.  是否有专门为 psp 浏览器设计的 doctype 声明？
3.  我可以使用任何本地数据库来存储我的文本以便于查询还是我别无选择只能依赖静态文本文件？
4.  SO中有没有人有为此控制台开发页面的经验，他/她能给我一些提示和建议吗？

非常感谢您的回复。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T02:25:12.887

1.  PSP 具有良好（但不是很好）的 CSS 支持和较弱的 Javascript 支持（与桌面浏览器相比）。
2.  最好坚持使用的 Doctype 是 XHTML Strict 1.0。
3.  除非你找到另一种方法来做到这一点。
4.  不适用于 PSP，但我建议这样做：让您的标记和 CSS 尽可能简单。不要设置字体大小或宽度，让 PSP 浏览器为您完成。如果您需要生成一堆静态文件，可能值得构建一个简短的脚本来为您完成。不要过于复杂。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-15T15:46:42.057

那么最好的方法是制作一个 HTML 文档文件来创建一个离线网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-25T00:52:24.083

关于我的担忧#1，我发现它仅作为 psp 浏览器在其最新版本中支持的所有脚本对象的参考。我不确定 SCE 是否会在未来添加对其他对象的更多支持

无论如何[，这是链接](http://slayeroffice.com/articles/psp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-02T15:34:43.573

要回答您的问题（不是您的问题），您是否考虑过使用[http://www.biblegateway.com/](http://www.biblegateway.com/)可以显示不同圣经翻译的经文 - 而不是编写代码来尝试做同样的事情？当然，这仅在您连接到 Internet 时才有效。

# java - Java 中连接 Microsoft Access 2007 数据库的正确方法是什么？

> ID：675952
> 
> 赞同：1
> 
> 时间：2009-03-24T02:22:29.197
> 
> 标签：java, jdbc, ms-access-2007

我正在尝试使用 jdbc-odbc 网桥创建一个简单的连接：

```
public static Connection  getConnection() {
    Connection con =null;
    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String conStr = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=" +
            "c:\\myfolder\\accesdbfile.accdb";
        con = DriverManager.getConnection(conStr);
    } catch(Exception e) {
        e.printStackTrace();}
    return con;
} 
```

但后来我得到了这个例外：

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver]General error Unable to open registry key Temporary (volatile) Ace DSN for process 0xa4 Thread 0xec0 DBC 0x2f8574c                                                              Jet'. 
```

有任何想法吗？

2009 年 3 月 24 日更新：现在它正在工作。创建了一个用户数据源，由于某种原因异常消失了。

作为一个普遍的问题，在 Java 中处理数据库连接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-24T03:28:20.707

通常，在 Java 中使用 RDBMS 的最佳方式是使用旨在直接连接到数据库的 JDBC 驱动程序。使用 JDBC-ODBC 桥往往很慢。

如果您尝试使用 Access 数据库进行基本的读/写操作，我还建议您查看[Jackcess](http://jackcess.sourceforge.net/)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-24T03:15:34.593

要回答您的一般问题，我想说在 Java 中处理数据库连接的最佳方法是避免使用 JDBC-ODBC 桥。它可以用于测试或学习 JDBC，但不适用于实际生产使用。此外，如果您的数据源没有自己的 JDBC 驱动程序但有 ODBC 驱动程序，那么您可能别无选择。

我建议您远离它的主要原因是它使您的应用程序难以部署。您必须在运行应用程序的机器上设置数据源。如果您可以访问机器没问题，但假设您将应用程序发送给客户端？纯 Java JDBC 驱动程序在这方面效果更好，因为它作为应用程序的一部分包含在内，因此一旦安装了应用程序，它就可以连接到数据源了。

当然，根据您的要求，还有其他两种类型的驱动程序，但那是另一个讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T20:11:23.440

1.  转到控制面板 --> 管理工具 --> ODBC 数据源管理器
2.  添加数据库 --> 选择“Microsoft Driver(*.mdb, *.accdb)”
3.  Dobule 单击新数据库 --> 在“数据库”下单击“选择” --> 选择您创建的 *.accdb 文件作为 MS 访问数据库。
4.  说好，然后转到你的 java 代码
5.  使用：Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); con = DriverManager.getConnection("jdbc:odbc:filename");

它一定会解决你所有的问题。

# c++ - 如何将整个 istream 打印到标准输出和字符串

> ID：675953
> 
> 赞同：19
> 
> 时间：2009-03-24T02:22:39.087
> 
> 标签：c++, stream

如何将 istream 变量打印到标准输出。[编辑] 我正在尝试调试一个需要将 istream 输出到日志文件的场景

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-24T13:03:35.863

您输出 istream 的 streambuf。

例如，要将 ifstream 输出到 cout：

```
std::ifstream f("whatever");
std::cout << f.rdbuf(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-24T02:24:54.230

*编辑：*我假设您要复制流的全部内容，而不仅仅是一个值。如果您只想阅读一个单词，请改为查看 1800 的答案。

* * *

显而易见的解决方案是一次复制一个单词的 while 循环，但您可以更简单地完成它，作为一个不错的 oneliner：

```
#include <iostream>
#include <iterator>

...

std::istream i;
std::copy(std::istream_iterator<char>(i), std::istream_iterator<char>(), std::ostream_iterator<char>(std::cout)); 
```

stream_iterator 在内部使用运算符 << 和 >>，这意味着它们将忽略空格。如果你想要一个精确的副本，你可以使用 std::istreambuf_iterator 和 std::ostreambuf_iterator 代替。它们在底层（未格式化）流缓冲区上工作，因此它们不会跳过空格或转换换行符或任何东西。

您还可以使用：

```
 i >> std::noskipws; 
```

以防止空白消失。但是请注意，如果您的流是二进制文件，则`>>`and`<<`运算符可能会破坏其他一些字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-24T02:24:49.567

这将打印整个流，一次 1 个字符：

```
char c;
c = my_istream.get();
while (my_istream)
{
    std::cout << c;
    c = my_istream.get();
} 
```

这将打印整个内容，但丢弃空格：

```
std::string output;
while(my_istream >> output)
    std::cout << output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T02:25:11.110

您需要从中读取，然后输出您读取的内容：

```
istream stm;
string str;
stm >> str;
cout << str; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-28T12:09:39.600

# std::ifsream 重载和 std::ostringstream

# c++11 或更高版本

* * *

注意`&&`在**std::ifstream**中允许你直接使用

```
#include <iostream>
#include <sstream>
#include <fstream>

std::ostream& operator<<(std::ostream& os, std::basic_ostringstream&& iss){
    return os<<iss.str();
}

std::ostream& operator<<(std::ostream& os, std::ifstream&& ifs){
    return std::cout<<ifs.rdbuf();
}

int main()
{
    std::cout<<std::ostringstream("Test ostringstream overloading")<<std::endl;
    std::ofstream("fstream.txt")<<"Test fstream overloading"<<std::endl;
    std::cout<<std::ifstream("fstream.txt")<<std::endl; // overloading okay
} 
```

输出：

> ```
> Test ostringstream overloading
> Test fstream overloading
> 
> Process returned 0 (0x0)   execution time : 0.012 s
> Press ENTER to continue. 
> ```

# nhibernate - NHibernate - 可以使用抽象基础来提供功能而不是接口吗？

> ID：675955
> 
> 赞同：1
> 
> 时间：2009-03-24T02:23:52.687
> 
> 标签：nhibernate, inheritance, interface

我对 NHibernate 相当陌生，并且在我的存储库类中遇到了一个奇怪的继承链接问题。我一直在使用[Gabriel Schenker 的常见问题解答](https://web.archive.org/web/20110227204838/http://blogs.hibernatingrhinos.com/nhibernate/Default.aspx)作为参考，并且按照他的示例，我一直在创建接口来为“存储库”类中的 DAO 操作定义契约。我正在使用的数据模式相当广泛，过了一会儿我发现自己复制了很多代码。具体来说，在我将通用“EntityType”参数添加到基本接口之后，Add、Update、Delete 和“GetByID”方法完全相同。因此，例如，这将是存储库操作的最基本接口：

```
public interface IBasicRepository<EntityType> where EntityType : class
{
    void Add(EntityType entity);
    void Remove(EntityType entity);
    void Update(EntityType entity);
    EntityType GetByID<IDType>(IDType id);
} 
```

为了简洁起见，从现在开始我将只讨论 Add 方法。使用通用 EntityType，实现都是一样的：

```
public void Add(EntityType entity)
{
    using (ISession session = NHUtility.OpenSession())
    {
         using (ITransaction transaction = session.BeginTransaction())
         {
             session.Save(entity);
             transaction.Commit();
         }
    }
} 
```

显然，重复输入相同的方法体（类型稍有变化）不仅令人讨厌，而且在我的书中也是糟糕的设计。所以我创建了一个抽象基类，我将调用 RepositoryBase，它提供了 Add() 的实现。由于我使用的是抽象而不是接口，因此我为从 RepositoryBase 继承的类“打破了接口链”，并且也被迫将任何派生抽象化，即使使用接口似乎更“正确”。使用这个糟糕的小实体示例......

```
public class Entity1
{
    public Guid ID { get; set; }
    public String Name { get; set; }
} 
```

......一个人不能这样做......

```
public interface IEntity1Repository : RepositoryBase<Entity1>
{
    //Illegal!!!!  Bad, naughty programmer!
} 
```

……不过这样就好了……

```
public abstract class Entity1RepositoryBase : RepositoryBase<Entity1>
{
    public abstract ICollection<Entity1> GetByName(string name);
} 
```

这只是困扰我。它可以工作，但它让我感到不适，特别是当这个特定模式的继承/实现链可能非常深入时。所以我想我的问题是：

1.  我只是对此感到愚蠢和固执己见吗？
2.  我应该在这里查看不同/更好的设计吗？我查看了其他一些示例（尤其是[Billy McCafferty 的](http://www.codeproject.com/KB/architecture/NHibernateBestPractices.aspx)），对于 NHibernate 新手来说，Schenker 的方法似乎最简单。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-24T12:34:41.067

一种选择可能是：

```
public interface IRepository<T> where T: class
{
    void Add(T entity);
    void Remove(T entity);
    void Update(T entity);
    T GetByID<IDType>(IDType id);
} 
```

使用实现该接口的基类。IE：

```
public abstract class RepositoryBase<T> : IRepository<T> where T: class
{
    ...
} 
```

如有必要，然后为每种类型的实体扩展：

```
public interface IProductRepository :  IRepository<Product>
{
    // Add extra methods
}

public class ProductRepository : RepositoryBase<Product>, IProductRepository 
{
    // Implement extra methods
} 
```

# java - 如何使用 Jersey 将依赖项注入资源？

> ID：675957
> 
> 赞同：2
> 
> 时间：2009-03-24T02:24:29.753
> 
> 标签：java, jersey

我最初对 Jersey 的看法表明这是一个很好的框架，可以轻松创建 RESTful Java API。

不幸的是，自从决定使用它（与 Grizzly 一起）以来，我发现它的文档记录非常差，因此很难执行常见的任务（我相信一旦你知道怎么做就很容易了）。

无论如何，抱怨（对不起，但我在这方面浪费了很多时间，我很沮丧），我的问题：

如何将对象注入资源？我知道我需要使用 Injectable 和相关类，但是在阅读了 Javadocs 之后，仍然不清楚如何做到这一点。

我的用例非常简单，我有资源需要访问的对象，我真的宁愿避免使用静态字段将对象公开给资源。很难想象有人在不这样做的情况下构建了 Jersey 应用程序，但我很难找出方法。

谁能指出一些简单的例子来说明如何做到这一点？

PS。我不想使用 Guice，这对我的需求来说似乎有点过分了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-24T18:32:07.430

我不确定您所说的“资源”是什么意思。

如果您在谈论 @Resource 注释，似乎您必须自己做[繁重](http://kingsfleet.blogspot.com/2009/02/resource-injection-with-jersey.html)的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-05T22:41:26.760

我最终放弃了泽西岛并切换（返回）到 Restlet。泽西岛的记录很差，而且令人费解:-(

# c# - 表单上无法识别子类文本框只读字体

> ID：675969
> 
> 赞同：0
> 
> 时间：2009-03-24T02:31:28.927
> 
> 标签：c#, winforms, fonts, class

为用户界面控件构建我的基类正在实现。我有通过自定义字体分配派生的命令按钮并放在表单上，​​一切都很好......但是，在同一表单上无法正确识别文本框的只读属性字体的相同代码。它仅采用 FORM 的设置并忽略其自己的 Font 声明。

```
public class MyTextbox : TextBox
{
    [ReadOnly(true)]
    public override Font Font
    { get { return new 
             Font( "Courier New", 12f, FontStyle.Regular, GraphicsUnit.Point ); 
          } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T19:24:28.833

Font 属性是环境属性。如果它从未被分配，它会自动匹配容器控件的 Font 属性。你从来没有分配它。

像这样做：

```
public class MyTextbox : TextBox {
    Font mFont;
    public MyTextbox() {
        base.Font = mFont = new Font("Courier New", 12f, FontStyle.Regular, GraphicsUnit.Point);
    }

    [ReadOnly(true)]
    public override Font Font {
        get { return mFont; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-25T00:22:58.320

在“nobugz”（谢谢）的帮助下，我在做 ComboBox 时也发现了同样的失败。我的结果如下...

我的吸气剂

```
get { return new Font( ... ); } 
```

但是，在 nobugz 响应中，编译器的某些内容不太正常，因此在类的构造函数中

```
clas MyTextbox...
{
   public MyTextbox()
   {
      // it defaults itself from its own read-only font "new" object instance and works
      base.Font = Font;
   }
} 
```

# linux - Linux：将 Windows 密钥映射到 Mx 以供 emacs 使用

> ID：675970
> 
> 赞同：6
> 
> 时间：2009-03-24T02:32:26.707
> 
> 标签：linux, emacs, windows-key

我是一名 emacs 用户（在 linux 笔记本电脑上），希望更好地使用我的键盘设置。我的键盘上没有使用 windows 键...有没有办法将它映射到 mx？这可能会使许多 emacs 命令更快。

谢谢，

SetJmp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-24T02:52:17.177

用于`xmodmap`使其成为`Menu`键，如

```
keycode 115 = Menu 
```

您将不得不使用`xev`来确定 Windows 键是否是键盘上的 115 键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T04:21:35.807

[只是为了提供更多信息，这里有一个链接，指向在X](http://linuxcommando.blogspot.com/2008/03/remap-useless-caps-lock-key-in-x.html)和[虚拟控制台](http://linuxcommando.blogspot.com/2008/03/remap-caps-lock-key-for-virtual-console.html)中重新映射 CapsLock 键的一系列快速步骤：

对于 Windows 键或您可能希望重新映射的任何其他内容，可以同样遵循这些步骤。

# database-design - 库存数据库设计

> ID：675973
> 
> 赞同：1
> 
> 时间：2009-03-24T02:35:19.930
> 
> 标签：database-design

我发现了几个库存数据库的例子。但我正在寻找一些不同的东西。我正在使用 SQL。

我需要跟踪工具。员工可以签出工具，该工具的库存将减少，并且该交易将记录在 (checked_out) 表中。易远。

当员工退回工具或工具时，员工可以选择。他可以将工具退回库存。还是比较容易的。或者他可以把坏了的工具带回来扔掉，换句话说，把它记录到垃圾桶里。或者他可以将工具放入重磨箱中，并将其记录到重磨台上。这就是我感到困惑的地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-24T02:42:20.087

听起来您需要库存表上的状态。例如，任意工具的记录可以具有作为“状态”表中的外键的状态字段。状态表可能如下所示：

```
ID     Description
-----------------------
1      Available
2      In Use
3      Broken 
```

... ETC。

您的库存表可能如下所示：

```
id     status_id     description
-------------------------------------
1       2            Hammer
2       1            Hammer
3       3            Hammer
4       1            Saw
5       3            Saw 
```

然后，当您计算库存时，仅显示工具状态为“1”的可用记录。您还可以运行管理查询以显示有多少工具“损坏”。一旦损坏的工具得到妥善处理，或将它们保留用于历史数据，计划最终删除这些记录。

不惜一切代价避免为数据库中任何实体的处置创建单独的表。使用“标志”字段（即 status_id），因此您可以向应用程序添加新状态，而无需无限添加新表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-24T02:43:16.823

你的设置是错误的，你不应该有一个单独的表来存放*垃圾*、*签出*和*重新锐化-bin*。这些仅仅是可以找到该工具的状态。

你想要的是一个包含这两个表的数据库，这些表将包含 HardCode 在[他的解决方案](https://stackoverflow.com/questions/675973/inventory-database-design/675985#675985)中提出的数据：

```
Inventory
-----
id (PK)
description
status_id (FK -> Statuses)

Statuses
----------
id (PK) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-24T12:16:03.903

我喜欢 HardCode 的模式，但它可能更接近于被建模以存储位置而不是状态的情况（无论如何，我不鼓励使用“状态”这个词，因为它太笼统以至于毫无意义） . 位置实际上是这里要跟踪的内容，甚至可以用来指示物品结账时谁是物品的当前持有者。我认为身体状况应该分开保存，如果要追踪的话。这将允许基于工具用户反馈或工作人员观察的更精细的条件等级。

（回应评论2）

我希望您有一个表格来记录工具的各个移动（在某个时间由人 Z 从位置 A 到位置 B），另一个记录更高级别的摘要或当前位置。很大程度上取决于工具是否由序列号单独标识，在这种情况下您将单独跟踪它们，或者它们是否只是许多相同工具中的一个，而不是单独标识。这将决定您是记录 5 次交易（每个工具一个）还是 5 种工具的 1 次交易。您可能只是总结为“已检出 5 个工具”，或者您可能会说“这些单独的工具当前位于这些位置”。

# data-compression - 视频和音频文件

> ID：675975
> 
> 赞同：0
> 
> 时间：2009-03-24T02:35:55.827
> 
> 标签：data-compression

**复制：** [音频和视频文件压缩器](https://stackoverflow.com/questions/675921/audio-and-video-file-compressor)

* * *

我想将 wmv 2mb 或更大的文件压缩为移动设备的 3gp 250kb 文件。

任何伟大的视频或音频压缩器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T02:48:30.803

[我是ffmpeg](http://ffmpeg.mplayerhq.hu/)的忠实粉丝。找出您的移动设备需要的编解码器和分辨率。如果幸运的话，将支持 H.264。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T03:09:23.233

You might have some trouble here. WMV is a container, not a codec, so we can't tell specifically the level of compression we're dealing with and what needs to be changed where, but it may be difficult to get such a dramatic reduction in filesize without making huge compromises, like decreasing the resolution of the video by several orders of magnitude. These compromises may be acceptable for mobile viewing, but there's no guarantee you'll be able to get that filesize down, especially if your file is encoded in a modern codec like H.264 or VC-1.

My first piece of advice is to attempt to locate a good wizard-like transcoder, with a nice non-developer interface on it, etc. Video compression is intense work, and the power tools behind it, and the tools that these wizard-like applications use to actually perform their work, are very complex and take lots of practice and tweaking to get right, and are usually restricted to commandlines. If your mobile device's vendor provides these utilities, for instance, you'll be much better off using them.

If you aren't able to locate such a utility, godspeed and spend lots of time with mencoder and ffmpeg's man pages and IRC rooms. It's not difficult per se, it just takes a lot of study and reading to get acceptable output, especially when you're going after the reductions you've mentioned. Good luck.

# c++ - MSVC++：无符号整数和溢出的奇怪之处

> ID：675976
> 
> 赞同：8
> 
> 时间：2009-03-24T02:35:59.693
> 
> 标签：c++, standards

我有以下代码：

```
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    string a = "a";
    for(unsigned int i=a.length()-1; i+1 >= 1; --i)
    {
        if(i >= a.length())
        {
            cerr << (signed int)i << "?" << endl;
            return 0;
        }
    }
} 
```

如果我在 MSVC 中进行完全优化编译，我得到的输出是“-1？”。如果我在调试模式下编译（没有优化），我没有输出（预期的。）

我认为标准保证无符号整数以可预测的方式溢出，因此当 i = (unsigned int)(-1), i+1 = 0 时，循环条件 i + 1 >= 1 失败。相反，测试以某种方式通过了。这是编译器错误，还是我在某处做了未定义的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-24T02:44:59.237

我记得在 2001 年遇到过这个问题。我很惊讶它仍然存在。是的，这是一个编译器错误。

优化师看到

```
i + 1 >= 1; 
```

从理论上讲，我们可以通过将所有常量放在同一侧来优化它：

```
i >= (1-1); 
```

因为*i*是无符号的，所以它总是大于或等于零。

[请在此处](http://groups.google.com/group/comp.lang.c++/browse_thread/thread/b1a20c37d5436bbf/729c5184d30299f7?q=%2B%22Andrew+Shepherd%22+%2B%22compiler+bug%22)查看此新闻组讨论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-24T02:52:47.610

ISO14882:2003，第 5 节，第 5 段：

> 如果在计算表达式期间，结果未在数学上定义或*不在其 type 的可表示值范围内*，则行为未定义，除非此类表达式是常量表达式 (5.19)，在这种情况下程序有病-形成。

（强调我的。）所以，是的，行为是未定义的。该标准不保证整数上溢/下溢情况下的行为。

编辑：该标准在其他地方的问题上似乎略有冲突。

第 3.9.1.4 节说：

> 声明为无符号的无符号整数应遵守算术模 2 n 的定律，其中 n 是该特定大小的整数的值表示中的位数。

但是第 4.7.2 和 .3 节说：

> 2) 如果目标类型是无符号的，则结果值是与源整数一致的最小无符号整数（模 2 n，其中 n 是用于表示无符号类型的位数）。[注意：在二进制补码表示中，这种转换是概念性的，位模式没有变化（如果没有截断）。]
> 
> 3) 如果目的类型是有符号的，如果能以目的类型（和位域宽度）表示，则值不变；*否则，该值是实现定义的。*

（强调我的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-24T02:50:47.070

我不确定，但我认为您可能遇到了错误。

我怀疑问题在于编译器如何处理`for`控件。我可以想象优化器在做什么：

```
for(unsigned int i=a.length()-1; i+1 >= 1; --i)   // As written

for (unsigned int i = a.length()-1; i >= 0; --i) // Noting 1 appears twice

for (unsigned int i = a.length()-1; ; --i)   // Because i >= 0 at all times 
```

这是否正在发生是另一回事，但这可能足以混淆优化器。

使用更标准的循环公式可能会更好：

```
for (unsigned i = a.length()-1; i-- > 0; ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T02:55:23.750

是的，我刚刚在 Visual Studio 2005 上对此进行了测试，它在 Debug 和 Release 中的行为肯定不同。我想知道2008年是否修复了它。

有趣的是，它抱怨您从 size_t（.length 的结果）到 unsigned int 的隐式转换，但生成错误代码没有问题。

# .net - 多个配置文件：进程从哪个文件读取？

> ID：675977
> 
> 赞同：1
> 
> 时间：2009-03-24T02:37:02.093
> 
> 标签：.net, web-config, app-config

我有一个包含多个项目的解决方案。在每个项目中，我添加了一个 .config 文件，其中包含影响本地设置的设置。

当我尝试读取数据库连接的设置时，我得到了一些我不知道它们来自哪里的值。

这是 DatabaseLayer 解决方案的 .config 文件：

```
<configuration>
<configSections>
</configSections>
<connectionStrings>
    <add name="localDBConnection"
        connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Niko\Documents\Visual Studio 2008\Projects\GaitLinkServer\DatabaseLayer\GaitLinkDB.mdf;Integrated Security=True;User Instance=True"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

当我执行该行时

```
private string connectionString = ConfigurationManager.ConnectionStrings["localDBConnection"].ToString(); 
```

我有空引用对象异常。所以我尝试执行以下命令：

```
ConfigurationManager.ConnectionStrings[0] 
```

它回来了

```
{data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true}
base {System.Configuration.ConfigurationElement}: {data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true}
ConnectionString: "data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
Name: "LocalSqlServer"
ProviderName: "System.Data.SqlClient" 
```

不知道从哪里来的。

如果有人能展示如何为具有多个项目的解决方案制作全局 .config 文件以及如何链接本地（项目）.config 文件，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T02:41:17.997

给定的 AppDomain（实际上不是进程）总是从单个文件中读取配置数据。默认情况下，对于桌面应用程序，这是*applicationname* .EXE.CONFIG，对于 asp.net 应用程序，它是 web.config。从未使用过 .DLL.CONFIG。您需要将此类文件中的任何设置复制到实际配置文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T03:15:38.600

请注意，如果您使用 ApplicationSettings，则属性会从属于该特定项目的任何 App.Config 文件中获取默认值。您可以在正在运行的应用程序中指定应用程序设置，这将覆盖默认值。

解释..

我有一个名为 CatalogData 的项目。使用项目属性屏幕/设置选项卡，我添加了一个名为 test 的属性，其值为 test。

应用程序配置文件包含

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration> 
```

...

```
<configSections>
    <sectionGroup name="userSettings" 
     type="System.Configuration.UserSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
    >
        <section name="CatalogModel.Properties.Settings"
         type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
         allowExeDefinition="MachineToLocalUser" requirePermission="false" />
    </sectionGroup>
</configSections>

<userSettings>
    <CatalogModel.Properties.Settings>
        <setting name="test" serializeAs="String">
            <value>test</value>
        </setting>
    </CatalogModel.Properties.Settings>
</userSettings> 
```

...

```
</configuration> 
```

为读取设置而生成的代码（通过 My.Settings.test 用于 VB.NET 或在 C# 中如下所示）

```
CatalogModel.Properties.Settings s = new CatalogModel.Properties.Settings();
string test = s.test; 
```

在生成的代码中获取默认值，这实际上使 app.config 文件不需要部署，只要编译的设置正常。

在此代码段中，您可以看到提供默认值的属性，该属性已编译。

```
...
    [global::System.Configuration.DefaultSettingValueAttribute("test")]

    public string test {
        get {
            return ((string)(this["test"]));
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T02:42:43.143

您的所有配置设置都需要放入可执行项目（您的控制台应用程序、网站等）的 app.config（或 web.config）中。

如果您将配置设置放在库 (DLL) 项目的 app.config 中，将找不到它们。您需要将所有设置复制到可执行文件的 .config 中。或者，您可以弄乱 DLL 项目 app.configs 的构建操作，然后尝试从可执行的 app.config 中引用这些操作。通常，将所有设置放在一个地方是最简单的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T03:30:13.387

到目前为止给出的答案中没有提到的一件事是，在 ASP.NET 或 WinForms 应用程序中运行的任何程序集都将通过 ConfigurationManager 识别应用程序的 web.config/app.config。因此，正如建议的那样，当您将配置信息放入应用程序的配置文件时，应用程序中使用的程序集可以读取这些值。您唯一需要做的（并记录为良好做法）是确保应用程序/Web 配置具有 .DLL 期望的命名元素。

例如，您在 WinForms 应用程序中有一个 .DLL，该应用程序希望托管 .DLL 的应用程序在名为“MyAppConn”的条目中有一个条目。您的 DLL 代码将使用：

```
Dim cs as String = ConfigurtionManager.ConnectionStrings("MyAppConn").ToString 
```

DLL 可用于许多不同的托管应用程序，只要在托管应用程序的 .config 文件中定义了 MyAppConn，DLL 就会获取连接字符串。如果需要，MyAppConn 可以指向每个托管应用程序中的不同数据库。

# hibernate - 如何过滤 JPA/JPQL 中的集合？

> ID：675979
> 
> 赞同：6
> 
> 时间：2009-03-24T02:37:41.500
> 
> 标签：hibernate, jpa, jpql

我有两个实体：

```
@Entity
public class Customer  implements java.io.Serializable {
...
    @OneToMany(fetch=FetchType.EAGER, mappedBy="customer")
    private Set<CustomerOrder> customerOrders;
...

@Entity
public class CustomerOrder  implements java.io.Serializable {
....        

    private double cost;

    @ManyToOne
    @JoinColumn(name="CUST_ID")
    public Customer customer;
... 
```

现在在我的 JPQL 中，我想返回那些 CustomerOrder.cost>1000 的客户。例如，有三个客户 A、B 和 C。A 有两个订单，成本分别为 1000 和 2000。B 有三个订单，成本分别为 2000,3000 和 500。C 有一个订单，成本=500。现在我想得到三个客户： A 只返回成本=2000 的订单；B返回2000和3000的订单；C 返回一个空的订单集合。

但以下将始终返回完整集合：

```
select c from Customer c, in(c.customerOrders) o where o.cost>1000 
```

我怎么能在 JPQL 或特别是在 Hibernate 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-24T04:23:49.297

发布的查询相当于

```
select c from Customer c inner join c.customerOrders o where o.cost > 1000 
```

它只返回至少有一个订单成本大于 1000 的所有客户。

我建议反向连接和选择订单 - 虽然它在语义上相同但在结构上与您想要的结果不同：

```
select o from CustomerOrder o where o.cost > 1000 
```

现在，Hibernate 具有称为 Filter 的非 JPA 功能，它应该完全满足您的需求 - 请参见此处： [http ://www.hibernate.org/hib_docs/reference/en/html/filters.html](http://www.hibernate.org/hib_docs/reference/en/html/filters.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:25:57.347

尝试这个

```
select c from Customer c join CustomerOrder o with o.cost > 1000 
```

如果他有两个成本> 1000的订单，它可能会返回两次客户，您可以为此分组

```
select c from Customer c join CustomerOrder o with o.cost > 1000
group by c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:52:57.880

听起来像一个坏主意（性能方面）在那里有 OneToMany 关系。

但是为什么这不起作用：`select o from CustomerOrder o where o.cost > 1000;`然后从结果列表中提取客户的？

# c++ - SDL/C++ OpenGL 程序，如何阻止 SDL 捕获 SIGINT

> ID：675980
> 
> 赞同：9
> 
> 时间：2009-03-24T02:37:54.433
> 
> 标签：c++, linux, signals, sdl

我正在将[SDL](http://www.libsdl.org/ "SDL")用于在 Linux 上运行的 OpenGL 应用程序。我的问题是 SDL 正在捕获 SIGINT 并忽略它。这很痛苦，因为我正在通过屏幕会话进行开发，并且无法使用 CTRL-C 终止正在运行的程序（计算机正在运行的程序连接到投影仪并且没有输入设备）。

有没有我可以传递给 SDL 的标志或其他东西，这样它就不会捕获 SIGINT？我真的只是希望程序在收到信号时停止（即当我按下 ctrl-c 时）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-13T15:48:30.530

控制台上的 Ctrl-C 生成 SDL_QUIT 事件。您可以使用 SDL_PollEvent 或 SDL_WaitEvent 监视此事件，并在检测到它时（干净地）退出。

请注意，其他操作可能会生成 SDL_QUIT 事件（例如，尝试通过窗口管理器关闭主窗口）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-24T03:12:01.417

我找到了答案：

SDL_INIT_NOPARACHUTE 标志将捕获致命信号，以便 SDL 可以自行清理。它适用于 SIGSEGV 之类的东西，但显然 SIGINT 还不够致命。

我的解决方案是在 SDL 初始化后将信号处理程序重置为 SIGINT：

```
SDL_Init(SDL_INIT_VIDEO | SDL_INIT_NOPARACHUTE);
signal(SIGINT, SIG_DFL); 
```

感谢缓存您的输入，它让我走上了正确的轨道。

迈克尔

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-24T02:49:33.377

将初始化标志传递`SDL_INIT_NOPARACHUTE`给 SDL_Init “防止 SDL 捕获致命信号”。

见：[http ://www.libsdl.org/cgi/docwiki.cgi/SDL_Init](http://www.libsdl.org/cgi/docwiki.cgi/SDL_Init)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-22T23:08:45.090

在 SDL_quit.c 中，检查提示以确定是否不应在`SDL_QuitInit()`. 当最初的问题被问到时，不确定这是否存在于旧版本中，但对于那些刚来这里的人来说可能很方便。

刚刚在我的 Windows 应用程序上进行了测试，我现在可以再次正确接收所有信号，使用：

```
SDL_SetHint(SDL_HINT_NO_SIGNAL_HANDLERS, "1");
SDL_Init(...); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T09:35:31.223

如果由于某种原因您实际上没有使用事件循环，则可以`SDL_QuitRequested`在“投票内容”循环中使用。

# visual-studio - VS 2008 SP1 是否支持 Silverlight 3 的属性编辑？

> ID：675982
> 
> 赞同：2
> 
> 时间：2009-03-24T02:41:06.033
> 
> 标签：visual-studio, visual-studio-2008, silverlight, expression-blend

我是 Silverlight 新手。刚刚在 Mix 发布后下载了 3.0 版本。我正在运行 VS 2008 SP1。当我在预览窗格或 XAML 中选择设计元素时，属性窗口被禁用并显示

> 属性编辑不可用

我可以在 Blend 中打开解决方案，并且它的属性编辑器没有问题。因此，在 Visual Studio 中，我不得不在 XAML 窗格中输入所有内容并依赖 Intellisense。

我的安装或环境有问题吗？或者我应该在 Expression Blend 和 Visual Studio 之间来回切换（我不敢相信应该是这种情况）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T10:19:25.743

您的安装或环境没有问题。VS2008 中的 XAML 设计器/编辑器在为 XAML 编辑提供的功能方面非常有限，无论 Silverlight 的版本如何，目前实际上只是一个渲染引擎。

Expression Blend 是目前首选的可视化编辑器 - 有可用的第 3 方编辑器（例如 XAMLCruncher 和 Kaxaml），但它们并不真正支持带有代码隐藏类的 XAML。

此外，为支持 SL3 而发布的 Blend 3 预览版似乎有一些改进，这些改进解决了以前在 Blend 中直接编辑 XAML 的较差体验（尤其是 IntelliSense）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T20:30:48.283

我在使用 Visual Studio 2010 和 Silverlight 5.0 时遇到了同样的问题。这是间歇性的。

我发现有帮助的一件事是切换 XAML 页面以显示设计视图，然后切换回代码视图，反之亦然。如果您有混合视图，请暂时切换。

我这样做了，而且效果很好。我不知道它起作用的原因，但它确实起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T02:44:19.627

> 我的安装或环境有问题吗？或者我应该在 Expression Blend 和 Visual Studio 之间来回切换（我不敢相信应该是这种情况）。

如果您想充分利用 UI 控件，您会发现需要为 Silverlight 和 WPF 做很多事情。

我发现 VS 在设计和呈现 XAML 方面非常缓慢和笨拙，并且更喜欢 Expression。在两者之间切换没什么大不了的，因为一个用于代码，一个用于设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-24T02:46:24.817

我还没有下载 Silverlight 3 Beta，但是 Visual Studio 中的 Silverlight 2 设计器集成很差。

VS 2010 应该对 WPF 和 Silverlight 中的 XAML 编辑有更好的支持。所以现在，你必须在 Blend 和 VS 之间找到合适的平衡点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T03:12:09.843

SilverLight 3.0 测试版刚刚发货。VS2008 SP1 去年发货。如果它开箱即用地支持 SilverLight 3.0，那将是令人惊讶的，如果 SilverLight 3.0 beta 附带的 VS 支持不是“beta”质量，那就更令人惊讶了。

如果您发现问题，请务必向 Microsoft 报告。

# eclipse - Qt Creator 如何与 Eclipse CDT 相抗衡？

> ID：675986
> 
> 赞同：17
> 
> 时间：2009-03-24T02:42:38.557
> 
> 标签：eclipse, qt-creator

[Qt Creator](http://en.wikipedia.org/wiki/Qt_Creator)看起来是一个不错的 IDE。我一直在使用[Eclipse CDT](http://en.wikipedia.org/wiki/Eclipse_%28software%29)，虽然有一点问题，但它确实可以完成这项工作。

Qt Creator 是否具有与 Eclipse CDT 相同的功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-24T03:00:30.947

Qt Creator 在底层使用了 MinGW，因此它能够在不使用任何 Qt 头文件的情况下进行编译才有意义。在制作项目时只需取消选中所有标题，您就可以像在任何其他 IDE 中一样进行编码。

我拍了一个例子给你看：

> [死链接](http://img13.imageshack.us/img13/7830/resize.png)

**编辑：啊，你编辑了你的问题。**

是的当然！Qt 是一个很棒的环境，并且可以肯定地与 C++ 中的 Eclipse 等竞争对手相抗衡。尽管请记住 Eclipse 满足了无数开发人员，从 Java 到 C++ 到 Python 等等。通常，专门针对一种语言的 IDE 会更适合该语言，但 Eclipse 确实可以通过其大量插件来满足多种语言的开发人员的需求。如果您对 Eclipse CDT 感到满意，我想您会对 Qt Creator 感到宾至如归，更好的是，被宠爱。

这么棒的软件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-12-17T11:22:08.877

好吧，QTCreator 正是 Linux C++/C 开发人员（我假设您是我所读到的 linux 开发人员）想要从 IDE 获得的东西。没有太多或太少的功能。像 Eclipse 这样功能丰富的 IDE 的问题是您可能会失去对项目的控制，因为它几乎可以处理所有事情。如果出现问题，您必须考虑在调试过程中使用的功能/插件。

但总的来说，eclipse 是（恕我直言）更好的选择，因为习惯一个几乎可以处理每种语言的 IDE 是有意义的。在工作中，我正是出于这个原因使用 eclipse CDT。对于私人项目，我使用 QTCreator，因为 C/C++ 是我用于这些项目的唯一语言。

我希望这有帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-01T13:02:24.727

由于您没有提及 Qt，我假设您计划将 QtCreator 用于非 Qt C++ 项目，并使用其自己的自定义 Makefile，而不是基于 qmake，而不是基于 Eclipse-CDT。

在我切换到 QtCreator（现在在同一个项目，相同的代码上工作）之后，我注意到 QtCreator 的以下优点：

*   对于相同的 C/C++ 项目，QtCreator 比 EclipseCDT 移动得更快。
*   EclipseCDT 更难使用自定义 Makefile 进行配置。QtCreator 更容易。当您使用自己的自定义 Makefile（而不是 IDE 生成的 Makefile）签出项目时就是这种情况，您需要将该项目的构建目标映射到 EclipseCDT 构建目标/配置。
*   在 QtCreator 中处理 .pro(ject) 文件比在 EclipseCDT 中的工作区更容易。
*   就我而言，索引后的 EclipseCDT 内存占用量约为 2GB。对于 QtCreator，对于同一个项目，它只有 ~600MB。
*   EclipseCDT 中的源索引需要很长时间 - 当我启动 EclipseCDT 时，我的计算机由于索引而冻结了大约 20 分钟。在 QtCreator 中，它需要四分之一的时间，并且计算机在此期间做出响应。

当然，EclipseCDT 提供了很多优点，例如过多的插件（EGit、Subclipse、cppcheclipse 等），但这取决于您是否真的使用它们。

最后，我认为这是个人品味和习惯的问题，因为您可以通过它们中的每一个来实现您的目标。******