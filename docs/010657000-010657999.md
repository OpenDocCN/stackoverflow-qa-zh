# StackOverflow 问答 10657000-10657999

# wpf - 一个 WPF xbaps 托管在两个指向同一个物理位置的 IIS 虚拟应用程序上。一个受信任，另一个不受信任。这怎么可能？

> ID：10657004
> 
> 赞同：0
> 
> 时间：2012-05-18T17:17:27.627
> 
> 标签：wpf, certificate, clickonce, xbap, full-trust

我一直在无缘无故地遇到“未授予信任”的问题。几年来，我多次多次部署我的应用程序。出乎意料的是，我遇到了一个奇怪的问题，我一直在使用相同的密钥，直到 3000 年才会过期，这给我带来了问题。或者是吗？是不是还有什么可责备的？与往常一样，密钥已安装在正确的证书存储中。

这是最奇怪的部分：我发布了应用程序，然后让两个 IIS 虚拟应用程序指向同一个物理位置。当我尝试查看它们时，一个人说信任没有被授予另一个人没有......它只是按预期工作。

所以最后，似乎关键不是问题，而是 IIS 的问题。这会敲响警钟吗？

我记得很久以前写这篇文章的同事最初不得不在一个 xml 文件中编辑一些机器密钥，但这并没有永远改变。罪魁祸首可能是什么？

对于详细日志中的错误，未授予的信任有此：

> 错误详情

```
Following errors were detected during this operation.
* [5/18/2012 1:15:40 PM] System.Deployment.Application.TrustNotGrantedException (Unknown subtype)
    - User has refused to grant required permissions to the application.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.ApplicationTrust.RequestTrust(SubscriptionState subState, Boolean isShellVisible, Boolean isUpdate, ActivationContext actCtx, TrustManagerContext tmc)
        at System.Deployment.Application.DeploymentManager.DetermineTrustCore(Boolean blocking, TrustParams tp)
        at System.Deployment.Application.DeploymentManager.DetermineTrust(TrustParams trustParams)
        at System.Deployment.Application.InPlaceHostingManager.AssertApplicationRequirements(Boolean grantApplicationTrust)
        at System.Deployment.Application.InPlaceHostingManager.AssertApplicationRequirements()
        at MS.Internal.AppModel.XappLauncherApp.AssertApplicationRequirementsAsync(Object unused)
* [5/18/2012 1:15:40 PM] System.Deployment.Application.DeploymentException (Unknown subtype)
    - The AssertApplicationRequirements method failed. The application cannot be committed.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.DeploymentManager.WaitForAssertApplicationRequirements()
        at System.Deployment.Application.DeploymentManager.SynchronizeCore(Boolean blocking)
        at System.Deployment.Application.DeploymentManager.SynchronizeAsyncWorker() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:29:42.933

我与 Microsoft 的 ClickOnce 人员讨论了这个问题。他认为这与机器密钥无关，与证书和签名有关。

为什么要创建两个 IIS 虚拟目录？你是说如果你在同一台机器上运行它，它在两个不同的 IIS 虚拟目录上的工作方式不同？发布应用时，安装 URL 是什么？两个虚拟目录上的域是否相同？

您正在运行并以 .NET 4 或 .NET 3.5 为目标？

您运行应用程序的计算机——它是一直在运行的同一台计算机，还是已更改？这可能与安装在用户计算机上的证书有关。

# python - 将域动态添加到 scrapy crawlspider deny_domains 列表

> ID：10657006
> 
> 赞同：1
> 
> 时间：2012-05-18T17:17:36.357
> 
> 标签：python, scrapy

我目前正在使用 scrapy 的 CrawlSpider 在多个 start_urls 列表中查找特定信息。一旦我找到了我要查找的信息，我想做的是停止抓取特定 start_url 的域，这样它就不会一直打到域，而只会打到其他 start_url。

有没有办法做到这一点？我试过像这样附加到deny_domains：

```
deniedDomains = []
...
rules = [Rule(SgmlLinkExtractor(..., deny_domains=(etc), ...)]
...
def parseURL(self, response):
    ...
    self.deniedDomains.append(specificDomain) 
```

附加似乎并没有停止爬行，但如果我用预期的 specificDomain 启动蜘蛛，那么它会按要求停止。所以我假设你不能在蜘蛛启动后更改 deny_domains 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:37:02.413

`dynamic_deny_domain`最好的方法是在你的 Spider 类中维护你自己的列表：

*   编写一个简单的[下载器中间件](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#topics-downloader-middleware)，
*   这是一个简单的类，只有一个方法实现：`process_request(request, spider):`
*   如果请求在您的列表中，则返回[IgnoreRequest](http://doc.scrapy.org/en/latest/topics/exceptions.html#scrapy.exceptions.IgnoreRequest) ，否则。`spider.dynamic_deny_domain``None`

然后将您的下载器MiddleWare添加到[scrapy设置中的中间件列表的](http://doc.scrapy.org/en/latest/topics/settings.html#std%3asetting-DOWNLOADER_MIDDLEWARES)第一个位置 `'myproject.downloadermiddleware.IgnoreDomainMiddleware': 50,`

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:41:20.827

唉？

```
from scrapy.contrib.spiders import CrawlSpider,Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class MySpider(CrawlSpider):
    name = "foo"
    allowed_domains = ["example.org"]
    start_urls = ["http://www.example.org/foo/",]

    rules = (
        Rule(SgmlLinkExtractor(
            allow=('/foo/[^/+]',),
            deny_domains=('example.com',)),
        callback='parseURL'),
        )

    def parseURL(self, response):

        # here the rest of your code 
```

# algorithm - Creating a Min heap or a Max heap

> ID：10657010
> 
> 赞同：2
> 
> 时间：2012-05-18T17:17:55.117
> 
> 标签：algorithm, time, heap, complexity-theory, time-complexity

> For creating a Min heap or a Max Heap of n elements, time taken would be O(nlogn) for creating a heap. Because, every insertion takes O(logn) time and hence n elements would take O(nlogn) time

But in many places it is written that the creation of a heap can be optimized to O(n) time i.e. a linear time?But it is not clearly explained how?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:15:29.830

The optimal method doesn't need logn time for inserting a node.

> The optimal method starts by arbitrarily putting the elements on a binary tree, respecting the shape property (as the tree could be represented by an array). Then starting from the lowest level and moving upwards, shift the root of each subtree downward as in the deletion algorithm until the heap property is restored. More specifically if all the subtrees starting at some height `h` (measured from the bottom) have already been "heapified", the trees at height `h+1` can be heapified by sending their root down along the path of maximum valued children when building a `max-heap`, or minimum valued children when building a `min-heap`. This process takes `O(h)` swap operations per node. In this method most of the heapification takes place in the lower levels. Since the height of the heap is `logn` , the number of nodes at height is `h`. Therefore, the cost of heapifying all subtrees is:
> 
> [h=0]∑<sup>logn n/2^(h+1) = O(n * [h=0]∑<sup>lognh/2^h ) which is less than
> 
> O(n * [h=0]∑<sup>∞</sup>h/2^h )
> 
> ```
> since h / 2h converges to 2 as it is an infinite series 
> ```
> 
> it is equal to `O(n)`

Source: [http://en.wikipedia.org/wiki/Binary_heap#Building_a_heap](http://en.wikipedia.org/wiki/Binary_heap#Building_a_heap)

# python - Is there a way to use multiprocessing with Python's Sphinx to make it faster?

> ID：10657016
> 
> 赞同：1
> 
> 时间：2012-05-18T17:18:28.860
> 
> 标签：python, python-sphinx

We're using Sphinx to generate several hundreds of HTML reports for our analysis reports daily. We're continuously making our process faster and Sphinx is quickly becoming the long pole. So...

1.  Is there a way to speed up the HTML generation by using multiprocessing?
2.  If not, can we generate any sub directories concurrently?

Has anyone looked into this before?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:49:08.293

Could sphinx-multiprocessing be the answer?

[https://bitbucket.org/DasIch/sphinx-multiprocessing](https://bitbucket.org/DasIch/sphinx-multiprocessing)

# mobile - 在移动应用上使用平衡 API 的最佳实践

> ID：10657017
> 
> 赞同：2
> 
> 时间：2012-05-18T17:18:40.487
> 
> 标签：mobile, payment-gateway, payment, balanced-payments

我正在为支付实现新的 Balanced API，并开始考虑将其放在我们的移动（本机）应用程序上。

我看到他们有[一个 javascript 库](https://www.balancedpayments.com/docs/js)，用于将信用卡信息直接发送到他们的服务器。我显然不希望支付信息通过我们的服务器 (PCI)，并且我不想在应用程序中包含我的 API 密钥/秘密。

那么在我们的移动应用程序上处理信用卡信息的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:51:09.447

**更新**

*   对于 IOS，请使用[balance-ios](https://github.com/balanced/balanced-ios)库
*   对于 Android，请使用[balance-android](https://github.com/balanced/balanced-android)库

* * *

由于您正在为智能手机编写代码，因此您应该能够直接对 Balanced 进行 RESTful API 调用以对卡进行标记，而无需使用 balance.js。

卡和银行账户端点不需要身份验证来标记这些资源，因此您无需担心在应用程序中包含任何 API 密钥。该文档解释了如何[标记卡](https://www.balancedpayments.com/docs/api#tokenize-a-credit-card)，但让我更详细地解释它：

**TL;博士**

直接从您的移动应用程序向与您的 Marketplace 关联的`card_uri`or进行 POST `bank_account_uri`，它将返回包含标记化资源的 URI 的响应。

**例子**

如果您的 Marketplace 的 URI 是，`/v1/marketplaces/M123-456-7890`那么流程将如下所示：

**在客户端**

您通过的有效负载应如下所示：

```
{
    "card_number": "5105105105105100",
    "expiration_month": "01",
    "expiration_year": "2020",
    "security_code": "123"
} 
```

然后应该像这样提交

```
POST /v1/marketplaces/M123-456-7890/cards 
```

响应将类似于：

```
{
  "brand": "visa",
  "name": null, 
  "expiration_year": 2020, 
  "uri": "/v1/marketplaces/TEST-MP991-204-5261/cards/CCfc1596189e0911e18ba9024f5cb9b783", 
  "expiration_month": 12, 
  "state": "new", 
  "last_four": 5100, 
  "address": null
} 
```

然后客户端只需要将`uri`响应返回到您的服务器，在服务器上您可以将卡与用户的帐户相关联。

**在服务器上**

要将卡的 URI 与现有帐户相关联，您可以使用`PUT`作为参数传递的卡的 URI 向帐户的 URI 发出请求，称为`card_uri`. 如果您要创建一个新帐户，请使用用户的电子邮件地址访问`POST`市场。`accounts_uri`

您要注意的是，您不要在设备上记录用户`card_number`或`security_code`任何调试日志，因为这会将设备带入 PCI 范围，并且如果他们的手机受到损害，可能会很糟糕。

# c# - 如何找到套接字的IP C# BeginReceive

> ID：10657018
> 
> 赞同：1
> 
> 时间：2012-05-18T17:18:41.160
> 
> 标签：c#, sockets

我用方法监听特定端口`BeginReceive()`。
如何找到发件人的IP？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:34:44.570

我认为您应该详细说明您的问题。

无论如何，您可以在清晰详细的[“异步服务器套接字示例”MSDN 示例](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)中找到有关如何使用类`BeginReceive()`的其他异步方法的完整示例。`Socket`

您将阅读到的技巧是在您接受连接并要调用时初始化一个自定义状态对象（您可以在其中放置打开的 Socket 信息）`BeginReceive`，以便接收回调将能够使用`IAsyncResult.AsyncResult`属性检索该状态.

按照链接的示例，您可以通过这种方式检索“发送者”（远程）IP 地址（在 AcceptCallback、ReadCallback 中，其中 handler 是`Socket`类的一个实例）：

```
IPAddress remoteAddress = ((IPEndPoint)handler.RemoteEndPoint).Address; 
```

# python - Python TypeError：“str”对象不可用于类

> ID：10657022
> 
> 赞同：8
> 
> 时间：2012-05-18T17:18:52.010
> 
> 标签：python, class

请帮助我理解这一点。我创建了一个非常简单的程序来尝试理解类。

```
class One(object):
    def __init__(self, class2):
        self.name = 'Amy'
        self.age = 21
        self.class2 = class2

    def greeting(self):
        self.name = raw_input("What is your name?: ")
        print 'hi %s' % self.name

    def birthday(self):
        self.age = int(raw_input("What is your age?: "))
        print self.age 

    def buy(self):
        print 'You buy ', self.class2.name

class Two(object):
    def __init__(self): 
        self.name = 'Polly'
        self.gender = 'female'

    def name(self):
        self.gender = raw_input("Is she male or female? ")
        if self.gender == 'male'.lower():
            self.gender = 'male'
        else:
            self.gender = 'female'

        self.name = raw_input("What do you want to name her? ")

        print "Her gender is %s and her name is %s" % (self.gender, self.name)

Polly = Two()
Amy = One(Polly) 
# I want it to print 

Amy.greeting()
Amy.buy() 
Amy.birthday() 
```

问题代码

```
Polly.name() # TypeError: 'str' object is not callable
Two.name(Polly)# Works. Why? 
```

为什么调用类实例 Polly 上的方法不起作用？我很迷茫。我查看了[http://mail.python.org/pipermail/tutor/2003-May/022128.html](http://mail.python.org/pipermail/tutor/2003-May/022128.html)和其他与此类似的 Stackoverflow 问题，但我不明白。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:25:57.467

该类`Two`有一个实例方法`name()`。所以`Two.name`参考这个方法，下面的代码可以正常工作：

```
Polly = Two()
Two.name(Polly) 
```

但是，在 中`__init__()`，您`name`通过将其设置为字符串来覆盖，因此每当您创建 的新实例时`Two`，该`name`属性将引用字符串而不是函数。这就是以下失败的原因：

```
Polly = Two()      # Polly.name is now the string 'Polly'
Polly.name()       # this is equivalent to 'Polly'() 
```

只需确保为方法和实例变量使用单独的变量名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:19:59.813

您正在`name`使用名为 的方法覆盖您的属性`name`。只是重命名一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T17:20:40.403

在 Two 中，您既有一个变量*，也*有一个名为“name”的函数。以不同的方式命名其中一个，它应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T17:27:15.317

我强烈建议你养成仔细命名事物的习惯。如您所见，即使是非常小的代码，您也可能会遇到麻烦。你一定要非常仔细地阅读 Python 风格的 PEP。[http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

# c# - 四象限图

> ID：10657025
> 
> 赞同：-1
> 
> 时间：2012-05-18T17:18:59.240
> 
> 标签：c#, charts, devexpress, infragistics, finance

我需要绘制四个象限中每个股票代码的基本得分和技术得分。因此，该图表将被精确划分为四个象限，并且将根据其基本面和技术得分绘制多个代码。中间会有X轴（范围从-100到+100）和Y轴（范围从-100到+100）

如何使用 DevExpress 或 Infragistics 控件执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:23:54.603

您可以使用 DXChart 的 ScatterLine 图表来完成此操作，如[DevExpress](http://www.devexpress.com/Support/Center/p/Q394957.aspx)支持站点上所述（第 4 篇文章）。

# xslt - 重构节点

> ID：10657030
> 
> 赞同：0
> 
> 时间：2012-05-18T17:19:30.140
> 
> 标签：xslt, xslt-2.0

我想匹配节点属性值，如果相同的值出现在另一个节点属性中，我必须合并它们。所以例如我有一个xml

```
<xml>
   <title>
   <metadata>
    <ref cite="ABC" relevance="2"/>
    </metadata>
     <body>
       <para>
            <text>(some text from title)</text>
      </para>
     </body>
    </title>
    <title>
      <metadata>
         <ref cite="ABC" relevance="1"/>
      </metadata>
     <body>
       <para>
            <text>(some more text from title 2)</text>
      </para>
     </body>
    </title>

    <mainbody>
        <targetref cite="ABC"/>
        <text>This is a text</text>  
   </mainbody>
 </xml> 
```

所以在转换后输出应该如下所示，所以基于元素标题/元数据/引用的引用“ABC”并按相关性排序（1,2 ....）标题的内容被合并到主体的文本元素中如果元素“targetref”的引用与元素“ref”的引用匹配

```
<xml>
  <mainbody>
    <targetref cite="ABC"/>
    <text>This is a text 
        <para><text>(some more text from title 2)</text></para>
       <para><text>(some text from title)</text></para> 
    </text>
   </mainbody>
 </xml> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:32:24.367

这里有一些 xslt 可以满足您的要求：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

<xsl:output omit-xml-declaration="no" method="xml"/>
<xsl:strip-space elements="*"/>

<xsl:template match="mainbody">
<xsl:copy>
        <xsl:copy-of select="targetref"/>
        <xsl:element name="text">
            <xsl:value-of select="."/>
            <xsl:variable name="key" select="targetref/@cite"/>
            <xsl:for-each select="/xml/title[metadata/ref/@cite=$key]">
                <xsl:sort data-type="number" select="metadata/ref/@relevance" order="ascending" />
                <xsl:copy-of select="body/para"/>
            </xsl:for-each>
        </xsl:element>
    </xsl:copy>
</xsl:template>

<xsl:template match="xml/title"/>

<xsl:template match="xml">
    <xsl:copy>
        <xsl:apply-templates/>
    </xsl:copy>
</xsl:template>

<xsl:template match="*">
    <xsl:apply-templates/>
</xsl:template>

</xsl:stylesheet> 
```

技巧是在正常流程上忽略节点 xml/title，我们专注于主体标签，然后调用 for-each 来选择和排序所需的节点，并将信息写入主体内我们想要的位置。选择需要一个变量（$key）来过滤主体上的指定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:47:46.540

一种方法是通过键来根据元数据参考值查找**标题记录：**

```
<xsl:key name="ref" match="title" use="metadata/ref/@cite" /> 
```

然后，假设您位于主体内的**文本**元素上，您可以像这样查找它们，并同时对它们进行排序

```
<xsl:apply-templates select="key('ref', preceding-sibling::targetref/@cite)/body/para">
   <xsl:sort select="../../metadata/ref/@relevance" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:key name="ref" match="title" use="metadata/ref/@cite" />
   <xsl:template match="title" />

  <xsl:template match="mainbody/text">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
      <xsl:apply-templates select="key('ref', preceding-sibling::targetref/@cite)/body/para" >
         <xsl:sort select="../../metadata/ref/@relevance" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<xml>
    <mainbody>
        <targetref cite="ABC"/>
        <text>This is a text
            <para>
                <text>(some more text from title 2)</text>
            </para>
            <para>
                <text>(some text from title)</text>
            </para></text>
    </mainbody>
</xml> 
```

# javascript - jQuery.noConflict 导致冲突

> ID：10657034
> 
> 赞同：1
> 
> 时间：2012-05-18T17:19:54.243
> 
> 标签：javascript, jquery, jquery-autocomplete

我有一行代码导致图像滑块和自动完成的搜索栏之间发生冲突： `$J = jQuery.noConflict();`

在此行之前我有两个脚本：jquery_1-6-4.js 和 jquery.autocomplete.js，它们用于使搜索栏自动完成。使用 jQuery.noConflict 行，图像滑块可以工作，但搜索栏不建议单词。没有它，搜索栏可以工作，但滑块不起作用（它会消失）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:39:20.650

一旦您将 jQuery 置于无冲突模式，它就会释放`$`，您的自动完成代码正在尝试使用它。如果你设置`$J = jQuery.noConflict();`了，你已经将 jQuery 别名为`$J`; 它取代了`$`。你需要在`$J`整个过程中使用。

```
$J().ready(function() {
    $J("#recherche").autocomplete("get_kw.php", {
        width: 260,
        matchContains: true,
        //mustMatch: true,
        //minChars: 0,
        //multiple: true,
        //highlight: false,
        //multipleSeparator: ",",
        selectFirst: false
    });
}); 
```

# c# - C# SQL 查询不返回任何内容

> ID：10657038
> 
> 赞同：1
> 
> 时间：2012-05-18T17:20:00.423
> 
> 标签：c#, sql, sql-server-ce

我试图让我的 Winforms 应用程序查询 SQL Server CE 数据库并通过下拉列表返回与用户指定的列名相对应的所有行。当我运行程序时，它只会返回一个空白的 dataGrid。这是我第一次使用 SQL Server CE，因此将不胜感激。

我的代码是：

```
private void srchBTN_Click(object sender, EventArgs e)
{
   string conString = Properties.Settings.Default.CurricularChangeTrackerConnectionString;

   using (SqlCeConnection conn = new SqlCeConnection(conString))
   {
       string queryString = ("SELECT * FROM SecondaryEducation WHERE ProgramCode='" + PrgmCde.SelectedValue + "'");

       try
       {
          conn.Open();

          using (SqlCeDataAdapter adapter = new SqlCeDataAdapter(queryString, conn))
          {
              DataTable table = new DataTable();
              adapter.Fill(table);

              dataGridView1.DataSource = table;
              adapter.Dispose();
          }

          conn.Close();
       }
       catch (Exception ex)
       {
           MessageBox.Show(ex.Message);
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:48:31.913

您在 using 语句中声明数据表，试试这个

```
private void srchBTN_Click(object sender, EventArgs e)
{
   string conString = Properties.Settings.Default.CurricularChangeTrackerConnectionString;
   DataTable table = new DataTable();
   using (SqlCeConnection conn = new SqlCeConnection(conString))
   {
     string queryString = ("SELECT * FROM SecondaryEducation WHERE ProgramCode='" + PrgmCde.SelectedValue + "'");

   try
   {
      conn.Open();

      using (SqlCeDataAdapter adapter = new SqlCeDataAdapter(queryString, conn))
      {

          adapter.Fill(table);
          dataGridView1.DataSource = table;
          adapter.Dispose();
      }

      conn.Close();
   }
   catch (Exception ex)
   {
       MessageBox.Show(ex.Message);
   }
  }
} 
```

这样，当 using 语句的范围结束时，表就不会被处理掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:02:04.520

如果 ValueMember 中未指定属性，则 SelectedValue 返回对象的 ToString 方法的结果。

我的观点是，您可能无法从组合框中得到您的想法。

试试这个：

```
string queryString = ("SELECT * FROM SecondaryEducation WHERE ProgramCode='" + PrgmCde.Items[PrgmCde.SelectedIndex].ToString() + "'"); 
```

# matlab - MATLAB：仅推进 ode45 一步

> ID：10657040
> 
> 赞同：0
> 
> 时间：2012-05-18T17:20:05.870
> 
> 标签：matlab, differential-equations, chaos

我`ode45()`在 matlab 中使用一些动力学工作，使用[这个过程](http://sprott.physics.wisc.edu/chaos/lyapexp.htm)来计算 Lorenz 系统的最大 Lyaponov 指数。

该过程涉及求解一个从 开始的微分方程组`x0`，并将其与开始非常接近的轨迹进行比较`x0`。

在每个时间步，在推进时间步之前需要重新调整第二个轨迹，所以我希望能够只调用`ode45()` *一次*- 这可能吗？

此处介绍了替代解决方案的开始尝试，但它不起作用；据我所知，下面得到的矩阵`r`应该`R`是相似的：

```
% Time 
ti = 0; tf = 1; res = 10;
T = linspace(ti, tf, res);

% Solve the system first time
[~,R] = ode45('tbmLorenz',T,x0);

% Alternate trajectory
r = zeros(size(R));

% Temporary cordinates
temp = zeros(3,3);

% Solve for second trajectory
for i = 2:(res-1)
    % Time step
    ts = T((i-1):(i+1));

    % Solve three steps
    [~,temp] = ode45('tbmLorenz',ts,r(i-1,:));

    r_i = temp(2,:)

    % Code to alter r_i goes here

    % Save this
    r(i,:) = r_i;
end 
```

...但他们不是：

```
r =
    1.0000    3.0000    4.0000
    9.7011   20.6113    7.4741
   29.9265   16.4290   79.0449
   -5.7096  -15.2075   49.2946
  -12.4917  -13.6448   44.7003
  -13.6131  -13.8826   45.0346
  -13.5061  -13.1897   45.4782
  -13.0538  -13.0119   44.5473
  -13.4463  -13.8155   44.4783
         0         0         0
>> R
R =
    1.0000    3.0000    4.0000
    9.7011   20.6139    7.4701
   29.9663   16.5049   79.1628
   -5.7596  -15.2745   49.3982
  -12.4738  -13.5598   44.7800
  -13.5440  -13.8432   44.9084
  -13.5564  -13.3049   45.4568
  -13.1016  -12.9980   44.6882
  -13.3746  -13.7095   44.4364
  -13.7486  -13.6991   45.4092 
```

最后一行`r`是零不是问题。

有任何想法吗？干杯! \T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:25:14.720

Ode45 是一种自适应算法，根据定义具有不同的步长。您可以根据需要修复步长，但是您没有使用 ode45，而是使用了其他东西。

如果你想解决这类问题，我建议你使用固定的时间步长。[此链接](http://www.mathworks.com/support/tech-notes/1500/1510.html#fixed)包含您需要的代码。

如果您坚持使用 ode45，则必须使用时间插值输入调整模拟文件本身。

# javascript - jQuery：检查对象是否有类

> ID：10657043
> 
> 赞同：5
> 
> 时间：2012-05-18T17:20:16.460
> 
> 标签：javascript, jquery, html, css

试图检查一个对象是否有一个类。看起来很简单，但我无法让它工作。这是我的代码：

**Javascript**

```
$('ul.nav li').click(function(){    
    if $(this).hasClass('selected') {
        alert('This is selected!');
    }

    else {
        alert('This is not selected!');
    }
});

$('ul.nav li:first-child').addClass('selected'); 
```

**HTML**

```
<ul class="nav">
    <li>Who we work for</li>
    <li>Articles and interviews</li>
    <li>Job openings</li>
    <li>What the #%!$@ is Post Typography?</li>
</ul>

<ul class="content">
    <li>This is who we work for.</li>
    <li>These are articles and interviews.</li>
    <li>These are our job openings.</li>
    <li>This is some info about Post Typography.</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-18T17:22:11.143

```
if $(this).hasClass('selected') { 
```

应该

```
if($(this).hasClass('selected')){ 
```

当您查看浏览器的错误控制台时，很容易观察到这一点。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:24:38.253

包括完整的代码

```
$(document).ready(function(){

$('ul.nav li').click(function(){    
    if ($(this).hasClass('selected')) {
        alert('This is selected!');
    }

    else {
        alert('This is not selected!');
    }
});

$('ul.nav li:first-child').addClass('selected');

}); 
```

希望这可以帮助..

# javascript - jQuery Mobile + Flexslider2

> ID：10657044
> 
> 赞同：0
> 
> 时间：2012-05-18T17:20:23.590
> 
> 标签：javascript, jquery-mobile, flexslider

我在让 jQuery Mobile 与其他 Javascript 库一起工作时遇到了巨大的麻烦——在我的例子中是 Flexslider 2 ( [http://flex.madebymufffin.com/examples/basic.html](http://flex.madebymufffin.com/examples/basic.html) )。

除了 jQM 之外，我还有几页我想使用 flexslider。不幸的是，当我单击我网站上的链接时，滑块不起作用/未加载。

我知道这是因为 jQM 加载页面的方式 - 通过使用 AJAX 加载它们并添加它们来执行 DOM。

我一直在寻找几个小时来了解如何使用“pageshow”和“mobileinit”等事件，但我无法让它工作，所以非常感谢任何帮助。

这是我现在正在做的事情：

在我页面的每个 <head> 部分中：

```
<script src="js/jquery-1.7.2.js"></script>
<script src="js/jquery.mobile-1.1.0.js"></script>
<script src="js/jquery.flexslider2.js"></script>

<script type="text/javascript">
    $('#flexslider').bind('pageshow', function(){
        $('.flexslider').flexslider({
            animation: "slide",
        });
    });
</script> 
```

这在我手动重新加载页面时有效，但是当我通过我网站上的链接访问该页面时它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-28T00:36:54.780

您可以添加`rel="external"`或添加`data-ajax="false"`到 FlexSlider 页面的链接，这可以禁用页面的 Ajax 加载。你可以参考[这里的文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:05:25.380

尝试将它放在 pageinit 的回调中。像这样...

```
$(document).bind('pageinit', function(){ $('.flexslider').flexslider({ animation: 'slide' ); }); 
```

我敢肯定，更有知识的人可以解释为什么这是必要的，但我 99% 肯定这是要走的路。

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T09:21:50.600

我有同样的问题。Jquery Mobile 网站的索引页面上的 Flexslider 在第一次导航到时会起作用，但如果通过菜单或后退按钮返回则不会。

我使用了 'pageshow' 事件而不是 ''pageinit' 事件，它运行良好：

$(document).bind('pageshow', function() { $('.flexslider').flexslider({ animation: "slide", }); });

# powershell - Windows azure powershell 新手，无法连接到我的 azure 应用程序

> ID：10657048
> 
> 赞同：1
> 
> 时间：2012-05-18T17:20:37.800
> 
> 标签：powershell, azure

当我使用 powershell commandlet 连接 azure app 时出现错误 -

Get-HostedService：无法为具有权限“management.core.windows.net”的 SSL/TLS 建立安全通道。

这是我关注的链接 - [http://msdn.microsoft.com/en-us/gg271300](http://msdn.microsoft.com/en-us/gg271300)

[http://wappowershell.codeplex.com/documentation](http://wappowershell.codeplex.com/documentation)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:38:03.283

根据我的经验，可能存在两个问题：

1.  您使用的证书无法在您的计算机和 Windows Azure 管理门户之间创建安全 SSL 隧道，您会收到错误消息
2.  我已经看到了与 SSPI 和 SCHANEL 相关的操作系统特定问题，其中无法创建 SSL 隧道。

我还认为您拥有的第一个链接具有旧信息，并且在大多数情况下没有帮助。让我们先尝试解决问题，这很容易。我在下面写，了解您的机器上安装了 Powershell Cmdlet：

*   首先从您的 Windows Azure 门户下载 publishconfig 文件，如此[处](http://blogs.msdn.com/b/avkashchauhan/archive/2012/05/10/downloading-windows-azure-publish-settings-subscription-configuration-file.aspx)所述。
*   现在打开 Windows Azure CmdLets 的 Windows Powershell（在管理员模式下）

之后直接输入这些 Powershell 命令：

```
PS > Import-Subscription <include your _filename_.publishsettings here>
PS > Select-Subscription <Enter The _name_of_your_subscription which will be listed after you run above command (Note - **SubscriptionName** is needed here>
PS > Get-HostedService <This should list all of services in your subscription> 
```

现在您可以从 Powershell Cmdlet 管理订阅。

如果您仍然有问题，请告诉我，我将提供有关 2) 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T23:32:34.350

你能在这里提交一个错误吗：http: [//github.com/WindowsAzure/azure-sdk-tools](http://github.com/WindowsAzure/azure-sdk-tools)

在这种情况下，从 PowerShell 返回的错误消息应该更友好。

此外，您现在可以使用 Add-AzureAccount 来获取凭据，而不必下载和导入 publishsettings 文件

# objective-c - 如果将弱属性分配给强属性会发生什么？

> ID：10657056
> 
> 赞同：0
> 
> 时间：2012-05-18T17:21:39.513
> 
> 标签：objective-c, retain, autorelease

在旧术语中，它是关于将自动释放的属性分配给保留属性。如果这样做会发生什么，如下所示。

```
@property(strong, nonatomic) NSString *new;

... 

NSString *old = [NSString stringWithFormat:@"%@ %@"), @"hello", @"world"];
new = old; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:58:06.707

添加到我对您的问题的评论：

读这个

[变量限定符](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

它描述了您可以用来声明变量的不同类型的生命周期限定符，并给出了每种类型的示例。

**使用相关位进行编辑：**

您可以使用的生命周期限定符是：

> __强的
> 
> __虚弱的
> 
> __unsafe_unretained
> 
> __自动释放

他们的描述在文档中，但我将进入前 2 个。

`__strong`是默认类型（当您不指定时），它会将对象的保留计数增加 1。只要有指向对象的强指针，它就会保持活动状态。

`__weak`不会增加对象的保留计数，也不会使其保持活动状态。如果没有指向同一个对象的强引用，弱指针将自动设置为 nil。（`__unsafe_unretained`实际上几乎与弱相同，但它们被悬空而不是设置为零）。

如果您创建一个立即分配给弱指针的对象，它将立即被释放，因为没有对其的强引用。

来自文档的示例代码：

```
NSString * __weak string = [[NSString alloc] initWithFormat:@"First Name: %@", [self firstName]];
NSLog(@"string: %@", string); 
```

`string`在这种情况下尝试打印时，的值将为空。

如果要引用的对象已经至少有一个强引用，则只能使用弱指针。否则（新）对象将立即被释放。

# javascript - Jquery使用多个文本框，文本框数组

> ID：10657059
> 
> 赞同：2
> 
> 时间：2012-05-18T17:21:57.900
> 
> 标签：javascript, jquery, arrays, textbox

我已经动态生成了文本框，并希望使用 jquery 对其值进行计算。

文本框名称如下：

```
A[1] , B[1]  - on change event , Alert SUM of values of A[1] and B[1]

A[2] , B[2]  - on change event , Alert SUM of values of A[2] and B[2] 

A[3] , B[3]   - on change event , Alert SUM of values of A[3] and B[3]

.
.
.
.
A[10] , B[10]   - on change event , Alert SUM of values of A[10] and B[10] 
```

如何在 jquery 中为这个任务创建一个函数。请帮助我完成这项任务。

我有这个代码，但它适用于所有文本框 A 和 B ，但我想指定值集，如 A[1] 和 B[1] 的 SUM ， A[2] 和 B[2] 的 SUM ... ……

```
$("input[type='text'][name^='A'] ,input[type='text'][name^='B']").
keyup(function(){ 

alert(sumThemUp());

});

function sumThemUp(){
var sum = 0;

$("input[type='text'][name^='A'] ,input[type='text'][name^='B']").
each(function(){

sum+= parseInt($(this).val());

});

return sum;

    }; 
```

我的 HTML 是：

```
<input type="text" name="A[1]">
<input type="text" name="B[1]">
<input type="text" name="A[2]">
<input type="text" name="B[2]">
.
.
.
.
.<input type="text" name="A[10]">
<input type="text" name="B[10]"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:41:42.293

我认为您正在尝试这样的事情：

```
$('input[type=text]').on('keyup', function() {
    var cur = this.name;
    if(cur.indexOf('A') == 0){
       var target = 'B' + cur.replace('A','');
    } else target = 'A' + cur.replace('B','');
    var targetVal = $('input[name="'+ target +'"]').val();
    var sum = parseInt(this.value) + parseInt(targetVal ? targetVal: 0);
    console.log(sum);
}); 
```

**[工作演示](http://jsfiddle.net/thecodeparadox/CDnWg/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:01:34.410

这可能是我能想到的最简单的方法。它需要对您的动态 DOM 内容进行轻微修改，但我假设您总是生成 A 和 B，所以这应该不是问题。

HTML：

```
<span class="calc_group">
    <input type="text" name="A[1]">
    <input type="text" name="B[1]">
</span>
<span class="calc_group">
    <input type="text" name="A[2]">
    <input type="text" name="B[2]">
</span> 
```

jQuery：

注意：每次添加时都需要在动态 DOM 函数中调用它！

```
function doAttachment(){
     $('.calc_group input').unbind('keyup');

     $('.calc_group input').keyup(function(){
           var sum = 0;
           $(this).parent().children().each(function(){
                sum += parseInt($(this).val());
           });

           alert(sum);
      });
} 
```

# c++ - 没有 libeay32.dll 的 OpenSSL win32

> ID：10657060
> 
> 赞同：0
> 
> 时间：2012-05-18T17:22:01.183
> 
> 标签：c++, dll, openssl

我知道我必须将文件粘贴`libeay32.dll`到使用 OpenSSL for windows 的程序的文件夹中。我只需要一个包括：`openssl/evp.h`.

我怎样才能编译我的程序而不必复制`libeay32.dll`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T02:35:36.930

DLL 文件是*动态*库。如果使用动态库链接程序或 lib ray，则需要在运行时访问它们。

相反，如果一个程序或库是使用*静态*库链接的，那么它们将包含在可执行文件或库中，并且您在运行时不需要任何其他东西（可能除了其他外部资源）。

如果 OpenSSL 依赖于`libeay32.dll`，那么它是使用动态库编译的。您可以通过使用静态库（如果可能）重新编译 OpenSSL 来实现您想要的，并通过静态链接到 OpenSSL 来编译您的程序。

# javascript - 如何将一个数组数据添加到多个动态数组中

> ID：10657062
> 
> 赞同：0
> 
> 时间：2012-05-18T17:22:03.307
> 
> 标签：javascript, arrays

我在javascript中有一个数组，比如

```
var arr = ["aa","bb","cc", "dd"]; 
```

现在我想将这些值动态存储到多个数组中

```
var arr1 = ["aa"];
var arr2 = ["bb"];
var arr3 = ["cc"];
var arr4 = ["dd"]; 
```

在这里，根据“arr”数组的大小，我需要创建动态数组来存储这些值。例如，在“arr”中，我有 4 个值，然后我需要创建 4 个动态数组来存储 4 个值。

我不知道如何实现这一点任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:34:00.867

在全球范围内，您可以执行以下操作：

```
arr.forEach( function( value, index ) {
    window["arr"+(index+1)] = [value];
}); 
```

在任意范围内，这仅在非严格评估下才有可能：

```
var arr = ["aa","bb","cc", "dd"];

eval( arr.map( function( value,index) {
    value = typeof value == "string" ? '"' + value + '"' : value;
    return 'var arr'+(index+1)+' = ['+value+']';
}).join(";") + ";" ); 
```

评估以下代码：

```
var arr1 = ["aa"];
var arr2 = ["bb"];
var arr3 = ["cc"];
var arr4 = ["dd"]; 
```

[forEach 垫片](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)
[映射垫片](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:26:02.433

```
var arrayOfArrays = [];
for (var i = 0; i < arr.length; i++) {
    arrayOfArrays[i] = [];
    arrayOfArrays[i].push(arr[i]); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:33:40.597

我能想到的唯一方法就是使用 eval。我不建议使用它，所以我将一个对象放在一起，它是接近且首选的。

[http://jsfiddle.net/P9SSA/1/](http://jsfiddle.net/P9SSA/1/)

```
var myOneArray = ["a","b","c","d"];

var varPrefix = "arr";
var myObj = {};
for (var i = 1; i <= myOneArray.length; i++) {
     eval(varPrefix + i + '=["' + myOneArray[i-1] + '"]');
     myObj[varPrefix + i] = [myOneArray[i-1]];
}

document.write(arr1);
document.write("<br>");
document.write(myObj.arr3); 
```

# c# - 将操作或功能保存在辅助存储器上

> ID：10657074
> 
> 赞同：1
> 
> 时间：2012-05-18T17:22:58.440
> 
> 标签：c#, serialization, reflection

我正在创建一个程序，用户可以在其中创建自定义命令并在需要时执行它们。结果，我有一个类似于：

```
public class Command
{
    Action c { get; set; }

    // Overloaded Constructors------------------------------------

      // changes the volume                
      public Command(int volumeChange)
      {
        c = ()=>
            SomeClass.ChangeMasterVolume(volumeChange);
      }

      // Animate something
      public Command(int x, int y)
      {
        c = ()=>
            SomeClass.MoveMouse(x,y);
      }

      // etc.. there are more contructors....

   //---------------------------------------------------------

    public void ExecuteCommand()
    {
        c();
    }
} 
```

当用户关闭应用程序时，我希望将这些命令保存在磁盘的某个位置。大约有 200 个不同的命令，如果我可以从该类中序列化一个实例，那就太好了。由于它包含一个 Action，因此无法对其进行序列化。

如果我不必创建巨大的 switch 语句来确定要执行的命令，那就太好了。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:34:02.237

在我看来，您只需要保留一个界面而不是委托。

```
 public interface IDoThingy
 {
      void DoStuff();
 }

 public class IncreaseVolumeThingy : IDoThingy
 {
     public int Volume { get; set; }

     public IncreaseVolumeThingy(int volume)
     {
         Volume = volume;
     }

     public void DoStuff()
     {
         SomeClass.ChangeMasterVolume(Volume);
     }
 }

 public class Command
 {
      protected IDoThingy _thingy = null;

      public Command(IDoThingy thingy)
      {
           _thingy = thingy;
      }

      public void ExecuteCommand()
      {
          _thingy.DoStuff();
      }
 } 
```

因此，您无需创建一组构造函数，只需根据指定的命令创建某种形式的工厂。如果用户正在设置增加音量命令，那么您新建一个实例`IncreaseVolumeThingy`并存储它。当它被序列化时，它可以在没有委托的情况下从状态重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:31:57.857

使用反射按名称调用类方法。序列化类和方法名。

[http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met](http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met)

# firefox-addon - 是否可以在面板本身中应用 panel.resize

> ID：10657076
> 
> 赞同：5
> 
> 时间：2012-05-18T17:23:11.933
> 
> 标签：firefox-addon, firefox-addon-sdk

Firefox Add-on SDK 扩展中的面板似乎没有自动大小选项，但`panel.resize`存在。是否可以在当前面板上调用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T18:13:52.250

不，在面板中运行的代码没有调用任何 SDK 模块的必要权限。这是通过使用将消息发送回扩展程序的内容脚本来解决的。然后扩展程序可以调整面板的大小。这些方面的东西（未经测试）：

```
var panel = require("panel").Panel({
  contentURL: ...,
  contentScript: "self.port.emit('resize', " +
                   "{width: document.documentElement.clientWidth, " +
                   "height: document.documentElement.clientHeight});"
});
panel.port.on("resize", function({width, height})
{
  panel.resize(width, height);
});
panel.show(); 
```

# c# - WCF - 实现 ServiceHostFactory 以用于 IIS 上下文（svc 文件）

> ID：10657078
> 
> 赞同：1
> 
> 时间：2012-05-18T17:23:28.180
> 
> 标签：c#, asp.net, wcf, iis, svc

我已经成功实现了一个自托管的 WCF 服务。对于遗留问题，主机绑定配置是从非标准源（而不是 app.config）读取的。在将此服务移植到 IIS 时，我遇到了加载设置的问题，我发现解决方案将涉及实现一个继承自`ServiceHostFactory`.

但是，我的问题是该`CreateServiceHost`方法仅从 SVC 文件中接收具体类型和 URI，但我想重新使用此类以进一步实现并需要更多信息：例如定义的接口`ServiceContract`和已配置的绑定.

我从@carlosfigueira 找到[了这篇出色的文章](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx)，但它的实现使用工厂以一对一的关系返回特定于服务的主机。我当然可以做到，但这会导致几个特定的​​工厂，有很多复制和粘贴代码，我会避免它。是否可以？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:07:10.870

没有内置方法可以找出服务类实现了哪些合同，但代码应该不会太难。它类似于下面的函数。如果你有多个合约类型，你需要一些逻辑来确定相对地址（即，如果你有一个合约，使用“”，如果你有多个，使用合约名称作为地址）。

```
private IEnumerable<Type> GetContractType(Type serviceType) 
{ 
    if (HasServiceContract(serviceType))
    { 
        yield return serviceType; 
    } 

    var contractInterfaceTypes = serviceType.GetInterfaces() 
        .Where(i => HasServiceContract(i));

    foreach (var type in contractInterfaceTypes)
    {
        yield return type;
    }

    // if you want, you can also go to the service base class,
    // interface inheritance, etc.
} 

private static bool HasServiceContract(Type type) 
{ 
    return Attribute.IsDefined(type, typeof(ServiceContractAttribute), false); 
} 
```

# android - 与现有 iOS 和 Android 应用程序中的嵌入式 (UI)Webviews 通信

> ID：10657080
> 
> 赞同：5
> 
> 时间：2012-05-18T17:23:54.037
> 
> 标签：android, ios, cordova, uiwebview, webview

这个应用程序已经存在于 Apple App Store 和 Android 市场。这是一个使用大量本机代码的应用程序，不是完全 html5ed 的候选者。

**冗长的描述**

我想要一个基于 Web 的系列设置页面。其中一些页面将在本地移动设备上运行，而另一些页面将托管在远程服务器上。本机应用程序需要与本地网页通信，以使用 javascript 获取和设置网页中的信息。

例如，WebView/UIWebview 中显示的第一个页面将是本地索引页面。如果远程网站关闭，则索引页面上指向远程页面的链接将显示为灰色。在加载 WebView 时，本机应用程序将需要检测该页面的可达性并将 javascript 发送到页面以使按钮变灰。同样，在本地网页中进行的一些设置更改需要发送回 Native 应用程序进行处理。

**简短而甜蜜的需求摘要**

*   在 webview 中嵌入远程和本地网页
*   Android 和 iOS 的这些网页将相同
*   本地页面使用 JavaScript 从 Native Mobile App 获取数据并将数据发送到 Native Mobile App

**潜在的解决途径**

A.PhoneGap *_*

我意识到如果我的应用程序完全是一个网络应用程序，Phonegap 会很好地解决这个问题。从我的阅读来看，Phonegap 似乎并不喜欢嵌入到本地应用程序中进行兼职工作。

什么？你说这很容易，而我被严重误导了？启发我哦，聪明的人。

B.*自己动手*

我愿意推出自己的解决方案，但是通过 Javascript 从 Webviews 到 Native Apps 获取和设置信息的方法似乎完全不同。比设置更重要（iOS 的虚假 URL，Android 的非常好的 AddJavaScriptInterface）。此外，这条路径似乎会在未来导致严重的维护问题。

说什么？你的天才程序员朋友制作了一个网站，详细描述了这个过程？告诉我更多。

C.*第三方图书馆*

完美的第 3 方库可以满足我的所有需求（以及更多！）存在吗？救我脱离无知。

* * *

**决定**

在未来，PhoneGap 的“Cleaver”项目似乎将是做到这一点的最佳方式。

由于尚未为 Android 做好准备，目前（2012 年 6 月上旬）编写一次嵌入 HTML 的最佳解决方案似乎是使用虚假 URL 方案从网页与本机应用程序进行通信（两个平台都可以从原生应用程序转到网页时直接在页面上执行JS）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T18:20:47.707

对于 Android，这更简单。看看`WebView`的[`addJavascriptInterface`](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)方法。您可以使用可以在 HTML javascript 中直接调用的方法创建自己的对象。

iOS 需要一些技巧。这些类型问题的最佳解决方案是几件事：

*   对于 iOS 的回调，您基本上需要组成自己的 URL 方案，例如`native://somehost.com/somepath`当您的 javascript 想要通知 iOS 代码使用时`window.location = 'native://somehost.com/somepath';`
*   将`UIWebView`委托设置为定义[webView:shouldStartLoadWithRequest:navigationType:](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html)它看起来像这样的对象

    ```
    if ([request.URL.scheme isEqualToString:@"native"]){
        if([request.URL.host isEqualToString:@"somehost.com"]) {
            //Do the code you need to do here, branch off depending
            //on the path and/or host, you can parse parameters here too
            return NO; //This will keep UIWebView from trying to actually load 
                       //your made up scheme
        }
    }
    return YES; //If the request isn't one you want to intercept return YES/true
                //so UIWebView will load the page 
    ```

*   要让您的 iOS 代码在您的 javascript 中发送信息或调用函数，您可以使用 WebView 的[`stringByEvaluatingJavaScriptFromString:`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIWebView). 这将返回 javascript 表达式的结果，因此您还可以使用它从页面本身获取一些信息。要调用函数，请使用类似这样的东西

    ```
    [webview stringByEvaluationgJavaScriptFromString:@"myJavaScriptFunction();"] 
    ```

您还可以通过创建自定义[`WebViewClient`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)并覆盖`shouldOverrideUrlLoading`类似于上面的 iOS 代码的方法来处理 Android 中的组合方案，除了返回调用是向后的，`true`如果您处理了 URL 并且`WebView`应该什么都不做，并且`false`如果您想要`WebView`处理装载。请务必创建自定义并将其分配`WebViewClient`给`WebView`using [`setWebViewClient`](http://developer.android.com/reference/android/webkit/WebView.html#setWebViewClient%28android.webkit.WebViewClient%29)。要在实际上调用 javascript 函数，`WebView`请执行以下操作`webview.loadUrl("javascript:myJavaScriptFunction();");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:44:42.597

PhoneGap iOS 有一个名为 Cleaver 的概念，您可以在其中将 Web 视图嵌入到本机 iOS 应用程序中。Randy McMillian 有一个很好的[例子](https://github.com/RandyMcMillan/Cleaver-RSSReader/tree/master/CleaverReader)。在 Android 方面，正在开展工作以带来相同的功能。所以我们还没有到达那里，但我们会到达那里。

# perl - Perl MySQL 粗鲁！帮助

> ID：10657085
> 
> 赞同：1
> 
> 时间：2012-05-18T17:24:26.587
> 
> 标签：perl, crud

我对数据库编程相当陌生，正在尝试开发一个基本的 CRUD 应用程序。使用[粗鲁！](http://www.thesmbexchange.com/cruddy/)我有一个非常有限的应用程序，它读取数据字典并根据每个表创建表单。

由于几个表具有广泛的外键条目，我希望我的应用程序执行连接操作，这对于每个外键列都显示为键所指的条目是必要的。粗鲁！声称拥有这种能力 - 它[`CGI::AutoForm`](https://metacpan.org/module/CGI%3a%3aAutoForm)用于创建表单。要启动并运行表单，您必须逐列向引用表提供条目`ui_table_column`。

我没有为我的所有表及其附属列编写 SQL 语句，而是试图为单个列正确处理该过程。

从我的这个表的 DDL 中：

```
CONSTRAINT `fk_Holder_Sample1`
FOREIGN KEY (`sample_id`)
REFERENCES `sample` (`sample_id`)
ON DELETE NO ACTION
ON UPDATE NO ACTION, 
```

我尝试设置 AutoForm SQL 条目：

```
INSERT INTO ui_table_column (
    table_name, field_name, appear_order, heading, searchable, updatable, insertable, input_control_type, multi_insert_delimiter,
    search_control_type, search_mult_select, use_data_dict, datatype, default_value, required, input_size, input_maxlength, brief_heading,
    alt_mask_field, mask_table_name, mask_field_name, id_field_name, no_cache, radio_checkbox_cols, field_group, element_attrs, help_summary)
VALUES (
    'SAMPLE', 'SAMPLE_ID', 10, 'ID', 'Y', 'N', 'N', 'TEXT', NULL,
    'SELECT', 4, 'Y', NULL, NULL, NULL, NULL, NULL, NULL,
    NULL, 'sample', 'name', 'sample_id', 'Y', NULL, NULL, NULL, NULL);

INSERT INTO ui_table_column (
    table_name, field_name, appear_order, heading, searchable, updatable, insertable, input_control_type, multi_insert_delimiter,
    search_control_type, search_mult_select, use_data_dict, datatype, default_value, required, input_size, input_maxlength, brief_heading,
    alt_mask_field, mask_table_name, mask_field_name, id_field_name, no_cache, radio_checkbox_cols, field_group, element_attrs, help_summary)
VALUES (
    'SAMPLE', 'SAMPLE_NAME', 20, 'Name', 'Y', 'Y', 'Y', 'TEXT', NULL,
    'MATCH TEXT', NULL, 'Y', NULL, NULL, NULL, NULL, NULL, 'Name',
    NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);

INSERT INTO ui_table_column (
    table_name, field_name, appear_order, heading, searchable, updatable, insertable, input_control_type, multi_insert_delimiter,
    search_control_type, search_mult_select, use_data_dict, datatype, default_value, required, input_size, input_maxlength, brief_heading,
    alt_mask_field, mask_table_name, mask_field_name, id_field_name, no_cache, radio_checkbox_cols, field_group, element_attrs, help_summary)
VALUES (
    'HOLDER', 'SAMPLE_ID', 30, 'sample', 'Y', 'Y', 'Y', 'SELECT', NULL,
    'SELECT', 4, 'Y', NULL, NULL, NULL, NULL, NULL, 'Sample',
    NULL, 'sample', 'NAME', 'SAMPLE_ID', 'Y', NULL, NULL, NULL, NULL); 
```

当我刷新我的应用程序页面（只是刷新浏览器和调用`apachectl`）时，没有任何变化——也就是说，我仍然在 Holder 页面中看到 Sample ID 作为一个字段。

有没有人在这方面取得了成功，或者可以告诉我我做错了什么？

* * *

编辑：我认为 SO 的沉默表明这个特定的框架尚未得到广泛使用。那么，我想稍微打开我的问题，并询问您使用了哪些解决方案？我实际上正在试验[Catalyst::Plugin::AutoCRUD](http://search.cpan.org/~oliver/Catalyst-Plugin-AutoCRUD-2.120250/lib/Catalyst/Plugin/AutoCRUD.pm)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:38:03.367

在学习者用另一个框架结束后回答，但为了将来参考，这些字段必须为大写。

对于上面的示例，第一个和第三个插入语句将具有： (alt_mask_field, mask_table_name, mask_field_name, id_field_name) = (NULL,'SAMPLE','NAME','SAMPLE_ID')。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:09:27.843

我最终在编辑中使用了该模块。我将把它标记为明天关闭。

# .net - 将带偏移量的 Unix 时间转换为 .NET DateTime

> ID：10657086
> 
> 赞同：0
> 
> 时间：2012-05-18T17:24:28.503
> 
> 标签：.net, datetime, unix-timestamp

我无法理解如何转换类似的东西

```
1332953228 -14400 
```

到一流的`System.DateTime`对象。这个值实际上来自 Mercurial，当在 UI 上显示时被视为

```
Wed Mar 28 20:47:08 2012 +0400 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:34:56.683

我不确定您应该如何处理时区偏移，但 Unix Time 是自 1970 年 1 月 1 日以来的秒数。这似乎很接近，尽管就像我说的我不确定偏移量：

```
var theDate = new DateTimeOffset(new DateTime(1970, 1, 1).AddSeconds(1332953228), TimeSpan.FromSeconds(-14400)); 
```

# android - 在android中计算用户和POI（兴趣点）之间的角度

> ID：10657094
> 
> 赞同：2
> 
> 时间：2012-05-18T17:25:24.447
> 
> 标签：android, azimuth, point-of-interest

我想做一个函数来计算用户和一个兴趣点（POI）之间的角度，参考真北。

我已经有了我的位置和 POI 位置的经度和纬度，现在我需要它们之间的角度。

这是我所拥有的：

```
private float calcAzimuth1(float lat0, float long0, float lat1, float long1)
{
    //user's latitude and longitude
    float userLat  = (float) ((lat0  * ((float)Math.PI))/180);
    float userLong = (float) ((long0 * ((float)Math.PI))/180);

    //POI's latitude and longitude
    float latT1    = (float) ((lat1  * ((float)Math.PI))/180);
    float longT1   = (float) ((long1 * ((float)Math.PI))/180);

    //angle between them
    float angle=??} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T14:06:26.523

检查 Location 类的 bearingTo 函数 [http://developer.android.com/reference/android/location/Location.html#bearingTo(android.location.Location)](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29) 您可以从 Lat/Longs 创建两个 Location 对象，然后获取方位它们之间。

您可能需要的另一件事是计算设备方向，然后将它们组合在一起。这需要收听传感器并根据收到的信息计算北方。在此处查看答案： [SGS III 上的指南针读数](https://stackoverflow.com/questions/14113058/compass-readings-on-sgs-iii)

# winforms - 使用设计器创建的 Comboboxcolumn

> ID：10657095
> 
> 赞同：0
> 
> 时间：2012-05-18T17:25:26.753
> 
> 标签：winforms, data-binding, entity-framework-4, datagridview

这是我第一次尝试在数据网格视图（WinForms、C#、EF4）中使用组合框列。在设计器中，我创建了一个 datagridview 来显示订单表，并在 datagrid 内部创建了一个组合框列来显示客户表中的客户名称，该列现在具有以下属性：

*数据：*

> DataPropertyName：**CustomerID**
> DataSorce：**customerBindingSource**
> DisplayMember：**CompanyName**
> ValueMember：**CustomerID**

*设计：*

> （名称）：**Cbo**
> ColumnType：**DataGridViewComboBoxColumn**

然后我输入了下一个代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    nw = new NorthwindEntities();
    testBindingSource.DataSource = nw.Orders;
} 
```

运行项目时，收到错误消息：“datagridviewcombocell 不是有效值”。请问这方面有什么建议吗，有什么遗漏吗？

# java - 如何从 AccountManager.getAccounts() 获取与特定帐户关联的图标

> ID：10657096
> 
> 赞同：10
> 
> 时间：2012-05-18T17:25:27.850
> 
> 标签：java, android, icons, user-accounts, accountmanager

每个帐户的帐户设置中都会显示一个图标。Google 帐户有一个图标，Facebook 有另一个。

有没有办法从应用程序的代码中获取这个图标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T15:37:51.867

最后，我解决了它：

```
 private Drawable getIconForAccount(Account account, AccountManager manager) {
        AuthenticatorDescription[] descriptions =  manager.getAuthenticatorTypes();
        PackageManager pm = getContext().getPackageManager();
        for (AuthenticatorDescription description: descriptions) {
            if (description.type.equals(account.type)) {
                return pm.getDrawable(description.packageName, description.iconId, null); 
            }
        }
        return null;
    } 
```

# java - 运行 processbuilder 并进入并输出

> ID：10657097
> 
> 赞同：1
> 
> 时间：2012-05-18T17:25:28.350
> 
> 标签：java, jar, runtime.exec, processbuilder

我试图让我的程序启动 Enchanter 到 SSH 到我的服务器，但似乎无法弄清楚如何进入和输出到`stdin`and`stdout`或任何地方。我只是在 Netbeans 中得到一个空白的输出窗口。如何让 Jar 运行并获取输入/输出？

```
public class openShell {

public void openShell() throws IOException {
        String line; 
        Scanner scan = new Scanner(System.in);  
        ProcessBuilder builder = new ProcessBuilder ("C:\\Program Files\\Java\\lib\\enchanter-beanshell-0.6.jar", "myscript.bsh"); 
        builder.redirectErrorStream(true); 
        Process process = builder.start();  
        OutputStream stdin = process.getOutputStream (); 
        InputStream stderr = process.getErrorStream (); 
        InputStream stdout = process.getInputStream ();  
        BufferedReader reader = new BufferedReader (new InputStreamReader(stdout)); 
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));  

        while (scan.hasNext()) { 
        String input = scan.nextLine(); 
        if (input.trim().equals("exit")) { 
            // Putting 'exit' amongst the echo --EOF--s below doesn't work. 
            writer.write("exit\n"); 
        } else { 
            writer.write("((" + input + ") && echo --EOF--) || echo --EOF--\n"); 
        } 
        writer.flush(); 

        line = reader.readLine(); 
        while (line != null && ! line.trim().equals("--EOF--")) { 
            System.out.println ("Stdout: " + line); 
            line = reader.readLine(); 
        } 
        if (line == null) { 
            break; 
        } 
    } 
}
}

private void LaunchButtonActionPerformed(ActionEvent evt) {
   //openShell open = new openShell();     //RUNS BUT NO IN OR OUTPUT

   //BELOW CODE IS FOR TESTING, JUST TRYING TO GET PROCESSBUILDER TO CONNECT 
   // TO MY JAR
   try {
      ProcessBuilder builder = new ProcessBuilder(
         "Java -jar C:\\Program Files\\Java\\lib\\enchanter-beanshell-0.6.jar"); 
      builder.redirectErrorStream(true); 
      Process process = builder.start();
   } catch (IOException ex) {
       Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T12:13:56.840

该方法`ProcessBuilder.inheritIO`将在您的标准输入、标准输出和标准错误中重定向您的命令流。这适用于 Java 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:38:30.740

```
String[] args = {
  "java", 
  "-jar", 
  "C:\\Program Files\\Java\\lib\\enchanter-beanshell-0.6.jar"
};
ProcessBuilder builder = new ProcessBuilder(args); 
```

从分解上述论点开始。然后实施[When Runtime.exec() won't](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)的所有建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:35:22.830

这些方法将获得您可以读取和写入的流`Process.getInputStream`。`Process.getOutputStream`

# c# - 使用地图坐标确定点是否在矩形中

> ID：10657098
> 
> 赞同：2
> 
> 时间：2012-05-18T17:25:28.827
> 
> 标签：c#, geography

我的大脑今天不工作了。我需要测试一个点（纬度，经度）是否位于地图上的一个矩形内。矩形由它的北、东、南和西边界定义。打嗝是所有点或值都在地图坐标系中。为了处理日期线环绕，我假设如果我们从左到右，经度总是“介于”之间。

```
bool PointInRectangle(Point pt, double North, double East, double South, double West)
{
    // ????
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:39:12.650

假设东和北为正：

```
bool PointInRectangle(Point pt, double North, double East, double South, double West)
{
    // you may want to check that the point is a valid coordinate
    if (West < East)
    {
        return pt.X < East && pt.X > West && pt.Y < North && pt.Y > South;
    }

    // it crosses the date line
    return (pt.X < East || pt.X > West) && pt.Y < North && pt.Y > South;        
} 
```

# javascript - getelementsbytagname 上的 Javascript 错误

> ID：10657100
> 
> 赞同：0
> 
> 时间：2012-05-18T17:25:32.980
> 
> 标签：javascript, arrays, undefined, getelementsbytagname

```
for(x in tr)
{
    var td = tr[x].getElementsByTagName('td');
    if(isNaN((bids=parseInt(td[2].innerHTML))))bids=0;
} 
```

循环仅适用于第一次迭代，但在第二次迭代中我收到错误 td[2] 未定义，而每行（tr）包含八个 8 列（td）。超过 50 Tr。

我已经尝试了很多，但很混乱。这不应该是一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:33:44.350

如果`tr`不是，则它有可能在循环`Object`中拾取其他属性。`for...in`如果是这种情况，`.getElementsByTagName`将不存在并且会抛出异常。

如果`tr`是`Array`，您应该改用常规`for`循环。

相关：[为什么在数组迭代中使用“for...in”是个坏主意？](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:33:17.623

我的猜测是您通过不检查`for in`循环来访问 tr 的无意属性。

尝试：

```
for(x in tr)
{
    if(tr.hasOwnProperty(x)){
        var td = tr[x].getElementsByTagName('td');
        if(isNaN((bids=parseInt(td[2].innerHTML))))bids=0;
    }
} 
```

要快速解释原因，请考虑以下内容：`"toString" in tr`将返回 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:45:33.740

正如 Dasarp 所说，简单地更改您的代码。

```
for(x in tr)
{
    var td = x.getElementsByTagName('td');
    if(isNaN((bids=parseInt(td[2].innerHTML))))bids=0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:29:51.663

当您遇到此类错误时，使用 Web Inspector (Chrome/Safari) 或 Firebug (Firefox) 查看您的变量会很有用。在行上放一个调试断点`var td =`，然后查看变量的值。

不过，这可能与`for in`在数组上使用循环有关。将外部循环更改为此，看看它是否有效：

```
for (var x = 0, l = tr.length; x < l; ++x) {
  var td = tr[x].... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T17:35:21.703

抱歉，我在某些行 tr 下发现了一些隐藏列 td。如果显示=无，请检查您的 tr 和 td。

# linux - 补丁对差异文件过于严格

> ID：10657102
> 
> 赞同：0
> 
> 时间：2012-05-18T17:25:38.613
> 
> 标签：linux, ubuntu, diff, gnu, patch

我需要一种自动化的方式来向配置文件中添加一行。我曾经`diff`创建一个我想要应用的 .diff 文件`patch`。但是，我需要修补的文件可能会在其他地方稍作修改。例如，在配置文件的其他地方添加了一些其他行。

我认为这`patch`实际上会很聪明，并确定补丁是否仍然可以在没有冲突的情况下应用，但是每当我尝试将补丁应用到与原始文件略有不同的配置文件时，我都会收到错误消息。

我需要传递任何其他标志`patch`或`diff`使其不那么严格吗？我正在使用生成 .diff 文件

```
diff -ruN oldfile.conf newfile.conf > mypatch.diff 
```

然后使用

```
patch myconfig.conf mypatch.diff 
```

我想要的是补丁会尝试相当自由地应用补丁，如果它不知道如何，只返回一个警告，而不是一个错误。目前我看到这些错误：

```
jeroen@jeroen-ubuntu:~/Desktop$ diff -ruN default.conf default_new.conf > mypatch.diff
jeroen@jeroen-ubuntu:~/Desktop$ patch default2.conf mypatch.diff 
patching file default2.conf
Hunk #1 FAILED at 28.
1 out of 1 hunk FAILED -- saving rejects to file default2.conf.rej
jeroen@jeroen-ubuntu:~/Desktop$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:53:09.430

> 我认为补丁实际上对此很聪明，并确定补丁是否仍然可以在没有冲突的情况下应用，但是每当我尝试将补丁应用于与原始文件略有不同的配置文件时，我都会收到错误消息。

实际上，这成立。但是，这在很大程度上取决于您对“略有不同”的定义。基本上，改动需要远离补丁修改的地方。

您可以尝试使用`-F`参数调用补丁

> -F num 或 --fuzz=num
> 
> 设置最大模糊因子。此选项仅适用于具有上下文的差异，并导致补丁在寻找安装大块的位置时忽略最多多行上下文。请注意，较大的模糊因子会增加错误补丁的几率。默认的模糊因子是 2。一个大于或等于上下文差异中上下文行数的模糊因子，通常是 3，会忽略所有上下文。

但我不建议这样做。

如果你只想

> 一种将行添加到配置文件的自动化方法

你考虑过使用`perl`，`awk`还是`ed`为了工作？我认为这不是`patch`正确的工具。

# php - 如何进行http请求然后检索令牌？

> ID：10657103
> 
> 赞同：0
> 
> 时间：2012-05-18T17:25:40.137
> 
> 标签：php, facebook-graph-api

我正在开发一个 facebook 应用程序，所以我需要做一个 http 请求：

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

得到这样的字符串：

```
token=AAABz7kfdgXPwmgBANKZCctdZCPdfgfgcRJ0ONpQr8cWr336dfZDZD&expires=5168309 
```

然后我需要检索令牌：

```
AAABz7kfdgXPwmgBANKZCctdZCPdfgfgcRJ0ONpQr8cWr336dfZDZD 
```

我必须用什么来做到这一点？卷曲库？还是有最简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:29:05.113

你真的不应该像那样重新发明轮子。而是使用现有的 PHP SDK：

*   [https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)
*   [https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:29:29.877

而已 ！

```
function getAccessTok($code){
    if($code !== null){
        $urlTok = $urlGraphFB.'oauth/access_token';
        $urlTok .= '?client_id='.$appID;
        $urlTok .= '&redirect_uri='.$redirect_uri;
        $urlTok .= '&client_secret='.$_appSECRET;
        $urlTok .= '&code='.$code;

        $fileacctok = parse_str(file_get_contents($urlTok));
        return $fileacctok;
    }
} 
```

# php - 如何使用 PHP、PDO、MySQL 检查列是否不存在？

> ID：10657104
> 
> 赞同：4
> 
> 时间：2012-05-18T17:25:41.900
> 
> 标签：php, mysql, pdo

在我的应用程序中，我有一个适用于多个用户的通用查询。在某些情况下，用户之间的表结构可能不同。我有一个查询，我只想将其应用于表中存在该列的用户。

```
function get_item($user_id) {

    global $dbh;

    $sth = $dbh->query ("SELECT item_type FROM items WHERE user_id = '$user_id'");

    $row = $sth->fetch();

    $item_type = $row['item_type'];

    return $item_type;

} 
```

如果我的表中不存在列“item_type”，我想忽略它，并将 $item_type 变量设置为 NULL。

对于这些用户，我在查询代码行中收到错误：

> 致命错误：未捕获的异常“PDOException”和消息“SQLSTATE [42S22]：找不到列：1054 /item_display.php:5 中的“字段列表”中的未知列“item_type”

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T17:35:15.837

我不知道它是否对你有帮助，但你可以试试这个：

```
if (count($dbh->query("SHOW COLUMNS FROM `items` LIKE 'item_type'")->fetchAll())) {
    $sth = $dbh->query ("SELECT item_type FROM items WHERE user_id = '$user_id'");
    $row = $sth->fetch();
    $item_type = $row['item_type'];
} else {
    $item_type = null;
} 
```

它检查列是否存在并执行任务。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T18:45:19.320

使用[SHOW COLUMNS](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)查询：

```
SHOW COLUMNS FROM <table> WHERE Field = '<column>' 
```

如果返回一行，则该列存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T17:48:56.463

您还可以让 PDO 抛出异常并捕获这些异常以解析 MySQL 错误。

```
/**
 * Enable PDO exceptions.
 * @see http://php.net/pdo.setattribute.php
 */
$pdoObject->setAttribute ( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

try
{
    $pdoStatement->execute();
}
catch( PDOException $e )
{
    switch( $e->errorInfo[1] )
    {
        case 1062:
            /* A PRIMARY or UNIQUE key is already assigned */
            return false;
        case 1054:
            /* Column not found */
            return false;
        default:
            /* some other PDO-error */
            log_error($e->getMessage(), 'mysql');
            return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T04:53:21.723

希望这会有所帮助。你可以用 PHP Mysql 做一些事情

```
<?php

$link = mysql_connect($server, $username,$password);

if(!link))  
{  
    exit('could not connect');  
}

if(!mysql_select_db($database))
{  
    exit('could not select the database');  
}
$sql="SELECT * FROM myrow WHERE mycolumn='".$columname."'";
$result=mysql_query($sql);
if(!$result){
if(mysql_errno($link)==1054){
            //column does not exist
    echo "<br />available";
    }
}
elseif($nr= mysql_num_rows($result)){
    if ($nr > 0){
                    //column exist
        die('<br />name exists');
    }
}
else
{
            //column does not exist
    echo "<br />available";
}
?> 
```

# google-app-engine - 谷歌应用引擎传出流量费用

> ID：10657105
> 
> 赞同：0
> 
> 时间：2012-05-18T17:25:47.430
> 
> 标签：google-app-engine, traffic

我对在 GAE 项目中超出流量成本有点困惑。请参阅：[https ://developers.google.com/storage/docs/pricingandterms](https://developers.google.com/storage/docs/pricingandterms)

因此，如果您使用 GAE 传出流量，则始终花费 0.12 美元。但是，如果使用谷歌云存储服务，您在向亚洲发送数据时会获得更高的成本（0.21 美元）。这是为什么？

所以这基本上意味着，如果我通过我的 GAE 应用程序向亚洲发送 100GB 的数据，我将花费 12 美元，但如果我将我的数据发布到公共云存储桶中，同样的 100GB 传输将花费 21 美元。还是我在这里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:20:04.250

你是对的。

为了节省每月成本（不是开发成本），您可以从您的 GAE 实例中提供您的内容。您基本上可以在 GAE 中使用中继功能来提供云存储中的内容。是否值 0.10 美元/GB，只有您根据您的流量需求才知道。

[https://developers.google.com/appengine/docs/python/googlestorage/](https://developers.google.com/appengine/docs/python/googlestorage/)

# html - ul#menu 与 #menu？

> ID：10657106
> 
> 赞同：3
> 
> 时间：2012-05-18T17:25:56.597
> 
> 标签：html, css, css-selectors

**HTML**：

```
<ul id="menu">
    <li><a href="" class="active">Portfolio</a></li>
    <li><a href="">Services</a></li>
    <li><a href="">About</a></li>
    <li><a href="">Testimonials</a></li>
    <li><a href="">Request a Quote</a></li>
</ul> 
```

**CSS**：

```
ul#menu li {
    display:inline;
    margin-left:12px;
} 
```

`ul#menu li`使用“ ”和只使用“”有区别`#menu li`吗？我使用了这两个版本，它们似乎完成了同样的事情。大多数教程使用在 id 之前添加“ul”是否有原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T17:32:22.490

有一个明显的区别，还有一个更细微的区别。

明显的区别是`#menu`针对具有 ID 的所有元素`#menu`，而`ul#menu`仅针对`ul`元素。如果只`#menu`为`ul`元素提供 ID，则选择器将始终具有相同的结果。

与称为特异性的东西有一个潜在的差异。这是一种确定在发生冲突时使用哪个规则的方法。所以如果你有这两个规则：

```
#menu li {color: blue;}
ul#menu li {color: red;} 
```

第二条规则将获胜，因为它更具体，并且文本将是红色的。特异性规则很复杂，并不总是直观的，但在这种情况下，简单的结果是`ul#menu li`比`#menu li`. 如果您只有一个样式表，这对您来说不太可能成为问题。如果您有多个样式表，那么弄清楚为什么忽略某个规则可能会令人困惑；特异性往往是答案。

至于为什么大多数教程使用`ul#menu`，我不知道。（事实上​​，我只有你的断言作为他们这样做的证据！）我的猜测是，为了白痴读者，他们正在使事情变得非常明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:28:03.493

对于这些特定元素，呈现的结果不会有所不同。

但是，`ul#menu li`更具体，因为它针对`li`具有父 id`#menu`和 type的所有类型元素`ul`。

*   想象一下像 UL > #MENU > LI 这样的选择器

`#menu li``li`仅针对具有父 id类型的所有元素`#menu`。

*   想象一下像 #MENU > LI 这样的选择器

对于大多数目的，他们会做完全相同的事情。`#menu li`不应对页面上的其他元素产生任何影响，因为 id 是特定的，因此，正如下面评论中所建议的，它是不必要的。因此，我会坚持`#menu li`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T17:31:53.273

区别在于特异性。更具体`ul#menu`，并认为规则所针对的元素必须是`<ul>`具有菜单 ID 的元素。假设您将您的更改`<ul>`为`<div>`具有菜单 ID 的菜单，它不起作用（不更改您的 css）。此外，如果您使用 just 定义某些内容，`#menu`则可以通过使用 使规则更具体来添加覆盖`ul#menu`。您可以在此处阅读更多信息：[选择器特异性之战](http://3nhanced.com/css/battle-of-the-selectors-specificity/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:34:25.233

两者之间的特异性差异通常不会产生影响，但我们可以想到会产生影响的情况。

如果您`<div id="menu"></div>`在一个页面和`<ul id="menu"></ul>`另一个页面上都有，并且您在两者中使用相同的 CSS 文件怎么办？我并不是说这将是一个好的设计决策，但在这种情况下，`ul#menu`和之间的区别`#menu`很重要。您希望 CSS 应用于所有带有 的元素`id="menu"`还是仅适用于带有 的`ul`元素`id="menu"`？这就是区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T17:35:36.420

我想给出与@jacktheripper 相同的答案，但想添加以下内容：

是的，`ul#menu li`更具体，但它也需要更多的解析时间，因为 CSS 从右到左读取选择器。所以它挑选出所有元素`#menu`，然后收集所有`UL`-lists 并从中选择包含先前找到的`#menu`.

这在使用长链选择器时会产生更大的不同：（`#mainmenu ul.menu li.current ul li.current`而不是可能`#mainmenu .current .current`）。

# ios - iOS UIImage 从 NSURL 下载后返回 null

> ID：10657110
> 
> 赞同：0
> 
> 时间：2012-05-18T17:26:16.337
> 
> 标签：ios, for-loop, uiimage, nsdata, nsurl

我有一个循环遍历一组 url，然后从这些 url 中保存图像。这一切都可以正常工作，直到最后一个返回空图像的图像。我已验证该 url 是正确的，并在我在网络浏览器中访问它时显示图像。我不确定我要去哪里错了。

这是循环：

```
-(void) downloadImages {
NSString *filePath;

NSLog(@"About to start loop");
for (int i = 0; i < urls.count; i++) {
    NSLog(@"Downloading: %@", [names objectAtIndex:i]);

    UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@", [urls objectAtIndex:i]]]]];

    filePath = [NSString stringWithFormat:@"%@/images/%@.png", [[MakeAMemeIAPHelper sharedHelper] getDocumentsFolder], [names objectAtIndex:i]];
    NSLog(@"Saving: %@", [names objectAtIndex:i]);

    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image)];
    [imageData writeToFile:filePath atomically:YES];

    progress += 0.1;
    [self updateProgress];
}
NSLog(@"Done with loop");
} 
```

# javascript - 自动聚焦于具有默认值的字段

> ID：10657113
> 
> 赞同：0
> 
> 时间：2012-05-18T17:26:28.887
> 
> 标签：javascript, html, autofocus

我遇到的问题是我在字段“0.00”中有一个默认值，它向用户显示有效的格式。我可以使用占位符，但在自动对焦时会消失。默认值也由 javascript 控制。

当页面加载时，自动对焦会在瞬间处于活动状态，然后将默认值放入字段中，自动对焦消失。那么有没有办法：

a）对具有值的字段强制自动对焦或b）在加载所有内容（包括javascript）后强制自动对焦生效？

我已经尝试过常规`<input id="field" autofocus="autofocus" value="{{code}} />`和`document.getElementById("field").focus();`.

编辑：

好的。所以这是我自己的错。我以为我的面具js是罪魁祸首，然后开始思考，默认值出现，自动对焦光标出现，然后在页面完全加载时消失。因此，按照这个顺序，除了遮罩 js 之外的其他东西会导致自动对焦消失。所以我发现，因为我也在使用 jquery 表单向导，并且它设置为 focusFirstInput:true，所以它正在删除我的 HTML5 自动对焦并将其附加到第一个输入，这是一个禁用的字段。

修复了问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:07:03.190

好的。所以这是我自己的错。我以为我的面具js是罪魁祸首，然后开始思考，默认值出现，自动对焦光标出现，然后在页面完全加载时消失。因此，按照这个顺序，除了遮罩 js 之外的其他东西会导致自动对焦消失。所以我发现，因为我也在使用 jquery 表单向导，并且它设置为 focusFirstInput:true，所以它正在删除我的 HTML5 自动对焦并将其附加到第一个输入，这是一个禁用的字段。

修复了问题。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:45:26.230

如果您关注表单输入，则内容应该清晰。这样，用户无需删除原始值即可开始输入。

您的解决方案 a) 不会`autofocus`用于应该向用户显示值格式的表单字段。或者 b) 使用单独的标签来显示所需的值，并使用 HTML5 或 JS 检查是否允许插入的值。

# c# - 使用 CompilerParameters 引用当前程序集

> ID：10657117
> 
> 赞同：11
> 
> 时间：2012-05-18T17:27:01.157
> 
> 标签：c#, reflection, scripting

现在我正在开发一个项目，团队想要一种无需重新编译整个项目即可编写和编辑代码的方法，因此我决定尝试实现一个脚本引擎。

在将 Lua 实现到 C++ 之前，我并不是一个将脚本功能实现到项目中的新手。但是，我们想尝试使用 Microsoft.CSharp 命名空间以及已经内置到 C# 中的 System.Reflection 来实现直接的 C#。

因此，听到这个消息后，我在文档中翻了一下，我想出了一个几乎可以工作的原型——但并不完全正确。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.CSharp;
using System.CodeDom.Compiler;
using System.Reflection;

namespace Scripting
{
    class Program
    {
        static void Main(string[] args)
        {
            StringBuilder builder = new StringBuilder();
            builder.Append("using System;");
            builder.Append("using Scripting;");
            builder.Append("class MyScript : IScript");
            builder.Append("{");
            builder.Append("    string ScriptName");
            builder.Append("    {");
            builder.Append("        get { return \"My Script\"; }");
            builder.Append("    }");

            builder.Append("    public bool Initialize()");
            builder.Append("    {");
            builder.Append("        Console.WriteLine(\"Hello, World!\");");
            builder.Append("        return true;");
            builder.Append("    }");
            builder.Append("}");

            CSharpCodeProvider provider = new CSharpCodeProvider();
            CompilerParameters param = new CompilerParameters(new string[] { "System.dll", "Scripting.dll" });
            param.GenerateInMemory = true;
            param.GenerateExecutable = true;
            CompilerResults result = provider.CompileAssemblyFromSource(param, builder.ToString());
            if (result.Errors.Count > 0)
            {
                foreach (CompilerError error in result.Errors)
                    Console.WriteLine(error);
                Console.ReadKey();
                return;
            }
        }
    }
} 
```

我目前遇到的问题是我希望能够引用我的接口 - IScript.cs（它位于 Scripting 命名空间内，因此位于当前程序集内） - 以便在编译器中编写和解析的脚本可以访问它。显然，我添加了 Scripting.dll 作为参数，但由于某种原因，它似乎无法访问。我*在*调试中运行它，所以这可能会导致一些主要的面部手掌。做什么？

有没有办法引用当前程序集并将其传递给 CompilerParameters？还是我被彻底搞砸了/我应该依赖为脚本对象/等创建程序集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:28:29.340

它可能在错误的目录中查找。

通过`typeof(Program).Assembly.CodeBase`以传递完整路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-27T12:34:26.920

您可以获取可执行文件并将其传递给 CompilerParameters：

```
 string exeName = Assembly.GetEntryAssembly().Location;      
       param.ReferencedAssemblies.Add(exeName); 
```

# html - 在 HTML 页面上从一个 div 到另一个 div 画线

> ID：10657119
> 
> 赞同：1
> 
> 时间：2012-05-18T17:27:11.953
> 
> 标签：html, css

我希望能够在网页上从一个 div 到另一个 div 画线。我环顾四周，但我所看到的都是像[这样](http://jsfiddle.net/rudiedirkx/MKkxX/)旋转 webkit 图像的黑客。Raphel.js 是另一种可能性，但如果可以的话，我宁愿避免导入整个库。我还需要确保它适用于所有浏览器。

这是可能的，还是我不在我的摇杆上？

更新：我试过拉斐尔，没有骰子。创建对象会覆盖我目前拥有的。代码（以防我做错了）：

```
window.onload = function() {
        var paper = new Raphael(document.getElementById('image'), 1024, 768);/*
        var line = paper.path("M 250 250 l 0 -50 l -50 0 l 0 -50 l -50 0 l 0 50 l -50 0 l 0 50 z");
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:51:25.117

虽然我找不到没有框架的方法来做到这一点，但我确实在[jsPlumb](http://jsplumb.org)中找到了一个跨浏览器的解决方案。（感谢 jeffery_the_wind）

# c++ - cpp - 标准平均值

> ID：10657121
> 
> 赞同：-4
> 
> 时间：2012-05-18T17:27:14.947
> 
> 标签：c++, average

有没有更好的方法来计算两次双打的平均值？我该如何改进/纠正下面的代码？

```
double original_one, original_two; // can be any double >= 0 
double used_one = original_one;
double used_two = original_two;
if ( original_one == 0 ) used_one = 1;
if ( original_two == 0 ) used_two = 1;
double average = used_one * used_two / 2;    // average! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:32:05.710

两个数字的算术平均值是通过将它们相加并除以二来计算的...

```
double average = (original_one + original_two) / 2; 
```

这是计算平均值的一种方法，还有几种方法，但这是最常见的。

# unity3d - 寻找线段-矩形交点

> ID：10657128
> 
> 赞同：4
> 
> 时间：2012-05-18T17:27:50.493
> 
> 标签：unity3d, geometry, intersection, unityscript

简单地说，我有：

*   一个视口矩形，其中 (0,0) 是左下角，(1,1) 是右上角，(0.5,0.5) 是屏幕中心。
*   矩形外的点 (a,b)。

这是在视口坐标中，所以 +X 是正确的，+Y 在屏幕上。

我需要一个函数，它接受这些参数并返回矩形边缘上的点，线（在矩形中心 (0.5,0.5) 和点 (a,b) 之间）与它相交。

我知道如何在给定坐标的纸上做到这一点，但是当它归结为代码时我无法弄清楚。此外，我意识到这样的问题已经在不同的线程中得到解决——但我在任何地方都找不到简单的输入到输出函数。

我在 Unity3D 引擎中执行此操作，因此最好使用 Javascript，但任何语言或伪代码都会有很大帮助，因为我可能可以手动转换它。

**编辑** 为了澄清，我正在寻找类似的东西：

```
function IntersectFromViewportCenter(x : float, y : float) {
    ...
    return Point(x1, y1);
} 
```

其中 (x,y) 是圆外的点， (x1,y1) 是交点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:33:46.327

将所有系统移动到点 (0,0) 的中心。计算从原点到（移动）点 (x',y') 的光线与框 (-1,-1)-(1,1) 的交点。缩放并向后移动。我没有考虑盒子内有点的琐碎案例（需要吗？）

```
x = x - 0.5
y = y - 0.5
if Abs(x) >= Abs(y) then  //vertical box edge
  y1 = y/x  //care with case both y and x = 0
  x1 = Sign(x) //+-1
else   // horizontal edge
  x1 = x/y
  y1 = Sign(y)

x1 = 0.5*x1 + 0.5
y1 = 0.5*y1 + 0.5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-08T23:34:43.793

由于已经提供了一些通用的 Line/Rect 方法，这里有一种方法经过优化，可以避免在微不足道的情况下（完全在 Rect 内部或完全在 Rect 之外）发生光线投射：[https ://gist.github.com/JohannesMP/50dad3175bf2925df508b642091e41c4](https://gist.github.com/JohannesMP/50dad3175bf2925df508b642091e41c4)

它还有效地提供了入口和出口点（在我的用例中是必需的）： [![在此处输入图像描述](../Images/acb86ed6c4d9582d5c4ffc8619c3428d.png)](https://i.stack.imgur.com/6TkjU.gif)

以下是此方法的基本概述：

1.  将矩形周围的区域划分为扇区，如下所示（其中 S4 是矩形本身）：

    ```
    S0| S1 |S2
    --+----+--   ^
    S3| S4 |S5   |
    --+----+--   y
    S6| S7 |S8    x--> 
    ```

2.  给定线段开始和结束的扇区，我们知道需要执行哪些光线投射（例如：S0-S2 不需要光线投射，而 S4-S1 只需要光线投射顶部边缘等）

3.  预先计算此数据并将其存储在一个小的 9x9 静态数组中。我们基本上使用了一些静态内存来避免条件检查。
4.  在运行时找到线的起点和终点所占据的 Sector，并使用结果仅对 Rect 的必要边缘进行 Raycast。

此外，如果您分别处理垂直线和水平线，您可以将光线投射简化为一维。

* * *

在我的个人用例中（很多线段，其中绝大多数完全在 Rect 内部或完全外部）这种方法比一般情况更快，因为仅在必要时执行 Raycast。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T23:29:28.933

MBo 的想法是正确的。这是在 Unity 中实现的一种方法。我认为 UnityScript 不值得使用——尤其是它不支持扩展方法——所以你真的应该切换语言。（另外，Unity 实际上并没有命名为 Unity3D。）

这个脚本可以在项目中的任何地方：

```
using UnityEngine;

public static class UnityEngineExtensions {

public static Vector2 Abs(this Vector2 vector) {
    for (int i = 0; i < 2; ++i) vector[i] = Mathf.Abs(vector[i]);
    return vector;
}   

public static Vector2 DividedBy(this Vector2 vector, Vector2 divisor) {
    for (int i = 0; i < 2; ++i) vector[i] /= divisor[i];
    return vector;
}

public static Vector2 Max(this Rect rect) {
    return new Vector2(rect.xMax, rect.yMax);
}

public static Vector2 IntersectionWithRayFromCenter(this Rect rect, Vector2 pointOnRay) {
    Vector2 pointOnRay_local = pointOnRay - rect.center;
    Vector2 edgeToRayRatios = (rect.Max() - rect.center).DividedBy(pointOnRay_local.Abs());
    return (edgeToRayRatios.x < edgeToRayRatios.y) ?
        new Vector2(pointOnRay_local.x > 0 ? rect.xMax : rect.xMin, 
            pointOnRay_local.y * edgeToRayRatios.x + rect.center.y) :
        new Vector2(pointOnRay_local.x * edgeToRayRatios.y + rect.center.x, 
            pointOnRay_local.y > 0 ? rect.yMax : rect.yMin);
}

} 
```

将此其他脚本附加到游戏对象，并在检查器中设置其变量。

```
#pragma warning disable 0649
using System;
using UnityEngine;

public class VisualizeRectIntersectionWithRayFromCenter : MonoBehaviour {

[SerializeField] Rect rect;
[SerializeField] Vector2 point;

[Serializable] class Colors {
    public Color rect, point, intersection;
} [SerializeField] Colors colors;

void OnDrawGizmos() {
    Gizmos.color = colors.rect;
    Vector2[] corners = {new Vector2(rect.xMin, rect.yMin), new Vector2(rect.xMin, rect.yMax),
        rect.Max(), new Vector2(rect.xMax, rect.yMin)};
    int i = 0;
    while (i < 3) Gizmos.DrawLine(corners[i], corners[++i]);
    Gizmos.DrawLine(corners[3], corners[0]);

    Gizmos.color = colors.point;
    Gizmos.DrawLine(rect.center, point);

    Gizmos.color = colors.intersection;
    Gizmos.DrawLine(rect.center, rect.IntersectionWithRayFromCenter(pointOnRay: point));
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-13T10:47:15.413

@chakmeshma，您的解决方案几乎是正确的，但您还必须检查交点是否在矩形内以避免边界情况：

```
private static bool LineRectIntersection(Vector2 lineStartPoint, Vector2 lineEndPoint, Rect rectangle, ref Vector2 result)
    {
        Vector2 minXLinePoint = lineStartPoint.x <= lineEndPoint.x ? lineStartPoint : lineEndPoint;
        Vector2 maxXLinePoint = lineStartPoint.x <= lineEndPoint.x ? lineEndPoint : lineStartPoint;
        Vector2 minYLinePoint = lineStartPoint.y <= lineEndPoint.y ? lineStartPoint : lineEndPoint;
        Vector2 maxYLinePoint = lineStartPoint.y <= lineEndPoint.y ? lineEndPoint : lineStartPoint;

        double rectMaxX = rectangle.xMax;
        double rectMinX = rectangle.xMin;
        double rectMaxY = rectangle.yMax;
        double rectMinY = rectangle.yMin;

        if (minXLinePoint.x <= rectMaxX && rectMaxX <= maxXLinePoint.x)
        {
            double m = (maxXLinePoint.y - minXLinePoint.y) / (maxXLinePoint.x - minXLinePoint.x);

            double intersectionY = ((rectMaxX - minXLinePoint.x) * m) + minXLinePoint.y;

            if (minYLinePoint.y <= intersectionY && intersectionY <= maxYLinePoint.y
                && rectMinY <= intersectionY && intersectionY <= rectMaxY)
            {
                result = new Vector2((float)rectMaxX, (float)intersectionY);

                return true;
            }
        }

        if (minXLinePoint.x <= rectMinX && rectMinX <= maxXLinePoint.x)
        {
            double m = (maxXLinePoint.y - minXLinePoint.y) / (maxXLinePoint.x - minXLinePoint.x);

            double intersectionY = ((rectMinX - minXLinePoint.x) * m) + minXLinePoint.y;

            if (minYLinePoint.y <= intersectionY && intersectionY <= maxYLinePoint.y
                && rectMinY <= intersectionY && intersectionY <= rectMaxY)
            {
                result = new Vector2((float)rectMinX, (float)intersectionY);

                return true;
            }
        }

        if (minYLinePoint.y <= rectMaxY && rectMaxY <= maxYLinePoint.y)
        {
            double rm = (maxYLinePoint.x - minYLinePoint.x) / (maxYLinePoint.y - minYLinePoint.y);

            double intersectionX = ((rectMaxY - minYLinePoint.y) * rm) + minYLinePoint.x;

            if (minXLinePoint.x <= intersectionX && intersectionX <= maxXLinePoint.x
                && rectMinX <= intersectionX && intersectionX <= rectMaxX)
            {
                result = new Vector2((float)intersectionX, (float)rectMaxY);

                return true;
            }
        }

        if (minYLinePoint.y <= rectMinY && rectMinY <= maxYLinePoint.y)
        {
            double rm = (maxYLinePoint.x - minYLinePoint.x) / (maxYLinePoint.y - minYLinePoint.y);

            double intersectionX = ((rectMinY - minYLinePoint.y) * rm) + minYLinePoint.x;

            if (minXLinePoint.x <= intersectionX && intersectionX <= maxXLinePoint.x
                && rectMinX <= intersectionX && intersectionX <= rectMaxX)
            {
                result = new Vector2((float)intersectionX, (float)rectMinY);

                return true;
            }
        }

        return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-14T17:16:32.807

```
bool LineRectIntersection(Vector2 lineStartPoint, Vector2 lineEndPoint, Rect rectangle, ref double resultX, ref double resultY)
{
    Vector2 minXLinePoint = (lineStartPoint.x <= lineEndPoint.x) ? (lineStartPoint) : (lineEndPoint);
    Vector2 maxXLinePoint = (lineStartPoint.x <= lineEndPoint.x) ? (lineEndPoint) : (lineStartPoint);
    Vector2 minYLinePoint = (lineStartPoint.y <= lineEndPoint.y) ? (lineStartPoint) : (lineEndPoint);
    Vector2 maxYLinePoint = (lineStartPoint.y <= lineEndPoint.y) ? (lineEndPoint) : (lineStartPoint);

    double rectMaxX = rectangle.xMax;
    double rectMinX = rectangle.xMin;
    double rectMaxY = rectangle.yMax;
    double rectMinY = rectangle.yMin;

    if (minXLinePoint.x <= rectMaxX && rectMaxX <= maxXLinePoint.x)
    {
        double m = (maxXLinePoint.y - minXLinePoint.y) / (maxXLinePoint.x - minXLinePoint.x);

        double intersectionY = ((rectMaxX - ((double)minXLinePoint.x)) * m) + ((double)minXLinePoint.y);

        if(minYLinePoint.y <= intersectionY && intersectionY <= maxYLinePoint.y)
        {
            resultX = rectMaxX;
            resultY = intersectionY;

            return true;
        }
    }

    if (minXLinePoint.x <= rectMinX && rectMinX <= maxXLinePoint.x)
    {
        double m = (maxXLinePoint.y - minXLinePoint.y) / (maxXLinePoint.x - minXLinePoint.x);

        double intersectionY = ((rectMinX - ((double)minXLinePoint.x)) * m) + ((double)minXLinePoint.y);

        if (minYLinePoint.y <= intersectionY && intersectionY <= maxYLinePoint.y)
        {
            resultX = rectMinX;
            resultY = intersectionY;

            return true;
        }
    }

    if (minYLinePoint.y <= rectMaxY && rectMaxY <= maxYLinePoint.y)
    {
        double rm = (maxYLinePoint.x - minYLinePoint.x) / (maxYLinePoint.y - minYLinePoint.y);

        double intersectionX = ((rectMaxY - ((double)minYLinePoint.y)) * rm) + ((double)minYLinePoint.x);

        if (minXLinePoint.x <= intersectionX && intersectionX <= maxXLinePoint.x)
        {
            resultX = intersectionX;
            resultY = rectMaxY;

            return true;
        }
    }

    if (minYLinePoint.y <= rectMinY && rectMinY <= maxYLinePoint.y)
    {
        double rm = (maxYLinePoint.x - minYLinePoint.x) / (maxYLinePoint.y - minYLinePoint.y);

        double intersectionX = ((rectMinY - ((double)minYLinePoint.y)) * rm) + ((double)minYLinePoint.x);

        if (minXLinePoint.x <= intersectionX && intersectionX <= maxXLinePoint.x)
        {
            resultX = intersectionX;
            resultY = rectMinY;

            return true;
        }
    }

    return false;
} 
```

# java - 在Java中计算两个日期之间的天数

> ID：10657132
> 
> 赞同：3
> 
> 时间：2012-05-18T17:28:18.217
> 
> 标签：java, date

我有一个格式有 2 个日期的代码

```
DateFormat dateFormat= new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z");
           Date date=new Date();

           DateFormat formatter ; 
           Date publishDate = (Date)dateFormat.parse(pubDate); 
```

我想计算两个日期之间的天数。我不能使用 Joda 包。有什么办法可以得到 2 个日期的日差吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:31:30.227

```
 Date d1 = ..., d2 = ...;
long t1 = d1.getTime(),
   t2 = d2.getTime();
long day = 1000 * 60 * 60 * 24; // milliseconds in a day
return (t1 - t2) / day; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:31:41.397

您可以减去 2 个日期之间的毫秒数，然后除以每天的毫秒数

# grails - Grails：在范围内创建一个带有“跳跃”的选择

> ID：10657136
> 
> 赞同：0
> 
> 时间：2012-05-18T17:28:43.490
> 
> 标签：grails

我想要的是：

```
<select ...>
<option ...>0</option>
<option ...>5</option>
<option ...>10</option>
<option ...>15</option>
...
<option ...>1000</option>
</select> 
```

我知道通过使用 grails 标签`g:select`我可以指定`-from="${0..1000}"`- 但是我在文档上找不到任何关于如何指定“跳转”的信息（不显示选项 1、2、3 等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:27:08.473

您可以使用

```
${(0..1000).step(5)} 
```

# wcf - WCF 异步在本地工作，而不是在 IIS 上

> ID：10657142
> 
> 赞同：0
> 
> 时间：2012-05-18T17:29:19.400
> 
> 标签：wcf, iis

我有一个 Silverlight 应用程序，可以将文件分块上传到 WCF 服务。当我在本地运行服务和 Silverlight 应用程序时，一切正常。当我将它们都部署到 IIS 时，它将适用于小于块大小（在本例中为 16k）的文件，但如果文件大于该文件则会失败。这几乎与此处描述的问题完全相同：http: [//social.msdn.microsoft.com/Forums/en-US/wcf/thread/19329afc-8a73-4756-80cd-bbdada75c0e2](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/19329afc-8a73-4756-80cd-bbdada75c0e2)但那里的解决方案不适用于我，我已经强烈引用了 WCF 代理实例。但在我的例子中，一个异步调用会成功，但多个调用会失败。

这是 web.config 中的 serviceModel 条目：

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false"/>
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <customBinding>
            <binding name="binaryHttpBinding" closeTimeout="00:20:00" openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:20:00">
                <binaryMessageEncoding maxReadPoolSize="2147483647" maxWritePoolSize="2147483647" maxSessionSize="2147483647">
                    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
                </binaryMessageEncoding>
                <httpTransport maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" authenticationScheme="Anonymous" maxBufferSize="2147483647" transferMode="Buffered"/>
            </binding>
        </customBinding>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <services>
        <service name="ADE.Web.IADEFileTransferService" >
            <endpoint address="" binding="customBinding" bindingConfiguration="binaryHttpBinding"
                contract="ADE.Web.ADEFileTransferService" />
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        </service>
    </services>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:12:15.987

您需要在**客户端和服务器端**具有相同的 readerQuotas 设置，即您的 silverlight 配置文件也需要具有相同的设置。

还可以考虑使用 maxItemsInObjectGraph 在 serviceBehaviour 选项卡中添加 dataContractSerializer 元素，如下所示

```
<serviceBehaviors>        
        <behavior name="default">
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
</serviceBehaviors> 
```

您也可以尝试添加 httpRunTime 元素的 maxRequestLength 值，如下所示：

```
<system.web>
    <httpRuntime maxRequestLength ="32768"/>
</system.web> 
```

# c# - 更改属性或添加控件会在 Designer.cs 中消失 suspendlayout() 和 resumelayout()

> ID：10657145
> 
> 赞同：1
> 
> 时间：2012-05-18T17:29:25.343
> 
> 标签：c#, winforms

我在 C# 开发中发现了一个问题。

这里有一些细节。我有一个窗口窗体和两个组控件以及窗体上的几个按钮和文本框。

问题是，一旦我更改了这些控件的任何属性或添加了任何其他控件。.Designer.cs文件中这两个groupcontrol的.suspendlayout()和.resumelayout()会默默消失。

任何人以前见过这类问题，这个问题的任何原因？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:00:08.910

我发现这个问题与第三方控件有关。一旦我注册了许可证，问题就消失了。

# java - K 的 Mapper 和 Reducer 表示 Java 中 Hadoop 中的算法

> ID：10657147
> 
> 赞同：8
> 
> 时间：2012-05-18T17:29:32.307
> 
> 标签：java, algorithm, hadoop

我正在尝试`K means`用语言实现`hadoop-1.0.1`。`java`我现在很沮丧。虽然我得到了完整实现的[github](https://github.com/thomasjungblut/thomasjungblut-common/blob/master/src/de/jungblut/clustering/mapreduce/KMeansClusteringJob.java)`k means`链接，但是作为一个新手`Hadoop`，我想学习它而不复制别人的代码。我有[hadoop](http://hadoop.apache.org/common/docs/current/mapred_tutorial.html)`map`中可用的基本知识和`reduce`功能。有人可以为我提供实施和上课的想法。它需要迭代吗？`k means` `mapper``reducer`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T18:38:52.193

好的，我试着告诉你在 MapReduce 中实现 k-means 时我的想法。这个实现与 Mahout 的不同，主要是因为它展示了算法如何*在*分布式设置中工作（而不是用于实际生产使用）。另外我假设你真的知道 k-means 是如何工作的。

话虽如此，我们必须将整个算法分为三个主要阶段：

1.  职业等级
2.  地图级别
3.  降低级别

**工作级别**

作业级别相当简单，它正在编写输入（Key = 调用的类`ClusterCenter`，Value = 调用的类`VectorWritable`），处理 Hadoop 作业的迭代并读取整个作业的输出。

`VectorWritable`是向量的可序列化实现，在这种情况下来自我自己的数学库，但实际上只是一个简单的双精度数组。

主要`ClusterCenter`是 a `VectorWritable`，但具有中心通常需要的便利功能（例如平均）。

在 k-means 中，您有一些作为初始中心的 k 向量种子集和一些您想要聚类的输入向量。这在 MapReduce 中完全相同，但我将它们写入两个不同的文件。第一个文件只包含向量和一些虚拟键中心，另一个文件包含真正的初始中心（即`cen.seq`）。

将所有内容写入磁盘后，您就可以开始您的第一份工作了。这当然会首先启动一个`Mapper`这是下一个主题。

**地图级别**

在 MapReduce 中，知道什么进来什么出去（就对象而言）总是很聪明的。所以从工作层面我们知道我们有`ClusterCenter`和`VectorWritable`作为输入，而`ClusterCenter`目前只是一个假人。当然，我们希望得到与输出相同的结果，因为 map 阶段是来自普通 k-means 的著名分配步骤。

您正在将您在作业级别创建的真实中心文件读取到内存中，以便在输入向量和中心之间进行比较。因此，您定义了这个距离度量，在映射器中它被硬编码为`ManhattanDistance`. 更具体地说，您在 map 阶段获得部分输入，然后与每个中心进行比较，然后迭代每个输入“键值对”（它是由键和值组成的对或元组） . `ClusterCenter`在这里，您正在跟踪哪个中心是最近的，然后通过将最近的对象连同输入向量本身写入磁盘来将其分配给中心。

然后，您的输出是：n 向量及其分配的中心（作为键）。Hadoop 现在按您的键排序和分组，因此您可以在 reduce 任务中为单个中心获得每个分配的向量。

**减少级别**

如上所述，您将在 reduce 阶段拥有 a`ClusterCenter`及其分配`VectorWritable`的 's。这是您在普通 k-means 中的常用更新步骤。因此，您只需遍历所有向量，将它们相加并取平均值。

现在您有了一个新的“平均值”，您可以将其与之前分配的平均值进行比较。在这里，您可以测量两个中心之间的差异，这告诉我们中心移动了多少。理想情况下，它不会移动并且`converged`.

Hadoop 中的计数器用于跟踪这种收敛，名称有点误导，因为它实际上跟踪有多少中心**没有**收敛到最终点，但我希望你能接受它。

基本上，您现在正在将新中心和所有向量再次写入磁盘以进行下一次迭代。此外，在清理步骤中，您将所有新收集的中心写入地图步骤中使用的路径，因此新迭代具有新向量。

* * *

现在回到作业阶段，现在应该完成 MapReduce 作业。现在我们正在检查该作业的计数器，以获取尚未收敛的中心的数量。此计数器用于 while 循环以确定整个算法是否可以结束。如果不是，请再次返回**Map Level**段落，但使用上一个作业的输出作为输入。

实际上，这就是整个 VooDoo。

出于显而易见的原因，这不应该在生产中使用，因为它的性能很糟糕。最好使用更优化的 Mahout 版本。但出于教育目的，这个算法很好；）

如果您还有任何问题，请随时给我写邮件或发表评论。

# c# - 允许Form1关闭而不关闭C#中的应用程序？

> ID：10657152
> 
> 赞同：1
> 
> 时间：2012-05-18T17:29:52.660
> 
> 标签：c#, visual-c#-express-2010

好的，form1 是我的“介绍”。我需要 form1 关闭和 form2...当它关闭时，整个应用程序关闭。我是新手，所以我不知道如何很好地解释我的问题...如果您有任何问题..请问... :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:40:35.117

当我需要在显示主窗体之前有一个启动屏幕时，我使用的另一个解决方案是使用这个解决方案：

在你的 Program 类的 Main 函数中，你通常有这样的东西：

```
 [STAThread]
    static void Main(string[] ps)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());

    } 
```

Application.Run 将应用程序绑定到表单，以便当表单关闭时，应用程序退出。如果您想在表格 1 之前显示表格 2，您可以这样做：

```
 [STAThread]
    static void Main(string[] ps)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Form1 splash = new Form1();
        splash.ShowDialog();
        Application.Run(new Form2());
    } 
```

这个新代码将显示 form2。关闭form2后，它会显示form1。关闭 Form1 将退出应用程序。

通常 Splash 窗口是在另一个线程中创建的，让主线程加载它需要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:31:07.140

您可以隐藏 From1，而不是关闭。

```
Form1.hide = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:35:06.467

您应该覆盖表单中的 OnClosing 方法...

```
protected override void OnClosing(CancelEventArgs e)
{
     e.Cancel = true;
     this.Hide();
} 
```

# c - 在 c 中实现 bash ，每行包含 { >, <, >> , & , | }

> ID：10657157
> 
> 赞同：0
> 
> 时间：2012-05-18T17:30:28.847
> 
> 标签：c, bash, fork, pipe

我正在为 in 中的`bash`命令实现一个简单的 shell `c` 。

我已经解析了我想要使用的行（我将输入存储`stdin` 到一个`char**`数组中）。现在我要处理以下情况：

```
{ >, <, >> , & , | } 
```

小于，大于，重定向，在后台和管道中运行命令。

如果我想这样做，我试图理解一些事情：

```
someApplication > file 
```

或者

```
someApplication < file 
```

或者

```
someApplication >> file 
```

对实施这些案例有什么好处吗`forking`？（含义，使用`father`&`son`过程）

我看到它的方式，只有当我有一个管道，比如 <code>ls|grep great</code> 时，`fork`才会更有效率，因为一个进程会在目录中显示文件，而另一个进程会显示目录中的文件有人会使用儿子的输入来完成管道的右侧。

谢谢 。

**编辑：**

```
void handleLessThan(char** arguments , int * argumentsCount)
{
    int fd_fork = fork();
    int fd_sourceFile;
    char sourceFile[30];

    if (fd_fork == 0)  // son is running now
    {
        strcpy(arguments[*argumentsCount],sourceFile);
        fd_sourceFile= open(sourceFile, O_RDONLY);
        dup2(fd_sourceFile, 0); .
        execvp(arguments[0],arguments[1]);
    }

    else
    {
        // parent
            ?? 

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:36:29.777

**在 Unix 中创建进程的唯一标准方法是`fork`**.

既然这已经不碍事了，我建议你为这个`command > file`案子做以下事情：

*   获取文件的文件描述符，使用`open(2)`
*   `fork(2)`一个新的过程
*   在child，在你之前`execvp(3)`，使用`dup2`重定向`STDOUT_FILENO`到第一步得到的文件描述符

### 编辑

根据编辑的问题：

*   你的`strcpy`论点可能被颠倒了
*   您可能需要`wait(2)`或`waitpid(2)`在父分支上

# python - Python 脚本分发

> ID：10657159
> 
> 赞同：3
> 
> 时间：2012-05-18T17:30:33.987
> 
> 标签：python, windows, linux, software-distribution

我在分发我的 python 程序时遇到了一些麻烦。对于 linux，这很容易，只需告诉人们他们需要哪些软件包并提供源代码即可。但是对于 Windows，这完全是另一回事。我可以用 py2exe 编译我的程序。然而，问题在于它似乎总是错过一个或另一个 dll 文件。

因此，我的问题是，是否有一些简单的方法可以为多个平台打包 python 脚本？现在，在我没有的 dll 文件之后，我不得不继续进行疯狂的追逐。这甚至没有提到 32 位与 64 位的问题，这有很多需要。

欢迎任何和所有指针。理想的解决方案是某种可以创建两个 zipfile 的脚本。一个是 linux/source，一个是 windows64bit/windows32bit。我真的不太关心mac支持，但它会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:48:01.597

如果你支持 linux，你可能以同样的方式支持 mac。

我通常使用 py2exe 分发到 windows，但也有替代品，例如 cxfreeze 等。我并没有太在意 64/32 位，只是提供了一个 32 位的解决方案。

以下是打包者列表：

[http://www.freehackers.org/Packaging_a_python_program](http://www.freehackers.org/Packaging_a_python_program)

# asp.net-mvc-3 - 一个实体对象不能被多个 IEntityChangeTracker 实例引用

> ID：10657160
> 
> 赞同：0
> 
> 时间：2012-05-18T17:30:36.243
> 
> 标签：asp.net-mvc-3, entity-framework, razor, linq-to-entities

尝试将“实体”添加到站点时出现此错误。

“一个实体对象不能被多个 IEntityChangeTracker 实例引用”

站点和“实体”之间的关系是一对多的。

我的模型如下所示：

地点：

```
public class Site : Model
{
 // The collection of Entities belonging to this site
 public virtual ICollection<Entity> Entities { get; set; }
} 
```

实体：

```
public class Entity : Model
{
 public string Label { get; set; }
 public string Name { get; set; }
 public virtual Site Site { get; set; }
} 
```

我在控制器中的代码：

```
[HttpPost]
public ActionResult Add(EntityModel _entityModel)
{
  var model = _entityModel.ToEntity();
  if (ModelState.IsValid)
  {
    model.Site = _siteRepository.Find(1);
    model.Label = model.Name.Replace(' ','_').ToLower();
    _entityRepository.Add(model);
  }

   return RedirectToAction("Index");
} 
```

EFEntityRepository.cs 中的代码：

```
public void Add(Entity entity)
{
  DateTime dateModified = DateTime.Now;
  entity.CreatedOn = dateModified;
  entity.LastUpdatedOn = dateModified;
  this._context.Entities.Add(entity);
  this._context.SaveChanges();
 } 
```

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:33:34.993

听起来好像在某个地方有多个 Context 类持有对该对象的引用，可能是按键。确保您的上下文在每个请求之后被释放，此外，没有其他操作导致另一个上下文实例保留该实体。

# javascript - 是否可以在没有轮询的情况下观看文本区域中的插入符号位置？

> ID：10657161
> 
> 赞同：2
> 
> 时间：2012-05-18T17:30:39.893
> 
> 标签：javascript, html, textarea

我希望每次插入符号或选择在文本区域中移动时执行一个回调函数。
有人知道该怎么做吗？

**编辑**：我知道如何检索 carret 位置。我对如何观察变化很感兴趣。以我目前的知识，我会在每个**keyup** / **mousemouve** / **mouseup**上测试 carret 位置。有没有更聪明（更高效）的方法来做到这一点。有没有可能改变我没有想到的carret位置的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:40:40.783

您可以使用一个 DOM 事件 onSelect ，但它只会在移动影响选择时拾取插入符号的移动。这是一个带有演示的 JSBin：

[http://jsbin.com/eyaril/4/edit](http://jsbin.com/eyaril/4/edit)

只需在框中选择文本并在 firebug 中查看输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:21:58.213

最后，在探索了每种可能的解决方案后，我终于发现，对于大量文本来说，没有一种高效的方法可以做到这一点。

除了等待我的 Web 应用程序满足使用现代文本区域替换库的技术要求之外，我没有其他解决方案（= 不取决于 ie quirks 模式）。

# c# - 从 C# ESP 值调用 C++ DLL

> ID：10657162
> 
> 赞同：2
> 
> 时间：2012-05-18T17:30:42.663
> 
> 标签：c#, c++, dll, delegates, function-pointers

所以我有一个用 C++ 制作的 DLL，我在 C# 中使用它。问题是我在 C++ 中使用了函数指针，所以我做了一个委托。孔程序有效，但完成后我收到一个消息框，指出 ESP 的值没有为函数保存。

我的代码：C++ DLL

```
typedef void (*FUNCTION_TYPE)(bool);
extern "C"
{
    DLL void prim(int a, FUNCTION_TYPE myF)
    {
        if(a < 2)
        {
            myF(false);
            return;
        }

        for (int i = 2; i < a; i++)
        {
            if (a % i == 0)
            {
                myF(false);
                return;
            }
        }

        myF(true);
    }
}; 
```

我的 C# 代码（调用 dll）：

```
delegate void SOME_FUNCTION(bool isFine);

        [DllImport("DLLs")]
        private static extern void prim(int n, SOME_FUNCTION afisare);

        static void afisare(bool isFine)
        {
            if (isFine == true)
                Console.WriteLine("Da, e prim");
            else
                Console.WriteLine("Nu, nu e prim");
        }

        static void Main(string[] args)
        {
            SOME_FUNCTION myAfis = afisare;
            prim(17, myAfis);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:34:26.890

你有一个调用约定不匹配。C++ 函数指针类型使用`cdecl`. 托管代码假定`stdcall`. 像这样修复它：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
delegate void SOME_FUNCTION(bool isFine); 
```

或者，您可以将 C++ 代码中的调用约定更改为`stdcall`：

```
typedef void (__stdcall *FUNCTION_TYPE)(bool); 
```

但请确保您只做其中之一，而不是两者都做！

# android - Android中的断点

> ID：10657164
> 
> 赞同：1
> 
> 时间：2012-05-18T17:30:46.997
> 
> 标签：android, android-emulator

我标记了几个断点并启动了调试器，但是在安装应用程序后，断点没有得到“v”符号，并且调试器在到达它们时似乎没有停止！我真的不知道我在这里错过了什么。这可能与它是一个应用程序小部件应用程序有关吗？我在其他应用程序中没有这个问题......我正在使用模拟器，如果它在某种程度上很重要。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:35:04.517

您的应用程序是否在清单中设置为`false`for ？`debuggable`它根本不应该在那里或设置为`true`.

```
<application android:debuggable="true" > 
```

也尝试在`onEnabled()`：

```
android.os.Debug.waitForDebugger(); 
```

另一种方法是使用 DDMS 透视图并从进程列表中选择小部件。

此[链接](https://stackoverflow.com/q/2015567/935627)也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:03:01.400

检查您没有在 Eclipse 中设置“跳过所有断点”。运行 -> 跳过所有断点。如果已设置，Eclipse 允许您设置断点，但不会停止。

# php - Ajax 表单提交多次。有时

> ID：10657169
> 
> 赞同：2
> 
> 时间：2012-05-18T17:31:19.573
> 
> 标签：php, jquery, ajax, forms, submit

我正在使用 Malsup 的 AJax 表单插件。

我要做的是一个“聊天”页面，基本上是一个每 2 秒刷新一次的 div，并在用户向聊天窗口提交内容时刷新。

页面粗略的 HTML 布局：

```
 <div id='refresh_openmsg'>
    <div id='chatdiv'>Chat window here</div>
   </div>

   <div id='reply_block'> 
    <form id='send_msg_form'>Basic form goes here</form>
   </div> 
```

JS：

```
//create timer to refresh chat window every 2 seconds

    <script type='text/javascript'>
    $(document).ready(function() {
     refresh_openmsg = setInterval(function (){$('#refresh_openmsg').load('messaging.php?view='+the_page+' #refresh_openmsg');}, 2000);
    });
    </script>

    //This is what happens when the form is submitted

    <script type='text/javascript'>
    $(document).ready(function() { 
        var options = { 
            target:        '',
            dataType:      'html',
            beforeSubmit:  showRequest_sendmsg,     
            success:       showResponse_sendmsg
        }; 
        $('#send_msg_form').live('submit', function() {
            $(this).ajaxSubmit(options); 
            return false;
        });
    });
    function showRequest_sendmsg(formData, jqForm, options) { 
        return true; 
    }
    function showResponse_sendmsg(responseText, statusText, xhr, $form)  {
        $("#reply_block").load('messaging.php?view='+the_page+' #reply_block', function() { 
         $('#reply_area').focus();
         $("#refresh_openmsg").load('messaging.php?view='+the_page+' #refresh_openmsg', function() {
           $("html, body").animate({ scrollTop: $(document).height() }, 500);           
         });
        }).focus();
    }
    </script>

//on showResponse, I'm reloading the #reply_block div, and reloading the #refresh_openmsg div (#refresh_openmsg div is also being reloaded every 2 seconds) 
```

我遇到的问题是表单被多次提交，有时是两次，有时是 3 次，有时是 4 或 5 次。很奇怪，我以前构建过类似的页面，但从未遇到过这个问题。我知道这与我的代码有关，并且永无止境的刷新，但这是我目前唯一的选择。有人看到这个问题吗？

提交表单时，我尝试将 .die() 放在 .live 事件之前，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:36:02.970

您正在重新加载回复块 div，这导致该部分被触发，因此在每次加载后都会添加一个监听器

```
$('#send_msg_form').live('submit', function() {
            $(this).ajaxSubmit(options); 
            return false;
        }); 
```

你可以尝试这样使用：

```
$('#send_msg_form').live('submit', replyBlockDivLoaderHandler);
function replyBlockDivLoaderHandler(event){
   if(event.handled != true){
      $(this).ajaxSubmit(options); 
      event.handled = true;
   }
} 
```

# javascript - 子框架打开一个弹出窗口。如何检查该弹出窗口是否从父级打开？

> ID：10657171
> 
> 赞同：0
> 
> 时间：2012-05-18T17:31:23.190
> 
> 标签：javascript, html

我有一个页面包含一个框架。在这个框架内，我可以打开一个弹出窗口。如何判断此弹出窗口是否从父页面打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:48:56.467

```
if (window.opener && 
    window.opener.top === window.opener) {
    // this window was opened from a window that is it's own top (not an IFrame)
} 
```

# c# - 在 DataGridView 中的标题列顶部放置一个 TextBox

> ID：10657172
> 
> 赞同：1
> 
> 时间：2012-05-18T17:31:29.300
> 
> 标签：c#, winforms, datagridview

我有以下函数响应 DataGridView 中的 ColumnHeaderMouseDoubleClick 事件：

```
void grid_ColumnHeaderMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e) {
    TextBox t = new TextBox();
    //make the new textbox the same size as the header to cover it up until text is entered
    t.Width = ((DataGridView)sender).CurrentCell.ContentBounds.Width;
    t.Height = ((DataGridView)sender).CurrentCell.ContentBounds.Height;
    t.Dock = DockStyle.Fill;
    t.Visible = true;
    t.BringToFront();
    t.Text = "TEST";
    Controls.Add(t);
} 
```

所有这些代码都发生在一个扩展 Panel 的类中，并将 DataGridView 添加到面板的控件中。当我双击标题并在此处理程序上放置断点时，将调用处理程序，但我在任何地方都看不到文本框。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:10:52.377

我首先将文本框设为类字段（在事件触发器之外声明它，这样它就不会超出范围）。可能还必须设置文本框的坐标:)。这台机器上没有 VS 来试试这个，但我希望这会有所帮助。

# javascript - 更改浏览器选项卡会意外触发焦点事件，尤其是在 Google Chrome 中

> ID：10657176
> 
> 赞同：15
> 
> 时间：2012-05-18T17:31:39.403
> 
> 标签：javascript, jquery, google-chrome

我刚刚意识到的焦点事件有点问题。显然，当切换到另一个浏览器选项卡然后再返回时，焦点会触发。我宁愿不发生这种情况；是否可以？

直到今天我才意识到这一点。这是一个小演示：http: [//jsfiddle.net/MJ6qb/1/](http://jsfiddle.net/MJ6qb/1/)

```
var times = 0;
$('input').on('focus', function() {
    times ++;
    $(this).after('<br>Focused '+times+' times');   
}); 
```

重现：专注于输入，然后切换浏览器选项卡，然后切换回来。当您切换回选项卡时，所有浏览器似乎都会触发焦点事件，而**Google Chrome 19 会触发两次**！

理想情况下，该功能根本不应该在切换浏览器选项卡时运行，而只能在用户单击或时运行`Tab`，但现在我知道 Chrome 问题，我更担心这一点，因为它会导致额外的不需要的返回 -在我的真实应用程序中返回 AJAX 请求（它用于获取需要最新的自动完成的结果，但不是我想使用 keyup 事件）。

它似乎与 jQuery 无关（我确实使用 vanilla javascript 进行了测试），但我可以使用 jQuery 作为解决方案。对此我能做些什么吗？我知道我可以使用 jQuery `one()`，但我确实希望该函数运行不止一次。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T17:57:48.077

试试[这个](http://jsfiddle.net/MJ6qb/3/)

```
var times = 0;
var prevActiveElement;

    $( window ).on( "blur", function(e){
            prevActiveElement = document.activeElement;
    });

    $('input').on('focus', function() {
        if (document.activeElement === prevActiveElement) {
            return;
        }
        prevActiveElement = document.activeElement;
        times++;
        $(this).after('<br>Focused ' + times + ' times');
    }).on( "blur", function(){
        prevActiveElement = null;  
    });​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T17:50:30.803

试试这个来解决这个问题：

```
var times = 0, foc=true;

$(window).on('focus', function() {
    foc = false;
    setTimeout(function() {foc=true}, 200);
});

$('input').on('focus', function() {
    if (foc || times===0) {
        times ++;
        $(this).after('<br>Focused '+times+' times');   
    }
}); 
```

​</p>

[小提琴](http://jsfiddle.net/MJ6qb/4/) ​</p>

# jquery - 使用 jquery 在父页面上保持纯 css 导航选项卡处于活动状态

> ID：10657180
> 
> 赞同：0
> 
> 时间：2012-05-18T17:31:45.033
> 
> 标签：jquery, css

我有一个纯 CSS 下拉导航。我想强制我所在页面的标签页保持活动状态，但我不知道如何做到这一点，有人可以帮我吗？另外，您看到单独按钮的原因是因为我用图像替换它们，我只是使用颜色作为占位符。

```
<!DOCTYPE html>
<html>
<head>
<title>RapidCharge</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<style>
* {margin:0;}
html{margin:0;padding:0;height:100%;}
body{font-family:Verdana, Arial, Helvetica, sans-serif;font-size:12px;color:#333;background:url(images/bg_rc.png) repeat-x top center transparent;background-color:#FFF;        margin:0;padding:0;}
img{border:none}
#nav{list-style:none;float:right;width:715px;height:52px;margin:0;padding:0;}
#nav li{float:left;padding:0;}
#nav li:hover{position:relative}
#nav a{overflow:hidden;float:left;width:141px;height:52px;text-decoration:none;}
#nav .btn-home{margin-right:2px;background-color:#006600;}
#nav .btn-about{margin-right:2px;background-color:#006600;}
#nav .btn-products{margin-right:2px;background-color:#006600;}
#nav .btn-hiw{margin-right:2px;background-color:#006600;}
#nav .btn-contact{margin-right:2px;background-color:#006600;}
#nav li:hover .btn-home{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-about{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-products{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-hiw{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-contact{background-color:#009999;}
#nav .drop{width:141px;position:absolute;top:52px;left:0;display:none}
#nav .drop ul{border-bottom:1px solid #FFF;background-color:#4b4b4b;list-style:none;position:relative;margin:0;padding:0}
#nav .drop li{float:none;position:static;vertical-align:top;line-height:20px;width:100%;margin:0;padding:0}
#nav .drop li:first-child{background:none;border:none}
#nav .drop li a{color:#FFF;border-top:1px solid #FFF;float:none;display:block;height:auto;overflow:hidden;position:relative;z-index:20;padding:0;background-color:    #4b4b4b;}
#nav .drop li:hover a,.rc-nav .drop li a:hover{text-decoration:none;background-color:#6a6a6a;}
#nav .drop li a .text{overflow:hidden;border:none;color:#FFF;cursor:pointer;padding:8px 5px 4px 13px;text-align:left;font-family:Verdana, Arial, Helvetica, sans-serif;}
#nav .drop li:hover .text,.rc-nav .drop li a:hover .text{color:#f98a1f}
#nav li:hover .drop,.rc-nav .drop li span{display:block}
</style>
</head>
<body>
<div class="rc-nav">
<ul id="nav">
<li>
<span id="home"><a class="btn-home" href="#"></a></span></li>
<li>
<span id="about"><a class="btn-about" href="#"></a></span>
<!--drop-->
<div class="drop">
<ul id="subNav">
<li><a href="#"><span style="cursor:pointer;" class="text">Blah Blah</span></a></li>
<li><a href="#"><span style="cursor:pointer;" class="text">Blah Blah</span></a></li>
</ul>
</div>
</li>
<li>
<span id="products"><a class="btn-products" href="#"></a></span>
<!--drop-->
<div class="drop">
<ul id="subNav">
<li><a href="#"><span style="cursor:pointer;" class="text">Blah Blah</span></a></li>
</ul>
</div>
</li>
<li>
<span id="howitworks"><a class="btn-hiw" href="#"></a></span>
<!--drop-->
<div class="drop">
<ul id="subNav">
<li><a href="#"><span style="cursor:pointer;" class="text">Blah Blah</span></a></li>
<li><a href="#"><span style="cursor:pointer;" class="text">Blah Blah</span></a></li>
<li><a href="#"><span style="cursor:pointer;" class="text">Blah Blah</span></a></li>
</ul>
</div>
</li>
<li>
<span id="contact"><a class="btn-contact" href="#"></a></span>
</li>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:45:51.467

当您在浏览器中更改 URL 时，我还没有真正找到一种“理想”的方式来实现这一点。虽然我自己已经完成了这一点……但我是如何做到的：

请记住，我在这方面使用的是 symfony2 框架，但您也可以在常规 HTML 中做同样的事情。所以首先，我的导航：

```
 <!-- BEGIN NAVIGATION -->
        <nav id="nav">
            <ul class="menu collapsible shadow-bottom">
                <li><a href="{{ path('AwsAdminBundle_homepage') }}" class="{% block dashclass %}{% endblock dashclass %}"><img src="{{ asset('inc/admin/img/icons/packs/fugue/16x16/dashboard.png')}}">Dashboard</a></li>
                <li>
                    <a href="#" class="{% block pageclass %}{% endblock pageclass %}"><img src="{{ asset('inc/admin/img/icons/packs/fugue/16x16/document.png')}}">Pages</a>
                    <ul class="sub">
                        <li><a href="{{ path('pages') }}">Page Management</a></li>
                        <li><a href="#">Top Navigation</a></li>
                        <li><a href="#">Footer Navigation</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="{% block userclass %}{% endblock userclass %}"><img src="{{ asset('inc/admin/img/icons/packs/fugue/16x16/users.png') }}">Users</a>
                </li>
                <li>
                    <a href="#" class="{% block settingclass %}{% endblock settingclass %}"><img src="{{ asset('inc/admin/img/icons/packs/fugue/16x16/gear.png') }}">Settings</a>
                    <ul class="sub">
                        <li><a href="">Global Settings</a></li>
                        <li><a href="">Employee Departments</a></li>
                        <li><a href="">Employee Positions</a></li>
                    </ul>
                </li>
            </ul>
        </nav> 
```

所以在这里，你可以看到在导航中显示的主链接中，我有一个默认为空白的类。但是如果我传入一个类进入，那么它将显示在那里而不是在最后。我使用`expand`我页面中的课程...

现在我们看看 Javascript..

```
jQuery.fn.initMenu = function() {
    return this.each(function() {
        $('li:has(ul)', this).each(function() {
            $('>a', this).append("<span class='arrow'></span>");
        });
        $('.current', this).each(function() {
           $(this).removeClass('current');
        });

        $('.sub', this).hide();
        $('.expand', this).each(function() {
            if($(this)+':has(ul)') {
                $(this).next().show();
            }
            $(this).addClass('active current active-icon');
            $(this).removeClass('non-active-icon');
        });
        $('li.expand > .sub', this).show();
        $('li.expand > sub', this).prev().addClass('active');
        $('li a', this).click(
            function(e) {
                e.stopImmediatePropagation();
                var theElement = $(this).next();
                var parent = this.parentNode.parentNode;
                if($(this).hasClass('active-icon')) {
                    $(this).addClass('non-active-icon');
                    $(this).removeClass('active-icon');
                } else {
                    $(this).addClass('active-icon');
                    $(this).removeClass('non-active-icon');
                }
                if($(parent).hasClass('noaccordion')) {
                    if (theElement[0] == undefined) {
                        // do nothing..
                    }
                    $(theElement).slideToggle('normal', function() {
                        if ($(this).is(':visible')) {
                            $(this).prev().addClass('active');
                        }
                        else {
                            $(this).prev().removeClass('active');
                            $(this).prev().removeClass('active-icon');
                        }
                    });
                    return false;
                }
                else {
                    if(theElement.hasClass('sub') && theElement.is(':visible')) {
                        if($(parent).hasClass('collapsible')) {
                            $('.sub:visible', parent).first().slideUp('normal',
                                function() {
                                    $(this).prev().removeClass('active');
                                    $(this).prev().removeClass('active-icon');
                                }
                            );
                            return false;
                        }
                        return false;
                    }
                    if(theElement.hasClass('sub') && !theElement.is(':visible')) {
                        $('.sub:visible', parent).first().slideUp('normal', function() {
                            $(this).prev().removeClass('active');
                            $(this).prev().removeClass('active-icon');
                        });
                        theElement.slideDown('normal', function() {
                            $(this).prev().addClass('active');
                        });
                        return false;
                    }
                }
            }
        );
    });
}; 
```

这段代码中真正要看的部分是：

```
$('.current', this).each(function() {
               $(this).removeClass('current');
            });

            $('.sub', this).hide();
            $('.expand', this).each(function() {
                if($(this)+':has(ul)') {
                    $(this).next().show();
                }
                $(this).addClass('active current active-icon');
                $(this).removeClass('non-active-icon');
            }); 
```

首先，我`current`从所有导航元素中删除该类（这只是一个图形更改）。然后我确保所有子菜单都被隐藏...从这里，我运行我的类搜索`expand`，如果它有子菜单然后在这一点上我们显示它..

这并不完全适合您的情况，但希望它能帮助您一路走好，让它为您的工作..

问候...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:48:37.167

如果我理解正确，请修改以下 CSS 选择器

```
#nav li:hover .btn-home, #nav li .btn-home.active{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-about, #nav li .btn-about.active{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-products, #nav li .btn-products.active{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-hiw, #nav li .btn-hiw.active{margin-right:2px;background-color:#009999;}
#nav li:hover .btn-contact, #nav li .btn-contact.active{background-color:#009999;} 
```

然后，根据您的 URL 结构，实现某种 jQuery 以将`.active`类添加到适当的页面（您甚至可以使用服务器端代码）。这是未经测试的，而且效率略低，但它应该为您指明正确的方向。

```
var pages = {
    'home.html': '.btn-home',
    'about.html': '.btn-about',
    'products.html': '.btn-products',
    'hiw.html': '.btn-hiw',
    'contact.html': '.btn-contact'
};
$(function() {
  var filename = url.substring(url.lastIndexOf('/')+1);
  $(filename).addClass('active');
}); 
```

# c# - 从文本框设置组合框文本

> ID：10657188
> 
> 赞同：0
> 
> 时间：2012-05-18T17:32:13.427
> 
> 标签：c#, winforms, combobox

我有用户提交的内容在正式添加到数据库之前加载到我们办公室的 c# winform 中进行处理。用户可以提交一个“推荐人”作为两个文本字段——名字和姓氏。在办公室里，我想要一个组合框，将所有现有的推荐人都加载进来，然后是名字的前几个字母，将组合框推进到它需要的区域。我想做这样的事情，取名字的前两个字母并用它来初始化组合框。

```
if (txtrefFirstName.TextLength > 2)
{
   string firstStart = "" + txtrefFirstName.Text[0] + txtrefFirstName.Text[1];
   firstStart = firstStart.ToUpper();
   ddlReferring.SelectedText.StartsWith(firstStart);
}
else
   ddlReferring.Text = ""; 
```

有什么想法或建议可以让它发挥作用吗？

谢谢

大卫·K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:41:25.210

你可以写这样的东西......

```
foreach (string item in ddlReferring.Items)
{
    if (item.StartsWith(firstStart))
    {
        ddlReferring.SelectedText = item;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:46:33.813

假设 ddl 的数据源是一个字符串对象列表，您应该能够对数据源本身进行一些比较。我倾向于将 Linq 用于这样的事情，但这不是绝对必要的，只是更短。

```
if (txtrefFirstName.TextLength > 2)
{
   string firstStart = txtrefFirstName.Text.Substring(0,2).ToUpper();
   string Selection = ddlReferring.DataSource.Where(a=>a.StartsWith(firstStart)).FirstOrDefault();
   ddlReferring.SelectedText = Selection ?? "";
}
else
   ddlReferring.Text = ""; 
```

选择线也可以直接来自项目集合

```
string Selection = ddlReferring.Items.OfType<string>().Where(a=>a.StartsWith(firstStart)).FirstOrDefault(); 
```

或者，如果您真的不想使用 Linq...

```
string Selection = "";
foreach (object item in ddlReferring.Items)
    if (item.ToString().StartsWith(firstStart))
    {
        Selection = item.ToString();
        break;
    } 
```

即使 ddl 的数据不是字符串列表，也可以使用类似的方法，只需确保适当地转换项目并比较正确的值。

# xml - Adobe Air - FileMode.APPEND

> ID：10657196
> 
> 赞同：1
> 
> 时间：2012-05-18T17:32:47.513
> 
> 标签：xml, air

我正在使用下面的代码将图像 ID 添加到 .XML 文件中：

```
var xmlGallery:XML =new XML ('<ENTRY "IMG_ID="' +img_id+'"/>')

var fGallery:File = File.applicationStorageDirectory.resolvePath("gallery.xml");
var sGallery:FileStream = new FileStream();

sGallery.open(fGallery,FileMode.APPEND);
sGallery.writeUTFBytes(xmlGallery.toXMLString()); 
```

.XML 输出如下所示：

```
<ENTRY "IMG_ID="1"/> 
<ENTRY "IMG_ID="2"/>
<ENTRY "IMG_ID="3"/> 
```

我需要`<?xml version="1.0" encoding="utf-8"?>`在条目上方添加。怎么做？

谢谢。乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:41:30.113

为什么不在将任何 XML 节点附加到文件之前简单地编写字符串？尝试：

```
sGallery.open(fGallery, FileMode.APPEND);
sGallery.writeUTF("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
sGallery.writeUTFBytes(xmlGallery.toXMLString()); 
```

更新：基于 OP 评论的问题陈述更改：

不看源码很难说。我能理解的是您多次更新同一个 XML 文件。在这种情况下，最好的办法是执行以下操作：

*   检查文件是否存在，
    *   如果它没有创建一个并添加 XML 声明和`GALLERY`开始和结束标签（即`GALLERY`元素）
    *   如果它确实存在，什么也不做
*   在类型对象中读入文件`XML`
*   使用 E4X 将所有子元素添加到此对象（AS3 中推荐的 XML 处理方式）
*   完成添加/修改 XML 对象后，将其保存回文件

您还应该在[此处](http://code.google.com/p/asx3m/)`asx3m`查看XML 序列化库。

# html - 旧浏览器的边框图像实现

> ID：10657197
> 
> 赞同：0
> 
> 时间：2012-05-18T17:33:00.783
> 
> 标签：html, css

如何为旧浏览器实现边框图像？
我有 8 张图片：
4 张边框图片（border-top.gif、border-right.gif、border-bottom.gif、border-right.gif）
和 4 个边框角（角的外部是透明的，这很重要）： border-top-left.gif、border-top-right.gif、border-bottom-right.gif、border-bottom-left.gif，我还有下一个标记：

```
<div class"block">
  <div class="content">A lot of text with images and tables</div>
  <div class="border-top"></div>
  <div class="border-right"></div>
  <div class="border-bottom"></div>
  <div class="border-left"></div>
  <div class="border-top-left"></div>
  <div class="border-top-right"></div>
  <div class="border-bottom-right"></div>
  <div class="border-bottom-left"></div>
</div> 
```

任何 CSS 解决方案？如果需要，我可以将类添加到标记中。
UPD：我知道使用表格很容易，但我想为 div 找到解决方案。
UPD2：带有渐变的图像，所以没有图像就无法做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:48:52.410

*   容器的相对定位（ .block ）
*   容器内角落 div 元素的绝对定位。

    ```
    <style type="text/css">
      .block { display:block;position:relative; }
      .border-top-left { 
              display:block;
              background-image:url(/folder/topleftcorner.png); 
              background-repeat:no-repeat;
              width:10px; height:10px; /* size of your corner graphic above */

              /* this puts it where you want it */
              position:absolute;
              top:0;
              left:0;

             }
    </style> 
    ```

从...使用

```
 right:0; bottom:0 
```

匹配其余的以适应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:44:38.740

我建议使用 CSS 精灵。这样您就不必浪费时间分割图像。允许 CSS background-position 声明为您完成工作。

请参阅：[http ://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)

# c - 如何让gets() 只等待特定时间从C 中的STDIN 输入？

> ID：10657198
> 
> 赞同：2
> 
> 时间：2012-05-18T17:33:01.873
> 
> 标签：c, timeout, stdin, gets

正如标题所述。我有`gets(buffer)`无限`while(1)`循环，它停止`gets(buffer)`并无限等待。我只想`gets(buffer)`等待 3 秒，以便从 STDIN 输入，然后当缓冲区中没有字符串时，再将控制权传递给 while，依此类推。
C是语言
提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:47:13.613

标准`gets()`函数没有超时功能。在 C 中实现 I/O 操作超时的规范方法是使用[`select()`函数](http://pubs.opengroup.org/onlinepubs/007908799/xsh/select.html).

# php - PHP/MYSQL上传、导入.csv文件到mysql-process-table设计

> ID：10657204
> 
> 赞同：1
> 
> 时间：2012-05-18T17:33:23.003
> 
> 标签：php, mysql, csv, upload

我想让用户将他们的联系人从 .csv 文件（从各种联系人管理程序导出）上传到服务器，然后将其保存在 mysql 中。根据我在 SO 和其他地方阅读的内容，MYSQL 可以使用 LOAD DATA INFILE 导入数据。似乎还有一个本地选项可以从客户端获取它。我的三部分问题是：我需要使用文件上传将文件上传到服务器还是可以通过 LOAD DATA INFILE 的 LOCAL 选项直接访问它？由于该应用程序将使用他们的联系人为多个用户提供服务，我应该将所有联系人放在一张表中吗？由于不同的用户在他们的 .csv 文件中会有不同的结构，在不同的 .csv 文件中处理字段名/模式差异的最佳方法是什么？

暂定代码：

```
<html>
<body>
<form action="getcsvile.php" method="post"
enctype="multipart/form-data">
<input type="file" size=12 name="file" id="file" /><input type="submit" name="submit" value="Upload CSV File" /></form>
<body>
</html>

<?php
$userid = $_SESSION['userid'];
//error checking to make sure .csv file and other requirements met...then
//get extension, set to $ext
$target = "csvfiles/".$userid.".".$ext;
move_uploaded_file($_FILES["file"]["tmp_name"],$target);
//NEED TO PARSE DATA USING fgetcsv or something to examine, clean up csv data?
$sql = "LOAD DATA LOCAL INFILE '$target' INTO TABLE contacts FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 LINES";// IS LOCAL right?
MySQL_query($sql);
$sql2 = "UPDATE contacts SET userid = '$userid';
MySQL_query($sql2);
echo "success; 
```

这看起来是正确的方法吗？容纳来自不同用户的不同 csv 文件可能有多难？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:45:06.463

1.  请记住，从 MySQL 的角度来看，“客户端”是直接连接到它的应用程序。在你的情况下，那就是 PHP。PHP 的“客户端”是用户的网络浏览器这一事实是无关紧要的——而且您几乎肯定不希望您的用户直接连接到 MySQL 服务器。

    因此，`LOCAL`如果它们在不同的机器上运行，您可能会使用将文件从 PHP 传递到 MySQL，但如果它们在同一台机器上并且 MySQL 有权从 PHP 写入文件的任何位置读取，则这是不必要的。

2.  这实际上取决于您将如何处理数据，但总的来说 - 是的，将它们全部放在一张表中。

3.  在`LOAD DATA`语句中，您可以告诉 MySQL CSV 中的哪些列映射到表中的哪些列 - 您可以根据文件内容（特别是如果它包含标题行）或根据用户提供的提示进行一些猜测，例如CSV 源自哪个软件；或者，如果您无法决定 CSV 如何映射到表格，您可以在浏览器中向用户展示一个简短的示例并要求他们解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:01:13.550

按照以下步骤导入 csv 联系人文件

步骤 1\. 使用 HTML 表单上传文件。步骤 2\. 使用 fopen 打开文件。

```
Example $file=fopen($_FILES['file1']['tmp_name'],'r'); 
```

步骤 3\. 使用 fgetcsv 读取文件内容。在这里你必须使用while循环

例子： -

```
while($data = fgetcsv ($handle, 3000, ","))
{
       //write sql query to insert data in database
        $q="insert into contacts values($data[0],$data[1])";
} 
```

如果您想允许多个用户上传具有不同结构的文件。创建列映射器。例如给他们类似以下的东西

```
User File Fields          Mapping Fields (Database table fields)
Field 1                   Name                //Here you have to give a drop down menu
Field 2                   Phone Number        //Here you have to give a drop down menu
Field 3                   Email Address       //Here you have to give a drop down menu 
```

# ios - 如何使用 Jenkins 设置我的远程从站？

> ID：10657205
> 
> 赞同：1
> 
> 时间：2012-05-18T17:33:23.307
> 
> 标签：ios, xcode, hudson, jenkins

理论上，主人是：工作和奴隶是：节点（但是我理解的）。

我在 2 台机器 MAC OS X（可能是 Windows）中安装了 JENKINS，我用正确的存储库设置了我的工作，并在这个工作中配置了 xCode 等等......就像同样的教程，我设置了我的奴隶等等......一切都很好10/10 BUTTT 这个测试是本地测试，在一台机器上。

我的问题是：我想要 SLave(Node) 用于在 MAC OS 中构建我的 xCode 项目，以及我的 Matser (job) 在其他服务器中（为什么不是我的第二台机器 MAC OS X），我如何在从属（节点）之间建立连接和 Master(job) 用于在我的 Remote SLave 中构建我的项目 xCode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:52:26.180

在 Jenkins 设置中轻松设置从主机的 IP 地址。选择 ssh 作为通信方式，并在从机 jenkins setup 上设置记帐信息。确保从机可以 ssh 到您在 jenkins 中设置的帐户和机器。你准备好了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:44:08.820

通过选中该框并将您的工作设置为使用“限制此项目可以运行的位置”并将从属的名称放在框中（如果有空格，请使用引号

我在解读您的问题时遇到了一些麻烦，所以如果这不能回答，请重新修改您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T08:53:38.823

如何在 Jenkins 中链接工作

**主要**工作：**“触发/调用构建在其他项目上”**

**从属**作业：添加条件步骤构建：**“运行？构建原因-> UpstreamCause（带有主项目名称）”**，然后从“主”作业复制工件（ *. ）。*

不要忘记从工作区而不是从最新的成功构建中复制，因为 master 还没有完成并且没有发布工件。

# java - Jython 中的 Sikuli 与 Java 中的 Sikuli，有什么区别吗？

> ID：10657206
> 
> 赞同：1
> 
> 时间：2012-05-18T17:33:23.627
> 
> 标签：java, jython, sikuli

我目前在 Jython 层用 Sikuli 编写了一些自动化，但我开始怀疑在 Java 级别执行此操作是否更好？

脚本变得越来越重要。所以我想知道如果在 Java 层编写，我是否会获得速度或稳定性？

有这方面经验的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:06:38.190

我也在和 sikuli 一起做一个中型项目，不久前我问过自己同样的问题。我认为这个问题的答案取决于你的个人喜好和技能。我对 Python 非常满意，因为它具有极大的灵活性。另一方面，我现在很难为 jython 找到专业的 IDE。不幸的是，没有很多很好的解决方案。

我不认为有任何大的速度/稳定性差异，因为无论如何，图像识别的东西总是发生在 libCV 模块中，并且它是用 C 或 C++ 编写的，所以据我所知，这不是依赖的。

希望对 sikuli 有一点帮助。我知道它有时会有点讨厌：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T05:20:29.237

我不是编程专家，但根据我的经验，Sikuli 在大多数情况下的速度仅受被测应用程序或系统（AUT / SUT）速度的限制——这意味着在大多数情况下，Sikuli 必须等待应用程序，反之亦然. Sikuli 并没有减慢测试执行的速度，它与应用程序允许的速度一样快。

在中型甚至大型项目中使用 Sikuli 的一个很好的工具链是：Sikuli + [Robot Framework](http://robotframework.org/) + IntelliJ IDEA 14（社区版），带有 Python 和 Robot Framework 插件。例如，看看这个[Sikuli-and-Robot-Framework_How-To](https://github.com/Tset-Noitamotua/Sikuli-and-Robot-Framework-Integration)。

# wpf - WPF 应用程序之间的音频会议

> ID：10657207
> 
> 赞同：2
> 
> 时间：2012-05-18T17:33:34.400
> 
> 标签：wpf, audio, naudio

我有 2 个 WPF 应用程序，它们使用几个双工 WCF 服务进行通信。我还需要在它们之间启用音频通信。我一直在寻找解决方案一段时间，但找不到一个好的解决方案。

我尝试的是在“服务器”端（提供音频的那个）使用 Microsoft Expression Encoder 进行音频流传输，并使用 VLC .NET 在“客户端”上播放它。它可以工作，至少可以播放一首歌曲，但它是一个很大的资源消耗者。初始缓冲也需要很多时间，停止流也是如此。

我还有什么其他选择？我想要在应用程序之间进行清晰、轻量级的音频对话，有点像 Skype。这可能吗？谢谢

**编辑**：我找到了 NAudio，它看起来像一个很好的音频库，我设法很容易地流式传输我的麦克风。但是，我有一个大问题 - 我可以清楚地听到客户端上的声音，但它会无限期地回响。另外，还有这种烦人的背景声音（这可能是由处理器引起的吗？），过了一会儿，接收端会播放一个非常响亮的声音。我能做的就是停止整个传输。我不知道是什么导致了这些问题。我使用提供的 NetworkChat 示例中的“SpeexChatCodec”（采样率：8000，2 个通道）。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:20:07.850

编写一个从头开始支持它的库需要做很多工作......如果你能花 150 美元买这个，我建议你从[AvSpeed购买一个像](http://www.avspeed.com/)[iConf .NET Video Conferencing SDK](http://www.avspeed.com/avcontent/iconf-net-video-conferencing-sdk)这样的库......

# php - 在网站中嵌入 Facebook 相册

> ID：10657213
> 
> 赞同：1
> 
> 时间：2012-05-18T17:33:48.673
> 
> 标签：php, facebook, api, photo

有没有办法使用 Graph API 从 Facebook 检索公共相册中的照片？是否可以不提供访问令牌？如果没有，是否可以不使用在 60 天内过期的访问令牌（似乎是默认的过期时间）。

如果我在网站上嵌入 Facebook 相册，我不想每 60 天重新授权或获取新的访问令牌并重新发布我的网站。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:27:47.223

只要您的相册和其中的照片是公开的，您就不必获得 OAuth 令牌（至少现在是这样）。

如果您在浏览到`https://graph.facebook.com/ALBUM_ID/photos`ALBUM_ID 是相册 ID 的位置时获取数据，那么您会没事的。

在您的脚本中，您可以执行以下操作：

```
$fb_data = json_decode( file_get_contents( 'https://graph.facebook.com/ALBUM_ID/photos') );
foreach ($fb_data['images'] as $img) {
    sprintf('<img src="%s" height="%d" width="%d" />', $img['source'], $img['height'], $img['width'] );
} 
```

如果项目不是公开的，请创建一个连接器应用程序，您可以使用 APP_ID 和 APP_SECRET 作为使用 php SDK 的访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:24:02.617

无论是公开的还是私有的，您都需要添加访问令牌，否则它不会返回数据。

这是示例代码

```
$album_id = your album id;
$access_token = 'your token';

$url = "https://graph.facebook.com/{$album_id}/photos?access_token={$access_token}";
$image = json_decode(file_get_contents($url));

foreach($image->data as $img){
echo "<img src='{$img->images[6]->source}' />    ";

} 
```

只要确保当您收集令牌时，您需要有offline_access 令牌bcoz，否则令牌将很快过期，如果您也有离线访问权限，那么您的令牌不会过期，甚至在 60 天内也不会过期。

祝你好运

# math - 使用 Eigen 计算 2D 相机的模型视图矩阵

> ID：10657218
> 
> 赞同：4
> 
> 时间：2012-05-18T17:34:10.770
> 
> 标签：math, opengl, matrix, camera, eigen

我正在尝试计算我的 2D 相机的模型视图矩阵，但我无法正确计算公式。我使用 Affine3f 变换类，因此矩阵与 OpenGL 兼容。这是我通过反复试验得到的最接近的。这段代码可以旋转和缩放相机，但是如果我同时应用平移和旋转，相机的运动就会变得混乱：相机以旋转的方式移动，这不是我想要的。（这可能是因为我首先应用旋转矩阵然后平移）

```
Eigen::Affine3f modelview;
modelview.setIdentity();
modelview.translate(Eigen::Vector3f(camera_offset_x, camera_offset_y, 0.0f));
modelview.scale(Eigen::Vector3f(camera_zoom_x, camera_zoom_y, 0.0f));
modelview.rotate(Eigen::AngleAxisf(camera_angle, Eigen::Vector3f::UnitZ()));
modelview.translate(Eigen::Vector3f(camera_x, camera_y, 0.0f));
[loadmatrix_to_gl] 
```

我想要的是相机将围绕屏幕空间中的偏移位置旋转和缩放 {(0,0) 在这种情况下是屏幕的中间}，然后沿着世界空间中的全局 xy 轴定位 {(0,0) 也是初始在屏幕中间} 到最终位置。我该怎么做？

请注意，我还设置了一个正交投影矩阵，这可能会影响这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:21:25.897

如果您想要使用 OpenGL 在 XY 平面中渲染的 2D 图像，则*(1)*围绕点**P**逆时针旋转**，** ( *2)按***S**缩放，然后*(3)*平移以使**C**处的像素（在新缩放和旋转的图像）位于原点，您将使用此转换：

 ********1.  **通过-P**平移（这会将**P**处的像素移动到原点）
2.  旋转**一个**
3.  按**P**翻译（这会将原点移回原来的位置）
4.  **按S**缩放 （如果你之前这样做，你的旋转会搞砸）
5.  **-C**翻译

 **如果我们在原点渲染 2D 图像，您还需要沿负 z 轴平移一些值才能看到它。

通常，您只需使用 OpenGL 基础知识（`glTranslatef`、`glScalef`、`glRotatef`等）即可。你会按照我列出的相反顺序来做。既然你想使用`glLoadMatrix`，你会按照我用 Eigen 描述的顺序做事。重要的是要记住 OpenGL 需要一个 Column Major 矩阵（但这似乎是 Eigen 的默认值；所以这可能不是问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T18:58:16.470

JCooper 很好地解释了构建初始矩阵的步骤。

但是我最终以不同的方式解决了这个问题。当时几乎没有什么对我来说不明显的其他事情和步骤。请参阅 JCooper 答案的评论。首先是实现所有矩阵运算都是*相对*的。

因此，如果要使用*绝对 xy 轴*定位或移动相机，则必须首先分解矩阵以提取其轴不变的绝对位置。然后你通过新旧位置的差异来翻译矩阵。

这是使用 Eigen 执行此操作的方法：

首先计算 Affine2f 矩阵`cmat`标量行列式 D。使用 Eigen 可以使用`D = cmat.linear().determinant();`. `matrev`接下来使用 D 计算当前旋转+缩放矩阵 R 的“反向”矩阵。`matrev = (RS.array() / (1.0f / determ)).matrix());`其中 RS 是`cmat.matrix().topLeftCorner(2,2)` 相机的绝对位置 P 然后由`P = invmat * -C`其中 C给出`cmat.matrix().col(2).head<2>()`

现在我们可以沿绝对轴重新定位相机并保持旋转+缩放相同：V = RS * (T - P) 其中 RS 与以前相同，T 是新位置 vec，P 是分解后的位置 vec。然后`cmat`简单地通过 V 平移来移动相机：`cmat.pretranslate(V)`**********

# jquery - 更改选定属性后窗口不更新 The sign up form I'm creating has Business and Residential option in select dropdown. Based on the active page type, I change the default selected option. Here's the html: <select class="type_c" name="type_c">// def ID：10657224 赞同：7 时间：2012-05-18T17:34:40.897 标签：jquery, html, firefox 回答 #1 赞同：4 时间：2012-05-18T17:40:19.397 因为这是在初始值之后更改属性，它在技术上是一个属性，你应该使用$(this).prop()而不是$(this).attr(). 另外，尝试将值设置为true而不是selected $(this).prop('selected',true); 或者，您也可以设置select元素的值： $('.type_c').val(pageType); 回答 #2 赞同：0 时间：2012-05-18T17:50:18.570 我会验证您返回的内容是否正确评估。我使用以下代码制作了一个空白 HTML 页面。您可以看到所选选项的呈现方式取决于您将“pageType”设置为的任何字符串。 <html> <head> <script type="text/javascript" src="json2.min.js"> </script> <script type="text/javascript" src="jquery-1.7.2.min.js"> </script> <script type="text/javascript" src="jquery.cookie.js"> </script> </head> <script> $(function(){ var pageType = 'Residential'; // returns either 'Business' or 'Residential' $('.type_c option').each(function(){ $(this).removeAttr('selected'); }); $('.type_c option').each(function(){ if($(this).html() == pageType) $(this).attr('selected','selected') }); }); </script> <body> <select class="type_c" name="type_c"> // default selected is business <option value="Business" selected="selected">Business</option> <option value="Residential">Residential</option> </select> </body> </html> 回答 #3 赞同：0 时间：2012-05-18T20:19:11.760 我以前也发生过类似的事情。Firefox 喜欢保存表单元素的状态，因此当页面重新加载时，它会显示上次会话的选择，即使它是通过 JavaScript 更改的。通常我必须从头开始加载页面（我转到 url 并按 enter，而不是重新加载）。 我不确定这是否会有所帮助，但它过去曾发生在我身上。 （我创建了第二个答案，因为这完全不同。） 回答 #4 赞同：0 时间：2018-02-09T23:54:17.053 如果有人和我有同样的问题，我认为这是 JQuery 版本。例如这个： var SetValue = function(dropDownElement, valueToSet){ dropDownElement.after("<br> Set to: "+valueToSet); dropDownElement.find("option").removeAttr("selected"); unitsTypeControl.find("option").filter(function() { return this.text === valueToSet; }).attr('selected', true); } https://codepen.io/RolandoRetana/pen/GQrByQ 适用于 IE 但不适用于 Chrome，升级到最新版本的 jquery 后，它适用于两者。</select>

# ruby-on-rails - CGI 代表 Rails 中的任何东西吗？

> ID：10657229
> 
> 赞同：-1
> 
> 时间：2012-05-18T17:35:03.703
> 
> 标签：ruby-on-rails

看一些例子，我遇到了这样的行：

```
output.safe_concat("<input type=\"hidden\" id=\"#{k}\" name=\"#{CGI.escape(k)}\" value=\"#{CGI.escape(v)}\"/>") 
```

即依赖`CGI`类。当我用谷歌搜索时，`CGI Rails`我发现文档说：

> CGI 是一个大类，提供了几类方法，其中许多是从其他模块中混入的。一些文档在这个类中，一些在模块 CGI::QueryExtension 和 CGI​​::HtmlExtension 中。有关处理 cookie 的具体信息，请参见 CGI::Cookie，有关会话的信息，请参见 cgi/session.rb (CGI::Session)。

只是出于好奇，它`CGI`代表什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:35:45.833

CGI 代表通用网关接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:36:15.417

[通用​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​的通用网关接口](http://en.wikipedia.org/wiki/Common_Gateway_Interface)。

# android - GLSurfaceView 在 Honeycomb 上有时会变黑，适用于 ICS

> ID：10657238
> 
> 赞同：2
> 
> 时间：2012-05-18T17:35:26.617
> 
> 标签：android, glsurfaceview

[编辑：修复！问题似乎是在布局 xml 中有一个不可见的 VideoView 覆盖了我的 GLSurfaceView。从布局中删除 VideoView 会恢复预期的行为。]

[编辑#2：让 GLSurfaceView 使用 ARGB888 也应该解决这个问题（我认为不能混合具有不同颜色格式的表面），此后已经这样做了以在视频上显示 GL。]

我成功地使用了 GLSurfaceView，但在 Android 3.2 平板电脑上发现了一个奇怪的问题。GLSurfaceView 活动使用 AndroidManifest 强制横向。如果我从纵向的现有活动启动它，屏幕会旋转并且 GLSurfaceView 按预期工作。如果我从横向的活动开始，GLSurfaceView 是黑色的。这不仅仅是纹理问题，glClearColor 和通过 glDrawArrays 填充实心三角形都不可见。

*   如果我旋转屏幕（在删除 manifest 指令后手动，或者通过 setRequestedOrientation 有或没有 manifest 指令）它开始工作。

*   如果我按下后退按钮，我会在活动退出时看到预期的渲染 GLSurfaceView 片刻。

*   如果我开始一个新活动（一个 SettingsActivity），我会在开始新活动时看到预期呈现的 GLSurfaceView 闪烁片刻，并在按下后退按钮返回 GLSurfaceView 活动时（然后屏幕再次变黑），*但前提是设备处于横向*。如果我将设备置于纵向模式，然后启动我的设置活动，我看不到 GL 闪烁，但在按下回之前旋转到纵向，当 GLSurfaceView 活动恢复时，我确实看到闪烁。

*   我在模拟器和 Android 4.0.4 手机上都没有看到这种行为。

我在 onCreate 中创建 GLSurfaceView 并将其添加到我的布局 xml 中的 FrameLayout 中。

我正在从相应的活动方法中调用 GLSurfaceView 暂停和恢复方法。这是我的 onSurfaceCreated 和 onSurfaceChanged 处理程序：

```
public final static void onSurfaceCreated(GL10 pGL) {
    pGL.glClearColor(0.5f, 0.5f, 0.5f, 1f);

    pGL.glEnable(GL10.GL_TEXTURE_2D);

    pGL.glEnable(GL10.GL_BLEND);
    pGL.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

    pGL.glShadeModel(GL10.GL_FLAT);
    pGL.glDisable(GL10.GL_DEPTH_TEST);

    pGL.glDisable(GL10.GL_DITHER);
    pGL.glDisable(GL10.GL_LIGHTING);
}

public final static void onSurfaceChanged(GL10 pGL, int pWidth, int pHeight) {
    pGL.glViewport(0, 0, pWidth, pHeight);

    pGL.glMatrixMode(GL10.GL_PROJECTION);
    pGL.glLoadIdentity();
    pGL.glOrthof(0f, pWidth, 0f, pHeight, -1f, 1f);
    pGL.glMatrixMode(GL10.GL_MODELVIEW);
} 
```

以下是我设置 GLSurfaceView 的方法：

```
 mGLSurfaceView = new GLSurfaceView(pContext);
    mGLSurfaceView.setEGLConfigChooser(false);  // no depth buffer

    mGLSurfaceView.setRenderer(this);
    mGLSurfaceView.setDebugFlags(GLSurfaceView.DEBUG_CHECK_GL_ERROR); 
```

我添加了日志记录来验证 onSurfaceCreated 和 onSurfaceChanged（具有预期的大小），以及 onDrawFrame 是否被调用。

我发现有人在 TabHost 中使用 GLSurfaceView 的类似报告，但没有很好的解决方案：[https ://groups.google.com/forum/?fromgroups#!topic/android-developers/fXPfgw6AoeY](https://groups.google.com/forum/?fromgroups#!topic/android-developers/fXPfgw6AoeY)

我一直在尝试请求焦点、无效、请求布局等的组合，但没有成功。我希望这里有人可以帮助我看到光明！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:22:08.510

回答我自己的问题：已修复！问题似乎是在布局 xml 中有一个不可见的 VideoView 覆盖了我的 GLSurfaceView。从布局中删除 VideoView 会恢复预期的行为。

# java - JMapViewer 为离线视图添加瓦片

> ID：10657239
> 
> 赞同：2
> 
> 时间：2012-05-18T17:35:29.777
> 
> 标签：java, swing, openstreetmap, offline-mode

您好，我在 Java 中使用此示例来尝试加载 OpenStreetMaps 离线图块，

例如，我在 C:/OSM/tiles/ 上有我的瓷砖

但我需要知道如何在地图（JMapViewer）类中添加此信息以在本地加载图块。

非常感谢您的帮助，这是我的来源：

```
//License: GPL. Copyright 2008 by Jan Peter Stotz

import org.openstreetmap.gui.jmapviewer.JMapViewer;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 *
 * Demonstrates the usage of {@link JMapViewer}
 *
 * @author Jan Peter Stotz
 *
 */
public class Demo extends JFrame {

    public Demo() {
        super("JMapViewer Demo");
        setSize(400, 400);
        final JMapViewer map = new JMapViewer();
        setLayout(new BorderLayout());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setExtendedState(JFrame.MAXIMIZED_BOTH);
        JPanel panel = new JPanel();
        add(panel, BorderLayout.NORTH);
        final JCheckBox showMapMarker = new JCheckBox("Map markers visible");
        showMapMarker.setSelected(map.getMapMarkersVisible());
        showMapMarker.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                map.setMapMarkerVisible(showMapMarker.isSelected());
            }
        });
        panel.add(showMapMarker);
        final JCheckBox showTileGrid = new JCheckBox("Tile grid visible");
        showTileGrid.setSelected(map.isTileGridVisible());
        showTileGrid.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                map.setTileGridVisible(showTileGrid.isSelected());
            }
        });
        panel.add(showTileGrid);
        final JCheckBox showZoomControls = new JCheckBox("Show zoom controls");
        showZoomControls.setSelected(map.getZoomContolsVisible());
        showZoomControls.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                map.setZoomContolsVisible(showZoomControls.isSelected());
            }
        });
        panel.add(showZoomControls);
        add(map, BorderLayout.CENTER);

        //
//      map.addMapMarker(new MapMarkerDot(49.814284999, 8.642065999));
//      map.addMapMarker(new MapMarkerDot(49.91, 8.24));
//      map.addMapMarker(new MapMarkerDot(49.71, 8.64));
//      map.addMapMarker(new MapMarkerDot(48.71, -1));
//      map.addMapMarker(new MapMarkerDot(49.807, 8.644));

        map.setDisplayPositionByLatLon(-0.223056, -78.5126, 11);
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        new Demo().setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:22:04.630

不需要修改 JMapViewer 并重新编译它的更好的替代方法是提供您自己的 TileSource 实现，如此处[所示](http://paulusschoutsen.nl/blog/2012/08/java-component-jmapviewer-with-offline-openstreetmap-support/)。

抓住[OfflineOsmTileSource](https://github.com/balloob/JMapViewer/blob/master/org/openstreetmap/gui/jmapviewer/tilesources/OfflineOsmTileSource.java)，并像博客文章所说的那样使用它。

简单而优雅。您只需要一些本地存储的 osm 磁贴，我假设您已经拥有这些磁贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:27:34.400

据我所知，JMapViewer 旨在仅使用在线地图工作。

改变这种行为接缝很复杂。也许您可以通过实现自己的`org.openstreetmap.gui.jmapviewer.TileLoader`实例来实现这一点。该实现只需要能够创建可将特定切片加载到 TileCache 中的 Runnable 实例，并通知已注册的 TileLoaderListener 切片加载已完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:22:58.187

我直接通过源代码编译并更改

> \org\openstreetmap\gui\jmapviewer\tilesources\AbstractOsmTileSource.java

这里是JMapViewer.zip/JMapViewer_src.jar里面的源代码解压Jar文件并复制邮件源代码文件夹中的文件夹/org

[http://svn.openstreetmap.org/applications/viewer/jmapviewer/releases/2011-02-19/JMapViewer.zip](http://svn.openstreetmap.org/applications/viewer/jmapviewer/releases/2011-02-19/JMapViewer.zip)

并更改下一个

```
 public AbstractOsmTileSource(String name, String base_url, String attr_img_url) {
        this.name = name;
     // this.baseUrl = base_url;
        this.baseUrl = "file:///C:/OSM/tiles";
        attrImgUrl = attr_img_url;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T15:52:21.190

我不知道这个线程发生时是否不支持这种方法，但是为了缓存离线切片，他们提供了 OsmFileCacheTileLoader;

[http://josm.openstreetmap.de/doc/org/openstreetmap/gui/jmapviewer/OsmFileCacheTileLoader.html](http://josm.openstreetmap.de/doc/org/openstreetmap/gui/jmapviewer/OsmFileCacheTileLoader.html)

它非常易于使用。

```
this.mapViewer = new JMapViewer();
OsmFileCacheTileLoader ofctl;
try {
    File cacheDir = new File(System.getProperty("user.home"), "OpenStreetMapTileCache");
    logger.info("Home Directory = " + System.getProperty("user.home") + ", cacheDir=" + cacheDir);
    cacheDir.mkdirs();
    ofctl = new OsmFileCacheTileLoader(mapViewer, cacheDir);
    this.mapViewer.setTileLoader(ofctl);
} catch (IOException ex) {
    Logger.getLogger(MapDisplayPanel.class.getName()).log(Level.SEVERE, "Exception creating OsmFileCacheTileLoader" + ex, ex);
} 
```

# api - Flickr API：API 密钥一直无效？

> ID：10657241
> 
> 赞同：5
> 
> 时间：2012-05-18T17:35:33.637
> 
> 标签：api, rest, restful-authentication, flickr

我有一个 Flickr，我用它来从我的手机上传图片，所有图片都是公开的。在我的博客上，我想检索所有要显示的图像，为此我首先尝试创建一个应用程序来获取我的 API 密钥。我正在使用 Flickr API **flickr.people.getPublicPhotos**。据说这个 API 服务不需要身份验证，并将它们放在一起我最终得到了这个调用：

```
http://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=fc94274cd0335f3c171fe22c8490b7d9&user_id=5545356%40N04&extras=description%2Cdate_upload%2Cdate_taken%2Cowner_name%2Coriginal_format%2Ctags%2C+o_dims%2C+views%2C+media%2C+path_alias%2C+url_sq%2C+url_t%2C+url_s%2C+url_q%2C+url_m%2C+url_n%2C+url_z%2C+url_c%2C+url_l%2C+url_o&per_page=40&format=php_serial&api_sig=0c48e2b6b6d9a03521e5ca86a15cf471 
```

问题是每隔大约 10 小时我就会失败并返回错误消息`a:3:{s:4:"stat";s:4:"fail";s:4:"code";i:100;s:7:"message";s:31:"Invalid API Key (Key not found)";}`

我尝试在登录到 Flickr 时创建 API 调用，并且没有登录，在这两种情况下我都会收到错误消息。就像 API 密钥过期或停止工作一样。在 Flickr 上遗漏了有关 API 密钥的内容或可能导致此问题的原因？每天更新两次 URL 真的很令人沮丧。

谢谢

真诚
- Mestika

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:48:35.143

如果我正确阅读了文档，则`&api_sig`查询字符串参数是使用身份验证令牌构造的，该令牌最终会过期。删除该参数（= 不要签署您的 API 请求），我认为您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:53:57.870

Mestika 的评论似乎是正确的。我在使用 API Explorer 时遇到了同样的问题。如果您使用您的帐户 API，或者进入并创建一个新应用程序，然后使用为此提供的 API，那么密钥不会每隔几个小时更改一次。

请求密钥的 url 是： [http ://www.flickr.com/services/apps/create/apply](http://www.flickr.com/services/apps/create/apply)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-09T22:33:22.950

我遇到了同样的问题。

这就是我解决它的方法：

*   **删除**了**auth_token**和**api_sig**参数
*   **将**api_key**值**替换为****应用程序密钥****

 **希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-17T03:14:55.980

我以前遇到过这个问题。使用新的 api 密钥，只接受 https 请求。让我们将您的网址更改为：[https](https://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key) ://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos& api_key .....

我相信它会正常工作。谢谢**

# class - Javafx 2 为鼠标指针图设置通用类

> ID：10657248
> 
> 赞同：1
> 
> 时间：2012-05-18T17:36:05.280
> 
> 标签：class, draw, abstract, javafx-2

我有一个带有 4 个不同指针的切换按钮组

![在此处输入图像描述](../Images/291d67c658f59de21fd905b2825fccaf.png)

当我选择十字准线按钮（最右边的一个）时，我有如下 ![在此处输入图像描述](../Images/db87ff5d808b04d7d09272da7f37b4a7.png)

每个按钮调用一个不同的行指针跟随器：

1.  最左一个按钮：它是一个没有线条的简单指针；
2.  第二个显示只有垂直线指针移动联动；
3.  第三个只有水平线指针移动联动；
4.  一个十字准线。

我想创建一个通用类来设置选定的线，以便我可以在绘图例程中调用它。

此通用/摘要类“将包含”特定行指针跟随器代码在选择相应的按钮时，以这种方式，绘制例程将仅指通用类绘制选择指针线跟随器。

带有十字准线的代码是：

```
public class JavaFXApplicationMove extends Application { 

Path path; 
BorderPane pane; 
Rectangle rect; 
Line LH;
Line LV;
XYChart.Series series1 = new XYChart.Series();     

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectY = new SimpleDoubleProperty(); 

@Override 
public void start(Stage stage) { 

stage.setTitle("Lines plot"); 

final NumberAxis xAxis = new NumberAxis(1, 12, 1); 
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005); 

xAxis.setAnimated(false);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

    @Override 
    public String toString(Number object) { 
        return String.format("%7.5f", object); 
    } 
}); 

//final LineChart<String, Number> lineChart = new LineChart<String, Number> (xAxis, yAxis); 
final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(true); 

series1.setName("Stock1");
series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 

pane = new BorderPane(); 
pane.setCenter(lineChart); 
Scene scene = new Scene(pane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

path = new Path(); 
path.setStrokeWidth(5); 
path.setStroke(Color.RED); 

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 

rect = new Rectangle(); 
rect.setFill(Color.web("yellow", 0.3)); 
rect.setStroke(Color.MAGENTA); 
rect.setStrokeDashOffset(50); 
rect.widthProperty().bind(rectX.subtract(rectinitX)); 
rect.heightProperty().bind(rectY.subtract(rectinitY)); 
pane.getChildren().add(rect); 

//LH=new Line();
LH=LineBuilder.create()
        .startX(0)
        .startY(0)
        .endX(10)
        .endY(.535)
        .strokeWidth(1)
        .stroke(Color.BLACK)
        .build();
pane.getChildren().add(LH); 

LV=LineBuilder.create()
        .startX(0)
        .startY(0)
        .endX(10)
        .endY(.535)
        .strokeWidth(1)
        .stroke(Color.BLACK)
        .build();
pane.getChildren().add(LV);

stage.show(); 
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 

    if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) { 
        rect.setX(mouseEvent.getX()); 
        rect.setY(mouseEvent.getY()); 
        rectinitX.set(mouseEvent.getX()); 
        rectinitY.set(mouseEvent.getY()); 
        LH.setStartX(0);
        LH.setStartY(0);
        LH.setEndX(0);
        LH.setEndY(0);

        LV.setStartX(0);
        LV.setStartY(0);
        LV.setEndX(0);
        LV.setEndY(0);
    } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_RELEASED) { 
        rectX.set(mouseEvent.getX()); 
        rectY.set(mouseEvent.getY()); 
        // Hide the rectangle 
        rectX.set(0); 
        rectY.set(0); 
    } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED || mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) { 
        LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
        NumberAxis yAxis = (NumberAxis) lineChart.getYAxis(); 
        NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 
        System.out.println("(a) xAxis.getLowerBound() "+xAxis.getLowerBound()+" "+xAxis.getUpperBound()); 
        double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
        double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound(); 
        double newYlower=yAxis.getLowerBound(), newYupper=yAxis.getUpperBound(); 

        double xAxisShift = getSceneShift(xAxis);
        double yAxisShift = getSceneShift(yAxis);

        double yAxisStep=yAxis.getHeight()/(yAxis.getUpperBound()-yAxis.getLowerBound());
        double CurrentPrice=yAxis.getUpperBound()-((mouseEvent.getY()-yAxisShift)/yAxisStep);

        double Delta=0.3;
        if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED){
        if(rectinitX.get() < mouseEvent.getX()){    
            newXlower=xAxis.getLowerBound()-Delta;
            newXupper=xAxis.getUpperBound()-Delta;
        }
        else if(rectinitX.get() > mouseEvent.getX()){    
            newXlower=xAxis.getLowerBound()+Delta;
            newXupper=xAxis.getUpperBound()+Delta;
        }    
        xAxis.setLowerBound( newXlower ); 
        xAxis.setUpperBound( newXupper ); 

        if(rectinitY.get() < mouseEvent.getY()){    
            newYlower=yAxis.getLowerBound()+Delta/1000;
            newYupper=yAxis.getUpperBound()+Delta/1000;
        }
        else if(rectinitY.get() > mouseEvent.getY()){    
            newYlower=yAxis.getLowerBound()-Delta/1000;
            newYupper=yAxis.getUpperBound()-Delta/1000;
        }
        yAxis.setLowerBound(newYlower);
        yAxis.setUpperBound(newYupper);

        }           

        //System.out.println("(b) xAxis.getLowerBound() "+xAxis.getLowerBound()+" "+xAxis.getUpperBound()); 
        rectinitX.set(mouseEvent.getX()); 
        rectinitY.set(mouseEvent.getY()); 

        if(mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED && mouseEvent.getY()>yAxisShift && mouseEvent.getY()<yAxisShift+yAxis.getHeight() && mouseEvent.getX()>xAxisShift && mouseEvent.getX()<xAxisShift+xAxis.getWidth()){
        LH.setStartX(xAxisShift);
        LH.setStartY(mouseEvent.getY());
        LH.setEndX(xAxisShift+xAxis.getWidth());
        LH.setEndY(mouseEvent.getY());

        LV.setStartX(mouseEvent.getX());
        LV.setStartY(yAxisShift);
        LV.setEndX(mouseEvent.getX());
        LV.setEndY(yAxisShift+yAxis.getHeight());

        double XX=((mouseEvent.getX() - xAxisShift) / Tgap) + xAxis.getLowerBound();
        double YY=CurrentPrice;
        series1.setName(String.format("%.2g%n",XX) + ", " + String.format("%.4g%n",YY));

        int XLB=(int) xAxis.getLowerBound();
        int XUB=(int) xAxis.getUpperBound();

        }

     } 
    } 
   }; 
private static double getSceneShift(Node node) { 
double shift = 0; 
do {  
    shift += node.getLayoutX();  
    node = node.getParent(); 
} while (node != null); 
return shift; 
}

private static String getHIstLOstY(XYChart.Series S,int XLowerBound,int XUpperBound) { 
double ValLOst=1000000;
double ValHIst=-1000000;
for(int i=XLowerBound; i<XUpperBound; i++){  
    double P=GetPrice(S,i);
    if(ValHIst<P){
        ValHIst=P;
    }
    if(ValLOst>P){
        ValLOst=P;
    }
}
return Double.toString(ValLOst) + "," + Double.toString(ValHIst);
} 

private static double GetPrice(XYChart.Series S,int IX) { 
Object SVal=S.getData().get(IX);
//return SVal.toString().toLowerCase(); 
String Temp=SVal.toString().replaceAll("Data", "");
Temp=Temp.replace("[", "");
Temp=Temp.replace("]", "");
String[] TempArray=Temp.split(",");
return Double.parseDouble(TempArray[1]);     
}

public static void main(String[] args) { 
    launch(args);  
   } 
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:25:22.167

你所有的绘图路由都上交了`EventHandler<MouseEvent>`。因此，更改十字准线类型的最简单方法是替换各种处理程序。

再深入一点，您会发现每个十字准线绘图都基于相似的参数，并且可以分为 3 个步骤：开始、更新和结束。

从我在您的代码中看到的重要参数是`sceneShiftX, sceneShiftY, mouseX, mouseY`. 因此，您需要将绘图代码从鼠标事件处理程序重构为具有下一个方法的单独类：

```
public class SimpleCrosshair {
    public void start(double mouseX, double mouseY);
    public void update(double sceneShiftX, double sceneShiftY, double mouseX, double mouseY);
    public void finish();
} 
```

您将十字准线相关的代码从`MouseEvent.MOUSE_PRESSED`block to `start()`、 from `MouseEvent.MOUSE_RELEASED`to finish() 和 from `MouseEvent.MOUSE_DRAGGED`to `update()`。

现在，当您将所有绘图数据与鼠标事件分开并可以引入一个`interface Crosshair`看起来类似于上面的类和 make 时`SimpleCrosshair implement Crosshair`。

其余的很容易。创建实现类`Crosshair`，该类将为其他十字准线类型进行绘图并引入`private Crosshair currentCrosshair;`您可以在工具栏按钮单击时使用具体实现更新的字段。

你的鼠标事件处理程序看起来像（除了缩放逻辑）：

```
 EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent mouseEvent) {

            if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
                currentCrosshair.start(mouseEvent.getX(), mouseEvent.getY());
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_RELEASED) {
                currentCrosshair.finish();
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED || mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) {
                LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();
                NumberAxis yAxis = (NumberAxis) lineChart.getYAxis();
                NumberAxis xAxis = (NumberAxis) lineChart.getXAxis();

                double xAxisShift = getSceneShift(xAxis);
                double yAxisShift = getSceneShift(yAxis);
                currentCrosshair.update(xAxisShift, yAxisShift, mouseEvent.getX(), mouseEvent.getY());

            }

        }
    } 
```

# jquery - jQuery如何追加高级

> ID：10657251
> 
> 赞同：1
> 
> 时间：2012-05-18T17:36:28.430
> 
> 标签：jquery

所以我的 dom 生成 div`<div id="test">random text goes here</div>`是否可以 jquery 在这个 div 中插入一个 span 标签，例如：`<div id="test"><span>random text goes here</span></div>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:37:23.453

尝试使用`wrapInner`如下功能，

```
$('#test').wrapInner('<span/>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:37:12.233

您正在寻找[`wrapInner()`方法](http://api.jquery.com/wrapInner/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T17:37:39.087

当然，请查看[`$.wrapInner()`](http://api.jquery.com/wrapInner/)：

### 包装元素

```
/* Wrap an HTML structure around the content of each matched element */
$("#test").wrapInner("<span>"); 
```

### 回调函数

或者，您可以使用匿名函数来获得更多控制权：

```
$("#test").wrapInner(function() {
  return '<span class="' + this.id + '" />';
}); 
```

这会将`id`值应用为类名：

```
<div id="test">
  <span class="test">random text goes here</span>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T17:38:13.583

[`$.wrapInner`](http://api.jquery.com/wrapinner/)像这样使用

```
$('#test').wrapInner('<span/>'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T17:43:46.747

或者，如果您想完全控制您的内心事物（例如您还想对您的方法进行一些修改），您可以这样使用它：

```
$("div#test").append(function () {
    //you can refer to the object you are making modifications in as 'this'
    var txt = $(this).text();
    //do your modifications for the 'txt' if needed
    //..
    //finally use return statement to return the value or
    //object you need to the original append function
    //$("<span>") creates a span html element
    return $("<span>").text(txt);
}); 
```

* * *

这个问题已经被很多人用 wrapInner() 方法回答了，我只是想告诉你如何在函数内部创造一些“魔法”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T17:44:20.807

正如其他人回答的那样，您可以使用`wrapInner`. 否则你可以通过使用`html`方法来做到这一点

```
$('#test').html($('<span>').html($('#test').html())); 
```

小提琴：http: [//jsfiddle.net/zcg9B/](http://jsfiddle.net/zcg9B/)

# c# - 将 .rtf 文件加载到 RichTextBox 并保持/保留格式

> ID：10657255
> 
> 赞同：9
> 
> 时间：2012-05-18T17:36:39.527
> 
> 标签：c#, winforms, richtextbox, richtext

`RichTextBox`所有，我将一个日志文件写入一个具有格式下划线、粗体等的 .rtf 文件。我已保存此文件，并希望稍后将其读回以保留其格式。我试过以下

```
tmpRichTextBox.LoadFile(@"F:\Path\File.rtf", RichTextBoxStreamType.RichText); 
```

它加载文件，但没有我的原始格式。如果我将 .rtf 加载到 word 中，则会显示格式。如何将 .rtf 读回`RichTextBox` *包括*其格式？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T11:56:51.690

如果您可以将日志文件保存为 html 格式，则可以使用 WebBrowser Control 读取此文件。像这样：

```
 private void button1_Click(object sender, EventArgs e)
  {
     string fileName = Path.Combine(Environment.CurrentDirectory, "log1.htm");

      webBrowser1.DocumentText = File.ReadAllText(fileName);
   } 
```

**这完美地工作。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:08:44.123

*已编辑：*
您可能会在稍后的代码中丢失格式。某些操作可能会导致格式化丢失。例如， `richTextBox.Font = newFont;`

我遇到了这个问题，但幸运的是我找到了解决方法。这是可以让您更改字体而不会丢失格式的代码：

```
richTextBox.SelectAll();
richTextBox.SelectionFont = newFont;
string rtf = richTextBox.SelectedRtf;
richTextBox.Font = newFont;
richTextBox.Rtf = rtf; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:29:23.890

你检查了吗[`NRTFTree`](http://www.codeproject.com/Articles/11306/NRTFTree-A-class-library-for-RTF-processing-in-C)？

它是一个很棒的 RTF 管理库！

# ios - 将 *.url.com 或 * 添加到 Plist 时 IOS Plist 白名单错误

> ID：10657258
> 
> 赞同：1
> 
> 时间：2012-05-18T17:36:50.270
> 
> 标签：ios, cordova, plist

我有两个适用于 Ios 的应用程序在设备上运行时出现相同的错误。

错误白名单拒绝：

所有被列入白名单的 url 都在 plist externalHost 数组中。

即使我在 plist 中添加 * 作为通配符，在发布表单或调用谷歌地图时，所有 url 都会出现相同的错误。

我还有其他运行良好的应用程序。

有没有其他人遇到过这个问题并且能够解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:45:32.960

在网上搜索了一段时间后终于弄清楚了，问题是（如果你像我一样）你在 Xcode 中错误地将 * 添加到 Cordova.plist 文件中。

您需要将字符串添加为 ExternalHosts 的子节点。为此，首先单击 ExternalHosts 标签左侧的小箭头，使箭头指向下方（这很重要）。然后右键单击 ExternalHosts 标签并单击“添加行”。然后将新行值设置为您想要的任何值。

如果您像以前一样做错了，您可能只是在小箭头仍然指向右侧（关闭位置）时点击 Externalhosts 旁边的 + 号来添加值或添加行。这会添加一个新节点，但不会添加一个子节点。

# coldfusion - 将 cfwindow 存储为冷融合模块

> ID：10657260
> 
> 赞同：0
> 
> 时间：2012-05-18T17:37:01.953
> 
> 标签：coldfusion, module, cfwindow

我是冷融合新手。我有一个 cfwindow，它为我执行各种任务，其中包含一个表单。一切都很好，除了现在我想将 cfwindow 添加到许多页面，并且我想使用某种可以驻留在一个位置以便将来轻松编辑的模块来做到这一点。Coldfusion 有类似模块的东西吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:43:25.447

是的，ColdFusion 有很多东西，比如模块：

*   cfinclude 只是在当前页面中包含另一个 CF 页面
*   CustomTags [http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=reuseCode_2.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=reuseCode_2.html) 非常强大
*   ColdFusion 组件中可以有显示和业务逻辑 - [http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=UseFlexDataService_05.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=UseFlexDataService_05.html)

# android - Android + Phonegap/Cordova + Sencha：拖动/滚动

> ID：10657263
> 
> 赞同：3
> 
> 时间：2012-05-18T17:37:27.917
> 
> 标签：android, html, cordova, sencha-touch

我正在 Eclipse 中使用 phonegap 开发 Sencha Touch 应用程序，在多个 android 设备（Android 2.3 - 4.0，例如galaxy nexus GT-i9250M）上进行测试。我正在使用一个基本的煎茶列表。现在这是问题（在大多数设备上发生的次数最多）。当我向下滚动列表时，我在 logcat 中收到此警告：

05-18 13:01:26.414: W/webview(20422): 在等待 WebCore 响应触地时错过了拖拽。

发生这种情况时，似乎根本没有记录拖动手势，从而导致非常不愉快的滚动动作。小滑动效果很好，它确实是导致问题的阻力（基本上只是冻结）......

以前的研究告诉我这是一个经常出现的 android 错误，但我在任何地方都找不到任何解决方案或解决方法。尝试了这里所述的一些事情：http: [//uihacker.blogspot.ca/2010/10/android-bug-miss-drag-as-we-are-waiting.html](http://uihacker.blogspot.ca/2010/10/android-bug-miss-drag-as-we-are-waiting.html)

编辑：还从上述同一个人那里尝试了这种技术，使用 sencha 事件系统（itemtouchstart）和文档捕获 touchstart 事件。 [http://uihacker.blogspot.ca/2011/01/android-touchmove-event-bug.html](http://uihacker.blogspot.ca/2011/01/android-touchmove-event-bug.html)

但没有成功，

有人有什么建议吗？解决方法？任何事物？

谢谢！

# ssas - SSAS 分区切片表达式

> ID：10657267
> 
> 赞同：2
> 
> 时间：2012-05-18T17:37:43.623
> 
> 标签：ssas, mdx, partitioning

我按最近 13 个月对我的多维数据集进行分区，然后是一个旧分区来保存较早的月份。

我已经成功创建了动态分区，但是现在我需要为每个分区添加一个动态切片。

我想我可以在分区切片表达式中使用它：

```
 [Dim Date].[Month].&[" + CStr(Month(Now())) + "].lag(8) 
```

但它失败了。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:23:31.357

我尝试了一整天，但最终解决了分区切片表达式不喜欢任何不是维度成员值的东西。

需要明确的是，我的目标是使用上面描述的 14 个分区创建动态分区。最佳实践建议根据 Mosha 的[文章](http://sqlblog.com/blogs/mosha/archive/2008/10/14/get-most-out-of-partition-slices.aspx)在分区上也使用切片，但由于我的分区是动态的，所以我的切片需要是动态的。

我终于在我的日期维度中添加了一个成员，它模仿了我想要创建的 14 个分区的动态标签。接下来，我将新的日期维度成员值引用到每个相应的分区切片，基本上将“动态”切片移动到多维数据集结构。

它工作得很好，给了我另一个有用的维度成员。我还使用[分区方案](https://stackoverflow.com/questions/10601457/create-a-partition-function-in-sql)、文件组等将数据仓库中的事实表与相同的 14 个分区进行了分区。另外，由于一切都是动态的，因此我的 SSIS 包要简单得多，并且不需要移动 DDL 任务周围的分区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:41:01.757

你在哪里做这个？

您应该使用 T-SQL 查询而不是 DMX 查询对多维数据集上的数据仓库进行分区：

![在此处输入图像描述](../Images/9f9a8e15f48335c6fc4aa3e6bc22ecdc.png)

# sql - Where Exists 查询返回不正确的结果

> ID：10657268
> 
> 赞同：0
> 
> 时间：2012-05-18T17:37:48.820
> 
> 标签：sql

此处的内部查询返回仅出现在其中一个表中的值。外部查询应该返回这些的计数。相反，它返回整个表，而不仅仅是 NULL 值。

```
select count(*) from tblicd
where exists
(
select i.icd_id
from tblicd i left outer join icd_jxn on icd_jxn.icd_id=i.icd_id
where icd_jxn.icd_id is null
) 
```

内部查询

```
select i.icd_id
    from tblicd i left outer join icd_jxn on icd_jxn.icd_id=i.icd_id
    where icd_jxn.icd_id is null 
```

工作并做我想做的事。我想（使用这样的子查询方法）使用外部查询来返回内部查询返回的行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:42:41.057

您需要在子查询中加入两个（外部和内部）`tblicd`表：

```
and i.icd_id = tblicd.icd_id 
```

（或任何表的 id `tblicd`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:53:18.870

您发布的查询没有任何意义。但是，根据您的描述，听起来您有两个表，并且您正在尝试查找两个表中都不存在的任何 ID。如果这是正确的，你应该尝试这样的事情：

```
select count(*) as cnt
from table1 t1 
     full outer join
     table2 t2
     on t1.id = t2.id
where t1.id is null
      or t2.id is null 
```

这可能不适用于您使用的数据库，但由于您没有告诉我们，我们无法定制解决方案以适合您的 SQL 方言。

* * *

根据修订后的问题，您可以通过多种方式简化此问题：

```
select count(*) 
from tblicd 
where not exists (select i.icd_id
                  from icd_jxn
                  where icd_jxn.icd_id = tblicd)

select count(tblicd.icd_id)
from tblicd 
     left join
     icd_jxn
     on tblicd.icd_id = icd_jxn.icd_id
where icd_jxn.icd_id is null

select count(tblicd.icd_id)
from tblicd
where icd_id not in (select icd_id 
                     from icd_jxn) 
```

基本上，没有理由选择`tblicd`两次。

# xcode - 删除了 libxml2.dylib

> ID：10657274
> 
> 赞同：1
> 
> 时间：2012-05-18T17:38:56.190
> 
> 标签：xcode, libxml2

我不小心从我的系统中删除了 libxml2.dylib 文件（Xcode 无法通过“选择框架...”找到它）。我怎样才能找回它？
我做了以下事情：
- 通过“构建阶段”选项卡插入 libxml2.dylib
- 从构建阶段
删除它 - 从项目中删除它
- 选择“移动到垃圾箱”
- 清除垃圾箱

问候莱昂

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T13:53:06.533

我有同样的问题，错误地删除了一个 *.dylib 库并且在编译我的项目时遇到了问题......

解决此问题的方法是将丢失的 *.dylib 文件从用户库复制回 SDK 目标。

在我的情况下，丢失的文件是“libz.1.2.5.dylib”，所以我做了：

```
cp /usr/lib/libz.1.2.5.dylib /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/usr/lib/ 
```

重新打开Xcode，它就解决了...... :)

# wpf - WPF：添加到边距而不覆盖现有值

> ID：10657275
> 
> 赞同：0
> 
> 时间：2012-05-18T17:39:06.743
> 
> 标签：wpf, xaml, margin

我定义了两种简单的边距样式，一种基于另一种。

```
<Style x:Key="marginStyle" TargetType="FrameworkElement">
    <Setter Property="Margin" Value="0,10,20,10"/>
</Style>

<!-- based on marginStyle -->
<Style x:Key="marginIndentStyle" TargetType="FrameworkElement" BasedOn="{StaticResource marginStyle}">
    <Setter Property="Margin" Value="10,0,0,0"/>
</Style> 
```

在派生的“marginIndentStyle”样式中，我想将边距的左道具调整为比基本“marginStyle”样式中的左道具多 10，即比当前设置的值多 10。使用上面的类似内容会完全覆盖这些值。我只想添加到它，使得派生的“marginIndentStyle”样式的结果边距是“10,10,20,10”。

请注意，我不想将其值严格设置为 10、10、20、10 b/c 我希望“marginStyle”样式的任何更改都反映在派生的“marginIndentStyle”样式中。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:03:01.600

AFAIK，如果没有大量代码，这是不可能的。

一种更简单的方法是使用两种具有静态边距的样式，这些样式应用于两个不同的面板\装饰器。

就像是：

```
<Border Style="{StaticResource marginIndentStyle}">
    <Border Style="{StaticResource marginStyle}">
         .....
    </Border>
</Border> 
```

这实际上将增加利润。因此，第二个边界中的任何内容都将具有作为第一个和第二个边距的组合的边距。

# python-3.x - 如何实现 Frobenius 伪素数算法？

> ID：10657281
> 
> 赞同：4
> 
> 时间：2012-05-18T17:39:24.200
> 
> 标签：python-3.x, algorithm, math, primes

有人告诉我，Frobenius 伪素数算法的运行时间是 Miller-Rabin 素数检验的三倍，但分辨率却是七倍。因此，如果前者运行 10 次，后者运行 30 次，两者的运行时间相同，但前者的分析能力提高了 233%。在试图找出如何进行测试时，最后发现了以下带有算法的论文：

[Frobenius 伪素检验的简单推导](http://eprint.iacr.org/2008/124.pdf)

尝试实现下面的算法，但程序从不打印出数字。请更熟悉数学符号或算法的人验证发生了什么？

**编辑 1：**下面的代码添加了更正，但`compute_wm_wm1`缺少实现。有人可以从算法的角度解释递归定义吗？这对我来说不是“点击”。

**编辑2：**错误代码已被删除，并在`compute_wm_wm1`下面添加了该功能的实现。它似乎有效，但可能需要进一步优化才能实用。

```
from random import SystemRandom
from fractions import gcd
random = SystemRandom().randrange

def find_prime_number(bits, test):
    number = random((1 << bits - 1) + 1, 1 << bits, 2)
    while True:
        for _ in range(test):
            if not frobenius_pseudoprime(number):
                break
        else:
            return number
        number += 2

def frobenius_pseudoprime(integer):
    assert integer & 1 and integer >= 3
    a, b, d = choose_ab(integer)
    w1 = (a ** 2 * extended_gcd(b, integer)[0] - 2) % integer
    m = (integer - jacobi_symbol(d, integer)) >> 1
    wm, wm1 = compute_wm_wm1(w1, m, integer)
    if w1 * wm != 2 * wm1 % integer:
        return False
    b = pow(b, (integer - 1) >> 1, integer)
    return b * wm % integer == 2

def choose_ab(integer):
    a, b = random(1, integer), random(1, integer)
    d = a ** 2 - 4 * b
    while is_square(d) or gcd(2 * d * a * b, integer) != 1:
        a, b = random(1, integer), random(1, integer)
        d = a ** 2 - 4 * b
    return a, b, d

def is_square(integer):
    if integer < 0:
        return False
    if integer < 2:
        return True
    x = integer >> 1
    seen = set([x])
    while x * x != integer:
        x = (x + integer // x) >> 1
        if x in seen:
            return False
        seen.add(x)
    return True

def extended_gcd(n, d):
    x1, x2, y1, y2 = 0, 1, 1, 0
    while d:
        n, (q, d) = d, divmod(n, d)
        x1, x2, y1, y2 = x2 - q * x1, x1, y2 - q * y1, y1
    return x2, y2

def jacobi_symbol(n, d):
    j = 1
    while n:
        while not n & 1:
            n >>= 1
            if d & 7 in {3, 5}:
                j = -j
        n, d = d, n
        if n & 3 == 3 == d & 3:
            j = -j
        n %= d
    return j if d == 1 else 0

def compute_wm_wm1(w1, m, n):
    a, b = 2, w1
    for shift in range(m.bit_length() - 1, -1, -1):
        if m >> shift & 1:
            a, b = (a * b - w1) % n, (b * b - 2) % n
        else:
            a, b = (a * a - 2) % n, (a * b - w1) % n
    return a, b

print('Probably prime:\n', find_prime_number(300, 10)) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T19:16:26.143

由于不熟悉符号，您似乎完全误解了该算法。

```
def frobenius_pseudoprime(integer):
    assert integer & 1 and integer >= 3
    a, b, d = choose_ab(integer)
    w1 = (a ** 2 // b - 2) % integer 
```

那来自于线

> W [0] ≡ 2 (mod n) 和 W [1] ≡ a ² b ^(-1) - 2 (mod n)

但是这里的 b ^(-1)并不意味着`1/b`，而是modulo的*模逆*，即带有 的整数。[您可以通过扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)的连分数展开或等效地，但计算量稍多一些，最容易找到这样的 a 。由于您可能不熟悉连分数，我推荐后者。`b``n``c``b·c ≡ 1 (mod n)``c``b/n`

```
 m = (integer - d // integer) // 2 
```

来自

> n - (Δ/n) = 2m

并将[Jacobi 符号](http://en.wikipedia.org/wiki/Jacobi_symbol)误解为分数/除法（诚然，我在这里将其显示为更像分数，但由于该站点不支持 LaTeX 渲染，我们将不得不这样做）。Jacobi符号是Legendre符号的推广——表示相同——它表示一个数是否是模一个奇素数的二次余数（如果`n`是一个模数二次余数，`p`即有一个`k`和不是 的倍数，那么，如果是 的倍数，则，否则`k^2 ≡ n (mod p)``n``p``(n/p) = 1``n``p``(n/p) = 0``(n/p) = -1`）。Jacobi 符号解除了“分母”为奇质数的限制，并允许任意奇数作为“分母”。它的值是所有素数除法`n`（根据多重性）具有相同“分子”的勒让德符号的乘积。更多关于这一点，以及如何在链接文章中有效地计算雅可比符号。该行应正确读取

```
m = (integer - jacobi_symbol(d,integer)) // 2 
```

以下几行我完全看不懂，从逻辑上讲，这里应该遵循使用递归计算 W [m]和 W [m+1]

> W [2j] ≡ W [j] ² - 2 (mod n)
> 
> W [2j+1] ≡ W [j] W [j+1] - W [1] (mod n)

围绕 PDF 的公式 (11) 给出了使用该递归计算所需值的有效方法。

```
 w_m0 = w1 * 2 // m % integer
    w_m1 = w1 * 2 // (m + 1) % integer
    w_m2 = (w_m0 * w_m1 - w1) % integer 
```

该函数的其余部分几乎是正确的，当然，由于之前的误解，它现在得到了错误的数据。

```
 if w1 * w_m0 != 2 * w_m2: 
```

这里的（不）等式应该是模数`integer`，即`if (w1*w_m0 - 2*w_m2) % integer != 0`。

```
 return False
    b = pow(b, (integer - 1) // 2, integer)
    return b * w_m0 % integer == 2 
```

但是请注意，如果`n`是素数，则

```
b^((n-1)/2) ≡ (b/n) (mod n) 
```

其中`(b/n)`是勒让德（或雅可比）符号（对于素数“分母”，雅可比符号*是*勒让德符号），因此`b^((n-1)/2) ≡ ±1 (mod n)`. 因此，您可以将其用作额外检查，如果 W [m]不是 2 或`n-2`，`n`则不能是素数，如果`b^((n-1)/2) (mod n)`不是 1 或，也不能是`n-1`。

可能`b^((n-1)/2) (mod n)`首先计算并检查它是 1 还是`n-1`一个好主意，因为如果该检查失败（顺便说一下，这是[欧拉伪素](http://en.wikipedia.org/wiki/Euler_pseudoprime)测试），您不再需要另一个同样昂贵的计算，并且如果它成功，很可能无论如何你都需要计算它。

关于更正，它们似乎是正确的，除了一个我之前忽略的小故障可能更糟：

```
if w1 * wm != 2 * wm1 % integer: 
```

这仅将模数应用于`2 * wm1`。

关于 W [j]的递归，我认为最好用一个有效的实现来解释，首先是为了便于复制和粘贴：

```
def compute_wm_wm1(w1,m,n):
    a, b = 2, w1
    bits = int(log(m,2)) - 2
    if bits < 0:
        bits = 0
    mask = 1 << bits
    while mask <= m:
        mask <<= 1
    mask >>= 1
    while mask > 0:
        if (mask & m) != 0:
            a, b = (a*b-w1)%n, (b*b-2)%n
        else:
            a, b = (a*a-2)%n, (a*b-w1)%n
        mask >>= 1
    return a, b 
```

然后在两者之间进行解释：

```
def compute_wm_wm1(w1,m,n): 
```

我们需要 W [1]的值、所需数字的索引以及将模数作为输入的数字。W [0]的值始终为 2，因此我们不需要它作为参数。

称它为

```
wm, wm1 = compute_wm_wm1(w1,m,integer) 
```

in `frobenius_pseudoprime`（除了：不是一个好名字，大多数返回的数字`True`都是实数）。

```
 a, b = 2, w1 
```

我们分别初始化W [0]`a`和W [1]。在每一点，保存 W [j]的值和W [j+1]的值，其中是到目前为止消耗的位的值。例如，使用、和的值如下：`b`[[`a`[`b`[`j``m``m = 13``j``a``b`]]]]

```
consumed remaining  j    a    b
           1101     0   w_0  w_1
   1        101     1   w_1  w_2
   11        01     3   w_3  w_4
   110        1     6   w_6  w_7
   1101            13  w_13  w_14 
```

这些位是从左到右消耗的，所以我们必须找到第一个设置位`m`并将我们的“指针”放在它之前

```
 bits = int(log(m,2)) - 2
    if bits < 0:
        bits = 0
    mask = 1 << bits 
```

我从计算的对数中减去了一点，只是为了完全确定我们不会被浮点错误所迷惑（顺便说一下，使用`log`限制你到最多 1024 位的数字，大约 308 个十进制数字；如果你想处理更大的数字，你必须以不同的方式找到以 2 为底的对数`m`，使用`log`是最简单的方法，它只是一个概念证明，所以我在这里使用它）。

```
 while mask <= m:
        mask <<= 1 
```

移动掩码直到它大于`m`，所以设置的位就在`m`第一个设置位之前。然后向后移动一个位置，因此我们指向该位。

```
 mask >>= 1
    while mask > 0:
        if (mask & m) != 0:
            a, b = (a*b-w1)%n, (b*b-2)%n 
```

如果设置了下一位，则消耗位的初始部分的值`m`从`j`到`2*j+1`，因此我们需要的 W 序列的下一个值是 W [2j+1] for`a`和 W [2j+2] for `b`。由上述递归公式，

```
W_{2j+1} = W_j * W_{j+1} - W_1 (mod n)
W_{2j+2} = W_{j+1}^2 - 2 (mod n) 
```

因为`a`是 W [j]和`b`是 W [j+1]，`a`变成`(a*b - W_1) % n`和`b`变成`(b * b - 2) % n`。

```
 else:
            a, b = (a*a-2)%n, (a*b-w1)%n 
```

如果下一位未设置，则消耗位的初始部分的值`m`从`j`变为`2*j`，因此`a`变为 W [2j] = (W [j] ² - 2) (mod n)，`b`变为 W [2j+1] = (W [j] * W [j+1] - W [1] ) (mod n)。

```
 mask >>= 1 
```

将指针移动到下一位。当我们经过最后一位时，`mask`变为 0 并且循环结束。消耗位的初始部分`m`现在是所有`m`位，所以值当然是`m`。然后我们可以

```
 return a, b 
```

一些补充说明：

```
def find_prime_number(bits, test):
    while True:
        number = random(3, 1 << bits, 2)
        for _ in range(test):
            if not frobenius_pseudoprime(number):
                break
        else:
            return number 
```

在较大的数字中，素数不太频繁，因此仅选择随机数可能需要多次尝试才能找到一个。如果您选择一个随机数并按顺序检查候选者，您可能会更快地找到一个素数（或可能的素数）。

另一点是，像 Frobenius 测试这样的测试发现例如 3 的倍数是合数的代价不成比例。在使用这样的测试（或 Miller-Rabin 测试，或 Lucas 测试，或 Euler 测试，......）之前，您绝对应该进行一些试验划分以清除大多数复合材料并仅在以下情况下进行工作它有一个值得的战斗机会。

哦，该`is_square`函数不准备处理小于 2 的参数，除零错误潜伏在那里，

```
def is_square(integer):
    if integer < 0:
        return False
    if integer < 2:
        return True
    x = integer // 2 
```

应该有帮助。

# ruby-on-rails - 为什么我的 Rails 关联在控制器中不起作用，但在视图中起作用？

> ID：10657283
> 
> 赞同：0
> 
> 时间：2012-05-18T17:39:32.737
> 
> 标签：ruby-on-rails, associations, instance-variables

我有`User has_one Shop`& `Shop has_many Branches`。

当我这样做时：

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
    @shop = @user.shop
    @branches = @shop.branches
  end
... 
```

`@user`&`@shop`实例变量在视图中有效，但给`@branches`了我错误：

```
undefined method `branches' for nil:NilClass

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:13:in `show' 
```

* * *

`@branches`但是，如果我在控制器中丢弃：

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
    @shop = @user.shop
  end
... 
```

....并在视图中使用它：

```
@shop.branches 
```

....有用！一直在视图中使用有点累`@shop.branches`，所以我更喜欢只使用`@branches`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:53:06.820

该消息表明`@shop`在控制器中为 nil。如果它在视图中使用相同的请求，则意味着它肯定`@shop`已设置在控制器之后的其他位置。

# java - 编写依赖于 gem 和 Maven 项目的 JRuby 代码

> ID：10657284
> 
> 赞同：7
> 
> 时间：2012-05-18T17:39:37.400
> 
> 标签：java, maven, jar, jruby

虽然半年前[有人问过类似的问题，但我想知道编写 JRuby 代码的最佳方法是什么，它既依赖于 gem，又依赖于 Maven 项目。](https://stackoverflow.com/questions/7871115/whats-the-best-practice-for-using-bundler-git-and-jruby-gems-with-maven)Bundler 似乎是 Ruby 社区的标准 Maven 类工具，我更喜欢使用它，但看起来[bundler 不会支持 Maven 依赖项](https://github.com/carlhuda/bundler/pull/1683)。

是`gem install mvn:<groupId>:<artifactId>`唯一真正的解决方案吗？我可以把它放到一个 Rakefile 中吗？那么人们是否使用 rake 而不是 bundler 进行所有 gem 安装？有没有人有解决这个问题的其他建议？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T22:59:46.860

我在[jbundle](https://github.com/mkristian/jbundler)中找到了答案。使用 jbundler 定义 a `Mvnfile`，它看起来类似于 a `Gemfile`，并将您的 Maven 依赖项放在那里。

```
repository 'http://your-local-repo-here/'
jar 'groupId:artifactId', '1.0.0-SNAPSHOT'
... 
```

jbundler 甚至可以与本地安装的（在您的 .m2/repository 中）jar 一起使用，让您可以与正在进行的 Java 项目集成。

由于它与 Bundler 集成，因此无需使用其他工具来拉取 Maven 依赖项。只是`bundle install; bundle exec something.rb`。奇怪的是，Maven 依赖解析发生在`bundle exec`time 而不是`bundle install`，但我可以忍受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:43:13.623

所以我是写这篇文章的人，并且确实遇到了一些阻力，你可以说:-)。这是更详细地描述它的博客文章：http: [//hokiesuns.blogspot.com/2012/02/bundler-maven-for-your-jruby-projects.html](http://hokiesuns.blogspot.com/2012/02/bundler-maven-for-your-jruby-projects.html)

如果这对您有帮助，那么请回帖指出，或者如果您认为 jbundler 有效，那么这也是一个很好的解决方案（我没有深入研究它，但看起来很有趣）并且很高兴我的工作启发了其他人！

# python - 秩> 1且维度之一== 0的numpy数组

> ID：10657287
> 
> 赞同：2
> 
> 时间：2012-05-18T17:39:57.757
> 
> 标签：python, numpy

我正在实现一个将文件中的数据读取到多维`numpy`数组中的函数。数据在维度长度的意义上是有规律的，但是，某些维度可能会丢失，在这种情况下，我会让那个维度的长度为`0`. 所以我偶然发现了这种行为：

```
In [1]: np.random.random((3,3))
Out[1]: 
array([[ 0.59756568,  0.47198749,  0.23442854],
       [ 0.29374254,  0.58289927,  0.40497268],
       [ 0.00481053,  0.63471263,  0.90053086]])

In [2]: np.random.random((0,3,3))
Out[2]: array([], shape=(0, 3, 3), dtype=float64) 
```

好的，所以我得到一个空数组。如果我将其视为第 2 维和第 3 维是第 1 维的子集，即为 nil，则这是有道理的，因此整个数组为 nil。但是，我希望`np.random.random((3,3,0))`相当于`np.random.random((3,3))`. 然而，

```
In [3]: np.random.random((3,3,0))
Out[3]: array([], shape=(3, 3, 0), dtype=float64) 
```

又是一个空数组。

这是预期的行为吗？`np.array((3,3))`我理解and `np.array((3,3,1))`or之间的区别`np.array((1,3,3))`，但我正在寻找一个解释，为什么长度维度会`0`退化整个数组而不仅仅是那个维度。只是我，还是这是 Python/numpy WTF 之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:58:24.817

正如我在评论中所说，您将得到一个空数组，因为如果任何维度为零，则数组的大小始终为零。我能问一下你想做什么吗？如果您想要一个空的第三维，您可以尝试以下操作：

```
>>> x = numpy.random.random((3,3))
>>> y = x[..., numpy.newaxis]
>>> y

array([[[ 0.92418241],
        [ 0.76716579],
        [ 0.82485034]],

       [[ 0.30571695],
        [ 0.71012271],
        [ 0.54609355]],

       [[ 0.98192734],
        [ 0.25505518],
        [ 0.75473749]]])

>>> y.shape
(3, 3, 1)

>>> x.shape
(3, 3) 
```

# ios - iCarousel 视图中的视图？

> ID：10657289
> 
> 赞同：0
> 
> 时间：2012-05-18T17:40:03.100
> 
> 标签：ios, xcode, icarousel

我想将“iCarousel”集成到我的项目中。这是我想要的屏幕截图：

![在此处输入图像描述](../Images/4b259f23f3394faff4de44161bd348a4.png)

在黑色视图中，我想要线性旋转木马。所以我实现了他们在示例中所做的所有事情。

现在我收到以下信息：

![在此处输入图像描述](../Images/3f312252c9256e6a80d68bcd203dec73.png)

这意味着，视图现在位于完整的 Detailview 上。也许你可以帮我解决这个问题？

来自德国的问候 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:00:22.023

也许您需要在轮播视图上设置 clipsToBounds = YES？

# jquery - jQuery UI 可拖动包含区域随屏幕大小而变化

> ID：10657290
> 
> 赞同：0
> 
> 时间：2012-05-18T17:40:08.457
> 
> 标签：jquery, html, css, jquery-ui, draggable

我有一个大图像，它保存在一个较小的 div 中。div 已`position:absolute; top:10px; left:10px; width:563px; height:563px; z-index:200; overflow:hidden`应用于它，因此只有图像的一部分可见。该 div 位于另一个 div 中，该 div 在屏幕上居中`width:1000px; margin:0 auto; position:relative;`

我已经应用于`$('#theImage').draggable({cursor: 'move', containment: [-523,-738,361,146]});`图像，这意味着它可以在 div 周围拖动，但图像的外边缘永远不会超出 div 的外边缘。（即图像的左边缘不能被拖动到 div 的左边缘之外，这同样适用于右、上和下边缘）因此图像总是完全填满 div；没有可见的背景。

当我的浏览器最大化时这工作正常，但当它不是时会改变 - 我假设包含 X 和 Y 值是从浏览器窗口而不是父 div 计算的。有什么办法可以强制它从 div 计算？（将包含设置为“父级”不起作用，因为它允许将图像拖到看不见的地方（即，现在可以将图像的每个边缘拖到 div 的相对边缘）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T20:03:43.980

我有同样的问题，这是我解决它的方法：

```
var windowX = $( window ).width(); //determines the width of the browser window
var windowY = $( window ).height();//determines the height of the browser window
var imageX = 2000; //put the width of your image here. my image was 2000x1000
var imageY = 1000;//image height
$("#theImage").draggable({ containment: [(windowX - imageX),(windowY - imageY),0,0] }); 
```

最后一行包含左上角和浏览器宽度/高度之间的图像。希望这可以帮助！

# java - 将是 SimpleDateFormat.parse 的一个 bug

> ID：10657291
> 
> 赞同：-4
> 
> 时间：2012-05-18T17:40:09.163
> 
> 标签：java, simpledateformat

我有以下代码：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
TimeZone tz2 = TimeZone.getTimeZone("GMT");
dateFormat.setTimeZone(tz2);
String aDate = "2012-05-02 23:59:59";

for(int i=0 ; i<1000; i++){
        dateFormat.setLenient(false);
        ParsePosition p = new ParsePosition(0);
        Date date = dateFormat.parse(aDate, p);
        java.sql.Date sqlDate = null;
        if (p.getIndex() != aDate.length())
           throw new RuntimeException("just a test");

} 
```

经过多次测试，它非常陌生。基本上，它永远不会完全完成，它非常随机地遇到异常。

你看代码应该是正确的，但是：当它可能`i`是 500 或者`i`是 799 或者`i`是 988 时它遇到了异常（这里只是举一些例子，意味着它在 = 0 时没有发生`i`，它实际上已经完成了一些圈子），异常可能会在 Date`date = dateFormat.parse(aDate, p);`或 line中抛出`throw new RuntimeException("just a test");`；

每个人都可以建议我有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:45:29.810

`SimpleDateFormat.parse()`使用调用的实例变量`calendar`从字符串构建日期。如果两个线程试图同时解析，`calendar`变量会被破坏，你会得到错误的结果。

使变量不是静态的不一定有帮助，因为两个线程仍然可以使用同一个控制器。更好的解决方案是在每次解析日期时创建一个新的 DateFormat 对象，或者使用线程本地存储。更好的是，使用具有线程安全解析器的[JodaTime 。](http://joda-time.sourceforge.net/)

使用 SDF 时还要考虑以下几点。

1.  创建 SimpleDateFormat 是[昂贵的](http://www.thedwick.com/blog/2008/04/simpledateformat-performance-pig/)。除非很少使用，否则不要使用它。

2.  好的，如果你能忍受一点阻塞。如果 formatDate() 使用不多，请使用。

3.  如果您重用线程（[线程池](http://download.oracle.com/javase/tutorial/essential/concurrency/pools.html)），则最快的选择。使用比 2 更多的内存，并且具有更高的启动开销。

对于应用程序 2\. 和 3\. 都是可行的选择。哪个最适合您的情况取决于您的用例。提防过早的优化。仅当您认为这是一个问题时才这样做。

对于第 3 方将使用的库，我将使用选项 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T17:54:26.487

即使重新运行 20 次，您的代码也能正常工作。因此，让我们猜测一下您的**真实**SSCCE 可能是什么样子：

```
public static void main(String[] args) {
  final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
  dateFormat.setLenient(false);
  final String aDate = "2012-05-02 23:59:59";
  for (int i = 0; i < 2; i++)
    new Thread() { public void run() {
      for (int i = 0; i < 1000; i++) {
        ParsePosition p = new ParsePosition(0);
        dateFormat.parse(aDate, p);
        if (p.getIndex() != aDate.length())
          throw new RuntimeException("just a test");
      }
      System.out.println("Done");
    }}.start();
} 
```

这或多或少与您描述的方式不同，原因很明显。听听@Bhavik Ambani 的建议，他正在为您介绍这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:45:39.580

p.getIndex() != aDate.length()

此语句返回 true，这意味着当您解析日期时您没有使用整个字符串 aDate，这意味着 aDate 要么有时区，要么还有其他信息

# postgresql - 将 java.lang.Boolean[][] 转换为可用的 MATLAB 数组？

> ID：10657295
> 
> 赞同：0
> 
> 时间：2012-05-18T17:40:21.813
> 
> 标签：postgresql, matlab

我正在使用 MATLAB 访问 postgresql 数据库。我在尝试访问类型列时遇到问题`boolean[]`：

```
x;#% x is a <1x1 org.postgresql.jdbc4.Jdbc4Array> 
```

访问`real[]`值时，我可以采取以下方法：

```
double(x.getArray()); 
```

不幸的是，`boolean[]`这会导致以下错误消息：

```
Undefined function 'toDouble' for input arguments of type 'logical'. 
```

所以我认为转换为`logical`first 可能有效：

```
logical(x.getArray()); 
```

除了这也不起作用。

```
Error using logical
Conversion to logical from java.lang.Boolean[][] is not possible. 
```

可能会出现问题，因为 java.lang.Boolean 不是从 java.lang.Number 派生的，但是[关于转换 java 返回类型的 MATLAB 文档](http://www.mathworks.com/help/techdoc/matlab_external/f6671.html#bq__508-1)使这看起来不应该是一个问题。

我在这里做错了吗？如何从`fetch`结果中获取可在 MATLAB 中使用的逻辑数组？如果一切都失败了，我可以用数字类型的数组而不是 重建表`boolean[]`，但看起来这应该是可能的，而不是那么远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:38:00.273

我怀疑这是由于 Java 中`Boolean`(一个对象) 和`boolean`, 一个原语之间的差异造成的。Matlab 转换实际上是为处理原语而设置的，不一定是它们关联的对象包装器。

我认为这个转换需要一个循环，如下：

```
%Setup test
b = java.lang.Boolean.FALSE;
array = java.lang.reflect.Array.newInstance(b.getClass(), [5 6]);
for ix1=1:length(array); 
    for ix2 = 1:(length(array(1))); 
        array(ix1, ix2)=b; 
    end; 
end;
%Now `array` is an initialize 2D Java array of type Boolean.

%To convert to a Matlab logical array
matArray = false(length(array), length(array(1)));  %Initialize
for ix1=1:size(matArray, 1); 
    for ix2 = 1:size(matArray, 2); 
        matArray(ix1, ix2)=(array(ix1, ix2).booleanValue());
        %The  `booleanValue()` method converts from `Boolean` class  to `boolean` primitive
    end; 
end; 
```

# wordpress - WordPress 作者页面，帖子按类别分隔

> ID：10657309
> 
> 赞同：0
> 
> 时间：2012-05-18T17:41:01.427
> 
> 标签：wordpress, categories, author

创建我的 WordPress author.php 模板页面并遇到了一个小障碍。我希望能够按作者所在的父类别将所有作者的帖子分开。例如，我有这些主要类别的帖子：“书籍”、“音频”、“视频”、“课程”。在作者页面上，我希望这些总体类别成为每个部分的标题，然后在标题下列出与该部分相关的帖子。

是运行多个循环的唯一方法还是有更有效的方法？

谢谢！

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:46:09.197

您需要保留文件名 author.php 以便获得该 slug 和链接，但删除标准 WP 循环并为每个类别使用新查询，如下所示：

```
<?php $my_query = new WP_Query('category_name=mycategoryname&showposts=-1'); ?>

<?php while ($my_query->have_posts()) : $my_query->the_post(); ?>

<a href="<?php the_permalink() ?>" title="<?php the_title(); ?>">

<?php the_title(); ?></a>

<?php endwhile; ?> 
```

这可以在页面模板中多次使用而不会发生冲突。一篇`showposts=-1`文章改为 1，十篇文章改为 10，等等。-1 显示全部。

使用 html 将这些循环的输出排列到列中。

# drupal - 德鲁巴。重定向到默认语言首页

> ID：10657310
> 
> 赞同：2
> 
> 时间：2012-05-18T17:41:07.967
> 
> 标签：drupal, redirect

如何将用户重定向到默认语言的主页？例如，当用户快要来的时候，从 sait.com/ 到 sait.com/fr。我尝试使用首页模块，但他重定向到 sait.com//fr/fr 而不是 sait.com/fr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:57:36.097

您可以在用户第一次访问后在客户端上存储一个 cookie 变量，并在此之前检查是否设置了 cookie 值。

创建一个自定义模块并在模块的 hook_init() 方法中，检查是否设置了 cookie，然后不要重定向到任何地方，如果没有设置，设置值然后将他重定向到默认语言主页。

```
if(!isset($_COOKIE['user_visited])) {
    $_COOKIE['user_visited] = true;
    全球$语言
    $default_language = variable_get('language_default', $language);
    drupal_goto($default_language->前缀);
}

```

# drupal - Drupal 备份和恢复

> ID：10657311
> 
> 赞同：0
> 
> 时间：2012-05-18T17:41:15.707
> 
> 标签：drupal, backup, recovery

所以我编写了这个脚本，它基本上创建了 drupal 数据库的 sql 转储，并创建了 www 目录的 tar。我把它从服务器上取下来，放在我的本地机器上。我想把这些备份文件拿来测试一下，看看备份是否稳定以及学习过程。

我的问题是我找不到任何关于如何做到这一点的明确说明。谁能帮我一把？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:14:52.153

您需要在本地计算机上安装 LAMP 堆栈。此外，您需要修改 settings.php 文件以更改数据库连接字符串以匹配您的本地环境。Youi 可能还需要修改settings.php 中的$base_url 变量。

如果您只是简单地恢复，这将不是必需的，但是由于您正在移动安装，所以它是必需的。

# jquery - jQuery / underscore.js 模板 - 与 IE 6+ 兼容？

> ID：10657313
> 
> 赞同：3
> 
> 时间：2012-05-18T17:41:27.617
> 
> 标签：jquery, internet-explorer-6, jquery-templates, underscore.js

所以，我最近才了解到这些，并准备将它们放入一个网站。现在，我提出的问题是，这是否会***在***IE 6+ 中引发任何错误？是的，我知道 IE6，你能做什么.. 当我说错误时，我的意思是 IE 错误/警告。

像往常一样感谢所有帮助，在此先感谢。

-韦斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T21:17:24.100

首先，是的：jQuery 确实可以与 IE6 一起使用——它在[jQuery 主页](http://jquery.com/)上的说明也一样多（将鼠标悬停在“跨浏览器”链接上，您会看到一个显示 IE6+ 的弹出窗口）。（话虽如此，很多第三方jQuery插件不兼容IE6，所以要小心）

Underscore.js 我不太确定——我没有在 IE6 上尝试过，而且[Underscore.js 网站](http://underscorejs.org/)没有明确说明它支持哪些浏览器。但是它确实包含旨在替换旧浏览器缺少的功能的功能，并且 IE6 在 github 上的问题单中进行了讨论，所以我会说试一试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-06T21:21:20.987

Underscore 测试套件现已[发布。](http://underscorejs.org/test/)

在[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)上运行会导致所有当前测试在 IE 6 到 10 中干净地运行，但在 IE 5.5 上则不然。

我还在当前的 Chrome 28、Opera 12 和 Firefox 22 上记录了积极的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T21:02:44.200

检查这一点的一个好方法是在 IE6（或任何浏览器）上运行测试套件：

*   [http://documentcloud.github.io/underscore/test/](http://documentcloud.github.io/underscore/test/)

# git - Git合并在我的文件中留下了HEAD标记

> ID：10657315
> 
> 赞同：115
> 
> 时间：2012-05-18T17:41:33.703
> 
> 标签：git, git-merge, merge-conflict-resolution, git-merge-conflict

我尝试使用 Git 在命令行中合并文件，但出现一条错误消息，告诉我合并已中止。

我以为这就结束了，但后来我意识到我的文件中有 gitmarks。像这样：

```
start =
    expression

validchar = 
    [0-9a-zA-Z_?!+\-=@#$%^&*/.]

integer = 
<<<<<<< HEAD
    digits:[0-9]+
        { return digits.join(""); }
=======
    sign:"-"* digits:[0-9]+
        { return sign + digits.join(""); }
>>>>>>> gh-pages 
```

这些文件不是由我编辑的，并显示插入的行：

*   小于号 ( `<<<<<<< HEAD`)后的 HEAD
*   更改的代码行
*   一串等号 ( `=======`)
*   新版本的代码
*   另一行以大于号和分支名称 ( `>>>>>>> gh-pages`)开头

更糟糕的是文件内容不再按顺序排列。有谁知道我如何让这些文件恢复正常，以及我在 gh-branch 中所做的更改合并到 master 分支中？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-05-18T17:44:24.327

那些是[冲突标记](https://stackoverflow.com/questions/7901864/git-conflict-markers)。您仍在合并过程中，但是 Git 无法自动合并某些部分。您[需要将这些部分手动编辑](http://schacon.github.com/git/user-manual.html#resolving-a-merge)成您想要的样子，然后提交结果。

* * *

例如，在您的特定情况下，您可能希望像这样解决它（注意 - 右侧的箭头/文本只是我的笔记，而不是您在文件中键入的内容）：

```
integer = 
<<<<<<< HEAD                                  <-+ remove the bits here
    digits:[0-9]+                               |
        { return digits.join(""); }             |
=======                                       <-+
    sign:"-"* digits:[0-9]+
        { return sign + digits.join(""); }
>>>>>>> gh-pages                              <-- and this 
```

因此您将文件另存为...

```
integer = 
    sign:"-"* digits:[0-9]+
        { return sign + digits.join(""); } 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-18T19:10:24.547

绝对从“git status”开始，看看你有什么。如果您中止了合并（或合并中止）并且工作目录中有冲突的文件，则出现问题。Git 状态会告诉你你在哪里。之后，您有多种选择。您应该手动解决合并提交，这可能具有挑战性，或者使用以下工具：

```
git mergetool 
```

如果您的文件被列为需要合并，则合并工具将起作用。

您还可以执行以下操作之一：

```
git checkout --ours -- /path/to/conflicted-file       # this is probably the one you want
git checkout --theirs -- /path/to/conflicted-file 
```

您可以使用 :1:filename 语法查看不同的版本。请参阅[此处](https://stackoverflow.com/a/107860/1286639)以获取解释。但以上所有假设“git status”将文件显示为需要合并。

最后，您始终可以选择：

```
git reset --hard   # sounds like --hard is what you need but check other options 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-05T11:13:41.517

所有答案都是正确的，但是如果您想自动删除所有冲突标记并想自动更改文件以保留 HEAD ，那么您可以创建自己的 bash 脚本，例如：-

*示例脚本：*

`# vim /usr/sbin/solve.git`

（附加以下）

```
#!/bin/bash
for f in $(grep -Rl '^>>>>>>> ' --include="*.php" --include="*.css" --include="*.js" --include="*.html" --include="*.svg" --include="*.txt" .)
do
sed -i -e '/^=======/,/^>>>>>>> /d' -e '/^<<<<<<< /d' $f
sed -i -e '/^>>>>>>> /d' $f
echo "$f Fixed"
done
git add . ; git commit -am "[+] Resolved on `date` from `hostname` by `whoami`" --no-verify 
```

`# chmod 755 /usr/sbin/solve.git`

& 只需在您的 GIT 存储库/路径中运行它即可解决：

`$ cd <path_to_repo>`
`$ solve.git`

注意：- 上述文件扩展名是 php,css,js,html,svg & txt。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-11T16:14:48.660

我来自[这个问题](https://stackoverflow.com/questions/53727581/git-clean-diff-less-than-signs)。而且我想要一些自动合并半合并文件的方法，而不是手动编辑文件（*如其他答案中所建议的那样，我不太习惯这样做*）。所以这就是我最终通过 netbeans 做的事情，但也可以通过命令行完成。

*现在，请记住，这仅在 之后立即有效`merge->add->commit`，您意识到自己搞砸了，并想重新完成该过程。*

**第 1 步：**重置为之前的提交。

```
git reset --hard a992a93f9312c6fa07c3a1b471c85e9fbf767d0e 
```

**第 2 步：**重新尝试合并分支

```
git merge --ff origin/feature/YOUR-Branch_here 
```

如果您使用的是 GUI，此时将提示您合并窗口。然后您可以正常进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-05T21:57:29.350

在 Atom 中，我遇到了一些文件没有将已解决的合并冲突保存到驱动器的问题，因此我不得不手动单击“保存”。我花了很长时间才弄清楚。

# c++ - C++ 清理字符串到 int 强制转换

> ID：10657316
> 
> 赞同：2
> 
> 时间：2012-05-18T17:41:41.077
> 
> 标签：c++, string, casting, int

据我所知，c++ 中将 String 转换为 int 的常用方法是使用 sstream：

```
 std::string inputString = "12 34";
   std::istringstream istr(inputString);
   int i1, i2;
   istr >> i1 >> i2; 
```

但是，如果我想确保我的代码适用于任何输入，那么问题是在输入字符串还是 0 之间做出决定：

```
 std::string inputString = "TEXT 0";
   std::istringstream istr(inputString);
   int i1, i2;
   istr >> i1 >> i2;
   cout << i1 <<"  !=  "<< i2 << endl; 
```

我想确定用户是否输入了字符串或零，以便执行进一步的操作。有没有一种**干净**的方法来决定这个问题，而不使用词法转换或 atoi？最好的杰加德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:46:38.617

您可以使用无效的默认值：

```
#include<sstream>
#include<limits>
using std::numeric_limits;
int main(){
    std::string inputString = "TEXT 0"; 
    std::istringstream istr(inputString);
    int i1=numeric_limits<int>::min();
    int i2=numeric_limits<int>::min(); 
    std::string tmp;
    istr >> i1;
    if (i1 == numeric_limits<int>::min()) {
      // extraction failed
      i1 = 0;
      istr.clear(); // clear error flags to allow further extraction
      istr >> tmp; // consume the troublesome token
    }
    // same for i2
} 
```

*注意*：如果`numeric_limits<int>::min()` *不能*是有效输入，则该技术有效

# html - 类似 Facebook 的好友选择复选框

> ID：10657317
> 
> 赞同：0
> 
> 时间：2012-05-18T17:41:42.093
> 
> 标签：html, css, facebook

我正在尝试编写一个选择，如 Facebook“邀请朋友”选择。我喜欢它，因为它使用默认复选框，而不是模拟每个项目的选择的背景。

问题是我无法弄清楚如果需要（文本太大）他们如何使文本（朋友的名字）分成两行！

我有一个我想要实现的简化示例。这是HTML：

```
<div class="modal">
  <div class="modal-body">
    <ul class="unstyled">
      <li class="store_selectable">
        <input class="checkbox" type="checkbox">
        <a href="#">
        <div class="store-text">
          <div class="iblock"><img alt="Missing" src="http://placehold.it/30x30"></div>
          <div class="text"><div>This is the store</div></div>
        </div>
      </a>
    </li>
  </ul> 
```

​​​

这是CSS：

```
body {
    padding: 20px;
}

li.store_selectable {
    width:161px;
    float:left;
    margin:0 0px 6px 0px;
    overflow:hidden;
    font-size:0.9em;
}

li.store_selectable .checkbox {
    float:left;
    display:inline-block;
    margin:12px 6px 0;
}

li.store_selectable .store-text {
    display:block;
    height:30px;
}

li.store_selectable img {
    float:left;
    display:block;
    width:30px;
    height:30px
}

li.store_selectable a {
    display:block;text-decoration:none;
    padding:2px;
    outline:none;
    color:#333;
    border:1px solid #fff;
    border-width:1px 0;
}

li.store_selectable a:hover {
    background:cyan;
    border:1px solid blue;
    border-width:1px 0;
}

li.store_selectable .iblock {
    display:inline-block;
    vertical-align:middle;
    overflow:hidden;
    text-align:left;
} 
```

为了更容易测试和理解，我在这里创建了一个 jsfiddle：http: [//jsfiddle.net/rikas/tpqHd/1/](http://jsfiddle.net/rikas/tpqHd/1/)

现在，如果列表项的宽度足够小，我正在尝试将文本分成两行，更改这一行`width:161px;`：与facebook“邀请朋友”模式窗口CSS混淆我可以看到他们做到了，但我做不到！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:56:34.550

不太确定您要实现的界面，但文本不换行的原因是 css

```
 overflow:hidden; 
```

删除后考虑将您的复选框和文本放在其自己的 div 元素与类 .fl

```
 .fl { display:block; } 
```

将它们并排排列

在两者的正下方创建另一个空的 div 元素，其类为 .clear

```
 .clear { display:block; clear:both; line-height:0; } 
```

防止下一个元素继承 float:left

# javascript - 弹出窗口不会在 MVC 中弹出

> ID：10657319
> 
> 赞同：2
> 
> 时间：2012-05-18T17:41:42.203
> 
> 标签：javascript, jquery, asp.net-mvc, popup

我试图让一个弹出窗口从 MVC 页面中的链接出现，但弹出窗口没有弹出。局部视图只是替换浏览器中的当前页面。为什么不只是将我的当前页面留在原处并给我一个弹出窗口？我的部分观点只有几句话。

```
@Ajax.ActionLink(
    "Open popup",
    "GetNotes",
    new { id = "5" },
    new AjaxOptions
        {
            HttpMethod = "GET", 
            UpdateTargetId = "result", 
            InsertionMode = InsertionMode.Replace, 
            OnSuccess = "openPopup"
        })

<br />

<div id="result" style="display:none;"></div>

<script type="text/javascript">
    $("#result").dialog({
        autoOpen: false,
        title: 'Title',
        width: 500,
        height: 'auto',
        modal: true
    });

    function openPopup() {
        $("#result").dialog("open");
    }

</script> 
```

**更新：**

这是我目前正在尝试的完整源代码（来自“查看源代码”）。当我单击链接时，没有任何反应。这是怎么回事？我错过了一个js文件还是什么？

顺便说一句，这个 URL 正在返回我的部分视图（目前只有几个纯文本单词）：

```
http://localhost:40353/Quote/GetNotes/5 
```

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
        <script src="/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
        <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
        <script src="/Scripts/people.js" type="text/javascript"></script>
        <script src="/Scripts/kendo.web.min.js" type="text/javascript"></script>
        <script src="/Scripts/console.js" type="text/javascript"></script>
        <script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script> 
        <script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script> 

        <link href="/Styles/Site.css" rel="stylesheet" type="text/css" />
        <link href="/Styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
        <link href="/Styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
        <link href="http://code.jquery.com/ui/1.8.20/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" media="all" />
    </head>

    <body>
<div id="result" style="display:none;"></div>

<a href="#" id="OpenPopup"> open popup </a>

        <script type="text/javascript">
                $("#result").dialog({
                    autoOpen: false,
                    title: 'Title',
                    width: 500,
                    height: 'auto',
                    modal: true
                });

                $("#OpenPopup").click(function () {
                    $("#result").dialog("open");
                    $("#result").load("Quote/GetNotes/5");
                });
        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:03:39.523

`<head>`我认为您在布局（主）页面部分缺少对“jquery.unobtrusive-ajax.min.js”脚本文件的引用。

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:01:27.490

部分视图替换浏览器中的视图的原因是 @Ajax.ActionLink 在浏览器中呈现为已形成的标记。因此，当您单击链接时，您实际上是。

我想你想要做的是打开弹出窗口并将部分内容放入弹出窗口中？

有几种方法可以实现这一点。

将您的操作链接更改为正常打开的弹出窗口

```
<a href="#" id="OpenPopup"> open popup </a> 
```

并添加此功能

```
 $("#OpenPopup").click(function() {
      $("#result").dialog("open");
      // This is a neat wrapper that does a get request to the url specified and loads the html into the target div
      $("#result").load("/GetNotes/5");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T10:46:20.543

还要检查底部的 _Layout：

```
</div>
  </div>
    </footer>

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

消除

```
@Scripts.Render("~/bundles/jquery") 
```

模态弹出窗口将运行。

# sql - SQL编译

> ID：10657326
> 
> 赞同：2
> 
> 时间：2012-05-18T17:42:27.023
> 
> 标签：sql, sql-server, stored-procedures, compilation

Java被编译成二进制代码并由JVM执行。C++ 被编译成平台相关的代码。

当我阅读 SQL Server 中存储过程的定义时，它说存储过程是一组**编译**成单个执行计划的 Transact-SQL 语句。 [http://msdn.microsoft.com/en-us/library/aa174792(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa174792(v=sql.80).aspx)

那么 SQL 编译成什么（SQL Server 可以执行的东西..？）？我可以说存储过程已预编译并准备好执行，因此它更快吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:57:06.260

我相信存储过程的“编译”仅仅意味着“查询执行计划的创建和存储”。

根据[此处](http://blog.sqlauthority.com/2009/11/08/sql-server-stored-procedure-are-compiled-on-first-run-sp-taking-longer-to-run-first-time/)`create`的博客文章，存储过程在d 或ed时检查语法`alter`，但仅在首次运行时编译。该链接还提供了您可以运行的脚本，以告诉您是否已编译给定过程。

有关更多信息，请参阅[这篇](http://technet.microsoft.com/en-gb/library/cc966425.aspx)关于在 Sql Server 2005 中编译的 Microsoft 文章。

# java - 将组件添加到 Component[] 数组中

> ID：10657327
> 
> 赞同：0
> 
> 时间：2012-05-18T17:42:31.660
> 
> 标签：java, arrays, jcomponent, jtoolbar

这似乎很基本，但由于某种原因我无法让它工作。

我有以下代码：

```
Component[] AddEditDelete = ToolbarPool.getDefault().findToolbar("AddEditDelete").getComponents();
for (Component component : AddEditDelete) {
    component.setEnabled(false);
}

Component[] Navigation = ToolbarPool.getDefault().findToolbar("Navigation").getComponents();
for (Component component : Navigation) {
    component.setEnabled(false);
}

Component[] ListFind = ToolbarPool.getDefault().findToolbar("ListFind").getComponents();
for (Component component : ListFind) {
    component.setEnabled(false);
} 
```

我想做的是创建一个 Component[] c 数组，然后在该数组中添加工具栏中的所有组件。

我的直观方法

```
Component[] c;
c.add(stuff); 
```

似乎没有工作。所以我假设你做其他方式。

**edit1：**我最近对 ​​ArrayList > Component 的尝试没有奏效 =(

```
ArrayList c = new ArrayList();
c.add(ToolbarPool.getDefault().findToolbar("AddEditDelete").getComponents());
c.add (ToolbarPool.getDefault().findToolbar("Navigation").getComponents());
Component[] cc = (Component[]) c.toArray();
for (Component component : cc) {
    component.setEnabled(false);
} 
```

**edit2：**愚蠢的我，试图使用没有类型的 ArrayList。这行得通，但它仍然是相当多的代码行：

```
ArrayList<Component> c = new ArrayList<Component>();
for (int i = 0; i < ToolbarPool.getDefault().findToolbar("AddEditDelete").getComponents().length; i++) {
    c.add(ToolbarPool.getDefault().findToolbar("AddEditDelete").getComponent(i));
}
for (int i = 0; i < ToolbarPool.getDefault().findToolbar("Navigation").getComponents().length; i++) {
    c.add(ToolbarPool.getDefault().findToolbar("Navigation").getComponent(i));
}
for (Component component : c) {
    component.setEnabled(false);
} 
```

有没有办法缩短代码行数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:49:01.007

您需要先创建数组，然后才能使用它（您需要提前知道数组大小）：

```
Component[] c = new Components[10];
c[0] = stuff; 
```

改用 List 可能是一个更好的主意（更灵活、更好的 API）：

```
List<Component> components = new ArrayList<Components>
components .addAll(Arrays.asList(ToolbarPool.getDefault().findToolbar("AddEditDelete").getComponents()));
components .addAll(Arrays.asList(ToolbarPool.getDefault().findToolbar("Navigation").getComponents()));
for (Component component : components) {
    component.setEnabled(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:49:37.317

最简单的方法是使用您首先提供的代码，然后创建一个新的 Component[] ，其 size = 为您以编程方式获得的 3 个数组的总和。然后手动将 3 个数组中的每一个中的所有元素添加到统一数组中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:51:50.613

在其他人提到的旧方法中，您需要先创建数组。

在您的新方法中，将 arraylist 定义为`ArrayList<Component> c = new ArrayList<Component>();`. 另请检查是否`ToolbarPool.getDefault().findToolbar("AddEditDelete").getComponents())`返回正确的非空`Component`对象。

# tsql - SQL Server 2005 按时间杀死查询

> ID：10657330
> 
> 赞同：0
> 
> 时间：2012-05-18T17:42:50.193
> 
> 标签：tsql, sql-server-2005

我遇到了关于停止（杀死）查询的疑问：

有一个程序可以更改订阅者复制的数据量（我不知道所有细节，这是公司已经实现的一些功能），它在事务中，所以如果它没有完成它会回滚，在执行此过程时，所有订阅者的复制都被阻止，这就是为什么我们在夜间复制的订阅者数量将减少或没有时执行此操作的原因。现在是周末，我想离开运行程序（周五晚上 10 点），但如果它没有完成，例如周六早上 6 点，我希望它回滚，并且不需要去办公室手动停止程序.

设置它在晚上 10 点运行很容易我用过

```
waitfor time '22:00' 
```

我知道在同一个查询中不能是一个可以停止整个查询的脚本，因为它是“顺序的”，有没有办法打开其他查询选项卡？我希望创造工作不是唯一的解决方案（如果它是一个解决方案的话）。

谢谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:38:38.977

我建议处理这个问题的最简单方法是把你的长期运行的过程放到一个工作中。不需要打开的 Management Studio 实例，该实例具有从您的工作站到服务器的可靠活动网络连接，并且由于作业一次只能运行一个实例，因此识别正在运行的实际进程会容易得多工作（并相应地处理它）。

因此，假设我已经说服了你，并且你有一个名为“我想杀死的工作”的工作，它计划在周五晚上 10 点运行。可以将以下存储过程安排为单独的作业，在星期六早上 6:00，或手动调用。

```
CREATE PROCEDURE dbo.Kill_Job_I_Wanna_Kill
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @id UNIQUEIDENTIFIER;

  -- since the job could be dropped and re-created:
  SELECT @id = job_id
    FROM msdb.dbo.sysjobs
    WHERE name = 'Job I wanna kill';
  -- note that it could also be renamed, so you'll have to
  -- decide how to properly identify this job in the long run

  DECLARE @t TABLE
  (
    ID VARBINARY(32), rd INT, rt INT, nrd INT, 
    nrt INT, nrs INT, rr INT, rs INT, rsID SYSNAME, 
    Running BIT, cs INT, cra INT, [state] INT
  );

  -- note that this XP is undocumented and unsupported!
  INSERT @t EXEC master.dbo.xp_sqlagent_enum_jobs 1, 'sa', @id;

  IF EXISTS (SELECT 1 FROM @t WHERE Running = 1)
  BEGIN
    PRINT 'Cancelling job!';
    EXEC msdb.dbo.sp_stop_job @job_id = @id;
  END
  ELSE
  BEGIN
    PRINT 'Job is not running!'
  END
END
GO 
```

当作业被成功终止后，手动调用或调度时的作业步骤历史记录中将显示以下内容：

```
Cancelling job!
Job 'Job I wanna kill' stopped successfully. 
```

现在，可能还有其他复杂情况 - 有时回滚可能需要与到达该点所需的时间一样长（或更长）。这完全取决于长期运行的过程正在做什么（我假设您正在重建/重组索引）。

# c++ - MATLAB 中的 C++ MEX 编译

> ID：10657335
> 
> 赞同：1
> 
> 时间：2012-05-18T17:43:20.073
> 
> 标签：c++, matlab, mingw, mex

我正在尝试使用一个名为 edfImport 的函数（可在此处获得：http: [//kobi.nat.uni-magdeburg.de/edfImport](http://kobi.nat.uni-magdeburg.de/edfImport)）

为了使用该功能，我必须首先运行 edfCompile（包含在工具包中）。运行 edfCompile 时，出现错误：

```
??? Error using ==> mex
Unable to complete successfully 
```

我正在运行 MATLAB 7.1 (R14) 并为我的编译器安装了最新版本的 MinGW、Cygwin 和 Gnumex（根据此页面上的说明：http: [//ptolemy.eecs.berkeley.edu/ptolemyII/ptII4.0/ cygwin.htm](http://ptolemy.eecs.berkeley.edu/ptolemyII/ptII4.0/cygwin.htm) )

我能够编译示例 mex 文件，但我仍然不相信这不是我的编译器设置方式的问题。感激地收到任何提示。很高兴知道其他人是否也无法运行 edfCompile... (http://kobi.nat.uni-magdeburg.de/edfImport)

非常感谢

编辑：完整的错误消息：

```
In file included from edfMexImport.cpp:6:0: 
EDFFile2.h:37:39: error: 'mwSize' has not been declared 
EDFFile2.h:127:45: error: 'mwIndex' has not been declared 
edfMexImport.cpp: In function 'void mexFunction(int, mxArray**, int, const mxArray**)': 
edfMexImport.cpp:12:3: error: 'mwSize' was not declared in this scope 
edfMexImport.cpp:12:10: error: expected ';' before 'OutputDims' 
edfMexImport.cpp:48:12: error: expected ';' before 'OptionsDimN' 
edfMexImport.cpp:49:9: error: 'OptionsDimN' was not declared in this scope 
edfMexImport.cpp:51:13: error: 'OptionsDim' was not declared in this scope 
edfMexImport.cpp:51:33: error: expected primary-expression before ')' token 
edfMexImport.cpp:51:34: error: expected ';' before 'mxGetDimensions' 
edfMexImport.cpp:73:12: error: expected ';' before 'FlagsDimN' 
edfMexImport.cpp:74:9: error: 'FlagsDimN' was not declared in this scope 
edfMexImport.cpp:76:13: error: 'FlagsDim' was not declared in this scope 
edfMexImport.cpp:76:31: error: expected primary-expression before ')' token 
edfMexImport.cpp:76:32: error: expected ';' before 'mxGetDimensions' 

C:\PROGRAM FILES\MATLAB71\BIN\MEX.PL: Error: Compile of 'edfMexImport.cpp' failed. 

??? Error using ==> mex
Unable to complete successfully

Error in ==> edfCompile at 15
eval(sprintf('mex -I''%s'' edfMexImport.cpp EDFFILE2.cpp ''%s/edfapi.lib''', edfapiIncludesFolder, edfapiLibraryFolder)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:57:31.153

看起来缺少一些类型定义，尤其是`mwSize`and`mwIndex`类型。您可以将以下内容添加到 EDFFile2.h 并重试吗？

略低于

```
#include "edf.h"
#include <mex.h> 
```

添加这个：

```
#ifndef mwSize
    #define mwSize int
#endif

#ifndef mwIndex
    #define mwIndex int
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:18:19.170

MEX 文件已修改为支持 64 位“大型数组处理 API”，如本文档中所述：

[http://www.mathworks.com/support/solutions/en/data/1-5C27B9/](http://www.mathworks.com/support/solutions/en/data/1-5C27B9/)

请注意，这个可选的大变量支持最初是在 R7.3 (2006b) 中添加的，您的版本甚至更旧。基本上，对于 MEX 文件使用的 API，您的 MATLAB 太旧了。也就是说，如果 MEX 文件足够简单，Gunther 的解决方案可能是将 MEX 文件“反向移植”到旧 MATLAB 的简单答案。mxGetDimensions() 之类的函数现在返回 mwSize*，但以前返回 int*。

因此，如果可以的话，请升级 MATLAB，否则请尝试 Gunther 的答案，让我们知道它是如何进行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:30:29.660

你看过 edfCompile.m 吗？不幸的是，我的 PC 上没有安装 Matlab，所以我只能建议您尝试编译这两个 .cpp 文件`edfMexImport.cpp`并`EDFFILE2.cpp`手动使用`edfapi.lib`

# c# - 数据图表可视化

> ID：10657338
> 
> 赞同：0
> 
> 时间：2012-05-18T17:43:43.607
> 
> 标签：c#, sql-server, visual-studio-2010

我试图从表中的数据中可视化图形，我创建了一个数组列表（arlData），但是我遇到了这个异常'你只能为这个数据点设置 1 个 Y 值。参数名称：yValue'请问我该怎么做？

```
 chart1.Series.Add("W1 Electricity");
        chart1.Series.Add("W2 Electricity");
        chart1.Series.Add("W1 Gas");
        chart1.Series.Add("W2 Gas");

        chart1.Series["W1 Electricity"].Color = Color.Red;
        chart1.Series["W2 Electricity"].Color = Color.Blue;

        chart1.Series["W1 Gas"].Color = Color.Green;
        chart1.Series["W2 Gas"].Color = Color.Green;

        foreach (UsageWeek objCurrEntry in arlData)
        {
            chart1.Series["W1 Electricity"].Points.AddXY(1, objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W1 Electricity"].Points.AddXY(2, objCurrEntry.StartDate,objCurrEntry.EndDate);
            chart1.Series["W1 Electricity"].Points.AddXY(3, objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W1 Electricity"].Points.AddXY(4, objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W1 Electricity"].Points.AddXY(5, objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W1 Electricity"].Points.AddXY(6, objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W1 Electricity"].Points.AddXY(7, objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W Electricity"].Points.AddXY(objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W1 Gas"].Points.AddXY(objCurrEntry.StartDate, objCurrEntry.EndDate);
            chart1.Series["W2 Gas"].Points.AddXY(objCurrEntry.StartDate, objCurrEntry.EndDate);

        }

         //X-axis labels 
        chart1.Series["W1 Electricity"].Points[0].AxisLabel = "Monday";
        chart1.Series["W1 Electricity"].Points[1].AxisLabel = "Tuesday";
        chart1.Series["W1 Electricity"].Points[2].AxisLabel = "Wednesday";
        chart1.Series["W1 Electricity"].Points[3].AxisLabel = "Thursday"; 
        chart1.Series["W1 Electricity"].Points[4].AxisLabel = "Friday";
        chart1.Series["W1 Electricity"].Points[5].AxisLabel = "Saturday";
        chart1.Series["W1 Electricity"].Points[6].AxisLabel = "Sunday";

        //X-axis labels 
        chart1.Series["W2 Electricity"].Points[0].AxisLabel = "Monday";
        chart1.Series["W2 Electricity"].Points[1].AxisLabel = "Tuesday";
        chart1.Series["W2 Electricity"].Points[2].AxisLabel = "Wednesday";
        chart1.Series["W2 Electricity"].Points[3].AxisLabel = "Thursday";
        chart1.Series["W2 Electricity"].Points[4].AxisLabel = "Friday";
        chart1.Series["W2 Electricity"].Points[5].AxisLabel = "Saturday";
        chart1.Series["W2 Electricity"].Points[6].AxisLabel = "Sunday";

    } 
```

`

# c++ - 如何对长度有限的 xerces XMLCh 数组进行转码？

> ID：10657341
> 
> 赞同：1
> 
> 时间：2012-05-18T17:43:54.900
> 
> 标签：c++, xerces

xercesc [::XMLString](http://xerces.apache.org/xerces-c/apiDocs-3/classXMLString.html "类 XMLString")类有两个不同的函数将 XMLCh 数组转码为本机 char *array：

`static char * transcode(const XMLCh *const toTranscode, MemoryManager *const manager=XMLPlatformUtils::fgMemoryManager)`

和

`static bool transcode(const XMLCh *const toTranscode, char *const toFill, const XMLSize_t maxChars, MemoryManager *const manager=XMLPlatformUtils::fgMemoryManager)`

根据[文档](http://xerces.apache.org/xerces-c/apiDocs-3/classXMLString.html#87abed2b2baf335e4fbc09182989c07d)，不推荐使用第二个重载。然而，关于这两个函数的确切行为的文档很少，当我得到一个指定长度的 XMLCh 数组时（如在[ContentHandler::characters](http://xerces.apache.org/xerces-c/apiDocs-3/classContentHandler.html#ed552fab959bfa7e9135691e1d21ab5a)处理程序中），似乎我想使用限制字符数的方法转码。关于为什么不推荐使用第二种方法以及是否有其他转码方法的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:45:05.657

不推荐使用的函数要求您提供缓冲区，因此它的大小。第一个（非弃用）函数为您创建缓冲区并返回指向它的指针。它们都做同样的事情，除了由于缓冲区太小而弃用的函数可能不会成功。似乎未弃用的功能具有更简洁的界面。

# entity-framework-5 - EF 5 重用实体配置

> ID：10657342
> 
> 赞同：2
> 
> 时间：2012-05-18T17:43:54.813
> 
> 标签：entity-framework-5

我正在尝试在几个实现接口的实体上重用一些模型配置。

检查此代码：

```
public static void ConfigureAsAuditable<T>(this EntityTypeConfiguration<T> thisRef)
            where T : class, IAuditable
        {
            thisRef.Property(x => x.CreatedOn)
                .HasColumnName("utctimestamp")
                .IsRequired();

            thisRef.Property(x => x.LastUpdate)
                .HasColumnName("utclastchanged")
                .IsRequired();
        } // ConfigureAsAuditable 
```

如您所见，我正在尝试在我的 onmodelcreating 方法上调用扩展方法“ConfigureAsAuditable”，如下所示：

```
EntityTypeConfiguration<Account> conf = null;

    conf = modelBuilder.Entity<Account>();
    conf.ToTable("dbo.taccount");

    conf.ConfigureAsAuditable(); 
```

调试时我得到这个异常：

> 属性“CreatedOn”不是“帐户”类型的声明属性。使用 Ignore 方法或 NotMappedAttribute 数据注释验证该属性是否已从模型中显式排除。确保它是有效的原始属性。

在此先感谢 :) PD：我正在使用 EF 5-rc、VS 2011 和 .NET Framework 4.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:44:56.597

我认为更好的方法是实现您自己的 EntityTypeConfiguration 派生版本。例如：

```
 public class MyAuditableConfigurationEntityType<T> : EntityTypeConfiguration<T> 
where T : class, IAuditable{
public bool IsAuditable{get;set;}
} 
```

然后，在构建模型时，使用该新类型：

```
var accountConfiguration = new MyAuditableConfigurationEntityType<Account>();
accountConfiguration.IsAuditable = true; // or whatever you need to set
accountConfiguration.(HasKey/Ignore/ToTable/Whatever)
modelBuilder.Configurations.Add(accountConfiguration); 
```

# c# - IndexOf 无法正确识别行是否以值开头

> ID：10657343
> 
> 赞同：1
> 
> 时间：2012-05-18T17:43:56.507
> 
> 标签：c#

如果第一个单词与我拥有的变量匹配，如何从文本文件中删除整行？

我目前正在尝试的是：

```
List<string> lineList = File.ReadAllLines(dir + "textFile.txt").ToList();
lineList = lineList.Where(x => x.IndexOf(user) <= 0).ToList();
File.WriteAllLines(dir + "textFile.txt", lineList.ToArray()); 
```

但我无法将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:01:35.413

您唯一的错误是使用 indexOf 检查 <= 0，而不是 = 0。

当字符串不包含搜索字符串时返回-1。

<= 0 表示以或不包含开头

=0 表示以 <- 开头，这就是你想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:49:31.240

此方法将逐行读取文件，而不是一次全部读取。另请注意，此实现区分大小写。

它还假设您不受前导空格的影响。

```
using (var writer = new StreamWriter("temp.file"))
{
    //here I only write back what doesn't match
    foreach(var line in File.ReadLines("file").Where(x => !x.StartsWith(user)))
        writer.WriteLine(line);  // not sure if this will cause a double-space ?
}

File.Move("temp.file", "file"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T17:57:34.363

你非常接近，[`String.StartsWith`](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)处理得很好：

```
// nb: if you are case SENSITIVE remove the second argument to ll.StartsWith
File.WriteAllLines(
    path,
    File.ReadAllLines(path)
        .Where(ll => ll.StartsWith(user, StringComparison.OrdinalIgnoreCase))); 
```

对于可能性能不佳的非常大的文件，请改为：

```
// Write our new data to a temp file and read the old file On The Fly
var temp = Path.GetTempFileName();
try
{
    File.WriteAllLines(
        temp,
        File.ReadLines(path)
            .Where(
               ll => ll.StartsWith(user, StringComparison.OrdinalIgnoreCase)));
    File.Copy(temp, path, true);
}
finally
{
    File.Delete(temp);
} 
```

另一个需要注意的问题是，如果用户是，则`IndexOf`and`StartsWith`都会将`ABC`and`ABCDEF`视为匹配项`ABC`：

```
var matcher = new Regex(
    @"^" + Regex.Escape(user) + @"\b", // <-- matches the first "word"
    RegexOptions.CaseInsensitive);
File.WriteAllLines(
    path,
    File.ReadAllLines(path)
        .Where(ll => matcher.IsMatch(ll))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:48:30.367

```
Use  `= 0` instead of `<= 0`. 
```

# javascript - 在按键上检测 Alt Gr（Alt Graph）修饰符

> ID：10657346
> 
> 赞同：18
> 
> 时间：2012-05-18T17:44:10.463
> 
> 标签：javascript, google-chrome, keyboard

在 javascript`Event`对象中，有一些布尔值来检查是否按下了修饰键：

*   `ctrlKey`:`CTRL`关键。
*   `altKey`:`ALT`关键。
*   `altLeft`:`ALT`左键。仅适用于 IE。
*   `altGraphKey`:`ALTGR`关键。仅适用于 Chrome/Safari。

但是，有一些问题：

*   当您按下 ALTGR 修饰符时，IE 和 Chrome 将设置为`ctrlKey`和`true`。`altKey``true`
*   当您按下 ALTGR 修饰符时， Firefox 会设置`ctrlKey`为`false`和`altKey`，`true`因为只有 ALT 被按下。
*   Chrome 有这个`altGraphKey`属性，但它始终是`undefined`.

问题：如何区分`ALT`+`CTRL`或`ALTGR`按键？特别是在 Chrome 中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-02T09:43:32.330

webkit 浏览器中的 altGraphKey 似乎不再存在（截至 2013 年 9 月），Firefox 的行为也发生了变化。键的浏览器行为`AltGr`当前似乎是：

*   Webkit (Chrome) - ctrlKey: true, altKey: true
*   IE 8 - ctrlKey：假，altKey：真
*   IE 10 - ctrlKey：真，altKey：真
*   Mozilla (Firefox) - ctrlKey: true, altKey: true

也就是说，它们当前都是一致的（除了 IE8，它仍然始终不一致）。

以下代码段应该在现代浏览器中捕获`Alt Gr`- 但不是`Alt`或-。`Ctrl`但是，您将需要 IE8 的特殊情况：

```
if (event.ctrlKey && event.altKey) {
    // Appears to be Alt Gr
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-09T13:29:28.787

免责声明：我没有具有此键的键盘，因此无法测试自己，但规范说可以使用该[`key`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)属性。如果您只需要支持实现它的浏览器（在撰写本文时，只有 Safari 不支持），这可能是一个很好的解决方案。您可以检查该值是否为[`"AltGraph"`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values).

```
window.onkeydown = function (e) {
  if (e.key === 'AltGraph') {
    console.log(e.key);
  }
};
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T10:31:22.233

我猜`ALTGR`key 和`CTRL`+ `ALT`key 组合是一回事，并且没有办法在 Javascript 中有所作为。按`ALTGR`+`e`和`CTRL`+ `ALT`+`e`都会在我的键盘/语言设置上产生 €（欧元）符号。网上有一些页面可以检查键码。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-11T15:53:42.603

值得一提的是，可以通过检查 alt 键事件的位置在现代浏览器中检测到这一点。

请参阅：[有没有办法检测按下 Alt 键的哪一侧（右侧或左侧）？](https://stackoverflow.com/questions/8562528/is-there-is-a-way-to-detect-which-side-the-alt-key-is-pressed)

# azure-sql-database - 无法连接到 SQL Server - 客户端问题

> ID：10657348
> 
> 赞同：0
> 
> 时间：2012-05-18T17:44:13.110
> 
> 标签：azure-sql-database, windows-server-2008-r2

我可能是第 100 万人发帖，但其他人的解决方案对我没有帮助。我在 Microsoft SQL Azure 上有一个数据库。我尝试使用 Visual Studio 2010 的“连接到数据库”工具连接到它。

从我的 Windows 7 机器上，我可以很容易地连接到它。但是在我的 Windows Server 2008R2 机器上，我遇到了经典错误 -

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

网络上的所有帖子似乎都集中在服务器端的问题上，没有人关心客户端是否流氓。:(

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:19:23.157

我在 VS2010 DB Tool 和 Windows Server 上看到过类似的问题，所以我不建议尝试使用**SSMS 2008 R2 (must be R2)**。下载 SSMS 2008 R2 并正确配置以在 Windows Server 上运行后，它肯定会运行。在大多数情况下，您确实需要打开 SSMS 设置才能使其在 Windows Server 上运行。

接下来检查几点：

1.  验证 telnet 是否在您的 Windows 服务器计算机上运行：c:>telnet _your_sqlazure_database_name.database.windows.net 1433

2.  禁用您的实时安全并重试

3.  最后按照链接继续在您的 Windows Server 和 SSMS 中应用适用的设置，我相信它会起作用： [http ://www.mssqltips.com/sqlservertip/2340/resolving-could-not-open-a-connection -to-sql-server-errors/](http://www.mssqltips.com/sqlservertip/2340/resolving-could-not-open-a-connection-to-sql-server-errors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:00:53.887

一个问题是您需要通过 tcp 连接，而不是命名管道（根据您的错误消息）。

两台服务器是否位于同一防火墙后面（例如，相同的外部 IP 地址）？SQL Azure 防火墙需要配置为允许从远程 IP 地址进行访问。

# android - IntentService 防止活动破坏

> ID：10657350
> 
> 赞同：1
> 
> 时间：2012-05-18T17:44:21.660
> 
> 标签：android, android-service, android-activity

据我所知，当我旋转屏幕时，活动被破坏并重新创建。在以下场景中，情况似乎并非总是如此。所以问题是：它真的被摧毁了吗？我是否出于某种原因泄漏内存？如果它没有被销毁，它是否与新创建的活动在同一个线程上运行？

该场景是一个启动 IntentService 的“垂直”Activity，该服务需要 5 秒才能完成，并使用 ResultReceiver 发回结果。在这 5 秒内，屏幕旋转，并创建了一个新的“水平”活动。结果回到“垂直”活动，而不是新的“水平”活动。那么，“垂直”活动没有被破坏吗？

我创建了一个项目来证明这一点。代码来了。

首先，带有活动布局的xml。只有两个按钮。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show value of variable" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Start IntentService" />

</LinearLayout> 
```

之后，我们的 IntentService

```
public class SomeService extends IntentService {

    public SomeService(){
        super("SomeService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        ResultReceiver receiver = (ResultReceiver) intent.getParcelableExtra("receiver");

        long t0, t1;
        t0 = System.currentTimeMillis();
        do {
            t1 = System.currentTimeMillis();
        } while (t1-t0 < 5000);

        receiver.send(0, null);
    }
} 
```

最后是活动

```
public class TestActivityDestructionActivity extends Activity {

    private int mTestVar = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        if (savedInstanceState != null){
            mTestVar = savedInstanceState.getInt("tv");
        }

        mTestVar++;

        Button b1 = (Button) findViewById(R.id.button1);
        b1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Toast.makeText(TestActivityDestructionActivity.this, "Value: " + mTestVar, Toast.LENGTH_SHORT).show();
            }
        });

        Button b2 = (Button) findViewById(R.id.button2);
        b2.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent(TestActivityDestructionActivity.this, SomeService.class);
                intent.putExtra("receiver", new SomeReceiver(new Handler()));
                startService(intent);
                Toast.makeText(TestActivityDestructionActivity.this, "IntentService started", Toast.LENGTH_SHORT).show();
            }
        });

    }

    private class SomeReceiver extends ResultReceiver{
        public SomeReceiver(Handler handler) {
            super(handler);
        }

        @Override
        protected void onReceiveResult(int resultCode, Bundle resultData) {
            super.onReceiveResult(resultCode, resultData);
            Toast.makeText(TestActivityDestructionActivity.this, "Receiver value: " + mTestVar, Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tv", mTestVar);
    }
} 
```

Activity 第一次启动时，mTestVar 为 0，onCreate 增加为 1。当 Activity 被销毁时，保存该值。下一个活动加载它并将其增加到 2，依此类推。

执行以下步骤：

1.  单击 Button1：mTestVar 为 1
2.  单击 Button2 ：服务启动
3.  在 5 秒前旋转屏幕
4.  单击 Button1 ： mTestVar 为 2（调用了 onCreate）
5.  等待 5 秒过去：mTestVar 仍显示为 1

据我所知，这意味着第一个活动没有被破坏。我错过了什么吗？

谢谢！

**编辑**

在看到这个问题的答案后，我使用了 MAT 和堆转储，发现第一个活动永远不会被垃圾收集，即使服务早已不复存在并且垃圾被收集并且不再引用该活动。我不知道为什么。

但是，如果接收器从未创建并且从未传递给服务，则不会发生内存泄漏。第一个活动按预期销毁。无论如何，没有理由不这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:26:33.210

使用代码中的断点通过调试器运行它，并在 ResultReceiver 中检查“this”的 id。它保留“this”的本地副本，该副本指向您以前的活动，其中 int mTestVar == 1。当前活动的活动是一个完全不同的对象，具有自己的 mTestVar == 2 副本。这是内存泄漏。

为了更简洁地回答您的问题：Android“破坏”了您的活动，但您在回调中保留了对活动的引用，以防止它被垃圾收集。如果您希望某些东西在多个活动中“存在”，您应该使用服务来存储该状态（请记住，服务不是一个单独的线程，不应该像一个线程一样使用）。

附注：检查变量和通用日志记录时，最好使用 Log.v/e/i 等。您可以在命令行使用 adb logcat mytag:V *:S 过滤它们或使用 eclipse 中内置的 logcat。

# python - Python正则表达式\数字添加\ 0x

> ID：10657355
> 
> 赞同：2
> 
> 时间：2012-05-18T17:44:45.967
> 
> 标签：python, regex, replace

我正在尝试对 python 中的字符串进行简单的正则表达式替换。这是我的代码：

```
>>> s = "num1 1 num2 5"
>>> re.sub("num1 (.*?) num2 (.*?)","1 \1 2 \2",s) 
```

我希望得到这样的输出，将`\number`s 替换为相应的组。

```
'1 1 2 5' 
```

但是，这是我得到的输出：

```
'1 \x01 2 \x025' 
```

我有点困惑为什么`\x0`s 是他们的，而不是我想要的。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T17:47:33.390

您需要开始使用原始字符串（字符串前缀为 r）：

```
>>> import re
>>> s = "num1 1 num2 5"
>>> re.sub(r"num1 (.*?) num2 (.*?)", r"1 \1 2 \2", s)
'1 1 2 5' 
```

否则，您将需要为 python 和正则表达式转义反斜杠，如下所示：

```
>>> re.sub("num1 (.*?) num2 (.*?)", "1 \\1 2 \\2", s)
'1 1 2 5' 
```

（这真的很快，请查看[python regex 文档的开头段落](http://docs.python.org/library/re.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:48:58.367

`\1`并被`\2`解释为八进制字符代码转义，而不仅仅是传递给正则表达式引擎。使用原始字符串`r"\1"`而不是`"\1"`防止这种解释。

```
>>> "\17"
'\x0f'
>>> r"\17"
'\\17' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T17:50:42.713

`\1`正在字符串中解释。所以你必须`\`用它自己的反斜杠来转义：

```
>>> re.sub("num1 (.*?) num2 (.*?)", "1 \\1 2 \\2",s)
'1 1 2 5' 
```

您还可以使用*原始*字符串：

```
>>> re.sub("num1 (.*?) num2 (.*?)", r"1 \1 2 \2",s)
'1 1 2 5' 
```

# javascript - 如何将 DateTime 转换为另一种格式？

> ID：10657357
> 
> 赞同：-1
> 
> 时间：2012-05-18T17:44:47.763
> 
> 标签：javascript, xml, datetime-format, datetime-parsing

从天气提要中，我以`2012-05-17`.

我如何将其转换为`Thursday May 17th`表格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:50:18.153

1.  [将字符串解析](https://stackoverflow.com/questions/1576753/parse-date-string-in-javascript)为 JavaScript`Date`对象。
2.  [随意格式化 Date](http://phrogz.net/js/FormatDateTime_JS.txt)对象。

*另请参阅：[为什么 Date.parse 给出不正确的结果？](https://stackoverflow.com/questions/2587345/javascript-date-parse)以及[如何格式化 JavaScript 日期](https://stackoverflow.com/questions/3552461/how-to-format-javascript-date)问题。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:36:39.500

这个怎么样：

```
var originalDateTime = '2012-05-17',
splitedDatetime = originalDateTime.split('0'),
date = new Date(),
date.setFullYear(splitedDatetime[0],splitedDatetime[1]-1,splitedDatetime[2]),
formatedDateString = date.toLocaleFormat("%A %B %d"); 
```

# mysql - Mysql输入/输出查询

> ID：10657358
> 
> 赞同：0
> 
> 时间：2012-05-18T17:44:48.910
> 
> 标签：mysql

我有两个查询：

```
 SELECT LancamentoEntrada.*,
         TipoEntrada.descricao AS nome,
         Usuario.nome AS obreiro
    FROM lancamento_entradas LancamentoEntrada,
         tipo_entradas TipoEntrada,
         obreiros Obreiro,
         usuarios Usuario
   WHERE LancamentoEntrada.tipo_entrada_id = TipoEntrada.id
     AND TipoEntrada.somar_caixa = 1
     AND LancamentoEntrada.obreiro_id = Obreiro.id
     AND Usuario.id = Obreiro.usuario_id
     AND LancamentoEntrada.data_entrada >= '{$begin}'
     AND LancamentoEntrada.data_entrada <= '{$end}'
ORDER BY LancamentoEntrada.data_entrada 
```

和

```
 SELECT LancamentoSaida.*,
         TipoSaida.descricao AS nome
    FROM lancamento_saidas LancamentoSaida,
         tipo_saidas TipoSaida
   WHERE LancamentoSaida.tipo_saida_id = TipoSaida.id
     AND TipoSaida.somar_caixa = 1
     AND LancamentoSaida.data_saida >= '{$begin}'
     AND LancamentoSaida.data_saida <= '{$end}'
ORDER BY LancamentoSaida.data_saida 
```

生成以下数组：

```
// Query 1
Array(
    [0] => Array (
        [id] => 3
        [tipo_entrada_id] => 1
        [data_entrada] => 2012-05-08
        [data_vencimento] => 2012-05-08
        [obreiro_id] => 2
        [valor_pago] => 20.00
        [valor_pagar] => 0.01
        [observacoes] => TESTE
    )

    [1] => Array (
        [...]
    )
)

// Query 2
Array (
    [0] => Array (
        [id] => 1
        [tipo_saida_id] => 1
        [data_saida] => 2012-05-08
        [data_vencimento] => 2012-05-08
        [valor_pago] => 200.00
        [observacoes] => tESTE
    )
    [1] => Array (
        [...]
    )
) 
```

但是，我想做一个查询，列出输入和输出，我该如何完成呢？如果需要更多解释，请问我。

**编辑 1**

输入来自第一个查询，输出来自第二个。

**编辑 2**

查询需要生成财务输入/输出报告，因此，第一个查询获取存储的所有输入，第二个查询生成所有输出，两者都来自一个时期。我需要生成一个包含所有输入和输出的列表，按日期排序。

```
Edit 3 
```

我已经完成了这个查询，问题是，我怎么知道什么时候输入，什么时候输出？

试过`ISNULL`and `CASEs`，但没有用。

```
(SELECT LancamentoEntrada.data_entrada AS data,
    LancamentoEntrada.data_vencimento AS vencimento,
    LancamentoEntrada.valor_pago AS valor,
    LancamentoEntrada.observacoes AS observacoes,
    TipoEntrada.descricao AS nome
   FROM lancamento_entradas LancamentoEntrada,
    tipo_entradas TipoEntrada
  WHERE LancamentoEntrada.tipo_entrada_id = TipoEntrada.id
    AND TipoEntrada.somar_caixa = 1
)

UNION

(SELECT LancamentoSaida.data_saida AS data,
    LancamentoSaida.data_vencimento AS vencimento,
    LancamentoSaida.valor_pago AS valor,
    LancamentoSaida.observacoes AS observacoes,
    TipoSaida.descricao AS nome
   FROM lancamento_saidas LancamentoSaida,
    tipo_saidas TipoSaida
  WHERE LancamentoSaida.tipo_saida_id = TipoSaida.id
    AND TipoSaida.somar_caixa = 1
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:16:02.940

如果您唯一需要做的就是确定哪些记录来自哪个查询，您只需为每个查询添加一个文字。

```
( SELECT 
      'Input' as rec_type,

     LancamentoEntrada.data_entrada AS data,
    LancamentoEntrada.data_vencimento AS vencimento,
    LancamentoEntrada.valor_pago AS valor,
    LancamentoEntrada.observacoes AS observacoes,
    TipoEntrada.descricao AS nome
   FROM lancamento_entradas LancamentoEntrada,
    tipo_entradas TipoEntrada
  WHERE LancamentoEntrada.tipo_entrada_id = TipoEntrada.id
    AND TipoEntrada.somar_caixa = 1
)

UNION ALL

(SELECT 
      'Output' as rec_type,

      LancamentoSaida.data_saida AS data,
    LancamentoSaida.data_vencimento AS vencimento,
    LancamentoSaida.valor_pago AS valor,
    LancamentoSaida.observacoes AS observacoes,
    TipoSaida.descricao AS nome
   FROM lancamento_saidas LancamentoSaida,
    tipo_saidas TipoSaida
  WHERE LancamentoSaida.tipo_saida_id = TipoSaida.id
    AND TipoSaida.somar_caixa = 1
) 
```

顺便说一句，如果您从这两个集合中删除重复项，您将获得更好的性能，`UNION ALL`而`UNION`在这种情况下您将不会拥有这些重复项。

# python - 在 OS X Lion 上安装 PIL

> ID：10657363
> 
> 赞同：5
> 
> 时间：2012-05-18T17:45:10.360
> 
> 标签：python, osx-lion, python-imaging-library

我正在尝试在**Mac OSX 10.7.4**上安装 PIL，但经过几个小时的尝试无法成功。我一直遇到同样的问题，在下面的 pastebin 链接中提供了详细信息。开导我！！

## 环境

```
tbc:~ mystic$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

[**巴斯宾**](http://pastebin.com/NDVwkPPz)

我从几个来源搜索并尝试过：

*   [一](http://appelfreelance.com/2011/07/python-2-7-os-x-lion-and-pil-_imaging-and-image/)
*   [二](http://blaolao.com/setting-up-django-mysql-mysql-python-pil-etc)
*   [三](http://gpiot.com/mac-os-x-lion-install-the-python-image-library-pil/)
*   [四](https://stackoverflow.com/questions/9070074/how-to-install-pil-on-mac-os-x-10-7-2-lion)（堆栈溢出）
*   [五](http://yuji.wordpress.com/2011/09/19/osx-install-pil-on-osx-10-7-lion/)

> ```
> Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
> [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
> >>> import Image
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
> ImportError: No module named Image
> >>> import PIL
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
> ImportError: No module named PIL
> >>> 
> ```

已按照建议进行编辑，**`jdi`**但仍然遇到与上面 pastebin 链接所示相同的问题

```
tbc:jpeg-8c mystic$ xcode-select -version
xcode-select version 2003.
tbc:jpeg-8c mystic$ which xcode-select
/usr/bin/xcode-select
tbc:jpeg-8c mystic$ xcode-select -print-path
/Applications/Xcode.app/Contents/Developer
tbc:jpeg-8c mystic$ 
```

**`the paul`**此外，我按照“ ”的建议尝试了自制软件

```
tbc:cellar mystic$ brew link jpeg
Linking /usr/local/Cellar/jpeg/8d... 3 symlinks created
tbc:cellar mystic$ brew install pil
Error: pil-1.1.7 already installed
tbc:cellar mystic$ brew uninstall pil
Uninstalling /usr/local/Cellar/pil/1.1.7...
tbc:cellar mystic$ brew install pil
==> Downloading http://effbot.org/downloads/Imaging-1.1.7.tar.gz
Already downloaded: /Library/Caches/Homebrew/pil-1.1.7.tar.gz
==> python setup.py build_ext
==> python setup.py install --prefix=/usr/local/Cellar/pil/1.1.7
==> Caveats
This formula installs PIL against whatever Python is first in your path.
This Python needs to have either setuptools or distribute installed or
the build will fail.
Warning: Non-executables were installed to "bin".
Installing non-executables to "bin" is bad practice.
The offending files are:
/usr/local/Cellar/pil/1.1.7/bin/pilfont.py
==> Summary
/usr/local/Cellar/pil/1.1.7: 174 files, 2.0M, built in 15 seconds
tbc:cellar mystic$ python 
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pil
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named pil
>>> from PIL import Image
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named PIL 
```

这是[.pip的日志](https://www.dropbox.com/s/7qoiwajufmijerf/pip.log)

它抱怨

```
/Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory 
```

但**`stdarg.h`**文件在同一位置。

我不明白为什么它试图定位`MacOSX10.6.sdk`为我当前版本的 Lion 是`MacOSX10.7.sdk`

变得疯狂！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T20:05:05.380

如果您在 Lion 上使用最新的 XCode，那么对您来说潜在的问题是他们移动了开发人员 SDK 的位置。期望它们居住的包裹`/Developer/`将不再根据需要找到它们。

参考这篇关于细节的文章：
[http ://www.agile-workers.com/web/2012/03/qt-qmake-osx_sdk-xcode/](http://www.agile-workers.com/web/2012/03/qt-qmake-osx_sdk-xcode/)

但总而言之，您可能需要做的是运行：
`sudo /usr/bin/xcode-select -switch /Applications/Xcode.app/Contents/Developer`
指向新位置。

手动修复可能只是从`/Applications/Xcode.app/Contents/Developer/...`=>符号链接 SDK `/Developer/...`，但我会首先尝试 xcode-select 工具。

**更新**：基于您的新更新的更多建议

首先，我无法从您发布的内容中判断 PIL 是否因为 SDK 而无法构建。如果它构建成功，并且您使用的是标准的苹果 python，那么自制 python 路径很可能不在您自己的 python 路径中。

```
$ python
>>> import sys
>>> sys.path.append("/usr/local/lib/python2.7/site-packages")
>>> from PIL import Image 
```

如果仍然错误，那么我认为问题仍然与缺少 SDK 位置有关。您可以将 SDK 的新位置符号链接到旧位置：

```
mkdir -p -v /Developer/SDKs
ln -s /Applications/Xcode.app/Contents/Developer/MacOSX10.6.sdk  /Developer/SDKs/MacOSX10.6.sdk 
```

或者，您可以尝试在构建 pil 时显式设置 sdk 路径：

```
brew remove pil
export SDKROOT=/Applications/Xcode.app/Contents/Developer/MacOSX10.6.sdk
brew install pil 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:32:11.107

简单的解决方案：

1.  [安装自制软件](https://brew.sh/)
2.  冲泡安装枕头

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-04T11:23:37.923

If you have [Homebrew](http://mxcl.github.com/homebrew/) installed, this will do the the job:

```
brew install pillow 
```

# javascript - 将外部 JSON 文件加载为 javascript 变量

> ID：10657372
> 
> 赞同：1
> 
> 时间：2012-05-18T17:45:55.950
> 
> 标签：javascript

我认为这个问题是微不足道的，但我似乎无法找到答案。一个网站（不同的来源，无法控制）正在提供一些 JSON 文件。我想要我的脚本的一些变量来获取这些文件的内容。我不在乎它是否同步完成。你会怎么走？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:53:28.657

使用 JSONP 包括使用您的 url，带参数，并将脚本文件添加到您的页面

> www.example.com/process?value=1&callback=Func

将脚本添加到您的页面。

```
var url = "www.example.com/process?value=1&callback=Func";
var script = document.createElement('script');
script.type= ' text/javascript';
script.src = url;
document.getElementsByTagName("body")[0].appendChild(script); 
```

现在您可以使用回调函数或访问从该脚本添加的变量。

**更新**

在 jsonp 脚本结束时，您可以调用回调函数 例如：php

```
<?php
if (isset($_GET['callback'])) {
    echo $_GET['callback']."();";
    // Func(); // will call your function and use your variables.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:20:28.360

如果远程主机不提供[JSONP](http://en.wikipedia.org/wiki/JSONP)或[CORS](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)，那么您将需要在您自己的域上放置一个服务器端组件，该组件为您获取 JSON 并在本地提供它。

# c# - 使用 JsonResult 显示验证消息

> ID：10657373
> 
> 赞同：2
> 
> 时间：2012-05-18T17:46:07.817
> 
> 标签：c#, asp.net-mvc, json, jquery

如何使用 JsonResult 和 AJAX 返回自定义验证消息？

这是我在 StudentDB 中添加学生的控制器操作。

**更新：**

```
 [HttpPost()]
    public ActionResult AddStudent(string studentName, int studentId)
    {
        var studentPresent = studentTable.Students.Where(s => s.StudentID == studentId&& b.StudentName == studentName);

        if (studentPresent == null || !studentPresent .Any())
        {
            var student = new Student()
                {
                    StudentName = studnetName,
                    StudentID = studentId,
                };
            studentTable.AddObject("Student", student);
            studentTable.SaveChanges();

         }
        return new JsonResult();      

    } 
```

这是我的 JavaScript：

```
function addStudent() {
    $.ajax({
        type: 'POST',
        url: '/StudentAdmin/AddStudent',
        data: {
            studentName: $('#studentName').val(),
            studentNumber: GetTextBoxValue('#studentNumber'),            
        },
        success: function (result) {
            if ($('#studentPresent').val() == null) {
            showMessage('Success', 'Student saved successfully.', '', false);                
        } else {
            showMessage('Error', 'Student already present in database.', '', false);
        }
            GetGrid('#studentGrid').ajaxRequest();
            hideForm();
        },
        studentPresent: function (result) {
            showMessage('Error', 'Student Already present in Database.', '', true);
        }

    });
} 
```

如果该学生已经存在于数据库中，我想显示“错误”消息。另外，有没有办法将更多验证消息传递给 JasonResult？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:52:04.897

您可以将任何对象传递给该`JsonResult`对象，它将被序列化（或尝试序列化）到 javascript。

```
return new JsonResult(new { Anything = "Hello World" }); 
```

这会产生一个 JSON 对象，如下所示：

```
{"Anything":"Hello World"} 
```

`result`在变量中呈现给您的 javascript 。

您上面的代码实际上没有显示任何正在生成的错误消息；如果要获取 SQL 异常的文本，则需要一个 try/catch 块。

编辑：

你会有这样的代码：

```
return Json(new { message = "Success" }); // success message
return Json(new { message = "Failure" }); // fail message 
```

然后在 javascript 中，你的回调是这样的：

```
success: function(result)
{
     if(result.message == "Success")
       // Show success message
     else
       // Show Error Message
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:52:17.583

你可以`return Json(new {result = "Success"});`

# c# - 如果可能在 C# 中使用 FtpWebRequest 实现没有 3rd 方 dll 的 FTP/SFTP

> ID：10657377
> 
> 赞同：15
> 
> 时间：2012-05-18T17:46:36.300
> 
> 标签：c#, .net, winforms

我正在尝试通过 C# 中的 FtpWebRequest 类实现 ftp/sftp，但直到现在还没有成功。

我不想使用任何第三方免费或付费 dll。

凭据就像

1.  主机名 = sftp.xyz.com
2.  用户 ID = abc
3.  密码 = 123

我能够使用 Ip 地址实现 ftp，但无法使用凭据实现上述主机名的 sftp。

对于 sftp，我已将 FtpWebRequest 类的 EnableSsl 属性启用为 true，但出现无法连接到远程服务器的错误。

我可以使用相同的凭据和主机名连接 Filezilla，但不是通过代码。

我观察到filezilla，它在文本框中将主机名从 sftp.xyz.com 更改为 sftp://sftp.xyz.com 并在命令行中将用户 ID 更改为 abc@sftp.xyz.com

我在代码中做了同样的事情，但 sftp 没有成功。

请在这方面需要紧急帮助。提前致谢。

到目前为止，以下是我的代码：

```
private static void ProcessSFTPFile()
{
    try
    {
        string[] fileList = null;
        StringBuilder result = new StringBuilder();

        string uri = "ftp://sftp.xyz.com";

        FtpWebRequest ftpRequest = (FtpWebRequest)WebRequest.Create(new Uri(uri));
        ftpRequest.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
        ftpRequest.EnableSsl = true;
        ftpRequest.Credentials = new NetworkCredential("abc@sftp.xyz.com", "123");
        ftpRequest.UsePassive = true;
        ftpRequest.Timeout = System.Threading.Timeout.Infinite;

        //ftpRequest.AuthenticationLevel = Security.AuthenticationLevel.MutualAuthRequested;
        //ftpRequest.Proxy = null;
        ftpRequest.KeepAlive = true;
        ftpRequest.UseBinary = true;

        //Hook a callback to verify the remote certificate 
        ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(ValidateServerCertificate);
        //ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);

        FtpWebResponse response = (FtpWebResponse)ftpRequest.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string line = reader.ReadLine();
        while (line != null)
        {
            result.Append("ftp://sftp.xyz.com" + line);
            result.Append("\n");
            line = reader.ReadLine();
        }

        if (result.Length != 0)
        {
            // to remove the trailing '\n'
            result.Remove(result.ToString().LastIndexOf('\n'), 1);

            // extracting the array of all ftp file paths
            fileList = result.ToString().Split('\n');
        }

    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message.ToString());
        Console.ReadLine();
    }
}

public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
{
    if (certificate.Subject.Contains("CN=sftp.xyz.com"))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-27T13:27:55.763

## 更新：

如果使用[BizTalk，您可以使用 SFTP 适配器](http://social.technet.microsoft.com/wiki/contents/articles/19781.biztalk-server-2013-how-to-use-sftp-adapter.aspx)，使用[ESB 工具包](https://msdn.microsoft.com/en-us/biztalk/biztalk-esbtoolkit.aspx)。它自 2010 年以来一直受到支持。有人想知道为什么它没有进入`.Net Framework`

1.  [BizTalk Server 2013：在 ESB Toolkit SFTP 中创建自定义适配器提供程序作为示例](http://social.technet.microsoft.com/wiki/contents/articles/22035.biztalk-server-2013-creating-custom-adapter-provider-in-esb-toolkit-sftp-as-an-example.aspx)
2.  [BizTalk Server 2013：如何使用 SFTP 适配器](http://social.technet.microsoft.com/wiki/contents/articles/22035.biztalk-server-2013-creating-custom-adapter-provider-in-esb-toolkit-sftp-as-an-example.aspx)
3.  [MSDN 文档](https://msdn.microsoft.com/en-us/library/sftp.aspx)

--

不幸的是，目前仅使用框架仍然需要做很多工作。放置`sftp`协议前缀是不够`make-it-work`的，今天仍然没有内置的 .Net Framework 支持，也许在将来。

**-------------------------------------------------- --------**

**1）一个很好的尝试库是[SSHNet](https://github.com/sshnet/SSH.NET)。**

**-------------------------------------------------- --------**

它有：

1.  更多功能，包括内置的流媒体支持。
2.  API 文档
3.  一个更简单的 API 来编写代码

文档中的示例代码：

**列表目录**

```
/// <summary>
/// This sample will list the contents of the current directory.
/// </summary>
public void ListDirectory()
{
    string host            = "";
    string username        = "";
    string password        = "";
    string remoteDirectory = "."; // . always refers to the current directory.

    using (var sftp = new SftpClient(host, username, password))
    {
        sftp.Connect();

        var files = sftp.ListDirectory(remoteDirectory);
        foreach (var file in files)
        {
            Console.WriteLine(file.FullName);
        }
    }
} 
```

**上传文件**

```
/// <summary>
/// This sample will upload a file on your local machine to the remote system.
/// </summary>
public void UploadFile()
{
    string host           = "";
    string username       = "";
    string password       = "";
    string localFileName  = "";
    string remoteFileName = System.IO.Path.GetFileName(localFile);

    using (var sftp = new SftpClient(host, username, password))
    {
        sftp.Connect();

        using (var file = File.OpenRead(localFileName))
        {
            sftp.UploadFile(remoteFileName, file);
        }

        sftp.Disconnect();
    }
} 
```

**下载文件**

```
/// <summary>
/// This sample will download a file on the remote system to your local machine.
/// </summary>
public void DownloadFile()
{
    string host           = "";
    string username       = "";
    string password       = "";
    string localFileName  = System.IO.Path.GetFileName(localFile);
    string remoteFileName = "";

    using (var sftp = new SftpClient(host, username, password))
    {
        sftp.Connect();

        using (var file = File.OpenWrite(localFileName))
        {
            sftp.DownloadFile(remoteFileName, file);
        }

        sftp.Disconnect();
    }
} 
```

**-------------------------------------------------- --------**

**2) 另一个替代库是[WinSCP](https://winscp.net/eng/docs/library)**

**-------------------------------------------------- --------**

使用以下示例：

```
using System;
using WinSCP;

class Example
{
    public static int Main()
    {
        try
        {
            // Setup session options
            SessionOptions sessionOptions = new SessionOptions
            {
                Protocol = Protocol.Sftp,
                HostName = "example.com",
                UserName = "user",
                Password = "mypassword",
                SshHostKeyFingerprint = "ssh-rsa 2048 xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx"
            };

            using (Session session = new Session())
            {
                // Connect
                session.Open(sessionOptions);

                // Upload files
                TransferOptions transferOptions = new TransferOptions();
                transferOptions.TransferMode = TransferMode.Binary;

                TransferOperationResult transferResult;
                transferResult = session.PutFiles(@"d:\toupload\*", "/home/user/", false, transferOptions);

                // Throw on any error
                transferResult.Check();

                // Print results
                foreach (TransferEventArgs transfer in transferResult.Transfers)
                {
                    Console.WriteLine("Upload of {0} succeeded", transfer.FileName);
                }
            }

            return 0;
        }
        catch (Exception e)
        {
            Console.WriteLine("Error: {0}", e);
            return 1;
        }
    }
} 
```

[在这里找到](https://winscp.net/eng/docs/library#csharp)并在[这里找到更多](https://winscp.net/eng/docs/library_examples)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T17:55:17.423

FTP 可以单独使用 .NET 完成。不过，SFTP 没有内置类。我建议看一下[WinSCP](http://winscp.net/eng/docs/library)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-31T10:40:02.383

同意 Tejs。只是为了澄清：

带有 EnableSsl = true 的 FtpWebRequest 表示它是 ftps，显式模式，或者在 Filezilla 措辞中：“FTPES - FTP over Explicit TLS/SSL，默认端口 21”。您可以使用内置的 .net 东西来做到这一点。

对于隐式 ftps（在 Filezilla 中的措辞“FTPS - 隐式 TLS/SSL 上的 FTP，默认端口 990”），您必须使用第 3 方（例如 ftps.codeplex.com）。

对于 sftp（在 Filezilla 中的措辞“SSH 文件传输协议，默认端口 22”），您还必须使用第 3 方（例如 sshnet.codeplex.com）。

正如 Joachim Isaksson 所说，如果您不能使用第 3 方，则必须自己实施。

# java - Hibernate 过滤器中的动态运算符

> ID：10657378
> 
> 赞同：1
> 
> 时间：2012-05-18T17:46:36.727
> 
> 标签：java, hibernate, dynamic, filter

我本质上需要在运行时定义一个自定义休眠过滤器，我不确定这是否可行。

基本上，用户将传入一个表示过滤器的对象，该过滤器由以下模式定义 -

```
<attributeGroup name="FilterAttributes">
        <attribute name="Name" type="string" use="required"/>
        <attribute name="Operation" type="string" use="required"/>
        <attribute name="Value" type="string" use="required"/>
    </attributeGroup>
    <complexType name="Filter">
        <attributeGroup ref="F:FilterAttributes"/>
    </complexType>
    <complexType name="FilterCriteria">
        <sequence>
            <element name="Filter" type="F:Filter" minOccurs="1" maxOccurs="unbounded"/>
        </sequence>
    </complexType>
    <element name="FilterCriteria" type="F:FilterCriteria"/> 
```

所以想法是用户将传入一个表示此结构的对象，我会动态创建一个过滤器 - 要过滤的属性/数据库列的名称，比较中使用的运算符以及要比较的值反对。

我知道我可以定义我的过滤器并参数化我的 HBM 中的值或使用注释，但这不会让我在运行时更改运算符。我可以为我们计划允许过滤的每一列定义一个过滤器，但我宁愿不必为用户可以传入的每个可能的运算符指定一个过滤器。

是否可以在运行时构造/修改过滤器，这样我就可以做到这一点？

# python - 将照片拼接在一起

> ID：10657383
> 
> 赞同：26
> 
> 时间：2012-05-18T17:46:56.227
> 
> 标签：python, image-processing

所以对于我正在进行的这个项目，我有 2 张照片。这两张照片需要拼接在一起，一张在上面，一张在下面，然后你就可以看到整个画面了。关于我应该使用哪个模块来执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-12-16T00:02:23.467

这是使用[Pillow](https://python-pillow.org/)的代码示例。希望它可以帮助某人！

```
from PIL import Image

def merge_images(file1, file2):
    """Merge two images into one, displayed side by side
    :param file1: path to first image file
    :param file2: path to second image file
    :return: the merged Image object
    """
    image1 = Image.open(file1)
    image2 = Image.open(file2)

    (width1, height1) = image1.size
    (width2, height2) = image2.size

    result_width = width1 + width2
    result_height = max(height1, height2)

    result = Image.new('RGB', (result_width, result_height))
    result.paste(im=image1, box=(0, 0))
    result.paste(im=image2, box=(width1, 0))
    return result 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-18T17:52:39.690

[python 成像库](http://www.pythonware.com/products/pil/)（[更新](https://pillow.readthedocs.io/en/stable/)的链接）将在早餐时吃掉该任务。

请参阅[教程](https://pillow.readthedocs.io/en/latest/handbook/tutorial.html#cutting-pasting-and-merging-images)，特别是“剪切、粘贴和合并图像”部分以获得一些相关帮助。

对于粗略的轮廓，使用 加载两个图像，通过使用属性和一些添加`Image.open`找出输出图像的大小，创建输出图像，然后使用方法将两个原始图像过去。`size``Image.new``paste`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-18T02:40:51.640

这是来自 Jan Erik Solems 计算机视觉与 Python 书籍的一些代码；您可能可以对其进行编辑以适合您的顶部/底部需求

```
def stitchImages(im1,im2):
    '''Takes 2 PIL Images and returns a new image that 
    appends the two images side-by-side. '''

    # select the image with the fewest rows and fill in enough empty rows
    rows1 = im1.shape[0]    
    rows2 = im2.shape[0]

    if rows1 < rows2:
        im1 = concatenate((im1,zeros((rows2-rows1,im1.shape[1]))), axis=0)
    elif rows1 > rows2:
        im2 = concatenate((im2,zeros((rows1-rows2,im2.shape[1]))), axis=0)
    # if none of these cases they are equal, no filling needed.

    return concatenate((im1,im2), axis=1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-29T00:00:54.213

使用`numpy.hstack()`或`numpy.vstack()`基于您是否希望图像彼此相邻或彼此重叠。如果图像是 numpy 不接受的奇怪格式，您可以将它们转换为 numpy 数组。确保设置`dtype=np.uint8`是否使用该`np.asarray()`方法将图像解释为数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-06T21:17:51.237

我做了这样的垂直拼接 - 它与@d3ming 的代码相同

```
07: def merge_images(file1, file2):
08:     """Merge two images into one vertical image
09:     :param file1: path to first image file
10:     :param file2: path to second image file
11:     :return: the merged Image object
12:     """
13:     image1 = Image.open(file1)
14:     image2 = Image.open(file2)
15: 
16:     (width1, height1) = image1.size
17:     (width2, height2) = image2.size
18: 
19:     # result_width = width1 + width2
20:     result_width = width1
21:     # result_height = max(height1, height2)
22:     result_height = height1 + height2
23: 
24:     print (height2)
25: 
26:     result = Image.new('RGB', (result_width, result_height))
27:     result.paste(im=image1, box=(0, 0))
28:     result.paste(im=image2, box=(0, height1))
29:     return result 
```

第 19-22 行 - 只有高度会改变拼接

`box=(width1, 0)`将第 28 行更改为的第二张图片粘贴到`box=(0, height1)`

# java - 数据对象中许多字段的 Java 数字格式

> ID：10657385
> 
> 赞同：0
> 
> 时间：2012-05-18T17:46:59.943
> 
> 标签：java, formatting, biginteger, bigdecimal

我有一个数据对象，它在我的数据对象类中包含一个很大的 BigDecimal 对象以及 String 和其他类型的对象。在 BigDecimal 字段上进行一些常见操作（如利息率）的最佳方法是什么

```
interest=interest.setScale(2, RoundingMode.HALF_UP); 
```

1.  我可以在 setter/getter 中做到这一点，但它可能更错误我想确保每个变量都用相同的方法处理。

2.  我可以有一些可以从 setter 或 setter 调用的辅助类。我讨厌在帮助程序中编写任何代码。

有没有其他好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:00:59.827

我会为此使用二传手。如果我必须对所有 BigDecimal 字段执行此操作，我会考虑扩展 BigDecimal 并在构造函数上编写处理代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:02:37.737

为什么不在类中有一个静态方法来根据需要格式化 BigDecimals？

```
public static BigDecimal formatAs(BigDecimal example) {
    //format here and return it
} 
```

然后你可以像这样使用它：

```
BigDecimal interest = MyClass.formatAs(myInstance.getInterest());

BigDecimal rate = MyClass.formatAs(myInstance.getRate()); 
```

对于您在课堂上拥有的尽可能多的 BigDecimals...

# xcode - 自定义字体 xCode 3.2 不起作用

> ID：10657387
> 
> 赞同：0
> 
> 时间：2012-05-18T17:47:09.933
> 
> 标签：xcode, fonts

我已经完成了您应该做的所有事情，以使自定义字体显示在 Xcode 项目中。然而，字体每次都来自 Helvetica，而不是我希望的 Oswald。这里可以看到字体的名字其实是Oswald。我还尝试了不同的名称——Oswald-Light、Oswald-Regular、Oswald-Bold……

![显示字体名称是 Oswald](../Images/59fff8c16be7f3ad843dc63d71686e51.png)

在这里您可以看到 .ttf 文件实际上在我的项目中。它们也在查找器的项目文件夹中 - 我检查过。

![显示文件在项目中](../Images/2f6532ccf703e4247c782c82162b87f6.png)

我将文件的名称放在应用程序提供的字体下的 .plist 中。

![将 .ttf 文件写入 plist](../Images/5cb97f81912faea1ca46782bc4681e48.png)

最后我告诉标签使用 Oswald 字体。再次，我尝试了@“Oswald-Light”，@“Oswald-Bold”......

![将标签指定为字体 Oswald](../Images/6365257d20f02723e71f448ecea7a066.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T14:17:33.753

解决方案：确保 ttf 文件处于目标的 Copy Bundle Resources 构建阶段。如果不是，则在您构建项目时，它们不会被复制到应用程序包中。

由 Mark Szymczyk 解决 - 第三条评论（只是为了以 SO 风格明确表示问题已解决）

# c# - 如何在 C# 中没有登录对话框的情况下登录 Facebook

> ID：10657394
> 
> 赞同：-1
> 
> 时间：2012-05-18T17:47:51.177
> 
> 标签：c#, .net, facebook, facebook-graph-api

[从 Facebook SDK v5.4 迁移到 alpha v6 时，](https://stackoverflow.com/questions/9447482/problems-when-migrating-from-facebook-sdk-v5-4-to-alpha-v6)我使用 Problems 中的一些 WinForm 客户端示例

看看我如何登录 Facebook。

我的问题：是否可以在没有任何对话框的情况下登录 Facebook？

```
 private void btnLogin_Click(object sender, EventArgs e)
        {
            // open the Facebook Login Dialog and ask for user permissions.
            var fbLoginDlg = new FacebookLoginDialog(AppId, ExtendedPermissions);
            fbLoginDlg.ShowDialog();

            // The user has taken action, either allowed/denied or cancelled the authorization,
            // which can be known by looking at the dialogs FacebookOAuthResult property.
            // Depending on the result take appropriate actions.
            TakeLoggedInAction(fbLoginDlg.FacebookOAuthResult);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:54:47.110

您不得在数据库中存储用户登录名/密码并将其用于“自动”登录 - 根据[Facebook 政策](https://developers.facebook.com/policy/)：

> 一、特点和功能
> 
> ...
> 
> 3 - 您不得包含代理、请求或收集 Facebook 用户名或密码的功能。

因此答案是——不，你不能那样做，你也不能那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:18:57.877

这只是一个想法，它不适合评论框。

因此，您需要用户最初输入他们的数据。将其存储在服务器上某处的数据库或文件中，以便可访问。我想说最好的方法是让首次访问者登录，然后提示他们是否要保存凭据或其他内容。如果是，那么它将获取他们的用户名和密码，并说出他们的 Windows 登录名并加密它们并将它们存储在数据库中。现在，当用户使用 WinForm 时，首先需要使用 windows 身份验证检查他们的 windows 登录。找到他们的登录名后，您将浏览您的数据并找到他们的登录名，然后提取他们的用户名和密码，自动填充该字段并登录。

尝试实现类似的东西。

# javascript - jgrid 不显示数组数据

> ID：10657402
> 
> 赞同：0
> 
> 时间：2012-05-18T17:48:38.073
> 
> 标签：javascript, jquery, jquery-plugins, jqgrid

我正在尝试使用“jq grid”显示一组数据。为此，我使用了下面的代码，但它只显示没有数据的空行。任何人都可以弄清楚这段代码有什么问题吗？

我正在使用 ajax 获取数据。所以“响应”将得到这样的数据

```
{ID:"id1", Message: "Happy Birth Day", Date: "2012-05-24", Time: "14:18:00", status: "pending"}!{ID:"id3", Message: "Happy Birth Day", Date: "2012-05-24", Time: "14:18:00", status: "pending"} 
```

获取数据后，将其拆分并添加到数组中。然后尝试显示它。

这是 .JSP 文件

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.js"></script>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/sunny/jquery-ui.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" type="text/css" media="screen" href="grid/css/ui.jqgrid.css" />
  <script src="grid/js/i18n/grid.locale-en.js" type="text/javascript"></script>
  <script src="grid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Edit Scheduled SMS</title>
  <script type="text/javascript">
    $(function(){ 
        $("#list").jqGrid({
        datatype: "local",
            colNames:['ID','Message', 'Date','Time','status'],
            colModel :[ 
                {name:'ID', index:'ID', width:60}, 
                {name:'Message', index:'Message', width:200}, 
                {name:'Date', index:'Date', width:90, align:'right'}, 
                {name:'Time', index:'Time', width:90, align:'right'}, 
                {name:'status', index:'status', width:80, align:'right'} 
           ],
           pager: '#pager',
           rowNum:10,
           rowList:[10,20,30],
           sortname: 'invid',
           viewrecords: true,
           gridview: true,
           caption: 'Single SMS'
        }); 
        $.ajax({
            type : "GET",
            url : "ScheduledClass",
            data : {
                type : "getSingleScheduledMsg"
            }
        })
        .success(function(response,status){         
            tableResult = response;
            var tableData = [];     
            tableData=tableResult.split("!");   

            for(var i=0;i<tableData.length;i++)
                jQuery("#list").jqGrid('addRowData',i+1,tableData[i]);
        })
        .error(
            function() {//error !!!!!               
        });
    }); 
  </script>
  </head>
  <body>
      <div id="wrapper" style="height: 100%;">
          <div id="content_box" style="width: 600px;">
              <div class="ui-widget">
                  <div class="ui-widget-header">Edit Scheduled SMS</div>
                      <div>
                          <div class="ui-widget-content">
                              <div style="padding: 10px 10px 10px 10px;">
                                  <Form name="EditScheduledSMS" method="post"
                                        id="EditScheduledSMS style="display: inline;">
                                      <table id="list"><tr><td/></tr></table>
                                      <div id="pager"></div> 
      ......//closing tags........... 
```

最后的图片是这样的：

![没有数据的表](../Images/bab4de6cb23ea09dfb48e67c45b8d642.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:02:23.403

`tableData[i]`应该是一个对象，你将它作为一个字符串，如果你将你的子字符串转换为 json 字符串，你可以尝试 JSON.parse 将其更改为一个对象。
此外，如果您使用 ajax 填充网格，为什么使用 local 作为数据类型，如果您指定 url 和不同的数据类型，jqgrid 已经使用 ajax 填充网格。

# ruby-on-rails - 在 before_save 中访问传递给 update_attribute/create 的参数

> ID：10657406
> 
> 赞同：0
> 
> 时间：2012-05-18T17:48:53.063
> 
> 标签：ruby-on-rails, activerecord

有模型

```
Class ModelA < ActiveRecord::Base
  has_many :apples
  before_save :include_prime_apple_in_apples
  has_one :prime_apple

 def include_prime_apple_in_apples
     self.apple_ids << prime_apple_1.id
 end
end

l=ModelA.new(:apple_ids => [ "ap_1_id", "ap_2_id"],:prime_apple => prime_apple_1)
l.save
l.apple_ids.should include(prime_apple_1.id) # this doesnt seem to work 
```

如何更改为关联传递的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:33:34.647

那里有问题，但要回答您的问题：AFAIK，您只能分配给“other_ids”。您也可以直接推送到 has_many 关系：

```
self.apple_ids = self.apple_ids + [prime_apple_1.id] 
```

或者

```
self.apples << prime_apple_1 
```

您在 Apple 模型中设置了不同的 foreign_key 吗？has many will do a select * from apples where modela_id = X has one will do a select * from apples where modela_id = X limit 1 这意味着无论您在 prime_apple 访问器上设置什么，您都将获得第一个 Apple 记录。 ..

# php - 在对象上下文中运行的回调函数？

> ID：10657415
> 
> 赞同：3
> 
> 时间：2012-05-18T17:49:34.393
> 
> 标签：php, php-5.3

我试图在运行时配置一个对象，传递一个回调函数，如下所示：

```
class myObject{
  protected $property;
  protected $anotherProperty;

  public function configure($callback){
    if(is_callable($callback)){
      $callback();
    }
  }
}

$myObject = new myObject(); //
$myObject->configure(function(){
  $this->property = 'value';
  $this->anotherProperty = 'anotherValue';
}); 
```

当然我得到以下错误：

> 致命错误：不在对象上下文中使用 $this

我的问题是，是否有办法`$this`在回调函数内部实现这种行为，或者获得更好模式的建议。

PS：我更喜欢使用回调。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T17:56:45.300

从你的想法开始，你可以`$this`作为参数传递给你的回调

但请注意，**您的回调** *（未在您的类中声明）* **将无法访问受保护的或私有的属性/方法**——这意味着您必须设置公共方法来访问它们。

您的课程将如下所示：

```
class myObject {
  protected $property;
  protected $anotherProperty;
  public function configure($callback){
    if(is_callable($callback)){
      // Pass $this as a parameter to the callback
      $callback($this);
    }
  }
  public function setProperty($a) {
    $this->property = $a;
  }
  public function setAnotherProperty($a) {
    $this->anotherProperty = $a;
  }
} 
```

你已经声明了你的回调，并使用它，像这样：

```
$myObject = new myObject(); //
$myObject->configure(function($obj) {
  // You cannot access protected/private properties or methods
  // => You have to use setters / getters
  $obj->setProperty('value');
  $obj->setAnotherProperty('anotherValue');
}); 
```

在之后调用以下代码行：

```
var_dump($myObject); 
```

会输出这个：

```
object(myObject)[1]
  protected 'property' => string 'value' (length=5)
  protected 'anotherProperty' => string 'anotherValue' (length=12) 
```

这表明回调已执行，并且您的对象的属性确实已按预期设置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T18:08:51.387

如果您正在使用（或愿意升级到）PHP 5.4，您可以使用[Closures](http://www.php.net/manual/en/class.closure.php)[`bindTo`](http://php.net/manual/en/closure.bindto.php)的新方法。这允许您将闭包“重新绑定”到新范围。

在调用之前`$callback`，您可以将其设置`$this`为您想要的。

```
if(is_callable($callback)){
    $callback = $callback->bindTo($this, $this);
    $callback();
} 
```

演示：[http ://codepad.viper-7.com/lRWHTn](http://codepad.viper-7.com/lRWHTn)

您也可以`bindTo`在课堂外使用。

```
$func = function(){
  $this->property = 'value';
  $this->anotherProperty = 'anotherValue';
};
$myObject->configure($func->bindTo($myObject, $myObject)); 
```

演示：[http ://codepad.viper-7.com/mNgMDz](http://codepad.viper-7.com/mNgMDz)

# java - 在应用程序包中安排业务逻辑

> ID：10657418
> 
> 赞同：2
> 
> 时间：2012-05-18T17:49:45.873
> 
> 标签：java, android, coding-style

我对 Java 很陌生，目前我正在使用 Eclipse + Android SDK 开发我的第一个 Android 应用程序。我的应用程序的业务逻辑存储在“/src/app.package/*”中。目前我所有的文件（例如活动、适配器、类等）都存储在“/src/app.package/”的根目录中。这让我看起来有点困惑。我认为，活动、适配器、类……的子文件夹/包会更好、更清晰。是否有任何最佳实践来安排子文件夹/包中的所有业务逻辑，或者每个人都可以做什么，他想要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:53:38.110

您可以将包视为一个目录。如果它可以帮助您更有条理地将所有适配器类放入包中，然后将`com.company.app.adapters`所有活动放入包中`com.company.app.activities`。使其对以后可能会维护您的代码的人具有可读性/可接近性。

# python - 如何在 PySide 中获取 QProcess 运行的命令的输出？

> ID：10657419
> 
> 赞同：5
> 
> 时间：2012-05-18T17:49:45.763
> 
> 标签：python, qt, python-3.x, pyside, qprocess

我想知道如何在 PySide 中捕获 QProcess 运行的命令的输出，以便显示它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:56:30.230

我最终使用了这个：

```
 # Create runner
  self.runner = QProcess(self)
  # Make sure newInfo gets all output
  self.runner.readyReadStandardError.connect(self.newErrInfo)
  # Run the command
  self.runner.start(command)
  # Once it's started set message to Converting
  self.parentWidget().statusBar().showMessage("Converting.") 
```

然后在课堂上：

```
def newErrInfo(self):
  newString = str(self.runner.readAllStandardError())
  print(newString, end=" ") 
```

readAllStandardOutput() 也适用于标准输出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T17:57:52.307

```
 QProcess qp;
 qp.start("Yourcode");
 qp.waitForFinished();
 qDebug() << "qp:" << qp.readAll(); 
```

对于实时阅读，您可以使用[canReadLine()](http://qt-project.org/doc/qt-4.8/qprocess.html#canReadLine)、[readyread()](http://qt-project.org/doc/qt-4.8/qiodevice.html#readyRead)、[waitforreadyread()](http://qt-project.org/doc/qt-4.8/qprocess.html#waitForReadyRead)和[waitforbyteswritten(](http://qt-project.org/doc/qt-4.8/qprocess.html#waitForBytesWritten) ) 等函数。

[在信号槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)机制中使用这些函数来实时捕获数据。

# sitecore - 面向营销人员的 Sitecore Web 表单 多个主题不起作用

> ID：10657431
> 
> 赞同：0
> 
> 时间：2012-05-18T17:50:44.587
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

我正在处理的网站上有一个奇怪的错误。我在面向营销人员的 Web 表单中的表单文件夹中配置了多个主题。无论我选择什么主题或颜色，我的所有表单都使用为网站文件夹选择的主题和颜色。我通过全新安装对其进行了测试，它运行良好，这是我特定网站上的一个错误。

这是我正在使用的：

*   CMS 6.5.0 修订版。120427
*   DMS 2.0.1 修订版 120427
*   面向营销人员的 Web 表单-2.3.0 修订版。120216

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:57:36.600

这是设计使然。来自 Sitecore 支持，当我不久前提出同样的问题时：

> 已编辑 Alexander Yaremenko 于 2010 年 11 月 18 日星期四下午 2:10
> 
> 嗨，马克，
> 
> 这是预期的行为。为当前站点的所有表单定义的主题和颜色。如果您运行站点（例如 Site1），所有 Web 表单都将具有来自当前站点的 formsRoot 属性中定义的表单文件夹的主题，而不是存储此表单的表单文件夹中的主题。
> 
> 我已经注册希望我们将来可以改变这种行为。
> 
> 我现在找不到更简单的方法来改变这种行为。我只看到一种解决方法：创建自定义控件，该控件将在页面上插入指向所需 .css 的链接。注意：指向您的 .css 的链接应在下面定义，然后是标准 .css。

Sitecore 支持案例参考号为 336904。

本质上，WFFM 假定主题是“每个站点”，而不是同一站点中的多个主题。

# firefox - 安装扩展程序后如何显示提示？

> ID：10657437
> 
> 赞同：0
> 
> 时间：2012-05-18T17:51:29.613
> 
> 标签：firefox, firefox-addon, installation

当我的插件安装时，它需要提示用户获取用户名或类似的东西。之后它会存储它并且不应该再次询问。我将把这个提示放在哪里？`install.rdf`? `browser.xul`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:58:27.460

扩展安装时没有明确的运行代码机制 - 您应该在扩展第一次运行时简单地执行此操作。最简单的方法是检查用户名是否已经设置。如果不是 - 显示提示。

不建议显示模态对话框，这对用户来说非常烦人，尤其是当它们在 Firefox 启动期间突然出现时。您应该改为在选项卡中打开您的页面。一个小麻烦：Firefox 在启动时可能正在恢复之前的会话。如果您过早打开页面，会话恢复机制可能会取代它。所以你应该等待[`sessionstore-windows-restored`通知](https://developer.mozilla.org/en/Observer_Notifications#Application_startup)，这样的事情应该可以工作：

```
Components.utils.import("resource://gre/modules/XPCOMUtils.jsm");
Components.utils.import("resource://gre/modules/Services.jsm");

var observer = {
  observe: function(subject, topic, data)
  {
    Services.obs.removeObserver("sessionstore-windows-restored", this);

    var browser = window.getBrowser();
    browser.loadOneTab("chrome://...", {inBackground: false});
  },
  QueryInterface: XPCOMUtils.generateQI([
    Components.interfaces.nsIObserver,
    Components.interfaces.nsISupportsWeakReference
  ])
};
Services.obs.addObserver("sessionstore-windows-restored", observer, true); 
```

最后一个复杂情况是您的代码可能是从浏览器窗口覆盖层运行的——这意味着如果恢复的会话包含多个窗口，您的代码将会有多个实例。您可能希望上面的代码只运行一次，而不是在每个浏览器窗口中打开您的第一个运行页面。所以你必须以某种方式进行协调，也许是通过[偏好](https://developer.mozilla.org/en/Code_snippets/Preferences)。一个稍微复杂但更好的解决方案是在您的扩展程序中添加一个[JavaScript 代码模块](https://developer.mozilla.org/en/JavaScript_code_modules)- 代码模块只加载一次，因此您不会在那里遇到协调问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T00:30:52.480

尝试使用插件监听器[https://developer.mozilla.org/en/Addons/Add-on_Manager/AddonListener#onInstalling%28%29](https://developer.mozilla.org/en/Addons/Add-on_Manager/AddonListener#onInstalling%28%29)

或使用首选项：[https ://stackoverflow.com/a/958944/1360985](https://stackoverflow.com/a/958944/1360985)

# c# - C#地址按钮使用字符串

> ID：10657438
> 
> 赞同：0
> 
> 时间：2012-05-18T17:51:32.543
> 
> 标签：c#, string, button, object-address

我在处理按钮时遇到问题。我的程序中有很多按钮，并且每个按钮都有一个功能。我得到了最后点击按钮的名称：

```
foreach (Control t in this.Controls)
{
    if (t.Focused)
    {
        ClickedButton = t.Name;
    }

} 
```

然后我想更改按钮的文本：

```
ClickedButton.Text = "Whatever"; 
```

但我不能使用 ClickedButton 作为按钮的名称。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:53:34.827

假设这是一个事件，你可以做这样的事情

```
Button btn = (Button)sender;
btn.Text = "Whatever"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:53:31.030

如果您将单击的按钮调用到 Click 事件中，则应该将 sender 作为参数，您可以将其强制转换为 Button 并获取控件的名称。

由于您有按钮引用，因此您还可以设置控件的文本。

```
protected void btnTest_Click(object sender, EventArgs e)
{
    Button b = sender as Button;
    if ((b != null) && (b.Name == "btnTest"))
    {
         b.Text = "yay";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:58:12.273

如果你在你的`button_click`活动中写这个，

您可以像这样获取按钮：

```
Button BTN = sender as Button;
BTN.Text = "This Button Has Been Clicked!"; 
```

# javascript - JSON转换问题

> ID：10657446
> 
> 赞同：-3
> 
> 时间：2012-05-18T17:52:10.613
> 
> 标签：javascript, arrays, json, coldfusion

我正在尝试（在 Javascript 和 Coldfusion 中）转换：

```
{"val1":"member","val2":"book","val3":"journal","val4":"new_member","val5":"cds"}, 
```

进入这个：

```
{ member,book,journal,new_member,cds} 
```

请注意，我正在尝试消除引号。

有可能实现这一目标吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:28:25.497

好的，所以这个： {"val1":"member","val2":"book","val3":"journal","val4":"new_member","val5":"cds"} 是 JSON。

要转换为 CF 结构，您可以这样：

```
myStruct = deserializeJSON('{"val1":"member","val2":"book","val3":"journal","val4":"new_member","val5":"cds"}'); 
```

（请注意，我的示例假设我们在一个`<CFSCRIPT>`块内操作。）现在您已经有了一个带有键/值对的简单结构。但是你想要一个值列表。所以让我们创建一个空字符串，然后将所有结构值附加到它：

```
myList = "";
for (k IN myStruct) {
  myList = listAppend(myList,myStruct[k]);
} 
```

繁荣。myList 现在应该是 "member,book,journal,new_member,cds" 如果你真的想用花括号括起来。

```
myList = "{"&myList&"}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:51:01.290

首先，我要感谢您的回复。但是你们中的一些人必须对新手更有礼貌。

```
var tata = {"val1":"member","val2":"book","val3":"journal","val4":"new_member","val5":"cds"}
var arr=[]

for (var i in tata) {
    arr.push(tata[i])
}; 
console.log(arr);

wrd = new Array(arr)
var joinwrd = wrd.join(",");
console.log('{' + joinwrd + '}'); 
```

# linux - Grep 排除文件夹并使用 linux 搜索

> ID：10657452
> 
> 赞同：4
> 
> 时间：2012-05-18T17:52:52.080
> 
> 标签：linux, grep

grep 命令

如果我在

```
/var/ 
```

我要搜索`/var/www`

递归地

但不是

```
/var/www/exclude 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T18:02:47.373

您也可以使用 grep -v "/foldername/"。-v 删除所有匹配项。

```
grep -r string /var/www/ | grep -v "/exclude/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T19:21:08.993

用于`--exclude=*.log*` 跳过包含单词“log”的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T17:58:48.500

该选项`--exclude-dir=exclude`可能有效。

但是，它有一些限制：它将忽略所有“排除”文件夹，而不仅仅是`/var/www/exclude`.

```
grep -r --exclude-dir=exclude pattern /var/www/ 
```

如果您已经在 var 中，那么您当然可以使用 www ：

```
grep -r --exclude-dir=exclude pattern www/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T18:04:23.147

1) 使用`grep -R -f file.txt`，在其中`file.txt`列出所有文件和目录名称，除了 /var/www/exclude

2) 使用以下 bash 脚本：

```
 for i in $( ls /var/www/ ); do
   if [ "$i" != "/var/www/exclude" ] ; then
      grep -R "my search term" $i
   fi
 done 
```

# wpf - WPF 使用纵横比调整 UserControl 的大小

> ID：10657453
> 
> 赞同：2
> 
> 时间：2012-05-18T17:52:52.253
> 
> 标签：wpf, resize, aspect-ratio

我有一个 UserControl 并且必须使用纵横比调整 UserControl 的大小。这意味着：宽度：高度 = 2：1。目前我正在使用这段代码：

```
 protected override Size ArrangeOverride(Size arrangeBounds)
    {
        if (ActualWidth == 0 || ActualHeight == 0) return arrangeBounds;
        base.ArrangeOverride(arrangeBounds);
        double ratio = 2;

        if (Parent != null)
        {
            var size = new Size(arrangeBounds.Height * ratio, arrangeBounds.Height);

            double containerWidth = ((FrameworkElement)Parent).ActualWidth;
            if (containerWidth < size.Width)
            {
                double newHeight = arrangeBounds.Height * (containerWidth / size.Width);
                canvas.Width = newHeight * ratio;
                canvas.Height = newHeight;
            }
            else
            {
                canvas.Width = size.Height * ratio;
                canvas.Height = size.Height;
            }
        }

        return arrangeBounds;
    } 
```

但它并没有真正起作用。这意味着它有效，但并非每次都有效。如果我最大。它有时不会调整窗口大小，因此如果控件调整大小，它有点“随机”。因此，如果有人有更好的解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:23:00.377

最直接的解决方案是通过值转换器将高度直接绑定到宽度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T22:06:49.677

有点晚了，但我最近遇到了同样的问题，因为我没有找到一个好的解决方案，所以我决定编写自己的布局控制/装饰器，并在这里写了一篇关于它的博客文章：

[http://coding4life.wordpress.com/2012/10/15/wpf-resize-maintain-aspect-ratio/](http://coding4life.wordpress.com/2012/10/15/wpf-resize-maintain-aspect-ratio/)

基本上我的解决方案是同时覆盖`MeasureOverride`和`ArrangeOverride`。到目前为止，它在所有常见容器中都运行良好，我没有遇到您描述的任何问题。

我建议阅读这篇文章，在那里你可以找到一个工作的装饰器控件，但最重要的方法是：

```
 protected override Size MeasureOverride(Size constraint)
   {
      if (Child != null)
      {
         constraint = SizeToRatio(constraint, false);
         Child.Measure(constraint);

         if(double.IsInfinity(constraint.Width)
            || double.IsInfinity(constraint.Height))
         {
            return SizeToRatio(Child.DesiredSize, true);
         }

         return constraint;
      }

      // we don't have a child, so we don't need any space
      return new Size(0, 0);
   }

   protected override Size ArrangeOverride(Size arrangeSize)
   {
      if (Child != null)
      {
         var newSize = SizeToRatio(arrangeSize, false);

         double widthDelta = arrangeSize.Width - newSize.Width;
         double heightDelta = arrangeSize.Height - newSize.Height;

         double top = 0;
         double left = 0;

         if (!double.IsNaN(widthDelta)
            && !double.IsInfinity(widthDelta))
         {
            left = widthDelta/2;
         }

         if (!double.IsNaN(heightDelta)
            && !double.IsInfinity(heightDelta))
         {
            top = heightDelta/2;
         }

         var finalRect = new Rect(new Point(left, top), newSize);
         Child.Arrange(finalRect);
      }

      return arrangeSize;
   }

   public Size SizeToRatio(Size size, bool expand)
   {
      double ratio = AspectRatio;

      double height = size.Width / ratio;
      double width = size.Height * ratio;

      if (expand)
      {
         width = Math.Max(width, size.Width);
         height = Math.Max(height, size.Height);
      }
      else
      {
         width = Math.Min(width, size.Width);
         height = Math.Min(height, size.Height);
      }

      return new Size(width, height);
   } 
```

我希望它可以帮助某人！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T06:32:20.257

用 a 包裹您的控件并将其`ViewBox`设置`ViewBox.Stretch`为`Uniform`. 您也可以通过这种方式限制 MaxWidth 和 MaxHeight。

> [有关 Stretch-Enumeration @ MSDN 的更多信息](http://msdn.microsoft.com/en-us/library/system.windows.media.stretch.aspx)
> 
> [如何申请 Stretch @ MSDN](http://msdn.microsoft.com/en-us/library/ms752301.aspx)

# java - Java时区枚举中的Eclipse变量错误

> ID：10657455
> 
> 赞同：1
> 
> 时间：2012-05-18T17:52:56.480
> 
> 标签：java, eclipse, enums, timezone, syntax-error

当我在时区枚举中声明最终的 TimeZone tz 变量时出现错误。[我在http://snipplr.com/view/23131/timezone-enum/](http://snipplr.com/view/23131/timezone-enum/)找到了这个枚举的示例，但是 Eclipse 给了我一个“令牌 tz 的语法错误”，我不知道为什么。我已经以几种方式重新配置了代码，但这似乎是最好的，Eclipse 不喜欢它。

```
import java.util.TimeZone;

public enum TimeZoneEnum {

    DEFAULT(TimeZone.getDefault()),
    ETC_GMT_PLUS_12(TimeZone.getTimeZone("Etc/GMT+12")),
    ETC_GMT_PLUS_11(TimeZone.getTimeZone("Etc/GMT+11")),
    ETC_GMT_PLUS_10(TimeZone.getTimeZone("Etc/GMT+10")),
    ETC_GMT_PLUS_9(TimeZone.getTimeZone("Etc/GMT+9")),
    ETC_GMT_PLUS_8(TimeZone.getTimeZone("Etc/GMT+8")),
    ETC_GMT_PLUS_7(TimeZone.getTimeZone("Etc/GMT+7")),
    ETC_GMT_PLUS_6(TimeZone.getTimeZone("Etc/GMT+6")),
    ETC_GMT_PLUS_5(TimeZone.getTimeZone("Etc/GMT+5")),
    ETC_GMT_PLUS_4(TimeZone.getTimeZone("Etc/GMT+4")),
    ETC_GMT_PLUS_3(TimeZone.getTimeZone("Etc/GMT+3")),
    ETC_GMT_PLUS_2(TimeZone.getTimeZone("Etc/GMT+2")),
    ETC_GMT_PLUS_1(TimeZone.getTimeZone("Etc/GMT+1")),
    ETC_GMT_PLUS_0(TimeZone.getTimeZone("Etc/GMT+0")),
    ETC_GMT_MINUS_1(TimeZone.getTimeZone("Etc/GMT-1")),
    ETC_GMT_MINUS_2(TimeZone.getTimeZone("Etc/GMT-2")),
    ETC_GMT_MINUS_3(TimeZone.getTimeZone("Etc/GMT-3")),
    ETC_GMT_MINUS_4(TimeZone.getTimeZone("Etc/GMT-4")),
    ETC_GMT_MINUS_5(TimeZone.getTimeZone("Etc/GMT-5")),
    ETC_GMT_MINUS_6(TimeZone.getTimeZone("Etc/GMT-6")),
    ETC_GMT_MINUS_7(TimeZone.getTimeZone("Etc/GMT-7")),
    ETC_GMT_MINUS_8(TimeZone.getTimeZone("Etc/GMT-8")),
    ETC_GMT_MINUS_9(TimeZone.getTimeZone("Etc/GMT-9")),
    ETC_GMT_MINUS_10(TimeZone.getTimeZone("Etc/GMT-10")),
    ETC_GMT_MINUS_11(TimeZone.getTimeZone("Etc/GMT-11")),
    ETC_GMT_MINUS_12(TimeZone.getTimeZone("Etc/GMT-12")),
    ETC_GMT_MINUS_13(TimeZone.getTimeZone("Etc/GMT-13")),
    ETC_GMT_MINUS_14(TimeZone.getTimeZone("Etc/GMT-14")),

    private final TimeZone tz;

    private TimeZoneEnum(final TimeZone tz) {
        this.tz = tz;
    }

    public final TimeZone getTimeZone() {
        return tz;
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T17:54:41.830

```
ETC_GMT_MINUS_14(TimeZone.getTimeZone("Etc/GMT-14"));
                                                    ^-- notice the semicolon here 
```

# android - 如何配置我的 Phonegap 应用程序以根据手机的分辨率相应地缩放其视口？

> ID：10657458
> 
> 赞同：4
> 
> 时间：2012-05-18T17:53:07.783
> 
> 标签：android, cordova, scale, autoresize

我正在使用 Phonegap 开发一个 Android 应用程序。这是一款“问答”游戏，与大多数移动应用程序相比，它的布局复杂。

如何配置为以不同的分辨率自动重新缩放？

到目前为止，我正在做与创建简单网页相同的过程：切片图像并使用 CSS 放入 HTML。但我注意到计划使用的分辨率约为 540x960，比我习惯的许多手机都要大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:34:51.633

我不确定，但我认为 index.html 中的这一行可以做到：

```
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> 
```

希望能帮助到你 ：）。

我猜你所拥有的图像与不同的分辨率和媒体查询有关！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:49:31.717

我只是在正文中使用 css 变换比例归档了它。像这样的东西：

```
body {
    -webkit-transform: scale(0.5, 0.5);
    -moz-transform: scale(0.5, 0.5);
    -ms-transform: scale(0.5, 0.5);
    transform: scale(0.5, 0.5);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:43:30.840

[这](https://stackoverflow.com/a/14369661/2163837)可能是相关的答案。

> 如何通过 PhoneGap 制作基于设备宽高的 html 和 css

# ios - 如何在Objective C中获取月份和日期？

> ID：10657460
> 
> 赞同：1
> 
> 时间：2012-05-18T17:53:12.340
> 
> 标签：ios

我是目标 C 的新手，我正在开发一个应用程序来确定用户给出年份和天数时的出生日期。例如，如果用户将 1985 年作为他/她的出生年份，天数为 311。他/这里的出生日期是 1985 年 11 月 6 日。那么如何从 1985 年的 311 获得 11 月 6 日？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:13:39.203

您*永远*不必计算当前年份是否是闰年。永远不会。让框架为您做到这一点。比你或我聪明得多的人已经为我们做到了这一点，那么我们到底为什么要使用永远无法解释所有复杂日历变化的次优算法来重新发明这个轮子呢？

自己做这件事很**愚蠢。**所以不要：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *startComponents = [[NSDateComponents alloc] init];
[startComponents setYear:1985];
[startComponents setDay:311];

NSDate *date = [gregorian dateFromComponents:startComponents];

NSLog(@"endDate: %@", date); 
```

这记录：

```
endDate: 1985-11-07 08:00:00 +0000 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T18:21:34.837

像这样的东西（未经测试）：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init] autorelease];
[df setDateFormat:@"yyyy"];
NSDate *date1 = [df dateWithString:@"1985"];
NSDate *date2 = [df dateByAddingTimeInterval:60*60*24*311]; // 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-18T18:04:26.393

首先，您为什么要从某人那里获取天数而不是获取月份和日期。用户将不知道他们在一年中的哪一天出生，并且会因为试图弄清楚而感到沮丧。

要回答您的问题，您可以有一个数组来存储每个月末的天数 {31, 28, 31, 30, ...} 并将其用作参考（在循环中减去总数）。您还必须检查年份是否为闰年，如果超过 59，则从总数中减去一个。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-18T18:05:53.100

您不需要 Objective-C 中的任何特定内容...首先您需要知道[这一年是否是闰年](https://stackoverflow.com/questions/725098/leap-year-calculation)。然后，您需要计算从几个月到目标日期结束的天数。

# c# - 动态创建控件的事件处理程序

> ID：10657470
> 
> 赞同：2
> 
> 时间：2012-05-18T17:53:45.600
> 
> 标签：c#, asp.net, events

我正在动态创建一个 asp.net`RadioButton`并将其插入到我的网页中：

```
RadioButton rb = new RadioButton();
rb.ID  = "rb" + ReportPKey;
rb.Text = "ReportName";
phUiControls.Controls.Add(rb); 
```

我有以下方法：

```
protected void rb_CheckedChanged( object sender, EventArgs e )
{
    // stuff
} 
```

如何连接它以便在单击`rb_CheckedChanged`时触发`rb`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:56:10.417

使用匿名委托的一种方法（适用于这些类型的场景）：

```
var rb = new RadioButton{ ID = "rb" + ReportPKey, Text = "ReportName" };
phUiControls.Controls.Add( rb );

rb.CheckedChanged += (sender, e) => {
    // event handler code
}; 
```

或者（正如其他几个人指出的那样）：

```
rb.CheckedChanged += rb_CheckedChanged 
```

在页面生命周期的上下文中：

```
protected override OnInit( EventArgs e ){
    BuildDynamicControls();
    base.OnInit( e );
}

private void BuildDynamicControls(){
    var rb = new RadioButton{ ID = "rb" + ReportPKey, Text = "ReportName" };
    phUiControls.Controls.Add( rb );

    rb.CheckedChanged += (sender, e) => {
        // event handler code
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:56:38.703

```
rb.CheckedChanged += rb_CheckedChanged 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:56:30.433

```
RadioButton rb = new RadioButton();
rb.ID  = "rb"+ReportPKey;
rb.Text = ReportName  ;
rb.CheckedChanged += rb_CheckedChanged
phUiControls.Controls.Add(rb); 
```

# java - 多文件类型解析器

> ID：10657472
> 
> 赞同：0
> 
> 时间：2012-05-18T17:53:59.013
> 
> 标签：java, parsing

这是我在此的头一篇博文。我很高兴终于参加了。

我正在一个项目中解析晦涩的文件类型。我需要能够解析 word（我已经做过）、.sbs、.day、.cmp 等等。所有这些类型都可以简单地用记事本打开并显示出来。

由于我对这些东西很陌生，有没有办法可以使用一些通用库（或两个）来打开所有这些？如果是这样，它会是什么图书馆？

在这种情况下，最佳做法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:34:44.283

您可以使用[Apache Commons IO](http://commons.apache.org/io/)库。[`FileUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)类有几个方法可以接收文件路径和可选的文件编码。

如果您只想读取文本文件并将它们保存到文本变量

```
java.io.File file = new java.io.File("C:\\dir\\file.cmp");
String allWordAndLines = org.apache.commons.io.FileUtils.readFileToString(file); 
```

如果您想要单独的每一行并将它们存储在一个集合中：

```
java.util.List<String> lines = org.apache.commons.io.FileUtils.readLines(file);
for(String line : lines) {
    // do something with line
} 
```

要指定编码，您需要添加另一个参数：

```
org.apache.commons.io.FileUtils.readFileToString(file, "UTF-8");
org.apache.commons.io.FileUtils.readLines(file, "Cp1252"); 
```

Java 包括几个用于读取文件的类，请参阅[http://docs.oracle.com/javase/tutorial/essential/io/index.html中的更多内容](http://docs.oracle.com/javase/tutorial/essential/io/index.html)

如果您只想让您的文本文件在内存中可用，我希望这可以帮助您。

# bezier - 如何计算 4 次多项式的长度（在平方根内）

> ID：10657474
> 
> 赞同：1
> 
> 时间：2012-05-18T17:54:16.433
> 
> 标签：bezier, integral, square-root

我正在尝试用这种形式求解积分（其中 a、b、c、d、e、f 和 g 是常数）：

```
integral from f to g( (ax^4 + bx^3 + cx^2 + dx + e)^0.5dx ) 
```

我在尝试找到三次贝塞尔曲线的长度时遇到了这个问题（不使用递归细分）。我的目标是有一个符号方程，可以找到任何 t 范围之间的贝塞尔曲线的长度（即上面方程中的 f 和 g）。

我的第一个猜测是完成平方，但维基百科很清楚这仅适用于二次方程。
按部分集成......似乎不适用于此。

下一个问题（虽然，不是本主题的主题），使用它真的比递归细分贝塞尔曲线更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:50:06.783

以防万一其他人发现这个问题，没有封闭形式的解决方案，但是有非常有效的方法可以在不进行递归细分的情况下找到长度，例如[http://pomax.github.com/bezierinfo/#arclength](http://pomax.github.com/bezierinfo/#arclength)

# delphi - 实现 List Enumerator OfType 在德尔福

> ID：10657475
> 
> 赞同：21
> 
> 时间：2012-05-18T17:54:16.857
> 
> 标签：delphi, generics, enumerable

我正在使用 Delphi XE 来实现一个允许按类型过滤列表元素的枚举器。我快速组装了一个测试单元，如下所示：

```
unit uTestList;

interface

uses Generics.Collections;

type
  TListItemBase = class(TObject)
  end; { TListItemBase }

  TListItemChild1 = class(TListItemBase)
  end;

  TListItemChild2 = class(TListItemBase)
  end;

  TTestList<T : TListItemBase> = class;

  TOfTypeEnumerator<T, TFilter> = class(TInterfacedObject, IEnumerator<TFilter>)
  private
    FTestList : TList<T>;
    FIndex : Integer;
  protected
    constructor Create(Owner : TList<T>); overload;

    function GetCurrent : TFilter;
    function MoveNext : Boolean;
    procedure Reset;

    function IEnumerator<TFilter>.GetCurrent = GetCurrent;
    function IEnumerator<TFilter>.MoveNext = MoveNext;
    procedure IEnumerator<TFilter>.Reset = Reset;
  end;

  TOfTypeEnumeratorFactory<T, TFilter> = class(TInterfacedObject, IEnumerable)
  private
    FTestList : TList<T>;
  public
    constructor Create(Owner : TList<T>); overload;
    function GetEnumerator : TOfTypeEnumerator<T, TFilter>;
  end;

  TTestList<T : TListItemBase> = class(TList<T>)
  public
    function OfType<TFilter : TListItemBase>() : IEnumerable;
  end; { TTestList }

implementation

{ TOfTypeEnumerator<T, TFilter> }

constructor TOfTypeEnumerator<T, TFilter>.Create(Owner: TList<T>);
begin
  inherited;
  FTestList := Owner;
  FIndex := -1;
end;

function TOfTypeEnumerator<T, TFilter>.GetCurrent: TFilter;
begin
  Result := TFilter(FTestList[FIndex]);
end;

function TOfTypeEnumerator<T, TFilter>.MoveNext: Boolean;
begin
  Inc(FIndex);
  while ((FIndex < FTestList.Count)
         and (not FTestList[FIndex].InheritsFrom(TFilter))) do
  begin
    Inc(FIndex);
  end; { while }
end;

{ TOfTypeEnumeratorFactory<T, TFilter> }

constructor TOfTypeEnumeratorFactory<T, TFilter>.Create(Owner: TList<T>);
begin
  inherited;
  FTestList := Owner;
end;

function TOfTypeEnumeratorFactory<T, TFilter>.GetEnumerator: TOfTypeEnumerator<T, TFilter>;
begin
  Result := TOfTypeEnumerator<T,TFilter>.Create(FTestList);
end;

{ TTestList<T> }

function TTestList<T>.OfType<TFilter>: IEnumerable;
begin
  Result := TOfTypeEnumeratorFactory<T,TFilter>.Create(self);
end;

end. 
```

编译此单元失败，出现可怕的 F2084 内部错误：D7837。我当然可以在没有枚举器的情况下做到这一点，但我宁愿有一个可用的枚举器来使代码保持一致。当我试图在 Spring4D 之上实现它时，我遇到了类似的编译器问题，但我想我会在这里提出一个普通的、普通的 Delphi 问题。

有没有人有一个实际编译的替代实现？

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-23T06:58:00.833

您不想使用 System.pas 中的 IEnumerator<T>，相信我。那件事带来了很多麻烦，因为它继承自 IEnumerator，因此具有不同结果的 GetCurrent 方法（IEnumerator 的 TObject 和 IEnumerator<T> 的 T）。

更好地定义您自己的 IEnumerator<T>：

```
IEnumerator<T> = interface
  function GetCurrent: T;
  function MoveNext: Boolean;
  procedure Reset;
  property Current: T read GetCurrent;
end; 
```

与 IEnumerable 相同。我想说定义你自己的 IEnumerable<T>：

```
IEnumerable<T> = interface
  function GetEnumerator: IEnumerator<T>;
end; 
```

如果您在 TOfTypeEnumerator<T, TFilter> 中使用它，则可以删除导致 ICE 的方法解析子句。

当您这样做时，您将开始看到其他编译器错误 E2008、E2089 等等。

*   在构造函数中调用刚刚继承的函数会尝试在不存在的祖先类中调用具有相同签名的构造函数。所以把它改成继承的Create。

*   不要使用 IEnumerable 而是使用 IEnumerable<TFilter> 因为那是您想要枚举的内容

*   不要使用只允许用于对象的方法和强制转换，或者在 T 和 TFilter 上指定类约束

*   MoveNext 需要一个结果

这里是编译单元。做了一个快速测试，它似乎工作：

```
unit uTestList;

interface

uses
  Generics.Collections;

type
  IEnumerator<T> = interface
    function GetCurrent: T;
    function MoveNext: Boolean;
    property Current: T read GetCurrent;
  end;

  IEnumerable<T> = interface
    function GetEnumerator: IEnumerator<T>;
  end;

  TOfTypeEnumerator<T: class; TFilter: class> = class(TInterfacedObject, IEnumerator<TFilter>)
  private
    FTestList: TList<T>;
    FIndex: Integer;
  protected
    constructor Create(Owner: TList<T>); overload;

    function GetCurrent: TFilter;
    function MoveNext: Boolean;
  end;

  TOfTypeEnumeratorFactory<T: class; TFilter: class> = class(TInterfacedObject, IEnumerable<TFilter>)
  private
    FTestList: TList<T>;
  public
    constructor Create(Owner: TList<T>); overload;
    function GetEnumerator: IEnumerator<TFilter>;
  end;

  TTestList<T: class> = class(TList<T>)
  public
    function OfType<TFilter: class>: IEnumerable<TFilter>;
  end;

implementation

{ TOfTypeEnumerator<T, TFilter> }

constructor TOfTypeEnumerator<T, TFilter>.Create(Owner: TList<T>);
begin
  inherited Create;
  FTestList := Owner;
  FIndex := -1;
end;

function TOfTypeEnumerator<T, TFilter>.GetCurrent: TFilter;
begin
  Result := TFilter(TObject(FTestList[FIndex]));
end;

function TOfTypeEnumerator<T, TFilter>.MoveNext: Boolean;
begin
  repeat
    Inc(FIndex);
  until (FIndex >= FTestList.Count) or FTestList[FIndex].InheritsFrom(TFilter);
  Result := FIndex < FTestList.Count;
end;

{ TOfTypeEnumeratorFactory<T, TFilter> }

constructor TOfTypeEnumeratorFactory<T, TFilter>.Create(Owner: TList<T>);
begin
  inherited Create;
  FTestList := Owner;
end;

function TOfTypeEnumeratorFactory<T, TFilter>.GetEnumerator: IEnumerator<TFilter>;
begin
  Result := TOfTypeEnumerator<T, TFilter>.Create(FTestList);
end;

{ TTestList<T> }

function TTestList<T>.OfType<TFilter>: IEnumerable<TFilter>;
begin
  Result := TOfTypeEnumeratorFactory<T,TFilter>.Create(self);
end;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:31:26.070

使用`system.IEnumerable<T>`和的工作版本`system.IEnumerator<T>`

```
unit uTestList;

interface

uses Generics.Collections;

type
  TListItemBase = class(TObject)
  end; { TListItemBase }

  TListItemChild1 = class(TListItemBase)
  end;

  TListItemChild2 = class(TListItemBase)
  end;

  TTestList<T : TListItemBase> = class;

  TOfTypeEnumerator<T : class; TFilter : class> = class(TInterfacedObject, IEnumerator<TFilter>, IEnumerator)
  private
    FTestList : TList<T>;
    FIndex : Integer;
  protected
    constructor Create(Owner : TList<T>); overload;

    function GetCurrent: TObject;
    function GenericGetCurrent : TFilter;
    function MoveNext : Boolean;
    procedure Reset;

    function IEnumerator<TFilter>.GetCurrent = GenericGetCurrent;
  end;

  TOfTypeEnumeratorFactory<T : class; TFilter : class> = class(TInterfacedObject, IEnumerable<TFilter>, IEnumerable)
  private
    FTestList : TList<T>;
  public
    constructor Create(Owner : TList<T>); overload;
    function GetEnumerator : IEnumerator;
    function GenericGetEnumerator : IEnumerator<TFilter>;
    function IEnumerable<TFilter>.GetEnumerator = GenericGetEnumerator;
  end;

  TTestList<T : TListItemBase> = class(TList<T>)
  public
    function OfType<TFilter : TListItemBase>() : IEnumerable<TFilter>;
  end; { TTestList }

implementation

{ TOfTypeEnumerator<T, TFilter> }

constructor TOfTypeEnumerator<T, TFilter>.Create(Owner: TList<T>);
begin
  inherited Create;
  FTestList := Owner;
  FIndex := -1;
end;

function TOfTypeEnumerator<T, TFilter>.GenericGetCurrent: TFilter;
begin
  Result := TFilter(TObject(FTestList[FIndex]));
end;

function TOfTypeEnumerator<T, TFilter>.GetCurrent: TObject;
begin
  Result := TObject( FTestList[FIndex] );
end;

function TOfTypeEnumerator<T, TFilter>.MoveNext: Boolean;
begin
  repeat
    Inc(FIndex);
  until (FIndex >= FTestList.Count) or FTestList[FIndex].InheritsFrom(TFilter);
  Result := FIndex < FTestList.Count;
end;

procedure TOfTypeEnumerator<T, TFilter>.Reset;
begin
  FIndex := -1;
end;

{ TOfTypeEnumeratorFactory<T, TFilter> }

constructor TOfTypeEnumeratorFactory<T, TFilter>.Create(Owner: TList<T>);
begin
  inherited Create;
  FTestList := Owner;
end;

function TOfTypeEnumeratorFactory<T, TFilter>.GetEnumerator: IEnumerator;
begin
  Result := GenericGetEnumerator;
end;

function TOfTypeEnumeratorFactory<T, TFilter>.GenericGetEnumerator: IEnumerator<TFilter>;
begin
  Result := TOfTypeEnumerator<T,TFilter>.Create(FTestList);
end;

{ TTestList<T> }

function TTestList<T>.OfType<TFilter>: IEnumerable<TFilter>;
begin
  Result := TOfTypeEnumeratorFactory<T,TFilter>.Create(self);
end;

end. 
```

测试程序：

```
var
  MyElem: TListItemBase;
  MyElem1: TListItemChild1;
  MyElem2: TListItemChild2;
begin
  Memo1.Clear;
  for MyElem in FTestList.OfType<TListItemBase>() do
  begin
    Memo1.Lines.Add('----------');
  end;
  for MyElem1 in FTestList.OfType<TListItemChild1>() do
  begin
    Memo1.Lines.Add('==========');
  end;
  for MyElem2 in FTestList.OfType<TListItemChild2>() do
  begin
    Memo1.Lines.Add('++++++++++');
  end; 
```

# c# - ods 通用缓存和排序

> ID：10657479
> 
> 赞同：2
> 
> 时间：2012-05-18T17:54:31.510
> 
> 标签：c#, asp.net, objectdatasource

首先，我想说，啊！！

[在这个线程停止的地方挑选](https://stackoverflow.com/questions/2316959/selected-event-not-raised-for-objectdatasource-when-enable-caching-is-true)

基本上，该线程是关于无法在启用缓存的情况下对通用列表进行排序。我尝试了多种回复，但没有运气。好像我很接近但到目前为止...

```
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
    //What goes in this area?
    CheckExpiredCacheKey(argRefresh);
    ObjectDataSource1.SelectParameters["sortBy"].DefaultValue = string.Format("{0} {1}", e.SortExpression, e.SortDirection == SortDirection.Ascending ? "ASC" : "DESC");                     
    e.Cancel = true;
}

public void CheckExpiredCacheKey(string ckey)
{
    if (Cache[ckey] == null)
        Cache[ckey] = new object(); //Set Cache key which will b used to manually expire ODS cache     

    if (!IsPostBack && Request.QueryString["refresh"] == "1")//check refresh flag
    {
        //Cache.Remove(ckey);//NOT NEEDED: use the following instead
        Cache[ckey] = new object();// Needed otherwise it'll call Grid-populate twice
    }
} 
```

这是 Select 方法，在尝试这种对通用列表进行排序和缓存的方式时，sortBy 字符串始终为空？

```
[DataObject(true)]
public class BusinessLogic
{
    [DataObjectMethod(DataObjectMethodType.Select, true)]
    public static List<Customer> GetCustomers(int financeId, int startIndex, int pageSize, string sortBy)
    {
        return DataAccess.GetCustomers(financeId, startIndex, pageSize, sortBy);
    } 
```

# .htaccess - 如何使用 mod_rewrite 重命名 url 中的模块

> ID：10657480
> 
> 赞同：0
> 
> 时间：2012-05-18T17:54:36.697
> 
> 标签：.htaccess, mod-rewrite, apache2

我正在使用 MVC 和 /<module>/<controller>/<action>/ 在 example.com/module/whatever 有一个模块，我需要将它“重命名”为 example.com/module-a/whatever。整个应用程序已经编写好了，所以我无法在我的代码中到处更改它，所以我希望使用 mod_rewrite 来完成。我试过以下

```
RewriteCond %{THE_REQUEST} ^GET\ /module/
RewriteRule ^module/(.*) /module-a/$1 [L,R=301] 
```

就将 example.com/module/whatever 之类的所有 url 重定向到 example.com/module-a/whatever 而言，这做了我想要的，但现在我需要将“module-a”中的所有请求在内部重写为“module” . 它还需要适用于模块根目录（即 example.com/module 没有尾部斜杠）。这可能吗？我添加了

```
RewriteRule ^module-a/(.*)$ module/$1 
```

直接在上述条件和规则之下，但是当访问页面时，它仍然说找不到模块'module-a'。

* * *

**编辑：**

我在这些之下还有一些规则，我认为它们不会影响这一点，但无论如何它们都在这里：

```
RewriteCond %{REQUEST_FILENAME} -s [OR] 
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d 
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

* * *

**解决方案**

我最终使用

```
RewriteCond %{THE_REQUEST} ^GET\ /module/
RewriteRule ^module$ /module-a [L,R=301]
RewriteRule ^module/(.*) /module-a/$1 [L,R=301] 
```

将所有链接从模块重定向到模块-a。我必须使用 2 条规则来做到这一点，因为我不太了解正则表达式来组合它们，处理 url example.com/module 的特殊情况。

要在内部重写，我原来的规则通常可以工作，但 Zend 似乎做了一些覆盖它的东西，所以我不得不用路由来处理它。请参阅[使用路由重命名 zend 模块](https://stackoverflow.com/questions/10661232/rename-a-zend-module-with-routes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:41:58.497

如果我理解正确，那么您从错误的方向着手。我也不清楚你的 RewriteCond 的目的

您希望所有 module-a/* 请求在内部作为 module/* 处理，因此您只需要简单的重写::

RewriteRule ^module-a/?(.*) /module/$1 [L]

我怀疑您遇到的问题是网站上的内部链接都引用 /module/ 而不是 /module-a/，但是放置 301 将导致问题无止境（尤其是搜索引擎），并且随后重写你可能会陷入循环引用。您最好更改应用程序中的链接代码（如果您有链接抽象类），或者在最坏的情况下使用输出缓冲在呈现页面之前交换所有链接。

注意：如果第一个匹配，则不会处理上述第二个规则，因为如果该规则匹配，[L] 会导致 mod_rewrite 停止处理。

# javascript - 使用 Javascript 在标签中的内容之前附加元素

> ID：10657487
> 
> 赞同：2
> 
> 时间：2012-05-18T17:54:47.570
> 
> 标签：javascript, html, dom, appendchild

我用一个例子来说明：我需要用javascript转换下面的html

```
<a>Text 1</a>
<a>Text 2</a>
<a>Text 3</a>
... 
```

编码

```
<a><input/>Text 1</a>
<a><input/>Text 2</a>
<a><input/>Text 3</a>
... 
```

我不知道如何使用 createElement、appendChild 或 insertBefore/After 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:00:25.423

这并不难:)

```
​(function() {
    var links = document.getElementsByTagName("a"),
        input,
        i = links.length;

    while (i--) {
        input = document.createElement("input");
        links[i].insertBefore(input, links[i].firstChild);
    }
}())​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:00:16.343

### .insertBefore 和 .firstChild

您可以在每个锚的第一个子元素之前插入新的输入元素：

```
// Gather up a reference to all anchors
var anchors = document.getElementsByTagName("a"), inputEl;
// Cycle over all of them
for ( var i = 0; i < anchors.length; i++ ) {
  // Create a new input field
  inputEl = document.createElement("input");
  // Insert it before the first child of the anchor
  anchors[i].insertBefore( inputEl, anchors[i].firstChild );
} 
```

演示：http: [//jsbin.com/ibugul/edit#javascript,html](http://jsbin.com/ibugul/edit#javascript,html)

### 正则表达式

或者您可以使用以下`replace`方法：

```
var a = document.getElementsByTagName("a"), 
    c = a.length;

while ( c-- ) {
  a[c].innerHTML = a[c].innerHTML.replace( /(.*)/, function( s, c2 ){
    return "<input />" + c2;
  }); 
} 
```

### 修改 .innerHTML

```
var a = document.getElementsByTagName("a"), 
    c = a.length;

while ( c-- ) a[c].innerHTML = "<input />" + a[c].innerHTML; 
```

### jQuery

如果您已经在您的网站上使用[jQuery](http://jquery.com)，您可以使用它来缩短它：

```
$("a").prepend("<input />"); 
```

*请注意，仅为*此而包含库是不值得的。

# c# - 将值从 aspx 传递给 ascx

> ID：10657491
> 
> 赞同：1
> 
> 时间：2012-05-18T17:55:14.607
> 
> 标签：c#, asp.net, ascx

我有一个网页，其中包含一个用户控件。我在 aspx 页面上有一个属性，该属性在 pageinit 方法中设置，我需要在 ascx 页面上设置该属性。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:01:33.137

```
MyAdminPage myPageInstance = this.Parent as MyAdminPage;
if(myPageInstance != null)
{
...
} 
```

对此有几个问题。

[从 .ascx 引用 .aspx 属性](https://stackoverflow.com/questions/5621512/reference-aspx-property-from-ascx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:02:41.537

在 ascx 中创建一个公共属性，并在您在 aspx 页面中设置的同时进行设置。

只是让您知道，PreInit 是[EventHandler](http://msdn.microsoft.com/en-us/library/6w2tb12s%28v=vs.100%29.aspx)而不是方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-13T15:33:14.753

最简单的选项如下：

1.  使用公共变量并从父页面访问它。
2.  将变量分配给 ascx 前端的隐藏字段。像这样的字段：`<asp:HiddenField ID="ascxField" runat="server" />`.

下面的示例适用于#1，但#2 几乎相同。

示例 #1：

**页面：**

*前端：*

```
<%@ Register TagPrefix="Admin" TagName="MyUserControl" Src="~/UserControls/.../MyUserControl" %> 
```

...

```
<Admin:MyUserControl ID="MyUserControl" AutoPostBack="true" runat="server" Visible ="false" /> 
```

*代码背后：*

```
 this.MyUserControl.Variable1 = 1;
 this.MyUserControl.Variable2= "value"; 
```

**Ascx 页面：**

*代码背后*

```
public int Variable1 { get; set; }
public string Variable2 { get; set; } 
```

# android - 动态链接到 Android 中的共享 Java 库

> ID：10657494
> 
> 赞同：2
> 
> 时间：2012-05-18T17:55:35.800
> 
> 标签：android, sdk, shared-libraries, dynamic-library

我正在尝试将多个 Android“服务”使用的 Java 库分离到一个动态或共享库中，这些库可以由这些独立服务加载，而无需将该库包含在每个服务的 APK 中。

我知道有不同的方法可以做到这一点，例如创建 Android 服务或使用 DexLoader 和反射，但我试图避免更改库的源。相反，我正在尝试构建它并将其安装在我的设备上（本质上扩展了提供的 android API）。

以下是一个非常相似的问题，仍然没有答案： [在 Eclipse 中创建 Android 应用程序共享公共库](https://stackoverflow.com/questions/8733530/create-android-apps-in-eclipse-sharing-common-library?answertab=active#tab-top)

我知道这是 Google 不想透露的，因此在线查找信息非常困难。

到目前为止，我已经尝试在 frameworks 目录下放置一个简单的“Hello World”程序并构建它，它成功地为我的程序创建了一个 jar。然后我在 product/core.mk 中添加了我的包，并在 api/10.xml 下添加了我的包定义，之后我运行“make sdk”，导致以下错误消息：

```
******************************
You have tried to change the API from what has been previously released in
an SDK.  Please fix the errors listed above.
******************************
make: *** [out/target/common/obj/PACKAGING/checkapi-last-timestamp] Error 38 
```

作为一种解决方法，我将我的包添加到 out 目录内的“public_api.xml”文件中，该文件是在构建过程中以某种方式动态创建的。使用这种解决方法，SDK 构建时没有错误（尽管如果我再次清理，我将不得不再次修改 public_api.xml，因为它将因清理而被删除）。但是，当我尝试在任何地方导入和使用我的包时，它仍然说我的包“不存在”

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:20:03.070

终于想通了。解决方案原来非常简单！

将您的库放在**frameworks/base**文件夹中，并确保您的所有源代码都在 java 目录下，如下所示：

```
../frameworks/base/HelloWorld/java/<source files and folders> 
```

编辑位于**build/target/product/下的****core.mk**文件以将您的包包含在列表中。这会将 HelloWorld 库添加到框架中：

 **```
PRODUCT_PACKAGES := \
    bouncycastle \
    :
    :
    DefaultContainerService \
    Bugreport \
    HelloWorld 
```

编辑位于**build/core/下的****pathmap.mk**文件以将您的目录包含在列表中。这会将 HelloWorld 库添加到 android.jar

 **```
FRAMEWORKS_BASE_SUBDIRS := \
    $(addsuffix /java, \
        core \
        graphics \
        location \
        media \
        opengl \
        sax \
        telephony \
        wifi \
        vpn \
        keystore \
        voip \
        HelloWorld \
     ) 
```

完毕。重建android，它不应该抱怨并将您的库添加到**framework.jar**！

我希望这有帮助。****

# gdb - 在多个进程上使用 GDB 进行调试

> ID：10657495
> 
> 赞同：4
> 
> 时间：2012-05-18T17:55:39.797
> 
> 标签：gdb, qnx-neutrino, multiple-processes

在没有深入细节的情况下，我正在开发一个程序，该程序由几个单独的进程组成，所有进程都在嵌入式 QNX RTOS 上运行。它们没有父子关系，它们都是使用生成的，`spawnlp(P_NOWAIT, ...)`并且它们都使用操作系统提供的 IPC 机制相互通信。

当我使用 GDB 进行调试并且在我正在工作的过程中遇到断点时，我的所有线程都被暂停，这很棒。但是有没有办法让它暂停执行我的*其他*进程？现在发生的事情是所有其他进程在我的进程暂停时继续运行，因此所有 IPC 队列都已满等等。

提前致谢，

高频

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:15:41.027

您可以将 GDB 命令列表与每个断点相关联。因此，当您在进程 A 中遇到断点时，您可以发送一个 SIGTRAP 到进程 B，它应该将其放入调试器中：

```
(gdb) b main
Breakpoint 1 at 0x804834a: file testA.c, line 40.
(gdb) command
Type commands for when breakpoint 1 is hit, one per line.
End with a line saying just "end".
>shell kill -s TRAP `pidof testB`
>end
(gdb) 
```

[断点命令列表](http://sourceware.org/gdb/current/onlinedocs/gdb/Break-Commands.html#Break-Commands)中的更多信息

# c# - C# 从 .NET 3.5 转换为 3.0

> ID：10657500
> 
> 赞同：2
> 
> 时间：2012-05-18T17:56:01.900
> 
> 标签：c#, .net, visual-studio-2010

我不得不将我的程序从 .NET 3.5 降级到 3.0。我所做的是`properties->application`将“目标框架”从 3.5 更改为 3.0。这是正确的步骤吗？现在我收到警告：

我只有这个

```
using System;
using System.Collections.Generic;
using System.Collections;
using System.Text;
using System.IO; 
```

但我明白了

> 警告 1 主要参考“System.Core”是一个框架程序集，无法在当前目标框架中解析。“.NETFramework，版本=v3.0”。要解决此问题，请删除引用“System.Core”或将您的应用程序重新定位到包含“System.Core”的框架版本。程序名称1
> 
> 警告 2 无法解析主要引用“System.Xml.Linq”，因为它间接依赖于无法解析的框架程序集“System.Core，Version=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”在当前的目标框架中。“.NETFramework，版本=v3.0”。要解决此问题，请删除引用“System.Xml.Linq”或将您的应用程序重新定位到包含“System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的框架版本。程序名称1
> 
> 警告 3 无法解析主要引用“System.Data.DataSetExtensions”，因为它间接依赖于无法解析的框架程序集“System.Core，Version=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”在当前的目标框架中。“.NETFramework，版本=v3.0”。要解决此问题，请删除引用“System.Data.DataSetExtensions”或将您的应用程序重新定位到包含“System.Core，Version=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的框架版本。程序名称1
> 
> 警告 4 主要参考“System.Xml.Linq”是一个框架程序集，无法在当前目标框架中解析。“.NETFramework，版本=v3.0”。要解决此问题，请删除引用“System.Xml.Linq”或将您的应用程序重新定位到包含“System.Xml.Linq”的框架版本。程序名称1
> 
> 警告 5 主要引用“System.Data.DataSetExtensions”是一个框架程序集，无法在当前目标框架中解析。“.NETFramework，版本=v3.0”。要解决此问题，请删除引用“System.Data.DataSetExtensions”或将您的应用程序重新定位到包含“System.Data.DataSetExtensions”的框架版本。程序名称1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T17:57:42.403

警告告诉您这五个程序集是 .Net 3.5 的新程序，不能从 .Net 3.0 中引用。
只需删除那些引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:44:30.300

看来您正在广泛使用扩展方法，这是您遇到大多数这些错误的主要原因之一。

扩展方法需要 3.5。

# php - 正则表达式匹配 YouTube 链接，需要从匹配中省略行尾

> ID：10657502
> 
> 赞同：0
> 
> 时间：2012-05-18T17:56:10.300
> 
> 标签：php, regex, wordpress

来自 WordPress 项目的（简化）代码：

```
function fix_youtube_links ($content) {
    $append = '&w=480&rel=0';
    $content = preg_replace('/^http:\/\/(?:www\.)?(?:youtube.com\/(?:v\/|watch[\/\#?])|(youtu\.be\/)).*/im', '$0'.$append, $content);
    return $content;
}
add_filter('the_content', 'fix_youtube_links'); 
```

`$content`看起来像这样：

```
blah blah blah

http://www.youtube.com/watch?v=rUtdP3jQKUA

blah blah blah 
```

我想添加`$append`到比赛中并得到这个：

```
blah blah blah

http://www.youtube.com/watch?v=rUtdP3jQKUA&w=480&rel=0

blah blah blah 
```

但相反，我得到了这个：

```
blah blah blah

http://www.youtube.com/watch?v=rUtdP3jQKUA
&w=480&rel=0

blah blah blah 
```

...因为比赛中包含了行尾。

有什么建议么？欢迎使用正则表达式或非正则表达式解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:59:29.853

试试这个：

```
$content = preg_replace('/^http:\/\/(?:www\.)?(?:youtube.com\/(?:v\/|watch[\/\#?])|(youtu\.be\/))[^\n\r]*/im', '$0'.$append, $content); 
```

# algorithm - 从整数流中查找运行中位数

> ID：10657503
> 
> 赞同：239
> 
> 时间：2012-05-18T17:56:11.370
> 
> 标签：algorithm, heap, median

> **可能重复：**
> [C 中的滚动中值算法](https://stackoverflow.com/questions/1309263/rolling-median-algorithm-in-c)

> 鉴于整数是从数据流中读取的。以有效的方式查找到目前为止读取的元素的中位数。

我读过的解决方案：我们可以在左侧使用最大堆来表示小于有效中位数的元素，在右侧使用最小堆来表示大于有效中位数的元素。

处理传入元素后，堆中的元素数量最多相差 1 个元素。当两个堆包含相同数量的元素时，我们找到堆的根数据的平均值作为有效中位数。当堆不平衡时，我们从包含更多元素的堆根中选择有效中位数。

但是我们如何构造一个最大堆和最小堆，即我们如何知道这里的有效中位数？我认为我们会在 max-heap 中插入 1 个元素，然后在 min-heap 中插入下一个 1 个元素，以此类推所有元素。纠正我如果我在这里错了。

* * *

## 回答 #1

> 赞同：396
> 
> 时间：2012-05-18T18:15:42.147

有许多不同的解决方案可以从流数据中找到运行中位数，我将在答案的最后简要讨论它们。

问题是关于特定解决方案（最大堆/最小堆解决方案）的详细信息，以及基于堆的解决方案如何工作的解释如下：

对于前两个元素，将较小的元素添加到左侧的 maxHeap 中，将较大的元素添加到右侧的 minHeap 中。然后一一处理流数据，

```
Step 1: Add next item to one of the heaps

   if next item is smaller than maxHeap root add it to maxHeap,
   else add it to minHeap

Step 2: Balance the heaps (after this step heaps will be either balanced or
   one of them will contain 1 more item)

   if number of elements in one of the heaps is greater than the other by
   more than 1, remove the root element from the one containing more elements and
   add to the other one 
```

然后在任何给定时间，您都可以像这样计算中位数：

```
 If the heaps contain equal amount of elements;
     median = (root of maxHeap + root of minHeap)/2
   Else
     median = root of the heap with more elements 
```

现在我将按照答案开头所承诺的一般性地讨论这个问题。从数据流中找到运行中位数是一个棘手的问题，对于一般情况来说，有效地找到具有内存限制的**精确解决方案可能是不可能的。**另一方面，如果数据具有我们可以利用的某些特征，我们可以开发有效的专业解决方案。例如，如果我们知道数据是整数类型，那么我们可以使用[计数排序](http://en.wikipedia.org/wiki/Counting_sort)，它可以给你一个常数记忆常数时间算法。基于堆的解决方案是一种更通用的解决方案，因为它也可以用于其他数据类型（双精度）。最后，如果不需要确切的中位数并且近似值就足够了，您可以尝试估计数据的概率密度函数并使用它估计中位数。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-05-21T23:05:17.770

如果输入的方差是统计分布的（例如正态分布、对数正态分布等），则储层采样是从任意长的数字流中估计百分位数/中位数的合理方法。

```
int n = 0;  // Running count of elements observed so far  
#define SIZE 10000
int reservoir[SIZE];  

while(streamHasData())
{
  int x = readNumberFromStream();

  if (n < SIZE)
  {
       reservoir[n++] = x;
  }         
  else 
  {
      int p = random(++n); // Choose a random number 0 >= p < n
      if (p < SIZE)
      {
           reservoir[p] = x;
      }
  }
} 
```

然后，“水库”是所有输入的运行，统一（公平）样本 - 无论大小。找到中位数（或任何百分位数）是对水库进行分类和轮询感兴趣点的直接问题。

由于水库是固定大小的，因此可以认为排序实际上是 O(1) - 这种方法在恒定时间和内存消耗下运行。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-05-21T21:19:09.600

如果您不能一次将所有项目都保存在内存中，那么这个问题就会变得更加困难。堆解决方案要求您一次将所有元素保存在内存中。这在这个问题的大多数实际应用中是不可能的。

相反，当您看到数字时，请跟踪您看到每个整数的次数*。*假设 4 字节整数，即 2^32 个桶，或最多 2^33 个整数（每个 int 的键和计数），即 2^35 字节或 32GB。它可能会比这少得多，因为您不需要为那些为 0 的条目存储密钥或计数（即，就像 python 中的 defaultdict）。这需要恒定的时间来插入每个新整数。

然后在任何时候，要找到中位数，只需使用计数来确定哪个整数是中间元素。这需要恒定的时间（尽管是一个很大的常数，但仍然是常数）。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-05-21T23:14:09.080

我发现计算流百分位数的最有效方法是 P² 算法：[Raj Jain，Imrich Chlamtac：在不存储观测值的情况下动态计算分位数和直方图的 P² 算法。交流。ACM 28（10）：1076-1085（1985）](http://www.cs.wustl.edu/~jain/papers/ftp/psqr.pdf)

该算法很容易实现并且运行良好。但是，这是一个估计值，因此请记住这一点。从摘要：

> 提出了一种启发式算法，用于动态计算中位数和其他分位数。在生成观测值时动态生成估计值。不存储观察结果；因此，无论观察次数如何，该算法的存储需求都非常小且固定。这使其非常适合在可用于工业控制器和记录器的分位数芯片中实现。该算法进一步扩展到直方图绘制。分析算法的准确性。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2012-05-22T05:36:47.400

如果我们想找到最近看到的*n 个*元素的中位数，这个问题有一个精确的解决方案，只需要将*n 个*最近看到的元素保存在内存中。它速度快且扩展性好。

可[索引的跳过列表](http://en.wikipedia.org/wiki/Skip_list)支持 O(ln n) 插入、删除和索引搜索任意元素，同时保持排序顺序。当与跟踪第 n 个最旧条目的[FIFO 队列结合使用时，解决方案很简单：](http://en.wikipedia.org/wiki/Queue_%28abstract_data_type%29)

```
class RunningMedian:
    'Fast running median with O(lg n) updates where n is the window size'

    def __init__(self, n, iterable):
        self.it = iter(iterable)
        self.queue = deque(islice(self.it, n))
        self.skiplist = IndexableSkiplist(n)
        for elem in self.queue:
            self.skiplist.insert(elem)

    def __iter__(self):
        queue = self.queue
        skiplist = self.skiplist
        midpoint = len(queue) // 2
        yield skiplist[midpoint]
        for newelem in self.it:
            oldelem = queue.popleft()
            skiplist.remove(oldelem)
            queue.append(newelem)
            skiplist.insert(newelem)
            yield skiplist[midpoint] 
```

以下是完整工作代码的链接（易于理解的类版本和内联可索引跳过列表代码的优化生成器版本）：

*   [http://code.activestate.com/recipes/576930-efficient-running-median-using-an-indexable-skipli/](http://code.activestate.com/recipes/576930-efficient-running-median-using-an-indexable-skipli/)

*   [http://code.activestate.com/recipes/577073](http://code.activestate.com/recipes/577073)。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2012-05-22T18:59:01.387

一种直观的思考方式是，如果你有一个完全平衡的二叉搜索树，那么根将是中间元素，因为会有相同数量的更小和更大的元素。现在，如果树没有满，情况就不是这样了，因为最后一层会缺少元素。

所以我们可以做的是有中位数和两棵平衡二叉树，一棵用于小于中位数的元素，一棵用于大于中位数的元素。两棵树必须保持相同的大小。

当我们从数据流中获得一个新整数时，我们将它与中位数进行比较。如果它大于中位数，我们将它添加到正确的树中。如果两棵树的大小相差超过 1，我们删除右树的最小元素，使其成为新的中值，并将旧的中值放入左树。同样适用于较小的。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-05-21T20:50:04.123

高效是一个取决于上下文的词。此问题的解决方案取决于相对于插入量执行的查询量。假设您在对中位数感兴趣的最后插入 N 个数字和 K 次。基于堆的算法的复杂度为 O(N log N + K)。

考虑以下替代方案。插入数组中的数字，并为每个查询运行线性选择算法（例如，使用快速排序枢轴）。现在你有了一个运行时间为 O(KN) 的算法。

现在，如果 K 足够小（不经常查询），则后一种算法实际上更有效，反之亦然。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-23T23:58:28.007

这是我的简单但有效的算法（在 C++ 中），用于从整数流中计算运行中位数：

```
#include<algorithm>
#include<fstream>
#include<vector>
#include<list>

using namespace std;

void runningMedian(std::ifstream& ifs, std::ofstream& ofs, const unsigned bufSize) {
    if (bufSize < 1)
        throw exception("Wrong buffer size.");
    bool evenSize = bufSize % 2 == 0 ? true : false;
    list<int> q;
    vector<int> nums;
    int n;
    unsigned count = 0;
    while (ifs.good()) {
        ifs >> n;
        q.push_back(n);
        auto ub = std::upper_bound(nums.begin(), nums.end(), n);
        nums.insert(ub, n);
        count++;
        if (nums.size() >= bufSize) {
            auto it = std::find(nums.begin(), nums.end(), q.front());
            nums.erase(it);
            q.pop_front();
            if (evenSize)
                ofs << count << ": " << (static_cast<double>(nums[nums.size() / 2 - 1] +
                static_cast<double>(nums[nums.size() / 2]))) / 2.0 << '\n';
            else
                ofs << count << ": " << static_cast<double>(nums[nums.size() / 2]);
        }
    }
} 
```

指定数字序列的`bufferSize`大小，必须在其上计算运行中位数。从输入流中读取数字时`ifs`，大小的向量`bufferSize`按排序顺序维护。中位数的计算方法是取排序向量的中间，如果`bufferSize`是奇数，或者两个中间元素的和除以 2，如果`bufferSize`是偶数。另外，我维护了一个`bufferSize`从输入中读取的最后一个元素的列表。添加新元素时，我将其放在已排序向量中的正确位置，并从向量中删除添加的元素`bufferSize`步骤之前（保留在列表前面的元素的值）。同时我从列表中删除旧元素：每个新元素都放在列表的后面，每个旧元素都从前面删除。到达 之后，列表和向量都停止增长，并且每次插入新元素都会通过删除之前放置在列表步骤`bufferSize`中的旧元素来补偿。`bufferSize`请注意，我不关心我是否从向量中删除了元素、`bufferSize`之前放置的步骤，或者只是一个具有相同值的元素。对于中位数的值，这无关紧要。所有计算的中值都在输出流中输出。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-05-21T21:12:22.647

你不能只用一个堆做这个吗？**更新：**没有。见评论。

不变：读取`2*n`输入后，最小堆拥有其中`n`最大的。

循环：读取 2 个输入。将它们都添加到堆中，并删除堆的最小值。这重新建立了不变量。

所以当`2n`输入被读取时，堆的最小值是第 n 大的。需要一些额外的复杂性来平均中间位置周围的两个元素并在奇数个输入后处理查询。

# wordpress - 如何在 wordpress 上为永久链接使用多个自定义结构

> ID：10657509
> 
> 赞同：1
> 
> 时间：2012-05-18T17:56:44.460
> 
> 标签：wordpress, permalinks

我们知道，我们可以从设置中为 wordpress 设置一个永久链接结构。但是，此设置是全局的。这意味着，只能保存单个结构。现在，我希望，对于某些不同类型的帖子（基于类别），url 结构会有所不同。

例如，我当前的永久链接结构设置为“帖子名称”，例如“http://localhost/wordpress/sample-post/”

现在对于一个特定的类别（比如“mytest”），它应该遵循结构“http://localhost/wordpress/mytest/sample-post/”

为此，我发现只有一个名为“advance permalink”(http://wordpress.org/extend/plugins/advanced-permalinks/) 的插件。但它有一些问题。最初根本不起作用（使用最新版本的 wordpress）。即使我修复它并开始工作（我已经这样做了），仍然会出现一些其他问题，例如主页的分页功能丢失。所以，我需要一些替代解决方案。

任何人都可以建议一些其他可以帮助实现我的目标的插件，或者通过一些自定义编码来实现它的一些提示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T02:19:26.650

您可以通过摆弄 HTACCESS 文件来实现这一点，但我不推荐它。你试过这个插件吗？？

[http://wordpress.org/extend/plugins/custom-permalinks/](http://wordpress.org/extend/plugins/custom-permalinks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:58:05.167

不幸的是，我不知道是否有特定的插件可以满足您的需求，但一般来说，您需要使用 WordPress 的 Rewrite API。

# android - 缩放时Android MapView不会重新加载

> ID：10657511
> 
> 赞同：2
> 
> 时间：2012-05-18T17:56:45.567
> 
> 标签：android, zooming, android-mapview

我正在使用我自己的 MapView，它从 Fragment 中的 MapView 派生。当我使用缩小手势进行缩小时，它会在一小块缩小的地图周围显示空白。然后，当我从触摸屏上松开手指时，它会重新加载地图。我尝试`invalidate()`了 onTouchEvent() 但没有任何反应。你知道如何解决这个问题吗？

# git - Git总是拉出我无法编辑的文件

> ID：10657513
> 
> 赞同：0
> 
> 时间：2012-05-18T17:57:00.300
> 
> 标签：git

当我使用终端在 OSX 上下载文件时，默认情况下我没有编辑权限。
我该如何改变呢？

* * *

```
kirkstrobeck:atheycreek kirkstrobeck$ ls -lad ~ . .git
drwxrwxrwx   8 kirkstrobeck  staff   272 May 24 18:20 .
drwxrwxrwx  16 kirkstrobeck  staff   544 May 25 10:58 .git
drwxr-xr-x+ 92 kirkstrobeck  staff  3128 May 24 15:17 /Users/kirkstrobeck 
```

* * *

```
kirkstrobeck:~ kirkstrobeck$ umask
0022 
```

* * *

```
kirkstrobeck:atheycreek kirkstrobeck$ ls -l
total 8
-rwxrwxrwx  1 kirkstrobeck  staff  2143 Mar  6 14:49 README.md
drwxrwxrwx  4 kirkstrobeck  staff   136 May 23 14:45 www
kirkstrobeck:atheycreek kirkstrobeck$ 
```

* * *

注意：我在使用 CHMOD 修复问题后运行了这些终端命令，但我每次都这样做，因为它会拉下错误的权限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:04:46.997

当您说您没有编辑权限时-您到底是什么意思？

> 注意：我在使用 CHMOD 修复问题后运行了这些终端命令

这意味着输出没有帮助。所有这些权限显示：

```
kirkstrobeck:atheycreek kirkstrobeck$ ls -lad ~ . .git
drwxrwxrwx   8 kirkstrobeck  staff   272 May 24 18:20 .
drwxrwxrwx  16 kirkstrobeck  staff   544 May 25 10:58 .git
drwxr-xr-x+ 92 kirkstrobeck  staff  3128 May 24 15:17 /Users/kirkstrobeck 
```

是您*确实*对列出的所有内容都具有编辑权限-如果您以前`chmod -R 777 .`在该文件夹上运行过，这是可以预料的。

更相关的权限是您尝试编辑的内容的文件和文件夹的权限。通过一个特定的命令示例，它生成的错误和相关文件的权限 - 将得到一个具体的答案，如果没有这个，一些有根据的猜测工作：

## 写 perms 不是 git 问题

Git 根本不存储文件夹，只存储文件的可执行权限。您可以通过以下方式向自己展示这一点：

```
[andy@work:/tmp/so/original]$ git init
[andy@work:/tmp/so/original]$ touch 0700
[andy@work:/tmp/so/original]$ touch 0600
[andy@work:/tmp/so/original]$ touch 0500
[andy@work:/tmp/so/original]$ touch 0400
[andy@work:/tmp/so/original]$ chmod 0700 0700
[andy@work:/tmp/so/original]$ chmod 0600 0600
[andy@work:/tmp/so/original]$ chmod 0500 0500
[andy@work:/tmp/so/original]$ chmod 0400 0400
[andy@work:/tmp/so/original]$ git add *
[andy@work:/tmp/so/original]$ git commit -va
[master (root-commit) a304e1b] adding files with the named permissions
0 files changed
create mode 100644 0400
create mode 100755 0500
create mode 100644 0600
create mode 100755 0700
[andy@work:/tmp/so/original(master)]$ ls -la 
total 12
drwxr-xr-x 3 andy users 4096 May 28 14:51 .
drwxr-xr-x 3 andy users 4096 May 28 14:48 ..
-r-------- 1 andy users    0 May 28 14:48 0400
-r-x------ 1 andy users    0 May 28 14:48 0500
-rw------- 1 andy users    0 May 28 14:48 0600
-rwx------ 1 andy users    0 May 28 14:48 0700
drwxr-xr-x 8 andy users 4096 May 28 14:51 .git 
```

上面显示（带有`ls -la`）文件权限，表示为数字（文件名）和读、写、可执行权限（在左侧）。只有 0500 和 0700 这两个文件有可执行权限。

```
[andy@work:/tmp/so/checkout]$ git init
Initialized empty Git repository in /tmp/so/checkout/.git/
[andy@work:/tmp/so/checkout]$ git pull ../original/
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From ../original
* branch            HEAD       -> FETCH_HEAD
[andy@work:/tmp/so/checkout(master)]$ ls -la 
total 12
drwxr-xr-x 3 andy users 4096 May 28 14:52 .
drwxr-xr-x 4 andy users 4096 May 28 14:52 ..
-rw-r--r-- 1 andy users    0 May 28 14:52 0400
-rwxr-xr-x 1 andy users    0 May 28 14:52 0500
-rw-r--r-- 1 andy users    0 May 28 14:52 0600
-rwxr-xr-x 1 andy users    0 May 28 14:52 0700
drwxr-xr-x 8 andy users 4096 May 28 14:52 .git
[andy@work:/tmp/so/checkout(master)]$ 
```

上面表明检出具有默认文件权限（由 指示的那些`umask`），如果提交为可执行文件，则添加可执行文件。

了解以上内容应该可以帮助您专注于真正的问题所在。

## 修复文件权限

如果您的结帐有错误的权限，您可以使用如下命令修复它们：

```
# make sure all files are owned by you
sudo chmod -R andy:users .
# reset to default permissions
sudo find . -type d -exec chmod 0755 {} \; -or -type f -exec chmod 0644 {} \; 
```

仔细检查您收到的任何错误消息中提到的文件；该文件的权限现在是 0644，它所在的文件夹是 0755。

更正文件权限后，您应该一切顺利。

请注意，您需要对***文件夹*****具有可执行权限***才能查找和操作内容。如果您在文件夹上没有可执行权限，则在其中执行几乎任何操作都会出现权限错误。*但是*，同样，git 根本不存储文件夹，如果这是问题所在，它与 git 无关。*

 *如果这对您的存储库进行了任何更改，您可以提交它们：

```
git commit -am "Resetting file permissions to their default values" 
```

这只会提交对文件的可执行属性的更改，并且只是一个清理步骤 - 不会修复任何会导致其他人查看 repo 的权限问题。

## 忽略文件权限

如果您希望您的结帐完全忽略您应用于结帐的权限，您可以使用：

```
git config core.fileMode false 
```

这样，git 不会将您应用于结帐的文件权限更改视为提交更改 - 但鉴于可用信息，这不太可能相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T21:18:03.627

`git`根据您的`umask`设置工作。git 操作的唯一工作目录权限是执行位。如果你不会写，你必须让你的`umask`设置非常严格，例如，为你自己、为团队和其他`0277`人删除。`w``rwx`

尝试运行`umask`以查看您当前的设置，并`umask 022`设置一个典型设置（`022`= 带走`w`组和其他）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:47:07.133

尝试检查*core.sharedRepository*这可以设置所以 umask 不是权限的默认值：

来自 git-config(1)：

> 当 group （或 true）时，存储库可在组中的多个用户之间共享（确保所有文件和对象都是组可写的）。当所有人（或世界或所有人）时，所有用户都可以读取存储库，此外还可以组共享。当 umask（或 false）时，git 将使用 umask(2) 报告的权限。当 0xxx（其中 0xxx 是八进制数）时，存储库中的文件将具有此模式值。0xxx 将覆盖用户的 umask 值（而其他选项只会覆盖用户的 umask 值的请求部分）。示例：0660 将使所有者和组可以读/写 repo，但其他人无法访问（相当于组，除非 umask 是例如 0022）。0640 是组可读但不可组写的存储库。请参阅 git-init(1)。默认为假。

所以

> git config core.sharedRepository all

会反过来让每个人都可以访问。*

# .net-4.0 - 通过 RegFree Com-visible 包装器初始化 Net .dll 仅从一个特定目录失败

> ID：10657516
> 
> 赞同：1
> 
> 时间：2012-05-18T17:57:16.477
> 
> 标签：.net-4.0, vb6, com-interop, side-by-side, regfreecom

我遇到了一件非常好奇的事情：我们目前有一个混合 VB6/Net 应用程序。VB6 代码通过 Com-Visible Net Wrappers 调用 Net 代码，后者通过 RegFree Com（清单）激活。这很好用，我们的客户可以拥有使用不同版本的网络代码的不同版本的应用程序，并且永远不会发生冲突。

今天令我困惑的是，我们的应用程序的新测试版本未能从 C:\Program Files\OurApp 目录初始化 Net dll。这是之前无数测试版本所在的目录。如果我将相同的应用程序安装到 C:\Program Files\OurApp2 应用程序可以完美运行。

我尝试卸载，我尝试删除整个 C:\Program Files\OurApp 文件夹，但每当我将应用程序重新安装到这个特定文件夹时，网络代码都不会运行。因此，显然在其他地方存储了与 C:\Program Files\OurApp 文件夹有关的 RegFree Com 的一些信息。

我在系统还原后解决了这个问题。

发生了什么？如何防止我们的客户遇到这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-17T07:39:02.870

> 因此，显然在其他地方存储了与 C:\Program Files\OurApp 文件夹有关的 RegFree Com 的一些信息。

根据我以前的经验，您的诊断应该会引导您找到包含您的图书馆注册的注册表信息。尝试运行 regedit.exe，使用 Ctrl + F 查找您的类，并修改/删除不正确的值。

# variables - 是否可以修改 let 绑定？

> ID：10657517
> 
> 赞同：3
> 
> 时间：2012-05-18T17:57:20.703
> 
> 标签：variables, clojure, let

我想了解如何更改在 Clojure 函数的 let 绑定中声明的变量的值。下面是我正在使用的代码。我希望该函数返回 java.lang.String 对象，该对象包含字符串中包含的文本。

```
(defn read-text-from-file
  {:doc "fn read-text-from-file is used to output in \"string\"
format the text in a file."}
  [#^String file-name]
  (let [buff-reader (open-file-reader file-name)]
  (loop [full-text "" line (.readLine buff-reader)]
    (when line
      (-> full-text (.concat line))
;      (println full-text)
      (recur (-> file-name (.concat line)) (.readLine buff-reader)))))) 
```

**注意**：函数'open-file-reader'如下：

```
(defn open-file-reader
  {:doc "This is used to open a file, ready for reading"}
  [file-name]
  (let [file-object (java.io.File. file-name)
        buff-reader (-> file-object (java.io.FileReader.)
                        (java.io.BufferedReader.))]
    buff-reader)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T18:06:20.087

中的绑定`let`是不可变的，不能被反弹。即使您可以重新绑定它们，您的问题也存在于代码的其他地方。您需要做的是使用`if`特殊形式而不是`when`宏。使用 an`if`你可以返回`full-text`什么时候[`line`是 null](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)，`recur`什么时候不是。

* * *

不过，我建议您查看该[`slurp`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/slurp)功能，它可以为您完成所有这些工作。

```
user=> (doc slurp)
-------------------------
clojure.core/slurp
([f & opts])
  Opens a reader on f and reads all its contents, returning a string.
  See clojure.java.io/reader for a complete list of supported arguments.
nil 
```

* * *

如果你还想自己实现这个功能，我建议你至少做`full-text`一个StringBuilder。`(str full-text)`然后，当您最终返回它时，您可以通过说 , 将其转换为字符串。但是，Maurice Reeves 在[他的回答](https://stackoverflow.com/a/10658645/160811)中提供了一个更惯用的 Clojure 解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T18:07:41.620

let 绑定，就像函数参数一样，是不可变的，所以你不能改变它们的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T19:28:27.690

你不能改变 let 的绑定。只是不可能。你想要完成的事情可以通过其他人提到的 slurp 来完成，但是如果你想走你要去的路线，可以使用 line-seq 的组合返回缓冲读取的内容和应用如下所示：

```
(defn fetch-file-text [file-name]
     (with-open [rdr (clojure.java.io/reader file-name)]
          (apply str (line-seq rdr)))) 
```

您可以在此处阅读有关 line-seq 的更多信息：http: [//clojuredocs.org/clojure_core/clojure.core/line-seq](http://clojuredocs.org/clojure_core/clojure.core/line-seq)

更多关于在这里申请：http: [//clojuredocs.org/clojure_core/clojure.core/apply](http://clojuredocs.org/clojure_core/clojure.core/apply)

# java - webview.db 在 android 4 中为空

> ID：10657519
> 
> 赞同：0
> 
> 时间：2012-05-18T17:57:32.973
> 
> 标签：java, android, string, android-webview, android-4.0-ice-cream-sandwich

我正在创建一个基于 Web 缓存的应用程序，例如离线 Web 视图。在 android 2.3 中，我可以在 webviewCache.db CACHE TABLE 中找到。

但在 android 4 中，我找不到 webviewCache.db 或 CACHE TABLE。并且 webview.db 也是空的（另一个 db）。我无法理解发生了什么，谷歌搜索但找不到更好的答案。

如果有人知道如何在 android 4 中找到 webviewCache.db 或 CACHE TABLE，那就太好了。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:09:33.657

诸如此类的文件`webviewCache.db`是内部 API 的一部分，开发人员不应公开引用。设备制造商（即三星、HTC 等）通常会在他们认为合适的情况下更改内部 API 的某些部分，因此，您以前使用的任何“黑客”都不能保证有效。为确保您的应用程序可以在所有设备上运行，您应该只使用公共 SDK，并且不应该在内部引用任何内容。

# java - 取消 showInputDialog 时出错

> ID：10657527
> 
> 赞同：5
> 
> 时间：2012-05-18T17:58:02.623
> 
> 标签：java, swing, input, joptionpane

我想在创建新记录时创建一个输入对话框并将用户输入保存`input`到文件中。

这是代码：

```
String input = JOptionPane.showInputDialog(null, "Enter name :  ", "New Record!", 1);                //This to let user input name
    try
    {
        JOptionPane.showMessageDialog(null, "Thanks for playing.", "Thanks", 1);            //Show this dialog after user input
        HighestScoreFile.HighestScoreFile(input, hours, minutes, seconds, click);                 //Store the data into a file, the `method` is in another class.
    }
    catch(IOException ex){} 
```

当没有用户输入或任何输入时，`OK`按钮工作正常，但如果我单击`cancel`按钮，它会返回以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at HighestScoreFile.HighestScoreFile(HighestScoreFile.java:22)
    at MemoryGame$ButtonListener.actionPerformed(MemoryGame.java:329)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T18:09:02.097

```
String input = ....
if (input!=null) { ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T18:11:38.883

如果用户点击“取消”，`input`将为空。

`try`仅当用户单击“确定”时才应输入该块，或者您应在尝试使用之前添加一个`if`以检查是否为空！`input`

现在，您实际上可以禁用取消按钮

```
JOptionPane.showInputDialog(null, "Enter name :  ", "New Record!", JOptionPane.OK_OPTION); 
```

或检查用户是否点击了取消

```
if (input == null){
    // Do something
} else {
    try {
    JOptionPane.showMessageDialog(null, "Thanks for playing.", "Thanks", 1);
    HighestScoreFile.HighestScoreFile(input, hours, minutes, seconds, click);
    } catch(IOException ex){}
} 
```

# c# - c++/cli 调用本地 c++ 方法

> ID：10657528
> 
> 赞同：1
> 
> 时间：2012-05-18T17:58:05.813
> 
> 标签：c#, visual-c++, c++-cli

我编写了一个 c++/cli 程序，它调用我的本机 c++ 函数，该函数将结构指针作为参数。所以就像我使用 c++/cli 为我的本机 c++ 编写了一个包装器，这样我就可以将它暴露给 c# wcf 程序（它充当另一个 c++ 客户端的服务器）。

现在，当我编译我的 c++/cli 程序时，我没有收到任何错误，它被编译并生成了这个 c++/cli 的 dll，但是当查看输出窗口时，我看到类似这样的东西在链接中失败（它没有'不影响编译）。以下是我在输出文件中看到的消息。

```
1>Linking...
1>Embedding manifest...
1>Caching metadata information for c:\windows\system32\msxml6.dll...
1>Could not cache metadata for c:\windows\system32\msxml6.dll: reflection failed. 
```

所以我想知道这条消息是什么意思，如果我在 c#wcf 程序中使用这个 c++/cli dll，这是否会影响我的 c#wcf 程序，以及如何摆脱这条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:22:18.323

我很确定 MSXML6.DLL 是本机 DLL，因此它没有任何托管元数据。

我用 .NET Reflector 验证了这一点：

```
// Assembly msxml6

  Location: C:\Windows\System32\msxml6.dll
  Name: msxml6, 'C:\Windows\System32\msxml6.dll' is not a .NET module. 
```

确保在 Linker -> Input -> "Additional Dependencies" 项目选项中列出了它的导入库，而不是像 .NET 程序集一样尝试引用它。

# jquery - 在 ajax 发布之后，附加的 div 不在 IE 8 中显示

> ID：10657530
> 
> 赞同：1
> 
> 时间：2012-05-18T17:58:07.147
> 
> 标签：jquery, css, ajax, internet-explorer, dom

我将数据发布到我的网络服务器并返回成功或失败状态。我想在 ajax 发布后向用户显示确认或错误消息。它在 Chrome 和 IE 9 中按预期工作，但 IE 8 不会显示新附加`div`的我的确认消息。

使用 IE 8 的 DOM 检查器，我发现 div 元素实际上被附加到 DOM，但只是没有显示。在我附加元素后，也许 IE 没有获得某种屏幕刷新事件？我在我的代码中的其他地方的 ajax 回调函数中附加 DOM 元素，使用`$.getJSON()`- 似乎 IE 正在查看 POST 方法并决定不让我更新 DOM。

我的 ajax 代码如下所示：

```
$.post("adminpage.ashx?action=newAccount", newData, function (response) {
      getAccount(newData.accountNum);   // display the new account
      if (response == "success") {
          createAlert("Account was successfully updated.", "success").appendTo(".container");
      } else if (response == "error") {
          createAlert("There was an error updating the account.", "error").appendTo(".container");
      }
}); 
```

`createAlert()`返回带有我的确认或错误消息的 div。

提前致谢。

编辑：这是我的 createAlert 函数的代码：

```
function createAlert(message, type) {
    var alert = $("<div>");
    alert.addClass("alert alert-block");
    if (typeof type != "undefined") {
        alert.addClass("alert-" + type);
    }

    var dismissButton = $("<button>");
    dismissButton.addClass("close").attr("data-dismiss", "alert").text("x");
    dismissButton.appendTo(alert);

    var alertText = $("<p>");
    alertText.text(message);

    alert.append(message);

    return alert;
} 
```

以及 IE 8 的调试器显示的 HTML：

```
<DIV class="alert alert-block alert-success">
    <BUTTON class=close type=submit data-dismiss="alert">x</BUTTON>Account was successfully updated.
</DIV> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T15:37:12.450

我遇到了类似的问题，但我终于通过使用变体函数而不是编写来让它工作

```
 someObj.appendTo('.blabla'); 
```

我写

```
 $('.blabla').append(someObj); 
```

如果你想尝试

```
$.post("adminpage.ashx?action=newAccount", newData, function (response) {
  getAccount(newData.accountNum);   // display the new account
  if (response == "success") {
      $(".container").append(createAlert("Account was successfully updated.", "success"));
  } else if (response == "error") {
      $(".container").append(createAlert("There was an error updating the account.", "error"));
  }
}); 
```

# javascript - JavaScript 中的 XML/XSLT

> ID：10657532
> 
> 赞同：3
> 
> 时间：2012-05-18T17:58:13.960
> 
> 标签：javascript, xml, internet-explorer, xslt

我一直在研究在 JavaScript 中使用 XML 和 XSLT 的示例，但我不明白 IE 中不同选项之间的区别：

*   Msxml2.DOMDocument.6.0
*   Msxml2.DOMDocument.3.0
*   微软.XMLHTTP
*   Microsoft.XMLDom

因此，在使用该方法时：

```
var xml = new ActiveXObject("Xxxxxxx"); 
```

xxxxxx 是上述变体之一。

我应该使用哪个？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T10:04:01.660

Microsoft 的基于 COM 的 XML 软件包称为 MSXML，并以不同的版本存在，可以在 Windows 系统上共存。`ActiveXObject`所有当前支持的 Microsoft OS 版本和最新支持的 Microsoft OS 服务包都带有 MSXML 3 和 MSXML 6。您在 JScript 中传递的程序 ID记录在此处用于 MSXML 3：http: [//msdn.microsoft.com/en- us/library/ms766426%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ms766426%28v=vs.85%29)和这里的 MSXML 6：http: [//msdn.microsoft.com/en-us/library/ms764622%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ms764622%28v=vs.85%29)。如您所见，程序 id 以 'MSXML2' 开头并且 MSXML 版本附加在末尾，因此令人困惑的是，MSXML 3.0 DOM 文档具有程序 id `MSXML2.DOMDocument.3.0`，而 MSXML 6.0 DOM 文档具有程序 id `Msxml2.DOMDocument.6.0`。

以 开头`Microsoft.`的程序 id 是旧版 MSXML 引入的遗留程序 id，现在你不应该需要它们，因为 MSXML 3 和 MSXML 6 是操作系统的一部分或任何受支持的操作系统上的最新服务。

至于选择 MSXML 3 或 6 的哪个版本，这部分取决于您想要做什么；MSXML 3 和 MSXML 6 之间的主要区别在于，MSXML 6 具有支持针对架构或架构集进行验证的解析器，而 MSXML 3 仅支持基于 DTD 的验证。默认情况下，MSXML 6 还具有一些您需要注意的更严格的安全相关设置，请参阅[http://msdn.microsoft.com/en-us/library/ms754611%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ms754611%28v=vs.85%29)。

正如您的帖子还提到 XSLT，MSXML 3 和 6 都支持 XSLT 和 XPath 1.0，因此就标准合规性而言，您可以选择其中任何一个，就性能而言，您可能会发现 MSXML 6 的性能更好。

# c# - 如何在 Windows 窗体中的 WPF 中添加 Mediaelement

> ID：10657533
> 
> 赞同：1
> 
> 时间：2012-05-18T17:58:20.250
> 
> 标签：c#, wpf, winforms, user-controls, mediaelement

我找不到在 C# 中的 Winform 中嵌入媒体元素的好方法。我在 Winform 中有一个 PictureBox 或 Panel，应该在 wpf 中加载一个 UserControl。这可能吗？如果是，请给我一个小伪代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:22:53.023

您需要 WinForms 中的[ElementHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)控件来托管 WPF 控件

从该页面：

```
private void Form1_Load(object sender, EventArgs e)
{
    // Create the ElementHost control for hosting the
    // WPF UserControl.
    ElementHost host = new ElementHost();
    host.Dock = DockStyle.Fill;

    // Create the WPF UserControl.
    HostingWpfUserControlInWf.UserControl1 uc =
        new HostingWpfUserControlInWf.UserControl1();

    // Assign the WPF UserControl to the ElementHost control's
    // Child property.
    host.Child = uc;

    // Add the ElementHost control to the form's
    // collection of child controls.
    this.Controls.Add(host);
} 
```

# java - 更改 SOAP 服务 (JAX-WS/METRO) 中的 bean 表示

> ID：10657535
> 
> 赞同：0
> 
> 时间：2012-05-18T17:58:25.517
> 
> 标签：java, web-services, soap, jax-ws, java-metro-framework

我有这个类颜色：

```
public class Color {

private String name;
private List<String> usedInShapes;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public List<String> getUsedInShapes() {
    if (usedInShapes== null) {
        return null;
    }
    return new ArrayList<String>(usedInShapes);
}
} 
```

并返回此 bean 并在具有 Color 对象列表的包装器上返回

```
public class ColorListResponse {

    private final List<Color > colorList;

    @XmlElement(required=true)
    public List<Color> getColorList() {
        return colorList;
    }
} 
```

当调用该方法时，用户会收到类似的响应

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:getColorsResponse xmlns:ns2="http://example.com/ws">
         <return>
            <colorList>
               <name>YELLOW</name>
            </colorList>
            <colorList>
               <name>BLUE</name>
            </colorList>
            <colorList>
               <name>RED</name>
            </colorList>
            <colorList>
               <name>BROWN</name>
            </colorList>
         </return>
      </ns2:getColorsResponse>
   </S:Body>
</S:Envelope> 
```

我需要的是这样的：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:getColorsResponse xmlns:ns2="http://example.com/ws">
         <return>
            <colorList>YELLOW</colorList>
            <colorList>BLUE</colorList>
            <colorList>RED</colorList>
            <colorList>BROWN</colorList>
         </return>
      </ns2:getColorsResponse>
   </S:Body>
</S:Envelope> 
```

我一直在尝试弄乱注释，但没有成功......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:03:50.150

你不能让工具写出那种响应。要完成它，您必须编写自己的实现来编组/解组 XML。默认情况下，该工具使用类类型和其中的属性生成 XML。

```
public class Color {
     private String name;
} 
```

此外，您的方法返回`List<Vendor>`not `List<Color>`。

# .net - 如何安装.NET 4.5？

> ID：10657537
> 
> 赞同：5
> 
> 时间：2012-05-18T17:58:38.300
> 
> 标签：.net, .net-4.5

我在 Windows 7 上下载并安装了 .NET 4.5 beta，但不确定它的安装位置。

1.  检查 C:\Windows\Microsoft.NET\Framework，找不到 4.5 的文件夹
2.  打开 VS 2010 并打开解决方案中项目之一的属性，Target Framework 列表中没有 4.5，只有 .Net Framework 4。

如何确保安装正常以及如何使用它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T18:00:41.933

.NET 4.5 是.NET 4.0[的就地](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx) [替代品](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)- 这意味着程序集位于 v4.0.xxx 文件夹中。

您还可以在参考程序集文件夹中找到程序集：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework. 
```

# c# - 将默认主题应用于图表系列

> ID：10657538
> 
> 赞同：2
> 
> 时间：2012-05-18T17:58:41.493
> 
> 标签：c#, xml, data-visualization, mschart

由于缺乏有关 XML 主题部分的信息，使用 MSchart 控件有些困难。

我正在以编程方式和动态创建图表，然后使用 XML 主题文件向其中添加主题。

我不知道会有多少系列，但我正在尝试为 StackedColumnBar 中每一列的总量添加一个系列。

因此，我在 foreach 循环中根据数据创建每个系列，然后将 Total 系列添加为气泡图类型。

现在我必须对 Total 系列应用不同的系列主题，并让所有其他系列具有相同的主题。

我尝试在图表和主题文件中将系列命名为“Total”。真正的问题是*Template* ="All" 属性，因为它没有在任何地方记录，所以我不知道它是如何真正工作的以及它是如何应用的。

主题示例：

```
<Chart BackColor="White"
      BorderWidth="2"
      Palette = "None"
      PaletteCustomColors="#F29E39; #007463; #E76E34; #A4A4A4; #94BBA3;"
      BorderlineDashStyle="Solid"
      AntiAliasing="All">
  <Series>
    <Series Name="Total"
        BorderWidth="0"
        LabelForeColor="#FF000000"
        LabelFormat="C"
        IsVisibleInLegend="false"
        IsValueShownAsLabel="true" >
    </Series>
    <Series _Template_="All"
            BorderWidth="0"
            LabelForeColor="#AAFFFFFF"
            LabelFormat="C"
            CustomProperties="PointWidth=0.9, DrawingStyle=LightToDark"
            IsValueShownAsLabel="false" >
    </Series>
  </Series>
  <ChartAreas>
    <ChartArea Name="Default"
              _Template_="All"
              BorderWidth="0">
      <AxisY IsInterlaced="true"
             InterlacedColor="#E8E7DC">
        <MajorGrid Enabled="false" />
      </AxisY>
      <AxisX>
        <MajorGrid Enabled="false" />
      </AxisX>
    </ChartArea>
  </ChartAreas>
  <Legends>
    <Legend _Template_="All"
            Alignment="Center"
            LegendItemOrder="ReversedSeriesOrder"
            Docking="Bottom"/>
  </Legends>
</Chart> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:45:42.683

因为我们想为现有图表区域添加系列，所以最好在后面的代码中使用 databindXY，例如：

```
var query = ... select new
{
sumXValue = ..,
sumYValue = ..
} //chart datasource

chart1.datasource = query;

Series series = new Series(); series.Name = "Total";
series.ChartType = SeriesChartType.StackedColumn;
series.Points.DataBindXY(query, sumXvalue, query.sumYValue);
chart1.Series.Add(series); 
```

这会将新系列添加到图表区域中的现有系列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T18:22:31.397

我知道这是一篇较旧的帖子，但我最近在尝试解决同样的问题时遇到了。如果您使用的是 XML 模板，您可以为数据中的每个系列添加一个元素，即使您是在运行时添加数据，只要确保系列的顺序与数据的添加方式相匹配，并且无需任何操作即可问题。我已经测试过用这种方法做组合图表，效果很好。

```
<Series>
    <Series Name="FirstSeriesName" Borderwidth="0"></Series>
    <Series Name="SecondSeriesName" Borderwidth="0"></Series>
    <Series Name="ThirdSeriesName" Borderwidth="3"></Series>
</Series> 
```

我还没有想出如何将它与*Theme*选项结合使用，但不幸的是，到目前为止，您似乎必须单独设置每个系列的样式才能使用 XML 主题（或在运行时更改单个系列的选项）。

# c# - C# 访问派生类中的受保护成员

> ID：10657545
> 
> 赞同：11
> 
> 时间：2012-05-18T17:59:40.560
> 
> 标签：c#, visual-studio-2010, encapsulation, protected, derived-class

*我写了以下代码：*

```
public class A                             
{
    protected string Howdy = "Howdy!";     
}

public class B : A                           
{
    public void CallHowdy()
    {
        A a = new A();
        Console.WriteLine(a.Howdy);
    }
} 
```

现在，`VS2010`它会导致以下编译错误：

> 无法通过“A”类型的限定符访问受保护的成员“Aa”；限定符必须是“B”类型（或派生自它）。

这对我来说似乎很不合逻辑 - 为什么我不能`protected`从派生自类的方法访问类实例的字段？

那么，**为什么会发生这种情况**？

* * *

*找到了一个严格的答案*- [http://blogs.msdn.com/b/ericlippert/archive/2005/11/09/491031.aspx](http://blogs.msdn.com/b/ericlippert/archive/2005/11/09/491031.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T18:02:43.037

您不是从类内部访问它，而是尝试访问该变量，就好像它是`public`. 你不会期望它编译，这几乎就是你想要做的：

```
public class SomethingElse
{
    public void CallHowdy()
    {
        A a = new A();
        Console.WriteLine(a.Howdy);
    }
} 
```

没有关系，听起来您很困惑为什么该字段不公开。

现在，如果您愿意，您可以这样做：

```
public class B : A
{
    public void CallHowdy()
    {
        Console.Writeline(Howdy);
    }
} 
```

因为`B`从`A`这个实例中继承了数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T18:02:26.877

你可以做

```
public class B : A                           
{
    public void CallHowdy()
    {
        Console.WriteLine(Howdy);
    }
} 
```

在您的代码中，您尝试从 A 外部而不是 B 内部访问 Howdy。在这里，您在 B 内部，因此可以访问 A 中的受保护成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T18:03:58.890

仅当通过派生类类型进行访问时，才能在派生类中访问基类的受保护成员。

您收到错误是因为 A 不是从 B 派生的。

[http://msdn.microsoft.com/en-us/library/bcd5672a(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bcd5672a(v=vs.90).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:03:59.337

受保护的成员仅对其自身和派生成员可见。在您的情况下， A 的声明意味着只有公共成员是可访问的，就像您从任何其他类实例化 A 一样。但是，您可以简单地写 this.Howdy，因为由于派生链，Howdy 可以从 B 类内部获得。

# c - 复制到 void* 指针

> ID：10657546
> 
> 赞同：2
> 
> 时间：2012-05-18T17:59:41.963
> 
> 标签：c, copy, void-pointers

我有一个函数`getData(void* data)` 应该将一些内部计算值复制到数据中，例如`int r = getRadius();` r 应该复制到数据中，并且从函数 getData 返回的这种方法是什么正确的方法？我试过`*(int*)data = r;` 了，但我不确定这是最好的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T18:15:59.333

如果您确定 void 指针引用的内存是 int，那么您可以确信

```
*(int *)data = r; 
```

然而，更好的通用解决方案是：

```
memcpy(data, &r, sizeof(int)); 
```

这样您就不必担心字节对齐或其他潜在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:21:17.197

使用您展示的 API，我认为没有一个好的方法。dbeer 的解决方案确实有效，但 API 本身存在问题。

如果函数返回一个半径，它是一个整数，输出参数应该是`int *`。
不过我想事情没那么简单。真正的函数更可能类似于`getData(int what, void *data)`，其中的值`what`决定数据的类型。
这样的 API 不好，因为它会阻止编译器（以及您在阅读代码时）正确检查类型。

但如果你想坚持使用这个 API，至少添加一个 size 参数，并在写入`data`.

# symfony1 - addCSRFProtection 在公共函数 configure() 中不起作用

> ID：10657550
> 
> 赞同：0
> 
> 时间：2012-05-18T17:59:58.090
> 
> 标签：symfony1, symfony-1.4

**当我应用此代码时：**

```
class ContactoForm extends BaseContactoForm
{
    public function configure()
    {
        $this->addCSRFProtection(rand(1, 1000));
    }
} 
```

**然后我去 action.php 一个模块：**

```
$this->form = new ContactoForm(); 
```

该字段不会更改_csrf_token：

刷新1：

```
<input type="hidden" id="contacto__csrf_token" value="d6e64fcc34a99c1c90dd95eef945e564" name="contacto[_csrf_token]"> 
```

刷新2：

```
<input type="hidden" id="contacto__csrf_token" value="d6e64fcc34a99c1c90dd95eef945e564" name="contacto[_csrf_token]"> 
```

刷新 N：

```
<input type="hidden" id="contacto__csrf_token" value="d6e64fcc34a99c1c90dd95eef945e564" name="contacto[_csrf_token]"> 
```

**但如果我从行动中应用它：**

```
$this->form = new ContactoForm();
$this->form->addCSRFProtection(rand(1, 1000)); 
```

在这里如果你改变

```
Refresh 1:
<input type="hidden" id="contacto__csrf_token" value="22815f44f18e41947d7568c0771abda4" name="contacto[_csrf_token]">

Refresh 2:
<input type="hidden" id="contacto__csrf_token" value="38bfae0a71a79d16b39ce943658f2700" name="contacto[_csrf_token]">

Refresh 3:
<input type="hidden" id="contacto__csrf_token" value="882c989dc95e40406b28200631cffc3d" name="contacto[_csrf_token]"> 
```

**在 symfony 1.2 中，它起作用了。现在在 symfony 1.4 中不起作用，请帮助我，谢谢。**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T18:07:16.730

我不能说我知道 symfony，但是从您的示例中可以看出，当您创建 ContactoForm 的新实例时，不会调用 configure()。尝试在 ContactoForm 的构造函数中显式调用它。

```
class ContactoForm extends BaseContactoForm {
    public function __construct() {
        parent::__construct();  // if there is a parent constructor
        $this->configure();
    }
    public function configure() {
        $this->addCSRFProtection(rand(1, 1000));
    }
} 
```

# c# - 使用 c# 中的属性初始化类 -

> ID：10657551
> 
> 赞同：0
> 
> 时间：2012-05-18T18:00:00.230
> 
> 标签：c#

我不太了解属性。代码行：method2(x.str1, x.str2, x.str3, x.str4); --- 向我抛出“对象引用未设置为对象错误的实例”。任何想法表示赞赏。x.str1 没有解决？

（我正在添加一些代码并向现有设置添加更多功能。我会使用方法和属性初始化类 myProperty。）

使用其他C#

```
 class Test{

    private myProperty x;

    private string  str1, str2, str3, str4;

    private myProperty A
            {

                get { return x; }          

                set
                {

                    str1 = value.str1;
                    str2 = value.str2;
                    str3 = value.str3;
                    str4 = value.str4;

                }             
            }

    public void myMethod()
        {

               Test tst = new Test();
               myProperty x = new myProperty();
               //Assigning property varaibles:
                  x.str1 = "this";
                  x.str2 = "is";
                  x.str3 = "my";
                  x.str4 = "test";

               try
                {

                    tst.method2(x.str1, x.str2, x.str3, x.str4);
                }
                catch(Exception)
                {
                    throw;
                }
            }

    public void method2(string str1, string str2,string str3, string str4)
     {
     }

    }

    OtherC#.cs  contains the definition for myProerty class

    namespace temp
    {
    public class xyx {some code;}
    public interface abc {some code};
    public class myProperty {

            public string str1 { get; set; }

            public string str2 { get; set; }

            public string str3 { get; set; }

            public string str4 { get; set; }
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:02:28.293

`myProperty x`调用时未设置为对象的实例

```
x.str1 = "this"; 
```

您必须首先初始化它（例如，在您的构造函数代码中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T18:03:18.653

变量只是对对象的引用。它本身并不是一个对象。因此，在您将其设置为引用对象之前，该变量为空。在这种情况下，您可能只是希望它等于一个新对象，因此您需要实例化一个。例如，更改此行：

```
private myProperty x; 
```

对此：

```
private myProperty x = new myProperty(); 
```

我应该澄清这仅适用于引用类型（类），而不是值类型（结构）。

# mysql - 简单的 Rails SQL 错误

> ID：10657552
> 
> 赞同：0
> 
> 时间：2012-05-18T18:00:03.057
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

尝试在我的表单中构建“兴趣”复选框列表时出现以下错误（模型也在下面列出）......有什么想法吗？谢谢！

```
ActiveRecord::StatementInvalid in User_steps#show

Showing /Users/nelsonkeating/Desktop/ReminDeal/app/views/user_steps/show.html.erb where line #19 raised:

SQLite3::SQLException: no such column: person_interests.interest_id: SELECT "interests".* FROM "interests" INNER JOIN "person_interests" ON "interests"."id" = "person_interests"."interest_id" WHERE "person_interests"."person_id" = 11 AND "person_interests"."person_type" = 'User'
Extracted source (around line #19):

16:   <legend>Interests & Holidays</legend>
17:   <h4>Select your top 3 interests..</h4>
18: 
19: <%= f.simple_fields_for :interests do |interest_f| %>
20:   <%= interest_f.input :interest, :as => :check_boxes, :label => false %>
21:    <% end %>
22:   <br></br>

class User < ActiveRecord::Base

  attr_accessible :name, :email, :password, :password_confirmation, :remember_me,     :interests_attributes, :city, :zipcode, :date_of_birth, :gender, :address, :interest_ids, :holiday_ids, :friends_attributes, :person_interest_ids, :friends
  has_many :friends
  has_many :person_interests, :as => :person
  has_many :interests, :through => :person_interests

  accepts_nested_attributes_for :friends,  allow_destroy: true
  accepts_nested_attributes_for :interests, allow_destroy: true

end

class PersonInterest < ActiveRecord::Base
  attr_accessible :person_id, :person_type
  belongs_to :interest
  belongs_to :person, :polymorphic => true
end

class Interest < ActiveRecord::Base
  attr_accessible :name
  has_many :person_interests
  has_many :people, :through => :person_interests
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:18:21.337

基于此错误消息：

> SQLite3::SQLException：没有这样的列：person_interests.interest_id

您的`person_interests`表似乎没有名为 的列`interest_id`。

# python - 如何将 Twitter 搜索结果限制在一个国家/地区

> ID：10657555
> 
> 赞同：3
> 
> 时间：2012-05-18T18:00:14.097
> 
> 标签：python, twitter

我正在使用 Twitter API 来复习我的基本 python。我正在构建一个应用程序，以逐个县扫描来自我的国家（爱尔兰）的推文中的脏话，查看流行的内容并绘制结果图表。

我正在使用 python-twitter 库。为了保留我对 Twitter 的点击量预算，我只想从爱尔兰获得结果。我目前的方法是： 1\. 使用 python-twitter 的 GetSearch() 在所有推文中搜索单词“FU**”。2\. 这给出了一个状态列表： 从每个状态中提取 screen_name，用于获取用户。GetUser() 3\. 用户有有效数据或“位置”字段（用户指定）。4\. 检查该字段中的县名。

我还做了一个测试，它使用嵌入在状态中的坐标，但大多数用户都将其关闭。它工作得很好，当它工作时。

那么，如果不使用这些，我可以将搜索限制在一个国家/地区吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:22:11.293

最直接的方法是在使用搜索 api 时使用 geocode 参数，它应该将您的查询字符串和您提供的坐标“和”在一起。

如果这不能提供足够的结果，您还可以使用 [geo/reverse_geocode](https://dev.twitter.com/docs/api/1/get/geo/reverse_geocode)。您将查询您所在国家/地区的坐标，将返回的地名和数据存储在一个集合中。然后只做一个普通的查询字符串搜索，看看这些推文地点字段中是否有任何一个在你的集合中。

# tridion - Tridion CM 报告“无法从 1 个数据源检索数据”

> ID：10657559
> 
> 赞同：5
> 
> 时间：2012-05-18T18:00:33.963
> 
> 标签：tridion, ugc

在 Tridion Explorer 中打开各种弹出窗口时，消息中心会显示消息：

```
Couldn't retrieve data from 1 datasources 
```

这是什么意思，我该如何预防？

编辑：是的 - 每个人都说 UGC 是对的。事实上，问题不在于引用 Web 服务，而在于它们工作不正常。因此，如果您要设置 UGC，请确保（使用浏览器）检查 OData 服务不仅可用，而且它们正确响应查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T19:05:09.643

根据我的经验，这也与 UGC 有关。但是，它与 Tridion 非常相关。即，当 CME 尝试访问 CD Web 服务以检索组件或页面的 UGC 统计/设置时。如果 CD Web 服务没有响应，那么消息中心会显示这样的错误。

检查你的`%TRIDION_HOME%\web\WebUI\Models\UGC\Configuration\DataSources.xml`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T18:21:35.030

我唯一一次看到这个报道与 UGC 有关。

据报道，它似乎与浏览器/系统有关，而不是 Tridion 错误。

大胆猜测，可能是因为本地系统上未显示自定义错误？如果您尝试从单独系统上的浏览器访问，您会收到相同的错误吗？

# ruby-on-rails - 在哪里可以找到 ruby on rails 应用程序的部署日志文件

> ID：10657560
> 
> 赞同：2
> 
> 时间：2012-05-18T18:00:40.027
> 
> 标签：ruby-on-rails, deployment, capistrano

我在哪里可以找到 ruby​​ on rails 应用程序的日志文件？我正在使用 capistrano 进行部署，但它没有部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:26:05.560

Capistrano 本身不产生任何日志文件——它将它所做的一切输出到屏幕上：

默认情况下，应用程序的日志文件将在应用程序的日志文件夹中。

如果使用乘客，则无法启动的应用程序通常会在 apache/nginx 的错误日志中留下信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:45:51.400

这有点偏题，但您可以在 NewRelic 中记录您的部署，这是我们跟踪它们何时发生的方式：

[https://newrelic.com/docs/ruby/recording-deployments-with-the-ruby-agent](https://newrelic.com/docs/ruby/recording-deployments-with-the-ruby-agent)

# ruby-on-rails - 创建与 FactoryGirl 的关联

> ID：10657562
> 
> 赞同：1
> 
> 时间：2012-05-18T18:00:44.957
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有一个`User has_many :accounts, through: :roles`和一个`User has_many :owned_accounts, through: :ownerships`，我在哪里使用 STI `Ownership < Roles`。我无法为`Ownership`模型和`owned_account`关联编写工作工厂，并且我的测试失败了。

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :accounts, through: :roles
  has_many :ownerships
  has_many :owned_accounts, through: :ownerships
end
class Account < ActiveRecord::Base
  has_many :roles
  has_many :users, through: :roles
end
class Role < ActiveRecord::Base
  belongs_to :users
  belongs_to :accounts
end
class Ownership < Role
end 
```

我有用户、帐户和角色的工作工厂；但是，我无法为 Ownership 和owned_accounts 关联编写工厂：

```
FactoryGirl.define do
  factory :user do
    name "Elmer J. Fudd"
  end
  factory :account do
    name "ACME Corporation"
  end
  factory :owned_account do
    name "ACME Corporation"
  end
  factory :role do
    user
    account
  end
  factory :ownership do
    user
    owned_account
  end
end 
```

我从这些测试开始，但我得到一个未初始化的常量错误并且所有测试都失败了：

```
describe Ownership do
  let(:user)    { FactoryGirl.create(:user) }
  let(:account) { FactoryGirl.create(:owned_account) }
  before do
    @ownership = user.ownerships.build
    @ownership.account_id = account.id
  end
  subject { @ownership }
  it { should respond_to(:user_id) }
  it { should respond_to(:account_id) }
  it { should respond_to(:type) }
end

1) Ownership 
     Failure/Error: let(:account) { FactoryGirl.create(:owned_account) }
     NameError:
       uninitialized constant OwnedAccount
     # ./spec/models/ownership_spec.rb:17:in `block (2 levels) in <top (required)>'
     # ./spec/models/ownership_spec.rb:21:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:29:47.110

错误消息是因为您需要指定父级，否则它将假定工厂定义用于该名称的 ActiveRecord 类。

```
factory :owned_account, :parent => :account do
  name "ACME Corporation"
end 
```

# java - SwingWorker JTextArea 更新

> ID：10657565
> 
> 赞同：-1
> 
> 时间：2012-05-18T18:00:56.533
> 
> 标签：java, swing, textarea, swingworker

```
public int[] doInBackground()
{
    int[] finalNumber = new int[2];
    finalNumber[0] = 0;
    finalNumber[1] = 0;
    int count = 0;
    int[] forDisplay = new int[2];

    outerLoop:
    for(int i = 1; i <= findUpTo; i++)
    {
        forDisplay[0] = i;
        forDisplay[1] = 2;
        publish(forDisplay);

        for(int a = 1; a <= i; a++)
        {
            if(isCancelled())
                break outerLoop; 
            else
            {
                try
                {
                    Thread.sleep(numGen.nextInt(5));
                }
                catch(InterruptedException e)
                {
                    e.printStackTrace();
                }

                forDisplay[0] = a;

                if(i%a == 0)
                {
                    forDisplay[1] = 1;

                    count++;

                    if(count > finalNumber[1])
                    {
                        finalNumber[0] = a;
                        finalNumber[1] = count;
                    }
                }
                else
                {
                    forDisplay[1] = 0;
                }

                publish(forDisplay);
            }
        }
        setProgress(100*(i+1)/findUpTo);

        count = 0;
    }

    return finalNumber;
}

protected void process(List<int[]> publishedValues)
{
    for(int i = 0; i < publishedValues.size(); i++)
    {/*
        if(publishedValues.get(i)[1] == 1)
        {
            numbers.setFont(new Font("Serif", Font.ITALIC, 16));
        }
        else if(publishedValues.get(i)[1] == 2)
        {
            numbers.setFont(new Font("Serif", Font.BOLD, 18));
            numbers.append("\t");
        }*/

        numbers.append(publishedValues.get(i)[0] + "\n");
        //numbers.setFont(new Font("Serif", Font.PLAIN, 16));
    }
} 
```

我不确定为什么这不起作用；如果有人可以提供帮助，我将不胜感激。我试图在 JTextArea 发布时输出 forDisplay[0] 一次。forDisplay[1] 用于确定正在处理的字体（我现在评论了字体更改，尽管它正在进入 ifs in process [there was repeating text indentation]，但它们也没有工作）

问题是该进程似乎连续多次附加相同的数字并跳过其他数字，我不知道为什么。

该程序本身的任务是找到一个具有最多除数的数字，从 1 到“findUpTo”（用户输入）不产生余数。

我对 SwingWorker 比较陌生，所以我在理解这个问题时遇到了一些困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:28:14.640

正如你所说，当它与找到最多除数有关时，我很难理解你的代码。我会更像一个算法问题来处理你的问题。

1.  我们需要知道List对象publishedValues的内容。只需在您的问题中发布它的内容。process 函数中的 for 循环很简单，可以正常工作。但是，我不喜欢您如何在不清除的情况下一直附加到 GUI 对象编号，无论是什么。

2.  我发现 finalNumber 的代码有点混乱，因为对“if(count > finalNumber..)”的几个依赖以及它的影响。我的建议是在得到所有除数后进行比较。使调试更容易。

3.  最后，因为我认为这是一个算法问题，所以在没有所有这些 GUI 和线程的情况下对您的代码进行原型设计。我认为您这样做只是为了学习，但这会使事情复杂化。软件行业非常重视让事情变得简单，并且没有想象中那么复杂。我挑战你保持简单！

# java - 重载Android应用程序？

> ID：10657567
> 
> 赞同：2
> 
> 时间：2012-05-18T18:00:59.387
> 
> 标签：java, android, methods

我的程序被设计成一个滑动益智游戏。我目前正在研究随机播放按钮，该按钮将使用随机数移动瓷砖一定的时间，以便玩家可以解决棋盘。

目前我遇到了一条错误消息：当我按下随机播放按钮时导致“无法执行活动的方法”。当它在while循环之外时，我可以继续按下按钮，但我必须在每次点击之间留出一定的时间。我在想我如何让程序超载……但我不确定如何减少负载……

```
 public void shuffleTiles(View v){ //Shuffles the tiles using random numbers

    int tileToMove;

    while (computerMoves < 5){
        tileToMove = randomNumbers.nextInt(12);
        moveTile(tileToMove, false);
    } 
```

程序的主要症结是围绕这个方法工作的，它交换图像以显示瓷砖已经移动：

```
 private void moveTile(int button, boolean playerMove) { //The main method which causes a tile to be moved

    int tileToReplace = movePossibleTest(button); //Run the test to see if there is a blank square next to it
    if (tileToReplace != 0){

        Drawable originalImage = buttons[button-1].getDrawable(); //Saves a drawable of the original image
        Drawable blankImage = buttons[tileToReplace-1].getDrawable(); //Saves a drawable of the blank tile

        buttons[button-1].setImageDrawable(blankImage); //Swaps the images
        buttons[button-1].setTag("blank");

        buttons[tileToReplace-1].setImageDrawable(originalImage); //Swaps the tags that identify which is the blank tag
        buttons[tileToReplace-1].setTag(null);

        if (playerMove){ //If the move was initiated by a player click
            moveCount(true);
        }
        else moveCount(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:23:58.237

如果您有其他活动使您的应用程序陷入困境，您可以确保使用[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)关闭它们。这帮助我解决了一个特定项目中的一些冻结问题。

# actionscript-3 - DefaultTextFormat 与 SetTextFormat

> ID：10657570
> 
> 赞同：2
> 
> 时间：2012-05-18T18:01:09.293
> 
> 标签：actionscript-3

这里有 2 个代码块。

```
var myTextField:TextField = new TextField();
var myTextFormat:TextFormat = new TextFormat();

addChild(myTextField);

myTextFormat.font = "Arial";
myTextFormat.size = 15;
myTextFormat.color = 0x0000FF;

myTextField.text = "some text";
**myTextField.setTextFormat(myTextFormat);** 
```

VS

```
var myTextField:TextField = new TextField();
var myTextFormat:TextFormat = new TextFormat();

addChild(myTextField);

myTextFormat.font = "Arial";
myTextFormat.size = 15;
myTextFormat.color = 0x0000FF;

**myTextField.defaultTextFormat = myTextFormat;** 
```

那么， setTextFormat() 和 defaultTextFormat 有什么区别呢？为什么用两种不同的方式（一种按属性，另一种按方法）做事。

用更多代码测试：

```
var my_txt:TextField =new TextField();
    my_txt.type = TextFieldType.INPUT
     var my_fmt:TextFormat = new TextFormat();
     my_fmt.color = 0xFF0000;

     my_txt.text = "this is for setTextFormat with range";
     my_txt.setTextFormat(my_fmt,0,3);

    // my_txt.text = "this is for setTextFormat without range";
    // my_txt.setTextFormat(my_fmt);

    // my_txt.defaultTextFormat = my_fmt;
    // my_txt.text = "this is for default text format";

    addChild(my_txt); 
```

五。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:18:48.300

setTextFormat 允许您更改部分文本的格式。查看 setTextFormat 的其他两个参数。当您设置 defaultTextFormat 时，它将应用于您添加到 TextField 的所有文本。

更多信息 ：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#defaultTextFormat](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#defaultTextFormat)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#setTextFormat](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#setTextFormat)

编辑：setTextFormat 也不适用于设置格式后插入的文本。Adobe 说：“任何由用户手动插入或由 replaceSelectedText() 方法替换的文本，都会接收新文本的默认文本字段格式，而不是为文本插入点指定的格式。要为新文本设置默认格式，使用默认文本格式。”

# android - 亚马逊应用商店作者身份

> ID：10657578
> 
> 赞同：0
> 
> 时间：2012-05-18T18:01:41.523
> 
> 标签：android, amazon-appstore

将应用程序上传到亚马逊应用商店。我注意到在作者身份下它只是说开发人员。

亚马逊是否对开发人员获得作者页面有选择性，还是稍后会更新？

* * *

![在此处输入图像描述](../Images/2dcd872fa8a26e32c2f8e7b4cfe7d09b.png)

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:24:05.007

我相信该字段取决于您在创建个人资料期间在“开发人员或公司”字段中所写的内容。我不认为你可以在事后改变它，如果你想改变它，你可能需要创建一个新的配置文件。

# ruby-on-rails - 如何从 Ruby on Rails Web 服务器编译和编码，限制 CPU 和内存使用？

> ID：10657579
> 
> 赞同：2
> 
> 时间：2012-05-18T18:01:45.393
> 
> 标签：ruby-on-rails, ruby, shell

我有一个用户提交的 cpp 代码。我的数据库中也有输入和输出文件。如何在我拥有的输入和输出文件上编译和运行这个 cpp 代码。

另外，如何限制上述代码运行的运行时间和内存消耗。另外，我如何测量有多少内存以及执行上述代码需要多少时间。

编辑我在下面的黑客工作中得到了这个。现在唯一的问题是如何限制正在运行的程序的内存使用量。如果它独立于操作系统，我将不胜感激。但是，如果它对于 Windows 和 Linux 都是不可能的解决方案，我们欢迎您。

需要“超时”

```
 runDir = 'run\\'

    def code_file( sid )
        return "#{sid}.cpp"
    end

    def executable_file( sid )
        return "#{sid}.exe"
    end

    def input_file( sid )
        return "#{sid}.in"
    end

    def output_file( sid )
        return "#{sid}.out"
    end

    def get_complie_command_line( sid , runDir)
        return "g++ -w -O2 #{code_file(sid)} -o #{runDir}#{executable_file(sid)}"
    end

    def get_run_command_line( sid , runDir )
        return "#{runDir}#{executable_file(sid)} < #{sid}.in"
    end

    def run_submission( sid , runDir )
        begin
        timeout(5) {
            run_cmd_line = get_run_command_line( 1 , runDir)
            puts run_cmd_line
            runOutput = %x[#{run_cmd_line}]
            puts runOutput
        }
        puts "Timeout didn't occur"
        rescue Timeout::Error    
            puts "Timed out!"
        end
    end

    def compile( sid , runDir )
        #make the directory 
        %x[mkdir #{runDir}]

        #get compile command line and produce the exe
        cmd_line = get_complie_command_line( 1 , runDir)
        puts cmd_line
        compile_error = %x[#{cmd_line}].to_s.strip

        #run the code
        if compile_error.length != 0 
            puts "Compile Errors"
        else
            run_submission( 1 , runDir )
        end
    end

    compile( 1 , runDir) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:06:25.177

您可以使用您的 ruby​​ 代码创建一些*运行*脚本，如果您使用的是类似 *nix 的操作系统，请说 run.sh。这个脚本的上下文将是这样的：

```
#!/bin/bash
/path/to/timeout /path/to/your/compiled/cpp/program < /your/stdin > /your/stdout 
```

超时程序是这个 perl 脚本[https://github.com/pshved/timeout](https://github.com/pshved/timeout) 如果它违反时间或内存限制，它将杀死您的程序。在 ruby​​ 中，您只需执行 run.sh 脚本 ( `run.sh`) 或类似的东西。对于 Windows，您可以使用相同的方法

# arrays - 如何根据条件将Excel行的内容放入数组中

> ID：10657581
> 
> 赞同：0
> 
> 时间：2012-05-18T18:01:57.187
> 
> 标签：arrays, excel, vba

我有一个 Excel 表，我需要遍历每一行，如果它符合某些条件，则将数据放入几个不同的数组之一中。行数是动态的。我在声明数组长度时遇到了一些问题。我可以简单地遍历行，检查我想要的条件，并保持有多少行适合条件 A、条件 B 或条件 C，并使用它来重新调整数组，但有没有更简单的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:09:53.127

您没有告诉我们您的“声明数组长度的问题”。我的猜测是您正在从一个范围加载数组，这意味着该行是您无法使用 ReDim 更改的第一个维度。

根据我的猜测，我在下面提供了两种方法。如果这些方法都没有帮助，请返回更完整的解释。

**方法一**

将整个范围加载到单个数组中，然后使用第二个数组来记录类型。

```
Dim AllTypes() As Variant
Dim RowCrnt As Long
Dim RowType() As Long

AllTypes = EntireRange.Value
Redim RowType(LBound(AllTypes,1) TO UBound(AllTypes,1))

For RowCrnt = LBound(AllTypes,1) TO UBound(AllTypes,1)
  ' Classify Row
  RowType(RowCrnt) = X
Next 
```

**方法二**

锯齿状阵列可能更符合您的要求。

我将 Sheet1 设置为如下所示：

![在此处输入图像描述](../Images/983253bafbf1f8d0d510374460b93fdf.png)

我运行下面的宏，它首先对每一行进行分类并将其放在适当的数组中。然后它将每个数组输出到即时窗口以给出：

```
a b c d e f g h i j 
b c d e f g h i j k 
c d e f g h i j k l 
a b c d e f g h i j 
b c d e f g h i j k 
c d e f g h i j k l 
1 2 3 4 5 
2 3 4 5 6 
3 4 5 6 7 
1 2 3 4 5 
2 3 4 5 6 
3 4 5 6 7 
a 1 b 2 c 3 
b 2 c 3 d 4 
c 3 d 4 e 5 
a 1 b 2 c 3 
b 2 c 3 d 4 
c 3 d 4 e 5 

Sub Test3()

  Dim ColCrnt As Long
  Dim InxTypeACrnt As Long
  Dim InxTypeACrntMax As Long
  Dim InxTypeBCrnt As Long
  Dim InxTypeBCrntMax As Long
  Dim InxTypeCCrnt As Long
  Dim InxTypeCCrntMax As Long
  Dim RowCrnt As Long
  Dim RowLast As Long
  Dim TypeA() As Variant
  Dim TypeB() As Variant
  Dim TypeC() As Variant

  ReDim TypeA(1 To 2)       ' Change 2 to something sensible
  ReDim TypeB(1 To 2)
  ReDim TypeC(1 To 2)
  InxTypeACrntMax = 0
  InxTypeBCrntMax = 0
  InxTypeCCrntMax = 0

  With Worksheets("Sheet1")

    RowLast = .Cells(Rows.Count, "A").End(xlUp).Row

    ' Load each row to the appropriate array
    For RowCrnt = 1 To RowLast
      If IsNumeric(.Cells(RowCrnt, "A").Value) Then
        ' Type B.  Five numbers
        InxTypeBCrntMax = InxTypeBCrntMax + 1
        If InxTypeBCrntMax > UBound(TypeB) Then
          ' Array B full.  Resize
          ReDim Preserve TypeB(1 To UBound(TypeB) + 2)
        End If
        TypeB(InxTypeBCrntMax) = _
                        .Range(.Cells(RowCrnt, 1), .Cells(RowCrnt, 5)).Value
      ElseIf IsNumeric(.Cells(RowCrnt, "B").Value) Then
        ' Type C.  Six values, mixed alpha and numeric
        InxTypeCCrntMax = InxTypeCCrntMax + 1
        If InxTypeCCrntMax > UBound(TypeC) Then
          ' Array C full.  Resize
          ReDim Preserve TypeC(1 To UBound(TypeC) + 2)
        End If
        TypeC(InxTypeCCrntMax) = _
                       .Range(.Cells(RowCrnt, 1), .Cells(RowCrnt, 6)).Value
      Else
        ' Type A.  Ten strings
        InxTypeACrntMax = InxTypeACrntMax + 1
        If InxTypeACrntMax > UBound(TypeA) Then
          ' Array A full.  Resize
          ReDim Preserve TypeA(1 To UBound(TypeA) + 2)
        End If
        TypeA(InxTypeACrntMax) = _
                       .Range(.Cells(RowCrnt, 1), .Cells(RowCrnt, 10)).Value
      End If
     Next

   End With

   ' Display contents of each array

   For InxTypeACrnt = 1 To InxTypeACrntMax
     For ColCrnt = 1 To 10
       ' Each element of array TypeA is now a 2D array of size (1 To 1, 1 To 10)
       ' Note how I access the cells of the inner array
       Debug.Print TypeA(InxTypeACrnt)(1, ColCrnt) & " ";
     Next
     Debug.Print
   Next

   For InxTypeBCrnt = 1 To InxTypeBCrntMax
     For ColCrnt = 1 To 5
       Debug.Print TypeB(InxTypeBCrnt)(1, ColCrnt) & " ";
     Next
     Debug.Print
   Next

   For InxTypeCCrnt = 1 To InxTypeCCrntMax
     For ColCrnt = 1 To 6
       Debug.Print TypeC(InxTypeCCrnt)(1, ColCrnt) & " ";
     Next
     Debug.Print
   Next

End Sub 
```

# asp.net - ContentPlaceHolderID 作为前缀添加到我的表单字段

> ID：10657582
> 
> 赞同：3
> 
> 时间：2012-05-18T18:02:01.853
> 
> 标签：asp.net, .net

我有一个 asp:Content 标签添加到我的 aspx 页面。

```
<asp:Content ID="Step1Content" ContentPlaceHolderID="MainContent" Runat="Server"> 
```

我有一个像下面这样的javascript，

```
 function switchAllMenu() {
            var ids = new Array('divOut', 'divQOR', 'divPop', 'divRD', 'divCst', 'divRep', 'divCnt');
            var i, el, newObj, el1;
            if (document.getElementById('aSwitchAllMenu').value == "Expand All") {
                document.getElementById('aSwitchAllMenu').value = "Collapse All";
                for (i = 0; i < ids.length; i++) {
                    el = document.getElementById(ids[i]);
                    newObj = ids[i].replace("div", "li");
                    el1 = document.getElementById(newObj);
                    el.style.display = '';
                    el1.className = 'active';
                }
            }
            else {
                document.getElementById('aSwitchAllMenu').value = "Expand All";
                for (i = 0; i < ids.length; i++) {
                    el = document.getElementById(ids[i]);
                    newObj = ids[i].replace("div", "li");
                    el1 = document.getElementById(newObj);
                    el.style.display = 'none';
                    el1.className = '';
                } 
```

当我单击 expandAll 或 collapseall 时，相应的 Div 必须展开和折叠。但是由于内容占位符已添加到页面中，因此它会作为字段名称的前缀，我的 JavaScript 将无法正常工作。我应该在这个 javascript 中进行什么更改，以便我的展开折叠工作。

我的字段名称如下所示，MainContent_divOut、MainContent_divQOR ......我应该以“MainContent_”为前缀更改 var id。然而，即使这对于第一个字段“divOut”也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:07:16.670

您可以根据您的 asp.net 版本在 web.config 中修复它，如果您使用的是 4.0，则可以将其设置为 inline ， `<asp:TextBox runat="server" ClientIDMode="static" id="txt1" />`

这将阻止将前缀添加到您的控件 ID。

[更多细节在这里](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:33:21.303

用于`<%=Element.ClientID%>`例如。用于`<%=divOut.ClientID%>`获取页面上任何服务器端控件的客户端 ID。

# css - HTML/CSS：如何让容器的滚动条控制内部 div 的滚动？

> ID：10657583
> 
> 赞同：1
> 
> 时间：2012-05-18T18:02:02.630
> 
> 标签：css, html, scroll, overflow

[决定如何表达这个问题并不容易......]

这是一个[示例 jsfiddle](http://jsfiddle.net/dgYXz/)。

紫色 div ( `'#inner'`) 高 1000 像素。

如何制作**红色**div ( `'#out'`) 的滚动条 -
控制**紫色**div ( `'#inner'`) 的滚动？

或者在视觉上创建一个看似相似的效果，
我觉得这里有一个我缺少的微不足道的解决方案......：\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:42:44.540

您可以使用这个 jquery 插件：[http](http://demos.flesler.com/jquery/scrollTo/) ://demos.flesler.com/jquery/scrollTo/ 并使蓝色滚动跟随红色滚动。

```
var top = $(redBox).scrollTop();
var left = $(redBox).scrollLeft();
$(blueBox).scrollTo( { top:top, left:left}, 800 ); 
```

这是假设我理解你的问题。

# excel - 如果满足条件，需要一个公式来计算列中的总和

> ID：10657585
> 
> 赞同：0
> 
> 时间：2012-05-18T18:02:17.637
> 
> 标签：excel, spreadsheet

我有一个工作电子表格，我们每隔 30 分钟手动更新一次。我想创建一个公式，只有在第二列中输入值后，它才会计算一列的总和。第一列是预测金额。第二列是实际的。在实际值列中输入值后，如何自动对预测金额求和。我不知道它是否应该是一个 IF 和 Then 声明一个 DSUm 或一个 SUMIF。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:23:38.550

我不太确定你在追求什么。但从它的声音来看，你想要 SUMIF 而不是 COUNTIF。COUNTIF 似乎计算了满足条件的给定单元格范围内的单元格数。SUMIF 对这些单元格中的值进行求和。这里有更多信息：

[http://office.microsoft.com/en-us/excel-help/countif-HP005209029.aspx](http://office.microsoft.com/en-us/excel-help/countif-HP005209029.aspx)

[http://office.microsoft.com/en-gb/excel-help/sumif-HP005209292.aspx](http://office.microsoft.com/en-gb/excel-help/sumif-HP005209292.aspx)

# javascript - HighCharts 动态改变图表类型

> ID：10657588
> 
> 赞同：7
> 
> 时间：2012-05-18T18:02:26.500
> 
> 标签：javascript, highcharts

在 ASP.NET 站点中使用 HighCharts 2.2.3。有关代码示例，请参见[http://jsfiddle.net/wergeld/TDLvc/](http://jsfiddle.net/wergeld/TDLvc/)。我的站点设置与 jsFiddle 显示的有点不同。我的更改系列的函数存在于一个包含的 JS 文件中，并且对该函数的调用不是与图表创建 JS 代码“内联”（尽管它仍然包装在一个文档就绪的 jquery 中）。

我有两个问题，其中一个可以在 jsFiddle 中看到。1) 更改图表类型时，yAxis 名称似乎丢失了。您可以看到我最初有 2 个 yAxis，并且在您更改图表类型后，顶部轴不再有值标签（意味着图表数据仅使用底部轴（第一个 yAxis））。2) 在 FF 或 IE 下运行时，我在调用的行上收到错误：

```
data: serie.options.data 
```

错误是：c 不是 highcharts.js 中的第 55 行的构造函数（这是 min-ed 文件）。

使用 highcharts.src.js 我现在可以看到错误是： typeClass is not a constructor

这是 src.js 中的第 8789 行： serie = new typeClass();

请参阅更新的 jsFiddle：选择 Point 作为图表类型：http: [//jsfiddle.net/wergeld/nS4Ny/1/](http://jsfiddle.net/wergeld/nS4Ny/1/)。这将引发该错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T13:43:48.197

这个问题是我们下拉值的大写。将检查更改为：

```
newType = newType.toLowerCase(); 
```

现在图表类型更改很大生效。完整代码：

```
function changeType(chart, series, newType) {
        newType = newType.toLowerCase();
        for (var i = 0; i < series.length; i++) {
            series = series[0];
            try {
                series.chart.addSeries({
                    type: newType,
                    stack: series.stack,
                    yaxis: series.yaxis,
                    name: series.name,
                    color: series.color,
                    data: series.options.data
                },
                false);
                series.remove();
            } catch (e) {
                alert(newType & ': ' & e);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T15:10:34.590

对于偶然发现此问题的任何人...您必须从最后一个到第一个删除图表系列。还记得在最后一个系列上重绘，否则您的更改将不会显示:)

```
function changeChartType(chart, type, redraw) {
    var seriesOptions = new Array(chart.series.length);
    for (var i = 0; i < chart.series.length; i++) {
        var series = chart.series[i];
        seriesOptions[i] = {
            type: type,
            name: series.name,
            color: series.color,
            dashStyle: series.options.dashStyle,
            lineWidth: series.options.lineWidth,
            marker: series.options.marker,
            dataLabels: series.options.dataLabels,
            enableMouseTracking: series.options.enableMouseTracking,
            data: series.options.data,
            isRegressionLine: series.options.isRegressionLine
        };
    }
    for (var i = chart.series.length - 1; i >= 0; i--) {
        chart.series[i].destroy();
    }
    for (var i = 0; i < seriesOptions.length; i++) {
        var newSeries = chart.addSeries(seriesOptions[i], redraw && i == seriesOptions.length - 1);
    }
    chart.currentType = type;
} 
```

# asp.net - 更改链接按钮上的标签单击中继器内部

> ID：10657591
> 
> 赞同：1
> 
> 时间：2012-05-18T18:02:29.403
> 
> 标签：asp.net, vb.net

我在我的 asp.net 页面中使用了一个 asp.net 中继器，如下所示：

```
 <asp:Repeater ID="Repeater1" runat="server">
                <ItemTemplate>
                         <asp:Label ID="lblsSICCode" runat="server" Text='<%# Eval("sSICCode") %>'></asp:Label>
                <asp:LinkButton ID="lnkSelect" runat="server" CommandArgument='<%# Eval("sSICCode") %>' OnCommand="LinkButton1_Command" CommandName="MyUpdate">Select</asp:LinkButton>
                 <asp:Label ID="Label1" runat="server" Text='<%# Eval("sSICCode") %>'></asp:Label>
                </ItemTemplate>
            </asp:Repeater> 
```

每当单击链接按钮时，我都想更改标签文本。我正在使用以下代码，但它会更改所有中继器的标签。选定行前面的 Label1 应获取 mylabel 的值。

```
 Protected Sub LinkButton1_Command(sender As Object, e As CommandEventArgs)
    If e.CommandName = "MyUpdate" Then
        For Each RI As RepeaterItem In Repeater1.Items
            Dim MyLabel As Label = TryCast(RI.FindControl("lblsSICCode"), Label)

            If MyLabel IsNot Nothing Then

                If MyLabel.Text = e.CommandArgument Then
                    Response.Write(e.CommandArgument + "<br />")
                End If

            End If
        Next

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:07:14.157

在 LinkBut​​ton1 中放置一个带有中继器项目索引的命令参数。接下来像在右侧的中继器项中一样找到 Label 控件。

编辑：尝试这样的事情：

```
Private Sub Repeater1_ItemCommand(source As Object, e As System.Web.UI.WebControls.RepeaterCommandEventArgs) Handles Repeater1.ItemCommand
    If e.CommandName.Equals("MyUpdate") Then
        Dim MyLabel As Label = TryCast(e.Item.FindControl("lblsSICCode"), Label)
        Dim Label1 As Label = TryCast(e.Item.FindControl("Label1"), Label)

        If MyLabel IsNot Nothing Then
            Label1.Text = MyLabel.Text
        End If
    End If
End Sub 
```

如果您将 CommandName 留在中继器内的 Linkbutton 中，上述事件处理程序将触发。

# excel - 使用带有条件的自动筛选

> ID：10657597
> 
> 赞同：1
> 
> 时间：2012-05-18T18:03:01.197
> 
> 标签：excel, vba

我已经在这个问题上碰到了一堵砖墙，但我希望有人可以帮助我使用自动过滤器，也许还有高级过滤器（但不确定这一点），我有一个包含日期的列，其中还包含值“NULL”和另一列包含数字和值“NULL”。在第二列中可能有重复的数字。

我对第一列的标准是排除值“NULL”，但也排除小于 14 的日期。第二列的标准是包括所有“NULL”值，但只有数字显示唯一数字（或在正确的说法中与众不同）。

我不确定如何执行此操作，并且我无法在互联网上找到任何内容。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:13:42.010

我使用宏记录器来获取此代码：

```
ActiveSheet.Range("$A$1:$B$6").AutoFilter Field:=2, Criteria1:="<>NULL", _
    Operator:=xlAnd, Criteria2:="<5/14/2012" 
```

也就是说，您将需要这样做：

```
 ActiveSheet.Range("$A$1:$B$6").AutoFilter Field:=2, Criteria1:="<>NULL", _
        Operator:=xlAnd, Criteria2:="<" & Date - 14 
```

对于第二个过滤器。将该列复制到一个空白列并使用 RemoveDuplicates 函数获取数字的不同列表。

```
Intersect(UsedRange, Range("A1")).EntireColumn.Copy Range("Z1")
Intersect(UsedRange, Range("Z1")).EntireColumn.RemoveDuplicates(more args here that you will need to fill) 
```

# xmpp - 哪种技术更适合进行语音聊天：Cirrus、FMS 或 XMPP？

> ID：10657603
> 
> 赞同：0
> 
> 时间：2012-05-18T18:04:12.560
> 
> 标签：xmpp, chat, p2p, flash-media-server, adobe-cirrus

我正在寻找一种很好的技术来开发语音聊天，到目前为止，我发现的最好的是：

*   卷云 (Adobe)
*   Flash 媒体服务器 (Adobe)
*   XMPP

但都有好的和坏的特点。IE：

*   Cirrus 只在 adobe 服务器上运行`rmtfp://example.adobe.com`，可靠吗？万一哪天 adobe 掉了怎么办？

*   FMS 很好，但我必须付钱 - *_* -

*   XMPP 也很好，但我找不到可靠的信息来开发一些东西。以及关于语音聊天的零信息。

你知道一些好的技术来开发这种类型的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:39:37.383

我通常建议使用媒体服务器，因为它是您可以控制的东西（比 cirrus 好）而且因为它是为流媒体设计的（比 xmpp 好）
但是我不确定 fms，看看[red5](http://www.red5.org/)（这是开源的）和[wowza](http://www.wowza.com/pricing)

# android - 这是 Android 上下文泄漏吗？

> ID：10657605
> 
> 赞同：5
> 
> 时间：2012-05-18T18:04:22.837
> 
> 标签：android, memory-leaks

这是一段简化的代码：

```
static Activity longLivedField;

onCreate(...) {     
    longLivedField = this;  // the only write to this field
} 
```

我见过有人声称这是上下文泄漏，并为此创建了修复程序。典型的解决方法是在适当的位置使该字段无效。例如，在`onPause()`：

```
onPause() {
    longLivedField = null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T19:24:50.883

是的，如果你不使 onPause() 中的字段无效，那就是内存泄漏。您几乎可以肯定永远不想保留对任何 Activity 的静态引用。你想达到什么目的？

Android 开发者网站包含一个方便的页面，描述了如何避免像这样的内存泄漏：

[避免内存泄漏](http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html)

# java - 在 java 中需要一个小型且简单的嵌入式数据库：SQLJet vs. JavaDB/Apache Derby

> ID：10657612
> 
> 赞同：0
> 
> 时间：2012-05-18T18:05:03.320
> 
> 标签：java, sql, database, derby

我有一个使用 MySQL 数据库运行的应用程序。但是这个 MySQL 数据库目前很胖而且很不舒服。我只需要文件共享上的数据库和文件共享上的应用程序，这样每个用户都可以使用文件共享中的数据库运行应用程序。

有最大。100 Mbit/s 网络中的 12 个用户在 samba 共享上仅使用文本数据和数字（我认为每个用户每天的流量可能是 1-5 MB）。

我的第一个想法是使用[SQLJet](http://sqljet.com/)来完成这项工作。描述很好，它支持多用户访问。而且我的测试很好。但在另一页上写道，在文件共享上运行 SQLite，[“[...] 两个或多个客户端程序可能同时修改同一数据库的同一部分，导致数据库损坏。”](http://www.sqlite.org/whentouse.html) . 这对于稳定的应用程序来说不是好消息......

然后我想到了 JavaDB（又名 Apache Derby）。我认为这是一个功能强大的工具，具有悠久的历史，并且来自 Sun（自 JDK 1.5 起支持 JavaDB）。但我不知道JavaDB是否支持从头开始的多用户访问以及它是如何工作的......

所以我想问你是否可以向我推荐一个简单且小型的 Java 嵌入式数据库系统，它支持文件共享上的多用户访问，或者评价我的可能性，或者告诉我你使用 JavaDB 或 SQLJet 的经验！

来自德国的问候，mythbu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:08:14.257

看看H2。这是我所知道的最好的纯 Java 嵌入式数据库，功能非常强大且速度快：

[http://www.h2database.com/html/main.html](http://www.h2database.com/html/main.html)

但是我不太了解您对 MySQL 的问题，您能解释更多吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:10:25.833

Derby 确实支持多用户访问；最简单的方法是使用网络服务器，记录在这里：[http ://db.apache.org/derby/docs/10.8/adminguide/cadminov825266.html](http://db.apache.org/derby/docs/10.8/adminguide/cadminov825266.html)

如果您想在应用程序中嵌入 Derby，但仍允许多个用户访问数据库，事情可能会稍微复杂一些，但它们仍然是可能的。您需要更清楚地描述您的预期架构，以便更全面地讨论这些问题。

# stream - Jython 2.2.1 如何解压缩 gzip 流？

> ID：10657613
> 
> 赞同：0
> 
> 时间：2012-05-18T18:05:05.233
> 
> 标签：stream, streaming, gzip, jython, zlib

我被困`zlib`在一个项目中使用带有模块版本 1.1.3 的 Jython 2.2.1。我需要下载大量压缩数据，对其进行处理，然后将其写入数据库。我想避免在内存中有多个数据副本，所以我将其解压缩为流。

使用 Python 2.7.2，我已经能够将 gzip 流解压缩为：

```
from zlib import decompressobj, MAX_WBITS

f = open('stream.gz', 'rb') # in real life, this stream comes from urllib2  
gunzipper = decompressobj(16+MAX_WBITS)  
data = ''  
for chunk in iter(lambda: f.read(BLOCK_SIZE), ''):
    data += gunzipper.decompress(chunk)
#done 
```

但是，在 Jython 2.2.1 下，相同的代码在创建以下代码时会出错`decompressobj`：

```
.\jythonLib.jar\lib/zlib$py.class", line 89, in __init__
ValueError: Invalid initialization option 
```

显然[，标头偏移技巧](https://stackoverflow.com/questions/1838699/how-can-i-decompress-a-gzip-stream-with-zlib)不适用于这个旧版本的`zlib`.

我是 Jython 的 Java 方面的新手，想知道是否有办法使用 Jython 中的 Java 类解压缩 gzip 流？或者也许有一种方法可以诱使`zlib 1.1.3`接受 gzip 标头？

欢迎任何其他潜在的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:19:10.953

没有办法哄骗那些对 zlib 1.1.3 的调用来解码 gzip 标头。该功能是在 zlib 1.2.0 中添加的。

您也可以自己解码 gzip 包装器，然后调用 raw inflate with`-MAX_WBITS`作为压缩负载的参数。您可以找到[RFC 1952](https://www.rfc-editor.org/rfc/rfc1952)中定义的 gzip 包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:50:10.340

通过使用 Jython 中的集成 Java 库，我能够使用这个旧的 zlib 模块。

我还必须使用 Java 类处理我的 URL，以便将`FileInputStream`对象传递给 gzip 解码器。

备查：

```
from java.io import BufferedReader,InputStreamReader
from java.util.zip import GZIPInputStream
from java.net import URL

url = URL('http://data.com')
urlconn = url.openConnection()
urlconn.setRequestProperty('Accept-encoding', 'gzip, compress')
urlconn.connect()

reader = BufferedReader(InputStreamReader(GZIPInputStream(urlconn.getInputStream())))
data = ''
for chunk in iter(lamdba: reader.readLine(), None):
    data += chunk 
```

# javascript - 禁用按钮可防止点击事件到服务器

> ID：10657614
> 
> 赞同：0
> 
> 时间：2012-05-18T18:05:18.810
> 
> 标签：javascript, jquery, button, mouseclick-event

我有一个带有按钮的中继器，可以将一些数据保存到数据库中。我的问题是有时调用数据库需要一点时间，用户有时会单击保存几次，导致将多个条目添加到数据库中。所以我的第一个想法是添加一个 throbber 并在单击时禁用该按钮。悸动者正在旋转，但当按钮被禁用时，它会阻止对服务器的调用。所以我看了看[这个](https://stackoverflow.com/questions/7170798/disabling-a-button-doesnt-fire-click-event-on-server-side)，但由于我有一堆不同的按钮（更新，添加，...），所以有几个不同的服务器端方法被调用，所以我不能只发布`__doPostBack($(button).attr('id'),'')`. 所以我在想我可能需要做一个 ajax 调用，但我想看看是否还有其他想法。这是我的代码：`onClientClick`实际上是在服务器端设置的，但这基本上是正在做的事情。

**中继器**：

```
<div style="position: relative; float: left;">
      <asp:Button ID="btnSave" runat="server" Text="Assign" OnClientClick="return fnAssignedButtonPressed(this);", OnClick="btnSave_Click" />
</div> 
```

**Javascript**：

```
function fnAssignedButtonPressed(button) {
//validating inputs
var valid = true;

        if(valid)
        {
           $(button).attr('disabled', 'disabled');
           showWaitCursor(true);
           __doPostBack($(button).attr('id'),'');
        }
  return valid;
} 
```

**服务器端**：

```
protected void btnSave_Click(object sender, EventArgs e)
{
 //save
 // This method doesn't call called when I disable the button!!
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:09:12.863

我最终这样做了，但我不知道我对此有何感想..

```
function fnAssignedButtonPressed(button) 
{ 
//validating inputs 
var valid = true;
     if(valid)
     {
       showWaitCursor(true);
       //set a timeout and then disable the button, this prevents the user from click the button multiple times.
       // need the timeout bc when the button becomes disabled it prevents the onlick event from firing.
       setTimeout(function() {fnDisableButton(button)}, 1); 
    }
}

function fnDisableButton(button)
{
    $(button).attr('disabled', 'disabled');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:09:41.083

根据您的情况，Ajax 绝对是一个不错的选择。否则，您可以使用 jquery 的 UI 对话框显示请等待模式，例如：

```
$('<div class="dialog" title="Please Wait">Please wait while your request is processing</div>').dialog({
    modal: true,
    width: 350,
    open: function (event, ui) {
        $(".ui-dialog-titlebar-close").hide();
    },
}); 
```

一旦服务器返回，模式应该会自动消失，并且 UI 对话框的模式选项会使屏幕变灰，因此用户无法单击任何内容。

# iphone - 在“照片”中播放相册中的电影

> ID：10657617
> 
> 赞同：0
> 
> 时间：2012-05-18T18:05:38.920
> 
> 标签：iphone, ios, ipad

如何从“照片”的相册播放电影？我不想使用 UIImagePickerController 来浏览电影，但我希望能够在下面的代码中指定电影的名称（或某种 id）来播放它。下面的代码在本地播放视频。如何修改路径以播放“照片”应用中存储的名为“视频”的相册中的视频？非常感谢您的帮助。

```
NSString *url = [[NSBundle mainBundle]

                     pathForResource:@"Movie1"

                     ofType:@"MOV"];

MPMoviePlayerViewController *playerViewController =

    [[MPMoviePlayerViewController alloc]

     initWithContentURL:[NSURL fileURLWithPath:url]];

[[NSNotificationCenter defaultCenter]

     addObserver:self

     selector:@selector(movieFinishedCallback:)

     name:MPMoviePlayerPlaybackDidFinishNotification

     object:[playerViewController moviePlayer]];

[playerViewController.view setFrame: self.view.bounds];
[self.view addSubview:playerViewController.view];

MPMoviePlayerController *player = [playerViewController moviePlayer];

[player play];

[playerViewController release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:30:03.090

我最终使用了 ALAssetsLibrary 并创建了一组 url (assetURLs)，用于存储相册中视频的 url。这是代码，以防它可能对某人有帮助。

```
NSMutableArray *assets =[[NSMutableArray alloc]init];
NSMutableArray *assetURLs = [[NSMutableArray alloc] init];
NSMutableArray *assetGroups = [[NSMutableArray alloc] init];

ALAssetsLibrary *library = [[ALAssetsLibrary alloc]init];
void (^assetEnumerator)( ALAsset *, NSUInteger , BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop)
{
    if(result != NULL)
    {
        NSLog(@"Asset: %@", result);
        //[assets addObject:result];
        if(![assetURLs containsObject:[result valueForProperty:ALAssetPropertyURLs]]) {
            if([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypeVideo]) {
                [assetURLs addObject:[result valueForProperty:ALAssetPropertyURLs]];
                [assets addObject:result];
            }
        }

    }
};    
void (^assetGroupEnumerator)( ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop)
{
    if(group != nil)
    {
        [assetGroups addObject:group];
        NSLog(@"GROUP: %@", group);
        [group enumerateAssetsUsingBlock:assetEnumerator];
    }      
};    
void(^ErrorBlock)(NSError*)=^(NSError *error)
{
    NSLog(@"Failure");
};    

[library enumerateGroupsWithTypes:ALAssetsGroupAlbum
                       usingBlock:assetGroupEnumerator
                     failureBlock: ErrorBlock
 ]; 
```

然后，初始化 MPMoviePlayerViewController 对象，如下所示：

```
MPMoviePlayerViewController *playerViewController =[[MPMoviePlayerViewController alloc] initWithContentURL:[[[assets objectAtIndex:counter defaultRepresentation] url]]; // counter is incremented to play all videos or set whatever way to play what you want. 
```

# php - 使用 Foreach 数组在 Mysql 中插入多行

> ID：10657626
> 
> 赞同：0
> 
> 时间：2012-05-18T18:06:22.023
> 
> 标签：php, mysql, arrays, for-loop, foreach

我正在尝试从允许多个复选框的表单中将多行插入到 mysql 表中。

这是表格：

```
<input type='submit' name='invite-group' value='Invite To Group'>
<br />
<?php
$query2aac = mysql_query("SELECT * FROM follow WHERE yoozer1='$userdb1a' AND  followaccept='Yes' ORDER BY yoozer2 DESC");

while($row2aac = mysql_fetch_array($query2aac))
{
    $rowid = $row2aac['followid'];
    $yoozer2aac = $row2aac['yoozer2'];
    $yoozer2aacurl = strtolower($yoozer2aac);
    $palurl = '<a href="http://www.bunchofus.com/fanpage/' . $yoozer2aacurl . '">' .    $yoozer2aac . '</a>';
    echo '<input type= "hidden" name = "id[]" value="' . $rowid . '"></input>';
    echo '<input type= "checkbox" name = "friends[]" value="' . $yoozer2aac . '">' . $palurl . '</input><br />';
}   
?> 
```

这是php：

```
if ($submit)
{
    $submit = $_POST['invite-group'];
    $date1 = date("Y-m-d");
    $lowername = strtolower($username);
    $combined = $_POST['friends'];

    foreach ($combined as $username) 
    {
        $insert1 = mysql_query("INSERT INTO grprequest VALUES ('','$grpid3','$username','$myuser','$grprights3','$grpactive3')");
    }
}
?> 
```

它是在数据库中插入一行，而不是多行。如果我在 foreach 之后回显用户名，则会显示多个用户名。

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:25:42.520

您是否尝试过使用其他变量`$username`？因为您似乎已经离线使用了此名称`$lowername = strtolower($username);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:30:06.247

根据您提供的示例代码和 var_dump `$combined`，我不确定为什么它不适合您。但也许你可以尝试这样的事情：

```
$inserts = array();
foreach ($combined as $username)
    $inserts[] = "('','$grpid3','$username','$myuser','$grprights3','$grpactive3')";

$query = "INSERT INTO grprequest VALUES ". implode(", ", $inserts);

echo "query = $query"; // for debugging purposes, remove this once it is working
mysql_query($query) or die(mysql_error()); 
```

这将在一次调用数据库中执行所有插入操作。我`echo`在执行查询之前添加了一个，以便您可以看到正在执行的确切查询。

* * *

您绝对应该注意的一件事是，您的代码看起来容易受到 SQL 注入的攻击。您可以在数百个地方寻找更多关于如何保护自己的信息，因此只需搜索即可。我最喜欢的参考资料是[Bobby Tables](http://bobby-tables.com/)。

看起来您的表单也容易受到 XSS 攻击。您从数据库中选择数据并将其直接插入 HTML，但您应该首先对其进行清理（使用类似的东西`htmlspecialchars`）。

# sqlite - 核心数据轻量级迁移：触发它需要什么？

> ID：10657636
> 
> 赞同：3
> 
> 时间：2012-05-18T18:07:00.530
> 
> 标签：sqlite, core-data, ios5, migration

我最近成功完成了一个核心数据“轻量级迁移”；但我注意到这需要我做一些事情——我想知道触发自动迁移所需的绝对最小值是多少？

我并不是说“哪些数据更改需要迁移，否则你会崩溃”，这写在几个地方 - 而是：

“这里列出了您至少必须做的事情，才能让 Core Data 为您迁移”。

（ FWIW - 以下是我所做的事情。有些似乎是绝对必要的，有些可能不是 - 想知道哪些是哪些？）：

*   编辑器 -> 添加模型版本（命名并保存）
*   Utility Inspector -> Versioned Core Data Model：选择我的最新模型版本为“当前”
*   将我的新表添加到最新的核心数据模型
*   编辑器 -> 创建新的 NSManagedObject 子类 ...
*   因为我使用 mogenerator - 我用它来创建人和机器文件（经过一些配置让它指向上面创建的新模型文件，隐藏在 .xcdatamodeld 包中），将这些文件与上面步骤中创建的文件交换（如果你在做核心数据，mogenerator 是一个活生生的救星）
*   在我的应用程序的 info.plist 中，我将“Bundle Version String，short”和“Bundle Version”向上修改了一个增量。
*   将必要的选项 NSDictionary 添加到我的 persistentStoreCoordinator 初始化方法（ [__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:optionsDict error:&error] ）

`NSDictionary *optionsDict = [NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];`

**然后，我在**以前的版本上运行我的新应用程序，并检查，果然，迁移工作正常，一切都很顺利......但这是很多步骤 - 然而，到目前为止，它看起来确实是最低要求。

但是，例如，*info-plist 中的选项有多重要？*如果我不更改它们 - 或者 - 如果我只更改一个，应用程序是否仍能正确迁移？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:46:43.420

*   编辑器 -> 添加模型版本（命名并保存）
*   Utility Inspector -> Versioned Core Data Model：选择我的最新模型版本为“当前”
*   将必要的选项 NSDictionary 添加到我的 persistentStoreCoordinator 初始化方法（ [__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:optionsDict error:&error] ）

是你所需要的全部。

# .net - 无论版本如何，我如何引用 DLL？

> ID：10657637
> 
> 赞同：17
> 
> 时间：2012-05-18T18:07:02.283
> 
> 标签：.net, vb.net, compiler-construction, reference, version

好的，我是 Telerik 控件库的重度用户，特别是 ASP.NET。但是，我想将一些功能添加到某些控件中。现在我可以使用扩展方法很容易地做到这一点。所以我写了一个小型库，正是这样做的。显然，这个库需要引用它们的 DLL ( `Telerik.Web.UI.dll`)。

在`My Project > References`我的 DLL 项目的页面中，我引用了`Telerik.Web.UI.dll`. 对于这个参考，我将**特定版本**属性设置为 False，因为我不希望我的库关心正在使用的 Telerik DLL 的版本。这是我的问题…….NET 编译器似乎不支持这个设置。

例如，我有一个引用 Telerik DLL 和我的网站的网站。我将 Telerik 库更新到了最新版本。现在，当我尝试运行我的网站时，我得到：

`Could not load file or assembly 'Telerik.Web.UI, Version=2012.1.215.40, Culture=neutral, PublicKeyToken=121fae78165ba3d4' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)`

我通过转到我的 DLL 项目，针对最新的 Telerik DLL 重新编译它，然后在网站上更新我的 DLL 来解决这个问题。这正是我每次更新 Telerik 的库时*都不想做的事情。*我***认为***将**特定版本**设置为 false 意味着它将适用于任何版本。不？还是我***完全***误解了该设置的作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:13:04.560

您应该考虑使用[`bindingRedirect`](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)哪个允许您指示 .NET 框架在**运行时**使用另一个版本的程序集（即，如果您的项目是针对 1.0 版编译的，它仍然可以与 1.1 版一起使用，假设没有 API 更改）。

`Specific Version`属性仅适用于编译时程序集引用。

# tags - 将 sfDoctrineActAsTaggablePlugin 附加到对象

> ID：10657648
> 
> 赞同：0
> 
> 时间：2012-05-18T18:07:41.230
> 
> 标签：tags, doctrine, symfony-1.4

我已成功安装 sfDoctrineActAsTaggablePlugin，将可标记行为添加到我希望在 schema.yml 中可标记的模型并重建所有模型。有人可以向我指出一个教程，该教程显示如何将标签附加到对象并检索对象标签？我不知道从这里去哪里。我正在寻找一个非常简单的解决方案。允许我添加以逗号分隔的标签并检索它们的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:38:04.813

正如[README 文件](https://github.com/annismckenzie/sfDoctrineActAsTaggablePlugin/blob/master/README#L65)中定义的那样，就这么简单：

考虑一个 Doctrine “Post” 类：

```
$post = new Post();
$post->addTag('toto');
$post->addTag('tata, tutu');
$post->addTag(array('Titi', 'Gros Minet'));
$post->save(); 
```

该插件支持[机器标签](http://www.flickr.com/groups/api/discuss/72157594497877875/)：

```
$post = new Post();
$post->addTag('iso:isbn=123456789');
$post->save();

// assume City is a taggable class
$city = new City();
$city->addTag('geo:lat=47.3456');
$city->save(); 
```

# scala - 带升降机的动态标题

> ID：10657651
> 
> 赞同：0
> 
> 时间：2012-05-18T18:07:46.293
> 
> 标签：scala, menu, lift, sitemap, title

我想知道如何更改 lift Menu 的标题：

```
lazy val items: Menu = Menu.param[Page]("recents", S ? "baseline"+" | Page "+p, c => getPage(c), pc => pc.toString) / "page"  >>
        LocGroup("items") >> Hidden >> Template(() => Templates("items" :: "list" :: Nil) openOr NodeSeq.Empty) 
```

基本上我想在我的标题中显示页码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:03:37.257

我知道这是一个迟到的答案，但我想我会在这里发布一个以供参考。

有一个`LocParam`调用[`Title`](http://liftweb.net/api/25-M4/api/scala/net/liftweb/sitemap/Loc%24%24Title.html)可以让您设置页面的标题。我已将参数添加到您的示例中，您可以看到构造函数接受一个函数，该函数接受一个类型的参数`Page`并返回一个`NodeSeq`代表页面标题的函数。

```
lazy val items: Menu = Menu.param[Page](
  "recents", "recents", 
  c => getPage(c), pc => pc.toString) / "page"  >>
        LocGroup("items") >> 
        Hidden >>
        Template(() => Templates("items" :: "list" :: Nil) openOr NodeSeq.Empty) >>
        Title((p) => Text(S ? "baseline"+" | Page "+p)) 
```

# jquery-ui - jQueryUI 的 resizeable() 导致 resize 事件触发所有祖先......为什么？

> ID：10657652
> 
> 赞同：1
> 
> 时间：2012-05-18T18:07:46.410
> 
> 标签：jquery-ui, events, resize

我创建了几个嵌套的 div，内部可水平调整大小，外部可垂直调整大小。我有这样的调整父 div（或窗口）的大小会导致孩子调整大小。

但是，我发现当一个子 div 被调整大小时，*即使它们的大小没有改变*，它的祖先也都会接受 resize 事件。

我在 Win7 上使用 Chrome 18.0。

此处示例：http: [//jsfiddle.net/m95Ha/](http://jsfiddle.net/m95Ha/)
调整红色和青色边和窗口的大小，并观察黑色 div 中的字符。例如，水平调整青色边的大小会导致“i”（“#inner”调整大小事件）、“o”“i”（“#outer”调整大小事件）*和*“w”（窗口调整大小事件）。
我不会想到'o'或'w'。

这是 jQuery 的东西，还是 Chrome 的东西，或者可能是 HTML/DOM 标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:19:46.563

这是 jQuery UI 的预期行为；resize 方法会像正常事件一样冒泡。如有必要，您可以使用以下内容过滤掉在非 jQuery UI 可调整大小的小部件上发生的调整大小事件：

```
$('whatever').bind('resize', function(event) {
    if (!$(event.target).hasClass('ui-resizable')) {
        //do stuff here
    }
}); 
```

这个问题也有一些相关的讨论 - [jQuery UI resizable fire window resize event](https://stackoverflow.com/questions/7494378/jquery-ui-resizable-fire-window-resize-event)。

# c# - 按值传递结构

> ID：10657657
> 
> 赞同：1
> 
> 时间：2012-05-18T18:08:22.253
> 
> 标签：c#, .net, structure, pass-by-reference, pass-by-value

鉴于以下代码，我很想知道如何避免以下异常

```
System.InvalidOperationException was unhandled
Message=Collection was modified; enumeration operation may not execute.
Source=mscorlib
StackTrace:
   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
   at System.Collections.Generic.List`1.Enumerator.MoveNextRare()
   at System.Collections.Generic.List`1.Enumerator.MoveNext()
   at PBV.Program.Main(String[] args) in C:\Documents and Settings\tmohojft\Local Settings\Application Data\Temporary Projects\PBV\Program.cs:line 39
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()
InnerException: 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace PBV
{
class Program
{
    struct structItem
    {
        public int y { get; set; }
        public int z { get; set; }
    }

    struct testStruct
    {
        public int x { get; set; }
        public List<structItem> items { get; set; }
    }

    static void Main(string[] args)
    {
        testStruct a = new testStruct();
        structItem b = new structItem();

        for (byte i = 0; i <= 10; i++) {
            b.y = i;
            b.z = i * 2;
            a.items = new List<structItem>();
            a.items.Add(b);
        }

        testStruct c = new testStruct();
        c = a;

        int counter = 0;

        //exception thrown on line below
        foreach (var item in a.items) {
            structItem d = item;
            d.z = 3;

            c.items[counter] = d;
            counter++;
        }

        a = c;
    }
}
} 
```

我最初试图简单地将以下内容放在第二个 foreach 中：

```
item.z = 3; 
```

但这导致了以下错误：

```
Cannot modify members of "item" because it is a "foreach iteration" 
```

我试图创建一个临时对象以便能够修改 foreach 中的结构数据，但我收到了上面的异常。我最好的猜测是因为我的临时结构正在保存对原始结构的引用而不是值本身 - 这导致我的原始结构在我的临时结构被更新时被更新。

所以我的问题是： **我如何通过值而不是引用传递这个结构？还是有完全不同的方法来解决这个问题？**

在此先感谢您的帮助。

编辑：感谢所有的答案家伙。我知道该列表是一个引用类型，但这是否使得不可能通过值而不是引用传递呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:10:41.120

我对您的示例代码尝试执行的操作感到有些困惑，但我认为您的部分困惑可能是当您设置时`c = a`，您希望它会复制列表。它不是。虽然结构本身是值类型，但它包含的 items 属性不是。List<> 是一个引用类型，所以当你设置 时`c = a`，它会将该引用复制`items`到 c。因此，当您进入循环时， a 和 c 都包含对同一个列表对象的引用。因此，当您在枚举列表时修改列表时，它总是会失败。

避免这种情况的一种简单方法是遍历列表的静态副本：

```
foreach (var item in a.items.ToArray()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:26:32.923

`a.Items`并且`c.Items`仍然是相同的 List 实例。你可以用一个老式的`for`循环来迭代它。这样您就不会使用任何枚举器，因此可以根据需要修改列表。

```
for (int i = 0; i < a.Items.Count; i++)
{
    c.Items[i] = whatever;
} 
```

无论如何，您都在保留柜台，所以这似乎是一种自然的方式。如果您不打算从中添加或删除任何项目，出于性能原因，您可能希望将列表大小存储在局部变量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T18:28:11.150

可变值对象（结构）比不可变更难处理。考虑使结构不可变并围绕它重新设计代码。

除非您确切知道好处和痛点在哪里，否则根本不使用 struct 通常更容易。尝试将您的代码改为类并衡量性能是否符合您的目标。

注意：`c = a;`是浅拷贝（根本不是真正制作你`testStruct`的第二个副本，而是指`a`），看起来你想要深拷贝 - 考虑改为构造函数并复制数组而不是引用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T22:30:12.673

在某些应用程序中，可变值类型提供了最合适的语义。*无论值类型是否支持除 all-field-copy(* *)之外的任何变异方法， a 的内在含义`List<someValueType>`通常比`List<someMutableClassType>`( ) 更清晰。不幸的是，像这样的内置集合确实不能很好地支持可变值类型，因为它们除了所有字段复制之外没有公开任何改变存储项的方法。*`List<T>`*

 *我建议在许多情况下，您最好不要使用`List<T>`，而是简单地保留一个`T[]`和一个项目计数。如果要向集合中添加一个项目，请检查计数是否大于或等于长度；如果是这样，则将长度加倍。然后将新项目存储在计数指示的槽中并增加计数。

如果你真的想使用 a `List<someStructType>`，你可以使用其他人建议的方法，通过在索引上使用整数循环来迭代要修改的项目，而不是使用 a `foreach`。然而，在使用可变结构时，说`myArray[i].X = i+4;`而不是`var temp=myList[i]; temp.X = i+4; myList[i] = temp;`处理数组扩展的小麻烦是值得的。

(*) a 的语义`List<MutableClassType>`可能会有所不同，这取决于每个列表项是否拥有对不同对象实例的唯一引用，或者拥有相同数据的实例是否可以共享。不存在这样的歧义`List<StructNotContainingMutableClassReferences>`。

(**) 如果`X`和`Y`是相同结构类型的存储位置，则`S`该语句`X = Y`将以任意顺序将所有公共和私有字段从 Y 复制到 X。该语句`X = new S(params);`创建一个`S`所有字段为空的 struct 类型的新实例，在其上调用构造函数，然后将该新实例中的所有字段复制到`X`. 因此，如果值类型实例的任何字段可以保存非默认值，那么如果实例存储在可变存储位置，这些字段将是可变的。存储在不可变位置的值类型实例的所有字段都是不可变的。使值类型“可变”或“不可变”的唯一作用是影响更改其内容的难易程度。*

# android - AccountManager getUserData 尽管已设置但仍返回 null

> ID：10657658
> 
> 赞同：14
> 
> 时间：2012-05-18T18:08:35.847
> 
> 标签：android, accountmanager, android-account

我正在开发一个使用**AccountManager**存储帐户和凭据的 Android 应用程序。我遇到的一个问题是，即使我将一堆字符串值传递给 AccountManager 的*addAccountExplicitly*数据包。

我已检查以确保捆绑包**不为空**并且它**包含**添加帐户之前的值。大多数时候都是这种情况，但是当我查询这些值时，每隔一段时间我就会得到空值。

在我刚刚删除帐户并重新添加它之后，空返回值更常见。

我在*OnAccountsUpdateListener实现的**onAccountsUpdated*方法中进行查询，所以应该添加帐户并且可以使用，对吧？

 *谢谢你的帮助

**AuthenticatorActivity**

```
// in the AuthenticatorActivity
Bundle userData = new Bundle();
userData.put (k1, v1);
userData.put (k2, v2);
userData.put (k3, v3);
userData.put (k4, v4);
userData.put (k1, v1);

Account a = new Account ("acc name", "com.account.type");
AccountManager am = AccountManager.get(this);

OnAccountsUpdateListener listener = new OnAccountsUpdateListener() {

        @Override
        public void onAccountsUpdated(Account[] accounts) {
            Account mine = findAccount(accounts, account); // match account name
            notifySignedIn(mine); // tell the world you're signed in
            am.removeOnAccountsUpdatedListener(this);
        }
    };

am.addOnAccountsUpdatedListener(listener, handler, false);
am.addAccountExplicitly(a, "themostsecurepwintheworld", userData); 
```

**其他一些线程**

```
AccountManager am = AccountManager.get(mContext);
final string value2 = am.getUserData(mAccount, k2);

if (TextUtils.isEmpty(value2)) {
    Log.d("WTF", "value is empty");
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T03:59:44.843

我知道 Honeycomb plus 中的一个错误可能会导致您的问题。如果您在注册之前尝试获取帐户的 getUserData，则所有后续 getUserData 调用都将返回 null。

如果你看代码。AccountManager 有一个由 sqlite 数据库支持的内存缓存。调用 getUserData 会填充内存缓存用户数据，即使它没有注册。如果未注册，则将其解释为没有用户数据。注册帐户只会填充数据库，不会使内存中的存储失效。

这可能会导致您的问题。

解决方法是在调用 addAccountExplicitly 之前删除该帐户。

是的，这个问题很糟糕，并且是 AccountManger IMO 中的一个巨大错误，并允许第三方对您的应用程序进行本质 DOS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T23:42:11.643

您使用的是装有 Android 4 的 HTC 设备吗？我从我的同步应用程序的用户那里收到了许多关于此问题的报告。**他们**都使用了 SDK 级别 15 的 HTC 设备。

对我来说看起来像一个 HTC 错误。

一些用户报告说，重启后问题消失了。

**更新：**同时我们找到了一个合适的解决方法，见[https://stackoverflow.com/a/29776224/1558654](https://stackoverflow.com/a/29776224/1558654)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T17:20:57.760

我有一个类似的问题，但我的问题是试图存储一个长的 userData 值而不是一个字符串。将我的 long 转换为用于存储的字符串，并在将其拉出时再次将其解析为 long，这对我来说是诀窍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-15T00:18:56.730

造成这种情况的一个潜在原因可能是调用`AccountManager.getUserData()`后台线程。[文档](https://developer.android.com/reference/android/accounts/AccountManager#getUserData(android.accounts.Account,%2520java.lang.String))说“从主线程调用这个方法是安全的” 。我们的应用程序正在调用`AccountManager.getUserData()`后台线程，这通常可以正常工作，但显然不能保证正常工作。*

# php - 提交表单后如何将最新记录从数据库发送到 html texbox？

> ID：10657659
> 
> 赞同：0
> 
> 时间：2012-05-18T18:08:38.843
> 
> 标签：php, html

步骤：
1）从数据库中选择记录

2）将记录分配给html文本框

3）文本框中的用户更改值

4) 用户单击“保存”html 按钮。

5) 表单提交方法="post" action="current-page"

6）从文本框中获取值

7) 更新数据库表中的记录

解释：表单提交后页面刷新，所以从数据库中选择记录是在更新数据库之前发生的，这就是为什么 html 文本框无法获取最新记录的原因。提交表单后如何将最新记录分配给文本框？

执行第 5 步时，页面将刷新。所以第 1 步和第 2 步将在第 7 步之前执行，这就是第 3 步的文本框无法获取最新记录的原因。如何使步骤 7 在步骤 1 之前发生？

问题解决了。我只是将步骤 7 的代码上移到步骤 1 的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:21:57.913

如果表单提交，更新查询或页面加载时，在同一页面上放置一个if条件，您可以查询最新记录

```
$flag=0;
$submit=$_POST['submit'];
if($submit=="Yes") {
//update database with new value
}
else {
$flag=1;
//query latest value from DB
$latest=$row['latest'];
} 
```

以html形式

```
<input type="text" value="<?php echo $latest; ?>" /> 
```

如果您不想在提交后显示表单，请使用标志

```
if($flag) { 
//print form
}
else {
// echo data entered
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:14:39.243

我不完全确定我理解，但我认为`mysql_insert_id()`可能会有所帮助。

[http://www.php.net/manual/en/function.mysql-insert-id.php](http://www.php.net/manual/en/function.mysql-insert-id.php)

将数据保存到数据库后，获取最后一个 id 并在新查询中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:11:39.267

您应该在会话中临时存储最新行的唯一标识符。这是最简单的方法，如果您的表没有按照您可以通过排序来实现它的方式进行排序 - 比如添加一个带有 NOW() 值的“inserted_time”列并按此排序，获取最新的。

# javascript - 循环遍历数组并将值分配给变量

> ID：10657663
> 
> 赞同：0
> 
> 时间：2012-05-18T18:09:06.200
> 
> 标签：javascript, arrays, loops

我还没有任何代码，因为我只是想知道是否可以循环遍历一个`Array`动态填充的值，每次可能不同。变量显然必须使用递增值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:26:00.560

您可以使用[数组长度](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/length)属性来处理未知的数组长度：

```
var arr = ["carrots", "bananas", "onions"];

for (var i = 0, len = arr.length; i < len; i++) {
    //every element accesible via arr[i];
    //example:
    console.log(arr[i]);
} 
```

即使它上面有更多或更少的元素，它也会遍历整个数组

有了这个基地，我相信你可以从这里做你想做的事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-13T07:24:00.517

我敢肯定，现在您可能已经想通了，但我会在这里为任何未来的 Javascript 初学者添加它。

Javascript 数组有一个内置函数，称为`forEach`允许您遍历数组中的每个元素。它用作专门用于数组的循环。它接受一个回调函数作为参数，如下所示：

```
let stringArr = ['dog', 'cat', 'lion', 'elephant'];

stringArr.forEach(function(element, counter) {
    console.log(counter+') '+element);
});

// Outputs:
   0) dog
   1) cat
   2) lion
   3) elephant 
```

如果您愿意，回调函数当然可以用箭头函数代替，但正如您所见，回调函数中的第一个参数 ( `element`) 是数组中的元素，第二个参数 ( `counter`) 跟踪数组中元素的索引。

我喜欢的`forEach`是它使访问数组元素比使用标准更容易（即使只是有点）`for-loop`。例如，当使用 , 遍历对象时`for-loop`，要访问数组中的各个元素，必须这样做`myArray[i].property`，但使用`forEach`, 可以简单地完成`element.property`。

`forEach`如果还没有完全点击，[这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)有一些额外的阅读。

# core-data - 使用合并的核心数据模型

> ID：10657667
> 
> 赞同：1
> 
> 时间：2012-05-18T18:09:24.960
> 
> 标签：core-data, models

我有一个应用程序，它使用两个合并的核心数据模型，通过使用模型配置映射到两个不同的数据存储（都是 Sqlite 存储）（每个模型中的每个唯一配置都映射到它自己的数据存储）。持久存储协调器在将相关数据保存到正确的存储方面做得很好。然而，问题在于，当最初由核心数据在第一次保存操作时创建的存储时，它们的数据模式看起来完全相同，并且对应于两个合并模型的联合。有什么方法可以控制核心数据，使其仅根据映射到该存储的配置/模型创建存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:29:55.747

我猜不是，因为如果核心数据可以将部分模式生成到不同的持久存储中，那么它可能会破坏它们之间的关系，从而导致问题。至少在当前阶段，我不认为苹果倾向于完成这一点。

# objective-c - 点击评价我们按钮并返回应用程序时崩溃

> ID：10657668
> 
> 赞同：0
> 
> 时间：2012-05-18T18:09:37.173
> 
> 标签：objective-c

我在我们的应用程序中有一个给我们评分的按钮。当你击中它时，我得到：

```
 [player stop];
    [player release];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://itunes.apple.com/us/app/appName/idnumber?ls=1&mt=8"]]; 
```

它会将我带到应用商店中的应用页面，但是如果我从设备上的主页按钮再次打开应用（返回应用），如果我点击任何其他按钮再次开始播放，我就会崩溃和：

```
erminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CAContextImpl stop]: 
```

我什至不知道在哪里搜索..有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:17:58.930

我建议从 Instruments 及其检查僵尸的模板开始。我认为这`player`不应该是`CAContextImpl`您的代码中的对象，但这就是发生错误时变量所指向的内容。

这表明您的播放器已经被释放并且内存管理系统已经重新使用了那块内存。

# internet-explorer - SSRS 报告有时会运行

> ID：10657672
> 
> 赞同：1
> 
> 时间：2012-05-18T18:09:51.643
> 
> 标签：internet-explorer, ssrs-2008

设置：

```
SQL 2008 R2
IIS 7.5 - hosted at RackSpace
1 report
2 sets of data (a,b)
A - 67000 rows of data
B - 15000 rows of data 
```

我可以毫无问题地对两组数据运行报告。

我的客户有时可以为 B 组运行报告，但不能为 A 运行......

```
Y = Yes, every time 
N = No, the report view control shows loading indefinitely
~ = Mixed, 1/4 tries will work.

IE = Internet Explorer
FX = Firefox
GC = Google Chrome
* + SSH = Using an ssh tunnel to my office.

C2B = Client to local dev box. 

      Report with data set A
          | IE | FX | GC | IE + SSH | FX + SSH |
Client    | N  | ~  | ~  | Y        | Y        |
My Office | Y  | Y  | Y  | Y        | Y        |
My house  | Y  | Y  | Y  | Y        | Y        |
C2B       | Y  | Y  | Y  | N/A      | N/A      |

      Report with data set B
          | IE | FX | GC | IE + SSH | FX + SSH |
Client    | Y  | Y  | Y  | Y        | Y        |
My Office | Y  | Y  | Y  | Y        | Y        |
My house  | Y  | Y  | Y  | Y        | Y        |
C2B       | Y  | Y  | Y  | N/A      | N/A      | 
```

我错过了什么？

- 编辑 -

使用 IE 开发人员工具中的“网络”选项卡，该报告向服务器发出三个 http GET 请求。当它失败时，第二个请求会无限期地陷入等待状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:22:52.970

[+1 为您的问题提供大量数据。]

似乎您对罪魁祸首有一个非常明确的指示。我会在客户端网络上的网络设备（代理或防火墙）上投入资金（仅少量），从而导致问题。

代理（或防火墙）可能对 http 连接有时间或数据限制，而您的大型报告导致超出这些限制。SSH 连接不会受到影响，流量将具有与报表服务器的 http 连接非常不同的特征。

在客户端站点的客户端计算机上设置一些监控，以查看哪些请求正在消亡以及何时消亡。[Fiddler](http://www.fiddler2.com/)是一个很好的答案。

# javascript - 使用 javascript 在 HTML5 中使用 dir="auto" 时获取 div 方向

> ID：10657674
> 
> 赞同：1
> 
> 时间：2012-05-18T18:09:58.150
> 
> 标签：javascript, html

我有一个 dir 属性设置为 auto 的 div。

我想使用javascript获取渲染方向

当我尝试 div.dir 时，我得到了“自动”值。有没有办法确定 div 是呈现为 rtl 还是 ltr？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:17:09.777

`var renderedDirection = window.getComputedStyle(theDiv, null).direction;`

# c# - SelectCommand.Connection 属性尚未初始化

> ID：10657676
> 
> 赞同：1
> 
> 时间：2012-05-18T18:10:05.420
> 
> 标签：c#, asp.net, mysql, datatable, odbc

好吧，我遇到了逻辑流程问题。由于某种原因，我声明的变量之一最终不会在当前上下文中存在。错误在第 18 行：

```
Exception Details: System.InvalidOperationException: Fill: SelectCommand.Connection property has not been initialized.

Source Error: 

Line 16:            myAdapter.Fill(tabledata);
Line 17:        } catch (Exception ex) {
Line 18:            throw (ex);
Line 19:        } finally {
Line 20:            con.Close(); 
```

这是完整的页面来源：

```
<% @Page Language="C#" Debug="true" %>
<% @Import Namespace="System.Data" %>
<% @Import Namespace="System.Data.Odbc" %>
<% @Import Namespace="System.Web.Configuration" %>
<!-- #include file="header.html" -->
<%
    string conString = WebConfigurationManager.ConnectionStrings["stampConnectionString"].ConnectionString;
    OdbcDataAdapter myAdapter = new OdbcDataAdapter();  
    DataTable tabledata = new DataTable();      
    using (OdbcConnection con = new OdbcConnection(conString)) {
        using (OdbcCommand com = new OdbcCommand("SELECT * FROM cheeseisdelicious", con)) {
            myAdapter.SelectCommand = com;
        }
        try {
            con.Open();
            myAdapter.Fill(tabledata);
        } catch (Exception ex) {
            throw (ex);
        } finally {
            con.Close();
        }
    }
    Response.Write("<table>");
    foreach (DataRow row in tabledata.Rows) {
        Response.Write("<tr>");
        foreach (var item in row.ItemArray) {
            Response.Write("<td>" + item + "</td>");
        }
        Response.Write("</tr>");
    }
    Response.Write("</table>");

%>
<!-- #include file="footer.html" --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:13:46.773

看看你周围的括号`usings`。内在的，紧随其后

```
 myAdapter.SelectCommand = com;
} <- this one! 
```

处置你的命令。

# windows-phone-7 - Windows Phone 7 的手写识别

> ID：10657679
> 
> 赞同：2
> 
> 时间：2012-05-18T18:10:51.053
> 
> 标签：windows-phone-7

我打算在下一次毕业报告中为WP7做一个手写识别应用程序。只剩下一个多月的时间还不够从头学习。我打算使用SVM，但也不太了解。如果有人这样做过，请指导我。太感谢了 ！

# sql-server - 更改出现在结果中的列的顺序，而不更改选择顺序

> ID：10657681
> 
> 赞同：1
> 
> 时间：2012-05-18T18:10:56.770
> 
> 标签：sql-server, sql-server-2008, tsql, resultset

我有一个查询，我选择了超过 15 项，因此在我的结果中获得（超过）15 列。我选择的一些东西是大的 CASE 陈述。T-SQL 当然显示你的结果比你在`SELECT`语句中列出的东西的顺序。

有没有办法让结果列以不同的顺序显示以帮助我审查它们，而无需

a）重新排序它们的选择方式（因为每次我想并排比较其他两列时都需要这样做）

ie Don't want to change: `SELECT a,b,c,d,e,f`to `SELECT f,d,a,b,c,e` since a f can each be 5-10 lines of code

b）将结果中的列拖放到彼此旁边，因为如果我希望第 2 列位于第 9 列和第 14 列的旁边，并且所有三列都位于结果表的末尾，那么那就是很多拖着做。

c) 知道所选内容的列号而不是列名

我正在寻找的是类似于：

```
Select
    vi.Name
   ,vi.Height
   ,vi.Power
   ,case when tt.losses < 3
         then 'Y'
         else 'N'
    end as MasteryKen
   ,tt.blahnum
   ,vi.blahtext
   ,vi.blahdate
   ,vi.blahcalc
   ,tt.blahflag
   ,vi.blahflag
   ,vi.blahcompare

From SenshiVitalInfo vi 
Join TatakauTable tt 
  on vi.namecd=tt.namecd

OrderOutputResults by tt.blahflag, vi.blahflag, * 
```

T-SQL (SQL Server 2008) 中是否存在执行最后一行的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:29:26.750

除了编辑 SELECT 列表顺序之外，TSQL 中没有“移动”列的功能，这是您能做的最好的事情：

```
SELECT
    d.Name
   ,d.Height
   ,d.Power
   ,d.MasteryKen   --<<can now move around single lines
   ,d.blahnum
   ,d.blahtext
   ,d.blahdate
   ,d.blahcalc
   ,d.blahflag
   ,d.blahflag
   ,d.blahcompare
FROM (Select
          vi.Name
         ,vi.Height
         ,vi.Power
         ,case when tt.losses < 3
               then 'Y'
               else 'N'
          end as MasteryKen
         ,tt.blahnum
         ,vi.blahtext
         ,vi.blahdate
         ,vi.blahcalc
         ,tt.blahflag
         ,vi.blahflag
         ,vi.blahcompare

      From SenshiVitalInfo vi 
      Join TatakauTable tt 
        on vi.namecd=tt.namecd
     ) d
--ORDER BY .... 
```

您可以将现有查询包装在派生表中，然后您可以在其中移动任何您想要的单行列名称。只需确保将任何 ORDER BY 移出派生表即可。

**如果您使用的是 SSMS**，您可以在“结果到网格”模式下查看您的结果集，只需拖放列标题即可滑动列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:16:36.040

不，这不存在。

如果您不喜欢移动案例语句，您可以将查询放入您从中选择的视图中，然后您选择列表将被简化，但这对我来说似乎是一种浪费。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T18:21:15.660

我不认为这个功能是任何 SQL 变体的一部分。

如果您使用 SQL IDE 查看结果集，您可能可以将您想要的列拖到一起，我曾经在 SSMS 中执行此操作。

否则安倍的答案就是你能做的。

# android - 在我的 Activity 中使用 Android 中的 Google API 时出错 java.lang.ClassNotFoundException

> ID：10657682
> 
> 赞同：1
> 
> 时间：2012-05-18T18:10:59.723
> 
> 标签：android, google-maps

我为我的大学做了一个测试程序，它按照教程使用谷歌地图。我在教程中做了所有事情，但是我的应用程序在显示任何消息“不幸的是 SocialFoot 已停止”之前就崩溃了。我尝试调试，似乎它甚至在进入 onCreate 方法之前就崩溃了。这是我的代码：

```
package it.univpm.dii.socialfoot;

import com.actionbarsherlock.app.SherlockMapActivity;
import android.os.Bundle;

public class SocialFootActivity extends SherlockMapActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
    }

} 
```

日志猫：

```
 05-18 19:29:59.343: E/AndroidRuntime(3405): FATAL EXCEPTION: main
05-18 19:29:59.343: E/AndroidRuntime(3405): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{it.univpm.dii.socialfoot/it.univpm.dii.socialfoot.activities.SocialFootActivity}: java.lang.ClassNotFoundException: it.univpm.dii.socialfoot.activities.SocialFootActivity
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.os.Looper.loop(Looper.java:137)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at java.lang.reflect.Method.invokeNative(Native Method)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at java.lang.reflect.Method.invoke(Method.java:511)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at dalvik.system.NativeStart.main(Native Method)
05-18 19:29:59.343: E/AndroidRuntime(3405): Caused by: java.lang.ClassNotFoundException: it.univpm.dii.socialfoot.activities.SocialFootActivity
05-18 19:29:59.343: E/AndroidRuntime(3405):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-18 19:29:59.343: E/AndroidRuntime(3405):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
05-18 19:29:59.343: E/AndroidRuntime(3405):     ... 11 more 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="it.univpm.dii.socialfoot"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_GPS" />

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name=".SocialFootActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

布局：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:15:50.203

日志表明应用程序正在尝试启动`it.univpm.dii.socialfoot.activities.SocialFootActivity`，但`SocialFootActivity`在包中`it.univpm.dii.socialfoot`。如果这发生在您的应用程序开始时（因为该活动被设置为启动活动），我会尝试清理和重建您的项目并重试。

# spring - Spring Security - 随机盐 + 哈希 + 自定义 UserDetailsS ervice

> ID：10657683
> 
> 赞同：0
> 
> 时间：2012-05-18T18:11:00.223
> 
> 标签：spring, spring-security

希望我的最后一个问题。到目前为止，我已经实现了我自己的自定义 UserDetails 和 UserDetailsS​​ervice 类，以便我可以传递在创建密码时使用的随机盐。密码的哈希是 SHA512。但是，在尝试登录时，我总是得到用户/密码组合不正确，我似乎无法弄清楚原因。

我将哈希和盐作为 blob 存储在数据库中，关于问题所在的任何想法？

```
Security-applicationContext.xml

<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
  xmlns:sec="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <sec:http auto-config='true' access-denied-page="/access-denied.html">
        <!-- NO RESTRICTIONS -->        
        <sec:intercept-url pattern="/login.html" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <sec:intercept-url pattern="/*.html" access="IS_AUTHENTICATED_ANONYMOUSLY"  /> 
        <!-- RESTRICTED PAGES -->
        <sec:intercept-url pattern="/admin/*.html" access="ROLE_ADMIN" />
        <sec:intercept-url pattern="/athlete/*.html" access="ROLE_ADMIN, ROLE_STAFF" />

        <sec:form-login login-page="/login.html"
                    login-processing-url="/loginProcess"
                    authentication-failure-url="/login.html?login_error=1"
                    default-target-url="/member" />
        <sec:logout logout-success-url="/login.html"/>
    </sec:http>

    <beans:bean id="customUserDetailsService" class="PATH.TO.CustomUserDetailsService"/>
    <beans:bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
        <beans:constructor-arg value="512"/>
    </beans:bean>

    <sec:authentication-manager>
        <sec:authentication-provider user-service-ref="customUserDetailsService">
            <sec:password-encoder ref="passwordEncoder"> 
                <sec:salt-source user-property="salt"/> 
            </sec:password-encoder>
        </sec:authentication-provider>
    </sec:authentication-manager>
</beans:beans> 
```

CustomUserDetails.java

```
public class CustomUserDetails implements UserDetails {

    private int userID;
    private String username;
    private String password;
    private Collection<GrantedAuthority> authorities;
    private boolean accountNonExpired;
    private boolean accountNonLocked;
    private boolean credentialsNonExpired;
    private boolean enabled;
    private String salt;

    public CustomUserDetails() {
    }

    public CustomUserDetails(int userID, Collection<GrantedAuthority> authorities, String username, String password, boolean accountNonExpired, boolean accountNonLocked, boolean credentialsNonExpired, boolean enabled, String salt) {
        this.userID = userID;
        this.authorities = authorities;
        this.username = username;
        this.password = password;
        this.accountNonExpired = accountNonExpired;
        this.accountNonLocked = accountNonLocked;
        this.credentialsNonExpired = credentialsNonExpired;
        this.enabled = enabled;
        this.salt = salt;
    }

    @Override
    public Collection<GrantedAuthority> getAuthorities() {
        return authorities;
    }

    public int getUserID() {
        return userID;
    }

    public void setUserID(int userID) {
        this.userID = userID;
    }

    @Override
    public String getPassword() {
        return password;
    }

    @Override
    public String getUsername() {
        return username;
    }

    @Override
    public boolean isAccountNonExpired() {
        return accountNonExpired;
    }

    @Override
    public boolean isAccountNonLocked() {
        return accountNonLocked;
    }

    @Override
    public boolean isCredentialsNonExpired() {
        return credentialsNonExpired;
    }

    @Override
    public boolean isEnabled() {
        return enabled;
    }

    public String getSalt() {
        return salt;
    }

    public void setAccountNonExpired(boolean accountNonExpired) {
        this.accountNonExpired = accountNonExpired;
    }

    public void setAccountNonLocked(boolean accountNonLocked) {
        this.accountNonLocked = accountNonLocked;
    }

    public void setAuthorities(Collection<GrantedAuthority> authorities) {
        this.authorities = authorities;
    }

    public void setCredentialsNonExpired(boolean credentialsNonExpired) {
        this.credentialsNonExpired = credentialsNonExpired;
    }

    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public void setSalt(String salt) {
        this.salt = salt;
    }
} 
```

CustomUserDetailsS​​ervice.java

```
public class CustomUserDetailsService implements UserDetailsService {

    private User_dao userDao;

    @Autowired
    public void setUserDao(User_dao userDao) {
        this.userDao = userDao;
    }

    @Override
    public CustomUserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {
        MyUser myUser = new MyUser();
        myUser.setUsername(username);
        try {
            userDao.getUserByUsername(myUser);
        } catch (Throwable e) {
        }
        if (myUser == null) {
            throw new UsernameNotFoundException("Username not found", username);
        } else {
            List<GrantedAuthority> authList = new ArrayList<GrantedAuthority>();
            authList.add(new GrantedAuthorityImpl(myUser.getUserRole().getAuthority()));

            int userID = myUser.getUserID();
            boolean accountNonExpired = true;
            boolean accountNonLocked = myUser.isNonLocked();
            boolean credentialsNonExpired = true;
            boolean enabled = myUser.isEnabled();
            String password = "";
            String salt = "";

            password = new String(myUser.getHash);
            salt = new String(myUser.getSalt());
            CustomUserDetails user = new CustomUserDetails(userID, authList, username, password, accountNonExpired, accountNonLocked, credentialsNonExpired, enabled, salt);
            return user;
        }
    }
} 
```

密码创建

```
public byte[] generateSalt() throws NoSuchAlgorithmException {
    SecureRandom random = SecureRandom.getInstance("SHA1PRNG");
    byte[] salt = new byte[20];
    random.nextBytes(salt);
    return salt;
}

public byte[] generateHash(byte[] salt, String pass) throws NoSuchAlgorithmException {
    MessageDigest digest = MessageDigest.getInstance("SHA-512");
    digest.update(salt);
    byte[] hash = digest.digest(pass.getBytes());
    return hash;
} 
```

调用方法：

```
byte[] salt = generateSalt();
byte[] hash = generateHash(salt, password);
Which I then store in the db. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:39:57.987

我遇到了同样的原始问题，但从未得到解答，因此希望将来可以节省一些时间：

Spring-Security 在比较摘要之前默认添加大括号。我错过了这一点并旋转了几个小时（d'oh）。

**确保存储（或生成）用大括号括起来的盐值**（即，当 Spring 说“{salt}”时，它们真诚地表示“打开大括号 + 你的盐值 + 关闭大括号”。

我想这对大多数人来说是显而易见的，但直到我最终调试它时我才注意到它。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-18T19:20:38.057

我认为值得指出的是，将用于每个用户密码的 salt 存储在数据库的 salt 列中（尽管很常见）存在漏洞。加盐的原因首先是为了防止字典攻击受损的数据库。如果攻击者可以访问您的数据库并且没有使用盐，他们可以将通用哈希算法应用于标准字典中的每个单词，以创建新的哈希字典。当他们在数据库中找到这些单词之一的匹配项时，他们会查阅自己字典中的映射，以找到在应用算法时产生该散列的原始未散列单词。瞧！攻击者有密码。

现在......如果您使用盐并且每个用户的盐都不同，那么您会在该攻击计划中投入巨大的活动扳手。但是...如果您为数据库中的每个用户存储盐（并通过将列命名为“盐”来使其显而易见），那么您实际上并没有过多地干扰这个攻击计划。

我所知道的最安全的方法是这个。

1.  在您的用户表中没有盐列。
2.  在 UserDetails 类上实现 getSalt() 方法。让它返回用户注册时设置的其他用户属性，并且永远不会更改。例如加入日期。将其与在 UserDetails 类中硬编码的字符串文字/常量连接起来。

通过这种方式，盐对每个用户都是唯一的。从数据库中看不出什么值被用作盐。即使攻击者猜到了部分盐的用途，他/她也需要访问您的源代码以了解盐的 REST。这意味着您的数据库和应用程序代码都需要在您最终遇到真正的问题之前受到损害。

假设您了解我刚才所说的所有内容的优点，这里还有一个相当大的优势，因为我刚才所说的实际上比您已经在做的更容易实现。当正确的事情变得更容易时，喜欢它！

# java - 从 uri 打开流

> ID：10657687
> 
> 赞同：17
> 
> 时间：2012-05-18T18:11:34.297
> 
> 标签：java, uri

我有一个 uri ( `java.net.URI`)，例如[http://www.example.com](http://www.example.com)。如何在 Java 中将其作为流打开？

我真的必须使用 URL 类吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T18:18:42.793

您将必须创建一个新`URL`对象，然后在`URL`实例上打开流。下面是一个例子。

```
try {

   URL url = uri.toURL(); //get URL from your uri object
   InputStream stream = url.openStream();

} catch (MalformedURLException e) {
   e.printStackTrace();
} catch (URISyntaxException e) {
   e.printStackTrace();
}catch (IOException e) {
   e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T18:17:07.380

`URLConnection connection = uri.toURL().openConnection()`

是的，您必须以[`URL`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection%28%29)一种或另一种方式使用该类。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-02-19T09:46:28.540

您应该使用 ContentResolver 来获取 InputStream：

```
InputStream is = getContentResolver().openInputStream(uri); 
```

代码在 Activity 对象范围内有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T18:19:05.383

`uri.toURL().openStream()`或者`uri.toURL().openConnection().getInputStream()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T18:15:40.400

您可以使用`URLConnection`读取给定 URL 的数据。- [URL连接](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html)

# matlab - 相位相关字符

> ID：10657688
> 
> 赞同：1
> 
> 时间：2012-05-18T18:11:34.390
> 
> 标签：matlab, octave

我正在尝试从黑白文本中检测字符。目前，文本是白色背景，只有几个黑色字符。我还创建了一些只包含一个字符的小图像。我想使用相位相关来检测初始文本中的字符。为此，我做了：

```
image = im2double(imread("text.png"));
si = size(image);

trans = fft2(image);

ch = im2double(imread("a.bmp"));
chtrans =  fft2(ch,si(1),si(2));        

outt = angle(trans).*conj(angle(chtrans));

outt = abs(ifft2(outt)).^2; 
```

当我标准化我的 outt 变量时，我检测到例如我的文本中的所有“a”，但图像是双重的：有正确的结果，但也有正确的结果翻转，两者都在同一个最终图像上。这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:17:56.290

这是傅里叶变换的一个特征——它可以同时检测正负频率分量；如果你愿意，你可以忽略负面的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:19:06.110

将角度反馈回 IFFT 不会隔离相位。您需要一个具有相同角度但幅度为 1 的复数。您*不需要*表示角度的实数。表达相位相关性的一种方法是对共轭乘法的结果进行归一化：

```
outt = trans.*conj(chtrans);
outt = outt ./ abs(outt);
outt = real(ifft2(outt)); 
```

还有其他表达方式，但无论如何，镜像都会消失。要记住的一件事是，理想情况下，您的结果应该是纯真实的。任何虚部都是由于舍入误差。如果你发现你需要对结果执行 abs() ，你可能做错了什么。

# asp.net - 从拒绝特定扩展更改为仅允许特定扩展

> ID：10657690
> 
> 赞同：0
> 
> 时间：2012-05-18T18:11:38.680
> 
> 标签：asp.net

我是 asp.net 的新手。我有这个代码：

```
function onSubmitForm() {
    var formDOMObj = document.frmSend;
    if (formDOMObj.attach1.value == "" && formDOMObj.attach2.value == "" && formDOMObj.attach3.value == "" && formDOMObj.attach4.value == "" )
        alert("Please press the Browse button and pick a file.")
    else
        return true;

    var extension = lcase(right(formDOMObj.attach1.value,4);  
    if (extension == ".exe") || extension == ".html")
        alert("Extension not allowed.")

    return false; 
```

}

我想将其更改为仅允许某些扩展而不是排除它们。我可以通过翻转 if 来做到这一点，但我想将其更改为使用数组或列表，但我不知道该怎么做......

有人可以通过指出我正确的方向来帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:20:09.673

您可以使用

```
if(array.Contains(extension)) 
```

# windows - 无法在子进程中使用基于 ZwCreateProcess 在 Windows 7 上模拟 fork 代码的 CreateProcess

> ID：10657699
> 
> 赞同：2
> 
> 时间：2012-05-18T18:12:33.780
> 
> 标签：windows, windows-7, process, operating-system, fork

我尝试使用`ZwCreateProcess`. 当我使用一些简单的测试程序时，它似乎可以工作。但是当我尝试`CreateProcess`在分叉的子进程中使用 API 创建一个新进程时。子进程暂停了一段时间（父进程也是如此）然后崩溃。你能给我一些提示吗？

以下是测试代码和fork参考实现代码：

```
/*****************************************************/
Test program code fragment:

if ((pid = fork()) < 0) {
    printf("fork error");
    return -1;
}

if (pid == 0) {
    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    ZeroMemory( &pi, sizeof(pi) );
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    //Child process will pause here for a while and then crash.
    if(CreateProcess(_T("C:\\Windows\\notepad.exe"), NULL, NULL, NULL,
                      FALSE, 0, NULL, NULL, &si, &pi))
    {
        CloseHandle( pi.hProcess );
        CloseHandle( pi.hThread );
    }else{
        //  fputs("cann't create process", fp2);
    }
}else{
    //Parent code
}

/*****************************************************************************************************/ 
```

以下是我使用来自互联网的参考 fork 实现代码：

```
int win32_fork()
{
    HANDLE hProcess = 0;
    HANDLE hThread = 0;
    BOOL bReturn;
    InheritAll();
    OBJECT_ATTRIBUTES oa = {sizeof oa};

    ZwCreateProcess(&hProcess, PROCESS_ALL_ACCESS, &oa,
                       0, 0, NULL, NULL, NULL);
    CONTEXT context = {CONTEXT_FULL
                         | CONTEXT_DEBUG_REGISTERS
                         | CONTEXT_FLOATING_POINT};
    ZwGetContextThread(NtCurrentThread(), &context);
    context.Eip = ULONG(child);

    MEMORY_BASIC_INFORMATION mbi;
    ZeroMemory( &mbi, sizeof( mbi ) );
    ZwQueryVirtualMemory(NtCurrentProcess(), PVOID(context.Esp),
                         MemoryBasicInformation, &mbi, sizeof mbi,
                         0);

    USER_STACK stack = {0, 0, PCHAR(mbi.BaseAddress) + mbi.RegionSize,
                           mbi.BaseAddress, mbi.AllocationBase};
    CLIENT_ID cid;
    ZwCreateThread(&hThread, THREAD_ALL_ACCESS, &oa,
                      hProcess, &cid, &context, &stack, TRUE);
    THREAD_BASIC_INFORMATION tbi;
    ZeroMemory( &tbi, sizeof( tbi ) );
    ZwQueryInformationThread(NtCurrentThread(),
                                ThreadBasicInformation,
                                &tbi, sizeof tbi, 0);
    PNT_TIB tib = (PNT_TIB)tbi.TebBaseAddress;
    ZwQueryInformationThread(hThread, ThreadBasicInformation,
                                &tbi, sizeof tbi, 0);
    ZwWriteVirtualMemory(hProcess, tbi.TebBaseAddress,
                            &tib->ExceptionList, sizeof tib->ExceptionList,
                            0);
    InformCsrss(hProcess, hThread,
               ULONG(cid.UniqueProcess), ULONG(cid.UniqueThread));

    ZwResumeThread(hThread, 0);
    ZwClose(hThread);
    ZwClose(hProcess);
    return int(cid.UniqueProcess);
} 
```

# html - 如何在 IE9 中访问 Event.target？

> ID：10657700
> 
> 赞同：11
> 
> 时间：2012-05-18T18:12:37.907
> 
> 标签：html, internet-explorer, events, internet-explorer-9, dom

HTML DOM 对象模型定义了一个[具有](https://stackoverflow.com/a/10637046/12597)[属性](https://stackoverflow.com/a/10637046/12597)`Event`的对象。[`target`](https://stackoverflow.com/a/10637046/12597)

查看 MSDN，Microsoft 记录了一个[`target`属性](http://msdn.microsoft.com/en-us/library/ie/ff974946%28v=vs.85%29.aspx)。它们还记录[`srcElement`](http://msdn.microsoft.com/en-us/library/ie/ms534638%28v=vs.85%29.aspx)为 Internet Explorer 早期版本的别名`target`：

> **target**属性类似于Windows Internet Explorer 8 及更早版本中的[**srcElement**](http://msdn.microsoft.com/en-us/library/ie/ms534638%28v=vs.85%29.aspx)。

* * *

所以我在 Internet Explorer 中，坐在`click`断点处：

```
<div class="day" onclick="divClick(this)">

function divClick(sender)
{
   var divCell = sender; 
```

在**F12 Tools**控制台我可以请求全局`event`对象：

```
>> event 
{
    actionURL : "",
    altKey : false,
    altLeft : false,
    behaviorCookie : 0,
    behaviorPart : 0,
    bookmarks : null,
    boundElements : {...},
    button : 0,
    buttonID : 0,
    cancelBubble : false
    ...
} 
```

我可以要求`event.srcElement`对象：

```
>> event.srcElement 
{
    align : "",
    noWrap : false,
    dataFld : "",
    dataFormatAs : "",
    dataSrc : "",
    currentStyle : {...},
    runtimeStyle : {...},
    accessKey : "",
    className : "header",
    contentEditable : "inherit"
    ...
} 
```

但是`event.target`是空的：

```
>> event.target 
```

如果我*看* `event`，没有`target`财产：

![在此处输入图像描述](../Images/7ea8356473956958fb17c32d8ac92163.png)

那么如何在 Internet Explorer 中访问对象的`target`属性`event`（9（文档模式：IE9 标准（浏览器模式：IE9）））？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T18:26:42.047

事件.目标？

您是否需要检查它并将其分配给一个变量并使用它来代替..

```
 var target = event.target ? event.target : event.srcElement; 
```

可能没有抓住重点……

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T06:31:33.310

如果要`event.target`在 IE9 中使用，则需要使用`addEventListener()`-method 将事件处理程序分配给元素。

```
<div id="day" class="day"></div>

document.getElementById('day').addEventListener('click',divClick,false);

function divClick(e){
   alert(e.target);
   divCell=this;
   :
} 
```

`divClick()`您可以`day`简单地使用关键字`this`来引用。参数`e`包含对事件对象本身的引用。

顺便说一句，在 MSDN 中，您可能会找到更适合[Web 开发](http://msdn.microsoft.com/en-us/library/hh772401%28v=vs.85%29)而不是 Windows 开发的 IE 文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-23T13:11:35.437

这是我的调查（在 IE9、IE10 和 IE11 上的 Edge 浏览器模式下测试，不幸的是，IE8 破坏了 jsFiddle）。在 IE9 模式（IE11）下 event.target 可以作为函数的局部变量使用，不知道它是否与真正的 IE9 不同。

您无法`event`在任何具有内联功能的浏览器中访问。问题是当你这样做时

```
<element onclick="someFunc(this)"> 
```

并且您`this`作为参数**`this === event.target`**（或 srcElement）传递，即 a **`[HTML Object]`**，而不是 a **`[Event Object]`**。

所以在实践中，这意味着：

```
<div id="foo" onclick="alert(this)"></div> 
```

是相同的：

```
// note that onclick perfectly works, you don't necessarily need addEventListener
document.getElementById('foo').onclick = function(e) { alert(e.target) } //or
document.getElementById('foo').addEventListener('click', function(e) { alert(e.target) }, false); 
```

因此，您可以直接内联作为参数访问事件目标，也可以通过 javascript 作为对象参数的`target || srcElement`属性访问事件目标。您可以在这里自己测试结果：http: [//jsfiddle.net/kevinvanlierde/tg6FP/2/](http://jsfiddle.net/kevinvanlierde/tg6FP/2/)

**注意：**如果您附加内联，脚本的位置至关重要（就在关闭正文标记之前）
**注意：**如果您附加内联，鉴于这`event.target`是传递对象的“根”，您无法访问其他事件属性，例如`event.type`.
**注意：**小心使用 IE 开发者模式。我知道它是骗人的（例如，在您单击“编辑为 HTML”之前，无法在元素树中正确显示 DOM 内容）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-20T22:13:29.587

存档此文件的简单方法是使用：

```
var target = event.target || event.srcElement; 
```

*   避免使用三元运算符。

其工作方式是因为：

1.  测试是否`event.target`为[真](https://developer.mozilla.org/en-US/docs/Glossary/Truthy)，如果在该浏览器中不存在，则评估为假。
2.  如果计算结果为 false，那么它将移动到下一个运算符，在这种情况下是`event.srcElement`.

有了这个，您最终将得到执行代码的当前浏览器上存在的第一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-26T15:37:36.520

这里的问题不是你没有使用`addEventListener()`（因为老派`.onclick`-assignment 也有效）。问题是`divClick`got `this`（等于`eventobj.target`），但你想要整个`eventobj`.

在以下两种情况下，您只能获得`eventobj.target`名称，`this`并且无法访问传递给 onclick-handler 的参数。

```
<div id=xyz onclick="divClick(this);">
document.getElementById("xyz").onclick = function () { divClick(this); }; 
```

`eventobj`您可以使用以下行获得整个正常参数：

```
document.getElementById("xyz").onclick = divClick; 
```

这是在 IE9+ 和其他浏览器中的 xyz 元素上启动事件的方式：

```
document.getElementById("xyz").onclick(eventobj) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-06-23T09:06:46.563

利用：

```
var target = (event.target !== undefined)? event.target.name : event.srcElement.tagName; 
```

然后：

```
if ( target === 'A' || target === '...') {
    ...
} 
```

或：简单使用：

```
var target = event.srcElement.tagName; 
```

在 Chrome 35 上测试 :)

# python - 将日期字符串转换为日期时间对象

> ID：10657703
> 
> 赞同：1
> 
> 时间：2012-05-18T18:12:51.310
> 
> 标签：python

采用以下日期输入：

```
01/01/2012, 1-1-2012, 2012-01-20, 01012012, 20120101, 1.1.2012, 01.01.2012 
```

我将如何创建一个将任何典型日期字符串转换为 datetime.date 对象的函数。我想你会先去掉任何非数字字符，然后做一些正则表达式识别。

让我们假设如果年在前，那么月在第二，如果年在最后（第三），那么月在前。这里最好的功能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:39:42.947

[`strptime`](http://docs.python.org/library/time.html#time.strptime)与此[格式表](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)和[`split`](http://docs.python.org/library/stdtypes.html#str.split)一些`try/catch`块一起使用。

# ruby - 如果存储桶中已存在确切文件，请勿上传到 aws s3

> ID：10657707
> 
> 赞同：4
> 
> 时间：2012-05-18T18:13:21.467
> 
> 标签：ruby, upload, amazon-s3, gem, last-modified

我想定期将图像从本地目录推送到 s3，但我不想覆盖之前推送的文件，此后没有更改。以下是我考虑过的选项：

1.  比较内容长度。缺点：可以想象文件的新版本可能具有相同的内容长度但不同。

2.  将本地修改信息存储在 s3 元数据中，以便在推送时进行比较。缺点：这需要一个 POST 和一个 PUT，使上传的数据翻倍，增加了 push 任务的开销，并且在不同机器上运行时可能会不一致。

一定会有更好的办法。我错过了什么？

PS 我在 rake 任务中使用 aws-s3 gem。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-08T08:36:58.850

一个很好的工具是带有 --sync 选项的 s3cmd。[http://s3tools.org/s3cmd](http://s3tools.org/s3cmd)

# php - 变量不能以邮件形式工作？

> ID：10657708
> 
> 赞同：0
> 
> 时间：2012-05-18T18:13:24.600
> 
> 标签：php, forms, email, variables

我有一个带有 4 个 id（名称、电子邮件、消息、主题）的 HTML 表单、一个声明了所有变量的 js 和一个应该发送邮件的 PHP。

HTML

```
 <form id="formail" method="post" action="">
                <input type="text" id="nome" name="nome"  value="" size="22" /><br />
                <input type="text" id="email" name="email"  value="" size="54" /><br />
                <textarea id="messaggio" name="messaggio" rows="1" cols="55" style="resize: none;"></textarea><br />
                <input type="text" id="subject" name="subject"  value="" size="22" /><br />
                <input type="submit" id="send" name="send" value="" style="cursor: pointer"/>
                <br />
                <div id="answer"></div>
            </form> 
```

这是js

```
 var valid = '';
    var isr = ' requested.</h6>';
    var name = $("#nome").val();
    var mail = $("#email").val();
    var subject = $("#subject").val();
    var messaggio = $("#messaggio").val(); 
```

（按照关于姓名和邮件以及发送功能的控制）

这是php

```
 $mail = trim($_POST['mail']);
    $name = $_POST['name'];
    $text = $_POST['messaggio'];
    $subject = $_POST['subject'];
    $ip = $_SERVER['REMOTE_ADDR'];

    $to = "admin@test.com";

    $message = "Username: ".$name.", ".$mail.".<br />";
    $message .= "Subject: ".$subject.".<br />";
    $message .= "Messaggio: <br />".$text."<br /><br />";
    $message .= "IP: ".$ip."<br />";
    $headers = "From: ".$mail." \r\n";
    $headers .= "Reply-To: ".$mail." \r\n";
    $headers .= "MIME-Version: 1.0 \n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1 \n";

     if(mail($to, $subject, $message, $headers)){
        echo "<h6>Message sent!</h6>";
      } 
```

我只发布了相关代码。当我点击发送时，我会收到邮件，但是“主题”字段是空白的，好像变量“主题”已被忽略。

请你帮助我好吗？我开始学习 PHP，但我还是个新手。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:39:20.333

你的邮件功能在哪里？

使用以下邮件功能：

```
mail($to-mail,$subject,$message,$header); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:58:13.527

这里有两个关键点：

a) 不确定您使用什么函数来实际发送邮件，但假设 PHP mail() 您将需要使用 $subject 作为第二个参数。

b) 如果您在开放网络上发布此内容，您将被垃圾邮件发送者用作开放中继。

您容易受到的攻击称为“标头注入”。简而言之，如果我提交我的“邮件”值，因为`myemail@example.org%0ABcc:poorsap@example.com`脚本将添加一个额外的行（这`%0A`是一个换行符），并为我喜欢的许多电子邮件（在这种情况下）提交一个带有额外密件抄送标题的 mail( `poorsap@example.org`)。

请仔细阅读：[http](http://www.securephpwiki.com/index.php/Email_Injection) ://www.securephpwiki.com/index.php/Email_Injection并考虑使用备用库来避免此问题。

# macos - Mac上的Qt拼写检查

> ID：10657709
> 
> 赞同：0
> 
> 时间：2012-05-18T18:13:26.673
> 
> 标签：macos, cocoa, qt, spell-checking

我正在移植一个仅限 Windows 的应用程序以在 Mac 上运行以及使用 Qt。我们有一个第三方库，用于在 OS X 上不可用的 windows 上进行拼写检查。我想配合`NSSpellchecker`使用 Objective-C 或 Objective-C++。我环顾四周，找到了使用自定义小部件的一半解决方案。我们希望将其抽象到一个检查而不是小部件的类中，以便不必根据操作系统使用不同的小部件。我对自己编写检查类的能力充满信心，这不应该是一个问题。

我的问题是我是否需要创建一个包含建议/选项的自定义 UI，或者 OS X 是否有一个我们可以绑定的普通拼写语法面板？

有没有人有在 Mac 上使用 Qt 进行拼写检查的经验？我们正在使用 Qt 4.8+ 并针对 Win7 / Snow Leopard。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:31:55.263

要回答您的问题，我不知道，我认为没有股票 Qt 小部件可以做到这一点。此列表几乎涵盖了您可以使用的所有 Qt 小部件：[在此处输入链接描述](http://qt-project.org/doc/qt-4.8/qtgui.html)

作为一种解决方案，您甚至可以在 Windows 上直接使用 hunspell ( [http://hunspell.sourceforge.net/ )。](http://hunspell.sourceforge.net/)它用于 Libre 和 Open Office，也用于 MacOSX。

要实现它，您可以使用 QCompleter（[在此处输入链接描述](http://qt-project.org/doc/qt-4.8/qcompleter.html)）。

# c++ - 是否可以检测 C++ 中的命名空间成员资格？

> ID：10657711
> 
> 赞同：4
> 
> 时间：2012-05-18T18:13:31.657
> 
> 标签：c++, reflection, macros, c++11, language-lawyer

对于 C++ 类型，`<type_traits>`标头为我们提供了许多有用的编译时反射功能。例如`std::is_base_of<B, D>::value`，在编译时确定是否`B`是`D`.

我想知道是否可以按照类似的方式检测命名空间成员资格？例如，给定一个`N`具有类型的名称空间，有没有一种方法可以使用表单的宏表达式`T`来确定是否`T` 包含在其中。`N``IS_NAMESPACE_MEMBER_OF(T,N)`

我更喜欢通过任何类型的 SFINAE / ADL 类型的技巧来获得编译时答案。或者，如果不可能，某种推理为什么标准不允许这样做。

一个不可移植和运行时的 hack 将是 regex `typeid(T).name()`for `N`，但这相当乏味而且不是在编译时。

**EDIT1**：正如 K-ballo 所指出的，命名空间不能用作模板参数，因此类型特征似乎是不可能的。

**EDIT2**：这是K-ballo暗示的骨架：在那里可以（或不能？）进行哪些漂亮的测试？

```
#define IS_NAMESPACE_MEMBER_OF(T, N) \
                                     \
// global declaration                \
void test(T);                        \
                                     \
// namespace declaration             \
namespace N {                        \
    void test(T);                    \
}                                    \
                                     \
// some clever name lookup / sizeof / SFINAE test! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:15:29.580

命名空间不是有效的模板参数，因此它永远不可能是类特征。也许你可以用宏做一些晦涩的事情。您可以在测试命名空间中注入函数并使用 ADL 和`sizeof`/`decltype`技巧来查看选择了哪个重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-24T17:49:53.873

您可以通过 ADL 从类型中测试是否`namespace`可访问（由编译器查找）。

假设我们要检查类型是否`A`来自`namespace foo`，我们可以尝试使用只出现在`foo`（例如泛型函数`foo::foo_inner_func(T&&)`）中的类型，通过使用`A`来查看我们是否到达命名空间。如果我们在 SFINAE 上下文中执行此操作，那么这可能会导致我们正在寻找答案：是否`namespace foo`可以通过`A`.

在许多情况下，这将是类型是否属于此命名空间的答案，但在某些情况下，它可能会将命名空间标识为可由 ADL 访问，即使该类型并非来自此命名空间。例如，if `A`is from`namespace foo`和`B`which 派生自`A`is from 另一个命名空间，仍然通过 ADL `B`“看到” 。`foo`也通过 ADL `std::vector<A>`“看到” `foo`（也通过 ADL“看到” `std`）。

这里已经提出了使用 ADL 的想法：[检查类型是否来自特定的命名空间](https://stackoverflow.com/questions/34974844/check-if-a-type-is-from-a-particular-namespace)。

这是允许查询*任何类型*（几乎）*任何命名空间*（几乎）的宏版本：

```
#define create_ns_checker(ns) \
namespace ns { \
    template <typename T> \
    constexpr std::true_type ns##FindmeNsADLHelper(T&&); \
} \
namespace ns##_type_traits { \
    class ns##SecondBestMatchType {}; \
    class ns##BestExactMatchType : public ns##SecondBestMatchType {}; \
    namespace helpers { \
        template <typename T> \
        auto TestNs(ns##_type_traits::ns##BestExactMatchType) \
               -> decltype(ns##FindmeNsADLHelper(std::declval<T>())); \
        template <typename T> \
        auto TestNs(ns##_type_traits::ns##SecondBestMatchType) \
               -> std::false_type; \
    } \
    template <typename T> \
    constexpr bool ns##IsFindmeNs() { \
        return decltype(helpers::TestNs<std::decay_t<T>> \
                           (ns##BestExactMatchType{}))::value; \
    } \
}

#define is_in_ns(Type, ns) \
(ns##_type_traits::ns##IsFindmeNs<Type>()) 
```

一个小型打印实用程序：

```
#define print_is_in_ns(Type, ns) \
[]() { \
    std::cout << #Type << " in " << #ns << ": "  \
              << is_in_ns(Type, ns) << std::endl; \
}() 
```

使用宏创建检查器：

```
create_ns_checker(findme)
create_ns_checker(other)
create_ns_checker(std) 
```

检查以下类型：

```
namespace other {
    struct B {};
}

struct C {};

namespace findme {
    struct A {};

    namespace inner {
        struct A {};
    }
    create_ns_checker(inner)
} 
```

在 findme 上下文中进行测试：

```
namespace findme {
    void test() {
        using namespace other;
        // add the below in and the results change, as it should!
          // using inner::A;
        using std::string;
        std::cout << std::boolalpha;
        print_is_in_ns(int, std);          // false
        print_is_in_ns(string, std);       // true
        print_is_in_ns(A, findme);         // true
        print_is_in_ns(A, inner);          // false
        print_is_in_ns(inner::A, findme);  // false
        print_is_in_ns(inner::A, inner);   // true
        print_is_in_ns(B, findme);         // false
        print_is_in_ns(B, other);          // true
        print_is_in_ns(C, findme);         // false
    }
} 
```

主要测试：

```
int main() {
    using std::string;
    using findme::A;
    std::cout << std::boolalpha;
    print_is_in_ns(int, std);                 // false
    print_is_in_ns(string, std);              // true
    print_is_in_ns(string, findme);           // false
    print_is_in_ns(findme::A, findme);        // true
    print_is_in_ns(findme::inner::A, findme); // false
    print_is_in_ns(other::B, findme);         // false
    print_is_in_ns(other::B, other);          // true
    print_is_in_ns(C, findme);                // false
    print_is_in_ns(std::vector<A>, findme); // falsely says true :-(
    print_is_in_ns(std::vector<A>, std);      // true
    std::cout << "-----------------" << std::endl;
    findme::test();
} 
```

代码：[https ://godbolt.org/z/8Ed89v](https://godbolt.org/z/8Ed89v)

# jquery - JQuery Fancybox - 多个内联实例

> ID：10657713
> 
> 赞同：2
> 
> 时间：2012-05-18T18:13:37.790
> 
> 标签：jquery, fancybox

我正在尝试调用多个内联项，当我单击它们时，它只显示第一个的内容！我正在拔头发，请帮忙。

我的 Javascript 调用：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.fancybox').fancybox();
    });
</script> 
```

我的 HTML：

```
<div class="atrack">
                <img src="images/albumcovers/Italian-Japanese-lg.jpg" class="trackcover" width="66" height="66" />
                <p class="artist">Italian Japanese</p>
                <p class="trackname">Two Islands</p>
                <img src="images/buynow-artinfo.jpg" border="0" usemap="#Map" class="actionbtns" />
                <map name="Map" id="Map">
                  <area shape="rect" coords="1,-2,87,26" href="#" />
                  <area shape="rect" coords="-2,27,83,57" class="fancybox" href="#track1" />
                </map>
            </div>

            <div class="atrack">
                <img src="images/albumcovers/Yann-Tiersen-lg.jpg" class="trackcover" width="66" height="66" />
                <p class="artist">Yann Tierson</p>
                <p class="trackname">The Trial</p>
                <img src="images/buynow-artinfo.jpg" border="0" usemap="#Map" class="actionbtns" />
                <map name="Map" id="Map">
                  <area shape="rect" coords="1,-2,87,26" href="#" />
                  <area shape="rect" coords="-2,27,83,57" class="fancybox" href="#track2" />
                </map>
            </div>

<div class="gcr-artistinfo" id="track1" style="width: 580px; overflow: hidden; display: none;">
    <h2>Italian Japanese</h2>
    <img class="largealbum" src="images/albumcovers/Italian-Japanese-lg.jpg" />
    <p><span>Song:</span> Two Islands</p>
    <p><span>Album:</span> (Single)</p>
    <p><span>From:</span> Southern California</p>
    <img src="images/artist-info-opts.jpg" border="0" usemap="#Map2" class="artistoptions" />
    <map name="Map2" id="Map2">
      <area shape="rect" coords="-11,2,156,26" href="http://itunes.apple.com/us/album/nyc-single/id515976173?ign-mpt=uo%3D4http://" target="_blank" />
      <area shape="rect" coords="-13,26,153,46" href="http://www.italianjapanese.com/" target="_blank" />
      <area shape="rect" coords="-4,47,156,77" href="#" target="_blank" />
    </map>
</div>

<div class="gcr-artistinfo" id="track2" style="width: 580px; overflow: hidden; display: none;">
    <h2>Yann Tiersen</h2>
    <img class="largealbum" src="images/albumcovers/Yann-Tiersen-lg.jpg" />
    <p><span>Song:</span> The Trial</p>
    <p><span>Album:</span> Skyline</p>
    <p><span>From:</span> France</p>
    <img src="images/artist-info-opts.jpg" border="0" usemap="#Map2" class="artistoptions" />
    <map name="Map2" id="Map2">
      <area shape="rect" coords="-11,2,156,26" href="http://yanntiersen.sandbag.uk.com/Store/DisplayItems.html" target="_blank" />
      <area shape="rect" coords="-13,26,153,46" href="http://www.yanntiersen.com/" target="_blank" />
      <area shape="rect" coords="-4,47,156,77" href="#" target="_blank" />
    </map>
</div> 
```

感谢您的任何帮助/建议！我很感激 ：）

*   博

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:05:16.897

问题是你不能使用相同的`ID`和`name`两个不同的`area maps`。两个链接都附加到相同的链接`map`，`area`因此它将始终使用一个链接。

尝试为第二个实例的地图分配不同的`ID`和`name`

```
<img src="images/buynow-artinfo.jpg" border="0" usemap="#Map01" class="actionbtns" />
<map name="Map01" id="Map01">
 <area shape="rect" coords="-2,27,83,57" class="fancybox" href="#track1" /> 
```

和

```
<img src="images/buynow-artinfo.jpg" border="0" usemap="#Map02" class="actionbtns" />
<map name="Map02" id="Map02">
 <area shape="rect" coords="-2,27,83,57" class="fancybox" href="#track2" /> 
```

它更像是一个 html 语义问题，而不是一个花哨的问题

# javascript - 为 Web 应用程序增加延迟

> ID：10657716
> 
> 赞同：3
> 
> 时间：2012-05-18T18:13:39.303
> 
> 标签：javascript, asp.net, latency

我想通过增加 ajax 请求的延迟来减慢我的应用程序。我有两个选择：在 javascript 中执行和在服务器端执行。使用 javascript，我可以轻松地在我的请求上添加一个 setTimeout，但是大约有 30 个不同的请求，我想知道是否有更好的方法，代码更少。

我想减慢服务器端的ajax请求。最好的方法是什么？我正在使用大约 25 种不同的 asmx Web 服务（很快将转换为 wcf），我想知道如何使所有请求都有 1000 毫秒的延迟。

我的目标是尽可能少地更改代码，以便我可以通过尽可能少的更改来打开/关闭此功能。

感谢您的建议。

*如果你想知道为什么：我在我的本地机器上运行。我要做一个用户测试会话，我需要模拟真正的 ajax 请求。没有延迟，ajax 请求几乎是瞬间发生的。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:25:13.307

你可以添加一个

```
System.Threading.Thread.Sleep(1000) 
```

在`OnRequestBegin`-Handler 或任何你可以在执行实际工作之前拦截请求的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:15:49.427

***如果***您使用 jquery 进行 ajax 调用，只需进入 jquery 代码文件并在那里添加延迟。那行得通吗？

在主 jquery 文件中查找这一行：

```
ajax: function( url, options ) { 
```

在之后添加此代码：

```
var ms = 1000 //wait time in milliseconds
ms += new Date().getTime();
while (new Date() < ms) { } 
```

`ms`是等待的毫秒数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:17:10.500

您可以在服务器端代码响应 ajax 请求之前挂钩超时事件。至少你的 ajax 与潜在响应的交互是真实的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:18:44.477

我会以您控制的方式放置一个 http 代理，并且可以使其变慢。

因为我最了解 Perl，所以我会使用[http://metacpan.org/pod/HTTP::Proxy 之](http://metacpan.org/pod/HTTP%3a%3aProxy)类的东西，并添加一个过滤器方法，该方法只需要等待一秒钟。

# spring - 服务器返回 HTTP 响应代码：400 使用 Spring-Security AuthenticationProvider

> ID：10657720
> 
> 赞同：1
> 
> 时间：2012-05-18T18:14:01.247
> 
> 标签：spring, http, authentication, spring-security

我正在构建一个 RESTful 身份验证服务，但无法连接到它。尝试检索响应时，我得到了可怕的*“服务器返回 HTTP 响应代码：400” 。*这似乎很奇怪。我想我在发送请求时会收到这个错误。

我将此服务用作 Spring-Security AuthenticationProvider 的一部分。我目前正在使用模拟器而不是实际服务进行测试。它不会连接到模拟器或服务。

下面是调用方法：

```
public <T> T invoke(String service, Object request, Class<T> responseType) throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    URL url = new URL("http://localhost:8888/simulator/rest" + service);
    HttpURLConnection uc = (HttpURLConnection) url.openConnection();

    uc.setRequestMethod("POST");
    uc.setRequestProperty("Content-Type", "application/json;charset=UTF-8");
    uc.setDoOutput(true);
    uc.setDoInput(true);
    uc.connect();

    OutputStream out = uc.getOutputStream();
    mapper.writeValue(out, request);
    out.close();

    return mapper.readValue(uc.getInputStream(), responseType);
} 
```

下面是调用这个方法的代码：

```
UsernamePasswordAuthenticationToken token = 
    new UsernamePasswordAuthenticationToken("thomas", "thomas");
UsernamePasswordAuthenticationToken response = 
    invoke("/authenticate", token, UsernamePasswordAuthenticationToken.class); 
```

这是被调用的模拟器方法：

```
@RequestMapping(value = "/authenticate", method = RequestMethod.POST)
@ResponseBody
public UsernamePasswordAuthenticationToken authenticate(
    @RequestBody UsernamePasswordAuthenticationToken userNameAndPassword) {

    String userName = (String) userNameAndPassword.getPrincipal();
    String password = (String) userNameAndPassword.getCredentials();
    if (userName.equalsIgnoreCase("thomas")) {
        if (userName.equals(password)) {
            UsernamePasswordAuthenticationToken response = 
                new UsernamePasswordAuthenticationToken(
                    userName,
                        password, 
                        new ArrayList<GrantedAuthority>());
                return response;
            }
        }
        return new UsernamePasswordAuthenticationToken(userName, password);
    } 
```

导致错误的行是：

```
mapper.readValue(uc.getInputStream(), responseType); 
```

如果看不到此代码的任何问题。应该是看得太久了。需要新的眼光来看待这个问题。

顺便说一句，此 REST 服务和模拟器已成功用于其他操作。

**附加信息：**

错误发生在 uc.getInputStream() 调用中。HttpURLConnection.inputStream = null。

此外，请求的标头如下：

如果这有帮助，以下是此请求的标头：

```
[WARN] 400 - POST /simulator/rest/authenticate (127.0.0.1) 1417 bytes
   Request headers
      Content-Type: application/json;charset=UTF-8
      X-Tenant: 1
      Authorization: 0000013770b132a1dfcbfe0a694542b244534e0e406cfa857660c904daa89af91d0ac769
      Cache-Control: no-cache
      Pragma: no-cache
      User-Agent: Java/1.6.0_26
      Host: localhost:8888
      Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
      Connection: keep-alive
      Content-Length: 112
   Response headers
      Set-Cookie: JSESSIONID=1r02p7yvm8mzs;Path=/
      X-UA-Compatible: IE=9
      Content-Type: text/html; charset=iso-8859-1
      Content-Length: 1417 
```

这是我的令牌代码：

```
import java.util.List;

import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.GrantedAuthority;

public class SerializedAuthenticationToken extends UsernamePasswordAuthenticationToken {
    private static final long serialVersionUID = 2783395505630241326L;

    private Object principal;
    private Object credentials;

    /**
     * no-arg constructor to satisfy Serializable.
     */
    public SerializedAuthenticationToken() {
        super(null, null);
    }

    /**
     * constructor.
     */
    public SerializedAuthenticationToken(Object principal, Object credentials) {
        super(null, null);
        setPrincipal(principal);
        setCredentials(credentials);
    }

    /**
     * constructor with List<GrantedAuthorities>.
     */
    public SerializedAuthenticationToken(Object principal, Object credentials, List<GrantedAuthority> authorities) {
        super(null, null, authorities);
        setPrincipal(principal);
        setCredentials(credentials);
    }

    public Object getPrincipal() {
        return principal;
    }

    public void setPrincipal(Object principal) {
        this.principal = principal;
    }

    public Object getCredentials() {
        return credentials;
    }

    public void setCredentials(Object credentials) {
        this.credentials = credentials;
    }

    public void setName(Object name) {

    }
} 
```

我现在也得到了一个新的堆栈跟踪：

```
org.codehaus.jackson.map.JsonMappingException: Cannot set this token to trusted - use constructor which takes a GrantedAuthority list instead (through reference chain: com.mckesson.shared.util.SerializedAuthenticationToken["authenticated"]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:12:50.307

您需要创建一个虚拟令牌来执行此操作。这是我的测试来验证它：

```
public class JacksonTest {

@Test
public void test() throws Exception {

    ObjectMapper mapper = new ObjectMapper();

    UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken("thomas", "thomas");
    String tokenStr = mapper.writeValueAsString(token);
    /* WON'T WORK
     UsernamePasswordAuthenticationToken auth = mapper.readValue(tokenStr, UsernamePasswordAuthenticationToken.class);
     */
    MyToken auth = mapper.readValue(tokenStr, MyToken.class);
    String authStr = mapper.writeValueAsString(auth);

    Assert.assertThat(tokenStr.equals(authStr), is(true));
}

private static class MyToken extends UsernamePasswordAuthenticationToken {
    private Object principal;
    private Object credentials;

    private static final long serialVersionUID = -5045038656629236029L;

    public MyToken() {

        super(null, null);
    }

    public MyToken(Object principal, Object credentials) {

        super(null, null);
        this.principal = principal;
        this.credentials = credentials;
    }

    /**
     * @return the principal
     */
    public Object getPrincipal() {
        return principal;
    }

    /**
     * @param principal the principal to set
     */
    public void setPrincipal(Object principal) {
        this.principal = principal;
    }

    /**
     * @return the credentials
     */
    public Object getCredentials() {
        return credentials;
    }

    /**
     * @param credentials the credentials to set
     */
    public void setCredentials(Object credentials) {
        this.credentials = credentials;
    }

    public void setName(Object name) {

    }

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:42:42.863

无法发现确切的问题，但我认为问题的一个原因是您不必要地下降到这样一个低级 API 来完成一些非常合理的抽象存在的事情。查看 Spring 的 RestTemplate 以了解更优雅的方法或针对 RESTful 服务编写客户端代码。无论你做错了什么，RestTemplate 都有可能做对。

# appcelerator - 如何在 appcelerator 中制作动画 imageView？

> ID：10657721
> 
> 赞同：2
> 
> 时间：2012-05-18T18:14:05.010
> 
> 标签：appcelerator, animated-gif

```
 loader_array = [];
  for (var i=1; i <= 24; i++) {
    loader_array.push('/images/system/block_loaders/' + i + '.png');
  };

  var loadingSpinner = Ti.UI.createImageView({
    images: loader_array,
    duration: 100,
    repeatCount: 100,
    opacity: 0.5
  });
  self.add(loadingSpinner); 
```

当我这样做时，我什么也得不到。但是，如果我从该集合中制作一个图像并使用`image`而不是`images`，它可以正常工作。那么我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T04:15:08.027

[如果 Works](http://developer.appcelerator.com/question/68971/does-imageview-support-gif-file) 由 brian kurzius 回答，试试这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T21:16:53.540

安卓还是iOS？

如果 android 并设置了持续时间，则您已调用 start 方法进行动画处理。

# sencha-touch-2 - Sencha Touch 2.0 清单查询字符串

> ID：10657722
> 
> 赞同：1
> 
> 时间：2012-05-18T18:14:34.507
> 
> 标签：sencha-touch-2

我正在将我的应用程序设置为离线运行，但我遇到了障碍。我的所有文件都被缓存了，但我在 Safari 控制台中注意到该应用程序正在向文件名添加查询字符串，因此未加载正确的文件。在 Safari 中，链接看起来像这样

```
http://serverpath/resources/data/data.json?_dc=1337372230084&node=root&page=1&start=0&limit=25 
```

有什么方法可以防止查询字符串被添加？我的数据存储代码如下。

```
Ext.define('App.store.Sections', {
    extend: 'Ext.data.TreeStore',

    requires: [
        'App.model.Sections'
    ],

    config: {
        autoLoad: true,

        model: 'App.model.Sections',

        proxy: {
            type: 'ajax',
            url: 'resources/data/data.json',
            reader: {
                type: 'json',
                rootProperty: 'items'
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:25:36.340

请参阅[Ext.Ajax.setDisableCaching](http://docs.sencha.com/touch/2-0/#!/api/Ext.Ajax-method-setDisableCaching)。

小心双重否定：在你的情况下它必须设置为 false ：你不想使用禁用缓存系统。

# java - Servlet 中 JSON 的解析器，就像 XML 的 SAX

> ID：10657725
> 
> 赞同：2
> 
> 时间：2012-05-18T18:14:40.160
> 
> 标签：java, xml, json, sax, jdom

我正在使用 JDOM SAX 解析器来解析外部 XML 文件。但是我需要在同一个 servlet 中解析一个 JSON。任何人都可以建议类似于 SAX 的解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:22:18.453

您应该在 Java 中使用[Google GSON](http://code.google.com/p/google-gson/)解析器

另请参阅[Gson 用户指南](https://sites.google.com/site/gson/gson-user-guide)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:25:23.320

还有杰克逊：

[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T16:25:42.920

您可以使用[GSON](https://code.google.com/p/google-gson/)做到这一点：

```
import java.io.IOException;
import java.math.BigDecimal;

import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonToken;

public class JsonProcessor {

  public void parse(JsonReader reader) throws IOException {
    onStartDocument();
    while (true) {
      JsonToken token = reader.peek();
      switch (token) {
      case BEGIN_ARRAY:
        reader.beginArray();
        onBeginArray();
        break;
      case END_ARRAY:
        reader.endArray();
        onEndArray();
        break;
      case BEGIN_OBJECT:
        reader.beginObject();
        onBeginObject();
        break;
      case END_OBJECT:
        reader.endObject();
        onEndObject();
        break;
      case NAME:
        String name = reader.nextName();
        onName(name);
        break;
      case STRING:
        String s = reader.nextString();
        onString(s);
        break;
      case NUMBER:
        String n = reader.nextString();
        onNumber(new BigDecimal(n));
        break;
      case BOOLEAN:
        boolean b = reader.nextBoolean();
        onBoolean(b);
        break;
      case NULL:
        reader.nextNull();
        onNull();
        break;
      case END_DOCUMENT:
        onEndDocument();
        return;
      }
    }
  }

  public void onStartDocument() {
  }

  public void onBeginObject() {
  }

  public void onEndObject() {
  }

  public void onBeginArray() {
  }

  public void onEndArray() {
  }

  public void onName(String name) {
  }

  public void onNumber(BigDecimal n) {
  }

  public void onString(String s) {
  }

  public void onNull() {
  }

  public void onEndDocument() {
  }

  public void onBoolean(boolean b) {
  }
} 
```

注意：如果您使用的是 android api >= 11，那么您可以使用：

```
import android.util.JsonReader;
import android.util.JsonToken; 
```

类而不是 GSON。

# tfs - TFS，改变不同工作项的状态

> ID：10657726
> 
> 赞同：1
> 
> 时间：2012-05-18T18:14:44.917
> 
> 标签：tfs, workflow

我一直在为我的问题寻找可能的解决方案。是否可以在 TFS 中更改工作项的状态，然后让该更改反映对不同工作项的不同更改？例子：

我将任务链接到要求，使得要求是父项，任务是子项。如果我将任务标记为状态 =“关闭”，我希望我的要求状态 =“关闭”，原因 =“完成”

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:25:39.123

这就是你需要的： http: [//tfsaggregator.codeplex.com/](http://tfsaggregator.codeplex.com/)

# android - 使用 ActionBarSherlock 时更改活动背景

> ID：10657735
> 
> 赞同：3
> 
> 时间：2012-05-18T18:15:53.750
> 
> 标签：android, actionbarsherlock, theming

我已经在我的应用程序中更改了我的 ActionBar 的背景颜色，并且效果很好。但是后来我想在我的活动中改变我的背景颜色，现在它看起来很糟糕。

这是我的主题 xml：

```
<style name="TucanActionBarStyle" parent="Widget.Sherlock.Light.ActionBar">
    <item name="android:background">@color/actionbar_green</item>
</style>

<style name="Theme.TucanActionBar" parent="@style/Theme.Sherlock.Light">
    <item name="android:actionBarStyle">@style/TucanActionBarStyle</item>   
    <item name="android:background">@android:color/white</item>
</style> 
```

这就是它的外观： [http ://dl.dropbox.com/u/2683101/Screenshot_2012-05-18-19-49-23.png](http://dl.dropbox.com/u/2683101/Screenshot_2012-05-18-19-49-23.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T18:35:25.683

您应该使用`android:windowBackground`更改活动背景。`android:background`由于上下文和使用方式的不同，更改将影响许多其他事情`ContextThemeWrappers`。

# wpf - 如何修改我的 C# 项目文件，以便将 Resources.resx 编译到我的 UICulture 的附属程序集中？

> ID：10657736
> 
> 赞同：1
> 
> 时间：2012-05-18T18:15:56.383
> 
> 标签：wpf, visual-studio, localization, msbuild

我有一个 C# 中的 WPF 应用程序，将来可能需要本地化。我想支持 XAML/BAML 本地化*和*传统的 resx 本地化。（前者对大部分代码都很有用，但一些本地化内容来自视图模型，使用 resx 文件更直接。）

[我已阅读WPF 本地化指南](http://wpflocalization.codeplex.com/)的相关部分。我在 msbuild 文件中设置了 UICulture 属性。我在 AssemblyInfo.cs 中添加了以下行：

```
[assembly: NeutralResourcesLanguage("en", UltimateResourceFallbackLocation.Satellite)] 
```

我知道我需要将 Resources.resx*复制*为 Resources.en.resx，以便将我的本地化资源写入附属程序集。

我已将 Resources.resx 上的构建目标设置为 None，并将 Resources.en.resx 上的构建目标设置为 EmbeddedResource。Resources.resx 上的自定义工具是 PublicResXFileCodeGenerator，用于生成强类型资源类。我知道生成器仅适用于没有特定文化后缀的文件。

目前我必须手动保持 Resources.resx 和 Resources.en.resx 同步。它们必须相同。（[Rick Stahl 在这里解释了这一点。](http://www.west-wind.com/weblog/posts/2009/Jun/04/Resx-and-BAML-Resources-in-WPF)）

我试图修改我的 C# 项目文件以自动复制该文件。但是，我无法让它工作。我不是 msbuild 专家！我添加了以下构建目标：

```
<Target Name="BeforeResGen">
    <Copy SourceFiles="@(CopyAsLocalizedResources)" DestinationFiles="$(IntermediateOutputPath)Resources.$(UICulture).resx">
        <Output ItemName="EmbeddedResource" TaskParameter="DestinationFiles"/>
    </Copy>
</Target> 
```

我将 Resources.resx 的 Build Action 从 None 更改为 CopyAsLocalizedResources。

我看到我的 Resources.en.resx 文件在构建过程中被复制到中间目录，但在运行时找不到我的资源，并且出现异常。据推测，它们永远不会被编译到卫星程序集中。

任何人都可以通过修改项目文件来帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:53:48.343

尤里卡！

```
 <Target Name="CreateLocalizedResources" BeforeTargets="AssignTargetPaths">
    <Copy SourceFiles="@(CopyAsLocalizedResources)" DestinationFiles="$(IntermediateOutputPath)Resources.$(UICulture).resx" SkipUnchangedFiles="true" UseHardlinksIfPossible="true">
      <Output TaskParameter="DestinationFiles" ItemName="GeneratedLocalizedResources" />
    </Copy>
    <ItemGroup>
      <EmbeddedResource Include="@(GeneratedLocalizedResources)">
        <ManifestResourceName>$(RootNamespace).Properties.Resources.$(UICulture)</ManifestResourceName>
      </EmbeddedResource>
    </ItemGroup>
    <Message Text="Generated resources are: @(GeneratedLocalizedResources)" Importance="high" />
  </Target> 
```

我将 Resources.resx 文件上的 Build Action 设置为 CopyAsLocalizedResources，并且自定义构建目标处理欺骗构建以生成正确的附属程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:21:20.783

编译后的语言 dll 应位于根据该文化的 ISO 文化代码命名的文件夹中。此以区域性命名的文件夹应与父程序集位于同一目录中。

所以，对于一些 foo.dll：

（默认 DLL）

bin\foo.dll

（西班牙语（墨西哥）资源）

bin\es-mx\foo.Resources.dll

此文件夹结构和程序集将在编译时进行，因此您只需调整构建后操作，将文化文件夹中的 dll 移动到目标目录中的匹配文件夹。

请注意，您可以通过 cp 或其他命令行工具执行此移动，只需在 Visual Studio 中的项目构建后步骤框中键入所需的操作即可。

# android - 为什么Android有自己的方式来获取当前的locale？

> ID：10657747
> 
> 赞同：24
> 
> 时间：2012-05-18T18:17:02.747
> 
> 标签：android, locale

此处的 Android 文档[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)说明您可以使用此方法获取当前语言环境：

```
context.getResources().getConfiguration().locale 
```

似乎 Java 已经以这种方法的形式提供了这些信息：

```
java.util.Locale.getDefault() 
```

那么，为什么 Android 开发人员要引入另一种获取语言环境的方法呢？上面两行代码在同时运行时会产生不同的结果吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-20T07:12:57.193

我同意它令人困惑，虽然我没有攻击它，也没有捍卫它，但我可以看到它允许你做一些事情。

让我们从头开始。

`java.util.Locale.getDefault()`由 java 运行时定义。它是电话/设备的语言环境。当没有语言环境时，它是 DateFormats（ISO 日期格式标准、美国格式标准等）、NumberFormats（逗号或小数、3 或 4 分组等）和 CurrenyFormats（它看起来像 $ 还是 CAD）之类的东西的动力给定的。对于这些情况，无论如何最好为这些类型的对象指定区域设置。

`context.getResources().getConfiguration().locale`是在给定上下文中向当前资源包注册的语言环境。它可以包括所有资源内容将尊重当前上下文/资源对的语言环境值。配置可以有点像设备的当前状态，最好过滤到当前资源。您不一定需要指定任何根据区域设置更改的内容，但这是一个选项。

资源在配置中使用一组鉴别器，如方向、屏幕宽度、语言环境等。因此，在您的应用程序中，您可以通过将语言环境应用程序配置更改为不同的语言环境来允许用另一个资源覆盖当前的 Resources()。例如，您正在为地址进行布局。您可能希望某些字段根据所选国家/地区进行变形。（并不是说对于这样的应用程序来说这是正确的行为，但这是现在最简单的想法）。如果您必须简单地依赖 Locale.getDefault()，那么当您想要执行我刚才描述的操作时，它会导致系统应用程序和状态的一些尴尬重置。

您基本上需要修改整个设备的区域设置（这不一定安全，也不是任何老用户都会喜欢的东西）。即使我们忽略主机 vm 会重复的安全管理器问题；在大多数设备上，为国家/地区套件缓存了很多状态。所以在切换这个值时会有相当大的滞后，可能会有很多不稳定（如果有人能做到的话）。另一种选择是始终为所有内容指定语言环境。你可以看到那会有多烦人。所以它在上下文的配置中。

因此，虽然它很尴尬，但它确实提供了额外的自由度、保护和便利性。大多数情况下它将是 Locale.getDefault()，因为您的应用程序是从一个将基本上下文初始化为 Locale.getDefault() 的进程启动的。一般来说，我会避免过多地使用 Locale.getDefault() 值。在消费者应用程序开发中，没有太多次值得信任。

再次不是基于事实，因为我不是操作系统开发人员，只是主要基于分析系统的优缺点。我认为配置中的语言环境是完全合理的。

# .net - .NET - 使用变量打印堆栈跟踪

> ID：10657752
> 
> 赞同：1
> 
> 时间：2012-05-18T18:17:39.720
> 
> 标签：.net, reflection, exception-handling, error-handling

为了改进应用程序错误处理，我想记录每个堆栈级别的异常堆栈跟踪和变量值。我搜索了反射，但找不到任何东西。如何查看变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:23:46.693

如果不使用其他工具（例如创建内存转储或使用分析 API），您将无法做到这一点。虽然您可以使用[LocalVariableInfo](http://msdn.microsoft.com/en-us/library/system.reflection.localvariableinfo.aspx)类列出局部变量，但为了显示这些值，您需要明确地执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:42:41.363

System.Environment.StackTrace 属性应该写入当前托管堆栈的堆栈跟踪。要获取变量，请参阅[运行时获取本地对象/变量列表](https://stackoverflow.com/questions/6571085/get-list-of-local-objects-variables-during-runtime)

# c++ - 程序跳过 getline

> ID：10657756
> 
> 赞同：-2
> 
> 时间：2012-05-18T18:18:16.187
> 
> 标签：c++

当我运行这个程序并选择选项 1 时，它会同时打印两个`cout`语句`void CTree::Add()`，跳过`cin.getline(newPerson->name, 20);`

我在链表程序中有相同的代码，它运行正常，我真的很困惑如何解决这个问题。

```
 //header file

using namespace std;

struct PersonRec
{
    char name[20];
    int bribe;
    PersonRec* leftLink;
    PersonRec* rightLink;
};

class CTree
{

private:
    PersonRec *tree;
    bool IsEmpty();
    void AddItem( PersonRec*&, PersonRec*);
    void DisplayTree(PersonRec*);

public:
    CTree();
    //~CTree();
    void Add();
    void View();

};

//implementation file`

#include <iostream>
#include <string>

using namespace std;

#include "ctree.h"

CTree::CTree()
{
    tree = NULL;
}

//PersonList::~MyTree()
//{
//
//}

bool CTree::IsEmpty()
{
    if(tree == NULL) 
    {
        return true;
    }
    else
    {
        return false;
    }
}

void CTree::Add()
{
    PersonRec* newPerson = new PersonRec();

    cout << "Enter the person's name: ";
    cin.getline(newPerson->name, 20);
    cout << "Enter the person's contribution: ";
    cin >> newPerson->bribe;

    newPerson->leftLink = NULL;
    newPerson->rightLink = NULL;

    AddItem(tree, newPerson);
}

void CTree::View()
{
    if (IsEmpty())
    {
        cout<<"The list is empy";
    }
    else
    {
        DisplayTree(tree);

    }

};

void CTree::AddItem( PersonRec*& ptr, PersonRec* newPer )
{
        if (tree == NULL)
        {
            ptr = newPer;
        }
        else if ( newPer->bribe < ptr->bribe)
            AddItem(ptr->leftLink, newPer); 
        else
            AddItem(ptr->rightLink, newPer); 
}
void CTree::DisplayTree(PersonRec* ptr)
{
    if (ptr == NULL)
                    return;
    DisplayTree(ptr->rightLink);
    cout<<ptr->name<<" "<<"$"<<ptr->bribe <<endl;
    DisplayTree(ptr->leftLink); 
}

    //driver file
    #include <iostream>

using namespace std;
#include <cstdlib>
#include "ctree.h"

int displayMenu (void);
void processChoice(int, CTree&);

int main (void)
{
int num;
CTree ct;
do 
{
num = displayMenu();
if (num != 3)
processChoice(num, ct);
} while (num != 3);
return 0;
}

int displayMenu (void)
{
int choice;
cout << "\nMenu\n";
cout << "==============================\n\n";
cout << "1\. Add student to waiting list\n";
cout << "2\. View waiting list\n";
cout << "3\. Exit program\n\n";
cout << "Please enter choice: ";
cin >> choice;
return choice;
}

void processChoice(int choice, CTree& myTree)
{
   switch (choice)
   {
      case 1: myTree.Add (); break;
      case 2: myTree.View (); break;
   } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:19:30.280

在您读`choice`入`displayMenu`子例程之后，您留下用户输入行的其余部分。具体来说，您留下行尾指示符：`'\n'`。稍后，当您阅读 时`newperson->name`，您实际上是在检索*菜单*行的其余部分，而不是*名称*行。

`istream::ignore`在尝试读取名称之前，您可以使用剩余的菜单选择行。

用这些替换最后两行`displayMenu`：

```
cin >> choice;
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
return choice; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:42:56.807

添加一个

```
cin.ignore(2000, '\n'); 
```

在输入调用解决问题之前！

# blackberry - 选项卡式窗格中 setModel( ) 和 getModel( ) 的区别

> ID：10657758
> 
> 赞同：1
> 
> 时间：2012-05-18T18:18:18.830
> 
> 标签：blackberry, java-me

`setModel()`术语和`getModel()`选项卡式窗格（对于黑莓）之间的实际区别是什么。

BB docs 注意到这些是：

```
getModel()
   Returns the PaneManagerModel associated with this view. 
```

这是否意味着我可以访问与该模型关联的窗格内的代码方法和变量？

```
setModel()
   Lets you associate a PaneManagerModel with this view. 
```

它是否只允许设置该窗格的使用以在另一个窗格中显示？

重新编辑：

我已经使用这段代码从第一个窗格调用另一个窗格中保存的方法，现在我想刷新显示。但不知道如何。请指导。

```
 model.getController().getModel().getPane(1);

  //model.getPane(1).getPane().getScreen().getUiEngine().updateDisplay();

    model.getPane(1).getPane().getManager().invalidate(); 
```

使用什么获取或设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:26:10.837

`getModel()`是一个返回`PaneManagerModel`视图字段的函数。
`setModel()`允许您`PaneManagerModel`为视图设置字段。

这是标准的 OO 设置/获取情况。这是它的一个演示（所以你会得到它实际上是什么，它不一定像这样工作）

```
public class View
{
  private PaneManagerModel model;
  public PaneManagerModel getModel()
  {
    return model;
  }
  public void setModel(PaneManagerModel me)
  {
    model = me;
  }
} 
```

编辑：使用集合。Get only 让你得到里面的东西。如果你想加入一些新的东西，使用 set。如果您想触发仅在设置时执行的代码，但您希望保持相同的`PaneManagerModel`用途`setModel(getModel());`，尽管它很丑陋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:26:36.910

这都与“setter”和“getter”的概念有关。

“Setter”，在本例中为 setModel()，可让您在视图上设置新模型。另一方面，“Getter”允许您获取某个对象的某个属性。在这种情况下，getter 使您可以访问当前设置的视图模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T18:23:40.607

错误的和错误的

getModel 为您提供底层 PanelManagerModel。模型处理数据，完全独立于窗格中的方法/代码

setModel 允许您设置面板的底层数据模型，但与显示无关，除了设置要显示的元素。

这仅与选项卡式窗格中的数据项有关

# php - HTTP 流 PHP 上的错误

> ID：10657765
> 
> 赞同：0
> 
> 时间：2012-05-18T18:18:45.203
> 
> 标签：php, stream, filestream, httpcontext

我有这个方法：

```
protected function _sendRequest($url, $method, Busca_Cxense_Data $data, $get = null) {
    if (! isset ( $this->_urls [$url] )) {
        throw new Busca_Cxense_Exception_Argument ( "El tipo de url enviado no es valido. (type: {$url})" );
    }
    $url = $this->_urls [$url] . $data->getUrlKey () . ($get ? "$get" : '');
    $httpConfig = array ('http' => array ('method' => $method, 'request_fulluri' => $url, 'ignore_errors' => false ) );
    if ($data->getSendJson ()) {
        $json = $this->_setJson ( $data );
        $header = "Content-Type: application/json\r\nContent-Length: " . strlen ( $json );
        $httpConfig ['http'] ['content'] = $json;
    } else {
        $header = "Content-Type: text/html";
    }
    $httpConfig ['http'] ['header'] = $header;
    $context = stream_context_create ( $httpConfig );
    $stream = fopen ($url, 'r', false, $context);
    $result = stream_get_contents($stream);
    $headers = stream_get_meta_data($stream);
    fclose($stream);
    if (! $result) {
        print_r ( $data );
        var_dump ( $url );
        print_r ( $httpConfig );
        throw new Busca_Cxense_Exception_MethodCall ( "Bad call. \nString: $json\n" );
    }
    var_dump($result); exit;
    return array ('json' => json_decode ( $result ), 'string' => $result, 'headers' => $headers );
} 
```

如您所见，它创建了一个上下文并打开了一个流。但是，我有一个非常奇怪的错误。如果我发送此网址：

```
http://sandbox.cxsearch.cxense.com/api/search/levelup?p_aq=query%28category^1:%22preview%20trailer%22,token-op=or%29&p_sm=idobject:desc&p_s=0&p_c=20&p_dr=title 
```

它会引发错误的请求错误，但如果我发送另一个错误：

```
http://sandbox.cxsearch.cxense.com/api/search/levelup?p_q=test&p_sm=idobject:desc&p_s=0&p_c=20&p_dr=title 
```

它按预期工作。我必须对网址进行编码吗？

**修复** 了我能够弄清楚问题所在。我只需要更改 %20 的空间。仅此而已……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:59:42.943

我能够弄清楚问题所在。我只需要更改 %20 的空间。仅此而已……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:39:38.133

远程服务器返回 400 响应，因此您希望查看规范/联系那一方的人员如何构建正确的查询。您提供的 url 看起来非常不同，远程系统可能对值、提供的参数列表等有自己的验证规则。此外，它可能需要一些特定的标头和/或请求正文。

# excel - 为什么 Worksheet_Change() 事件中的代码不会运行？

> ID：10657767
> 
> 赞同：0
> 
> 时间：2012-05-18T18:18:53.700
> 
> 标签：excel, vba

更新：如果我将范围定义为来自 A2:P29 的 input_range。然后如果在第 30 行输入，那么它可以工作。但是， Input_range 不会自动扩展，我想将整行向下移动，而不仅仅是范围中的最后一行。我怎样才能实现这两件事？

[上一个问题](https://stackoverflow.com/questions/10593346/how-to-detect-if-the-cell-being-edited-belongs-to-the-last-row-of-a-defined-name)

在 Siddharth Rout 的帮助下，我能够在新的 Excel 文件上完成这项工作。但是，无论我在这个文件上尝试了什么

[示例 Excel 文件](https://www.yousendit.com/dl?phi_action=app/orchestrateDownload&rurl=https%253A%252F%252Fwww.yousendit.com%252Ftransfer.php%253Faction%253Dbatch_download%2526send_id%253D1516438217%2526email%253D2abfadb5544bf569a8ad6c428594527b&s=19104&cid=tx-02002207350200000000)- 它只是不起作用。我想有某种结构可以防止自动添加行。如果是这样，我怎样才能使代码工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:45:20.637

当您检测 Worksheet_Change() 事件时，您需要将代码放在工作表对象中，而不是模块中。

这是如何做到的：

1.  Alt-F11 打开 VBA 编辑器
2.  从 Module1 复制 Worksheet_Change() 子
3.  双击 Sheet6(itemmaster)
4.  将代码粘贴到那里

确保您在编辑器顶部的两个下拉列表中看到 Worksheet 和 Change。

注意：您应该始终打开 Option Explicit 以要求变量声明。阅读此答案以了解如何操作：[https ://stackoverflow.com/a/10653204/138938](https://stackoverflow.com/a/10653204/138938)

![工作表中代码而不是模块中的屏幕截图](../Images/6699411c0579d241e8cdef9cf9c4fbea.png)

# php - 新闻系统的数据库模式

> ID：10657774
> 
> 赞同：4
> 
> 时间：2012-05-18T18:19:28.407
> 
> 标签：php, mysql, database, database-design, schema

我有一个我正在设计的新闻系统，起初它看起来很简单，但是当我推进我计划的架构时，我遇到了问题......显然我还没有考虑清楚。任何人都可以帮忙吗？

系统要求从数据库中抓取最新的 20 篇新闻文章。它以这种方式类似于博客。每篇文章都可以有可以从父文章访问的子文章（通常在 3 个左右）。子文章仅在父文章可见时才可见——它们不会在其他地方使用。

客户需要能够隐藏/显示新闻文章（简单），但如果他们愿意（更难），还需要更改它们的顺序。

我最初将子文章存储在一个单独的表中，但后来我意识到这些字段本质上是相同的：标题、副本、图像。那么为什么不把它们都放在一张大桌子上呢？

现在我遇到了有关订购的其他问题。今天是星期五晚上，我的头好痛！

任何人都可以提供建议吗？

谢谢。

* * *

**更新：**人们要求查看我的“现有”架构：

```
articleID *   
headline  
copy
imageURL
visible
pageOrder

subArticleID *
articleID 
headline
copy
imageURL
visible
pageNumber
pageOrder 
```

这行得通吗？我将如何让用户更改订单？对我来说，这似乎是错误的做法，所以我把它扔掉了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:47:05.237

> 我最初将子文章存储在一个单独的表中，但后来我意识到这些字段本质上是相同的：标题、副本、图像。那么为什么不把它们都放在一张大桌子上呢？

因为参照完整性是不一样的。

也就是说，当然，如果您想将树限制为恰好 2 个级别。如果您想要更通用的数据模型（即使这意味着稍后在应用程序级别对其进行限制），那么请继续制作通用树。

这可能看起来像这样：

![在此处输入图像描述](../Images/98bdf91980ad9efe04dd06fb1fd03384.png)

请注意 PARENT_ARTICLE_ID 和 ORDER 如何都可以为 NULL（因此您可以表示根），以及两者如何构成`U1`上图中表示的 UNIQUE 约束（因此不能在同一个父项下对两篇文章进行模糊排序）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:40:13.493

根据你所描述的。我会用两张桌子。第一个表将包含所有文章和子文章。第二个将文章与它们的子文章联系起来。

第一个表（调用它`articles`）可能有这些列：

```
+-----------+----------+------+----------+---------+------------+-----------+
| articleID | headline | copy | imageURL | visible | pageNumber | pageOrder |
+-----------+----------+------+----------+---------+------------+-----------+ 
```

第二个表（称为它`articleRelationships`）可能有这些列：

```
+-----------------+----------------+
| parentArticleID | childArticleID |
+-----------------+----------------+ 
```

不确定您是否已经通过该`pageNumber`列完成此操作，但如果没有，您可以添加一个类似的列，`articleLevel`并给它类似 1 的主要文章，2 用于主要文章的子文章，3 用于子文章2 级文章等。这样，在选择要抓取的最新 20 篇文章时，您只需从表中选择`articleLevel = 1`.

我认为在每篇文章中存储日期/时间可能也很有用，以便您可以按此订购。就任何其他订购而言，您必须对此进行更多澄清，以便我在那里提供更多帮助。

为了向用户显示它们，我会使用 AJAX。我会首先在屏幕上显示最新的 20 篇主要文章，然后当用户选择查看特定文章的子文章时，使用 AJAX 调用数据库并进行如下查询：

```
SELECT a.articleID, a.headline
FROM articles a
    INNER JOIN articleRelationships ar ON a.articleID = ar.childArticleID
WHERE ar.parentArticleID = ? /* ? is the articleID that the user clicked */
ORDER BY articleID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:17:10.703

> 客户需要能够隐藏/显示新闻文章（简单），但如果他们愿意（更难），还需要更改它们的顺序。

在这一点上，您需要将特定于客户的排序存储在一个表中。具体如何执行此操作将部分取决于您选择如何处理文章和子文章。沿着这些思路的东西将适用于文章。

```
client_id   article_id   article_order
-- 
1           1067         1
1           2340         2
1             87         3
... 
```

您可能需要对表名和列名进行一些调整。

```
create table client_article_order (
  client_id integer not null,
  article_id integer not null,
  article_order integer not null,
  primary key (client_id, article_id),
  foreign key (client_id) references clients (client_id) on delete cascade,
  foreign key (article_id) references articles (article_id) on delete cascade
) engine = innodb; 
```

尽管我将 article_order 设为整数，但您可以为使用其他数据类型提供一个很好的例子。您*可以*使用 float、double 甚至 varchar(n)。重新排序可能很麻烦。

* * *

如果您不需要客户端 ID，您可以将文章排序存储在文章的表中。

但这听起来越来越像 Drupal 和 Wordpress 开箱即用的东西。是否有令人信服的理由来重新发明这个轮子？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:28:35.317

在 news(article) 表“parent”中创建一个新字段，该字段将包含父文章的新闻 id。这个新字段将用作文章和子文章之间的连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:13:36.143

由于 SlideID “拥有” SubSlideID，我将为第二个表使用复合主键。

```
PrimaryKey: slideID, subSlideID
Other index: slideID, pageNumber, pageOrder   (Or however they get displayed) 
```

我更愿意指出的一篇博文是[http://weblogs.sqlteam.com/jeffs/archive/2007/08/23/composite_primary_keys.aspx](http://weblogs.sqlteam.com/jeffs/archive/2007/08/23/composite_primary_keys.aspx)，因为它很好地解释了为什么。

如果您正在回复 Auto_Increment，这也可以处理（使用 MyISAM 表），您仍然可以将 subSlideID 设置为 auto_increment。

如果您可能会升到第三级，请合并 - 遵循上面的 Branko。但它确实开始变得非常复杂，所以只保留 2 层。

# sql - 错误（5,3）：PLS-00103：在预期以下之一时遇到符号“BEGIN”：语言

> ID：10657775
> 
> 赞同：4
> 
> 时间：2012-05-18T18:19:30.083
> 
> 标签：sql, oracle

尝试用一个过程创建简单的包：

```
CREATE OR REPLACE 
PACKAGE PACKAGE1 AS 

procedure procHTML1 is
begin
htp.print('
<html>
 <head>
  <title>PL/SQL Example Pages</title>
 </head>
<body>');
end procHTML1;

END PACKAGE1; 
```

但我明白了

```
Error(5,3): PLS-00103: Encountered the symbol "BEGIN" when expecting one of the following:     language 
Error(14,5): PLS-00103: Encountered the symbol "PACKAGE1" when expecting one of the following:     ; 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T18:22:08.660

包由包规范和包体组成。您在规范中声明该过程（假设您希望该过程是公共的）并在正文中实现它。

因此，例如，您将创建包规范

```
CREATE OR REPLACE PACKAGE package1
AS
  PROCEDURE procHTML1;
END package1; 
```

然后你会创建包体

```
CREATE OR REPLACE PACKAGE BODY package1
AS
  PROCEDURE procHTML1
  AS
  BEGIN
    htp.print( '<<some HTML>>' );
  END procHTML1;
END package1; 
```

# sencha-touch - Sencha Touch 中的自定义动画

> ID：10657777
> 
> 赞同：1
> 
> 时间：2012-05-18T18:19:33.040
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我想知道是否可以在 Sencha Touch 2 中使用自定义动画。如果我已经正确完成了我的作业，那么 Sencha Touch 默认不提供任何动画帮助，除了淡入/淡出、滑块和其他简单的 UI元素。

动画必须使用 CSS3，对吗？我不想在我的应用程序中使用动画（让我们这样说：[http](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_animation-timing-function3) ://www.w3schools.com/cssref/tryit.asp?filename=trycss3_animation-timing-function3 ）。

我不想在初始加载屏幕之后加载动画，但我不知道该怎么做。有人可以帮我写代码吗？请 ELI5，因为我是 ST、CSS 和 HTML5 的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T22:53:25.637

在您的启动功能中，您需要像这样定义[Ext.Anim](http://docs.sencha.com/touch/2-0/#!/api/Ext.Anim)：

```
anim = Ext.create('Ext.Anim',{
  autoClear: false,
  from:{'left':'0px'},
  to: {'left':'100px'},
  delay: 1000,
  duration: 1000
}); 
```

然后你可以像这样在任何组件（这里是 Ext.Panel）上[运行这个动画：](http://docs.sencha.com/touch/2-0/#!/api/Ext.Anim-method-run)

```
anim.run(this.getView().element); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T04:08:36.537

好的@user1324579 这个步骤是：

1.  创建一个 CSS3 类
2.  创建一个面板煎茶
3.  在 html 标签上放置类 CSS

    ```
    var panel = new Ext.Panel({
       id: 'yourIdPanel',
       fullscreen: true,
       style: 'background-color:#ffffff',
       html: '<div class="animation_css_class"></div>'
    }) 
    ```

4.  在初始加载屏幕之后加载您，上面有 id 面板，或者，

    ```
    var mainPanel = new Ext.Panel({
        id:'pnlInicio',
        fullscreen:true,
        items : [panel],
        dockedItems: []
    }) 
    ```

我希望这些有帮助。:)

# shell - 编写一个在文件保存时自动重新运行命令的 Zsh 函数

> ID：10657779
> 
> 赞同：0
> 
> 时间：2012-05-18T18:19:34.667
> 
> 标签：shell, zsh, inotify, inotify-tools

我想编写一个看起来像这样的 Zsh 函数：

```
smartwatch [WATCH_FILE] [COMMAND_TO_RUN] [COMMAND_ARGS] 
```

这样`WATCH_FILE`保存后，`COMMAND_TO_RUN`将运行并`smartwatch`等待文件再次保存。在这种情况下，这对我很有帮助：

```
smartwatch server.py python server.py 
```

所以每次我修改服务器文件时，服务器都会重新启动。我听说[inotify-tools](https://github.com/rvoicilas/inotify-tools/wiki/#wiki-info)可能会有所帮助，所以我正在使用`inotifywait`，但如果有人知道更好的工具，请告诉我。这是我到目前为止所拥有的：

```
smartwatch() {                      
   WATCH=$1                         
   CMD=$2                           
   ARGS=$*[3,-1]                    
   $CMD $ARGS &!                    
   PID=$!                           
   inotifywait -qq $WATCH           
   kill $PID                        
   exec smartwatch $WATCH $CMD $ARGS
} 
```

这个解决方案相当慢而且不是很优雅。任何人都知道一种方法可以提高效率或至少更清洁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:28:33.687

经过一番摆弄，这就是我最终得到的：

```
onsave() {
   while true
   do
      eval "$1 &!"
      trap "kill $! &> /dev/null; return;" SIGINT SIGTERM
      inotifywait -e modify -qq $2
      kill $! &> /dev/null
   done
} 
```

所以你应该能够运行`onsave "python server.py" server.py`

# jquery - 通过 $.ajax() POST 更新 Google Fusion Table Row

> ID：10657780
> 
> 赞同：1
> 
> 时间：2012-05-18T18:19:36.880
> 
> 标签：jquery, sql, row, google-fusion-tables

我正在尝试使用 jQuery $.ajax() 方法（如下面的 php 页面所示）更新 Google 融合表中的一行。如果我将 .$.ajax() 方法中的“类型”更改为 GET 并尝试 SELECT 语句，我会返回预期的数据，但是当我尝试使用 POST 的 UPDATE 语句时，什么也没有发生。查询语句基于以下[文档](https://developers.google.com/fusiontables/docs/developers_guide#Updating)。任何关于我做错了什么的建议将不胜感激。

```
<!DOCTYPE html>
<html>

<head>
<?php 
//Include fusion table php libraries
include('Libs/clientlogin.php'); 
include('Libs/sql.php'); 
include('Libs/file.php'); 
$username=<MY USER NAME>; 
$password=<MY PASSWORD>; 
$token=ClientLogin::getAuthToken($username,$password); 
$ftclient=new FTClientLogin($token); 
?>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>

<body>
    <script>
var token = "<?= $token ?>";

        function updateTable() {
            var URL = "https://www.google.com/fusiontables/api/query/?sql=UPDATE <TABLEID> SET <COLUMN NAME> ='new value' WHERE ROWID =<SOME ROW ID>";

            $.ajax({
                type: "POST",
                url: URL,
                dataType: "jsonp",

                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    //name_startsWith: request.term
                },
                 beforeSend: function(xhr) {
                    xhr.setRequestHeader("Authorization", "GoogleLogin auth=" + token);
                },
                success: function run(data) {},

            });

        }
    </script>
    <a href="" " data-role="button " onclick="updateTable(); return
    false " rel="external ">Post</a>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:15:17.643

我*强烈*建议不要在 JavaScript 代码中打印出访问令牌，因为任何查看源代码的人都可以看到它。

正如 Odi 提到的，Trusted Tester API 提供了一个很好的解决方案。这是它的一个例子：

[http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/javascript-api.html)

# c# - 如何从实体框架中的多个数据库/表创建单个对象

> ID：10657784
> 
> 赞同：2
> 
> 时间：2012-05-18T18:20:15.260
> 
> 标签：c#, .net, entity-framework

我将客户数据存储在两个不同的数据库中。记录保持同步并共享多个字段（例如 CustomerId、CustomerName 等）。但他们也都有自己独特的领域......例如：

数据库1 客户

```
CustomerId
CustomerName
Field1
Field2 
```

Database2 客户

```
CustomerId
CustomerName
DifferentField1
DifferntField2 
```

每个数据库都有自己的 dbContext，我可以独立地从中提取每个 Customer 对象。但我真正想要的是使用单个 dbContext 将所有字段拉入统一的客户对象中，该对象包括两个数据库中所有字段的联合。这甚至是可能的还是可取的？

我的上下文中的其余对象是使用 DbSets 自动连接起来的，并为每个实体指定一个映射，如下所示：

```
public DbSet<Customer> Customers { get; set; } 
```

然后我的映射类具有典型的映射信息：

```
this.ToTable("Customer");
this.HasKey(t => t.CustomerId);
this.Property(t => t.CustomerName);
this.Property(t => t.Field1);
etc. 
```

所以我想知道是否有一种方法可以使用多个表/数据库构建此逻辑，并且不仅能够执行选择，而且能够执行所有必要的 CRUD 操作。这甚至可以通过覆盖默认行为来实现吗？还是我对解决问题的方式不满意？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:24:54.757

您可能应该考虑将您的数据库上下文抽象到存储库中。因此，您的存储库负责将来自不同层的所有数据编组到一个对象中供您使用，然后每个 DBContext 只负责它的特定层。

```
public CustomerRepository
{
    public Customer GetCustomerFor(int customerId)
    {
        var tier1Obj = Tier1DBContext.Customers.First(x => x.CustomerId == customerId);
        var tier2Obj = Tier2DBContext.Customers.First(x => x.CustomerId == customerId);

        // merge them into some new object

        return mergedCustomerObject;
    }
} 
```

除非您从数据库本身进行某种链接服务器调用并在一个上下文中公开该值（我不推荐），否则不会有两层。

# javascript - MVC 3客户端验证在POST后停止工作

> ID：10657789
> 
> 赞同：1
> 
> 时间：2012-05-18T18:20:45.790
> 
> 标签：javascript, asp.net-mvc-3, jquery, client-side-validation

我在从 MSAjax MVC 3 Razor 视图生成的表单上使用了 jQuery ajax 帖子。

在这种形式中，客户端验证在输入过程中正常工作，但是当用户生成“POST”点击“搜索”按钮时，客户端验证停止运行！

这是模型：

```
public class AnagraficaSearchViewModel : ViewModelBase
    {
        [Required]
        [StringLength(2)]
        public virtual string Ricerca { get; set; }
    } 
```

这是控制器：

```
[HttpPost]
public ActionResult Index(AnagraficaSearchViewModel model)
{
    if (model.Ricerca == "12")
    {
        model.Status = Status.Error;
        model.Message = "Errore!";

        ModelState.AddModelError("", Cult.Testo(Cult.CultTextsIDs.StatusError));                
    }

    if (Request.IsAjaxRequest()) return PartialView("SearchCriteria", model);

    return View(model);
} 
```

这是主要观点：

```
<div id="search-anagrafica-criteria">
    @{ Html.RenderPartial("SearchCriteria", Model); }
</div> 
```

这是 SearchCriteria 视图：

```
@model AnagraficaSearchViewModel

<script type="text/javascript">
    function CheckRow() {
        $("form").valid();
        abs.message.convertErrorsToTooltips();
    };

    function InitSearch() {
        $("#Ricerca").bind("propertychange keyup input paste", function () {
            setTimeout("CheckRow();", 100);
        });

        CheckRow();

        $("#Ricerca").focus();
    }

    $(function () {
        $('form').submit(function (e) {
            e.preventDefault();

            var $form = $(this);

            if (!$form.valid()) {
                abs.message.convertErrorsToTooltips();
                return false;
            }

            $.validator.unobtrusive.parse($('form'));  //added

            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        $('#search-anagrafica-criteria').html(result);
                        InitSearch();
                    },
                    complete: function (result) {
                        CheckRow();
                    }
                });
            }
            return false;
        });

        InitSearch();
    });

</script>

@using (Ajax.BeginForm("Index", "Anagrafica", null, new AjaxOptions { UpdateTargetId = "search-anagrafica-criteria", HttpMethod = "POST", OnComplete = "CheckRow()" }))
{
    @Html.LabelFor(el => el.Ricerca)
    @Html.TextBoxFor(el => el.Ricerca)
    @Html.ValidationMessageFor(el => el.Ricerca)

    <button class="btn btn-primary" type="submit" style="margin-left: 10px">Search</button>

    @Html.ValidationSummary(true)    
} 
```

工作了好几个小时，没有任何改变！！

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:24:11.203

请改用以下内容：

```
 $('form').removeData("validator");
      $('form').removeData("unobtrusiveValidation");
      $.validator.unobtrusive.parse('form'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:29:21.457

我使用了一种比仅仅重新解析表单更“高级”的方式。请参阅我的帖子：

[ASP.Net MVC：您可以通过 AJAX/jQuery 调用使用数据注释/验证吗？](https://stackoverflow.com/questions/5825631/asp-net-mvc-can-you-use-data-annotations-validation-with-an-ajax-jquery-cal)

# windows-phone-7 - 使用 PhoneGap / Cordova 时如何在 WP7 IE 中禁用选择/剪贴板行为

> ID：10657793
> 
> 赞同：2
> 
> 时间：2012-05-18T18:20:59.913
> 
> 标签：windows-phone-7, cordova

我正在尝试使用 Cordova 1.7.0 为 WP7 创建一个简单的 Phonegap/Cordova 应用程序。

VS 2012 项目模板在 index.html 中显示一个简单的欢迎消息。当您触摸屏幕上的文本时，文本变为选中状态，并显示剪贴板图标。此外，如果您的页面包含图片，则触摸图片会将其突出显示为选中状态。

这种行为使 UI 无法使用，我该如何防止它？

我尝试过的是：a）所有 CSS -ms-user-selectable: none 等，b）元素中的 uselectable='on' 属性。

这些都不会阻止 UI 元素的可选择性。

（注意 WP7 是芒果）

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T15:02:33.613

我已经用绝对定位的伪元素解决了它。例如，您有一个带有文本的元素，您希望避免选择文本：

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vitae orci condimentum magna sagittis congue eu at diam. <a href="#">Learn more</a></p> 
```

CSS：

```
p {
    position:relative;
    z-index: 0;
}

p:before {
    content:''; 
    position:absolute; 
    top:0px; 
    left:0px; 
    right:0px; 
    bottom:0px; 
    z-index:1;
}

p a {
    position:relative; 
    z-index:2;
} 
```

添加链接的 Z-index 以保留点击它的可能性，因此如果您在此块中有其他可点击元素，请小心。与 WP7 的很多东西一样，解决方案很丑陋，但它确实有效。

# c# - 使用浮点数时，ASP.NET MVC ViewModel 绑定十进制为空

> ID：10657795
> 
> 赞同：3
> 
> 时间：2012-05-18T18:21:03.403
> 
> 标签：c#, asp.net-mvc, model-view-controller, model-binding

我创建了一个 ViewModel 对象，它有一个包含价格的小数字段。当我将其发布到我的控制器时，会发生以下情况：

*   输入“15”-> 好！控制器收到 15。
*   输入“15.00”-> 不行！控制器收到一个“空”字段。
*   输入“15,00”-> 验证错误，因为该字段应该用句点格式化（我只是坚持一种格式化类型以避免暂时的复杂性）。
*   输入“15.00M” -> 验证错误，可能是因为它不被认为是一个数字。

我该如何解决？我希望“15.00”是一个正确的值，但我不知道如何做到这一点。我尝试了几个在互联网上找到的自定义模型绑定器，但它们不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:28:50.580

解决此问题的最简单方法是将语言固定在 web.config 文件中：

```
<globalization culture="en-us" uiCulture="en-us" /> 
```

你必须把这个放在`<system.web>`节点中。

为什么是最简单的？这样，包含的 JavaScript 助手可以毫无问题地进行验证（这是通过假设数字应该是美国格式的值来完成的），现在（由于我们的更改）在服务器上是相同的。因此，在客户端有效的东西在服务器端也有效（声明仅对简单情况和启用 JavaScript 的浏览器有效）。

所有其他选项都涉及更多编辑、扩展和有关 MVC 3 中本地化的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-14T00:42:39.803

创建一个未映射的字符串类型字段，如下所示

```
[NotMapped]
public string priceComputed {get;set} 
```

然后在您的控制器中，您在右侧字段中设置值

```
price = convert.todecimal(pricecomputed) 
```

# javascript - 文本输入中的 5 个字符后忽略“输入”键并移动焦点

> ID：10657797
> 
> 赞同：1
> 
> 时间：2012-05-18T18:21:05.977
> 
> 标签：javascript, jquery, html

我的客户需要扫描包含发票号（5 位数字）和“输入”键击的条形码。

我需要输入框忽略“回车”键，并在 5 个字符后将焦点移至下一个输入框。

如果您可以包含一些示例代码，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:30:13.213

使用文本框的 onkeypress 或 onkeyup 并添加代码 if(event.keyCode==13)return false; （13是回车键）和设置焦点到下一个控件

例如，您有 2 个文本框（TxtBox1 和 TxtBox2）

```
 <input id="TxtBox1" type="submit" onkeypress="if(event.keyCode==13)return false;document.getElementById('TxtBox2').focus(); " name="Submit" value="Send" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:31:18.477

```
$('input[type=text]').on('keyup', function(e) {
    if (e.which != 27 || e.which != 8) { // check for backspace and delete
        if (e.which != 13) { // ignoring enter
            if (!this.value.replace(/\s/g, '').match(/\d/g)) { // checking for digit
                alert('Insert Digit');
                $(this).val(''); // make the field empty
            } else {
                if (this.value.length > 4) {
                    $(this).next().focus(); // automatically change current input of length 5 digits
                }
            }
        }

    }
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/40/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:30:26.547

一些jQuery：

```
$('#test').keydown(function(e) {
if (e.which == 13) {
    if ($(this).val().length == 5) {
        e.preventDefault();
        $('#test2').focus();
    }
}
}); 
```

假设 'test' 和 'test2' 是 2 个文本框的 id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:32:58.677

与其忽略回车键，不如将其用作移动事物的提示。类似于以下内容：

```
$("#myTextbox").keydown(function(event){
  if(event.keyCode == 13){
  // validate input and move on to the next textbox
  }
}); 
```

# ruby-on-rails - 警告：Time#succ 已过时；使用时间 + 1

> ID：10657798
> 
> 赞同：9
> 
> 时间：2012-05-18T18:21:08.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

这个错误是怎么回事？我正在运行一个标准查询，如下所示：

```
time_range = (1.month.ago.beginning_of_month..1.month.ago.end_of_month)

Feed.find(:all, :conditions => ['created_at = ? AND id not in (?)', time_range, [1,2,3]]).count 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-07T15:25:07.490

我遇到了这个问题，解决方案是添加“to_date”，以便它在几天内迭代，如下所示：

```
time_range = (1.month.ago.beginning_of_month.to_date..1.month.ago.end_of_month.to_date) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T18:59:13.133

我认为您的问题是您正在做`created_at = ?, time_range`，并且 time_range 不是特定值，而 = 期望特定值。无法准确解释该错误的原因，但可以为您提供解决方案。

改为这样做，我试过了，效果很好

```
1.9.3-p125 :014 > time_range = (1.month.ago.beginning_of_month..1.month.ago.end_of_month)
 => Sun, 01 Apr 2012 00:00:00 UTC +00:00..Mon, 30 Apr 2012 23:59:59 UTC +00:00 
1.9.3-p125 :015 > Post.where(:created_at => time_range).where('id not in (?)', [1,2,3]).count
   (0.3ms)  SELECT COUNT(*) FROM "posts" WHERE ("posts"."created_at" BETWEEN '2012-04-01 00:00:00.000000' AND '2012-04-30 23:59:59.999999') AND (id not in (1,2,3))
 => 0 
```

* * *

**更新**

与问题没有直接关系，但您应该将这些条件放在具有语义含义的范围内，这样您就可以拥有类似的`Feed.from_last_month`东西`Feed.not_with_ids([1,2,3])`

对于您的查询，您会做

```
Feed.from_month.not_with_ids([1,2,3]).count 
```

* * *

有关警告的说明，请查看下面的@echristopherson 评论

# html - 将 html 字符插入页面标题助手

> ID：10657802
> 
> 赞同：0
> 
> 时间：2012-05-18T18:21:20.173
> 
> 标签：html, ruby-on-rails, css, ruby-on-rails-3

这个问题并不严重......但有助于我知道答案。我一直在使用 Ryan Bates[将标题放在页面上](http://railscasts.com/episodes/30-pretty-page-title)的方法。顺便说一句，他是 Rails 社区的伟大创新者和[贡献者](http://railscasts.com)，不是吗？

application_helper 文件：

```
 def title(page_title)
    content_for(:title) { page_title }
  end 
```

布局文件：

```
<head>
   <title>foo.com - <%= yield(:title) %></title>
   ...
</head>
<body>
   ...
   <h1 class="heading"><%= yield(:title) %></h1> 
```

我正在尝试操纵标题以插入更多空格并使其中一个单词斜体。我想如果我把标题作为一个变量放在一起，我也许可以做到。我尝试插入`&nbsp;`，但不起作用。我尝试插入html `<i></i>`，但不起作用。我想让它看起来像这样：

## 第一 第二    *第三*

如何更改下面的代码以使标题看起来像这样？

```
<% ttl = "First Second Third" %>
<% title ttl %> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T19:30:14.183

通过 HTML 语法，`title`元素内容必须是纯文本，而浏览器实际上强制执行此操作：内容按原样呈现，而不会将任何内容解释为 HTML 标记。

那里可以有不间断的空格，但您可能需要直接输入它们作为字符 (U+00A0)。

`<i>`无论您使用什么技术来生成`title`元素，您都不能在那里有标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T18:34:46.670

默认情况下，rails 在视图上呈现字符串时会转义 html，您需要使用 html_safe 将其标记为安全以避免转义。

以下代码应该可以解决您的问题

```
<% ttl = "First &nbsp;&nbsp; Second &nbsp;&nbsp; <i>Third</i>" %>
<% title ttl.html_safe %> 
```

# r - 如何使用单独的表来过滤数据

> ID：10657805
> 
> 赞同：2
> 
> 时间：2012-05-18T18:21:32.523
> 
> 标签：r

我有一些数据我不确定如何分析。我敢肯定，它目前在 Excel 中，需要摆弄才能在 R 中工作。我有一组目标，它们的大小和颜色。我还有每个目标的用户、条件和他们的分数。

所以第一个表看起来像这样：

```
Target, 1, 2, 3, 4, 5 ...
Size,   L, M, L, S, L ...
Color   R, B, G, B, R ... 
```

然后我有所有的用户数据，其中有一列是用户 ID，一列是设备，然后是每个目标的分数列。

```
User, Condition, 1, 2, 3, ...
1     A          5, 2, 8, ...
1     D          2, 4, 6, ...
2     A          1, 4, 6, ...
2     B          5, 8, 3, ... 
```

我主要想在 4 个条件之间运行 ANOVA，以便查看 L 目标或 R 目标的平均分数是否相同。

我从来不需要使用第二个表来过滤或查找这样的数据。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:01:09.857

快速而肮脏的解决方案（因为我相信肯定有人会提出一个更优雅的解决方案来避免循环）：

```
tab1 <- list(Target=1:5, Size=c("L","M","L","S","L"), Color=c("R","B","G","B","R"))
tab2 <- data.frame(rep(1:2, each=2), c("A","D","A","B"),
                   c(5,2,1,5), c(2,4,4,8), c(8,6,6,3))
names(tab2) <- c("User", "Condition", 1:3)

library(reshape)
tab2.melt <- melt(tab2, measure.vars=3:5)

for (i in 1:nrow(tab2.melt)) {
  tab2.melt$Size[i] <- tab1$Size[tab1$Target==as.numeric(tab2.melt$variable[i])]
  tab2.melt$Color[i] <- tab1$Color[tab1$Target==as.numeric(tab2.melt$variable[i])]    
} 
```

我假设您能够将数据导入 R，但如果数据结构不是您在摘录中显示的数据结构，您可能需要调整上述代码。基本上，我们的想法是将您的代码视为索引和级别`Target`的一种方式，我们在最终的每次重复测量中都需要它（关于第 i 个主题）。`Size``Color``data.frame`

更新后的`data.frame`样子：

```
> head(tab2.melt)
  User Condition variable value Size Color
1    1         A        1     5    L     R
2    1         D        1     2    L     R
3    2         A        1     1    L     R
4    2         B        1     5    L     R
5    1         A        2     2    M     B
6    1         D        2     4    M     B 
```

从那里，您可以执行 3-way ANOVA 或研究特定的对比。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-08T15:44:53.870

一种可能的替代解决方案是将查找表与数据框连接起来：

**1.**一些示例数据（与@chl 在他的答案中使用的相同，但使用数据框而不是查找值列表）：

```
lut <- data.frame(Target=1:5, Size=c("L","M","L","S","L"), Color=c("R","B","G","B","R"))
df1 <- data.frame(rep(1:2, each=2), c("A","D","A","B"),
                   c(5,2,1,5), c(2,4,4,8), c(8,6,6,3))
names(df1) <- c("user", "condition", 1:3) 
```

**2.**使用*data.table*包，您可以将数据帧转换为*data.table*和长格式（与*reshape2*相同）

```
dt.melt <- melt(setDT(df1), id=c("user","condition"),
                variable.factor = FALSE)[, variable := as.numeric(variable)] 
```

**3.**与查找表连接，以便将 和 的匹配值添加`Size`到`Color`长*data.table*：

```
dt.melt[lut, on = c("variable" = "Target"), nomatch=0] 
```

或者：

```
lut[dt.melt, on = c("Target" = "variable")] 
```

这两者都导致：

```
 user condition variable value Size Color
 1:    1         A        1     5    L     R
 2:    1         D        1     2    L     R
 3:    2         A        1     1    L     R
 4:    2         B        1     5    L     R
 5:    1         A        2     2    M     B
 6:    1         D        2     4    M     B
 7:    2         A        2     4    M     B
 8:    2         B        2     8    M     B
 9:    1         A        3     8    L     G
10:    1         D        3     6    L     G
11:    2         A        3     6    L     G
12:    2         B        3     3    L     G 
```

您也可以一次调用将其绑定在一起：

```
dt.melt <- melt(setDT(df1), id=c("user","condition"),
                variable.factor = FALSE)[, variable := as.numeric(variable)
                                         ][lut, on = c("variable" = "Target"), nomatch=0] 
```

* * *

通过*dplyr*和*tidyr*的组合，您可以实现相同的效果：

```
library(dplyr)
library(tidyr)

df.new <- df1 %>% 
  gather(variable, value, -c(1:2)) %>% 
  mutate(variable = as.numeric(as.character(variable))) %>% 
  left_join(., lut, by = c("variable" = "Target")) 
```

这将给出相同的结果：

```
> df.new
   user condition variable value Size Color
1     1         A        1     5    L     R
2     1         D        1     2    L     R
3     2         A        1     1    L     R
4     2         B        1     5    L     R
5     1         A        2     2    M     B
6     1         D        2     4    M     B
7     2         A        2     4    M     B
8     2         B        2     8    M     B
9     1         A        3     8    L     G
10    1         D        3     6    L     G
11    2         A        3     6    L     G
12    2         B        3     3    L     G 
```

# silverlight - 在 Windows Phone 中对 DiscreteObjectKeyFrame 动画应用缓动函数

> ID：10657809
> 
> 赞同：0
> 
> 时间：2012-05-18T18:21:39.677
> 
> 标签：silverlight, windows-phone-7, xaml, animation, storyboard

```
<Storyboard x:Name="stTOPAni">
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="grdOverlay">
            <DiscreteObjectKeyFrame KeyTime="0">
                <DiscreteObjectKeyFrame.Value>
                    <Thickness>0</Thickness>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
            <DiscreteObjectKeyFrame x:Name="key1" KeyTime="0:0:0.5">
                <DiscreteObjectKeyFrame.Value>
                    <Thickness>0,-500,0,0</Thickness>
                </DiscreteObjectKeyFrame.Value>

            </DiscreteObjectKeyFrame>
            <DiscreteObjectKeyFrame KeyTime="0:0:1">
                <DiscreteObjectKeyFrame.Value>
                    <Thickness>0,-800,0,0</Thickness>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>

    </Storyboard> 
```

我想使用这个故事板更改上边距，所以我应用了 KeyFrame 动画，但它没有使用 EasingFunction，因此不平滑，我将如何应用 Easing Function 来使动画平滑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:35:40.200

在 WPF 中，您可以简单地使用 ...ThicknessKeyFrames 之一。

```
<Storyboard x:Name="stTOPAni" Storyboard.TargetProperty="Margin">
    <ThicknessAnimationUsingKeyFrames>
        <DiscreteThicknessKeyFrame KeyTime="0">
            <DiscreteThicknessKeyFrame.Value>
                <Thickness>0</Thickness>
            </DiscreteThicknessKeyFrame.Value>
        </DiscreteThicknessKeyFrame>
        <EasingThicknessKeyFrame KeyTime="0:0:1">
            <EasingThicknessKeyFrame.EasingFunction>
                <CubicEase EasingMode="EaseInOut"/>
            </EasingThicknessKeyFrame.EasingFunction>
            <EasingThicknessKeyFrame.Value>
                <Thickness>0,-800,0,0</Thickness>
            </EasingThicknessKeyFrame.Value>
        </EasingThicknessKeyFrame>
    </ThicknessAnimationUsingKeyFrames>
</Storyboard> 
```

但不幸的是，在 Silverlight 中动画不能平滑，因为您必须使用[仅支持离散插值方法](http://msdn.microsoft.com/en-us/library/cc189038%28v=VS.95%29.aspx#animation_types)`ObjectAnimationUsingKeyFrames`的for`Thickness`动画。也不支持。[`EasingFunctions`](http://msdn.microsoft.com/en-us/library/ee308751.aspx)

# security - 安全策略和安全机制与操作系统有什么区别

> ID：10657810
> 
> 赞同：1
> 
> 时间：2012-05-18T18:21:49.377
> 
> 标签：security, operating-system, policies

两者有什么区别，我不确定。

这与操作系统有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:31:20.597

您的问题过于模糊 - 请引用具体的参考资料；请提供一些背景信息。

但是，总的来说：

> “机制赋*能*政策”。

“政策”就是*你*想做的；“机制”是让你做到这一点*的方式。*

恕我直言...

PS：这是（其中之一？）原始论文中提到“政策和机制的分离”：

[HYDRA - 多处理器操作系统的内核，William Allan。伍尔夫](http://repository.cmu.edu/cgi/viewcontent.cgi?article=2752&context=compsci)

这是另一个（更有趣的）讨论，来自“政治不正确”的 Mick O'Pedia：

[http://mickopedia.org/mickify.py?topic=Policies_and_mechanisms](http://mickopedia.org/mickify.py?topic=Policies_and_mechanisms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:07:12.790

安全策略只是关于系统中允许和不允许做什么的声明，而安全机制是如何实施安全策略的过程。它被称为安全执行的工具，方法或程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:25:51.983

与“政策”和“机制”这两个词之间的区别相同：您要完成什么以及您将如何完成它。

# excel - 根据 vlookup 设置下拉值

> ID：10657811
> 
> 赞同：1
> 
> 时间：2012-05-18T18:21:53.980
> 
> 标签：excel, validation

我有一个`UserEntry`包含 2 列的工作表，`Block`并且`Address`. 我想根据另一个`Validation`具有相同列名的工作表来验证这两个。单子上的数据`Validation`如下：

```
Block | Address
---------------
001   | 101
001   | 101.3
001A  | 35
020-1 | 203
020-1 | 203.5
020-1 | 204.1

... 
```

大约有 11000 个不同的块，以及大约 40000 个块/地址对。

`Block`我的目标是，如果用户在工作表上的列中输入值，则列中`UserEntry`的下拉选项会`Address`更改为与`Block`.

我尝试使用此公式的自定义验证：

`=VLOOKUP(UserEntry!A2,Validation!A2:B40000)`

但这被评估为错误。我在各种论坛中看到了一些解决方案，这些解决方案涉及设置命名范围，然后让 VLOOKUP() 搜索适当的命名范围，但它似乎在这里不起作用，因为我必须创建 11000 个命名范围。

如何使验证下拉列表`Address`包含与给定值对应的所有`Block`值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T23:00:50.023

您没有提到 VBA，但这里有一个使用它的解决方案。

## 步骤1

创建块地址关系的主表。确保这是排序的`Block`。我使用了Sheet1：

![主表](../Images/9c7132654cddc1a6ead44996ddeeefef.png)

细胞`E2`很重要。您实际上不必在那里放任何东西，但宏会使用它。细胞`E3`仅用于显示，但您将暂时使用公式（此处已将其注释掉，以便您查看）。

## 第2步

创建一个命名范围。中的公式`Refers to:`就是你在`E3`上面看到的，你可以在`E2`这里看到对单元格的引用。为了您的方便，公式是

```
=OFFSET($A$1,MATCH($E$2,$A:$A,0)-1,1,COUNTIF($A:$A,$E$2),1) 
```

![动态范围](../Images/62438ba692c59c89d4c1d901e29b9c78.png)

## 第 3 步

设置一个新的工作表 (Sheet2)，将在其中进行数据输入。`Address`如图所示为列创建数据验证。

![在此处输入图像描述](../Images/d324bb4d5480bfe0a9083c7eccbd2d16.png)

## 第4步

打开 VBA 编辑器并将此代码粘贴到`Sheet2`. `Debug`如果您愿意，您可以删除该声明。再次注意对单元格的`E2`引用`Sheet1`：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  Debug.Print "fired on " & ActiveCell.Address
  If Not Application.Intersect(Target, Range("B:B")) Is Nothing Then
    Sheets("Sheet1").Range("E2").Value = ActiveCell.Offset(0, -1).Value
  End If
End Sub 
```

## 第 5 步

享受。您的数据验证现在是上下文相关的。例子：

![在此处输入图像描述](../Images/493df521f2012973540a0872aa3a6ea5.png) ![在此处输入图像描述](../Images/c4a1927e16e94e0c29e07b732d55dab4.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T22:57:01.933

您可以为此使用动态命名范围。

假设：

1.  验证列表按 A..Z 排序
2.  验证列表在范围内`Validation!A:B`
3.  验证列表包括第 1 行中的标题
4.  在工作表上，要验证的单元格是输入右侧的一个单元`UserEntry`格`Address``Block`
5.  在 Excel 2010 上试用和测试

创建一个*命名范围*以用作验证源（我使用了 name `ValList`）：

```
=OFFSET(Validation!$B$1,MATCH(INDIRECT(ADDRESS(CELL("row"),CELL("col")-1)),Validation!$A:$A,0)-1,0,COUNTIF(Validation!$A:$A,INDIRECT(ADDRESS(CELL("row"),CELL("col")-1))),1) 
```

将*数据验证*添加到所需的单元格： Allow `List`， Source`=ValList`

1.  使用`INDIRECT`,`ADDRESS`和`CELL`获取用户输入的*Block*相对于活动单元格的引用
2.  使用`MATCH`and`COUNTIF`获取验证列表中匹配*块的位置和大小*
3.  用于`OFFSET`将返回范围设置为与输入*块*匹配的*地址*

# php - Joomla 2.5.3：MySQL-db：#1064 使用 BTREE）引擎=InnoDB 默认字符集=utf8

> ID：10657818
> 
> 赞同：-2
> 
> 时间：2012-05-18T18:22:23.623
> 
> 标签：php, mysql, database, apache, joomla

在将**joomla 2.5.3 版**从 Lampp 移植到网络服务器后，我遇到了以下问题：我无法登录到我的管理区域：发生了什么！？

```
500 - An error has occurred.
Return to Control Panel 
```

虽然通过 phpmyadmin 移植 db-tables 一切都很顺利，但是 - 突然我得到了以下错误......对于用户表......

MySQL 说 ,,, [我猜它是用前缀告诉我的 - 一个初步通知告诉我，由于某些错误，用户表没有被移植......（猜测本地和“网络服务器- 数据库不是 100 % 相似和等价的......你说什么！？但是 - 除此之外 - 如果你仔细看看表格的数量，我们会发现有表格丢失了......这很重要....我忍不住 - 有几张桌子不见了。！！

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'USING BTREE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=9' at line 17 
```

所以我必须手动完成用户表的移植。但正如我现在所看到的 - 缺少更多的表。大约有 5 到 7 个表丢失，并且 - 如上所述 - 我无法登录

```
500 - An error has occurred.
Return to Control Panel 
```

一些发现：有朋友告诉我，这与数据库的合规性有关——本地数据库不像网络服务器上的数据库。

所以我决定重新上传用户区的完整 db-stucture .. ar 5 到 7 [!?] 表，不是吗！？所以现在我需要一些新的 joomla 版本的表格 - 我需要完整的表格 - 与 joomla 版本 2.5.4 中的“用户”有关的所有内容

猜猜这些是下表：

```
oqlgu_user_notes    
oqlgu_user_profiles     
oqlgu_user_usergroup_map    
oqlgu_usergroups
oqlgu_users 
```

**两个问题：**这些都是我需要的表吗？你能告诉我在哪里可以得到它们吗！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:33:26.447

您的 MySQL 数据库版本是否匹配？您需要在两台机器上使用相同版本的 MySQL，或者调整 SQL 以匹配生产服务器上的版本。

> 在 MySQL 5.0.60 之前，这个选项只能在 ON tbl_name 子句之前给出。从 5.0.60 开始不推荐在此位置使用该选项，并且在未来的 MySQL 版本中将删除对它的支持。如果在前面和后面的位置都给出了 index_type 选项，则应用最后一个选项。
> 
> TYPE type_name 被识别为 USING type_name 的同义词。但是，USING 是首选形式。

# android - 如何将单选按钮放在列表视图中

> ID：10657819
> 
> 赞同：0
> 
> 时间：2012-05-18T18:22:24.383
> 
> 标签：android, eclipse

我该怎么做，我想在其中显示 1 个单选按钮和 1 个复选框

listview，你能帮我解决这个问题吗？我还是初学者，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:32:14.413

为什么要 listView 和 RadioButton 和 CheckBox，可以使用 TableLayout、TableRow 和 ScrollPane 来实现。但是，如果您想这样做，请使用 BaseAdapter。

我认为你需要实现一个自定义的Adapter（即扩展BaseAdapter类） BaseAdapter类是一个abstart类，它已经实现了ListAdapter、SpinnerAdapter和Adapter接口，并且具有构建Custom Adapter的基本基础。

# git - 分支和存储库 URL 的 Git 插件参数？

> ID：10657820
> 
> 赞同：2
> 
> 时间：2012-05-18T18:22:26.350
> 
> 标签：git, continuous-integration, branch, jenkins

我正在尝试使用 Cloudbees 的 Folders Plugin 为文件夹设置“fork”和“branch”环境变量。这样，当开发人员创建功能分支时，他们可以复制文件夹，在文件夹级别更新两个环境变量，然后为其分支执行 CI 作业。

我似乎无法让 Git 插件为“存储库 url”和“分支”配置选项使用变量。如果我设置了一个参数化的作业，那效果很好，但不是来自文件夹插件或 envinject 插件。

有人让这个工作吗？

# android - Phonegap 将照片上传到网站

> ID：10657821
> 
> 赞同：3
> 
> 时间：2012-05-18T18:22:51.330
> 
> 标签：android, cordova, image-uploading

您好我正在使用android开发一个带有phonegap的应用程序，我想让用户拍照然后上传。我非常了解在 phonegap 方面该做什么，但我需要在网站方面做什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T19:35:28.373

这里有几篇很好的文章。

[使用 phonegap 将文件上传到远程服务器](http://zacvineyard.com/blog/2011/03/upload-a-file-to-a-remote-server-with-phonegap)

[在android上使用phonegap上传图片](https://www.ibm.com/developerworks/mydeveloperworks/blogs/94e7fded-7162-445e-8ceb-97a2140866a9/entry/upload_a_picture_using_phonegap_on_android8?lang=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:34:22.717

我不确定您要使用哪种语言，但您应该查看此线程：

[使用 PhoneGap 将照片从 iPhone 上传到 PHP](https://stackoverflow.com/questions/5286744/upload-photo-from-iphone-to-php-using-phonegap)

# jquery - 棘手的高亮旋转 JQuery - 计时器和选择器

> ID：10657825
> 
> 赞同：0
> 
> 时间：2012-05-18T18:23:09.220
> 
> 标签：jquery, css, jquery-selectors, timer

所以这是一个有趣的项目。我在一个页面上显示了 4 个缩略图。每隔几秒钟，应突出显示这些缩略图中的一个。（高亮表示带有灰色背景的新图像在普通拇指上可见）鼠标悬停时，我需要暂停计时器。我知道我很接近！在页面加载时，第一张图像确实会自动突出显示，但其他图像永远不会自动突出显示。这是JS：

```
 $(function() { // Shorthand for $(document).ready(function() {
        function nextImage() {
        var next = $('div.activeThumb.currentHighlight').
              removeClass('currentHighlight'). // Unhighlight old one
              next('div.activeThumb'); // Find next one
        if (next.length == 0) { // Cycle back to the first
              next = $('div.activeThumb:first');                  
        } 
        next.addClass('currentHighlight'); // Highlight new one                     
   }
   var timer = null;
   $('a.aThumb').hover(function() {
        clearInterval(timer); // Stop on hover
        $('div.activeThumb.currentHighlight').
              removeClass('currentHighlight');//Remove whatever the current auto                highlight is. :)
  }, function() {
        setInterval(nextImage, 2000); //Restart on exit 
  });
  nextImage(); // Highlight first image 
  setInterval(nextImage, 2000); // Start cycle
  }); 
```

如果您愿意，可以使用 html 和 css 查看测试页面。设置有点奇怪。 [http://cartercallahan.com/TestSite/javaSlider2/](http://cartercallahan.com/TestSite/javaSlider2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:36:52.080

下一个方法与您预期的不一样。我有一个基于索引的方法，应该适合你。jsfiddle 示例：http: [//jsfiddle.net/lucuma/pm6fA/5/](http://jsfiddle.net/lucuma/pm6fA/5/)

您可以在缩略图数组中移动时设置索引并增加该索引。

```
var activeClass = 'currentHighlight';
var timer;
var $thumbs;
var index = 0;

function nextImage() {   
      $thumbs.eq(index).removeClass(activeClass);
      index = (index+1) % $thumbs.length;
      $thumbs.eq(index).addClass(activeClass);      
  }

$(function() { 

    $('a.aThumb').hover(function() {
        clearInterval(timer); // Stop on hover
        $('div.activeThumb.currentHighlight').
            removeClass('currentHighlight');
  }, function() {
        timer = setInterval("nextImage()", 2000); //Restart on exit 
  });

    $thumbs = $('div.activeThumb');
    $thumbs.eq(index).addClass('currentHighlight');
    timer= setInterval("nextImage()", 2000); // Start cycle

});​ 
```

# c# - 在使用 Entity Framework Code First 迭代测试时，如何避免非常慢的模型构建时间？

> ID：10657827
> 
> 赞同：1
> 
> 时间：2012-05-18T18:23:13.760
> 
> 标签：c#, testing

我们首先使用带有大量实体的 EF 代码。DbContext 中的 OnModelCreating() 方法可能需要 30-40 秒才能完成。这对我们的应用程序来说很好，但是在尝试迭代编写测试时非常令人沮丧（这些测试会命中数据库，而不是我们想要使用 LINQ to 对象的测试）。每次我在调试过程中启动单例测试时，我都必须等待构建 EF 模型。

有人对提高性能有什么建议吗？

我们在 EF 4.3.1 中使用 NUnit，并在 Visual Studio 中使用 Resharper NUnit 运行器运行测试。

# jquery - Javascript 用图片替换图片文本链接，但忽略现有的 IMG 标签

> ID：10657828
> 
> 赞同：0
> 
> 时间：2012-05-18T18:23:34.620
> 
> 标签：jquery, image

我想用真实图像而不是图像链接替换页面上的代码。我已经可以根据另一个 stackoverflow 答案做到这一点。

但我想知道是否有办法忽略 IMG 标签中包含的任何内容。谢谢！

```
$("#photos li").each(function() {
        $(this).html($(this).html().replace(/(http:\/\/\S+(\.png|\.jpg|\.gif))/g, '<a href="$1" class="fancybox" rel="gallery1"><img src="$1" /></a>')); 
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:00:36.163

看起来列表包含一组 URL，而不是链接。

```
$("#photos li").each(function() {
    if(!$(this).find('img').length){
         $(this).html($(this).html().replace(/(http:\/\/\S+(\.png|\.jpg|\.gif))/g, '<a href="$1" class="fancybox" rel="gallery1"><img src="$1" /></a>')); 
    }
}); 
```

这当然取决于您的 HTML 的结构。

[JSF](http://jsfiddle.net/LaEpj/)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:01:17.883

您不应该只将正则表达式应用于 html。很难理解，也很难预测它有什么副作用。相反，您应该利用拥有完全解析的 DOM 树的优势，并且只传递您关心的那些元素：文本节点！

此外，我建议您不要编写类似`"<img src="$1" />"`. 如果 $1 包含一些奇怪的东西，那么奇怪的事情就会发生。没有必要考虑这可能导致的所有事情，因为一个非常简单的解决方法是：`jQuery('<img />').attr('src', someTextWithNotTooWellCheckedContent)`.

这是一个关于它如何工作的例子：

```
jQuery('#photos li').find('*').contents().filter(function() {
  return this.nodeType == 3;
}).each(function(i, elem)
        {
            var matches = /(.*)(http:\/\/\S+(?:\.png|\.jpg|\.gif))(.*)/g.exec(elem.wholeText);
            if (matches)
            {
                var parent = elem.parentNode;
                var before = matches[1];
                var replace = jQuery('<a />').attr('href', matches[2]).append(jQuery('<img />').attr('href', matches[2]))[0];
                var after = matches[3];
                parent.insertBefore(document.createTextNode(before), elem);
                parent.insertBefore(replace, elem);
                parent.insertBefore(document.createTextNode(after), elem);
                parent.removeChild(elem);
            }
        }); 
```

在行动：http: [//jsfiddle.net/B4GPt/](http://jsfiddle.net/B4GPt/)

PS：您可能需要也可能不需要通过替换来扩展上面的代码，`find('*')`具体`find('*').andSelf()`取决于您的 html 结构和意图。

# c# - 是否有 C# 的 atoi 实现

> ID：10657836
> 
> 赞同：1
> 
> 时间：2012-05-18T18:24:08.797
> 
> 标签：c#, atoi

我有一个保存为字符串的数字文件。我希望将此数据加载为 char[] 然后将此数组转换为整数值。我有几个值要加载，并试图避免创建数千个临时字符串的开销..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T18:27:18.707

是的

```
int.Parse(string) 
```

如果您绝对必须将字符串转换为字符数组（不知道为什么），您可以使用：

```
int.Parse(new string(myCharArray)); 
```

进一步说明...

> 我希望将此数据加载为 char[] 然后将此数组转换为整数值。

是否有特殊原因使用 a`char[]`而不是仅从文件中读取字符串？您将需要将 a`string`转换为`int`无论如何（使用标准转换方法），因此这似乎是一个浪费的步骤。

> 我有几个值要加载，并试图避免创建数千个临时字符串的开销..

您应该只需要为从文件中读取的每个字符串创建一个字符串。我不知道这里涉及到什么其他处理，但是从文件中读取一个字符串然后转换为一个`int`不会创建不必要的临时文件。

如果您正在执行大量/未知数量的字符串连接，那么您应该使用 a `StringBuilder`来构建您的输入，因为它在幕后充当可变字符串（在创建它时也将其初始化为足够大的大小）。即便如此，从磁盘读取数据将（应该）花费*更长*的时间，而不是创建这些字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T20:53:40.443

basically

```
 public static int StringToInt( char[] ch )
        {
            int length = ch.Length;
            int i = 0;
            int lastNumber = 0;
            int returnNumber = 0;
            bool numberNegative = false;
            int startPoint = 0;

            if ( ch[ 0 ] == '-' )
            {
                numberNegative = true;
                startPoint = 1;
            }

            for ( i = startPoint; i < length; i++ )
            {
                if ( ch[ i ] == ' ' )
                {
                    continue;
                }
                else
                {
                    if ( ( ch[ i ] >= '0' ) && ch[ i ] <= '9' )
                    {
                        returnNumber = ch[ i ] - '0';
                        if ( i > 0 )
                            lastNumber = lastNumber * 10;
                        lastNumber = lastNumber + returnNumber;
                    }
                    else
                    {
                        break;
                    }
                }
            }
            if ( numberNegative )
                lastNumber = -1 * lastNumber;

            return lastNumber;
        } 
```

Which is from [http://www.csharptricks.com/blog/2006/09/string-to-integer-in-c-net.html](http://www.csharptricks.com/blog/2006/09/string-to-integer-in-c-net.html) with the string replaced with char[]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T18:25:59.797

有几种方法：

*   `Convert.ToInt32` *^([[MSDN]](http://msdn.microsoft.com/en-us/library/system.convert.toint32.aspx))*
*   `int.Parse` *^([[MSDN]](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx))*

虽然，这些方法处理`string`对象，而不是`char[]`. 在 C# 中，大多数时候，`char[]`由于内置`string`类型*^([[MSDN]](http://msdn.microsoft.com/en-us/library/system.string.aspx))* ，您不会像在 C 中那样处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-12T18:08:40.383

这里也是 atoi() 的一种可能实现

```
int atoi(const char *s)
{
    int n=0, neg=0;
    while (isspace(*s)) s++;
    switch (*s) {
        case '-': neg=1;
        case '+': s++;
    }
    /* Compute n as a negative number to avoid overflow on INT_MIN */
    while (isdigit(*s))
        n = 10*n - (*s++ - '0');
    return neg ? n : -n;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-04-01T12:57:36.270

```
char c = '1';
int i = Convert.ToInt32(c.ToString(), 10); /*base 10 conversion*/ 
```

# javascript - 流图：两个问题

> ID：10657838
> 
> 赞同：2
> 
> 时间：2012-05-18T18:24:11.137
> 
> 标签：javascript, graph, charts, d3.js, stream-graph

我一直在玩 D3.js，我正在尝试使用实时数据制作流图可视化。

我确实研究了这篇文章 [http://bost.ocks.org/mike/path/](http://bost.ocks.org/mike/path/)

我还阅读了这个问题并回答 [了矩形内的 Svg 剪辑路径不起作用](https://stackoverflow.com/questions/10486896/svg-clip-path-within-rectangle-does-not-work) ，但这是一条线。我确实有一个 d3.svg.area 对象

然后我读了这篇文章 [D3 Real-Time streamgraph (Graph Data Visualization)](https://stackoverflow.com/questions/9664642/d3-real-time-streamgraph-graph-data-visualization) 但仍然找不到任何答案

我的两个问题：

*   绘制流图时，我注意到图总是设置在底部。每次刷新计算函数都会找到最大数据并将图形底部设置在绘制图形的元素底部。

    ```
    var area = d3.svg.area()
       .x(function(data) { return data.x * width / Xmaximum; })
       .y0(function(data) { return height - data.y0 * height / Ymaximum; })
       .y1(function(data) { return height - (data.y + data.y0) * height / Ymaximum; }); 
    ```

我该怎么做才能让图形位于轴的中间？我想我必须玩弄面积的 x、y0 和 y1，但究竟如何？

*   如果您尝试我的代码，则图表的一部分显示在左侧。我知道有问题：

    ```
    vis.append("defs").append("clipPath")
       .attr("id", "clip")
      .append("rect")
       .attr("width", width)
       .attr("height", height);

     vis.append("g")
       .attr("clip-path", "url(#clip)"); 
    ```

我在其他主题和网络上搜索任何回复，但我一直被困在这里！

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test visu</title>
    <style>
        .line {
            fill: none;
            stroke: #000;
            stroke-width: 1.5px;
        }
        .axis path, .axis line {
            margin-left: 30px;
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }
        svg {
            font: 10px sans-serif;
        }

        #restart{
            visibility: hidden;
        }

        #visu{
            margin-left: 70px;
            //border: 5px solid black;
            width: 900px;
            height: 500px;
        }

    </style>
</head>

<body>
    <div id="visu">
        <script src="http://mbostock.github.com/d3/d3.js?2.7.2"></script>
            var CONS = 100;

            var layers_number = 4;
            var samples_number = 50;

            var margin = {top: 6, right: 0, bottom: 6, left: 40};
            var width = 900 - margin.right;
            var height = 500 - margin.top - margin.bottom;

            var Xmaximum = samples_number - 1;
            var Ymaximum = CONS * layers_number;

            var initial_table = new Array();

            for (var i = 0 ; i < layers_number ; ++i){
                initial_table[i] = new Array();
                for (var j = 0 ; j < samples_number ; ++j){
                    initial_table[i][j] = randomNber();
                }
            }

            var values = new Array();
            for (var i = 0 ; i < layers_number ; ++i)
                values[i] = new Array();

            var data0 = d3.layout.stack().offset("wiggle")(init_layers(layers_number,samples_number));

            function color (indice){
                if (indice == 0)
                    return "green";
                else if (indice == 1)
                    return "blue";
                else if (indice == 2)
                    return "red";
                else if (indice == 3)
                    return "black";
                return "black";
            }

            var y = d3.scale.linear()
                              .domain([0, Ymaximum])
                              .range([height, 0]);

            var area = d3.svg.area()
                .x(function(data) { return data.x * width / Xmaximum; })
                .y0(function(data) { return height - data.y0 * height / Ymaximum; })
                .y1(function(data) { return height - (data.y + data.y0) * height / Ymaximum; });

            var vis = d3.select("div")
                .append("svg")
                  .style("margin-left", -margin.left + "px")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            vis.append("defs").append("clipPath")
                  .attr("id", "clip")
                .append("rect")
                  .attr("width", width)
                  .attr("height", height);

            vis.append("g")
                .attr("clip-path", "url(#clip)");

            vis.selectAll("path")
                .data(data0)
                .enter()
                .append("path")
                .style("fill", function(data, indice) { return color(indice); })
                .attr("d", area);

            vis.append("g")
                .attr("class", "y axis")
                  .call(d3.svg.axis().scale(y).ticks(5).orient("left"));

            transition();

            function transition() {
                data0 = d3.layout.stack().offset("wiggle")(update_layers(layers_number,samples_number));

                vis.selectAll("path")
                    .data(data0)
                    .attr("d", area)
                    .attr("transform", null)
                    .transition()
                    .duration(860)
                    .ease("linear")
                    .attr("transform", "translate(" + -(width / samples_number) + ")")
                    .each("end", function (data,indice) {
                        if (indice==0) transition();
                    });

                for (var i = 0 ; i < values.length ; ++i)
                    values[i].shift();
            }

            function init_layers(layers_number, samples_number) {
                return d3.range(layers_number).map(function(data,indice) {
                    for (var i = 0 ; i < samples_number ; i++)
                        values[indice][i] = initial_table[indice][i];
                    return values[indice].map(stream_index);
                });
            }

            function update_layers(layers_number, samples_number) {
                return d3.range(layers_number).map(function(data,indice) {
                    values[indice][samples_number] = randomNber();
                    return values[indice].map(stream_index);
                });
            }

            function stream_index(data, indice) {
                return {x: indice, y: Math.max(0, data)};
            }

            function randomNber(){
                return parseInt(Math.random()*100)+1;
            }   

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:37:27.913

对于居中流的问题 - 使用堆栈布局的偏移功能：

[https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-offset](https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-offset)

# python - 即使单个项目在解释器中显示为等效项，Python 评估也会返回 False

> ID：10657840
> 
> 赞同：2
> 
> 时间：2012-05-18T18:24:15.587
> 
> 标签：python, boolean, return

为什么这不起作用？

```
def straight(ranks):
    "Return True if the ordered ranks form a 5-card straight."
    return range(max(ranks)-4, max(ranks)+1) == ranks.sort() 
```

假设等级为：

```
>>> ranks = [9, 8, 7, 6, 5]
>>> range(max(ranks)-4, max(ranks)+1)
[5, 6, 7, 8, 9]
>>> ranks.sort()
[5, 6, 7, 8, 9] 
```

那为什么是：

```
>>> range(max(s)-4,max(s)+1) == s.sort()
False 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T18:24:57.817

`s.sort()`返回`None`，因为它对列表进行了适当的排序。使用`sorted(s)`.

```
>>> s = [1,3,2]
>>> repr(s.sort())
'None'
>>> repr(s)
'[1, 2, 3]'
>>> repr(sorted(s))
'[1, 2, 3]' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:32:46.860

因为`ranks.sort()`等于`None`。用于`sorted(ranks)`比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T18:47:57.700

rank.sort() 在列表中就地排序，因此返回 None...如果要返回列表，请使用 sorted()。

# opencv - cv::Mat 是线程安全的（原子赋值+引用计数）吗？

> ID：10657841
> 
> 赞同：11
> 
> 时间：2012-05-18T18:24:22.450
> 
> 标签：opencv, thread-safety, atomic, reference-counting

我正在尝试跨线程共享图像，该图像仅以只读方式使用。通常我用 boost::shared_ptrs 做这种事情，但是由于 cv::Mat 已经是下面的引用计数容器，我一直在尝试以相同的方式使用它，假设它是基于对线程安全的引用的线程安全的在这里引用计数：

*   ~~[http://opencv.willowgarage.com/documentation/cpp/basic_structures.html](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)~~
*   [https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html](https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html)

但是，我遇到的问题可能表明它们实际上不是线程安全的；该分配是非原子的。有时我会在引用计数增量中得到一个段错误，这意味着原始对象已经被销毁。

所以具体的问题是：

*   cv::Mat 分配是原子的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-27T22:49:56.963

不，分配不是完全线程安全的。

我编写了一个创建两个线程的测试程序。它们都包含指向包含 cv::Mat 的对象的 shared_ptr。一个线程将该 cv::Mat 分配给一个随机生成的图像，而另一个线程制作该 cv::Mat 的本地副本。

这会立即因双重释放而崩溃。如果写入线程在复制线程开始复制时覆盖了先前的线程，它将复制一个 cv::Mat，其内部数据 ptr 刚刚被删除。当复制线程的本地副本超出范围时，它会尝试再次释放它。

```
volatile bool g_done = false;

struct Object
{
   cv::Mat cvMask;
};

////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////
void thread1(boost::shared_ptr<Object> sharedObj)
{
   while(!g_done)
   {
      sharedObj->cvMask = cv::Mat::ones(1 + (rand()% 1024), 1+(rand()%768), CV_8UC1);
   }
}

////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////
void thread2(boost::shared_ptr<Object> sharedObj)
{
   while(!g_done)
   {
      cv::Mat localCopy = sharedObj->cvMask;
   }
}

////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////
void sigHandler(int signum)
{
   fprintf(stderr, "Quitting...\n");
   g_done = true;
}

////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////
int main(int argc, char** argv)
{
   signal(SIGINT, sigHandler);

   boost::shared_ptr<Object> sharedObj(new Object);
   sharedObj->cvMask = cv::Mat::ones(1024,768, CV_8UC1);

   boost::thread* t1 = new boost::thread(boost::bind(&thread1, _1), sharedObj);
   boost::thread* t2 = new boost::thread(boost::bind(&thread2, _1), sharedObj);

   while(!g_done)
   {
      usleep(1e6);
   }

   t1->join();
   t2->join();
   delete t1;
   delete t2;

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T17:57:44.267

具体问题，简短回答：是的。

您可以检查 cv::Mat 实现细节`core/src/matrix.cpp`和`include/.../core/core.hpp`

OpenCV 来源的一些代码摘录：

```
 if( refcount )
        CV_XADD(refcount, 1); 
```

其中 CV_XADD 是原子测试和增量。

```
inline void Mat::addref()
{ if( refcount ) CV_XADD(refcount, 1); }

inline void Mat::release()
{
    if( refcount && CV_XADD(refcount, -1) == 1 )
        deallocate();
    data = datastart = dataend = datalimit = 0;
    size.p[0] = 0;
    refcount = 0;
} 
```

**额外的**

智能指针确实提供了一定程度的线程安全，但这并不意味着它们在所有可能的情况下都是完全线程安全的。具体来说，如果您尝试在共享 ptr 被另一个线程破坏的同时复制它，您将失败。这不是实现中的错误，而是速度和实用性之间的设计权衡。

所有主要的共享 ptr 实现（boost、stl）都遵循这种方法。

# jms - 如何以编程方式配置核心和/或 JMS 桥接器？

> ID：10657845
> 
> 赞同：5
> 
> 时间：2012-05-18T18:24:37.943
> 
> 标签：jms, hornetq

我想找到一种以编程方式在两个 HornetQ 实例之间配置核心网桥（以及，如果可能的话，JMS）的方法。

HornetQ 文档中有易于使用的嵌入教程，但没有一个描述如何将核心桥添加到等式中。此外，还有可用的 BridgeConfiguration 类，但它只是一个 POJO，配置本身的占位符，我无法使用 HornetQ 实例启动和运行它。特别是，除其他外，定义连接似乎令人费解。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T10:50:12.160

抱歉这个弱答案，我自己从未尝试过。但是创建一个`BrideConfiguration`实例，设置它的属性并将其添加到网桥配置列表中。

```
Configuration.getBridgeConfigurations().add(bridgeConfiguration) 
```

我希望这至少可以为如何实现这一点提供一些提示。

# java - 登录后避免返回页面呈现

> ID：10657846
> 
> 赞同：1
> 
> 时间：2012-05-18T18:24:38.550
> 
> 标签：java, html, jsf, browser-cache

我见过：

[如何在所有浏览器中控制网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers/2068407) [在此处输入链接描述](https://stackoverflow.com/questions/10330336/after-logout-click-on-back-button-cache-issue)

我在 JSF 1.2 页面中使用过：

```
<meta http-equiv="Cache-control" content="no-store, no-cache, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1"/>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"/> 
```

它在 IE8 e Chrome 中不起作用！当我使用后退按钮时，它再次显示页面！怎么了？问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:29:08.530

[这是如何在所有浏览器中控制网页缓存](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers/2068407)的引用？您在问题中链接但显然被忽略了：

> 请注意，当通过 HTTP 提供页面并且 HTTP 响应标头和 HTML 元标记中**都**存在标头时，响应标头中指定的标头将优先于 HTML 元标记。HTML 元标记仅在从本地磁盘文件系统查看页面时使用。另见[W3 HTML 规范第 5.2.2 章](http://www.w3.org/TR/html4/charset.html#h-5.2.2)。当您不以编程方式指定它们时请注意这一点，因为网络服务器可以包含一些默认值。要验证一个和另一个，您可以使用 Firebug Net 面板查看/调试它们。

这显然是事实。您需要在真实的 HTTP 响应中设置这些标头，而不是在其 HTML 输出中。对于 JSF 1.x Web 应用程序，最好的方法是创建一个[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)来执行任务。这是一个启动示例：

```
public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletResponse response = (HttpServletResponse) res;
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        response.setDateHeader("Expires", 0); // Proxies.
        chain.doFilter(req, res);
    }

    // ...
} 
```

将其映射`web.xml`到感兴趣的 URL 模式，例如，`*.jsf`或`FacesServlet`.

# c# - 获取 ParameterInfo 参数的引用

> ID：10657847
> 
> 赞同：1
> 
> 时间：2012-05-18T18:24:42.967
> 
> 标签：c#, reflection, stack

我有方法

```
 public void SomeMethod(string PersonName,int Age)
     {

        // get call stack
        StackTrace stackTrace = new StackTrace();

        // should equal "SomeMethod"
        var MethodName = stackTrace.GetFrame(0).GetMethod().Name;

        // should be ParameterInfo of parameter "PersonName"
        var firstParam = stackTrace.GetFrame(0).GetMethod().GetParameters()[0];

        // Here is where I get stuck !!!!!!!
        var t = firstParam.GetValue(); 
```

**我如何能够获得对 firstParam 参数指向的位置的引用以获取它的值？**

我知道我可以通过 PersonName 获得该信息，但我想通过 firstParam 检索该信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:41:43.313

反射信息不包含对象当前状态的数据，只是参数信息的元数据。即使你有一个`PropertyInfo`类，你也必须为它提供一个对象以使其具有任何值的含义。最好只使用提供的参数值。

# c# - Workflow Foundation 中有任何类似于“For Each”的活动吗？

> ID：10657848
> 
> 赞同：2
> 
> 时间：2012-05-18T18:24:46.087
> 
> 标签：c#, .net, workflow, workflow-foundation-4, workflow-foundation

我是 WF 的新手。我可以看到 If/Else ,While 活动。是否有任何活动可以在 WF 中执行“For Each”操作。我计划将对象列表传递给 WF。我需要对每个对象执行一些操作.. 最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:39:34.780

在 WF4 中，您有[ForEach](http://msdn.microsoft.com/en-us/library/dd647676)活动。在 WF3 中没有这样的活动，但您可以查看[顺序工作流简介以](http://msdn.microsoft.com/en-us/library/dd692925.aspx)获取有关如何遍历文件列表的教程。您可以根据自己的需要进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:55:13.620

正如 Patko 所说，WF4 有一个 Foreach 活动。但是由于我正在使用 WF3.5 ，因此不得不改用 Replicator 活动。

# node.js - 块不适用于nodejs和jade

> ID：10657851
> 
> 赞同：3
> 
> 时间：2012-05-18T18:24:49.407
> 
> 标签：node.js, pug, block

读了几个小时，我很确定我了解 Jade 中的积木是如何工作的。这是我的`layout.jade`文件：

```
!!! 5
html(lang="en")
  head
    title= title
    link(rel= 'stylesheet', href= '/style.css')
  body
    h1 Placeholder Title
    block content 
```

还有我的 index.jade 文件

```
extends layout
block content
  p Hello World 
```

但是，当我访问时`index.jade`，唯一出现的是

> “占位符标题”

中的“内容”块`layout.jade`永远不会被中的内容块替换`index.jade`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:19:27.693

要使块工作，您需要执行 { layout: false }。更多信息可以在文档中找到：[https ://github.com/visionmedia/jade#template-inheritance](https://github.com/visionmedia/jade#template-inheritance)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T21:59:21.160

我没有看到您的路由处理代码，但我假设您正在执行以下操作：

```
res.render('layout') 
```

代替：

```
res.render('index') 
```

您必须渲染 index.jade（`extends`布局文件），而**不是**layout.jade（类似于“基类”）。

# java - java this(空)

> ID：10657859
> 
> 赞同：9
> 
> 时间：2012-05-18T18:25:32.103
> 
> 标签：java, this

我想知道这是什么意思？

```
public Settings() {
    this(null);
} 
```

上面的代码是一个“设置”类的构造函数。this(null) 在这里是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T18:27:45.960

```
public Settings() {
    this(null); //this is calling the next constructor
}
public Settings(Object o) {
//  this one
} 
```

这通常用于传递默认值，因此您可以决定使用一个构造函数或另一个..

```
public Person() {
    this("Name"); 
}
public Person(String name) {
    this(name,20)
}
public Person(String name, int age) {
    //...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-18T18:27:19.770

这意味着您正在调用一个重载的构造函数，该构造函数采用`Object`某种形式，但您不传递对象，而是传递一个普通的`null`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T18:27:04.193

它是一个构造函数，它调用同一个类中的另一个构造函数。

你大概有这样的事情：

```
public class Settings {
    public Settings() {
        this(null);  // <-- This is calling the constructor below
    }

    public Settings(object someValue) {
    }
} 
```

通常使用这种模式，以便您可以提供具有较少参数的构造函数（以方便调用者使用），但仍将逻辑包含在一个位置（被调用的构造函数）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-18T18:27:18.610

它在 Settings 类中调用不同的构造函数。寻找另一个接受单个参数的构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T18:27:39.767

它调用默认构造函数传递 null 作为参数...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T18:30:24.397

> 尝试阅读Java中的重载构造函数，然后调用只有一个参数的构造函数..

.

```
 public Settings() {
        this(null);
    }

   public Settings(Object obj){

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T18:50:25.010

这`Constructor Chaining`在`Java`. 通过这个调用，您实际上调用了类对象的重载构造函数。例如

```
class Employee extends Person {
    public Employee() {
        this("2")  //Invoke Employee's overloaded constructor";
    }

    public Employee(String s) {
        System.out.println(s);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-01T20:59:39.353

这基本上调用了与提到的每个相同的类中的另一个参数化构造函数。

这里要注意一件事，如果没有可用的参数化构造函数，它将产生错误。

我不认为将 this() 传递给 null 值。但问某人可能是一个棘手的问题。:)

# jquery - 使用 jquery 选择文本框值，修改选择器语法

> ID：10657877
> 
> 赞同：1
> 
> 时间：2012-05-18T18:26:51.487
> 
> 标签：jquery, syntax

我想使用以下 jquery 代码选择名称为 studentid[1] 的文本框的值：

```
var id = 1;
var a = $("input[type='text'][name='studentid\["+id+"\]").val(); 
```

它在警告框中产生“未定义”的输出。我的语法正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:30:32.303

您已经省略了结束单引号和结束方括号。这是正确的版本，在适当的地方带有双反斜杠：

```
var a = $("input[type='text'][name='studentid\\["+id+"\\]']").val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:28:55.590

我认为这将[在 JsFiddle 上工作 Demo](http://jsfiddle.net/rj83a/)

```
var id = 1;
var a = $("input[type=text][name=studentid["+id+"]]").val(); 
alert(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T18:31:58.630

尝试使用两个反斜杠。根据 jQuery[文档](http://api.jquery.com/category/selectors/)：

> 如果您希望使用任何元字符（例如 !"#$%&'()*+,./:;<=>?@[]^`{|}~ ）作为 a 的文字部分名称，您必须使用两个反斜杠转义字符：\。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T18:35:10.547

`[`and`]`需要 2 个反斜杠来转义它们，而且您还缺少属性选择器的关闭`]`。

```
var id = 1;
var a = $("input[type='text'][name='studentid\\["+id+"\\]']").val(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T18:35:31.193

是的，那里有几个语法错误。您忘记插入尾括号和引号。此外，转义括号没有特殊需要。此代码工作正常：

```
$(":text[name='studentid[" + id + "]']").val(); 
```

**演示：http:** [//jsfiddle.net/jW2MR/](http://jsfiddle.net/jW2MR/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T18:36:02.193

这是你想要的吗？ [http://jsfiddle.net/J5jN8/](http://jsfiddle.net/J5jN8/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T18:44:49.277

```
var id =1;
$('input[type=text][name="A['+ id +']"]'); 
```

# regex - VBA 正则表达式匹配时间范围，如“1:30pm - 12:00am”

> ID：10657878
> 
> 赞同：6
> 
> 时间：2012-05-18T18:27:01.610
> 
> 标签：regex, vba, excel

我正在尝试使用 VBA 正则表达式来验证表单的时间范围：`#0:00xm - #0:00xm`where `x`is `a`or `p`. 所以字符串文字可能是`"1:30pm - 12:00am"`. 我想匹配具有这种模式的单元格。

当我在这个在线工具中使用正则表达式时：`http://public.kvalley.com/regex/regex.asp`并检查我的表达式，它匹配正确。

但是，当我在 VBA 中使用相同的表达式时，它不匹配。

```
Dim rRange As Range
Dim rCell As Range

Set rRange = Range("A2", "A4") '"G225")

For Each rCell In rRange.Cells
MsgBox (rCell.Value)
    If rCell.Value Like "^([0-9]{1,2}[:][0-9]{2}[apm]{2}[ ][-][ ][0-9]{1,2}[:][0-9]{2}[apm]{2})$" Then
    MsgBox ("YES")
        'rCell.Interior.Color = RGB(0, 250, 0)
    Else
    MsgBox ("NO")
        'rCell.Interior.Color = RGB(250, 0, 0)
    End If
Next rCell 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T19:16:50.797

对于任何关心的人，这是我的固定工作版本，特别感谢 dda 提供的更简单的 RegEx ^^：

```
Dim rRange As Range
Dim rCell As Range

Dim re As Object
Set re = CreateObject("vbscript.regexp")
With re
  .Pattern = "^\d\d?:\d\d[aApP][mM] - \d\d?:\d\d[aApP][mM]$"
  .Global = False
  .IgnoreCase = False
End With

Set rRange = Range("A2", "G225")

For Each rCell In rRange.Cells
    If re.Test(rCell) Then
        rCell.Interior.Color = RGB(0, 250, 0)
    Else
        rCell.Interior.Color = RGB(250, 0, 0)
    End If
Next rCell 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T18:59:26.593

让我们清理并改进您的正则表达式：

```
^\d\d?:\d\d[aApP][mM] - \d\d?:\d\d[aApP][mM]$ 
```

仅当整个单元格是您想要的日期格式时才会匹配，而不是其他（^ ***_* ___** $ 条件）。我添加了 a 和 A，以及 p 和 P 以确保没有大小写问题。

我在这台机器上没有 VBA/Excel，所以不能用我的正则表达式尝试你的代码，但正则表达式本身可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:29:42.030

在 Excel 中，转到单元格格式 > 数字 > 类别 > 自定义。您将看到大量时间类型格式。

您可能正在寻找的是 h:mm AM/PM

好的。我确实对此进行了更多研究，并意识到我的短视。

这更多的是你所追求的吗？我对使用 AM/PM 和未以这种方式格式化的单元格的时间值格式进行了基本测试。

```
Dim rRange As Range
Dim rCell As Range

Set rRange = Range("A2", "A4")

For Each rCell In rRange
    If InStr(1, UCase(rCell.Value), " AM") > 0 Or InStr(1, UCase(rCell.Value), " PM") > 0 Then
        If InStr(1, rCell.Value, ":") <> 0 Then Debug.Print rCell.Value
    End If
Next 
```

# javascript - Spine.js 关系问题（控制器，销毁父级时销毁子级）

> ID：10657881
> 
> 赞同：1
> 
> 时间：2012-05-18T18:27:15.737
> 
> 标签：javascript, model-view-controller, spine.js

我试图弄清楚与控制器的关系是如何工作的；关系文档很薄，没有涉及到这一点。我正在为类别和链接建模；每个Category 可以有很多链接与之关联，每个Link 必须属于一个Category。

这是一个带有基本示例的 jsFiddle：http: [//jsfiddle.net/grahamb/pTEvj/](http://jsfiddle.net/grahamb/pTEvj/)

首先，我不完全确定我的控制器设置是否正确。我的应用程序的其余部分使用文档中描述的“元素模式”，所以我在这里尝试做同样的事情。我有一个 Categories 控制器来处理创建新的类别，而 CategoriesItem 控制器管理各个类别（更新、销毁等）。Link 模型也是如此；它有一个 Links 控制器和一个 LinksItem 控制器。当我实例化一个新的 Categories 控制器时，它会创建一个新的 Links 控制器来配合它。

我在绑定到 LinksItem 上的 destroy 事件时遇到问题；单击按钮时，我的 destroy() 函数未触发。这似乎是一个 DOM 元素范围问题；我在控制器内的 this.el 中看不到我的删除按钮元素。我不确定如何解决这个问题。

最后，关于摧毁父母的问题。当我在 Category 模型上调用 destroy 时，它会孤立关联的 Link 模型。现在，当在 Category 上调用 destory 时，我正在手动销毁 Link 模型 - 这是正确的方法吗？GH 上的这个问题表明没有内置的东西可以解决这个问题：[https ://github.com/maccman/spine/issues/291](https://github.com/maccman/spine/issues/291)

# javascript - Backbone.js：无法绑定事件

> ID：10657882
> 
> 赞同：0
> 
> 时间：2012-05-18T18:27:17.703
> 
> 标签：javascript, html, backbone.js

我几乎尝试了一切，甚至完全复制了这个例子：[在这里][1]

但是我看不到它的工作原理。我已经为事件绑定尝试了多种替代方法，但它们似乎都不起作用。可能的原因是什么？

分区容器；

加载

我的事件绑定试验；

```
el: '#container',
        events: {
            "click button": "render"
        } 
```

还;

```
el: '#container',
    events: {
        "click button#add": "render"
    } 
```

最后是这个；

```
el: '#container',
events: {
            "click input[type=button]": "doSearch"  
        } 
```

有没有可能我做错了。此外，如果我让它工作，是否可以为 div 中的每个函数分配点击事件，给出它们的 id 而不是更通用的**“点击按钮”：“渲染”**？

**注意：**我无法获得包含在**代码**标记中的 html 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:40:34.923

您的输入按钮是容器的子元素吗？Backbone 不会找到视图元素范围之外的元素。

如果#add 是#container 的子元素，您可以执行“单击#add”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:40:06.180

首先，我假设您的代码来自 Backbone 视图，对吗？

#container div 是否存在于 DOM 中？我注意到您的示例在单击时调用渲染，但通常渲染是人们放置代码以实际渲染 HTML 模板的地方。

BackboneJS 上的 delegateEvents 文档使用以下渲染调用作为示例：

```
 render: function() {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
  }, 
```

请注意，在此触发之前，从技术上讲，该示例将没有任何内容可供您单击。

一个快速的测试方法是在应用程序启动后在控制台中运行它：

```
$("#container") 
```

如果这返回一个空的“[]”，那么你知道你有问题。要考虑的第二件事是它是否实际上是可点击的（因为它可能存在，但由于它的位置或大小而不能点击）。

因此，最终的测试将是在控制台中运行它并尝试单击 div：

```
$("#container").click(function() { alert('clicked');}); 
```

# android - 带有可见分隔线的不可点击的 Listview 项目

> ID：10657892
> 
> 赞同：3
> 
> 时间：2012-05-18T18:27:43.197
> 
> 标签：android, listview, user-interface, adapter, clickable

我想禁用单击 Listview 项目。一种解决方案是覆盖`areAllItemsEnabled()`以始终返回 false，并`isEnabled()`为特定位置返回 false。但是，这会导致特定 Listview 项目周围的分隔线消失。一些人建议返回 true for`areAllItemsEnabled()`和 false for `isEnabled()`，但这对我不起作用。我对手动放置分隔线犹豫不决，因为我需要将父布局添加到项目 XML。

有没有办法将 Listview 项目设置为不可点击并仍然保留

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:29:41.820

解决方案与您被告知要做的完全相反。您应该返回 false`areAllItemsEnabled()`并删除您对`isEnabled()`. 它对我来说非常有效，昨天我也在努力解决这个问题。

所有项目都将不可点击，`areAllItemsEnabled() == false`但会出现分隔线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-21T10:09:44.487

我也有这个问题，但覆盖这些适配器方法似乎很难看。然后一个帖子让我想到了一个想法，这个想法以前已经奏效了。在不应点击的视图上，只需调用`view.setOnClickListener(null)`.

繁荣，也许这是一种解决方法，而不是真正的解决方案，但它确实有效。我必须注意，我以编程方式将分隔线添加到`ListView`页脚，所以我有对分隔线的引用，我可以简单地`OnClickListener`将`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:15:53.553

在个人`View`上，尝试将其设置为不可点击：`view.setClickable(false)`。如果这不起作用，请尝试`view.setFocusable(false)`.

# image - 如何将转换为二进制的图像转换回图像？

> ID：10657895
> 
> 赞同：-4
> 
> 时间：2012-05-18T18:27:51.463
> 
> 标签：image, matlab, image-processing

我已将图像转换为二进制，但无法将其转换回图像。命令 imwrite 不起作用。下面是几行代码

```
info=imfinfo('map.jpg')
I=imread('map.jpg');
b=dec2bin(I); 
```

有人有解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:37:45.233

If you can visualize the image in matlab you could try `print`, this will save a figure to a file (jpeg by default IIRC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:26:51.213

将其转换为不再是逻辑数组：

```
Inew = uint8(I);
imshow(Inew); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:43:48.090

您可以使用`mat2gray`.

```
BinaryMatrix = eye(500);
imwrite(mat2gray(BinaryMatrix), 'imagefile.png', 'png'); 
```

# batch-file - 如何在用户输入中为 bat 脚本保留空格？

> ID：10657897
> 
> 赞同：1
> 
> 时间：2012-05-18T18:27:55.957
> 
> 标签：batch-file, spaces, preserve

我有一个 bat 脚本可以从 Active Directory 中转储用户名列表及其显示名称。在我们需要从有空格的组中转储名称之前，它非常有效。

```
@echo off
Set /p GROUP="Group Name: "

echo This window will close when finished!
echo Larger groups may take awhile!

 dsquery group -name %Group% | DSGET group -members | dsget user -samid -display > %GROUP%.txt 
```

有没有办法通过用户输入来保留空间？这是一个工作中的远程服务器，所以我没有安装应用程序或任何东西的权限，只需创建基本脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:42:38.783

是的，只需将 var 字符串包含在“”中，试试这个：

dsquery 组-名称“%Group%”| DSGET 组成员 | dsget 用户 -samid -display > %GROUP%.txt

# c++ - 从模板类继承的 C++ 模板类

> ID：10657900
> 
> 赞同：0
> 
> 时间：2012-05-18T18:28:08.553
> 
> 标签：c++, templates

我尝试让一个部分专用的模板类继承自另一个模板类。我不知道该怎么做。这是我的代码：

```
template < typename T>
struct SmallContainer
{
    typedef vector<T> type;
};

template<typename CONTAINER, typename T>
class AnotherClass : public CONTAINER<SmallContainer<T>::type>
{ // ..... }; 
```

并且 gcc 在 '<' 之前一直说预期的模板名称 令牌在 '<' 之前应为 '{' '<' 之前的令牌预期不合格 ID 令牌

我的对象的想法是让 AnotherClass 成为我想要的任何其他类型的向量的通用容器。

我试图做 template< template CONTAINER, typename T> 等...没有任何成功。任何的想法 ？谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:41:07.330

让用户指定容器的常用方法是将实际的容器*类*作为模板参数，而不仅仅是容器模板。这也是标准库指定容器适配器的方式。例如：

```
template <typename T, typename Container = std::vector<T>>
class Foo
{
public:
    typedef Container container_type;

    void multiply_all()
    {
        using std::begin;
        using std::end;

        for (auto it(begin(c)), e(end(c)); it != e; ++it)
        {
            *it = *it + *it;
        }
    }

private:
    container_type c;
}; 
```

现在用户可以创建其他实例，例如`Foo<int, CrazyContainer<int, true, Blue>> x;`，您无需担心其容器的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:30:00.463

这适用于只有一个模板参数的容器：

```
template< template< typename > class Container, typename T >
class AnotherClass
  : public Container< typename SmallContainer< T >::type >
{}; 
```

但是，这不适用于任何标准容器，因为它们具有额外的模板参数（如分配器）。

请注意，`typename`在此之前需要，`SmallContainer< T >::type`否则编译器将假定它引用了一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:31:53.203

这不能真正做到，无论如何都不能用 STL 容器。您可以为每个容器创建一个像 SmallContainer 这样的包装器，以便您可以提供默认参数，但 STL 容器在大多数情况下不共享公共参数。此外，无法匹配任意类型的第三方模板。但是，给定包装器或 C++11 别名，您可以将 CONTAINER 转换为模板模板参数。

请注意，没有一个标准库容器模板采用单个模板参数，它们具有您通常不使用的默认值，因此您通常只提供一个，但到目前为止，没有一个建议的答案适用于标准库模板。

# database - CouchBase 最大数据库容量

> ID：10657901
> 
> 赞同：1
> 
> 时间：2012-05-18T18:28:10.387
> 
> 标签：database, nosql, scalability, couchbase

使用 CouchBase 可以在一个节点上存储多少数据。我希望我的数据库水平扩展，每个节点最大为 400GB。如果 CouchBase 是内存数据库，我想实现起来会非常昂贵，因为我需要很多具有大量内存的机器，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:19:29.767

Couchbase 不是内存数据库。它有一个内置的缓存层，并将其所有数据保存到磁盘。要回答您的问题，Couchbase 节点的容量可以与您的可用硬盘空间一样多。建议您将工作集放入内存中以获得最佳性能。

# sql - 当表的行数不相等时，在 SQL 中唯一地连接行

> ID：10657903
> 
> 赞同：1
> 
> 时间：2012-05-18T18:28:17.753
> 
> 标签：sql, oracle, join

**背景：**

我正在研究一个用于跟踪电线镜头的大型数据库。目前，数据库 (Oracle) 围绕三个主要表构建：

1) 地图详细信息表。定义特定地图的所有顶级细节，例如县/区/市。每张地图都由下表中使用的序列号唯一标识。

2) 走廊长度表。基本上，当乌鸦飞过时，电线有多长，以及该走廊是在公共土地上还是在私人土地上。因此，这里定义的镜头只是从 A 到 B 的距离。

3) 电线长度表。此表存储有关可以在给定走廊中运行的不同电线的信息。每个工作电压有一行。因此，一条走廊可能有若干长度的电线，例如；12KV、33KV、66KV。

(1) 中总会有一个映射记录，但 (2) 和 (3) 中的行数是任意的，并且 (2) 和 (3) 中的行数通常不匹配。

**问题：**

我正在寻找一种方法来加入这三个表，以便每个镜头只报告一次。这最好通过例子来说明。下面是一个示例记录集：

```
Map Details:
-------------------------------------------
| SERIAL_NO | CNTY | DIST | MAP_NO (Name) |
|-----------------------------------------|
|         1 |   33 |   88 | 123-4567-8    |
-------------------------------------------

Corridor Details:
------------------------------------
| SERIAL_NO | PROPRTY_CD | CORR_FT |
|----------------------------------|
|         1 |     PUBLIC |     100 |
|         1 |    PRIVATE |     200 |
------------------------------------

Wire Details
---------------------------------
| SERIAL_NO | OPER_KV | WIRE_FT |
|-------------------------------|
|         1 |      12 |     300 |
|         1 |      33 |     200 |
|         1 |      66 |     200 |
--------------------------------- 
```

我追求的最终输出将类似于以下内容：

```
--------------------------------------------------------------------------------------
| SERIAL_NO | CNTY | DIST | MAP_NO (Name) | PROPRTY_CD | CORR_FT | OPER_KV | WIRE_FT |
|------------------------------------------------------------------------------------|
|         1 |   33 |   88 | 123-4567-8    |     PUBLIC |     100 |      12 |     300 |
|         1 |   33 |   88 | 123-4567-8    |    PRIVATE |     200 |      33 |     200 |
|         1 |   33 |   88 | 123-4567-8    |       NULL |    NULL |      66 |     200 |
-------------------------------------------------------------------------------------- 
```

***注意：*** 电线和走廊的镜头大部分时间都不匹配（为了简洁起见，这里没有显示电线倍增器等）。此外，与导线表（其中没有导线的走廊）相比，走廊表中的行数可能更多，反之亦然（其中有多条导线的走廊）。

我已经尝试了许多不同的方法来解决这个问题，但我似乎无法获得我想要的输出。我尝试过的每个连接都导致值被复制为或类似于以下内容：

```
BAD:
--------------------------------------------------------------------------------------
| SERIAL_NO | CNTY | DIST | MAP_NO (Name) | PROPRTY_CD | CORR_FT | OPER_KV | WIRE_FT |
|------------------------------------------------------------------------------------|
|         1 |   33 |   88 | 123-4567-8    |     PUBLIC |     100 |      12 |     300 |
|         1 |   33 |   88 | 123-4567-8    |     PUBLIC |     100 |      33 |     200 |
|         1 |   33 |   88 | 123-4567-8    |     PUBLIC |     100 |      66 |     200 |
|         1 |   33 |   88 | 123-4567-8    |    PRIVATE |     200 |      12 |     300 |
|         1 |   33 |   88 | 123-4567-8    |    PRIVATE |     200 |      33 |     200 |
|         1 |   33 |   88 | 123-4567-8    |    PRIVATE |     200 |      66 |     200 |
-------------------------------------------------------------------------------------- 
```

**概括：**

我为这个冗长的问题道歉，但解释我所追求的有点复杂。长话短说，我想并排列出两个子表中的所有行（无特定顺序），同时为两个表之间的行差异的列填充 NULL。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:02:15.380

The task in the way you set it up can be brute-forced in the following way

```
--pseudo-tables with sample data
with t_map  as (select 1 serial_no, 33 cnty,  88 dist, '12345678' map_no from dual),
 t_corr as (select 1 serial_no, 'PUBLIC' property_cd, 100 corr_ft from dual union all
            select 1, 'PRIVATE', 200 from dual),
 t_wire as (select 1 serial_no, 12 oper_kv, 300 wire_ft from dual union all 
            select 1, 33, 200 from dual union all
            select 1, 66, 200 from dual)
--query itself
select m.serial_no, m.cnty, m.dist, m.map_no, r.*
  from  t_map m join 
        (select nvl(c.serial_no, w.serial_no)  serial_no, c.property_cd, c.corr_ft, w.oper_kv, w.wire_Ft from (
                        (select t_corr.*, row_number() over(partition by serial_no order by serial_no) rn from t_corr) c 
              full join (select t_wire.*, row_number() over(partition by serial_no order by serial_no) rn from t_wire) w 
                     on c.serial_no = w.serial_no and (c.rn = w.rn)
                       )
        ) r on r.serial_no = m.serial_no; 
```

However, if I were you I would concern about questions asked in comments to your initial post ;)

# excel - 如何用正确的数据填充空白单元格而不覆盖其上方的数据

> ID：10657904
> 
> 赞同：0
> 
> 时间：2012-05-18T18:28:21.577
> 
> 标签：excel, vba

好的，我一直试图让这个工作，我想出了这个，但它显然不工作......

```
 With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
        .Calculation = xlCalculationManual
    End With

With wsJL
    Dim wsJL As Worksheet
    Set wsJL = Sheets("Jobs List")

        lastrow = wsJL.Cells(Rows.Count, "J").End(xlUp).Row
        fstcell = wsJL.Cells(Rows.Count, "I").End(xlUp).Row
        wsJL.Range("AA1:AD1").Copy wsJL.Range("J & fstcell:N" & lastrow)
End With 
```

这部分不起作用...

```
wsJL.Range("AA1:AD1").Copy wsJL.Range("J & fstcell:N" & lastrow) 
```

我想知道如何让它发挥作用......我从来没有见过这样的公式，虽然我的谷歌搜索所以我什至不知道它是否可能。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:34:05.123

你并没有完全让我跟随整个过程，但我认为你会这样做：

```
wsJL.Range("AA1:AD1").Copy wsJL.Range("J" & fstcell & ":N" & lastrow) 
```

请注意，`&`运算符可能无法在您的字符串中工作。

# r - 在R中重新定义对象的类

> ID：10657905
> 
> 赞同：1
> 
> 时间：2012-05-18T18:28:29.043
> 
> 标签：r, class, object, transform, coercion

我的对象具有“字符”类。gg

```
x <- rep(TRUE,4)
x <- replace(x,3,FALSE) 
```

我现在想将其强制/转换为一个*逻辑*类。如何更改 x 的类别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:35:21.440

我假设你的意思是在你的例子中：

```
x <- rep("TRUE", 4) 
x <- replace(x, 3, "FALSE")
class(x)
# "character" 
```

在这种情况下尝试：

```
y <- as.logical(x)
class(y)
# "logical" 
```

# javascript - HTML onClick 转到另一个 div

> ID：10657908
> 
> 赞同：1
> 
> 时间：2012-05-18T18:28:42.457
> 
> 标签：javascript, html

我的网页上有一个按钮，当 onClick 我希望它显示另一个 div 时。但是，当我单击按钮时，它会在 URL 中闪烁，表明它转到了正确的 div，但随后它会立即重定向回主 div，#home。

按钮代码：

```
<input type="button" class="flip" value="Redirect To Div" onClick="window.location='#targetDiv'" /> 
```

当我单击按钮时，网址将闪烁：

www.XXXXX.com/#targetDiv

然后立即访问 www.XXXXX.com/#home

任何想法为什么它不会显示 div？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:43:48.353

看起来你的表格有

```
 action="" 
```

或者

```
 action="#home" 
```

而不是 onclick 调用一个函数

```
 onclick="mylinkfunction()" 
```

...

```
 <script type-"text/javascript">

       function mylinkfunction(e) {

       window.location.href="#targetDiv";

       /* need to stop the form sending of the form

        UPDATE as comment: This may not be exactly correct syntax 
        for stopping a form , look up preventing form submission */

       e.preventDefault();
       e.stopPropagation(); 

       }

     </script> 
```

或者如果您的表单无关紧要，请设置它的操作并删除 javascript allogether

```
 <form action="#targetDiv" method="get">
     <input type="submit" value="go"/>
     </form> 
```

但那么你所需要的实际上就是这个..

```
 <a href="#targetDiv">click me</a> 
```

如果“转到另一个 div”你的意思是跳转并将页面滚动到一个新位置，它实际上是一个你需要去的锚点

```
 <a name="targetDiv"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-15T17:22:30.353

可重用的函数，以使用 href 转到特定的 div 或部分：

```
const dynamicHrefSetter = (href: string) => {
  if (typeof window !== 'undefined') window.location.href = `#${href}`;
}; 
```

# ruby-on-rails - 即使模板存在，也缺少模板错误

> ID：10657914
> 
> 赞同：0
> 
> 时间：2012-05-18T18:29:23.373
> 
> 标签：ruby-on-rails

我正在看日志，这就是我所看到的

```
Processing by TestController#get_branches_for_repo as */*

ActionView::MissingTemplate (Missing template test/get_branches_for_repo, application/get_branches_for_repo with {:handlers=>[:erb, :builder], :formats=>[:html, :text, :js, :css, :ics, :csv, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json], :locale=>[:en, :en]}. Searched in:* "/export/web/metrics-vviswanathan/app/views"): 
```

我有一个看法

```
_get_branches_for_repo.erb 
```

在应用程序/视图/测试/

**当它作为*/***处理时是什么意思？

哦，我的控制器功能看起来像这样

```
def get_branches_for_repo
   blah

   render :partial => "get_branches_for_repo"
end 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:12:10.337

为什么你的`_get_branches_for_repo.erb`文件名`.html`中间没有？添加它，重新保存文件以防万一，然后重试。

关于`*/*`. 我知道页面刷新后的 IE 会这样做。这不是 Rails 的事情。你不必担心它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:04:12.763

渲染部分时是否使用特定布局？我通常在我的视图中使用局部视图，因为它们需要成为某个模板的一部分，而且我不相信它们可以在那里自己呈现。您能否通过将视图文件从 _get_branches_for_repo.erb 更改为 get_branches_for_repo.erb（无下划线）并在控制器中一起取出渲染语句来获得相同的效果。这样，您将使用模板而不是部分模板。如果您提供更多信息，我也许可以提供更多帮助。我希望这有帮助。这是一个对我帮助很大的渲染指南[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

# c# - Win Form 和 Asp.net 界面

> ID：10657921
> 
> 赞同：0
> 
> 时间：2012-05-18T18:29:56.393
> 
> 标签：c#, asp.net

我有一个连接到 OleDb 的 WinForm。虽然项目（在 Visual Studio 2010 中）已打开，但我单击了新菜单并说`Add New Web Site`现在问题是我有一个在添加网站之前创建的类 - 但`code-behind`文件无法获取该命名空间或类示例：（注意两个项目都在同一个解决方案中）

```
namespace Name
{
    //Code From The Original Project before Adding The WebSite
    class DataAccessObject
    {
        private ...;
        private ...;
    }
} 
```

* * *

```
 public partial class Candidate : System.Web.UI.Page
  {
     ...
     ...
     ...
     DataAccessObject dao = new DataAccessObject();
  } 
```

项目的 WebSite 部分甚至没有拾取 NameSpace -

我也试过

```
 public partial class Candidate : System.Web.UI.Page
  {
     ...
     ...
     ...
     Name.DataAccessObject dao = new DataAccessObject();
  } 
```

***编辑***

这背后的整个想法是用户可以随意在winForms和Web之间切换，因此需要传递DataAccessObject。

注意这是我第一次进入 ASP(.NET) 的世界

任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:32:58.430

我假设该类在 WinForms 项目中。据我所知，您不能从 ASP.NET 网站添加对 WinForms 应用程序的引用。（不过，我可能错了。）

在项目之间共享类的*通常*模式是将类放在单独的类库项目中。然后，从 WinForms 应用程序和 ASP.NET 网站，您可以添加对项目（如果项目在同一个解决方案中）或类库项目生成的已编译 .dll 的引用。

确保该类声明为 Public，并且您需要在 Visual Studio 中添加引用。

从技术上讲，您可以从类库项目中创建一个 .dll 并将其简单地复制到网站的 \bin 目录中，但根据经验，最好将它们放在同一个解决方案中并添加项目引用。这保证了网站始终具有最新版本的 .dll。

[这里](http://msdn.microsoft.com/en-us/library/cc668164.aspx)有一个walk-though和另一个相关的、有用的文章[here](http://msdn.microsoft.com/en-us/library/f3st0d45.aspx)。

# csv - LibreOffice / OpenOffice Calc：VBscript，将 XLS 工作表导出为 CSV

> ID：10657922
> 
> 赞同：4
> 
> 时间：2012-05-18T18:29:57.563
> 
> 标签：csv, vbscript, xls, libreoffice, openoffice-basic

我现在正在尝试编写一个脚本，但似乎其中一部分不起作用。

**情况：**我需要一个 VB 脚本，它可以在任何 Windows XP 或 7 系统上使用任何 LibreOffice (/ OpenOffice) Calc（在我的情况下为 3.5.4）安装，以将 xls 导出为 csv（与文件中的工作表一样多的 csv 文件） xls)。在这种情况下，它必须是 VBS 和 LibreOffice。没有安装宏，一切都由 vbscript 外部控制。

因此，第一步是使用宏记录器来获得正确的过滤器设置。

**StarBasic 宏：**

```
 dim document   as object
    dim dispatcher as object

    document   = ThisComponent.CurrentController.Frame
    dispatcher = createUnoService("com.sun.star.frame.DispatchHelper")

    dim args1(2) as new com.sun.star.beans.PropertyValue
    args1(0).Name = "URL"
    args1(0).Value = "file:///C:/Users/lutz/Desktop/test.csv"
    args1(1).Name = "FilterName"
    args1(1).Value = "Text - txt - csv (StarCalc)"
    args1(2).Name = "FilterOptions"
    args1(2).Value = "9,0,76,1,,0,false,true,true"

    dispatcher.executeDispatch(document, ".uno:SaveAs", "", 0, args1()) 
```

这个宏（在 LibreOffice 中）写入当前工作表的 CSV（在 LO 告诉我只保存当前工作表之后），编码*UTF-8*，字段分隔符*Tab*，没有文本分隔符。这行得通。

我试图让它在我的 vbs 中工作，但它绝对没有。所以我在 OpenOffice 和 LibreOffice 论坛中搜索了很多，在 stackoverflow 等，并使用了另一种方法。

**问题：**每次保存文件时，它都会将它们保存为 ODS，无论我使用哪种过滤器或过滤器选项。它总是保存到压缩的 OpenDocument。我尝试了许多过滤器，甚至是 PDF。当我只使用 FilterName 属性时，它似乎可以与 pdf 一起使用，但不知何故它不再起作用了。我不知道为什么。

**编码：**

```
 ' Scripting object
    Dim wshshell
    ' File system object
    Dim objFSO
    ' OpenOffice / LibreOffice Service Manager
    Dim objServiceManager
    ' OpenOffice / LibreOffice Desktop
    Dim objDesktop
    ' Runcommand, if script does not run with Cscript
    Dim runcommand

    Dim Path
    Dim Savepath
    Dim Filename

    Dim url
    Dim args0(0)
    Dim args1(3)

    ' Create File system object
    Set wshshell = CreateObject("Wscript.Shell")
    Set objFSO = CreateObject("Scripting.FileSystemObject")

    ' If not run in cscript, run in cscript
    if instr(1, wscript.fullname, "cscript.exe")=0 then
    runcommand = "cscript //Nologo xyz.vbs"
    wshshell.run runcommand, 1, true
    wscript.quit
    end if

    ' If files present, run Calc
    If objFSO.GetFolder(".").Files.Count>0 then
       Set objServiceManager = WScript.CreateObject("com.sun.star.ServiceManager")
       ' Create Desktop
       Set objDesktop = objServiceManager.createInstance("com.sun.star.frame.Desktop")
    else
       ' If no files in directory
       wscript.echo "No files found!"
       wscript.quit
    End If

    on error resume next

    bError=False
    For each File in objFSO.GetFolder(".").Files
       if lcase(right(File.Name,3))="xls" then

       ' Access file
       url = ConvertToURL(File.Path)
       objDesktop = GlobalScope.BasicLibraries.loadLIbrary( "Tools" )
       Set args0(0) = objServiceManager.Bridge_GetStruct("com.sun.star.beans.PropertyValue")
       Set objDocument = objDesktop.loadComponentFromURL(url, "_blank", 0, args0 )

       ' Read filenames without extension or path
       Path = ConvertToURL( File.ParentFolder ) & "/"
       Filename = objFSO.GetBaseName( File.Path )
       Savepath = ConvertToURL( File.ParentFolder )

       ' set arguments
       Set args1(0) = objServiceManager.Bridge_GetStruct("com.sun.star.beans.PropertyValue")
       Set args1(1) = objServiceManager.Bridge_GetStruct("com.sun.star.beans.PropertyValue")
       Set args1(2) = objServiceManager.Bridge_GetStruct("com.sun.star.beans.PropertyValue")
       sFilterName = "Text - txt - csv (StarCalc)"
       sFilterOptions = "9,0,76,1,,0,false,true,true"
       sOverwrite = True
       Set args1(0) = MakePropertyValue( "FilterName", sFilterName )
       Set args1(1) = MakePropertyValue( "FilterOptions", sFilterOptions )
       Set args1(2) = MakePropertyValue( "Overwrite", sOverwrite )

       ' Save every sheet in separate csv file
       objSheets = objDocument.Sheets
       For i = 0 to objDocument.Sheets.getcount -1
           objSheet = objDocument.Sheets.getByIndex(i)
           Call objDocument.CurrentController.setActiveSheet(objSheet)
           Call objDocument.storeToURL( ConvertToURL( File.ParentFolder & "\" & Filename & "_" & objDocument.sheets.getByIndex(i).Name & ".csv" ), args1 )
       Next

       ' Close document
       objDocument.close(True)
       Set objDocument = Nothing
       Path = ""
       Savepath = ""
       Filename = ""

    Else
    End If

    Next

    ' Close / terminate LibreOffice
    objDesktop.terminate
    Set objDesktop = nothing
    Set objServiceManager = nothing 
```

此处未列出函数*ConvertToUrl 。*它是一个将 Windows 路径转换为 ​​URL 路径（file:/// 等）的 vbscript 函数。它已经过测试并且可以工作。

**我也尝试过：**

*   首先保存 ods (StoreAsUrl)，然后尝试以不同的格式保存。
*   使用*MakePropertyValue("SelectionOnly", true )*

这些都不起作用，也没有结合起来。我使用[http://extensions.services.openoffice.org/de/project/OOcalc_multi_sheets_export](http://extensions.services.openoffice.org/de/project/OOcalc_multi_sheets_export)作为灵感来源。但它是一个宏，不能从外部 vb 脚本直接访问。

似乎问题是*StoreToUrl*或属性/参数的一般问题：即使 FilterName "writer_pdf" 或 "Calc MS Excel 2007 XML" 也不起作用。问题是：我不知道这里的罪魁祸首是什么。宏记录器使用的设置是相同的，如果直接在 LibreOffice 中使用宏，它就可以工作。

也许有人知道代码中需要更改什么，或者我如何让宏中使用的调度程序工作。

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T19:52:23.763

好的，经过几天的研究和分散在各处的微小信息，我找到了解决方案。我希望这段代码能很好地为某人服务：

```
' Variables
Dim wshshell      ' Scripting object
Dim oFSO         ' Filesystem object
Dim runcommand   ' Runcommand, if not run in Cscript

Dim oSM      ' OpenOffice / LibreOffice Service Manager
Dim oDesk      ' OpenOffice / LibreOffice Desktop
Dim oCRef      ' OpenOffice / LibreOffice Core Reflections

Dim sFileName   ' Filename without extension
Dim sLoadUrl   ' Url for file loading
Dim sSaveUrl   ' Url for file writing
Dim args0(0)   ' Load arguments

' Create file system object
Set wshshell = CreateObject("Wscript.Shell")
Set oFSO = CreateObject("Scripting.FileSystemObject")

' If not run in cscript, run in cscript
if instr(1, wscript.fullname, "cscript.exe")=0 then
   runcommand = "cscript //Nologo xyz.vbs"
   wshshell.run runcommand, 1, true
   wscript.quit
end if

' If there are files, start Calc
If oFSO.GetFolder(".").Files.Count>0 then
   ' If no LibreOffice open -> run
      Set oSM = WScript.CreateObject("com.sun.star.ServiceManager")
   ' Create desktop
      Set oDesk = oSM.createInstance("com.sun.star.frame.Desktop")
      Set oCRef = oSM.createInstance( "com.sun.star.reflection.CoreReflection" )
else
   ' If no files in directory
      wscript.quit
End If

' Error handling
on error resume next

' CSV settings for saving of file(s)
sFilterName = "Text - txt - csv (StarCalc)"
sFilterOptions = "9,0,76,1,,0,false,true,true"
sOverwrite = True

' load component for file access
oDesk = GlobalScope.BasicLibraries.loadLIbrary( "Tools" )

' load argument "hidden"
Set args0(0) = oSM.Bridge_GetStruct("com.sun.star.beans.PropertyValue") 
Set args0(0) = MakePropertyValue("Hidden", True)

For each oFile in oFSO.GetFolder(".").Files
   if lcase(right(oFile.Name,3))="xls" then
      ' open file
         sLoadUrl = ConvertToURL(oFile.Path)
         Set oDoc = oDesk.loadComponentFromURL(sLoadUrl, "_blank", 0, args0 )
      ' read filename without extension or path
         sFileName = oFSO.GetBaseName( oFile.Path )
      ' save sheets in CSVs
         For i = 0 to oDoc.Sheets.getcount -1
            oActSheet = oDoc.CurrentController.setActiveSheet( oDoc.Sheets.getByIndex(i) )
            sSaveUrl = ConvertToURL( oFile.ParentFolder & "\" & sFileName & "_" & oDoc.sheets.getByIndex(i).Name & ".csv" )
            saveCSV oSM, oDoc, sSaveUrl, sFilterName, sFilterOptions, sOverwrite
         Next
      ' Close document
      oDoc.close(True)
      Set oDoc = Nothing
      Set oActSheet = Nothing
      sFileName = ""
      sLoadUrl = ""
      sSaveUrl = ""
   Else
   End If
Next

' Close LibreOffice
oDesk.terminate
Set oDesk = nothing
Set oSM = nothing

Function ConvertToURL(sFileName)
' Convert Windows pathnames to url

Dim sTmpFile

If Left(sFileName, 7) = "file://" Then
   ConvertToURL = sFileName
   Exit Function
End If

ConvertToURL = "file:///"
sTmpFile = oFSO.GetAbsolutePathName(sFileName)

' replace any "\" by "/"
   sTmpFile = Replace(sTmpFile,"\","/") 

' replace any "%" by "%25"
   sTmpFile = Replace(sTmpFile,"%","%25") 

' replace any " " by "%20"
   sTmpFile = Replace(sTmpFile," ","%20")

ConvertToURL = ConvertToURL & sTmpFile
End Function

Function saveCSV( oSM, oDoc, sSaveUrl, sFilterName, sFilterOptions, sOverwrite )
' Saves the open document resp. active sheet in a single file

Dim aProps( 2 ), oProp0, oProp1, oProp2, vRet

' Set filter name and write into property array
   Set oProp0      = oSM.Bridge_GetStruct( "com.sun.star.beans.PropertyValue" )
   oProp0.Name     = "FilterName"
   oProp0.Value    = sFilterName
   Set aProps( 0 ) = oProp0

' Set filter options and write into property array
   Set oProp1      = oSM.Bridge_GetStruct( "com.sun.star.beans.PropertyValue" )
   oProp1.Name     = "FilterOptions"
   oProp1.Value    = sFilterOptions
   Set aProps( 1 ) = oProp1

' Set file overwrite and write into property array
   Set oProp2      = oSM.Bridge_GetStruct( "com.sun.star.beans.PropertyValue" )
   oProp2.Name     = "Overwrite"
   oProp2.Value    = sOverwrite
   Set aProps( 2 ) = oProp2

' Save
   vRet            = oDoc.storeToURL( sSaveUrl, aProps )

End Function 
```

我希望至少我的这个小小的贡献可以帮助到其他人。

# apache - .htaccess，调整重写基础，基于子目录

> ID：10657933
> 
> 赞同：0
> 
> 时间：2012-05-18T18:30:36.587
> 
> 标签：apache, .htaccess

使用 htaccess 文件在 Apache 上遇到一些问题。我有一个脚本需要从两个不同的虚拟子目录访问，这两个虚拟子目录都指向同一个地方。

问题是当我将重写基础设置到一个位置并尝试从另一个位置访问时，它上面有错误的变量。因为它是一个虚拟目录，所以只有一个 .htaccess 文件，所以我需要一种方法让我的 htaccess 文件知道它在访问脚本时被调用的目录，以便我可以将脚本中的重写基础设置为适当的虚拟目录。

我正在为此绞尽脑汁。这是我的代码不起作用。我尝试了一些变化，我觉得我很接近，但我很难过。

```
 Options -Indexes
            Options +FollowSymLinks
            ErrorDocument 404 index.php

            <IfModule mod_rewrite.c>
              RewriteEngine on

              RewriteCond %{DOCUMENT_ROOT} /$1 -f 
                RewriteBase /$1/

              RewriteCond %{REQUEST_FILENAME} !-f
              RewriteCond %{REQUEST_FILENAME} !-d
              RewriteCond %{REQUEST_URI} !=/favicon.ico
              RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
            </IfModule> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:59:13.883

诀窍是让 RewriteBase 使用`/`. 在你的根 .htaccess 中考虑这样的代码`$DOCUMENT_DIR`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

ErrorDocument 404 index.php

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteRule ^(?:vdir1|vdir2)/(.*)/?$ index.php?q=$1 [L,NC,QSA] 
```

这里 vdir1 和 vdir2 是你的 2 个虚拟目录。

# debugging - 在 gdb 中的 errno 上设置观察点

> ID：10657936
> 
> 赞同：5
> 
> 时间：2012-05-18T18:30:55.970
> 
> 标签：debugging, gdb, libc, errno, watchpoint

我试图找出 errno 何时更改。

一开始我在gdb中尝试了“watch errno”，导致报错

```
Cannot find thread-local variables on this target 
```

我可以通过使用“-pthread”编译来解决这个问题。但是，它仍然不起作用，我现在收到错误

```
Cannot find shared library `/usr/lib/debug/lib/x86_64-linux-gnu/libc-2.13.so' in dynamic linker's load module list 
```

当我输入“watch errno”时。我需要做什么才能在 errno 上设置观察点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T18:59:48.920

`errno`不再只是一个静态变量。这是 Linux 上的用户级应用程序（来自我的本地`/usr/include/x86_64-linux-gnu/bits/errno.h`）的显示方式：

```
#   define errno (*__errno_location ()) 
```

这是为了获取每个线程的错误状态。

# xml - 使用 powershell 进行 XML（特定 DTD）编辑的问题

> ID：10657938
> 
> 赞同：1
> 
> 时间：2012-05-18T18:31:15.970
> 
> 标签：xml, powershell, dtd

我正在处理一堆 VOD 元数据文件 (XML)。有一个 ADI.DTD 定义了我的 xml 的架构。

我正在尝试使用 powershell 编辑此 xml 并使用以下 powershell 代码更新/更改标签...

```
[System.Xml.XmlDocument]$doc = 
       new-object System.Xml.XmlDocument;
    $doc.Load($strXMLFile);
    $root = $doc.get_DocumentElement();
    $root.Fruit.Metadata.AMS.Name = $strName
    $doc.Save($strXMLFile) 
```

虽然它几乎相同，但我也尝试过..

```
$xmlDoc = [XML](gc $strXMLFile) 
$xmldoc.Fruit.Metadata.AMS.Name = $strName
$xmldoc.Save($strXMLFile) 
```

这个保存改变的不仅仅是我想要的一个标签。它正在删除几个回车并将这个奇怪的 [] 添加到我的 DOCTYPE 中。我不明白它为什么这样做，也不知道对使用这个 XML 的系统的下行影响。

```
<!DOCTYPE ADI SYSTEM "ADI.DTD"> 
```

到

```
<!DOCTYPE ADI SYSTEM "ADI.DTD"[]> 
```

任何输入表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:46:34.737

要保留回车，请尝试在保存之前设置此属性：

```
$xmlDoc.PreserveWhitespace = $true 
```

方括号是有效的 XML，不应该有任何负面影响。看到这个问题：

[XmlDocument.Save() 在 doctype 声明中插入空方括号](https://stackoverflow.com/questions/6191869/xmldocument-save-inserts-empty-square-brackets-in-doctype-declaration)

# android - Adsense 广告未在 android 中显示

> ID：10657941
> 
> 赞同：1
> 
> 时间：2012-05-18T18:31:26.147
> 
> 标签：android

我正在我的应用程序中实施 Adsense。我有发布者 ID，并且我已经使用 Google Adsense SDK 教程在我的应用程序中实现了代码。但是我的应用程序中没有显示广告。

这是我的代码：

AdSenseSpec adSenseSpec = new AdSenseSpec("pub-xxxxxxxxxxxxxxxx") .setCompanyName("在 google Adsense 中注册时的公司名称") .setAppName("应用程序名称")
.setAdTestEnabled(false);

```
 GoogleAdView adView = (GoogleAdView) findViewById(R.id.adview);
       adView.setEnabled(true);
       adView.showAds(adSenseSpec); 
```

这些正在进入 logcat ：

05-18 13:19:41.077: WARN/webcore(8506): 在第一个布局后无法获取 viewWidth 05-18 13:19:43.377: VERBOSE/NotificationService(171): [cancelNotificationWithTag]::::: pkg:android id:-669611123 05-18 13:19:43.859: WARN/PowerManagerService(171): Timer 0x3->0x3|0x0 05-18 13:19:44.297: WARN/webcore(8506): 无法获取第一个布局后的 viewWidth

任何人都可以有任何线索吗？

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T11:23:07.677

尝试像这样初始化它（这是针对较新版本的）

```
AdView mAdView = (AdView) findViewById(R.id.adView); 
AdRequest adRequest = new AdRequest.Builder().build();
mAdView.loadAd(adRequest); 
```

# jquery - highcharts - 更新系列以包含比以前更少的类别时出错

> ID：10657942
> 
> 赞同：2
> 
> 时间：2012-05-18T18:31:38.967
> 
> 标签：jquery, highcharts

当新数据的列（类别）比以前少时，我在更新 highcharts 图表时遇到问题。

小提琴：http: [//jsfiddle.net/ggoforth/bZAF7/](http://jsfiddle.net/ggoforth/bZAF7/)

考虑我有一个类似的图表：

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column'
    },
    xAxis: {
        categories: ['pizza', 'french fries']  
    },
    series: [{
        data: [55, 32]   
    }]
}); 
```

这将呈现一个包含两列的柱形图。然后，通过一些按钮我做：

```
chart.series[0].setData([55, 32, 17], false);
chart.xAxis[0].setCategories(['pizza', 'french fries', 'nachos'], false);
chart.redraw(); 
```

然后这将更新图表以具有三列。这一切都很好。但是，如果稍后，我再次用 2 列刷新图表：

```
chart.series[0].setData([55, 32], false);
chart.xAxis[0].setCategories(['pizza', 'french fries'], false);
chart.redraw(); 
```

我收到错误“选项未定义”。这是可重现的，这里有一个小提琴演示了这个问题：http: [//jsfiddle.net/ggoforth/bZAF7/](http://jsfiddle.net/ggoforth/bZAF7/)

在设置新数据之前，我需要先在图表上进行某种“重置”吗？就像我说的那样，它在从 2 列 -> 3 列开始时有效，但反之则不然。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:43:36.523

您可以删除以下行：

```
chart.xAxis[0].setCategories(['pizza', 'french fries'], false); 
```

**[演示](http://jsfiddle.net/bZAF7/5/)**

如您所见，问题在于您的新数据不能少于您的类别编号，因此**您必须先更新您的类别而不是您的 serie**。像下面的例子。
[http://jsfiddle.net/bZAF7/6/](http://jsfiddle.net/bZAF7/6/)

因此，要解决此问题，您必须反转以下行。

```
chart.series[0].setData([55, 32], false);
chart.xAxis[0].setCategories(['pizza', 'french fries'], false); 
```

**更新**：正如格雷格在评论中所说，这是来自 Highcharts [https://github.com/highslide-software/highcharts.com/issues/970](https://github.com/highslide-software/highcharts.com/issues/970)的错误，可能它已在最新的 Highcharts 版本中修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:46:56.220

如果您删除该系列并重新添加它，它会起作用：

```
 try {
        chart.series[0].remove();
        chart.addSeries({});
        chart.series[0].setData([55, 32], false);
        chart.xAxis[0].setCategories(['pizza', 'french fries'], false);
        chart.redraw();
    } catch (e) {
        alert(e);   
    } 
```

[在这里](http://jsfiddle.net/larsenmtl/bZAF7/4/)更新了小提琴。

# android - 如何在 Android 设备上重现低状态内存

> ID：10657943
> 
> 赞同：0
> 
> 时间：2012-05-18T18:31:46.210
> 
> 标签：android, cordova, camera, low-memory

为了重现错误，我需要在我的 Android 设备上创建低内存状态。该错误与相机应用程序有关，该应用程序在启动时显然会杀死我的应用程序。该应用程序基于 Phonegap 1.4.1，我已经阅读了有关此的帖子，但我找不到复制低内存状态的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-25T04:08:39.687

在安卓的开发者选项中，选择页面末尾的“不保留活动”

# c# - 检查 PostBack 时未将对象引用设置为对象的实例

> ID：10657944
> 
> 赞同：-2
> 
> 时间：2012-05-18T18:31:48.203
> 
> 标签：c#, asp.net, forms

我有这个代码

```
if (PreviousPage.IsPostBack)
    {
        if (Request.Form["username"] == ConfigurationManager.AppSettings["username"] && Request.Form["password"] == ConfigurationManager.AppSettings["password"])
        {
            Session["username"] = Request.Form["username"];
            using (var context = new mallEntities())
            {
                var countProducts = (from p in context.Products
                                     select p).Count();

                var countStores = (from p in context.Stores
                                   select p).Count();

                var countCategories = (from p in context.Categories
                                       select p).Count();

                Label3.Text = countProducts.ToString();
                Label2.Text = countStores.ToString();
                Label1.Text = countCategories.ToString();
            }
        }
        else
        {
            Response.Redirect("Default.aspx?invaild=true");
        }
    } else if(Session["username"] == null)
    {
        Response.Redirect("Default.aspx?session=false");
    } 
```

我收到了这个错误信息：

```
Object reference not set to an instance of an object 
```

在`PreviousPage.IsPostBack`

为什么？

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:39:28.013

我不确定你为什么要使用`PreviousPage.IsPosback`，所以我猜这是一个错误。你应该使用`Page.IsPostback`

如果您确实想使用`PreviousPage`（我会被难住），请考虑到如果您直接访问页面，它可能为空。

> > 当您使用传输方法或跨页发布将处理从一个 ASP.NET 页面传输到另一个时，源页面包含目标页面可能需要的请求信息。您使用 PreviousPage 属性来访问该信息
> > 
> > **当用户直接从服务器请求该页面时，PreviousPage 属性是一个空引用（在 Visual Basic 中为 Nothing）。**

# facebook-like - 如何将 facebook like 按钮放入并使用不同颜色的 wordpress 对其进行自定义

> ID：10657945
> 
> 赞同：0
> 
> 时间：2012-05-18T18:31:49.037
> 
> 标签：facebook-like

我只是想知道是否可以用不同于平常的颜色自定义类似 facebook 的按钮？我还想知道如何在不使用 javascript 的情况下正确实现代码？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:06:16.120

Facebook like 按钮是通过不同域上的 IFRAME 实现的。我想可以肯定地说你不能改变它。您只能从 facebook 提供的两个选项中进行选择。浅色和深色。

对于您对[如何实现 facebook like 按钮的关注，这里有一个全面的指南。](http://www.bendaggers.com/how-to-add-facebook-like-twitter-tweet-google-plus-one-and-pinterest-pin-it-button-in-your-index-file-multiple-blog-posts-in-wordpress/, "如何添加 facebook like 按钮")

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:33:47.490

facebook like 按钮是一个图像，因此您需要将图像实际编辑为您想要的。如果您使用通用链接来“喜欢”，那么您可以使用 CSS 更改该链接。

# .htaccess - 在 IMG 元素中显示图像而不指定扩展名

> ID：10657949
> 
> 赞同：0
> 
> 时间：2012-05-18T18:32:05.207
> 
> 标签：.htaccess, mime

我刚刚在服务器之间移动，现在我无法在 IMG 中显示图像，除非我在 IMG SRC 中指定扩展名。

如果我在根目录中有一个名为 photo.png 的文件`<img src="/photo">`用于打开它。现在它没有，我收到此错误：“加载资源失败：服务器响应状态为 404（未找到）”。

为了让我的网站在不添加扩展名的情况下将 .jpg、.jpeg、.png 和 .gifs 识别为图像，我必须遵循哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:21:40.433

```
Options +MultiViews 
```

将其放入 .htaccess 文件中。

# ios - 重现 UITextField 的边框

> ID：10657951
> 
> 赞同：0
> 
> 时间：2012-05-18T18:32:22.880
> 
> 标签：ios, uiview, uitextfield, calayer

我想淡入 UITextField 的边框，所以我自己在 UIView 中重新创建它，使用它的图层：

```
 borderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, textfield.frame.size.width, textfield.frame.size.height)];
    [borderView.layer setBorderWidth:1.0];
    [borderView.layer setBorderColor:[UIColor grayColor].CGColor];
    [borderView.layer setMasksToBounds:YES];
    [borderView.layer setCornerRadius:10.0];
    [borderView.layer setShadowColor:[UIColor blackColor].CGColor];
    [borderView.layer setShadowOffset:CGSizeMake(0, 3)];
    [borderView.layer setShadowOpacity:0.8];
    borderView.alpha = 0.0; 
```

然后我直接将它添加到 UITextField ：

```
 [textField addSubview: borderView];
    [textField sendSubviewToBack: borderView]; 
```

然而，尽管 sendSubviewToBack: 调用，文本字段在被触摸时拒绝成为第一响应者。

当我将 ImageView 添加为同级视图而不是 UIView 时，这很好用。

如何使文本字段接收输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:46:11.703

```
borderView.userInteraction = NO; 
```

在我的 sim 4.3 中检查了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:23:25.807

无需向文本字段添加新视图，只需修改文本字段自己的图层：

```
#import <QuartzCore/QuartzCore.h>

textField.layer.borderWidth = 1;
textField.layer.borderColor = [UIColor grayColor].CGColor;
textField.layer.cornerRadius = 10;
// etc... 
```

# http - 如何模拟完整浏览器对 HTML 文档的请求？

> ID：10657953
> 
> 赞同：2
> 
> 时间：2012-05-18T18:32:26.290
> 
> 标签：http, browser, language-agnostic, html-parsing, simulation

# 目标

我想以浏览器的方式模拟对 HTML 文档的请求。这意味着我不仅要下载主要的 HTML 文件，还要下载 CSS、JS、图像等链接的东西。

现在我只想解析第一个 HTML 文档。即，我没有考虑解析导致的请求，例如 CSS（背景图像、网络字体）或 JavaScript（Ajax）等。

要实现这一点，我需要知道浏览器如何准确处理网站。我还没有找到很好的参考。对此的任何帮助将不胜感激，并可能解决我的问题。

# 假设

由于我缺乏任何好的参考资料，我假设这个过程（不考虑重定向、渲染等）是这样工作的：

1.  建立持久的 HTTP 连接`www.facebook.com`
2.  请求路径“/”并接收 HTML
3.  当文档被完全（？）接收到时，它会被解析并填充需要请求的 URL 列表（分为头对象和正文对象？！）
4.  第一个 URL 取自 head-list 并检查是否与该主机建立了持久的 HTTP 连接
    *   如果没有，则建立，然后请求对象
    *   如果有，则将其添加到连接的“下载队列”中
5.  重复第 4 步，直到列表为空
6.  然后对“正文列表”重复步骤 4-5

这甚至接近浏览器的工作方式吗？

**额外问题：**标头中 JavaScript 和 CSS 文件的顺序是否有所不同？

# 怀疑

我使用 Chrome 开发者工具 (Chrome 18) 进行了一些测试来确认。我连接到`www.facebook.com`测量每个对象的加载时间。使用`Ctrl`+重新加载时`R`，结果如下所示：

[![在 Chrome-Developer-Network-Tab 中输出请求 www.facebook.com](../Images/322c8212a9ef505ce752995cae4d381c.png)](https://i.stack.imgur.com/AoRTo.png)

最让我困惑的是，即使来自同一主机（`static.ak.fbcdn.net`），大多数请求也与其他请求并发。我的浏览器禁用了流水线（这是默认设置），那么为什么请求似乎仍然同时发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:12:14.520

浏览器确实使用多个连接，以加快下载（资源的并行下载）。然而，它们限制了与同一主机的连接数量，这是存在内容交付网络的原因之一。

标题中 CSS 和脚本文件的顺序很重要，因为[脚本会阻止并行下载](https://developers.google.com/speed/docs/best-practices/rtt#PutStylesBeforeScripts)（除非脚本没有被延迟）。

浏览器在接收 HTML 时也会解析 HTML（再次加快处理速度）——这就是如果你在头部放置一个脚本来尝试操作尚未加载的 DOM 元素的原因，你会得到一个错误。

但所有这些都是浏览器实现细节，可能对您的任务并不重要。最好 - 查看一些无头浏览器的源代码以了解发生了什么。

# html - 可以使用 HTML 调整图像的大小吗？

> ID：10657955
> 
> 赞同：1
> 
> 时间：2012-05-18T18:32:41.790
> 
> 标签：html

使用 HTML，可以根据屏幕分辨率调整图像大小吗？就像在大屏幕上查看完整图像不需要滚动但在小屏幕上需要滚动一样，它是否可以调整自身大小，以便使用 HTML 代码即使在具有特定纵横比的小屏幕上也不需要滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:42:40.133

您可以通过以 % 为单位设置最大大小来做到这一点，如下所示：

```
img{
    max-width: 100%;
}    ​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:16:06.113

这对我有用，（我希望我清楚地理解你的问题）

**CSS**

```
 #myimage{
        bottom: 0; 
        left: 0;
        position: fixed;
        right: 0;
        top: 0;
        width: 100%;
    } 
```

**标记**

```
<img src='xyz.jpg' id='myimage' /> 
```

或者使用你可以使用内联样式，如果这看起来很困难，只需将此代码放在`body`标签内。

```
<img src='xyz.jpg' style='bottom:0;left:0;position:fixed;right:0;top: 0;width: 100%; /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:12:00.220

阿赫塔尔，

在某种程度上，您可能不想禁用滚动。如果用户具有较高的缩放设置，他们应该能够左右滚动来查看您的页面，否则某些页面将不可用。例如 [http://css-tricks.com/screen-resolution-notequalto-browser-window/](http://css-tricks.com/screen-resolution-notequalto-browser-window/)

如果我放大此页面，Chrome 中将无法使用左右滚动。

除此之外，使用 % 是让您的内容在大多数浏览器和设置中看起来不错的好方法。您可以使用 % 高度或宽度设置图像、容器、主体等。请记住，为了保持图片的纵横比，您需要设置宽度，然后自动设置高度。

```
<style>
.leftColumn{width:20%;}
.leftColumn{width:80%;}
.somePic{width:20%;height:auto;}
.somePic2{width:80%;height:auto;}
</style>

<body>

<div class="leftColumn">
<img class="somePic" src="somePic.jpg" />
</div>

<div class="rightColumn">
<img class="somePic2" src="somePic2.jpg" />
</div>

</body> 
```

如果这对您来说是不可接受的，那么据我所知，您需要使用脚本语言来获取每个用户的屏幕大小。然后，您可以根据报告的屏幕尺寸编写更详细的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T08:03:13.913

除非您使用 javascript，否则您可以同时拥有`width`或`height`设置 at `100%`，但不能同时拥有两者。

CSS3 有很好的属性，称为[`background-size`](https://developer.mozilla.org/en/CSS/background-size)：

```
background:url(../images/myimage.jpg) no-repeat center center;
background-size:cover; 
```

[背景大小示例](http://jsbin.com/aqocaf)

大多数浏览器都支持它，除了 IE < 9。支持表：[http ://caniuse.com/background-img-opts](http://caniuse.com/background-img-opts)

如果你走 javascript 路线，有很多插件，如[supersized](http://www.buildinternet.com/project/supersized/)或[backstretch](http://srobbin.com/jquery-plugins/backstretch/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T19:32:08.687

样式中百分比度量的整个概念基于视口，视口基本上基于屏幕分辨率。即 100% 宽度的 div 在 800x600 中为 800 像素，在 1024*768 中为 1024 像素。你为什么关心分辨率？如果您想要灵活性，请以 % 为您的图像设置样式。

示例：http: [//jsfiddle.net/upavn/](http://jsfiddle.net/upavn/)

# asp.net-mvc-3 - Elmah 错误记录 FromCurrentContext 在单元测试时中断

> ID：10657961
> 
> 赞同：9
> 
> 时间：2012-05-18T18:33:23.270
> 
> 标签：asp.net-mvc-3, unit-testing, moq, elmah

任何时候使用 Moq 编写单元测试时，我调用`Elmah.ErrorSignal.FromCurrentContext`它都会失败，并出现空引用异常。我能够模拟`ControllerContext`并且我只想使用这样的错误日志命令..

```
Elmah.ErrorSignal.FromContext(ControllerContext.HttpContext).Raise(e); 
```

但不幸的`ControllerContext.HttpContext`是，它是类型`HttpContextBase`，不适用于这种错误记录方法。

有没有更好的方法来直接调用 Elmah 错误记录？不幸的是，该`Application.HttpContext`对象不能被模拟（下面的例子）或者也可以达到目的。

模拟`Application`和`Application.HttpContext`：

```
ctrlCtx.SetupGet(x => x.HttpContext.ApplicationInstance)
           .Returns(new Mock<HttpApplication>().Object);
ctrlCtx.SetupGet(x => x.HttpContext.ApplicationInstance.Context)
           .Returns(new Mock<HttpContext>().Object); 
```

产生的错误：

非虚拟（在 VB 中可覆盖）成员上的设置无效

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T21:05:15.487

虽然您不能模拟 HttpContext，但您可以在测试中设置 HttpContext.Current。

```
var req = new HttpRequest(string.Empty, "https://www.domain.tld", null);
var res = new HttpResponse(null);
HttpContext.Current = new HttpContext(req, res); 
```

不过，我不确定 Elmah 使用了上下文的哪些部分。

**第 3 方编辑：**
ELMAH 还需要 System.Web.HttpContext.Current.ApplicationInstance

```
Dim req As System.Web.HttpRequest = New System.Web.HttpRequest(String.Empty, "https://www.domain.tld", Nothing)
Dim res As System.Web.HttpResponse = New System.Web.HttpResponse(Nothing)
System.Web.HttpContext.Current = New System.Web.HttpContext(req, res)

System.Web.HttpContext.Current.ApplicationInstance = New System.Web.HttpApplication() 
```

否则会抛出异常，因为应用程序名称为 NULL。

**进一步编辑：**
这是 C# 中的最终代码：

```
var req = new HttpRequest(string.Empty, "https://www.domain.tld", null);
var res = new HttpResponse(null);
HttpContext.Current = new HttpContext(req, res) 
     {ApplicationInstance = new HttpApplication()}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-21T13:30:31.003

在 Elmah 中以不同方式记录错误的一件事是使用：

```
Elmah.ErrorLog.GetDefault(null).Log(new Elmah.Error(e)); 
```

尽管这不会从单元测试中记录错误，但它至少会在单元测试中完全跳过记录，并且在正常情况下仍会记录错误。

# gdb - dbx 的 .gdbinit 文件等效于什么？

> ID：10657964
> 
> 赞同：0
> 
> 时间：2012-05-18T18:33:34.973
> 
> 标签：gdb, migration, dbx

我可以在我的主目录中有一个名为 .gdbinit 的初始化文件，每次我启动 gdb 会话以自定义我的环境时都会运行该文件。

dbx 中的等效文件名是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T18:51:02.880

它是 ~/.dbxrc

.dbxinit 是一个旧的过时文件名，如果缺少 .dbxrc 将使用该文件名。

# python - 在 Python 的 CSV 列中添加所有值

> ID：10657965
> 
> 赞同：4
> 
> 时间：2012-05-18T18:33:35.563
> 
> 标签：python, csv

这些看起来很简单，但是我可能无法通过它进行搜索。

我有一个这样的 CSV 文件：

```
Day,Event,Value
1,"Rent",500
7,"Wage Payments",1000 
```

我希望将“值”列中的所有数字相加。到目前为止，我的代码是这样的：

```
cr = csv.reader(open("file.csv","rb"))

for row in cr:    
    print row

#print sum(Value) 
```

我怎么能对这个值求和呢？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T18:40:03.550

考虑到文件的第一行`csv`是`'Day,Event,Value'`，您可以使用`generator expression`with`sum()`

```
>>> cr = csv.reader(open("file.csv","rb"))
>>> cr.next()
>>> print sum(int(x[2]) for x in cr)
1500 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T18:35:25.977

```
cr = csv.reader(open("file.csv","rb"))
cr.next() # to skip the header 

total = 0
for row in cr:  
   total += int(row[2])
   # possibly do other things with data/rows 

print total 
```

有更简洁的方法（例如，[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)或生成器表达式）可以做到这一点，但这提供了基本思想，还允许您根据需要对每一行执行其他操作（正如@MarkRansom 所指出的那样）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T18:36:13.010

创建一个垃圾值并读取前 2 个值并“丢弃”它们，然后在读取第三个值时将其添加到您的总和中。不要忘记，最初您需要忽略文件的前 3 个值，因为它会获取标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:36:23.363

鉴于“值”在第 2 列中，您可以执行以下简单的 for 循环：

```
value_sum=0
for row in cr:
    value_sum += row[2] 
```

或者，如果您理解它，您可以使用理解：

```
value_sum = sum([row[2] for row in cr]) 
```

# c++ - SCHED_OTHER/SCHED_FIFO 的 pthread sched_get_priority_min/max 实现

> ID：10657970
> 
> 赞同：5
> 
> 时间：2012-05-18T18:33:59.737
> 
> 标签：c++, linux, cross-platform, pthreads

我正在尝试为我正在处理的项目编写一个半便携式线程类，并且在尝试设置线程的优先级时，我在 pthread 世界中遇到了一个难题。

给定以下代码：

```
#include <stdio.h>
#include <unistd.h>
#include <sched.h>
main()
{
    printf("Valid priority range for SCHED_OTHER: %d - %d\n",
        sched_get_priority_min(SCHED_OTHER),
        sched_get_priority_max(SCHED_OTHER));
    printf("Valid priority range for SCHED_FIFO: %d - %d\n",
        sched_get_priority_min(SCHED_FIFO),
        sched_get_priority_max(SCHED_FIFO));
    printf("Valid priority range for SCHED_RR: %d - %d\n",
        sched_get_priority_min(SCHED_RR),
        sched_get_priority_max(SCHED_RR));
} 
```

在 OpenBSD 中，这将打印以下内容：

```
Valid priority range for SCHED_OTHER: 0 - 31
Valid priority range for SCHED_FIFO: 0 - 31
Valid priority range for SCHED_RR: 0 - 31 
```

在 Ubuntu 中，它会产生这个：

```
Valid priority range for SCHED_OTHER: 0 - 0
Valid priority range for SCHED_FIFO: 1 - 99
Valid priority range for SCHED_RR: 1 - 99 
```

我的问题更多的是关于`SCHED_OTHER`优先级。根据我能够收集的所有文档（sched.h、google、SO、SE），我的理解是应该尝试检索当前进程的进程优先级并基于此分配优先级。这很好，除非在检索`SCHED_OTHER`. 由于调度是系统相关的，如果我获得当前进程的优先级`SCHED_OTHER`并尝试在 Ubuntu（或我遇到的其他 linux 系统）上获得最小/最大值，我的值将是 0-0，它赢了不适用于尝试设置有效的优先级范围。`SCHED_OTHER`但是，我确实在其他类 unix 系统（OpenBSD 等）上获得了有效值。

由于我主要关心的是只尝试获得有效范围的优先级值（以确保用户不会输入太高或太低的值），我是否应该不打扰当前进程的优先级而只获得最小值/最大值值`SCHED_FF`或`SCHED_RR`因为这些值似乎给了我遇到的各种 linux/unix 系统的有效范围，还是我完全错过了这一点？

提前致谢，如果我不清楚或错误陈述，请告诉我。

**编辑1**：请注意，我主要关心的是一种“便携式”方式来获得比进程优先级本身更多的有效范围..谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T09:19:53.340

您在 Ubuntu（以及任何其他基于 Linux 的操作系统）中为 SCHED_OTHER 获得的优先级范围是 [0,0]，这**是**一个有效范围。这意味着所有这些非实时进程都具有相同的“优先级”，它们唯一的区别在于它们的“好”值。

有关更多信息，请参阅[漂亮的](http://en.wikipedia.org/wiki/Nice_%28Unix%29)系统调用。我不确定 OpenBSD 的调度程序是如何工作的，但是 nice() 系统调用在 POSIX 中，它应该在 UNIX 系统中得到支持。

# ruby-on-rails - 从 sql 文件创建 Ruby on Rails 项目

> ID：10657974
> 
> 赞同：0
> 
> 时间：2012-05-18T18:34:30.597
> 
> 标签：ruby-on-rails

我有一个以前单独管理的 sql 文件，其中包含相当简单但很大的数据库。有没有办法导入这个 sql 文件并生成 ruby​​ 代码作为模型，使用这些数据作为我未来开发的起点？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:51:24.423

是的！

这将需要一些工作！

而且您需要发布更多详细信息才能获得更多信息。;-)

试一试：

Rails 可以使用传统数据库，但需要大量手动指定外键列、表名等。这是可以做到的。不过，我的建议是通过对列使用大量工作和相同的工作来在您拥有的任何数据库中就地转换数据，`ALTER TABLE RENAME...`以使旧数据库符合 Rails 的约定（主键 == 'id'，表名是模型名称的复数下划线版本，所有这些）在导入之前，然后你可以使用普通的香草 ActiveRecord，一切都会很容易。

# html - 如何对网页进行编码，以便搜索引擎为最新版本分配更高的页面排名？

> ID：10657978
> 
> 赞同：2
> 
> 时间：2012-05-18T18:34:43.370
> 
> 标签：html, seo

我经常使用 Google 搜索 .NET 文档，而且总是排名最高的页面是针对旧版本的 .NET 框架的。

例如，我刚刚在 Google 上搜索了“c# extern”。

*   第一个结果是针对 Visual Studio 2005。
*   第二个结果是针对 Visual Studio .NET 2003。
*   我浏览了几页，但从未遇到过[Visual Studio 2010](http://msdn.microsoft.com/en-us/library/e59b22c5%28v=vs.100%29.aspx)页面。

有趣的是，我在微软自己的搜索引擎 Bing 上尝试了相同的搜索，而 Visual Studio 2005 仍然是第一个热门。然而，第二个命中是我正在寻找的那个（Visual Studio 2010）。

我意识到 MSDN 上的许多文档页面在顶部都有一个菜单，允许您切换版本，但我认为没有必要这样做。应该有一种 HTML 方式来让搜索引擎相信两个页面非常相似，并且一个比另一个更新/更相关。

是否可以在 HTML 中执行任何操作来强制较新版本的文档页面获得比旧版本的基本等效页面更高的页面排名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:18:23.220

**您无法告诉 Google 首选哪个页面**
*（这基本上就是您问题的答案）*

如果有人 google `c# extern`，该人将获得由 googles 算法计算出的最相关的页面。它会因用户和您所在的位置而异，但最重要的是互联网上的链接是如何定向的。您无法通过页面优化来改变这一点。

[Wander Nauta](https://stackoverflow.com/a/10658048/570796)提到的规范地址不应该以这种方式使用。如果我们希望告诉 Google 或任何其他机器人两个或多个页面相同，我们基本上使用规范地址。这不是你所要求的。它将完全从索引中删除旧版本，以支持作为规范地址寻址的页面。

> 引自[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)
> 
> *在所有这些内容**相同**的页面中，这个页面是最有用的。请在搜索结果中优先考虑它。*
> 
> ...
> 
> *rel="canonical" 属性只能用于指定许多具有**相同内容**的页面的首选版本...*

* * *

为了引导客户正确，正如您已经描述的那样，我会在页面上使用一个良好的 Web 界面，以便客户可以轻松找到他或她正在寻找的内容。

* * *

谷歌还为您的搜索结果提供可能会或可能不会出现的附加链接。我想说这是您最接近能够按照您在搜索页面上的标准将您的客户引导到最相关页面的地方。

> 引自[https://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334)
> 
> *...附加链接旨在帮助用户浏览您的网站。我们的系统会分析您网站的链接结构，以找到可以节省用户时间并让他们快速找到所需信息的快捷方式。*

在 Google 网站管理员工具中，您可以选择优化链接，至少在某种程度上。

> 引自[Google 网站管理员工具](http://www.google.se/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CGUQFjAA&url=http://www.google.com/webmasters/tools/&ei=5Bm4T_ewOc704QTtjf3HCQ&usg=AFQjCNHzw4v7cHMZ9WeuuM4BZp6bSIyNlw&sig2=kIOfDiUiAcF8K8dEG7Isig)
> 
> *附加链接是自动生成的链接，可能会出现在您网站的搜索结果下方。...
> 如果您不希望页面显示为附加链接，则可以将其降级。*

* * *

## 更新

理论上，您可以使用“微数据”或类似内容指定页面上的某些内容的版本。通过这样做，您至少告诉机器人该站点上有两个名称相同但版本不同的项目。我认为这不会对您的网站在搜索结果中列出的顺序产生任何影响。*但我们永远不知道未来会怎样？*

如果您查看[schema.org](http://schema.org/)，您会看到[CreativeWork](http://schema.org/CreativeWork)有一个名为“version”的属性，而[SoftwareApplication](http://schema.org/SoftwareApplication)有一个名为“softwareVersion”的属性。

谷歌使用微数据来创建[丰富的片段](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170)。我没有听说谷歌将它用于其他任何事情，但这当然并不意味着它不是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:40:22.460

Google 允许您为特定资源指定*规范地址，即您希望 Google 优先考虑的给定页面的版本。*[它很容易使用。](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

然而，像这样的提示总是建议。也就是说，搜索引擎可以自由地忽略它们，如果它们完全支持它们的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:43:46.740

由于 Google 搜索的核心是基于链接（pagerank 算法），如果旧版本的每个页面都链接到新版本上的相应页面，那肯定会有所帮助。这可能无法完全解决问题，但肯定会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T18:41:18.623

为此，您需要了解实际的算法。我猜大多数搜索引擎都会比较页面与搜索的匹配程度，但也会考虑网站获得的点击量。假设您有 98% 的匹配和 1000 次点击和 96% 的匹配和 5000 次点击。第二页可能仍然排名较高。

至于你能做什么，搜索引擎是“盲目的”，所以使用 CSS 并避免使用表格进行布局。这将使引擎与您的内容更好地匹配。对于旧版本的解决方法，您可以将进入新版本的流量重定向，然后在该页面上链接到旧版本。本质上是这样设置的，只有通过该链接才能将您带到旧页面。

# c - 无法 FindWindow 父进程的窗口，既不终止父进程

> ID：10657982
> 
> 赞同：1
> 
> 时间：2012-05-18T18:34:55.733
> 
> 标签：c, winapi

我有一个父进程，它产生一个子进程。子进程的目的是通过终止父进程、等待几秒钟然后重新启动来重新启动父进程。我无法检测父母是否以管理员权限运行，但孩子在没有管理员权限的情况下运行。父窗口有一个隐藏窗口，它有一个独特的窗口类，通过它可以找到窗口并将 WM_CLOSE 发送给它。然而，在某些安装中，孩子使用类的标识符调用 FindWindow() 失败 - 没有找到窗口。但是，枚举系统中的所有进程，通过 EnumProcesses()，然后打开每个进程，调用 GetModuleFileNameEx() 成功地通过其可执行路径找到父进程，这是已知且固定的。然而，在进程句柄上调用 TerminateProcess() 会返回拒绝访问错误 (5)。设置 SeDebugPrivilege 失败，因为孩子没有升级的权限。上述情况仅发生在少数测试机器上，在大多数机器上都按预期工作 - 可以找到窗口，并尝试通过 TerminateProcess() 杀死父级成功。我的问题是 - 在某些机器上配置的子级和父级之间是否存在某种隔离模式，从而导致 FindWindow() 和 TerminateProcess() 失败，或者还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:01:38.633

我认为这个链接可能对你有很大帮助:) [GetParentProcessID](http://www.codeforge.com/read/69075/GetParentProcessID.cpp__html)

这个源码只是教你ntdll中的函数**NtQueryInformationProcess**将父ID作为**InheritedFromUniqueProcessId**存储在**PROCESS_BASIC_INFORMATION**结构中

# java - Java 如何使用 instanceof 返回一个新的对象类型？

> ID：10657983
> 
> 赞同：2
> 
> 时间：2012-05-18T18:35:00.340
> 
> 标签：java, oop, instanceof

如果您有以下情况

1.  接口：膳食
2.  热狗工具餐
3.  汉堡工具餐
4.  沙拉工具餐

您将如何创建一种方法来接收其中一种对象类型以返回适当的对象？

例子：

```
Method makeFood(HotDog)

if(HotDog instanceof Meal)
 return new HotdogObject(); 
```

你如何正确地做到这一点？

我正在与

```
static public Food createMeal(Meal f)
      throws Exception
  {

    if (f instanceof Hotdog)
    {
      return f = new HotDog();
    }
    if (f instanceof Burger)
    {
      return f = new Burger();
    }

    throw new Exception("NotAFood!");
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T18:45:33.717

大多数情况下，您将类与其实例混淆。`instanceof`顾名思义，操作符验证一个对象是一个类的实例，而不是一个类是另一个类的子类。借助反射可以最优雅地解决您的特定问题：

```
public static <T extends Meal> T createMeal(Class<T> c) {
  try { return c.newInstance(); }
  catch (Exception e) { throw new RuntimeException(e); }
} 
```

例如，如果你想要一个`Burger`，你打电话

```
Burger b = createMeal(Burger.class); 
```

但是，如果您真的只想要另一个与您已经拥有的实例相同类型的实例，那么代码将是

```
public static Meal createMeal(Meal x) {
  try { return x.getClass().newInstance(); }
  catch (Exception e) { throw new RuntimeException(e); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T18:37:33.727

如果我理解正确，你想要这样的东西吗？

```
if(f.getClass().isAssignableFrom(HotDog.class))
   return new HotdogObject(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T18:45:54.203

我猜你指的是反射。看看这个链接 [http://java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

```
import java.lang.reflect.*;

   public class constructor2 {
      public constructor2()
      {
      }

  public constructor2(int a, int b)
  {
     System.out.println(
       "a = " + a + " b = " + b);
  }

  public static void main(String args[])
  {
     try {
       Class cls = Class.forName("constructor2");
       Class partypes[] = new Class[2];
        partypes[0] = Integer.TYPE;
        partypes[1] = Integer.TYPE;
        Constructor ct 
          = cls.getConstructor(partypes);
        Object arglist[] = new Object[2];
        arglist[0] = new Integer(37);
        arglist[1] = new Integer(47);
        Object retobj = ct.newInstance(arglist);
     }
     catch (Throwable e) {
        System.err.println(e);
     }
  } 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T18:48:35.810

试试 Class 的类方法：`static Class<?> forName(String class_name)`

用于返回与 instanceof 条件匹配的类的对象。

# windows-phone-7 - 传递绑定列表的值

> ID：10657987
> 
> 赞同：0
> 
> 时间：2012-05-18T18:35:11.853
> 
> 标签：windows-phone-7

我之前有这段代码工作过，但在我试图修复其他问题时以某种方式将其删除。

所以我有一个绑定为视图模型的列表，列表上有三行。

我希望能够单击列表，获取另一页上第三行的值并使用该值。

这是列表选择的代码

```
private void List_SelectionChanged(object sender, SelectionChangedEventArgs e)
{

        // If selected index is -1 (no selection) do nothing
        if (List.SelectedIndex == -1)
            return;

        // Navigate to the new page
        NavigationService.Navigate(new Uri("/Route.xaml?selectedItem=" + List.SelectedIndex, UriKind.Relative));

        string urlWIthData = string.Format("/Route.xaml?name={0}", " ");
        this.NavigationService.Navigate(new Uri(urlWIthData, UriKind.Relative));
        // Reset selected index to -1 (no selection)
        List.SelectedIndex = -1;
} 
```

然后，在路线页面上，我希望能够获得价值并使用价值线三......

我该怎么做呢？

编辑：

所以这是列表的一部分：

```
this.Items.Add(new ItemViewModel() { LineOne = "Images/1.png", LineTwo = "Whitehawk - County   
Hospital - City Centre - Hove - Portslade - Mile Oak", LineThree = "1 Whitehawk - Mile Oak", 
LineFour = "1 Mile Oak - Whitehawk", LineFive = "1149" }); 
```

我在一页上显示列表：

```
 <ListBox Margin="6,6,7,6" ItemsSource="{Binding Items}" Name="List" OpacityMask="#FFD38648" FontSize="26" SelectionChanged="List_SelectionChanged">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,17" DataContext="{Binding}">
                        <Image Name="Images" Source="{Binding LineOne}">
                        </Image>
                        <TextBlock Text="{Binding LineTwo}" Style="{StaticResource PhoneTextSubtleStyle}" Name="textblock3"></TextBlock>
                                             </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:05:18.497

您可以将列表的 SelectedItem 转换为类型 Item 并从那里获取值：

```
private void List_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
       // If selected index is -1 (no selection) do nothing
        if (List.SelectedIndex == -1)
            return;

       // Here's the codes -----------------------

       var item = Items.SelectedItem as Item;
       if(item == null) //cast didn't work
            return;

       var lineThree = item.LIneThree;

       // end of the codes -----------------------

        // Navigate to the new page
        NavigationService.Navigate(new Uri("/Route.xaml?selectedItem=" + List.SelectedIndex, UriKind.Relative));

        string urlWIthData = string.Format("/Route.xaml?name={0}", " ");
        this.NavigationService.Navigate(new Uri(urlWIthData, UriKind.Relative));
        // Reset selected index to -1 (no selection)
        List.SelectedIndex = -1;
} 
```

# jquery - 在 jquery 中停止 javascript 函数？

> ID：10657995
> 
> 赞同：0
> 
> 时间：2012-05-18T18:35:36.170
> 
> 标签：jquery

如果 jquery 中的某些条件不匹配，我想取消/停止 javascript 函数

```
<div id="prewrapper">
    <ul class="tabs seller">
        <li class="active">
            <a onclick="adc.FormHandler.goto('user_edit', 0); return false;" href="#"><i data="1" class="icon-tab-num"></i> General Info</a>
        </li>
        <li class="">
            <a onclick="adc.FormHandler.goto('user_edit', 1); return false;" href="#"><i data="2" class="icon-tab-num"></i> Account Details</a>
        </li>
        <li class="">
            <a onclick="adc.FormHandler.goto('user_edit', 2); return false;" href="#"><i data="3" class="icon-tab-num"></i> Roles</a>
        </li>
    </ul>
</div> 
```

我检查了一些验证`$('#prewrapper').click(function (e){`，如果无效，我不想使用 href onclick 功能，即`adc.FormHandler.goto`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:39:05.530

考虑到许多浏览器中的事件模型，到那时你已经太晚了。通常，事件从“最深”元素冒泡到“最浅”元素。

你可以通过使用 jQuery 委托事件来解决这个问题：

```
$('#prewrapper').on('click', 'a', function()
{
    if(someCondition)
       adc.FormHandler.goto('user_edit', $(this).data('edit-num');
}); 
```

你`someCondition`告诉我们是否调用实际元素上的点击事件。然后，您使用属性标记链接以存储用户参数：

```
<a data-edit-num="1" href="#"> 
```