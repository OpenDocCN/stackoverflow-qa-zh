# StackOverflow 问答 10916000-10916999

# jquery - jQuery 计时/循环延迟

> ID：10916001
> 
> 赞同：2
> 
> 时间：2012-06-06T14:14:08.730
> 
> 标签：jquery, cycle, html, timing

我需要在我的网站上制作一些简短的“新闻快讯”......淡入淡出一些's并需要它们循环......

到目前为止，我有这样的事情：

```
$('.text01').hide().fadeIn('slow').delay(3000).fadeOut('slow');
$('.text02').hide().delay(4000).fadeIn('slow').delay(3000).fadeOut('slow');
$('.text03').hide().delay(8000).fadeIn('slow').delay(3000).fadeOut('slow');
$('.text04').hide().delay(12000).fadeIn('slow').delay(3000).fadeOut('slow'); 
```

但是，这不会循环，我是真正的新手，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:30:49.310

您应该在页面中创建一个 div：

```
<div id='newsticker'></div> 
```

然后将你所有的新闻故事放在一个数组中并运行这个调用自身的函数：

```
var newsItems = ['England will win Euro 2012','Pigs will fly by 2030','Third news story','Final news story'];

function displayNews(itemID){
    $('#newsticker').html(newsItems[itemID]);
    $('#newsticker').fadeIn('slow',function(){
        $('#newsticker').delay(4000).fadeOut('slow', function(){
            itemID++;
            if (itemID == newsItems.length){
                itemID = 0;
            }
            displayNews(itemID);            
        });
    });
}

//Start off the news ticker
displayNews(0); 
```

在此处查看[工作演示](http://jsfiddle.net/334Qr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:27:02.003

我曾经创建了一个这样的函数。显然，您必须将内容包装在 a`<li>`中才能正常工作……但也许它会给您一个想法。

```
function liRotator() { 
var liprev = $("ul.rotator li:first-child");
$(liprev).each(function(g) {
  $(this).delay(g*1600).slideUp(function() {
    $(this).appendTo(this.parentNode).slideDown();
  });
}); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:23:22.653

假设你有什么行为你想要的方式，你可以把它们放在一个函数中，并在一个时间间隔内调用该函数

```
setInterval(your_function_name, time_in_milliseconds); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:23:50.407

看看这个小提琴，它的工作原理：http: [//jsfiddle.net/7gpYB/3/](http://jsfiddle.net/7gpYB/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T14:23:55.827

据我所知，您可能正在查看内容滑块之类的东西。我会尝试类似[Nivo Slider](http://nivo.dev7studios.com/)的东西。这是一个 jQuery 插件，您可以轻松实现它，我更喜欢它，因为它使您能够使用 CSS 对它的各个方面进行皮肤处理，并将源代码保持在最低限度。它还支持许多回调函数以及转换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T14:30:04.490

这是另一个:)

```
function flow(elem){
    el = $(elem);
    el.fadeIn('slow').delay(3000).fadeOut('slow', function(){
        nextElem = el.is(':last-child') ? el.siblings(':eq(0)') : el.next();
        flow(nextElem);
    });
}
$(document).ready(function(){
    flow('span:eq(0)')
}) 
```

[JSFiddle 上的演示](http://jsfiddle.net/acrashik/D2VtV/1/)

# sql - 在不同的数据库帐户下执行存储的 PL/SQL 过程

> ID：10916002
> 
> 赞同：1
> 
> 时间：2012-06-06T14:14:12.410
> 
> 标签：sql, database, oracle, plsql

我正在尝试为 Web 门户（APEX）编写一个脚本，该脚本允许用户在他们选择的关联数据库上更改他们的密码

我正在尝试编写一个 pl/sql 过程，我可以通过数据库链接执行该过程以更改该数据库的密码。

我想我要问的是我可以在 PL/SQL 块中以不同用户的身份连接并`alter user identified by`从该块中运行吗？

```
CREATE OR REPLACE PROCEDURE CHPWD 
(
  Database IN VARCHAR2  
, Username IN VARCHAR2  
, old_pw IN VARCHAR2  
, new_pw IN VARCHAR2  
) AS 
BEGIN
 /* Something like conn Username/old_pw here 

 then

 alter username identified by new_pw */

END CHPWD; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:02:29.523

标准方法是让程序由可以更改任何密码的高特权用户拥有，将程序的执行权限授予应该能够执行它的用户，并在程序中放置逻辑以实现安全限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:21:23.957

我认为主要问题是在更改用户密码之前对其进行身份验证。我认为没有一种安全的方法可以做到这一点 - 确认密码的最佳方法是，如您的评论中那样，使用它登录到数据库。这需要将密码传递给外部脚本，但这会向任何有权访问系统的人透露您的纯文本密码。

另一种方法是采用人们用来复制 Oracle 密码散列算法的算法 - 但这实际上是一起被黑客攻击的并且可能会被更改： [http ://www.petefinnigan.com/weblog/archives/00001097.htm](http://www.petefinnigan.com/weblog/archives/00001097.htm)

# loops - 如何打破 Tapestry 循环？

> ID：10916019
> 
> 赞同：0
> 
> 时间：2012-06-06T14:14:56.793
> 
> 标签：loops, break, tapestry

所以，我想在这里打破挂毯循环。

这是我的 - 或多或少 - 简化的场景：

```
<ul>
    <t:loop source="firstSource" value="firstValue">
            <li>
                <t:loop source="firstValue" value="secondValue">
                    <p>${secondValue}</p>
                </t:loop>
                <t:loop source="secondSource" value="thirdValue">
                    <p>${thirdValue}</p>
                </t:loop>
            </li>
    </t:loop>
</ul> 
```

我不想拥有的是：Tapestry 循环遍历 firstValue 中的所有条目 - 然后循环遍历 secondSource 中的所有条目。我不想在 fristValue 的循环中遍历 secondSource，因为这将遍历 secondSource 中的所有条目——我只想一次进行 1 次迭代。

我想要的是： Tapestry 进入 firstValue 的循环并进行一些打印或其他操作，然后在第一次迭代后中断并跳转到 secondSource 进行第一次迭代。完成后，它会跳回 firstValue 并重复这些步骤。这就是 Java 中的“中断”；会做。

我没有在 Tapestry 文档中找到有关如何执行此操作的线索，也没有在他们的论坛中找到线索。

但它必须以某种方式成为可能。我无法想象我是唯一一个尝试这样做的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:40:05.660

只需在逻辑周围放置一个 if 语句，可能使用索引变量：

```
 <t:loop source="firstSource" value="firstValue">
            <li>
                <t:loop source="firstValue" value="secondValue" index="firstValueIndex">
                   <t:if test="firstCondition">
                     <p>${secondValue}</p>
                   </t:if>
                </t:loop>
                <t:loop source="secondSource" value="thirdValue">
                  <t:if test="secondCondition">
                    <p>${thirdValue}</p>
                  </t:if>
                </t:loop>
            </li>
    </t:loop> 
```

在 Java 页面中：

```
@Property
private int firstValueIndex;

public boolean getFirstCondition() {
  // logic to determine whether to break out
  return firstValueIndex == 0;
}

public boolean getSecondCondition() {
  // logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:09:34.360

我的猜测是你有三个数据源并且试图输出三列，对吗？

有时您必须稍微转换您的数据：例如，您可能需要做一些工作来将三个输入中的每个输入中的一个值转换为单个值：

```
public class Row {  

  Object col1, col2, col2;

} 
```

在您的 Java 代码中，您将构建一个 Row 对象列表。

在您的模板中，您遍历 Row 对象，呈现 col1、col2 和 col3 属性。

（在 Tapestry 5.3 及更高版本中，可以将公共字段视为属性。）

我使用了类似的技术来输出日历，在模板中使用条件等进行管理可能非常棘手。

记住控制器在 MVC 中的角色：它的工作是在模型和视图之间进行*调解；*有时这包括模型数据的一些简单转换以适应视图。

# c++ - 这个条件如何成立

> ID：10916020
> 
> 赞同：0
> 
> 时间：2012-06-06T14:15:09.117
> 
> 标签：c++, pointers

我有以下函数，它是 Trie 结构实现的一部分：

```
int alpha_char_strlen (const AlphaChar *str) {
    const AlphaChar *p;
    for (p = str; *p; p++) ;
    return p - str; 
```

}

任何人都可以帮助我并解释 for 循环的条件如何成立，以及在这种情况下究竟是什么条件？
注意：AlphaChar 只是一个具有 unsigned int 类型的 typedef，该函数计算 AlphaChar 字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T14:18:56.477

条件`*p`等同于`*p != 0`（如果`*p`是原始类型）。也就是说，您不断增加指针`p`，直到它指向零。换句话说，您将`str`其视为指向以零结尾的数组的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:20:06.760

条件是`*p`，是 的缩写`*p!=0`。

所以它只是简单地扫描 AlphaChar 数组中是否出现 0。

# sitecore - How to view conversion data

> ID：10916029
> 
> 赞同：2
> 
> 时间：2012-06-06T14:15:32.493
> 
> 标签：sitecore, sitecore-dms

I have inherited a sitecore project. In this project there are goals already setup. I can see this via the Marketing Center > Goals.

**My questions is** how to view the conversion data for each of the goals?

This is what I tried: selected the 'Analyze Tab', Clicked 'Reports button' on the ribbon, then under 'Item Reports' selected 'Pages - Goals and Events'.

Doing the above generates a report but the values are `0`, we are expecting it to show values.

Sitecore and DMS version: 6.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:51:46.203

也许您可能已经找到了问题的答案，但答案就在这里。

很少有事情可以确保在已经存在的目标中指定参与价值点。例如

*   时事通讯注册 - 25 个参与价值点
*   在线报价 - 50 个参与价值点
*   申请演示 - 100 个参与价值点

还设置了相关性。***相关性 = 价值/访问次数***

请参阅[Sitecore Executive Dashboard Cookbook 6.5](http://sdn.sitecore.net/upload/sitecore6/65/executive_dashboard_cookbook_sc65-a4.pdf)第 1.2 节

如果上述内容到位并且工作正常，请检查目标与内容项的关联是否正确。请参阅[Sitecore 营销运营手册 6.5](http://sdn.sitecore.net/upload/sitecore6/65/marketing_operations_cookbook_sc65-a4.pdf)第 3.1.3 节

让我知道以上是否有效或有帮助。

# ios - IOS: merge ImageView and UIImage

> ID：10916031
> 
> 赞同：0
> 
> 时间：2012-06-06T14:15:37.650
> 
> 标签：ios, xcode, uiimageview, uiimage

I want put over an UIImage a small UIImageView and I want as result an UIImage, what can I do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:22:23.217

您必须创建一个新的图形上下文 ( `UIGraphicsBeginImageContextWithOptions()`)，然后将两个图像绘制到上下文 ( `-[UIImage drawInRect:]`) 中，然后从上下文中检索图像 ( `UIGraphicsGetImageFromCurrentImageContext()`)。

最后别忘了打电话`UIGraphicsEndImageContext()`。

# asp.net - 汇总网格项模板列中的子数据源数据列

> ID：10916033
> 
> 赞同：0
> 
> 时间：2012-06-06T14:15:38.367
> 
> 标签：asp.net, data-binding, telerik

我正在处理数据库中的三个表。第一个表标记为“Accounts”，并与第二个表“AccountItems”具有一对多关系。AccountItems 表有一个 size 列。第三个表，与这个问题有些相切，是“客户”，它有很多帐户。

我正在创建一个绑定到 Account 表的 RadGrid。它应该看起来像这样：

```
Customer | Location | Account# | Total Size
___________________________________________ 
```

Location 和 Account # 和 Customer 一样简单，因为导航属性在项目模板中工作。

然而，我的问题是大小列。它应该总计每个 AccountItem 的大小。例如，如果有四个 AccountItem，每个大小为“50”，那么总数应该是 200。看起来我不能像在 Customer 中那样简单地在 Eval() 中导航子关系。是否可以在列代码中执行此操作，或者我是否需要为 OnItemCreated 执行服务器端事件处理程序？

**编辑**

我想出了一个临时修复。

```
<ItemTemplate>
    <asp:Label ID="lblSizeSum" runat="server"Text='<%# CalculateSizeTotal((MS_Accounts)Container.DataItem)%>'>
<ItemTemplate> 
```

然后是后面的代码：

```
Protected string CalculateSizeTotal(MS_Accounts dataItem)
    {
        return dataItem.MS_AccountLoads.Sum(s => s.Size).ToString();

    } 
```

我唯一不喜欢的是通过直接访问我的 ORM 进行强制转换明显违反了 MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:42:29.907

请检查下面的代码片段。如果我遗漏任何东西或不理解您的要求，请告诉我。

**.aspx**

```
 <telerik:RadGrid ID="RadGrid2" runat="server" AllowPaging="True" AllowSorting="True"
        OnNeedDataSource="RadGrid2_NeedDataSource" AutoGenerateColumns="False" 
        onitemdatabound="RadGrid2_ItemDataBound">
        <MasterTableView>
            <Columns>
                <telerik:GridBoundColumn DataField="CustomerID" HeaderText="CustomerID" UniqueName="CustomerID">
                </telerik:GridBoundColumn>
                <telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" ></asp:Label>
                    </ItemTemplate>
                </telerik:GridTemplateColumn>
            </Columns>
        </MasterTableView>

    </telerik:RadGrid> 
```

**.aspx.cs**

公共部分类论坛页面：System.Web.UI.Page {

受保护的无效RadGrid2_NeedDataSource（对象发送者，GridNeedDataSourceEventArgs e）{RadGrid2.DataSource = getDatarofGrid（）；}

```
protected List<Customer> getDatarofGrid()
{
    List<Customer> lstCustomer = new List<Customer>();
    Customer customer;

    for (int i = 0; i < 3; i++)
    {
        customer = new Customer();
        customer.CustomerID = i;

        List<Sizes> lstSize = new List<Sizes>();
        Sizes sizes;
        for (int j = 0; j < 3; j++)
        {
            sizes = new Sizes();
            sizes.size = i + 100;
            lstSize.Add(sizes);
        }

        customer.sizes = lstSize;
        lstCustomer.Add(customer);
    }

    return lstCustomer;
}
protected void RadGrid2_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        GridDataItem item = e.Item as GridDataItem;
        Label Label1 = item.FindControl("Label1") as Label;

        Customer objcustomer = item.DataItem as Customer;

        if (objcustomer != null && objcustomer.sizes.Count > 0)
        {
           Label1.Text =  objcustomer.sizes.Sum(i => i.size).ToString();
        }
    }
} 
```

}

公共类客户 { 公共 int 客户 ID { 获取；放; } 公共列表大小 { 获取；放; } }

公共类尺寸 { 公共 int 尺寸 { 获取；放; } }

# diff - How to find exactly why patch failed?

> ID：10916034
> 
> 赞同：4
> 
> 时间：2012-06-06T14:15:38.853
> 
> 标签：diff, patch, unified-diff

I have a unified diff patch which patch rejects. A visual inspection of the diff file and the original code finds the code contains all text expected by the diff file in the correct location. I have tried --ignore-whitespace and -F3 for good measure but patch still fails. Does an option exist to report exactly what is causing the patch to fail?

# javascript - Javascript SDK not working in Facebook Canvas App IE7/8

> ID：10916037
> 
> 赞同：0
> 
> 时间：2012-06-06T14:15:42.457
> 
> 标签：javascript, internet-explorer, facebook-javascript-sdk

I am developing a canvas app and got it working as required in all browsers apart from IE 7/8 where I cannot get the app to auto redirect to the Facebook login screen if users are not already logged into Facebook.

I suspect that IE is not getting the state of the users through getLoginStatus method and therefore cannot fire the javascript redirect, and because of this the remove the app functionality is also not working.

I have ran the code through a online JS lint tool and have tidied a few things up and tried again but having no luck

If I try this outside of facebook e.g [https://mydomain.com/directory](https://mydomain.com/directory), the JS SDK works perfectly and redirects to Facebook login page but will not do the same within the Facebook iframe

I have noticed that within the Facebook iframe the system cannot get the browser mode and uncertain whether this would have a bearing

Here is my complete code

```
$(document).ready( function() {
//Facebook JS SDK
window.fbAsyncInit = function () {
    FB.init({
        appId: 'xxxxxxxxxxxxxxxxx',
        channelUrl: '//www.mydomain.co.uk/facebook-notes/channel.html',
        // Channel File
        cookie: true,
        xfbml: true,
        oauth: true,
        status: true
    });
    FB.getLoginStatus(function (response) {
        if (response.status === 'connected') {
            //alert('hello');
            $('a#remove-app').click(function () {
                var request = response.authResponse.accessToken;
                $("#dialog:ui-dialog").dialog("destroy");
                $("#dialog-confirm").dialog({
                    height: 140,
                    modal: true,
                    position: [236, 101],
                    buttons: {
                        "Yes": function () {
                            if (request) {
                                $.ajax({
                                    url: 'https://graph.facebook.com/me/permissions',
                                    type: 'GET',
                                    data: 'method=delete&access_token=' + request,
                                    dataType: 'jsonp',
                                    success: function (response) {
                                        top.location.href = 'http://facebook.com';
                                    }
                                });
                            }
                        },
                        Cancel: function () {
                            $(this).dialog("close");
                        }
                    }
                });
                return false;
            });
        } else {
            //alert('user not logged in');
            var oauth_url = 'https://www.facebook.com/dialog/oauth/';
            oauth_url += '?client_id=xxxxxxxxxxxxxxx';
            oauth_url += '&redirect_uri=' + encodeURIComponent('https://apps.facebook.com/app_name/');
            oauth_url += '&scope=email';
            window.top.location = oauth_url;
        }
    },
        true);
    $('a#invite-a-friend').click(function () {
        sendRequestViaMultiFriendSelector();
    });
    // Multi friend selector for Facebook
    function sendRequestViaMultiFriendSelector() {
        FB.ui({
            method: 'apprequests',
            message: 'Come and join the app on Facebook'
        });
    }
    function requestCallback(response) {
        alert (response);
    }
};
// Load the SDK Asynchronously
(function (d) {
    var js,
        id = 'facebook-jssdk',
        ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement('script');
    js.id = id;
    js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));
}); 
```

I would appreciate any help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:27:22.863

很可能是旧的第三方 cookie 问题的另一种表现形式。搜索第三方 cookie / P3P 政策以找到应使其发挥作用的解决方案。

# algorithm - How to approximate a polygon with n rectangles?

> ID：10916040
> 
> 赞同：6
> 
> 时间：2012-06-06T14:16:07.310
> 
> 标签：algorithm, geometry, computational-geometry

Is there any algorithm that can approximate the given polygon with n non overlapping rectangles that gives the maximum coverage? By maximum coverage I mean, the sum of the rectangle areas are maximized. Rectangles are not necessarily equal sized.

The polygons I am dealing are convex. If exact solution is hard/expensive to find (which I am expecting it to be), simple good heuristics are welcome too.

**Edit** I always thought of approximating the polygon with rectangles inside polygon, but solutions with rectangles not totally inside polygons are also fine. If that is the case, maximization of the area becomes minimization of the area.

**Edit 2** I forgot to mention that these rectangles are orthogonal rectangles, i.e. aligned with axises.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T14:47:39.577

一种方法是为您的多边形创建一个（在一般情况下为矩形）边界框。计算边界框面积与多边形面积之差。如果差异足够小，您就完成了，如果没有，请继续...

将盒子分成 4 个大小相等的矩形，2x2。找出这些矩形中的哪个完全在多边形内。计算多边形内矩形总面积与多边形总面积之差。如果差异足够小，你就完成了，如果没有继续......

将 4 个矩形中的每一个划分为 4 个子矩形......如果在任何阶段您发现一个矩形完全位于多边形内部或完全外部，您可以将其从矩形列表中删除以在下一次迭代中细分。

换句话说，使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)来划分包含多边形的空间，并将其开发到满足您的精度标准所需的程度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T15:50:46.457

1.  创建要处理的多边形队列 Q
2.  将初始多边形添加到 Q

3.  从 Q 中移除多边形 P

4.  求 P 的最长边 A
5.  旋转 P 使 A 在 X 轴上
6.  如果 P 是一个三角形，用 A 中心的垂线分割它： ![在此处输入图像描述](../Images/073db502994b29556273b0b27d8cda8a.png)
7.  将两半 G 和 H 添加到 Q 并转到 3
8.  （现在，P 有 4 个或更多边）
9.  如果 X 和/或 Y 是锐角：

![在此处输入图像描述](../Images/1866d41dae968fe084c363e7fe96367d.png)

10\. 取 P、A 的下一个最长边，然后转到 5

11\. 从 A 向上投影一个红色矩形。找到它与 P、B 和 C 相交的 2 个点： ![在此处输入图像描述](../Images/56e24d088327bb22d92f36848a7192d7.png)

12\. 选择较长的（B）并最终确定绿色矩形

13\. 将剩余的数字（D、E 和 F）添加到 Q

14\. 转到 3

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T14:43:34.400

第一个想法，也许其他人可以改进它。

*   在多边形内的某处放置一个正方形，尽可能远离任何边缘。
*   迭代地 1.) 增长它，2.) 移动它并转动它以最大化它与边缘的距离。直到你不能再种植它
*   从头开始，同时将放置的矩形的边缘视为多边形的边缘。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-23T23:08:37.250

我意识到这是一个非常古老的问题，但我最近偶然发现了一个类似的问题，我不得不尝试用矩形来近似多边形。使用这里和其他地方提出的一些想法，我从一个[内接矩形](http://cgm.cs.mcgill.ca/~athens/cs507/Projects/2003/DanielSud/)开始，并在内接矩形周围生成矩形，以提供多边形的一般形状。

这种方法适用于凸多边形，也适用于某些凹多边形——特别是如果您采用迭代方法（例如，将输出矩形作为输入提供给另一个迭代）。

对于非常凹的形状，您可以考虑将多边形分解为凸包，然后应用我上面描述的技术。[Bayazit](https://mpen.ca/406/bayazit)的实现看起来很有希望。

如果有人感兴趣，我在这里使用内接矩形发布了我的实现： [https ://github.com/pborissow/Poly2Rect](https://github.com/pborissow/Poly2Rect)

[![Poly2Rect](../Images/4000f919290efa6cdec7c8390b10f00e.png)](https://i.stack.imgur.com/C1UBU.png)

# sql - 一行sql中有多个where子句

> ID：10916042
> 
> 赞同：5
> 
> 时间：2012-06-06T14:16:09.747
> 
> 标签：sql, count, where

我想采用以下语句并将其融合到一个查询中。

```
SELECT COUNT(*) AS count1 WHERE Month='11' AND Flag = 1
SELECT COUNT(*) AS count2 WHERE Month='11' AND Flag = 2
SELECT COUNT(*) AS count1 WHERE Month='12' AND Flag = 1
    SELECT COUNT(*) AS count2 WHERE Month='12' AND Flag = 2 
```

我希望它显示为一个查询，其中包含 count1 和 count2 列以及第 11 个月和第 12 个月的行。

有没有这样的语法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T14:20:48.163

您可以一次组合`SUM`并`CASE`获得各种计数：

```
SELECT
    Month,
    SUM(CASE WHEN Flag=1 THEN 1 ELSE 0 END) as count1,
    SUM(CASE WHEN Flag=2 THEN 1 ELSE 0 END) as count2
from
    ...
WHERE Month in ('11','12')
GROUP BY
    Month /* Other columns? */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:20:18.990

**只有两列**，它可以是这样的：

```
select
   (SELECT COUNT(*) FROM tablename WHERE Month='11' AND Flag = 1) as 'count1'
   (SELECT COUNT(*) FROM tablename WHERE Month='11' AND Flag = 2) as 'count2'

UNION ALL

select
   (SELECT COUNT(*) FROM tablename WHERE Month='12' AND Flag = 1), 
   (SELECT COUNT(*) FROM tablename WHERE Month='12' AND Flag = 2) 
```

替换`tablename`为您的表的名称。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T14:19:33.487

这个怎么样：

```
select
    month, flag, count(*)
from
    table
where
    month in ('11', '12') and
    flag in (1, 2)
group by
    month, flag; 
```

# android - 将数组中的特定字符串设置为粗体

> ID：10916046
> 
> 赞同：0
> 
> 时间：2012-06-06T14:16:14.537
> 
> 标签：android, string

我将用户的短信收件箱显示为列表视图。我想将 from 和 message 字符串加粗，但由于它们是数组的一部分，所以我无法找出方法。我试过使用**strings.xml 中的标签，但这不起作用。如何将这两个字符串设置为粗体？**

 **```
 public ArrayList fetchInbox() {  
        ArrayList sms = new ArrayList();  
        Uri uriSms = Uri.parse("content://sms/inbox");  
        Cursor cursor = getContentResolver().query(uriSms, new String[]{"_id", "address", "date", "body"},null,null,null);   
        cursor.moveToFirst();  
        while  (cursor.moveToNext())  
        {  
               String address = cursor.getString(1);  
               String body = cursor.getString(3);
               sms.add(from + " " + address + "\n" + message + " " + body);
        }  
        return sms;  
    }

    private void setStrings() {
        from = (String) getResources().getString(R.string.from);
        message = (String) getResources().getString(R.string.message);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:32:17.027

你可以`Html.fromHtml( String )`这样使用：

```
TextView txt = (TextView)findViewById(R.id.txt);
txt.setText( Html.fromHtml( "<b>"+from+"</b> " + message ) ); 
```**

# asp.net-mvc - how to check username and password from my own table?

> ID：10916047
> 
> 赞同：0
> 
> 时间：2012-06-06T14:16:15.093
> 
> 标签：asp.net-mvc, asp.net-mvc-3

In asp.net webforms we can determine members or admins table for login like :

```
select * from tbladmins where username = @p1 and password = @p2 
```

but in asp.net mvc it has own database , table and class .. Membership class connect to own table for check username and password ..

I want to know how can I use Membership class for my own admins table ?! I mean I want to check my own table on my own database by Membership class . but Membership use asp.net database on local server for checking username and password . by this way every site need 2 database for Account and other data like posts , news and etc ..

I have a table with this columns : `id , username , password` .

How can I check this table by `Membership` class ?

# magento - Wamp server not rendering Magento install page

> ID：10916049
> 
> 赞同：0
> 
> 时间：2012-06-06T14:16:31.520
> 
> 标签：magento, localhost, wamp

Finally after much research when I couldn't get anything, I'm posting here. I'm trying to install magento on wamp server version 2.1\. I extracted the **Magento CE 1.7.0** to 'magento' folder in **c:\wamp\www**. I checked the dependencies and they are all compliant. When I try to access magento through `http://localhost/magento/`, the url changes to `http://www.localhost.com/magento/` and I get a `Connection was reset` error.

What am I missing? If any other information is needed, please let me know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:04:51.297

请检查您的错误日志（可能在 C:\wamp\logs 中）。

Magento 本身不应该在 Windows 上运行（这是可能的，但需要大量工作才能让所有 PHP 模块运行）。

我建议您将它安装在 linux/unix 服务器上，并从数据包管理器安装 Apache（没有预配置的包，如 LAMP、XAMPP 等......）。如果您无法访问 linux 机器并且没有服务器，请尝试使用 VM（如 VirtualBox）。

相信我，在 Linux 上运行 Magento 会比在 Windows 上更容易；-)

# batch-file - Bat文件目录列表，删除文本enries

> ID：10916053
> 
> 赞同：2
> 
> 时间：2012-06-06T14:16:36.987
> 
> 标签：batch-file

我有一个仅列出目录文件的简单 bat 文件。

```
if exist "output.txt" del "output.txt" 
dir /a /b /-p /O:N >>output.txt 
```

创建文本文件时，它还会在文本文件中添加 bat 文件和 output.txt 条目。我想删除这两个条目以使最终列表干净。

谢谢，希望我解释正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:40:22.747

这是对 Seki 答案的一个小改进：

1）使用覆盖重定向而不是附加

2) 使用单个 FINDSTR 消除这两个文件

3)`%~nx0`用于获取正在运行的批处理文件的名称

```
@dir /a /b /-p /o:n|findstr /vi /c:"output.txt" /c:"%~nx0" >output.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:33:26.820

假设批处理文件名为`list.bat`，在您的帮助下`findstr`可以从`dir`输出中排除这两个文件。

将第二行替换为

```
dir /a /b /-p /O:N |findstr /vi output.txt|findstr /vi list.bat >>output.txt 
```

顺便说一句，该`if exist...`行是无用的，因为该文件是在开始列出文件之前`output.txt`通过命令重定向重新创建的。`dir`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:55:54.840

下面的版本不需要 FINDSTR，所以速度更快：

```
@echo off
(for %%f in (*.*) do if "%%f" neq "%~NX0" if "%%f" neq "output.txt" echo %%f) > output.txt 
```

# android - Android 地理编码类

> ID：10916056
> 
> 赞同：0
> 
> 时间：2012-06-06T14:16:41.270
> 
> 标签：android, maps, geocode

android.geocode 类位于哪个库中。它是否取决于设备的类型，因为我有一个提取位置名称的代码，如下所示：

```
List<Address> addresses = mGeocoder.getFromLocation(latitude, longitude, 1); 
```

在平板电脑上这段代码效果很好，但是当涉及到与手机相关的设备时，它只会返回空列表。任何建议为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:22:46.973

来自 Android 文档[Android：GeoCoder](http://developer.android.com/reference/android/location/Geocoder.html)

> 如果平台中没有后端服务，Geocoder 查询方法将返回一个空列表。使用 isPresent() 方法确定是否存在 Geocoder 实现。

根据文档，它自 API 级别 1 起就存在，但推荐的方法是调用 isPresent 以查看方法`getFromLocation`和`getFromLocationName`是否已实现。

# java - Liferay blog URL's and virtual host

> ID：10916059
> 
> 赞同：1
> 
> 时间：2012-06-06T14:16:50.140
> 
> 标签：java, jsp, tomcat, utf-8, liferay

Our company running Liferay without virtual host. We using VM IP with port 80 open for our portal. No any problems with this setup.

When I'm added virtual host to Liferay and changed DNS on my machine -- I can't opened any assets (articles) with long russian names.

Tomcat console:

```
WARN  [404_jsp:109] /home/-/asset_publisher/JbL5ejmhvwSa/content/%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BF%D1%80%D0%BE%D0%BA%D0%BE%D0%BC-%D0%BF%D0%BE-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%B8-%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%B1%D0%B0%D0%B7%D0%B5-%D0%BF%D1%80%D0%BE%D0%B4%D1%83%D0%BA%D1%82%D0%BE%D0%B2-ibm 
```

Virtual host enabled URL (not working)

```
http://companyname.com/home/-/asset_publisher/JbL5ejmhvwSa/content/%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BF%D1%80%D0%BE%D0%BA%D0%BE%D0%BC-%D0%BF%D0%BE-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%B8-%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%B1%D0%B0%D0%B7%D0%B5-%D0%BF%D1%80%D0%BE%D0%B4%D1%83%D0%BA%D1%82%D0%BE%D0%B2-ibm?redirect=http%3A%2F%2Finterprocom.ru%2Fhome%3Fp_p_id%3D101_INSTANCE_JbL5ejmhvwSa%26p_p_lifecycle%3D0%26p_p_state%3Dnormal%26p_p_mode%3Dview%26p_p_col_id%3Dcolumn-2%26p_p_col_pos%3D1%26p_p_col_count%3D2 
```

Virtual host disabled URL (working)

```
http://192.168.10.35/web/guest/home/-/asset_publisher/JbL5ejmhvwSa/content/%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BF%D1%80%D0%BE%D0%BA%D0%BE%D0%BC-%D0%BF%D0%BE-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%B8-%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%B1%D0%B0%D0%B7%D0%B5-%D0%BF%D1%80%D0%BE%D0%B4%D1%83%D0%BA%D1%82%D0%BE%D0%B2-ibm?redirect=http%3A%2F%2F192.168.10.45%2Fweb%2Fguest%2Fhome%3Fp_p_id%3D101_INSTANCE_JbL5ejmhvwSa%26p_p_lifecycle%3D0%26p_p_state%3Dnormal%26p_p_mode%3Dview%26p_p_col_id%3Dcolumn-2%26p_p_col_pos%3D1%26p_p_col_count%3D2 
```

It's few days until we go public. We'll use our domain companyname.com

I'm worried that we will got same issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:22:35.313

看到这个问题，我可以帮助你：[Liferay：更改公共虚拟主机设置后，无法登录](https://stackoverflow.com/questions/10794144/liferay-after-changing-public-virtual-host-settings-cant-log-in)

您还可以在生成的 jsp 代码中看到`tomcat/work/...` 为什么这不起作用。最后，您可以调试 Liferay 并找到解决方案 :) 调试 Liferay 的简单方法是获取 Liferay IDE 并将 Liferay Source 添加为 eclipse 项目。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:12:39.177

无法立即解决根本问题：您还可以使用主机名的最后一个选项：没有虚拟主机名，只需将名称解析为 192.168.10.35（上线时更改为实际 IP）。

另外，您使用的是哪个版本的 Liferay？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T12:16:40.050

即使我面临这个问题，并观察到使用 liferay 的虚拟主机映射，当它们与访客站点中的条目相关时，带有特殊字符的 url 也不会显示出来。

> 通过映射虚拟主机，从 URL 中删除 web/guest 部分。

现在，如果您尝试在 URL 之前手动添加 web/guest，在您的情况下

尝试使用以下 URL 访问

[http://companyname.com/web/guest/home/-/asset_publisher/JbL5ejmhvwSa/content/%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F -%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BF%D1%80%D0%BE%D0%BA%D0%BE%D0%BC-%D0%BF %D0%BE-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8- %D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%B2%D1%80%D0%B5%D0%BC% D0%B5%D0%BD%D0%B8-%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0 %BE%D0%B2-%D0%BD%D0%B0-%D0%B1%D0%B0%D0%B7%D0%B5-%D0%BF%D1%80%D0%BE%D0%B4% D1%83%D0%BA%D1%82%D0%BE%D0%B2-ibm?redirect=http%3A%2F%2Finterprocom.ru%2Fhome%3Fp_p_id%3D101_INSTANCE_JbL5ejmhvwSa%26p_p_lifecycle%3D0%26p_p_state%3Dnormal%26p_p_mode% 3Dview%26p_p_col_id%3Dcolumn-2%26p_p_col_pos%3D1%26p_p_col_count%3D2](http://companyname.com/web/guest/home/-/asset_publisher/JbL5ejmhvwSa/content/%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BF%D1%80%D0%BE%D0%BA%D0%BE%D0%BC-%D0%BF%D0%BE-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE-%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%B8-%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%B1%D0%B0%D0%B7%D0%B5-%D0%BF%D1%80%D0%BE%D0%B4%D1%83%D0%BA%D1%82%D0%BE%D0%B2-ibm?redirect=http%3A%2F%2Finterprocom.ru%2Fhome%3Fp_p_id%3D101_INSTANCE_JbL5ejmhvwSa%26p_p_lifecycle%3D0%26p_p_state%3Dnormal%26p_p_mode%3Dview%26p_p_col_id%3Dcolumn-2%26p_p_col_pos%3D1%26p_p_col_count%3D2)

它应该可以工作。

> 因此，解决此问题的一种可能方法是将虚拟主机映射保留在您的 windows/您的 os 主机文件中，并在控制面板的门户选项卡下的门户设置中的 Liferay 中将虚拟主机重命名为 localhost。

脚步：

```
1) In hosts file keep the mapping as you have done i.e 
   192.168.10.35           companyname.com

2) In liferay, remove the virtual host mapping i.e rename virtual host to localhost in "portal settings" under "Portal" tab in control panel.

and try to access your entry and it will work. 
```

这是非常有趣的行为/可能是 liferay 中的错误。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-22T08:07:40.290

因此，您在本地主机上测试 Liferay，然后尝试在真实域上移动并面临一些奇怪的行为。

您要做的第一件事是检查控制面板并在那里输入新的虚拟主机。

![在此处输入图像描述](../Images/a6b9c4961036ee943760b80a2383d3d0.png)

我不确定这一点，因为我们现在使用的是 6.0，我不记得我们是如何修复它的。如果我的建议没有帮助，请查看对此问题的其他评论。

# jquery - how to popup jquery window to play vimeo/youtube video?

> ID：10916063
> 
> 赞同：0
> 
> 时间：2012-06-06T14:16:56.813
> 
> 标签：jquery, html, youtube, vimeo

I'm building the landing page for an iPhone app, and i would like to add a video modal window to our page. It would be very similar to: [https://path.com/](https://path.com/) .

I found this page ["Popup Jquery window to play youtube"](https://stackoverflow.com/questions/2838749/how-to-popup-a-jquery-window-to-play-youtube-video) but i don't know how to decrease the size of the video (I don't want it playing full screen).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:37:00.820

使用类似[colorbox](http://www.jacklmoore.com/colorbox)
的东西很容易 你需要在你的 html 页面中添加[JQuery](http://jquery.com)，然后是 colorbox 脚本，然后

```
<a href="your_youtube_link" class="video_layer">play me</a>
<script>
$('.video_layer').colorbox({iframe:true});
</script> 
```

从 youtube 上视频下方的嵌入选项卡获取 youtube 链接，您可以在那里设置框架的宽度和高度。

# python - 即使发生错误也能检索 HTTPResponse

> ID：10916065
> 
> 赞同：2
> 
> 时间：2012-06-06T14:17:01.260
> 
> 标签：python, httprequest, urllib

在 Python 中（使用 Python 3.2，但我想它在 Python 2.x 中应该基本相同），我尝试向某个 URL 发出请求。

在访问被拒绝等错误的情况下，我得到一个异常：

```
>>> request = urllib.request.urlopen(myurl)
...
  File "/usr/lib/python3.2/urllib/request.py", line 495, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 401: Unauthorized 
```

但即使出现错误，我也想查看请求的标头。

```
>>> request = urllib.request.urlopen(myurl)
>>> print(request.status)
401
>>> print(request.headers)
... 
```

我还注意到，当页面回复重定向状态代码（例如 301）时，我得到的响应是重定向页面，而不是第一个（这是我想要的）。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:22:00.250

您是否考虑过使用 requests 包？它为您提供了为满足您的请求而进行的所有重定向的历史记录：

```
>>> import requests
>>> r = requests.get('http://google.com')
>>> r
<Response [200]>
>>> r.history
[<Response [301]>, <Response [302]>]
>>> r.url
u'http://www.google.co.uk/' 
```

它还可以很好地处理 401 错误

```
>>> r = requests.get('http://sitesurgeon.co.uk/!dev/http-authorisation/staff/index.htm')
>>> r
<Response [401]>
>>> r.content
'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"> ...
....'
>>> r.headers
{'date': 'Wed, 06 Jun 2012 14:24:16 GMT', 'x-powered-by': 'PHP/5.3.13', 'transfer-encoding': 'chunked', 'content-type': 'text/html; charset=utf-8', 'www-authenticate': 'Basic realm="Staff Area"', 'server': 'Apache'} 
```

如果您希望控制超时，只需按以下方式发出请求：

```
requests.get('http://google.com', timeout=0.1) 
```

# c# - C# 弹性体。更改背景单元格的颜色。精益求精

> ID：10916067
> 
> 赞同：0
> 
> 时间：2012-06-06T14:17:04.530
> 
> 标签：c#, cell, background-color

我正在使用 Flexcel 库并想更改表格（Excel 文档）中单元格的颜色。

我该怎么做？我找不到必要的 API。我可以用 Flexcell 做到这一点吗？

![在此处输入图像描述](../Images/38cdda1a1ee7fd62b87185ea9995723f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T10:38:46.273

我在尝试设置单元格的背景颜色时遇到了同样的问题。我从未设法直接设置它，但我确实设法设置了单元格的 FillPattern，它实际上设置了背景颜色。

在这里，我有一个私有方法，可以设置我计划使用的 4 种不同的背景颜色。请注意，当您添加样式时，您会将它们直接添加到 Excel 文件中。这就是为什么我将 excelFile 传递给此方法然后取回 excelFile 的原因。您必须先将样式添加到 excelFile，然后才能使用样式。

```
 private XlsFile SetUpBackgroundColours(XlsFile excelFile)
    {
        var patternStyle = TFlxPatternStyle.Solid;

        TFlxFormat format = excelFile.GetDefaultFormat;
        format.FillPattern = new TFlxFillPattern { Pattern = patternStyle, FgColor = Color.Yellow }; //1
        format.VAlignment = TVFlxAlignment.top;
        format.HAlignment = THFlxAlignment.left;
        excelFile.AddFormat(format);

        format.FillPattern = new TFlxFillPattern { Pattern = patternStyle, FgColor = Color.LightBlue }; //2
        format.VAlignment = TVFlxAlignment.top;
        format.HAlignment = THFlxAlignment.left;
        excelFile.AddFormat(format);

        format.FillPattern = new TFlxFillPattern { Pattern = patternStyle, FgColor = Color.LightGray }; //3
        format.VAlignment = TVFlxAlignment.top;
        format.HAlignment = THFlxAlignment.left;
        excelFile.AddFormat(format);

        format.FillPattern = new TFlxFillPattern { Pattern = patternStyle, FgColor = Color.White }; //4
        format.VAlignment = TVFlxAlignment.top;
        format.HAlignment = THFlxAlignment.left;
        excelFile.AddFormat(format);

        return excelFile;
    } 
```

这将设置 4 个新样式，然后我可以使用它们添加顺序的索引来引用它们。Flexcel 的索引从 1 开始。

因此，当您使用 SetCellValue 方法在单元格中添加值时，您可以提供已添加的样式的索引以更改背景颜色。以下显示了如何执行此操作的示例：

```
excelFile.SetCellValue(rowNumber, columnNumber, "Some text for the cell", 1) 
```

在您看到 1 作为方法的最后一个值的地方，这个 1 指的是我使用上面的 SetUpBackgroundColours() 方法添加到 Excel 文件中的第一个样式。

如果我希望我的单元格具有浅灰色，我将使用 3 而不是 1，如下所示：

```
excelFile.SetCellValue(rowNumber, columnNumber, "Some text for the cell", 3) 
```

一些显示调用 SetUpBackgroundColours 的附加代码：

```
var excelFile = new XlsFile(true);
excelFile.NewFile(someList.Count() + 1, TExcelFileFormat.v2007);
var sheetIndex = 0;
excelFile = SetUpBackgroundColours(excelFile);

excelFile.SetCellValue(1, 1, "Some text for the cell A1", 1) //cell colour will be yellow
excelFile.SetCellValue(2, 2, "Some text for the cell B1", 2) //cell colour will be lightblue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:53:40.730

我没有使用过那个 API，但如果你找不到方法，这就是你可以用 C# 做到的方法：

```
 //http://www.mvps.org/dmcritchie/excel/colors.htm
    private void setCellColor(Microsoft.Office.Interop.Excel.Range cell, int index)
    {
        cell.Interior.ColorIndex = index;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T03:54:05.447

您可以使用 TFlxFormat 类来应用颜色。使用这个类你可以应用你想要的任何格式。

# java - 选定项目的 Android Spinner 用户交互

> ID：10916077
> 
> 赞同：1
> 
> 时间：2012-06-06T14:17:30.503
> 
> 标签：java, android, spinner

选择项目时，我在监听微调器的用户交互时遇到问题。我知道下面的听众工作完美

```
spinner.setOnItemSelectedListener(this);

@Override
public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
    // your code here
}

@Override
public void onNothingSelected(AdapterView<?> parentView) {
    // your code here
} 
```

但在我的应用程序场景中，我将通过程序更改微调器值，那时它也会触发 onitemselected 事件。但我需要这个事件应该只在微调器上发生用户交互时触发

注意：我不是在谈论初始微调器值选定项。

请让我知道我该如何做到这一点

在此先感谢 Naveenkumar.R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:24:00.650

```
tempListener = spinner.getOnItemSelectedListener();
spinner.setOnItemSelectedListener(null);
//change the spinner value...
spinner.setOnItemSelectedListener(tempListener) 
```

更优雅的是，您可以继承 Spinner 类，并创建 'disableOnItemSelectedListener()' 和 'enableOnItemSelectedListener()' 方法，它们的作用与上面的代码相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T14:53:49.920

使用我在以下链接中描述的一种简单技术，可以避免对 onItemSelected 的意外调用。这样，您可以随时自行设置选择而无需担心。检查此问题的已接受答案：

[不需要的 onItemSelected 调用](https://stackoverflow.com/questions/21747917/undesired-onitemselected-calls)

# django - 从 Django 模型中检索 app_label

> ID：10916082
> 
> 赞同：1
> 
> 时间：2012-06-06T14:17:45.923
> 
> 标签：django, django-models

如何以编程方式从传递给函数的任何模型对象中获取 app_label，以便将其序列化为 XML？

在本例中，model_unicode 是模型的名称，object 是预过滤的模型对象。我以后确实需要 get_model()

```
def model_to_xml(object, model_unicode):
    model_list = object
    model_name = ""
    model_app_label = ???
    model = get_model(model_app_label,model_unicode) 
```

Okm 的测试输出

```
try:
    print object.model
except:
    print "not Queryset"
try:
    print object.__class__
except:
    print "not Instance of Model" 
```

输出：

```
<class 'jmsdirectory.contacts.models.Supplies'>
<class 'django.db.models.query.QuerySet'> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:39:18.520

```
>>> User._meta.app_label
'auth' 
```

您可以从中获得[更多信息](http://www.b-list.org/weblog/2007/nov/04/working-models/)`_meta`

# iphone - Apple 通用版本控制创建链接器错误（缺少 _main）

> ID：10916083
> 
> 赞同：0
> 
> 时间：2012-06-06T14:17:46.657
> 
> 标签：iphone, ios, xcode

我在我的 Xcode 4.3.2 项目中启用了 Apple 通用版本控制。当我尝试构建项目时，我收到一个链接器错误，指出没有找到 _main 符号。

有没有人看到这个问题，你知道解决方案吗？

唯一的解决方法是删除生成版本控制源文件名，但是这样做时我仍然会遇到构建错误。

# asp.net-mvc - 运行 Total ASP.NET MVC 和 Linq to SQL

> ID：10916084
> 
> 赞同：0
> 
> 时间：2012-06-06T14:17:47.587
> 
> 标签：asp.net-mvc, linq-to-sql, asp.net-mvc-2

我正在使用 ASP.NET MVC2、SQLServer。我的数据库中有 3 个表。

从`tblPerson`我只对这个`PersonID`领域感兴趣。 `tblPerson[PID(pk),PName]`

```
PID------------PName
12-------------AAA
13-------------BBB 
```

`tblPHrs`具有以下架构： `tblPHrs[PId(pk),Semester(pk),Hrs]`

```
PID---------------Semester-----------Hrs
12----------------SS2011----------18
12----------------WS2012----------20
13----------------WS2011----------20
14----------------SS2012----------18 
```

`tblCHrs`具有以下架构： `tblCHrs[CourseId(pk), PId(pk),Semester(pk), Whrs, UL, UT]` here `WHrs`，`UL`并且`UT`都是数字字段

```
CourseID-----------PId-----------Semester------WHrs----UL------UT
77-----------------12------------SS2011--------10------2-------1
78-----------------12------------SS2011--------4-------1-------2
79-----------------12------------SS2012--------24------4-------2
77-----------------12------------WS2012--------16------2-------2
77-----------------13------------SS2011--------4-------2-------2 
```

现在我想使用 LINQ to SQL 返回这种结果`PID`，例如作为参数传递`PID = 12`

```
Semester---PId--Hrs(from tblPhrs)--Acutal(tblChrs->summing(Whrs+UL+UT)--Gap--RngTotal
SS2011-----12---18-----------------20-----------------------------------2----0
SS2012-----12---20-----------------20-----------------------------------0----2 
```

我正在使用 LinqToSQL，知道如何构造这样的查询吗？

# ios - iPhone 应用程序已在 iPad 中延伸

> ID：10916090
> 
> 赞同：3
> 
> 时间：2012-06-06T14:18:23.860
> 
> 标签：ios, size

我想在 iPad 上测试一个 iPhone 应用程序，但我现在只有 iPad。IOS5.1 和 Xcode 4.3.1 是我的环境，我在项目 TARGETS 中设置了相同的故事板，在 iPad 上运行的应用程序已全屏显示（所有 UILayouts 都已拉伸），无法显示任何视图切换应用程序。

如何在 iPad 上运行相同大小的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:56:44.170

您需要将应用目标从 Universal 更改为 iPhone。

转到 [项目目标] > 摘要 > iOS 应用程序目标 > 设备 > iPhone

这样，iPad 会将您的应用程序作为旧版 iPhone 应用程序打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:23:43.190

不确定如何使用情节提要执行此操作，但使用普通的 UIViewControllers 您将为 iphone/ipad 提供单独的 xib 文件并检查要加载的文件，如下所示：

```
 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.motionJpegViewController = [[MotionJpegViewController alloc] initWithNibName:@"MotionJpegViewController_iPhone" bundle:nil];
    } else {
        self.motionJpegViewController = [[MotionJpegViewController alloc] initWithNibName:@"MotionJpegViewController_iPad" bundle:nil];
    } 
```

# c++ - OpenCL内核编译错误

> ID：10916093
> 
> 赞同：0
> 
> 时间：2012-06-06T14:18:37.297
> 
> 标签：c++, c, opencl, complex-numbers

您好，当我使用 Mac OS + OpenCL 框架时，此代码可以正常工作，但是当操作系统更改为 openSUSE 11.4 +（来自 AMD 的 OpenCL 实现）时，代码会抛出此类错误。看来 typedef float clft_complex[2]; 犯了这个错误。你能说什么呢？

错误：

```
Err: "/tmp/OCLRS2tPp.cl", line 4: error: kernel pointer arguments must point to
      addrSpace global, local, or constant
__kernel void linear_interp(__global clfft_complex *input,
                                                  ^

1 error detected in the compilation of "/tmp/OCLRS2tPp.cl".

Internal error: clc compiler invocation failed. 
```

内核代码：

```
typedef float clfft_complex[2];

__kernel void linear_interp(__global clfft_complex *input,
                        __global clfft_complex *output)
{
    int global_id = get_global_id(0);
    input[global_id][0] = 1.5f;
    input[global_id][1] = 5.5f;
} 
```

主机代码：

```
//////////////////////////////////
/* Preparing OpenCL Environment */
//////////////////////////////////

cl_uint cl_platformsN = 0;
cl_platform_id *cl_platformIDs = NULL;

clGetPlatformIDs (0, NULL, &cl_platformsN);

cl_platformIDs = (cl_platform_id*)malloc( cl_platformsN * sizeof(cl_platform_id));
clGetPlatformIDs(cl_platformsN, cl_platformIDs, NULL);

cl_int status = CL_SUCCESS;
cl_device_id device;    // Compute device
cl_context context;     // Compute context

CL_CHECK_ERROR(clGetDeviceIDs(cl_platformIDs[0], DEVICE_TYPE, 1, &device, NULL));
context = clCreateContext(NULL, 1, &device, NULL, NULL, &status);

////////////
/* Device */
////////////
cl_uint wavefronts_per_SIMD = 7;
cl_int device_max_cu;

size_t wg_count;
size_t global_work_size;

#if DEVICE_TYPE == CL_DEVICE_TYPE_GPU
    size_t local_work_size = 64;
#else
    size_t local_work_size = 1;
#endif

// Get info about the compute units on the device
CL_CHECK_ERROR(clGetDeviceInfo(device, CL_DEVICE_MAX_COMPUTE_UNITS, sizeof(cl_uint), &device_max_cu, NULL));
wg_count = device_max_cu * wavefronts_per_SIMD;

global_work_size = wg_count * local_work_size;

/////////////////////
/* Input Data Part */
/////////////////////

/* Input a slice properties */
int bits_per_sample;
int samples_per_pixel;
int theta_size;
int slice_size;

/* Read the slice */
clfft_complex *data_tiff = tiff_read_complex(tiff_input,
                                             &bits_per_sample,
                                             &samples_per_pixel,
                                             &slice_size,
                                             &theta_size);

////////////////////////
/* OpenCL - DFI Part */
////////////////////////

/* Sync events */
const int events_num = 5;
cl_event event_list[events_num];

/* Command Queue */
cl_command_queue command_queue = clCreateCommandQueue(context, device, 0, &status);

/* Program */
const char* programSource = load_program_source(KERNELS_FILE_PATH);
if(programSource == NULL) {
    fprintf(stderr, "Programm '%s' can not be created. File was not found.", KERNELS_FILE_PATH);
    return;
}

cl_program program = clCreateProgramWithSource(context, 1,
                                               (const char**)&programSource, NULL,
                                               &status);

status = clBuildProgram(program, 0, NULL, NULL, NULL, NULL);

size_t paramValueSize = 1024 * 1024, param_value_size_ret;
char *paramValue;
paramValue = (char*)calloc(paramValueSize, sizeof(char));
    status = clGetProgramBuildInfo( program,
                                device,
                                CL_PROGRAM_BUILD_LOG,
                                paramValueSize,
                                paramValue,
                                &param_value_size_ret);
printf("Err: %s", paramValue);

char buf[0x10000];
clGetProgramBuildInfo(program,
                      device,
                      CL_PROGRAM_BUILD_LOG,
                      0x10000,
                      buf,
                      NULL);

if(status != CL_SUCCESS) {
    fprintf(stderr, "Programm '%s' can not be build. (%s)", KERNELS_FILE_PATH, opencl_map_error(status));
    return;
}

/* Kernels */
cl_kernel kernel_linear_interp = clCreateKernel(program, "linear_interp", &status); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:17:53.047

首先，我不知道为什么这段代码有效，但假设你的输入是一个内核指针参数`cl_mem`（`__global *input[2]`作为参数，因为您在调用内核之前已经设置了参数的类型。（顺便说一句，你在哪里`clSetKernelArg()`？）

其次，你为什么要对你的输入这样做？

```
input[global_id][0] = 1.5f;
input[global_id][1] = 5.5f; 
```

因为输入内存空间通常应该只是只读的..或者该内核可能只是您内核的一部分？

无论如何，我不确定你在用那个内核做什么，所以：

1.  如果这意味着您只想要一个适用于所有输入的常量 float[2] 变量，那么您可以声明

    `__constant float var[2] = {1.5f, 5.5f};`

2.  如果您的意思`input`实际上是您的`output`，并且您想在单个工作项中编写两个浮点，那么您可以将类型更改为`float2`，或者通过执行以下操作：

    `vstore2((float2)(1.5f,5.5f), 0, input[global_id]);`

    但不要忘记将本地工作项除以 2..

# html - 表格内的 HTML 表格

> ID：10916094
> 
> 赞同：1
> 
> 时间：2012-06-06T14:18:40.777
> 
> 标签：html, css

我对 HTML 和 CSS 有点陌生。我想知道最好的方法是什么：

1) 在一页上以正方形的形式排列 4 个表格——即，每个表格都是一个象限，或者

2) 将 4 个表放在另一个表中。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:31:10.873

如果您想将页面拆分为 2X2 表格，最好的方法是使用 Divs（也更容易在 divs 上应用 css）

```
<div style="width:auto;">
  <div style="float:left; width:50%">
     x-1,y-1
  </div>
  <div style="float:left; width:50%">
     x-2,y-1
  </div>
  <div style="clear:both"></div>
</div>
<div style="width:auto;">
  <div style="float:left; width:50%">
     x-1,y-2
  </div>
  <div style="float:left; width:50%">
     x-2,y-2
  </div>
  <div style="clear:both"></div>
</div> 
```

[http://css-discuss.incutio.com/wiki/Why_I_think_divs_are_better_than_tables](http://css-discuss.incutio.com/wiki/Why_I_think_divs_are_better_than_tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:19:45.410

老实说，听起来你想要 1 个表格，2 行，每行 2 个单元格。

```
<table>
    <tbody>
        <tr>
            <td>Top Left</td><td>Top Right</td>
        </tr>
        <tr>
            <td>Bot Left</td><td>Bot Right</td>
        </tr>
    </tbody>
</table> 
```

小提琴：http: [//jsfiddle.net/jonathansampson/gy5YC/](http://jsfiddle.net/jonathansampson/gy5YC/)

### 如果它是您所追求的布局，那么有更好的方法......

请注意，尽管这可能会为您提供所需的布局结构，但将表格用于非表格数据（想想电子表格）是对元素的非法使用。

如果您尝试布局页面，您可以使用更好的选项。您可以使用四个`div`元素，以固定方式定位到视口：

```
<div class="panels">
    <div>Top Left</div>
    <div>Top Right</div>
    <div>Bottom Left</div>
    <div>Bottom Right</div>
</div> 
```

​​​​​​小提琴：http: [//jsfiddle.net/jonathansampson/gy5YC/2/](http://jsfiddle.net/jonathansampson/gy5YC/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:22:27.063

```
<table>
  <tr>
    <td> Top left Information Here </td>
    <td> Top right Information here </td>
  </tr>
  <tr>
    <td> Bottom left Information Here </td>
    <td> Bottom right Information here </td>
  </tr>
</table>​ 
```

**JSFiddle**

[http://jsfiddle.net/DNYwc/](http://jsfiddle.net/DNYwc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:22:58.873

回答“将 4 个表放在另一个表中”。您问题的一部分：正如 Jonthan Sampson 在对您的问题的评论中所说：创建一个包含两行和每行两个单元格的表格。在每个单元格中，在 td 标记中放置一个表格：

```
<table>
    <tr>
        <td>
            <table>
                <tr>
                    <td>
                        Table 1/4
                    </td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr>
                    <td>
                        Table 2/4
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td>
            <table>
                <tr>
                    <td>
                        Table 3/4
                    </td>
                </tr>
            </table>
        </td>
        <td>
            <table>
                <tr>
                    <td>
                        Table 4/4
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T14:36:54.253

这似乎可以归结为“以二乘二的形式显示四个元素，我应该使用表格还是其他方法？”的问题。元素是表格还是其他东西似乎与基本问题无关。

如果这四个元素在逻辑上构成一个 2 × 2 的表，则在标记中使其成为这样的表。如果在某些情况下二乘二形成只是首选渲染，那么您可以采用其他方法，例如浮动，类似

```
<div style="float: left">A</div>
<div>B</div>
<br clear=all>
<div style="float: left">C</div>
<div>D</div>
<br clear=all> 
```

如果有足够的宽度，这将导致 2 x 2 渲染，但在狭窄的窗口中，A、B、C、D 将以 4 x 1 的形式出现。如果您使用表格，那么狭窄的窗口将强制水平滚动。选择实际上取决于哪种选择更适合内容和结构。

# ios - UIScrollView 与 subView 缩放

> ID：10916102
> 
> 赞同：1
> 
> 时间：2012-06-06T14:19:02.253
> 
> 标签：ios, ios5, uiscrollview, resize

我想实现一个里面有几个 UIViews 的滚动视图。最左边的项目需要比其他项目大。所以我的问题是这个。每当一个项目离开屏幕向左（它的 origin.x 小于 15）时，我需要将项目从 470x440 缩小到 235x220 像素。这实现起来相当简单。问题是移动到像素 480 左侧的项目需要从 235x220 像素放大到 470x440 像素，并且需要向左移动 235 像素（以免覆盖右侧的项目，而是移动到离开元素“收缩”时留下的空间。

我已经尝试了几种不同的方法，但我不能让动画看起来很好，而且这里和那里都有一堆小故障。

有谁知道我将如何实现这种类型的功能？请注意，我不想缩放，但我想调整滚动视图中元素的大小，使最左边的元素（在屏幕上可见）是其他元素大小的两倍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:56:50.787

万一其他人可能感兴趣，我最终在scrollViewDidScroll中得到了以下内容：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {        
    float contentOffset = scrollView.contentOffset.x;
    int leavingElementIndex = [_scrollView indexOfElementLeavingScene:scrollView.contentOffset.x];
    int entereingElementIndex = leavingElementIndex + 1;

    if (leavingElementIndex >= 0 && contentOffset > 0) {
        CGRect leavingFrame = [[[scrollView subviews] objectAtIndex:leavingElementIndex] frame];
        CGRect enteringFrame = [[[scrollView subviews] objectAtIndex:entereingElementIndex] frame];

        float scalePerentage = (contentOffset - (_scrollView.smallBoxWidth * leavingElementIndex))/(_scrollView.smallBoxWidth);
        enteringFrame.size.width = _scrollView.smallBoxWidth + (_scrollView.smallBoxWidth * scalePerentage);
        enteringFrame.size.height = _scrollView.smallBoxHeight + (_scrollView.smallBoxHeight * scalePerentage);
        enteringFrame.origin.x = [_scrollView leftMostPointAt:entereingElementIndex] - (_scrollView.smallBoxWidth * scalePerentage);

        [[[scrollView subviews] objectAtIndex:entereingElementIndex] setFrame:enteringFrame];

        leavingFrame.size.width = _scrollView.largeBoxWidth - (_scrollView.smallBoxWidth * scalePerentage);
        leavingFrame.size.height = _scrollView.largeBoxHeight - (_scrollView.smallBoxHeight * scalePerentage);

        [[[scrollView subviews] objectAtIndex:leavingElementIndex] setFrame:leavingFrame];

        //Reset the other visible frames sizes
        int index = 0;
        for (UIView *view in [scrollView subviews]) {

            if([view isKindOfClass:[SlidingView class]] && index > entereingElementIndex) {
                CGRect frame = view.frame;
                frame.size.width = _scrollView.smallBoxWidth;
                frame.size.height = _scrollView.smallBoxHeight;
                frame.origin.x = [_scrollView leftMostPointAt:index];
                [view setFrame:frame];
            }

            index++;
        }

    }    
} 
```

这就是它最终的样子：

[最终结果 http://stuff.haagen.name/iOS%20scroll%20resize.gif](http://stuff.haagen.name/iOS%20scroll%20resize.gif)

# asp.net - 为什么站点升级后此服务器代码会抛出错误？

> ID：10916105
> 
> 赞同：0
> 
> 时间：2012-06-06T14:19:09.263
> 
> 标签：asp.net, webforms, kentico

我已将我的 kentico 6 站点从版本 6.0.4297 升级到最新的修补程序。

我们有一个具有以下布局代码的自定义 Web 部件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="~/CMSWebParts/Terradon/eventcalendar.ascx.cs"
    Inherits="CMSWebParts_Terradon_eventcalendar" %>
<%@ Register TagPrefix="TRD" Namespace="Terradon" %>
<div class="Calendar">
    <TRD:CustomCalendar font-size="11px" ID="calItems" Runat="server" titleformat="MonthYear" font-family="Arial" Width="249" CellPadding="5" BorderWidth="1" BorderColor="#ffffff" EnableViewState="true" OnVisibleMonthChanged="calItems_VisibleMonthChanged" OnDayRender="calItems_DayRender" OnPreRender="calitems_PreRender" OnSelectionChanged="calItems_SelectionChanged" SelectionMode="Day">
        <TitleStyle font-bold="true" font-size="14px" BorderColor="#ffffff" BackColor="#ffffff" ForeColor="#222222"></TitleStyle>
        <NextPrevStyle ForeColor="#222222"></NextPrevStyle>
        <DayStyle BorderWidth="1" BorderColor="#ffffff" BackColor="#e6e3de"></DayStyle>
        <TodayDayStyle BackColor="#820912" ForeColor="#ffffff"></TodayDayStyle>
        <SelectedDayStyle BackColor="#444444" ForeColor="#ffffff" Font-Bold="true" ></SelectedDayStyle>
    </TRD:CustomCalendar>
</div>
<div class="CalendarList">
    <asp:Panel cssclass="CalendarTitle" id="calendarWrap" runat="server">
        <asp:Label ID="calendarTitle" runat="server"/>
        <asp:Hyperlink ID="calendarViewMoreLink" runat="server" CssClass="CalendarViewMoreLink" Text="View Events"/>
    </asp:Panel>

        <cms:CMSRepeater ID="repEventList" runat="server" Visible="true" OrderBy="EventDate ASC" ZeroRowsText="There are currently no events." StopProcessing="false" EnableViewState="false" OnItemCreated="repEventList_ItemCreated" OnItemDataBound="repEventList_ItemDataBound">
            <HeaderTemplate><ul></HeaderTemplate>
            <FooterTemplate></ul></FooterTemplate>
        </cms:CMSRepeater>
    <div class="EventDetail">
            <cms:CMSRepeater ID="repEvent" runat="server" Visible="false" StopProcessing="true"             EnableViewState="false" />
    </div>

</div>
<div class="clear"></div> 
```

该代码在该站点的旧版本中运行良好，甚至在具有最新修补程序的 Kentico 本地实例上运行良好。自升级以来，我收到以下错误：

```
[Error loading the WebPart 'TerradonCalendar' of type 'TerradonCalendar'] 
Unknown server tag 'TRD:CustomCalendar' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:30:26.987

好吧，如果没有更多信息，我会说 Terradon 命名空间中没有名为 CustomCalendar 的自定义控件。

自定义控件可能被重构、移动或重命名；或程序集未正确部署。

# php - PHP + MySQL + 会话事务

> ID：10916106
> 
> 赞同：0
> 
> 时间：2012-06-06T14:19:14.387
> 
> 标签：php, mysql, session, transactions

我正在开发一个将使用服务器同步数据的应用程序，该服务器将使用 php 和 mysql 数据库。

对于同步过程，我认为是 3 路通信：

1 - 客户端将数据发送到服务器，服务器处理数据并以 OK 或 ERROR 回复客户端，此时服务器应该开始事务。2 - 如果收到 OK，客户端只会更新内部信息（更新日期并从数据库中删除一些行） 3 - 客户端向服务器发送另一个请求（OK 或 CANCEL），当服务器收到这个新请求时，它会提交或回滚交易。

这可能吗？在一个请求中启动事务并在另一个请求中提交事务？如果是，如何？会议？

还是我应该以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:37:24.560

在 php 中，您不应该在会话中存储对象（需要引用）。所以我要做的是将数据存储到会话中，当您收到来自客户端的确认时，检索数据并组装查询（mysqli 或 PDO，您喜欢的那个）。

除非您需要使用数据库中的一些数据（IE last_inser_id），否则这将起作用，如果是这种情况我不知道该怎么做，我想说那是不可能的（不记得了，但我认为 php 关闭数据库会话时脚本结束）

# c - 二进制、浮点数和现代计算机

> ID：10916107
> 
> 赞同：27
> 
> 时间：2012-06-06T14:19:21.533
> 
> 标签：c, binary, floating-point, hardware, computer-science

我已经阅读了很多关于浮点数和计算机处理的浮点运算的内容。我在阅读它们时看到的最大问题是为什么它们如此不准确？我理解这是因为二进制不能准确地表示所有实数，所以这些数字被四舍五入到“最佳”近似值。

我的问题是，知道了这一点，为什么我们仍然使用二进制作为计算机操作的基础？当然，使用大于 2 的基数会以指数方式提高浮点运算的准确性，不是吗？

与其他基数相比，对计算机使用二进制数系统有什么优势，是否曾尝试过其他基数？或者甚至有可能吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-06T14:37:58.310

首先：即使使用 100 为底，也不能表示所有实数。但您已经知道这一点。无论如何，这意味着：由于“无法代表所有实数”，总会出现不准确性。

现在让我们谈谈**“在做数学时，高基数能给你带来什么？”：*高***基数在精度方面完全**“没有”**。为什么？

如果要使用以 4 为基数，则 16 位以 4 为基数的数字恰好提供 4 ^(16 个)不同的值。

*但是您可以从 32 位以 2 为底的数字*(2 ^(32) = 4 ^(16) ) 获得相同数量的不同值。

正如另一个答案已经说过的那样：晶体管可以打开或关闭。因此，您新设计的以 4 为基数的寄存器需要是（以 2 为基数）开/关“位”的抽象。这意味着： 使用两个“位”来表示以 4 为基数的数字。但是您*仍然*可以通过花费 N 个“位”（或 N/2 个以 4 为基数的数字）获得正好 2 ^(N个级别。)**您只能通过花费*更多位*而不是通过增加基数**来获得更好的准确性。您“想象/抽象”您的数字所在的基数（例如，如何`printf`以基数 10 打印这些基数为 2 的数字）实际上只是抽象问题，而不是精度问题。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-06T14:24:36.647

计算机建立在晶体管上，晶体管具有“开启”状态和“关闭”状态。这对应于高电压和低电压。几乎所有的数字集成电路都以这种二进制方式工作。

忽略晶体管只是简单地以这种方式工作的事实，使用不同的基极（例如基极 3）将需要这些电路在中间电压状态（或多个）以及 0V 及其最高工作电压下工作。这更复杂，并且可能导致高频问题 - 您如何判断信号是否只是在 2V 和 0V 之间转换，或者实际上是在 1V？

当我们进入浮点级别时，我们（正如 nhahtdh 在他们的回答中提到的那样）将无限的数字空间映射到有限的存储空间。这是绝对保证我们会失去一些精度。但是，IEEE 浮点数的一个优点是精度与值的大小有关。

更新：您还应该查看[Tunguska](http://tunguska.sourceforge.net/)，一个三元计算机模拟器。它使用 base-3 而不是 base-2，这产生了一些有趣（尽管令人费解）的概念。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-06T14:25:29.713

我们本质上是将有限空间映射到无限实数集。所以无论如何，这甚至不是基地的问题。

选择基数 2，就像多项式所说的那样，出于实现原因，因为它更容易区分 2 个能量级别。

我们要么投入更多空间来表示更多数字/提高精度，要么限制我们想要编码的范围，或者混合使用它们。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-06T14:31:21.080

你的第一段是有道理的，但第二段是不合情理的。较大的基数不会对精度产生影响。

数字的精度取决于用于它的存储量 - 例如，16 位二进制数与 2 x 256 基数具有相同的精度 - 两者占用的信息量相同。

请参阅[通常的浮点参考。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)有关更多详细信息 - 它适用于所有基础。

是的，计算机是使用其他基础构建的 - 我知道使用 10 进制（十进制）cf [wikipaedia的计算机](http://en.wikipedia.org/wiki/Decimal_computer)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-06T15:29:37.950

它归结为从可用芯片面积中获得最大收益。

如果您使用开/关开关来表示数字，那么每个开关的精度都不会比使用 base-2 表示更精确。这仅仅是因为无论您选择什么值，N 个开关都可以表示 2^N 个数量。早期的机器使用基数 16 浮点数，但每一个都需要 4 个二进制位，因此每位的总体精度与基数 2 相同（实际上由于边缘情况而略低）。

如果您选择的基数不是 2 的幂，那么精度显然会丢失。例如，您需要 4 位来表示一位十进制数字，但从不使用这 4 位的可用值中的 6 个。这个系统被称为二进制编码的十进制，它仍然偶尔使用，通常是在用钱进行计算时。

多级逻辑可以有效地实现其他基础，但至少以目前的芯片技术，实现超过 2 级的成本非常昂贵。甚至量子计算机的设计也假设了两个量子水平：量子比特或量子比特。

世界和数学的本质使浮点情况变得无望。实数有一个层次结构整数 -> 有理数 -> 代数 -> 超越数。有一个很棒的数学证明，康托尔对角化，大多数数字，即比其他集合“更大的无穷大”，是超越的。然而，无论您选择哪种浮点系统，仍然会有没有完美表示的低*有理数*（即以 10 为底的 1/3）。这是我们的宇宙。再多聪明的硬件设计也不会改变它。

软件可以并且确实使用有理表示，将分子和分母存储为整数。然而，有了这些，你的程序员就束手无策了。例如，平方根不是“封闭的”。Sqrt(2) 没有有理表示。

已经对代数数表示和任意实数的“惰性”表示进行了研究，可以根据需要产生更多数字。这种类型的大多数工作似乎都在计算几何中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-06T14:28:57.987

是的，有/曾经有使用二进制以外的计算机（即，除了 base 2 表示和算术）： [十进制计算机](http://en.wikipedia.org/wiki/Decimal_computer)。

计算系统的设计者已经研究了许多替代方案。但是很难找到一个模型，它比使用两个离散状态的模型更容易在物理设备中实现。因此，从一个二进制电路开始，该电路非常容易构建，并且可以用于具有复杂操作的计算机。简而言之，这就是二进制的历史。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-06T14:25:28.173

我不是 EE，所以我在下面所说的一切都可能完全错误。但...

二进制的优点是它非常清晰地映射到区分实际电路中的开/关（或更准确地说，高/低电压）状态。我认为，试图区分多个电压会带来更多挑战。

如果量子计算机走出实验室，这可能会完全消失。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-06T14:31:19.137

使用二进制浮点数表示数学实数会产生 2 个问题——嗯，可能还有更多问题，但暂时 2 个就足够了。

1.  所有计算机数字都是有限的，因此任何需要无限位数的数字都无法在计算机上准确表示，无论选择何种数字基数。这样就可以处理 pi、e 和大多数其他实数。
2.  无论选择什么基数都将难以代表（有限地）某些分数。底数 2 只能逼近分母中因子为 3 的任何分数，但底数 5 或底数 7 也可以。

多年来，已经构建了具有基于具有超过 2 个状态的设备的电路的计算机。旧苏联开发了一系列具有 3 态设备的计算机，并且至少有一家美国计算机制造商曾提供使用 10 态设备进行算术运算的计算机。

我怀疑二进制表示已经胜出（到目前为止），因为它很简单，既可以推理也可以用当前的电子设备实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-06T15:08:19.610

我投票赞成我们转向有理数系统存储。将评估为 p/q 的两个 32 位整数。乘法和除法将是非常便宜的运算。是的，会有多余的评估数字（1/2 = 2/4），但无论如何，谁真正使用了 64 位双精度的完整动态范围。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-06-06T14:37:45.117

我既不是电气工程师也不是数学家，所以在我做以下陈述时要考虑到这一点：

**所有浮点数都可以表示为整数。**

# grails - grails脚本中的HttpBuilder

> ID：10916108
> 
> 赞同：0
> 
> 时间：2012-06-06T14:19:23.990
> 
> 标签：grails, httpbuilder

我对 HttpBuilder 和 grails 有疑问。如果我尝试在 grails 脚本中使用它，它不起作用......我如何在脚本中导入它？
我试过葡萄，但它太慢了....有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:07:23.120

也许你可以使用 Grails Rest 插件。它允许在 Grails 项目中使用 HttpBuilder：http: [//grails.org/plugin/rest](http://grails.org/plugin/rest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:26:09.867

在 BuildConfig.groovy 中指定 http-builder 依赖项：

```
dependencies {
   runtime "org.codehaus.groovy.modules.http-builder:http-builder:0.5.2"
 } 
```

# asp.net - “System.Threading.Tasks.Task”不包含“Result”的定义

> ID：10916109
> 
> 赞同：2
> 
> 时间：2012-06-06T14:19:26.357
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-4.0

我有一个 facebook 查询，如下所示

```
var client = new FacebookClient(accessToken);
var dynamic = client.Get(connection, new { fields = "name,from,story,message,picture,comments", limit = count});
foreach (var dynPost in results.data)
{
     posts.Add(ConvertToPost(dynPost));
} 
```

我试图通过同时向 Facebook 发出大量较小的请求来加快速度。

```
using (profilingService.Start("Facebook calls"))
{ 
    var pullSize = 25;
    var numberOfCalls = (int)Math.Ceiling(count / (double)pullSize);

    var taskQueue = new Queue<Task>();
    for (int i = 0; i < numberOfCalls; i++)
    {
        taskQueue.Enqueue(Task.Factory.StartNew(() =>
        {
            var offset = i * pullSize;
            var client = new FacebookClient(accessToken);
            return client.Get(connection, new { fields = "name,from,story,message,picture,comments", limit = 25, offset = offset });
        }));
    }

    Task.Factory.ContinueWhenAll(
        taskQueue,
        tasks =>
        {
            //t.Result here is giving me the error
            var results = tasks.Select(t => t.Result);
            foreach (var result in results)
            {
                foreach (var dynPost in result.data)
                {
                    posts.Add(ConvertToPost(dynPost.data));
                }
            }
        });
} 
```

首先我得到一个错误`var results = tasks.Select(t => t.Result);`

> 错误 361“System.Threading.Tasks.Task”不包含“Result”的定义，并且找不到接受“System.Threading.Tasks.Task”类型的第一个参数的扩展方法“Result”（您是否缺少使用指令还是程序集引用？）

t 是类型`Task<AntecedentResult>`

这导致我进入此页面，但仍然无法解决它。[这个异步任务方法有什么问题？](https://stackoverflow.com/questions/9799771/whats-wrong-with-this-async-task-method)

另外，我对这种并行编码没有太多经验，我做错了什么或者应该以不同的方式做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:44:03.833

问题是`Queue<Task>`. `Task`单独没有`Result`财产。但是，`Task<Foo>`具有`Result`type 的属性`Foo`。（我不知道`client.Get(...)`返回什么，我们暂时称它为`Foo`：

```
var taskQueue = new Queue<Task<Foo>>(); 
```

该`ContinueWhenAll`方法不支持`Queue<>`, 只支持`Task[]`and `Task<>[]`，所以需要先将其转为数组。

```
Task.Factory.ContinueWhenAll(
    taskQueue.ToArray(),
    tasks =>
    {
        var results = tasks.Select(t => t.Result);
        foreach (var result in results)
        {
            ...
        }
    });
} 
```

# java - 是否有更多关于 viewpagerindicator 的示例/示例/教程？

> ID：10916121
> 
> 赞同：2
> 
> 时间：2012-06-06T14:20:00.273
> 
> 标签：java, android, android-fragments, actionbarsherlock, viewpagerindicator

我一直在不停地谷歌搜索，试图解决这个问题。无论我做什么，我都无法让它工作。

我可以得到一个简单的 pageradapter，它返回一个不同的 xml 布局，但我就是不知道如何用 viewpagerindicator 做同样的事情。

我一直在浏览示例，但是如果没有解释它的作用，大量代码并没有真正的帮助。

我找到的最接近解释的是[this](http://blog.stylingandroid.com/archives/537)，但据我所知，这似乎已经过时了。

注意。我是android开发的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:46:43.967

Jake Wharton 提供*了很多*关于如何正确使用他的库的[**示例代码。**](https://github.com/JakeWharton/Android-ViewPagerIndicator)在我看来，这是互联网上最好的参考。

# mysql - 如何找到不同行中单元格之间的最大差异

> ID：10916123
> 
> 赞同：0
> 
> 时间：2012-06-06T14:20:07.930
> 
> 标签：mysql, sql

我有一个mysql表A，它存储一系列数字和时间戳

```
value    timestamp
12087    2012-01-01 00:00:00
12110    2012-01-02 02:00:00
12223    2012-01-04 03:00:00
12312    2012-01-04 05:00:00
12387    2012-01-04 06:00:00
12388    2012-01-05 01:11:23
... 
```

值和时间戳都是有序的：时间戳越大，值越大，但它们之间没有其他依赖关系。

我需要在一段时间内找到排序序列中的值之间的最大差异。在示例中，差异是：

```
12110-12087=23
12223-12100=13
12312-12223=89
12387-12312=75
12388-12387=1 
```

所以我们最大的区别是89。

问题是：如何为此编写 SQL 查询代码？要知道，我不想使用完整的产品和/或相关查询，因为表很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:30:21.837

```
select 
    (case when (@prev is null) then 0
    else abs(value - @prev) end) as diff
  , concat(value, '-', @prev)
  , @prev := value

    from (select value, dt from table1 order by dt) ordered
    order by diff limit 1 
```

将期间限制器添加到 from 子查询中

编辑，新信息告诉我这是一个不可靠的方法 [http://dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html) ( `ctrl + f`for `SELECT @a, @a:=@a+1`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:18:35.277

```
select max(result) 
from (
      select  ((select value 
                from Table t2 
                where t2.value > t1.value and t2.time <=  @PeriodEnd limit 1) 
      -  t1.value) as result 
      from Table t1
      where t1.value between @PeriodStart and @PeriodEnd
 ) as t where result is not null 
```

# c# - C# Math.Max 类型处理

> ID：10916125
> 
> 赞同：2
> 
> 时间：2012-06-06T14:20:14.800
> 
> 标签：c#, overflow, type-conversion, underflow

我正在编写一段代码来防止 ushort 溢出/下溢。在此之前，我尝试：

```
ushort a = 0; //ushort.MinValue
a -= 1; //returns 65535 (ushort.MaxValue) 
```

然后我编写真正的代码，我希望这会“失败”（无法检测到下溢）：

```
ushort oldValue, rate, delta;
ushort newValue = Math.Max(ushort.MinValue, oldValue - rate * delta); 
```

有趣的是，一个错误（CS0266）阻止我构建它。虽然我希望 C# 将使用`ushort Max(ushort, ushort)`重载，但它正在使用`int Max(int, int)`重载并且`ushort`值会自动转换为`int`。当然，当我明确地将结果转换`ushort`为此工作正常时。

这让我想，C# 是否检测到可能发生下溢，所以它`int`用来为我做比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:25:50.827

这是因为`oldValue - rate * delta`' 的结果是类型`int`。这是因为定义运算符 +、-、* 和 / 的“最小数据类型”是`int`. 所以`byte`,`ushort`等被转换为`int`第一。然后，结果又是一个`int`. 所以你需要明确地转换为`ushort`.

`Convert.ToUInt16`或者，如果发生溢出，您可以使用which 将引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:27:50.693

C#也将后续操作的结果提升`(ushort * ushort)`为. 最后，重载决议通过将第一个参数提升为来选择调用。`int``(ushort - int)``int``Math.Max(int, int)``Max(ushort, int)``ushort``int`

现在您遇到的问题（除了所有未初始化的变量）是 的结果`Max(int, int)`是`int`，它没有隐式转换为`ushort`.

有关更多信息，您可以阅读规范的以下部分：

*   7.3.6.2 二进制数字提升（“否则，两个操作数都转换为 int 类型。”）
*   6.1.2 隐式数值转换
*   7.5.3 过载分辨率

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:28:49.843

根据[这个 MSDN page](http://msdn.microsoft.com/en-us/library/cbf1574z%28v=vs.80%29.aspx)，用 s 计算的结果类型`ushort`是 int。所以你需要做的是转换计算的结果

```
oldValue - rate * delta 
```

回到`ushort`：

```
(ushort)(oldValue - rate * delta) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T14:33:34.893

`int`比结果更小的数据类型的乘法`int`。

因此`oldValue - rate * delta`导致一个`int`和最好的过载`Math.Max(short.MinValue, int)`是：

[`Math.Max Method (Int32, Int32)`](http://msdn.microsoft.com/en-us/library/cs0a3045.aspx)

（因为`ushort`/`short`可以`int`隐式地扩展，无需转换）

# android - 在Android中一个接一个地在MediaPlayer中播放多个文件

> ID：10916129
> 
> 赞同：1
> 
> 时间：2012-06-06T14:20:19.257
> 
> 标签：android

我在 MediaPlayer for android 中播放多个 mp3 文件时遇到问题...它将所有文件一起播放并造成混乱。我想要的解决方案是一次播放每个文件，然后播放其他文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T15:16:03.830

你可以尝试这样的事情：

```
public class MainActivity extends Activity implements MediaPlayer.OnCompletionListener
{
    int[] tracks = new int[3];
    int currentTrack = 0;
    private MediaPlayer mediaPlayer = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      tracks[0] = R.raw.say1;
      tracks[1] = R.raw.say2;
      tracks[2] = R.raw.say3;
      mediaPlayer = MediaPlayer.create(getApplicationContext(), tracks[currentTrack]);
      mediaPlayer.setOnCompletionListener(this);
      mediaPlayer.start();
    }

    public void onCompletion(MediaPlayer arg0) {
      arg0.release();
      if (currentTrack < tracks.length) {
        currentTrack++;
        arg0 = MediaPlayer.create(getApplicationContext(), tracks[currentTrack]);
        arg0.setOnCompletionListener(this);
        arg0.start();
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-02T16:13:10.690

我通过以下代码做到了这一点：

```
private ArrayList<MediaPlayer> mPlayerList = new ArrayList<MediaPlayer>();
public void playSound4FileList(ArrayList<String> fileList) 
{
    mPlayerList.clear();
    for (String fileName : fileList)
    {
        try {
            MediaPlayer mPlayerT = new MediaPlayer();

            AssetFileDescriptor descriptor = context.getAssets().openFd(fileName);
            mPlayerT.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
            descriptor.close();

            mPlayerT.prepare();
            mPlayerT.setVolume(1f, 1f);
            mPlayerT.setLooping(false);

            mPlayerList.add(mPlayerT);

        } catch (Exception e) {
        }

    }
    for (int i=0; i<mPlayerList.size()-1; i++) //Do not include last element
    {
        mPlayerList.get(i).setNextMediaPlayer(mPlayerList.get(i+1));

    }

    mPlayerList.get(0).start();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T14:21:12.753

有各种 MediaPlayer 回调使用它们，如：

[http://www.androidadb.com/class/on/OnCompletionListener.html](http://www.androidadb.com/class/on/OnCompletionListener.html)

```
mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

    public void onCompletion(MediaPlayer theMediaPlayer) {
        mParent.playNextAudio();
        mParent = null;
    } 
```

[http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener)](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener%28android.media.MediaPlayer.OnCompletionListener%29)

# shell - 如何在 awk 的 BEGIN 块中使用变量？

> ID：10916134
> 
> 赞同：4
> 
> 时间：2012-06-06T14:20:38.837
> 
> 标签：shell, awk

我尝试运行这样的单行命令

```
touch ./py.py; awk 'BEGIN{print FILENAME}' ./py.py 
```

并期望得到结果`./py.py`，但只得到一个空行。但是，如果我没有`BEGIN`阻止，它会起作用：

```
touch ./py.py; awk '{print FILENAME}' ./py.py 
```

似乎该变量在块`FILENAME`中不可用。`BEGIN`这是为什么？如何在`BEGIN`块中使用该变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:28:48.640

awk 可以在一次调用中处理多个文件（例如`awk '{whatever}' file1 file2 file3`）。BEGIN 块在 awk 启动时执行，在它打开第一个文件之前，而不是在每个文件的开头（END 块类似）。有人可能会争辩说，将 awk 扩展为具有每个文件的 BEGIN/END 挂钩可能很有用，但它们在我使用的任何当前版本的 awk/nawk/gawk 中都不存在......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T22:14:15.380

事后总结：

*   在`gawk (GNU awk) 4`或更高版本中，使用`BEGINFILE`而不是`BEGIN`确保`FILENAME`已定义；但是请注意，`BEGINFILE`顾名思义，*每个*输入文件都会调用 .

*   在其他`awk`变体中，仅`BEGIN`提供，此时**`FILENAME`尚未定义**，因为根据设计，*输入文件处理尚未开始*。（相比之下，块`FILENAME` *中确实*有一个值`END`，即*最后*处理的文件。）

**解决方法**：

您可以通过内置参数访问传递给 awk的**文件名**`ARGV`参数，其中`ARGV[1]`报告第一个文件名参数、`ARGV[2]`第二个文件名参数，依此类推。

*   请注意，选项和隐含的标准输入*不*计算在内，因此隐含的`stdin`输入`ARGV[1]`将是一个*空字符串*。
*   相比之下，充当变量赋值的伪文件名*确实很*重要（例如，`VAR=10`）。

因此，假设没有伪文件名，`ARGV[1]`在处理[第一个]文件时，`BEGIN`块中的内容相当于`FILENAME`后面的块。

**Caveat re implicit use of `stdin`**: `BSD awk` (e.g., on OSX) reports implicit `stdin` input also as an empty string in `FILENAME` (in later blocks), whereas `mawk` and `gawk` report `"-"`. All 3 variants, however, support *explicit* `stdin` input by passing `-` as a filename argument, in which case `FILENAME` returns `"-"` in all 3 variants.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:28:19.760

确实 FILENAME 在 awk 的 BEGIN 块中不可用。事实上，awk 不会在 BEGIN 块中开始处理输入文件，因此没有设置这个内部变量。甚至这个命令：

```
awk 'BEGIN{print;}' ./file 
```

不会打印文件中的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T13:02:15.460

虽然我不知道这有什么更深层次的意义，但我仍然可以想出一个技巧。不过，我不会称其为“解决方案”。不过，这是打发时间的好方法。;)

这是最初的工作单线之一：

```
touch ./py.py; awk '{print FILENAME}' ./py.py 
```

为此，您必须知道`awk` **物理**检查文件是否存在于媒体上。因此，我们是否尝试过这样的事情：

```
awk '{print FILENAME}' ./py2.py 
```

`awk`将通过以下方式获得救助：

```
awk: cmd. line:1: fatal: cannot open file `./py2.py' for reading (No such file or directory) 
```

好的。因此*，如果*我们在一个 BEGIN 块中（因此将文件作为参数忽略），我们将不得不通过使用-builtin数组的偷偷摸摸的方法来*模拟*这种行为，就好像`awk`行后面的参数*是*一个文件一样，例如：`awk``ARGV[]`

```
awk 'BEGIN {$0 = ARGV[1]; if ((getline <$0) == -1) print "ERROR: File not found: " $0; else print ARGV[1]}' ./py.py 
```

这将给出结果：

```
./py.py 
```

到现在为止还挺好。现在为什么不故意使用物理媒体上没有的文件：

```
awk 'BEGIN {$0 = ARGV[1]; if ((getline <$0) == -1) print "ERROR: File not found: " $0; else print ARGV[1]}' ./py2.py 
```

将导致

```
ERROR: File not found: ./py2.py 
```

所以我们在物理上检查文件是否存在（就像在非块`awk`中做的那样），如果文件不存在则吐出一个错误。相当没有意义的国际海事组织，但是——唉，如果我们总是不得不质疑一个解决方案实际上是多么明智，我们需要一生的时间来解决它，尤其是在政治方面。:)`FILENAME``BEGIN`

# sql - Access 2010：带有嵌套选择的联合

> ID：10916138
> 
> 赞同：0
> 
> 时间：2012-06-06T14:20:51.650
> 
> 标签：sql, select, union, ms-access-2010

我有这个要执行的查询。

```
 SELECT warehouse.expiry_date, pharmacy.expiry_date,
   drugs.active_substance, 
   drugs.strength, 
   drugs.strength_type, 
   drugs.dosage_form,  
   drugs.minimum_quantity,
   SUM(QTY-QTYQ) as QTYU
 FROM
 (SELECT warehouse.expiry_date, 
   drugs.active_substance, 
   drugs.strength, 
   drugs.strength_type, 
   drugs.dosage_form,  
   drugs.minimum_quantity,
   SUM(warehouse.in_quant)-  SUM(warehouse.out_quant) as QTY
 FROM drugs INNER JOIN warehouse ON drugs.ID = warehouse.drug_id  
 GROUP BY warehouse.expiry_date,
   drugs.active_substance, 
   drugs.strength, 
   drugs.strength_type, 
   drugs.dosage_form, 
   drugs.minimum_quantity

 UNION ALL

 SELECT pharmacy.expiry_date, 
   drugs.active_substance, 
   drugs.strength, 
   drugs.strength_type, 
   drugs.dosage_form,  
   drugs.minimum_quantity,
   SUM(pharmacy.out_quant)-  SUM(pharmacy.out_quant) as QTYQ
 FROM drugs INNER JOIN pharmacy ON drugs.ID = pharmacy.drug_id  
 GROUP BY pharmacy.expiry_date,
   drugs.active_substance, 
   drugs.strength, 
   drugs.strength_type, 
   drugs.dosage_form, 
   drugs.minimum_quantity)
 GROUP BY 
 warehouse.expiry_date,
   drugs.active_substance, 
   drugs.strength, 
   drugs.strength_type, 
   drugs.dosage_form, 
   drugs.minimum_quantity,
  pharmacy.expiry_date; 
```

当我尝试执行它时，程序想要输入 pharmacy.expiry_date 和 QTYQ 的参数值。但是这些值在我的嵌套选择中。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:49:08.343

由于您似乎没有任何主机变量，我的心灵感应告诉我这与您在语句中的语法错误有关。具体来说，`QTYQ`似乎不存在（该名称的列`QTY`被 前面部分中的列所掩盖`UNION ALL`），并且在给定您选择列的顺序的情况下`pharmacy.expiry_date`位于 中的错误位置。`GROUP BY`最后的减法语句 ( `SUM(QTY - QTYQ)`) 试图减去两个不同的*行*，但你没有给它任何相关性（你真的想要列）。还有一个错字会给你不正确的结果（`SUM(pharmacy.out_quant) - SUM(pharmacy.out_quant)`应该返回 0，可能不是你想要的。优化器甚至可能不会打扰调用函数，如果它足够聪明的话）。

这是您的查询，改写成更好的形式，我认为这对您有更好的帮助。请注意，这未经测试，**您**有责任验证它是否返回满足您需求的正确结果。您还需要一个[日历文件](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)，无论如何您都应该拥有它。

```
SELECT Calendar.date, 
       Drugs.active_substance,
       Drugs.strength,
       Drugs.strength_type,
       Drugs.dosage_form,
       Drugs.minimum_quantity,
       COALESCE(SUM(InWarehouse.quantity), 0) 
          - COALESCE(SUM(InPharmacy.quantity), 0) as quant
FROM Drugs 
CROSS JOIN Calendar
LEFT JOIN (SELECT drug_id, expiry_date, SUM(in_quant - out_quant) as quantity
           FROM Warehouse
           GROUP BY drug_id, expiry_date) as InWarehouse
ON InWarehouse.drug_id = Drugs.id
AND InWarehouse.expiry_date = Calendar.date
LEFT JOIN (SELECT drug_id, expiry_date, SUM(in_quant - out_quant) as quantity
           FROM Pharmacy
           GROUP BY drug_id, expiry_date) as InPharmacy
ON InPharmacy.drug_id = Drugs.id
AND InPharmacy.expiry_date = Calendar.date
GROUP BY Calendar.date, 
         Drugs.active_substance,
         Drugs.strength,
         Drugs.strength_type,
         Drugs.dosage_form,
         Drugs.minimum_quantity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:54:13.973

```
 SELECT InWarehouse.expiry_date, 
        drugs.active_substance,
        drugs.strength,
        drugs.strength_type,
        drugs.dosage_form,
        drugs.minimum_quantity,
        COALESCE(SUM(InWarehouse.quantity), 0) 
           - COALESCE(SUM(InPharmacy.quantity), 0) as quant
 FROM drugs 
 LEFT JOIN (SELECT drug_id, expiry_date, SUM(in_quant - out_quant) as quantity
            FROM Warehouse
            GROUP BY drug_id, expiry_date) as InWarehouse
 ON InWarehouse.drug_id = drugs.id
 LEFT JOIN (SELECT drug_id, expiry_date, SUM(in_quant - out_quant) as quantity
            FROM Pharmacy
            GROUP BY drug_id, expiry_date) as InPharmacy
 ON InPharmacy.drug_id = drugs.id
 AND InPharmacy.expiry_date = InWarehouse.expiry_date
 GROUP BY InWarehouse.expiry_date, 
          drugs.active_substance,
          drugs.strength,
          drugs.strength_type,
          drugs.dosage_form,
          drugs.minimum_quantity 
```

# c# - Mono 上的 Console.ReadLine() 有时不显示前几个输入字符

> ID：10916139
> 
> 赞同：2
> 
> 时间：2012-06-06T14:20:53.287
> 
> 标签：c#, mono, monodevelop

我有这段代码可以读取并显示输入字符串，直到输入 a 为止`hello`。

```
string x;
do
{
    x = Console.ReadLine();
    Console.WriteLine ("{0}\n",x);
}
while (x != "hello"); 
```

这是一个示例运行：
![在此处输入图像描述](../Images/a8410349c6c4fb3c944e50ed40090998.png)
在这里，外部控制台一出现，我就`test`先输入。但只是`est`出现了。但可以看出，该值被正确读取`test`并被写出。当我输入`hello`时，它显示`ello`，但读取`hello`并终止了循环。

我无法准确指出何时发生这种情况，但有时是因为我输入的输入字符串有点太快了。有时它会毫无问题地显示快速输入的输入。在上面的屏幕截图中，我`test`以正常速度打字。

这是一个错误还是一个依赖问题？

PS：我已经`xterm`安装了；我使用的是基于 Debian 的 CrunchBang Linux；Mono 运行时是`2.6.7-5`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:41:19.157

似乎这是窗口系统从平台上的标准输入呈现字符的方式的错误。只要您获得的字符串包含所有文本，我就不会担心。

我不认为 Mono 应该归咎于此。如果 Mono 仅在初始加载期间发生，我可能会怀疑它 - 但由于您声明它发生在不同的时间，我认为这可能是操作系统特有的东西。

# sql-server - 如何从表中选择行乘以n？

> ID：10916154
> 
> 赞同：1
> 
> 时间：2012-06-06T14:21:53.330
> 
> 标签：sql-server, tsql, select, union

我有一个如下选择站，它返回 2 行：

```
select ID, Title from TableName 
```

（实际的查询非常大并且返回更多的行，但为简单起见假设以上。）

我需要一个返回更多数据的查询，但我无法更改数据库表。

如何乘以/复制并增加返回的行数，例如 5 倍，以便返回 10 行？

我知道 UNION ALL 如果我写 5 次是可能的：

```
select ID, Title from TableName
UNION ALL
select ID, Title from TableName
UNION ALL
select ID, Title from TableName
UNION ALL
select ID, Title from TableName
UNION ALL
select ID, Title from TableName 
```

但是还有其他更简单的方法吗？我的实际查询要大得多，因此不能使用 UNION ALL。

我希望问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:25:25.797

```
DECLARE @i INT;

SET @i = 1000;

;WITH n AS (SELECT TOP (@i) object_id FROM sys.all_columns)
SELECT t.ID, t.Title FROM TableName AS t CROSS JOIN n; 
```

如果你发现 CTE 没有提供足够的行，你总是可以做更多！

```
DECLARE @i INT;

SET @i = 1000000;

;WITH n AS 
(
  SELECT TOP (@i) c.object_id FROM sys.all_columns AS c
   CROSS JOIN sys.all_objects AS o
)
SELECT t.ID, t.Title FROM TableName AS t CROSS JOIN n; 
```

...或者您可以创建自己的 Numbers 表：

```
SET NOCOUNT ON;

DECLARE @UpperLimit INT = 1000000; -- customize this

;WITH n AS
(
    SELECT
        x = ROW_NUMBER() OVER (ORDER BY s1.[object_id])
    FROM       sys.all_objects AS s1
    CROSS JOIN sys.all_objects AS s2
    CROSS JOIN sys.all_objects AS s3
)
SELECT Number = x
  INTO dbo.Numbers
  FROM n
  WHERE x BETWEEN 1 AND @UpperLimit;

GO
CREATE UNIQUE CLUSTERED INDEX n ON dbo.Numbers(Number)
  -- if Enterprise Edition:
  -- WITH (DATA_COMPRESSION = PAGE)
; 
```

现在您的查询可以是：

```
DECLARE @i INT;

SET @i = 1000000;

;WITH n AS (SELECT TOP (@i) Number FROM dbo.Numbers)
SELECT t.ID, t.Title FROM TableName AS t CROSS JOIN n; 
```

# c# - 从多个表中选择名称并使用相同的 id 进行排序

> ID：10916158
> 
> 赞同：1
> 
> 时间：2012-06-06T14:22:02.833
> 
> 标签：c#, json, sql-server-2008

我有个问题。我有 2 个表格，如下所示：

表 1：**国家**

```
Name: Germany
ID: 1

Name: France
ID: 2 
```

表 2：**城市**

```
Name: Frankfurt
ID: 1

Name: Paris
ID: 2 
```

我想编写一个选择语句，在其中比较 id 并对具有相同 id 的正确国家/地区的城市进行排序。输出应为 json 格式。

到目前为止，我的代码如下所示：

```
public class StadtHelper
{
   public class STADT
   {
       public string StadtName { get; set; }
       public string RegionID { get; set; }
   }

   internal static List<STADT> Stadt()
   {
       List<STADT> stadtObject = new List<STADT>();

       using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
       using (SqlCommand cmd = new SqlCommand(@"SELECT NAME, REGION_ID FROM STADT",con))
       {
           con.Open();
           using (SqlDataReader rdr = cmd.ExecuteReader())
           {
               while (rdr.Read())
               {
                   if (rdr["NAME"] != DBNull.Value && rdr["REGION_ID"] != DBNull.Value)
                   {
                       stadtObject.Add(new STADT()
                       {
                           StadtName = rdr["NAME"].ToString(),
                           RegionID = rdr["REGION_ID"].ToString()
                       });
                   }
               }
           }
       }

       return stadtObject;
   }
} 
```

提前致谢

我编辑了我的代码：

```
 public class StadtHelper
{
    public class STADT
    {
        public string StadtName { get; set; }
        public string RegionName { get; set; }
    }
    internal static List<STADT> Stadt()
    {
        List<STADT> stadtObject = new List<STADT>();

        using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
        using (SqlCommand cmd = new SqlCommand(@"SELECT REGION.NAME, STADT.NAME FROM REGION, STADT WHERE REGION.ID = STADT.REGION_ID ORDER BY REGION.NAME" , con))
        {
            con.Open();
            using (SqlDataReader rdr = cmd.ExecuteReader())
            {
                while (rdr.Read())
                {
                    if (rdr["REGION.NAME"] != DBNull.Value && rdr["STADT.NAME"] != DBNull.Value)
                    {
                        stadtObject.Add(new STADT()
                        {
                            RegionName = rdr["REGION.NAME"].ToString(),
                            StadtName = rdr["STADT"].ToString()
                        });
                    }
                }
            }
        }
        return stadtObject;
    }
} 
```

还有一个错误，我的网络服务给了我一个例外：

```
 System.IndexOutOfRangeException: REGION.NAME
   at System.Data.ProviderBase.FieldNameLookup.GetOrdinal(String fieldName)
   at System.Data.SqlClient.SqlDataReader.GetOrdinal(String name)
   at System.Data.SqlClient.SqlDataReader.get_Item(String name)
   at StadtHelper.Stadt() in C:\Users\Yeah\Documents\Visual Studio 2010\Projects\WebService1\WebService1\StadtHelper.cs:line 31
   at WebService1.Service1.Stadt() in C:\Users\Yeah\Documents\Visual Studio 2010\Projects\WebService1\WebService1\Service1.asmx.cs:line 77 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:50:23.480

给定您的表，TSQL 看起来像，

```
 select ci.Name, co.Name
      from Cities  ci
inner join Country co on co.ID = ci.ID
  order by ci.Name, co.Name 
```

# java - jar 文件的图同构

> ID：10916159
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:22:03.153
> 
> 标签：java, python, ruby, graph, isomorphism

我正在使用 *.jar 文件和图同构。我想检查两个 *.jar 文件之间的图形同构。是否有用于 python 或 ruby​​ 的库。我可以用 igraph 或什么来做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:58:07.253

这是使用[NetworkX 同构检查](http://networkx.lanl.gov/reference/algorithms.isomorphism.html)作为执行我理解您要问的事情的基础的努力...

想象一下，您使用例如[此处的方法](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/view.html)创建包含两个 jar 文件内容的文本文件。

此代码将加载两个 jar 文件并将图形加载到 NetworkX 中。这里的示例被简化为每个路径名中只有两个级别，但一般原则保持不变......如果您发布一些示例内容，我们可以调整`get_edges()`函数以处理更深层次的嵌套。

```
import networkx as nx
from networkx.algorithms import isomorphism

# Contents of two jar files listed, as in
# http://java.sun.com/developer/Books/javaprogramming/JAR/basics/view.html
jar1 = '''a/g
a/h
a/i
b/g
b/h
b/j
c/g
c/i
c/j
d/h
d/i
d/j'''

jar2 = '''1/2
2/3
3/4
4/1
5/6
6/7
7/8
8/5
1/5
2/6
3/7
4/8'''

def get_edges(jar):
    nodes = set( jar.replace('\n', '/').split('/') )
    nodes = dict( zip(nodes, range(len(nodes)) ) )
    edges = [ edge.split('/') for edge in jar.split('\n') ]
    edges = [ (nodes[ edge[0] ],nodes[ edge[1] ]) for edge in edges ]
    return edges

if __name__ == '__main__':
    G1 = nx.Graph()
    G1.add_edges_from( get_edges(jar1) )

    G2 = nx.Graph()
    G2.add_edges_from( get_edges(jar2) )
    print 'Edges from jar1: ', G1.edges()
    print 'Edges from jar2: ', G2.edges()

    GM = isomorphism.GraphMatcher(G1,G2)
    print 'Isomorphic: ', GM.is_isomorphic()
    print 'Mapping between the two jars: ', GM.mapping 
```

这将打印：

```
Edges from jar1:  [(0, 4), (0, 5), (0, 6), (1, 4), (1, 5), (1, 7), (2, 4), (2, 6), (2, 7), (3, 5), (3, 6), (3, 7)]
Edges from jar2:  [(0, 2), (0, 3), (0, 4), (1, 2), (1, 4), (1, 5), (2, 6), (3, 6), (3, 7), (4, 7), (5, 6), (5, 7)]
Isomorphic:  True
Mapping between the two jars:  {0: 0, 1: 1, 2: 6, 3: 7, 4: 2, 5: 4, 6: 3, 7: 5} 
```

希望这可以帮助。

# c# - 如何使用单元测试测试以下场景？

> ID：10916174
> 
> 赞同：1
> 
> 时间：2012-06-06T14:22:49.103
> 
> 标签：c#, unit-testing

我会单元测试以下内容还是进行其他类型的测试：

我想更新数据库中的值，更新值后，我想确保数据库更新为正确的值，但这意味着我必须查询数据库并确定是否存在正确的值，我想单元测试，接触数据库是不可以的。

我想对如下方法进行单元测试（db 和 Update 组成）：

```
public void UpdateValue(int value)
{
   db.Update(value);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:24:56.823

您可以简单地测试您的方法是否成功调用数据库。Mocking 倾向于关注这一点，即您期望发生的呼叫实际上*确实*发生了。

这将涉及用`db`测试版本替换，以便您的测试`UpdateValue`断言它期望`db.Update(value)`以相同的值调用。

应该进行存储过程或 SQL 的测试（归根结底，它仍然存在与 C# 代码相同的错误可能性），但很可能独立于代码单元测试来完成。我们有一个单独的测试项目来测试存储过程逻辑。由于这涉及到一个物理数据库，它保持独立且最小化——但我们仍然认为它是必不可少的。我们已经到了测试几乎所有数据库脚本的阶段，但首先您通常可以不测试基本的 CRUD 代码。任何具有条件语句的 SQL 都会经过测试。

如果您想进行端到端测试以查看是否可以使用代码保存到数据库并再次获取值，那么根据定义，这***不是***单元测试。正如[@lazyberezovsky 所说](https://stackoverflow.com/a/10916291/358221)，这是一个*集成*测试。单元测试旨在删除围绕代码单元的所有依赖项，以便单独测试该单元。

也就是说，（在我看来）也必须进行集成测试。我们让它们针对用例，以便我们测试用户已签署的内容作为用例操作。这一次敲打了很多代码，但有一个明显的*缺点*，那就是与共享状态/副作用代码作斗争。您会发现在集成测试中，大部分测试是准备而不是代码断言。您还会发现它们无法识别失败的特定代码，因此诊断集成测试失败更加困难。

我们在集成测试中取得了中间立场。我们的数据库是通过 DAL 接口提供的，我们只是简单地存根这个接口（不同于模拟），以便提供内存中的测试数据，而不是物理数据库。这样做的一个缺点是我们错过了对数据库本身的集成测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:29:23.677

您的对象的职责是将值传递给它的依赖项（即数据库）。所以，注入一些抽象，它代表你的对象的数据库：

```
public Foo(IDatabase db)
{
   _db = db;
} 
```

并验证此依赖项与您正在测试的对象之间的交互：

```
Mock<IDatabase> db = new Mock<IDatabase>();
db.Setup(x => x.Update(5));
Foo foo = new Foo(db.Object);
foo.Update(5);
db.VerifyAll(); 
```

你是对的，*在单元测试*中接触数据库是不可以的。单元测试应该只验证一个单元的行为（孤立地）。如果您想检查几个一起工作的单元（您的 foo 和 db），那么您需要一个*集成测试*来验证数据库中实际更改的数据。

更新：此示例中使用了[Moq](http://code.google.com/p/moq/)框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:30:17.447

实际上，根据纯粹的定义，涉及数据库的测试不是“单元测试”而是“集成测试”。

典型的答案是用模拟替换对 db.Update() 的调用，但在某些情况下，如果这样做，您可能会觉得您没有对代码进行足够的测试。

根据您使用的数据库，可能还有另一种选择。如果您使用 SQL Server，您的单元测试可以针对本地文件 SQL Express db.xml 执行。该文件可以在每次单元测试执行时被原始的干净副本覆盖，这样您的测试也变得非常可重复。您需要做的就是使用单元测试代码部署 SQL Express 数据库，并在单元测试 app.config 中将连接字符串设置为该本地数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T14:41:42.697

重要的是要记住，单元测试并不是所有自动化软件测试的完美补救措施。

您描述的情况通常通过两种方式进行测试：

*   首先，您将单元测试作为常规开发的一部分进行，该测试将简单地确保使用适当的值调用依赖项（如 Adam Houldsworth 和lazyberezovsky 的回答中所述）。这只是告诉您（和其他开发人员）*这段代码可以做到这一点，这是证明*。
*   接下来，您进行集成测试。该测试需要真实的组件和适当的设置（如有效配置、无/最少数量的模拟）。该测试表明您的组件（或整个应用程序）在真实场景下工作和交互。

这些类型的测试中的每一种都有它的位置，您通常希望同时拥有它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T15:00:58.993

我将使用一个更具体的例子，因为它会更容易谈论。假设这`UpdateValue`实际上是在零售系统的某个地方，用新的美分值更新旧价格。

也许您的班级负责提供当前价格或历史价格 - 我们称其为`PriceProvider`. 也许它知道如何为收据提供退款价格。也许它知道如何给出白色冰箱冰柜的一系列价格。它还知道如何使用以便士提供的新价格来更新价格。如果这是它的工作，那么它不应该知道价格存储在哪里，因为它已经有一个责任（单一责任原则）。它应该将检索价格的责任委托给其他东西，它的工作是将业务请求转换为对知道价格存储位置的东西的参数化调用。

或者，也许您的班级负责从数据库中检索价格并将价格更新到数据库 - a `DatabasePriceRepository`. 它知道如何查找日期和项目的价格，或获取日期和类别的价格列表，但它并不关心您为什么要查找它。如果这是你的类，它与数据库紧密耦合——这是它的唯一责任——因此没有必要嘲笑这一点，否则该类将没有价值。相反，您可以通过集成测试或编写全栈场景甚至手动测试来测试它。

我曾在使用 Hibernate 的项目中工作过，并通过实例化不同的对象来测试配置文件。我们将 Hibernate 连接到内存数据库来执行此操作。这非常快，并给了我们非常快速的反馈！我还曾在我们有从 UI 到数据库的端到端场景的地方工作过，更多的是我们通过 HTTP 请求点击它并检查响应来测试某些服务，以及我们手动测试它的其他地方。

不管你是否对*这个*类进行单元测试，在某些时候你必须在生产中接触数据库，我相信你会想要在上线之前测试它。如果您对此类进行单元测试，您将需要在其他地方执行集成测试，自动化或其他方式。

# c++ - CMFCEditBrowseCtrl 没有按钮图像

> ID：10916178
> 
> 赞同：0
> 
> 时间：2012-06-06T14:23:16.000
> 
> 标签：c++, visual-studio-2010, winapi, mfc

我创建了一个带有对话框的简单 MFC 应用程序，并使用对话框编辑器向其中添加了 CMFCEditBrowseCtrl 控件。当我运行“测试对话框”命令时，控件如下所示：

![在此处输入图像描述](../Images/56c4d0b38452c715d389344bdaae93ce.png)

但是当我运行我的应用程序时，控件没有按钮图像，如下所示：

![在此处输入图像描述](../Images/a514196dcae419d193854bdbb854ca5d.png)

我究竟做错了什么？根据文档，主应用程序类派生自 CWinAppEx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:02:52.270

我发现我必须在我的应用程序中包含 afxribbon.rc 才能正确显示图标。

# ajax - ProtoRPC API 是 ajax 内置的 GAE 吗？

> ID：10916179
> 
> 赞同：2
> 
> 时间：2012-06-06T14:23:16.233
> 
> 标签：ajax, json, google-app-engine, knockout.js, protorpc

下一步：gae/py 应用程序的 ajax 前端。

我的应用程序只有基本的 html 版本，可以与数据存储交互并每次更新页面。没关系，但现在它需要ajax。我尝试了一些解决方案：基本的 javascript、jquery 的 ajax API 和一些框架。

我想我在 knockoutjs 中找到了我想要的一切，但是这个框架通过 json 格式与服务器交互。这意味着我需要学习 json 库并重写所有处理程序，以便在 json 中获取和发布。我可以开始这项任务，但在我想了解更多关于 ProtoRPC API 的内容之前。

文档说这个 API 对于“创建结构化的 Ajax 后端”也很有用，如果我理解得很好，响应的消息是 json 格式的。我的问题是：

ProtoRPC API 消息使用 json 是真的吗？

所有请求/响应都通过 ProtoRPC 会是一个问题吗？

实现服务器端可靠的 ProtoRPC 服务并使用客户端框架是一个好策略吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:41:08.957

[ProtoRPC](http://code.google.com/p/google-protorpc/)附带其传输协议的 JSON 实现。

您应该能够使用 ProtoRPC 构建服务器端逻辑，并使用 JSON 编码的消息向 API 端点发出 HTTP 请求，如官方文档中的[ProtoRPC 概述中所述。](https://developers.google.com/appengine/docs/python/tools/protorpc/overview)

Knockoutjs 不应该成为阻碍，因为[文档](http://knockoutjs.com/documentation/json-data.html)声明它不会强迫您使用任何一种特定技术来加载或保存数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:50:43.287

我只想提一点关于从客户端使用 ProtoRPC 的小问题，因为那里还没有完全开发的客户端。让 ProtoRPC 使用 Json 的主要方法是确保您的请求内容类型为“application/json”。否则，ProtoRPC 可能会尝试使用二进制 protobuf 格式。

此外，ProtoRPC 的文档有点过时了。这些示例显示了将 ProtoRPC 与基于 webapp 的请求处理程序一起使用。相反，您应该使用较新的基于 wsgi 的处理程序，尤其是在您使用 Python 2.7 时。

WSGI 处理程序内置在 ProtoRPC 中，源代码在这里：

[http://code.google.com/p/google-protorpc/source/browse/python/protorpc/wsgi/service.py#211](http://code.google.com/p/google-protorpc/source/browse/python/protorpc/wsgi/service.py#211)

它的工作方式与 webapp 处理程序非常相似，只是将它与现有的基于 webapp 的应用程序一起使用有点小技巧。

# android - 视图中没有此类列错误

> ID：10916180
> 
> 赞同：1
> 
> 时间：2012-06-06T14:23:17.573
> 
> 标签：android, sql, database, sqlite

我在 sqlite - android 中创建了两个视图，但是当我创建第二个视图时，我得到了错误

> 没有这样的库：template_contact_info.tmp_text 作为文本，template_contact_info.tmp_link 作为链接

即使这两个列都存在于 template_contact_info 并且 template_contact_view 已成功创建。但仍然不知道为什么我得到没有这样的列错误。

这是视图的代码

第一个视图

```
db.execSQL("CREATE VIEW IF NOT EXISTS 

template_contact_info AS 

SELECT

template_info.tmp_text as tmp_text ,
template_info.tmp_link as tmp_link , 
template_info.tmp_id as temp_id , 
template_info.tmp_type as tmp_type , 
template_contact._id as _id  
from template_info , template_contact 

where  template_info.tmp_id = template_contact.tmp_id"); 
```

第二个视图***//这里我收到一个错误***

```
db.execSQL("CREATE VIEW IF NOT EXISTS 

template_contact_assign AS SELECT 

contact_info.c_number as number , 
contact_info.c_name as name ,  
contact_info.c_id as conid, 
contact_info._id as cid, 
template_contact_info.tmp_type as type , 
template_contact_info.temp_id as tempid ,
template_contact_info.tmp_text as text ,
template_contact_info.tmp_link as link 
FROM contact_info LEFT JOIN template_contact_info
ON contact_info._id = template_contact_info._id"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:12:16.417

//你想得到

```
template_contact.tmp_id 
```

//在创建时你正在使用`temp_id`而不是`tmp_id`

```
template_contact_info.temp_id 
```

**编辑：**

数据库已经存在，因此您需要卸载/删除数据库以再次为修改后的表创建。

通过命令实用程序 'adb shell `or via eclipse using the file explorer. The database resides in under`'/data/data//databases' 删除数据库。

为了`adb use rm <db_name>`

# c# - 获取不规则的 XML 值

> ID：10916186
> 
> 赞同：1
> 
> 时间：2012-06-06T14:23:23.963
> 
> 标签：c#, xml-parsing, linq-to-xml

我从 GPS 互联网服务获得了 XML。它看起来像：

![不是常规的 XML](../Images/384cdf25f3c14ff7eba82c6647b94eae.png)

我需要从中获取 X 和 Y 值，但我不知道该怎么做

我尝试使用 Descendants XDocument 属性，但它无法检索值。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:31:38.873

就像是`.Elements("Property").Where(el=>el.Attribute("Name").Value == "X")`

这应该为您提供具有 X 属性的元素，之后您只需选择该元素的任何属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:37:23.463

```
 var el = XElement.Parse(xml);
        var x = el.Elements("Property").Where(e => e.Attribute("Name").Value == "X").Single().Attribute("Value").Value;
        var y = el.Elements("Property").Where(e => e.Attribute("Name").Value == "Y").Single().Attribute("Value").Value; 
```

或者

```
 var x = el.Elements("Property").ElementAt(3).Attribute("Value").Value;
        var y = el.Elements("Property").ElementAt(4).Attribute("Value").Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:18:22.920

他是我的解决方案

```
gpsResponseXML.Descendants("Property").Where(el => el.Attribute("Name").Value == "X").Attributes("Value").FirstOrDefault().Value) 
```

# javascript - 在 mootools 中调用没有上下文的 .fireEvent()

> ID：10916187
> 
> 赞同：1
> 
> 时间：2012-06-06T14:23:29.603
> 
> 标签：javascript, mootools

任何想法以下行做什么？

这里的“Popup”是一个什么样的事件？

```
fireEvent('Popup','ok'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T15:11:14.603

事件通常分为两种类型。`DOMEvent`和`Class.Event`。

最常见的是，后者是令人感兴趣的。`this.fireEvent('popup', 'ok');`会让实例知道发生了一些奇妙的事情。

`[Options,Events]`如果您的实例是通过以下方式创建的，则与 Class 中的 mixins 一起使用：

```
var foo = new someclass({
    onPopup: function(status) {
        console.log(status); // ok!
        console.log(this); // the instance (foo);
    }
});

// later.
foo.fireEvent('popup', 'fail'); 
```

但在你的情况下，我不确定这是关于一个班级，因为：

您还可以在松散/模棱两可的环境中使用事件，例如 DOM 元素，您可以在其中触发事件以发布/订阅各种组件。例如。`window.fireEvent('popup', 'ok');`- 或者在您的示例中，`fireEvent('popup')`单独 - 将在全局窗口对象上触发事件回调，因为没有定义其他上下文。

这将适用于您在块中添加的任何内容，如下所示：

```
window.addEvent('popup', function(status) {

}); 
```

不键入上下文对象对于范围链查找和可读性来说真的很糟糕。你可以做的事实`fireEvent('domready')`并不意味着你应该做。写这篇文章的人采取了不提高可读性的愚蠢捷径。`fireEvent`本身是来自原型的扩展属性，它不是全局变量/函数，尽管根据您发布的代码它看起来像一个......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:49:02.160

显然（并且[根据文档](http://mootools.net/docs/core/Element/Element.Event#Element%3afireEvent)），它会触发`'Popup'`带有参数类型的事件`'ok'`。这似乎是自定义事件类型，因此要了解它的确切作用以及它如何解释它的参数，您需要查阅处理此事件的代码的源代码或文档。

# symfony - Composer 还原包

> ID：10916189
> 
> 赞同：27
> 
> 时间：2012-06-06T14:23:36.163
> 
> 标签：symfony, git-revert, vendors, composer-php

我正在 Symfony 2.1 中构建一个新应用程序。我正在使用许多使用作曲家拉入的捆绑包。很多这些捆绑包在这个最新版本的 Symfony 中存在问题，我不得不进入 /vendor 文件夹来确定问题。

这意味着我正在直接更改供应商文件 - 纯粹是出于测试目的。（当我们修复了一个捆绑包时，我们会分支并提交适当的拉取请求）。

我想知道是否有一些命令`composer.phar revert`可以撤消对供应商文件夹所做的任何更改（如 git checkout）。目前，如果我运行一个作曲家`update`，或者`install`它不这样做。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-11T09:16:28.353

`composer install`，如果您保留了 composer.lock 文件，会将您的所有供应商恢复到以前安装的状态。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-05-06T15:01:19.053

如果您使用`composer update`您的`composer.lock`已更改为。所以我做了一个小技巧。还原`composer.lock`，`git`然后运行`composer install`​​. 它将删除最新的软件包并下载以前的软件包。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-09T05:52:23.837

将[丢弃更改](https://getcomposer.org/doc/06-config.md#discard-changes)添加到您的`composer.json`文件中：

```
{
    "config": {
        "discard-changes": true
    }
} 
```

确保您使用的是最新版本的 Composer。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-04T17:21:04.520

```
 cd /my/project/location/

 rm -rf vendor/my_vendor_to_rollBack

 composer install 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-22T21:32:18.510

据我所知，除了与版本有关之外，上述答案均无效。如果您更改了已安装的版本，您可以恢复到以前的版本。

但是，如果您只是删除或更改文件，则更改将显示在 中，但是除了删除然后重新请求包之外，`composer status -v`没有办法恢复（即使使用）。`"discard-changes":true`

# c# - PLINQ 性能不佳

> ID：10916190
> 
> 赞同：4
> 
> 时间：2012-06-06T14:23:37.123
> 
> 标签：c#, plinq

我正在尝试实现 PLINQ 示例，但面临以下问题我的顺序查询比并行查询执行得更快。

这是代码示例：

```
 Stopwatch sw = new Stopwatch();

        int[] vals = Enumerable.Range(0, Int16.MaxValue).ToArray();

        sw.Start();
        int[] x1 = vals.Where(x => x % 2 == 0).ToArray();
        sw.Stop();
        Console.WriteLine("Sequential Execution {0} milliseconds", sw.ElapsedMilliseconds);

        sw.Restart();
        int[] x2 = vals.AsParallel().Where(x => x % 2 == 0).ToArray();
        sw.Stop();
        Console.WriteLine("Parallel Execution {0} milliseconds", sw.ElapsedMilliseconds); 
```

我的机器是 Pentium(R) Dual - Core 我也试过 Quad - Core AMD Opteron(tm)。

相同的结果 并行查询比顺序查询运行得慢。你能告诉我我的问题是什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:36:04.567

我想这与一些开销有关。您迭代的集合非常小（32k 短裤），对这些项目执行的操作很简单。

在这种情况下，集合的分区、过滤和重新合并可能比在单个迭代中执行相同的操作要昂贵得多。

如果您的比较成本更高（例如搜索字符串）并且您的集合增长，您会看到结果发生变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T15:41:09.443

**您的“问题”是在没有意义的情况下使用 PLINQ**

PLINQ 并不总是更快。PLINQ 总是会增加开销。

在 CPU 指令方面；无论您需要做多少工作（称为 X），您最终都会执行超过 X 条指令。PLINQ 将做很多额外的工作来启动线程，将工作委派给它们并将结果返回到您可以使用的形式中。

这样做的好处是您可以让多个 CPU/Core 工作。有时它更快。当您正在执行的 CPU 工作量相对于开销而言较小时，它会变慢。

当我运行您的代码时，我得到以下输出：

> 顺序执行 2 毫秒
> 
> 并行执行 40 毫秒

我还可以看到PLINQ 代码创建了*八个工作线程。*这八个线程代表了 2 毫秒计算的大量开销。您可以通过运行 Parallel Execution 基准测试两次来了解它的开销。工作线程将徘徊。这是我第二次运行它的输出：

> 顺序执行 2 毫秒
> 
> 并行 #1 执行 40 毫秒
> 
> 并行 #2 执行 3 毫秒

第二次要快得多；但仍然比什么都不做要慢。因为，即使已经创建了工作线程 - PLINQ 仍然需要做一些工作来划分线程之间的操作并以您可以访问的格式返回结果。

你要做的工作越多，开销的影响就越小。在此示例中，我已将您的 Where lambda 替换为调用的静态函数`IsValid`，并且我计算了 %2 500 次，而不是仅计算一次。

```
static bool IsValid(int input)
{
    int result=0;

    for(int i =0;i<500;i++)            
        result = input%2;

    return result == 0;
} 
```

现在 - 我的执行时间是：

> 顺序执行 36 毫秒
> 
> 并行 #1 执行 47 毫秒
> 
> 并行 #2 执行 9 毫秒

您可以看到 PLINQ 在第一次执行时仍然较慢 - 但在第二次执行时明显更快。如果您通过将循环从 500 增加到 5000（在我的机器上）来提高 CPU 工作量，那么 PLINQ 获胜，请放下手。

TL;DR - 你做得对；您只是没有做足够的工作使 PLINQ 成为更快的选择。

这是我所做的整个源代码：

```
static void Main(string[] args)
{
    Stopwatch sw = new Stopwatch();

    int[] vals = Enumerable.Range(0, Int16.MaxValue).ToArray();

    sw.Start();
    int[] x1 = vals.Where(IsValid).ToArray();
    sw.Stop();
    Console.WriteLine("Sequential Execution {0} milliseconds", sw.ElapsedMilliseconds);

    sw.Restart();
    int[] x2 = vals.AsParallel().Where(IsValid).ToArray();
    sw.Stop();
    Console.WriteLine("Parallel #1 Execution {0} milliseconds", sw.ElapsedMilliseconds);

    sw.Restart();
    int[] x3 = vals.AsParallel().Where(IsValid).ToArray();
    sw.Stop();
    Console.WriteLine("Parallel #2 Execution {0} milliseconds", sw.ElapsedMilliseconds);

    Console.Read();
}

static bool IsValid(int input)
{
    int result=0;

    for(int i =0;i<5000;i++)            
        result = input%2;

    return result == 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T14:35:21.690

这个似乎效果更好：

```
 Stopwatch sw = new Stopwatch();

        int[] vals = Enumerable.Range(0, 10000000).ToArray();

        sw.Start();
        var x1 = vals.Where(x => x % 2 == 0).ToList();
        sw.Stop();
        Console.WriteLine("Sequential Execution {0} milliseconds", sw.ElapsedMilliseconds);

        sw.Restart();
        var x2 = vals.Where(x => x % 2 == 0).AsParallel().ToList();
        sw.Stop();
        Console.WriteLine("Parallel Execution {0} milliseconds", sw.ElapsedMilliseconds); 
```

不要为 200 个值启动另一个线程。与在单个线程上完成整个循环相比，启动/唤醒其他线程需要更多的时间。+ 更多线程意味着线程同步机制。

LE：好的，我尝试了 Int16.MaxValue，它在那里工作得更好。不是我意识到最大值约为 30k，因此该评论可能不适用于您的情况。问题可能是 AsParralel 放错地方了。

# ios - 如何匹配两个语音文件并返回它们是否是相同的单词？

> ID：10916192
> 
> 赞同：1
> 
> 时间：2012-06-06T14:23:43.403
> 
> 标签：ios, artificial-intelligence, pattern-matching, voice-recognition, pattern-recognition

我用“Hello World”录制我的声音并将其保存为file-1。

然后用“Hello World”录制另一个人的声音并保存为file-2。

有没有办法匹配这两个文件？

我的意思是，如果两个文件记录了相同的单词，它们应该是相等的。

请告诉我一些要阅读的开源项目或论文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:37:01.660

尝试使用[动态时间规整算法](http://en.wikipedia.org/wiki/Dynamic_time_warping)

这是在语音识别设备中使用 DTW 算法的示例[http://www.cnel.ufl.edu/~kkale/6825Project.html](http://www.cnel.ufl.edu/~kkale/6825Project.html)

# android - TabHost Fragment中的GridView在选项卡切换后消失

> ID：10916194
> 
> 赞同：0
> 
> 时间：2012-06-06T14:23:43.457
> 
> 标签：android, tabs, android-fragments

我有三个选项卡、一个地图、一个图片库和一个设置标签。我尝试使用片段来设置它们，并且它们在大多数情况下都有效。为了让地图选项卡正常工作，我[在 Fragment (Honeycomb) 中关注了这个人的东西 MapView](https://stackoverflow.com/questions/5109336/mapview-in-a-fragment-honeycomb/8126287#8126287)。

设置选项卡使用 ListFragment 并且工作正常，地图也是如此。我第一次使用的图像选项卡也可以正常工作。我导航到它，所有图像都正确加载，但如果我切换到其他选项卡之一并返回图像选项卡，一切都消失了，没有任何加载。如果我退出应用程序并再次打开它，图像选项卡将正确加载，这让我认为某些内容正在正确加载，但在我导航到该选项卡时没有重新初始化或其他内容。

图片库代码：

```
public class ImageGridFragment extends Fragment implements LoaderManager.LoaderCallbacks<Cursor> {

ImageAdapter imageAdapter;
GalleryItem[] galleryItems = new GalleryItem[0];
GridView gridView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
    getActivity().getSupportLoaderManager().initLoader(0, null, this);
    imageAdapter = new ImageAdapter(getActivity(), galleryItems);
}

@Override
public View onCreateView(
        LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    final View v = inflater.inflate(R.layout.image_grid_fragment, container, false);
    gridView = (GridView) v.findViewById(R.id.gridView);
    Gallery.setContentResolver(getActivity().getContentResolver());
    Gallery.setDefaultBitmap(getResources(), R.drawable.loading);
    gridView.setOnItemClickListener(new GridView.OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, final int position, long id) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
            final LayoutInflater
                    inflater = (LayoutInflater) getActivity().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.image_popup, null);
            ImageView image = (ImageView) view.findViewById(R.id.image);
            Drawable d = Drawable.createFromPath(galleryItems[position].getUri().getPath());
            image.setImageDrawable(d);
            image.setMinimumHeight(d.getMinimumHeight());// (int) (d.getIntrinsicHeight() * 2.5));
            image.setMinimumWidth(d.getIntrinsicWidth());// (int) (d.getIntrinsicWidth() * 2.5));
            builder.setPositiveButton("Send", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialogInterface, int i) {
                    Intent sendIntent = new Intent(getActivity(), RecordSomething.class);
                    sendIntent.putExtra("FILE", new File(galleryItems[position].getUri().getPath()));
                    startActivityForResult(sendIntent, Constants.ACTIVITY_SEND_PHOTO);
                }
            });
            builder.setNegativeButton("Cancel", null);
            builder.setView(view);
            builder.show();
        }
    });
    return v;
}

/* Creates the menu items */
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.gallery_menu, menu);
    super.onCreateOptionsMenu(menu, inflater);
}

/* Handles item selections */
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_camera:
            Intent camIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

            /*
             * The below code was used to send a parameter to the native camera app to tell it
             * to save a copy of the image taken to the file we specified. This worked fine,
             * except that the image lost it's orientation. What we do instead is in onActivityResult
             * we find the most recent image taken, move it to our folder, rename it, and resize it
             */

            startActivityForResult(camIntent, Constants.ACTIVITY_TAKE_PHOTO);
            return true;
    }
    return false;
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case Constants.ACTIVITY_TAKE_PHOTO:
            if (resultCode == Activity.RESULT_OK) {
                Intent sendIntent = new Intent(getActivity(), RecordSomething.class);
                sendIntent.putExtra("FILE", "test"); //TODO get the path from the array of pictures
                startActivityForResult(sendIntent, Constants.ACTIVITY_SEND_PHOTO);
            }
            break;
    }
}

@Override
public Loader<Cursor> onCreateLoader(int i, Bundle bundle) {
    return new CursorLoader(getActivity(),
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            new String[]{
                    MediaStore.Images.ImageColumns._ID,
                    MediaStore.Images.ImageColumns.ORIENTATION,
                    MediaStore.Images.Media.DATA
            },
            MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME + " = 'Camera'",
            null,
            MediaStore.Images.ImageColumns.DATE_TAKEN + " DESC");
}

@Override
public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
    galleryItems = new GalleryItem[cursor.getCount()];

    cursor.moveToFirst();
    if (cursor.moveToFirst()) {
        int i = 0;
        do {
            galleryItems[i] = new GalleryItem(
                    cursor.getInt(cursor.getColumnIndex(MediaStore.Images.ImageColumns._ID)),
                    cursor.getString(cursor.getColumnIndex(MediaStore.Images.Media.DATA)),
                    cursor.getInt(cursor.getColumnIndex(MediaStore.Images.ImageColumns.ORIENTATION)));
            i++;
        } while (cursor.moveToNext());
    }

    imageAdapter.setGalleryItems(galleryItems);
    gridView.setAdapter(imageAdapter);
}

@Override
public void onLoaderReset(Loader<Cursor> cursorLoader) {}
} 
```

任何帮助，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:57:34.033

如果有人好奇，我解决了它。问题是我没有在 onCreateView 中调用 gridView.setAdapter。第一次一切正常的原因是因为那是光标被加载的时候，所以它在 onLoadFinished 中被调用，正如你在上面看到的。

我需要把它放在 onCreateView 因为我的 gridview 每次都在那里重新定义，所以如果我不调用 setAdapter 并且光标已经加载。图片没有开始填充。

# c# - 设置在 Run-time CF C# 上创建的图片框的图像属性

> ID：10916195
> 
> 赞同：1
> 
> 时间：2012-06-06T14:23:44.533
> 
> 标签：c#, winforms, compact-framework, windows-ce, picturebox

我在运行时创建了一个图片框，然后使用以下代码访问它：

```
foreach(Control mycontrol in panel.Controls){
  if(control.Name == "picBox1"){
    //here I can work with my pictureBox
  }
} 
```

但是一旦我进入 if 语句，我就不能放`control.Image`。是否有任何 Control 属性可用于管理 picBox1 的 Image 属性？

**解决方案**正如 Rajesh 建议的那样，强制转换控件可以解决问题。我试图通过使用来投射它`(PictureBox)control.Image`，但这是**错误**的。

**正确**的做法是编写 Rajesh 的代码：`((PictureBox)control).Image`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:28:24.800

使用以下代码

```
((PictureBox)Control).Image = /*image */ 
```

希望这可以帮助。

# algorithm - 给出一个有效的算法（空间和时间）来找到书中最常见的 10 个单词

> ID：10916196
> 
> 赞同：0
> 
> 时间：2012-06-06T14:23:44.750
> 
> 标签：algorithm, data-structures, hash

给定一本有数百万字的书。所有的单词一次都无法容纳在记忆中。给出一个有效的算法（空间和时间）来找到 10 个最常用的词。

我的方法是使用哈希并存储所有单词。通常哈希取值并将其乘以素数（使其更有可能生成唯一哈希）所以你可以这样做：

```
int hash=7;
for (int i=0; i < strlen; i++) {
    hash = hash*31+charAt(i);
} 
```

如果一个单词已经存在，则增加相应的计数。维护一个大小为 10 的最小堆。扫描一个单词时，找到它的频率。如果它大于堆中的最小值，则删除最小值并插入并更新堆。最后，我们得到了堆中出现频率最高的 10 个单词。有什么问题？这种方法只有在所有单词都可以同时容纳在内存中时才有效。

另一种方法是使用外部排序，因为书籍的大小与物理内存相比要大得多。排序后，线性搜索就可以完成我们的工作。但是，从磁盘访问的时间呢？寻道时间和延迟时间可以增加访问时间。因此，这种方法也效率不高。

我可以想到另一种方法：分布式哈希（仅当我们有 n 台机器时才有效）。在 n 台机器之间分布散列。我们可能会执行不同的策略，假设我们有 26 台机器，然后我们可能会对机器 1 中所有以字母 'a'('A') 开头的单词、以 'b'('B') 开头的单词等进行哈希处理。然后我们可以执行排序或者可以使用 TRIE 数据结构。

有没有更好的方法来查找前十个最常用的单词？

# c# - 关闭包含 silverlight 的 Javascript 弹出窗口

> ID：10916206
> 
> 赞同：0
> 
> 时间：2012-06-06T14:24:09.113
> 
> 标签：c#, javascript, asp.net, silverlight

我有一个 C# aspx Web 应用程序，它使用 JavaScript 打开一个弹出窗口。我捕获窗口句柄并将该值放入数组中。当 Web 应用程序关闭时，我想关闭弹出窗口。当我查询数组时，窗口句柄不再在数组中，所以我找不到关闭它的窗口。这种行为对我来说很奇怪，因为其他弹出窗口（不包含 silverlight）将保留在数组中，并在应用程序结束时关闭。

起初，我认为这是可以通过框架解决的问题，例如无法关闭包含 PDF 的弹出窗口，但该解决方案不适用于我。[这是我必须在 PDF 中使用的东西](https://stackoverflow.com/questions/3728315/how-can-window-closed-true-when-the-window-is-open)

问：aspx 主窗口关闭时，如何关闭包含 Silverlight 的弹出窗口？

一些 JavaScript 代码：

```
var openedWindows = new Array();
function OpenNamedWindow(url, name, features, replace)
{
    var oWin = open(url, name, features, replace);
    // The Silverlight window object is within this array afterwards, and in subsequent calls
    // to this method
    openedWindows.push(oWin);
}

function CloseOpenedWindows()
{
    while (openedWindows.length > 0)
    {
        var window = openedWindows.shift();
        if(!window.closed)
            window.close();
    }
} 
```

主要的 aspx 形式（缩写）

```
<html>
  <body onunload="CloseOpenedWindows();"> ... <body/>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:55:56.467

你可以试试这段代码，与c#和silverlight无关。我不会声明变量“window”，我肯定会将关闭事件“unload”附加到“window”。

**html:**

```
<button id=openwindow>open new window</button>
<br />
<a href="http://jsfiddle.net/">go to another page and close this</a> 
```

​ **javascript:**

```
// lib AttachEvent
function AttachEvent(obj, evt, fnc, useCapture) {
    if (!useCapture) useCapture = false;
    if (obj.addEventListener) {
        obj.addEventListener(evt, fnc, useCapture);
        return true;
    } else if (obj.attachEvent) return obj.attachEvent("on" + evt, fnc);
    else {
        MyAttachEvent(obj, evt, fnc);
        obj['on' + evt] = function() {
            MyFireEvent(obj, evt)
        };
    }
};
// lib AttachEvent

var windowOpenControl = {
    __cache: [],
    open: function(url, name, features, replace) {
        var w = window.open(url, name, features, replace);
        this.__cache.push(w);
    },
    closeAll: function() {
        try {
            var c = this.__cache.length;
            for (var i = 0; i < c; i++) {
                this.__cache[i].close();
            }
        } catch (e) {}
    }
};

var
button = document.getElementById('openwindow'),
    counter = 0;

AttachEvent(button, 'click', function() {
    windowOpenControl.open("http://www.google.com", 'mywindow_' + (counter++));
});

AttachEvent(window, 'unload', function() {
    windowOpenControl.closeAll();
});​ 
```

[运行示例](http://jsfiddle.net/adescalzo/mpSRg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:12:50.030

原来，包含

```
var openedWindows = new Array(); 
```

被多次加载，所以 javascript 对它需要遍历哪个数组感到困惑。确保仅在解决问题后才加载 js 文件。

# html - HTML5 代码在 IE9 中不起作用

> ID：10916210
> 
> 赞同：0
> 
> 时间：2012-06-06T14:24:22.793
> 
> 标签：html, internet-explorer-9, local-storage

以下简单代码在 Firefox (12.0) 中有效，但在 IE 9 中似乎无效，即使 IE9 支持本地存储。注意 alert(localStorage.lastname); 不显示任何结果。想知道在 IE9 中使用 localStorage 是否存在已知问题，因为文档确实说它受支持。

```
 <!DOCTYPE html>
    <html>
    <body>
    <script> 
    if(typeof(Storage)!=="undefined")
    {
      alert('local storage')
      localStorage.lastname="Smith";
      alert(localStorage.lastname);  
    }
     else
    {
     alert("Sorry, your browser does not support web storage...")
    }
   </script>
   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:32:04.560

永远不要直接设置/获取本地存储中的项目！为此使用适当的方法：

```
localStorage.setItem(key,value)
localStorage.getItem(key)
localStorage.removeItem(key) 
```

这解决了您的 IE 问题，您将过上幸福的生活 :-D

（注意，这些值存储为字符串！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:18:31.200

如果您在 Web 服务器上托管 HTML 文件，您的代码将在 IE 上正常工作。

如果您在 IE 中打开 file:// url，则 localStorage 将是未定义的。
尝试使用 if(typeof( **localStorage** )!=="undefined") 进行确认，您将收到“抱歉，您的浏览器不支持网络存储...”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:29:52.493

实际上它甚至不能从网络服务器工作。我在 websphere 应用程序服务器上运行一个 web 应用程序，我在 ie9 上遇到了同样的问题。它在 chrome 上运行良好。

你可以试试这个页面上的东西：http: [//html5doctor.com/storing-data-the-simple-html5-way-and-a-few-tricks-you-might-not-have-known/](http://html5doctor.com/storing-data-the-simple-html5-way-and-a-few-tricks-you-might-not-have-known/)

# android - 在 Android 中访问资源文件

> ID：10916211
> 
> 赞同：2
> 
> 时间：2012-06-06T14:24:28.667
> 
> 标签：android

我一直在摆弄这个很长一段时间。我无法弄清楚为什么我的 Android 应用程序找不到我的文件 /res/raw/video.mp4。我在 API 15 上，手机是最新的 v4.0.3。

测试代码当前如下所示：

```
String file = "android.resource://" + getPackageName() + "/" + R.raw.movie; 
File f = new File(file);
message = f.exists() ? "file exists" : "file missing"; 
```

到目前为止，我尝试过的所有组合都会导致消息字符串返回为“文件丢失”。从资源中访问文件的正确方法是什么？也尝试了明显的“/res/raw/video.mp4”等，但都失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:38:14.497

假设您要打开一个流来处理文件，您应该这样做：

```
InputStream raw = getResources().openRawResource(R.raw.movie); 
```

**编辑**

好的，既然我确切地知道你想要什么，我有坏消息。真的不可能。

看到这个[问题](https://stackoverflow.com/questions/6301493/android-get-path-of-resource)

基本上，您需要将文件从资源中复制到可以获取的位置，例如 SD 卡或内部存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:36:04.943

`String url = "file:///android_asset/raw/filename.jpg`";

# facebook - 为我的网站用户自动创建 Facebook 页面

> ID：10916216
> 
> 赞同：-2
> 
> 时间：2012-06-06T14:24:37.600
> 
> 标签：facebook, performance

有没有办法将我的公司网站直接链接到 Facebook，这样当用户登录我公司的网站时，它每天都有成千上万的点击量，它还可以自动为他们创建一个 Facebook 页面。该网站是 www.buildingtrades.com，是一个全国性的承包商协会。我们在那里有一个表格供人们在线加入我们的协会，在完成表格后，我们希望它还可以自动为他们创建一个 Facebook 页面，作为我们的服务之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:36:00.993

我不确定是否有办法以编程方式创建 facebook 页面，但您可以将任何网页视为页面：请参阅[此处](http://www.insidefacebook.com/2010/04/21/with-the-open-graph-protocol-any-url-can-be-treated-just-like-a-facebook-page/)了解更多信息

# android - 我可以找回当前的电话号码吗？

> ID：10916217
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:24:43.907
> 
> 标签：android

我正在为Android（2.1+）编写一个应用程序，我想使用当前手机的电话号码。大量的谷歌搜索给我带来了以下信息：

```
String number=(TelephonyManager)getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE).getLine1Number(); 
```

连同许可：READ_PHONE_STATE。

然而，我的问题是它返回 null。在搜索时，我注意到这个问题之前已经被问过很多次，而且几乎在所有这些问题中都说这个数字并不总是可用的。

在测试时，我发现在我自己的手机上它给了我 null。但是另一个应用程序（例如[WhatsApp](https://en.wikipedia.org/wiki/WhatsApp)）能够识别我的电话号码）。

所以我想知道，他们是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:30:09.417

您可以查看本教程以了解[如何以编程方式获取自己的手机号码](http://rdcworld-android.blogspot.in/2012/03/how-to-get-own-mobile-number.html)

请阅读我在教程下面写的所有信息

> 正如我所读到的，到目前为止，有些人对输出的不同行为存在冲突。有报道称，某些 SIM 卡会导致此方法返回 null。
> 
> 因为这个问题没有保证的解决方案，因为电话号码没有物理存储在所有 SIM 卡上，也没有从网络广播到电话。在一些需要物理地址验证的国家尤其如此，之后才进行号码分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:36:54.133

好吧，我想出了另一种方法来检索电话号码（在我的情况下，这确实是绝对必须的）。

1.  该应用程序必须连接到服务器。
2.  服务器给应用程序一个唯一的 id 和一个电话号码。
3.  该应用程序向具有唯一 ID 的电话号码发送一条短信。
4.  服务器（我是否提到过 SMS 网关应该允许您解释短信？）将看到发送短信的号码和属于应用程序的 ID。这存储在数据库中。
5.  现在，您将可以使用标识符检索号码。

这是基本的想法。

# c# - 从 Outlook 中检索嵌入式 MSG 附件的 DragDrop EventArgs 的内容被拖到控件上

> ID：10916218
> 
> 赞同：5
> 
> 时间：2012-06-06T14:24:48.057
> 
> 标签：c#, .net, drag-and-drop, outlook

我有一个应用程序，在其中拖放来自文件系统的文件、来自 Outlook 的电子邮件或来自 Outlook 的附件，然后代码将这些文件保存在文件系统文件夹中，以便稍后上传到 SharePoint。

除了当我需要识别**FileContents**为空的电子邮件附件的内容（*即电子邮件嵌入式 MSG 上的电子邮件附件*）时，这一切都很好。有什么方法可以访问电子邮件的内容以保存为 .msg 文件？

 **以下代码片段`MemoryStream`为不是电子邮件但对于电子邮件类型为空的附件正确创建了一个：

```
void DoDrop(object sender, DragEventArgs e)
{
    var memoryStream = (MemoryStream) eventArgs.Data.GetData("FileContents", true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:53:08.753

我无法重现这种行为。我使用了您上面的示例代码，它可以完美地从 Explorer 预览窗格或 Inspector 窗口中拖动嵌入的 MSG。关于嵌入式味精，您肯定没有与我们分享某些内容。[附件类型是](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.attachment.type.aspx)什么？

我还建议您[查看 Outlook Drag-n-Drop 的 CodeProject 示例](http://www.codeproject.com/Articles/28209/Outlook-Drag-and-Drop-in-C)。您的示例代码不考虑何时将多个项目拖放到应用程序中 - 如果用户选择 (2) 附件、(3) 电子邮件、(5) 文件等，它将仅采用第一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T21:35:33.873

我在 vb.net 上有一个扩展的列表框控件，它处理拖放操作，包括来自 Outlook 的电子邮件。我遇到了与您在原始帖子中指出的相同的问题。删除由嵌入的 .msg 文件组成的附件时，GetData 返回为空的 FileContents。目前，我只是向用户显示一条消息，指示他们应该先尝试将附件放在桌面上，然后将其拖到应用程序中。这似乎是可行的，因为 Windows 操作系统负责提取数据并将其存储为 .msg 文件（该文件本身可以正确拖放）。

我还找到了一些关于如何执行此操作的 c# 示例，但在 vb.net 中重新创建它们时没有成功。最有帮助的是 codeproject.com，David Ewen 于 2008 年 7 月 28 日将其称为“C# 中的 Outlook 拖放”。它处理多个附件和 Outlook 邮件附件。由于它是用 C# 编写的，也许您会发现它有些用处。

我知道我通过询问违反了规则，但是如果您找到了比我提供的更好的解决方案，我会很感兴趣。**

# java - URL.openconnection() 时做了什么？

> ID：10916219
> 
> 赞同：9
> 
> 时间：2012-06-06T14:24:49.977
> 
> 标签：java, url, httpurlconnection

我想知道 URL.openconnection() 时做了什么。
我做了一些这样的测试：

```
public static void main(String[] args) {
    //    testConnection("http://www.google.com");
    testConnection("http://219.09.34.23.1");
}

private static void testConnection(final String _url) {
    new Thread(new Runnable() {
        String strurl = _url;
        long starttime = 0;
        long endtime = 0;

        public void run() {
            try {
                System.out.println("open:" + strurl);

                starttime = System.currentTimeMillis();
                System.out.println("starttime:" + starttime);

                URL url = new URL(strurl);
                HttpURLConnection conn = (HttpURLConnection) url
                        .openConnection();

                endtime = System.currentTimeMillis();
                System.out.println("openConnection endtime:" + endtime);
                System.out
                        .println("spend:" + (endtime - starttime) + " ms");

                conn.connect();
                endtime = System.currentTimeMillis();
                System.out.println("connect endtime2:" + endtime);
                System.out
                        .println("spend:" + (endtime - starttime) + " ms");

                conn.getResponseCode();
                endtime = System.currentTimeMillis();
                System.out.println("endtime3:" + endtime);
                System.out
                        .println("spend:" + (endtime - starttime) + " ms");
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

                endtime = System.currentTimeMillis();
                System.out.println("MalformedURLException endtime:"
                        + endtime);
                System.out
                        .println("spend:" + (endtime - starttime) + " ms");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

                endtime = System.currentTimeMillis();
                System.out.println(" IOException endtime:" + endtime);
                System.out
                        .println("spend:" + (endtime - starttime) + " ms");
            }

        }
    }).start();
} 
```

当我运行 testConnection("http://www.google.com") 时，一切正常。
当我运行 testConnection("http://219.09.34.23.1"), "219.09.34.23.1" 是一个随机 ip 可能不存在我写的，它打印这个：

```
open:http://219.09.34.23.1
starttime:1338978920350
openconnection endtime:1338978920355
spend:5 ms

    java.net.UnknownHostException: 219.09.34.23.1  
    at java.net.PlainSocketImpl.connect(Unknown Source)  
    at java.net.SocksSocketImpl.connect(Unknown Source)  
    at java.net.Socket.connect(Unknown Source)  
    at java.net.Socket.connect(Unknown Source)  
    at sun.net.NetworkClient.doConnect(Unknown Source)  
    at sun.net.www.http.HttpClient.openServer(Unknown Source)  
    at sun.net.www.http.HttpClient.openServer(Unknown Source)  
    at sun.net.www.http.HttpClient.<init>(Unknown Source)  
    at sun.net.www.http.HttpClient.New(Unknown Source)  
    at sun.net.www.http.HttpClient.New(Unknown Source)  
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)  
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)  
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)  
    at Main$1.run(Main.java:37)  
    at java.lang.Thread.run(Unknown Source)

IOException endtime:1338978920393
spend:43 ms 
```

这意味着它花了5ms运行openconnection，花了43ms发现它是一个unknownhost，我的问题是，当URL.openconnection（）为“219.09.34.23.1”是unknownhost时做了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T14:27:15.453

如果您阅读 的[javadocs`URL.openConnection()`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection%28%29)，您会发现：

> 返回一个`URLConnection`实例，该实例表示与 URL 引用的远程对象的连接。
> 
> `URLConnection`每次调用`URLStreamHandler.openConnection(URL)`此 URL 的协议处理程序的方法时，都会创建一个新的实例。
> 
> 应该注意的是，`URLConnection`实例在创建时并没有建立实际的网络连接。这只会在调用时发生`URLConnection.connect()`。

**更新**

您在“随机 ip”中使用的 IP 无效；它应该由 4 个八位字节组成，而不是 5 个。43ms 可能用于：（1）在非 IP ip 上进行 DNS 查找（2）打印堆栈跟踪。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-21T18:22:54.660

**打开连接不像连接**

`openconnection`不允许您下载确定的 URL 内容。你必须打电话`connect`。但其实不然，下面会解释：

您并不总是需要显式调用该`connect`方法来启动连接。如有必要，依赖于连接的操作（如`getInputStream`、`getOutputStream`等）将隐式执行连接。

# sql-server - SSIS 运行 SSRS 报告：在本地工作，但作为代理作业运行时“找不到网络名称”？

> ID：10916220
> 
> 赞同：2
> 
> 时间：2012-06-06T14:24:50.663
> 
> 标签：sql-server, sharepoint, ssis, webdav, unc

背景信息：我们运行了一些（目前是 9 个）核心 SSRS 报告，这些报告是大量参数化的，但重要的是 StartDate、EndDate 和 Department。这些将在每日、每周、每月、每季度、每年和临时（交互式）的基础上运行。自动报告将保存到 Sharepoint 中的特定文件夹。

到目前为止我所做的：将所有报告放入这样的表格中，它们不会“等待”参数，而是生成仅包含相同三个参数的报告。因此，可以仅使用它们的 URL 调用它们：

```
http://server/ReportServer?/Folder/Report1&Department=DEPT1&ContactFromDate=01/01/2012&ContactToDate=31/01/2012+23:59:59&rs:Command=Render&rs:Format=PDF

http://server/ReportServer?/Folder/Report5&Department=DEPT8&ContactFromDate=01/04/2012&ContactToDate=06/01/2012+23:59:59&rs:Command=Render&rs:Format=PDF 
```

..等等。

大约有 20 个部门，需要 5 种报告类型中的每一种，因此设置订阅并不是一个真正的选择，而这正是 SSIS 的用武之地。

我创建了一个包，它基本上从 SQL 表中读取报告标题和部门，为每个部门/报告填充 ADO.Net 枚举器，然后运行嵌套的 For..Each 循环并尝试触发 WebRequest 并将生成的 PDF 保存到一个共享点文件夹。这在我的开发人员 PC 上运行良好，但在 SQL Server 上作为作业运行时（通过 SQL Server 中设置的代理）失败并出现“找不到网络名称”错误。

这是我的 Visual Basic 代码：

```
//Microsoft SQL Server Integration Services Script Task
//Write scripts using Microsoft Visual Basic
//The ScriptMain class is the entry point of the Script Task.

Imports System
Imports System.Data
Imports System.Math
Imports Microsoft.SqlServer.Dts.Runtime
Imports System.ComponentModel
Imports System.Diagnostics

<System.AddIn.AddIn("ScriptMain", Version:="1.0", Publisher:="", Description:="")> _
<System.CLSCompliantAttribute(False)> Partial Public Class ScriptMain
Inherits Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase

Enum ScriptResults
    Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success
    Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
End Enum
Protected Sub SaveFile(ByVal url As String, ByVal localpath As String)
    Dim loRequest As System.Net.HttpWebRequest
    Dim loResponse As System.Net.HttpWebResponse
    Dim loResponseStream As System.IO.Stream
    Dim loFileStream As New System.IO.FileStream(localpath, System.IO.FileMode.Create, System.IO.FileAccess.Write)
    Dim laBytes(256) As Byte
    Dim liCount As Integer = 1
    Try

        loRequest = CType(System.Net.WebRequest.Create(url), System.Net.HttpWebRequest)
        loRequest.Credentials = System.Net.CredentialCache.DefaultCredentials
        loRequest.ImpersonationLevel = Security.Principal.TokenImpersonationLevel.Impersonation 
        loRequest.Timeout = 600000
        loRequest.Method = "GET"
        loResponse = CType(loRequest.GetResponse, System.Net.HttpWebResponse)
        loResponseStream = loResponse.GetResponseStream
        Do While liCount > 0
            liCount = loResponseStream.Read(laBytes, 0, 256)
            loFileStream.Write(laBytes, 0, liCount)
        Loop
        loFileStream.Flush()
        loFileStream.Close()
    Catch ex As Exception
    End Try
    System.Threading.Thread.Sleep(2000) 
End Sub

Public Sub Main()
    Dim strUrl, strUrlSP, strDestination As String

    --New destination for monthly
    strDestination = Dts.Variables("varDestinationPathSP").Value.ToString + "\" + Dts.Variables("varDepartmentName").Value.ToString + "\Monthly\" + Dts.Variables("varCrmReportTitles").Value.ToString + " " + Format(Now, "yyyyMM") + ".pdf"

    --New Url for Monthly reports.
    strUrl = "http://server/ReportServer?/Scheduled+Reporting/" + Dts.Variables("varCrmReportTitles").Value.ToString + "&Department=" + Dts.Variables("varDepartmentCode").Value.ToString + "&ContactFromDate=" + Format(Dts.Variables("varDatPreviousMonthStart").Value, "dd/MMM/yyyy").ToString + "&ContactToDate=" + Format(Dts.Variables("varDatPreviousMonthEnd").Value, "dd/MMM/yyyy").ToString + "+23:59:59&rs:Command=Render&rs:Format=PDF"
    strUrlSP = "http://intranet/ProjectBusinessSystems/ContactManagement/DocumentLibrary/Forms/AllItems.aspx?RootFolder=/ProjectBusinessSystems/ContactManagement/DocumentLibrary/Scheduled+Reports/" + Dts.Variables("varDepartmentName").Value.ToString + "/Monthly"

    strUrl = fnPadSpaces(strUrl)
    strUrlSP = fnPadSpaces(strUrlSP)

    --Set up the file path so the next step can copy to local drive (Testing purposes only)
    Dts.Variables("varFullReportPathToCopy").Value = strDestination
    Dts.Variables("varDestinationURL").Value = strUrlSP

    SaveFile(strUrl, strDestination)
    Dts.TaskResult = ScriptResults.Success

End Sub

Public Function fnPadSpaces(ByVal StringToEncode As String, Optional ByVal UsePlusRatherThanHexForSpace As Boolean = True) As String

    Dim TempAns As String
    Dim CurChr As Integer
    CurChr = 1
    TempAns = ""
    Do Until CurChr - 1 = Len(StringToEncode)
        Select Case Asc(Mid(StringToEncode, CurChr, 1))
            Case 32 -- Replace Spaces
                If UsePlusRatherThanHexForSpace = True Then
                    TempAns = TempAns & "+"
                Else
                    TempAns = TempAns & "%" & Hex(32)
                End If
            Case Else -- Otherwise pass it through
                TempAns = TempAns & Mid(StringToEncode, CurChr, 1)
        End Select

        CurChr = CurChr + 1
    Loop

    fnPadSpaces = TempAns
End Function
End Class 
```

当它生成 PDF 但未能将其写入共享点文件夹时，它在 SaveFile(strUrl, strDestination) 行上失败。基础设施人员向我保证，权限已设置为允许运行 SSIS 作业的帐户写入文件夹，并且当我在开发盒上的 Vis Studio 中运行该作业时，它一直有效。

varDestinationPath 就像：

\\sharepoint\ProjectBusinessSystems\ContactManagement\DocumentLibrary\Some Reports

其中 sharepoint 是服务器名称，而不是别名。

来自日志文件查看器的实际（非常详细的）错误消息如下所示：

```
Date        06/06/2012 13:52:30
Log     Job History (Scheduled Reports MONTHLY)

Step ID     1
Server      DevServer
Job Name        Scheduled Reports MONTHLY
Step Name       Run Package
Duration        00:00:04
Sql Severity        0
Sql Message ID      0
Operator Emailed        
Operator Net sent       
Operator Paged      
Retries Attempted       0

Message
Executed as user: WinFarm\crmreporter. Microsoft (R) SQL Server Execute Package Utility     Version 10.50.2500.0 for 64-bit  Copyright (C) Microsoft Corporation 2010\. All rights reserved.    Started:  13:52:31  Error: 2012-06-06 13:52:34.46     Code: 0x00000001     Source: Script Task - Render Report      Description: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.IO.IOException: The network name cannot be found.       at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)     at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)     at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)     at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)     at ScriptTask_f689e2ad4d3f481a87e3678e2d746c39.vbproj.ScriptMain.SaveFile(String url, String localpath)     at ScriptTask_f689e2ad4d3f481a87e3678e2d746c39.vbproj.ScriptMain.Main()     --- End of inner exception stack trace ---     at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)     at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)     at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)     at System.RuntimeType.InvokeMember(String name, BindingFlags bindingFlags, Binder binder, Object target, Object[] providedArgs, ParameterModifier[] modifiers, CultureInfo culture, String[] namedParams)     at Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTATaskScriptingEngine.ExecuteScript()  End Error  DTExec: The package execution returned DTSER_FAILURE (1).  Started:  13:52:31  Finished: 13:52:34  Elapsed:  3.183 seconds.  The package execution failed.  The step failed. 
```

任何想法我做错了什么或我应该尝试什么？如果我需要提供更多信息，请询问，我会回复。我确信脚本 99% 已完成，但在我认为的服务器上的某些凭据/权限问题上失败了。：/

更新：我可以确认代码将写入本地区域 (C:\Temp)，并且它还将写入网络共享上的文件夹（\someserver\some folder with space in\etc），因此问题在某种程度上转移到写入共享点文件夹。我们在本机模式下运行 SSRS，所以有没有人知道从通过代理运行的 SQL Server 代理作业写入共享点文件夹时可能导致“找不到网络路径”错误的原因？

还尝试通过文件系统任务移动文件，但即使这样也失败了。:( 任何想法可能是什么问题？

撞。可能在这里回答我自己的问题，但经过一些调查，我们发现查看 Sharepoint 的 Win2008 服务器没有运行 WebClient 服务。这意味着未安装 WebDAV，因此它无法将共享点库“视为”网络路径（或将驱动器映射到它）.. 将安装这些组件并报告回来。但是，如果有人对此有更多信息，将不胜感激！分分钟有点像迷宫里的盲人。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:03:48.613

您知道，同样交付到 SharePoint，SSRS 必须配置为 SharePoint 集成模式。这与“标准”配置完全相反。

但这甚至不是重点。当我阅读您的方案时，我想到了订阅，然后您说它们不是一种选择。为什么？但更糟糕的是，您基本上想出了一个实现订阅功能的实现。您及时运行报告并将其保存到文件夹中。我一直这样做，订阅。

好的，我真的不知道你的全部情况，但这里有两件事非常重要：

1 - 用户可以处理非实时数据多长时间？我的意思是，你不期望这么大的报道（至少你让它们在你的描述中听起来真的很大）是“活的”。我很确定您可以将它们缓存几个小时。您的第一个用户会遇到延迟，但下一个用户将受益于之前的执行（只要他们具有相同的参数）

2 - 您可以创建订阅以预加载缓存。[我建议您从此处](http://msdn.microsoft.com/en-us/library/ms155927%28v=sql.90%29.aspx)阅读该`Preloading the Cache`段落 如果您要缓存参数化报表的多个实例，其中不同的参数值用于生成不同的报表实例，此功能特别有用。（好像你的情况）

# php - 密码类和 mcrypt_create_iv 有时很慢

> ID：10916221
> 
> 赞同：11
> 
> 时间：2012-06-06T14:24:54.047
> 
> 标签：php, mcrypt, encryption

我的密码课程有问题。有时它非常快。但有时它很慢。我使用的代码如下

```
class Cipher {
    private $securekey, $iv;
    function __construct() {
        $this->securekey = hash('sha256','51(^8k"12cJ[6&cvo3H/!2s02Uh46vuT4l7sc7a@cZ27Q',TRUE);
        $this->iv = mcrypt_create_iv(32);
    }
    function encrypt($input) {
        return base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $this->securekey, $input, MCRYPT_MODE_ECB));
    }
    function decrypt($input) {
        return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $this->securekey, base64_decode($input), MCRYPT_MODE_ECB));
    }
    function storeIV() {
        return $this->iv;
    }
} 
```

有什么建议可以说明为什么有时会变慢以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-06T16:00:23.000

您是否尝试过三个不同的第二个参数[`mcrypt_create_iv()`](http://us2.php.net/mcrypt_create_iv "mcrypt_create_iv 的文档")：（`MCRYPT_RAND`系统随机数生成器）、`MCRYPT_DEV_RANDOM`（从 /dev/random`MCRYPT_DEV_URANDOM`读取数据）和（从 /dev/urandom 读取数据）？它们是否提供不同的一致速度？我想知道是不是因为 /dev/random （默认随机源）用完了收集的熵；该功能将在执行时阻塞。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-02T02:47:37.550

创建 IV 时使用 MCRYPT_DEV_URANDOM。它不太安全，但如果熵太低也不会阻塞。MCRYPT_DEV_RANDOM 将等到获得足够的熵以确保安全。

```
// PHP < 5.6
$this->iv = mcrypt_create_iv(32, MCRYPT_DEV_URANDOM); 
```

但在 PHP 的更新版本中，默认值已更改，您的原始代码应该可以工作。

```
// PHP >= 5.6
$this->iv = mcrypt_create_iv(32);   // MCRYPT_DEV_URANDOM implied 
```

[PHP 文档：mcrypt_create_iv](http://php.net/manual/en/function.mcrypt-create-iv.php) *（注意 $source 参数）*：

> 请注意，此参数的默认值是 PHP 5.6.0 之前的 MCRYPT_DEV_RANDOM。

并来自[Ubuntu 手册](http://manpages.ubuntu.com/manpages/xenial/en/man4/random.4.html)：

> 如果您不确定应该使用 /dev/random 还是 /dev/urandom，那么您可能想要使用后者。作为一般规则，/dev/urandom 应该用于除了长期存在的 GPG/SSL/SSH 密钥之外的所有内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-23T22:19:24.110

```
class Cipher {
    private $securekey, $iv;
    function __construct() {
        $this->securekey = hash('sha256','51(^8k"12cJ[6&cvo3H/!2s02Uh46vuT4l7sc7a@cZ27Q',TRUE);
        $this->iv = isset($_SESSION['sifrem'])?$_SESSION['sifrem']:mcrypt_create_iv(34);
        $_SESSION['sifrem']=$this->iv;
    }
    function encrypt($input) {
        return base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $this->securekey, $input, MCRYPT_MODE_ECB));
    }
    function decrypt($input) {
        return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $this->securekey, base64_decode($input), MCRYPT_MODE_ECB));
    }
    function storeIV() {
        return $this->iv;
    }
} 
```

# sql-server-2008 - 在链接表中查找相关行

> ID：10916222
> 
> 赞同：0
> 
> 时间：2012-06-06T14:24:54.937
> 
> 标签：sql-server-2008, relational-database

我的问题域是广告，为此，我有一个数据库，其中包含一个名为`ADVERT`. 广告可以具有方面（即准分类描述性术语）。因此，有一个`FACET`定义方面的`FACETTERM`表和一个包含每个方面的值的表。 `ADVERTFACETTERMASSIGNMENT`是链接表，它说明了哪些方面术语值分配给了哪个广告。

因此，您可能有一个汽车广告，其“制造”方面的值为“本田”，“位置”方面的值为“苏塞克斯”。因此，如果 advert 是 advert `{PK = 14}`，而 Honda 是 facet-term`{PK = 1}`而 Sussex 是 facet-term `{PK = 2}`，那么您希望在`ADVERTFACETTERMASSIGNMENT { AdvertId, FacetTermId }: 14, 1`and中行`14, 2`。

鉴于这种安排，我如何才能找到所有**其他**针对苏塞克斯本田的广告？换句话说，我如何找到一组与`ADVERTFACETTERMASSIGNMENT`给定广告的表中的行匹配但不是来自该广告的行？

我正在使用 SQL Server 2008。我尝试使用 IN 子句，但这会返回部分匹配项，即苏塞克斯以外的所有本田汽车以及苏塞克斯的所有非本田汽车等。

为了重申我的要求，我需要找到所有行，`ADVERTFACETTERMASSIGNMENT`其中这些行至少包含与另一个给定广告相同的 facet-term id。它是否具有更多方面术语并不重要，只要它至少具有与所选、比较器、广告完全相同的方面术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:13:21.007

这基本上是一个 EAV - 实体、属性、值模型，具有固定的值选择。

```
WITH FLATTENED AS (
    SELECT a.ADVERT_ID, ft.FACETTERM_ID
    FROM ADVERT a
    INNER JOIN ADVERTFACETTERMASSIGNMENT afta
        ON afto.ADVERT_ID = a.ADVERT_ID
    INNER JOIN FACETTERM ft
        ON ft.FACETTERM_ID = afta.FACETTERM_ID
    INNER JOIN FACET f
        ON f.FACET_ID = ft.FACET_ID
)
SELECT rhs.ADVERT_ID, COUNT(*)
FROM FLATTENED lhs
INNER JOIN FLATTENED rhs
    ON lhs.ADVERT_ID = @SOME_ID
    AND rhs.ADVERT_ID <> lhs.ADVERT_ID
    AND rhs.FACETTERM_ID = lhs.FACETTERM_ID
GROUP BY rhs.ADVERT_ID
HAVING COUNT(*) = (SELECT COUNT(*) FROM FLATTENED WHERE ADVERT_ID = @SOME_ID) 
```

这里的技术是任何两个广告之间的内部连接中匹配的方面的数量必须等于左侧对象广告的方面的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:13:48.077

一种方法是在 facettermid 上将 advertfacettermassignment 表内部连接到其自身，并按 advertid 分组，以计算广告之间匹配方面的数量。

然后，您可以将其与第一个广告中的构面总数进行比较，如果匹配数相同，则它至少具有与所选比较器完全相同的构面术语。

在 SQL SERVER 2008 中，您可以使用 CTE 来简化此操作。像这样：

```
;WITH m AS
    (SELECT advertid,candidateid,COUNT(*) as matchingfacets FROM (
        SELECT a.advertid,b.advertid as candidateid FROM advertfacettermassignment a 
        INNER JOIN advertfacettermassignment b ON a.facettermid=b.facettermid) sub
    GROUP BY advertid,candidateid)
,t AS
    (SELECT advertid,COUNT(*) as TotalFacets FROM advertfacettermassignment GROUP BY advertid)
SELECT 
    totalfacets.advertid,
    matchingfacets.candidateid,
    t.totalfacets,
    m.matchingFacets
FROM m INNER JOIN t
ON m.advertid=t.advertid
WHERE matchingfacets=totalfacets 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:35:18.490

好的，其中 ADVERTFACETTERMASSIGNMENT 是 {AdvertId, FacetTermId} 用于两个词搜索...

```
select fta1.AdvertID 
from ADVERTFACETTERMASSIGNMENT fta1
join ADVERTFACETTERMASSIGNMENT fta2 on fta1.AdvertID = fta2.AdvertID
where fta1.FacetTermId = @searchFacet1 and fta2.FacetTermID = @searchFacet2
and fta1.AdvertID <> @searchAdvertId 
```

工作示例的一般答案：

```
declare @AdvertFacetTermAssignment table (AdvertId int, FacetTermId int)

insert into @AdvertFacetTermAssignment values
(1,10), (1,11), (2,10), (3,11), (4,10), (4,11), (5,10), (5,11), (5,12), (6,10), (6,12), (6,13), (7, 10), (7, 11), (8, 12), (9,10), (9,11), (9,12), (10, 10), (10,12)

declare @searchAdvertId int = 1
declare @targetMatch int = (select COUNT(*) from @AdvertFacetTermAssignment where AdvertId = @searchAdvertId)

select aft2.AdvertId from @AdvertFacetTermAssignment aft1 
join @AdvertFacetTermAssignment aft2
on aft1.FacetTermId = aft2.FacetTermId and aft1.AdvertId <> aft2.AdvertId
where aft1.AdvertId = @searchAdvertId
group by aft2.AdvertId 
having COUNT(*) = @targetMatch 
```

结果 = 4,5,7,9

最后一个不是所要求的，而是抓取所有相似的东西（一些匹配的方面）并按相似程度排序。
（所有比赛一视同仁）

```
 select aft2.AdvertId, COUNT(aft1.AdvertId) as matches, ABS(COUNT(*)-@targetMatch) as nonMatches 
 from @AdvertFacetTermAssignment aft1
 right outer join @AdvertFacetTermAssignment aft2
 on aft2.FacetTermId = aft1.FacetTermId 
    and aft1.AdvertId = @searchAdvertId
    and aft2.AdvertId <> @searchAdvertId
 group by aft2.AdvertId 
 having COUNT(aft1.AdvertId) > 0
 order by COUNT(aft1.AdvertId) DESC, ABS(COUNT(*)-@targetMatch) ASC 
```

结果：

```
 AdvertId matches nonMatches
 4        2       0
 7        2       0
 9        2       1
 5        2       1
 10       1       0
 6        1       1
 2        1       1
 3        1       1 
```

（顺便说一句，我是从威斯康星州苏塞克斯发布的）

# c++ - C++如何在代码中添加环境变量？

> ID：10916229
> 
> 赞同：1
> 
> 时间：2012-06-06T14:25:23.013
> 
> 标签：c++, variables, environment

我想在代码中添加一个环境变量并给它一个值我怎么能做这样的事情你们能给我一个例子吗

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:27:35.717

你可以用`putenv`这个。

[http://www.cprogramming.com/fod/putenv.html](http://www.cprogramming.com/fod/putenv.html)

如果你在 Windows 上，你可以使用[`SetEnvironmentVariable`](http://msdn.microsoft.com/en-us/library/ms686206.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:29:41.643

看看`getenv()`和`setenv()`; 对于这样的前任：

```
char *shell;

/* Get the path of the current shell to start it later */
shell = getenv("SHELL");
if (shell == NULL) {
    fprintf(stderr, "Error eding SHELL env. var.\n");
    return 1;
}       

/* Overwrite env. var. PATH */
if (setenv("PATH", "/usr/bin", 1) < 0) {
    fprintf(stderr, "Error setting env. var.\n");
    return 1;
} 
```

# php - PHP curl：CURLOPT_URL、CURLOPT_POST 和 CURLOPT_POSTFIELDS

> ID：10916233
> 
> 赞同：4
> 
> 时间：2012-06-06T14:25:31.083
> 
> 标签：php, post, curl, get

如果我有一个如下所示的 URL：

```
$url = 'http://domain.com/?foo=bar'; 
```

然后执行 curl 如下：

```
$resource = curl_init();
curl_setopt($resource, CURLOPT_URL, $url);
curl_setopt($resource, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($resource);
curl_close($resource); 
```

我了解我通过 GET（默认）提出此请求。

现在，如果我在同一场景中设置以下选项：

```
curl_setopt($resource, CURLOPT_POST, 1); 
```

我知道它使用 POST 而不是 GET，但它是否使用 POST`foo`的值`bar`？或者正确的方法是：

```
$url = 'http://domain.com/';
$post = 'foo=bar';
$resource = curl_init();
curl_setopt($resource, CURLOPT_URL, $url);
curl_setopt($resource, CURLOPT_POST, 1);
curl_setopt($resource, CURLOPT_POSTFIELDS, $post);
curl_setopt($resource, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($resource);
curl_close($resource); 
```

如果我这样做会发生什么（即在 URL 中并通过 CURLOPT_POSTFIELDS 提交值）：

```
$url = 'http://domain.com/?foo=bar';
$post = 'foo=bar';
$resource = curl_init();
curl_setopt($resource, CURLOPT_URL, $url);
curl_setopt($resource, CURLOPT_POST, 1);
curl_setopt($resource, CURLOPT_POSTFIELDS, $post);
curl_setopt($resource, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($resource);
curl_close($resource); 
```

在那种情况下如何提交数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:29:40.170

POST 和 GET 之间的区别在于服务器检索数据的方式。当您将 CURLOPT_POST 设置为 true 时，服务器通常会通过 CURLOPT_POSTFIELDS 值（即 HTTP 正文中的参数）接收参数，并且可能会忽略 URL 字符串中发送的参数 - 但这实际上取决于各个服务器。

# window - 如何从 SmartGWT 窗口取消关闭事件？

> ID：10916238
> 
> 赞同：2
> 
> 时间：2012-06-06T14:26:04.953
> 
> 标签：window, smartgwt

如何从 com.smartgwt.client.widgets.Window 取消关闭事件？我需要用户确认关闭窗口，我看到类 com.smartgwt.client.widgets.tab.events.TabClos​​eClickEvent 有一个取消方法来停止操作，我需要相同的 com.smartgwt.client.widgets .events.CloseClickHandler。我如何实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:32:14.190

```
public HandlerRegistration addCloseClickHandler(CloseClickHandler handler) 
```

处理单击此窗口的关闭按钮。默认实现隐藏窗口并返回 false 以取消冒泡。如果您希望执行其他操作，请覆盖此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T09:14:25.600

在您的窗口对象中

```
 myWindowObject.addCloseClickHandler(new CloseClickHandler() {  
            public void onCloseClick(CloseClickEvent event) {  

                    //Do whatever

                    if(IHaveTOCancel){
                            event.cancel();
                    }
                }  
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-18T14:10:57.880

我发现如果您不立即取消事件（因为它正在等待用户输入），那么窗口无论如何都会关闭。如果您需要等待用户输入，这是我发现的有效方法。

```
window.addCloseClickHandler(new CloseClickHandler() {
        @Override
        public void onCloseClick(CloseClickEvent event) {
            event.cancel();
            StringBuilder b = new StringBuilder();
            b.append("<BR>");
            b.append("Are you sure you want to close?");
            SC.ask("Close", b.toString(), new BooleanCallback() {
                @Override
                public void execute(Boolean value) {
                    if (value) {
                        window.close();
                    } 
                }
            });
        }
    }); 
```

# ios - iOS中的水滴动画

> ID：10916245
> 
> 赞同：1
> 
> 时间：2012-06-06T14:26:52.427
> 
> 标签：ios, animation, core-animation

我有一个需要几个动画的项目，想知道是否有人能指出我正确的方向。这些都是：

1）从各种滴管中滴下的一滴水。

2）表面上的水滴，具有一种自上而下的视图，随着加速度计的变化而移动。

我相当精通核心动画。我可以开始探索任何高层次的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:51:08.130

我建议您尝试为 CAShapeLayer 的路径设置动画。对于第一个例子，你可以让你的水滴变大，在它离开滴管末端之前变长。您当然可以通过图像和巧妙地使用变换（在一个方向上缩放以使其更薄等）获得相同的效果。第二个示例可能最好使用形状层来完成，因为如果水滴应该具有不规则的形状。如果它只是一个圆圈，那么你可以用其他方式来做。真正的问题是您希望 drop 的外观和行为如何。画图不是难事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:55:53.480

您可能会发现这篇关于 Cocoanetics 的最新帖子很有用：http: [//www.cocoanetics.com/2012/06/lets-bounce/](http://www.cocoanetics.com/2012/06/lets-bounce/)

它讨论了为反弹而不是下降设置动画，但我相信其中讨论的方法也适用于您的情况。

# javascript - Flowplayer JS API 无法工作，因为 Flowplayer 没有“加载”？

> ID：10916254
> 
> 赞同：0
> 
> 时间：2012-06-06T14:27:29.743
> 
> 标签：javascript, jquery, api, flowplayer

我有几个使用 Flowplayer 和 jQuery 在网页上自动播放的视频，如下所示：

```
$('.video').each(function (k, obj) {
  $(obj).flowplayer(...)
}) 
```

他们正在流式传输视频并开始自动播放。

稍后我想使用[Javascript API](http://flowplayer.org/documentation/api/index.html)与播放器进行交互。`$f()`尽管返回了 Flowplayer 对象，但它不起作用：

```
$f('video1') // -> {_api: function ...} 
```

我刚刚了解到您必须先“加载”播放器，但这无济于事：

```
$f('video1').isLoaded() // -> false
$f('video1').load(function () { console.log('video loaded') })
$f('video1').isLoaded() // -> false 
```

奇怪的是，当我调用`load()`视频闪烁到黑色然后再次开始播放时，加载回调函数没有触发。

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:06:09.017

检查你的论点。load() api方法如下：

```
load([video],[callback]) 
```

尝试这样的事情：

```
load('path_to_your_video', function(){ ... 
```

希望修复它！

# xslt - 在 Linux 上使用 Saxon.net 和 Mono 2.10.8？

> ID：10916255
> 
> 赞同：0
> 
> 时间：2012-06-06T14:27:32.463
> 
> 标签：xslt, mono, saxon

我在 Processor() 构造函数中尝试在 Linux 上将 Saxon.NET 与 Mono 2.10.8 一起使用时遇到此异常：

```
[eric@farm228 MetaTemplateGenerator]$ mono bin/Debug/MetaTemplateGenerator.exe simple.xml

Unhandled Exception: System.TypeInitializationException: An exception was thrown by the type initializer for net.sf.saxon.Configuration ---> System.TypeLoadException: A type load exception has occurred.
  at java.lang.Class.desiredAssertionStatus () [0x00000] in <filename unknown>:0
  at net.sf.saxon.Configuration..cctor () [0x00000] in <filename unknown>:0
  --- End of inner exception stack trace ---
  at Saxon.Api.Processor..ctor () [0x00000] in <filename unknown>:0
  at MetaTemplateGenerator.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: An exception was thrown by the type initializer for net.sf.saxon.Configuration ---> System.TypeLoadException: A type load exception has occurred.
  at java.lang.Class.desiredAssertionStatus () [0x00000] in <filename unknown>:0
  at net.sf.saxon.Configuration..cctor () [0x00000] in <filename unknown>:0
  --- End of inner exception stack trace ---
  at Saxon.Api.Processor..ctor () [0x00000] in <filename unknown>:0
  at MetaTemplateGenerator.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0
[eric@farm228 MetaTemplateGenerator]$ which mono
/tools/linux/mono-2.10.8/bin/mono 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:29:36.443

[https://dev.saxonica.com/community/boards/3/topics/5417?r=5424#message-5424](https://dev.saxonica.com/community/boards/3/topics/5417?r=5424#message-5424)

# salesforce - SalesForce 出站消息模式 wsdl

> ID：10916256
> 
> 赞同：1
> 
> 时间：2012-06-06T14:27:33.473
> 
> 标签：salesforce

我们正在为客户构建一个 POC 项目，我们应该构建一个侦听器以接收来自 SalesForce 的通知，我们有一些示例，通过比较从 SalesForce 谷歌搜索的架构（http://www.salesforce.com/us/developer /docs/api/Content/sforce_api_om_outboundmessaging_wsdl.htm）我有一个粗略的想法。

但是我找不到完整的 WSDL 定义，谁能帮我指出一个下载这个 WSDL 的位置，而不是我自己从头开始构建它？非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T16:00:12.347

WSDL 取决于出站消息配置，您需要创建工作流出站消息配置，然后您可以通过 Endpoint WSDL 字段下载该出站消息设置的 WSDL。

![出站消息详细信息](../Images/fd20c52819cb215858571aac14ebf5ad.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T15:38:27.697

如果您对 Salesforce 组织具有管理访问权限，则可以从 API WSDL 页面导出 WSDL。可从用户名 > 设置 > 开发 > API 访问。

有用于不同目的的不同 API WSDL 文件，因此请选择适合您的文件。如果您需要特定于客户的定制，那么您将需要从他们的组织中导出 WSDL。

![Salesforce API WSDL 页面](../Images/4f39c21b70eed2f88b5d3fddc02f4f21.png)

如果您只需要一个标准的 Salesforce WSDL，您可以在 salesforce 上注册一个免费的[开发人员](http://developer.force.com/)帐户以访问此页面。

# c# - .net 4.0 线程池异常

> ID：10916259
> 
> 赞同：2
> 
> 时间：2012-06-06T14:27:42.950
> 
> 标签：c#, exception, threadpool, queueuserworkitem

下面的代码在.net 4.0编译时抛出异常，而在.net 2.0编译时，没关系，有人遇到我吗？请帮忙（我没有在回调函数中使用DateTime）。</p>

```
public void ProcessPriceUpdate()
{
    Interlocked.Increment(ref this.counts);

    lock (contractLock)
    {
        ThreadPool.QueueUserWorkItem(priceCallback, null);
    }
}

>System.ArgumentOutOfRangeException was unhandled
>Message=Value to add was out of range.
>Parameter name: value
>Source=mscorlib
>ParamName=value
>StackTrace:
>at System.DateTime.Add(Double value, Int32 scale)
>at System.Threading.PlatformHelper.get_ProcessorCount()
>at System.Threading.SpinWait.SpinOnce()
>at System.Threading.ThreadPoolWorkQueue.QueueSegment.TryDequeue(IThreadPoolWorkItem& node)
>at System.Threading.ThreadPoolWorkQueue.Dequeue(ThreadPoolWorkQueueThreadLocals tl, IThreadPoolWorkItem& callback, Boolean& missedSteal)
>at System.Threading.ThreadPoolWorkQueue.Dispatch()
>at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()
>InnerException: 
```

# java - 使用 Maven 插件提取使用 Spring 注入的参数

> ID：10916261
> 
> 赞同：1
> 
> 时间：2012-06-06T14:27:48.097
> 
> 标签：java, maven

我有一个应用程序，它使用 Spring 以各种组合连接一些 bean。以下是有助于说明应用程序相关部分的简化类。

```
class A {
   private List<B> fieldB;

    public void setFieldB(List<B> fieldB) { this.fieldB = fieldB; }
    public List<B> getFieldB() { return this.fieldB; }
}

class B {
    private String name;
    private String field1;
    private String field2;

    public void setName(String name) { this.name = name; }
    public void setField1(String value1) { this.field1 = value1; }
    public void setField2(String value2) { this.field2 = value2; }

    public String getName() { return this.name; }
    public String getField1() { return this.field1; }
    public String getField2() { return this.field2; }
} 
```

spring-context-file1.xml

```
<?xml ...>
<beans ...>
    <bean id="a" class="com.example.A">
        <property name="fieldB">
           <list> <ref bean="b1"/> <ref bean="b2"/> </list>
        </property>
    </bean>

    <bean id="b1" class="com.example.B">
        <property name="name">
           <value>b1</value>
        </property>
        <property name="field1">
           <value>fieldOneValueOne</value>
        </property>
        <property name="field2">
           <value>fieldOneValueTwo</value>
        </property>
    <bean>

    <bean id="b2" class="com.example.B">
        <property name="name">
           <value>b2</value>
        </property>
        <property name="field1">
           <value>fieldTwoValueOne</value>
        </property>
        <property name="field2">
           <value>fieldTwoValueTwo</value>
        </property>
    <bean>
</beans> 
```

鉴于上述情况，我想做的是在构建时提取以下信息：

```
spring-context-file1.cfg  
b1 => {fieldOneValueOne, fieldOneValueTwo}  
b2 => {fieldTwoValueOne, fieldTwoValueTwo} 
```

我选择开发一个 Maven 插件来完成这个必要的处理。基本上，插件将加载 Spring 上下文文件并使用 getBean("...") 方法来获取感兴趣的 bean。然而，我遇到了一个问题。为了从 bean 中提取信息，插件代码需要知道它正在操作什么类型的对象。这意味着插件代码需要针对主项目代码进行编译。这对我来说似乎是错误的。有没有人知道 Maven 插件提取此类信息的任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:11:36.400

我认为与其从 Spring 配置文件中提取信息，不如创建一个公共文件，Spring 上下文可以从中加载 bean 属性。然后，您可以在构建时非常轻松地解析此文件（希望无需编写自定义 Maven 插件——这将使您的构建变得非常复杂）。看看 Spring 3.1 中的新属性管理：http: [//blog.springsource.com/2011/02/15/spring-3-1-m1-unified-property-management/](http://blog.springsource.com/2011/02/15/spring-3-1-m1-unified-property-management/)

# iphone - 保存用相机拍摄或从相机胶卷中选择的图像时出现长时间延迟 - iPhone

> ID：10916265
> 
> 赞同：4
> 
> 时间：2012-06-06T14:28:09.553
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

我正在使用以下代码允许我的应用程序的用户拍摄/选择一张照片，然后将其保存到文档目录并设置为 UIImageView 的图像：

```
 -(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

        if (actionSheet.tag == 0){
            if (buttonIndex == 0) {
                NSLog(@"Take Picture Button Clicked");
                // Create image picker controller
                UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

                // Set source to the camera
                imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

                // Delegate is self
                imagePicker.delegate = self;

                // Show image picker
                [self presentModalViewController:imagePicker animated:YES];
            } 
            else if (buttonIndex == 1) {
                NSLog(@"Choose From Library Button Clicked");
                // Create image picker controller
                UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

                // Set source to the camera
                imagePicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;

                // Delegate is self
                imagePicker.delegate = self;

                // Show image picker
                [self presentModalViewController:imagePicker animated:YES];
            } 
            else if (buttonIndex == 2) {
                NSLog(@"Cancel Button Clicked");
            } 
        }
......

- (void)saveImage:(UIImage*)image:(NSString*)imageName 
{ 
    NSData *imageData = UIImagePNGRepresentation(image); //convert image into .png format.

    NSFileManager *fileManager = [NSFileManager defaultManager];//create instance of NSFileManager

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //create an array and store result of our search for the documents directory in it

    NSString *documentsDirectory = [paths objectAtIndex:0]; //create NSString object, that holds our exact path to the documents directory

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageName]]; //add our image to the path 

    [fileManager createFileAtPath:fullPath contents:imageData attributes:nil]; //finally save the path (image)

    receiptImageView1.image = [UIImage imageWithContentsOfFile:fullPath];
    self.receiptImage1 = fullPath;

    NSLog(@"image saved");
}

//Receive the image the user picks from the image picker controller
-(void)imagePickerController:(UIImagePickerController*)picker
didFinishPickingMediaWithInfo:(NSDictionary*)info {
    UIImage* image = [info objectForKey: UIImagePickerControllerOriginalImage];
    NSString* imageName = @"Receipt1Image1";
    [self saveImage:image :imageName];
} 
```

基本上我的问题是这段代码似乎执行得很慢，例如，当我从相机胶卷中选择一张图像时，它最终会保存并将我带回调用视图，但只是在很长一段时间后才执行。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T16:07:40.700

保存大图像（如 iPhone 4/4S 中的相机拍摄的图像）需要很长时间。如果您分析该过程，您会发现`UIImagePNGRepresentation()`生成 PNG 图像需要一段时间，但根据我的经验，主要瓶颈是将 1+ MB 图像写入磁盘。

除了使用 JPEG 压缩（我发现在我的基准测试中更快一点）或使用更快的第三方图像压缩例程之外，您几乎无法加快此过程。因此，如果您不想在发生这种情况时阻止您的用户界面，请在后台线程或队列上调度此保存过程。您可以执行以下操作：

```
-(void)imagePickerController:(UIImagePickerController*)picker
didFinishPickingMediaWithInfo:(NSDictionary*)info {

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage* image = [info objectForKey: UIImagePickerControllerOriginalImage];
        NSString* imageName = @"Receipt1Image1";
        [self saveImage:image :imageName];
    });
} 
```

但是，请注意这些 UIImage 中的每一个都会占用相当多的内存来保留，因此您可能希望使用调度信号量来防止多个此类图像保存操作同时发生。

此外，作为风格说明，定义一个 Objective-C 方法，如

```
- (void)saveImage:(UIImage*)image:(NSString*)imageName 
```

虽然允许，但非常不鼓励。为每个参数命名，如下所示：

```
- (void)saveImage:(UIImage*)image fileName:(NSString*)imageName 
```

它将使您的代码更具描述性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T23:03:00.933

我已经回答了一个[类似的问题](https://stackoverflow.com/a/13279514/257550)。为清楚起见，我将在此处复制它：

根据图像分辨率，`UIImagePNGRepresentation`确实可能会很慢，就像任何写入文件系统一样。

您应该*始终*在异步队列中执行这些类型的操作。即使在测试时性能对您的应用程序来说似乎足够好，*您仍然应该使用异步队列来执行它*——您永远不知道设备可能正在进行哪些其他进程，一旦您的应用程序在用户手中，这可能会减慢保存速度.

较新版本的 iOS 使用 Grand Central Dispatch (GCD) 可以非常轻松地进行异步保存。步骤是：

1.  创建一个`NSBlockOperation`保存图像的
2.  在块操作的完成块中，从磁盘读取图像并显示它。这里唯一需要注意的是，您必须使用主队列来显示图像：*所有 UI 操作都必须发生在主线程上*。
3.  将块操作添加到操作队列并观察它！

就是这样。这是代码：

```
// Create a block operation with our saves
NSBlockOperation* saveOp = [NSBlockOperation blockOperationWithBlock: ^{

   [UIImagePNGRepresentation(image) writeToFile:file atomically:YES];
   [UIImagePNGRepresentation(thumbImage) writeToFile:thumbfile atomically:YES];

}];

// Use the completion block to update our UI from the main queue
[saveOp setCompletionBlock:^{

   [[NSOperationQueue mainQueue] addOperationWithBlock:^{ 

      UIImage *image = [UIImage imageWithContentsOfFile:thumbfile];
      // TODO: Assign image to imageview

   }];
}];

// Kick off the operation, sit back, and relax. Go answer some stackoverflow
// questions or something.
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperation:saveOp]; 
```

一旦您对这种 Code Pattern 感到满意，您就会发现自己经常使用它。在生成大型数据集、长时间的加载操作等时，它非常有用。本质上，任何让你的 UI 至少滞后的操作都是此代码的良好候选者。请记住，当您不在主队列中时，您无法对 UI 做任何事情，其他一切都是小菜一碟。

# c# - ASP.Net 应用程序启用屏幕保护程序

> ID：10916266
> 
> 赞同：0
> 
> 时间：2012-06-06T14:28:10.670
> 
> 标签：c#, asp.net, windows-screensaver

我正在研究一个 asp.net 应用程序的安全组件。部分安全过程是在 10 分钟空闲时间后激活屏幕保护程序。

有没有办法使用网络应用程序激活屏幕保护程序？我搜索了 SO & GOOD 但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T14:40:59.293

“你拿错了”。这在多个层面上都是错误的。您正试图[通过 obscurity 来确保安全](http://en.wikipedia.org/wiki/Security_through_obscurity)，这必然会失败。

首先，您无法从您的网站控制它。Javascript 与否。客户端可能安装了 javascript 拦截器。

具有遵循组策略的屏幕保护程序的 Windows 计算机会嘲笑您的尝试。Mac怎么样？IOS？安卓？

正确的做法是通过超时用户会话并将用户重定向到注销页面来保护数据。

MSDN 代码示例站点上有一个示例可以帮助您入门：[警报用户会话过期 (AspNetAlertSessionExpire)](http://code.msdn.microsoft.com/AspNetAlertSessionExpire-c230a148)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:34:48.733

从网络应用程序？并不真地。Web 应用程序被浏览器沙盒化并限制对此类事物的访问。您可以编写一个 activeX 控件来执行此操作，但它只适用于 Windows IE 浏览器。

将用户从 Web 应用程序中注销会更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T14:36:15.083

试图像这样控制用户的 PC 是一个非常糟糕的主意，并且在大多数浏览器上是不可能的（想想它会为恶意代码打开的所有大门）。

您最好在一段时间后将用户从*网站*中注销，并使用一些 javascript 您可以切换/清除页面，以便不再显示私人信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T14:31:33.240

通过 ASP.NET 是不可能的。但是，如果浏览器设置允许，您可以尝试使用脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T14:36:27.533

你不能这样做，但你可以制作自己的工具“屏幕保护程序”。只需使用 div 使屏幕变灰并让他们重新登录。但是，正如其他人所说，将他们踢出并让他们重新登录要容易得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-06T14:55:03.540

这是一个空闲超时 jQuery 插件，用于跟踪用户是否在网页上执行了任何操作（单击、滚动等）。在预定的时间量（在您的情况下为 10 分钟）后，您将用户注销。

我在我的应用程序中非常成功地使用了它。

链接：[idleTimeout - 带有提示的 jQuery 空闲会话自动超时](http://philpalmieri.com/2009/09/jquery-session-auto-timeout-with-prompt/)

# .net - Google DocumentsList API - 以编程方式设置描述

> ID：10916267
> 
> 赞同：0
> 
> 时间：2012-06-06T14:28:11.260
> 
> 标签：.net, google-docs-api, google-data-api

# 背景

我目前正在使用 Google Drive/Docs 实现一个应用程序。使用 Google Data APIs 库的最新[.NET 库](http://code.google.com/p/google-gdata/)我正在上传图像，利用 Google Drive 作为图像库。

# 问题

我希望能够设置与 Google Drive 中的每个项目关联的描述字段。上传工作正常，我无法让描述字段工作。

[我可以看到这篇文章](https://stackoverflow.com/questions/10567582/how-can-i-get-a-google-documents-description)中提到的修改已集成到最新的库中，因此`DocumentEntry`该类现在有了一个`Description`成员。

将此新成员设置为文本`(400) Bad Request`时，在将文件插入 Google Drive 时会引发错误。完整的错误是：

```
<errors xmlns='http://schemas.google.com/g/2005'>
    <error>
        <domain>GData</domain>
        <code>ParseException</code>
        <internalReason>[Line 3, Column 42, element docs:description] Unknown attribute: 'value' </internalReason>
    </error>
    <error>
        <domain>GData</domain>
        <code>ParseException</code>
        <internalReason>Unknown attribute: 'value' </internalReason>
    </error>
</errors> 
```

我试过使用`.Summary`as well`.Content.Content`但没有结果。代码作为我想要实现的示例：

```
 DocumentEntry entry = new DocumentEntry();

 entry.Title.Text = "Test Upload";
 entry.Description = "Tag1, Tag2"; // Once I set this I get the error
 entry.Summary.Text = "Tag3, Tag 4"; // This doesn't do anything! 
```

# 问题

任何有关人们这样做或之前研究过的经验的帮助将不胜感激。

有没有人成功实现过这个功能？或者，是客户端无法控制的 Google API 的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:25:49.413

该`docs:description`元素不再接受其值作为属性：

```
<docs:description value="Tag1 Tag2" /> 
```

相反，该值必须作为元素的内容传递：

```
<docs:description>Tag1, Tag2</docs:description> 
```

.NET 库自 rev 起已修复。1196：

[http://code.google.com/p/google-gdata/source/detail?r=1196](http://code.google.com/p/google-gdata/source/detail?r=1196)

请检查最新的来源，然后重试。

# git - 无法使用 Bambo Remote Agent 克隆存储库

> ID：10916268
> 
> 赞同：6
> 
> 时间：2012-06-06T14:28:14.487
> 
> 标签：git, ssh, bamboo

我们正在尝试将 git 存储库中的源代码签出到 Bamboo 4.1 上的作业中，此作业必须在远程代理上执行。

我们正在使用 SSH(+keys) 连接存储库，经过几个配置步骤后，SSH auth 似乎没问题，但是当计划开始时，发生了意外错误：

> 触发手动构建时遇到错误：com.atlassian.bamboo.repository.RepositoryException: Cannot fetch 'ci@continuous:project.git/', branch 'refs/heads/master' to source directory '/opt/appserv/bamboo/bamboo -home/xml-data/build-dir/_git-repositories-cache/086d7d404e013877bd2550c6f022929bbbf6afa3'。命令 [/usr/bin/git, fetch, ssh://0c34fec7-78f8-40ca-acd8-66a7dd29260b@127.0.0.1:48729/project.git/, +refs/heads/master:refs/heads/master, - -update-head-ok, --progress, --verbose] 失败，代码为 128。工作目录为 [/opt/appserv/bamboo/bamboo-home/xml-data/build-dir/_git-repositories-cache/086d7d404e013877bd2550c6f022929bbbf6afa3 ]。标准错误：SSH 代理错误：验证远程会话失败标准输出：[ci@continuous:project.git/10.38.218.68:22] 验证远程会话失败致命：

根据此[链接](https://answers.atlassian.com/questions/55145/bamboo-git-integration-using-gatekeeper-merge-fails?page=1#55154)， ssh://0c34fec7-78f8-40ca-acd866a7dd29260b@127.0.0.1:48729/project.git/ 指向内部 Bamboo 代理，但由于某些原因无法获取数据

有任何想法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:54:51.130

SSH、Native Git 和 Bamboo 存在一个已知问题，其中代理地址：端口未添加到已知主机文件中。在 fetch 期间，进程挂在 ssh 提示符上：

[https://jira.atlassian.com/browse/BAM-11096](https://jira.atlassian.com/browse/BAM-11096)

我可以通过在没有提供端口的情况下将 localhost 地址添加到 .ssh/known_hosts 文件来解决此问题：

例子：

> 127.0.0.1 ssh-rsa XXXXB3NzaC1yc2EAAAADAQABBBBgQC699HzXHwr1H6OJeVlRo7h4r+3PY d0wNkqzl6EUAeU2iZjqFqQL2ZiNVqs2JrpTNadbgtXBNk9rhQIWajQZG9ZJG/OPxe+NOkbWQVev rcELsw5N2wxcJOWz+ey1tFv3VCtNCLUGgF7yIg0kZZVQ+HvAzLoMbiHs0haVmEjnLherSw==

上面引用的票证提供了您可以尝试的另一种解决方法。

# windows - Window 上的 Tomcat：无法从远程计算机连接

> ID：10916271
> 
> 赞同：0
> 
> 时间：2012-06-06T14:28:19.273
> 
> 标签：windows, apache, tomcat

我有一个 windows vista :( 我已经安装了 Tomcat 的机器。我更改了 server.xml 以便它连接到 80 而不是 8080。我可以通过以下任何一个访问本地服务器：

1.  本地主机
2.  127.0.0.1
3.  192.168.1.3

从同一路由器上的远程设备，我可以通过它的 IP ping 机器，但我无法连接到服务器。

在路由器中，我在 80 上设置了端口转发到 192.168.1.3

我已关闭 Windows 防火墙和 Windows Defender 以避免出现问题。没有其他防病毒软件。任何人都知道我可以尝试连接到这个东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:46:24.547

您可能需要在路由器上设置端口转发，以便任何进入端口 80 的流量都会自动转发到 192.168.1.3。您通常可以通过路由器配置控制台执行此操作。请参阅下面的帮助：

[http://portforward.com/routers.htm](http://portforward.com/routers.htm)

# c# - 如何从另一个文件中使用#define？

> ID：10916280
> 
> 赞同：9
> 
> 时间：2012-06-06T14:28:48.873
> 
> 标签：c#, c-preprocessor

例如：

**定义.cs**

```
#define FOO 
```

**form1.cs**

```
#if FOO 
  MessageBox.Show("foo is set!");
#else 
  MessageBox.Show("foo is not set!");
#endif 
```

**define.cs**包含在与**form1.cs**相同的项目中，但上述条件给出：`foo is not!`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T14:35:41.673

你不能，但你可以做的是将定义移动到项目配置中，以便项目中的所有文件都可以看到定义。

请参阅[如何在 C# 中全局定义常量（如 DEBUG）](https://stackoverflow.com/questions/436369/how-to-define-a-constant-globally-in-c-sharp-like-debug)中的说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:34:10.340

根据[这个 MSDN 页面](http://msdn.microsoft.com/en-US/library/yt3yck0x%28v=vs.80%29.aspx)，

> **用#define**创建的符号的范围是定义它的文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T14:37:49.300

在 C# 中，#define 的范围仅限于声明它的文件。
要定义在所有文件中可见的符号，一种方法是 Project->Properties->Build->Conditional Compilation Symbols 并在此处指定符号“FOO”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T14:34:01.790

你不能，用#define 创建的符号的范围是定义它的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T14:37:29.710

正如其他人所说，#define 仅限于单个文件。

但是，您可以定义作用于整个程序集的预处理器变量。为此，您只需进入项目设置的“构建”部分并将其放入“条件编译符号”部分。（这只是管理[/define 编译器开关](http://msdn.microsoft.com/en-us/library/0feaad6z%28v=vs.80%29.aspx)的一种更简单的方法。）这种方法还有一个额外的优势，即还允许您为不同的构建配置定义不同的符号集。

# php - Opencart重复的URL关键字

> ID：10916283
> 
> 赞同：2
> 
> 时间：2012-06-06T14:28:52.557
> 
> 标签：php, opencart

我将如何解决 Opencart 中两个类别/产品具有相同 URL 的问题？或者如果他们是一个已经这样做的模块？

例如：类别

```
Ladies -> Trousers (URL: ladies/trousers)
Mens -> Trousers (URL: mens/trousers) 
```

这破坏了 Opencart，因为我们有两个带有 URL = trousers? 的子类别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-08T14:15:34.227

我知道这是一个迟到的答案，但这是 OpenCarts 架构的一个根深蒂固的问题。

就我个人而言，我不是 vQmod 的粉丝，所以这里有一个（有些人称之为 hack）解决方案而不使用它。

`catalog/controller/common/seo_url.php`我已经看到添加自定义 seo url 的许多更改。此修复程序与此类修改兼容。

我还想补充一点，这绝不是世界上最复杂的解决方案，但它可以保证具有重复 seo url 条目的子类别可以正常工作。

查找`catalog/controller/common/seo_url.php`

```
if ($url[0] == 'category_id') {
    if (!isset($this->request->get['path'])) {
        $this->request->get['path'] = $url[1];
    } else {
        $this->request->get['path'] .= '_' . $url[1];
    }
} 
```

替换为以下内容

```
if ($url[0] == 'category_id') {
    $categories[$i] = $this->model_catalog_category->getCategory($url[1]);

    if (!isset($this->request->get['path'])) {
        $this->request->get['path'] = $categories[$i]['category_id'];
    } else {
        foreach ($query->rows as $row) {
            $url = explode('=', $row['query']);
            $category_id = $url[1];

            $category = $this->model_catalog_category->getCategory($category_id);

            if ($category['parent_id'] == $categories[$i - 1]['category_id']) {
                $this->request->get['path'] .= '_' . $category['category_id'];
            }
        }
    }
} 
```

将以下行添加到方法 index() 的顶部

```
$this->load->model('catalog/category'); 
```

找到线...

```
foreach ($parts as $part) {
    $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "url_alias WHERE keyword = '" . $this->db->escape($part) . "'"); 
```

并替换为以下内容

```
$categories = array();

for ($i = 0; $i < count($parts); $i++) {
    $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "url_alias WHERE keyword = '" . $this->db->escape($parts[$i]) . "'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:30:47.720

我为那个确切的场景开发了[这个 vqmod](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6210)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T07:15:03.970

我已经解决了这个问题我已经制作了一个 vqmode xml 文件

请参阅 opencart 为以下网址提供相同的结果

*   `http://mycart/mp3-players/iPod-Classic`
*   `http://mycart/mp3-players/some-child/iPod-Classic`
*   `http://mycart/some-parent/mp3-players/iPod-Classic`
*   `http://mycart/iPod-Classic`

为那个产品“iPod-Classic”做seo会很困难</p>

所以我用这个脚本写了一个“vqmod”脚本，你可以将用户重定向到一个特定且正确的页面

甚至用户输入了错误的网址

IE

```
http://mycart/mp3-players/dddfsdgf/sdf/sdf/iPod-Classic 
```

它会自动将其重定向到

```
http://mycart/mp3-players/iPod-Classic 
```

您只需要从“box”下载“controller_common_seo_url.xml”或

1.  在您打开的购物车中安装 vqmode
2.  在 vqmod/xml 中创建一个名为“controller_common_seo_url.xml”的 xml 文件
3.  打开 controller_common_seo_url.xml 并编写以下代码

```
 <modification>
            <id>public function index() add more functions</id>
            <version>1.0</version>
            <vqmver>2.1.5</vqmver>
            <author>http://www.bhardwajabhi.wordpress.com</author>
            <file name=”catalog/controller/common/seo_url.php”&gt;
                <operation>
                     <search position=”before”&gt;<![CDATA[ public function index() { ]]></search>
                                <add><![CDATA[

                public function get_seo_title($id, $type)
                {
                $query = $this->db->query("SELECT keyword FROM " . DB_PREFIX . "url_alias WHERE query = '". $type ."=" . (int)$id  . "'");    

                if($query->row)
                    return     $query->row['keyword'];
                    else
                    return     $id;
                }

            public function get_path_level($id)
                {
                $query = $this->db->query(“select `level` from ” . DB_PREFIX . “category_path where `category_id` = ‘”. $id. “‘ order by level desc LIMIT 1″);    

                    return     $query->row['level'];

                }    

            public function get_product_relative($parts, $product_id)
                {

                if (isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == ‘on’) || ($this->request->server['HTTPS'] == ’1′))) {

                     $this->data['base'] = $this->config->get(‘config_ssl’);

                } else {

                    $this->data['base'] = $this->config->get(‘config_url’);

                    }    

                $path         =      $this->get_seo_title($product_id, ‘product_id’);        

                $query = $this->db->query(“SELECT category_id FROM ” . DB_PREFIX . “product_to_category WHERE product_id = ‘” . (int)$product_id . “‘”);
                $i =0;

                    foreach($query->rows as $pro_cat):
                    $i++;
                    $sub_query = $this->db->query(“select `path_id` from ” . DB_PREFIX . “category_path where `category_id` = ‘”. $pro_cat['category_id']. “‘ order by level desc”);

                        foreach($sub_query->rows as $pro_sub_cat):
                        $path = $this->get_seo_title($pro_sub_cat['path_id'], ‘category_id’) . “/” . $path;
                        endforeach;

                        $path1 = ‘/’. $path;

                        $array1 = explode(‘/’, $path1);

                        $array2 = explode(‘/’, $this->request->get['_route_']);

                        $result = array_diff($array1, $array2);

                        $new_path[$i]['path'] = $path;
                        $new_path[$i]['count'] = count($result);

                        $path = $this->get_seo_title($product_id, ‘product_id’);      

                    endforeach;

                    $min = PHP_INT_MAX;
                    $max = 0;

                    foreach ($new_path as $i) {                
                        $min = min($min, $i['count']);
                        }

                foreach($new_path as $value):
                    if($value['count']==$min):
                        $final_path =  $value['path'];
                        break;
                    endif;
                endforeach;

                similar_text($this->request->get['_route_'], $final_path, $percent);
                if($percent<>100)
                    header (‘location:’ . $this->data['base'] .”. $final_path);    

            }
            ]]></add>

                </operation>
            </file>
            <file name=”catalog/controller/common/seo_url.php”&gt;
                        <operation info=”After ABC, add 123″&gt;
                                <search position=”after”&gt;<![CDATA[
                               $this->request->get['product_id'] = $url[1];
                                ]]></search>
                                <add><![CDATA[
                                /*Start url redirection*/
                                $this->get_product_relative($parts, $url[1]);
                    /*End Url Redirection*/
                                ]]></add>
                        </operation>

                </file>

        </modification> 
```

就是这样，现在当有人点击任何产品时，购物车将显示如下页面

```
http://www.yourSiteUrl/parent-category/child-category/product 
```

注意：您必须为每个类别、子类别和那里的产品提供 seo 标题，因为脚本搜索 seo 标题，如果 seo 标题不可用，那么它会给它 id 所以假设我们没有为子类别提供 seo-title 和vew它的产品然后网址会像

```
http://www.yourSiteurl/parent-category/56/product 
```

你可以在 [这里得到更多的细节](https://bhardwajabhi.wordpress.com/2013/06/26/duplicate-url-for-product-in-opencart/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T16:55:51.540

```
if ($url[0] == 'category_id') {
    $categories[$i] = $this->model_catalog_category->getCategory($url[1]);

    if (!isset($this->request->get['path'])) {
        $this->request->get['path'] = $categories[$i]['category_id'];
    } else {
        foreach ($query->rows as $row) {
            $url = explode('=', $row['query']);
            $category_id = $url[1];

            $category = $this->model_catalog_category->getCategory($category_id);

            if ($category['parent_id'] == $categories[$i - 1]['category_id']) {
                $this->request->get['path'] .= '_' . $category['category_id'];
            }
        }
    }
} 
```

如果它是 3 级类别，这将不起作用。我希望有人会有更好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-22T08:18:19.520

除了@Ian Brindley，您还应该编辑另外 2 个文件，以便您可以在管理面板中输入关键字：
`Admin/Controller/Catalog/category.php`

在方法中找到这几行代码`validateForm`

```
if (utf8_strlen($this->request->post['keyword']) > 0) {
    $this->load->model('catalog/url_alias');

    $url_alias_info = $this->model_catalog_url_alias->getUrlAlias($this->request->post['keyword']);

    if ($url_alias_info && isset($this->request->get['category_id']) && $url_alias_info['query'] != 'category_id=' . $this->request->get['category_id']) {
        $this->error['keyword'] = sprintf($this->language->get('error_keyword'));
    }

    if ($url_alias_info && !isset($this->request->get['category_id'])) {
        $this->error['keyword'] = sprintf($this->language->get('error_keyword'));
    }

    if ($this->error && !isset($this->error['warning'])) {
        $this->error['warning'] = $this->language->get('error_warning');
    }
} 
```

并将它们更改为：

```
if (utf8_strlen($this->request->post['keyword']) > 0) {
    $this->load->model('catalog/url_alias');

    $url_alias_info = $this->model_catalog_url_alias->getUrlAlias($this->request->post['keyword']);

    if ($url_alias_info && !isset($this->request->get['category_id'])) {
        $this->error['keyword'] = sprintf($this->language->get('error_keyword'));
    }

    if ($this->error && !isset($this->error['warning'])) {
        $this->error['warning'] = $this->language->get('error_warning');
    }
} 
```

这将消除 seo 关键字是否重复的检查。这样您就可以在管理面板中输入 seo 关键字*而*不是*phpmyadmin*

# php - 如何在php中加密/解密数据？

> ID：10916284
> 
> 赞同：118
> 
> 时间：2012-06-06T14:28:52.973
> 
> 标签：php, security, encryption, cryptography, encryption-symmetric

我目前是一名学生，正在学习 PHP，我正在尝试对 PHP 中的数据进行简单的加密/解密。我做了一些在线研究，其中一些非常令人困惑（至少对我而言）。

这是我正在尝试做的事情：

我有一个由这些字段组成的表**（用户 ID、Fname、Lname、Email、Password）**

我想要的是对所有字段进行加密然后解密（是否可以`sha256`用于加密/解密，如果没有任何加密算法）

我想学习的另一件事是如何创建一种`hash(sha256)`结合良好“盐”的单一方式。（基本上我只想简单地实现加密/解密，`hash(sha256)+salt)` 先生/女士，您的回答会很有帮助，非常感谢。谢谢++

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2012-06-08T08:00:35.483

# 前言

从您的表定义开始：

```
- UserID
- Fname
- Lname
- Email
- Password
- IV 
```

以下是更改：

1.  字段`Fname`,`Lname`和将使用[OpenSSL](http://php.net/openssl)`Email`提供的对称密码进行加密，
2.  该`IV`字段将存储用于加密的[初始化向量。](http://en.wikipedia.org/wiki/Initialization_vector)存储要求取决于所使用的密码和模式；稍后再详细介绍。
3.  该`Password`字段将使用*单向*密码散列进行散列，

# 加密

**密码和模式**

选择最佳加密密码和模式超出了此答案的范围，但最终选择会影响加密密钥和初始化向量的大小；对于这篇文章，我们将使用 AES-256-CBC，它具有 16 字节的固定块大小和 16、24 或 32 字节的密钥大小。

**加密密钥**

一个好的加密密钥是从可靠的随机数生成器生成的二进制 blob。建议使用以下示例 (>= 5.3)：

```
$key_size = 32; // 256 bits
$encryption_key = openssl_random_pseudo_bytes($key_size, $strong);
// $strong will be true if the key is crypto safe 
```

这可以执行一次或多次（如果您希望创建一个加密密钥链）。尽可能保持这些隐私。

**四**

初始化向量为加密增加了随机性，并且是 CBC 模式所必需的。理想情况下，这些值应该只使用一次（技术上每个加密密钥一次），因此对行的任何部分的更新都应该重新生成它。

提供了一个函数来帮助您生成 IV：

```
$iv_size = 16; // 128 bits
$iv = openssl_random_pseudo_bytes($iv_size, $strong); 
```

### 例子

让我们加密名称字段，使用前面的`$encryption_key`and `$iv`; 为此，我们必须将数据填充到块大小：

```
function pkcs7_pad($data, $size)
{
    $length = $size - strlen($data) % $size;
    return $data . str_repeat(chr($length), $length);
}

$name = 'Jack';
$enc_name = openssl_encrypt(
    pkcs7_pad($name, 16), // padded data
    'AES-256-CBC',        // cipher and mode
    $encryption_key,      // secret key
    0,                    // options (not used)
    $iv                   // initialisation vector
); 
```

### 存储要求

像 IV 一样，加密的输出是二进制的；可以通过使用指定的列类型（例如`BINARY`或）将这些值存储在数据库中`VARBINARY`。

与 IV 一样，输出值是二进制的；要将这些值存储在 MySQL 中，请考虑使用[`BINARY`or`VARBINARY`](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)列。如果这不是一个选项，您还可以使用[`base64_encode()`](http://php.net/base64_encode)or将二进制数据转换为文本表示[`bin2hex()`](http://php.net/bin2hex)，这样做需要多出 33% 到 100% 的存储空间。

# 解密

存储值的解密类似：

```
function pkcs7_unpad($data)
{
    return substr($data, 0, -ord($data[strlen($data) - 1]));
}

$row = $result->fetch(PDO::FETCH_ASSOC); // read from database result
// $enc_name = base64_decode($row['Name']);
// $enc_name = hex2bin($row['Name']);
$enc_name = $row['Name'];
// $iv = base64_decode($row['IV']);
// $iv = hex2bin($row['IV']);
$iv = $row['IV'];

$name = pkcs7_unpad(openssl_decrypt(
    $enc_name,
    'AES-256-CBC',
    $encryption_key,
    0,
    $iv
)); 
```

# 认证加密

您可以通过附加从密钥（不同于加密密钥）和密文生成的签名来进一步提高生成的密文的完整性。在解密密文之前，首先验证签名（最好采用恒定时间比较的方法）。

### 例子

```
// generate once, keep safe
$auth_key = openssl_random_pseudo_bytes(32, $strong);

// authentication
$auth = hash_hmac('sha256', $enc_name, $auth_key, true);
$auth_enc_name = $auth . $enc_name;

// verification
$auth = substr($auth_enc_name, 0, 32);
$enc_name = substr($auth_enc_name, 32);
$actual_auth = hash_hmac('sha256', $enc_name, $auth_key, true);

if (hash_equals($auth, $actual_auth)) {
    // perform decryption
} 
```

也可以看看：[`hash_equals()`](http://php.net/hash_equals)

# 散列

必须尽可能避免在数据库中存储可逆密码；您只想验证密码而不是知道其内容。如果用户丢失了密码，最好让他们重置密码，而不是向他们发送原始密码（确保密码重置只能在有限的时间内完成）。

应用哈希函数是一种单向操作；之后可以在不泄露原始数据的情况下安全地用于验证；对于密码来说，由于密码长度相对较短且许多人的密码选择不佳，暴力破解方法是一种可行的破解方法。

MD5 或 SHA1 等散列算法用于根据已知散列值验证文件内容。它们经过了极大的优化，以尽可能快地进行此验证，同时仍保持准确。鉴于它们相对有限的输出空间，很容易构建一个具有已知密码及其各自哈希输出的数据库，即彩虹表。

在散列之前在密码中添加盐会使彩虹表无用，但最近的硬件进步使暴力查找成为一种可行的方法。这就是为什么您需要一种故意缓慢且根本无法优化的散列算法。它还应该能够增加更快的硬件的负载，而不会影响验证现有密码哈希以使其成为未来证明的能力。

目前有两种流行的选择：

1.  PBKDF2（基于密码的密钥派生函数 v2）
2.  bcrypt（又名河豚）

此答案将使用 bcrypt 的示例。

**一代**

可以像这样生成密码哈希：

```
$password = 'my password';
$random = openssl_random_pseudo_bytes(18);
$salt = sprintf('$2y$%02d$%s',
    13, // 2^n cost factor
    substr(strtr(base64_encode($random), '+', '.'), 0, 22)
);

$hash = crypt($password, $salt); 
```

生成盐[`openssl_random_pseudo_bytes()`](http://php.net/openssl_random_pseudo_bytes)以形成随机数据块，然后运行`base64_encode()`并`strtr()`匹配所需的`[A-Za-z0-9/.]`.

该[`crypt()`](http://php.net/crypt)函数基于算法（`$2y$`对于 Blowfish）、成本因子（在 3GHz 机器上 13 的因子大约需要 0.40 秒）和 22 个字符的盐执行散列。

**验证**

获取包含用户信息的行后，您可以通过以下方式验证密码：

```
$given_password = $_POST['password']; // the submitted password
$db_hash = $row['Password']; // field with the password hash

$given_hash = crypt($given_password, $db_hash);

if (isEqual($given_hash, $db_hash)) {
    // user password verified
}

// constant time string compare
function isEqual($str1, $str2)
{
    $n1 = strlen($str1);
    if (strlen($str2) != $n1) {
        return false;
    }
    for ($i = 0, $diff = 0; $i != $n1; ++$i) {
        $diff |= ord($str1[$i]) ^ ord($str2[$i]);
    }
    return !$diff;
} 
```

要验证密码，您`crypt()`再次调用，但您将先前计算的哈希值作为盐值传递。如果给定的密码与散列匹配，则返回值产生相同的散列。为了验证哈希，通常建议使用恒定时间比较函数来避免时间攻击。

**PHP 5.5 的密码散列**

PHP 5.5 引入了[密码散列函数](http://www.php.net/manual/en/ref.password.php)，您可以使用这些函数来简化上述散列方法：

```
$hash = password_hash($password, PASSWORD_BCRYPT, ['cost' => 13]); 
```

并验证：

```
if (password_verify($given_password, $db_hash)) {
    // password valid
} 
```

另见：[`password_hash()`](http://php.net/password_hash),[`password_verify()`](http://php.net/password_verify)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-06T14:37:22.390

我认为这已经被回答过......但无论如何，如果你想加密/解密数据，你不能使用 SHA256

```
//Key
$key = 'SuperSecretKey';

//To Encrypt:
$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, 'I want to encrypt this', MCRYPT_MODE_ECB);

//To Decrypt:
$decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $encrypted, MCRYPT_MODE_ECB); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-07T05:16:42.867

## 答案背景和解释

要理解这个问题，首先要了解什么是SHA256。SHA256 是一种**加密散列函数**。加密哈希函数是一种单向函数，其输出是加密安全的。这意味着计算哈希很容易（相当于加密数据），但很难使用哈希得到原始输入（相当于解密数据）。由于使用加密哈希函数意味着解密在计算上是不可行的，因此您无法使用 SHA256 执行解密。

您要使用的是双向功能，但更具体地说，是**Block Cipher**。允许对数据进行加密和解密的功能。这些函数默认使用 Blowfish 算法`mcrypt_encrypt`。`mcrypt_decrypt`PHP 对 mcrypt 的使用可以在本[手册](http://www.php.net/manual/en/intro.mcrypt.php)中找到。还存在用于选择密码 mcrypt 使用的[密码定义](http://www.php.net/manual/en/mcrypt.ciphers.php)列表。可以在[Wikipedia](http://en.wikipedia.org/wiki/Blowfish_%28cipher%29)上找到有关 Blowfish 的 wiki 。分组密码使用已知密钥对已知大小和位置的块中的输入进行加密，以便以后可以使用该密钥对数据进行解密。这是 SHA256 无法为您提供的。

## 代码

```
$key = 'ThisIsTheCipherKey';

$ciphertext = mcrypt_encrypt(MCRYPT_BLOWFISH, $key, 'This is plaintext.', MCRYPT_MODE_CFB);

$plaintext = mcrypt_decrypt(MCRYPT_BLOWFISH, $key, $encrypted, MCRYPT_MODE_CFB); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-05-19T20:28:31.750

这是一个使用 openssl_encrypt 的示例

```
//Encryption:
$textToEncrypt = "My Text to Encrypt";
$encryptionMethod = "AES-256-CBC";
$secretHash = "encryptionhash";
$iv = mcrypt_create_iv(16, MCRYPT_RAND);
$encryptedText = openssl_encrypt($textToEncrypt,$encryptionMethod,$secretHash, 0, $iv);

//Decryption:
$decryptedText = openssl_decrypt($encryptedText, $encryptionMethod, $secretHash, 0, $iv);
print "My Decrypted Text: ". $decryptedText; 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-04-20T07:12:05.707

```
 function my_simple_crypt( $string, $action = 'e' ) {
        // you may change these values to your own
        $secret_key = 'my_simple_secret_key';
        $secret_iv = 'my_simple_secret_iv';

        $output = false;
        $encrypt_method = "AES-256-CBC";
        $key = hash( 'sha256', $secret_key );
        $iv = substr( hash( 'sha256', $secret_iv ), 0, 16 );

        if( $action == 'e' ) {
            $output = base64_encode( openssl_encrypt( $string, $encrypt_method, $key, 0, $iv ) );
        }
        else if( $action == 'd' ){
            $output = openssl_decrypt( base64_decode( $string ), $encrypt_method, $key, 0, $iv );
        }

        return $output;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-08T21:26:30.203

我花了很长时间才弄清楚，如何`false`在使用时不使用`openssl_decrypt()`并获得加密和解密工作。

```
 // cryptographic key of a binary string 16 bytes long (because AES-128 has a key size of 16 bytes)
    $encryption_key = '58adf8c78efef9570c447295008e2e6e'; // example
    $iv = openssl_random_pseudo_bytes(openssl_cipher_iv_length('aes-256-cbc'));
    $encrypted = openssl_encrypt($plaintext, 'aes-256-cbc', $encryption_key, OPENSSL_RAW_DATA, $iv);
    $encrypted = $encrypted . ':' . base64_encode($iv);

    // decrypt to get again $plaintext
    $parts = explode(':', $encrypted);
    $decrypted = openssl_decrypt($parts[0], 'aes-256-cbc', $encryption_key, OPENSSL_RAW_DATA, base64_decode($parts[1])); 
```

如果要通过 URL 传递加密字符串，则需要对字符串进行 urlencode：

```
 $encrypted = urlencode($encrypted); 
```

为了更好地理解发生了什么，请阅读：

*   [http://blog.turret.io/the-missing-php-aes-encryption-example/](http://blog.turret.io/the-missing-php-aes-encryption-example/)
*   [http://thefsb.tumblr.com/post/110749271235/using-opensslendecrypt-in-php-](http://thefsb.tumblr.com/post/110749271235/using-opensslendecrypt-in-php-)

要生成 16 字节长的密钥，您可以使用：

```
 $bytes = openssl_random_pseudo_bytes(16);
    $hex = bin2hex($bytes); 
```

要查看 openssl 的错误消息，您可以使用：`echo openssl_error_string();`

希望有帮助。

# java - NoSuchMethodError：工具。计时器。 (J)V

> ID：10916286
> 
> 赞同：1
> 
> 时间：2012-06-06T14:29:01.057
> 
> 标签：java, multithreading, exception, init

我有一个 Timer 类和一个 Test 类来测试这个计时器：

```
package tools;

public class Timer extends Thread 
{
    public boolean isRunning = true;
    private long timeout = 0;

    public Timer(long aTimeout)
    {
        timeout = aTimeout;
    }

    // Run the Thread
    public void run()
    {
        int i = 1000;
        while(i <= timeout)
        {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            i = i + 1000;
        }
        isRunning = false;
    }
} 
```

和测试类：

```
public class Test 
{
    public static void main(String[] args) 
    {
        Timer myTimer = new Timer(10000);
        myTimer.start();

        while(myTimer.isRunning)
        {
            System.out.println("Running");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

在 Eclipse 中，这很好用。当我将它包含到 Solaris 服务器上的另一个项目中时，我得到以下异常：

```
Exception in thread "main" java.lang.NoSuchMethodError: tools.Timer.<init>(J)V 
```

我用谷歌搜索了它，但找不到任何答案 - 为什么这不起作用？干杯，蒂姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:32:12.860

您正在构建这样的计时器：

```
Timer myTimer = new Timer(); 
```

你的构造函数声明是：

```
public Timer(long aTimeout) 
```

很明显，不是吗？您必须像 一样构造计时器`new Timer(1234)`，或者向其添加无参数构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:32:27.283

您显示的代码甚至不应该编译，因为您正在调用`Timer()`默认构造函数，但是`Timer`只有一个参数化构造函数：`public Timer(long aTimeout)`.

因此，要么您没有向我们展示[SSCCE](http://sscce.org/)，要么您对“运作良好”的定义与我们的大不相同；-)

# linux - ISPConfig 3 - 创建一个新网站

> ID：10916287
> 
> 赞同：0
> 
> 时间：2012-06-06T14:29:05.420
> 
> 标签：linux, web, vps

我在 VPS 服务器上有 ISPConfig。（第 3 版）

我有三个域：例如：Domain1.com、Domain2.com、Domain3.com 我使用 ISPConfig 创建了一个新网站。（对于 domain1.com）

当我显示域 - domain1.com - 内容正确。

当我显示域 - domain2.com 和 domain3.com 内容域与 domain1.com 相同。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:54:26.690

在我的 IP 地址更改（它是动态的）之后，我最终遇到了与您描述的相同的情况。

这是解决方案：

1.  在 ISPConfig3 中，单击站点选项卡。在网站部分下，单击显示的站点之一，例如 domain1.com。

2.  设置`IP-Address`为`*`。

3.  保存并为您的每个其他网站、域 2 和域 3 重复此操作。

![ISPConfig > 站点 > 网站](../Images/07d4d915f3d78f1839fa044b3c26b442.png)

您现在应该能够访问您的每个站点，domain1.com、domain2.com 和 domain3.com，并且每个站点都将显示自己的内容。

此外，位于 的默认页面`http://yourServerIPAddress:80`将显示它自己的`index.html`页面，该页面位于`/var/www`。

# javascript - Strophe、backbonejs 和 jquery-mobile

> ID：10916288
> 
> 赞同：2
> 
> 时间：2012-06-06T14:29:08.623
> 
> 标签：javascript, jquery-mobile, backbone.js, strophe

我想用backbonejs 构建一个MVC 结构化的移动应用程序。我在网上搜索信息，我只找到了 strophe 主干插件：

```
strophe.pubsub.js
strophe.forms.js
strophe.vcard.js
strophe.private.js
strophe.roster.js 
```

我会遇到同时使用backbone.js 和Strophe 的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:13:56.073

您可能指的是我自己的[strophe.plugins](https://github.com/ggozad/strophe.plugins)。这些当然可以开箱即用，此外它们还经过全面测试。当然，您可以将任何其他插件与 Strophe 一起使用，它不会以任何方式与 Backbone 发生冲突。

[请记住 strophe.plugins 在独立工作时被编写为与Backbone.xmpp](https://github.com/ggozad/Backbone.xmpp)一起使用。我编写了该库，以允许您将 Backbone 模型/集合与 XMPP PubSub 节点同步，从而为您提供所有客户端上的实时事件。

这是一个[演示](https://vimeo.com/40685900)如何在两个客户的实践中工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T11:43:01.030

一起使用库没有问题。

大约 12 个月前，我是一个小团队的一员，他们使用 Backbone.js 和 strophe 实现了一个使用 xmpp / ejabberd 作为主要消息传递平台的单页社交网络 Web 应用程序......我们最终重新设计了它，将 ejabberd 替换为自定义 RESTful api ( [http://beta.playup.com](http://beta.playup.com) )。

您需要考虑一些问题 - 特别是在编写单页应用程序时，例如连接管理。当您创建一个停止连接客户端时，您需要一种在页面刷新时重新连接用户帐户的方法（因为 js 显然已重新加载）。

我们还遇到了内存泄漏问题。在 Backbone Views 中抛出自定义事件时要小心……因为在完成视图时需要手动取消绑定它们。如果您不这样做，视图将通过绑定事件保持活动状态，并且不会被 GC。这意味着您可能必须在您的应用程序中引入一些生命周期。

不过，一般来说，只有在您正在开发某种规模的网络应用程序时，这才会成为问题。

# jquery-mobile - jQuery Mobile 按钮在下一页被触发

> ID：10916290
> 
> 赞同：0
> 
> 时间：2012-06-06T14:29:20.357
> 
> 标签：jquery-mobile, cordova

我正在编写一个 jQuery Mobile/Phonegap 应用程序，该应用程序在标题中有多个带有按钮的页面。当两个页面在同一个地方有按钮并且相互链接时，一旦页面进入视图，链接页面上的按钮就会被触发。我只是在尝试从 1.0b1 更新到 1.0.1 或 1.1.0 时才注意到这个问题。我正在运行 Android 2.3.3。

我到处寻找，但找不到任何有同样问题的人。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:32:41.743

这是Android上尚未修复的问题。我通常只是覆盖 Android 按钮按下的默认“点击”事件以使用“点击”事件......我为此苦苦挣扎了一段时间，但没有找到更好的解决方案。click 事件似乎在 Android 上更可靠！

当我在初始化函数中设置按钮按下事件时，我通常会检查用户代理：

```
var init = function() {
    // Check the user agent
    var ua = navigator.userAgent.toLowerCase();
    var isAndroid = ua.indexOf('android') > -1;
    if(isAndroid) {
        d.delegate($('#yourButtonID', 'click', onYourButtonTapped);
    } else {
        d.delegate($('#yourButtonID', 'tap', onYourButtonTapped);
    }
};

var onYourButtonTapped = function() {
    // your code here
}; 
```

# delphi - Delphi DFM 文件中的奇怪 [number]s - 起源和必要性？

> ID：10916294
> 
> 赞同：35
> 
> 时间：2012-06-06T14:29:28.060
> 
> 标签：delphi, rename, dfm

我需要将一个包中定义的大量 Delphi 组件更改为另一个包中的类似组件。大部分繁重的工作可以通过替换 DFM 文件中的文本（组件类型和属性）来完成 - 当然保存为文本。

我已经搜索了 Stackoverflow 和 Google，现在正在从[http://www.felix-colibri.com/papers/colibri_utilities/dfm_parser/dfm_parser.html改编 Felix Colibri DFM 解析器](http://www.felix-colibri.com/papers/colibri_utilities/dfm_parser/dfm_parser.html)

我在解析器阻塞的 DFM 文件中遇到了一个“功能”：在类型规范之后的 [number]s，如下所示：

```
inherited DialoogEditAgenda: TDialoogEditAgenda
  ActiveControl = PlanCalendar
  Caption = 'Agenda'
  [snip]
  inherited PanelButtons: TRzPanel
    Top = 537
    [snip]
    inherited ButtonCancel: TRzBitBtn [0]  <== *here*
      Left = 852
      [snip]
    end
    object CheckBoxBeschikbaarheid: TRzCheckBox [1]  <== *here*
      Left = 8
      [snip]
    end
    inherited ButtonOK: TRzBitBtn [2]  <== *here*
      Left = 900
      [snip]
    end
  end
  inherited PageControl: TRzPageControl
    Left = 444
    [snip]
  end
  object PanelBeschikbaarheid: TRzSizePanel [2]  <== *here*
    Left = 967
    [snip]
  end
  object PanelScheduler: TRzPanel [3]  <== *here*
    Left = 23
    Top = 22
    [...] 
```

这些 DFM 中的许多都被大量继承（我已经为此调整了 Colibri 的代码），但是一个带有继承的小型测试应用程序未能在 DFM 中生成 [number] 个。

在扩展解析器代码之前我的问题是：有谁知道这些 [number] 来自哪里，因此，我可以在解析 DFM 文件之前删除它们吗？

谢谢

简

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-06T14:41:00.867

这些数字并非完全没用。假设你有类`TA`, `TB`and `TC`, `TB`and`TC`都派生自`TA`. DFM 看起来像：

```
object A: TA
  object X: TX
  end
end

inherited B: TB
  object Y: TY
  end
end

inherited C: TC
  object Y: TY [0]
  end
  inherited X: TX [1]
  end
end 
```

`B``C`不同之处在于它们和子组件的顺序是`X`相反`Y`的。子组件顺序的确切含义取决于组件（见下文），但最值得注意的是，如果它们是`TWinControl`后代，或者它们都是`TControl`不派生自的后代`TWinControl`，这意味着它们在是否`X`显示 over`Y`或`Y`over方面有所不同`X`。

删除这些数字可能会改变形式，所以你不应该盲目地这样做。但是，根据您的目标，您可以修改解析器（源代码似乎可用）以简单地跳过数字。

组件的相对顺序通常并不重要，但也有一些例外。更详细地解释一下：

对于普通控件，子组件以 (1)`TControl`不是从 派生的后代开始`TWinControl`，然后是 (2)`TWinControl`后代，最后是 (3) 任何非`TControl`组件。在每一个中，组件的相对顺序是可调整的：对于控件，“放在前面”和“放在后面”尽可能地移动控件，但限制是 non-`TWinControl`永远不能放在 a 之后`TWinControl`。对于非控件，（名称略有错误）“创建顺序”选项允许您更改顺序。因此，假设您有两个标签（A 和 B），两个编辑控件（C 和 D），以及一个数据集和数据源（E 和 F），您可以得到例如 ABCDEF、BACDEF、ABDCFE 的顺序，但不是 ACBDEF。

保存到 DFM 文件时会保留该顺序：当不使用视觉继承时，组件只会按顺序保存并重新加载。当您使用继承时，DFM 文件会从基础处理到派生，因此在上述情况下，`TC`创建时，其`X`成员*始终*在其`Y`成员之前创建。在组件顺序很重要的情况下，需要`[0]`and`[1]`来告诉 Delphi RTL 之后修复顺序。

组件订单的实际作用取决于组件类型。正如“放在前面”/“放在后面”的名称所暗示的那样，控件使用组件顺序来指定 Z 顺序。对于其他组件类型，它意味着组件想要的任何含义。例如，菜单可以使用组件顺序来指定其菜单项的顺序（从上到下）。工具栏控件可以使用组件顺序来指定工具栏按钮的顺序，即使这些工具栏按钮本身不是控件。数据集使用组件顺序来指定字段顺序，因此也是 a 中列的默认顺序`TDBGrid`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T14:06:24.430

我最近写了一个 DFM 解析器，它支持这些类型的索引。它是用 Go 编写的，生成的 DFM 文件看起来就像 Delphi 的一样。

[https://github.com/gonutz/dfm](https://github.com/gonutz/dfm)

它针对 RAD Studio 源文件和我们自己的生产代码进行了测试，它解析所有文件并逐字节生成文件。目的是提供一种简单的方法来更改 DFM 树并生成看起来像是由 RAD Studio 创建的输出。

# asp.net-mvc - 使用 MVC4 的 OpenId (FB/G+/Live) 身份验证/会员提供程序？

> ID：10916299
> 
> 赞同：1
> 
> 时间：2012-06-06T14:29:48.417
> 
> 标签：asp.net-mvc, asp.net-mvc-4, openid

我曾经听到 Hanselman 或 ScottGu 说他们正在考虑将 OpenId 成员资格和身份验证提供程序添加到 MVC4（可能还有 Web 表单）。我没有在 MVC4 RC 发行说明中看到这一点。知道这是否会成为 RTM 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:19:15.463

不确定您是否已经看到这个，但是 VS2012 RTM 已经包含了各种 OpenAuth 和 OpedID 工具。不利的一面是，在切换过程中，他们放弃了旧的 Auth、Role 和 Membership 提供程序，这使得 MVC 3 和 MVC 4 之间的工作更加成问题。

我自己刚刚运行了 iunto，我目前正在整理从 MVC3 到 MVC4 的中间项目迁移意味着什么。

-道格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:08:57.937

我不知道它们是否与该项目相关联，但它确实具有 OpenId 身份验证组件，并且似乎目前正在开发中。

[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)

# hibernate - 如何从 REST 路径中提取查询参数？

> ID：10916300
> 
> 赞同：0
> 
> 时间：2012-06-06T14:29:55.757
> 
> 标签：hibernate, rest

我正在使用休眠和 REST 服务。查看下面的代码**REST SERVICE**，在这种情况下如何使用 HQL 语句（Hibernate 查询）提取 content_id ？

例如我的尝试...

```
<query cache-mode="get" cacheable="true" flush-mode="auto"
name="Languages.getLanguageById" read-only="true">
select languageId  as id,displayName as name from Languages where id=<query-param name="languageId" type="java.lang.Long"/>
</query> 
```

//**休息服务**

```
@Path("{resource}/getLanguageById")

@GET
@Produces(MediaType.TEXT_XML)  
public String getLanguageById(@PathParam("resource") String id, 
                              @QueryParam("content-id")String content_id)
{

            ........
            .......

} 
```

//休眠XML

```
<hibernate-mapping>
 <class catalog="CONTENT" name="test.db.com.Languages" table="languages">
  <id name="languageId" type="java.lang.Long">
   <column name="languageId"/>
   <generator class="identity"/>
  </id>
  <property generated="never" lazy="false" name="language" type="string">
   <column length="50" name="language" not-null="true"/>
  </property>
  <property generated="never" lazy="false" name="displayName" type="string">
   <column length="50" name="displayName" not-null="true"/>
  </property>
 </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:36:53.263

没关系，我找到了替代解决方案

```
public static List listObject1(String queryname,Long content_id) {
        String query = "select languageId  as id,displayName as name from Languages where id =:query_id";
        Transaction tx = null;    

        Session session = SessionFactoryUtil.getInstance().openSession();
        Query myquery = session.createQuery(query);
        myquery.setParameter("query_id",content_id);

......

.......more code
    } 
```

# visual-studio - 为 SSRS 创建自定义文本框 - 有意义吗？

> ID：10916301
> 
> 赞同：2
> 
> 时间：2012-06-06T14:29:57.390
> 
> 标签：visual-studio, reporting-services

我只是想到，如果我可以创建自定义控件（例如具有我的标准字体的文本框，以及预填充为`Parameters!DateBegin.Value + "-" + Parameters!DateEnd.Value`（或差不多）的表达式），那么在 SSRS 2008 R2 中某些事情对我来说会更容易。这是否有意义，或者这不是自定义控件的使用方式？

谢谢。

# asp.net - Error loading view with DBML as model using razor engine

> ID：10916304
> 
> 赞同：0
> 
> 时间：2012-06-06T14:29:59.200
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

I have three projects in my solution:

1.  Domain layer
2.  GUI
3.  MVC application

Now my Domain layer i have created a *.DBML (SQL to LINQ), and i want to reuse this class in my MVC application. The DBML Class has the namespace `CatalogDb` and the Domain layer has the namespace `Catalog`. This is not really a problem at the moment. In my view i have written following on the top:

`@model CatalogDb.BookMedia`

The autocompleter can also see this namespace and class without problems.

But when i run the project the view gives an error:

`Compiler Error Message: CS0246: The type or namespace name 'CatalogDb' could not be found (are you missing a using directive or an assembly?).`

Do i need to add the `CatalogDb` namespace manually in the MVC application project? I dont understand why i cant point it to the namespace which it suggests.

![enter image description here](../Images/36ee83036febd623cba4e9bff6b6cfaa.png) ![enter image description here](../Images/7c30bb0beb0ebde4c041a9a86979baa8.png)

EDIT:

I have Catalog in my references in MVC application.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:02:46.753

After some hours of struggle i ended up adding af seperate *.dbml file to my MVC application and it solved the problems. I assume the namespaces were the primary cause of problem.

# c++ - 将数据从后缓冲区复制到前缓冲区

> ID：10916310
> 
> 赞同：2
> 
> 时间：2012-06-06T14:30:07.463
> 
> 标签：c++, opengl, buffer

**我已经在谷歌上搜索了一些关于这个主题的信息，每个人似乎都相信在其他网页上，不调用 SwapBuffers**将内容从 Backbuffer 复制到 Frontbuffer是不可能的。

有一些解决方法是创建一个辅助的额外缓冲区（如 pBuffer），对其进行渲染并将内容复制到纹理中，然后显示纹理。

但是我想知道是否真的没有机会在Opengl的Backbuffer上渲染，并将内容复制到frontbuffer。我想实现这一点，因为在两次调用 SwapBuffers 之间，我渲染的许多场景保持不变，并且只有一小部分（矩形）被更改，所以我想避免不必要地渲染其他 90% 的场景每次。

像素缓冲区对象似乎可以帮助我们使用直接内存访问将像素从帧缓冲区复制到像素缓冲区对象。我的机器不支持它，但即使它支持，我们再次分配一个额外的缓冲区。

那么，真的绝对没有办法在我的窗口的 Back 和 Front 缓冲区之间复制内容或部分内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-12T03:25:23.380

您可以从 OpenGL 3.0（或通过可用扩展的早期版本）开始执行此操作，如下所示：

```
glReadBuffer(GL_BACK);
glDrawBuffer(GL_FRONT);
glBlitFramebuffer(srcX0, srcY0, srcX1, srcY1,
    dstX0, dstY0, dstX1, dstY1, GL_COLOR_BUFFER_BIT, GL_NEAREST); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T14:47:49.233

您打算做的不是双缓冲的设计目的。

但是，如果每次更新只需要更新图像的一个子集，请不要清除缓冲区，并在矩形上绘制。

# android - 隐藏的 IFrame 禁用 Android 浏览器上的滚动

> ID：10916314
> 
> 赞同：3
> 
> 时间：2012-06-06T14:30:25.080
> 
> 标签：android, html

当文档包含隐藏的 IFrame 时，默认的 Android Gingerbread 浏览器似乎会禁用文档的滚动。在三星 Galaxy S 上测试。

在这里测试：http: [//fiddle.jshell.net/2jSAb/show/](http://fiddle.jshell.net/2jSAb/show/)

小提琴在这里：http: [//jsfiddle.net/2jSAb/](http://jsfiddle.net/2jSAb/)

这只发生在隐藏的 IFrame 上。证明：当 IFrame 可见时，错误不会发生： http: [//fiddle.jshell.net/beczR/show/](http://fiddle.jshell.net/beczR/show/)

在 ICS 设备上，它似乎已解决。有已知的修复方法吗？我在谷歌上没有找到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:27:12.153

我昨天在我正在从事的项目中遇到了同样的问题，今天刚刚找到了解决办法。

我想出的解决方案是使 iframe 的包含 div 的高度为 0 而不是 display: none。我有包含 iframe 的 div 具有以下样式：

```
.video {
height: 0px;
overflow: hidden;
margin: 0;
padding: 0;
border: none;
} 
```

这样，它就充当了一种 display:none，但不会导致与 display none 提供的相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:35:45.947

这可能是特定于设备或制造商的错误——它在我运行姜饼的摩托罗拉 atrix 上运行良好。如果找到修复程序真的很重要，我建议联系三星。

# excel - 冻结窗格以形成正方形？

> ID：10916318
> 
> 赞同：0
> 
> 时间：2012-06-06T14:30:48.033
> 
> 标签：excel, vba

虽然这个问题我找到了如何冻结窗格，所以它冻结了第一行和第一列。

[同时冻结第 1 行和 A 列](https://stackoverflow.com/questions/10915733/freezing-row-1-and-column-a-at-the-same-time)

我现在想知道有没有办法在excel中冻结一个“正方形”？所以 A2:O12 周围的细胞被冷冻了？我知道这是一个奇怪的要求，但我的疯狂是有原因的。这就是我的用户找到了做最疯狂的事情的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:44:39.557

解决了这个问题，我没有像在另一个链接中那样使用冻结窗格，而是选择了一个比所需更宽和更长的正方形，然后单击了冻结帧，它完全按照我想要的方式捕获了单元格。

在英语中，第 13 行和 P 列被选中，我点击了定格，它起作用了。

# c# - 具有基实体类的实体框架

> ID：10916319
> 
> 赞同：2
> 
> 时间：2012-06-06T14:30:48.533
> 
> 标签：c#, entity-framework

我们的团队正在努力在广泛的现有数据库架构上实现代码优先的 EF 框架。我们真正想要的一件事是我们所有不同实体都将实现的基本接口。我们打算在这个基本接口中定义的只是一个**Id**字段和一个**Name**字段，因为我们所有的数据库表都具有这两个属性的一些概念。这种方法有很多好处，因为在我们的应用程序中有很多情况，您需要的对象只是它的 Id 和一些描述性文本（它的“名称”），因此能够编程到接口而不是该实现可以提供相当多的灵活性。

问题的出现是因为我们的模式中并非所有表都具有基于整数的 PK，有些表具有字符串、guid 等。因此，除了可以容纳的对象之外，我们无法在接口中为 Id 字段定义真正的“类型”所有的可能性。然后问题就变成了 EF 不喜欢将对象作为其 PK 的想法，因此它在尝试指定 HasKey(o => o.Id) 时会抱怨。

无论如何，你们可以想到完成我们在这里努力实现的目标吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T14:40:50.797

使用泛型。

```
public interface IEntityBase<TKey>
{
    TKey Id { get; set; }
    string Name { get; set; }
} 
```

然后你可以像这样实现它

```
public class IntKeyEntity : IEntityBase<int>
{
    int Id { get; set; }
    string Name { get; set; }
}

public class StringKeyEntity : IEntityBase<string>
{
    string Id { get; set; }
    string Name { get; set; }
}

//etc 
```

# c# - 生成 HTML 文档时的 XML 序列化和“<”、“>”

> ID：10916321
> 
> 赞同：3
> 
> 时间：2012-06-06T14:30:56.270
> 
> 标签：c#, html, serialization, xmlserializer, xml-encoding

我正在尝试通过使用`XmlSerializer`和一组这样的类来动态生成 HTML 表：

```
[XmlInclude(typeof(Th))]
public class Td
{
    [XmlElement("span")]
    public string Designation { get; set; }

    [XmlAttribute("colspan")]
    public int ColSpan { get; set; }

    [XmlAttribute("rowspan")]
    public int RowSpan { get; set; }

    public Td(string designation, int colspan)
    {
        Designation = designation;
        ColSpan = colspan;
        RowSpan = 1;
    }

    public Td()
    {            
    }

} 
```

这里的问题是该`Designation`属性可以有一个标签作为值`<option...>`，所以当我序列化我的模型时，我得到`&lt;option...&gt;`而不是`<option...>`

我可以通过使用这样的方法来解决问题`string.Replace`：`Replace("&lt;", "<").Replace("&gt;", ">");`

有没有一种干净的方法可以在不使用的情况下获得预期的结果`string.Replace`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:43:06.397

您可以创建另一个公开`Designation`为 的属性`XmlNode`：

```
[XmlIgnore]
public string Designation { get; set; }

[XmlElement("span")]
public XmlNode DesignationAsXml
{
    get
    {
        XmlDocument doc = new XmlDocument();
        doc.InnerXml = "<root>" + this.Designation + "</root>";
        return doc.DocumentElement.FirstChild;
    }
    set
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:38:39.020

手动更换它是不必要的。我认为最好的方法是使用`System.XML.XmlWriter.WriteString`类。[在此处](http://weblogs.sqlteam.com/mladenp/archive/2008/10/21/Different-ways-how-to-escape-an-XML-string-in-C.aspx)查找类定义

# java - 如何在 jmockit 中模拟创建

> ID：10916328
> 
> 赞同：1
> 
> 时间：2012-06-06T14:31:19.467
> 
> 标签：java, jmockit

我是 jmockit 的新手，尽管该框架目前在我们的应用程序中略微使用。

我正在尝试为我的服务层模拟我的 DAO。我了解如何使用我的期望返回来为我的读取方法返回我的对象​​，但我想捕获使用 create 方法创建的对象，以便我可以测试它们。

我该怎么做呢？

例如，DAO 包含：

```
public void create(Person person){
    //code to create person here.
} 
```

我想对其进行模拟，以便捕捉进入此方法的人，以便稍后在测试中进行询问。

根据反馈，我使用以下方法进行了测试...

```
@Mocked @NonStrict
private PaymentStubDAO mockPaymentStubDAO; 
```

...

```
new Expectations() {
    {
    mockPaymentStubDAO.create((PaymentStub) any);
    returns(any);
    }
}; 
```

...

```
//set up the verifications
new Verifications() {{
  mockPaymentStubDAO.create((PaymentStub) any);
  forEachInvocation = new Object() {
     @SuppressWarnings("unused")
    void validate(PaymentStub stub) {
         assertEquals(1, (int)stub.getDaysJuror());
     }
  }; 
```

}};

当我运行它时，我在 new Verifications() 行中收到以下错误：

```
java.lang.AssertionError: Missing 1 invocation to:
Object com.acs.gs.juror.dao.accounting.PaymentStubDAO#create(Object)
with arguments: null
on mock instance: $Impl_PaymentStubDAO@424f8ad5
    at com.acs.gs.juror.manager.accounting.impl.AccountingManagerImplTest$2.<init>(AccountingManagerImplTest.java:1925)
    at com.acs.gs.juror.manager.accounting.impl.AccountingManagerImplTest.testPayOverUnderLimit(AccountingManagerImplTest.java:1924)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: Missing invocations
    at com.acs.gs.juror.manager.accounting.impl.AccountingManagerImplTest$1.<init>(AccountingManagerImplTest.java:1859)
    at com.acs.gs.juror.manager.accounting.impl.AccountingManagerImplTest.testPayOverUnderLimit(AccountingManagerImplTest.java:1845)
    ... 12 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:00:00.543

根据文档：

```
 @Test
public void verifyExpectationWithArgumentValidatorForEachInvocation(
     final Collaborator  mock)
{
  // Inside tested code:
  new Collaborator().doSomething(true, new int[2], "test");

  new Verifications() {{
     mock.doSomething(anyBoolean, null, null);
     forEachInvocation = new Object()
     {
        void validate(Boolean b, int[] i, String s)
        {
           assertTrue(b);
           assertEquals(2, i.length);
           assertEquals("test", s);
        }
     };
  }}; 
```

}

在[JMockit 文档中找到](http://jmockit.googlecode.com/svn/trunk/www/tutorial/BehaviorBasedTesting.html#forEachInvocation)

仅供参考，正如我在您之前的问题中提到的那样，我认为 Mockito 让这变得容易多了。问问自己，你是否真的被 JMockit 锁定了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:51:35.840

除了`returns(any)`冗余期望块中的行之外，我在示例测试代码片段中看不到任何问题。不过，查看引发错误的完整示例测试会有所帮助。

在任何情况下，以下示例测试也应该有效：

```
@Test
public void createAPaymentStub(@Mocked final PaymentStubDAO mockPaymentStubDAO)
{
    // Executed somewhere inside the code under test:
    PaymentStub stub = new PaymentStub();
    stub.setDaysJuror(1);
    mockPaymentStubDAO.create(stub);

    new Verifications() {{
        mockPaymentStubDAO.create(with(new Delegate<PaymentStub>() {
           void validate(PaymentStub stub) {
               assertEquals(1, (int)stub.getDaysJuror());
           }
        }));
    }};
} 
```

（`any`/`anyXyz`字段仅用于记录/验证期望中的*参数匹配器*`returns(...)`，而仅用于记录非`void`方法的返回值。）

或者，您可以使用 Mockups API，在这种情况下它更简单一些：

```
@Test
public void createAPaymentStub()
{
    PaymentStubDAO mockDAO = new MockUp<PaymentStubDAO>() {
        @Mock
        void create(PaymentStub stub) {
           assertEquals(1, (int)stub.getDaysJuror());
        }
    }.getMockInstance();

    // Executed somewhere inside the code under test:
    PaymentStub stub = new PaymentStub();
    stub.setDaysJuror(1);
    mockDAO.create(stub);
} 
```

# xml - 如何仅使用 xml 中的第一个“X”兄弟姐妹

> ID：10916337
> 
> 赞同：0
> 
> 时间：2012-06-06T14:31:39.123
> 
> 标签：xml, xslt, xpath, jmeter

我一直在 JMeter 中运行一系列 Web 服务测试，我一直在修改我的结果报告以包含每个测试返回的平均响应时间的总和。但我还需要做的是取平均值的总和，直到某个测试。有没有办法我可以修改 XSLT 来总结每个测试的测试平均值，除了测试“X”和它之后的那些？例如 lb="getSubscribers"？

[以下是结果报告通常的样子。](http://i.imgur.com/TJKXg.png)本质上，我想将“http”测试中的“平均时间”列的内容与“AlarmMgmtWSDL”测试相加。

这是我来自 JMeter 的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../style/jmeter-results-detail-report_21.xsl"?>
<testResults version="1.2">
<httpSample t="78" lt="78" ts="1338826079163" s="true" lb="html" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="4418" ng="1" na="1"/>
<httpSample t="31" lt="31" ts="1338826079241" s="true" lb="userRoleRetriever" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="758" ng="1" na="1"/>
<httpSample t="32" lt="32" ts="1338826079272" s="true" lb="UserActivityWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="2398" ng="1" na="1"/>
<httpSample t="156" lt="125" ts="1338826079304" s="true" lb="SubscriberMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="56434" ng="1" na="1"/>
<httpSample t="31" lt="16" ts="1338826079460" s="true" lb="NetworkMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="33020" ng="1" na="1"/>
<httpSample t="15" lt="15" ts="1338826079507" s="true" lb="AlarmMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="11594" ng="1" na="1"/>
<httpSample t="141" lt="141" ts="1338826079538" s="true" lb="getSubscribers" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="397" ng="1" na="1"/>
<httpSample t="265" lt="234" ts="1338826079679" s="true" lb="getMpegResultsById" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="832927" ng="1" na="1"/>
<httpSample t="15" lt="15" ts="1338826079976" s="true" lb="getOverallSummary" rc="200" rm="OK" tn="vuserver 1-1" dt="text" by="402" ng="1" na="1"/>
<httpSample t="0" lt="0" ts="1338826082663" s="true" lb="html" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="4418" ng="1" na="1"/>
<httpSample t="16" lt="16" ts="1338826082663" s="true" lb="userRoleRetriever" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="758" ng="1" na="1"/>
<httpSample t="15" lt="0" ts="1338826082679" s="true" lb="UserActivityWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="2398" ng="1" na="1"/>
<httpSample t="32" lt="0" ts="1338826082694" s="true" lb="SubscriberMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="56434" ng="1" na="1"/>
<httpSample t="31" lt="15" ts="1338826082726" s="true" lb="NetworkMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="33020" ng="1" na="1"/>
<httpSample t="16" lt="16" ts="1338826082757" s="true" lb="AlarmMgmtWSDL" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="11594" ng="1" na="1"/>
<httpSample t="250" lt="250" ts="1338826082788" s="true" lb="getSubscribers" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="10536" ng="1" na="1"/>
<httpSample t="15454" lt="15392" ts="1338826083038" s="true" lb="getMpegResultsById" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="2023426" ng="1" na="1"/>
<httpSample t="15" lt="15" ts="1338826098555" s="true" lb="getOverallSummary" rc="200" rm="OK" tn="vuserver 1-2" dt="text" by="402" ng="1" na="1"/>

</testResults> 
```

我需要处理来自该 XML 的前 X 个测试结果，排除其余测试结果，同时在第二次迭代时保留 X 个测试结果，以便我可以取平均值。

这是我的 xslt 的摘录，它找到了测试平均值的总和：

```
<xsl:variable name="totalAverageTime">
    <xsl:for-each-group select="httpSample" group-by="@lb">
        <xsl:variable name="count" select="count(current-group())" />
        <xsl:variable name="totalTime" select="sum(current-group()/@t)" />
        <average avg="{$totalTime div $count}" />
    </xsl:for-each-group>
</xsl:variable>

<tr>  
  <td>
    <xsl:call-template name="display-time">
        <xsl:with-param name="value" select="sum($totalAverageTime/average/@avg)" />
    </xsl:call-template>
  </td>
</tr> 
```

关于如何使用这些特定测试的任何想法？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:03:23.637

有几种方法可以做到这一点。首先，您可以在**xsl:for-each-group中添加一个****xsl:if**语句，以便只输出前 7 个分组元素。换句话说，它在进行分组时会考虑所有测试结果，但只输出前 7 个不同的结果。

 **```
<xsl:variable name="totalAverageTime">   
    <xsl:for-each-group select="httpSample" group-by="@lb">  
        <xsl:if test="position() &lt;= 7"> 
           <xsl:variable name="count" select="count(current-group())" />   
           <xsl:variable name="totalTime" select="sum(current-group()/@t)" />   
           <average avg="{$totalTime div $count}" /> 
       </xsl:if>  
    </xsl:for-each-group>   
</xsl:variable> 
```

或者，您仍然可以使用所有测试结果构建您的**$totalAverageTime**，但在输出它们时只限于查看前七个。

```
<xsl:call-template name="display-time">    
    <xsl:with-param name="value" select="sum($totalAverageTime/average[position() &lt;= 7]/@avg)" />    
</xsl:call-template> 
```

后一种方法可能更灵活，因为如果您需要它们，您仍然可以使用完整的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:03:07.327

请在您的 XSLT 文档中使用 Xpath 2.0。

使用像 " `child`" 这样的 ax 和`position()`'snode 测试你得到了你的兄弟子集：

```
/testResults/child::httpSample[position() lt  5] 
```

给你的第一个兄弟姐妹在集合中的位置小于 5：你会得到你的前 4 个兄弟姐妹。

通常你会得到

```
/testResults/child::httpSample[position() lt  (X+1)] 
```

是 X 是您希望从中选择的第一个兄弟姐妹的数量。

因为`'AlarmMgmtWSDL'`是`lb`第 6 个元素的属性，所以你得到了

```
/testResults/child::httpSample[position() lt  7] 
```

像这样改变你的变量' `totalAverageTime`'：

```
<xsl:variable name="totalAverageTime">
    <xsl:for-each-group select="httpSample[position() lt 7]" group-by="@lb">
        <xsl:variable name="count" select="count(current-group())"/>
        <xsl:variable name="totalTime" select="sum(current-group()/@t)"/>
        <average avg="{$totalTime div $count}"/>
    </xsl:for-each-group>
</xsl:variable> 
```**

# silverlight - 设置样式对我不起作用？

> ID：10916338
> 
> 赞同：2
> 
> 时间：2012-06-06T14:31:39.257
> 
> 标签：silverlight, xaml, silverlight-3.0

我刚刚开始使用 Silverlight 3.0，我想知道 3.0 中是否没有此功能。似乎尽管我遇到了所有示例，但我似乎无法设置样式。

下面的代码给了我以下错误： XML 命名空间中不存在标记“类型”| 它强调了 Style 元素中的 TargetType 属性。任何帮助，将不胜感激。

```
<UserControl xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"  xmlns:dataInput="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data.Input"  x:Class="MultiSelectFileUploader.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    mc:Ignorable="d" d:DesignWidth="640" d:DesignHeight="480">
    <UserControl.Resources>
        <Style x:Key="ButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Width" Value="150" />
            <Setter Property="Margin" Value="0 0 250 0" />
        </Style>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="100" />
        </Grid.RowDefinitions>

        <controls:TabControl>
            <controls:TabItem Header="Upload Files">
                <!--<Button x:Name="btnBrowse" Grid.Row="0" Width="150" Margin="0 0 250 0" Content="Browse" Click="btnBrowse_Click" />-->
                <Button Style="{StaticResource ButtonStyle}" x:Name="btnBrowse" Grid.Row="0" Content="Browse" Click="btnBrowse_Click" />
            </controls:TabItem>
            <controls:TabItem Header="View Files" >

            </controls:TabItem>

        </controls:TabControl>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:51:54.097

更改`TargetType="{x:Type Button}"`为`TargetType="Button"`

Silverlight 3 不支持您正在使用的 WPF TargetType 语法。

# python - 如何在 Python 中根据数字范围创建文件夹

> ID：10916347
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:31:53.427
> 
> 标签：python

我想根据给定的数字范围创建几个文件夹。例如，我想创建文件夹 500 到 520。有没有办法使用创建这些文件夹 `range(500, 520)`？

我是否使用此代码走在正确的道路上？

```
 import os

    for i in range(500, 520):
        os.mkdir(r'C:\Dir' + i) 
```

我知道这是错误的，因为`i`它是一个整数，但有人可以引导我走向正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:33:03.033

您可以使用`str()`来获取整数的字符串表示形式：

```
for i in range(500, 520):
    os.mkdir(r'C:\Dir' + str(i)) 
```

但是，使用字符串格式可能会更好，这样可以提供更大的灵活性，例如包括前导零：

```
for i in range(500, 520):
    os.mkdir(r'C:\Dir{:04d}'.format(i)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:33:52.550

使用字符串格式：

```
os.mkdir(r'C:\Dir%s' % i) 
```

# android - SlidingDrawer 确定抽屉是否在完全打开之前被拉出并推回

> ID：10916348
> 
> 赞同：1
> 
> 时间：2012-06-06T14:32:02.133
> 
> 标签：android, slidingdrawer

我正在尝试使用 SlidingDrawer ViewGroup，但遇到了一些障碍。我们可以将一些侦听器附加到 SlidingDrawer：

```
OnDrawerScrollListener
OnDrawerOpenListener
OnDrawerCloseListener 
```

最初拉动 SlidingDrawer 句柄时调用 onScrollStarted()。

onScrollEnded() 当用户停止在手柄上跟踪他们的手指时调用（令人惊讶的是不是在动画结束之后）。

onDrawerOpened() 仅在用户抬起手指并且抽屉动画完全打开时调用。

onDrawerClosed() 仅在用户抬起手指并且抽屉已动画完全关闭时调用。

我想在抽屉开始打开的那一刻禁用我的 Activity 的主视图（这可以通过 onScrollStarted() 完成）。当抽屉关闭时，我想启用我的 Activity 的主视图。如果用户将抽屉拖到半开，然后（不抬起手指）再次将抽屉完全关闭，那么我不知道如何确定是否再次启用主视图，因为未调用 onDrawerClosed()。我不能只在 onScrollEnded() 中启用主视图，因为该方法是在抽屉完全打开或完全关闭之前调用的。

我提到的 3 个监听器中的调用顺序是：

onScrollStarted() onScrollEnded() onDrawerOpened() / onDrawerClosed()

很明显，在 onScroll 方法中，除非我监听触摸事件，否则无法确定抽屉是“打开”还是“关闭”。有没有办法让我做到这一点不会那么混乱？

谢谢。

编辑：这是我的代码片段。

```
private boolean mDrawerScrolling = false;

    @Override
    public void onDrawerOpened() {
        Log.d(TAG, "onDrawerOpened");
    }

    @Override
    public void onDrawerClosed() {
        mViewPager.setScrollEnabled(true);

        Log.d(TAG, "onDrawerClosed");

        final View view = (View) mDrawer.getTag();
        if (view != null) {
            final Animator fadeInAnimation = AnimatorInflater.loadAnimator(
                    InboxActivity.this, R.animator.fade_out);
            fadeInAnimation.setTarget(view);
            fadeInAnimation.addListener(new AnimatorListenerAdapter() {

                @Override
                public void onAnimationEnd(Animator animation) {
                    removeView();
                }

                @Override
                public void onAnimationCancel(Animator animation) {
                    removeView();
                }

                private void removeView() {
                    ViewGroup container = (ViewGroup) findViewById(R.id.container);

                    container.removeView(view);
                }

            });
            fadeInAnimation.start();

            mDrawer.setTag(null);
        }
    }

    @Override
    public void onScrollEnded() {
        mDrawerScrolling = false;

        int left = mDrawer.getHandle().getLeft();

        Log.d(TAG, "onScrollEnded() " + left);
    }

    @Override
    public void onScrollStarted() {
        mDrawerScrolling = true;
        mCanHide = false;

        Log.d(TAG, "onScrollStarted");

        /*
         * Open the drawer if it is not open yet.
         */
        if (mDrawer.getTag() == null) {
            final View dimView = getLayoutInflater().inflate(
                    R.layout.drawer_outer, null);
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.MATCH_PARENT,
                    RelativeLayout.LayoutParams.MATCH_PARENT);
            dimView.setLayoutParams(params);
            dimView.setOnTouchListener(this);

            final ViewGroup container = (ViewGroup) findViewById(R.id.container);
            container.addView(dimView);
            container.bringChildToFront(mDrawer);

            final Animator fadeInAnimation = AnimatorInflater.loadAnimator(
                    InboxActivity.this, R.animator.fade_in);
            fadeInAnimation.setTarget(dimView);
            fadeInAnimation.start();

            mDrawer.setTag(dimView);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T22:35:16.863

前段时间我遇到了类似的问题，并设法创建了一个使用这些`setOnDrawerScrollListener(), isMoving(), isOpened(), Runnable(), Handler(), and Thread()`类的简单解决方案。我在下面发布了我的解决方案和评论。

```
 mSlidingDrawer.setOnDrawerScrollListener(new OnDrawerScrollListener() {

        private Runnable mRunnable = new Runnable() {

            @Override
            public void run() {
                // While the SlidingDrawer is moving; do nothing.
                while (mSlidingDrawer.isMoving())
                {
                    // Allow another thread to process its instructions.
                    Thread.yield();
                }

                // When the SlidingDrawer is no longer moving; trigger mHandler.
                mHandler.sendEmptyMessage(0);
            }
        };

        private Handler mHandler = new Handler() {

            public void handleMessage(Message msg) {

                if (mSlidingDrawer.isOpened()) {
                    // TODO: Case 1 - If the SlidingDrawer is completely opened...
                }
                else {
                    // TODO: Case 2 - If the SlidingDrawer is completely closed...
                }
            }
        };

        @Override
        public void onScrollEnded() {
            new Thread(mRunnable).start();
        }

        @Override
        public void onScrollStarted() {
            // TODO: When the user beings to scroll the SlidingDrawer...
        }
    }); 
```

注意：将引用替换为`mSlidingDrawer`您希望执行这些指令的 SlidingDrawer 的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:41:31.663

结合您到目前为止所做的工作，如何在slidingdrawer 类中使用其他状态函数。我正在考虑使用诸如`isOpened`or之类的功能`isMoving`。您可以在 inScrollEnded 中调用这些来确定抽屉的状态并采取相应的措施。

# android - 如何通过特定的 Mailaccount 通过 ACTION_SEND 发送电子邮件？

> ID：10916355
> 
> 赞同：0
> 
> 时间：2012-06-06T14:32:28.040
> 
> 标签：android, email

我想通过以下方式发送电子邮件

```
Intent i = new Intent(Intent.ACTION_SEND); 
```

不显示 createChooser 视图。程序应该自动选择正确的 E-Mailapp 和 -account，只需要给出发送邮件的 Mailaccount 的 E-Mailaddress。

例如：

我的手机有一个 gmail 和两个 imap 帐户（通过股票电子邮件应用程序使用）：

1.  邮箱：foo@gmail.com
2.  IMAP-账户：bar@barbar.com
3.  IMAP-帐户：tar@tartar.com

现在我在我的应用程序中看到了一个视图，例如显示“bar@barbar.com”。如果我点击它，我想打开 IMAP-Account(2.) 的撰写对话框。如果我单击“tar@tartar.com”IMAP-Account(3.) 的 commpose-dialog，依此类推...没有用户在电子邮件应用程序的选择器中选择它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:50:23.010

这是不可能的。

首先，用户可以自由使用他们想要的任何邮件客户端。您无法确定哪个邮件客户端（如果有）处理给定的邮件帐户，更不用说以某种方式神奇地进入该特定应用程序了。

其次，我不知道有任何邮件客户端有专门的、记录的和受支持的 API 供您专门通过它们发送邮件。当然，您引用的两个电子邮件应用程序（Gmail 和“​​股票电子邮件应用程序”）都没有。

# sql - 返回 setof varchar

> ID：10916356
> 
> 赞同：0
> 
> 时间：2012-06-06T14:32:29.903
> 
> 标签：sql, database, postgresql, stored-procedures, types

我有 PostgreSQL 表。我需要在返回的函数中`setof varchar`。我的桌子：

```
create table my_table (
    str varchar not null
) 
```

如何编写返回一组`str`字段的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:57:24.910

Basic example with `LANGUAGE SQL`:

```
CREATE OR REPLACE FUNCTION foo()
  **RETURNS SETOF varchar**
  LANGUAGE SQL AS
$BODY$
    SELECT str
    FROM   my_table
    WHERE  <some condition>;
$BODY$;
```

Call:

```
SELECT * FROM foo(); 
```

Start by reading [the basics in the manual](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html).

# apache-flex - Flex 移动日历组件

> ID：10916357
> 
> 赞同：0
> 
> 时间：2012-06-06T14:32:38.530
> 
> 标签：apache-flex, flex4, flex-mobile

我正在寻找 Flex 移动日历组件，但我无法取得任何成功。我该如何实施它的替代方案，或者您之前是否尝试过任何可用的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:01:17.323

我们刚刚发布了用于 Flex 移动设备的 KC-Calendar 组件。
在这里查看：http: [//www.flex-component.com/flex-components/mobile-kc-calendar](http://www.flex-component.com/flex-components/mobile-kc-calendar)

# ndepend - 使用 NDepend 查找“死”程序集

> ID：10916359
> 
> 赞同：3
> 
> 时间：2012-06-06T14:32:44.863
> 
> 标签：ndepend, cqlinq

我正在为我的客户评估 NDepend 工具，并想知道是否有人可以为以下查询提供帮助：

```
// <Name>Potentially dead Assemblies</Name>
warnif count > 0 
    from a in JustMyCode.Assemblies where
       a.NbTypesUsingMe == 0
       select a 
```

尽管这提供了一个大列表，但我还想检查唯一的引用是否来自测试项目，例如仅由 MyNamespace.Tests 引用的 MyNamespace。

怎么可能做到这一点？我还没有找到有关创建不带常量的 IsUsedBy 的文档。

真挚地，

马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:53:39.407

对于匹配死程序集，您不需要计算类型，而只需使用我来计算程序集：

```
warnif count > 0 
from a in JustMyCode.Assemblies where
  a.AssembliesUsingMe.Count() == 0
  select a 
```

如果您想使用程序集匹配类型的条件，您可以编写如下内容：

```
warnif count > 0 
from a in JustMyCode.Assemblies
let typesUser =  Application.Types.Using(a)
where typesUser.Count() == 0 ||
      typesUser.ParentNamespaces()
      .WithNameWildcardMatchNotIn("MyNamespace.Tests*").Count() == 0
select a 
```

请注意，在前面的查询中，我们甚至没有对 typesUser （使用 a `typesUser.Where(t => ...)`）进行迭代，而是使用 NDepend.API 设置方法，例如[WithNameWildcardMatchNotIn()](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel.ExtensionMethodsNaming~WithNameWildcardMatchNotIn.html)。

# c++ - C ++：是否有带有“全部添加”方法的“无尽”容器？

> ID：10916360
> 
> 赞同：0
> 
> 时间：2012-06-06T14:32:46.760
> 
> 标签：c++, containers

> **可能重复：**
> [C++：将向量附加到向量](https://stackoverflow.com/questions/2551775/c-appending-a-vector-to-a-vector)

我正在寻找无限容器（只要我有足够的空间，我就可以在运行时添加元素，只要我有足够的空间），例如具有接受另一个容器和副本的方法的“向量”或“链表”它的元素。

有这样的事吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T14:37:24.380

您可以使用`std::copy`和`back_inserter`迭代器将一系列值插入到任何可变大小的标准容器中。

`std::vector`还有一个接受范围的插入重载。

请参阅[将向量附加到向量](https://stackoverflow.com/questions/2551775/c-appending-a-vector-to-a-vector)，答案实际上可用于容器，而不仅仅是向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:33:25.730

`vector`支持这个功能，通过构造函数：

```
template <class InputIterator>
     vector ( InputIterator first, InputIterator last, 
               const Allocator& = Allocator() ); 
```

和：

```
std::vector<int> source;  
//populate source
std::vector<int> dest(source.begin(),source.end()); 
```

# c# - ASP.NET 2.0 存储过程删除不起作用

> ID：10916366
> 
> 赞同：0
> 
> 时间：2012-06-06T14:33:01.250
> 
> 标签：c#, asp.net-2.0

我有一个在单击按钮时触发的事件，该事件调用一个从数据库中删除所选行的存储过程。

在调试时，我已经用 id 对存储过程进行了硬编码，以确保删除在 SQL 端工作，所以我不会发布存储过程。我还进入了我的页面并在选择要删除的记录时确保将隐藏字段设置为记录的 ID。

当我单击时，我看到回发，所以我看到按钮触发，这可能是我的代码或我不知道的权限问题或在哪里寻找的小而愚蠢的问题。

存储过程的参数是一个整数，我没有抓住或抛出任何类型的错误，数据只是没有被删除。

感谢您在此问题上的任何帮助，一如既往地非常感谢。

这是单击按钮时触发的代码。

```
if (isAdmin)
{
    SqlConnection cnx = new SqlConnection(server);
    SqlCommand cmd = new SqlCommand("STOREDPROCNAME", cnx);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@VARIABLEFORPROC", Convert.ToInt16(hiddenfield1.Value.ToString()));

    try
    {
       cnx.Open();
       cmd.ExecuteNonQuery();
       cnx.Close();
    }
    catch (Exception ex)
    {
       throw new Exception("Error executing MyProcedureName.", ex);
    }
}

fillDataGrids(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:43:13.510

[SQL Int 类型映射到 C# Int32 类型](http://msdn.microsoft.com/en-us/library/ms131092.aspx)。您可能会在转换过程中丢失数据。尝试更换

```
cmd.Parameters.AddWithValue("@VARIABLEFORPROC", Convert.ToInt16(hiddenfield1.Value.ToString())); 
```

和

```
cmd.Parameters.AddWithValue("@VARIABLEFORPROC", Convert.ToInt32(hiddenfield1.Value.ToString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:42:26.940

您必须在 SQL 中尝试存储过程的准确性，而不是在事务上尝试并在数据库上记录异常您必须确定错误发生在哪里

# php - 简单的 CURL 复制不起作用？

> ID：10916369
> 
> 赞同：0
> 
> 时间：2012-06-06T14:33:06.840
> 
> 标签：php, curl

我正在使用 CURL 复制文件：

```
$ch = curl_init ($copyMe);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.9) Gecko/20071025 Firefox/2.0.0.9");
$rawdata=curl_exec($ch);
curl_close ($ch);
$fp = fopen($toTarget,'x');
fwrite($fp, $rawdata);
fclose($fp); 
```

问题是，当文件很大（超过 3Mb）时，服务器最终会得到一个大小为 0Kb 的文件。所以我的问题是....为什么 CURL 不复制大文件，我缺少什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:37:31.877

尝试将输出直接发送到文件：

```
curl_setopt($ch, CURLOPT_FILE, $fp); 
```

# ms-access - 在 Access 图上显示两个数据字段

> ID：10916377
> 
> 赞同：1
> 
> 时间：2012-06-06T14:33:44.653
> 
> 标签：ms-access, graph

我正在将图表创建为 Access 表单，但我不知道如何在同一个图表上显示两个数据字段。我有一个数据表（嗯，真的是一个查询）：

```
tran_type | avg_cycle_time | count_of_cycle_time
A         | 26             | 1
B         | 31.5           | 2
C         | 42.56          | 25 
```

现在我有一个条形图`avg_cycle_time by tran_type`（所以横轴上的 A、B、C，然后是三个显示 26、31.5 和 42.56 值的条形图）。

理想情况下，我想做的是显示该栏中的值的计数，尽管我认为这可能会很棘手，所以我会选择折线图或其他东西来显示计数（对于这种情况，我认为这很重要当用户看到一个平均值时，他/她也会看到有多少数据点进入该平均值）。

我知道根据数据，这可能意味着在垂直轴上有两个刻度，但我不确定这是否有问题或是否受支持。我觉得我已经在 Excel 中看到过这种类型的事情，也许 Access 图表没有那么健壮，但不幸的是该应用程序在 Access 中，所以希望有一个解决方案。如果需要，我可以使用 VBA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:19:59.420

After some playing around, this was actually easier than I was making it. When setting up the graph using the wizard, drag both fields (in this case avg_cycle_time and count_of_cycle_time) to the vertical axis. If a bar chart is selected, this will create two bars side by side for each tran_type. What I learned though is you can right click on one set of bars (in Design mode) and select Chart Type, and that will alter the type for just that data series. So I changed the second set of bars to a line.

If you then want to have a second set of axis values (say if one field was a number and the other was a percentage, or the values in each set are out of whack), you can right click on the series and select Format Data Series, and on the Axis tab choose Secondary axis. You can also show the value of that series--on the Data Labels tab select to show values. This got me what I was looking for in showing the number of data points for each bar (even though the actual value is associated with the line, it's still what I was hoping to represent).

# jquery - 如何为fancybox jquery设置图像序列

> ID：10916383
> 
> 赞同：0
> 
> 时间：2012-06-06T14:33:59.357
> 
> 标签：jquery, image, fancybox, sequence

我网站的布局意味着大多数图像都在各种浮动 div 中。因此，当它们在 fancybox 中打开时，它们不会以正确的顺序出现（而是按照它们在代码中的顺序）。有没有办法给每个图像一个数字，以便它们以正确的顺序出现？

谢谢！

# javascript - HTML5 Js 增量

> ID：10916384
> 
> 赞同：1
> 
> 时间：2012-06-06T14:34:01.033
> 
> 标签：javascript, html

我正在使用 HTML5 画布元素制作一系列圆圈。我正在使用 while 循环来增加圆圈的大小。我试图将它们增加三，但我不确定语法是否正确。

```
 var cirSize = 2;

    while (cirSize < 400)
      {
        ctx.beginPath();
        ctx.strokeStyle="#000000"; 
        ctx.arc(480,480,cirSize++,0,Math.PI*2,true);
        ctx.stroke();
        alert(cirSize)
      } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:35:12.610

`cirSize++`将加一，`++cirSize`. 但是有区别。前者将*返回*`cirSize`first的值，*然后*递增。而后者将*先递增*，*然后*返回`cirSize`

```
var cirSize = 2;

while (cirSize < 400)
  {
    ctx.beginPath();
    ctx.strokeStyle="#000000"; 
    ctx.arc(480,480,cirSize,0,Math.PI*2,true);
    ctx.stroke();
    cirSize += 3; // here's the change.
    alert(cirSize)
  } 
```

# css - 在元素上添加图像

> ID：10916386
> 
> 赞同：0
> 
> 时间：2012-06-06T14:34:02.290
> 
> 标签：css

是否可以在没有 javascript 的元素上添加透明图像（如条纹）或在 html 中添加其他元素，这是一种 css 前景技术。类似于内部实验的东西`border-image`a`box-sizing:border-box;`或类似的东西`:after`？

```
<div class="striped">lorem ipsum dolores</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:43:28.043

是的，你可以这样做，例如使用`:after`- [http://jsfiddle.net/U3rfH/](http://jsfiddle.net/U3rfH/)

只需将背景颜色更改为背景图像：

```
div {
   margin: 30px;
    position: relative;
}

div:after {
    content: "";
    position: absolute;
        top: 0;
        left: 0;
    width: 100%;
    height: 100%;
    background: rgba(200, 0, 200, .2);
} 
```

# php - 尝试使用 MySQL 中的键组合来自两个表的结果集

> ID：10916397
> 
> 赞同：0
> 
> 时间：2012-06-06T14:34:33.523
> 
> 标签：php, sql

我有两个数据表，`songs`因此`files`在 MySQL 数据库中：

歌曲表：

```
 song_id   |   song_title    |
     1      |     A Title     |
     2      |     B Title     | 
```

文件表：

```
 file_id   |    file_name    |  parent_id  |
    1       |    asong.mp3    |     1       |
    2       |    bsong.mp3    |     1       | 
```

我想做一个 SQL 查询来返回这样的集合（其中 song_id = 1）：

```
song_id => 1
song_title => A Title
song_files = Array(
     0 => Array(
            file_id => 1
            file_name => asong.mp3
          )
     1 => Array(
            file_id => 2
            file_name => bsong.mp3
          )
) 
```

理想情况下，我只想查询一次数据库，并且一直在探索 JOIN，但我不相信这是我需要的方法。我正在使用 PHP 5

非常感谢！奥利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:59:06.503

使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)聚合函数，它返回值的[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)，如下所示：

```
select song_id, song_title, group_concat(file_name) as file_names
from songs
join files on files.parent_id = songs.song_id
group by 1, 2 
```

结果将如下所示：

```
song_id | song_title | file_names
---------------------------------------------------
1       | A Title    | asong.mp3,bsong.mp3 
```

如果您想要一个文件名数组，则必须`file_names`在 php 代码中将值拆分为逗号。

group_concat 返回的术语顺序未定义，但如果文件名的顺序很重要，您可以`order by` *在*group_concat 中嵌入 a。例如，对于字母顺序使用：

```
group_concat(file_name order by file_name) as file_names 
```

或用于文件创建顺序使用：

```
group_concat(file_name order by file_id) as file_names 
```

# mysql - 错误 1064：您的 SQL 中有一个错误...语法在第 1 行的“AND status = '1'' 附近使用

> ID：10916404
> 
> 赞同：0
> 
> 时间：2012-06-06T14:35:07.397
> 
> 标签：mysql, syntax-error, mysql-error-1064

如何解决此错误？

```
SELECT user_id, CONCAT(firstname, ' ', lastname) AS fullname FROM user AND status = '1' in .../database/mysql.php on line 49 
```

这是实际的代码：

```
$query = $this->db->query("SELECT user_id, CONCAT(firstname, ' ', lastname) AS fullname FROM " . DB_PREFIX . "user " . $except . " AND status = '1'"); 
```

我检查了这些字段，我的所有用户的个人资料中都有名字/姓氏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:35:53.687

你需要一个 where 子句——不仅仅是从 AND 开始

```
$query = $this->db->query("SELECT user_id
, CONCAT(firstname, ' ', lastname) AS fullname 
FROM " . DB_PREFIX . "user " . $except . " 
WHERE status = '1'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:36:37.773

尝试用 WHERE 替换AND **-****我**认为这会做你想要的

# jquery - jQuery UI sortable - 手动将项目从一个列表移动到另一个列表时触发可排序事件

> ID：10916410
> 
> 赞同：2
> 
> 时间：2012-06-06T14:35:27.260
> 
> 标签：jquery, jquery-ui, triggers, jquery-ui-sortable, jquery-events

你如何在没有用户拖放项目的情况下触发 jQuery UI 可排序事件？

这是[jsFiddle](http://jsfiddle.net/eBnVJ/15/)上的一个示例。

当您单击按钮时，“列表 A”中的任何“选定”项目都将移动到“列表 B”。但是，不会触发可排序事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:15:26.437

假设我正确理解了您的问题，我要做的就是创建一个在`receive`触发可排序事件或单击“全部移动”按钮时调用的方法。

## [这是一个例子。](http://jsfiddle.net/6FZ3b/1/)

# php - 单击链接/按钮时更改 div 的内容

> ID：10916411
> 
> 赞同：5
> 
> 时间：2012-06-06T14:35:31.557
> 
> 标签：php, jquery, html

基本上我有一个网页，有一个 div id="content" 和一个 div id="sidebar"，

我想做的是在侧边栏中单击链接/按钮时更改内容 div 中的内容，而每篇文章都没有单独的页面。

原因是；

我正在为一些多个乐队做一个 BIO 页面，每个乐队会有多个按钮，然后当用户点击按钮/链接时，内容会改变。

任何想法，我一直在研究 .click 使用 jQuery 或 PHP，但不完全确定如何实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:43:59.743

您可以将每篇文章放在服务器上的一个 HTML 文件中，每篇文章周围都有一个 div，如下所示（假设该文件名为 myArticles.html 并且与您的主页位于同一文件夹中）：

```
<div id='article1'>
    <b>ARTICLE 1</b> This is my first article
</div>

<div id='article2'>
    <b>ARTICLE 2</b> This is my second article
</div> 
```

然后使用 jQuery 的`.load`函数通过 AJAX 将这些数据加载到您的页面中。

假设您的文章 1 的按钮具有 id = 'articleButton1' 和 2 具有 id = 'articleButton2' （并且都具有 href='#'，因此页面不会改变），那么这个 jQuery 将起作用：

```
$('#articleButton1').click(function(){
    $('#content').load('myArticles.html #article1');
}

$('#articleButton2').click(function(){
    $('#content').load('myArticles.html #article2');
} 
```

这会从服务器上的该页面中选择正确的 div 并将其放入`#content`div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:38:56.037

您需要查看本教程，

[制表](http://unwrongest.com/projects/tabify/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:48:53.033

jQuery UI 垂直标签呢？ [http://jquery-ui.googlecode.com/svn/trunk/demos/tabs/vertical.html](http://jquery-ui.googlecode.com/svn/trunk/demos/tabs/vertical.html)

更多关于 jQuery UI 选项卡和通过 ajax 加载内容：http: [//jqueryui.com/demos/tabs/#ajax](http://jqueryui.com/demos/tabs/#ajax)

# jquery - JCrop 的 IE 问题

> ID：10916412
> 
> 赞同：3
> 
> 时间：2012-06-06T14:35:35.763
> 
> 标签：jquery, asp.net, internet-explorer, jcrop

我在我的 aspx 页面中使用 jcrop：

```
<script type="text/javascript" src="../../Scripts/js/jquery.Jcrop.min.js"></script>
<link rel="Stylesheet" href="../../Scripts/css/jquery.Jcrop.min.css" /> 
```

这是我的 JCrop 声明：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#' + options.ImageID).Jcrop({
            onChange: function (coords) {
                $('#' + options.HiddenID).val(coords.x + ',' + coords.y + ',' + coords.w + ',' + coords.h);
            },
            aspectRatio: 1
        });
    });
</script> 
```

这是我的 .NET 图像：

```
<asp:Image runat="server" ID="PhotoPreviewImage" /> 
```

options 变量是在后面的代码中创建的一个对象，用于将 PhotoPreviewImage 的 ClientID 传递给 JS。

这在 Chrome 中效果很好，在 IE9 中不起作用（我什至没有得到十字准线）。

我正在使用 jquery.Jcrop.min.js v0.9.10 (build:20120429) 和 jQuery v1.7.1 jquery.com

如何在 IE 中完成这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-05T20:32:17.017

我最终不得不检测 IE 并使用两种格式之一进行初始化：

```
 var is_msie = /msie/.test(navigator.userAgent.toLowerCase());
        var jcrop_obj;

        if (is_msie) {
            jcrop_obj = jQuery.Jcrop('#img', {
                onSelect: jcrop_onEndCrop,
                minSize: [ 20, 20 ],
                setSelect: [ x, y, x2, y2 ],
                allowSelect: false
            });
        }
        else {
            jQuery('#img').Jcrop({
                onSelect: jcrop_onEndCrop,
                minSize: [ 20, 20 ],
                setSelect: [ x, y, x2, y2 ],
                allowSelect: false
            },function(){jcrop_obj = this;});
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T17:36:44.200

过去，我在 IE 中遇到了 JCrop 的一些问题。我通过将“onSelect”和“onRelease”事件添加到选项对象来解决它。我不知道这是否会对您的情况有所帮助，但值得一试。我的代码如下所示：

。网

```
<asp:Image ID="cropbox" runat="server" ImageUrl="Assets/images/blank.gif" /> 
```

Javascript：

```
<script>
$(document).ready(function () {
    var api = $.Jcrop('#cropbox', {
        aspectRatio: 1,
        onSelect: update,
        onChange: update,
        onRelease: update
    });
});

function update(c) {
    //Store coords here
}
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-15T22:39:04.603

这绝对修复了 IE 10 兼容模式的初始化。

# c - 概念插值算法

> ID：10916415
> 
> 赞同：1
> 
> 时间：2012-06-06T14:35:46.423
> 
> 标签：c, algorithm, math, interpolation

G' Morning SO-

我正在尝试移动视频上的一些边界框。我正处于一个症结所在。如果我在数据文件中每 15 帧就有一个帧，那么我必须在每个真实帧之间创建 14 个帧。由于它是一个工具（实际上是 ffmpeg 插件的一部分），它需要适用于任何间隙大小。

我编写了一个函数，它获取两点之间的距离，以及它必须从起点平滑过渡到终点的帧数。理想情况下，此函数将返回一个数组，其中包含从前一帧移动多少像素

例如，如果第 1 帧的 x 为 50，第 16 帧的 x 为 65，那么我将拥有一个全为 1 的数组，这样每一帧都会在之前的帧中添加一个。这是我到目前为止所得到的：

```
int* generateSequence(int difference, int numStep){
  int* sequence = (int*)malloc(sizeof(int*)*numStep);
  int i;
  for(i=0; i<numStep; i++){ 
    sequence[i] = 0;
  }
  while(difference > numStep){
    for(i=0; i<numStep; i++){ 
      sequence[i]++;
    }
    difference -= numStep;
  } 
```

我对这部分感到满意​​，（对于两者之间的距离的每倍数超过其间的帧数，它会在每个帧之间添加一个）。

但是现在我已经到了需要向某些帧添加一个但不是全部的地步。我所拥有的只是这些陪审团操纵的算法，对于产生不同帧距离的工具来说，这些算法不是很便携......

```
double delta = difference/numStep;
if(delta >=.05 && delta< .20){
  for(i=0; i<numStep; i+=6){ 
    sequence[i]++;
  }
} 
```

我应该使用模数运算符还是以不同的方式接近它？硬编码看起来像任意值并不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:18:04.327

为了使这个盒子动画平滑，您需要能够在每一帧上绘制矩形，这样矩形的坐标就不会被整数量化。换句话说，如果您的插值计算结果（例如）X 值为 21.354 和 Y 值为 50.813，则将这些值分别舍入为 21 和 51 将不起作用；矩形的最终运动将非常不稳定和不规则。

问题是视频的帧是基于像素的，这意味着通常没有内置的方法来绘制具有真实（又名浮点，而不是整数）坐标的线条或矩形。如果您用于在每个帧上绘制矩形的库仅支持整数坐标而不支持浮点坐标（并且您应该检查这一点，因为许多图形库*确实*支持浮点坐标，这将使这项任务非常容易你），那么你将不得不为此推出自己的产品。

您使用什么库将这些矩形实际绘制到视频的每一帧上？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:29:52.680

更一般地说，听起来您想要生成`x`总和为 的“最平滑”的整数系列`y`。（平滑度是系列中元素之间的最小平均距离。）

这可以通过以下算法来实现。

```
given sum and steps
float step = sum/steps
float delta = 0
sequence = []
for x:
    int integerstep = round(step + delta)
    delta += step - integerstep
    sequence.push(round(integerstep)) 
```

可以在下面找到 python 中的示例实现（对不起，不是交流人）。

```
def renderSmoothIntegerSequence(steps, distance):
    step = float(distance)/steps
    delta = 0
    sequence = []
    for _ in xrange(steps):
        integerstep = int(round(step + delta))
        delta += step - integerstep
        sequence.append(integerstep)
    return sequence 
```

示例调用：

```
>>> print renderSmoothIntegerSequence(5,8)
[2, 1, 2, 1, 2]
>>> print renderSmoothIntegerSequence(5,7)
[1, 2, 1, 2, 1]
>>> print renderSmoothIntegerSequence(32,1)
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
>>> print renderSmoothIntegerSequence(1,50)
[50] 
```

# android - 模拟器无法正确使用 dps

> ID：10916424
> 
> 赞同：0
> 
> 时间：2012-06-06T14:36:08.980
> 
> 标签：android, android-emulator

我有一个简单的布局，只有一个按钮。

```
<Button
    android:id="@+id/button1"
    android:layout_width="200dp"
    android:layout_height="80dp"
    android:text="Button"/> 
```

我想看到按钮在不同的密度下正确缩放。我创建了三个仿真器，具有不同的抽象液晶密度（120,160 和 240）。

当我在树模拟器中运行应用程序时，每个模拟器中的按钮大小都更大。如果我以像素为单位读取按钮的高度和宽度，我可以看到大小是正确的。

模拟器中的密度有问题吗？

Android的版本是ICS。

非常感谢。

**编辑。**

我上传了一些关于这个问题的图片。第一张图像的密度为 160，第二张图像的密度为 240。

[screen_with_160_screen_home](https://picasaweb.google.com/101173880172485002884/Captures_android#5751170683038901490)
[screen_with_240_screen_home](https://picasaweb.google.com/101173880172485002884/Captures_android#5751170705021518370)

您可以看到 240 中的所有元素都更大，甚至是主屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:43:37.800

//根据使用dp或dip时的密度不同

```
if 200dp in 120 dpi=200×120÷160=150px
if 200dp in 160 dpi=200×160÷160=200px
if 200dp in 240 dpi=200×240÷160=300px 
```

这`dp/dip`将自动缩放

如果你想要固定大小意味着你需要使用`px`

[最佳实践：](http://developer.android.com/guide/practices/screens_support.html#screen-independence)

# python - 使用 SUDS 时添加 xsi:type 和信封命名空间

> ID：10916433
> 
> 赞同：1
> 
> 时间：2012-06-06T14:36:32.033
> 
> 标签：python, xml, soap, wsdl, suds

我需要与 SOAP 服务进行交互，并且在这样做时遇到了很多麻烦；非常感谢对此的任何指示。原来的错误信息是：

```
org.apache.axis2.databinding.ADBException: Any type element type has not been given 
```

经过一番研究，事实证明这是SUDS之间的分歧，服务器必须如何处理

```
type="xsd:anyType" 
```

关于有问题的元素。

我已经确认使用 SOAPUI，并且在建议可以通过以下步骤解决问题后：

1.  将 xsi:type="xsd:string" 添加到导致问题的每个元素
2.  将 xmlns:xsd="http://www.w3.org/2001/XMLSchema" 添加到 SOAP 信封

因此，SUDS 目前在哪里执行此操作：

```
<SOAP-ENV:Envelope ... xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<ns3:Body>
  <ns0:method>
     <parameter>
        <values>
           <table>
              <key>EMAIL_ADDRESS</key>
              <value>example@example.org</value>
           </table>
        </values>
     </parameter>
  </ns0:method> 
```

它应该产生这个：

```
<SOAP-ENV:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" ... xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">

  <ns3:Body>
  <ns0:method>
     ...
     <parameter>
        <values>
           <table>
              <key xsi:type="xsd:string">EMAIL_ADDRESS</key>
              <value xsi:type="xsd:string">example@example.org</value>
           </table>
        </values>
     </parameter>
  </ns0:method> 
```

有没有正确的方法来做到这一点？我已经看到使用 ImportDoctor 或 MessagePlugins 的建议，但还没有真正了解如何达到预期的效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T09:46:08.900

我找到的解决方案是使用 MessagePlugin 在发送之前手动修复 XML。我希望有更优雅的东西，但至少这是可行的：

```
class SoapFixer(MessagePlugin):

    def marshalled(self, context):
        # Alter the envelope so that the xsd namespace is allowed
        context.envelope.nsprefixes['xsd'] = 'http://www.w3.org/2001/XMLSchema'
        # Go through every node in the document and apply the fix function to patch up incompatible XML. 
        context.envelope.walk(self.fix_any_type_string)

    def fix_any_type_string(self, element):
        """Used as a filter function with walk in order to fix errors.
        If the element has a certain name, give it a xsi:type=xsd:string. Note that the nsprefix xsd must also
         be added in to make this work."""
        # Fix elements which have these names
        fix_names = ['elementnametofix', 'anotherelementname']
        if element.name in fix_names:
            element.attributes.append(Attribute('xsi:type', 'xsd:string')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:06:51.293

就像这个特定图书馆的很多事情一样，这既可悲又可笑，但这是确切的答案：

[http://lists.fedoraproject.org/pipermail/suds/2011-September/001519.html](http://lists.fedoraproject.org/pipermail/suds/2011-September/001519.html)

从上面：

```
soapenv = soapenv.encode('utf-8')
plugins.message.sending(envelope=soapenv) 
```

变成：

```
soapenv = soapenv.encode('utf-8')
ctx = plugins.message.sending(envelope=soapenv)
soapenv = ctx.envelope 
```

基本上，这是实现中的一个错误，您可以通过编辑运行插件的行来自己修补它以实际返回插件的结果，但我不知道修复此问题的 SUDS 的修补和更新版本（虽然我没有仔细看）。

# java - 我应该使用哪个 JSObject？

> ID：10916435
> 
> 赞同：5
> 
> 时间：2012-06-06T14:36:50.497
> 
> 标签：java, javascript, applet, jsobject

我正在尝试使 Java 小程序在其封闭环境中通过 javascript 进行交互。

到目前为止，我一直使用`netscape.javascript.JSObject`as 类型来处理从 JS 对 Java 函数的调用，但我刚刚发现还有一个`sun.plugin.javascript.JSObject`，甚至一个`sun.plugin.javascript.navig.JSObject`！

我试过更多地了解这两个其他版本，但无济于事。我应该坚持`netscape.javascript.JSObject`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:43:10.937

> 我试过更多地了解这两个其他版本，但无济于事。我应该坚持`netscape.javascript.JSObject`吗？

是的。它是其他类的公共接口，可能在幕后支持它。

# arrays - 数组作为“movieclip”actionscript 3.0

> ID：10916440
> 
> 赞同：0
> 
> 时间：2012-06-06T14:37:03.663
> 
> 标签：arrays, actionscript-3, flash, movieclip

我的目标是在我的舞台上加载多个（动画）对象，作为一个电影剪辑 trought 一个数组。

我当前的代码：

```
var vijand:Array;

vijand = new Array  ;
vijand.push(new Vijand(-580,-200));
vijand.push(new Vijand(-500,-200));
vijand.push(new Vijand(-420,-200));
for (var n:int = 0; n < vijand.length; n++)
{
    this.addChild(vijand[n]);

}
    //not working part. They do load on my stage. But I cant control the animation within the file(its a .SWF file I load)

    for (var n:int = 0; n < vijand; n++){
   gotoAndStop(1)
       } 
```

所以基本上我的问题是我怎样才能让所有这些用“gotoAndStop(1)”和/或“gotoAndStop(2)”来做动画，依此类推。

编辑：在代码中加载它的外部文件

```
public function Vijand(positieX:int, positieY:int)
    {
        vijand = new Loader();
        vijand.load(new URLRequest("resources/vijand.swf"))
        this.addChild(vijand);
        vijand.x = positieX;
        vijand.y = positieY;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:10:52.543

那是你需要的吗？

```
var vijand:Array;

vijand = new Array  ;
vijand.push(new Vijand(-580,-200));
vijand.push(new Vijand(-500,-200));
vijand.push(new Vijand(-420,-200));
for (var n:int = 0; n < vijand.length; n++)
{
    this.addChild(vijand[n]);
    MovieClip(vijand[n]).gotoAndStop(1); //or gotoAndPlay(1) - depending on your needs

} 
```

**编辑**

加载的 SWF**是**一个电影剪辑。您需要访问加载程序的内容。我不确定如何在`vijand`用于数组和加载器的代码中调用变量。

示例代码：

```
var myMovieClip:MovieClip;
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaded);
loader.load(new URLRequest("resources/vijand.swf"));

function onLoaded(e:Event):void
{
    myMovieClip = MovieClip(loader.content);
    myMovieClip.gotoAndStop(1);
    //you can add this MovieClip to the array and so on...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:40:50.297

为此编写一个方法。

```
function animateAll(array:Array):Array
{
  if (!array || array.length == 0) return array

  for each(var m:MovieClip in array) m.gotoAndStop(1);

  return array;
} 
```

# php - 如何在mysqli中转义字符串

> ID：10916441
> 
> 赞同：4
> 
> 时间：2012-06-06T14:37:07.197
> 
> 标签：php, mysqli

在旧的 mysql() 代码中，为了转义字符串，我这样做了：

```
t.TeacherUsername = '".mysql_real_escape_string($teacherusername)."' 
```

我正在将我的代码更改为 mysqli，但是我想确定并且为了安全起见，要在 mysqli 中转义一个字符串，如下所示：

```
t.TeacherUsername = '".mysqli_real_escape_string($teacherusername)."' 
```

也连接到mysqli数据库是这样的：

```
$username="xxx";
$password="xxx";
$database="xxx";

mysqli_connect('localhost',$username,$password);

mysqli_select_db($database) or die( "Unable to select database"); 
```

我所做的只是将 mysql 更改为 mysqli，对吗？

更新：

这是现在使用 mysqli 连接到数据库的正确方法吗：

```
$username="xxx";
$password="xxx";
$database="mobile_app";

$mysqli = new mysqli("localhost", $username, $password, $database);

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:40:15.510

您对该功能的使用不正确。

您必须使用返回的 mysqli 链接资源`mysqli_connect`作为`mysqli_real_escape_string`.

例子：

```
$username="xxx";
$password="xxx";
$database="xxx";

$my = mysqli_connect('localhost',$username,$password);

mysqli_select_db($my, $database) or die( "Unable to select database");

$t->TeacherUsername = "'" . mysqli_real_escape_string($my, $teacherusername). "'"; 
```

# java - 没有注释的杰克逊过滤器属性

> ID：10916443
> 
> 赞同：2
> 
> 时间：2012-06-06T14:37:15.200
> 
> 标签：java, json, annotations, jackson

```
public Class User {
    private String name;
    private Integer age;
    ...
}

ObjectMapper om = new ObjectMapper();
om.writeValueAsString(user); 
```

如何在不使用 @JsonIgnore 之类的任何注释的情况下过滤属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T03:14:10.003

使用 Jackson 有两种可能的方法

Mixin 注释：- [http://www.cowtowncoder.com/blog/archives/2009/08/entry_305.html](http://www.cowtowncoder.com/blog/archives/2009/08/entry_305.html)

JSON过滤器：- [http://wiki.fasterxml.com/JacksonFeatureJsonFilter](http://wiki.fasterxml.com/JacksonFeatureJsonFilter)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-24T14:20:15.267

按名称排除属性的示例：

```
public Class User {
    private String name = "abc";
    private Integer age = 1;
    //getters
}

@JsonFilter("dynamicFilter")
public class DynamicMixIn {
}

User user = new User();
String[] propertiesToExclude = {"age"};
ObjectMapper mapper = new ObjectMapper()
      .addMixIn(Object.class, DynamicMixIn.class);
FilterProvider filterProvider = new SimpleFilterProvider()
                .addFilter("dynamicFilter", SimpleBeanPropertyFilter.serializeAllExcept(propertiesToExclude));
        mapper.setFilterProvider(filterProvider);

mapper.writeValueAsString(user); // {"name":"abc"} 
```

您可以代替`DynamicMixIn`创建`MixInByPropName`

```
@JsonIgnoreProperties(value = {"age"})
public class MixInByPropName {
}

ObjectMapper mapper = new ObjectMapper()
      .addMixIn(Object.class, MixInByPropName.class);

mapper.writeValueAsString(user); // {"name":"abc"} 
```

注意：如果您只想排除属性，`User`您可以将`Object.class`方法的参数更改`addMixIn`为`User.class`

按可以创建的类型排除属性`MixInByType`

```
@JsonIgnoreType
public class MixInByType {
}

ObjectMapper mapper = new ObjectMapper()
      .addMixIn(Integer.class, MixInByType.class);

mapper.writeValueAsString(user); // {"name":"abc"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-22T17:37:34.093

有点慢，但我使用两阶段复制。首先使用spring BeanUtils，其次使用Jackson。

```
public static void copyWithIgnore(final Object source, final Object target, final String... ignoreProperties) {

    try {
        final ObjectMapper mapper = new ObjectMapper()
            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);

        final Object ignoredSource;

        if (ObjectUtils.isEmpty(ignoreProperties)) {
            ignoredSource = source;
        } else {
            ignoredSource = source.getClass().getDeclaredConstructor().newInstance();
            BeanUtils.copyProperties(source, ignoredSource, ignoreProperties);
        }

        mapper.readerForUpdating(target).readValue(mapper.writeValueAsString(ignoredSource));
    } catch (Exception e) {
        throw new RuntimeException("Cannot deserialize and instantiate source class");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-17T01:24:05.583

我编写了一个名为[Squiggly Filter](https://github.com/bohnman/squiggly-filter-jackson)的库，它根据 Facebook Graph API 语法的子集选择字段。例如，要选择用户对象的地址字段的邮政编码，您可以使用查询字符串`?fields=address{zipCode}`。Squiggly Filter 的优点之一是，只要您可以访问呈现 json 的 ObjectMapper，您就不必修改任何控制器方法的代码。

假设您正在使用 servlet API（这不是必需的，但可能是最常见的用例），您可以执行以下操作：

1) 注册一个过滤器

```
<filter> 
    <filter-name>squigglyFilter</filter-name>
    <filter-class>com.github.bohnman.squiggly.web.SquigglyRequestFilter</filter-class> 
</filter> 
<filter-mapping> 
    <filter-name>squigglyFilter</filter-name>
    <url-pattern>/**</url-pattern> 
</filter-mapping> 
```

2）初始化对象映射器

```
Squiggly.init(objectMapper, new RequestSquigglyContextProvider()); 
```

3）您现在可以过滤您的json

```
curl https://yourhost/path/to/endpoint?fields=field1,field2{nested1,nested2} 
```

有关 Squiggly 过滤器的更多信息，请访问[github](https://github.com/bohnman/squiggly-filter-jackson)。

# ant - 使用跨不同文件格式的变量进行构建自动化

> ID：10916449
> 
> 赞同：0
> 
> 时间：2012-06-06T14:37:27.907
> 
> 标签：ant, build-automation

我有一个大项目，它的构建自动化由 ant 完成。我需要一些想法或解决方案来更改所有文件中的一些公共变量。

例如，公司名称、产品名称或年份包含在许多文件中：帮助文件（html）、许可证和配置文件（txt、xml）、源代码（java->class）等。有没有简单的方法来设置这些的变量并让所有文件快速更改？也欢迎使用不同的工具。

总是可以选择添加一些代码来打开文件，找到位置并更改字符串，但这似乎不是一个优雅的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:50:41.027

ant [Copy](http://ant.apache.org/manual/Tasks/copy.html)和[Move](http://ant.apache.org/manual/Tasks/move.html)任务都支持[filterset](http://ant.apache.org/manual/Types/filterset.html)元素。使用它，您可以将标记的全局替换应用于文件集中的文件。

简单的例子：

```
<target name="test">
    <mkdir dir="build"/>
    <copy todir="build">
        <fileset dir="src">
            <include name="*.txt"/>
        </fileset>
        <filterset>
            <filter token="COMPANY_NAME" value="Acme Inc."/>
        </filterset>
    </copy>
</target> 
```

输出：

```
$ cat src/foo.txt
I work for @COMPANY_NAME@.
$
$ cat build/foo.txt
I work for Acme Inc.. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:12:59.473

我喜欢以下 ANT 解决方案：

[http://www.richardnichols.net/2009/08/automatically-updating-your-source-file-headers-with-ants-replaceregexp/](http://www.richardnichols.net/2009/08/automatically-updating-your-source-file-headers-with-ants-replaceregexp/)

使用[replaceregexp](http://ant.apache.org/manual/Tasks/replaceregexp.html)任务查找并修复缺少许可证标头的 Java 文件：

```
<target name="replace_headers">
    <loadfile property="javaheader" srcFile="lib/standardheader.txt"/>
    <replaceregexp match="(/\*.*\*/.*)??^package " flags="sm"
        replace="${javaheader}${line.separator}package ">
        <fileset dir="src">
            <include name="**/*.java"/>
        </fileset>
    </replaceregexp>
</target> 
```

简单且不需要 Java 源代码中的替换标记。

# video-streaming - 关于 HTML5 视频的 RTSP、RTMP 与 HTTP 渐进式下载的趋势是什么？

> ID：10916456
> 
> 赞同：4
> 
> 时间：2012-06-06T14:37:44.573
> 
> 标签：video-streaming, html5-video

我们正在研究 HTML5 视频以提供交互式视频体验，例如**通过超链接控制视频**（例如，允许用户跳转到尚未下载的视频部分）以及**响应视频事件的 JavaScript**（例如视频到达 00:25 时发生）。

对于测试视频，这似乎可以通过 Video.js 等库实现，并在现代浏览器中提供不错的体验。

我正在阅读 2009 年的一篇文章，这似乎表明很快（也许是今天），现代浏览器将赶上并超越流协议和服务器的功能：

> *RTSP 是为类似于 IP 语音应用的视频通信而创建的。它不是按需流式传输的最佳协议，其中带有字节范围请求的 HTTP 可以达到相同的结果。通过 HTTP 渐进式下载方法，RTSP 支持的额外功能也越来越多地可用。只有实时通信案例可能需要通过 UDP 实现 RTP/RTSP 才能以所需的低延迟工作。*
> 
> *在 HTTP 主导的世界中，需要特殊服务器和客户端软件的类似 RTSP 的流媒体方法越来越失败。例如，YouTube 完全通过 HTTP 渐进式下载提供，不使用 RTMP。在这种情况下，供应商接受了 HTTP 渐进式下载并开发了自己的功能扩展来改进基于 HTTP 的流式传输。*

**鉴于浏览器为支持 HTML5 视频而添加的功能越来越多，RTSP/RTMP 等流媒体协议和 Adob​​e Streaming Server 等视频流媒体服务器将拥有怎样的未来？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:08:17.687

HTTP 上的自适应比特率流式传输仍在讨论中 (DASH) [http://en.wikipedia.org/wiki/Dynamic_Adaptive_Streaming_over_HTTP](http://en.wikipedia.org/wiki/Dynamic_Adaptive_Streaming_over_HTTP)

Adobe 流媒体服务器，Apple 在 DASH 成为现实之前拥有优势。内容保护是另一个尚未最终确定用于 HTTP 流的领域 (DRM)。

# macos - OS X 服务器 DNS 管理

> ID：10916459
> 
> 赞同：0
> 
> 时间：2012-06-06T14:37:46.537
> 
> 标签：macos, dns, osx-server

我有一个 OS X 10.6 服务器正在运行，它上面运行着 PHP、Apache、MySQL 和 DNS。我想从 Server Admin App 中移除 DNS 管理。我知道 DNS 配置文件（BIND 使用的那些）是纯文本文件（显然必须遵守一些规则）。

主要原因是我想为我的一个域设置 DKIM，并且我必须将 TXT 记录添加到子域 pm._domainkey.example.com。由于“无效”下划线字符，服务器管理员不允许我添加该子域。

我搜索了基于 Web 的 DNS 管理工具（我将安装在我的服务器上并允许我管理我的 DNS 记录的工具），但我找不到任何好的工具。（我设法安装了几个，但他们没有看到我已经在服务器管理中设置的配置）。现在我正在研究直接编辑配置文件，但我不知道它们在哪里。

这是一个测试/开发服务器，所以搞砸它不会是一场灾难。我知道“我不应该这样做”，但我想:)。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:01:18.147

我不确定 Apple 是否在现代版本的 OSX Server 中更改了这些，但在我的旧 10.5.8 服务器中，BIND 配置的起点是文件`/etc/named.conf`.

从这个文件中，您可以看到类似`include "/etc/dns/options.conf.apple";`这样的行，告诉您您可能会在`/etc/dns/`目录中找到其他内容。

我没有在我的 OSX Server 1.5.8 机器上配置任何 DNS，但我怀疑您所做的任何事情都需要包含在 /etc/named.conf 中，或者包含在它包含的内容中。

一旦开始直接编辑文本文件，请确保不要尝试使用 GUI 工具修改配置。

你可能还想研究一个版本控制系统，比如 subversion 或 git（或者哎呀，甚至是 RCS）来跟踪你所做的更新。它将更容易查看您的历史记录、追踪错误以及从意外的 GUI 配置覆盖中恢复！

另一件事。虽然 OSX 的配置工具可能不允许您将下划线放入主机名中，但也许它会让您将其放入子域中？我没有尝试过，但您可能只想看看它是否允许您设置 的新域`_domainkey.example.com`，在该域​​下您将拥有类似`pm`. 验证主机名的例程*可能*与验证子域的例程不同。我不知道这是否可行，但值得尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:38:08.017

您无需停止使用 Server Admin 来管理 DNS，只需在其背后添加它无法处理的记录即可。这是可能的，因为在 OS X Server v10.6 中，每个 DNS 区域的内容实际上都存储为两个单独的文件：/var/named/zones/db.zonename.zone.apple 具有服务器管理员管理的所有内容，而 /var /named/db.zonename。只有一个注释和一个包含指令来拉入 .zone.apple 文件。因为服务器管理员只查看和更改 .zone.apple 文件，所以您可以将所需的任何资源记录添加到第二个文件中——服务器管理员将忽略它们，但由 DNS 服务提供服务。

# asp.net - 显示来自 SQL DB 的文本？

> ID：10916465
> 
> 赞同：0
> 
> 时间：2012-06-06T14:38:09.170
> 
> 标签：asp.net, c#-4.0

我只是制作一个通用主页，但不同之处在于页面上的文本可以使用 asp.net 从 SQL DB 动态更改。是否有服务器控件或我可以调用的对象来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:50:15.643

您可以使用[标签](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label%28v=vs.100%29.aspx)`Text`并在服务器端设置它们的值：

**.aspx**：

```
<asp:Label Id="genericText" runat="server" /> 
```

**.aspx.cs**：

```
protected void Page_Load(object sender, EventArgs e)
{
    // Check for initial page load.
    if (!IsPostBack)  
    {  
        // Grab some text to display.
        var content = (from p in myPageContent 
                       where p.PageNum == 1 
                       select p.Content).FirstOrDefault();

        // Load the content in the label.
        genericText.Text = content;
    }
} 
```

# mysql - MySQL删除仅存在于子表/ cakephp更新中的记录？

> ID：10916472
> 
> 赞同：0
> 
> 时间：2012-06-06T14:38:29.643
> 
> 标签：mysql, cakephp

我有两个 Myisam 表，假设是 Parent 和 Child。Parent 是在 perl 脚本中创建的。Parent 是孩子获取信息的地方（不是用于编辑），所有信息都是相同的，而 Child 拥有它独有的信息。遵循 Cakephp 命名约定，它们通过 Parent 的 id 字段和 child 的 parent_id 连接。当通过另一个应用程序（通过 Perl 添加的记录）更新父表时，它会显示在子表中，但如果删除了一条记录，则子表不会更新。有没有办法遵循 cakephp 约定来更新表（删除在 Parent 中删除的记录）？我在孩子的父表中有'依赖'=> true？那需要在子表中吗？或者这无关紧要，因为表格是在应用程序之外更新的？

**如果不出意外，我也许可以设置一个 cron 作业来定期检查表，但我不确定如何通过MYSQL**查找/删除父表中不再存在的子表中的记录。连接的组合以及在哪里这样的 n 这样的 <>？所以我的问题是如果表格在应用程序之外更新，我可以用 cakephp 来做吗？或者我将如何使用mysql？

代码：

```
<?php
class Drug extends AppModel {
    var $name = 'Drug';
  var $order = "Drug.generic ASC";
  var $useDbConfig = 'default';
  var $actsAs = array('ExtendAssociations', 'Containable');

  var $hasOne = array(
    'FrenchTranslation' => array(
        'className' => 'FrenchTranslation',
        'dependent' => true
    ),
    'GermanTranslation' => array(
        'className' => 'GermanTranslation',
        'dependent' => true
    ),
    'SpanishTranslation' => array(
        'className' => 'SpanishTranslation',
        'dependent' => true
    )
  );
}
?>

<?php
class FrenchTranslation extends AppModel {
    var $name = 'FrenchTranslation';
    var $validate = array(
          'drug_id'=>array(
         'The drug_id must be unique.'=>array(
            'rule'=>'isUnique',
            'message'=>'The Drug ID must be unique.',
            'on'=>'create'
          ),
          'The drug_id must be numeric.'=>array(
            'rule'=>array('numeric'),
            'message'=>'The Drug ID must be numeric.'
          )
      ),
      'id'=>array(
          'The id must be unique.'=>array(
            'rule'=>'isUnique',
            'message'=>'The ID must be unique.',
            'on'=>'create'
          ),
          'The id must be numeric.'=>array(
            'rule'=>array('numeric'),
            'message'=>'The ID must be numeric.'            
          )
      )
  );

    var $belongsTo = array(
        'Drug' => array(
            'className' => 'Drug',
            'foreignKey' => 'drug_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
    'User'=>array(
      'className'=>'User',
      'foreignKey'=>'user_id'
    ),
    );
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:17:45.347

这是一个小查找调用，您可以使用它来获取所有孤儿记录：

```
$this->Drug->FrenchTranslation->find('all', array(
  'fields' => array('id'),
  'conditions' => array(
    'Drug.id' => null
  ),
  'contain' => array(
    'Drug' => array(
      'fields' => array('id')
    )
  )
)); 
```

这应该调用这样的 SQL 命令

```
SELECT `FrenchTranslation`.`id`, `Drug`.`id` 
FROM `french_translations` AS FrenchTranslation
LEFT JOIN `drugs` AS `Drug` ON (`Drug`.`id` = `FrenchTranslation`.`drug_id`)
WHERE `Drug`.`id` IS NULL 
```

这将返回所有孤立的子记录，然后您可以遍历并删除它们。你必须为每个孩子做这件事。

# bash - 解析没有 subshel l 的行......如何？

> ID：10916473
> 
> 赞同：0
> 
> 时间：2012-06-06T14:38:31.170
> 
> 标签：bash

我需要解析多行而不输入子shell

```
cat << EOF | while read -r cmd
sleep 100
sleep 110
sleep 120
EOF

do
    echo $cmd
done 
```

将导致：

```
sleep 100
sleep 110
sleep 120 
```

它正在工作，但问题是我需要子shell外部的结果（因为我需要之后的结果），尝试使用for而不是while，但它不会解析行而是单词：

```
for cmd in `cat << EOF
sleep 100
sleep 110
sleep 120
EOF`

do
  echo $cmd
done 
```

将导致：

```
sleep
100
sleep
110
sleep
120 
```

那么，任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:43:39.657

```
while read -r cmd; do
   echo $cmd
done <<EOF
sleep 100
sleep 110
sleep 120
EOF 
```

管道创建一个子外壳。I/O 重定向（包括此处的文档）没有。

# vim - Vim 重映射：Capslock 去哪儿了？

> ID：10916475
> 
> 赞同：0
> 
> 时间：2012-06-06T14:38:40.580
> 
> 标签：vim, remap, capslock

好的，我确信我需要 [在 vim 中重新映射 Esc](http://vim.wikia.com/wiki/Avoid_the_escape_key)。我的选择是像平常一样使用 Capslock。但我的问题是：**Capslock 功能在哪里？**

*   到 Esc 的地方？
*   根本不使用（使用 selection+'U' 转大写）？
*   任何其他？

你觉得哪个**更有效率**？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:29:08.697

我使用 AutoHotKey（在 Windows 上）重新映射大写锁定，主要是因为我有时会不小心碰到它。然后我使用 shift-capslock 来获得正常的 capslock 功能。

我认为大写锁定在某些程序中用作大写锁定而不是其他程序会很奇怪。

执行此操作的 AutoHotKey 映射（大写锁定 -> esc，shift-capslock -> 大写锁定）：

```
CapsLock:: Send, {ESC}
+CapsLock:: Send, {Blind}{CAPSLOCK} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:55:53.637

我可以说我发现我当前的解决方案是最方便的：

1.  大写锁定是左控制，
2.  左控制是逃跑和
3.  ~~escape 是大写锁定~~（在某些 X 服务器更新后，我未能使其以这种方式运行，因此现在 escape 是无操作的，因为无论如何我都不使用它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:35:36.443

在 CapsLock 键被重新映射到 Esc 功能后，您是否看到您可能仍希望在 vim 中使用 Esc 键的任何原因？（例如，其他人在您的计算机上使用 vim）。如果没有，没有理由不将 Esc 重新映射到 CapsLock 功能 - 至少除非您想将 Esc 用于其他用途。

就我个人而言，无论如何我从不使用 CapsLock，但如果你这样做了，那么你可能应该把它放在某个地方——这取决于你使用和不使用哪些键绑定，所以很难提出建议。

# actionscript-3 - 使用 SWFObject 检测是否安装了 flash

> ID：10916477
> 
> 赞同：0
> 
> 时间：2012-06-06T14:38:51.557
> 
> 标签：actionscript-3, flash, embed, swfobject

我在谷歌上搜索了大约半个小时，但找不到任何有用的信息来执行此操作，我只发现 expressInstall.swf 适用于您拥有较低版本的闪存，但至少您安装了一个。

所以，长话短说，我如何使用 SWFObject.embedSwf 检测我的 PC 上是否安装了 Flash？我想要做的是，如果我没有安装它，向我展示一些自定义内容。

这可以使用 SWFObject 吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:47:12.067

是的，这正是 swfObject 的用途，前往他们的文档页面并阅读所有相关信息。这些天几乎每个人都在使用它。

它允许您拥有将被您的 swf 替换的 html 内容，因此如果没有替换 swf，即未安装 flash 或 Javascript 已关闭，您将看到您的替代内容。

[swfObject 文档](http://code.google.com/p/swfobject/wiki/documentation)

# c - .so 和 .so.x 之间的区别

> ID：10916480
> 
> 赞同：6
> 
> 时间：2012-06-06T14:39:06.327
> 
> 标签：c, linux, shared-libraries

*.so 和 *.so.x 之间有什么区别，X 表示什么以及为什么首先这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T14:45:38.417

`.so`是一个共享对象，动态链接库。通常动态链接库可能有多个名称，大多数名称是[符号链接](http://en.wikipedia.org/wiki/Symbolic_links)到剩余名称的名称，在这些名称中`.x`代表库的主要版本，或特定的完整版本号`so`

例如，`libmylib.so.2`将是动态链接库的第二个主要接口版本的文件名`libmylib`

# objective-c - 如何用一堆 CAEmitterCells 获得更小的尾巴（淡出和/或缩小）

> ID：10916481
> 
> 赞同：1
> 
> 时间：2012-06-06T14:39:08.053
> 
> 标签：objective-c, ios, core-animation, caemitterlayer

我有一个沿 bezierPath 动画的 CAEmitterLayer，我的 CEEmitterCell 粒子是用部分透明的 gaused-circle.png 制成的。这些粒子的生命周期为 0.3，这导致了我的动画 CAEmitterLayer-Particles 的小尾巴。我需要让尾部在最后变得更小，并让细胞在整个生命周期内淡出到 alpha = 0。我尝试了不同的参数设置组合，但无法正常工作。我只是把尾巴的末端变胖了，看起来很丑。请问，这里有哪些必要的参数设置？CAEmitterCells 甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:12:43.430

您应该能够使用单元格的 alpha 和大小来实现此目的。看规模速度。您还可以查看发射器层中的替代 renderMode 值

# php - 在已准备就绪的网站上发送电子邮件表单的最佳方式

> ID：10916482
> 
> 赞同：0
> 
> 时间：2012-06-06T14:39:10.430
> 
> 标签：php, jquery, ajax, email, jquery-mobile

正如我所说，所有的html文件都设置好了。该网站主要使用jquery mobile，我首先尝试使用coldfusion。但是，这产生了很多问题，因为我无法将文件类型从 .html 更改为 .cfm 而不会产生很多问题。我需要做的就是验证几个字段，然后通过电子邮件发送给自己。有没有一种好方法可以在不更改大部分现有代码的情况下做到这一点？

我一直在研究 PHP，但我是服务器端脚本的新手，所以我不确定需要什么。这仅在服务器和每台机器都安装了 php 时才有效，还是服务器只需要安装 PHP？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:45:26.940

简单的答案，只有托管页面的服务器才需要 PHP。服务器是否运行 IIS、Apache 等？

以 Apache 为例，您可以执行以下操作：

```
AddType application/x-httpd-php .php .htm .html
AddHandler x-httpd-php .php .htm .html 
```

这将告诉 Apache 将所有 .html 和 .htm 文件视为 PHP。如果文件中没有 PHP，它将只提供 HTML 服务，这意味着不需要更改的文件对您来说没有问题。

在我忘记之前，发送电子邮件是一个命令：

```
mail('youraddress@domain.com', 'Subject', 'Payload', 'Extra Headers if Needed'); 
```

如果您在 HTML 中创建表单，将其发送到 sendmail.html，或者您的操作是什么，您可以使用：

```
$_POST['field']; 
```

其中 field 等于输入上的名称属性。例子：

```
<input name="field"> 
```

然后你可以这样做：

```
mail('youraddress@domain.com', 'Subject', $_POST['field'], 'Extra Headers if Needed'); 
```

这将通过电子邮件向您发送 $_POST['field'] 的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:47:36.073

最简单的方法是使用 jquery 验证字段并使用 a`mailto`作为表单操作：

```
<form action="mailto:me@example.com" /> 
```

如果您没有 PHP 经验，这是最快的解决方案。

# smartgwt - 在 SmartGWT 的 ListGrid 中将记录标记为新记录

> ID：10916483
> 
> 赞同：1
> 
> 时间：2012-06-06T14:39:10.767
> 
> 标签：smartgwt, listgrid

在 SmartGWT 中，使用 ListGrid。

我目前正在从 CSV 文件加载数据以预填充列表网格。我希望以后能够将这些数据保存在数据库中。

使用 listGrid.startEditingNew() 我可以创建一个被认为是新的记录。但它可能非常慢，即使有合理数量的数据（50 行）。

```
ListGrid listGrid = new ListGrid();

Record record= new Record();
record.setAttribute("attr1", 1);
record.setAttribute("attr2", "2");

listGrid .startEditingNew(record);
listGrid .endEditing(); 
```

* * *

在这里，我尝试使用 RecordList，这样我就可以一次更新所有数据。数据在列表中显示得又快又好。但它以黑色字体显示（好像是 fetch 一样）。因此行不受 listGrid.saveAllEdits() 的影响。

我想知道是否有办法将 RecordList 中的每条记录标记为新行。

```
ListGrid listGrid = new ListGrid();
RecordList recList = new RecordList();

Record record= new Record();
record.setAttribute("attr1", 1);
record.setAttribute("attr2", "2");

recList.add(record);
listGrid .setData(recList); 
```

# sql-server - 查找对其他数据库的引用

> ID：10916485
> 
> 赞同：3
> 
> 时间：2012-06-06T14:39:17.517
> 
> 标签：sql-server, tsql, stored-procedures

在 SQL Server 数据库中，我需要找到所有包含对其他数据库的引用的存储过程和视图。（我需要用同义词替换它们。）

我有很多存储过程，我不想手动搜索它们。

任何想法如何轻松找到它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:48:32.483

根据 SQL Server 的版本，您可能还会在此查询中找到值：

```
SELECT OBJECT_SCHEMA_NAME(referencing_id), OBJECT_NAME(referencing_id) 
  FROM sys.sql_expression_dependencies
  WHERE referenced_database_name = 'YourDatabaseName'; 
```

实际上，您需要结合搜索视图和过程（正如@M_M 指出的那样），并且您可能需要清除一些。例如 sys.sql_modules 如果您的数据库名称是一个可能出于其他原因自然出现在您的模块中的字符串，则会显示误报。但是，例如，当它嵌入到动态 SQL 中时，这个答案将找不到数据库名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:42:20.047

有几种方法，但我发现搜索`sql_modules`表格是一个不错的起点：

```
SELECT OBJECT_NAME([object_id]), [definition]
FROM sys.sql_modules 
WHERE definition like '%MyOtherDBName%' 
```

# jquery - JQuery 库通常如何包含在网页中 - 全部或部分？

> ID：10916489
> 
> 赞同：2
> 
> 时间：2012-06-06T14:39:31.920
> 
> 标签：jquery

我是 JavaScript 的初学者，我对使用 JQuery 等库的最佳方式感到好奇。您是否通常将整个库包含在 HTML 页面中，因此每次用户访问您的页面时都必须下载大约 70KB（用于 JQuery）？还是有一些沉重的浏览器正在兑现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:47:50.593

从流行的内容交付网络加载 jQuery（缩小版）：

1.  [http://www.asp.net/ajaxlibrary/cdn.ashx](http://www.asp.net/ajaxlibrary/cdn.ashx)
2.  [https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)
3.  [http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)

例子：

```
<!DOCTYPE html>
  <head>
    <title>My Site, using jQuery</title>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.js"></script> 
```

通过使用其中之一，访问您网站的用户很可能甚至不必下载该文件，因为他们的浏览器可能已经将它从先前访问使用相同 CDN 的另一个网站中缓存起来。

此外，使用这些流行的 CDN 之一可以防止您必须维护您的版本，或处理可能复杂的任务，例如设置适当的标头来处理压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:43:57.113

缩小的 jquery 1.7.2 为 93KB。gzip 压缩，即 33KB

通过配置良好的 Web 服务器正确地提供服务，Web 客户端会感觉到 33KB 命中一次，然后它会被缓存。

这是客户的胜利。在大多数情况下，它不会太大。

如果您担心每次都提供服务，请让 Google 为您服务。（不过，这需要另一个套接字设置）：[https ://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

# vb.net - 从文件夹中选择随机图像显示在图片框，vb.net

> ID：10916491
> 
> 赞同：4
> 
> 时间：2012-06-06T14:39:40.033
> 
> 标签：vb.net, random, png

我有一个图片框，它从文件夹中读取图像以显示，而不是通常的无聊图像，我认为在文件夹中有许多图像并让我的 vb.net 程序随机选择一个来显示可能会很好利用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:47:11.727

尝试这个：

```
Public Function GetRandomImageFilePath(ByVal folderPath As String) As String
    Dim files() As String = Directory.GetFiles(folderPath, "*.png")
    Dim random As Random = New Random()
    Return files(random.Next(0, files.Length - 1))
End Function 
```

仅供参考，如果您要多次调用它，最好创建`random`一次作为类的私有成员，这样它就不会在每次调用时重新生成随机数。

# jsp - 如何使用jsp使h1标签出现在一个（同一）行中

> ID：10916492
> 
> 赞同：0
> 
> 时间：2012-06-06T14:39:43.870
> 
> 标签：jsp, jsp-tags

我有两个文本框，一个用于第一个文本，另一个用于第二个文本。每个都有一个用于选择尺寸的下拉框（因此它们可以具有不同或相同的尺寸）。现在我可以选择不同的尺寸并且效果很好。我遇到的问题是它们显示在两条不同的行中，例如：

```
 first text
       second text 
```

但我希望它们彼此相邻显示。例如

```
 first text second text 
```

我现在拥有的代码如下：

```
 <c:choose>
   <c:when test="${! (empty (properties['first']) && empty (properties['second']))}">
    <c:choose>
        <c:when test="${properties['type'] == 'styled'}">
            <h1 class="aaaa">
                <span>first text</span>
            </h1>
        </c:when>
        <c:otherwise>
            <h2 class="bbb">
                <span class="putColor">first text</span>
            </h2>
        </c:otherwise>
    </c:choose>
    <c:choose>
        <c:when test="${properties['type1'] == 'styled'}">
            <h1 class="aaaa">
                <span class="putColor">second text</span>
            </h1>
        </c:when>
        <c:otherwise>
            <h2 class="bbb">
                <span class="putColor">second text</span>
            </h2>
        </c:otherwise>
    </c:choose>
</c:when>
<c:otherwise>       
    <div class="hhhh">

    </div>      
</c:otherwise>
 </c:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:47:26.317

尝试添加`style="display: inline;"`到您的 h1 标签。（当然，你真的应该在你的 CSS 文件中这样做，但这会很快告诉你它是否有效。）

# c# - 在弹出窗口 MVC3 中显示来自数据库的 PDF 文件

> ID：10916493
> 
> 赞同：0
> 
> 时间：2012-06-06T14:39:48.893
> 
> 标签：c#, asp.net-mvc-3

这是一个 MVC3 应用程序。我在数据库中有许多 pdf 文件，我想检索它们并将它们显示在弹出窗口中。我在 Stream 对象中有我的 pdf 文件，我将它从我的控制器发送到弹出窗口，如下所示：

```
 //This returns my model which contains a Stream 
 //object with the pdf retrieved from the database
   var model = GetPdf() ;

      //fileStream is of type Stream
       model.fileStream.Position = 0;
        return new FileStreamResult(model.fileStream, "application/pdf")
        {
            FileDownloadName = "download.pdf"
        }; 
```

但我的弹出窗口看起来像![垃圾](../Images/806c74be78dc9791b32aa071fc8b23bd.png)。它会显示在 Telerik 窗口中，但我认为这并不重要。如何通过 MVC3 在弹出窗口中显示数据库中的 PDF 文件？谢谢

# windows-7 - 如何使端口 80 可用？在 Windows 7 上安装 xampp 1.7.7？

> ID：10916494
> 
> 赞同：4
> 
> 时间：2012-06-06T14:39:54.180
> 
> 标签：windows-7, xampp, port

我正在尝试在 Windows 7 上安装/运行 xampp，但它失败了，因为它说端口 80 正在使用中。我已经关闭了 IIS，但它仍然显示端口 80 正在被“NT Kernal & System”进程使用。见图片。

我不知道该怎么办。我认为我没有权限杀死这个系统进程，而且这可能是一个坏主意，因为它与内核有关。这真让我抓狂。还有其他人看到这个问题吗？

> ![在此处输入图像描述](../Images/b3526b8624790968c473258d2b6b5f04.png)

Window 7 企业版，64 位操作系统。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T09:21:44.393

还要查找并关闭“Web 部署代理服务”。为我做了诀窍。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-20T14:15:24.493

1.  转到您的 Windows 服务`Start > Run > services.msc`
2.  查看是否有`World Wide Publishing`服务，`right-click`它获取属性
3.  `Stop`如果它正在运行，请单击...

检查此链接：[Apachefirends.org](http://www.apachefriends.org/f/viewtopic.php?p=194635&sid=29999bdc1ee1eab417f32e651bba2486)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T17:46:51.753

一个名为“Web Deployment Agant Service”的服务正在侦听端口 80 ，停止并禁用这让我工作......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-23T17:58:23.093

我发现我的问题是......因为我也在开发 Asp.net 应用程序，所以 Web 部署代理服务是保留端口的原因。

所以我去服务并禁用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-16T10:50:25.330

关闭“Web 部署代理服务”。为我做了诀窍。现在 XAMPP 1.7.7 可以工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-08T03:06:02.550

如果您安装了任何其他服务器，例如 MS-SQL，请检查该服务。可能停止与其他服务器相关的服务。为我工作。

# vba - 向用户部署 Word 宏的最简单方法是什么？

> ID：10916498
> 
> 赞同：2
> 
> 时间：2012-06-06T14:40:14.050
> 
> 标签：vba, templates, deployment, ms-word

我使用了这个[http://office.microsoft.com/en-us/word-help/deploy-your-word-macros-from-a-central-location-HA001087294.aspx](http://office.microsoft.com/en-us/word-help/deploy-your-word-macros-from-a-central-location-HA001087294.aspx)并将所有内容设置在共享驱动器上。但是，我有一个小问题。

问题是，当我运行任何宏时，我会看到一个弹出框，上面写着“代码执行已被中断”，我可以单击继续/结束或帮助（调试显示为灰色）。如果我只是继续单击继续，宏将正常运行，但我只是在整个宏运行过程中不断收到该弹出窗口。

当这些宏在 Normal.dot 全局模板文件中时，我没有这些问题。有任何想法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:44:37.750

我们使用我们的 Active Directory 启动脚本将我们的宏推送给我工作场所的用户。在 Microsoft/office 文件夹中的用户“应用程序数据”中，您将找到一个“启动”文件夹。

此目录中的任何 .dot 或 .doc 文件都会在 word 运行时加载它们的宏（包括任何自定义工具栏）。

还有一个机器级别的文件夹副本（我的笔记本电脑上的 C:\Program Files (x86)\Microsoft Office\OFFICE11\STARTUP）将对机器的所有用户执行相同的操作。

如果 AD 启动脚本不是一个选项，则可能使用启动脚本（或用户 Program Files/Startup 目录中的 .bat 文件）在登录时从网络位置复制。

# jrules - 如何在JRules中检查数字的长度

> ID：10916503
> 
> 赞同：0
> 
> 时间：2012-06-06T14:40:29.400
> 
> 标签：jrules

我是 JRules 编码的新手。它可能看起来像一个简单的问题。我想检查 JRules 代码中数字的长度。如何为此编写代码。“长度”短语需要一个字符串。我尝试使用 toString() 将数字转换为字符串。但这不起作用。请给出一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:30:51.590

你可以通过多种不同的方式做到这一点，就像去罗马一样。:)

1/ 在你的 Java 中：

```
public static int getIntLength(final int myLovelyNumber) {
    return (new Integer(myLovelyNumber)).toString().length();
} 
```

然后，您将这个可爱的功能添加到您的 BOM 中，并用语言表达它。就个人而言，我会为此类 Helpers 创建一个单独的库。更新将解决问题。

2/ 在您的物料清单中：

我将假设您从头开始
a/ 在您的 BOM 中创建一个“虚拟”对象（就我个人而言，我会为“虚拟”对象创建一个单独的 BOM）并将“执行名称”（或类似名称）设置为 java。 lang.object
b/ 在“virtual”对象中创建一个“virtual”静态方法，带有一个参数： Integer 返回 a: int
c/ 在您的新“virtual”方法的 B2X 中添加：
return param.toString().length ();
d/ 用语言表达方法

当然，您可以在 Java 或 B2X 中检查空值。

这些是实现它的主要方法。人们可以找到更棘手的方法，但对于初学者（或不是）来说，这是一种很好的方法。希望能帮助到你。

PS：如果您对此感到满意，请将答案标记为正确:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:34:31.803

负数呢？，您的解决方案会将“-”视为一个重要值。

所以第（1）部分应该是......

```
public static int getIntLength(final int myLovelyNumber) {
    return (Integer.valueOf(Math.abs(myLovelyNumber))).toString().length();
} 
```

'int' 也不能为空。当你来测试它会是零。

# java - Gquery-live方法，如何正确使用

> ID：10916507
> 
> 赞同：0
> 
> 时间：2012-06-06T14:40:41.000
> 
> 标签：java, gwt, jquery, gquery

我正在使用 Gquery 并发现一些难以使用 live() 方法的东西。就我而言，当您想为“未来”元素定义一些行为时，它非常有用。例如，我想在单击某个按钮后将背景颜色更改为我创建的任何水平面板。示例代码附在下面。

```
RootPanel.get(); //before invoking live method, recommended in gwt forum
GQuery hPanel = mySelectors.getHorizontalPanel();
hPanel.live(Event.ONCLICK, new Function () {
    public boolean f (Event e) {
    int red = 100;
    int green = 100;
    int blue = 100;
    while (red < 250) {
        while (green < 250) {
            while (blue < 250) {
                String bgColor = "backgroundColor: 'rgb(" + red + "," + green + "," + blue + ")'";
                $(e).animate(bgColor,8);
                blue+=10;
            }
            green+=10;
        }
        red+=10;
    }               
    return false;
    }
});

HorizontalPanel horizontalPanel = new HorizontalPanel();
horizontalPanel.setHeight("40px");
horizontalPanel.setWidth("40px");
horizontalPanel.setStyleName("horizontal-panel");

final HorizontalPanel newPanel = new HorizontalPanel();
newPanel.add(horizontalPanel);
RootPanel.get("horizontalPanels").add(newPanel); 
```

出于某种原因，当我单击面板时不会调用任何事件。选择器的声明方式如下：

```
@Selector(".horizontal-panel")
GQuery getHorizontalPanel(); 
```

任何帮助或对此问题的了解将不胜感激，

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:36:06.960

我认为这是因为 live 不支持选择器...

您能否尝试替换这部分代码：

```
GQuery hPanel = mySelectors.getHorizontalPanel();
hPanel.live(Event.ONCLICK, new Function () { 
```

经过 ：

```
$(".horizontal-panel").live(Event.ONCLICK, new Function () { 
```

live() 需要知道 css 选择器。如果您使用@Selector，它会丢失此信息，因为 GQuery 在编译时会以最优化的方式来查询元素

# c - 在 Xcode 中创建一个内的两个子项目

> ID：10916512
> 
> 赞同：0
> 
> 时间：2012-06-06T14:40:55.270
> 
> 标签：c, xcode

我想创建一个游戏项目，为此我需要一个服务器和一个客户端。

我正在使用 Xcode 4.3，如何创建一个`Game`包含两个“子项目”的项目：

*   客户
*   服务器

我希望能够独立构建两者。xcode 可以使用这种技巧还是应该创建两个不同的项目？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:43:58.703

是的，这是可能的，它被称为工作区。将您的一个项目拖到另一个项目上，您将被要求创建一个工作区。

*   创建一个服务器项目。
*   创建一个客户项目。
*   将客户端项目拖到服务器项目中并放在下面。（或相反亦然）

# android - 有没有办法在活动之外存储数据？

> ID：10916517
> 
> 赞同：1
> 
> 时间：2012-06-06T14:41:08.193
> 
> 标签：android, model-view-controller, android-activity, android-intent

我感兴趣的是创建一个单独的类，类似于模型-视图-控制器关系中的模型，我可以在其中存储我的所有数据，以便每个活动都可以访问其功能。我已经开始阅读有关 Intents 的内容，但它似乎仍然不是我想要的。

我没有正确理解意图吗？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:58:43.380

您的问题有一个很好的答案：[http ://chrisrisner.com/31-Days-of-Android--Day-7%E2%80%93Sharing-Data-Between-Activities](http://chrisrisner.com/31-Days-of-Android--Day-7%E2%80%93Sharing-Data-Between-Activities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:50:48.980

如果您使用的是 Intents，则使用可以在 putExtra 中传递对象。 [这个 SO post 有一个很好的例子](https://stackoverflow.com/questions/2139134/how-to-send-an-object-from-one-android-activity-to-another-using-intents)

此外，使用单例模式，因此每个类都引用相同的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:55:01.533

您还可以继承 Application 类并从所有活动和服务访问该单例实例

# javascript - Enterprise Architect 32 位 comdlg DLL 或 64 位 windows 2008R2 的等效版本

> ID：10916519
> 
> 赞同：1
> 
> 时间：2012-06-06T14:41:14.663
> 
> 标签：javascript, enterprise-architect

我正在尝试为 Enterprise Architect 编写一些脚本，我需要一个来保存文件。在 Windows 2008R2（64 位）上运行该脚本会崩溃，因为它找不到 MSComDlg。

显然，这不是最新版本的 Windows 附带的。脚本引擎可以访问的替代方案是什么（注意 64 位操作系统上的 32 位进程）？

# jstl - 将表达式传递给 JSP 中的自定义标签

> ID：10916526
> 
> 赞同：10
> 
> 时间：2012-06-06T14:41:34.697
> 
> 标签：jstl, jsp-tags, custom-tag

嗨，我刚刚创建了在我的 JSP 中使用的自定义标签标签的 .tld 是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib>
<tlibversion>1.0</tlibversion>
<jspversion>1.1</jspversion>
<shortname>acma</shortname>
<info>AccountManag</info>
<tag>
    <name>clookup</name>
    <tagclass>taglib.acm</tagclass>
    <info>Customer Lookup</info>
    <attribute>
      <name>cust_id</name>
      <required>true</required>
    </attribute>
</tag>
</taglib> 
```

现在，当我将它与诸如 cust_id="1" 之类的 int 值一起使用时，该标签效果很好

```
 <dd:clookup cust_id="1"></dd:clookup> 
```

但是当我使用 EL 时它不起作用

```
 <dd:clookup cust_id="${sessionScope.cust.id}"></dd:clookup> 
```

所有教程都以 int 或其他数据类型开头，所以我无法在这里找到任何可能有帮助的资源.. 有什么建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T14:49:44.997

`rtexprvalue`在您的 tld 中指定：

```
<attribute>
  <name>cust_id</name>
  <required>true</required>
  <rtexprvalue>true</rtexprvalue>
</attribute> 
```

有关更多详细信息，请参阅[标记库描述符](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags6.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:43:40.640

您的 EL 需要用引号引起来。

# nginx - Vagrantfile 不尊重使用 Chef 进行配置的 nginx 版本

> ID：10916527
> 
> 赞同：1
> 
> 时间：2012-06-06T14:41:36.077
> 
> 标签：nginx, chef-infra, vagrant

开始使用 Vagrant 进行一些 Rails 开发。一步一步，所以我首先尝试通过 vagrant 文件中的 Chef 配方安装 nginx。`Vagrantfile`但是，当我在to中设置 nginx 版本时`1.20.0`，Vagrant 似乎无法识别它并继续安装 version `1.1.19`。

我将完成所有步骤以确保我没有遗漏任何东西。

我有一个目录结构：

```
--vagrant_boxes
  --cookbooks
  --vagrant_box1 
```

我通过刀从 opscode 下载了 nginx 食谱。

```
knife cookbook site install nginx 
```

这将 nginx 及其依赖项安装到我的`cookbooks`目录中。

然后我在`vagrant_box1`

```
vagrant init precise64 
```

并编辑 Vagrant 文件以读取

```
config.vm.provision :chef_solo do |chef|
  chef.cookbooks_path = "../cookbooks"
  chef.add_recipe "nginx"
  chef.json = { :nginx => { :version => "1.2.0" } }
end 
```

我跑了`vagrant up`，然后`vagrant ssh`。

在流浪者盒子里，`nginx -v`给了我`nginx version: nginx/1.1.19`。这不是我想要的。我想了解流浪者和厨师，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T01:17:22.490

IIRC 版本属性仅适用于 nginx::source 配方。所以而不是：

```
chef.add_recipe "nginx" 
```

尝试：

```
chef.add_recipe "nginx::source" 
```

然后应该安装正确的版本

# model-view-controller - 动态创建 MVC 对象

> ID：10916534
> 
> 赞同：1
> 
> 时间：2012-06-06T14:42:11.873
> 
> 标签：model-view-controller

我正在阅读[这篇](http://www.gamasutra.com/view/feature/2280/the_guerrilla_guide_to_game_code.php)关于在游戏开发中使用 MVC 设计模式的文章，我很想尝试一下，但我对如何动态创建 MVC 对象有点困惑。在文章中，他们谈论的是射击游戏的创作，但我不明白士兵如何投掷手榴弹。士兵模型创建手榴弹模型很容易，但是如果士兵模型不必知道手榴弹 mvc 的视图和控制器，如何设置视图和控制器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:02:41.357

恕我直言，我认为你采取了错误的方式..

每场比赛都有棋盘或地图。
您的地图“模型”应该是创作的管弦乐队。

因此，如果士兵正在投掷手榴弹：
1\. 您的 ui 控制器（或士兵控制器）会触发投掷手榴弹的事件。
2.您的地图模型获取该事件并为被投掷的手榴弹创建模型。
3.当手榴弹飞行时，它应该从地图上接收有关经过的障碍物等信息。
简而言之 - 地图是地图上所有可见物体的管弦乐队。
关于文章注意，视图被描述为“EntityRepresentation”或我的话中的地图。
它不是您期望在富客户端应用程序中找到的嵌套 MVC 模式。祝你好运！:)

# firefox - Firefox 13 打破了硒测试

> ID：10916544
> 
> 赞同：7
> 
> 时间：2012-06-06T14:43:03.043
> 
> 标签：firefox, automated-tests, selenium-rc, selenium-firefoxdriver

显然我今天早上升级了我的 Firefox 以及其他一些系统更新，现在我的硒测试被打破了！他们昨天工作得很好，一切都过去了。执行悬停似乎是一个问题。这是我得到的错误：

```
Traceback (most recent call last):
File "sel.py", line 201, in testAddContent
hoveredElement.perform()
File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/common/action_chains.py", line 44, in perform
action()
File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/common/action_chains.py", line 201, in <lambda>
self._driver.execute(Command.MOVE_TO, {'element': to_element.id}))
File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 155, in execute
self.error_handler.check_response(response)
File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/errorhandler.py", line 147, in check_response
raise exception_class(message, screen, stacktrace)
InvalidElementStateException: Message: u'Cannot perform native interaction: Could not load native events component.' ; Stacktrace: Method generateErrorForNativeEvents threw an error in file:///tmp/tmpq2yHMn/extensions/fxdriver@googlecode.com/components/driver_component.js 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T16:41:23.130

您需要昨天发布的 Selenium 2.23。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T18:23:24.553

一种选择是针对旧版本的 Firefox 运行。我在源代码树中包含了一个较旧的 firefox 副本来测试 SizSelCsZzz (https://github.com/fschwiet/SizSelCsZzz/tree/master/browser_archive)。对于 C#，使用这样的 exe 就像：

```
var firefoxProfile = new FirefoxProfile();
var browser = new FirefoxDriver(new FirefoxBinary(exePath), firefoxProfile); 
```

# android - Android ffmpeg 使用

> ID：10916561
> 
> 赞同：0
> 
> 时间：2012-06-06T14:43:52.403
> 
> 标签：android, android-ndk, ffmpeg

我已经成功为 android 编译了 ffmpeg。我写了一个简单的应用程序，它只打开 mp4 文件：

```
int main(int argc, char * argv[]) 
{
    av_register_all();

    __android_log_write(ANDROID_LOG_INFO, "NDK", "Opening file: /sdcard/test.mp4...");

    if (avformat_open_input(&pFormatCtx, "/sdcard/test.mp4", NULL, NULL) != 0) {
        __android_log_write(ANDROID_LOG_INFO, "NDK", "file not opened\n");
        return -1;
    }
    __android_log_write(ANDROID_LOG_INFO, "NDK", "file opened\n");
} 
```

当我运行此代码时，C 代码在此处崩溃：

```
06-06 18:22:42.629: I/DEBUG(31):          #00  pc 00159804  /data/data libffmpeg.so
06-06 18:22:42.629: I/DEBUG(31):          #01  lr 809465dc  /data/data libffmpeg.so 
```

ndk 堆栈写入：

```
Stack frame #00  pc 00159804  /data/data/.../lib/libffmpeg.so: Routine av_opt_set_dict in libavutil/opt.c:552 
```

这是 av_opt_set_dict 函数：

```
int av_opt_set_dict(void *obj, AVDictionary **options)
{
    AVDictionaryEntry *t = NULL;
    AVDictionary    *tmp = NULL;
    int ret = 0;

    while ((t = av_dict_get(*options, "", t, AV_DICT_IGNORE_SUFFIX))) {
        ret = av_set_string3(obj, t->key, t->value, 1, NULL);
        if (ret == AVERROR_OPTION_NOT_FOUND)
            av_dict_set(&tmp, t->key, t->value, 0);
        else if (ret < 0) {
            av_log(obj, AV_LOG_ERROR, "Error setting option %s to value %s.\n", t->key, t->value);
            break;
        }
        ret = 0;
    }
    av_dict_free(options);
    *options = tmp;
    return ret;
} 
```

552行是：

```
while ((t = av_dict_get(*options, "", t, AV_DICT_IGNORE_SUFFIX))) { 
```

这段代码在我的 linux 机器上工作（当然对于 linux 使用 .so，对于 android，我使用 ndk 构建的 .so 文件），但不在 android 下。

此外，它在我有根的 HTC Desire Z 上工作，但不适用于模拟器或无根设备。

在这里我找到了需要更改 libavformat/file.c file_check 函数的帖子：

```
static int file_check(URLContext *h, int mask)
{
    struct stat st;
    int ret = stat(h->filename, &st);
    if (ret < 0)
        return AVERROR(errno);

    ret |= st.st_mode&S_IRUSR ? mask&AVIO_FLAG_READ  : 0;
    ret |= st.st_mode&S_IWUSR ? mask&AVIO_FLAG_WRITE : 0;

    return ret;
} 
```

至

```
static int file_check(URLContext *h, int mask)
{
    struct stat st;
    int ret = stat(h->filename, &st);
    if (ret < 0)
        return AVERROR(errno);

    ret |= st.st_mode&S_IRUSR ? mask&AVIO_FLAG_READ  : 0;
    ret |= st.st_mode&S_IRGRP ? mask&AVIO_FLAG_READ  : 0;
    ret |= st.st_mode&S_IROTH ? mask&AVIO_FLAG_READ  : 0;
    ret |= st.st_mode&S_IWUSR ? mask&AVIO_FLAG_WRITE : 0;
    ret |= st.st_mode&S_IWGRP ? mask&AVIO_FLAG_WRITE  : 0;
    ret |= st.st_mode&S_IWOTH ? mask&AVIO_FLAG_WRITE  : 0;

    return ret;
} 
```

但这没有帮助。

有什么建议么？

谢谢

# c# - C#/LINQ/Select Case：这是代码异味吗？

> ID：10916564
> 
> 赞同：1
> 
> 时间：2012-06-06T14:43:57.020
> 
> 标签：c#, linq, refactoring

我有以下代码 - >类似于`Select case using LINQ`- 这不是实际代码 [从互联网上挑选]。只是尝试使用 LINQ 显示 Select Case 概念。在我的代码中，根据我正在创建新 List 对象的*条件*

```
Int32[] numbers = new Int32[] { 1, 2, 1, 3, 1, 5, 3, 1 };

var numberText =
(
    from n in numbers
    where n > 0
    select new
    {
        Number = n,
        Text = 
        (
            n == 1 ? "One" :
            n == 2 ? "Two" :
            n == 3 ? "Three" : "Unknown"
        )
    }
); 
```

但是，[这里](http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html)的页面说 - “用多态性替换条件”。

那么，问题是这种实现是否是代码异味，是否应该 ***始终***严格避免？在循环遍历集合和有条件地创建新对象时，LINQ 似乎是一个显而易见的选择。可能是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:55:02.667

您发布的文章是正确的，但该文章根本不适用于您的查询示例。条件语句确实有其用途。

在示例中，整个方法（可能还有整个对象）*根据对象的一个​​值*（甚至命名为`_type`，这表明了该目的）改变了它的行为。这确实是多态性的一种情况，因为`_type`你可以用不同的类来代表每种类型，而不是 field ，这样就不需要这样的 switch 语句。

但在您的情况下，这只是从一个值到另一个值的转换。
*它不会改变整个对象的行为。*
我可以考虑实现一些将条件逻辑移出查询主体的转换器，但除此之外，代码很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:46:23.367

有根本区别。LINQ 是一个 API，它允许您查询集合（正如您在问题中所展示的那样）。switch（或其他条件）语句用于控制程序流。

您所指的页面正在谈论重构代码，当您有很多基于某种类型控制程序流的条件语句时 - 在这种情况下，它表明您可能希望用一些多态性替换所有条件。所以在这种情况下，有一种代码味道。但是在 LINQ 语句中使用条件是可以的——可能有很多方法来构建你的 LINQ——有些会比其他的表现更好，有些会比其他的更好，但我不会说在 LINQ 中使用条件是一种代码味道。

# javascript - YUI 2.x 版，并带有触摸事件的拖放功能

> ID：10916565
> 
> 赞同：0
> 
> 时间：2012-06-06T14:43:58.250
> 
> 标签：javascript, ipad, touch, yui

我们有一些非常复杂的代码，它们利用了 YUI JavaScript 库提供的拖放功能。我们最近移植了该应用程序，使其更加适合 iPad / 移动设备，但是我们在触摸事件和 YUI 中提供的拖放功能方面遇到了一些问题。更具体地说，我们正在使用`YUI 2.7.0`它没有明确地为拖放库提供触摸支持。

在做了一些研究之后，我发现它`YUI 3.x` *确实*提供了支持，但是由于大量的更改，我们不愿意升级。我们还认为，如果我们要升级，我们可能会考虑将所有 YUI 内容移植到 jQuery。

我尝试使用[此处详述的修复程序](https://stackoverflow.com/a/6362527/259656)来注册触摸事件，它似乎在某种程度上起作用。拖放现在可以工作了，乍一看很可爱；然而，有了这个快速修复，点击缩放不再起作用，而且滚动很困难，如果不是不可能的话。

## YUI 2.x 是否有任何带有触摸事件的拖放的修补程序？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:31:42.840

虽然我无法直接解决这个问题，但我能够采用“[用于触摸设备的 Javascript 拖放](//stackoverflow.com/questions/5186441/javascript-drag-and-drop-for-touch-devices)”中概述的方法。通过将相同的可拖动控件注册到自定义触摸事件处理程序，一切似乎都按预期工作。

# html - GWT DOM 捕获拖放浏览器事件

> ID：10916568
> 
> 赞同：0
> 
> 时间：2012-06-06T14:44:04.150
> 
> 标签：html, gwt, dom

使用 Firefox 和其他现代浏览器，我们可以选择页面的一些文本，然后`Drag and Drop`选择我们的选择。

这个拖放的目的地，可以是任何 HTML 输入，甚至是栏地址、搜索字段等。

我想知道`drag event`浏览器是否以特殊方式处理这种情况，或者是否有可能捕获这种情况（`DOM`事件或类似的东西）。

更具体地说，我正在尝试将此放置功能添加到某些`GWT`对象，然后能够检索选定的文本。

我正在使用 GWT。

**编辑，工作解决方案**

这是一些相关的代码：

```
TextArea text = new TextArea();
SimplePanel panel = new SimplePanel(text);

TextArea text2 = new TextArea();
SimplePanel panel2 = new SimplePanel(text2);

Button button = new Button("button");
button.addDragOverHandler(new DragOverHandler()
{
     @Override
     public void onDragOver(DragOverEvent event)
     {
         GWT.log("onDragOver");
     });

 RootPanel.get().add(panel);
 RootPanel.get().add(panel2);
 RootPanel.get().add(button); 
```

图片 ：

![显示行为的图像](../Images/7044fc44fe8888d581952e534a095df4.png)

按钮的使用只是一个例子。

`I want to drop this text over the button`这里的目标是通过按钮上的一些处理程序检索文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:06:19.190

GWT 内置了对*原生拖放*的支持。

根据您的描述，您似乎正在寻找实现的小部件[`HasDropHandlers`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/HasDropHandlers.html)，而且还有很多;-)

将它添加到自定义小部件也相当容易（看看它是如何在内置小部件中完成的，例如`FocusPanel`或`Grid`）

# javascript - jQuery 或 Javascript-根据环境动态更改链接（相对/站点相对/绝对）

> ID：10916570
> 
> 赞同：0
> 
> 时间：2012-06-06T14:44:16.170
> 
> 标签：javascript, jquery, css, path, external

要部署最近的项目，我必须使用绝对路径，但对于在服务器外部进行本地测试，我想对大多数指向外部脚本和图像的链接使用相对路径。

在另一个项目上，我想在从服务器加载项目时动态更改相对于站点的相对路径。

对于这两个项目，理想情况下，我希望使用一些可重用的 javascript 或 jQuery 方法，根据测试环境自动重新定义这些链接。

所以我知道我需要设置某种类型的全局路径变量。

然后在我的 HTML 标记中添加带有此变量的链接。

但不确定如何实施。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:50:39.893

我使用的最好（也是最不烦人）的方法是映射到本地主机。

假设您在 awebsite.com 工作

*   保持所有链接为绝对链接
*   将 awebsite.com 映射到主机文件上的 127.0.0.1
*   将 awebsite.com 添加到您的虚拟主机文件

大功告成，现在您以 awebsite.com 的身份访问您的测试环境

当您想浏览在线网站时，只需注释您在 hosts 文件中添加的行。

# ruby-on-rails - 要检查的 RSpec 测试（Rails 模型：验证 :something, :inclusion => 来自其他 activeRecord 的列表）

> ID：10916573
> 
> 赞同：3
> 
> 时间：2012-06-06T14:44:33.453
> 
> 标签：ruby-on-rails, rspec, rspec2, factory-bot

下面是我正在使用的代码：

这是我的`app/models`文件：

```
class One < ActiveRecord::Base
  attr_accessible :name, :surname      
end

class Two < ActiveRecord::Base  
  attr_accessible :name, :one_surname

  # generate a list of one's surnames
  def self.LIST_SURNAMES
    list  = Array.new
    arr   = One.all
    arr.each {|one| list << one.surname}

    return list
  end

  validates :one_surname, :inclusion => self.LIST_SURNAMES()
end 
```

这是我的`/spec/models`文件：

```
FactoryGirl.define do
  factory :two do
    name "two_name"
  end

  factory :one do
    name "one_name"
    surname "one_surname"
  end    
end

describe Two do
  it 'should be created' do
    @one = FactoryGirl.create(:one)

    puts "One.last.surname = #{One.last.surname}"
    puts "Two.LIST_SURNAMES = #{Two.LIST_SURNAMES}"

    @two = FactoryGirl.build(:two, :one_surname => Two.LIST_SURNAMES[0])

    @two.save!
  end
end 
```

但是，我的测试失败了。我完全不确定这是为什么。有什么想法吗？

这是`RSpec`输出：

```
One.last.surname  = one_surname
Two.LIST_SURNAMES = ["one_surname"] 
```

此外，我遇到了这个失败：

```
 1) Two should be created
     Failure/Error: @two.save!
     ActiveRecord::RecordInvalid:
       Validation failed: One surname is not included in the list
 # ./category_spec.rb:29:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T16:08:08.793

它在解释时执行 Two.LIST_SURNAMES，而不是运行时。因此，如果您希望它在运行时获取 LIST_SURNAMES，则需要使用 proc

```
validates :one_surname, :inclusion => {:in => proc {self.LIST_SURNAMES()}} 
```

其余的是可选的，但这里有一些干净的代码：

```
class Two < ActiveRecord::Base
  attr_accessible :name, :one_surname

  validates :one_surname, :inclusion => {in: proc{One.pluck(:surname)}}                                              
end 
```

我替换了做同样事情的`LIST_SURNAMES`方法。`One.pluck(:surname)`另外：LIST_SURNAMES，如果你保留它，应该是`def self.list_surnames`因为它不是一个常数。

# jdbc - 如何在项目中添加 JDBC 驱动程序？

> ID：10916576
> 
> 赞同：0
> 
> 时间：2012-06-06T14:44:41.077
> 
> 标签：jdbc, project, driver

我是 Java 初学者，我设法创建了一个应用程序，将数据存储（并显示到 JTable 中）到位于我计算机上的数据库中。我用它制作了一个可执行的.jar，它就像一个魅力（在我的电脑上）。当我在另一台 PC 上运行该应用程序时，我的问题就出现了。

```
try{
        Class.forName("oracle.jdbc.driver.OracleDriver");
    }catch(ClassNotFoundException e){
        JOptionPane.showMessageDialog(null, "Can't find driver");
        System.exit(-1);
    } 
```

我总是收到“找不到驱动程序”的消息对话框。我正在寻求有关如何（以某种方式）将我需要的驱动程序添加到我的可执行 .jar 文件中以便在其他 PC 上正常运行的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:49:47.993

`Class.forName()`将尝试根据类路径中的名称动态加载类（*），因此您需要确保类路径中有正确的类（`OracleDriver`）。请记住，它通常包含在 .jar 中，因此您需要将其放在类路径中。

(*) 在这种情况下，驱动程序会在加载类时自行注册

确保您*拥有*该 jar 的最简单方法是将其与您的项目一起分发（请参阅特定驱动程序的许可是否适合您的情况）

# html - 使用照片滑动在按钮上的 JQuery Mobile 自动换行

> ID：10916577
> 
> 赞同：0
> 
> 时间：2012-06-06T14:44:41.187
> 
> 标签：html, css, jquery-mobile, photoswipe

我有一系列按钮，其中包含使用 Jquery mobile 的 photoswipe 插件的图像。现在，我在每个按钮（位于 内部`.gallery li a`）中都有文本，但如果图像太小或浏览器太窄，文本会随着按钮变小而超出查看部分。我想要它以便文本换行并且按钮仍然封装文本无论如何。我试过使用`white-space:normal`and`word-wrap:break-word`来做到这一点，但无济于事。除了在加载之前将文本添加到图像中之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:58:28.037

use data-inline="true" within the anchor Inline makes the button as wide as the text inside of it needs to be but if you have a paragraph within a button then that may not be your solution it would be best to have a fixed width in that case so it wraps

# python - 将一个元素列表交换为 int

> ID：10916578
> 
> 赞同：1
> 
> 时间：2012-06-06T14:44:46.083
> 
> 标签：python

`a = [{43:123}, {3:103}, {36:103}, {2:102}, {23:100}]`

当每个键都是 id 并且 value 表示多个点时，我如何从中提取 id 。我试过用这个：

```
for b in a: 
     print a[i].keys()
     i+=1 
```

Python 结果是一个列表，但我需要整数类型。例如 `print a[2].keys()`结果`[36]`，我需要 36，它是 int。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:46:31.560

访问此类列表中的第一个元素：

```
a[2].keys()[0] 
```

或者

```
next(a[2].iterkeys()) 
```

都返回 int `36`。

要获取所有键的列表：

```
[next(d.iterkeys()) for d in a] 
```

返回`[43, 3, 36, 2, 23]`

也许您应该将您的字典列表转换为一个简单的字典：

```
d = {}
for x in a:
    d.update(x) 
```

获取`{2: 102, 3: 103, 23: 100, 36: 103, 43: 123}`，您可以通过 simple`d.keys()`和 getting获取所有密钥`[3, 2, 43, 36, 23]`，尽管顺序不守恒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:52:49.143

```
>>> [next(iter(d)) for d in a]
[43, 3, 36, 2, 23] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:47:48.163

您有一个字典列表，因此该`keys`方法将为您提供字典的键，并且由于它们都只有一个条目，请使用`[0]`它来引用它：

```
>>> [d.keys()[0] for d in a]
[43, 3, 36, 2, 23] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:47:10.527

正如我在评论中对您的其他问题的回应，这就是您想要的：

尝试：

```
for b in a: 
    print b.keys()[0] 
```

这将提取密钥，因此您最终将打印出：43、3、36、2、23。如果您想要取而代之的值（如 123,103,36,102,100），请使用`b.values()[0]`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T14:47:24.797

如果结果列表中有 [36] 并且想要访问该项目，只需下标元素 0。

即，只需附加`[0]`到使您 [36] 到达列表中的第一个（也是唯一一个）项目的表达式。

所以，在你的情况下：

```
print a[2].keys()[0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T14:50:06.797

尝试这个：

```
def getKeyAtIndex(a, idx):
    return a[idx].keys()[0] 
```

并这样称呼它：

```
print getKeyAtIndex(a, 2)
> 36 
```

作为旁注 - 这是您使用相同数据结构发布的第二个问题 - 字典列表，其中每个字典都包含一个具有单个值的键。这没有多大意义，在这种情况下使用字典你什么也得不到。也许一本字典会更好？像这样：

```
{43:123, 3:103, 36:103, 2:102, 23:100} 
```

或者可能是一个元组列表？像这样：

```
[(43, 123), (3, 103), (36, 103), (2, 102), (23, 100)] 
```

# javascript - 如何在 ruby on rails 视图中访问 javascript 变量

> ID：10916582
> 
> 赞同：0
> 
> 时间：2012-06-06T14:45:00.937
> 
> 标签：javascript, ruby-on-rails, ajax

我们有一个 javascript 代码，其中所选图像的 url 在 javascript 变量 (src) 中获得。我们想在 Rails 视图中访问 src var 以获取所选图像的 id。通过使用 Ajax 进行了尝试，我们尝试将 url 传递给在控制器中创建的 var 但不知何故 ajax 调用不起作用，因此控制器 var 总是显示 nil价值。我们已经通过 2 种方法尝试了 ajax：

1：

```
$('#submit').click(function(){
$.ajax({

    type: "POST",

    url: "index",

    cache: false,

    data: "src="+src1,

    success: function(){ 

           alert("DATA SAVED");

     }
}); 
```

2：

```
<%= link_to_remote "submit" , :url=>{:controller=>'album',:action =>'index' ,:var=>'src1'}%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-06T14:33:04.223

我建议你将你的 Ajax 修改为这样的东西。

```
var MyTestData = '';
function ajax() {
    return $.ajax({
        url: 'index',
        type: 'POST',
        // make sure you use params[:src] in your controller method to access src1
        data: { src: src1 },
        // You should return your response in JSON format
        success: function(data){ MyTestData = data }
    });
} 
```

因此，现在您从 POST 调用中获得的响应将保存在 MyTestData 变量中。
关于如何从控制器方法发送 json 响应的示例

```
def index
    # Use the data you passed in the Ajax call
    data = params[:src]
    # Do some processing
    result = something
    # Return the response in json
    render :json => result
end 
```

这是在提交事件上使用 ajax() 函数的方法

```
$('#submit').click(function(){
    ajax().done(function() {
        // Your MyTestData variable will have whatever details your returned
        // on your POST call. you can test it by logging it in console
        console.log(MyTestData)
      }).fail(function(){
          alert('Ajax call Failed')
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:48:24.773

确保您的`src1`变量在范围内。最简单的方法——虽然不是最好的——就是让 src 成为全局的，在你的 script 标签中定义。

当然，全局变量是不受欢迎的，这是有充分理由的，所以一旦这工作起来，看看整理代码并让 src 在本地声明更多，或者至少是命名空间。

此外，变量名为`src`, 还是`src1`?

# c++ - 铸造复合赋值运算符？

> ID：10916584
> 
> 赞同：4
> 
> 时间：2012-06-06T14:45:06.003
> 
> 标签：c++

我的代码简化为：

```
int x = 5;
x *= 0.5; 
```

用 Visual Studio 编译它，我收到一个警告 C4244，关于可能丢失数据 - 当然，因为（简化）一个 int 乘以一个 double 会导致一个 double，然后将它转换为一个 int，丢失非整数部分.

我的问题是，是否有 C++ 语法来指示这是预期的行为，以便使警告静音（我知道 pragma push/pop 以禁用警告，我认为更清楚地表明这实际上是预期的行为，并且我不只是压制警告）。

长格式将是在乘法之后显式转换，如下所示：

```
x = (int)(x * 0.5); 
```

但是复合运算符符号更容易阅读。

那么，有没有办法像这样投呢？我已经尝试将“（int）”放在我能想到的每个位置，但它们似乎都不是有效的 C++ :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:47:08.300

不是乘以 0.5，而是除以 2。将使用 2`int`的整数除法，并且不会出现警告。

如果您真的想乘以浮点数/双精度数，请不要用于`int`存储结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:53:00.830

警告已到位 - 您应该被警告可能丢失数据。

避免警告的任何方法都涉及使用清楚表达您意图的语法。这可以通过以下方式完成：

1.  创建一个执行您想要的功能。
2.  不要使用一元运算符。相反，使用二元运算符，并显式截断结果：`x = static_cast<int>(x * 0.5);`

使用一元运算符`*`，您无法轻松抑制警告，因为该运算符旨在以清晰直接的方式成为用户，不涉及强制转换 - 而您的案例不满足此要求。所以你不能这样做是一件好事*。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:04:57.190

根据 OP 的评论，最好建议您使用适当的函数，`<cmath>`具体取决于您想要的*舍入行为*类型（有偏/无偏）。

例如`floor`，通常会进行有偏舍入（偏向负无穷大，因为它总是选择较低的整数），即`floor( -7.5 )`会给你`-8`，如果你想要一个对称舍入，你需要自己滚动，即想要`floor( -7.5 )`（`-7`如`floor( 7.5 )`给定`7`）。

`round`但是可以调整以产生无偏的舍入。通常，它会产生`10`from `round( 10.3 )`、`11`from `round( 10.6 )`（或更大）。在中间（[平局](http://en.wikipedia.org/wiki/Rounding#Tie-breaking)）四舍五入仍然存在问题，即`round( 10.5 )`应该提供什么（它通常会产生`11`）。如果这种行为不适合您，您可能需要查看一些替代方案，例如[*银行家舍入*](http://en.wikipedia.org/wiki/Rounding#Round_half_to_even)/[*替代舍入*](http://en.wikipedia.org/wiki/Rounding#Alternating_tie-breaking)等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:03:27.980

int 和 float 相乘的结果**是 float**。

如果要将 int 转换为 float，则可能需要对 float 进行四舍五入以删除十进制值。如果你只是简单地转换它，你可能会有四舍五入的错误。

例如，此函数进行舍入（还有其他舍入数字的方法）：

```
int round(float x)
{
  return static_cast<int>((x > 0.5) ? ceil(x) : floor(x));
} 
```

然后你只需要这样称呼它：

```
 int x = 5;
  float y = 0.33f;
  x = round(x * y); 
```

而且您没有**任何警告**，并且**float 已正确舍入并转换为 int**。

对于具有良好舍入的操作员，我没有合适的解决方案`*=`，因此使用此解决方案您将不得不替换`*=`.

# php - jfow 滑块可以有 3 张以上的幻灯片，我可以制作 img 链接吗？

> ID：10916585
> 
> 赞同：0
> 
> 时间：2012-06-06T14:45:10.967
> 
> 标签：php, jquery, wordpress, jflow

我在 wordpress 插件中使用 jFlow 滑块。在他的说明中，它说要实现此代码

```
[jflow]
[jflowslide imgpath="FullPathOfImage" imgalt="ImageAlt" heading="HeadingOfSlide" slidetext="SlideText" linktitle="LinkTitle"]
[/jflow] 
```

使用这些指南其中 [jflow] 和 [/jflow] 分别是 jFlow Plus 滑块的开头和结尾，继续添加尽可能多的 [jflowslide imgpath="FullPathOfImage" imgalt="ImageAlt" heading="HeadingOfSlide" slidetext="SlideText" linktitle="LinkTitle"] 用于您想要的任意数量的幻灯片。

它工作正常，但我似乎无法让它显示超过 3 张幻灯片

这是PHP

```
<script language="javascript"> 
    $(document).ready(function(){
        $("#jFlowController").jFlow({
            controller: ".jFlowControl", // must be class, use . sign
            slideWrapper : "#jFlowSlider", // must be id, use # sign
            slides: "#jFlow",  // the div where all your sliding divs are nested in
            selectedWrapper: "jFlowSelected",  // just pure text, no sign
            timer_slider: <?php echo $time_slider ?>, // time in miliseconds to display one slide       
            width: "<?php echo $width ?>px",  // this is the width for the content-slider
            height: "<?php echo $height ?>px",  // this is the height for the content-slider
            duration: <?php echo $time ?>,  // time in miliseconds to transition one slide
            prev: ".jFlowPrev", // must be class, use . sign
            next: ".jFlowNext", // must be class, use . sign
            auto: <?php if (get_option("jflow_plus_display") == 'yes'){ ?>true<?php } else {?>false<?php }?>
    });
});
</script> 
<style type="text/css">
#jFlowcontainer{
    width: <?php echo $width ?>px;
    height: <?php echo $height ?>px;
}
</style> 
```

这是JS

```
(function (a) {
  a.fn.jFlow = function (b) {
    var c = a.extend({}, a.fn.jFlow.defaults, b);
    var d = Math.floor(Math.random() * 11);
    var e = c.controller;
    var f = c.slideWrapper;
    var g = c.selectedWrapper;
    var h = c.timer_slider;
    var i = 0;
    var j;
    var k = a(e).length;
    var l = function (b, d) {
        a(c.slides).children().css({
          overflow: "hidden"
        });
        a(c.slides + " iframe").hide().addClass("temp_hide");
        a(c.slides).animate({
          marginLeft: "-" + (d * a(c.slides).find(":first-child").width() + "px")
        }, c.duration * b, c.easing, function () {
          a(c.slides).children().css({
            overflow: "hidden"
          });
          a(".temp_hide").show()
        })
      };
    a(this).find(e).each(function (b) {
      a(this).click(function () {
        p();
        if (a(c.slides).is(":not(:animated)")) {
          a(e).removeClass(g);
          a(this).addClass(g);
          var d = Math.abs(i - b);
          l(d, b);
          i = b
        }
      })
    });
    a(c.slides).before('<div id="' + f.substring(1, f.length) + '"></div>').appendTo(f);
    a(c.slides).find("div").each(function () {
      a(this).before('<div class="jFlowSlideContainer"></div>').appendTo(a(this).prev())
    });
    a(e).eq(i).addClass(g);
    var m = function (b) {
        a(f).css({
          position: "relative",
          width: c.width,
          height: c.height,
          overflow: "hidden"
        });
        a(c.slides).css({
          position: "relative",
          width: a(f).width() * a(e).length + "px",
          height: a(f).height() + "px",
          overflow: "hidden"
        });
        a(c.slides).children().css({
          position: "relative",
          width: a(f).width() + "px",
          height: a(f).height() + "px",
          "float": "left",
          overflow: "hidden"
        });
        a(c.slides).css({
          marginLeft: "-" + (i * a(c.slides).find(":eq(0)").width() + "px")
        })
      };
    m();
    a(window).resize(function () {
      m()
    });
    a(c.prev).click(function () {
      p();
      n()
    });
    a(c.next).click(function () {
      p();
      o()
    });
    var n = function (b) {
        if (a(c.slides).is(":not(:animated)")) {
          var d = 1;
          if (i > 0) i--;
          else {
            i = k - 1;
            d = i
          }
          a(e).removeClass(g);
          l(d, i);
          a(e).eq(i).addClass(g)
        }
      };
    var o = function (b) {
        if (a(c.slides).is(":not(:animated)")) {
          var d = 1;
          if (i < k - 1) i++;
          else {
            i = 0;
            d = k - 1
          }
          a(e).removeClass(g);
          l(d, i);
          a(e).eq(i).addClass(g)
        }
      };
    var p = function (b) {
        if (c.auto == true) {
          if (j != null) clearInterval(j);
          j = setInterval(function () {
            a(c.next).click()
          }, h)
        }
      };
    p();
    a(c.slides).hover(function () {
      clearInterval(j)
    }, function () {
      p()
    })
  };
  a.fn.jFlow.defaults = {
    controller: "#myController",
    slideWrapper: "#mySlides",
    selectedWrapper: ".jFlowSelected",
    timer_slider: 1e4,
    auto: true,
    easing: "swing",
    duration: 400,
    width: "100%",
    prev: ".jFlowPrev",
    next: ".jFlowNext"
  }
})(jQuery) 
```

我一直在扫描，但无法弄清楚。有人有这方面的经验吗？

# excel - Excel 2010 VBA 在导入分隔文本数据时创建奇怪的命名数据范围

> ID：10916588
> 
> 赞同：1
> 
> 时间：2012-06-06T14:45:13.553
> 
> 标签：excel

我正在使用我在网上找到的查询方法将管道分隔的文本文件导入到 Excel 电子表格中。该代码运行起来既漂亮又快速，但是，每次我运行它时，它都会创建一个奇怪的命名范围。问题是我似乎找不到使用 VBA 删除范围的有效方法，我只能使用名称管理器进行删除。这是我的代码：

```
Function doFileQuery(fileName As String, outSheet As String) As Boolean

    Dim rootDir As String

    rootDir = "W:\Development"

    Dim connectionName As String

    connectionName = "TEXT;" + rootDir + "\" + fileName

    With Worksheets(outSheet).QueryTables.Add(Connection:=connectionName, Destination:=Worksheets(outSheet).Range("A5"))

        .Name = fileName
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlOverwriteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileOtherDelimiter = "|"
        .Refresh BackgroundQuery:=False

    End With
    doFileQuery = True
End Function 
```

这是创建的奇怪命名范围：_11r_3_Eastdata_FrankLaRoccaMonths_c_4

这是我尝试删除它的方法： ThisWorkbook.Names("_11r_3_Eastdata_FrankLaRoccaMonths_c_4").Delete

当 VB 遇到上述语句时，它给了我一个

运行时错误“1004”：

应用程序定义或对象定义错误。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:53:35.720

Maybe it's a worksheet-level name. Try:

`ActiveSheet.Names("_11r_3_Eastdata_FrankLaRoccaMonths_c_4").Delete`

# python-2.7 - Python：如何将一串两位数字拆分为数组

> ID：10916589
> 
> 赞同：1
> 
> 时间：2012-06-06T14:45:16.233
> 
> 标签：python-2.7

所以我试图将像“19 01 23 75 03 34”这样的字符串拆分成一个数组。通常我会使用 list() 然后去掉空格，但是因为这些是两位数，所以将它们分成一位数。我对python还是很陌生，如果有一个非常简单的答案，很抱歉！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:47:47.637

使用`str.split`：

```
numbers = "19 01 23 75 03 34".split() 
```

如果您还想将它们解析为整数，您可以使用`map`and `int`：

```
numbers = map(int, "19 01 23 75 03 34".split()) 
```

在线查看它：[ideone](http://ideone.com/vOONu)

# c# - Json和Xml序列化，什么性能更好？

> ID：10916591
> 
> 赞同：14
> 
> 时间：2012-06-06T14:45:17.380
> 
> 标签：c#, xml, json, serialization

我必须在文件中存储一些配置信息。在 C# 代码中，配置数据按类表示，在文件中我将把这个类保存为 json 或 xml 格式。那么，序列化 json 或 xml 的最佳性能是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-12-02T20:23:03.050

好吧，而不是猜测，我有答案。这是测试程序：

```
class Program
{
    static void Main(string[] args)
    {
        string xmlConfig = "";
        string jsonConfig = "";

        Config myConfig = new Config()
        {
            value = "My String Value",
            DateStamp = DateTime.Today,
            counter = 42,
            Id = Guid.NewGuid()
        };

        // Make both strings
        DataContractSerializer xmlSerializer = new DataContractSerializer(typeof(Config));
        using (MemoryStream xmlStream = new MemoryStream())
        {
            xmlSerializer.WriteObject(xmlStream, myConfig);
            xmlConfig = Encoding.UTF8.GetString(xmlStream.ToArray());
        }

        DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(Config));
        using (MemoryStream jsonStream = new MemoryStream())
        {
            jsonSerializer.WriteObject(jsonStream, myConfig);
            jsonConfig = Encoding.UTF8.GetString(jsonStream.ToArray());
        }

        // Test Single
        var XmlSingleTimer = Stopwatch.StartNew();
        SerializeXML(xmlConfig, 1);
        XmlSingleTimer.Stop();

        var JsonSingleTimer = Stopwatch.StartNew();
        SerializeJSON(jsonConfig, 1);
        JsonSingleTimer.Stop();

        // Test 1000
        var XmlTimer = Stopwatch.StartNew();
        SerializeXML(xmlConfig, 1000);
        XmlTimer.Stop();

        var JsonTimer = Stopwatch.StartNew();
        SerializeJSON(jsonConfig, 1000);
        JsonTimer.Stop();

        // Test 10000
        var XmlTimer2 = Stopwatch.StartNew();
        SerializeXML(xmlConfig, 10000);
        XmlTimer2.Stop();

        var JsonTimer2 = Stopwatch.StartNew();
            SerializeJSON(jsonConfig, 10000);
        JsonTimer2.Stop();

        Console.WriteLine(String.Format("XML Serialization Single: {0}ms", XmlSingleTimer.Elapsed.TotalMilliseconds));
        Console.WriteLine(String.Format("JSON Serialization Single: {0}ms", JsonSingleTimer.Elapsed.TotalMilliseconds));
        Console.WriteLine();
        Console.WriteLine(String.Format("XML Serialization 1000: {0}ms", XmlTimer.Elapsed.TotalMilliseconds));
        Console.WriteLine(String.Format("JSON Serialization 1000: {0}ms ", JsonTimer.Elapsed.TotalMilliseconds));
        Console.WriteLine();
        Console.WriteLine(String.Format("XML Serialization 10000: {0}ms ", XmlTimer2.ElapsedMilliseconds));
        Console.WriteLine(String.Format("JSON Serialization 10000: {0}ms ", JsonTimer2.ElapsedMilliseconds));
    }

    public static void SerializeXML(string xml, int iterations)
    {
        DataContractSerializer xmlSerializer = new DataContractSerializer(typeof(Config));
        for (int i = 0; i < iterations; i++)
        {
            using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes(xml)))
            {
                Config serialized = (Config)xmlSerializer.ReadObject(stream);
            }
        }
    }

    public static void SerializeJSON(string json, int iterations)
    {
        DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(Config));
        for (int i = 0; i < iterations; i++)
        {
            using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes(json)))
            {
                Config serialized = (Config)jsonSerializer.ReadObject(stream);
            }
        }
    }
}

public class Config
{
    public string value;
    public DateTime DateStamp;
    public int counter;
    public Guid Id;
} 
```

这是测量的输出：

```
XML Serialization Single: 2.3764ms
JSON Serialization Single: 2.1432ms

XML Serialization 1000: 13.7754ms
JSON Serialization 1000: 13.747ms

XML Serialization 10000: 100ms
JSON Serialization 10000: 134ms 
```

在 1 次迭代之后，JSON 始终以稍微快一点的速度出现。经过 1000 次迭代后，确实没有任何区别。在 10000 次迭代之后，XML 显然更快了。

在这一点上，我无法解释为什么 JSON 一次一个会更快，但 XML 在重复时会更快。可能是由于缓存或库中的一些花哨的东西。您可以看到 JsonSerializer 是线性缩放的，将迭代次数增加 10 个数量级会使经过的时间线性增加 10 个数量级。虽然 XmlSerializer 的行为不同，但它的性能并没有以线性方式缩放。

我重复了几次，并始终得到相同的结果。

因此，教训是，如果您只解析一个对象一次，那么 JSON 会稍微好一些。但是，如果您重复解析对象，那么 XML 可能会执行得更好。虽然，我还没有测试过每次迭代时对象值发生变化会发生什么，但这可能会有所不同。

另请注意，我在这里使用本机 Runtime.Serialization 库。其他库可能会产生不同的结果。

编辑：我只是在每次调用字符串时生成一个新的 Guid 和随机 Int 时尝试了这个。它对单次或 10000 次迭代测试没有任何影响。但是对于 1000 次迭代，JSON 大约快 1 毫秒。所以看起来 XML 序列化器确实在缓存这些值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T14:54:32.110

当我在 .NET 应用程序中查找配置时，我希望在某处找到一个名为 MyApp.exe.config 的 XML 文件。

坚持[最不意外的原则，](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)我更喜欢 XML 序列化而不是 JSON。还有一个额外的好处是 XML 格式的配置可以与[Configuration API](http://msdn.microsoft.com/en-us/library/ms228063%28v=vs.100%29.aspx)一起使用。两者都具有相同的支持：平台不可知论、体面的解析器、基于文本的等。

只有当它成为问题时，性能才是问题。我喜欢在编码之前识别潜在问题，但这通常是关于架构决策引入的性能问题。像这样的东西，很小且相当独立，如果在分析中证明是一个问题，将不难改变。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T14:48:02.130

json 对人类的可读性可能比 xml 低，但 json 生成的文件的大小更小。因此，如果您需要通过网络发送文件，Json 可能是更好的选择，或者如果您希望能够读取它，XML 更好。另一件好事是，在 .NET 4 中，您有 dynamic 关键字，您可以将 Json 直接转换为 C# 对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-05T20:08:43.377

在我看来，一切都取决于您需要做什么以及如何实现，这是一篇比较 JSON 和 XML 的好文章。客户端的压缩和反序列化我选择 JSON。

祝你好运。

[https://dzone.com/articles/json-vs-xml-net-developer%e2%80%99s](https://dzone.com/articles/json-vs-xml-net-developer%e2%80%99s)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T14:47:16.723

序列化的成本大致相同。不太可能有明显的差异。使用您的用户会觉得修改最舒服的格式（因为它是一个配置文件）。

当您需要通过网络发送 JSON 或 XML 时，可能会出现真正的性能差异。然后，性能取决于您发送的内容量，并且由于 JSON 通常比 XML 更简洁，因此它通常在网络上表现更好。

# ruby - 生成现有类的表亲类时“堆栈级别太深”

> ID：10916592
> 
> 赞同：0
> 
> 时间：2012-06-06T14:45:23.430
> 
> 标签：ruby, metaprogramming, stack-overflow

我正在编写一个用于约束处理的 ruby​​ 模块。

（作为我的小经验，主要是关于使用给定域和搜索和修剪来实例化变量）

# 我的意图

的实例`Constraint`将使用一组变量名和一个块进行初始化。将评估该块以检查初始化是否满足约束。

用一个块喂食，它的类方法`Constraint.subclass`返回一个子类`Constraint`，比如说`Subclass1`

在`Subclass1`中，有一个带有预定义块（馈入的块`Constraint.subclass`）的初始化程序和一个类方法`Subclass1.invert`。后者通过再次使用返回另一个子类`Constraint`，例如。`Subclass2``Constraint.subclass`

并且预定义的块`Subclass2`应该是 in 的反转版本`Subclass1`

# 现在的情况

代码或多或少符合我的预期。`Constraint.subclass`有效，但似乎`Subclass.invert`只有在预定义块具有确定的数量时才有效。否则`stack level too deep`会发生。

```
#worked
EQ = Constraint.subclass {|a,b| a == b }
NE = EQ.invert
ALL_DISTINCT = Constraint.subclass {|*args| args.uniq.size == args.size}

#raised stackoverflow
HAVE_DUPLICATE = ALL_DISTINCT.invert 
```

# 资源

在 ruby​​1.9 中列出如下。较少相关的方法被省略，完整版本可在[https://gist.github.com/2882291获得](https://gist.github.com/2882291)

```
module Solver
  class Constraint # class method for a subclass
    def self.subclass &block
      Class.new(self) do
        @@block = block
        def initialize *args
          super *args, &@@block
        end

        def self.invert # class method for a cousin class of current subclass
          p "#{self}.invert"
          new_block = proc {|*args| not @@block.call(*args)}
          self.superclass.subclass &new_block
        end
      end
    end

    def initialize *vars, &block
      # block will be substituted with variable in vars
      raise ArgumentError "array of variable names is required"unless vars.is_a? Array
      raise ArgumentError "block is expected" unless block_given?
      @vars = vars.freeze
      @proc = block.freeze
    end

    # less related methods
  end

  # predefined constraint schema
  EQ = Constraint.subclass {|a,b| a == b }
  NE = EQ.invert

  GT = Constraint.subclass {|a,b| a > b }
  NGT = GT.invert

  LT = Constraint.subclass {|a,b| a < b }
  NLT = LT.invert

  ALL_DISTINCT = Constraint.subclass {|*args| args.uniq.size == args.size}
  #HAVE_DUPLICATE = ALL_DISTINCT.invert
end 
```

# excel - 带有名称/值对的 Excel 下拉列表

> ID：10916596
> 
> 赞同：29
> 
> 时间：2012-06-06T14:45:41.887
> 
> 标签：excel

我有 2 个工作表的工作簿。

“Sheet2”有两列：

```
|    A    |      B        |
+---------+---------------+
|  code1  | description 1 |
|  code2  | Descr 2       | 
```

Sheet1 有几列，其中之一（D 列）是**code**。在本专栏中，我需要一个“投递箱”，什么

*   将显示列 Sheet2!B（描述），当用户选择一个描述时
*   将从`code`col:A 输入。

可以`without additional helper column`在 Sheet1 中做吗？（Excel 2010）

所以，需要一些在 html 中很简单的东西：

```
<select>
  <option value="code1">Description 1</option>
  <option value="code2">Descr 2</option>
</select> 
```

当用户选择“Descr 2”时，表单会得到“code2”。

这个问题可能是重复的 - 但我不确定 - [如何在 excel 中创建包含多列的下拉列表](https://stackoverflow.com/questions/10580581/how-to-create-dropdown-with-multiple-columns-in-excel)，但唯一的答案将我指向另一个问题的解决方案的[外部站点。](http://excelsemipro.com/2011/05/a-dynamic-dependent-drop-down-list-in-excel/)

添加了屏幕截图以获得更准确的解释： ![在此处输入图像描述](../Images/c65c1073a3b664a0a3c94d756d7b9865.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-03-31T16:43:26.973

**简单的！** 这就是我们将要得到的！

[![在此处输入图像描述](../Images/2fe0e7797ec25f0410714c4a1e65064e.png)](https://i.stack.imgur.com/GY9wY.png)

**仅 3 个步骤：**

1.  定义要用作查找值的范围

2.  创建下拉列表

3.  粘贴一些代码

* * *

**第1步：**`Sheet2`像这样设置并将*命名范围*定义为`_descrLookup`：

[![为 VLookup 定义一个命名范围](../Images/1aa8d7081b0e7c70349fa366bb59b4ca.png)](https://i.stack.imgur.com/3IIEX.png)

```
( Highlight -> Right-Click -> "Define Name..." ) 
```

> 这是一个可选步骤，但它只是让第 3 步的操作变得容易。

* * *

**第 2 步：**在中，使用*数据验证*`Sheet1`创建下拉列表，并使用您希望在下拉列表中显示的值作为源。在这个例子中它是（见上图）：*`Sheet2 A2:A4`

[![将数据验证设置为工作表 2 中的源](../Images/2b2845eda7ee7109f1ff5985320cafa6.png)](https://i.stack.imgur.com/wyIiR.png)

```
( Data -> Data Validation ) 
```

* * *

**第 3 步：**将一些 VBA 代码添加到`Sheet1`：

```
( Right-Click the tab Sheet1 -> View Code ) 
```

将此粘贴到代码窗口中`Sheet1`：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    selectedVal = Target.Value

    If Target.Column = 4 Then
        selectedNum = Application.VLookup(selectedVal, Worksheets("Sheet2").Range("_descrLookup"), 2, False)

        If Not IsError(selectedNum) Then
            Target.Value = selectedNum
        End If

    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-06T15:36:48.463

听起来数据验证（允许列表）与 VLOOKUP 相结合会做你想做的事。

在表 2 上设置您的描述/代码列表。使其成为命名范围（有助于避免循环引用问题）。

在工作表 1 的描述列中，使用数据验证来创建引用列表描述列的下拉列表。在代码栏中使用 VLOOKUP 函数，关闭下拉列表值。

```
=IF(B4="", "", VLOOKUP(B4, FruitList, 2, FALSE)) 
```

**更新**-

我开始明白你所说的“没有帮助列”是什么意思，但我不确定你能否得到你想要的。Excel设计的一个事实：所见即所得，即单元格中显示的值是该单元格的有效值。您不能让单元格显示一个值但“包含”另一个值。这样的事情在 HTML 中“非常简单”，但 HTML 控件的构建目的与电子表格中的单元格不同。它同时是两件事：一个值，以及该值的用户界面呈现。电子表格单元格可以包含一种确定值的方法（下拉列表、公式等），但它达到的任何值都将是它显示的值。

Excel 支持组合框等表单，但我相信该值仍会输出到另一个单元格。

通常的方法是使用数据验证来创建一个下拉列表，并使用 VLOOKUP 为代码创建一个单独的列。如果你真的不能有另一列包含代码，那么我不知道该告诉你什么。这将取决于如何使用数据；您是要打印输出，还是正在由另一个程序处理工作表？

**更新 2**

如果您真的不想使用单独的代码列，*则可以*使用此处部分描述的组合框技术：

[http://www.contextures.com/xlDataVal10.html](http://www.contextures.com/xlDataVal10.html)

这会很复杂。您需要做的是 (a) 当用户选择 D 列中的一个单元格时显示组合框，以及 (b) 动态调整框的显示项。它会涉及 VBA 代码，我不能 100% 确定它是可能的。这似乎不值得付出努力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-14T21:47:03.263

我能够使用以下步骤在 Mac OS X 的 Excel 2016 (15.33) 中打开开发人员选项卡：

1.  在菜单中选择**Excel->首选项**
2.  在**创作**部分中，单击**查看**
3.  在对话框底部，选中“**开发人员”选项卡**复选框

[![从 Excel 2016 (15.33) for Mac OS X 查看对话框](../Images/b179d777cecb3cb364d014371b7aa8d3.png)](https://i.stack.imgur.com/jPJAj.jpg)

4.  开发人员选项卡现在在 Excel 中可见

[![带有开发人员选项卡的 Excel 主屏幕](../Images/756a41fb430959cfca082c57ccd88bd1.png)](https://i.stack.imgur.com/CTMQD.jpg)*

# jquery - jQuery - 动态设置过滤方法

> ID：10916597
> 
> 赞同：2
> 
> 时间：2012-06-06T14:45:51.543
> 
> 标签：jquery, variables, methods, parameters

我正在寻找组合一些代码，但我不确定我想做的事情是否可行。基本上我有一个带有一堆 if/else 语句的函数，并且在所有不同的情况下都有一行相似：

```
$('#selector).prev('.class-selector').addClass('current');
$('#selector).next('.class-selector').addClass('current');
$('#selector).last('.class-selector').addClass('current');
$('#selector).first('.class-selector').addClass('current'); 
```

有什么方法可以将过滤方法（`prev`, `next`, `last`, `first`）设置为变量，这样我就不必在我的函数中重复这一行？我尝试将参数传递给函数并使用变量作为方法：

```
$('#selector).variable('.class-selector').addClass('current'); 
```

但这不起作用。我得到：

> 对象没有方法'变量'”错误。

根据 jQuery 代码的读取方式，我隐约明白为什么这不起作用。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:51:21.280

这并不短，但肯定更浓缩:)

```
for (var i = 0, fns = ['prev', 'next', 'last', 'first'], fn; fn = fns[i]; ++i) {
    $('#selector')[fn]('.class-selector').addClass('current');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:49:51.060

```
var $all = $('#selector .class-selector')
$all.eq(0).addClass('current'); //first
$all.eq(4).addClass('current'); //fifth
$all.eq($all.length-1).addClass('current'); //last 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:36:29.433

您可以尝试将其作为 jquery 插件...

```
(function( $ ){
    $.fn.pnlf = function(class_selector, current) {
        this.prev(class_selector).addClass(current);
        this.next(class_selector).addClass(current);
        this.last(class_selector).addClass(current);
        this.first(class_selector).addClass(current);

        return this;
    };
})( jQuery );

// Use the plugin on the selected element...
$("#selector").pnlf("class-selector", "current"); 
```

# ruby-on-rails - Ruby on Rails 2.3 SQL LIKE 查询

> ID：10916604
> 
> 赞同：1
> 
> 时间：2012-06-06T14:46:26.270
> 
> 标签：ruby-on-rails

我能够在 Rails 2.3 中进行 LIKE 查询的唯一方法如下：

```
access_points.all(:conditions => "mac_address LIKE '%#{@q}%'") 
```

官方文档说这种方式是不安全的，因为会受到 SQL 注入的影响：

> 将您自己的条件构建为纯字符串可能会使您容易受到 SQL 注入攻击。例如，Client.first(:conditions => "name LIKE '%#{params[:name]}%'") 是不安全的。有关使用数组处理条件的首选方法，请参阅下一节。 [http://guides.rubyonrails.org/v2.3.8/active_record_querying.html](http://guides.rubyonrails.org/v2.3.8/active_record_querying.html)

但不幸的是，它没有解释如何正确地进行 LIKE 查询，而且我无法在 google 上找到它，因为 LIKE 是一个通用的关键字。

有什么提示吗？我是 Rails 新手，但我有 Symfony 和 Django 的经验。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T14:50:55.630

这就是你想要的方式：

```
:conditions => ['mac_address LIKE ?', "%#{@q}%"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:58:57.133

奥斯卡是对的。一些解释。正如 Oscar 向您展示的那样，您必须使用 rails sql 查询过滤。所以你把“喜欢？” 在 sql 语句和外部放置您的搜索字符串（使用 ruby​​ 代码）。Rails 将接管并正确清理搜索字符串。

还要记住，如果您正在查询 Postgres，它默认为区分大小写的查询，但也有不区分大小写的 ilike。这让我有几次。

# c# - 包含在已编译的查询中

> ID：10916607
> 
> 赞同：1
> 
> 时间：2012-06-06T14:46:33.667
> 
> 标签：c#, performance, entity-framework, data-access, compiled-query

我正在尝试识别和改进 WCF 服务中的一些热点。其中一个查询使用了大量的 Include 语句。SQL server 性能是阳光和棒棒糖，但 EF 性能真的很差。

将这个怪物分解为几个较小的查询已经有很大帮助，将一些查询转换为 CompiledQueries 也为整体执行时间创造了奇迹。

可悲的是，EF 似乎无法正确处理 CompiledQuery 中的 Include 语句，抛出异常说：

```
LINQ to Entities does not recognize the method 'System.Linq.IQueryable`1[xx] Include[xxx](System.Linq.IQueryable`1[xxx], System.String)' method, and this method cannot be translated into a store expression. 
```

编译后的查询看起来像这样：

```
 private static readonly Func<OurContext, Guid, IQueryable<MyType>> GetResidenceAccessForSubscriber =
        CompiledQuery.Compile<OurContext, Guid, IQueryable<MyType>>(
        (context, value) => (
            from t in context.MyType.Include("Stuff.MoarStuff")
            where t.Id == value
            select t)); 
```

虽然原始看起来像（并且有效）：

```
var q = (
                        from tin container.MyType
                        where t.Id == id
                        select t)
                            .Include("Stuff.MoarStuff"); 
```

有小费吗？

# android - 将联系人从文件保存到 Android 设备

> ID：10916611
> 
> 赞同：0
> 
> 时间：2012-06-06T14:46:40.670
> 
> 标签：android, contacts

如何从文件中获取联系人号码以保存在手机中。我可以从手机中提取联系人，但无法从某些文件中保存联系人..请帮助..我什至不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:59:01.283

这取决于联系人如何存储在文件中。如果它是标准格式，例如 CSV 或 vCard，您应该可以将其导入您的 Gmail 通讯录。然后，假设您的 Google 帐户与您的手机相关联，您的 Android 手机就会有联系人。

为此，请登录 Gmail，单击左上角的下拉框并选择联系人，单击更多，然后选择导入...

# jsf - 如何在 JSF 页面中显示从属性文件加载的属性

> ID：10916612
> 
> 赞同：4
> 
> 时间：2012-06-06T14:46:40.783
> 
> 标签：jsf, properties-file

是否可以在 JSF 页面中显示从`project.properties`文件加载的属性（例如数据库名称）？

在**project.properties**中：

```
cfg.bd.dbname=midatabase-name 
```

在一些 jsf 页面中，一些表达式类似于：

```
<h:outputText value="#{cfg.bd.dbname}" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T17:12:47.357

你可以（ab）使用[`<f:loadBundle>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/loadBundle.html)这个。

```
<f:loadBundle basename="project" var="project" />
...
<h:outputText value="#{project['cfg.bd.dbname']} /> 
```

我说*滥用*，因为`<f:loadBundle>`它最初旨在加载允许国际化的本地化文本包，但由于它使用相同类型的属性文件在幕后，您可以将它用于类路径中的任意属性文件。

# python - UnicodeDecodeError，python 中雪球词干算法的 ascii 处理

> ID：10916613
> 
> 赞同：3
> 
> 时间：2012-06-06T14:46:44.750
> 
> 标签：python, regex, encoding, byte-order-mark, python-unicode

我在将一般文件读入我制作的程序时遇到了一些麻烦。我目前遇到的问题是 pdf 基于某种变异的 utf-8，包括一个 BOM，它给我的整个操作带来了麻烦。在我的应用程序中，我使用需要 ascii 输入的 Snowball 词干算法。有许多主题涉及解决 utf-8 的错误，但是没有一个涉及将它们发送到 Snowball 算法中，或者考虑到 ascii 是我想要的最终结果这一事实。目前我使用的文件是使用标准 ANSI 编码的记事本文件。我得到的具体错误信息是这样的：

```
File "C:\Users\svictoroff\Desktop\Alleyoop\Python_Scripts\Keywords.py", line 38, in Map_Sentence_To_Keywords
    Word = Word.encode('ascii', 'ignore')
UnicodeDecodeError: 'ascii' codec can't decode byte 0x96 in position 0: ordinal not in range(128) 
```

我的理解是，在 python 中，包括 ignore 参数只会传递遇到的任何非 ascii 字符，这样我会绕过任何 BOM 或特殊字符，但显然情况并非如此。调用的实际代码在这里：

```
def Map_Sentence_To_Keywords(Sentence, Keywords):
    '''Takes in a sentence and a list of Keywords, returns a tuple where the
    first element is the sentence, and the second element is a set of
    all keywords appearing in the sentence. Uses Snowball algorithm'''
    Equivalence = stem.SnowballStemmer('english')
    Found = []
    Sentence = re.sub(r'^(\W*?)(.*)(\n?)$', r'\2', Sentence)
    Words = Sentence.split()
    for Word in Words:
        Word = Word.lower().strip()
        Word = Word.encode('ascii', 'ignore')
        Word = Equivalence.stem(Word)
        Found.append(Word)
    return (Sentence, Found) 
```

通过将一般的非贪婪的非字符正则表达式删除包含到字符串的前面，我还希望可以删除麻烦的字符，但事实并非如此。除了 ascii 之外，我还尝试了许多其他编码，并且严格的 base64 编码有效，但对于我的应用程序来说非常不理想。关于如何以自动化方式解决此问题的任何想法？

Element 的初始解码失败，但在实际传递给编码器时返回 unicode 错误。

```
for Element in Curriculum_Elements:
        try:
            Element = Element.decode('utf-8-sig')
        except:
            print Element 
        Curriculum_Tuples.append(Map_Sentence_To_Keywords(Element, Keywords))

def scraping(File):
    '''Takes in txt file of curriculum, removes all newlines and returns that occur \
    after a lowercase character, then splits at all remaining newlines'''
    Curriculum_Elements = []
    Document = open(File, 'rb').read()
    Document = re.sub(r'(?<=[a-zA-Z,])\r?\n', ' ', Document)
    Curriculum_Elements = Document.split('\r\n')
    return Curriculum_Elements 
```

显示的代码生成所见的课程元素。

```
 for Element in Curriculum_Elements:
        try:
            Element = unicode(Element, 'utf-8-sig', 'ignore')
        except:
            print Element 
```

这种类型转换的hackaround确实有效，但是转换回ascii有点不稳定。返回此错误：

```
Warning (from warnings module):
  File "C:\Python27\lib\encodings\utf_8_sig.py", line 19
    if input[:3] == codecs.BOM_UTF8:
UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:58:03.520

Try decoding the UTF-8 input into a `unicode` string first, then encode that into ASCII (ignoring non-ASCII). It really doesn't make sense to encode a string that's already encoded.

```
input = file.read()   # Replace with your file input code...
input = input.decode('utf-8-sig')   # '-sig' handles BOM

# Now isinstance(input, unicode) is True

# ...
Sentence = Sentence.encode('ascii', 'ignore') 
```

* * *

After the edits, I see that you were already attempting to decode the strings before encoding them in ASCII. But, it seems the decoding was happening too late, after the file's contents had already been manipulated. This can cause problems since not every UTF-8 byte is a character (some characters take several bytes to encode). Imagine an encoding that transforms any string to a sequence of `a`s and `b`s. You wouldn't want to manipulate it before decoding it, because you'd see `a`s and `b`s everywhere even if there weren't any in the unencoded string -- the same problem arises with UTF-8, albeit much more subtly because *most* bytes really are characters.

So, decode once, before you do anything else:

```
def scraping(File):
    '''Takes in txt file of curriculum, removes all newlines and returns that occur \
    after a lowercase character, then splits at all remaining newlines'''
    Curriculum_Elements = []
    Document = open(File, 'rb').read().decode('utf-8-sig')
    Document = re.sub(r'(?<=[a-zA-Z,])\r?\n', ' ', Document)
    Curriculum_Elements = Document.split('\r\n')
    return Curriculum_Elements

# ...

for Element in Curriculum_Elements:
    Curriculum_Tuples.append(Map_Sentence_To_Keywords(Element, Keywords)) 
```

Your original Map_Sentence_To_Keywords function should work without modification, though I would suggest encoding to ASCII before splitting, just to improve efficiency/readability.

# jquery - jquery mobile如何添加书签

> ID：10916616
> 
> 赞同：1
> 
> 时间：2012-06-06T14:47:08.240
> 
> 标签：jquery, html, jquery-mobile

我正在尝试在我的 jquery 移动页面上正常添加书签，但它被解释为页面转换。如果使用jquery mobile，如何设置书签？

```
<a name="Ancla" id="a"></a>    <!--setting bookmark-->

<a href="#Ancla">Ancla</a>     <!--link--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:51:46.910

jQuery Mobile 文档指出：

*由于我们使用 URL 哈希来保留后退按钮的行为，因此使用传统的锚链接 (#foo) 不支持使用页面锚来跳转到页面上的某个位置。使用 silentScroll 方法滚动到特定的 Y 位置，而不触发滚动事件侦听器。你可以传入一个 yPos 参数来滚动到那个 Y 位置。例如：*

```
//scroll to Y 300px
$.mobile.silentScroll(300); 
```

这是一个新的 jsFiddle 你可以做的事情：http: [//jsfiddle.net/dmNqj/3/](http://jsfiddle.net/dmNqj/3/)

我正在做的是使用他们的移动静音滚动功能并找到您想要它去的元素的顶部位置。

**更新 2：**由于 jQMobile 的实验性 'scrollView' 插件禁用`$.mobile.silentScroll`，这是一个使用 jQuery 的本机`scrollTop`功能的 jsFiddle：http: [//jsfiddle.net/dmNqj/6/](http://jsfiddle.net/dmNqj/6/)

# php - 对成员函数 result() 的致命错误调用 - 代码点火器

> ID：10916624
> 
> 赞同：0
> 
> 时间：2012-06-06T14:47:25.490
> 
> 标签：php, codeigniter

似乎在这里经常出现此错误，查看答案我仍然无法弄清楚为什么会出现错误。

我收到错误

> **致命错误：在第83**行调用非对象上的成员函数 result()

 **有问题的行与**控制器**中的此功能有关- 这就是造成错误的原因。

> $this->view_data['categories'] = $my_categories->result();

功能如下。。

```
function _load_search_options()
{
    // Get all the categories for the advanced search page
    $my_categories = $this->Categories_model->get_all();
    $this->view_data['categories'] = $my_categories->result();

    // Get all the PRIMARY colours from teh tbl_colour_options
    $my_colour_options = $this->Colours_model->get_all_primary();
    $this->view_data['colour_options'] = $my_colour_options->result();

    // Get all the colours from teh tbl_colour_options
    $my_colour_options_all = $this->Colours_model->get_all();
    $this->view_data['colour_options_all'] = $my_colour_options_all->result();
} 
```

我的模型如下...

```
function get_all()
{
    $query_str = "
        SELECT *
        FROM categories
        WHERE CATEGORIES_parent_id = 0
    ";

    $results = $this->db->query($query_str);
    $parents = $results->result();

    foreach ($parents as $parent)
    {
        $children = array();

        $query_str = "
            SELECT *
            FROM categories
            WHERE CATEGORIES_parent_id = '$parent->CATEGORIES_id'
        ";

        $children_results = $this->db->query($query_str);
        $children_results = $children_results->result();

        foreach($children_results as $children_result)
        {
            $children[$children_result->CATEGORIES_id] = $children_result->CATEGORIES_title;
        }

        $categories[$parent->CATEGORIES_title] = $children;

    }

    return $categories;
} 
```

值得注意的是，在 MySQL 中单独运行 SELECT 查询会带来一些结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:53:54.893

该函数`get_all`不返回数据库对象（资源）。

函数中的`$categories`变量`get_all`被定义为一个数组。

您不能将其作为对象访问或调用该`results`函数。**

# string - 解密已知字符串

> ID：10916626
> 
> 赞同：-2
> 
> 时间：2012-06-06T14:47:29.087
> 
> 标签：string, encryption

我想知道是否可以解密字符串 - 我知道原始的、预加密的字符串值。我正在尝试审核生成令牌的定制程序的强度。

任何正确方向的指导表示赞赏 - 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:56:40.600

你说：“我正在尝试审核生成令牌的定制程序的强度。” 除非它是由非常昂贵的安全顾问“定制”的，否则它将是不安全的。在安全方面，确保每一个微小的细节都正确至关重要，没有经过多年安全培训的任何人都无法做到这一点。

已经有很多很好理解的加密方法用于许多目的，几乎可以肯定包括你的。找到它们并使用它们。“定制”程序将包含错误。保证。

请参阅[WEP](http://en.wikipedia.org/wiki/Wired_Equivalent_Privacy#Flaws)以了解错误的微小细节的故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:02:02.313

这取决于使用密码算法。例如，如果您使用`MD5`，您可以尝试生成哈希碰撞。但是在实践中是非常困难的。接下来，使用某些算法的非常熟悉的方法是纯文本攻击。很常见的破解哈希的方法是`rainbow tables`和GPU处理器。但是当你使用 hasing 算法时，你可以很简单地使用盐来提高安全性。甚至 RSA 也不能完全抵抗破解，大约 99.98% 的密钥是上帝。休息不好，是利用弱点造成的`PRNG`。您可以阅读 PDF： [http ://eprint.iacr.org/2012/064.pdf](http://eprint.iacr.org/2012/064.pdf)

# codeigniter - CodeIgniter Active Record - 返回一个非关联数组作为结果

> ID：10916627
> 
> 赞同：2
> 
> 时间：2012-06-06T14:47:31.593
> 
> 标签：codeigniter, activerecord

有没有办法作为 CI db 查询的结果返回非关联数组？说，我有这张桌子：

```
id | Name
 1 | Name1
 2 | Name2
 3 | Name3
 4 | Name4 
```

我希望将名称作为非关联数组返回。

`$this->db->select('tablename')->result_array()`返回一个关联数组。

这在 CI 中甚至可能吗？如果是的话，我不想添加额外的`foreach`语句。

请阐明一些观点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:17:04.007

您可以只使用[array_values()](http://www.php.net/manual/en/function.array-values.php)，它返回一个包含关联数组值的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:16:50.050

没有内置函数（或者至少我从未见过），我建议使用`foreach`循环方法为此使用另一个函数。

我可能会建议在 CI 论坛上查看其他方法，我相信其他人之前也遇到过这个问题。

对不起，我不能再帮忙了。

# java - 通过 Eclipse 的 Postgresql JDBC 连接没有发生

> ID：10916636
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:47:43.577
> 
> 标签：java, eclipse, postgresql, jdbc

我正在尝试对 postgresql 数据库进行简单的连接测试，代码运行良好，但我收到以下消息：

*PostgreSQL 9.0 JDBC4 (build 802) 位于：jar:file:/C:/thales/Dropbox/study/java/jars/postgresql-9.0-802.jdbc4.jar!/org/postgresql/Driver.class*

我正在使用地址[http://jdbc.postgresql.org/download.html提供的 jdbc 文件](http://jdbc.postgresql.org/download.html)

接下来，代码：

```
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.SQLException;

public class connector {
  public static void main(String[] argv) {
  System.out.println("Checking if Driver is registered with DriverManager.");

  try {
    Class.forName("org.postgresql.Driver");
  } catch (ClassNotFoundException cnfe) {
    System.out.println("Couldn't find the driver!");
    System.out.println("Let's print a stack trace, and exit.");
    cnfe.printStackTrace();
    System.exit(1);
  }

  System.out.println("Registered the driver ok, so let's make a connection.");

  Connection c = null;

  try {
    // The second and third arguments are the username and password,
    // respectively. They should be whatever is necessary to connect
    // to the database.
    c = DriverManager.getConnection("jdbc:postgresql://localserver/test","ping", "pong");
  } catch (SQLException se) {
    System.out.println("Couldn't connect: print out a stack trace and exit.");
    se.printStackTrace();
    System.exit(1);
  }

  if (c != null)
    System.out.println("Hooray! We connected to the database!");
  else
    System.out.println("We should never get here.");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:12:14.893

感谢所有反馈，但我设法解决了重新安装 Eclipse 的问题（？？）

使用相同的代码和相同的 jdbc 驱动程序，问题中描述的代码有效。

# javascript - 在 google chrome 扩展中的 javascript 中附加一个孩子

> ID：10916637
> 
> 赞同：1
> 
> 时间：2012-06-06T14:47:46.900
> 
> 标签：javascript, google-chrome-extension

[我正在编写我的第一个程序以在 Google chrome 中进行扩展，我只是从这里](http://code.google.com/chrome/extensions/getstarted.html)以“hello world”教程为例

这是我的 html 文件源代码：

```
<!doctype html>
<html>
<head>
  <title>Getting Started Extension's Popup</title>
  <style>
    body {
      min-width:357px;
      overflow-x:hidden;
    }

    img {
      margin:5px;
      border:2px solid black;
      vertical-align:middle;
      width:75px;
      height:75px;
    }
  </style>

  <!-- JavaScript and HTML must be in separate files for security. -->
  <script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

广告这是我的 javascript 文件源代码：

```
var req = new XMLHttpRequest();
req.open(
    "GET",
    "http://api.flickr.com/services/rest/?" +
    "method=flickr.photos.search&" +
    "api_key=90485e931f687a9b9c2a66bf58a3861a&" +
    "text=hello%20world&" +
    "safe_search=1&" +  // 1 is "safe"
    "content_type=1&" +  // 1 is "photos only"
    "sort=relevance&" +  // another good one is "interestingness-desc"
    "per_page=20",
true);
req.onload = showPhotos;
req.send(null);

function showPhotos() {
   var photos = req.responseXML.getElementsByTagName("photo");

   var element = document.createElement('h1');
   element.appendChild(document.createTextNode 
   ('tete '+document.location.href+'hgdfhgd'));

   for (var i = 0, photo; photo = photos[i]; i++) {
   var img = document.createElement("image");
   img.src = constructImageURL(photo);
   document.body.appendChild(img);
 }
}

// See: http://www.flickr.com/services/api/misc.urls.html
function constructImageURL(photo) {
   return "http://farm" + photo.getAttribute("farm") +
  ".static.flickr.com/" + photo.getAttribute("server") +
  "/" + photo.getAttribute("id") +
  "_" + photo.getAttribute("secret") +
  "_s.jpg";
} 
```

该示例非常简单并且工作正常，但是当添加我自己的 javascript 指令时，它不显示它，添加的指令在 showPhotos() 函数中，它是：

```
 var element = document.createElement('h1');
   element.appendChild(document.createTextNode 
   ('tete '+document.location.href+'hgdfhgd')); 
```

结果，我可以看到其他内容，但我的“h1”我看不到。我错过了什么？谁能帮帮我？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:46:13.293

您正在创建一个元素，但没有将其添加到页面中。所以是看不出来的。

您可以看到它添加它，例如这样：

```
var element = document.createElement('h1');
element.appendChild(document.createTextNode ('tete '+document.location.href+'hgdfhgd'));
document.body.appendChild(element); 
```

# atk4 - Frontend.php 中的 atk4 SQLAuth

> ID：10916638
> 
> 赞同：1
> 
> 时间：2012-06-06T14:47:47.003
> 
> 标签：atk4

在 Frontend.php 我替换了这个：

```
$this->add('BasicAuth')
        ->allow('demo','demo')
        // use check() and allowPage for white-list based auth checking
        //->check()
        ; 
```

有了这个：

```
$this->add('SQLAuth')->setSource('user','email','password')
// use check() and allowPage for white-list based auth checking
//->check()
; 
```

基于此你管视频：[http ://www.youtube.com/watch?v=0_OROS53Fq8&feature=relmfu](http://www.youtube.com/watch?v=0_OROS53Fq8&feature=relmfu)

但是，SQLAuth 将不起作用。我收到此错误：

```
Fatal error: Call to a member function loaded() on a non-object in
C:\wamp\www\atk4\lib\Auth\Basic.php on line 242 
```

我的表名是正确的，并且我知道连接正在工作并且表中有用户，因为我构建了一个用户注册表单和 CRUD，当我浏览你的管视频时，它可以工作。

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:10:50.257

SQLAuth 将在 4.2 中删除，不应再使用。您可以使用 BasicAuth 并将其设置为根据您的用户表响应模型

# c# - 从 BackGroundWorker 正确设置 DataGridView 中条目的可见性

> ID：10916639
> 
> 赞同：1
> 
> 时间：2012-06-06T14:47:47.143
> 
> 标签：c#, datagridview, backgroundworker

我有一个 DataGridView，它有一些 DataSource。我需要根据用户指定的某些条件过滤 DataGridView 中的项目。

问题是数据在一个非常慢的数据库上。对于许多项目，我可以过滤存储在项目本身上的信息（这很快），但有时我需要查询数据库以确定一行是否可见。

因此，我通过以下方式使用 BackGroundWorker：

1.  我制作了 DataGridView 中行的副本（使用*CopyTo*）并将其传递给*RunWorkerAsync*方法
2.  在*DoWork*方法中，我检查数组中的每个*DataGridViewRow*元素。有时我可以简单地查找行中的信息（例如读取*DataGridViewRow*上的第 2 列），有时我需要查询数据库。
3.  每次我知道一行是否可见时，我都会发送一个元组，其中包含一个行号（只是传递的*DataGridViewRow*元素数组中的位置）和一个指示*ReportProgress*方法可见性的布尔值，该方法将可见性设置为数据网格视图。

复制（使用 CopyTo）的原因是为了避免从另一个线程访问 DataGridViews RowCollection。

所有这一切都很好，但我真的想知道这是否是一个非常糟糕的方法。

*   像这样对 RowCollection 进行操作真的很糟糕吗？
*   如果可以的话，是否需要使用CopyTo？我这样做的原因是因为列表是通过引用传递的，我想避免从单独的线程访问 UI。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:03:25.200

我认为您的 GUI 对于后台工作人员的数据库来说太紧了。

一般来说，我更喜欢使用`BindingList<T>`将网格绑定到并操作列表，而不是通过数据库。但是如果我有相当大量的数据要从数据库中检索，那么我可能会启用 datagridview 的*“虚拟模式”*，然后再次使用`BindingList<T>`.

希望这可以帮助。

**EDIT1：**当然你可以直接在你的DataTables上使用过滤......但也许你不应该让后台工作人员参与进来。

**EDIT2：**我认为`BindingList<T>`有机会将视图绑定到模型，而不是直接绑定到数据层，这通常更好，因为将表示层的数据层分开。更重要的是，您可以从模型创建一个视图模型以将网格绑定到（MVVM 模式）。但真的取决于你的项目。

# c# - 通信异常。WCF

> ID：10916645
> 
> 赞同：0
> 
> 时间：2012-06-06T14:47:53.847
> 
> 标签：c#, .net, wcf, communicationexception

我对 WCF 有疑问。
第一个应用程序是我从站点[this](http://habrahabr.ru/post/116764/)编写的示例。它运作良好。
我需要制作一个应用程序来从数据库的服务器列表中传输对象。但是当我得到客户列表时，以下内容`CommunicationException`：

> 接收到 (localhost:8080) 的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

服务器运行良好，或者我不明白的东西。
如果你需要关于项目的信息（代码），我会给它

对不起我的英语不好。

UPD：配置：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="Habra.Server.MobilePosts" behaviorConfiguration="MyBehavior">
        <endpoint
            address=""
            binding="basicHttpBinding"
            contract="Habra.Core.IMobilePosts" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyBehavior">
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Castle.Core" publicKeyToken="407dd0808d44fbdc" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

服务器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Habra.Server
{
    using System.ServiceModel;

    public class Program
    {
        public static void Main(string[] args)
        {
            Type serviceType = typeof(MobilePosts);
            Uri serviceUri = new Uri("http://localhost:8080/");
            ServiceHost host = new ServiceHost(serviceType, serviceUri);
            host.Open();

            foreach (Uri uri in host.BaseAddresses)
            {
                Console.WriteLine("\t{0}", uri.ToString());
            }

            Console.WriteLine();
            Console.WriteLine("Number of dispatchers listening : {0}", host.ChannelDispatchers.Count);
            foreach (System.ServiceModel.Dispatcher.ChannelDispatcher dispatcher in host.ChannelDispatchers)
            {
                Console.WriteLine("\t{0}, {1}", dispatcher.Listener.Uri.ToString(), dispatcher.BindingName);
            }

            Console.WriteLine();
            Console.WriteLine("Press <ENTER> to terminate Host");
            Console.ReadLine();
        }
    }
} 
```

UPD2：
失败：

```
MobilePostsClient mpc = new MobilePostsClient();
var list = mpc.GetAllPosts(); 
```

`MobilePostClient`由`Add Service Reference`.

UPD3：IMobilePosts：

```
[ServiceContract]
public interface IMobilePosts
{
    [OperationContract]
    List<Post> GetAllPosts();

    [OperationContract]
    FullPost GetFullPost(int postId);
} 
```

移动帖子：

```
public class MobilePosts : IMobilePosts
{
    private readonly IRepository repository = new RepositoryQueries();

    public List<Post> GetAllPosts()
    {
        var list = this.repository.GetAllPosts();

        foreach (Post post in list)
        {
            Console.WriteLine(post.Title + " loading...");
        }

        return list;
    }

    public FullPost GetFullPost(int postId)
    {
        return this.repository.GetFullPostById(postId);
    }
} 
```

存储库工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:07:36.347

您是否将属性设置为 Post 类属性？

```
[DataContract]
public class Post
{
    [DataMember]
    public string Post{get;set;} 
```

您可以使用 ServiceBehavior 跟踪所有消息，[在此处阅读更多信息](http://msdn.microsoft.com/en-us/library/ee844556%28v=vs.95%29.aspx)。
即把属性放到服务中

```
[SilverlightFaultAttribute]
public class MobilePosts : IMobilePosts        
{...} 
```

并将 [跟踪输出设置为文件](https://stackoverflow.com/questions/27610/how-to-add-simple-tracing-in-c)

```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;
using System.Xml;

namespace Wcf
{
public class SilverlightFaultAttribute : Attribute, IServiceBehavior
{
    #region IServiceBehavior Members

    public void AddBindingParameters(ServiceDescription serviceDescription,
        ServiceHostBase serviceHostBase, System.Collections.ObjectModel.Collection<ServiceEndpoint> endpoints,
        BindingParameterCollection bindingParameters)
    {

    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        Trace.WriteLine(" */*/*/* ApplyDispatchBehavior");

        foreach (var t in serviceHostBase.ChannelDispatchers)
        {
            var channelDispatcher = t as ChannelDispatcher;
            if ((channelDispatcher == null)) continue;
            foreach (var dispatcher2 in channelDispatcher.Endpoints)
            {
                var dispatchRuntime = dispatcher2.DispatchRuntime;
                dispatchRuntime.MessageInspectors.Add(new SilverlightFaultMessageInspector());
            }
        }
    }
    public class SilverlightFaultMessageInspector : IDispatchMessageInspector
    {
        public void BeforeSendReply(ref Message reply, object correlationState)
        {
            if (reply.IsFault)
            {
                Trace.WriteLine(" */*/*/* reply.IsFault");
                Trace.WriteLine(reply);
                var property = new HttpResponseMessageProperty();

                // Here the response code is changed to 200.
                property.StatusCode = System.Net.HttpStatusCode.OK;

                reply.Properties[HttpResponseMessageProperty.Name] = property;

                MessageBuffer buffer = reply.CreateBufferedCopy(Int32.MaxValue);
                Message copy = buffer.CreateMessage();  // Create a copy to work with
                reply = buffer.CreateMessage();         // Restore the original message 

                object faultDetail = ReadFaultDetail(copy);
                Exception exception = faultDetail as Exception;
                Trace.WriteLine(exception);
            }
        }

        public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
        {
            // Do nothing to the incoming message.
            return null;
        }

        private static object ReadFaultDetail(Message reply)
        {
            const string detailElementName = "Detail";
            using (XmlDictionaryReader reader = reply.GetReaderAtBodyContents())
            {
                // Find <soap:Detail>
                while (reader.Read())
                {
                    if (reader.NodeType == XmlNodeType.Element && reader.LocalName == detailElementName)
                    {
                        break;
                    }
                }

                // Did we find it?
                if (reader.NodeType != XmlNodeType.Element || reader.LocalName != detailElementName)
                {
                    return null;
                }
                // Move to the contents of <soap:Detail>
                if (!reader.Read())
                    return null;
                // Deserialize the fault
                NetDataContractSerializer serializer = new NetDataContractSerializer();
                try
                {
                    return serializer.ReadObject(reader);
                }
                catch (FileNotFoundException)
                {
                    // Serializer was unable to find assembly where exception is defined 
                    return null;
                }
            }
        }
    }

    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
    }

    #endregion
}
} 
```

# visual-studio-2010 - InstallShield 中未解决依赖关系

> ID：10916648
> 
> 赞同：3
> 
> 时间：2012-06-06T14:48:02.623
> 
> 标签：visual-studio-2010, nuget, quartz.net, installshield-le

InstallShield 中未解决依赖关系。

我的环境是 VS 2010 和 InstallShield Limited Edition。我有一个项目，我正在尝试使用 InstallShield Limited Edition 项目进行部署。要部署的项目有几个通过 NuGet 添加的引用：

```
<packages>
  <package id="Common.Logging" version="2.0.0" />
  <package id="CsvHelper" version="1.4.0" />
  <package id="log4net" version="1.2.10" />
  <package id="NServiceBus" version="3.2.1" />
  <package id="NServiceBus.Host" version="3.2.1" />
  <package id="Quartz" version="2.0.1" />
</packages> 
```

在安装项目中，我添加了项目的主要输出（步骤 2 指定应用程序数据/文件）。添加所有依赖项（右键单击主要输出 -> 构建时扫描的依赖项），除了一个。该列表和已安装的文件中缺少 Quartz.dll。

我该如何解决这个问题，以便解决所有依赖项并将其添加到设置中？

我不想手动添加 Quartz.dll，因为当通过 NuGet 提供新版本时，它的位置会改变。

顺便说一句：Quartz.dll 是一个项目参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:32:21.183

IMO、依赖分析工具（和其他分析工具）非常适合获取数据点，以便您自己分析应用程序的工作方式以及它的运行时/部署需求是什么。

试图用一个自动的“简单”按钮来封装这个过程并不是一个好策略。

如果您知道您的代码需要“quartz.dll”，请确认：

1) 它是可再分发的 2) 它还没有部署解决方案（例如，System.Windows.Forms 由 .NET FRamework Install 部署） 3) 如果需要，手动将其创作到您的安装中。4）关闭依赖扫描并对所有依赖重复此过程。

是不是比要求一个软件为你解决问题更费力？当然。它会更具确定性和可靠性吗？绝对……这就是我们得到大笔报酬的原因。

# asp.net-4.0 - ASP.NET 事件处理

> ID：10916657
> 
> 赞同：0
> 
> 时间：2012-06-06T14:48:25.443
> 
> 标签：asp.net-4.0

我想知道两部分代码之间是否有任何区别：

```
 //1
    public partial class MyPage : System.Web.UI.Page
    {

     public override void DataBind()
     {
        base.DataBind();
        this.myTableGrid.SetupDataSource();
     }

    }

    //2
    public partial class MyPage : System.Web.UI.Page
    {

     public void Page_DataBind(object e, EventArgs e)
     {
        this.myTableGrid.SetupDataSource();
     }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:59:59.900

Essentially, they both accomplish the same task. Your `Page_DataBind` method will be called in `base.DataBind()` so it might save a teeny tiny (i.e. negligible) amount of cpu clicks as it doesn't have to call the method delegate.

One difference in example 2 is that you can call that method, without having to call DataBind() on the page.

This may prove useful if have a lot of controls on your page but only want to databind a few of them (as databinding can prove to be a costly operation, given that it makes heavy use of reflection and type casts).

# android - Android：无法设置微调器分隔线的样式

> ID：10916658
> 
> 赞同：13
> 
> 时间：2012-06-06T14:48:28.870
> 
> 标签：android, themes, spinner, android-spinner, divider

我正在尝试为我的第一个 Android 应用程序创建一个主题，它让我走上了弯路。我终于设法弄清楚如何为下拉列表中的项目设置样式，但现在我无法更改列表项目之间分隔线的颜色。我在 stackoverflow 上搜索了类似的问题，并尝试了几十种组合，但似乎没有任何效果。

这是我的 styles.xml 文件（为清楚起见而缩写）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="MyTheme" parent="android:Theme.Light">
    <item name="android:spinnerStyle">@style/spinnerStyle</item>
    <item name="android:spinnerDropDownItemStyle">@style/spinnerDropDownItemStyle</item>    
    <item name="android:dropDownListViewStyle">@style/spinnerListViewStyle</item>
  </style>

  <style name="spinnerStyle" parent="@android:style/Widget.Spinner">
      <item name="android:background">@drawable/my_theme_spinner</item>
  </style>

  <style name="spinnerDropDownItemStyle" parent="@android:style/Widget.DropDownItem.Spinner">
      <item name="android:background">@drawable/my_theme_spinner_item</item>
      <item name="android:paddingLeft">5dp</item>
      <item name="android:gravity">center_vertical</item>
  </style>

  <style name="spinnerListViewStyle" parent="@android:style/Widget.ListView.DropDown">
      <item name="android:height">3dp</item>
      <item name="android:dividerHeight">3dp</item>
      <item name="android:divider">@color/divider</item>
  </style>
</resources> 
```

不管我做什么，我只是在项目之间得到一个 1dp 浅灰色分隔线（用我的浅色列表项背景几乎看不到它） - 分隔线的高度和颜色都不会受到影响（我也尝试将它设置为可绘制，也没有效果）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-30T17:15:56.040

我有一个非常简单的 Spinner 活动，它适用于以下情况。我看到的唯一区别是你有一个`<item name="android:height">3dp</item>`，而我根本没有。

```
<style name="TestSpinnerStyle" parent="android:style/Widget.ListView.DropDown">
    <item name="android:divider">#ff0000</item>
    <item name="android:dividerHeight">5dp</item>
</style>

<style name="SampleTheme" parent="@android:style/Theme.Holo.Light">
    <item name="android:dropDownListViewStyle">@style/TestSpinnerStyle</item>
</style> 
```

在我的活动中，我有：

```
 Spinner spinner = (Spinner) findViewById(R.id.spinner);
    List<String> list = new ArrayList<String>();
    list.add("list 1");
    list.add("list 2");
    list.add("list 3");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
    spinner.setAdapter(dataAdapter); 
```

然后对于主要布局，我有以下 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Hello World, StylingActivity"
            />
    <Spinner android:id="@+id/spinner"
             android:layout_width="250dp"
             android:layout_height="40dp"
             />
</LinearLayout> 
```

这是屏幕截图

![示例活动截图](../Images/8009d07f2f35f00c21762e15aa930c38.png)

如果您无法从那里开始工作，我可以为您将整个内容推送到 github 存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:58:39.167

您可以在您使用的下拉布局中添加一条水平线，这将有效地创建一个分隔线。

**编辑**

一些进一步的搜索发现了这一点：

[所以回答](https://stackoverflow.com/a/10177016/1105376)

这基本上说明了您在上面尝试做的事情应该可以工作......尽管它提到在您的*活动*主题中设置该样式并且您没有提到这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-11T14:17:52.347

您可以在 layout.xml 中执行此操作

```
 <Spinner
                android:id="@+id/sp_to_create"
                android:layout_width="match_parent"
                android:layout_height="32dp"
                android:layout_marginBottom="10dp"
                style="@style/spinner_style"
                android:prompt="@string/to_type_prompt" /> 
```

**XML 样式添加它**

```
 <style name="spinner_style" parent="Widget.AppCompat.ListView.DropDown">
    <item name="android:divider">#d1d1d1</item>
    <item name="android:dividerHeight">0.5dp</item>
</style> 
```

**添加到您的活动主题**

```
 <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
            <item name="android:dropDownListViewStyle">@style/spinner_style</item>
</style> 
```

**JAVA文件**

```
your_spinnerList.setAdapter(new ArrayAdapter<>(getActivity(), android.R.layout.simple_dropdown_item_1line, timeOff_type_list)); 
```

让我知道它是否对您有用！祝你今天过得愉快！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T08:14:53.307

接受答案中的样式方法效果很好，直到您需要两个具有不同分隔线颜色的微调器。

这是我发现的替代方法：

a) 将微调器上的 popupBackgroundColor 属性设置为您想要的分隔线颜色。这将为整个列表项的背景着色（包括我们认为作为分隔符的空间）。

b) 将微调器适配器 dropDownViewResource 设置为 CheckedTextView，并将其背景属性设置为其他颜色（或者，如果您希望所选项目具有不同的颜色，则为选择器）。这将覆盖我们在步骤 a 中为除分隔线之外的所有内容设置的颜色。有效地给了我们想要的结果。

所以你将拥有：

drawable/spinner_dropdown_background_selector：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/your_unchecked_color" android:state_checked="false"/>
    <item android:drawable="@color/your_checked_color" android:state_checked="true"/>
    <item android:drawable="@color/your_unchecked_color"/>

</selector> 
```

布局/drop_down_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@android:id/text1"
             android:background="@drawable/spinner_dropdown_background_selector"
             android:textColor="@android:color/white"
             android:singleLine="true"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:ellipsize="marquee" /> 
```

您的微调器定义：

```
<Spinner
        ...
        android:popupBackground="@color/your_divider_color"            
        ...
        /> 
```

最后是您的数组适配器定义：

```
ArrayAdapter<String> dataAdapter = new ...
dataAdapter.setDropDownViewResource(android.R.layout.drop_down_item);
spinner.setAdapter(dataAdapter); 
```

[请注意，如果微调器处于对话框模式](http://developer.android.com/reference/android/widget/Spinner.html#attr_android:spinnerMode)，则设置 popupBackgroundColor 无效。

# python - 为什么从子进程管道读取时我的接收后挂钩挂起？

> ID：10916659
> 
> 赞同：1
> 
> 时间：2012-06-06T14:48:30.683
> 
> 标签：python, git, subprocess, pipe

我在 Git 存储库上运行 Gitolite，我在那里有 post-receive 钩子。这个钩子的脚本是用 Python 编写的，之后失败了

```
proc = subprocess.Popen('git log', shell = True, stdout=subprocess.PIPE)
out = proc.stdout.read() 
```

在这些行之后它不会执行。如果我手动运行此脚本，它会完美运行。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:04:26.310

从[子流程文档](http://docs.python.org/library/subprocess.html)：

> 警告
> 
> 使用communicate() 而不是.stdin.write、.stdout.read 或.stderr.read 以避免由于任何其他OS 管道缓冲区填满并阻塞子进程而导致的死锁。

如果可能的话，我也会避免使用`shell=True`（IMO 只有在你想使用 shell 内置函数并且它是特定于平台/shell 时才有用），并将 Popen 命令作为列表传递，比如`['git', 'log']`

尝试类似：

```
>>> proc = subprocess.Popen(['git', 'log'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
>>> proc.communicate()
('', 'fatal: Not a git repository (or any of the parent directories): .git\n') 
```

`communicate()[0]`是标准输出，`communicate()[1]`是标准错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:05:26.923

您的管道可能不会返回。如果是这种情况，您可以：

1.  运行带有`--no-pager`标志的 git 以防止您的 PAGER 或 GIT_PAGER 挂起该进程。

2.  使用标志限制您的日志输出，`-n`以将管道输出保持在合理的大小。[子流程库](http://docs.python.org/library/subprocess.html)明确表示：

    > [T] 如果子进程生成足够的输出到管道以填满操作系统管道缓冲区，则子进程可能会阻塞。

# f# - 使用 Array.map 在 F# 中省略数组的第一个元素

> ID：10916661
> 
> 赞同：5
> 
> 时间：2012-06-06T14:48:40.383
> 
> 标签：f#

我刚开始玩 F#，所以这个问题可能很基础......

我想逐行读取文本文件，然后忽略第一行并使用给定函数处理其他行。所以我正在考虑使用类似的东西：

```
File.ReadAllLines(path)
|> Array.(ignore first element)
|> Array.map processLine 
```

什么是完成它的优雅而有效的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T14:50:31.220

没有简单的函数可以跳过数组中的第一行，因为该操作效率不高（它必须复制整个数组），但是如果您使用惰性序列代替，您可以轻松地做到这一点：

```
File.ReadAllLines(path) 
|> Seq.skip 1
|> Seq.map processLine 
```

如果您需要数组中的结果（而不是`seq<'T>`，它是 的 F# 别名`IEnumerable<'T>`），那么您可以添加`Seq.toArray`到末尾。但是，如果您以后只想遍历这些行，那么您可能只使用序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:34:09.377

这是对托马斯回答的补充，我普遍同意。需要注意的一件事是，如果您的数组或序列不包含行会发生什么。（或者比您想跳过的行数更少。）在这种情况下， Seq.skip 将引发异常。我能想到的最简洁的方法是：

```
System.IO.File.ReadAllLines fileName
|> Seq.mapi (fun i elem -> i, elem)
|> Seq.choose (fun (i, elem) -> if i > 0 then Some(elem) else None) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-06T20:18:15.597

您只需通过 . 跳过 F# 数组中的第一个元素`myArray.[1..]`。一定会喜欢这种语言的优雅。

# php - 来自 PHP 的 Google 身份验证

> ID：10916663
> 
> 赞同：3
> 
> 时间：2012-06-06T14:48:43.903
> 
> 标签：php, youtube, refresh, token

我知道这里有很多类似的问题，但我尝试了这些解决方案几个小时，但它们对我不起作用。我总是得到一个`{ "error" : "unauthorized_client" }"`. 我想以编程方式刷新我的访问令牌以使用 Youtube API。我已经获得了一个刷新令牌。

这就是我想出的：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_POSTFIELDS, array(
'client_secret' => '<mysecret>',
'grant_type' => 'refresh_token',
'refresh_token' => '<my_refresh_token>',
'client_id' => '<my_client_id>.apps.googleusercontent.com',
'redirect_url'=>'<my_redirect_uri>'
));
curl_setopt($ch, CURLOPT_URL, 'https://accounts.google.com/o/oauth2/token');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
echo var_dump(curl_exec($ch)); 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:48:21.327

您指定的 URL 和查询参数对我来说很合适。如果您提供的用于生成新令牌的 client_id 与提供的用于获取 refresh_token 的 client_id 不同，似乎会出现此错误。

可能发生的一件事是，如果您使用 Google 的 OAuth 操场生成了 access_token 和 refresh_token，然后尝试使用该 refresh_token 生成新令牌 - 这将不起作用。Google OAuth 游乐场使用不同的 client_id 来发出该请求，这肯定会导致您记录的“unauthorized_client”错误。

Temboo 为 Google 提供了一个非常简洁易用的 OAuth 库。你可以在这里查看：[https](https://www.temboo.com/library/Library/Google/OAuth/) ://www.temboo.com/library/Library/Google/OAuth/ 。

（全面披露：我在 Temboo 工作）

# javascript - rails3: JQuery 未定义

> ID：10916672
> 
> 赞同：0
> 
> 时间：2012-06-06T14:49:12.603
> 
> 标签：javascript, jquery, ruby-on-rails

JQuery 和 Rails 的新手，任何帮助将不胜感激。

我正在关注关于[动态选择菜单](http://railscasts.com/episodes/88-dynamic-select-menus-revised?view=comments)的 RailsCast 教程，但是当我尝试加载表单时，动态选择不起作用，并且我在萤火虫中收到错误，指出未加载 JQuery。我检查了 assets/application.js 并且该功能似乎已正确加载。在生成任何其他内容之前，我的布局文件中也包含了 javascript_include_tag。我尝试预编译我的资产，但这似乎没有任何作用。

奇怪的是我为另一个控制器定义了另一个 JQuery 函数，并且该函数运行良好。我完全被这里发生的事情弄糊涂了。

**更新 - 添加代码片段。**

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require_tree . 
```

应用程序.html.erb

```
 <head>
      <title> <%= default_title(yield(:title)) %> </title>
      <%= stylesheet_link_tag "application", :media => "all" %>
      <%= javascript_include_tag "application" %>
      <%= csrf_meta_tags %>
    </head>
    ...
    <div class="container">
      ...
      <%= yield %>  
      <%= debug(params) if Rails.env.development? %>
    </div> 
```

hostprofiles.js.coffee

```
JQuery ->
    cities = $('#hostprofile_city_id').html()
    console.log(cities)
    $('#hostprofile_country_id').change ->
        country = $('#hostprofile_country_id :selected').text()
        escaped_country = country.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')   
        options = $(cities).filter("optgroup[lable=#{escaped_country}]").html()
        console.log(options)
        if options
            $('#hostprofile_city_id').html(options)
            $('#hostprofile_city_id').parent().show()
        else
            $('#hostprofile_city_id').empty()
            $('#hostprofile_city_id').parent().hide() 
```

生成的 jquery 函数是 application.js

```
(function() {   
      JQuery(function() {
        var cities;
        cities = $('#hostprofile_city_id').html();
        console.log(cities);
        return $('#hostprofile_country_id').change(function() {
          var country, escaped_country, options;
          country = $('#hostprofile_country_id :selected').text();
          escaped_country = country.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1');
          options = $(cities).filter("optgroup[lable=" + escaped_country + "]").html();
          console.log(options);
          if (options) {
            $('#hostprofile_city_id').html(options);
            return $('#hostprofile_city_id').parent().show();
          } else {
            $('#hostprofile_city_id').empty();
            return $('#hostprofile_city_id').parent().hide();
          }
        });
      });

    }).call(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T18:49:38.847

经过多次搜索。（值得 24 小时！）这是我发现的。

鉴于此 Rails 设置。

```
$ gem list --local | egrep "jquery|rails"
coffee-rails (3.2.2)
jquery-rails (3.0.1)
rails (3.2.13)
sass-rails (3.2.6) 
```

这是 application.js 清单片段。这是 Rails 3.2.13 默认为您提供的。没问题。

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

rails 生成控制器会话索引新创建编辑销毁

表格看起来像这样。

您需要在表单周围添加 div id

（不要忘记 :remote => true）

```
<div id="login_form">
  <% if flash[:alert] %>
    <p id="notice" ><%= flash[:alert] %></p>
  <% end %>
  <%= form_tag  :remote => true  do %>
    <fieldset>
      <legend>Please Log In</legend>
      <div>
        <label for="name" >Name:</label>
        <%= text_field_tag :name, params[:name] %>
      </div>
      <div>
        <label for="password" >Password:</label>
        <%= password_field_tag :password, params[:password] %>
      </div>
      <div id="login_submit_button">
        <%= submit_tag "Login" %>
      </div>
    </fieldset>
   <% end %>
</div> 
```

我用以下内容创建了一个 javascript 文件。

**jQuery.noConflict();** 是关键！

```
//./app/assets/javascripts/my_session.js

// These requires tell manifest to load these first from application.js
//= require jquery
//= require jquery_ujs

// $.fn  is  alias for   Jquery.prototype
//
// You can define plugins like this.
jQuery.prototype.hello = function() {
    alert("hello");
}

// Or, you may wish to use the $.fn
jQuery.noConflict();            // http://api.jquery.com/jQuery.noConflict/
(function($) {
    $.fn.world = function() {
        alert("world");
    };                        // watch your semicolons!!

    $.fn.clearForm = function() {
        return this.each(function() {
            var type = this.type, tag = this.tagName.toLowerCase();
            if (tag == 'form')
                return $(':input', this).clearForm();
            if (type == 'text' || type == 'password' || tag == 'textarea')
                this.value = '';
            else if (type == 'checkbox' || type == 'radio')
                this.checked = false;
            else if (tag == 'select')
                this.selectedIndex = -1;
        });
    };
})(jQuery);

jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
    if ($("#login_form").length) {  // If exists, then reset
        //$("#login_form form")[0].reset();
        $().hello();
        $().world();
        $("#login_form form").clearForm();
    }
});
// Code that uses other library's $ can follow here.

// OR, you can just use JQuery in place of $     (The plugins hello and world still need the above magic though!)

//jQuery(document).ready(function() {
//    if (jQuery("#login_form").length) {  // If exists, then reset
//        jQuery("#login_form form")[0].reset();
//        jQuery().hello();
//        jQuery().world();
//    }
//}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:02:34.827

检查页面源中是否加载了 jQuery（如果您使用 FF 或 Chrome，请按 F12）。还要检查在收到错误的代码之前是否存在 JavaScript 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:13:52.397

进入 Gemfile 检查这个

```
gem 'jquery-rails' 
```

并进入 app/assets/javascript/application.js 检查您是否有此文本

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

该行 //= 要求 jquery 将 jQuery 加载到 Rails 3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T06:24:33.473

好的，我发现了问题。就我而言，这是一个非常愚蠢的错误，我在函数中将 jQuery 中的“j”大写。为这么愚蠢的错误道歉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T01:38:21.747

对于可能偶然发现此问题的任何其他人，我遇到了同样的问题，但在我的情况下，这是由于 - 出于某种令人惊讶的原因 - 需要 jquery 两次。

```
...
//= require jquery
//= require jquery
... 
```

取出额外的一个为我做了。

# iphone - 如何使用 MPMoviePlayerViewController 播放 youtube 视频

> ID：10916673
> 
> 赞同：1
> 
> 时间：2012-06-06T14:49:15.463
> 
> 标签：iphone, objective-c, youtube, mpmovieplayercontroller

除了 UIWebView 之外，还有其他播放 youtube 视频的方法吗？我想在 MPMOviePlayer 中播放 youtube 视频。我已经对其进行了研究，但我没有找到结果。我得到了这个 url

[使用 MPMoviePlayerController 而不是 UIWebView 播放 YouTube 视频](https://stackoverflow.com/questions/1779511/play-youtube-videos-with-mpmovieplayercontroller-instead-of-uiwebview)

请帮我做这个。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T09:17:04.590

我从 github 找到了一个解决方案： [https ://github.com/hellozimi/HCYoutubeParser](https://github.com/hellozimi/HCYoutubeParser)

很不错，就是有时候播放不了几个链接，好像不能获取真实的URL视频，

```
NSDictionary *qualities = [HCYoutubeParser h264videosWithYoutubeURL:url];
_urlToLoad = [NSURL URLWithString:[qualities objectForKey:@"medium"]]; 
```

***只为质量***返回 nil 。任何人都有解决它的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:02:40.557

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T05:39:40.140

嗨，伙计们解决这个问题

[https://github.com/larcus94/LBYouTubeView](https://github.com/larcus94/LBYouTubeView)

# php - 显示不带科学计数法的浮点值

> ID：10916675
> 
> 赞同：20
> 
> 时间：2012-06-06T14:49:28.693
> 
> 标签：php, floating-point

当我在 PHP 中进行以下乘法运算时：

```
$ret = 1.0 * 0.000000001; 
```

我得到结果：1.0E-9

我想将此结果转换为正常的十进制表示法，我该怎么做？

`sprintf('%f',$ret)`不起作用，它返回`0.000000`。溢出？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-06T15:36:09.903

> `sprintf('%f',$ret)`不起作用，它返回`0.000000`。溢出？

[`sprintf`](http://php.net/sprintf)有效，但是您在这里错过了一些要点。

`0.000000`不是溢出。只是修饰符默认使用 6 位数字`sprintf`。`%f`另外请注意`%f`区域设置，`%F`可能更适合。

您可能想要使用更多数字，例如 4 000 000（四百万）：

```
$ php -r "printf('%.4000000F', 1*0.000000001);"

Notice: printf(): Requested precision of 4000000 digits was truncated to PHP maximum of 53 digits in Command line code on line 1

Call Stack:
    0.0001     319080   1\. {main}() Command line code:0
    0.0001     319200   2\. printf() Command line code:1

0.00000000100000000000000006228159145777985641889706869 
```

如本例所示，不仅有一个公共值（6 位），还有一个最大值（可能取决于 PHP 执行的计算机系统），在我的例子中，这里截断为 53 位，如警告所示。

由于您的问题，我想说您要显示：

```
0.000000001 
```

这是九位数字，所以你需要这样写：

```
sprintf('%.9F',$ret) 
```

但是，您可能想要这样做：

```
rtrim(sprintf('%.20F', $ret), '0'); 
```

这将在之后从右侧删除零：

```
0.000000001 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T14:52:11.370

您需要添加*精度说明符*（浮点数应显示多少个十进制数字）。像这样的东西：

```
echo sprintf('%.10f',$ret);  // 0.0000000010 
```

如果您不知道应该指定什么数字，只需给它一个大数字并将其与`rtrim()`.

```
echo rtrim(sprintf('%.20f', $ret), '0');  // 0.000000001 
```

上面的代码将删除`0`字符串末尾的任何 's。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T14:57:05.683

I suggest the use [BCMath](http://www.php.net/manual/en/book.bc.php) for more accuracy when you are calculating with decimal numbers. That makes sure that you actually get the results you want.

To print what you want, you should specify the precision and use `%.9f`, since it defaults to displaying 6 decimal numbers. That makes it something like this (just like bsdnoobz already said):

```
sprintf('%.9f',$ret); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T16:11:01.813

为了与系统的设置和限制保持一致，您可以使用`serialize_precision`以获得最准确的结果。

```
echo rtrim(sprintf('%.'.ini_get('serialize_precision').'f', $ret)); 
```

我不建议使用非语言环境感知`%F`，因为您的问题仅对显示目的有意义。尊重语言环境可以带来更好的用户体验。

# iphone - 用于导入数据库和显示每日提示的选项

> ID：10916681
> 
> 赞同：0
> 
> 时间：2012-06-06T14:49:55.973
> 
> 标签：iphone, core-data, ios5, xcode4.3

我是 iOS 编程新手，正在寻找有关我正在创建的 iPhone 应用程序的建议。

我有一个包含大约 100 个每日提示（将继续增长）的 Excel 数据库，我想将这些提示导入应用程序，并且每天显示一个提示。用户将有权访问当前的每日提示，以及数据库中前几天的任何先前提示。

我想把它作为一个封闭的应用程序，所以如果用户觉得他们想通过更改当前日期来跳过查看新提示 - 我不担心可能会这样做的少数人。

从我到目前为止的搜索来看，CoreData 似乎是要走的路，但我一直在寻找建议。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:17:44.620

我会尽力给你一些建议来实现你想要的。

首先，你是什么意思

> 我想把它作为一个封闭的应用程序，所以如果用户觉得他们想通过更改当前日期来跳过查看新提示 - 我不担心可能会这样做的少数人。

我不确定它的含义。

这么说，根据我的经验（其他人可以给你其他建议）我建议你以下。

关于您的模型，您需要创建一个实体，例如`Tip`，它可能具有以下属性：

*   guid：用作标识符的标识符，类型可以是`NSString`

*   创建日期：小费的创建日期，类型为`NSDate`

*   text to present：要呈现给用户的文本，类型为`NSString`

此外还可以设置标题等。

该日期有两个目标。

首先，它允许您根据当前日期过滤提示。要过滤，您需要创建一个`NSFetchRequest`并设置一个`NSPredicate`. 例如：

```
[NSPredicate perdicateWithFormat:@"creationDate <= %@", currentDate]; 
```

此外，它还允许与您的服务同步以下载数据。根据您在核心数据 sql lite 文件中找到的最大日期，您可以要求服务（如果您使用服务）为您提供大于该日期的提示。

guid 只允许为该标识符提供一个提示（您可以只使用日期，但我认为拥有一个 guid 更容易，比如`12345`）。如果您决定每次都下载整个数据并且不想插入相同的提示，这可能会很有用。此外，当您有新提示时，您不想重新创建数据库，但您只会添加新提示。因此，您需要一个标识符来验证提示是否已经存在。

最后，关于您的服务（如果您想设置一项），您可以下载 JSON 格式的数据。我认为这只是设置。

如果您有兴趣，这里有一些链接可以让您的生活更轻松：

*   在下载数据的数据量很大的情况下，看看[importing-and-displaying-large-data-sets-in-core-data 。](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)在 iOS 5 中，新的 API 已经存在，但您在帖子中找到的概念仍然有效。
*   [Core Data 的简单介绍](https://stackoverflow.com/questions/10619613/mapping-business-objects-with-core-data-in-ios/10681386#10681386)（我在上一篇文章中回答的一个问题）
*   [core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

如果你想知道别的，请告诉我。

希望能帮助到你。

# facebook - 以下操作类型无效：使用 GraphAPI facebook 读取错误

> ID：10916682
> 
> 赞同：1
> 
> 时间：2012-06-06T14:49:56.613
> 
> 标签：facebook, facebook-graph-api

我对 facebook GraphAPI 有一个奇怪的问题，我创建了一个名为“read”的新操作，然后这被 Facebook 成功批准了。现在我尝试将我的新操作放入一些社交小部件中，但出现错误“以下操作类型无效：已读”.. 发生了什么？

有问题的图片：

![错误](../Images/a8df5e92d22db47402437a17be2ae611.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:03:20.450

> 到底是怎么回事？

正在进行中：[平台更新：Operation Developer Love from May 31th, 2012 um 01:00](https://developers.facebook.com/blog/post/2012/05/30/platform-updates--operation-developer-love/)

> 附加发布指南
> 
> 对于观看视频或阅读文章的故事，您**必须**使用*内置的*观看和阅读操作。我们将不再批准这些故事的自定义操作。
> 
> 即使我们已批准您阅读文章或观看视频的自定义操作，您也**必须**迁移到使用内置操作，重新提交您的应用并获得批准。

# ios - 动画视图 - 旋转、收缩和移出屏幕

> ID：10916684
> 
> 赞同：0
> 
> 时间：2012-06-06T14:50:06.750
> 
> 标签：ios, xcode, uianimation

我有一个自定义 UIView 类，我想同时以随机角度旋转、收缩和移出屏幕。

我有这段代码可以旋转层几次

```
- (void)spinLayer:(CALayer *)inLayer duration:(CFTimeInterval)inDuration currentAngle:(CGFloat)curAngle
        direction:(int)direction
{
    CABasicAnimation* rotationAnimation;

    // Rotate about the z axis
    rotationAnimation = 
    [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];

    // Rotate 360 degress, in direction specified
    rotationAnimation.toValue = [NSNumber numberWithFloat:(M_PI * 4 * direction) + curAngle];

    // Perform the rotation over this many seconds
    rotationAnimation.duration = inDuration;

    // Set the pacing of the animation
    rotationAnimation.timingFunction = 
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];

    // Add animation to the layer and make it so
    [inLayer addAnimation:rotationAnimation forKey:@"rotationAnimation"];
} 
```

我这样称呼：

```
CGFloat angle = atan2(sender.transform.b, sender.transform.a);  // Current angle
[self spinLayer:sender.layer duration:0.5 currentAngle:angle direction:1]; //direction can be -1 
```

但是我现在如何缩小视图并同时移动它呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:02:57.313

将视图旋转 360 度不会产生动画，因为开始和结束状态是相同的。您应该尝试使用多个值作为旋转值。

# perl - perl 最大标量值

> ID：10916686
> 
> 赞同：2
> 
> 时间：2012-06-06T14:50:10.567
> 
> 标签：perl

我有一些正在运行的代码，但会发出很多警告。

```
 foreach my $item ( sort {$item_rank{$a} <=> $item_rank{$b}} @items{
        ...
    } 
```

我的问题是，并非每个项目都有排名，因此我的输出充满了警告。我想让没有排名的项目最后。我正在考虑将代码更改为如下：

```
 foreach my $item ( sort {
                              $item_rank{$a} = 99999 if(!exist $item_rank{$a});
                              $item_rank{$b} = 99999 if(!exist $item_rank{$b});
                              $item_rank{$a} <=> $item_rank{$b}} @items{
        ...
    } 
```

我的问题是，是否有一个特定的值可以设置为而不是 99999，尽管在当前设置中我永远不会达到 99999，但我希望我的代码更健壮。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:01:56.253

您可以通过以下两种方式之一进行操作：

*   如果您定义了最大上限，则默认为它（为了简化代码，我假设 0 不是有效等级）

    ```
    $max_ceiling = 99999;
    sort { ($item_rank{$a} || $max_ceiling)
       <=> ($item_rank{$b} || $max_ceiling) } @items 
    ```

    或者，为了避免分配给哈希：

    ```
    # Ideally, %item_rank should be passed as a parameter but meh.
    sub rank4comp { exist $item_rank{$_[0]} ? $item_rank{$_[0]} : 999999; }
    sort { rank4comp($a) <=> rank4comp($b) } @items; 
    ```

*   **更好的是，在您的表达式中显式检查 undef**（请记住，[排序的代码块](http://perldoc.perl.org/functions/sort.html)可以是任何表达式，它返回负数、0 或正数 ala “ `<=>`”：

    ```
    sort { defined $item_rank{$a}
         ? defined $item_rank{$b}
         ? $item_rank{$a} <=> $item_rank{$b} : 1 : -1 } @items; 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T16:37:39.423

由于您对未排名记录的标准有明确的定义，因此您不妨将两组分开：

```
my @unranked = grep ! defined($item_rank{$_}), keys %item_rank;
my @ranked   = grep   defined($item_rank{$_}), keys %item_rank; 
```

然后你可以像往常一样排序，甚至可以将两个数组包含在同一个 for 循环中：

```
for my $item (sort ( { $item_rank{$a} <=> $item_rank{$b} } @ranked), @unranked) {
    print "$item => ", $item_rank{$item} // "N/A", "\n";
} 
```

这将自动将所有未排名的项目放在最后。

请注意，您需要在参数周围加上括号，`sort`以避免元素`@unranked`成为`sort`. 我使用`defined-or`运算符`//`检查打印语句中的未定义值。

您甚至可以将排序移至`grep`语句：

```
my @unranked = grep ! defined($item_rank{$_}), keys %item_rank;
my @ranked   = sort { $item_rank{$a} <=> $item_rank{$b} }
                   grep defined($item_rank{$_}), keys %item_rank;

for my $item (@ranked, @unranked) { 
... 
```

# php - Desire2Learn Valence API 课程创建路径信息不正确

> ID：10916687
> 
> 赞同：2
> 
> 时间：2012-06-06T14:50:11.077
> 
> 标签：php, creation, desire2learn

我使用 php valence api 对课程创建进行了一些测试，课程创建时一切正常，但路径信息不正确，无论出于何种原因，它只是创建了一个文件夹，强制执行名称作为课程代码。我错过了什么吗？

```
$rand_course_id =  rand( 99999, 999999);
echo $rand_course_id;
$json = '{
    "Name": "Valence '.$rand_course_id.'",
    "Code": "VALENCE_'.$rand_course_id.'",
    "Path": "/content/enforced ",
    "CourseTemplateId": "6722",
    "SemesterId": null,
    "StartDate": null,
    "EndDate": null,
    "LocaleId": null,
    "ForceLocale": "false",
    "ShowAddressBook": "true"
}';`
mphs_json_request('courses',$json); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:47:31.360

有一个配置变量将课程内容的路径强制为特定形式。变量是 d2l.Tools.CMS.CoursePathEnforced。也许这个值在你的系统中？

# oracle - 当城堡活动记录关闭连接时

> ID：10916688
> 
> 赞同：0
> 
> 时间：2012-06-06T14:50:11.873
> 
> 标签：oracle, nhibernate, activerecord, castle-activerecord

我在开始使用城堡 activerecord 的同时开始使用 nhibernate，所以有时我会遇到一些混淆的问题

我想知道当以下代码运行时activerecord（或nhibernate）何时关闭连接：

```
Dim entity = TABLE_Y.TryFind(id)
if not entity is nothing then
    'long running process here
    response.redirect("...")
end if 
```

我问这个是因为这个长时间运行的过程需要一个多小时才能完成，每当代码重定向到另一个页面时，我都会收到 ORA-03135（连接丢失联系）告诉我连接丢失，这个另一个页面有以下活动记录查询：

```
Dim entity = TABLE_X.FindAll(Order.Desc(...), _
    Expression.Eq(...) And _
    Expression.Eq(...)).FirstOrDefault 
```

然后返回 ora-03135

所以我在想如果在长时间运行的过程之前没有关闭的来自activerecord的任何连接

这个长时间运行的进程实际上是由应用程序启动的另一个进程，它在重定向到另一个页面之前等待它结束，所以即使另一个进程使用活动记录，它也不会使用相同的连接字符串或其他任何东西

这很有趣，因为我正在一个完全不同的表上开始一个新查询，activerecord 是否试图重用一个已超时的现有连接？我尝试添加“Pooling=False”和“Validate Connection=true”但没有成功

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:59:56.420

当会话被释放时，连接将被关闭，这取决于您的应用程序。如果您使用的是 ActiveRecord 附带的模块，那么它将在 Application.EndRequest 事件触发时发生（即在您的请求结束时），如果您不是，那么您需要查看 SessionScope 或 TransactionScope 的位置创建和处置（处置是关闭连接的地方）。

如果您想启动一个长时间运行的任务并在它完成之前重定向，您需要在另一个线程中启动它（例如，使用 ThreadPool 或 Tasks）。您还需要配置 ActiveRecord 以使用 HybridWebThreadScopeInfo 以便在 HttpContext 不可用时将会话存储在本地线程中（这将在您的后台线程中发生）。

```
<activerecord threadinfotype="Castle.ActiveRecord.Framework.Scopes.HybridWebThreadScopeInfo, Castle.ActiveRecord"> 
```

然后在您的任务中，将其包装在 TransactionScope 或 SessionScope 中（我更喜欢前者）：

```
using(var trans = new TransactionScope()) {
   // do your stuff here...
   trans.VoteCommit();
} 
```

# iphone - 如何知道 iPad 是否用于开发

> ID：10916693
> 
> 赞同：0
> 
> 时间：2012-06-06T14:50:22.800
> 
> 标签：iphone, ios, ipad

我想知道是否有办法确定该设备是否用于开发。我只想在我的应用程序上启用某些功能，而不是在它公开发布时。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:07:36.007

我认为您想要的不是知道该设备是否可用于开发（可用于开发的设备也可以从应用商店下载应用程序，例如最终发布版本）。我认为您想要做的是在运行时知道现在正在运行的构建是最终发布版本（来自应用商店）还是调试版本。看：

[检测 iPhone 是否在运行时运行 Debug/Distribution 构建](https://stackoverflow.com/questions/2567838/detect-if-the-iphone-is-running-a-debug-distribution-build-at-runtime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:20:58.213

我不会走你想走的路，因为任何人都可以让他们的 ipad 成为开发者。我用于正常使用的个人 ipad 也用于开发，这意味着如果我在进行编程，您的应用程序的行为会有所不同。你可能不想要那个。

如果序列号与您的匹配，请考虑打开功能。这是一个[UIDevice 扩展](https://github.com/erica/uidevice-extension)库，您可以使用它来获取您的序列号。代码很简单：

```
[[UIDevice currentDevice] serialNumber] 
```

这将返回一个字符串，可以与您的进行比较..

# jquery - 以编程方式将 Knockout 绑定应用于文本块中的特定标签

> ID：10916698
> 
> 赞同：2
> 
> 时间：2012-06-06T14:50:40.207
> 
> 标签：jquery, data-binding, knockout.js

我有一个 html 标记块，我想使用[Knockout JS](http://knockoutjs.com/)将其数据绑定到 div 。`html`这对于淘汰赛绑定很简单。

我想做的是有条件地绑定该html标记中的子元素，基于他们的类。这些元素可以出现在 html 标记中的任何位置，因为它们是内联元素（如`span`、`a`标签等）。

这样做的目的是将点击事件数据绑定到此文本块中的特定单词或短语，以便我可以调用一个函数（在这种情况下，一个具有目标单词或短语定义的模态）。

有谁知道如何做到这一点？据我所知，我有两个主要途径可以探索：

1.  使用 jQuery 按类抓取元素，并在事后以某种方式将数据绑定到 then。我不知道这是否会由于各种原因而起作用 - 没有准备好 DOM，无法在该方法中进行数据绑定等。

2.  使用 knockout 的[模板绑定](http://knockoutjs.com/documentation/template-binding.html)，并添加一个`afterRender`模板回调来解析元素的文本块并相应地对它们进行数据绑定。

3.  以上两者的结合。（是的，我知道，这是三个途径。）

有没有人做过这样的事情？如果可能的话，我想得到你的建议和反馈。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:43:05.573

除非您确定要绑定的 html 是安全的，否则我不推荐这种方法。html 绑定看起来像这样。

```
ko.bindingHandlers['html'] = {
    'init': function() {
        // Prevent binding on the dynamically-injected HTML 
        // (as developers are unlikely to expect that, and it 
        // has security implications)
        return { 'controlsDescendantBindings': true };
    },
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        ko.utils.setHtml(element, value);
    }
}; 
```

看着这个你可以写一个 html2 绑定

```
ko.bindingHandlers['html2'] = {
    'init': function() {
        return { 'controlsDescendantBindings': false };
    },
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        ko.utils.setHtml(element, value);
    }
}; 
```

[http://jsfiddle.net/madcapnmckay/LDtuF/1/](http://jsfiddle.net/madcapnmckay/LDtuF/1/)

请注意这一点，您要确保 html 不能用于不安全的目的。

希望这可以帮助。

# map - 如何检查是否为开放街道地图服务器安装了所需的一切？

> ID：10916700
> 
> 赞同：0
> 
> 时间：2012-06-06T14:50:41.370
> 
> 标签：map, openstreetmap, boundary, mapnik

我正在按照以下步骤配置开放街道地图：http: [//switch2osm.org/serving-tiles/building-a-tile-server-from-packages/](http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/)

我使用的是相同的软件包，但对于 Debian，默认设置为我提供了 slippymap 站点示例。地图从 Mapnik 选项加载，而不是从本地选项加载。一切似乎都配置好了，除了我没有添加边界和处理海岸线数据。我发现的有关这方面的信息对我来说似乎模棱两可。我也无法在 mod_tile 文件夹中找到渲染图块。

任何想法如何检查 Mapnik 是否已正确安装和配置以及如何将边界和海岸线数据导入 Postgres？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:20:19.997

我为这个问题阅读了很多，但这并没有帮助。甚至 Debian 和 Ubuntu 在软件包管理方面也很相似，Ubuntu 的软件包在 Debian 上不起作用。在这种情况下，更好的方法是将 Ubuntu 与 OSM 的 Ubuntu 软件包一起使用，或者如果别无选择从 Debian 切换，则从源代码构建。希望这可以帮助某人。

# ruby-on-rails - 参数数量错误？

> ID：10916705
> 
> 赞同：9
> 
> 时间：2012-06-06T14:51:05.627
> 
> 标签：ruby-on-rails, erb

我在[这里](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec:user_index)关注 Michael Hartl 的教程并尝试创建用户索引。

我的代码：

```
 class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update]
  .
  .
  .
  def index
    @users = User.all
  end
  .
  .
  .
  end 
```

和

```
<%= provide(:title, 'All users') %>
<h1>All users</h1>

<ul class="users">
  <% @users.each do |user| %>
    <li>
      <%= gravatar_for user, size: 52 %>
      <%= link_to user.name, user %>
    </li>
  <% end %>
</ul> 
```

我已确保我的代码与教程中的代码完全匹配，但出现此错误：

```
wrong number of arguments (2 for 1) 
```

我究竟做错了什么？有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-06T15:12:56.050

根据教程， gravatar_for 方法定义为

```
def gravatar_for(user)
  gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
  gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}"
  image_tag(gravatar_url, alt: user.name, class: "gravatar")
end 
```

请注意，它只接受一个参数：用户。[在第 7 章](http://ruby.railstutorial.org/chapters/sign-up#code%3agravatar_option)后面的练习之后，教程描述了如何添加尺寸参数：

```
# Returns the Gravatar (http://gravatar.com/) for the given user.
def gravatar_for(user, options = { size: 50 })
  gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
  size = options[:size]
  gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}?s=#{size}"
  image_tag(gravatar_url, alt: user.name, class: "gravatar")
end 
```

从您的错误消息来看，您尚未更新使用可选大小参数的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:09:27.897

如果您按照教程并将选项哈希添加到函数中，那么您只会缺少选项周围的 {}。

这应该有效。 `<%= gravatar_for user, {size: 52} %>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T15:10:30.480

在这里检查：

```
<%= gravatar_for user, :size => 52 %> 
```

# iphone - 无法在动画块中的循环上设置动画

> ID：10916709
> 
> 赞同：2
> 
> 时间：2012-06-06T14:51:21.763
> 
> 标签：iphone, objective-c, ios, ipad

我有以下动画块：

```
[UIView animateWithDuration:3.0 animations:^{
            NSLog(@"INDEX %d",  index);

            [self.visibleViewControllers_ enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {                                 
                UIViewController *viewController = (UIViewController *)obj;
                if (viewController.view.tag != index){
                    if (viewController.view.tag < index){
                        NSLog(@"LOWER VIEW WITH TAG %d", viewController.view.tag);
                        [viewController.view setFrameY:self.contentOffset.y - viewController.view.frameHeight];
                    } else if (viewController.view.tag > index){
                        NSLog(@"UPPER VIEW WITH TAG %d", viewController.view.tag);
                        [viewController.view setFrameY:600];
                    } else {
                        [viewController.view setFrame:CGRectMake(0, self.contentOffset.y, selectedView.frameWidth, 460)];
                    }
                }
            }];
            //[selectedView setFrame:CGRectMake(0, self.contentOffset.y, selectedView.frameWidth, 460)];
        }completion:^(BOOL finished){
            [self.visibleViewControllers_ enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {                                 
                UIViewController *viewController = (UIViewController *)obj;
                NSLog(@"VIEW CONTROLLER Y IS %f AT INDEX %d", viewController.view.frameY, viewController.view.tag);
            }];

        }]; 
```

基本上它是一个视图控制器字典，它是我想要动画的视图，但奇怪的是它只执行一个动画。不是全部。为什么是这样？是否可以在动画块内进行枚举？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:53:26.687

枚举您的视图并在您的枚举中为它们设置动画

```
[self.visibleViewControllers_ enumerateKeysAndObjectsUsingBlock:^
    [UIView animation..... 
```

你做了一个动画并枚举了这个动画中的所有视图。把它转过来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:59:48.367

你有没有尝试过这样的事情：

```
- (void) startAnimationLoop {
    keyIndex = 0;
    keysToLoopThrough = [self.visibleViewControllers_ allKeys];
    [self animate];
}

- (void) animate {
    UIViewController *viewController = [self.visibleViewControllers_ objectForKey:[keysToLoopThrough objectAtIndex:keyIndex]];
    [UIView animateWithDuration:3.0 animations:^{
            if (viewController.view.tag != index){
                if (viewController.view.tag < index){
                    NSLog(@"LOWER VIEW WITH TAG %d", viewController.view.tag);
                    [viewController.view setFrameY:self.contentOffset.y - viewController.view.frameHeight];
                } else if (viewController.view.tag > index){
                    NSLog(@"UPPER VIEW WITH TAG %d", viewController.view.tag);
                    [viewController.view setFrameY:600];
                } else {
                    [viewController.view setFrame:CGRectMake(0, self.contentOffset.y, selectedView.frameWidth, 460)];
                }
             }
        }completion:^(BOOL finished){
            keyIndex++;
            if (keyIndex < [keysToLoopThrough count])
                [self animate];
            else NSLog("Finished");
        }];
} 
```

# php - clientsite.com/us/htt 的许多 404 错误

> ID：10916710
> 
> 赞同：0
> 
> 时间：2012-06-06T14:51:22.240
> 
> 标签：php, javascript, wordpress, apache, http-status-code-404

一个客户最近启动了一个站点，并看到成千上万的 404 请求：clientsite.com/us/htt ... 其中附加的“htt”不是有效的端点。这是我所知道的：

*   这是一个基于 WordPress 的网站
*   大多数错误来自某种形式的 MS IE 浏览器，但也有一些 Firefox 违规者
*   所有错误在clientsite.com 中都有一个引荐来源网址
*   在打开或关闭 JavaScript 的情况下，我们似乎无法通过查看 HTTP 代理中的流量和浏览网站来重新创建请求。
*   我已经为 'htt[^p]'、'slice' 和 'substr' 删除了所有文件，但找不到任何明显的错误

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:28:04.653

如果使用 apache，请查看您的 access_log 并查看引用者。开始寻找的最佳地点。

# grails - Intellij 使用“mvn grails:exec”而不是原来的 grails 命令

> ID：10916713
> 
> 赞同：0
> 
> 时间：2012-06-06T14:51:29.620
> 
> 标签：grails, maven, intellij-idea

我有一个 Grails 项目，`pom.xml`它被 IntelliJ 视为 Maven 项目

当我使用`CTRL + ALT + g`快捷方式执行 Grails 命令时，Intellij 会将其定向到 maven。

这适用于大多数 Grails 命令。

问题是某些命令无法执行，例如 -`run-app`

当项目被视为 maven 项目时，如何使用 Grails 控制台从 Intellij IDEA 运行 Grails 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:21:17.337

我创建了[错误](http://youtrack.jetbrains.com/issue/IDEA-87256)。这条评论帮助了我：

> 要在没有 maven 的情况下运行 Grails 应用程序，您可以在 pom.xml 中注释 grails maven 插件或禁用 maven 插件。

在 pom.xml 中评论插件后一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:17:40.437

默认情况下，IntelliJ 会为您的 Grails 服务器创建一个运行配置，因此不需要该`run-app`命令

对于所有其他命令，您可以使用`ctrl`++`alt``g`

# c - 有没有为 C 创建功能窗口窗体的好选择？

> ID：10916716
> 
> 赞同：0
> 
> 时间：2012-06-06T14:51:45.213
> 
> 标签：c, user-interface, ide

我一直在学习 C# 并使用 Microsoft Visual Studio，这使得创建具有各种控件（如进度条、下拉菜单、文件系统浏览器等）的 Windows 窗体变得非常容易和愉快。

可以用 C 做同样的事情吗，有没有推荐的程序？

（我学了一些 C 语言，想让图形界面比控制台更进一步，我想这很难吗？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:32:05.413

Windows API 是（现在仍然是）C API。记录在[msdn.microsoft.com](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632588%28v=vs.85%29.aspx)上。

在不使用任何外部框架的情况下，使用 C 语言创建具有简单表单的 Windows 应用程序的最简单方法是这个程序：

```
#include <Windows.h>
#include "Resource.h"

BOOL CALLBACK   DialogProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  switch(uMsg)
  {
  case WM_INITDIALOG:
    return TRUE;
  }
  return FALSE;
}

int APIENTRY WinMain(HINSTANCE hInstance,HINSTANCE hNull, LPTSTR cmdLine, int cmdShow)
{
  return DialogBoxParam(hInstance,MAKEINTRESOURCE(IDD_MAINDIALOG),NULL,DialogProc,0L);
} 
```

假设是，除了此`main.c`文件之外，您还使用 Visual Studio 资源编辑器创建一个资源脚本文件 (.rc)，其中包含您在其上布置控件的对话框资源。如果您使用的是 Visual Studio Express，则不包括资源编辑器，您将需要一个 3rd 方编辑器（它们可用）来布置对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:42:24.327

GTK+ 在[http://www.gtk.org/documentation.php](http://www.gtk.org/documentation.php)

# c# - 在 ASP 文字中编写 ASP.NET 代码

> ID：10916722
> 
> 赞同：0
> 
> 时间：2012-06-06T14:52:05.930
> 
> 标签：c#, asp.net, .net

我正在编写一个显示数据库查询的应用程序。有不同的表格，我希望能够使用单选按钮在它们之间进行选择。这目前工作正常，但现在我试图弄清楚如何根据将显示哪个表来格式化数据重复器（有不同数量的列，以不同的顺序等）我让标题成功格式化因为它只是基本的 HTML，但项目模板需要使用 asp 内联代码，我认为这是导致问题的原因。

代码隐藏的相关代码：

```
protected string showDataTableItemTemplate()
{
    string itemTemplateText = string.Empty;

    if (tableSelection == "parts")
    {
        itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.PartNumber\") %></td>";
        itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.Description\") %></td>";

    }
    else if (tableSelection == "package")
    {
        itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.PackageNumber\") %></td>";
        itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.Description\") %></td>";

    }
    else if (tableSelection == "product")
    {
        itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.ProductNumber\") %></td>";
        itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.Description\") %></td>";
    }
    return itemTemplateText;
} 
```

然后我只是在 aspx 中定义了这样的文字：

```
<asp:Literal runat="server" Text='<%#showDataTableItemTemplate() %>'></asp:Literal> 
```

还有另一种方法可以做到这一点吗？

编辑：我现在有以下内容：

```
 protected void DataRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        LiteralControl itemTemplateLiteral = new LiteralControl();
        itemTemplateLiteral = (LiteralControl)FindControl("itemTemplate");
        string itemTemplateText = string.Empty;

        if (tableSelection == "parts")
        {
            itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.PartNumber\") %></td>";
            itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.Description\") %></td>";

        }
        else if (tableSelection == "package")
        {
            itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.PackageNumber\") %></td>";
            itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.Description\") %></td>";

        }
        else if (tableSelection == "product")
        {
            itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.ProductNumber\") %></td>";
            itemTemplateText += "<td><%# DataBinder.Eval(Container,\"DataItem.Description\") %></td>";

        }
        itemTemplateLiteral.Text = itemTemplateText;
    } 
```

编译器一直告诉我有一个*对象引用未设置为对象的实例。*错误。另外，我尝试设置 Text 属性是否正确？（这不是我试图通过使用这种方法来避免的吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:54:29.467

您应该有一个用于`OnItemDataBound`模板控件事件的事件处理程序，并在其中用于`FindControl`定位`Literal`控件并使用`e.Item.DataItem`.

您当前的代码所做的只是将字符串分配给文字 - 这些不会作为页面标记的一部分进行评估，因为它们*不是*标记的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T17:56:36.643

绑定 OnItemDataBound 事件，在页面中找到控件并直接赋值。像这样：

```
 protected void datalist1_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {

            // fetch values from the data bound row
            int identityID = e.Item.DataItem["columnname"];

            // Find your page control and assign values
            HtmlAnchor aBlogSbj = (HtmlAnchor)e.Item.FindControl("aBlogSbj");
            if (aBlogSbj != null)
            {
                aBlogSbj.HRef=identityID;
            }

        }

    } 
```

# php - CakePHP 定义常量

> ID：10916727
> 
> 赞同：6
> 
> 时间：2012-06-06T14:52:11.280
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-2.2

我想在我的应用程序中包含 Google API。我想将 Outh2 Key、Secret Key 和 Developer Keys 定义为我可以在 App 控制器中调用和使用的常量。

哪个是定义相同的最佳位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T15:34:26.597

/app/Config/bootstrap.php

我不会将它们设置为常量，我会使用配置类来存储它们：

```
Configure::write(array(
    'outh2.key'=>'foo',
    'outh2.secret_key'=>'bar',
    'outh2.dev_key'=>'baz'
));

$key = Configure::read('outh2.key'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:38:53.137

您可以在供应商中宣布与 google API 一起使用的类，在那里您像往常一样定义针常量。在您的应用程序控制器中只包括这样的供应商：

```
<?php

App::import('Vendor', 'google', array('file' => 'google.php'));

class AppController extends Controller { 
... 
```

# algorithm - 在 C++ 中将 std::map 复制到 std::set

> ID：10916728
> 
> 赞同：6
> 
> 时间：2012-06-06T14:52:22.380
> 
> 标签：algorithm, stl, copy, stdmap, stdset

是否可以使用 STL 算法将 std::map 值深度复制到 std::set？

我不想明确插入新集合。

我**不想**明确地这样做：

```
std::map<int, double*> myMap; //filled with something
std::set<double*> mySet;

for (std::map<int, double*>::iterator iter = myMap.begin(); iter!=myMap.end(); ++iter)
{
     mySet.insert(iter->second);
} 
```

但要找到一种更简洁、更优雅的方式来做到这一点，并具有深刻的价值副本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T16:07:06.530

What about this?

```
std::transform(myMap.begin(), myMap.end(), std::inserter(mySet, mySet.begin()),
    [](const std::pair<int, double*>& key_value) {
        return key_value.second;
    }); 
```

This only copies the pointers, though. If you want a deep-copy, then you would need to do:

```
std::transform(myMap.begin(), myMap.end(), std::inserter(mySet, mySet.begin()),
    [](const std::pair<int, double*>& key_value) {
        return new double(*key_value.second);
    }); 
```

BTW, the code uses lambda functions (only available from C++11). If you cannot use C++11, you could use a [function object](http://en.wikipedia.org/wiki/Function_object#In_C_and_C.2B.2B), though.

# java - 如何使用 HSQL 的设置数据源进行 junit 测试

> ID：10916729
> 
> 赞同：1
> 
> 时间：2012-06-06T14:52:26.240
> 
> 标签：java, unit-testing, junit, hsqldb

我编写了一个以 a`javax.sql.DataSource`作为构造函数参数的存储库类，并对其进行了一些基本的 CRUD 操作。我现在想为它编写junit测试。我想使用 HSQL 作为我的数据库进行这些测试，但我不确定如何按照我想要的方式设置数据库。使用 Spring 应用程序，我在我的应用程序上下文中放置了类似的内容以进行测试：

```
<jdbc:embedded-database id="dataSource">
    <jdbc:script location="classpath:mySQLForDB.sql"/>
</jdbc:embedded-database> 
```

但是，我想要测试的不在 Spring 应用程序中。代码中是否有设置数据源并从 sql 文件设置数据库的代码？`<jdbc:embedded-database>`基本上，在功能上等同于 Spring 对标签所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:44:31.880

你会考虑尝试h2吗？

```
public static void main(String[] args) throws ClassNotFoundException,
        SQLException {
    Class.forName("org.h2.Driver");
    Connection conn = DriverManager.getConnection("jdbc:h2:mem:mytestdb",
            "sa", "");
    Statement st = conn.createStatement();
    st.execute("create table foo (id integer)");
    st.execute("insert into foo (id) values (1)");
    ResultSet rs = st.executeQuery("select * from foo");
    while (rs.next()) {
        int result = rs.getInt("id");
        System.out.println(result);
    }
    conn.close();
} 
```

HSQL有同样的方法，但没有尝试过。看看[这个链接](http://www.hsqldb.org/doc/1.8/guide/ch01.html#N101CA)

我希望这有帮助。

# php - 将句子拆分为用逗号分隔的单词

> ID：10916731
> 
> 赞同：1
> 
> 时间：2012-06-06T14:52:30.880
> 
> 标签：php

我在数据库字段中保存了一个句子，我想用单词将其分解，但是这些单词需要用逗号分隔，如下所示：

```
This, is, test, text 
```

我用explode（）尝试了一些东西，但它没有做这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:56:23.963

You could do

```
$text = "This is test text";
echo str_replace (" ", ", ", $text); // This, is, test, text 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:01:40.860

您可以`preg_split()`根据中间的至少一个空格来拆分单词（尽管带有周围空格的感叹号也将被视为一个单词）；之后你把它们粘在一起。

```
echo join(', ', preg_split('/\s+/', $str)); 
```

或者，让我们`wordwrap`为您完成工作，装饰和取消装饰：

```
echo join(', ', explode("\0", wordwrap($s, 1, "\0"))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:05:08.950

我知道这不是最有效的方法，但如果你想使用爆炸，你还需要使用 implode：

```
<?php

$foo = 'this is a test';
$bar = implode(', ', explode(' ', $foo));
print_r($bar);

?> 
```

会显示：`this, is, a, test`

# javascript - jQuery插件将样式限制在特定区域

> ID：10916739
> 
> 赞同：1
> 
> 时间：2012-06-06T14:53:08.283
> 
> 标签：javascript, css, jquery-plugins, scope, styles

我正在寻找仅将样式应用于特定区域的东西：

```
<div class="showcase limited-styles">
    <style scoped type="text/css">/* some styles */</style>
    <!-- the actual content - only affected by the style definitions above -->
</div> 
```

我[已经找到了 jQuery Scoped](https://github.com/thingsinjars/jQuery-Scoped-CSS-plugin)，但由于某种原因它对我不起作用 - 所有其他样式也适用，因此使用最高可用的特异性并没有更好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T14:41:00.953

看来您可以通过“育儿”来实现这一目标

在您想要独立响应的所有元素周围抛出一个包含 div，然后将该 div 名称放在您尝试设置样式的其他 DOM 元素的前面。

```
Here is a fiddle for reference http://jsfiddle.net/3mx4L07t/ 
```

# java - jsp:useBean 没有从 bean 对象中获取属性值

> ID：10916740
> 
> 赞同：0
> 
> 时间：2012-06-06T14:53:12.513
> 
> 标签：java, jsp, servlets

我正在尝试使用标准操作从jsp内的bean对象获取属性值，初始html表单转到一个servlet，该servlet在所需属性内设置一个值，在请求对象内设置属性，然后将其转发给jsp页面中，jsp 使用标准操作从属性中获取值，但它变为空！：

豆对象：

```
public class dog {
private String bread;
public String getBread() {
    return bread;
}

 public void setBread(String bread) {
    this.bread = bread;
}

 } 
```

小服务程序：

```
 dog d=new dog();
        d.setBread("Kizer");
        request.setAttribute("bread", d);
        RequestDispatcher view=request.getRequestDispatcher("index.jsp");
        view.forward(request, response); 
```

JSP（索引）：

```
 < id="person" class="com.example.model.dog" scope="request" /> 
```

由 servlet 创建的人员：`<jsp:getProperty name="person" property="bread" />`

为什么它返回 null ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:05:09.957

在你的 JSP 中使用

```
<jsp:useBean id="bread" class="com.example.model.dog" scope="request" />
<jsp:getProperty name="bread" property="bread" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:00:13.647

使用 bean id 属性与 bean 对象相同。

# .net - 简单的 Linq to List(of T)

> ID：10916742
> 
> 赞同：1
> 
> 时间：2012-06-06T14:53:13.423
> 
> 标签：.net, vb.net, linq

我试图做一件看似简单的事情，但我遇到了问题。我找到的答案不起作用。我仍然遇到铸造异常：

```
Dim query = (From l In dePhl.cv_phil Where l.batch = strMmddyyyy
Select l.zipfile.Distinct)
Dim objFileList As List(Of String) = query.ToList() 'Error 
```

错误：

> 'System.Collections.Generic.List(Of System.Collections.Generic.IEnumerable(Of Char))' 类型的值无法转换为 'System.Collections.Generic.List(Of String)'

它似乎对其他人有用！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:55:33.303

看起来您想要一个不同的`String`值列表。如果是这种情况，那么您使用 of`Distinct`是不正确的，因为您`Char`从每个`String`. 尝试以下

```
Dim query = (From l In dePhl.cv_phil Where l.batch = strMmddyyyy
Select l.zipfile)
Dim objFileList As List(Of String) = query.Distinct().ToList() 
```

# python - 从简单的网站抓取数据 - 将“post”更改为“get”

> ID：10916745
> 
> 赞同：0
> 
> 时间：2012-06-06T14:53:22.160
> 
> 标签：python, http-post, web-scraping, http-get

我访问了这个网站： [http ://www.avcodes.co.uk/airlcodesearch.asp](http://www.avcodes.co.uk/airlcodesearch.asp)

并且，选择了最后一个选项：

```
Select a letter for ICAO Codes: and chose "B" 
```

然后点击`Submit.`

我使用来自 Firefox 的 Tamper Data 和 Live HTTP Headers 来监控进度。

而且，一切都很好.. 实现相同效果所需的直接 URL 是这样的：

[http://www.avcodes.co.uk/airllistres.asp?statuslst=Y&iataairllst=&icaoairllst=B&B1=提交](http://www.avcodes.co.uk/airllistres.asp?statuslst=Y&iataairllst=&icaoairllst=B&B1=Submit)

但是，当使用上述 URL 时..**不会返回数据。**

我缺少什么以及如何找到正确的 URL。

这个练习的目标是一旦我知道了 URL。我将使用一个 python 脚本来循环从 A 到 Z 并从所有页面中获取内容。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:07:03.213

我假设您已获得该网站的许可，可以使用他们的数据库，并且您可以抓取他们的网站。在任何其他情况下，这样做可能是非法的，具体取决于司法管辖区。

这里的问题是您正在使用 GET 来检索内容，但该网站需要一个 POST。Get 和 POST 不是等价的，尽管一些程序员认为它们是相同的（例如，在 PHP 中，您可以使用and`$_REQUEST`代替）。这个网站不像他们，所以你必须发布到这​​个网站。`$_GET``$_POST`

在 Python 中，您可以将数据发布到这样的 url：

```
import urllib2
u = urllib2.urlopen("http://www.avcodes.co.uk/airllistres.asp", "statuslst=Y&iataairllst=&icaoairllst=B&B1=Submit")
print u.read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:05:23.340

POST 和 GET 是不等价的。如果该站点被编写为仅接受 GET，那么就可以了。

但是，您可以轻松编写使用 POST 的脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:08:36.367

那是因为您需要在该页面上使用 POST 方法。

尝试这个：

```
pip install requests 
```

然后：

```
>>> import requests
>>> r = requests.post('http://www.avcodes.co.uk/airllistres.asp?statuslst=Y&iataairllst=&icaoairllst=B&B1=Submit')
>>> r.text 
```

但是，除了上述查询字符串参数之外，您似乎还需要弄清楚一些发布数据才能真正返回数据。

# objective-c - 查找类方法的选择器

> ID：10916746
> 
> 赞同：1
> 
> 时间：2012-06-06T14:53:23.113
> 
> 标签：objective-c

我是 Objective C 的新手，虽然我有一些 Java 反射的背景。

在这里，我有一个经典的类方法**findAll**，它从数据库中查找所有域对象。**Univers**类直接继承自**DomainObject**

```
@interface DomainObject : NSObject

  - (NSString *) execute : (NSString*) method  withJson:(NSString*)json;
  + (NSString*)findAll: (NSString*)json;

@end

@implementation DomainObject

  - (NSString *) execute: (NSString*) method  withJson:(NSString*)json{

      method = [NSString stringWithFormat:@"%@%@", method, @":"]; 
      //method is 'findAll:'
      NSString* result =  [ self performSelector: 
          NSSelectorFromString(method) withObject:json];// Error here
      return result;    
  }
@end 
```

当 findAll 不是类方法（即 -findAll 声明）时，代码正在工作，但现在我有错误： NSInvalidArgumentException -[Univers findAll:] 显然运行时正在寻找一个实例方法。

有什么想法可以找到我的课堂方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:55:36.627

# matlab - Matlab图像矩阵，大小问题

> ID：10916748
> 
> 赞同：1
> 
> 时间：2012-06-06T14:53:25.907
> 
> 标签：matlab, matrix

我有一个`m.n`图像矩阵，如下所示：

```
images = zeros( m, n, height, width ); 
```

这意味着我有`m.n`给定宽度和高度的图像。然后，在一个 for 循环中；我将这些图像填​​充为：

```
for i=1:m
    for j=1:n
       images(i,j,:,:) = imread('imagePath');
    end
end 
```

然后，假设我想使用图像`(1,1)`：

```
image1 = images(1,1,:,:); 
```

我希望这`image1`有`size = (h,w)`。然而，当我说：

```
size(image1) 
```

我得到结果：

```
(1,1,h,w) 
```

# 问题：

## 1.

为什么我没有以下结果？

```
(h,w) 
```

## 2.

如何重建我的代码以获得我的预期结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:00:42.017

It has to do with how matlab does indexing. When you say

```
image1 = images(1,1,:,:); 
```

You're telling matlab you want a 4 dimensional array, with first and second dimensions of size 1.

Where as, if you had said:

```
junk = images(:,:,1,1);
size(junk)
> [m,n] 
```

Matlab treats a matrix of size [m,n] the same as if it were of size [m,n,1] or [m,n,1,1]. Can't do that on the front, thus the need for `squeeze` as @Junuxx points out. An alternative approach is to do thing as follows:

```
images = zeros( height, width, m, n );
for i=1:m
    for j=1:n
       images(:,:,m,n) = imread('imagePath');
    end
end
image1 = images(:,:,1,1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:54:48.600

您可以使用[挤压](http://www.mathworks.nl/help/techdoc/ref/squeeze.html)功能来做到这一点:)

```
image1 = squeeze(image1);
size(image1) 
```

应该给

```
(h,w) 
```

# msdeploy - 使用 msbuild 将 -Usechecksum 传递给 msdeploy 的任何方式

> ID：10916750
> 
> 赞同：4
> 
> 时间：2012-06-06T14:53:29.150
> 
> 标签：msdeploy, tfsbuild, webdeploy

我有一个网站，其中包含大量文件，使用团队构建和通过 Web 部署包进行部署。我遇到的问题是软件包是从农场的一台机器上构建的，时间戳并不总是匹配的。默认情况下，使用 Web 部署意味着完整的站点滚动以及如此多的文件和跨集群的同步，这不是最佳的。

使用 cmd line deploy 我可以通过 -UseCheckSum ，这可以解决手动部署。现在我正在尝试使用具有自动部署功能的 CI 构建，并通过我的构建设置传递 MSbuild 参数。有没有办法让它以相同的方式部署？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:58:26.530

您无法在 MSBuild 中执行此操作，但可以编辑构建服务器上的 Microsoft.Web.Publishing.targets 文件以应用 -UseChecksum。

在这里查看我的答案：[https ://stackoverflow.com/a/13863041/8037](https://stackoverflow.com/a/13863041/8037)

**更新**：MS 添加了将 UseChecksum 标志传递给 VS 2013 的功能。为此，请将以下属性添加到 .pubxml 文件中：

```
<MSDeployUseChecksum>true</MSDeployUseChecksum> 
```

更多信息可以在这里找到：http: [//blogs.msdn.com/b/webdev/archive/2013/10/30/web-publishing-updates-for-app-offline-and-usechecksum.aspx](http://blogs.msdn.com/b/webdev/archive/2013/10/30/web-publishing-updates-for-app-offline-and-usechecksum.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:01:28.113

如果“MSBuild”是指 Web Publishing Pipeline，那么答案是否定的。`MSDeploy`msbuild 任务支持`UseChecksum`属性，但 WPP 目标不提供可以设置它的机制。许多其他功能（如存储的凭据）也是如此。

# mongodb-.net-driver - 如何使用 C# 在 MongoDB 中复制/克隆数据库

> ID：10916751
> 
> 赞同：1
> 
> 时间：2012-06-06T14:53:31.987
> 
> 标签：mongodb-.net-driver

在某些情况下，我想调用一个函数，该函数应该复制数据库并将其保存为新的 MongoDB 数据库，其名称为当前日期时间。

我只需要 C# 语法来复制/复制/克隆 mongodb 数据库。

# c++ - 如何在 c 中将多维数组作为指针传递

> ID：10916755
> 
> 赞同：2
> 
> 时间：2012-06-06T14:53:41.217
> 
> 标签：c++, c, pointers, multidimensional-array, pointer-to-array

> **可能重复：**
> [如何将多维数组传递给 C 和 C++ 中的函数](https://stackoverflow.com/questions/2828648/how-to-pass-a-multidimensional-array-to-a-function-in-c-and-c)

所以我有 char`buffer[4][50]`

我需要将它传递给一个方法`void SetBuffer(char **buffer)`，或者至少我认为它应该被格式化。

所以我`SetBuffer(buffer);`呢？在方法中我需要设置每个元素

`void SetBuffer(char **buffer)`
`{`
`strncpy(buffer[0], "something", 50);`
`strncpy(buffer[1], "something else", 50);`
`}`

如何正确完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:55:57.243

C++ 方法是酌情使用适当的容器（例如`std::vector<unsigned char>`或`std::string`）。

OTOH，如果有特殊原因需要依赖数组，使用指针（就像你已经做过的那样）并明确传递维度是一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:58:09.583

有很多方法：

最简单的是：

```
void SetBuffer(char[][50] buffer)
{
strncpy(buffer[0], "something", 50);
strncpy(buffer[1], "something else", 50); 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T15:01:21.543

警告：这是一个 C 答案。您的答案对我来说似乎是正确的，但更好的方法是：

```
#define BUFFER_DIM_1   4
#define BUFFER_DIM_2   50

int    i;
char **buffer;

/* Create an array of pointers to the lower level */
buffer = malloc(BUFFER_DIM_1 * sizeof(char *));
for (i=0; i<BUFFER_DIM_1; i++) {
    buffer[i] = malloc(BUFFER_DIM_2 * sizeof(char));
} 
```

然后，您可以按照您的建议使用。

对于勇敢的心，你可以只使用两个 malloc 和一些更聪明的指针工作：

```
#define BUFFER_DIM_1   4
#define BUFFER_DIM_2   50

int    i;
char **buffer;

/* Create an array of pointers to the lower level */
buffer    = malloc(BUFFER_DIM_1 * sizeof(char *));
buffer[0] = malloc(BUFFER_DUM_1 * BUFFER_DIM_2 * sizeof(char));
for (i=1; i<BUFFER_DIM_1; i++) {
    buffer[i] = buffer[i-1] + BUFFER_DIM_2 * sizeof(char);
} 
```

最后，不要忘记在不再需要时释放所有这些内存。

# java - 如何使用 SWT 将双击事件侦听器添加到托盘图标？

> ID：10916760
> 
> 赞同：2
> 
> 时间：2012-06-06T14:54:06.190
> 
> 标签：java, swt

我有一个使用以下代码片段创建的 SWT 托盘图标：

```
 itmTrayItem = new TrayItem(trySysTray, SWT.NONE);
    itmTrayItem.setToolTipText("My App");
    itmTrayItem.addListener(SWT.MenuDetect, new Listener() {
        public void handleEvent(Event event) {
            mnuPopup.setVisible(true);
        }
    }); 
```

右键单击托盘图标会弹出一个上下文菜单。我想为托盘图标添加一个双击事件，以便在双击该图标时执行一些操作。我怎样才能做到这一点？

我不明白我是如何使用鼠标侦听器的，因为我发现 SWT 文档的某些部分缺少示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:47:46.747

尝试 SWT.DefaultSelection 事件，它可能会成功

# android - 在 PhoneGap 中上传 FileTransfer 的问题

> ID：10916761
> 
> 赞同：0
> 
> 时间：2012-06-06T14:54:22.363
> 
> 标签：android, cordova, file-upload, phonegap

我无法在 phone-gap android 版本中上传手机拍摄的图像。对于 iOS，它工作正常，但相同的代码不适用于使用电话间隙的 android 版本

我收到 200 个响应代码，但没有来自服务器的“成功”响应。

我正在使用cordova-1.7.0.js，目标SDK是Android 2.1。

这是示例代码：

```
function imageUpload(imageURI)
{
    var options = new FileUploadOptions();
    options.fileKey="image";
    options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
    options.mimeType="image/jpeg";
    var params = new Object();
    var msg="test message";
    var token= "test token";
    params.message = msg;
    params.access_token = token;
    options.params = params;
    var ft = new FileTransfer();
    ft.upload(imageURI, "http://mydomain.info/demo/upload.php", win, fail, options,false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:33:33.483

也不要忘记将相机权限添加到android模拟器

HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Login Page</title>
              <meta name="viewport" content="width=device-width, initial-scale=1">

     <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
     <link rel="stylesheet"
href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
     <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script
src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

    <script type="text/javascript">

        function PictureSourceType() {};
        PictureSourceType.PHOTO_LIBRARY = 0;
        PictureSourceType.CAMERA = 1;

        function getPicture(sourceType)
        {
             var options = { quality: 10 };
             if (sourceType != undefined) {
                  options["sourceType"] = sourceType;
                 // options["destinationType"] = destinationType.DATA_URL;
             }
             // if no sourceType specified, the default is CAMERA 
             navigator.camera.getPicture(getPicture_Success, null, options);
        };

        function getPicture_Success(imageData)
        {
                 alert("getpic success "+ imageData);
                document.getElementById("test_img").src =  imageData;
        };

        function success(response) {
            alert("Your photo has been uploaded!");
          };
          // callback if the photo fails to upload successfully.

          function fail(error) {
            alert("if refreshed An error has occurred: Code = " + error.code);
          };

        function uploadPhoto()
        {
            var imageFile = document.getElementById("test_img").src;
            alert(imageFile);

            var ft,options;

            options = new FileUploadOptions();
            options.fileKey = "profile_image";
              // name of the file:
              options.fileName = imageFile.substr(imageFile.lastIndexOf('/') + 1);
              // mime type:
              options.mimeType = "multipart/form-data";
              params = {
                val1: "some value",
                val2: "some other value"
              };
              options.params = params;

            ft = new FileTransfer();
            ft.upload(imageFile, 'http://10.0.2.2:8080/cio/uploadpic', success, fail, options);
            alert("There is something called file transfer " + imageFile);

        };

       </script>
        </head>

         <body>
     <div data-role="page" id="cameraPage">
    <div data-role="header" data-position="inline">
        <h1>Edit profile Pic</h1>
        <a href="index.html" data-icon="delete" class="ui-btn-right">Cancel</a>
    </div>

    <div data-role="content">
        <center>
        <img style="width: 60px; height: 60px" id="test_img" src="" />
        </center>

        <button onclick="getPicture()">From Camera</button>

        <button onclick="getPicture(PictureSourceType.PHOTO_LIBRARY)">From
            Photo Library</button>
        <button onclick="uploadPhoto()">Upload Photo</button>

    </div>

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:48:12.237

首先确保您的 doPost 方法被调用 如果它没有被调用，请编写 doGet() 方法，并在该调用中按以下方式发布

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    doPost(request,response);
} 
```

然后，您需要将以下jar文件放在WEB-INF下的lib文件夹中

1.  commons-fileupload-1.2.2.jar
2.  commons-fileupload-1.2-javadoc.jar
3.  commons-fileupload-1.2-sources.jar
4.  commons-io-1.3.2.jar

也将它们放在构建路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T09:30:15.943

在此处查看我的答案，这适用于我在 android 上（将图像和数据发送到 django rest api）以获取完整代码：

[android phonegap 相机和图像上传](https://stackoverflow.com/questions/14447336/android-phonegap-camera-and-image-uploading)

我想诀窍在于：

```
options.chunkedMode = true; //this is important to send both data and files 
```

也许这个：

```
var url=encodeURI("http://your_url_for_the_post/"); 
```

使用 url 编码的 url 传递给 FileTransfer

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:29:27.693

现在我们在 Cordova-1.9.0 上还添加了 apache 库：commons-io-2.4.JARS

我一直在尝试将图片从 phonegap android 模拟器上传到 servlet 以存储图片

Servlet 代码：uploadpic.java

```
private static final String BASE_DIRECTORY = "/Users/tshah/Pictures";

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

//  boolean isMultipart = ServletFileUpload.isMultipartContent(request);

    System.out.println("Do post....");

    /**
    * The base upload directory. In this directory all uploaded files will
    * be stored. With the applet param tag 'directory' you can create a
    * subdirectory for a user. 
    * See http://www.javaatwork.com/parameters.html#directory for more 
    * information about the 'directory' param tag. For a Windows environment 
    * the BASE_DIRECTORY can be e.g. * 'c:/temp' for Linux environment '/tmp'.
    */

    boolean isMultipart = ServletFileUpload.isMultipartContent(request);

    // check if the http request is a multipart request
    // with other words check that the http request can have uploaded files
    if (isMultipart) {

      //  Create a factory for disk-based file items
      FileItemFactory factory = new DiskFileItemFactory();

      //  Create a new file upload handler
      ServletFileUpload servletFileUpload = new ServletFileUpload(factory);

      // Set upload parameters
      // See Apache Commons FileUpload for more information
      // http://jakarta.apache.org/commons/fileupload/using.html
      servletFileUpload.setSizeMax(-1);

      try {

        String directory = "";

        // Parse the request
        List items = servletFileUpload.parseRequest(request);

        // Process the uploaded items
        Iterator iter = items.iterator();

        while (iter.hasNext()) {
          FileItem item = (FileItem) iter.next();

          // the param tag directory is sent as a request parameter to
          // the server
          // check if the upload directory is available
          if (item.isFormField()) {

            String name = item.getFieldName();

            if (name.equalsIgnoreCase("directory")) {

              directory = item.getString();
            }

            // retrieve the files
          } else {

            // the fileNames are urlencoded
            String fileName = URLDecoder.decode(item.getName());

            File file = new File(directory, fileName+".jpeg");
            file = new File(BASE_DIRECTORY, file.getPath());

            // retrieve the parent file for creating the directories
            File parentFile = file.getParentFile();

            if (parentFile != null) {
              parentFile.mkdirs();
            }

            // writes the file to the filesystem
            item.write(file);
          }
        }

      } catch (Exception e) {
        e.printStackTrace();
        response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
      }

      response.setStatus(HttpServletResponse.SC_OK);

    } else {
      response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T19:50:52.623

我有同样的问题。我通过添加代码修复了它

```
System.setProperty("http.keepAlive", "false"); 
```

在 onCreate() 方法开头的主 java 文件中。此错误是apache cordova[未解决的错误。](https://issues.apache.org/jira/browse/CB-2293)

# php - 模仿表单行为？使用 PHP 打开链接

> ID：10916766
> 
> 赞同：1
> 
> 时间：2012-06-06T14:54:38.113
> 
> 标签：php, html, forms

DHL 让您可以在他们的网站上跟踪您的包裹，例如：[http](http://www.dhl.com/en/express/tracking.html) ://www.dhl.com/en/express/tracking.html 。现在，当您输入跟踪号时，它会打开一个新窗口，如下所示：[http: //www.dhl.com/content/g0/en/express/tracking.shtml?brand=DHL&AWB=](http://www.dhl.com/content/g0/en/express/tracking.shtml?brand=DHL&AWB=) **SOMENUMBER1234**

现在我想在我的网站上模仿这种行为。我有一个表格，您可以在其中输入跟踪号，它会打开 DHL 网址。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:57:35.060

是的，只需使用隐藏值和文本框创建一个：

```
<form method="GET" action="http://www.dhl.com/content/g0/en/express/tracking.shtml">
    <input type="hidden" name="brand" value="DHL" />
    <input type="text" name="AWB" size="{LengthOfTrackingNumber" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:15:56.717

使用您在评论中提到的新 URL（请同时更新您的帖子），您可以使用 JavaScript 并通过您自己的服务器进行重定向。

根据您的服务器端脚本语言，您可能必须以不同方式处理服务器部分。以下示例适用于 PHP：

**客户端 HTML：**

```
<form method="GET" action="dhl_redirect.php" id="myForm">
    <input type="hidden" name="id" value="" id='myId' placeholder="Enter tracking number" />
</form> 
```

**客户端 JavaScript：**

```
(function(){
 var form=myForm;
 form.addEventListener('submit',function(evt){
   var dhlUrl="https://dhlforyou.nl/login/track/";

   var id=document.getElementById('myId');
   if(/^\d+$/.test(id.value)){
    if(myForm.target==='_blank'){
     window.open(dhlUrl+id.value);
    }else{
     location.href=dhlUrl+id.value;
    };

   evt.preventDefault();

 },false);
})(); 
```

**服务器：**

```
<?php
 if(isset($_GET['id'])&&!is_nan(intval($_GET['id']))){
  $dhlId=$_GET['id'];

  header('Location: https://dhlforyou.nl/login/track/'.dhlId);//Redirect to DHL
  exit;//Skip the rest of the script

 }else{//ID not set or not a number

    header('Location: myHTMLform.htm');
 }
?> 
```

如果您想在新选项卡中打开此表单，只需将属性设置`target`为`_blank`.

# c# - 在创建对象时从数据库获取标识值

> ID：10916768
> 
> 赞同：0
> 
> 时间：2012-06-06T14:54:39.063
> 
> 标签：c#, asp.net-mvc-3, azure-sql-database

我在 Azure 上运行 ASP.Net MVC 3 应用程序。我只是创建了一些具有名称的用户并将它们添加到 SQLAzure DB 中。
是否可以在创建时获取用户的 ID，或者我是否需要向数据库发出请求。
我实际上有：

> 用户用户 = 新用户（名称）；
> db.Users.Add(用户);
> db.SaveChanges();
> //这里获取用户db生成的id

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:01:52.413

不确定它在 Azure 中是否相同，但是在使用实体框架时，您只需在 SaveChanges() 调用之后立即访问 ID 就是 user.UserID （或任何来自您的数据库的属性名称）。

# php - 在 Magento 中覆盖 file_image 模型

> ID：10916773
> 
> 赞同：0
> 
> 时间：2012-06-06T14:55:04.700
> 
> 标签：php, magento

我正在尝试更改我的 Magento (1.5.10) 商店中产品的图像质量。

经过大量研究，我找到了一个论坛帖子，其中显示了如何对 Magento 核心文件之一进行小幅更改。由于更改核心很糟糕，因此我正在尝试使用自定义模块覆盖 File_Image 模型。

我创建了以下文件：

1.  /app/etc/modules/Quantumco_Image.xml [http://pastie.org/private/ucqbcwsqassv56njsdyona](http://pastie.org/private/ucqbcwsqassv56njsdyona)
2.  /app/code/local/Quantumco/Image/etc/config.xml [http://pastie.org/private/aq2pnlaohtbtjvikzeftg](http://pastie.org/private/aq2pnlaohtbtjvikzeftg)
3.  /app/code/local/Quantumco/Image/Model/Image.php [http://pastie.org/private/li7tgoqhlnyyf7mpc0eg8g](http://pastie.org/private/li7tgoqhlnyyf7mpc0eg8g)

我的模块正在加载（它显示为在管理后端启用），但我的代码似乎并没有真正覆盖模型。据我所知，Image.php 根本没有运行。

我究竟做错了什么？有没有更好的方法来覆盖这个模型？

* * *

*按照建议更新*将 Config.xml 更改为 config.xml

*更新*使用我的“打破文件以查看它是否被包含”技术，我发现我的 config.xml 文件没有被解析。有什么想法可能导致这种情况吗？

*更新*最后，好像我有插件冲突。我认为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:51:24.637

`quantumco_image`应该`Quantumco_Image`在您的节点中`config.xml`以及 nachito 提到的保持小写是最佳实践。

另请查看 Mage_Media/etc/config.xml 并按照节点路径找到要重写的模型。

我相信您想要重写 media_file，而不是媒体。

```
<global>
<models>
<media_file>
<rewrite>
<image>Quantumco_Image_Model_Image</image>
</rewrite>
</media_file>
</models>
</global> 
```

# ruby-on-rails - 如何在 Rails From 中为表单/表格/模型的一部分进行多项选择？

> ID：10916776
> 
> 赞同：0
> 
> 时间：2012-06-06T14:55:09.820
> 
> 标签：ruby-on-rails, database-design, multipleselection

我有一个嵌套表，称为 products 嵌套在party 表下，其中一个comluns 是“brand”。产品有数量、颜色和“品牌”。对于“品牌”，我希望用户能够对用户想要的每个产品的多个品牌进行多项选择和收集。我该怎么做？我安装了“rails selected gem”，但似乎我需要分配更多。

表中的一列是否有可能为每个用户和产品提供多个集合？看来我应该使用索引？

代码：

```
Product.rb:
class Product < ActiveRecord::Base
attr_accessible :party_id, :party, :id, :brand, :color, :name, :quantity
belongs_to :party
BRAND_TYPES = ["Hugs", "Kisses", "Love" ]
end

Party.rb:
class Party < ActiveRecord::Base
validates :user_id, presence: true
attr_accessible :name, :products_attributes, :products, :user_id
belongs_to :user
has_many :products
accepts_nested_attributes_for :products, allow_destroy: true
end

_product_fields.html.erb:
<table>

<tr> 
<td> <%= f.label :name, "Product Name" %> </td>
<td> <%= f.text_field :name %> </td>
<td> <%= f.label :color, "Color" %> </td>
<td> <%= f.text_field :color %> </td>
<td> <%= f.label :Quantity, "Quantity" %> </td>
<td> <%= f.text_field :quantity %> </td>
<td> <%= f.label :brand, "Brand" %> </td>
<td> <%= f.select :brand, Product::BRAND_TYPES, :multiple => true %> </td>
<td> <%= f.link_to_remove "Remove this task" %></td>

</tr>
</table> 
```

谢谢，我很感激。

# sql - ISNULL() 函数需要两个参数？简单的解决方案

> ID：10916777
> 
> 赞同：1
> 
> 时间：2012-06-06T14:55:11.193
> 
> 标签：sql, isnull

我在 ISNULL() 函数中放错了一些东西，需要另一双眼睛才能找到它。我盯着它看得太多了，我已经变得脑残了（我知道 ISNULL() 是什么，这只是一个简单的语法错误）

```
(SELECT tn.teamtext, tn.teamid, ISNULL(sum(ISNULL(case when CONVERT(smalldatetime,dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end), 0), 0) AS cnt3
  FROM teamnames AS tn 
    LEFT OUTER JOIN caseaudit AS ca
    ON tn.teamID = ca.referteamID2
  WHERE ca.referteamid1 <> ca.referteamid2 AND isactive = 1 AND groupid = 18 AND accountid = 2 AND referteamid1 = 31 AND auditnote <> 'Suspend Case'
  GROUP BY tn.teamtext, tn.teamid) AS c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:00:18.753

该`ISNULL()`函数需要两个参数，您可以在此处看到：

> [http://msdn.microsoft.com/library/ms184325.aspx](http://msdn.microsoft.com/library/ms184325.aspx)

第一个是正在测试的表达式，第二个是如果测试的表达式计算结果为 时返回的值`NULL`。

您的第二个`ISNULL()`函数仅指定一个参数：

```
ISNULL(case when CONVERT(smalldatetime,dModLast,101) 
       BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end) 
```

你应该试试：

```
ISNULL((case when CONVERT(smalldatetime,dModLast,101) 
       BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end), 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:00:49.577

试试这个：

```
(SELECT tn.teamtext, tn.teamid, ISNULL(sum(ISNULL(case when CONVERT(smalldatetime,dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end, 0)), 0) AS cnt3
  FROM teamnames AS tn 
    LEFT OUTER JOIN caseaudit AS ca
    ON tn.teamID = ca.referteamID2
  WHERE ca.referteamid1 <> ca.referteamid2 AND isactive = 1 AND groupid = 18 AND accountid = 2 AND referteamid1 = 31 AND auditnote <> 'Suspend Case'
  GROUP BY tn.teamtext, tn.teamid) AS c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:02:12.783

你在错误的地方有一个括号：

```
ISNULL(sum(ISNULL(case when CONVERT(smalldatetime,dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end , 0)), 0) AS cnt3 
```

在您的 CASE 声明“结束”之后注意

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:04:22.120

这是答案......我想通了。

注意区别...

原文： ISNULL(sum(ISNULL(convert(smalldatetime,dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end`), 0), 0)`

修订 ISNULL(sum(ISNULL(convert(smalldatetime,dModLast,101) BETWEEN '2012-03-01' AND '2012-03-10' then 1 else 0 end 时的情况`, 0)`),`0)`

# performance - 有和没有并发请求的 ApacheBench 中的不同结果

> ID：10916779
> 
> 赞同：1
> 
> 时间：2012-06-06T14:55:25.670
> 
> 标签：performance, performance-testing, apachebench

我正在尝试在我的生产服务器上获取一些有关响应时间的统计信息。

打电话时，`ab -n100 -c1 "http://example.com/search?q=something"`我得到以下结果：

```
Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       24   25   0.7     24      29
Processing:   526  874 116.1    868    1263
Waiting:      313  608 105.1    596    1032
Total:        552  898 116.1    892    1288 
```

但是当我打电话时`ab -n100 -c3 "http://example.com/search?q=something"`，结果要糟糕得多：

```
Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       24   25   0.8     25      30
Processing:   898 1872 1065.6   1689    8114
Waiting:      654 1410 765.5   1299    7821
Total:        923 1897 1065.5   1714    8138 
```

考虑到该站点正在生产中，因此除了我的请求之外还有其他请求，我无法解释为什么没有并发的调用比即使是小并发的调用要快得多。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:40:25.040

如果您的并发性为 1，则意味着您告诉 AB 使用一个线程尽可能快地访问此 URL。值 -c3 告诉 AB 做同样的事情，但使用 3 个线程，这可能会导致更大的调用量，在你的情况下，这似乎导致事情变慢。（注意 AB 是单线程的，因此实际上并不使用多个 os 线程，但类比仍然成立。）

这有点像在收费站有更多的车道，一个车道只能处理这么快的汽车，但有了三个车道，你将获得更多的吞吐量。但是，无论你有多少条车道，在收费站之后汽车必须通过的隧道宽度也会影响吞吐量，这可能就是你所看到的。

作为一般说明，负载测试的更好方法是确定您的应用程序*需要*能够支持的流量级别，然后设计一个测试来生成此级别的吞吐量，仅此而已。像 AB 一样尽可能快地运行线程往往会使任何类型的受控测试变得困难。JMeter 更好。

另外，您可能想考虑为他的事情设置一个测试服务器，风险较小......

# ruby - Error installing debugger-linecache in Ruby 1.9.3

> ID：10916784
> 
> 赞同：58
> 
> 时间：2012-06-06T14:55:35.097
> 
> 标签：ruby, rubygems, gem, ruby-1.9.3

I need version 1.0.1 of `debugger-linecache` for a project, and I am facing the following error when trying to install.

```
trunk ☺  gem install debugger-linecache -v '1.0.1'
Building native extensions.  This could take a while...
ERROR:  Error installing debugger-linecache:
    ERROR: Failed to build gem native extension.

        /Users/jordanscales/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for vm_core.h... no
checking for vm_core.h... no
Makefile creation failed
**************************************************************************
No source for ruby-1.9.3-p194 provided with debugger-ruby_core_source gem.
**************************************************************************
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/jordanscales/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-ruby-dir
    --without-ruby-dir
    --with-ruby-include
    --without-ruby-include=${ruby-dir}/include
    --with-ruby-lib
    --without-ruby-lib=${ruby-dir}/lib

Gem files will remain installed in /Users/jordanscales/.rvm/gems/ruby-1.9.3-p194/gems/debugger-linecache-1.0.1 for inspection.
Results logged to /Users/jordanscales/.rvm/gems/ruby-1.9.3-p194/gems/debugger-linecache-1.0.1/ext/trace_nums/gem_make.out
trunk ☺ 
```

Any help would be extremely appreciated, I have been searching but cannot find a working solution.

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-16T11:11:52.770

这可能对你有帮助，它对我有用

```
gem install debugger-linecache -v '1.1.2' -- --with-ruby-include=$rvm_path/src/ruby-1.9.3-p286/ 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2012-10-23T20:25:58.503

此错误表示所选版本`debugger`不支持您当前的 Ruby 版本。有两种解决方案：

1.  通过更新`debugger`gem `bundle update debugger`。新版本`debugger`与旧 Ruby 版本向后兼容，因此这是修复它的最佳方法。
2.  降级您的 Ruby 版本。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-12-03T15:19:53.240

更新/`gem debugger-ruby_core_source`安装

```
gem install debugger-ruby_core_source 
```

它已在此处更正：[https ://github.com/cldwalker/debugger-ruby_core_source/pull/7](https://github.com/cldwalker/debugger-ruby_core_source/pull/7)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-07T19:15:58.447

问题是我错误地使用了 gemsets。我知道没有权限是个问题，因为在 RVM 下我不需要 sudo 来安装任何东西。

`rvm gemset use global`然后 a`bundle install`成功了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-30T19:42:38.460

从以下链接：

[https://github.com/cldwalker/debugger/issues/50](https://github.com/cldwalker/debugger/issues/50)

我已经安装了 gem **ruby​​-debug19**并为我解决了如下问题：

```
$ bundle
... -> failed to build debugger-linecache
$ gem install ruby-debug19
$ bundle
... -> all is fine 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-19T18:34:13.217

在我的情况下，问题与直接无关`debugger-linecache`。尝试`debugger-ruby_core_source`将 Ruby 升级或降级几个补丁级别。

我已经执行了`bundle update debugger-linecache`。虽然我在 Gemfile.lock 中有最新版本，`debugger-ruby_core_source`但已升级到 1.1.5 并且 debugger-linecache 已停止抱怨。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-25T18:26:48.057

我安装了 debugger-ruby_core_source gem，基于在这里阅读旧答案：[https ://github.com/cldwalker/debugger/issues/12](https://github.com/cldwalker/debugger/issues/12)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-24T04:51:09.047

If you are using rvm, then make sure the path lead to ruby, in rvm its rubies folder

**$rvm_path/rubies/ruby-1.9.3-p448**

```
gem install debugger-linecache -v '1.1.2'  -- --with-ruby-include=$rvm_path/rubies/ruby-1.9.3-p448
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-10-29T11:09:09.507

您的 Gemfile.lock 不是用您尝试捆绑的相同 Ruby 编写的。

`bundle update`应该通过让 Bundler 查看不同的版本来工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-22T15:33:45.320

手动构建它。它对我 [有用 https://gist.github.com/4060260](https://gist.github.com/4060260)

# c++ - string.c_str() 是常量吗？

> ID：10916787
> 
> 赞同：16
> 
> 时间：2012-06-06T14:55:40.480
> 
> 标签：c++

我在一个库中有一个函数，它接收`char*`并修改数据。

我试图给它`c_str()`但是 c++ 文档说它返回一个`const char*`.

除了新建一个 char 数组并将其复制到其中之外，我还能做什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T15:01:44.107

您可以使用`&str[0]`或`&*str.begin()`只要：

*   `resize()`您使用;明确地预先分配函数所需的所有空间
*   该函数不会尝试超过预先分配的缓冲区大小（您应该`str.size()`作为缓冲区大小的参数传递）；
*   当函数返回时，您在`\0`找到的第一个字符处显式修剪字符串，否则`str.size()`将返回“预分配大小”而不是“逻辑”字符串大小。

***注意：***这保证在 C++11 中有效（其中字符串保证是连续的），但在标准的先前版本中不适用；尽管如此，我所知道的标准库的任何实现都没有`std::basic_string`使用非连续存储实现。

不过，如果您想安全起见，请使用`std::vector<char>`(保证从 C++03 开始​​是连续的); 用你想要的任何东西进行初始化（你可以使用带有两个迭代器的构造函数从字符串中复制它的数据，最后添加一个空字符），像你一样调整它的大小并将`std::string`它复制回在第一个`\0`字符处停止的字符串.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-06T14:57:59.877

没有。

因为`std::string`它自己管理它的内容，所以你不能对字符串的底层数据有写访问权。那是未定义的行为。

但是，创建和复制 char 数组并不难：

```
std::string original("text");
std::vector<char> char_array(original.begin(), original.end());
char_array.push_back(0);

some_function(&char_array[0]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T15:02:43.923

如果您*知道*该函数不会修改超出`str.size()`您可以通过不同方式之一获得指针：

```
void f( char* p, size_t s ); // update s characters in p
int main() {
   std::string s=...;
   f( &s[0], s.size() );
   f( &s.front(), s.size() );
} 
```

请注意，这在 C++11 中得到保证，但在允许*绳索*实现（即非连续内存）的标准的先前版本中没有

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T15:07:06.560

如果您的实现不会尝试增加字符串的长度，那么：

C++11：

```
std::string data = "This is my string.";
func(&*data.begin()); 
```

C++03：

```
 std::string data = "This is my string.";
 std::vector<char> arr(data.begin(), data.end());

 func(&arr[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T15:11:30.550

这是一个类，它将生成一个临时缓冲区，并在它被销毁时自动将其复制到字符串中。

```
class StringBuffer
{
public:
    StringBuffer(std::string & str) : m_str(str)
    {
        m_buffer.push_back(0);
    }
    ~StringBuffer()
    {
        m_str = &m_buffer[0];
    }
    char * Size(int maxlength)
    {
        m_buffer.resize(maxlength + 1, 0);
        return &m_buffer[0];
    }
private:
    std::string & m_str;
    std::vector<char> m_buffer;
}; 
```

以下是您将如何使用它：

```
// this is from a crusty old API that can't be changed
void GetString(char * str, int maxlength);

std::string mystring;
GetString(StringBuffer(mystring).Size(MAXLEN), MAXLEN); 
```

如果你认为你以前看过这段代码，那是因为我从我写的一个问题中复制了它：[保证 C++ 中临时的生命周期？](https://stackoverflow.com/questions/584824/guaranteed-lifetime-of-temporary-in-c)

# magento - magento report_event table analysis

> ID：10916789
> 
> 赞同：4
> 
> 时间：2012-06-06T14:55:44.153
> 
> 标签：magento

I have a requirement to create a number of custom reports on the magento data.

The first job I have to do is to improve on the ‘Products Viewed’ report integrated into Magento.

I have managed to work out that the data for this report is taken from the ‘report_event’ table, however there are some peculiarities with this data I need to understand.

Firstly, I assume that where event_type_id is 1 (i.e. ‘catalog_product_view’ according to the reference table), the columns object_id and subject_id store the ID of the product and the ID of the visitor respectively. However, there are a large number of entries where subject_id is zero, but object_id holds the id of a valid product.

What I need to know is how this can occur… i.e. how can we get an entry in the report_event table where the following are all true:

event_type_id = 1

object_id = [valid product id]

subject_id = 0

Many thanks in anticipation

Si

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T17:43:52.263

**TL;博士：**

A`report_event.subject_id == 0`通常是被*忽略的用户代理*或*显式排除的路由*触发通常由 Magento 记录的事件的结果。

见`app/code/core/Mage/Log/etc/config.xml`：

```
<config>
    <global>
        <!-- : -->
        <ignoredModules>
            <entities>
                <install/>
                <adminhtml/>
                <admin/>
            </entities>
        </ignoredModules>
        <ignore_user_agents>
            <google1>Googlebot/1.0 (googlebot@googlebot.com http://googlebot.com/)</google1>
            <google2>Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)</google2>
            <google3>Googlebot/2.1 (+http://www.googlebot.com/bot.html)</google3>
        </ignore_user_agents>
        <!-- : -->
    </global>
</config> 
```

### 长答案

为了解释为什么会发生这种情况，我需要更详细地说明。

当任何 Magento 控制器动作即将被调度时，`controller_action_predispatch`将触发一个事件，就在动作调度实际发生之前。

再看看`app/code/core/Mage/Log/etc/config.xml`：

```
<config>
    <frontend>
        <events>
            <controller_action_predispatch>
                <observers>
                    <log>
                        <class>log/visitor</class>
                        <method>initByRequest</method>
                    </log>
                </observers>
            </controller_action_predispatch>
            <!-- : -->
        </events>
    </frontend>
</config> 
```

显示，该`Mage_Log`模块为事件定义了一个观察者`controller_action_predispatch`，由方法表示`Mage_Log_Model_Visitor::initByRequest()`：

```
public function initByRequest($observer)
{
    if ($this->_skipRequestLogging || $this->isModuleIgnored($observer)) {
        return $this;
    }

    $this->setData($this->_getSession()->getVisitorData());
    $this->initServerData();

    if (!$this->getId()) {
        $this->setFirstVisitAt(now());
        $this->setIsNewVisitor(true);
        $this->save();
    }
    return $this;
} 
```

当发送当前请求的用户代理与(GoogleBot)之一匹配时，该属性`$this->_skipRequestLogging`将为。`true``<ignored_user_agents />`

如果请求路由匹配其中之一（即,或; 在 EE 中也是） ，则该方法`$this->isModuleIgnored()`仅返回。`true``<ignoredModules />``install/``adminhtml/``admin/``api/`

关键是，如果这两者中的一个返回`true`，则观察者立即退出，即**根本不会创建/保存访问者**。

现在，为了进一步解释以您的`catalog_product_view`案例为例，请查看另一个配置文件，`app/code/core/Mage/Reports/etc/config.xml`这次：

```
<config>
    <frontend>
        <events>
            <catalog_controller_product_view>
                <observers>
                    <reports>
                        <class>reports/event_observer</class>
                        <method>catalogProductView</method>
                    </reports>
                </observers>
            </catalog_controller_product_view>
            <!-- : -->
        </events>
    </frontend>
</config> 
```

它定义了事件的观察者`catalog_controller_product_view`，由 `Mage_Reports_Model_Event_Observer::catalogProductView()`方法表示：

```
public function catalogProductView(Varien_Event_Observer $observer)
{
    $productId = $observer->getEvent()->getProduct()->getId();

    Mage::getModel('reports/product_index_viewed')
        ->setProductId($productId)
        ->save()
        ->calculate();

    return $this->_event(Mage_Reports_Model_Event::EVENT_PRODUCT_VIEW, $productId);
} 
```

这个观察者的最后一行调用了这个`_event()`方法：

```
protected function _event($eventTypeId, $objectId, $subjectId = null, $subtype = 0)
{
    if (is_null($subjectId)) {
        if (Mage::getSingleton('customer/session')->isLoggedIn()) {
            $customer = Mage::getSingleton('customer/session')->getCustomer();
            $subjectId = $customer->getId();
        }
        else {
            $subjectId = Mage::getSingleton('log/visitor')->getId();
            $subtype = 1;
        }
    }

    $eventModel = Mage::getModel('reports/event');
    $storeId    = Mage::app()->getStore()->getId();
    $eventModel
        ->setEventTypeId($eventTypeId)
        ->setObjectId($objectId)
        ->setSubjectId($subjectId)
        ->setSubtype($subtype)
        ->setStoreId($storeId);
    $eventModel->save();

    return $this;
} 
```

看看这个`else`块，尤其是这一行：

```
$subjectId = Mage::getSingleton('log/visitor')->getId(); 
```

当访问者由于忽略的用户代理或排除的路由而根本没有被创建/保存时，那么`$subjectId`将是`null`.

由于表列`subject_id`被定义为**NOT NULL**（参见`app/code/core/Mage/Reports/sql/reports_setup`SQL 脚本），`0`最终将被保存。

那是因为 MySQL 的[数据类型默认值](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)。

# r - Delete whole groups or group members

> ID：10916790
> 
> 赞同：1
> 
> 时间：2012-06-06T14:55:45.490
> 
> 标签：r

I am working on a big dataset and have got a problem with data cleaning. My data set looks like this:

```
data <- cbind (group = c(1,1,1,2,2,3,3,3,4,4,4,4,4), 
               member = c(1,2,3,1,2,1,2,3,1,2,3,4,5), 
               score = c(0,1,0,0,0,1,0,1,0,1,1,1,0)) 
```

I just want to keep the group in which the sum of score is equal to 1 and remove the whole group in which the sum of score is equal to 0\. For the group in which the sum of the score is greater than 1, e.g., sum of score = 3, I want to randomly select two group members with score equal to 1 and remove them from the group. Then the data may look like this:

```
newdata <- cbind (group = c(1,1,1,3,3,4,4,4), 
                  member = c(1,2,3,2,3,1,3,5), 
                  score = c(0,1,0,0,1,0,1,0)) 
```

Does anybody can help me get this done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:42:38.513

我会为您编写一个结合各种操作的函数。这是一个这样的功能，大量评论：

```
process <- function(x) {
    ## this adds a vector with the group sum score
    x <- within(x, sumScore <- ave(score, group, FUN = sum))
    ## drop the group with sumScore == 0
    x <- x[-which(x$sumScore == 0L), , drop = FALSE]
    ## choose groups with sumScore > 1
    ## sample sumScore - 1 of the rows where score == 1L
    foo <- function(x) {
        scr <- unique(x$sumScore) ## sanity & take only 1 of the sumScore
        ## which of the grups observations have score = 1L
        want <- which(x$score == 1L)
        ## want to sample all bar one of these
        want <- sample(want, scr-1)
        ## remove the selected rows & retun
        x[-want, , drop = FALSE]
    }
    ## which rows are samples with group sumScore > 1
    want <- which(x$sumScore > 1L)
    ## select only those samples, split up those samples by group, lapplying foo
    ## to each group, then rbind the resulting data frames together
    newX <- do.call(rbind,
                    lapply(split(x[want, , drop = FALSE], x[want, "group"]),
                           FUN = foo))
    ## bind the sampled sumScore > 1L on to x (without sumScore > 1L)
    newX <- rbind(x[-want, , drop = FALSE], newX)
    ## remove row labels
    rownames(newX) <- NULL
    ## return the data without the sumScore column
    newX[, 1:3]
} 
```

与您的数据：

```
dat <- data.frame(group = c(1,1,1,2,2,3,3,3,4,4,4,4,4), 
                  member = c(1,2,3,1,2,1,2,3,1,2,3,4,5), 
                  score = c(0,1,0,0,0,1,0,1,0,1,1,1,0)) 
```

给出：

```
> set.seed(42)
> process(dat)
  group member score
1     1      1     0
2     1      2     1
3     1      3     0
4     3      1     1
5     3      2     0
6     4      1     0
7     4      3     1
8     4      5     0 
```

这是我认为想要的。

**更新：**在`process()`上面，内部函数`foo()`可以重写为仅采样 1 行并删除其他行。即用`foo()`下面的替换：

```
foo <- function(x) {
    scr <- unique(x$sumScore) ## sanity & take only 1 of the sumScore
    ## which of the grups observations have score = 1L
    want <- which(x$score == 1L)
    ## want to sample just one of these
    want <- sample(want, 1)
    ## return the selected row & retun
    x[want, , drop = FALSE]
} 
```

它们本质上是相同的操作，但`foo()`仅选择 1 行会使预期的行为明确；我们想从分数 == 1L 的那些中随机选择 1 行，而不是样本`scr-1`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:25:53.960

我会定义一个函数来做你想做的事。然后使用`ddply`和拆分`group`。

```
myfun <- function(x) {
  if(sum(x$score)==1) {
    return(x)
  } else if(sum(x$score)==0) {
    return(data.frame())
  } else {
    row.names(x) <- NULL
    score.1 <- sample(as.integer(row.names(x[x$score==1,])), nrow(x[x$score==1,])-1)
    return(x[-score.1,])
  }
}

library(plyr)
ddply(as.data.frame(dat), .(group), myfun)

  group member score
1     1      1     0
2     1      2     1
3     1      3     0
4     3      1     1
5     4      1     0
6     4      2     1
7     4      3     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:27:12.830

```
ugroups<-unique(data[,1])
scores<-sapply(ugroups,function(x){sum(data[,1]==x & data[,3]==1)})
data[data[,1]%in%ugroups[scores>0],]
....... etc 
```

会给你每组的累积分数等

# jquery - jQuery判断哪个元素调用函数

> ID：10916794
> 
> 赞同：1
> 
> 时间：2012-06-06T14:56:15.057
> 
> 标签：jquery

假设我有

```
$('#routingNumber').removeClass(validationClass('#routingNumber')); 
```

`validationClass()`（返回确定验证的类的正则表达式在哪里。）

是否有任何方法可以跟踪`validationClass()`在 $("routingNumber") 上调用而无需显式传递参数`#routingNmber`

换个说法，函数`validationClass()`是否可以知道它应该执行正则表达式`#routingNumber`

我想这样做是为了便于使用，在某些情况下这是必要的。

注意：使用`$(this)`as 参数将不起作用，因为删除类的单击事件未绑定到`#rountingNumber`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:06:01.270

`selector`如果我正确理解您的问题，您可以使用jQuery 对象公开的（截至目前未记录）属性。此属性将返回最初传递给的选择器`$()`：

```
var obj = $("#routingNumber");
obj.removeClass(validationClass(obj.selector)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:13:20.490

```
$('#routingNumber').removeClass(function() {
          return validationClass($(this));
}); 
```

或者

```
$('.validateme').removeClass(function() {
          return validationClass($(this));
}); 
```

在这两种情况下，您的函数都应该得到正确的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:26:30.393

您必须像这样定义一个新函数：

```
$.fn.removeValidationClass = function(){
    $(this).removeClass(validationClass($(this)));
    return $(this);
} 
```

如果这样调用，$(this) 的值将是`#routingNumber`您示例中的 div：

```
$('#routingNumber').removeValidationClass(); 
```

# php - How To Resize Images On Upload

> ID：10916796
> 
> 赞同：0
> 
> 时间：2012-06-06T14:56:24.027
> 
> 标签：php

Is there a **PHP** function or someway that you know of that images can be resized proportionally on let say, a upload?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:01:34.137

There is a class of functions called Imagic which uses the ImageMagic tools (If I remember correctly).

You need Imagick::resizeImage, the documentation for which is found [Here.](http://www.php.net/manual/en/imagick.resizeimage.php)

# doctrine-orm - Doctrine query + LIKE expression

> ID：10916797
> 
> 赞同：2
> 
> 时间：2012-06-06T14:56:27.353
> 
> 标签：doctrine-orm, sql-like, dql

I have problems to create a Doctrine Query with LIKE Expression:

**QUERY:**

```
$dql    = "SELECT u FROM Users u JOIN u.group g WHERE g.name LIKE lower('ADMIN')";
$query  = $em->createQuery($dql);
$result = $query->getResult(); 
```

**ERROR:**

```
QueryException: [Syntax Error] line 0, col 147: Error: Expected Doctrine\ORM\Query\Lexer::T_STRING, got 'lower' 
```

LOWER was just an example, I need to use other functions in LIKE EXPRESSION, for example, unnacent...

How can I change Like Expression to support function on both sides?

Example: `LOWER(unaccent(u.login)) LIKE LOWER(unaccent('ADMIN'))`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:13:12.637

like 字符串需要有 % 符号。如果你想要以 ADMIN 开头的东西，那么你会写 ADMIN%，如果你想要以 ADMIN 结尾的东西，你会写 %ADMIN，最后如果你想要它包含 ADMIN，那么它将是 %ADMIN%。

也许要返回一个字符串，您可以使用学说的 CONCAT 函数，也可以通过 PHP 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:19:41.510

我用 QueryBuilder 对此进行了测试，似乎没有解决方案。第二个参数不会带函数，所以我建议切换参数：

```
$dql    = "SELECT u FROM Users u JOIN u.group g WHERE UPPER(g.name) LIKE 'ADMIN'"; 
```

# c - 如何在C中的堆栈上创建一个结构？

> ID：10916799
> 
> 赞同：56
> 
> 时间：2012-06-06T14:56:42.890
> 
> 标签：c, heap-memory, stack-memory

我了解如何`struct`在堆上使用`malloc`. 正在寻找一些关于`struct`在堆栈上创建 C 语言的文档，但所有文档。似乎只在堆上谈论结构创建。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-06T14:59:11.613

与在堆栈上声明任何变量的方式相同：

```
struct my_struct {...};

int main(int argc, char **argv)
{
    struct my_struct my_variable;     // Declare struct on stack
    .
    .
    .
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-06T14:58:04.410

要在堆栈上声明一个结构，只需将其声明为普通/非指针值

```
typedef struct { 
  int field1;
  int field2;
} C;

void foo() { 
  C local;
  local.field1 = 42;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-12-11T09:47:39.197

使用函数回答 17.4 Extra Credit（在 Zed 的“Learn C the Hard Way”一书中）

```
#include <stdio.h>

struct Person {
        char *name;
        int age;
        int height;
        int weight;
};

struct Person Person_create(char *name, int age, int height, int weight)
{
        struct Person who;
        who.name = name;
        who.age = age;
        who.height = height;
        who.weight = weight;

        return who;
}

void Person_print(struct Person who)
{
        printf("Name: %s\n", who.name);
        printf("\tAge: %d\n", who.age);
        printf("\tHeight: %d\n", who.height);
        printf("\tWeight: %d\n", who.weight);
}

int main(int argc, char *argv[])
{
        // make two people structures 
        struct Person joe = Person_create("Joe Alex", 32, 64, 140);
        struct Person frank = Person_create("Frank Blank", 20, 72, 180);

        //print them out and where they are in memory
        printf("Joe is at memory location %p:\n", &joe);
        Person_print(joe);

        printf("Frank is at memory location %p:\n", &frank);
        Person_print(frank);

        // make everyone age 20 and print them again
        joe.age += 20;
        joe.height -= 2;
        joe.weight += 40;
        Person_print(joe);

        frank.age += 20;
        frank.weight += 20;
        Person_print(frank);

        return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-11T21:25:50.093

我让它以这种方式工作：

```
#include <stdio.h>

struct Person {
  char *name;
  int age;
  int height;
  int weight;
};

int main(int argc, char **argv)
{
  struct Person frank;
  frank.name = "Frank";
  frank.age = 41;
  frank.height = 51;
  frank.weight = 125;

  printf("Hi my name is %s.\n", frank.name);
  printf("I am %d yeads old.\n", frank.age);
  printf("I am %d inches tall.\n", frank.height);
  printf("And I weigh %d lbs.\n", frank.weight);

  printf("\n-----\n");

  struct Person joe;
  joe.name = "Joe";
  joe.age = 50;
  joe.height = 93;
  joe.weight = 200;

  printf("Hi my name is %s.\n", joe.name);
  printf("I am %d years old.\n", joe.age);
  printf("I am %d inches tall.\n", joe.height);
  printf("And I weigh %d lbs.\n", joe.weight);

  return 0;
} 
```

# html - 仅使用 CSS 显示隐藏按钮

> ID：10916802
> 
> 赞同：1
> 
> 时间：2012-06-06T14:56:47.200
> 
> 标签：html, css

我正在尝试在 CSS 中模拟手风琴菜单。

由于各种原因，我不能使用 javascript，所以只能使用 CSS。

是否有一些简单的代码可以在单击按钮时显示/隐藏 div

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:23:52.397

如果您正在寻找纯 CSS 手风琴，这篇文章和演示可能会有所帮助...

[https://catalin.red/dist/uploads/2011/05/css3-accordion.html](https://catalin.red/dist/uploads/2011/05/css3-accordion.html)

[https://catalin.red/css3-accordion/](https://catalin.red/css3-accordion/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:13:25.107

我相信它可以用 CSS3 来完成，但并不是所有的浏览器都支持动画。这是我能找到的最好的，明确声明没有 Javascript。

[http://featofdesign.com/stephen/2011/06/16/css3-simple-slideout-accordion-menu/](http://featofdesign.com/stephen/2011/06/16/css3-simple-slideout-accordion-menu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:01:47.333

我不认为你可以让它表现得像没有 javascript 的真正的手风琴。

关于您可以做的最好的事情是使每个菜单选项折叠并在悬停时使其展开，但是一旦您将鼠标悬停，菜单选项将再次折叠。

# list - Retrieve a list of date from a SQL query

> ID：10916804
> 
> 赞同：0
> 
> 时间：2012-06-06T14:57:00.130
> 
> 标签：list, date, ebean

Is it possible to retrieve a `List<Date>` instead of a `List<SomeBean>` using Ebean ?

For example, I have this model:

```
Days(id, name, day); 
```

I'd like to do something like:

```
List<Date> dates = Ebean.createQuery(Date.class, "SELECT day FROM days").findList(); 
```

Of course, this doesn't work and returns this:

> PersistenceException: java.util.Date is NOT an Entity Bean registered with this server?

How can I do that?

# outlook - Where does Outlook load its e-mail icons from?

> ID：10916806
> 
> 赞同：1
> 
> 时间：2012-06-06T14:57:06.013
> 
> 标签：outlook, icons, embedded-resource

Where does Outlook 2010 load these e-mail icons from?

[![Outlook e-mail icons](../Images/72fa03088783e652e590dc5f5730d70e.png)](http://www.howto-outlook.com/howto/icons.htm#E-mail)

I found a lot of icons in outlook.exe and outllibr.dll, but some are not among them.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:12:35.673

我使用以下解决方法来提取图标：

*   激活 Windows 经典主题
*   制作包含所需图标的屏幕截图
*   将窗口背景颜色设置为黑色
*   制作另一个屏幕截图
*   使用[这个 python 脚本](http://www.visitusers.org/index.php?title=Extracting_alpha)来重建 alpha 通道

# javascript - 使用 for 循环在 Canvas 中绘制 img

> ID：10916808
> 
> 赞同：1
> 
> 时间：2012-06-06T14:57:20.363
> 
> 标签：javascript, image, loops, canvas, for-loop

```
var c=document.getElementById("cvs");
var ctx=c.getContext("2d");
var imgArray = [];          
for (var i=0;i<data.length;i++){
    var drawRepeat = Math.floor((data[i]/divider)); 
    imgArray[i] = [];   
    for (var j=0;j<drawRepeat;j++){
            //alert(j);
        var xPos = ((i*30)+10);
        var yPos = 250-((j*30)+30);
        imgArray[i][j] = new Image();
        imgArray[i][j].src="assets/orange.png";
        imgArray[i][j].onload = function(){
        ctx.drawImage(imgArray[i][j],xPos,yPos);
        };

    }
} 
```

我想用 for 循环绘制多个图像。奇怪的是，当我在 for 循环中放置一个 alert() 时它可以工作吗？但如果我将其注释掉，它只会显示图像中的 1 个。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:15:27.013

这就是与闭包有关的问题。给出代码后我会解释。

```
var c = document.getElementById("cvs");
var ctx = c.getContext("2d");
var imgArray = [];
for (var i = 0; i < data.length; i++) {
    var drawRepeat = Math.floor((data[i] / divider));
    imgArray[i] = [];
    for (var j = 0; j < drawRepeat; j++) {
        //alert(j);
        (function (_i, _j) {
            var xPos = ((_i * 30) + 10);
            var yPos = 250 - ((_j * 30) + 30);
            imgArray[_i][_j] = new Image();
            imgArray[_i][_j].src = "assets/orange.png";
            imgArray[_i][_j].onload = function () {
                ctx.drawImage(imgArray[_i][_j], xPos, yPos);
            };
        })(i, j);
    }
} 
```

**更新**：

我做这些奇怪的事情的原因是注册到`onload`事件的函数将被异步调用 - 即循环将继续并且函数将在图像加载时被调用，而不是在那个时刻。所以会发生什么是这个循环继续，一旦它完成（注意这甚至可能在完成之前发生），`i`的值将是`data.length - 1`. 现在，加载了一些图像，然后调用该函数。这个函数指的是`i`（在你给出的代码中），它现在是`data.length - 1`. 因此，只有最后一个图像被绘制。我知道这很令人困惑——即使当我第一次偶然发现闭包时我也感到很困惑。我建议你阅读一些关于它们的好文章，你会看到问题所在。

我们所做的是通过创建一个匿名函数来*创建一个作用域*`i`（专家可能会发现这个表达式有问题），该函数会立即被调用，并将其值`j`作为参数传递 -`_i`并且`_j`（请注意，我们可以使用相同的名称，但为避免混淆，我没有使用相同的名称）。现在，这些是函数本地的，不会改变。因此，当`i`加载图像时，它的 onload 函数被调用，该函数`_i`在数组中绘制图像。

我没有很好地解释它，所以正如我所说，请阅读一些关于闭包的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:05:38.723

预加载图像，而不是使用 onload 处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:08:11.157

```
var c=document.getElementById("cvs");
        var ctx=c.getContext("2d");
        var img = new Image();
        img.src="assets/orange.png";
        img.onload = function(){
            for (var i=0;i<data.length;i++){
                var drawRepeat = Math.floor((data[i]/divider));
                for (var j=0;j<drawRepeat;j++){
                    //alert(j);
                    var xPos = ((i*30)+10);
                    var yPos = 250-((j*30)+30);
                    ctx.drawImage(img,xPos,yPos);
                }
            }
        } 
```

我设法解决了 onload 的问题，方法是将 onload 放在 for 循环之外，并将 drawImage 命令放在 onload 函数和 for 循环中。也可以。

# c# - Matching items stored between the quote marks of the href property of a link tag

> ID：10916810
> 
> 赞同：1
> 
> 时间：2012-06-06T14:57:26.063
> 
> 标签：c#, regex

I'm looking to modify the RegEx pattern below to match items stored between the quote marks of the href property of a link tag:

My conditions are:

*   It can be any URL starting http
*   It must not match anything containing $$

My Current Regular Expression:

```
var pattern = @"(?<name>href)=""(?<value>http[^""]*)"""; 
```

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:29:08.893

试试下面的表达式：

```
(?i)href\s*=\s*"http://(?>((?<InvalidUrlChars>[$]{2})|[^"])*?")(?(InvalidUrlChars)(?!)) 
```

编辑：对上述模式的更详细解释：

(?i) - 这是一个内嵌正则表达式选项。它将表达式设置为不区分大小写。（这样“http”将匹配“HTTP”）

(?>...) - 这是一个原子分组结构。它基本上说，任何被组匹配的东西都不能被匹配。正则表达式会尝试许多不同的路径来查看它是否可以得到匹配。例如，如果没有这个分组结构，我用来消除包含“$$”的匹配项的结构将被规避。

(?...) - 一个命名组。

[^"] - 匹配任何不是引号的字符。

(...|...) - 另一种分组结构。正则表达式将尝试使用管道（“|”）之前的模式查找匹配项。如果无法进行匹配，它将使用管道后面的模式再次尝试。

*? - 这是一场非贪婪的比赛。使用常规“* ”，正则表达式将尝试尽可能多地匹配。“*？” 将尝试尽可能少地匹配。在尝试匹配一组给定符号之间的文本时，它稍微更有效和更有帮助。

(?(InvalidUrlChars)...|...) - if/else 分组结构。使用这种特殊语法，如果命名组 ("(InvalidUrlChars)") 匹配，则管道前面的表达式将被匹配。否则，管道后面的表达式将被匹配。“else”部分是可选的（我没有使用它）。

(?!) - 否定的前瞻断言。我没有足够的空间来描述环视断言，但可以说这个表达式总是会失败。

因此，总而言之，此表达式将匹配任何 URL，但如果 URL 包含双美元符号 ("$$")，则 InvalidUrlChars 组将触发为“匹配”。在表达式的末尾，如果 InvalidUrlChars 组匹配，则整个匹配将失败，原子组将阻止正则表达式返回并将美元符号视为非引号。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/az24scfc](http://msdn.microsoft.com/en-us/library/az24scfc)

比较以下字符串：

```
<a href="http://test.com"/>
<a href="http://test.com" alt="test"/>
<a alt="$$" href="http://test.com"/>
<a HREF="HTTP://test.com"/>
<a href=http://test.com />
<a href="https://test.com"/>
<a href="ftp://test.com"/>
<a href="test.com"/>
<a href="http://test$$.com"/>
<a href="http://////invalid*&amp;^%$#@!;"/> 
```

以下将匹配：

```
href="http://test.com"
href="http://test.com"
href="http://test.com"
HREF="HTTP://test.com"
href="http://////invalid*&amp;^%$#@!;" 
```

编辑：我衷心同意最好使用 HTML 解析器来处理 HTML。正则表达式很糟糕。但是，如果您需要快速解决方案并且您不太关心偶尔的怪癖，那么 Regex 是一个合适的替代品。

# javascript - javascript coding - multiple inputs and outputs, and looking up outputs

> ID：10916811
> 
> 赞同：2
> 
> 时间：2012-06-06T14:57:29.150
> 
> 标签：javascript

I am trying to code the following:

there will be six inputs, say 1,2,3,4,5,6

inputs 2-6 have two possible options (say yes and no)

input 1 has seven possible options (say a-g)

depending on which inputs are selected, a specific output will be generated.

So if you had - a, yes, yes, no, no, no - it would generate outcome 'x'

I have managed to create a list with all the possible input combinations (using python):

```
list = [[23,24,25,26,27,28,29],["male","female"],["true","false"],["true","false"],["true","false"],["true","false"]]

r=[[]]
for e in list:
    table = []
    for item in e:
            for i in r:
                table.append(i+[item])
    r = table

print r 
```

My next stage is to allocate an outcome to each of these options. I guess the best way to do this is just append the output to each list item so that

for e in index, if e[0]-e[5] matches the input then print out e[6]

Is this an ok way to do it?

**EDIT**

Just to make it clearer I just thought I'd explain what I am actually trying to do. It's a free tool for doctors (I'm a doc - it's not for commercial purposes just to improve patient care).

It is a way of calculating risk for the patient, so there will be five questions the doc will input - e.g. male/female etc and depending on their inputs it will produce the outcome as a % risk for the patient. We are using years of previous patient outcome data to produce the table of outcome.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:01:34.207

您可以将输入 2-6 视为 5 位（5 个布尔值），将输入 1 视为 3 个高位（编码 7 个值）。然后从 0 到 223 循环，按照上面的方案对数字进行解码，生成所有可能的组合。

# c++ - dll 在调试模式下，在发布模式下调用程序（反之亦然）

> ID：10916816
> 
> 赞同：6
> 
> 时间：2012-06-06T14:57:54.880
> 
> 标签：c++, dll

我正在编写一个测试 C dll 的小型 C++ 程序，其中包含一些函数。这些 dll 存在于调试版本和发布版本中，我想用同一个程序加载它们并将它们与以前的版本进行比较。

问题是，当我用 release config 编译我的程序时，它只能使用也是 release 的 dll，而当我使用 debug config 编译程序时，它只能使用也是 debug 的 dll。

我使用 LoadLibrary 和 GetProcAddress 函数加载 dll/函数。

有两种类型的函数： `void type1(int&)`和`void type2(vector<string>*)`。无论配置如何，类型 1 都可以正常工作。但是类型 2 仅在配置匹配时才有效。

代码：

```
`typedef void(*GetNames)(vector`<string>*`);
GetNames get_var_names = (*GetNames)GetProcAddress(dll,"get_var_names");
vector`<string>` var_names;
get_var_names(&var_names);` 
```

`最后一行是程序失败并出现类似“0xC0000005：访问冲突读取位置0xbaadf008”的错误。如果调用程序和dll的配置不匹配。当程序正在发布并且dll正在调试时，该错误是读取冲突，但是当程序正在调试并且dll正在发布时，错误是写入冲突。`

 `该函数应该做的只是用不同的字符串调用 push_back("x") 几次。

在发布配置程序中使用调试dll似乎并非完全不可能，或者类型1的所有功能也不起作用，因此它似乎与向量或字符串类有关。

任何人都知道如何解决这个问题，或者我唯一的选择是使用具有不同配置的两个可执行文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:07:41.093

许多（如果不是全部）STL 类对调试构建使用不同的布局。因此，您不能在程序的 RELEASE 构建中使用来自 dll 的调试编译类（如 std::string 和 std::vector），反之亦然。

应避免在 dll 的接口中使用 STL 类型/类，而应使用内置类型。在这种情况下，您将永远不会遇到这些问题。

顺便说一句：我当然是在谈论 MSVC++（我不知道的其他编译器）。`

# ruby-on-rails - content_for 值周围的额外空格

> ID：10916817
> 
> 赞同：2
> 
> 时间：2012-06-06T14:57:55.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, whitespace, render, content-for

我需要给我的正文标签一个特定于页面的 id，以更好地定位 css 选择器。

为此，我在 application.erb 布局中设置了以下内容：

```
<body id="<%= content_for :page_id %>"> 
```

在页面视图中，我可以这样做：

```
<% content_for :page_id do %>
  <%='some-page-id'%>
<% end %> 
```

问题是我在返回值周围返回了额外的空格，导致渲染的正文标记看起来像这样：

```
<body id="    some-page-id " > 
```

这会阻止 id 工作。我有一个解决方法：

```
<% body_id = content_for :page_id %>
<body id="<%= body_id.strip %>"> 
```

但是有没有办法解决这个问题，以便 content_for 在没有额外空格的情况下返回它的值？是什么导致这个额外的空白被返回？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T15:49:03.937

不要使用额外的 ERB 分隔符来设置内容

```
<% content_for(:page_id) { "thepageid" } %> 
```

您可以更进一步并定义一个辅助方法

```
# in app/helpers/application_helper.rb
def page_id(page_id)
  content_for(:page) { page_id }
end

# in your template
<% page_id("thepageid") %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T15:02:06.163

> 是什么导致这个额外的空白被返回？

空间

```
<% content_for :page_id do %>
  <%='some-page-id'%>
<% end %> 
```

你可以试试这个：

```
<%- content_for :page_id do -%>
  <%='some-page-id'%>
<%- end -%> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T15:05:09.310

你总是可以使它成为一个单线：

```
<body id="<%= content_for(:page_id).strip %>"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:04:22.623

这是 Rails 的正常行为，我建议你在 content_for 中添加“id=”

```
<body "<%= content_for :page_id %>">

<% content_for :page_id do %>
  <%='id="some-page-id"' %>
<% end %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T15:09:33.940

@OscarDelBen 是正确的：

这是有效的：

```
<% content_for :page_id do %><%='some-page-id'%><% end %> 
```

# c# - How to secure a WCF service for Project Server?

> ID：10916822
> 
> 赞同：0
> 
> 时间：2012-06-06T14:58:08.207
> 
> 标签：c#, wcf, visual-studio-2010, web-services, project-server

I have a WCF service that collects and return the data from a Project Server database. The service will be online, so not everyone should have access to the service. What kind of security or authentication should I implement ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:02:21.543

集成域安全请参阅 MSDN WCF 安全页面

我会在一个组中运行该应用程序，或者以具有最低所需权限的用户身份运行该应用程序。

[http://msdn.microsoft.com/en-us/library/ms735093.aspx](http://msdn.microsoft.com/en-us/library/ms735093.aspx)

如果机器在虚拟机中，您甚至可以在技术上创建一个命名管道端点，然后将其公开给子机器......但这是更高级的，您会丢失一些 TCP 绑定选项。

您还可以在主机上创建一个环回适配器，然后根据来源使用该适配器转发到服务端点。然后你会将适配器暴露给孩子们..

这完全取决于安全性的重要性以及您最终要实现的目标……例如，移动设备是否会成为一个问题……

# c - How retrieve multiple args for one option using getopt

> ID：10916826
> 
> 赞同：0
> 
> 时间：2012-06-06T14:58:16.853
> 
> 标签：c, parsing, gcc, libc, getopt

How to retrieve multi args for one option using getopt in libc ?

./a.out -t 42 -n toto titi tata -a address

```
#include <unistd.h>                                                                                                                                                         
#include <stdio.h>
#include <stdlib.h>

int main(int ac, char **av)
{
  int opt;

  while ((opt = getopt(ac, av, "t:n:a:")) != -1) {

     switch (opt) {
        case 't':
          printf("time = %s\n", optarg);
          break;

        case 'n':
          /* HOW RETRIEVE HERE ALL OTHER NAME ?*/
          printf("name = %s\n", optarg);
          break;

        case 'a':
          printf("address = %s\n", optarg);
          break;

         default:
          fprintf(stderr, "Usage : %s [-t time] [-a name1 name2 ...] [-s address]", av[0]);
          return EXIT_FAILURE;
        }
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:39:13.207

尝试使用引号：

```
./a.out -t 42 -n "toto titi tata" -a address 
```

# html - 根据屏幕宽度在 IE7 中切换 CSS 表格不起作用

> ID：10916827
> 
> 赞同：0
> 
> 时间：2012-06-06T14:58:21.317
> 
> 标签：html, css

我正在使用以下在 IE7 中不起作用的内容。

```
<!-- styles to use for small screens, such as phones -->
<link rel="stylesheet" media="screen and (max-width:480px)" href="phone.css">

<!-- styles to use for medium screens, such as tablets -->
<link rel="stylesheet" media="screen and (min-width:481px) and (max-width:800px)" href="tablet.css">

<!-- styles to use for larger screens, such as desktops and laptops -->
<link rel="stylesheet" media="screen and (min-width:801px)" href="styles.css"> 
```

我想知道为什么这在IE7中不起作用？有没有办法在一个样式表中完成这一切......这将在 IE 中工作？

谢谢

我最终这样做了，以便将 IE8（及以下）直接驱动到我的标准样式表：

```
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="styles.css" />
<![endif]-->

<!--[if lte IE 8]>
<link rel="stylesheet" type="text/css" href="styles.css" />
<![endif]-->

<!-- styles to use for small screens, such as phones -->
<link rel="stylesheet" media="screen and (max-width:480px)" href="phone.css">

<!-- styles to use for medium screens, such as tablets -->
<link rel="stylesheet" media="screen and (min-width:481px) and (max-width:800px)" href="tablet.css">

<!-- styles to use for larger screens, such as desktops and laptops -->
<link rel="stylesheet" media="screen and (min-width:801px)" href="styles.css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:02:33.500

我认为您的“代码”没有正确粘贴。

另外，我假设您正在尝试对 IE 使用媒体查询。IE 不支持媒体查询并且不会读取它们。它基本上会跳过它们。

现在，您可以使用像 respond.js 这样的库。从它的描述来看：

“用于最小/最大宽度 CSS3 媒体查询的快速轻量级 polyfill（适用于 IE 6-8 等）” [Respond.js 页面](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:31:27.943

您可以将部分 CSS 代码设置为特定于浏览器。

**[此页面](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)**包含有关如何执行此操作的信息！

# sql-server - Nagios 使用 check_mssql_health 检查所有实例

> ID：10916829
> 
> 赞同：1
> 
> 时间：2012-06-06T14:58:30.183
> 
> 标签：sql-server, nagios

如何让 Nagios 检查 SQL Server 的所有实例`check_mssql_health`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T01:08:45.773

您是否尝试过以下操作？

与 perl Sybase 模块连接可能有些棘手。我终于通过这种方式获得了成功的连接：

```
1 - Edit /etc/freetds/freetds.conf

[sqlhost1]
host = 192.168.1.1
port = 1433
tds version = 8.0

2 - Use the --server command line option instead of the --hostname option:

check_mssql_health --server=sqlhost1 --username=nagiosuser --password=nagiospass --mode connected-users 
```

# sql-server - 将 INFORMATION_SCHEMA.COLUMNS COLUMN_DEFAULT 转换为基础数据类型

> ID：10916830
> 
> 赞同：2
> 
> 时间：2012-06-06T14:58:34.520
> 
> 标签：sql-server, sql-server-2008, tsql

我的一个表中有一个 smalldatetime 列，默认值为 2012 年 1 月 1 日。

稍后我想检查实际的默认值是否已设置为正确的值。但是，当我从 INFORMATION_SCHEMA.COLUMNS 读回值时，sql 添加了格式。以下代码演示了我的问题

```
DECLARE
  @Requireddefaultdate smalldatetime = 'Jan 1 2012',
  @Actualdefaultdate smalldatetime,
  @Actualdatestring nvarchar (128) ;

CREATE TABLE dbo.mytable 
       (thedate smalldatetime CONSTRAINT df_mytable_thedate DEFAULT 
        CAST('Jan 1 2012' AS smalldatetime)
 ) ;

INSERT INTO mytable DEFAULT VALUES;

SET @Actualdatestring = (SELECT column_default
                       FROM information_schema.columns
                       WHERE table_name = 'mytable') ;

PRINT @Actualdatestring; --result: (CONVERT([smalldatetime],'Jan 1 2012',0))

--Now I would like to convert @actualdatestring to smalldatetime  
--so I can compare it to @requireddefaultdate

SET @Actualdefaultdate = @Actualdatestring; -- gives error 'Conversion failed 
-- when converting character string to smalldatetime data type.'

SET @Actualdefaultdate = CAST((@Actualdatestring)AS smalldatetime); 
--gives same error as above

--Added below - this is the script I used for dynamic sql
declare @dynsql nvarchar(500), @paramdef nvarchar(500);
--  SET @dynsql = N'Set @param_actdate = CAST(@param_defaultstr AS smalldatetime)';
--Above line changed as below in response to comment/answers. 
--Now get single error: Incorrect syntax near '=' but seems to be closer to a correct solution.
SET @dynsql = ' ''Set '' + @param_actdate + '' = (Select  '' +  @param_defaultstr + '' )'' ';

SET @paramdef = N'@param_actdate = @Actualdefaultdate output, 
@param_defaultstr = @Actualdatestring';

EXECUTE sp_executesql @dynsql, @paramdef, 
@param_actdate = @Actualdefaultdate output, @param_defaultstr = @Actualdatestring;

--finally drop the table
DROP TABLE dbo.mytable; 
```

我还尝试使用带有参数的 sp_executesql 进行转换，但没有成功（上面添加的脚本）。

我可以进行字符串操作以仅提取 @actualdatestring 的日期部分，但我觉得必须有一种更优雅的方法，而且我遗漏了一些明显的东西

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:10:54.050

```
DECLARE 
  @Requireddefaultdate smalldatetime = 'Jan 1 2012', 
  @Actualdefaultdate smalldatetime, 
  @Actualdatestring nvarchar (128) ; 

CREATE TABLE dbo.mytable  
       (thedate smalldatetime CONSTRAINT df_mytable_thedate DEFAULT  
        CAST('Jan 1 2012' AS smalldatetime) 
 ) ; 

INSERT INTO mytable DEFAULT VALUES; 

SET @Actualdatestring = (SELECT column_default 
                   FROM information_schema.columns 
                   WHERE table_name = 'mytable') ; 

PRINT @Actualdatestring; --result: (CONVERT([smalldatetime],'Jan 1 2012',0)) 
exec('select ' + @actualdatestring)
DROP TABLE dbo.mytable; 
```

有点讨厌，因为它使用动态 SQL，但这可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:07:33.137

我还没有完全得到答案，但这是我大大改进（和更短）的脚本。现在我要做的就是弄清楚为什么当我从结果窗格中复制字符串内容时它可以正常工作，但是当我使用字符串本身时却不行。当我到达那里时，我会发布我的最终答案。再次感谢您的帮助。

```
DECLARE 
  @Requireddefaultdate smalldatetime = 'Jan 1 2012', 
  @Actualdefaultdate datetime, 
  @Actualdatestring nvarchar (128),
  @dynql nvarchar(500), @paramdef nvarchar(500) ; 

CREATE TABLE dbo.mytable  
   (thedate smalldatetime CONSTRAINT df_mytable_thedate DEFAULT  
    CAST('Jan 1 2012' AS smalldatetime) 
 ) ; 
 INSERT INTO mytable DEFAULT VALUES; 

SET @Actualdatestring = (SELECT column_default 
                   FROM information_schema.columns 
                   WHERE table_name = 'mytable') ; 
--replace single quotes with double quotes for inclusion in dynamic sql string
SET @Actualdatestring = REPLACE (@Actualdatestring, '''', '''''') ;
print @Actualdatestring; --prints (CONVERT([smalldatetime],''Jan 1 2012'',0))
--copy the contents of @Actualdatestring from the results pane into the dynamic sql string
SET @dynsql  = 'Set @param =  (select (CONVERT([smalldatetime],''Jan 1 2012'',0)))'; -- works OK
--SET @dynsql  = 'Set @param =  (select @Actualdatestring)'; -- doesnt work,get conversion error
set @paramdef = N'@param smalldatetime output, @param2 nvarchar(128)'
EXECUTE sp_executesql @dynsql, @paramdef, @param = @Actualdefaultdate output, @param2 = @Actualdatestring;

if(@Actualdefaultdate <> @Requireddefaultdate)
begin
  print 'Error';
end
else
begin
  print 'OK'
end

--finally drop the table 
DROP TABLE dbo.mytable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:33:17.470

我终于有事干了。我得出的结论是 sql 对字符串的内容很满意，但是当我使用字符串变量本身时，sql 声明了一个覆盖错误。所以我的方法是在调用 sp_executesql 之前嵌入字符串内容。

```
DECLARE 
  @Requireddefaultdate smalldatetime = 'Jan 1 2012', 
  @Actualdefaultdate datetime, 
  @Actualdatestring nvarchar (128),
  @dynsql nvarchar(500), @paramdef nvarchar(500) ; 

CREATE TABLE dbo.mytable  
   (thedate smalldatetime CONSTRAINT df_mytable_thedate DEFAULT  
    CAST('Jan 1 2012' AS smalldatetime) 
 ) ; 
 INSERT INTO mytable DEFAULT VALUES; 

SET @Actualdatestring = (SELECT column_default 
                   FROM information_schema.columns 
                   WHERE table_name = 'mytable') ; 
--embed any string variables that need to be concatenated before calling sp_executesql
SET @dynsql  = 'Set @param =  (select ' + @Actualdatestring + ')'; 
set @paramdef = N'@param smalldatetime output'
EXECUTE sp_executesql @dynsql, @paramdef, @param = @Actualdefaultdate output;

if(@Actualdefaultdate <> @Requireddefaultdate)
begin
  print 'Error';
end
else
begin
  print 'OK'
end

--finally drop the table 
DROP TABLE dbo.mytable; 
```

# pdf - excel 2007：错误 5，尝试打开 foxit 阅读器时过程调用或参数无效

> ID：10916831
> 
> 赞同：0
> 
> 时间：2012-06-06T14:58:38.327
> 
> 标签：pdf, excel, vba

我有一个包含两列的excel，一列是pdf文件的相对路径，另一列是我要打开的数字页。

在一台计算机上，excel 工作正常，当我连续双击时，excel 调用 foxit 阅读器并打开文档。

但是，我有其他计算机无法使用此 excel。我收到错误 5：无效的过程调用或参数。

它如何在一台没有问题的计算机上工作，我认为问题出在另一台计算机上，而不是 VBA 代码中，但我不知道可能是什么问题。

哪个可能是导致此错误的原因？

在两台计算机中，我都使用 excel 2007，并在提示时启用了宏。在运行良好的计算机中，我使用的是 windows 7 x64，而在另一台计算机中，我使用的是 windows 7 x86。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:14:09.010

好吧，问题似乎出在文件的路径上，我需要在其中使用双引号来解决问题。就我而言，我有三个字符串变量：

```
pathReader: the path to the foxit
pathDocument: the path to the pdf document
numberPage: has /A page=x where x is the number page that I have in the cell. 
```

然后我创建一个命令：

```
command = """" & pathReader & """" & " " & """" & pathDocument & """" & " " & numberPage 
```

最后我执行命令

```
Shell command, vbMaximizedFocus 
```

带数字的页不需要使用双引号。

似乎在某些计算机中，文件路径可能存在问题，可能是空格问题，因此使用双引号可以解决问题。

根据我的经验，这个问题并不总是在所有计算机中发生，但最好使用这个解决方案，因为它更通用。

# asp.net - 将 DotNetNuke CMS 添加到 Asp.Net MVC 站点

> ID：10916845
> 
> 赞同：0
> 
> 时间：2012-06-06T14:59:28.977
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, dotnetnuke

我有一个用 Asp.Net MVC 开发的网站。我想添加一个 DotNetNuke CMS 应用程序或类似的应用程序，以便我的客户可以自己进行一些内容编辑。是否可以将 dnn 集成到 asp.net mvc 站点中？如果是这样，或者如果不是，最好的方向是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:38:25.370

在这种情况下，“整合”是模糊的。您可以为营销和信息服务运行 DNN 站点，然后根据需要创造性地链接到您的 MVC 应用程序，并使它们的外观和感觉相同。但是，您将无法真正让 DNN 在您的 MVC 应用程序中运行。

你可以看看： [http](http://umbraco.com/) ://umbraco.com/ 或 [http://atomiccms.codeplex.com/](http://atomiccms.codeplex.com/)

这些都是 MVC ......但我仍然不确定你是否真的想将它们混合在一起。您最好使用 Umbraco 甚至 DNN（请参阅 CAbbott 的链接）并使用 DNN 或某些框架作为核心，然后在其上构建您的应用程序。

# ios - 带有更多文本字段的 UIAlertViewStyleLoginAndPasswordInput？

> ID：10916847
> 
> 赞同：0
> 
> 时间：2012-06-06T14:59:36.677
> 
> 标签：ios, objective-c, cocoa-touch, ios5, uialertview

是否可能向 UIAlertViewStyleLoginAndPasswordInput 添加更多 TextField？
我该怎么办？
还是有其他可能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-06T18:34:34.447

是的，你可以这样做

```
 UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@"Your title here!" message:@"this gets covered" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
UITextField *myTextField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
[myTextField setBackgroundColor:[UIColor whiteColor]];
[myAlertView addSubview:myTextField];
[myAlertView show];
[myAlertView release]; 
```

希望这可以帮助。

# html - Crop image to canvas

> ID：10916850
> 
> 赞同：1
> 
> 时间：2012-06-06T14:59:45.710
> 
> 标签：html, canvas, crop, jcrop

I have 2 divs

```
<div id="image-orig">
    <img src="image_example.jpg"/>
</div>

<div id="image-crop">
    <canvas id="preview" style="width:548px;height:387px"></canvas>
</div> 
```

image_example.jpg can be image any size.

```
 function updatePreview(c) {
        if(parseInt(c.w) > 0) {
            var orig = $("#image-orig img")[0];
            var canvas = $("#image-crop canvas")[0];
            var context = canvas.getContext("2d");

            context.drawImage(orig,
                c.x*coeff,c.y*coeff,c.w*coeff,c.h*coeff,
                0,0,canvas.width,canvas.height
            );
        }
     }

    $(function(){
            $('#image-orig img').Jcrop({
                onSelect: updatePreview,
                onChange: updatePreview,
                aspectRatio : parseFloat($('#image-orig img').width()/$('#image-orig img').height())
            });
    }); 
```

coeff - it's coefficient if size image larger div preview.

That's problem: [http://dbwap.ru/3725988.png](http://dbwap.ru/3725988.png)

In second div (canvas). Quality image very low.

**SOLUTION IS FOUND**

```
 canvas.width = c.w*coeff;
            canvas.height = c.h*coeff;

            context.drawImage(orig,
                c.x*coeff,c.y*coeff,c.w*coeff,c.h*coeff,
                0,0,c.w*coeff,c.h*coeff
            );
            $(that.el).find("#ImageCode").attr('src', canvas.toDataURL());
            $(that.el).find("#ImageCode").show(); 
```

I'm just creating image tag and copying from canvas to image.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:10:44.200

如果您有权访问 .net，则可以使用 JCrop 修改新图像的保存方式：http: [//mironabramson.com/blog/post/2009/04/Cropping-image-using-jQuery,-Jcrop-and- ASPNET.aspx](http://mironabramson.com/blog/post/2009/04/Cropping-image-using-jQuery,-Jcrop-and-ASPNET.aspx)

**无需使用服务器端 (.net / php) 即可为您提供的解决方案：**

首先，确保在使用 JCrop 时启用了 html5 画布图像平滑：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)

如果已经设置或没有效果，那么我认为您唯一可以通过每个浏览器调查图像选项的其他选项：

**在 Mozilla 中启用平滑**- 以本文为例（查找“mozImageSmoothingEnabled”）：[https ://developer.mozilla.org/en/Canvas_tutorial/Using_images#Controlling_image_scaling_behavior](https://developer.mozilla.org/en/Canvas_tutorial/Using_images#Controlling_image_scaling_behavior)

**在 IE 中应用过滤器**：http : [//code.flickr.com/blog/2008/11/12/on-ui-quality-the-little-things-client-side-image-resizing/](http://code.flickr.com/blog/2008/11/12/on-ui-quality-the-little-things-client-side-image-resizing/)

*注意：可能有某种 Flash 解决方案可以工作，但将任何 Flash 解决方案与 JCrop 和 html5 画布结合起来可能太困难了。*

# ruby-on-rails-3 - 如何在 rails3 中使用模板渲染集合？

> ID：10916851
> 
> 赞同：0
> 
> 时间：2012-06-06T14:59:51.417
> 
> 标签：ruby-on-rails-3

如果 app/views/posts/ 中有 _post.html.erb，我可以`<%= render @posts %>`在 app/views/posts/index.html.erb 中输入，但如果 app/views/users/posts 中的 _post.html.erb 文件/， 怎么写？

我试过`<%= render @posts, :template => 'users/posts/post' %>`了，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:04:44.987

```
<%= render :partial => 'users/posts/post', :collection => @posts %> 
```

# css - 图例在 IE7 和 8 中重叠边框但不是 9

> ID：10916860
> 
> 赞同：0
> 
> 时间：2012-06-06T15:00:24.823
> 
> 标签：css, internet-explorer-8, internet-explorer-7, legend, fieldset

我在 IE7 和 IE 8 的字段集中包含图例时遇到问题。

基本上我有一组带有以下 CSS 的字段集：

```
fieldset {
    padding: 10px;
    border-top: 1px solid silver !important;
} 
```

对于传说：

```
legend {
    float: left;
} 
```

我没有对图例应用 clearfix 或任何东西，因为它们在所有其他浏览器中都很好。它们是字段集中的第一个元素，我不知道任何浮动问题实际上会导致它们浮动在容器上方或顶部的错误（当然，我们都听说过常见的浮动下降，它们在下面显示这种行为容器）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:03:08.267

样式`legend`元素目前是痛苦的且非跨浏览器。使用另一个元素（如`DL/DT`or `H4`）而不是`legend`.

大多数样式问题`legend`可以通过使用 wrapper for`legend`并将样式应用于 wrapper 而不是`legend`自身 ( `<div><legend></legend></div>`) 来解决，但这目前是[无效](https://www.w3.org/Bugs/Public/show_bug.cgi?id=12834)的（在 WG 问题跟踪器中有一个相应的 [unresolved yet] [issue #200 ）。](http://www.w3.org/html/wg/tracker/issues/200)

# c# - Static Repositories - Workaround

> ID：10916861
> 
> 赞同：4
> 
> 时间：2012-06-06T15:00:26.817
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller, inversion-of-control

First, some background. We have recently taken on a large MVC3 project. The project was pretty much ready to go live some time ago, then the client decided they wanted to re-theme the whole website and add a load more functionality. They employed us to re-theme the site, finish off the remaining functionality and deploy it.

Generally it is built using a very clear, ordered approach, with one repository for each database table and a clear service layer, however there are some oddities that are making me slightly uncomfortable. The main oddity that keeps on nagging at me is that every single repository and service in the application is completely, 100% static (yes, including methods that write to the db). Of course, this doesn't allow for unit testing, however a greater concern is the potential bottlenecks and threading issues that will cause when the application comes under a heavy load. I am already seeing some unexplained delays in processing requests on the stage server, and that is with a trickle of testing traffic.

The application is so huge that rebuilding it to use IOC/instantiated-per-request repositories is pretty much out of the question.

What can I do to avoid potential threading issues upon deployment? Could i use a connection pool and borrow a db connection each time a write needs to happen?

Thanks in advance :)

Edit - here is some of the code that creates an instance of the entity model. Each static method calls this 'DemoEntities' method to obtain an instance of the entity model, which it then uses to execute the db commands. I can see here that, though the method is static, it is actually checking the HttpRequest for a pre-existing instance and creating one if it doesn't already exist. As such, I think we'll be ok.

```
 public static DemoEntities DemoEntities
   {
       get
       { 
           if (HttpContext.Current != null && HttpContext.Current.Items["DemoEntities"] == null) 
           {
               HttpContext.Current.Items["DemoEntities"] = new DemoEntities(); 
           }
           return HttpContext.Current.Items["DemoEntities"] as DemoEntities;
       }
       set
       {
           if (HttpContext.Current != null)
               HttpContext.Current.Items["DemoEntities"] = value;
       }
   } 
```

`

Pat

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:05:18.163

我在这里假设您的存储库类仅包含静态方法，而不包含任何静态状态。

无状态静态类的好处是它们可以安全地转换为具有默认无参数构造函数的常规类，并且无需担心它们的生命周期。然后，提取用于测试目的的接口将是一个简单的案例。

每当您需要与存储库通信时，只需实例化一个。

除非应用程序在存储库使用期间使用共享状态做某事，否则您不需要担心多线程访问。数据库本身负责处理许多并发调用。

目前所有的瓶颈和线程问题都是潜在的，有时我们对可能出错的有根据的猜测*本身就是*错误的——尤其是多线程。速度变慢可能仅仅是因为数据库没有处理太多请求的能力。

# entity-framework - How to catch Exceptions from System.Data namespace?

> ID：10916865
> 
> 赞同：0
> 
> 时间：2012-06-06T15:00:34.463
> 
> 标签：entity-framework, exception-handling

I started using Entity Framework 4.3.1 with code first approach.

I want to avoid application crash when database server is shut down or unavailable catching specific exceptions. Imagine this short sample piece of code:

```
using (var db = new MyContext())
{
     var people = new People();
     db.People.AddObject(people);
     db.SaveChanges();
} 
```

When server is shut down, I receive ProviderIncompatibleException. If I try to modify code catching ProviderIncompatibleException like this

```
using (var db = new MyContext())
{
     try
     {
         var people = new People();
         db.People.AddObject(people);
         db.SaveChanges();
     }
     catch(ProviderIncopatibleException)
     {
     }
} 
```

I receive compiler error "The type caught or thrown must be derived from System.Exception". How can I catch most specific Exception using Entity framework? Thank you for help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:04:37.693

类名中有一个错字 - 您在不兼容中漏掉了一个“m”。

再试一次`ProviderIncompatibleException`

# git - 如何在当前 HEAD 和来自推送的最新文件之间的预接收挂钩中获取文件的 git diff？

> ID：10916871
> 
> 赞同：2
> 
> 时间：2012-06-06T15:00:51.293
> 
> 标签：git, diff, hook, gitolite

如何`git diff`在 A 和 B 之间的预接收挂钩中获得 a？

*   A.（`somefile.ext`查看的最新版本）服务器上的当前 HEAD
*   B.（`somefile.ext`查看的最新版本）从预接收挂钩接收到的树

我需要这个，因为当某些文件更改（在 Gitolite 服务器上）时，我们希望通过电子邮件收到通知并查看 A 和 B 之间的差异。

环境：Ubuntu server 11 + Gitolite + pre-receive hook

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:03:32.073

我认为您实际上想使用 post-receive，因为 pre-receive 主要用于拒绝更新和 post-receive 通知（这似乎是您想要做的）。

两者都获得相同的输入（通过标准输入），并且记录在[githooks(5)](http://gitmanual.org/githooks.html#pre-receive)
中。输入是更新的 ref 及其新旧提交哈希的列表。
你可以使用这些数据来做你的`git diff`

# jquery-plugins - jQuery edge to edge circular slider/carousel

> ID：10916874
> 
> 赞同：0
> 
> 时间：2012-06-06T15:01:00.350
> 
> 标签：jquery-plugins, carousel

I am working on developing a jQuery slider that goes edge to edge on any screen width and is circular (so you can just keep going in either direction). Is there anything prebuilt for this? You can see my attempt at [http://siegedesign.com/io-dev/payoff/](http://siegedesign.com/io-dev/payoff/). It has a number of issues so I'm looking for alternatives.

# c++ - SDL linking error with linux g++

> ID：10916880
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:01:14.543
> 
> 标签：c++, linux, g++, sdl

[Here is the error I get from my terminal when I try to compile the code](http://i.stack.imgur.com/dFCaz.png)

```
/*This is the init file that controls all the major background processes
will contain major bliting of backgrounds,surfaces, and handle collision
*/
#ifndef_init_H_
    #define _init_H_

#include <SDL>

class init{
    private:
        bool Running;
        SDL_Surface* Surf_Display;
    public:
        init();
        int OnExecute();
    public:
        bool OnInit();
        void OnEvent(SDL_Event* Event);
        void OnLoop();
        void OnRender();
        void OnCleanup();
}; 
```

here is the code I pretty much copied from sdltutorials.com if you are wondering about it. I used their basic tutorial. I think there might be a linking error with sdl and my OS but not sure.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:15:31.340

列出了两个错误 - 在第一个之后需要一个空格`#ifndef`，并且您的编译器似乎找不到 SDL 头文件 - 也许它们没有安装，或者您需要 -Ipath/to/SDL/include 编译器选项，因此它看起来在正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T18:04:18.337

首先，您可能需要确保一开始就安装了 SDL。我不会浪费您的时间浏览所有特定于发行版的内容。我假设你知道你在做什么。修正错别字后，您可能会使用 pkg-config。通过键入以下命令在命令行上调用它：

```
$ g++ source.cpp -o program `pkg-config --cflags --libs sdl` 
```

** 注意使用 ` 而不是 '。当然，-o 标志和所有爵士乐我相信你很熟悉。pkg-config 将适当的标志添加到命令行，这样您就不必担心手动列出所有必要的命令行参数。当然，所有 *.pc 文件的可用性会因发行版而异，但使用 Ubuntu 12.04，上述命令有效。根据我的经验，pkg-config 经过适当调整以在您的系统上运行，无论是什么发行版。如果您想了解幕后实际发生的情况，只需键入：

```
$ pkg-config --cflags --libs sdl 
```

# c++ - opencv - image stitch use of vector > rois

> ID：10916883
> 
> 赞同：0
> 
> 时间：2012-06-06T15:01:22.000
> 
> 标签：c++, opencv, image-stitching

I'm having trouble specifying the "region of interests" to perform feature finding in image stitching method (Stitcher::stitch). I get the following error

"OpenCV Error: Assertion failed (0 <= roi.x && 0 <= roi.width && roi.x + roi.width <= m.cols && 0 <= roi.y && 0 <= roi.height && roi.y + roi.height <= m.rows) in Mat, file /Users/Aziz/Documents/Projects/opencv_sources/trunk/modules/core/src/matrix.cpp, line 308 terminate called throwing an exception"

but when I checked the regions and the image cols and rows, it seems to be fine. Any help of suggestion would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:34:16.217

OpenCV 2.4.0 在`Stitcher::Status Stitcher::matchImages()`方法 (stiicher.cpp) 中存在错误：算法缩放输入图像但输入 roi 保持不变。

# iphone - UIWebView's baseURL set to NSDocumentDirectory?

> ID：10916885
> 
> 赞同：1
> 
> 时间：2012-06-06T15:01:25.273
> 
> 标签：iphone, ios

Is it possible to set the baseURL of a UIWebView to NSDocumentDirectory? If yes, how does one do that?

What I'm trying to do is to display some downloaded images locally in the /img src=""/ tag.

Thanks in advance for any suggestions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:05:29.423

要在 webview 中加载本地文件，请执行以下操作

```
NSString *imagePath = [[NSBundle mainBundle] resourcePath];
imagePath = [imagePath stringByReplacingOccurrencesOfString:@"/" withString:@"//"];
imagePath = [imagePath stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

NSString *HTMLData = @"
<img src="YOUR_IMAGE.jpg" alt="" width="100" height="100" />";

[webView loadHTMLString:HTMLData baseURL:[NSURL URLWithString: [NSString stringWithFormat:@"file:/%@//",imagePath]]]; 
```

这应该在 UIWebView 中加载 YOUR_IMAGE.jpg 阅读更多来自 [http://dblog.com.au/iphone-development/loading-local-files-into-uiwebview/](http://dblog.com.au/iphone-development/loading-local-files-into-uiwebview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:31:38.530

您可以尝试执行此人所做的操作：[UIWebView: Absolute path for images in app documents folder](https://stackoverflow.com/questions/3237420/uiwebview-absolute-path-for-images-in-app-documents-folder)

基本上，它使用图像源的文档目录路径，而不仅仅是 img src="image_name"

# macos - tail -f all files in a directory over time

> ID：10916888
> 
> 赞同：0
> 
> 时间：2012-06-06T15:01:30.857
> 
> 标签：macos

I need to monitor a directory for new files that are added (constantly: one or two every 5 seconds are added and deleted).

It would be nice to tail them constantly in terminal, but since this seems unlikely, it would be also good to append all of the tails to a file. That way when I stop my process I can review all of the files that were added and deleted (I need the contents not the filename).

A shell script will work as well as long as it will run on Mac OSX Lion.

Any help? I've tried multi-tail and tail -f (but these don't monitor the directory for new files).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:07:47.530

也许 xtail ？它可以在 osx 上使用 homebrew 或 macports 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:23:14.073

CoreServices 提供了监视目录更改的方法。

[Apple 的 Carbon 文档](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/File_Manager/Reference/reference.html)非常好，但我似乎无法链接到特定功能。搜索`FNSubscribeByPath`。

如果您确实需要查看添加的文件的内容，那么您可以编写一个使用 FNSubscribeByPath 的工具来告诉您目录何时更改以及更改了什么，然后`tail -f`是文件。

您可能应该有一些东西来跟踪已启动的“tail -f”实例，以便在删除文件时可以杀死它们。否则，您的进程表最终将填满。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:43:49.717

您应该可以为此使用logstash。它将为您提供一组输入（例如文件）的事件流，并为您提供可以推送到另一个输出（例如文件）的数据流。它还将为您提供许多未来增长的选择，同时在短期内易于设置。

[http://www.logstash.net/](http://www.logstash.net/)

# perl - 在 Perl 上搜索文件

> ID：10916889
> 
> 赞同：2
> 
> 时间：2012-06-06T15:01:32.647
> 
> 标签：perl, search

好的，所以我需要读入一个文件，遍历每一行并找到字符串 ERROR 的位置。这是我到目前为止所拥有的：

```
open(LOGFILE, "input.txt") or die "Can't find file";

$title = <LOGFILE>;

$\=' ' ;
while (<>){
    foreach $title(split){
        while (/^ERROR/gm){
            print "ERROR in line $.\n";
        }
    }
}
close LOGFILE; 
```

所以我遇到的问题是它只查看每行的第一个单词。所以如果输入是

嘘远错误

它不会记录错误。任何帮助将不胜感激！我是 perl 新手，所以请尽量保持基本。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:05:12.790

这是一种更优雅的方法，我修复了正则表达式问题。`^`匹配一行的开头。

```
open(LOGFILE, "input.txt") or die "Can't find file";

while(<LOGFILE>) {
   print "ERROR in line $.\n" if(/ERROR/);
}
close LOGFILE; 
```

或者从命令行如何：

```
perl -n -e 'print "ERROR in line $.\n" if(/ERROR/);' input.txt 
```

`-n`所有输入行的隐式循环 `-e`执行一行代码

要输出到文件：

```
perl -n -e 'print "ERROR in line $.\n" if(/ERROR/);' input.txt > output.txt 
```

虽然这是使用 Perl 的一个很好/简单的示例，但如果您使用的是 Unix shell，则[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)无需编写脚本即可执行您想要的操作（感谢 OP 注释中的 TLP）：

```
grep -n ERROR input.txt > output.txt 
```

这实际上是打印匹配行本身及其行号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:03:28.150

当然不会，因为正则表达式前面的 ^ 表示“行首”。删除它，它会在任何地方捕获错误。你也不应该做任何分裂技巧。您需要在任何地方找到错误吗？然后就这么写：

```
while (<>){
   if (/ERROR/){
      print "ERROR in line $.\n";
   }
} 
```

# android - Android相对布局循环依赖错误

> ID：10916892
> 
> 赞同：11
> 
> 时间：2012-06-06T15:01:37.453
> 
> 标签：android, layout

嗨，我正在尝试创建自定义布局，但我正在努力让它正常工作我收到一个错误“相对布局中不能存在圆形依赖项”

这就是我试图在布局方面实现的目标，然后用数据填充每个文本字段。

```
date                number
name   score - score  name
scorers              scorers 
```

这是我的尝试

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:paddingTop="30dp"
    android:paddingBottom="30dp" >

    <TextView
        android:id="@+id/TextView04"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_below="@+id/HomeScore"
        android:layout_centerVertical="true" 
        android:layout_centerHorizontal="true" 
        android:text="-"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/AwayTeam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TextView04"
        android:layout_alignBottom="@+id/TextView04"
        android:layout_alignParentRight="true"
        android:layout_marginRight="22dp"
        android:gravity="left"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/HomeTeam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TextView04"
        android:layout_alignBottom="@+id/TextView04"
        android:layout_toRightOf="@+id/HomeScore"
        android:gravity="right"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/Attendance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/AwayTeam"
        android:layout_alignTop="@+id/HomeScore"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/Division"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView1"
        android:layout_toRightOf="@+id/HomeScore"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/AwayScore"
        android:layout_width="20dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TextView04"
        android:layout_alignBottom="@+id/TextView04"
        android:layout_toRightOf="@+id/TextView04"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/HomeScore"
        android:layout_width="20dp"
        android:layout_height="wrap_content"

        android:layout_alignBottom="@+id/TextView04"
        android:layout_marginRight="15dp"
        android:layout_toLeftOf="@+id/TextView04"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue"
        android:textStyle="bold" />

</RelativeLayout> 
```

这是错误

```
06-06 14:42:44.348: E/AndroidRuntime(1167): java.lang.IllegalStateException: Circular dependencies cannot exist in RelativeLayout
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.RelativeLayout$DependencyGraph.getSortedViews(RelativeLayout.java:1272)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.RelativeLayout.sortChildren(RelativeLayout.java:281)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:303)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.view.View.measure(View.java:8526)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.ListView.measureScrapChild(ListView.java:1153)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1266)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.ListView.onMeasure(ListView.java:1127)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.view.View.measure(View.java:8526)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3224)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.TableLayout.measureChildBeforeLayout(TableLayout.java:456)
06-06 14:42:44.348: E/AndroidRuntime(1167):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T15:11:29.223

好吧，你有几个问题：

1.  `TextView04`声明`android:layout_below="@+id/HomeScore"`and `android:layout_centerVertical="true"`，哪个冲突

2.  `AwayTeam`声明`android:layout_alignBaseline="@+id/TextView04"`and `android:layout_alignBottom="@+id/TextView04"`，哪个冲突

3.  `HomeTeam`声明`android:layout_alignBaseline="@+id/TextView04"`and `android:layout_alignBottom="@+id/TextView04"`，哪个冲突

4.  `AwayScore`声明`android:layout_alignBaseline="@+id/TextView04"`and `android:layout_alignBottom="@+id/TextView04"`，哪个冲突

正如 Samir 指出的那样，您的循环依赖项中至少有一个是介于`TextView04`和之间`HomeScore`。`TextView04`说它在下面`HomeScore`，并`HomeScore`说它的底部与底部对齐`TextView04`。但是，我在上面提到的其他一些也可能会产生循环依赖。确保两个小部件不会尝试在同一轴上相互约束（如`TextView04`和`HomeScore`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T15:07:02.667

从布局中的`android:layout_below="@+id/HomeScore"`第一个删除它会创建循环依赖项。`TextView`

> 为什么 ？

因为您`android:layout_alignBottom="@+id/TextView04"`在 id 为 . 的 Textview 中 设置了`android:id="@+id/HomeScore"`第一个 Textview(TextView04) 也有`android:layout_below="@+id/HomeScore"`.

```
 <TextView
        android:id="@+id/TextView04"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_centerVertical="true" 
        android:layout_centerHorizontal="true" 
        android:text="-"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue"
        android:textStyle="bold" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:08:35.943

你有一个小错误，可能是原因：

当您引用另一个 id 时，不要使用`@+id/...`just `@id/...`。所以除了`android:id`属性之外的任何地方都`+`必须删除。

完成此操作后，您可能会收到一些警告，指出可能的错误！

# c++ - 将 char[] 拆分为 char[][]

> ID：10916893
> 
> 赞同：0
> 
> 时间：2012-06-06T15:01:38.730
> 
> 标签：c++, split

> **可能重复：**
> [如何在 C++ 中拆分字符串？](https://stackoverflow.com/questions/236129/how-to-split-a-string-in-c)

我有：

```
char[20] c = "@aaa,@bbb,@ccc"; 
```

我需要得到 d 这样：

```
d[0] ="@aaa" 
d[1] ="@bbb"
d[2] ="@ccc" 
```

有没有这样做的功能？或者我应该手动编写函数？

提前致谢 ：）

# ruby-on-rails - Ruby on Rails - 如何从控制台调用 ruby 类？

> ID：10916902
> 
> 赞同：0
> 
> 时间：2012-06-06T15:02:09.497
> 
> 标签：ruby-on-rails, ruby, rails-console

我有这堂课：

```
module App
  module Tools
    module Pollers
      class Kpi
        ... 
```

我在 Rails 控制台中，我正在尝试做这样的事情：

x = App::Tools::Pollers::Kpi.new

系统没有给出错误，但是当我尝试使用新对象时它什么也没做。

我是否必须在 routes.rb 中设置一些东西才能允许这种模块嵌套？或者我只是没有正确处理文件？如何将结果输出到控制台屏幕？

这是一些控制台输出的样子：

```
?> kpi_poller = App::Tools::Pollers::Kpi.new(date_1,date_2)
>> kpi_poller.do_launch
>> kpi_poller.do_launch("1");
?> ;
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:49:44.063

试试这个：

```
module App
  module Tools
    module Pollers
      class Kpi
        attr_accessor :kpii
        def initialize(val=1)
          @kpii = val*2
        end
      end
    end
  end
end

kpi_poller = App::Tools::Pollers::Kpi.new(3)
puts kpi_poller.kpii  # 6 
```

# php - MAMP：标头（位置：）函数停止工作

> ID：10916905
> 
> 赞同：0
> 
> 时间：2012-06-06T15:02:13.797
> 
> 标签：php, header, http-headers

我正在为我的 PHP 站点开发登录系统。所以为了保持基本，有一个 login.php 页面和一个 loginProcessor.php 页面。处理器页面验证输入的电子邮件和密码等...如果用户输入的值无效，处理器会在会话中添加错误消息并将其发送回（通过标头函数）到登录页面，其中会话错误设置为回显。

我最初开始在 HostGator 的服务器上开发该站点，那里一切正常（包括标题功能）。但是，在将站点本地移动到 MAMP 后，标头功能停止工作。在 login.php 页面之后，它只是移动到处理器页面并显示一个空白/白色页面。但是，处理器仍在进行验证等......只是没有重定向到适当的页面。

这是我在处理器中调用标头函数的第一个实例。

```
 $email = $_POST['email'];
    $email = trim($email);
    if ($email == '' || $email == 'Your Email') {
        $_SESSION['login-error'] = '<div id="error">We didn\'t recognize the email address you entered.<br>Please try again.</div>';
        ob_start();
        header('/login/');
        ob_end_flush();
        return;
    } 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:30:02.937

您在标头函数中缺少实际的 Location 指令：

```
header('Location: /login/'); 
```

# database - 无法关闭 Oracle 数据库 ORA-01031

> ID：10916908
> 
> 赞同：1
> 
> 时间：2012-06-06T15:02:21.270
> 
> 标签：database, oracle

我在关闭本地 oracle 数据库时遇到问题。我用谷歌搜索了这个问题，我使用的 SYSTEM 用户在 ora_dba 域中，我还注意到我的 ORACLE_HOME/network/admin 文件夹中需要 sqlnet.ora，但我没有 network/admin 文件夹在我的甲骨文之家。我只有一个中间件文件夹。我正在安装所有这些以便能够将 BPEL 流程发布到本地 weblogic 实例，而这花了我两天多的时间才试图完成所有设置。我开始有点沮丧，哈哈。这是我在下面遇到的错误： ![在此处输入图像描述](../Images/88b5a360e3a0e2d5f075d529c8835ab8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:43:54.190

为了启动/关闭 oracle 实例，您需要扩展权限 - Oracle 数据库 SYS 权限。一旦您的 Windows 用户 DOMAIN\user 被授予组“ora_dba”，您就被授权在操作系统级别以用户 SYS 身份登录数据库。

```
C:\>sqlplus / as sysdba
SQL>show user
SQL>USER is "SYS"
SQL>shutdown immediate 
```

# algorithm - 算法到最大值（最小值（匹配））？

> ID：10916917
> 
> 赞同：0
> 
> 时间：2012-06-06T15:02:42.377
> 
> 标签：algorithm

给定两个大小为 N 的集合 A 和 B，以及为叉积 AxB 的 N^2 个条目中的每一个分配一个实数的权重，我们希望形成 A 和 B 的匹配，使得最低权重最大化.

举个例子，我们正在组织一场赛马，我们有 10 名骑师和 10 匹马，每个骑师骑着每匹马的预期速度都不同。我们必须选择哪位骑师骑哪匹马，以使这场比赛中最慢的骑师/马尽可能快。

拿

```
 i  j  k
a   9  1  2
b   4  3  1
c   7  3  5 
```

这里的“最大最小匹配”是 { (a,i), (b,j), (c,k) }，值为 3。

计算这种匹配的算法是什么，它的复杂性是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:18:33.333

此答案指导如何为此问题创建`O(n^2 * sqrt(n) * log(n))`解决方案。

**朴素慢速算法：**
首先，请注意，朴素在对问题建模的二分图上`O(n^4 * sqrt(n))`迭代地使用[匹配算法](http://en.wikipedia.org/wiki/Maximum_matching#Maximum_matchings_in_bipartite_graphs)，并寻找无法去除的“最高边集”。（意思是：寻找匹配中最小的最大边）。

该图是`G= (V,E)`, where`V = A [union] B`和`E = A x B`。

算法是：

```
sort the edges according to the weighted value
while there is an unweighted match match:
   remove the edge with smallest value
return the match weight of the last removed edge 
```

**正确性解释：**
很容易看出该值不小于最后一个删除的边 - 因为有一个匹配使用它而不是“更小”的边。
它也不是更高，因为当这个边缘被移除时 - 没有匹配。

**复杂性：**
运行`O(n^2)`匹配算法，`O(|E|sqrt(|V|)) = O(n^2 * sqrt(n))`总共产生`O(n^4 * sqrt(n)`

我们想减少这个`O(n^2)`因素，因为可能应该使用匹配算法。

**优化：**
请注意，该算法实际上是在寻找“剪切”已排序边列表的位置。我们实际上是在寻找必须在列表中的最小边才能获得匹配。
这里可以暗示二进制搜索，其中每个“比较”实际上是在检查是否存在匹配，并且您正在寻找产生匹配的“最高”元素。这将导致`O(log(n^2)) = O(logn)`匹配算法的迭代，给你总共`O(n^2 * sqrt(n) * log(n))`

**高级优化算法：**

```
//the compare OP
checkMatching(edges,i): 
   edges' <- edges 
   remove from edges' all the elements with index j < i
   check if there is a match in the graph
   return 1 if there is, 0 otherwise.
//the algorithm:
find max_min(vertices,edges):
   sort edges according to weight ascending
   binary search in edges for the smallest index that yields 0
   let this index be i
   remove from edges all the elements with index j < i
   return a match with the modified edges 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:15:21.553

这个问题是典型的二分匹配问题。您可以查看匈牙利方法或 KM 算法来解决它。

# binding - 可能的捆绑包问题 - 无法使用 nil 模型创建 NSPersistentStoreCoordinator

> ID：10916922
> 
> 赞同：4
> 
> 时间：2012-06-06T15:02:51.917
> 
> 标签：binding, xamarin.ios, monodevelop, nsbundle, aviary

我想将[Aviary SDK](http://www.aviary.com/ios-documentation) Objective-C 库集成到 Monotouch 项目中。我为此使用“Monotouch Binding Project”模板。我已经构建了 DLL（感谢聪明人！）该项目在模拟器上编译并运行。

但是我无法显示主 Aviary 视图和以下代码

```
 this.afPhotoEditor = new AFPhotoEditorController(UIImage.FromFile("Images/site.jpg"));
            AFDelegate afDelegate = new AFDelegate(this);
            this.afPhotoEditor.Delegate = afDelegate;
            this.PresentModalViewController(this.afPhotoEditor, true); 
```

返回错误：

```
Unhandled Exception: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: Cannot create an NSPersistentStoreCoordinator with a nil model
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSendSuper_IntPtr_bool (intptr,intptr,intptr,bool)
  at MonoTouch.UIKit.UIViewController.PresentModalViewController (MonoTouch.UIKit.UIViewController modalViewController, Boolean animated) [0x00038] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:261 
  at TestAviary.FirstViewController.<ViewDidLoad>m__0 (System.Object , System.EventArgs ) [0x00028] in /Users/mahmood1/Projects/AviaryBinding/TestAviary/FirstViewController.cs:61 
  at MonoTouch.UIKit.UIControlEventProxy.Activated () [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIControl.cs:30 
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at TestAviary.Application.Main (System.String[] args) [0x00000] in /Users/mahmood1/Projects/AviaryBinding/TestAviary/Main.cs:17 
[ERROR] FATAL UNHANDLED EXCEPTION: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: Cannot create an NSPersistentStoreCoordinator with a nil model
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSendSuper_IntPtr_bool (intptr,intptr,intptr,bool)
  at MonoTouch.UIKit.UIViewController.PresentModalViewController (MonoTouch.UIKit.UIViewController modalViewController, Boolean animated) [0x00038] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:261 
  at TestAviary.FirstViewController.<ViewDidLoad>m__0 (System.Object , System.EventArgs ) [0x00028] in /Users/mahmood1/Projects/AviaryBinding/TestAviary/FirstViewController.cs:61 
  at MonoTouch.UIKit.UIControlEventProxy.Activated () [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIControl.cs:30 
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at TestAviary.Application.Main (System.String[] args) [0x00000] in /Users/mahmood1/Projects/AviaryBinding/TestAviary/Main.cs:17 
```

这个错误（**Cannot create an NSPersistentStoreCoordinator with a nil model**）似乎与 Aviary SDK 需要添加的资源包相关联。

来自[Aviary iOS 设置指南](http://www.aviary.com/ios-documentation)：

> ```
> 4\. Copy resources
> 
> Make sure AviarySDKResources.bundle is included in your target's "Copy Bundle Resources" build phase. 
> ```

所以我通过 MonoDevelop 中的“添加现有文件夹..”菜单项添加了这个包。

[**来源放在这里>>>**](http://www.axifile.com/en/71EC96914A) [http://www.axifile.com/en/71EC96914A](http://www.axifile.com/en/71EC96914A)

它包括2个项目：

*   AviaryBinding（MonoTouch 绑定项目）
*   测试鸟舍

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:59:21.820

根据[Jonathan.Peppers 的](https://stackoverflow.com/users/132442/jonathan-peppers)评论：

`Build Action`使用of将大多数这样的文件添加到您的项目`Content`中将解决该问题。

# javascript - 使用 jQueryUI 从用户获取布尔值

> ID：10916926
> 
> 赞同：0
> 
> 时间：2012-06-06T15:02:58.860
> 
> 标签：javascript, jquery, jquery-ui, dialog, callback

我正在编写一些表单验证函数，由于灵活性，我决定使用 jQueryUI 来提示用户。

有一个小问题。我希望我的函数为我的错误报告系统返回一个由布尔值和字符串组成的数组。JQueryUI 对话框是异步的，这意味着浏览器不会像本机 prompt() 那样挂起并等待返回值。

这是一些示例代码：

验证器功能：

```
function verifyTOS_PVM_v2()
{
    verifyTOS_PVM_v2_callback = '';
    if(!empty($('#inputPVM').val())) {
        $('#inputPVM').val(date('d.m.Y', parseFinnishDate($('#inputPVM').val())));
        val = $('#inputPVM').val()
        date = parseFinnishDate($('#inputPVM').val());
        today = today();
        diff = Math.floor((date - today)/60/60/24);
        if(diff <= -14)
        {
            buttons = 
                [
                    {
                        text:"Kyllä",
                        click:function()
                        {
                            $(this).dialog('destroy');
                            verifyTOS_PVM_v2_callback = "Kyllä"
                        }
                    },
                    {
                        text:"Ei",
                        click:function()
                        {
                            $(this).dialog('destroy');
                            verifyTOS_PVM_v2_callback = "Ei"
                        }
                    }
                ]
            jQueryPrompt('Message', 'Koskien päivämäärää...', 400, buttons);
            while(verifyTOS_PVM_v2_callback != "Kyllä" && verifyTOS_PVM_v2_callback != "Ei")
            {
                setTimeout('i = i + 1', 50)
            }
            res = verifyTOS_PVM_v2_callback;
            if(res == "Kyllä")
            {
                error_occured = 2;
                error = 'Message'
            }
            else
            {
                error_occured = 1;
                error = 'Message'
            }
        }
    } else {
        error_occurred = 1;
        error = "Message";
    }
    reterr[0] = error_occurred;
    reterr[1] = error;
    return reterr;
} 
```

提示功能：

```
function jQueryPrompt(msg, title, width, buttons)
{
    $('body').append('<div id="jQueryPromptHost"></div>');
    $('#jQueryPromptHost').append(msg);
    $('#jQueryPromptHost').dialog({
        title: title,
        resizable: false,
        width: width,
        daraggable: false,
        modal: true,
        buttons: buttons
    })
} 
```

我曾尝试轮询一个变量，但失败得很惨（firefox 刚刚挂起并为自己占用了更多内存......）

你有什么建议吗？

问候，

阿克

编辑：

我选择了另一种方法来解决这个问题。我将最接近的解决方案标记为答案，以防其他人选择他的方法。谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:07:45.413

while 循环被锁定，你不能使用它。

将不得不将功能分成两部分。第一部分是调用对话框之前的代码，第二部分是对话框之后的部分。点击对话框按钮调用第二个函数。

如果代码必须是同步的，那么你有点不走运，并且卡在丑陋的 window.prompt 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:17:44.860

在您的`click`事件处理程序中，只需调用一个函数而不是分配一个值。

```
buttons = [
    {
        text:"Kyllä",
        click: function() {
            $(this).dialog('destroy');
            handleButtonClick("Kyllä");
            //verifyTOS_PVM_v2_callback = "Kyllä"
        }
    },
    {
        text:"Ei",
        click: function() {
            $(this).dialog('destroy');
            handleButtonClick("Ei");
            //verifyTOS_PVM_v2_callback = "Ei"
        }
    }
]

//Somewhere else in the code
var handleButtonClick = function(value) {
    if (value == "Kyllä") {
        ...
    } else if (value == "Ei") {
        ...
    }
}; 
```

# sql - 使用每行一次的完全外连接

> ID：10916934
> 
> 赞同：5
> 
> 时间：2012-06-06T15:03:21.247
> 
> 标签：sql, sql-server, join, outer-join

我想知道是否有人遇到过这个问题的巧妙解决方案。我正在尝试从几个表中选择数据，让记录逐行匹配。我基本上是在完全外部连接之后，但有一个关键的区别。如果我在一个表中要加入的列中有四行具有特定值，而在另一个表中具有该值的三行，我只希望将前三个结果连接起来，第四个结果就好像有没有匹配。

这样做的原因是创建一个对账报告，以确保在比较结果时不会多次计算交易。我可以通过使用一些分组和一些聚合函数来解决这个问题，但这隐藏了一些我想保留的细节。

下面是一个显示我所追求的东西的示例，评论中的无效/伪代码说明了我如何认为这是有效的：

```
declare @t1 table (id bigint identity(1,1) primary key clustered, foreignKeyId bigint, otherData nvarchar(10))
declare @t2 table (id bigint identity(1,1) primary key clustered, foreignKeyId bigint, moreData nvarchar(10))

insert @t1 select 1, '1.1.1'
 union all select 1, '1.1.2'
 union all select 1, '1.1.3'
 union all select 3, '1.3.1'
 union all select 3, '1.3.2'
 union all select 3, '1.3.3'
 union all select 4, '1.4.3'

insert @t2 select 1, '2.1.1'
 union all select 1, '2.1.2'
 union all select 1, '2.1.3'
 union all select 2, '2.2.1'
 union all select 3, '2.3.1'
 union all select 3, '2.3.2'
 union all select 5, '2.5.1'
 union all select 5, '2.5.2'

--demo of the functionality i'm hoping to acheive 
--
 /*
 select t1.id           id1
 , t2.id                id2
 , t1.foreignKeyId  fk1
 , t2.foreignKeyId  fk2
 , t1.otherData     otherData
 , t2.moreData      moreData
 from @t1 t1
 full funky join @t2 t2
 on t1.foreignKeyId = t2.foreignKeyId
 order by t1.id, t2.id --we'd need an order by to ensure the match could be applied in a predictable manner
 */
--
declare @funkyjoin table (id1 bigint, id2 bigint, fk1 bigint, fk2 bigint, otherData nvarchar(10), moreData nvarchar(10))
declare @id1 bigint, @id2 bigint
insert @funkyjoin (id1, fk1, otherData) 
select id, foreignKeyId, otherData from @t1

while exists(select 1 from @t2)
begin
    select top 1 @id2 = id from @t2 order by id 

    set @id1 = null

    select top 1 @id1 = id1 
    from @funkyjoin
    where fk2 is null
    and fk1 in (select foreignKeyId from @t2 where id = @id2)

    if @id1 is null
    begin
        insert @funkyjoin (id2, fk2, moreData)
        select id, foreignKeyId, moreData
        from @t2
        where id = @id2
    end
    else
    begin
        update @funkyjoin
        set id2 = @id2
        , fk2 = fk1 --since we're joining on this we can just match it
        , moreData = (select moreData from @t2 where id = @id2)
        where id1 = @id1 
    end

    delete from @t2 where id = @id2 --since this is only an example let's not worry about keeping our source data
end

select * 
from @funkyjoin
order by coalesce(id1, id2) 
```

我已经为以前在电子表格上发生这种情况时编写了一个类似的解决方案：http: [//officemacros.codeplex.com/#WorksheetMergeMacro](http://officemacros.codeplex.com/#WorksheetMergeMacro)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T15:24:33.310

如果我理解正确，这可能是你所追求的：

```
select *
from (
  select *,
    row_number() over (partition by foreignKeyId order by id) as n
  from @t1
) t1
full outer join (
  select *,
    row_number() over (partition by foreignKeyId order by id) as n
  from @t2
) t2 on t1.foreignKeyId = t2.foreignKeyId and t1.n = t2.n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:21:48.743

用完行的最佳方法是添加一个伪行号（使用 ROW_NUMBER）并将其包含在连接中。

# php - 使用条目备份/恢复选项创建 PHP CMS

> ID：10916936
> 
> 赞同：0
> 
> 时间：2012-06-06T15:03:26.970
> 
> 标签：php, mysql, content-management-system, backup, restore

我一直在研究 CMS，并想添加备份/恢复功能。我希望它在每隔一次编辑它时备份一个保存的条目，这样如果客户进行更改，他们不满意或搞砸了某些东西，他们可以返回并选择以前的状态进行恢复。

我遇到的问题是试图围绕编码此功能的概念。我创建了一个名为“备份”的新表，其中包含“ID、日期、时间、pageName 和 pageContent”字段，但从那里继续我发现自己卡住了。

我是否会在我的编辑脚本中添加一个新查询，以将副本保存到备份表中？我怎样才能让它每隔几个保存的编辑备份一次？

在这里，我有我的保存编辑查询，如果有帮助的话。提前致谢！:)

```
<?php
        $_POST['entry'] = mysql_real_escape_string($_POST['entry']);
        $sql="update pageEntry set entry=\"$_POST[entry]\", pageName=\"$_POST[pageName]\" where id=\"$_POST[id]\"";       
        $result=mysql_query($sql)or die('Bad Query');
            echo "<div id='edit2'>The file has been uploaded, and your information has been added to the directory<br /></div>";  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:08:41.383

表级别的版本控制通常通过`version`在现有表中添加列来完成。因此，如果您有一个`posts`表，您将添加一个带有简单 int 或日期值的版本列。每次编辑帖子时都会插入一条新记录，并且版本号会增加。您可以在另一个表中引用此版本号，或者有一个附加`active`字段来表示哪个帖子是最新的/活动的。

如果您正在谈论回滚数据库，我将使用`mysqldump`命令转储和`mysql`恢复。

# c++ - 使用 > 而不是标准输出

> ID：10916939
> 
> 赞同：1
> 
> 时间：2012-06-06T15:03:28.697
> 
> 标签：c++

因此，对于我的程序，我需要获取 cmd.exe 中显示的所有信息并将它们放在一个文件中。所以为此我使用了以下代码

```
freopen ("text.txt","w",stdout); 
```

我不得不把它放在 main.cpp

但是有人告诉我，我应该在不同的课程中这样做，并且我可以`>`直接使用该符号。

你们能告诉我我该怎么做吗？

如果你能给我举个例子那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:08:52.483

我想你被告知了管道。在你的 shell 中，你可以输入如下内容：

```
somecommand > text.txt 
```

它会将输出写入`somecommand`into `text.txt`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:10:43.310

```
std::cout << "Output sentence"; // prints Output sentence on screen
std::cout << 120;               // prints number 120 on screen
std::cout << x;                 // prints the content of x on screen 
```

如果您使用这些，那么用户可以使用以下语法将您的输出（通常会转到控制台）重定向到文件。

```
yourapplication.exe > "output.txt" 
```

如果您将 std::cin 与 << 运算符一起使用，那么您还可以`< "input.txt"`从 input.txt 输入文本，就像用户键入它一样。

[http://www.cplusplus.com/doc/tutorial/basic_io/](http://www.cplusplus.com/doc/tutorial/basic_io/)很好地解释了输入和输出流。

[http://technet.microsoft.com/en-us/library/bb490982.aspx](http://technet.microsoft.com/en-us/library/bb490982.aspx)解释了控制台重定向。

# sharepoint - 尝试删除通过模板问题创建的站点

> ID：10916941
> 
> 赞同：0
> 
> 时间：2012-06-06T15:03:32.403
> 
> 标签：sharepoint, sharepoint-2010

又是一个问题

我正在尝试删除我通过模板创建的网站并且我正在运行

> 找不到可用的沙盒代码执行服务器。

该模板仅包含一些以编程方式创建的列以及一些内容类型。

CT 也被添加到列表中。

有人有什么想法吗？

我将继续查看 ULS 日志，希望有人能救我

干杯特鲁兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:14:30.987

如果您的功能中有空接收器并且您的解决方案是沙盒解决方案，您应该将其切换到农场解决方案或检查您的用户代码托管服务是否正在运行。转到服务并检查“SharePoint 2010 用户代码主机”。还要检查 /_admin/Server.aspx 中的“Microsoft SharePoint Foundation Sandboxed Code Service”服务它必须正在运行才能支持沙盒解决方案。

# python - 在python中的列表列表中连接选定的元素

> ID：10916942
> 
> 赞同：0
> 
> 时间：2012-06-06T15:03:33.293
> 
> 标签：python, list

我有一个`(python) list of lists`如下

```
biglist=[ ['1','123-456','hello','there'],['2','987-456','program'],['1','123-456','list','of','lists'] ] 
```

我需要按以下格式获取

```
biglist_modified=[ ['1','123-456','hello there'],['2','987-456','program'],['1','123-456','list of lists'] ] 
```

我需要连接`third element onwards`每个内部列表中的。我尝试通过使用来做到这一点`list comprehensions`，

```
def modify_biglist(bigl):
    ret =[]
    for alist in bigl:
        alist[2] = ' '.join(alist[2:])
        del alist[3:]
        ret.append(alist)
    return ret 
```

这可以完成工作..但它看起来有点复杂 - 有一个局部变量`ret`并使用`del`? 有人可以提出更好的建议吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T15:05:45.437

```
[[x[0], x[1], " ".join(x[2:])] for x in biglist] 
```

或者，就地：

```
for x in biglist:
    x[2:] = [" ".join(x[2:])] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T15:07:48.253

要修改您的列表，您可以使用以下代码简化：

```
for a in big_list:
    a[2:] = [" ".join(a[2:])] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:09:39.427

这应该这样做：

```
[x[:2] + [" ".join(x[2:])] for x in biglist] 
```

略短。

# python - ElementTree中fromstring函数的上限

> ID：10916945
> 
> 赞同：2
> 
> 时间：2012-06-06T15:03:38.620
> 
> 标签：python, xml-parsing, elementtree

我在 Windows 32 位 PC 上使用 Python 2.4 版本。我正在尝试使用 ElementTree 模块解析一个非常大的 XML 文件。我从 effbot.org 下载了这个模块的 1.2.6 版本。

为了我的目的，我遵循了以下代码：

```
import elementtree.ElementTree as ET

input = ''' 001 Chuck 009 Brent '''
stuff = ET.fromstring(input)
lst = stuff.findall("users/user")
print len(lst)

for item in lst:
    print item.attrib["x"]

item = lst[0]
ET.dump(item)
item.get("x") # get works on attributes
item.find("id").text
item.find("id").tag

for user in stuff.getiterator('user'):
    print "User" , user.attrib["x"]

ET.dump(user) 
```

如果输入的内容太大，超过10000行，`fromstring`函数会报错（下）。谁能帮我纠正这个错误？

这是生成的错误：

> 回溯（最后一次调用）：文件“C:\Documents and Settings\hariprar\My Documents\My files\Python Try\xml_try1.py”，第 16 行，在 -toplevel- stuff = ET.fromstring(input) File 中C:\Python24\Lib\site-packages\elementtree\ElementTree.py”，第 1012 行，在 XML 中返回 api.fromstring(text) 文件“C:\Python24\Lib\site-packages\elementtree\ElementTree.py”，第 182 行，fromstring parser.feed(text) 文件“C:\Python24\Lib\site-packages\elementtree\ElementTree.py”，第 1292 行，feed self._parser.Parse(data, 0) ExpatError: not well -formed（无效令牌）：第 2445 行，第 39 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:09:01.557

看一下`iterparse`功能。它将让您逐步解析输入，而不是将其作为一大块读入内存。

它在这里描述：http: [//effbot.org/zone/element-iterparse.htm](http://effbot.org/zone/element-iterparse.htm)

# kerberos - 可选的 SPNEGO Kerberos 身份验证

> ID：10916947
> 
> 赞同：4
> 
> 时间：2012-06-06T15:03:52.380
> 
> 标签：kerberos, spnego

是否可以进行可选的 kerberos 身份验证？

我想要的是：如果客户端（浏览器）不在域上，它将被重定向到用户名/密码 Web 登录。否则它将执行 SPNEGO 执行 Kerberos 身份验证。

如果我只是将 WWW-Authenticate: Negotiate 标头发送到非域浏览器，它就不会做任何进一步的事情。

如果浏览器不知道如何进行身份验证，是否有一些选项可以告诉浏览器尝试不同的方法？或者我必须在发送“WWW-Authenticate”标头之前确定用户是否是域的一部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T21:47:38.710

我还没有找到任何人以公开和标准的方式解决了这个问题。是的，如前所述，可以回退到`Basic`但这不适用于涉及从 CGI 表单请求用户名和密码的身份验证方案，就浏览器所见，如果失败，您将回退到*不*`Negotiate`进行身份验证. 也许这表明身份验证方案已损坏？我不知道。

我先告诉你我知道的。我们的网站实际上是受 Cosign 保护的，所以我们遇到了类似的问题：只有特殊配置的机器才会响应`WWW-Authenticate`标头，所以默认情况下，我们必须将所有用户发送到我们的 Cosign 登录页面。诀窍在于，Cosign 服务器还允许经过身份验证的 GSSAPI/Kerberos 主机在不输入登录详细信息的情况下完成身份验证过程，但只能在某些浏览器上通过一种变通方法来完成。

此解决方法仅包含登录页面中的一段 JavaScript，它尝试访问`HEAD`受 SPNEGO 保护的资源；如果成功，该脚本会将浏览器重定向到同一页面的受 SPNEGO 保护的版本，这会授予适当的 Cosign cookie 并在不输入密码的情况下完成该过程。如果浏览器缺少任何一种 JavaScript、Kerberos 支持或足够的凭据，那么用户将照常看到 cosign 登录页面。

因此，仅以上内容就可以作为您问题的答案；就个人而言，虽然我认为这还远远不够，接下来更多的是讨论......

上述内容似乎并不令人满意，因为它坚持认为任何连接的用户代理都支持 JavaScript（对于基于文本的浏览器和 HTTP 客户端库不太可能是这种情况）或我们将支持 Kerberos 的用户重定向到的任意路径的知识（对于任何尚未为我们的网站进行硬编码）。我得出的结论是，可能有更好的解决方法，或者如果没有，标准应该存在的差距。我最好的实用建议是：

SPNEGO 过程的正常部分是客户端尝试检索初始响应为 HTTP`401`但带有标头的页面`WWW-Authenticate: Negotiate`。这是 GSSAPI/Kerberised 客户端做出适当响应的提示；“常规”客户端只会显示错误页面。也许解决方案只是修改 Cosign 服务器以提供人性化的登录页面作为此错误响应的一部分？

使用现成的 Apache 和模块*可能*在技术上很困难，并且可能违反各种标准（或至少是原则）。我不是所涉及系统的专家，所以只能推测，除非（或直到）我有机会尝试一下......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:36:07.827

额外发送`WWW-Authenticate: Basic`用户名/密码挑战。

# c# - 在 Visual Studio C# 中，有没有办法将 Web Config Transforms 应用于 Javascript 文件？

> ID：10916952
> 
> 赞同：6
> 
> 时间：2012-06-06T15:04:12.727
> 
> 标签：c#, javascript, visual-studio-2010, web-config-transform

在 Visual Studio 中，我正在开发的网站上有一些 Javascript 代码。在调试时，我正在使用对“localhost”的 $ajax 调用。部署后，它需要是实际的服务器：

```
$('#textInput_UserName').focusout(function () {
    var _username = $('#textInput_UserName').val();
    $.ajax({
        url: 'http://localhost:8809/Account/UserNameExists/',
        data: { username: _username },
        dataType: 'html',
}); 
```

当我发布时，我需要将该 localhost 转换为实际域：

```
$('#textInput_UserName').focusout(function () {
    var _username = $('#textInput_UserName').val();
    $.ajax({
        url: 'http://www.mydomain.com/Account/UserNameExists/',
        data: { username: _username },
        dataType: 'html',
}); 
```

是否有一种简单/自动的方法来执行此操作，类似于 Web Config 转换的工作方式？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:15:53.257

你没有，你只是省略了主机，浏览器会为你填写这个，像这样：

```
$('#textInput_UserName').focusout(function () {
    var _username = $('#textInput_UserName').val();
    $.ajax({
        url: '/Account/UserNameExists/',
        data: { username: _username },
        dataType: 'html',
}); 
```

如果您实际上是在谈论 x 域请求，我怀疑您是，那么只需设置一个全局 js 站点变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:51:22.877

我建议你使用这个：

```
url: '<%= ResolveClientUrl("~/Account/UserNameExists/")', 
```

如果您这样做，您将避免出现以下问题：

*   将应用程序安装在虚拟目录而不是域根目录中
*   将您的页面移动到应用程序中的不同目录级别
*   从母版页或用户控件使用您的服务，可以在不同的页面中实例化，因此是目录级别

您还可以在您的页面/用户控件/母版页中公开一个公共属性，并以相同的方式从代码中使用它，即：

*   页面/uc/master 中的代码：`public string ServiceUrl { get { return ResolveClientUrl("~/Account/UserNameExists/");}`
*   .aspx 中的代码：`url: '<%= ServiceUrl',`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:17:31.570

您是在调用网络服务还是此 url 的目的地是什么？当我在我的 Web 应用程序中使用 ajax 调用时，我通常会在 Web 服务中设置方法并像这样调用它们：

```
 $.ajax({
        type: "POST",
        url: "../Services/BookingService.asmx/GetVerifiedReservations",
        data: paramsJson,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (response) {
            invalidDays = $.parseJSON(response.d);
        },
        error: function (xhr, textStatus, thrownError) {
            alert(textStatus);
            alert(thrownError);
        }
    }); 
```

如您所见，该路径与您域中的其余文件相关。

# javascript - 从数组中删除文本

> ID：10916955
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:04:20.040
> 
> 标签：javascript, jquery

我有以下有效的脚本：

```
classes = $(this).attr("class").split('_'); 
```

If`$(this)`的课程是：

```
class="billed_department_employee_client_code" 
```

最终结果将如下所示：

```
["billed", "department", "employee", "client", "code"] 
```

这正是我想要的，因为它允许我做这样的事情

```
console.log( classes[0] );
console.log( classes[1] );
console.log( classes[2] );
console.log( classes[3] ); 
```

是否可以从中删除单个值`classes`并将其余值移回？

例如，

如果`classes`包含`department`，删除它。所以，如果它看起来像这样：

```
["billed", "department", "employee", "client", "code"] 
```

它应该变成：

```
["billed", "employee", "client", "code"] 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:07:05.190

您可以使用该`splice()`方法。

```
classes.splice(1, 1); 
```

将从索引 1（第一个参数）开始删除 1 个项目（第二个参数）。如果不知道索引，可以使用`indexOf()`查找。

有些浏览器不支持`indexOf()`，所以你可以使用[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)的脚本来使用它。您还需要检查以确保`indexOf()`不会返回`-1`（未找到），因为将负参数传递给 index into`splice()`将导致它从数组末尾删除项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:07:18.097

是的。可以办到。这边走：

```
var c = ["billed", "department", "employee", "client", "code"];
c.splice( c.indexOf('department'), 1); // will remove 'department' from the array.
c.join("_"); // will return "billed_employee_client_code" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:09:43.193

如果您使用的是相对现代的浏览器，则可以使用[splice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)和[indexOf （您始终可以为其余部分应用 shim）。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)所以：

```
var pos = classes.indexOf("department");

if (pos > -1) {
    classes.splice(pos, 1);
}

$(this).attr("class", classes.join("_")); 
```

# codeigniter - Codeigniter：路由和 URI 段

> ID：10916957
> 
> 赞同：0
> 
> 时间：2012-06-06T15:04:22.340
> 
> 标签：codeigniter

我在 codeigniter 中遇到路由问题。

假设我有一个名为 Pages 的控制器，它有一个名为 product 的方法，它执行以下操作：

```
public function product() {
    $this->load->model('pages_model');
    $productid = $this->uri->segment(3);

    $data['product'] = $this->pages_model->getProduct($productid);
    // ...load view, etc.
} 
```

要访问特定产品，我的 url 将是 www.example.com/pages/product/ID。

我想设置一个自定义路由，以便我可以通过访问 www.example.com/name-of-product 访问该产品。

然而，放

```
$route['name-of-product'] = 'pages/product/ID'; 
```

不起作用。它将加载产品视图，但不会加载产品数据。如果我说

```
$route['name-of-product/:any/ID'] = 'pages/product/ID'; 
```

它可以正常工作，但我宁愿不要在 url 末尾添加两个附加段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:20:19.540

您不需要 2 个额外的段。一个应该足够了。

```
$route['PRODUCT_NAME/PRODUCT_ID'] = 'pages/product/PRODUCT_ID'; 
```

但是，如果我是您，我会将 URL 设置为将第一段作为产品的 id。

```
$route['PRODUCT_ID/PRODUCT_NAME'] = 'pages/product/PRODUCT_ID'; 
```

That way, if I only know the product id, I wouldn't have to type `example.com//123` which might cause some problem. If I'm not mistaken, if you do that, CI will try to load a controller named `123`.

# python - 如果需要永久访问，Python 内存错误解决方案

> ID：10916960
> 
> 赞同：0
> 
> 时间：2012-06-06T15:04:35.500
> 
> 标签：python, memory, python-2.7

首先，我知道关于 SO 的 Python 内存错误问题的数量，但到目前为止，没有一个与我的用例相匹配。

我目前正在尝试解析一堆文本文件（约 6k 文件，约 30 GB）并存储每个唯一的单词。是的，我正在建立一个单词表，不，我不打算用它做坏事，这是为了大学。

我将找到的单词列表实现为一个集合（使用创建`words = set([])`，使用`words.add(word)`），我只是将每个找到的单词添加到其中，考虑到集合机制应该删除所有重复项。

这意味着我需要永久访问整个集合才能使其正常工作（或者至少我看不到其他选择，因为必须在每次插入时检查整个列表的重复项）。

现在，`MemoryError`当它使用大约 3.4 GB 的 RAM 时，我正在运行大约 25%。我使用的是 32 位 Linux，所以我知道这个限制来自哪里，而我的电脑只有 4 Gigs 的 RAM，所以即使是 64 位也无济于事。

我知道复杂性可能很糟糕（每次插入可能 O(n)，虽然我不知道 Python 集是如何实现的（树？）），但它仍然（可能）更快并且（肯定）内存效率更高而不是将每个单词添加到原始列表并随后删除重复项。

有什么办法可以让它运行吗？我预计大约 6-10 GB 的唯一词，所以使用我当前的 RAM 是不可能的，并且升级我的 RAM 目前是不可能的（一旦我开始让这个脚本在大量文件上松散，就不能很好地扩展） .

我目前唯一的想法是在磁盘上缓存（这会进一步减慢进程），或者将临时集写入磁盘并在之后合并它们，这将花费更多时间，而且复杂性确实很可怕。是否有一种解决方案不会导致可怕的运行时间？

作为记录，这是我的全部来源。由于它仅供个人使用，它非常可怕，但你明白了。

```
import os
import sys
words=set([])
lastperc = 0
current = 1
argl = 0
print "Searching for .txt-Files..."
for _,_,f in os.walk("."):
    for file in f:
        if file.endswith(".txt"):
            argl=argl+1
print "Found " + str(argl) + " Files. Beginning parsing process..."
print "0%                                              50%                                             100%"
for r,_,f in os.walk("."):
    for file in f:
        if file.endswith(".txt"):
            fobj = open(os.path.join(r,file),"r")
            for line in fobj:
                line = line.strip()
                word, sep, remains = line.partition(" ")
                if word != "":
                    words.add(word)
                word, sep, remains = remains.partition(" ")
                while sep != "":
                    words.add(word)
                    word, sep, remains2 = remains.partition(" ")
                    remains = remains2
                if remains != "":
                    words.add(remains)
            newperc = int(float(current)/argl*100)
            if newperc-lastperc > 0:
                for i in range(newperc-lastperc):
                    sys.stdout.write("=")
                    sys.stdout.flush()
            lastperc = newperc
            current = current+1
print ""
print "Done. Set contains " + str(len(words)) + " different words. Sorting..."
sorteddic = sorted(words, key=str.lower)
print "Sorted. Writing to File"
print "0%                                              50%                                             100%"
lastperc = 0
current = 1
sdicl = len(sorteddic)-1
fobj = open(sys.argv[1],"w")
for element in sorteddic:
    fobj.write(element+"\n")
    newperc = int(float(current)/sdicl*100)
    if newperc-lastperc > 0:
        for i in range(newperc-lastperc):
            sys.stdout.write("=")
            sys.stdout.flush()
    lastperc = newperc
    current = current+1
print ""
print "Done. Enjoy your wordlist." 
```

感谢您的帮助和想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:08:22.513

您可能需要将密钥存储在磁盘上。[像Redis](http://redis.io/)这样的键值存储可能符合要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:08:42.177

您真的是指 6-10GB 的独特词吗？这是英文文本吗？当然，即使算上专有名词和名称，唯一单词也不应该超过几百万。

无论如何，我要做的是一次处理一个文件，甚至一次处理一个文件的一个部分（例如，100k），为该部分构建一个唯一的单词表。然后将所有集合合并为后处理步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T16:04:31.913

我尝试的第一件事是将单词限制为小写字符 - 正如 Tyler Eaves 指出的那样，这可能会减少集合大小以适应内存。这是一些非常基本的代码来做到这一点：

```
import os
import fnmatch
import re

def find_files(path, pattern):
    for root, files, directories in os.walk(path):
        for f in fnmatch.filter(files, pattern):
            yield os.path.join(root, f)

words = set()
for file_name in find_files(".", "*.txt"):
    with open(file_name) as f:
        data = f.read()
    words.update(re.findall("\w+", data.lower())) 
```

还有一些评论：

1.  我通常会期望字典在一开始会迅速增长。在这个过程的后期应该会发现很少的新单词，所以你的推断可能会严重高估单词列表的最终大小。

2.  为此，集合非常有效。它们被实现为哈希表，并且添加一个新单词的摊销复杂度为 O(1)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T15:11:46.797

我倾向于使用数据库表，但如果您想留在单个框架内，请查看 PyTables：[http ://www.pytables.org/moin](http://www.pytables.org/moin)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T15:25:54.987

将您的密钥散列到更小、更易于管理的代码空间中。将散列键值到包含具有该散列值的键的文件中。哈希表要小得多，单个密钥文件要小得多。

# c# - 重载“+”以添加已包含在通用列表中的项目？

> ID：10916970
> 
> 赞同：-1
> 
> 时间：2012-06-06T15:05:16.307
> 
> 标签：c#, c#-4.0, operator-overloading

我试图通过重载 + 运算符来实现合并客户帐户的功能。我最初在银行帐户列表中输入，然后将列表传递给函数的参数，该函数返回包含 BankAccounts 对象的列表。到目前为止，我已经获得了包含与特定客户相关的所有帐户信息的列表

但我必须使用**重载**+ 添加列表项但无法这样做..这是我的课程和主要代码......请帮助......

```
namespace OpOverload{class BankAccounts
{
    private string title;
    List<BankAccounts> bankList = new List<BankAccounts>();
    private double balance;

    internal List<BankAccounts> BankList
    {
        get { return bankList; }
        set { bankList = value; }
    }

    public double Balance
    {
        get { return balance; }
        set { balance = value; }
    }

    public string Title
    {
        get { return title; }
        set { title = value; }
    }

    public void input()
    {
        BankAccounts[] banks = new BankAccounts[3] { new BankAccounts(), new BankAccounts(), new BankAccounts() };
        int i = 0;
        do
        {
            Console.WriteLine("Account Title?:   ");
            banks[i].Title = Console.ReadLine();
            Console.WriteLine("Account Balance Deposited?:    ");
            banks[i].Balance = Convert.ToInt32(Console.ReadLine());
            bankList.Add(banks[i]);
            ++i;
        } while (i <= 2);
    }

    public List<BankAccounts> setTogether(string title1, List<BankAccounts> blist)
    {
        List<BankAccounts> sameName2gther = new List<BankAccounts>();
        foreach (BankAccounts item in blist)
        {
            if (item.Title == title1)
            {
                sameName2gther.Add(item);
            }
        }
        return sameName2gther;
    }

    public static BankAccounts operator +(BankAccounts b1,List<BankAccounts> blist)
    {
        BankAccounts ba = new BankAccounts();
        foreach (BankAccounts item in blist)
        {
            ba.balance = ba.balance + item.Balance;
            ba.title = item.Title;
        }
        return ba;
    }
} 
```

}

**主要代码是：**

```
namespace OpOverload{
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("===========Merge Accounts============");
        List<BankAccounts> customList = new List<BankAccounts>();
        BankAccounts b1 = new BankAccounts();
        BankAccounts result = new BankAccounts();
        b1.input();
        foreach (BankAccounts item in b1.BankList)
        {
            Console.WriteLine(item.Title + "-->" + item.Balance);
        }
        customList = b1.setTogether("sana", b1.BankList);
        foreach (BankAccounts item in customList)
        {
            Console.WriteLine(item.Title + "-->" + item.Balance);
        }
        for (int i = 0; i < customList.Count; i++)
        {
            result = result + customList[i];
        }

        Console.ReadLine();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:13:13.547

答案：为 BankAccounts 和 BankAccounts 定义运算符 + :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:14:00.213

您将运算符定义为采用 a`BankAccounts`和 a `List<BankAccounts>`; 但是在您的示例代码中，您尝试将两个`BankAccounts`对象加在一起。

重新定义运算符以仅添加两个实例，或更改您的用法以将列表添加到实例。

# php - POST 数据未进入控制器 codeigniter

> ID：10916971
> 
> 赞同：1
> 
> 时间：2012-06-06T15:05:16.730
> 
> 标签：php, codeigniter

我正在发布一个包含一些数据的表单，但我得到的是空的 POST 数组。形式是

```
<form name="opening-statistics" action ="<?php echo base_url()?>statistic/openings">
   <select name="titles" multiple="multiple">
       <?php foreach($titles as $title) { ?> 
          <option value="<?php echo $title['idtitles']?>"><?php echo $title['title']?></option>
       <?php } ?>
    </select>
<input type="submit" name="submit" value="Submit"> 
```

在我的控制器中，我有

```
 public function openings(){
    $data['boxes'] = $this->Statistic_model->getBoxes();
    $data['titles'] = $this->Statistic_model->getTitles();
    if($this->input->post()){
        echo 'I am here';
        $form = $this->input->post();
        var_dump($form);
        exit();
    }
    else{
        echo 'I am here';
        $this->load->view('statistic/openings-statistics', $data);
    }
} 
```

在我的路线中，我有

```
$route['statistic/openings-statistics'] = 'statistic/openings'; 
```

它总是出现在 else 语句中

谁能告诉我原因？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:15:41.927

尝试像这样捕获 POST：

```
 public function openings(){
    $data['boxes'] = $this->Statistic_model->getBoxes();
    $data['titles'] = $this->Statistic_model->getTitles();
    if($_POST){
        echo 'I am here';
        $form = $this->input->post();
        var_dump($form);
        exit();
    }
    else{
        echo 'I am here';
        $this->load->view('statistic/openings-statistics', $data);
    }
} 
```

是的，CI 确实有：

```
$this->input->post(NULL, TRUE); // returns all POST items with XSS filter 
$this->input->post(); // returns all POST items without XSS filter 
```

# javascript - 不要滑动切换所有

> ID：10916973
> 
> 赞同：1
> 
> 时间：2012-06-06T15:05:21.467
> 
> 标签：javascript, jquery, html, css, slidetoggle

我有一个垂直滑动菜单，如下所示：

```
 <ul class="menu">
        <li>link</li>
        <li>link</li>
        <li class="more">link with submenu</li>
            <ul class="submenu">
                <li>sub link 1</li>
                <li>sub link 2</li>  
            </ul>
        <li class="more">link with submenu</li>
            <ul class="submenu">
                <li>sub link 1</li>
                <li>sub link 2</li>  
            </ul>
        <li>link</li>  
        <li>link</li>

    </ul> 
```

jQuery是这样的：

```
jQuery(document).ready(function($) {

$(".more").click(function() {

$(this).parent().children(".submenu").slideToggle(500); });
}); 
```

我的问题是，当我点击“.more”时，每个“.submenu”都在滑动切换（都打开）

我该怎么办，所以只有正确的子菜单被滑动切换？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:08:17.037

删除对 的调用`.parent()`。此外，您`.submenu`应该嵌套*在*`<li>`它所属的 中，留下以下 jQuery ：

```
$("li.more").on("click", function() {
    $("ul.submenu", this).slideToggle(500);
}); 
```

这个标记：

```
<ul class="menu">
    <li>link</li>
    <li>link</li>
    <li class="more">
        link with submenu
        <ul class="submenu">
            <li>sub link 1</li>
            <li>sub link 2</li>  
        </ul>
    </li>
    <li class="more">
        link with submenu
        <ul class="submenu">
            <li>sub link 1</li>
            <li>sub link 2</li>  
        </ul>
    </li>
    <li>link</li>  
    <li>link</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:18:01.553

这个？

```
$(this).next().eq(0).slideToggle(500); }); 
```

# asp.net - 这是单例模式的真正实现吗？

> ID：10916975
> 
> 赞同：1
> 
> 时间：2012-06-06T15:05:25.047
> 
> 标签：asp.net, design-patterns, singleton

到目前为止，我读过的所有关于单例模式的教程如下：

```
 public sealed class Singleton
 {
      private static readonly Singleton instance = new Singleton();

      private Singleton(){}

      public static Singleton Instance
      {
         get 
         {
            return instance; 
         }
      }
 } 
```

但我已经在程序集中有一个类，我需要在应用程序生命周期内只拥有它的一个实例。我不知道如何使用上面提到的模式。

例如，假设 dll 中有一个名为 Y 的类 X 。下面的代码是否正确：

```
 public sealed class Singleton
 {
      private static readonly Y.X instance = new Y.X();

      private Singleton(){}

      public static Y.X Instance
      {
         get 
         {
            return instance; 
         }
      }
 } 
```

这是一个真正的单身人士吗？如果不是，那么处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:11:11.180

我会使用类似的东西：

```
public static class Singleton<T>
   where T : new()
{
    private static readonly Lazy<T> instance = new Lazy<T>();

    public static T Instance
    {
        get
        {
            return instance.Value;
        }
    }
} 
```

这个想法是使用泛型以允许将任何类型指定为类型参数。

惰性只是实例化对象的实际实例的一种改进。

请注意，这不会禁止直接创建 T 实例...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:11:16.130

不，它不是单例模式。您调用 new YX() 的事实意味着任何人都可以调用它。这并没有明确禁止 YX() 的新实例

但是，如果您需要确保在应用程序中仅引用一个 YX 实例，则该代码是可以的。然后你可以通过调用 Singleton.Instance 来获取它。

这实际上是工厂模式（一个专门用于创建对象的类），我建议您调用类 XFactory 或类似的东西，而不是单例。

# scala - 如何在 Scala 中定义错误类型？

> ID：10916989
> 
> 赞同：3
> 
> 时间：2012-06-06T15:06:07.393
> 
> 标签：scala, enums

假设我为我的 Scala 应用程序定义了错误。我希望它们是`Error`,`Warning`和`Ok`. 我希望 `Error`and`Warning`包含人类可读的文本消息。

例如，我还想分配数字代码（0 - for `Ok`，1 - for`Warning`和 2 - for `Error`）以查找错误列表中最严重的错误。

因此，我将这个错误内容定义如下：

```
对象我的错误{  
  抽象密封案例类 MyError(code: Int, maybeMessage: Option[String])
  对象 Ok 扩展 MyError(0, None)
  最终案例类 Warning(message) extends MyError(1, Some(message))
  最终案例类 Error(message) 扩展 MyError(2, Some(message))
}
```

是否有意义？你将如何实施它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T15:25:06.830

根据我的几个问题：

1.  您不能扩展案例类。考虑`sealed trait`或简单`abstract class`
2.  为什么它们都包含在`MyErrors`对象中？
3.  你真的需要这个`Int`领域吗？您可以使用模式匹配进行过滤。
4.  作为一个看起来语义错误`Ok`的实例。`MyError`我宁愿用`Status`
5.  选择的问题，但我会为`ErroneousStatus`
6.  在您设计设计之前，您是否考虑过[`Either`](http://www.scala-lang.org/api/current/index.html#scala.Either)或[`Validation`](http://scalaz.googlecode.com/svn/continuous/latest/doc/scalaz/Validation.html)作为替代方案？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:43:06.590

这就是我认为你正在尝试做的事情：

```
object MyErrors extends Enumeration {
  val Ok = Value("ok", 0)
  val Warning = Value("warning", 1)
  val Error = Value("error", 2)

  class TypeVal(val name: String, val code: Int) extends Val(nextId, name)

  protected final def Value(name: String, code: Int) = new TypeVal(name, code)

  sealed case class MyError(error: TypeVal, maybeMessage: Option[String])

  def ok(msg: Option[String] = None) = new MyError(Ok, msg)
  def error(msg: Option[String] = None) = new MyError(Error, msg)
  def warning(msg: Option[String] = None) = new MyError(Warning, msg)

} 
```

用于：

```
val e = MyErrors.error() 
// or
val f = MyErrors.ok(Option("Don't worry, be happy"))
f.error.code // Int = 0
f.maybeMessage // Option[String] = Some(Don't worry, be happy) 
```

显然，它可以清理很多。但它应该让你继续前进。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T17:06:32.523

`Status`根据 Nicolas将您的类型重命名为的建议，这里有一些其他细节的代码：

```
sealed trait Status {
  def code: Int
}
object Status {
  case object Ok extends Status {
    val code = 0
  }
  sealed trait WithMessage extends Status {
    def message: String
  }
  case class Warning (message: String) extends WithMessage {
    val code = 1
  }
  case class Error (message: String) extends WithMessage {
    val code = 2
  }
} 
```

然后你可以像这样使用它：

```
scala> Status.Ok
res0: Status.Ok.type = Ok

scala> Status.Warning("blabla")
res1: Status.Warning = Warning(blabla)

scala> Status.Error("blabla").code
res2: Int = 2 
```

# sql-server - 获取 SQL Server 2005 及更高版本的唯一数据库标识符

> ID：10916991
> 
> 赞同：4
> 
> 时间：2012-06-06T15:06:11.197
> 
> 标签：sql-server, database, tsql, guid

有没有办法从 SQL 2005 数据库中获取唯一的数据库标识符（例如 GUID）？

我发现这篇文章：http: [//msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.database.databaseguid%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.database.databaseguid%28v=sql.90%29.aspx)

但是，我需要能够从 T-SQL 而不是 VB 获取 DatabaseGuid。

编辑：我正在尝试唯一确定我连接的数据库。通过代码，我在 SQL Compact 和 SQL Server 之间手动同步记录。现在我的用户处于测试环境中，当他们将来指向生产 SQL 时，我需要重新同步整个表，而不是依赖 rowversion。生产服务器上的行版本会有所不同，如果我能够检测到数据库 GUID 更改，我可以重新同步整个表。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T15:26:22.813

无论 SMO 使用什么方法来获取数据库 guid，您都应该能够做到这一点。如果您在弄清楚 SMO 在做什么时遇到问题，您可以使用分析器来监控 t 执行的内容并找出答案。

在这种情况下，SMO 可能从以下位置读取`database_guid`值[`sys.database_recovery_status`](http://msdn.microsoft.com/en-us/library/ms178575.aspx)：

> 用于将一个数据库的所有数据库文件关联在一起。所有文件的标题页中都必须包含此 GUID，数据库才能按预期启动。只有一个数据库应该有此 GUID，但可以通过复制和附加数据库来创建副本。还原尚不存在的数据库时，RESTORE 始终会生成新的 GUID。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-24T22:53:53.770

对于正在寻找查询以返回数据库的 GUID 的其他人：

```
SELECT d.name, drs.database_guid, d.group_database_id 
FROM sys.databases d 
JOIN sys.database_recovery_status drs
ON d.database_id = drs.database_id 
```

它返回可用性组中此数据库的数据库名称、数据库 GUID 和 GUID。如果数据库不在 AG 中，则最后一个值返回 null。这适用于 SQL Server 2016。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:50:32.320

我不知道返回哪个 GUID SMO，但您可以使用

```
select service_broker_guid from sys.databases 
```

!= Guid.Empty 对于除 master 和 model 之外的所有数据库。

我发现并非所有数据库都有一个 NOT NULL sys.database_recovery_status.database_guid，正如 Remus 所建议的那样。

在 SQL2008 上完成的测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-03T07:12:54.797

事实上，我使用分析器发现 database_guid 确实来自 sys.database_recovery_status，这是我捕获的代码：

```
 exec sp_executesql N'SELECT
    ISNULL((case dmi.mirroring_redo_queue_type when N''UNLIMITED'' then 0 else dmi.mirroring_redo_queue end),0) AS [MirroringRedoQueueMaxSize],
    ISNULL(dmi.mirroring_connection_timeout,0) AS [MirroringTimeout],
    ISNULL(dmi.mirroring_partner_name,'''') AS [MirroringPartner],
    ISNULL(dmi.mirroring_partner_instance,'''') AS [MirroringPartnerInstance],
    ISNULL(dmi.mirroring_role,0) AS [MirroringRole],
    ISNULL(dmi.mirroring_safety_level + 1, 0) AS [MirroringSafetyLevel],
    ISNULL(dmi.mirroring_state + 1, 0) AS [MirroringStatus],
    ISNULL(dmi.mirroring_witness_name,'''') AS [MirroringWitness],
    ISNULL(dmi.mirroring_witness_state + 1, 0) AS [MirroringWitnessStatus],

    CAST(case when dmi.mirroring_partner_name is null then 0 else 1 end AS bit) AS [IsMirroringEnabled],
    ISNULL(dmi.mirroring_guid,''00000000-0000-0000-0000-0000000000000000'') AS [MirroringID],
    ISNULL(dmi.mirroring_role_sequence,0) AS [MirroringRoleSequence],
    ISNULL(dmi.mirroring_safety_sequence,0) AS [MirroringSafetySequence],
    ISNULL(dmi.mirroring_failover_lsn,0) AS [MirroringFailoverLogSequenceNumber],
    dtb.is_ansi_null_default_on AS [AnsiNullDefault],
    dtb.is_ansi_nulls_on AS [AnsiNullsEnabled],
    dtb.is_ansi_padding_on AS [AnsiPaddingEnabled],
    dtb.is_ansi_warnings_on AS [AnsiWarningsEnabled],
    dtb.is_arithabort_on AS [ArithmeticAbortEnabled],
    dtb.is_auto_shrink_on AS [AutoShrink],
    dtb.is_cursor_close_on_commit_on AS [CloseCursorsOnCommitEnabled],
    dtb.is_concat_null_yields_null_on AS [ConcatenateNullYieldsNull],
    dtb.is_numeric_roundabort_on AS [NumericRoundAbortEnabled],
    dtb.is_quoted_identifier_on AS [QuotedIdentifiersEnabled],
    dtb.is_read_only AS [ReadOnly],
    dtb.is_recursive_triggers_on AS [RecursiveTriggersEnabled],
    dtb.is_local_cursor_default AS [LocalCursorsDefault],
    dtb.page_verify_option AS [PageVerify],
    dtb.recovery_model AS [RecoveryModel],
    dtb.user_access AS [UserAccess],
    dtb.is_db_chaining_on AS [DatabaseOwnershipChaining],
    dtb.is_auto_update_stats_async_on AS [AutoUpdateStatisticsAsync],
    dtb.is_date_correlation_on AS [DateCorrelationOptimization],
    dtb.is_trustworthy_on AS [Trustworthy],
    dtb.name AS [Name],
    dtb.database_id AS [ID],
    dtb.create_date AS [CreateDate],
    dtb.is_auto_create_stats_on AS [AutoCreateStatisticsEnabled],
    dtb.is_auto_update_stats_on AS [AutoUpdateStatisticsEnabled],
    dtb.is_parameterization_forced AS [IsParameterizationForced],
    dtb.is_read_committed_snapshot_on AS [IsReadCommittedSnapshotOn],
    dtb.is_auto_close_on AS [AutoClose],
    dtb.is_broker_enabled AS [BrokerEnabled],
    CAST(isnull(dtb.source_database_id, 0) AS bit) AS [IsDatabaseSnapshot],
    ISNULL(DB_NAME(dtb.source_database_id), N'''') AS [DatabaseSnapshotBaseName],
    dtb.is_fulltext_enabled AS [IsFullTextEnabled],
    dtb.service_broker_guid AS [ServiceBrokerGuid],
    dtb.snapshot_isolation_state AS [SnapshotIsolationState],
    (dtb.is_published*1+dtb.is_subscribed*2+dtb.is_merge_published*4) AS [ReplicationOptions],
    ISNULL(suser_sname(dtb.owner_sid),'''') AS [Owner],
    ISNULL(dtb.log_reuse_wait,0) AS [LogReuseWaitStatus],
    drs.recovery_fork_guid AS [RecoveryForkGuid],
    drs.database_guid AS [DatabaseGuid],
    CAST((case when drs.last_log_backup_lsn is not null then 1 else 0 end) AS bit) AS [HasFullBackup],
    CAST(case when dtb.name in (''master'',''model'',''msdb'',''tempdb'') then 1 else dtb.is_distributor end AS bit) AS [IsSystemObject],
    CAST(case when ctb.database_id is null then 0 else 1  end AS bit) AS [ChangeTrackingEnabled],
    CAST(ISNULL(ctb.is_auto_cleanup_on,0) AS bit) AS [ChangeTrackingAutoCleanUp],
    ISNULL(ctb.retention_period,0) AS [ChangeTrackingRetentionPeriod],
    CAST(ISNULL(ctb.retention_period_units,0) AS tinyint) AS [ChangeTrackingRetentionPeriodUnits],
    dtb.containment AS [ContainmentType],
    dtb.default_language_lcid AS [DefaultLanguageLcid],
    dtb.default_language_name AS [DefaultLanguageName],
    dtb.default_fulltext_language_lcid AS [DefaultFullTextLanguageLcid],
    ISNULL(dtb.default_fulltext_language_name,N'''') AS [DefaultFullTextLanguageName],
    CAST(dtb.is_nested_triggers_on AS bit) AS [NestedTriggersEnabled],
    CAST(dtb.is_transform_noise_words_on AS bit) AS [TransformNoiseWords],
    dtb.two_digit_year_cutoff AS [TwoDigitYearCutoff],
    dtb.target_recovery_time_in_seconds AS [TargetRecoveryTime],

              case
              when dtb.collation_name is null then 0x200
              else 0
              end |
              case
              when 1 = dtb.is_in_standby then 0x40
              else 0
              end |
              case dtb.state
              when 1 then 0x2
              when 2 then 0x8
              when 3 then 0x4
              when 4 then 0x10
              when 5 then 0x100
              when 6 then 0x20
              else 1
              end
             AS [Status],
    CAST(( case LOWER(convert( nvarchar(128), DATABASEPROPERTYEX(dtb.name, ''Updateability''))) when ''read_write'' then 1 else 0 end) AS bit) AS [IsUpdateable],
    CAST(dtb.is_encrypted AS bit) AS [EncryptionEnabled],
    CAST(dtb.is_honor_broker_priority_on AS bit) AS [HonorBrokerPriority],
    CAST(has_dbaccess(dtb.name) AS bit) AS [IsAccessible],
    ISNULL(fsopt.directory_name , N'''') AS [FilestreamDirectoryName],
    ISNULL(fsopt.non_transacted_access , 0) AS [FilestreamNonTransactedAccess],
    dtb.name AS [DatabaseName2],
    dtb.containment AS [ContainmentType2]
    FROM
    master.sys.databases AS dtb
    LEFT OUTER JOIN sys.database_mirroring AS dmi ON dmi.database_id = dtb.database_id
    LEFT OUTER JOIN sys.database_recovery_status AS drs ON drs.database_id = dtb.database_id
    LEFT OUTER JOIN sys.change_tracking_databases AS ctb ON ctb.database_id = dtb.database_id 
    LEFT OUTER JOIN sys.database_filestream_options AS fsopt ON fsopt.database_id = dtb.database_id
    WHERE
    (dtb.name=@_msparam_0)',N'@_msparam_0 nvarchar(4000)',@_msparam_0=N'testdb3' 
```

搜索“sys.database_recovery_status as drs”

# android - Android：无法注册广播接收器

> ID：10916992
> 
> 赞同：1
> 
> 时间：2012-06-06T15:06:16.210
> 
> 标签：android

我正在尝试使用 java 而不是清单来注册接收器，因为当我的应用程序关闭时我不需要此接收器工作。

如果我使用清单，我的接收器运行良好：

```
 <receiver android:name=".services.PlayerService$RemoteControlReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.MEDIA_BUTTON" />
        </intent-filter>
    </receiver> 
```

如果我在没有清单的情况下在我的活动中注册它，这根本不起作用：

```
IntentFilter filter = new IntentFilter();
    {
        filter.addAction("android.intent.action.MEDIA_BUTTON");
    }

    registerReceiver(RemoteControlReceiver, filter); 
```

我不需要使用清单，因为我只想在我的应用打开时控制耳机按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:55:28.127

使用`Intent.ACTION_MEDIA_BUTTON`而不是`android.intent.action.MEDIA_BUTTON`作为；

```
IntentFilter filter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);    
filter.setPriority(10000);    
registerReceiver(RemoteControlReceiver, filter); 
```

# jquery - jQuery 可访问性 - 浏览网站

> ID：10916994
> 
> 赞同：0
> 
> 时间：2012-06-06T15:06:27.653
> 
> 标签：jquery, tabs, focus, accessibility

我正在尝试在我的网站中创建一个标签焦点。每次用户点击 tab 键时，焦点都会移动到页面上的下一个项目。

这适用于 ie 中的框（版本 9 和 8 测试），但在 FF 中它仅适用于表单元素。

我可以使用 jquery 更普遍地工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:42:36.147

给所有你想要的属性标签`tabindex="0"`

例子：

```
<b tabindex="0">Tabbable Title</b> 
<p tabindex="0">My tabbable content</p>
<div tabindex="0" style='height: 100px; width: 100px; border: 1px solid red;'></div> 
```

[演示在这里](http://jsfiddle.net/Bycwm/)，只需单击“Tabbable Title”文本，然后按 TAB 前进，按 Shift+TAB 后退元素。

这将按每个元素在页面上出现的顺序进行选项卡。您还可以通过为 tabindex 指定一个非 0 的数字来指定您自己的 tab 顺序，它将从 1 到 2 到 3 等等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T15:49:00.890

是的你可以。使用 jQuery，您可以使用：

```
$(function() {            
    if($.browser.mozilla) 
        $('*').attr('tabindex', 0);
}); 
```

# c# - 为什么 C# hashSet 接受添加具有相同 getHashCode() 值的两个对象？

> ID：10916995
> 
> 赞同：8
> 
> 时间：2012-06-06T15:06:28.573
> 
> 标签：c#, hashset

我有一个覆盖 GetHashCode() 的 CustomObject 对象。我有一个 HashSet，我可以用两个具有相同哈希码的不同对象调用 add。两者都被添加，后来我遇到了一些数据库插入问题（主键重复）......使用 hashSet 的目的与这些数据库插入有关（避免键冲突）。

我可能会错过 HashSet 的某些属性吗？即使我在添加（.Add）之前尝试检查（.Contains），我最终也会添加hashCode重复......

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-06T15:07:32.450

因为`HashSet<T>`成员资格基于对象相等，而不是哈希码相等。a 的每个成员`HashSet<T>`拥有相同的哈希码是完全合法的，只要成员根据`Equals`. 哈希码的作用`HashSet<T>`是快速测试成员资格。如果你有一个对象并且它的哈希码不在 中`HashSet<T>`，那么你就知道该对象不在`HashSet<T>`. 如果您有一个对象并且它的哈希码在 中`HashSet<T>`，那么您必须使用相同的哈希码遍历对象链来测试是否相等，`Equals`以查看该对象是否实际上在 中`HashSet<T>`。这就是为什么平衡的哈希码分布很重要。但是，唯一的哈希码并不是必须的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-06T15:10:18.980

覆盖 GetHashCode 是不够的。您还需要覆盖 Equals 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T15:07:43.510

不要*使用*哈希集来避免重复值。使用它们来平衡哈希表！

# c++ - 全屏 SDL 中的 Alt-tab

> ID：10916997
> 
> 赞同：3
> 
> 时间：2012-06-06T15:06:41.683
> 
> 标签：c++, opengl, sdl, fullscreen, alt-tab

当我运行全屏窗口（使用`SDL_FULLSCREEN`标志的 SDL 的 C++）时，alt-tab 无效。研究它，我只发现有人对此有问题的帖子。有没有办法在不同的机器上一致地做到这一点？（我现在正在运行 Ubuntu，但我想要可移植性）是否能`OpenGL`更好地处理这个问题？（考虑切换）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:07:48.557

SDL 喜欢`XGrabKeyboard()`在 X11 上全屏显示。这往往会锁定您的窗口管理器的热键。

修复 SDL 或修复您的窗口管理器。

# javascript - 谷歌图表设置网格线颜色

> ID：10916998
> 
> 赞同：11
> 
> 时间：2012-06-06T15:06:49.733
> 
> 标签：javascript, syntax, google-visualization, gridlines

我正在尝试使用 Google Charts 在我的图表背景中设置网格线的颜色。

我有这个代码来设置图表的选项：

```
ac.draw(activityData, {
    title : 'Monthly Coffee Production by Country',
    isStacked: true,
    width: 600,
    height: 400,
    fontSize: 0,
    backgroundColor: '#1E4D6B',
        hAxis.gridlines.color: '#1E4D6B'
}); 
```

但是，我不知道如何使用[配置选项页面](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)`hAxis.gridlines.color`中出现的代码中的选项。

如果我简单地说`hAxis.gridlines.color`，它会在控制台中出现错误：

> Uncaught SyntaxError: Unexpected token 。

使用包含句点的选项的正确语法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T15:29:33.780

这是您作为*draw()*的第二个参数传递的对象文字，所以我想它应该是：

`hAxis: {gridlines: {color: '#1E4D6B'}}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-12T12:11:06.180

`gridlineColor: '#f0f'`也可以，这就是你的做法。

```
{vAxis: {gridlineColor: '#f0f'}} 
```