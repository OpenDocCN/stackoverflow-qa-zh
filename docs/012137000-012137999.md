# StackOverflow 问答 12137000-12137999

# c# - 如何根据用户输入在 LINQ 中 OrderBy 和 ThenBy？

> ID：12137000
> 
> 赞同：1
> 
> 时间：2012-08-27T06:16:00.653
> 
> 标签：c#, linq

我在一个页面上有一个网格，我希望它可以同时在多个列上进行排序。

例如：

```
UserID        FirstName        LastName
=======================================
1             Bruce            Wayne
2             Peter            Parker
3             Clark            Kent
4             Tony             Stark
5             Helena           Wayne 
```

用户可以选择按 LastName ASC 排序，然后按 FirstName DESC 排序，这将产生以下结果：

```
UserID        FirstName        LastName
=======================================
3             Clark            Kent
2             Peter            Parker
4             Tony             Stark
5             Helena           Wayne
1             Bruce            Wayne 
```

用户可以重置排序并决定以其他方式对其进行排序。

如何在 LINQ 中实现这一点？据我所知，链式排序的方法是做类似的事情

```
superheroes.OrderBy(x => x.LastName).ThenByDescending(x => x.FirstName) 
```

显然，我不想写出所有可能的列顺序组合（我的网格可能最多有 10 列）。有什么方法可以使排序顺序动态化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:30:58.193

IEnumerable 的一种天真的方法（不是完美的或经过测试的，但你明白了）。我把开关放在外面，所以比较只进行一次，而不是每次调用选择器。有点难看，因为你基本上必须在 OrderBy 和 ThenBy 中重复自己，不过。

```
enum OrderableColumns {UserID, FirstName, ...}

IOrderedEnumerable<SuperHero> OrderBy(SuperHeroes superheroes, OrderableColumns column)
{
    switch(column)
    {
        case UserID:
            return superheroes.OrderBy(x => x.UserID);
        case FirstName:
            return superheroes.OrderBy(x => x.FirstName);
        ...
    }
}

IOrderedEnumerable<SuperHero> ThenBy(IOrderedEnumerable<SuperHero> superheroes, OrderableColumns column)
{
    switch(column)
    {
        case UserID:
            return superheroes.ThenBy(x => x.UserID);
        case FirstName:
            return superheroes.ThenBy(x => x.FirstName);
        ...
    }
}

IOrderedEnumerable<SuperHero> OrderSuperheroes(SuperHeroes superheroes, params OrderableColumns[] columns)
{
     var ordered = OrderBy(superheroes, columns[0]);

     foreach(var col in columns.Skip(1))
         ordered = ThenBy(ordered, col);

     return ordered;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T06:20:32.200

您需要使用动态 LINQ。查看[动态 LINQ（第 1 部分：使用 LINQ 动态查询库）](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:04:41.313

您可以构建一个`Func<T,TResult>`动态，如下所示：

```
public static Func<T,object> GetExp<T>(string preportyName)
{
    var instance = Expression.Parameter(typeof(T));
    var callPreporty = Expression.PropertyOrField(instance, preportyName);
    var lambda = Expression.Lambda<Func<T, object>>(callPreporty,instance);
    return lambda.Compile();
} 
```

像这样使用：

```
var pdotName = GetExp<Person>("Name");  //equals: p=>p.Name
var pdotID = GetExp<Person>("Id");  ////equals: p=>p.Id
var ordered = list.OrderBy(pdotName).ThenBy(pdotID);
//equals: list.OrderBy(p=>p.Name).ThenBy(p=>p.Id) 
```

# linux - 使用标准 unix 工具在文件中间插入行

> ID：12137013
> 
> 赞同：2
> 
> 时间：2012-08-27T06:17:12.837
> 
> 标签：linux, macos, unix, sed

我可以使用`sed`. 有没有一种简单的方法可以将这一行或段落插入到另一个文件的特定行中？

`sed -n 1,10p >> foo`将结果附加到`foo`，将其放在底部。是否有标准的 unix 工具可以插入特定的行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T06:33:59.310

也许您正在寻找`sed`' 的`r`命令？

```
sed '123r file.txt' main.txt 
```

`file.txt`在第 123 行插入 的内容，将所有内容`main.txt`打印到标准输出。

（如果你`sed`有这个`-i`选项，你可以`main.txt`直接修改它；否则，它不会修改它的输入文件。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T06:22:58.367

如果要替换`n`文件中的第 th 行，`foo`可以使用

```
cp foo foo.tmp
head -n $((n-1)) foo.tmp > foo
echo "newline" >> foo
tail -n +$((n+1)) foo.tmp >> foo 
```

所以你把第一`n-1`行加上`head -n NR`，附加你的新行，然后从行开始附加其余`n+1`部分`tail -n +NR`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:06:17.617

这可能对您有用（GNU sed）：

```
sed '123s|.*|sed '\''1,10!d'\'' insert.txt|e' main.txt 
```

# nhibernate - 如何使用 Spring.net 和 NHibernate 创建和管理两个单独的会话工厂？

> ID：12137017
> 
> 赞同：0
> 
> 时间：2012-08-27T06:17:34.350
> 
> 标签：nhibernate, asp.net-mvc-4, spring.net

我的应用程序正在与两个独立的数据库进行交互。我想像往常一样用 spring.net 注入会话工厂。当我使用两个单独的 dbProviders 创建 2 个会话工厂时，它显示错误。有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:04:17.617

您必须使用[`DelegatingLocalSessionFactory`](http://www.springframework.net/doc-latest/reference/html/orm.html#d4e6786)适用于 Spring.NET 1.3.1 及更高版本的对象。根据文档：

> 由于 NHibernate 项目的 ISessionFactory API 的变化，这种方法仅在 NHibernate 2.1.2 和 NHibernate 3.0 下受支持

我不确定 NHibernate > 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:27:19.730

我通过使用 Spring AOP 创建自己的事务 API 来解决它。

# python - 如何在 numpy.vectorize 中明确指定输出的字符串长度

> ID：12137018
> 
> 赞同：1
> 
> 时间：2012-08-27T06:17:37.267
> 
> 标签：python, numpy

我正在尝试使用 numpy.vectorize 将一些整数转换为字符串。但是，输出字符串似乎总是限制为最多 8 个字符。

```
In [1]: import numpy as np

In [2]: str = "abcdefghijklmnopqrstuvwxyz"

In [3]: def num_str(num):
   ...:     return str[:num]
   ...: 

In [4]: np.vectorize(num_str)(np.arange(15))
Out[4]: 
array(['', 'a', 'ab', 'abc', 'abcd', 'abcde', 'abcdef', 'abcdefg',
       'abcdefgh', 'abcdefgh', 'abcdefgh', 'abcdefgh', 'abcdefgh',
       'abcdefgh', 'abcdefgh'], 
      dtype='|S8') 
```

我也尝试过明确指定 otypes 但即使那样它似乎也不起作用。

```
In [5]: np.vectorize(num_str, otypes=["|S25"])(np.arange(15))
Out[5]: 
array(['', 'a', 'ab', 'abc', 'abcd', 'abcde', 'abcdef', 'abcdefg',
       'abcdefgh', 'abcdefgh', 'abcdefgh', 'abcdefgh', 'abcdefgh',
       'abcdefgh', 'abcdefgh'], 
      dtype='|S8') 
```

截至目前，我将 otype 设置为对象，最后将它们转换为字符串。

```
In [6]: np.vectorize(num_str, otypes=["O"])(np.arange(15)).astype('|S25')
Out[6]: 
array(['', 'a', 'ab', 'abc', 'abcd', 'abcde', 'abcdef', 'abcdefg',
       'abcdefgh', 'abcdefghi', 'abcdefghij', 'abcdefghijk',
       'abcdefghijkl', 'abcdefghijklm', 'abcdefghijklmn'], 
      dtype='|S25') 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:38:07.500

它似乎是 Numpy 中的一个已知错误：[http ://projects.scipy.org/numpy/ticket/1892](http://projects.scipy.org/numpy/ticket/1892)

您的解决方法看起来不错。你可能想在 Numpy 邮件列表上提问或对 bug 票发表评论。似乎最近没有采取任何行动来修复它。

# iphone - iphone应用程序自动启动

> ID：12137021
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:18:05.223
> 
> 标签：iphone

iphone中是否有任何选项可以让我在预定义的时间间隔内自动启动我的应用程序？例如像警报应用程序，但我们不希望我们的应用程序在后台运行。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T06:20:46.647

没有这样的选项。您可以实现的最好的方法是向用户显示本地通知，然后可以通过通知启动应用程序。查看[关于本地通知和推送通知](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)以了解其工作原理并最终实施

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T06:21:55.797

**不**，无法自动启动您的应用程序。

[您可以为用户提供使用本地通知](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)启动应用程序的选项，但它不能保证您的应用程序会启动，因为如果用户忽略本地通知，您的应用程序将不会启动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T06:21:23.907

没有官方支持的方式来做到这一点。

# asp.net-mvc-3 - Request.Url 什么时候可以为空？

> ID：12137022
> 
> 赞同：40
> 
> 时间：2012-08-27T06:18:06.573
> 
> 标签：asp.net-mvc-3, controller, resharper

在我的控制器代码中，我正在使用：`Request.Url.<Something>`. ReSharper 建议`Request.Url`可以为空。

那么，**究竟什么时候可以`Request.Url`为空呢？**我不是在谈论测试，我只对实时/已经部署的应用程序感兴趣。

请注意，到目前为止，我还没有收到任何`NullReferenceException`使用`Request.Url`过的 s。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-27T06:37:55.907

`HttpRequestBase`是一个类，ReSharper 将其视为一个实际的类，仅此而已（理论上，它可以`null`）。所以不分析这个具体Class的用法。

实际上，我认为这`Request.Url`永远*不会*`null`，所以在这种情况下忽略 ReSharper 。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-02T08:26:59.050

实际上`NullReferenceException`在使用时会发生`Request.Url`. 当您创建自己的其他类派生自的基本控制器类时，`Request`将为空。或者在将 ActionMailer 与 ASP.NET MVC 一起使用时，您必须创建一个派生自的控制器类`MailerBase`（这也会导致`Request`该控制器内部为空）。

替代方案：使用`HttpContext.Current.Request`或检查是否`Request`为空。

# spring - Spring MVC 资源与文件系统不同步：'/HelloWorld/WebContent/.DS_Store'

> ID：12137024
> 
> 赞同：0
> 
> 时间：2012-08-27T06:18:38.190
> 
> 标签：spring, spring-mvc, spring-security, jstl

我正在 Spring MVC 上启动一个 helloWorld 项目

我正在使用这个版本：[Springsource](http://www.springsource.org/download/community) (spring-3.2.0.M1-dist.zip (sha1) 44.5 MB)

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
    <web-app version="3.2" 
        xmlns="http://java.sun.com/xml/ns/j2ee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
        http://java.sun.com/xml/ns/j2ee/web-app_3_2.xsd">

        <display-name>HelloWorld</display-name>

        <servlet>
            <servlet-name>helloworld</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>helloworld</servlet-name>
            <url-pattern>*.html</url-pattern>
        </servlet-mapping> 

        <welcome-file-list>
            <welcome-file>index.jsp</welcome-file>
        </welcome-file-list>
    </web-app> 
```

这里是我的 servlet 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <context:component-scan base-package="helloWorld"/>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>
</beans> 
```

当我尝试使用 tomcat 运行时，出现此错误：

```
GRAVE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component 
```

请问如何解决 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:30:13.437

检查应用程序的 lib 文件夹中是否有任何特定于容器的 jar，例如 servlet-api.jar，如果有，请删除它们。

[java.lang.ClassNotFoundException: HttpServletRequest](https://stackoverflow.com/questions/10556201/tomcat-7-0-27-not-starting)

# javascript - javascript函数将当前时间显示为html select标签的预选值

> ID：12137025
> 
> 赞同：0
> 
> 时间：2012-08-27T06:18:45.480
> 
> 标签：javascript, html

我想在 html 中有两个选择标签，一个用于小时，一个用于分钟。我希望在当前小时设置小时的默认值，在当前分钟设置分钟的值。我认为默认时间设置为例如 3，我应该有这样的事情：

```
<select name="hour">
<option value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3" selected="selected">3</option>
<option value="4">4</option>
...
<option value="23">23</option>
</select> 
```

现在我的问题是我如何使用 javascript 默认显示当前的小时和分钟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:23:48.697

有称为和的 JavaScript[`Date`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。所以给出：[`.getHours()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours)[`.getMinutes()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMinutes)

```
<select id="hour" name="hour">...</select>
<select id="minute" name="minute">...</select> 
```

您可以在选择后出现的脚本块中执行以下操作（或称为 onload 或在 DOM 就绪时）：

```
var currentDateTime = new Date();

document.getElementById("hour").value = currentDateTime.getHours();
document.getElementById("minute").value = currentDateTime.getMinutes(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:27:13.590

根据您创建`option`元素的方式，一种方法是使用：

```
var now = new Date(),
    // we're adding one because JavaScript returns zero-based hours, 0-23
    hour = now.getUTCHours() + 1,
    sel = document.getElementById('hours'),
    opt;

for (var i=0; i<24; i++){
    opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    sel.appendChild(opt);
    if (i == hour) {
        opt.selected = true;
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2dgfr/)。

这使用 JavaScript`Date()`方法，`getUTCHours()`

如果您的`option`元素已经在 HTML 中设置，并且您只是更改`selected`默认设置：

```
var now = new Date(),
    hour = now.getUTCHours() + 1,
    sel = document.getElementById('hours'),
    curHour = sel.getElementsByTagName('option')[hour];

curHour.selected = true; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2dgfr/1/)。

参考：

*   [`Date()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date).

# asp.net - ASP.Net mvc2 url 格式问题

> ID：12137028
> 
> 赞同：0
> 
> 时间：2012-08-27T06:19:11.773
> 
> 标签：asp.net, url, asp.net-mvc-2, maproute

在我的 mvc2 项目中，一些 URL 显示在浏览器中，如下所示，

> 本地主机:53289/Paper/ViewAgendaPaper?MeetingId=186&type=2&RefId=186

但我更喜欢看起来像这样

> 本地主机:53289/Paper/ViewAgendaPaper

在我的 Global.asax 中，

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Default", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

如何隐藏 URL 中的 id 字段。请给我一些想法。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:56:55.017

据我认为你不能隐藏 ID，因为它们应该被传递以获取确切的数据，但是而不是

```
localhost:53289/Paper/ViewAgendaPaper?MeetingId=186&type=2&RefId=186 
```

你可以拥有它：

```
localhost:53289/Paper/ViewAgendaPaper/186/2/186 
```

阅读这篇文章将对您有更多帮助： [如何在 ASP.NET MVC 中创建友好的 URL？](https://stackoverflow.com/questions/217960/how-can-i-create-a-friendly-url-in-asp-net-mvc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:04:09.807

您无法通过简单的链接来完成您的要求。锚链接`<a>...</a>`执行简单的 GET。如果要隐藏参数，则需要对相关页面进行 POST。

# jquery - 删除带有列表项的按钮

> ID：12137031
> 
> 赞同：2
> 
> 时间：2012-08-27T06:19:30.440
> 
> 标签：jquery

我不知道这个 jQuery 代码有什么问题。我没有收到来自调试器的错误。我对出了什么问题感到迷茫。

```
<ul id="list"></ul>

<script>

$(document).ready(function() {

$('#show_place_on_screen').click(function () {

var address = $('#address').val();

$("#list").append('<li>' + address + '<input type="button"   

id="delete" value="Delete"/></li>');

});

$("#delete").click(function() { 

    $(this).parent().remove();

});});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:29:57.510

您应该委托`click`事件，也可以使用类，ID 必须是唯一的：

```
$(document).ready(function() {
    $('#show_place_on_screen').click(function() {
        var address = $('#address').val();
        $("#list").append('<li>'+address+'<input type="button" class="delete" value="Delete"/></li>');
    });

    $(document).on('click', '.delete', function() {
        $(this).parent().remove();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:27:18.443

当您附加到列表时，您为每个按钮提供相同的`id`. 如果 DOM 中的多个元素具有相同的`id`，您的单击处理程序目标`id`可能会中断。

尝试：

```
$("#list").append('<li>' + address + '<input type="button" class="delete" value="Delete"/></li>'); 
```

和：

```
$(".delete").live('click', function() { 
  $(this).parent().remove();
}); 
```

此外，您最好希望`address`不包含任何可能被解释为 HTML 的讨厌的代码。你可能应该逃避它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:31:14.790

试试怎么样

> 绑定（'点击'，函数（）{}）

而不是当前的 `.click(function() {....`

由于这些元素是由一些 jquery 代码自动生成的

希望这可以帮助

# jquery - 将外部 URL 加载到模态 jquery ui 对话框中

> ID：12137033
> 
> 赞同：34
> 
> 时间：2012-08-27T06:19:53.957
> 
> 标签：jquery, jquery-ui

为什么这不将 ibm.com 显示为 400x500px 模式？该部分似乎是正确的，但它不会导致弹出模式出现。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<title>test</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />

<link rel="stylesheet" type="text/css" media="screen" href="css/jquery-ui-1.8.23.custom.css"/>

</head>

<body>

<p>First open a modal <a href="http://ibm.com" class="example"> dialog</a></p>

</body>

<!--jQuery-->
<script src="http://code.jquery.com/jquery-latest.pack.js"></script>
<script src="js/jquery-ui-1.8.23.custom.min.js"></script>

<script type="text/javascript">
function showDialog(){
    $(".example").dialog({
    height: 400,
            width: 500,
            modal: true 
return false;   
}
 </script>

</html> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-24T12:10:20.720

```
var page = "http://somurl.com/asom.php.aspx";

var $dialog = $('<div></div>')
               .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"></iframe>')
               .dialog({
                   autoOpen: false,
                   modal: true,
                   height: 625,
                   width: 500,
                   title: "Some title"
               });
$dialog.dialog('open'); 
```

在函数中使用 this。如果您真的想将外部 URL 作为 IFRAME 加载，这非常好。还要确保在您的自定义 jqueryUI 中有对话框。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-27T06:23:18.023

**编辑：**如果您使用的是最新版本的 jQueryUI，此答案可能已过时。

对于触发对话的锚点 -

```
<a href="http://ibm.com" class="example"> 
```

这是脚本 -

```
$('a.example').click(function(){   //bind handlers
   var url = $(this).attr('href');
   showDialog(url);

   return false;
});

$("#targetDiv").dialog({  //create dialog, but keep it closed
   autoOpen: false,
   height: 300,
   width: 350,
   modal: true
});

function showDialog(url){  //load content and open dialog
    $("#targetDiv").load(url);
    $("#targetDiv").dialog("open");         
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-31T16:22:09.617

以下内容将在任何网站上开箱即用：

```
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>

    <div class="dialogBox" style="border:1px solid gray;">
        <a href="/" class="exampleLink">Test</a>
        <!-- TODO: Change above href -->
        <!-- NOTE: Must be a local url, not cross domain -->
    </div>

    <script type="text/javascript">

        var $modalDialog = $('<div/>', { 
          'class': 'exampleModal', 
          'id': 'exampleModal1' 
        })
        .appendTo('body')
        .dialog({
            resizable: false,
            autoOpen: false,
            height: 300,
            width: 350,
            show: 'fold',
            buttons: {
                "Close": function () {
                    $modalDialog.dialog("close");
                }
            },
            modal: true
        });

        $(function () {
            $('a.exampleLink').on('click', function (e) {
                e.preventDefault();
                // TODO: Undo comments, below
                //var url = $('a.exampleLink:first').attr('href');
                //$modalDialog.load(url);
                $modalDialog.dialog("open");
            });
        });

    </script>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-21T07:42:58.113

```
if you are using **Bootstrap** this is solution, 

$(document).ready(function(e) {
    $('.bootpopup').click(function(){
  var frametarget = $(this).attr('href');
  targetmodal = '#myModal'; 
        $('#modeliframe').attr("src", frametarget );   
});
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Button trigger modal -->
<a  href="http://twitter.github.io/bootstrap/" title="Edit Transaction" class="btn btn-primary btn-lg bootpopup" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</a>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
         <iframe src="" id="modeliframe" style="zoom:0.60" frameborder="0" height="250" width="99.6%"></iframe>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-03T09:54:35.870

我是这样做的，在我的例子中，'struts2ActionName' 是 struts2 动作。您可以改用任何网址。

```
var urlAdditionCert =${pageContext.request.contextPath}/struts2ActionName";
$("#dialogId").load( urlAdditionCert).dialog({
    modal: true,
    height: $("#body").height(),
    width: $("#body").width()*.8
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T19:23:05.930

模态总是将内容加载到页面上的一个元素中，这通常是一个`div`. 当涉及到 jQuery UI 对话框时，可以将其视为等价物`div`。`iframe`现在取决于您的要求，您是想要驻留在页面中的静态内容还是想要从其他位置获取内容。您可以使用此代码，看看它是否适合您：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<title>test</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />

<link rel="stylesheet" type="text/css" media="screen" href="css/jquery-ui-1.8.23.custom.css"/>

</head>

<body>

    <p>First open a modal <a href="http://ibm.com" class="example"> dialog</a></p>
    <div id="dialog"></div>
</body>

<!--jQuery-->
<script src="http://code.jquery.com/jquery-latest.pack.js"></script>
<script src="js/jquery-ui-1.8.23.custom.min.js"></script>

<script type="text/javascript">

$(function(){
//modal window start
$(".example").unbind('click');
$(".example").bind('click',function(){
    showDialog();
    var titletext=$(this).attr("title");
    var openpage=$(this).attr("href");
    $("#dialog").dialog( "option", "title", titletext );
    $("#dialog").dialog( "option", "resizable", false );
    $("#dialog").dialog( "option", "buttons", { 
        "Close": function() { 
            $(this).dialog("close");
            $(this).dialog("destroy");
        } 
    });
    $("#dialog").load(openpage);
    return false;
});

//modal window end

//Modal Window Initiation start

function showDialog(){
    $("#dialog").dialog({
        height: 400,
        width: 500,
        modal: true 
    }
</script>

</html> 
```

但是，您应该记住一些事情。您将无法在本地系统上加载远程 URL，如果要加载远程 URL，则需要上传到服务器。即使这样，您也只能加载属于同一域的 URL；例如，如果您将此文件上传到“www.example.com”，您只能访问“www.example.com”上托管的文件。对于加载外部链接[，这](http://jquery-howto.blogspot.com/2009/04/cross-domain-ajax-querying-with-jquery.html)可能会有所帮助。您可以在@Robin 建议的[链接](https://stackoverflow.com/questions/809035/ajax-jquery-ui-dialog-window-loaded-within-ajax-style-jquery-ui-tabs)中找到所有这些信息。

# android - Android PopUpWindow - 如何设置边距？

> ID：12137038
> 
> 赞同：4
> 
> 时间：2012-08-27T06:20:34.213
> 
> 标签：android, android-layout, popupwindow

我有这个 PopUpWindow 布局：

```
<?xml version="1.0" encoding="utf-8"?> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"        
        android:background="@color/colorbg">    
</LinearLayout> 
```

我试过添加`android:margin = "10dp"`，但它不起作用，它仍然在右上角，根本没有边距。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:29:33.077

我自己没有使用过`PopUpWindow`，但 Android 文档显示了一种方法：

[`showAtLocation(View parent, int gravity, int x, int y)`](http://developer.android.com/reference/android/widget/PopupWindow.html#showAtLocation(android.view.View,%20int,%20int,%20int))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T06:30:25.470

试试这个**android:padding="10dip"**

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
 android:padding="10dip"        
    android:background="@color/colorbg">    
</LinearLayout> 
```

或者

尝试自定义 PopupWindow [点击这里](https://stackoverflow.com/questions/2773502/android-custom-popupwindow-dialog)

# python - 用户选择文件名并将文件名写入文本文件 [Python]

> ID：12137039
> 
> 赞同：1
> 
> 时间：2012-08-27T06:20:35.497
> 
> 标签：python, tkinter

我正在开发一个 python 程序，它将提示用户选择文件（.txt），然后将这些文件名写入文本文件。我认为我在正确的轨道上，但这对我不起作用，我不知道为什么。它会创建文件列表`.txt`，但不会将文件名放入文本文档中。

```
import Tkinter, tkFileDialog
root = Tkinter.Tk()
files = tkFileDialog.askopenfilenames(parent = root, title = "Select files...", multiple =1)
SPSSList = open('list.txt', 'w')
SPSSList.write(files)
SPSSList.close() 
```

对不起，如果我遗漏了一些明显的东西，我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:25:05.673

`file.write`接受一个字符串；`askopenfilenames`返回文件名的元组。

采用

```
for f in files:
    print >> SPSSList, f 
```

如果您想将它们分别写在单独的行上。交替，

```
SPSSList.write('\n'.join(files)) 
```

更灵活一些，因为您可以选择使用不同的分隔符（例如`','.join`）。

# .net - 如何抛出运行时异常

> ID：12137046
> 
> 赞同：2
> 
> 时间：2012-08-27T06:20:48.783
> 
> 标签：.net, runtime, clr, jit, runtimeexception

我开始阅读有关 CLR 的内容，并且想知道如何抛出运行时异常。

当出现任何语法错误并且我们尝试构建程序时，编译器会检测到它并抛出错误。在这种情况下，IL 不会由编译器生成（我假设它不会创建。请澄清）但是当存在运行时错误的可能性（比如除以零或引用 null）时，编译器无法检测到这一点并产生 IL .

在运行程序时，JIT 使用这个 IL 并生成机器代码。现在，当机器代码执行除以零的步骤时，会引发异常。

当出现此类异常时，将在 Visual Studio 中显示该异常发生在哪一行。这是怎么做的？？

希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:43:02.657

基本上，当您运行代码时，会逐行执行。当发生异常时，例如除以零，`Exception class`就会创建一个类型的对象。如果您使用异常处理来捕获异常并且您编写如下内容：

```
catch (Exception ex)   
{  
    MessageBox.Show(ex.Message);  
} 
```

引发异常的对象引用被复制到`ex`变量中（在上述情况下），并且您的程序不会终止，如果您正确处理异常，您可以进一步移动。

因此，它基本上是`Exception class object`在包含有关错误信息的异常生成代码行附近创建的，您可以在 catch 块中复制此引用来处理它。

如果没有异常处理`try, catch()`，则程序终止并显示技术消息。

看看这个以获得清晰的想法：http: [//msdn.microsoft.com/en-us/library/5b2yeyab.aspx](http://msdn.microsoft.com/en-us/library/5b2yeyab.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:59:37.280

Visual Studio 创建 PDB 文件，其中包含该指令的机器代码位置和源代码位置之间的映射。

就像我们编写代码来检查某些条件并抛出异常一样，对于运行时异常，条件是由 jit 生成的，在机器语言中它们会检查错误并抛出异常。因此，在每次除法操作之前，运行时都会进行零检查并抛出异常。为了利用具有先进技术的最新 CPU，这些 CPU 以不同的方式实现和执行，而不是将其作为 IL 中的显式指令。

当出现此类异常时，clr 会映射 PDB 文件中的指令并返回源代码。如果您删除 PDB 并从命令行运行，您将看不到任何行号信息。调试器是一个程序，它与 PDB 一起加载 clr 代码并执行所有映射。Visual Studio 只是获取行号并为您打开文件。有广泛的调试器 API，您可以使用它来获取 Visual Studio 显示的运行时值。

# jenkins - 使用 OpenStack 和 Jenkins 设置私有多项目测试云基础架构

> ID：12137047
> 
> 赞同：0
> 
> 时间：2012-08-27T06:20:50.990
> 
> 标签：jenkins, cloud, openstack

我想为多个项目使用 OpenStack 和 Jenkins 部署私有云测试基础架构。我想为 OpenStack 创建一个模板，使用一个 Jenkins 安装作为 master。对于我想将它们分成节点的项目，即每个项目将获得一个节点。这是一个合理的结构吗？或者我应该为每个项目+虚拟机安装一个 Jenkins 安装？

1) 您将如何组织私有的多项目测试云基础架构？

2）Jenkins`/var/lib/jenkins`默认保存配置和作业信息，如何管理每个项目的对象存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:57:39.453

当您说节点时，我假设您的意思是一台运行 nova-compute 并托管 VM 实例的机器。如果是这种情况，那么老实说，我不会担心尝试将项目绑定到特定节点 - 将您拥有的整个 openstack 资源池视为全局集群，分配项目，然后让它们启动和拆除根据他们的需要。

假设您希望云中的每个项目都有一个主 jenkins，那么您可能会发现将带有 jenkins 的映像作为公开可用的映像预安装是有益的。如果您将 jenkins 作为每个项目的独立项目运行，则使用 m1.medium 可能就足够了，但您可能会发现您想使用 m1.large。这完全取决于您的詹金斯实例在每个项目中所做的事情。

如果您希望 jenkins 数据在销毁和重新创建 jenkins 主实例时保持不变，那么您可以使用一个卷并专门将 /var/lib/jenkins 挂载到其中 - 但您需要管理 jenkins 启动和拥有该卷的协调适当地附上。如果需要销毁和重新创建 jenkins 实例，您可能会发现为 jenkins 实例提供更大的基础磁盘并备份和恢复每个项目的数据会更容易。

另一种方法是在你的 openstack 云外部共享一个主 jenkins，并使用 jclouds jenkins 插件来根据项目需要启动 jenkins 实例和从属。这并没有在 jenkins 中的项目之间提供任何隔离，根据上述问题，这可能不符合您的喜好。

# symfony - 将 Symfony2 项目发布到网络上

> ID：12137051
> 
> 赞同：4
> 
> 时间：2012-08-27T06:21:03.057
> 
> 标签：symfony, web-deployment

我已经差不多完成了一个用 Symfony2 开发的项目的开发，希望把项目放到网上。

但是，我想有很多事情需要做才能让一切正常。我想，需要禁用开发模式等......需要做什么以及如何做？

## 在 Symfony2 项目中，网络上的每个人都可以使用的最重要的事情是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T06:48:09.277

我建议您使用[Capifony](http://capifony.org/)进行部署。它做了很多开箱即用的东西，你可以让它运行你需要的任何自定义命令。有关详细信息，请参阅其文档。

关于开发模式，除非您已从 中删除 IP 检查，否则您`app_dev.php`不必担心部署它。当然，如果您愿意，您可以告诉 Capifony 在部署时将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T07:26:06.083

Im currently researching the same thing.

The first thing you have to consider is "how professional" you want to deploy. There are a lot of tools you can use:

1.  Continous Integration Server ( e.g. Hudson, Jenkins)
2.  Build Tools (e.g. Phing, Capistrano --> Capifony, Shell scripts)
3.  Versioning Tools (e.g. Git, SVN)

I think the simplest setup is using only a Build tool and i guess you are already using some kind of versioning.

Depending on which tool you use, the setup is different, but I think there are some things you should consider with your application (maybe not all are applicable to your application)

*   Creating a Tag in your Versioning
*   Copying the new Code in an folder on production --> if you are in a new folder you dont need to clear the cache and logs, since these shouldnt be in your versioning the first time.
*   loading composer (if youre using it)
*   installing vendors
*   updating database schema
*   install assets from your bundles
*   move symlink from current version to the folder of the new site

These are the things I currently need for my application for production deployment, if you deploy to an test environment you should load fixtures and run your testscripts as well.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T06:38:37.857

处理部署的最佳方式是创建“构建”脚本，它将：

1.  从您的捆绑包和供应商中删除所有包含测试的文件夹和文件。
2.  删除`app_dev.php`文件
3.  确保它`app/cache`是`app/logs`完全可写/可读的。
4.  将您的项目打包成存档 (rpm fe)

然后，在部署之前，您应该在项目中创建标签 - 这意味着您的应用程序的某个版本已发布（我建议遵循此[git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)）。

1.  创建标签。
2.  运行你的构建脚本
3.  上传存档到主机
4.  打开包装
5.  享受你的项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:08:41.690

[这里](http://blog.sznapka.pl/deploying-symfony2-applications-with-ant/)很好地描述的另一个选项是使用**Apache Ant**部署 Symfony2 应用程序。[Apache Ant](http://ant.apache.org/)是一个 Java 库和命令行工具，其任务是驱动构建文件中描述的进程作为相互依赖的目标和扩展点。

# php - 输出一个字段，根据真假输出下一个字段

> ID：12137053
> 
> 赞同：0
> 
> 时间：2012-08-27T06:21:14.750
> 
> 标签：php, mysql, sql

我被困从这样的表中输出数据。这是一个配置文件表。

```
CREATE TABLE `prod_profiles` (
 `p_add` VARCHAR(300) NULL DEFAULT NULL,
 `p_add_s` TINYINT(1) NULL DEFAULT '0',
 `p_phone` VARCHAR(300) NULL DEFAULT NULL,
 `p_phone_s` TINYINT(1) NULL DEFAULT '0',
 //and many more
  )
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

在这里，p_add 是地址，p_add_s（带有_s 的任何内容）是决定用户是否要显示此数据的部分（0 是显示，1 是隐藏）。

我需要显示如下数据：（这是管理部分）

```
Address data goes here if (p_add_s = 0) {echo 'Hide';} else {echo 'Unhide';}
Phone data goes here if (p_phone_s = 0) {echo 'Hide';} else {echo 'Unhide';} 
```

我的问题是我如何告诉 php 打印第一列，然后检查 _s 列值而不使用 php 中的所有列名，如下所示。我在这里迷路了。

我现在的做法是：

```
 while($form_data = mysql_fetch_array($exe_prof_form))
    {
    echo $form_data['sc_p_add']; if ($form_data['sc_p_add_s'] ==0){echo "Hide";}else{echo "Show";
    //Remaining fields go here
    // Any way I can get rid of these fields and do what I'm trying?
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:28:45.353

也许是这样的：

```
$fields = array('sc_p_add', 'sc_p_phone');

while($form_data = mysql_fetch_array($exe_prof_form))
{
    foreach($fields as $field){
        echo $field; 
        echo ($form_data[$field.'_s'] == 0) ? "Hide" : "Show";
    }
    //Remaining fields go here
    // Any way I can get rid of these fields and do what I'm trying?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:37:56.940

为什么不直接在sql语句中做呢？这将使您的工作更轻松。

```
SELECT p_add as `Address`,
       IF(p_add_s = 0, 'Show', 'Hide') as `AddressStatus`,
       p_phone as `PhoneNumber`,
       IF(p_phone_s = 0, 'Show', 'Hide') as `PhoneStatus`,
FROM prod_profiles 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T08:59:35.033

好吧，我想出了这个：（警告：前面的丑陋代码）

```
while($row = mysql_fetch_array($exe_prof_form)) {   
for ($i=0; $i<mysql_num_fields($exe_prof_form);$i+=2) 
{
echo $i." ".$row[$i];
$r=$i+1;
echo ($row[$r] == 0) ? " Hide <br />" : " Show <br />";
}
} 
```

做这项工作...告诉我你的想法。

# php - 从 facebook 获取用户数据

> ID：12137065
> 
> 赞同：0
> 
> 时间：2012-08-27T06:22:05.653
> 
> 标签：php, facebook, login

我正在开发网站，其中有注册格式来登录网站。我使用 facebook connect 来获取 facebook 数据，例如名字、姓氏等。

当我在创建应用程序时使用我的电子邮件 ID 登录 Facebook 时，它工作正常。但是当使用不同的电子邮件 ID 时，它会弹出“发生错误，请稍后再试”。

为什么会这样？解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:06:48.933

> 当我在创建应用程序时使用我的电子邮件 ID 登录 Facebook 时，它工作正常。但是当使用不同的电子邮件 ID 时，它会弹出“发生错误，请稍后再试”。

您的应用程序是否仍处于沙盒模式？

顺便提一句。，

```
$session = $facebook->getSession(); 
```

这是一种已弃用的方法。当前一个是 Facebook::getUser。请将您的 PHP SDK 版本更新为当前版本。

# c# - 在 C# 中使用矩阵对转换后的图像进行归一化

> ID：12137067
> 
> 赞同：2
> 
> 时间：2012-08-27T06:22:09.127
> 
> 标签：c#, .net, image, matrix, transformation

考虑下面的两个图像（分别是原始图像和转换后的图像）。三个蓝色方块（标记）用于定位。

![原来的](../Images/ce144a88f296c2aa880de2f45be62c98.png) ![变身](../Images/350d5c307235cd847a2b0e560ed5b29c.png)

原图：

*   我们知道宽度，高度
*   我们知道所有三个标记的 (x,y) 坐标。

转换后的图像：

*   我们可以检测所有三个标记的 (x,y) 坐标。
*   结果，我们可以计算旋转角度、(x,y) 平移量和 (x,y) 比例因子。

我现在想使用 System.Drawing.Graphics 对象来执行 RotateTransform、TranslateTransform 和 ScaleTransform。问题是，生成的图像永远不会像原始图像。

我在堆栈溢出时被告知应用转换的顺序无关紧要，但我的观察结果不同。下面是一些生成原始图像并在引入一些转换后尝试将其绘制在新画布上的代码。您可以更改转换的顺序以查看不同的结果。

```
public static void GenerateImages ()
{
    int width = 200;
    int height = 200;
    string filename = "";
    System.Drawing.Bitmap original = null; // Original image.
    System.Drawing.Bitmap transformed = null; // Transformed image.
    System.Drawing.Graphics graphics = null; // Drawing context.

    // Generate original image.
    original = new System.Drawing.Bitmap(width, height);
    graphics = System.Drawing.Graphics.FromImage(original);
    graphics.Clear(System.Drawing.Color.MintCream);
    graphics.DrawRectangle(System.Drawing.Pens.Red, 0, 0, original.Width - 1, original.Height - 1);
    graphics.FillRectangle(System.Drawing.Brushes.Blue, 10, 10, 20, 20);
    graphics.FillRectangle(System.Drawing.Brushes.Blue, original.Width - 31, 10, 20, 20);
    graphics.FillRectangle(System.Drawing.Brushes.Blue, original.Width - 31, original.Height - 31, 20, 20);
    filename = System.IO.Path.Combine(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location), "Original.png");
    original.Save(filename, System.Drawing.Imaging.ImageFormat.Png);
    graphics.Dispose();

    // Generate transformed images.
    transformed = new System.Drawing.Bitmap(width, height);
    graphics = System.Drawing.Graphics.FromImage(transformed);
    graphics.Clear(System.Drawing.Color.LightBlue);
    graphics.ScaleTransform(0.5F, 0.7F); // Add arbitrary transformation.
    graphics.RotateTransform(8); // Add arbitrary transformation.
    graphics.TranslateTransform(100, 50); // Add arbitrary transformation.
    graphics.DrawImage(original, 0, 0);
    filename = System.IO.Path.Combine(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location), "Transformed.png");
    transformed.Save(filename, System.Drawing.Imaging.ImageFormat.Png);
    graphics.Dispose();
    transformed.Dispose();

    original.Dispose();

    System.Diagnostics.Process.Start(filename);
} 
```

我可以在这里看到两个潜在的问题：

*   由于转换是一个接一个地应用，它们使最初计算的值变得无用。
*   图形对象在 (0, 0) 坐标处应用旋转，因为我应该做一些不同的事情。不确定是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:04:18.690

根据我从[这里](http://msdn.microsoft.com/en-us/library/6a1d65f4.aspx)、[这里](http://msdn.microsoft.com/en-us/library/zhc2xxtx.aspx)和[这里](http://msdn.microsoft.com/en-us/library/a0z3f662.aspx)的理解，Graphics.Drawing 转换是通过按照应用转换的顺序将矩阵相乘来执行的。

对于整数，a*b*c = b*a*c

但是，对于矩阵，ABC 几乎从不等于 BAC。

因此，看起来转换的顺序确实很重要，因为矩阵乘法不是可交换的。

换句话说，如果我对你的图片执行以下操作：

情况1：

*   翻译 (100,50)
*   规模 (0.5,0.7)

图片以左上角结束：（100,50）和右下角：（200,190）

案例2：

*   规模 (0.5,0.7)
*   翻译 (100,50)

图片以左上角结束：（50,35）和右下角：（150,174）

这意味着通过先缩放，然后平移，缩放也将缩放平移量，这就是为什么如果两个图片在左上角的 (50,35) 处结束，则平移 X 的一半和翻译 Y 的 0.7。

# jquery - 来自 iframe 的 jquery clone() 内容

> ID：12137069
> 
> 赞同：0
> 
> 时间：2012-08-27T06:22:24.243
> 
> 标签：jquery, clone

最初我想将从远程页面的 iframe 加载的一些内容（div class="StaffBlock"）传输到 div class="Contact-Agent-Append" 中。但是 append() 方法被证明不适用于 iframe。通常它可以工作，但由于我使用的是模板并且模板不是静止页面，我认为这就是为什么 append() 不能将内容放入当前页面的原因。然后我注意到 clone() 正在工作，但它会意外地重复 20 个内容的克隆。请帮我让它克隆一次。非常感谢。

**这是包含 iframe 的原始编码：**

```
<div class="Contact-Agent-{tag_Publish As Agent}">

    <div class="Contact-Agent-Small-Logo-listing" title="this property is published by agent">
    </div>
    <iframe scrolling="no" height="60px" frameborder="0" width="150px" src="{tag_listing agent staff url}" marginwidth="0px" marginheight="0px" style="overflow:hidden; margin:0; padding:0; display: none;"></iframe>
    <script type='text/javascript'>//<![CDATA[
    $(window).load(function(){
    $('iframe').contents().find('.StaffBlock').clone().appendTo($('.Contact-Agent-Append'))
    });//]]>
    </script> 
    <div class="Contact-Agent-Append">content should go here
    </div>

</div> 
```

**这是存储在包含 StaffBlock 的远程 url 中的内容：**

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/StyleSheets/listing-contact.css" />
</head>
<body>
<div class="listing-contact">
<div class="StaffBlock">
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td class="col-a">{tag_name}</td>
    <td class="col-b" rowspan="4">{tag_Staff Photo}</td>
  </tr>
  <tr>
    <td>{tag_job title}</td>
  </tr>
  <tr>
    <td>{tag_mobile}</td>
    </tr>
  <tr>
    <td><a href="mailto:{tag_email}">email me</a></td>
  </tr>
</table>
</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:28:14.450

你的`Contact-Agent-Append`班级有多个 div 吗？

您应该使用 AJAX，而不是使用不可见的 iframe：

```
$(".Contact-Agent-Append").load("{tag_listing agent staff url} .StaffBlock:first"); 
```

> .load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] )
> 
> 描述：从服务器加载数据并将返回的 HTML 放入匹配的元素中。

[http://api.jquery.com/load/#loading-page-fragments](http://api.jquery.com/load/#loading-page-fragments)

# python - 将值附加到python中的列表

> ID：12137070
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:22:29.493
> 
> 标签：python

我正在这样做：

```
def GetDistinctValues(theFile, theColumn):
  lines=theFile.split('\n')
  allValues=[]
  for line in lines:
    allValues.append(line[theColumn-1])
  return list(set(allValues)) 
```

我正在 `string index out of range`这条线上：

```
allValues.append(line[theColumn-1]) 
```

有谁知道我做错了什么？

如果需要，这是完整的代码：

```
import hashlib

def doStuff():
  createFiles('together.csv')

def readFile(fileName):
  a=open(fileName)
  fileContents=a.read()
  a.close()
  return fileContents

def GetDistinctValues(theFile, theColumn):
  lines=theFile.split('\n')
  allValues=[]
  for line in lines:
    allValues.append(line[theColumn-1])
  return list(set(allValues))

def createFiles(inputFile):
  inputFileText=readFile(inputFile)
  b = inputFileText.split('\n')
  r = readFile('header.txt')
  DISTINCTCOLUMN=12
  dValues = GetDistinctValues(inputFileText,DISTINCTCOLUMN)

  for uniqueValue in dValues:
    theHash=hashlib.sha224(uniqueValue).hexdigest()
    for x in b:
      if x[DISTINCTCOLUMN]==uniqueValue:
        x = x.replace(', ',',').decode('latin-1','ignore')
        y = x.split(',')
        if len(y) < 3:
          break
        elif len(y) > 3:
          desc = ' '.join(y[3:])
        else:
          desc = 'No description'
        # Replacing non-XML-allowed characters here (add more if needed)
        y[2] = y[2].replace('&','&amp;')

        desc = desc.replace('&','&amp;')

        r += '\n<Placemark><name>'+y[2].encode('utf-8','xmlcharrefreplace')+'</name>' \
          '\n<description>'+desc.encode('utf-8','xmlcharrefreplace')+'</description>\n' \
          '<Point><coordinates>'+y[0]+','+y[1]+'</coordinates></Point>\n</Placemark>'
    r += readFile('footer.txt')
    f = open(theHash,'w')
    f.write(r)
    f.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:33:43.837

错误不是由 引起的`append()`，而是因为`line`不够长。也许您的文件末尾有一个空行。你可以试试

```
def GetDistinctValues(theFile, theColumn):
  lines=theFile.split('\n')
  allValues=[]
  for line in lines:
    if line:
      allValues.append(line[theColumn-1])
  return list(set(allValues)) 
```

否则异常处理程序可以帮助找出问题所在

```
def GetDistinctValues(theFile, theColumn):
  lines=theFile.split('\n')
  allValues=[]
  for line in lines:
     try:
        allValues.append(line[theColumn-1])
     except IndexError:
        print "line: %r"%line
  return list(set(allValues)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T06:32:40.247

发生这种情况是因为`line`没有代码假设的那么多元素。尝试以下操作：

```
for line in lines:
    if len(line) < theColumn:
        print "This line doesn't have enough elements:\n" + line
    else:
        allValues.append(line[theColumn-1])
return list(set(allValues)) 
```

这将给您一个提示，这是您在尝试访问列表范围之外的元素（即不存在的元素）时所期望的错误类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T06:29:34.550

```
line[theColumn-1]) 
```

如果字符串（行）被缩短然后是“theColumn”，这当然会引发上述错误。你还能期待什么？

# java - 抽象方法错误

> ID：12137073
> 
> 赞同：13
> 
> 时间：2012-08-27T06:22:39.623
> 
> 标签：java, spring, spring-mvc, interface, abstract

我正在netbeans中开发一个项目，当我使用glassfish 3.1.2启动它时。一切正常。但是当我调用映射到以下方法的/invite url时

```
@RequestMapping(value = "/invite", method = RequestMethod.POST)
    @ExceptionHandler(GenericException.class)
    public ModelAndView create(@ModelAttribute(value = "preRegister") @Valid PreRegister preRegister, BindingResult result, HttpServletRequest request) {
        mav = new ModelAndView();
        validator.validate(preRegister, result);
        List<Role> roleList = null;
        if (result.hasErrors()) {
            mav.setViewName("user_populate_create");
            try {
                roleList = roleDao.list();
            } catch (Exception ex) {
                logger.error("UserController: Unable to list Roles: ", ex);
                throw new GenericException("UserController: Unable to list Roles: " + ex.getMessage());
            }
            if (roleList == null || roleList.isEmpty()) {
                throw new GenericException("UserController: Unable to list Roles");
            } else {
                mav.addObject("roles", roleList);
            }

        } else {
            String uuid = RandomUuid.generate();
            preRegister.setUrlCode(uuid);
            preRegister.setCreatedOn(Helper.rightNow());
            List<PreRegister> p;

            try {
                p = preRegisterDao.findbyQuery("checkAvailability", preRegister.getLoginId());
                if (p == null || p.isEmpty()) {
                    preRegisterDao.saveOrUpdate(preRegister);
                } else {
                    throw new GenericException("User Email Id is Exist! try With another Email Id ");
                }
            } catch (Exception exception) {
                exception.printStackTrace();
                logger.error("Invite user: ", exception);
                throw new GenericException("Exception :: " + exception.getMessage());

            }

        }
        return mav;

    } 
```

甚至第一行方法也没有执行，并给了我这个堆栈跟踪

```
java.lang.AbstractMethodError
    at javax.persistence.Persistence$PersistenceUtilImpl.isLoaded(Unknown Source)
    at org.hibernate.validator.engine.resolver.JPATraversableResolver.isReachable(JPATraversableResolver.java:61)
    at org.hibernate.validator.engine.resolver.DefaultTraversableResolver.isReachable(DefaultTraversableResolver.java:131)
    at org.hibernate.validator.engine.resolver.SingleThreadCachedTraversableResolver.isReachable(SingleThreadCachedTraversableResolver.java:46)
    at org.hibernate.validator.engine.ValidatorImpl.isValidationRequired(ValidatorImpl.java:1242)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:448)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:397)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:361)
    at org.hibernate.validator.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:313)
    at org.hibernate.validator.engine.ValidatorImpl.validate(ValidatorImpl.java:139)
    at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:86)
    at org.springframework.validation.DataBinder.validate(DataBinder.java:692)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:807)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:359)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

我正在使用 Spring MVC 3.0 Hibernate 3，我最近将我的 jdk 版本从**jdk6**更新到**jdk7**，并且我正在使用[IBM generic DAO](http://www.ibm.com/developerworks/java/library/j-genericdao/index.html)。我在互联网上搜索了几个小时，但找不到解决方案。

更新：我使用的 Jar 文件列表。

```
file: dwr.jar
file: gson-2.2.1.jar
file: javaee-api-6.0.jar
file: ejb3-persistence.jar
file: hibernate-annotations.jar
file: hibernate-commons-annotations.jar
file: hibernate-entitymanager.jar
file: hibernate-validator.jar
file: hibernate3.jar
file: persistence.jar
file: Jhove-final.jar
file: jhove-handler.jar
file: jhove-module.jar
file: jhove.jar
file: json-org.jar
file: json-taglib-0.4.1.jar
file: antlr-2.7.6.jar
file: antlr-runtime-3.0.jar
file: aspectjrt.jar
file: aspectjweaver.jar
file: commons-beanutils-1.8.0.jar
file: commons-collections-3.1.jar
file: commons-dbcp.jar
file: commons-digester-2.0.jar
file: dom4j-1.6.1.jar
file: ehcache-1.2.3.jar
file: javassist-3.9.0.GA.jar
file: jstl-1.2.jar
file: jta-1.1.jar
file: log4j-1.2.14.jar
file: mysql-connector-java-5.1.18-bin.jar
file: servlet-api-2.3.jar
file: slf4j-api-1.5.8.jar
file: slf4j-log4j12-1.5.8.jar
file: cas-client-core-3.1.10.jar
file: ldapsdk-4.1.jar
file: spring-ldap-core-1.3.0.RELEASE.jar
file: spring-security-acl-3.0.5.RELEASE.jar
file: spring-security-cas-client-3.0.5.RELEASE.jar
file: spring-security-config-3.0.5.RELEASE.jar
file: spring-security-core-3.0.5.RELEASE.jar
file: spring-security-ldap-3.0.5.RELEASE.jar
file: spring-security-openid-3.0.5.RELEASE.jar
file: spring-security-taglibs-3.0.5.RELEASE.jar
file: spring-security-web-3.0.5.RELEASE.jar
file: com.springsource.net.sf.cglib-2.2.0.jar
file: com.springsource.org.aopalliance-1.0.0.jar
file: com.springsource.org.apache.commons.logging-1.1.1.jar
file: com.springsource.org.apache.commons.pool-1.5.3.jar
file: com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar
file: org.springframework.aop-3.0.5.RELEASE.jar
file: org.springframework.asm-3.0.5.RELEASE.jar
file: org.springframework.aspects-3.0.5.RELEASE.jar
file: org.springframework.beans-3.0.5.RELEASE.jar
file: org.springframework.context-3.0.5.RELEASE.jar
file: org.springframework.context.support-3.0.5.RELEASE.jar
file: org.springframework.core-3.0.5.RELEASE.jar
file: org.springframework.expression-3.0.5.RELEASE.jar
file: org.springframework.instrument-3.0.5.RELEASE.jar
file: org.springframework.instrument.tomcat-3.0.5.RELEASE.jar
file: org.springframework.jdbc-3.0.5.RELEASE.jar
file: org.springframework.orm-3.0.5.RELEASE.jar
file: org.springframework.test-3.0.5.RELEASE.jar
file: org.springframework.transaction-3.0.5.RELEASE.jar
file: org.springframework.web-3.0.5.RELEASE.jar
file: org.springframework.web.servlet-3.0.5.RELEASE.jar
file: tiles-api-2.2.2.jar
file: tiles-compat-2.2.2.jar
file: tiles-core-2.2.2.jar
file: tiles-el-2.2.2.jar
file: tiles-extras-2.2.2.jar
file: tiles-freemarker-2.2.2.jar
file: tiles-jsp-2.2.2.jar
file: tiles-mvel-2.2.2.jar
file: tiles-ognl-2.2.2.jar
file: tiles-servlet-2.2.2.jar
file: tiles-servlet-wildcard-2.2.2.jar
file: tiles-template-2.2.2.jar
file: tiles-velocity-2.2.2.jar
file: UUID-Parser.jar
file: SafeCommons.jar
file: safe_commons_v2.jar
file: FileUtillsDoc.jar
file: SAFE_MS2_V1_FILEUTILLS.jar
file: jackson-annotations-2.0.4.jar
file: jackson-core-2.0.4.jar
file: jackson-databind-2.0.4.jar
file: jai_codec-1.1.3.jar
file: jai_core-1.1.3.jar
file: pdfbox-app-1.3.1.jar
file: sanselan-0.97-incubator.jar
file: jai_codec-1.1.3.jar
file: jai_core-1.1.3.jar
file: pdfbox-app-1.3.1.jar
file: sanselan-0.97-incubator.jar 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-27T06:40:45.517

`java.lang.AbstractMethodError`当应用程序尝试调用抽象方法时抛出。通常，这个错误会被编译器捕获；如果自上次编译当前执行的方法以来某些类的定义发生了不兼容的更改，则此错误只会在运行时发生。

似乎这个问题是由于某些 jar 文件中的版本不兼容造成的。我无法从您的代码中计算出来。请检查[这个线程](http://forum.springsource.org/showthread.php?63077-java-lang-AbstractMethodError)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-25T09:30:09.520

发生此错误是因为在没有实际实现的情况下调用了抽象方法。它通常发生在某些库升级之后，而有些则没有。依赖项以某种方式丢失。

因此，请检查所有库升级是否成功完成。

[这](http://www.pixelstech.net/article/1469241003-Java-AbstractMethodError-explained-and-demonstrated)是一个关于 AbstractMethodError 如何发生的很好的示例和演示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-06T22:24:09.807

我因此处未提及的原因而出现此错误。

我正在使用 proguard，它混淆了一个类，然后导致 AbstractMethodError。只需要保持这个类在proguard。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-09T22:15:36.563

这可能发生在 NetBeans 中，同时运行 Java 8 并使用 lambda 实现接口，然后更改接口签名。

简单的解决方案：运行**Clean 并构建**（默认情况下是`Shift`+ ）*`F11`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T08:33:49.763

在异常（或发生异常的行）上放置一个断点以找出究竟是哪个类/方法导致了问题，然后在您的类路径中搜索该类的所有出现。如果您的类路径中有多个版本的类，请删除错误的版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-17T07:13:11.233

在我的情况下，我也遇到了同样的问题，问题是我在两个不同的 jar 文件中有两个同名的 .class 文件。我从 pom.xml 中排除了它开始工作的 jar 文件！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T11:18:54.967

我为此浪费了一些时间。

在 pom.xml 中，对于依赖项，如果您设置了 LATEST，可能是由于这个原因，请在此处指定正确的版本，这也是最佳实践

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-24T04:48:58.500

如果您将任何 spring 依赖项与 spring-boot 混合，也可能会发生这种情况。检查所有依赖项并查找是否存在 sping-boot 依赖项。如果您使用的是 spring-boot，则不要导入 spring 依赖项，因为 spring-boot 已经提供了一切。如果您尝试使用 spring，则不要使用 spring-boot，反之亦然。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-17T17:43:54.600

我也遇到了这个错误，使用`Tomcat 8.5`. 另一条消息指出它需要`Tomcat 9.0`，但事实并非如此 - 我正在使用`Spring Boot 2.2.5`，我的问题是缺少两种方法：

```
 @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void destroy() {
    } 
```

添加这两种方法解决了这个问题。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-10-18T17:31:55.027

Aspectj 版本 1.7.3 将解决此问题。请尝试一下

# sql - 单个存储过程中的多个事务

> ID：12137074
> 
> 赞同：1
> 
> 时间：2012-08-27T06:22:40.620
> 
> 标签：sql, sql-server

我需要从 SQL Server 2008 中的 2 个表中删除数据。

我有两个表 A 和 B。我需要将每个表放在一个单独的事务中。

这是我正在使用的代码。

```
BEGIN TRANSACTION;
BEGIN TRY
    DELETE      from A
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;

END CATCH

IF @@TRANCOUNT > 0
    COMMIT TRANSACTION;

BEGIN TRANSACTION;
BEGIN TRY
    DELETE     from B
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;
END CATCH

IF @@TRANCOUNT > 0
    COMMIT TRANSACTION; 
```

有没有更好的方法在 SQL Server 中实现多个事务和错误处理？

我需要为每个表放置单独的事务。

当其中一项交易失败时，我收到错误消息。

> *EXECUTE 之后的事务计数表明 BEGIN 和 COMMIT 语句的数量不匹配。记录没有从其他事务中删除*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T06:29:50.377

尝试这个：

```
BEGIN TRANSACTION;
BEGIN TRY
    DELETE from A
    COMMIT TRANSACTION;
END TRY
BEGIN CATCH
ROLLBACK TRANSACTION;
END CATCH

BEGIN TRANSACTION;
BEGIN TRY
    DELETE     from B
    COMMIT TRANSACTION;
END TRY
BEGIN CATCH
    ROLLBACK TRANSACTION;
END CATCH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:49:46.997

也许你可以这样做：

```
BEGIN TRANSACTION one;
BEGIN TRY
    DELETE      from A
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION one;

END CATCH

IF @@TRANCOUNT > 0
    COMMIT TRANSACTION one;

BEGIN TRANSACTION two;
BEGIN TRY
    DELETE     from B
END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION two;
END CATCH

IF @@TRANCOUNT > 0
    COMMIT TRANSACTION two; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-09T01:04:53.883

每个查询都在一个隐式事务中，因此单个查询的显式事务是多余的。DELETE 将删除所有记录或不删除任何记录，而不是其中一些记录，然后失败。

如果两个删除查询需要一起成功或失败，则需要显式事务。

如果这些是巨大的表，那么在没有显式事务的情况下一次删除几条记录会更有效。（多次这样做。）但是，如果它必须是单个事务，则将单独的较小删除放在较大的事务中不会防止事务日志膨胀。我不知道在这种情况下它是否会更快。在过去，我记得使用单个事务可能需要数小时而不是数分钟才能完成该过程。在一种情况下，它永远不会完成......几天后我们放弃了。

# c# - 将字符串转换为双精度 - 结果失败

> ID：12137079
> 
> 赞同：2
> 
> 时间：2012-08-27T06:23:04.717
> 
> 标签：c#

> **可能重复：**
> [从字符串中读取双精度值](https://stackoverflow.com/questions/12092989/reading-a-double-value-from-a-string)

我在将我的字符串转换为双精度时遇到问题，我总是得到奇怪的结果。我想转换以下字符串：

```
 string Test = "17828.571428571"; 
```

我这样尝试过（因为它通常可以工作）：

```
Double _Test = Convert.ToDouble(Test); 
```

结果是：17828571428571（没有点，哈哈）

之后我需要它作为一个双倍，到 Math.Round()，所以在我的例子中我有 17828。我的第二个想法是拆分字符串，但这真的是最好的方法吗？:S

谢谢你帮助我！

芬恩

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T06:24:38.970

利用`InvariantCulture`

```
Double _Test = Convert.ToDouble(Test,CultureInfo.InvariantCulture); 
```

**编辑：**我相信您当前的文化是 "German" `de-DE`，它`,`用于浮点。

尝试了以下代码。您也可以`NumberFormatInfo.InvariantInfo`在转换期间使用。

```
string Test = "17828.571428571";
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("de-DE");
double d = Convert.ToDouble(Test);
double d2 = Convert.ToDouble(Test, CultureInfo.InvariantCulture);
double d3 =  Convert.ToDouble(Test, NumberFormatInfo.InvariantInfo);

string Test2 = "17828,571428571"; //Notice the comma in the string
double d4 = Convert.ToDouble(Test2);
Console.WriteLine("Using comma as decimal point: "+ d4); 
```

输出：（*注意输出中的逗号）*

```
Wihtout Invariant: 17828571428571
With InvariantCulture: 17828,571428571
With NumberFormatInfo.InvariantInfo: 17828,571428571
Using comma as decimal point: 17828,571428571 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T06:24:11.913

尝试`Double.TryParse`或者`Double.Parse`如果您确定格式正确

编辑：但要注意格式。例如，如果您是德国人，则需要输入 140,50 而不是 140.50，因为 140.50 将是 14050。或者您作为参数传递您不关心文化（参见其他帖子）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T06:25:18.997

```
double _Test = double.Parse(Test,CultureInfo.InvariantCulture); 
```

您需要将转换操作的格式提供程序设置为不变。

# excel - 在 Excel 中更改连接字符串会弄乱列数据类型

> ID：12137085
> 
> 赞同：0
> 
> 时间：2012-08-27T06:23:49.953
> 
> 标签：excel, vba, odbc, type-conversion

这与我[之前的问题有关](https://stackoverflow.com/questions/12117408/changing-pivot-table-external-data-source-path-with-excel-macro)。我正在尝试在 Excel 中更新与文本文件（由多个数据透视表使用）的外部数据连接以指向正确的数据源，以便在将 Excel 工作簿和文本文件复制到不同的目录/计算机时刷新数据. （它应该像文本文件的路径是相对的一样。）

数据源是制表符分隔的文本文件，标题位于第一列。我有可以更改 ODBC 连接字符串中的路径的代码，但是当我尝试刷新数据时，Excel 将其全部导入为文本，而不是保持某些列的原始数字。

```
Public Sub Test()
    Dim wb As Excel.Workbook
    Dim pc As PivotCache
    Dim path As String

    Set wb = ActiveWorkbook
    path = wb.path

    For Each pc In wb.PivotCaches
        'Debug.Print pc.Connection
        pc.Connection = "ODBC;DBQ=" & path & ";DefaultDir=" & path & ";Driver={Microsoft Text Driver (*.txt; *.csv)};DriverId=27;FIL=text;MaxBufferSize=2048;MaxScanRows=8;PageTimeout=5;SafeTransactions=0;Threads=3;UserCommitSync=Yes"

    Next
End Sub 
```

我尝试将其更改`MaxScanRows`为零，我在某处读到它会让 Excel 扫描所有行以猜测数据类型，但这似乎没有帮助。

原始连接信息是：

连接字符串：

```
DefaultDir=C:/directoryPath;Driver={Microsoft Text Driver (*.txt; *.csv)};
  DriverId=27;FIL=text;MaxBufferSize=2048;MaxScanRows=8;PageTimeout=5;
  SafeTransactions=0;Threads=3;UserCommitSync=Yes; 
```

命令文本：

```
SELECT *
FROM tableName.txt tableName 
```

当我使用数据透视表向导（外部数据 -> MS 文本驱动程序）创建连接时，我设置了所有导入/解析信息（制表符分隔、第一行中的列标题、猜测数据类型等）。

有什么方法可以 (1) 告诉 Excel 查看行并找出数据类型，(2) 手动编码每列的数据类型，(3) 保留最初使用的相同数据类型，或者 ( 4）刷新数据后，通过宏中的数据透视表并将所有数字转换为数值而不是文本？显然 (1) 或 (3) 似乎是最简单且最有意义的，但我愿意尝试其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:35:40.200

鉴于您的要求，使用 schema.ini 似乎是最好的选择。

例如：

```
[mycsv.csv]
Format=Delimited(|)
NumberDigits=2
CurrencyThousandSymbol=,
CurrencyDecimalSymbol=.
CurrencyDigits=2
DateTimeFormat="yyyy-mm-dd"

Col1=ADate Date
Col2=AText Text 
```

[Schema.ini 文件（文本文件驱动程序）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353%28v=vs.85%29.aspx)

# java - Java：了解泛型数组的类型擦除

> ID：12137097
> 
> 赞同：0
> 
> 时间：2012-08-27T06:24:43.100
> 
> 标签：java, arrays, generics, generic-collections

我想知道我是否正确理解了以下 Java 问题。给定一个通用集合，如果我这样做

```
public class HashTable<V extends Comparable<V>> implements HashTableInterface<V> {
    private V[] array;

    public HashTable() {
        this.array = (V[]) new Object[10];
    }
} 
```

代码中断，抛出异常： java.lang.ClassCastException: *[Ljava.lang.Object; 不能转换为 [Ljava.lang.Comparable;*

但是，如果我更改`this.array = (V[]) new Object[10];`为`this.array = (V[]) new Comparable[10];`then 它可以工作。

我理解它的方式是，编译后生成的字节码将没有任何通用引用，因为它们被 Java 的类型擦除所取代。

`this.array = (V[]) new Object[10];`中断，因为该行将被隐式替换，`this.array = (Comparable[]) new Object[10];`然后将导致强制转换异常，因为 Object 不扩展 Comparable。它通过将其更改为 Comparables 数组来解决。

这个对吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:45:11.973

类型变量被擦除到其*最左边界*的擦除。所以`V`被抹去`|Comparable<V>| = Comparable`。如果您将绑定更改`Object & Comparable<V>`为擦除将成为`|Object| = Object`并且`(V[]) new Object[10]`也将起作用。

# symfony - 在 symfony2 中向标头添加额外的新参数作为响应

> ID：12137098
> 
> 赞同：3
> 
> 时间：2012-08-27T06:24:49.443
> 
> 标签：symfony, header, response

我想向客户端发送响应，其中应在标头中包含一些常见的细节，比如`userID`正文中的其他数据。如何将此类新参数添加到响应标头，

我试过，

```
public function postAPIAction()
{
    $jsonData = $this->getRequest()->getContent();
    $decodePostRequest = json_decode($jsonData, true);

    // processing is involved........

    $uniqueKey=$this->generateUniqueKey();
    $response = new Response();
    $response->headers->add(array('userId' => $uniqueKey));

    return new Response(json_encode(array('errorcode' => '1'), true));
} 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:03:31.413

您必须返回已设置标题的响应，而不是在`return`语句中创建新的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:08:38.033

您正在退货中创建新的回复。您应该使用之前创建的响应。

```
$response = new Response();
$response->headers->add(array('userId' => $uniqueKey));
$response->setContent(...);

return $response; 
```

# android - 将移动应用程序注册到 Twitter

> ID：12137099
> 
> 赞同：0
> 
> 时间：2012-08-27T06:24:50.043
> 
> 标签：android, twitter, integration

我正在开发安卓移动应用程序。我必须将**twitter**集成到我的应用程序中。
我在非常基本的步骤中面临一个问题，**即向 twitter 注册应用程序**。

我的问题是`URL`我必须在注册表中提供什么，因为我的应用程序处于开发阶段并且还没有`URL`？还指导我有关回调字段。

任何人都可以帮助我，因为我需要这个来进行程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:35:19.870

使用任何 web url 作为您的应用程序 url，并将此 url 用作回调 url。

```
CALLBACK_URL = "x-oauthflow-twitter://callback"; 
```

它可能会对您有所帮助，如果您对此有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:12:12.950

您可以使用 SocialAuth Android 库集成 Twitter。看到这个帖子

[Android Twitter 连接？](https://stackoverflow.com/questions/4967625/android-twitter-connectivity)

# sql - 仅在修改列时触发 SQL 更新

> ID：12137102
> 
> 赞同：107
> 
> 时间：2012-08-27T06:25:15.347
> 
> 标签：sql, sql-server, triggers

通过查看其他示例，我想出了以下内容，但它似乎无法按我的意愿工作：我希望它仅在`QtyToRepair`值已更新时才更新修改后的信息……但它没有那。

如果我注释掉 where ，那么修改后的信息在每种情况下都会更新。正如我所说，其他例子让我保持乐观。任何线索表示赞赏。谢谢。

沃尔特

```
ALTER TRIGGER [dbo].[tr_SCHEDULE_Modified]
   ON [dbo].[SCHEDULE]
   AFTER UPDATE
AS 
BEGIN
    SET NOCOUNT ON;

    UPDATE SCHEDULE SET modified = GETDATE()
        , ModifiedUser = SUSER_NAME()
        , ModifiedHost = HOST_NAME()
    FROM SCHEDULE S
    INNER JOIN Inserted I on S.OrderNo = I.OrderNo and S.PartNumber = I.PartNumber
    WHERE S.QtyToRepair <> I.QtyToRepair
END 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-08-27T12:10:29.570

你有两种方法可以解决你的问题：

1- 在触发器中使用更新命令。

```
ALTER TRIGGER [dbo].[tr_SCHEDULE_Modified]
   ON [dbo].[SCHEDULE]
   AFTER UPDATE
AS BEGIN
    SET NOCOUNT ON;
    IF UPDATE (QtyToRepair) 
    BEGIN
        UPDATE SCHEDULE 
        SET modified = GETDATE()
           , ModifiedUser = SUSER_NAME()
           , ModifiedHost = HOST_NAME()
        FROM SCHEDULE S INNER JOIN Inserted I 
        ON S.OrderNo = I.OrderNo and S.PartNumber = I.PartNumber
        WHERE S.QtyToRepair <> I.QtyToRepair
    END 
END 
```

2- 在插入的表和删除的表之间使用连接

```
ALTER TRIGGER [dbo].[tr_SCHEDULE_Modified]
   ON [dbo].[SCHEDULE]
   AFTER UPDATE
AS BEGIN
    SET NOCOUNT ON;    

    UPDATE SCHEDULE 
    SET modified = GETDATE()
       , ModifiedUser = SUSER_NAME()
       , ModifiedHost = HOST_NAME()
    FROM SCHEDULE S 
    INNER JOIN Inserted I ON S.OrderNo = I.OrderNo and S.PartNumber = I.PartNumber
    INNER JOIN Deleted D ON S.OrderNo = D.OrderNo and S.PartNumber = D.PartNumber                  
    WHERE S.QtyToRepair <> I.QtyToRepair
    AND D.QtyToRepair <> I.QtyToRepair
END 
```

当您对表使用更新命令`SCHEDULE`并将`QtyToRepair`列设置为新值时，如果新值等于一行或多行中的旧值，则解决方案 1 更新调度表中的所有更新行，但解决方案 2 仅更新旧值不等于新值的调度行价值。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-28T02:02:53.663

仅供参考我最终得到的代码：

```
IF UPDATE (QtyToRepair)
    begin
        INSERT INTO tmpQtyToRepairChanges (OrderNo, PartNumber, ModifiedDate, ModifiedUser, ModifiedHost, QtyToRepairOld, QtyToRepairNew)
        SELECT S.OrderNo, S.PartNumber, GETDATE(), SUSER_NAME(), HOST_NAME(), D.QtyToRepair, I.QtyToRepair FROM SCHEDULE S
        INNER JOIN Inserted I ON S.OrderNo = I.OrderNo and S.PartNumber = I.PartNumber
        INNER JOIN Deleted D ON S.OrderNo = D.OrderNo and S.PartNumber = D.PartNumber 
        WHERE I.QtyToRepair <> D.QtyToRepair
end 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-27T06:37:34.913

一开始应该检查是否`QtyToRepair`更新。

```
ALTER TRIGGER [dbo].[tr_SCHEDULE_Modified]
   ON [dbo].[SCHEDULE]
   AFTER UPDATE
AS 
BEGIN
SET NOCOUNT ON;
    IF UPDATE (QtyToRepair) 
    BEGIN
        UPDATE SCHEDULE 
        SET modified = GETDATE()
           , ModifiedUser = SUSER_NAME()
           , ModifiedHost = HOST_NAME()
        FROM SCHEDULE S INNER JOIN Inserted I 
            ON S.OrderNo = I.OrderNo and S.PartNumber =    I.PartNumber
        WHERE S.QtyToRepair <> I.QtyToRepair
    END
END 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-27T06:37:08.110

您想要执行以下操作：

```
ALTER TRIGGER [dbo].[tr_SCHEDULE_Modified]
   ON [dbo].[SCHEDULE]
   AFTER UPDATE
AS 
BEGIN
SET NOCOUNT ON;

    IF (UPDATE(QtyToRepair))
    BEGIN
        UPDATE SCHEDULE SET modified = GETDATE()
            , ModifiedUser = SUSER_NAME()
            , ModifiedHost = HOST_NAME()
        FROM SCHEDULE S
        INNER JOIN Inserted I ON S.OrderNo = I.OrderNo AND S.PartNumber = I.PartNumber
        WHERE S.QtyToRepair <> I.QtyToRepair
    END
END 
```

请注意，无论值是否相同，每次更新列时都会触发此触发器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-16T09:23:19.347

每当一条记录更新时，一条记录就会被“删除”。这是我的例子：

```
ALTER TRIGGER [dbo].[UpdatePhyDate]
   ON  [dbo].[M_ContractDT1]
   AFTER UPDATE
AS 
BEGIN
    -- on ContarctDT1 PhyQty is updated 
    -- I want system date in Phytate automatically saved
    SET NOCOUNT ON;

    declare @dt1ky as int   

    if(update(Phyqty))
    begin
        select @dt1ky = dt1ky from deleted

        update M_ContractDT1 set PhyDate=GETDATE() where Dt1Ky=  @dt1ky     

    end

END 
```

* * *

它工作正常

# c++ - 要在 Windows 上读取/设置用户屏幕保护程序，是否需要使用系统注册表或 SystemParametersInfo API？

> ID：12137105
> 
> 赞同：1
> 
> 时间：2012-08-27T06:25:37.373
> 
> 标签：c++, windows, winapi, screensaver

在 Windows 平台上设置和获取用户屏保参数似乎有两种方法：

1：通过 SystemParametersInfo() API：

```
//To read
SystemParametersInfo(SPI_GETSCREENSAVEACTIVE, 0, &bScreensaverAcrtive, NULL);
SystemParametersInfo(SPI_GETSCREENSAVETIMEOUT, 0, &nScreensaverTimeout, NULL);
//No API to get the screensaver file used

//To set
SystemParametersInfo(SPI_SETSCREENSAVEACTIVE, 0, bScreensaverAcrtive, NULL);
SystemParametersInfo(SPI_SETSCREENSAVETIMEOUT, 0, nScreensaverTimeout, NULL);
//No API to change the screensaver file 
```

2：通过系统注册表项：

```
HKCU\Control Panel\Desktop - "ScreenSaveActive"
HKCU\Control Panel\Desktop - "ScreenSaveTimeOut"
HKCU\Control Panel\Desktop - "SCRNSAVE.EXE" 
```

但既然有两种竞争方法似乎做同样的事情，那么推荐的使用方法是什么？

PS。由于以下原因，我非常喜欢方法＃2（或直接写入注册表）：

A. 如果您阅读[SPI_GETSCREENSAVEACTIVE 标志](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)中的错误说明，您会看到 MS 自己[建议](http://support.microsoft.com/kb/318781)使用注册表。

B. 如果您阅读[SPI_SETSCREENSAVEACTIVE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)和[SPI_SETSCREENSAVETIMEOUT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)标志的文档，有一条神秘的线说：“*如果机器进入省电模式或系统锁定状态，则会发生 ERROR_OPERATION_IN_PROGRESS 异常。*”我首先忽略了这种情况，直到它实际上开始发生在我的 Windows 8 测试安装中。这是最愚蠢的错误，我应该告诉你。绝对没有优雅的方式来解释它的含义或做任何解决方法（除非直接写入注册表。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:03:49.123

**使用 API。**问这就像问你是否应该在过马路之前等待红绿灯变绿。如果我看到你在红色路口过马路，我不会报警，但如果你问我，我会告诉你必须等待。而*你*是冒着坏事发生风险的人。

* * *

API 有文档记录，注册表位置没有。Microsoft 没有义务保留注册表位置或其功能。

SPI_GETSCREENSAVEACTIVE 标志会影响 Windows 2000。如果您支持 Windows 2000 作为目标平台，我将仅将注册表读取应用到该版本 ( `OSVERSIONINFO.dwMajor=5`, `.dwMinor=0`)

`ERROR_OPERATION_IN_PROGRESS`我想弄清楚在什么情况下会发生这种情况（例如屏幕保护程序已经激活，或者系统即将进入省电状态）。

一般来说，如果激活/停用屏幕保护程序至少与用户操作无关，我会发现这是有问题的，在这种情况下，系统应该准备好接受更改。

* * *

**你想达到什么目的？**为什么需要修改屏保活动？也许有更好的方法来实现你的目标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:59:00.767

使用 API。注册表格式经常更改。

至于电源状态的变化，屏幕保护程序确实是 20 世纪的功能。出于显而易见的原因，笔记本电脑会完全关闭屏幕。在那种省电状态下`SPI_SETSCREENSAVEACTIVE`显然应该失败。没有太多的口译工作要做。

所以，先检查一下`GUID_VIDEO_POWERDOWN_TIMEOUT`。

*编辑*

我刚刚意识到组策略屏幕保护程序也不太可能在注册表中，并且肯定会覆盖`HKCU`. 当然，对于 Windows 2000 来说这不是一个真正的问题，但今天 API 方法将更加可取。当然，要意识到这只是`SPI_SETSCREENSAVEACTIVE`可能返回错误的另一个原因。仍然是对注册表方法的改进，在存在组策略的情况下会默默地失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:28:26.843

上面的“设置”是不正确的。它应该是：

```
//To set
SystemParametersInfo(SPI_SETSCREENSAVEACTIVE, bScreensaverAcrtive, NULL, NULL);
SystemParametersInfo(SPI_SETSCREENSAVETIMEOUT, nScreensaverTimeout, NULL, NULL); 
```

# javascript - 单击 SUBMIT 按钮时获取 FORM 中的所有 INPUT 和 ACTION 标记

> ID：12137106
> 
> 赞同：0
> 
> 时间：2012-08-27T06:25:41.133
> 
> 标签：javascript, html

我们的 HTML 页面中有如下表单标签：

```
<form method= POST action=https://mysite_1.com> 
<input type=hidden name=XXXX value=yyyyyy> 
<input type=hidden name=YYYY value=zzzzz>
<input type=submit name=NNNN value=aaaaa> 
</form>

<form method= POST action=https://mysite_2.com> 
<input type=hidden name=PPPP value=kkkkk> 
<input type=hidden name=MMMM value=lllll>
<input type=submit name=FFFF value=jjjjj> 
</form> 
```

HTML 页面中可以有多个这样的表单和操作。进行提交操作时，我需要在表单级别查找所有输入和操作值吗？

我面临的问题是在页面的表单级别检测哪个“表单”的哪个“提交”按钮及其“操作”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:50:05.950

一种方法是使用指定的表单提交处理函数，该函数可以从正在提交的任何元素中检索属性：

```
function submission(form, e){
    e = e || window.event;
    e.preventDefault();
    var formAction = form.action,
        formMethod = form.method;
    console.log(formAction, formMethod);
}

var forms = document.getElementsByTagName('form');

for (var i=0, len=forms.length; i<len; i++){
    forms[i].onsubmit = function(e){
        submission(this, e);
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9a7Ua/)。

以上是一种稍微过时的方法，更好的替代用途`addEventListener()`（或`attachEvent`（IE），但没有IE进行测试我只能提供`addEventListener()`：

```
var forms = document.getElementsByTagName('form');

for (var i=0, len=forms.length; i<len; i++){
    forms[i].addEventListener('submit', function(e){
        submission(this, e);
    });
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9a7Ua/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:39:44.380

为表单分配一个 id：

```
<form id="form1" method="POST" action="https://mysite_1.com"> 
...
</form>

<form id="form1" method="POST" action="https://mysite_2.com"> 
...
</form> 
```

然后将事件侦听器附加到它们以捕获`submit`事件：

```
document.getElementById("form1").addEventListener("submit", function() {
    var inputs = this.elements;
    // Do something
}, false);
document.getElementById("form2").addEventListener("submit", function() {
    var inputs = this.elements, action = this.action;
    // Do something
}, false); 
```

**注意**：IE<9 需要使用`attachEvent`，而不是`addEventListener`：

```
document.getElementById("form1").attachEvent("onsubmit", function() {
    var form = document.getElementById("form1").elements,
        inputs = form.elements, action = form.action;
    // Do something
}); 
```

而this关键字指的是无用的`window`对象，所以你必须`getElementById`再次使用。您可以使用 jQuery 或 Prototype 或 Mootools 等通用框架库来避免所有这些，或者您可以定义一个[好的`addEvent`函数](http://ejohn.org/projects/flexible-javascript-events/)。

# node.js - 将变量传递给路由

> ID：12137107
> 
> 赞同：1
> 
> 时间：2012-08-27T06:25:46.590
> 
> 标签：node.js, express, mongoose

我正在尝试将一些变量传递到我的路线中，但似乎无法正确处理。我有包含以下内容的 db.js：

```
var mongoose = require('mongoose')
  , Schema = mongoose.Schema;

mongoose.connect('mongodb://localhost/dowhat');

/**
 * Schema definitions.
 */
var User = new Schema({
    name : { type : String, required : true }
  , pass : { type : String, required : true }
});

var List = new Schema({
    _from       : { type : Schema.Types.ObjectId, ref : 'User' }
  , _to         : { type : Schema.Types.ObjectId, ref : 'User' }
  , title       : String
  , description : String
  , created     : { type : Date, default              : Date.now }
  , updated     : { type : Date, default              : Date.now }
});

exports.users = mongoose.model('User', User);
exports.lists = mongoose.model('List', List); 
```

我的 app.js 上有这个：

```
app.use(function(req, res, next) {
  db.users.findOne({ name : 'foo' }, '_id', function(err, user) {
    req.session.user = user._id;
  });

  next();
}); 
```

`req.session.user`当`undefined`我尝试使用 routes/index.js 时：

```
exports.index = function(req, res) {
  console.log(req.session.user);
  res.render('index');
} 
```

我也尝试过替换`req.session.user`，`res.locals.user`但它仍然`undefined`在 routes/index.js 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:52:58.230

因为 next() 是在调用回调之前`db.users.findOne`调用的。

只需在回调中移动 next 即可。

```
var db = require('./db'); // Make sure you're including me ;D

app.use(function(req, res, next) {
  db.users.findOne({ name : 'foo' }, '_id', function(err, user) {
    req.session.user = user._id;
    next();
  });
}); 
```

# spring - 如何以速度将元素从一张地图复制到另一张地图

> ID：12137108
> 
> 赞同：0
> 
> 时间：2012-08-27T06:25:45.683
> 
> 标签：spring, velocity

不知道是否可以将元素从一个地图以速度复制到另一张地图？这只复制最后一个元素

```
 #foreach($key in $departamentsMap.keySet())
                    $key - $departamentsMap.get($key)
                    #set($maap={$key:$departamentsMap.get($key)} )
                #end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:50:06.683

那是因为你每次都在创建一个新的 $maap。做就是了：

```
#set( $map = {} )
#set( $ignore = $map.putAll($departamentsMap) ) 
```

它只是下面的一个HashMap。不复杂。:)

# jquery - 我的按钮是空白的（使用模态，jquery）

> ID：12137111
> 
> 赞同：1
> 
> 时间：2012-08-27T06:26:20.923
> 
> 标签：jquery, asp.net-mvc

这是我的脚本，我在其中设置按钮的文本。

```
$(document).ready(function () {

        $("#dialog-confirm").dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            height: 150,
            buttons: [
                {
                    text: "Confirm",
                    click: function() {
                        window.location.href = targetUrl;
                    }
                },
                {
                    text: "Cancel",
                    click: function() {
                        $(this).dialog("close");
                    }
                }]
        });

        $(".deleteLink").click(function (e) {
            e.preventDefault();
            var targetUrl = $(this).attr("href");
            $("#dialog-confirm").dialog("open");
        });

    }); 
```

这是我的html代码

```
<div id="dialog-confirm" title="Delete" > 
    <p><span class="ui-icon ui-icon-alert"></span>Are you sure you would want to delete?
</div> 
```

有人能看到这里有什么问题吗？我认为它可能是我的 CSS，但我使用标准引导程序，我找不到任何问题。

编辑：哦，这就是我检查按钮时的样子

```
<button type="button" text="Confirm"></button> 
```

这是一张图片： ![在此处输入图像描述](../Images/5cfae4c80ea3e0a3877d246045912bf4.png)

**结束编辑：所以，jquery 的 ui 1.8.22 似乎不起作用，但 1.8.23 可以。这个怎么可能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:37:02.320

更改按钮定义方式：

```
$("#dialog-confirm").dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    height: 150,
    buttons: {
        "Confirm": function() {
            window.location.href = targetUrl;
        },
        Cancel: function() {
            $(this).dialog("close");
        }
    }
}); 
```

取自[这里](http://jqueryui.com/demos/dialog/#modal-form)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:37:44.337

要解决按钮问题，请根据 jQuery 文档或下面的示例更改脚本。此外，如果您想将 targetUrl 传递给对话框，您可以这样做：

```
$(document).ready(function() {

    $(".deleteLink").click(function(e) {

        e.preventDefault();
        var targetUrl = $(this).attr("href");

        $("#dialog-confirm").dialog({
            autoOpen: true,
            modal: true,
            resizable: false,
            height: 150,
            buttons: {
                "Confirm": function() {
                    window.location.href = targetUrl;
                },
                "Cancel": function() {
                    $(this).dialog("close");
                }
            }
        });

        return false;
    });
});​ 
```

# iphone - xcode 从纵向视图导航到横向视图

> ID：12137116
> 
> 赞同：0
> 
> 时间：2012-08-27T06:26:51.277
> 
> 标签：iphone, ios, xcode, ipad, orientation

我有一个简单的 ios 导航应用程序。我的问题是在仅允许以纵向显示的 viewController 与必须以横向显示的 viewController 之间导航。

问题是第二个 viewController 在加载时不会显示在 Landscape 中。如果我旋转设备，它会按原样更新，但我希望因为它只支持横向，而不是在首先转换到视图时自动捕捉到横向。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:16:46.700

You should be implementing `shouldAutorotateToFaceInterfaceOrientation:`

Put this in the PortraitviewController.m:

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return interfaceOrientation == UIInterfaceOrientationPortrait;
} 
```

And this in the LandscapeviewController.m:

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# java-me - 使用 rtsp 在 java me 中实现视频流

> ID：12137119
> 
> 赞同：1
> 
> 时间：2012-08-27T06:27:09.707
> 
> 标签：java-me, video-streaming, rtsp, mmapi

我想`video streaming in java`使用 rtsp url 来实现我。在设备上测试代码时，我得到 Media Exception 声明`Prefetch Error-33`。这是我的代码

```
 private void startStreaming()
    {
      try 
      {
        mplayer=Manager.createPlayer(videourl);

        mplayer.addPlayerListener(this);

        mplayer.realize();

        videoControl=(VideoControl) mplayer.getControl("VideoControl");

        if(videoControl!=null)
        {
            Item video=(Item) videoControl.initDisplayMode(videoControl.USE_GUI_PRIMITIVE, null);

            videoControl.setVisible(true);

            System.out.println("Playing");

            Form v=new Form("Playing Video");

            StringItem si=new StringItem("Status", "Playing....");

            v.append(video);

            display.setCurrent(v);
        }

        mplayer.prefetch();

        mplayer.start();
    } 

    catch(Exception noCanDo)
    {
        Form f=new Form("Error");

        f.append("Error : "+noCanDo);

        display.setCurrent(f);
    }
} 
```

我也尝试过使用 MIDlet.platformrequest(videourl) 方法的替代方法，该方法调用设备的默认内部播放器来播放视频文件。播放器正在启动，但稍后`connection timeout`会出现提示。然而，我已经测试了 rtsp url，它工作得非常好。关于如何在 java me 中使用 rtsp url 进行视频流的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:59:39.627

将此代码用于流式 RTSP，它应该适用于 nokia symbian belle sdk 1.1 和 nokia sdk 2.0

```
protected void startApp() throws MIDletStateChangeException {
        VideoCanvas VC = new VideoCanvas(this,url); 
        Display.getDisplay(this).setCurrent(VC); }

    }
    //videoCanvas Class

    public VideoCanvas(ExampleStreamingMIDlet midlet, String url) {
            this.midlet = midlet;
            this.url = url;
            addCommand(start);
            addCommand(stop);
            addCommand(back);
            addCommand(exit);
            setCommandListener(this);
            this.setFullScreenMode(true);
        }

    public void commandAction(Command c, Displayable arg1) {
            if(c == start) {
                start();
            }

    public void start() {
            try{

               Player player = Manager.createPlayer(url);
                player.addPlayerListener(this);
               player.realize();

                control = (VideoControl)player.getControl("VideoControl");
                if (control != null) {
                    control.initDisplayMode(VideoControl.USE_DIRECT_VIDEO,this);
                    control.setDisplaySize(176,144);
                    int width = control.getSourceWidth();
                    int height = control.getSourceHeight();
                    status2 = "Before: SW=" + width + "-SH=" + height + "-DW=" + control.getDisplayWidth() + "-DH=" + control.getDisplayHeight();
                }

                player.start();
            }
            catch(Exception e) {
                Alert erro = new Alert("Erro",e.getMessage(),null,AlertType.ERROR);
                Display.getDisplay(midlet).setCurrent(erro);
            }
        }

    public void stop() {
            if(player != null) {
                player.deallocate();
                player.close();
            }
        } 
```

# javascript - Html + js +css 的打包器

> ID：12137123
> 
> 赞同：1
> 
> 时间：2012-08-27T06:27:26.420
> 
> 标签：javascript, html, package, extjs, packaging

如何将一堆 html、js 和 css 文件压缩/打包在一起，以便每当有人单击该 zip 文件时，Chrome 和本地服务器就会在该机器上启动，并且某些特定文件将在第一个屏幕上加载......任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:09:04.070

简单的！

1.  将所有 HTML 文件合并为一个。
2.  uuencode 所有媒体资产并将它们添加到 CSS。
3.  将所有 CSS 转换为单个 HTML 文件中的内联 CSS。
4.  将所有 JS 复制到同一个 HTML 文件中。

您现在有一个包含所有内容的包，并且由于它具有 html 文件扩展名，因此当您双击它时它将启动浏览器。

（我建议您编写一个脚本来执行此操作，并与我们所有人分享。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:29:57.467

您可能必须在解压缩后运行的 zip 文件中创建一个自动执行的 .exe 文件。

您可能最好在其中使用“README.TXT”文件，因为自动 .exe 很粗略（和病毒一样） - 它也可能被防病毒软件捕获和隔离

# asp.net-mvc-3 - MVC3 数据库示例？

> ID：12137124
> 
> 赞同：0
> 
> 时间：2012-08-27T06:27:26.523
> 
> 标签：asp.net-mvc-3

在 Mvc3 中需要使用 EDM 或者我们可以使用正常的过程。如果我们进行正常流程，如何编写 SqlCommand、SqlDataAdapter 来连接数据库。有没有参考它更充分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:24:08.457

MVC is built **on top of ASP.Net**, so everything you used to use such as `SqlCommand`, `SqlDataAdapter` to connect to database can still be used.

Read [this](https://stackoverflow.com/a/10487512/1182982)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:34:03.647

不，没有必要使用 EDM，您可以使用您想要的数据库。

根据大多数网站，您可以开发一个标准的数据访问层来封装此代码，并从您的 MVC 控制器或其他业务逻辑层调用它。

数据访问层的实际实现在这里没有详细说明，您可以通过搜索 SO 和一般互联网找到许多方法示例。

# c# - 如何随机播放列表

> ID：12137127
> 
> 赞同：5
> 
> 时间：2012-08-27T06:27:53.833
> 
> 标签：c#, list, shuffle

使用 C# 编写记忆游戏。所以我有一个包含 54 张图片的列表。我可以得到另一个列表来随机抓取其中的八张图像。然后，我想将第二个列表中的八张图片添加到另一个列表中，每张图片两次，很简单。

现在我想洗牌，我有点卡住了。我想随机播放列表的原因是因为我希望每次加载游戏（内存）或单击按钮（重新启动）时图片都是随机的......这是我对这个问题的看法：

```
private void Form2_Load(object sender, EventArgs e)
{
    //generate random number
    Random r = new Random();

    //play music via media player
    axWindowsMediaPlayer1.uiMode = "none";
    axWindowsMediaPlayer1.URL = ("Theme.mp3");            

    //create limage list
    List<Image> imagesEasy;
    //populate the 'imageEasy' list
    imagesEasy = new List<Image>();
    imagesEasy.Add(Image.FromFile(@"Baraka01.gif"));
    imagesEasy.Add(Image.FromFile(@"Baraka02.gif"));
    imagesEasy.Add(Image.FromFile(@"CyberSubZero01.gif"));
    imagesEasy.Add(Image.FromFile(@"CyberSubZero02.gif"));
    imagesEasy.Add(Image.FromFile(@"Cyrax01.gif"));
    imagesEasy.Add(Image.FromFile(@"Cyrax02.gif"));
    imagesEasy.Add(Image.FromFile(@"Ermac01.gif"));
    imagesEasy.Add(Image.FromFile(@"Ermac02.gif"));
    imagesEasy.Add(Image.FromFile(@"Jade01.gif"));
    imagesEasy.Add(Image.FromFile(@"Jade02.gif"));
    imagesEasy.Add(Image.FromFile(@"Jax01.gif"));
    imagesEasy.Add(Image.FromFile(@"Jax01.gif"));
    imagesEasy.Add(Image.FromFile(@"JohnnyCage01.gif"));
    imagesEasy.Add(Image.FromFile(@"JohnnyCage02.gif"));
    imagesEasy.Add(Image.FromFile(@"Kabal01.gif"));
    imagesEasy.Add(Image.FromFile(@"Kabal02.gif"));
    imagesEasy.Add(Image.FromFile(@"Kano01.gif"));
    imagesEasy.Add(Image.FromFile(@"Kano02.gif"));
    imagesEasy.Add(Image.FromFile(@"Katana01.gif"));
    imagesEasy.Add(Image.FromFile(@"Katana02.gif"));
    imagesEasy.Add(Image.FromFile(@"Kratos01.gif"));
    imagesEasy.Add(Image.FromFile(@"Kratos02.gif"));
    imagesEasy.Add(Image.FromFile(@"KungLau01.gif"));
    imagesEasy.Add(Image.FromFile(@"KungLau02.gif"));
    imagesEasy.Add(Image.FromFile(@"LiuKang01.gif"));
    imagesEasy.Add(Image.FromFile(@"LiuKang02.gif"));
    imagesEasy.Add(Image.FromFile(@"Mileena01.gif"));
    imagesEasy.Add(Image.FromFile(@"Mileena02.gif"));
    imagesEasy.Add(Image.FromFile(@"NightWolf01.gif"));
    imagesEasy.Add(Image.FromFile(@"NightWolf02.gif"));
    imagesEasy.Add(Image.FromFile(@"NoobSaibot01.gif"));
    imagesEasy.Add(Image.FromFile(@"NoobSaibot02.gif"));
    imagesEasy.Add(Image.FromFile(@"QuanChi01.gif"));
    imagesEasy.Add(Image.FromFile(@"QuanChi01.gif"));
    imagesEasy.Add(Image.FromFile(@"Raiden01.gif"));
    imagesEasy.Add(Image.FromFile(@"Raiden02.gif"));
    imagesEasy.Add(Image.FromFile(@"Scorpian01.gif"));
    imagesEasy.Add(Image.FromFile(@"Scorpian02.gif"));
    imagesEasy.Add(Image.FromFile(@"Sektor01.gif"));
    imagesEasy.Add(Image.FromFile(@"Sektor02.gif"));
    imagesEasy.Add(Image.FromFile(@"ShangTsung01.gif"));
    imagesEasy.Add(Image.FromFile(@"ShangTsung02.gif"));
    imagesEasy.Add(Image.FromFile(@"Sheeva01.gif"));
    imagesEasy.Add(Image.FromFile(@"Sheeva02.gif"));
    imagesEasy.Add(Image.FromFile(@"Sindel01.gif"));
    imagesEasy.Add(Image.FromFile(@"Sindel02.gif"));
    imagesEasy.Add(Image.FromFile(@"Smoke01.gif"));
    imagesEasy.Add(Image.FromFile(@"Smoke02.gif"));
    imagesEasy.Add(Image.FromFile(@"Sonya01.gif"));
    imagesEasy.Add(Image.FromFile(@"Sonya02.gif"));
    imagesEasy.Add(Image.FromFile(@"Stryker01.gif"));
    imagesEasy.Add(Image.FromFile(@"Stryker02.gif"));
    imagesEasy.Add(Image.FromFile(@"SubZero01.gif"));
    imagesEasy.Add(Image.FromFile(@"SubZero02.gif"));

    List<Image> imagesReady;
    //populate the 'imageReady' list to fill remaining 8 pictureBoxes
    imagesReady = new List<Image>();
    imagesReady.Add(imagesEasy[r.Next(54)]);
    imagesReady.Add(imagesEasy[r.Next(54)]);
    imagesReady.Add(imagesEasy[r.Next(54)]);
    imagesReady.Add(imagesEasy[r.Next(54)]);
    imagesReady.Add(imagesEasy[r.Next(54)]);
    imagesReady.Add(imagesEasy[r.Next(54)]);
    imagesReady.Add(imagesEasy[r.Next(54)]);
    imagesReady.Add(imagesEasy[r.Next(54)]);

    List<Image> imagesFinal;
    //populate the 'imageFinal' list to fill remaining 8 pictureBoxes
    imagesFinal = new List<Image>();
    imagesFinal.Add(imagesReady[0]);
    imagesFinal.Add(imagesReady[1]);
    imagesFinal.Add(imagesReady[2]);
    imagesFinal.Add(imagesReady[3]);
    imagesFinal.Add(imagesReady[4]);
    imagesFinal.Add(imagesReady[5]);
    imagesFinal.Add(imagesReady[6]);
    imagesFinal.Add(imagesReady[7]);
    imagesFinal.Add(imagesReady[0]);
    imagesFinal.Add(imagesReady[1]);
    imagesFinal.Add(imagesReady[2]);
    imagesFinal.Add(imagesReady[3]);
    imagesFinal.Add(imagesReady[4]);
    imagesFinal.Add(imagesReady[5]);
    imagesFinal.Add(imagesReady[6]);
    imagesFinal.Add(imagesReady[7]);

    //
    //need to add or call shuffle method here before assigning pictures to pictureBoxes
    //

    //assign pictures to pictureBoxes from the imagesFinal list
    pictureBox1.Image = imagesFinal[0];
    pictureBox2.Image = imagesFinal[1];
    pictureBox3.Image = imagesFinal[2];
    pictureBox4.Image = imagesFinal[3];
    pictureBox5.Image = imagesFinal[4];
    pictureBox6.Image = imagesFinal[5];
    pictureBox7.Image = imagesFinal[6];
    pictureBox8.Image = imagesFinal[7];
    pictureBox9.Image = imagesFinal[8];
    pictureBox10.Image = imagesFinal[9];
    pictureBox11.Image = imagesFinal[10];
    pictureBox12.Image = imagesFinal[11];
    pictureBox13.Image = imagesFinal[12];
    pictureBox14.Image = imagesFinal[13];
    pictureBox15.Image = imagesFinal[14];
    pictureBox16.Image = imagesFinal[15];
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-27T07:38:08.063

这可以使用 linq `OrderBy`with轻松完成`Random`。

```
var rand = new Random();
var randomList = imagesEasy.OrderBy (x => rand.Next()).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:35:48.273

尝试实现这个方法：

[http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:15:14.620

感谢大家的帮助，我最终通过带有嵌套 while 循环的 for 循环使用了一个充满随机数的数组，以确保我没有重复。

```
 int numbA;
        int[] chosenA = new int[8];
        for (int i = 0; i < 8; i++)
        {
            numbA = r.Next(9);

            for (int b = 0; b < 8; b++)
            {
                while (chosenA.Contains(numbA) == true)
                {
                    numbA = r.Next(9);
                    b = 0;
                }
            }
            chosenA[i] = numbA;
        } 
```

然后使用数组值从列表中调用图片。

```
 List<Image> imagesFinal;
        //populate the 'imageFinal' list to fill remaining 8 pictureBoxes
        imagesFinal = new List<Image>();
        imagesFinal.Add(imagesReady[(chosenA[0] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[1] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[2] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[3] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[4] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[5] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[6] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[7] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[0] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[1] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[2] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[3] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[4] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[5] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[6] - 1 )]);
        imagesFinal.Add(imagesReady[(chosenA[7] - 1 )]); 
```

为了确保图片被随机放置在图片框中，我再次使用另一个带有嵌套 while 循环的 for 循环生成更高的随机数。

```
 pictureBox1.Image = imagesFinal[chosenB[0] -1 ];
        pictureBox2.Image = imagesFinal[chosenB[1] -1 ];
        pictureBox3.Image = imagesFinal[chosenB[2] -1 ];
        pictureBox4.Image = imagesFinal[chosenB[3] -1 ];
        pictureBox5.Image = imagesFinal[chosenB[4] -1 ];
        pictureBox6.Image = imagesFinal[chosenB[5] -1 ];
        pictureBox7.Image = imagesFinal[chosenB[6] -1 ];
        pictureBox8.Image = imagesFinal[chosenB[7] -1 ];
        pictureBox9.Image = imagesFinal[chosenB[8] -1 ];
        pictureBox10.Image = imagesFinal[chosenB[9] -1 ];
        pictureBox11.Image = imagesFinal[chosenB[10] -1 ];
        pictureBox12.Image = imagesFinal[chosenB[11] -1 ];
        pictureBox13.Image = imagesFinal[chosenB[12] -1 ];
        pictureBox14.Image = imagesFinal[chosenB[13] -1 ];
        pictureBox15.Image = imagesFinal[chosenB[14] -1 ];
        pictureBox16.Image = imagesFinal[chosenB[15] -1 ]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T07:37:29.490

您可以尝试以下方法：

```
List<int> list = new List<int>();
Random rnd = new Random(SEED);
for(int i = 0; i <  15; i++)
{
int nextValue = rnd.Next(MIN,MAX);
while(list.Contains(nextValue))
      nextValue = rnd.Next(MIN,MAX);
} 
```

# java - Java Communication Server 打印 100 万份 PDF 文档

> ID：12137129
> 
> 赞同：0
> 
> 时间：2012-08-27T06:27:58.483
> 
> 标签：java, itext, openoffice.org

我有一个 Java 批处理作业，可以打印 100 万（1 页）PDF 文档。此批处理作业将每 5 天运行一次。

对于通过批处理作业打印 100 万（1 页）PDF 文档，哪种方法更好？

在此 PDF 中，所有客户的大部分文本/段落都是相同的，只有少数信息是从数据库中动态选择的（客户 ID/姓名/到期日/到期日/金额）

我们尝试了以下

1) 贾斯珀报告

2) 文本

但是以上两种方法并没有提供更好的性能，因为每个文档的静态文本/段落总是在运行时创建。

所以我正在考虑一些方法，比如

将有一个模板，其中包含动态值的占位符（客户 ID/姓名/到期日/到期日/金额）。

将会有一个像 Open Office 这样的通信服务器，它会有这个模板。

通过我们部署在 Web 服务器上的 Java 应用程序将从数据库中获取数据集并传递到该通信服务器，其中模板已经打开到内存中，并且仅从数据集中动态占位符值将被更改，模板将像**“另存为”**命令一样保存。

上述方法是否可以实现，如果可以，哪个 API / 通信服务器更好？

这是 Jasper 报告代码供参考

```
InputStream is = getClass().getResourceAsStream("/jasperreports/reports/"+reportName+".jasper" );    
JasperPrint print = JasperFillManager.fillReport(is, parameters, dataSource);    
pdf = File.createTempFile("report.pdf", "");
JasperExportManager.exportReportToPdfFile(print, pdf.getPath()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:00:06.867

哇。每 5 天 100 万个 PDF 文件。

即使从头到尾生成一个 PDF 文件（磁盘上的一个完成文件）只需要 0.5 秒 - 您也需要 5 天的时间才能依次生成这么多 PDF。

我认为在亚秒级时间内生成文件的任何方法都很好（Jasper 报告当然可以为您提供这种级别的性能）。

我认为您需要考虑如何优化整个过程：您肯定将不得不使用多线程，甚至可能需要多个物理服务器来在任何合理的时间内生成这么多文件（在至少过夜）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:46:53.573

我将使用 PDF 表单（这应该是“快速”）：

```
public final class Batch
{
    private static final String FORM = "pdf-form.pdf"

    public static void main(final String[] args) {
        final PdfPrinter printer = new PdfPrinter(FORM);
        final List<Customer> customers = readCustomers();

        for(final Customer customer : customers) {
            try {
                printer.fillAndCreate("pdf-" + customer.getId(), customer);
            } catch (IOException e) {
                // handle exception
            } catch (DocumentException e) {
                // handle exception
            }
        }

        printer.close();
    }

    private @Nonnull List<Customers> readCustomers() {
        // implements me
    }

    private Batch() {
        // nothing
    }
}

public class PdfPrinter implements Closable
{
    private final PdfReader reader;

    public PdfPrinter(@Nonnull final String src) {
        reader = new PdfReader(src); // <= this reads the form pdf
    }

    @Override 
    public void close() {
        reader.close();
    }

    public void fillAndCreate(@Nonnull final String dest, @Nonnull final Customer customer) throws IOException, DocumentException {
        final PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest)); // dest = output
        final AcroFields form = stamper.getAcroFields();
        form.setField("customerId", customer.getId());
        form.setField("name", customer.getName());
        // ...
        stamper.close();
    }
} 
```

另见：http: [//itextpdf.com/examples/iia.php ?id=164](http://itextpdf.com/examples/iia.php?id=164)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T09:16:45.090

正如几张海报所提到的，100 万个 PDF 文件意味着您将不得不维持每秒超过 2 个文档的速度。这可以从纯文档生成方面实现，但您需要记住，运行查询和编译数据的系统上的负载也将承受合理的负载。你也没有说任何关于 PDF 的事情 - 一页 PDF 比 40 页 PDF 更容易生成......

我已经看到 iText 和 Docmosis 每秒可以处理数十个文档，因此 Jasper 和其他技术可能也可以。我提到 Docmosis 是因为它按照您提到的技术（填充加载到内存中的模板）工作。请注意，我为制作 Docmosis 的公司工作。

如果您还没有，您将需要考虑硬件/软件架构，并使用您尝试的任何技术进行试验，以确保您能够获得所需的性能。据推测，峰值负载可能略高于平均负载。

祝你好运。

# ios - ios CATransform3DMakeScale 放大动画

> ID：12137136
> 
> 赞同：3
> 
> 时间：2012-08-27T06:28:27.367
> 
> 标签：ios, xcode, animation, subview, scaletransform

我有以下动画：

```
CATransform3D scaleTransform = CATransform3DMakeScale(0.1,0.1, 1.0);
scaleAnimation.toValue = [NSValue valueWithCATransform3D:scaleTransform];
keyframeAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];; 
```

我正在缩小子视图的地方。但我试图做相反的事情。从子视图大小的 0.01% 开始，到子视图大小的 100%。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T06:43:53.223

做这个：

```
yourSubView.transform = CGAffineTransformMakeScale(0.01, 0.01);
[UIView animateWithDuration:0.4 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{ 
//change time duration according to requirement
// animate it to the identity transform (100% scale)
yourSubView.transform = CGAffineTransformIdentity;
} completion:^(BOOL finished){
// if you want to do something once the animation finishes, put it here
}]; 
```

# azure - 为什么我无法使用由实时域服务托管的自定义域登录 Windows azure 门户

> ID：12137139
> 
> 赞同：0
> 
> 时间：2012-08-27T06:28:39.850
> 
> 标签：azure, portal, azure-connect

我的 Microsoft ID 使用我的自定义域“*@jeanfish.com”。最近想登录azure portal，登录页面提示我不能用这个ID登录。它还告诉我，如果我使用我的域，我将注销所有微软服务。附言。我的域使用 Microsoft 实时域服务，我的 ID 也用于 hotmail 电子邮件和其他 Microsoft 服务。在我的帐户中，我有三个订阅。我想使用门户来管理我托管的 azure 网站。请帮我弄清楚我的谜题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:35:21.537

请向 Windows Azure 支持提出支持请求，这将立即得到解决。

[https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn&ln=en-us](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn&ln=en-us)

提及您的登录 ID、Windows Azure 订阅 ID 和错误消息。

# hadoop - 如何在 Mahout 中更改 randomForest 的源代码？

> ID：12137140
> 
> 赞同：0
> 
> 时间：2012-08-27T06:28:40.533
> 
> 标签：hadoop, mahout

目前在 mahout 中的 randomForest 实现不处理大数据中的缺失值，它只是简单地跳过所有包含缺失值的行。

如果我想利用这个源代码来识别大数据中的缺失值，我必须对源代码进行哪些修改？

谢谢，拉库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:36:45.373

您可以通过设置不跳过不良记录来在 mapreduce 级别处理此问题。如果缺少值，它将使工作失败

# entity-framework - 是否可以从代码优先 POCO 类生成 EF 数据模型（edmx）？

> ID：12137144
> 
> 赞同：2
> 
> 时间：2012-08-27T06:29:01.493
> 
> 标签：entity-framework, poco, edmx, entity-framework-5

我喜欢 Code First 方法，但通常我更喜欢可视化模型。edmx 模型对于“数据模型”建模比 VS 类图更友好、更整洁，因此最好从代码优先 POCO 生成 edmx 并开始往返工程，因为可以从edmx 模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T19:26:56.503

您可以使用此 vs 扩展从代码优先 dbContext 生成 edmx 图，它目前为只读（扩展仅处于测试阶段）[http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T22:51:25.980

如果从 POCO 生成数据库，则可以将新的 EF 项添加到项目中，并让它从数据库生成模型。这是一个小环岛，但它运作良好。我用它来检查代码优先模型中的关系是否真的符合我的意图。

# c++ - 如何从 FIFO 队列数组中打印？

> ID：12137148
> 
> 赞同：0
> 
> 时间：2012-08-27T06:29:30.057
> 
> 标签：c++, visual-studio, queue

我写了一个 FIFO 队列，但我不断收到调试错误；MS VS2008 说：

调试器中的“此应用程序已请求运行时以不寻常的方式终止它”：fifoQueue.exe 中 0x7c81eb33 处的未处理异常：Microsoft C++ 异常：内存位置 0x0012f340 处的 std::bad_alloc ..

问题似乎来自程序的最后一部分，我试图打印存储到 FIFO 队列数组中的信息。它只打印第一项，然后崩溃。

```
#include <iostream>
#include <fstream>
#include <string>
#include "QueType.h"
#include <queue>

using namespace std;

struct movieType
{ 
string name;
char genre;
};

int main()
{
movieType movie[3];

movie[0].name="snatch"; movie[0].genre='A';
movie[1].name="layer cake "; movie[1].genre='A';
movie[2].name="rasing twins "; movie[2].genre='C';

queue<movieType> PQqueue;
for (int i=0;i<3;++i)
    PQqueue.push(movie[i]);

QueType<movieType> fifoQueue[3];

string Genre[3]={"Action", "Comedy", "Drama"};

movieType it;

while (!PQqueue.empty())
{
    it=PQqueue.front();
    PQqueue.pop();

    if (it.genre == 'A')
        fifoQueue[0].Enqueue(it);
    else if (it.genre == 'C' )
        fifoQueue[1].Enqueue(it);
    else if (it.genre == 'D')
        fifoQueue[2].Enqueue(it);
}

//!!! problem seems to come from here
movieType ij;
for (int i=0; i<3; ++i)
{
    while(!fifoQueue[i].IsEmpty())
    {
        fifoQueue[i].Dequeue(ij);
        cout<<ij.name<<endl;
    }
}

return 0;
} 
```

以及 QueType.h 的实现文件

```
#include <cstddef> //for NULL
#include <new> // for bad_alloc
//definition of NodeType
template <class ItemType>
struct NodeType
{
ItemType info; // store data
NodeType* next; // sotre location of data
};

//exception class used when queue is full
class FullQueue
{};

//Exception class used when queue is empty
class EmptyQueue
{};

//templated queue class
template<class ItemType>
class QueType
{
public:
    QueType();
    //Function: class constructor
    //Precondition: none
    //Postcondition: it initializes the pointers, front and rear to null

    ~QueType();
    //Function:class destructor
    //Precondition: queue has been initialized
    //Postcondition: deallocate allocated memory

    void MakeEmpty();
    //Function: determines whether the queue is empty
    //Precondition: queue has been initialized
    //Postcondition:queue is empty

    bool IsEmpty() const;
    //Function:determines whether the queue is empty
    //Precondition:queue has been initialized
    //Postcondition:Function value = (queue is empty)

    bool IsFull() const;
    //Function:determines whether the queue is full
    //Precondition:queue has been initialized
    //Postcondition:Function value = (queue is full)

    void Enqueue(ItemType newItem);
    //Function:Adds newItem to the rear of the queue
    //Precondition:queue has been initialized
    //Postcondition:if (queue is full), FullQueue exception is thrown,
    //else newItem is at rear of queue

    void Dequeue(ItemType& item);
    //Function:removes front item from the queue and returns it in item
    //Precondition:queue has been initialized
    //Postcondition:if (queue is empty), EmptyQueue exception is thrown
    //and item is undefines, else front element has been removed from
    //queue and item is a copy of removed element

private:
    NodeType<ItemType>* front; //pointer points to the front to the queue
    NodeType<ItemType>* rear; // pointer points to the rear of the queue
};

template<class ItemType>
QueType<ItemType>::QueType()
{
front = NULL;
rear = NULL;
}

template <class ItemType>
QueType<ItemType>::~QueType()
{
MakeEmpty();
}

template <class ItemType>
void QueType<ItemType>::MakeEmpty()
{
NodeType<ItemType>* tempPtr;//temporary pointer

while(front != NULL)
{
    tempPtr=front;
    front = front->next;
    delete tempPtr;
}
rear = NULL;
} 

template <class ItemType>
bool QueType<ItemType>::IsEmpty() const
{
return (front == NULL);
}

template <class ItemType>
bool QueType<ItemType>::IsFull() const
{
NodeType<ItemType>* location;
try
{
    location = new NodeType<ItemType>;
    delete location;
    return false;
}
catch(std::bad_alloc exception)
{
    return true;
}
}

template <class ItemType>
void QueType<ItemType>::Enqueue(ItemType newItem)
{
if (IsFull())
        throw FullQueue();
else
{
    NodeType<ItemType>* newNode;
    newNode = new NodeType<ItemType>;
    newNode ->info=newItem;
    newNode->next=NULL;
    if(rear== NULL)
            front= newNode;
    else
            rear->next=newNode;
    rear=newNode;
}
}

template <class ItemType>
void QueType<ItemType>::Dequeue(ItemType &item)
{
if(IsEmpty())
    throw EmptyQueue();
else
{
    NodeType<ItemType>* tempPtr;
    tempPtr = front;
    item= front->info;
    if(front== NULL)
            rear=NULL;
    delete tempPtr;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:58:35.247

从你的`Dequeue`功能：

```
NodeType<ItemType>* tempPtr;
tempPtr = front;
item= front->info;
if(front== NULL)
        rear=NULL;
delete tempPtr; 
```

实际上，您永远不会使任何东西*出队*，您只需释放前指针。因此，当您循环时，`IsEmpty`将返回`false`，因此您将`Dequeue`再次调用，并再次访问并释放您已经释放的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:06:37.217

在您的`Dequeue`函数中，您删除了 指向的对象`front`，但您从未设置`front`为`NULL`，因此您的`IsEmpty()`方法在不应该返回 false 时返回。

```
NodeType<ItemType>* tempPtr;
tempPtr = front;
item= front->info;
if(front== NULL)
        rear=NULL;
delete tempPtr; // deleted object pointed at by front, but front not set to NULL 
```

# javascript - 使用 Ext JS 编写的代码的模块化和重用

> ID：12137159
> 
> 赞同：0
> 
> 时间：2012-08-27T06:29:59.783
> 
> 标签：javascript, extjs, dependencies, reusability, modularization

我需要清楚地了解能够模块化我利用 Ext JS 的 JavaScript 代码。我的目标是创建扩展 Ext JS 小部件的自定义类，在多个 JavaScript 文件（.js 文件）之间分发代码。

我已经查看了文档，`Ext.Loader`但我并没有完全遵循确保类依赖解析的方法。鉴于代码顺序化是根据依赖关系，我在单个 JavaScript 文件中的代码可以正常工作。但是，一旦我在几个 JavaScript 文件中破坏代码并想在多个页面中使用，我的依赖关系就会变得混乱，因为我的所有页面都需要具有不同依赖关系的不同类。

考虑到我在常规后端编码中很容易实现代码分离和重用，这让我感到困惑。请帮忙输入。我正在使用 Ext JS 4.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:12:39.427

要在创建自定义组件时启用依赖关系解析，请`requires`使用`Ext.define`. 它看起来像这样：

```
Ext.define("My.custom.Widget", {
    alias: "widget.mywidget",
    requires: [
        "My.custom.TextField",
        "My.custom.ComboBox",
        "My.custom.Store"
    ],
    constructor: function(config){}
    /* ... */
}); 
```

有关更多信息，您应该阅读Sencha 网站上的[动态加载和新类系统](http://www.sencha.com/blog/countdown-to-ext-js-4-dynamic-loading-and-new-class-system "动态加载和新的类系统")。它更详细地介绍了动态加载的工作原理。一旦你掌握了它，它实际上真的很酷。

差点忘了。您可以在需要时显式调用`Ext.require`以加载某些文件。它支持通配符、别名等。还`Ext.exclude`可以防止某些文件加载​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:11:52.677

Sencha 有一些非常棒的指南来帮助你掌握这个框架。 [http://docs.sencha.com/ext-js/4-1/#!/guide](http://docs.sencha.com/ext-js/4-1/#!/guide)

一个好的开始是这个：[http](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture) ://docs.sencha.com/ext-js/4-1/#!/guide/ application_architecture 应用程序架构。本指南清楚地向您展示了如何模块化您的代码以及 Loader 所期望的文件夹结构。请看一看。

# php - 注意：未定义变量：Team

> ID：12137160
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:30:07.413
> 
> 标签：php, sql

现在，在我们开始之前，让我告诉大家这只是一个学校作业，我并不是 php 和 sql 编码方面的专家。

我遇到了问题，每当我执行脚本时，都会收到以下错误：

> 注意：未定义变量：Team in `C:\xampp\htdocs\NFL\searchmatches.php on line 30.`

据我了解，脚本和表单文件之间的链接会出现拼写错误，但我似乎找不到问题所在。

这是一个用于搜索数据库的文件： 脚本：

```
 <?php
    mysql_connect("localhost","root","0gd1d0wgpg") or die(mysql_error());
    mysql_select_db("NFL") or die(mysql_error());
    $query=mysql_query("SELECT * FROM Matches where Team ='$Team'") or die(mysql_error());
    $numfields = mysql_num_fields($query);
    print("<table border=\"1\">\n<tr>\n");
    for ($i=0; $i<$numfields; $i++) {
      printf("<th>%s</th>\n", mysql_field_name($query,$i));
    }
    print("</tr>\n");
    while ($row = mysql_fetch_row($query)) {
      print("<tr>\n");
      for ($i=0; $i<sizeof($row); $i++) {
         printf("<td>%s</td>\n", $row[$i]);
      }
      print("</tr>\n");
    }
    print("</table>\n");
    ?> 
```

形式：

```
<form name="addmatch" method="post" action="searchmatches.php">
Search for the match history of a particular team here.<br>
<br>
Team Name: <input type="text" name="Team_Name" value="Team Name">
<br>
<br>
<input type="submit" value="Search">
</form> 
```

是的，实际文件中有更多编码，但我认为，PHP 将是您帮助我所需的全部。

所以有人可以告诉我如何摆脱这个错误并使搜索工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:37:48.870

PHP uses a special "super global" to give you access to submitted form values. The $_POST superglobal is an array with keys that match the name attribute of the form elements (when the form is submitted with the "post" method). Add this line:

```
$Team = mysql_real_escape_string($_POST['Team_Name']); 
```

above the use of $Team in the query.

To recap, the 'Team_Name' identifier comes from your HTML:

```
<input type="text" name="Team_Name" value="Team Name"> 
```

and then when the form is submitted, whatever you put in that form control is available at `$_POST['Team_Name']`. I passed the value through the "escape" function so to protect your query from going bonkers (or worse) if that value happened to contain special characters.

# php - php regex 将 split 更改为 preg_split - 具体示例

> ID：12137161
> 
> 赞同：0
> 
> 时间：2012-08-27T06:30:07.300
> 
> 标签：php, preg-split

很多类似的问题，但我有一个具体的例子，我希望得到一些帮助。将旧的 php 5.2 代码迁移到 5.3

```
for($s=0;$s<count($tmp=split("/",$check_for));$s++) 
```

假设将是

```
for($s=0;$s<count($tmp=preg_split("///",$check_for));$s++) 
```

但是，我得到

```
Warning: preg_split() [function.preg-split]: Unknown modifier '/' 
```

有人可以给我一些指导吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:33:29.963

模式的第一个字符是将`preg_XXX`模式与后面的选项分开的分隔符。因此，您不能在模式本身中使用分隔符而不对其进行转义。

考虑使用不同的分隔符，例如`~`：

```
for($s=0;$s<count($tmp=preg_split("~/~",$check_for));$s++) 
```

# mysql - 如何优化以下查询

> ID：12137162
> 
> 赞同：4
> 
> 时间：2012-08-27T06:30:12.903
> 
> 标签：mysql, sql, optimization, query-optimization

```
SELECT
    t1.theater_id,
    sum(t2.full_sale_price * t1.full_tickets + 
        t2.half_sale_price * t1.half_tickets) as Gross,
    sum(t2.full_cost_price * t1.full_tickets +
        t2.half_cost_price * t1.half_tickets) as Cost,
    Round(sum((t2.full_sale_price * t1.full_tickets + 
               t2.half_sale_price * t1.half_tickets) * t3.rate) / 100,
         2) as IPG,
         (sum(t2.full_sale_price * t1.full_tickets + 
              t2.half_sale_price * t1.half_tickets) 
              - Round(sum((t2.full_sale_price * t1.full_tickets + 
              t2.half_sale_price * t1.half_tickets) * (CASE
                WHEN ISNULL(t3.rate) THEN 0
                ELSE t3.rate
                END)) / 100,
            2)) as NetRev,
    CASE
        WHEN (t1.method = '2') THEN sum(0.00)
        ELSE 0
    END as sms,
    sum((CASE
        WHEN (t4.type = '1') THEN ((t1.full_tickets * 2) + (t1.half_tickets))
        ELSE (t1.full_tickets + t1.half_tickets)
    END) * 4.00) as maintenance,
    sum((((t2.full_sale_price * t1.full_tickets + 
           t2.half_sale_price * t1.half_tickets) 
           - (Round((t2.full_sale_price * t1.full_tickets + 
                     t2.half_sale_price * t1.half_tickets) * (CASE
                WHEN ISNULL(t3.rate) THEN 0
                ELSE t3.rate
            END) / 100,
            2))) - (t2.full_cost_price * t1.full_tickets + 
                    t2.half_cost_price * t1.half_tickets)) 
                    - (CASE
                       WHEN (t1.method = '2') THEN 0.00
                       ELSE 0
                       END) 
                    - (CASE
                       WHEN (t4.type = '1') THEN ((t1.full_tickets * 2) +
                                                  (t1.half_tickets))
                       ELSE (t1.full_tickets + t1.half_tickets)
    END) * 4.00) as admincost,
    sum(CASE
        WHEN (t4.type = '1') THEN ((t1.full_tickets * 2) + (t1.half_tickets))
        ELSE (t1.full_tickets + t1.half_tickets)
    END) as totTk
FROM
    `ratecard_rates` as t2 INNER JOIN
    `reservation` as t1 ON t1.movie_id = t2.movie_id
        AND t1.theater_id = t2.theater_id
        AND t1.showtime_id = t2.showtime_id
        AND t1.category_id = t2.category_id
        AND t1.bx_date = t2.date_apply
        LEFT JOIN
    `paymentgateway` as t3 ON t1.paymentgateway_id = t3.id
        LEFT JOIN
    `theatercategories` as t4 ON t1.category_id = t4.id
WHERE
    t1.status = '1' AND t1.method = '1'
        AND t1.reservation_type = '1'
        AND DATE(`tx_date`) BETWEEN DATE('2012-08-27') AND DATE('2012-08-27')
GROUP BY t1.theater_id 
```

这是解释 ![解释](../Images/47b6b3b23e837af44f7ad861859e3c24.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:20:22.517

`"Using temporary; using filesort"`通常意味着在查询计划的这一点上，MySsql 决定将临时集写入磁盘，不幸的是，这意味着它并不总是能够使用您可能已放置在相关列上的索引。

以我的经验，解决这个问题的唯一方法是尝试减少临时结果的集合大小。尝试隔离发生这种情况的点：例如：`SELECT`用 a替换你的整体`COUNT(*)`以消除 CASE 位等，看看是什么产生了 MySql 想要在磁盘上“缓存”的 2779 行。

有关更多信息，请参阅[此答案](https://stackoverflow.com/a/1092009/110933)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:14:23.197

您是盲目索引还是首先检查了执行计划？`CASE..END`子句有很大帮助，但有时会弄乱执行计划。检查[此链接](http://jahaines.blogspot.com.es/2010/05/performance-tuning-case-expressions.html)它可以帮助您理解我在说什么。一种选择是创建一个存储过程并将此查询拆分为较小的查询。有时子查询可能会有所帮助，这是尝试的另一种选择。

# android - 在电话间隙android应用程序中显示密码字段值片刻

> ID：12137166
> 
> 赞同：0
> 
> 时间：2012-08-27T06:30:30.267
> 
> 标签：android, jquery-mobile, cordova, passwords

如何在 JQM android phonegap 应用程序的密码字段中按原样显示输入文本而不是星号。（这在 android 4.1 中有效，但在 android 2.2 中无效）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:56:37.543

我认为这是特定于平台的。刚刚检查了我的android 2.3 v手机中的几个应用程序，当你按下它时没有字符显示。

我建议不要去。仍然有一些可能的解决方案是（如果你太在意的话）

1.  创建一个事件并使用 javascript 显示按下的字符一秒钟（但是当应用程序处于 4.1/其他更高版本时，您必须检查平台并禁用它，因为那里已经有显示）

2.  放一个选项“显示密码”，并显示整个密码。（标准方法）

# asp.net-mvc - 从 mvc4 重定向到另一个应用程序的最有效方法

> ID：12137168
> 
> 赞同：0
> 
> 时间：2012-08-27T06:30:51.493
> 
> 标签：asp.net-mvc, azure

我有一个 mvc4 应用程序，我正在寻找托管在 azure 网站上的内容。唯一的任务是从参数中获取代码并重定向到我们主应用程序中的页面。我们有一个 .co 域，所以我们发布了类似 mydomain.co/abc 的短代码，我检查了这个示例 abc 中的代码，并将其重定向到我们主应用程序的某个位置。

我的问题是我只是创建一个控制器并从控制器执行重定向，还是可以在控制器之前执行此操作？我希望它尽可能轻巧。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:35:50.327

采用参数的控制器操作，通过传递此参数来查询某些数据存储以检索其他数据并最终重定向到相应的应用程序似乎很好。另一种可能性是编写一个自定义路由来执行这些任务，但恕我直言，有一个控制器操作来完成它似乎更容易。

# php - PHP 代码显示在用户的浏览器中

> ID：12137177
> 
> 赞同：0
> 
> 时间：2012-08-27T06:31:40.080
> 
> 标签：php

我有一个这样的 php 脚本：

```
<?php
$confirmationCode = trim($_GET['confcode']);
$_SERVER['REMOTE_ADDR'] = 'xxx.xxx.xxx.xxx';
$emailLogId = 1;
if ($_SERVER['REMOTE_ADDR']=='xxx.xxx.xxx.xxx') {
//   print '<pre>' .'xxxxx' . $emailLogId . '###';  //exit ;    
}
if( is_numeric($emailLogId)) {
if ($_SERVER['REMOTE_ADDR']=='xxx.xxx.xxx.xxx') {
// print '<pre>yyy' . $_GET['emaillog_id'] . 'yyyxxxxxx ' . $emailLogId;  print_r             ($row) ; exit ;   
}
//$osDB->query('UPDATE ! SET clicktime=? WHERE id=?', array('email_logs', time(),   $emailLogId));
} else {
if ($_SERVER['REMOTE_ADDR']=='xxx.xxx.xxx.xxx') {
//   print '<pre>zzz' . $_GET['emaillog_id'] . 'yyyxxxxxx ' . $emailLogId;  print_r ($row) ; exit ;     
}
}
?> 
```

它正在我的服务器上运行。实际上有些人抱怨他们在浏览器上看到了这个脚本的源代码（粘贴在下面），他们给我发了这个问题的快照：

```
 ' .'xxxxx' . $emailLogId . '###';  //exit ;    
}
 if( is_numeric($emailLogId)) {
 if ($_SERVER['REMOTE_ADDR']=='xxx.xxx.xxx.xxx') {
// print '<pre>yyy' . $_GET['emaillog_id'] . 'yyyxxxxxx ' . $emailLogId;  print_r ($row) ; exit ;   
}
//$osDB->query('UPDATE ! SET clicktime=? WHERE id=?', array('email_logs', time(), $emailLogId));
 } else {
if ($_SERVER['REMOTE_ADDR']=='xxx.xxx.xxx.xxx') {
 //  print '<pre>zzz' . $_GET['emaillog_id'] . 'yyyxxxxxx ' . $emailLogId;  print_r ($row) ; exit ;     
}
 }
?> 
```

实际上我真的很困惑，因为我无法重现这个问题，但是 3-4 人都在抱怨同样的事情。

你知道是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:35:58.080

是的，类似的事情也发生在我身上。

2件事：

. **阿帕奇配置。**

确保 php 引擎已打开。如果您无法访问您的 apache 配置文件，请将其添加到您的 .htaccess 中：

```
php_flag engine on 
```

. **CDN。**

如果您使用任何云分发网络，是时候让他们清除您现有的缓存并重新加载新缓存了。

仅当 apache 配置出错时，浏览器才会显示 PHP 源代码。

希望有帮助。

编辑：

在阅读了 Sabin 的评论后，我再次查看了代码。

问题是，他已将值分配给`$_SERVER['REMOTE_ADDR']`（第 3 行）

应该是这样的：

```
<?php
$confirmationCode = trim($_GET['confcode']);
$ip = 'xxx.xxx.xxx.xxx';
$emailLogId = 1;

//Whatever conditions.
if ($_SERVER['REMOTE_ADDR'] == 'xxx.xxx.xxx.xxx') {
//   print '<pre>' .'xxxxx' . $emailLogId . '###';  exit ;    
}
if( is_numeric($emailLogId)) {
if ($_SERVER['REMOTE_ADDR'] == 'xxx.xxx.xxx.xxx') {
// print '<pre>yyy' . $_GET['emaillog_id'] . 'yyyxxxxxx ' . $emailLogId;  print_r             ($row) ; exit ;   
}
//$osDB->query('UPDATE ! SET clicktime=? WHERE id=?', array('email_logs', time(),   $emailLogId));
} else {
if ($_SERVER['REMOTE_ADDR']=='xxx.xxx.xxx.xxx') {
//   print '<pre>zzz' . $_GET['emaillog_id'] . 'yyyxxxxxx ' . $emailLogId;  print_r ($row) ; exit ;     
}
}
?> 
```

但是，回显源代码不能是由于这个原因。我会要求您输入完整文件，以便我们可以查看您是否缺少单引号！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:53:40.620

听起来PHP根本不起作用。您没有看到第一部分的唯一原因是您的浏览器正在解析它，就好像它是一个 HTML 标记一样。

请尝试打印 phpinfo() 一次，

请检查以下链接，了解更多详情

[浏览器中显示的 PHP 代码](https://stackoverflow.com/questions/10093271/php-code-displayed-in-browser)

# java - 从 java 生成 FontMetrics

> ID：12137179
> 
> 赞同：1
> 
> 时间：2012-08-27T06:32:05.553
> 
> 标签：java

我正在通过将 ttf 文件作为输入在服务器端生成字体度量。

我正在尝试 Font 、 FontRenderContext 、 GlyphVector 和 GlyphMetrics 类。我也尝试过 Apache FOP 但生成的指标对我没有帮助。

想知道以下操作是否可行？

1.  给定 unicode ，我怎么知道它是否有一个独立的字形或者它必须与另一个字形等复合。
2.  是否可以使用所有这些详细信息生成字体指标并将其用于计算我的线宽
3.  我如何知道字形是否是连字以及如何在渲染后获得字形宽度？
4.  我可以假设复合字形总是出现在右侧吗？

任何指向这些都会有帮助吗？

# javascript - 使用 node.js 的 HTTPS 请求？

> ID：12137192
> 
> 赞同：2
> 
> 时间：2012-08-27T06:33:01.077
> 
> 标签：javascript, node.js, express

我需要在我的 node.js 应用程序中触发一个请求。我的应用程序有一条路线，当它运行时，我试图点击一个动态构建的 url。所以我只需要触发一个 REST API 调用，比如：

`"https://www.domainname.com/sometext/"+ var1 +"/someothertext"`

所以我尝试了这个：

```
var options = {
    host: 'www.domainname.com',
    port: 80,
    path: '/1.0/'+var1,
    method: 'GET'
};

//  trigger request 
request(options, function(err,response,body) {
.......
}); 
```

当我运行这个我得到这个错误： `options.uri is a required argument`

所以，我的目标是触发命中动态构建的 url 的请求。如果我有一个静态 url，我可以插入请求，它会正常工作。

事实上，我试图这样做：

```
request("https://www.domainname.com/1.0/456", function(err,response,body) {
.......
}); 
```

这很好用。

但是我正在尝试使用 var1 动态构建 url（路径），但这不起作用。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T06:54:32.057

您需要在作为第一个参数传递给`request`函数的选项中使用 URL 或 URI

`request("https://www.domainname.com/1.0/456",function(err,response,body) {` 不会失败的原因是因为您提供了 url 作为第一个参数

因此，将您的`options`对象更改为

```
var options = {
    url: 'https://www.domainname.com/sometext/'+ var1,
    port: 80,
    method: 'GET'
}; 
```

您可以尝试在`var1`like 中修剪值`var1 = var1.replace(/^\s*|\s*$/g, '')`；

那应该删除空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:48:28.937

因为`options`请求所采用的参数没有被赋予正确的格式化对象。

您收到的错误是因为您需要发送 a`url or uri`作为选项。这可以在这里澄清：

[https://github.com/request/request](https://github.com/request/request)

以下应该做你想要的：

所以我尝试了这个：

```
var options = {
    url: "https://www.domainname.com/sometext/"+ var1 +"/someothertext"
    method: 'GET'
};

//  trigger request 
request(options, function(err,response,body) {
  console.log(response.statusCode);
}); 
```

# r - 使用 2 个数据帧的 R 中的有效子集

> ID：12137194
> 
> 赞同：4
> 
> 时间：2012-08-27T06:33:10.967
> 
> 标签：r, performance

我在一个数据框中有一个大的时间序列`full`，在不同的数据框中有一个时间戳列表`test`。我需要`full`用围绕时间戳的数据点进行子集化`test`。我的第一直觉（作为一个 R 菜鸟）是写下面的，这是错误的

```
subs <- subset(full,(full$dt>test$dt-i) & (full$dt<test$dt+i)) 
```

查看结果，我意识到 R 同时遍历两个向量，给出了错误的结果。我的选择是编写如下循环：

```
subs<-data.frame()
for (j in test$dt) 
  subs <- rbind(subs,subset(full,full$dt>(j-i) & full$dt<(j+i))) 
```

我觉得可能有更好的方法来做循环，[这篇文章](http://www.r-bloggers.com/on-the-gory-loops-in-r/)恳请我们尽可能避免 R 循环。另一个原因是我可能会遇到性能问题，因为这将是优化算法的核心。大师的任何建议将不胜感激。

编辑：

这是一些可重现的代码，它们显示了错误的方法以及可行但可能更好的方法。

```
#create a times series
full <- data.frame(seq(1:200),rnorm(200,0,1))
colnames(full)<-c("dt","val")

#my smaller array of points of interest
test <- data.frame(seq(5,200,by=23))
colnames(test)<-c("dt")

# my range around the points of interset
i<-3 

#the wrong approach
subs <- subset(full,(full$dt>test$dt-i) & (full$dt<test$dt+i))

#this works, but not sure this is the best way to go about it
subs<-data.frame()
for (j in test$dt) 
  subs <- rbind(subs,subset(full,full$dt>(j-i) & full$dt<(j+i))) 
```

编辑：我更新了这些值以更好地反映我的用例，并且我看到 @mrdwab 的解决方案出人意料地大幅领先。

我正在使用来自@mrdwab 的基准代码，初始化如下：

```
set.seed(1)

full <- data.frame(
  dt  = 1:15000000,
  val = floor(rnorm(15000000,0,1))
)

test <- data.frame(dt = floor(runif(24,1,15000000)))

i <- 500 
```

基准是：

```
 test replications elapsed relative
2    mrdwab            2    1.31  1.00000
3 spacedman            2   69.06 52.71756
1    andrie            2   93.68 71.51145
4  original            2  114.24 87.20611 
```

完全出乎意料。头脑=炸毁。有人可以在这个黑暗的角落里阐明一些光，并启发正在发生的事情。

**重要提示：正如@mrdwab 下面所指出的，他的解决方案仅在向量为整数时才有效。如果没有，@spacedman 有正确的解决方案**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T08:15:34.983

这是一个真正的 R 方法。功能上。没有循环...

从 Andrie 的示例数据开始。

一、区间比较函数：

```
> cf = function(l,u){force(l);force(u);function(x){x>l & x<u}} 
```

一个 OR 组合函数：

```
> OR = function(f1,f2){force(f1);force(f2);function(x){f1(x)|f2(x)}} 
```

现在这里有一个循环，用于构建这些比较函数的列表：

```
> funs = mapply(cf,test$dt-i,test$dt+i) 
```

现在将所有这些组合成一个函数：

```
> anyF = Reduce(OR,funs) 
```

现在我们将 OR 组合应用于我们的区间测试函数：

```
> head(full[anyF(full$dt),])
   dt         val
3   3 -0.83562861
4   4  1.59528080
5   5  0.32950777
6   6 -0.82046838
7   7  0.48742905
26 26 -0.05612874 
```

你现在得到的是一个单一变量的函数，它测试值是否在你定义的范围内。

```
> anyF(1:10)
 [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE 
```

我不知道这是否更快，或者更好，或者什么。有人做一些基准测试！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T07:24:27.387

我不知道它是否更有效率，但我认为你也可以做这样的事情来得到你想要的：

```
subs <- apply(test, 1, function(x) c((x-2):(x+2)))
full[which(full$dt %in% subs), ] 
```

我不得不将您的“3”调整为“2”，因为`x`这两种方式都包含在内。

## 基准测试（只是为了好玩）

@Spacedman 带路！

首先，所需的数据和功能。

```
## Data
set.seed(1)

full <- data.frame(
  dt  = 1:200,
  val = rnorm(200,0,1)
)

test <- data.frame(dt = seq(5,200,by=23))

i <- 3 

## Spacedman's functions
cf = function(l,u){force(l);force(u);function(x){x>l & x<u}}
OR = function(f1,f2){force(f1);force(f2);function(x){f1(x)|f2(x)}}
funs = mapply(cf,test$dt-i,test$dt+i)
anyF = Reduce(OR,funs) 
```

二是对标。

```
## Benchmarking
require(rbenchmark)
benchmark(andrie = do.call(rbind, 
                           lapply(test$dt, 
                                  function(j) full[full$dt > (j-i) & 
                                    full$dt < (j+i), ])),
          mrdwab = {subs <- apply(test, 1, 
                                  function(x) c((x-(i-1)):(x+(i-1))))
                    full[which(full$dt %in% subs), ]},
          spacedman = full[anyF(full$dt),],
          original = {subs <- data.frame()
                      for (j in test$dt) 
                        subs <- rbind(subs, 
                                      subset(full, full$dt > (j-i) & 
                                        full$dt < (j+i)))},
          columns = c("test", "replications", "elapsed", "relative"),
          order = "relative")
#        test replications elapsed  relative
# 3 spacedman          100   0.064  1.000000
# 2    mrdwab          100   0.105  1.640625
# 1    andrie          100   0.520  8.125000
# 4  original          100   1.080 16.875000 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T07:24:44.760

您的代码本质上没有任何问题。为了实现您的目标，您需要围绕矢量化子集操作进行某种循环。

但这里有更多的 R-ish 方式，它可能会更快：

```
do.call(rbind, 
  lapply(test$dt, function(j)full[full$dt > (j-i) & full$dt < (j+i), ])
) 
```

* * *

PS：您可以显着简化可重现的示例：

```
set.seed(1)

full <- data.frame(
  dt  = 1:200,
  val = rnorm(200,0,1)
)

test <- data.frame(dt = seq(5,200,by=23))

i <- 3 

xx <- do.call(rbind, 
  lapply(test$dt, function(j)full[full$dt > (j-i) & full$dt < (j+i), ])
)

head(xx)
   dt         val
3   3 -0.83562861
4   4  1.59528080
5   5  0.32950777
6   6 -0.82046838
7   7  0.48742905
26 26 -0.05612874 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T09:55:59.817

使用 data.tables 的另一种方法：

```
{
temp <- data.table(x=unique(c(full$dt,(test$dt-i),(test$dt+i))),key="x")
temp[,index:=1:nrow(temp)]
startpoints <- temp[J(test$dt-i),index]$index
endpoints <- temp[J(test$dt+i),index]$index
allpoints <- as.vector(mapply(FUN=function(x,y) x:y,x=startpoints,y=endpoints))
setkey(x=temp,index)
ans <- temp[J(allpoints)]$x
} 
```

基准：测试行数：9 完整行数：10000

```
 test replications elapsed relative
1 spacedman          100   0.406    1.000
2       new          100   1.179    2.904 
```

完整行数：100000

```
 test replications elapsed relative
2       new          100   2.374    1.000
1 spacedman          100   3.753    1.581 
```

# iphone - 谷歌加分享在浏览器中打开链接

> ID：12137197
> 
> 赞同：1
> 
> 时间：2012-08-27T06:33:18.817
> 
> 标签：iphone, objective-c, google-plus

我只是想实现一个 iPhone 应用程序，它有一个分享功能`Google+`。因此，当我单击共享按钮时，它会在 safari 中打开链接。相反，我想让它像`Facebook`弹出窗口一样。有没有可能实现它？

```
- (IBAction) didTapShare: (id)sender {

    share = [[[GooglePlusShare alloc] initWithClientID:kClientID] autorelease];
    /*   share.delegate = self; // optional
     appDelegate.share = share; //optional*/

    [[[[share shareDialog] setURLToShare:[NSURL URLWithString:@"URL_TO_SHARE"]] setPrefillText:descStr] open];

    [[share shareDialog] open];
} 
```

这是我用来分享的代码。我查了一下 GooglePlusShare 类，我想不出任何可能的东西。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:15:58.143

我认为，现在，这是在 google plus 上发帖的首选方式。毕竟。在 google plus 上发布状态后..它也会返回到您的应用程序..

# php - Memcache 在一个函数中获取 php，单键和多键？

> ID：12137204
> 
> 赞同：2
> 
> 时间：2012-08-27T06:33:46.937
> 
> 标签：php, memcached

我正在阅读 php 文档（请参阅：[此处](http://www.php.net/manual/en/memcache.get.php)），它说您可以将`Memcache::get()`函数用于单个或多个请求，这可能吗？

如果是，为什么我们有`getMulti`方法 in `Memcached`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:38:32.850

`Memcache::get(array(...))`是一次获取多个结果的 Memcache 方法。
`Memcached::getMulti()`是一次获取多个结果的 Memcached 方法。

注意：Memcache 是一个与 Memcached 完全不同的库/扩展。

# java - 如何汇总具有不同可能性的单个列的记录？

> ID：12137205
> 
> 赞同：5
> 
> 时间：2012-08-27T06:33:55.447
> 
> 标签：java, mysql, sql

我有一个mysql查询：

```
SELECT count(*) as `present_days` 
FROM  tbl_intime_status 
WHERE employee_status = 'Out' and 
      present_status = 'Full Day' and 
      date LIKE '%/"+month2+"/"+year1+"' and 
      employee_id="+ EmpId+ 
```

从这个查询我得到没有。现在的`Full Day`。

我的数据库记录中有`present_status= 'Half Day'`& `present_status = 'Full Day'`。

如何计算“全天”+“半天”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T06:38:09.230

如果你想分开计数，你可以这样做

```
SELECT present_status, count(*) as `present_days` 
FROM  tbl_intime_status 
WHERE employee_status = 'Out' and 
      present_status IN ('Full Day','Half Day')
      date LIKE '%/"+month2+"/"+year1+"' and 
      employee_id="+ EmpId+
GROUP BY present_status 
```

如果您想要两者的总数，请执行此操作

```
SELECT count(*) as `present_days` 
FROM  tbl_intime_status 
WHERE employee_status = 'Out' and 
      present_status IN ('Full Day','Half Day')
      date LIKE '%/"+month2+"/"+year1+"' and 
      employee_id="+ EmpId+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T06:41:21.947

尝试，不要忘记转义该`date`列，因为它是保留字。

```
SELECT present_status, count(*) as `present_days` 
FROM   tbl_intime_status 
WHERE  employee_status = 'Out' and 
       present_status IN ('Full Day','Half Day')
       `date` LIKE '%/"+month2+"/"+year1+"' and 
       employee_id = " + EmpId + "
GROUP BY present_status 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T06:41:55.387

我想试试这个，看看它是否有效：

```
...

present_status in ('Full Day',  'Half Day' )

... 
```

语法可以在这里找到：[**SQL IN Operator。**](http://www.w3schools.com/sql/sql_in.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T06:36:47.563

只需将其添加到您的 where 子句中，或者使用`IN`：

```
...
WHERE present_status IN ('Full Day','Half Day')
... 
```

或与`OR`：

```
...
WHERE (present_status = 'Full Day' OR present_status = 'Half Day')
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T06:37:42.053

这是你想要的：

```
SELECT count(*) as present_days 
FROM tbl_intime_status 
WHERE employee_status = 'Out' 
and present_status IN ('Full Day', 'Half Day') 
and date LIKE '%/"+month2+"/"+year1+"' 
and employee_id="+ EmpId 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T06:57:49.710

这将使您将所有类型的计数拆分为一行：

```
SELECT SUM(IF(present_status  = 'Full Day', 1, 0)) AS full_present_days,
       SUM(IF(present_status  = 'Half Day', 1, 0)) AS half_present_days,
       COUNT(*) AS present_days
FROM  tbl_intime_status
WHERE employee_status = 'Out' and
      present_status IN('Full Day', 'Half Day') and
      date LIKE '%/"+month2+"/"+year1+"' and
      employee_id="+ EmpId+; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T07:04:11.477

```
SELECT SUM(
   CASE present_status
     WHEN 'Full Day' THEN 1
     WHEN 'Half Day' THEN 0.5
     END
 ) as `present_days`  
FROM  tbl_intime_status  WHERE employee_status = 'Out' 
```

希望这是您正在寻找的查询。

# java - 我们如何将键盘输入提供给 OSGI 包。我想从用户那里获取矩阵元素

> ID：12137208
> 
> 赞同：-4
> 
> 时间：2012-08-27T06:34:15.260
> 
> 标签：java, input, osgi, knopflerfish

我正在使用 OSGI 框架创建两个包。一个用于查找给定矩阵的行列式，另一个用于从 user 获取矩阵。我正在使用 knopflerfish 框架运行这些捆绑包。当我为矩阵取恒定值并运行这些捆绑包时，它们工作正常。但是，当我编写代码以获取用户输入并在 knopflerfish 的 jar 文件中运行它时，它会在 nextInt() 方法中给出错误。请给我这个问题的解决方案。

这是我用来创建包的 Activator 类的代码。我正在创建这个包的 jar 文件并在 knopflerfish 中运行它。它在 nextInt() 方法中显示错误。我无法获得用户输入。如果我将这个程序作为 java 应用程序独立运行，它可以工作，但在 knopflerfish 框架中它不能工作

```
 package matrixuse;
    import java.util.Scanner;
    import org.osgi.framework.BundleActivator;
    import org.osgi.framework.BundleContext;
    import org.osgi.framework.Constants;
    import org.osgi.framework.ServiceReference;
    import matrixCal.*;
    public class Activator implements BundleActivator {
    public static BundleContext bc = null;
    public void start(BundleContext bc) throws Exception {
    System.out.println(bc.getBundle().getHeaders().get(
    Constants.BUNDLE_NAME)+ " starting...");
    Activator.bc = bc;
    ServiceReference reference = bc.getServiceReference
    (MatrixCal.class.getName());
    MatrixCal service = (MatrixCal)bc.getService(reference);
    int rows, cols;
    MatrixInput m1=new MatrixInput();
    Scanner input = new Scanner(System.in);
    System.out.print("Enter number of rows: ");
    rows = input.nextInt();
    System.out.print("Enter number of columns: ");
    cols = input.nextInt();
    int array[][] = new int[rows][cols];
    System.out.println("Enter elements for Matrix");
    for (int i = 0; i < rows; i++) {
    for (int j = 0; j < cols; j++) {
     array[i][j] = input.nextInt();
        }
      }

    int result = service.determinant(array,array.length);
    System.out.println("Calculated Determinant is :"+ result);
    bc.ungetService(reference);
    }
    public void stop(BundleContext bc) throws Exception {
     Activator.bc = null;
    }
    } 
```

例外是

```
 java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at java.util.Scanner.nextInt(Unknown Source)
    at java.util.Scanner.nextInt(Unknown Source)
    at matrixuse.Activator.start(Activator.java:24)
    at org.knopflerfish.framework.BundleImpl.start0(BundleImpl.java:356)
    at org.knopflerfish.framework.BundleThread.run(BundleThread.java:107) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:27:24.363

作为`System.in`在您的激活器中使用的替代方法，我建议您使用[Felix GoGo Shell](http://felix.apache.org/site/apache-felix-gogo.html)（这是一个您也可以部署到 Knopflerfish 中的捆绑包）。它提供了一个简单的[扩展模型来添加新命令](http://felix.apache.org/site/rfc-147-overview.html)，包括命令完成。

# performance - sybase - count(*) 和 count(1) 之间是否存在性能差异

> ID：12137211
> 
> 赞同：2
> 
> 时间：2012-08-27T06:34:39.137
> 
> 标签：performance, count, sybase

### 查询一：

```
SELECT COUNT(1) FROM STUDENTS 
```

### 查询 2：

```
SELECT COUNT(*) FROM STUDENTS 
```

两个查询都返回相同的结果，但这两者之间有什么性能差异吗？

我听说第一个查询会比第二个查询快，但是任何人都可以提供有关它的具体细节吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:13:31.657

您可以使用`count(*)`or `count(1)`，一个并不比另一个快。如前所述，这只是一个*都市*传说:)

* * *

最后一点，`count(*)`可能`count(columnName)` **会有所不同！**
第一个计算所有行数，第二个计算指定列不为 NULL 的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:39:36.493

这两种说法没有任何区别。

更快的谣言`count(1)`是一个从未成为真实的都市传说。

# linux - 在 BASH 中的选定文本中搜索字符串/模式

> ID：12137214
> 
> 赞同：0
> 
> 时间：2012-08-27T06:34:54.367
> 
> 标签：linux, bash, shell

如果所选文本中出现字符串“-----BEGIN PGP MESSAGE-----”，我想解密所选文本。我有以下代码，但它没有显示任何内容。

```
#!/bin/bash
xsel > pgp.txt
if [grep -e "-----BEGIN PGP MESSAGE-----" pgp.txt]
then
gnome-terminal --command "gpg -d -o decrypted.txt pgp.txt"
gedit decrypted.txt
fi 
```

当我在选择文本后在终端上运行它时

```
line 3: [grep: command not found 
```

我是 bash 脚本的新手。任何帮助将不胜感激..
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:46:42.490

`[grep`它搜索称为`if`参数的可执行文件。`if`执行其 then 或 else 分支，具体取决于其参数是否成功执行。是的，`[`是一个命令（`test`btw 的同义词）。你可能想要

```
if grep -q -e "-----BEGIN PGP MESSAGE-----" pgp.txt
then 
```

（添加`-q`所以`grep`不输出任何东西。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:07:03.947

我认为您在这里缺少一些元素：

*   空格：在开头 '[' 之后有一个，在结束 ']' 之前有一个
*   反引号：因为你需要测试执行 grep 命令的结果
*   一种 ';' 在结束 ']' 之后

这是一个重写的版本：

```
if [ `grep -e "-----BEGIN PGP MESSAGE-----" pgp.txt` ]; then
  gnome-terminal --command "gpg -d -o decrypted.txt pgp.txt"
  gedit decrypted.txt
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:09:54.740

我想向您推荐两种变体。两者相等

```
if $(grep -q -- "-----BEGIN PGP MESSAGE-----" pgp.txt);
then 
```

或者

```
if $(grep -qe "-----BEGIN PGP MESSAGE-----" pgp.txt);
then 
```

# java - 坚持 AlertDialog 选项

> ID：12137218
> 
> 赞同：0
> 
> 时间：2012-08-27T06:35:17.703
> 
> 标签：java, android, android-alertdialog

我正在创建一个`AlertDialog`. 这是我正在使用的代码片段：

```
final CharSequence[] items = {"Red", "Green", "Blue"};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Pick a color");
builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {
        Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
    }
});
AlertDialog alert = builder.create();
alert.show(); 
```

这工作正常，但我无法弄清楚如何将选择选项保存在某处，以便下次打开警报对话框时，会显示先前选择的选项。我不需要这个值在应用程序重新启动时保持不变，只要应用程序在后台并且没有完全丢弃。

作为 Android 开发的新手，我发现这很难完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:47:06.327

使用下面的代码：

```
private static final String SELECTED_ITEM = "SelectedItem";
private SharedPreferences sharedPreference;
private Editor sharedPrefEditor;

private void showAlert() {
    final CharSequence[] items = {"Red", "Green", "Blue"};

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Pick a color");               
    builder.setSingleChoiceItems(items, getSelectedItem(), new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            saveSelectedItem(item);
            Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
        }       
    });
    AlertDialog alert = builder.create();
    alert.show();

}

private int getSelectedItem() {
    if (sharedPreference == null) {
        sharedPreference = PreferenceManager
                .getDefaultSharedPreferences(this);
    }
    return sharedPreference.getInt(SELECTED_ITEM, -1);
}

private void saveSelectedItem(int item) {
    if (sharedPreference == null) {
        sharedPreference = PreferenceManager
                .getDefaultSharedPreferences(this);
    }
    sharedPrefEditor = sharedPreference.edit();
    sharedPrefEditor.putInt(SELECTED_ITEM, item);
    sharedPrefEditor.commit();
} 
```

第一次，什么都不会被选中。从第二次开始，将默认选择先前选择的项目。

# c# - 来自 c# 代码的简单 http web 发布请求无法正常工作，而来自 REST 客户端的相同内容工作正常

> ID：12137219
> 
> 赞同：1
> 
> 时间：2012-08-27T06:35:21.043
> 
> 标签：c#, asp.net, httpwebrequest, webclient, rest-client

我必须请求一个 URL，即“ [http://192.168.220.12:5000”，java](http://192.168.220.12:5000)服务将在其中接收它，

以以下字符串为主体

```
<?xml version='1.0'?><!DOCTYPE svc_init SYSTEM 'ABCD.DTD'><svc_init ver='3.3.0'><hdr ver='3.3.0'><client><id>xxx</id><pwd>xxx</pwd></client></hdr><aaaa ver='3.3.0'><trans_id>1</trans_id><request_type type='2'/><l_hor_acc type='HIGH'/></aaaa></svc_init> 
```

我可以在我的 Firefox 浏览器中使用 RESTClient 成功完成此操作，请参见下图： ![在此处输入图像描述](../Images/4ea9852d2c99016a9d19f12bb756959a.png) 但是当我通过以下 C# 代码发送它时，它给了我以下错误：

```
 java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(Unknown Source)
    at Creader.run(Creader.java:42) 
```

C#代码如下：

```
xmlData= "<?xml version='1.0'?><!DOCTYPE svc_init SYSTEM 'ABCD.DTD'><svc_init ver='3.3.0'><hdr ver='3.3.0'><client><id>xxx</id><pwd>xxx</pwd></client></hdr><aaaa ver='3.3.0'><trans_id>1</trans_id><request_type type='2'/><l_hor_acc type='HIGH'/></aaaa></svc_init>";

address = "http://192.168.220.12:5000";

using (var client = new WebClient())
{
  client.UploadData(address , Encoding.ASCII.GetBytes(xmlData));
} 
```

我在这里做错了什么？

我也尝试过，但没有任何效果。1) 使用另一种方法将 xmlData 转换为 byte []。2) 使用 Encoding.UTF8.GetBytes 而不是 Encoding.ASCII.GetBytes。3) 使用 client.UploadString(new Uri(mlcAddress), xmlData) 而不是 client.UploadData...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:41:57.640

```
 WebRequest request = WebRequest.Create("http://192.168.220.12:5000");
            request.Method = "POST";
            string xmlData= "<?xml version='1.0'?><!DOCTYPE svc_init SYSTEM 'ABCD.DTD'><svc_init ver='3.3.0'><hdr ver='3.3.0'><client><id>xxx</id><pwd>xxx</pwd></client></hdr><aaaa ver='3.3.0'><trans_id>1</trans_id><request_type type='2'/><l_hor_acc type='HIGH'/></aaaa></svc_init>";
            byte[] byteArray = Encoding.UTF8.GetBytes (xmlData);
            request.ContentType = "application/x-www-form-urlencoded";
            request.ContentLength = byteArray.Length;
            Stream dataStream = request.GetRequestStream ();
            dataStream.Write (byteArray, 0, byteArray.Length);
            dataStream.Close ();
            WebResponse response = request.GetResponse ();
            dataStream = response.GetResponseStream();                
            StreamReader reader = new StreamReader (dataStream);
            string responseFromServer = reader.ReadToEnd ();
            reader.Close ();
            dataStream.Close ();
            response.Close (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:39:42.087

以下代码（TCP套接字）有效

```
oSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream,
                ProtocolType.Tcp);
System.Net.IPAddress oIPAddress = System.Net.IPAddress.Parse(ip);
System.Net.IPEndPoint oEndPoint = new System.Net.IPEndPoint(oIPAddress, port);
oSocket.Connect(oEndPoint);

Object oData = xmlData;
byte[] bData = System.Text.Encoding.ASCII.GetBytes(oData.ToString());
oSocket.Send(bData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:14:01.930

您需要比较您的代码和 REST 客户端发送的内容之间的在线字节数。REST 客户端可能在一个数据包中发送标头和正文，而 .NET 将请求标头与正文分开发送，这导致服务器抛出，因为它没有预料到这一点。

使用wireshark 来嗅探流量，或者如果这是本地主机，请在firefox 上使用Firebug，并为.net 创建一个system.net 跟踪日志。只需在谷歌上搜索“使用 system.net 进行跟踪”即可获取有关如何执行此操作的信息。

# css - WordPress 的 SASS 还是 LESS？

> ID：12137228
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:36:55.097
> 
> 标签：css, sass, less

我正在研究 SASS 与 LESS，最终我更喜欢 SASS。

但是，我真的无法访问 ruby​​/gems/ 所有这些来让 SASS 处理我服务器上的所有内容。

似乎 LESS 可以与标题中的 2 个后续链接一起放入。它是否正确？

如果是这样，我可能只使用 LESS - 因为预处理总比不使用好。

SASS > LESS > CSS - 如果是这样的话，至少我会比上一步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:57:12.733

您不需要在服务器上为 SASS 运行 Ruby，通常在在线部署之前在本地编译它。

我更喜欢 SASS，主要是因为它是我首先使用的，但它们非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:37:53.737

我使用[Compass.app](http://compass.handlino.com/)来处理笔记本电脑上的所有技术设置位。

1.  我创建一个项目条目；
2.  定义要监视更改的文件夹；
3.  定义我希望输出文件的位置（通常是主题文件夹的根目录）；
4.  享受 style.css 的自动生成

希望这可以帮助。

一切顺利，卡尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T21:08:57.833

也许您可以使用这个（测试版）Wordpress 插件在共享主机（和本地服务器）上编译 LESS。它使用 less.js 的参考版本，而不是它的 PHP 端口。

[穷人的less.js](https://github.com/bornemix/pm-less.js)

# performance - Matlab性能：比较比算术慢

> ID：12137233
> 
> 赞同：11
> 
> 时间：2012-08-27T06:37:09.697
> 
> 标签：performance, matlab, operators, octave, jit

不久前，我提供了[这个问题](https://stackoverflow.com/questions/12016236/count-number-of-values-in-matrix-within-given-range/12017205#12017205)的答案。

目标：计算此矩阵中`[3 6]`范围内的值的数量：

```
A = [2 3 4 5 6 7;
     7 6 5 4 3 2] 
```

我想出了 12 种不同的方法来做到这一点：

```
count = numel(A( A(:)>3 & A(:)<6 ))      %# (1)
count = length(A( A(:)>3 & A(:)<6 ))     %# (2)
count = nnz( A(:)>3 & A(:)<6 )           %# (3)
count = sum( A(:)>3 & A(:)<6 )           %# (4)

Ac = A(:);
count = numel(A( Ac>3 & Ac<6 ))          %# (5,6,7,8)
%# prevents double expansion
%# similar for length(), nnz(), sum(),
%# in the same order as (1)-(4)

count = numel(A( abs(A-(6+3)/2)<3/2 ))   %# (9,10,11,12)
%# prevents double comparison and & 
%# similar for length(), nnz(), sum()
%# in the same order as (1)-(4) 
```

所以，我决定找出哪个最快。测试代码：

```
A = randi(10, 50);
tic
for ii = 1:1e5

    %# method is inserted here

end
toc 
```

结果（最好的 5 次运行，均以秒为单位）：

```
%# ( 1): 2.981446
%# ( 2): 3.006602
%# ( 3): 3.077083
%# ( 4): 2.619057
%# ( 5): 3.011029
%# ( 6): 2.868021
%# ( 7): 3.149641
%# ( 8): 2.457988
%# ( 9): 1.675575
%# (10): 1.675384
%# (11): 2.442607
%# (12): 1.222510 
```

所以这似乎`count = sum(( abs(A(:)-(6+3)/2) < (3/2) ));`是去这里最快的方式......

我`<`用两个部门交易一个，一个加法和一个`abs`，执行时间**不到一半**！有没有人解释为什么会这样？

JIT 编译器可能会用内存中的单个值替换除法/加法，但仍然存在`abs`...Branch 错误预测？像这样简单的事情似乎很愚蠢......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T07:57:55.807

`A(:)>3 & A(:)<6`表达式需要评估两个条件，而表达式只`abs(A(:)-(6+3)/2) < 3/2)`评估一个。

对于非常紧凑的计算密集型循环，这会产生很大的不同。即使没有分支错误预测，分支本身的成本也相对较高。这就是为什么，例如，[*循环展开*](http://en.wikipedia.org/wiki/Loop_unwinding)作为一种优化技术。

# xslt - 将 xml 中的节点与 xslt 进行比较

> ID：12137238
> 
> 赞同：1
> 
> 时间：2012-08-27T06:37:35.957
> 
> 标签：xslt, muenchian-grouping

我在 xslt 的帮助下将 xml 数据转换为 html 页面。我想通过以下方式消除出现这样的重复数据。

## xml数据

```
<calendar>
<event>
<date>May 11</date>
<description>Mother's Day</description>
</event>
<event>
<date>May 12</date>
<description>Birthday</description>
</event>
<event>
<date>May 12</date>
<description>Board Meeting</description>
</event>
</calendar> 
```

## 我的 xslt 代码

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>Event Dates </h2>
  <table border="1">
  <tr bgcolor="#9acd32">
  <th>date</th>
  <th>description</th>
  </tr>
  <xsl:for-each select="calendar/event">
  <tr>
  <td><xsl:value-of select="date"/></td>
  <td><xsl:value-of select="description"/></td>
  </tr>
  </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

## 我的输出

```
date    description
May 11   Mother's Day
May 12   Birthday
May 12   Board Meeting 
```

## 期望的输出。

```
date  description
May 11
  Mother's Day

May 12
  Birthday
  Board Meeting 
```

请建议我修改 XSLT 代码。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:23:51.740

**这个短暂的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:key name="kDateByVal" match="date" use="."/>

 <xsl:template match="/">
  <xsl:text>date  description</xsl:text>
  <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match=
  "date[generate-id()=generate-id(key('kDateByVal',.)[1])]">
     <xsl:value-of select="concat('&#xA;',.)"/>
     <xsl:for-each select="key('kDateByVal',.)">
      <xsl:value-of select="concat('&#xA;','  ', ../description)"/>
     </xsl:for-each>
     <xsl:text>&#xA;</xsl:text>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**使用经典的[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)来转换提供的 XML 文档：**

```
<calendar>
    <event>
        <date>May 11</date>
        <description>Mother's Day</description>
    </event>
    <event>
        <date>May 12</date>
        <description>Birthday</description>
    </event>
    <event>
        <date>May 12</date>
        <description>Board Meeting</description>
    </event>
</calendar> 
```

**进入想要的正确结果**：

```
date  description
May 11
  Mother's Day

May 12
  Birthday
  Board Meeting 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:51:10.330

我找到[了这个](https://stackoverflow.com/questions/399204/xslt-distinct-elements-and-grouping)解决方案并应用于您的问题。
Jenni Tennison 写了一篇关于该方法的[漂亮而简短的解释](http://www.jenitennison.com/xslt/grouping/muenchian.html)。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
<xsl:output method="text" indent="yes"/>
<xsl:key name="distinct-date" match="/calendar/event/date" use="./text()"/>
<xsl:template match="calendar">
    <xsl:text>date  description
</xsl:text>
    <xsl:for-each select="event/date[generate-id(.) = generate-id(key('distinct-date',.)[1])]">
        <xsl:value-of select="./text()"/>
        <xsl:text>
</xsl:text>
        <xsl:apply-templates select="//event[date/text() = current()/text()]"/>
        <xsl:text>
</xsl:text>
        </xsl:for-each>
    </xsl:template>  

    <xsl:template match="event">
        <xsl:text>    </xsl:text><xsl:value-of select="description/text()"/>
        <xsl:text>
</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:07:56.633

解决您的问题的唯一方法是所谓的“Muenchian Grouping”。请参阅 [Muenchian Grouping - group in a node，而不是在整个文档](https://stackoverflow.com/questions/1753485/muenchian-grouping-group-within-a-node-not-within-the-entire-document)中，这与您的问题几乎相同，只有名称而不是日期。

# wso2esb - wso2 esb xslt 转换

> ID：12137253
> 
> 赞同：0
> 
> 时间：2012-08-27T06:38:17.433
> 
> 标签：wso2esb

我想使用 xslt 中介器在 wso2 esb 中进行 xslt 转换我写了一个 xslt 并在浏览器中尝试它工作正常但我无法在 wso2 esb 的 xslt 中介器中调用我的 xslt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:44:21.027

**答：**我总是使用**本地条目**来引用我的 XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<localEntry xmlns="http://ws.apache.org/ns/synapse" key="myXSLTlocalEntry" src="file:repository/resources/my.xslt"/> 
```

**B:** XSLT 文件位于以下路径**%WSO2_HOME%/repository/resources**

**C：**然后我使用以下命令在序列内调用 XSLT 中介：

```
<xslt key="myXSLTlocalEntry"/> 
```

有关 XSLT 中介者的更多文档可以[在 WSO2 ESB 文档站点上](https://docs.wso2.com/display/EI611/XSLT+Mediator)找到： **D：** XSLT 当然还必须映射 Soap 信封和主体（也传递给 XSLT）。然后 body 元素包含您的有效数据：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ds="ws.wso2.org/dataservice">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="/">
        <xsl:apply-templates select="*"/>
    </xsl:template>

    <xsl:template match="soapenv:Envelope|soapenv:Body">
        <xsl:copy>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="ds:Entries">
        <!-- DO YOUR TRANFORMATION HERE -->
        <xsl:apply-templates select="*"/>
    </xsl:template>

    <xsl:template match="*|text()|@*">
        <xsl:copy>
            <xsl:apply-templates select="*|text()|@*"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:53:56.940

WSO2 ESB 使用 AXIS2 作为其底层 SOAP 引擎。在这里，您试图消除肥皂标签，这些标签将出现在 axis2 范围内的消息生命周期中。如果您只需要获取消息正文，请尝试编写自定义类中介来访问突触消息上下文并使用以下代码片段，这将返回soapbody 的子元素。

```
 messageContext.getEnvelope().getBody().getFirstChildWithName(**) 
```

# .net - 嵌套任务和单独任务之间的区别

> ID：12137256
> 
> 赞同：1
> 
> 时间：2012-08-27T06:38:33.490
> 
> 标签：.net, .net-4.0, task-parallel-library

我试图理解 TPL 中嵌套任务的概念。在什么情况下创建嵌套任务而不是创建两个单独的任务更好，因为在嵌套任务的情况下，它完全独立于父任务。

使用父任务的本地队列是否有任何性能提升？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:57:08.493

这是有关此的 msdn[文档](http://msdn.microsoft.com/en-us/library/dd997417.aspx)。

首先，“嵌套任务”只是意味着您在另一个任务中开始一个新任务，如下所示：

```
var outerTask = Task.Factory.StartNew( () => 
{
    var nestedTask = Task.Factory.StartNew( () => 
    {
         Console.WriteLine("Inside nestedTask");
    });
}); 
```

您可能的意思是“嵌套任务”和“子任务”之间的区别是什么

“子任务”如下所示：

```
var parentTask = Task.Factory.StartNew( () => 
{
    var childTask = Task.Factory.StartNew( () => 
    {
         Console.WriteLine("Inside childTask");
    },               TaskCreationOptions.AttachedToParent );
}); 
```

子任务将强制与父任务进行某些同步。

因为子任务总是比独立的嵌套任务有更高的同步开销，这让你想知道为什么你可能想要使用它们。

有时您希望确保这些任务的同步。您希望 childTask 在父任务完成之前计算一些东西。其他时候，它可能只会使调试更容易，因为您将不得不处理更少的不确定性。

减少不确定性，可以帮助您更快地编写和测试代码。

尽管我不确定它是否以这种方式实现，但有可能将子任务注入与父级相同的线程/核心上，尤其是当父级只是在等待子任务时。在这种情况下，您可能能够从子任务中的父任务中获得缓存的额外好处。

（这似乎是一个好主意，但我认为它还没有以这种方式实现，如果我错了，请纠正我）。

# android - 如何在阵列适配器中长按时设置按钮的可见性

> ID：12137271
> 
> 赞同：2
> 
> 时间：2012-08-27T06:39:58.557
> 
> 标签：android, android-arrayadapter, long-press

我已将一个按钮设置为在布局中不可见，现在我需要将其设置为在长按列表项时可见..

我创建了一个扩展数组适配器的类，并且我在这个类中声明了按钮。现在我需要在代码中访问这个按钮，以便长按列表项以将其设置为可见。我如何访问这个按钮在`setOnItemLongClickListener`..

在 arrayadapter 中声明按钮时，应用程序强制关闭。

这是我的代码..

```
lv.setOnItemLongClickListener(new OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)         {
 //arg1.findViewById(R.id.btndelete).setVisibility(View.VISIBLE);

    Toast.makeText(getApplicationContext(), "long press", Toast.LENGTH_LONG).show();
    return false;
    }
});

 class myAdapter extends ArrayAdapter<String>
    {
           Button btndlt;
           View row;
           public myAdapter(Context context,ArrayList<String> objects)
           {
                super(context, android.R.layout.simple_list_item_1, objects);          
           }

            public View getView(final int position, View convertView, ViewGroup parent)
            {
                LayoutInflater inflater=getLayoutInflater();
                row = inflater.inflate(R.layout.list_item, parent, false);

                btndlt = (Button) row.findViewById(R.id.btndelete);
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:55:00.147

如果您在 ListItem 行中有一个按钮，那么您可以使用`setTag()`and`getTag()`获取 Button in 的实例`onItemLongClick()`，

普塞多代码，

里面`getView()`，

```
convertView.setTag(R.id.button, button); 
```

里面`onItemLongClick()`

```
Button button = (Button)view.getTag(R.id.button); 
```

此外，如果您想检测 ListItem 上的滑动，您可以查看我的演示示例[`here`](https://github.com/lalit3686/ListItemSwipe)，该示例在 ListItem 从右向左滑动时启用删除按钮。

# windows-phone-7 - 类似于 WP7 上的开始菜单磁贴过渡的过渡效果

> ID：12137272
> 
> 赞同：1
> 
> 时间：2012-08-27T06:40:00.323
> 
> 标签：windows-phone-7, tiles, windows-phone, transitions

我想重新创建当用户单击开始菜单上的磁贴时可以观察到的过渡效果。但我在我的追求中遇到了障碍。我无法搜索与该特定过渡相关的信息。是否可以在您自己的应用程序中这样做？如果是这样，请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:46:25.453

我称之为“剥离动画”并在这里实现了它：

[http://www.scottlogic.co.uk/blog/colin/2011/03/metro-in-motion-part-2-peel-animations/](http://www.scottlogic.co.uk/blog/colin/2011/03/metro-in-motion-part-2-peel-animations/)

其他人称其为“旋转门”并且也实现了它：

[http://turnstile.codeplex.com/](http://turnstile.codeplex.com/)

# curl - 从 Sinatra 中的管道 cURL 读取 PUT 数据

> ID：12137274
> 
> 赞同：3
> 
> 时间：2012-08-27T06:40:08.837
> 
> 标签：curl, request, sinatra, pipe, put

我正在 Sinatra 中重写一个小型服务器后端，目前客户端通过 cURL 调用（例如`echo "foo" | curl -X PUT -T - http://localhost:8090/`. 问题是，在我`put`在 Sinatra 中的方法中`request.body.read`，即使在我调用它之后，它也始终是空`rewind`的。此外，`params`哈希是完全空的。

奇怪的是，如果我这样做`curl -X PUT -d 'foo' http://localhost:8090/`，它会起作用。`request.on('data')`此外，在 node.js 中，我可以使用and`request.on('end')`函数很好地阅读它。

有没有办法`PUT`在 Sinatra 中读取身体？如果可能的话，我想避免更改客户端代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T08:10:16.920

我认为来自客户端的 curl 命令滥用了`-T`标志。 `-T`用于上传文件，而不是发送数据。通常，当您不提供目标文件名时，`-T`将使用本地文件名进行上传。例如，`curl -X PUT -T "bar.txt" http://localhost:8090/`将本地文件上传`bar.txt`到远程位置`http://localhost:8090/bar.txt`。由于您的客户端代码管道标准输入而不是指定文件，因此不存在本地文件名。而且由于您的客户端代码没有指定任何目标文件名，它将产生未定义的结果。我认为 node.js 接受文件上传的内容作为请求正文中的数据是非标准行为。

您使用标志的第二个示例`-d`是发送数据的正确方法。我真的认为最好的解决方案是更改客户端代码，但如果您愿意，您仍然可以通过管道传输标准输入。只需使用`-d`而不是`-T`，如下所示：

```
echo "foo" | curl -X PUT -d @- http://localhost:8090/ 
```

# python - 如何使 python numpy 日期时间范围

> ID：12137277
> 
> 赞同：39
> 
> 时间：2012-08-27T06:40:17.857
> 
> 标签：python, datetime, numpy, timedelta

我有一些输入数据，输入文件中的时间戳从文件名中指定的日期时间开始以小时为单位。

这有点没用，所以我需要将其转换为 python datetime.datetime 对象，然后将其放入一个 numpy 数组中。我可以写一个 for 循环，但我想做类似的事情：

```
numpy.arange(datetime.datetime(2000, 1,1), datetime.datetime(2000, 1,2), datetime.timedelta(hours=1)) 
```

引发类型错误。

这可以做到吗？我坚持使用 python 2.6 和 numpy 1.6.1。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-12-17T01:58:54.537

```
from datetime import datetime, timedelta

t = np.arange(datetime(1985,7,1), datetime(2015,7,1), timedelta(days=1)).astype(datetime) 
```

这里的重点是使用`astype(datetime)`，否则结果将是`datetime64`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-27T06:44:41.367

请参阅[NumPy 日期时间和时间增量](http://docs.scipy.org/doc/numpy/reference/arrays.datetime.html)。基本上，您可以使用类型在 NumPy 中表示日期时间`numpy.datetime64`，这允许您执行值范围。

对于 NumPy 1.6，它的类型用处不大`datetime64`，您可以使用合适的列表推导来构建日期时间（另请参阅[在 Python 中创建日期范围](https://stackoverflow.com/questions/993358/creating-a-range-of-dates-in-python)）：

```
base = datetime.datetime(2000, 1, 1)
arr = numpy.array([base + datetime.timedelta(hours=i) for i in xrange(24)]) 
```

这产生

```
array([2000-01-01 00:00:00, 2000-01-01 01:00:00, 2000-01-01 02:00:00,
   2000-01-01 03:00:00, 2000-01-01 04:00:00, 2000-01-01 05:00:00,
   2000-01-01 06:00:00, 2000-01-01 07:00:00, 2000-01-01 08:00:00,
   2000-01-01 09:00:00, 2000-01-01 10:00:00, 2000-01-01 11:00:00,
   2000-01-01 12:00:00, 2000-01-01 13:00:00, 2000-01-01 14:00:00,
   2000-01-01 15:00:00, 2000-01-01 16:00:00, 2000-01-01 17:00:00,
   2000-01-01 18:00:00, 2000-01-01 19:00:00, 2000-01-01 20:00:00,
   2000-01-01 21:00:00, 2000-01-01 22:00:00, 2000-01-01 23:00:00], dtype=object) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-03-01T07:41:58.413

使用现代 NumPy，您可以这样做：

```
np.arange(np.datetime64('2017-01-01'), np.datetime64('2017-01-08')) 
```

它给你：

```
array(['2017-01-01', '2017-01-02', '2017-01-03', '2017-01-04',
       '2017-01-05', '2017-01-06', '2017-01-07'], dtype='datetime64[D]') 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-06-27T16:05:44.710

如另一个答案中所述，对于 Numpy > 1.7，您可以使用 Numpy 的内置日期时间功能。Numpy 文档中的示例不包括使用`np.arange`with 步骤，所以这里有一个：

`timearray = np.arange('2000-01-01', '2000-01-02',np.timedelta64(1,'h'), dtype='datetime64')`

Numpy 将此结果的 dtype 设置为`datetime64[h]`. 您可以使用 将其显式设置为更小的时间单位`dtype='datetime64[m]'`。

在版本 1.8.1（我预计更早）中，尝试向该结果数组添加小于一小时的偏移量将无效。

*   `timearray += np.timedelta64(10,'s')`不变`timearray`
*   `timearray2 = timearray + np.timedelta64(10,'s')`将增加 10 秒`timearray`并将 dtype 转换`timearray2`为`datetime64[s]`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-08-27T08:39:09.157

请注意，@nneonneo 解决方案可以简化为

```
result = first_date + np.arange(24) * datetime.timedelta(hours=1) 
```

感谢 NumPy 数组操作。然后`result`数组有一个`dtype=object`.

对于更复杂的范围，您可能对[`scikits.timeseries`](http://pytseries.sourceforge.net/)包（不再维护）或更好的包感兴趣，该 [`pandas`](http://pandas.pydata.org/)包重新实现了`scikits.timeseries`. 这两个软件包都支持旧版本的 NumPy（1.5、1.6...）

# ruby-on-rails-3 - 可以存储到数据库的 Rails 3.2 的图像文件上传器插件

> ID：12137278
> 
> 赞同：1
> 
> 时间：2012-08-27T06:40:18.483
> 
> 标签：ruby-on-rails-3, file-upload, gem, paperclip, carrierwave

我正在寻找可以将图像文件存储到数据库的 Rails 插件。

我刚刚尝试过“回形针”和“载波”。

他们是很好的插件。

但它们通常可以存储到本地文件系统或 Amazon S3，雾。

我想将图像文件存储到数据库。

请告诉我哪个宝石可以完成它。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:47:59.283

这是一个如何将图像存储在二进制字段 ( `raw_file`)中的示例

形式：

```
<%= form_for @user do |f| %>
  <%= f.file_field :avatar %>
<% end %> 
```

控制器：

```
def create
  @user = User.new(params[:user])
  # store uploaded avatar as blob
  @user.raw_file = params[:user][:avatar].read
  @user.save
end 
```

使用[RMagick](http://studio.imagemagick.org/RMagick/doc/image1.html#from_blob)或[mini_magick](http://rubydoc.info/gems/mini_magick/MiniMagick/Image#read-class_method)从 blob 转换图像。

# wpf - 选择数据网格行时WPF默认按钮不起作用

> ID：12137279
> 
> 赞同：1
> 
> 时间：2012-08-27T06:40:21.053
> 
> 标签：wpf, c#-4.0, datagrid, defaultbutton

我在 . 中使用了一个`Datagrid`和一个按钮（`btnAdd`）`WPF`。按钮是默认的。我需要在按下键时调用`btnAdd_Click`（它使用 的选定行`Datagrid`）`Enter`。

换句话说，我需要选择一行并按下`Enter`并完成由`btnAdd_Click`.

```
<Button  Name="btnAdd"  Click="btnAdd_Click" IsDefault="True" TabIndex="4" >Add to List</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:05:24.147

您可以获得 PreviewKeyDown 并标记 e.Handeled = true

dg = 数据网格

```
 protected override void OnInitialized(EventArgs e)
    {
        dg.PreviewKeyDown += new KeyEventHandler(dg_PreviewKeyDown);
        base.OnInitialized(e);
    }

    void dg_PreviewKeyDown(object sender, KeyEventArgs e)
    {

        if (Key.Enter == e.Key)
        {
            btnAdd_Click();
            e.Handled = true;
        }
    } 
```

# matlab - Matlab：Kmeans每次给出不同的结果

> ID：12137282
> 
> 赞同：8
> 
> 时间：2012-08-27T06:40:45.500
> 
> 标签：matlab, k-means, feature-selection

我在 400x1000 矩阵上的 matlab 中运行 kmeans，由于某种原因，每当我运行算法时，我都会得到不同的结果。下面是一个代码示例：

```
[idx, ~, ~, ~] = kmeans(factor_matrix, 10, 'dist','sqeuclidean','replicates',20); 
```

出于某种原因，每次运行此代码时都会得到不同的结果？有任何想法吗？

我正在使用它来识别多重共线性问题。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-27T06:57:44.780

MATLAB 中的 k-means 实现有一个随机组件：初始中心的选择。这会导致不同的结果。然而，实际上，MATLAB 多次运行 k-means 并返回具有最低失真的聚类。如果您每次都看到完全不同的聚类，这可能意味着您的数据不适合 k-means 寻找的那种聚类（球形），并且表明尝试其他聚类算法（例如光谱算法）。

您可以通过将一组初始中心作为函数参数之一（[`start`参数](http://www.mathworks.com/help/toolbox/stats/kmeans.html)）传递给它来获得确定性行为。这将为您每次提供相同的输出聚类。有几种启发式方法可以选择初始中心集（例如[K-means++](http://en.wikipedia.org/wiki/K-means%2B%2B)）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T06:47:55.943

正如您[在 wiki](http://en.wikipedia.org/wiki/K-means_clustering)上看到的那样，k-means 算法通常是启发式的和部分概率的，Matlab 中的算法也不例外。

这意味着该算法存在一定的随机部分（在[Matlab 的情况下](http://www.mathworks.nl/help/toolbox/stats/kmeans.html)，重复使用随机起点来寻找全局解）。这使得`kmeans`输出集群具有平均质量。但是：考虑到算法的伪随机性，每次你都会得到*稍微不同的集群——这是正常的行为。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-14T21:33:36.753

这称为初始化问题，因为 kmeans 从随机初始点开始对数据进行聚类。matlab 选择 k 个随机点并计算数据中的点到这些位置的距离，并找到新的质心以进一步最小化距离。因此对于质心位置，您可能会得到不同的结果，但答案是相似的。

# c++ - C++ 11 future_status::deferred 不工作

> ID：12137283
> 
> 赞同：8
> 
> 时间：2012-08-27T06:40:46.110
> 
> 标签：c++, multithreading, stl, c++11, future

```
#include <iostream>
#include <future>
#include <chrono>

using namespace std;
using namespace std::chrono;

int sampleFunction(int a)
{
    return a;
}

int main()
{
   future<int> f1=async(launch::deferred,sampleFunction,10);
   future_status statusF1=f1.wait_for(seconds(10));
   if(statusF1==future_status::ready)
        cout<<"Future is ready"<<endl;
   else if (statusF1==future_status::timeout)
        cout<<"Timeout occurred"<<endl;
   else if (statusF1==future_status::deferred)
        cout<<"Task is deferred"<<endl;
   cout<<"Value : "<<f1.get()<<endl;
}

Output -
Timeout occurred
Value : 10 
```

在上面的例子中，我期待`future_status`的是`deferred`而不是`timeout`. `sampleFunction`已作为`launch::deferred`. `f1.get()`因此，在被调用之前它不会被执行。在这种情况下`wait_for`应该返回`future_status::deferred`而不是`future_status::timeout`。

感谢有人可以帮助我理解这一点。我在 Fedora 17 上使用 g++ 4.7.0 版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:09:10.523

GCC 和 GNU STL 不支持完整的 C++ 11。

在这里您可以查看 GCC 和 GNU STL 中的 C++ 11 实现状态：

[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

[http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html)

另外，请阅读此讨论主题：http: [//blog.gmane.org/gmane.comp.gcc.bugs/month=20120201](http://blog.gmane.org/gmane.comp.gcc.bugs/month=20120201)

# ruby-on-rails - Ruby on Rails 中的文本文件、PDF 文件和 Doc/Docx 文件中的关键字文本索引

> ID：12137284
> 
> 赞同：1
> 
> 时间：2012-08-27T06:40:55.327
> 
> 标签：ruby-on-rails, indexing

我需要通过“Ruby on Rails”等关键字搜索和索引txt、pdf 和doc/docx 格式的简历。我需要帮助来选择和使用合适的宝石。我已经开始使用 sunspot 1.3.* 但我只能对模型进行索引。我找不到任何关于如何使用 sunspot_rails 从 txt、pdf 或 doc 文件中索引关键字的信息。有人知道如何配置太阳黑子以通过附加文件进行索引吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:44:28.497

Try,Solr 索引富文本文档

[http://wiki.apache.org/solr/UpdateRichDocuments](http://wiki.apache.org/solr/UpdateRichDocuments)

[http://solr.pl/en/2011/04/04/indexing-files-like-doc-pdf-solr-and-tika-integration/](http://solr.pl/en/2011/04/04/indexing-files-like-doc-pdf-solr-and-tika-integration/) _

# google-docs - 谷歌文档设置默认“共享”权限

> ID：12137287
> 
> 赞同：0
> 
> 时间：2012-08-27T06:41:05.470
> 
> 标签：google-docs

无论如何我可以为我通过我的帐户添加的所有谷歌文档设置默认共享权限吗？.

我希望所有访问链接的人都可以看到我添加的所有文档，而无需更改每个文档的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:49:49.783

您可以将所有这些文档添加到文件夹，并管理该文件夹的权限。随时更改父文件夹的权限会反映其中的所有项目。因此，当您向该文件夹添加新文档/项目时，您无需担心共享设置。我希望这会有所帮助

# c# - 如何创建一个接口方法，当未实现时在 VB.Net 中显示异常代码，就像在 C# 中一样

> ID：12137288
> 
> 赞同：3
> 
> 时间：2012-08-27T06:41:19.763
> 
> 标签：c#, vb.net

我在 C# 中看到接口在类中实现时，会给出带有`NotImplementedException`块的方法。

这边走

```
public interface IDisposable
{
    void Dispose();
} 
```

并且在实施它时

```
public class Class1 : IDisposable
{
    public void Dispose()
    {
        throw new NotImplementedException();
    }
} 
```

现在我的问题

1.  这只是 C# 内置工具，在 VB.Net 中不可用吗？
2.  如果否，我如何在 VB.Net 中拥有此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T06:51:37.130

[您可以使用像JustCode](http://www.telerik.com/products/justcode.aspx)这样的 Visual Studio 插件，它为 VB.Net 提供了这样的功能：

```
Interface Foo
    Sub Bar()
End Interface

Class FooBar
    Implements Foo

    Public Sub Bar() Implements Foo.Bar     -+
        ' TODO: Implement this method        +-- these lines are autogenerated
        Throw New NotImplementedException()  |
    End Sub                                 -+

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:44:46.137

对此没有任何 C# 特定的内容。VB.NET 支持[接口](http://msdn.microsoft.com/en-us/library/28e2e18x.aspx)和[`Throw`异常。](http://msdn.microsoft.com/en-us/library/ty79csek)

```
Class Class1
    Implements IDisposable

    Public Sub Dispose() Implements IDisposable.Dispose
        Throw New NotImplementedException()
    End Sub 
End Class 
```

免责声明：我不是 VB.NET 编码员。

# c++ - 在 shmget 中用作键的安全值

> ID：12137291
> 
> 赞同：6
> 
> 时间：2012-08-27T06:41:26.067
> 
> 标签：c++, linux, key, shared-memory

我正在使用 shmget 在 Linux 上的项目进程之间共享数据。

```
int shmget(key_t key, size_t size, int shmflg); 
```

但是，任何其他程序也可以调用 shmget，因此可能会导致密钥冲突（因为我使用常量作为调用 shmget 的密钥，所以我必须使用常量而不是生成的密钥，因为横向进程是构建并运行的分别地）。

在 shmget 中用作键的安全值应该是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T07:03:13.850

没有安全值，您（以及创建共享段的所有其他进程）应该使用`IPC_EXCL`以确保没有冲突。但是，后者应确保其他程序不会开始写入您的段（除非它们写得不好）。

[您可以尝试在ftok()](http://linux.die.net/man/3/ftok)之外构建您的“私有”密钥常量，但是您知道它不安全。如果您与某物发生碰撞，您将无法告诉您的程序这不是正确的键。还要记住：

> 只有低 8 位`id`是有效的。如果这些位为 0，则未指定 ftok() 的行为。

换句话说，不要通过`0`那里;)。

无论如何，您应该*认真*考虑创建一些沟通渠道。服务器用 id 写入的单个文件就足够了，然后其他程序将读取该文件。

从其他想法来看，您可以尝试将服务器 PID 传递为`id`，如果其他进程至少可以得到它。这可以使它更“安全”一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T08:58:49.893

我建议您改用 POSIX [`shm_open`](http://pubs.opengroup.org/onlinepubs/009604499/functions/shm_open.html)(with )，只要您不使用与其他软件相同的命名区域`mmap`，它就不存在存在冲突的问题。`ftok`

# javascript - 用于在硬盘中创建文本文件的 html 或 java 脚本代码

> ID：12137296
> 
> 赞同：0
> 
> 时间：2012-08-27T06:42:05.170
> 
> 标签：javascript, html, file, hard-drive, createfile

**请有人给我一个在硬盘驱动器中创建文本文件的代码**

结果应该是一个 html 文件，当双击 html 文件时，它需要在硬盘驱动器（本地）的给定路径中创建一个文本文件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:55:38.110

出于安全原因，浏览器中常规 HTML 页面中的 Javascript 不允许直接访问您在硬盘上选择的路径。

在较新的浏览器中，有些实验性的[FileSystem API](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API)为沙盒文件系统提供了一些功能，但您必须查看这些 API 是否能满足您的需求。

除此之外，您需要通过某种方式绕过安全限制，例如从查看器已授权和安装的浏览器插件中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:04:43.800

有些事情告诉我，您没有足够的经验知道网页**无法**在用户空间中您想要的位置创建文件。

无论如何，有**一种**方法，但您只能在*沙箱*中创建文件，即浏览器分配的保留和保护空间。

这只能在 Chrome 等最新的浏览器中实现……目前还没有别的。

首先，您必须要求一些配额：

```
storageInfo.requestQuota(PERSISTENT, bytes, function(quota) {
   requestFileSystem(PERSISTENT, quota, gotQuota, errorHandler);
}, function(e) {
   alert("Couldn't request quota:" + e);
}); 
```

您必须定义两个回调函数：一个用于成功 ( `gotQuota`)，一个用于失败 ( `errorHandler`)。

```
function gotQuota(fs) {
    // Creates a file
    fs.root.getFile('file.txt', {create: true}, function(fileEntry) {
       fileEntry.createWriter(function(fw) {
           fileWriter.onwriteend = function(e) {
               console.log("Write successful.");
           };
           fileWriter.onerror = function(e) {
               console.log("Write failed: " + e);
           };
           fw.write(new Blob(["This is the content"], {type: "text/plain"});
       });
    }, errorHandler);
} 
```

伙计，这很复杂......请记住，其中一些功能是供应商前缀的（例如`webkitStorageInfo`）。

[参考](http://www.html5rocks.com/en/tutorials/file/filesystem/)。

# jqgrid - jqGrid 日期格式生成错误的 AM/PM

> ID：12137297
> 
> 赞同：1
> 
> 时间：2012-08-27T06:42:06.983
> 
> 标签：jqgrid, jqgrid-formatter

我在 jqgrid 中有列建模如下：

```
colModel: [
          ...
          { name: 'TranDate', index: 'TranDate', search: false, width: 150, 
            sorttype: 'date', formatter: 'date', 
            formatoptions: { srcformat: 'Y-m-d H:i:s A', newformat: 'd-M-Y h.i A'} },
         ...
         ], 
```

从 JSON 返回的数据具有以下格式`2012-07-06 3:25:19 PM`，但是当使用上述格式显示在网格上时，它会切换`PM`到之间的`AM`时间除外。`12:01``12-59`

这个问题类似于[jqGrid 中的 AM/PM 日期格式，](https://stackoverflow.com/questions/9203678/am-pm-date-formatting-in-jqgrid?rq=1)但即使进行了修改，问题仍然存在。

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:41:01.797

之所以这样做，是因为它假设您的时间为 24 小时制。您的代码应该修复它，但我找不到它有什么问题。

但是，这里将为您解决

只是替换这个

```
formatter: 'date', formatoptions: { srcformat: 'Y-m-d H:i:s A', newformat: 'd-M-Y h.i A'} }, 
```

有了这个

```
datefmt: "Y-m-d h:i A" 
```

在这里，您将无法将“Ymd”更改为“dMY”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:40:34.760

问题是[`DateFormat`](https://github.com/tonytomov/jqGrid/blob/master/js/jquery.fmatter.js#L124)jquery.fmatter.js 中的函数不支持 AM/PM `srcformat`：

```
 // Tony Tomov
    // PHP implementation. Sorry not all options are supported.
    // Feel free to add them if you want
    DateFormat : function (format, date, newformat, opts)  { 
```

具体来说，您可以在下面看到`A`解析给定日期时不支持该选项：

```
 } else {
            date = String(date).split(/[\\\/:_;.,\t\T\s-]/);
            format = format.split(/[\\\/:_;.,\t\T\s-]/);
            // parsing for month names
            for(k=0,hl=format.length;k<hl;k++){
                if(format[k] == 'M') {
                    dM = $.inArray(date[k],dateFormat.i18n.monthNames);
                    if(dM !== -1 && dM < 12){date[k] = dM+1;}
                }
                if(format[k] == 'F') {
                    dM = $.inArray(date[k],dateFormat.i18n.monthNames);
                    if(dM !== -1 && dM > 11){date[k] = dM+1-12;}
                }
                if(date[k]) {
                    ts[format[k].toLowerCase()] = parseInt(date[k],10);
                }
            }
            if(ts.f) {ts.m = ts.f;}
            if( ts.m === 0 && ts.y === 0 && ts.d === 0) {
                return "&#160;" ;
            }
            ts.m = parseInt(ts.m,10)-1;
            var ty = ts.y;
            if (ty >= 70 && ty <= 99) {ts.y = 1900+ts.y;}
            else if (ty >=0 && ty <=69) {ts.y= 2000+ts.y;}
            timestamp = new Date(ts.y, ts.m, ts.d, ts.h, ts.i, ts.s, ts.u);
        } 
```

你有几个选择。如果您可以修改 Web 服务，则可以让它以不同的格式（例如 unix 时间戳）返回日期，或者让它以受支持的格式返回新的日期列。或者，您可以将此报告为 jqGrid 错误和/或修复这部分代码以支持 AM/PM 说明符。

# jsp - Struts2 和 jsp 表单使用 jquery ajax post 提交并获得类似 toast 的消息，它来了又消失了？

> ID：12137300
> 
> 赞同：4
> 
> 时间：2012-08-27T06:42:23.670
> 
> 标签：jsp, jquery, struts2, toast

我正在使用 struts2 进行 Web 应用程序开发。在我想使用的注册表单中`query ajax`，以便**异步**提交表单，并且在成功提交表单时**，我可以获得以 toast**或出现和消失的元素形式的服务器端成功消息。

好吧，为此我已经尝试了很多，并且在某个地方实现了这件事，但没有使用`jquery ajax`，而是正常`javascript and ajax`。

代码流程如下：

*   `Home.jsp`包含表单的页面。

    ```
     <s:form theme="simple" action="registrationForDemo"> <table>
                <tbody>
                    <tr>
                        <td><s:label value="username" /></td>
                        <td><s:textfield name="uName"
                                cssClass="textfield" /></td>
                    </tr>
                    <tr>
                        <td><s:label value="password" /></td>
                        <td><s:password name="password"
                                cssClass="textfield" /></td>
                    </tr>
                    <tr>
                        <td><s:label value="email" /></td>
                        <td><s:textfield name="email"
                                cssClass="textfield" /></td>
                    </tr>
                    <tr>
                        <td><s:label value="contact no." /></td>
                        <td><s:textfield name="contactNo"
                                cssClass="textfield" /></td>
                    </tr>
                    <tr>
                        <td><s:label value="location" /></td>
                        <td><s:textfield name="location"
                                cssClass="textfield" /></td>
                    </tr>
                    <tr>
                        <td><s:label value="category" /></td>
                        <td><s:select list="{'Hospital','Doctor','Clinic','Others'}" name="category"/></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><s:submit
                                value="Submit" cssClass="button" /></td>
                    </tr>
                </tbody>
            </table>
        </s:form> 
    ```

*   定义映射的文件即struts.xml。

![struts.xml 文件](../Images/649677f8416bea58ce1ca5fe5b40a2c5.png)

*   当数据成功保存在数据库中时，输出页面又是同一页面。

现在使用 ajax 和 jquery 我想知道如何实现所需的功能。从哪里传递动作......以及如何走得更远......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:27:36.317

好吧，如果您使用简单的 java-script 和 AJAX 实现了它，我相信它与您将使用 Jquery 做的事情没有什么不同。Jquery 与 java-script 没有什么不同，因为它是一个库构建不使用 java 脚本，以使开发人员生活愉快。

您可以使用 Jquery post 方法提交您的表单，并且可以在成功注册时从服务器发送一个字符串，例如

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

对于更精细的控制，我建议您使用[Struts2-Json](http://struts.apache.org/2.2.3/docs/json-plugin.html)插件和 Jquery Json 功能将数据发送到服务器并从服务器取回结果，例如

```
var formInput='val='+val;
   $.getJSON('myaction',formInput,function(data) {
     $.each(data.myData,function(index, value){
       alert(index);
});
}); 
```

有关更多详细信息，请参阅本教程

*   [ajax-dynamic-content-with-struts2-jquery-and-json-plugin](http://www.zulutown.com/blog/2009/07/12/ajax-dynamic-content-with-struts2-jquery-and-json-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:58:19.480

对我来说，解决方案是`jquery.html()`功能。我通过其他 html 内容来完成工作。[jQuery html](http://api.jquery.com/html/)

Jquery 很棒而且重量也很轻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T06:03:40.763

```
//saving category button
    $("#save").on({click:function () {
        if (!($("#subcategory").val().length == 0)) {
            $.ajax({url:"savecategory", data:$("#savecategoryform").serialize(), type:"post", dataType:"json", success:function (data) {
                alert("Successfully Saved");
            }});
        }
    }});

<form id="savecategoryform">
                        <table id="addtable">
                            <thead id="subcategoryhead">
                                <tr>
                                    <td align="left">
                                        <input type="text" name="strMainCategoryName"
                                            value="Main Category" width="80" id="maincategory"
                                            class="inputmaintext">
                                    </td>
                                    <td colspan="2" align="left">
                                        <img src="../images/plus.png" width="18" height="18"
                                            id="addmaincategory" hovertext="Add" class="link">
                                    </td>
                                </tr>
                            </thead>
                            <tbody id="subcategorybody"></tbody>
                        </table>
                        <input type="button" value="Save" id="save">
                    </form> 
```

# android - 如何将 Android SQLite 数据库存储在 sdcard 中

> ID：12137303
> 
> 赞同：6
> 
> 时间：2012-08-27T06:42:26.963
> 
> 标签：android, database, sqlite, android-sdcard

我刚刚创建了数据库，它默认存储在 data/data/database 文件夹中。现在我想将数据库存储在 sdcard 中，我使用了以下代码。请建议我在哪里添加代码。谢谢

**代码：**

```
 public class DataBaseHandler {
    SQLiteDatabase database;
    private static DataBaseHandler obj;
    private final String TABLE_NAME = "main_db";
    private final String COLUMN_FIRST = "_id";
    MovieDetails md = new MovieDetails();

    private DataBaseHandler(Context context) {
        DataBase dbobj = new DataBase(context, "Id_db.db", null, 1);
        database = dbobj.getWritableDatabase();
    }

    public static DataBaseHandler getinstance(Context context) {
        if (obj == null) {
            obj = new DataBaseHandler(context);
        }
        return obj;
    }

    public void insertData(String id) {
        try {
            ContentValues values = new ContentValues();
            values.put(COLUMN_FIRST, id);
            database.insert(TABLE_NAME, null, values);
        } catch (Exception er) {
            Log.d("Error is===", er.toString());
        }
    }

    public void deleteData(String id) {
        database.delete(TABLE_NAME, BaseColumns._ID + "=" + id, null);
    }

    public Cursor getData() {
        String[] columns = { BaseColumns._ID, COLUMN_FIRST };
        return database
                .query(TABLE_NAME, columns, null, null, null, null, null);
    }

    private class DataBase extends SQLiteOpenHelper {
        public DataBase(Context context, String name, CursorFactory factory,
                int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + TABLE_NAME + "(" + BaseColumns._ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COLUMN_FIRST
                    + " varchar(50)NOT NULL UNIQUE);");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:53:36.277

使用此类复制您的数据库：

```
public class MyDatabaseTools {
  private String appName = "";
  private String packageName = "";

  public boolean backup() {
    boolean rc = false;

    boolean writeable = isSDCardWriteable();
    if (writeable) {
      File file = new File(Environment.getDataDirectory() + "/data/" + packageName + "/databases/" + MySQLiteOpenHelper.getDatabaseName());

      File fileBackupDir = new File(Environment.getExternalStorageDirectory(), appName + "/backup");
      if (!fileBackupDir.exists()) {
        fileBackupDir.mkdirs();
      }

      if (file.exists()) {
        File fileBackup = new File(fileBackupDir, MySQLiteOpenHelper.getDatabaseName());
        try {
          fileBackup.createNewFile();
          FileUtils.copyFile(file, fileBackup);
          rc = true;
        } catch (IOException ioException) {
          //
        } catch (Exception exception) {
          //
        }
      }
    }

    return rc;
  }

  private boolean isSDCardWriteable() {
    boolean rc = false;

    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
      rc = true;
    }

    return rc;
  }

    public MyDatabaseTools(final Context context, final String appName) {
        this.appName = appName;
        packageName = context.getPackageName();
    }
} 
```

如果您不了解如何使用它，请参阅[源代码。](https://stackoverflow.com/a/7380357/1503155)

# java - Java中的返回数组

> ID：12137305
> 
> 赞同：3
> 
> 时间：2012-08-27T06:42:41.847
> 
> 标签：java, android

我的小学班正在运行，我想运行一个单独的班级来打乱号码，然后将打乱的号码返回到我的小学班。在我的 shuffle 类中，我有 return 语句......但现在我该怎么办？如何在我的主类中使用我的 int 数组的随机顺序？

这是我的洗牌课：

```
public class Shuffle {
public static int[] getShuffle() {
    int[] cards = new int[52];
    ArrayList<Integer> cards_objs = new ArrayList<Integer>();

    for (int i = 0; i < cards.length; i++) {
        cards_objs.add(i);
    }

    Collections.shuffle(cards_objs);

    for (int i = 0; i < cards.length; i++) {
        cards[i] = cards_objs.get(i);

    }

    return cards;
} 
```

}

我在做纸牌游戏（如果你看不出来）；

我想使用这个 shuffle 类来洗牌......但是没有卡出现超过一次。

当我归还卡片时，我如何在我的游戏课中使用它们？例如，如果数组中的第一个数字是 1，那么卡片是梅花 A，如果数字是 2，那么卡片是方块 A。等等......我为没有发布足够的信息而道歉......我是java新手（如你所知）

所有帮助将不胜感激，

-史蒂夫

编辑：我发现我的问题是什么，我认为我没有说清楚我的问题是什么。尽管如此，还是感谢大家的帮助，它给了我关于处理这个项目的不同方法的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:57:43.453

我认为使用`enum`你可以`Card`更好地实现 Game 。

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

// This is just sample example  and it is just to show an approach. I had not enough time    to make code perfect but it works fine.
public enum Deck
{
DECK;
enum Rank
{
    DEUCE(2), THREE(3), FOUR(4), FIVE(5), SIX(6),
    SEVEN(7), EIGHT(8), NINE(9), TEN(10), JACK(10), QUEEN(10), KING(10), ACE(11);

    Rank(int rank)
    {
        this.rank = rank;
    }

    private final int rank;

}

enum Type
{
    SPADES,
    HEARTS,
    DIAMONDS,
    CLUBS;
}

class Card
{
    private final Rank rank;
    private final Type type;

    Card(Rank rank, Type type)
    {
        this.rank = rank;
        this.type = type;
    }

    @Override
    public String toString()
    {
        return type.name() + rank.name();
    }

}

static List<Deck.Card> cards = new ArrayList<Deck.Card>();
static
{
    for (Rank rank : Deck.Rank.values())
    {
        for (Type type : Deck.Type.values())
        {
            cards.add(DECK.new Card(rank, type));
        }
    }

}

List<Deck.Card> shuffle()
{
    Collections.shuffle(cards);
    System.out.println(cards);
    System.out.println(cards.size());
    return Collections.unmodifiableList(cards);
}

public static void main(String[] args)
{
    DECK.shuffle();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:48:49.743

我觉得不需要定义单独的类，只需创建一个数字数组列表，将其传递给 Java 的 Colections 类

```
public static void shuffle(List list) 
```

您的列表将直接洗牌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:48:20.157

要么更改数组顺序，以便可以在主类中迭代数组中的正常顺序，要么从包含所需顺序（索引）的 shuffle 方法返回一个数组，然后按此顺序访问这些数组。

选项 A 是更改主数组的元素，选项 B 是读取数组并确定新顺序，并将顺序作为数组返回，然后访问主数组直到新顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T06:48:26.413

您可以简单地在主类中有一个方法，您可以在其中进行洗牌并将新的洗牌数字集作为数组返回。

如果您确实想使用另一个类，那么您可以使用该类的实例来执行此操作，然后调用该 reShuffleNumbers()，而 reShuffleNumbers() 将返回您想要的数字数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T06:51:34.410

试试这个 -

```
public static void shuffleArray(int[] a) {
    int n = a.length;
    Random random = new Random();
    random.nextInt();
    for (int i = 0; i < n; i++) {
      int change = i + random.nextInt(n - i);
      swap(a, i, change);
    }
  }

  private static void swap(int[] a, int i, int change) {
    int helper = a[i];
    a[i] = a[change];
    a[change] = helper;
  } 
```

将数组传递给 shuffleArray() 方法，您将根据位置修改数组元素。

我希望这就是你要找的。

# android - 如何在 Android 中集成 DateFormat？

> ID：12137307
> 
> 赞同：0
> 
> 时间：2012-08-27T06:42:51.597
> 
> 标签：android, date-format

目前我正在使用`DateFormat`转换**Current Date**，然后我得到类似的输出`8/27/12 (month/day/year)`。
但我想这样显示`Today, Yesterday`。
这个怎么做？
请帮我

我试过这个：

```
long dtMili = System.currentTimeMillis();        
Date d = new Date(dtMili);  
java.text.DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(getApplicationContext());    
System.out.println("DATE FORMAT  "+ dateFormat.format(d)); 
```

在 iPhone 中使用日期格式：

```
NSString *dateString = [self getNaturalDay:CurrentDate]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:55:00.510

您为什么不比较日期并制作一个字符串以显示在您的页面中。否则下面是给你的一些参考

请参阅此问题/答案[如何以今天、昨天的格式获取日期](https://stackoverflow.com/questions/7462064/right-way-to-format-date-with-strings-like-today-yesterday-tomorrow-etc)

作为该答案中的标准建议，您应该使用[此库](http://ocpsoft.org/prettytime/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:01:09.370

这将帮助您：

编辑：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    long dtMili = System.currentTimeMillis();
    CharSequence d =DateUtils.getRelativeTimeSpanString(dtMili);
    Toast.makeText(this, d, Toast.LENGTH_LONG).show();

   } 
```

尝试运行此代码。它将显示“0 分钟前”，而不是显示某些日期格式，并且取决于您的逻辑，它将以其真实形式显示时间（即 12 小时前、昨天、3 天前等）。这种显示时间的方式称为相对时间显示。

僵局

# activemq - 共享存储，slave broker的等待机制如何？

> ID：12137318
> 
> 赞同：0
> 
> 时间：2012-08-27T06:43:53.567
> 
> 标签：activemq, master-slave

以NFS为共享存储，Master/slave的部署如下：

![在此处输入图像描述](../Images/5e81a30b71c5f8707616dac71a73a6a1.png)

启动时，Broker1首先在NFS中获取锁，Broker2显示日志信息如下：

2012-08-27 11:38:36,245 | 信息 | 数据库 /usr/local/wxcTest/mnt/amqDir/lock 已锁定...等待 10 秒以解锁数据库。原因：java.io.IOException：无法锁定文件“/usr/local/wxcTest/mnt/amqDir/lock”。| org.apache.activemq.store.kahadb.MessageDatabase | 主要的

我想知道这正常吗？

再进一步，Broker2抢不到锁的一般机制如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:59:33.937

是的，这个 INFO 消息是预期的，它只是让您知道锁失败（按照主/从共享 FS 的设计）。

对于您的另一个问题，无论哪个代理首先启动都会获得锁，要释放它，只需杀死代理，从属代理应该获得锁并开始......

有关详细信息，请参阅此页面：http: [//activemq.apache.org/shared-file-system-master-slave.html](http://activemq.apache.org/shared-file-system-master-slave.html)

# objective-c - CoreData 如何使用 Search 和 ARC 过滤 NSFetchedResultsController

> ID：12137319
> 
> 赞同：3
> 
> 时间：2012-08-27T06:44:06.047
> 
> 标签：objective-c, ios, core-data, automatic-ref-counting

我找到了通过 NSFetchedResultsController 搜索的完美答案：[https ://stackoverflow.com/a/4481896/1486928](https://stackoverflow.com/a/4481896/1486928)

编辑：显示问题的项目： http: [//cl.ly/2x0C0N0E4240](http://cl.ly/2x0C0N0E4240)

它看起来真的很棒，除了它不是为与 ARC 一起使用而编写的，我试图删除所有的“保留”“释放”“自动释放”。

它仍然有效，主要是，当我在搜索栏中输入一个字符时，它会按预期显示过滤后的表，但它只需要 1 个字符（如果你添加更多它不会做任何事情），然后每隔一个“ search" 将显示第一次搜索的结果，它只占用了 1 个字符。

我已经做了 2 天了，将 NSlog 放在任何地方，以查看何时调用每个方法，但仍然找不到如何使其工作:(

谢谢 ！

编辑：这里是 .m [http://pastebin.com/9U4TfbA6](http://pastebin.com/9U4TfbA6) 编辑：这里是 .h [http://pastebin.com/S9aaNRFE](http://pastebin.com/S9aaNRFE)

另外，当我对此发表评论时，如果它可以帮助搜索工作：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (fetchedResultsController_! = nil)
    {
        return fetchedResultsController_;
    }
...
} 
```

还有这个 ：

```
- (NSFetchedResultsController *)searchFetchedResultsController { 
    if (searchFetchedResultsController_ != nil)
    {
        return searchFetchedResultsController_;
    }
...
} 
```

但它搞砸了其他事情：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:40:36.610

我猜你搞砸了搜索显示控制器委托方法，

特别是你需要检查这个方法

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString; 
```

因为这个方法会为你在搜索字段中输入的每个字符重新加载你的表格视图，正如名称本身所暗示的那样`shouldReloadTableForSearchString`

编辑：

好吧，您需要实现 2 个委托方法，`UISearchBar`因为您的所有`UISearchDisplayController`委托方法都是相同的，而这 2 个方法是

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText; 
```

这告诉代理用户更改了搜索文本。

```
- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
```

如果指定范围内的文本应替换为给定文本，则使用此选项。

请注意这些方法被多次调用，我的意思是在搜索栏中添加和删除的每个字符，因为每次搜索文本更改时您都将 searchFetchedResultsController 设置为 nil

只需注释掉这部分，它会很好用

```
/*if (searchFetchedResultsController_ != nil)
{
NSLog(@"Returned !nil searchController");
return searchFetchedResultsController_;
}*/ 
```

# javascript - FancyBox 超出 IFRAME 回调

> ID：12137321
> 
> 赞同：0
> 
> 时间：2012-08-27T06:44:19.600
> 
> 标签：javascript, fancybox, fancybox-2

我从 IFRAME 调用 fancybox 并将其从 IFRAME 中显示出来——它可以工作。但是我有回调函数的问题。[我正在使用 FanxyBox 2]

我想用回调函数修改 Prev/Next 按钮的不透明度和悬停行为，但它什么也没做。

iframe 演示【点击图片】： http: [//keramika.dtech.sk/Keramika/Svietidla_Lampy.html](http://keramika.dtech.sk/Keramika/Svietidla_Lampy.html)

我在这个“非 IFRAME”演示中实现了正确的行为：http: [//keramika.dtech.sk/test.html](http://keramika.dtech.sk/test.html)

据我了解，回调函数从“父”的角度运行，因此调用 $(".fancybox-prev") 是正确的（不是超出范围）。

回调'afterShow'：

```
'afterShow': function(){
            $(".fancybox-prev").css({"opacity": 0.1, "left":"-20px"});
            $(".fancybox-prev").hover(function(){
                $(this).css({"opacity": 0.6}); },
                function(){ $(this).css({"opacity": 0.1});
            }); 
```

这是一个更大的代码部分：

```
$(document).ready(function() {
$('#launcher').click(function(e){
e.preventDefault();
   parent.jQuery.fancybox( [
    {href:'/Keramika/Media/lampy/800x600/luci_obr2.jpg', title: '01'},
    {href:'/Keramika/Media/lampy/800x600/luci_obr3.jpg', title: '02'},
    {href:'/Keramika/Media/lampy/800x600/luci_obr4.jpg', title: '03'}
    ],  
    {
  'afterShow': function(){
            $(".fancybox-prev").css({"opacity": 0.1, "left":"-20px"});
            $(".fancybox-prev").hover(function(){
                $(this).css({"opacity": 0.6}); },
                function(){ $(this).css({"opacity": 0.1});
            });
     ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:24:23.507

我建议使用 CSS 进行样式设置 - [http://jsfiddle.net/rNM8Z/](http://jsfiddle.net/rNM8Z/)

# c# - C# 和 C++ 中字符串操作的不同基准

> ID：12137323
> 
> 赞同：2
> 
> 时间：2012-08-27T06:44:25.683
> 
> 标签：c#, c++, string

我有两个非常简单的 C++ 代码和 C# 中的 C#

```
for (int counter = 0; counter < 100000; counter ++)
{
    String a = "";
    a = "xyz";
    a = a + 'd';
    a = a + 'c';
    a = a + 'h';
} 
```

在 C++ 中

```
for (int counter = 0; counter < 100000; counter ++)
{
    string a = "";
    a.append("xyz");
    a = a + 'd';
    a = a + 'c';
    a = a + 'h';
} 
```

奇怪的是，c# 代码的执行时间比 c++ 代码的执行时间少 1/20。你能帮我找出为什么会这样吗？以及如何更改我的 c++ 代码以变得更快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T06:47:40.643

这可能是实现的一个怪癖。例如，一个优化器可能已经发现操作的结果没有被使用。或者可能碰巧分配了一个足够大的字符串以添加三个额外的字符而无需重新分配，而另一个则没有。或者它可能是一百万个其他的东西。

用“玩具”代码进行基准测试确实没有帮助。我不会假设结果适用于任何现实情况。

这段代码有很多明显的优化，例如：

```
string a;
for (int counter = 0; counter < 100000; counter ++)
{
    a = "xyz";
    a.append(1, 'd');
    a.append(1, 'c');
    a.append(1, 'h');
} 
```

通过重用缓冲区并避免额外的分配/复制/释放周期，这可能会产生巨大的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:50:33.497

对于大型字符串操作，请使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)

# java - 在休眠中以多对多关系从表中访问数据

> ID：12137328
> 
> 赞同：1
> 
> 时间：2012-08-27T06:44:41.877
> 
> 标签：java, hibernate, jakarta-ee

我有三张桌子的学生，课程，学生课程

```
table student
{
    student_id(PK)
}

table course
{
   course_id(PK)
}

table student_course
{
   student_id(PK+FK)
   course_id(PK+FK)
} 
```

我使用 Hibernate Generation Tool 创建了模型类和配置文件。它创建以下文件-

```
1) student.java & student.hbm.xml
2) course.java & course.hbm.xml 
```

对于**student_course，它会在每个 hbm 文件中创建具有多对多关系的集合**。所以我想要 Course 对象与学生相关，为此我想单独访问 student_course 表。

现在我通过学生对象访问一组学生课程来访问与学生相关的课程对象。我认为它不是有效的。

什么是有效的方法？

我可以 **通过编写 sql 查询**或 **手动创建 studentCourse.java 和 studentCourse.hbm.xml 来做到这一点吗**

请建议我访问与学生对象相关的课程对象的有效方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:10:13.017

> 请建议我访问与学生对象相关的课程对象的有效方法。

我认为你得到了正确的方法。有一个链接表，但 Hibernate 通过使用 ManyToMany 隐藏了它——这是这种关系的正确建模。一个学生可以选修很多课程，而一个课程有很多学生。

# iphone - 如何在工作空间内的 xcode 项目之间调用？

> ID：12137336
> 
> 赞同：0
> 
> 时间：2012-08-27T06:45:32.047
> 
> 标签：iphone, ios

我正在工作区中处理多个项目，我有项目 A 和项目 B，我能够分别构建和运行这两个项目，现在我想运行项目 A 并在执行时从那里调用项目 B 并执行它， 怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:00:51.797

您能否澄清“它应该调用项目 B”，因为这可能意味着很多事情。如果您的意思是项目 A 和项目 B 共享一个通用功能，那么[这个线程可能会回答您的问题。](https://stackoverflow.com/questions/6354945/xcode-4-workspace-cross-referencing-files)

基本上你应该：

1）创建一个公共文件夹，并从项目A和B中引用该文件夹中的文件（更容易）

或者

2）创建两个项目都引用的静态库（比较复杂）

# iphone - 带有自定义视图选择器的 UIBarButtonItem 初始化无法正常工作

> ID：12137345
> 
> 赞同：4
> 
> 时间：2012-08-27T06:46:22.850
> 
> 标签：iphone, objective-c, ios, xcode, customization

我正在尝试几个小时以使左按钮正常工作并模仿后退按钮。

我创建按钮的代码：

```
UIBarButtonItem *backButton = [self customBarButton:@"back_button" imageHiglighted:@"settings_button_highlighted" x:20 y:0 widthDivider:2.6 heightDivider:2.6];

backButton.target = self;
backButton.action = @selector(buttonPressed:);

self.navigationItem.leftBarButtonItem = backButton; 
```

这里调用创建自定义按钮的方法：

```
- (UIBarButtonItem *)customBarButton:(NSString *)imageDefault imageHiglighted:(NSString *)imageHighlighted x:(float)x y:(float)y widthDivider:(float)widthDivider heightDivider:(float)heightDivider {

UIImage *customImageDefault = [UIImage imageNamed:imageDefault];
UIImage *customImageHighlighted = [UIImage imageNamed:imageHighlighted];

CGRect frameCustomButton = CGRectMake(x, y, customImageDefault.size.width/widthDivider, customImageDefault.size.height/heightDivider);

UIButton *customButton = [[UIButton alloc] initWithFrame:frameCustomButton];

[customButton setBackgroundImage:customImageDefault forState:UIControlStateNormal];
[customButton setBackgroundImage:customImageHighlighted forState:UIControlStateHighlighted];

UIBarButtonItem *barCustomButton =[[UIBarButtonItem alloc] initWithCustomView:customButton];

return barCustomButton;

} 
```

和行动：

```
-(void)buttonPressed:(id) sender{

    NSLog(@"Entered");
    SearchViewController *ViewController = [[SearchViewController alloc] init];
    [self.navigationController pushViewController:ViewController animated:YES];

} 
```

所以我能够用一个简单的 UIButton 而不是 UIButtonBarItem 来实现它，我真的不知道它发生了什么。

如果你能帮助我，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T06:56:38.230

这样做添加`selector`到自定义`button`，因为它是`view`按钮`bar`：

```
[customButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

**编辑**：**注意**：适用于. `target`_`action``UIBarButtonItem``custom views`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T07:02:10.913

```
UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:[UIImage imageNamed:@"goback.png"] forState:UIControlStateNormal];
[button addTarget:self action:@selector(//HERE ! i don't know put what thing !) forControlEvents:UIControlEventTouchUpInside];
[button setFrame:CGRectMake(0, 0, 32, 32)];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T06:53:06.440

试试这个

```
self.navigationItem.leftBarButtonItem=[[UIBarButtonItem alloc] initWithCustomView:[GlobalMethods buttonWithImage:@"top-nav-back" heighlightImageName:nil buttonFrame:CGRectMake(102, 1, 50, 30) selectorName:@selector(btnBackClicked:) target:self]];

+ (UIButton*)buttonWithImage:(NSString*)normalImageName heighlightImageName:(NSString*)heighlightImageName buttonFrame:(CGRect)buttonFrame selectorName:(SEL)selectorName target:(id)target
{
    UIButton *objButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [objButton setFrame:buttonFrame];
    [objButton addTarget:target action:selectorName forControlEvents:UIControlEventTouchUpInside];
    [objButton setImage:[GlobalMethods getImageFromResourceBundle:normalImageName] forState:UIControlStateNormal];
    if(heighlightImageName)
        [objButton setImage:[GlobalMethods getImageFromResourceBundle:heighlightImageName] forState:UIControlStateDisabled];
    if(heighlightImageName)
        [objButton setImage:[GlobalMethods getImageFromResourceBundle:heighlightImageName] forState:UIControlStateSelected];
    return objButton;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:02:15.033

试试这个..

```
[customButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

在您的 customBarButton 方法中.. 我的意思是说给您的按钮而不是条形按钮项提供选择器..

检查并回复..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T07:08:12.027

只需将此行放在您的代码中..

```
[backButton addTarget:self action:@selector(backBtnPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-13T13:54:21.093

这对我有用

```
UIButton * tmpButton = [self generateButtonwithImageName:@"Back.png" andSize:CGRectMake(0, 0, 55, 30)];
UIBarButtonItem * backButton = [[UIBarButtonItem alloc] initWithCustomView:tmpButton];
[tmpButton addTarget:self action:@selector(reload) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.leftBarButtonItem=backButton;

-(UIButton*)generateButtonwithImageName :(NSString*)imageName andSize:(CGRect)rect{
  UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
  button.frame=rect;
  [button setBackgroundImage:[UIImage imageNamed:imageName] forState:UIControlStateNormal];
  return button;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-25T07:43:35.157

//为我工作

```
if([version floatValue] < 7.0)
{
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navi-bar.png"] forBarMetrics:UIBarMetricsDefault];
    self.navigationController.navigationBar.opaque = YES;

    closeButton = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 35, 30)];
    [closeButton setImage:[UIImage imageNamed:@"btn_end.png"] forState:UIControlStateNormal];
    [closeButton setImage:[UIImage imageNamed:@"btn_end_on.png"] forState:UIControlStateHighlighted];
    [closeButton addTarget:self action:@selector(actionClose) forControlEvents:UIControlEventTouchUpInside];

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithCustomView:closeButton];
}
else{

    /*add button back to navigation*//*add buttom back to navigation*/
    UIBarButtonItem *itemBack = [[UIBarButtonItem alloc]initWithTitle:@"完了" style:UIBarButtonItemStylePlain target:self action:@selector(actionClose)];
    self.navigationItem.rightBarButtonItem = itemBack;
} 
```

# c# - 字典中的 ExpandoObject 为空值

> ID：12137354
> 
> 赞同：1
> 
> 时间：2012-08-27T06:47:18.480
> 
> 标签：c#, .net, dictionary, null, expandoobject

我有一个在 C# .NET 4.0 中充满动态对象（字典）的字典。有时值是字符串、int 或浮点数，但有时值是 ExpandoObject。Dictionary 本身实际上是转换为 Dictionary 以检索其属性的 ExpandoObject。

问题是，我正在迭代主对象的每个属性（因此也是字典），当有一个 ICollection/IList 或 ExpandoObject 类型的对象时，我想执行一个操作。然而问题是，如果字典中有一个动态对象 (ExpandoObject)，它会显示为 Null。

当我在 Visual Studio 2010 中调试并打开动态视图时，它会将这些对象列为属性，但是当我将相同对象的属性作为键值对查看时（从字典视图中查看），值为“ null" 当此对象包含其他 ExpandoObjects 时。Null 永远不会检查为 Collection/EpandoObject 因此我的条件失败。

在使用 ExpandoObjects 之前我没有遇到过这个错误，所以我很好奇为什么它将 ExpandoObjects 视为空值。

```
//Function gets a List of ExpandoObjects (casting it as IDictionary)
    private static dynamic mergeIdObjects(List<IDictionary<string, dynamic>> objects)
    {          
        // Take first object as placeholder for the other objects
        IDictionary<string, dynamic> merged = (objects.First())[ParentObject];

        // For all objects to merge (except first one, already used that one as a placeholder)
        foreach (var o in objects.Skip(1))
        {
            IDictionary<string, dynamic> obj = o[ParentObject];
            // For all keys(property names) in the object)
            foreach (dynamic key in obj.Keys)
            {
                dynamic oldValue;

                // This is where the program doesn't function as it should.
                if (merged.TryGetValue(key, out oldValue)) // If key is already in merged object
                {
        // This never evaluates to True since the IList properties are now 'Null' and they shouldn't!
                    if (oldValue is IList<dynamic>) // If value is a list
                        merged[key].Add(obj[key]);  // then add item to this list
                    else
                        if (merged[key] != obj[key])   // Else create a list and add the item
                            merged[key] = new List<dynamic> { oldValue, obj[key] };
                }
                else
                    merged.Add(key, obj[key]);  // If this key is not in the merged object, add it to the merged object
            }
        }
        IDictionary<string, dynamic> placeHolder = new ExpandoObject();
        placeHolder.Add(ParentObject, merged);

        return (dynamic)placeHolder;
    } 
```

有没有我遗漏的东西，我错过的演员或者使用了错误的 DataType？我似乎无法弄清楚，请提供任何帮助！

# c++ - 错误 c2143 缺少 ';' 在 '>>' 和错误 c2143 之前缺少 ';' Visual Studio 2005 中 C++ 中的 cin 和 cout 之前的 '<<'

> ID：12137360
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:47:39.493
> 
> 标签：c++, googletest

我正在用 google test 和 Visual Studio 2005 中的 c++ 编写一个程序。该程序只执行 4 个算术运算......

最初，我编写了一个带有硬编码值的程序，它运行良好。但现在我希望用户提供输入，因此需要在程序中使用`cin`和`cout`。`cin`但是当我在代码中添加和`cout`语句时，它给了我以下错误：

```
error C2143: syntax error : missing ';' before '<<' and error C4430: 
missing type specifier - int assumed. Note: C++ does not 
support default-int for cout and 
```

cin 一样

```
error C2143: syntax error : missing ';' before '>>' and error C4430: 
missing type specifier - int assumed. Note: C++ does not 
support default-int 
```

我有三个单独的文件：一个单元测试文件，另一个文件我已经编写了所有测试`gtest`，第三个文件我链接了谷歌测试提供的主文件。

下面是我的代码：

```
#include <iostream>
#include "stdafx.h"
#include "gtest/gtest.h"
#include "unittestcomplex.h"
using namespace std;

float a,b;

cout << "Enter two numbers:";
cin >> a >> b;
Arithmatic num;

TEST(complex, Addition)
{
    EXPECT_EQ(a+b,num.addition(a,b));
}
TEST(complex,subtraction)
{
    EXPECT_EQ(a-b,num.subtraction(a,b));
}
TEST(complex,multiplication)
{
    EXPECT_EQ(a*b,num.multiplication(a,b));
}
TEST(complex,division)
{
    EXPECT_EQ(a/b,num.division(a,b));
} 
```

这是我编写所有函数的文件：

```
#include <iostream>
#include "stdafx.h"
# include <conio.h>
using namespace std;
class Arithmatic 
{
public: 
    float addition(float a, float b);
    float subtraction(float a, float b);
    float multiplication(float a, float b);
    float division(float a, float b);
};

float Arithmatic::addition(float a, float b)
{
    float sum;
    sum = a+b;
    return sum;
}

float Arithmatic::subtraction(float a, float b)
{
    float difference;
    difference = a-b;
    return difference;
}
float Arithmatic::multiplication(float a, float b)
{
    float mult;
    mult = a*b;
    return mult;
}
float Arithmatic::division(float a, float b)
{
    float div;
    div = a/b;
    return div;
} 
```

和 main() 在这里：

```
#include <iostream>
#include <conio.h>
#include "stdafx.h"
#include "gtest/gtest.h"
using namespace std;

int main(int argc, char** argv)  
{    
      testing::InitGoogleTest(&argc, argv);
      RUN_ALL_TESTS();
      std::getchar(); // keep console window open until Return keystroke 
} 
```

我没有更改 main() 中的任何内容。它是由 提供的`gtest`。请告诉我如何消除这些错误并使我的程序与用户交互？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:52:42.380

此代码不是有效的 C++，因为它不属于任何函数。

```
cout << "Enter two numbers:";
cin >> a >> b; 
```

它应该在函数内部移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T06:52:22.573

你不能拥有这个

```
cout << "Enter two numbers:";
cin >> a >> b;
Arithmatic num; 
```

功能失效。

`main`在函数内移动代码。或者在另一个函数中调用它`main`。

# powershell - 在 Powershell 中，如何创建多个记录哈希表？

> ID：12137380
> 
> 赞同：0
> 
> 时间：2012-08-27T06:49:53.900
> 
> 标签：powershell, hashtable

在 Powershell 中，如何创建多个记录哈希表？像这些：

```
> Handles  NPM(K)    PM(K)      WS(K) VM(M)   CPU(s)     Id ProcessName
> -------  ------    -----      ----- -----   ------     -- -----------
>     260      25    98568     109684   263    37.80   7896 AcroRd32
>      67       8     1236       3800    30     0.03   2052 atashost
>     122       7     1812       4496    29     0.08   1188 atiesrxx
>     126      10    16204      15936    49            7236 audiodg
>     170      21    12888      21352   106     0.14   5016 CallControl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:07:16.270

在这种情况下，它将是一个对象列表，而不是一个哈希表。您可以使用`New-Object`这些属性创建一组对象。如下所示：

```
$obj = new-object -type psobject
$obj | add-member -name Handles -MemberType NoteProperty -Value 123 
```

等等每个属性。寻找`new-object`更简单的方法来做同样的事情。

如果您已经有一个对象列表并想要其中的一些属性，请使用`Select-Object`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T22:53:17.380

如果您的目标是能够利用 Hashtables 功能使用键/值对轻松查找您的数据，例如通过“ProcessName”，那么您可以这样做。请记住，Powershell 是一个面向对象的 shell。您可以在对象中存储对象。或者在这种情况下，哈希表中的哈希表。

```
[hashtable] $ProcessDetails = @{Handles=260; NPM=25; 
        PM= 98568; WS=109684; VM=263; CPU=37.80; ID=7896}
$ProcessDetails
[hashtable] $Processes = @{}
$Processes.Add("AcroRd32", $ProcessDetails)
""
$Processes
""
# You can then use the various methods to extract the data.
$Processes.Get_Item("AcroRd32").ID
$Processes.AcroRd32.CPU
$Processes["AcroRd32"].VM
$Processes["AcroRd32"]["ws", "pm", "NPM", "Handles"] 
```

会输出：

```
Name                           Value                                                                    
----                           -----                                                                    
ID                             7896                                                                     
WS                             109684                                                                   
NPM                            25                                                                       
Handles                        260                                                                      
VM                             263                                                                      
PM                             98568                                                                    
CPU                            37.8                                                                     

AcroRd32                       {ID, WS, NPM, Handles...}                                                

7896
37.8
263
109684
98568
25
260 
```

您仍然可以创建一个新对象来将您的进程详细信息存储为哈希表值。PSObject 在将输出发送到文件、屏幕等时具有优势。但是如果您正在查找数据以进行处理，那么我喜欢坚持使用 Hashtables。

# php - 即使使用isset和empty，php邮件功能也不起作用

> ID：12137381
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:49:58.450
> 
> 标签：php, email

为什么我的电子邮件脚本没有运行？我尝试使用 isset()、strlen()，也将它与其他页面一起使用，即在其他页面中使用脚本并将表单操作设置为该页面 url。变量不为空。下面提到的是我的脚本的完整代码

```
 <body>
<?
$to="sunjava11@gmail.com";
$name=$_POST["name"];
$email=$_POST["name2"];
$phone=$_POST["name3"];
$text=$_POST["message"];
$message="
Name: ".$name."\n
Email: ".$email."\n
Phone: ".$phone."\n
Message: ".$text."
";
function okay (){

if(!empty($name))
{
return true;
}

if(!empty($email))
{

return true;
}

if(!empty($text))
{

return true;
}
}

if (okay()==true)
{
$headers="From ".$name;
$subject="Contact Online at Al-Khidmat Punjab Website ";
mail($to,$subject,$message,$headers);
}
else
{
echo "mail not sent";
}

?>
<form id="form1" name="form1" method="post" action="/subpage-recv">
  <table width="618" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td width="232" class="leftCol">Name</td>
      <td width="370"><label for="name"></label>
      <input type="text" name="name" id="name" class="input" /></td>
    </tr>
    <tr>
      <td class="leftCol">Email</td>
      <td class="rightCol"><input type="text" name="name2" id="name2" class="input" /></td>
    </tr>
    <tr>
      <td class="leftCol">Phone Number <span class="smalltext">(optional)</span></td>
      <td class="rightCol"><input type="text" name="name3" id="name3" class="input" /></td>
    </tr>
    <tr>
      <td class="leftCol" style="border:none">Message</td>
      <td class="rightCol" style="border:none"><label for="message"></label>
      <textarea name="message" id="message" cols="45" rows="5" ></textarea></td>
    </tr>
    <tr>
      <td colspan="2" align="center"><input type="submit" value="Send" id="send"></td>      
    </tr>
  </table>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:33:11.440

全局变量在 OK() 中不可见。

您可以使用 global-keyword 或 $GLOBALS-array 来访问它们。

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# php - 如何在 cakephp 中使用 require_one 视图

> ID：12137383
> 
> 赞同：1
> 
> 时间：2012-08-27T06:50:03.380
> 
> 标签：php, cakephp, view, require-once

我是 cakephp 的初学者，我想`percalname.php`在我看来使用文件。
这个文件有这个路径：
`app\webroot\files\percalname.php`
我在我的视图中编写了这个代码（这个代码在第 17 行）

```
require_once $this->webroot.'../files/percalname.php'; 
```

但我面对这个消息：

> require_once(/cake/../files/percalname.php) [function.require-once]：无法打开流：没有这样的文件或目录 [APP\views\orders\add.ctp，第 17 行]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:14:00.670

你可以使用`vondor`.
首先，您应该将文件复制到供应商文件夹并`app::import()`像此链接一样使用。 [cakephp.org 中的供应商示例](http://book.cakephp.org/1.3/view/944/Vendor-examples)

祝你好运。

# jquery - 在按钮单击 JQuery 时获取文本框值

> ID：12137390
> 
> 赞同：0
> 
> 时间：2012-08-27T06:50:27.193
> 
> 标签：jquery, button, onclick

我需要提醒输入的文本框值，所以我这样做如下。html代码：

```
<input type="text" id="textbox1"  class="cal" /> 
```

jQuery代码：

```
$(document).ready(function () {
    var get = $("#textbox").val();
   $("#calculate").click(function () {
     alert(get);

    });
}); 
```

在点击时，它总是说未定义。为什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T06:52:48.607

改变

```
var get = $("#textbox").val(); 
```

到

```
var get = $("#textbox1").val(); 
```

因此，`id`您的目标与您的 HTML 相匹配，并将其放入您的事件处理程序中：

```
$(document).ready(function() {
   $("#calculate").click(function () {
       var get = $("#textbox1").val();
       alert(get);
    });
}); 
```

因此，**当您单击按钮**而不是文档加载时，您将获得价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:53:28.233

您的 id 是`textbox1`，您应该在单击时获得该值，或者您只是获得初始值。

```
$(document).ready(function () {
   $("#calculate").click(function () {
       alert( $("#textbox1").val());
    });
}); 
```

# serial-port - 可靠通信的简单算法

> ID：12137392
> 
> 赞同：1
> 
> 时间：2012-08-27T06:50:41.490
> 
> 标签：serial-port, communication

所以，我过去曾在大型系统上工作过，比如 iso 堆栈会话层，类似的东西对于我的需要来说太大了，但我确实对大局有所了解。我现在拥有的是一个串行点对点通信链路，其中某些组件（通常）正在丢弃数据。

因此，我将不得不编写自己的、可靠的交付系统，并将其用于运输。有人可以为我指出基本算法的方向，甚至可以提供关于它们被称为什么的线索吗？我尝试了谷歌，但最终得到了关于遗传算法等的研究生理论。我需要基础知识。例如 10-20 行纯 C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T09:09:42.957

1.  [调制解调器](http://en.wikipedia.org/wiki/XMODEM)。它很旧，很糟糕，但它在硬件和软件上都得到了广泛的支持，几乎所有语言和市场利基都可以使用库。

2.  [HDLC](http://en.wikipedia.org/wiki/High-Level_Data_Link_Control) - 高级数据链路控制。在过去的 3 年中，它催生了许多可靠的协议，包括 TCP/IP。您不能直接使用它，但它是如何开发自己的协议的模板。基本前提是：

    *   每个数据字节（或数据包）都有编号
    *   通信双方在本地维护两个号码：上次接收和上次发送
    *   每个数据包都包含两个数字的副本
    *   每个成功的传输都通过发回一个带有更新数字的空（或非）数据包来确认
    *   如果在某个超时时间内未确认传输，请再次发送。

    对于特殊处理（同步），向数据包添加标志（通常只有一位就足够了，以告知数据包是特殊的并使用）。不要忘记CRC。

* * *

两种协议都没有任何类型的会话支持。但是您可以通过简单地添加另一层来引入一个 - 一个简单的状态机和一个计时器：

*   会话以一个特殊的数据包开始
*   在指定的超时时间内应该至少有一个（可能是空的）数据包
*   如果本端在timeout/2内没有发送数据包，则发送一个空数据包
*   如果在超时时间内没有从通信的另一端看到数据包，则会话已终止
*   可以使用另一个特殊的数据包来优雅地终止会话

这和会话控制一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:56:30.553

这个问题有（IMO）两个方面。

首先，如果数据被丢弃，那么我会先解决硬件问题，否则你将拥有 GIGO

至于通信协议，您的帖子建议使用一个相当简单的系统？您是要验证数据（奇偶校验、sumcheck？）还是要包括纠错？

如果只需要验证，我就可以使用 RS232 和 CRC8 sumchecks 运行可靠的系统——在这种情况下，[这个 StackOverflow 页面](https://stackoverflow.com/questions/7974082/best-8-bit-supplemental-checksum-for-crc8-protected-packet)可能会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:03:54.217

如果某些组件在串行点对点链接中丢弃数据，那么您的代码中肯定存在一些错误。

首先要确认物理层的通信没有问题

其次，您需要一些有关数据通信理论的知识，例如 ARQ（自动请求重传）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T19:08:04.633

进一步的想法，在考虑了您对前两个答案的回应之后......这确实表明存在硬件问题，并且没有任何聪明的代码可以解决这个问题。

我建议您将示波器连接到链路上，这应该有助于确定故障所在。特别要查看两侧（Tx、Rx）的波特率，以确保它们在规格范围内……自动波特率经常是个问题？！

但是看看辍学是否是正常的，或者可以与任何其他活动同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:23:46.170

在发送方；

```
/////////////////////////////////////////  XBee logging
void dataLog(int idx, int t, float f)
{
    ubyte stx[2] = { 0x10, 0x02 };
    ubyte etx[2] = { 0x10, 0x03 };

    nxtWriteRawHS(stx, 2, 1);
    wait1Msec(1);

    nxtWriteRawHS(idx, 2, 1);
    wait1Msec(1);

    nxtWriteRawHS(t, 2, 1);
    wait1Msec(1);

    nxtWriteRawHS(f, 4, 1);
    wait1Msec(1);

    nxtWriteRawHS(etx, 2, 1);
    wait1Msec(1);
} 
```

在接收方

```
void XBeeMonitorTask()
        {
            int[] lastTick = Enumerable.Repeat<int>(int.MaxValue, 10).ToArray();
            int[] wrapCounter = new int[10];

            while (!XBeeMonitorEnd)
            {
                if (XBee != null && XBee.BytesToRead >= expectedMessageSize)
                {
                    // read a data element, parse, add it to collection, see above for message format
                    if (XBee.BaseStream.Read(XBeeIncoming, 0, expectedMessageSize) != expectedMessageSize)
                        throw new InvalidProgramException();

                    //System.Diagnostics.Trace.WriteLine(BitConverter.ToString(XBeeIncoming, 0, expectedMessageSize));

                    if ((XBeeIncoming[0] != 0x10 && XBeeIncoming[1] != 0x02) ||  // dle stx
                        (XBeeIncoming[10] != 0x10 && XBeeIncoming[11] != 0x03))   // dle etx
                    {
                        System.Diagnostics.Trace.WriteLine("recover sync");
                        while (true)
                        {
                            int b = XBee.BaseStream.ReadByte();
                            if (b == 0x10)
                            {
                                int c = XBee.BaseStream.ReadByte();
                                if (c == 0x03)
                                    break;     // realigned (maybe)
                            }
                        }
                        continue;   // resume at loop start
                    }

                    UInt16 idx = BitConverter.ToUInt16(XBeeIncoming, 2);
                    UInt16 tick = BitConverter.ToUInt16(XBeeIncoming, 4);
                    Single val = BitConverter.ToSingle(XBeeIncoming, 6);

                    if (tick < lastTick[idx])
                        wrapCounter[idx]++;
                    lastTick[idx] = tick;

                    Dispatcher.BeginInvoke(DispatcherPriority.ApplicationIdle, new Action(() => DataAdd(idx, tick * wrapCounter[idx], val)));
                }
                Thread.Sleep(2);  // surely we can up with the NXT
            }
        } 
```

# actionscript-3 - AS3 中的参数 child 必须为非空错误

> ID：12137393
> 
> 赞同：0
> 
> 时间：2012-08-27T06:50:52.463
> 
> 标签：actionscript-3, flash, null, flash-cs5

我有一个暂停游戏的代码，它运行暂停功能，如下所示：

```
public function onKeyPress(keyboardEvent:KeyboardEvent) :void
{
    //Check for pause
    if(keyboardEvent.keyCode == Keyboard.P)
    {
        //If the timer is still running
        if(gameTimer.running)
        {
            gameTimer.stop();
            Mouse.show();
            pauseText = new PauseText();
            pauseText.x = 150;
            pauseText.y = 100;
            addChild(pauseText);
            //If the player is using the mouse, resume by clicking on the player
            if(mouseControl)
            {
                player.addEventListener(MouseEvent.CLICK, resumeGame);
                pauseText.pauseInformation.text = "click on yourself";
            }
            else
            {
                pauseText.pauseInformation.text = "press 'p'";
            }
        }
        else
        {
            //Only allow the player to resume with P IF he is using the keyboard
            //This prevents cheating with the mouse.
            if(!mouseControl)
            {
                gameTimer.start();
                removeChild(pauseText);
                pauseText = null;
            }
        }
    }
} 
```

游戏运行完美。在我第一次播放时，暂停功能起作用。但是，如果稍后我死了并重新启动游戏，然后暂停它，我会收到以下消息：

```
TypeError: Error #2007: Parameter child must be non-null.
    at flash.display::DisplayObjectContainer/removeChild()
    at Game/onKeyPress() 
```

游戏仍然运行良好。但是，每次我暂停或取消暂停时，都会出现此错误。如果我再次死机，重新启动，然后暂停，会出现其中两个错误。据我所知，它似乎试图删除 pauseText ......但我在第一次播放时一直很好地删除它，我使用 removeChild() 然后将我的代码的其他部分设置为 null 并且它可以工作美好的。另外，如果我添加一个跟踪（“a”）；在函数头之后的语句，我在输出面板上出现“a”之前得到错误。

怎么了？

附加说明：如果我在第一次播放时根本不使用暂停功能，那么在第二次播放时调用它时不会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:54:53.803

将 removeChild 放入 'if' ，这将解决错误：

```
if(pauseText.parent){
    pauseText.parent.removeChild(pauseText);
} 
```

但无论如何你应该检查问题的根源是什么，也许'gameTimer.running'在开始时是假的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:56:37.143

您可能会实例化另一个 Game 对象（包含整个游戏的对象），而不会删除前一个游戏的事件侦听器。这可以解释这种行为，因为您有多个 KeyboardEvent.KEY_DOWN 侦听器处于活动状态，并请注意，当您停止游戏时，您很可能会停止其中的计时器，因此您的“if (gameTimer .running)" 语句被执行，但是计时器被有效地停止而没有生成 pauseText。所以，你错过了一个

```
removeEventListener(KeyboardEvent.KEY_DOWN,onKeyPress); 
```

在您的游戏破坏代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:04:08.230

```
if (!mouseControl) {
    gameTimer.start();
    if (pauseText && contains(pauseText)) {
        removeChild(pauseText);
        pauseText = null;
    }
} 
```

# java - 如何设置系统变量以用于 Maven 故障安全测试？

> ID：12137400
> 
> 赞同：2
> 
> 时间：2012-08-27T06:51:15.283
> 
> 标签：java, maven, maven-failsafe-plugin, system-variable, integration-testing

我正在尝试在没有设置我需要的环境变量的构建服务器上运行测试。

在 spring 上下文 xml 文件中使用该变量来解析属性文件的位置。

例如类路径：config/${EnvironmentType}/myfile.properties

我正在使用故障安全插件并尝试各种记录在案的方法（甚至不推荐使用的方法）来设置变量。没有任何区别，变量永远不会被解决。

我的配置如下：

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>2.12</version>
            <executions>
                <execution>
                    <id>Integration tests against mocks</id>
                    <goals>
                        <goal>integration-test</goal>
                    </goals>
                    <configuration>
                        <skipTests>${skip.integration.mock.tests}</skipTests>
                        <includes>
                            <include>**/*ITMock.java</include>
                        </includes>
                        <argLine>-DEnvironmentType="DevelopmentIntegration"</argLine>
                        <systemPropertyVariables>
                            <EnvironmentType>DevelopmentIntegration</EnvironmentType>
                        </systemPropertyVariables>
                        <environmentVariables>
                            <EnvironmentType>DevelopmentIntegration</EnvironmentType>
                        </environmentVariables>
                        <systemProperties>
                            <property>
                                <name>EnvironmentType</name>
                                <value>DevelopmentIntegration</value>
                            </property>
                        </systemProperties>
                        <forkMode>false</forkMode>
                    </configuration>
                </execution>
                <execution>
                    <id>Verify</id>
                    <goals>
                        <goal>verify</goal>
                    </goals>
                    <configuration>
                        <skipTests>false</skipTests>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

如何在不实际设置机器上的情况下为我的测试设置这个 env var？

注意：使用 mvn verify -DEnvironmentType="DevelopmentIntegration" 运行它是有效的。我希望它只与 mvn verify 一起工作。

干杯，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:48:18.090

显示的配置的值为`false`，根据[docs](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html)`<forkMode>`，这似乎不是此参数的有效值。

我认为插件配置中指定的环境和系统变量*不适*用于当前运行的JVM；如果插件创建了一个新的 JVM 来运行测试，它们就适用。我的猜测是`false`forkMode 参数中的值导致分叉不会发生。尝试将其保留为默认值 ( `once`) 并查看是否有效。

# iphone - 通过密件抄送发送邮件时 MailCore 中的错误

> ID：12137402
> 
> 赞同：0
> 
> 时间：2012-08-27T06:51:27.860
> 
> 标签：iphone, ios, bcc, mailcore

发送带有以下收据的电子邮件至：personA cc: personB bcc :personC

这三个人都会收到电子邮件。并且所有收到的电子邮件都会在收据字段中显示 personC。正如我们所知，不应显示密件抄送联系人 personC。为什么会发生这种情况？我正确地将`CTCoreMessage`with 设置为、cc 和 bcc。这是`MailCore`框架的错误吗？还是我错过了什么？

提前致谢！

以下是相关代码供大家参考

```
- (IBAction)buttonSendPressed:(id)sender
{
[self dismissViewControllerAnimated:YES completion:^{
    CTCoreMessage *testMsg = [[CTCoreMessage alloc] init];
    NSMutableArray *mutArrTos = [NSMutableArray array]; // personA
    NSMutableArray *mutArrCcs = [NSMutableArray array];  // personB
    NSMutableArray *mutArrBccs = [NSMutableArray array];  // personC
    NSLog(@"toContactArr :%@",toContactArr);

    if (toContactArr.count>0) {
        for (NSDictionary *dict in toContactArr) {
            [mutArrTos addObject:[CTCoreAddress addressWithName:[dict valueForKey:@"name"] email:[dict valueForKey:@"email"]]];
        }
        NSLog(@"mutArrRecipients : %@", mutArrTos);
        [testMsg setTo:[NSSet setWithArray:mutArrTos]];
    }

    if (ccContactArr.count>0) {
        for (NSDictionary *dict in ccContactArr) {
            [mutArrCcs addObject:[CTCoreAddress addressWithName:[dict valueForKey:@"name"] email:[dict valueForKey:@"email"]]];
        }
        NSLog(@"mutArrRecipients : %@", mutArrCcs);
        [testMsg setCc:[NSSet setWithArray:mutArrCcs]];
    }

    if (bccContactArr.count>0) {
        for (NSDictionary *dict in bccContactArr) {
            [mutArrBccs addObject:[CTCoreAddress addressWithName:[dict valueForKey:@"name"] email:[dict valueForKey:@"email"]]];
        }
        NSLog(@"mutArrRecipients : %@", mutArrBccs);
        [testMsg setBcc:[NSSet setWithArray:mutArrBccs]];
    }

    [testMsg setFrom:[NSSet setWithObject:[CTCoreAddress addressWithName:@"222222" email:@"letibe.xx@gmail.com"]]];
    [testMsg setBody:self.textView.text];
    [testMsg setSubject:self.textField.text];

    DbManager *dbManager = [[DbManager sharedManager] switchDBWithFileName:DBNAME];
    User *user = [dbManager getAccount];
    NSString *account = user.account;
    NSString *pwd = user.password;
    NSString *emailType = user.email_type;
    NSLog(@"user: %@", user);

    NSLog(@"account: %@", account);
    NSLog(@"pwd: %@", pwd);
    NSLog(@"emailType: %@", emailType);

    NSError *error;
    BOOL success = [CTSMTPConnection sendMessage:testMsg server:@"smtp.gmail.com" username:@"letibe.xx@gmail.com" password:@"222222" port:25 useTLS:YES useAuth:YES error:&error];
    if (!success) {
        // Present the error
        NSLog(@"error: %@", error);
    }else{
        NSLog(@"CTSMTPConnection success");
    }

}];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T01:34:49.037

在阅读了 SMTP 协议之后。我已修改`CTCoreMessage.m`以删除标题中的密件抄送地址，如下所示。然后密件抄送地址不会在接收器中打印。

**CTCoreMessage.m**

```
- (NSString *)render {
CTMIME *msgPart = myParsedMIME;

if ([myParsedMIME isKindOfClass:[CTMIME_MessagePart class]]) {
    /* It's a message part, so let's set it's fields */
    struct mailimf_fields *fields;
    struct mailimf_mailbox *sender = (myFields->fld_sender != NULL) ? (myFields->fld_sender->snd_mb) : NULL;
    struct mailimf_mailbox_list *from = (myFields->fld_from != NULL) ? (myFields->fld_from->frm_mb_list) : NULL;
    struct mailimf_address_list *replyTo = (myFields->fld_reply_to != NULL) ? (myFields->fld_reply_to->rt_addr_list) : NULL;
    struct mailimf_address_list *to = (myFields->fld_to != NULL) ? (myFields->fld_to->to_addr_list) : NULL;
    struct mailimf_address_list *cc = (myFields->fld_cc != NULL) ? (myFields->fld_cc->cc_addr_list) : NULL;
//  struct mailimf_address_list *bcc = (myFields->fld_bcc != NULL) ? (myFields->fld_bcc->bcc_addr_list) : NULL;
    clist *inReplyTo = (myFields->fld_in_reply_to != NULL) ? (myFields->fld_in_reply_to->mid_list) : NULL;
    clist *references = (myFields->fld_references != NULL) ? (myFields->fld_references->mid_list) : NULL;
    char *subject = (myFields->fld_subject != NULL) ? (myFields->fld_subject->sbj_value) : NULL;

    //TODO uh oh, when this get freed it frees stuff in the CTCoreMessage
    //TODO Need to make sure that fields gets freed somewhere
//  fields = mailimf_fields_new_with_data(from, sender, replyTo, to, cc, bcc, inReplyTo, references, subject);
    fields = mailimf_fields_new_with_data(from, sender, replyTo, to, cc, NULL, inReplyTo, references, subject);

    [(CTMIME_MessagePart *)msgPart setIMFFields:fields];
}
return [myParsedMIME render];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T08:13:51.997

![在此处输入图像描述](../Images/b529b9864af3b2ca93f9d7f88062e7a7.png)

看起来这个错误与框架本身有关，因为框架没有显示任何表明密件抄送地址将被隐藏的内容

它只是表明可以将消息设置为密件抄送、抄送和收件人。

我已经将框架挖了 2 英尺，但没有发现任何关于密件抄送的信息表明它将被隐藏在接收端......

# iphone - 在 UITextView 中的单词末尾添加点

> ID：12137409
> 
> 赞同：0
> 
> 时间：2012-08-27T06:52:11.600
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

在我的 UITextView 中，每当我给出多个空格时，都会在单词的末尾添加一个点。当我使用它来获取电子邮件 ID 时，我不想要任何点，如何避免这种情况？我在 IB 中添加了 UITextView。我需要在那里做任何改变吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:04:01.953

这是键盘设置。转到设置->常规->键盘并禁用`"." shortcut`。如果您添加两个连续的空格，它会插入句点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T07:05:18.073

在界面生成器中，将键盘选项设置为电子邮件地址。

# joomla2.5 - Joomla 2.5 中对 Virtuemart 2.0.8 的多供应商支持

> ID：12137411
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:52:22.023
> 
> 标签：joomla2.5, virtuemart

如何**在 Joomla 2.5 中为 Virtuemart 2.0.8 提供多供应商支持**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-21T11:07:09.013

你可以使用这个扩展[http://extensions.joomla.org/extensions/extension/extension-specific/virtuemart-extensions/marketplace-for-virtuemart](http://extensions.joomla.org/extensions/extension/extension-specific/virtuemart-extensions/marketplace-for-virtuemart)

此扩展支持扩展市场功能的附加插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:47:08.273

我用过的最好的方法是 VM Vendor Component 。 [http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions/virtuemart-uploads/8239](http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions/virtuemart-uploads/8239)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T17:44:45.393

如果您正在寻找商业扩展，我推荐来自 Codingmall 的 Multi vendor 美德扩展。它有点贵，但有很多功能。

检查这个 [http://codingmall.com/faq/7-joomla-products/151-virtuemart-multi-vendor-configuration-a-settings](http://codingmall.com/faq/7-joomla-products/151-virtuemart-multi-vendor-configuration-a-settings)

# javascript - jQuery Mobile pageinit 不适用于首次加载页面（可复制）

> ID：12137413
> 
> 赞同：0
> 
> 时间：2012-08-27T06:52:30.773
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

重新加载页面或直接导航到 jQuery Mobile 哈希 URL 甚至不会触发 pageinit 一次。例如，我在我的二级页面上试过这个：

```
 $(function () {
        $(page).bind('pageinit', function () {
            console.log('bind pageinit');
        });
        $(document).on('pagecreate', page, function () {
            console.log('pagecreate');
        });
        $(document).on('pageshow', page, function () {
            console.log('pageshow');
        });
        $(document).on('pageinit', page, function () {
            console.log('pageinit');
        });
    }); 
```

在第一页上，我单击转到第二页，上面的生命周期被写入控制台。该 URL 还附加了#two。这很好，但是当转到另一台机器上的链接时，页面 init 不会触发。似乎只有单击按钮才能触发页面初始化。

我在这里有一个活生生的例子：http: [//dl.dropbox.com/u/5986646/jqm-pageinit.html](http://dl.dropbox.com/u/5986646/jqm-pageinit.html)。将此粘贴到 URL 中，事件不会触发：[http](http://dl.dropbox.com/u/5986646/jqm-pageinit.html#two) ://dl.dropbox.com/u/5986646/jqm-pageinit.html#two （注意哈希 URL）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:59:06.593

是的，我遇到了同样的问题。

要在页面 init 上执行一些 javascript 代码，请使用以下结构：

```
$(document).bind("mobileinit", function(){
    $('#mainPage').live('pageshow', function(){
        // Some Javascript code
    });
}); 
```

现在我可以在页面被调用时一直执行代码。

# java - Java 客户端拒绝连接到远程服务器

> ID：12137415
> 
> 赞同：1
> 
> 时间：2012-08-27T06:52:39.933
> 
> 标签：java, hadoop, hbase, apache-zookeeper

我对 Hbase 非常陌生，它与 RDBMS 完全不同。我开发了一个简单的应用程序并尝试将其配置到远程服务器 162.18.17.55。我收到拒绝连接错误。我无法转发以检查哪里出错了，当我在 Putty 中键入 zk_dump 时，我得到了相应的服务器详细信息，我可以登录到 putty 和表到数据库中，但是当我使用 java 客户端时我无法连接到服务器。请任何人指导我这个过程和问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:07:40.577

当您连接到`Zookeeper`它时，它会作为主机返回`HadoopMaster`，而不是因为您放入文件中的 IP`HadoopMaster`地址`core-site.xml`。`HadoopMaster`现在您需要添加`/etc/hosts`文件才能识别主机地址。将此行添加到您的主机文件

```
162.18.17.55      HadoopMaster 
```

# php - php 永久链接，如 wordpress 永久链接

> ID：12137418
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:52:47.923
> 
> 标签：php, mysql

我想要做的是创建一个类似永久链接的系统，例如 wordpress 永久链接。

例如：

```
 $value = 'abc';
    if($query_result > 0){
       $value = 'abc1'; // if exists check abc2, abc3, abc4, abc5, etc. etc.
    } else{
      return $value
    } 
```

查询结果为搜索行数`$query_result = mysql_num_rows`

此刻我创建了这个：

```
if(!empty($_POST['ajax'])){
    if($_POST['ajax'] == 'pages'){
        echo prettyName($_POST['title']);
    }
}

function prettyName($string)
{
    $echo = strtolower(str_replace(array('  ', ' '), '-', preg_replace('/[^a-zA-Z0-9 s]/', '', trim($string))));
    $sql = "SELECT * FROM posts WHERE post_pretty = '".$echo."'";
    $res = mysql_query($sql) or die (mysql_error());
    $num = mysql_num_rows($res);
    if($num){
        $echo = $echo.'-'.pretty2($echo, $num);
    }
    return $echo;
}

function pretty2($echo,$num,$i = 1)
{
    $sql = "SELECT * FROM posts WHERE post_pretty = '".$echo.'-'.$i."'";
    $res = mysql_query($sql) or die (mysql_error());
    $num = mysql_num_rows($res);
    if($num){
        $i++;
        $i = pretty2($echo,$num,$i);
    }
    return $i;
} 
```

它有什么作用：

1.  检查`$value`( `$_POST['title']`) 是否存在
2.  转换为漂亮字符串（例如：abc = abc）
3.  检查 prettystring 是否存在 else +1（例如：abc 存在，abc-1 - abc-9999）
4.  循环 prettystring 直到免费名称不存在。

但出问题的是：

例如，如果我创建一个新帖子：

```
new post 1 name = testpage // results in testpage
new post 2 name = testpage // results in testpage-1
new post 3 name = test-page // results in testpage-2 // should be test-page 
```

如果我创建一个包含太多空格的新帖子，它也会出错，我可以用什么来删除所有空格？尝试使用 TRIM 功能，但没有奏效。还是我应该使用 javascript 来避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:56:13.700

`abc`如果 num rows 为 0 ，它将返回

```
$value = 'abc';
$query_result = mysql_query("SELECT * FROM `table`");
$num_result = mysql_num_rows($query_result);

if($num_result){
   $value = 'abc1';
} 
```

PS。尝试使用 PDO 进行下一次开发。一个很好的[教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

对于您的问题：

```
$query_result = mysql_query("SELECT `name` FROM `Table1` ORDER BY `name` DESC LIMIT 1");
$num_result = mysql_num_rows($query_result);

if($num_result){
   $row = mysql_fetch_assoc($query_result);
   $value = (int)str_replace('abc', '', $row['name']);
   $value = 'abc'.($value+1);
} 
```

# python - Mako 在 Pyramid 中逃脱问题

> ID：12137421
> 
> 赞同：6
> 
> 时间：2012-08-27T06:53:05.607
> 
> 标签：python, escaping, pyramid, mako

我需要将 javascript 函数放入 mako 模板。这个函数的第一个参数是字符串，所以我写在我的 *.mako 文件 (dict(field_name='geom')) 中：

```
init_map(
    '${field_name}'
); 
```

但是当我看到我的 html 页面时，它看起来像：

```
init_map(
    &#39;geom&#39;
) 
```

在这种情况下如何禁用转义？

渲染执行以下方式：

```
from pyramid.renderers import render
render('georenderer/map.mako', template_args) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:59:47.757

我认为你需要在你的表达中包含引号。您可以使用该`json`模块输出有效的 JavaScript 文字：

```
dict(field_name=json.dumps('geom')) 
```

并在您的模板中：

```
init_map(
    ${field_name | n}
); 
```

然后由`.dumps()`函数生成引号，`| n`过滤器确保它们不会被转义；你已经让你的值 JavaScript 安全了，你也不需要它们 HTML 安全的。

额外的好处是该模块也将转义 JavaScript 值中的任何引号，并正确处理 unicode：

```
>>> import json
>>> print json.dumps(u'Quotes and unicode: " \u00d8')
"Quotes and unicode: \" \u00d8" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:48:52.210

试试`n`过滤器。根据[文档](http://docs.makotemplates.org/en/latest/filtering.html#turning-off-filtering-with-the-n-filter)，它禁用转义（或任何其他默认过滤）：

```
${field_name | n} 
```

更新：对不起，我没有注意到引号在表达式*周围。*现在看起来很奇怪......

# sql-server-2008 - SQL Server 2008 SP

> ID：12137423
> 
> 赞同：0
> 
> 时间：2012-08-27T06:53:19.060
> 
> 标签：sql-server-2008, tsql, stored-procedures

我有两张桌子`actual`和`forecast`

**实际的**

```
 month    actual 
  6          20
  7          60
  8          70 
```

和**预测**

```
 month        forecast
   9             50
  10             150
  11             85 
```

我必须在同一列中更新它，即在数据可用之前，它应该从实际表中更新，当数据不可用时，它应该从预测表中更新。

```
 month      actual/forecast
   6                20
   7                60
   8                70
   9                50
  10                150
  11                85 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:23:06.667

I'd do something like the following. The Source column is only for your test purposes. I'm also assuming that you might require some year or something included in your queries if your data spans multiple years.

```
SELECT month, actual as 'actual/forecast', 'A' as Source FROM Actual
UNION
SELECT month, forecast as 'actual/forecast', 'F' As Source FROM Forecast
WHERE month NOT IN (SELECT month FROM Actual) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:08:40.327

也许这会有所帮助

```
WITH T AS(
    SELECT COUNT(*) FROM (SELECT month,actual FROM Actual
    UNION ALL
    SELECT MONTH,forecast FROM Forecast)
)

IF (SELECT COUNT(*) FROM T) = 0
BEGIN
--UPDATE here forecast TABLE 
END
ELSE
--UPDATE here T table 
```

# javascript-events - 在 Chrome 中无法聚焦

> ID：12137424
> 
> 赞同：0
> 
> 时间：2012-08-27T06:53:25.363
> 
> 标签：javascript-events

我正在检查我的项目的浏览器兼容性。我在按钮的 OnFocus 事件上调用一个函数。该代码正在为除 Chrome 之外的所有其他浏览器执行。但如果我在文本字段的 OnFocus 事件上调用相同的函数，则意味着它也在 Chrome 中执行。谁能帮我解决这个问题？如何在按钮的 onfocus 事件上调用函数（应在 Chrome 中执行）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:41:05.413

`focus`这是一个使用两种方法监视事件的示例：通过`addEventListener`函数和通过`onfocus`元素属性。

```
<script>
function onfocused(ev){
 document.getElementById('si').textContent=ev.target.id;
}
onload=function(){
 document.getElementById('einput').addEventListener('focus', onfocused, false);
 document.getElementById('ebutton').addEventListener('focus', onfocused, false);
};
</script>

<div id=si>?</div>
<br />
<br />
Via addEventListener:
<input id=einput type=button value="einput" />
<button id=ebutton>ebutton</button>
<br />
<br />
Via onfocus attribute:
<input id=iinput type=button value="iinput" onfocus="onfocused(event)" />
<button id=ibutton onfocus="onfocused(event)">ibutton</button> 
```

# nginx - 无法从 Nginx php - 基于 fpm 的 dedi 发送电子邮件？

> ID：12137426
> 
> 赞同：3
> 
> 时间：2012-08-27T06:53:28.370
> 
> 标签：nginx, php, dedicated-server

我有一个网站，它有联系页面。在该页面中有电子邮件和评论选项卡。每当有人将他的电子邮件和评论并单击提交邮件时，都应该发送到我的电子邮件。但它不工作。

我正在将此 php 文件用于邮件功能。

我在我的专用服务器中安装了 nginx 和 php - fpm。

```
<?php
/*
This first bit sets the email address that you want the form to be submitted to.
You will need to change this value to a valid email address that you can access.
*/
$webmaster_email = "myemail@yahoo.com";

/*
This bit sets the URLs of the supporting pages.
If you change the names of any of the pages, you will need to change the values here.
*/
$feedback_page = "contact.html";
$error_page = "error_message.html";
$thankyou_page = "thank_you.html";

/*
This next bit loads the form field data into variables.
If you add a form field, you will need to add it here.
*/
$email_address = $_REQUEST['email_address'] ;
$comments = $_REQUEST['comments'] ;

/*
The following function checks for email injection.
Specifically, it checks for carriage returns - typically used by spammers to inject a CC list.
*/
function isInjected($str) {
    $injections = array('(\n+)',
    '(\r+)',
    '(\t+)',
    '(%0A+)',
    '(%0D+)',
    '(%08+)',
    '(%09+)'
    );
    $inject = join('|', $injections);
    $inject = "/$inject/i";
    if(preg_match($inject,$str)) {
        return true;
    }
    else {
        return false;
    }
}

// If the user tries to access this script directly, redirect them to the feedback form,
if (!isset($_REQUEST['email_address'])) {
header( "Location: $feedback_page" );
}

// If the form fields are empty, redirect to the error page.
elseif (empty($email_address) || empty($comments)) {
header( "Location: $error_page" );
}

// If email injection is detected, redirect to the error page.
elseif ( isInjected($email_address) ) {
header( "Location: $error_page" );
}

// If we passed all previous tests, send the email then redirect to the thank you page.
else {
mail( "$webmaster_email", "Feedback Form Results",
  $comments, "From: $email_address" );
header( "Location: $thankyou_page" );
}
?> 
```

但是邮件没有发送到我的电子邮件。当我有 apache 时它正在工作。我是 nginx 新手。那么我怎样才能使它适用于nginx。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:38:07.547

有了使用 mail() 函数的非常好的替代方法。

配置见最后一个函数。

```
<?php

  class Xmail{

    # LOG VAR
    public $log = Array();

    # NEW LINE
    private $line = "\r\n";

    # ATTACHED FILES
    public $files = Array();

    # CONFIG GENERAL
    private $tpl = "";
    private $mode = "mail";

    function setTPL($value) { if($value != "") $this->tpl = $value; }
    function setMODE($value) { if($value != "") $this->mode = $value; }

    # CONFIG SMTP
    private $smtp_host = "localhost";
    private $smtp_port = "25";
    private $smtp_username = "";
    private $smtp_password = "";

    function setSmtpHost($value) { if($value != "") $this->smtp_host = $value; }
    function setSmtpPort($value) { if($value != "") $this->smtp_port = $value; }
    function setSmtpUser($value) { if($value != "") $this->smtp_username = $value; }
    function setSmtpPass($value) { if($value != "") $this->smtp_password = $value; }

    # CONFIG SOCKET
    private $from = "sokmail@localhost"; // sender email address
    private $host = "localhost"; // your domain name here
    private $port = "25"; // it is always 25 but i think it's best to have this for tests when developper pc has port 25 blocked and server has alternate port [i use 26 cause 25 is locked for anti SPAM by ISP]
    private $time = "30"; // timeout [time short :D]
    private $test = false; // test mode, does not send the email but you can see the log up to the point of sending email, good to check email addresses if valid or server if black-listed

    function setFrom($value) { if($value != "") $this->from = $value; }
    function setHost($value) { if($value != "") $this->host = $value; }
    function setPort($value) { if($value != "") $this->port = $value; }
    function setTime($value) { if($value != "") $this->time = $value; }
    function setTest($value) { if($value != "") $this->test = $value; }

    # MAIN FUNCTION
    function mail($to, $subject, $msg, $headers, $attachments = NULL) {

      # MESSAGE HTML
      $msg = str_replace("\'","'",$msg);
      $msg = str_replace('\"','"',$msg);

      # Use template if case
      if(is_file($this->tpl)){
        $html = implode("", file($this->tpl));
        $html = str_replace("{MESSAGE}", $msg, $html);
      }else
       $html = $msg;

      $boundary1 = '-----='.md5(uniqid(rand()));
      $boundary2 = '-----='.md5(uniqid(rand()));

      $message .= "\r\nThis is a multi-part message in MIME format.\r\n\r\n";
      $message .= "--".$boundary1."\r\n";
      $message .= "Content-Type: multipart/alternative;\r\n      boundary=\"$boundary2\"\r\n\r\n";

      # MESSAGE TEXT
      $message .= "--".$boundary2."\r\n";
      $message .= "Content-Type: text/plain;\r\n      charset=\"UTF-8\"\r\n";
      $message .= "Content-Transfer-Encoding: 7bit\r\n";
      $message .= strip_tags($msg) . "\r\n";
      $message .= "\r\n\r\n";

      # MESSAGE HTML
      $message .= "--".$boundary2."\r\n";
      $message .= "Content-Type: text/html;\r\n      charset=\"UTF-8\"\r\n";
      $message .= "Content-Transfer-Encoding: quoted-printable\r\n\r\n";
      $message .= "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\">\r\n";
      $message .= "<html>\r\n";
      $message .= "<body>\r\n";
      $message .= str_replace("
", "<br/>", $html) . "<br/>\r\n";
      $message .= "</body>\r\n";
      $message .= "</html>\r\n\r\n";
      $message .= "--".$boundary2."--\r\n\r\n";

      if(is_array($attachments)) {
        foreach($attachments AS $file_url) {
          if(is_file($file_url)) {
            $file_name = pathinfo($file_url, PATHINFO_BASENAME);
            $file_type = $this->find_mime(pathinfo($file_url, PATHINFO_EXTENSION));

            # ATTACHMENT
            $message .= "--".$boundary1."\r\n";
            $message .= "Content-Type: ".$file_type.";\r\n      name=\"$file_name\"\r\n";
            $message .= "Content-Transfer-Encoding: base64\r\n";
            $message .= "Content-Disposition: attachment;\r\n      filename=\"$file_name\"\r\n\r\n";

            $fp = fopen($file_url, 'r');
            do {
              $data = fread($fp, 8192);
              if (strlen($data) == 0) break;
              $content .= $data;
            }
            while (true);
            $content_encode = chunk_split(base64_encode($content));
            $message .= $content_encode."\r\n\r\n";
            $content = '';
            unset($content); 

          }
        }
      }
      $message .= "--".$boundary1."--\r\n\r\n";

      $headers .= "MIME-Version: 1.0\r\n";
      $headers .= "Content-Type: multipart/mixed;\r\n      boundary=\"$boundary1\"\r\n";

      if($this->mode == "smtp" || $this->mode == "mx")
       return $this->sokmail($to, $subject, $message, $headers);
      else {
        if(mail($to, $subject, $message, $headers)) return true;
        return false;
      }
    }

    # send mail directly to destination MX server
    function sokmail($to, $subject, $message, $headers) {
      // get server based on mode
      if($this->mode == "mx") {
        list($user, $domain) = split("@",$to);
        getmxrr($domain, $mxhosts);
        $server = $mxhosts['0'];
      }else{
        $server = $this->smtp_host;
      }

      # open socket
      $socket = @fsockopen($server, $this->port, $errno, $errstr, $this->time);
      if(empty($socket)) { return false; }
      if($this->parse_response($socket, 220, "SOCKET") != 220) { fclose($socket); return false; }

      # say HELO to our little friend
      fputs($socket, "EHLO " . $this->host . $this->line);
      if($this->parse_response($socket, 250, "HELO") != 250) { fclose($socket); return false; }

      # if SMTP
      if($this->mode == "smtp" && !empty($this->smtp_username) && !empty($this->smtp_password) ) {
        # start login
        fputs($socket, "AUTH LOGIN" . $this->line);
        if($this->parse_response($socket, 334, "AUTH LOGIN") != 334) { fclose($socket); return false; }

        fputs($socket, base64_encode($this->smtp_username) . $this->line);
        if($this->parse_response($socket, 334, "USERNAME") != 334) { fclose($socket); return false; }

        fputs($socket, base64_encode($this->smtp_password) . $this->line);
        if($this->parse_response($socket, 235, "PASSWORD") != 235) { fclose($socket); return false; }
      }

      # email from
      fputs($socket, "MAIL FROM: <" . $this->from . ">" . $this->line);
      if($this->parse_response($socket, 250, "MAIL FROM") != 250) { fclose($socket); return false; }

      # email to
      fputs($socket, "RCPT TO: <" . $to . ">" . $this->line);
      if($this->parse_response($socket, 250, "RCPT TO") != 250) { fclose($socket); return false; }

      # check for test mode
      if($this->test != true) {

        # send data start command
        fputs($socket, "DATA" . $this->line);
        if($this->parse_response($socket, 354, "DATA") != 354) { fclose($socket); return false; }

        # make the deposit :)
        fputs($socket, "Subject: " . $subject . $this->line);
        fputs($socket, "To: " . $to . $this->line);
        fputs($socket, $headers . $this->line);
        fputs($socket, $message . $this->line);
        fputs($socket, "." . $this->line); # this line sends a dot to mark the end of message
        if($this->parse_response($socket, 250, ".") != 250) { fclose($socket); return false; }
      }

      # say goodbye
      fputs($socket,"QUIT" . $this->line);
      $this->parse_response($socket, 221, "QUIT");
      fclose($socket);

      return true;
    }

    # parse server responces for above function
    function parse_response($socket, $expected, $cmd) {
      $response = '';
      $this->log[$cmd] = "";
      while (substr($response, 3, 1) != ' ') {
        if(!($response = fgets($socket, 256))) $this->log["ERROR RESPONSE"] = "Couldn't get mail server response codes.";
        else $this->log[$cmd] .= $response;
        # for security we break the loop after 10 cause this should not happen ever
        $i++;
        if($i == 10) return false;
      }

      # shows an error if expected code not received
      if(substr($response, 0, 3) != $expected) $this->log["ERROR CODES"] = "Ran into problems sending Mail. Received: " . substr($response, 0, 3) . ".. but expected: " . $expected;

      # access denied..quit
      if(substr($response, 0, 3) == 451) $this->log["ERROR QUIT"] = "Server declined access. Quitting.";

      return substr($response, 0, 3);
    }

    function find_mime($ext) {
      # create mimetypes array
      $mimetypes = $this->mime_array();

      # return mime type for extension
      if (isset($mimetypes[$ext])) {
        return $mimetypes[$ext];
      # if the extension wasn't found return octet-stream         
      } else {
        return 'application/octet-stream';
      }
    } 
    function mime_array() {
      return array(
        "ez" => "application/andrew-inset",
        "hqx" => "application/mac-binhex40",
        "cpt" => "application/mac-compactpro",
        "doc" => "application/msword",
        "bin" => "application/octet-stream",
        "dms" => "application/octet-stream",
        "lha" => "application/octet-stream",
        "lzh" => "application/octet-stream",
        "exe" => "application/octet-stream",
        "class" => "application/octet-stream",
        "so" => "application/octet-stream",
        "dll" => "application/octet-stream",
        "oda" => "application/oda",
        "pdf" => "application/pdf",
        "ai" => "application/postscript",
        "eps" => "application/postscript",
        "ps" => "application/postscript",
        "smi" => "application/smil",
        "smil" => "application/smil",
        "wbxml" => "application/vnd.wap.wbxml",
        "wmlc" => "application/vnd.wap.wmlc",
        "wmlsc" => "application/vnd.wap.wmlscriptc",
        "bcpio" => "application/x-bcpio",
        "vcd" => "application/x-cdlink",
        "pgn" => "application/x-chess-pgn",
        "cpio" => "application/x-cpio",
        "csh" => "application/x-csh",
        "dcr" => "application/x-director",
        "dir" => "application/x-director",
        "dxr" => "application/x-director",
        "dvi" => "application/x-dvi",
        "spl" => "application/x-futuresplash",
        "gtar" => "application/x-gtar",
        "hdf" => "application/x-hdf",
        "js" => "application/x-javascript",
        "skp" => "application/x-koan",
        "skd" => "application/x-koan",
        "skt" => "application/x-koan",
        "skm" => "application/x-koan",
        "latex" => "application/x-latex",
        "nc" => "application/x-netcdf",
        "cdf" => "application/x-netcdf",
        "sh" => "application/x-sh",
        "shar" => "application/x-shar",
        "swf" => "application/x-shockwave-flash",
        "sit" => "application/x-stuffit",
        "sv4cpio" => "application/x-sv4cpio",
        "sv4crc" => "application/x-sv4crc",
        "tar" => "application/x-tar",
        "tcl" => "application/x-tcl",
        "tex" => "application/x-tex",
        "texinfo" => "application/x-texinfo",
        "texi" => "application/x-texinfo",
        "t" => "application/x-troff",
        "tr" => "application/x-troff",
        "roff" => "application/x-troff",
        "man" => "application/x-troff-man",
        "me" => "application/x-troff-me",
        "ms" => "application/x-troff-ms",
        "ustar" => "application/x-ustar",
        "src" => "application/x-wais-source",
        "xhtml" => "application/xhtml+xml",
        "xht" => "application/xhtml+xml",
        "zip" => "application/zip",
        "au" => "audio/basic",
        "snd" => "audio/basic",
        "mid" => "audio/midi",
        "midi" => "audio/midi",
        "kar" => "audio/midi",
        "mpga" => "audio/mpeg",
        "mp2" => "audio/mpeg",
        "mp3" => "audio/mpeg",
        "aif" => "audio/x-aiff",
        "aiff" => "audio/x-aiff",
        "aifc" => "audio/x-aiff",
        "m3u" => "audio/x-mpegurl",
        "ram" => "audio/x-pn-realaudio",
        "rm" => "audio/x-pn-realaudio",
        "rpm" => "audio/x-pn-realaudio-plugin",
        "ra" => "audio/x-realaudio",
        "wav" => "audio/x-wav",
        "pdb" => "chemical/x-pdb",
        "xyz" => "chemical/x-xyz",
        "bmp" => "image/bmp",
        "gif" => "image/gif",
        "ief" => "image/ief",
        "jpeg" => "image/jpeg",
        "jpg" => "image/jpeg",
        "jpe" => "image/jpeg",
        "png" => "image/png",
        "tiff" => "image/tiff",
        "tif" => "image/tif",
        "djvu" => "image/vnd.djvu",
        "djv" => "image/vnd.djvu",
        "wbmp" => "image/vnd.wap.wbmp",
        "ras" => "image/x-cmu-raster",
        "pnm" => "image/x-portable-anymap",
        "pbm" => "image/x-portable-bitmap",
        "pgm" => "image/x-portable-graymap",
        "ppm" => "image/x-portable-pixmap",
        "rgb" => "image/x-rgb",
        "xbm" => "image/x-xbitmap",
        "xpm" => "image/x-xpixmap",
        "xwd" => "image/x-windowdump",
        "igs" => "model/iges",
        "iges" => "model/iges",
        "msh" => "model/mesh",
        "mesh" => "model/mesh",
        "silo" => "model/mesh",
        "wrl" => "model/vrml",
        "vrml" => "model/vrml",
        "css" => "text/css",
        "html" => "text/html",
        "htm" => "text/html",
        "asc" => "text/plain",
        "txt" => "text/plain",
        "rtx" => "text/richtext",
        "rtf" => "text/rtf",
        "sgml" => "text/sgml",
        "sgm" => "text/sgml",
        "tsv" => "text/tab-seperated-values",
        "wml" => "text/vnd.wap.wml",
        "wmls" => "text/vnd.wap.wmlscript",
        "etx" => "text/x-setext",
        "xml" => "text/xml",
        "xsl" => "text/xml",
        "mpeg" => "video/mpeg",
        "mpg" => "video/mpeg",
        "mpe" => "video/mpeg",
        "qt" => "video/quicktime",
        "mov" => "video/quicktime",
        "mxu" => "video/vnd.mpegurl",
        "avi" => "video/x-msvideo",
        "movie" => "video/x-sgi-movie",
        "ice" => "x-conference-xcooltalk"
      );
    } 
  }

  # PHP does not have getmxr function on windows so I built one
  function win_getmxrr($hostname, &$mxhosts, &$mxweight=false) {
    if (strtoupper(substr(PHP_OS, 0, 3)) != 'WIN') return;
    if (!is_array ($mxhosts) ) $mxhosts = array();
    if (empty($hostname)) return;
    $exec='nslookup -type=MX '.escapeshellarg($hostname);
    @exec($exec, $output);
    if (empty($output)) return;
    $i=-1;
    foreach ($output as $line) {
      $i++;
      if (preg_match("/^$hostname\tMX preference = ([0-9]+), mail exchanger = (.+)$/i", $line, $parts)) {
        $mxweight[$i] = trim($parts[1]);
        $mxhosts[$i] = trim($parts[2]);
      }
      if (preg_match('/responsible mail addr = (.+)$/i', $line, $parts)) {
        $mxweight[$i] = $i;
        $mxhosts[$i] = trim($parts[1]);
      }
    }
    return ($i!=-1);
  }

  if (!function_exists('getmxrr')) {
    function getmxrr($hostname, &$mxhosts, &$mxweight=false) {
      return win_getmxrr($hostname, $mxhosts, $mxweight);
    }
  }

  function xmail($to, $subject, $message, $headers="", $attachments=""){
    $xmail = new Xmail();
    $xmail->setMODE("mx"); // default is mail; options: mail,smtp,mx

    // MX setup if in 'mx' mode
    $xmail->setFrom("someone@somedomain.com");
    $xmail->setHost($_SERVER['HTTP_HOST']);

    // SMTP SETUP if in 'smtp' mode
    $xmail->setSmtpHost("localhost");
    $xmail->setSmtpPort(25);
    $xmail->setSmtpUser("someuser");
    $xmail->setSmtpPass("somepassword");

    // from this point on you have to provide the same info as if you would use mail()
    if($headers == "")
     $headers = "From: <someone@somedomain.com>\r\n";

    // !!! DO NOT ADD MIME VERSION OR CONTENT TYPE HEADERS !!!

    // send the email
    $xmail->mail($to, $subject, $message, $headers, $attachments);
  }

?> 
```

# c++ - 是否有为 mac 和 win 应用程序创建和上传故障转储的服务？

> ID：12137427
> 
> 赞同：2
> 
> 时间：2012-08-27T06:53:29.107
> 
> 标签：c++, xcode, visual-studio-2010, debugging, remote-debugging

我有一个适用于 Mac OSX 和 Windows 的跨平台桌面 C++ 应用程序，我想在用户计算机上发生崩溃时收集调试信息，以便找出问题所在并修复我的代码。在 Windows 上，我使用 Visual Studio Express 2010，在 Mac 上，我使用 Xcode 3 作为 IDE。我记得一个在线服务，您可以在其中注册并将您的代码与库链接，因此该应用程序会将崩溃信息上传到该服务，然后您可以使用它来修复该应用程序，但在谷歌搜索后我找不到它了10分钟。任何人都可以帮忙吗？

谢谢！乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:05:52.910

请[在此处](http://code.google.com/p/google-breakpad/)查看 google-breakpad 项目。我认为这就是你所需要的。我打算将它用于一个项目，所以我研究了它，但后来项目结束了，所以我没有机会。您将程序与它链接起来，当程序崩溃时，它会生成一个与任何特定于平台的故障转储格式都不兼容但有自己的格式的故障转储。然后，您可以使用作为 breakpad 项目一部分的程序来分析它们。据我记得，还有一个可以安装的服务，可以上传故障转储。然后，该服务可以按原因等对其进行分析和分组。

希望有帮助。

# java - Java GregorianCalendar 更改时区

> ID：12137428
> 
> 赞同：7
> 
> 时间：2012-08-27T06:53:29.757
> 
> 标签：java, date, timezone

我正在尝试设置 HOUR_OF_DAY 字段并更改 GregorianCalendar 日期对象的时区。

```
GregorianCalendar date = new GregorianCalendar(TimeZone.getTimeZone("GMT+10"));
System.out.println("HOUR: " + date.get(Calendar.HOUR_OF_DAY));
date.set(Calendar.HOUR_OF_DAY, 23);
//date.get(Calendar.HOUR_OF_DAY);
date.setTimeZone(TimeZone.getTimeZone("GMT"));
System.out.println("HOUR: " + date.get(Calendar.HOUR_OF_DAY)); 
```

输出：

```
HOUR: 16
HOUR: 23 
```

由于某些原因，设置不同时区后 HOUR_OF_DAY 的值不会改变。但是，如果我取消注释 date.get 的 HOUR_OF_DAY，一切正常

```
GregorianCalendar date = new GregorianCalendar(TimeZone.getTimeZone("GMT+10"));
System.out.println("HOUR: " + date.get(Calendar.HOUR_OF_DAY));
date.set(Calendar.HOUR_OF_DAY, 23);
date.get(Calendar.HOUR_OF_DAY); // uncommenting this line will is changing the output
date.setTimeZone(TimeZone.getTimeZone("GMT"));
System.out.println("HOUR: " + date.get(Calendar.HOUR_OF_DAY)); 
```

输出：

```
HOUR: 16
HOUR: 13 
```

这怎么可能？为什么 .get 方法正在改变对象的行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T23:54:04.990

该类[`GregorianCalendar`](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html)从 继承其[`get`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#get%28int%29)方法`Calendar`，具有以下副作用：

> 在宽松模式下，所有日历字段都被规范化。

这意味着在对象上调用`time`时会重新计算值和所有字段。这可能会导致一些不可预知的行为，尤其是与 结合使用时，它本身就有一些[记录在案的错误行为](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4827490)。`get``Calendar``setTimeZone`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-15T06:51:46.610

# bash - 测试命令是否输出空字符串

> ID：12137431
> 
> 赞同：322
> 
> 时间：2012-08-27T06:53:37.597
> 
> 标签：bash, shell

如何测试命令是否输出空字符串？

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2012-08-27T07:00:15.340

[之前的问题是问如何查看目录下是否有文件。以下代码实现了这一点，但请参阅[rsp 的答案](https://stackoverflow.com/a/35165216/58635)以获得更好的解决方案。]

* * *

## 空输出

命令不*返回*值——它们输出它们。您可以使用*[命令替换](http://mywiki.wooledge.org/CommandSubstitution)*来捕获此输出；例如`$(ls -A)`。您可以像这样在 Bash 中测试非空字符串：

```
if [[ $(ls -A) ]]; then
    echo "there are files"
else
    echo "no files found"
fi 
```

请注意，我使用了`-A`而不是`-a`，因为它省略了符号 current ( `.`) 和 parent ( `..`) 目录条目。

**注意：**正如评论中指出的那样，命令替换**不会捕获尾随换行符**。因此，如果命令*仅*输出换行符，则替换将不捕获任何内容，并且测试将返回 false。虽然不太可能，但在上面的示例中这是可能的，因为单个换行符是一个有效的文件名！[此答案](https://stackoverflow.com/a/15184414/58635)中的更多信息。

* * *

## 退出代码

如果要检查命令是否成功完成，可以检查`$?`，其中包含最后一个命令的退出代码（成功为零，失败为非零）。例如：

```
files=$(ls -A)
if [[ $? != 0 ]]; then
    echo "Command failed."
elif [[ $files ]]; then
    echo "Files found."
else
    echo "No files found."
fi 
```

更多信息[在这里](http://www.tldp.org/LDP/abs/html/exit-status.html)。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2016-02-02T22:42:52.977

# TL;博士

### `if [[ $(ls -A | head -c1 | wc -c) -ne 0 ]]; then ...; fi`

感谢**netj** 提出改进我原来的建议：
`if [[ $(ls -A | wc -c) -ne 0 ]]; then ...; fi`

* * *

这是一个老问题，但我看到至少有两件事需要改进或至少需要澄清。

## 第一个问题

我看到的第一个问题是这里提供的大多数示例**根本不起作用**。他们使用`ls -al`and`ls -Al`命令——这两个命令都在空目录中输出非空字符串。这些示例**总是**报告**即使没有**文件也有文件。

出于这个原因，你应该只使用`ls -A`- 当你想要的只是测试是否有任何输出时，为什么有人要使用`-l`表示“使用长列表格式”的开关？

所以这里的大多数答案都是不正确的。

## 第二个问题

第二个问题是，虽然**有些**答案可以正常工作（那些**不**使用`ls -al`或相反的答案），`ls -Al`但`ls -A`它们都做这样的事情：

1.  运行命令
2.  在 RAM 中缓冲其整个输出
3.  将输出转换成一个巨大的单行字符串
4.  将该字符串与空字符串进行比较

我建议做的是：

1.  运行命令
2.  计算其输出中的字符而不存储它们
    *   甚至更好 - 计算最多 1 个字符的数量`using head -c1`
        （感谢**netj**在下面的评论中发布这个想法）
3.  将该数字与零进行比较

因此，例如，而不是：

```
if [[ $(ls -A) ]] 
```

我会使用：

```
if [[ $(ls -A | wc -c) -ne 0 ]]
# or:
if [[ $(ls -A | head -c1 | wc -c) -ne 0 ]] 
```

代替：

```
if [ -z "$(ls -lA)" ] 
```

我会使用：

```
if [ $(ls -lA | wc -c) -eq 0 ]
# or:
if [ $(ls -lA | head -c1 | wc -c) -eq 0 ] 
```

等等。

对于小输出，这可能不是问题，但对于较大的输出，差异可能很大：

```
$ time [ -z "$(seq 1 10000000)" ]

real    0m2.703s
user    0m2.485s
sys 0m0.347s 
```

将其与：

```
$ time [ $(seq 1 10000000 | wc -c) -eq 0 ]

real    0m0.128s
user    0m0.081s
sys 0m0.105s 
```

甚至更好：

```
$ time [ $(seq 1 10000000 | head -c1 | wc -c) -eq 0 ]

real    0m0.004s
user    0m0.000s
sys 0m0.007s 
```

## 完整示例

Will Vousden 回答的更新示例：

```
if [[ $(ls -A | wc -c) -ne 0 ]]; then
    echo "there are files"
else
    echo "no files found"
fi 
```

**根据netj**的建议再次更新：

```
if [[ $(ls -A | head -c1 | wc -c) -ne 0 ]]; then
    echo "there are files"
else
    echo "no files found"
fi 
```

**jakeonfire**的附加更新：

`grep`如果没有匹配，将失败退出。我们可以利用这一点稍微简化语法：

```
if ls -A | head -c1 | grep -E '.'; then
    echo "there are files"
fi

if ! ls -A | head -c1 | grep -E '.'; then
    echo "no files found"
fi 
```

## 丢弃空格

如果您正在测试的命令可能会输出一些您希望将其视为空字符串的空格，则不要：

```
| wc -c 
```

你可以使用：

```
| tr -d ' \n\r\t ' | wc -c 
```

或与`head -c1`：

```
| tr -d ' \n\r\t ' | head -c1 | wc -c 
```

或类似的东西。

## 概括

1.  首先，使用有效的**命令**。

2.  其次，避免在 RAM 中进行不必要的存储和处理潜在的巨大数据。

答案没有说明输出总是很小，因此也需要考虑大输出的可能性。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-08-27T07:00:34.193

```
if [ -z "$(ls -lA)" ]; then
  echo "no files found"
else
  echo "There are files"
fi 
```

这将运行命令并检查返回的输出（字符串）的长度是否为零。您可能需要查看[“测试”手册页](https://linux.die.net/man/1/test)中的其他标志。

在要检查的参数周围使用“”，否则空结果将导致语法错误，因为没有给出第二个参数（要检查）！

注意：`ls -la`总是返回`.`，`..`所以使用它不起作用，请参阅[ls 手册页](https://linux.die.net/man/1/ls)。此外，虽然这看起来既方便又容易，但我想它很容易坏掉。编写一个根据结果返回 0 或 1 的小脚本/应用程序更可靠！

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-08-26T01:12:50.543

对于那些想要一个优雅的、独立于 bash 版本的解决方案的人（实际上应该在其他现代 shell 中工作）以及那些喜欢使用单行代码来完成快速任务的人。开始了！

```
ls | grep . && echo 'files found' || echo 'files not found' 
```

（注意作为提到的评论之一，`ls -al`事实上，只是`-l`并且`-a`都会返回一些东西，所以在我的回答中我使用简单`ls`

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2014-05-08T04:25:39.587

[Bash 参考手册](http://www.gnu.org/software/bash/manual/bashref.html)

### [6.4 Bash 条件表达式](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)

```
-z string
     True if the length of string is zero.

-n string
string
     True if the length of string is non-zero. 
```

您可以使用速记版本：

```
if [[ $(ls -A) ]]; then
  echo "there are files"
else
  echo "no files found"
fi 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-08-27T07:00:29.917

正如 Jon Lin 所说，`ls -al`将始终输出 (for `.`and `..`)。你想`ls -Al`避免这两个目录。

例如，您可以将命令的输出放入 shell 变量中：

```
v=$(ls -Al) 
```

一个较旧的、不可嵌套的符号是

```
v=`ls -Al` 
```

但我更喜欢可嵌套的符号`$(`...`)`

您可以测试该变量是否为非空

```
if [ -n "$v" ]; then
    echo there are files
else
    echo no files
fi 
```

你可以将两者结合为`if [ -n "$(ls -Al)" ]; then`

有时，`ls`可能是一些 shell[别名](https://www.gnu.org/software/bash/manual/html_node/Aliases.html)。您可能更喜欢使用`$(/bin/ls -Al)`. 请参阅[ls(1)](https://man7.org/linux/man-pages/man1/ls.1.html)和[hier(7)](https://man7.org/linux/man-pages/man7/hier.7.html)和[environ(7)](https://man7.org/linux/man-pages/man7/environ.7.html)以及您的`~/.bashrc`（如果您的外壳是[GNU bash](https://www.gnu.org/software/bash/)；我的交互式外壳是[zsh](https://zsh.org/)，定义在`/etc/passwd`- 请参阅[passwd(5)](https://man7.org/linux/man-pages/man5/passwd.1.html)和[chsh(1)](https://man7.org/linux/man-pages/man1/chsh.1.html)）。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-08-27T07:00:04.723

我猜你想要`ls -al`命令的输出，所以在 bash 中，你会有类似的东西：

```
LS=`ls -la`

if [ -n "$LS" ]; then
  echo "there are files"
else
  echo "no files found"
fi 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-11-07T12:57:23.547

有时“某些东西”可能不会出现在**标准输出**中，而是出现在测试应用程序的**标准错误**中，所以这里是更通用的修复方法：

```
if [[ $(partprobe ${1} 2>&1 | wc -c) -ne 0 ]]; then
    echo "require fixing GPT parititioning"
else
    echo "no GPT fix necessary"
fi 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-01-14T02:36:19.673

这是针对更极端情况的解决方案：

```
if [ `command | head -c1 | wc -c` -gt 0 ]; then ...; fi 
```

这将起作用

*   对于所有 Bourne 贝壳；
*   如果命令输出全为零；
*   无论输出大小如何，都有效；

然而，

*   一旦输出任何内容，该命令或其子进程将被终止。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-05T09:12:37.750

到目前为止给出的所有答案都涉及***终止****并输出非空字符串的**命令。*

 **大多数在以下意义上被破坏：

*   它们不能正确处理仅输出换行符的命令；
*   从 Bash≥4.4 开始，如果命令输出空字节（因为它们使用命令替换），大多数将垃圾邮件标准错误；
*   大多数会啜饮完整的输出流，所以会等到命令终止后再回答。有些命令永远不会终止（尝试，例如，`yes`）。

因此，要解决所有这些问题，并有效地回答以下问题，

> 如何测试命令是否输出空字符串？

您可以使用：

```
if read -n1 -d '' < <(command_here); then
    echo "Command outputs something"
else
    echo "Command doesn't output anything"
fi 
```

`read`您还可以使用's`-t`选项添加一些超时，以测试命令是否在给定时间内输出非空字符串。例如，对于 2.5 秒的超时：

```
if read -t2.5 -n1 -d '' < <(command_here); then
    echo "Command outputs something"
else
    echo "Command doesn't output anything"
fi 
```

* * *

**评论。**如果您认为需要确定命令是否输出非空字符串，那么您很可能遇到了 XY 问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-27T11:20:29.760

这是另一种方法，它将某些命令的 std-out 和 std-err 写入临时文件，然后检查该文件是否为空。这种方法的一个好处是它捕获了两个输出，并且不使用子外壳或管道。后面的这些方面很重要，因为它们会干扰捕获 bash 退出处理（例如[这里](https://stackoverflow.com/questions/1221833/pipe-output-and-capture-exit-status-in-bash)）

```
tmpfile=$(mktemp)
some-command  &> "$tmpfile"
if [[ $? != 0 ]]; then
    echo "Command failed"
elif [[ -s "$tmpfile" ]]; then
    echo "Command generated output"
else
    echo "Command has no output"
fi
rm -f "$tmpfile" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-28T10:35:18.690

有时您想保存输出，如果它是非空的，则将其传递给另一个命令。如果是这样，你可以使用类似的东西

```
list=`grep -l "MY_DESIRED_STRING" *.log `
if [ $? -eq 0 ]
then
    /bin/rm $list
fi 
```

这样，`rm`如果列表为空，命令将不会挂起。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-15T07:29:50.897

正如[triplee 在问题评论中提到的](https://stackoverflow.com/questions/12137431/test-if-a-command-outputs-an-empty-string#comment96407098_12137431)，使用[moreutils](https://joeyh.name/code/moreutils/) `ifne`（如果输入不为空）。

`ifne -n`在这种情况下，我们想要*否定*测试：

```
ls -A /tmp/empty | ifne -n command-to-run-if-empty-input 
```

当初始命令的输出为非空时，这优于许多其他答案。`ifne`将立即开始将其写入 STDOUT，而不是缓冲整个输出然后再写入，如果初始输出生成缓慢或非常长并且会溢出 shell 变量的最大长度，这一点很重要。

moreutils 中有一些实用程序可以说应该在 coreutils 中——如果你花很多时间住在 shell 中，它们值得一试。

OP 特别感兴趣的可能是`dirempty/exists`在撰写本文时仍在考虑中的工具，并且已经有一段时间了（它可能会使用凹凸）。**

# android - UDP传输在某个时间后停止

> ID：12137433
> 
> 赞同：2
> 
> 时间：2012-08-27T06:53:42.753
> 
> 标签：android, network-programming, udp

好的，这是我的问题。我有一个 android 应用程序根据用户与 android 设备的交互将 UDP 数据包传输到 PC（一个侦听数据包的 java 程序）。为简单起见，假设这种情况正在发生——用户点击手机屏幕，它会发送一个带有用户点击点坐标的 UDP 数据包。侦听器程序接收并读取此数据包，并使用 输出接收到的字符串`System.out.println()`。

现在，正在发生的事情是该程序对于前几个数据包运行良好。然后它停止工作，就像桌面上的侦听器程序不显示任何输出一样。现在，问题可能与传输有关，因为我在应用程序上有一个文本标签（用于测试目的），显示正在传输的内容，因此传输数据包肯定是正确构建的。但是我不知道如何理解这是发送数据（在android设备端）还是接收（在桌面端）的问题。如何找出问题所在并解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:53:07.757

您使用的是本机代码还是 Java 类？我已经尝试了这两种方法，并且使用 NDK（即，作为从 Java 调用的 C 函数编写的套接字）我在服务器端看到了不稳定的行为，主要是由于线程问题。但是，使用 Java Socket 类我没有遇到问题。此外，如果您的 Android 应用程序是客户端，那应该不是问题。我还会使用 Wireshark 检查数据包是否到达 PC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:04:04.963

我主要使用 TCP 传输，我所做的所有 UDP 主要是复制粘贴 [:-)] 或 API

对于 TCP，在传输之后，我会抛出一个调试消息，这有助于我知道传输是否正确发生。但在这种情况下，您的 write 必须是`blocking`.

此外，您可以`Packet Tracer`在侦听器终端上使用 a 来确定它是否正确接收数据包。我喜欢的是`WireShark`（我认为它是 Ethereal 的一个分支）。它真的很容易使用。你告诉它监听哪个接口并给出一个过滤器，它会在数据包到来时列出它们。

但是，如果您使用的是 Windows 7，则需要管理员权限。

# objective-c - NSAlertPanel 问题

> ID：12137437
> 
> 赞同：0
> 
> 时间：2012-08-27T06:54:53.083
> 
> 标签：objective-c, cocoa, nsalert

我正在设计一个应用程序来远程连接到另一台计算机。我想在连接时显示一个 NSAlertPanel，但是它“阻止”远程端继续会话，直到使用通常的 NSAlertPanel 设置按下 OK。

有没有办法拥有一个非阻塞的 NSAlertPanel？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:14:21.503

当您以模态方式运行警报面板时，您会阻止关联线程的运行循环，在这种情况下，它是主线程。

要显示连接窗口，您可以使用自定义工作表。它易于使用并在下面的文档页面中进行了解释：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Sheets/Tasks/UsingCustomSheets.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Sheets/Tasks/UsingCustomSheets.html)

但是，如果您需要以模态方式运行警报，即阻止与整个应用程序交互的警报，您可能需要将连接部分移动到另一个线程，这在这两种情况下都是一个很好的做法。

# mongodb - 如何知道或计算 mongodb 分片的当前块大小？

> ID：12137441
> 
> 赞同：0
> 
> 时间：2012-08-27T06:55:00.773
> 
> 标签：mongodb

实际上我真正想问的是：块大小的集合是1M。当配置服务器关闭时，整个配置服务器都是只读的。当前集群只有一个chunk，如果我想往这个集群插入很多数据，这些数据的容量超过1M，我能成功插入这些数据吗？如果是，它是否描述了真正的块大小可以大于块大小的集合？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:00:01.070

**简短的回答：**是的，你可以，但你应该尽快修复你的配置服务器，以避免长时间不平衡你的分片。

* * *

当块达到它们的大小阈值时，块会自动拆分 -[此处说明](http://www.mongodb.org/display/DOCS/Sharding+Administration#ShardingAdministration-ChunkSizeConsiderations)。

但是，在配置服务器故障期间，无法拆分块。即使只有一台服务器出现故障。[见这里](http://www.mongodb.org/display/DOCS/Sharding+and+Failover)。

**编辑**

正如[Sergio Tulentsev 所说](https://stackoverflow.com/users/125816/sergio-tulentsev)，您应该在执行插入之前修复配置服务器。在此之前，系统的元数据将继续是只读的。

正如[Adam C](https://stackoverflow.com/users/1148648/adam-c)的链接指出的那样，如果您在修复配置服务器之前执行您描述的插入操作，您的分片将变得不平衡。

# java - Java 检查字符串中的 int 范围

> ID：12137447
> 
> 赞同：1
> 
> 时间：2012-08-27T06:55:27.290
> 
> 标签：java, string, if-statement, int

我正在尝试检查字符串中是否存在一系列数字比这更优雅的方式吗？

```
if (ccnumeric.contains("51")
    || ccnumeric.contains("52")
    || ccnumeric.contains("53")
    || ccnumeric.contains("54")
    || ccnumeric.contains("55")) 
```

我想不出任何满足这一点的方法，因为我正在检查字符串中的 int 范围。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T06:59:04.377

您可以使用简单的正则表达式：`5[12345]{1}`查找 5 后跟正好一个 1、2、3、4 或 5：

```
String s = "55";
Pattern p = Pattern.compile("5[12345]{1}");
if (p.matcher(s).find()) {
    System.out.println("Found");
} else {
    System.out.println("Not Found");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:58:34.403

也许你可以试试正则表达式。

例如

```
Pattern.matches( ".*5[1-5].*", ccnumeric ); 
```

编辑：要查找字符串中的所有数字：

```
List<Integer> allMatches = new ArrayList<Integer>();
Matcher m = Pattern.compile("(\\d+)").matcher(ccnumeric);
while (m.find()) {
   allMatches.add(Integer.parse(m.group()));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:11:37.937

您的问题有点模糊，例如字符串“541”、1(541)、3(5,4,1)、6(5,4,1,54,41,541) 中有多少个数字？取决于您如何定义您的正则表达式将发生很大变化。如果您的答案是 1，则解决方案非常简单，贪婪地搜索长度与您的最小值相同且小于或等于您的最大值的所有数字（然后您可以解析匹配项并根据最小值和最大值进行过滤） ...如果它是其他之一，那么您的解决方案将有点复杂，您基本上将不得不创建一个滑动窗口来评估字符串中所有可能的组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:43:56.723

我认为您的问题措辞含糊……您是否要检查输入字符串是否包含 51-55 范围内的数字？（您的书面文本似乎暗示了这一点）在这种情况下，字符串“512 是 2 的幂”将不匹配，因为它不包含数字 51。

或者您要检查字符串是否包含字符序列 51、52、53、54 或 55？（您的代码似乎暗示了这一点）在这种情况下，字符串“512 是 2 的幂”将是匹配项，因为它包含字符序列 51。

如果是第一个选项，那么您需要类似的东西：

```
Pattern p = Pattern.compile("(^|[^\\d])5[1-5]($|[^\\d])");
if (p.matcher(inputString).find()) {
    //The inputString contains the number you seek
} 
```

本质上，这是在寻找

*   一个字符序列 51-55
*   以字符串开头或非数字字符开头
*   后跟字符串的结尾，或非数字字符

# php - 使用php在csv文件中计数包含单词“noreply@118-bonsplans.com”和“fail”的行

> ID：12137449
> 
> 赞同：0
> 
> 时间：2012-08-27T06:55:39.763
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0

我有`acct-2012-08-24-0001.csv`如下文件：

```
noreply@118-bonsplans.com   toulouse@texa.fr    relayed
noreply@lemeilleur-duweb.com  g.dupond@libertysurf.fr   failed
noreply@118-bonsplans.com   toulouse@texa.fr    failed
noreply@lemeilleur-duweb.com  g.dupond@libertysurf.fr   relayed 
```

我只想`noreply@118-bonsplans.com toulouse@texa.fr failed`在 csv 文件中计数，但我不知道如何计数。任何知道的人请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:04:57.350

我不确定，但这可能对你有用。

```
count(preg_grep("/noreply@lemeilleur-duweb.com  g.dupond@libertysurf.fr   relayed/", file("acct-2012-08-24-0001.csv"))); 
```

您还可以使用中的`AND`条件逐个单元格地检查它`if block`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:06:20.257

使用[preg_match_all()](http://cn.php.net/preg_match_all)

```
$match = preg_match_all('/noreply@118-bonsplans.com(\s+)toulouse@texa.fr(\s+)failed/i', $csv, $matches);
echo count($matches[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:04:41.083

这是一个简单的方法来做到这一点......

```
$fp = fopen('acct-2012-08-24-0001.csv');

$count = 0;

while ($row = fgetcsv($fp)) {
    if (
        $row[0] == 'noreply@118-bonsplans.com'
        && $row[1] == 'toulouse@texa.fr'
        && $row[2] == 'failed'
    ) {
       $count++;
    }
}

echo "$count matches found";

?> 
```

# .net - 我可以使用 vs2010 开发 .net 4.5 应用吗

> ID：12137450
> 
> 赞同：14
> 
> 时间：2012-08-27T06:55:41.880
> 
> 标签：.net, visual-studio-2010, c#-4.0

我已经从[http://www.microsoft.com/en-in/download/details.aspx?id=30653安装了 .net 4.5 框架](http://www.microsoft.com/en-in/download/details.aspx?id=30653)

安装 4.5 框架后，我重新启动了机器。在 vs 2010 中，如果默认创建任何新项目，则在项目属性中分配 4.0 框架应用程序->目标框架分配为 .NET Framework 4.0。但是我想改成4.5框架。但是 4.5 框架没有列出。

我的问题是，我应该对 vs2010 中的 list 4.5 框架进行一些设置更改，还是我不能在 vs2010 中使用 .net 4.5 开发任何应用程序？

谢谢萨兰

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-27T07:13:24.413

No, you can't target .NET 4.5 with VS2010 the same way you couldn't target .NET 4.0 with VS2008\. You will need to install VS2012 if you want to target .NET 4.5.

# c++-cli - Visual C++ 2010：“未解析的令牌”LNK2020

> ID：12137455
> 
> 赞同：0
> 
> 时间：2012-08-27T06:56:27.683
> 
> 标签：c++-cli, token, linker-errors

我有一个包含两个项目的 VC++ 2010 解决方案：ProjectX 和 ProjectXTests。在当前配置中，ProjectX 构建为静态库，ProjectXTests 构建为 DLL，旨在测试 ProjectX 中的各种方法。现在，在 ProjectX 中，我有一个带有方法 getUserName() 的 User 类，如下所示：

```
// User.h
public ref class User
{
    public:
       User(String^ userName);
       String^ getUserName();
    private:
       String^ userName;
}; 
```

构造函数和方法在 User.cpp 中实现。在 ProjectXTests 中，我有一个类 UserTests，除其他外，它在 getUserNameTest() 方法中测试 getUserName() 方法。它在 UserTests.h 中声明，在 UserTests.cpp 中实现如下：

```
// UserTests.cpp
#include "UserTests.h"
#include "User.h"

void UserTests::getUserNameTest()
{
    User^ testUser = gcnew User("name");
    Assert::AreEqual("name", testUser->getUserName());
} 
```

在ProjectXTests的项目属性（Common Properties -> Framework and References）中，我添加了对ProjectX的引用。在 VC++ 目录中，我为头文件和库文件添加了适当的目录。在构建解决方案时，会找到头文件“User.h”。但是，我收到链接错误

```
error LNK2020: unresolved token (06000005) User::getUserName 
```

同样的事情发生在所有其他被测试的方法上。我只是不明白为什么会这样。到目前为止，我发现唯一可行的方法是在“UserTests.cpp”中包含文件“User.cpp”而不是“User.h”，但这似乎是作弊。有人知道我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:03:24.440

Somehow you have to include the code from `ProjectX` in `ProjectXTests`. This is not done by literally using the `#include` directive, instead the simplest is to add the source files from `ProjectX` to the `ProjectXTests` project workspace. If `ProjectX` is made as a static of dynamic library, then link with that instead.

# django - 有没有用于实时预览markdown的django应用程序？

> ID：12137459
> 
> 赞同：0
> 
> 时间：2012-08-27T06:56:37.430
> 
> 标签：django, markdown

我`django_markdown`用来在 django admin 中保存 markdown 文本。有没有更好的应用程序可以在编写时显示实时预览，就像在 stackoverflow 中一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T05:21:52.110

[http://thegoods.aj7may.com/django-bootstrap-markdown/](http://thegoods.aj7may.com/django-bootstrap-markdown/)

I developed this live preview markdown widget for Django. I Used it for my blog. I believe you could replace the textarea widget in the admin with this markdown widget.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:08:23.337

我没有注意到任何可以处理这个问题的 Django 应用程序，但是有 StackOverflow js 库（[pagedown](http://code.google.com/p/pagedown/)）可以做到这一点 - 你只需要以管理形式替换小部件。

# java - JPanel 上的 MouseEvent - 坐标错误

> ID：12137465
> 
> 赞同：4
> 
> 时间：2012-08-27T06:57:02.770
> 
> 标签：java, swing, awt, jpanel, mouseevent

我用 Java 编写了以下微型画笔程序：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

class AuxClass1 extends JFrame implements MouseListener, MouseMotionListener{

    private JPanel panel1 = new JPanel();
    private JPanel panel2 = new JPanel();
    private JLabel label1_x = new JLabel();
    private JLabel label1_y = new JLabel();
    private JLabel label1_x_info = new JLabel("");
    private JLabel label1_y_info = new JLabel("");
    //add a container keep panels with widgets 
    private Container con1 = getContentPane();

    private int xval1;
    private int yval1;

    private GridLayout layout1 = new GridLayout(2,2,2,2);

    private JOptionPane info1 = new JOptionPane();

    //get the class that controls the mouse
    public AuxClass1(){
        super("Mouse Experiment");
        panel1.setBackground(Color.WHITE);      
        panel1.setLayout(layout1);
        label1_x.setText("X Location");
        label1_x.setBorder(BorderFactory.createLineBorder(Color.BLUE, 2));
        label1_y.setBorder(BorderFactory.createLineBorder(Color.BLUE, 2));
        label1_x_info.setBorder(BorderFactory.createLineBorder(Color.RED, 2));
        label1_y_info.setBorder(BorderFactory.createLineBorder(Color.RED, 2));
        label1_y.setText("Y Location");     
        panel1.add(label1_x);
        panel1.add(label1_y);
        panel1.add(label1_x_info);
        panel1.add(label1_y_info);
        con1.add(panel1, BorderLayout.NORTH);
        panel2.setBackground(new Color(100,200,200));
        panel2.setBorder(BorderFactory.createLineBorder(new Color(255,255,0), 2));
        panel2.addMouseListener(this);
        panel2.addMouseMotionListener(this);
        con1.add(panel2, BorderLayout.CENTER);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(500, 500);
        setLocationRelativeTo(null);
        setVisible(true);

    }

    @Override
    public void mouseClicked(MouseEvent arg0) {

    }

    @Override
    public void mouseMoved(MouseEvent arg0) {
        // TODO Auto-generated method stub
        if (arg0.getSource()==panel2){
            x_var = arg0.getX();
            y_var = arg0.getY();
            label1_x_info.setText(Integer.toString(x_var));
            label1_y_info.setText(Integer.toString(y_var));
        }

    }

    @Override
    public void mouseDragged(MouseEvent e) {
        // TODO Auto-generated method stub
        if (e.getSource()==panel2){
            //info1.showMessageDialog(this, "This is an awesome Mouse toolbox!");
            xval1 = e.getX();
            yval1= e.getY();
            AuxClass2 Inst2 = new AuxClass2(xval1, yval1);
            Inst2.paintComponent(getGraphics());
            }

    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        if (arg0.getSource()==panel2){
            label1_x_info.setText("");
            label1_y_info.setText("");
        }
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

}

class AuxClass2 extends JPanel{

    //JOptionPane info2 = new JOptionPane();
    private int xval2;
    private int yval2;

    public AuxClass2(int input1, int input2){

        xval2 = input1;
        yval2 = input2;
        setSize(500,500);

    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponents(g);
        g.setColor(Color.BLUE);
        g.fillRect(xval2, yval2+70, 5, 5);  

    }

}

public class MainClass{

    private static AuxClass1 Inst1;

    public static void main(String args[]){

        Inst1 = new AuxClass1();

    }

} 
```

除了 mouseDragged 方法的 Y 坐标外，它工作正常（参见 t3_aux2 类中的 paintComponent 方法）。由于某种原因，该方法使用的 Y 坐标比 panel2 中的实际 Y 坐标小约 70 像素。我怀疑这与 t3_aux2 类中继承的 JPanel 方法有关，但不太确定。

如果有人能澄清这一点，那就太酷了。谢谢。

UPD：如果有人对如何改进样式和/或优化代码有任何建议，那也将不胜感激。

UPD2：更改了名称以符合 Java 命名约定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:12:20.230

我试过你的代码。我认为您的问题来自您使用**t3_aux2**坐标在**t3_aux1上绘画的事实。**我会尝试一些事情来确认这一点，然后我会回到这里......

 ****编辑：**好的，就是这样。

在**t3_aux1**构造函数中，如果你写

```
System.out.println("panel1 height = " + panel1.getHeight());
System.out.println("label1 height = " + label1_x.getHeight()) 
```

它打印

```
panel1 height = 42
label1 height = 20 
```

所以你的偏移量是 42 + 20 + 4*2 = 70

4*2 来自您的线条边框，粗细为 2。

由于可以计算出精确的偏移量，因此您可以动态修复它。

**编辑 2：**

事实上，您使用的坐标来自 panel2，因为 mouseListener 已附加到 panel2。但是您在 JFrame 图形上绘制，而不是在 panel2 图形上绘制。

写这个应该可以解决你的坐标问题。

```
inst2.paintComponent(panel2.getGraphics()); 
```

But as Kleopatra said, you're not doing it the right way. You should never call `getGraphics()` or `paintComponent()`. I think you should consider using `java.awt.Canvas` as a super class for your "panel2" object.

One more advice : Be aware that your drawings aren't memorized, so, if you reduce the window or hide it behind another one, everything drawn will be lost.**

# csv - Kaltura 使用 csv 文件批量上传

> ID：12137466
> 
> 赞同：0
> 
> 时间：2012-08-27T06:57:04.940
> 
> 标签：csv, kaltura

如何在 csv 文件中为 sftp 协议添加 ssh 公钥和私钥。我想使用 csv 文件批量上传到 kaltura。我的 kaltura ce4 中有一个视频。我想通过 sftp 传输协议将机制拉到 kaltura。我的文件网址是-->>sftp://ec2-user@ec2-54-245-118-246.us-west-2.compute.amazonaws.com/home/ec2-user/video.mp4

现在我必须在我的 csv 文件中提供公钥和私钥，因为它的 sftp。我不知道如何在 csv 文件中提供密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:01:49.693

要实现需要密钥身份验证的导入，您将需要使用放置文件夹而不是批量上传。 [Kaltura 放置文件夹，知识中心](http://knowledge.kaltura.com/kaltura-drop-folders)

# jquery - Jquery Slider：让它的一部分可用？

> ID：12137468
> 
> 赞同：2
> 
> 时间：2012-08-27T06:57:14.497
> 
> 标签：jquery, slider

我有一个用于选择存款期限（在银行中）的 jquery 滑块。大多数存款类型的期限范围是 1-36 个月，但其中一种 - 只有 1-12 个月。

我想保持界面统一（36 个月滑块），但使不可用的期限不可选择（它应该不可能滑动到高于 12 的值）。因此，滑块的最大值应为 36，但您可以滑动到最大值 = 12。

有没有可能？简单或棘手 - 没关系，但越简单当然越好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:06:48.667

尝试

```
$( ".selector" ).slider({
    min: 1,
    max: 36,
    value: 12,
    slide: function(event, ui) {
       if(ui.value > 12)
           return false;
       $value.text(ui.value);
    }
}); 
```

它不允许滑块超过 12。

演示在[http://jsfiddle.net/3QVUf/160/](http://jsfiddle.net/3QVUf/160/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:32:09.490

只需将文本从 13 - 36 更改为稍暗的颜色，使其看起来像已禁用，然后使用 ass 建议的跳转方法。

我确实尝试了 Snap it back 方法。 [http://jsfiddle.net/webwarrior/aLJQm/52/](http://jsfiddle.net/webwarrior/aLJQm/52/)

Slider 弹回，但报告的值仍高于 12。

现在只需要做编号位...

# python - PyQt4 - 添加文本编辑区动画示例

> ID：12137472
> 
> 赞同：2
> 
> 时间：2012-08-27T06:57:35.483
> 
> 标签：python, animation, resize, pyqt4

我已经实现了一个简单的python应用程序，上面没有任何动画。现在我想添加一个简单的动画，由信号触发（例如单击按钮），它在触发时会扩大窗口的宽度并显示一个新的文本区域，其中包含一些文本。

老实说，我对python/pyqt4还很陌生，对动画框架了解不多。

我试图将它添加到我的类代码中，例如在一个名为单击 about 菜单的方法中：)：

```
 self.anim = QPropertyAnimation(self, "size")
  self.anim.setDuration(2500)
  self.anim.setStartValue(QSize(self.width(), self.height()))
  self.anim.setEndValue(QSize(self.width()+100, self.height()))
  self.anim.start() 
```

这可以根据需要放大我的窗口。

不幸的是，我不知道如何插入一个新的文本区域，避免已经存在的小部件来填充新空间（实际上，当窗口放大时，小部件会使用所有空间，从而扩大自己）

有人可以帮我知道如何添加文本区域外观动画吗？

任何帮助表示赞赏......真的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:43:07.633

实现此目的的一种方法是为`maximumWidth`窗口和文本编辑上的属性设置动画。

主要的困难在于以一种与标准布局很好地配合，同时还允许调整窗口大小的方式来完成它。在动画期间避免闪烁也相当棘手。

下面的demo就差不多了（动画开头和结尾有点生涩）：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QDialog):
    def __init__(self):
        QtGui.QDialog.__init__(self)
        self._offset = 200
        self._closed = False
        self._maxwidth = self.maximumWidth()
        self.widget = QtGui.QWidget(self)
        self.listbox = QtGui.QListWidget(self.widget)
        self.button = QtGui.QPushButton('Slide', self.widget)
        self.button.clicked.connect(self.handleButton)
        self.editor = QtGui.QTextEdit(self)
        self.editor.setMaximumWidth(self._offset)
        vbox = QtGui.QVBoxLayout(self.widget)
        vbox.setContentsMargins(0, 0, 0, 0)
        vbox.addWidget(self.listbox)
        vbox.addWidget(self.button)
        layout = QtGui.QHBoxLayout(self)
        layout.addWidget(self.widget)
        layout.addWidget(self.editor)
        layout.setSizeConstraint(QtGui.QLayout.SetMinAndMaxSize)
        self.animator = QtCore.QParallelAnimationGroup(self)
        for item in (self, self.editor):
            animation = QtCore.QPropertyAnimation(item, 'maximumWidth')
            animation.setDuration(800)
            animation.setEasingCurve(QtCore.QEasingCurve.OutCubic)
            self.animator.addAnimation(animation)
        self.animator.finished.connect(self.handleFinished)

    def handleButton(self):
        for index in range(self.animator.animationCount()):
            animation = self.animator.animationAt(index)
            width = animation.targetObject().width()
            animation.setStartValue(width)
            if self._closed:
                self.editor.show()
                animation.setEndValue(width + self._offset)
            else:
                animation.setEndValue(width - self._offset)
        self._closed = not self._closed
        self.widget.setMinimumSize(self.widget.size())
        self.layout().setSizeConstraint(QtGui.QLayout.SetFixedSize)
        self.animator.start()

    def handleFinished(self):
        if self._closed:
            self.editor.hide()
        self.layout().setSizeConstraint(QtGui.QLayout.SetMinAndMaxSize)
        self.widget.setMinimumSize(0, 0)
        self.setMaximumWidth(self._maxwidth)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.move(500, 300)
    window.show()
    sys.exit(app.exec_()) 
```

# design-patterns - 在派生类中设计具有相同名称的不同签名

> ID：12137484
> 
> 赞同：1
> 
> 时间：2012-08-27T06:58:51.007
> 
> 标签：design-patterns, inheritance, .net-3.5

我想实现静态调用`File.XLS.Export(columnNames, dbNames);`或`File.CSV.Export(delimiter, columnNames, dbNames);`

到目前为止，我设计了一个抽象类并让 CSV 和 XLS 继承自它。如您所见，使用 CSV 导出时我可能需要不同的签名。我可以重载，但我不想在 XLS 导出中看到重载，因为它在那里完全没用。

那么如何在我的 XLS 导出中隐藏这个特定的实现呢？有没有我可以使用的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:25:39.320

我想说看看[Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。归结为同一抽象的两个具体实现应该是可互换的。如果在示例中将 XLS 替换为 CSV 实现，则必须更改源代码。

```
 // Some client code
 // it has to be aware of differing implementations, so if this changes to CSV
 // this code changes
 File exported = XLS.export(columnNames, dbNames); 
```

与其使用静态方法，我更喜欢 XLSExporter 和 CSVExporter 都派生自同一个基类并具有完全相同的接口的方法。我是一个 Java 人，但你应该能够明白：

```
 public interface Exporter {
    public File export();
 }

 public class XLSExporter implements Exporter {
    public XLSExporter(String[] columns, String[] databases) // specifics go in constructor

    public File export() // ...
 }

 public class CSVExporter implements Exporter {
    public CSVExporter(String delim, String[] columns, String[] databases) // specifics go in constructor

    public File export() // ...
 } 
```

现在，Exporter 的客户不需要了解不同的参数。他们只是用他们得到的任何东西出口。这将使您的代码灵活且可维护。

```
 // new client code
 // doesn't care about what kind of exporter it is, it just executes what it's given
 File exported = exporter.export(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:33:52.567

经过一些方法后，我将使用 ExtensionMethods 来实现。它似乎最适合我们的环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:41:17.510

如果您需要这两个函数是静态的，那么您不需要继承。只需创建一个类并在其中添加两个不同的静态函数，它们具有不同的签名和不同的实现。我认为您对其进行了过度设计，特别是在考虑现有代码库对您施加的唯一约束以使功能静态时。

# jquery - 无法调用 data-role="dialog"

> ID：12137485
> 
> 赞同：0
> 
> 时间：2012-08-27T06:59:02.070
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova

我有一个 html 页面，其中我使用了两个，一个用于 data-role="page"，另一个用于 data-role="dialog"。在我的页面 div 我有一个按钮，从这个按钮单击我想调用 div 对话框。这是我的例子---

```
<html>
<body>
<div  data-role="page"
   data-add-back-btn="true" data-theme="d">

          <div data-role="fieldcontain" align="vertical">
       <input type="reset" data-role="button" value="ok"
                           id="okButton">

              </div>
  $("#okButton").click(function ()
  {
                      $.mobile.changePage("#myDialog");   
  });
   </div>

<div id="myDialog" data-role="dialog" data-theme="b" >

   <div data-role="content">

       <div data-role="controlgroup" data-type="vertical">
       <input type="submit" data-role="button" value="Add Margin" id="addmargin">
       <input type="submit" data-role="button" value="CTD" id="ctd">
       <input type="submit" data-role="button" value="Square Off" id="squareoff">
       <input type="submit" data-role="button" value="Change Sqr.Off Mode" id="changeSqrMode">
              </div>

   </div> 
```

上面的代码工作正常但是如果我想在表格行单击时调用对话框，那么它不会被调用。这是我的表格行点击：

```
<script type="text/javascript">

        $("#tableId tr td").live("click",function(e)
        {    
                var newrow = $(this).parent().parent().children().index($(this).parent());  

                e.stopImmediatePropagation();
                alert("after e.stopImmediatePropagation");

                alert("Before  myDialog");              
                $.mobile.changePage('#myDialog');

        });

    </script> 
```

这里在 myDialog 警报显示之前但 $.mobile.changePage('#myDialog'); 未执行，或 myDialog 未显示。

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:36:52.047

尝试`$.mobile.changePage($('#myDialog'))`

# windows-phone-7 - 在 Windows Phone 7 应用程序中显示来自互联网的图像？

> ID：12137490
> 
> 赞同：0
> 
> 时间：2012-08-27T06:59:23.330
> 
> 标签：windows-phone-7

我正在制作一个应用程序，它通过我的网络服务获取图像的 url。我想在应用程序背景中显示这些图像。我该怎么做？显示之前是否需要下载所有图像？请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:07:26.613

您可以通过`Image`控件显示图像，您可以将其放置在您喜欢的任何位置。为了显示来自 URL 的图像，您可以执行以下操作：

```
Uri uri = new Uri("http://dilbert.com/dyn/str_strip/000000000/00000000/0000000/000000/80000/5000/100/85108/85108.strip.print.gif", UriKind.Absolute)
image1.Source = new BitmapImage(uri); 
```

根据这个问题：

[Silverlight Windows Phone 7：从 URL 加载图像](https://stackoverflow.com/questions/2455195/silverlight-windows-phone-7-load-images-from-url)

# java - 在集合中排序

> ID：12137495
> 
> 赞同：0
> 
> 时间：2012-08-27T07:00:00.443
> 
> 标签：java, sorting, data-structures, collections

> **可能重复：**
> [我可以对彼此相关的两个列表进行排序吗？](https://stackoverflow.com/questions/10213493/can-i-sort-two-lists-in-relation-to-each-other)

我有一个排序方案，我不知道如何实现它？两个系列

`List<<String>String> Key, List<<String>String> Value` 我必须对 az 中的值进行排序，以便相应值的键不应该改变。

```
>>eg: Key and Value  
    2=>two  
    100=>four  
    1=>five  
    0=>nine  
    3=>eight  
    8=>one

>>after Sorting:
    3=>eight  
    1=>five  
    100=>four  
    0=>nine
    8=>one
    2=>two 
```

任何人请帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:30:51.867

使用以文本为键的树形图（“二”、“四”），我们可以按字母顺序排序，然后再次检索这两个列表：

```
// Key contains ("2", "100", "1", ...)
// Value contains ("two", "four", "five", ...)
SortedMap<String, String> result = new TreeMap<String, String>();

// assuming the same size for both lists
for (int i = 0; i < Key.size(); i++) {
    // when adding to TreeMap, keys are ordered automatically
    result.put(Value.get(i), Key.get(i));
}

List<String> orderedKey = new ArrayList<String>(result.keySet());
List<String> orderedValue = new ArrayList<String>(result.values()); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:31:24.153

使用 TreeMap 怎么样？您有两个对应条目的元组，您可以根据需要对它们进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:32:22.837

请查看信息@http: [//paaloliver.wordpress.com/2006/01/24/sorting-maps-in-java/](http://paaloliver.wordpress.com/2006/01/24/sorting-maps-in-java/)

# asp.net - 在 Web 应用程序中注册程序集

> ID：12137500
> 
> 赞同：1
> 
> 时间：2012-08-27T07:00:09.623
> 
> 标签：asp.net, .net, ado.net, dll

我的 bin 文件夹中有一个 System.Web.DataVisualization.dll。我已经从内部复制并在我的页面中轻拍了以下注册标签，并且 .dll 工作正常。

```
<%@ Register Assembly="System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI.DataVisualization.Charting" TagPrefix="asp" %> 
```

现在我的问题是如何从 System.Web.DataVisualization.dll 中查找或确定程序集的版本和命名空间？如何确定此 System.Web.DataVisualization.dll 的版本？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:56:27.733

您将不得不使用反射：

```
 Assembly[] myAssemblies = Thread.GetDomain().GetAssemblies();

  Assembly myAssembly = null;
  for(int i = 0; i < myAssemblies.Length; i++)
  {
     if(String.Compare(myAssemblies[i].GetName().Name, 
                       "System.Web.DataVisualization") == 0)
     {
        myAssembly = myAssemblies[i];
        break;
     }
  }
  var myVersion  = myAssembly.GetName().Version;

  var namespaces = myAssembly.GetTypes()
                     .Select(t => t.Namespace)
                     .Distinct(); 
```

# javascript - 使用 YUI 或 Ext JS 将隐藏的 DIV 变成一个窗口

> ID：12137505
> 
> 赞同：0
> 
> 时间：2012-08-27T07:00:35.640
> 
> 标签：javascript, extjs, yui

一个初学者的问题。我在一个隐藏的 div 中有一些丰富的 HTML，并且想把它变成一个浮动的、可拖动的、可关闭的伪窗口、无模式对话框。YUI 和 ExtJS 可用。

我已经尝试了几个小时，并在网上寻找样品。窗口标题也应该从 DOM 节点获取，但是是纯文本。

```
 var helpDiv = ... DOM node
    var helpDivExt = Ext.get(helpDiv);
    var contentHTML = '<i>helpDivExt</i>';
    //var contentTitel = '###' + helpDivExt.select('h3');
    var contentTitel = '###' + Ext.query('h3:first', helpDivExt).data;
    var w = new Ext.Window({html: contentHTML, title: contentTitel,
        width: '398px', height: '400px',
        modal: false, closable: true, draggable: true,
        plain: true,
        padding: '5px 10px 10üpx 10px',
        border: '5px solid #7094b7',
        backgroundColor: '#ffffff'
    });
    w.addClass('hilfetext');
    //w.fill(helpDivExt);
    //w.add(helpDivExt);
    w.show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:11:14.740

在 ExtJS Ext.Window 中有一个`contentEl`配置，您可以在其中放入现有 HTML 元素或现有 HTML 元素的 id：

例如

```
new Ext.Window({contentEl: 'the_element_id'}); 
```

[更多信息在这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-contentEl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:52:02.840

使用 YUI 你可以很容易地做到这一点。只需获取内容和标题，创建一个面板并使其可拖动：

```
YUI().use('panel', 'dd-plugin', function (Y) {

  var panel = new Y.Panel({
    headerContent: Y.one('#panel-title').getData('title'),
    bodyContent: Y.one('#hidden').getHTML()
  });
  panel.render();

  panel.plug(Y.Plugin.Drag, {
    // set the handle to the header node so that the panel
    // can only be dragged from the header
    handles: ['.yui3-widget-hd']
  });

}); 
```

# converter - Catpart 到 VRML 转换器的建议

> ID：12137506
> 
> 赞同：0
> 
> 时间：2012-08-27T07:00:36.987
> 
> 标签：converter, vrml, catia

我正在寻找从 catpart 到 VRML 的转换器。有人知道好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:54:22.643

我从来没有使用过这个插件（只有普通版），但是**[Polytrans](http://www.okino.com/conv/conv.htm)****的CAD 插件**应该能够翻译你的文件：

[http://www.okino.com/conv/imp_catia5.htm](http://www.okino.com/conv/imp_catia5.htm)

![在此处输入图像描述](../Images/dd1b50365656c8edfec47ed796be3838.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T10:15:53.147

试试[www.convertcadfiles.com](https://www.convertcadfiles.com)

这是一项在线服务，因此您无需购买和下载任何东西。

您可以将 Catia 转换为 STL。Freecad 可以完成剩下的工作（STL 到 WRML）

# gwt - SplitLayoutPanel - 如何将最小尺寸设置为居中小部件

> ID：12137507
> 
> 赞同：2
> 
> 时间：2012-08-27T07:00:39.460
> 
> 标签：gwt

我将页面分成两部分。一中一南。我想为它们设置最小尺寸。但是方法 setMinimumSize 仅适用于非中心小部件。你能告诉我是否有可能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:32:49.877

这是 GWT2.0 中发现的一个已知问题。[在这里](http://code.google.com/p/google-web-toolkit/issues/detail?id=4731)你可以看到更多关于它的信息。

# joomla - 不确定如何在 Joomla 2.5 中编辑类别布局覆盖

> ID：12137509
> 
> 赞同：0
> 
> 时间：2012-08-27T07:00:54.613
> 
> 标签：joomla, joomla2.5

我现在在一个 Joomla 2.5 网站上工作，我有一个类别，我希望以与网站其他部分不同的方式显示。就像，导航中有一个链接可以直接将您带到该类别（列出该类别中的所有文章）。我已经设法实现了这一点，但我现在似乎无法修改布局。

## 到目前为止我所做的

*   我进入现有模板之一 (beez5) 并复制 beez5/html/com_content/category 文件夹并将其粘贴到我的模板文件夹中（所以我有 mytemplate/html/com_content/category）。我将“default.php”重命名为“progress.php”。
*   进入 Joomla 后端内容 → 类别管理器 → 进度（类别名称），然后进入基本选项，并在我的模板名称下方找到“进度”作为可选选项之一。如此清楚地看到文件。我将其设置为此选项并点击“保存”。
*   我访问了我网站上的类别，一切似乎都运行良好。我不确定它*应该*是什么样子，但该类别提出了与网站其他部分不同的布局，即默认的 Joomla 布局。所以，不同的布局；成功，看来。

## 问题

看来我实际上无法编辑此布局。我对文件夹中的 PHP 文件所做的任何编辑，甚至删除大部分代码，似乎对页面都没有任何影响。我重新加载，看起来我没有修改任何内容，这让我相信它实际上并没有从这些文件中提取其模板信息，但我不知道在这种情况下它会从哪里提取它。真的不知道我在这里做什么，哈哈。我浏览了 Joomla 文档，但我能找到的唯一信息非常不清楚，通常面向 1.5 或 1.6。任何对 2.5 有更多经验的人都可以带领我走上正确的道路吗？

谢谢！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:10:03.757

好的，所以我不一定完成原始问题中详述的目标，但我已经设法达到了我想要的效果。我发现在模板管理器中，可以将模板分配给特定的类别。所以我创建了两个模板——一个作为我的主要模板，一个作为这个类别的模板——并相应地分配了它们。奇迹般有效。:)

# c# - 如何在 C# 中将 HTML 转换为 MarkDown？

> ID：12137516
> 
> 赞同：5
> 
> 时间：2012-08-27T07:01:40.747
> 
> 标签：c#, html, markdown

将 HTML 转换为 Markdown 的最佳方法是什么？

我正在使用 C# 并且正在转换的文本量将少于 300 个字符左右。

我认为：

*   正则表达式（本文[不要尝试用正则表达式解析](http://kore-nordmann.de/blog/do_NOT_parse_using_regexp.html)，建议不要这样做）
*   XSLT 文件（要求您要转换的 HTML 必须是有效的 XML）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:12:14.630

[Pandoc](http://johnmacfarlane.net/pandoc/)似乎是一个很好的解决方案。

这篇 Stackoverflow 帖子[将 Html 或 RTF 转换为 Markdown 或 Wiki 兼容语法？](https://stackoverflow.com/questions/6119793/convert-html-or-rtf-to-markdown-or-wiki-compatible-syntax)解释如何在 C# 中包装 Pandoc

# java - Android：如何订购 ArrayList >?

> ID：12137518
> 
> 赞同：4
> 
> 时间：2012-08-27T07:02:04.983
> 
> 标签：java, android, arraylist

我将产品的详细信息保存在地图中并添加到 ArrayList< HashMap< String,String >> 并设置到自定义列表适配器中。我需要按价格对其中的值进行排序。如何实现？提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-27T07:13:27.403

请使用以下代码：

```
ArrayList< HashMap< String,String >> arrayList=populateArrayList();
    Collections.sort(arrayList, new Comparator<HashMap< String,String >>() {

        @Override
        public int compare(HashMap<String, String> lhs,
                HashMap<String, String> rhs) {
            // Do your comparison logic here and retrn accordingly.
            return 0;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T07:22:52.140

您可以实现一个`Comparator<Map<String, String>>`或`Comparator<HashMap<String, String>>`

[如何对每个包含多个键值对的 HashMap 的 ArrayList 进行排序？](https://stackoverflow.com/a/5369578/432903) 回答得很好：

```
class MapComparator implements Comparator<Map<String, String>>{
    private final String key;

    public MapComparator(String key){
        this.key = key;
    }

    public int compare(Map<String, String> first,
                       Map<String, String> second){
        // TODO: Null checking, both for maps and values
        String firstValue = first.get(key);
        String secondValue = second.get(key);
        return firstValue.compareTo(secondValue);
    }
}

...
Collections.sort(arrayListHashMap, new MapComparator("value")); 
```

另请查看[如何根据 Java 中的值对 Map 进行排序？](https://stackoverflow.com/a/1283722/432903)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T07:18:26.777

您可以简单地将其用于数组列表中对象的自定义排序，

```
public class MyComparator implements Comparator<MyObject> {
    @Override
    public int compare(MyObject o1, MyObject o2) {
        return o1.getYOUROBJ1STR.compareTo(o2.getYOUROBJ2STR);
    }
} 
```

如果您仍然面临地图排序问题，请告诉我

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T07:23:10.943

如果是 ArrayList 的情况，可以一起使用比较器和 Collections 类来完成

检查此[链接](http://www.vogella.com/blog/2009/08/04/collections-sort-java/)

感谢拉斯沃格尔

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T07:26:31.750

我想你正在寻找这个： -

[按属性对自定义对象的 ArrayList 进行排序](https://stackoverflow.com/questions/2784514/sort-arraylist-of-custom-objects-by-property)

[排序 Map<String, String> 的列表](https://stackoverflow.com/questions/5155952/sorting-a-list-of-mapstring-string)

希望它会帮助你...

# asp.net-mvc-3 - 如何解决 WCF 错误？

> ID：12137526
> 
> 赞同：1
> 
> 时间：2012-08-27T07:02:33.327
> 
> 标签：asp.net-mvc-3, wcf, web-services

为什么我会收到此错误

> *响应消息的内容类型 text/html 与绑定的内容类型 (text/xml; charset=utf-8) 不匹配。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 1024 个字节是： !DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" " [http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd) "> <html xmlns="http://www.w3.org/1999/xhtml">*

**内部异常**

> *远程服务器返回错误：(500) Internal Server Error*

![错误截图](../Images/786b111c00c137c3a91fbb9f7547807d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:09:34.570

您收到此错误的原因可能有多种。根据您在问题中提供的信息，很难说出确切的原因。为了调试问题，您可以[配置跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)：

```
<system.diagnostics>
    <sources>
        <source name="System.ServiceModel"
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
            <listeners>
                <add name="sdt"
                     type="System.Diagnostics.XmlWriterTraceListener"
                     initializeData= "WcfDetailTrace.xml" />
            </listeners>
        </source>
    </sources>
</system.diagnostics> 
```

然后`WcfDetailTrace.xml`使用提供的打开生成的跟踪文件[`SvcTraceViewer.exe`](http://msdn.microsoft.com/en-us/library/ms732023.aspx)并检查异常详细信息。

# php - 停止直接执行php代码而无需单击按钮

> ID：12137531
> 
> 赞同：0
> 
> 时间：2012-08-27T07:03:07.817
> 
> 标签：php, javascript, buttonclick

我需要让下面的代码停止直接执行代码而无需单击按钮。我希望该功能在单击按钮时运行。谢谢您的帮助

```
<html>
<head>
<script language="javascript" type="text/JavaScript">
{
function popup() {
<?php echo shell_exec('sh bash_test.sh') ?>;
}
}    
</script>

</head>
<body>
<input type="button" onclick="popup()" value="popup">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:12:55.427

这样做的唯一方法是制作一个表单或更改 url 中的某些内容`window.location`并检查 vars。你不能像那样把 Javascript 和 PHP 混在一起

`script.php`：

```
<html>
<head>
<script language="javascript" type="text/javascript">
    function popup(){
        window.location = 'script.php?run=shell';
    }
</script>
</head>
<body>
<input type="button" onclick="popup()" value="popup">
<?php
if(isset($_GET['run']) && ($_GET['run'] == 'shell')){
    echo shell_exec('sh bash_test.sh');
}
?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:10:31.590

您的 html 无效。你的`</script>`标签应该在`</head>`标签之前

如果您真的只想在按下按钮时执行它，那么您应该考虑使用 ajax 或使用`<form>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:12:56.423

`alert('<?php echo shell_exec('sh bash_test.sh') ; ?>');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:28:29.967

您可以使用 ajax-request 来做到这一点，例如，使用 jquery：

```
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script language="javascript" type="text/JavaScript">
            {
                function popup() {
                    $.post('someScript.php');
                }
            }    
        </script>
    </head>

    <body>
        <input type="button" onclick="popup()" value="popup">
    </body>
</html> 
```

在“someScript.php”中，您可以输入命令

```
shell_exec('sh bash_test.sh'); 
```

# php - 表单提交后将 JSON 对象发送回 PHP

> ID：12137532
> 
> 赞同：0
> 
> 时间：2012-08-27T07:03:08.317
> 
> 标签：php, jquery, json

这个问题让我困惑了一段时间……

假设我有一个带有文本字段“customerId”和提交按钮的表单。我正在使用 ajax 获取客户 ID，将其传递给 php 控制器并根据客户 ID 提取客户信息。一旦我得到信息，我对数组进行 Json 编码并将其发送回 php。

此时是否可以在标准 foreach 循环中使用 php 格式化我的用户信息，或者是我使用 jquery 将各种 json 数组键和值传递回我的视图的唯一选择？

我希望这是有道理的。为了澄清一点，我通常会在没有 ajax 的情况下执行此操作，为我的用户获取一个数组，而不是为该用户执行 foreach 循环并显示他的信息。我在问是否可以以某种方式将 Json 对象传递回 php 并以这种方式使用而不是使用 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:07:57.690

不，很遗憾，您不能简单地将信息发送回 PHP。一旦 PHP 脚本完成，它会将页面发送回浏览器，并且脚本会关闭所有变量和它使用的所有资源。这是客户端脚本语言 Javasript 和服务器端脚本语言 PHP 之间的区别。当页面完成渲染时，您希望在 PHP 执行后发生的任何事情都必须在客户端处理。

*   Javascript -> 在浏览器中执行，因此在页面呈现后工作

*   PHP -> 根据服务器请求执行。完成后，页面将被发送回浏览器，除非您重新加载页面，否则无法访问该脚本。

# ibatis - 如何忽略 mybatis 代码生成器中的多列？

> ID：12137539
> 
> 赞同：0
> 
> 时间：2012-08-27T07:03:22.793
> 
> 标签：ibatis, mybatis

有谁知道如何忽略[mybatis 代码生成工具](http://www.mybatis.org/generator/)中的多列？
我知道我可以用`<ignoreColumn>`elment 忽略一列，有什么方法可以一次忽略多列吗？
例如：`<ignoreColumn column="col1, col2"/>`

任何帮助都会被认可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:30:36.960

您可以只使用多个`ignoreColumn`语句：

```
<ignoreColumn column="col1" />
<ignoreColumn column="col2" /> 
```

# actionscript-3 - 从 as3 中加载的 swf 中获取所有帧

> ID：12137543
> 
> 赞同：0
> 
> 时间：2012-08-27T07:03:49.013
> 
> 标签：actionscript-3, apache-flex, movieclip, displayobject

我在帮助下加载外部 SWF`MovieClipSWFLoader`并将它们添加到场景中`addElement`。所以我知道帧总数，并且可以使用 nextFrame/prevFrame 进行导航。我需要创建带有缩略图的面板，其中包含每个帧的预览。例如，我如何从 MovieClip 中获取每一帧并存储在数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:06:43.607

您应该为每个预览创建一个 BitmapData 对象。只需遍历 MC 中的每一帧并使用 myBitmapData.draw(mc)。然后创建位图： new Bitmap(myBitmapData); 从每个 BitmapData 并将它们放入您的面板中。

# java - 正确分隔缓冲区中的字符串

> ID：12137551
> 
> 赞同：1
> 
> 时间：2012-08-27T07:04:15.847
> 
> 标签：java, string, apache

我想知道如何在 Java 的缓冲区中正确分隔字符串（在 Apache MINA 中使用 IoBuffers）。这是一些示例代码：

**客户端**

```
IoBuffer buffer = IoBuffer.allocate(100);
buffer.putString("username");
buffer.putString("password");
buffer.flip();
session.write(buffer); 
```

由于我将一个字符串一个接一个地放入字符串中，因此当服务器接收到缓冲区时，它将被视为一个字符串。

**服务器端**

```
IoBuffer buffer = (IoBuffer) message;
String username = buffer.getString(Charset.forName("UTF-8").newDecoder());
String password = buffer.getString(Charset.forName("UTF-8").newDecoder()); 
```

这将在第二个 getString() 上抛出某种异常，因为程序认为它得到了整个字符串（因为这两个字符串放在一起算作一个字符串）。

我应该如何正确分隔这两个字符串？显而易见的方法是执行以下操作：

“用户名密码”

在服务器端：

```
String[] args = buffer.getString(Charset.forName("UTF-8").newDecoder()).split(":", 2);
String username = args[0];
String password = args[1]; 
```

这是最好的方法吗？还是有更合适的方法来分隔这两个字符串？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:19:26.593

你有很多方法：通常使用 ' `\n`' 是最好的 [ 使用 readLine() 或 nextLine() ] ， ' `\t`' 有时就像在 CSV

您还可以使用不在 LANG 中的特定字符，例如不在 ASCII ' `¨`' 中的重音符号，或像 ' `§`' ' `µ`'这样的符号

你也可以，不可打印的 BELL`char delim = '7';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:00:39.810

我认为最好的方法是使用分隔符，但可能不是，`:`因为它用于搜索路径等。分号`;`可能是一个更好的分隔符，即使它看起来不太好。

这就是我至少在我的应用程序中使用的方法。

# c++ - 如果我得到一个空指针我该怎么办？

> ID：12137553
> 
> 赞同：3
> 
> 时间：2012-08-27T07:04:20.120
> 
> 标签：c++, pointers, exception-handling

主要的是我不知道处理空指针的最佳实践。

这是代码：

```
int GetSomeVal()
{
    if(ptr)
    {
        return *ptr
    }
    else
    {
        // What here?
        // Should I return 0? or -1 or throw an exception?
    }
} 
```

我收到这个问题是因为在 google 的 c++ style-guide 中，它不建议我们使用异常，这可能是另一个话题。

如果我应该使用异常，这是否意味着我必须设计一个异常类并抛出它？如果我不应该使用异常，最佳做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T07:05:52.993

`ptr`如果to be有意义`NULL`，则不应抛出异常。异常用于指示出现问题。

如果`ptr`是`NULL`因为出了问题，无论如何，抛出异常。

谷歌的代码风格将被谷歌使用。它们禁止在任何高级 OO 语言中通常使用的许多东西（如引用参数、异常等）。除非您为 Google 工作，否则您不应该遵守它。

您可以设计自己的异常类，从 派生它`std::exception`，然后从代码中抛出它。

另外，从您的代码来看，`ptr`是一个成员。如果它应该在构造函数中被初始化而它没有被初始化，也许你应该从构造函数中抛出异常。拥有一个不可用的对象是没有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:05:42.037

如果您不想抛出异常，我将按此顺序使用这些选项

1.  `boost::optional`

2.  `int GetSomeVal(int &ok)`-`false`如果指针是，则确定`NULL`

3.  如果指针是`NULL`（`-1`例如）返回一些错误代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T07:30:45.823

它高度依赖于功能规范。

`ptr==NULL`可能是对函数的有效但异常的输入，例如，它是由程序的输入数据不正确引起的。那么处理它的最好方法是返回一个错误代码或抛出一个打算在调用链上处理的异常。

在其他情况下，`ptr==NULL`设计永远不可能发生，而只是因为其他地方的错误。那么最好的方法是记录错误并终止程序。

# c++ - 强异常保证 VS 基本异常保证

> ID：12137555
> 
> 赞同：16
> 
> 时间：2012-08-27T07:04:35.183
> 
> 标签：c++, exception, exception-handling

通过亚伯拉罕，我们有 3 种异常类型：

1.  不扔
2.  基本异常保证
3.  强大的异常保证

基本意味着（**如果我错了，请纠正我**）保留不变量，例如保留组件的不变量，并且没有资源泄漏，其中强表示操作已成功完成或抛出异常，离开程序状态和手术开始前一模一样。

1.  保留不变量是什么意思？如果我的一个变量中有一个有效值，那么它不会（例如指针）持有一个`NULL`？

2.  提到强异常保证，这是否意味着我的所有变量都会在引发异常之前存储完全相同的值？

例如 ：

```
int main()

{
    int j = 1;
    int *p = &j;

    // do some stuff
    j = 2;
    throw 1;

} 
```

那么在我投掷之后，`j`会持有价值`2`还是`1`？

问候

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T07:22:07.693

1.  Basic guarantee: after an exception was thrown, objects are left in a consistent, usable state. No resources are leaked and [invariants](http://en.wikipedia.org/wiki/Invariant_%28computer_science%29) are preserved. The state of an object might have changed, but it is still usable. For example, a date object whose `day` value has become -1 is not usable anymore, as its invariants say that `day` is in range [1, 31].

2.  Strong guarantee (additional to 1): a date object has value 2012-12-31\. After an operation that tries to modify that value has failed, the value of that object is still 2012-12-31\. Maybe some internal state has changed, but the logical state from the client point of view is unchanged.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T07:19:10.443

In your case, there is NO exception guarantee. (This is basically case 0). The Wikipedia article you quoted is clear: "The rules apply to **class implementations**". Furthermore, after you throw, the variable `j` is out of scope and no longer exists. You can't even talk about its address anymore, let alone the value

Usually, class invariants are defined by the class author, so it means whatever the class author means. I don't understand your point 1\. `NULL` is a valid value for a pointer.

Your second point is a good one. The definition isn't absolute. For instance, an operation on a string data member may increase its capacity. You can observe this on the outside via a `const&`. Yet, that string capacity usually is not considered as part of the string value, and therefore not as part of the class invariant.

# ant - 循环遍历 Ant 中的属性

> ID：12137559
> 
> 赞同：8
> 
> 时间：2012-08-27T07:04:48.350
> 
> 标签：ant

我想了解在 Ant 中以下是可能的

*   读取属性`eg : ${for.loop.condition}`

*   根据上面的属性值，创建一个for循环

*   并循环从该值动态创建一个字符串

我已经阅读了 ant-contrib task ，但不太确定这是否会对我有所帮助。

任何例子都会帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:22:11.203

您可以使用连接一系列值的变量来控制迭代，这样您就可以决定如何处理每个值。检查这篇[文章](https://stackoverflow.com/questions/6214069/how-to-split-a-string-and-use-it-inside-a-for-loop-in-ant-script)它可能会帮助您使用“for”标签。

您还可以使用 for-each 标记来遍历使用 fileset 标记选择的一组值。

```
<foreach target="target2Call" param="paramName">
   <fileset dir="${myDir}">
       <include name="**/mifilesFilter.*" />
   </fileset>
</foreach> 
```

这是[另一个](https://stackoverflow.com/questions/1467991/ant-how-to-execute-a-command-for-each-file-in-directory)关于如何使用 foreach 标签的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:51:17.500

嗨，您可以像这样使用 if 和 for 循环：

```
<target name="mTomcat">
  <property name="property" value="xyz"/>                      
  <sequential>

  <if>
    <equals arg1="${property}" arg2="xyz" />
    <then>

      <for list="${list}" param="param" delimiter=",">
        <sequential>
            < do the stuff here with param >
       </sequential>
     </for>
  </sequential>
</target> 
```

# java - 使图像透明

> ID：12137563
> 
> 赞同：-2
> 
> 时间：2012-08-27T07:05:04.760
> 
> 标签：java, image, transparency

我想带一个图像透明度的特殊部分。我怎么能在java中做到这一点？我尝试了一些代码：

```
public BufferedImage[] splitBackgroundImages() throws IOException {
        int count = 0;
        bimages = new BufferedImage[chuncks];
        for (int x = 0; x < columns; x++) {
            for (int y = 0; y < rows; y++) {
                // Initialize the image array with image chunks
                bimages[count] = image.getSubimage(x * this.chunckwidth, y
                        * this.chunckheigth, this.chunckwidth,
                        this.chunckheigth);
                Graphics2D gr = bimages[count].createGraphics();
                gr.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC, 1));
                //gr.clearRect(5, 5, chunckwidth-10, chunckheigth -10);
                Color transparent = new Color(0,0,0,0);
                gr.setPaint(transparent);
                gr.setBackground(transparent);
                gr.fillRect(5, 5, chunckwidth-10, chunckheigth-10);
                /*bimages[count] = gr.getDeviceConfiguration().createCompatibleImage(
                        chunckwidth, chunckheigth, Transparency.TRANSLUCENT);
                */
                gr.fillRect(5, 5, chunckwidth-10, chunckheigth-10);
                gr.drawImage(bimages[count++], 0, 0, chunckwidth, chunckheigth,
                        chunckwidth * y, chunckheigth * x, chunckwidth * y
                        + chunckwidth, chunckheigth * x + chunckwidth,
                        null);
                gr.dispose();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:30:12.187

好吧，我屈服了，或者说无聊了。

![亮环](../Images/02d338e644bcc14a3997d608df1b7a53.png)

```
import java.awt.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

public class HoleRing {

    HoleRing(BufferedImage image) {
        // presumes the images are identical in size BNI
        int w = image.getWidth();
        int h = image.getHeight();
        Ellipse2D.Double ellipse1 = new Ellipse2D.Double(
                w/16,h/16,7*w/8,7*h/8); 
        Ellipse2D.Double ellipse2 = new Ellipse2D.Double(
                w/4,h/4,w/2,h/2);
        Area circle = new Area(ellipse1);
        circle.subtract(new Area(ellipse2));

        BufferedImage result = new BufferedImage(w,h,BufferedImage.TYPE_INT_ARGB); 
        Graphics2D g = result.createGraphics();
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
        g.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
        g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
        g.setClip(circle);
        g.drawImage(image, 0, 0, null);
        g.setClip(null);
        Stroke s = new BasicStroke(2);
        g.setStroke(s);
        g.setColor(Color.BLACK);
        g.draw(circle);
        g.dispose();

        JLabel l = new JLabel(new ImageIcon(result));
        JOptionPane.showMessageDialog(null, l);
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://pscode.org/media/stromlo1.jpg");
        final BufferedImage bi = ImageIO.read(url);
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new HoleRing(bi);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:23:25.010

Not sure I understand the question. However, an easy way to only draw part of a `BufferedImage` is to use the following code:

```
BufferedImage bi = [ ... ];
Graphics2D g = bi.createGraphics();
g.setClip(x, y, width, height); 
```

Or else, if you want to **remove** a part of an image, you can use either `g.clip(shape)`, or `g.clipRect(x, y, width, height)`, which will remove a Rectangle.

# inheritance - Ada: 标记类型---从父包继承

> ID：12137567
> 
> 赞同：1
> 
> 时间：2012-08-27T07:05:50.097
> 
> 标签：inheritance, ada

我正在尝试了解标记类型和代码扩展以及重用。我首先创建了一个程序`conventional_method_number_of_averages`，它实现了一种计算方法。然后我使用标记类型的扩展并创建第二个程序`alternative_method_number_of_averages`，它实现了解决相同问题的不同方法。不同的是，现在我多了一个`parameter`叫`overlap_fraction`. 这是一个简单的程序，第一种方法`conventional_method_number_of_averages`可以正常工作：

1.  **number_of_averages.ads**

    ```
    with Conventional_Method_Number_Of_Averages;
    package Number_Of_Averages renames Conventional_Method_Number_Of_Averages; 
    ```

2.  **常规方法数平均数.ads**

    ```
    package Conventional_Method_Number_Of_Averages is

    type First_Method is tagged private;

    procedure Count_Averages (Any_Method : in out First_Method; Sampling_Frequency, FFT_Size, Time_Recorded: in Float);

    function Average_Is (Any_Method : in First_Method) return Float;

    private
    type First_Method is tagged
      record
         Number_Of_Averages : Float :=0.0;
       end record;

    end Conventional_Method_Number_Of_Averages; 
    ```

3.  **常规方法数平均数.adb**

    ```
    package body Conventional_Method_Number_Of_Averages is

    procedure Count_Averages (Any_Method : in out First_Method; Sampling_Frequency, FFT_Size, Time_Recorded: in Float) is
    begin
        Any_Method.Number_Of_Averages := (((Sampling_Frequency * Time_Recorded) - FFT_Size)*(2.0/FFT_Size)) + 1.0;
    end Count_Averages;

    function Average_Is (Any_Method : in First_Method) return Float is
    begin
        return Any_Method.Number_Of_Averages;
    end;

    end Conventional_Method_Number_Of_Averages; 
    ```

4.  和测试文件**test_number_of_averages.adb**

    ```
    with Ada.Float_Text_IO;
    with Ada.Text_IO; use Ada.Text_IO;

    with Number_Of_Averages;
    with Conventional_Method_Number_Of_Averages;
    use type Number_Of_Averages.First_Method;
    procedure Test_Number_Of_Averages is

    Fs, Time_Duration, NFFT    : Float := 0.0;
    Averages                   : Float := 0.0;

    Good_Method : Conventional_Method_Number_Of_Averages.First_Method;

    begin
       Ada.Text_IO.Put("Enter the sampling frequency ");
       Ada.Float_Text_IO.Get (Item => Fs);
       Ada.Text_IO.New_Line (1);
       Ada.Text_IO.Put("Enter the time recorded ");
       Ada.Float_Text_IO.Get (Item => Time_Duration);
       Ada.Text_IO.New_Line (1);
       Ada.Text_IO.Put("Enter the FFT size ");
       Ada.Float_Text_IO.Get (Item => NFFT);
       Ada.Text_IO.Put_Line (Ada.Text_IO.Get_Line);

       Ada.Text_IO.New_Line(1);
       Ada.Text_IO.Put("Number of averages = ");
       Number_Of_Averages.Count_Averages(Good_Method, Fs, NFFT, Time_Duration);

       Averages := Conventional_Method_Number_Of_Averages.Average_Is(Good_Method);
       Ada.Float_Text_IO.Put (Item => Averages, Fore => 3, Aft  => 5, Exp  => 0);

    end Test_Number_Of_Averages; 
    ```

以上工作正常。

现在，如果我为相同的计算创建另一种方法，我有：

1.  它的规范**alternative_method_number_of_averages.ads**

    ```
    with Conventional_Method_Number_Of_Averages;
    use Conventional_Method_Number_Of_Averages;

    package Alternative_Method_Number_Of_Averages is

    type Second_Method is new First_Method with private;

    --override this function
    procedure Count_Averages (Any_Method : in out Second_Method; Sampling_Frequency, FFT_Size, Time_Recorded, Overlap_Fraction: in Float);

    private
    type Second_Method is new First_Method with
      record
         Overlap_Fraction : Float :=0.5;
      end record;

    end Alternative_Method_Number_Of_Averages; 
    ```

和

1.  它的主体**alternative_method_number_of_averages.adb**

    ```
    package body Alternative_Method_Number_Of_Averages is

    --override this function
    procedure Count_Averages (Any_Method : in out Second_Method; Sampling_Frequency, FFT_Size, Time_Recorded, Overlap_Fraction: in Float) is
    begin
       Any_Method.Number_Of_Averages := ((Sampling_Frequency * Time_Recorded) - FFT_Size) / (FFT_Size - Overlap_Fraction * FFT_Size) + 1.0;
    end Count_Averages;

    end Alternative_Method_Number_Of_Averages; 
    ```

然后在编译规范文件时，我收到错误消息：

Alternative_method_number_of_averages.ads：在alternative_method_of_averages.ads 中定义的类型“Second_Method”没有选择器“number_of_averages”。罪魁祸首是：

```
 Any_Method.Number_Of_Averages := ((Sampling_Frequency * Time_Recorded) - FFT_Size) / (FFT_Size - Overlap_Fraction * FFT_Size) + 1.0; 
```

那么如何解决这个问题呢？

最后，我希望能够拥有类似的东西：

```
 Number_Of_Averages.Count_Averages(Alternative_Method, Fs, NFFT, Time_Duration, Overlap_fraction); 
```

在测试文件**test_number_of_averages.adb**中，与工作代码类似

```
 Number_Of_Averages.Count_Averages(Good_Method, Fs, NFFT, Time_Duration); 
```

非常感谢...

**更新**

所以现在对于替代方法的实现，我将**Alternative_Method_Number_Of_Averages.ads/adb**重命名为**Conventional_Method_Number_Of_Averages-Alternative_Method_Number_Of_Averages.ads/adb**。测试文件是：

```
 with Ada.Float_Text_IO;
   with Ada.Text_IO; use Ada.Text_IO;

   with Number_Of_Averages;
   with Conventional_Method_Number_Of_Averages;
   use type Number_Of_Averages.First_Method;

   with Conventional_Method_Number_Of_Averages.Alternative_Method_Number_Of_Averages;

   procedure Test_Number_Of_Averages is

   Fs, Time_Duration, NFFT    : Float := 0.0;
   Averages1                   : Float := 0.0;
   Averages2                   : Float := 0.0;

   Good_Method                 : Conventional_Method_Number_Of_Averages.First_Method;
   Alternative_Method          : Conventional_Method_Number_Of_Averages.Alternative_Method_Number_Of_Averages.Second_Method;

   begin
   Ada.Text_IO.Put("Enter the sampling frequency ");
   Ada.Float_Text_IO.Get (Item => Fs);
   Ada.Text_IO.New_Line (1);
   Ada.Text_IO.Put("Enter the time recorded ");
   Ada.Float_Text_IO.Get (Item => Time_Duration);
   Ada.Text_IO.New_Line (1);
   Ada.Text_IO.Put("Enter the FFT size ");
   Ada.Float_Text_IO.Get (Item => NFFT);
   Ada.Text_IO.Put_Line (Ada.Text_IO.Get_Line);

   Ada.Text_IO.New_Line(1);
   Ada.Text_IO.Put("Number of averages = ");
   Number_Of_Averages.Count_Averages(Good_Method, Fs, NFFT, Time_Duration);

   Averages1 := Conventional_Method_Number_Of_Averages.Average_Is(Good_Method);
   Ada.Float_Text_IO.Put (Item => Averages1, Fore => 3, Aft  => 5, Exp  => 0);

   Ada.Text_IO.New_Line(1);
   Ada.Text_IO.Put("Number of averages = ");

   Number_Of_Averages.Alternative_Method_Number_Of_Averages.Count_Averages(Alternative_Method, Fs, NFFT, Time_Duration); 
   Averages2 := Conventional_Method_Number_Of_Averages.Alternative_Method_Number_Of_Averages.Average_Is(Alternative_Method); 
   Ada.Float_Text_IO.Put (Item => Averages2, Fore => 3, Aft  => 5, Exp  => 0);

   end Test_Number_Of_Averages; 
```

Fs = 48000，Time_Duration = 60，NFFT = 8192，两种方法都返回 702.125。第二种方法总是返回 702.125 而与`Overlap_Fraction`参数无关。如何`Overlap_Fraction`在调用函数中指定，同时仍然保持私有，即让函数使用`Overlap_Fraction`存储在记录中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:49:12.833

在`Alternative_Method_Number_Of_Averages`您尝试使用的正文中`Number_Of_Averages`，它是父类型的私有成员。而且由于它是私有的，因此您无法看到它。

当您使用软件包时，您只能看到规范的公共部分。

子包将在其自己的公共部分中看到父包的公共部分，并在其自己的私有部分中看到父包的私有部分。

还有私人孩子，在自己的规范中可以看到整个父母

要获得 s 的可见性`Number_Of_Averages`，您可以将完整的类型声明移至公共部分，或制作s`Alternative_Method_Number_Of_Averages`的子包`Conventional_Method_Number_Of_Average`。

有关更多详细信息，请查看： [http ://en.wikibooks.org/wiki/Ada_Programming/Packages](http://en.wikibooks.org/wiki/Ada_Programming/Packages)

另一方面，仅当类型扩展正在实现具有与父级完全相同的参数配置文件的子程序时，才会发生覆盖。在您的示例中，`Second_Method`是重载`Count_Averages`，即添加一个名称相同但配置文件不同的新子程序。`Count_Averages`仍然从具有较短参数配置文件的父代继承。

# java - 如何让一个eclipse插件更有吸引力？

> ID：12137570
> 
> 赞同：1
> 
> 时间：2012-08-27T07:05:51.883
> 
> 标签：java, eclipse, eclipse-plugin, osgi

我做了一个eclipse插件。但我对它的 UI 不满意。我们可以通过改变它的颜色、主题来使它更具吸引力，或者我们可以在其中使用动画等东西吗？请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T09:18:27.687

基本上评论说得最好，不要认为添加动画或颜色会使您的插件更具吸引力。专注于可用性。

*   添加诸如树或表结构之类的东西来组织信息会产生很大的不同。
*   查看表和树的不同变体，其中一些添加了功能，例如过滤或实时填充的虚拟表。
*   在适当的地方使用带有适当悬停文本的图标。
*   尽可能启用/禁用操作/图标。

许多这些小事情对插件的“漂亮”程度产生了很大的影响。

请记住，您制作的插件可以在不同的操作系统中使用，因此它必须在 Windows 和 Unix 中融合。

[这里](http://wiki.eclipse.org/User_Interface_Guidelines)有一个 Eclipse 中的用户界面指南，其中包含许多指南。

# facebook-graph-api - 开发环境中的 Facebook Open Graph

> ID：12137571
> 
> 赞同：2
> 
> 时间：2012-08-27T07:05:53.140
> 
> 标签：facebook-graph-api, facebook-opengraph

我们正在使用 Facebook Graph API 开发一个 Web 应用程序。当然，我们有一个 Facebook 应用程序，为了这个问题，我将其称为“MyApp”。

为了让我们的开发人员能够在本地运行和调试服务器，我们有一个始终沙盒化的 Facebook 应用程序，我将其称为“MyAppDev”。此应用程序的域是 localhost:8080。这使得在开发机器上进行 Facebook 身份验证成为可能。这样，我们就有了一组不同的身份验证令牌用于开发和生产，我们的开发周期很短，而且每个人都很开心。

但是当涉及到 Open Graph 时，事情变得有点棘手。这是因为 Open Graph 对象必须由 Facebook 访问的真实 URL 支持。因此，我们不能真正在 MyAppDev 上定义对象和操作（如果我们在 MyAppDev 中使用生产 URL，它将与开发人员机器中的数据库不一致）。因此，似乎唯一的选择是开发人员共同使用测试服务器进行开发，使用第三个应用程序，我们称之为 MyAppTest。但这有一些缺点：

1.  这打破了开发人员能够在自己的环境中运行事物的模式。我怀疑这会导致开发周期变慢。
2.  没有自动同步 Open Graph 配置的方法（至少我不知道），所以我们需要手动将配置（例如，操作/对象）从 MyAppTest 复制到 MyApp。这很容易出错。

所以我的问题是，开发和测试开放图形应用程序的常见做法是什么？跟我描述的一样吗？有没有更好的办法？

提前致谢，
亚尼夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:14:54.637

> 没有自动同步 Open Graph 配置的方法（至少我不知道），所以我们需要手动将配置（例如，操作/对象）从 MyAppTest 复制到 MyApp。这很容易出错。

是的，这真的是一个皮塔饼——我希望 Facebook 能想出一个更好的方法来做这件事；至少一个“同步”功能会很好。

至于测试 OG 对象——我可以看到，从开发人员自己的机器上进行测试的唯一可能解决方案是让该机器可以从互联网上访问；使用某种或类似的 DynDNS 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T22:29:31.440

我们在协作开发环境中遇到了同样的问题。至少我们可以从本地副本向 facebook 进行身份验证，但是在发布故事时我们无法从 FB.api() 获得成功的响应。

这是具体错误：

![在此处输入图像描述](../Images/3a5cac8823e637403b2876b3a543a779.png)

让我引用 Raj Rathore 提出的部分解决方案。我们尚未测试此解决方案，但我们肯定会这样做。

> 此问题的解决方案是在线部署您的应用程序或允许 localhost 隧道，以便 facebook 可以访问它。在我的开发环境中工作时，我更喜欢 localhost 隧道。

有关这方面的更多详细信息，请访问 Raj 的[网站](http://www.rajrathore.com/localhost-tunneling-working-with-facebook-open-graph/)

# path - 在批处理文件中执行的 rsync 文件路径中使用空格

> ID：12137572
> 
> 赞同：2
> 
> 时间：2012-08-27T07:05:54.657
> 
> 标签：path, whitespace, rsync, spaces

因此，我使用`rsync`批处理脚本和 Windows 调度程序来备份一些常用目录，如下所示：

`rsync.bat`

```
@echo off

C:
chdir C:\Cygwin\bin

bash --login -i -c %1 
```

我正在使用 Windows Scheduler 定期运行此批处理脚本，效果很好 - 直到我在文件路径中添加空格。这是我在批处理文件快捷方式上使用的目标路径的示例：

目标：`C:\Cygwin\scripts\rsync.bat "rsync -vruh /cygdrive/t/uploads /cygdrive/d/Backups"`

这完美无缺。这是带空格的那个：

目标：`C:\Cygwin\scripts\rsync.bat "rsync -vruh '/cygdrive/c/Users/username/My Documents' /cygdrive/d/Backups"`

请注意第一个路径上带有空格的单引号。我一生都无法弄清楚为什么这不起作用 - 我尝试使用 -s 开关来转义反斜杠，过去一些研究解决了这个问题，但是唉，那并没有工作。有谁知道如何让它工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T17:04:23.047

空格的问题在于为解释命令行所做的**argv处理。**与任何其他 unix 应用程序一样，您必须在命令行上以某种方式转义空格，否则它们将用于分隔参数。

例如：

```
rsync -av host:'"a long filename"' /tmp/
rsync -av host:'a\ long\ filename' /tmp/
rsync -av host:a\\\ long\\\ filename /tmp/ 
```

或使用“？” 只要没有其他匹配的文件名而不是带空格的文件名，就可以代替空格（因为“？”匹配任何字符）：

```
rsync -av host:a?long?filename /tmp/ 
```

只要您知道命令行上的远程文件名由远程 shell 解释，那么一切正常。

[http://rsync.samba.org/FAQ.html#9](http://rsync.samba.org/FAQ.html#9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T15:46:48.913

我在 Windows 7 下的批处理文件中使用**rsync**时遇到了类似的问题。批处理文件代码是：

```
rsync -hrtv --modify-window=3602 /cygdrive/c/Users/gavin/My Documents/ArmA Other Profiles/TheProf/ /cygdrive/h/Hobies/ARMA_BU/ 
```

这可能只是一个 Windows 7 问题，但文件夹**gavin/My Documents**应该只是**gavin/Documents**。此外，还需要单引号来克服空格，例如：

```
rsync -hrtv --modify-window=3602 '/cygdrive/c/Users/gavin/Documents/ArmA Other Profiles/TheProf/' /cygdrive/h/Hobies/ARMA_BU/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T23:04:41.610

特殊情况：如果路径中有空格和通配符（*），上述解决方案似乎不起作用（`rsync: link_stat...failed`）

*仅用*引号包围空格似乎有效。

```
/cygdrive/C/My" "Folder" "/My" "File*.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-24T22:47:38.433

上面的“仅用引号包围空格似乎有效”是唯一帮助我制作包含大量空格的 OneDrive 目录副本的解决方案。这是我必须使用的语法的长短

rsync -avz --progress --exclude-from %excludefile% /cygdrive/C/Users/username/OneDrive" "-" "company1" "company2," "Inc/Documents/* /cygdrive/x/msi/MyDocuments/ --log-file=rsync-MyDocs.LOG

# java - 如何在不使用 ServletFilter 的情况下从 ServletResponse 获取 HTTP 状态代码？

> ID：12137573
> 
> 赞同：0
> 
> 时间：2012-08-27T07:05:57.723
> 
> 标签：java, servlets, httpresponse

我将 servlet 的 doPost() 中的 http 状态设置为

```
if(success)    
{    
  response.setStatus(HttpServletResponse.SC_OK);    
}else{    
  response.sendError(response.SC_BAD_REQUEST, "Message");    
} 
```

在客户端调用服务器后：

```
HttpResponse aHttpResponseL = client.execute(aHttpPostL);    
BufferedReader aBufferedReaderL = new BufferedReader(new InputStreamReader(
                aHttpResponseL.getEntity().getContent())); 
```

但我总是将**null**作为值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:09:50.220

检查状态行：

```
HttpResponse aHttpResponseL = client.execute(aHttpPostL);  
int code = aHttpResponseL.getStatusLine().getStatusCode(); 
```

# php - 将数据库表内容写入pdf

> ID：12137582
> 
> 赞同：0
> 
> 时间：2012-08-27T07:06:56.927
> 
> 标签：php

我已经完成了一种将 db 表中的内容写入 pdf 文件的方法。

但是表中的一个字段包含带有html标签的内容。即“<p>这是语句<br>下一条语句</p>”这样的。

我想将此内容写入 html 格式的 pdf 文件。我不想剥离标签。

内容应为 html 格式的 pdf 文件。

例如如果表中包含“<strong>”语句</strong>”我想在pdf中这样写

**陈述**

有没有为此的任何php函数。

```
$pdf=new FPDF(); 
$pdf->AddPage(); //Create new PDF page 
$pdf->SetFont('Arial','B',10); //Set the base font & size 
$pdf->Ln();//Creates a new line, blank here 
$pdf->Cell(10,5,""); 
$pdf->Cell(10,5,""); 
$pdf->SetFont('Arial','B',12); 
$pdf->Ln(); 
$pdf->Cell(20,10,$title); 
$pdf->SetFont('Arial','',6); 
$pdf->Ln(); 
$pdf->Cell(20,11, $content); 
$pdf->Ln(); 
$pdf->Ln(); 
$pdf->Cell(1150,130,"Date:".date('d-m-y')); 
$separator = md5(time()); 
$file_name='Certificate'.$type_id.'.pdf'; 
// carriage return type (we use a PHP end of line constant) 
$eol = PHP_EOL; 
$pdf->Output($file_name,'D'); 
```

# c# - C# 5 和 .Net 4.5 - 编译器技巧或库支持？

> ID：12137583
> 
> 赞同：4
> 
> 时间：2012-08-27T07:07:01.443
> 
> 标签：c#, .net

我已经阅读了很多关于 async/await 被（内部）实现为状态机的内容，并且想知道我是否可以使用 VS2012 编译器，同时仍然使用 Net 版本 4 作为我的运行时来使用这些新功能？

我记得我可以使用 Net 4 的几个新特性来做到这一点，同时仍然使用 Net 3.5，但使用 VS2010 编译器。

谢谢，马丁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:15:28.420

直接来自 Visual Studio 异步编程页面：

[http://msdn.microsoft.com/en-us/vstudio/async.aspx](http://msdn.microsoft.com/en-us/vstudio/async.aspx)

> 如果您的 Visual Studio 2012 项目需要面向 Silverlight 5 或 .NET Framework 4.0，您可以通过下载[适用于 Visual Studio 2012 的 Async Targeting Pack](http://go.microsoft.com/fwlink/p/?LinkId=250980)来使用异步语言支持。面向 .NET Framework 4.5 或 .NET for Windows 应用程序的项目不需要此包。

所以是的，您可以下载适用于 Visual Studio 2012 的异步目标包并使用异步编程功能，同时仍以 .NET Framework 4 为目标。

# linq - 如何避免实体框架发出重复查询？

> ID：12137587
> 
> 赞同：1
> 
> 时间：2012-08-27T07:07:24.567
> 
> 标签：linq, entity-framework, tsql

SQL 探查器显示 EF 从以下 LINQ 查询发出最多 8 次相同的查询：

```
var query = (from wtv in _context.WorkTypeVersions
               join rc in _context.RateCategories on wtv.WTVID equals rc.WTVID
               join rsc in _context.RateSubCategories on rc.RCID equals rsc.RCID
               where (wtv.Composite == (ckCompositePreambles.Checked ? "Y" : "N")
                      && rc.CatCode == catCode)

               select new pRateSubCategory()
                {
                  WTVID = wtv.WTVID,
                  RSCID = rsc.RSCID,
                  WTVersionName = wtv.WTVersionName,
                  SubCatCode = rsc.SubCatCode,
                  PCode = rsc.Preamble.SectionCode,
                  RateCategoryName = rc.RateCategoryName,
                  RateSubCategoryName = rsc.RateSubCategoryName,
                  FullSubCatName = rsc.FullSubCatName,
                  PMBID = rsc.PMBID,
                  Preamble = rsc.Preamble
                });

  dgvRateSubCategories.AutoGenerateColumns = false;
  lblSubSectionCount.Text = "SubSections: " + bsRateSubCategories.Count;
  dgvRateSubCategories.DataSource = bsRateSubCategories;

  bsRateSubCategories.DataSource = query; 
```

TSQL 查询（最多产生 8 次，虽然还有其他的穿插）是这样的：

```
 exec sp_executesql N'SELECT 
    [Project1].[WTVID] AS [WTVID], 
    [Project1].[RSCID] AS [RSCID], 
    [Project1].[WTVersionName] AS [WTVersionName], 
    [Project1].[SubCatCode] AS [SubCatCode], 
    [Project1].[SectionCode] AS [SectionCode], 
    [Project1].[RateCategoryName] AS [RateCategoryName], 
    [Project1].[RateSubCategoryName] AS [RateSubCategoryName], 
    [Project1].[FullSubCatName] AS [FullSubCatName], 
    [Project1].[PMBID] AS [PMBID], 
    [Project1].[PMBID1] AS [PMBID1], 
    [Project1].[PMB_Level] AS [PMB_Level], 
    [Project1].[PMB_Text] AS [PMB_Text], 
    [Project1].[Composite] AS [Composite], 
    [Project1].[PMB_XPS] AS [PMB_XPS]
    FROM ( SELECT 
        [Extent1].[WTVID] AS [WTVID], 
        [Extent1].[WTVersionName] AS [WTVersionName], 
        [Extent2].[RateCategoryName] AS [RateCategoryName], 
        [Extent3].[RSCID] AS [RSCID], 
        [Extent3].[PMBID] AS [PMBID], 
        [Extent3].[RateSubCategoryName] AS [RateSubCategoryName], 
        [Extent3].[SubCatCode] AS [SubCatCode], 
        [Extent3].[FullSubCatName] AS [FullSubCatName], 
        [Extent4].[PMBID] AS [PMBID1], 
        [Extent4].[PMB_Level] AS [PMB_Level], 
        [Extent4].[SectionCode] AS [SectionCode], 
        [Extent4].[Composite] AS [Composite], 
        [Extent4].[PMB_Text] AS [PMB_Text], 
        [Extent4].[PMB_XPS] AS [PMB_XPS]
        FROM    [dbo].[WorkTypeVersions] AS [Extent1]
        INNER JOIN [dbo].[RateCategories] AS [Extent2] ON [Extent1].[WTVID] = [Extent2].[WTVID]
        INNER JOIN [dbo].[RateSubCategories] AS [Extent3] ON [Extent2].[RCID] = [Extent3].[RCID]
        LEFT OUTER JOIN [dbo].[Preambles] AS [Extent4] ON [Extent3].[PMBID] = [Extent4].[PMBID]
        WHERE ([Extent1].[Composite] = (CASE WHEN (@p__linq__0 = 1) THEN N''Y'' ELSE N''N'' END)) AND ([Extent2].[CatCode] = @p__linq__1)
    )  AS [Project1]
    ORDER BY [Project1].[SubCatCode] ASC, [Project1].[WTVersionName] ASC',N'@p__linq__0 bit,@p__linq__1 varchar(8000)',@p__linq__0=0,@p__linq__1='A' 
```

EF 的版本目前是：System.Data.Entity：4.0.0.0，EntityFramework：4.3.1

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:14:37.523

问题是您在哪里设置数据源：

```
bsRateSubCategories.DataSource = query; 
```

该`query`变量实现了扩展接口的[`IQueryable<T>`接口](http://msdn.microsoft.com/en-us/library/bb351562.aspx)[`IEnumerable<T>`（](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)需要`DataSource`）。当您将其绑定为网格时，网格将多次枚举结果以呈现自身。

但是，由于您为网格提供了实现 的数据源`IQuerable<T>`，因此*每次*枚举查询时，它都会对服务器执行查询，这可能是您多次看到它的原因。

为了缓解这种情况，您应该在将列表分配给 之前将其具体化`DataSource`，或者使用[ToList](http://msdn.microsoft.com/en-us/library/bb342261.aspx)扩展方法，就像这样（如果它是只读的，那[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736)很好，但如果您需要添加新项目，则使用`ToList`）：

```
bsRateSubCategories.DataSource = query.ToList(); 
```

当然，您必须决定何时适合重置您`DataSource`的数据，因为现在数据源已与服务器*完全*断开连接。

# java - 如何通过创建数据源为我的 java 程序（使用 jdk no netbeans 独立）与 oracle 10g 数据库设置连接？

> ID：12137589
> 
> 赞同：0
> 
> 时间：2012-08-27T07:07:28.207
> 
> 标签：java, oracle, jdbc

我已经从 Internet 下载并安装了 oracle 10g express，它显示为 XE。不知道它实际上是什么意思。现在，我必须将我的 java 程序与数据库连接，并尝试创建表并执行查询，就像我在 SQL Server 课程中所做的那样。请指导我如何创建 dsn、连接数据库并使用这个 oracle 10g 执行我所有的 jdbc 相关程序。请让我知道从创建数据源到在 java 中为 jdbc 编码的逐步过程...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:23:44.930

您可以像这样创建 oracle 数据源；

```
 OracleDataSource ds = new OracleDataSource();
    ds.setDriverType("thin");
    ds.setServerName("yourServerName");
    ds.setPortNumber(1521);
    ds.setDatabaseName("yourDatabaseName");
    ds.setUser("yourUserName");
    ds.setPassword("YourPassword"); 
```

你可以得到这样的连接；

```
 Connection conn = ds.getConnection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:18:07.557

首先，您必须使 JDBC 连接器可用于您的应用程序。为此，请从 oracle ( [http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html) ) 下载 JDBC 连接器，并将其放置在您的应用程序可以访问的位置。

其次，您必须使用此 JDBC 来创建与数据库的连接。关于如何使用 Java 代码查询数据库的 SO 示例有很多。

这也是您正在寻找的一个很好的完整示例：[http ://www.javaworkspace.com/connectdatabase/connectOracle.do](http://www.javaworkspace.com/connectdatabase/connectOracle.do)

更新

这也是一个很好的文件，可以看一下，它会一步一步地告诉你要做什么[http://pdf.coreservlets.com/first-edition/CSAJSP-Chapter18.pdf](http://pdf.coreservlets.com/first-edition/CSAJSP-Chapter18.pdf)

# java - 用于 64 位系统的 Java AOT 编译器

> ID：12137590
> 
> 赞同：0
> 
> 时间：2012-08-27T07:07:34.493
> 
> 标签：java, 64-bit, aot

我需要我的应用程序可以在没有安装 jre 的情况下执行。它还使用 rxtx，32 位和 64 位系统有不同的 jar 和 dll。是否有任何适用于 Windows 的 Java AOT 编译器，支持 64 位系统？我设法谷歌的是 Excelsior Jet 有一些 alpha 版本，但我不知道是否（或如何）我可以在那里制作最终的 exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:39:06.110

我会使用 java 到 exe 包装器（例如 Launch4j）、JRE 捆绑和安装程序构建器（例如 InnoSetup）的组合。捆绑一个完整的 JRE 只会为安装程序增加大约 20MB（您可以通过从 JRE 中删除不需要的东西来减少几 MB）。

我正在使用上述组合向分包商（通常是完整的计算机假人）提供（公司私有）应用程序。您可以使用安装程序管理所有目标机器自定义（例如，为已安装的文件设置适当的访问权限以供以后更新）。

您也可以考虑不提供任何专门的 64 位版本以减小大小。如果程序在 32 位 VM 上运行良好，则在 64 位 (JRE) 版本中对用户没有附加价值。在大多数情况下，性能差异可以忽略不计，如果您不需要特别大的堆 (>1GB)，那么提供额外的 64 位 JRE 就是浪费时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:32:57.867

你可以看看 J9，它支持 AOT，根据[IBM应该存在 64 版本](http://www-01.ibm.com/support/docview.wss?uid=swg21221478)

# android - 如何调试本机内存泄漏？

> ID：12137599
> 
> 赞同：2
> 
> 时间：2012-08-27T07:08:11.173
> 
> 标签：android, memory-leaks

有人告诉我，Android 有一些机制来调试“内存泄漏”问题。其中之一是基于`libc_malloc_debug_leak.so`.

因此，我执行了以下步骤来启用此功能：

**1** . 确保`libc_malloc_debug_leak.so`并存`libc_malloc_debug_qemu.so`在于`system/lib`.

**2** . `adb`在shell中输入这些命令：

```
adb shell setprop libc.debug.malloc 1   /* then use getprop to check its value */
adb shell stop
adb shell start 
```

我希望通过捕获日志来获取内存信息。

但是，实际结果是我的设备无法启动并且发生本机崩溃（似乎在`malloc`或处崩溃`free`）。

我的设备是安卓手机。

我使用了正确的方法吗？如果不是，那会是什么？

# guice - 将参数传递给 Guice @Provides 方法

> ID：12137602
> 
> 赞同：5
> 
> 时间：2012-08-27T07:08:31.747
> 
> 标签：guice

我有一个 Guice 模块，它有一个 @Provides 方法，它接受 2 个参数并返回接口的实现：

```
public class **ClientModule** extends **AbstractModule**{

@Override
protected void configure(){

}

@Singleton
@Provides
protected ClientInterfaces provideService(String param1, String param2){
   returns something
 }

} 
```

在注入模块的主类中，如何将参数传递给@Provides 方法？

```
public MainClass{
main(){
Injector injector = Guice.createInjector( new ClientModule());
MainClass mainClass = injector.getInstance(MainClass.class);

} 
```

这会引发空指针异常 param1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T20:54:34.767

您自己不会调用提供方法，当您第一次需要访问（在这种情况下）您的 ClientInterfaces 实现时，Guice 会调用它。

我假设，您需要配置参数来初始化您的 ClientInterfaces。

所以试试Binding-Annotation，最简单的就是@Named：

```
configure() {
   bindConstant().annotatedWith(Names.named("hostName")).to("myHost");
   bindConstant().annotatedWith(Names.named("port")).to("8080");
}
@Provides
@Singleton
public MyService provideMyService(@Named("hostName") String host, @Named("port") String port) {
   // init MyService 
   return ....
} 
```

当然，您通常会从属性文件 System.props 中读取 myHost 和“8080”，而不是硬编码常量。

第一次需要注入 MyService 时，Guice 会注意到它需要注解字符串以满足提供方法的要求并搜索绑定到注解名称的值......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:43:33.673

您不会将参数传递给提供程序方法。Guice 需要能够自己创建参数。你自己传递参数是没有意义的，因为这样就不需要 Guice。

如果您希望 Guice 能够向 提供参数`provideService`，则这些参数要么需要在每个参数上[绑定注释。](http://code.google.com/p/google-guice/wiki/BindingAnnotations)由于它们都具有相同的类型，Guice 无法知道它知道如何提供哪些 String 值应该传递给哪个参数。

如果您知道要传递什么`param1`以及`param2`从主代码路径传递什么，那么请移到`provideService`可以直接调用它的地方。在那种情况下不需要Guice。

# wordpress - 如何在 wordpress 中创建类似 Skype 支持页面的结构

> ID：12137604
> 
> 赞同：0
> 
> 时间：2012-08-27T07:08:45.187
> 
> 标签：wordpress

如何使用 wordpress 中的类别创建类似于 Skype 支持页面 (https://support.skype.com/en/) 的结构

将 1 级类别显示为“呼叫”、“视频呼叫”、“消息”等标题（无链接），然后将其下每个 1 级类别的所有子类别显示为列表，并带有指向其相应存档页面的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:21:06.963

你只需要[wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)（利用它的选项）来做到这一点。只需一个嵌套循环（获取顶级类别，然后是子类别），或自定义 walker 来渲染整个树。

# xml - 如何从 Xml 数据中获取所有子节点？

> ID：12137607
> 
> 赞同：0
> 
> 时间：2012-08-27T07:08:52.510
> 
> 标签：xml, actionscript-3, apache-flex

> **可能重复：**
> [如何分别从每个父节点获取子节点？](https://stackoverflow.com/questions/12136882/how-i-get-child-node-from-each-parent-node-seperately)

我有一些 XML 数据..我想基于这个 XML 创建某些组件。下面给出了我的 XML 数据

```
 <main>
     <TabNavigator x="27" y="11" width="455" height="376" id="gh" backgroundColor="#A4B6E9">                                                         <NavigatorContent width="100%" height="100%" label="Client" id="clientTab">
   <Label x="10" y="30" width="52" height="25" text="Name:"/>
  <Label x="10" y="127" width="52" height="28" text="Addres"/>
<TextInput id="name_client" x="69" y="18" width="188" height="37" restrict="[A-Z a-z]"/>
<TextArea id="address_client" x="70" y="70" height="126"/>
<Label x="10" y="230" width="84" height="32" text="Phone:"/>
<TextInput id="phone_client" x="70" y="218" width="188" height="30" restrict="0-9" maxChars="10"/>
<Button x="100" y="291" height="28" label="Submit" click="submitClick()"/>
<Label id="errorClient" x="59" y="270" width="171" height="27" text="please fill the blank fields" color="red" visible="false"/>
</NavigatorContent><NavigatorContent width="100%" height="100%" label="Admin" id="adminTab">
<Label x="23" y="48" width="52" height="25" text="Name:"/>
<Label x="26" y="148" width="52" height="28" text="Addres"/><TextInput id="name_admin" x="105" y="33" width="188" height="37"/>
<TextArea id="address_admin" x="105" y="93" height="126"/>
<Label x="26" y="257" width="84" height="32" text="Phone:"/>
<TextInput id="phone_admin" x="104" y="246" width="188" height="30" restrict="0-9" maxChars="10"/>
<Button x="137" y="305" height="28" label="Submit"/>
<Label id="errorAdmin" x="100" y="286" width="171" height="17" color="red" fontSize="14" text="please fill the blank fields" visible="false"/>
<Button x="335" y="60" height="34" label="Admin Details"/>
<Button x="335" y="180" height="34" label="Client Details"/>
</NavigatorContent>
</TabNavigator>
<TitleWindow x="521" y="84" width="377" height="234">
<DataGrid x="0" y="0" width="375" height="163" borderVisible="true" id="details">
<columns>
<ArrayList> 
<GridColumn dataField="Name" id="arrayName"/>
<GridColumn dataField="Address" headerText="Address"/>
    <GridColumn dataField="Phone_Number" headerText="Phone_Number"/></ArrayList></columns>
  </DataGrid><Button x="139" y="167" height="28" label="Export"/>
 </TitleWindow>
</main> 
```

我正在使用以下代码从上述 XML 中查找子节点。

```
 private function loadXML(targetURL:String):void 
                {
                    urlLdr.load(new URLRequest(targetURL));
                    urlLdr.addEventListener(Event.COMPLETE,urlLdr_complete);
                }
                private function urlLdr_complete(event:Event):void
                {

                    var xmlData:XML=new XML(URLLoader(event.currentTarget).data);                       
                        for each (var t:XML in xmlData.children()) 
                        {
                                            Alet.show(t.Name());
                                            }
                            }} 
```

但我只有 2 个子节点（TabNavigator 和 NavigatorContent）。我如何获得所有子节点？任何人都可以帮助我吗？？？

* * *

我的代码如下。我现在只有子节点..还没有父节点。请帮助我获取父节点和子节点..

```
<fx:Script>
        <![CDATA[
            import flashx.textLayout.elements.BreakElement;
            import flashx.textLayout.formats.BackgroundColor;

            import mx.charts.chartClasses.DataDescription;
            import mx.collections.ArrayCollection;
            import mx.collections.XMLListCollection;
            import mx.containers.Canvas;
            import mx.containers.TabNavigator;
            import mx.controls.Alert;
            import mx.controls.Button;
            import mx.controls.Label;
            import mx.controls.Text;

            private var urlLdr:URLLoader=new URLLoader;
            private var childName:String;
            private var i:int=0;
            private var arrayCollection:ArrayCollection=new ArrayCollection;
            private function loadXML(targetURL:String):void 
            {
                urlLdr.load(new URLRequest(targetURL));
                urlLdr.addEventListener(Event.COMPLETE,urlLdr_complete);
            }
            private function urlLdr_complete(event:Event):void
            {

                var xmlData:XML=new XML(URLLoader(event.currentTarget).data);
                handleOneNode(xmlData);
            }
            private function handleOneNode(node:XML,parent:XML=null):void 
            {
            var children:XMLList=node.children();
            if(children.length()==0)
            {i++;
                childName=node.name();
                switch(childName.toString())
                {
                    case "Button":
                    {

                        var myButton:Button=new Button();
                        myButton.x=node..@x;
                        myButton.y=node..@y;
                        myButton.height=node..@height;
                        myButton.width=node..@width;
                        myButton.label=node..@label;
                        myCanvas.addChild(myButton);
                        break;
                    }
                    case "TabNavigator":
                    {
                        var myTabNavigator:TabNavigator=new TabNavigator();
                        myTabNavigator.x=node..@x;
                        myTabNavigator.y=node..@x;
                        myTabNavigator.height=node..@height;
                        myTabNavigator.id=node..@id;
                        myTabNavigator.width=node..@width;
                        break;
                    }
                    case "Datechooser":
                    {
                        break;
                    }
                    case "Label":
                    {
                        var myLabel:Label=new Label();
                        myLabel.x=node..@x;
                        myLabel.y=node..@x;
                        myLabel.height=node..@height;
                        myLabel.id=node..@id;
                        myLabel.width=node..@width;
                        myLabel.text=node..@text;
                        myCanvas.addChild(myLabel);
                    }
                    case "TextInput":
                        var myText:Text=new Text;
                        myLabel.x=node..@x;
                        myLabel.y=node..@x;
                        myLabel.height=node..@height;
                        myLabel.id=node..@id;
                        myLabel.width=node..@width;
                        myLabel.text=node..@text;
                        myCanvas.addChild(myLabel);
                    case "TitleWindow":
                    {
                    }
                    default:
                    {
                    }
                }

            }
            else
            {
                for each(var child:XML in children)
                {
                    handleOneNode(child,node);
                }
            }
            }

        ]]>
    </fx:Script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:00:37.287

XML 类的 children() 方法只返回当前对象的直接子对象。如果您想浏览整个文档，您需要在每个孩子上递归调用您的方法。

因此，您需要编写如下内容：

```
private function handleOneNode(node:XML):void {
   var children:XMLList = node.children();
   if ( children.length() == 0 ) {
      //Handle Leaf node -> Create ui object, or whatever 
   } else {
      //Non terminal node, check children
      for each (var child:XML in children ) {
         handleOneNode(child);
      }
   }
} 
```

在你的处理程序中，你称之为：

```
var xmlData:XML=new XML(URLLoader(event.currentTarget).data);
handleOneNode(xmlData) 
```

**编辑** 为了访问父节点，您只需向 handleOneNode 函数添加一个附加参数。

```
private function handleOneNode(node:XML, parent:XML=null):void {
       var children:XMLList = node.children();
       if ( children.length() == 0 ) {
          //Handle Leaf node -> Create ui object, or whatever 
       } else {
          //Non terminal node, check children
          for each (var child:XML in children ) {
             handleOneNode(child, node);
          }
       }
    } 
```

在你的处理程序中，你称之为：

```
var xmlData:XML=new XML(URLLoader(event.currentTarget).data);
handleOneNode(xmlData) 
```

# mysql - 设置绑定地址后无法重启mysql

> ID：12137612
> 
> 赞同：1
> 
> 时间：2012-08-27T07:09:38.333
> 
> 标签：mysql, codeigniter

我已经在我的服务器上设置了 mysql。我正在尝试通过 Codeigniter 从我的 mac 远程访问 mysql。我已将绑定地址设置为我的服务器 IP。但是，设置绑定地址后，我无法重新启动 mysql。

服务器和我的 Mac 共享相同的 IP（即：我使用路由器）。这就是该绑定地址无法固定 IP 的原因。因此，它无法重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:11:58.047

是的，绑定地址必须是本地地址，而不是经过 NAT 处理的外部 IP 地址。

# java - 使用多字符 NFA for java 的高速正则表达式

> ID：12137613
> 
> 赞同：0
> 
> 时间：2012-08-27T07:09:45.770
> 
> 标签：java, regex

我正在寻找一个用于 java 的高速正则表达式匹配引擎。Java 正则表达式框架是否已知速度更快？

我还[了解到](http://cial.csie.ncku.edu.tw/st2008/pdf/HIGH-SPEED%20REGULAR%20EXPRESSION%20MATCHING%20ENGINE%20USING%20MULTI-CHARACTER%20NFA.pdf)，“使用多字符 NFA 的高速正则表达式匹配引擎”更快，是否有相同的 java 实现？编辑：这个[链接](http://swtch.com/~rsc/regexp/regexp1.html)，显示了一个更快的基于 NFA 的方法
或者在 java 中有没有其他更快的正则表达式匹配引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T08:50:17.957

您可能想看看这篇[文章](https://weblogs.java.net/blog/tomwhite/archive/2006/03/a_faster_java_r.html)以了解*dk.brics.automaton*库。根据文章中链接的基准，它比 JDK 实现快大约 x20。

链接库是由 Anders Møller 编写的，并且已经过[mavenized](http://mvnrepository.com/artifact/dk.brics.automaton/automaton/1.11-8)。

# r - ggpairs 与颜色分组的整体相关性？

> ID：12137614
> 
> 赞同：11
> 
> 时间：2012-08-27T07:09:49.440
> 
> 标签：r, graphics, ggplot2

这段代码产生了一个很好的配对图，在中间右侧有一个相关读数：

```
library(GGally)
ggpairs(esoph[,c(1,4,5)], colour='agegp') 
```

您可以通过以下方式获得相关平方：

```
ggally_cor(data=esoph[,c(1,4,5)],
           mapping=aes(x=ncases, y=ncontrols, colour='agegp')) 
```

正方形包含每组的相关性。有没有办法让整体数据集的相关性也出现？如果你不使用`colour=...`，那么你会得到它，但是你不会得到每组的相关性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T17:26:33.960

我现在可以验证这是否适用`GGally_0.4.4`于`R version 3.0.1 (2013-05-16)`on `Platform: x86_64-pc-linux-gnu (64-bit)`

```
library(GGally)
ggally_cor(data=esoph[,c(1,4,5)],
       mapping=aes(x=ncases, y=ncontrols, colour='agegp')) 
```

看到整体相关性出现在顶部，并且与我从该命令获得的数字一致：

```
ggally_cor(data=esoph[,c(1,4,5)],
       mapping=aes(x=ncases, y=ncontrols)) 
```

![](../Images/33efb5b385285561b1b9768b717af6b5.png)

# c - int数组到C中的结构数组

> ID：12137616
> 
> 赞同：2
> 
> 时间：2012-08-27T07:09:52.920
> 
> 标签：c, arrays, struct

我正在使用带有 mingw GCC 编译器的 Code-Blocks 来用 C 编写我的程序。我定义了一个函数，其中输入是一个 type 的数组`int`。我有另一个`struct`定义为

```
typedef struct {
float re;
float im;
}complex_float; 
```

我想将 int 类型数组转换为`complex_float`类型数组，因为我需要处理`complex_float`格式中的数据。我正在使用以下指针方法进行转换

```
complex_float *comSig = (complex_float *) sigbuf; 
```

其中`sigbif`是`int`指向整数数组起始地址的指针。

但是当我这样做时，我会`printf("%f",comSig[0].re);`得到一些垃圾值，例如`-1.#QNAN0`.

我已经在 LINUX 上多次使用这种技术在数组之间进行数据转换，并且它可以工作。这是与 mingw 编译器无法正常工作有关的问题，还是与我使用不正确的方法将 int 数组转换为 struct 数组的事实有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:18:02.957

这是绝对错误的你在做什么。转换值的类型不会“转换”值，而只是告诉编译器将其视为不同的类型。由于 int 和您的结构很可能具有不同的大小，因此从它们创建的数组也是如此，因此您甚至可以写入/读取整数数组的边界。如果您真的想将整数转换为复数，则必须自己编写代码：

```
int number_of_items = 10; // e. g. there are 10 integers
int *int_arr = // however you obtain the integer array
complex_float *cpx_arr = malloc(sizeof(*cpx_arr) * number_of_items);
int i;
for (i = 0; i < number_of_items; i++)
{
    cpx_arr[i].re = (float)(int_arr[i]);
    cpx_arr[i].im = 0.0f;
} 
```

当然，不要忘记`free(cpx_arr)`使用后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T07:12:25.940

在 C 中，没有这样的转换功能。你所做的只是一个`pointer cast`.

当你这样做时会发生什么：

sigbuf 指向一个整数数组。当您将其转换为 (complex_float*) 并尝试访问第一个结构元素的实部时，您实际上访问了数组的第一个整数值，但它对您来说似乎是垃圾，因为您隐式地将其转换为浮点值。

当你有一个数组大小为 n 的整数时，让我为你说明一下。实际上你有一个这样的顺序数据：

[int0][int1][int2][int3][int4][int5][int6][int7][int8]...[intN]

当您像这样进行转换时：`complex_float *comSig = (complex_float *) sigbuf;` 编译器将像这样处理您的数据（请注意，现在它们被视为浮点数）：

[re0][im0][re1][im1][re2][im2][re3][im3][re4][im4]...[re(N/2)][im(N/2)]

所以强制转换的结果只是告诉编译器将整数数据视为浮点数，这将导致看似垃圾的输出。对于解决问题的正确方法，H2CO3 提供了另一个答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T07:17:20.770

出于优化原因，结构的大小可能与编译时的大小不同。请查看[http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)了解更多信息。但是，您可以使用 gcc 的扩展包 (http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html) 禁用它。除此之外，您还有一个潜在的未对齐访问问题。对于由架构处理的 x86 来说没问题，但为了便于代码移植，我会使用 memcpy，而不是类型转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:42:53.713

到目前为止的答案已经指出了您的方法的大部分问题，即显式值转换、结构对齐以及结构数组与 int 数组。我再补充一点：

`int and float types are both of size 4 bytes, I have checked that...`

Int 和 float 在内存中以完全不同的方式表示。

整数值用所谓[的二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示，它允许在没有额外操作的情况下添加整数并给出数字的单一表示`0`：

*   正整数简单地转换为以 2 为底。例如，`151`表示为`00000000 00000000 00000000 10010111(2)`= `2^7 + 2^4 + 2^2 + 2^1 + 2^0`。
*   负整数表示为其绝对值的二进制表示，然后将其所有位反转并在结果数上加 1。例如，`-151`表示为`11111111 11111111 11111111 01101001(2)`（与正数比较）。

另一方面，单精度浮点在 IEEE 754-2008 标准中表示为[binary32 ：](http://en.wikipedia.org/wiki/Single_precision_floating-point_format#IEEE_754_single-precision_binary_floating-point_format%3a_binary32)

*   第一位是符号位：0 表示正，1 表示负。
*   接下来的 8 位是指数，采用 2 的补码。它是**有偏差**的：从这个值中减去 127 得到实际指数。
*   接下来的 23 位表示归一化（小数点前只有 1 位）分数的小数部分。

所以`151.0`表示为`01000011 00010111 00000000 00000000`，指数为`134`（`7`无偏），尾数为`0.1796875`（`1.1796875`因为积分部分是隐式的）。

这就是为什么，如果你将 a`float *`转换为 an `int *`，这与你所做的相同，当你稍后取消引用它时，你会得到垃圾值。**H2CO3**通过赋值运算符指出了正确的转换方法。

# objective-c - InterfaceBuilder 中的连接元素

> ID：12137623
> 
> 赞同：0
> 
> 时间：2012-08-27T07:10:49.577
> 
> 标签：objective-c, interface-builder, xcode4.3

我在连接 TableView 时遇到问题（我认为这是我的错误，也许是另一个错误），我有这个错误：

```
-[NSObject tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x796aaa0 
```

这是连接的问题，不是吗？

这是我的通知.h：

```
#import <UIKit/UIKit.h>

@interface Notice : UIViewController <UITableViewDataSource, UITableViewDelegate>
{

UITableView *mainTableView;
NSMutableArray *contentsList;

}

@property (nonatomic, retain) NSMutableArray *contentsList;
@property (nonatomic, retain) IBOutlet UITableView *mainTableView;

@end 
```

在notice.m 中，我有UITableView 实现的常用方法。

这是我的界面生成器：

![在此处输入图像描述](../Images/43ad1c6741b3861abcb9179c2e9876e3.png) ![在此处输入图像描述](../Images/255c5bdb93d12155a996c3800cf19bd1.png) ![在此处输入图像描述](../Images/0553d1a70585ce2a364f7fdbf5e53580.png) ![在此处输入图像描述](../Images/0190ec4dfaf11f6071f0a092d7f88d8b.png)

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:16:39.823

您已将表的数据源出口连接到“First Responder”，而实际上您应该将其连接到视图控制器。他们不是一回事。第一响应者图标是“第一响应者”的代理，即响应者链中的当前第一个对象。它会根据程序的状态而变化，并且不太可能指向您的视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:20:58.163

首先在 xib 中设置 Tableview 委托和数据源。您收到此错误是因为您已在 .h 方法中声明了这些协议，但尚未在 .m 方法中实现数据源的 @required 方法。实现 tableview datasource 的两个必需方法。这可能会解决您的问题。

# c# - 在 Linq 中执行优先级查询

> ID：12137624
> 
> 赞同：0
> 
> 时间：2012-08-27T07:10:50.810
> 
> 标签：c#, linq-to-sql

我在数据库中有这个表：

[http://screencast.com/t/aT2uM5p0](http://screencast.com/t/aT2uM5p0)

我的列表优先级包含优先级图像的 ID。我需要执行查询以从该表中获取所有图像，按添加日期排序，并且在查询和按日期排序后，优先级列表中具有 id 的图像必须位于列表顶部。

例如：如果我在数据库中有 ID 为 1、2、3、4、5 的图像，按此顺序添加到数据库中，并且我有 ID 为 3,5 的优先级列表。所以我需要按以下顺序获取图像列表：3,5,1,2,4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:51:52.037

这是一种方法。

如果我假设您有两个列表被调用`images`（已经以“非优先”方式排序），`priorityIds`那么这可能对您有用：

```
var sortMap =
    priorityIds
        .Select((x, n) => new { x, n })
        .ToDictionary(xn => xn.x, xn => xn.n);

Func<int, int> sortFunc = n =>
{
    if (sortMap.ContainsKey(n))
    {
        return sortMap[n];
    }
    return int.MaxValue;
};

var query =
    from i in images
    orderby sortFunc(i.Id)
    select i; 
```

运行的结果`query`为您提供所需的排序。字典的使用也应该很快。

# wpf - 使用 StringAnimationUsingKeyFrames 的 WPF 字符串动画：最后一个 DiscreteStringKeyFrame 未执行

> ID：12137625
> 
> 赞同：1
> 
> 时间：2012-08-27T07:10:55.187
> 
> 标签：wpf, animation

我想使用`StringAnimationUsingKeyFrames`和动画文本框的文本`DiscreteStringKeyFrame`

```
<TextBlock x:Name="txtStateRunning" HorizontalAlignment="Center" VerticalAlignment="Center">
   <TextBlock.Triggers>
         <EventTrigger RoutedEvent="TextBlock.Loaded">
             <BeginStoryboard>
                 <Storyboard x:Name="textAnimation">
                     <StringAnimationUsingKeyFrames Storyboard.TargetName="txtStateRunning" 
                                                           Storyboard.TargetProperty="Text" RepeatBehavior="Forever" AutoReverse="False" >
                         <DiscreteStringKeyFrame Value="Running ."   KeyTime="0:0:0" />
                         <DiscreteStringKeyFrame Value="Running .."  KeyTime="0:0:0.5" />
                         <DiscreteStringKeyFrame Value="Running ..." KeyTime="0:0:1" />
                         <DiscreteStringKeyFrame Value="Running ...." KeyTime="0:0:1.5" />
                     </StringAnimationUsingKeyFrames>
                 </Storyboard>
             </BeginStoryboard>
            </EventTrigger>
        </TextBlock.Triggers>
    </TextBlock> 
```

在代码中我有 4 *`DiscreteStringKeyFrame`但实际上我只看到 3 * 正在运行。`DiscreteStringKeyFrame`at time 1.5 未执行。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:46:28.570

这是因为您的最后一帧开始显示并立即被第一帧替换。

您可以通过在最后添加一个 DiscreteStringKeyFrame 来修复它：

```
<DiscreteStringKeyFrame Value="" KeyTime="0:0:2" /> 
```

或者通过设置`Duration`StringAnimationUsingKeyFrames：

```
<StringAnimationUsingKeyFrames Duration="0:0:2" ... 
```

# magento-1.6 - Magento COD 密码限制

> ID：12137636
> 
> 赞同：0
> 
> 时间：2012-08-27T07:12:05.537
> 
> 标签：magento-1.6

magento 运输选项仅限于 pincode。我想将我的 cod 选项限制为一些 pincodes.PLZ HELP

```
<?php
    //Edit pincodes here ...
    $def_pin_u = '110058,112233,114455,220034';
    $v_u = Mage_Checkout_Block_Onepage_Progress::getShipping()->format();
    $l_u = strlen($v_u) - 1;
    for ($c_u = $l_u; $v_u[$c_u] != ','; $c_u--):
        $s_u = $c_u - 1;
    endfor;
    $s_u = $s_u - 1;
    for ($c2_u = $s_u; !is_numeric($v_u[$c2_u]); $c2_u--):
        $s_u = $c2_u - 1;
    endfor;
    for ($c3_u = $s_u; is_numeric($v_u[$c3_u]); $c3_u--):
        $s2_u = $c3_u;
    endfor;
    $se_u = $s_u-$s2_u + 1;
    $pin_u = substr($v_u, $s2_u, $se_u);
    $arr_pin_u = explode(',', $def_pin_u);
    $flg_u = 0;
    for ($c4_u = 0; $arr_pin_u[$c4_u]; $c4_u++):
        if ($pin_u == $arr_pin_u[$c4_u]):
            $flg_u = 1;
        endif;
    endfor;
?>
<?php if(($_code == 'cashondelivery' && $flg_u == 1) || ($_code != 'cashondelivery')): ?> 
```

我得到的错误

```
Fatal error: Class 'Mage_Shipping_Model_Config' not found in /home/demo2/public_html/app/code/core/Mage/Tax/Model/Calculation.php on line 243
Fatal error: Call to a member function setStoreId() on a non-object in /home/demo2/public_html/app/code/core/Mage/Checkout/Model/Session.php on line 109 
```

# html - HTML5 画布 isPointInPath() 方法

> ID：12137642
> 
> 赞同：0
> 
> 时间：2012-08-27T07:12:33.947
> 
> 标签：html, canvas

作为漏斗图的一部分，我在画布上绘制平行四边形。为了方便单击平行四边形（即漏斗的段），我存储坐标并检查鼠标坐标以查看鼠标是否在正确的区域。这工作得很好，花花公子。

但是现在我遇到了 .isPointInPath() 方法（只花了四年时间）。所以我想知道使用这些坐标是否会更快（肯定会更容易）：

1) 重放路径，无需抚摸或填充它，因此它不可见 2) 使用此 .isPointInPath() 方法检查鼠标坐标

当点击发生并开始检查时，可能有多个段要检查 - 例如 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:39:16.957

通常取决于笔画或图形的填充，鼠标检测坐标应该改变（从像素完美检测的角度来看），因此在重绘平行四边形时，您应该尽可能准确。

话虽如此，通常最好的方法是在屏幕外的画布中执行此操作。您可以使用辅助画布一一重绘平行四边形，并使用[isPointInPath()](http://www.w3.org/TR/2dcontext/#dom-context-2d-ispointinpath)检查您的状况。不过，您必须非常小心使用此方法，因为如果该点位于画布的当前默认路径中，它会返回 true，并且取决于您绘制图形的方式，它可能并不总是符合您的预期:)

另一种解决方案是逐个绘制图形，并使用[getImageData()](http://www.w3.org/TR/2dcontext/#dom-context-2d-getimagedata)来检测鼠标坐标中是否有颜色，这意味着图形被击中。[你可以在这里](https://stackoverflow.com/questions/6735470/get-pixel-color-from-canvas-on-mouseover)看到一个例子

希望这可以帮助

# c - Why Linux USB driver is transmitting anomalous value over the wire

> ID：12137651
> 
> 赞同：0
> 
> 时间：2012-08-27T07:13:17.527
> 
> 标签：c, linux, usb, driver

I am trying to understand a Linux driver for a USB Wi-Fi card by working through the source code and correlating it against a USB I/O hex dump collected using `usbmon`. It's been going quite well but there is just one byte amongst thousands similar to it that seems to not correlate back to the source code. Specifically, it is `Line 726` in `/drivers/staging/rtl8187se/r8180_rtl8225z2.c` (inside the Linux kernel source directory), which reads:

```
write_phy_ofdm(dev, 0x02, 0x62); mdelay(1); 
```

I expect this line to result in 4 USB writes, namely with the third write payload being a `0x62`. Instead, the third write payload as reported by `usbmon` as being transmitted on the wire is`0x42` (not `0x62`). To illustrate, here is the output from `usbmon` for this specific call (last column of every second line are the four payloads `0x00`, `0x00`, `0x42`, `0x82`):

```
ffff88011d317600 2404077138 S Co:2:004:0 s 40 05 ff7f 0000 0001 1 = 00
ffff88011d317600 2404077255 C Co:2:004:0 0 1 >
ffff88008d9a0600 2404077263 S Co:2:004:0 s 40 05 ff7e 0000 0001 1 = 00
ffff88008d9a0600 2404077380 C Co:2:004:0 0 1 >
ffff88011d317000 2404077388 S Co:2:004:0 s 40 05 ff7d 0000 0001 1 = 42
ffff88011d317000 2404077505 C Co:2:004:0 0 1 >
ffff88008d9a09c0 2404077513 S Co:2:004:0 s 40 05 ff7c 0000 0001 1 = 82 
```

And below are the relevant function definitions:

**/drivers/staging/rtl8187se/r8180_core.c**

```
inline void write_phy_ofdm(struct net_device *dev, u8 adr, u32 data)
{
    data = data & 0xff;
    rtl8185_write_phy(dev, adr, data);
} 
```

and

```
void rtl8185_write_phy(struct net_device *dev, u8 adr, u32 data) {  

    u32 phyw;

    adr |= 0x80;

    phyw = ((data<<8) | adr);

    /* Note that, we must write 0xff7c after 0x7d-0x7f to write BB register. */
    write_nic_byte(dev, 0x7f, ((phyw & 0xff000000) >> 24));
    write_nic_byte(dev, 0x7e, ((phyw & 0x00ff0000) >> 16));     
    write_nic_byte(dev, 0x7d, ((phyw & 0x0000ff00) >> 8));  
    write_nic_byte(dev, 0x7c, ((phyw & 0x000000ff)));

    /* this is ok to fail when we write AGC table. check for AGC table might
    be   * done by masking with 0x7f instead 
    of 0xff      */     /* if (phyr != (data&0xff)) 
    DMESGW("Phy write timeout %x %x %x", phyr, data, adr); */ 
} 
```

and

```
void write_nic_byte(struct net_device *dev, int x, u8 y)
{
    writeb(y, (u8 *)dev->mem_start + x);
    udelay(20);
} 
```

**/arch/xtensa/include/asm/io.h**

```
#define writeb(b, addr) (void)((*(volatile unsigned char *)(addr)) = (b)) 
```

Running through the call order, we start with `write_phy_ofdm(dev, 0x02, 0x62);`. `write_phy_ofdm()` bitmasks `data` with the line `data = data & 0xff`, but `0x62` only occupies the lower byte anyway, so this doesn't change `data` at this point. So `write_phy_ofdm` passes `0x62` onwards as the `data` argument to `rtl8185_write_phy()`. `rtl8185_write_phy` packs `data` and `adr` into the lower 16 bits of a u32 with the line `phyw = ((data << 8) | adr);`. Note that `data` just shifts up 8-bits and because `adr` only occupies the lower 8-bits, OR'ing them doesn't modify the data portion of `phyw`. The first two `write_nic_byte()` calls write the highest and second highest order bytes of `phyw` out to addresses `0xff7f` and `0xff7e` respectively. Because the two highest order bytes of `phyw` are unoccupied, these result in two payloads of `0x00` as expected. **The third `write_nic_byte()` call** is the one giving me grief. I expect it to be simply bitshifting the data `0x62` back down to the lowest order byte and transmitting `0x62`. Why it is transmitting `0x42` is what escapes me.

I must admit my understanding of the low level `writeb()` calls is merky, and perhaps this is where something unexpected is happening. The only scent of any clue at all I could find is in a [diff from 2009](https://lkml.org/lkml/2009/11/10/492) which contains the line: `write_phy_ofdm(dev, 0x02, ((priv->card_type == USB) ? 0x42 : 0x62)); mdelay(1);` (note the value `0x42` rearing its ugly head). I should note that I've even recompiled the kernel driver and added it into the running kernel with `rmmod rtl8187`/`insmod /path/to/my/compiled/.ko/file` just to be sure the source I had was consistent with the running driver (not newer or older), but I still get `0x42` instead of `0x62`.

Can anyone suggest where I might be going wrong? I'm all out of ideas.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:35:07.327

所以事实证明我什至没有查看正确的函数定义，因为有两个函数`rtl8225z2_rf_init()`在不同的文件中命名。一个在`/drivers/staging/rtl8187se/r8180_rtl8225z2.c`（我正在查看的未执行的版本）和另一个在`/drivers/net/wireless/rtl818x/rtl8187/rtl8225.c`（我没有查看的正确版本，正在执行）。它们只是略有不同，但一种用途`write_phy_ofdm(dev, 0x02, 0x62);`而另一种用途`write_phy_ofdm(dev, 0x02, 0x42);`。这里的教训是，不要依赖在 Emacs 中导航到带有标签的函数定义。

# objective-c - 我们不应该再@synthesize 了吗？

> ID：12137654
> 
> 赞同：0
> 
> 时间：2012-08-27T07:13:24.833
> 
> 标签：objective-c, ios, xcode

现在随着新 Xcode 的发布，据说属性会自动合成，而且实际上只要您使用`'_'`前缀，它们就可以在不合成的情况下访问。但我最近发现 Xcode 允许我以另一种方式访问​​这些属性 - 使用`'self.*'`前缀（其中 * 是属性的名称）。

它是否正确？我应该使用它吗？它会损害我的代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:23:02.003

使用它的 getter/setter`_yourProperty`访问实例变量。`self.yourProperty`只要您确定没有定制的 getter/setter，两者都是相同的（getter/setter 的性能损失非常小）。但是，一般来说，您应该使用 getter/setter 方法（除了 getter/setter 本身），以防您以后更改代码。

**编辑：**

@Vanthel：下划线是纯粹的约定。没有`@synthesize`（或有`@synthesize foo`），编译器为一个属性生成`foo`一个变量`_foo`。但是，通过您分配要由 的访问者访问`@synthesize foo = my_bar`的变量。`my_bar``foo`

# android - android ApplicationInfo.sharedLibraryFiles return null

> ID：12137658
> 
> 赞同：2
> 
> 时间：2012-08-27T07:14:04.503
> 
> 标签：android

I have installed an app on emulator, pkg name="com.example.plug". In data/data/com.example.plug/lib, there is a "libplugin1.so" file.

Now I want to get it in my own app.

I get the packageName, and then the "nativeLibraryDir", but when I try to get the `String[] sharedLibraryFiles`, it returns null to me.

My codes are below:

```
Log.d(TAG, "pkgName=" + pkgName);// fine com.example.plug

ApplicationInfo appInfo = pm.getApplicationInfo(pkgName, PackageManager.GET_SHARED_LIBRARY_FILES);

Log.d(TAG, appInfo.nativeLibraryDir);       // API 9 /data/data/com.example.plug/lib

String[] soList = appInfo.sharedLibraryFiles;   //null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-13T13:23:28.777

它对我有帮助：

```
packageManager.getInstalledPackages(PackageManager.GET_SHARED_LIBRARY_FILES) 
```

# android - Android ICS WebViewClient onReceivedHttpAuthRequest 不再返回 UserId 和 Password

> ID：12137664
> 
> 赞同：0
> 
> 时间：2012-08-27T07:14:25.380
> 
> 标签：android, android-webview

我有一个 WebView 可以在以前版本的 Android 操作系统上正常工作，但在加载 Ice Cream Sandwich 设备时出现问题。我尝试加载的页面需要 BASIC AUTH 并且出于非安全目的传入查询字符串参数。

**问题在于 WebViewClient.onReceivedHttpAuthRequest 方法：**

```
 String[] up = view.getHttpAuthUsernamePassword(host, realm); 
```

它返回一个空数组而不是用户的 ID 和密码。任何人都知道为什么这在 Android ICS 中的作用不同？我得到了其他版本的操作系统的用户 ID 和密码。

**完整代码：**

```
public class DestinationWebViewScreen extends Activity{

    WebView mWebView;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.destination_webview);

            mWebView = (WebView) findViewById(R.id.social_destination_webview);
            mWebView.getSettings().setJavaScriptEnabled(true);
            mWebView.getSettings().setLoadsImagesAutomatically(true);
            mWebView.clearCache(true);
            mWebView.clearFormData();
            mWebView.clearHistory();   
            mWebView.getSettings().setBuiltInZoomControls(true); 

            mWebView.setHttpAuthUsernamePassword("HOST_OF_WEBAPP","Spring Security Application", "USERID", "PASSWORD");

            mWebView.setWebViewClient( new WebViewClient() { 
                @Override 
                public void onReceivedHttpAuthRequest  (WebView view, 
                        HttpAuthHandler handler, String host,String realm){ 

                    String[] up = view.getHttpAuthUsernamePassword(host, realm); 
                    if( up != null && up.length == 2 ) { 
                        handler.proceed(up[0], up[1]); 
                    } 
                }

                @Override
                public void onPageStarted(WebView view, String url, Bitmap favicon) {
                    super.onPageStarted(view, url, favicon);

                    if(progressDialog != null){
                        progressDialog.dismiss();
                    }

                    showProgressbar();
                }

                @Override
                public void onPageFinished(WebView view, String url) {              
                    super.onPageFinished(view, url);

                    dismissProgressDialog();
                }

                @Override
                public void onReceivedError(WebView view, int errorCode,
                        String description, String failingUrl) {                
                    super.onReceivedError(view, errorCode, description, failingUrl);

                    dismissProgressDialog();

                }

            });

    mWebView.loadUrl("https://webapphost/webapp?customerId=0-222293");

    IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);        
            registerReceiver(networkStateReceiver, filter);
    }

    public void showProgressbar() {
        progressDialog = new CustomProgressDialog(SocialDestinationWebViewScreen.this); 
        progressDialog.getWindow().setBackgroundDrawable(getResources().getDrawable(android.R.color.transparent));
        progressDialog.setMessage(SocialDestinationWebViewScreen.this.getResources().getString(R.string.loading));
        progressDialog.show();
    }

    void dismissProgressDialog(){

        if(progressDialog != null){
            progressDialog.dismiss();
        }

        progressDialog = null;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:32:28.673

您是否检查过您在#onReceivedHttpAuthRequest 中收到的内容？

我只是修正了你所说的。似乎 ICS 作为“主机”返回的不仅是主机，还有端口，例如：HOST_OF_WEBAPP:80。

因此，如果您在#onReceivedHttpAuthRequest 中收到“HOST_OF_WEBAPP:80”，则不会检索您存储为“HOST_OF_WEBAPP”的内容。

试试看！

# iphone - “_OBJC_CLASS_$_FGalleryViewController”，引用自：

> ID：12137665
> 
> 赞同：-4
> 
> 时间：2012-08-27T07:14:29.337
> 
> 标签：iphone

架构 i386 的未定义符号：“_OBJC_CLASS_$_FGalleryViewController”，引用自：Home.o ld 中的 objc-class-ref：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:37:42.233

我相信名为`FGalleryViewController`的类与项目目标无关。请检查一次。

# c# - 在jQuery中构建数组

> ID：12137667
> 
> 赞同：2
> 
> 时间：2012-08-27T07:14:35.517
> 
> 标签：c#, jquery, arrays, asp.net-mvc-3

我有 MVC 3 应用程序，并且我有`Dictionary<String,int>`c# 类型的字典。我已使用 ViewBag 将此字典从 Index 操作传递给 Layout 视图。布局视图由 jquery 代码组成。在这里，我想在 jquery 中构建如下数组。

```
var s1 = [['06/15/2009 16:00:00', 112000], ['06/16/2009 16:00:00', 122000], ['06/17/2009 16:00:00', 104000], ['06/18/2009 16:00:00', 99000], ['06/19/2009 16:00:00', 121000],
            ['06/20/2009 16:00:00', 148000], ['06/21/2009 16:00:00', 114000], ['06/22/2009 16:00:00', 133000], ['06/22/2009 16:00:00', 161000], ['06/23/2009 16:00:00', 173000]]; 
```

如何在 jquery 数组上构建循环遍历使用 viewbag 传递的字典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:18:35.850

> 如何在 jquery 数组上构建循环遍历使用 viewbag 传递的字典。

首先，没有像*jquery array*这样的概念。它被称为[*javascript 数组*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)。其次，您为什么要循环播放？

使用 JSON 序列化程序为您完成这项工作：

```
@model Dictionary<string, int>
<script type="text/javascript">
    var s1 = @Html.Raw(
        Json.Encode(
            Model.Select(x => new object[] { x.Key, x.Value })
        )
    );
</script> 
```

哦，对不起，我忘了你正在使用`ViewBag`而不是查看模型（这是你应该使用的）。在这种情况下，您需要将填充到此 ViewBag 中的任何内容转换为相应的类型，然后才能对其执行有用的操作（例如 LINQ 查询）：

```
<script type="text/javascript">
    var s1 = @Html.Raw(
        Json.Encode(
            ((Dictionary<string, int>)ViewBag.SomeDict).Select(x => new object[] { x.Key, x.Value })
        )
    );
</script> 
```

# jquery - jFileUpload does't support chinese file names

> ID：12137668
> 
> 赞同：0
> 
> 时间：2012-08-27T07:14:40.277
> 
> 标签：jquery, file-upload

I am using jFileUpload control and it worked great till now..

But now i am facing problem in uploading the files having chinese name like abc教程.mp4

I tried the following..

```
<param name ="resources" value="i18n"/> 
```

as well...

The control shows the file name in jFileUpload Progress Message perfectly..

But it shows abc??.mp4 in java consol..

Please help me out here.. Is there anything i am missing? is there anything i need to do with IIS..since i am running my application on IIS Server..?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:31:27.483

抱歉，我是 apache 用户，但您可以在 html 中尝试：

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /> 
```

或 http 标头中的这个（在 IIS 设置中设置或使用某种服务器端脚本功能）

```
Content-Type: text/html; charset=utf-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:47:40.160

只需要在 jFileUpload 中添加这个参数

```
<param name="encoding" value="UTF8"> 
```

..完美解决了..！

# javascript - 包装一个 nodeValue

> ID：12137679
> 
> 赞同：1
> 
> 时间：2012-08-27T07:15:30.570
> 
> 标签：javascript, jquery

我尝试在这段代码中换行

```
<div class="div">
    <span></span>
    <a></a>
    *text I want to wrap*
    <span></span>
</div> 
```

我知道文本是什么，但我不知道他在 div 中的位置是什么

```
$(".div:contains('*text*')") 
```

我得到了这样的正确 div，但我不知道如何包装我的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:27:42.157

假设您要包装*所有*文本（当然，我可能错了），我建议：

```
$('.div').contents().each(
    function(){
        if (this.nodeType == 3) {
            $(this).wrap($('<a />', {'href':'#'}));
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zaR4a/3/)。

如果您只想包装*特定*文本：

```
$('.div').contents().each(
    function(){
        if (this.nodeType == 3 && this.nodeValue.trim() == "*text I want to wrap*" ) {
            $(this).wrap($('<a />', {'href':'#'}));
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zaR4a/2/)。

鉴于您更喜欢将 HTML 视为字符串的简单方法，我想我会发布一个比您接受的更简单的答案：

```
$('.div').html(
    function(i,h){
        return h.replace('*text I want to wrap*','<b>$&</b>');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zaR4a/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:34:50.490

最简单的方法是获取父元素的 html 并用新字符串替换字符串

```
newHtml = $(".div").html().replace("*text I want to wrap*","<b>new html</b>"); 
```

现在将新的 Html 放回父 div

```
 $(".div").html(newHtml); 
```

[示例小提琴](http://jsfiddle.net/gajjuthechamp/SFjRU/)

# android - 在适配器中获取 android 上下文

> ID：12137680
> 
> 赞同：58
> 
> 时间：2012-08-27T07:15:33.880
> 
> 标签：android, android-adapter, android-context

在我在 Internet 上找到的许多代码示例中，`context`都是在适配器的构造函数中获得的。

此上下文用于获取方法`inflater`中的视图膨胀`getView`。

我的问题是，当它可以像这样轻松获得时，为什么还要麻烦在构造函数中获取上下文

```
 LayoutInflater inflater;
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if(inflater == null){
            Context context = parent.getContext();
            inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            }
            ...
            ...

            return convertView;
        } 
```

还有什么理由不使用上述方法，因为到目前为止我在使用它时没有遇到任何问题。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-27T09:08:06.153

Obtaining the Context in the constructor has (at least) three advantages:

1.  You only do it once, not every time, `getView()` is called.
2.  You can use it for other purposes too, when needed.
3.  It also works, when `parent` is `null`.

However, if you don't have any problems with your solution, you might as well stick to it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-18T08:28:30.520

Here is an example:

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    Holder holder;
    if (view == null) {
        view = LayoutInflater.from(parent.getContext())
                .inflate(R.layout.item_job, parent, false);
        holder = new Holder(view, this);
        view.setTag(holder);
    } else {
        holder = (Holder) view.getTag();
    }

    holder.parse(getItem(position), position);
    return view;
}

public class Holder {

    @Bind(R.id.type)
    TextView type;
    @Bind(R.id.date_time)
    TextView dateTime;
    @Bind(R.id.grade)
    TextView grade;

    public Holder(View view) {
        ButterKnife.bind(this, view);
    }

    public void parse(final GetGradeHistoryResponse.GradeHistory item) {
        if (item.grade < 0) {
            grade.setTextColor(App.getInstance()
                    .getResources().getColor(R.color.withdraw_status));
            grade.setText(String.valueOf(item.grade));
        } else {
            grade.setTextColor(App.getInstance()
                    .getResources().getColor(R.color.primary));
            grade.setText("+" + String.valueOf(item.grade));
        }

        type.setText(item.type);
        dateTime.setText(item.datetime);
    }
} 
```

You can get context by `view.getContext() in the Holder`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-21T08:20:30.077

**Just simple like this!!**

```
class RecentlyAdapter(var data: List<String>) : Adapter<RecentlyAdapter.HomeViewHolder>() {

override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): HomeViewHolder {
    val inflater = LayoutInflater.from(parent.context)
    val view = inflater.inflate(R.layout.card_recently_played, parent, false)
    return HomeViewHolder(view)
}

override fun getItemCount(): Int {
    return data.size
}

override fun onBindViewHolder(holder: HomeViewHolder, position: Int) {

}

class HomeViewHolder(itemView: View): ViewHolder(itemView) {
    init {
        itemView.setOnClickListener {
            val intent = Intent(itemView.context, MusicPlayerActivity::class.java)
            var context = itemView.context
            context.startActivity(intent)
        }
    }
}

} 
```

**To get context use itemView.context**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T07:30:54.747

如果有人将创建一个用于`BaseAdapter`在某处存储视图的类（并且，也许稍后会将它们附加到父级）怎么办？在这种情况下`parent`可能是`null`。

这不是什么大问题，自己决定什么更好。

例如：

```
public class MockWithAdapter{

    private BaseAdapter mAdapter;

    public MockWithAdapter(BaseAdapter adapter){
        mAdapter = adapter;
    }

    public List<View> mock(){
        int size = mAdapter.getCount();
        List<View> views = new ArrayList(size);
        for(int i=0; i<size; i++)
            views.add(mAdapter.getView(i, null, null));

        return views;
    }
} 
```

然后你可以随心所欲地使用这个视图：

```
MockWithAdapter m = new MockWithAdapter(adapter);
ListView lv = new ListView(context);
for(View v : m.mock)
    lv.addView(v); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-18T11:19:53.193

Yes but if you need any activity reference like for example dialog alert you cannot use context reference , therefore constructor should receive activity reference from calling Activity/Fragment

# ios - Cocos2d-iphone - Sphero 集成

> ID：12137681
> 
> 赞同：3
> 
> 时间：2012-08-27T07:15:35.460
> 
> 标签：ios, objective-c, uiviewcontroller, cocos2d-iphone, sphero-api

我正在尝试将 Sphero 连接到我正在构建的 Cocos2d 游戏。Sphero 有一些很好的[文档](https://github.com/orbotix/Sphero-iOS-SDK#integrating-into-an-existing-project)和示例，我可以运行示例代码。我从一个 cocos2d 项目开始，并添加了 Sphero 框架。我无法获得对球的基本命令。我相信问题出在这个功能上：

```
-(void)setupRobotConnection 
{
    /*Try to connect to the robot*/
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleRobotOnline) name:RKDeviceConnectionOnlineNotification object:nil];

    if ([[RKRobotProvider sharedRobotProvider] isRobotUnderControl]) 
         [[RKRobotProvider sharedRobotProvider] openRobotConnection];        

} 
```

（其余代码在链接中）我相信它与NSNotificationCenter有关。我从 CCLayerColor 调用此代码，而不是像演示那样使用 UIViewController。我收到此错误：

```
2012-08-25 01:54:19.738 bgmmo[1414:2d07] ERROR - opening session failed as protocol com.orbotix.robotprotocol is not declared in Info.plist 
```

（这在[Sphero IOS 论坛](http://forum.gosphero.com/showthread.php?926-Sphero-Cocos2d-ios)中得到了回答）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T19:15:12.443

> 您需要将外部附件协议字符串添加到您的 Info.plist。为您的应用程序目标编辑 Info.plist 并为键“支持的外部附件协议”添加一个条目，这将创建一个数组输入。将“com.orbotix.robotprotocol”作为字符串项添加到数组中。

# javascript - 使用javascript隐藏特定UL中的href元素

> ID：12137685
> 
> 赞同：0
> 
> 时间：2012-08-27T07:15:44.877
> 
> 标签：javascript, jquery, html, css, href

我们如何在特定的 UL 元素中隐藏 href 元素（不是在所有 UL 元素中，因为 UL 元素具有相同的名称）。

例如，我们有这样的 HTML 代码：

```
<ul class="UL_tag">
  <li>Text 1</li>
  <li>Text 2</li> 
  <li><a href="http://www.google.com" class="description">Link to GOOGLE</a></li>
</ul>   

<ul class="UL_tag">
  <li>Text 1</li>
  <li>Text 2</li> 
  <li><a href="http://www.yahoo.com" class="description">Link to Yahoo</a></li>
</ul> 
```

我们可以使用以下代码隐藏这些href：

```
$('a.description').hide(); 
```

如果我只想隐藏一个 UL 元素中的一个 href 元素，我应该如何更改这个 javascript 代码？不是所有类名为“description”的 href 元素？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:19:08.897

您可以使用 attr href 选择器：

```
$('a[href="http://www.yahoo.com"]').hide(); 
```

这是一个示例链接，您可以使用不同的方法：

*   [http://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)
*   [http://api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/)

这个问题也相关：[jQuery cant access element with its attr href // simple tabs structure](https://stackoverflow.com/questions/11048770/jquery-tabs-cant-access-element-with-its-href)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:18:57.157

`id`你应该给每个适当的 s `<ul>`：

```
<ul class="UL_tag" id="firstList">
  <li>Text 1</li>
  <li>Text 2</li> 
  <li><a href="http://www.google.com" class="description">Link to GOOGLE</a></li>
</ul>   

<ul class="UL_tag" id="secondList">
  <li>Text 1</li>
  <li>Text 2</li> 
  <li><a href="http://www.yahoo.com" class="description">Link to Yahoo</a></li>
</ul> 
```

进而：

```
$('#firstList a.description').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:32:41.127

通过标记名和类选择元素，然后过滤 href 值：

```
$('a.description[href="http://www.google.com"]').hide(); 
```

您还可以将结果限制为仅类内的元素`.UL_tag`：

```
$('a.description[href="http://www.google.com"]', '.UL_tag').hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:33:44.500

**HTML：**

```
<ul class="UL_tag">
  <li>Text 1</li>
  <li>Text 2</li>
  <li><a href="http://www.google.com" class="description">Link to GOOGLE</a></li>
</ul>   

<ul class="UL_tag">
  <li>Text 1</li>
  <li>Text 2</li>
  <li><a href="http://www.yahoo.com" class="description">Link to Yahoo</a></li>
</ul> 
```

**查询：**

```
 var d = $('.UL_tag li').children('a')[1]; // If you remove first href element  change it to value "1" to "0"
 $(d).hide(); 
```

**看到这个演示：http:** [//jsfiddle.net/7aNRZ/8/](http://jsfiddle.net/7aNRZ/8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T17:50:11.553

感谢您的回答，我认为所有这些答案也是正确的答案，但我想要实现的有点不同。实际上有 3 个 li 元素（其中两个带有 href 标签）：

```
 <ul class="UL_tag"> 
   <li>There you can download something.</li> 
   <li><a href="rapidshare.com/file.zip"; class="start">Download</a></li> 
   <li><a href="google.com"; class="description">Link to GOOGLE</a></li> 
</ul> 
```

当您单击“下载”链接时，将调用 javascript：

```
$(function(){
    var seconds = 10;
    var canClick = true;
    seconds *= 1000;

    $('a.start').bind('click', function(){
      if(canClick){
        var link = $(this).attr('href');
        var loader = $('input[name="link"]').val();

        $(this).html('<img src="' + loader + '"/>');
        setInterval(function(){
            window.location.reload();
            window.location = link; 
        }, seconds);
        // Description will be hidden everywhere.
        // How we can hide description in only one
        // row. In row where the a.start was called?
        $('a.description').hide();

        canClick = false;
        }
        return false;
    });
}); 
```

它将显示“加载 gif”，10 秒后用户将重定向到下载页面。

那么是否可以只在一行中隐藏“描述”而不是在任何地方。就在我们称之为“开始”功能的一排？

当所有 UL 和 li 具有相同的类名时，最大的问题是只隐藏一个 li 元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T18:01:59.423

可以遍历dom获取父ul中的元素

```
$(this).parent().siblings().find('a.description').hide();
// get current clicked > parent li > siblings > find a.description in li siblings > hide 
```

[http://jsfiddle.net/CjfXu/1/](http://jsfiddle.net/CjfXu/1/)

**编辑**

因为你的 li 实际上也被包裹在一个跨度内.. .parent 将无法工作，因为它正在获取 span 元素。您需要使用 .closest() - 获取匹配的最近祖先

```
$(this).closest('li').siblings().find('.description').hide(); 
```

也不要在另一个 click 事件中绑定 click 事件，因为这会导致 dom 将多个事件处理程序附加到元素。始终在 document.ready 函数内绑定。动态创建的元素或当您有许多需要绑定的元素时，使用委托将是最有效的方法。

你有这样的代码

```
$('a.start').bind('click', function(){ // <-- this should be $('a:not(.start)').bind 
     // code

     $('a.start').click(function(e) {            
         $(this).parent().siblings().find('.description').hide();
     });            

}); 
```

每次单击第一个锚时，哪个锚与 class=start 绑定任何锚

使用委托

```
$('parentElement').on('click','element', function(){

}) 
```

或 jQuery 1.6 及以下

```
$('parentElement').delegate('element','click', function(){

}); 
```

# php - Sending Email to @facebook

> ID：12137688
> 
> 赞同：1
> 
> 时间：2012-08-27T07:16:11.600
> 
> 标签：php, facebook, email

```
<?php
$to = "adi.mathur2@facebook.com, ";
$subject = " Hi ";
$message = "  this time..  ";
$from = "aditya169@facebook.com";
$headers = "From: $from\r\n";
$headers .= "Return-Path: aditya169@facebook.com\r\n"; 
    $headers .= "Content-Type: text/plain\r\n"; 
mail($to,$subject,$message,$headers,"-f$from");
echo " successful!!";
?> 
```

I am trying to send this email but it doesn't send to the Facebook Email. When I change the to field to my Gmail ID then I can receive the Email.

Is it that the email is marked as Spam? or something? I cant even see the email in the Other folder on Facebook.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:22:52.587

发送到*{user}@facebook.com*的不是来自朋友的消息被放入`Messages/Other`子文件夹中，我认为它们甚至不会在 Facebook 顶部栏中生成通知——因此用户很可能只会“通过事故”。

此外，Facebook 文档中的某处表示，这些电子邮件地址仅用于用户间通信，应用程序**不应**将其用作与用户交流的方式。应用程序请求是执行后者的指定方式。

# c# - 将变量从 cshtml razor 传递给 jquery

> ID：12137689
> 
> 赞同：5
> 
> 时间：2012-08-27T07:16:12.247
> 
> 标签：c#, jquery, asp.net-mvc, razor

我有一个部分观点，我在以下页面上调用：-

```
@Html.Partial("~/Views/Shared/ImageGallery.cshtml", Model) 
```

此页面实际 Jquery 的代码如下：-

```
<script type="text/javascript">
    $(document).ready(function () {

        $('.modal_block').click(function (e) {
            $('#tn_select').empty();
            $('.modal_part').hide();
        });

        $('#modal_link').click(function (e) {
            $('.modal_part').show();
            var context = $('#tn_select').load('/Upload/UploadImage?Page=Article&Action=Edit&id=16', function () {
                initSelect(context);
            });
            e.preventDefault();
            return false;
        });

    });
</script> 
```

现在这完美无缺，但是我需要找到一种方法将动态变量而不是硬编码变量传递给它：-

```
Upload/UploadImage?Page=Article&Action=Edit&id=16 
```

在模型中我有所有的变量，但是我不知道如何将它们插入到 Jquery 中。任何帮助将不胜感激！

- - - - -更新 - - - - - - - - - - - -

这是我放入每个需要 ImageGallery 的 cshtml 的代码。

```
</div>
    @Html.HiddenFor(model => model.PageViewModel.Page.PageTitle, new { id = "PageTitle"});
    @Html.HiddenFor(model => model.PageViewModel.Page.PageAction, new { id = "PageAction"});
    @Html.HiddenFor(model => model.ArticleViewModel.Article.ArticleID, new { id = "ArticleID"});
<div>
    @Html.Partial("~/Views/Shared/ImageGallery.cshtml", Model)
</div> 
```

ImageGallery 中的新 Javascript：-

```
<script type="text/javascript">

    var pageTitle = $('#PageTitle').val();
    var pageAction = $('#PageAction').val();
    var id = $('#ArticleID').val();
    $(document).ready(function () {
        $('.modal_block').click(function (e) {
            $('#tn_select').empty();
            $('.modal_part').hide();
        });
        $('#modal_link').click(function (e) {
            $('.modal_part').show();
            var context = $('#tn_select').load('/Upload/UploadImage?Page=' + pageTitle + '&Action=' + pageAction + '&id=' + id, function () {
                initSelect(context);
            });
            e.preventDefault();
            return false;
        });
    });

</script> 
```

现在工作正常

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T07:18:07.400

您可以将隐藏字段添加到视图并从模型中绑定数据。然后你可以很容易地从 jQuery 中读取这个值。

看法：

```
@Html.HiddenFor(model => model.Id, new { id = "FieldId"}); 
```

脚本：

```
var id= $('#FieldId').val(); 
```

你也可以把这个隐藏到你的局部视图中。如果您的局部视图不是强类型的，请将 HiddenFor 更改为 Hidden。您的 ImageGallery 部分视图应包含以下 div：

```
</div>
    @Html.Hidden("PageTitle", Model.PageViewModel.Page.PageTitle);
    @Html.Hidden("PageAction", Model.PageViewModel.Page.PageAction);
    @Html.Hidden("ArticleID", Model.ArticleViewModel.Article.ArticleID);
<div> 
```

在这种情况下，您不需要为每个需要 ImageGallery 的 cshtml 设置隐藏项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T07:24:33.013

您可以设置隐藏字段或仅声明 javascript 变量并从您的模型或 Viewbag 设置它们的值，就像：

```
var action = @Model.action; 
```

或者

```
var id = @ViewBag.id; 
```

你可以在你的代码中使用它

```
<script type="text/javascript">

var action = @Model.action;
var id = @ViewBag.id;
$(document).ready(function () {

$('.modal_block').click(function (e) {
    $('#tn_select').empty();
    $('.modal_part').hide();
});
$('#modal_link').click(function (e) {
    $('.modal_part').show();
    var urlToLoad = "/Upload/UploadImage?Page=Article&Action=" + action + "&id=" + id;
    var context = $('#tn_select').load(urlToLoad, function () {
        initSelect(context);
    });
    e.preventDefault();
    return false;
}); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-24T19:47:45.837

以下是另一种解决方案。我需要将 web.config 中声明的 api url 传递给 JavaScript（在本例中为 Jquery）

1.  在 Razor 中声明一个变量 @{var apiUrl= @System.Configuration.ConfigurationManager.AppSettings["BlogsApi"];}
2.  然后在 JavaScript var apiUrl = '@apiUrl';

# javascript - javascript排序稀疏数组保持索引

> ID：12137690
> 
> 赞同：33
> 
> 时间：2012-08-27T07:16:13.893
> 
> 标签：javascript, sorting, sparse-array

对稀疏数组进行排序并将元素保持在相同索引上的最佳方法是什么？例如：

```
a[0] = 3, 
a[1] = 2, 
a[2] = 6,
a[7] = 4,
a[8] = 5, 
```

我想在排序之后

```
a[0] = 2, 
a[1] = 3, 
a[2] = 4, 
a[7] = 5, 
a[8] = 6. 
```

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-08-27T07:24:15.290

这是一种方法。它将定义的数组元素复制到一个新数组并保存它们的索引。它对新数组进行排序，然后将排序结果放回先前使用的索引中。

```
var a = [];
a[0] = 3;
a[1] = 2; 
a[2] = 6; 
a[7] = 4; 
a[8] = 5;

// sortFn is optional array sort callback function, 
// defaults to numeric sort if not passed
function sortSparseArray(arr, sortFn) {
    var tempArr = [], indexes = [];
    for (var i = 0; i < arr.length; i++) {
        // find all array elements that are not undefined
        if (arr[i] !== undefined) {
            tempArr.push(arr[i]);    // save value
            indexes.push(i);         // save index
        }
    }
    // sort values (numeric sort by default)
    if (!sortFn) {
        sortFn = function(a,b) {
            return(a - b);
        }
    }
    tempArr.sort(sortFn);
    // put sorted values back into the indexes in the original array that were used
    for (var i = 0; i < indexes.length; i++) {
        arr[indexes[i]] = tempArr[i];
    }
    return(arr);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/3ank4/](http://jsfiddle.net/jfriend00/3ank4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-10T17:49:55.427

你可以

1.  使用[`filter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)或[`Object.values`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values)获取具有稀疏数组值的数组。
2.  然后[`sort`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)是那个数组，从大到小。请注意，它不稳定，如果某些值不是数字，这可能会特别成问题。您可以使用自己的排序实现。
3.  使用[`map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)和[`pop`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/pop)获得所需的数组。将其分配给`a`。

```
var b = a.filter(function(x) {
    return true;
}).sort(function(x,y) {
    return y - x;
});
a = a.map([].pop, b); 
```

或者，在 ECMAScript 2017 中，

```
a = a.map([].pop, Object.values(a).sort((x,y) => y-x)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:24:56.480

```
var arr = [1,2,3,4,5,6,7,8,9,10];
// functions sort
function sIncrease(i, ii) { // ascending
 if (i > ii)
 return 1;
 else if (i < ii)
 return -1;
 else
 return 0;
}
function sDecrease(i, ii) { //descending
 if (i > ii)
 return -1;
 else if (i < ii)
 return 1;
 else
 return 0;
}
function sRand() { // random
 return Math.random() > 0.5 ? 1 : -1;
}
arr.sort(sIncrease); // return [1,2,3,4,5,6,7,8,9,10]
arr.sort(sDecrease); // return [10,9,8,7,6,5,4,3,2,1]
arr.sort(sRand); // return random array for examle [1,10,3,4,8,6,9,2,7,5] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-03T19:43:47.600

```
// Update for your needs ('position' to your key).

function updateIndexes( list ) {

    list.sort( ( a, b ) => a.position - b.position )

    list.forEach( ( _, index, arr ) => {

        arr[ index ].position = index

    } )

}

var myList = [
   { position: 8 },
   { position: 5 },
   { position: 1 },
   { position: 9 }
]

updateIndexes( myList )

// Result:

var myList = [
   { position: 1 },
   { position: 2 },
   { position: 3 },
   { position: 4 }
] 
```

# php - How to summ total amount of equipments in given date ranges

> ID：12137692
> 
> 赞同：6
> 
> 时间：2012-08-27T07:16:31.070
> 
> 标签：php, mysql

> **Possible Duplicate:**
> [Calculating total quantity of equipments for a date range](https://stackoverflow.com/questions/12109737/calculating-total-quantity-of-equipments-for-a-date-range)

Project: I am working on a project which is about some rooms and equipments using in the rooms. The software is about scheduling the equipments in the rooms. In other words, it is a reservation software that reserves selected equipments in separate rooms for needed dates and times ranges. I have many tables in MYsSQL database working with Php but I will mention the tables my question is about. The tables I will relate my questions are equipment table (Table A), schedule table (Table B) and equipments using in the related schedule (Table C).

Table A: equipment list table

```
+------+----------+-----------+
| eqid | eqName   | available | 
+------+----------+-----------+
|    1 | book     |        90 |      
|    2 | pen      |        82 | 
|    3 | computer |        25 |
+------+----------+-----------+ 
```

In table A; eqid represents unique id of an equipment, eqName represents name of an equipment, available represents total available equipments existing.

Table B: schedule table

```
+------------+------------+------------+-----------+----------+--------+
| scheduleid | startDate  | endDate    | startTime | endTime  | office |
+------------+------------+------------+-----------+----------+--------+
|          1 | 2012-08-27 | 2012-08-27 | 08:30:00  | 10:00:00 | room1  |
|          2 | 2012-08-27 | 2012-08-27 | 09:30:00  | 11:00:00 | room3  |
|          3 | 2012-08-28 | 2012-08-30 | 08:30:00  | 12:00:00 | room2  |
|          4 | 2012-08-29 | 2012-08-31 | 11:30:00  | 14:00:00 | room1  |
|          5 | 2012-08-28 | 2012-08-28 | 10:30:00  | 14:00:00 | room3  |
|          6 | 2012-08-27 | 2012-08-30 | 08:30:00  | 10:00:00 | room4  |
|          7 | 2012-08-27 | 2012-08-27 | 10:30:00  | 12:00:00 | room4  |    
|          8 | 2012-08-27 | 2012-08-30 | 08:30:00  | 11:00:00 | room6  |
|          9 | 2012-08-27 | 2012-08-27 | 10:30:00  | 12:00:00 | room5  | 
+------------+------------+------------+-----------+----------+--------+ 
```

In table B; scheduleid represents unique id for a schedule, startDate and endDate are date range for a schedule, startTime and endTime time range for a schedule, office means that where the schedule will take place. Let me give an example here. Scheduleid 1 means there is a reservation on 27th of august 2012, Monday and it is from 08.30 to 10:00\. As it start and end on same day this is just one day reservation in room1\. However, Scheduleid 3 means there is a reservation starts on 28th of august 2012, Tuesday and goes on until 30th of august 2012, Thursday at 08:30-12:00... in other words, it lasts for 3 days and everyday from 08:30 to 12:00... So there is a reservation from Tuesday to Thursday at 08:30 to 12:00 in room2... I hope this is clear.

Table C: equipments using in the related schedule

```
+--------+------------+------+-------------+
| Autoid | scheduleid | eqid | amountInSch |
+--------+------------+------+-------------+
|      1 |          1 |    1 |           2 |      
|      2 |          1 |    2 |           3 |
|      3 |          1 |    3 |           1 |
|      4 |          2 |    1 |           1 |
|      5 |          2 |    2 |           1 |
|      6 |          2 |    3 |           2 |
|      7 |          3 |    2 |           1 |
|      8 |          3 |    3 |           3 |
|      9 |          4 |    2 |           1 |
|     10 |          4 |    3 |           1 |
|     11 |          5 |    1 |           1 |
|     12 |          6 |    1 |           1 |
|     13 |          6 |    3 |           2 |
|     14 |          6 |    2 |           4 |
|     15 |          7 |    1 |           5 |
|     16 |          7 |    2 |           6 |
|     17 |          8 |    2 |           1 |
|     18 |          9 |    1 |           8 |
|     19 |          9 |    2 |           5 |  
|     20 |          9 |    3 |           6 |  
+--------+------------+------+-------------+ 
```

In table C: Autoid represents unique automatic id generated by auto-increment, scheduleid comes from Table B, eqid comes from Table A, amountInSch represents how many (amount) equipment will use in the related schedule. I want to give an example here. Scheduleid 1 in Table C, there are 3 rows. This means that scheduleid 1 related in TAble B will use 2 books (eqid 1), 3 pens (eqid 2) and 1 computer (eqid 3) in room1 specified dates and times in table B . Another example is that scheduleid 3 in Table C is related 2 rows. It means that 1 pen (eqId 2) and 3 computers (eqId 3) will be using in room2 from 27th to 30th of august 2012 everyday from 08:30 to 12:00.

The above is the explanation and give some information about the project. The table rows are not permanent. When you make a reservation, there will be a new row in Table B and if it is selected an equipment, there will be new rows in table C...

The Question:

I want to calculate left amount of a specific equipment when I supply eqId, startDate, endDate, startTime and endTime...

An example:

eqId: 1 (book)

startDate: 2012-08-27

endDate: 2012-08-27

startTime: 08:30:00

endTime: 12:00:00

Result should be: 14 books used in schedule and 76 left available books

Because: if you look scheduleIds and related eqIds, you will only see 1, 2, 6, 7, 9 scheduleIds related to my query(dates and eqId). If you sum the all amount of related in Table C, you will get the wrong result. In other words, related amounts for eqId(1-book) and for 1, 2, 6, 7, 9 scheduleIds are 2, 1, 1, 5, 8 respectively. So if you sum them you will get 17 which is wrong. Because, 1 and 9 schedule don't intersect each other in terms of start and end Times, and 6 and 7 don't intersect each other either. as a result of them 2 stays lonely and can be count separately. We must consider 1 and 9 as summed 8 because 8 is bigger than 2\. it is same for 6 and 7, considered as 5 because of 5 is bigger than 1...

So folks! I am not sure how I can sum/ this in programming algorithm. Is there a way to do in SQL or do I have to use PHP and Mysql together? and How?

[*SQLFiddle Records*](http://sqlfiddle.com/#!2/2bba4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:31:42.530

有不同的方法可以实现这一点——我会指出一些可以与大多数 DB 引擎一起使用的东西。

在 mysql 中，可以在单个查询中合并表。你需要的是这样的东西：

```
$eqid = 1;
$startDate = "2012-08-27";
$endDate = "2012-08-27";
$startTime = "08:30:00";
$endTime = "12:00:00";
$sql = "SELECT SUM(`amountInSch`) FROM `table_c`,`table_b` WHERE `eqid` = $eqid 
    AND `startDate` >= '$startDate' AND `startDate` <= '$endDate' AND `endDate` 
    <= '$endDate' AND `endDate` >= '$startDate' AND `startTime` >= '$startTime' 
    AND `startTime` <= '$endTime' AND `endTime` <= '$endTime' AND `endTime` >=
    '$startTime' AND `table_b`.`scheduleid` = `table_c`.`scheduleid`";
$r = mysql_query($sql);
$n = mysql_result($r,0,0); 
```

诀窍是使用`table_b`.`scheduleid` = `table_c`.`scheduleid` （由于此处的标记而缺少一些引号）来合并两个表。

# c# - How to create a calendar dynamically?

> ID：12137697
> 
> 赞同：0
> 
> 时间：2012-08-27T07:16:47.090
> 
> 标签：c#, asp.net

I am trying to create a calendar control dynamically and I would like to add the selected date that needs to be displayed in a text box.

I need to do all this dynamically in code. I am trying it with this code here:

```
cell1.Controls.Add(new Label() {
                        ID = "Label" + childnodecount, 
                        Text = controllabel, 
                        ForeColor = System.Drawing.Color.Blue
                    });
cell2.Controls.Add(new Calendar() { ID = "Calendar" + childnodecount });
cell2.Controls.Add(new TextBox() { ID = "CalendarTextBox" + childnodecount });
row.Cells.Add(cell1);
row.Cells.Add(cell2);
dynamictable.Rows.Add(row);
SearchParameter = SearchParameter + controllabel + "=" 
                + Request.Form["TextBox" + childnodecount] + "|"; 
```

The calendar is created, but when I select any date, all the created controls are gone from the page.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:19:38.300

Put your code in `Page_Init` or `Page_Load` event.

```
public void page_load()
{ 
  //code to create objects and add them to Controls collection
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:25:54.220

Use `Page_Load` event and Manage `IsPostBack` Property in a proper way.

```
protected void Page_Load(object sender, EventArgs e)
{  
    if(IsPostBack)
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T09:30:06.983

我在 C# 中为此代码创建了动态日历。我认为这段代码对你来说很舒服。

public partial class Calender : System.Web.UI.Page { string[] Month = new string[]{"Jan","Feb","Mar","Apr","May","Jun","Jul" ,"八月","九月","十月","十一月","十二月"}; HtmlTableRow tr; HtmlTableCell tc; 按钮 btn; 标签 lbl;

```
 protected void Page_Load(object sender, EventArgs e)
    {
        foreach (Control control in ph1.Controls)
        {
            ph1.Controls.Remove(control);
        }

        if (!Page.IsPostBack)
        {
            Session["Calander"] = null;
            var dt = new DateTime(System.DateTime.Now.Year, System.DateTime.Now.Month, 01);
            var dttable = new DataTable();
            dttable.Columns.Add("type", typeof (string));
            dttable.Columns.Add("value", typeof (DateTime));
            var dr = dttable.NewRow();
            dr["type"] = "M-Y";
            dr["value"] = dt;
            dttable.Rows.Add(dr);

            GenerateTable(dttable);

            for (int i = 1; i < 32; i++)
            {
                ddlday.Items.Add(new ListItem(i.ToString(CultureInfo.InvariantCulture),i.ToString(CultureInfo.InvariantCulture)));
            }
            ddlmonth.DataSource = Month;
            ddlmonth.DataBind();
        }
        for (int i = 1900; i < DateTime.Now.Year; i++)
        {
            ddlyear.Items.Add(new ListItem(i.ToString(CultureInfo.InvariantCulture), i.ToString(CultureInfo.InvariantCulture)));
        }
        if (Session["Calander"] != null)
        {
            var dtSession = (DataTable) Session["Calander"];
            GenerateTable(dtSession);
        }
    }

    private void GenerateTable(DataTable dtSession)
    {
        foreach (Control c in ph1.Controls)
        {
            ph1.Controls.Remove(c);
        }

        var datesession = new DateTime();
        if (dtSession.Rows.Count > 0)
        {
            datesession = Convert.ToDateTime(dtSession.Rows[0]["value"]);
        }
        var count = 0;

        var tb1 = new HtmlTable();
        tb1.Style.Add(HtmlTextWriterStyle.BorderWidth,"1px");
        tb1.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
        tb1.Style.Add(HtmlTextWriterStyle.BorderColor, "black");

        tr = new HtmlTableRow();
        tb1.Rows.Add(tr);

        tc = new HtmlTableCell();
        tc.Style.Add(HtmlTextWriterStyle.BorderWidth,"1px");
        tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
        tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
        tc.Style.Add(HtmlTextWriterStyle.TextAlign, "left");
        tr.Cells.Add(tc);

        btn = new Button();
        btn.Style.Add(HtmlTextWriterStyle.TextAlign,"left");
        btn.ID = "btnmonpre";
        btn.Text = "<<";
        btn.Click += new EventHandler(btnmonpre_Click); 
        tc.Controls.Add(btn);

        tc = new HtmlTableCell();
        tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");
        tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
        tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
        tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
        if (dtSession.Rows[0]["type"].ToString() == "M-Y")
        {
            tc.ColSpan = 5;
        }
        tr.Cells.Add(tc);

        btn = new Button();
        btn.ID = "btnmonyear";

        if (Convert.ToString(dtSession.Rows[0]["type"]) == "M-Y")
        {
            btn.Text = Month[datesession.Month - 1] + "-" + datesession.Year.ToString(CultureInfo.InvariantCulture);
        }

        tc.Controls.Add(btn);
        btn.Click += new EventHandler(BtnMonYear_clicl);

        tc = new HtmlTableCell();
        tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");
        tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
        tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
        tc.Style.Add(HtmlTextWriterStyle.TextAlign, "right");
        tr.Cells.Add(tc);

        btn = new Button();
        btn.Style.Add(HtmlTextWriterStyle.TextAlign, "right");
        btn.ID = "btnmonnext";
        btn.Text = ">>";
        btn.Click += new EventHandler(btnmonnext_Click);
        tc.Controls.Add(btn);

        if (dtSession.Rows[0]["type"].ToString() == "M-Y")
        {
            int startPoint = 0, endPoint = 0, DatePlaceCount = 0;
            var firstDate = new DateTime(datesession.Year,datesession.Month,01);
            startPoint = (int) firstDate.DayOfWeek;

            if (startPoint == 0)
            {
                startPoint = 7;
            }
            endPoint = firstDate.AddMonths(1).AddDays(-1).Day;

            int previousDays = firstDate.AddDays(-1).Day;
            int pDatePlace = previousDays - (startPoint - 2);
            int nDatePlace = 1; 

            tr = new HtmlTableRow();
            tb1.Rows.Add(tr);

            tc = new HtmlTableCell();
            tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");
            tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
            tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
            tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
            tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
            tr.Cells.Add(tc);

            lbl = new Label();
            lbl.ID = "day1";
            lbl.Text = "Mon";
            tc.Controls.Add(lbl);

            tc = new HtmlTableCell();
            tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");
            tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
            tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
            tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
            tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
            tr.Cells.Add(tc);

            lbl = new Label();
            lbl.ID = "day2";
            lbl.Text = "Tue";
            tc.Controls.Add(lbl);

            tc = new HtmlTableCell();
            tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");
            tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
            tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
            tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
            tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
            tr.Cells.Add(tc);

            lbl = new Label();
            lbl.ID = "day3";
            lbl.Text = "Wed";
            tc.Controls.Add(lbl);

            tc = new HtmlTableCell();
            tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");  
            tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
            tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
            tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
            tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
            tr.Cells.Add(tc);

            lbl = new Label();
            lbl.ID = "day4";
            lbl.Text = "Thu";
            tc.Controls.Add(lbl);

            tc = new HtmlTableCell();
            tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px"); 
            tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
            tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
            tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
            tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
            tr.Cells.Add(tc);

            lbl = new Label();
            lbl.ID = "day5";
            lbl.Text = "Fri";
            tc.Controls.Add(lbl);

            tc = new HtmlTableCell();
            tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");
            tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
            tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
            tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
            tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
            tr.Cells.Add(tc);

            lbl = new Label();
            lbl.ID = "day6";
            lbl.Text = "Sat";
            tc.Controls.Add(lbl);

            tc = new HtmlTableCell();
            tc.Style.Add(HtmlTextWriterStyle.BorderWidth, "1px");
            tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
            tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
            tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
            tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
            tr.Cells.Add(tc);

            lbl = new Label();
            lbl.ID = "day7";
            lbl.Text = "Sun";
            tc.Controls.Add(lbl);

            tb1.Rows.Add(tr);

            for (int i = 0; i < 6; i++)
            {
                tr = new HtmlTableRow();
                tb1.Rows.Add(tr);

                for (int j = 1; j < 8; j++)
                {
                    tc = new HtmlTableCell();
                    tc.Style.Add(HtmlTextWriterStyle.BorderWidth,"1px");
                    tc.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
                    tc.Style.Add(HtmlTextWriterStyle.BorderColor, "black");
                    tc.Style.Add(HtmlTextWriterStyle.Width, "60px");
                    tc.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
                    tr.Cells.Add(tc);
                    count++;

                    if (count >= startPoint && count < startPoint + endPoint) // current month dateplace
                    {
                        DatePlaceCount++;
                        btn = new Button();
                        btn.Text = DatePlaceCount.ToString();
                        btn.ID = btn + count.ToString();
                        btn.EnableViewState = false;
                        btn.Click += new EventHandler(btnClick);
                        tc.Controls.Add(btn);
                    }
                    else
                    {
                        if (count < startPoint) // Previous month
                        {
                            btn = new Button();
                            btn.Text = pDatePlace.ToString();
                            btn.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Red");
                            btn.ID = btn + count.ToString();
                            btn.ValidationGroup = "Prev";
                            btn.EnableViewState = false;
                            btn.Click += new EventHandler(btnClick);
                            tc.Controls.Add(btn);
                            pDatePlace++;
                        }
                        else if (count >= startPoint + endPoint) // Next month
                        {
                            btn = new Button();
                            btn.Text = nDatePlace.ToString();
                            btn.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Blue");
                            btn.ID = btn + count.ToString();
                            btn.ValidationGroup = "Next";
                            btn.EnableViewState = false;
                            btn.Click += new EventHandler(btnClick);
                            tc.Controls.Add(btn);
                            nDatePlace++;
                        }
                    }
                }
            }
            ph1.Controls.Add(tb1);
            Session["Calander"] = null;
            dtSession.Rows.Clear();
            DataRow dr = dtSession.NewRow();
            dr["type"] = "M-Y";
            dr["value"] = new DateTime(firstDate.Year, firstDate.Month, firstDate.Day);
            dtSession.Rows.Add(dr);
            Session["Calander"] = dtSession;
        }
    }

    protected void btnsearch_Click(object sender, EventArgs e)
    {
        var dt = new DateTime();
        //var dt1 = DateTime.TryParse(ddlyear.SelectedValue.ToString(CultureInfo.InvariantCulture) + "/" + Array.IndexOf(Month, ddlmonth.SelectedValue.ToString(CultureInfo.InvariantCulture)) + 1.ToString(CultureInfo.InvariantCulture) + "/" + ddlday.SelectedValue.ToString(CultureInfo.InvariantCulture), out dt);
        var year = ddlyear.SelectedValue.ToString(CultureInfo.InvariantCulture);
        var month = Convert.ToInt32(Array.IndexOf(Month, ddlmonth.SelectedValue.ToString(CultureInfo.InvariantCulture))) + 1;
        var date = ddlday.SelectedValue.ToString(CultureInfo.InvariantCulture);

        var dt1 = DateTime.Parse(month + "/" + date + "/" + year);
        if (dt1 != DateTime.MinValue)
        {
            if (Session["Calander"] != null)
            {
                Session["Calander"] = null;
                // DateTime dt1 = new DateTime(Convert.ToInt32(ddlyear.SelectedValue.ToString(CultureInfo.InvariantCulture)), Convert.ToInt32(ddlmonth.SelectedValue.ToString(CultureInfo.InvariantCulture)), Convert.ToInt32(ddlday.SelectedValue.ToString(CultureInfo.InvariantCulture)));
                DataTable dtTable = new DataTable();
                dtTable.Columns.Add("type", typeof(string));
                dtTable.Columns.Add("value", typeof(DateTime));
                DataRow dr = dtTable.NewRow();
                dr["type"] = "M-Y";
                dr["value"] = dt1;
                dtTable.Rows.Add(dr);
                GenerateTable(dtTable);
                Response.Write(" U R Selecting Date:" + dt1.ToString("dd/MMM/yyyy"));

                // var dtSession = (DataTable)Session["Calander"];
                // GenerateTable(dtSession);

            }
        }
    }

    protected void btnmonpre_Click(object sender, EventArgs e)
    {
        DataTable dtsession = (DataTable)Session["Calander"];
        DateTime datesession = Convert.ToDateTime(dtsession.Rows[0]["value"]);

        if (Convert.ToString(dtsession.Rows[0]["type"]) == "M-Y")
        {
            if (datesession.AddMonths(-1).Year >= 1970)
            {
                dtsession.Rows[0]["value"] = datesession.AddMonths(-1);
            }
            Session["Calander"] = dtsession;
            GenerateTable(dtsession);
        }
    }

    protected void btnmonnext_Click(object sender, EventArgs e) 
    {
        DataTable dtsession = (DataTable)Session["Calander"];
        DateTime datesession = Convert.ToDateTime(dtsession.Rows[0]["value"]);

        if (Convert.ToString(dtsession.Rows[0]["type"]) == "M-Y")
        {
            if (datesession.AddMonths(1).Year <= 2070)
            {
                dtsession.Rows[0]["value"] = datesession.AddMonths(1);
            }
            Session["Calander"] = dtsession;
            GenerateTable(dtsession);
        }
    }

    protected void BtnMonYear_clicl(object sender, EventArgs e)
    {
        DataTable dtSession = (DataTable)Session["Calander"];
        DateTime datesession = (DateTime)dtSession.Rows[0]["value"];
        if (dtSession.Rows[0]["type"].ToString() == "M-Y")
        {
            dtSession.Clear();
            DataRow dr = dtSession.NewRow();
            dr["type"] = "M-Y";
            dr["value"] = datesession;
            dtSession.Rows.Add(dr);
            Session["Calander"] = dtSession;
            GenerateTable(dtSession);
        }
    }

    protected void btnClick(object sender, EventArgs e) 
    {
        DataTable dtsession = (DataTable)Session["Calander"];
        Button b = (Button)sender;
        DateTime ResultDate;
        DateTime dt;
        if (Convert.ToString(dtsession.Rows[0]["type"]) == "M-Y")
        {
            if (b.ValidationGroup == "Prev")
            {
                dt = (DateTime)(dtsession.Rows[0]["value"]);
                dt = dt.AddMonths(-1);
                ResultDate = new DateTime(dt.Year, dt.Month, Convert.ToInt32(b.Text));
                b.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Green");
                Response.Write("U R Selecting Date:" + ResultDate.ToString("dd/MMM/yyyy"));
            }
            else if (b.ValidationGroup == "Next")
            {
                dt = (DateTime)(dtsession.Rows[0]["value"]);
                dt = dt.AddMonths(1);
                ResultDate = new DateTime(dt.Year, dt.Month, Convert.ToInt32(b.Text));
                b.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Green");
                Response.Write(" U R Selecting Date:" + ResultDate.ToString("dd/MMM/yyyy"));
            }
            else
            {
                dt = (DateTime)(dtsession.Rows[0]["value"]);
                ResultDate = new DateTime(dt.Year, dt.Month, Convert.ToInt32(b.Text));
                b.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Green");
                Response.Write(" U R Selecting Date:" + ResultDate.ToString("dd/MMM/yyyy"));
            }
        }
    }
} 
```

# javascript - 将函数从 Javascript 传递到 VB6 应用程序

> ID：12137702
> 
> 赞同：0
> 
> 时间：2012-08-27T07:17:06.630
> 
> 标签：javascript, vb6

是否可以将函数从 Javascript 传递到 Visual Basic 6（该函数会将数据作为字符串传递到 Visual Basic 6）？我已经用谷歌搜索了，但我只遇到了 Javascript 到 Visual Basic .NET。

我想集成两个程序：一个程序在使用 JavaScript 的浏览器上运行，另一个程序连接到财务打印机（实际上是 OpenERP）。

由于 OpenERP 不包含财务打印机功能，因此我想在 OpenERP 的销售点添加一个打印按钮。当我单击该按钮时，销售数据将被发送到 Visual Basic 程序。

我在 Visual Basic 中编写了一个正常工作的程序（仅与财务打印机连接的程序），问题是连接到两者。有什么办法可以做到这一点，否则我将不得不去.net？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:52:49.090

在您的 Visual Basic 程序中，您可以使用 winsock 控件并自己编写一个 Web 服务器，然后应该通过 Web 服务器代理您在浏览器中运行的 JavaScript 代码。

然后，javascript 代码可以向您的 vb6 应用程序发出 HTTP 请求，然后该应用程序可以处理数据。然后，您就有了某种远程过程调用 (RPC)。

只是一些指针：

*   Visual Basic 6 中的网络服务器；例如[http://forum.codecall.net/topic/42076-how-to-create-a-web-server-in-visual-basic-6/](http://forum.codecall.net/topic/42076-how-to-create-a-web-server-in-visual-basic-6/)
*   JSPON-RPC；例如[http://json-rpc.org/](http://json-rpc.org/)

# android - Adding local images to WebView doesn't respect EXIF rotation

> ID：12137704
> 
> 赞同：2
> 
> 时间：2012-08-27T07:17:48.650
> 
> 标签：android, android-webview, android-camera

I add several images to a `WebView` and images are rotated **90 degrees** from what's expected.
This is because the **Samsung camera** shoots with .jpg photos + EXIF rotation tag.
Same images appear fine in the gallery but not in my `WebView`.

```
String htmlWithImages = "<html> <some html>";
htmlWithImages += imageUri; // Image's content uri like content://
mWebView.loadDataWithBaseURL("", htmlWithImages, "text/html", "utf-8", ""); 
```

Is this a bug in `WebView`? Any workarounds?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:37:56.527

也许您可以使用 css3 来旋转 WebView 中的图像：http: [//bavotasan.com/2011/rotated-images-with-css3/](http://bavotasan.com/2011/rotated-images-with-css3/)或[http://www.kavoir.com/2009/08/css-rotate- text-image-elements-by-90-180-or-270-degrees.html](http://www.kavoir.com/2009/08/css-rotate-text-image-elements-by-90-180-or-270-degrees.html)

```
-webkit-transform: rotate(-90deg);
-moz-transform: rotate(-90deg); 
```

# extjs4 - Javascript window selection deselected with ExtJS Panel context menu

> ID：12137711
> 
> 赞同：0
> 
> 时间：2012-08-27T07:18:09.163
> 
> 标签：extjs4, extjs4.1

If I show an ExtJS context menu on ExtJS panel after text selection, it hides or deselects the text selection or window selection. How can I keep the selection when the context menu is shown?

```
listeners: {
    afterrender: function(comp) {
        comp.getEl().on('contextmenu', function(e,src) {
            //stop default browser context menu appearing
            e.stopEvent();
            contextMenu = new Ext.menu.Menu({
                items: [{
                    text:    "Show On Map",
                    iconCls: 'map',
                    handler: function(a,b,c) {
                        alert(this.id);
                    }
                }]
            });
            contextMenu.showAt([e.getPageX(),e.getPageY()]);
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:57:33.187

```
var contextMenu = Ext.create('Ext.menu.Menu', {
        items: [{
            id:'zoom',
            text: 'Zoom in',
            layout: {
                align: 'left'
            },
            handler: function() {
                alert('You clicked the Zoom in button!');
            }
        },
        {
            text: 'Zoom out',
            align: 'left'
        },
        {
            text: 'Add Marker',
            align: 'left'
        }
        ]

    });

    map.div.oncontextmenu = function noContextMenu(e) {
        if (OpenLayers.Event.isRightClick(e)){
            contextMenu.showAt(e);
        }
        return false; //cancel the right click of brower
    }; 
```

# django - some of the error list members in django form doesn't show up in the template

> ID：12137713
> 
> 赞同：1
> 
> 时间：2012-08-27T07:18:29.667
> 
> 标签：django, forms, templates, error-list

I have a form in django and I wanna show errors before each field.

The problem is when I use `form.field_name.errors` or `form.errors.field_name`, it happens for one of the fields that error does not show up, just for one of them, here's the template code:

```
<table class="">
                <form action="" method="POST" enctype="multipart/form-data">

                    {% csrf_token %}

                    <div>
                        <div>{{ form.errors.competitor_name }}</div>
                        <br/>
                        <div>name:</div>
                        <div>{{ form.competitor_name }}</div>
                    </div>
                    <div>
                        <div>{{ form.errors.notional_code }}</div>
                        <br/>
                        <div>code:</div>
                        <div>{{ form.national_code }}</div>
                    </div>
                    <div>
                        <table id="filesContainer">
                            <tbody>
                            {% for form_ in formset.forms %}
                                <tr id="{{ form_.prefix }}-row">
                                    <td>{{ form_.file.label }}:</td>
                                    <td>{{ form_.file }}</td>
                                    <td></td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                        <p>
                            {{ formset.management_form }}
                        </p>
                    </div>
                    <div class="arsh-signup-row">
                        <input type="submit" value="SignUp" />
                    </div>
                </form>
            </table> 
```

I have problem in showing errors of `national_code` field.

I have used break points and I absolutely realized that I'm adding errors in the right way and everything about form is alright, it seems something is wrong with the template and I don't know what's this.

The interesting part is, when I wanna show up this field's error in some other part of the page, it's ok, everything is done, but it doesn't show in that specific part, if I use this code:

```
<div>
                        <div>{{ form.errors.notional_code }}</div>
                        <br/>
                        <div>name:</div>
                        <div>{{ form.competitor_name }}</div>
                    </div>
                    <div>
                        <div>{{ form.errors.notional_code }}</div>
                        <br/>
                        <div>code:</div>
                        <div>{{ form.national_code }}</div>
                    </div> 
```

I can see what I want. It's really funny at first, but now it's confusing for me.

Any advice would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:25:22.340

You get errors in `field_name.errors` for each field. `form.errors` gives any error for entire form and not specific to a field.

Refer below sample from django docs [here](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#looping-over-the-form-s-fields)

```
<form action="/contact/" method="post">
{% for field in form %}
    <div class="fieldWrapper">
        {{ field.errors }}
        {{ field.label_tag }}: {{ field }}
    </div>
{% endfor %}
<p><input type="submit" value="Send message" /></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T11:14:23.843

该问题将通过以下代码行解决：

```
{% for field in form %} 
    <div class="row"> 
        <div class="error">{{ field.errors }}</div> 
        <br/> 
        <div class="lable">{{ field.label }}</div> 
        <div class="field">{{ field }}</div> 
    </div> 
{% endfor %} 
```

;-)

# jquery-ui - jquery mobile alternate button theme for dynamically populated buttons?

> ID：12137719
> 
> 赞同：1
> 
> 时间：2012-08-27T07:18:49.137
> 
> 标签：jquery-ui, jquery-mobile, cordova

I want to display jquery mobile alternate button's with different color. The code which I am using now is only able to change the button theme to 'e' but I want 'theme b'. What can be the problem? Below is the code.

```
$(document).delegate('[data-role="page"]', 'pagecreate', function(e) {
    var db = openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(function(tx) {
        tx.executeSql("SELECT id FROM DEMO", [],  

        function(tx, results) {

            var len = results.rows.length,
                i;
            //If no result Found
            for (i = 0; i < len; i++) {
                var test = results.rows.item(i).id % 2; //to get the alternate row's
                if (test == 0) {
                    var id = "color" + results.rows.item(i).id;

                    $("#" + id).attr('data-content-theme', 'e').removeClass('ui-body-d').addClass('ui-body-e').trigger('create'); // Change to theme e
                }
            }
        });
    });
}); 
```

I am changing the button theme as per the id of dynamically populated buttons.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:39:39.193

如果您可以发布一些 HTML 代码，那将有很大帮助。

您可以尝试以下方法，看看是否能解决问题：

> $("#" + id).attr('data-content-theme', 'b').removeClass('ui-body-a ui-body-b ui-body-c ui-body-d ui-body -e').addClass('ui-body-b').trigger('create');

# c# - C# 函数 Silverlight

> ID：12137721
> 
> 赞同：0
> 
> 时间：2012-08-27T07:18:58.713
> 
> 标签：c#, silverlight, windows-phone

我在文件中有一个函数`Code.xaml.cs`。

```
public string send (string url)
{
//some code...
} 
```

我想从另一个`.cs`文件调用这个函数。

```
send("google.com"); 
```

但是调试器给出了错误！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:26:27.293

每当从类中调用动态方法时，您都必须创建该类的实例。

```
class Test 
{
    public string send(string url) {}
}

class AnotherClass 
{
    public AnotherClass() 
    {
        Test t = new Test();
        t.send("google.com");
    }
} 
```

否则，您可以简单地使用`static`关键字。

```
public static string send(..); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T20:23:21.490

如果 send 方法不作为它所在类的成员函数，您可以创建一个静态 Helper 类。

```
public static class Helpers
{
    public static string send(string url)
    {
        ...
    }
} 
```

然后在任何其他 .cs 文件中，您可以调用：

```
Helpers.send("www.google.com") 
```

# android - XML Layout Misbehavior with Eclipse-ADT

> ID：12137722
> 
> 赞同：5
> 
> 时间：2012-08-27T07:19:00.147
> 
> 标签：android, eclipse, android-layout, adt, android-xml

I am facing something strange issue with Android XML Layout Editor.

Whenever I am switching from Graphical Layout to Code Layout, It shows everything perfectly and when I'll click or move up down via keyboard arrow keys, it behaves strange and part of xml line are becoming visible/invisible.

Xml code is there, its not changing.

Have a look at attached video link.
[http://screencast.com/t/rY1gKPY9vn](http://screencast.com/t/rY1gKPY9vn)

**My current Config :**
Eclipse SDK
Version: 3.7.2
Build id: M20120208-0800

Android Development Toolkit
Version: 20.0.3.v201208082019-427395

**Update :**
issue is still there with Eclipse with 4.2 also

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:24:03.737

Yes, it's a known issue and I have also faced this strange issue with Eclipse, the solution to it is to close the XML file and open it again. If that doesn't work, restarting Eclipse should also solve it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:18:12.887

我在 XML 文件中遇到的同样的问题。解决方案是重新打开文件。完美的解决方案是将您的 Eclipse 版本升级到 JUNO。那不会造成这种刺激问题。

玩得开心。

# .net - 拆分文件名并将块连接到目录结构

> ID：12137730
> 
> 赞同：1
> 
> 时间：2012-08-27T07:20:20.833
> 
> 标签：.net, regex, iis, url-rewriting

我想拆分最多 2 个字符的请求 url 文件名块，然后重写为目录结构：

输入（逐行）：

```
a.txt
ba.txt
cba.txt
dcba.txt
edcba.txt
fedcba.txt
gfedcba.txt
hgfedcba.txt 
```

期望的输出：

```
a/file.txt
ba/file.txt
c/ba/file.txt
dc/ba/file.txt
e/dc/ba/file.txt
fe/dc/ba/file.txt
g/ef/dc/ba/file.txt
hg/ef/dc/ba/file.txt 
```

实现的输出（使用以下正则表达式）：

```
///a/file.txt
///ba/file.txt
//c/ba/file.txt
//dc/ba/file.txt
/e/dc/ba/file.txt
/fe/dc/ba/file.txt
g/fe/dc/ba/file.txt
hg/fe/dc/ba/file.txt 
```

正则表达式：

```
([a-z]{1,2}?)??([a-z]{1,2}?)??([a-z]{1,2}?)??([a-z]{1,2})??\.txt 
```

替换：

```
$1/$2/$3/$4/file.txt 
```

我发现没有办法重复匹配并捕获每次迭代。

不幸的是，即使没有找到匹配的 $1 - $3，此替换文本也会写入斜线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:05:58.850

你并不完全清楚。我假设您希望尽可能匹配同一个字符两次，否则只匹配一次。如果不是这种情况，模式会变得有点复杂，但这里有一个例子说明如何做到这一点：[http ://regex101.com/r/nG4tZ9](http://regex101.com/r/nG4tZ9)

`/^|\G(([a-z])\2?)/gm`

使用它作为替换：`\1/`

这将产生以下结果：

```
/a/.txt
/aa/.txt
/b/aa/.txt
/bb/aa/.txt
/c/bb/aa/.txt
/cc/bb/aa/.txt
/d/cc/bb/aa/.txt
/dd/cc/bb/aa/.txt 
```

我不确定如何以`file.txt`任何流畅的方式注入该部分，我不完全确定如果没有适当的语言可以做到这一点。

除了我用正则表达式介绍的内容之外，我不建议你做任何事情。我会为它写一个小函数。

鉴于这是 url 重写，坦率地说，我不确定是否有任何好的解决方案。您可以尝试使用自己的脚本文件来处理这个问题，然后只使用标头从那里重定向。我不是专家，我相信有人有更好的解决方案。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:20:12.067

找到了一种使用 .NET [Group.Captures 属性的方法](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.group.captures.aspx)

LinqPad 片段：

```
string inputUrl= "/gfedcba.txt";
string pattern = @"/([a-z]{1,2})+\.txt";
string rewrittenUrl = inputUrl;

Match match = Regex.Match(inputUrl, pattern, RegexOptions.RightToLeft);

if(match.Success){
    var captures = match.Groups[1].Captures;
    rewrittenUrl="";
    for(int i = captures.Count; i > 0; i--) {
        rewrittenUrl += "/" + captures[i-1].Value;
    }
    rewrittenUrl += ".txt";
}

"inputUrl:".Dump();
inputUrl.Dump();
"rewrittenUrl:".Dump();
rewrittenUrl.Dump(); 
```

LinqPad 输出：

> 输入网址：
> 
> /gfedcba.txt
> 
> 重写网址：
> 
> /g/fe/dc/ba.txt

现在我要编写一个[自定义的 IIS Url Rewrite Provider](http://learn.iis.net/page.aspx/803/using-custom-rewrite-providers-with-url-rewrite-module/)

# c - 从 C API 推送 lua 函数作为表成员

> ID：12137732
> 
> 赞同：5
> 
> 时间：2012-08-27T07:20:24.513
> 
> 标签：c, lua

那么，将 C 函数作为函数成员推送或将 C 函数注册为 lua 函数没有问题**lua_register(L, lua_func_name, c_func);**

但是如何告诉 lua 我想通过**luaFoo()**作为 C 中“foober”的函数回调参数传递什么？lua_pushcfunction - 推送 C 函数，lua_pushstring 只推送纯字符串，所以回调字段变成了字符串，而不是函数。

卢阿代码：

```
CALLBACKS = {};
FOO = 0;

function luaFoo()
FOO = FOO + 1;
end;

function addCallback(_name, _callback)
CALLBACKS[_name] = _callback;
end;

function doCallback(_name)
CALLBACKS[_name]();
end; 
```

C代码：

```
static int c_foo(lua_State* l)
{
  printf("FOO\n");
  return 0;
}

/*load lua script*/;
lua_State* l = /*get lua state*/;
lua_getglobal(l, "addCallback");
lua_pushstring(l, "foober");
//What push for luaFoo()
lua_pushcfunction(l, c_foo);
lua_call(l, 2, 0);

lua_getglobal(l, "doCallback");
lua_pushstring(l, "foober");
lua_call(l, 1, 0); 
```

类似 - 如果我得到已经注册**lua_register**的 C 函数，如何将它们作为回调参数从 C 传递。所以我们注册**c_foo** => c_foo 作为 lua 函数存在，如何告诉我们想要传递**“c_foo”**作为回调函数参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T08:03:06.113

请记住：

```
function luaFoo()
  ...
end 
```

相当于这个，在 Lua 中：

```
luaFoo = function()
  ...
end 
```

因此，您的问题最终归结为“我在全局表中有一个值。我如何将它推入堆栈？” 这个值是一个函数的事实是*无关紧要*的；Lua 中的函数值与整数值没有区别，整数值与字符串值没有区别。显然你可以用它们*做*不同的事情，但你只是想复制它们。无论价值是什么，它的工作原理都是一样的。

您正在寻找的功能是[`lua_getglobal`](http://www.lua.org/manual/5.1/manual.html#lua_getglobal).

至于您的第二个问题，您可以通过以下两种方式之一进行。您可以从全局表中获取您注册的函数值，也可以简单地使用`lua_pushcfunction`. 由于您没有使用 upvalues，因此重新注册它并没有任何缺点。

哦，还有一件事，关于代码风格。Lua 不需要`;`在语句的末尾。你可以这样做（让 C-native 程序员感觉更舒服），但这不是必需的。

# java - Draw circle over the bitmap with the color same as the under bitmap

> ID：12137735
> 
> 赞同：0
> 
> 时间：2012-08-27T07:20:47.183
> 
> 标签：java, android, drawing, android-canvas

I have an `image`, I can draw an `circle` over it like the code below:

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
            R.drawable.girl).copy(Bitmap.Config.ARGB_8888, true);
Canvas canvas = new Canvas(bitmap);
Paint paint = new Paint();
paint.setColor(Color.RED);
paint.setStrokeWidth(200);
paint.setStyle(Style.STROKE.FILL);
paint.setAntiAlias(true);
canvas.drawCircle(bitmap.getWidth() / 2, bitmap.getHeight() / 2, 100,
            paint); 
```

And the `circle` will be red color! But because of some reason, I want the color of `circle` same as its under `bitmap`. Can I do it? and how? Thanks everyone!

Edited: One more question, How I can get all the pixels inside `circle`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:26:10.200

why dont you simply remove the `paint.setStyle(Style.STROKE.FILL);` or try changing the `paint.setColor(Color.RED);` to Transparent color, that should be it

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:54:59.663

您可以通过[本文](https://stackoverflow.com/questions/7807360/how-to-get-pixel-colour-in-android)`pixel`中的方法获取指定的颜色，然后再设置此颜色，而不是您提到的。 `RGB Color``color.RED`

# c# - 显示两个数组之间常见和不常见元素的总数？

> ID：12137736
> 
> 赞同：-1
> 
> 时间：2012-08-27T07:20:50.643
> 
> 标签：c#, arrays, linq, intersect, except

我有两个数组：数组 testAnswer 保存“考试答案”，数组 inputAnswers 保存“学生考试答案”。

当我运行我的代码时，它会显示两个数组的所有常见元素（正确答案）和不常见元素（错误答案）。但是，我希望能够显示正确/错误答案的总数，而不是实际显示正确/错误答案。

到目前为止我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    //Array holding answers to test
    string[] testAnswer = new string[20] { "B", "D", "A", "A", "C", "A", "B", "A", "C", "D", "B", "C", "D", "A", "D", "C", "C", "B", "D", "A" };
    string a = String.Join(", ", testAnswer);

    //Reads text file line by line. Stores in array, each line of the file is an element in the array
    string[] inputAnswer = System.IO.File.ReadAllLines(@"C:\Users\Momo\Desktop\UNI\Software tech\test.txt");

    string b = String.Join(", ", inputAnswer);

    //Increments through array elements in both arrays and checks for matching elements. Displays in listBox.
    for (int i = 0; i < testAnswer.Length; i++)
    {
        if (testAnswer[i] == inputAnswer[i])
            listBox1.Items.Add(inputAnswer[i]); // or testAnswer[i], as appropriate
    }

    //Increments through array elements in both arrays and checks for uncommon elements. Displays in listBox.
    for (int i = 0; i < testAnswer.Length; i++)
    {
        if (testAnswer[i] != inputAnswer[i])
            listBox2.Items.Add(inputAnswer[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:34:18.903

以下是使用 LINQ 获取结果的方法：

```
var results = 
    testAnswer
        .Zip(inputAnswer, (t, i) => new { t, i })
        .Aggregate(new { Correct = 0, Incorrect = 0 },
            (a, ti) => new
            {
                Correct = a.Correct + (ti.t == ti.i ? 1 : 0), 
                Incorrect = a.Incorrect + (ti.t != ti.i ? 1 : 0)
            }); 
```

它将产生一个具有这种结果的匿名变量：

![匿名变量结果](../Images/adcb0c0f0442e7f05ea31d18d700beb8.png)

另一种方法是：

```
var query = 
    testAnswer
        .Zip(inputAnswer, (t, i) => t == i)
        .ToLookup(x => x);

var results = new
{
    Correct = query[true].Count(),
    Incorrect = query[false].Count()
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:30:09.863

下面的代码将在最后提供 2 个整数来保存答案：

```
private void button1_Click(object sender, EventArgs e)
{
    string[] testAnswer = new string[20] { "B", "D", "A", "A", "C", "A", "B", "A", "C", "D", "B", "C", "D", "A", "D", "C", "C", "B", "D", "A" };
    string a = String.Join(", ", testAnswer);

    //Reads text file line by line. Stores in array, each line of the file is an element in the array
    string[] inputAnswer = System.IO.File.ReadAllLines(@"C:\Users\Momo\Desktop\UNI\Software tech\test.txt");

    string b = String.Join(", ", inputAnswer);

    //Increments through array elements in both arrays and checks for matching elements. 
    //Displays in listBox.
    for (int i = 0; i < testAnswer.Length; i++)
    {
        if (testAnswer[i] == inputAnswer[i])
            listBox1.Items.Add(inputAnswer[i]); // or testAnswer[i], as appropriate
        else 
            listBox2.Items.Add(inputAnswer[i]);
        }

    int correctAns = listbox1.Items.Count;
    int wringAns = listbox2.Items.Count;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T07:21:46.527

常见答案计数将是[Enumerable.Intersect](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)结果项计数，不常见 - [Enumerable.Except](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)结果项计数。

更新：只要在评论中提到它会产生错误的答案，证明它不会：

```
 var testAnswers = new[] { 1, 2, 3 };
  var inputAnswers = new[] { 3, 2, 1 };
  var commonAnswers = testAnswers
            .Select((x, index) => Tuple.Create(x, index))
            .Intersect(inputAnswers.Select((y, index) => Tuple.Create(y, index))); 
```

# jasper-reports - Data source in Jasper reports

> ID：12137742
> 
> 赞同：0
> 
> 时间：2012-08-27T07:21:43.843
> 
> 标签：jasper-reports, jasperserver

I am using *Jasper Reports Server* opensource 4.5 version.

While uploading a report, everytime, I have to link the new report to a data source.

I have created a data source and my all reports run on same data source.

Is there any way to set the data source as default so that all the new reports automatically links to the data source?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:28:04.777

您如何将报告上传到 jasperserver？如果您在 iReport 中使用该插件，则链接数据源非常简单，因为您只需从存储库中选择数据源即可。

# .htaccess - htaccess redirect specific URL to different domain

> ID：12137746
> 
> 赞同：1
> 
> 时间：2012-08-27T07:22:12.543
> 
> 标签：.htaccess, mod-rewrite, redirect

I have 2 domain pointing to same directory, Now I want to redirect some URLs to one specific domain and rest should be on main domain.

I have one domain www.xyz.com this is main domain site will be open with this domain, from this domain I want to redirect specific URLs to different domain so if someone open www.xyz.com/a/theatre then it should redirect to www.abc.com/a/theatre. And now from same this new domain if someone click on URL which don't have "/a/theatre" in URL then it should redirect back to main domain. So if someone open **www.abc.com/a/classes** then it should redirect to **www.xyz.com/a/classes**

I have used bellow rules but not working,

```
RewriteCond %{HTTP_HOST} ^www.xyz.com$ [NC]    
RewriteCond %{REQUEST_URI} ^/a/theatre$    
RewriteRule (.*)$ http://www.abc.com/a/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^www.abc.com$ [NC]    
RewriteCond %{REQUEST_URI} !^/a/theatre    
RewriteRule (.*)$ http://www.xyz.com/a/$1 [NC,L,R=301] 
```

Any help is appreciated. Thanks!

Here is all code from my htaccess, I have installed Joomla on this domain.

```
Options -Indexes

RewriteEngine on
RewriteBase /seo
RewriteCond %{HTTP_HOST} ^www.mcleancenter.org$ [NC]
RewriteCond %{REQUEST_URI} ^/seo/alden-theatre$
RewriteRule ^/?seo/(.*)$ http://www.aldentheatre.org/seo/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^www.aldentheatre.org$ [NC]
RewriteCond %{REQUEST_URI} !^/seo/alden-theatre
RewriteRule ^/?seo/(.*)$ http://www.mcleancenter.org/seo/$1 [NC,L,R=301]

########## Begin - Joomla! core SEF Section
#
#RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
########## End - Joomla! core SEF Section 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:37:11.223

您需要通过在规则中的正则表达式前面`/a/`添加 a来匹配前导。`^/?a/`

```
RewriteCond %{HTTP_HOST} ^www.xyz.com$ [NC]    
RewriteCond %{REQUEST_URI} ^/a/theatre$    
RewriteRule ^/?a/(.*)$ http://www.abc.com/a/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^www.abc.com$ [NC]    
RewriteCond %{REQUEST_URI} !^/a/theatre    
RewriteRule ^/?a/(.*)$ http://www.xyz.com/a/$1 [NC,L,R=301] 
```

# java - Persist array data in struts 2.0

> ID：12137749
> 
> 赞同：0
> 
> 时间：2012-08-27T07:22:49.430
> 
> 标签：java, jsp, struts2, arraylist

I am using struts 2.0 in a project.I am having a form which takes user information. The condition is user can add details of n number of users and when he press submit button we need to take data of all the user and store it in database. I have created a pojo and for every user details I am creating a object and trying to store it in a array. But everytime I call the class the object is getting reinitialised. How can I persist the array without making it static. Thanks in advance.

# jquery - jQuery .click 没有启动

> ID：12137757
> 
> 赞同：0
> 
> 时间：2012-08-27T07:23:25.493
> 
> 标签：jquery, click, attr

我有一个链接（imp），当我单击此链接时，它会显示一个 div。在这个 div 上有一个减号来减少这个 div。当我减少这个 div 时，我会添加一个加号来再次显示这个 div。

问题只是在加号上。

```
$('.plusStep1').click(function() {
  $('#plus').empty();
  $('#step1').css('display','block');
  $(".close-step1 img")
    .attr("src", "http://4.bp.blogspot.com/_0AyNA9sRlIs/TAPH55KDj7I/AAAAAAAAIsU/_fjn6O2WguQ/s1600/424px-OCR-A_char_Hyphen-Minus.svg.png"); 
```

上面的代码似乎只有在我在控制台中执行时才有效！

[这是对 fiddle 的测试](http://jsfiddle.net/L95UP/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:36:07.120

`.click`不适用于动态创建的元素，如果要将函数绑定到在 DOM 加载后创建的元素，最好使用`delegate`：[http ://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

因此，要将这个函数绑定到所有元素，无论是否在 DOM 之后创建，您都可以使用类似的东西；

```
$("#myContainer").on("click", ".PlusStep1", function() {
  $(this).toggleClass("chosen");
}); 
```

您的所有`PlusStep1`类元素都是具有 id 的元素的子元素（或后代）`myContainer`，即它们在其中，无论多深。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:31:41.253

`.click()`不绑定到新创建的元素。您可以创建一个单独的函数来执行您想要的操作（在加号单击上）以及创建锚点调用时

```
bind('click', function() {
   seperateFunction();
}) 
```

更新：对不起，更容易`live`做到这一点（见[jQuery doc](http://api.jquery.com/live/)）

第二次更新：查看[另一个 stackoverflow 帖子](https://stackoverflow.com/questions/6658752/jquery-click-event-doesnt-work-on-dynamically-generated-elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:34:14.970

将您的选择器更改为，`$('#plus').click(function() {`因为加号没有 th 类`plusStep1`但有 id`plus`

[我保存了更新的](http://jsfiddle.net/L95UP/3/)小提琴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:36:22.767

试试这个

```
jQuery(function( $ ){

        // Get a reference to the container.
        var containerStep1 = $( "#step1" );

        // Bind the link to toggle the slide.
        $( ".impaye" ).click(
        function( event ){
        // Prevent the default event.
        event.preventDefault();

        // Toggle the slide based on its current
        // visibility.
        if (containerStep1.is( ":visible" )){
        containerStep1.slideUp( 1000 );
        } else {
        containerStep1.slideDown( 1000 );
        }
        }
        );

        // CLOSE STEPS

        $(".close-step1 img").attr("src", "http://4.bp.blogspot.com/_0AyNA9sRlIs/TAPH55KDj7I/AAAAAAAAIsU/_fjn6O2WguQ/s1600/424px-OCR-A_char_Hyphen-Minus.svg.png");
        // STEP 1
        $('.close-step1').click(function () {
            $('#plus').empty();
            $('.close-step1').clone().appendTo('#plus');
            $('#plus .close-step1').addClass('plusStep1');

            containerStep1.slideToggle("slow", function () {
                if ($("#step1").is(':visible')) {
                    $(".close-step1 img").attr("src", "http://4.bp.blogspot.com/_0AyNA9sRlIs/TAPH55KDj7I/AAAAAAAAIsU/_fjn6O2WguQ/s1600/424px-OCR-A_char_Hyphen-Minus.svg.png");
                }
                else {
                    $(".close-step1 img").attr("src", "http://upload.wikimedia.org/wikipedia/commons/3/30/OCR-A_char_Plus_Sign.svg");
                    $('.plusStep1').bind('click',plustep1);
                }

            });
        });
        function plustep1() {
            $('#plus').empty();
            $('#step1').css('display','block');
            $(".close-step1 img").attr("src", "http://4.bp.blogspot.com/_0AyNA9sRlIs/TAPH55KDj7I/AAAAAAAAIsU/_fjn6O2WguQ/s1600/424px-OCR-A_char_Hyphen-Minus.svg.png");

        }

        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T07:37:02.627

您还可以使用以下

```
 $('.plusStep1').live('click',function() {

//---------Your Code----------
})

or 
 $('.plusStep1').bind('click',function() {
//---------Your Code----------
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T07:38:49.037

我认为你让这变得比它需要的更难。也许以这种方式尝试它会对你有用。

html

```
<a href="#" class="trigger">img</a>

<div id="togglable" style="display:none;">
  <a href="#" class="trigger">Hide me</a>
  content content content
</div> 
```

js

```
$(".trigger").click(function() {
  $("#togglable").toggle();
}); 
```

然后您可以添加一些逻辑来更改触发元素的 src 属性以合并您的 + 和 - 图像。

好处是不需要实时绑定。

# javascript - Javascript is working on Safari, but fails on others

> ID：12137758
> 
> 赞同：0
> 
> 时间：2012-08-27T07:23:26.577
> 
> 标签：javascript, google-maps, browser, xml-parsing

There is some problem that I can't find out why the code worked on Safari, but failed on other browsers.

There is the [html part](http://github.com/CarolHsu/gmap/blob/master/gmap_demo.html) and the main [javascript part](http://github.com/CarolHsu/gmap/blob/master/scripts/main.js).

### The main problem that I find is:

While executing the function `downloadurl(url, function)`, cannot find the XML tags "Info", and the markers array length is 0 on many browsers. However, it's ok on Safari. The part of javascript code is like:

```
downloadUrl("http://travel-taoyuan.tycg.gov.tw/content/travel/xmlcontentlist1.aspx", function(doc) {
    var xml = xmlParse(doc);
    var markers = xml.documentElement.getElementsByTagName("Info");
    ...... 
```

To alert markers, it will return "0". And actually it should be "174"(Safari's result).

*Thanks for answering my question.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:45:45.860

嗯，似乎是语法错误。不同的浏览器将使用不同的语法，因此它不会执行（或者如果幸运的话，充其量也不会正确执行）。

尝试类似......

```
        <script type="text/javascript">
        如果（窗口.XMLHttpRequest）
          {// IE7+、Firefox、Chrome、Opera、Safari 的代码
          xmlhttp=新的 XMLHttpRequest();
          }
        别的
          {// IE6、IE5的代码
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        xmlhttp.open("GET","http://travel-taoyuan.tycg.gov.tw/content/travel/xmlcontentlist1.aspx",false);
        xmlhttp.send();
        xmlDoc=xmlhttp.responseXML；

        var x=xmlDoc.getElementsByTagName("theMainTagName"); //TODO: 这是主要标签 ^(见注释)
        对于 (i=0;i<x.length;i++)
          {
          //TODO: 处理每个 xml 元素的代码
        //这是从特定标签获取值的代码：x[i].getElementsByTagName("theTagName")[0].childNodes[0].nodeValue
          }
        </脚本>

```

注意： ^'main' 标签是，例如，在[这个 xml 文档](http://www.w3schools.com/xml/cd_catalog.xml)的情况下，'main' 标签是 'CATALOG'

希望这可以帮助。抱歉，如果不是很清楚，自从我使用 xml/javascript 以来已经有一段时间了。如果您需要进一步解释，请发表评论

# c# - how to get computed column value in stored procedure

> ID：12137760
> 
> 赞同：2
> 
> 时间：2012-08-27T07:23:31.577
> 
> 标签：c#, asp.net, .net, sql-server-2008

I am using ASP.NET 4.0, C# and SQL Server 2008 R2\. I am getting `UserName` from the user in a webpage for stored in the SQL table `User_Info2`. Using SQL Server 2008 feature "computed column" I am generating the `Vendor_ID` automatically for every `Insert` using the stored procedure. In button click, after I insert the record I want to display the message with `Vendor_ID`, so please anyone tell me how to get the `Vendor_ID` column from the stored procedure ?

```
 CREATE TABLE User_Info2
    (  SNo int Identity (2000,1) , 
       Vendor_ID AS 'VEN' + CAST(SNo as varchar(16)) PERSISTED PRIMARY KEY, 
       UserName VARCHAR(30) NOT NULL
    ) 
```

Stored procedure

```
 ALTER PROCEDURE [dbo].[usp_User_Info2] @UserName VARCHAR(30)
    AS  
    BEGIN 
       SET NOCOUNT ON;

       INSERT INTO User_Info2 (UserName) VALUES (@UserName)   
    END 
```

C# Code :

```
protected void BtnUserNext_Click(object sender, EventArgs e) 
{      
  SqlConnection SqlCon = new SqlConnection(GetConnectionString());  
  SqlCommand cmd = new SqlCommand();   
  cmd.CommandType = CommandType.StoredProcedure;  
  cmd.CommandText = "usp_User_Info2";   
  cmd.Parameters.Add("@UserName", SqlDbType.VarChar).Value = txtUserName.Text.Trim();      
  cmd.Connection = SqlCon;    
  try   
  {     
     SqlCon.Open();   
     cmd.ExecuteScalar();  
  }  
  finally   
  {
    string url = "../CompanyBasicInfo.aspx?Parameter=" + Server.UrlEncode ("+ Vendor_ID  +");
    ClientScript.RegisterStartupScript(this.GetType(),"callfunction",
    "alert('Login created  successfully for "+ Vendor_ID +"');
    window.location.href = '"  + url + "';", true); 
    SqlCon.Close();    
  }    
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T07:39:44.297

您可以使用该子句输出插入的值`OUTPUT`，然后在执行存储过程时读取它：

```
ALTER PROCEDURE [dbo].[usp_User_Info2] @UserName VARCHAR(30)
AS  
BEGIN 
   SET NOCOUNT ON;

   INSERT INTO User_Info2 (UserName) 
   OUTPUT Inserted.Vendor_ID
   VALUES (@UserName)   
END 
```

并在您的 C# 调用代码中：

```
 object spResult;
  string vendorID;

  try   
  {     
     SqlCon.Open();   
     spResult = cmd.ExecuteScalar();  

     if(spResult != null)  // check to make sure you got something back!
     {
         vendorID = spResult.ToString();
     }        
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:42:54.190

你可以试试这个

```
ALTER PROCEDURE [dbo].[usp_User_Info2] @UserName VARCHAR(30)
AS  
BEGIN 
   SET NOCOUNT ON;

   declare @Id int

   INSERT INTO User_Info2 (UserName) VALUES (@UserName)   

   SET @Id = Scope_Identity()

   SELECT Vendor_ID From User_Info2 WHERE SNo = @Id
END 
```

C＃

```
try   
{     
  SqlCon.Open();   
  string VendorID = cmd.ExecuteScalar() as string;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:45:38.517

您可以在以下帮助下获取当前插入行`SCOPE_IDENTITY()`

```
SET @SNo = SCOPE_IDENTITY() 
```

在插入查询下方，您可以在`@SNo`

所以它会是：

```
ALTER PROCEDURE [dbo].[usp_User_Info2] 
(
    @UserName VARCHAR(30),
    @SNo int,
    @Vendor_ID VARCHAR(50) OUTPUT
)
AS  
BEGIN 
   SET NOCOUNT ON;

   INSERT INTO User_Info2 (UserName) VALUES (@UserName)
   SET @SNo = Scope_Identity()

   select @Vendor_ID as Vendor_ID from User_Info2 where SNo = @SNo

END 
```

**编辑：**

```
SqlParameter[] param= new SqlParameter[1];

param[0] = new SqlParameter("@Vendor_ID", 0);
param[0].Direction = ParameterDirection.Output;

//  Here there will be a Stored Procedure Call

int VendorID = Convert.ToInt32(param[0].Value); 
```

所以现在你会知道`@Vendor_ID`这是一个`Output`变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:42:19.983

你也可以这样做

```
select top(1) Vendor_ID from User_Info2 order by SNo desc 
```

# excel - in vba how to define array and compare them?

> ID：12137775
> 
> 赞同：0
> 
> 时间：2012-08-27T07:24:45.400
> 
> 标签：excel, vba

i have 2 sheets , i want to find the same rows in 2 sheets , so i put the first row in array , and by a for next i define the first array ...then i define another array from second sheet , then i compare them .... why it doesn't work?

```
Sub compare()
    Dim n(4) As Variant
    Dim o(4) As Variant
    Dim i As Integer

    For i = 3 To 20    'satrha
        For j = 2 To 4     'por kardan
            n(j) = Sheets("guys").Cells(i, j)
        Next                'por kardan
        k = 3
        Do                  'hhhh
            For Z = 2 To 4     'por dovomi
                o(Z) = Sheets("p").Cells(k, Z)
            Next                  'por dovomi
            If n(j) = o(Z) Then
                Sheets("guys").Cells(i, 1) = Sheets("p").Cells(k, 2)
                flag = True
            Else
                flag = False
                k = k + 1
            End If
        Loop Until flag = False  'hhhhh
    Next             'satrha
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:09:20.400

从您现有的代码中猜测，我的以下代码将在找到匹配项时将工作表“p”列 B 中的值复制到工作表“guys”列 A。

```
Sub compare()
    Dim i As Integer
    Dim j As Integer
    Dim l As Integer
    l = Sheets("p").Range("B65535").End(xlUp).Row
    Debug.Print l
    For i = 3 To 20
        For j = 3 To l
            If Sheets("guys").Cells(i, 2).Value = Sheets("p").Cells(j, 2).Value And _
                Sheets("guys").Cells(i, 3).Value = Sheets("p").Cells(j, 3).Value And _
                Sheets("guys").Cells(i, 4).Value = Sheets("p").Cells(j, 4).Value Then
                Sheets("guys").Cells(i, 1).Value = Sheets("p").Cells(j, 2).Value
                Exit For
            End If
        Next
    Next
End Sub 
```

注意到我`Value`在我的代码中明确说过。这将复制计算值（例如公式的结果）而不是“原始”内容。

# java - RMI 客户端获取空返回值

> ID：12137776
> 
> 赞同：0
> 
> 时间：2012-08-27T07:24:51.667
> 
> 标签：java, rmi

我编写了一个 RMI 服务器应用程序，其中包含以下 API-

IDbInfo getDatabaseInfo();

该API返回数据库信息类对象，该类继承自IDbInfo。到现在一切都很顺利，客户端应用程序能够从 RMI 服务器获得正确的返回值。

几天前，我们在新的 Debian 机器上安装了 RMI 服务器，在 winodows 机器上安装了客户端。之后，客户端应用程序总是将返回值设为 null。我在 RMI 服务器中添加了日志以验证返回的值，发现服务器确实返回了正确的值，但客户端应用程序以某种方式将其接收为 null。

我尝试通过在 Fedora 机器上安装 RMI 服务器和在 Windows 上安装客户端（在我们的测试环境中）来重现此问题，但一切正常。问题仅出现在这台特定的 Debian 机器上。

谁能指出这个问题的可能原因？

- - 编辑 - -

以下是我的返回类型的定义-

```
public interface IDbInfo extends Serializable {
....
}

public class MysqlDatabaseAccessInfo implements IDbInfo {
....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:25:23.590

如果远程方法返回 null，那是因为您是这样编码的。

# c# - Fetch multiple users from Sharepoint UserProfile Servce

> ID：12137779
> 
> 赞同：0
> 
> 时间：2012-08-27T07:25:07.897
> 
> 标签：c#, sharepoint-2010

I need to fetch all users ID from their Manager in Sharepoint userprofile.. Means Multiple users are under of a single Manager. Using C# how to fetch? Anyone knows..Help me.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T13:50:36.140

应该可以做类似的事情。

```
SPServiceContext serviceContext = SPServiceContext.GetContext(SPContext.Current.Site);
UserProfileManager upm = new UserProfileManager(serviceContext);
UserProfile u = upm.GetUserProfile(false);
var users = u.GetDirectReports(); 
```

请务必包含对 Microsoft.Office.Server.UserProfiles 的引用

# iphone - 如何更改 uinavigation 控制器后退按钮操作

> ID：12137780
> 
> 赞同：0
> 
> 时间：2012-08-27T07:25:11.777
> 
> 标签：iphone, objective-c, ios

我有一个`UINavigationController`并且我必须保留默认的后退按钮“后退箭头样式”我只想问我是否可以在不构建新按钮的情况下更改后退按钮操作并更改其样式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:28:50.093

不，如果你想要一个自定义后退按钮，你必须创建一个自定义 UIBarButtonItem，然后将它分配给适当的属性：

```
self.navigationItem.backBarButtonItem = myCustomBackItem; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:30:49.310

AFAIK 您无法更改默认后退按钮本身的操作，但您可以将 UIBarButtonItem 作为 leftBarButtonItem 放置在那里并分配您自己的操作。

如果定义了 leftBarButtonItem，则显示此按钮，而不是默认的后退按钮。

但是，在执行此类技巧时，请牢记 GUI 指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:35:09.150

一旦你推送一个新的 UIView，UINavigationBar 中的后退按钮就会自动生成。为了让您自定义后退按钮是创建一个新的 UIToolBar + 一个 UIBarButtonItem 与自定义视图。

下面的代码是在 UIToolBar 中使用自定义 UIBarButtonItem 的示例。

```
 // create button
UIButton* backButton = [UIButton buttonWithType:101]; // left-pointing shape!
[backButton addTarget:self action:@selector(backAction) forControlEvents:UIControlEventTouchUpInside];
[backButton setTitle:@"Back" forState:UIControlStateNormal];

// create button item -- possible because UIButton subclasses UIView!
UIBarButtonItem* backItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];

// add to toolbar, or to a navbar (you should only have one of these!)
[toolbar setItems:[NSArray arrayWithObject:backItem]];
navItem.leftBarButtonItem = backItem; 
```

下面的链接是PSD格式的iOS按钮设计，供进一步修改。

[http://www.chrisandtennille.com/pictures/backbutton.psd](http://www.chrisandtennille.com/pictures/backbutton.psd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:36:28.553

您可以制作自定义按钮并对其进行操作，但您不能更改默认的 backButton 操作.....

```
self.navigationItem.leftBarButtonItem = getBackBtn; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T07:39:22.250

UINavigationController 在推送和弹出 ViewController 时向其委托发送消息。

`<UINavigationControllerDelegate>`您可以通过执行以下操作并在 .h 文件中添加来了解何时按下后退按钮

```
-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    self.navigationController.delegate = self;
}

-(void)viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:animated];
    self.navigationController.delegate = nil;
}

-(void)navigationController:(UINavigationController *)navigationController
     willShowViewController:(UIViewController *)viewController 
                   animated:(BOOL)animated{

    //Test here if the View Controller being shown next is right below the current
    //    ViewController in the navigation stack
    //
    //Test by:
    // 1\. comparing classes, or
    // 2\. checking for a unique tag that you previously assigned, or
    // 3\. comparing against the [navigationController viewControllers][n-2] 
    //        where n is the number of items in the array

    if ([viewController isKindOfClass:NSClassFromString(@"ViewControllerClassThatGetsPushedOnBACK")){
        //back button has been pressed
    }

    if (viewController.tag == myUniqueTagIdentifier){
        //back button has been pressed
    }

    if ([navigationController.viewControllers[navigationController.viewControllers.count-2]==viewController]){
        //back button has been pressed
    }
} 
```

[Apple Docs UINavigationController 类参考：](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934-CH3-SW16)

> 根视图控制器在数组中的索引 0 处，后视图控制器在索引 n-2 处，顶部控制器在索引 n-1 处，其中 n 是数组中的项目数。

# touch - the menu is failed to opened using monkeyrunner touch command

> ID：12137781
> 
> 赞同：0
> 
> 时间：2012-08-27T07:25:12.317
> 
> 标签：touch, monkeyrunner

i want to open "Choose input method" popup menu from settings application. Using monkeyrunner touch command, the screen is taped, while the menu is not opened.

Here is the reproduce steps:

1.  environment: emulator (android sdk 4.1)
2.  Go to System settings -> Launguage & input view
3.  try to tap the text "Default" using monkeyrunner touch command

python code:

```
 device = MonkeyRunner.waitForConnection(10, "emulator-5554")
    device.touch(83, 486, MonkeyDevice.DOWN_AND_UP) 
```

Actually result:

1.  the screen is taped, but the popup menu is not opened. Also reproduced with tap the text "Launage".
2.  And i tried with **android sdk 2.3.3** for this issue, the submenu for "Default" and "Language" could be opened.
3.  if executed the adb command "adb shell input tap 83 486" on sdk 4.1, the menu could be opened.

Any ideas for this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:08:36.730

如果您使用 monkeyrunner 来打开系统设置 -> 语言和输入视图，那么您应该沿途放置一些 *MonkeyRunner.sleep(x) （其中 x 是以秒为单位的时间）。

这样，您将确保正确创建 UI 元素。如果您不放置 sleep(x) 语句，脚本将触摸/按下而没有任何延迟/超时。但是 android UI 需要一些时间来创建视图和其他元素并使其正常工作。

# sharepoint-2010 - Restore the sharepoint backup(.dat) to another server

> ID：12137787
> 
> 赞同：0
> 
> 时间：2012-08-27T07:26:15.230
> 
> 标签：sharepoint-2010

I need to restore the sharepoint backup(.dat) to another server. while restoring it is giving me version error. my source server have Hot Fix (office2010-kb2394320-fullfile-x64-glb) installed but on destination it is not installed. i have installed Sharepoint 2010 SP1 on destination server. am i doing something wrong?

Please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:47:30.877

要使 SharePoint 2010 备份/恢复正常工作，以下是先决条件：

> 源和目标服务器必须具有相同的配置 WRT SharePoint 软件

意味着相同的服务包，热修复......

# jquery - 如何选择输入和文本区域？

> ID：12137788
> 
> 赞同：1
> 
> 时间：2012-08-27T07:26:15.683
> 
> 标签：jquery

我有以下代码：

```
 $('input.update-grid', $form)
            .each(function () {
                var id = this.id.replace('modal', '');
                $('#input' + id).val(this.value)
            }) 
```

我希望这也可以选择具有一类升级网格的文本区域。有没有一种方法可以在不制作另一个选择器和代码的情况下做到这一点？

此外，如果我想在 textarea 中设置文本，是否只是以与使用 .val() 的输入相同的方式设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:28:08.507

```
$('input.update-grid, textarea.update-grid', $form) 
```

或者，如果没有其他元素标签具有该类：

```
$('.update-grid', $form) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:28:47.827

你可以只选择类名。

```
$('.update-grid', $form).each(function () {
   var id = this.id.replace('modal', '');
   $('#input' + id).val(this.value);
}) 
```

# css - whitespace nowrap in firefox

> ID：12137789
> 
> 赞同：1
> 
> 时间：2012-08-27T07:26:22.823
> 
> 标签：css, scroll, nowrap

I am using the custom scroll bar which has ul list inside. When evener the ul list or li content extends then the scroll bar is getting extended.

I have used white-space:nowrap for the main div so that ul width is getting extended but it is working only in chrome but not working in firefox/IE and other browsers.

Here is my code

```
<div class="horizontalaccordion">
            <ul>
              <li>
                <h3>Heading  2</h3>
                <div>
                  Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
                </div>
              </li>
              <li>
                <h3>Heading 3</h3>
                <div>Content For Panel 3.</div>
              </li>
              <li>
                <h3>Heading 4</h3>
                <div>Content For Panel 4</div>
              </li>
              <li>
                <h3>Heading 1</h3>
                <div>Content For Panel 1.</div>
              </li>
                <h3>Heading 3</h3>
                <div>Content For Panel 3.</div>
              </li>
              <li>
                <h3>Heading 2</h3>
                <div>Content For Panel 2.</div>
              </li>
              <li>
                <h3>test</h3>
                <div>Content For Panel sow</div>
              </li>
                      <li>
                <h3>Heading 3</h3>
                <div>Content For Panel 3.</div>
              </li>
              <li>
                <h3>Heading 4</h3>
                <div>Content For Panel 4</div>
              </li>
            </ul>
          </div> 
```

CSS

```
.horizontalaccordion{
      height:auto; width:auto; white-space:nowrap; border-radius:4px !important; background-color: #b6b6b6; margin-right:15px ; height:95px; overflow:hidden      
}
.horizontalaccordion>ul {
    margin: 0;
    padding-left:0;
    list-style:none;
    height: 95px    ;  width:auto;   display:inline-block
}

.horizontalaccordion>ul>li {
    display:block;
    overflow: hidden;
    float:left;
    margin: 0 !important;
    padding: 0 !important;
    list-style:none;
    width:38px;
    height: 95px; 

    /* CSS3 Transitions */
    transition: width 0.1s ease-in-out;
    -moz-transition: width 0.1s ease-in-out;
    -webkit-transition: width 0.1s ease-in-out;
    -o-transition: width 0.1s ease-in-out;
}
.horizontalaccordion>ul>li>h3 {
    display:block;
    margin: 5px 0 0 0;
    padding:10px;
    height:65px;
    width:72px;
    border-radius:6px;
    box-shadow: 0px -2px 2px #616161; 

    /* Decorative CSS */
    font-family: Arial, Helvetica, sans-serif;
    text-decoration:none;
    text-transform:uppercase;
    color: #000;
    background-color: #B3B3B3;
    background: -webkit-gradient(linear, 0% 0%, 0% 95%, from(#BEBEBE), to(#B3B3B3));
    background: -moz-linear-gradient(top, #BEBEBE 0%, #B3B3B3 95%);
    font:bold 12px Myriad Pro, Verdana, Geneva, sans-serif; color:#2c3e52;

    /* CSS3 Transform Rotate & Translate */
    white-space:nowrap;
    -moz-transform: rotate(-90.0deg);  /* FF3.5+ */
    -o-transform: rotate(-90.0deg);  /* Opera 10.5 */
    -webkit-transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
    transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3.0)
            progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff999999, endColorstr=#ffcccccc);  /* IE6,IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3.0)"
                "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff999999, endColorstr=#ffcccccc)"; /* IE8 */
}

.horizontalaccordion>ul>li>div {
    display:none;
    float:left;
    overflow: auto;
    position:relative;
    top:-88px;
    left:40px; 
    *top:0px;       /* IE7 Hack */
    *left:0px;      /* IE7 Hack */
    margin:0;
    width:auto;
    height:68px;
    padding:10px 50px 10px 10px; white-space:nowrap;
    background:#f0f0f0; color:#000;
    border-radius:4px;
    -webkit-box-shadow: inset 0px 2px 2px #9b9b9b; box-shadow: inset 0px 2px 2px #9b9b9b;
}
.horizontalaccordion>ul>li.hover {
    overflow: hidden;
    width: auto;
}

.horizontalaccordion>ul>li.hover>div {
    display:block; 
}

horizontalaccordion>ul>li.hover>h3 {
    /* Decorative CSS */
    color:#fff;
    background:#000000;

    /* CSS3 Gradient Effect */
    background: -moz-linear-gradient( top, #454545, #000000); /* FF, Flock */
    background: -webkit-gradient(linear, left top, left bottom, from(#454545), to(#000000)); /* Safari, Chrome */
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1.0)
            progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff454545, endColorstr=#ff000000); /* IE 5.5 - IE 7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1.0)"
                "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff454545, endColorstr=#ff000000)";   /* IE 8 */
}
.horizontalaccordion>ul>li>h3:hover {
    cursor:pointer;
    /* Decorative CSS */

}

​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:09:04.713

[我在 JS Fiddle 上设置了您的代码，](http://jsfiddle.net/j6Gut/)以尝试更好地理解这些问题。

一些东西：

*   您的 HTML 代码缺少一个开始`<li>`标记，这可能会造成破坏。
*   对我来说，Firefox (14) 和 Chrome (18) 上的行为看起来完全一样。对于您要询问的空白包装内容，即使是 IE9 似乎也可以正常工作。
*   如果没有随附的 Javascript，我不确定您希望它如何发挥作用。

`white-space:nowrap`样式规则旨在防止*文本*换行（参见[此处](http://www.w3schools.com/cssref/pr_text_white-space.asp)），（它在我链接到的 Fiddle 中成功地做到了这一点），但它并没有阻止元素换行。

也许你想要的是删除

```
whitespace: nowrap 
```

并使用其中之一：

```
overflow-x: visible; /* shows all items even if the area is too small */
overflow-x: scroll; /* Will always show a scrollbar */
overflow-x: auto; /* Will only show a scrollbar when the content doesn't fit */
overflow-x: hidden; /* Content will just drop off the end of the page */ 
```

我希望这可以帮助你。如果您能准确地阐明您希望的是什么，那就太好了。在 JSFiddle 上，您可以更改、更新并发布链接，如果它可以帮助我们准确了解您正在寻找的内容。

# iphone - 静音开关打开时如何停止振动？

> ID：12137793
> 
> 赞同：0
> 
> 时间：2012-08-27T07:26:54.990
> 
> 标签：iphone

我有以下代码振动

```
AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 
```

即使静音开关打开，它也会振动。但是，我不希望它在静音模式下振动。它很烦人。我如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:17:27.287

您需要检测振铃状态，对吗？如果是这种情况，请检查[此问题](https://stackoverflow.com/questions/7798891/detect-silent-mode-in-ios5)

# c++ - 矢量 Push_back

> ID：12137794
> 
> 赞同：0
> 
> 时间：2012-08-27T07:27:01.957
> 
> 标签：c++, vector, push-back, string-split

> **可能重复：**
> [使用字符串拆分进行空检查](https://stackoverflow.com/questions/12136923/empty-check-with-string-split)

我用 '&' 分割下面的字符串并将其保存在向量中

```
const vector<string> vec = split("f0=fname0&l0=lname0&f1=fname1&l1=lname1&f2=fname2&l2=lname2&f3=&l3=","&"); 
```

现在我再次使用下面的代码用 '=' 拆分拆分字符串。

```
vector<string> vec1;
for (std::vector<std::string>::size_type a = 0; a < vec.size(); ++a)
{
     vec1=split(vec.at(a),"=");

} 
```

最后我只得到向量'vec'到'vec1'的最后一项。每次我的 vec1 指针刷新。但我想在 vec1 的最后一个位置添加拆分字符串。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:43:44.483

您分配给`vec1`循环中的每个时间，因此它只包含最后一对。相反，您应该*附加*到`vec1`. 使用以下功能最简单地完成此操作[`insert`](http://en.cppreference.com/w/cpp/container/vector/insert)：

```
vector<string> vec1;
for (std::vector<std::string>::size_type a = 0; a < vec.size(); ++a)
{
    vector<string> tmp = split(vec.at(a),"=");
    vec1.insert(vec1.end(), tmp.begin(), tmp.end());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:43:46.410

你明白什么是向量吗？将字符串拆分并再次将其放入一个向量“空间”并没有多大意义（那时您可能只保留字符串）

我猜你正在使用 boost 的 split() 函数.. 然后跳过 for 循环并调用

```
const vector<string> vec = split("f0=fname0&l0=lname0&f1=fname1&l1=lname1&f2=fname2&l2=lname2&f3=&l3=","&");

for( int i = 0; i <= vec.size(); i++){
cout << i << "#: " << vec.at(i) << endl;
} 
```

查看向量内容（在索引处）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:46:44.883

那是因为您分配给`vec1`而不是附加。您正在替换先前生成的内容并以最后一次迭代的结果结束（您可以使用 修复它`vec1.push_back()`）。

所以，你想得到一个带参数的字符串向量，但是你将如何确定哪个值属于哪个参数。IMO，你最好使用`std::map`：

```
using std::string;
using std::vector;
using std::map;

vector<stirng> vec = split("f0=fname0&l0=lname0&f1=fname1&l1=lname1&f2=fname2&l2=lname2&f3=&l3=","&");

map<string, string> params;

for (auto it = vec.begin(); it != vec.end(); ++it) {
    vector<string> p = split(*it, "=");
    params.insert(p[0], p[1]);
} 
```

现在，您将拥有其中包含其值的键列表`params`，因此您将能够`params["f0"]`.

# ruby - 我如何在 Ruby 中实现事实？

> ID：12137795
> 
> 赞同：1
> 
> 时间：2012-08-27T07:27:08.953
> 
> 标签：ruby, factual

在查看事实网站后，我选择了“factual-api”gem。我可以知道如何设置它并使用该功能来获取这些区域的位置吗？我可以把它写在控制器/模型中吗？

在尝试安装 gem 之后，当我查看我的 gemfile 时，我得到了这个：

```
Gem "factual-api" is unavailable in SDK 'RVM: ruby-1.9.2-p290 
```

此检查会警告当前 SDK 中不可用的 gem。IDE 需要 gem 来提供完成、导航和分析。可以使用适当的快速修复来安装所需的 gem。

当我运行命令 bundle install 时，我没有任何错误。但是当我打电话时：

```
factual = Factual.new("YOUR_KEY", "YOUR_SECRET") 
```

我明白了：

```
NameError: uninitialized constant Factual 
```

我现在做错了什么？这样做的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:53:06.230

这个答案有点晚了，但无论如何我都会发布它，以便将其标记为已回答。

如评论中所述，推荐的方法是使用 Factual 的 Ruby 驱动程序，该驱动程序可以在[http://github.com/Factual/factual-ruby-driver](http://github.com/Factual/factual-ruby-driver)找到，或者在您的 Gemfile 中安装以下内容：

`gem 'factual-api', :require => 'factual'`

如果不使用 Gemfile，请记住在`require 'factual'`某处手动操作。如果它是一个看起来像这样的私有存储库，我还想在 config 文件夹中放置一个带有 OAuth 详细信息的初始化程序：

```
class Factual
  KEY = 'YOUR-OAUTH-KEY'
  SECRET = 'YOUR-OAUTH-SECRET'
end 
```

这允许您在应用程序的任何位置访问 Factual API

`factual = Factual.new Factual::KEY, Factual::SECRET`

# android - remove contact from a specific group in android

> ID：12137798
> 
> 赞同：0
> 
> 时间：2012-08-27T07:27:14.413
> 
> 标签：android, android-contacts

I am making an android app, I want to remove a contact from a specific group not to delete contact just remove from the group, I have group id and contact id, can anyone please tell me the query to do this, I want to implement something like Delete contact_id=1 from group_id=2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:11:15.927

联系人通过 ContactsContract.CommonDataKinds.GroupMembership 记录链接到组。您可以使用类似这样的方法从组中删除联系人：

```
private void deleteContactFromGroup(long contactId, long groupId)
{
    ContentResolver cr = getContentResolver();
    String where = ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID + "=" + groupId + " AND "
            + ContactsContract.CommonDataKinds.GroupMembership.RAW_CONTACT_ID + "=?" + " AND "
            + ContactsContract.CommonDataKinds.GroupMembership.MIMETYPE + "='"
            + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "'";

    for (Long id : getRawContactIdsForContact(contactId))
    {
        try
        {
            cr.delete(ContactsContract.Data.CONTENT_URI, where,
                    new String[] { String.valueOf(id) });
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }
}

private HashSet<Long> getRawContactIdsForContact(long contactId)
{
    HashSet<Long> ids = new HashSet<Long>();

    Cursor cursor = getContentResolver().query(RawContacts.CONTENT_URI,
              new String[]{RawContacts._ID},
              RawContacts.CONTACT_ID + "=?",
              new String[]{String.valueOf(contactId)}, null);

    if (cursor != null && cursor.moveToFirst())
    {
        do
        {
            ids.add(cursor.getLong(0));
        } while (cursor.moveToNext());
        cursor.close();
    }

    return ids;
} 
```

请注意，当您执行删除时，您应该指定 RAW_CONTACT_ID 而不是 CONTACT_ID。因此，您需要查询指定联系人的所有原始联系人 ID。

此外，您可能需要考虑帐户数据。在这种情况下，将查询联系人 ID 更改为：

```
Uri rawContactUri = RawContacts.CONTENT_URI.buildUpon()
            .appendQueryParameter(RawContacts.ACCOUNT_NAME, accountName)
            .appendQueryParameter(RawContacts.ACCOUNT_TYPE, accountType).build();

Cursor cursor = getContentResolver().query(rawContactUri,
            new String[] { RawContacts._ID }, RawContacts.CONTACT_ID + "=?",
            new String[] { String.valueOf(contactId) }, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T16:36:55.447

```
public static Uri addContactToGroup(String rawContactId,String groupId)
    {
        try
        {

            ContentValues values = new ContentValues();
            values.put(Data.RAW_CONTACT_ID, rawContactId);
            values.put(GroupMembership.GROUP_ROW_ID, groupId);
            values.put(Data.MIMETYPE, GroupMembership.CONTENT_ITEM_TYPE);

            return getContentResolver.insert(Data.CONTENT_URI, values);
        }
        catch (Exception e)
        {}
        return Uri.EMPTY;
    } 
```

//------------------------------------

```
public static int removeContactFromGroup(String contactId,String groupId)
{
    try
    {
        String where = Data.CONTACT_ID + " = ? AND " + Data.MIMETYPE + " = ? AND " + GroupMembership.GROUP_ROW_ID + " = ?";
        String[] args = {contactId, GroupMembership.CONTENT_ITEM_TYPE, groupId};
        return getContentResolver.delete(Data.CONTENT_URI, where, args);
    }
    catch (Exception e)
    {}
    return 0;
} 
```

# ios - Facebook 弹出窗口在 iOS 中变为空白

> ID：12137802
> 
> 赞同：0
> 
> 时间：2012-08-27T07:27:29.250
> 
> 标签：ios, facebook, facebook-ios-sdk, fbconnect

如果用户点击 FBConnect 按钮，Facebook 弹出窗口确实会显示一条消息“连接到 Facebook”，但几秒钟后弹出窗口变为空白，我将面临这个奇怪的问题。请参阅图片了解更多详情。我试图记录错误并在错误委托方法上启用断点，但控制永远不会到达这些方法。我以前从未遇到过这个问题，一切似乎都运行良好，但现在这个问题突然出现了。最初我认为 API 密钥已过期，因此更改相同但它没有解决问题。 ![Facebook弹出问题](../Images/107107e6694f1994276abbd8b8fddedc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:40:29.027

我已通过将我的 Facebook SDK 更新到 3.0 版来解决此问题。此 SDK 的先前版本现已过时。

# grails - 继承 Grails 中的域类或标志会做什么？

> ID：12137804
> 
> 赞同：1
> 
> 时间：2012-08-27T07:27:36.293
> 
> 标签：grails, inheritance, grails-domain-class

我正在制作一个医生和患者都可以登录的网站。

```
class Doctors {
    String firstName
    String lastName
    String email
    String password
    String hospitalName
    String NPINumber
} 
```

和患者

```
class Patients{
    String firstName
    String lastName
    String email
    String password
} 
```

很明显，有很多重叠字段仅用于身份验证/登录目的，我想知道继承是否是一个好主意，或者我应该只在单个类中创建一个标志。

所以有两个选择：

**选项1**

```
class Users{
    String firstName
    String lastName
    String email
    String password
}

class Doctors extends Users {
    String hospitalName
    String NPINumber
}

class Patients extends Users{
} 
```

**选项-2**

```
class Users{
    String firstName
    String lastName
    String email
    String password
    boolean isDoctor
    String NPINumber
    String hospitalName
} 
```

我不确定我应该选择哪些设计，以便将来可以扩展！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:22:59.860

选项 1 肯定更 OO。但是，为了使设计更好，我仍然会做一些改变。与其扩展 User，不如拥有一个包含一些公共属性的 User 属性。扩展 User 类可能会使您的设计更加复杂。也许[这个话题](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)可以帮助你。

另外，作为建议，不要以复数形式使用类的名称。想象一下它本身就是一个实体，而不是实体的集合。例如，显然您的类 Doctor 专门代表一位医生。不超过一个。所以你应该使用**Doctor, Patient 和 User**。希望能帮助到你。

# iphone - Check undefinded keys

> ID：12137807
> 
> 赞同：0
> 
> 时间：2012-08-27T07:27:56.543
> 
> 标签：iphone, objective-c, ios, ios4

I am try to automatically assign the attribute value. I need to assign value for class attribute like bellow,

```
@property (nonatomic,retain)NSString *nid;
....
[self setValue:value forKey:@"nid"]; 
```

instead of,

```
[self setNid:value]; 
```

Problem i can't find method for handle the undefined key in my class. In NSDictionary have method for this,

```
[[dictionry allKeys]containsObject:@"nid"]; 
```

Is there any method similar to this handle my problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:31:48.150

我不确定你的意思，但是 NSKeyValueCoding 协议参考知道这个功能

```
- (id)valueForUndefinedKey:(NSString *)key 
```

在 KVC 中存在未知密钥的情况下调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:36:57.993

如果找不到键，则被查询的对象会收到`valueForUndefinedKey:`消息。您可以覆盖其实现以找出未定义的键是什么。

# c# - Serial port in .Net (C#)

> ID：12137809
> 
> 赞同：-1
> 
> 时间：2012-08-27T07:28:00.410
> 
> 标签：c#, serial-port

what should i do to wait until all the data sent to serial port

to test this condition assume the code bellow:

```
 Console.WriteLine("Baud is:" + SerialPortObj.BaudRate);
            Console.WriteLine(DateTime.Now.Millisecond);
            string tmpStr="";
            for (int i = 0; i < 100; i++)
            {
                tmpStr += "A";
            }
            SerialPortObj.Write(tmpStr.ToCharArray(),0,99);
            Console.WriteLine(DateTime.Now.Millisecond); 
```

example output is:

Baud is:300

97

97

And it indicate that .Net is not waiting until all chars to be send!

just to mention the code below does not work:

```
 Console.WriteLine("Baud is:" + SerialPortObj.BaudRate);
            Console.WriteLine(DateTime.Now.Millisecond);
            string tmpStr="";
            for (int i = 0; i < 100; i++)
            {
                tmpStr += "A";
            }
            SerialPortObj.Write(tmpStr.ToCharArray(),0,99);

            while (SerialPortObj.BytesToWrite>0)
            {
                Thread.Sleep(1);
                Console.WriteLine(SerialPortObj.BytesToWrite);
            };

            Console.WriteLine(DateTime.Now.Millisecond); 
```

example output is:

Baud is:300

97

97

* * *

i am working on an special protocol that is depends on baud rate change over and use some thing like the follow:

```
 ->[Send Some Bytes (Baud300)] 

       <-[Receive Another Bytes (Baud9600)] 
```

so i want to send some chars by write method and wait until it finish and right after finishing i try to change baud , so i could understand the received bytes

* * *

is there any idea?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:13:07.320

首先，串行端口是无状态的。因此，您永远无法真正确定何时达到更改波特率的正确时间点。由于您要实现自己的特殊协议，因此您必须控制通信的双方（发送方/接收方）。所以在这种情况下，我强烈建议也将`Handshake`属性设置为`RequestToSend`并检查`DtrEnable`属性。

此外，您应该在通信的每个站点上使用两个缓冲区（接收/传出），这些缓冲区由它们自己的任务/线程监视。如果您将某些内容推送到传出缓冲区，该任务会检查是否可以发送（`CtsHolding`, `DsrHolding`），如果可以，则更改波特率并将该数据推送到线路上。等到保持属性设置回来，然后将波特率更改为其他值。在这种情况下，传入线程非常简单。它只是等待`DataReceived`事件，因为波特率的变化是由传出任务完成的。

如果您使用硬件握手（在您的情况下我强烈推荐），那么请确保您的串行端口正确支持它。大多数 USB 转串行适配器不能与 19200-8-N-1 以外的任何其他设备很好地配合使用。因此，在您认为自己没有正确编码或`SerialPort`课程有问题之前，请尝试找到两台具有*真正*串行端口的机器（或一台具有两个端口的机器进行测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:52:46.327

尝试将数据存储在变量中，当出现特定条件（可由您设置）时，将变量的值发送到串行端口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:27:18.413

用硬件做吗？

您可以尝试使用配置为 300/9600 的两个串行适配器。一个是 Tx，另一个是 rx。您需要一根“有趣的电缆”，将 2/3 针分成不同的 D 型，但这应该可以。

# c++ - inotify : 传输完成后如何通知目录中的新文件？

> ID：12137813
> 
> 赞同：0
> 
> 时间：2012-08-27T07:28:18.697
> 
> 标签：c++, linux, inotify

一个文件从 machine1/dir1 复制到 machine2/dir2。我在 dir2 上为创建的任何新文件添加了一个 inotify 监视。现在，如果文件很大，可能需要几秒钟才能完全在新机器上。如果我没记错的话，inotify 会在检测到事件后立即通知应用程序。那么如果必须检查文件状态，应该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:36:24.827

使用临时文件名（或其他目录）保存下载的文件，并在文件成功移动时将其重命名为预期的文件名。

例如 Nginx 使用这种方法来存储缓存数据 缓存数据首先写入临时文件，然后将其移动到缓存目录中的最终位置。执行廉价和原子重命名系统调用而不是完整文件副本因此最好在两个位置使用相同的文件系统

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T07:30:33.197

没有办法回答这个问题，因为它取决于应用程序环境和要求。可能会看到文件在 60 秒内没有被修改。它可能需要每隔几秒钟检查一次。这取决于。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:37:10.247

如果它只是从一台机器到另一台机器的 scp，则使用 IN_CLOSE_WRITE 有效。否则，这取决于文件从一台机器上传到另一台机器的方式。如果它是一次打开和关闭，则 IN_CLOSE_WRITE 是这样做的方法。

上述两个答案是否有意义取决于我们如何做到这一点。

# java - Implementing animation to run equally fast on all machines

> ID：12137816
> 
> 赞同：0
> 
> 时间：2012-08-27T07:28:32.453
> 
> 标签：java, animation, swt

What is the usual way to implement animations (e.g. a composite with a changing position, in SWT) so that they look equally fast on all machines?

The naive approach would be to use timestamps, to stop the time untill the next animation step.

Is there a more professional way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:51:03.397

我[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)经常使用它，它非常适用于一致的动画。`Frame`您所要做的就是实现一个`Panel`实现`ActionListener`.

计时器`actionPreformed(...)`以构造函数中指定的间隔（或者如果需要，可以稍后）调用该方法，并且您可以从`Timer`间隔执行所有重绘。通常这涉及更新您需要的任何对象的状态并调用[`repaint()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29)相关对象`Panel`。

确保调用`Timer`'`start()`方法。这让我很头疼！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:41:29.360

唯一的方法是使用时间戳；幼稚和专业的方法在使用方式上有所*不同*。

天真的方法使用线程和`Thread.sleep()`. 专业的方法使用计时器以特定的时间间隔运行代码，并让计时器决定如何处理延迟和抖动。

您可以了解有关计时器的更多信息，查看课程`Timer`和`TimerTask`. `java.util.Timer.scheduleAtFixedRate(TimerTask, Date, long)`应该是一个好的开始。请注意，代码是在新线程中执行的，因此您需要使用常用工具将事件注入 UI 线程的队列。

# objective-c - AFNetworking show upload-progress

> ID：12137823
> 
> 赞同：2
> 
> 时间：2012-08-27T07:29:11.027
> 
> 标签：objective-c, ios, cocoa-touch, afnetworking, uiprogressview

I have a question about using AFNetworking and showing a upload-progress.

Scenario: From a tableview the user can click on a row and go into a detailview. In the detailview the user can upload five images. If the user upload one image, a upload-progress view will be visible in top of the detailview.

Pretty simpel. :)

Now to the problem:

Lets say the user retunrs to the tableView, and again go into the deatilview where he just uploaded an image.

Is it possible to show how far the upload-progress is.

/Morten

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:30:55.230

查看AFNetworking Github 页面上的[示例。](https://github.com/AFNetworking/AFNetworking#file-upload-with-progress-callback)您应该能够将此代码集成到您的课程中，以便在文件上传之前显示进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T22:36:29.193

这是示例的更好链接，因为 githup 页面似乎没有显示如何设置进度。

[https://gist.github.com/andreortiz82/2934606](https://gist.github.com/andreortiz82/2934606)

# objective-c - Use phonegap or go native?

> ID：12137824
> 
> 赞同：0
> 
> 时间：2012-08-27T07:29:27.500
> 
> 标签：objective-c, ios, cordova

I'm about to make an application for ipad that has the following specifications:

*   download JSON (or xml) from server
*   download short audiofiles from server (locations are in the JSON from above)
*   save these to the iPad for offline use.
*   based on these files the user gets to do some exercises
*   user progress/results need to be saved to the device so they can continue where they left off the next time they launch the app.

My question: Can this be done with only html/css/jquery Phonegap? Or should I go native and make this all in Objective-C? Or can I combine phonegap and Objective-C?

* * *

Now I'd like to know how I can save a json file on the device for offline use. Also I'd like to know how to download audio (or images or whatever) and save those to the device.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:37:17.353

这可以通过 PhoneGap/Cordova 及其 HTML5 方法来完成。

如果只是 iPad，那就去原生吧。

您的应用程序的高级别要求听起来并不太复杂。对于更复杂的应用程序，由于性能问题，总是认为 facebook 只是为 iOS 原生的。最后，这可能是许多应用程序的方式。适用于 1000 多种设备的 PhoneGap 或其他 HTML5 或交叉编译方法以及面向市场领导者的原生解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:41:17.223

将原生 Objective-C 中构建的应用程序与使用 PhoneGap 等 Web 工具构建的应用程序进行比较，在速度方面，Objective-C 应用程序总是胜出，但在对 Objective-C Web 应用程序零知识的快速构建方面胜出。

如果你有 Objective-C 的知识，我认为使用原生 Objective-C 应用程序，否则使用 PhoneGap。

顺便说一句，您问题中提到的那些功能可以同时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:38:55.603

这取决于您的目标用户体验级别以及您认为您的应用程序将来会如何扩展。

如果您需要完全控制用户体验，那么您将需要采用原生方式。滚动/滑动所涉及的所有物理特性都将为您完成。你会有多少内容？如果它是数千个项目，那么原生将再次提供最佳性能。您还可以在后台线程上执行某些任务（例如，我的应用在上传图像之前进行了图像压缩和调整大小）。

否则 - 如果您只是想快速获得一些东西，请使用 phonegap。

**我作为一名开发人员发言，他从 Phonegap 开始，但出于性能原因选择了 Native。其他人可能有更好的经历。*

# android - 从服务器下载 MP3 并播放多次（循环）。多次下载？

> ID：12137827
> 
> 赞同：0
> 
> 时间：2012-08-27T07:29:43.797
> 
> 标签：android, actionscript-3, audio-streaming

我有一个简单的按钮，可以播放一个小的 MP3 文件，循环播放 30 次。MP3 从服务器 (urlMP3) 流式传输。

我可以在我的 Galaxy S2 上看到它为 30 个循环中的每一个循环访问服务器。是每次循环下载 MP3 还是下载一次并从手机内存中播放？

```
//Button 'audioYes' to play audio loop x 30
var soundLoop:Sound = new Sound();
var soundChannel:SoundChannel;
var soundLoopUrl:URLRequest = new URLRequest(urlMP3);

audioYes.addEventListener(MouseEvent.CLICK, f2_MouseClickHandler);

function f2_MouseClickHandler(event:MouseEvent):void {
    soundLoop.load(soundLoopUrl);
    soundLoop.play(0, 30);
} 
```

如果每次都在下载，那么下载一次然后播放的好方法是什么？谢谢你的帮助。

编辑：2012 年 9 月 1 日我创建了一个简单的 flash 文件，并添加了@Rytis 提供的以下内容。我从最后一行收到错误，this.mySound.play “错误 #1009：无法访问空对象引用的属性或方法。” 我该怎么办？

```
import flash.media.Sound;
import flash.net.URLLoader;
import flash.display.Loader;

var mySound:Sound = new Sound();
var myurlLoader:URLLoader = new URLLoader();

myurlLoader.addEventListener(Event.COMPLETE, this.onSoundLoadComplete)
myurlLoader.load(new URLRequest("01.mp3"))

function onSoundLoadComplete(event:Event):void{
this.mySound = URLLoader(event.target).data as Sound;
this.mySound.play(0,30);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:24:09.150

简短的回答 - 在播放之前下载声音并将其存储到变量中。

例子：

```
package {
    import flash.events.Event;
    import flash.media.Sound;
    import flash.net.URLLoader;
    import flash.net.URLRequest;

public class SoundLoadTest {

    protected var sound     : Sound;

    public function SoundLoadTest () {

        var urlLoader : URLLoader = new URLLoader();
        urlLoader.addEventListener( Event.COMPLETE, this.onSoundLoadComplete )
        urlLoader.load( new URLRequest( "path/to/sound.file" ) )

    }

    protected function onSoundLoadComplete ( event : Event) : void {

        // save loaded sound to a class field
        this.sound = URLLoader( event.target ).data as Sound;

        // start playing sound
        this.sound.play( 0, 30 );

    }

}

} 
```

# spring - 过滤器或侦听器不能使用弹簧豆吗？

> ID：12137828
> 
> 赞同：0
> 
> 时间：2012-08-27T07:29:52.400
> 
> 标签：spring, listener

我有一个`web.xml`像这样的监听器类：

```
<listener>
    <listener-class>com.datx.monitoring.model.MonitoringHttpSessionListener</listener-class>
</listener> 
```

对于这个类，我定义了一个`bean`这样的：

```
<bean id="monitoringHttpSessionListener"
    class="com.datx.monitoring.model.MonitoringHttpSessionListener" autowire="byName"/> 
```

但是这个`bean`是不能用其他`beans`的。每次调用此类时，它都有**空属性**。

这个类与另一个工作正常的类完全相同。唯一的区别是，这个类被用作 a`listener`而另一个不是。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:55:01.767

这有一个简单的原因：有两个 bean。一个由您的 Web 容器（使用`web.xml`）创建，另一个由 Spring（使用您的 bean 定义）创建。Web 容器和 Spring 对彼此一无所知。

您需要做的是创建一个普通的侦听器，它可以获取应用程序上下文

```
WebApplicationContextUtils.getWebApplicationContext(session.getServletContext()); 
```

这将允许您查找 bean。现在您可以定义过滤器可以修改的 bean。

注意：你会想要给这个 bean`request`范围，否则会有混乱。

# iphone - 这是 iOS 错误还是可以由开发人员修复？

> ID：12137830
> 
> 赞同：2
> 
> 时间：2012-08-27T07:30:04.393
> 
> 标签：iphone, ios, debugging, report, bug-tracking

我使用崩溃报告工具[Crashlytics](http://beta.crashlytics.com)有一段时间了，对此我感到非常满意。但是我无法弄清楚一些报告的错误是什么意思。

例如我得到`CoreFoundation`错误`_CFAutoreleasePoolPop`： ![Crashlytics 错误报告 1](../Images/599e2c4cb927e7ca02a0995ab1271ba4.png)

或另一个`UIKit`-> `__73-[UIPopoverController _completionBlockForDismissalWhenNotifyingDelegate:]`： ![Crashlytics 错误报告 2](../Images/4223b743c66b0f19b3c404ea79a6ab3b.png)

这种错误是iOS错误还是我的代码产生的错误？我可以在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T10:21:43.730

`UIAlertView`似乎是用实现的`UIPopovers`，因此`UIAlertViews`可能会导致这个问题。我怀疑在调用完成处理程序导致崩溃之前，`UIPopoverController`或`UIAlertView`委托已被释放。

如果您在其委托中保留对`UIAlertViews`and的 __weak 引用，`UIPopoverControllers`您可以在委托的 dealloc 调用中将警报/弹出框的委托属性设置为 nil，而无需保留`popover/alert`.

# python - 关于 Django 中的字段类型的问题

> ID：12137839
> 
> 赞同：1
> 
> 时间：2012-08-27T07:30:34.183
> 
> 标签：python, django

我是 Django 新手，我想在 Django 中制作用户注册表单。在创建模型时，我为密码字段提供了 fieldtype->PasswordField() 但是当我将此模型运行到终端时出现错误

```
password=models.PasswordField()
AttributeError: 'module' object has no attribute 'PasswordField' 
```

所以我想知道 Django 中的密码使用哪种字段类型。我已经参考了表单文档，但我什么也没找到。

所以请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:37:49.020

### 理论

1.  **使用 django.db.models.CharField**，因为这是密码字符串的 OK 数据库列类型

2.  **使用 django.forms.PasswordWidget**，在表单中表示此字段，请参阅[覆盖默认表单字段小部件](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)

### 例子

模型.py：

```
from django.db import models

class YourModel(models.Model):
    password = models.CharField(max_length=200) 
```

表格.py：

```
from django import forms

from models import YourModel

class YourModelForm(forms.ModelForm):
    class Meta:
        widgets = {'password': forms.PasswordField}
        model = YourModel 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T07:38:27.523

django中没有`PasswordField()`。您可以用来`CharField()`存储密码，但要将其显示为 html 表单中的密码输入类型，您可以为其指定一个小部件。

例子：

```
password = forms.CharField(widget=forms.PasswordInput()) 
```

更多参考：[密码输入](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#passwordinput)

# c++ - 为什么指针类型转换不适用于模板非类型参数

> ID：12137840
> 
> 赞同：13
> 
> 时间：2012-08-27T07:30:36.323
> 
> 标签：c++, templates, c++11

我有以下代码：

```
template <const char *p>
struct A{};

template <int i>
struct E{};

extern constexpr int i = 0;
constexpr float f = 0.f;
extern constexpr char c = 0;
int main(int argc, const char *argv[])
{
  A<&c> b; //works
  A<(const char *)(&i)> a; //Error: could not convert template argument ‘(const char*)(& i)’ to ‘const char*’
  E<(int)f> e; //works
  return 0;
} 
```

为什么线路`A<(const char *)(&i)> a;`错了？我用 g++-4.6.1 和 -std=c++0x 编译它。

编辑：正如查尔斯建议的那样，`reinterpret_cast`在常量表达式中是不允许的，我将上面的代码更改为以下内容：

```
struct Base{};
struct Derived : public Base {};

template <const Base *p>
struct A{};

extern constexpr Base base = {};
extern constexpr Derived derived = {};
A<&base> a; //works
A<(const Base*)&derived> b; //error: could not convert template argument ‘(const Base*)(& derived)’ to ‘const Base*’ 
```

因此，不仅`reinterpret_cast`是不允许的。使用`A<static_cast<const base*>(&derived)`会产生相同的错误。

致@BЈовић：

```
 A<(const Base*)(0)> b; // error: could not convert template argument ‘0u’ to ‘const Base*’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:39:13.957

至于“标准这么说”的答案，请看评论。

真正的问题是*为什么不允许这样做？*

在模板参数中断然拒绝类型转换很有意义，因为您真正感兴趣的是模板参数的值。**然而，类型转换可能会变得任意复杂，并且不会强制为`constexpr`s。标准（显然）根本不会对内置（原始）类型进行例外处理。**

请注意，您的`E<(int)f>`示例也被`clang`以下原因驳斥：

> 错误：“int”类型的非类型模板参数不是整数常量表达式

为什么 gcc 允许这样做是可疑的，但我认为它允许您使用`constexpr`可以显式声明的 s 。请注意，这*不可能*`i`在 的参数列表中偷偷摸摸 的地址`A`。

# jquery-validate - 在 javascript 中验证任何用户的 Foursquare URL

> ID：12137841
> 
> 赞同：0
> 
> 时间：2012-08-27T07:30:38.563
> 
> 标签：jquery-validate, foursquare

谁能告诉我如何在 javascript 函数中验证 Foursquare URL。

我们已经通过调用 ajax 调用 graph api 来验证 facebbok URL。四方有没有这样的api。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:17:54.863

```
function ajaxCallToValidateFoursquare(){
    var CLIENT_ID = "xxxxxxxxxxx";
    var CLIENT_SECRET = "xxxxxxxxxx";
    var foursquareUrl="https://foursquare.com/v/mh31-headquarters/4e4d100a52b1075a63924a4a"
    var validFoursquareUrl = "foursquare.com/";
    if($("#foursquareUrl").val()!=null && $("#foursquareUrl").val() != ""){
        if(foursquareUrl.indexOf(validFoursquareUrl) != -1){
            var placeName=foursquareUrl.substring(foursquareUrl.lastIndexOf("/")+1);
            var questionIndex = placeName.indexOf("?");
            if(questionIndex > 0)
                placeName = placeName.substring(0, questionIndex);
            $.getJSON('https://api.foursquare.com/v2/venues/'+placeName+'?client_id='+CLIENT_ID+'&client_secret='+CLIENT_SECRET+'&v='+new Date().format("yyyymmdd"),function(data){
                //get Response in JSON - data
            });

        }

    }
} 
```

> 这里的 clientid 和 secretkey 是您来自foursquare 的应用信息。Date.format 方法返回当前秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:22:32.447

没有用于验证foursquare URL 的foursquare API。

# java - 如何在使用 Indigo 的 m2eclipse 插件生成的 struts 2 空白原型中修复“addConfigurationProvider(Xml...) 未定义”错误？

> ID：12137846
> 
> 赞同：0
> 
> 时间：2012-08-27T07:31:07.103
> 
> 标签：java, struts2, maven-3, m2eclipse

我使用 maven 3、m2eclipse 插件为 eclipse Indigo 创建了一个空白的 struts 2 原型。我在项目生成后遇到了这个错误。

*未为 ConfigurationManager 类型定义方法 addConfigurationProvider(XmlConfigurationProvider)*

这是来自 ConfigTest.java

```
 protected void setUp() throws Exception {
        super.setUp();
        XmlConfigurationProvider c = new XmlConfigurationProvider("struts.xml");
        configurationManager.addConfigurationProvider(c);
        configurationManager.reload();
    } 
```

我该如何解决这个问题？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:34:26.337

该方法`addConfigurationProvider`被标记为已弃用并由`addContainerProvider`. 在 2.3.x 版本中，此方法已被删除。

那是 struts2-archetype-blank 的[错误](https://issues.apache.org/jira/browse/WW-3864)。我相信您需要更改以下设置

```
configurationManager.addConfigurationProvider(c); 
```

对此：

```
configurationManager.addContainerProvider( c ); 
```

我希望这个填充能解决你的问题

# jquery - dataTables 从 ajaxsource 读取列

> ID：12137847
> 
> 赞同：3
> 
> 时间：2012-08-27T07:31:21.667
> 
> 标签：jquery, datatables

[DataTables](http://datatables.net)可以从它的 ajaxSource 中读取列（名称）列表吗？

我的意思是我在我的`PHP`文件中定义列并将它们与数据一起传递，然后`dataTables`解析它们并创建表（动态完整）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T18:21:05.487

如果您的 ajaxSource 类似于：

```
 { 
            "aaData": [
             {
              a:"Trident",
              b:"Internet Explorer 4.0",
              c:"Win 95+",
              d:4,
              e:"X"
             } // [...]
           ],
           "aoColumns": [
            {
                "mData": "d",
                "sDefaultContent": 0
            },
            {
                "mData": "a",
                "sDefaultContent": "-"
            } //[...]
            ]} 
```

你可以这样做：

```
 $.getJSON('ajaxSource.php',function(json) {
                  json.bDestroy = true;
                  $('#example').dataTable(json);
         }); 
```

# c# - 在c#中重命名html文件的属性

> ID：12137853
> 
> 赞同：0
> 
> 时间：2012-08-27T07:31:47.587
> 
> 标签：c#, .net, html-parsing

我有一个`HTML`内部字符串变量，其中包含一些`<img>`标签。我想用属性替换`src`属性`data-realsrc`并放入`loading.gif`属性`src`。

例如，如果这是`<img>`标签之一：

```
<img src="Hello.jpg" /> 
```

我想将其更改为：

```
<img data-realsrc="Hello.jpg" src="loading.gif" /> 
```

它应该`<img>`应用于`HTML`.

请注意，**我想用 c# 在服务器端进行**。

怎么做？

最简单的方法是什么？最快的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:35:32.707

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(@"<img src=""Hello.jpg"" />");

foreach (var img in doc.DocumentNode.Descendants("img"))
{
    var realSource = img.Attributes["data-realsrc"];

    if (realSource != null)
        realSource.Value = img.Attributes["src"].Value;
    else
        img.Attributes.Add("data-realsrc", img.Attributes["src"].Value);

    img.Attributes["src"].Value = "loading.gif";
} 
```

# salesforce - 销售人员：我想知道销售人员中的包装类是什么，以及使用包装类和简单示例的场景。？

> ID：12137856
> 
> 赞同：-1
> 
> 时间：2012-08-27T07:32:07.587
> 
> 标签：salesforce, wrapper

我想知道 salesforce 中的包装类是什么，以及使用简单示例的包装类的场景。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:40:27.270

我会说在这里检查它和 RTFM：

[http://wiki.developerforce.com/page/Wrapper_Class](http://wiki.developerforce.com/page/Wrapper_Class)

> 包装器或容器类是类、数据结构或抽象数据类型，其实例是其他对象的集合。在 Apex 和 Visualforce 中，这种类型的类可能非常有用，但对于新开发人员来说，包装类的讨论可能会飞到你的头上，这对我来说确实如此。在这里，我将提供一个如何使用包装类的简单演示。

# iphone - 针对 Iphone 4 方向媒体查询

> ID：12137857
> 
> 赞同：0
> 
> 时间：2012-08-27T07:32:08.460
> 
> 标签：iphone, css, media-queries

如何使用媒体查询定位不同的 iphone4 方向？

我有当前的设置，但我不确定它是否有效。

```
@media only screen 
and (max-device-height: 640px)
and (max-device-width: 960px)
and (min-device-width: 480px)
and (min-device-height: 480px) 
```

和

```
@media only screen 
and (max-device-height: 960px)
and (max-device-width: 640px)
and (min-device-width: 480px)
and (min-device-height: 480px) 
```

如果我有 Iphone 要测试，我会自己解决这个问题，但我没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:11:02.893

试试这个不同的，

```
<meta name="viewport" content="minimum-scale=1.0, width=device-width, maximum-    scale=0.6667, user-scalable=no"> 
```

# python - Python：写入数据后 CSV 文件仍为空白

> ID：12137868
> 
> 赞同：1
> 
> 时间：2012-08-27T07:33:02.873
> 
> 标签：python

我有一个来自 mysql 的元组结果，如下所示：

```
sqlResult=({'Count': 1L, 'gname': 'Anron may'}, {'Count': 1L, 'gname': 'Anchy de'}, {'Count': 1L, 'gname': 'abby ras'}, {'Count': 2L, 'gname': 'Akki nome'}, {'Count': 41L, 'gname': 'Archenemy'}, {'Count': 1L, 'gname': 'Antony papa'}, {'Count': 1L, 'gname': 'Dead zombie'}) 
```

我正在尝试将这些数据保存到这样的 CSV 文件中

```
import time
csvName="Gnames-and-count-"+str(int(time.time()))
csvPath="/home/sean/Desktop/"+str(csvName)+str(".csv")
writer = csv.writer(open(csvPath, 'wt'))
for results in sqlResult:
    writer.writerow([results['gname'],int(results['Count'])]) 
```

该文件是在以下路径中创建的，但文件上没有任何内容。我有什么明显的遗漏吗？.请指导我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T07:48:40.790

您需要关闭该文件。让`with`你为你做。

```
with open(csvPath, 'w') as f:
    writer = csv.writer(f)
    for results in sqlResult:
        writer.writerow([results['gname'],int(results['Count'])]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:43:30.117

而不是直接写入 csv 文件写入标准输出并将结果保存在 file_name.csv

```
import csv
import sys
...
...

writer=csv.writer(sys.stdout)

... 
```

然后在 csv 中获取输出

你可以这样写命令：-

```
$ program_name > my_spreadsheet.csv 
```

希望它会帮助你...

# python - django sweetpie 中的嵌套资源

> ID：12137870
> 
> 赞同：5
> 
> 时间：2012-08-27T07:33:10.610
> 
> 标签：python, django, orm, tastypie

我有2个模型如下

商人

```
class MerchantProfile(StateModel):

    class Meta:
        verbose_name = "Merchant Profile"
        ordering = ('name',)

    def __unicode__(self):
        return u'%s' % (self.name,)

    user = models.OneToOneField(UserProfile, related_name="merchant_profile")
    payment_card = models.OneToOneField(PaymentCard, related_name="merchant_profile")
    current_state = models.IntegerField('State', choices=STATE_CHOICES)
    name = models.CharField('Merchant Name', max_length=64) 
```

类别

```
class Category(models.Model):
    merchant = models.ForeignKey(MerchantProfile, related_name="category")
    name = models.CharField(max_length=30)
    is_active=models.BooleanField() 
```

我有如下资源文件

子资源

```
class MerchantCategoryResource(ModelResource):
    api_key = fields.CharField(attribute='merchant__user__api_key', readonly=True)
    class Meta:
        #get username from headers and apply filter query
        queryset = Category.objects.all()
        resource_name = 'merchantcategory'
        #excludes = ['id','email', 'password', 'is_active', 'is_staff', 'is_superuser']
        detail_allowed_methods = ['get']
        default_format = "application/json"
        filtering = {
            'user_id': ALL,
            'api_key':ALL
        } 
```

父资源

```
class MerchantAllResource(ModelResource):
    category = fields.ToManyField(MerchantCategoryResource,'category')

    class Meta:
        #get username from headers and apply filter query
        queryset = MerchantProfile.objects.all()
        resource_name = 'merchantinfo'
        #excludes = ['id','email', 'password', 'is_active', 'is_staff', 'is_superuser']
        detail_allowed_methods = ['get']
        default_format = "application/json"
        filtering = {
            'user_id': ALL,
            'api_key':ALL
        } 
```

输出是

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, "objects": [{"category": ["/api/ecp/merchantcategory/1/"], "create_time": "2012-08-17T12:56:55", "current_state": 1, "id": 1, "modified_time": "2012-08-17T12:56:55", "name": "ram", "resource_uri": "/api/ecp/merchantinfo/1/", "utcStateCreated": null, "utcStateDisabled": null, "utcStateEnabled": null, "utcStateUnsubscribed": null}] 
```

我需要它如下

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, "objects": [{"category": ["id": 1, "is_active": true, "name": "test1", "resource_uri": "/api/ecp/merchantcategory/1/"], "create_time": "2012-08-17T12:56:55", "current_state": 1, "id": 1, "modified_time": "2012-08-17T12:56:55", "name": "ram", "resource_uri": "/api/ecp/merchantinfo/1/", "utcStateCreated": null, "utcStateDisabled": null, "utcStateEnabled": null, "utcStateUnsubscribed": null}] 
```

底线是“我想用单个rest api调用所有相关对象，而不是调用需要多个请求的单独rest api”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:03:28.423

您必须`full = True`在类别字段声明中指定关键字 arg：http: [//django-tastypie.readthedocs.org/en/latest/fields.html#id1](http://django-tastypie.readthedocs.org/en/latest/fields.html#id1)

# eclipse - EXEC 超时不适用于 matlab 应用程序

> ID：12137872
> 
> 赞同：2
> 
> 时间：2012-08-27T07:33:24.980
> 
> 标签：eclipse, ant, rtc

我已经使用`EXEC`任务在`build.xml`文件中打开 matlab。我在`EXEC`任务中添加了超时，以便在一段时间后终止任务。但问题是，matlab 是开放的，模型也在 matlab 中构建，但超时后 exec 任务不会终止。

```
<property name="BuildEngine.calc.matlabApp" value="C:\MATLAB\R2010bSP2\bin\matlab.exe"/>
<property name="modelProjectDirectory" value="${basedir}\..\${Config.ModelProject}"/>

<exec executable="${BuildEngine.calc.matlabApp}" dir="${modelProjectDirectory}" timeout="60000">
    <arg value="-r"/>
    <arg value="OutputResolvedParameters"/>
</exec> 
```

1 分钟后`EXEC`任务未终止且 matlab 仍在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:56:00.413

有一件事是肯定的：您还不能在 RTC 构建上设置超时：[增强 106064](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=106064)（您需要一个爵士帐户才能看到它）是“分类的”。

关于[ant exec task](http://ant.apache.org/manual/Tasks/exec.html)，尝试添加一个`spawn=true`属性：

> 如果您将 Ant 作为后台进程（如`ant &`）运行并使用设置为的`<exec>`任务，则必须为分叉进程提供显式输入，否则 Ant 将被挂起，因为它试图从标准输入中读取。`spawn``false`

# javascript - 我们如何在 Jquery UI 选项卡中阻止 div 标签为空

> ID：12137873
> 
> 赞同：0
> 
> 时间：2012-08-27T07:33:27.070
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

我正在关注这个例子

[http://jqueryui.com/demos/tabs/#ajax](http://jqueryui.com/demos/tabs/#ajax)

如果您转到他们的示例并单击 Tab1 和 Tab2 ，那么文本会立即消失，并且 div 框会变小，然后会加载新数据。

有没有什么办法

1.  只有当新数据存在时，旧数据才会被替换。或者他们应该毫不拖延地淡入淡出

2.  Div 框不应缩小，高度应保持不变或最小高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:08:57.117

对于第一个问题：如果发生 ajax 错误，您可以选择另一个选项卡。不幸的是，我无法保存“最后成功加载的选项卡”。但是如果“默认选项卡”就足够了： [你可以看这里](http://jsfiddle.net/L95UP/7/)

对于你的第二个问题：标签有一个 class `ui-tabs-panel`。您可以根据需要设置样式。见[这里](http://jsfiddle.net/L95UP/5/)。

# iphone - 在 MKPolyline 上获取中间点

> ID：12137876
> 
> 赞同：1
> 
> 时间：2012-08-27T07:33:44.190
> 
> 标签：iphone, objective-c, ios, mkmapview

我在 a`MKPolyline`上有两个点（一个起点和一个终点）`MKMapView`。有什么方法可以让一些中间点（或坐标）与线一起获得，或者将线分成许多段？

我想要这样的东西：[http://i.imgur.com/qcbS9.png](http://i.imgur.com/qcbS9.png)，其中黑色端点是线的起点和终点，红色点是我想要得到的点。抱歉画的不好，但我是用在线绘图工具制作的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:22:29.007

在地理上，您插入的线是否很短？如果是这样，您可以沿线线性缩放。如果您想要 10 段，则计算起点和终点的纬度值之间的差异，以及经度的差异。在您现有的起点之后，下一个点将是 (lat + 0.1*latDif, lng + 0.1*lngDif)，然后是 (lat + 0.2*latDif, lng + 0.2*lngDif)。只要您准备好假设坐标存在于统一的网格中，所有这些都非常简单，但实际上并非如此，但如果您在城市规模的地图上使用它可能会很好。

# java - java.sql.SQLException：当全局事务处于活动状态时，无法调用方法“回滚”

> ID：12137877
> 
> 赞同：0
> 
> 时间：2012-08-27T07:33:46.777
> 
> 标签：java, oracle, transactions

我想用java调用一个oracle存储过程来返回OracleResultSet，存储过程有执行删除、插入和选择操作（涉及两个表）。我将 auto commit 设置为 false，并且在执行 commit() 时会出现 Title 之类的错误。如下代码：

```
 conn.setAutoCommit(false);
        resultSet = getResultByInvokeSP(conn);
        conn.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:48:26.993

删除对 setAutoCommit() 和 commit() 的调用。该错误表明您有另一个框架正在为您处理事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:37:35.997

```
after commit use
conn.setAutoCommit(true); 
```

# asp.net - 如何使 Web 用户控件公开

> ID：12137881
> 
> 赞同：0
> 
> 时间：2012-08-27T07:34:04.407
> 
> 标签：asp.net

我的页面包含几个 Web 用户控件。这些控件包含其他子控件，并且那些包含更多子控件等等。从我的页面，我希望能够访问这些控件，就像我对其他公共类所做的那样：`uc1.uc1_child1.uc1_child1_child1.Update();`

（我确实知道 FindControl 方法，这就是我目前使用的方法。但是它不是类型安全的，我需要一直查找控件的名称以确保安全。比智能感知更耗时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:37:24.810

如果您在用户控件上为它包含的每个用户控件创建一个公共属性，那应该可以工作。

例如

```
 public SpecificUserControlType ContainedUserControl
 {
      get
      {
          return this.uc1_child;
      } 
 } 
```

# iphone - 体系结构 i386 的未定义符号，ld：未找到体系结构 i386 的符号

> ID：12137882
> 
> 赞同：4
> 
> 时间：2012-08-27T07:34:06.527
> 
> 标签：iphone, opengl-es

我想我又遇到了障碍，这是交易：

```
Undefined symbols for architecture i386:
  "CreateRenderer1()", referenced from:
      -[GLView initWithFrame:] in GLView.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当您提出问题时，我已经尝试了几乎所有自动搜索中显示的建议：

将这些库添加到“Build Phases”下的“Link Binary With Libraries”选项卡中：

```
OpenGLES.framework
QuartzCore.framework 
```

将所有相关文件添加到目标/编译源

将所有扩展名为 .m 的相关文件重命名为 .mm

我正在尝试在 Xcode 4.3.2 上的 iPhone 5.1 模拟器上编译它，有什么明显我遗漏的东西吗？我觉得这是设置中的东西，但我尝试过的任何东西似乎都不起作用=（

编辑：

GLView.h：

```
#import "IRenderingEngine.hpp"
#import <OpenGLES/EAGL.h>
#import <QuartzCore/QuartzCore.h>

@interface GLView : UIView {
    EAGLContext* m_context;
    IRenderingEngine* m_renderingEngine;
    float m_timestamp;
}

- (void) drawView: (CADisplayLink*) displayLink;
- (void) didRotate: (NSNotification*) notification;

@end 
```

GLView.mm：

```
#import <OpenGLES/EAGLDrawable.h>   
#import "GLView.h"
#import "mach/mach_time.h"
#import <OpenGLES/ES2/gl.h> // <-- for GL_RENDERBUFFER only

@implementation GLView

+ (Class) layerClass
{
    return [CAEAGLLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame]) {
        CAEAGLLayer* eaglLayer = (CAEAGLLayer*) super.layer;
        eaglLayer.opaque = YES;
        m_context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];

        if (!m_context || ![EAGLContext setCurrentContext:m_context]) {
            [self release];
            return nil;
        }

        m_renderingEngine = CreateRenderer1();

        [m_context
         renderbufferStorage:GL_RENDERBUFFER
         fromDrawable: eaglLayer];

        m_renderingEngine->Initialize(CGRectGetWidth(frame), CGRectGetHeight(frame));

        [self drawView: nil];
        m_timestamp = CACurrentMediaTime();

        CADisplayLink* displayLink;
        displayLink = [CADisplayLink displayLinkWithTarget:self
                                                  selector:@selector(drawView:)];

        [displayLink addToRunLoop:[NSRunLoop currentRunLoop]
                          forMode:NSDefaultRunLoopMode];

        [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

        [[NSNotificationCenter defaultCenter]
         addObserver:self
         selector:@selector(didRotate:)
         name:UIDeviceOrientationDidChangeNotification
         object:nil];
    }
    return self;
}

- (void) didRotate: (NSNotification*) notification
{
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    m_renderingEngine->OnRotate((DeviceOrientation) orientation);
    [self drawView: nil];
}

- (void) drawView: (CADisplayLink*) displayLink
{
    if (displayLink != nil) {
        float elapsedSeconds = displayLink.timestamp - m_timestamp;
        m_timestamp = displayLink.timestamp;
        m_renderingEngine->UpdateAnimation(elapsedSeconds);
    }

    m_renderingEngine->Render();
    [m_context presentRenderbuffer:GL_RENDERBUFFER];
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

IRenderingEngine.hpp

```
enum DeviceOrientation {
    DeviceOrientationUnknown,
    DeviceOrientationPortrait,
    DeviceOrientationPortraitUpsideDown,
    DeviceOrientationLandscapeLeft,
    DeviceOrientationLandscapeRight,
    DeviceOrientationFaceUp,
    DeviceOrientationFaceDown,
};

// Creates an instance of the renderer and sets up various OpenGL state.
struct IRenderingEngine* CreateRenderer1();

// Interface to the OpenGL ES renderer; consumed by GLView.
struct IRenderingEngine {
    virtual void Initialize(int width, int height) = 0;    
    virtual void Render() const = 0;
    virtual void UpdateAnimation(float timeStep) = 0;
    virtual void OnRotate(DeviceOrientation newOrientation) = 0;
    virtual ~IRenderingEngine() {}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:54:52.317

编译器找不到您的 IRenderingEngine 实现。缺少实现或文件未正确添加到目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:29:18.877

虽然我修复了它，但我从来没有真正理解文件是如何“删除”自己的，今天，我找到了答案：

如果您手动重命名 Finder 中的任何子文件夹，XCode 仍将指向旧路径路径，该路径现在无效。

为了解决这个问题，我右键单击无效的组文件夹，然后在右侧检查的文件中，单击一个不起眼的小框，让我再次手动设置路径！

# perl - Perl - 返回一个哈希数组

> ID：12137884
> 
> 赞同：1
> 
> 时间：2012-08-27T07:34:09.340
> 
> 标签：perl

我有一个要返回的哈希数组。

在返回数组之前，我交叉检查了它。它工作正常。

但是在将哈希数组返回给调用子之后，我无法读取它。

请找到以下代码以供参考..并让我知道如何读取/返回哈希数组

谢谢... ：）

```
#!/usr/bin/perl
use strict;
use warnings;

# Subroutine prototypes
sub get_two_arrays();

my @one=();
@one = get_array_Hashes();
print "\n First: @one->{Version}\n";  // Printing the return array of hashes

sub get_array_Hashes() {

my @dotNetHashArray =();

    my $dotNetHash1 = {Version => "Test-1 Version", SP => "installedSp", Build => "installedBuild"};                                
    push @dotNetHashArray, $dotNetHash1;

    my $dotNetHash2 = {Version => "Test-2 Version", SP => "installedSp", Build => "installedBuild"};                                
    push @dotNetHashArray, $dotNetHash2;

    my $dotNetHash3 = {Version => "Test-3 Version", SP => "installedSp", Build => "installedBuild"};                                
    push @dotNetHashArray, $dotNetHash3;

    print "Test Array of hashes before return";
    for(my $i=0; $i<@dotNetHashArray; $i++)
    {
        print("\n Hash Value : ".$dotNetHashArray[$i]->{Version});
    }

    return \@dotNetHashArray
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:18:01.357

Perl 不是 C，原型是为一些非常不同和特殊的东西而设计的。如果你不知道它们的用途是什么，那就*永远不要*使用它们

同样，没有理由在调用子程序之前预先声明它。只要你*不*使用原型 Perl 就会做正确的事

如果您希望它们为空，则在声明它们时也没有理由初始化数组。这就是 Perl 默认所做的

熟悉 Perl 的人会感谢您为变量和子例程使用小写和下划线标识符。驼峰大小写通常是为包名保留的

正如其他人所说，您正在返回对数组的*引用。*但是，与其取消引用返回值，不如将其保留为引用并照此使用它可能会更好。唯一需要的更改是遍历返回的数组

这是您程序的更规范形式，希望对您有所帮助

```
use strict;
use warnings;

my $one = get_array_Hashes();
print "\nArray of hashes after return\n";
print "First: $_->{Version}\n" for @$one;

sub get_array_Hashes {

    my @dotnet_hash_array;

    my $dotnet_hash1 = {
        Version => "Test-1 Version",
        SP => "installedSp",
        Build => "installedBuild"
    };                                
    push @dotnet_hash_array, $dotnet_hash1;

    my $dotnet_hash2 = {
        Version => "Test-2 Version",
        SP => "installedSp",
        Build => "installedBuild"
    };                                
    push @dotnet_hash_array, $dotnet_hash2;

    my $dotnet_hash3 = {
        Version => "Test-3 Version",
        SP => "installedSp",
        Build => "installedBuild"
    };                                
    push @dotnet_hash_array, $dotnet_hash3;

    print "Test Array of hashes before return\n";
    for my $i (0 .. $#dotnet_hash_array) {
        print "Hash Value : $dotnet_hash_array[$i]->{Version}\n";
    }

    return \@dotnet_hash_array
} 
```

**输出**

```
Test Array of hashes before return
Hash Value : Test-1 Version
Hash Value : Test-2 Version
Hash Value : Test-3 Version

Array of hashes after return
First: Test-1 Version
First: Test-2 Version
First: Test-3 Version 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:43:08.320

您正在返回对数组的引用：

```
return \@dotNetHashArray 
```

你必须

```
@one = @{ get_array_Hashes() }; 
```

取消引用它。

此外

*   `//`评论不起作用（使用`#`）

*   通常你不需要在 Perl 中使用原型（参见[为什么 Perl 5 的函数原型不好？](https://stackoverflow.com/questions/297034/why-are-perl-5s-function-prototypes-bad)）

*   返回后您还需要一个循环来打印出值

*   您不需要游标变量来遍历 Perl 中的数组

    ```
    for my $item (@dotNetHashArray) {
        print "\n Hash Value: $item->{Version}";
    } 
    ```

*   如果您需要`\n`在打印的开头有 a ，那么您`\n`在循环之后缺少 a

你最终会得到：

```
#!/usr/bin/perl 

use strict; 
use warnings; 

# do not use function prototypes 
# perl subroutines are usually all lowercase (no camel-case) 
sub get_array_hashes { 

    my @dot_net_hash_array = (); 

    # actually you don't need to create a local variable for each item you push 

    push @dot_net_hash_array, { 

# avoid unncessary string interpolation (use ' if no variables in the string have to be interpolated) 
        version => 'Test-1 Version', 
        sp      => 'installedSp', 
        build   => 'installedBuild' 
    }; 

    push @dot_net_hash_array, 
      { 
        version => 'Test-2 Version', 
        sp      => 'installedSp', 
        build   => 'installedBuild' 
      }; 

    push @dot_net_hash_array, 
      { 
        version => 'Test-3 Version', 
        sp      => 'installedSp', 
        build   => 'installedBuild' 
      }; 

    print "Test Array of hashes before return\n"; 
    for my $item (@dot_net_hash_array) { 
        print "Hash Value :  $item->{version}\n"; 
    } 

    return \@dot_net_hash_array; 
} 

my @one = @{ get_array_hashes() }; 

# Use # for comments 

#  Printing the return array of hashes 
print "Test Array of hashes after return\n"; 
for my $item (@one) { 
    print "Hash Value :  $item->{version}\n"; 
} 
```

# url - 将 URL 参数传输到 facebook 页面

> ID：12137890
> 
> 赞同：0
> 
> 时间：2012-08-27T07:34:25.167
> 
> 标签：url, parameters, facebook-page

是否可以将 URL 参数传输到我的 Facebook 页面（应用程序）？

它应该看起来像这样

[https://www.facebook.com/mypage/app_777777777?mySID](https://www.facebook.com/mypage/app_777777777?mySID)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:17:11.297

对于画布/页面选项卡应用程序执行此操作的唯一方法是`app_data`参数，其内容将在初始加载时作为`signed_request`.

请参阅[https://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

# iphone - 在 SQLite 中检查用户名和密码是否匹配

> ID：12137891
> 
> 赞同：-1
> 
> 时间：2012-08-27T07:34:44.437
> 
> 标签：iphone, objective-c, ios

如何检查用户名和密码是否与数据库中的用户名和密码相同。

AppDelegate.m:

```
-(void) readLoginFromDatabase {
// Setup the database object
sqlite3 *database;

// Init the Array
lo = [[NSMutableArray alloc] init];

// Open the database from the users filessytem
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
    // Setup the SQL Statement and compile it for faster access
    const char *sqlStatement = "Select * from Login";
    sqlite3_stmt *compiledStatement;
    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
        // Loop through the results and add them to the feeds array
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
            // Read the data from the result row
            NSString *aLoginName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
            NSString *aLoginPass = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];
            NSString *aLoginAccess = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];

            // Create a new object with the data from the database
            Login *los = [[Login alloc] initWithName:aLoginName pass:aLoginPass access:aLoginAccess];

            // Add the object to the Array
            [lo addObject:los];
        }
    }
    // Release the compiled statement from memory
    sqlite3_finalize(compiledStatement);

}
sqlite3_close(database);
} 
```

视图控制器.m：

```
-(IBAction)buttonWasClicked:(id)sender
{
if ((userText.text != logins.loginUser) && (passText.text != logins.loginPass))
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[[NSString alloc] initWithFormat:@"Your Username/Password is incorrect!"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [alert show]; 
}
else
{
     StudentViewController *studentView = [self.storyboard instantiateViewControllerWithIdentifier:@"studentView"];
    [studentView setModalTransitionStyle:UIModalTransitionStyleCrossDissolve]; 

    [self presentViewController:studentView animated:YES completion:nil];
}   

if (userText.text != logins.loginUser)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[[NSString alloc] initWithFormat:@"Your Username is incorrect!"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [alert show];
}

if (passText.text != logins.loginPass)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[[NSString alloc] initWithFormat:@"Your Password is incorrect!"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [alert show];
} 
} 
```

即使我输入的用户名和密码与数据库中的完全相同，它仍然会向我显示错误消息，而不是显示下一个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:38:08.587

你必须在objective-c中检查NSStrings

```
isEqualToString 
```

对于您的示例：

```
if (![userText.text isEqualToString:logins.loginUser]) 
```

Check: [https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/isEqualToString](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/isEqualToString):

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:43:20.583

您可以使用 isEqualToString 方法检查两个字符串是否相等......

```
if ([userText.text isEqualToString:logins.loginUser]) 
```

并应用这样的条件

```
-(IBAction)buttonWasClicked:(id)sender
{
    Login *logins = nil;
    logins= [lo objectAtIndexPath:0];

    if ([userText.text  isEqualToString:logins.loginUser] && [passText.text isEqualToString:logins.loginPass])
    {
        StudentViewController *studentView = [self.storyboard instantiateViewControllerWithIdentifier:@"studentView"];
        [studentView setModalTransitionStyle:UIModalTransitionStyleCrossDissolve]; 

        [self presentViewController:studentView animated:YES completion:nil];
    }
    else if (![userText.text  isEqualToString:logins.loginUser])
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[[NSString alloc] initWithFormat:@"Your Username is incorrect!"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [alert show];
    }
    else if (![passText.text  isEqualToString:logins.loginPass])
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[[NSString alloc] initWithFormat:@"Your Password is incorrect!"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [alert show];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[[NSString alloc] initWithFormat:@"Your Username/Password is incorrect!"] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [alert show]; 
    }
} 
```

# java - 一个 Android 应用程序中的多个应用程序文件

> ID：12137892
> 
> 赞同：3
> 
> 时间：2012-08-27T07:34:46.710
> 
> 标签：java, android-manifest, android

我制作了三个应用程序，现在我想将它们放在一个 apk 文件中（一次安装）。在启动“包装应用程序”时，用户应决定运行哪个应用程序。

到目前为止，一切都很好，但问题是，每个应用程序都使用应用程序文件中的全局常量。有没有办法将三个应用程序合二为一，每个应用程序都使用自己的应用程序文件？

谢谢！

为避免混淆，我添加了一个简短的示例：

应用 1：

```
public class AApplication extends Application {
    public static String CONSTANT_1 = "aaa";
} 
```

应用 2：

```
public class BApplication extends Application {
public static String CONSTANT_1 = "bbb";
} 
```

应用程序 3：

```
public class CApplication extends Application {
    public static String CONSTANT_1 = "ccc";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:54:16.787

好的，由于我的想法显然无法实现，我想出了以下解决方法：

1.  我在新项目中创建了一个应用类

    ```
    public class NewApplication extends OldSuperApplication {} 
    ```

2.  我添加了一个方法

    ```
    public static void setApplication(RGCApplication a) {
        CONSTANT_1 = a.CONSTANT_1;
        ...
    } 
    ```

3.  在这种情况下应用程序“A”在开始屏幕上选择所需的“子应用程序”后，我调用

    ```
    NewApplication.setApplication(new AApplication()); 
    ```

    或者

    ```
    NewApplication.setApplication(new BApplication()); 
    ```

我不确定这是否是臭代码，但它有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:02:17.750

可能您想要三个可以启动的活动。在清单中添加如下内容：

```
<activity
        android:name=".Activityone"
        android:label="First Activity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity>

<activity
        android:name=".Activitysecond"
        android:label="Second Activity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity>

<activity
        android:name=".Activitythree"
        android:label="Third Activity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

通过这种方式，用户可以点击**三个**图标（活动）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:14:41.077

您不能集成 3 个不同的 apk 及其各自的代码库以通过单个 apk 运行，或者将所有 3 个代码库集成到单个应用程序中，并将所有 3 个作为不同的模块划分为不同的模块来运行，具体取决于用户的选择。

# javascript - IFrame 内 jsp 的 onload 将 iframe 设置为整个页面/浏览器

> ID：12137894
> 
> 赞同：0
> 
> 时间：2012-08-27T07:34:53.920
> 
> 标签：javascript

我在 DIV 中有一个 IFrame，其 SRC 属性由 JS 函数动态设置。因此，如果 src="file.jsp"，则一个 onload 函数（在 file.jsp 的主体内部）包含对 file.jsp 中某些样式的调整，一旦触发了该函数，它就会将 IFrame 悬停在整个网页上通过加载。即，iframe 遍布整个网页。请让我知道在 onload 函数之后需要做些什么来保留 IFrame 位置。

我的onload函数中的代码如图

```
function load() {
    var url = window.location.href;
    if (url.indexOf('iip') > -1) {
        document.getElementById('peLibraryTreeDiv').style.width = "596px";
        parent.document.getElementById('privateEquityDiv').style.width =
                "96.9%";
        parent.document.getElementById('privateEquityDiv').style.top =
                "77px";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:47:28.527

这是一个完全有效且有效的示例

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script>
        function changeIframe(newLocation){
            document.getElementById("myIframe").src=newLocation;
        }
        </script>
    </head>
    <body onload="changeIframe('http://www.example.com')">
        <div style="width:650px;float:auto;border:1px dotted #cccccc;">
            <iframe id="myIframe" src="http://www.ebay.co.uk/" width="100%" height=750px marginwidth=0 marginheight=0 hspace=0 vspace=0 frameborder=1 scrolling=auto>
              <p>Your browser does not support iframes.</p>
            </iframe>
        </div>
    </body>
</html> 
```

请注意，某些网站不能作为 src 添加到像[http://www.google.com](http://www.google.com)这样的 iframe 中（不知道为什么，我在 SO here [can't add google.com as src to an IFrame](https://stackoverflow.com/questions/12141436/cant-add-google-com-as-src-to-an-iframe)上提出了问题）

# objective-c - 为什么仅在模拟器中而不在真实设备上播放 Objective-C AVFoundation Video Player 的 MP4 文件格式？

> ID：12137896
> 
> 赞同：0
> 
> 时间：2012-08-27T07:35:07.490
> 
> 标签：objective-c, video, avfoundation, mp4, mov

我需要用 AVFoundation 构建我自己的视频播放器，并且已经走了很长一段路。但播放器仅在模拟器中播放 .mp4 文件。如果我在设备上运行应用程序，则不会显示视频。但如果我使用 .mov 文件，一切正常。此外，当我在 MPMoviePLayer 中播放视频文件时，该文件会显示出来并且播放良好。

.mp4 文件使用

AVC 编码，2.048 x 1.536 AAC，48000 Hz，立体声 (LR)

音轨是空的。

有人知道为什么吗？[这是一些示例代码。](https://dl.dropbox.com/u/2896178/AVFoundationVideoPLayer.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:10:05.947

因为您`introCycle_sml.mp4`是 2048x1536 像素，数据速率为 3.71 Mbits/s，而 iOS 支持高达 2.5 Mbps、640 x 480 像素的 MPEG-4 视频。

# c# - C# 类声明以使用多种数据类型

> ID：12137898
> 
> 赞同：-4
> 
> 时间：2012-08-27T07:35:19.413
> 
> 标签：c#

我已经在公共类下面声明了，这样我就可以在我的例程中返回多种数据类型：

```
public class dataformat
{
    public int nFlag;
    public String strCommand;
    public String strData;
} 
```

下面是我想将整数 nFlag 返回给 b 时使用的编码：

```
 public dataformat TxRxProtocol()
    {
        int a;
        dataformat df = new dataformat();

        // coding
        // coding
        // coding
        if (a==0) df.nFlag = 1;
        if (a==1) df.nFlag = 2;

        return df;
     } 
```

我努力了：

```
 dataformat b = TxRxProtocol();
  if (b==0) // a condition
  else if (b==1) // a condition 
```

但得到错误说明 b 不是整数。

我们如何在 TxRxProtocol() 例程中编写，以便它可以返回多种类型的值（包括字符串类型）而不仅仅是 nFlag 整数类型？是我们必须在其中添加 df.strCommand = "Something" 或 df.strData = "Something" 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:42:38.677

您可以使用隐式转换运算符：

```
class TxRxProtocol 
{
  public static implicit operator int(TxRxProtocol t)
  {
    return t.nFlag;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:37:40.427

尝试这个：

```
 int b = 0;
 dataformat ret = TxRxProtocol();
 b = ret.nFlag; 
```

编译器是对的。它告诉您您正在尝试将数据格式（返回的数据）分配给变量 b（在 int 中）

您还可以制作 ba 数据格式类型，将上述内容简化为：

```
dataformat b = TxRxProtocol(); 
```

当然，“b”的使用取决于你在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:38:40.660

他们的类型不兼容，当然不行……你的意思是：

```
 dataformat b = TxRxProtocol(); 
```

PS：您应该将类​​型名称大写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:38:40.927

变量`b`必须是 的类型`dataformat`，所以这里有一个示例：

```
 dataformat b = TxRxProtocol(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T07:40:14.497

它应该是 b = TxRxProtocol().nFalg;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-19T17:32:54.553

而不是这个

```
dataformat b = TxRxProtocol();
if (b==0) // a condition
else if (b==1) // a condition 
```

试试下面

```
dataformat b = TxRxProtocol();
if (b.nflag==0) // a condition
else if (b.nflag==1) // a condition 
```

# entity-framework - 如何使实体框架属性不为空，但在表单提交中不需要

> ID：12137902
> 
> 赞同：1
> 
> 时间：2012-08-27T07:35:35.530
> 
> 标签：entity-framework, entity-framework-4.1, foreign-keys

我正在使用带有代码优先模型的 Entity Framework 4.1。一个常见的模式是许多对象引用拥有它们的用户，例如。

```
public class Item
{
    public User Owner { get; set; }
} 
```

这会在数据库中创建一个可为空的列，但由于每个项目都必须有一个所有者，我希望该列标记为 NOT NULL。如果我使用该`[Required]`属性，则提交表单以创建项目会导致错误。该字段永远不会通过表单设置，只能在代码中手动设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:43:37.877

通常建议为这种情况创建单独的视图模型。使用数据库模型作为输入表单的视图模型被视为一种反模式。

制作一个`ItemViewModel`具有`Item`与相关数据验证属性相同的属性。您可能希望使用一个名为[Automapper](https://github.com/AutoMapper/AutoMapper#readme)的库来自动化这些情况下所需的无聊的属性复制代码。

# android - 如何从保存在 sdcard 中的字符串数组中的文本文件中填充数据？

> ID：12137905
> 
> 赞同：0
> 
> 时间：2012-08-27T07:35:58.073
> 
> 标签：android, android-sdcard

我有一个存储在 sdcard 中的文本文件。我想将数据从 sdcard 中的文本文件复制到一个字符串数组中。我想将数据存储在字符串数组中，然后在我的 autocompletetextview 中使用该数据。我的代码是：

```
package com.example.pro2;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button b1=(Button)findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                ReadSettings();

            }
        });
    }
    public void ReadSettings(){

        try{             
            File sdcard = Environment.getExternalStorageDirectory();
            File file = new File(sdcard,"comm.txt");        
               FileInputStream fileIS = new FileInputStream(file);          
               BufferedReader buf = new BufferedReader(new InputStreamReader(fileIS));           
               String readString = new String();                

               String val[] = null;
               for(int i=0;i<5;i++)
               {
               while ((readString = buf.readLine()) != null) {
                   Log.d("line: ", readString);   
                   val[i] = readString;
                   Log.d("values", val[i]);
                   // u better use an ArrayList or you have to check if i < val.size
               }
               }

            } catch (FileNotFoundException e) {          
               e.printStackTrace();          
            } catch (IOException e){             
               e.printStackTrace();          
        }    
    } 
    } 
```

但它显示力量关闭。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:44:19.523

不可能是答案，请在此处更改：

```
ArrayList<String> val = new ArrayList();
               int i=0;

               while ((readString = buf.readLine()) != null) {
                   Log.d("line: ", readString);   
                   val.add(readString);
                   Log.d("values", val.get(i).toString());
　　　　　　　　　　　i++;
                   // u better use an ArrayList or you have to check if i < val.size 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:43:58.600

试试这个-->

```
 val[i++] = readString; 
```

而不是 val[i] = readString;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:48:52.320

字符串数组不可调整大小，因此请使用字符串缓冲区或 Arraylist，然后将其转换为数组......

您必须预先知道数据的大小，以便您可以用它初始化字符串数组，即

```
//ArrayList<String>  mArrayList  = new ArrayList<String>();
String abc[] = new String[file size ]; 
```

或使用 ArrayList

```
 mArrayList.add(readString);
    int size =mArrayList.size();
    Object[] m= mArrayList.toArray(); 
```

m 包含您的字符串数组，使用 toString 根据需要一一获取它们

# azure - 当我删除虚拟机的端点时，访问公共 ip 失败

> ID：12137906
> 
> 赞同：1
> 
> 时间：2012-08-27T07:36:06.433
> 
> 标签：azure, azure-virtual-machine

这是一个 Windows azure 问题：我有 2 个负载平衡虚拟机并在它们上运行我的软件，当一台机器的服务关闭时，我尝试删除其公共端点以使我的软件可以被访问，这样我就有时间修复坏的一个。现在我删除了，几分钟就不能访问公网IP了，好像有删除端点的重启时间？那么谁能告诉我为什么？如果有3台负载均衡机，我删除一台会更好？

（对不起英语不好，希望你能理解我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:00:50.157

您不应该删除端点。对于虚拟机，负载平衡端点上的流量通过该端点上的一组虚拟机发送。如果要从流量中删除其中一个实例，则需要设置自定义运行状况探测。除了一般故障（例如您的虚拟机重新启动或其硬件出现问题）之外，Windows Azure 不会知道您的个人虚拟机是否健康。使用自定义探测处理程序，虚拟机在健康时仅返回 200，而在要从负载平衡器中删除时返回非 200（直到再次检查）。

有关负载平衡端点的自定义探测的详细信息，请参阅[此 MSDN 参考文章](http://msdn.microsoft.com/en-us/library/windowsazure/jj151530.aspx)。另外：Michael Washam 写了一篇[文章](http://michaelwasham.com/2012/06/08/understanding-windows-azure-virtual-machines/)，很好地概述了虚拟机（包括自定义探针）。请参阅他的[附加帖子](http://michaelwasham.com/2012/06/08/automating-windows-azure-virtual-machines-with-powershell/)，了解如何通过 PowerShell 配置自定义探针。

# visual-studio - 通过包管理器控制台运行清理、构建和重建

> ID：12137908
> 
> 赞同：9
> 
> 时间：2012-08-27T07:36:08.803
> 
> 标签：visual-studio, powershell, nuget

我想通过 Visual Studio 中的包管理器控制台运行 Clean、Build 和 Rebuild 命令，但到目前为止我还没有找到方法。

以下命令让我获得了解决方案中的第一个项目：

```
$project = Get-Project | select -First 1 
```

当我运行时，我可以看到item`$project | Get-Member`的成员。`$project`

```
#Members of the $project ($project | Get-Member)

#   TypeName: System.__ComObject#{866311e6-c887-4143-9833-645f5b93f6f1}
#
#Name                 MemberType            Definition                                                                                                                                   
#----                 ----------            ----------                                                                                                                                   
#ProjectName          CodeProperty          System.String ProjectName{get=GetCustomUniqueName;}                                                                                          
#Delete               Method                void Delete ()                                                                                                                               
#Save                 Method                void Save (string)                                                                                                                           
#SaveAs               Method                void SaveAs (string)                                                                                                                         
#Extender             ParameterizedProperty IDispatch Extender (string) {get}                                                                                                            
#CodeModel            Property              CodeModel CodeModel () {get}                                                                                                                 
#Collection           Property              Projects Collection () {get}                                                                                                                 
#ConfigurationManager Property              ConfigurationManager ConfigurationManager () {get}                                                                                           
#DTE                  Property              DTE DTE () {get}                                                                                                                             
#ExtenderCATID        Property              string ExtenderCATID () {get}                                                                                                                
#ExtenderNames        Property              Variant ExtenderNames () {get}                                                                                                               
#FileName             Property              string FileName () {get}                                                                                                                     
#FullName             Property              string FullName () {get}                                                                                                                     
#Globals              Property              Globals Globals () {get}                                                                                                                     
#IsDirty              Property              bool IsDirty () {get} {set}                                                                                                                  
#Kind                 Property              string Kind () {get}                                                                                                                         
#Name                 Property              string Name () {get} {set}                                                                                                                   
#Object               Property              IDispatch Object () {get}                                                                                                                    
#ParentProjectItem    Property              ProjectItem ParentProjectItem () {get}                                                                                                       
#ProjectItems         Property              ProjectItems ProjectItems () {get}                                                                                                           
#Properties           Property              Properties Properties () {get}                                                                                                               
#Saved                Property              bool Saved () {get} {set}                                                                                                                    
#UniqueName           Property              string UniqueName () {get}                                                                                                                   
#Type                 ScriptProperty        System.Object Type {get=switch ($this.Kind) {... 
```

我不确定我是否可以通过该`$project`项目进入 Clean Build 和 Rebuild 方法，或者我是否应该通过定位项目路径直接运行 msbuild。

任何的想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T12:38:53.703

[Visual Studio 的对象模型提供了一种通过SolutionBuild](http://msdn.microsoft.com/en-US/library/envdte.solutionbuild%28v=vs.100%29)对象构建整个解决方案或单个项目的方法。

从 NuGet 包管理器控制台构建解决方案非常简单。

```
$dte.Solution.SolutionBuild.Clean($true)
$dte.Solution.SolutionBuild.Build($true) 
```

$true 标志表示命令应该等待清理/构建完成。

构建一个单独的项目并不那么简单。SolutionBuild 对象提供了一个带有三个参数的[BuildProject 方法。](http://msdn.microsoft.com/en-US/library/envdte.solutionbuild.buildproject%28v=vs.100%29)

```
$project = Get-Project | select -First 1
$dte.Solution.SolutionBuild.BuildProject("Debug", $project.FullName, $true) 
```

它也不允许您运行 Clean 构建。

如果你想构建一个单独的项目，那么正如 Pavel 所建议的，使用 MSBuild 似乎更直接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T08:10:54.657

根据 nuget[文档](http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference)，没有执行此操作的命令。我认为直接运行 msbuild 的最简单方法。

```
$project = Get-Project | select -First 1
$msbuild = "C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe"
& $msbuild $project.FullName /t:Clean`;Build`;Rebuild 
```

基于此，您可以编写您的 PS 模块并将其像 nuget 包一样打包，以便与其他开发人员共享并在其他项目中重用。[如何通过 nuget 添加 PS 命令的好例子](http://haacked.com/archive/2011/04/19/writing-a-nuget-package-that-adds-a-command-to-the.aspx)。

# php - 使用 MD5 哈希的链接有多安全

> ID：12137919
> 
> 赞同：-3
> 
> 时间：2012-08-27T07:37:12.283
> 
> 标签：php, https

对于我的网页，我使用（HTTPS）链接而不是密码来更改页面。在链接中，我使用了 2 个 MD5 哈希值，MD5 的基数是随机的（广告 ID 和其他一些不可猜测的信息）。当然，除了拥有带有链接的电子邮件的人之外，我不希望其他人更改页面。这个解决方案实际上有多安全？还有什么其他选择，我不想使用密码……。

示例链接：

[https://www.huurhulp.nl/wijzigen/wijzigen.php?wijzigen_adv=14&code=523a98367bfb05765fb86a2535966aad](https://www.huurhulp.nl/wijzigen/wijzigen.php?wijzigen_adv=14&code=523a98367bfb05765fb86a2535966aad)

如果带有链接的电子邮件未转发，链接是否可能会落入他人手中？可以窃听吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:42:55.157

根据您的描述，您无法撤销其中一个链接（实际上是不记名令牌）。

如果您知道其中一个已泄露，并且您需要阻止通过该链接的访问（并发布一个新链接），这可能是一个问题。

理想情况下，您会为存储在数据库中的每个页面使用完全随机的标记。

提高安全性的其他选项是一段时间后过期和使用后过期（如果您的流程是基于电子邮件的，您可以在发生这种情况时发送新令牌）。

我认为一个很好的例子是 Flickr 如何实现访客通行证：您可以创建任意数量的访客通行证，也可以单独撤销它们。

# vba - VBA/VSTO Excel：测试单元格标识

> ID：12137922
> 
> 赞同：1
> 
> 时间：2012-08-27T07:37:16.427
> 
> 标签：vba, excel, vsto

这个问题与这个问题有些相关：[VBA：如果用户删除单元格，范围对象会发生什么？](https://stackoverflow.com/questions/12127311/vba-what-happens-to-range-objects-if-user-deletes-cells)

有没有办法可靠地测试两个单元格引用的身份，更重要的是，随着时间的推移存储单元格引用？

考虑以下示例：

```
Sub TestCellIdentity ()

   Dim r As Range
   Set r = Application.ActiveCell
   r.Value = "Some Value"

   Dim ws As Worksheet
   Set ws = r.Worksheet

   Dim n As String
   n = ws.Name

   Dim c As Range
   Set c = Worksheets (n).Cells (r.Row, r.Column)

   MsgBox ("ActiveCell ptr: " & CStr (ObjPtr (r)) & "Value: " & r.Value _
     & "; Indirect access ptr: " & CStr (ObjPtr (c)) & " Value: " & c.Value)
End Sub 
```

运行示例显示 ObjPtr (r) 和 ObjPtr (c) 是不同的，即使它们引用同一个单元格。更糟糕的是，在我看来（从一些测试）我不能假设具有相同 ObjPtr 引用的两个单元格对象（对象引用）保证引用同一个单元格（即我不能存储 ObjPtr 值并使用它，例如，作为某处的钥匙）。

因此我的问题是：如何在 Excel 中以在工作表中重命名、剪切和/或粘贴单元格后仍然存在的方式唯一标识一个单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:53:53.637

每次分配变量时都会创建一个指针，因此您会获得不同的引用，除非您将一个变量分配给另一个变量，在这种情况下，它是相同的指针并且具有相同的引用。除非您使用静态声明，否则每次运行子过程时引用通常都会更改。如果您将指针声明为静态并分配一次，则即使用户移动单元格，每次运行代码时它也应该保持一个常量引用。我运行了这段代码来测试它，它似乎工作。

```
 Sub TestCellIdentityModified()

    Dim rng1 As Range
    Dim rng2 As Range
    Static rngStatic As Range

    ' assign cell to pointer
    Set rng1 = ActiveSheet.Cells(2, 4)
    Debug.Print "rng1 = " & ObjPtr(rng1)

    ' assign same cell to a different pointer
    Set rng2 = ActiveSheet.Cells(2, 4)
    Debug.Print "rng2 = " & ObjPtr(rng2); ""

    ' assign one pointer to another
    Set rng2 = rng1
    Debug.Print "rng2 reassigned as rng1 pointer = " & ObjPtr(rng2)

    ' one time assignment of the same cell to a static pointer
    If rngStatic Is Nothing Then Set rngStatic = ActiveSheet.Cells(2, 4)
    Debug.Print "rngStatic = " & ObjPtr(rngStatic)

    Debug.Print " "

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:03:27.413

标准方法是为其分配一个[Defined Name](http://www.cpearson.com/excel/DefinedNames.aspx)。

（您要求一种在重命名后仍然存在的方法，但我不确定您是否只是指工作表的名称。）

# c# - VS 2012 支持 Windows mobile 6

> ID：12137926
> 
> 赞同：2
> 
> 时间：2012-08-27T07:37:27.693
> 
> 标签：c#, visual-studio, windows-mobile, windows-ce, windows-mobile-6.5

我在[这里](http://connect.microsoft.com/VisualStudio/feedback/details/595712/no-support-for-windows-ce-and-compact-framework-development-in-vs2010)读到微软将在Visual Studio 2012 中添加对Windows CE 的支持，但是我在VS 2012 中没有看到这个项目模板。

我的问题：是否会支持 Windows CE 5（更具体地说是 Windows Mobile 6）？如果要支持它，我是否必须安装其他东西？

预先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T13:39:46.233

到目前为止，微软只是公开宣布了一个模糊的“我们将在未来的 VS12 中支持 Windows CE”。他们根本没有详细说明，但根据我对他们过去行为的了解（不是任何秘密的内幕信息），我有我的预测。没有一个，所有或两者之间的任何地方都可能实现。

1.  支持将作为带外安装提供。所以它不是 VS12 的一部分，而是一个不同团队将发布的插件。
2.  发布时间可能与 Windows CE 的发布时间同步，所以我预计它与 Windows CE v. Next 大约在同一时间（他们都没有给出时间表）。
3.  他们可能会放弃对旧处理器的支持。我希望它只是 x86 和 ARM——可能是 v5 及更高版本。
4.  将同时提供本机和托管支持。
5.  鉴于缺乏关于 CF 的信息，我预计不会有很大的变化。也许你会得到一些性能改进等，但不要指望 C# 4.0 支持。
6.  我怀疑会有一些向后兼容性，但多远是一个非常好的问题。6.0R3 会相当安全，但 5.0 呢？您如何处理 vNext 不太可能支持 5.0 支持的处理器这一事实？我认为可能会支持 Windows Embedded Handheld 6.5.3，所以也许他们会给出“仅限 ARM”的条件。

再说一次，这都是猜想，所以请持保留态度。在他们公开宣布某些事情（包括时间表）之前，我们所能做的就是猜测。他们宣布了一些事情的事实向我表明，我们应该在接下来的 30-60 天内期待更多细节。

**编辑**

更多关于 Studio 2012 支持的细节已经发布，尽管他们并没有明确说明可能支持哪些旧版本的操作系统和平台。我们知道 Studio 2012 将在 2013 年第 2 季度同时支持智能设备的本地和托管开发。正如我所说，向后兼容性尚未公布，因此我们不知道我们可以定位多远。

# cakephp - 使用 CakePdf 插件时，CakePHP 找不到“wkhtmltopdf”

> ID：12137927
> 
> 赞同：0
> 
> 时间：2012-08-27T07:37:28.453
> 
> 标签：cakephp, wkhtmltopdf

我被困在一个被难住的问题上。我已经按照自述文件中的说明安装了[CakePdf 插件](https://github.com/ceeram/CakePdf)。但是，当我开始使用该插件时，我收到一个 CakePHP 错误，内容如下：

> 未找到 Pdf 引擎“wkhtmltopdf”
> 
> 错误：发生内部错误。堆栈跟踪
> 
> ```
> APP/Plugin/CakePdf/Pdf/CakePdf.php line 193 → CakePdf->engine(string)
> APP/Plugin/CakePdf/View/PdfView.php line 74 → CakePdf->__construct(array)
> APP/Plugin/CakePdf/View/PdfView.php line 64 → PdfView->renderer(array)
> CORE/Cake/Controller/Controller.php line 942 → PdfView->__construct(UsersController)
> CORE/Cake/Routing/Dispatcher.php line 193 → Controller->render()
> CORE/Cake/Routing/Dispatcher.php line 161 → Dispatcher->_invoke(UsersController, CakeRequest, CakeResponse)
> APP/webroot/index.php line 96 → Dispatcher->dispatch(CakeRequest, CakeResponse) 
> ```

我检查了 CakePdf 使用的二进制路径，这是以下代码：

```
protected $binary = '/usr/bin/wkhtmltopdf'; 
```

我已经导航到 /usr/bin/ 目录，并且 wkhtmltopdf 二进制文件就在那里。我也使用了该命令`wkhtmltopdf http://bbc.co.uk bbc.pdf`并且它有效。所以我不知道为什么 CakePHP/CakePdf 找不到插件，即使它位于定义的二进制路径中？

**更新**
这是`wkhtmltopdf`二进制文件的权限等：

> -rwxrwxrwx。1 根 8301444 8 月 27 日 08:14 wkhtmltopdf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:16:22.030

文档中似乎有错误。

当您调用`wkhtmltopdf`bootstrap.php 文件时，而不是使用：

```
'engine' => 'WkHtmlToPdf' 
```

你需要使用：

```
'engine' => 'CakePdf.WkHtmlToPdf' 
```

反而。

这可以解决问题。

# javascript - 除非填写强制性的 html 表单，否则禁用对驱动器和桌面的访问

> ID：12137933
> 
> 赞同：0
> 
> 时间：2012-08-27T07:37:36.980
> 
> 标签：javascript, html, jsp

我想在jsp中制作一个网页，这样每当我的系统启动时，这个页面就会自动打开，用户在继续之前必须填写这个表格。如果他试图避免填写此表格，他应该无法访问桌面或电脑中的任何驱动器。如果有人知道，请帮忙。代码我在 java/javascript/或 css 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:45:34.693

恐怕您尝试使用常规的基于 Java Web 的应用程序是不可能的。

您可能会研究如何使用常规的 Java 桌面应用程序来完成此任务。当然，要实现这些限制非常困难，但我相信一定有一种方法可以使用 java....

# box-api - Box API 2.0 设置 shared_link 返回 404

> ID：12137937
> 
> 赞同：2
> 
> 时间：2012-08-27T07:37:52.883
> 
> 标签：box-api

最近一直在玩 Box.com 的 API 2.0 版。

根据 [本文档](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)的官方描述，我可以成功地将文件的“访问”设置为“打开”。

但是，如果我将其更改为“公司”或“合作者”，服务器会返回一个响应，说明未找到 HTTP 404，如下所示。

```
{
   "type":"error",
   "status":404,
   "code":"not_found",
   "help_url":"http:\/\/developers.box.com\/docs\/#errors",
   "message":"Not Found",
   "request_id":"609097837503b1dabc4d0c"
} 
```

而且我无法弄清楚这条消息的“未找到”到底是什么意思。

这是我发送的请求正文，可以

```
{
   "shared_link":{
      "access":"Open",
      "permissions":{
         "download":true,
         "preview":true
      }
   }
} 
```

这是返回我错误的请求正文

```
{
   "shared_link":{
      "access":"company",
      "permissions":{
         "download":true,
         "preview":true
      }
   }
} 
```

我想知道这是我不应该做的事情，还是只是 api 中的一个错误。

提前感谢您的任何回复。

=================================

问题的一些更新。

恐怕这不是与案例相关的问题，尽管当我看到文档上的示例确实使用大写“Open”时。

在我的情况下，无论是使用“打开”还是“打开”，我都可以成功设置共享链接而没有任何问题。

但是，以下案例的行为对我来说有点奇怪。

**案例 1：将权限中的两个属性（下载和预览）设置为 false**返回 404（仅将其中一个设置为 true 可以正常工作）

```
{
   "shared_link":{
      "access":"Open",
      "permissions":{
         "download":false,
         "preview":false
      }
   }
} 
```

在以下情况下，为了说明目的，我首先将“访问”设置为“打开”。

**案例2：将“access”设置为“Collaborators”**返回404 not found

**案例 3：将“访问”设置为“合作者”** 工作正常，但 json 响应未正确将“访问”显示为“合作者”

以下是案例3响应的摘录，“访问”仍然是“开放”

```
 shared_link": {
    "url": "https://www.box.com/s/03a47eb4b7dce0439d7f",
    "download_url": "https://www.box.com/shared/static/03a47eb4b7dce0439d7f.pdf",
    "password_enabled": false,
    "unshared_at": null,
    "download_count": 0,
    "preview_count": 0,
    "access": "Open",
    "permissions": {
        "download": true,
        "preview": true
    } 
```

“公司”似乎与以前的案例相同，所以我在这里停止。

出于好奇，我将“访问”设置为文档中提到的字符以外的任意字符（我尝试了诸如“pp”、“c”、“test”之类的词），有趣的是服务器似乎都返回 200：OK 但 json响应仍然是“访问”：“打开”。比较混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:45:24.303

原来“access”参数是区分大小写的。我们现在已经解决了这个问题，所以“打开”和“打开”等都可以工作。

事实证明，您还暴露了一些与文件共享有关的棘手的边缘情况。您可以设置一些安全设置，例如“文件夹属性：安全”设置为“仅限协作者共享链接”。

![在此处输入图像描述](../Images/db97bc9c1d02b5db87c380579544ad65.png)

事实证明，如果您设置了此设置，API 调用将“访问”设置为“打开”，我们将返回 404。我们将努力使该错误信息更丰富（如 403，访问被拒绝）。

至于其余的情况。

**案例 1：**我们的 web-ui 限制您设置其中一些组合（例如 download=false 和 preview=false），因为当我们构建共享功能时，我们认为设置一个不可下载、非- 可预览的文件。

**案例 2（和案例 3 的一部分）：**设置为“合作者”或“合作者”现在应该可以正常工作了。错误已修复。

**案例 3：**设置为“co”或“foo”默认为“Open”。我们现在已将其更改为返回错误（再次为 404）。

希望有帮助。

# .net - 从 EF 4 升级到 EF 5

> ID：12137939
> 
> 赞同：14
> 
> 时间：2012-08-27T07:38:06.400
> 
> 标签：.net, entity-framework, entity-framework-5, .net-4.5

我的应用程序基于 .NET 4.0 和 EF 4。我现在正在考虑升级到最新版本。

*   是否有任何可能对我的申请产生不利影响的重大变化或行为差异？
*   升级路径有多容易？升级到 EF 5 是否需要任何代码更改或其他工作？
*   是否有任何与代码优先相关的新功能值得升级？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T14:06:11.173

编辑：首先，EF 5/.NET 4.5 的一个主要问题是永远不会支持 Windows XP 或 Server 2003（或更早版本）。如果您需要对其中任何一个操作系统的支持，请使用带有 .NET 4.0 的 EF 4.4，它没有任何有趣的新东西。

此外，我遇到了与 DataAnnotations 移动命名空间相关的（简单）重大更改：

> Entity Framework 4.1 到 4.3 在 EntityFramework 程序集中的 System.ComponentModel.DataAnnotations 命名空间中包含了额外的数据注释。在 .NET 4.5 中，这些注释被移动到 System.ComponentModel.DataAnnotations.dll 程序集的 System.ComponentModel.DataAnnotations.Schema 命名空间中成为 .NET Framework 的一部分。如果您使用的是 EF 4.x 并以 .NET 4.5 为目标，则会导致在不同程序集中具有相同名称的两个数据注释。

请参阅[http://blogs.msdn.com/b/adonet/archive/2012/02/29/ef4-3-1-and-ef5-beta-1-available-on-nuget.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/29/ef4-3-1-and-ef5-beta-1-available-on-nuget.aspx)，它仍然适用于 EF 5 RTM。

简而言之，我不得不补充：

```
using System.ComponentModel.DataAnnotations; // had this already
using System.ComponentModel.DataAnnotations.Schema; // needed this one 
```

到无数个地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T08:41:38.940

> 升级路径有多容易？升级到 EF 5 是否需要任何代码更改或其他工作？

您必须升级到 .net 4.5 才能使用大多数新功能。

> 是否有任何与代码优先相关的新功能值得升级？

与代码优先不完全相关，因为它是横切的，但仍然值得一提：**Enum support**。

# sql - 无法使用 JDBC 连接到 sql server 2008

> ID：12137942
> 
> 赞同：0
> 
> 时间：2012-08-27T07:38:11.283
> 
> 标签：sql, sql-server-2008, jdbc

我已经尝试了所有连接到服务器的方法。我正在使用`sql server 2008`混合身份验证模式。我可以使用 sa 登录通过 sql server management studio 登录。但是当我尝试从我的 java 程序访问相同的数据库时，我得到以下信息错误：

```
SQL 异常：com.microsoft.sqlserver.jdbc.SQLServerException：用户“sa”登录失败。ClientConnectionId:191d94bb-a55e-47a0-bb9f-b84638313cf4
```

这是我的连接字符串：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
String connectionUrl= "jdbc:sqlserver://localhost;databaseName=Northwind;user=sa;password=sa;"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:14:20.740

我以同样的方式访问了我的数据库。我的问题之一是我没有为数据库启用端口和 IP。在 SQL Server 配置管理器中检查这些选项。希望这会有所帮助=)

# r - 聚合 R 中的日期字段

> ID：12137946
> 
> 赞同：0
> 
> 时间：2012-08-27T07:38:22.237
> 
> 标签：r, aggregate

在以下数据框中

```
id<-c(1,1,1,1,1,3,3,3,3)
date<-c(NA,NA,"22-11-07",NA,NA,NA,NA,"23-11-07",NA)

df<-data.frame(id,date)
df$date2<-as.Date(as.character(df$date), format = "%d-%m-%y")

id     date      date2
1     <NA>       <NA>
1     <NA>       <NA>
1 23-11-07 2007-11-22
1     <NA>       <NA>
1     <NA>       <NA>
3     <NA>       <NA>
3     <NA>       <NA>
3 23-11-07 2007-11-23
3     <NA>       <NA> 
```

有什么方法可以基于`date`and进行聚合`id`并获取以下数据框？

```
id    date2
1    2007-11-22
3    2007-11-23 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:57:12.627

`aggregate`如果这就是您要寻找的方法，这将是一种方法：

```
aggregate(date2 ~ id + date, df, c)
  id     date      date2
1  1 22-11-07 2007-11-22
2  3 23-11-07 2007-11-23 
```

您可以在聚合*后*`aggregate(date2 ~ id + date, df, c)[, -2]`使用删除`date`列，因为根据您的问题，您正在聚合和。*`id``date`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:47:10.450

你可以这样做 ：

```
na.omit(df)[,-2] 
```

`na.omit`删除 NA 并`[,-2]`删除第二列。*

# visual-studio-2010 - 如何在 Productivity Power Tools（或者 ReSharper）中重新映射 Ctrl+单击“Go To Definition”快捷键

> ID：12137953
> 
> 赞同：50
> 
> 时间：2012-08-27T07:38:54.060
> 
> 标签：visual-studio-2010, visual-studio, resharper, productivity-power-tools

我喜欢 Visual Studio 的[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)扩展，但它添加了`Ctrl`+Click“转到定义”功能，这非常棒，但我的工作流程让我在不需要时使用该功能。

当我想复制一些东西时，我开始标记一些文本，仍然按住鼠标按钮，按住`Ctrl`+`C`然后松开鼠标按钮。该工具将此确认为“转到定义”单击，我通常以字符串或其他的定义结束。我知道我可以`Ctrl`在鼠标按钮之前释放按钮；然而，我很难从一个我永远养成的习惯中恢复过来。

有没有办法将`Ctrl`+ Click Go To Definition 功能重新映射到`Ctrl`+ `Shift`+ Click？我知道我可以通过转到“工具>选项>生产力工具>所有扩展”来停用它；但是，我不想失去功能，只是让它按我的意愿工作。

**编辑：**

*   这可能是[ReSharper 问题](http://youtrack.jetbrains.com/issue/RSRP-290402)。
*   [这篇文章](http://www.jaylee.org/post/2010/06/13/VS2010-How-to-disable-the-Power-Tools-Ctrl2bClick-Go-to-Definition.aspx)讨论了类似的事情

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-28T07:39:48.373

尝试去`ReSharper | Options -> Environment | Search & Navigation`并关闭`Go to declaration on <Control + Left click> in editor`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-24T13:24:19.987

我没有 ReSharper。但我可以在 Visual Studio 2012 中关闭它。我在工具 - 选项 - 生产力工具 - Ctrl+单击转到定义中找到它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-26T19:33:26.693

尝试菜单*工具*→*选项*→*生产力工具*（左侧菜单）→将其关闭`Ctrl`+单击右侧的转到定义。

![在此处输入图像描述](../Images/e6b80df813467e2ca17e2380f928b577.png)

# java - 用于 Java 代码混淆的 Maven 插件

> ID：12137954
> 
> 赞同：5
> 
> 时间：2012-08-27T07:38:55.400
> 
> 标签：java, android

是否有用于混淆 Java 代码（Java SE、Java EE 或 Android）的 maven 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:44:08.237

我刚刚用谷歌搜索了“java obfuscator maven plugin”，发现了很多链接，包括这个： http: [//pyx4me.com/pyx4me-maven-plugins/proguard-maven-plugin/](http://pyx4me.com/pyx4me-maven-plugins/proguard-maven-plugin/)

我认为您应该首先选择符合您需求的混淆器。如果没有包装此混淆器的 maven 插件，请通过命令行从 maven pom.xml 运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:47:54.620

proguard-maven-plugin 是您想要的工具。请参阅此[链接](http://pyx4me.com/pyx4me-maven-plugins/proguard-maven-plugin/)以了解详细用法。

# android - 设计整个布局

> ID：12137955
> 
> 赞同：3
> 
> 时间：2012-08-27T07:38:57.383
> 
> 标签：android, android-layout, android-gui

我有一个用于`ListView`. 在某些地方，我需要以“浅色”风格显示布局，而在某些地方则需要“深色”风格。如何使用 Android 样式、主题等来实现这一点？

我了解样式的概念，但似乎它们仅适用于单个元素。他们让我定义了一组属性，这些属性应用于带有样式的元素。我想做的是定义以下属性：

*   标题文字颜色（适用于`TextView`1）
*   字幕文字颜色（适用于`TextView`2）
*   背景（应用于父布局）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:38:57.383

无法以[编程方式设置样式](https://stackoverflow.com/a/2016344/111777)，因此我正在创建一个主题，并将此主题应用于需要它的活动。

**创建属性**

添加样式属性，`res/values/attrs.xml`如下所示：

```
<declare-styleable name="MyTheme">
    <attr name="titleColor" format="color" />
    <attr name="subtitleColor" format="color" />
    <attr name="backgroundDrawable" format="reference" />
</declare-styleable> 
```

`MyTheme`似乎不需要与任何事物相关联。我怀疑它只是属性的名称空间。

**创建风格**

在`res/values/styles.xml`：

```
<style name="MyTheme.LightRows">
    <item name="titleColor">@color/black</item>
    <item name="subtitleColor">@color/grey</item>
    <item name="backgroundDrawable">@drawable/cell_bg</item>
</style> 
```

**将样式应用于活动**

在`AndroidManifest.xml`：

```
<activity android:name=".view.activity.LightActivity" 
          android:theme="@style/MyTheme.LightRows" /> 
```

**参考样式属性**

在用于列表行（或其他）的布局中：

```
 android:textColor="?attr/titleColor" 
```

# facebook - 通过图形 API 发布到 FB 提要时，我应该使用什么尺寸的图片？

> ID：12137961
> 
> 赞同：0
> 
> 时间：2012-08-27T07:39:33.953
> 
> 标签：facebook, image, facebook-graph-api

我正在使用`https://graph.facebook.com/" + FB_id + "/feed`作为发布到用户提要的帖子的目标，如下所述：http: [//developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)（搜索“发布”部分）。

图片参数在这里描述：http: [//developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

但是我找不到像这样发布时推荐使用的图像尺寸。

我知道图像显示在用户自己的时间线和隐藏的朋友的提要上，看起来它们在这两个地方的大小不同。

那么，通过 API Grpah 发布到 Facebook Feed 时推荐的图片尺寸是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:50:09.850

Facebook 建议照片尺寸至少为 200 像素，纵横比不大于 3:1。照片的最大尺寸为 960 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T16:45:42.350

当前关于优化提要中的图像（包括图像大小）的建议位于[网站和移动应用程序共享最佳实践](https://developers.facebook.com/docs/sharing/best-practices#images)文档页面上。

> **优化您的图像尺寸以生成出色的预览**
> 
> 使用至少 1200 x 630 像素的图像，以便在高分辨率设备上获得最佳显示效果。至少，您应该使用 600 x 315 像素的图像来显示带有较大图像的链接页面帖子。
> 
> **小图像**
> 
> 如果您的图像小于 600 x 315 像素，它仍会显示在链接页面帖子中，但尺寸会小得多。
> 
> 我们还重新设计了链接页面帖子，以便桌面和移动新闻提要的图像纵横比相同。尽量让您的图像保持接近 1.91:1 的纵横比，以便在动态消息中显示完整图像而不进行任何裁剪。
> 
> **游戏应用图片**
> 
> 有两种不同的图像尺寸可用于游戏应用程序：
> 
> Open Graph Stories 图像以方形格式显示。这些应用程序的图像比例应为 600 x 600 像素。未打开的图表故事图像以矩形格式显示。您应该使用 1.91:1 的图像比例，例如 600 x 314 像素。

# ios - 如何在不同的设备上以不同的分辨率使用图像？

> ID：12137962
> 
> 赞同：0
> 
> 时间：2012-08-27T07:39:40.207
> 
> 标签：ios, html, cordova, screen-resolution

我正在使用 phonegap 制作 iphone 应用程序。我不确定如何正确使用图像来支持不同设备（iphone、ipad）上的所有不同分辨率。我用谷歌搜索了它，有人指出我应该为不同的屏幕使用不同的 css 文件。我真的希望应该有一个更简单的方法。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:09:31.967

使用 CSS3 媒体查询来检测手机尺寸并使用正确的样式。这个问题有一个例子：[PhoneGap + Android + media queries](https://stackoverflow.com/questions/10484822/phonegap-android-media-queries)

另请参阅“[如何使用 CSS3 媒体查询创建网站的移动版本](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)”。

**示例（在您的 HTML 中）**

```
<link rel="stylesheet" type="text/css" media="(max-width: 480px) and (max-device-width: 480px)" href="screen-small.css" /> 
```

# sql-server - SQL Server 2000 和 SQL Server 2008 之间的数据库传输

> ID：12137963
> 
> 赞同：0
> 
> 时间：2012-08-27T07:39:42.190
> 
> 标签：sql-server, sql-server-2008, database-migration

我正在尝试帮助托管公司决定关闭其托管服务的客户，在此过程中，我需要将旧的 ASP.Net 站点（我认为是 DNN）迁移到新的托管公司。

旧的托管公司正在运行 SQL Server 2000，而我试图将其复制到的新托管公司有 2008 版本。

SQL Server Management Studio 可以正常连接到旧数据库，但导入/导出数据工具不想连接到这个旧系统。

无论如何可以轻松地传输数据库吗？

您可以推荐任何工具来备份 SQL 2000 数据库并将其还原到 2008 版本或可以在这两者之间进行转换的迁移工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:44:45.823

您应该能够从 SQL Server 2000 数据库中获取 SQL Server 数据库备份（使用内置备份功能），并将其还原到 SQL Server 2008

[http://msdn.microsoft.com/en-us/library/ms186858(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms186858(v=sql.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:44:58.377

我给你的建议是

1.  让主机关闭 SQL Server
2.  让主机为您提供文件或备份
3.  安装您自己的 SQL Server 2000，然后运行迁移。或者只是简单地在 SQL2008 中保存备份

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:55:48.380

您还可以尝试编写数据库脚本（模式 + 数据）：http: [//j.mp/NRb2EE](http://j.mp/NRb2EE)并在新服务器上执行此脚本。如果数据库很大，它可能是巨大的脚本。

并记住要注意脚本的数据类型选项 - 选择选项“架构和数据”。

# php - Shopify API：创建新的自定义集合时出错。{"errors":{"title":["不能为空"]}}

> ID：12137967
> 
> 赞同：1
> 
> 时间：2012-08-27T07:39:57.227
> 
> 标签：php, curl, shopify

我一直在尝试使用 Shopify API 添加新的自定义集合。但不断收到错误标题不能为空。

虽然标题已在 POST 字段中设置

我的代码如下：

```
$url = 'https://APIKEY:APIPASS@DOMAIN.myshopify.com/admin/custom_collections.json';

$collection = array
    (
        "custom_collection" => array( 'title' => 'Made In the USA' )
    );

//    $payload = json_encode($collection);
$payload = '{
              "custom_collection": {
                "title": "IPods",
                "collects": [
                  {
                    "product_id": 99395358
                  }
                ]
              }
            }';

$ch = curl_init( $url );

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_USERAGENT, 'HAC');
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);

curl_setopt ($ch, CURLOPT_POSTFIELDS, $payload);

$return = curl_exec( $ch );
curl_close( $ch ); 
```

我得到回应

```
{"errors":{"title":["can't be blank"]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:43:34.663

[CURLOPT_POSTFIELDS](http://php.net/manual/en/function.curl-setopt.php)格式错误。

> 此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。

# android - 当设备不在 Android 中的路径时如何获得通知？

> ID：12137969
> 
> 赞同：0
> 
> 时间：2012-08-27T07:40:11.180
> 
> 标签：android, google-maps, gps

如何以编程方式通知设备在 Android GPS 中的错误方向。我有一个默认路径设置。我已经设置了这样的路径：

```
final Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?" + "saddr="+ 12.756742 + "," + 76.67523465 + "&daddr=" + 12.64345213 + "," + 76.875432));
intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");
startActivity(intent);` 
```

从一个点移动到另一个点时，设备应该只移动到该路径。当用户移出该路径（例如向右或向左 + 或 - 100 米）时，它应该通知用户。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:26:40.080

我想这个链接可以帮助你

“http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert(double, double, float, long, android.app.PendingIntent)”

将其粘贴到不带引号的地址中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:12:53.933

```
 NotificationManager notificationManager = (NotificationManager)  getSystemService(NOTIFICATION_SERVICE);

    // Create Notifcation
    Notification notification = new Notification(R.drawable.ic_launcher,
            "A new notification", System.currentTimeMillis());

    // Cancel the notification after its selected
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    //

    // Specify the called Activity
    Intent intent = new Intent(this, ur_activity.class);

    PendingIntent activity = PendingIntent.getActivity(this, 0, intent, 0);
    notification.setLatestEventInfo(this, "your tittle",
            "ur notifi text", activity);
    notificationManager.notify(0, notification); 
```

并在 onLocationChanged(); 中使用它 你可以在你是否处于良好状态时处理。（你可以检查纬度和经度。）

# asp.net-mvc-3 - 为什么在托管更改后忘记（重置）表单身份验证

> ID：12137980
> 
> 赞同：0
> 
> 时间：2012-08-27T07:41:11.677
> 
> 标签：asp.net-mvc-3, forms-authentication, web-hosting

我有一个 .NET 4 MVC 应用程序。在我转移到另一个主机后，所有经过身份验证的用户都“忘记”了他们的凭据，所以所有人都必须重新登录。

域名保持不变，验证和解密密钥在 web.config 中明确指定。加密方法是否使用某些特定于机器的密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:11:15.783

一个潜在的原因是其中一个主机在没有[MS11-100 补丁的](http://technet.microsoft.com/en-us/security/bulletin/MS11-100)情况下运行。您应该与主机商确认他们通过 Windows 更新保持最新状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:57:42.063

即使在 web.config 中明确指定了验证和解密密钥，其他[机器密钥](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.100%29.aspx)和[表单身份验证](http://msdn.microsoft.com/en-us/library/532aee0e%28v=vs.100%29.aspx)默认值（例如加密和验证算法）也可能从主机的 .Net Framework machine.config 或 web.config 继承。您应该确保在您的 web.config 中明确设置 machinekey 和表单身份验证设置部分中的所有可能值。

您没有说它是否与子域共享托管，但我想知道您的主机是否可能阻止人们使用默认的 cookie 名称 .ASPXAuth 因为这可能与主机上的其他人发生冲突。

# mysql - 如何使用查询获取确切的行

> ID：12137982
> 
> 赞同：1
> 
> 时间：2012-08-27T07:41:19.880
> 
> 标签：mysql, joomla

我想从以下数据中获取确切的行

```
id   name     groupid

1    robert   1,2
2    henry    11,12 
```

我的查询是

```
SELECT * FROM table WHERE groupid LIKE '%1%' 
```

上面的查询将返回两行
如何获得第一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:46:52.680

你可以使用 [FIND_IN_SET](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set)

```
SELECT * FROM table WHERE FIND_IN_SET('1', groupid) 
```

但作为建议，您不应该像这样保存数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T07:43:12.870

假设`groupid`是一个`varchar`具有存储为逗号分隔列表的 id 的列，您可以尝试以下操作：

```
select * from table where CONCAT(',',groupid,',') LIKE '%,1,%'; 
```

或者更好的方法是在 mysql 中使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数：

```
select * from table where find_in_set(1, groupid); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:42:53.433

要从数据库表中获取*准确的行*，只需指定所有字段：

```
SELECT *
FROM myTable
WHERE id = 1
AND name = 'robert'
AND groupid = '1,2' 
```

或者，假设`id`是唯一的主键，您可以使用它：

```
SELECT *
FROM myTable
WHERE id = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:46:33.577

使用 LIKE '%1%' 将返回包含 1 的所有结果。使用 @lc 解决方案 WHERE groupid = '1,2' 仅获取具有该特定 ID 的结果。

# sql - 基于 SQL 的全文搜索

> ID：12137987
> 
> 赞同：-1
> 
> 时间：2012-08-27T00:31:41.500
> 
> 标签：sql, full-text-search

我有包含以下列的 sql 表：

```
item_id | title | description 
```

我将通过描述列实现全文搜索。例如，搜索查询`asus notebook`应返回包含查询的所有行。行数可能非常大（大约 100 万）。我如何有效地实施我的搜索？您推荐使用哪些技术（Apache SOLR 等）？我可以使用 lucene 吗？有什么建议，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:40:41.537

由于您已经在使用 SQL，我会推荐 PostgreSQL 及其[全文搜索功能](http://www.postgresql.org/docs/9.2/static/textsearch.html)。

# javascript - 为什么在javascript中的模块模式中实现延迟函数时范围会发生变化？

> ID：12137989
> 
> 赞同：0
> 
> 时间：2012-08-27T07:41:58.210
> 
> 标签：javascript

**方法一：**

正常工作代码

```
var foo1 = function() {
    var t1 = new Date();
    console.log("initialise - one time only "+this);
    foo1 = function() {
        console.log("Executes everytime after initialising(initialise should not execute again) "+this);
        return t1;
    };
    return foo1();
}; 
```

执行： foo1();

输出：

**第一次**

初始化 - 仅一次 [对象窗口]

每次初始化后执行（初始化不应再次执行）[对象窗口]

**每隔一段时间**

每次初始化后执行（初始化不应再次执行）[对象窗口]

**方法二**

**我在 javascript 的模块中尝试相同的方法**

```
var tt=(function(){
     var foo = function() {
        var that=this;
        var t = new Date();
        console.log("initialise - one time only" + this);
        foo = function() {
            console.log("Executes everytime after initialising(initialise should not execute again) "+this);
            return t;
        };
        return foo();
    }
    return {
        foo:foo
    };
})(); 
```

执行：tt.foo();

输出：

**第一次**

初始化 - 仅一次[object Object]

每次初始化后执行（初始化不应再次执行）[对象窗口]

**每隔一段时间**

初始化 - 仅一次[object Object]

每次初始化后执行（初始化不应再次执行）[对象窗口]

**为什么 foo1 在方法 2 中再次初始化？**

**为什么在方法 2 中，模块模式内部的 this 范围会更改为 window ？**

**如何使方法 2 像方法 1 一样工作？**

*请给出一个概念解释方法 2 有什么问题。提前致谢。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:59:05.057

您会看到以下几行：

```
initialise - one time only[object Object]
Executes everytime after initialising(initialise should not execute again) [object Window] 
```

在每次调用中，`tt.foo()`因为对初始`foo`值的引用保存在返回对象中 ({ foo: foo }); 所以你没有执行：

```
foo = function() {
    console.log("Executes everytime after initialising(initialise should not execute again) "+this);
    return t;
}; 
```

但你正在执行：

```
function () {
    var that=this;
    var t = new Date();
    console.log("initialise - one time only" + this);
    foo = function() {
        console.log("Executes everytime after initialising(initialise should not execute again) "+this);
        return t;
    };
    return foo();
} 
```

第一个日志是`initialise - one time only[object Object]`因为您正在使用以下上下文调用该方法：

```
{ foo: foo } 
```

这就像打电话：

```
var a = {
   test: function () {
      console.log(this);
   }
} 
```

这里将记录`a`对象。在第二个 console.log 中，匿名对象 ( ) 未引用 foo ，`{ foo: foo }`因此使用上下文调用它`window`- 类似于： `foo.apply(window)`。我希望我的解释很清楚。

**编辑** 要使第二种方法像第一种方法一样工作，您必须`foo`在一开始就有正确的参考。下面的代码正在解决这个问题：

```
var tt=(function(){
     var foo = (function() {
        var that=this;
        var t = new Date();
        console.log("initialise - one time only" + this);
        foo = function() {
            console.log("Executes everytime after initialising(initialise should not execute again) "+this);
            return t;
        };
        return foo;
    }());
    return {
        foo:foo
    };
})(); 
```

# ruby-on-rails - 尝试在 Rails 中使用简单表单时未定义的方法“model_name”

> ID：12137991
> 
> 赞同：0
> 
> 时间：2012-08-27T07:42:05.890
> 
> 标签：ruby-on-rails, simple-form

我试图在我的模式中获取由 simple-form 生成的表单，但是在加载页面时我一直遇到以下错误。

```
 undefined method 'model_name' for NilClass:Class 
```

这是我用来尝试生成表单的简单代码

**_header.html.erb**（在 view_pages_controller 下）

```
<%= simple_form_for @update do |f| %>
  <%= f.input :lang %>
  <%= f.input :book %> #temp, just for testing simpform
  <%= f.button :submit %>
<% end %> 
```

我很确定问题出在我的控制器代码上

**更新控制器.rb**

```
class UpdatesController < ApplicationController
before_filter :signed_in_user, only: [:create, :destroy]

  def create
    @update = current_user.updates.build(params[:update])
    if @update.save
      flash[:success] = "Update successful"
      redirect_to root_path
    else
      flash[:error] = "Failed to update, please try again"
      redirect_to root_path
    end
  end
end 
```

**更新.rb**

```
class Update < ActiveRecord::Base
  attr_accessible :book, :user_id, :lang, :round_id

  belongs_to :user
end 
```

任何帮助/提示将不胜感激。我知道我的代码很烂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:58:15.827

问题是`@update`您认为它是空的。您应该明确呈现此视图的操作，并将 value 设置为`@update`。create 操作仅根据参数设置它，然后重定向到 root。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:59:39.850

我相信您正在使用某种 RESTfull 控制器，并且您正在通过操作呈现表单：new。所以，为了解决你的麻烦，添加

```
@update = current_user.updates.build(params[:update]) 
```

对你的**新**动作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:06:29.477

您是否尝试过在控制器中声明@update 的行上方放置一个调试器。

然后您可以看到您的 current_user 对象以及使用类似 current_user.methods 的方法可以使用哪些方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:59:25.983

您是否包含`resource:'updates' or resources:'updates'`在 routes.rb 中。这可能会解决问题。

# c# - C# 使用字典处理和恢复/加载位图

> ID：12137992
> 
> 赞同：0
> 
> 时间：2012-08-27T07:42:12.733
> 
> 标签：c#, winforms, bitmap, dispose

我编写了一个程序，它使用一些图片资源并从中创建一个文件。作为客户预览，图像在使用之前显示。因此，我需要先处理它们，然后才能与它们合作。但是我想在之后再次加载预览，因为它可能是大量的图片我想动态地做它，所以我失败了。

我使用文件名作为字符串的字典：

```
 //Creating a Bitmap so we can preview the Picture.
        try
        {
            mainDrawingBackgroundBitmap = new Bitmap(filePathBackgroundBackgroundImage);

            if(mainAllBitmapsDictionary.ContainsKey(mainDrawingBackgroundBitmap))
            {
                mainAllBitmapsDictionary.Remove(mainDrawingBackgroundBitmap);
            }     
            mainAllBitmapsDictionary.Add(mainDrawingBackgroundBitmap,filePathBackgroundBackgroundImage);
        } 
```

现在我的位图和路径在字典中，稍后我以这种方式处理它们：

```
 private void DisposeAllFiles()
    {
        foreach (var tempBitmap in mainAllBitmapsDictionary.Keys)
        {
            tempBitmap.Dispose();
        }
    } 
```

哪个工作得很好。现在，当我尝试重新创建位图时：

```
 private void RessurrectAllFiles()
    {
        foreach (var tempAllBitmap in mainAllBitmapsDictionary)
        {
            try
            {
                var tempBitmap = tempAllBitmap.Key;
                tempBitmap = new Bitmap(tempAllBitmap.Value);
            }
            catch (ArgumentException ae)
            {
            }
        }

    } 
```

他没有失败或抛出错误，字典甚至充满了正确的位图和字符串，但是这些似乎不再影响原始对象，所以字典是原样但是当我检查像这样的位图时： mainDrawingBackgroundBitmap，我只看到 ArgumentExceptions。

说白了，我哪里失败了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:46:06.163

将图像的路径作为键，将位图数据作为值，这样您就可以轻松地操作数据并且搜索字典将执行得很快。

```
Dictionary<string, Bitmap> 
```

# java - 如何从java中的Process获取信息？

> ID：12137996
> 
> 赞同：0
> 
> 时间：2012-08-27T07:42:23.510
> 
> 标签：java, process

如何在java中获取信息表单处理，使用`Runtime.getRuntime.exec("rundll32 url.dll,FileProtocolHandler "+url)`，我无法从返回值的输入流中获取任何内容。我想使用 java 来处理浏览器并从浏览器的响应中获取信息。

```
Process pro = Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + url); 
//Process pro = Runtime.getRuntime().exec("C:\\Documents\u0008and\u0008Settings\\peiyin.lyy\\Local\u0008Settings\\Application\u0008Data\\Google\\Chrome\\Application\\chrome.exe" + url); 
reader = new BufferedReader(new InputStreamReader(pro.getInputStream()));

String line = null;
Thread.sleep(1000);
while((line=reader.readLine())!=null){
    Thread.sleep(30);
    System.out.println(line);
}
System.out.printl(line); 
```

行为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:08:31.803

我在 Windows 终端中尝试了命令**rundll32 url.dll,FileProtocolHandler [http://www.google.fr 。](http://www.google.fr)**屏幕上没有打印输出，当浏览器打开时命令返回。由于 InputStream 没有可读取的内容，因此该行为空是正常的。

您想从浏览器中获得什么样的信息？

# java - Seam Component.getInstance() 和 JNDI 上下文查找之间的区别

> ID：12137999
> 
> 赞同：3
> 
> 时间：2012-08-27T07:42:29.930
> 
> 标签：java, ejb-3.0, seam, jndi

我有一个带有以下注释的有状态会话 bean：

```
@Stateful
@Name("fooBar")
public class FooBarAction implements FooBar { 
```

我注意到有两种方法可以获取我的 FooBar 实例：

**接缝查找：**

```
Component.getInstance(FooBarAction.class); 
```

**JNDI 查找：**

```
(new InitialContext()).lookup("MYAPP/FooBarAction/local"); 
```

当我使用 JNDI 查找时，每次执行查找时，我都会注意到创建了一个新的 FooBar 实例。默认构造函数被调用，setter 方法用于恢复我的 SFSB 的状态（属性）。

当我使用 Seam 查找时，不会调用默认构造函数，也不会调用 setter 方法。我只有实例。与上一个查找相同的实例。

那么有什么区别呢？最好的使用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:49:18.123

来自[文档](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Seam_Reference_Guide/ch24s02s02s02.html)：此方法返回指定组件的单例，因此使用相同的组件名称连续调用两次将返回该组件的相同实例。