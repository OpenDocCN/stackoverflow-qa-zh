# StackOverflow 问答 000770000-000770999

# mysql - 在 mdb 文件和 MySQL 服务器模式中的相似表之间同步数据

> ID：770004
> 
> 赞同：0
> 
> 时间：2009-04-20T20:41:49.950
> 
> 标签：mysql, ms-access

我正在寻找一种方法来管理应用程序的 Access mdb 文件和包含相同表副本的 MySQL 模式之间的同步。这是因为该应用程序不支持 MySQL 作为后端，但我正在寻找一种方法，使用第一个应用程序生成的数据将 MySQL 用于其他办公室应用程序。

一些给定的：

1> 我们不能放弃第一个应用程序，它只兼容Microsoft SQL Server 作为后端服务器来存放数据。

2> 我们不反对使用 Microsoft SQL 服务器，但许可成本是一个大问题 - 以及重写​​一些其他 Access 应用程序以使用链接表和单独的 mdb 文件。

3> 数据库服务器应该是“PHP 友好的”，以用于内部公司内部网络的未来扩展项目。

4> 无需也不应允许从公司网络外部访问任何数据。

我希望我不会太晦涩，但我也不想破坏信心——所以我试图走一条非常紧的绳子。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T06:37:16.073

如果两个数据库都需要可更新，那么同步两个数据库非常非常复杂。如果一个人是另一个人的奴隶，那几乎没有那么困难。我不止一次使用 Access 对这种同步进行了编程，一次是使用 Web 服务器上的 MDB，该 MDB 必须与本地数据 MDB 同步（以合并在网站上编辑的数据；没有编辑返回到网站，所以单向同步，但仍然需要在非 Web 端合并编辑），以及曾经在网站上的 MySQL 和主 (MySQL) / 从 (Access) 关系中的 Access 之间编程同步。

在网站上，您将每个表的数据转储编程到文本文件中。在 MySQL 表中包含时间戳字段很有帮助，这样您就知道何时创建和更新了记录。这允许您选择自上次数据转储以来要转储的记录（这使得 Access 端的数据同步更加简单）。

我对其进行编程的方式是将文本文件导入到临时表中，这些临时表已适当索引并链接到前端 Access 应用程序。将数据转储导入登台表后，您将完成三个任务：

1.  查找新记录并将它们附加到 Access 数据存储中。这很容易通过外部连接完成。

2.  处理删除。我稍后会讨论这个，因为它，嗯，很复杂。

3.  处理更新的记录。为此，我编写了可以逐列编写 SQL 语句的 DAO 代码。

像这样的东西：

```
UPDATE LocalTable
SET LocalTable.Field1 = DownloadTable.Field2, LocalTable.Updated = DownloadTable.Updated
WHERE LocalTable.Field1 <> DownloadTable.Field2 
```

现在，显然，WHERE 子句必须比这更复杂一些（您必须处理 NULL，并且必须使用针对数据类型适当格式化的标准，即，使用 "" 和 ## 表示文本和日期，分别，并且没有数字数据的分隔符），但是编写代码来做到这一点非常容易。

骨架代码如下所示：

```
 Dim db As DAO.Database
  Dim rsFields As DAO.Recordset
  Dim fld As DAO.Field
  Dim strSQL As String

  Set rsFields = db.OpenRecordset("SELECT TOP 1 Field1, Field2, Field3 FROM LocalTable;")
  For Each fld in rsFields
    [write your SQL statement and execute it]
  Next fld
  Set fld = Nothing
  rsFields.Close
  Set rsFields = Nothing
  Set db = Nothing 
```

现在，正如我所说，复杂的部分是为每个 SQL 语句编写 WHERE 子句，但这很容易弄清楚。另外，请注意，在您的 rsFields 记录集（仅用于遍历要更新的字段）中，您只想包含可更新的字段，因此您将省略 CREATED 字段和 PK 字段（以及任何您不想更新的其他字段）。

现在，对于删除。

您可能认为简单地删除本地表中不在远程表中的任何记录是个好主意。如果它真的是一个从数据库，那它工作得很好，但通常最初是一个从数据库最终会得到它自己的编辑。所以，在这种情况下，你*不需要*从主 MySQL 数据库中删除记录，而是使用一个 DELETE 标志来标记已删除的记录。您可能有不同种类的逻辑可以将已删除的记录从主数据库中清除（例如，如果您在记录中使用日期戳，则可以删除所有标记为 DELETED 的记录，其 LastUpdated 时间戳 <= 您上次转储数据；或者，您可以让 Access 应用程序向服务器发送一个文本文件，其中包含已从 Access 数据存储中成功删除的记录列表）。如果 Access 数据存储中有编辑，那么您将需要一些逻辑来处理从 MySQL“主”数据库中删除的记录的编辑。

总之：

如果你有真正的主从关系，那是相当微不足道的。如果你真的想通过蛮力做到这一点，你只需将所有 MySQL 数据表的全部转储到文本文件中，删除 Access 数据存储中的所有记录并导入文本文件。

我倾向于不这样做，因为当您第一次需要脱离纯粹的主/从关系时，您会感到厌烦并且必须从头开始重写所有内容。

我上面给出的大纲对于主/从工作非常干净，但如果您有一些“从”数据库私有的字段，或者存在于从属而不在主控中的数据（即我正在处理的情况）。

# .net - 如何清除以前对对象的期望？

> ID：770013
> 
> 赞同：63
> 
> 时间：2009-04-20T20:44:10.100
> 
> 标签：.net, rhino-mocks

我想设置一个返回值

```
_stubRepository.Stub(Contains(null)).IgnoreArguments().Return(true); 
```

但随后在特定测试中，覆盖该期望以返回 false。

就像是：

```
_stubRepository.ClearExpectations();  //<- this does not exist, I'm just making something up
_stubRepository.Stub(Contains(null)).IgnoreArguments().Return(false); 
```

请注意，我不希望期望在第二次调用时返回 false，我想覆盖第一个期望。

这将有助于大大简化我的测试场景。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2009-04-20T21:06:55.570

有以下三种方式：

**您可以使用 BackToRecord 重置期望值**

我不得不承认我从来没有真正使用过它，因为它很尴尬。

```
// clear expectations, an enum defines which
_stubRepository.BackToRecord(BackToRecordOptions.All);
// go to replay again.
_stubRepository.Replay(); 
```

**编辑：**现在我有时会使用它，它实际上是最干净的方式。应该有一个扩展方法（如 Stub）来完成它 - 我认为它只是被遗忘了。我建议自己写。

**您可以使用 Repeat.Any()**

它“破坏”了存根定义的顺序并“覆盖”了以前的定义。但它在某种程度上是隐含的。我有时会使用它，因为它很容易编写。

```
_stubRepository.Stub(x => x.Contains(null))
  .IgnoreArguments()
  .Return(false)
  .Repeat.Any(); 
```

**您可以创建一个新的模拟**

琐碎，但明确且易于理解。如果您想保留大量定义并且只更改一个调用，这只是一个问题。

```
_stubRepository = MockRepository.GenerateMock<IRepository>();
_stubRepository.Stub(x => x.Contains(null))
  .IgnoreArguments()
  .Return(false); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-02T16:24:51.197

对于这些情况，我创建了一个简单的 RinoMocks 扩展方法来更好地显示存根的意图并提高可读性。

```
public static void OverridePrevious<T>(this IMethodOptions<T> options)
{
    options.Repeat.Any();
} 
```

因此，而不是像下面这样可能需要评论的神秘调用：

```
[SetUp]
public void Setup()
{
    carStub.Stub(x => x.Model).Return("Model1");
    carStub.Stub(x => x.Model).Return("Model2");
}

[Test]
public void SomeTest()
{
    //Arrange
    //overrides previous stubs that were setup for the Model property
    carStub.Stub(x => x.Model).Return(null).Repeat.Any();

    //Act
    //Assert
} 
```

您可以获得更易读的测试，更好地显示 .Repeat.Any() 调用的意图：

```
carStub.Stub(x => x.Model).Return(null).OverridePrevious(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-11T14:58:52.570

为了社区的利益，我将把它添加到上面 Stefan 的选项列表中：

如果需要经常更改返回值，我发现如下使用闭包既干净又高效。

```
bool returnValue = true;
_stubRepository.Stub(x => x.Contains(null)).IgnoreArguments().Do(new Func<bool>(() => {
    return returnValue;
}));

returnValue = false;
// Calls to Contains now return false;

returnValue = true;
// Calls to Contains now return true; 
```

The lambda expression will be executed every time `Contains` is called and because we created a closure referencing `returnValue`, it will always look up the **current** value of `returnValue`.

# java - Seam/Hibernate 验证器监听器

> ID：770020
> 
> 赞同：1
> 
> 时间：2009-04-20T20:45:43.373
> 
> 标签：java, hibernate, seam, validation

我们在这里使用标准的 SEAM 设置......完成使用休眠的验证系统。

基本上发生的情况是用户在 html 输入中输入一个值，然后 seam 使用休眠验证验证他们输入的值。

大部分情况下都可以正常工作，除了这是我的问题：我们需要记录每个字段的验证结果，我想不出一个好的方法来做到这一点......理想情况下，它可以通过与接缝/休眠进行通信来完成验证系统，只是记录验证结果，但据我所知，没有办法做到这一点？

过去有没有人做过这样的事情？有一些令人讨厌的解决方法，但我更愿意干净地做。

只是快速概述一下我们现在正在发生的上下文过程：

1) 用户输入字段值 2) 使用 ajax (a4j:support) 设置 onblur 值此时验证器触发并重新渲染 div，如果发生任何验证错误，它们现在在页面上可见

我希望在第 2 步发生的是“ValidationListener”或类似的调用，这将允许我们记录验证的结果。

谢谢，如果有人能够提供帮助：o

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T09:14:53.433

您应该能够通过创建一个具有观察 org.jboss.seam.validationFailed 事件的方法的 Bean 来做到这一点。然后，该方法可以执行您想要的任何日志记录。

```
@Name("validationObserver")
public class ValidationObserver() {

    @Observer("org.jboss.seam.validationFailed")
    public void validationFailed() {
        //Do stuff
    }
} 
```

validationFailed 事件不传递任何参数，因此如果您想记录错误是什么，您必须询问 FacesMessages 或可能是 Hibernate Validation 框架本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T11:53:34.293

如果您只使用 Hibernate 进行验证，您可以按照 Damo 的建议在 validationFailed() 方法中使用 Hibernate ClassValidator。
例子：

```
 public <T> InvalidValue[] validateWithHibernate(T object) {
        ClassValidator<T> validator = new ClassValidator(object.getClass());
        InvalidValue[] invalidValues = validator.getInvalidValues(object);
        return invalidValues;
    } 
```

# c# - 如何根据扩展名获取文件类型信息？（不是 MIME）在 C#

> ID：770023
> 
> 赞同：20
> 
> 时间：2009-04-20T20:46:03.590
> 
> 标签：c#, file, mime, file-type

如何获得基于扩展名的一般文件类型描述，如 Explorer 呢？所以不是 MIME，而是最终用户看到的信息，比如。

.doc = Microsoft Office Word 97 - 2003 文档 .zip = ZIP 文件 .avi = 视频文件。

以及如何获得似乎可用的“辅助”信息，我猜它不是基于扩展的。就像在“视频文件”上一样，它可以为您提供电影的“长度”或在 doc 文件上它有多少页......等等。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-04-21T20:36:40.843

谢谢丹，好吧..这回答了我的第一个问题。可惜不是第二个。注意：并非所有内容都能打印出来[。PInvoke.net的致谢](http://www.pinvoke.net/default.aspx/shlwapi/AssocQueryString.html)

```
using System;
using System.Runtime.InteropServices;
using System.Text;
using System.Diagnostics;

namespace WindowsFormsApplication1
{
    static class Program
    {
        [DllImport("Shlwapi.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern uint AssocQueryString(AssocF flags, AssocStr str, string pszAssoc, string pszExtra, [Out] StringBuilder pszOut, [In][Out] ref uint pcchOut);

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Debug.WriteLine(FileExtentionInfo(AssocStr.Command, ".doc"), "Command");
            Debug.WriteLine(FileExtentionInfo(AssocStr.DDEApplication, ".doc"), "DDEApplication");
            Debug.WriteLine(FileExtentionInfo(AssocStr.DDEIfExec, ".doc"), "DDEIfExec");
            Debug.WriteLine(FileExtentionInfo(AssocStr.DDETopic, ".doc"), "DDETopic");
            Debug.WriteLine(FileExtentionInfo(AssocStr.Executable, ".doc"), "Executable");
            Debug.WriteLine(FileExtentionInfo(AssocStr.FriendlyAppName, ".doc"), "FriendlyAppName");
            Debug.WriteLine(FileExtentionInfo(AssocStr.FriendlyDocName, ".doc"), "FriendlyDocName");
            Debug.WriteLine(FileExtentionInfo(AssocStr.NoOpen, ".doc"), "NoOpen");
            Debug.WriteLine(FileExtentionInfo(AssocStr.ShellNewValue, ".doc"), "ShellNewValue");

            //  DDEApplication: WinWord
            //DDEIfExec: Ñﻴ߾
            //  DDETopic: System
            //  Executable: C:\Program Files (x86)\Microsoft Office\Office12\WINWORD.EXE
            //  FriendlyAppName: Microsoft Office Word
            //  FriendlyDocName: Microsoft Office Word 97 - 2003 Document

        }

        public static string FileExtentionInfo(AssocStr assocStr, string doctype)
        {
            uint pcchOut = 0;
            AssocQueryString(AssocF.Verify, assocStr, doctype, null, null, ref pcchOut);

            StringBuilder pszOut = new StringBuilder((int)pcchOut);
            AssocQueryString(AssocF.Verify, assocStr, doctype, null, pszOut, ref pcchOut);
            return pszOut.ToString();
        }

        [Flags]
        public enum AssocF
        {
            Init_NoRemapCLSID = 0x1,
            Init_ByExeName = 0x2,
            Open_ByExeName = 0x2,
            Init_DefaultToStar = 0x4,
            Init_DefaultToFolder = 0x8,
            NoUserSettings = 0x10,
            NoTruncate = 0x20,
            Verify = 0x40,
            RemapRunDll = 0x80,
            NoFixUps = 0x100,
            IgnoreBaseClass = 0x200
        }

        public enum AssocStr
        {
            Command = 1,
            Executable,
            FriendlyDocName,
            FriendlyAppName,
            NoOpen,
            ShellNewValue,
            DDECommand,
            DDEIfExec,
            DDEApplication,
            DDETopic
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-29T18:19:37.657

我的代码包括检查以防止一些常见错误...希望它有所帮助:-)

```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace HQ.Util.Unmanaged
{
    /// <summary>
    /// Usage:  string executablePath = FileAssociation.GetExecFileAssociatedToExtension(pathExtension, "open");
    /// </summary>
    public static class FileAssociation
    {
        /// <summary>
        /// 
        /// </summary>
        /// <param name="ext"></param>
        /// <param name="verb"></param>
        /// <returns>Return null if not found</returns>
        public static string GetExecFileAssociatedToExtension(string ext, string verb = null)
        {
            if (ext[0] != '.')
            {
                ext = "." + ext;
            }

            string executablePath = FileExtentionInfo(AssocStr.Executable, ext, verb); // Will only work for 'open' verb
            if (string.IsNullOrEmpty(executablePath))
            {
                executablePath = FileExtentionInfo(AssocStr.Command, ext, verb); // required to find command of any other verb than 'open'

                // Extract only the path
                if (!string.IsNullOrEmpty(executablePath) && executablePath.Length > 1) 
                {
                    if (executablePath[0] == '"')
                    {
                        executablePath = executablePath.Split('\"')[1];
                    }
                    else if (executablePath[0] == '\'')
                    {
                        executablePath = executablePath.Split('\'')[1];
                    }
                }
            }

            // Ensure to not return the default OpenWith.exe associated executable in Windows 8 or higher
            if (!string.IsNullOrEmpty(executablePath) && File.Exists(executablePath) &&
                !executablePath.ToLower().EndsWith(".dll"))
            {
                if (executablePath.ToLower().EndsWith("openwith.exe"))
                {
                    return null; // 'OpenWith.exe' is th windows 8 or higher default for unknown extensions. I don't want to have it as associted file
                }
                return executablePath;
            }
            return executablePath;
        }

        [DllImport("Shlwapi.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern uint AssocQueryString(AssocF flags, AssocStr str, string pszAssoc, string pszExtra, [Out] StringBuilder pszOut, [In][Out] ref uint pcchOut);

        private static string FileExtentionInfo(AssocStr assocStr, string doctype, string verb)
        {
            uint pcchOut = 0;
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, null, ref pcchOut);

            Debug.Assert(pcchOut != 0);
            if (pcchOut == 0)
            {
                return "";
            }

            StringBuilder pszOut = new StringBuilder((int)pcchOut);
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, pszOut, ref pcchOut);
            return pszOut.ToString();
        }

        [Flags]
        public enum AssocF
        {
            Init_NoRemapCLSID = 0x1,
            Init_ByExeName = 0x2,
            Open_ByExeName = 0x2,
            Init_DefaultToStar = 0x4,
            Init_DefaultToFolder = 0x8,
            NoUserSettings = 0x10,
            NoTruncate = 0x20,
            Verify = 0x40,
            RemapRunDll = 0x80,
            NoFixUps = 0x100,
            IgnoreBaseClass = 0x200
        }

        public enum AssocStr
        {
            Command = 1,
            Executable,
            FriendlyDocName,
            FriendlyAppName,
            NoOpen,
            ShellNewValue,
            DDECommand,
            DDEIfExec,
            DDEApplication,
            DDETopic
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-20T22:27:43.177

直接从注册表中读取此类内容通常是个坏主意（请参阅[Raymond Chen 的博客](http://blogs.msdn.com/oldnewthing)了解所有[血腥细节](http://blogs.msdn.com/oldnewthing/archive/2007/03/13/1868542.aspx)）。在这种特殊情况下，您需要的 API`AssocQueryString`位于**shlwapi.h**中。

这是 C++ 代码：

```
TCHAR buf[1024];
DWORD sz = sizeof(buf) / sizeof(TCHAR);
AssocQueryString(ASSOCF_INIT_DEFAULTTOSTAR, ASSOCSTR_FRIENDLYDOCNAME, L".sql", NULL, buf, &sz); 
```

您可以通过 C++/CLI 在 C# 中使用它，从而公开一个对 .NET 友好的 API；或直接通过[P/Invoke 调用](http://www.pinvoke.net/default.aspx/shlwapi/AssocQueryString.html)它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-22T12:16:40.383

对于 XP 中的未知文件类型，有一些额外的 if .. 与除了 FriendlyDocName 之外的任何东西一起使用时，可能不会真正给出正确的结果，但仅作为示例：

```
public static string FileExtentionInfo(AssocStr assocStr, string doctype)
{
   if ((doctype.Length <= 1) || !doctype.StartsWith(".")) return "";

   uint pcchOut = 0;
   AssocQueryString(AssocF.Verify, assocStr, doctype, null, null, ref pcchOut);

   if (pcchOut == 0) return (doctype.Trim('.').ToUpper() + " File");

   StringBuilder pszOut = new StringBuilder((int)pcchOut);
   AssocQueryString(AssocF.Verify, assocStr, doctype, null, pszOut, ref pcchOut);
   return pszOut.ToString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-02T18:38:46.027

好的旧 FileSystemObject 内置了这个功能。

如果你不介意使用它，那么下面的代码很短。

在您的项目中添加对 Microsoft Scripting Runtime 的引用，并在 Windows 窗体应用程序中尝试此操作。

```
private void Form1_Load(object sender, EventArgs e) {
  getSometypes();
}
private void getSometypes()
{
  System.Diagnostics.Debug.WriteLine(getFileType(".txt"));
  System.Diagnostics.Debug.WriteLine(getFileType(".doc"));
  System.Diagnostics.Debug.WriteLine(getFileType(".xlsx"));
}    
private string getFileType(object ext)
{
  Scripting.FileSystemObject fso = new Scripting.FileSystemObject();
  string tempPath = System.IO.Path.GetTempPath();
  string tempFile = "";
  tempFile = tempPath + "tmp" + ext;
  System.IO.File.WriteAllText(tempFile, "");
  var f = fso.GetFile(tempFile);
  string t = f.Type;
  f.Delete();
  return t;
} 
```

getFileType 使用提供的扩展名创建一个临时文件，然后使用 FileSystemObject 打开文件并返回其类型，这是您想要的类型描述。getSometypes 将它们写在输出窗口中。

在这种情况下（瑞典语）：

```
文本文件
Microsoft Word 97–2003 文档
Microsoft Excel-烷基白板

```

# javascript - 使用 jQuery 显示通知的最佳方式

> ID：770038
> 
> 赞同：13
> 
> 时间：2009-04-20T20:51:05.560
> 
> 标签：javascript, jquery, html

我有一个简单的 CRUD 表单。

当用户输入或删除记录时，我试图显示一条看起来很酷的成功消息。我在网上看到了很多。

我对 jquery 很陌生。有谁知道任何可以展示如何做到这一点的例子？

基本上是一个会慢慢变暗的 div。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-20T20:56:46.187

您的问题有点含糊，因为“看起来很酷的成功信息”并不多。

但是，如果您有兴趣，通过在这里回答问题，我已经复制了人们似乎喜欢的 Stackoverflow 的两个“通知”功能的功能：当您获得新徽章时出现的页面顶部的横幅等。以及每当操作出现问题时站点周围的红色框。我使用与这些类似的技术在我的应用程序中显示成功消息，我的客户很喜欢它们。

*   [显示顶部横幅](https://stackoverflow.com/questions/659199/how-to-show-popup-message-like-in-stackoverflow/659243#659243)-[演示](http://jsbin.com/owuje)
*   [显示红色框](https://stackoverflow.com/questions/758906/how-would-i-implement-stackoverflows-hovering-dialogs/759062#759062)-[演示](http://jsbin.com/oqale)

这些示例非常简单，因为它所做的只是在文档中的某处显示一个 DIV，并根据情况将其淡入淡出。这就是你真正需要开始的一切。

除此之外，如果您是 Mac 粉丝（即使您不是），还有基于 OS X 通知系统的[jQuery Growl插件。](http://plugins.jquery.com/project/Growl)我也非常喜欢使用[BeautyTips](http://www.lullabot.com/files/bt/bt-latest/DEMO/index.html)插件在元素附近显示消息，因为气泡非常漂亮且易于设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-20T21:11:59.020

我真的很喜欢[jGrowl](https://github.com/stanlemon/jGrowl)。这是非常不显眼的，因为消息显示在左下角，用户可以继续做他正在做的任何事情，但他确实从系统中获得了反馈。而且它看起来也很花哨:)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T20:57:26.060

只需放入一个新的绝对定位的 div 并使用 fadeOut 函数通过慢速动画为其不透明度设置动画。

像这样的东西：

```
var newDiv = $('div').css({position: 'absolute', left: '100px', top: '100px'}).text('SUCCESS!!!').appendTo($('body'));
newDiv.fadeOut(5000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T20:56:30.353

也许您正在寻找[这样的东西](http://docs.jquery.com/Effects/hide#speedcallback)或像这样的[直接淡入淡出](http://docs.jquery.com/Effects/fadeOut#speedcallback)。有[几种效果可供选择](http://docs.jquery.com/Effects)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T20:57:23.067

这应该有效：

```
function showSnazzySuccessMessage(text)
{
    if($("#successMessage").length < 1)
    {
        //If the message div doesn't exist, create it
        $("body").append("<div id='successMessage' style='text-align:center;vertical-align:middle;width:400px;position:absolute;top:200px;left:300px;border:2px solid black;background:green;margin:20px;display:none'>" + text + "</div>");
    }
    else
    {
        //Else, update the text
        $("#successMessage").html(text);
    }
    //Fade message in
    $("#successMessage").show('slow');
    //Fade message out in 5 seconds
    setTimeout('$("#successMessage").hide("slow")',5000);
} 
```

你必须玩弄这种风格才能让它看起来像你想要的那样，但你明白了。

# c# - IoC 容器示例

> ID：770039
> 
> 赞同：46
> 
> 时间：2009-04-20T20:51:42.597
> 
> 标签：c#, inversion-of-control

有没有人有 IoC 容器的好例子（最好是在 c# 中）以及如何以及为什么使用它们？我已经查看了[wiki 页面](http://en.wikipedia.org/wiki/Inversion_of_control)和[Ayende 的](http://ayende.com/Blog/archive/2007/10/20/Building-an-IoC-container-in-15-lines-of-code.aspx)示例，但我还不太了解这个概念。

我应该何时何地使用 IoC 容器？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-04-20T21:14:01.013

我已经使用了很多[StructureMap](http://structuremap.github.io/)。你的问题的其余部分已经加载完毕。我将尝试用一个例子来解释这个概念。

假设您创建了一个将通过 PayPal 接受付款的网站。PayPal 现在是一个依赖项。但是您不想针对特定的 PayPal 提供商进行编码。

Instead, you would create and code against an interface like this:

```
interface IPaymentProcessor
{
    bool ProcessPayment(amount, ....);
} 
```

All your PayPal code would reside in a class that implements the methods of your interface - `PayPalPaymentProcessor`, for example.

Now you have an object that you will actually use to process the payments. This could be a Controller (ASP.NET-MVC, ViewModel-WPF) or just a class as shown here:

```
class PaymentProcessor
{
    private IPaymentProcessor _processor = null;
    public PaymentProcessor(IPaymentProcessor processor)
    {
        _processor = processor;
    }

    public bool ProcessTransaction(Transaction trans)
    {
       _processor.ProcessPayment(trans.amount, ...);
    }
} 
```

This is where an IoC container comes in. Instead of you calling the constructor manually, you would let an IoC container *inject* the dependency:

```
PaymentProcessor processor = ObjectFactory.GetInstance<PaymentProcessor>(); 
```

This piece of code tells StructureMap "Anytime you see a constructor that needs an `IPaymentProcessor`, return a new `PayPalPaymentProcessor`".

```
ObjectFactory.Initialize(x =>
{ 
    x.ForRequestedType<IPaymentProcessor>().TheDefaultIsConcreteType<PayPalPaymentProcessor>();
}); 
```

All this mapping is separate from your implementation code and you could swap out these at a later point with little refactoring needed. There is a lot more to IoC containers, but that the basic concept. You can automate the injection of constructors to avoid the calls directly to `ObjectFactory` as well.

Hope this helps!

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-08-07T14:09:53.377

Be aware of the following limitations of the IOC container. I have to warn people, because I am living with the hell of having to support a system using it:

*   Exceptions thrown by constructors get swallowed. You only get the “couldn’t create dependency” exception. That means you can't catch expected exceptions if it's throw in a constructor.
*   Can’t step through constructors.
*   Forgetting to register an interface breaks at runtime instead of compile time.
*   All your classes can only have one constructor and they all have to accept interfaces as parameters.
*   All dependencies are instantiated so you can’t share instances, which means your memory usage can get large quickly.
*   It promotes a lot of interdepencies which can hide the fact that you code has turned into spaghetti. Making it easier to instatiate all of these interdepencies just masks that there is a potential underlying problem.
*   You can't manage your own "Unit of Work" very easily because you can't manage a transaction across multiple dependencies since you didn't have control of instantiating them and passing in the context of that transaction.

Don't get me wrong, I love dependency injection and the inversion of control principle, but I think the IOC container could be used responsibly, but just be aware of the battles that you will need to fight because of the above list.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-20T22:09:49.070

If you want to see an IoC container under the hood, and also the point (Dependency Injection), there's a great podcast on DNR TV ([Episode 126](http://www.dnrtv.com/default.aspx?showNum=126)) that really goes into detail about how to create them, why you'd need them. It's a really wonderful podcast. Once you've watched this video, you'll then be able to look at [Unity](http://www.codeplex.com/unity),[Ninject](http://ninject.org/), [StructureMap](http://structuremap.sourceforge.net/Default.htm), etc and be able to understand what they're doing

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-20T21:02:32.663

查看[Spring IoC (.net)](http://www.springframework.net/doc-latest/reference/html/objects.html)一个 java/.net 容器。该文档是相当不错的介绍。

简而言之：您可以将 IoC 视为一种鼓励： *对象组合*和*接口编程*的架构。

这为您提供以下信息：

*   轻松对代码进行单元测试的能力（您可以通过模拟其所有依赖项轻松地单独测试您的对象）。

*   一个非常先进的配置（因为您的 IoC 程序只是一堆对象和一个将对象粘合在一起的配置）。

*   扩展或修改字节编译应用程序的能力（Java 是这样，我不确定 .net 是否如此）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-20T21:29:49.897

We use Ninject because of its simple API and fast resolution of objects. It's very well documented and leverages C# 3.0 features like lambda expressions to make specification easier.

You can find several screencasts on Ninject [here](http://www.dimecasts.net/Casts/ByTag/Ninject)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-20T21:02:34.300

您是否正在尝试构建 IoC 容器，为什么不使用 Spring.NET、StructureMap 或 Unity Application Block 等可用容器之一？[这](http://csharp-source.net/open-source/containers)是开源 IoC 项目的列表

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-20T21:17:06.823

I normally use [StructureMap](http://structuremap.sourceforge.net/Default.htm) - mostly because I'm familiar with the syntax. I've also heard good things about [autofac](http://code.google.com/p/autofac/) and I'm looking forward to trying out [Ninject](http://kohari.org/2009/02/25/ninject-2-reaches-beta/) when it hits v2.

You might want to take a look at [this answer](https://stackoverflow.com/questions/756541/enforcing-dependencies-in-ioc-via-a-constructor/758286#758286) where I talk about a basic usage of an IoC container (I always think things are easier to understand with a simple example) - that might help you to understand things a little more. Basically, the IoC container helps you to build objects with all the dependencies satisfied, and allows you to change your dependencies with minimal configuration code.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-20T21:43:16.277

Try reading [Introduction to Unity Application Block](http://msdn.microsoft.com/en-us/library/dd203206.aspx) and in [ASP.NET StoreFront: Dependency Injection](http://www.asp.net/learn/mvc-videos/video-366.aspx) screencast you can see more about Dependency Injection concepts.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-20T22:04:19.707

I am using Unity for my IoC container, but the difference between the containers resides in more than what you can do with DI.

DI (Dependency Injection) is mainly a way to get more loose coupling between disparate parts of your program. So, if you wrote a game that you like how it works, by using DI you can change the characters or physics engine in the game without changing other parts of the game, so, if someone pays more money they get the more realistic engine, or the better characters, but since nothing else is changing, the testing is simpler.

Unit testing is also easier with DI as you can mock out the database, for example, by just changing the implementation that will be used by the application, without affecting anything else.

If you use Spring.NET for example, you will get access to a very powerful framework, but it may do a great deal that you won't use, so look for something smaller. I think the best rule is to find the smallest, simplest implementation that meets your needs, and use that.

# jquery - jQuery 选择器和过滤

> ID：770042
> 
> 赞同：2
> 
> 时间：2009-04-20T20:53:21.187
> 
> 标签：jquery, css-selectors, filter

我刚刚开始使用 jQuery，对此我感到非常兴奋。

我发帖的原因是我写了一些 jQuery 来完成它的必要任务，但我怀疑它缺乏一点优雅......

我正在尝试获取所有具有以下内容的表行：1）“项目”类 2）具有值的子文本输入框

## 的HTML：

```
<tr class="item">
    <td class="sku">[dynamic]</td>
    <td class="quantity">
        <input type="text" name="[dynamic]" maxlength="3" /></td>
</tr> 
```

## jQuery

```
...
var selections=$(".item>.quantity>:text[value!='']").parent().parent();
... 
```

我在上面发布的代码有效，但有两件事（至少？）闻起来有点滑稽。

代码气味 #1：我在末尾使用 '.parent().parent()' 来抓取整行。有没有什么方法可以让我说，“给我所有的 tr 和一个‘item’类，其中子文本输入有一个值”，而不是在最后回溯层次结构？

代码异味 #2：我想不出在选择过程中“修剪”文本输入值的方法，以确保不会将空格解释为内容。使用我目前的方法，我将不得不在 .each 循环期间“修剪”并再次检查，这似乎是多余的。

如果您看到“更好的方法”，请告诉我？

谢谢，理查德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-20T20:57:06.373

#1

改用这个（注意`has`选择器）：

```
var selections=$(".item:has(>.quantity>:text[value!=''])"); 
```

#2

空格通常被认为是有效输入，因此如果您的应用程序特别需要其他内容，可以使用`$.trim()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T21:11:37.947

我不确定您是否有意这样做，但您不必遍历每个孩子直到输入。除非你有这样做的理由，否则这同样好：

```
var rows = $('tr.item:has(input:text[value!=''])'); 
```

另请注意，[jQuery 文档](http://docs.jquery.com/Selectors/text)建议您在前言中将其排除在外，这等于是`:text`一个非常慢的选择器。`input``*:text`

# python - Win&X11 中的全局热键

> ID：770049
> 
> 赞同：3
> 
> 时间：2009-04-20T20:55:11.463
> 
> 标签：python, hotkeys

我需要为我的应用程序创建一个全局热键，它应该可以在 X11 和 Windows 下工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T21:03:24.110

您使用的是什么 GUI 工具包？通常，全局热键由桌面环境或窗口管理器处理 - 我不相信 Python 的内置工具包（tkinter）可以制作全局热键。您可能会查看用于 Unix 的[xlib](http://python-xlib.sourceforge.net/)和用于 Windows 的 win lib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-12-01T11:26:36.183

只是一个附加的窗口，如果你在你的应用程序中使用 wxpython，你可以注册你的[hotkey](http://wxpython.org/docs/api/wx.Window-class.html#RegisterHotKey)。例子在[这里](http://wiki.wxpython.org/RegisterHotKey)

# c# - 从 SQL 查询中获取依赖项

> ID：770051
> 
> 赞同：0
> 
> 时间：2009-04-20T20:55:52.227
> 
> 标签：c#, .net, sql

我正在尝试在 C# 中以编程方式进行一些 SQL 查询验证（不调用实际数据库）。本质上，我希望用户能够输入视图、UDF 或 SP 并立即验证其依赖关系。用户将这些输入到用于定义数据库对象的自定义工具中。

因此，如果用户输入：

```
CREATE VIEW someView AS SELECT name, address FROM users 
```

我可以提取“用户”的依赖关系，然后检查存储在内存中的数据库对象集合（例如，表、视图等），以确保其中之一存在依赖关系。请记住，输入到我的自定义应用程序中的实际视图/UDF/SP 非常复杂，自己解析它们是不可取的。

我目前正在尝试使用 Microsoft.Data.Schema.ScriptDom.Sql.TSql100Parser 执行此操作。这提供了一个 parse 方法，它返回查询的 DOM 表示。然而，这是一个非常复杂的 DOM，我基本上不得不为它编写一个完整的解析器。

有什么想法/建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T21:00:50.593

有一个可以使用名为 sp_depends 的过程......但是由于延迟名称解析，它不是故障安全的。确实没有安全的方法可以做到这一点，在最新版本中它变得更好了，但仍然让人头疼

阅读此[内容您是否依赖 sp_depends（没有双关语）](http://sqlblog.com/blogs/denis_gobo/archive/2008/05/06/6653.aspx)来了解我的意思

# java - 随机会话失效

> ID：770061
> 
> 赞同：6
> 
> 时间：2009-04-20T20:57:36.513
> 
> 标签：java, session, tomcat, jakarta-ee, session-timeout

我正在 Tomcat 中运行 J2EE Web 应用程序，最近我的任务是向应用程序添加指标。我正在使用 SessionListener 来检测会话何时被破坏，然后将指标上传到数据库。我的会话超时在我的 web.xml 中设置为 30 分钟，并且我不会在任何地方以编程方式使会话无效。通常在我登录测试的 1 5-10 分钟期间，我会看到上传到数据库的 3 或 4 组指标，它们都具有不同的会话 ID。

除了 web.xml 和 session.invalidate()，还有什么会导致 Tomcat 中的会话被破坏？例外？Tomcat 会随机使会话无效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T21:50:51.487

可能您的网络浏览器已决定不将会话 cookie 发送到您的应用程序所期望的网络应用程序的请求中。我已经看到这种情况发生在 apache 重写规则中；session-cookie 路径之外的 URL 被重定向到 Web 应用程序。发生了类似以下的事情（细节可能有误）：

*   我的网络应用程序位于 /app/
*   因此会话 cookie 被绑定到这个路径 /app/
*   web应用程序中的一个页面引用/img/magic.jpeg
*   浏览器未在其对该图像的请求中发送会话 cookie（路径不匹配）
*   服务器将请求（内部）重定向到 /app/createImage?magic
*   Web 应用程序没有收到会话 cookie，因此它创建了一个新会话

如果您记录新会话的初始 URL，您应该能够查看这是否会导致您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-20T21:05:06.400

这可能不是您的服务器上发生的情况，但如果在服务器上设置了系统时间，这可能会导致会话过期的速度快于 30 分钟的“经过时间”。Tomcat - 至少从 5.5 开始 - 使用“时钟时间”来过期会话，因此更改系统时钟将影响会话生命周期。

# wse - 如何在单个项目中互操作 WSE 2.0 和 3.0

> ID：770062
> 
> 赞同：0
> 
> 时间：2009-04-20T20:57:38.370
> 
> 标签：wse

作为我工作的一部分，我需要在我们现有的项目中添加一个新的 Web 服务。目前所有服务都是使用 WSE 3.0 的 ASMX Web 服务，但新服务需要使用 WSE 2.0 SP3，因为调用它的供应商拒绝升级到 3.0。

我希望这里有人知道如何让这两个版本并排运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-20T21:00:59.857

您将无法并排运行。WSE 2.0 在 .NET 1.1 平台上运行。WSE 3.0 在 .NET 2.0 平台上运行。

您应该能够在 Web 服务上运行 WSE 3.0，并让客户端在其端使用 WSE 2.0。两者都应该分别实现 WS-Security 标准。

# math - .NET 的符号数学

> ID：770064
> 
> 赞同：7
> 
> 时间：2009-04-20T20:57:58.010
> 
> 标签：math, symbolic-math

我正在寻找 .NET 框架的符号数学库。我看过 Math.net，但它还不是可用的东西。你知道是否有另一个图书馆存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T21:20:13.230

这可能有点矫枉过正，但您可以从 .NET 与[Mathematica](http://www.wolfram.com/products/mathematica/index.html)交谈，使用它的[.NET/Link API](http://www.wolfram.com/solutions/mathlink/netlink/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:56:23.387

[Symbolism](https://github.com/dharmatech/Symbolism)是一个在 C# 中实现代数表达式自动简化的库。它可以用作更复杂的符号数学运算的基础。

# batch-file - 这个批处理文件到底应该做什么？

> ID：770076
> 
> 赞同：8
> 
> 时间：2009-04-20T21:03:10.477
> 
> 标签：batch-file, obfuscation, hex

这在 .bat 文件中有什么作用？

它是某种汇编语言还是什么？

```
    @debug <%0 >nul
    e100 48 e6 61 是 3f 01 31 db 8a 1c 80 fb ff 74 f4 81
    e110 c3 d0 00 b0 b6 e6 43 31 d2 66 b8 dd 34 12 00 66
    e120 f7 f3 e6 42 88 e0 e6 42 46 8a 0c 46 ba da 03 ec
    e130 a8 08 74 fb ec a8 08 75 fb fe c9 74 c9 eb f0 00
    e140 0c 19 0c 45 0c 19 0c 8d 24 8d 24 67 48 00 0c 19
    e150 0c 45 0c 19 0c 67 24 67 24 45 24 36 0c 19 18 00
    e160 0c 19 0c 45 0c 19 0c 45 30 67 18 36 24 19 0c 00
    e170 30 00 18 67 18 45 18 45 34 00 0c 19 0c 45 0c 19
    e180 0c 8d 30 8d 18 67 48 00 0c 19 0c 45 0c 19 0c cf
    e190 30 45 18 45 24 36 0c 19 18 00 0c 19 0c 45 0c 19
    e1a0 0c 45 30 67 18 36 24 19 0c 00 30 00 18 67 30 45
    e1b0 6b 后
    G

```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-20T22:34:31.177

看看 Dan Olson 的[dissasembly](https://stackoverflow.com/questions/770076/what-exactly-is-this-batch-file-supposed-to-do/770156#770156)，它看起来像一个循环播放一些音乐的小程序：

```
out 0x61 
```

打开和关闭电脑扬声器。

```
out 0x43 
```

设置系统定时器以生成方波。

```
out 0x42 
```

设置定时器频率。

然后是一堆循环，从0x13f开始读取数据，与视频状态同步进行计时，最后从头开始。

当然，数据只是一对音符音高和长度。对于好奇的人，请随时收听[youtube 版本](http://www.youtube.com/watch?v=oHg5SJYRHA0)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-20T21:06:14.870

是的，它使用“debug.exe”将一些原始十六进制作为 COM 文件放入内存，然后执行它。不管它是什么，它看起来很危险。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-20T21:22:44.750

下面的拆机版...

```
00000000  48                dec ax
00000001  E661              out 0x61,al
00000003  BE3F01            mov si,0x13f
00000006  31DB              xor bx,bx
00000008  8A1C              mov bl,[si]
0000000A  80FBFF            cmp bl,0xff
0000000D  74F4              jz 0x3
0000000F  81C3D000          add bx,0xd0
00000013  B0B6              mov al,0xb6
00000015  E643              out 0x43,al
00000017  31D2              xor dx,dx
00000019  66B8DD341200      mov eax,0x1234dd
0000001F  66F7F3            div ebx
00000022  E642              out 0x42,al
00000024  88E0              mov al,ah
00000026  E642              out 0x42,al
00000028  46                inc si
00000029  8A0C              mov cl,[si]
0000002B  46                inc si
0000002C  BADA03            mov dx,0x3da
0000002F  EC                in al,dx
00000030  A808              test al,0x8
00000032  74FB              jz 0x2f
00000034  EC                in al,dx
00000035  A808              test al,0x8
00000037  75FB              jnz 0x34
00000039  FEC9              dec cl
0000003B  74C9              jz 0x6
0000003D  EBF0              jmp short 0x2f

; Data starting at 0x13f
0000000: 000c 190c 450c 190c 8d24 8d24 6748 000c  ....E....$.$gH..
0000010: 190c 450c 190c 6724 6724 4524 360c 1918  ..E...g$g$E$6...
0000020: 000c 190c 450c 190c 4530 6718 3624 190c  ....E...E0g.6$..
0000030: 0030 0018 6718 4518 4534 000c 190c 450c  .0..g.E.E4....E.
0000040: 190c 8d30 8d18 6748 000c 190c 450c 190c  ...0..gH....E...
0000050: cf30 4518 4524 360c 1918 000c 190c 450c  .0E.E$6.......E.
0000060: 190c 4530 6718 3624 190c 0030 0018 6730  ..E0g.6$...0..g0
0000070: 456b ff0d 0a                             Ek... 
```

# c# - Response.WriteFile PDF 文件 - 损坏的文件

> ID：770084
> 
> 赞同：1
> 
> 时间：2009-04-20T21:07:09.687
> 
> 标签：c#, pdf

我在将 PDF 文件写入浏览器时遇到问题。其他 mime 类型工作正常。PDF 文件损坏。

```
FileInfo file = new FileInfo(Path.Combine(_module.FileDir, _file.FilePath));
Response.ClearContent();
Response.ClearHeaders();
Response.ContentType = _file.ContentType;
Response.AppendHeader("Content-Disposition", "attachment; filename=" + Regex.Replace(_file.FilePath, "\\s", "-"));
Response.AppendHeader("Content-Length", file.Length.ToString());
try
{
    Response.WriteFile(file.FullName);
    Response.Flush();
    Response.Close();
}
catch
{
    Response.ClearContent();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T21:26:26.910

我的问题是 HTTP 模块。我正在应用空白过滤器

```
 HttpApplication app = sender as HttpApplication;
    if (app != null && app.Request.RawUrl.Contains(".aspx"))
    {
        app.Response.Filter = new WhitespaceFilter(app.Response.Filter);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T21:29:23.003

IIS HTTP Compression and Streaming PDF's: Don't work well. [http://blog.1530technologies.com/2006/11/iis_http_compre.html](http://blog.1530technologies.com/2006/11/iis_http_compre.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T21:31:33.763

You need these three statements:

Response.Flush(); Response.Close(); Response.End();

The last one is the most important.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T21:15:37.983

对于这种情况， Response.Redirect 应该也能正常工作：

```
FileInfo file = new FileInfo(Path.Combine(_module.FileDir, _file.FilePath));
Response.Redirect(file.FullName); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T21:16:11.850

1.  你确定你得到了正确的 MIME 类型吗？
2.  您是在试图强制用户下载，还是只是流式传输 PDF 数据？
3.  您是否在任何地方执行 Response.End() 调用以确保不发送额外数据（在标题和 PDF 二进制文件之外）？

我认为这可能是您的问题#3。[Microsoft 的知识库](http://support.microsoft.com/directory/article.asp?ID=KB;EN-US;q306654&lex)提供此代码来执行您似乎正在执行的操作。

```
//Set the appropriate ContentType.
Response.ContentType = "Application/pdf";
//Get the physical path to the file.
string FilePath = MapPath("acrobat.pdf");
//Write the file directly to the HTTP content output stream.
Response.WriteFile(FilePath);
Response.End(); 
```

# c# - 在 WinForms 中调整单个控件的大小

> ID：770094
> 
> 赞同：12
> 
> 时间：2009-04-20T21:09:52.550
> 
> 标签：c#, windows, winforms, user-interface, resize

我如何在 C#/WinForms 中设计一个 UI，它恰好包含几种不同的控件类型，这样如果用户调整窗口大小，只有 ListView 控件会调整大小？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-20T23:54:04.140

有两种主要方法可以使控件根据父容器的大小更改自动调整大小（在您的情况下为 Form）：

1.  将控件的 Dock 属性设置为 DockStyle.Fill。
2.  将 Anchor 属性设置为“上、下、左、右”

### 将 Dock 属性与 Dock.Fill 一起使用

此方法的优点是它获取整个控件并告诉它始终填充父容器的整个客户区（在您的情况下，表单客户区）。如果你想做一些事情，比如用 ListControl 或 TreeView 或类似的东西填充表单，这很有用。但是，如果您想在使用其他控件的同时缩放单个控件（正如您所指示的那样），它就没有那么有用了。在这种情况下，您需要将这些其他控件上的 Dock 属性设置为 DockStyle.Top 或 DockStyle.Bottom 以使它们浮动在主调整大小控件的上方或下方。

这很麻烦，而且还限制了其他控件的布局选项。您可以通过停靠两个面板控件来缓解该问题，一个在顶部，另一个在窗体底部。这些面板将保持在固定位置，而中间区域（使用 DockStyle.Fill 控件）随父窗体缩放。然后，您可以在这些“页眉”和“页脚”面板中的任何布局配置中放置任何控件。

这种使用停靠面板的复合形式构建非常强大。坦率地说，当他们在 .NET 1.0 WinForms 中引入此功能时，.NET 改变了游戏规则。

### 将 Anchor 属性与“上、下、左、右”一起使用

如果您只想在表单比例上拥有一个控件，而其他控件则“卡在”边缘，请使用 Anchor 属性。对于要保持在顶部的控件，请将 Anchor 属性设置为“Top, Left”（默认值）。对于要留在底部的控件，请将 Anchor 属性设置为“Bottom, Left”。对于您希望通过窗体/对话框增加宽度的控件（例如单行文本框控件），将 Anchor 属性设置为“左、右”（并根据您是否希望它作为顶部移动来设置顶部或底部或对话框底部发生变化。

如果您希望控件使用窗体在各个方向调整大小，请将 Anchor 属性设置为“上、左、下、右”。对于“主控件”类型的东西非常有用，例如占主导地位的列表框、树形控件或多行文本框。

对于您需要的东西，不要乱用 AutoSize 或 AutoSizeMode ......这些属性控制控件如何根据自己的内容更改大小，而不是如何根据容器的行为调整大小。将 AutoSize/AutoSize 模式视为向内看，而 Anchor/Dock 则是向外看。如果同时使用这两种尺寸调整方法，您会得到一些非常奇怪的行为。一般没用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-20T21:17:16.747

将 ListView 停靠在窗体的所有四个边上，并将其他控件停靠在 2 个或更少。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-20T21:35:55.080

控件上有一个名为“Anchor”的属性（在“布局”类别中），如果将其设置为“上、下、左、右”，它将保持控件与其父容器之间的边距，从而使其随着容器大小的变化而调整大小。

但是，如果仅启用了沿一个轴的锚点之一（例如“左”，而不是“右”），它将再次移动控件，从而保持控件与其容器之间的锁定边距。

简而言之：正如詹姆斯所说，除了它是“锚”而不是“码头”属性。Dock 类似但不完全相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-29T14:59:41.867

如果我们在表单中有多个控件怎么办？

**例如**：如果一个表格用于在网格中生成一些结果，这些结果与在几个文本框或组合框等中输入的数据有关；我们希望它们相应地调整大小/重新对齐，而不是相互重叠（*就像使用停靠填充时发生的那样*），尤其是在上下文中使用网格视图或类似控件时。 ![替代文字](https://i.stack.imgur.com/aW85I.jpg)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-20T21:15:16.283

如果将 ListView 放在 SplitContainer 的一个面板中，并将其余控件放在另一个面板中，则可以通过设置 min 和 maxsize 来限制第二个面板的增长。

如果您的 ListView 停靠为 Full ，那么在调整表单大小时它将占用所有增量。

# c# - 什么是“？？” 意思是？

> ID：770096
> 
> 赞同：8
> 
> 时间：2009-04-20T21:10:17.370
> 
> 标签：c#

我正在查看 ASP.NET MVC 1.0 生成的代码，并且想知道；双问号是什么意思？

```
// This constructor is not used by the MVC framework but is instead provided for ease
// of unit testing this type. See the comments at the end of this file for more
// information.
public AccountController(IFormsAuthentication formsAuth, IMembershipService service)
{
    FormsAuth = formsAuth ?? new FormsAuthenticationService();
    MembershipService = service ?? new AccountMembershipService();
} 
```

### 有关的：

> [?? 空合并运算符 —> 合并是什么意思？](https://stackoverflow.com/questions/770186/-null-coalescing-operator-what-does-coalescing-mean)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-20T21:11:13.920

这是[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。如果该值不为空，它将返回左侧的值，否则返回右侧的值（即使它为空）。它们通常链接在一起，以默认值结尾。

[查看这篇文章了解更多](http://weblogs.asp.net/scottgu/archive/2007/09/20/the-new-c-null-coalescing-operator-and-using-it-with-linq.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-20T21:12:26.617

意思是一样的

```
If (formsAuth != null)
  FormsAuth = formsAuth;
else
  FormsAuth = FormsAuthenticationService(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T21:11:22.203

它是[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

来自 MSDN

> 这 ？？运算符称为空值合并运算符，用于为可空值类型和引用类型定义默认值。如果它不为空，则返回左操作数；否则返回正确的操作数。
> 
> 可空类型可以包含一个值，也可以是未定义的。这 ？？运算符定义将可空类型分配给不可空类型时要返回的默认值。如果您尝试将可空值类型分配给不可空值类型而不使用 ?? 运算符，您将生成编译时错误。如果您使用强制转换，并且当前未定义可空值类型，则会引发 InvalidOperationException 异常。
> 
> 有关详细信息，请参阅[Nullable 类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)（C# 编程指南）。
> 
> 的结果？？即使它的两个参数都是常量，运算符也不被视为常量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T21:12:09.863

它是空合并运算符。如果左边的值为空，那么它将返回右边的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-20T21:10:57.557

如果 formsAuth 为 null，则返回右侧的值（ new FormsAuthenticationService() ）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-20T21:11:22.283

这意味着：如果它不是 NULL，则返回第一个值（例如“formsAuth”），否则返回第二个值（新 FormsAuthenticationService()）：

马克

# imap - 什么是用于开发的好的邮件服务器？

> ID：770098
> 
> 赞同：19
> 
> 时间：2009-04-20T21:10:29.663
> 
> 标签：imap, pop3, mail-server

我正在做一些涉及对电子邮件做出反应的开发，我想为此使用本地 IMAP 邮件服务器。

我目前使用[Devnull SMTP 服务器](http://www.aboutmyip.com/AboutMyXApp/DevNullSmtp.jsp)来测试*发送*电子邮件，但这只是记录和丢弃消息，它不会执行 IMAP 来检查*传入*的电子邮件/邮箱。

我不需要/想要一个成熟的服务器，只是一些我可以根据需要轻松启动/停止的轻量级服务器。

多平台是首选，但也可以随意为特定平台提供答案。

（基于 POP3 的服务器也可以用于开发用途，因为无论如何我都会在我的代码中同时支持这两者。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-20T21:46:03.480

看看[hMailServer](http://www.hmailserver.com/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-09-20T07:07:26.667

我认为[JAMES](http://james.apache.org)是最适合开发的邮件服务器。而且它也很便携。完全用Java编写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T21:26:51.263

Mercury Mail Server 是一个功能齐全的邮件服务器（减去 webmail），但是它非常轻巧，应该可以满足您的需求：[Mercury Mail Server](http://www.pmail.com/overviews/ovw_mercury.htm)

编辑：只忘了提及 Windows/Netware

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T22:05:42.823

查看[courier](http://www.courier-mta.org)以获取基于 unix 的机器。我已经在 linux 机器上运行了一段时间，它非常好。您可以轻松启用/禁用您想要的功能，包括 SMTP、POP、IMAP、SMTP Auth、协议的 SSL 版本等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-07T20:34:50.017

exim 即使通过 cygwin 在 Windows 中也能很好地工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T10:50:16.390

Mdaemon 是一个优秀的windows MTA。也有很多充分的理由在生产中使用它。另一个不同的选择是在服务器模式下使用 Gammadyne 邮件程序。

*   [http://www.altn.com/products/mdaemon-email-server-windows/](http://www.altn.com/products/mdaemon-email-server-windows/)
*   [http://www.hmailserver.com/](http://www.hmailserver.com/)
*   [http://www.gammadyne.com/gm-list_management.htm](http://www.gammadyne.com/gm-list_management.htm)

# ruby-on-rails - 在一台机器上运行多个 Web 框架？

> ID：770099
> 
> 赞同：3
> 
> 时间：2009-04-20T21:10:29.803
> 
> 标签：ruby-on-rails, servlets, frameworks

我想开始尝试所有这些可用的不同 Web 框架。我想知道它们是否可以同时在一台机器上运行？

我知道我所有的数据库服务都可以与 Javascript 框架一起同时运行，但是像 Rails 和 Java 应用程序这样的东西呢？可以一起玩吗？Apache 会为我处理所有这些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T21:21:10.607

是的，因为几乎所有语言框架都作为该语言的普通代码运行，只需为您编写的应用程序提供结构，它们就可以与相同或其他语言的其他框架很好地共存。你当然可以在同一台机器上运行 Rails 和 Java 框架——你甚至可以在 JRuby 和 Java 应用服务器上运行 Rails

听起来你才刚刚开始编程。我建议先学习一些基础知识。例如，如果您想学习 Ruby，请尝试[Pickaxe 书](http://www.pragprog.com/titles/ruby/programming-ruby)，编写一些简单的脚本，然后继续使用像 Sinatra 或 Rails 这样的 Ruby Web 框架。您将更好地理解语言和框架之间的区别，以及它们是如何在您的机器上安装和运行的，等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T21:22:07.110

开始试验的最简单方法是使用包含在各种框架中的开发服务器，并在不同的端口（不是 80）上运行服务器。对于 Rails，这是通过以下方式完成的：

```
ruby script\server 
```

这将在端口 3000 上启动服务器。

其他框架使用其他方法。大多数 Ruby 和 Python 框架的教程（我最熟悉的）都将包含有关如何启动这样的开发服务器的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T11:09:12.393

PHP, Java and Rails all have environments that let you run independent servers and save complex configuration.

*   Java you can use Tomcat or Jetty.
*   Rails comes with Webrick, which is fine for development.
*   PHP has XAMPP (or MAMP if your on the Mac) gives you a complete stack.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T21:22:12.193

我不明白为什么不。这实际上取决于框架的部署方式以及在哪些容器中。如果他们使用单独的容器（例如 tomcat vs apache），您需要确保将容器配置为使用不同的端口，因为许多 Web 容器使用`80`或`8080`.

如果您计划在同一个容器（例如 Apache）中运行它们，那么我认为它们会很好，因为每个都可以被视为一个单独的 Web 应用程序并部署到文档根目录中的不同位置。

在大多数情况下，这可能是反复试验。我不太了解 Rails 如何与 Java 交互，但我自己很容易地同时运行 Grails 和 Java 应用程序，几乎没有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T19:09:14.907

我在同一台机器上运行 Rails 和 ASP.NET MVC，我只是将本地服务器设置为在不同的端口上运行。但通常默认设置（例如端口 3000 上的 Rails）不会相互冲突，而且每个框架通常都有自己的运行方式（LAMP、Webrick、Montgrel...）所以你应该没问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-20T21:26:35.960

我使用一台 Apache 服务器运行 Rails、PHP 和 Java。除了当我设置它时感觉像大量的 apache 配置，一切都很好。我不是一个系统管理员，所以我花了几天时间才让一切正常运行。

# java - classloader.getSystemResourceAsStream 返回 null

> ID：770107
> 
> 赞同：6
> 
> 时间：2009-04-20T21:11:49.113
> 
> 标签：java, properties, classloader

我正在尝试加载属性文件而不使用文件的实际路径。我已经在其他一些简单的应用程序上使用：

```
InputStream inputStream = ClassLoader.getSystemResourceAsStream(PROPERTIES_FILE);
props.load(inputStream); 
```

但这一次它不起作用。inputStream 出于某种原因为空。PROPERTIES_FILE 是一个定义为“app.properties”的常量。我试图删除 .properties 扩展名并得到相同的结果。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-20T21:15:16.610

PROPERTIES_FILE 常量应该包括包和属性文件（例如“com/some/library/file.properties”。

```
 final static String PROPS_FILE = "/com/some/library/file.props";
                     //The preceding  "/" is dependendant on wheterh 
                     //you are going to be giving a relative or absolute location
    InputStream is = YourCurrentClass.class.getResourceAsStream(PROPS_FILE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-20T21:15:19.933

[`getSystemResourceAsStream`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String))返回时`null`，表示资源未找到。确保请求的资源确实位于指定位置的类路径上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-23T16:54:41.043

遇到了同样的问题。

原因：我将`DAO`包重命名为`dao`. 爆炸时`artifact`，目录`DAO`不会被覆盖。

所以我进入`dao`了项目内部和`DAO`文件系统：facepalm：

# css - 如何在 div 块中直观地扩展 HTML 元素？

> ID：770114
> 
> 赞同：0
> 
> 时间：2009-04-20T21:12:35.867
> 
> 标签：css, html

我已经使用 div 块拆分了我的 HTML 页面。在其中一个 div 块中，我创建了一个表。我希望这张桌子的宽度扩展到所有可用空间。

2 个问题： A) 如果我将表格的宽度设置为 100%，它似乎会扩展到整个页面的大小，而不是 div 块。B) 此外，它似乎没有被父 div 块剪切（即它溢出）。

如果我使用框架，这个问题就会消失......但我不想使用框架。

有人有使用 HTML/CSS 的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T21:15:06.267

您需要容器 div 的静态宽度：

```
div.container { width: 400px; overflow: hidden; }
div.container table { width: 100%; }

<div class="container">
  <table><tr><td>something</td></tr></table>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-20T21:15:44.190

您可能希望将表的`position`css 属性设置`relative`为以使相对大小起作用。

# python - Python Cmd 模块，子类化问题

> ID：770134
> 
> 赞同：7
> 
> 时间：2009-04-20T21:18:36.993
> 
> 标签：python

我正在尝试找出这段代码中不起作用的地方：

```
#!/usr/bin/python

import cmd

class My_class (cmd.Cmd):
    """docstring for Twitter_handler"""
    def __init__(self):
        super(My_class, self).__init__()

if __name__ == '__main__':
    my_handler = My_class() 
```

这是我得到的错误

```
Traceback (most recent call last):
  File "main.py", line 12, in <module>
    my_handler = My_class()
  File "main.py", line 9, in __init__
    super(My_class, self).__init__()
TypeError: super() argument 1 must be type, not classobj 
```

如果我将“My_c​​lass”的超类更改为一个对象，它工作正常。我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-20T21:30:39.927

[super()](http://docs.python.org/library/functions.html#super)仅适用于[新式类](http://docs.python.org/reference/datamodel.html#newstyle)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-20T21:32:19.330

cmd.Cmd 不是 Python 2.5、2.6、2.7 中的新样式类。

请注意，您的代码在 Python 3.0 中*不会*引发异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-01T16:57:43.313

因此，如果[super()](http://docs.python.org/library/functions.html#super)不起作用，请使用：

```
import cmd

class My_class(cmd.Cmd):
    def __init__(self):
        cmd.Cmd.__init__(self) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-02T15:08:36.130

`super()`如果您的`MyClass`extends ，您仍然可以使用`object`。即使`cmd.Cmd`模块*不是*新式类，这也有效。像这样：

```
#!/usr/bin/python

import cmd

class My_class (cmd.Cmd, object):
    """docstring for Twitter_handler"""
    def __init__(self):
        super(My_class, self).__init__()

if __name__ == '__main__':
    my_handler = My_class() 
```

# php - 检查 PHP 中的 If Then 语句

> ID：770135
> 
> 赞同：5
> 
> 时间：2009-04-20T21:18:39.347
> 
> 标签：php, if-statement

当我写一个 if 语句时，我让它检查一个变量，如下所示：

```
if(isset($_GET['username']){
 echo "set";
 } else {
 echo "unset";
} 
```

我怎样才能让我的 if 语句来检查两个变量是否设置与此类似：

```
if(isset($_GET['username'] & $_GET['firstname'])){
 echo "set";
 } else {
 echo "unset";
} 
```

所以基本上我如何一次检查 if 语句中的两件事？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-20T21:20:53.850

查看有关[控制结构](http://www.php.net/manual/en/control-structures.if.php)和[逻辑运算符](http://www.php.net/manual/en/language.operators.logical.php)的 PHP 手册：

```
if(isset($_GET['username']) && isset($_GET['firstname'])) {
    echo "set";
} else {
    echo "unset";
} 
```

使用 single`&`正在执行[按位运算](http://www.php.net/manual/en/language.operators.bitwise.php)，这肯定不是您想要的。

`and``&&`正如其他答案所示，它也是语法的同义词。

**编辑**：正如评论中所指出的，您可以通过将两个变量都传递给 isset 函数来检查它们是否被 isset。但是，如果您想要执行其他类型的操作，则需要执行上面的逻辑运算符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T02:21:04.923

```
if ( isset($_GET['username'], $_GET['firstname']) ) {
    echo 'Set!';
} 
```

[isset](http://php.net/isset)接受多个参数，如果提供了多个参数，则仅当设置了所有参数时 isset() 才会返回 TRUE。评估从左到右进行，并在遇到未设置的变量时立即停止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T21:22:23.300

```
if ( isset($_GET['username']) && isset($_GET['firstname']) ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-20T21:22:04.627

尝试使用 && 运算符（逻辑与）而不是 &（二进制与）

因此，如果 isset 对两者都返回 true，则 if 返回 true，否则 if 将返回 false。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-20T21:24:39.600

是的，或者

echo ( (isset($_GET['username']) && isset($_GET['firstname'])) ? "set" : "unset" );

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-20T21:20:44.180

```
if (isset($_GET['username']) AND isset($_GET['firstname']))
{
    echo "set";
}
else
{
    echo "unset";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-20T21:22:03.410

```
if (isset($_GET['username']) && isset($_GET['firstname']))
{ 
    echo "set"; 
} 
else 
{ 
    echo "unset"; 
} 
```

供参考：[PHP 的运算符](http://www.php.net/manual/en/language.operators.php)

# f# - F# 中带有接口的泛型

> ID：770143
> 
> 赞同：8
> 
> 时间：2009-04-20T21:21:17.220
> 
> 标签：f#, interface, generics

在 C# 中，可以声明泛型参数必须实现某个接口，如下所示：

```
public class Something<T> where T : IComparable
{
    ...
} 
```

如何在 F# 中指定这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-20T22:12:40.153

通用约束在 F# 中使用“when”：

```
type Foo<'a when 'a :> IComparable> = 
  member x.Bla = 0 
```

# java - Google AppEngine/Java 和现有数据库

> ID：770146
> 
> 赞同：4
> 
> 时间：2009-04-20T21:21:30.107
> 
> 标签：java, google-app-engine

有没有办法将数据库内容上传到 Google App Engine for Java，比如 Python 版本中的批量上传器脚本？如果不是，您将如何将现有数据导入您的 GAE/J 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T09:31:50.350

您可以使用 Python 上传器为您的 Java 应用程序上传数据。首先，在包含以下内容的空目录中创建一个 app.yaml：

```
application: yourappid
version: upload
runtime: python
api_version: 1
handlers:
    - url: /remote_api
      script: $PYTHON_LIB/google/appengine/ext/remote_api/handler.py
      login: admin 
```

然后，使用“appcfg.py 更新”。在那个目录中。现在您可以使用“bulkloader.py”批量加载工具，将其指向upload.latest.yourappid.appspot.com。由于多个主要版本可以同时运行，并且应用程序的所有版本共享同一个数据存储区，因此您可以使用 Python 批量上传器，同时仍以 Java 运行您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T22:13:24.240

据我所知，仅有的两个选项是：

1.  [批量加载.py](http://code.google.com/appengine/docs/python/tools/uploadingdata.html)
2.  [盖巴](http://aralbalkan.com/1837)

正如您所指出的，两者都是面向 python 的。我还没有看到 GAE/J 的类似等价物。

# background - PyQt - 透明背景

> ID：770160
> 
> 赞同：5
> 
> 时间：2009-04-20T21:24:14.997
> 
> 标签：background, pyqt, transparent

我尝试使窗口的背景透明。但是在它上面的小部件下，我看到了我的桌面图像的一部分。现在我在构造函数中有这个：

> ```
>  self.setFocusPolicy(Qt.StrongFocus)
>     self.setAttribute(Qt.WA_QuitOnClose,True)
> 
>     self.setBackgroundRole(QtGui.QPalette.Base)
>     self.setAttribute(Qt.WA_NoSystemBackground) 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T22:32:24.927

我刚刚发现[了这个](https://doc.qt.io/qt-4.8/qwidget.html#creating-translucent-windows)：

> ## 创建半透明窗口
> 
> 从 Qt 4.5 开始，可以在支持合成的窗口系统上创建具有半透明区域的窗口。
> 
> 要在顶级小部件中启用此功能，请使用 setAttribute() 设置其 Qt::WA_TranslucentBackground 属性，并确保在您希望部分透明的区域中使用非不透明颜色绘制其背景。

PyQt 仍然是 Qt 4.4，也许这就是问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T21:31:03.017

试试这个为你的小部件：

```
widget.setAutoFillBackground(True) 
```

我想你也可以在 Qt Designer 中设置它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T00:22:19.087

除了 gs 的回答，此常见问题解答解释了为什么（在 Qt 4.5 之前）您无法实现此目的：

[常见问题链接：](http://www.qtsoftware.com/developer/faqs/faq.2007-02-08.3940505976)

> 不直接支持部分透明，其中窗口是透明的，并且窗口上的小部件不在 Qt 中。

请记住，PyQt 的最新版本是针对 Qt 4.4 创建的，因此不支持您想要的半透明窗口。gs 的另一个答案，关于 setAutoFillBackground(True) 如果您将主窗口的背景颜色设置为透明以外的任何颜色，则将起作用。

另外，请参阅 Qt.WA_NoSystemBackground 的文档，它说您不能依赖您迄今为止所拥有的透明效果：

[Qt::WA_NoSystemBackground](http://doc.trolltech.com/4.4/qt.html#WidgetAttribute-enum)

> 表示小部件没有背景，即小部件接收到绘制事件时，不会自动重新绘制背景。注意：与 WA_OpaquePaintEvent 不同，新暴露的区域永远不会被背景填充（例如，在第一次显示窗口后，用户可以“透过”它看到，直到应用程序处理绘制事件）。这是由小部件的作者设置/清除的。

# php - 操作多维数组的结构

> ID：770161
> 
> 赞同：0
> 
> 时间：2009-04-20T21:24:21.487
> 
> 标签：php, arrays

这实际上是一个我已经解决的问题，但我怀疑可能有更好的解决方案。我有一个嵌套数组，它基本上表示类别树中所有节点的列表（无特定顺序）：

```
Array(
    [0] => Array(
        [Category] => Array(
            [id] => 49
            [name] => Poster
        )
        [Child] => Array()
    )
    [1] => Array(
        [Category] => Array(
            [id] => 48
            [name] => Sticker
        )
        [Child] => Array()
    )
    [2] => Array(
        [Category] => Array(
            [id] => 46
            [name] => Hat
        )
        [Child] => Array()
    )
    [3] => Array(
        [Category] => Array(
            [id] => 45
            [name] => Hoodie
        )
        [Child] => Array()
    )
) 
```

您会注意到`$node['Child']`在所有情况下它都是一个空数组。这是因为我已经习惯`array_filter()`了过滤掉所有非叶节点。尽管如此，我最终想要的是拥有一个叶节点的一维数组，如下所示：

```
Array(
    [49] => Poster
    [48] => Sticker
    [46] => Hat
    [45] => Hoodie
) 
```

**那么将第一个数组转换为第二个数组的最优雅的方法是什么？**

或者，您也可以从一个包含叶节点和非叶节点的数组开始，并尝试修剪该数组并对其进行重组。非叶节点的示例如下：

```
[7] => Array(
    [Category] => Array(
        [id] => 36
        [name] => Merch
    )
    [Child] => Array(
        [0] => Array(
            [id] => 49
            [name] => Poster
        )
        [1] => Array(
            [id] => 48
            [name] => Sticker
        )
        [2] => Array(
            [id] => 40
            [name] => Apparel
        )
    )
) 
```

最后，我使用的是 CakePHP，所以使用 CakePHP 的`Set`类也是可以接受的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T21:29:48.587

优雅的？定义优雅。我认为有些人会将其变成一场高尔夫比赛，而不是简单地做有意义的事情，并且对于以后偶然发现代码的任何人来说都是显而易见的：

```
$cats = array();
foreach($categories as $c) {
    $cats[$c['Category']['id']] = $c['Category']['name'];
} 
```

我怀疑这就是你所拥有的，在这种情况下，我建议你拍拍自己的后背继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T21:38:38.927

这个答案无论如何都不是“优雅的”，但我想它可能属于“聪明”的范畴。（注意：聪明的解决方案并不总是“好”的解决方案）

```
preg_match_all( "/\"name\";s:\d+:\"(.*?)\"/i", serialize( $arr ), $matches );

print_r( $matches[1] ); 
```

老实说，递归迭代是清晰的最佳选择，即使它不是非常有效或简洁。

```
$arr = array(
    "0" => array(
        "Category" => array(
            "id" => 49
            ,"name" => Poster
        )
        ,"Child" => array()
    )
    ,"1" => array(
        "Category" => array(
            "id" => 48
            ,"name" => Sticker
        )
        ,"Child" => array()
    )
    ,"2" => array(
        "Category" => array(
            "id" => 46
            ,"name" => Hat
        )
        ,"Child" => array()
    )
    ,"3" => array(
        "Category" => array(
            "id" => 45
            ,"name" => Hoodie
        )
        ,"Child" => array(
            "0" => array(
                "id" => 49
                ,"name" => Poster
            )
            ,"1" => array(
                "id" => 48
                ,"name" => Sticker
            )
            ,"2" => array(
                "id" => 40
                ,"name" => Apparel
            )
        )
    )
);

findNames( $arr, $names );
echo '<pre>';
print_r( $names );
echo '</pre>';

function findNames( $source, &$out )
{
    foreach ( $source as $value )
    {
        if ( isset( $value['name'] ) )
        {
            //  Assumes that if $value['name'] exists, $value['id'] must also exist
            $out[$value['id']] = $value['name'];
            continue;
        }
        if ( is_array( $value ) )
        {
            findNames( $value, &$out );
        }
    }
} 
```

# .net - 有哪些工具可用于生成密钥对、向 SCEP 注册、用于 .Net 上的 TLS 服务器？

> ID：770164
> 
> 赞同：4
> 
> 时间：2009-04-20T21:25:27.287
> 
> 标签：.net, compact-framework, cryptography, ocsp

我正在使用的规范要求生成密钥对并通过 SCEP 将证书自动注册到指定的服务器，并用作 TLS 服务器和客户端证书，并通过对方的 OCSP 验证。.Net 有没有可用的工具来做这种事情？

纯托管代码和 Compact Framework 支持将是一件好事，因为我正在尝试生成一个统一的 MSIL 二进制文件，该二进制文件无需修改即可在 CF/ARMv4i、.Net/x86 和 .Net/x64 上运行，但仅适用于 .Net /x86 在短期内很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-12-27T11:05:58.240

据我所知，EldoS 的 SecureBlackbox 实现了这样的功能，但它是商业产品。还有一些免费的组件（例如 BouncyCastle）。但是，它们中没有一个实现 SCEP，因此您需要这样做。

# windows - 如何使用 Perl 从 8.3 DOS 路径获取完整的 Win32 路径？

> ID：770171
> 
> 赞同：2
> 
> 时间：2009-04-20T21:27:06.940
> 
> 标签：windows, perl, dos

我的问题基本上说明了一切。我得到这个：

```
C:\DOCUME~1\frew\MYDOCU~1\Code\AIRCRA~1\lib\ACD\VALIDA~1.PM 
```

我想要这个：

```
C:\Documents and Settings\frew\My Documents\Code\aircraft_ducting\lib\ACD\Validators.pm 
```

我查看了 File::Spec::Win32 ，但似乎没有任何可以解决问题的方法。

想法？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-20T21:33:43.227

您可以[`Win32::GetLongPathName($path)`](http://search.cpan.org/dist/Win32/Win32.pm#Win32::GetLongPathName%28PATHNAME%29)从`Win32`模块中使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-20T21:38:36.227

[`Win32::GetLongPathName()`](http://search.cpan.org/~jdb/Win32-0.39/Win32.pm#Win32::GetLongPathName%28PATHNAME%29)是你所需要的全部。

# c# - 如何使用进程 ID 获取 Excel 实例或 Excel 实例 CLSID？

> ID：770173
> 
> 赞同：13
> 
> 时间：2009-04-20T21:27:57.453
> 
> 标签：c#, excel

我正在使用 C#，我需要通过进程 ID 获取特定的 excel 实例；我从另一个应用程序中获得了我需要的实例的进程 ID，但我不知道还能做什么，我不知道如何在给定他的进程 ID 的情况下获取正在运行的 excel 实例。

我在网上做了很多研究，但我只看到了使用 Marshal.GetActiveObject(...) 或 Marshal.BindToMoniker(...) 的示例，因为第一个返回第一个 Excel 实例，所以我无法使用在 ROT 中注册，而不是我需要的那个，第二个要求您在尝试获取实例之前保存 excel 文件。

此外，如果我能够使用进程 ID 获取我需要的 excel 实例的 CLSID，那么我可以调用

```
GetActiveObject(ref _guid, _ptr, out objApp);
```

最终将返回我需要的 excel 实例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-20T22:11:34.573

通过进程 ID 识别进程后，您可以获取[Process.MainWindowHandle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowhandle.aspx)，然后将其与[AccessibleObjectFromWindow API](http://msdn.microsoft.com/en-us/library/dd317978(VS.85).aspx)一起使用以访问该进程的 Excel 对象模型。

Andrew Whitechapel的文章[在 Shimmed Automation Add-in 中获取应用程序对象](http://blogs.officezealot.com/whitechapel/archive/2005/04/10/4514.aspx)详细描述了此技术以及示例代码。

该文章中的关键代码从以下行开始：

```
int hwnd = (int)Process.GetCurrentProcess().MainWindowHandle 
```

在您的情况下，它可能看起来更像：

```
int excelId = 1234; // Change as appropriate!
int hwnd = (int)Process.GetProcessById(excelId).MainWindowHandle 
```

其中“excelId”是您要查找的进程 ID 号。否则，代码应该与文章中给出的基本相同。（忽略他的代码是为加载项编写的这一事实；这方面不会影响您在这里的需求，所以请忽略它。）

如果您没有进程 ID，那么您可能想要使用[Process.GetProcessesByName](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getprocessesbyname.aspx)，这样您就可以根据需要枚举每个并通过访问对象模型来控制每个 Excel 实例。

希望这可以帮助，

麦克风

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T22:03:46.963

ROT 条目没有用 CLSID 标记。ROT 从 Register 返回一个 DWORD，用作 Unregister 的标识符。我以前遇到过这个问题，我解决它的唯一方法是将某种加载项加载到每个 Excel 中，您可以直接与之通信。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-04-20T21:39:49.127

```
using System.Diagnostics;

   var eProcess = from p in Process.GetProcessesByName("EXCEL")
                   where p.Id == 3700 //whatever Id you have...
                   select p;

    foreach (var process in eProcess)
        process.Kill(); 
```

这将获取名为“EXCEL”的所有进程，其中进程 ID 等于特定值。

# php - PHP / Curl：HEAD Request 在某些网站上需要很长时间

> ID：770179
> 
> 赞同：25
> 
> 时间：2009-04-20T21:29:50.583
> 
> 标签：php, curl, http-headers, header, performance

我有一个简单的代码，它对 URL 进行头请求，然后打印响应头。我注意到在某些网站上，这可能需要很长时间才能完成。

例如，请求`http://www.arstechnica.com`大约需要两分钟。我使用另一个执行相同基本任务的网站尝试了相同的请求，它立即返回。所以一定有一些我设置不正确的东西导致了这个延迟。

这是我的代码：

```
$ch = curl_init();
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 20);
curl_setopt ($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);

// Only calling the head
curl_setopt($ch, CURLOPT_HEADER, true); // header will be at output
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'HEAD'); // HTTP request is 'HEAD'

$content = curl_exec ($ch);
curl_close ($ch); 
```

以下是具有相同功能的网站的链接：[http ://www.seoconsultants.com/tools/headers.asp](http://www.seoconsultants.com/tools/headers.asp)

上面的代码，至少在我的服务器上，需要两分钟才能检索 www.arstechnica.com，但上面链接中的服务会立即返回它。

我错过了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-04-20T21:35:48.307

尝试简化一点：

```
print htmlentities(file_get_contents("http://www.arstechnica.com")); 
```

以上输出立即在我的网络服务器上。如果它不在您的范围内，那么您的虚拟主机很有可能进行了某种设置来限制此类请求。

**编辑**：

由于上述情况会立即发生，请尝试在原始代码上设置[此 curl 设置：](http://www.php.net/manual/en/function.curl-setopt.php)

```
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true); 
```

使用您发布的工具，我注意到`http://www.arstechnica.com`发送给它的任何请求都有一个 301 标头。cURL 可能会得到这个并且没有遵循为其指定的新位置，从而导致您的脚本挂起。

**第二次编辑**：

奇怪的是，尝试与上面相同的代码也使我的网络服务器挂起。我替换了这段代码：

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'HEAD'); // HTTP request is 'HEAD' 
```

有了这个：

```
curl_setopt($ch, CURLOPT_NOBODY, true); 
```

这是[手册](http://www.php.net/manual/en/function.curl-setopt.php)建议您执行 HEAD 请求的方式。它使它立即工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-20T22:11:52.950

您必须记住 HEAD 只是对 Web 服务器的建议。为了让 HEAD 做正确的事情，管理员通常需要付出一些明确的努力。如果你 HEAD 一个静态文件，Apache（或任何你的网络服务器）通常会介入并做正确的事情。如果你 HEAD 一个动态页面，大多数设置的默认设置是执行 GET 路径，收集所有结果，然后只发回没有内容的标题。如果该应用程序处于 3 层（或更多）层设置中，则该调用可能非常昂贵且对于 HEAD 上下文是不必要的。例如，在 Java servlet 上，默认情况下 doHead() 只调用 doGet()。要为应用程序做一些更智能的事情，开发人员必须显式地实现 doHead() （而且往往不会）。

我遇到了一家财富 100 强公司的应用程序，用于下载数百兆字节的定价信息。我们会通过相当定期地执行 HEAD 请求来检查该数据的更新，直到修改日期发生变化。事实证明，每次我们发出请求时，该请求实际上都会进行后端调用以生成该列表，该请求在其后端涉及千兆字节的数据，并在多个内部服务器之间传输。他们对我们不是很满意，但是一旦我们解释了用例，他们很快就想出了一个替代解决方案。如果他们实施了 HEAD，而不是依靠他们的 Web 服务器来伪造它，那将不是问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-20T21:41:42.087

如果我的记忆没有失败，我在 CURL 中执行 HEAD 请求会将 HTTP 协议版本更改为 1.0（这很慢，可能是有罪的部分）尝试将其更改为：

```
$ch = curl_init();
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 20);
curl_setopt ($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);

// Only calling the head
curl_setopt($ch, CURLOPT_HEADER, true); // header will be at output
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'HEAD'); // HTTP request is 'HEAD'
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1); // ADD THIS

$content = curl_exec ($ch);
curl_close ($ch); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-23T12:47:16.087

我使用下面的函数来找出重定向的 URL。

```
$head = get_headers($url, 1); 
```

第二个参数使它返回一个带有键的数组。例如，下面将给出`Location`值。

```
$head["Location"] 
```

[http://php.net/manual/en/function.get-headers.php](http://php.net/manual/en/function.get-headers.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-01T17:53:57.313

这：

```
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1); 
```

我不是想得到标题。
我只是想让一些数据的页面加载不需要 2 分钟，类似于上面描述的。
那个神奇的小选项已经把它降到了 2 秒。

# c# - ?? 空合并运算符 --> 合并是什么意思？

> ID：770186
> 
> 赞同：58
> 
> 时间：2009-04-20T21:31:31.500
> 
> 标签：c#, terminology, coalesce, null-coalescing-operator

我很想撒谎说英语是我的第二语言，但事实是我根本不知道“合并”是什么意思。我知道`??`C# 中“做什么”，但这个名字对我来说没有意义。

我查了这个词，我明白它是“加入”的同义词。“空连接运算符”仍然没有意义。

有人可以启发我吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-04-20T21:35:54.080

> 我很想撒谎说英语是我的第二语言……但事实是我只是不知道“合并”是什么意思。我知道什么？？'does' 在 C# 中，但这个名字对我来说没有意义。
> 
> 我查了这个词，我明白它是“加入”的同义词。

我想说对“合并”更准确的描述是“从不同的元素形成一个东西”。发生运算符的“合并”是`??`因为始终从两个值之一解析单个值。第一个非空值是结果。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-04-20T21:37:37.023

*合并*是指您拥有多个项目，然后您最终只得到一个项目 - 通过将这些项目连接在一起或从组中选择一个项目。的情况下*？？*运算符，您正在选择这对值的第一个非空值。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-20T21:38:18.380

这里有一些其他的定义`coalesce`可能有助于理解。从[Answers](http://www.answers.com/coalesce)中可以看出，它的意思是“一起成长；融合”或“聚在一起，形成一个整体”。换句话说，取出一系列项目并从中做出一个。所以考虑到`null`在这个讨论中意味着“空”，`null`与非空合并给你非空。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-20T21:33:07.723

意思是取第一个非空值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-24T16:53:23.327

您可以从这个 youtube 视频开始[http://www.youtube.com/watch?v=YJGGmTNHPeo](http://www.youtube.com/watch?v=YJGGmTNHPeo)

如果您看到合并的英文意思，它表示“合并在一起”。合并运算符从链中返回第一个 NON-NULL 值。

例如下面是一个简单的合并代码，它链接了四个字符串。因此，如果“str1”为空，它将尝试“str2”，如果“str2”为空，它将尝试“str3”，依此类推，直到找到一个非字符串-空值。

```
string final =str1 ??  str2 ?? str3 ?? 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-20T21:39:05.477

[http://www.merriam-webster.com/dictionary/coalesce](http://www.merriam-webster.com/dictionary/coalesce)

我认为最好的定义是“为了一个共同的目标而团结起来”。所以基本上把它放在一起以获得最好的。在编程术语中，获得第一个最好的项目更多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-20T15:17:42.543

*Coalescing*一词源自拉丁语，意思是“连接在一起”。特别是它在物理化学中指的是一种现象，其中分散在另一种不混溶液体中的液体小滴倾向于加入较大的滴，形成较大的聚集体；这被称为“聚结”。

在 C# 上下文中，对于扩展，这种“连接”发生在变量之间，这要`null coalescing operator`归功于.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-04T00:45:31.120

这是一个非常古老的问题，但我想添加一个答案。

而且我认为 C# 语言设计者从 T-SQL 函数[COALESCE](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/coalesce-transact-sql?view=sql-server-ver15)中得到了这个词。

[在英语 Stack Exchange 上对“ SQL 中合并的含义](https://english.stackexchange.com/questions/372493/the-meaning-given-to-coalesce-in-sql#comment871949_372496)”问题的评论在我看来很好地解释了 SQL 中函数的含义：

> SQL 函数实际上是 null-coalescence 的简写。我会说这是完全正确的：null-coalescence 是此处突出显示的含义的子类型。不同之处仅在于用于形成结果整体的两个元素不是这样组合，而是比较和选择：如果第一个元素为 NULL（即纯虚无），则忽略它；否则，第二个元素被忽略。 **所以本质上它“合并”（包含）null 到另一个元素中。** 这有点延伸了原始含义，但似乎确实是基于它的发展。

# java - 有没有所谓的自运行应用程序？

> ID：770195
> 
> 赞同：1
> 
> 时间：2009-04-20T21:34:24.507
> 
> 标签：java, .net, c, security

我需要创建一个应用程序“dll、脚本或 exe”，当用户使用他的 ftp 在其服务器上的文件夹上上传时，它将自动在当前文件夹上运行并在文件夹图像中进行一些图像处理，
我的问题是如何做这样的事情，用户不需要在他的服务器上配置任何东西，他想要的只是上传到正确的文件夹中，它会自动运行并继续运行
有可能吗？怎么做？使用哪种语言？

**更新：**我的目标是共享托管服务器，用户无法配置他的服务器操作系统，关于操作系统，让我们开始说它只是 windows。
我知道“不可能”可能是正确的答案，“它是病毒”可能是另一个答案，我只是想知道它是否可能或者我应该以另一种新的方式思考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T22:13:11.683

我在这个问题中读到的所有内容都在尖叫“安全漏洞利用”。由于这是托管公司确保不会发生的主要事情之一，我会说你完成这项工作的机会非常渺茫。

但是，如果它是一个启用了 CGI 或 PHP 之类的 Web 服务器，您可以通过在可以运行的地方上传 CGI 或 PHP 脚本来利用它，然后通过浏览器调用它，从而执行您需要的任何文件操作... 安全模式、保留或虚拟目录之类的东西可能会妨碍您，但我认为这样做的机会更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T21:36:32.050

嗯...这是 Windows 还是 Linux 机器？如果这是在 Windows 上，我会说创建一个 C# 服务，它使用 FileSystemWatcher 来侦听对 FTP 文件夹的更改并进行处理。作为一项服务，它没有用户界面，可以在启动时自动运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-21T11:53:45.177

就在这里！

[http://en.wikipedia.org/wiki/Self_(programming_language)](http://en.wikipedia.org/wiki/Self_(programming_language))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T21:38:11.953

我能想到的一种方法是使用 C# 目录监视器。因此，每当它发现在文件夹中创建了一个文件时，它就会打开它，检查文件类型并在它是可执行文件时执行它。但是，您必须注意不完整的文件上传。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T21:59:44.273

> *用户不需要在他的服务器上配置任何东西*

这个要求的理由是什么？

进行初始配置有什么问题？

目标服务器是什么？是linux，window，两者都有吗？

请更具体。

# command-line - 如何从命令行查找文本文件中的唯一行？

> ID：770199
> 
> 赞同：13
> 
> 时间：2009-04-20T21:35:42.163
> 
> 标签：command-line, cygwin

我想知道如何从文本文件中提取唯一行列表。最好通过 Cygwin。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-20T21:38:55.320

排序 -u 文件 > new_file

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-20T21:40:28.827

你的问题有点不清楚。如果要消除文本文件中的所有重复行，可以执行以下操作：

```
cat file.txt | sort | uniq 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-20T21:58:36.990

由于最初的问题引用了[Cygwin](http://www.cygwin.com/)，这是 Windows 特定的，我会提到[Luis 的](https://stackoverflow.com/questions/770199/how-to-find-unique-lines-in-a-text-file-from-command-line/770213#770213)答案与使用[Win32 的 GNU 实用程序](http://unxutils.sourceforge.net/) `sort`一样有效。当我在不想安装 Cygwin 的机器上工作时，我使用 USB 密钥上的 GNU 端口，或者下载和安装 Cygwin 对于我要解决的问题来说似乎过于繁重。

# c# - 使用 Sql Server Compact 的断开数据 Windows 程序

> ID：770206
> 
> 赞同：1
> 
> 时间：2009-04-20T21:37:34.700
> 
> 标签：c#, .net, windows, sql-server-2005, sql-server-ce

我将需要创建一个小型 Windows 应用程序来存储有关人员的基本数据。

要求是：

1.  招聘人员进入现场并收集有关他们与之交谈的人的人口统计数据。
2.  招聘人员返回“家”并将他们收集的数据贡献给主数据库（SQL Server 2005）。

这是我第一次做这样的事情。所以我只是在寻找建议。我知道我想使用 C# 来构建 Windows 应用程序并且使用 .net 3.5 没有问题。

我认为存储数据的好地方是 SQL Server Compact Edition 数据库。

就我而言。我主要构建 ASP.net 网络表单，所以这对我来说有点偏离（但这是一件好事）。

你会如何解决这个问题？我对如何将本地数据输入大数据库特别感兴趣？.net 或 sql server 是否有任何工具可以让这变得简单？欢迎任何建议和考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T21:40:29.140

我将从[Sync Framework](http://msdn.microsoft.com/en-us/sync/default.aspx)开始。甚至还有一个使用 SQL Compact 作为离线数据存储的[示例。](http://code.msdn.microsoft.com/Release/ProjectReleases.aspx?ProjectName=sync&ReleaseId=1200)

# delphi - 如何避免在 TEdit 聚焦时按下 Escape 时发出叮当声？

> ID：770207
> 
> 赞同：5
> 
> 时间：2009-04-20T21:37:36.853
> 
> 标签：delphi, user-interface, event-handling, escaping, onkeypress

在我几年前开发的代码中，我一直在使用它来关闭当前表单，随时按下 Escape 键：

```
procedure TSomeForm.FormKeyPress(Sender: TObject; var Key: Char);
begin
    if key = #27 then close;
end; 
```

此行为是为 TForm 定义的。表单的`KeyPreview`属性设置为`True`让表单在任何其他组件之前对按键做出反应。对于程序的最佳部分来说，这一切都运行良好，但是，当在 TEdit 组件聚焦时按下 Escape 键时，会发出声音（Windows 用来表示无效操作的*叮当声）。*它仍然可以正常工作，但我从来没有完全摆脱声音。

这有什么问题？

* * *

重建步骤：

*   新的 VCL Forms 应用程序，将表单的 KeyPreview 设置为 true
*   在事件选项卡上双击 onKeyPress 事件并输入虚拟代码：

    如果键=#27 那么；

*   将 TListBox、TCheckBox、TEdit 添加到窗体并运行应用程序

*   在应用程序中尝试按 Esc 并没有发生任何事情，如虚拟代码所指定
*   聚焦 TEdit 并按 Esc。什么都没有发生，只是播放了声音。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-20T21:49:12.487

你得到了叮当声，因为你把 ESC 留在了输入中。看看 Key 是怎样的**var**？将其设置为 #0 即可消除叮当声。这将其从进一步处理中删除。

```
procedure TSomeForm.FormKeyPress(Sender: TObject; var Key: Char);
begin
    if key = #27 then 
    begin
      key := #0;
      close;
    end;
end; 
```

KeyPreview 就是这样，预览将传递给控件的内容，除非您停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-18T05:13:36.207

从吉姆的回答开始（感谢吉姆），我必须让它为我工作。我需要的是使下拉组合框关闭并保持所选项目，并在按下 TAB/shift+TAB 时移动到下一个/上一个控件。每次我确实按 TAB 时，房间里都充满了烦人的声音。我的工作是使用 onKeyDown 事件来捕获 shiftstate，声明**var aShift: boolean;** 在表单的界面中并使用以下代码：

```
procedure TForm2.StComboKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
  if ssShift in Shift then aShift := true else aShift := false;
end;

procedure TForm2.StComboKeyPress(Sender: TObject; var Key: Char);
begin
 if Key=char(VK_TAB) then
   begin
     Key := #0;
     StCombo.DroppedDown := false;
     if aShift
       then previousControl.SetFocus
       else nextControl.SetFocus;
   end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-19T12:26:32.550

使用菜单项并将它们设置为不可见，并使用快捷方式，是我刚刚偶然发现的一种快速解决方法，但如果您需要使用在首字母中使用的字符的快捷方式，则无法使用现有快捷方式：例如对于 Alt+ENTER，您需要在表单创建过程中添加如下内容：

```
MainMenu1.Items[0].ShortCut:=TextToShortCut('Alt+e'); 
```

但是，使用 TActionList 可能更容易，即使没有列出 Alt+E 之类的内容，您也可以添加它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-14T03:12:23.127

这是一个旧线程......但无论如何，这里有一个更好的线程：捕捉**Alt-C**！

与 ESC 不同，KeyPress 不提供 Alt-C，因此在 KeyPress 中将 Key 设置为 #0 不起作用，而且可怕的“叮！” 每次都会发出。经过数小时的尝试，这是我发现的解决方法： - 创建一个**主菜单选项**来服务请求 - 将其快捷方式设置为 Alt+C - 确实，这不是可用的快捷方式选择之一（！！）......但是无论如何它确实有效！- 在该菜单选项的 OnClick 中进行处理 - 您甚至可以在“后台”中进行处理：您可以将菜单选项的 Visible 设置为 false - 只要它的 Enabled 保持为真，它就会被 Alt-C 激活，即使它将在菜单中不可见。

希望这可能会有所帮助！如果你有更优雅的东西，请指教。

# php - 如何从 html 标签中删除属性？

> ID：770219
> 
> 赞同：14
> 
> 时间：2009-04-20T21:40:10.310
> 
> 标签：php, html-parsing

如何使用 php 从标签中删除所有/任何属性，比如段落标签？

`<p class="one" otherrandomattribute="two">`至`<p>`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-20T22:30:59.877

尽管有更好的方法，但您实际上可以使用正则表达式从 html 标记中去除参数：

```
<?php
function stripArgumentFromTags( $htmlString ) {
    $regEx = '/([^<]*<\s*[a-z](?:[0-9]|[a-z]{0,9}))(?:(?:\s*[a-z\-]{2,14}\s*=\s*(?:"[^"]*"|\'[^\']*\'))*)(\s*\/?>[^<]*)/i'; // match any start tag

    $chunks = preg_split($regEx, $htmlString, -1,  PREG_SPLIT_DELIM_CAPTURE);
    $chunkCount = count($chunks);

    $strippedString = '';
    for ($n = 1; $n < $chunkCount; $n++) {
        $strippedString .= $chunks[$n];
    }

    return $strippedString;
}
?> 
```

上面的内容可能用更少的字符编写，但它可以完成工作（快速而肮脏）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-09-28T11:51:36.800

Strip attributes using SimpleXML (Standard in PHP5)

```
<?php

// define allowable tags
$allowable_tags = '<p><a><img><ul><ol><li><table><thead><tbody><tr><th><td>';
// define allowable attributes
$allowable_atts = array('href','src','alt');

// strip collector
$strip_arr = array();

// load XHTML with SimpleXML
$data_sxml = simplexml_load_string('<root>'. $data_str .'</root>', 'SimpleXMLElement', LIBXML_NOERROR | LIBXML_NOXMLDECL);

if ($data_sxml ) {
    // loop all elements with an attribute
    foreach ($data_sxml->xpath('descendant::*[@*]') as $tag) {
        // loop attributes
        foreach ($tag->attributes() as $name=>$value) {
            // check for allowable attributes
            if (!in_array($name, $allowable_atts)) {
                // set attribute value to empty string
                $tag->attributes()->$name = '';
                // collect attribute patterns to be stripped
                $strip_arr[$name] = '/ '. $name .'=""/';
            }
        }
    }
}

// strip unallowed attributes and root tag
$data_str = strip_tags(preg_replace($strip_arr,array(''),$data_sxml->asXML()), $allowable_tags);

?> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-16T19:05:36.483

这是一个功能，可让您删除除您想要的属性之外的所有属性：

```
function stripAttributes($s, $allowedattr = array()) {
  if (preg_match_all("/<[^>]*\\s([^>]*)\\/*>/msiU", $s, $res, PREG_SET_ORDER)) {
   foreach ($res as $r) {
     $tag = $r[0];
     $attrs = array();
     preg_match_all("/\\s.*=(['\"]).*\\1/msiU", " " . $r[1], $split, PREG_SET_ORDER);
     foreach ($split as $spl) {
      $attrs[] = $spl[0];
     }
     $newattrs = array();
     foreach ($attrs as $a) {
      $tmp = explode("=", $a);
      if (trim($a) != "" && (!isset($tmp[1]) || (trim($tmp[0]) != "" && !in_array(strtolower(trim($tmp[0])), $allowedattr)))) {

      } else {
          $newattrs[] = $a;
      }
     }
     $attrs = implode(" ", $newattrs);
     $rpl = str_replace($r[1], $attrs, $tag);
     $s = str_replace($tag, $rpl, $s);
   }
  }
  return $s;
} 
```

例如，它将是：

```
echo stripAttributes('<p class="one" otherrandomattribute="two">'); 
```

或者如果你例如。想要保留“类”属性：

```
echo stripAttributes('<p class="one" otherrandomattribute="two">', array('class')); 
```

或者

假设您要将消息发送到收件箱并且您使用 CKEDITOR 编写消息，您可以按如下方式分配函数并在发送前将其回显到 $message 变量。请注意，名为 stripAttributes() 的函数将删除所有不必要的 html 标签。我试过了，效果很好。我只看到我添加的格式，如粗体等

```
$message = stripAttributes($_POST['message']); 
```

或者您可以`echo $message;`进行预览。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-20T21:45:05.867

[HTML Purifier](http://htmlpurifier.org/ "HTML 净化器")是使用 PHP 清理 HTML 的更好工具之一。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-16T13:29:24.700

老实说，我认为唯一明智的方法是在[HTML Purifier](http://htmlpurifier.org/)库中使用标签*和*属性白名单。此处的示例脚本：

```
<html><body>

<?php

require_once '../includes/htmlpurifier-4.5.0-lite/library/HTMLPurifier/Bootstrap.php';
spl_autoload_register(array('HTMLPurifier_Bootstrap', 'autoload'));

$config = HTMLPurifier_Config::createDefault();
$config->set('HTML.Allowed', 'p,b,a[href],i,br,img[src]');
$config->set('URI.Base', 'http://www.example.com');
$config->set('URI.MakeAbsolute', true);

$purifier = new HTMLPurifier($config);

$dirty_html = "
  <a href=\"http://www.google.de\">broken a href link</a
  fnord

  <x>y</z>
  <b>c</p>
  <script>alert(\"foo!\");</script>

  <a href=\"javascript:alert(history.length)\">Anzahl besuchter Seiten</a>
  <img src=\"www.example.com/bla.gif\" />
  <a href=\"http://www.google.de\">missing end tag
 ende 
";

$clean_html = $purifier->purify($dirty_html);

print "<h1>dirty</h1>";
print "<pre>" . htmlentities($dirty_html) . "</pre>";

print "<h1>clean</h1>";
print "<pre>" . htmlentities($clean_html) . "</pre>";

?>

</body></html> 
```

这会产生以下干净、符合标准的 HTML 片段：

```
<a href="http://www.google.de">broken a href link</a>fnord

y
<b>c
<a>Anzahl besuchter Seiten</a>
<img src="http://www.example.com/www.example.com/bla.gif" alt="bla.gif" /><a href="http://www.google.de">missing end tag
ende 
</a></b> 
```

在您的情况下，白名单将是：

```
$config->set('HTML.Allowed', 'p'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2011-06-02T09:19:56.757

您还可以查看 html 净化器。诚然，它非常臃肿，如果只考虑这个特定示例，它可能不适合您的需求，但它或多或少地提供了对可能的敌对 html 的“防弹”净化。您还可以选择允许或禁止某些属性（它是高度可配置的）。

[http://htmlpurifier.org/](http://htmlpurifier.org/)

# linq - 映射 Linq 实体和域对象以及对象跟踪

> ID：770220
> 
> 赞同：0
> 
> 时间：2009-04-20T21:40:13.820
> 
> 标签：linq, linq-to-sql, design-patterns, domain-driven-design

如果我将我的域对象映射到 linq 实体，我现在将无法在保存我的域对象时跟踪更改吗？因此，对于我希望对模型进行的任何更改，一旦我将对象映射到 linq 实体以提交给 db，所有对象值都将由 linq 提交给 db，因为它首先通过映射？或者这里的对象跟踪仍然可以使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T07:56:41.310

取决于您使用的 O/R 映射器。您指的是实体框架，它不会在实体内部进行任何更改跟踪，因此当您重新附加以前从数据库中获取的实体时，它需要您的帮助（因此它知道它不是新的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T11:40:19.917

这是[microsoft](http://msdn.microsoft.com/en-us/bb546187.aspx)关于多层环境中的 CRUD 操作的文章（与您的域映射方案类似的问题）。

查看更新 - 使用完整实体了解自己进行更改跟踪的方法。

还有另一种技术，您将实体附加为未修改，然后使用[保持当前值](http://msdn.microsoft.com/en-us/library/system.data.linq.refreshmode.aspx)的 .Refresh() - 替换原始值。这将允许您以数据库往返为代价适当地插入/更新/不执行任何操作。

# c# - 我如何避免.Parent.Parent.Parent。等引用控制层次结构时？

> ID：770222
> 
> 赞同：3
> 
> 时间：2009-04-20T21:40:27.470
> 
> 标签：c#, asp.net

我正在尝试修复这个丑陋的代码。

```
RadGrid gv = (RadGrid) (((Control) e.CommandSource).Parent.Parent.Parent.Parent.Parent); 
```

我经常需要找到第一个网格，它是刚刚引发事件的对象的父级...等的父级。

当布局发生变化并且 .Parents 的数量增加或减少时，上述内容往往会中断。

我不一定有控件ID，所以我不能使用FindControl()。

有没有更好的方法来找到第一个父网格？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-20T21:48:47.577

```
Control parent = Parent;
while (!(parent is RadGrid))
{
    parent = parent.Parent;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-20T21:51:18.350

如果你真的必须找到网格，那么你可能是这样的：

```
Control ct = (Control)e.CommandSource;
while (!(ct is RadGrid)) ct = ct.Parent;
RadGrid gv = (RadGrid)ct; 
```

但也许你可以解释为什么你需要参考网格？也许您的问题还有另一个/更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T21:49:15.327

我不熟悉您使用的 API，但您可以执行以下操作：

```
Control root = ((Control)e.CommandSource);
while(root.Parent != null)
{
    // must start with the parent
    root = root.Parent;

    if (root is RadGrid)
    {
        // stop at the first grid parent
        break;
    }
}
// might throw exception if there was no parent that was a RadGrid
RadGrid gv = (RadGrid)root; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-20T21:50:29.660

我认为，如果您可以控制父母的代码，则可以使用简单的递归来做到这一点。就像是：

```
public Control GetAncestor(Control c)
{
    Control parent;
    if (parent = c.Parent) != null)
        return GetAncestor(parent);
    else 
        return c;   
} 
```

我没有声称这将如何运作，但它应该让这个想法得到传达。向上导航父链直到没有父链，然后将该对象返回到递归链。这是蛮力，但无论它有多高，它都会找到第一个父母。

# sql-server-2005 - 动态 WHERE 语句 - SQL Server 2005

> ID：770227
> 
> 赞同：1
> 
> 时间：2009-04-20T21:40:38.873
> 
> 标签：sql-server-2005, tsql

我需要创建一个使用 LIKE 关键字过滤结果集的 SQL 语句。有时该值为 NULL。

在 T-SQL 中实现的最佳方法是什么？我正在使用 SQL Server 2005

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T21:42:36.733

取决于您所说的“未提供”是什么意思。如果这意味着 NULL，您可以随时尝试

```
(
    Table.Column LIKE @myParameter
OR
    @myParameter IS NULL
) 
```

我还发现这有时工作得更快。

```
ISNULL(Table.Column, @myParameter) = @myParameter 
```

或者，如果您从代码动态构建 TSql，如果您没有参数，则只需省略 WHERE 子句的那部分或使用“%”填充@myParameter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T21:42:11.193

使用合并！

```
COALESCE(filter, '%') 
```

编辑：这可能是错误的方法，但我想这是一个选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T21:43:05.123

```
 SELECT 
 lalala
 WHERE 1=1
 and (
  value like '%'+@search+'%'
  or @search = ''
 ) 
```

虽然我不确定它会如何表现......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T21:50:53.390

就个人而言，在这种情况下，我会在 VB/C# 代码中构建 SQL 语句，如果没有 LIKE 子句，就不要在最后连接它。

我刚才所说的稍微花哨的版本是有两个版本的准备好的语句，一个有 LIKE 子句，一个没有 LIKE 子句，并根据需要调用适当的一个。

# vba - Excel VBA 打印到特定的打印机托盘

> ID：770230
> 
> 赞同：1
> 
> 时间：2009-04-20T21:42:21.023
> 
> 标签：vba, excel

在 Excel (2007) VBA 中，如何将工作表打印到特定的打印机托盘？这只会打印到打印机上的默认托盘：

```
ws.PrintOut ActivePrinter:="\\print_server\printer_name" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T22:10:59.097

微软为这个问题提供了一个[丑陋的解决方案。](http://support.microsoft.com/default.aspx?scid=kb;en-us;213815&Product=vba)用于`SendKeys`从打印设置对话框中手动选择正确的纸盘。

另一种选择可能是在 Windows 中设置其他打印机，其中每台打印机实际上都链接到同一台打印机上的不同托盘。然后您可以在 VBA 中选择适当的托盘。[这篇文章](http://excel.tips.net/Pages/T002213_Specifying_a_Paper_Tray_in_a_Macro.html)有详细信息。

或者，如果您的打印机碰巧在您要打印到的纸盘中有不同尺寸的纸张，您可以设置（例如）：

```
ws.PageSetup.PaperSize = xlPaperLegal 
```

打印机会自动选择正确的纸盘。我刚刚在我的打印机上尝试了这个，它迫使纸张在手动纸盘上打印，因为我实际上没有合法尺寸的纸盘。

# actionscript - Actionscript 2：将一个类加载到父类中，获取父变量

> ID：770235
> 
> 赞同：0
> 
> 时间：2009-04-20T21:43:51.893
> 
> 标签：actionscript, class

我有一个子类，它在 swf 开始时加载到父类中，如下所示：

```
var myvar = 'hello';
public function Parent()
{
     this.child = new Child();
}; 
```

如何从子项中检索变量“myvar”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T21:55:54.827

child 没有对 parent 的引用，因此无法检索 myvar。

你可以像这样创建孩子：

```
public class Child
{
   private var parent:Parent;

   public Child(parent:Parent)
   {
       this.parent = parent;
   }
   ...
} 
```

这将允许孩子通过它的 parent 属性访问它的父母，并且将能够看到属于父母的所有公共成员。

# windows - 如何自动检测并释放真正发生变化的DLL？

> ID：770237
> 
> 赞同：3
> 
> 时间：2009-04-20T21:43:53.563
> 
> 标签：windows, binary, release, compare

每当我们重新编译一个 exe 或一个 DLL 时，即使源代码相同，它的二进制映像也是不同的，因为映像中存在各种时间戳和校验和。

但是，我们的质量体系意味着每次发布新的 DLL 时，都必须再次执行相关的验证测试（通常是手动的，并且需要大量时间。）

因此，我们的目标是避免释放*实际上*没有更改的 DLL。即：拥有一个自动程序（脚本、工具等），仅根据它们包含的有意义的信息（代码和数据）检测不同的 Dll，忽略时间戳和校验和。

有没有好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T21:46:06.943

以版本信息为基础，仅在您实际进行更改时更新版本信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T21:49:24.483

让您的构建工具构建 DLL 两次。两者之间存在的任何差异都保证是时间戳或校验和的结果。现在您可以使用该信息与您的下一个构建进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T01:17:39.647

我们的构建系统也有同样的问题。不幸的是，检测是否有任何实质性代码更改并非易事，因为我们有许多静态库，因此对其中的更改可能会导致 dll/exe 更改。对 dll/exe 直接使用的文件的更改可能只是修复错误注释，而不是更改生成的目标代码。

我之前一直在寻找一种工具来做你想做的事，但我没有看到。我的想法是手动比较这两个文件并跳过两个版本中无意义的差异。[便携式文件格式](http://www.microsoft.com/whdc/system/platform/firmware/PECOFF.mspx)有据可查，所以我不认为这会非常困难。我们的额外要求要求我们忽略标记在 dll/exe 中的版本，因为我们对所有文件进行唯一标记，并且在签署所有可执行文件时也忽略签名。

我还没有时间来做这些，但如果你继续实施解决方案，我很想与你合作。如果您确实找到了执行此操作的工具，请告诉我们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-20T21:53:43.803

如果您有一个在开始构建之前同步源代码的自动构建系统，那么只有在源代码控制中有任何实际更改时才继续构建和发布。您应该能够从源代码控制客户端的输出中轻松检测到这一点。

# machine-learning - 用于电子邮件垃圾邮件检测的神经网络

> ID：770238
> 
> 赞同：19
> 
> 时间：2009-04-20T21:44:02.173
> 
> 标签：machine-learning, neural-network, classification, spam-prevention

假设您可以访问一个电子邮件帐户，该帐户将过去几年收到的电子邮件（约 10k 封电子邮件）的历史分为 2 组

*   真正的电子邮件
*   垃圾邮件

您将如何处理创建可用于垃圾邮件检测的神经网络解决方案的任务 - 基本上将任何电子邮件分类为垃圾邮件或非垃圾邮件？

让我们假设电子邮件提取已经到位，我们只需要关注分类部分。

**我希望得到回答的要点是：**

1.  选择哪些参数作为 NN 的输入，为什么？
2.  NN 的哪种结构最有可能最适合此类任务？

此外，任何资源建议或现有实现（最好在 C# 中）都非常受欢迎

谢谢

**编辑**

*   我开始使用神经网络作为项目的主要方面是测试 NN 方法如何用于垃圾邮件检测
*   仅仅探索神经网络和垃圾邮件的主题也是一个“玩具问题”

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-06T12:54:11.987

如果你坚持使用神经网络......我会为每封电子邮件计算一些特征

基于字符、基于单词和词汇的功能（我数了一下，大约有 97 个）：

1.  字符总数 (C)
2.  alpha 字符总数 / C alpha 字符的比率
3.  数字字符总数/ C
4.  空白字符总数/C
5.  每个字母的频率 / C（键盘的 36 个字母 - AZ，0-9）
6.  特殊字符的频率（10 个字符：*、_、+、=、%、$、@、ـ、\、/）
7.  总字数（M）
8.  总短字数/M 两个字母或更少
9.  总字数/C
10.  平均字长
11.  平均 以字符为单位的句子长度
12.  平均 单词的句子长度
13.  字长频率 distribution/M 长度为 n 的单词的比率，n 介于 1 和 15 之间
14.  Type Token Ratio No. Of unique Words/ M
15.  Hapax Legomena 频率。一次出现的词
16.  Hapax Dislegomena 频率。出现两次的词
17.  Yule 的 K 度量
18.  辛普森 D 度量
19.  Sichel 的 S 度量
20.  Brunet 的 W 度量
21.  Honore 的 R 度量
22.  标点符号的频率 18 个标点字符：. ; ; ? ！: ( ) – “ « » < > [ ] { }

您还可以根据格式添加更多功能：颜色、字体、大小……使用。

这些度量中的大多数都可以在网上、论文甚至维基百科中找到（它们都是简单的计算，可能基于其他特征）。

因此，对于大约 100 个特征，您需要 100 个输入、隐藏层中的一些节点和一个输出节点。

输入需要根据您当前的预分类语料库进行标准化。

我把它分成两组，一组作为训练组，另一组作为测试组，从不混合。也许在具有相似垃圾邮件/非垃圾邮件比率的训练/测试组的比例为 50/50。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-20T21:47:23.507

你打算用神经网络来做吗？听起来您已经很好地使用了[贝叶斯分类](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)，这在 Paul Graham 的几篇文章中得到了很好的概述：

*   [垃圾邮件计划](http://www.paulgraham.com/spam.html)
*   [更好的贝叶斯过滤](http://www.paulgraham.com/better.html)

您可以访问的分类历史将使非常强大的语料库提供给贝叶斯算法，您最终可能会得到非常有效的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T22:06:43.430

1.  你基本上会遇到一个与设计和训练神经网络类似的范围的特征提取问题。如果我是你，我将从哪里开始，以多种方式对输入文本进行切片和切块，每一种都是潜在的特征输入，类似于“如果出现‘价格’和‘伟哥’，这个神经元发出 1.0 信号彼此相距 3 个字以内”，并根据与垃圾邮件识别的最佳绝对相关性剔除那些。
2.  我会从我最好的 50 到 200 个输入特征神经元开始，并将它们连接到单个输出神经元（针对 1.0 = 垃圾邮件，-1.0 = 非垃圾邮件训练的值），即单层感知器。如果效果不佳，我可能会尝试使用多层反向传播网络，但我不会屏住呼吸以获得出色的结果。

一般来说，我的经验使我相信神经网络在这项任务中最多只能表现出平庸的表现，如果这不是探索神经网络的玩具问题，我肯定会推荐一些贝叶斯算法，就像 Chad Birch 所建议的那样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T23:28:22.220

乍得，到目前为止你得到的答案是合理的，但我会回复你的更新：

> 我将使用神经网络作为项目的主要方面是测试 NN 方法如何用于垃圾邮件检测。

那么，你有一个问题：像这样的经验测试不能证明不适合。

您可能最好了解一下 NN 实际做什么和不做什么，看看为什么它们对于这类分类问题不是一个特别好的主意。考虑它们的一种有用方法可能是作为通用函数逼近器。但是对于这一切如何在分类领域结合在一起的一些想法（这就是垃圾邮件过滤问题），浏览诸如[模式分类](http://rii.ricoh.com/~stork/DHS.html)之类的介绍文本可能会有所帮助。

失败了，如果你看到它运行就死定了，只需为网络本身使用任何通用的 NN 库。无论如何，您的大部分问题将是如何表示输入数据。“最好的”结构并不明显，它可能并不重要。输入必须是语料库本身的一些（标准化）测量（特征）。有些是显而易见的（“垃圾邮件”词的数量等），有些则不那么明显。这是您真正可以玩的部分，但由于问题的性质，与贝叶斯过滤器（这里有自己的问题）相比，您应该期望做得很差。

# memory-management - Windows 任务管理器列 - 句柄

> ID：770239
> 
> 赞同：13
> 
> 时间：2009-04-20T21:44:03.500
> 
> 标签：memory-management, pointers, windows-xp

Windows 任务管理器“句柄”列的衡量标准是什么？文件句柄？还是页面文件指针？一个程序有 8000 个句柄也很糟糕吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-20T21:46:15.367

它是内核句柄的度量。内核处理类型和创建它们的函数包括：

*   文件句柄 (CreateFile)
*   内存映射文件 (CreateFileMapping)
*   事件（创建事件）
*   互斥体 (CreateMutex)
*   信号量 (CreateSemaphore)
*   进程 (CreateProcess)
*   线程 (CreateThread)

而且比我忘记或从未听说过的要多。

单个进程的 8000 似乎令人难以置信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T22:12:15.413

单个进程的 8000 似乎确实很多，但不一定是不可能的 - 这取决于行为。您应该将句柄视为一种特殊的内存 - 高使用率是一个可能的警告信号，但如果它稳定则不是。如果句柄使用稳定，则不是泄漏的迹象，尽管您可能需要执行一些优化以使其使用更少的句柄。

# tinymce - 您如何以编程方式从 TinyMCE 中删除（而不是禁用）按钮？

> ID：770243
> 
> 赞同：7
> 
> 时间：2009-04-20T21:44:49.190
> 
> 标签：tinymce

我可以使用以下方法禁用表格按钮：

```
 tinyMCE.activeEditor.controlManager.get('divId_table').setDisabled(true) 
```

但我感兴趣的实际上是隐藏它。关于如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-10-20T04:20:50.400

首先，您必须使用高级主题。

然后，在 TinyMCE 初始化代码中添加此选项。

```
tinyMCE.init({
    ...
    theme_advanced_disable : "bold, justifyleft, justifyright"
}); 
```

我希望这可以帮助某人。

[资源](http://www.tinymce.com/wiki.php/Configuration:theme_advanced_disable)

[此处的元素名称列表](http://www.tinymce.com/wiki.php/Buttons/controls)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-20T21:55:38.183

我自己对 TinyMCE 并不熟悉，但由于您似乎可以通过 javascript 访问元素本身，因此您需要做的就是将其显示属性设置为“无”。

```
document.getElementById("theButton").style.display = "none"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-12T14:18:13.940

incase ur trying to hide a specific button, use the following code.

$('.mce_cut').hide() //hides cut button

lookup other button titles using firebug in case u wish to hide something specific.

Incase you are looking to hide specific editor's button, modifiy the jquery selector to select correct sibling/descendent.

alternately, try this .. tinyMCE.activeEditor.controlManager.controls.ctl00_SPWebPartManager1_g_5005db96_e035_4197_a958_75f008b35061_ctl00_tbKeywords_cut.remove()

Note that ctl00_SPWebPartManager1_g_5005db96_e035_4197_a958_75f008b35061_ctl00_tbKeywords is my asp.net control's id. Don't bother about this if ur not using Asp.net serverside textbox control. In case you are.. <% theTextBoxID.ClientID %> gets u that.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-12-01T14:51:37.117

使用以下内容（使用 jQuery；很容易构建非 jQuery 方法）：

```
var elem = $(ed.id+'_'+'divId_table')
elem.addClass('mceButtonDisabled');
elem.removeClass('mceButtonEnabled'); 
```

# c# - Visual Studio 可扩展性，以编程方式创建项目

> ID：770264
> 
> 赞同：0
> 
> 时间：2009-04-20T21:50:44.433
> 
> 标签：c#, visual-studio, extensibility

我正在尝试以编程方式将测试项目添加到解决方案中。但是，当执行下面的代码时，我在“vhaSolution.GetProjectTemplate("TestProject.zip", "Csharp")" 行收到一个文件 IO 异常。该错误表明“任何已安装的软件包都不支持指定的语言”。有谁知道是什么原因造成的？

```
 public enum TestProjectType
    {
        Unit,
        Acceptance,
        Integration
    }

 public static void CreateTestProject(string fullyQualifiedSolutionFileName,string projectName,TestProjectType testProjectType)
        {
            #region Argument Validation
            if (String.IsNullOrEmpty(fullyQualifiedSolutionFileName) || String.IsNullOrEmpty(fullyQualifiedSolutionFileName.Trim()))
            {
                throw new ArgumentNullException("fullyQualifiedSolutionFileName", "The solution file location is required.");
            }

            if (String.IsNullOrEmpty(projectName) || String.IsNullOrEmpty(projectName.Trim()))
            {
                throw new ArgumentNullException("projectName", "The project name is required.");
            }

            if (!File.Exists(fullyQualifiedSolutionFileName))
            {
                throw new ArgumentException(String.Format("The file {0} specified does not exist.", fullyQualifiedSolutionFileName));
            }

            if (testProjectType == null) testProjectType = TestProjectType.Unit;
            #endregion

            System.Type vsType = System.Type.GetTypeFromProgID("VisualStudio.DTE.8.0");
            Object vs = System.Activator.CreateInstance(vsType, true);
            EnvDTE80.DTE2 dte8Obj = (EnvDTE80.DTE2)vs;

            Solution2 vhaSolution = (Solution2)dte8Obj.Solution;
            vhaSolution.Open(fullyQualifiedSolutionFileName);

            //TODO: Externalize company name
            string cmpnyName = "Vha";
            string testProjectName = String.Format("{0}.{1}.{2}{3}",cmpnyName,projectName,testProjectType.ToString(),"Test");
            string testTemplateLocation = vhaSolution.GetProjectTemplate("TestProject.zip", "CSharp");
            FileInfo rootSolutionFolder = new FileInfo(fullyQualifiedSolutionFileName);

            //TODO: Externalize test directory name
            string testDirName = String.Format("{0}\\{1}\\{2}\\{3}",rootSolutionFolder.DirectoryName,"test",testProjectType.ToString(),testProjectName);

            if (!Directory.Exists(testDirName))
            {
                //may throw an exception if the dir can't be created...
                Directory.CreateDirectory(testDirName);
            }

            Project vhaTestProj = vhaSolution.AddFromTemplate(testTemplateLocation,testDirName,testProjectName + ".proj",false);
            vhaTestProj.Save(String.Format("{0}\\{1}.proj",testDirName , testProjectName));

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T22:08:17.030

我想到了。我需要使用 prog ID VisualStudio.DTE.9.0 以便它指向 VS 2008 的正确注册表位置。

# database - 数据库内部——从哪里开始？

> ID：770273
> 
> 赞同：22
> 
> 时间：2009-04-20T21:55:13.503
> 
> 标签：database, theory, internals

所以假设你想学习一些关于数据库内部的东西。什么是最好的源代码？最好买的书？

前几天我和一个朋友谈论这个，他推荐：
[计算机编程艺术，第 3 卷：排序和搜索](https://rads.stackoverflow.com/amzn/click/com/0201896850)

还有哪些书可以帮助我了解所有文件 IO 和内存问题、页面、锁定等......？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-20T22:19:15.990

教科书： Ramakrishnan 和 Gehrke 的[数据库管理系统](http://pages.cs.wisc.edu/~dbbook/)。

或者：Hellerstein、Stonebraker 和 Hamilton[的数据库系统架构。](https://rads.stackoverflow.com/amzn/click/com/1601980787)

生产代码：[PostgreSQL](http://www.postgresql.org/)

（我比 SQLite 更喜欢 PG 代码，它更完整，而且我认为组织得更好。SQLite 的功能很棒，但有很多它没有承担）。

额外学分：[数据库系统读物，](https://rads.stackoverflow.com/amzn/click/com/0262693143) Hellerstein 编辑的第 4 版。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-20T22:12:07.770

如果您真的很认真，尽管已故伟大的吉姆·格雷和路透社的读物很难读：

事务处理、概念和技术

再说一次，如果严重的话，不要理会其他任何事情..它已经脱离了这个世界，当然也脱离了 IBM 或 Oracle 追逐的 mySQL..

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-20T21:58:32.857

SQLite 源非常易于了解数据库实现。

PostgreSQL 是一个写得很好的软件，比 SQLite 复杂度更高。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T22:00:17.937

[我和一位同事从Database in Depth: Relational Theory for Practitioners 中](https://rads.stackoverflow.com/amzn/click/com/0596100124)获得了大量信息 非常低级的东西，但听起来这就是您正在寻找的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-20T23:09:09.597

看看数据库系统： Hector Garcia-Molina、Jeffrey D. Ullman、Jennifer D. Widom 所著的[全书。](http://www.amazon.com/Database-Systems-Complete-Book-GOAL/dp/product-description/0130319953)它专门针对 DBMS 的内部结构。

SquareCog 的回答也包含一些明智的建议；我没有看过上面提到的两本书（尽管根据亚马逊的说法，Stonebreaker “架构”一书只有 136 页，这似乎有点轻量级）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-20T22:02:55.140

[这是](http://blogs.msdn.com/slavao/articles/441058.aspx)关于驱动 Microsoft SQL Server 2005+ 的 SQLOS 的有趣读物。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-20T22:36:55.917

关于内部的深入信息是特定于数据库的，这里是 SQL Server 2008 的来源：http: [//www.amazon.com/Microsoft%C2%AE-SQL-Server%C2%AE-2008-Internals/dp/0735626243](https://rads.stackoverflow.com/amzn/click/com/0735626243)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-20T22:43:35.133

不是每个人都喜欢他的风格，但我发现 Joe Celko 在解释驱动 SQL 数据库的基于集合的逻辑方面做得很好。如果您已经有了一点 SQL 经验，那么您应该阅读[SQL for Smarties](https://rads.stackoverflow.com/amzn/click/com/1558605762)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-20T22:03:30.193

确保你得到的任何东西都涵盖了关系代数和关系微积分。如果您没有基本的理论背景，那么深入研究数据库内部是没有意义的。除此之外，任何大学风格的数据库教科书都可能就足够了。

# .net - .NET 的乳胶

> ID：770274
> 
> 赞同：13
> 
> 时间：2009-04-20T21:55:22.740
> 
> 标签：.net, pdf, latex, itextsharp

我正在使用 ItextSharp 生成 PDF。作为我们输出的一部分，我们有很多与数学相关的内容。也许我们可以使用某种 Latex 库将结果提供给 ItextSharp 以生成 PDF。我已经在谷歌上搜索了一段时间，但一无所获。你知道是否存在 .NET 的乳胶库吗？

另外，您知道 ItextSharp 是否可以在没有此 Latex 帮助的情况下处理此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T06:54:13.020

它可能还不存在，但它不应该是一个不可能为 C# 编译 TeX 的大项目。最初的 TeX 是用 Pascal 的一个版本编写的，现在它被[web2c](http://www.tug.org/web2c/)自动翻译成C。因此，让 web2c 生成 C# 并将支持库（[kpathsea](http://www.tug.org/kpathsea/)以及您需要的任何[pdftex](http://www.tug.org/applications/pdftex/)部分- 可能不是几乎所有部分）转换为兼容只是“编程的小问题”。

除此之外，似乎还有一个[GSoC 项目将](http://socghop.appspot.com/student_project/show/google/gsoc2009/python/t124024631352)[Matplotlib](http://matplotlib.sf.net)的数学渲染引擎提取到一个单独的库中。假设该库是纯 Python，您可以通过[IronPython](http://www.codeplex.com/Wiki/View.aspx?ProjectName=IronPython)使用它。因此，如果您可以等到夏天结束，那可能正是您所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-16T13:29:55.547

GSoC 项目所有者回复了我关于将 Mathtext 外部化到名为 MathTex 的新 python 库的新项目。

他说他的工作依赖于一个名为 FT2FONT 的库，它是一个 C++ 库的包装器。对于具有良好 .net 字体知识的人来说，完成这项工作并使用包装器来包装 .net 字体库并允许在 IronPython 中使用它是微不足道的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T22:26:42.837

你最好的选择可能是自己动手。

它可能就像制作一个基本模板一样简单，然后执行以下操作：

1.  将表达式插入模板。
2.  用 编译`pdflatex`。
3.  将生成的 pdf 插入到您的文档中。

作为另一种选择，您可以查看执行此操作的其他应用程序的源代码。Mediawiki（维基百科背后的软件）浮现在脑海中——它可以使用 LaTeX 后端来生成数学公式，而且它是开源的，所以你可以看到他们是如何做到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-09-11T02:09:47.880

我也会看一个包装库。除非您想编写像乳胶编辑器这样的大型软件，否则您可能只需要一小部分。我会看看 texnet free (www.texdotnet.com)。

# sharepoint - SharePoint 基础结构更新身份验证问题

> ID：770281
> 
> 赞同：3
> 
> 时间：2009-04-20T21:57:47.990
> 
> 标签：sharepoint, authentication, ntlm, infrastructure

我有一个 SharePoint MOSS 2007 开发设置，我在上面安装了 WSS 基础结构更新。现在，每当我尝试使用 IE7 访问我的 SharePoint 场中的任何网站集时，我都会收到用户名和密码提示。我为我的网站集管理员帐户输入了有效凭据，我再次看到该框。这发生了三次，然后在第三次之后我只看到一个空白页。

当我通过 FireFox 3.0 访问系统时，我看到了用户名和密码屏幕，但在第一次输入凭据后，站点正常运行。

我认为这是因为 IE 使用 NTLM 而 Firefox 使用基本身份验证，但我不知道如何解决这个问题。

有没有其他人经历过这种情况，或者有人能指出我正确的方向吗？

在此先感谢 - 罗素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-07T12:27:42.220

我现在找到了答案。一切都与这个问题有关...

[http://support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861)

在基础结构更新之前，只需在方法一中为 BackConnectionHostNames 条目输入 FQDN（例如 intranet.domain.local）就可以正常工作。基础架构更新后，我只将主机名（例如 Intranet）添加到 BackConnectionHostNames 条目中，这解决了问题！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T03:12:45.127

我必须关闭 IE ESC 才能让它停止。出于某种原因，它可以在除我们场中的一台之外的所有服务器上运行。谁知道。希望这可以帮助您入门。

# javascript - Firebug 未显示右下角的错误警告

> ID：770289
> 
> 赞同：2
> 
> 时间：2009-04-20T22:00:27.860
> 
> 标签：javascript, firebug

出于某种原因，萤火虫在我的本地主机开发中不再显示右下角的那个小红色“X”图标。

有没有我可能以某种方式改变的设置？

我故意在我的 .js 文件中出错，但我什么也没得到！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T22:07:38.013

在 Firebug 中，单击“控制台”选项卡旁边的下拉菜单，然后选中“为本地文件启用控制台”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T04:30:42.633

许多异步回调“吞下”错误。也就是说，回调中可能发生任何错误，并且它不会显示在 Firebug 或我所知道的任何即时调试器中。然而，在“Break on All Errors”开启的情况下，Firebug 将停止。在“脚本”选项卡选项中查找。

您在使用 TrimPath 吗？它还可以“吞下”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-10T07:50:46.440

Firebug 图标是黄色还是灰色？如果它是灰色的，则 Firebug 已关闭（或所有面板都已禁用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T22:03:34.950

老实说，我不知道。但是我之前遇到过firebug问题，重新安装大约需要2分钟，通常可以解决问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T22:04:07.163

你的javascript中有这样的东西吗？

```
window.onerror = function(){
    return true;
}; 
```

这将抑制任何正常的错误行为。

# asp.net-mvc - 不必编码 url

> ID：770290
> 
> 赞同：0
> 
> 时间：2009-04-20T22:02:10.337
> 
> 标签：asp.net-mvc, url, encoding

假设我有这个网址“/my#stuff”

我正在使用 asp.net mvc，当我尝试转到此页面时，我只需要“/my”。“#stuff”部分已被删除。

现在，如果我像“/my%23stuff”这样对 URL 进行编码，我可以让它正常工作，因为 %23 解码为 #

但是，有没有一种方法可以让这个工作而无需对 url 进行编码？

如果输入“/my#stuff”作为 URL 的工作方式与“my%23stuff”相同，我会喜欢它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T22:17:12.187

我不认为有办法做你所说的。哈希用于锚标记的 URL。

您指向一个页面 /my 并导航到该页面上的锚标记“stuff”。如果锚标签“stuff”不存在，它只会导航到页面/my。

# web - 我应该为我的网站管理员创建一个单独的应用程序吗？

> ID：770292
> 
> 赞同：0
> 
> 时间：2009-04-20T22:02:57.057
> 
> 标签：web, permissions, administration

最好在网站内配置权限以进行管理访问、单独的网页或完全独立的应用程序来管理网站上的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T22:07:15.830

我通常在同一个网站内配置权限，并有单独的网页进行管理。

在某些情况下，具有更多控件的同一页面也很有用，例如，如果您想要一个页面来批准/拒绝评论或类似的东西，而不是创建一个单独的界面，您只需添加几个按钮，具体取决于登录用户的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-20T23:04:31.200

我经常发现以“最好是”开头的问题通常涉及某人和某个时间（一种语用学类型的思维 - 谁在什么背景下）

不同的上下文将为您在此处介绍的每个场景提供不同的优缺点，并且取决于谁需要哪些功能也可能会影响您的选择。

关于“谁”部分，您可能会问自己有关您正在经历的过程的其他问题。是我的用户需要管理员访问权限吗？是我的开发团队吗？是 IT 经验很少的总经理等等。

关于所用媒介的问题也可能会影响您做出的决定。“管理员”是否会在 PC 上使用，销售代表是否会在路上使用可能适合其自己的软件应用程序的掌上电脑等？

# sql-server - 由于 SQL Server 没有包，程序员如何绕过它？

> ID：770300
> 
> 赞同：22
> 
> 时间：2009-04-20T22:04:54.697
> 
> 标签：sql-server, oracle, packages

我有一个 SQL Server 数据库，其中包含大量存储过程。由于 Oracle 的“包”特性，大量存储过程在我的 Oracle 数据库中不是问题。

程序员如何解决缺少像 Oracle 那样的“包”特性的问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-21T00:08:31.093

虽然 SQL Server 没有**像您习惯的那样**通过封装和包状态的“酷特性”提供任何东西，但您可以将存储过程组织成模式。

在企业管理器中，这些 proc 仍然全部列在一起，如果您有数百个 proc，这将构成一个巨大的树状列表。我也很怀念 Oracle 包的组织和很酷的特性。但是，所有平台都有其优势。

注意：用 .NET 语言编写存储过程确实可以提供封装和状态。然而，它仍然没有以任何特殊方式在 EM 树视图中将它们分开。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-20T22:11:38.363

想出一个好的命名约定，使用它，并执行它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-21T01:50:20.803

模式可用于组织存储过程和其他对象。就个人而言，当它们按功能区域组织对象时，我更喜欢使用模式，并且这些功能区域对应于安全边界。在 AdventureWorks 示例数据库中可以找到这方面的一个示例，该数据库具有“人力资源”和“销售”等模式。理论是给定用户可能需要访问“人力资源”中的对象，但可能不需要访问“销售”信息。

正如詹姆斯上面所说，另一种方法是使用命名约定并强制执行它。我将补充一点，SQL Server Management Studio 有一个过滤器按钮，可用于过滤显示的对象列表。例如，可以单击“存储过程”文件夹并过滤名称包含“添加”。

在我当前的项目中，我已经从 SSIS 包中提取了一些 SQL 查询并将其放入存储过程中。为了区分这些存储过程和那些应该通用的存储过程，我在名称前加上了“ssis”。如果我可以在 C# 或 C++ 中创建类似于命名空间的东西，并创建“SSIS.SelectUserLookupData”而不是“ssis_SelectUserLookupData”，那肯定会更令人愉快。如果这些命名空间可以嵌套，那就更好了。

如果这是 Oracle 中 Packages 的功能之一，那么也许有人会告诉我。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-08-07T12:47:53.207

我曾使用过 SQL Server 和 Oracle，因此看到了两者的优缺点。由于上述评论有点激烈，我会尽量保持中立......

那么，什么是 Oracle 包？把它想象成一个数据库类

Package 有两个元素：头文件和正文文件。头文件是您的公共接口，包含所有可直接调用的存储过程或函数（在 Oracle 中函数返回值，存储过程不返回值）的签名（名称、参数和返回类型，如果适用）。包体必须实现包头文件中的所有过程签名。

包的主体元素包含所有实际执行工作的存储过程和逻辑。您可能在包头中声明了一个保存过程，该过程调用主体中存在的插入或更新过程。开发人员只能看到“保存”过程。重要的是要记住，包体也可以实现未在包头中声明的过程或函数，它们只是无法在包本身之外访问。

我发现软件包非常有用，原因有很多：

1.  您已经了解了可以提供给其他开发人员的公共接口的概念
2.  包可以镜像你编译的类。我的 Orders.Save() C# 方法将调用我的 Oracle Orders.SaveLineItem 方法来保存每个行项目，并调用 Oracle SaveOrder 方法来保存订单摘要详细信息。
3.  我的 proc 在包内以一种很好的、​​合乎逻辑的方式组合在一起

就个人而言，我希望 MS 能够实现某种包功能，因为我认为它可以使数据库更加干净。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-21T13:29:19.407

未提及的包装的另一项功能是“包裹”身体的能力。标头始终是公开的，任何有权执行包的人都可以查看。但这也允许他们查看正文中的代码。您可以包装主体，对其进行加密，并防止任何人看到代码实际在做什么。它是一个很好的功能，安全性是一个大问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T15:04:46.083

3) 反对 oracle 包的最佳论据是，根据 Ask Tom 网站上的经验和研究，如果不将包脱机，就无法更新包。这是无法接受的。使用 SQL Server，我们可以在不中断生产操作的情况下即时更新存储过程。

我理解这种说法的挫败感，但我不会称 id 为“不可接受的”。在真实的生产环境中，永远不应该在生产环境中测试更改。更新应按计划有序地从测试环境转移到生产环境。在 24/7 系统中，冗余生产环境应在服务器更新时处理停机时间。不仅包必须脱机，而且新包如果未编译，则在重新联机时将失败。Oracle 数据库需要一个 DBA 元素。但是，我确实想念 Oracle 软件包。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-21T18:16:47.163

看到一个人如何情绪化地克服这样一个枯燥的话题，这有点有趣。Oracle 有一个特性，SQL Server 似乎并没有对这个特性的有争议的特性产生各种反应。

对于初学者来说，问题在于风格：Oracle 中的这个特性在 SQL Server 中被遗漏了，推荐的方法是什么。

无需为此情绪激动。

对于那些不喜欢 Oracle 中的打包功能的人——无论出于何种原因——他们仍然可以像使用 SQL Server 那样做。

更详细地讲，样式中可能会有一个后续问题：当修改包中的函数或过程时，整个包都无效并且这“糟透了”，推荐的避免吸吮方面的方法是什么.

就个人而言，我从未见过有人抱怨无法修改可执行文件中的静态链接库而无需重新链接它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-03-09T19:55:29.450

1.  就像人们所说的那样，Schema 是一种更符合逻辑且更符合 ANSI 的组织数据库表和过程的方式。

2.  软件工程的最佳实践是我们永远不应该直接在任何服务器上进行更改。由于所有数据库存储过程都是脚本化的并且在配置控制下，我们可以将这些脚本安排到我们想要的任何文件夹结构中。

（来自 AskTom 的过时信息已被删除）

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-04-21T20:19:01.510

我要感谢我的幸运星，SQL Server 没有包。Oracle 软件包很烂。

> 嗯，我们需要一种方法来处理所有这些程序并将它们放在一个地方。我知道！让我们让开发人员为每个包创建和维护两个文件。他们会永远爱我们！

只要 MS 从未像 Oracle 那样实现软件包，在我看来这就是胜利。

编辑评论者：

Oracle 包只是一种将存储过程组织成包的方法，这样您就没有 100 个存储过程，而是可能有 5 个包。它们不像 Java 或 C# 代码中的包那样可堆叠。所有软件包都处于同一级别。

一个包需要两个文件：头文件和正文文件。这在将新过程添加到现有包时会产生挫败感，因为如果不添加标头就无法添加主体，即使它包含与主体中完全相同的信息。

例如，这是我的一个包的头文件中的一个片段：

```
 PROCEDURE bulk_approve_events
(
    i_last_updated_by IN VARCHAR2,
    o_event OUT NUMBER
); 
```

这是正文中的相应过程：

```
 PROCEDURE bulk_approve_events
(
    i_last_updated_by IN VARCHAR2,
    o_event OUT NUMBER
) IS
...
BEGIN
...
END; 
```

没有不同。头文件是无用的，只是开发人员在使用包进行开发时要跨越的另一个障碍。在我的项目中，我们有一个约定，每个过程的所有注释文档都放在标题中，以及添加时间和添加者的详细信息，但这也可以很容易地包含在正文中。

# php - 是否有用于处理用户评论的开源类？

> ID：770307
> 
> 赞同：-1
> 
> 时间：2009-04-20T22:07:10.963
> 
> 标签：php, open-source, class, comments

我只是想知道是否有人知道已经存在用于处理用户评论的类。我总是可以自己写，但我想如果有一个轮子，我不会重新发明轮子。

我希望能够显示评论表单、操作/验证/清理用户输入，以及可能的更多功能，例如插入数据库。

如果有人知道任何已经实现这种东西的类/包，如果他们可以分享，我会很高兴。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T22:35:13.593

除了与第 3 方 ASP 风格的供应商（如[Pluck](http://pluck.com/)）合作之外，我不确定您是否会找到类似的东西。

我已经看到支持 ORM 中的注释的组件（例如symfony 中用于 Propel 的[Commentable Behavior Plugin](http://www.symfony-project.org/plugins/sfPropelActAsCommentableBehaviorPlugin)），但这并没有为您提供表单、清理、显示、用户验证等方面的任何东西。

然后是功能问题：你想要可标记的评论吗？丰富的 HTML？表情符号？网址解析？嵌套评论？审核工具？脏话过滤？

我想所有这一切都在很大程度上取决于您将其添加到哪种类型的现有系统中（您可以利用 AJAX？MVC？回发？等）但实际上我认为这是一个相当广泛的话题，这就是为什么您可能会只是想自己动手。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-20T23:53:45.357

另一个第 3 方选项是 www.kickapp.com，这似乎相当不错。

# jquery - replaceWith 后未注册的事件

> ID：770308
> 
> 赞同：19
> 
> 时间：2009-04-20T22:07:12.647
> 
> 标签：jquery, events, dom

当我`replaceWith`将一个元素从 DOM 中取出，然后`replaceWith`将其重新放入时，注册到它的事件不会触发。我需要事件保持完整。

这是我的 Javascript：

```
var replacement = $(document.createElement('span'));
var original = $(this).replaceWith(replacement);

replacement
    .css('background-color', 'green')
    .text('replacement for ' + $(this).text())
    .click(function() {
        replacement.replaceWith(original);
    }); 
```

[**现场演示**](http://liranuna.com/strager/b/replace-with.html)

在演示中，当您单击一个元素时，它会被另一个元素替换，使用`replaceWith`. 当您单击新元素时，它会被替换为使用 的原始元素`replaceWith`。但是，点击处理程序不再起作用（我认为它应该）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-20T22:15:27.543

因为当您替换原始元素时，绑定到它的事件将被删除。您需要在调用后重新附加`click`事件处理程序：`original``replacement.replaceWith(original)`

```
$(function() 
{   
   function replace() 
   {
      var replacement = $(document.createElement('span'));
      var original = $(this).replaceWith(replacement);

      replacement
         .css('background-color', 'green')
         .text('replacement for ' + $(this).text())
         .click(function() 
         {
            replacement.replaceWith(original);
            original.click(replace);
         });
   }

   $('.x').click(replace);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-05-14T23:30:58.010

**更新**：`live()`并`bind()`已被弃用，支持[`on()`](http://api.jquery.com/on/).

您可以使用[live()](http://api.jquery.com/live/)和[bind()](http://api.jquery.com/bind/)事件，这是您的新代码：

```
$(function() {
$('.x').live('click', function() {
    var replacement = $(document.createElement('span'));
    var original = $(this).replaceWith(replacement);

    replacement
        .css('background-color', 'green')
        .text('replacement for ' + $(this).text())
        .bind('click', function() {
            replacement.replaceWith(original);
        });
});
}); 
```

-Live 事件适用于 jQuery 1.3 及更高版本。

- 如果您想停止实时传播，请使用[die()](http://api.jquery.com/die/)函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-20T23:53:00.037

[现场活动](http://docs.jquery.com/Events/live)是您正在寻找的

# python - 如何将 Python 代码构造成模块/包？

> ID：770320
> 
> 赞同：3
> 
> 时间：2009-04-20T22:10:08.803
> 
> 标签：python, module, package

假设我有这个准系统结构：

```
project/
  main.py
  providers/
    __init.py__
    acme1.py
    acme2.py
    acme3.py
    acme4.py
    acme5.py
    acme6.py 
```

假设`main.py`包含（部分）：

```
if complexcondition():
  print providers.acme5.get() 
```

哪里`__init__.py`是空的并且`acme*.py`包含（部分）：

```
def get():
  value=complexcalculation()
  return value 
```

如何更改这些文件才能正常工作？

注意：如果答案是“import acme1”、“import acme2”等等`__init__.py`，有没有办法在不手动列出它们的情况下完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-02-09T10:25:23.187

嘿！两年后，但……也许对某人有帮助

让你的**providers/__init__.py**像这样：

```
import os
import glob

module_path = os.path.dirname(__file__)
files = glob.glob(os.path.join(module_path, 'acme*.py'))
__all__ = [os.path.basename(f)[:-3] for f in files] 
```

**如果添加或删除任何提供程序/acme*.py**，您以后不必更改它

 **然后`from providers import *`在**main.py中使用**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T02:06:01.950

如果我正确阅读了您的问题，那么您似乎并没有尝试进行任何动态导入（就像 Van Gale 提到的问题中一样），而是实际上只是尝试导入提供程序包中的所有模块。如果是这样的话，`__init__.py`你会想要这样的声明：

```
__all__ = ["acme1", "acme2", "acme3", "acme4", "acme5", "acme6"] 
```

然后导入您将使用的所有内容 from ... import *

```
from providers import * 
```

然后不用在代码中显式使用包名，只需调用导入的类

```
acme1.get()
acme2.get() 
```

如果提供程序包中有足够多的模块，以至于填充`__all__`列表成为问题，您可能需要考虑将它们分解成更小的包或以其他方式存储数据。我个人不想每次我想重用包时都必须处理动态导入 schennagins。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-20T22:28:51.487

今天问的这个问题[，Python 模块的动态加载](https://stackoverflow.com/questions/769534/dynamic-loading-of-python-modules)，应该会有你的答案。

# cruisecontrol.net - Cruisecontrol.net 文件观察器

> ID：770325
> 
> 赞同：1
> 
> 时间：2009-04-20T22:11:24.400
> 
> 标签：cruisecontrol.net

是否有文件监视任务 insdie Cruisecontrol.net ？？？我正在尝试查看是否可以让 cruiscontrol 监视文件，并在文件更新时运行我的可执行文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T11:24:23.450

您可能需要[文件系统控制块](http://confluence.public.thoughtworks.org/display/CCNET/Filesystem+Source+Control+Block)。

# perl - 如何在 Perl 中将四个字符转换为 32 位 IEEE-754 浮点数？

> ID：770342
> 
> 赞同：11
> 
> 时间：2009-04-20T22:16:19.460
> 
> 标签：perl, floating-point, ieee-754

我有一个项目，其中一个函数接收四个 8 位字符，需要将生成的 32 位 IEEE-754 浮点数转换为常规 Perl 数字。似乎应该有比下面的工作代码更快的方法，但我无法找出一个更简单的 pack 函数。

它不起作用，但似乎很接近：

```
$float = unpack("f", pack("C4", @array[0..3]);  # Fails for small numbers 
```

作品：

```
@bits0 = split('', unpack("B8", pack("C", shift)));
@bits1 = split('', unpack("B8", pack("C", shift)));
@bits2 = split('', unpack("B8", pack("C", shift)));
@bits3 = split('', unpack("B8", pack("C", shift)));
push @bits, @bits3, @bits2, @bits1, @bits0;

$mantbit = shift(@bits);
$mantsign = $mantbit ? -1 : 1;
$exp = ord(pack("B8", join("",@bits[0..7])));
splice(@bits, 0, 8);

# Convert fractional float to decimal
for (my $i = 0; $i < 23; $i++) {
    $f = $bits[$i] * 2 ** (-1 * ($i + 1));
    $mant += $f;
}
$float = $mantsign * (1 + $mant) * (2 ** ($exp - 127)); 
```

有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-20T22:54:34.890

我会采取相反的方法：忘记拆包，坚持玩弄。

首先，组装你的 32 位字。根据字节顺序，这可能必须是相反的：

```
my $word = ($byte0 << 24) + ($byte1 << 16) + ($byte2 << 8) + $byte3; 
```

现在提取单词的部分：符号位、指数和尾数：

```
my $sign = ($word & 0x80000000) ? -1 : 1;
my $expo = (($word & 0x7F800000) >> 23) - 127;
my $mant = ($word & 0x007FFFFF | 0x00800000); 
```

组装你的花车：

```
my $num = $sign * (2 ** $expo) * ( $mant / (1 << 23)); 
```

[维基百科](http://en.wikipedia.org/wiki/IEEE_754-1985)上有一些例子。

*   在 0xC2ED4000 => -118.625 上对此进行了测试，并且可以正常工作。
*   在 0x3E200000 => 0.15625 上对此进行了测试，发现了一个错误！（固定的）
*   不要忘记在 $expo == 255 时处理无穷大和 NaN

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T08:09:20.797

最好的方法是使用[pack()](http://perldoc.perl.org/functions/pack.html)。

```
my @bytes = ( 0xC2, 0xED, 0x40, 0x00 );
my $float = unpack 'f', pack 'C4', @bytes; 
```

或者，如果源和目标具有不同的字节序：

```
my $float = unpack 'f', pack 'C4', reverse @bytes; 
```

您说这种方法“不起作用-似乎很接近”和“对小数字失败”，但您没有举例。我猜你实际上看到的是四舍五入，例如，一个数字被打包为 1.234，但它被解包为 1.23399996757507。这不是 pack() 的函数，而是 4 字节浮点数的精度。

# c++ - Visual C++ - 将插件 DLL 与 EXE 链接？

> ID：770344
> 
> 赞同：11
> 
> 时间：2009-04-20T22:17:35.680
> 
> 标签：c++, visual-studio-2008, visual-c++, dll, plugins

我正在将大型 C++ 应用程序从 Linux (gcc) 移植到 Windows (Visual C++ 2008) 并且遇到插件的链接器问题。在 Linux 上这不是问题，因为 .so 支持运行时符号查找，但 dll 似乎不支持这一点。

一些背景信息： 托管脚本环境的应用程序（主机）为插件（在运行时通过脚本 API 调用加载的共享库）提供接口，允许在不重新编译主机应用程序的情况下扩展主机和脚本 API . 在 Linux 上，这只是将主机应用程序的标头包含在插件源中的问题，但在 Windows 上，我收到链接器错误。我不确定我需要链接什么来让 Visual C++ 解析这些符号。

我们的依赖项之一（开源，LGPL）具有预处理器声明，用于将 __declspec(dllexport) 和 __declspec(dllimport) 插入其标头。一些先前的研究表明我可能也必须这样做，但在我去修改一大堆核心头文件之前，我想确定一下。（我之前能够在 MinGW 上完成这项工作，但我们决定支持 Visual Studio 是此类商业项目的一项要求。）

简而言之，我的问题是：**如何将运行时加载的 dll 与 Visual C++ 中的主机 exe 链接起来？**

编辑：为了澄清一个例子的问题，我在我的主机应用程序中有一个类**Object**，它表示可以由脚本访问的对象的基本类型。在我的插件中，我有许多扩展**Object**以执行其他功能的类，例如集成网络支持或新的视觉元素。这意味着我的 dll 必须与主机 exe 中的符号链接，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-20T22:34:56.607

“运行时符号查找”是什么意思？您的意思是使用`dlopen`等动态加载`dlsym`库[吗](http://linux.die.net/man/3/dlopen)？[Windows](http://msdn.microsoft.com/en-us/library/ms684175(VS.85).aspx)中的等价物称为`LoadLibrary`和`GetProcAddress`。

在 Windows 中，您不会从可执行文件中导出符号。您应该只从 dll 中导出它们。解决问题的正确方法是重新架构，以便导出的符号位于可执行文件和其他插件 dll 可以链接的 dll 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T22:45:17.627

你不能，很容易。Windows 加载程序并非旨在将符号导出 EXE 并将它们绑定到 DLL 中的符号。

我见过的一种模式是 DLL 导出 EXE 调用的某个函数。它将一个结构作为参数，该结构包含 DLL 调用的 EXE 中的函数地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:10:05.287

我一直在实现相同的功能，构建了一个在 Linux 和 Windows 下构建的插件库。

Linux下的解决方案是在gcc命令行中使用-rdynamic选项。这会导出主可执行文件中的所有符号，以便插件可以在加载时找到它们。

在 Windows 下，解决方案是在您希望 dll 使用的 exe 中的那些函数的定义前面添加 __declspec(dllexport)。编译将为要链接的 dll 创建一个 .lib 文件。当然可以在 Visual Studio 2008 下工作。相关帖子：[https ://stackoverflow.com/a/3756083/1486836](https://stackoverflow.com/a/3756083/1486836)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T23:48:35.603

正如 1800 INFORMATION 所说，不要那样做。将对象从可执行文件中移出并放入“第三个”DLL。链接插件和可执行文件。

# .net - ASMX 用户名和密码安全

> ID：770345
> 
> 赞同：8
> 
> 时间：2009-04-20T22:18:31.637
> 
> 标签：.net, web-services, login, asmx

我有一个我正在尝试运行的基本 ASMX 服务（我宁愿使用 WCF，但无法让服务器使用它）。它在没有安全设置的情况下运行良好，但是一旦我打开安全性，我就会得到：

> HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“基本领域=“安全区域”。

我想要的是一个简约*的询问用户名称和密码*类型的解决方案。

用智能感知浏览代码并没有找到我需要的任何东西。

[这](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/2b2ba3d3-8a0d-49b7-b951-bf2cb18362bd)看起来可能很有用，但它似乎是 WCF，所以谁知道。

* * *

我刚刚意识到我可以把它变成一个现场演示：

这里是服务：[http ://smplsite.com/sandbox3/Service1.asmx](http://smplsite.com/sandbox3/Service1.asmx)

用户名是`testapp`，密码是`testpw`。我需要一个命令行应用程序来调用该服务上的函数。

在我添加安全性之前，这条线在`Add Web Service Reference`该 URL 上运行后在一个基本的 VS 项目中工作

```
new ServiceReference1.Service1SoapClient().HelloMom("Bob"); 
```

这是我目前的尝试（不起作用）

```
class Program
{
    private static bool customValidation(object s, X509Certificate c, X509Chain ch, SslPolicyErrors e)
    { return true }

    static void Main(string[] args)
    {
         // accept anything
        ServicePointManager.ServerCertificateValidationCallback += 
              new RemoteCertificateValidationCallback(customValidation);

        var binding = new BasicHttpBinding(BasicHttpSecurityMode.Transport);
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;
        binding.Security.Transport.Realm = "Secured area";

        // the generated Web Service Reference class
        var client = new ServiceReference1.Service1SoapClient(
            binding,
            new EndpointAddress("https://smplsite.com/sandbox3/Service1.asmx")
            );

        client.ClientCredentials.UserName.UserName = "testapp";
        client.ClientCredentials.UserName.Password = "testpw";

        Console.WriteLine(client.HelloMom("Bob"));
    }
} 
```

* * *

*编辑：*顺便说一句，这不是网站或在浏览器中运行，访问代码是*C# 命令行应用程序*。此外，身份验证是由我无法控制的另一个 IIS 插件完成的。

*编辑2：*要清楚；我正在寻找的解决方案是纯粹的客户端问题。

*编辑 3：*访问​​控制是通过一种`.haccess`系统进行的，我喜欢这种方式。我不希望服务代码进行任何身份验证。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-20T23:00:46.623

编辑：
如何使用这个：

```
MyWebService svc = new MyWebService();            
svc.Credentials = new System.Net.NetworkCredential(UserID, pwd);
bool result = svc.MyWebMethod(); 
```

OP 说这行不通，现在我发现在他的情况下它行不通。

我们做这样的事情：

```
public class MyWebService : System.Web.Services.WebService
{
    public AuthenticationHeader AuthenticationInformation;

    public class AuthenticationHeader : SoapHeader
    {
        public string UserName;
        public string Password;
    }

    [WebMethod( Description = "Sample WebMethod." )]
    [SoapHeader( "AuthenticationInformation" )]
    public bool MyWebMethod()
    {
        if ( AuthenticationInformation != null )
        {
            if ( IsUserAuthenticated( AuthenticationInformation.UserName,   
                 AuthenticationInformation.Password, ref errorMessage ) )
            {
                 // Authenticated, do something
            }
            else
            {
                 // Failed Authentication, do something
            } 
        }
        else
        {
                 // No Authentication, do something
        }
    }
} 
```

请注意，您提供 IsUserAuthenticated()。

然后客户端这样调用它：

```
 MyWebService svc = new MyWebService();            
 svc.AuthenticationHeaderValue = new MyWebService.AuthenticationHeader();
 svc.AuthenticationHeaderValue.UserName = UserID;
 svc.AuthenticationHeaderValue.Password = Password;

 bool result = svc.MyWebMethod(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T14:27:41.550

我将添加一个新的答案，因为我认为这可能会有所帮助：

[http://intellitect.com/calling-web-services-using-basic-authentication/](http://intellitect.com/calling-web-services-using-basic-authentication/)

我不会在这里复制它，因为除了谷歌它我什么也没做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T18:28:42.140

配置：

```
<binding name="MyBinding" closeTimeout="00:00:30"
      openTimeout="00:00:30" receiveTimeout="00:00:30" sendTimeout="00:00:30"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="524288" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"
      textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true"
      messageEncoding="Text">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="Basic" realm=""/>
      </security>
    </binding>
  </basicHttpBinding> 
```

消费时

```
proxy.ClientCredentials.UserName.UserName = userName;
proxy.ClientCredentials.UserName.Password = password; 
```

这对我来说很好。

# c# - C# HttpWebReqest - 转义 POST 内容？

> ID：770355
> 
> 赞同：6
> 
> 时间：2009-04-20T22:26:41.010
> 
> 标签：c#, httpwebrequest, escaping

过去，当我将 C# 应用程序中的内容上传到网站时，我使用了这样的 POST 请求：

```
 HttpWebRequest wr = (HttpWebRequest)WebRequest.Create("http://" + this.server + "/log.php");
    wr.Method = "POST";
    wr.ContentType = "application/x-www-form-urlencoded";
    string paramString = "v=" + this.version + "&m=" + this.message;
    wr.ContentLength = paramString.Length;
    StreamWriter stOut = new StreamWriter(wr.GetRequestStream(), System.Text.Encoding.ASCII);
    stOut.Write(paramString);
    stOut.Close(); 
```

我的问题是，现在我`this.message`很可能会包含换行符、制表符和特殊字符，包括“&”和“=”。我是否需要转义此内容。如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-20T22:29:22.953

您可以根据需要使用 HttpUtility.HtmlEncode/HtmlDecode 或 UrlEncode/UrlDecode。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-20T22:46:21.087

仅供参考，我的问题的解决方案是：

[`System.Web.HttpUtility.UrlEncode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)

所有版本的 .Net 框架都支持它=p

具体来说，我正在使用将[字符串作为参数](http://msdn.microsoft.com/en-us/library/4fkewx0t.aspx)的重载。在所有参数值上运行它将使它们对 POST 安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-07T20:21:34.623

System.Web 已过时 - 请`System.Net.WebUtility`改用...

# ruby-on-rails - 为什么 Association.build 不会将 parent_id 分配给它的孩子？

> ID：770360
> 
> 赞同：4
> 
> 时间：2009-04-20T22:28:54.937
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

我有以下型号：

计划中.rb

```
has_many :tickets 
```

在ticket.rb中

```
belongs_to :plan
validates_presence_of :plan_id 
```

在控制器中执行以下代码时

```
@plan.tickets.build( ... )
@plan.save 
```

保存失败，错误消息为票证：计划不能为空。（计划有效。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T01:20:42.760

当我调用`build`它时我的对象是新的并且未保存时，我已经发生了这种情况。

`build`分配`plan_id`, 如果`@plan`的 id 为 nil，那么您的票证`plan_id`将为 nil。因为`build`不验证或保存，所以直到以后才发现。

将关联对象添加到未保存对象的其他方法似乎记住它未保存并适当地设置 id。所以试试这个：

```
 @plan.tickets << Ticket.new(...)
 @plan.save 
```

# java - 在 Java 应用程序中处理版本号的好方法是什么？

> ID：770364
> 
> 赞同：25
> 
> 时间：2009-04-20T22:30:29.987
> 
> 标签：java, version

我正在使用 Java 和 Swing 应用程序框架开发桌面应用程序。我有一个关于盒子的应用程序，我想让那个盒子包含一些正在测试的版本的指示。我的偏好是以自动方式更改该值。我正在使用 CruiseControl 构建应用程序，触发对 SVN 的提交。

其他人使用什么机制来完成这项工作？是否有我可以在构建过程中放置​​的 about box 版本号库或一组 ant 相关工具？

我不是在寻找部署选项，也不是在寻找自动检查更新或类似的东西。我只想能够询问测试人员关于框中的版本是什么，并得到一个可靠的答案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-20T22:52:22.540

我将首先说明我使用[Apache Maven](http://maven.apache.org/)来构建这篇文章。您也可以使用 Ant 或其他工具做类似的事情，但这是我使用 maven 所做的。

我发现处理此问题的最佳方法是使用项目的版本加上颠覆修订作为内部版本号。从 Maven 中，您可以包括以下内容。这将为您提供作为 ${scm.revision} 的 subversion 修订号。

```
<build>
    <plugins>
      <plugin>
        <artifactId>maven-scm-plugin</artifactId>
        <executions>
          <execution>
            <id>getting-scm.revision</id>
            <phase>validate</phase>
            <goals>
              <goal>update</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

之后，我将其用作 jar 文件清单的一部分作为实现版本。

```
 <plugin>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.1</version>
    <configuration>
      <archive>
        <manifestEntries>
          <Implementation-Version>${this.version}.${scm.revision}</Implementation-Version>
        </manifestEntries>
      </archive>
    </configuration>
  </plugin> 
```

这样做的好处是您可以使用以下代码从代码中访问它：

```
Package p = getClass().getPackage();
String version = p.getImplementationVersion(); 
```

这为您提供了完整的内部版本号，例如“1.0.13525”，其中最后一个数字是颠覆修订版。有关设置的更多信息，您可以查看我不久前就这个问题所做的完整[博客文章。](http://chrisdail.com/2008/04/17/building-with-maven/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-20T22:41:08.167

让构建脚本创建一个包含版本的属性文件。直接从 SVN 获取修订号是个好主意。这样你就可以在测试中引用它。将此属性文件放入打包的 jar 中并在运行时读取它。我们通常将主要和次要版本设置为 ant scrpt 的参数，而修订版由 SVN 自动管理并为参考提供一致的内部版本号。

这个片段目标运行 svn 命令行并输出到一个临时文件 (svndump)。然后构造 xx.yy.zz 字符串，将其放在另一个文件中，该文件稍后将包含在 jar 中。注意xx.yy取自外部参数，这是major-minor版本。

```
<target name="getrev">
    <exec executable="svn" output="svndump">
        <arg value="info"/>
        <arg value="${my.svn.url}"/>
    </exec>

    <property file="svndump"/>
    <property name="my.build" value="${Revision}"/>
    <property name="my.rev" value="${my.ver}.${my.build}"/>
    <echo message="current revision is ${my.rev}"/>

    <property name="my.dir.dist" value="${my.dir.root}/dist/${my.rev}"/>
    <echo message="${my.rev}" file="${my.dir.projects}/revision"/>

    <delete file="svndump"/>
</target> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-20T22:49:40.907

在 Maven 中，我使用了[buildnumber-maven-plugin](http://mojo.codehaus.org/buildnumber-maven-plugin/)，它从 Subversion 获取修订号，或者使用序列或时间戳，然后用于替换`${buildNumber}`您喜欢的占位符。我想其他构建工具和持续集成服务器也有类似的功能。使用“<your-tool> build number”搜索您最喜欢的搜索引擎。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-20T22:32:27.453

你把事情弄得太复杂了。SVN 以宏的形式提供版本号，就像 CVS 一样。

创建一个包含常量的简单接口，并让 SVN 通过宏实例化它，比如

```
public interface IVersionNumber {
    public static final String version = "$Id$" ;
} 
```

您需要告诉 SVN 在该文件上使用关键字，如

> $ svn propset svn:keywords "Id" IVersion.java

[您可以在此处](http://svnbook.red-bean.com/en/1.0/ch07s02.html)阅读有关属性的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-20T23:57:03.460

我们已经使用[JReleaseInfo](http://jreleaseinfo.sourceforge.net/)很长时间了。您可以在您的 Ant 脚本中设置它（我们的项目不使用 Maven），它会自动调整版本号。它还有一些很好的补充，因为它生成了一个包含所有信息的类。您可以在代码中调用该类以准备好使用的字符串，或从命令行调用该类以使其打印出版本号，而无需更改任何代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T13:18:52.957

由于我使用[巡航控制](http://cruisecontrol.sourceforge.net/)和[Ant](http://ant.apache.org/)来构建所有内容，因此至少现在我最终使用传递给 ant 调用的[${label}](http://cruisecontrol.sourceforge.net/main/configxml.html#schedule)属性来构建项目。在我的 ant 文件中，我使用 Ant 的[“替换”任务](http://ant.apache.org/manual/Tasks/replace.html)来更改包含名为 Application.version 的 about 框资源的属性文件以包含该标签。

我打算从[标签增量](http://cruisecontrol.sourceforge.net/main/configxml.html#labelincrementer)器更改为[svn 标签增量](http://cruisecontrol.sourceforge.net/main/configxml.html#svnlabelincrementer)器，然后以这种方式使用 svn 修订号。它只是多一点工作，它需要我对巡航控制配置文件进行更改。

# cocoa - 在基于文档的 Cocoa 应用程序中实现导出功能的公认方法是什么？

> ID：770370
> 
> 赞同：3
> 
> 时间：2009-04-20T22:34:05.390
> 
> 标签：cocoa, design-patterns, events, document

我有一个简单的基于文档的 Cocoa 应用程序，它充当 .wav 文件的查看器，以进行一些频率分析。我希望能够将从打开的文件中收集的数据导出到 CSV，以便在其他程序中进行进一步分析。

Cocoa 中基于文档的应用程序框架允许您覆盖

```
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError 
```

实现默认的 Save/Save As... 工作流程，但我不想写我打开的文件。

显而易见的事情是在我的文档中实现导出工作流，显示文件保存表，构建一些 NSData，并将其写入文件路径，但是没有明显的方法可以将 MainMenu nib 中的插座连接到对文档控制器的操作。

那么，在基于文档的 Cocoa 应用程序中实现此类功能的公认方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T22:43:18.660

您可以在 MainMenu.nib 的“First Responder”对象中创建一个名为“export:”的新操作并连接到它。然后，在您的文档子类中实现一个 export: 方法。这将调用您的方法。

这样做的原因是发送到神奇的第一响应者对象的消息通过整个响应者链，寻找一些处理它们的对象。该响应者链中的一项是文档，因此当当前选择的控件、视图、超级视图、窗口等都没有处理消息时，文档就有机会。（文档控制器也在那个链上，所以你也可以使用它。）

看看[Apple 的响应者链文档](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html#//apple_ref/doc/uid/10000060i-CH3-SW2)——图 1.10 涵盖了这个特定的路径。

# javascript - 在jQuery中使用getJSON函数时回调函数不起作用

> ID：770381
> 
> 赞同：18
> 
> 时间：2009-04-20T22:36:59.083
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 jQuery 中的 getJSON 函数来导入一些数据并触发回调函数。回调函数不运行。但是，如果我用 get 函数尝试同样的事情，它就可以正常工作。奇怪的是，即使我将“json”作为类型传递，它也可以与 get 函数一起使用。为什么会这样？我在 Firefox 3 和 IE 7 中测试了以下文件：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
<title>ajax test</title>
<script type="text/javascript" src="/jquery-1.3.2.min.js"></script>
</head>
<body>
<input type="button" id="test1" value="get">
<input type="button" id="test2" value="getJSON">
<input type="button" id="test3" value="get with json type">
<script type="text/javascript">
$("#test1").click(function() {
    $.get("index.html",
        function(response) {
            alert('hi');
            //works
        }
    )
});

$("#test2").click(function() {
    $.getJSON("index.html",
        function(response) {
            alert('hi');
            //doesn't work
        }
    )
});

$("#test3").click(function() {
    $.get("index.html",
        function(response) {
            alert('hi');
            //works
        },
        "json"
    )
});
</script>
</body></html> 
```

无论我访问什么 URL，只要它在同一个域上，这似乎都会发生。我尝试传递一些数据，但这并没有什么不同。

当然，我可以像在第三个测试函数中那样使用 get 函数来解决这个问题，但我仍然很好奇为什么会发生这种情况。

我知道这里有一个[类似的问题](https://stackoverflow.com/questions/572991/jquery-getjson-doesnt-trigger-callback)，但它没有回答我的问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-20T22:50:51.093

json 需要有效，否则回调不会触发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-11-30T00:56:32.840

$.getJSON() 是 JSONP，所以这样改：

```
$("#test2").click(function() {
    $.getJSON("index.html?callback=?",
        function(response) {
                alert('hi');
        }
    )
}); 
```

服务器接收到参数回调，其中包含以下内容：jsonp1291077863309。在响应中写回回调函数 jsonp1291077863309(PUT_JSON_HERE)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-09-26T19:18:21.307

对！经过 2 天疯狂尝试`$.getJSON`从服务器接受格式良好的 JSon 字符串后，问题真的出在服务器上！正如 Carl_Platt 所说，您必须将作为 url 参数接收的回调值添加到 json 输出（`$_GET['callback']`在 PHP 中）。这就是所谓的“JSON-P 输出”，以防万一你想用谷歌搜索它。

动手，这里是他们在 PHP 中显示解决方案的页面：

[http://1080d.com/lang/en-us/2009/10/converting-php-to-jsonp-with-json_encode/](http://1080d.com/lang/en-us/2009/10/converting-php-to-jsonp-with-json_encode/)

并记住（非常重要）添加到您调用`callback=?`参数的 url！（仅当您调用的 url 不在为执行 jquery 脚本提供服务的同一服务器中时才需要）...

JQuery 会自动替换 '?' 在将其发送到服务器之前使用方便的值。您无需担心使用哪个值，这对您来说都是无缝的（如果服务器做得正确！这就是我的问题！）:-)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T22:51:03.090

在表面之下，当您调用 时**`getJSON`**，会发生以下情况：

```
// ~ line 3216
getJSON: function( url, data, callback ) {
    return jQuery.get(url, data, callback, "json");
}, // ... rest of jQuery core 
```

所以必须有其他东西阻止回调触发......

我会首先在每个回调中 ** `alert`**ing*不同*的东西（不仅仅是“嗨”），这样你就知道哪个失败/成功了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T22:58:20.153

正如许多其他人所提到的，您需要有效的 JSON（即符合[http://json.org/](http://json.org)的规则）`getJSON`才能工作（这意味着您无法通过`getJSON`示例中的方式获取 HTML）。

最后一个测试有效的原因是最后一个参数“json”没有被解释为“type”。因为以下不起作用：

```
$("#test3").click(function() {
    $.get("index.html",
        '',
        function(response) {
                alert('hi');
                //works
        },
        "json"
    )
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-29T14:27:18.197

尽管有格式良好的 JSON 等，但我遇到了同样的问题。我能够查询我的 web 服务并得到响应，但是，我的回调函数没有触发。在搜索网络之后，我大多数互联网用户都建议使用“jsonp”，因为我的应用程序执行了一些跨域调用，并且还添加了“回调？”，所以我这样做了。到我的网址。这不起作用，但包含返回 JSON 的回调解决了我的问题。下面的代码解释了我的意思：

```
//server side json formed somewhere up here
String data = callback + "("+ json +")" ; 
```

由此产生的响应类似于“ `jsonp1280403476086([{"Name":"Jack Sparrow`”，jQuery似乎没有问题，因此从未对我死去。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-07-11T07:14:22.980

如果您正在使用，请在 MVC2 中使用`$.post`代替,或确保设置为. 否则这将返回导致您的请求不触发回调的 HTML 错误。`$.getJSON()``$.getJSON``$.get``JsonRequestBehavior``AllowGet`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-15T20:02:45.423

确保您的控制器中的 JsonResult 方法上方没有列出 [HttpPost]。这不会将数据返回给 .getJSON 调用。

# apache-flex - 如何在 AIR 中使用 C#？

> ID：770384
> 
> 赞同：5
> 
> 时间：2009-04-20T22:38:58.797
> 
> 标签：apache-flex, air

我在制作 Flex 网站方面有一些基本经验，但我认为 Flex 在制作桌面 AIR 应用程序方面有更多用途。

无论如何，我想知道是否至少可以将 C# 与 Actionscript/AIR 一起使用？我找不到任何这样的例子。

另外，我可以在 Flex 应用程序中使用自定义 Flash 组件吗？我知道我可以使用 Javascript 组件。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-20T22:42:30.830

您的 AIR 选项仅限于 HTML/JS、Flash/ActionScript 或 Flex。不支持其他语言和框架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-11-07T21:19:52.133

您可以创建 C# 控制台应用程序并从 AIR 调用此应用程序。

```
var file:File = File.applicationDirectory;
file = file.resolvePath("CSharpConsoleApplication.exe");
var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();
nativeProcessStartupInfo.executable = file;
nativeProcessStartupInfo.arguments.push("-arg");
var process:NativeProcess = new NativeProcess();
process.addEventListener(NativeProcessExitEvent.EXIT,onProcessDone);
process.start(nativeProcessStartupInfo); 
```

这样我们就有了一个带有 AIR 接口的 C# 应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T17:45:50.030

Slukse 是正确的——这取决于你所说的“旁边”是什么意思。

显然，您不能将 C# 代码编译成 SWF ——我们知道这一点。但您当然可以将 ActiveX 控件嵌入（如 davr 建议的那样）到 .NET Forms 应用程序中，将 SWF 加载到该控件中，并使用 ExternalInterface API 来桥接桌面应用程序中运行的 C# 代码和 SWF 中运行的 ActionScript 代码. 如果您的意思是编写服务器端 C# 代码以呈现 Flex 应用程序可使用的数据，那么当然，您也可以这样做——那里有大量文档介绍如何连接 Flash 或 Flex（或 AIR，通过扩展）应用到各种风格的 Web 服务，包括相对较新的 WCF 东西。

另一种方法是运行独立的 C# 桌面应用程序（例如，服务、控制台应用程序等）并让该应用程序侦听某个本地端口——然后让您的 SWF 使用 Socket 类与该应用程序通信。我现在正在为个人项目做这样的事情（使用 Java，而不是 C#，但想法是一样的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T12:05:33.117

如果“旁边”是指使用 c# 作为中间件连接到数据库（可能是 SQL Server），或者执行远程计算，那么可以。您可以使用远程对象连接到 ac# 服务。午夜编码员生产了一种名为 WebORB 的产品，该产品使用起来相当简单。3.4 版是一个完全免费的版本，如果您在 Air 中构建桌面应用程序就足够了。接下来的两个版本不是免费的，但基本上对您没有真正的优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T23:00:37.123

AIR 的全部意义在于使了解 AS/JS 的 Web 开发人员能够轻松地制作自动移植到 win、linux 和 mac 的桌面应用程序。因此，为什么无法将其连接到其他语言，如 C#、C++ 等，因为 Web 开发人员通常不关心这些语言，如果使用它们，应用程序不再是可移植的（是的，大多数语言都可以通过一些努力移植到其他操作系统，但 AIR 的重点是你可以编写任何你想要的东西，它可以在任何地方运行而无需额外的工作）。

如果您想结合 C# 和 Flash，而不是尝试将 C# 放在 AIR 中，您应该做的是将 Flash 放在 C# 应用程序中。互联网上有各种资源，这是我在快速搜索中找到的一个：[示例：使用带有 ActiveX 容器的外部 API](http://livedocs.adobe.com/flex/2/docs/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001975.html)。搜索时，请确保它谈论的是更新、更高级的 ExternalInterface / External API 方法，而不是老式的 SetVariable/CallFunction/watch 方法。较新的更易于使用并具有更多功能。

此外，是的，您可以在 Flex 应用程序中使用自定义 Flash 组件。通常，您只需在 Flash CS3（或 CS4）中创建一个 SWC，然后在 Flex Builder（或 Flex SDK、或 FlashDevelop 或...）中导入该 SWC

如果您在 Flash CS3 中自己制作组件，您应该使用 Flex Component Kit。它为您提供了一些功能，并放入了样板代码，以使您的 Flash 组件在 Flex 中运行良好。它包含在 Flex Builder/Flex SDK 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T17:48:38.133

我知道这样做的唯一方法是使用 C# Web 服务程序和 AIR/Flex 应用程序与 Web 服务通信。

# python - 通过 dev_appserver 导入 gaeutilities 或任何其他模块

> ID：770385
> 
> 赞同：0
> 
> 时间：2009-04-20T22:39:05.863
> 
> 标签：python, google-app-engine, import

我正在 Windows 机器上开发一个 gae 应用程序。为了进行会话处理，我下载了 gaeutilities 并将其路径（C:\Python25\Lib\site-packages\gaeutilities-1.2.1）添加到注册表（python25 下的“PythonPath”项）。

在我的代码中，这是我导入 gaeutilities Session 类的方式：

从 appengine_utilities.sessions 导入会话

当 gae 引擎 (dev_appserver.py) 尝试导入它时，会引发异常，指出导入错误和“没有名为 appengine_utilities.sessions 的模块”

另一方面，pyscripter 可以找到模块（自动完成功能可用于 Session 类），我可以在 python 解释器中导入模块（与 dev_appserver 使用的相同，python 2.5.4）。

作为补救措施，我创建了一个 PYTHONPATH 环境变量并添加了路径。没有什么变化。

我迷路了。我究竟做错了什么？

重要编辑：我发现自己完全无法导入任何 3rd 方 gae 模块。PYTHONPATH 是正确的，sys.path 是正确的，注册表是正确的，仍然 dev_appserver 抱怨 importerror。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T05:33:16.523

奇怪的。

我会通过 100% 确定使用的`sys.path`确实`dev_appserver.py`包含`C:\Python25\Lib\site-packages\gaeutilities-1.2.1`.

我建议您`sys.path`在由`dev_appserver.py`.

检查 gaeutilities-1.2.1 目录和子目录的权限。也许 python 解释器无法创建`*.pyc`文件或类似的东西。

另一个建议：

将`appengines_utilities`文件夹放在您的应用程序目录（包含您的 app.yaml 文件的目录）中。如果您想将代码上传到谷歌的服务器，我想您无论如何都需要所有第三方的东西。

# apache-flex - 无法从 FLEX (BlazeDS) 调用 EJB

> ID：770391
> 
> 赞同：2
> 
> 时间：2009-04-20T22:42:37.743
> 
> 标签：apache-flex, ejb-3.0, integration, ejb, blazeds

现在我正在玩 Flex 和 Java 集成，并尝试通过单击 Flex 按钮来访问 EJB3 方法，但它给了我空指针错误。

这是我的代码中的内容：

[控制器：]

```
public class homePageController {

    @EJB
    CategoryFacadeRemote categoryFacade;

    public String populateDBWithXMLData(){
        ArrayList<Category> cats = new ArrayList<Category>();

        cats = new QuestionsUtil().getCategories();

        try{
            categoryFacade.createMany(cats);
        }
        catch(EJBException ex){
            ex.printStackTrace();
        }
        System.out.println("SIZE: " + cats.size());

        return "HIIIIII";
    }
} 
```

[类别立面]

```
@Stateless
public class CategoryFacade implements CategoryFacadeLocal, CategoryFacadeRemote {
    @PersistenceContext
    private EntityManager em;

    public void create(Category category) {
        em.persist(category);
    }

    public void createMany(ArrayList<Category> categories){
        for(int i = 0; i < categories.size(); i++){
            create(categories.get(i));
        }
    }

    ...
} 
```

[远程配置.xml]

```
...
<destination id="homePageController">
        <properties>
            <source>homePageController</source>
        </properties>
</destination>
... 
```

[弹性应用程序。文件]

```
...
<mx:RemoteObject id="hcRO" destination="homePageController"></mx:RemoteObject>

<mx:Script>

...
        private function callHomePageController():void{

            hcRO.addEventListener(ResultEvent.RESULT, hcROResultHandler);
            hcRO.addEventListener(FaultEvent.FAULT, hcROFaultHandler);
            hcRO.populateDBWithXMLData();
        }

        private function hcROResultHandler(eve:ResultEvent):void{
            Alert.show("RESULT:" + eve.message.body.toString());
        }

        private function hcROFaultHandler(eve:FaultEvent):void{
            Alert.show("FAULT:" + eve.message.toString());
        }

]]>

</mx:Script>
    <mx:Button x="148" y="222" label="homePageController" click="callHomePageController()" width="262" height="43"/>
</mx:Application> 
```

如果我取消对 EJB 的调用，该程序可以正常工作。我确信解决方案很简单，但我无法弄清楚。

顺便说一句，我使用 Glassfish 作为我的应用程序。服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T22:54:12.940

您使用的是[ejb3 工厂](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1089970)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T23:00:05.580

@EJB 仅适用于托管对象（尤其是 Servlet 和其他会话 Bean）（在默认的通用 Java EE 容器中）。

开箱即用，@EJB 不适用于任何 ol' 类。

Flex 必须对 @EJB 表示法有特定的支持才能工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T22:53:03.287

什么部分是空的？eve.result 应该是您返回的对象。eve.message 是我相信的消息服务。

# asp.net - 如何从其他站点复制 DynamicData 模板？

> ID：770394
> 
> 赞同：0
> 
> 时间：2009-04-20T22:43:44.637
> 
> 标签：asp.net, visual-studio-2008, dynamic-data

我正在尝试在以前存在的网站中开始使用 DynamicData 功能。基本上我正在关注[本教程](http://msdn.microsoft.com/en-us/library/cc668188.aspx "本教程")。当我谈到创建字段模板的部分时，我决定我可以创建一个内置动态数据内容的新站点，然后将文件夹复制过来。

不幸的是，当我这样做并尝试编译时，对于 DynamicData 目录中的几乎每个 .ascx 文件，我都会收到错误“无法加载类型...”。我将“新”项目命名为与先前存在的站点相同，以便名称空间相同......但我想不出还有什么我可能会丢失。

一切看起来都很好，除了 *.ascx.Designer.cs 文件显示在解决方案资源管理器中。我尝试删除一个，然后将该文件复制回目录，但它没有用。我假设我需要对那些做一些特别的事情，以便 Visual Studio 正确处理它们并可以编译？

这是 .aspx 文件之一：

```
<%@ Control Language="C#" CodeBehind="FilterUserControl.ascx.cs" Inherits="EService.FilterUserControl" %>

<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true" 
    EnableViewState="true" ontextchanged="new">
    <asp:ListItem Text="All" Value="" />
</asp:DropDownList> 
```

这是匹配的 .cs 文件：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Collections.Specialized;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Xml.Linq;
using System.Web.DynamicData;

namespace EService
{
    public partial class FilterUserControl : System.Web.DynamicData.FilterUserControlBase
    {
        public event EventHandler SelectedIndexChanged
        {
            add
            {
                DropDownList1.SelectedIndexChanged += value;
            }
            remove
            {
                DropDownList1.SelectedIndexChanged -= value;
            }
        }

        public override string SelectedValue
        {
            get
            {
                return DropDownList1.SelectedValue;
            }
        }

        protected void Page_Init(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                PopulateListControl(DropDownList1);

                // Set the initial value if there is one
                if (!String.IsNullOrEmpty(InitialValue))
                    DropDownList1.SelectedValue = InitialValue;
            }
        }
    }
} 
```

这是 .ascx.designer.cs 文件：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:2.0.50727.1433
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace EService
{

    public partial class FilterUserControl
    {

        protected System.Web.UI.WebControls.DropDownList DropDownList1;
    }
} 
```

编辑：如果我在网站中创建文件，然后从我创建的临时网站复制内容，它似乎编译得很好。真的不知道这里的问题是什么......我尝试手动修改文件以匹配复制的结果，除非我实际在站点中创建它们，否则它们仍然无法工作。真是奇怪……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T20:48:26.527

问题是由于临时站点使用 CodeBehind 属性而不是 CodeFile 属性创建了 <%@ Control > 定义。由于某些原因，实际网站中的页面只有在声明 CodeFile 时才会编译...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T08:20:57.220

DD 将与**网站**或**Web 应用程序**一起使用。但是，当从其他项目中复制时，类型需要相同，否则需要进行大量编辑才能转换我的文章在此处[获取动态数据期货过滤器在基于文件的网站中工作。](http://csharpbits.notaclue.net/2008/09/dynamic-data-futures-advanced-filters.html)

# ruby-on-rails - [X,Y,Z].each {|m| 有什么区别？包括 m} 并包括 X、Y、Z？

> ID：770408
> 
> 赞同：8
> 
> 时间：2009-04-20T22:51:03.183
> 
> 标签：ruby-on-rails, ruby

**注意**这最初是作为一个关于 404 错误的问题开始的，但现在是一个问题，为什么我应用的补丁会有所作为。

您如何获得缓存操作以对引发 ActiveRecord::RecordNotFound 异常的所有请求返回 404，而不仅仅是第一个请求？

例如，如果你启动一个空的 rails 项目，添加一个 Product 模型和控制器，设置你的 database.yml，在 production.rb 中设置你的缓存后端，rake db:migrate，然后在生产中启动并点击站点以获取非存在的对象，例如[http://localhost:3000/product/show/1234](http://localhost:3000/product/show/1234)

```
class ProductController < ApplicationController

  caches_action :show

  def show
    @product = Product.find(params[:id])
    render :text => "asdf"
  end

end 
```

第一次命中页面，按预期返回404页面。但是，随后对该 URL 的每次点击都会返回一个带有 200 OK 的空白页面。你如何让它每次都返回404？

这是 CURL 请求，后面是日志

```
~ $ curl -I http://0.0.0.0:3000/product/show/1234
HTTP/1.1 404 Not Found
Connection: close
Date: Mon, 20 Apr 2009 22:49:18 GMT
Content-Type: text/html; charset=utf-8
Cache-Control: no-cache
Content-Length: 14097

~ $ curl -I http://0.0.0.0:3000/product/show/1234
HTTP/1.1 200 OK
Connection: close
Date: Mon, 20 Apr 2009 22:49:19 GMT
X-Runtime: 6
Content-Type: text/html; charset=utf-8
Cache-Control: no-cache
Content-Length: 0 
```

第二个回答显然是错误的。

这是 2 个请求的日志副本：

```
Processing ProductController#show (for 127.0.0.1 at 2009-04-20 17:35:24) [GET]
  Parameters: {"id"=>"1234"}

ActiveRecord::RecordNotFound (Couldn't find Product with ID=1234):
  app/controllers/product_controller.rb:6:in `show'

Rendering rescues/layout (not_found)

Processing ProductController#show (for 127.0.0.1 at 2009-04-20 17:35:30) [GET]
  Parameters: {"id"=>"1234"}
Filter chain halted as [#<ActionController::Caching::Actions::ActionCacheFilter:0x23e36d4 @options={:cache_path=>nil, :store_options=>{}, :layout=>nil}>] rendered_or_redirected.
Filter chain halted as [#<ActionController::Filters::AroundFilter:0x23e3580 @kind=:filter, @options={:unless=>nil, :if=>nil, :only=>#<Set: {"show"}>}, @method=#<ActionController::Caching::Actions::ActionCacheFilter:0x23e36d4 @options={:cache_path=>nil, :store_options=>{}, :layout=>nil}>, @identifier=nil>] did_not_yield.
Completed in 12ms (View: 0, DB: 0) | 200 OK [http://0.0.0.0/product/show/1234] 
```

事实上，如果你将缓存的动作从缓存中拉出来，它里面就会有一些空垃圾。

```
cache.fetch("views/0.0.0.0:3000/product/show/1234")
=> ["", nil, [], []] 
```

我在这里做错了什么？

**编辑**

我已经确认 Rails 2.1.2 和 2.2.2 不会出现这种行为，但 2.3.2 会。（即旧版本不会将空响应存储到缓存中，并且它们确实会为后续请求抛出 404）

我在测试边缘 Rails 时遇到问题，因为在启动服务器时加载它会导致以下错误： foobar/vendor/rails/activesupport/lib/active_support/dependencies.rb:440:in `load_missing_constant': uninitialized constant ActionController::故障安全 (NameError)

我已经针对 2-3-stable 分支的当前负责人 375e8976e3 进行了测试，它也表现出这种行为。

**编辑#2** 我试图追踪 Rails 代码库中发生更改的时间，以确定它是否是故意的。似乎[这个看似无害的提交](http://github.com/rails/rails/commit/2e1132fad8fa2ab58476b9ecc30523ed02a43181)是错误开始的地方。

这是二等分的细节，其中 404 表示期望的行为，200 表示不期望的行为。

```
2-3-稳定分支
    375e8976e3 - 200
    b1c989f28d - 200
    因为1f2e15 - 200
    f1fff0a48 - 200
    f1e20ce9a7 - 200
    a5004573d8 - 200
    2e1132fad8 - 200 - 差异似乎从这个提交开始
    c69d8c043f - 404
    d961592886 - 404
    276ec16007 - 404
    0efec6452 - 404
    13c6c3cfc5 - 404
    FB2325e35 - 404

2-2 稳定
    3cb89257b4 - 404

```

这是一个逆转更改的补丁，当应用于标签 v2.3.2.1，即 dc88847e5ce392eed210b97525c14fca55852867 时，修复了该问题。然而，我还不够聪明，无法理解为什么这个看似微小的变化实际上会有所作为！**也许比我更聪明的人可以对情况有所了解？**

```
diff --git a/actionpack/lib/action_controller/base.rb b/actionpack/lib/action_controller/base.rb
index 0facf70..0790807 100644
--- a/actionpack/lib/action_controller/base.rb
+++ b/actionpack/lib/action_controller/base.rb
@@ -1403,12 +1403,9 @@ module ActionController #:nodoc:
   end

   Base.class_eval do
-    [ Filters, Layout, Benchmarking, Rescue, Flash, MimeResponds, Helpers,
-      Cookies, Caching, Verification, Streaming, SessionManagement,
-      HttpAuthentication::Basic::ControllerMethods, HttpAuthentication::Digest::ControllerMethods,
-      RecordIdentifier, RequestForgeryProtection, Translation
-    ].each do |mod|
-      include mod
-    end
+    include Filters, Layout, Benchmarking, Rescue, Flash, MimeResponds, Helpers
+    include Cookies, Caching, Verification, Streaming, SessionManagement
+    include HttpAuthentication::Basic::ControllerMethods, HttpAuthentication::Digest::ControllerMethods
+    include RecordIdentifier, RequestForgeryProtection, Translation
   end
 end 
```

**编辑#3** 该补丁似乎也修复了相关的错误，如上所示，其中“在 XYms (DB: Z) | 404 Not Found [ [http://0.0.0.0/product/1234]](http://0.0.0.0/product/1234])中完成”没有出现在日志。

**编辑#4** 上面的补丁破坏了 ActionPack 中的其他东西，所以我深入研究并生成了一个不会造成附带损害的问题的修复程序。补丁和任何后续更新都将在[rails 灯塔](https://rails.lighthouseapp.com/projects/8994/tickets/2533)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-21T05:14:12.263

看起来`include(X, Y, Z)`实际上以不同于 的顺序运行`include X; include Y; include Z`。

下面我粘贴了在 Ruby 1.8.6 中实现 Module#include 方法的 C 代码。

```
static VALUE
rb_mod_include(argc, argv, module)
    int argc;
    VALUE *argv;
    VALUE module;
{
    int i;

    for (i=0; i<argc; i++) Check_Type(argv[i], T_MODULE);
    while (argc--) {
      rb_funcall(argv[argc], rb_intern("append_features"), 1, module);
      rb_funcall(argv[argc], rb_intern("included"), 1, module);
    }
    return module;
} 
```

即使你不熟悉 Ruby 的 C 内部结构，很明显这个函数有一个向上迭代的 for 循环来检查所有参数的类型是否为 T_MODULE，然后使用一个向下迭代的 while 循环来实际包含模块 -所以其中的模块`include(X, Y, Z)`实际上会包含在 order 中`Z, Y, X`。我没有浏览所有有问题的 Rails 模块，但我想一旦包含顺序被切换，就会有一些依赖于顺序的东西开始失败。

# ruby - Ruby 有 == AND eql 有什么好的理由吗？? （与 to_a 和 to_ary 类似）

> ID：770418
> 
> 赞同：3
> 
> 时间：2009-04-20T22:55:25.950
> 
> 标签：ruby, methods

我知道eql？Hashes 使用它来查看一个对象是否与一个键匹配`*`，而你这样做

```
def ==(rb) 
```

如果您想支持 == 运算符，但必须有充分的理由让哈希不使用 == 代替。这是为什么？你什么时候有 == 和 eql 的定义？不等价的（例如*，*一个是另一个的别名）？

同样，为什么除了to_a还有to_ary？

这个问题是为了回应有人在[另一个问题](https://stackoverflow.com/questions/766712/make-an-object-behave-like-an-array-for-parallel-assignment-in-ruby)上给我的[答案](https://stackoverflow.com/questions/766712/make-an-object-behave-like-an-array-for-parallel-assignment-in-ruby/768201#768201)。

`*`当然，一个 Hash 也假设 eql? == true 意味着哈希码是相等的。

另外，重写 equal 基本上是一个可怕的想法吗？?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-20T22:57:35.990

== 检查两个值是否相等，而 eql? 检查它们是否相等 AND 相同类型。

```
irb(main):001:0> someint = 17
=> 17
irb(main):002:0> someint == 17
=> true
irb(main):003:0> someint.eql? 17
=> true
irb(main):004:0> someint.eql? 17.0
=> false
irb(main):005:0> someint == 17.0
=> true
irb(main):006:0> 
```

正如你在上面看到的，eql? 还将测试两个值是否为同一类型。在与 17.0 比较的情况下，等于 false，这是因为 someint 不是浮点值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-20T23:06:16.843

我不知道在 ruby​​ 中做出这种特殊选择的原因，但我只想指出，平等是一个困难的概念。

例如，Common Lisp 有 eq、eql、equal、equalp，就此而言 =

能够区分对同一对象的两个引用、具有相同值的相同类型的两个不同对象、具有相同值但具有不同类型的两个对象等之间的区别是非常有用的。有多少变化是有意义的取决于在语言中什么是有意义的。

如果我没记错的话（我不使用 ruby​​），rubys 谓词正在实现其中三种情况

== 是相等的值

情商？是值和类型相等

平等的？仅对同一对象为真

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-21T00:02:10.733

[这](http://forums.pragprog.com/forums/54/topics/992)提到 to_a 和 to_ary（以及 to_s 和 to_str 以及 to_i 和 to_int）具有不同级别的严格性。例如，

```
17.to_s 
```

说得通，

```
17.to_str 
```

没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T23:27:47.383

似乎 Hash 类没有 to_ary 方法（没有 to_a），但是对于 Array 类，to_a 和 to_ary 有不同的行为：

to_a ：

> 返回自我。如果在 Array 的子类上调用，则将接收器转换为 Array 对象。

to_ary ：

> 返回自我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-11-27T15:56:30.480

上面的答案更多的是关于的答案，`eql?`但这里有一些关于`to_a`和的内容`to_ary`。在 Ruby 的鸭子类型方案中，对象可以通过两种方式进行转换——松散和牢固。松散转换就像是说：可以将自己`foo` *表示*为一个数组（`to_a`）。这就是`to_a`,`to_s`和`to_i`其他单字母的用途。所以一个 String 可以将自己表示为一个数组，所以它实现了`to_a`. 坚定的转换说的是非常不同的东西：是`foo`一个字符串（`to_ary`）。请注意，这不是`foo`String 的类，而是 foo 和 strings 是否可以*互换*--是否在任何地方都需要一个字符串，一个 foo 可以在逻辑上使用。我的 Ruby 书中的示例是罗马数字类。我们可以在任何可以使用正整数的地方使用罗马数字，因此 Roman 可以实现`to_int`. 具有*可互换*关系的类需要实现牢固转换，而松散则几乎适用于所有类。确保不要在松散正确的情况下使用固定转换——解释器中内置的代码会严重误解你，你最终会遇到与 C++ 类似的错误`reinterpet_cast<>`。不好。

# sql - 如何在经典 ASP 上进行参数化 SQL 查询？

> ID：770419
> 
> 赞同：9
> 
> 时间：2009-04-20T22:55:41.550
> 
> 标签：sql, asp-classic, vbscript

有人可以告诉我在 VBscript 中使用 Classic ASP 执行参数化 SQL 查询的最简单方法吗？

一个可编译的例子是最好的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-21T06:48:14.703

使用 adodb.command 对象。

```
with createobject("adodb.command")
    .activeConnection = application("connectionstring")
    .commandText = "select * from sometable where id=?"
    set rs = .execute( ,array(123))
end with 
```

我还建议使用自定义数据库访问对象，而不是直接使用 adodb。这使您可以构建更好的 api，提高可测试性并添加用于调试/日志记录/分析的钩子。其次，您可以使用 class_terminate 事件添加带有隐式回滚错误的请求范围事务。Oure db 访问对象提供以下查询 api

```
call db.execute("update some_table set column=? where id=?", array(value, id))
set rs = db.fetch_rs("select * from some_table where id=?", array(id))
count = db.fetch_scalar("select count(*) from some_table where column > ?", array(value)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-20T23:07:58.320

我假设您指的是参数化 SQL 查询。如果是这种情况，那么 VBScript 代码将如下所示：

```
Set adoCon = Server.CreateObject("ADODB.Connection")
adoCon.Open "connectionstring"
SET cmd = Server.CreateObject("ADODB.Command")
cmd.ActiveConnection = adoCon
cmd.CommandType= adCmdStoredProc 
cmd.CommandText = "GetCustomerByFirstName" 

cmd.Parameters.Append cmd.CreateParameter("@FirstName",adVarchar,adParamInput,50,"John")    

Set Rec = cmd.Execute()
While NOT Rec.EOF
  'code to iterate through the recordset
  Rec.MoveNext
End While 
```

**更新：**您需要包含 ADOVBS.inc 文件才能识别常量。

这是一个链接：[ADOVBS.inc](http://www.asp101.com/articles/john/adovbs/adovbs.inc.txt)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-23T20:15:46.123

包含的另一个选项`adovbs.inc`是在 ASP 顶部附近添加对以下类型库的引用。据说这比 include 具有更好的性能：

```
<!--METADATA TYPE="TypeLib" NAME="ADODB Type Library" UUID="00000205-0000-0010-8000-00AA006D2EA4" FILE="C:\Program Files\Common Files\System\ado\msado15.dll" VERSION="2.5" --> 
```

[这](http://www.asp101.com/articles/john/typelibs/default.asp)是一些类型库的列表。

# asp.net - 角色、成员资格、配置文件、主体和表单身份验证

> ID：770424
> 
> 赞同：1
> 
> 时间：2009-04-20T22:59:04.787
> 
> 标签：asp.net, roles, profile, principal

我正在尝试使用自定义 sql 成员资格和角色提供程序来保护 Web 应用程序的关系和层次结构。我对表单身份验证、主体等有点模糊。所以 -

web.config 设置为使用自定义成员资格提供程序和自定义角色提供程序进行表单身份验证。

当我的虚构 Web 应用程序启动时，它会使用来自我的自定义会员提供程序的方法验证来自数据库的用户登录。

在这一点上，我假设它将 providerUserKey 粘贴到一个主体对象中，该主体对象在 cookie 中存储、加密？

如果我想在每个页面中包含有关用户的其他信息，例如现有系统中另一个表的外键 (ID)，那么保存它以避免往返数据库的最佳方法是什么？

我是否扩展主体以包括这个额外的字段？我是否扩展成员资格对象以包含此额外字段？我是否创建自定义配置文件提供程序并使用它来存储额外字段？

所有这些可识别的信息都存储在哪里？我曾假设用户登录后，无需数据库往返即可访问自定义配置文件提供程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-20T23:11:20.870

我将使用自定义配置文件提供程序并缓存（在会话中）用户的配置文件，以消除不必要的数据库往返。

# ms-access - 如何将菜单项添加到默认的右键单击上下文菜单

> ID：770425
> 
> 赞同：7
> 
> 时间：2009-04-20T22:59:34.347
> 
> 标签：ms-access, vba, menu, controls, popup

目标是创建可以与 MS Access 表单上的某些控件一起使用的菜单，并且能够右键单击该控件，例如在列表框和带有选项的相关上下文特定菜单弹出窗口上，如果单击，将触发预定义的子程序或函数。

以编程方式完成此任务的最佳方法是什么？

我正在使用 MS Access 2003 并希望使用 VBA 来执行此操作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2011-05-24T17:00:22.760

首先创建一个`_MouseUp`要在相应控件上执行的事件，以查看是否单击了鼠标右键，如果是，则调用该`.ShowPopup`方法。

当然，这是假设

```
Private Sub MyListControlName_MouseUp(ByVal Button As Integer, _
                                      ByVal Shift As Integer, _
                                      ByVal X As Long, ByVal Y As Long)

  ' Call the SetUpContextMenu function to ensure it is setup with most current context
  ' Note: This really only needs to be setup once for this example since nothing is 
  ' changed contextually here, but it could be further expanded to accomplish this
  SetUpContextMenu  
  ' See if the right mouse button was clicked
  If Button = acRightButton Then
    CommandBars("MyListControlContextMenu").ShowPopup
  End If
End Sub 
```

由于此时命令栏`MyListControlContextMenu`未定义，我在单独的模块中定义菜单如下：

```
Public Sub SetUpContextMenu()
  ' Note: This requires a reference to Microsoft Office Object Library
    Dim combo As CommandBarComboBox

    ' Since it may have been defined in the past, it should be deleted, 
    ' or if it has not been defined in the past, the error should be ignored

    On Error Resume Next 
    CommandBars("MyListControlContextMenu").Delete
    On Error GoTo 0

    ' Make this menu a popup menu 
    With CommandBars.Add(Name:="MyListControlContextMenu", Position:=msoBarPopup)

    ' Provide the user the ability to input text using the msoControlEdit type
    Set combo = .Controls.Add(Type:=msoControlEdit)
        combo.Caption = "Lookup Text:"           ' Add a label the user will see
        combo.OnAction = "getText"               ' Add the name of a function to call

    ' Provide the user the ability to click a menu option to execute a function    
    Set combo = .Controls.Add(Type:=msoControlButton)
        combo.BeginGroup = True                  ' Add a line to separate above group
        combo.Caption = "Lookup Details"         ' Add label the user will see
        combo.OnAction = "LookupDetailsFunction" ' Add the name of a function to call

    ' Provide the user the ability to click a menu option to execute a function        
    Set combo = .Controls.Add(Type:=msoControlButton)
        combo.Caption = "Delete Record"          ' Add a label the user will see
        combo.OnAction = "DeleteRecordFunction"  ' Add the name of the function to call

  End With

End Sub 
```

由于已经引用了三个函数，我们可以继续定义它们如下 -

*getText*：注意，此选项需要同时引用**命令栏菜单名称**的名称以及**控件标题**的名称。

```
Public Function getText() As String

   getText = CommandBars("MyListControlContextMenu").Controls("Lookup Text:").Text

   ' You could optionally do something with this text here, 
   ' such as pass it into another function ...
   MsgBox "You typed the following text into the menu: " & getText

End Function 
```

*LookupDetailsFunction*：对于本例，我将创建一个 shell 函数并返回文本“Hello World！”。

```
Public Function LookupDetailsFunction() As String

   LookupDetailsFunction = "Hello World!"

   MsgBox LookupDetailsFunction, vbInformation, "Notice!"

End Function 
```

*DeleteRecordFunction*：对于本示例，我将通过检查控件是否为空来确保控件仍然有效，如果仍然有效，将执行查询以从表中删除记录。

```
Public Function DeleteRecordFunction() As String

   If Not IsNull(Forms!MyFormName.Controls("MyListControlName").Column(0)) Then
     Currentdb.Execute _
      "DELETE * FROM [MyTableName] " & _
      "WHERE MyKey = " & Forms!MyFormName.Controls("MyListControlName").Column(0) & ";"
     MsgBox "Record Deleted", vbInformation, "Notice!"
   End If

End Function 
```

注意：对于`LookupDetailsFunction`和函数`DeleteRecordFunction`，`getText`它们必须在公共范围内才能正常工作。

最后，最后一步是测试菜单。为此，请打开表单，右键单击列表控件并从弹出菜单中选择其中一个选项。

可选地`button.FaceID`，可用于指示与菜单弹出控件的每个实例相关联的已知办公室图标。

我发现[Pillai Shyam](http://skp.mvps.org/fidcode.htm)在创建 FaceID 浏览器插件方面的工作非常有帮助。

参考资料： [Microsoft](http://msdn.microsoft.com/en-us/library/aa141695%28v=office.10%29.aspx) [FaceID](http://skp.mvps.org/faceid.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T03:51:46.117

为了用包含默认操作和自定义操作的菜单替换默认快捷菜单，您必须创建一个包含默认操作的自定义快捷菜单。无法扩展默认快捷菜单。

Access 2003 及更早版本中的快捷菜单是一种特殊的工具栏。您创建它们的方式（或多或少）与创建自定义工具栏的方式相同。不过，用户界面有点奇怪，因为有一个特殊的地方可以创建它们。

要开始使用，请右键单击前端 Access MDB 中的工具栏。选择自定义。在工具栏列表中，选中快捷菜单。这将为您提供所有内置快捷菜单的列表，除了它们实际上最终看起来不像在实际使用中那样。例如，如果右键单击一个表单，你会得到这个快捷菜单：

```
Form Design
Datasheet View
PivotTable View
PivotChart View
Filter By Form
Apply Filter/Sort
Remove Filter/Sort
Cut
Copy
Paste
Properties 
```

现在，快捷菜单上的这个菜单在哪里？好吧，这恰好是 FORM VIEW TITLE BAR 菜单，即使它在您单击窗体上的控件以外的任何位置时都会弹出。因此，如果这是您要更改的菜单，您可以通过向其添加菜单项来编辑它（拖放操作）。

我认为创建一个自定义快捷菜单来复制内置菜单并添加您的增强功能实际上更好（如上所述），因为这允许您保留 Access 默认快捷菜单，同时还可以使用您的自定义版本你想要它。在这种情况下，您需要启动一个新的快捷菜单，这就是 UI 很奇怪的地方：

单击快捷菜单上的最后一个选项 CUSTOM。您会看到它下拉了一个占位符。您不能拖放到它。相反，您必须在主工具栏编辑窗口中单击“新建”并创建一个新的快捷工具栏（将其命名为您希望自定义快捷菜单具有的名称）。您的新工具栏现在显示在工具栏列表中。突出显示它并单击 PROPERTIES，然后将类型更改为 POPUP。这将为您提供信息警告，表明此更改将其从工具栏更改为快捷菜单。然后您可以关闭工具栏/快捷菜单的属性表，现在如果您再次选中快捷菜单并查看自定义菜单，您将看到新创建的菜单。现在您可以将内置菜单的菜单项拖放到新菜单中——但不要将它们拖放到菜单本身上，

然后，您可以将所需的任何选项从任何菜单或工具栏中拖放到自定义菜单中。

我假设您知道如何使用快捷菜单，因为它是所有表单对象的属性表的一部分。

2009 年 5 月 21 日更新：Access 2007 官方博客刚刚发布了[一篇关于在 Access 2007 中以编程方式执行此操作](http://blogs.msdn.com/access/archive/2009/05/21/how-to-create-a-shortcut-menu-for-a-form-form-control-or-report.aspx)的文章。由于功能区界面的原因，会有所不同，但有些事情会相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T04:33:52.463

试试这个

```
Sub Add2Menu()
  Set newItem = CommandBars("Form View Popup").Controls.Add(Type:=1)
  With newItem
    .BeginGroup = True
    .Caption = "Make Report"
    .FaceID = 0
    .OnAction = "qtrReport"
  End With
End Sub 
```

如您所见，它将在“Form View Popup”命令栏中添加项目，当单击此项目时，它将加载过程**qtrReport**

并使用此功能查看 Access 中的所有命令栏

```
Sub ListAllCommandBars()
For i = 1 To Application.CommandBars.Count
    Debug.Print Application.CommandBars(i).Name
Next
End Sub 
```

# python - 允许用户删除他们添加到数据库的模型实例的最佳安全方法是什么？

> ID：770427
> 
> 赞同：0
> 
> 时间：2009-04-20T23:00:29.337
> 
> 标签：python, django

我想授予用户删除他们添加到数据库中的模型实例的权限。在 django 文档中，它说允许某人从模板中删除不是一个好习惯。是否有一种安全的方法可以让用户从模板中单击“删除此”链接并删除该模型实例？我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-20T23:13:38.917

[查看此问题](https://stackoverflow.com/questions/679013/get-vs-post-best-practices/679042)以进行与您所问问题相关的讨论。

本质上，当您通常单击页面上的链接时，浏览器会`GET`向服务器发出请求以获取下一页的内容。就像有很多推动语义相关的 CSS 布局一样，您的页面请求在语义上相关也很重要。使用链接删除项目的问题在于它正在向数据库中的某些内容发出`GET`请求。`DELETE`随之而来的问题是某些搜索引擎可能会索引您的链接并意外删除内容。还有[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的问题，它可以使毫无戒心的用户在不知情的情况下向网站发出命令。所以处理这个问题的正确方法是遵循以下规则**任何修改服务器状态的请求都应该通过 POST 处理**。因此，而不是这样做：

```
<a href="{% url remove_item item.id %}">Delete Item</a> 
```

最好这样做：

```
<form action='{% url remove_item %}' method='POST' id='form'>
    <input type='hidden' name='action' value='delete'>
    <input type='hidden' name='id' value='{{ item.id }}'>
    <input type="submit" value="Delete Item">
</form> 
```

如果您想在维护 的同时保留链接，则`POST`必须使用 Javascript：

```
<a href="#" onclick="document.getElementById('form').submit(); return false;">Delete Item</a> 
```

难看，是的，但这是最好的。然后，您的 Django 视图将执行以下操作：

```
def remove_item(request):
    if request.method == 'POST':
        ## remove item 
```

此外，正如 Scott 提到的，Django 有一些内置的东西可以帮助您避免我上面提到的跨站点请求伪造，因为即使您正在执行 POST（只是稍微难一点），仍然可以这样做。避免这种情况的方法是将某种令牌绑定到需要在服务器端进行验证的表单，然后才允许采取行动。查看[CsrfMiddleware](http://docs.djangoproject.com/en/1.0/ref/contrib/csrf/#module-django.contrib.csrf)类以获取更多详细信息。它基本上会为您自动完成其中的一些工作。

## 附加阅读

*   [URI、可寻址性以及 HTTP GET 和 POST 的使用](http://www.w3.org/2001/tag/doc/whenToUseGet.html)
*   [9.1.1 安全方法，HTTP 1.1，RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)
*   [万维网架构，第一卷](http://www.w3.org/TR/webarch/)
*   [使用带有常规链接的 POST](http://www.thefutureoftheweb.com/blog/using-post-method-with-a-regular-link)
*   [跨站点请求伪造和您](http://www.codinghorror.com/blog/archives/001171.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T04:42:18.157

让用户提交一个 POST 请求以删除该模型实例。这些类型的更改不应该通过 GET 请求来实现，这样人们就无法相互链接以在网站上无意中执行更改。

在您看来，请检查 request.user 是否与该特定模型实例的作者相同。如果您真的担心，您还可以检查 HTTP_REFERRER 是否设置为另一个站点。

您的安全问题是跨站点请求伪造。Django 提供了 CsrfMiddleware，它实际上会为您的表单添加安全性以防止这种攻击。但它只有在您不允许通过 GET 请求进行永久更改时才有效。

# erlang - JVM/CLR 上的 Erlang

> ID：770430
> 
> 赞同：12
> 
> 时间：2009-04-20T23:02:14.590
> 
> 标签：erlang, clr, jvm

我刚刚开始阅读 Joe Armstrong 的关于 Erlang 的书，并听了他在 Software Engineering Radio 上的精彩演讲。

它是一种有趣的语言/系统，它的时代似乎随着多核机器的出现而到来。

我的问题是：有什么可以阻止它被移植到 JVM 或 CLR？我意识到这两个虚拟机都没有设置为运行 Erlang 要求的轻量级进程——但是这些不能由线程模拟吗？我们能否在非 Erlang VM 上看到 Erlang 的轻量级或精简版本？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-21T08:37:34.550

您不能使用 JVM/CLR 库，因为它们依赖于可变对象。

Erlang 异常处理与 JVM 和 CLR 异常完全不同，您需要以某种方式处理它。

将进程实现为线程意味着任何相当大的 Erlang 系统都会很快耗尽内存（创建时我的机器上的进程大小：1268 字节，CLR 中的线程堆栈大小：1 MB）并且进程之间的通信比 Erlang 慢得多。

您可能想要的是 JVM 或 CLR 上的 Actor 模型实现。

Scala 和 Clojure 已经被提及。此外，还有许多适用于 JVM 的 Actor 实现： [Kilim](http://www.malhar.net/sriram/kilim/index.html)、[Functional Java](http://functionaljava.org/)、[Jetlang](http://code.google.com/p/jetlang/)、[Actors Guild](http://actorsguildframework.org/)、[ActorFoundry](http://osl.cs.uiuc.edu/af/)，以及至少一个适用于 CLR 的：[Retlang](http://code.google.com/p/retlang/)，可以从任何 JVM/CLR 语言中使用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-05-24T10:48:10.773

出于教育原因，我们正在为 CLR 实现 ErlangVM 的一个子集。我们深受 Kresten Krab Thorup 和他的项目 Erjang 的启发，这是一个基于 JVM 的 Erlang VM。Erjang 使用 kilim 框架来表示轻量级进程，并开始引起关注。

[Javalimit](http://www.javalimit.com/) - Erjang 的作者博客。

[Erjang 存储库](http://wiki.github.com/krestenkrab/erjang/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-21T14:19:42.297

这是一个很好的讨论。一些上下文可能有用。

来自去年 11 月的 Erlang 邮件列表：

*   [长讨论线程的开始](http://erlang.org/pipermail/erlang-questions/2007-November/031029.html)

*   [在这里](http://erlang.org/pipermail/erlang-questions/2007-November/031073.html)继续

*   [在这里](http://erlang.org/pipermail/erlang-questions/2007-November/031157.html)有点精神

*   并以乔的[贡献](http://erlang.org/pipermail/erlang-questions/2007-November/031275.html)结束。

我对关于 JVM 上的 Erlang 的辩论有何贡献？***不，不是一个好主意:(***

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-20T23:06:01.930

什么都没有，其实。您可能会看一下[Clojure](http://clojure.org/)，它是一种构建在 JVM 上的有趣的函数式语言。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-15T03:54:36.473

[Axum](http://msdn.microsoft.com/en-us/devlabs/dd795202.aspx) ——CLR 上的一个孵化项目——显然受到了 Erlang 的启发。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-21T00:08:26.960

我不知道这有什么技术问题。

实际上， **Scala**（一种 JVM 函数式语言）使用的**Actor 模型**与无共享并发的 Erlang 模型非常相似，据我所知，它大量借鉴了 Erlang 模型。线程无法模拟 Erlang 进程。他们太重了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-24T14:35:20.363

只是为了完整起见有关主题的其他[来源。](http://weblog.hypotheticalabs.com/?p=452)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-11T07:51:30.177

[Erjang](http://erjang.org/)是一个运行在 Java™ 上的 Erlang 虚拟机。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T14:28:50.697

可能的？是的。实际的？好吧，可能不是；他们以非常不同的方式解决不同的问题，因此他们做事的方式有很多重大差异。这将使移植变得困难，并且性能可能会受到严重影响。这并不意味着它不能完成，只是有更好的方法来完成这样一个端口将带来的事情。

# javascript - JQuery Treeview 不适用于 Ajax

> ID：770432
> 
> 赞同：2
> 
> 时间：2009-04-20T23:04:44.507
> 
> 标签：javascript, jquery, jquery-plugins

一般来说，我是 JQuery 和 Web 开发的新手。我正在尝试从 XML 文件加载一些数据并构建一个无序列表。我已经让那部分工作了，现在我正在尝试使用[TreeView](http://plugins.jquery.com/project/treeview)插件，以便我可以折叠/展开数据。数据加载如下：

```
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "solutions.xml",
        dataType: ($.browser.msie) ? "text" : "xml",
        success: function(data) {
            var xml;
            if (typeof data == "string") {
                // Work around IE6 lameness
                xml = new ActiveXObject("Microsoft.XMLDOM");
                xml.async = false;
                xml.loadXML(data);
            } else {
                xml = data;
            }

            list = ""
            $(xml).find("Group").each(function() {
                group = $(this).attr("name");
                list += "<li><span>" + group + "</span><ul>";

                $(this).find("Solution").each(function() {
                    solution = $(this).attr("name");
                    list += "<li><span>" + solution + "</span></li>";
               });

               list += "</ul></li>";
            });

            $("#groups").html(list);           
        },

        error: function(x) {
            alert("Error processing solutions.xml.");
        }
    });

    $("#groups").treeview({
        toggle: function() {
            console.log("%s was toggled.", $(this).find(">span").text());
        }
    });
}); 
```

HTML 看起来像这样：

```
<html>
  ...
  <body>
    <ul id="groups">
    </ul>
  </body>
</html> 
```

无序列表正确显示，但小 [+] 和 [-] 符号不显示，并且部分不可折叠/展开。如果我摆脱我的 Ajax 加载并手动在 #groups 中插入一个无序列表，它会按预期工作。

我究竟做错了什么？是否有任何其他插件或 Javascript 库可以使这更容易？该解决方案需要在本地 IE6 上运行（即网络服务器）。

**更新**：我找到了一种解决方法：如果我这样定义树视图的东西，它可以工作：

```
function makeTreeview() {
    $("#container").treeview({
        toggle: function() {
            console.log("%s was toggled.", $(this).find(">span").text());
        }
    });
}
setTimeout('makeTreeview();', 50); 
```

我认为问题是，当我创建树视图时，ajax 的东西还没有完成它的工作，所以当调用 treeview() 时，还没有创建无序列表。我还没有用 IE6 测试过这个。有没有更好的方法来做到这一点，而不使用 SetTimeout()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T05:07:47.543

我为另一个项目打了同样的电话。由于其他原因，您可能希望将您的 ajax 调用包装在一个匿名函数中以创建一个闭包，以便您的变量保持您期望它们的样子......

success 方法是一个回调函数，在您的调用完成后发生，只需在该方法中创建您的树视图，或者如果您需要清楚起见，将其分解为一个单独的函数。

在您展示的示例中 - 如果 ajax 调用花费的时间超过 50 毫秒，您的树视图仍然会失败 - 如果从同一服务器加载两个以上的对象，则在初始加载期间很容易发生这种情况。

此示例使用 JSON，并同时将页面方法中的 html 数据加载到一系列 div 中。

```
$(document).ready(function() { 
for (i= 1;i<=4;i++) 
{ 
(function (){
     var divname ="#queuediv"+i; 

    $.ajax({ 
      type: "POST", 
      contentType: "application/json; charset=utf-8", 
      dataType: "json", 
      url: "test12.aspx/GetHtmlTest", 
      data: "{}", 
      error: function(xhr, status, error) { 
          alert("AJAX Error!"); 
      }, 
       success: function(msg) { 
        $(divname).removeClass('isequeue_updating'); 
        $(divname).html(msg); 
        $("#somethingfromthemsg").treeview(); 
      } 
    });
})(); 
} 
}); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-02-09T14:34:15.730

对于那些也找到这篇文章的人。我在使用 ajax 调用时遇到了这个问题。

如果要等待 ajax 调用返回，则需要将 async 设置为 false。

```
$.ajax({
 type: 'POST',
 async: false,
 ........ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T03:55:39.707

您需要获取 FireBug（Firefox 插件），然后您可以在控制台中查看返回的内容，并确保它符合您的预期（并且它实际上正在执行请求..）。

一旦你让它在 FF 中运行，你就可以支持古老的 10 年历史的 IE6 浏览器。

* * *

您可能还需要考虑其他一些事项：

整个 ActiveXObject("Microsoft.XMLDOM") 像我一样跳出来是不必要的。如果将字符串中的 XML 传递给 $()，jQuery 会将其转换为 DOM 对象。

此外，.Find 可以替换为：

```
$('Element', this); 
```

例如：

```
var xmlDoc = '<Group><Solution name="foo" /><Solution name="bar" /></Group>';
$('Solution', xmlDoc).each(function() { 
  document.write( $(this).attr('name') );
}); 
```

会吐出：

```
foo
bar 
```

此外，使用萤火虫，粘贴一个 console.log(list); 最后，确保您生成的是您认为的 HTML。如果你真的卡在 IE6 中，alert(list) 有点像穷人的等价物（只要你的文件不是太大）。

* * *

简而言之，我认为您走在正确的轨道上，您只需要正确调试的工具。

# asp.net - 创建大量 .aspx 页面以将数据添加到各种表中。有没有更好的办法？

> ID：770436
> 
> 赞同：0
> 
> 时间：2009-04-20T23:06:43.613
> 
> 标签：asp.net, webforms, crud, code-reuse

我正在一个 CRUD 网站上工作，其中有很多非常相似的表格来添加新数据。换句话说：

AddMovie.aspx、AddGame.aspx、AddBeer.aspx、AddAdd.aspx

我一直在想，“我自己，拥有一个单独的 Add.aspx 而不是重写这么多类似的页面真是太好了 -*加上所有那些 OOP 书呆子会认为我很酷，因为我正在重复使用而不是复制/粘贴！* ”

因此，假设我走在正确的轨道上，如果我要使用单个 Add.aspx 页面，我如何表示每个对象的所有字段集？我想过一堆可以隐藏/显示的面板或 div，但不确定我是否真的喜欢那个解决方案。有没有更好的方法，或者我应该放弃并返回多个错误的“添加*对象*.aspx”页面？

此外，这是一个普通的 ol' (3.5) Web 表单应用程序。遗憾的是，这没有 ASP.NET MVC 的优点。似乎应该有这样一个微不足道的解决方案，而我只是想多了，但我想不出一个，所以我求助于 Stack Overflow。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T23:11:53.740

也许你应该看看[ASP.NET 动态数据](http://www.asp.net/dynamicdata/)或[subsonic 项目](http://subsonicproject.com/)。两者都允许非常快速地构建 CRUD 类型的网站，因为它们支持“脚手架”（编辑页面是根据您的数据库模型自动生成的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T23:10:16.520

更好的方法可能是创建一个名为 Add.aspx 的页面，然后根据您发送的查询字符串（即 Add.asps?type=game），您可以自定义表单和特定类型对象的逻辑试图与之合作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T00:23:45.907

另一种选择是对 Page 进行子类化，然后让您的页面继承自它，这样您就有了一个包含所有常见功能的地方。

例如：

```
public abstract class BasePage<T> : System.Web.UI.Page
{
    protected T GetObjectById(int objectId)
    {
        // return new T();
    }
    protected void SaveObject(T obj)
    {
        // Save object to DB here
    }
    protected void DeleteObjectById(int objectId)
    {
        // Delete object
    }

    protected abstract void PopulateUI(T obj);

    protected override void OnLoad(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            int objectId = Convert.ToInt32(Request.QueryString.Get("id"));
            T obj = GetObjectById(objectId);
            PopulateUI(obj);
        }
    }
} 
```

然后，您的页面将从以下继承：

```
public class AddGame : BasePage<Game>
{
    protected override void PopulateUI(Game game)
    {
        // Populate the UI with game information

        GameNameTextBox.Text = game.Name;
        PublisherNameTextBox.Text = game.Publisher.Name;

        // etc
    }
} 
```

这应该使创建页面变得更快更容易，并让您更好地控制数据的检索和保存方式。

# c# - 覆盖 C# 派生类中的常量

> ID：770437
> 
> 赞同：46
> 
> 时间：2009-04-20T23:07:48.027
> 
> 标签：c#, inheritance, constants

在 C# 中，可以在派生类中重写常量吗？我有一组相同的类，除了一些常量值，所以我想创建一个定义所有方法的基类，然后在派生类中设置相关常量。这可能吗？

我宁愿不只是将这些值传递给每个对象的构造函数，因为我希望增加多个类的类型安全性（因为对于具有不同常量的两个对象进行交互从来没有意义）。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-04-20T23:12:30.183

如果你想覆盖它，它不是一个常数；）。尝试虚拟只读属性（或受保护的设置器）。

只读属性：

```
public class MyClass {
    public virtual string MyConst { get { return "SOMETHING"; } }
}
...
public class MyDerived : MyClass {
    public override string MyConst { get { return "SOMETHINGELSE"; } }
} 
```

受保护的二传手：

```
public class MyClass {
    public string MyConst { get; protected set; }

    public MyClass() {
        MyConst = "SOMETHING";
    }
}

public class MyDerived : MyClass {
    public MyDerived() {
        MyConst = "SOMETHING ELSE";
    }
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-04-20T23:10:05.210

不幸的是，常量不能被覆盖，因为它们不是虚拟成员。编译器在编译时将代码中的常量标识符替换为其文字值。

我建议您尝试将抽象或虚拟属性用于您想做的事情。这些是虚拟的，因此可以（在抽象属性的情况下必须）在派生类型中被覆盖。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-23T18:15:58.793

标有 的常量`const`不能被覆盖，因为它们在编译时被编译器替换。

但是分配给常量值的常规静态字段可以。我刚才有这样一个案例：

```
class Columns
{
    public static int MaxFactCell = 7;
}

class Columns2 : Columns
{
    static Columns2()
    {
        MaxFactCell = 13;
    }
} 
```

如果我只是重新定义`MaxFactCell`派生类中的字段，多态性将不起作用：使用`Columns2`as的代码`Columns`将看不到覆盖值。

如果您需要限制对该字段的写入（但不是读取）访问，则 using`readonly`将禁止在`Columns2`. 改为将其设为属性，代码稍微多一点：

```
class Columns
{
    static Columns()
    {
        MaxFactCell = 7;
    }            
    public static int MaxFactCell { get; protected set; }
}

class Columns2 : Columns
{
    static Columns2()
    {
        MaxFactCell = 13;
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-12T15:45:03.570

编辑：这可能会有意想不到的行为，请参阅下面 Shai Petel 的评论。

您可以通过声明新常量来隐藏派生类中继承的常量`new`。不过，我不确定这是一个好习惯。

```
class A
{
    protected const int MyConst = 1;
}

class B : A
{
    new private const int MyConst = 2;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-23T09:16:46.973

您可以强制派生类具有常量值（嗯，只读属性）

*   创建一个包含只读属性的接口。
*   将该接口放在基类上。

例子：

```
 public interface IHasConstant
   {
        string MyConst { get; }
   } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-01T19:22:26.717

解决 dten + Tracker1 的答案，但针对 c# 6 进行了更新

```
public class MyClass {
    public virtual string MyConst =>"SOMETHING";
}
...
public class MyDerived : MyClass {
    public override string MyConst  =>"SOMETHING ELSE";
} 
```

# java - weblogic上的Hibernate/JPA继承问题

> ID：770438
> 
> 赞同：4
> 
> 时间：2009-04-20T23:07:55.497
> 
> 标签：java, hibernate, spring, jpa, weblogic-10.x

在 weblogic 10.3 中运行我的 spring2.5.6,jpa(hibernate3.4) webapp 时出现一个奇怪的错误

* * *

```
[ERROR] Javassist Enhancement failed: com.xxx.domain.model.Scheme
java.lang.NoSuchMethodError: pcGetManagedFieldCount
        at com.xxx.domain.model.Fund.<clinit>(Fund.java)
        at sun.misc.Unsafe.ensureClassInitialized(Native Method)
        at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAc
cessorFactory.java:25) 
```

* * *

com.xxx.domain.model.Scheme 类是 single_table 继承层次结构上抽象基金实体的映射子类实体，并且层次结构上的所有实体都出现此错误。我同时使用带注释的类和 xml 元数据来定义我的持久性类的映射。

当应用程序部署到 weblogic 时，我只会收到此错误，因此使用 junit 一切正常。我已经尝试在 javaassit.jar 上升级到最新版本。

问题在我看来像是类加载顺序的问题，但我无法弄清楚。

PS。正如 bea 所建议的，我已将以下内容添加到 weblogic.xml

```
<container-descriptor>
  <prefer-web-inf-classes>true</prefer-web-inf-classes>
</container-descriptor> 
```

有人有任何想法、其他配置提示或我应该进行调查的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-21T23:24:21.340

我有同样的问题。

我的实体扩展了一个类（@MappedSuperClass），它存在于一个 jar 依赖项中。我不得不将该类从 jar 移到我的项目中。只有这样它才能正常工作和部署。

解决此问题的另一种方法是在 persistence.xml 中明确指定您的实体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T04:27:57.407

您可以发布实体类的代码吗？如果您不使用注释，您可以发布您的 hbm 映射文件的段吗？

你的类路径预感可能是正确的。在您的 weblogic-application.xml 中，试试这个

```
<prefer-application-packages>
  <package-name>antlr.*</package-name>
  <package-name>org.antlr.*</package-name>
</prefer-application-packages> 
```

如果您还有更多日志输出，请同时发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T23:47:37.080

抱歉，我的机器上只有 WebLogic 10.0，而且发行版中没有任何 javassist JAR。看起来 javassist 仅在 10.3 中添加用于 AOP 字节码生成。

从 WebLogic 部署中删除 javassist JAR 并使用它支持的版本可能值得一试。从 web.xml 中取出“prefer-web-inf-classes”标签，看看它是否可以与 WebLogic 喜欢的版本一起使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-11T13:51:39.460

我自己在这件事上浪费了几天时间。对我来说，问题是我的应用程序中有 2 个单独的数据服务模块。我认为 10.3 有一些问题。我不确定解决方案，但对我来说，一个解决方法是将我的两个数据服务模块组合成一个。BEA 似乎意识到了这个问题。希望下面的网址会有所帮助。参考 CR370788。 [http://edocs.bea.com/wls/docs103/issues/known_resolved.html](http://edocs.bea.com/wls/docs103/issues/known_resolved.html)

# jquery - jQuery：$(document).ready() 在 IE 中太慢了

> ID：770442
> 
> 赞同：5
> 
> 时间：2009-04-20T23:09:58.487
> 
> 标签：jquery, internet-explorer, connection, document-ready

在呈现页面之前隐藏元素的首选方法是什么？$(document).ready() 对 firefox 工作得很好，但有时（连接到服务器似乎是一个主要问题）它在 Internet Explorer 中有点落后；该元素显示出来，并在病房后不久隐藏。即：在执行 $(document).ready() 中的代码之前呈现页面。

现在我一直在查看之前关于类似问题的关于 SO 的问题，但据报道这些问题已在 1.3.1 中得到解决。然而，我正在使用 jQuery 1.3.2 并遇到这种行为（在 IE6、IE7 和 IE8 中）。

一种可能的选择是默认情况下通过 css 隐藏它，但这会使显示它依赖于启用 javascript。我还不愿意这样做。

我还尝试将我的 javascript 移到 /body 标记上方，这似乎也无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-20T23:12:08.530

哇，这将是一个快速的...

[这份文件](http://www.learningjquery.com/2008/10/1-awesome-way-to-avoid-the-not-so-excellent-flash-of-amazing-unstyled-content)准确地展示了我一直在寻找的东西，我希望有一天它会对某人有所帮助:)

# c - UNIX 编译器/链接器选项的当前有什么好的跨平台参考吗？

> ID：770446
> 
> 赞同：4
> 
> 时间：2009-04-20T23:11:29.077
> 
> 标签：c, unix, compiler-construction, linker

我多年来一直使用这个[摘要参考](http://www.fortran-2000.com/ArnaudRecipes/sharedlib.html)，但它开始显示它的年龄。如果您有任何建议作为更新，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T23:37:20.310

一些突然想到的资源：

*   [GCC 手册](http://gcc.gnu.org/onlinedocs/)：各种版本的 GCC 手册。

*   [GNU binutils](http://sourceware.org/binutils/docs-2.19/) : 真正的 ld 文档所在的地方。

*   [Predef 项目：用于](http://predef.sourceforge.net/)*许多*平台、目标和编译器的 C/C++ 预定义宏。

*   [GNU make](http://www.gnu.org/software/make/manual/make.html) : 有时你真的很想知道`$<`它的意思......

不过，根据我的经验，您不会在其中任何一个地方找到有关跨平台问题的大量详细信息。这些年来，我吸收了很多，但没有尝试以任何有用的形式将这些知识编成代码。

我想任何跨平台构建工具都必须包含大量此类知识，即使它与它们的源代码或开发人员/内部文档相关。例如，您可以尝试深入研究[CMake](http://www.cmake.org/)，它试图了解如何为 *nix 平台创建 Makefile 以及为 Windows 平台创建不同版本级别的 Visual Studio 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-29T22:48:44.520

为什么不在创建选项表的 SO 上创建一个社区 wiki 条目。

您可以首先从您的链接中提取（仍然是最新的）信息，然后让知道其他编译器的 SO 用户扩展它以涵盖越来越多的内容。？

# c# - 将一行 VB.Net 代码转换为 C#

> ID：770454
> 
> 赞同：2
> 
> 时间：2009-04-20T23:14:02.737
> 
> 标签：c#, vb.net

我正在寻找与以下行等效的 C#。

```
If New FileInfo(c:\images\test.jpg).Length < 25 * 1024 Then

'something

End If 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-20T23:16:19.970

至少这是一个直截了当的。

```
if (new FileInfo(@"c:\images\test.jpg").Length < (25 * 1024))
{
    // something
} 
```

@-sign 禁用字符串中的反斜杠转义处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T23:21:45.603

也试试这个： [VB to C#](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

```
{
    if (new FileInfo("c:\\images\\test.jpg").Length < 25 * 1024) {

    }
    //something
} 
```

请务必验证输出。转换器不是 100%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T23:16:45.897

```
if (new FileInfo(@"c:\Images\test.jpg").Length < 25 * 1024)
{
  // something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-20T23:22:00.627

我建议您查看这些免费的转换网站，了解以下问题：

[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)
[http://converter.telerik.com/](http://converter.telerik.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T23:17:04.883

```
if(new FileInfo(@"c:\images\test.jpg").Length < 1024 * 4))
{
  // something
} 
```

# perl - 如果传入未定义的值，则使用 Params::Validate 设置默认值

> ID：770455
> 
> 赞同：3
> 
> 时间：2009-04-20T23:14:15.607
> 
> 标签：perl, arguments, validation

我无法让 Params::Validate 以我想要的方式工作。

```
#!/usr/local/bin/perl -w 
use strict;
use Params::Validate qw/:all/;
use Data::Dumper;

sub foo {
    my %args = validate(@_, {
        bar => {
            default => 99,
            # TODO - Somehow use a callback to return a default if undefined
            # ??!!?? 
            # callbacks => { call_me => sub { return 99 if !defined shift }},
        },
    });

    # $args{bar} //= 99; # Don't want to define default in 2 places

    print Dumper(\%args);
}
foo({ bar => undef }); 
```

那么如何设置/测试 args 列表中的 undef 并用 Params::Validate 替换为所述“默认”值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T23:18:05.193

您需要设置 $_[0]：

```
call_me => sub { $_[0] = 99 if not defined $_[0] } 
```

@_ 是传入参数的别名，因此您可以将其用作对原始参数的引用。

还，

```
$args{bar} ||= 99; 
```

即使它是 0 或 ''（空字符串）也会重置 bar，这听起来不像你想要的。使用

```
$args{bar} //= 99; 
```

不过，如果您使用的是 perl 5.10 或更高版本，则可以做您想做的事。

根据您对不复制默认值的评论，我能想到的最好的方法是：

```
sub foo
{
    unshift @_, bar => undef;
    my %args = validate(@_,
                        {
                            bar => {
                                optional => 1,
                                callbacks => {
                                    call_me => sub { $_[0] = 99 unless defined $_[0] },
                                },
                            },
                        },
                       );
    print Dumper \%args;
} 
```

这似乎有效，但我不得不承认 - 这很丑。

# winapi - 有什么方法可以确定 VirtualQuery() 返回的段是什么类型的内存？

> ID：770456
> 
> 赞同：2
> 
> 时间：2009-04-20T23:14:41.923
> 
> 标签：winapi, memory-management

问候，

我可以使用如下逻辑遍历进程内存映射：

```
 MEMORY_BASIC_INFORMATION mbi;
    void *lpAddress=(void*)0;
    while (VirtualQuery(lpAddress,&mbi,sizeof(mbi))) {
        fprintf(fptr,"Mem             base:%-10x start:%-10x Size:%-10x Type:%-10x State:%-10x\n",
            mbi.AllocationBase,
            mbi.BaseAddress,
            mbi.RegionSize,
            mbi.Type,mbi.State);
        lpAddress=(void *)((unsigned int)mbi.BaseAddress + (unsigned int)mbi.RegionSize);
    } 
```

我想知道给定的段是否用于静态分配、堆栈和/或堆和/或其他？

有什么方法可以确定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-20T23:33:25.110

我很好奇，你打算用这些信息做什么？

有一个 windbg 扩展名 !address，如果您不需要代码来执行此操作，它可以为您获取此信息。编写调试器脚本可能会更可靠地获取此信息。

VirtualQuery 无法自行将此信息返回给您，因为它不知道用户模式代码为何请求内存。您需要将它与其他信息源一起使用才能获取此信息，并且可能仍然存在一些错误情况。

首先，您应该仅按 MEM_PRIVATE memory 进行过滤。. . 堆、堆栈和静态分配（如果它们已被修改）应在该范围内。

静态分配（全局等）应位于已加载模块的地址。您可以使用 PSAPI 来确定地址是否在加载的模块中，例如，调用 EnumProcessModules，然后调用 GetModuleInformation。

堆栈值，您可以使用 toolhelp API 来确定内存位置是否在堆栈中。CreateToolhelp32Snapshot 与 TH32CS_SNAPSHOT 获取目标进程中的线程，然后 GetThreadContext 并检查生成的堆栈指针是否在段内。

我不知道从流程之外走一堆的好方法。Toolhelp 会捕捉一个堆列表，但不会为您提供一组好的堆内存界限。在进程内，您可以使用 GetProcessHeaps 遍历堆列表，然后如果内存位置在堆内，则调用 HeapValidate 来 dtermie。

# svn - 使用 TortoiseSVN 更改文件夹上的存储库

> ID：770458
> 
> 赞同：62
> 
> 时间：2009-04-20T23:16:43.947
> 
> 标签：svn, tortoisesvn, visualsvn-server

我不小心在 TortoiseSVN 中创建了一个没有默认文件夹的存储库，然后在本地进行了结帐。意识到嘿，我忘记使用默认值创建该存储库，所以我使用 VisualSVN Server 删除了存储库，然后重新创建了相同的存储库名称，该名称现在具有默认文件夹主干等。

问题是，我的本地文件夹已经被签出。如何更改/重新指向新的存储库 URL？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2009-04-20T23:20:53.470

您可以右键单击该文件夹，然后单击 Tortoise 菜单中的“重新定位”。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-19T09:16:07.133

您可以右键单击您的工作副本并选择 TortoiseSVN/Switch... 然后将“To path:”更改为存储库中的新文件夹。它对我有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-03-11T17:30:14.513

您将无法轻松做到这一点，因为这两个存储库没有相同的唯一标识符 (UID)。有两种方法可以做到这一点：

1.  在新存储库上强制使用特定的 UID（不确定您的 SVN 服务器是否提供该选项）

2.  不要删除存储库，只需在工作副本中创建文件夹，并将`svn move`文件放入主干，然后将整个内容签入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T23:20:09.773

假设您在签出版本中没有任何您需要的文件，只需删除目录并再次签出即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T23:24:52.617

（假设您的本地工作副本中有文件）：由于您创建了一个新的存储库，我想您必须将您的工作副本导入到存储库中。

使用 TortoiseSVN，您可以将工作副本导出到不同的文件夹（这样您就只有源文件，没有 .svn 文件夹）。然后，您可以将该文件夹导入到新存储库的 /trunk 中。

# iphone - 触摸方法不适用于发布版本

> ID：770469
> 
> 赞同：1
> 
> 时间：2009-04-20T23:22:19.380
> 
> 标签：iphone, build, release, touch

我遇到了一个奇怪的问题，我为 iPhone 构建的自定义控件在调试模式下构建时完美运行，但在发布模式下构建时只能部分运行。

主包装视图是的子类，`UIView`它包含一行作为子视图添加的“按钮”。自定义按钮类扩展`UIImageView`并使用以下签名覆盖触摸方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

在构建调试代码时，所有这 4 个函数都会在您期望的时间被调用，而在发布构建时，什么都不会发生。我已经登录了他们每个人，但我没有收到任何日志消息（其他日志正在工作）。

另一个有趣的事情是，我在包装视图类中覆盖了 touchesBegan/Moved/Ended 方法，它们工作正常。我尝试在包装类中注释掉这些方法，看看它是否对按钮有影响，但没有。

我也尝试将`UIImageView`类更改为的子类，`UIButton`但在那里遇到了同样的问题，包括像 touchUpInside 这样的任何事件。它们在调试中工作，但不是发布。

我已经尝试研究这个问题以及一般事件处理，但空手而归。有什么想法下一步该去哪里看吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T19:43:43.133

我终于发现了这个问题——“按钮”项目的包装器的高度为 0。在调试模式下，应用程序发现按钮被触摸了，即使它们不在父视图的点击区域内（ clipsToBounds 默认为 NO，因此按钮项目仍然完全可见），在发布模式下，不是那么多。

希望这可以帮助一些人节省我必须经历的头疼和调试时间:) 我也将此发布到 Apple 的一个错误中，因此希望有一天它会得到修复。

# project-management - 在两个项目之间分配开发人员的时间有哪些优势？

> ID：770470
> 
> 赞同：6
> 
> 时间：2009-04-20T23:24:26.393
> 
> 标签：project-management, knowledge-management

我有两个项目，具有相同的优先级和工作时间需求，以及一个开发人员。两种可能的方法：

1.  先交付一个项目。
2.  拆分开发人员的时间并在以后交付。

我看不出人们为什么会选择第二种方法。但他们确实如此。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-20T23:34:30.457

在我看来，这个决定往往归结为***办公室政治***。一个业务组不希望感觉比另一个不重要，尤其是在最高优先级设置的情况下。不管你有多少种不同的方式来解释为什么同时做这两件事是一个坏主意，似乎政治阻碍了。

为了向用户提供最好的产品，您需要防止开发人员崩溃。当开发人员陷入困境时，缺陷的风险和交付时间的长度开始成倍增加。

另外，如果你能戴上你的商业帽子，你可以试着向他们解释，现在没有人从完成的产品所提供的东西中获得任何价值。对于企业来说，首先获得最佳 ROI 产品以开始尽快收回投资更有意义，而其他项目将在第一个项目完成后立即开始。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-20T23:34:34.217

有时你需要离开你已经编写了 11 个小时的代码，以保持最大的生产力。在你一直盯着一个你已经实施了很长时间的系统的细节之后，可能会变得很难只见树木不见森林，这就是你开始犯难以消除的错误的时候。

我认为最好有2-3个当前项目；一个主要项目和 1-2 个其他项目不在如此严格的时间表上。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-20T23:36:07.770

如果这两个项目对公司来说具有相同的优先级，一个明显的原因是项目经理给上级管理层一个假象，即这两个项目都得到了照顾。

考虑这两个项目可能属于不同的客户（或由更高管理层的不同人员提出要求）。

当其他客户的项目被优先考虑时，没有客户希望被告知等待。

很多时候，“我们将把另一个留到以后”是不可接受的答案，即使这会导致两个项目的延迟。

我相信这与软件程序中的“**感知响应**”概念有关。即使某件事需要更多时间来完成，当它似乎在做某事时它看起来会更快，而不是无所事事地等待其他一些事情完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T23:29:01.530

这取决于所涉及的依赖项。如果您在项目未 100% 完成时对项目有另一个可以实现的依赖项，那么分配开发人员的时间可能是有意义的。例如，如果您的任务很大，让主要开发人员进行设计，然后在团队成员审查主要开发人员提出的设计时继续执行第二项任务可能是有意义的。

此外，从单个任务中反序列化开发人员可以帮助减轻无聊。是的，上下文切换可能会造成重大损失，但如果它有助于保持开发人员的敏锐度，那就值得了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T00:19:28.243

如果你按照伟大而神圣的书“peopleware”中的内容，**你应该让你的程序员一次只做一个项目。**

主要原因是注意力分散会降低生产力。

不幸的是，因为很多运营管理人员都是*优秀的商人*而不是*优秀的管理者*，他们可能认为多任务处理或同时处理两个项目意味着更多的事情正在完成（这是不可能的，一个人只能物理地存在于空间的一个流中——一次时间连续体）。

希望有帮助:)

*   LM

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-21T02:02:36.577

我认为从管理的角度来看，第一个原因是感知进步。如果您同时处理多个项目，利益相关者能够立即看到进展。如果你推迟了一个项目，那么该项目的利益相关者可能不喜欢什么都没有做。

从事一个以上的项目也可以在一定程度上降低风险。例如，如果您首先从事一个项目，而该项目花费的时间比预期的要长，那么您可能会遇到第二个项目的问题。利益相关者也很可能希望他们的项目现在完成。由于另一个项目而推迟一个项目会使他们重新考虑是否继续该项目。

根据项目是什么，您可能能够将一个完成的工作用于另一个。如果它们相似，那么同时进行两者可能会有所帮助。如果您按顺序执行它们，则只有后续项目才能从以前的项目中受益。

大多数情况下，项目并不是一个固定的工作流。有时开发人员很忙，有时不忙。如果您一次只处理一个项目，则开发人员和其他团队成员可能会在执行更多“管理”任务时什么都不做。管理多个项目的时间可以让团队在更短的时间内完成更多工作。

作为一名开发人员，只要时间表合理，我更喜欢从事多个项目。只要我没有被要求同时做这两件事而不改变日程安排，我就很好。通常，如果我被困在一个项目上，我可以在另一个项目上工作。但这取决于项目。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-20T23:29:05.913

我个人更喜欢前者，但管理层可能希望看到这两个项目的进展。如果您对两者都进行了一些工作，您可能还会更早地识别出不准确的估计，从而使您能够更早地通知客户。

因此，从开发的角度来看，1 是最好的选择，但从客户服务的角度来看，2 可能更好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-20T23:34:32.423

它正在管理您的客户期望；如果您可以告诉两个客户您正在从事他们的项目，但由于其他项目需要更长的时间，然后说我们将您的项目推迟到我们完成另一个项目，客户将跳船并找到可以现在开始着手他们的项目。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-21T00:36:12.680

这是一种 plaecbo 效应 - 以您所描述的方式将开发人员分成两个项目会给人们/“企业”这样的印象，即两个项目的工作正在完成（以相同的速率/成本/时间），而实际上它是可能效率低得多，因为上下文切换和其他考虑会带来成本（时间和精力）。

一方面，它可以在需求澄清和类似任务等事情上取得进展（因此开发人员可以在它们被阻止时切换到备用项目），它还可以导致其他业务部门/利益相关者等的早期投入。

但最终，如果您拥有一种资源，那么您就会遇到自然瓶颈。

你能为那个孤独的开发者做的最好的事情就是拦截人们（以免分散那个人的注意力），并尝试在需求方面承担一些负担，寻求澄清和处理用户反馈等。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-21T01:14:46.643

我唯一一次故意将开发人员从他们的主要项目中拉出来是他们是否会成为第二个项目的资产，而第二个项目由于某种原因而停滞不前。如果允许开发人员分配一部分时间可以帮助启动一个停滞的项目，我会这样做。这发生在“专家”开发人员身上——那些拥有更多经验/专业技能/等的开发人员。

话虽如此，我会尽量让开发人员在两个项目上停留的时间尽可能短，然后让他们回到他们的“主要”项目。我更喜欢让人们一次专注于一项任务。我觉得我作为经理的工作是平衡和转移人们的优先事项和重点——开发人员应该尽可能地发展。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-21T10:10:47.900

在项目之间分配开发人员的时间具有三个不容忽视的现实优势：

1.  专业化：在两个项目中从事或咨询需要类似专业知识的工作。

2.  一致性和知识共享：将一致性引入两个独立产品的构建和工作方式，在整个公司传播知识。

3.  更好地利用团队：在极少数情况下，其中一个项目暂时搁置等待进一步的输入。

当不涉及上下文的重大变化时，在多个项目之间分配时间是有益的。

让开发人员单枪匹马地处理多个软件开发项目会否定专业化（没有任何专业化）、一致性和知识共享的好处。

它只保留了时间利用的优势，但是如果上下文差异很大并且项目之间没有大量重叠，则切换的开销很可能会超过节省的任何时间。

上下文切换是一种非常有趣的野兽：与它的名字相反，它暗示着一种谨慎的变化，这个过程总是渐进的。一个人的头脑中有不同程度的上下文信息：10% 上下文（浅），90%（深）。与完全切换相比，浅切换所需的时间更少；然而，加载的上下文量（专注于任务）和输出质量之间存在直接相关性。

依靠浅切换（以减少前置时间）可以将您的时间完全用于多个不同的项目，但输出质量将不可避免地受到影响。在某些时候，不仅质量的“非功能性”方面（系统安全性、可用性、性能）会降低，而且功能性（系统无法完成其工作、功能故障）也会降低。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-21T10:24:08.400

通过在两个项目之间分配时间，您可以降低因另一个项目而延迟一个项目的风险。

让我们假设这两个项目的估计都是 3 个月。通过一个接一个地依次进行，您应该能够在 3 个月后交付第一个项目，在 3 个月后（即 6 个月后）交付第二个项目。但是，随着软件开发的发展，第一个项目很可能会遇到一些问题，因此需要 12 个月。或者，更糟糕的是，进入“使用中，但从未完全完成”的炼狱。第二个项目开始晚了，甚至*从来没有*！

通过拆分资源，您可以避免此问题。如果第二个项目一切顺利，你可以在 6 个月后交付它，无论第一个项目做得如何。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-25T21:44:56.517

在现实生活中，在多个项目上工作*可能*是一个优势的情况是规范不清楚（每次）并且客户经常无法澄清。在这些情况下，您可以切换到另一个项目。这会导致一些任务切换，在完美的世界中应该避免，但话又说回来......

简而言之，这基本上就是我的职业生涯:-)

# gwt - 在 Intellij 的 GWT 模块中导入 Groovy 类

> ID：770471
> 
> 赞同：0
> 
> 时间：2009-04-20T23:24:44.257
> 
> 标签：gwt, groovy, intellij-idea

基本上我什至不能在常规 GWT 入口点中导入 Groovy 类：

```
导入 com.google.gwt.core.client.EntryPoint；// 好的
导入 groovy.lang.Binding；// 不好
导入 groovy.util.GroovyScriptEngine；// 不好

```

Intellij 8.0 的检查员不断告诉我：

JRE 仿真库中不存在“groovy.lang.Binding”类，因此不能在客户端代码中使用

JRE 仿真库中不存在“groovy.util.GroovyScriptEngine”类，因此不能在客户端代码中使用

显然，我最终在运行时也遇到了问题：

[错误] 第 11 行：类型 groovy.util.GroovyScriptEngine 没有可用的源代码；你忘了继承一个必需的模块吗？

[错误] 第 12 行：没有可用于类型 groovy.lang.Binding 的源代码；你忘了继承一个必需的模块吗？

我已经检查了几次我的模块的依赖项，并且 groovy-all-1.6.1.jar 在那里正确定义。我可能在其他地方遗漏了一些东西......

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T23:52:20.400

尝试使用 Groovy 毫无意义，因为 Gwt 编译器只理解 Java 语言语法，它是 Java 库的子集。编译器适用于源代码而不是字节码。一个原因包括存储 javascript (JSNI) 所需的魔术注释。编译器实际上是在扫描 *.java 而不是 *.class 文件的源路径。

阅读 doco fir 有更深入的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-15T21:36:52.913

从某种意义上说，拥有一个 groovy 语言 gwt 会很酷。

但是，为什么要从一种动态语言转到另一种呢？我认为 gwt 的目的是获得静态类型和简单的 java 调试。

# pdf - 是否可以在 Adob e Reader 中以预定义的放大倍率打开 PDF 文件？

> ID：770473
> 
> 赞同：13
> 
> 时间：2009-04-20T23:24:53.303
> 
> 标签：pdf, acrobat, adobe-reader

我们有一个可下载的 PDF 文件，它在 Adob​​e Reader 中放大 72% 时看起来很棒，而在 101% 时则不太好。在阅读器中下载并打开时，其默认放大率为 101%。

有没有办法在 PDF 文件本身中定义默认放大倍率，以便我们确保最佳的用户体验？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-21T19:08:18.637

如果您可以控制下载时使用的 URL，您可以在 URL 中放入参数来控制内置阅读器如何显示文件。

例如，[http](http://example.org/doc.pdf#zoom=50) ://example.org/doc.pdf#zoom=50会将放大率设置为 50%。

请参阅：[https ://www.evermap.com/AutoBookmark/Manual/OpenParameters.htm](https://www.evermap.com/AutoBookmark/Manual/OpenParameters.htm)

以上适用于 Adob​​e 提供的内置阅读器。其他读者可能不尊重这些参数。特别是，请参阅[有关 Chrome 的这个问题](https://stackoverflow.com/questions/7126089/how-to-specify-parameters-to-google-chrome-adobe-pdf-viewer)的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-20T23:39:47.653

打开文件时如何定义放大率的示例（不管默认值如何）：

```
AcroRd32 /A "zoom=50=OpenActions" sh.pdf 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T23:37:57.330

首先，这是一个编程网站，因此您应该确定一个编程上下文。这个问题可能会被关闭，因为它属于即将启动的[serverfault.com](http://serverfault.com)

要设置默认放大倍率，您需要 Adob​​e Acrobat ~~Standard~~或 Professional 而不是 Reader 才能编辑 pdf。然后，当您打开文档时，单击文件 | 特性。单击初始视图选项卡并在放大率文本框中输入 72%，然后单击确定。保存您的 pdf 并重新打开它。打开时应默认为 72% 放大倍率。

注意：我不确定其他开源 pdf 编辑器是否提供这种类型的功能。

更新：标准不适用于保存放大倍数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-25T23:32:46.180

对于 Adob​​e Standard，请转到“编辑”，然后转到“首选项”。当您单击左侧的“页面显示”选项卡时，您会看到一个面板，其中包含一个名为“缩放”的字段，您可以在其中从下拉菜单中选择一个百分比。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-28T15:58:51.657

如果上述建议不起作用，可能是因为书签的属性中可能包含缩放指令。要查看书签属性，请在书签面板中选择一个书签，然后右键单击它以打开属性。选择行动。应该有关于单击书签时将应用的操作的描述。

我发现的最佳解决方案是您可以为缩放指令添加一个后续属性，该属性将在初始指令之后执行，并将页面缩放设置为您的规范。为此，请选择所有书签，右键单击以打开属性，然后选择操作，然后选择添加功能。选择添加后，找到最适合您要查找的缩放指令。

如果要通过书签属性中的编辑功能对所有书签编辑初始缩放指令，则不能全选，因为虽然缩放设置正确，但每个书签都会设置为一个书签页。如果您希望以这种方式编辑属性，则必须逐个编辑。

# serialization - 序列化和封送处理有什么区别？

> ID：770474
> 
> 赞同：626
> 
> 时间：2009-04-20T23:26:53.300
> 
> 标签：serialization, terminology, marshalling, rpc

我知道就几种分布式技术（例如 RPC）而言，使用了“编组”一词，但不明白它与序列化有何不同。它们不是都将对象转换为一系列位吗？

### 有关的：

[什么是序列化？](https://stackoverflow.com/questions/633402/what-is-serialization)

[什么是对象编组？](https://stackoverflow.com/questions/154185/what-is-object-marshalling)

* * *

## 回答 #1

> 赞同：480
> 
> 时间：2009-04-20T23:42:52.433

编组和序列化在远程过程调用的上下文中是*松散*的同义词，但在语义上是不同的意图问题。

特别是，编组是关于从这里到那里获取参数，而序列化是关于将结构化数据复制到或从原始形式（如字节流）复制。从这个意义上说，序列化是执行封送处理的一种手段，通常实现按值传递的语义。

对象也可以通过引用进行编组，在这种情况下，“在线”上的数据只是原始对象的位置信息。但是，这样的对象可能仍然可以进行值序列化。

正如@Bill 所提到的，可能还有其他元数据，例如代码库位置甚至对象实现代码。

* * *

## 回答 #2

> 赞同：262
> 
> 时间：2013-02-02T02:50:43.727

两者都做一件事——*序列化*一个对象。序列化用于传输对象或存储它们。但：

*   **序列化：**序列化一个对象时，只有该对象内的成员数据写入字节流；不是实际实现对象的代码。
*   **Marshalling：** 当我们谈论**将 Object 传递给远程对象 (RMI)**时，使用术语 Marshalling 。在编组中，对象被序列化（成员数据被序列化）**+**附加代码库。

**所以序列化是编组的一部分。**

*CodeBase*是告诉 Object 的接收者在哪里可以找到该对象的实现的信息。任何认为它可能将对象传递给以前可能没有见过它的另一个程序的程序都必须设置代码库，以便接收者可以知道从哪里下载代码，如果它没有本地可用的代码。接收器将在反序列化对象后，从中获取代码库并从该位置加载代码。

* * *

## 回答 #3

> 赞同：112
> 
> 时间：2009-04-20T23:31:23.430

来自[编组（计算机科学）](http://en.wikipedia.org/wiki/Marshalling_(computer_science))维基百科文章：

> [在 Python 标准库1](http://en.wikipedia.org/wiki/Marshalling_(computer_science))中，术语“marshal”被认为与“serialize”同义，但在 Java 相关的 RFC 2713 中这些术语不是同义词：
> 
> “编组”一个对象意味着以这样一种方式记录其状态和代码库，当编组的对象被“解组”时，可能通过自动加载对象的类定义来获得原始对象的副本。您可以编组任何可序列化或远程的对象。编组类似于序列化，除了编组还记录代码库。编组与序列化的不同之处在于编组特别对待远程对象。（RFC 2713）
> 
> “序列化”对象意味着将其状态转换为字节流，以便字节流可以转换回对象的副本。

因此，编组还将对象的*代码库*保存在字节流中，除了它的状态。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-04-20T23:30:39.420

我认为主要区别在于编组据说也涉及代码库。换句话说，您将无法将对象编组和解组为不同类的状态等效实例。

序列化只是意味着您可以存储对象并重新获得等效状态，即使它是另一个类的实例。

话虽如此，它们通常是同义词。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2011-10-08T15:14:51.620

**编组是指将函数的签名和参数转换为单字节数组。** *专门用于 RPC。*

**序列化更多时候是指将整个对象/对象树转换为字节数组** *编组将序列化对象参数，以便将它们添加到消息中并通过网络传递。* *序列化也可用于存储到磁盘。*

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2020-01-02T06:31:33.040

## 基础第一

**字节流**- 流是数据序列。输入流 - 从源读取数据。输出流 - 将数据写入目的地。Java 字节流用于逐字节（一次 8 位）执行输入/输出。字节流适用于处理二进制文件等原始数据。Java 字符流用于一次执行 2 个字节的输入/输出，因为字符是使用 Java 中的 Unicode 约定存储的，每个字符有 2 个字节。当我们处理（读/写）文本文件时，字符流很有用。

**RMI（远程方法调用）** - 一种 A​​PI，它提供了一种在 java 中创建分布式应用程序的机制。RMI 允许对象调用在另一个 JVM 中运行的对象的方法。

* * *

**序列化**和**编组**都松散地用作同义词。这里有一些区别。

**序列化**- 对象的数据成员被写入二进制形式或字节流（然后可以写入文件/内存/数据库等）。一旦将对象数据成员写入二进制形式，就无法保留有关数据类型的信息。

[![在此处输入图像描述](https://i.stack.imgur.com/gl5Oo.png)](https://i.stack.imgur.com/gl5Oo.png)

**编组**- 对象被序列化（以二进制格式的字节流），附加数据类型+代码库，然后传递**远程对象（RMI）**。编组会将数据类型转换为预先确定的命名约定，以便可以根据初始数据类型对其进行重构。

[![在此处输入图像描述](https://i.stack.imgur.com/ZJM7y.png)](https://i.stack.imgur.com/ZJM7y.png)

所以序列化是编组的一部分。

**CodeBase**是告诉 Object 的接收者在哪里可以找到该对象的实现的信息。任何认为它可能将对象传递给以前可能没有见过它的另一个程序的程序都必须设置代码库，以便接收者可以知道从哪里下载代码，如果它没有本地可用的代码。接收器将在反序列化对象后，从中获取代码库并从该位置加载代码。（复制自@Nasir 答案）

**序列化**几乎就像对象使用的内存的愚蠢内存转储，而**编组**存储有关自定义数据类型的信息。

在某种程度上，序列化通过按值传递的实现来执行编组，因为没有传递数据类型的信息，只是将原始形式传递给字节流。

如果流从一个操作系统传输到另一个操作系统，如果不同的操作系统具有不同的表示相同数据的方式，则序列化可能会遇到一些与大端、小端相关的问题。另一方面，编组非常适合在操作系统之间迁移，因为结果是更高级别的表示。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2015-03-12T17:54:36.347

**编组**是告诉编译器如何在另一个环境/系统上表示数据的规则；例如;

```
[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
public string cFileName;
[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 14)]
public string cAlternateFileName; 
```

如您所见，两个不同的字符串值表示为不同的值类型。

**序列化**只会转换对象内容，而不是表示（将保持不变）并遵守序列化规则（导出或不导出什么）。例如，私有值不会被序列化，公共值是，对象结构将保持不变。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-09-10T06:41:39.027

以下是两者的更具体示例：

序列化示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

typedef struct {
    char value[11];
} SerializedInt32;

SerializedInt32 SerializeInt32(int32_t x) 
{
    SerializedInt32 result;

    itoa(x, result.value, 10);

    return result;
}

int32_t DeserializeInt32(SerializedInt32 x) 
{
    int32_t result;

    result = atoi(x.value);

    return result;
}

int main(int argc, char **argv)
{    
    int x;   
    SerializedInt32 data;
    int32_t result;

    x = -268435455;

    data = SerializeInt32(x);
    result = DeserializeInt32(data);

    printf("x = %s.\n", data.value);

    return result;
} 
```

在序列化中，数据以一种可以在以后存储和取消扁平化的方式扁平化。

编组演示：

( `MarshalDemoLib.cpp`)

```
#include <iostream>
#include <string>

extern "C"
__declspec(dllexport)
void *StdCoutStdString(void *s)
{
    std::string *str = (std::string *)s;
    std::cout << *str;
}

extern "C"
__declspec(dllexport)
void *MarshalCStringToStdString(char *s)
{
    std::string *str(new std::string(s));

    std::cout << "string was successfully constructed.\n";

    return str;
}

extern "C"
__declspec(dllexport)
void DestroyStdString(void *s)
{
    std::string *str((std::string *)s);
    delete str;

    std::cout << "string was successfully destroyed.\n";
} 
```

( `MarshalDemo.c`)

```
#include <Windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

int main(int argc, char **argv)
{
    void *myStdString;

    LoadLibrary("MarshalDemoLib");

    myStdString = ((void *(*)(char *))GetProcAddress (
        GetModuleHandleA("MarshalDemoLib"),
        "MarshalCStringToStdString"
    ))("Hello, World!\n");

    ((void (*)(void *))GetProcAddress (
        GetModuleHandleA("MarshalDemoLib"),
        "StdCoutStdString"
    ))(myStdString);

    ((void (*)(void *))GetProcAddress (
        GetModuleHandleA("MarshalDemoLib"),
        "DestroyStdString"
    ))(myStdString);    
} 
```

在编组中，数据不一定需要展平，但需要将其转换为另一种替代表示。所有铸造都是编组，但并非所有编组都是铸造。

编组不需要涉及动态分配，它也可以只是结构之间的转换。例如，您可能有一对，但函数期望这对的第一个和第二个元素是相反的；您将一对转换/ memcpy 一对将无法完成这项工作，因为 fst 和 snd 会被翻转。

```
#include <stdio.h>

typedef struct {
    int fst;
    int snd;
} pair1;

typedef struct {
    int snd;
    int fst;
} pair2;

void pair2_dump(pair2 p)
{
    printf("%d %d\n", p.fst, p.snd);
}

pair2 marshal_pair1_to_pair2(pair1 p)
{
    pair2 result;
    result.fst = p.fst;
    result.snd = p.snd;
    return result;
}

pair1 given = {3, 7};

int main(int argc, char **argv)
{    
    pair2_dump(marshal_pair1_to_pair2(given));

    return 0;
} 
```

当您开始处理多种类型的标记联合时，编组的概念变得尤为重要。例如，您可能会发现很难让 JavaScript 引擎为您打印“c 字符串”，但您可以要求它为您打印包装好的 c 字符串。或者，如果您想在 Lua 或 Python 运行时中从 JavaScript 运行时打印字符串。它们都是字符串，但通常不经过编组就无法相处。

我最近遇到的一个烦恼是 JScript 数组将 C# 编组为“__ComObject”，并且没有记录的方式来使用这个对象。我可以找到它的地址，但我真的不知道它的任何其他信息，所以真正弄清楚它的唯一方法是用任何可能的方式戳它，希望能找到关于它的有用信息。因此，使用更友好的界面（如 Scripting.Dictionary）创建新对象变得更加容易，将数据从 JScript 数组对象复制到其中，并将该对象传递给 C# 而不是 JScript 的默认数组。

( `test.js`)

```
var x = new ActiveXObject('Dmitry.YetAnotherTestObject.YetAnotherTestObject');

x.send([1, 2, 3, 4]); 
```

( `YetAnotherTestObject.cs`)

```
using System;
using System.Runtime.InteropServices;

namespace Dmitry.YetAnotherTestObject
{
    [Guid("C612BD9B-74E0-4176-AAB8-C53EB24C2B29"), ComVisible(true)]
    public class YetAnotherTestObject
    {
        public void send(object x)
        {
            System.Console.WriteLine(x.GetType().Name);
        }
    }
} 
```

> 上面打印“__ComObject”，从 C# 的角度来看，它有点像一个黑盒子。

另一个有趣的概念是，您可能了解如何编写代码，以及知道如何执行指令的计算机，因此作为程序员，您正在有效地将您希望计算机做什么的概念从您的大脑整合到程序中图片。如果我们有足够好的编组器，我们可以只考虑我们想要做什么/改变，程序会改变这种方式而无需在键盘上打字。所以，如果你有办法在你真正想写分号的那几秒钟内将所有物理变化存储在你的大脑中，你可以将这些数据编组为一个信号以打印一个分号，但这是一个极端。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-06-25T00:14:18.297

My understanding of marshalling is different to the other answers.

**Serialization:**

To Produce or rehydrate a wire-format version of an object graph utilizing a convention.

**Marshalling:**

To Produce or rehydrate a wire-format version of an object graph by utilizing a mapping file, so that the results can be customized. The tool may start by adhering to a convention, but the important difference is the ability to customize results.

**Contract First Development:**

Marshalling is important within the context of contract first development.

*   Its possible to make changes to an internal object graph, while keeping the external interface stable over time. This way all of the service subscribers won't have to be modified for every trivial change.
*   Its possible to map the results across different languages. For example from the property name convention of one language ('property_name') to another ('propertyName').

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-04-20T23:32:45.843

编组通常在相对密切相关的进程之间进行；序列化不一定有这种期望。因此，例如，当在进程之间编组数据时，您可能希望仅发送一个 REFERENCE 来恢复潜在的昂贵数据，而对于序列化，您希望将其全部保存，以便在反序列化时正确重新创建对象。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-01-29T16:52:29.390

**序列化与编组**

问题：对象属于某个进程（VM）并且它的生命周期是相同的

`Serialisation`- 将**对象状态**转换**为字节流**（JSON、XML...）以进行保存、共享、转换...

`Marshalling`- 包含`Serialisation + codebase`。通常它由`Remote procedure call`(RPC) -> `Java Remote Method Invocation`(Java RMI) 使用，您可以在其中调用托管在**远程 Java 进程**上的对象方法。

`codebase``class definition`- 是ClassLoader 可以下载的地方或 URL 。`CLASSPATH`[^([About])](https://stackoverflow.com/a/63768305/4770877)作为**本地代码库**

```
JVM -> Class Loader -> load class definition 
```

```
java -Djava.rmi.server.codebase="<some_URL>" -jar <some.jar> 
```

非常简单的 RMI 图表

![](https://i.stack.imgur.com/UaCvP.png)

```
Serialisation - state
Marshalling - state + class definition 
```

[官方文档](https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/codebase.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-11-14T11:01:31.313

编组实际上使用序列化过程，但主要区别在于它在序列化中仅数据成员和对象本身被序列化而不是签名，但在编组对象 + 代码库（其实现）中也将被转换为字节。

编组是使用 JAXB 将 java 对象转换为 xml 对象以便它可以用于 Web 服务的过程。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-20T23:46:53.360

将它们视为同义词，两者都有一个生产者将内容发送给消费者......最后，实例的字段被写入字节流，而另一端则相反，并使用相同的实例。

注意 - java RMI 还包含对传输接收者缺少的类的支持......

# javascript - jQuery 中不可用的 DOM 属性/方法？

> ID：770475
> 
> 赞同：4
> 
> 时间：2009-04-20T23:27:22.673
> 
> 标签：javascript, jquery, dom

跟进我[关于 jQuery.get()](https://stackoverflow.com/questions/765698/jquery-get-practical-uses)的问题，我想知道是否存在 jQuery 中不可用的 DOM 属性和方法列表，只有在使用原始 DOM 对象时才能访问（即 $(" #someID").get().scrollHeight;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T09:20:11.220

我没有遇到过一个列表，但如果存在的话，它可能会很长。除了特定于浏览器的（专有）属性之外，还有许多其他不太有用的属性和方法，目前还没有被 jQuery 抽象出来。但是，我真的不认为这是一个问题，甚至不是一个有效的讨论点，因为 jQuery 是 JavaScript；如果您需要访问超出 jQuery 提供的内容，那么您可以使用**`get()`**或访问您的“jQuery 集合”之一中的指定元素，例如数组：

```
jQuery(elem)[0].someDOMProperty; 
```

另外，jQuery 完全不支持 DOM 中的非元素节点。如果出于某种原因，您需要直接访问评论节点、文本节点等，那么您将需要使用“原始”DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T00:11:39.150

我不知道 jQuery 中不可用的 DOM 操作/属性的编译列表（并且快速的谷歌搜索没有发现任何东西），但是如果你去[http://api.jquery.com/](http://api.jquery.com/)你可以查看整个 API，甚至可以将其下载为 Adob​​e AIR 应用程序，以防在需要时没有互联网。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T00:56:59.853

每个元素的每个属性都可以通过该[`attr()`](http://docs.jquery.com/Attributes/attr)函数访问。如果您可以`document.getElementById()`对该元素执行 a 然后访问属性，您也可以使用该`attr()`函数执行此操作。但是，使用 jquery 时，可以通过其他方式更轻松地访问某些属性。例如，要查看元素是隐藏还是可见，您可以执行以下操作：

```
var isVisible=$("#el").is(":visible"); 
```

而不是使用该`attr()`方法。同样，您可以比使用该方法`selectedIndex`更容易找到下拉列表和所选选项的文本。[此 pdf](http://comp345.awardspace.com/select_element_cheatsheet.pdf)概述了其中一些更简单的方法。`attr()`

要访问 css 属性，最好执行以下操作：

```
var fontWeight=$("#el").css("fontWeight"); 
```

而不是使用`get()`or `attr()`。您也可以通过这种方式设置 css 属性，例如：

```
$("#el").css("fontWeight","bold"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T01:29:39.277

不，JQuery 只是 JavaScript。如果你可以在 JavaScript 中完成，那么你可以在 jQuery 中完成。一些属性和方法在 jQuery 对象的上下文中被覆盖，这就是您希望我们使用 get() 方法的地方——以“获取”（即访问）标准属性/方法。

这真的和它一样复杂。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-20T23:48:39.567

我可能是错的，但我认为您可以通过 attr 方法访问任何属性。

# compression - 有谁知道压缩PNG图像的某些部分而不对其进行切片的程序/方法？

> ID：770482
> 
> 赞同：1
> 
> 时间：2009-04-20T23:31:05.147
> 
> 标签：compression, png

请帮忙！提前致谢。

* * *

*更新：*很抱歉延迟回复，但如果在这里提供更多背景信息会有所帮助，因为我不确定我应该问什么替代问题。

我有一个 300px x 300px 的网站主页图像。该图像有几个不同的区域，包括两个在区域顶部有图形副本的区域。

在不影响文本的外观和图像的关键区域的情况下，我已尽可能地压缩图像。

我尝试切片图像的不太关键的区域并以较低的压缩率保存这些区域，以降低总 kbs，但正如 gregmac 发布的那样，重新加入时这些部分看起来不正确。

我想知道是否有一个软件，或者手动解决方案来识别图像的关键区域以“减少压缩”并且可以更多地压缩图像的其他部分以减小文件大小，同时保留这些元素在需要高分辨率更清晰的图形中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T00:03:03.947

你不能 - 你只能压缩整个 PNG 文件。

你不需要（我想不出压缩PNG文件的特定部分会有用的单一情况）

将图像分成多个部分（“切片”）是压缩图像文件不同部分的*唯一*方法，尽管我什至建议再次在一个“切片图像”中使用不同的压缩级别，因为不同的压缩伪影连接起来会可能看起来很奇怪

关于你的更新，

> 识别图像的关键区域以“减少压缩”并且可以更多地压缩图像的其他部分以减小文件大小

这本质上就是图像压缩所做的——如果有一点空白区域，它将被压缩到几个字节（例如使用[RLE](http://en.wikipedia.org/wiki/Run-length_encoding)），但如果有一个非常详细的区域，它将有更多的字节“花费”在上面。

问题听起来像图像太大（就文件大小而言），您是否尝试过其他图像格式，主要是 GIF 或 JPEG（或其他 PNG 格式，PNG-8 或 PNG-24）？

> 在不影响文本外观的情况下，我已尽可能地压缩图像

也许文本可以使用 CSS 覆盖，而不是嵌入到图像中？可能不实用，但它可以让您更多地压缩背景（如果背景图像是照片，JPEG 可能效果最好，因为您不再需要担心文本）

除此之外，我没有想法。300*300px PNG*真的*太大了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-30T07:17:35.843

听起来您正在使用 JPEG 之类的东西压缩图像的一部分，然后将这些压缩图像粘贴到与其他图像组合的 PNG 上，整个 PNG 被发送到您将它们拆分的浏览器。

这样做的问题是，您压缩 JPEG 部分的次数越多，您获得的解压缩伪影就越多。然后，当您将这些低质量的图像放到使用 deflate 压缩的 PNG 上时，您实际上最终会增加文件大小，因为它无法很好地压缩。

因此，如果您热衷于将 PNG 保留为文件格式，最好的解决方案是不要使用粘贴到 PNG 上的 JPEG 压缩部分 - 尽可能保持一切清晰。

除非您在压缩中使用了“预测器”，否则 PNG 会单独压缩每一行。

所以最好让你的PNG尽可能宽，相似的图像水平相邻，而不是垂直相邻。

也许上传您正在使用的图像的示例？

# linux - 为什么我在 linux 上打包的 AIR 应用程序在 mac 上使用时会损坏？

> ID：770487
> 
> 赞同：0
> 
> 时间：2009-04-20T23:34:13.483
> 
> 标签：linux, air

我需要在我的 linux 网络服务器上在线生成我的 air 应用程序。我创建了一个签名并使用 adt 将应用程序打包，然后将其下载到我的桌​​面 mac 并尝试安装它，它说包已损坏并获取另一个副本。但是当我在 mac 上编译它（使用完全相同的命令到 adt）它安装并运行良好。

为什么使用 linux SDK 打包会创建损坏的 .air 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-29T12:37:38.307

似乎 adt 二进制文件在 Linux 中不能 100% 工作。

# c# - Invoke 在下面是如何工作的？线程不是只有1个指令指针吗？

> ID：770497
> 
> 赞同：10
> 
> 时间：2009-04-20T23:37:58.187
> 
> 标签：c#, multithreading

我想知道 C# Invoke 函数如何工作（我现在正在考虑从工作线程调用以调用从 GUI 线程操作 GUI 的方法）：

假设我有两个线程，每个线程都有它的指令指针，指向当前正在执行的指令。

现在，我在工作线程中调用 Invoke 以在*GUI*线程中运行委托。当一个 GUI 线程已经有它的指令指针 (IP) 并且每个线程只能有一个时，这怎么可能呢？当我突然调用我的代码时，该 IP 会发生什么？以及如何使 GUI 线程之后可以继续它正在做的任何事情（它以前的 IP 是否以某种方式恢复）？

这个问题的概括是，当我想从线程 1 调用函数 f() 时，它是如何完成的，而 f() 在*其他*线程的上下文中执行......

谢谢开导：）！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-20T23:39:50.727

它向目标线程发送一个 Window 消息。线程必须在消息循环中 Invoke 才能工作。当线程收到消息时，它会调用委托。

不需要跨线程更改 IP - 事实上，更改 IP 几乎肯定会使目标线程崩溃。

# c++ - MoveWindow 死锁？

> ID：770503
> 
> 赞同：2
> 
> 时间：2009-04-20T23:39:58.183
> 
> 标签：c++, winapi, deadlock

我在线程 A 上有一个窗口，它在某些时候（由于在其 wndproc 上接收到消息）触发线程 B 上的操作，然后等待操作完成（使用某种同步机制）。线程 B 然后调用`MoveWindow()`, 以在线程 A 的窗口（例如标准文本框）内移动子窗口。此时程序由于某种原因进入死锁状态。如果`MoveWindow()`从线程 A 调用，一切正常。任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T13:10:50.150

You could use SetWindowPos with the flag SWP_ASYNCWINDOWPOS, instead of MoveWindow.

The reason may be that ThreadA waits for ThreadB to handle some event but meanwhile ThreadB wait for ThreadA (the thread owning the window) to return the result of MoveWindow.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T00:37:29.627

我认为@1800 的解释是最接近的。

当您从不拥有该窗口的线程中移动一个窗口时，我认为 Windows 不会使用 SendMessage 将 WM_WINDOWPOSCHANGING 之类的东西传递给移动窗口的窗口过程。相反，为了确保仅在正确的线程上调用窗口过程，它会发布 WM_WINDOWPOSCHANGING 消息并阻塞，直到它被正确线程中运行的事件循环选中。但是，该事件循环没有运行 - 它被阻塞，等待 MoveWindow 完成。

@totaland 和 @Logan Capaldo 的解决方案将起作用。

可能你不需要等到你的窗口移动了。或者，如果您确实需要确定，请使用 MsgWaitForMultipleObjectsEx 并运行一个小事件循环来处理发布的消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T23:55:25.757

什么是“某种同步机制”？如果是 WaitFor(Multiple)Object(s)，可以使用 [MsgWaitForMultipleObjects]( [http://msdn.microsoft.com/en-us/library/ms684242(VS.85).aspx)](http://msdn.microsoft.com/en-us/library/ms684242(VS.85).aspx)) ( [Ex](http://msdn.microsoft.com/en-us/library/ms684245(VS.85).aspx))代替唤醒当您有消息并按照 Lucero 的建议发送消息时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-20T23:44:18.857

您需要确保在等待时线程的消息泵正在运行。

您可能希望使用[PeekMessage()](http://msdn.microsoft.com/en-us/library/ms644943(VS.85).aspx)（或者[GetMessage()](http://msdn.microsoft.com/en-us/library/ms644936(VS.85).aspx)）和[DispatchMessage()](http://msdn.microsoft.com/en-us/library/ms644934(VS.85).aspx)进行循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T00:25:21.443

[用户界面对象的线程亲和性，第 1 部分：窗口句柄](http://blogs.msdn.com/oldnewthing/archive/2005/10/10/479124.aspx)：

> 不同的对象有不同的线程亲和性规则，但底层原理来自于 16 位 Windows。
> 
> 最重要的用户界面元素当然是窗口。窗口对象具有线程亲和性。创建窗口的线程是与窗口密不可分的线程。非正式地，有人说线程“拥有”窗口。消息仅在拥有它的线程上发送到窗口过程，一般来说，对窗口的修改只能从拥有它的线程进行。尽管窗口管理器允许任何线程访问诸如窗口属性、样式和其他属性（如窗口过程）之类的东西，并且从窗口管理器的角度来看，此类访问是线程安全的，但通常应该限制加载-修改-写入序列到所有者线程。

# tfs - Team Foundation Server (TFS) 代理 - 在 Windows XP 上安装

> ID：770504
> 
> 赞同：2
> 
> 时间：2009-04-20T23:40:20.240
> 
> 标签：tfs

TFS 代理可以安装在 Windows XP 上吗？我有一个不允许运行 Windows Server 的环境；但是，它在异地，因此代理会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T13:33:43.283

事实证明，微软从 TFS v1.0 更改了他们的部署和定价模型。代理需要 Windows Server 并且成本与 TFS 的新实例相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:13:08.370

据我了解，Microsoft TFS 代理需要安装在 Windows Server 操作系统上，并且盒子上也安装了 IIS。您当然可以在 XP 机器上使用 Virtual PC 映像，但我怀疑这可能违反阻止您在远程站点上运行服务器的相同规则。

另一种选择是来自 Teamprise（我为之工作）的名为“ [Remote Accelerator ”的产品。](http://www.teamprise.com/products/accelerator/)

[http://www.teamprise.com/products/accelerator/](http://www.teamprise.com/products/accelerator/)

它被设计为供单人使用的 TFS 代理服务器，并且设计用于在 Windows XP、Vista 等客户端操作系统上运行。同样价格为 99 美元，它比 Microsoft TFS 代理（有零售许可价格与另一个成熟的 TFS 服务器实例相当）。

# c - 在 C 中调用新的 NotifyOSD 框架？

> ID：770505
> 
> 赞同：2
> 
> 时间：2009-04-20T23:41:16.807
> 
> 标签：c, linux, ubuntu, gtk, ubuntu-9.04

我想让我的 GTK+ 应用程序使用 Ubuntu 中的新通知区域。我怎样才能做到这一点？一个例子如下所示：

[![](https://i.stack.imgur.com/PsW2I.png)](https://i.stack.imgur.com/PsW2I.png)
[（来源：[iconocast.com](http://www.iconocast.com/EB000000000000112/E3/News1_0.jpg)）]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T00:11:30.617

我不在 Ubuntu 机器上，所以我无法写出任何示例。

但是 Ubuntu 的[NotificationDevelopmentGuidelines](https://wiki.ubuntu.com/NotificationDevelopmentGuidelines)页面有很多信息。

C、C# 和 Python 中的示例。

Debain 也有一个[教程](http://www.debian-administration.org/article/Creating_desktop_notifications)，应该或多或少有一些共性。

基本上，您将绑定到利用 Free Desktop Foundations [D-Bus](http://www.freedesktop.org/wiki/Software/dbus)消息传递系统的 NotifyOSD 框架。

对于开发，您需要[libnotify](https://launchpad.net/ubuntu/+source/libnotify/)（[我只能找到在线文档](http://www.galago-project.org/docs/api/libnotify/files.html)）

如果您只想从命令行获得一些快速结果或在 shell 脚本中使用，您也可以使用**notify-send**命令。

用法：

```
notify-send [OPTION...] <SUMMARY> [BODY] 
```

例子：

```
notify-send Test "Totally gnarly message bro" 
```

或者您可以指定一个图标：

```
notify-send -i ../icon.jpg  Image "This is a sweet picture" 
```

还有很多其他选项，过期时间、紧急程度、类别。

Ubuntu 没有严格遵循通知规范，它们不尊重 FSF 定义的许多选项。如果某些事情不适用于 ubuntu 的通知程序，而您看到使用另一个通知程序系统，请不要感到惊讶。

其他一些资源：

*   Ubuntu 的[NotifyOSD](https://wiki.ubuntu.com/NotifyOSD) wiki 页面。
*   ArsTechnica 有一篇关于新通知系统的精彩[文章。](http://arstechnica.com/open-source/news/2008/12/canonical-linux-notification-system.ars)
*   关于 Ubuntu 通知实现中的一些缺陷的好[文章](http://glyph.twistedmatrix.com/2009/04/notification-disappointment-in-ubuntu.html)。

# .net - 如果所需的 app/web.config 配置设置不存在，最适合抛出的异常是什么？

> ID：770506
> 
> 赞同：4
> 
> 时间：2009-04-20T23:41:51.530
> 
> 标签：.net, exception, configuration, web-config, app-config

（@tomhollander 在 Twitter 上提问）如果所需的 app/web.config 配置设置不存在，最合适的异常是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-20T23:44:46.050

[System.Configuration.ConfigurationException](http://msdn.microsoft.com/en-us/library/system.configuration.configurationexception.aspx)

根据 MSDN（我添加的重点）：

> 如果应用程序尝试向配置文件读取或写入数据但未成功，则会引发 ConfigurationException 异常。造成这种情况的一些可能原因可能包括配置文件中的格式错误的 XML、文件权限问题以及**具有无效值的配置属性**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T00:52:07.557

**ConfigurationException**已过时。文档说它已被**ConfigurationErrorsException**取代，但这旨在传达配置系统中的故障 - 我不认为它旨在显示诸如丢失或格式错误的配置值之类的问题。

# asp.net - 客户端 JS 和 ASP.NET 回发

> ID：770508
> 
> 赞同：0
> 
> 时间：2009-04-20T23:42:34.057
> 
> 标签：asp.net, javascript, postback

我有一些设置表单字段的客户端 JavaScript。当页面回发时，这些字段将被重置。

为什么是这样？回发发生时，字段值不是被捕获并放入 ViewState 吗？

编辑：当我在 Page_Load() 上中断调试器时，在回发后执行任何代码之前，表单字段值为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T00:07:16.713

从您的客户端 javascript 填充的表单元素是否设置为禁用？如果是这样，ASP.NET 将忽略该值。

例如：

```
<asp:TextBox ID="TextBox1" Enabled="False" Runat="Server" />

<script type="text/javascript">
    document.forms[0].elements["TextBox1"].style.disabled = false;
    document.forms[0].elements["TextBox1"].value = "Value set from Javascript";
</script> 
```

当这段代码运行时，ASP.NET 认为文本框被禁用，因此在回发中丢弃它的值，因此 TextBox1.Text 的值将始终为空。据我所知，这种行为适用于所有表单元素。如果 ASP.NET 认为它们被禁用，并且它们随后被启用并填充到客户端，则该值在回发时将不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T23:43:44.727

是的。听起来您还有其他问题（可能是 OnLoad 处理程序未检查 IsPostback 字段并因此覆盖您更改的值？）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T23:46:08.400

检查服务器端正在初始化的内容，我见过的最常见问题是任何服务器端初始化代码都不会像这样检查 IsPackBack：

```
if (!Page.IsPostBack) {

    // Do Work

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-20T23:54:06.883

要检查的另一件事是您是在进行回发还是回调。如果您正在执行回调，则与回调一起返回的表单字段值是页面首先发送给客户端的值。出于某种原因，ASP.NET AJAX 挑选这些值并在每次回调时发送它们，而不是重新读取表单字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T00:10:13.943

这是因为我已经`enabled="false"`在田野上设置了。我将字段更改为`readonly="true"`，同样的事情发生了。

解决方案是在运行时使用 JS 将字段更改为只读。

# perl - rsh 与 Perl 的 Expect.pm 相比有什么优势？

> ID：770515
> 
> 赞同：2
> 
> 时间：2009-04-20T23:46:25.950
> 
> 标签：perl, unix, expect, remote-administration, rsh

我有一个 Perl [Expect.pm](http://search.cpan.org/dist/Expect)脚本，它可以在多个远程 unix 主机上执行一些中等复杂的工作，例如打包应用程序、部署应用程序、检查日志等。

我的前任曾使用 rsh 编写过类似的脚本。

两者之间有更好的方法吗？还是我应该使用不同的东西？

我猜有人会提出SSH；它基本上是 rsh 的替代品，对吧？不幸的是，但是 SSH 现在不是我的选择。

我应该补充的另一件事是，登录后我需要能够对特定用户进行 SUDO 以在远程主机上执行大部分操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T00:23:52.537

> 我应该补充的另一件事是，登录后我需要能够对特定用户进行 SUDO 以在远程主机上执行大部分操作。

为了解决这一点：使用`rsh`（或`ssh`）您可以指定要在远程会话中成为哪个用户：

```
$ rsh -l username hostname 
```

`sudo`在这种情况下没有必要使用。`ssh`由于安全问题，现在肯定是研究的时候了。语法是相同的，但`ssh`也允许稍微不同（我会说更好）的语法：

```
$ ssh username@hostname 
```

我发现`expect`太挑剔了，但我的经验并不丰富。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T13:10:47.007

我可以看到多种方法：

*   期望通过 telnet、rsh 或 ssh
    *   优点：单一连接，更少的转义问题
    *   缺点：在不断变化的环境中脆弱
*   rsh/ssh 每个命令单独
    *   优点：逃逸问题更少，在不断变化的环境中更可靠
    *   缺点：每个连接都需要时间进行身份验证，对于 ssh，握手加密
*   一次 rsh/ssh 所有命令
    *   优点：单连接（开销更少），比预期更可靠
    *   缺点：维护中的脆弱性，特别是当您在那里获得多个语句时，转义问题更为普遍（在 perl 中转义，以便它仍然被 rsh/ssh 转义，因此它仍然被远程 shell 转义，以便正确处理通过 sudo 的远程外壳？）
*   rsh/ssh 并运行脚本
    *   优点：单连接，更可靠，更易维护
    *   缺点：找到一种方法来获取它（rcp/scp 工作，NFS 工作，你需要确定最适合你的方法）。

考虑到所有因素，这是最次要的骗局，因为您可以简单地做类似的事情

```
 open my $fh, "|ssh user@host 'cat > /tmp/myscript'";
 print $fh $script;
 system qw(ssh user@host), "chmod u+x /tmp/myscript; /tmp/myscript; rm /tmp/myscript"; 
```

当然，您会添加一些错误处理（打开失败、如果 /tmp/myscript 存在怎么办等），但这就是想法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-20T23:50:47.877

他们做不同的事情。Expect 是一种编写手动响应脚本的方法。rsh -- 远程 shell，不受限制的 shell，不幸的名称冲突 -- 允许您在另一个系统上远程运行命令。

也就是说，使用 rsh 执行远程命令、运行 sudo 等的安全漏洞和其他缺点是巨大的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-20T23:59:17.417

如果可以在`rsh`和`telnet`via之间进行选择`expect`，我会选择`rsh`. `Expect`脚本很脆弱。只需有人更改`PS1`远程机器上的值即可。使用`rsh`还可以让您为最终进入 90 年代并开始使用的那一天做好准备`ssh`（因为您几乎可以更改`rcp`to`scp`和`rsh`to`ssh`并且一切仍然有效）。

# language-agnostic - 表示应用程序导航

> ID：770517
> 
> 赞同：0
> 
> 时间：2009-04-20T23:48:10.173
> 
> 标签：language-agnostic, configuration, navigation, computer-science

我有一个包含许多页面的复杂应用程序。

每个页面可以有许多可能的路由到其他页面：'A'可以去'B'或'C'，'B'可以去'A'但不能去'C'。等等

而不是在每个页面中嵌入这个“下一个去哪里”逻辑（可怕！）我当然希望将它封装在一个主要控制点中。“A”不需要知道“B”或“C”。

更好的是，我想将问题简化为配置问题。

这不是特定于语言/框架的问题——它是如何最好（简单、实用）表示和解释工作流逻辑的问题。

**有没有人有将应用程序中点之间的复杂流程表示为可配置设置的经验？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T00:34:00.860

你描述的是一个非常经典的[有限状态机](http://en.wikipedia.org/wiki/Finite_state_machine)。你有状态（页面）、导航（转换），但你也可以有进入/退出动作和转换条件之类的东西。

话虽如此，值得考虑您的导航，您只是想要动态添加到页面的导航选项列表，还是涉及一些额外的智能。考虑一下导航*何时*有效，导航需要*哪些*信息，您可能希望在下一次导航中携带哪些*数据等。*

我之前通过简单地使用 XML 创建了状态图，例如：

```
<states>
  <state name="Open">
    <transition action="Close" state="Closed" />
  </state>
  <state name="Closed">
    <transition action="Open" state="Open" />
    <transition action="Lock" state="Locked" />
  </state>
  <state name="Locked">
    <transition action="Unlock" state="Closed" />
  </state>
</states> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-20T23:51:25.970

您也许可以使用类似 .NET 工作流基础之类的东西来巧妙地表示这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T23:54:29.880

这基本上是一个状态机，其中每个页面代表一个状态，并且转换存储在您的配置中。谷歌，你会得到可能有帮助的样本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T00:36:29.387

几乎每个 Web 应用程序框架都必须解决这个问题。对于 java，看看 Struts2、Spring MVC、Tapestry、Wicket 等，看看各种方法。（XML 自然是在外部配置文件中捕获转换信息的常用方法。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T16:34:35.670

[Press On](http://www.cs.swan.ac.uk/~csharold/presson/Site/press%20on.html)在一定程度上涵盖了这类事情。（在用户界面的设计和实现中使用状态机和状态图的显式表示。）

# javascript - 在 JavaScript 中转义字符串

> ID：770523
> 
> 赞同：70
> 
> 时间：2009-04-20T23:50:45.863
> 
> 标签：javascript, string, escaping, quotes, backslash

`addslashes`JavaScript 是否有一个像 PHP 的（或）函数那样的内置`addcslashes`函数来为字符串中需要转义的字符添加反斜杠？

例如，这个：

> 这是一个带有“单引号”和“双引号”的演示字符串。

...会成为：

> 这是一个带有 \'single-quotes\' 和 \"double-quotes\" 的演示字符串。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2009-04-20T23:53:05.077

[http://locutus.io/php/strings/addslashes/](http://locutus.io/php/strings/addslashes/)

```
function addslashes( str ) {
    return (str + '').replace(/[\\"']/g, '\\$&').replace(/\u0000/g, '\\0');
} 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2014-04-03T12:30:50.753

你也可以试试这个双引号：

```
JSON.stringify(sDemoString).slice(1, -1);
JSON.stringify('my string with "quotes"').slice(1, -1); 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2010-03-31T18:51:03.137

*Paolo Bergantino*提供的函数的一个变体，它直接在 String 上工作：

```
String.prototype.addSlashes = function() 
{ 
   //no need to do (str+'') anymore because 'this' can only be a string
   return this.replace(/[\\"']/g, '\\$&').replace(/\u0000/g, '\\0');
} 
```

通过在您的库中添加上面的代码，您将能够：

```
var test = "hello single ' double \" and slash \\ yippie";
alert(test.addSlashes()); 
```

* * *

**编辑：**

根据评论中的建议，任何担心 JavaScript 库之间冲突的人可以添加以下代码：

```
if(!String.prototype.addSlashes)
{
   String.prototype.addSlashes = function()... 
}
else
   alert("Warning: String.addSlashes has already been declared elsewhere."); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-07T17:39:56.687

使用 encodeURI()

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)

转义字符串中几乎所有有问题的字符，以便在 Web 应用程序中使用正确的 JSON 编码和传输。这不是一个完美的验证解决方案，但它抓住了唾手可得的果实。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-30T13:23:49.300

你也可以使用这个

```
let str = "hello single ' double \" and slash \\ yippie";

let escapeStr = escape(str);
document.write("<b>str : </b>"+str);
document.write("<br/><b>escapeStr : </b>"+escapeStr);
document.write("<br/><b>unEscapeStr : </b> "+unescape(escapeStr));
```

# java - 如何在 Java 源代码中注释掉对特定 API 的调用

> ID：770525
> 
> 赞同：4
> 
> 时间：2009-04-20T23:50:50.183
> 
> 标签：java, parsing

我想在我的代码库中注释掉对 API（在我的例子中是 java.util.Logging）的所有调用。是否有一个好的图书馆可以轻松完成此任务？我尝试了 Eclipse ASTParser，但它与 Eclipse 相关联。我现在正在努力使用 PMD 的解析器。我还没有看过，但是 Jackpot 可以做到这一点吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T00:04:41.883

我知道这不是您要求的，但我只想提请您注意您可以在配置文件中[关闭日志记录这一事实。](http://java.sun.com/j2se/1.5.0/docs/api/java/util/logging/Level.html#OFF)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T08:54:23.543

如果你想注释掉这个：

```
Log.doLog("Here is a" /* With a block comment to make it hard */
    + " multiline log statement"
    ); doSomethingEssential(); 
```

那么你会有一个更棘手的时间，因为你需要在某种程度上解析代码以知道将注释放在哪里。即你希望能够做到这一点：

```
// Log.doLog("Here is a" /* With a block comment to make it hard */
//     + " multiline log statement"
//     ); // Line break inserted here
doSomethingEssential(); 
```

这样做更简单：

```
if (false) Log.doLog("Here is a" /* With a block comment to make it hard */
    + " multiline log statement"
    ); 
```

'if false' 部分最终被编译器优化，并且 Log 语句不会进入最终的 .class 文件。

这样，您所需要的只是构建脚本中的一个搜索/替换步骤，该步骤替换所有出现的

```
"Log.doLog(" 
```

与

```
"if (false) Log.doLog(" or
"if (true) Log.doLog(" 
```

无需对代码进行复杂的解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T23:54:32.267

[赛德](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)？只需用注释行替换即可。您需要考虑匹配正则表达式来捕获多行调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T00:29:48.903

您可以使用 slf4j 的 jul-to-slf4j 模块将所有 java.util.logging 调用重定向到 slf4j，然后您可以选择 slf4j-nop 模块忽略所有日志记录语句。

这会做吗，或者你真的需要摆脱这些源代码行吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T06:24:06.323

使用工具来注释或删除所有日志记录代码可能不是一个好主意。

可能有您没有注意到的副作用代码：

```
while ( x > 5)
{
    // some code here
    Logger.global.finest( "X is now bigger: " + (x++) );
} 
```

这是一个非常明显的例子，但是对于方法调用或记录器调用中的某些东西可能非常微妙。

关闭日志输出或手动完成整个过程可能更安全...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T08:16:12.857

如果您希望避免评估参数，正如您在评论中所说，那么我假设您有如下调用：

```
logger.log("Expensive toString() operation on " + this); 
```

你想禁用哪个？

如果是这种情况，并且它分散在您的代码中，我会使用[AspectJ](http://www.eclipse.org/aspectj/)之类的东西来包围上述所有实例：

```
if (loggingEnabled) {
   ...
} 
```

并将`loggingEnabled`标志设置为假。

# sql - MySQL AVG() 值不会在每一行上重置

> ID：770527
> 
> 赞同：0
> 
> 时间：2009-04-20T23:52:06.623
> 
> 标签：sql, mysql

尝试从我的“响应”字段中获取 AVG() 字段时，我得到了这个非常奇怪的结果。

询问 ：

```
 SELECT AVG(Reponse.note) as noteMoyenne, Categorie.titre,
      Autorisation.typeEvaluateur, COUNT(DISTINCT Autorisation.id) as nbEvaluateur
 FROM reponses as Reponse, categories as Categorie, questions as Question,
      autorisations as Autorisation
 WHERE Reponse.question_id = Question.id AND 
        Question.categorie_id = Categorie.id AND 
        Reponse.note != 0 AND
        Reponse.evaluation_id = $id AND
        Autorisation.evaluation_id = $id AND
        Autorisation.complete = 1
 GROUP BY Categorie.titre, Autorisation.typeEvaluateur
 ORDER BY Categorie.id; 
```

我希望结果类似于：

```
 noteMoyenne      Cat   typeEvaluateur  nbEvaluateur
    4.0225          Cat1    TypeA               3
    **1.6425        Cat1    TypeB               1
    3.4123          Cat2     TypeA               5
    .... 
```

但似乎每个类别都保留了平均值，然后在有新类别时重置。返回的实际数据：

```
 noteMoyenne    Cat     typeEvaluateur  nbEvaluateur
   4.0225       Cat1    TypeA               3
   **4.0225     Cat1    TypeB               1
   3.4123       Cat2     TypeA               5
   .... 
```

任何帮助将不胜感激，我对此有点迷茫。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T23:55:07.287

由于 GROUP BY 子句中有两个字段，它会计算每个不同 GROUP BY 对的 AVG。您可能需要另一个查询（或子查询）来获取您要查找的内容。

# xaml - 有什么好的Expression Blend教程吗？

> ID：770529
> 
> 赞同：2
> 
> 时间：2009-04-20T23:52:39.320
> 
> 标签：xaml, expression-blend

我想学习Expression blend..我一直在阅读一些博客..关于它..但是应用程序有些难以理解，因为我没有关于Blend的速成课程..有什么好的教程来学习基础知识吗？我想我需要先学习 XAML ..你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-12-14T17:21:13.630

我还提供了一系列[书面 Blend 教程](http://visitmix.com/labs/rosetta/eyesofblend/)，我愿意谦虚地提供。它们是作为通过 Blend 介绍 Silverlight 编写的，展示了 Blend 比 Visual Studio 更有用的领域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T08:45:43.813

看看 Jesse Liberty 的[Silverlight 视频教程系列](http://silverlight.net/learn/tutorials.aspx)，其中包括几个关于 Expression Blend 的视频。学习 XAML 对您非常有益，尽管不是绝对需要使用 Expression Blend。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-23T15:47:39.783

在这里查看我的初学者按钮教程。

[http://www.codeproject.com/KB/expression/ExpressionBlendButtons.aspx](http://www.codeproject.com/KB/expression/ExpressionBlendButtons.aspx)

更多关注...

希望这可以帮助，

艾伦

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-13T00:26:46.393

微软的 Expression 网站上也有一些视频。看起来相当全面：

[链接](http://expression.microsoft.com/en-us/cc197141.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T04:52:24.953

kirupa 为初学者提供了不错的课程。它为初学者提供了总体思路。

[http://www.kirupa.com/net/getting_started_blend.htm](http://www.kirupa.com/net/getting_started_blend.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-04-12T14:27:58.137

微软还有一个非常好的课程：http: [//www.microsoft.com/design/toolbox/school/](http://www.microsoft.com/design/toolbox/school/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-07-31T11:57:51.540

Total Training 拥有一系列精彩的表达课程，涵盖大多数产品和版本

# java - 在 Eclipse 中更改 System.in 以从文件中读取

> ID：770542
> 
> 赞同：1
> 
> 时间：2009-04-20T23:55:36.180
> 
> 标签：java, eclipse, input

这似乎是一个愚蠢的问题，但有没有办法改变日食中的标准。如果我从 Windows 控制台执行此操作，它看起来像“java myprogram < stdin.txt”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T05:53:22.183

我正在使用 Eclipse 3.4，我在 Java 应用程序运行配置的 Common 选项卡上看到了一个输入 stdin/stdout 文件的位置。我不确定它是否适用于标准输入，但值得一试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-21T05:24:41.567

[正如此评论](https://stackoverflow.com/questions/188547/eclipse-reading-stdin-system-in-from-a-file/188654#188654)中所指出的，有一个（相当丑陋的）解决方案

由于我最初[链接](http://dev.eclipse.org/newslists/news.eclipse.platform/msg53079.html)的邮件列表存档似乎已经消失，这里是那里的副本（反过来从[这里](http://lists.ccs.neu.edu/pipermail/csu670/2007q3/001227.html)复制）：

> 将标准输入重定向到来自文件的能力取决于操作系统（实际上它是操作系统外壳的功能，在这种情况下是您的 DOS 窗口）。Eclipse 不直接支持做你想做的事，但实现这一点相对简单。
> 
> 在您的项目中，右键单击并选择 New->File 并将其命名为 streamit.bat。选择新文件，右键单击并打开方式->文本编辑器。输入以下行并保存文件：java %1 < %2
> 
> 现在创建一个外部工具启动配置 - 从运行菜单转到运行->外部工具->外部工具...选择程序并点击新建，然后在位置字段中，点击浏览工作区并从您的项目中选择 streamit.bat。在工作目录字段中，点击浏览工作区并选择您的项目。在参数字段中输入：StreamClass input.txt
> 
> （假设 input.txt 位于您的项目中）现在点击运行。它将启动 streamit.bat，将 %1 和 %2 替换为指定的参数，结果将显示在控制台视图中。您可以通过单击工具栏上带有红色工具箱的运行按钮来重复此运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-21T00:01:06.027

在 VS 中执行此操作的方式是在调试时将命令行参数设置为“<stdin.txt”。也许同样适用于 Eclipse？我会检查，但我没有在这台机器上。

# c - 用于磁盘层次结构的 C API 设计 - 最佳实践

> ID：770543
> 
> 赞同：2
> 
> 时间：2009-04-20T23:56:03.993
> 
> 标签：c, api

我正在编写我的第一个主要的 C API，我想把事情做好。该库为内部结构分配和释放内存 - 使用 typedef 对客户端隐藏。我提供访问的数据的粗略结构是这样的：

光盘->节目->曲目

与光盘相关的是要读取的文件描述符、文件大小、程序数量和一些光盘范围的属性。

与程序相关的是诸如（程序）到磁盘中的索引、文件中的物理偏移量、轨道数和名称。

与轨道相关的是程序中的（轨道）索引、名称和文件中的一堆偏移量。

每个结构都有一个指向父结构的指针。

我有几个问题，但我会尽量保持简短：

*   轨道/程序是否应该知道它在父结构中的哪个索引？
*   这种结构层次结构似乎相当复杂，但替代方法是将程序和/或轨道索引传递给各种函数。哪个更可取？
*   还有更一般的评论吗？

这是一个类似文件系统的结构（但它是只读的），我希望它将来与多线程兼容，并且它需要是可移植的。我在这里专门谈论 C - 没有 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T00:11:23.397

***大量编辑介绍***我最初批评问题描述令人困惑。我的问题源于问题中使用“文件”概念的方式。这个问题意味着光盘、程序和曲目都存储在一个“文件”中。我认为提问者正在构建他自己的文件系统，这会使这种“一个文件中的所有内容”结构变得奇怪，但我现在决定他可能没有这样做，在这种情况下它就不那么奇怪了。因此，我将继续提供一个真正的答案，基于他使用现有（可能是标准）文件系统的假设，并且他的整个数据结构存储在该文件系统中的一个文件中。如果我假设错了，毫无疑问我会得到纠正。

我将首先针对这种情况提供一条一般性建议；首先从 API 用户的角度来看事情。然后设计您的 API，以便他编写的代码可以轻松流动，而无需处理您领域中正确的细节。

处理 API 设计的一种方法是先编写一些用户代码并定义 API，以便该代码易于编写。作为奖励，在您实际实现 API 之后，您将获得一些测试代码来试用它。

继续提供更具体的建议；

这是系统中三种数据类型的目录。如果您愿意，我们可以将它们视为抽象数据类型或“对象”，并定义一个 typdef'ed 结构（例如，DISC、PROGRAM、TRACK）来表示每一个。

```
disc = a collection of programs stored in a file
+-----------+
|file       |
+-----------+
|program    |
+-----------+
|program    |
+-----------+
|...        |
+-----------+
|program    |
+-----------+

program = a collection of tracks
+-----------+
|ptr->disc  |
+-----------+
|name       |
+-----------+
|file offset|
+-----------+
|track      |
+-----------+
|track      |
+-----------+
|...        |
+-----------+
|track      |
+-----------+

track = a collection of audio samples
+------------------+
|ptr->program      |
+------------------+
|name              |
+------------------+
|file offset+length|
+------------------+
|file offset+length|
+------------------+
|...               |
+------------------+
|file offset+length|
+------------------+ 
```

我建议您*不要*让您的用户从结构中挑选数据。您不能真正隐藏 C 中结构的内部结构（无需通过强制转换等跳过箍），但您可以提供一系列函数，让您的用户在不访问抽象类型的内容的情况下做他们需要做的事情他们自己。例如，我们的函数族可能看起来像这样；

```
// DISC functions
DISC      *dopen(  const char *disc_name );
void       dstats( int *ptr_nbr_programs, FILE **ptr_file );
void       dclose( DISC *disc );

// PROGRAM functions
PROGRAM   *popen_name( DISC *disc, const char *program_name );
PROGRAM   *popen_idx ( DISC *disc, int program_idx );
void       pstats( int *ptr_nbr_tracks );
void       pclose( PROGRAM *program );

// TRACK functions
TRACK     *topen_name( PROGRAM *program, const char *track_name );
TRACK     *topen_idx ( PROGRAM *program, int track_idx );
int        tread( unsigned char *buf, int nbytes_to_read );
void       tseek( unsigned long offset );
void       tclose( TRACK *track ); 
```

这一切都应该是合理的自我解释 - 它以现有的标准 C FILE 范例为模型。

首先，您的用户使用dopen() 获得一个指向DISC 的ptr。假设这可行（如果不可行，它将返回 NULL），他可以使用 dstats() 获取任何全局 DISC 信息。更重要的是，他可以使用 popen() 系列函数之一获得 DISC 中 PROGAM 的指针。

使用指向 PROGRAM 的 ptr，他可以进一步深入研究并使用 topen() 系列函数之一获得单个 TRACK。

非常重要的一点是，您不要让用户自己遍历音频片段以从 TRACK 中获取数据。用户提供一个缓冲区来读取样本，并根据需要遍历片段以填充该缓冲区。提供 tseek() 函数是为了让他随机访问。

我还没有试图弄清楚每个参数的细节以及如何处理错误等，我只是提出一个需要改进的概念。

请注意，始终使用“三明治”范式。介绍性的“打开”和结束的“关闭”将每种类型的操作夹在中间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T00:53:20.470

> *   轨道/程序是否应该知道它在父结构中的哪个索引？

我不认为有任何理由反对这一点。没有例子很难说...

> *   这种结构层次结构似乎相当复杂，但替代方法是将程序和/或轨道索引传递给各种函数。哪个更可取？

你能举出每个例子吗？即使是几个函数声明也可能有助于清除它。

> *   还有更一般的评论吗？

如果真的是只读结构，以后就不用太在意多线程了。

# c# - 如何确定文件夹是否嵌套在 SharePoint 列表中

> ID：770546
> 
> 赞同：2
> 
> 时间：2009-04-20T23:59:37.400
> 
> 标签：c#, sharepoint

使用以下代码：

```
using (SPSite site = new SPSite("http://localhost/"))
{
    using (SPWeb web = site.OpenWeb())
    {
        foreach (SPList list in web.Lists)
        {
            if (list.OnQuickLaunch)
            {
                Console.WriteLine(list.Title);

                foreach (SPListItem item in list.Folders)
                {
                    Console.WriteLine("- " + item.Title);
                }
            }
        }
    }
} 
```

和输出：

```
... various lists ...
Shared Documents
- Minutes
- Second Level 
```

我将所有文件夹作为平面列表返回 - 没有真正表明嵌套可能会发生，因为一个文件夹被创建为另一个文件夹的子文件夹。使用 Visual Studio 进行探索，我可以看到一些有趣的属性，这些属性可能会给我一些线索（例如 item.Url 和计数 / 字符或 item.Folder.ParentFolder 与某些东西进行比较？），但必须有一个更简单的方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T05:07:32.747

您可以从任何列表的根文件夹（即list.RootFolder）遍历文件夹层次结构。有了根 SPFolder 对象，您可以使用每个 SPFolder 对象上的 SubFolders 属性开始递归遍历层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T01:09:15.020

您可能想查看以下问题以获取答案。虽然这不是同一个问题，但根本问题是相似的。

[我应该创建自己的对象模型](https://stackoverflow.com/questions/720388/should-i-create-my-own-object-model-to-handle-the-complex-the-sharepoint-objects/722558#722558)。

# c# - 编译器如何优化密封类实现的虚方法

> ID：770547
> 
> 赞同：1
> 
> 时间：2009-04-20T23:59:57.650
> 
> 标签：c#, virtual, abstract, sealed, optimization

我想知道如何优化以下代码。特别是关于虚拟和直接呼叫。我已经评论了我认为一切都是如何优化的，但这些只是猜测。

```
public abstract class Super
{
    public abstract void Foo();

    public void FooUser()
    {
        Foo();
    }
}

public class Child1 : Super
{
    public override void Foo()
    {
        //doSomething
    }
}

public class SealedChild : Super
{
    public override void Foo()
    {
        //doSomething
    }
}

class Program
{
    void main()
    {
        Child1 child1 = new Child1();
        child1.Foo(); //Virtual call?
        child1.FooUser(); //Direct call and then a virtual call. 

        SealedChild sealedChild = new SealedChild();
        sealedChild.Foo(); //Direct call?
        sealedChild.FooUser(); 
        /* Two options: either a direct call & then a virtual call
         * Or: direct call with a parameter that has a function pointer to Foo, and then a direct call to foo.
         */

        Super super = child1;
        super.Foo(); //Virtual call.
        super.FooUser(); //Virtual call then direct call.
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-21T00:58:04.670

如果您在密封类上有一个虚拟方法，并且对象引用的类型是密封类，则可以避免虚拟调用。举个例子。没有实际理由需要虚拟调用 GetName，因为我们知道 Parent 没有子类，因此没有进一步的虚拟调度。

```
sealed class Parent : Child  {
  public override string GetName() { return "foo"; }
}

public void Test() {
  var p = new Parent();
  var name = p.GetName();
} 
```

编译器可以选择注意到这一点并输出调用 IL 指令而不是 callvirt。但是，C# 和 VB.Net 编译器都选择不执行此优化。两者都会发出 callvirt。

JIT 也可以自由地进行这样的优化。它也选择不这样做。

*   [http://blogs.microsoft.co.il/blogs/sasha/archive/2007/02/27/JIT-Optimizations_2C00_-Inlining_2C00_-and-Interface-Method-Dispatching-_2800_Part-1-of-N_2900_.aspx](http://blogs.microsoft.co.il/blogs/sasha/archive/2007/02/27/JIT-Optimizations_2C00_-Inlining_2C00_-and-Interface-Method-Dispatching-_2800_Part-1-of-N_2900_.aspx)

然而，这并不意味着你不应该密封你的课程。类应该是密封的，除非你真的打算让某人继承它们。否则，您将面临无法准确计算成本的情况。

此外，没有什么能阻止编译器和 JIT 在以后实现它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T00:13:14.593

编译器根本不做任何类型的优化。它总是生成一个 IL 'callvirt' 指令（调用虚拟）。理论上，运行时可以删除调用的虚拟部分，但我看到并尝试过的每个基准测试都表明情况并非如此。考虑到即使是完全静态的 C++ 编译器也无法在微不足道的情况下做到这一点，JIT 似乎不太可能实现这一目标。即使他们能够让它发挥作用，他们也可以将时间花在大量更常见的性能缺陷上。

哦，[Eric Gunnerson 的这篇博](http://blogs.msdn.com/ericgu/archive/2008/07/02/why-does-c-always-use-callvirt.aspx)文解释了为什么 C# 总是生成 callvirt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T00:16:22.197

如果它是密封的（也许是编辑它？），编译器或 JIT*可以*在已知对象是 SealedChild 时发出非虚拟调用，从而保存间接。Java 会这样做，C# 似乎不会这样做；我不知道 JIT 是做什么的。

# ruby - 追踪 Ruby 脚本中的内存泄漏

> ID：770555
> 
> 赞同：4
> 
> 时间：2009-04-21T00:06:10.240
> 
> 标签：ruby, memory, memory-leaks

我创建了一个名为[babylon](http://github.com/julien51/babylon/tree/master)的 Ruby XMPP 框架。然后我用它创建了一些应用程序，尽管它们运行得非常顺利，但似乎它们正在一点一点地吃掉我的计算机内存。

我怀疑有泄漏，所以首先，我在代码中的某个位置添加了这个：

```
puts `ps -o rss= -p #{Process.pid}`.to_i 
```

正如所怀疑的那样，输出不断增加......缓慢但肯定。

我试图用 Dike 寻找漏洞，就像[这里解释](http://jan.flempo.com/2008/01/04/memory-leaks-in-ruby-18/)的那样。

不幸的是，Dike 无法检测到任何泄漏。即使它运行了很长时间，它仍然返回相同的对象。

那么，我如何确定我的框架正在泄漏，而不仅仅是占用一些 RAM 直到某个最大值然后开始释放它？

然后，我如何才能真正跟踪泄漏并修复它们？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T16:13:32.757

我听说过关于[Ruby 内存跟踪 API](http://softwareverify.com/ruby/customBuild/memtrack/index.html)的好消息，但它不是免费的。

还有一篇有用的博客文章[使用 valgrind](http://www.idle-hacking.com/2008/05/ruby-extension-memory-leak-tracking/)查找 ruby​​ 内存泄漏。

Ruby on Rails 还有其他解决方案，但您似乎根本没有使用 Rails。

# android - 在 Mac OS X 10.5.6 上运行 Android 1.5 模拟器时出现总线错误

> ID：770558
> 
> 赞同：1
> 
> 时间：2009-04-21T00:08:24.103
> 
> 标签：android, macos, terminal

我已经删除了所有添加的输入管理器，但它仍在发生。这是崩溃报告。有任何想法吗？

```
Process:         emulator [460]
Path:            /usr/local/dev/android/android-sdk-mac_x86-1.5_pre/tools/emulator
Identifier:      emulator
Version:         ??? (???)
Code Type:       X86 (Native)
Parent Process:  bash [275]

Date/Time:       2009-04-20 20:03:44.786 -0400
OS Version:      Mac OS X 10.5.6 (9G55)
Report Version:  6

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000000000010
Crashed Thread:  0

Thread 0 Crashed:
0   emulator                        0x000667a1 sock_address_init_resolve + 87 (sockets.c:631)

Thread 0 crashed with X86 Thread State (32-bit):
  eax: 0x00000008  ebx: 0xbfffcb98  ecx: 0x00000000  edx: 0x00000000
  edi: 0xbfffcb5c  esi: 0x00000000  ebp: 0x0085fa90  esp: 0xbfffcb20
   ss: 0x0000001f  efl: 0x00010202  eip: 0x000667a1   cs: 0x00000017
   ds: 0x0000001f   es: 0x0000001f   fs: 0x00000000   gs: 0x00000037
  cr2: 0x00000010

Binary Images:
    0x1000 -   0x19a46b +emulator ??? (???) /usr/local/dev/android/android-sdk-mac_x86-1.5_pre/tools/emulator
0x8fe00000 - 0x8fe2db43  dyld 97.1 (???) <100d362e03410f181a34e04e94189ae5> /usr/lib/dyld
0x90003000 - 0x90003ffd  com.apple.vecLib 3.4.2 (vecLib 3.4.2) /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
0x900a4000 - 0x904b4fef  libBLAS.dylib ??? (???) /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
0x904b5000 - 0x904ddff7  com.apple.shortcut 1 (1.0) <057783867138902b52bc0941fedb74d1> /System/Library/PrivateFrameworks/Shortcut.framework/Versions/A/Shortcut
0x904de000 - 0x9052fff7  com.apple.HIServices 1.7.0 (???) <01b690d1f376e400ac873105533e39eb> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
0x90530000 - 0x9080aff3  com.apple.CoreServices.CarbonCore 786.11 (786.11) <f06fe5d92d56ac5aa52d1ba182745924> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
0x9080b000 - 0x90820ffb  com.apple.ImageCapture 5.0.1 (5.0.1) /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
0x9085b000 - 0x90871fff  com.apple.DictionaryServices 1.0.0 (1.0.0) <ad0aa0252e3323d182e17f50defe56fc> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
0x90872000 - 0x908effef  libvMisc.dylib ??? (???) /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
0x908f0000 - 0x908f6fff  com.apple.print.framework.Print 218.0.2 (220.1) <8bf7ef71216376d12fcd5ec17e43742c> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
0x908f7000 - 0x908f8ffc  libffi.dylib ??? (???) <a3b573eb950ca583290f7b2b4c486d09> /usr/lib/libffi.dylib
0x908f9000 - 0x90984fff  com.apple.framework.IOKit 1.5.1 (???) <f9f5f0d070e197a832d86751e1d44545> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x91210000 - 0x912d7ff2  com.apple.vImage 3.0 (3.0) /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
0x9155c000 - 0x91589feb  libvDSP.dylib ??? (???) <b232c018ddd040ec4e2c2af632dd497f> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
0x91597000 - 0x9161eff7  libsqlite3.0.dylib ??? (???) <6978bbcca4277d6ae9f042beff643f7d> /usr/lib/libsqlite3.0.dylib
0x9161f000 - 0x916bcfe4  com.apple.CFNetwork 422.15.2 (422.15.2) <80851410a5592b7c3b149b2ff849bcc1> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
0x916bd000 - 0x916c4ff7  libCGATS.A.dylib ??? (???) <386dce4b28448fb86e33e06ac466f4d8> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGATS.A.dylib
0x916c6000 - 0x91720ff7  com.apple.CoreText 2.0.4 (???) <f9a90116ae34a2b0d84e87734766fb3a> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
0x91721000 - 0x91725fff  libmathCommon.A.dylib ??? (???) /usr/lib/system/libmathCommon.A.dylib
0x91726000 - 0x91741ffb  libPng.dylib ??? (???) <4780e979d35aa5ec2cea22678836cea5> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
0x917fa000 - 0x91805fe7  libCSync.A.dylib ??? (???) <e6aceed359bd228f42bc1246af5919c9> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
0x9184b000 - 0x918d5fe3  com.apple.DesktopServices 1.4.7 (1.4.7) <d16642ba22c32f67be793ebfbe67ca3a> /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
0x918d6000 - 0x91969fff  com.apple.ink.framework 101.3 (86) <bf3fa8927b4b8baae92381a976fd2079> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
0x9197a000 - 0x9197affd  com.apple.Accelerate.vecLib 3.4.2 (vecLib 3.4.2) /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
0x9197b000 - 0x91a5cff7  libxml2.2.dylib ??? (???) <306036e0070330e35045650e6d9f0d05> /usr/lib/libxml2.2.dylib
0x91a5d000 - 0x91a9efe7  libRIP.A.dylib ??? (???) <5d0b5af7992e14de017f9a9c7cb05960> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
0x91ada000 - 0x91e98fea  libLAPACK.dylib ??? (???) /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
0x91e99000 - 0x91fdfff7  com.apple.ImageIO.framework 2.0.4 (2.0.4) <6a6623d3d1a7292b5c3763dcd108b55f> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
0x920b5000 - 0x92134ff5  com.apple.SearchKit 1.2.1 (1.2.1) <3140a605db2abf56b237fa156a08b28b> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
0x92135000 - 0x92135fff  com.apple.Carbon 136 (136) <9961570a497d79f13b8ea159826af42d> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x9213b000 - 0x92184fef  com.apple.Metadata 10.5.2 (398.25) <e0572f20350523116f23000676122a8d> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
0x92185000 - 0x921e1ff7  com.apple.htmlrendering 68 (1.1.3) <fe87a9dede38db00e6c8949942c6bd4f> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HTMLRendering.framework/Versions/A/HTMLRendering
0x921e2000 - 0x921e4fff  com.apple.securityhi 3.0 (30817) <dbe328cd62d603a952a4226342711e8b> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
0x9220d000 - 0x92532fe2  com.apple.QuickTime 7.6.0 (1290) <bc0920abbbaad03f5513ac7ffbd30633> /System/Library/Frameworks/QuickTime.framework/Versions/A/QuickTime
0x9266c000 - 0x92676feb  com.apple.audio.SoundManager 3.9.2 (3.9.2) <0f2ba6e891d3761212cf5a5e6134d683> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CarbonSound.framework/Versions/A/CarbonSound
0x92677000 - 0x92677ff8  com.apple.ApplicationServices 34 (34) <8f910fa65f01d401ad8d04cc933cf887> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
0x92678000 - 0x92b49f3e  libGLProgrammability.dylib ??? (???) <5d283543ac844e7c6fa3440ac56cd265> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
0x92b87000 - 0x92be4ffb  libstdc++.6.dylib ??? (???) <04b812dcec670daa8b7d2852ab14be60> /usr/lib/libstdc++.6.dylib
0x92d47000 - 0x92d5fff7  com.apple.CoreVideo 1.6.0 (20.0) <c0d869876af51283a160cd2224a23abf> /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
0x92d61000 - 0x92ec8ff3  libSystem.B.dylib ??? (???) <d68880dfb1f8becdbdac6928db1510fb> /usr/lib/libSystem.B.dylib
0x92ec9000 - 0x92f08fef  libTIFF.dylib ??? (???) <3589442575ac77746ae99ecf724f5f87> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
0x92f09000 - 0x92f15ff9  com.apple.helpdata 1.0.1 (14.2) /System/Library/PrivateFrameworks/HelpData.framework/Versions/A/HelpData
0x92f16000 - 0x935b6fff  com.apple.CoreGraphics 1.407.2 (???) <3a91d1037afde01d1d8acdf9cd1caa14> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
0x935b7000 - 0x936efff7  libicucore.A.dylib ??? (???) <18098dcf431603fe47ee027a60006c85> /usr/lib/libicucore.A.dylib
0x93829000 - 0x93858fe3  com.apple.AE 402.3 (402.3) <4cb9ef65cf116d6dd424f0ce98c2d015> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
0x93859000 - 0x93871fff  com.apple.openscripting 1.2.8 (???) <572c7452d7e740e8948a5ad07a99602b> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
0x93872000 - 0x938cbff7  libGLU.dylib ??? (???) /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
0x938cc000 - 0x938d0fff  libGIF.dylib ??? (???) <572a32e46e33be1ec041c5ef5b0341ae> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
0x938d1000 - 0x938effff  libresolv.9.dylib ??? (???) <a8018c42930596593ddf27f7c20fe7af> /usr/lib/libresolv.9.dylib
0x93908000 - 0x93ca5fef  com.apple.QuartzCore 1.5.7 (1.5.7) <2fed2dd7565c84a0f0c608d41d4d172c> /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
0x93cd0000 - 0x93cd9fff  com.apple.speech.recognition.framework 3.7.24 (3.7.24) <d3180f9edbd9a5e6f283d6156aa3c602> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
0x93dde000 - 0x93deeffc  com.apple.LangAnalysis 1.6.4 (1.6.4) <8b7831b5f74a950a56cf2d22a2d436f6> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
0x93e01000 - 0x93e01ffc  com.apple.audio.units.AudioUnit 1.5 (1.5) /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
0x93fa9000 - 0x94050feb  com.apple.QD 3.11.54 (???) <b743398c24c38e581a86e91744a2ba6e> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
0x9405d000 - 0x94064fe9  libgcc_s.1.dylib ??? (???) <a9ab135a5f81f6e345527df87f51bfc9> /usr/lib/libgcc_s.1.dylib
0x94065000 - 0x94089fff  libxslt.1.dylib ??? (???) <0a9778d6368ae668826f446878deb99b> /usr/lib/libxslt.1.dylib
0x9408a000 - 0x94107feb  com.apple.audio.CoreAudio 3.1.1 (3.1.1) <f35477a5e23db0fa43233c37da01ae1c> /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
0x94158000 - 0x94158ffa  com.apple.CoreServices 32 (32) <2fcc8f3bd5bbfc000b476cad8e6a3dd2> /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
0x9418c000 - 0x94198ffe  libGL.dylib ??? (???) /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
0x95175000 - 0x951affe7  com.apple.coreui 1.2 (62) /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
0x951b0000 - 0x951bdfe7  com.apple.opengl 1.5.9 (1.5.9) <7e5048a2677b41098c84045305f42f7f> /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
0x955e2000 - 0x9560afff  libcups.2.dylib ??? (???) <16bec7c6a004f744804e2281a1b1c094> /usr/lib/libcups.2.dylib
0x9560b000 - 0x9560dff5  libRadiance.dylib ??? (???) <8a844202fcd65662bb9ab25f08c45a62> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
0x95856000 - 0x95866fff  com.apple.speech.synthesis.framework 3.7.1 (3.7.1) <06d8fc0307314f8ffc16f206ad3dbf44> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x95867000 - 0x9586afff  com.apple.help 1.1 (36) <b507b08e484cb89033e9cf23062d77de> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
0x9586b000 - 0x9586bff8  com.apple.Cocoa 6.5 (???) <e064f94d969ce25cb7de3cfb980c3249> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
0x9586c000 - 0x9586cffb  com.apple.installserver.framework 1.0 (8) /System/Library/PrivateFrameworks/InstallServer.framework/Versions/A/InstallServer
0x9587d000 - 0x95af8fe7  com.apple.Foundation 6.5.7 (677.22) <8fe77b5d15ecdae1240b4cb604fc6d0b> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
0x95b73000 - 0x96371fef  com.apple.AppKit 6.5.6 (949.43) <a3a300499bbe4f1dfebf71d752d01916> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
0x96372000 - 0x96405ff3  com.apple.ApplicationServices.ATS 3.4 (???) <8c51de0ec3deaef416578cd59df38754> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
0x96406000 - 0x96425ffa  libJPEG.dylib ??? (???) <e7eb56555109e23144924cd64aa8daec> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
0x96426000 - 0x96468fef  com.apple.NavigationServices 3.5.2 (163) <91844980804067b07a0b6124310d3f31> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/NavigationServices.framework/Versions/A/NavigationServices
0x96469000 - 0x9654eff3  com.apple.CoreData 100.1 (186) <8e28162ef2288692615b52acc01f8b54> /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
0x965a1000 - 0x965a1ffd  com.apple.Accelerate 1.4.2 (Accelerate 1.4.2) /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
0x965a2000 - 0x965a9ffe  libbsm.dylib ??? (???) <d25c63378a5029648ffd4b4669be31bf> /usr/lib/libbsm.dylib
0x965aa000 - 0x96675fff  com.apple.ColorSync 4.5.1 (4.5.1) /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
0x9667c000 - 0x9672cfff  edu.mit.Kerberos 6.0.12 (6.0.12) <685cc018c133668d0d3ac6a1cb63cff9> /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
0x96733000 - 0x96771ff7  libGLImage.dylib ??? (???) <1123b8a48bcbe9cc7aa8dd8e1a214a66> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
0x96772000 - 0x967feff7  com.apple.LaunchServices 290.3 (290.3) <6f9629f4ed1ba3bb313548e6838b2888> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
0x96809000 - 0x96840fff  com.apple.SystemConfiguration 1.9.2 (1.9.2) <8b26ebf26a009a098484f1ed01ec499c> /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
0x96841000 - 0x96b49fff  com.apple.HIToolbox 1.5.4 (???) <3747086ba21ee419708a5cab946c8ba6> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
0x96b7d000 - 0x96d4bff3  com.apple.security 5.0.4 (34102) <55dda7486df4e8e1d61505be16f83a1c> /System/Library/Frameworks/Security.framework/Versions/A/Security
0x96d60000 - 0x96e40fff  libobjc.A.dylib ??? (???) <7b92613fdf804fd9a0a3733a0674c30b> /usr/lib/libobjc.A.dylib
0x96e41000 - 0x96f93ff3  com.apple.audio.toolbox.AudioToolbox 1.5.2 (1.5.2) /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
0x96f94000 - 0x97046ffb  libcrypto.0.9.7.dylib ??? (???) <69bc2457aa23f12fa7d052601d48fa29> /usr/lib/libcrypto.0.9.7.dylib
0x97047000 - 0x97101fe3  com.apple.CoreServices.OSServices 226.5 (226.5) <2a135d4fb16f4954290f7b72b4111aa3> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
0x97142000 - 0x9716dfe7  libauto.dylib ??? (???) <42d8422dc23a18071869fdf7b5d8fab5> /usr/lib/libauto.dylib
0x972ee000 - 0x972f6fff  com.apple.DiskArbitration 2.2.1 (2.2.1) <75b0c8d8940a8a27816961dddcac8e0f> /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
0x97389000 - 0x97397ffd  libz.1.dylib ??? (???) <5ddd8539ae2ebfd8e7cc1c57525385c7> /usr/lib/libz.1.dylib
0x97398000 - 0x974cbfff  com.apple.CoreFoundation 6.5.5 (476.17) <4a70c8dbb582118e31412c53dc1f407f> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
0x974cc000 - 0x974d1fff  com.apple.CommonPanels 1.2.4 (85) <ea0665f57cd267609466ed8b2b20e893> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
0x97502000 - 0x9757cff8  com.apple.print.framework.PrintCore 5.5.3 (245.3) <222dade7b33b99708b8c09d1303f93fc> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0xfffe8000 - 0xfffebfff  libobjc.A.dylib ??? (???) /usr/lib/libobjc.A.dylib
0xffff0000 - 0xffff1780  libSystem.B.dylib ??? (???) /usr/lib/libSystem.B.dylib 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2009-05-04T19:08:34.193

此处的解决方案：[http ://groups.google.com/group/android-developers/browse_thread/thread/586ce0e87d13b702/e568e441fea3843b](http://groups.google.com/group/android-developers/browse_thread/thread/586ce0e87d13b702/e568e441fea3843b)

# subsonic - 亚音速深度加载：是否支持？

> ID：770570
> 
> 赞同：0
> 
> 时间：2009-04-21T00:11:47.327
> 
> 标签：subsonic, deepload

很可能我只是在这个领域缺少正确的白话，但我正在寻找 SubSonic 中的特定功能。在 NetTiers 中，它被称为“DeepLo​​ad”。深度负载运行到数据库并在一次数据库调用中获取许多对象（即获取此 OrderDetail 及其所有 LineItems）。

同样，一旦构建了潜在的密集对象图或由数据存储填充的相关项目，我想运行到数据存储。

**我如何在 SubSonic 中执行此操作，在 SubSonic 中它叫什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T02:21:13.037

您可以在 SubSonic 3.0（尚未发布，但几乎在那里......）中使用 IQueryable 和延迟加载来执行此操作：

```
var db=new NorthwindDB();
var order=db.Orders.Where(x=>.xID==20).SingleOrDefault();
Assert.Equal(3,order.OrderDetails.Count()); 
```

如果您不在 3 上（需要 .net 3.5），您可以使用 Paul 提到的 Active 记录来执行此操作 - 但它会拨打两个电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T02:09:22.020

没有预加载，ActiveRecord 中的 DeepSave 只调用 Save。这是 Northwind Order 类外键方法的示例。

```
[Test]
public void SelectOrderDetails()
{
    Order order = new Order(10250);
    OrderDetailCollection details = order.OrderDetails();
    Assert.IsTrue(details.Count == 3);
} 
```

# algorithm - 你能帮我弄清楚这个算法吗？

> ID：770571
> 
> 赞同：2
> 
> 时间：2009-04-21T00:12:02.613
> 
> 标签：algorithm, list

我正在做家庭作业，作为“提示”，我们被告知要找到以下算法，然后将其证明为必要的答案。

令 L(1), L(2), .., L(k) 是 n 个元素的排序列表。给出一个支持 O(log n + t) Locate 操作的 O(kn logk) 空间算法，它返回 t 个项目的位置。

理想情况下，我将能够使用该算法让我对实现更好的解决方案（这是作业想要的）有所了解，但是这种效率较低的算法应该会激发我的灵感，但我无法弄清楚。有什么想法或知道这个算法是什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T00:18:31.520

你用谷歌搜索过 O(kn logk) 吗？这似乎是一个非常独特的大 O 签名。

这是我的第一个结果： **MergeSort** --> [k-way 合并中合并和项目数之间的关系是什么](https://stackoverflow.com/questions/658502/what-is-the-relation-between-merges-and-number-of-items-in-a-in-k-way-merge/659214#659214)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T00:34:23.463

我似乎找不到一个给 O(log n + t) 时间的人，但我有一个想法可能会或可能不会有帮助......

O(kn log k) 是将每个可能的项目映射到包含它的列表的编号的表的大小。但是，使用它来查找要查看的列表仍然会导致 t 个元素的 at*O(log n)-lookup 时间，所以这并不是真正需要的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T00:23:50.947

可能不是排序功能，因为您已经有 2 个排序列表。对我来说听起来也像二分搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T00:44:51.350

我认为它要求你首先找到一个低效的算法，然后用它来制作一个高效的算法。这听起来像是对列表的线性搜索，每个列表都有一个二进制搜索来查看它们。它将需要 O(2t) 空间，因为您需要复制 t 个项目的“坐标”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T16:37:33.423

即使使用那个丑陋的大 O 表示法，我认为这是一个二进制搜索问题，因为您有排序列表。

空间复杂度保持不变，因为它是一种分而治之的算法，所以你不会有问题。

非常确定 t 在 logn 之外，类似于 O((logn)+t)？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-21T00:17:25.300

嗯...听起来像...二进制搜索？[维基](http://en.wikipedia.org/wiki/Binary_search)

# c++ - ANTLR 解析器生成器最适合内存受限的 C++ 应用程序吗？

> ID：770577
> 
> 赞同：7
> 
> 时间：2009-04-21T00:15:35.663
> 
> 标签：c++, c, parsing, antlr

我正在寻找一个好的解析器生成器，可用于在我们的大型商业应用程序中读取自定义文本文件格式。目前，这种特定的文件格式是使用手工递归解析器读取的，但格式已经增长和复杂化，以至于这种方法变得无法管理。

似乎最终的解决方案是为这种格式构建一个适当的语法，然后使用像 yacc 这样的真正的解析器生成器来读取它，但我无法决定使用哪个这样的生成器，或者即使它们值得麻烦一点也不。我看过 ANTLR 和 Spirit，但我们的项目有超出[早期答案](https://stackoverflow.com/questions/428892/what-parser-generator-do-you-recommend)的特定限制，这让我想知道它们是否适合我们。特别是，我需要：

*   **使用 MSVC 生成 C 或 C++ 代码的解析器。**ANTLR 3 不支持 C++；它声称可以生成直接的 C，但是关于让它实际工作的文档有点令人困惑。
*   **严重限制内存使用。**在我们的应用程序中，内存非常宝贵，即使是微小的泄漏也是致命的。我需要能够覆盖解析器的内存分配器以使用我们的自定义 malloc()，或者至少我需要给它一个连续的池，它从中提取所有内存（并且我可以在之后解除分配整体）。我可以为解析器可执行文件本身腾出大约 200kb 的空间，但是它在解析中分配的任何动态堆都必须在之后被释放。
*   **很好的表现。**这不太重要，但我们应该能够在 3ghz 处理器上在一秒钟内解析 100kb 的文本。
*   **必须是无 GPL 的。**我们不能使用 GNU 代码。

我喜欢 ANTLRworks 的 IDE 和调试工具，但看起来让它的 C 目标真正与我们的应用程序一起工作将是一项艰巨的任务。在我开始讨论之前，ANTLR 是适合这项工作的工具吗？

有问题的文本格式类似于：

```
attribute "FluxCapacitance"  real constant

asset DeLorean
{
    //comment foo bar baz
    model "delorean.mdl"
    animation "gullwing.anm"
    references "Marty"
    loadonce
}

template TimeMachine
{
    attribute FluxCapacitance 10      
    asset DeLorean
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T00:49:54.707

我们在应用程序中成功使用了[Boost Spirit 。](http://spirit.sourceforge.net/)[Boost 许可证](http://www.boost.org/LICENSE_1_0.txt)是一个非常自由的许可证，因此在商业应用程序中使用它是没有问题的。

[从文档中引用：](http://spirit.sourceforge.net/distrib/spirit_1_8_5/libs/spirit/doc/introduction.html)

> Spirit 是一个使用模板元编程技术实现的面向对象的递归下降解析器生成器框架。表达式模板允许我们在 C++ 中完全近似扩展巴科斯范式 (EBNF) 的语法。Spirit 框架使目标语法能够专门用 C++ 编写。内联 EBNF 语法规范可以与其他 C++ 代码自由混合，并且由于 C++ 模板的生成能力，可以立即执行。回想起来，传统的编译器-编译器或解析器-生成器必须执行从源 EBNF 代码到 C 或 C++ 代码的额外翻译步骤。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T07:09:11.660

> ANTLR 3 不支持 C++；它声称可以生成直接的 C，但是关于让它实际工作的文档有点令人困惑。

它确实生成 C，此外，它适用于 Visual Studio 和 C++。我知道这一点是因为我以前做过并提交了一个补丁来让它与 stdcall 一起工作。

> 在我们的应用程序中，内存非常宝贵，即使是微小的泄漏也是致命的。我需要能够覆盖解析器的内存分配器以使用我们的自定义 malloc()，或者至少我需要给它一个连续的池，它从中提取所有内存（并且我可以在之后解除分配整体）。我可以为解析器可执行文件本身腾出大约 200kb 的空间，但是它在解析中分配的任何动态堆都必须在之后被释放。

我上次检查的 antlr3c 运行时没有内存泄漏，并使用您描述的内存池范例。但是，它的 API 有一个缺点是作者拒绝改变的，那就是如果你请求一个节点的字符串，它每次都会创建一个新的副本，直到你释放整个解析器。

我对使用自定义 malloc 的易用性没有评论，但它确实有一个宏来定义在整个项目中使用的 malloc 函数。

至于可执行文件大小，我的编译大小约为 100 kb，包括一个小型解释器。

我对你的建议是继续学习 ANTLR，因为它仍然符合你的要求，而且你可能需要牺牲更多的时间才能开始为你工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-27T02:15:00.677

手动编码的递归下降解析器实际上非常快并且可以非常紧凑。唯一的缺点是您必须小心编写本质上的 LL(1) 语法。[如果你使用 ANTLR，你有类似的限制，所以这没什么大不了的]。

您可以将此类解析器的代码编写为普通的递归 C 代码。（有关完整详细信息，请参阅此答案： [是否有可用于 8 位嵌入式系统的 flex/bison 替代方案？](https://stackoverflow.com/questions/2245962/is-there-an-alternative-for-flex-bison-that-is-usable-on-8-bit-embedded-systems/2336769#2336769)）

如果您的空间真的很紧，您可以定义一个解析虚拟机，并构建一个微型 C 解释器来运行它。早在 70 年代初，我就曾经以这种方式构建 BASIC 解释器。

通过坚持使这些解析器实际工作的非常简单的约定，您可以保证没有由解析机制引起的内存泄漏。（当然，您可以将任意操作附加到解析器识别感兴趣的项目的位置；这些操作是否泄漏是一般编程问题，而不是解析器）。

这些想法来自 Val Schorre 1964 年关于元编译器的论文，他展示了如何在 10 页中构建完整的编译器。Shorre 的微型解析器生成器产生了非常好的递归下降解析器。可以在 [http://www.bayfronttechnologies.com/metaii.html找到描述本文并准确展示如何构建此类解析器的站点](http://www.bayfronttechnologies.com/metaii.html)

在我厌倦了手工编写复杂的语法之后，我在 70 年代后期使用了 Schorre 的方法来构建 Basic 编译器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-03-01T01:17:42.150

请查看我为 ANTLR 发布的新 C++ 目标。它还可以选择限制解析器的内存使用，并以特征的形式公开所有必要的内存管理例程。

[http://www.antlr.org/wiki/pages/viewpage.action?pageId=29130826](http://www.antlr.org/wiki/pages/viewpage.action?pageId=29130826)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T06:58:47.923

那你为什么不使用 flex/yacc 呢？它生成 C 代码，可以从 MSVC 运行，在开发时考虑到了效率，可以覆盖 malloc（google for yymalloc），它们本身就是 GPL，但生成的代码（您在项目中使用的代码）AFAIK 不是。

或者使用手工制作的解析器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T00:19:39.943

ANTLR 解析器，实际上任何使用 LALR 等构建的解析器往往都很大。您对此有实际的语法吗？*看起来*它可能最容易用手写的递归下降解析器解析，但它并不是一个样本。

糟糕，我的错误，因为 ANTLR 显然会生成递归下降。尽管如此，我还是遇到了 ANTLR 生成大型解析器的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T15:31:50.507

实际上，如果您的语法相对较小，并且不包含很多歧义或解析复杂性，那么使用递归下降解析器或移位归约解析器应该没关系。

我想说看看 ANTLR 和 Spirit，也看看 Flex 和 Bison。还有其他鲜为人知的解析器，例如 Coco/R（包含许多语言的生成器，包括 C++）。

# sql - 如何使用 SQL 语句计算百分比

> ID：770579
> 
> 赞同：230
> 
> 时间：2009-04-21T00:16:29.327
> 
> 标签：sql, sql-server, tsql

我有一个包含用户及其成绩的 SQL Server 表。为简单起见，假设有 2 列 - `name`& `grade`。因此，典型的行将是名称：“John Doe”，等级：“A”。

我正在寻找一个可以找到所有可能答案的百分比的 SQL 语句。（A、B、C 等......）另外，有没有办法在不定义所有可能答案的情况下做到这一点（打开文本字段 - 用户可以输入“通过/失败”、“无”等......）

我正在寻找的最终输出是A：5％，B：15％，C：40％，等等......

* * *

## 回答 #1

> 赞同：306
> 
> 时间：2011-05-01T02:50:16.793

1.  最有效的（使用 over()）。

    ```
    select Grade, count(*) * 100.0 / sum(count(*)) over()
    from MyTable
    group by Grade 
    ```

2.  通用（任何 SQL 版本）。

    ```
    select Grade, count(*) * 100.0 / (select count(*) from MyTable)
    from MyTable
    group by Grade; 
    ```

3.  使用 CTE，效率最低。

    ```
    with t(Grade, GradeCount) 
    as 
    ( 
        select Grade, count(*) 
        from MyTable
        group by Grade
    )
    select Grade, GradeCount * 100.0/(select sum(GradeCount) from t)
    from t; 
    ```

* * *

## 回答 #2

> 赞同：273
> 
> 时间：2009-04-21T12:54:42.810

我已经测试了以下内容，这确实有效。gordyii 的答案很接近，但乘以 100 的位置错误，并且缺少括号。

```
Select Grade, (Count(Grade)* 100 / (Select Count(*) From MyTable)) as Score
From MyTable
Group By Grade 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2009-05-01T03:01:41.890

您可以使用没有“partition by”子句的窗口函数，而不是使用单独的 CTE 来获取总数。

如果您正在使用：

```
count(*) 
```

要获取组的计数，您可以使用：

```
sum(count(*)) over () 
```

得到总数。

例如：

```
select Grade, 100\. * count(*) / sum(count(*)) over ()
from table
group by Grade; 
```

根据我的经验，它往往更快，但我认为在某些情况下它可能会在内部使用临时表（我在使用“set statistics io on”运行时看到了“Worktable”）。

**编辑：** 我不确定我的示例查询是否是您正在寻找的，我只是在说明窗口函数是如何工作的。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-05-24T02:31:15.537

我只是在需要计算百分比时使用它..

```
ROUND(CAST((Numerator * 100.0 / Denominator) AS FLOAT), 2) AS Percentage 
```

请注意，100.0 返回 1 个小数，而 100 本身会将结果四舍五入到最接近的整数，即使使用 ROUND(...,2) 函数也是如此！

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-04-21T00:20:50.657

你必须计算总成绩如果是 SQL 2005 你可以使用 CTE

```
 WITH Tot(Total) (
    SELECT COUNT(*) FROM table
    )
    SELECT Grade, COUNT(*) / Total * 100
--, CONVERT(VARCHAR, COUNT(*) / Total * 100) + '%'  -- With percentage sign
--, CONVERT(VARCHAR, ROUND(COUNT(*) / Total * 100, -2)) + '%'  -- With Round
    FROM table
    GROUP BY Grade 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2009-04-21T00:27:43.607

您需要在成绩字段上进行分组。这个查询应该给你你在几乎任何数据库中寻找的东西。

```
 Select Grade, CountofGrade / sum(CountofGrade) *100 
    from
    (
    Select Grade, Count(*) as CountofGrade
    From Grades
    Group By Grade) as sub
    Group by Grade 
```

您应该指定您正在使用的系统。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-04-21T00:50:22.007

以下应该工作

```
ID - Key
Grade - A,B,C,D... 
```

编辑：移动`* 100`并​​添加了`1.0`以确保它不会进行整数除法

```
Select 
   Grade, Count(ID) * 100.0 / ((Select Count(ID) From MyTable) * 1.0)
From MyTable
Group By Grade 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-04-21T01:43:24.360

我相信这是一个通用的解决方案，尽管我使用 IBM Informix Dynamic Server 11.50.FC3 对其进行了测试。以下查询：

```
SELECT grade,
       ROUND(100.0 * grade_sum / (SELECT COUNT(*) FROM grades), 2) AS pct_of_grades
    FROM (SELECT grade, COUNT(*) AS grade_sum
            FROM grades
            GROUP BY grade
         )
    ORDER BY grade; 
```

在水平规则下方显示的测试数据上给出以下输出。该`ROUND`功能可能是特定于 DBMS 的，但其余的（可能）不是。（请注意，我将 100 更改为 100.0 以确保使用非整数 - DECIMAL、NUMERIC - 算术进行计算；请参阅评论，感谢 Thunder。）

```
grade  pct_of_grades
CHAR(1) DECIMAL(32,2)
A       32.26
B       16.13
C       12.90
D       12.90
E       9.68
F       16.13 
```

* * *

```
CREATE TABLE grades
(
    id VARCHAR(10) NOT NULL,
    grade CHAR(1) NOT NULL CHECK (grade MATCHES '[ABCDEF]')
);

INSERT INTO grades VALUES('1001', 'A');
INSERT INTO grades VALUES('1002', 'B');
INSERT INTO grades VALUES('1003', 'F');
INSERT INTO grades VALUES('1004', 'C');
INSERT INTO grades VALUES('1005', 'D');
INSERT INTO grades VALUES('1006', 'A');
INSERT INTO grades VALUES('1007', 'F');
INSERT INTO grades VALUES('1008', 'C');
INSERT INTO grades VALUES('1009', 'A');
INSERT INTO grades VALUES('1010', 'E');
INSERT INTO grades VALUES('1001', 'A');
INSERT INTO grades VALUES('1012', 'F');
INSERT INTO grades VALUES('1013', 'D');
INSERT INTO grades VALUES('1014', 'B');
INSERT INTO grades VALUES('1015', 'E');
INSERT INTO grades VALUES('1016', 'A');
INSERT INTO grades VALUES('1017', 'F');
INSERT INTO grades VALUES('1018', 'B');
INSERT INTO grades VALUES('1019', 'C');
INSERT INTO grades VALUES('1020', 'A');
INSERT INTO grades VALUES('1021', 'A');
INSERT INTO grades VALUES('1022', 'E');
INSERT INTO grades VALUES('1023', 'D');
INSERT INTO grades VALUES('1024', 'B');
INSERT INTO grades VALUES('1025', 'A');
INSERT INTO grades VALUES('1026', 'A');
INSERT INTO grades VALUES('1027', 'D');
INSERT INTO grades VALUES('1028', 'B');
INSERT INTO grades VALUES('1029', 'A');
INSERT INTO grades VALUES('1030', 'C');
INSERT INTO grades VALUES('1031', 'F'); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-09-05T09:39:21.347

```
SELECT Grade, GradeCount / SUM(GradeCount)
FROM (SELECT Grade, COUNT(*) As GradeCount
      FROM myTable
      GROUP BY Grade) Grades 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-21T00:28:04.557

在任何 sql server 版本中，您都可以使用一个变量来计算所有成绩的总和，如下所示：

```
declare @countOfAll decimal(18, 4)
select @countOfAll = COUNT(*) from Grades

select
Grade,  COUNT(*) / @countOfAll * 100
from Grades
group by Grade 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-04-21T00:34:12.997

您可以在 from 查询中使用子选择（未经测试，不确定哪个更快）：

```
SELECT Grade, COUNT(*) / TotalRows
FROM (SELECT Grade, COUNT(*) As TotalRows
      FROM myTable) Grades
GROUP BY Grade, TotalRows 
```

或者

```
SELECT Grade, SUM(PartialCount)
FROM (SELECT Grade, 1/COUNT(*) AS PartialCount
      FROM myTable) Grades
GROUP BY Grade 
```

或者

```
SELECT Grade, GradeCount / SUM(GradeCount)
FROM (SELECT Grade, COUNT(*) As GradeCount
      FROM myTable
      GROUP BY Grade) Grades 
```

您还可以使用存储过程（为 Firebird 语法道歉）：

```
SELECT COUNT(*)
FROM myTable
INTO :TotalCount;

FOR SELECT Grade, COUNT(*)
FROM myTable
GROUP BY Grade
INTO :Grade, :GradeCount
DO
BEGIN
    Percent = :GradeCount / :TotalCount;
    SUSPEND;
END 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-15T23:51:05.827

我有一个类似的问题。您应该能够得到乘以 1.0 而不是 100 的正确结果。参见附加的示例图片

Select Grade, (Count(Grade)* 1.0 / (Select Count(*) From MyTable)) as Score From MyTable Group By Grade ![请参阅随附的参考图片](https://i.stack.imgur.com/AWfZF.jpg)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-07T08:20:56.323

这个在 MS SQL 中运行良好。它将 varchar 转换为两位小数位限制的浮点数的结果。

```
Select field1, cast(Try_convert(float,(Count(field2)* 100) / 
Try_convert(float, (Select Count(*) From table1))) as decimal(10,2)) as new_field_name 
From table1 
Group By field1, field2; 
```

# css - IE 6 无法识别当前页面

> ID：770583
> 
> 赞同：0
> 
> 时间：2009-04-21T00:17:34.707
> 
> 标签：css, internet-explorer, internet-explorer-6, navigation

我使用一个简单的列表作为导航，它会根据链接正常、悬停或当前的状态显示适当的背景图像。在 IE6 中，当前或实际页面被忽略，不显示不同的图像并保持链接处于活动状态。代码是 -

```
<div id="mainNav">
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="../work.html" class="current">Projects</a></li>
    <li><a href="../contact.html">Contact</a></li>
  </ul>
</div> 
```

导航的 CSS 是 -

```
#topcontent1 #mainNav {
    position: absolute;
    left: 86px;
    width: 328px;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 0.9em;
    padding: 0px;
    clear: both;
    color: #666633;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 0px;
    font-weight: 700;
    text-transform: uppercase;
}
#topcontent1 #mainNav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    float: left;
    width: 100%;
}
#topcontent1 #mainNav li {
    float: left;
    margin: 0;
    padding:0;
    display: block;
}
#topcontent1 #mainNav li a:link, #topcontent1 #mainNav li a:visited {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 1em;
    color: #fff;
    text-decoration: none;
    display: block;
    background-repeat: no-repeat;
    margin-right: 10px;
    width: 99px;
    height: 62px;
    margin-top: 0px;
    line-height: 62px;
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0;
    text-align: center;
    padding-top: 60px;
    background-image: url('../images and html/images/tabnorm.jpg');
}
#topcontent1 #mainNav li a:hover {
    color: #f8b449;
    border: none;
    background-image: url('../images and html/images/tabhover.jpg');
    background-repeat: no-repeat;
}
#topcontent1 #mainNav ul li a.current {
    color: #AAB3B2;
    background-image: url('../images and html/images/tabcurr.jpg');
    background-repeat: no-repeat;
}
#topcontent1 #mainNav ul li a.current:hover {
    color: #AAB3B2;
    cursor: default;
} 
```

#topcontent1 #mainNav ul li a.current 样式似乎被 IE6 忽略了。

任何人都可以看到问题或建议解决方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T00:36:11.277

IE6 似乎有复杂的选择器语句的问题。也许尝试使用

```
#mainNav a.current 
```

代替

```
#topcontent1 #mainNav ul li a.current 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-07T09:41:21.343

在你的代码中改变它

```
#topcontent1 #mainNav li a:link, #topcontent1 #mainNav li a:visited { 
```

至

```
#topcontent1 #mainNav li a { 
```

# model-view-controller - 用于没有数据层的桌面应用程序的 MVC

> ID：770586
> 
> 赞同：5
> 
> 时间：2009-04-21T00:18:15.860
> 
> 标签：model-view-controller, architecture, genetic-algorithm

问题可能很棘手（因为它的性质或我描述它的方式），所以在回答之前请认真阅读。

我有这个应用程序要写：
a）桌面应用程序；
b) 没有数据库、文件或任何其他存储库意义上的数据层（无需保存、存储或加载数据）；
c）应用程序将实现一些计算算法（遗传算法）；
b) 提供 GUI，它将显示应用程序和计算结果的控件。

我正在考虑使用 MVC 模式，但我怀疑如何使用它。由于我没有（例如）数据库意义上的数据层（数据是在执行过程中根据用户输入生成的），我担心在这个实现中使用 MVC 的方式。到目前为止，我提出了两种方法：

1.  GUI 是视图。遗传算法是控制器。GeneticAlgorithmResults 是模型（作为仅存储数据的类）。基本流程：

    *   View 将用户输入发送到 Controller；
    *   控制器正在处理用户输入并生成数据；
    *   Controller将生成的数据发送给Model；
    *   Model 通知 View 新数据；
    *   视图拉取新数据并更新显示。
2.  GUI 是视图。AppEngine 是控制器。遗传算法和遗传算法结果是模型。现在我们有：

    *   View 将用户输入发送到 Controller；
    *   控制器正在处理用户输入并向模型发送控制信号。
    *   模型更新其内部状态（生成新数据）；
    *   模型通知控制器新数据；
    *   Controller 拉取数据到模型；
    *   控制器处理数据；
    *   控制器将处理后的数据推送到视图；
    *   视图更新显示。

第一种方法似乎更直接，更像 MVC。问题是模型中必须有一些逻辑 - 决定何时通知模型，因为不会显示所有数据更新，或者可能会使用数据集而不是每一个微小的变化来更新显示。这些决定将基于用户输入。更重要的是，在实际显示之前可能需要对数据进行一些额外的处理。这将在视图中。

另一方面，第二种方法似乎更复杂，看起来要传递很多消息来完成任务。但是它将Logic的完全控制权交给了Controller，并将View、Controller和Model的职责分开（这是MVC的主要目的）。

您会推荐哪种方法？或者，也许我应该将它们混合使用并使用第一种方法架构和第二种方法的通信流？还是一些不同的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T00:26:13.937

从我对 MVC 的理解来看，第二个版本更像是严格的 MVC 范式。然而，我的一位非常聪明的老师曾经告诉我，设计模式的存在是为了提供一套松散的指导方针，并不一定要遵循 T。

在我看来，两者结合是个好主意。如果某些逻辑最终出现在模型中，这并不是世界末日，它只是意味着您必须更加小心地跟踪组件的分离。如果对 MVC 的一个小修改让你的生活轻松了 50%（更少的消息开销），那么这可能是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T01:09:09.607

我肯定会选择更接近第二个实现的东西。是的，看起来确实有更多的消息来回传递，但是如果您的应用程序增长和变化，您会很高兴您已经使用小类构建了应用程序。

考虑一下：处理普通任务的逻辑在哪里，比如在算法之间切换、执行它们和处理数据以供查看？

遗传算法对某种输入或起始数据进行操作，不是吗？你会从你的数据访问层得到这个。您不需要种子数据或初始化条件吗？将您的结果保存到文件并检索它们以供以后查看怎么样？我认为一旦您的应用程序成熟，您就需要这样做。期望一开始您将使用基于文件的持久性。如果您觉得可以，稍后您可以升级到数据库。如果您针对抽象的数据持久层进行编码，则以后不必更改业务逻辑来支持从文件到数据库的更改。

您应该使用策略模式来实现您的算法。这将允许您将求解器的实现从遗传算法更改为其他算法，而无需更改每个算法的业务逻辑。

业务层将看到一个接受输入的 ISolver，您将调用 mySolver.Solve()。您应该能够在不同版本之间切换，而无需更改您的业务层逻辑（[开放封闭原则](http://davidhayden.com/blog/dave/archive/2005/07/01/1875.aspx)）。业务逻辑与算法交互方式的唯一区别应该在构造函数中，即使在构造函数中，您也应该考虑使用工厂模式。

# cluster-computing - 构建集群所需的软件

> ID：770590
> 
> 赞同：4
> 
> 时间：2009-04-21T00:19:10.927
> 
> 标签：cluster-computing

我一直在考虑让我的电脑更环保一些，并在我的下一台电脑上使用一些低功耗的 mini-itx 板。有些可以产生低于 10 瓦的功率，而且非常便宜。

所以我想，如果一个如此低成本和低功耗，为什么不尝试用它们做一个集群呢？但是，我不确定我需要在操作系统或管理软件方面做什么才能实现这一目标？

任何人都可以提供有关现有软件的建议或任何关于如何设计我自己的想法的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T00:29:36.517

你想用你的集群实际做什么决定了你需要什么软件。

*   你需要工作调度吗？
*   监控工具？
*   您是否需要一次在所有节点上无缝部署软件？
*   一个跨所有节点的文件系统（推荐）。

您可以轻松地在板上安装 linux 或 *BSD，然后使用 ssh 在所有节点上管理和运行作业。不需要其他软件。

您可能会觉得有用的软件：

*   PBS（主要是作业调度，谷歌）
*   [Kerrighed](http://kerrighed.org/wiki/index.php/Main_Page)（基于单系统映像，Linux 发行版）
*   [Rocks](http://www.rocksclusters.org/wordpress/?page_id=57)（基于集群的分布）
*   [Mosix](http://wikis.cs.huji.ac.il/wiki/index.php/MOSIX-wiki)（集群管理，openMosix 也有）
*   [Ganglia](http://ganglia.info/)（监控，可能为你过度杀戮）
*   [Lustre](http://www.sun.com/software/products/lustre/)（来自 Sun 的超快速、开源集群文件系统）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T00:26:59.333

看看[beowulf](http://www.beowulf.org/)开始吧。

话虽如此，我能给出的最好建议是*仔细*衡量你的集群是否真的更环保。我以前在这条路上走得有点远，根据我的经验，拥有许多单独的计算机所带来的损失最终会抹去任何能源节省。请记住，每台计算机都需要电源，它将您的家庭电压转换为计算机所需的水平。转换效率低，并且浪费热量（这就是电源有风扇的原因）。对于您需要的每个硬盘驱动器、RAM 组和主板，都可以这样说。

这并不是要阻止您参与该项目。一定要配置文件。就像写软件一样！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T00:25:32.473

您可以使用[Beowulf](http://www.beowulf.org/)运行集群。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T00:54:55.287

这个问题有很多。

首先，如果您只想启动并运行集群，这里已经列出了许多建议。但是，一旦集群启动并运行，您才刚刚开始。

此时，您需要拥有能够在整个集群中正常工作的软件。如果您正在开发自己的软件，则需要将其设计为跨集群并行化，使用类似[MPI](http://www.mcs.anl.gov/research/projects/mpi/)的东西。

但是，如果没有编写跨集群运行的软件，集群只不过是一个高度定制的盒子，没有做任何特别的事情......

# asp.net - 当 Timer 事件刷新 UpdatePanel 的内容时，如何防止重置会话超时？

> ID：770594
> 
> 赞同：1
> 
> 时间：2009-04-21T00:19:57.040
> 
> 标签：asp.net, asp.net-ajax, updatepanel

我们在我们的 ASP.net Ajax 应用程序中有几个页面，它们根据计时器事件自动刷新 UpdatePanels 内容，但问题是我们需要使 Web 会话超时，而自动刷新阻止了这种情况。

有没有办法阻止计时器回发事件修改 Web 会话或任何其他替代解决方案以允许 Web 会话在自动刷新 UpdatePanel 内容时超时？

这里有一个例子来说明这个问题。我将会话超时设置为 3 分钟，并在 UpdatePanel 中有一个计时器，每分钟计时一次，并根据当前状态修改 UpdatePanel 的内容。登录后，我导航到此页面并在 5 分钟内什么都不做，然后尝试单击另一个页面，但由于会话没有超时，我仍然处于登录状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T00:31:41.507

您可以在客户端跟踪用户的活动。`[Sys.Services.AuthenticationService](http://msdn.microsoft.com/nb-no/library/bb310861(en-us).aspx)`如果没有鼠标移动等，您可以使用该类（Microsoft AJAX Library 1.0 的一部分）将用户注销。您可以在实际注销之前弹出确认信息，以便用户在他在场时可以取消它。注销时，您可以向用户弹出一条消息，说明他由于不活动而自动注销。

我的解决方案将如何解决您的情况：

您将会话超时设置为 3 分钟，并在 UpdatePanel 中有一个计时器，该计时器每分钟计时一次，并根据当前状态修改 UpdatePanel 的内容。登录后，您导航到此页面并且什么也不做。3 分钟无活动后，您向用户弹出确认信息，要求他使用`Sys.Services.AuthenticationService`. 如果用户仍然没有采取任何行动，您可以在几秒钟后将他注销。您弹出一条“已注销消息”，用户将在 5 分钟后返回浏览器时看到该消息。当他然后单击另一个页面时，他没有登录。

# encoding - 维特比解码器

> ID：770613
> 
> 赞同：7
> 
> 时间：2009-04-21T00:30:14.397
> 
> 标签：encoding, decoding, viterbi

有谁知道网络或书籍上有什么好的资源可以找到维特比解码器的解释或如何使用格子图解码接收到的位序列的教程？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T00:38:55.933

一个很好的解释可以在[1-core](http://www.1-core.com/library/comm/viterbi/)上找到。

当然，维基百科有大量[背景信息](http://en.wikipedia.org/wiki/Viterbi_decoder)。

实际上有一个[网站](http://www.spiral.net/software/viterbi.html)会为您生成维特比解码器软件。多么酷啊？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-22T22:00:01.147

数字通信：基础和应用 -也许是[Bernard Sklar 。](https://rads.stackoverflow.com/amzn/click/com/0130847887)

# sql - 在一个操作中运行多个 SQL 语句

> ID：770614
> 
> 赞同：8
> 
> 时间：2009-04-21T00:30:45.110
> 
> 标签：sql, ms-access

我正在尝试使用 ADO 一次在 MS Access 中创建多个表。是否可以在一个操作中执行多个语句？例如：

```
...
// I have omitted the field details 
CString sQuery = "CREATE TABLE [Table1] (..., PRIMARY KEY ([ID])); \nCREATE TABLE [Table2] (..., PRIMARY KEY ([ID]));";
oRecordset.Open(oDatabase.m_pConnection, sQuery) 
```

`"Syntax Error in CREATE TABLE statement"`尽管每个 create 语句都可以完美地工作，但由于 a 而失败。有没有办法做这种事情？还会有添加约束、添加索引等的语句，我真的很希望能够这样做，这样我就不必将字符串分成单独的部分。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T07:42:10.957

ADO 不是问题：ACE/Jet 引擎根本不支持单个操作中的多个 SQL 语句。换句话说，ACE/JET SQL 缺少大多数“工业级”SQL 产品中的过程语法。有关更多详细信息，请参阅@David-W-Fenton 的答案。

底线：您将需要`Connection.Execute`为每个`CREATE TABLE`语句发出一个，即客户端程序代码。但当然，它们可以（也许应该）都在同一个事务中运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T00:40:22.747

ADO 到 MS Access 不支持批处理 SQL 语句。您需要将每个语句作为单独的执行来运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T06:11:10.660

那些认为您可以将多个 SQL 语句批量发送到 Jet 的人只是没有思考。

Jet 是一个文件服务器数据库引擎——没有集中的服务器进程控制客户端和实际数据存储之间的交互。相反，客户端都在运行 Jet 的各个实例，并以由 Jet 锁定文件 (LDB) 控制的方式协作编辑文件。如果没有一个集中的过程来对 SQL 语句进行序列化和优先级排序，您就不会*希望*Jet 能够批量处理多个语句。

那些提出使用 ADO 并用 CrLf 分隔语句的建议的人应该对其进行编码并尝试一下，然后向我们反馈他们的推测性建议实际上有多大用处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T00:47:15.260

如果您的示例命令集是典型的，只需在 VBA 或您选择的语言中执行类似的操作：

> ```
> public sub ExeuteBatch(BatchString as String)
>     var s as string  
>     var abatch as array  
>     sbatch = replace(sbatch, "\n", "")
>     abatch = split(BatchString, ";")
>     for each s in abatch
>         ** adodb execute s here **
>     next s
> end sub 
> ```

这不是我的想法，但我希望你应该能够从那里拿走它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-10-31T16:13:10.203

粗鲁但有效 - 使用每个 SQL 语句创建必要数量的查询，然后使用宏连续运行查询。这与使用 ADO/Jet 所能做到的差不多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T00:36:41.743

我不知道 ADO 是否是通过 JET OleDB Engine 构建的，我想如果是这样的话，Jet Engine 不支持在一个批次中执行多个语句，我们尝试用 ; 分隔。并带有 GO 保留字，但它不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T01:39:42.247

我认为您可以在一个 ADO 命令中运行多个命令。

您只需要在此之间进行适当的换行即可。即 \n 不起作用。

尝试这样的事情：（使用 VB 语法）

```
MyQuery = "Select * from Whatever " & vbLf <br>
MyQuery = MyString & "Select * from SomethingElse " & vbLF

oRecordset.Open(oDatabase.m_pConnection, MyQuery ) 
```

# sql - 哪些包可用于在 LaTeX 中排版 SQL？

> ID：770631
> 
> 赞同：6
> 
> 时间：2009-04-21T00:39:56.587
> 
> 标签：sql, latex, typeset

我正在寻找一个在 LaTeX 中排版 SQL 语句的包。到目前为止，我听说过[listings](http://www.ctan.org/tex-archive/macros/latex/contrib/listings/)和[lgrind](http://www.ctan.org/tex-archive/nonfree/support/lgrind/)，还有其他建议吗？

[编辑] 添加的要求：我希望包能够智能地插入分页符，以便在可能的情况下语句不跨越多个页面。仍在阅读文档，因此任何一个 a/m 都可能已经能够做到这一点 - 如果是这种情况，请告诉我。

相关：[问题](https://stackoverflow.com/questions/300521/latex-package-to-do-syntax-highlighting-of-code-in-various-languages)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-21T01:07:32.760

我使用`listings`包，但主要用于片段。一般来说，我不需要担心分页符。最大的好处之一`listings`是高度的灵活性。例如，我不将我的 SQL 大写，但我可以使用大写的关键字打印我的列表：

```
\makeatletter
\newcommand{\lstuppercase}{\uppercase\expandafter{\expandafter\lst@token
                           \expandafter{\the\lst@token}}}
\newcommand{\lstlowercase}{\lowercase\expandafter{\expandafter\lst@token
                           \expandafter{\the\lst@token}}}
\makeatother

\lstdefinestyle{Oracle}{basicstyle=\ttfamily,
                        keywordstyle=\lstuppercase,
                        emphstyle=\itshape,
                        showstringspaces=false,
                        } 
```

并根据需要定义更多关键字：

```
\lstdefinelanguage[Oracle]{SQL}[]{SQL}{
  morekeywords={ACCESS, MOD, NLS_DATE_FORMAT, NVL, REPLACE, SYSDATE,
                TO_CHAR, TO_NUMBER, TRUNC},
} 
```

要使用这些定义：

```
\lstset{language=[Oracle]SQL,
        style=Oracle,
       } 
```

如果我要打印出更大的代码片段，我要么不担心分页符，要么编写一个预处理器在将代码传递给`LaTeX`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T00:46:04.997

你想使用这个`listings`包。您是否想用它做特定的事情，或者您只是在询问哪个软件包通常最有效？我从来没有遇到过任何大问题`listings`，尽管让它完全按照我的意愿去做有时很棘手（它是 LaTeX；期待其他任何事情都是愚蠢的）。

编辑（解决您的编辑问题）：智能分页可能有问题；这当然超出了我的能力。`listings`可能可以通过显式标记来做到这一点（转义到 LaTeX 并在适当的位置插入负分页符；可能是可宏化的），但我认为`listings`不能自动做到这一点，我怀疑 LGrind 也能做到。在 LaTeX 特定列表上搜索或询问可能会更好（`comp.text.tex`在 Usenet 上是一个尝试的好地方），但是 TeX 中的分页从来没有像换行那样好，所以我不会抱太大希望， 很遗憾。

# java - 为当前线程禁用 Java 反射

> ID：770635
> 
> 赞同：21
> 
> 时间：2009-04-21T00:42:25.350
> 
> 标签：java, security, reflection, sandbox, securitymanager

我需要调用一些半可信的 Java 代码，并希望在该代码执行期间禁用使用反射的能力。

```
try{
   // disable reflection somehow
   someObject.method();
}
finally{
   // enable reflection again
} 
```

这可以用 SecurityManager 来完成吗？如果可以，怎么做？

**澄清/上下文：**这是关于限制可以从 JavaScript/Rhino 调用的包的[另一个问题](https://stackoverflow.com/questions/723886/rhino-restrict-java-packages-that-can-be-accessed-from-javascript)的后续。接受的答案引用了一篇关于如何做到这一点的博客条目，它需要两个步骤，第一个步骤使用 Rhino API (ClassShutter)，第二个步骤关闭反射和 Class.forName()。我在想我可以使用 SecurityManager 更干净地完成第二步（学习 SecurityManager，正如已经指出的那样，这是一个复杂的野兽，一路走来）。

总而言之，我希望（从代码，而不是设置文件）关闭 Class.forName() 以及对整个反射包的任何访问。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-21T01:01:56.347

这取决于您要限制的内容。

一般来说，可公开访问的 API 不受限制。但是，只要您不授予不可信代码[`ReflectPermission("suppressAccessChecks")`](http://java.sun.com/javase/6/docs/api/java/lang/reflect/ReflectPermission.html)权限，它就无法访问另一个包中的非公共 API。

如果您有要限制所有访问的软件包列表，则有两个步骤。首先，在`Security`属性中，[将受限包包含在`package.access`列表中](http://java.sun.com/javase/6/docs/api/java/lang/SecurityManager.html#checkPackageAccess(java.lang.String))。然后给出你*信任*的代码`RuntimePermission("accessClassInPackage." + pkg)`。

区分不受信任代码的常用方法是从不同位置加载它，并在授予权限时参考策略文件中的不同代码库。

Java 安全架构非常强大，但我知道它也很复杂；如果您想要一个更具体的示例，请准确描述您想要限制的调用，我会尝试更明确。

* * *

在不修改`java.policy`文件和/或`java.security`文件的情况下做你想做的事将非常困难，也许是不可能的。表示 中的`java.security.Policy`信息`java.policy`，但不提供写访问权限。您可以创建自己的`Policy`实现并在运行时安装它，只要任何现有的`SecurityManager`允许它。

另一方面，您可以将自定义 java.policy 文件指定为命令行选项。如果您要提供带有某种启动器的完整应用程序，那可能很容易实现。它还为您的用户提供了一些透明度。成熟的用户可以查看您希望授予应用程序的权限。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T01:03:12.880

好吧，您可以覆盖`SecurityManager.checkMemberAccess`并给出更严格的定义。但是，它实际上并不是这样工作的。例如，如果代码定义了终结器，会发生什么？

关于澄清：其他 API 使用反射和其他 API。例如，java.beans、LiveConnect 和 Rhino。例如，攻击者可以从脚本中创建一个没有快门的新 Rhino 上下文，从而引导进入完整的 JRE。使用开放系统，黑名单永远无法完成。

总之：要使用 Java 安全模型，您需要使用它，而不是反对它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-27T17:52:34.763

我写了一个 ClassShutter 的替代品，它允许对每个实例、每个方法、每个字段进行细粒度的访问控制：

[http://riven8192.blogspot.com/2010/07/java-rhino-fine-grained-classshutter.html](http://riven8192.blogspot.com/2010/07/java-rhino-fine-grained-classshutter.html)

# php - 需要将带逗号的字符串正确导出到 CSV 文件中

> ID：770636
> 
> 赞同：5
> 
> 时间：2009-04-21T00:43:24.800
> 
> 标签：php, mysql, csv

**编辑**：将功能的错误部分复制到这个问题中，下面是适当的部分。

```
$values = mysql_query("SELECT lname, fname, email, dtelephone, etelephone, contactwhen, thursday, 
friday, saturday, sunday, monday, comments FROM volunteers_2009 WHERE venue_id = $venue_id");

while ($rowr = mysql_fetch_row($values)) {
    for ($j=0;$j<$i;$j++) {
        $csv_output .= $rowr[$j].", ";
    }
    $csv_output .= "\n";
} 
```

我的评论中可能有逗号，甚至是双引号，当评论字段中有逗号时，它会丢弃整个 csv 文件。

下面的代码是它如何将数据加载到 csv 字符串中，以放入 csv 文件中。

如何让它正确导出评论字段数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T00:50:00.167

你应该检查一下[`fputcsv()`](http://php.net/fputcsv)。那里也有一些有用的评论。

> ```
> int fputcsv ( resource $handle , array $fields [, string $delimiter = ',' 
>     [, string $enclosure = '"' ]] ) 
> ```
> 
> **fputcsv()**将一行（作为字段数组传递）格式化为 CSV 并将其（以换行符终止）写入指定的文件句柄。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T00:48:20.483

用双引号将字段括起来。将任何嵌入的双引号加倍。

```
ordinary field,"field with , in it","field with double double quote ("""")" 
```

[请注意，这与处理 CSV 文件中的逗号](https://stackoverflow.com/questions/769621/dealing-with-commas-in-a-csv-file)问题非常非常接近

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T01:20:56.520

嗯，为什么不直接使用内置的 mySQL 命令呢？如果我错过了什么，请忽略，但我认为这是最快的路线：

[http://www.netreveal.com/ddalton/2006/08/how_to_export_mysql_to_csv.html](http://www.netreveal.com/ddalton/2006/08/how_to_export_mysql_to_csv.html)

网站基本上建议：

```
SELECT <fields or *> INTO OUTFILE '/tmp/result.text'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
FROM <table> WHERE <condition> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T00:48:02.713

编辑：我的错，我刚刚测试过它并不起作用 - 至少在 Excel 中不起作用。

但是，您可以将逗号替换为其他内容：

```
$field = str_replace(',','#COMMA#',$row['Field']);
$csv_output .= $field.', '; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T00:48:16.457

您可以使用不同的分隔符，例如“|” 或“@”或其他一些不太可能出现在数据中的字符。

大多数 csv 软件都能够读取使用逗号以外的其他内容作为分隔符的“csv”文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-02T15:23:25.997

导出数据时在数据中保留逗号和双引号是否重要？您总是可以读入它，然后在将数据导出到 CSV 之前对其进行修改。

我通常做的是将所有内容用双引号括起来，并将“，”（双引号逗号双引号）的组合作为我的分隔符。这样，如果我偶然发现随机双引号或随机逗号，这没什么大不了的。

# web-services - 是否存在与 SharePoint Web 服务中的 SPWeb.Properties 等效的内容？

> ID：770637
> 
> 赞同：0
> 
> 时间：2009-04-21T00:43:28.387
> 
> 标签：web-services, sharepoint

我们的项目有一个使用 SPWeb.Properties 管理自定义属性的站点模板。但是，我需要能够通过 Web 服务更改这些值，而且我很难找到任何方法来返回自定义属性。

在哪里可以找到与 SharePoint Web 服务中的 SPWeb.Properties 集合等效的集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T14:08:01.043

我怀疑是否有内置服务可以做到这一点。但是，如果您可以访问服务器，那么创建一个公开它的服务应该是微不足道的。

# apache-flex - Flex：指向像素并再次返回

> ID：770640
> 
> 赞同：1
> 
> 时间：2009-04-21T00:45:28.587
> 
> 标签：apache-flex, flash, actionscript-3, graphics

所以我扩展了 Flex 附带的 PlotChart，使其能够绘制趋势线。为此，我必须获取像素位置。如何将 (100px,100px) 以像素为单位转换为图形上的一个点，例如 (0.7,1.0)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T01:18:08.180

您可以使用 CartesianChartCanvas 在图表上绘图，这里是 LiveDoc 的链接：[在图表控件上绘图](http://livedocs.adobe.com/flex/3/html/help.html?content=charts_eventsandeffects_13.html)

为了更具体地回答您的问题，CartesianChartCanvas 支持按像素绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T02:38:18.767

您可能想要创建 ChartElement 的子类，并将其添加到图表的 annotationElements。Flex 2 的文档显示了一个示例：[Livedocs](http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=charts_formatting_110_10.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T16:30:21.707

PlotSeries::dataToLocal(...) 最终工作正常。

# objective-c - 覆盖超类中的方法的 Objective C 子类

> ID：770642
> 
> 赞同：15
> 
> 时间：2009-04-21T00:46:56.210
> 
> 标签：objective-c, overriding, subclass

在Objective C中，如果你正在继承一些东西，并且打算覆盖超类上的方法，你应该在你的子类@interface中重新声明超类方法吗？

例如，如果您正在继承 UIViewController（例如 MyViewController），并且您计划覆盖“viewDidLoad”，您应该在 MyViewController @interface 声明中包含该方法，还是只在 MyViewController.m 中实现它？

在我遇到的示例中，我已经看到它以两种方式完成（在子类接口中重新声明该方法，或者不重新声明该方法）。可能没有任何功能差异，但最佳实践是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-21T00:55:57.377

我经常在公共标头或至少在私有类别中声明我计划覆盖的方法。这样做的好处是，如果您忘记实际覆盖该方法，您将收到一个不完整的类定义警告......这有时会派上用场。

至于**何时**将其放在公共标头中，这是非常主观的，可能取决于您/您的团队的编码风格。如果我打算从根本上改变方法将要做什么，或者如果我打算不调用超类的方法版本，我通常只在公共标头中重新声明一个方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-21T01:25:20.830

人们经常使用标题作为类的文档（AutoDoc 等工具支持这一点）。显然，如果您遵循该约定，唯一明智的选择是包含重新定义的方法，这样您就可以解释您对它们做了什么。否则，您的课程文档要么不完整，要么分散到地球的四个角落。

但是如果我们只是复制粘贴声明，我个人不喜欢重新声明方法。它不是[DRY](http://c2.com/cgi/wiki?DontRepeatYourself)，它会不必要地膨胀你的标题。更少的代码是更好的代码。

# iphone - iPhone SDK 内存管理问题 - EXC_BAD_ACCESS

> ID：770648
> 
> 赞同：0
> 
> 时间：2009-04-21T00:48:59.107
> 
> 标签：iphone, cocoa-touch, crash, memory-management

我长期以来一直在关注同样的问题，非常感谢任何帮助或建议。我确定它很简单，但我似乎找不到它。在我的应用程序委托中，我使用以下代码加载了一堆附件对象（我创建的一个支持 NSCopying 的对象）：

```
NSString     *path    = [[NSBundle mainBundle] pathForResource:@"Accessories" ofType:@"plist"];
NSDictionary *accDict = [[NSDictionary alloc] initWithContentsOfFile:path];

self.colors = (NSArray *) [accDict objectForKey:@"Colors"]; 
self.exteriorAccessories = [self loadAccessoriesForMode:EXTERIOR_MODE withDictionary:accDict];
self.interiorAccessories = [self loadAccessoriesForMode:INTERIOR_MODE withDictionary:accDict];
[accDict release]; 
```

这是它调用的方法的定义：

```
-(NSArray *)loadAccessoriesForMode:(NSString *)mode withDictionary:(NSDictionary *) dictionary
{
    NSMutableArray *tempValues = [[NSMutableArray alloc] init]; 
    for (NSDictionary *value in [dictionary objectForKey:mode])  
    {
        Accessory *accessory = [[Accessory alloc] initWithDictionary:value];
        [tempValues addObject:accessory];
        [accessory release];
    }

    NSArray *returnArray = [[NSArray alloc] initWithArray:tempValues copyItems:YES];
    [tempValues release];
    [returnArray autorelease];

    return returnArray; 
} 
```

当我获得 accDict 的发布时，我遇到了一个`EXC_BAD_ACCESS`例外。如果我在循环内取出附件的释放，一切都很好 - 但我正在泄漏附件对象（这对我来说似乎很明显 - 如果我初始化它并分配它，我的工作就是释放它）。

当我在调试器中逐步执行此操作时，我看到 init、copy 和 dealloc 方法都按预期在我的 Accessory 对象上触发。如果您认为它会有所帮助，我也可以发布 Accessory 对象的代码，但我认为问题出在这段代码的某个地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T02:23:13.093

我想我已经找到了原因，但我会在这里发布，以便其他人可以受益。它与我发布的代码没有任何关系。相反，问题出在 Accessory 对象内部。我是直接设置东西，而不是通过 self 调用 getter。

所以这：

```
value = [dict objectForKey:@"myKey"]; 
```

而不是这个：

```
self.value = [dict objectForKey:@"myKey"]; 
```

不知何故，这导致我对 NSDictionary 本身产生了不良的副作用（我认为这不是可变的，但似乎我在某种程度上把事情搞砸了）。我发现这一点的唯一方法是使用[我在 Cocoa With Love 上找到](http://cocoawithlove.com/2008/10/debugging-tips-for-objective-c.html "Obj-C 编程的调试技巧")的非常有用的建议。

当我在 XCode 中使用 Print Description 选项时，我能够看到 NSDictionary 以某种方式包含 AccessoryValue 对象——我的自定义对象之一不应该存在，因为它只是从一个简单的 plist 加载的。通过将鼠标悬停在对象上以查看其详细信息（当进程在调试器中暂停时）并单击展开为对象详细信息的三角形旁边的小向上/向下箭头，可以在 XCode 中找到打印描述。对于字典，这会将它们的全部内容转储到控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T01:23:57.060

请在前面加上“我对目标 C 一无所知，但是”：

在我看来，您需要在将附件项目复制到“returnArray”后释放它们，或者可能不指定“copyItems”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T01:42:58.777

在您的代码上运行 Clang。这是天赐之物。叮当规则！它将对您的代码进行静态分析，并告诉您可能会泄漏什么。好东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-03T03:10:22.247

我与 Exc_Bad_Access 问题斗争了一天，终于找到了答案。问题是当我尝试访问存储在 NSDictionary 中的一个对象时，第一次是可以的，但第二次访问该对象变成了 nil，即使字典中的对象计数保持不变。这种奇怪的行为是由于两次释放对象造成的。这是一个例子：

NSString* nstring=[[[NSString alloc]init]autorelease] [AnNSDictonaryInstance setObject:nstring forKey:0];

... [nstring 释放];

注意 nstring 被设置为自动释放然后再次释放？它不会立即显示问题单元您尝试第二次阅读字典对象。我希望有一天苹果的开发团队能够在编译时将其标记为违规。

我希望这篇文章能帮助别人。

坎贝尔的韦恩

# c# - 类设计帮助

> ID：770653
> 
> 赞同：1
> 
> 时间：2009-04-21T00:51:05.890
> 
> 标签：c#, asp.net, class-design

我有以下数据库表可以使用，我对 oop 有点陌生，所以我想我会在这里问。

```
assignment
----------
id
person_id
assigned_address_id
position_id

person
----------
person_id
current_address_id
name
ssn
drivers_license

address
---------
id
address_number
address_street
address_city
address_state 
address_zip

position
---------
id
description
rate 
```

我创建了以下类

```
Person Class
int? id
Address currentAddress
string Name
string ssn
string drivers_license

PersonAssignment Class
id
person_id
Address assignedAddress
Position assignedPosition 

Address Class
string address_number
string address_street
string address_city
string address_state 
int address_zip 

Position Class
int? id
string description
double payment_rate 
```

我还为访问 Dal.Repository 并对每个对象执行 crud 方法的每个对象创建了单独的服务类。IE

```
PersonService Class
Update(Person p)
Insert(Person p)
GetListOfPeople()
GetPerson()

PersonAssignmentService Class
Update(PersonAssignment p)
Insert(PersonAssignment p)
GetListOfPeopleAssignments()
GetAssignment() 
```

我也有每个对象的存储库

IE

```
PersonRepository Class
Update(PersonAssignment p)
Insert(PersonAssignment p)
GetListOfPeopleAssignments()
GetAssignment() 
```

在包含人员分配和人员个人详细信息的网页上，我发现自己正在调用 PersonService 和 PersonAssignmentService。

这似乎是很多工作。难道我做错了什么？也许有一种更简单的方法来设计这样的东西，我就是不明白。

谢谢你的帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T01:21:56.360

你需要做的是设计和实现一个数据访问层：

[http://rlacovara.blogspot.com/2009/02/high-performance-data-access-layer.html](http://rlacovara.blogspot.com/2009/02/high-performance-data-access-layer.html)

这篇文章是迄今为止我在描述如何编写数据访问层方面看到的最好的文章。作者描述了您需要创建 DTO（数据传输对象）来将数据从数据访问层移动到业务层（或移动到可以将它们转换为原生应用程序类的另一层）。他提供了基类和代码来帮助您处理数据传输对象、填充 DTO 的代码以及将 DTO 保存到数据库的代码。

该系列共有三篇文章，我建议阅读整套。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T01:13:54.807

数据库设计和类有时可能很难批评，而且很大程度上取决于您的业务规则和您拥有的事务类型。

对于初学者，我不会为一个人的地址创建一个单独的表，也不会创建任何定义地址的特定类。

我不确定您使用的是哪种编程语言，但可能值得您花时间查看 ORM（对象关系映射）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T01:25:00.037

我不是 100% 确定你的网页做了什么，但假设你有一个 PersonAssignment Id 并且你正在从中检索一个 PersonAssignment 对象，然后是 Person 对象本身，以下可能会使它更容易：

在 PersonAssignment 类中，添加一个引用 Person 对象的属性，而不仅仅是一个 person_id。从你的例子：

```
PersonAssignment Class
id
person_id
Person person
Address assignedAddress
Position assignedPosition 
```

在 GetPersonAssignment 方法（我假设它带有一个参数）中，做一些工作来填充 Person 对象。您还需要添加到 Insert 和 Update 方法以考虑到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T01:40:03.573

根据您的规则，每个人似乎只能有一个地址，因此如果有人搬家，您会丢失他的最后一个地址，因为地址表中没有 person_id。

但是，这是吹毛求疵。

如上所述，使用 DAO 是一个绝妙的主意。保持逻辑分开。

我会从编写 DAO 开始，确保它正在做它应该做的所有事情，然后在下一层工作，这样你就可以对数据库进行任何需要的更改。

如果您是 C# 新手，您可能想查看 .NET 3.5 提供的各种工具，因为有许多更改使数据库访问更简单，以抽象出实际数据库。

这样做的一个优点是，您的某些数据源可能来自 XML 文件，并且无论数据源的实际来源如何，您的 DAO 都可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T14:40:30.950

听起来你在一个由其他人设计的框架内工作，你有服务类、存储库和 DAL，现在你拥有所有这些东西，你正在查看一大堆代码并询​​问“isn没有更简单的方法”。简短的回答是肯定的，总有更简单的方法。有多少开发人员，就有多少种不同的方式进行数据访问。您使用的模型相当复杂，听起来它遵循领域驱动设计的原则。DDD 是一种很棒的方法，它提供了出色的关注点分离和高可测试性。但它也需要大量的管道代码，而且大多数.Net 程序员都不太了解它，因此获得帮助可能很困难。我确实认为这是构建企业应用程序的最佳方式，但它

如果您正在做一个小型项目，您可能需要考虑完全绕过 BLL，没有服务类，没有存储库，只需有一个包含实体类的 Common Lib/项目，并构建一个包含直接填充的数据访问方法的 DLL 和保存您的实体。

一个更简单的方法是取消实体类，只让您的 DLL 返回包含您的实体数据的 ADO.Net 数据表。这种方法失去了实体类的强类型，但更容易实现。

另一种方法是使用实​​体框架。EF 将为您完成所有这些工作，并将生成强类型实体类。习惯 EF 确实需要一些时间，但是一旦您了解如何使用它，它可以大大减少您编写持久性代码所花费的时间。有关 EF 的一些好的教程，请查看[Rob Bagby 的博客](http://blogs.msdn.com/bags/archive/tags/Entity+Framework/default.aspx)

# python - Python - 覆盖 print()

> ID：770657
> 
> 赞同：4
> 
> 时间：2009-04-21T00:53:23.043
> 
> 标签：python, python-3.x, mod-wsgi, wsgi

我正在使用 mod_wsgi 并且想知道是否可以覆盖 print() 命令（因为它没用）。

这样做不起作用：

```
print = myPrintFunction 
```

因为这是一个语法错误。:(

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-21T00:56:16.143

Print 在 Python 2.x 中不是一个函数，所以这不是直接可能的。

但是，您可以[覆盖 sys.stdout](http://code.activestate.com/recipes/119404/)。

如果您使用的是 Python 3.0，其中[print 现在是一个函数](http://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function)，那么假设您有正确的签名，您将可以使用它。另请参阅此站点中[的相关问题](https://stackoverflow.com/questions/550470/overload-print-python)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T00:56:06.377

将

```
import sys
sys.stdout = MyFileWrapper() 
```

或类似的工作？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T15:40:05.330

如果您使用的是 3.0，则 print 是一个函数。如果您使用的是 2.6，您可以`from __future__ import print_function`继续使用打印功能。

如果 <= 2.5，您可以像其他人建议的那样替换 stdout，但如果您的 wsgi 服务器会同时在多个线程中调用您的应用程序，请务必小心。您**最终**将通过同一管道发送同时请求。

我还没有测试过，但你可以尝试这样的事情：

```
import sys
import threading

class ThreadedStdout(object):
    def __init__(self):
        self.local = threading.local()
    def register(self, fh):
        self.local.fh = fh
    def write(self, stuff):
        self.local.fh.write(stuff)

sys.stdout = ThreadedStdout()

def app(environ, start):
    sys.stdout.register(environ['wsgi.stdout'])

    # Whatever. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-24T11:43:58.320

值得注意的是，在 Apache/mod_wsgi 中对 sys.stdout 使用“打印”是故意限制的。这是因为可移植的 WSGI 应用程序不应使用 sys.stdin 或 sys.stdout，因为某些 WSGI 实现使用它们与服务器通信。

因此，Apache/mod_wsgi 试图强迫您编写 WSGI 应用程序，以便将其移植到其他 WSGI 实现。

不幸的是，似乎有太多人不关心编写好的代码，因此 mod_wsgi 3.0 将允许您写入 sys.stdout 并因此使用 'print' 而不会像您应该做的那样将输出重定向到 'sys.stderr'。

无论哪种方式，mod_wsgi 文档都详细说明了如何在 3.0 之前的 mod_wsgi 版本中删除限制。特别是，请参阅有关 WSGIRestrictStdout 指令的文档。有关调试技​​术的文档还讨论了该问题以及将 sys.stdout 映射到 sys.stderr。

您可以在以下位置阅读总结此问题的评论：

[http://blog.dscpl.com.au/2009/04/wsgi-and-printing-to-standard-output.html](http://blog.dscpl.com.au/2009/04/wsgi-and-printing-to-standard-output.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-30T08:49:04.943

虽然您可以将标准输出重定向到不同的来源，例如用于记录的文件，正如 Paolo 所提到的，但您可能不需要它。我不需要它。如果你真的需要记录东西，你会首先使用记录本身，不是吗？此外，即使**您**不打印任何东西，您使用的第三方库也可能会打印。只需重定向它并开始。

解决这个问题最简单的方法是将所有标准输出重定向到标准错误。在 wsgi 配置文件中，根据需要进行重定向。

```
sys.stdout = sys.stderr 
```

# javascript - 在 Chrome 上执行多个选择器时，jQuery 中的 INVALID_NODE_TYPE_ERR

> ID：770669
> 
> 赞同：2
> 
> 时间：2009-04-21T00:57:27.357
> 
> 标签：javascript, jquery, google-chrome, webkit

我正在做一个 jQuery 多选择器查找：

```
element.find("fieldset, input[type=hidden], input[type=text], :radio") 
```

[在 Chrome 版本 1 中，它在jquery 的 selector.js 的第 722 行](http://dev.jquery.com/browser/trunk/jquery/src/selector.js#L722)给出了这个错误“INVALID_NODE_TYPE_ERR：DOM Range Exception 2”

```
aRange.selectNode(a); 
```

在上下文中：

```
function(a, b) {
    var aRange = a.ownerDocument.createRange(), bRange = b.ownerDocument.createRange();
    aRange.selectNode(a);
    aRange.collapse(true);
    bRange.selectNode(b);
    bRange.collapse(true);
    var ret = aRange.compareBoundaryPoints(Range.START_TO_END, bRange);
    if (ret === 0) {
        hasDuplicate = true;
    }
    return ret;
} 
```

在这种情况下，`a`是一个 HTML 隐藏输入字段。据我所知，这*似乎*是旧 webkit 版本的问题，因为这个错误不会发生在新的 Chrome 测试版中（可能是因为它实现了[selector.js#703](http://dev.jquery.com/browser/trunk/jquery/src/selector.js#L703)`document.documentElement.compareDocumentPosition` ，所以它从来没有遇到过这个代码）。

为了解决这个问题，我用四个单选替换了多选器，我将它们合并在一起，效果很好，但它真的很难看：

```
elements = element.find('fieldset')
.add(element.find('input[type=hidden]'));
.add(element.find('input[type=text]'));
.add(element.find(':radio')); 
```

这真的是解决这个问题的唯一方法，还是我能做些什么？

**更新**在 Sizzle 讨论论坛上有一个[关于此的线程](http://groups.google.com/group/sizzlejs/browse_thread/thread/f8858e82cd886b56)，已经发布了 Sizzle（jQuery 选择器）代码的可能补丁，这可能会进入 jquery 核心。在动态代码上执行多个选择器时，这似乎只是一个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T01:44:10.287

如果问题出在网络浏览器上，那么遗憾的是，您只能等待更新，或者使用多个选择器并合并结果集。从它的外观来看，这根本不会对性能造成很大的影响，因此我不会担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T02:12:12.217

你有没有尝试过...

```
element.find(['fieldset', 'input[type=hidden]', 'input[type=text]', ':radio']) 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T03:41:09.037

作为参考，整个 DOM 和渲染只是 Apple 的 WebKit，所以你看到的任何错误都应该报告给[http](http://bugs.webkit.org) ://bugs.webkit.org——Chrome 没有自己独特的引擎。

# php - 这个在线教程是否是出于学习原因创建 PHP5 框架的良好起点？

> ID：770670
> 
> 赞同：0
> 
> 时间：2009-04-21T00:57:59.337
> 
> 标签：php, model-view-controller, frameworks

我在网上找到了这个教程

[http://net.tutsplus.com/tutorials/php/creating-a-php5-framework-part-1/](http://net.tutsplus.com/tutorials/php/creating-a-php5-framework-part-1/)

我为自己创建了一个简单的框架，但我并不太了解我是否遵循了最佳实践等……我真的很想做。

我正在考虑通过 MVC 模式使我的框架更加统一。似乎我已经*遵循*了这些原则，但是直到我可以说我的框架逐字遵循设计（并且可以在需要时被其他开发人员轻松获取）之前我不会高兴。

我的问题是，这个在线教程是一个很好的起点吗？我将 PHP5 与 Apache 一起使用。

请注意，我不是在寻找“为什么要重新发明轮子”类型的答案，我这样做是为了乐趣和学习经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T01:10:09.230

亚历克斯，我必须说我没有读过这篇文章，请不要误会，但我认为了解自己框架的缺点或确定它是否符合某些标准的最好方法是打开它up - 使其开源 - 并让其他开发人员参与其中。他们会很快抱怨或指出缺陷。

即使您创建此框架的唯一目标是学习，我认为您也可以从代码审查中受益。还有什么比邀请其他人加入你的“任务”更好的方式来获得代码审查。

这样，您还应该有机会挑战其他代码，并可能提出问题以找出他们以某种方式编写代码的原因。

我希望你会发现这至少有点帮助；）

Ps 我现在要看看那个链接..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T01:33:44.243

我还没有阅读您引用的文章，但是确定您的框架是否有用的一种方法是尝试以与以前不同的方式使用它。

您可能想试验一下何时在 PHP 中使用类，何时不使用，因为它不是一刀切的。

您可能希望尝试不将您的业务逻辑与您的 html 绑定在同一个 php 文件中，但如果您想遵循良好的 MVC 实践，请将它们分开。

祝你好运。:)

# .net - PHP 前端和 .NET/Java 后端通过 XML-RPC 交互：性能考虑

> ID：770685
> 
> 赞同：0
> 
> 时间：2009-04-21T01:10:49.710
> 
> 标签：.net, php, asp.net, xml-rpc

我实现了一个由基于 ASP.NET 的 .NET 后端应用程序构成的解决方案：因为我正在考虑构建的团队应该由我和一两个使用 PHP 的前端开发人员组成。

这种架构的一个好的副作用是 PHP 是一个快速的服务器端脚本引擎，它比 ASP.NET 需要更少的资源。

我发现允许两层通信的唯一解决方案是通过 XML-RPC，这是两个系统都支持的协议（尽管后端部分是由我实现的）。这种方法的一个问题是 XML-RPC 不支持任何身份验证系统，并且在对象表示法和 XML 表示之间的序列化/反序列化方面缺乏一些性能。

有没有人考虑或替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T01:31:06.183

如果您的应用程序允许，您可以尝试使用 JSON。JSON = Javascript 对象表示法。这是一种用于描述对象的非常轻量级的语法。我只是在我刚刚完成的一个项目中使用它通过 ajax 请求将数据从 php 服务器传输到客户端 javascript。这需要一点时间来适应，但是一旦你弄清楚了，你可能会发现它更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T01:46:27.317

我同意 JSON 可能是传递数据的绝佳方法，但要从 PHP 转到 .NET，您可能只想使用 xml，因为这样您就可以使用 XML LINQ，这可能会使解析更简单。

然后，您可以通过 http 连接或 web 服务来回通信，具体取决于数据流动的方式，但我希望它将从 PHP -> .NET 流动，因此您可以尝试使用 WCF 来传递数据，使用 REST 架构，不过PHP 也可以进行 Web 服务客户端调用。

如果您使用 JSON 从 .NET 进行通信或使用 Web 服务响应，那么您可以在两个框架之间实现良好的解耦。

# qt - 在 QTableView 中显示行中所有单元格的编辑器

> ID：770686
> 
> 赞同：3
> 
> 时间：2009-04-21T01:11:22.860
> 
> 标签：qt, qt4

当用户开始编辑`QTableView`. 我做了几次尝试，但我无法获得正确的行为。

*   打开多个编辑器的唯一方法是`QAbstractItemView::openPersistentEditor()`尝试`QAbstractItemView::edit()`在一个编辑器中连续调用结果。
*   我不能使用诸如`clicked()`和`doubleClicked()`from之类的信号`QAbstractItemView`来调用编辑，因为那样它就不会尊重视图的编辑触发器。
*   似乎没有“编辑完成”信号。我想将此信号连接到一个需要`closePersistentEditor()`编辑行中单元格的插槽。

任何建议，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T18:14:53.617

我讨厌成为坏消息的传递者，但我想不出任何简单的方法来做你想做的事。我能想到几个选项，每一个都比上一个更痛苦：

*   您可以创建一个始终显示编辑器的委托，当用户更改所选行时，为新选择的行设置该委托，为取消选择的行设置原始委托。
*   您可以尝试从表视图继承，并覆盖为给定行中的所有内容绘制适当项目的行为。我不知道这会有多难，但我怀疑这将是微不足道的。
*   您可以创建自己的视图来显示模型。我从来没有这样做过，我不想考虑“完成”支持模型所需的一切。但是，为了匹配一个特定的模型，您也许可以摆脱它。

# php - PHP 中的 trigger_error() 是否因 PHP5 中的更好而被弃用？

> ID：770694
> 
> 赞同：4
> 
> 时间：2009-04-21T01:16:11.117
> 
> 标签：php, error-handling

当我想触发来自 PHP4 背景的 PHP 错误时，我曾经使用它。请注意，我有自己的`set_error_handler()`方法来处理这些错误。

```
if ($error) {
    trigger_error('Sorry, error has occured');
} 
```

我不记得在哪里，但前一段时间有人告诉我应该“使用异常”。由于我正在重构很多旧代码，我认为现在是时候就我的错误处理实现获得一些好的建议了。

现在我正在使用 PHP5（并且比我编写旧代码时更聪明），我`trigger_error()`只是一种旧的做事方式，如果是这样，在 PHP5 中处理错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T01:20:11.420

是的，您可能想开始研究 PHP 5 异常模型。请记住，仅仅因为某些东西是新的并不意味着您必须采用它。仅采用您需要并在您的领域中有意义的那些功能。

话虽如此，我觉得例外是一个很好的概念，即使您决定不采用它们，您也会获得更好的体验。

我建议您阅读[PHP: Exceptions - Manual](http://us2.php.net/exceptions)：

> PHP 5 具有类似于其他编程语言的异常模型。可以抛出异常，并在 PHP 中捕获（“捕获”）。代码可能会被包围在一个 try 块中，以便于捕获潜在的异常。每个尝试必须至少有一个对应的 catch 块。可以使用多个 catch 块来捕获不同类别的异常。正常执行（当 try 块中没有抛出异常，或者当不存在与抛出的异常的类匹配的 catch 时）将在按顺序定义的最后一个 catch 块之后继续。可以在 catch 块内抛出（或重新抛出）异常。

我还鼓励您阅读[什么是例外？](http://java.sun.com/docs/books/tutorial/essential/exceptions/definition.html)（注意这是一个 Java 教程，但概念是通用的）

> 当方法中发生错误时，该方法会创建一个对象并将其交给运行时系统。该对象称为异常对象，包含有关错误的信息，包括错误的类型和发生错误时程序的状态。创建异常对象并将其交给运行时系统称为抛出异常。

**编辑：**为了实现一个全局异常处理程序（基本上是为了建立一个默认的异常处理程序来处理以前未处理的异常），您需要使用该[`set_exception_handler`](http://www.php.net/set_exception_handler)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T01:24:18.320

使用异常是触发和处理您自己的应用程序错误的面向对象方式。

[关于异常](http://www.php.net/manual/en/language.exceptions.php)的 PHP 手册主题可能是一个很好的起点。

这是一个小例子：

```
function doSomething() {
    if ($error) {
        throw new Exception('Some descriptive error message.');
    }
}

try {
    doSomething();
}
catch (Exception $e) {
    die('<p class="error">' . $e->getMessage() . '</p>');
} 
```

# .net - Linq To SQL 多对多

> ID：770702
> 
> 赞同：1
> 
> 时间：2009-04-21T01:21:18.157
> 
> 标签：.net, linq-to-sql

我想知道如何为具有多对多关系的实体保存新关联。

我有 3 张桌子：

```
Partner -
 -- ParnterID
 -- ParnterName
 -- Etc

PartnerRegion
 -- PartnerRegionID
 -- RegionID
 -- PartnerID

Region
 -- RegionID
 -- RegionName
 -- Etc 
```

我创建了实体，当我在生成的 linq-to-sql 代码中查看它们时，关联出现在我的实体中。然后我在数据库中查询合作伙伴：

```
_context.Partners.Where(x => x.PartnerID == 12345); 
```

然后我想清除 PartnerRegions 的所有关联，然后从 UI 收集的信息中添加一些。

那个代码会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T01:27:07.817

像这样的东西应该工作：

```
var p = _context.Partners.Where(x => x.PartnerID == 12345);
p.PartnerRegions.Clear();

Loop over UI elements
  p.PartnerRegions.Add(new PartnerRegion() { property = value } );
End loop 
```

# silverlight - Silverlight 2 动态数据绑定转换器

> ID：770704
> 
> 赞同：0
> 
> 时间：2009-04-21T01:22:04.130
> 
> 标签：silverlight, xaml, dynamic, binding, converter

在银光 2....

我的 xaml 代码中有一个 RadioButton，如下所示：

```
<RadioButton GroupName="Gender" Content="Male" IsChecked="{Binding Path=Gender, ConverterParameter=1, Mode=TwoWay, Converter={StaticResource RadioStringConverter}}" Width="49" HorizontalAlignment="Left"/> 
```

这很好用。我的问题是尝试动态复制此功能。

```
RadioButton rb = new RadioButton() {GroupName = "Gender", Content = "Male" ,Width = (double)49,HorizontalAlignment = System.Windows.HorizontalAlignment.Left}; 
```

这可行，但是当我尝试将转换器放入时，它会损坏。这样做的正确方法是什么？有什么好的工作例子吗？

这是我尝试过的......

```
RadioButton rb = new RadioButton() {GroupName = "Gender", Content = "Male" ,Width = (double)49,HorizontalAlignment = System.Windows.HorizontalAlignment.Left};

RadioStringConverter rsc = new RadioStringConverter();

Binding binding = new Binding(layout.FieldName) { Source = mainLayout.DataContext, Mode = BindingMode.TwoWay,ConverterParameter = 1,Converter = rsc};  // to emulate the "{StaticResource RadioStringConverter}"};

rb.SetBinding(RadioButton.IsCheckedProperty, binding);

sp.Children.Add(rb); 
```

虽然这编译得很好，但它不能正确运行。1）如何动态引用静态资源？2) 如何将此静态资源动态添加到 XAML？现在我有这个参考硬编码。

我是否让这变得比需要的更困难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T19:16:26.747

找到解决方案....基本上我必须创建转换器类的实例并将其接口传递给转换器，如下所示：

```
Binding binding = new Binding(layout.FieldName) { Source = mainLayout.DataContext, Mode = BindingMode.TwoWay,ConverterParameter = 1,Converter = (rsc as IValueConverter)}; 
```

很高兴它变得简单可行:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T19:25:11.750

尽管有可能，但正如您所发现的，您确定要动态创建 RadioButton 吗？

我去过那里......我写了完全相同的代码......但我很快意识到我做错了。在我的例子中，我使用了 ItemsControl，并使用模板绑定了这些值……完全消除了我自己动态创建它们的需要。

我显然不知道更大的上下文，但请考虑您是否应该使用某种动态容器以更具声明性的方式执行此操作。

实际上，在我发现 MVVM 之后，我完全消除了 UI 层对数据转换器的需求。数据转换器已过时 MVVM :)

# php - PHP 的 FILEINFO_MIME 选项返回空字符串

> ID：770705
> 
> 赞同：2
> 
> 时间：2009-04-21T01:23:23.643
> 
> 标签：php, mime-types, file-upload

我正在尝试在我的 PHP 应用程序中检查上传文件的 MIME 类型。我上传文件，然后执行此操作，其中 $file 是我的文件的路径：

```
$finfo = new finfo(FILEINFO_MIME);
$mimetype = $finfo->file($file); 
```

在这种情况下，$mimetype 始终是一个空字符串。我已经对几种文件类型（.jpg、.doc、.txt、.pdf）进行了测试，但它始终为空。它应该返回类似“image/jpeg”的东西。

我正在调试并更改了第一行，因此代码片段现在是这样的：

```
$finfo = new finfo(FILEINFO_NONE);
$info = $finfo->file($file); 
```

在这种情况下，当我上传 jpg 时，$info 是这样的：JPEG 图像数据，JFIF 标准 1.02。所以现在我知道它可以正确地访问文件，但是传入 FILEINFO_MIME 并没有给我正确的 mime 字符串。

这只发生在我的登台服务器上。在我的本地服务器上，我得到了正确的 mime 类型。有谁知道为什么我的登台服务器为 mime 类型返回一个空字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T01:36:00.510

我想知道魔术文件是否正确放置在您的服务器上。

> magic_file
> 魔术数据库文件的名称，通常类似于 /path/to/magic.mime。如果未指定，则使用 MAGIC 环境变量。如果此变量也未设置，则默认使用 /usr/share/misc/magic。如果需要，可以添加 .mime 和/或 .mgc 后缀。

由于您可以通过最后一个参数指定自己的文件

```
$finfo = new finfo(FILEINFO_MIME, "/usr/share/misc/magic"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:15:23.633

您是否尝试[过手册](http://php.net/manual/en/function.finfo-file.php)中的示例：

```
<?php
$finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension

   echo finfo_file($finfo, $filename) . "\n";

finfo_close($finfo);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T01:31:49.240

尝试这个：

```
<?php
$fi = new finfo(FILEINFO_MIME,'/usr/share/file/magic');
$mime_type = $fi->buffer(file_get_contents($file));
?> 
```

# java - Groovy + JPA + Spring 不工作

> ID：770709
> 
> 赞同：0
> 
> 时间：2009-04-21T01:25:19.067
> 
> 标签：java, spring, jpa, groovy

我有以下java类：

```
package domain;

//imports

@Entity
public class User {

    @Id @GeneratedValue
    private long id;

    private String name;
    private String password;
    private String mail;
    //Getters, Setters and Constructors
} 
```

当我将文件扩展名更改为 .groovy 时，应用程序停止工作。事实上，它抛出了这个堆栈跟踪：

> org.springframework.dao.InvalidDataAccessApiUsageException：未知实体：domain.User；嵌套异常是 java.lang.IllegalArgumentException: Unknown entity: domain.User

我正在阅读[这本书](https://rads.stackoverflow.com/amzn/click/com/0978739299)，作者指出任何 groovy 类都可以代替 java 类，只需更改其扩展名即可。那么为什么 spring 和 JPA 不能识别我的 groovy 类呢？

有没有人成功使用过这项技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T17:40:40.267

这里没有很多信息，所以有时间猜测。

似乎 Spring 找不到 User.class 文件。Groovy 和 Java 编译器可能有不同的输出路径，并且 Groovy 输出路径可能不在您的类路径或部署集中。

检查你的战争，里面有 User.class 吗？它在 WEB-INF/classes/domain 中吗？如果不是，则 Groovy 输出文件夹似乎不在您的部署中。尝试更改 Groovy 输出文件夹以匹配您的 Java 输出文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T04:02:38.410

Groovy (.groovy) 和 Java (.java) 源文件都将编译为字节码 (.class) 文件。无需重命名文件扩展名。

如果您有 groovy 代码，则需要使用 groovy 编译器生成 .class 文件，就像 .java 文件将使用 javac 生成 .class 文件一样。

这似乎不是 JPA 或 Spring 问题。

# code-signing - signcode.exe 和 signtool.exe 之间的主要区别是什么？

> ID：770711
> 
> 赞同：20
> 
> 时间：2009-04-21T01:25:32.343
> 
> 标签：code-signing

除了 signtool 更新并且您的数字证书需要不同的文件格式之外，我真的看不出有什么大的区别？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-21T01:41:55.423

他们都完成了同样的事情——代码签名。正如您所指出的，主要区别在于`signcode`要求私钥和软件发布者证书位于两个单独的文件（.pvk、.spc）中。

更现代的`signtool`要求它们包含在单个个人信息交换 (.pfx) 文件中。（您还需要 .pfx 文件格式才能使用共享软件专业协会的 PAD 签名工具包。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-17T17:34:44.943

除了上面 John Feminella 的回答之外，如果将证书加载到本地（用户或机器）证书存储中，signtool 还允许您提供证书的指纹哈希而不是 .pfx 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-27T06:23:01.763

主要区别在于 SignCode 可以作为 Windows GUI 运行并且可以按需配置，而 SignTool 可以从 CMD 提示符或 .bat 文件中运行。

# asp.net-mvc - ASP.NET MVC：JsonResult 方法是否需要 Bind 属性？

> ID：770718
> 
> 赞同：0
> 
> 时间：2009-04-21T01:29:37.920
> 
> 标签：asp.net-mvc

我知道这个 Bind 属性不是必需的，但是没有它 JSON 类型就不能绑定。我在这里想念什么？我正在运行 RC1。

编辑：

这应该有效：

```
public JsonResult Index(Person person)
{
    do something with person.
} 
```

但除非我这样做，否则它不适用于某些控制器操作：

```
public JsonResult Index([Bind(Prefix="")]Person person)
{

} 
```

第一个对象是无效的。

jQuery 阿贾克斯：

```
 $.ajax({
               type: "POST",
               url: "/Index/Person",
               data: { PersonID: personID, Name: name },
               dataType: "json",
               success: function(data) {..}

       }
     }
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-30T18:38:56.623

一般来说，模型绑定不需要 Bind 属性。但是，您的问题没有为任何人提供足够的细节来判断实际问题是什么。如果您尝试将 JSON 发布*到服务器*，那么这些都不起作用。默认模型绑定器仅将发布的表单值绑定到操作方法的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T21:17:16.057

下面的代码对我有用。

另外，只是为了检查一下，你确定你至少有 RC1 版本的 MVC 吗？MVC 的早期预览确实需要 Bind 属性，但在 RC1 中进行了更改，以使 [Bind] 属性对于常见情况来说是不必要的。有关详细信息，请参阅[此帖子](http://weblogs.asp.net/scottgu/archive/2009/01/27/asp-net-mvc-1-0-release-candidate-now-available.aspx)。

Javascript代码：

```
$(function() {
    $("#result").text("Calling Ajax...");
    $.ajax({
        type: "POST",
        url: "/Home/Person",
        data: { Name: "Erv Walter", PersonID: "123" },
        dataType: "json",
        success: function(data) {
            $("#result").text(data.Name);
        }
    });
}); 
```

在 HTML 中使用这个：

```
<div id="result" /> 
```

控制器代码：

```
[AcceptVerbs("POST")]
public JsonResult Person(Person person)
{
    person.Name = person.Name.ToUpper();
    return Json(person);
} 
```

Person 类看起来像这样：

```
public class Person
{
    public string Name { get; set; }
    public string PersonID { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T22:19:58.720

先做一些健全性检查。你可能拥有大部分，如果不是全部的话，但如果没有更多的代码，我们就会陷入困境：

你`[AcceptVerbs(HttpVerbs.Post)]`的动作有过滤器吗？`Person`也尝试标记`[Serializable]`。你`Person`看起来像什么？它有默认构造函数吗？默认构造函数中是否发生了任何可能导致出错的事情？确保您在属性上使用完全相同的拼写`Person`

尝试做一个不用`Person`作参数的动作：

```
[AcceptVerbs(HttpVerbs.Post)]
public JsonResult Index(int PersonID, string Name) {} 
```

或接`FormCollection`电话`UpdateModel()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-07T01:20:29.073

问题是参数变量名称与对象中的变量名称相同（但小写）。

# linq-to-sql - 在没有存储过程的情况下在 Linq2Sql 中返回多个结果？

> ID：770722
> 
> 赞同：1
> 
> 时间：2009-04-21T01:32:31.297
> 
> 标签：linq-to-sql, multiple-records, multiple-results

我想用一个 Linq2Sql 查询从一个简单的数据库表中返回两个记录集。如果这是使用 Linq2Sql 调用存储过程，我知道该怎么做，但我不想使用存储过程。

### 有可能做到吗？

我在[这里找到了一篇](http://tonesdotnetblog.wordpress.com/2008/07/23/linq-to-sql-batches-and-multiple-results-without-stored-procedures-by-tony-wright/)有建议解决方案的文章，但我讨厌必须编写大量代码来部分扩展当前上下文的想法？！就像...哎哟！

*只是似乎……对吧？*

文章中的建议是唯一的方法吗？还有其他方法（不使用存储过程，仍然使用Linq2Sql）吗？

希望[马特沃伦](http://blogs.msdn.com/mattwar/)能在这里回答这个问题:)

### 编辑

我不是在问如何延迟加载/急切加载（以及使用 DataLoadOptions）。那是一个不同的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T01:45:03.427

您可能会使用我在[此页面](http://msdn.microsoft.com/en-us/library/bb386929.aspx)中找到的多个活动结果集 (MARS) 来执行此操作。这是一篇关于该主题的[MSDN 文章](http://msdn.microsoft.com/en-us/library/cfa084cz.aspx)，但与 LINQ to SQL 没有具体关系，但是[这篇](http://www.atrevido.net/blog/2008/09/16/MARS+Is+Casesensitive+For+LINQtoSQL.aspx)文章确实涉及到，并且可能是您想要查看的文章。

话虽如此，祝你好运，因为看起来微软[发布](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=366444)了一个关于它如何不起作用的错误，并且直到 .NET 4.0 才会出现修复！

最后，我知道您说您不想使用存储过程，但如果您这样做了，我在[这里](http://blogs.msdn.com/swiss_dpe_team/archive/2008/02/04/linq-to-sql-returning-multiple-result-sets.aspx)和[这里](http://www.thinqlinq.com/default/Using-LINQ-to-SQL-to-return-Multiple-Results.aspx)找到了一个非常简单的指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T01:43:38.557

这是我听说它在没有存储过程的情况下完成的唯一方法。你是对的，对于一个看似简单的概念来说，这似乎有点过分。如果是我，我只是将记录作为单独的结果集获取。

# version-control - 在 TFS 源代码管理中移动多个文件

> ID：770726
> 
> 赞同：178
> 
> 时间：2009-04-21T01:36:43.267
> 
> 标签：version-control, tfs

我正在使用 Team Foundation Server 2008 (SP 1)，我需要将多个文件从一个文件夹移动到另一个文件夹（以保留文件历史记录）。除了 Team Explorer（带有 SP 1），我还安装了最新的 TFS Power Tools（2008 年 10 月）（用于 Windows Shell 集成）。

现在，问题是我似乎无法通过 shell 或源代码管理资源管理器窗口选择和移动多个文件。我可以移动单个文件（通过右键单击+“移动”），我可以移动整个文件夹（相同的操作），但是当我选择多个文件（在一个文件夹中）时，“移动”上下文项是灰色/禁用的。

有谁知道这是否可能.. 如果没有.. 为什么不呢！？

任何人都可以提出一个不太复杂的解决方法吗？

**请在这里投票：** [https ://connect.microsoft.com/VisualStudio/feedback/details/715041/support-moving-multiple-files-in-tfs-source-control-explorer](https://connect.microsoft.com/VisualStudio/feedback/details/715041/support-moving-multiple-files-in-tfs-source-control-explorer) **和这里** [http://visualstudio.uservoice。 com/forums/121579-visual-studio/suggestions/2271540-allow-to-move-more-than-one-file-at-once-in-tfs-so](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2271540-allow-to-move-more-than-one-file-at-once-in-tfs-so)

![在此处输入图像描述](https://i.stack.imgur.com/QQWi4.png)

![在此处输入图像描述](https://i.stack.imgur.com/8t53e.png)

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2009-04-21T14:01:40.827

使用 Visual Studio 命令行中的 tf.exe 工具 - 它可以处理通配符：

```
tf.exe move <olditem> <newitem> 
```

例子：

```
tf.exe move "$/My Project/V*" "$/My Project/Archive" 
```

[编辑] 如评论中所述：移动是重命名的别名。这两个命令都会移动历史。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2011-03-17T09:59:49.213

使用**重命名**而不是**移动**

```
tf.exe rename "$/PROJECT/SharedLibs/Log4Net/*.*" "$/PROJECT/SharedLibs/3rdParty/"
tf.exe rename "$/PROJECT/SharedLibs/ZipLib/*.*" "$/PROJECT/SharedLibs/3rdParty/" 
```

查看帮助文档：[TFS 命令行参考](http://dotbert.loedeman.nl/tfs-command-line-tfexe)

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-09-02T06:44:44.767

Holan Jan 编写了一个 Visual Studio 扩展，它为源代码管理资源管理器中的多个文件提供“移动”功能（即使用 GUI），这是一种享受，还支持最新版本。

对于 VS2019：[https ://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-2019](https://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-2019)

对于 VS2017：[https ://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-18397](https://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-18397)

对于 VS2015：[https ://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-13343](https://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-13343)

对于 VS2013：[https ://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-11508](https://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-11508)

对于 VS2012：[https ://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-8896](https://marketplace.visualstudio.com/items?itemName=HolanJan.TFSSourceControlExplorerExtension-8896)

在引擎盖下，它确实使用了上面提到的相同命令，但使用起来更友好一些。列出的每个版本都需要 RTM 版本的 Visual Studio。

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2010-02-08T10:03:57.207

将您要移动的所有文件粘贴在一个文件夹下，然后移动该文件夹。

# cocoa - 如何安全地写入 Cocoa 中的给定文件路径，并在必要时添加数字后缀？

> ID：770727
> 
> 赞同：5
> 
> 时间：2009-04-21T01:38:33.200
> 
> 标签：cocoa, file, naming

我们想写入给定目录中的“foo.txt”。如果“foo.txt”已经存在，我们要写入“foo-1.txt”，以此类推。

有一些代码片段试图回答这个问题，但没有一个是非常令人满意的。例如[，CocoaDev 的这个解决方案](http://www.cocoadev.com/index.pl?SafelyNamingFiles)使用 NSFileManager 来测试路径是否存在以创建安全路径。但是，这会导致获取路径和写入路径之间出现明显的竞争条件。尝试原子写入会更安全，并在失败时循环数字后缀。

去吧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T02:09:59.803

使用带有和选项的`open`系统调用。如果文件不存在，将创建它，打开它，并将文件描述符返回给您；如果确实存在，将失败并设置为.`O_EXCL``O_CREAT``open``open``errno``EEXIST`

从那里，应该很明显如何构造循环尝试递增文件名，直到它返回文件描述符或构造太长的文件名。在后一点上，请确保您检查`errno`失败的`open`时间——<code>EEXIST，`ENAMETOOLONG`这只是您可能遇到的两个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T02:25:22.247

```
int fd;
uint32_t counter;
char filename[1024]; // obviously unsafe

sprintf(filename, "foo.txt");
if( (fd = open(filename, O_CREAT | O_EXCL | O_EXLOCK, 0644)) == -1 && errno == EEXIST ) 
{
    for( counter = 1; counter < UINT32_MAX; counter++ ) {
      sprintf(filename, "foo-%u.txt", counter);
      if( (fd = open(filename, O_CREAT | O_EXCL | O_EXLOCK, 0644)) == -1 && errno == EEXIST )
        continue;
      else
        break;
    }
}

if( fd == -1 && counter == UINT32_MAX ) {
    fprintf(stderr, "too many foo-files\n");
} else if( fd == -1 ) {
    fprintf(stderr, "could not open file: %s\n", strerror(errno));
}

// otherwise fd is an open file with an atomically unique name and an
// exclusive lock. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T09:06:54.013

怎么样：

1.  将文件写入您知道没有冲突风险的临时目录
2.  使用 NSFileManager 将文件移动到首选目的地
3.  如果步骤 3 由于文件已存在而失败，请添加/增加数字后缀并重复步骤 2

您将基本上重新创建 Cocoa 的原子文件写入处理，但添加了确保唯一文件名的功能。这种方法的一大优点是，如果断电或您的应用程序在写入过程中崩溃，半成品文件将被隐藏在 tmp 文件夹中并被系统删除；没有留给用户尝试和使用。

# c++ - 鼠标悬停在 Qt 中的透明度上

> ID：770728
> 
> 赞同：2
> 
> 时间：2009-04-21T01:39:38.970
> 
> 标签：c++, qt, transparency, mouseover, opacity

我正在尝试使用 Qt4.5 在 Qt/C++ 中创建一个应用程序，并希望任何活动窗口在鼠标悬停事件上更改不透明度...

据我了解，Qt 中没有明确的鼠标悬停事件。

但是，通过在声明我的主窗口的类中重新实现 QWidget 的 mousemoveevent()，我得到了基本功能。但是，只要鼠标经过我在其中创建的任何组框，就不会调用主窗口的 mousemoveevent（可以理解，因为 QGroupbox 有自己的 mousemoveevent 重新实现）。

因此，作为一种廉价的解决方法，我仍在使用主窗口的 mousemoveevent，但查询全局鼠标位置并基于主窗口的 (x,y) 位置（通过 ->pos() 获得）和窗口大小（ -> 大小 -> rHeight 和 rWidth），我检查鼠标是否在主窗口区域的范围内并因此更改不透明度。

这取得了非常有限的成功。右边框工作正常，左边框提前 4 个像素改变不透明度。顶部不起作用（可能是因为鼠标穿过菜单栏和标题栏）并且底部更改得太早了。

我想创建一个空容器 QWidget 类，然后将所有其余部分放在那里，但我觉得如果它已经在子小部件中实现，它仍然无法解决基本小部件不接收 mousemoveevent 的大问题。

***请提出我在我的方法中所做的任何更正/错误或任何替代方法来实现这一点。***

ps 我怀疑这很重要，但我正在使用 Qt Creator IDE，而不是 Qt 集成到 VS2008 中（无论如何它是相同的类 - 虽然不同的编译器，*mingw*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T02:40:27.187

为您的每个子小部件安装事件过滤器可能会起到作用。这将允许您的主窗口接收子事件，例如来自您的分组框的事件。[您可以在此处](http://doc.trolltech.com/4.5/qobject.html#eventFilter)找到示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T02:48:27.510

您可能对事件过滤器感兴趣。QObject 证明了一种拦截应用程序周围所有事件的方法。

[http://doc.trolltech.com/4.5/eventsandfilters.html#event-filters](http://doc.trolltech.com/4.5/eventsandfilters.html#event-filters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T02:52:19.140

If I understand what you are attempting to do, I would reimplement the widget's enterEvent() and leaveEvent(). The mouse enter event would trigger the fade-in and the leaveEvent would trigger the fade-out.

EDIT: After re-reading several times, I'm still not sure what you are trying to accomplish. Sorry if my suggestion doesn't help. :-)

# nhibernate - NHibernate 组件映射 - 空组件

> ID：770741
> 
> 赞同：15
> 
> 时间：2009-04-21T01:44:53.280
> 
> 标签：nhibernate, fluent-nhibernate

我有一个映射实体 Matter，它有一个映射组件 Injury。

Injury 的唯一属性是 DateOfInjury，它是一个可以为空的日期时间。

当我检索物质时，如果 DateOfInjury 为空，则该组件为空。

因此像这样的事情。Injury.DateOfInjury 会抛出。

有人可以解释我是否正在做一些明显的事情来导致这种行为吗？

我本来希望 Injury 组件被 nHibernate 初始化为一个对象，并且 DateOfinjury 属性为空。

我认为这会更灵活吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T01:50:24.157

我认为这是组件映射的默认行为。组件的 NHibernate 文档说，如果组件的所有元素都为 null，则组件本身将为 null。

如果组件中只有一个属性，则将其映射为 Matter 类上的可为空的 DateTime 属性可能是有意义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-10-09T17:25:27.853

我也遇到了同样的问题，即期望 NHibernate 初始化我的组件，即使它的所有成员在数据库中都是空的。我在这个实现背后的动机是将尽可能多的关于我的组件的逻辑移动到组件中，而不必处理它是否为空。

感谢这篇文章，我寻找解释为什么我的单元测试对组件内的所有空值都失败的原因很短。`ArrivalDay`我通过扩展我的组件类的自动属性并在分配 null 时自己分配一个新实例来修复这个难题：

```
private ArrivalDay _arrivalDay;
public ArrivalDay ArrivalDay
{
    get { return _arrivalDay; }
    set { _arrivalDay = value ?? new ArrivalDay(); }
}
```

这就像一个魅力，意味着包含类的开销很小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T10:03:13.210

我已经通过将此属性添加到我的组件类来解决这个问题

```
public virtual bool _LoadAlways { get { return true; } set { } } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-11T15:17:22.243

[https://stackoverflow.com/a/11187173/206297](https://stackoverflow.com/a/11187173/206297)对我不起作用，但在此基础上构建：

```
public class Injury
{
    // ...
    private bool dummyFieldToLoadEmptyComponent { get; set; }
}

public class MatterMap : ClassMap<Matter>
{
    // ...
    Component(x => x.Injury, m =>
    {
        // ...
        m.Map(Reveal.Member<Injury>("dummyFieldToLoadEmptyComponent")).Formula("1=1").ReadOnly();
    });
} 
```

该`Reveal.Member`位只是在 Fluent NHibernate 中映射一个私有字段。我们希望该字段是私有的，因为我们不希望该属性作为我们对组件的公共接口的一部分公开。请参阅[https://github.com/jagregory/fluent-nhibernate/wiki/Mapping-private-properties](https://github.com/jagregory/fluent-nhibernate/wiki/Mapping-private-properties)。如果您不介意将其公开，则可以使用不那么详细的映射：

```
m.Map(x => x.DummyFieldToLoadEmptyComponent).Formula("1=1").ReadOnly(); 
```

这`Formula`部分是因为我们实际上并不希望在我们的数据库中有一个列。NHibernate 将在加载组件时执行该公式，并且它总是评估为真。我选择了 1=1，因为我认为这是合理的跨数据库。

毫无疑问，这是一个 hack，但到目前为止似乎可以加载空组件，并且在持久化时没有引起任何错误。谨慎使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-17T10:33:48.913

这是一个技术上可行的解决方案。我已经对它进行了持久性测试，并且没有产生与瞬态相关的问题。

```
protected internal virtual Injury NullableInjury {get;set;}
public virtual Injury Injury 
{
   get{return NullableInjury ?? (NullableInjury = new Injury()); 
} 
```

在 Nhibernate 中，将您的组件映射到 NullableInjury。此解决方案允许您在没有 @Oliver 解决方案中报告的瞬态问题的情况下持续存在。

# linux - 我必须学习哪些命令才能成为一名有效的 Linux shell 脚本程序员？

> ID：770744
> 
> 赞同：1
> 
> 时间：2009-04-21T01:46:28.253
> 
> 标签：linux, command-line, shell

我最近开始进入 Linux 开发领域。我想学习一些新东西，并认为 bash 可能会很有趣。随着我对 bash 编程的了解越来越多，我发现有很多有用的工具可供使用（例如`grep`、`tr`、`awk`等）。有很多我只是不知道哪些是“重要的”学习。

Shell 脚本命令在很大程度上取决于系统本身的配置，并且会随着时间的推移而发生巨大变化，这与大多数编程语言不同（其中核心库与语言本身一起提供并代表程序员在交互时将使用的“核心”命令集与外界）。所以，

作为现代 Linux shell 脚本程序员，我应该熟悉哪些命令行工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T02:00:29.390

*   压缩和解压缩各种档案。
*   使用*手册*页
*   *别名*总是有帮助的
*   正如其他人提到的*sed*和*grep*（一般来说，RegEx 很好知道），*sort*，*head*，*tr*，*cut*
*   *echo* & *printf*（它们的区别以及何时使用什么）
*   *通过$?*获取返回值（不是很有用，但在编写脚本时仍然很方便） ？
**   *top*，*ps*，*kill*，如何后台/前台/挂起进程*

 *重要的是结合现有的许多工具，其中大多数工具变得非常有用。遇到困难时使用*man*可能是最重要的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T01:51:59.783

尝试查看[commandlinefu](http://www.commandlinefu.com/commands/browse)。人们在那里想出了各种各样的东西，你一定会找到未来可能有用的东西的例子。

但一般来说，[John](http://blog.sontek.net/2008/03/20/my-top-15-commands/)最常用的命令是很好的指导。

当然，**这里是龙，****你不应该做** 的事情清单：[致命的](http://www.junauza.com/2008/11/7-deadly-linux-commands.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T01:54:54.567

我特别建议您熟悉locate、grep 和find。接下来是 sed、awk 和 vim，然后是 cat、less、tail/head、ls（是的，ls！）以及 bash 可以帮助您的许多方式。

特别是关于 Bash：当心 bashisms！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T01:56:03.177

你应该知道*一些*基于控制台的文本编辑器。皮克可能就足够了。我自己是一个[vi](https://en.wikipedia.org/wiki/Vi)人，虽然[Emacs](https://en.wikipedia.org/wiki/Emacs)也可以接受。（尽管我会推荐 vi：这几乎是任何 Unix 平台上的事实标准，并且[grep](https://en.wikipedia.org/wiki/Grep) / [sed](https://en.wikipedia.org/wiki/Sed)之类的东西的行为与 vi 非常相似。）

其他：

[屏幕](https://en.wikipedia.org/wiki/GNU_Screen)：当您没有 GUI 或不想/不能打开许多终端窗口或[PuTTY](https://en.wikipedia.org/wiki/PuTTY)会话时*非常有用。*允许您打开多个 shell 会话，并且可以在它们之间切换（以及许多其他内容。

[top](https://en.wikipedia.org/wiki/Top_(software))：适用于监控进程、CPU 使用情况和内存使用情况

[watch](https://en.wikipedia.org/wiki/Watch_(command))：每“n”秒运行一次命令并显示其输出。例如，`watch -n 1 "ls -aio"`每 1 秒执行一次“ls -aio”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T01:58:31.780

显然，这取决于你在做什么，但我从 、 、 和 中获得`find`了`grep`很多`rsync`里程`ssh`。简单的也很有用： `cat`, `tail`, `wc`, `ps`. 循环也可以做很多事情`for`，通配符语法是必不可少的。例如，

```
 $ for i in {app,web}{01,02}; do ssh $i date; done 
```

这将 ssh 进入主机 app01、app02、web01 和 web02 并`date`在每个主机上执行命令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T01:53:52.463

您可能应该知道此列表中的所有内容：

[http://www.faculty.ucr.edu/~tgirke/Documents/UNIX/linux_manual.html](http://www.faculty.ucr.edu/~tgirke/Documents/UNIX/linux_manual.html)

也许不是所有的东西都是必不可少的，但至少了解每个粗略的概述对于基本功能有很大帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T01:58:51.530

perl、xargs、lsof、find、grep、bash、tar、gzip、tr、tail、diff、patch 和 bc。

以及[SUS2](http://opengroup.org/onlinepubs/007908799/xcuix.html)（单一 UNIX 规范）中的所有内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T01:50:54.247

就像你提到的，学习 awk、sed 和 grep。他们会是你非常好的朋友。另外，非常重要的是，学会正确使用文本编辑器，例如 vim。

我还建议您熟悉一种好的脚本语言，例如 perl 或 python。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T02:12:40.157

不要直接担心命令。相反，当您发现自己在为某件事而苦苦挣扎时，请尝试一些快速的 Google 和手册页搜索，看看如何改进您当时正在尝试做的事情。保持相关性，您将获得更多有用的结果。

# c# - SSL TcpClient C# .Net Compact Framework 1.0

> ID：770745
> 
> 赞同：1
> 
> 时间：2009-04-21T01:48:49.510
> 
> 标签：c#, ssl, compact-framework

我正在寻找通过 SSL 连接 TcpClient。我正在使用 .Net 紧凑框架 1.0。是否有提供类似于 System.Net.Sockets.TcpClient 但通过 ssl 的功能的开源（或商业）库。

谢谢，
基肖尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T08:50:06.067

您可以尝试支持 SSL 的 Udaparts 的 SocketPro 库。据我所知，您可以免费（甚至商业）使用它。请参阅： [SocketPro](http://www.udaparts.com/document/articles/demome.htm)

这个库适用于大多数需要 SSL 的连接。但是，GMail 存在一个未知原因的问题，尽管通过使用上述库和 OpenSSL 的库可以轻松解决此问题。如果您在 UdaParts 上搜索支持论坛，您可以找到下载额外 OpenSSL 库的链接。

祝你好运！

# asp.net-mvc - asp.net mvc：如何将匿名类型传递给 UserController？

> ID：770747
> 
> 赞同：0
> 
> 时间：2009-04-21T01:49:46.810
> 
> 标签：asp.net-mvc

我尝试了以下但不起作用：

```
<%Html.RenderPartial("userControl",new {personID=Model.ID, name="SomeName"});%> 
```

在用户控件中，我有一个 ajax 表单中的隐藏字段，我为其分配了 personID。它不会编译，隐藏的 id 无法识别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T02:17:04.623

如果您想从匿名类型中获取正确的属性，则必须使用反射或辅助类（如 RouteValueDictionary）。

RouteValueDictionary 可能是最简单的。创建它的一个实例，传递模型，然后使用它的索引运算符来查询值。

例如：

```
<%
    var modelDictionary = new RouteValueDictionary(Model);
%>
<input type="hidden" name="personID" value="<%= modelDictionary["personID"] %>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T14:56:37.650

我不确定你为什么要这样做，但这里是如何（强类型模型更好）：

```
<%
    ViewData["PersonID"] = Model.ID;
    ViewData["Name"] = "SomeName";
    Response.Write(
        Html.RenderPartial("userControl"));
%> 
```

或者

如果你这样做：

```
<%=Html.RenderPartial("userControl")%> 
```

如果您的“userControl”也是强类型，它应该能够读取“Model.ID”

# ruby - 在 Ruby 中生成 HTTP 响应

> ID：770748
> 
> 赞同：16
> 
> 时间：2009-04-21T01:50:08.120
> 
> 标签：ruby, web-services, http

我正在开发一个可以访问 Web 服务的应用程序。我想开发一个从服务返回虚假响应的代理类，因此在开发/测试应用程序的其他部分时，我不必经常使用请求来访问它。

我的应用程序期望通过 Net::HTTP 生成响应。

```
response = Net::HTTP.get(URI.parse('http://foo.com'))

case response
when Net::HTTPOK
  # do something fun

when Net::HTTPUnauthorized
  # you get the idea 
```

我怎样才能制造一个响应对象，给它所有正确的标题，返回一个正文字符串等？

```
response = ProxyClass.response_object

case response
when Net::HTTPOk
  # my app doesn't know it's being lied to 
```

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2010-07-30T01:50:33.997

实际上，直接使用 Net::HTTP 滚动您自己的虚假响应并不难。这是一个带有 cookie 标头的简单 200 OK：

```
def fake_response
  net_http_resp = Net::HTTPResponse.new(1.0, 200, "OK")
  net_http_resp.add_field 'Set-Cookie', 'Monster'
  RestClient::Response.create("Body goes here", net_http_resp, nil)
end 
```

由于我们中很少有人再使用原始的 Net::HTTP，因此（可选）最后一行将其包装为 a `RestClient::Response`，然后可以将其存入 RestClient：

```
stub(RestClient).post(anything) { fake_response } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-21T06:25:26.193

我将从[FakeWeb](http://github.com/chrisk/fakeweb/tree/master)开始，看看是否满足您的需求。如果不是这样，您可能可以从内部结构中挖掘出您需要的任何内容并创建自己的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T21:12:29.763

我知道这篇文章已经过时了，但是不要尝试使用 webmock 来代替看起来已经死了的[FakeWeb](https://github.com/bblimke/webmock "网络模拟")。它似乎功能更全，也很活跃。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-21T03:33:08.653

我会研究像[mocha](http://mocha.rubyforge.org/)这样的模拟库。

然后你应该能够设置一个模拟对象来帮助测试：

```
def setup
 @http_mock = mock('Net::HTTPResponse')
 @http_mock .stubs(:code => '200', :message => "OK", :content_type => "text/html", :body => '<title>Test</title><body>Body of the page</body>')
end 
```

有关更完整的教程，请参阅[Tim Stephenson 的 RaddOnline 博客，我在其中找到了这个示例。](http://www.raddonline.com/blogs/geek-journal/ruby-on-rails-testing-net-http-with-mocks/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-21T14:50:16.653

为了测试 Web 服务客户端，我们使用[Sinatra](http://www.sinatrarb.com/)，这是一个可爱的轻量级 Web 框架，可以让您快速轻松地启动和运行某些东西。查看主页；它在 5 行代码中包含一个完整的 Hello World 应用程序，以及两个用于安装和运行整个程序的命令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-24T20:52:23.680

我最终使用了一个结构。

```
FakeHttpResponse = Struct.new(:status, :body)
http = FakeHttpResponse.new('success', 'body goes here')
http['status'] # = 'success'
http.body # = 'body goes here' 
```

缺点是`.status`并且`['body']`也是有效的，但我认为这并不重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T14:43:33.313

我会使用上面提到的 FakeWeb，或者让我的 rake 测试任务启动一个 Webrick 实例到一个小 sinatra 应用程序，该应用程序模拟您希望看到的各种测试响应。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T16:56:34.430

你可以考虑使用 Rack 来做你需要的一切。

# c# - 带有选项卡的 C# GUI

> ID：770757
> 
> 赞同：0
> 
> 时间：2009-04-21T01:54:18.997
> 
> 标签：c#, user-interface

我想制作一个具有多个选项卡的 WindowsFormApplication。

像

对于不同的选项，例如“设置”选项卡可能是“关于选项卡”等。我将如何处理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T01:55:36.810

当然，使用[TabControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.aspx)。它应该在您的工具箱中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T01:55:47.823

有几种方法，但首先想到的方法是手动制作标签，然后切换不同的面板。面板可以在其中容纳对象，当您将其隐藏时，其中的所有内容也将被隐藏。您可以堆叠面板并将它们切换出来。

# c# - 如何将 IDictionary 的值复制到 .Net 2.0 中的 IList 对象中？

> ID：770765
> 
> 赞同：4
> 
> 时间：2009-04-21T01:57:42.220
> 
> 标签：c#, .net, generics, performance, c#-2.0

如果我有：

```
Dictionary<string, int> 
```

如何将所有值复制到：

```
List<int> 
```

目的？

该解决方案需要与 2.0 CLR 版本和 C# 2.0 兼容——我真的没有更好的主意，除了循环遍历字典并将值一个接一个地添加到 List 对象中。但这感觉非常低效。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T02:12:15.117

可能值得注意的是，您应该退后一步，问问自己是否真的需要存储在具有随机索引访问的列表中的项目，或者您是否只需要不时枚举每个键或值。

您可以轻松地遍历 MyDictionary.Values 的 ICollection。

```
foreach (int item in dict.Values) { dosomething(item); } 
```

否则，如果您确实需要将其存储为 IList，则复制所有项目并没有什么特别低效的；这只是一个 O(n) 操作。如果您不需要经常这样做，何必担心呢？如果您对编写代码感到恼火，请使用：

```
IList<int> x=new List<int>(dict.Values); 
```

它将您编写的代码包装到一个复制构造函数中，该构造函数已经实现了您计划编写的代码。那是代码行效率，这可能是您真正关心的；它并不比你写的更节省空间或时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T02:00:47.080

这甚至应该在 2.0 上工作（原谅 C# 3.0 使用“var”）：

```
var dict = new Dictionary<string, int>();
var list = new List<int>(dict.Values); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T02:00:09.373

尝试以下

```
public static class Util {
  public List<TValue> CopyValues<TKey,TValue>(Dictionary<TKey,TValue> map) {
    return new List<TValue>(map.Values);
  }
} 
```

然后，您可以使用如下方法

```
Dictionary<string,int> map = GetTheDictionary();
List<int> values = Util.CopyValues(map); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T02:11:44.400

如果您可以使用`IEnumerable<int>`or`ICollection<int>`代替 a `List<int>`，您可以只使用`Value`字典中的集合而不复制任何内容。

如果您需要 a`List<int>`那么您必须复制所有项目。列表的构造函数可以为您完成工作，但仍然必须复制每个项目，没有办法解决这个问题。

# scheme - 还车价值？还是Scheme很奇怪？

> ID：770772
> 
> 赞同：2
> 
> 时间：2009-04-21T01:59:36.507
> 
> 标签：scheme

在我使用 Scheme 和列表的一个项目中，我注意到了这种半奇怪的行为。我设法将行为隔离到一个部分中。代码是：

```
(define x (list 1 2 3))
(define y (list 4 5))
(define z (cons (car x) (cdr y)))
(define w (append y z))
(define v (cons (cdr x) (cdr y)))
(set-car! x 6)
(set-car! y 7)
(set-cdr! (cdr x) (list 8))

x
y
z
w
v 
```

为我们提供以下输出：

```
(6 2 8)
(7 5)
(1 5)
(4 5 1 5)
((2 8) 5) 
```

谁能给我解释一下：

1.  为什么不`(set-car! x 6)`更新`Z`？因为根据我的理解`car`/`cdr`返回指针或者引用对应的值。这真的很奇怪，我有点困惑。
2.  如果`car`/`cdr`不返回引用/指针，那么最终如何`set-cdr!`操作列表`v`？

有任何想法吗？这是一个简单的解决方法，但我更好奇为什么会出现变量的怪异现象。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-21T02:14:06.610

好的，让我们逐行执行您的程序。我还为每个新创建的对象分配了唯一的编号（如果您习惯于使用类 C 语言，可以将它们视为对象地址），以便您可以看到是什么。:-)

```
(define x (list 1 2 3))             ; => #1 = (1 . #2), #2 = (2 . #3), #3 = (3 . ())
(define y (list 4 5))               ; => #4 = (4 . #5), #5 = (5 . ())
(define z (cons (car x) (cdr y)))   ; => #6 = (1 . #5)
(define w (append y z))             ; => #7 = (4 . #8), #8 = (5 . #6)
(define v (cons (cdr x) (cdr y)))   ; => #9 = (#2 . #5)
(set-car! x 6)                      ; => #1 = (6 . #2)
(set-car! y 7)                      ; => #4 = (7 . #5)
(set-cdr! (cdr x) (list 8))         ; => #2 = (2 . #10), #10 = (8 . ()) 
```

现在，让我们看看您的值（对于每个引用，使用最后分配的值）：

```
x   ; #1 => (6 . #2) => (6 . (2 . #10)) => (6 2 8)
y   ; #4 => (7 . #5) => (7 5)
z   ; #6 => (1 . #5) => (1 5)
w   ; #7 => (4 . #8) => (4 . (5 . #6)) => (4 . (5 . (1 . #5))) => (4 5 1 5)
v   ; #9 => (#2 . #5) => ((2 . #10) 5) => ((2 8) 5) 
```

* * *

编辑：我正在添加一个图表来解释我的答案，因为您不能在评论中包含图表。我没有时间制作显示上述值的图表，但这希望能解释一些事情。

![表达式树](https://i.stack.imgur.com/YoHf6.png)

每对都有两个“插槽”，`car`和`cdr`，表示为上图中的左右框。如您所见，这些插槽中的每一个都具有三种可能的情况：

1.  原子（示例中的数字，或图中的符号，例如`let`、`s5`和`sqrt`）
2.  参考（在图中用箭头表示）
3.  Null（在图中表示为黑框）

您可以将其中任何一个放入任何插槽中。所以，在我上面的解释中，每一项`#`都是一个箭头，每一个非`#`数字都是一个原子，每一个`()`都是一个黑盒子。所以，在行

```
(define v (cons (cdr x) (cdr y))) 
```

您正在创建一对，其中左侧插槽与右侧插槽具有相同的内容`x`（即，指向对 2 的箭头），右侧插槽与右侧插槽具有相同的内容（指向第 5对`y`的箭头）。换句话说，两个盒子都`v`包含箭头，每个都指向不同的对。

希望这更有意义。:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T02:09:10.927

(define z (cons (car x) (cdr y))) 为 z 的头部分配了一个新的 cons 单元。x 的头部与 z 的头部是不同的 cons 单元格，因此为 x 更改此 cons 单元格的内容不会更改 z。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T03:02:22.937

请记住，每个变量不包含列表，它们只包含一个`cons`单元格。列表（或树）是多个 cons 单元的复合结构，其中一些可能在多个结构之间共享。

此外，您正在考虑指针和引用，而不是考虑值，它们可以是不可变值（如数字或符号）或可变值（如 conses 或字符串）可变值被分配、垃圾收集和通过引用传递.

最后一点要记住：该`cons`过程*总是*分配一个新的 cons 单元格。

之后`(define z (cons (car x) (cdr y)))`，z 拥有一个全新的缺点，与 x 相同，与 x 相同的汽车，以及与 y 相同的 cdr。当你 时`(set-car! x)`，你只需更改 x cons 单元格，而不是 z。

之后`(define v (cons (cdr x) (cdr y)))`，v 持有一个全新的 cons，其 car 与 x 的 cdr 值相同；那是一个缺点细胞。 与(cdr x)*相同的缺点单元。*它由两个列表共享。当该共享 cons 单元格被 修改时`(set-cdr! (cdr x) ...)`，两个列表都会受到影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T20:14:19.377

方框图和指针图说明了@chris 制作的示例：

```
(define x (list 1 2 3))             ; => #1 = (1 . #2), #2 = (2 . #3), #3 = (3 . ())
(define y (list 4 5))               ; => #4 = (4 . #5), #5 = (5 . ())
(define z (cons (car x) (cdr y)))   ; => #6 = (1 . #5)
(define w (append y z))             ; => #7 = (4 . #8), #8 = (5 . #6)
(define v (cons (cdr x) (cdr y)))   ; => #9 = (#2 . #5)
(set-car! x 6)                      ; => #1 = (6 . #2)
(set-car! y 7)                      ; => #4 = (7 . #5)
(set-cdr! (cdr x) (list 8))         ; => #2 = (2 . #10), #10 = (8 . ()) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ycn5m.png)

# php - 从 mysql 迁移到 mysqli 或 pdo？

> ID：770782
> 
> 赞同：12
> 
> 时间：2009-04-21T02:04:10.440
> 
> 标签：php, mysql, pdo, mysqli

> ### 重复：[mysqli 或 PDO - 优点和缺点是什么？](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)

我希望将网站从 mysql 迁移到 mysqli 或 pdo，主要作为学习工具，但如果可能的话，也可以提高性能。

我已经通读了[http://php.net/manual/en/mysqli.overview.php](http://php.net/manual/en/mysqli.overview.php)，似乎两者都适合我的需要，但无论哪种方式都不会强烈倾斜。

该站点目前主要使用非面向对象的代码，但我确实有其他语言的 OO 经验。绝大多数查询都是简单的复杂选择语句，更新/插入很少。您认为对我自己的教育和这个特定网站最有用的是什么？

如果您需要任何其他信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-21T02:14:30.057

PDO 专业版：

*   自 5.x 起原生于 PHP
*   支持命名参数而不是数字索引的？
*   同一个抽象库支持多个不同的 RDBM

Mysqli Con 的：

*   在数据库中正确存储和检索大对象时存在问题。
*   不支持命名参数。

否则，这两个库基本上是同一事物的不同风格。它们都具有引用参数的功能，并且都支持参数化查询。

如果上述论点都没有影响您，那么请根据其语法、样式等选择您喜欢的库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-21T14:25:21.953

我不相信**PDO**会给你带来任何性能提升，但它会给你带来以下两个非常有吸引力的长期好处：

*   您只需更改一些代码即可扩展您的应用程序以使用其他数据库
*   PDO 库具有很多内置的安全性

如果您不了解 #1 和 #2 的好处，那么只需坚持使用久经考验的 mysql 库（*尽管您至少在使用 mysql_real_escape_string，对吧*）？

如果我正在学习一个新的 PHP 数据库库，我相信 PDO 是正确的选择，特别是如果您正在创建一个可以在您自己的服务器以外的各种系统上使用的 Web 应用程序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-10-14T18:43:54.230

来自[http://www.php.net/manual/en/mysqli.overview.php](http://www.php.net/manual/en/mysqli.overview.php)：

> 虽然 PDO 有它的优点，例如干净、简单、可移植的 API，但它的主要缺点是它不允许您使用最新版本的 MySQL 服务器中可用的所有高级功能。例如，PDO 不允许您使用 MySQL 对多语句的支持。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-21T03:14:24.780

PDO 比其他 PDO 提供了更好的安全性，没有太多麻烦，但是对于过渡，我建议您迁移到 mysqli，因为它比 PDO 更快、更容易，并且大多数 api/syntax 与旧的 mysql 扩展完全相同

请参阅此处（向下滚动）以进行快速比较：
[PHP & MySQLi](http://www.php.net/manual/en/mysqli.overview.php)

编辑：看起来与您之前阅读的链接相同，抱歉

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-19T18:02:52.950

在构建我的 ORM 和抽象库时，我使用 MySQLi 和 PDO 来查看哪个性能更好。MySQLi 更快 - 但不足以仅基于此做出选择。

MySQLi/MySQL/SQLite 或任何其他独立库在 PDO 上拥有的一件事是它们返回在结果中找到的行数，这通常有助于测试任何结果。同时，在 PDO 中，您可以 fetchAll() 结果并 count() 它们 - 或者在之前运行计数查询以查看结果数。所以你必须适应以不同的方式处理这个问题。

哦，我最终选择了 PDO 而不是 MySQLi。

# iphone - 为什么在横向模式下我的工具栏不可见？

> ID：770784
> 
> 赞同：0
> 
> 时间：2009-04-21T02:04:45.120
> 
> 标签：iphone, landscape

我的目标是让应用程序在横向和纵向模式下都能正常运行，而我所能想到的就是下面的这段代码。该应用程序在纵向上运行良好，但当切换到横向时，文本不会扩展（向右）以填充额外的空间。我确保我的弹簧/支柱设置在哪里，并且父母在 IB 中选择了“allowResizing”。

这是我所做的：

```
- (void) willAnimateSecondHalfOfRotationFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation duration: 
(NSTimeInterval)duration {
  UIInterfaceOrientation toInterfaceOrientation = self.interfaceOrientation;

  if (toInterfaceOrientation == UIInterfaceOrientationPortrait) {
    self.myView.frame = CGRectMake(0.0, 0.0, 320.0, 480.0);
  }
  else {
    self.myView.frame = CGRectMake(0.0, 0.0, 480.0, 256.0);
  }
} 
```

请注意，它在纵向模式下看起来很好（出现工具栏）：

[肖像 http://mr-sk.com/img/land.png](http://mr-sk.com/img/land.png "肖像")

但是工具栏在横向模式下消失了：

[景观 http://mr-sk.com/img/por.png](http://mr-sk.com/img/por.png "景观")

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-04T15:33:13.690

如果您使用 Interface Builder - 如果您没有在对象检查器中指定约束以将工具栏固定到边缘和底部（单击小红线以指定约束），则会得到相同的结果。

您也可以在代码中执行相同的操作 - 您需要查找如何执行此操作（但在 IB 中更容易）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T05:37:25.467

它可能会搞砸有几个原因......也许你的 UIToolbar 有错误的父级。也许 layoutSubviews 正在运行并将其移动到奇怪的地方。或者是其他东西。

我建议您在视图控制器上实现 didRotateFromInterfaceOrientation: 并在旋转后读取 UIToolbar 的框架以查看它的去向。这将是发现确切问题的最佳方法。

# sql-server - 从 Sproc 中执行 SProc（使用传入的参数）

> ID：770789
> 
> 赞同：0
> 
> 时间：2009-04-21T02:06:03.743
> 
> 标签：sql-server, stored-procedures

有谁知道使用从原始过程传入的一些参数从存储过程中执行存储过程的方法。

即，如果我将参数@id、@event 日期、@log 传递到 sproc 1，那么 sproc 1 将做自己的事情并将@log 和 @event_date 传递给 sproc 2。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T02:08:39.573

只需致电：

`exec mysproc @param1 @param2`

在你的存储过程中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T02:09:22.877

只需以与查询相同的方式执行第二个 sp。

```
EXEC SPROC2 @LOG, @EVENT_DATE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T02:09:48.243

使用感兴趣的参数调用 exec：

```
 ... within sp_1
  ... other code
  exec sp_2 @log, @event_date 
```

# java - context.xml 中 SQLite DB 的相对路径

> ID：770790
> 
> 赞同：4
> 
> 时间：2009-04-21T02:07:15.877
> 
> 标签：java, sqlite, netbeans, jakarta-ee, relative-path

是否可以在 Java Web 应用程序的 context.xml 文件中使用 SQLite 数据库文件的相对路径？

目前，我有：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/mywebapp">
    <Resource name="jdbc/mydb" auth="Container" type="javax.sql.DataSource"
        maxActive="100" maxIdle="30" maxWait="10000"
        username="myusername" password="mypassword" driverClassName="org.sqlite.JDBC"
        url="jdbc:sqlite://Users/me/NetBeansProjects/MyApp/web/my.db"/>
</Context>
```

如您所见，Resource 标签的 url 属性当前指定了 my.db 的绝对路径。但是，我正在与一个小型开发团队一起开发这个项目作为一个类项目。我们通过 Subversion 共享代码，目前，每次我们更新项目时，我们都必须手动将上述路径替换为我们计算机的正确路径。

提前致谢。

* * *

**更新：**似乎相对路径不是相对于 context.xml 文件，而是相对于 CATALINA_HOME。不幸的是，该目录（Tomcat 所在的位置）位于另一个用户的主文件夹 (1) 中，我对其只有读取权限：

(1) /home/myprof/Tomcat/bin/
(2) /home/me/NetBeansProjects/MyApp/web/my.db

我不能在相对路径中包含 /me，因为如上所述，该项目将通过 svn 存储库在多台计算机上运行，​​并且包含项目文件的目录 (2) 将更改。但是，由于所有帐户都在共享虚拟网络上，因此 CATALINA_HOME (1) 不会更改。

* * *

另外，如何从上面的 servlet 中的 context.xml 文件获取数据库文件 my.db 的路径？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T09:16:55.700

我发现了以下将 JDBC 与 SQLite 结合使用的示例：

*   对于内存访问：

    ```
     jdbc:sqlite::memory: 
    ```

*   对于相对路径：

    ```
     jdbc:sqlite:relative/path.db 
    ```

*   对于绝对路径：

    ```
     jdbc:sqlite:/absolute/path.db 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-23T09:11:02.347

### 我仍在寻找一种在 context.xml 文件中使用数据库相对路径的方法。

但是，我想出了如何从 context.xml 文件中提取数据库的路径。它不漂亮，但它有效。我不知道如何将 context.xml 文件解析为 XML，所以这个丑陋的 hack 会寻找以“ `url=`”开头的行。

```
URL url = getServletContext().getResource("/META-INF/context.xml");
Properties props = new Properties();
props.load(url.openStream());
String strval = props.getProperty("url");
Pattern pattern = Pattern.compile("\\\W*\"(.\*)\"\\\W*");
Matcher matcher = pattern.matcher(strval);
matcher.find();
String constr = matcher.group(1);
if (constr != null)
    this.jdbcConnectionString = constr; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T15:16:35.753

作为一种不同的方法：您是否尝试使用`jdbc:sqlite:~/myapp.db`？这*应该*是运行该应用程序的每个人的计算机上的可写位置。（虽然我已经看到了只读主目录的邪恶。）

我不确定 SQLite 是否支持`~`数据库 URL。我知道[H2](http://www.h2database.com/html/main.html)可以，我只能推荐它作为嵌入式 Java DB。如果您不想更改数据库，您可能想查看 Tomcat 是否允许在其配置文件中进行某些参数替换，例如`${user.home}`. （一些初步的谷歌搜索给我的邮件列表结果似乎暗示至少是这种情况`server.xml`，所以值得一试。）

不过，我仍然不确定您要实现的目标：您是运行 Tomcat 实例的人，还是在某个系统帐户下运行的共享 tomcat 实例？

您还可以尝试在网络上设置另一个全球可写位置来放置数据库。`/var/`也许在某个地方，或者只是一个设置`ug=rwx`在一个人的主目录中的文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-01T11:02:38.130

我对 Spring 和 jdbc.properties 有同样的问题，我通过删除 // 并编写相对路径来解决这个问题

试试这个

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/mywebapp">
    <Resource name="jdbc/mydb" auth="Container" type="javax.sql.DataSource"
        maxActive="100" maxIdle="30" maxWait="10000"
        username="myusername" password="mypassword" driverClassName="org.sqlite.JDBC"
        url="jdbc:sqlite:web/my.db"/>
</Context> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-14T21:17:09.130

[我在这里](https://stackoverflow.com/questions/2242980)找到了我的问题的答案。解决方案是获取资源，而不是尝试从 context.xml 文件中解析数据库 URL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-10T15:01:46.997

honzas已经给出了这个答案。我重申它以使其更清楚（b / c我一开始也不明白）。

```
jdbc:sqlite:relative/path.db 
```

这对于相对路径是正确的。请注意在相对之前缺少 /。这使得路径是绝对的。你也可以使用这个：

```
jdbc:sqlite:./relative/path.db 
```

这 。指当前文件夹。

# google-analytics - 带有基于 JavaFX 小程序的网站的广告

> ID：770798
> 
> 赞同：2
> 
> 时间：2009-04-21T02:12:02.373
> 
> 标签：google-analytics, javafx

制作基于 JavaFX 并支持广告收入的网站的最佳方法是什么？您是否必须将广告放在小程序之外的常规 html 空间中，或者您可以使用 JWebPane 在小程序内呈现添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T15:19:08.597

我的观点是，您将很难说服营销和广告机构投资于基于 JavaFX 的设计。他们必须非常引人注目。Flash 是交互式设计的类别杀手。这些决定使公司损失了很多美元。我已经看到开发人员在横幅广告上搞砸了 onclick 机制，并且可能由于弹出窗口阻止程序而使他们的广告商从大量响应中搞砸。公司并不倾向于放弃一种久经考验的方法。这就是 Silverlight 很难达到饱和的原因。他们的王牌将成为媒体的高清支持。即使有了这样的飞跃，他们也很难获得渗透。据我了解，在他们的浏览器中安装 Java 的人数正在下降（仍然是一个可观的数字，为 80%）。Sun 希望他们的利基市场无处不在（可在设备上使用）。但是电池耗电是苹果公司担心的问题，苹果公司不会批准 iPhone 上的 java。

Sun 正式计划支持您的设想。他们称之为Project Insight。

同时，如果您想使用 Google Analytics，您仍然可以在小程序外部添加脚本。除非您也为此计划（可能使用元数据），否则不要期望良好的搜索发现。

在点击跟踪所必需的深度链接方面，我认为你不走运。如果您想使用 JavaFX 创建动态内容，不要期望它是可搜索或可跟踪的。

看看项目洞察力。也许你可以击败他们（他们似乎正在度过他们的甜蜜时光，正如 JWebPane 去年所承诺的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-25T12:21:59.197

如果您想使用 Google Analytics 跟踪用户操作，例如在您的 JavaFX Web 应用程序中按下按钮，那么您可以尝试使用 gaforjavafx（JavaFX 的 Google Analytics）。Gaforjavafx 是一个软件模块，用于将 Google Analytics Tracker API 与您的 JavaFX Web 应用程序集成。以下博客介绍了如何在 JavaFX 程序中使用 gaforjavafx 将跟踪信息发送到 Google Analytics。

[http://gaforjavafx.blogspot.com/](http://gaforjavafx.blogspot.com/)

.

# c# - 使用带有动态端点的 MSMQ 实现订阅者/发布者系统

> ID：770803
> 
> 赞同：0
> 
> 时间：2009-04-21T02:12:53.197
> 
> 标签：c#, wcf, triggers, msmq, nservicebus

我正在尝试创建一个反馈系统，将所有消息发布到然后发布回正确的子系统。我们正在大量使用队列，我想让订阅者代码尽可能干净。我想根据我进入反馈系统并发布给其特定订阅者的消息 ID 来关闭。我不想为每个订阅者提供服务来监听消息。我在想我可以为每个订阅者设置一个队列并触发调用 com+ 组件。但我正在寻找一种更现代的方式。 .

我正在研究 NServiceBus 但似乎我需要为每个侦听系统创建一个服务/可执行文件/webservice（创建 C# dll 和调用方法的工作量要少一些）而且我不确定 NServiceBus 是否可以处理基于预加载配置（从 db 加载）的动态端点。WCF 也是一种选择.. 它可以肯定地处理动态端点..

您认为对于新系统订阅的代码租赁量/可扩展性的最佳解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T15:33:42.833

看来您正在寻找服务主机，而不是消息代理。如果是这样，Microsoft 推荐的方法是在 IIS 中托管您的 WCF 服务。他们仍然可以使用 MSMQ 作为传输，但服务本身将由 IIS 管理。IIS 从早期的 HTTP 服务器开始有了显着的发展，现在它更接近于应用程序服务器，可以选择传输（TCP、MSMQ、HTTP）、池、激活、生命周期策略等。

尽管我发现 WCF+MSMQ+IIS 有点过于复杂，但这是您在 Microsoft 领域所付出的代价。

对于漂亮而简单的消息代理，您可以使用 Active MQ 而不是 MSMQ，它将为您提供消息代理以及 pub/sub。在 .NET 中使用它非常容易，请查看此链接：[http ://activemq.apache.org/nms/](http://activemq.apache.org/nms/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T13:43:04.787

如果您对在线解决方案感到满意，您可以查看具有队列服务总线的最新 .NET Services SDK for Windows Azure [http://www.microsoft.com/azure/netservices.mspx](http://www.microsoft.com/azure/netservices.mspx)它依赖于 WCF 消息并支持路由等。这里有一些关于此的博客文章[http://vasters.com/clemensv/default.aspx](http://vasters.com/clemensv/default.aspx)

您可以尝试的另一个框架是 MassTransit [http://code.google.com/p/masstransit/](http://code.google.com/p/masstransit/)

# jquery - 图像交换技术 - 改为淡入淡出

> ID：770806
> 
> 赞同：3
> 
> 时间：2009-04-21T02:14:18.217
> 
> 标签：jquery

我正在使用下面的代码在悬停时交换图像：

```
$(function() {
    $("#compost").hover(function() {
        origImage=$(this).attr("src");
        $(this).attr("src", "images/order-compost-over.gif")
    },function() {
        $(this).attr("src", origImage)
    });
}); 
```

我正在尝试使用 fadeIn 而不是交换。我尝试使用它，但没有运气。我尝试使用 img 标签淡入淡出，但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T02:19:39.140

查看[ImageSwitch](http://www.hieu.co.uk/blog/index.php/imageswitch/)。做你想做的一切，还有更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T02:19:52.243

如果您试图“合并”这两个图像，您将无法使用标准技术。

相反，您应该：

*   创建一个新的 IMG 对象
*   绝对定位在上一张图片上
*   将新图像的 src 设置为旧图像，并将其不透明度设置为 1。
*   将旧图像的 src 设置为新 URL，并将其不透明度设置为 0。
*   现在将两者同时设置为相反的值
*   最后，摆脱新形象。

这是一个棘手的问题，但应该可以正常工作:)

# c# - 带复选框的 C# 文件浏览

> ID：770808
> 
> 赞同：1
> 
> 时间：2009-04-21T02:14:55.813
> 
> 标签：c#

好的，所以这个问题建立在我的最后一个问题上。我正在尝试构建一个“文件浏览器”，但它会做其他事情。

我要完成的工作：

1.  有一个专门用于列出文件的选项卡，就像“浏览文件”一样，除了我希望能够检查某些文件和目录。我还想要“浏览文件”的功能作为
    更改位置。

2.  从复选框中获取值以应用于其他地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T02:22:51.753

这个问题有点模糊。我们真的需要一个基本的实现来构建，否则我们可能会给你不好的建议。

也就是说，这里有一些链接可能会帮助您入门：

*   [SplitContainer](http://msdn.microsoft.com/en-us/library/h0w5ctby.aspx)控件（在工具箱中）
*   [ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx)控件（在工具箱中）
*   [获取 Shell 使用的文件图标](https://stackoverflow.com/questions/462270/get-file-icon-used-by-shell)

# delphi - 如何为相互依赖的记录定义隐式转换运算符？

> ID：770809
> 
> 赞同：14
> 
> 时间：2009-04-21T02:15:11.367
> 
> 标签：delphi, delphi-2006

我在 Delphi 2006 中对记录使用运算符重载。（请不要告诉我不要回答这个问题。）

我有两种记录类型，其中*隐式*运算符重载。它们都只在模块的实现中，不通过接口暴露。

我的问题是，既然它们是相互依赖的，我不知道如何将第二种类型的声明转发给编译器。我知道如何处理函数、过程和类，但不知道如何处理记录。

这是我正在尝试做的一个简化示例：

```
implementation

type
  TMyRec1 = record
    Field1 : Integer;
    class operator Implicit(a: TMyRec2): TMyRec1;  // <---- Undeclared Identifier here.
  end;

  TMyRec2 = record
    Field2: Integer;
    class operator Implicit(a: TMyRec1): TMyRec2;
  end;

class operator TMyRec1.Implicit(a:TMyRec2): TMyRec1;
begin
  Result.Field1 := a.Field2;
end;

class operator TMyRec2.Implicit(a:TMyRec2): TMyRec2;
begin
  Result.Field2 := a.Field1;
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-21T02:42:50.443

您不能有记录类型的前向声明。`Implicit`在第二种类型中定义两个运算符：

```
type
  TMyRec1 = record
    Field1 : Integer;
  end;

  TMyRec2 = record
    Field2: Integer;
    class operator Implicit(a: TMyRec2): TMyRec1;
    class operator Implicit(a: TMyRec1): TMyRec2;
  end; 
```

[从帮助中](http://docs.codegear.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devcommon/operatoroverloads_xml.html)引用：

> 只有在绝对必要时才应提供隐式转换，并应避免自反性。最好让 B 类型隐式转换为 A 类型，让 A 类型不知道 B 类型（反之亦然）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-01-15T20:53:57.533

您*可能*可以使用记录助手来执行此操作。

以下是我最近为解决无法进行`forward record`记录声明所做的工作。

它使用`record helper`结构，它`implicit type casts`也有缺点。
最重要的是只有最接近`record helper`特定`record`类型的才会适用。

```
type
  TIpv4Address = record
  strict private
    FAddress: TIpv4Quad;
    FMask: TIpv4Quad;
  private
    class function CreateInternal(const IP_ADDR_STRING: _IP_ADDR_STRING): TIpv4Address; static;
  public
    class function Create(const IP_ADDR_STRING: _IP_ADDR_STRING): TIpv4Address; static;
    class function Count(const IP_ADDR_STRING: _IP_ADDR_STRING): Integer; static;
    property Address: TIpv4Quad read FAddress;
    property Mask: TIpv4Quad read FMask;
  end;

  TIpv4AddressList = array of TIpv4Address;

  TIpv4AddressHelper = record helper for TIpv4Address
    class function CreateList(const IP_ADDR_STRING: _IP_ADDR_STRING): TIpv4AddressList; static;
  end; 
```

你像这样使用它：

```
function TAdapterInfo.GetIpAddressList: TIpv4AddressList;
begin
  Result := TIpv4Address.CreateList(AdapterInfos.IP_ADAPTER_INFO[Index].IpAddressList);
end; 
```

——杰伦

# jquery - 如果你已经实现了一个 Url Helper 扩展来获取你的脚本文件的 URL，你如何让 jQuery intellisense 工作？

> ID：770810
> 
> 赞同：3
> 
> 时间：2009-04-21T02:15:56.013
> 
> 标签：jquery, asp.net-mvc, visual-studio-2008

我已经实现了 Kazi Manzur 在他的 MVC 最佳实践指南中建议的 Url Helper[扩展](http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx)

我的 Url Helper 扩展方法来获取脚本文件：

```
public const string ScriptDir = "~/Assets/Scripts";
public static string Script(this UrlHelper helper, string fileName)
{
    return helper.Content(string.Format("{0}/{1}", ScriptDir, fileName));
} 
```

在我的母版页中，我只需将 jQuery 脚本添加到我的页面中，如下所示：

```
<script type="text/javascript" src="<%= Url.Script("jquery-1.3.2.min.js") %>"></script> 
```

由于 Visual Studio 在设计时不知道 jquery-1.3.2.min.js 包含在母版页中，我如何让智能感知为 jQuery 工作？

我目前在我的母版页中包含以下代码（硬编码我的 -vsdoc 脚本位置）的解决方法。这可能是目前最好的解决方案：

```
<% if (false) { %> <script type="text/javascript" src="~/Assets/Scripts/jquery-1.3.2-vsdoc.js"></script> <% } %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T02:37:51.750

您不必包含文件名的“-vsdoc”部分。vsdoc 智能感知文件将被自动拾取。但是，该基本解决方法是我能够让智能感知与 jquery 和脚本路径一起工作的唯一方法。我还必须将解决方法标记放在不引用我想要智能感知的母版页的任何 .ascx 控件或视图中。

我使用的解决方法与您的相同，减去“-vsdoc”：

```
<% if (false) { %>
    <script src="../../Content/scripts/jquery-1.3.2.js" type="text/javascript"></script> 
<% } %> 
```

但是，解决方法违背了使用路径方法的目的，因为无论如何您都必须对路径进行硬编码。没有太多答案 - 只是对同一问题的确认。

* * *

If you [enable compiling for views](http://blog.maartenballiauw.be/post/2009/05/06/More-ASPNET-MVC-Best-Practices.aspx), the above code will cause an unreachable code warning. This code using directives doesn't cause a warning and won't be compiled to the view:

```
<% #if (false) %>
    <script src="../../Content/scripts/jquery-1.3.2.js" type="text/javascript"></script> 
<% #endif %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T02:28:16.390

简单的：

```
/// <reference path="jquery-1.3.2-vsdoc.js" /> 
```

或者任何适当的名称。

作为额外的奖励，您可能希望使用以下内容作为 VS Intellisense with Javascript 的参考。

*   [http://blogs.msdn.com/webdevtools/archive/2007/03/02/jscript-intellisense-in-orcas.aspx](http://blogs.msdn.com/webdevtools/archive/2007/03/02/jscript-intellisense-in-orcas.aspx)
*   [http://weblogs.asp.net/bleroy/archive/2007/04/23/the-format-for-javascript-doc-comments.aspx](http://weblogs.asp.net/bleroy/archive/2007/04/23/the-format-for-javascript-doc-comments.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T02:28:30.633

他建议将这些 URL 映射到辅助方法以避免重复。但是，在母版页的情况下，您已经有一个存放该信息的中心位置（即您不会重复自己）。

因此，在这种情况下，我建议在这种情况下，这不仅是不必要的，而且是有害的。在这种情况下，智能感知比盲目地保持 100% 一致更重要。

# c# - 使用 linq2sql 查询选择单个项目

> ID：770813
> 
> 赞同：0
> 
> 时间：2009-04-21T02:19:26.630
> 
> 标签：c#, linq, linq-to-sql

我正在尝试从 Linq2Sql 查询中检索单个实体，但我无法找到“漂亮”的方法。这是我发现的有效方法：

```
 var states = from state in dc.States where state.Id == j.StateId select state;
State s = states.ToList<State>().ToList()[0]; 
```

我希望这不是获得实体的最佳方式。:-P

有人有更好的解决方案吗？

提前致谢！

--J

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T02:21:29.683

试试这个：

```
int stateID = getTheStateIDToLookup();    
State state = dc.States.SingleOrDefault(s => s.StateID == stateID); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T02:23:16.730

```
var s = dc.States
    .SingleOrDefault(st => st.Id == j.StateId); 
```

另请记住，这要求只有一个状态符合您的标准，这在您的情况下可能是正确的。或者你可以使用：

```
var s = dc.States
    .FirstOrDefault(st => st.Id == j.StateId); 
```

或者，如果您知道有一个符合您的条件的状态，您可以像这样摆脱 OrDefault：

```
var s = dc.States
    .Single(st => st.Id == j.StateId); 
```

# php - 我需要一个 PHP 脚本来解密由生成的 RSA 加密字符串

> ID：770830
> 
> 赞同：0
> 
> 时间：2009-04-21T02:25:54.740
> 
> 标签：php, javascript, cryptography

我需要一个 PHP 脚本来解密这个 JavaScript 库生成的 RSA 加密字符串 - [http://ohdave.com/rsa/](http://ohdave.com/rsa/)

我要么错过了一些东西，要么我不知道，但我不记得我找了这么久但没有找到的最后一件事是什么:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T03:04:03.747

我不知道你，但我快速谷歌并找到了这个匹配：

[http://www.sematopia.com/?p=275](http://www.sematopia.com/?p=275)
[http://www.phpclasses.org/browse/package/4121.html](http://www.phpclasses.org/browse/package/4121.html)
[RSA加密/解密兼容Javascript和PHP](https://stackoverflow.com/questions/610048/rsa-encryption-decryption-compatible-with-javascript-and-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-26T02:33:46.270

我已经很久没有问这个问题了；但是我同时发现了一种简单的方法来实现我上面的要求：[http ://www.jcryption.org/](http://www.jcryption.org/)

祝大家好运，标题

# hpc - 租一个集群

> ID：770831
> 
> 赞同：8
> 
> 时间：2009-04-21T02:26:56.563
> 
> 标签：hpc

我想知道是否有可供出租的集群。

设想：

我们有一个程序，它将在给定文件上运行我们估计一周的时间（优化后）。很可能，更长。不幸的是，我们还需要处理大约 300 多个不同的文件，从而导致大约`300`数周的计算时间（可四舍五入到*6 年连续运行的工作*）。对于一项最迟应在 12 月之前完成的研究工作，这简直是不可接受的。当我们在探索其他选择时，我正在研究简单地租用 Beowulf 集群的选择。这项工作是学术性的，将导致完成博士学位。

理想的情况是我们将源文件和工作文件发送给公司，然后在一两周后收到结果文件。瞧！

快速谷歌搜索并没有发现任何非常有希望的东西。

建议的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T02:30:58.550

云计算听起来像是您所需要的。亚马逊、微软和谷歌按使用量付费租用计算机资源。

亚马逊的服务是最成熟的，关于亚马逊的服务已经有几个问题了，例如[这里](https://stackoverflow.com/questions/24885/do-you-use-amazons-cloud-services-for-your-company)和[这里](https://stackoverflow.com/questions/36399/how-does-dedicated-webhosting-compare-to-amazons-cloud)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T02:32:32.463

[Amazon EC2](http://aws.amazon.com/ec2/)（弹性计算云）听起来正是您正在寻找的。您可以注册一个或多个虚拟机（最多自动 20 个，如果您[请求许可](http://aws.amazon.com/contact-us/ec2-request/)，可以更多），每台虚拟机每小时 0.10 美元起，加上带宽费用（EC 2 机器和亚马逊的[其他网络服务](http://aws.amazon.com/)之间免费）。您可以在多种操作系统之间进行选择（各种 Linux 发行版、OpenSolaris、Windows，如果您需要支付额外费用），您可以使用预先存在的机器映像或创建自己的机器映像。如果您使用所有开源软件并且没有太多带宽成本，听起来运行您的工作需要花费大约 5000 美元（假设您 6 年的计算时间与他们的小型实例相当，使用单个虚拟 CPU）。

一旦您注册了该服务并设置了[他们的工具](http://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/)，就很容易启动新的虚拟机。我什至花了 0.10 美元来启动一台机器几分钟，只是为了验证我在 StackOverflow 上给某人的答案；我想在 Solaris 上检查一些东西，所以我只是启动了一个实例，并在 5 分钟内拥有了一个 Solaris VM 供我使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-21T02:35:34.280

我不知道你在哪里攻读博士学位……亚洲、欧洲和北美的大多数大学都有一些集群。你可以

*   直接与负责集群的实验室人员会面。
*   请你的博士生导师安排。也许他/她有一些朋友可以应付。

此外，经典技巧是使用实验室/大学计算机的未使用时间......基本上，每台计算机都运行一个客户端应用程序，该应用程序在计算机不使用时处理数字。见[http://boinc.berkeley.edu/](http://boinc.berkeley.edu/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T02:31:52.263

这条线索可能会有所帮助：

[http://lcic.org/vendors.html](http://lcic.org/vendors.html)

这是一个很棒的资源网站：

[http://www.hpcwire.com](http://www.hpcwire.com)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-29T01:05:42.047

该线程已经充满了指向亚马逊 EC2 的指针——而且是正确的。他们是这个领域最成熟的。最近，他们发布了他们的弹性 map-reduce 平台，听起来与您正在尝试做的事情相似（尽管不完全一样）。Google 不适合您，因为他们的计算模型不支持您需要的通用计算模型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-25T19:46:47.087

*   对于学术/科学用途，有几个公共中心提供 HPC 功能。在欧洲，有 DEISA。[http://www.deisa.eu/](http://www.deisa.eu/)和 DEISA 成员。美国一定有类似的可能性，可能是通过 NSF。

*   对于商业用途，请查看 IBM Deep Computing On Demand 产品。 [http://www-03.ibm.com/systems/deepcomputing/cod/](http://www-03.ibm.com/systems/deepcomputing/cod/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-05-06T15:30:16.360

有几种方法可以在集群上获得时间。

1.  在亚马逊弹性云上购买时间。根据您对他们的服务的熟悉程度，可能需要一些时间才能按照您想要的方式对其进行配置。
2.  走近一所大学，看看他们是否有商业计划可以将时间出租给公司。我知道有几个这样做。我特别知道的一个是 UIUC 的 NCSA 的私营部门项目。根据机构的不同，他们还为您的代码提供移植和优化服务。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-27T13:00:36.703

或者，您可以从私人提供商处租用 CPU 时间。
我来自斯洛文尼亚，例如，我们有一个很棒的私人提供商，叫做 Arctur。当我联系他们时，他们乐于助人且反应迅速。

你可以在这里找到它们：[hpc.arctur.net](http://hpc.arctur.net)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T02:36:48.023

一种选择是租用与您需要的任意数量的 PC 相当的虚拟资源，并使用[Amazon Elastic Compute Cloud](http://aws.amazon.com/ec2/)将它们设置为集群。

建立一个这样的 beowulf 集群是完全可能的。

查看这个[链接](http://code.google.com/p/elasticwulf/)，它提供了资源和软件来做到这一点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-22T13:30:45.727

访问：[http](http://www.extremefactory.com/index.php) ://www.extremefactory.com/index.php 真正的 HPC 集群，最高 200 TFlops。

# php - 卷曲功能从选择框中选择选项并自动提交

> ID：770835
> 
> 赞同：0
> 
> 时间：2009-04-21T02:29:30.007
> 
> 标签：php, curl, screen-scraping

我是一个新手，每天都尝试不同的事情，当我遇到困难时总是来这里。

我想使用 curl 和 php 编写一个脚本，该脚本转到此链接：[http](http://tools.cisco.com/WWChannels/LOCATR/openBasicSearch.do) ://tools.cisco.com/WWChannels/LOCATR/openBasicSearch.do然后遍历每个国家/地区的每个页面，捕获每个合作伙伴的列表国家并将其保存到数据库。

我不知道脚本将如何从选择框中逐个选择国家并将页面重定向到国家页面......这是要做的第一件事，一旦我们在页面上，模式匹配就会在其中存储名称和地址我可以管理的数据库。

问题是在我们选择任何国家之前 url 是:: [http://tools.cisco.com/WWChannels/LOCATR/BasicSearch.do](http://tools.cisco.com/WWChannels/LOCATR/BasicSearch.do) 在我们选择国家之后说'india' url 是: [http://tools.cisco.com/ WWChannels/LOCATR/performBasicSearch.do](http://tools.cisco.com/WWChannels/LOCATR/performBasicSearch.do)，没有提到任何选择的国家。

我的想法是遍历 HTML 页面，并在数组中输入所有国家/地区，然后创建一个递归函数来调用具有特定国家/地区的页面，但为此我们需要在递归函数中为每个国家/地区提供不同的 URL，对吗？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T02:38:10.843

您的网址搞砸了，所以我看不到您正在谈论的确切页面，但是*最有可能*发生的是，当您更改国家/地区时，网站正在`POST`使用变量`country`（尽管它可能是其他东西）与您选择的国家名称/国家 ID 的值。如果您在页面上查看源代码，您将能够看到正在传递的输入字段的名称。完成此操作后，在发出 cURL 请求时，您可以设置 的[cuRL 选项](http://www.php.net/manual/en/function.curl-setopt.php)，`CURLOPT_POSTFIELDS`如下所示：

> 在 HTTP“POST”操作中发布的完整数据。要发布文件，请在文件名前加上 @ 并使用完整路径。这可以作为 urlencoded 字符串传递，例如 'para1=val1¶2=val2&...' 或作为字段名称作为键和字段数据作为值的数组。

所以，记住这一点，你会做这样的事情：

```
$ch = curl_init('http://tools.cisco.com/WWChannels/LO...BasicSearch.do');
$ch = curl_setopt($ch, CURLOPT_POSTFIELDS, array('country' => 'India'));
$ch = curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$contents = curl_exec($ch);
curl_close($ch); 
```

不过，正如我所说，国家 => 印度的一部分是对该领域可能会发生什么的有根据的猜测。您必须检查 HTML 才能自己找出答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-12T15:10:50.450

对于自动化/抓取，我建议您使用虚拟浏览器，例如[SimpleBrowser](http://www.lastcraft.com/browser_documentation.php)。它是 SimpleTest 的一部分，但您可以单独使用它。

# aspectj - 是否有可能获得有关在建议执行切入点中捕获了哪些建议的信息？

> ID：770840
> 
> 赞同：1
> 
> 时间：2009-04-21T02:32:43.663
> 
> 标签：aspectj

我的应用程序中有一个方面可以拦截系统上的每个建议执行。我希望能够像这样确定我的建议执行切入点正在“拦截”哪些建议

//... AdviceInspector.aj 中的一些代码

```
 before(): adviceexecution() && !within(AdviceInspector) {
    System.out.println("advice execution being intercepted");
            // TODO : get a way to know which advice execution has been intercepted
} 
```

//... 更多代码

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-13T17:56:17.263

您可以从 joinPoint 获得建议的签名。签名有多种方法来描述它。如果它只是为了调试 toString() 方法很好地描述了它

```
before(): adviceexecution() && !within(AdviceInspector) {
    org.aspectj.lang.Signature sig = thisJoinPoint.getStaticPart().getSignature();
    //It is also valid to do 
    //Signature sig =  thisJoinPointStaticPart.getSignature();
    System.out.println(sig);
} 
```

# python - python3 对传递给 sorted() 的“key”参数的方法做了什么？

> ID：770845
> 
> 赞同：4
> 
> 时间：2009-04-21T02:37:47.553
> 
> 标签：python, python-3.x, sorted

我有一个关于 python 如何处理传递给 sorted() 的方法的问题。考虑以下小脚本：

```
#!/usr/bin/env python3

import random

class SortClass:
    def __init__(self):
        self.x = random.choice(range(10))
        self.y = random.choice(range(10))
    def getX(self):
        return self.x
    def getY(self):
        return self.y

if __name__ == "__main__":
    sortList = [SortClass() for i in range(10)]
    sortedList = sorted(sortList, key = SortClass.getX)
    for object in sortedList:
        print("X:", object.getX(),"Y:",object.getY()) 
```

这给出了类似于以下内容的输出：

```
X: 1 Y: 5
X: 1 Y: 6
X: 1 Y: 5
X: 2 Y: 8
X: 2 Y: 1
X: 3 Y: 6
X: 4 Y: 2
X: 5 Y: 4
X: 6 Y: 2
X: 8 Y: 0 
```

此脚本根据每个实例的 x 字段的值对 SortClass 对象进行排序。但是请注意，sorted 的“key”参数指向 SortClass.getX，而不是任何特定的 SortClass 实例。我对python如何实际使用作为“键”传递的方法有点困惑。像这样调用 getX() 是否有效，因为传递给它的对象与“self”参数的类型相同？这是对“关键”参数的安全使用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T02:55:17.103

类上的方法只是函数。

```
class MyClass(object):
...     def my_method(self): pass
...
>>> MyClass.my_method
<function my_method at 0x661c38> 
```

当您从类的实例中获取方法时，Python 使用一些魔法（称为描述符）来返回绑定方法。绑定方法在调用时会自动插入实例作为第一个参数。

```
>>> MyClass().my_method
<bound method MyClass.my_method of <__main__.myClass object at 0x6e2498>> 
```

但是，正如您所注意到的，您也可以直接使用实例作为第一个参数调用该函数：`MyClass.my_method(MyClass())`

这就是发生的事情`sorted()`。Python 使用列表中的项目调用函数 SortedClass.getx，该项目恰好是 SortedClass 的实例。

（顺便说一句，有更好的方法来做你正在做的事情。首先，不要使用方法来公开属性，如`getX`。使用属性或普通属性。另外，看看`operator.itemgetter`和`operator.methodcaller`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-10-18T17:02:04.903

+1为本杰明的回答。

此外，如果您想掌握 Python 中的排序，请阅读 Sorting HowTo：http: [//docs.python.org/howto/sorting.html](http://docs.python.org/howto/sorting.html)

# java - 限制 Visual VM 中的分析

> ID：770851
> 
> 赞同：3
> 
> 时间：2009-04-21T02:38:39.907
> 
> 标签：java, profiling, visualvm

我正在试用新 JDK 附带的 VisualVM 程序。我正在对其进行分析，并尝试仅在特定包中的方法上分析 CPU。

我将以下内容放在“仅配置文件的类”中：

```
jig.* 
```

jig 是我想要检测的包。不幸的是，我得到了不在该包或任何子包中的其他方法的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-21T23:51:29.383

我可以重现您的问题的唯一方法是选中“Profile new Runnables”框。当我保持选中状态时，分析器会拾取作为新线程启动的代码，即使该代码不符合过滤条件。我想这是不清楚的功能。

在进行分析活动之前，您应该确保取消选中该框。请注意，如果未选中它，这可能意味着您将看不到您自己的任何代码的配置文件信息，这些代码恰好作为单独的线程启动。（但我认为你很有可能不这样做，所以你没有什么可担心的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T14:33:07.847

实际上有一个关于此的已打开错误：

[https://java.net/jira/browse/VISUALVM-546](https://java.net/jira/browse/VISUALVM-546)

我完全同意提交者（以及您对 VisualVM 的“奇怪”行为感到失望）。即使选中了“Profile new Runnables”，我认为过滤器也必须得到尊重。

分析它是一项重要的任务，特别是对于通常部署在应用程序服务器上的大型项目，它是常用方式（和正确方式）具有用于后台任务和服务用户请求的线程。

我邀请大家投票支持 VisualVM 开发人员的关注。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-03T12:52:58.437

您可以在“Profiling Results”列表底部的文本字段中输入过滤标准，这应该可以解决问题。

# python - Google App Engine 中的 Django 自定义模板标签

> ID：770854
> 
> 赞同：10
> 
> 时间：2009-04-21T02:39:47.733
> 
> 标签：python, django, google-app-engine

我正在尝试在 Google App Engine Web 应用程序中包含以下标记：

[http://www.djangosnippets.org/snippets/1357/](http://www.djangosnippets.org/snippets/1357/)

该文件是否有任何配置可以使其与 Google App Engine 一起使用？

因为我遵循了 Django 模板教程：[http ://docs.djangoproject.com/en/dev/howto/custom-template-tags/](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

并具有以下结构：

```
templatetags/
    __init__.py
    range_template.py 
```

在模板文件中，我有 {%load range_template%}

但我收到错误：

TemplateSyntaxError：“range_template”不是有效的标签库：无法从 django.templatetags.range_template 加载模板库，没有名为 range_template 的模块

另一件事可能是这个不起作用的问题，INSTALL_APPS settings.py 文件。不知道如何配置它。

我的应用程序根目录中有一个 settings.py 文件，其中包括：

INSTALLED_APPS = ('模板标签')

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T03:09:52.123

尝试执行以下操作：

```
$ python ./manage.py startapp foo 
```

将 foo 添加到已安装的应用程序中：

```
INSTALLED_APPS += ('foo',) 
```

并将您的 templatetags 目录移动到您的 foo 应用程序中。就像是：

```
./djangoproject
    __init__.py
    settings.py
    urls.py
    etc..
    foo/
        __init__.py
        templatetags/
            __init__.py
            range_template.py 
```

Django 约定是模板标签代码驻留在应用程序中，在名为 templatetags 的目录中（[请参阅文档](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/)）。我认为 GAE 也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-11-28T12:36:51.997

如果有人搜索这个，我在 2008 年写了一篇关于这个的小文章：http: [//daily.profeth.de/2008/04/using-custom-django-template-helpers.html](http://daily.profeth.de/2008/04/using-custom-django-template-helpers.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-02T19:46:58.837

请确保在完成上述步骤后重新启动开发服务器

# actionscript-3 - 用于三角形的 AS3（或任何语言）三角库？

> ID：770860
> 
> 赞同：0
> 
> 时间：2009-04-21T02:47:09.573
> 
> 标签：actionscript-3, trigonometry

有谁知道一个库，可以轻松输入边的角度和长度的参数，并让它使用三角函数自动推断未给定的角度和长度？即使它的性能很差，它对于原型设计也非常有用，并且可以优化性能（甚至提供表查找和排序）。如果那里没有类似的东西，我可能会写它。

谢谢，
umop

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T07:59:14.403

很难找到一个库，因为 trig 非常简单，你只需要做一个快速的公式。

```
 a^2 + b^2 = c^2

   s=o/h c=a/h t=o/a 
```

我在想写你自己的函数来做这些家务会非常非常快:)

# asp.net - 带有“#”或“=”的 ASP.NET 尖括号。有什么不同？

> ID：770863
> 
> 赞同：4
> 
> 时间：2009-04-21T02:47:56.623
> 
> 标签：asp.net

> **重复：** [ASP.NET“特殊”标签](https://stackoverflow.com/questions/649428/asp-net-special-tags)

* * *

我使用使用`<? ?>`或作为服务器标签的 PHP，但是 ASP.NET和`<?php ?>`中的含义和用法是什么？`<%**#** %>``<%**=** %>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T02:52:47.203

`<%# %>`表示数据绑定操作，仅在 DataBinding 控件（如 DataGrid、ListView 等）内有效。

`<%= %>`是一个快捷方式`HttpContext.Current.Response.Write`。它会`.ToString()`在任何对象/方法调用上调用该方法（对字符串执行，它可能足够聪明，不会 ToString 一个字符串）。

# ajax - 同时来自多个浏览器选项卡的 AJAX 调用：

> ID：770866
> 
> 赞同：0
> 
> 时间：2009-04-21T02:49:02.377
> 
> 标签：ajax, prototypejs

当用户尝试从多个浏览器选项卡同时发送 AJAX 请求时，较早的请求会完成并加载页面，但其他 AJAX 调用会被抢占。结果，其他调用的响应为空。只有一个电话存活下来。在我使用 struts 2.0、JSP 和 javascript 以及原型框架的应用程序中，我发现在上述情况下服务器响应为空，尽管数据在数据库中使用请求参数进行了更新。Ajax.request 的 onSucess 事件处理程序被调用，但响应为空。

你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T03:08:26.073

我认为我们应该在开始对服务器进行另一次调用之前从 Ajax 调用中获得准备状态（除非您为每次调用创建一个新的 ajax 对象），但我可能是错的。

我从不使用原型，但我使用 Adob​​e Spry 多年并且多次 Ajax 调用没有问题，但这个是原型，阅读它应该会有所帮助。

[多个 Ajax 请求](http://www.dannychoo.com/adp/eng/571/Multiple+Ajax+Requests.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T03:13:46.607

我不太确定是什么原因导致了这种情况，但这里有一件事可以尝试：我开发的最后一个以 AJAX 为中心的大型应用程序，我们必须为每个查询字符串添加一个随机数参数，以确保任何一个都没有缓存客户端或服务器端（或 ISP 端，这些天）。

保证每个选项卡中的查询 URL 不同可以解决您的问题。

# svn - 应该使用默认文件夹吗？

> ID：770867
> 
> 赞同：4
> 
> 时间：2009-04-21T02:50:50.033
> 
> 标签：svn, tortoisesvn

我在 SVN 中看到了至少没有在客户端上创建本地`trunk`、、`branches`和`tags`文件夹的存储库。

那么使用 SVN 需要默认文件夹吗？

我正在使用 TortoiseSVN。我不明白为什么有些人拥有这些文件夹，但有些人在某些存储库实现中却没有。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T05:56:38.480

正如其他人所说，不需要主干/分支/标签。这些文件夹对颠覆没有特殊意义，如果它适合您的需要，它只是您可以使用的最佳实践。

但是由于您提到了 TortoiseSVN，所以有一个小细节：**当您尝试提交到 /tags 的子文件夹时，Tortoise 会警告您**。它强制标签一旦创建就不会被修改（另一个最佳实践）。

* * *

**更新**（回应您的评论）：

最佳实践表明您的存储库中应该有“主干”、“分支”和“标签”文件夹。使用这些文件夹的一种方式（可能是最常见的方式）是：

*   **主干**是主要开发发生的地方。
*   **标签**包含源代码的重要修订/版本的快照（副本）（例如 1.0、1.1、2.0 等版本）。
*   **分支**用于维护旧版本，例如您的产品在版本 2 上，那么您需要修复 1.0 版本中的错误（然后您可以将 1.0 标签复制到新分支并在那里进行修改）。

现在颠覆，所有文件夹（主干、标签、分支）都是“普通”文件夹。它们现在具有特殊含义，并且 subversion 不会对它们进行任何不同的处理（这意味着您可以修改例如“/tags/1.0”中的内容）。

TortoiseSVN 试图通过在您尝试提交标签时警告您来强制执行最佳实践（因为通常您希望保留标签，因为它们能够随时重建旧版本的产品）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-21T03:03:42.187

绝对不需要。许多公司认为它是最佳实践，并且主干/分支目录适用于许多软件环境，并且对于来自 cvs 等的人来说似乎更熟悉。

一个次优的例子是在 Subversion 中存储一个网站。我工作过的几家公司都有 Devel 和 Live 目录。工作在 Devel 目录中完成，并在绿灯亮时合并到 Live 目录中。

正如格雷格所说，虽然，你肯定想要根目录下的某个目录，但对特定结构没有要求。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-21T02:59:40.933

由于在 Subversion 中标记或分支的唯一方法是在其他树中制作副本，因此省略标准的 trunk/tags/branches 目录会阻止您在项目目录“外部”的位置创建存储库的副本. 如果您想在没有默认目录的情况下进行标记或分支，那么您最终只会创建它们并移动您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T19:44:27.437

这不能回答您的问题（其他人已经回答了），但如果您只想要主干，只需在进行初始获取/结帐时指定。

# ruby-on-rails - 如何将 gravatar/identicons 添加到 Ruby on Rails？

> ID：770876
> 
> 赞同：6
> 
> 时间：2009-04-21T02:56:22.093
> 
> 标签：ruby-on-rails

我查看了以下内容，但并不清楚，尤其是对 DataMapper 和 gem 依赖项的引用。

作为结果，我想要的只是能够获取我在 |do| 中的 @user.email 值。循环并显示一个头像，其中 identicon 设置为“y”——换句话说，那些可爱的看似随机的图画！

但是当我查看可用的内容时，并不清楚该怎么做——尤其是对 DataMapper 和 gem 依赖项的引用。

[http://github.com/chrislloyd/gravtastic/tree/master](http://github.com/chrislloyd/gravtastic/tree/master)

我正在玩这个，但我想在潜水太深之前得到其他人的反馈！

[http://www.thechrisoshow.com/2008/10/27/adding-gravatars-to-your-rails-apps](http://www.thechrisoshow.com/2008/10/27/adding-gravatars-to-your-rails-apps)

我安装了woods gravatar插件：

[http://github.com/woods/gravatar-plugin/tree/master](http://github.com/woods/gravatar-plugin/tree/master)这与下面提到的相同......但是，当我输入时出现错误：

```
<%= gravatar_for @user %> 
```

错误是：

```
undefined method `gravatar_for' for #<ActionView::Base:0x474ddf4> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2011-02-18T15:54:19.437

将此代码放在您的 ApplicationHelper 中，以便`gravatar_for`在所有视图中都可用。

```
def gravatar_for email, options = {}
    options = {:alt => 'avatar', :class => 'avatar', :size => 80}.merge! options
    id = Digest::MD5::hexdigest email.strip.downcase
    url = 'http://www.gravatar.com/avatar/' + id + '.jpg?s=' + options[:size].to_s
    options.delete :size
    image_tag url, options
end 
```

在视图中：

```
<%= gravatar_for 'my@mail' %>
<%= gravatar_for 'my@mail', :size => 48 %>
<%= gravatar_for 'my@mail', :size => 32, :class => 'img-class', :alt => 'me' %> 
```

我改进了倾斜的解决方案。遵循[Gravatar 指南](http://gravatar.com/site/implement/images/)，电子邮件应在散列前修剪和小写。此外，似乎`require 'digest'`不需要（在 Rails 3 上测试）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-10-08T20:50:46.687

不再赘述，而是给出更详细的答案：

正如 Sam152 所说，您必须从用户的电子邮件地址创建一个 MD5 散列，然后在对 gravatar 服务器的 GET 请求中使用该散列。

访问 MD5 哈希的最简单方法是通过 Digest，它是 ActionPack（在 ActionView 内部）gem 的一部分。将以下内容放在“config/environment.rb”中：

```
require 'digest' 
```

现在您只需要在希望显示用户头像的地方使用以下内容：

```
image_tag("http://www.gravatar.com/avatar.php?gravatar_id=#{Digest::MD5::hexdigest(@user.email)}", :alt => 'Avatar', :class => 'avatar') 
```

这不需要额外的 gem，如果您只需要拉入用户的 gravatar，您可以根据需要创建一个助手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T03:01:39.600

您需要对电子邮件地址进行[MD5 哈希](http://en.wikipedia.org/wiki/MD5)处理，然后将其放入 gravatar URL。这将为您提供图像 URL。下面是一个如何做到这一点的例子。

```
http://www.gravatar.com/avatar/  md5(email)  ?s=128&d=identicon&r=PG 
```

如果你想要那些随机出现的图画，你可以使用 MD5 哈希来获取它们。您可以在循环中散列键值并以这种方式获取列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T03:12:48.327

这里有一个 Gravatar Rails 插件：

[http://gravatarplugin.rubyforge.org/](http://gravatarplugin.rubyforge.org/)

像这样安装插件：

```
 ruby script/plugin install svn://rubyforge.org//var/svn/gravatarplugin/plugins/gravatar 
```

安装插件后，如果您的模型响应“电子邮件”方法，此标签将显示 Gravatar：

```
 <%= gravatar_for @user %> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-01-10T00:43:05.627

我使用[https://github.com/sinisterchipmunk/gravatar](https://github.com/sinisterchipmunk/gravatar) 它运行良好，我只使用基础知识，但它可以进行兑现和高级选项。

使用起来也很简单：

```
Gravatar.new(email).image_url 
```

对于标识，您可以按如下方式添加 wavatar

```
Gravatar.new(email).image_url + '?d=wavatar' 
```

# .net - Linq 条件查询

> ID：770886
> 
> 赞同：0
> 
> 时间：2009-04-21T03:03:20.847
> 
> 标签：.net, linq-to-sql

Linq 查询：

MyTable 中的记录有两个子记录，我想检查这些记录中的任何一个是否具有整数列表中的 Id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T03:06:17.717

这是一个开始...

```
from mt in MyTable 
where myIntegerList.Contains(mt.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T03:09:35.650

这是一个如何编写的示例：

```
var intList = new List<int>{2,5,223,55};
var query = from m in db.MyTable
            where intList.Contains(m.ChildRecord.Id)
            select m; 
```

# tomcat - 为什么 Tomcat 管理器重定向到 localhost:8080/company/www.company.org/index.html

> ID：770895
> 
> 赞同：0
> 
> 时间：2009-04-21T03:07:50.630
> 
> 标签：tomcat, redirect, web-applications

我已将静态（无 servlet、jsp 等）网站加载到 Tomcat 的 webapps 文件夹中。

我在 webapps/ourcompany 下有一个 index.html 文件，所以当我单击 tomcat 管理器中的 ourcompany 链接时，我希望被带到 ourcompany/index.html 页面。但是 Tomcat 不断将我重定向到 localhost:8080/ourcompany/www.ourcompany.org/index.html

有趣的是，当我第一次加载这个网站时，这是正确的 URL，因为大部分内容都在一个名为 www.ourcompany.org 的文件夹中 - 我将内容“向上移动（就文件夹结构而言）”到“清理”文件夹结构并获得更令人愉悦的地址。我想这可能与它有关。

如何获取 Tomcat 管理器中的链接以将我带到 localhost:8080/ourcompany/index.html 而不是 localhost:8080/ourcompany/www.ourcompany.org/index.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T03:13:09.917

index.html 中是否有将您重定向到 www.ourcompany.org/index.html 的内容？

一些javascript，元刷新等？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T03:15:19.647

检查您的 webapp 的 web.xml 并查看欢迎列表标签中提到的文件。查看这是否错误或打开该文件并查看其是否重定向到 localhost:8080/ourcompany/www.ourcompany.org/index.html url。

# security - MD5 的安全性低于 SHA 等吗？人。在实际意义上？

> ID：770900
> 
> 赞同：9
> 
> 时间：2009-04-21T03:12:46.610
> 
> 标签：security, hash, md5, sha

我在 SO 上看到[了](https://stackoverflow.com/questions/157998/whats-the-difference-between-sha-and-md5-in-php) [一些](https://stackoverflow.com/questions/116684/what-algorithm-should-i-use-to-hash-passwords-into-my-database) [问题](https://stackoverflow.com/questions/604792/best-general-purpose-digest-function)和[答案](https://stackoverflow.com/questions/335888/what-function-to-use-to-hash-passwords-in-mysql)，表明 MD5 不如 SHA 之类的安全。

我的问题是，**在我的情况下这值得担心吗？**

这是我如何使用它的示例：

1.  在客户端，我通过附加当前时间和密码，然后使用 MD5 对其进行哈希处理，为消息提供“安全”校验和。所以：`MD5(message+time+password)`。
2.  在服务器端，我正在使用我对发送时间和客户端密码的了解，对照发送的消息检查此哈希。

在这个例子中，**使用 SHA 而不是 MD5 真的更好吗？**

在什么情况下，哈希函数的选择在实际意义上*真的很*重要？

**编辑：**

澄清一下——*在我的例子*中，转向 SHA 算法有什么好处吗？

换句话说，在这个例子中，某人在*不知道共享密码的情况下*发送消息和正确的哈希值是否可行？

**更多编辑：**

为重复编辑道歉-我不清楚我在问什么。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-04-21T03:22:01.363

是的，在实践中值得担心。MD5 被严重破坏，以至于[研究](http://www.win.tue.nl/hashclash/rogue-ca/)人员能够伪造与证书颁发机构签署的真实证书相匹配的假证书。这意味着他们能够创建自己的假证书颁发机构，因此可以在完全信任他们的浏览器的情况下冒充他们认为的任何银行或企业。

现在，这需要他们使用 PlayStation 3 集群花费大量时间和精力，并且需要数周时间才能找到合适的碰撞。但是一旦被破坏，哈希算法只会变得更糟，永远不会更好。如果您完全关心安全性，最好选择完整的哈希算法，例如[SHA-2 系列](http://en.wikipedia.org/wiki/SHA_hash_functions)之一（SHA-1 也已被削弱，尽管没有 MD5 那样严重损坏）。

**编辑**：我为您提供的链接中使用的技术涉及能够选择两个任意消息前缀和一个公共后缀，它可以从中为每个前缀生成一个可以插入该前缀和公共后缀之间的数据块，生成与从另一个前缀构造的消息具有相同 MD5 和的消息。我想不出在您描述的情况下可以利用此特定漏洞的方法，并且通常，使用安全设备进行[消息身份验证](https://www.rfc-editor.org/rfc/rfc2104)比将其用于数字签名更能抵抗攻击，但我能想到一些您需要注意的漏洞，这些漏洞大多与您选择的哈希无关。

1.  如前所述，您的算法涉及将密码以纯文本形式存储在服务器上。这意味着您很容易受到任何能够在服务器上发现密码的信息泄露攻击。您可能认为如果攻击者可以访问您的数据库，那么游戏就结束了，但您的用户可能更愿意即使您的服务器受到威胁，他们的密码也不会被破坏。由于在线密码的激增，许多用户跨服务使用相同或相似的密码。此外，即使在代码执行或特权升级攻击不存在的情况下，也可能发生信息泄露攻击。

    您可以通过将密码存储在使用随机盐散列的服务器上来减轻这种攻击；您将这对存储在`<salt,hash(password+salt)>`服务器上，并将盐发送到客户端，以便它可以计算`hash(password+salt)`以代替您提到的协议中的密码。但是，这并不能保护您免受下一次攻击。

2.  如果攻击者可以嗅探客户端发送的消息，他可以对客户端的密码进行离线字典攻击。大多数用户的密码具有相当低的熵，一个包含几十万现有密码的好字典加上一些随机排列的时间可以让攻击者从嗅探消息中获得的信息很容易找到密码。

3.  您提出的技术不会对服务器进行身份验证。我不知道这是否是您正在谈论的网络应用程序，但如果是，那么可以执行 DNS 劫持攻击，或在不安全的无线网络上进行 DHCP 劫持的人，或任何类似的，可以做中间人攻击，他们从您的客户那里以明文形式收集密码。

4.  虽然当前针对 MD5 的攻击可能无法针对您描述的协议起作用，但 MD5 已受到严重破坏，并且哈希只会变得更弱，永远不会更强。你想打赌你会发现新的攻击可以用来对付你，并且有时间在你的攻击者有机会利用它之前升级散列算法吗？从目前比 MD5 更强的东西开始可能会更容易，以减少您不得不处理 MD5 被进一步破坏的机会。

现在，如果您这样做只是为了确保没有人在论坛或其他地方伪造来自其他用户的消息，那么可以肯定的是，任何人都不太可能会花费时间和精力来破坏您描述的协议。如果有人真的想冒充其他人，他们可能只需创建一个新的用户名，用 0 代替 O 或使用 Unicode 更相似的东西，甚至不用费心尝试伪造消息和破坏哈希算法。

如果这被用于安全性真正重要的事情，那么不要发明自己的身份验证系统。只需使用[TLS/SSL](http://en.wikipedia.org/wiki/Transport_Layer_Security)。密码学的基本规则之一是[不要发明自己的](http://www.schneier.com/crypto-gram-9904.html#different). 然后，即使在论坛的情况下，它可能并不重要，使用现成的东西比滚动你自己的东西更容易吗？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-21T04:31:09.993

在这种特殊情况下，我不认为您的应用程序最薄弱的环节是使用 md5 而不是 sha。md5 被“破坏”的方式是假设 md5(K) = V，有可能生成 K' 使得 md5(K') = V，因为输出空间是有限的（不是因为有任何减少搜索空间的技巧）。然而，K' 不一定是 K。这意味着如果你知道 md5(M+T+P) = V，你可以生成 P' 使得 md5(M+T+P') = V，这给出了一个有效的条目. 但是，在这种情况下，消息仍然保持不变，并且 P 没有受到损害。如果攻击者试图伪造带有 T' 时间戳的消息 M'，那么除非 P' = P，否则 md5(M'+T'+P') = md5(M'+T'+P) 的可能性很小。在这种情况下，他们会暴力破解密码。

但是，如果可以选择，您真的应该继续使用 sha。不使用它是没有意义的，除非使用它有严重的缺点。

第二件事是您可能不应该将用户的密码以纯文本形式存储在数据库中。您应该存储的是密码的哈希值，然后使用它。在您的示例中，哈希为：md5(message + time + md5(password))，您可以安全地将 md5(password) 存储在数据库中。但是，窃取您的数据库的攻击者（通过 SQL 注入之类的方式）仍然能够伪造消息。我看不出有什么办法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-04T02:26:06.290

布赖恩的回答涵盖了这些问题，但我确实认为需要稍微详细地解释一下

**您在这里使用了错误的加密算法**

MD5 在这里不对，Sha1 在这里用错 Sha2xx 用错了，Skein 用错了。

您应该使用的是[RSA 之类](http://en.wikipedia.org/wiki/RSA)的东西。

让我解释：

### 您的安全哈希有效地将密码发送给全世界。

您提到您的哈希是“时间+有效负载+密码”，如果第三方获得您的有效负载的副本并且知道时间。它可以找到密码（使用暴力破解或字典攻击）。因此，几乎就像您以明文形式发送密码一样。

取而代之的是，您应该查看[公钥密码术](http://en.wikipedia.org/wiki/Public-key_cryptography)，让您的服务器将公钥发送给您的代理，并让代理使用公钥加密数据。

中间没有人能够分辨消息中的内容，也没有人能够伪造消息。

另一方面，[MD5 在](https://stackoverflow.com/questions/800685/which-hash-function-should-i-choose/817121#817121)大多数情况下都非常强大。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-21T03:19:24.630

这取决于消息内容的价值。SHA 系列显然比 MD5 更安全（其中“更安全”意味着“更难伪造”），但如果您的消息是 twitter 更新，那么您可能不在乎。

如果这些消息是处理金融交易的分布式系统的 IPC 层，那么也许你更关心。

更新：我还应该补充一点，这两种摘要算法在很多方面本质上是可以互换的，那么使用更安全的算法会带来多大的麻烦呢？

更新 2：这是一个更彻底的答案：[http ://www.schneier.com/essay-074.html](http://www.schneier.com/essay-074.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T04:29:58.610

是的，有人可以在不知道共享密码的情况下发送消息和正确的哈希值。他们只需要找到一个哈希到相同值的字符串。

这有多普遍？2007 年，来自荷兰的一个团体宣布，他们在 MD5 哈希值为[3D515DEAD7AA16560ABA3E9DF05CBC80](http://www.win.tue.nl/hashclash/Nostradamus/)的文件中预测了 2008 年美国总统大选的获胜者。然后，他们创建了 12 个文件，除了候选人的姓名和后面的任意数量的空格外，所有文件都相同，这些文件哈希到该值。MD5 哈希值作为校验和毫无价值，因为太多不同的文件给出相同的结果。

如果我没看错的话，这与您的情况相同。只需将“候选人姓名”替换为“密码”即可。如果您真的想要安全，您可能应该使用不同的哈希函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T09:29:55.893

如果您要生成哈希 MAC，请不要发明您的方案。使用[HMAC](http://en.wikipedia.org/wiki/HMAC)。做 HASH(secret-key || message) 和 HASH(message || secret-key) 存在问题。如果您使用密码作为密钥，您还应该使用密钥派生函数。看看[pbkdf2](http://en.wikipedia.org/wiki/PBKDF2)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-08T02:54:15.237

是的，值得担心在这种情况下使用哪个哈希。我们先来看看攻击模型。攻击者可能不仅尝试生成值 md5(M+T+P)，还可能尝试找到密码 P。特别是，如果攻击者可以收集值 M [i]、 T [i]和相应的 md5( M [i] , T [i] , P) 那么他/她可能会尝试找到 P。对于散列函数，这个问题还没有像寻找冲突那样被广泛研究。我解决这个问题的方法是尝试与分组密码相同类型的攻击：例如差分攻击。而且由于 MD5 已经很容易受到差分攻击，我当然可以想象这样的攻击在这里可以成功。

因此，我建议您在这里使用比 MD5 更强的散列函数。我还建议您使用 HMAC 而不是仅使用 md5(M+T+P)，因为 HMAC 是针对您所描述的情况而设计的，并已进行了相应的分析。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T03:21:30.130

以这种方式使用 MD5 并没有什么不安全的地方。MD5 只是在某种意义上被破坏了，有一些算法可以在给定一堆数据 A 的情况下生成额外的数据 B 来创建所需的散列。这意味着，如果有人知道密码的哈希值，他们可以生成一个字符串，该字符串将产生该哈希值。不过，这些生成的字符串通常很长，因此如果您将密码限制为 20 或 30 个字符，您仍然可能是安全的。

使用 SHA1 而不是 MD5 的主要原因是 MD5 功能正在逐步淘汰。例如，Silverlight .Net 库不包含 MD5 加密提供程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-21T03:34:46.697

MD5 提供比 SHA 更多的冲突，这意味着某人实际上可以从不同的单词中获得相同的哈希（但很少见）。

SHA家族以可靠性着称，SHA1是日常使用的标准，而SHA256/SHA512是政府和银行设备的标准。

对于您的个人网站或论坛，我建议您考虑使用 SHA1，如果您创建更严重的类似商业，我建议您使用 SHA256/SHA512（SHA2 系列）

[您可以查看有关MD5](http://en.wikipedia.org/wiki/Md5)和[SHA](http://en.wikipedia.org/wiki/SHA_hash_functions)的维基百科文章

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-05T02:37:54.083

MD5 和 SHA-1 都具有加密弱点。MD4 和 SHA-0 也受到威胁。

您可能可以安全地使用 MD6、Whirlpool 和 RIPEMD-160。

请参阅普林斯顿大学的以下幻灯片，向下滚动到最后一页。

[http://gcu.googlecode.com/files/11Hashing.pdf](http://gcu.googlecode.com/files/11Hashing.pdf)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-08T01:36:27.873

我不会评论 MD5/SHA1/等。问题，所以也许你会认为这个答案没有实际意义，但让我感到非常有趣的是每当使用 MD5 等。用于在数据库中散列密码出现。

如果有人在您的数据库中四处寻找，那么他们可能很想查看您的密码哈希，但他们很可能想要窃取您可能在其他表中的个人信息或任何其他数据。坦率地说，在这种情况下，你有更大的鱼要炸。

我并不是说忽略这个问题，就像我说的那样，这与你是否应该使用 MD5、SHA1 或其他任何东西来散列密码并没有太大关系，但我每次阅读时都会微微发痒有人对数据库中的纯文本密码感到有些不安。

# ruby-on-rails - 如何从控制器中检索不同模型的属性？

> ID：770901
> 
> 赞同：0
> 
> 时间：2009-04-21T03:12:48.297
> 
> 标签：ruby-on-rails

我有一个供应商控制器用于显示：

```
def show
@vendor = Vendor.find(params[:id])

respond_to do |format|
  format.html # show.html.erb
  format.xml  { render :xml => @vendor }
end
end 
```

在我的评论视图中（其中供应商：has_many 评论）

```
 <% if @vendor.reviews.empty? %>
        No Analyst Reports yet
    <% else %>
        <% for review in @vendor.reviews %>

            <%= review.user_id %>
            <%= review.summary %><br />
            <hr class="span-5" />

        <% end %>
    <% end %> 
```

因此，对于特定供应商的所有评论，我基本上都在经历一个“for”循环（这对我来说是一个棘手的概念，但它似乎有效）。

所以：我想显示 User.name 和 user.email。我知道每个相应评论的 user_id 是什么 (review.user_id)，但我不知道如何显示 User 模型的值。

我认为使用 find_by_id 会起作用，但它无法识别用户。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T03:59:15.033

如果您已经在 Review 模型和 User 模型之间建立了`:has_one`关系，那么您可以使用`review.user`来访问它。因此，您将使用 , 等获得用户`review.user.name`属性`review.user.email`。

请注意，如果您要检索许多子记录以像这样循环，您可能需要使用参数调用`find`以`:include`减少查询的数量。就像是：

```
Vendor.find(params[:id], :include => { :reviews => :user } ) 
```

有关更多信息，请参阅[has_one 的 API 文档。](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#M001790)

# python - 在共享服务器上安装 Django：没有名为 MySQLdb 的模块？

> ID：770904
> 
> 赞同：1
> 
> 时间：2009-04-21T03:13:44.393
> 
> 标签：python, django, mysql

我收到此错误

```
Traceback (most recent call last):
  File "/home/<username>/flup/server/fcgi_base.py", line 558, in run
  File "/home/<username>/flup/server/fcgi_base.py", line 1116, in handler
  File "/home/<username>/python/django/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/home/<username>/python/django/django/core/handlers/base.py", line 73, in get_response
    response = middleware_method(request)
  File "/home/<username>/python/django/django/contrib/sessions/middleware.py", line 10, in process_request
    engine = import_module(settings.SESSION_ENGINE)
  File "/home/<username>/python/django/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/<username>/python/django/django/contrib/sessions/backends/db.py", line 2, in ?
    from django.contrib.sessions.models import Session
  File "/home/<username>/python/django/django/contrib/sessions/models.py", line 4, in ?
    from django.db import models
  File "/home/<username>/python/django/django/db/__init__.py", line 41, in ?
    backend = load_backend(settings.DATABASE_ENGINE)
  File "/home/<username>/python/django/django/db/__init__.py", line 17, in load_backend
    return import_module('.base', 'django.db.backends.%s' % backend_name)
  File "/home/<username>/python/django/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/<username>/python/django/django/db/backends/mysql/base.py", line 13, in ?
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb 
```

当我尝试在我的共享服务器上运行此脚本时

```
#!/usr/bin/python
import sys, os

sys.path.insert(0, "/home/<username>/python/django")
sys.path.insert(0, "/home/<username>/python/django/www") # projects directory

os.chdir("/home/<username>/python/django/www/<project>")
os.environ['DJANGO_SETTINGS_MODULE'] = "<project>.settings"

from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false") 
```

但是，我的虚拟主机`MySQLdb`是几个小时前才为我安装的。当我从 shell 运行 python 时，我可以`MySQLdb`很好地导入。为什么这个脚本会报告它找不到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T04:05:10.883

您的 python 路径上缺少 python-mysql 数据库驱动程序。看看你是否能弄清楚 WSGI 看到的 pythonpath ......这可能与你在 shell 中遇到的不同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T03:28:56.820

是否有可能您的 settings.py 中有错误的 DATABASE_ENGINE 设置？它应该是 mysql 而不是 mysqldb 。

# c# - 类型参数命名准则是什么？

> ID：770908
> 
> 赞同：25
> 
> 时间：2009-04-21T03:15:24.920
> 
> 标签：c#, .net, generics, naming-conventions

我注意到，正如在[Essential C# 3.0](https://rads.stackoverflow.com/amzn/click/com/0321533925)书中看到的那样，参数通常定义为*T*或*TEntity*

例如：

```
public class Stack<T>
{

} 
```

或者

```
public class EntityCollection<TEntity>
{

} 
```

您如何决定使用哪个名称？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-04-09T14:32:04.047

[我从http://referencesource.microsoft.com/dotnet46.zip](http://referencesource.microsoft.com/dotnet46.zip)获取了 .NET Framework 4.6 源代码。提取它并处理数据以从所有泛型类声明中提取泛型参数名称。

注意：我只从只有一个泛型参数的泛型类中提取泛型参数名称。所以这没有考虑具有多个泛型参数的泛型类。

```
grep -nohrP "class \w+<T\w*>" | sed -e 's/.*\<//' -e 's/>//' | sort | uniq -cd | sort -bgr 
```

结果：

```
361 T
 74 TChannel
 51 TKey
 33 TResult
 30 TSource
 28 T_Identifier
 18 TElement
 12 TEntity
 11 TInputOutput
  7 TItem
  6 TLeftKey
  6 TFilterData
  5 T_Query
  4 T_Tile
  4 TInput
  3 TValue
  3 TRow
  3 TOutput
  3 TEventArgs
  3 TDataReader
  3 T1
  2 TWrapper
  2 TVertex
  2 TValidationResult
  2 TSyndicationItem
  2 TSyndicationFeed
  2 TServiceType
  2 TServiceModelExtensionElement
  2 TResultType
  2 TMessage
  2 TLocationValue
  2 TInnerChannel
  2 TextElementType
  2 TException
  2 TEnum
  2 TDuplexChannel
  2 TDelegate
  2 TData
  2 TContract
  2 TConfigurationElement
  2 TBinder
  2 TAttribute 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2009-04-21T03:20:03.753

这是我的一套规则

*   如果有一个参数，我将其命名为 T
*   如果有多个参数，我会选择一个有意义的名称并以 T 为前缀。例如 TKey、TValue

对于半官方意见，值得查看有关该主题的框架设计指南：

*   [http://blogs.msdn.com/brada/archive/2005/12/02/497340.aspx](http://blogs.msdn.com/brada/archive/2005/12/02/497340.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-21T03:20:32.707

最后，这并不重要。使用有意义的命名约定。

```
public class MyDictionary<T1, T2>
{ } 
```

可能不如

```
public class MyDictionary<KeyType, ValueType> 
```

（或 TKey、TValue，如果您愿意的话）。

如果我正在查看您的实施并且不得不思考“好吧，这又是什么'T3'？” 那你没做好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-08T14:40:41.943

到目前为止，我已经查看了所有答案，我认为它们都部分正确，但并没有完全考虑所有情况。

我的观点是命名应该总是增加上下文价值。因此，命名一个类型参数`TEntity`，因为它的类型约束`IEntity`并不一定会增加价值，尤其是 IntelliSense 无论如何都会指示它的类型。名称应反映类型参数的功能角色。但这并不是说如果没有其他合适的描述性名称就不应该这样做（并且单个字母不会不言自明）。

在**一个**类型参数的情况下，上下文在类方面通常应该是显而易见的，这样`T`就可以了。对于多个类型参数，为每个类型添加一个描述性上下文，例如`TKey`和`TValue`- 如果多个类型参数是相同的类型，则不应使用类型的另一个原因（导致`TEntity1`并且`TEntity2`增加很少的价值）？

所以，我的回答类似于 JaredPar 和 Tomas Aschan 的回答，但增加了限定。

**2019 年 4 月 12 日更新：**[Microsoft 关于类型参数命名的指南对](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/generic-type-parameters#type-parameter-naming-guidelines)命名约定非常清楚。因此，我修改了我的答案以反映这一点，并删除了我说可以使用`T`,`U`等或`T1`,`T2`等的段落。根据指南，单个字母只能在有单个类型参数的情况下使用（如果不言自明）。**始终**为多个类型参数使用描述性名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-04-05T22:11:58.690

我认为您应该考虑以下几点：

1.  *有多少*类型参数？
2.  他们有什么*限制*吗？
3.  它们是否*用于*特定的事情？

一般来说，我总是在我的类型参数前面加上`T`，并使它们“足够具有描述性”，这意味着当我查看代码时，它们需要具有描述性，以便我了解它们的作用和/或对它们的要求在六个月内。

**在我看来，有几个例子**可以很好地命名类型参数（此列表中的编号独立于上面的编号......）：

1.  一个参数，从类名（或代码中的上下文）可以明显看出为什么需要类型名：

    ```
    List<T> 
    ```

    由于我们可以看到这是一个类型的对象列表`T`，并且对 没有特定的约束`T`，因此无需为类型参数提供更具体的名称。

2.  几个参数，代表通用类/接口中的不同事物：

    ```
    IDictionary<TKey, TValue> 
    ```

    我们需要能够区分这两个参数，因此我们不为 value 提供键类型，反之亦然。因此，将参数命名为`Key`and`Value`并以 为前缀`T`似乎是合适的。
    我必须强调，这是比`IDictionary<T1, T2>`or更好的做法`IDictionary<T, U>`，因为在后两种情况下，无法直观地知道哪个参数将用于什么。

3.  一个类型参数，但类型必须满足某些要求或其他：

    ```
    Repository<TEntity> where TEntity : class, IEntity 
    ```

    由于我们要求该类型实现另一个接口，因此有必要提醒程序员这是这种情况。选择一些能帮助您了解该类型所需内容的信息名称，并在其前面加上`T`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T03:24:28.453

来自微软的例子：

```
public interface IDictionary<TKey, TValue> 
```

type 参数代表*something*，所以如果你想拥有可读的代码，这个“something”应该从代码中显而易见（没有额外的注释）。使用 T、V、U 之类的类型名称不一定很明显（但有时可以）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T03:19:27.437

我真的不知道任何关于泛型的可靠约定。

我看到的样本虽然使用了 ff 变体之一：

*   `T`对于单一类型参数
*   `K`对于第二个类型参数，`U`对于第三个，例如，`SomeGeneric<T, K, U>`
*   `T`以及用于第二和第三类型参数的数字，例如，`SomeGeneric<T1, T2, T3>`

我猜仿制药足够新，以至于尚未建立通用的行业惯例。

# vb.net - 使用 .Skip() 和 .Take() 方法对 DataTable 进行 Linq

> ID：770909
> 
> 赞同：2
> 
> 时间：2009-04-21T03:15:37.790
> 
> 标签：vb.net, linq, datatable

我有这个返回 DataTable 的函数：

```
Public Shared Function GetDataTable(ByVal PageSize As Integer, ByVal CurrentPagea As Integer) As DataTable

    Dim dtData As New DataTable
    dtData = da_Book_Content.GetDataContent()

    'TODO : how to do data paging for dtData with Linq 

    Return dtData

End Function 
```

在页面上，我有 DataList 来显示数据。它有效，但我想实现分页功能。我该怎么做才能使用 Linq 延迟加载功能？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T03:31:29.280

如果 DataTable 已经来自其他地方而不是 LINQ2SQL，那么延迟加载就不会发挥作用。

但是，您可以使用 LINQ2DataSets 来利用 Skip() 和 Take() 扩展方法。

您需要添加对程序集的引用：`System.Data.DataSetExtensions.dll`然后您可以这样编写函数：

```
Public Shared Function GetDataTable(ByVal PageSize As Integer, ByVal CurrentPagea As Integer) As DataTable    
    Dim dtData As New DataTable = da_Book_Content.GetDataContent()    
    Dim query = dtData.AsEnumerable().Skip(CurrentPage).Take(PageSize)    
    Return query.CopyToDataTable()
End Function 
```

# debugging - 在 OS X 或 Linux 上进行测试和调试应该了解哪些基础知识？

> ID：770919
> 
> 赞同：1
> 
> 时间：2009-04-21T03:20:50.677
> 
> 标签：debugging, unix, testing

我的一些高级 QA 工程师在城里待了几天，我正在准备让他们测试我们移植到 Linux 和 OS X 的应用程序。这些人很聪明。虽然他们不是程序员，但他们确实了解如何打开内存转储以查找函数指针，并编写简单的 Python 来帮助自动化他们的工作。但他们一直使用windows，只熟悉那里的工具。

所以我的问题是：你会教他们什么来帮助测试在 OS X 或 Linux 上运行的本机应用程序？

我的一些想法是：

*   文件系统的基础知识，配置文件在 (/etc) 日志文件在 (/var/log)
*   如何使用 locate、find、grep 和 co。
*   使用 gdb 检查核心转储

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T03:24:37.457

首先想到的两件事

1.  学习 shell（sh、ksh、bash 或他们将要使用的任何东西）
2.  学习如何使用编辑器（vi/m、emacs、pico 甚至？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T03:37:50.683

如果他们不害怕 gdb 和[分析核心转储](http://en.wikipedia.org/wiki/Core_dump)，那么他们绝对应该了解[valgrind](http://valgrind.org/)。

了解如何进行[系统调用跟踪](http://en.wikipedia.org/wiki/Strace)和[库函数调用跟踪](http://en.wikipedia.org/wiki/Ltrace)也很有帮助。

如果他们需要杀死[http://en.wikipedia.org/wiki/Kill_(command)](http://en.wikipedia.org/wiki/Kill_(command))，一个了解信号的叛徒进程[http://en.wikipedia.org/wiki/Signal_(computing](http://en.wikipedia.org/wiki/Signal_(computing)) ) 会有所帮助。

如果他们需要在 Windows 和 Linux 之间转换文本文件，tr 命令[http://en.wikipedia.org/wiki/Tr_(Unix)](http://en.wikipedia.org/wiki/Tr_(Unix))是他们的朋友。

如果他们需要下载文件，[wget](http://en.wikipedia.org/wiki/Wget)是一个易于使用的命令行工具。

总体而言，对最常用的 Linux shell [bash](http://en.wikipedia.org/wiki/Bash)有一定的了解应该是基本要求。

有一个（非常基本的）[Windows to Linux: A Beginner's Guide](http://www.reallylinux.com/docs/windowstolinux.shtml)，它可能有助于克服最初的障碍。还有一些文章在[这里](http://www.reallylinux.com/docs/consult.shtml)。

这是[GNU/Linux 命令行的初学者介绍](http://www.freesoftwaremagazine.com/articles/command_line_intro)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T03:38:37.873

我会教 tham 如何设置 ulimit 以便可以创建核心文件。我可能还会包含有关基本信号编号及其含义的信息。您还可以向他们提供 ftp 的概述，以将文件移到他们更舒服的地方，以及 CR LF 问题的基础知识。我会向他们解释 UNIX 和 Windows 之间的主要区别（斜线不同）。我还会考虑设置一个 samba 共享，以便他们可以使用他们选择的工具来编辑文件。

教他们如何重定向输出以及如何使用 tee 可能会让他们受益。文件权限的基础知识是必须的。如果禁用 telnet 端口，解释 ssh 和 telnet 可用于访问这些远程框可能会有所帮助。最后，我会告诉他们删除文件没有 Windows 的撤消功能。

您可能会考虑解释 ps -ef 以及简单的管道和 grep。我会向他们展示如何后台进程，并可能使用 kill -9 杀死进程。top、xload 和 pstree 等工具可能会帮助他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T03:56:57.143

我会教他们使用简单的 unix 工具，例如 time/sed/grep/甚至 perl。Shell 脚本和“许多简单的命令”理念。

另一方面，学习如何使用更复杂的工具，例如

*   瓦尔格林
*   数据库
*   跟踪
*   跟踪

编辑：当然，需要一些文本编辑器（vim/emacs/mcedit/etc）。

# python - Python $OUTPUT_RECORD_SEPARATOR 和 $INPUT_RECORD_SEPARATOR 等效

> ID：770925
> 
> 赞同：0
> 
> 时间：2009-04-21T03:23:33.730
> 
> 标签：python, file-io

Python 是否与 Perl 中的 $OUTPUT_RECORD_SEPARATOR 或 $\ 等效？

**更新：** 我完全错了......如果有这样的事情，我正在寻找一个相当于 $INPUT_RECORD_SEPARATOR 的 Python？您可以覆盖的东西，这样当您执行 readline() 类型时，它会调用它寻找换行符以外的东西。很抱歉把原来的问题搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T23:53:13.180

如果您想要将输入中的 、 或 中的任何`\r`一个`\n`视为`\r\n`换行符，那么您可以在“open()”调用中使用“通用换行符支持”。

在[Python 2.6 open()](http://docs.python.org/2.6/library/functions.html#open)中，这需要通过在模式字符串中添加 'U' 来显式启用：

```
in_file = open('foo.txt', 'rU') 
```

它还取决于 Python 解释器中是否提供这种支持；但文档说这是默认情况下可用的。

在[Python 3.0 open()](http://docs.python.org/3.0/library/functions.html#open)中，通用换行行为始终可用，并且是默认行为；您可以为参数选择具有不同值的不同行为`newline`。

如果您希望输入解释由换行符以外的其他内容终止的记录，那么您不想要“readlines”（根据名称，它专门读取行，而不是一般的记录）并且 AFAIK 将不得不实现您自己的记录读取代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T04:53:20.050

您可以使用 ''.join 方法。例如

```
# print 'foo', 'bar', 'baz' separated by spaces
print 'foo', 'bar', 'baz'
# print separated by commas
print ', '.join(['foo', 'bar', 'baz']) 
```

编辑：

好的，我误解了 ''.join 的目的`OUTPUT_RECORD_SEPARATOR`，所以 ''.join 不是你想要的。

`print 'foo'`相当于`sys.stdout.write('foo'+'\n')`，所以你可以推出自己的打印功能：

```
def myprint(*args, end='\n'):
    sys.stdout.write(' '.join(args) + end) 
```

或者使用工厂函数更进一步：

```
def make_printer(end):
    def myprint(*args, end='\n'):
        sys.stdout.write(' '.join(args) + end)
    return myprint

# usage:
p = make_printer('#')
p('foo', 'bar', 'baz') 
```

最后，如果你有胆量，你可以覆盖 sys.stdout：

```
sys.old_stdout = sys.stdout
class MyWrite(object):
    def __init__(self, end='\n'):
        self.end = end
    def write(self, s):
        sys.old_stdout.write(s.replace('\n', self.end)) 
```

这将导致`print`语句产生替代行结尾。用法：

```
sys.stdout = MyWrite('!\n')
print 'foo'
# prints: foo! 
```

请注意，您可能需要覆盖的不仅仅是 write() - 或者至少为诸如 MyWrite.flush() 之类的东西提供重定向到 sys.old_stdout.flush()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T04:58:48.337

Python 3 的 print 函数有`sep`和`end`参数。

```
print('foo', 'bar', 'baz', sep='|', end='#') 
```

请注意，在 Python 3 中，`print`不再是语句，而是函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T08:20:06.543

在 Python pre-3 中，您可以禁止在行尾附加“，”的标准分隔符：

```
print yourVar,  #these 3 lines print without any newline separator
print yourVar, 
print yourVar, 
```

如果您想使用非标准分隔符，请取消普通分隔符并打印您的：

```
print yourVar, yourSep,
print yourVar, yourSep,
print yourVar, yourSep, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-03T09:13:07.147

```
open('file').read().split(your_separator_of_choice) 
```

与`readlines()`此处的唯一区别是生成的列表项最后不会保留分隔符。

# .net - 选择要在 Visual Studio 应用程序中使用的 .NET Framework

> ID：770929
> 
> 赞同：3
> 
> 时间：2009-04-21T03:25:43.740
> 
> 标签：.net, visual-studio, visual-studio-2005

如果我的机器上安装了不同的 .NET 框架（即 1.1、2.0、3.0、3.5），VS2005 是否可以选择使用哪个框架来创建/编译应用程序（Winform/Webform）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T03:29:07.053

不，这在 Visual Studio 2005 中是不可能的。Visual Studio 2008 支持多目标版本，它允许您以 2.0、3.0 或 3.5 框架为目标。但是，它不允许您以 1.0 为目标

ScottGu 就这个主题发表了一篇长篇博文，您可能会觉得值得一读：

*   [http://weblogs.asp.net/scottgu/archive/2007/06/20/vs-2008-multi-targeting-support.aspx](http://weblogs.asp.net/scottgu/archive/2007/06/20/vs-2008-multi-targeting-support.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T03:28:19.880

不，您需要使用 VS2008 来执行此操作。

即使那样，您也只能在 2.0、3.0 和 3.5 之间进行选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T03:29:20.830

在 VS 2008 中，您可以选择目标框架（通过右键单击解决方案），但不能从 VS 2005 中选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T09:40:13.287

遗憾的是，仅允许基于 2.0 CLR（即 2.0、3.0、3.5、3.5SP1）的定位。

# openssl - 我自己/小型组织的证书颁发机构

> ID：770941
> 
> 赞同：3
> 
> 时间：2009-04-21T03:30:34.070
> 
> 标签：openssl, ssl-certificate, certificate-authority, client-certificates

我需要一个满足以下条件的小型 CA 软件：

1.  CLI 接口（我们都非常讨厌服务器软件的 gui 东西，不是吗？）
2.  为网站颁发证书。所以我可以在客户端机器上安装一个根证书来摆脱那个警告）
3.  使用预定义的值颁发用户证书（作为 p12 和其他东西，所以我可以使用它们进行身份验证）。

我在看tinyca，但它有点过时了，对我来说效果不佳。

Openssl 可以完成所有这些工作，因此我可以编写一堆 shell 脚本（或者 Makefile）来自动执行此任务。所以我想知道是否已经有人这样做了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-11-30T17:40:57.317

[XCA](http://xca.sourceforge.net/) — 一个简洁的小工具，完全符合我的要求。虽然没有 CLI。

# pdf - 如何禁用pdf页面的默认工具栏

> ID：770949
> 
> 赞同：0
> 
> 时间：2009-04-21T03:35:15.307
> 
> 标签：pdf

我需要通过禁用工具栏、没有右键单击、没有文本选择、没有应对粘贴来提供 pdf 页面的一些安全性。谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T03:40:48.120

我不认为你能做到。据我所知，现在有办法以编程方式禁用工具栏或您描述的任何功能。这肯定是为文档提供安全性的错误方式。也许你应该看看其他格式。

作为一般经验法则，如果有人可以在他们的计算机上看到它，他们就可以复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T14:42:26.873

无法在 Adob​​e Reader（或任何其他阅读器）中禁用工具栏或右键单击功能 - 这不是 PDF 规范的功能。但是，可以使用许多不同的 PDF 库来禁用内容（文本、图像等）复制。您还可以防止打印、页面提取、文档修改等。

可以为您提供此功能的两个 PDF 开发人员库是：

*   [快速 PDF 库](http://www.quickpdflibrary.com/)
*   [坚实的框架](http://www.soliddocuments.com/products.htm?product=SolidFramework)

# c# - 为什么不允许在不同类型参数之间进行转换？

> ID：770951
> 
> 赞同：0
> 
> 时间：2009-04-21T03:37:13.103
> 
> 标签：c#, .net, generics, covariance, contravariance

我只是不明白，因为将一个通用容器转换为另一个容器会非常有用吗？

```
Stack <IType> stack = new Stack<SomeType>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T03:42:42.170

您是在谈论这样的转换吗？

```
IFoo<Child> child = ...;
IFoo<Parent> parent = child; 
```

如果是这样，这就是所谓的协方差。这通常与它的对应逆变器配对。当前版本的 C# 中确实没有此功能。但它将在 C# 和 VB.Net 的下一版本中可用。

关于即将发布的一些文章

*   [http://blogs.msdn.com/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx](http://blogs.msdn.com/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)
*   [http://www.leading-edge-dev.de/?p=246](http://www.leading-edge-dev.de/?p=246)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T03:49:46.723

虽然@JaredPar 说的是真的，但今天有一些可用的集合的变通方法。例如，如果从一种类型到另一种类型的合法转换，您可以使用 Cast IEnumerable 扩展。

```
List<Foo> list = barList.Cast<Foo>().ToList(); 
```

或者您可以使用 Select 从一种类型显式转换为另一种类型。

```
List<double> dList = intList.Select( i => Convert.ToDouble( i ) ).ToList(); 
```

请注意，这两种方法都将生成适当类型的新集合，而不是简单地将集合分配给不同类型的变量，这将在 C#/VB 的下一版本中的某些条件下可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T03:50:22.463

关于你给出的例子：

```
Stack <IType> stack = new Stack<SomeType>(); 
```

如果我们这样做会发生什么：

```
stack.Add(new SomeOtherTypeNotDerivedFromSomeType()); 
```

这是.Net中不允许协方差的基本原因，我猜是因为通用容器的底层集合不一定与声明的类型匹配。Eric Lippert 的文章非常详细（比我真正能做到的还要多）。

# sql-server - 使用函数将全文搜索索引放在视图上

> ID：770954
> 
> 赞同：1
> 
> 时间：2009-04-21T03:39:58.667
> 
> 标签：sql-server, full-text-search

我正在使用 SQL Server 2008，我的视图如下所示：

```
select ID, dbo.functionname(ID) from tablename 
```

我正在尝试对此进行全文索引，但它似乎没有我可以使用的唯一索引。tablename.ID 是唯一标识符。

我尝试在其上创建索引，但它说它无法架构绑定视图，因为该函数不是架构绑定的。

我需要做什么才能创建全文索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T16:21:30.763

为了能够创建索引视图，视图必须是确定性的，也就是说，它必须保证在它的每个查询上都是相同的。

你的用户函数是[确定性](http://msdn.microsoft.com/en-us/library/aa214775%28SQL.80%29.aspx)的吗？

> 用户定义的函数确定性
> 
> 用户定义的函数是确定性的还是非确定性的取决于函数的编码方式。用户定义的函数是确定性的，如果：
> 
> ```
> * The function is schema-bound.
> 
> * All built-in or user-defined functions called by the user-defined 
> ```
> 
> 函数是确定性的。
> 
> ```
> * The body of the function references no database objects outside 
> ```
> 
> 函数的范围。例如，确定性函数不能引用函数本地表变量以外的表。
> 
> ```
> * The function does not call any extended stored procedures. 
> ```
> 
> 不满足这些条件的用户定义函数被标记为不确定的。用户定义的函数体中不允许内置的非确定性函数。

你的函数是 SchemaBound 吗？

```
alter function [dbo].[UserFunction] 
(@example int = 1 ) 
returns int
with schemabinding
as
begin
  return 1
end 
```

你的观点是 SchemaBound 吗？

```
ALTER VIEW dbo.UserView
WITH SCHEMABINDING
AS
SELECT ID, [dbo].userFunction 
```

要创建索引视图，您必须首先创建一个[唯一的聚集索引（参见底部的常见问题解答）](http://msdn.microsoft.com/en-us/library/dd171921.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T04:04:47.833

我想你的意思不是在上面的评论中“不”模式绑定重新创建你的视图“WITH SCHEMABINDING”然后创建一个唯一的聚集索引，如此处所述[http://www.mssqltips.com/tip.asp?tip=1610](http://www.mssqltips.com/tip.asp?tip=1610) 然后尝试添加你的全文索引

# .net - XML 编码问题

> ID：770962
> 
> 赞同：1
> 
> 时间：2009-04-21T03:42:50.610
> 
> 标签：.net, xml, unicode, encoding, utf-8

我想知道是否有快速的方法来查找 XML 文档是否以 UTF-8 正确编码并且不包含 XML UTF-8 编码中不允许的任何字符。

```
<?xml version="1.0" encoding="utf-8"?> 
```

提前谢谢，乔治

EDIT1：这是我的 XML 文件的内容，包括文本形式和二进制形式。

[http://tinypic.com/view.php?pic=2r2akvr&s=5](http://tinypic.com/view.php?pic=2r2akvr&s=5)

我曾尝试使用xmlstarlet之类的工具进行检查，结果是正确的（由于超出了UTF-8的范围而无效），但是错误消息不正确，因为在我上面发布的链接中，没有char的值为0xDFDD。有任何想法吗？

顺便说一句：我可以将 XML 文件发送给任何人，但我没有找到将文件作为附件上传的方法。如果有人需要此文件进行分析，请随时告诉我。

```
D:\xmlstarlet-1.0.1-win32\xmlstarlet-1.0.1>xml val a.xml
a.xml:2: parser error : Char 0xDFDD out of allowed range
<URL>student=1砜濏磦&lt;/URL>
              ^
a.xml:2: parser error : Char 0xDFDD out of allowed range
<URL>student=1砜濏磦&lt;/URL>
              ^
a.xml:2: parser error : internal error
<URL>student=1砜濏磦&lt;/URL>
              ^
a.xml:2: parser error : Extra content at the end of the document
<URL>student=1砜濏磦&lt;/URL>
              ^
a.xml - invalid 
```

EDIT2：我也使用工具 libxml 来检查 XML 文件的验证，但在启动此工具时遇到错误。这是屏幕快照。有任何想法吗？

[http://tinypic.com/view.php?pic=2ildjpe&s=5](http://tinypic.com/view.php?pic=2ildjpe&s=5)

操作系统是 Windows Server 2003 x64。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T03:46:24.783

试试这些

1.  [http://validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

2.  [http://www.w3schools.com/XML/xml_validator.asp](http://www.w3schools.com/XML/xml_validator.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T07:15:41.800

[libxml2](http://xmlsoft.org/)可以做到这一点，它可以作为库（集成到您的程序中）或通过命令行工具 xmllint 使用。这是 xmllint 的示例：

```
[Proper file] 
% head test.xml
<?xml version="1.0" encoding="utf-8"?>
<café>Ils s'étaient ...

% xmllint --noout test.xml
% 

[One byte in a multibyte character removed]
% xmllint --noout test.xml
test.xml:2: parser error : Input is not proper UTF-8, indicate encoding !
Bytes: 0xC3 0x74 0x61 0x69
<café>Ils s'Ãtaient ...
             ^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T04:36:15.863

我想您想以编程方式执行此操作？在这种情况下，这在很大程度上取决于您使用的编程语言——它会是哪种语言？

例如，我以前在 PHP 中使用过此代码。preg_match 允许使用 /u 修饰符（我认为这是 PHP 特有的），它将模式和与之匹配的字符串视为 UTF-8。副作用是每次执行此操作时都会检查整个字符串的 UTF-8 有效性。HTML/XHTML 不允许除制表符、换行符、空格等之外的 C0/C1 控制代码，因此我还添加了一种方法来检查这些代码。

```
function validate($allowcontrolcodes = false)
    // returns true if this is a valid utf-8 string, false otherwise.  
    // if allowcontrolcodes is false (default), then most C0 codes below 0x20, as
    // well as C1 codes 127-159, will be denied - recommend false for html/xml
    {
        if ($this->string=='') return '';
        return preg_match($allowcontrolcodes
            ? '/^[\x00-\x{d7ff}\x{e000}-\x{10ffff}]++$/u'
            : '/^[\x20-\x7e\x0a\x09\x0d\x{a0}-\x{d7ff}\x{e000}-\x{10ffff}]++$/u',
            $this->string) ? true : false;  
    } 
```

另一种方法是使用 DOM，它有多种语言可用。DOM 文档对象有一个 LoadXML 方法，该方法从 XML 格式的字符串加载文档。如果您输入的文档根据其指定的任何字符编码无效，这将失败，但不会专门强制执行 UTF-8 编码，但如果成功，您可以检查文档对象的“编码”属性以看看它是什么编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-21T08:26:29.430

最简单的方法是通过命令行实用程序运行 XML 来执行此检查。

我总是有一个[XMLStar](http://xmlstar.sourceforge.net/)的副本可用于这样的东西。它会立即指示它是否可以/不能解析您的 XML，从而指示编码是否正确。

如果您正在寻找一种编码方法来执行此操作，只需将 XML 加载到您选择的 XML 解析器中。编码错误将*立即*触发解析器异常（由于编码错误，根据定义无法进行解析）

例如

```
XmlDocument xDoc = new XmlDocument(); 
```

接下来使用 load 方法从指定的流中加载 XML 文档。

```
xDoc.Load("sampleXML.xml"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T08:12:40.813

我不知道是什么导致了您的问题，但这不是 UTF-8 的限制或编码过程中的错误。UTF-8 可以对 Unicode 已知的每个字符进行编码，并且有问题的字节序列 (`ED BF 9D`和`ED B4 82`) 是有效的——也就是说，第一个字节`1110`以指示三字节序列开头，而其他两个字节中的每一个都以`10`连续开头字节应该是。他们试图*编码*的值是无效的。

> Unicode 和 ISO/IEC 10646 不会也永远不会将字符分配给 U+D800–U+DFFF 范围内的任何代码点，因此代理对中的单个代码值永远不会代表字符。[-维基百科](http://en.wikipedia.org/wiki/UTF-16/UCS-2)

您的问题字符是`U+DFDD`和`U+DD02`。用于代理对的范围中有两个字符这一事实似乎表明它们*应该*是代理对，但这不起作用。使用代理对的是 UTF-16；UTF-8 会将字符编码为单个四字节序列。

另一种可能性是[修改后的 UTF-8](http://en.wikipedia.org/wiki/UTF-8#Modified_UTF-8)，它*确实*分别对代理对的每个字节进行编码。但这也不起作用：代理对总是由高代理范围 ( `U+DC00..U+DFFF`) 中的一个字节和低代理范围 ( `U+D800..U+DBFF`) 中的一个字节组成。这些字符都来自高代理范围。

因此，这似乎是数据错误而不是编码错误的问题。如果我们知道这些角色应该是什么，那将会有很大帮助。如果做不到这一点，一些关于你期望什么样的数据（例如，什么语言）、数据来自哪里、对它做了什么......这类事情的信息。

# java - 在 Tomcat 中使用 Spring + Hibernate 事务缓存？

> ID：770964
> 
> 赞同：2
> 
> 时间：2009-04-21T03:45:16.203
> 
> 标签：java, hibernate, spring, tomcat, transactions

似乎 Hibernate 事务缓存模式需要使用 JTA 事务管理器。在 Glassfish、Weblogic 等应用服务器中，Spring 可以使用 JTA 事务管理器。Tomcat 没有 JTA 事务管理器。

人们在这种情况下会使用一个吗？还是人们只是不使用 Tomcat 的事务缓存模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T04:05:06.470

这取决于您的 ORM 实现，例如对于 JPA，Spring 有一个用于使用外部 Java EE 容器的事务管理器。这是您声明它的方式：

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

我通常使用注释来划分事务边界（使用@Transaction），为此您只需在配置文件的另一行添加：

```
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

出现在此 XSD 命名空间中：“ [http://www.springframework.org/schema/tx](http://www.springframework.org/schema/tx) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:39:38.397

Atomikos is one JTA transaction manager that can be bundled with your app to work in a Tomcat deployment.

# java - 如何在 RESTful webapp 中创建新的 HttpSession？

> ID：770969
> 
> 赞同：0
> 
> 时间：2009-04-21T03:48:53.403
> 
> 标签：java, tomcat, rest, restful-authentication

每当客户端调用特定 UI 时，我都需要创建一个 HttpSession（通过 cookie）。

假设：

*   假设我不会担心任何类似 oAuth 的深度身份验证舞蹈。JESSIONSID cookie 模拟目前不是问题。
*   服务器是 tomcat，因此如果创建了新会话，则会将 JSESSIONID cookie 发送到客户端。

设计问题：

1.  我正在努力解决如何设计 URI。什么是 REST 资源？我已经有**/users**和**/users/{someuserid}**。我想使用**/auth/login**但在之前的一个 SO 问题中，一篇[引用的文章](http://prescod.net/rest/mistakes/)说我们不应该在 url 中有动词。我注意到，即使是[谷歌也犯了同样的错误](http://code.google.com/intl/fr-FR/apis/gdata/articles/oauth.html)，因为**[https://www.google.com/accounts/OAuthGetRequestToken](https://www.google.com/accounts/OAuthGetRequestToken)**。那么在您看来，**/auth/login/johndoe**（登录）和**/auth/logout/johndoe**（注销）是不错的选择吗？

更新：

我改变了我的设计。我现在正在考虑使用 URI **/session/johndoe**（*PUT*用于登录，*DELETE*用于注销）。它仍然应该在 REST 精神的范围内吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T03:56:40.250

会话在 REST 风格架构中不是无关紧要的吗？

[http://www.prescod.net/rest/mistakes/](http://www.prescod.net/rest/mistakes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T07:12:47.660

我正在创建一个识别会话的 REST 端点。我已经标准化：

*   POST /sessions => 返回位置：[http://server/api/sessions/1qazwsxcvdf](http://server/api/sessions/1qazwsxcvdf)
*   删除 /sessions/1qazwsxcvdf => 使会话无效

它运作良好。

# c# - 如何在 C# 中获取服务器和客户端之间的延迟？

> ID：770978
> 
> 赞同：8
> 
> 时间：2009-04-21T03:54:45.730
> 
> 标签：c#, .net, sockets, client-server, latency

我正在为我用 ActionScript 3 编写的游戏引擎开发 C# 服务器应用程序。我使用权威服务器模型来防止作弊并确保公平游戏。到目前为止，一切正常：

当客户端开始移动时，它会告诉服务器并开始在本地渲染；然后，服务器告诉其他人客户端 X 已经开始移动，其中包含详细信息，以便他们也可以开始渲染。当客户端停止移动时，它会告诉服务器，服务器根据客户端开始移动的时间执行计算，客户端渲染滴答延迟并回复所有人，以便他们可以使用正确的值进行更新。

问题是，当我在服务器计算中使用默认的 20 毫秒滴答延迟时，当客户端移动相当长的距离时，它停止时会明显向前倾斜。如果我将延迟稍微增加到 22 毫秒，在我的本地网络上，一切都运行得非常顺利，但在其他位置，倾斜仍然存在。在进行了一些实验之后，我注意到所需的额外延迟与客户端和服务器之间的延迟密切相关。我什至把它归结为一个很好用的公式：延迟 = 20 + (延迟 / 10)。

那么，我将如何继续获取某个客户端和服务器之间的延迟（我正在使用异步套接字）。CPU 工作量不能太多，以免服务器运行缓慢。另外，这真的是最好的方法，还是有更有效/更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-25T09:52:21.097

抱歉，这不能直接回答您的问题，但一般来说，您不应该过于依赖测量延迟，因为它可能会非常多变。不仅如此，您甚至不知道您测量的 ping 时间是否对称，这很重要。如果事实证明 20 毫秒的 ping 时间实际上是从服务器到客户端的 19 毫秒和从客户端到服务器的 1 毫秒，那么应用 10 毫秒的延迟校正是没有意义的。应用程序方面的延迟与网络方面的延迟不同 - 您可能能够 ping 某台机器并在 20 毫秒内获得响应，但如果您正在联系该机器上的服务器，该服务器每秒仅处理 50 次网络输入，那么您的响应将被额外延迟 0 到 20 毫秒，这会发生不可预测的变化。

这并不是说延迟测量在平滑预测方面没有一席之地，但它不会解决您的问题，只是稍微清理一下。

从表面上看，这里的问题似乎是您在第一条消息中发送了信息，您使用该信息来推断数据，直到收到最后一条消息。如果其他一切都保持不变，那么第一条消息中给出的移动向量乘以消息之间的时间将为服务器提供客户端大致现在所处的正确结束位置（延迟/2）。但是，如果延迟发生变化，消息之间的时间将会增长或缩短。客户端可能知道他移动了 10 个单位，但服务器模拟他移动了 9 或 11 个单位，然后被告知将他恢复到 10 个单位。

对此的一般解决方案是不假设延迟将保持不变，而是发送定期位置更新，这允许服务器验证和纠正客户端的位置。现在只有 2 条消息，在第 2 条消息之后发现并纠正了所有错误。消息越多，误差就会分布在更多的样本点上，从而可以进行更平滑且不那么明显的校正。

但它永远不可能是完美的：只需要在移动的最后一毫秒出现延迟峰值，服务器的表示就会过冲。如果您根据过去的事件预测未来的运动，您将无法解决这个问题，因为没有真正的选择可以选择正确但迟到或不正确但及时，因为信息需要时间传播。（责备爱因斯坦。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-11-04T03:09:22.493

[使用基于ICMP](http://http:/en.wikipedia.org/wiki/Internet_Control_Message_Protocol)的[ping](http://http:/en.wikipedia.org/wiki/Ping)时要记住的一件事是，网络设备通常会给 ICMP 流量提供比*普通*数据包更低的优先级，尤其是当数据包跨越网络边界（如 WAN 链接）时。这可能导致 ping 被丢弃或显示比流量实际经历的延迟更高，并使其成为问题的指示器而不是测量工具。

在网络中越来越多地使用[服务质量](http://http:/en.wikipedia.org/wiki/Quality_of_service)(QoS) 只会加剧这种情况，因此尽管 ping 仍然是一个有用的工具，但需要理解它可能不是基于非 ICMP 的*真实*网络延迟的真实反映交通。

Itrinegy 博客上有一篇很好的文章，[这些天您如何测量网络中的延迟 (RTT)？](http://blogs.itrinegy.com/2009/02/how-do-you-measure-latency-rtt-in-a-network-these-days/)对这个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-25T10:56:57.557

您可以使用已经可用的[Ping](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping_members(VS.80).aspx)类。应该优先于编写自己的恕我直言。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T04:02:22.700

有一个“ping”命令，您可以在其中将消息从服​​务器发送到客户端，然后计算获得响应所需的时间。除非出现 CPU 过载情况，否则它应该非常可靠。要获得单程旅行时间，只需将时间除以 2。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-12T13:26:37.783

我们可以使用.NET Framework 的类来测量[*往返*时间。](https://www.noction.com/blog/network-latency-effect-on-application-performance)[`Ping`](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping_members(VS.80).aspx)

实例化 a`Ping`并订阅[`PingCompleted`](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.pingcompleted(v=vs.80).aspx)事件：

```
Ping pingSender = new Ping();
pingSender.PingCompleted += PingCompletedCallback; 
```

添加代码以配置和操作 ping。

我们的`PingCompleted`事件处理程序 ( [`PingCompletedEventHandler`](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingcompletedeventhandler(v=vs.80).aspx)) 有一个[`PingCompletedEventArgs`](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingcompletedeventargs(v=vs.80).aspx)参数。给[`PingCompletedEventArgs.Reply`](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingcompletedeventargs.reply(v=vs.80).aspx)我们一个[`PingReply`](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingreply_members(v=vs.80).aspx)对象。[`PingReply.RoundtripTime`](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingreply.roundtriptime(v=vs.110).aspx)返回往返时间（“发送 Internet 控制消息协议 (ICMP) 回显请求并接收相应的 ICMP 回显回复消息所用的毫秒数”）：

```
public static void PingCompletedCallback(object sender, PingCompletedEventArgs e)
{
    ...
    Console.WriteLine($"Roundtrip Time: {e.Reply.RoundtripTime}");
    ...
} 
```

基于[MSDN 示例](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.pingcompletedeventargs(v=vs.80).aspx)的完整工作示例的代码转储。我已经修改它以将 RTT 写入控制台：

```
public static void Main(string[] args)
{
    string who = "www.google.com";
    AutoResetEvent waiter = new AutoResetEvent(false);

    Ping pingSender = new Ping();

    // When the PingCompleted event is raised,
    // the PingCompletedCallback method is called.
    pingSender.PingCompleted += PingCompletedCallback;

    // Create a buffer of 32 bytes of data to be transmitted.
    string data = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
    byte[] buffer = Encoding.ASCII.GetBytes(data);

    // Wait 12 seconds for a reply.
    int timeout = 12000;

    // Set options for transmission:
    // The data can go through 64 gateways or routers
    // before it is destroyed, and the data packet
    // cannot be fragmented.
    PingOptions options = new PingOptions(64, true);

    Console.WriteLine("Time to live: {0}", options.Ttl);
    Console.WriteLine("Don't fragment: {0}", options.DontFragment);

    // Send the ping asynchronously.
    // Use the waiter as the user token.
    // When the callback completes, it can wake up this thread.
    pingSender.SendAsync(who, timeout, buffer, options, waiter);

    // Prevent this example application from ending.
    // A real application should do something useful
    // when possible.
    waiter.WaitOne();
    Console.WriteLine("Ping example completed.");
}

public static void PingCompletedCallback(object sender, PingCompletedEventArgs e)
{
    // If the operation was canceled, display a message to the user.
    if (e.Cancelled)
    {
        Console.WriteLine("Ping canceled.");

        // Let the main thread resume. 
        // UserToken is the AutoResetEvent object that the main thread 
        // is waiting for.
        ((AutoResetEvent)e.UserState).Set();
    }

    // If an error occurred, display the exception to the user.
    if (e.Error != null)
    {
        Console.WriteLine("Ping failed:");
        Console.WriteLine(e.Error.ToString());

        // Let the main thread resume. 
        ((AutoResetEvent)e.UserState).Set();
    }

    Console.WriteLine($"Roundtrip Time: {e.Reply.RoundtripTime}");

    // Let the main thread resume.
    ((AutoResetEvent)e.UserState).Set();
} 
```

当然，您可能希望执行几次 ping 操作，然后计算平均值，具体取决于您的要求。

# sql-server - 调试 SQL Server 2005 存储过程

> ID：770990
> 
> 赞同：0
> 
> 时间：2009-04-21T03:58:02.773
> 
> 标签：sql-server, visual-studio-2008

我正在使用 VS 2008 并尝试进入 SQL Server 2005 数据库上的存储过程。我调出Server Explorer，双击该程序。它出现在文本窗口中。我在其中设置了一个断点，右键单击并选择“步入存储过程”。它以“用户取消”返回。MSVSCOM.exe 在 SQL Server 主机上运行，​​我可以连接到 SQL Server 主机上的远程进程。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T04:05:13.800

我猜你在这些机器上运行了两个不同版本的远程监视器。

"**此错误通常在使用不匹配版本的 msvsmon.exe（远程调试监视器）时显示。它们必须具有相同的版本才能进行远程 CLR 调试。位置：2008 -> C:\Program Files\Microsoft Visual Studio 9\Common7\IDE\Remote Debugger\x86\msvsmon.exe，版本 9.0.2 2005 -> C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\Remote Debugger\x86\msvsmon.exe，版本 8.0。 5** "

这是一篇关于设置远程调试的好文章，应该可以解决您的问题。如果无法解决请回帖

[http://msdn.microsoft.com/en-us/library/bt727f1t.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T14:19:16.687

最后通过使用相同的凭据运行 Visual Studio、服务器资源管理器连接和远程调试服务解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-12T03:16:43.023

我可以通过将 SQL Server (MSSQLSERVER) 的“登录身份”帐户设置为服务器的管理员帐户来解决此问题。作为参考，我的完整设置如下：

1.  客户端：带有 VS Studio 2008 (9.0.30729.1) 的 Windows XP，服务器：带有 SQL Server 2005 (9.0.4035) 的 Windows Server 2003

2.  同一工作组中的两台计算机

3.  两台机器上的管理员帐户已启用并设置为相同的密码。

4.  MSSQLSERVER 和 MSVCMON（作为服务运行）在管理员帐户的上下文中运行。

5.  Visual Studio 2008 在客户端计算机上我的帐户（管理员组的成员）的上下文中运行。在服务器上创建了相同的帐户（管理员组的成员），并且两者的密码相同。

# sql-server - 我可以使用存储过程 (sprocs) 来填充我的全文索引吗？

> ID：770993
> 
> 赞同：-1
> 
> 时间：2009-04-21T04:00:41.987
> 
> 标签：sql-server, sql-server-2008, full-text-search

我正在使用 SQL Server 2008，我想使用 sproc 来告诉数据库填充全文索引。

如果可用，我想知道以下操作的存储过程是什么：

*   在索引中添加条目
*   删除索引中的条目
*   完全填充

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T22:02:35.760

`sp_fulltext_catalog`就是你要找的。

从联机丛书中，如果您希望在**AdventureWorks**数据库中重建（这是一个删除并创建）一个名为**Cat_Desc的全文目录......**

 **```
USE AdventureWorks;
GO
EXEC sp_fulltext_catalog 'Cat_Desc', 'rebuild';
GO 
```

如果您想开始完整填充所述目录...

```
USE AdventureWorks;
GO
EXEC sp_fulltext_catalog 'Cat_Desc', 'start_full';
GO 
```

如果您想执行所述目录的增量填充...

```
USE AdventureWorks;
GO
EXEC sp_fulltext_catalog 'Cat_Desc', 'start_incremental';
GO 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-21T07:50:30.983

全文索引会自动为您执行此操作。所以你要么：

*   手动重新填充索引

或者

*   将索引设置为自动填充，然后您可以选择在后台执行此操作（首选）

最后一个选项是最好的，您只需有一个设置/忘记系统：当更改/删除/添加行时，系统会处理索引，您不必这样做。

# java - 有没有办法使用 JNI 从 Java 调用 C++ 的 STL 库？

> ID：770994
> 
> 赞同：0
> 
> 时间：2009-04-21T04:00:59.693
> 
> 标签：java, c++, java-native-interface

有没有办法从 JNI 调用 STL 库，我相信 JNI 为本地调用提供了类似 C 的接口，我们如何为 C++ 模板库实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T08:07:09.350

我同意，如果您只是在寻找普通的 STL，您可能可以改用 Java 库。但是，如果您坚持包装 STL，SWIG 会在 JNI 中提供一些开箱即用的 STL 包装（请参阅[此](http://www.swig.org/Doc1.3/Java.html#templates)了解基本机制），这应该会生成相对稳定、经过测试的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T04:20:28.383

我知道这是可能的，虽然我自己没有做过。但是如果你不是很小心的话，JNI 代码可能会导致 JVM 崩溃。此外，JNI 代码比 Java 代码更难维护。我在一个项目中，Java -> JNI -> STL 和 COM 代码被丢弃，我们用 C# 替换它，访问相同的 STL 和 COM 以及一个套接字。我们从未回头。

如果你只做*少量*的 JNI，那可能是值得的。如果您通过 JNI 创建大型接口，我强烈建议您改用 C# 而不是 Java 编写与 STL 交互的组件，并使用套接字在 C# 和 Java 组件之间进行通信。它将*更*容易编写、测试和维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T04:25:07.513

我不得不问*为什么*你觉得有必要使用 Java 中的 STL 库。它们中是否有 Java 自己的大量库没有提供的东西？

我理解为什么你必须调用你自己的代码（我假设你已经分析了 Java 代码并发现它需要，否则你的努力就白费了）但你似乎在问如何直接调用 STL 的东西。

我们经常在使用 JNI 时遇到问题，它使我们的代码的可移植性降低，因此您必须有*充分*的理由想要在我们的商店中使用它，并且您必须用硬数据证明为什么 Java 提供的东西是不够。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-07T12:01:16.780

是的。您需要使用 swig 类型映射将 C++ STL 类转换为 Java 对象......反之亦然。欲了解更多信息，请访问 [http://www.swig.org/Doc2.0/Android.html](http://www.swig.org/Doc2.0/Android.html)

# java - C 的 fflush 的 Java 等价物？[读取值问题]

> ID：770998
> 
> 赞同：0
> 
> 时间：2009-04-21T04:02:58.470
> 
> 标签：java, c

在我大学的计算机编程课上，我们被要求创建一个 Java 程序来读取和存储列表中的各种元素。存储不是问题，但我在读取值方面遇到了一些问题。我正在使用“变量 = input.nextLine();” （如果变量是字符串），问题是当我连续读取几个值时，有时程序会跳过读取其中一个。我的老师建议我使用 input.nextLine() 来解决这个问题，但它不能完美地工作，这对我来说似乎是一种解决方法。我认为问题与缓冲区有关。Java 上是否有类似于 C 的 fflush 或 fpurge 函数的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T04:11:19.870

除了少数例外，输入 I/O 类没有`flush`等效的方法，因此不需要。输出 I/O 类*确实*有`flush`方法。您可以在 JDK 6 Javadoc[索引`F`](http://java.sun.com/javase/6/docs/api/index-files/index-6.html)中看到这一点，并向下滚动`flush()`方法集合。

您确定您不会不小心连续阅读`input.nextLine();`两次并因此丢弃一行吗？

在帮助解决您的问题之前，我们需要了解更多信息。

注意：请编辑您的问题以添加其他信息。在您的问题下方寻找一个小的“编辑”“按钮”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T04:13:32.783

如果您正在读取文件，则可以使用[BufferedReader](http://java.sun.com/j2se/1.5.0/docs/api/index.html?java/awt/List.html)：

```
 BufferedReader reader = new BufferedReader(new FileReader("somelines_oh_yeah.txt"));
    String line;
    while((line = reader.readLine()) != null){
          //do something.
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-27T23:07:55.707

您可以使用 System.out.flush()*****