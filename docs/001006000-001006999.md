# StackOverflow 问答 1006000-1006999

# apache-flex - flex中数据的图形表示

> ID：1006012
> 
> 赞同：0
> 
> 时间：2009-06-17T09:23:57.690
> 
> 标签：apache-flex, actionscript-3

我是flex的新手。

最近的任务是根据输入的数据生成图形或网络。

最好的方法是什么。此外，当单击网络的一个节点时，它应该显示与该节点相关的数据。

希望尽快得到一些帮助！

谢谢， 卡提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T09:53:08.303

您需要获得 flex builder pro 的许可才能使用 Flex Graphing 组件。您可以从此链接查看示例代码中可用的组件

[http://examples.adobe.com/flex3/componentexplorer/explorer.html](http://examples.adobe.com/flex3/componentexplorer/explorer.html)

打开数据可视化文件夹以访问图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T10:02:37.190

你也可以试试：

[http://www.fusioncharts.com/](http://www.fusioncharts.com/)

# pdf - 欧元符号从 MS SQL 报告服务的 PDF 输出

> ID：1006023
> 
> 赞同：2
> 
> 时间：2009-06-17T09:25:54.583
> 
> 标签：pdf, reporting-services, export

当我在 Microsoft SQL Reporting Services 的报表中使用 FormatCurrency() 时，当我通过报表服务器的 Web 界面以默认输出格式（或 Excel 输出）查看报表时，我看到一个欧元符号，但是当我导出为 PDF 时，欧元符号变成一个小方块。

如何在我的报告服务 PDF 中获得欧元符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T15:23:28.590

我使用 OfficinaSans 作为字体。使用像 Arial 这样更无聊的字体解决了这个问题。有人向我推荐了有关该主题的良好资源：http: [//blogs.msdn.com/donovans/pages/reporting-services-pdf-renderer-faq.aspx](http://blogs.msdn.com/donovans/pages/reporting-services-pdf-renderer-faq.aspx)

# iphone - iPhone SDK 中的着色图像

> ID：1006029
> 
> 赞同：1
> 
> 时间：2009-06-17T09:27:04.080
> 
> 标签：iphone, colors, fill

我正在开发一个 iphone 应用程序。我有一个背景图像，可以说一架带有黑色线条的飞机，用户可以从调色板中选择一种颜色并填充飞机区域……任何帮助、代码、建议都将受到高度评价

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T09:57:20.743

一个简单的填充算法应该可以。只需从您所在的点扩展，直到遇到区域结束像素，请参阅[http://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)您也可以尝试使用谷歌搜索边界填充算法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T12:28:20.533

我的第一个想法是在飞机上放置一个 UIView 和一个遮罩图像，但这仅在某些情况下有效。如果平面的形状没有改变，您也可以更改颜色，然后在 drawRect 期间使用 CGContextAddArc 和 CGContextAddRect 等函数“填充”平面。

# directx - D3D10 (DirectX10) 全屏性能问题

> ID：1006039
> 
> 赞同：2
> 
> 时间：2009-06-17T09:29:14.530
> 
> 标签：directx, performance, fullscreen, directx-10

我在将我的 DirectX10 (Win32/c++) 应用程序设置为全屏模式时遇到了一点问题。问题是我想让我的应用程序从一开始就全屏运行。这可以通过使用 DXGISwapChain::SetFullScreenState 函数来完成。这可行，但我在 Visualc++ 2008 调试器中收到一个小通知，其中指出：

**“DXGI 警告：IDXGISwapChain::Present：由于应用程序未正确使用 IDXGISwapChain::ResizeBuffers、指定 IDXGIOutput::GetDisplayModeList 中不可用的 DXGI_MODE_DESC 或未使用 DXGI_SWAP_CHAIN_FLAG_ALLOW_MODE_SWITCH 而导致全屏演示效率低下。”**

这意味着 DirectX 不会完全拥有显卡并将图像从前缓冲区翻转到后缓冲区，而是对它们进行 blit，这要慢得多。

现在，我确实启用了 DXGI_SWAP_CHAIN_FLAG_ALLOW_MODE_SWITCH 并且我确实尝试调整缓冲区的大小，但我完全不知道进入全屏模式的最佳方法是什么。我在 MSDN 上查看过，但他们大多认为您只能通过按 Alt+Enter 进入全屏，以免 DXGI 完成所有工作。如果有人可以发布一些将 DirectX10 带入全屏模式并充分利用“翻转”的代码，那将不胜感激！

对于任何对调整大小使用的代码感兴趣的人：

```
ReleaseCOM(m_pD3DRenderTargetView);
ReleaseCOM(m_pD3DDepthStencilView);
ReleaseCOM(m_pD3DDepthStencilBuffer);

DXGI_MODE_DESC* mod = new DXGI_MODE_DESC;
mod->Format = DXGI_FORMAT_R8G8B8A8_UNORM;
mod->Height = m_ScreenHeight;
mod->Width = m_ScreenWidth;
mod->RefreshRate.Denominator = 0;
mod->RefreshRate.Numerator = 0;
mod->ScanlineOrdering = DXGI_MODE_SCANLINE_ORDER_UNSPECIFIED;
mod->Scaling = DXGI_MODE_SCALING_UNSPECIFIED;
delete mod; mod = 0;

m_pSwapChain->ResizeTarget(mod);

HR(m_pSwapChain->ResizeBuffers(1, m_ScreenWidth, m_ScreenHeight, DXGI_FORMAT_R8G8B8A8_UNORM, DXGI_SWAP_CHAIN_FLAG_ALLOW_MODE_SWITCH))
    throw(Exception(GET_BUFFER_FAIL, AT));

//problem area
m_pSwapChain->SetFullscreenState(TRUE, NULL);

ID3D10Texture2D* pBackBuffer;
HR( m_pSwapChain->GetBuffer(0, __uuidof(ID3D10Texture2D), (LPVOID*)&pBackBuffer))
    throw(Exception(GET_BUFFER_FAIL, AT)); //continues as usual 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-16T05:09:23.660

在 DXGI 中启用翻转有一些先决条件（这是最有效的全屏演示模式）：

1) 您应该进入全屏状态，指定系统中存在的模式（您可以使用 IDXGIOutput::GetDisplayModeList 中的模式或使用 IDXGIOutput::FindClosestMatchingMode 找到它）。您的代码仅指定屏幕分辨率，因此最有可能的模式设置正确。

2)*在*SetFullscreenState 之后，您应该使用正确的缓冲区大小匹配模式调用 ResizeBuffers，这是 DXGI 设置翻转模式的地方。通常，它应该作为对 SetFullscreenState 转换发送的 WM_SIZE 消息的反应而自然发生，因此如果您的应用程序没有在 WM_SIZE 上调用 ResizeBuffers，它可能应该。您可以在 SetFullscreenState 之后手动调用 ResizeBuffers 并且应该也可以。

是的，MSDN 有一篇关于 DXGI 实践的好文章，包括全屏转换： http: [//msdn.microsoft.com/en-us/library/cc627095 (VS.85).aspx#Full_Screen_Issues](http://msdn.microsoft.com/en-us/library/cc627095(VS.85).aspx#Full_Screen_Issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-01T08:12:34.960

你有什么理由删除你的模式描述吗？

您是否也尝试过将模式描述置于“FindClosestMatchingMode”？

查看[http://msdn.microsoft.com/en-us/library/cc627095(VS.85).aspx](http://msdn.microsoft.com/en-us/library/cc627095(VS.85).aspx) “全屏问题”部分包含很多有用的信息。

# .net - Intellisense 提示和 XML 返回注释 (VS2008)

> ID：1006042
> 
> 赞同：10
> 
> 时间：2009-06-17T09:29:55.387
> 
> 标签：.net, visual-studio, visual-studio-2008, comments

我发现在键入方法名称时 Intellisense 显示的工具提示非常有用，但我只能看到摘要和参数信息 - 没有返回评论

例如 - 我看不到下面的评论：

```
 <returns> Enriched object</returns> 
```

这是一种让它可见的方法吗？

**编辑**

也许您知道替换标准 Intellisense 并显示返回部分的工具

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-08-14T10:20:45.523

Intellisense 确实无法显示 RETURNS 语句。

我发现[ReSharper](http://www.jetbrains.com/resharper/index.html)可以做到这一点！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-17T09:35:37.993

您只能在编译的 xml 帮助中看到这一点。Intellisense 仅显示方法描述。因此，最好将您的方法描述为“返回 xyz ...”。

# c# - 将用户添加到 ADAM 中的角色时出错（发生约束冲突。（来自 HRESULT 的异常：0x8007202F）

> ID：1006044
> 
> 赞同：0
> 
> 时间：2009-06-17T09:32:06.253
> 
> 标签：c#, active-directory, adam

尝试将用户添加到组时出现错误。

> 发生约束冲突。（来自 HRESULT 的异常：0x8007202F）

```
public string addUserToGroup(string userDN, string groupDN)
{
    try
    {
        DirectoryEntry de = new DirectoryEntry("LDAP://localhost:389/" + groupDN);
        de.Username = "myUsername";
        de.Password = "myPassword";
        de.Properties["member"].Add(userDN);
        de.CommitChanges();
        de.Close();
        //return true;
        return "yes";
    } 
```

我不确定这是否与我设置 ADAM 的方式有关，因为我使用了应用程序目录分区。所以我有一个 DN，`CN=sandbox,DC=ITOrg`然后有 3 个目录分区，如下所示：

```
CN=sandbox,CN=testApp1,DC=ITOrg
CN=sandbox,CN=testApp2,DC=ITOrg  .. etc 
```

我只存储了我的用户，`CN=sandbox,DC=ITOrg`但我想让用户访问 1 个或多个分区，所以我试图添加用户的 CN

```
CN=1@test.com,CN=People,CN=sandbox,DC=ITOrg 
```

对此：

```
CN=Readers,CN=Roles,CN=sandbox,CN=testApp1,DC=ITOrg 
```

这是行不通的。尽管如果我将用户添加到`CN=Readers,CN=Roles,CN=sandbox,DC=ITOrg`. 那么这是否意味着我必须在每个分区中存储用户？复制数据？

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T16:58:59.857

通常，您还必须至少在“直接 AD”上的新用户条目上设置 SAM 帐户名称 - 不确定这是否也适用于 ADAM。

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T07:40:18.887

您是否检查过您尝试创建的密码是否符合配置的密码策略？

此外，从您的示例来看，您似乎正在尝试以明文形式保存密码。我不熟悉 ADAM，但大多数 Auth & Auth 提供程序要求您在尝试保存密码之前对密码进行哈希处理。

# c# - 为什么 WPF 绑定更新字符串而不更新对象？

> ID：1006045
> 
> 赞同：1
> 
> 时间：2009-06-17T09:32:07.673
> 
> 标签：c#, wpf, xaml, binding

在下面的代码示例中，您可以将滑块从德语移动到英语，然后看到该文本块在运行时被翻译，但是：

*   只有绑定到**字符串**的 TextBlock才会更新
*   绑定到**Dictionary的 TextBlock** *未*更新

似乎 View 只是**获取 Dictionary 对象一次**，然后不再更新。我试过**Mode=TwoWay**但这没有效果。

**我该怎么做才能使绑定到*对象*的元素通过绑定更新？**

**看法：**

```
<Window x:Class="TestObjectUpdate234.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:c="clr-namespace:TestObjectUpdate234.Commands"
    Title="Main Window" Height="400" Width="800">
    <StackPanel Margin="10">

        <TextBlock Text="{Binding TranslationEdit}" />
        <TextBlock Text="{Binding Translations[add], Mode=TwoWay}" />

        <StackPanel DockPanel.Dock="Bottom"  Orientation="Horizontal" Margin="0 20 0 0">
            <TextBlock Text="English" Margin="0 0 5 0"/>
            <Slider Name="TheLanguageIndexSlider"

                Minimum="0" 
                Maximum="1" 
                IsSnapToTickEnabled="True"
                Width="100" 
                Margin="5" 
                Value="{Binding LanguageIndex}"
                HorizontalAlignment="Left"/>
            <TextBlock Text="German" Margin="5 0 0 0"/>
        </StackPanel>

    </StackPanel>
</Window> 
```

**视图模型：**

```
using System.Collections.Generic;

namespace TestObjectUpdate234.ViewModels
{
    public class MainViewModel : ViewModelBase
    {

        #region ViewModelProperty: TranslationEdit
        private string _translationEdit;
        public string TranslationEdit
        {
            get
            {
                return _translationEdit;
            }

            set
            {
                _translationEdit = value;
                OnPropertyChanged("TranslationEdit");
            }
        }
        #endregion

        #region ViewModelProperty: Translations
        private Dictionary<string, string> _translations = new Dictionary<string, string>();
        public Dictionary<string, string> Translations
        {
            get
            {
                return _translations;
            }

            set
            {
                _translations = value;
                OnPropertyChanged("Translations");
            }
        }
        #endregion

        #region ViewModelProperty: LanguageIndex
        private int _languageIndex;
        public int LanguageIndex
        {
            get
            {
                return _languageIndex;
            }

            set
            {
                _languageIndex = value;
                OnPropertyChanged("LanguageIndex");
                FillTranslations();
            }
        }
        #endregion

        public MainViewModel()
        {
            _languageIndex = 0; //english
            FillTranslations();

        }

        private void FillTranslations()
        {
            if (_languageIndex == 0)
            {
                TranslationEdit = "Edit";

                Translations.Clear();
                Translations.Add("add", "Add");
            }
            else
            {
                TranslationEdit = "Bearbeiten";

                Translations.Clear();
                Translations.Add("add", "Hinzufügen");
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T09:41:02.930

您需要等效于 ObservableList 但对于字典。框架中没有默认设置，但可以在此处找到一篇描述一种编写方法的文章[。](http://www.drwpf.com/blog/Home/tabid/36/BlogDate/2007-09-30/Default.aspx)

您的代码现在无法正常工作的原因是您在 Translations Dictionary 的 setter 中触发了 NotifyPropertyChanged 事件，但是由于您的 FillTranslations 方法不会创建新 Dictionary，因此不会调用 setter 并且该事件不开火。我想如果你创建一个新字典并分配它，你可以回避 ObservableDictionary 类，这反过来会触发事件并重新绑定整个列表，但从长远来看，保持相同的字典实例并通知控件更有效集合已通过 Observable 模式更改（在字典上实现 INotifyCollectionChanged）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T09:38:10.203

您需要改用 ObservableCollection<>。

发生更改时必须通知 WPF 活页夹，您在设置字典属性时调用 OnPropertyChanged，但您还需要一些原因通知活页夹字典中的值已更改。ObservableCollection<> 将为您完成此操作。当从集合中添加/删除项目时，它会引发事件。

# php - php xml解析

> ID：1006049
> 
> 赞同：0
> 
> 时间：2009-06-17T09:35:06.297
> 
> 标签：php, xml

```
$xml = curl_exec($ch); 
```

我有一个像这样的 xml 对象，它是从 web 服务中返回的。我如何在 PHP 中解析它？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T09:39:03.650

使用任何 php 的 XML 模块，[例如 SimpleXML](http://php.net/manual/en/simplexml.examples-basic.php)。

# c - 以二进制模式将位/字节转储到文件中

> ID：1006057
> 
> 赞同：0
> 
> 时间：2009-06-17T09:38:00.877
> 
> 标签：c, file

我有以下代码。

```
FILE *fp;
int a;
fp=fopen("dump.bin","wb");         
a = 0xffafbcdf;
fprintf(fp,"%x",a&0x3ffff); 
```

我试图只转储变量 a 的 18 个 LSBit。但是文件中转储的值是 3bcdf。

我的问题 - 是否不可能将不是 4（半字节）的倍数的所需位数转储/fwrite/fprintf 到文件中？

编辑：

1.）当我检查我的文件转储的输出时，我意识到，因为我以二进制模式打开文件，我不应该使用 . `fprintf`，但我应该使用`fwrite`.

2.) 我在输出中看到的是`DF BC 03`，它以 8 位的倍数写入，因此它写入 24 位（3 个字节），但我只对 18 位感兴趣。但后来我意识到没有文件写入库能够将非 8 位的倍数写入文件。它总是会添加前导零位来完成字节，然后转储它。文件数据的“最少计数单位”是一个字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T09:57:08.403

正如其他人所说，字符是您可以写入文件的最小大小的实体。我只是想观察在二进制文件上使用 fprintf() （或任何其他流输出函数）没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T09:44:27.027

`0x3bcdf`是 的 18 个 LSBit `0xffafbcdf`，所以它似乎按预期工作。你期待什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T09:45:14.713

文件以字节（8 位）而不是半字节（4 位）写入。

*编辑后编辑：* fprintf 将打印文本，因此您将获得 6 个字节，其中 - 就像您使用 fwrite 一样，您会将一个 int（32 位）写入文件，但会屏蔽记录的值。

# wcf - 如何从服务器向 WCF 中的所有客户端发送通知消息（可以说是广播）？

> ID：1006058
> 
> 赞同：5
> 
> 时间：2009-06-17T09:38:09.207
> 
> 标签：wcf, notifications, broadcast, wcf-callbacks

我想每秒从 net tcp WCF 服务向所有客户端发送通知消息，你可以说广播吗？

在有用的答案之后

我编写了以下方法，它将向所有连接的用户发送通知（心跳）

```
foreach (IHeartBeatCallback callback in subscribers)
{
  ThreadPool.QueueUserWorkItem(delegate(object state)
  {
    ICommunicationObject communicationCallback = (ICommunicationObject)callback;
    if (communicationCallback.State == CommunicationState.Opened)
    {
      try
      {
         callback.OnSendHeartBeat(_heartbeatInfo.message,    _heartbeatInfo.marketstart,_heartbeatInfo.marketend, _heartbeatInfo.isrunning,   DateTime.Now);
      }
      catch (CommunicationObjectAbortedException)
      {
        Logger.Log(LogType.Info, "BroadCast", "User aborted");
        communicationCallback.Abort();
      }
      catch (TimeoutException)
      {
       Logger.Log(LogType.Info, "BroadCast", "User timeout");
       communicationCallback.Abort();
      }
      catch (Exception ex)
      {
        Logger.Log(LogType.Error, "BroadCast", "Exception " + ex.Message + "\n" +  ex.StackTrace);
        communicationCallback.Abort();
      }

    }
    else
    {
      DeletionList.Add(callback);
    }
  }
  );
} 
```

我担心调用回调方法，因为客户端可能会关闭他的应用程序，但我使用 try catch 处理它，减少超时，并并行发送广播，这样就足够了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T09:51:01.037

您需要设置回调服务；不久前我写了一个简单的[初学者指南](http://idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T09:46:05.853

为此，您需要创建并维护所有已连接客户端的列表（对此的一般做法是创建 LogIn 和 LogOut 方法来创建和管理代表您的客户端的对象列表，包括其 CallbackContext）。然后，使用 System.Time.Timers，您可以遍历已连接的客户端列表并发送通知。

提示。如果服务无法向它们发送回调，则此方法还可以通过添加从列表中删除客户端的可能性来充当 Keep-Alive 或 Hear-Beat 方法（如果这不是它的设计目的）。

# windbg - windbg：命令输出到文本文件

> ID：1006060
> 
> 赞同：50
> 
> 时间：2009-06-17T09:38:41.717
> 
> 标签：windbg

如何将 WinDbg 中的命令输出保存到文本文件？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-06-17T10:11:59.293

使用 -logo 选项从命令行启动 WinDbg：

```
windbg.exe -logo logfile.txt 
```

这将使所有完成的事情都记录到指定的文件中。[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/hardware/hh451024(v=vs.85).aspx)找到有关命令行选项的更多详细信息。

或者，如果您已经在调试会话中，您可以使用 .logopen 命令开始记录。有关此命令的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/hardware/ff564018(v=vs.85).aspx)

或者您可以在 WinDbg GUI 中单击编辑->打开/关闭日志文件。

有关日志文件的更多信息在[这里](http://msdn.microsoft.com/en-us/library/hh451024.aspx)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2011-12-29T03:44:33.740

您可以使用 .logopen ，您输入的所有命令和来自 windbg 的响应都将被记录，然后使用 .logclose 将数据刷新到

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-03-01T11:03:39.560

如果您觉得这更容易，您也可以从 WinDbg gui 'Edit>Write Window Text To File...' 执行此操作。

# db2 - 如果我们在另一个视图上有一个视图并且我们删除了父视图，那么另一个视图会发生什么？

> ID：1006066
> 
> 赞同：0
> 
> 时间：2009-06-17T09:40:58.297
> 
> 标签：db2

如果我们在另一个视图上有一个视图并且我们删除了父视图，那么另一个视图会发生什么？在我们重新创建基础视图之后，第二个视图会再次激活吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T22:11:43.317

[可能与此问题](https://stackoverflow.com/questions/642218/what-happens-to-an-existing-db2-view-if-the-table-is-dropped/643259#643259)中发生的事情相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T09:45:19.643

根据我对 DB2（以及一般的 SQL）中视图的理解，它们有效地充当 SQL 选择语句的别名。我希望在这种情况下，您的子视图仍然存在，但是在删除父视图时查询它会导致错误。

由于子视图的定义被存储并保持静态，重新创建具有相同对象名称的父视图应该会导致子视图再次返回预期结果。

顺便说一句，这对您来说很容易验证自己。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T23:17:18.737

Michael Sharek 的回答是正确的；即使替换了已删除的视图，依赖于已删除视图的其余视图仍将无效（对于 SYSCAT.VIEWS 中的该行，VALID='N'）。您将需要为 SYSCAT.VIEWS 中 VALID='N' 的任何视图重新发出 create 语句，但好消息是您可以覆盖无效视图而不会删除它。

我通常做的是使用 EXPORT 提取 SYSCAT.VIEWS 中每个视图的 TEXT 列的副本，其中 VALID = 'N'。然后我在该文件中执行 DDL 语句，无效视图通常在第一遍被替换。但是，如果您有更复杂的相互依赖视图层次结构，则可能需要多次运行该文件。没有必要为在前一次传递中有效的视图过滤掉 DDL；这些语句将被安全地拒绝，并出现重复对象错误。

# c# - 如何获取标签和 NumericUpDown 中文本基线的位置？

> ID：1006069
> 
> 赞同：10
> 
> 时间：2009-06-17T09:42:36.827
> 
> 标签：c#, .net, winforms, alignment, baseline

我正在尝试通过它们的文本基线对齐 a`Label`和 a 。`NumericUpDown`我是在代码中做的，而不是设计师。如何获取文本基线的位置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2011-11-28T01:38:03.117

// 在坐标 (pt.X, pt.Y) 处渲染带有基线的文本：

```
Font myFont = Label1.Font;
FontFamily ff = myFont.FontFamily;

float lineSpace = ff.GetLineSpacing(myFont.Style);
float ascent = ff.GetCellAscent(myFont.Style);
float baseline =  myFont.GetHeight(ev.Graphics) * ascent / lineSpace;

PointF renderPt = new PointF(pt.X, pt.Y  - baseline));
ev.Graphics.DrawString("Render this string", myFont, textBrush, renderPt); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T14:56:01.513

对于 Label 控件，您可以通过以下方式获取文本底部的位置：

假设 .TextAlign 设置为 TopLeft 或 TopCenter 或 TopRight，则可以通过此方法找到 Label 控件中文本的底部：

```
dim btmOfText  as single
btmOfText = Label1.Font.GetHeight + Label1.Top 
```

.GetHeight 方法返回标签使用的当前字体的高度，以像素为单位。
如果 .TextAlign 是 Middle 或 Bottom，那么您需要进行稍微复杂的计算。

同样的方法也适用于 NumericUpDown 控件。

# algorithm - 消除对具有固定边的有向图的循环依赖

> ID：1006071
> 
> 赞同：4
> 
> 时间：2009-06-17T09:43:15.407
> 
> 标签：algorithm, graph-theory, directed-graph

我有一个有向循环图。有些边缘是固定的，可能不会被移除。可以移除其他边缘以中断循环。

删除此图中的循环的最佳方法是什么？遍历应该尽可能多地是 DFS，并从给定节点开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T10:12:30.930

您可以做的是使用 Dijkstra 算法：从仅包含 FIXED 边的图开始。然后从您已经拥有的图表开始应用算法的改编：

1.  从起始节点开始，以及起始节点组件中的所有 FIXED 边。假设这是一棵树。
2.  添加离树最近的节点。
3.  还要在刚刚添加的节点的组件中添加任何 FIXED 边。
4.  如果所有节点都在树中，则结束。否则，转到步骤 4。

当然，这假设仅由 FIXED 边组成的图不包含循环。如果是，则没有解决方案（即没有边但包含所有 FIXED 边的子图）。

对于有向图，它有点复杂。在这种情况下，FIXED 边图的任何组件都应该是一棵树。在 Dijkstra-like 算法中，只有这些节点的根应该是候选添加到树中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T05:23:29.507

问题被低估了，因为您没有指定例如图形是否需要保持连接，或者如果您想删除“少量”非固定边以打破所有循环，或者您是否真的需要全局最小数量要删除的非固定边缘。

如果图不需要保持连接，只需遍历所有边并删除所有非 FIXED 边。这将删除所有您可以在不删除 FIXED 边缘的情况下删除的循环。

如果你想要一个简单的贪心算法来删除纯 DFS 的边，你可以使用类似这样的东西，如果当你删除一些非 FIXED 边时图形也保持连接：

```
proc recurse(vertex n, vertex_set ns)
  if (n appers_in ns) // it is a cycle
    return BREAK_CYCLE
  else for (e in list_outgoing_edges_from(n))
    np = e.destination
    result = recurse(np, add_to_set(ns, np))
    if (result == BREAK_CYCLE)
      if (e.FIXED)
        return BREAK_CYCLE
      else
        [remove e from the graph]
        return RETRY
      else if (result == RETRY)
        return recurse(n, ns)
    return FINISHED

if (recurse (your_initial_node, empty_vertex_set()))
  [graph contains a cycle through only FIXED edges]
else
  [the reachable component from initial_node has no longer cycles] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-24T13:53:17.857

我使用以下算法来解决我的问题：

*从标记为已确认*的所有固定边的图形开始

 *从一个起始节点，递归所有已确认的边以及尚未确认的边。但是当你要递归一个尚未确认的边时，首先检查边去的节点是否有一条路径，通过跟随确认的边，到当前搜索树中的一个节点（即一个*访问*的节点标志集）。必须通过跟踪所有已确认的边递归地完成此检查，但这对我来说太慢了，所以我将在这里解决，只是检查节点是否正在访问，或者它确认连接到的任何节点是否正在访问。这将涵盖我的大部分情况，但偶尔会在图表中留下周期。

在上述步骤之后，我使用 Tarjan 的算法来查找图中留下的强连通分量（这可以在 O(V + E) 时间内完成）。在我的情况下，强连接组件的数量将非常少，所以我只需遍历每个强连接组件并分别移除一个可移动边缘。然后我再次执行此步骤，直到图表中不再有循环。

这工作正常并且足够快。*

# html - 如何让 CSS 文件只影响 HTML 的一部分

> ID：1006073
> 
> 赞同：4
> 
> 时间：2009-06-17T09:43:30.583
> 
> 标签：html, css

我有一个外部 CSS 文件（我根本无法更改），我需要在我的 HTML 文件中使用它，但我希望 CSS 只影响我的 HTML 的一部分。（例如 中的所有内容`<div id="externally_styled"></div>`）

这怎么可能，再次，而不更改 CSS 文件（并且 CSS 文件还包含影响正文标签等的一般样式）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T09:47:47.300

您可能必须使用`iframe`仅包含您想要样式化的 HTML 和对样式表的引用的页面。这意味着一般样式不会应用于包含页面，但听起来这就是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T09:52:47.197

任何附加到标签的类或样式声明都将覆盖 CSS 文件中的声明。

只需将您自己的样式声明添加到标签：

```
<div style="<your own declarations>">
...
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T10:02:39.093

您可以覆盖您不想应用于 HTML 文档的一般样式。如果 CSS 不是那么广泛，这可能是一个好主意。

覆盖样式的方法是使用关键字`important!`。

例如：

原始样式表：

```
body {
    color: #000000;
} 
```

你的样式表：

```
body {
    color: #CCCCCC !important;
} 
```

[您可以在此处](http://www.w3.org/TR/CSS2/cascade.html#important-rules)找到更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T10:16:03.920

我猜任何客户端解决方案都会很混乱。

您可以使用服务器端解决方案，在该解决方案中吸入外部 CSS 文件并将类选择器附加到每个规则的开头吗？我确信使用正则表达式会很容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T09:48:34.020

想到的一种方法是将 HTML 的“待设置样式”部分存在于一个完全独立的文件中，然后通过使用外部文件中的 CSS 的 iframe 将其拉入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T09:48:58.840

我唯一能想到的就是将内容从您的 DIV 重新渲染到 iframe。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T10:01:21.093

要么使用您为特定部分创建的类的类名，要么使用正确的父子关系 css，只有当它属于父子关系时才会呈现。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-22T17:12:38.917

您可以通过在 CSS 代码中使用“！important”来强制执行样式。

看看这个例子。 [http://www.craiglotter.co.za/2010/01/21/important-css-how-to-force-one-style-above-another/](http://www.craiglotter.co.za/2010/01/21/important-css-how-to-force-one-style-above-another/)

# asp.net - 编译/嵌入 ASCX 模板化的用户控件以便在多个 Web 应用程序中重用

> ID：1006086
> 
> 赞同：4
> 
> 时间：2009-06-17T09:49:25.190
> 
> 标签：asp.net, web-deployment-project, ascx, virtualpathprovider

我在这里遇到了一个真正令人头疼的问题……它似乎是 ASP.NET 中更令人沮丧的话题之一。

我有一个程序集，它实现了很多自定义的 Linq 东西，它的核心是零网络功能。我有一个额外的程序集，它使用特定于 Web 的行为扩展了这个程序集。

Web 特定行为带有在 ASCX 模板化的用户控件中标记的几个用户控件。

我无法很好地完成此程序集，以便重新部署以用于其他应用程序。让我来看看我到目前为止所尝试的：

1.  使用构建事件将 ASCX 文件复制到使用 Web 应用程序；*远非理想，而且是一场部署噩梦*。
    *   实现了一个自定义 VirtualPathProvider 并将 ASCX 模板作为嵌入式资源嵌入到程序集中。不幸的是，当在消费应用程序中使用 Register 指令时，它会将设计器声明创建为 UserControl，我需要在其中声明实际控件类型；*不可预见的（通常）和不受欢迎*的。
    *   创建了一个 Web 部署项目来编译 UserControls，但是编译的用户控件然后成为另一个程序集的一部分，并且不再来自我的 Web 程序集中的类定义——程序*集需要根据请求上下文实例化它们*。

所以第 1 号只是废话，第 2 号并没有给我我想要的类型支持，第 3 号我想我将提出一个合理的解决方案：

*   将所有非控制类集中到`App_Code`文件夹中，准备一个工厂类，该类将使用反射构造所需控制类型的对象，并期望被反射的类型将出现在部署输出中（希望通过`ClassName`属性的存在来保证在`Control`指令中）。

还有将 ASCX 控件重写为自定义控件的另一种选择，但目前没有资源来考虑它，而且我们没有这样做的专业知识，它们作为 UserControls 可以正常工作。

我是否遗漏了一些明显的东西，可能更简单的东西，或者这只是故意困难？我读过关于 ASP.NET 编译过程的故事，在我穿越这个主题的过程中，它的设计非常不幸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T10:04:13.523

好吧，我想我已经做到了......通过注意我最后一种方法的一些烦人的陷阱，我在使用 Web 部署项目在 Web 应用程序项目中编译 ASCX 用户控件时建议以下内容：

1.  避免放入类，`App_Code`除非它们是独立类或辅助类，ASP.NET 将其视为一个*speshul*文件夹，我失去了它的含义，随之而来的是混乱、混乱和混乱。不过，此文件夹中的代码确实会在 Web 部署项目中得到输出。
    *   Pay close attention to your assembly names, their root namespaces and deployment output assembly name- you'll get `access is denied` errors if you have any naming conflicts during the `aspnet_merge` process.
    *   Ultimately you'll most likely end up deploying 2 assemblies, I tried to create only one but the deployment output was still pointing to type definitions in the source assembly. This isn't a problem if you don't have any other types in your Web Application Project--I have so it was a problem for me. In my case, my final output was:
    *   `<Organisation>.<TechnologyName>.Web.DLL` - Compiled Web Application Assembly (containing the ASCX templates)
    *   `<Organisation>.<TechnologyName>.Web.UI.DLL` - ASP.NET Compiled UserControl assembly, created by Web Deployment Project
    *   Clean often, and check that the Web Application Project's `bin` and `obj` paths are cleared of any previous junk built when you perhaps hadn't finalised your namespace or assembly naming scheme--the Web Deployment Project will be quite keen to include these, causing a fine mess.
    *   Check your imported namespaces, the ASP.NET compiler likes to refer to the `Import` directive in the ASCX template, and it also considers imported namespaces present in `web.config`'s `<configuration><system.web><pages><namespaces>` element, tweak if you get unknown definitions appearing during the deployment process.

Have some patience spare, it's quite tricky! But you do get some nice re distributable UserControls at the end of it!

Phew!

# html - 在 colgroup 上设置行跨度？

> ID：1006089
> 
> 赞同：1
> 
> 时间：2009-06-17T09:51:34.857
> 
> 标签：html, css, html-table, semantics, modular

简单（我希望），HTML 问题。

假设我有一个跨越 3 列的列组。但它也跨越 9 行。但实际上，我希望有 3 级列（基本上，3 列，分成 9 行）。真正的唯一目标是：

a）避免嵌入表格（出于各种原因） b）保持部分模块化。c) 允许语义模块化区域的样式。

所以最后，我会有一些视觉上的东西：

```
 | col 1  | col 2 | col 3 |
   | row 1  | row 1 | row 1 |
   | row 2  | row 2 | row 2 |
   | row 3  | row 3 | row 3 |

   | col 4  | col 5 | col 6 |
   | row 4  | row 4 | row 4 |
   | row 5  | row 5 | row 5 |
   | row 6  | row 6 | row 6 |

   | col 7  | col 2 | col 3 |
   | row 7  | row 7 | row 7 |
   | row 8  | row 8 | row 8 |
   | row 9  | row 9 | row 9 | 
```

我能够让列组工作以将 3 列保持在一起，但尝试添加“rowspan”失败了。尝试将行组包装在 tr 标记中根本没有好处。据我所知，没有真正的“行组”标签。

更新：

得到反馈后，我意识到我应该详细说明我的想法。

我将使用术语quad、super-column、super-row 来指代数据组。所以举个例子：

```
 Quad 1       Quad 2
super-row1 | a | b | c || d | e | f |
super-row2 | 1 | 2 | 3 || 4 | 5 | 6 |
super-row3 | A | B | C || D | E | F |

               Quad 3       Quad 4
super-row4 | g | h | i || j | k | l |
super-row5 | 7 | 8 | 9 || 0 | 1 | 2 |
super-row6 | G | H | I || J | K | L | 
```

为简单起见，想象一下我在顶部写了 super-col 1 - 6。

因此，quad 1 中的数据全部相关，super-row 1 中的数据全部相关，super-col 1 中的数据全部相关。所以，利用上面的数据，

“a”与“f”、“C”和“G”有直接关系，但“f”、“C”和“G”彼此之间没有直接关系。

另一种思考方式是数独，其中每个四边形、列和行包含 1-9 的集合，使 81 个数据点中的任何一个与它共享行、列或四边形的任何其他数据点直接相关，但不是任何数据点。

快速更新：

最后一件事，对不起。重要的是，这些关系在 HTML 中按语义分组，这样，如果有人使用屏幕阅读器或非传统浏览器，他们可以在任何给定点知道他们在表格中的位置，即“你在 Quad 1，Super第 1 列，第 4 列，第 1 行，第 1 行。数据为“俄亥俄州”。”

这使得样式、跨浏览器兼容性、可访问性都变得更加容易，以及诸如 AccessKeys、Scope 等的移动。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-26T05:29:35.610

鉴于这`<colgroup>`是对列进行分组的唯一语义方法，`<tbody>`也是对行进行分组的唯一语义方法，我建议坚持使用简单的方法：

```
<table>
    <colgroup id="colgroup1">
        <col id="colA" />
        <col id="colB" />
    </colgroup>
    <colgroup id="colgroup2">
        <col id="colC" />
        <col id="colD" />
    </colgroup>
    <tbody id="rowgroup1">
        <tr>
            <th>A</th>
            <th>B</th>
            <th>C</th>
            <th>D</th>
        </tr>
        <tr id="row1">
            <td>A1</td>
            <td>B1</td>
            <td>C1</td>
            <td>D1</td>
        </tr>
        <tr id="row2">
            <td>A2</td>
            <td>B2</td>
            <td>C2</td>
            <td>D2</td>
        </tr>
    </tbody>
    <tbody id="rowgroup2">
        <tr>
            <th>A</th>
            <th>B</th>
            <th>C</th>
            <th>D</th>
        </tr>
        <tr id="row3">
            <td>A3</td>
            <td>B3</td>
            <td>C3</td>
            <td>D3</td>
        </tr>
        <tr id="row4">
            <td>A4</td>
            <td>B4</td>
            <td>C4</td>
            <td>D4</td>
        </tr>
    </tbody>
</table> 
```

这将允许您在保持干净的语义结构的同时设置四边形样式。我不确定你在造型上有多大的灵活性，但你确实有一些选择：

```
<style type="text/css">
    table { border-collapse:collapse; font-family:sans-serif; font-size:small; }
    td, th { border:solid 1px #000; padding:2px 10px; text-align:center; }
    th { background-color:#000; color:#fff; font-size:x-small; }
    colgroup { border:solid 3px #000; }
    tbody { border:solid 3px #000; }
</style> 
```

```
table {
  border-collapse: collapse;
  font-family: sans-serif;
  font-size: small;
}
td,
th {
  border: solid 1px #000;
  padding: 2px 10px;
  text-align: center;
}
th {
  background-color: #000;
  color: #fff;
  font-size: x-small;
}
colgroup {
  border: solid 3px #000;
}
tbody {
  border: solid 3px #000;
}
```

```
<table>
  <colgroup id="colgroup1">
    <col id="colA" />
    <col id="colB" />
  </colgroup>
  <colgroup id="colgroup2">
    <col id="colC" />
    <col id="colD" />
  </colgroup>
  <tbody id="rowgroup1">
    <tr>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
    <tr id="row1">
      <td>A1</td>
      <td>B1</td>
      <td>C1</td>
      <td>D1</td>
    </tr>
    <tr id="row2">
      <td>A2</td>
      <td>B2</td>
      <td>C2</td>
      <td>D2</td>
    </tr>
  </tbody>
  <tbody id="rowgroup2">
    <tr>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
    </tr>
    <tr id="row3">
      <td>A3</td>
      <td>B3</td>
      <td>C3</td>
      <td>D3</td>
    </tr>
    <tr id="row4">
      <td>A4</td>
      <td>B4</td>
      <td>C4</td>
      <td>D4</td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T10:20:12.663

A`<table>`可以有多个`<tbody>`子代，它们代表行组。我以前没有使用过该`<colgroup>`元素，所以我将把它留给其他人添加，但这里有一个解决方案，可以让您在保持其语义的同时满足您的样式需求：

```
<table>
    <tbody>
        <tr>
            <th scope="col">col 1</th>
            <th scope="col">col 2</th>
            <th scope="col">col 3</th>
        </tr>
        <tr>
            <td>row 1</td>
            <td>row 1</td>
            <td>row 1</td>
        </tr>
        <tr>
            <td>row 2</td>
            <td>row 2</td>
            <td>row 2</td>
        </tr>
        <tr>
            <td>row 3</td>
            <td>row 3</td>
            <td>row 3</td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <th scope="col">col 4</th>
            <th scope="col">col 5</th>
            <th scope="col">col 6</th>
        </tr>
        <tr>
            <td>row 4</td>
            <td>row 4</td>
            <td>row 4</td>
        </tr>
        <tr>
            <td>row 5</td>
            <td>row 5</td>
            <td>row 5</td>
        </tr>
        <tr>
            <td>row 6</td>
            <td>row 6</td>
            <td>row 6</td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <th scope="col">col 7</th>
            <th scope="col">col 8</th>
            <th scope="col">col 9</th>
        </tr>
        <tr>
            <td>row 7</td>
            <td>row 7</td>
            <td>row 7</td>
        </tr>
        <tr>
            <td>row 8</td>
            <td>row 8</td>
            <td>row 8</td>
        </tr>
        <tr>
            <td>row 9</td>
            <td>row 9</td>
            <td>row 9</td>
        </tr>
    </tbody>
</table> 
```

我基于[HTML 5 规范](http://dev.w3.org/html5/spec/Overview.html#tabular-data)中的信息，但它也应该是有效的 HTML 4。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-30T09:15:04.573

如果我没记错的话，这个`<colgroup>`标签在任何浏览器中都不能正常工作（好吧，也许是 Opera）。我会不惜一切代价避免它。

如果我是你，我会制作一个简单的表格，每个表格`<td>`代表一个“四边形”，然后在该单元格中为其余数据制作一个表格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-01T08:13:40.480

实际上，语义上正确的方法是嵌套表。您的示例有一个 2x2 的四边形表，每个四边形是一个 3x3 的值表。为此使用嵌套表在语义上没有任何问题。不要对 anti-nested-html-table 人群感到困惑。这与使用嵌套表进行页面布局有关。

使用嵌套表还可以让您更好地控制 CSS 样式。使用 cols 和 colgroups 只会给您非常有限的样式控制。您可以在 col 或 colgroup 上设置的唯一 CSS 属性是边框、背景、具有和可见性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T10:23:36.540

我认为最简单的方法是一起跳过 colgroup-element 并使用简单的类样式来代替：

```
<table>
    <tr class="colgroup1">
        <th>col1</th><th>col2</th><th>col3</th>
    </tr>
    <tr class="colgroup1">
        <td>row1</td><td>row1</td><td>row1</td>
    </tr>
    <tr class="colgroup1">
        <td>row2</td><td>row2</td><tr>row2</td>
    </tr>
    <tr class="colgroup2">
        <th>col4</th><th>col5</th><th>col6</th>
    </tr>
    <tr class="colgroup2">
        <td>row3</td><td>row3</td><td>row3</td>
    </tr>
    <tr class="colgroup2">
        <td>row4</td><td>row4</td><td>row4</td>
    </tr>
    <tr class="colgroup3">
        <th>col7</th><th>col8</th><th>col9</th>
    </tr>
    <tr class="colgroup3">
        <td>row5</td><td>row5</td><td>row5</td>
    </tr>
    <tr class="colgroup3">
        <td>row6</td><td>row6</td><td>row6</td>
    </tr>
</table> 
```

然后，您可以在 CSS 中轻松定位不同的 colgroup：

```
.colgroup1 th {
   // Styles here
}

.colgroup2 th {
   // Styles here
}

.colgroup3 th {
   // Styles here
}

// Same for tds. 
```

**编辑：**我喜欢[Rory Fitzpatrick](https://stackoverflow.com/questions/1006089/setting-rowspan-on-colgroup/1006188#1006188)如何使用多个表体。如果这确实有效，那么我会采用该解决方案，只需在每个表体标签上放置一个类名。CSS 将保持不变

# erlang - 我应该用 Erlang 重写 webapp 前端吗？

> ID：1006093
> 
> 赞同：3
> 
> 时间：2009-06-17T09:53:22.327
> 
> 标签：erlang

我有一个 Rails webapp [部署在 Heroku 上]，它使用 Heroku 的 rake:cron 功能重复对其他站点进行一系列 HTTP 调用。目前的情况并不理想；rake:cron 进程在单个线程中执行，这意味着 HTTP 调用是按顺序进行的；这反过来意味着对同一站点的调用之间有很长的时间[通常为 2 分钟]。

我想并行执行这个过程，并将调用之间的时间减少到 10 秒。看过 Kevin Smith 的“实践中的 Erlang”后，我对使用 Erlang 作为后端替代品的想法很满意。我想弄清楚 [鉴于[Damien Katz 的评论](http://damienkatz.net/2008/03/what_sucks_abou.html)]，我是否应该 a) 用 Erlang、前端和全部重写整个 webapp，或者 b) 使用 Rails 前端/Erlang 后端维护一个拆分结构。

我喜欢在项目中使用 100% Erlang 堆栈的想法；我需要使用某种 Erlang Web 框架 [Nitrogen ? Erlyweb ?]; 我担心他们不够成熟，我会花时间和他们一起在项目的网络部分上陷入困境。

有人有意见吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T10:22:10.037

对访问者的实际影响是什么（HTTP 后端调用之间的两分钟间隔）？

如果没有太大区别，我会说这听起来像是过早的优化，你现在最好跳过 Erlang。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T22:54:51.247

前两张海报几乎涵盖了您问题的哲学方面。所以我会回答框架成熟度/陷入你问题的一部分。

如果您决定出于某种原因确实要在 erlang 中重写 webapp，那么我不会太担心框架会减慢您的速度。erlyweb 和氮气的功能已经足够完善，您可以很快地使用它们。我在氮气中开发了一个相当复杂的敏捷项目管理应用程序，发现它非常直观，并且并不缺乏我需要的功能。晚上几个小时，几周后，我的应用程序开始运行。

至于使用哪一个取决于您要构建的应用程序的类型。

Nitrogen 的目标是极其动态的 Web 应用程序。大部分页面都是使用 javascript 呈现的，并且是高度事件驱动的。

ErlyWeb 更适合以内容为主要焦点的站点，而不是富客户端类型的应用程序。它使用 MVC 风格的架构。

无论你决定什么，祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-02T21:51:54.873

我只想使用正确的工具来完成这项工作。除非你有绝对的理由来移植前面，否则将两者连接在一起绝对没有错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T10:33:24.260

这取决于。你对 Erlang 了解多少？你已经写了多少代码？你有多少项目经验？这是为了工作还是为了娱乐？

从头开始重写项目通常是灾难的根源，尤其是当您在此过程中尝试学习一门新语言时。在我看来，如果你已经精通这两种语言，你就不会问这个问题，在这种情况下，如果它是一个工作项目，我会建议你坚持使用 Ruby。

我不同意上面的海报，*如果有必要*的话，改变语言是一种过早的优化。改变语言是一件大事。不能在最后一刻完成。但是，由于您概述的原因，我可能根本不会更改语言。如果除了切换性能之外没有其他原因，您可能应该只查看 Ruby 中的多线程或其他一些优化。

# c# - C#：在实现的方法中显式指定接口

> ID：1006094
> 
> 赞同：3
> 
> 时间：2009-06-17T09:53:33.090
> 
> 标签：c#, interface, access-modifiers

为什么在实现接口时，如果我将方法设为公开，我不必显式指定接口，但如果我将其设为私有，我必须......像这样（*`GetQueryString`是 IBar 的方法*）：

```
public class Foo : IBar
{
    //This doesn't compile
    string GetQueryString() 
    {
        ///...
    }

    //But this does:
    string IBar.GetQueryString() 
    {
        ///...
    }
} 
```

那么，为什么在方法设为私有时必须显式指定接口，而不是在方法设为公开时？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-17T09:59:22.643

显式接口实现是公有和私有之间的一种中间方式：如果您使用接口类型的引用来获取它，它就是公有的，但这是访问它的*唯一*方法（即使在同一个类中）。

如果您使用隐式接口实现，则需要将其指定为公共，因为它*是*一个公共方法，因为它位于接口中，所以您要覆盖它。换句话说，有效代码是：

```
public class Foo : IBar
{
    // Implicit implementation
    public string GetQueryString() 
    {
        ///...
    }

    // Explicit implementation - no access modifier is allowed
    string IBar.GetQueryString() 
    {
        ///...
    }
} 
```

就我个人而言，我很少使用显式接口实现，除非它需要基于它是通用接口还是非通用接口`IEnumerable<T>`具有不同签名的东西：`GetEnumerator`

```
public class Foo : IEnumerable<string>
{
    public IEnumerator<string> GetEnumerator()
    {
        ...
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator(); // Call to the generic version
    }
} 
```

在这里，您*必须*使用显式接口实现来避免尝试基于返回类型重载。

# mysql - MYSQL从另一个表的字段更新多个字段

> ID：1006098
> 
> 赞同：2
> 
> 时间：2009-06-17T09:53:57.490
> 
> 标签：mysql

设想：

我有一个应用程序，它有一个配置表，用于存储使用该应用程序的每个网站的配置数据。我在配置表中添加了一些额外的列，并将其推广到所有应用程序。我已经用所有配置表上需要相同的数据更新了这些新列。

我该怎么做呢？

我的第一个想法是复制表格并执行以下操作：

```
UPDATE `config` SET `config`.`new1` = `tmp_config`.`new1`, `config`.`new2` = `tmp_config`.`new2` LEFT JOIN `tmp_config` ON (`tmp_config`.`tmp_id` = `config`.`id`)
```

这会产生预期的影响。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-17T10:17:53.043

以下对我有用（使用内部连接并将 SET 移动到查询的末尾：

```
更新 `config` INNER JOIN `tmp_config` ON (`tmp_config`.`id` = `config`.`id`)
SET `config`.`new1` = `tmp_config`.`new1`, `config`.`new2` = `tmp_config`.`new2`
```

感谢你的帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T10:10:19.033

我不太明白你的所有问题。你在哪里更改了配置？我将您的解释读为：

1.  您已更改所有应用程序的架构
2.  您已在别处更新了应用程序的配置

有关多表更新的正确语法，请参阅[VolkerK 的答案。](https://stackoverflow.com/questions/1006098/mysql-updating-multiple-fields-from-fields-of-another-table/1006137#1006137)

您使用的是哪个存储引擎？如果是 InnoDb（或其他支持事务的引擎），则应在运行查询之前启动事务。然后，您可以在提交任何更改之前验证结果是否是所需的：

例子：

> mysql>开始交易；
> 
> mysql> SELECT * FROM 配置限制 5; -- 看看之前的样子
> 
> mysql> 在此处运行更新查询
> 
> mysql> SELECT * FROM 配置限制 5; -- 验证结果是否为预期结果
> 
> mysql>提交；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T10:07:33.280

这应该具有将 config 中的 new1 和 new2 更新为 tmp_config 中 new1 和 new2 的值的效果，只要两个表中的 id 匹配（如果 tmp_config 中没有匹配，则为 null）。

我相信这就是你所说的你正在尝试做的事情。

从[MySql 更新参考](http://dev.mysql.com/doc/refman/5.0/en/update.html)：

> 您还可以执行覆盖多个表的 UPDATE 操作。但是，您不能将 ORDER BY 或 LIMIT 与多表 UPDATE 一起使用。table_references 子句列出了连接中涉及的表。它的语法在第 12.2.8.1 节，“JOIN 语法”中描述。这是一个例子：
> 
> UPDATE items,month SET items.price=month.price WHERE items.id=month.id;

在这种情况下，他们不只是使用“JOIN”语法，但 JOIN 语法应该仍然有效，您只需要在 SET 子句之前执行它。

它看起来像

```
UPDATE `config` 
  LEFT JOIN `tmp_config` ON (`tmp_config`.`tmp_id` = `config`.`id`)
  SET `config`.`new1` = `tmp_config`.`new1`, `config`.`new2` = `tmp_config`.`new2` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T10:05:46.110

你需要这样做：

编辑

创建表`newtable` 选择 * 从旧表；

```
MySQL creates new columns for all elements in the SELECT. For example: 
mysql> CREATE TABLE test (a INT NOT NULL AUTO_INCREMENT,
    ->        PRIMARY KEY (a), KEY(b))
    ->        TYPE=MyISAM SELECT b,c FROM test2; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T10:08:20.720

多表更新语法不允许 JOIN 放置它，请参阅[http://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

```
UPDATE 
  `config`, `tmp_config`
SET
  `config`.`new1` = `tmp_config`.`new1`,
  `config`.`new2` = `tmp_config`.`new2`
WHERE
  `tmp_config`.`tmp_id` = `config`.`id`
```

应该做的伎俩（未经测试，没有保证;-)）

# asp.net - 运行 aspnet_regiis.exe -ir 会产生任何问题吗？

> ID：1006103
> 
> 赞同：0
> 
> 时间：2009-06-17T09:55:54.757
> 
> 标签：asp.net, iis, settings, aspnet-regiis.exe

我问过一个关于在 IIS 中更改 .Net 站点版本的问题。如果它影响经典的 asp 站点等（请参阅[Asp.net 设置是否影响经典的 asp（IIS 6 设置）](https://stackoverflow.com/questions/847406/does-asp-net-setting-affect-classic-asp-iis-6-settings)），这似乎很好。所以我的后续问题是，运行这个命令会让我被解雇吗？它所做的是将 .net 版本的默认值（以及所有现有的？）更改为 2.0。

这不会影响任何 .net 站点，因为它们的版本都已经是 2.0。经典的 asp 页面需要更新其应用程序池，以便其功能与 2.0 一致，但我会遇到任何其他麻烦吗？

我已经尝试在测试环境中执行此操作，并且在安装期间（通过命令）没有任何站点受到影响，但是我没有任何经典的 asp 站点或任何运行的 .net 站点（我应该测试一下，来想想它）但其他东西可能会破坏吗？

这个命令还有其他作用吗？我们有一些非常大的站点正在运行，我们不能有停机时间，所以我需要 100% 确定这个命令是安全的。由于每次我们更改新站点的 .net 版本号时所有站点都会关闭，因此我们需要尽快进行此修复。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T10:05:01.663

这不应该引起任何副作用，因为它与 IIS 对 .NET 页面（例如 aspx 扩展）所做的操作有关。
由于经典的 asp 页面不是由 IIS 中的 .NET 扩展处理的，我看不出有什么担心的理由。
**编辑：**
根据[MSDN](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28VS.80%29.aspx)，您可以使用一个选项

> -norestart - 在安装或更新 ASP.NET 脚本映射后禁止重新启动万维网发布服务。如果不使用此选项，所有应用程序池都会被回收。

所以你可以看到应用程序池**将**被回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-01T18:29:18.650

很久没问了，但是 Dror，谢谢你的编辑。我一定会尝试的。

几个月前，我实际上找到了解决这个问题的方法。

您可以导出站点配置，然后获得一个 XML 文件，编辑此文件并将站点名称等设置为某个名称（例如 dev1）。然后你导入它，你就得到了一个预先配置了 .net 的新站点。只要确保您更改名称和其他不能与另一个站点相同的东西（比如主机的东西，不记得到底有什么参数），因为我猜这会导致问题。

快乐的伊辛

# c# - 如何在不阻塞的情况下调用 NetworkStream.Read()？

> ID：1006119
> 
> 赞同：4
> 
> 时间：2009-06-17T10:03:29.297
> 
> 标签：c#, sockets, networkstream

我想清空套接字的读取缓冲区，所以我编写了以下代码......

```
byte[] tempBuffer = new byte[1024];
int readCount = 0;
while ((readCount = tcpSocket.GetStream().Read(tempBuffer, 0, tempBuffer.Length)) != 0)
{
    // do with tempBuffer
} 
```

但是 Read() 方法被阻止了，所以我添加了**tcpSocket.ReceiveTimeout = 1;** . 它就像以前一样工作。

据我所知，这通常用于 C++。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T10:16:59.737

在调用 Read 方法之前，您可以使用[DataAvailable](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.dataavailable(VS.71).aspx)属性查看是否有要读取的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T10:16:52.420

直接使用[`NetworkStream.Read()`](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read.aspx)函数，而不是使用`GetStream()`：

> 如果没有数据可供读取，Read 方法返回 0。Read**操作读取可用数据，最多为 size 参数指定的字节数。**如果远程主机关闭连接，并且已接收到所有可用数据，则 Read 方法将立即完成并返回零字节。注注：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T10:18:09.033

为什么要清空读取缓冲区？如果您不希望套接字的内容关闭它。如果您不想要当前内容，但想要以后的数据，您怎么知道以后何时开始。如果数据是非封装流...

听起来您以错误的方式解决问题。

# wcf - 什么是公钥基础设施

> ID：1006120
> 
> 赞同：0
> 
> 时间：2009-06-17T10:03:33.040
> 
> 标签：wcf, security, wcf-binding, pki

我需要知道什么是公钥基础设施。我需要知道这是否与发送请求和响应有关，就像 WCF 中的 WsHttpbinding 一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T10:07:52.297

PKI 和 WCF 服务之间没有直接关系。[PKI](http://en.wikipedia.org/wiki/Public_key_infrastructure)是用于创建和管理数字证书的基础结构，除许多其他用途外，它还可用于加密流经 WCF 服务的数据。

一旦您拥有私钥和数字证书来分发其对应的公钥，您就可以“忘记”它背后的 PKI（在大多数情况下）。

如果您需要有关如何实际使用证书来保护您的 WCF 的更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:42:18.377

[http://www.bing.com/search?FORM=IEFM1&q=public+key+infrastructure](http://www.bing.com/search?FORM=IEFM1&q=public+key+infrastructure)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T10:11:16.393

AlexDrenea 是正确的。PKI 和 WCF 之间没有直接联系。

有关 WCF 绑定的更多信息可从以下位置轻松获得：

*   [库尔特克莱斯](http://geekswithblogs.net/claeyskurt/archive/2008/04/22/121508.aspx)

和

*   [穆罕默德·阿特夫](http://mohammedatef.wordpress.com/tag/wshttpbinding/)

两者都很好地介绍了绑定背后的概念和 Google 上的顶级结果。

# php - 通过添加 3hrs 从服务器检索 CURTIME() 并将其显示在 PHP 页面中

> ID：1006122
> 
> 赞同：1
> 
> 时间：2009-06-17T10:04:00.730
> 
> 标签：php, mysql

如何通过添加 3hrs 从服务器检索 CURTIME() 并将其显示在 PHP 页面中。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T10:19:27.390

如果你愿意，你可以让 MySQL 处理时间算术

```
SELECT Time(Now()+Interval 3 hour)
```

见[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:11:08.063

在 MySQL 中：

```
SELECT CURTIME() 
```

然后在 PHP 中：

```
// get the SQL query result in $curtime, then:
$t = strtotime( date('Y-m-d ') . $curtime );
$t = strtotime( "+3 hours", $t );
echo date( 'H:i:s', $t); 
```

但是如果 PHP 服务器上的时间是一样的，你可以直接这样做：

```
echo date( 'H:i:s', strtotime( '+3 hours' ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T10:13:21.677

时间计算是这样完成的：

```
$unixTime = time() + 60 * 60 * 3;
echo gmdate('Y-m-d H:i:s', $unixTime); 
```

但是，如果您打算提供不同时区的时间，您应该查看 php.ini 中的[DateTime 类](http://de.php.net/manual/en/class.datetime.php)。

**编辑**

如果您需要从 mysql 服务器获取时间，则以`$unixTime`这种方式计算（不要忘记为 mysql 函数插入错误处理）：

```
$resultRow = mysql_fetch_row(mysql_query('SELECT UNIX_TIMESTAMP() + 60 * 60 * 3'));
$unixTime = $resultRow[0]; 
```

# jquery - jQuery：用滑动代替淡入淡出

> ID：1006123
> 
> 赞同：1
> 
> 时间：2009-06-17T10:04:02.227
> 
> 标签：jquery, effect

我有下面的脚本来隐藏一个 div 的内容并显示另一个

```
$("#"+objCurrentDiv).fadeOut("slow",function(){
  $("#"+objNewDiv).fadeIn("slow");
}); 
```

这给了我淡入淡出的效果。现在我想用滑动（从左到右）来代替淡入淡出效果。我尝试了幻灯片放映方法，但没有成功。有人可以帮我重写吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T10:09:20.110

由于标准函数 .slideDown 和 .slideUp 会垂直产生效果，你必须像这样使用 .animate ：

```
$("#"+objCurrentDiv).animate({'width':'0%','display':'none'},"slow",function(){
  $("#"+objNewDiv).animate({'width':'100%','display':'block'},"slow");
}); 
```

# .net - 测量触发的事件数？

> ID：1006124
> 
> 赞同：3
> 
> 时间：2009-06-17T10:04:06.127
> 
> 标签：.net, events, performance

我正在一个非常大的应用程序中进行一些调整。有没有办法测量应用程序中触发的事件数量？例如在 System.Diagnostics 中使用某些东西？

由于应用程序的大小，在事件中添加代码不是可接受的解决方案。

有分析工具，但对我来说快速简单的方法可以在 .Net 中找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-22T17:10:38.720

我不确定知道事件的数量是否会对您有所帮助。了解程序在哪里花费时间或分配内存会更有帮助。探查器将对此有所帮助。

* * *

作为记录，分析器列表：

*   [JetBrains 的 dotTrace](http://www.jetbrains.com/profiler/index.html)
*   [红门蚂蚁](http://www.red-gate.com/products/ants_profiler/index.htm)
*   [自动化 QA 的 AQTime](http://www.automatedqa.com/products/aqtime/index.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-22T17:07:46.103

您是在谈论 Windows 的“事件查看器”还是对课程中事件的订阅？

如果是后者，谁订阅了您的活动？也许您可以编写一些“粘合”代码，在事件和订阅者之间进行计数！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-23T05:31:43.707

我得出的结论是尝试使用性能测量工具。由于没有简单的方法可以明智地进行测量代码。我会 tr ANTS 来了解它可以为我做些什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T20:05:35.223

这是一个非常有趣的问题。

如果没有任何额外的代码，真的没有简单的方法来跟踪事件。这并不意味着添加代码必须很困难或需要性能。

如果您的所有事件都使用自定义 eventArgs，您可以向构造函数添加一个简单的日志记录语句，该语句允许您在每次创建自定义 eventArgs 时进行计数。

如果你不使用自定义 eventArgs，你可以很容易地使用一个 customEventArgs 类来扩展 eventArgs，这个类正是这个计数。只需扩展构造函数以更新一些静态变量，您可以经常将其写入日志。然后使用快速重构，您可以将所有默认 eventArgs 重命名为这个新的略有不同的 customEventArgs。这将花费 10 分钟，并且不会破坏任何现有代码。

但是，如果您知道分析器可以做到这一点，为什么不使用它呢？如果应用程序如此庞大，并且您正在尝试进行非常小的优化，那么无论您为谁构建此应用程序都可能不会介意与您购买许可证以换取软件改进相关的额外成本。

# iphone - 如何在uitableViewCell中随机显示字符串？

> ID：1006131
> 
> 赞同：-2
> 
> 时间：2009-06-17T10:06:24.047
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch

我想在 uitableviewcell 上随机显示 4 个选项（字符串）我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:56:37.667

使用 NSMutableArray 而不是异常数组，然后使用随机函数获取随机索引，例如：

```
int rand = arc4random() % [yourMutableArray count]; 
```

然后获取值并执行以下操作：

```
[yourMutableArray removeObjectAtIndex:rand]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T11:43:32.883

取决于您所说的“随机显示 4 个选项”是什么意思。

我假设您想在 UITableView 中显示一个单元格，其中包含四个字符串中的一个。

创建 UITableDataSource，将 4 个字符串存储在一个数组中，当 UITableView 请求所选行的单元格时，使用随机函数返回 4 个字符串之一。

查看有关如何为 UITableView/DataSource 实现所需方法的苹果开发人员文档。

代替：

```
 // i have 4 strings in the array listOfOptionsText
 cell.text = [listOfOptionsText objectAtIndex:indexPath.row];
 return cell; 
```

和：

```
 int rand = arc4random() % [listOfOptionsText count];
 cell.text = [listOfOptionsText objectAtIndex:rand];
 return cell; 
```

**回复：重复**

如果你得到重复，我假设你想显示 4 个字符串（最终）如果你想显示 4 个值但以随机顺序，那么你可以先打乱字符串，然后按顺序选择它们，打乱示例：

```
 NSMutableArray * deck =
[[NSMutableArray alloc] initWithObjects: @"One", @"Two", @"Three", @"Four", nil];

for (id string in deck) NSLog(@"%@", string);

int pos = 0;
int next = 0;
int i;
for (i = 0; i < 10; ++i)
{
    next = arc4random() % [deck count];
    [deck exchangeObjectAtIndex:pos withObjectAtIndex:next];
    pos = next;
}

NSLog(@"after shuffle ...");
for (id string in deck) NSLog(@"%@", string);

[deck release]; 
```

如果您在初始化期间随机播放字符串，那么您可以按顺序选择它们（假设您不希望重复，这意味着您要从 4 个字符串中选择 4 个......）。我不确定到底是什么目的。

现在您可以在设置单元格值时返回原始代码：

```
cell.text = [listOfOptionsText objectAtIndex:indexPath.row];
return cell; 
```

# c# - IMul tipleResults LINQ DBML 类无法解析

> ID：1006133
> 
> 赞同：0
> 
> 时间：2009-06-17T10:07:18.867
> 
> 标签：c#, asp.net-mvc, linq-to-sql

在我的部分类中，它定义了一个函数，该函数返回 IMultipleResults 的类型，以使用我的 *.dbml 文件中定义的类从存储过程中带回多个结果形状，由于某种原因，`[ResultType(typeof(MyType))]`它不起作用。`MyType`就是说找不到。函数在`.cs`我`.dbml`文件的文件里，类型肯定在我的dbml文件里。

关于为什么找不到它的任何想法？这是一个想法：

```
using System;
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Reflection;

namespace IntranetMvcAreas
{
  partial class ContractsControlDataContext : DataContext
  {
    [Function(Name = "dbo.procCC_Contract_Select")]
    [ResultType(typeof(Contract))]
    [ResultType(typeof(ContractCostCentre))]
    [ResultType(typeof(tblCC_Contract_Data_Terminal))]
    [ResultType(typeof(tblCC_CDT_Data_Service))]
    [ResultType(typeof(tblCC_Data_Service))]
    public IMultipleResults procCC_Contract_Select(
        [Parameter(Name = "ContractID", DbType = "Int")] System.Nullable<int> ContractID,
        [Parameter(Name = "ResponsibilityKey", DbType = "Int")] System.Nullable<int> ResponsibilityKey,
        [Parameter(Name = "ExpenseType", DbType = "Char")] System.Nullable<char> ExpenseType,
        [Parameter(Name = "SupplierID", DbType = "Int")] System.Nullable<int> SupplierID)
    {
      IExecuteResult result = this.ExecuteMethodCall(this, (MethodInfo)(MethodInfo.GetCurrentMethod()), ContractID, ResponsibilityKey, ExpenseType, SupplierID);
      return (IMultipleResults)result.ReturnValue;
    }
  }
} 
```

`typeof`尽管在 dbml 文件中，但无法找到所有类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T10:08:35.713

说得太快了，Intellisense 终于接了起来。您必须在您的项目中包含相对的 using 语句。（我从来没有在任何地方看到过这种情况），`using IntranetMvcAreas.Areas.Accounts.Models;`诀窍也是如此。

# mysql - 如何使用不会将删除级联到其子级的 ForeignKeys 创建 Django 模型？

> ID：1006135
> 
> 赞同：23
> 
> 时间：2009-06-17T10:07:42.890
> 
> 标签：mysql, django, django-models

我的一个具有`ForeignKey`'s 的模型实际上是其他表上的 MySQL 视图。我遇到的问题是，当我从这些表中删除数据时，Django，如[“删除对象”文档](http://docs.djangoproject.com/en/dev/topics/db/queries/#deleting-objects)中所述......

> 当 Django 删除一个对象时，它会模拟 SQL 约束 ON DELETE CASCADE 的行为——换句话说，任何具有指向要删除对象的外键的对象都将被删除。

...尝试从我的视图中删除行，这当然不能，因此会引发错误：

```
mysql_exceptions.OperationalError '>=(1395, "Can not delete from join view 'my_db.my_mysql_view'"' 
```

有没有办法`ForeignKey`在模型上指定一个约束，这将为我提供所有 Django 魔法，但不会级联删除？或者，有没有办法让 MySQL 忽略从我的视图中删除一行而不是引发错误的命令？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-11-11T11:37:29.870

Django [1.3a1](http://docs.djangoproject.com/en/dev/releases/1.3-alpha-1/#configurable-delete-cascade)`ForeignKey`及更高版本通过's[`on_delete`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)参数支持这一点。

以下示例`NULL`在删除外键时设置字段。有关更多选项，请参阅[文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)。

```
user = models.ForeignKey(User, blank=True, null=True, on_delete=models.SET_NULL) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-09-24T15:11:56.793

哈罗德的回答为我指明了正确的方向。这是我实现它的方式的草图（在法国遗留数据库上，因此命名约定有点奇怪）：

```
class Factures(models.Model):
    idFacture = models.IntegerField(primary_key=True)
    idLettrage = models.ForeignKey('Lettrage', db_column='idLettrage', null=True, blank=True)

class Paiements(models.Model):
    idPaiement = models.IntegerField(primary_key=True)
    idLettrage = models.ForeignKey('Lettrage', db_column='idLettrage', null=True, blank=True)

class Lettrage(models.Model):
    idLettrage = models.IntegerField(primary_key=True)

    def delete(self):
        """Dettaches factures and paiements from current lettre before deleting"""
        self.factures_set.clear()
        self.paiements_set.clear()
        super(Lettrage, self).delete() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-17T15:29:42.210

Django 的 ForeignKey 管理器有一个名为 clear() 的方法，可以从相关对象集中删除所有对象。首先调用它，然后删除您的对象应该可以工作。依赖对象的外键将设置为 None（如果您的模型中允许）。

这里有一个简短的描述：http: [//docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward](http://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-01-02T18:51:34.353

仅供参考 - 在[http://code.djangoproject.com/ticket/7539](http://code.djangoproject.com/ticket/7539)的 django 源存储库中存在对此的功能请求。看来这个话题正在引起一些关注。希望它将包含在未来的 Django 版本中。

票证包括 Django 核心的补丁，以实现 models.ForeignKey(...) 的“on_delete”可选参数，让您指定删除指向的模型时会发生什么，包括关闭默认的 ON DELETE CASCADE 行为。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-17T10:42:37.983

好吧，看看删除方法

```
def delete(self):
    assert self._get_pk_val() is not None, "%s object can't be deleted because its %s attribute is set to None." % (self._meta.object_name, self._meta.pk.attname)

    # Find all the objects than need to be deleted.
    seen_objs = CollectedObjects()
    self._collect_sub_objects(seen_objs)

    # Actually delete the objects.
    delete_objects(seen_objs) 
```

我想说覆盖删除就足够了......未经测试的代码将是

```
def delete(self):
    assert self._get_pk_val() is not None, "%s object can't be deleted because its %s attribute is set to None." % (self._meta.object_name, self._meta.pk.attname)

    # Find all the objects than need to be deleted.
    seen_objs = CollectedObjects()
    seen_objs.add(model=self.__class__, pk=self.pk, obj=self, parent_model=None)

    # Actually delete the objects.
    delete_objects(seen_objs) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-14T00:28:57.137

一种方法是在删除之前调用 clear 方法，[这里的文档](http://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)基本上“清除”了关系。一个问题认为：它本身不是自动的。你可以选择：每次你不想级联时调用它，或者在每次删除之前使用 pre_delete 信号发送清除，当然当你想要删除时它会给你带来问题 - 级联。

或者您可以为 django 社区做出贡献并添加要删除的关键字参数，也许它会在 django 1.3 中？：D

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-24T08:21:03.743

回复：[http ://code.djangoproject.com/ticket/7539](http://code.djangoproject.com/ticket/7539)

从 2010 年 6 月的 Django 1.2.1 开始没有注意。我想我们需要“注意那个空间”。

# c# - 访问文件被拒绝

> ID：1006140
> 
> 赞同：10
> 
> 时间：2009-06-17T10:09:32.140
> 
> 标签：c#, file-io, permissions

我正在使用 FTPClient 库将文件从 Windows 共享传输到 FTP 服务器。

该库的 SendFile 方法使用以下代码：

```
FileStream stream = new FileStream(localFileName, FileMode.Open); 
```

这会导致 System.UnauthorizedAccessException 被抛出，但是我可以使用正在执行代码的同一用户帐户下的 Windows 资源管理器打开、重命名和移动文件。

谁能告诉我为什么会这样？

**编辑：**

奇怪的是，我可以访问共享上的其他文件，这些文件已被授予与我不能访问的相同的 NTFS 权限。

这也是一个 Windows 窗体应用程序。

**更新：**

仍然没有运气。我可以使用`StreamReader`但不是文件流来读取文件。我不明白为什么两者的行为不同。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-06-17T10:18:57.207

你确定它是同一个用户帐户？你能试试像

```
MessageBox.Show(WindowsIdentity.GetCurrent().Name); 
```

?

另外，您确定该文件不是只读的吗？您需要对文件的写权限吗？否则你可以尝试：

```
FileStream stream = new FileStream(localFileName, FileMode.Open, FileAccess.Read); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:15:16.980

运行您的代码的进程对该文件没有权限。它是 Web 应用程序的一部分吗？如果是，您需要授予对 ASPNET 帐户的访问权限。

授予文件上的“每个人”权限，看看它是否还有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T10:33:59.780

它在 FileSecurity 类附近。

请参阅[FileSecurity 课程](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.filesecurity.aspx)

并尝试：

```
 // Get a FileSecurity object that represents the
        // current security settings.
        FileSecurity fSecurity = File.GetAccessControl(localFileName);

        // Add the FileSystemAccessRule to the security settings.
        fSecurity.AddAccessRule(new FileSystemAccessRule("DOMAIN\USERNAME",
            FileSystemRights.ReadData, AccessControlType.Allow));

        // Set the new access settings.
        File.SetAccessControl(localFileName, fSecurity); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T10:13:50.867

1) 使用资源管理器对物理目录的 NTFS 权限

2) 在 IIS MMC 控制台 FTP 站点内，允许对 FTP 文件夹进行读/写

3) 检查上述步骤时，确保FTP站点或虚拟目录确实存在

[http://www.eggheadcafe.com/forumarchives/inetserveriisftp/Jan2006/post25322215.asp](http://www.eggheadcafe.com/forumarchives/inetserveriisftp/Jan2006/post25322215.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T10:17:43.930

您的项目是从网络驱动器运行的吗？如果是这样，那将意味着它以可能导致这种情况的受限特权模式运行。尝试将项目复制到 C 盘并再次运行。

# c++ - 如何检测桌面过渡效果？

> ID：1006147
> 
> 赞同：1
> 
> 时间：2009-06-17T10:12:11.103
> 
> 标签：c++, desktop, transition

我想最小化我的应用程序，截取当前桌面的屏幕截图并将我的应用程序恢复到原始状态。

这在 Windows XP 下运行良好，但在不同的 Vista 机器上进行测试时，200 毫秒的最小化时间不再有效。

有没有办法询问操作系统何时完成了这些花哨的效果或查找执行操作的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T10:20:25.487

虽然我不知道按照您的要求做的方法，但我有一个建议：与其最小化应用程序的窗口，不如隐藏它（使用 ShowWindow(SW_HIDE)）？这不会受到动画效果的影响，所以应该是即时的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:53:24.623

也许相反，您应该将桌面最小化？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T14:42:18.470

我能找到的最接近的是 SPI_GETUIEFFECTS，它会告诉您是否完全启用了此类效果。

如果启用，您当然可以使用 SPI_SETUIEFECTS 将其关闭。但这是一种相当霰弹枪的方法——你将如何恢复它们？暂时关闭最困扰您的可能会更好。

# php - 推特消息之间是否有最短等待时间？

> ID：1006161
> 
> 赞同：0
> 
> 时间：2009-06-17T10:15:37.617
> 
> 标签：php, twitter, sleep

考虑一下：

```
require 'Twitter.class.php';
$tweet = new Twitter("username", "password");

foreach($comment as $key => $value) {
        $link = $db->get_row("sql query");
            //sleep(10;)    
        $tweet->update('$link');
    }
} 
```

这会为每个循环生成一条新的 twitter 消息，循环发生大约 10 次，我希望有 10 条 twitter 消息发送到我的帐户。但是，最多只有 1 或 2 个到达。

有时间我必须在推文之间等待吗？我已经尝试了睡眠功能，但这并没有解决任何问题。我需要等待更长的时间吗？我在文档中找不到太多东西。

在我尝试将推文保存到数据库并使用 cron 作业或其他东西来处理推文之前。我更喜欢让它在上面工作。请帮忙。:)

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:08:11.323

查看[example.php](http://www.phpclasses.org/browse/file/21128.html)时，Twitter 构造函数有一个可选的第三个参数。如果您将 true 添加到第三个参数，您将获得正在发送和接收的数据的输出转储。尝试打开它，看看会发生什么。

但是，为了回答具体问题，Twitter API 对你在一小时内可以做多快/做多少有限制。有关这方面的信息，请参阅[Twitter API 常见问题解答。](http://apiwiki.twitter.com/FAQ)当您进行测试时，您可能不小心触发了您的 IP 地址的黑名单。来自 Twitter 的调试信息应该会有所帮助。

如果这还不够，您可以在您的 PHP 代码和 Twitter 之间添加一个代理（如 Twitter FAQ 中所推荐的）以查看返回值；您可能会收到一些“停止发送这么多更新”类型的消息，Twitter PHP 代码正在默默地删除。

# .net - 如何在 Visual Studio Express 中的函数名称中的单词之间移动？例如：public void moveCursonBetweenTheseCapitalizedWords() { }

> ID：1006168
> 
> 赞同：0
> 
> 时间：2009-06-17T10:17:00.733
> 
> 标签：.net, visual-studio, editor

就像在 Eclipse 中一样，当我们说 Ctrl + 左/右箭头时，光标在方法中的单词之间移动，当它们大写时。我想在 Visual Studio Express 中做同样的事情。是否可以？

目前，当我说 Ctrl + Left/Right 时，光标会移动到末尾，将整个函数名视为一个单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T10:27:29.137

用于 VS的优秀[ReSharper](http://www.jetbrains.com/resharper/)插件具有此功能，并将其称为 CamelHumps。我不相信它在普通的 Visual Studio 中可用。

*编辑*正如下面 Simeon Pilgrim 所指出的，我的问题阅读失败，抱歉- Express 不支持加载项 :(

# python - 如何查看 Python 对象内部？

> ID：1006169
> 
> 赞同：333
> 
> 时间：2009-06-17T10:17:18.800
> 
> 标签：python, introspection

我开始使用 Python 在各种项目中编写代码（包括 Django Web 开发和 Panda3D 游戏开发）。

为了帮助我理解发生了什么，我想基本上“查看” Python 对象内部，看看它们是如何运行的——比如它们的方法和属性。

假设我有一个 Python 对象，我需要打印出它的内容吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：393
> 
> 时间：2009-06-17T10:28:53.627

Python 具有一组强大的自省功能。

看看以下[内置函数](http://docs.python.org/library/functions.html)：

*   [`type()`](https://docs.python.org/3/library/functions.html#type)
*   [`dir()`](https://docs.python.org/3/library/functions.html#dir)
*   [`id()`](https://docs.python.org/3/library/functions.html#id)
*   [`getattr()`](https://docs.python.org/3/library/functions.html#getattr)
*   [`hasattr()`](https://docs.python.org/3/library/functions.html#hasattr)
*   [`globals()`](https://docs.python.org/3/library/functions.html#globals)
*   [`locals()`](https://docs.python.org/3/library/functions.html#locals)
*   [`callable()`](https://docs.python.org/3/library/functions.html#callable)

`type()`并且`dir()`对于分别检查对象的类型及其属性集特别有用。

* * *

## 回答 #2

> 赞同：202
> 
> 时间：2009-06-17T13:43:33.097

`object.__dict__`

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2009-06-18T00:11:32.043

我很惊讶还没有人提到帮助！

```
In [1]: def foo():
   ...:     "foo!"
   ...:

In [2]: help(foo)
Help on function foo in module __main__:

foo()
    foo! 
```

帮助让您阅读文档字符串并了解类可能具有的属性，这非常有帮助。

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2009-06-17T10:18:01.310

首先，阅读源码。

二是使用`dir()`功能。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2009-06-17T13:41:07.733

如果这是为了探索以了解发生了什么，我建议您查看[IPython](http://ipython.scipy.org/moin/)。这添加了各种快捷方式来获取对象文档、属性甚至源代码。例如附加一个“？” 到函数将为对象提供帮助（实际上是“帮助（obj）”的快捷方式，而使用两个？（“ `func??`”）将显示源代码（如果可用）。

还有很多额外的便利，比如制表符补全、漂亮的结果打印、结果历史记录等，这使得这种探索性编程非常方便。

对于内省的更多编程使用，基本的内置函数如`dir()`,`vars()`等`getattr`将很有用，但值得您花时间检查[检查](http://docs.python.org/library/inspect.html)模块。要获取函数的源代码，请使用“ `inspect.getsource`”，例如，将其应用于自身：

```
>>> print inspect.getsource(inspect.getsource)
def getsource(object):
    """Return the text of the source code for an object.

    The argument may be a module, class, method, function, traceback, frame,
    or code object.  The source code is returned as a single string.  An
    IOError is raised if the source code cannot be retrieved."""
    lines, lnum = getsourcelines(object)
    return string.join(lines, '') 
```

`inspect.getargspec`如果您正在处理包装或操作函数，它也经常有用，因为它会给出函数参数的名称和默认值。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2014-04-18T00:30:26.953

如果您对此 GUI 感兴趣，请查看[objbrowser](https://pypi.python.org/pypi/objbrowser)。它使用 Python 标准库中的检查模块进行对象自省。

![objbrowserscreenshot](../Images/f58a19e2b5d866707641a53c272bd055.png)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2009-06-17T10:18:57.160

您可以在 shell 中使用 dir() 列出对象的属性：

```
>>> dir(object())
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__'] 
```

当然，还有检查模块：[http ://docs.python.org/library/inspect.html#module-inspect](http://docs.python.org/library/inspect.html#module-inspect)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2016-07-28T07:07:06.363

试试[漂亮](https://github.com/symonsoft/ppretty)

```
from ppretty import ppretty

class A(object):
    s = 5

    def __init__(self):
        self._p = 8

    @property
    def foo(self):
        return range(10)

print ppretty(A(), indent='    ', depth=2, width=30, seq_length=6,
              show_protected=True, show_private=False, show_static=True,
              show_properties=True, show_address=True) 
```

输出：

```
__main__.A at 0x1debd68L (
    _p = 8, 
    foo = [0, 1, 2, ..., 7, 8, 9], 
    s = 5
) 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-04-05T05:27:07.570

虽然[`pprint`](https://docs.python.org/2/library/pprint.html)其他人已经提到过，但我想添加一些上下文。

> pprint 模块提供了一种以可用作解释器输入的形式“漂亮打印”任意 Python 数据结构的能力。如果格式化结构包含不是基本 Python 类型的对象，则表示可能无法加载。如果包含文件、套接字、类或实例等对象，以及许多其他不能表示为 Python 常量的内置对象，则可能会出现这种情况。

`pprint`具有 PHP 背景且正在寻找[`var_dump()`](https://stackoverflow.com/questions/383944/what-is-a-python-equivalent-of-phps-var-dump/21791626).

具有 dict 属性的对象可以使用`pprint()`mix with很好地转储[`vars()`](https://docs.python.org/3/library/functions.html#vars)，它返回`__dict__`模块、类、实例等的属性：

```
from pprint import pprint
pprint(vars(your_object)) 
```

所以，[不需要循环](https://stackoverflow.com/a/192184/8291949)。

要转储包含在*全局*或*局部范围内*的所有变量，只需使用：

```
pprint(globals())
pprint(locals()) 
```

`locals()`显示在函数中定义的变量。[除了其他用法之外](https://stackoverflow.com/questions/12693606/reason-for-globals-in-python)
，使用相应名称作为字符串键访问函数也很有用：

```
locals()['foo']() # foo()
globals()['foo']() # foo() 
```

类似地，[`dir()`](https://docs.python.org/3/library/functions.html#dir)用于查看模块的内容，或对象的属性。

还有更多。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2009-06-17T10:21:29.197

```
"""Visit http://diveintopython.net/"""

__author__ = "Mark Pilgrim (mark@diveintopython.org)"

def info(object, spacing=10, collapse=1):
    """Print methods and doc strings.

    Takes module, class, list, dictionary, or string."""
    methodList = [e for e in dir(object) if callable(getattr(object, e))]
    processFunc = collapse and (lambda s: " ".join(s.split())) or (lambda s: s)
    print "\n".join(["%s %s" %
                     (method.ljust(spacing),
                      processFunc(str(getattr(object, method).__doc__)))
                     for method in methodList])

if __name__ == "__main__":
    print help.__doc__ 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2009-06-18T00:05:15.240

其他人已经提到了 dir() 内置，这听起来像您正在寻找的东西，但这里有另一个很好的提示。许多库——包括大多数标准库——都以源代码形式分发。这意味着您可以很容易地直接阅读源代码。诀窍在于找到它。例如：

```
>>> import string
>>> string.__file__
'/usr/lib/python2.5/string.pyc' 
```

*.pyc 文件已编译，因此删除尾随的“c”并在您喜欢的编辑器或文件查看器中打开未编译的 *.py 文件：

```
/usr/lib/python2.5/string.py 
```

我发现这对于发现诸如从给定 API 引发的异常之类的事情非常有用。这种细节在 Python 世界中很少有很好的记录。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-09-16T13:17:28.720

检查代码的两个很好的工具是：

1.  [蟒蛇](https://ipython.org/)。一个 python 终端，允许您使用制表符完成进行检查。

2.  带有[PyDev 插件的](http://www.pydev.org/manual_adv_debugger.html)[Eclipse](https://eclipse.org/)。它有一个出色的调试器，允许您在给定的位置中断并通过将所有变量作为树浏览来检查对象。您甚至可以使用嵌入式终端在该位置尝试代码或键入对象并按“。” 让它为您提供代码提示。

[![在此处输入图像描述](../Images/853629854a25ecd82ad9325e2df3df80.png)](https://i.stack.imgur.com/mMuoA.png)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2009-06-17T12:01:45.627

如果您想查看参数和方法，正如其他人指出的那样，您可以使用`pprint`或`dir()`

如果你想查看内容的实际值，你可以这样做

`object.__dict__`

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-06-17T10:59:08.887

pprint 和 dir 一起工作得很好

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2014-03-06T20:12:04.390

为此目的构建了一个 python 代码库：[introduced](http://docs.python.org/2/library/inspect.html) in Python 2.7

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2021-01-07T02:54:24.113

在 Python 3.8 中，您可以使用`__dict__`. 例如，

```
class Person():
   pass

person = Person()

## set attributes
person.first = 'Oyinda'
person.last = 'David'

## to see the content of the object
print(person.__dict__)  

{"first": "Oyinda", "last": "David"} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-05-16T21:23:02.633

如果您有兴趣查看该对象对应的函数的源代码`myobj`，可以输入`iPython`或`Jupyter Notebook`：

`myobj??`

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2021-03-10T06:18:27.273

如果您正在寻找更微妙的解决方案，您可以尝试[objprint](https://github.com/gaogaotiantian/objprint)。它的一个积极方面是它可以处理嵌套对象。例如：

```
from objprint import objprint

class Position:
    def __init__(self, x, y):
        self.x = x
        self.y = y

class Player:
    def __init__(self):
        self.name = "Alice"
        self.age = 18
        self.items = ["axe", "armor"]
        self.coins = {"gold": 1, "silver": 33, "bronze": 57}
        self.position = Position(3, 5)

objprint(Player()) 
```

会打印出来

```
<Player
  .name = 'Alice',
  .age = 18,
  .items = ['axe', 'armor'],
  .coins = {'gold': 1, 'silver': 33, 'bronze': 57},
  .position = <Position
    .x = 3,
    .y = 5
  >
> 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-04-05T00:27:51.400

```
import pprint

pprint.pprint(obj.__dict__) 
```

或者

```
pprint.pprint(vars(obj)) 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-01-24T18:11:51.750

如果您想查看活动对象内部，那么 python 的`inspect`模块是一个很好的答案。通常，它用于获取在磁盘上某个源文件中定义的函数的源代码。如果要获取解释器中定义的实时函数和 lambda 的源代码，可以使用`dill.source.getsource`from [`dill`](https://github.com/uqfoundation/dill)。它还可以从 curries 中定义的绑定或未绑定的类方法和函数中获取代码……但是，如果没有封闭对象的代码，您可能无法编译该代码。

```
>>> from dill.source import getsource
>>> 
>>> def add(x,y):
...   return x+y
... 
>>> squared = lambda x:x**2
>>> 
>>> print getsource(add)
def add(x,y):
  return x+y

>>> print getsource(squared)
squared = lambda x:x**2

>>> 
>>> class Foo(object):
...   def bar(self, x):
...     return x*x+x
... 
>>> f = Foo()
>>> 
>>> print getsource(f.bar)
def bar(self, x):
    return x*x+x

>>> 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-09-28T10:39:40.717

有一个很酷的工具叫做[`objexplore`](https://github.com/kylepollina/objexplore). 这是一个关于如何`explore`在 pandas DataFrame 上使用其功能的简单示例。

```
import pandas as pd
df=pd.read_csv('https://storage.googleapis.com/download.tensorflow.org/data/heart.csv')

from objexplore import explore
explore(df) 
```

将在您的 shell 中弹出以下内容： [![在此处输入图像描述](../Images/8aea5ae57cd509d84ee6c270ab9713e3.png)](https://i.stack.imgur.com/C1Aye.png)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-12-09T16:14:25.317

`vars(obj)`返回对象的属性。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-06-17T10:57:20.450

另外，如果你想查看列表和字典，你可以使用 pprint()

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-06-12T11:26:36.780

已经有很多好的提示，但是最短和最简单的（不一定是最好的）还有待提及：

```
object? 
```

* * *

## 回答 #25

> 赞同：-5
> 
> 时间：2018-05-03T21:58:08.790

尝试使用：

```
print(object.stringify()) 
```

*   `object`您要检查的对象的变量名称在哪里。

这会打印出格式良好且选项卡式的输出，显示对象中键和值的所有层次结构。

注意：这适用于 python3。不确定它是否适用于早期版本

更新：这不适用于所有类型的对象。如果您遇到其中一种类型（如 Request 对象），请改用以下类型之一：

*   `dir(object())`

或者

`import pprint` 然后： `pprint.pprint(object.__dict__)`

# visual-studio - 在 Visual Studio 中运行测试不可用

> ID：1006170
> 
> 赞同：2
> 
> 时间：2009-06-17T10:17:23.200
> 
> 标签：visual-studio

严格来说不是编程问题，但肯定与编程有关。

由于某种原因，在 Visual Studio 中运行测试的选项显示为灰色。我刚刚创建了一个文件 | 新的 MVC 应用程序，使用 VS2008pro。

[替代文字 http://www.olymbianbot.co.uk/images/greyed-tests.jpg](http://www.olympianbot.co.uk/images/greyed-tests.jpg)

知道是什么原因造成的/如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-03-06T12:11:02.347

Visual Studio 通过特殊的 GUID 识别测试项目。如果有一个带有 GUID : 的项目`FAE04EC0-301F-11D3-BF4B-00C04F79EFBC`，VS 会自动从中加载测试。因此，请确保在测试项目的 .csproj 中拥有正确的 GUID：

```
<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

# python - 可以从左侧截断的 Python 缓冲区？

> ID：1006171
> 
> 赞同：2
> 
> 时间：2009-06-17T10:17:29.737
> 
> 标签：python, string, buffer, memoryview

现在，我正在使用字符串、StringIO 或 cStringIO 缓冲字节。但是，我经常需要从缓冲区的左侧删除字节。一种天真的方法会重建整个缓冲区。如果左截断是一种非常常见的操作，是否有最佳方法来做到这一点？Python 的垃圾收集器实际上应该对截断的字节进行 GC。

任何类型的算法（将缓冲区分成小块？）或现有的实现，都会有帮助。

编辑：

我尝试为此使用 Python 2.7 的 memoryview，但遗憾的是，当删除原始引用时，“视图”之外的数据不会被 GC：

```
# (This will use ~2GB of memory, not 50MB)

memoryview # Requires Python 2.7+

smalls = []

for i in xrange(10):
    big = memoryview('z'*(200*1000*1000))
    small = big[195*1000*1000:]
    del big
    smalls.append(small)
    print '.', 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T11:49:41.343

如果左删除操作频繁，则[双端队列](http://docs.python.org/library/collections.html#deque-objects)将是有效的（与使用列表、字符串或缓冲区不同，它的任一端删除的摊销为 O(1)）。然而，它会比字符串更昂贵的内存，因为您将每个字符存储为其自己的字符串对象，而不是打包序列。

或者，您可以创建自己的实现（例如，固定大小的字符串/缓冲区对象的链接列表），它可以更紧凑地存储数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:25:03.340

将缓冲区构建为字符或行列表，然后对列表进行切片。仅在输出时作为字符串加入。这对于大多数类型的“可变字符串”行为非常有效。

GC 将收集截断的字节，因为它们不再在列表中引用。

更新：要修改列表头，您可以简单地反转列表。这听起来像是一件低效的事情，但是 python 的列表实现在内部对此进行了优化。

来自[http://effbot.org/zone/python-list.htm](http://effbot.org/zone/python-list.htm)：

> 反转很快，因此如果您需要在列表的开头删除和插入一堆项目，暂时反转列表通常可以加快速度：
> 
> ```
> L.reverse()
> # append/insert/pop/delete at far end
> L.reverse() 
> ```

# c++ - 字符串类型数组的指针运算，C++如何处理这个？

> ID：1006172
> 
> 赞同：1
> 
> 时间：2009-06-17T10:17:42.370
> 
> 标签：c++, pointers

我正在学习指针，一个概念困扰着我。我知道，如果您有一个指向数组的 INT 类型指针（例如“pointer1”），那么您可以用 INTS 填充该数组。如果你想寻址数组的一个成员，你可以使用指针，你可以做 pointer1 ++; 遍历数组。该程序知道它是一个 INT 数组，因此它知道以 INT 大小的步长单步执行。但是如果数组是长度可以变化的字符串呢？当您尝试使用 ++ 递增时，它如何知道该怎么做，因为每个元素的长度都不同？

同样，当您创建一个字符串向量并使用reserve 关键字时，如果字符串可以是不同的长度，它如何知道要保留多少？这可能真的很明显，但我无法解决它，它不符合我目前（可能是错误的）对指针的思考。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-17T10:24:14.027

非常简单。

字符串数组不同于字符串向量。

字符串数组（C 风格的指针）是指向字符数组“char**”的指针数组。所以字符串数组中的每个元素的大小都是“指向字符数组的指针”，因此它可以毫无问题地遍历字符串数组中的元素。数组中的指针可以指向不同大小的内存块。

对于字符串向量，它是一个字符串对象数组（C++ 风格）。每个字符串对象具有相同的*对象*大小，但在某处包含一个指向实际存储字符串内容的内存的指针。所以在这种情况下，向量中的元素的大小也是相同的，尽管不同于“只是一个指向字符数组的指针”，允许简单的元素地址计算。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-17T10:28:25.907

这是因为字符串（至少在 C/C++ 中）与整数并不完全相同。如果我们谈论的是 C 风格的字符串，那么它们的数组就像

```
char* test[3] = { "foo", "bar", "baz" }; 
```

引擎盖下实际发生的是“测试”是一个指针数组，每个指针都指向字符所在的实际数据。假设，随机，“测试”数组从内存地址 0x10000 开始，并且指针有四个字节长，那么我们可能有

```
test[0] (memory location 0x10000) contains 0x10020
test[1] (memory location 0x10004) contains 0x10074
test[2] (memory location 0x10008) contains 0x10320 
```

然后我们可能会查看 0x10020 附近的内存位置，我们会找到实际的字符数据：

```
test[0][0] (memory location 0x10020) contains 'f'
test[0][1] (memory location 0x10021) contains 'o'
test[0][2] (memory location 0x10022) contains 'o'
test[0][3] (memory location 0x10023) contains '\0' 
```

并且在内存位置 0x10074 附近

```
test[1][0] (memory location 0x10074) contains 'b'
test[1][1] (memory location 0x10075) contains 'a'
test[1][2] (memory location 0x10076) contains 'r'
test[1][3] (memory location 0x10077) contains '\0' 
```

对于 C++ std::string 对象，情况大致相同：实际的 C++ 字符串对象不“包含”字符，因为正如您所说，字符串的长度是可变的。它实际上包含的是一个指向字符的指针。（至少，它在 std::string 的简单实现中确实如此——实际上它具有更复杂的结构来提供更好的内存使用和性能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T10:24:57.707

字符串数组是指向某些字符串的第一个字符的指针数组。指向 char 的指针的大小可能与指向 int 的指针的大小相同。

本质上，二维数组在内存中不一定是线性的，指向的数组可以在任何地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T12:33:05.250

这可能看起来像迂腐，但在像 C++ 这样的射击语言中，这很重要：在你原来的问题中，你说：

> 你可以做指针1 ++；遍历数组。

Postincrement (pointer1++) 在这里通常在语义上是*错误*的，因为它的意思是“增加pointer1但保持表达式值在pointer1的原始值”。如果不需要pointer1的原始值，可以使用pre-increment (++pointer1) 代替，它在语义上的意思就是“将指针加一”。

出于某种原因，大多数 C++ 教科书到处都在做后增量，教新的 C++-ers 坏习惯；-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T12:57:11.363

在 C++ 中，数组和向量总是包含固定大小的元素。字符串符合此条件，因为您的字符串元素要么是指向存储在其他地方的以空结尾的 c 字符串 (char *) 的指针，要么是普通的 std::string 对象。

std::string 对象具有恒定大小，实际的字符串数据分配在其他地方（小字符串优化除外，但这是另一回事）。

```
vector<string> a;
a.resize( 2 ); // allocate memory for 2 strings of any length.

vector<char *> b;
b.resize( 2 ); // allocate memory for 2 string pointers.

vector<char> c; // one string. Should use std::string instead.
c.resize( 2 ); // allocate memory for 2 characters (including or not the terminator). 
```

请注意，std::vector 的 reserve() 函数只是准备要增长的向量。它主要用于优化目的。您可能想使用 resize()。

# c# - C#编程实践

> ID：1006175
> 
> 赞同：0
> 
> 时间：2009-06-17T10:17:54.227
> 
> 标签：c#, oop, methods

我想根据一个值更新控件，例如：

```
 if (StringName == StringName2) 
            ListBox1.Items.Add("send data");
        else if (StringName3 == StringName4)
            DifferentListBox.Items.Add("send data");
        else if (StringName5 == StringName3)
            AnotherListBox.Items.Add("send data"); 
```

或者使用 switch 语句等完成 20 次。

是否可以将这些方法`(OneOfTheListBoxes.Items.Add("send data")`放入字典中，所以我只需要输入键来操作该方法，而不是遍历每个语句。

或者你能给我指出一个能让我实现这一目标的练习吗？或者如何用更少的代码实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T10:23:43.000

是的，您可以像这样将所有列表框放入字典中；

```
Dictionary<string, ListBox> _Dictionary;

public Something() //constructor
{
   _Dictionary= new Dictionary<string, ListBox>();
   _Dictionary.add("stringname1", ListBox1);
   _Dictionary.add("stringname2", ListBox2);
   _Dictionary.add("stringname3", ListBox3);
}

....

public void AddToListBox(string listBoxName, string valueToAdd)
{
  var listBox = _Dictionary[listBoxName];
  listBox.Items.Add(valueToAdd);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:24:48.863

当然。使用字典，键保存 StringName，值保存 Listbox。然后使用：

```
myDict[StringName].Items.Add("send data") 
```

# java - 如何在 Solaris 上的 Oracle 上安装 Java 类

> ID：1006186
> 
> 赞同：2
> 
> 时间：2009-06-17T10:20:08.887
> 
> 标签：java, oracle

我有计算 SHA1 的简单 java 类，我想从 Oracle 的 PLSQL 过程中使用它。遵循以下建议： [Oracle 中的 SHA1、SHA256、SHA512 免费，无需使用 DBMS_CRYPTO](http://vnull.pcnet.com.pl/blog/?p=124) （我的简单案例仅使用 SHA1，不需要任何 jar，仅包含导入 java.security 和 java.io 的 sha1.class）

我编译了 sha1.java：

```
javac -target 1.2 -source 1.2 sha1.java 
```

并在我的 Windows 测试环境中安装了这个 sha1.class：

```
Oracle9i Enterprise Edition Release 9.2.0.1.0 - Production 
```

不幸的是，我必须在 Solaris 上安装它：

```
Oracle9i Enterprise Edition Release 9.2.0.8.0 - 64bit Production
With the Partitioning, OLAP and Oracle Data Mining options
JServer Release 9.2.0.8.0 - Production 
```

我试过了，但这些尝试失败了：

```
c:\test>loadjava -thin -user ***** -resolve sha1.class
Error while creating class sha1
    ORA-29545: badly formed class:: User has attempted to load a class (sha1) into a restricted package. Permission can be granted using  dbms_java
.grant_permission(<user>, LoadClassInPackage...

The following operations failed
    class sha1: creation
exiting  : Failures occurred during processing 
```

* * *

**编辑**：

我尝试使用 .java 源而不是 .class 并得到（翻译自波兰语）::

```
c:\mn>loadjava -thin -user ****** -resolve sha1.java
Error while creating sha1
    ORA-06576: not a valid function or procedure name

Error while computing shortname of sha1
    ORA-06550: line 1, column 13:
PLS-00201: must be declared 'DBMS_JAVA.SHORTNAME' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored

The following operations failed
    source sha1: creation
exiting  : Failures occurred during processing 
```

我应该怎么做才能将此类或源加载到 Solaris 上的 Oracle？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T12:02:20.850

您必须运行 DBMS_JAVA.grant_permission 包（详细信息应该在您的错误消息中，并且在某些情况下还会显示在数据库服务器文件系统上的跟踪文件中）。

以 SYS 身份从 SQL 接口连接：

```
begin
 dbms_java.grant_permission(........);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T01:08:41.260

如果你有权限，我的直觉是你要么需要将你的类放在 java 包中，要么小写的类名会混淆 Solaris 上的验证器（一个区分大小写的环境，其中类名应该以大写字母开头）。

代替

```
public class shai{

} 
```

尝试使用包和有效的类名。

```
package com.company.Util
public class Shai{

} 
```

# python - 如何对我的单元测试进行有意义的代码覆盖分析？

> ID：1006189
> 
> 赞同：5
> 
> 时间：2009-06-17T10:20:17.203
> 
> 标签：python, testing

我管理一个非常大的金融定价系统的测试。最近，我们的总部坚持要求我们验证项目的每个部分都进行了有意义的测试。至少他们想要一个系统来保证当我们改变某些东西时，我们可以发现对其他子系统的无意更改。最好他们想要一些东西来验证我们系统中每个组件的正确性。

这显然将是相当多的工作！这可能需要数年时间，但对于这种项目来说，这是值得的。

我需要找出我们的代码的哪些部分没有被我们的任何单元测试覆盖。如果我知道我的系统的哪些部分未经测试，那么我可以着手开发新的测试，最终将接近我的完整测试覆盖的目标。

那么我该如何进行这种分析。我可以使用哪些工具？

我在 Windows 32 位 XP 上使用 Python 2.4

更新0：

澄清一下：我们有一个非常全面的单元测试套件（加上一个单独且非常全面的 regtest 套件，这超出了本练习的范围）。我们还有一个非常稳定的持续集成平台（使用 Hudson 构建），旨在在我们的测试设施中拆分和运行标准 python 单元测试：根据公司规范构建的大约 20 台 PC。

本练习的目的是填补我们的 Python 单元测试套件（仅限）套件中的任何空白，以便每个组件都有一定程度的单元测试覆盖率。其他开发人员将负责项目的非 Python 组件（也在范围之外）。

“**组件**”故意含糊不清：有时它是一个类，有时是整个模块或模块的组合。它甚至可能指一个单一的金融概念（例如单一类型的金融期权或多种期权使用的金融模型）。这个蛋糕可以用多种方式切割。

“**有意义**的”测试（对我来说）是那些验证该功能是否符合开发人员最初意图的测试。我们不想简单地在纯 python 中重现 regtests。开发人员的意图通常不是很明显，因此需要研究和澄清任何看起来模糊的东西，然后将这些知识写入单元测试中，这使得原始意图非常明确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-17T10:27:46.627

仅对于代码覆盖率，您可以使用[coverage.py](http://nedbatchelder.com/code/coverage/)。

至于 coverage.py 与[figleaf](http://darcs.idyll.org/~t/projects/figleaf/doc/)：

> Figleaf 在几个方面与 Python 覆盖工具（'coverage.py'）的黄金标准不同。首先，figleaf 对“有趣”的代码行使用与 sys.settrace 函数相同的标准，这避免了 coverage.py 中的一些复杂性（但确实意味着您的“loc”计数下降了）。其次，figleaf 不记录在 Python 标准库中执行的代码，这会导致显着的加速。第三，保存覆盖格式的格式非常简单且易于使用。
> 
> 如果您正在记录来自多种类型的测试的覆盖率并且需要以有趣的方式聚合覆盖率和/或控制何时记录覆盖率，您可能想要使用 figleaf。coverage.py 是命令行执行的更好选择，它的报告也更好。

我想两者各有利弊。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-17T17:51:28.550

FWIW, this is what we do. Since I don't know about your Unit-Test and Regression-Test setup, you have to decide yourself whether this is helpful.

*   Every Python package has [UnitTests](http://docs.python.org/library/unittest.html).
*   We automatically detect unit tests using [nose](http://somethingaboutorange.com/mrl/projects/nose/0.11.1/testing.html). Nose automagically detects standard Python unit tests (basically everything that [looks like a test](http://somethingaboutorange.com/mrl/projects/nose/0.11.1/finding_tests.html)). Thereby we don't miss unit-tests. Nose also has a plug-in concept so that you can produce, e.g. nice output.
*   We strive for 100% coverage for unit-testing. To this end, we use [Coverage](http://nedbatchelder.com/code/coverage/) to check, because [a nose-plugin provides integration](http://somethingaboutorange.com/mrl/projects/nose/0.11.1/plugins/cover.html).
*   We have set up Eclipse (our IDE) to [automatically run nose](http://www.machine-envy.com/blog/2006/07/29/automated-python-testing-with-nose-and-eclipse/) whenever a file changes so that the unit-tests always get executed, which shows code-coverage as a by-product.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-17T10:35:01.743

第一步是编写有意义的测试。如果您编写测试只是为了达到全面覆盖，那么您将适得其反；这可能意味着您将专注于单元的实现细节而不是它的期望。

顺便说一句，我会用鼻子作为单元测试框架（[http://somethingaboutorange.com/mrl/projects/nose/0.11.1/](http://somethingaboutorange.com/mrl/projects/nose/0.11.1/)）；它的插件系统非常好，并为您留下了覆盖选项（--with-coverage 用于 Ned 的覆盖，--with-figleaf 用于 Titus one；应该会支持 coverage3），您可以为自己的构建系统编写插件，也。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-17T11:25:47.180

**“我们项目的每个部分都进行了有意义的测试”**

“部分”未定义。“有意义”是未定义的。没关系，但是，因为它会变得更好。

**“验证我们系统中每个组件的正确性”**

“组件”未定义。但是正确性是确定的，我们可以为组件分配许多替代方案。你只提到了 Python，所以我假设整个项目都是纯 Python。

*   验证每个模块的正确性。

*   验证每个模块的每个类的正确性。

*   验证每个模块的每个类的每个方法的正确性。

您还没有询问代码覆盖率或逻辑路径覆盖率，这是一件好事。那就是疯狂。

**“保证当我们更改某些内容时，我们可以发现对其他子系统的无意更改”**

这是回归测试。这是任何单元测试学科的逻辑结果。

这是你可以做的。

1.  枚举每个模块。为该模块创建一个单元测试，它只是一个 unittest.main()。这应该很快——最多几天。

2.  编写一个不错的顶级单元测试脚本，该脚本使用 testLoader 对测试目录中的所有单元测试并通过文本运行器运行它们。此时，您将有很多文件——每个模块一个——但没有实际的测试用例。让 testloader 和顶级脚本工作需要几天时间。让整个线束正常工作很重要。

3.  优先考虑您的模块。一个好的规则是“重用最多”。另一个规则是“失败的最高风险”。另一个规则是“大多数错误报告”。这需要几个小时。

4.  从列表顶部开始。为每个类编写一个没有实际方法或任何东西的 TestCase。只是一个框架。这最多需要几天时间。确保每个 TestCase 的文档字符串肯定地标识了被测模块和类以及测试代码的状态。您可以使用这些文档字符串来确定测试覆盖率。

此时，您将拥有两条平行的轨道。您必须实际设计和实施测试。根据所测试的类，您可能需要构建测试数据库、模拟对象和各种支持材料。

*   测试返工。从最高优先级的未测试模块开始，开始为每个模块中的每个类填写 TestCases。

*   新发展。对于**每次**代码更改，必须为要更改的类创建一个 unittest.TestCase。

测试代码遵循与任何其他代码相同的规则。一切都在一天结束时登记入住。它必须运行——即使测试没有全部通过。

将测试脚本交给产品经理（不是 QA 经理，是负责将产品运送给客户的实际产品经理），并确保他们每天运行脚本并找出它没有运行的原因或测试失败的原因.

主测试脚本的实际运行不是 QA 工作——而是每个人的工作。组织各个级别的每个经理都必须成为日常构建脚本输出的一部分。 **他们所有**的工作都必须依赖于“昨晚通过的所有测试”。否则，产品经理只会将资源从测试中抽走，而您将一无所有。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T10:31:10.380

假设你已经有一个比较全面的测试套件，python 部分有工具。C 部分的问题要大得多，具体取决于工具的可用性。

*   对于[python单元测试](http://darcs.idyll.org/~t/projects/figleaf/doc/)

*   对于 C 代码，在许多平台上都很难，因为 gprof，Gnu 代码分析器无法处理使用 -fPIC 构建的代码。因此，在这种情况下，您必须静态构建每个扩展，这不受许多扩展的支持（例如，请参阅我的[博客文章 numpy](http://cournape.wordpress.com/2009/05/08/first-steps-toward-c-code-coverage-in-numpy/)）。在 Windows 上，编译代码可能有更好的代码覆盖工具，但这可能需要您使用 MS 编译器重新编译扩展。

至于“正确”的代码覆盖率，我认为一个很好的平衡是尽可能避免编写复杂的单元测试。如果单元测试比它测试的东西更复杂，那么它可能不是一个好的测试，或者是一个损坏的测试。

# java - 轴 - 如何访问它？

> ID：1006190
> 
> 赞同：0
> 
> 时间：2009-06-17T10:20:21.197
> 
> 标签：java, axis

嗨，我在 webapp 中有轴，我可以正确访问[http://localhost:8080/oop/services/test2?wsdl](http://localhost:8080/oop/services/test2?wsdl)。我写了客户：

```
 import org.apache.axis.client.Call;
   import org.apache.axis.client.Service;
   import javax.xml.namespace.QName;

   public class TestClient {
     public static void main(String [] args) {
       try {
         String endpoint =
             "http://localhost:8080/oop/servlet/AxisServlet/services/test2";

        Service  service = new Service();
        Call     call    = (Call) service.createCall();

        call.setTargetEndpointAddress( new java.net.URL(endpoint) );
        call.setOperationName(new QName("http://ws.oopf.com/testclient", "fce"));

        String ret = (String) call.invoke( new Object[] { "Hello!" } );

        System.out.println("Sent 'Hello!', got '" + ret + "'");
      } catch (Exception e) {
        System.err.println(e.toString());
      }
    }
  }

I receive 
AxisFault
 faultCode: {http://xml.apache.org/axis/}HTTP
 faultSubcode: 
 faultString: (404)/WEB-INF/tiles/commons/404.jsp
 faultActor: 
 faultNode: 
 faultDetail: 
    {}:return code:  404

    {http://xml.apache.org/axis/}HttpErrorCode:404

(404)/WEB-INF/tiles/commons/404.jsp
    at org.apache.axis.transport.http.HTTPSender.readFromSocket(HTTPSender.java:744)
    at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:144)
    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at TestClient.main(TestClient.java:19)
(404)/WEB-INF/tiles/commons/404.jsp 
```

怎么了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T10:27:17.873

您的端点 URL 错误？

[http://localhost:8080/oopfwsDB/services/test2](http://localhost:8080/oopfwsDB/services/test2) - 工作 [http://localhost:8080/oop/servlet/AxisServlet/services/test2](http://localhost:8080/oop/servlet/AxisServlet/services/test2) - 不

# c# - 如何获取 System.Collections.Generic.List 它将类型 T 对象的所有 FieldInfo 保存到类层次结构中的对象？

> ID：1006192
> 
> 赞同：1
> 
> 时间：2009-06-17T10:20:55.050
> 
> 标签：c#, reflection, field

我正在尝试重用现有代码......但没有成功。这是代码片段：

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Text;
using System.Reflection;

namespace GenApp.Utils.Reflection
{
    class FieldTraverser
    {

        public static string SearchFieldValue(object obj, int MaxLevel, string strFieldMeta , ref object fieldValue)
        {
            if (obj == null)
                return null;
            else
            {
                StringBuilder sb = new StringBuilder();
                bool flagShouldStop = false; 
                FieldTraverser.PrivDump(sb, obj, "[ObjectToDump]", 0, MaxLevel , ref flagShouldStop , ref fieldValue);
                return sb.ToString();
            }
        } //eof method 

        public static object GetFieldValue(object obj, string fieldName, ref bool flagShouldStop, ref object objFieldValue)
        {
            FieldInfo fi;
            Type t;

            t = obj.GetType();
            fi = t.GetField(fieldName, BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
            if (fi == null)
                return null;
            else
            {

                if (fi.Name.Equals(fieldName))
                {
                    objFieldValue = fi.GetValue(obj);
                    flagShouldStop = true;
                }
                return fi.GetValue(obj);
            } //eof else 
        } //eof method 

        protected static void DumpType(string InitialStr, StringBuilder sb, object obj, 
            int level, System.Type t, int maxlevel , ref bool flagShouldStop , ref object objFieldValue
            )
        {
            FieldInfo[] fi;
            fi = t.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
            if (t == typeof(System.Delegate)) return;
            foreach (FieldInfo f in fi)
            {
                PrivDump(sb, f.GetValue(obj), f.Name, level + 1, maxlevel , ref flagShouldStop , ref objFieldValue);
                if (flagShouldStop == true)
                    return; 
            }
            object[] arl;
            int i;
            if (obj is System.Array)
            {
                try
                {
                    arl = (object[])obj;
                    for (i = 0; i < arl.GetLength(0); i++)
                    {
                        PrivDump(sb, arl[i], "[" + i + "]", level + 1, maxlevel, ref flagShouldStop, ref objFieldValue);
                        if (flagShouldStop == true)
                            return; 
                    }
                }
                catch (Exception) { }
            }
        }

        protected static void PrivDump(StringBuilder sb, object obj, string objName, int level, int MaxLevel, ref bool flagShouldStop, ref object objFieldValue)
        {

            if (obj == null)
                return;
            if (MaxLevel >= 0 && level >= MaxLevel)
                return;

            string padstr;
            padstr = "";
            for (int i = 0; i < level; i++)
                if (i < level - 1)
                    padstr += "|";
                else
                    padstr += "+";
            string str;
            string[] strarr;
            Type t;
            t = obj.GetType();
            strarr = new String[7];
            strarr[0] = padstr;
            strarr[1] = objName;
            strarr[2] = " AS ";
            strarr[3] = t.FullName;
            strarr[4] = " = ";
            strarr[5] = obj.ToString();
            strarr[6] = "\r\n";
            sb.Append(String.Concat(strarr));
            if (obj.GetType().BaseType == typeof(ValueType))
                return;
            FieldTraverser.DumpType(padstr, sb, obj, level, t, MaxLevel, ref flagShouldStop , ref objFieldValue);
            Type bt;
            bt = t.BaseType;
            if (bt != null)
            {
                while (!(bt == typeof(Object)))
                {
                    str = bt.FullName;
                    sb.Append(padstr + "(" + str + ")\r\n");
                    FieldTraverser.DumpType(padstr, sb, obj, level, bt, MaxLevel , ref flagShouldStop , ref objFieldValue);
                    bt = bt.BaseType;
                    if (bt != null)
                        continue;
                    break;
                } while (bt != typeof(Object)) ;
            }
        } //eof method 
    }//eof class 
    } //eof namespace 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T10:39:11.393

请注意，您很少需要弄乱`FieldInfo`; 字段很少公开，您通常应该使用`PropertyInfo`s ( `GetProperties()`)。但是，`GetFields`会工作。对于公共领域，只需`GetFields()`; 对于私有领域，您也需要`BindingFlags`：

```
class Foo {
    public string abc;
}
class Bar : Foo {
    private int def;
}
static class Program {
    static void Main() {
        object obj = new Bar();
        FieldInfo[] fields = obj.GetType().GetFields(
            BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

        foreach(FieldInfo field in fields) {
            Console.WriteLine(field.Name + " = " + field.GetValue(obj));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:24:53.683

使用[System.Type.GetFields()](http://msdn.microsoft.com/en-us/library/6ztex2dc.aspx)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T10:26:32.743

您是否尝试过指定`BindingFlags.FlattenHierarchy`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T10:54:34.933

感谢我试图做这样的事情的答案（我仍然不确定 .ToString() 是否是与字段值进行比较的最佳方法：

```
using System;
using System.Reflection; 

class Foo
{
    public string abc;
}
class Bar : Foo
{
    private int def = 0;
}
static class Program
{
    static void Main()
    {
        object obj = new Bar();
        object objShouldNotHaveIt = new Foo();
        object objShouldHaveIt = new Bar();

            string myQuestion = "How-to get a System.Collections.Generic.List<FieldInfo> list which holds all FieldInfo’s of an object of a Type T up to the Object in the class hierarchy in C# ?"; 

        if (Program.SearchFieldByValue(objShouldNotHaveIt, "def", 0))
            Console.WriteLine(" NOK"); 

        if ( Program.SearchFieldByValue(objShouldHaveIt , "def" , 0 ))
            Console.WriteLine(" OK ");

            Console.WriteLine("Is a " + myQuestion.Length.ToString() + " chars long string considered as long question ? "); 

        Console.ReadLine();
    } //eof main 

    public static bool SearchFieldByValue ( object obj , string strFieldName , object objFieldValue ) 
    {

        FieldInfo[] fields = obj.GetType().GetFields(
        BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

        foreach (FieldInfo field in fields)
        {
            object objFieldValueReflected = field.GetValue(obj) ; 
            Console.WriteLine(field.Name + " = " + field.GetValue(obj));
            if (objFieldValueReflected != null && objFieldValue.ToString().Equals(objFieldValueReflected.ToString()))
                return true;
            else
                continue; 
        }
        return false; 

    } //eof method 

} //eof class 
```

# linux - GNOME 应用程序可以自动化吗？如何？

> ID：1006193
> 
> 赞同：3
> 
> 时间：2009-06-17T10:21:09.430
> 
> 标签：linux, user-interface, automation, gnome

GNOME 应用程序可以自动化吗？即，我可以以编程方式与其用户界面交互吗？

如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T15:52:26.870

虽然专门设计用于测试 GUI，但[dogtail](https://github.com/vhumpa/dogtail)提供了您正在寻找的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-17T20:29:25.313

While I don't know much about it, try looking into ATK. I know there was a project a while back called facade (part of FVWM?) that used ATK to figure out the logical elements of an application and interact with and modify them.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-06-17T10:24:41.780

你应该看看 DBus。

# .htaccess - 这个 htaccess 重定向有什么问题？

> ID：1006197
> 
> 赞同：0
> 
> 时间：2009-06-17T10:21:57.637
> 
> 标签：.htaccess, mod-rewrite

我最近将一个旧的 Joomla 网站变成了一个 Wordpress 网站，我想将旧的网址重定向到正确的新网址。对于初学者，我尝试将它们全部重定向到主页，但即使这样也没有用。

所有旧网址看起来都像 website.com/?q=node/1 （或者有时是 ?q=user/ 等），所以我认为这已经足够了：

```
RewriteCond %{QUERY_STRING} ^q=(.*)
RewriteRule . /home/ [R=301] 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T10:29:45.250

[编辑 - 最终解决方案 - 见评论]

```
RewriteCond %{QUERY_STRING} q=
RewriteRule (.*) lexlijst.nl/$1? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T10:29:11.427

您是否启用了重写引擎？您需要在 httpd.conf 和所有虚拟主机中启用它，因为指令不会被继承。参考：[http ://httpd.apache.org/docs/1.3/mod/mod_rewrite.html#RewriteEngine](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html#RewriteEngine)

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^q=(.*)

RewriteRule . /home/ [R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T10:31:46.320

您可以通过添加 RewriteLog 行来调试此类事情。我怀疑你的 RewriteRule 行是罪魁祸首。它应该是这样的：

```
 RewriteRule .* /home/ [R=301] 
```

# iphone - TableView 滑动删除需要帮助

> ID：1006208
> 
> 赞同：0
> 
> 时间：2009-06-17T10:24:42.967
> 
> 标签：iphone

我正在尝试实现 SMS 类型的滑动和删除功能。

对于 SMS 应用程序，编辑按钮位于导航栏的左侧。当尝试在一行上滑动时，“编辑”按钮会变为“完成”按钮。如果单击完成按钮，删除模式将被取消。如果单击 tableview 上的其他任何位置或滚动，删除模式将再次取消。

就我而言，我正在根据文档实施 willBeginRowEditing 和 didEndRowEditing 以在滑动删除的情况下更改视图。我在 willBeginRowEditing 中将 Edit 更改为 Done，然后在 didEndRowEditing 中将其改回。任何滚动或任何其他触摸都会自动导致滑动删除取消。

但是当用户单击完成按钮时，我似乎不明白如何退出删除模式。如果我只是更改 tableView 的编辑模式，则不会调用 didEndEditingRow。

是否有任何 API 可以退出滑动删除模式？

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T16:57:39.500

当他们使用滑动删除方法并想要取消它时，为什么您希望他们完成？如果他们正在滑动删除并想要撤消它，那么他们只需再次滑动...

# c++ - 为什么下面的代码没有崩溃，虽然我已经删除了对象？

> ID：1006214
> 
> 赞同：7
> 
> 时间：2009-06-17T10:25:26.100
> 
> 标签：c++

```
class object
{
  public:
    void check()
    {
      std::cout<<"I am doing ok..."<<std::endl;
    }
};

int main()
{
  object *p = new object;
  p->check();
  delete p;
  p->check();
  delete p;
  p->check();
} 
```

**编辑**：大师，我对许多“它可能会崩溃或不会”的说法感到困惑..为什么没有标准可以说，这是我们如何处理使用“删除运算符”删除的内存块..？任何输入？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-17T10:29:51.083

因为在编译器完成之后它的实际样子是这样的：

```
object::check( object* this )
{
     // do stuff without using this
}

int main()
{        
     object *p = new object;
     object::check( p );
     delete p;
     object::check( p );
     delete p;
     object::check( p );
 } 
```

由于您没有触摸“this”，因此您实际上不会访问任何不良记忆。

虽然，删除 p 两次应该会导致崩溃：

[http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.2](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.2)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-17T10:26:39.857

因为函数没有对对象的成员数据或`this`指针做任何事情。

就像调用一个函数

```
void check(object *self)
{
  std::cout<<"I am doing ok..."<<std::endl;
} 
```

使用无效指针作为`self`参数。

虽然有双重删除，但在某些环境中可能会崩溃。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-17T10:30:48.587

删除仅释放内存并使其可用于堆。

调用 delete 后指针的值未定义，因此它可能会崩溃，但可能不会。

我用来减少编程错误的一个编程技巧是在删除后将指针设置为 NULL。通过这种方式，您知道在指针被删除后您不会意外使用它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-17T10:36:57.793

你可以对 nil 指针做同样的事情，只要你从不访问类实例的状态：

```
class object
{
  public:
    void check()
    {
      std::cout<<"I am doing ok..."<<std::endl;
    }
};

int main()
{
  object *p = 0;
  p->check();
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-06-17T10:42:20.513

它甚至比这更有趣。这可以很好地编译和运行：

```
#include <iostream>
using namespace std;
class object {
    public:
      void check() {
          cout << "I am doing ok..." << endl;
      }
};

int main() {
   object *p = (object*)0;
   p->check();
   return 0;
} 
```

在外壳上：

```
$ g++ -ot t.cc
$ ./t
我做得很好...
$

```

:) 你实际上不必有一个对象来调用这个方法！干杯，h

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-17T10:31:03.547

即使方法调用使用 this 指针，也不能保证会崩溃。删除时的指针 p 未归零，因此仍指向内存中的相同地址。根据 new/delete 和堆管理器的实现，该内存甚至可能不会被重新使用，因此即使内存已被释放， p 的使用仍可能继续工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-17T11:28:54.053

1) 取决于编译器，在带有 gcc 4.0.1 的 Mac OS 上：

```
g++ -Wall -g -c main.cpp -o main.o
g++ -o x main.o 
./x
I am doing ok ...
I am doing ok ...
x(5857) malloc: *** error for object 0x100150: double free
*** set a breakpoint in malloc_error_break to debug
I am doing ok ... 
```

双重免费导致问题。

2）一般删除已经被删除的指针是没有定义的，删除后要始终设置指针为0，允许对值为0的指针调用delete。

3）它仍然可以打印字符串的原因是指针仍然指向现在被释放的内存，但我假设只有指针被回收，例如返回到空闲池以供重用，内存没有被覆盖或为空，所以如果您取消引用您仍然获得原始值的指针，除非同时重用内存。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-18T04:48:29.607

delete 不会将 p 设置为 null，因此它仍然指向内存位置。它取决于 new/delete 的实现，但通常 delete 仅将那部分内存标记为可用于任何新分配。

就像您从硬盘中删除文件一样。文件系统只是将该区域标记为可用。文件数据存在，只要不进行新写入，仍然可以恢复。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-17T10:29:15.187

我认为这取决于环境（平台/编译器）......
这至少会产生意想不到的行为。我认为您很幸运，它不会在您的情况下崩溃；-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-17T10:32:09.083

要添加一些其他人所说的内容，请尝试在 check() 方法中使用您的类的成员变量，然后看看会发生什么。

类中的函数调用与普通函数调用类似，只是有一点不同。在这两种情况下，参数都被压入堆栈，但在对象的函数调用的情况下，“this”作为第一个参数被压入堆栈。这个“this”在函数内部用于访问成员变量。由于您没有访问任何成员变量，因此它正在工作。是的，即使您访问成员变量它也可以工作，但是您会得到意外的行为，因为编译器可以自由使用分配给“p”的内存。一旦编译器使用该内存，您就会开始崩溃。例如，如果您在重用 'p' 之前删除后声明更多变量，它可能会崩溃。

编辑：此外，如果您的方法没有访问任何成员变量，那么它绝对是静态方法的候选者。

# asp.net - 您可以在 IIS/ASP.Net 的应用程序中创建子应用程序吗

> ID：1006218
> 
> 赞同：2
> 
> 时间：2009-06-17T10:26:26.910
> 
> 标签：asp.net, iis, web-applications, .net-2.0

我们有一个运行很多站点的全球应用程序（完全不受我的控制）。我想在一个文件夹中创建一个新应用程序（因为我无法扩展等），以便可以按如下方式访问它。

*   [http://www.domain.com/](http://www.domain.com/) < 全球应用
*   [http://www.domain.com/newapp](http://www.domain.com/newapp) < 新应用

这实际上是可能的还是只是一个白日梦？我知道可以为程序集设置其他位置（根据： http: [//msdn.microsoft.com/en-us/library/4191fzwb](http://msdn.microsoft.com/en-us/library/4191fzwb(VS.80).aspx) (VS.80).aspx ），但我不是一个完整的应用程序确定。

塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T10:30:47.273

您可以在主应用程序下从 IIS 创建一个新的虚拟应用程序，这非常容易，但显然您必须有权访问 IIS。

[看到这个问题。](https://stackoverflow.com/questions/569797/creating-virtual-application-directory-in-physical-folder-on-iis-asp-net)

# php - 从javascript添加标签

> ID：1006221
> 
> 赞同：0
> 
> 时间：2009-06-17T10:26:56.113
> 
> 标签：php, javascript, jquery, dom

我正在尝试从 javascript 添加标签，但出现错误

我所做的是：

```
document.getElementById(option).innerHTML="<label onclick='updateInfo('edit','qualification',"+data_id+","+data+")>"+data+"</label>"; 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T10:31:54.823

我认为错误在于函数内的引号。你必须逃避引号。

```
document.getElementById('option').innerHTML="<label  onclick=\"updateInfo('edit','qualification','"+2+"','"+test+"')\">"+data+"</label>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:32:24.370

除了一般的 innerHTML 问题外，您还有：

1.  尝试用 innerHTML 分配 JavaScript
2.  显然试图设置 <option> 元素的 innerHTML - 它只能包含文本（而不是元素） - 要么你使用了令人困惑的变量名称。
3.  试图创建一个不与表单控件关联（通过 for 属性或子元素）的 <label>。
4.  让你的引号混淆（使用字符串连接和innerHTML的另一个问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T10:35:18.060

引号是错误的。您已经使用单引号来引用 onclick 值及其内容。

```
onclick='updateInfo('edit','qualification'," 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T17:57:12.520

Another way is to use document.createElement() and document.appendChild() to avoid the escaping. It also makes the code more readable.

```
 var option = document.getElementById("option_id");
        var label = document.createElement("label");
        label.onclick = function() {
            updateInfo('edit','qualificn',"'" + data_id + "'", "'" + data + "'")
        }
        label.innerHTML = data;
        option.appendChild(label); 
```

# jquery - 是否有相当于 $(document).ready 在重新加载页面的一部分后进行初始化？

> ID：1006222
> 
> 赞同：3
> 
> 时间：2009-06-17T10:27:07.407
> 
> 标签：jquery

我有以下非常标准的过程：

1.  我在中初始化我的页面`$(document).ready`。这包括将事件绑定到表中的元素。
2.  然后通过ajax调用动态刷新表的内容

我现在需要将事件重新绑定到表格内容。有这样做的标准方法吗？**即在部分**页面 DOM 更新后是否有类似的`$(document).ready`触发？

 **谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-17T10:31:11.393

看看使用[live](http://docs.jquery.com/Events/live)的事件委托。从文档：

> 当您绑定“实时”事件时，它将绑定到页面上所有当前和未来的元素（使用事件委托）。例如，如果您将实时点击绑定到页面上的所有“li”元素，然后稍后添加另一个 li - 该点击事件将继续对新元素起作用（这不是必须重新绑定的情况绑定在所有新元素上）。

一个例子：

```
$('#myTable td').live("click", function() {
    alert('hello!');
}); 
```

这将保留绑定到表格上单元格的事件，即使它已被替换。[现场](http://docs.jquery.com/Events/live)手册说：

> 将处理程序绑定到所有当前和未来匹配元素的事件（如单击）。

或者，您可以将绑定包装到一个函数中，并将其作为更新表数据的方法的回调执行，例如：

```
function bindStuffToTable()
{
    $('#myTable td').click(function() {
       alert('Hello!');
    });
}

$('#myTable').load('/some/link', bindStuffToTable); 
```

或者如果整个表被动态替换，这更有可能：

```
$('#someButton').click(function() {
    //replaces the contents of someDiv with the table generated by foo.php
    $('#someDiv').load('foo.php', bindStuffToTable);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:36:40.837

如果我收到部分更新，我会再次使用 $(document).ready()...

**这是 AJAX 响应**

```
<script type="text/javascript">
    $(document).ready(function() {
        alert($('div.partialresponse').html());
        //Alerts 'content'
    });
</script>
<div class="partialresponse">
   content
</div> 
```**

# .net - 在 120dpi 下调试 .NET WinForms 应用程序

> ID：1006235
> 
> 赞同：2
> 
> 时间：2009-06-17T10:29:34.390
> 
> 标签：.net, winforms, debugging, dpi, highdpi

我目前使用 VMware 虚拟机 (Windows XP) 在 120dpi 下调试我的 .NET WinForms 应用程序。很烦人。

有人知道在我的 96dpi 工作环境下给我类似结果的方法吗？也就是单个进程可以开启120dpi模式，还是Windows Forms里面有开关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-21T10:10:51.283

您可以使用表单字体属性。默认情况下，当 Font 属性更改时，WinForm 表单会自动缩放，如下所示：

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    Font = new Font("Arial", 14);
} 
```

不要忘记阅读 AutoScaleMode 属性以及MSDN中[有关自动缩放的一般信息。](http://msdn.microsoft.com/en-us/library/ms229605.aspx)

# c# - 如何在 c# 中使用 smo 查找我的数据文件和日志文件的存储位置

> ID：1006242
> 
> 赞同：0
> 
> 时间：2009-06-17T10:30:53.110
> 
> 标签：c#, sql-server, sql-server-2008, smo

谁能告诉我如何在 C# 中使用 SMO 找到我的数据和日志文件存储的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T12:41:27.260

```
 public static void foo() {
     Microsoft.SqlServer.Management.Smo.Server server = new ServerConnection("<server name>");
     Microsoft.SqlServer.Management.Smo.Database db = server.Databases["<database name>"];
     Console.WriteLine(db.FileGroups[0].Files[0].FileName);
     Console.WriteLine(db.LogFiles[0].FileName);
  } 
```

此示例假定您对 Server\Database 有足够的权限，并且只返回文件组中第一个 db/log 文件的完整路径\文件名。

FileGroups、Files 和 LogFiles 是 SMO 集合，将包含一个或多个其各自的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T10:44:28.403

显然，您可以“从文件组和文件集合中获取逻辑数据和日志文件的名称”。

见[链接文字](http://msdn.microsoft.com/en-us/magazine/cc163409.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-05T05:25:07.497

```
$targetServerName = "localhost"
$targetDatabaseName = "dbname"

$targetServer = New-Object ("Microsoft.SqlServer.Management.Smo.Server")$targetServerName 
$database = $targetServer.Databases[$targetDatabaseName]

foreach ($fg in $database.FileGroups)
{
  foreach ($df in $fg.Files)
    {
    "Filegroup type : " + $fg.Name + " DataFiles : "  + $df.FileName

    }
}
foreach ($lf in $database.LogFiles)
{
   "Log file : " + $lf.FileName
} 
```

那应该为您提供确切的路径。

# php - 如何在 PHP 中的函数中获取函数名？

> ID：1006248
> 
> 赞同：253
> 
> 时间：2009-06-17T10:31:28.647
> 
> 标签：php, function

是否可以？

```
function test()
{
  echo "function name is test";
} 
```

* * *

## 回答 #1

> 赞同：427
> 
> 时间：2009-06-17T10:33:36.863

准确的方法是使用`__FUNCTION__` [预定义的魔法常数](http://www.php.net/manual/en/language.constants.predefined.php)。

例子：

```
class Test {
    function MethodA(){
        echo __FUNCTION__;
    }
} 
```

结果：`MethodA`。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2009-06-17T10:33:43.010

您可以使用[魔术常量](http://www.php.net/manual/en/language.constants.predefined.php) `__METHOD__`（包括类名）或`__FUNCTION__`（只是函数名），具体取决于它是方法还是函数... =）

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-06-17T10:41:45.460

如果你使用的是 PHP 5，你可以试试这个：

```
function a() {
    $trace = debug_backtrace();
    echo $trace[0]["function"];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-02T09:06:55.130

```
<?php

  class Test {
     function MethodA(){
         echo __FUNCTION__ ;
     }
 }
 $test = new Test;
 echo $test->MethodA();
?> 
```

结果：“方法A”；

# asp.net - 如何获取父 GridView 的数据绑定值

> ID：1006262
> 
> 赞同：0
> 
> 时间：2009-06-17T10:35:05.067
> 
> 标签：asp.net, databound-controls, nested-repeater

```
<asp:GridView DataSource="Reports">
    <ItemTemplate>
        <asp:TextBox Text='<%# Bind("ReportId") %>'
        <asp:Repeater DataSource="Something that is different than the GridView's DS">
            <a href='<%# Bind("ReportId", "reports.aspx?report={0}") %>'/>
        </asp:Repeater>
    </ItemTemplate>
</asp:GridView> 
```

我知道这是无法实现的，我正在寻找一种在嵌套中继器中使用来自父 gridview 的 ReportId 的方法，有没有办法使用服务器端代码 <%# %> 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T10:51:36.813

设置网格视图

```
DataKeyField="ReportId" 
```

并在它里面的事件 GridView1_ItemDataBound

```
protected void GridView1_ItemDataBound(object sender, GridViewItemEventArgs e)    
((TextBox)e.Item.FindControl("TextBox1")).text = GridView1.DataKeys[0].ToString(); 
```

在这种情况下，您使用 ID 的值设置文本框，尝试一下，希望它有用。

# php - 正则表达式，匹配标签之间的换行符

> ID：1006265
> 
> 赞同：0
> 
> 时间：2009-06-17T10:35:34.583
> 
> 标签：php, regex

我在 PHP 中有这个正则表达式：

```
preg_match('/\[summary\](.+)\[\/summary\]/i', $data['text'], $match); 
```

当摘要标签之间的文本位于一行时，它可以正常工作。但是，当它包含换行符时，它不匹配。

我试图在这里找到一个正确的修饰符：http: [//nl2.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://nl2.php.net/manual/en/reference.pcre.pattern.modifiers.php) 但唯一与换行符相关的是“m”，而这不是做我想做的。

如何使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T10:37:49.633

您链接到的手册页描述了另一个影响换行符处理方式的选项。

> s (PCRE_DOTALL) 如果设置了此修饰符，**则模式中的点元字符匹配所有字符，包括换行符**。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T14:23:01.253

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

您可能会发现这个使用[SimpleXML的](http://us2.php.net/simplexml)[答案](https://stackoverflow.com/questions/773340/can-you-provide-an-example-of-parsing-html-with-your-favorite-parser/774853#774853)很有帮助。

# windows - 如何检测 Windows Small Business Server 操作系统？

> ID：1006272
> 
> 赞同：0
> 
> 时间：2009-06-17T10:37:45.187
> 
> 标签：windows, installation, version-detection, small-business-server

我的雇主正在考虑发布同一个基于 Windows Server 的产品的两个版本；更便宜的“小型企业”版和更昂贵的“企业”版。

版本之间会有许多差异，但理想情况下，我们希望将“小型企业”版本限制为仅安装在 Microsoft Small Business Server (SBS) 2000 或更新的 Windows SBS 2003 和 2008 上。

是否有可靠的方法来检测（例如通过 API 调用或注册表）操作系统是否是这些 SBS 产品之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T10:41:07.160

[这是](http://msdn.microsoft.com/en-us/library/ms724429(VS.85).aspx)一篇 MSDN 文章，描述了探测操作系统版本，包括系统是否是小型企业产品（`PRODUCT_SMALLBUSINESS_SERVER`枚举）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T10:45:57.353

我猜[GetVersionEx()](http://msdn.microsoft.com/en-us/library/ms724451(VS.85).aspx)，它返回[OSVERSIONINFOEX](http://msdn.microsoft.com/en-us/library/ms724833(VS.85).aspx)会做：'

*   `VER_SUITE_SMALLBUSINESS`: Microsoft Small Business Server 曾经安装在系统上，但可能已升级到另一个版本的 Windows。有关该位标志的更多信息，请参阅备注部分。

*   `VER_SUITE_SMALLBUSINESS_RESTRICTED`：Microsoft Small Business Server 安装时具有有效的限制性客户端许可证。有关该位标志的更多信息，请参阅备注部分。

# java - JVM 的默认编码是什么？

> ID：1006276
> 
> 赞同：65
> 
> 时间：2009-06-17T10:37:57.620
> 
> 标签：java, encoding, character-encoding, jvm

UTF-8 是 Java 中的默认编码吗？
如果没有，我怎么知道默认使用哪种编码？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2009-06-17T10:41:07.207

JVM 的默认字符集是运行它的系统的字符集。这没有特定的值，您通常不应依赖默认编码是任何特定值。

可以在运行时通过 访问它`Charset.defaultCharset()`，如果这对您有任何用处，但实际上您应该在可以这样做时*始终明确指定编码。*

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-06-17T10:58:29.263

请注意，您可以使用名称混淆的属性更改 JVM 的默认编码`file.encoding`。

如果您的应用程序对编码特别敏感（可能通过使用暗示默认编码的 API），那么您应该在 JVM 启动时将其显式设置为一致（已知）值。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-09-16T09:26:53.843

共有三种“默认”编码：

*   文件编码：
    `System.getProperty("file.encoding")`

*   java.nio.Charset：
    `Charset.defaultCharset()`

*   以及 InputStreamReader 的编码：
    `InputStreamReader.getEncoding()`

[您可以在此页面](http://javarevisited.blogspot.de/2012/01/get-set-default-character-encoding.html)上阅读有关它的更多信息。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-12-06T16:53:59.263

要获取默认的 java 设置，只需使用：

```
java -XshowSettings 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-07-09T22:06:46.117

我确信这是特定于 JVM 实现的，但我能够通过执行以下命令来“影响”我的 JVM 的默认 file.encoding：

```
export LC_ALL=en_US.UTF-8 
```

（在 Ubuntu 12.04 上运行 java 版本 1.7.0_80）

此外，如果您从 unix 控制台键入“locale”，您应该会在此处看到更多信息。

所有功劳归于[http://www.philvarner.com/2009/10/24/unicode-in-java-default-charset-part-4/](http://www.philvarner.com/2009/10/24/unicode-in-java-default-charset-part-4/)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-05-31T22:20:10.277

您可以使用它打印出 JVM 默认值

```
import java.nio.charset.Charset;
import java.io.InputStreamReader;
import java.io.FileInputStream;

public class PrintCharSets {
        public static void main(String[] args) throws Exception {
                System.out.println("file.encoding=" + System.getProperty("file.encoding"));
                System.out.println("Charset.defaultCharset=" + Charset.defaultCharset());
                System.out.println("InputStreamReader.getEncoding=" + new InputStreamReader(new FileInputStream("./PrintCharSets.java")).getEncoding());
        }
} 
```

编译并运行

```
javac PrintCharSets.java && java PrintCharSets 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-06-17T10:39:19.597

这将取决于语言环境。不同的语言环境，不同的默认编码。

# jquery - 命名空间外的 jQuery 调用

> ID：1006278
> 
> 赞同：0
> 
> 时间：2009-06-17T10:39:14.060
> 
> 标签：jquery

我有一个 jquery 插件 X，在插件里面我有一个函数 test();

我的问题是如何从我的文档中调用插件 X 中的函数测试..

```
 $("#abc").html('<a href="jQuery.X.test()">test</a>'); 
```

但它不起作用。有简单的解决方案吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T10:48:25.010

你不应该设置`href`为 JavaScript（*如果*你在它前面加上前缀`javascript:`但不这样做，你可以这样做。）你可以做这样的事情：

```
$('#abc').html('<a href="#">test</a>').find('a').click(jQuery.X.test); 
```

它能做什么：

*   获取`#abc`元素
*   将其 HTML 设置为锚元素
*   选择锚元素
*   将点击事件附加到锚元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T10:42:04.460

我似乎记得它会是 jQuery.test()，而不是 jQuery.X.test()

# xpath - 如何使用 XPath 选择具有特定属性的第一个元素

> ID：1006283
> 
> 赞同：355
> 
> 时间：2009-06-17T10:40:27.177
> 
> 标签：xpath

XPath`bookstore/book[1]`选择 . 下的第一个 book 节点`bookstore`。

如何选择匹配更复杂条件的第一个节点，例如匹配的第一个节点`/bookstore/book[@location='US']`

* * *

## 回答 #1

> 赞同：524
> 
> 时间：2009-06-17T10:48:49.500

采用：

```
(/bookstore/book[@location='US'])[1] 
```

这将首先获取位置属性等于“US”的 book 元素。然后它将从该集合中选择第一个节点。请注意括号的使用，这是某些实现所必需的。

请注意，这与`/bookstore/book[1][@location='US']`除非第一个元素也恰好具有该位置属性不同。

* * *

## 回答 #2

> 赞同：193
> 
> 时间：2012-02-23T15:57:04.643

`/bookstore/book[@location='US'][1]`仅适用于简单的结构。

添加更多结构，事情就会中断。

和-

```
<bookstore>
 <category>
  <book location="US">A1</book>
  <book location="FIN">A2</book>
 </category>
 <category>
  <book location="FIN">B1</book>
  <book location="US">B2</book>
 </category>
</bookstore> 
```

`/bookstore/category/book[@location='US'][1]`产量

```
<book location="US">A1</book>
<book location="US">B2</book> 
```

不是“匹配更复杂条件的第一个节点”。`/bookstore/category/book[@location='US'][2]`什么都不返回。

使用括号，您可以获得原始问题的结果：

`(/bookstore/category/book[@location='US'])[1]`给

```
<book location="US">A1</book> 
```

并按`(/bookstore/category/book[@location='US'])[2]`预期工作。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2009-06-17T11:21:37.843

作为对乔纳森芬兰回答的解释：

*   同一谓词 ( `[position()=1 and @location='US']`) 中的多个条件必须*整体为真*
*   连续谓词（`[position()=1][@location='US']`）中的多个条件必须*一个接一个地为真*
*   这意味着`[position()=1][@location='US']`!=`[@location='US'][position()=1]`
    而`[position()=1 and @location='US']`==`[@location='US' and position()=1]`
*   提示：一个单独的`[position()=1]`可以缩写为`[1]`

您可以使用布尔运算符“ `and`”和“ ”以及`or`布尔 XPath 函数`not()`和. 另外，您可以将子表达式包装在括号中。`true()``false()`

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-05-13T15:09:07.860

查找第一个英文书节点（在整个文档中）的最简单方法，考虑到更复杂的结构化 xml 文件，例如：

```
<bookstore>
 <category>
  <book location="US">A1</book>
  <book location="FIN">A2</book>
 </category>
 <category>
  <book location="FIN">B1</book>
  <book location="US">B2</book>
 </category>
</bookstore> 
```

是 xpath 表达式：

 ****```
/descendant::book[@location='US'][1] 
```**  *** * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-03-18T15:50:09.887

```
 <bookstore>
     <book location="US">A1</book>
     <category>
      <book location="US">B1</book>
      <book location="FIN">B2</book>
     </category>
     <section>
      <book location="FIN">C1</book>
      <book location="US">C2</book>
     </section>
    </bookstore> 
```

所以鉴于上述情况；你可以选择第一本书

```
(//book[@location='US'])[1] 
```

这将找到第一个在美国有位置的地方。[A1]

```
//book[@location='US'] 
```

将返回包含位置为 US 的所有书籍的节点集。[A1,B1,C2]

```
(//category/book[@location='US'])[1] 
```

将返回存在于文档任何位置的类别中的第一本书位置 US。[B1]

```
(/bookstore//book[@location='US'])[1] 
```

将返回存在于根元素 bookstore 下任何位置的第一本位置为 US 的书；确实使 /bookstore 部分变得多余。[A1]

直接回答：

```
/bookstore/book[@location='US'][1] 
```

将为您返回位于书店 [A1] 下的 US 位置的 book 元素的第一个节点

顺便说一句，如果你想，在这个例子中找到第一本不是书店直系子的美国书：

```
(/bookstore/*//book[@location='US'])[1] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-08-17T05:54:20.173

如果 xpath 复杂或存在多个具有相同 xpath 的节点，则使用索引获取所需的节点。

前任 ：

```
(//bookstore[@location = 'US'])[index] 
```

您可以给出所需节点的编号。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-27T03:08:38.670

如果在给定的 xml 上提供了命名空间，最好使用它。

```
(/*[local-name() ='bookstore']/*[local-name()='book'][@location='US'])[1] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-17T11:52:20.033

例如。

```
<input b="demo"> 
```

和

```
(input[@b='demo'])[1] 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-07-15T11:43:15.803

在在线[xpath 测试仪](http://videlibri.sourceforge.net/cgi-bin/xidelcgi)的帮助下，我正在写这个答案......
为此：

```
<table id="t2"><tbody>
<tr><td>123</td><td>other</td></tr>
<tr><td>foo</td><td>columns</td></tr>
<tr><td>bar</td><td>are</td></tr>
<tr><td>xyz</td><td>ignored</td></tr>
</tbody></table> 
```

以下xpath：

```
id("t2") / tbody / tr / td[1] 
```

输出：

```
123
foo
bar
xyz 
```

因为**[1](http://videlibri.sourceforge.net/cgi-bin/xidelcgi)**意味着选择所有***td***元素，它们是它们自己的直接父元素的第一个子元素。
但是以下xpath：

```
(id("t2") / tbody / tr / td)[1] 
```

输出：

```
123 
```****

# compact-framework - 以编程方式更改 Windows CE 机器的 IP 地址？

> ID：1006284
> 
> 赞同：3
> 
> 时间：2009-06-17T10:40:31.810
> 
> 标签：compact-framework, ip-address, windows-ce

如何更改 Windows CE 机器的 IP 地址？

我想从 .NET Compact Framework 中完成！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-14T12:58:01.677

您可以通过将新值写入注册表 HKLM\comm[adaptername]\Parms\Tcpip 来更改当前 IP 地址。请记住，这是一个*多 sz*值，要使更改生效，您*必须使用*[IOCTL_NDIS_REBIND_ADAPTER](http://msdn.microsoft.com/en-us/library/ms901403.aspx) IOCTL调用 NDIS 驱动程序。

正如 Shaihi 所指出的，[智能设备框架](http://smartdeviceframework.com)已经将所有这些都包含在 NetworkInterface.CurrentIpAddress 属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-14T07:06:31.173

看看[这个](http://community.opennetcf.com/forums/p/10507/10507.aspx)和[这个](http://www.opennetcf.com/library/sdf/html/58b08094-d6c9-2f34-1059-941984eaddf6.htm)。

# version-control - 如何设置 netbeans 以推送到受密码保护的 mercurial 存储库？

> ID：1006288
> 
> 赞同：0
> 
> 时间：2009-06-17T10:41:25.537
> 
> 标签：version-control, netbeans, mercurial

我决定在我的最新项目中使用 Netbeans 和 Mercurial（在 Visual Studio 头疼之后）。我的 Mercurial 存储库已设置完毕，我可以从命令行对其执行任何操作。

具体来说，我可以通过在命令行上使用 ssh:// 登录来整天推送和拉取我的代码。但是，当我使用 Netbeans Share->Push 选项时，它只是挂起，因为它没有我的密码。

如何将其配置为提示我输入密码、存储我的密码或使用 SSH 密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T05:40:53.427

如果您想使用 ssh，请参阅[此常见问题解答](http://bitbucket.org/help/UsingSSH)。

对于 http/https，您可以在 .hg/hgrc 中添加以下行：

```
[paths]
default = https://username:password@some.url/repo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-22T10:05:47.773

在您的 mercurial 配置中：

```
ssh = C:\path\plink -l user -pw password 
```

# python - 如何使用python找出CPU的数量

> ID：1006289
> 
> 赞同：700
> 
> 时间：2009-06-17T10:41:44.350
> 
> 标签：python, system-information

我想知道使用 Python 的本地机器上的 CPU 数量。当使用优化缩放的纯用户空间程序调用时，结果应该是`user/real`输出。`time(1)`

* * *

## 回答 #1

> 赞同：1088
> 
> 时间：2009-06-17T10:53:53.843

如果您的 python 版本 >= 2.6，您可以简单地使用

```
import multiprocessing

multiprocessing.cpu_count() 
```

[http://docs.python.org/library/multiprocessing.html#multiprocessing.cpu_count](http://docs.python.org/library/multiprocessing.html#multiprocessing.cpu_count)

* * *

## 回答 #2

> 赞同：216
> 
> 时间：2009-06-17T10:43:28.980

如果您对当前进程*可用的处理器数量感兴趣，则必须先检查*[cpuset](http://man7.org/linux/man-pages/man7/cpuset.7.html)。否则（或者如果 cpuset 没有被使用），[`multiprocessing.cpu_count()`](http://docs.python.org/library/multiprocessing.html#multiprocessing.cpu_count)是 Python 2.6 和更新版本的方法。以下方法回退到旧版本 Python 中的几种替代方法：

```
import os
import re
import subprocess

def available_cpu_count():
    """ Number of available virtual or physical CPUs on this system, i.e.
    user/real as output by time(1) when called with an optimally scaling
    userspace-only program"""

    # cpuset
    # cpuset may restrict the number of *available* processors
    try:
        m = re.search(r'(?m)^Cpus_allowed:\s*(.*)$',
                      open('/proc/self/status').read())
        if m:
            res = bin(int(m.group(1).replace(',', ''), 16)).count('1')
            if res > 0:
                return res
    except IOError:
        pass

    # Python 2.6+
    try:
        import multiprocessing
        return multiprocessing.cpu_count()
    except (ImportError, NotImplementedError):
        pass

    # https://github.com/giampaolo/psutil
    try:
        import psutil
        return psutil.cpu_count()   # psutil.NUM_CPUS on old versions
    except (ImportError, AttributeError):
        pass

    # POSIX
    try:
        res = int(os.sysconf('SC_NPROCESSORS_ONLN'))

        if res > 0:
            return res
    except (AttributeError, ValueError):
        pass

    # Windows
    try:
        res = int(os.environ['NUMBER_OF_PROCESSORS'])

        if res > 0:
            return res
    except (KeyError, ValueError):
        pass

    # jython
    try:
        from java.lang import Runtime
        runtime = Runtime.getRuntime()
        res = runtime.availableProcessors()
        if res > 0:
            return res
    except ImportError:
        pass

    # BSD
    try:
        sysctl = subprocess.Popen(['sysctl', '-n', 'hw.ncpu'],
                                  stdout=subprocess.PIPE)
        scStdout = sysctl.communicate()[0]
        res = int(scStdout)

        if res > 0:
            return res
    except (OSError, ValueError):
        pass

    # Linux
    try:
        res = open('/proc/cpuinfo').read().count('processor\t:')

        if res > 0:
            return res
    except IOError:
        pass

    # Solaris
    try:
        pseudoDevices = os.listdir('/devices/pseudo/')
        res = 0
        for pd in pseudoDevices:
            if re.match(r'^cpuid@[0-9]+$', pd):
                res += 1

        if res > 0:
            return res
    except OSError:
        pass

    # Other UNIXes (heuristic)
    try:
        try:
            dmesg = open('/var/run/dmesg.boot').read()
        except IOError:
            dmesgProcess = subprocess.Popen(['dmesg'], stdout=subprocess.PIPE)
            dmesg = dmesgProcess.communicate()[0]

        res = 0
        while '\ncpu' + str(res) + ':' in dmesg:
            res += 1

        if res > 0:
            return res
    except OSError:
        pass

    raise Exception('Can not determine number of CPUs on this system') 
```

* * *

## 回答 #3

> 赞同：117
> 
> 时间：2013-02-12T19:19:05.940

另一种选择是使用[`psutil`](https://github.com/giampaolo/psutil)库，它在这些情况下总是有用的：

```
>>> import psutil
>>> psutil.cpu_count()
2 
```

`psutil`这应该适用于（Unix 和 Windows）支持的任何平台。

请注意，在某些场合`multiprocessing.cpu_count`可能会提高`NotImplementedError`一会儿`psutil`就能获得 CPU 的数量。这仅仅是因为`psutil`首先尝试使用相同的技术`multiprocessing`，如果失败了，它也会使用其他技术。

* * *

## 回答 #4

> 赞同：105
> 
> 时间：2019-03-29T18:00:55.117

**`len(os.sched_getaffinity(0))`是你通常想要的**

[https://docs.python.org/3/library/os.html#os.sched_getaffinity](https://docs.python.org/3/library/os.html#os.sched_getaffinity)

`os.sched_getaffinity(0)`（在 Python 3 中添加）返回考虑到[`sched_setaffinity`Linux 系统调用](https://stackoverflow.com/questions/10490756/how-to-use-sched-getaffinity-and-sched-setaffinity-in-linux-from-c/50117787#50117787)的可用 CPU 集，这限制了进程及其子进程可以在哪些 CPU 上运行。

`0`意思是获取当前进程的值。该函数返回一个`set()`允许的 CPU，因此需要`len()`.

`multiprocessing.cpu_count()``os.cpu_count()`另一方面，只返回物理 CPU 的总数。

区别尤其重要，因为某些集群管理系统（例如[Platform LSF](https://en.wikipedia.org/wiki/Platform_LSF) ）使用`sched_getaffinity`.

因此，如果您使用`multiprocessing.cpu_count()`，您的脚本可能会尝试使用比可用内核更多的内核，这可能会导致过载和超时。

我们可以通过限制与实用程序的亲和性来具体看到差异`taskset`，这使我们能够控制进程的亲和性。

**最小的`taskset`例子**

例如，如果我在我的 16 核系统中将 Python 限制为只有 1 个核心（核心 0）：

```
taskset -c 0 ./main.py 
```

使用测试脚本：

主文件

```
#!/usr/bin/env python3

import multiprocessing
import os

print(multiprocessing.cpu_count())
print(os.cpu_count())
print(len(os.sched_getaffinity(0))) 
```

那么输出是：

```
16
16
1 
```

**VS`nproc`**

`nproc`默认情况下确实尊重亲和力，并且：

```
taskset -c 0 nproc 
```

输出：

```
1 
```

并`man nproc`使其非常明确：

> 打印可用处理单元的数量

因此，默认情况下的`len(os.sched_getaffinity(0))`行为`nproc`。

`nproc`对于`--all`不太常见的情况，您希望在不考虑任务集的情况下获得物理 CPU 计数的标志：

```
taskset -c 0 nproc --all 
```

**`os.cpu_count`文件**

的文档`os.cpu_count`也简要提到了这个[https://docs.python.org/3.8/library/os.html#os.cpu_count](https://docs.python.org/3.8/library/os.html#os.cpu_count)

> 这个数字不等于当前进程可以使用的 CPU 数量。可用 CPU 的数量可以通过`len(os.sched_getaffinity(0))`

同样的评论也被复制到以下文档中`multiprocessing.cpu_count`：[https ://docs.python.org/3/library/multiprocessing.html#multiprocessing.cpu_count](https://docs.python.org/3/library/multiprocessing.html#multiprocessing.cpu_count)

从下面的 3.8 源代码中，[`Lib/multiprocessing/context.py`](https://github.com/python/cpython/blob/v3.8.5/Lib/multiprocessing/context.py#L41)我们还看到`multiprocessing.cpu_count`只是转发到`os.cpu_count`，除了如果失败`multiprocessing`则抛出异常而不是返回 None ：`os.cpu_count`

```
 def cpu_count(self):
        '''Returns the number of CPUs in the system'''
        num = os.cpu_count()
        if num is None:
            raise NotImplementedError('cannot determine number of cpus')
        else:
            return num 
```

**3.8 可用性：具有本机`sched_getaffinity`功能的系统**

唯一的缺点`os.sched_getaffinity`是这似乎只适用于 Python 3.8 的 UNIX。

cpython 3.8 似乎只是尝试`sched_setaffinity`在配置期间使用函数调用编译一个小的 C hello world，如果不存在`HAVE_SCHED_SETAFFINITY`则不设置并且该函数可能会丢失：

*   [https://github.com/python/cpython/blob/v3.8.5/configure#L11523](https://github.com/python/cpython/blob/v3.8.5/configure#L11523)
*   [https://github.com/python/cpython/blob/v3.8.5/Modules/posixmodule.c#L6457](https://github.com/python/cpython/blob/v3.8.5/Modules/posixmodule.c#L6457)

**`psutil.Process().cpu_affinity()`: 带有 Windows 端口的第三方版本**

第三方[`psutil`包](https://github.com/giampaolo/psutil)（`pip install psutil`_ [_](https://stackoverflow.com/a/14840102/895245) _ `cpu_affinity`_ [_](https://psutil.readthedocs.io/en/latest/#psutil.Process.cpu_affinity)

用法：

```
import psutil
print(len(psutil.Process().cpu_affinity())) 
```

此函数与 Linux 上的标准库相同`os.sched_getaffinity`，但他们也通过调用`GetProcessAffinityMask`Windows API 函数为 Windows 实现了它：

*   [https://github.com/giampaolo/psutil/blob/ee60bad610822a7f630c52922b4918e684ba7695/psutil/_psutil_windows.c#L1112](https://github.com/giampaolo/psutil/blob/ee60bad610822a7f630c52922b4918e684ba7695/psutil/_psutil_windows.c#L1112)
*   [https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-getprocessaffinitymask](https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-getprocessaffinitymask)

换句话说：那些 Windows 用户必须停止偷懒，向上游标准库发送补丁 :-)

在 Ubuntu 16.04、Python 3.5.2 中测试。

* * *

## 回答 #5

> 赞同：60
> 
> 时间：2014-09-03T04:16:56.270

在 Python 3.4+ 中：[os.cpu_count()](https://docs.python.org/3/library/os.html#os.cpu_count)。

`multiprocessing.cpu_count()`是根据此函数实现的，但`NotImplementedError`如果`os.cpu_count()`返回则引发`None`（“无法确定 CPU 数量”）。

* * *

## 回答 #6

> 赞同：51
> 
> 时间：2016-04-11T05:42:55.397

如果您想知道物理内核（不是虚拟超线程内核）的数量，这里有一个独立于平台的解决方案：

```
psutil.cpu_count(logical=False) 
```

[https://github.com/giampaolo/psutil/blob/master/INSTALL.rst](https://github.com/giampaolo/psutil/blob/master/INSTALL.rst)

请注意，默认值为`logical`，`True`因此如果您确实想要包含超线程内核，您可以使用：

```
psutil.cpu_count() 
```

`os.cpu_count()`这将给出与and相同的数字`multiprocessing.cpu_count()`，两者都没有`logical`关键字参数。

* * *

## 回答 #7

> 赞同：29
> 
> 时间：2019-03-14T13:16:55.420

这些为您提供超线程 CPU 计数

1.  `multiprocessing.cpu_count()`
2.  `os.cpu_count()`

这些为您提供虚拟机 CPU 计数

1.  `psutil.cpu_count()`
2.  `numexpr.detect_number_of_cores()`

仅当您在虚拟机上工作时才重要。

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2014-07-17T13:32:10.697

`multiprocessing.cpu_count()`将返回逻辑 CPU 的数量，因此如果您有一个带超线程的四核 CPU，它将返回`8`. 如果您想要物理 CPU 的数量，请使用 python 绑定到 hwloc：

```
#!/usr/bin/env python
import hwloc
topology = hwloc.Topology()
topology.load()
print topology.get_nbobjs_by_type(hwloc.OBJ_CORE) 
```

hwloc 旨在跨操作系统和体系结构移植。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2021-07-07T11:21:21.023

对于 3.4 以上的 python 版本，您可以使用

```
import os
os.cpu_count() 
```

如果您正在寻找一个等效的 linux 命令`nproc`。你有这个选项

```
len(os.sched_getaffinity(0)) 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2019-11-07T11:47:28.507

这可能适用于我们这些使用不同操作系统/系统但想要获得最好的世界的人：

```
import os
workers = os.cpu_count()
if 'sched_getaffinity' in dir(os):
    workers = len(os.sched_getaffinity(0)) 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2010-10-02T12:16:02.887

无法弄清楚如何添加到代码或回复消息，但这里是对 jython 的支持，您可以在放弃之前添加：

```
# jython
try:
    from java.lang import Runtime
    runtime = Runtime.getRuntime()
    res = runtime.availableProcessors()
    if res > 0:
        return res
except ImportError:
    pass 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2015-04-21T11:14:43.393

您也可以为此目的使用“joblib”。

```
import joblib
print joblib.cpu_count() 
```

此方法将为您提供系统中的 CPU 数量。不过需要安装joblib。有关 joblib 的更多信息，请参见 [https://pythonhosted.org/joblib/parallel.html](https://pythonhosted.org/joblib/parallel.html)

或者，您可以使用 python 的 numexpr 包。它有很多简单的功能，有助于获取有关系统 cpu 的信息。

```
import numexpr as ne
print ne.detect_number_of_cores() 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-08-29T14:05:39.103

如果您没有 Python 2.6，另一种选择：

```
import commands
n = commands.getoutput("grep -c processor /proc/cpuinfo") 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-02-18T19:02:29.393

如果您使用的是手电筒，您可以执行以下操作：

```
import torch.multiprocessing as mp

mp.cpu_count() 
```

torch 中的 mp 库与主 python 具有相同的界面，因此您也可以像评论者提到的那样执行此操作：

```
python -c "import multiprocessing; print(multiprocessing.cpu_count())" 
```

希望这可以帮助！;) 拥有超过 1 个选项总是很不错的。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-09-21T17:07:58.440

如果您正在寻找打印系统中的核心数量。

**试试这个：**

```
import os 
no_of_cores = os.cpu_count()
print(no_of_cores) 
```

这应该会有所帮助。

# php - 使用 php 将 swf 转换为 pdf

> ID：1006291
> 
> 赞同：2
> 
> 时间：2009-06-17T10:41:53.883
> 
> 标签：php, flash

有没有办法使用 php.ini 将 SWF 转换为 pdf。我的意思是页面上有一个点击按钮，它必须以 pdf 格式导出 swf 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T11:11:09.877

您可以尝试的一种方法是使用[ffmpeg](http://www.ffmpeg.org/)将 swf 转换为一系列 jpeg 图像，每帧一个，使用“image2”输出编解码器（参见[手册的这一部分](http://www.ffmpeg.org/ffmpeg-doc.html#SEC5)）。然后，您可以选择适当的框架并使用[pdflib](http://www.pdflib.com/)、[fpdf](http://www.fpdf.org/)或类似库构建一个 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T11:17:30.333

我注意到您的问题状态使用 php，但我对这个库非常满意： [AlivePDF](http://alivepdf.org/)。这值得一试。

# .net - .NET 库来访问 PE 标头

> ID：1006294
> 
> 赞同：4
> 
> 时间：2009-06-17T10:42:09.890
> 
> 标签：.net, coff

为了自动化一些任务，我正在寻找一个库，它可以让我读取和操作（添加/重命名/删除部分，...）来自 .NET 应用程序的 PE 标头。
如果可能的话，我宁愿使用可以在没有源代码的情况下重新分发的东西，而且我对商业解决方案持开放态度，只要它们是免版税且不需要嵌入 licx 的。
64位不是必需的，但将不胜感激。
首选 100% 托管解决方案。

**编辑：**我想澄清一下，我对读取/编辑文件的 .NET 元数据的方法不感兴趣，但对 PE 标头本身不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T10:51:28.747

你可以看看 Mono Cecil。

或[CCI](http://cciast.codeplex.com/)。

# vim - 如何让 vim 识别文件的编码？

> ID：1006295
> 
> 赞同：21
> 
> 时间：2009-06-17T10:42:16.067
> 
> 标签：vim

我注意到大多数时候，当使用“标准英语”以外的其他编码时，vim 无法识别并且无法正确显示字符。
通过打开一些使用 cp437 代码页的 ascii 图形或网络上的类似文件，最容易看到这一点。

有没有办法让vim在打开文件时检查编码，并用正确的打开它？

您使用什么编码，作为最“便携”的编码（最多用户遇到问题最少的编码）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-06-17T10:54:44.857

Vim 需要检测编码，这将是有问题的，因为文件通常不会明确说明它们的编码（一个明显的例外是在标头中具有编码属性的 XML 文件）。

您可以强制 Vim 重新加载具有不同编码的文件，因此：

```
:e ++enc=cp437 
```

如果您愿意，您可以在 .vimrc 中设置默认编码。

[此页面](http://vim.wikia.com/wiki/Working_with_Unicode#See_also)有更多信息和链接，尤其是 wrt。编辑 Unicode。UTF-8 是使用最广泛的编码，您可能应该使用默认编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-05T01:31:05.150

您可以使用 vim 模式行来设置文件的编码。这只是一个注释，位于文件的前五行，以`vi: set fileencoding=cp437`.

你也可以从 'vim:' 开始，而不是 'vi: set'，但后者使它与更多的编辑器兼容。你肯定需要这些前缀和'fileencoding'之间的空格，或者你想要设置的任何选项。不过，该`fileencoding`选项应该可以解决您的问题。

因此，在 Python 或 .rc 文件中，您可以将其放在文件的顶部：

```
# vi: set fileencoding=cp437 
```

在 Java、C、C++、JavaScript 等中，这样写：

```
// vi: set fileencoding=cp437 
```

有关更多信息，请在 vim 中键入`:help modeline`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-02T23:32:22.760

您可以在 .vimrc 中设置变量 'fileencodings'。

> 这是开始编辑现有文件时考虑的字符编码列表。当一个文件被读取时，Vim 尝试使用第一个提到的字符编码。如果检测到错误，则尝试列表中的下一个错误。当找到一个有效的编码时，'fileencoding' 被设置为它。如果全部失败，'fileencoding' 设置为空字符串，这意味着使用 'encoding' 的值。

看`:help filencodings`

如果您经常使用例如 cp437 或 cp1252，您可以在此处添加它：

```
set fileencodings=ucs-bom,utf-8,cp1252,default,latin9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-05T01:39:50.567

您可以使用 unicode 对文件进行编码，并在文件中设置[字节顺序标记](https://en.wikipedia.org/wiki/Byte_order_mark)(BOM)。这将使 vim 适当地处理它，但某些编译器和程序可能会遇到问题。即使是基本的 shell 命令`cat`也可能在某些用例中出现异常。

为此，请在 vim 中键入：

```
:set fileencoding=utf-8
:set bomb
:w 
```

有关更多信息，请键入：

```
:help bomb 
```

# proxy - RESTful WCF 服务的代理

> ID：1006297
> 
> 赞同：0
> 
> 时间：2009-06-17T10:42:18.703
> 
> 标签：proxy, rest, wcf

我的标准 WCF/RESTful 服务将返回大型复杂对象。在 WCF 中，当有人添加服务引用时，它会创建它的代理，即我向客户端公开数据合约，并且它在客户端级别是强类型的。

我们将如何处理 RESTful 服务，无论如何，RESTful 服务是否也一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T10:44:50.007

RESTful 服务的好处之一是它们是轻量级的。这意味着没有像 WSDL 文件、代理等这样的基础设施。

RESTful 服务不是自描述的，因此您不必担心提供 WSDL 文件；在线维护所有模式等。

* * *

如果负载很复杂，那么为什么要使用 REST？仅仅因为它是一种时尚？您的服务上的操作是否与 HTTP 协议规范定义的“资源”上的 HTTP 操作相对应？

如果没有，那么不要使用 REST。

# jquery - 是否可以从 Flash 电影中打开 JQuery 灯箱？

> ID：1006302
> 
> 赞同：1
> 
> 时间：2009-06-17T10:43:30.337
> 
> 标签：jquery, flash

是否可以从 Flash 电影中打开 JQuery 灯箱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T10:47:58.147

尝试[使用 jQuery 从 Flash 调用任何 JS 灯箱](http://www.thetruetribe.com/jquery/1-jquery-api/87-calling-any-js-lightbox-from-flash-using-jquery)

闪光：

```
import flash.external.ExternalInterface;
button.addEventListener(MouseEvent.CLICK, external, false, 0, true);
function external(evt:MouseEvent):void {
 ExternalInterface.call("external", "lightbox/photos/image1.jpg");
} 
```

Javascript：

```
function external(path) { // pass in the correct path to the function so we only need one <A> for infinite amount of calls from  flash              
// if the lightbox does not exist we will make it               
 if ($('a#lightbox').length == 0) {                 
  $("body").append("</A><A id="lightbox" style="visibility: hidden; position: absolute; left: -9999px;" href="http://www.thetruetribe.com/+path+">calling js lightbox from flash</A>");                
  $('a#lightbox').lightBox();           
// if it already exists but the path is different we will set the new path              
 } else if ($('a#lightbox').attr("href") != path) {                 
  $('a#lightbox').attr("href", path);           
 }      
// now we will simulate the click here.             
 $('a#lightbox').trigger("click");      
} 
```

或者，如果您对编写 javascript 有点信心，您可以将 flashLightBoxInjector [Start Lightbox 从 Flash](http://www.bram.us/projects/flashlightboxinjector)一个 PrototypeJS 类移植到 jQuery 框架，而不会有太多麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T10:48:46.287

是的，你可以做到。

要调用 javascript 函数 doIt()，请编写：

```
getURL("javascript:doIt()"); 
```

但实际上，如果您必须这样做，可能会有更好的方法来解决您的问题。

jrh

# svn - Subversion，从重新集成合并中删除 MergeInfo 是否安全

> ID：1006303
> 
> 赞同：5
> 
> 时间：2009-06-17T10:43:34.707
> 
> 标签：svn

由于 svn 书籍建议在使用 reintegrate 选项将其合并到主干后删除一个分支，因此恢复添加到主干的该分支的 mergeinfo 属性更改是否安全？

我们的主干现在有许多不再存在的旧分支的合并信息条目。

我不明白此时这些条目会在哪里使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T19:43:38.060

这将是“安全的”，因为您不会破坏存储库或工作副本或任何未来的功能。

但我喜欢保留它们的想法，仅仅是因为理论上你可以去弄清楚谁真正做了一件特定的工作以及它的真实历史是什么（理论上，如果你足够关心的话）。如果您删除合并信息，您将不再有任何提示相关代码的来源。

但是，如果它失控并引起问题，或者即使它只是让您烦恼，那么保留此信息是一个弱的论据。

也许您可以保留它进行几次修订，然后摆脱“旧”的。这样，一个责备将出现合并修订，这也将允许您找到相关的合并信息，就像那时一样。

# .net - 如何向初学者解释事件？

> ID：1006304
> 
> 赞同：0
> 
> 时间：2009-06-17T10:44:17.293
> 
> 标签：.net, events

使用 .NET 如何向初学者解释事件？

我看过的大多数介绍书籍都在谈论 WinForms 应用程序，双击设计器中的按钮和中提琴你有一个事件。

我不喜欢它，因为它没有解释任何关于幕后发生的事情或更复杂的事情，比如链接事件。

有没有更好的方法来解释事件以及我应该添加什么（例如链接、委托等......）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T10:47:11.423

[这里](http://www.codeproject.com/KB/cs/csevents01.aspx)有一篇好文章。它以“事件是一种机制，当发生某些事情时，类可以通过该机制通知其客户端。例如，当您单击按钮时，按钮单击事件通知将发送到托管该按钮的窗口。” 我认为这很好地解释了事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-17T10:51:12.553

如果您正在寻找真实世界的示例，您可以使用 twitter/RSS 等。

例如，您在 twitter 上发布了一些内容，订阅您的提要的任何人都会看到该帖子。

一个对象引发一个事件（=twitter 帖子），任何处理该事件的方法（=twitter 订阅）都会执行。

然后，您可以讨论如何设置处理程序（订阅帐户）为什么您应该取消订阅等所有关于 twitter 的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T10:50:24.753

类似的东西：一个事件是“它可能关心的人”发生“某事”的消息（例如单击按钮或计时器已过）。使用“处理程序”，您可以对该事件做出反应。您可以订阅一个事件，以便在该事件发生时调用您的处理程序。多个类可以订阅一个事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T11:08:36.793

An event is like a string pulling device. Anyone who is interrested can attach a string to the device. When something specific happens the device will pull the strings, so that anyone who is interrested gets a signal that it has happened.

:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T10:48:17.660

事件是从对象发出的信号，用于通知外界已经发生或即将发生的某事（事件）。它为对象提供了一种机制来传达这一点，而无需知道谁在听（或者是否有人在听）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T11:15:52.160

**An event is something the object raising it broadcasts:**

***Analogy:*** Think of an alarm light on a well house for high water.

***C#:*** This is the System.Windows.Forms.Button.Click event

**Delegates are attached to this event, they care about when this event happens.**

***Analogy:*** They are like the maintenance persons, but perhaps not those from the next town over.

***C#:*** This is the method in your code which "does something when Click happens". You first "care about the event" with `myButton.Click += new EventHandler( myButton_Click )`. And the worker is the method `myButton_Click( Object sender, EventArgs e )` itself. Multiple worker methods may "care about" the same event.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T11:35:07.537

Why the technical jargon?

There's an idiom everyone knows by now:

[http://www.glenbrook.k12.il.us/GBSSCI/PHYS/CLASS/newtlaws/u2l4a.html](http://www.glenbrook.k12.il.us/GBSSCI/PHYS/CLASS/newtlaws/u2l4a.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-17T11:51:35.363

In Delphi - I have added/defined and implemented additional event handlers and because I grew up in the 60's I called these "**Happenings**". I think the word describes it better than "event". So the analogy runs that "**happenings**" were mostly NOT PLANNED they just happened - you do not normally code them in as part of a pre-defined program execution path - you have to wait for them to occur.

To be involved or invited you had to have the right contacts. And Adding yourself to the Happening notification list (via your objects' event methods) is a way of making sure you get to be part of the happening ... Or "there is a Happening going on at this object" - Do you want to be involved or not. If you want to be involved notify your contacts then you get to go to the party :))

Just my light hearted two penneth :))

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-17T12:02:17.497

Trivial usages of events, such as those in most examples, could be replaced with an implementation that doesn't use events and/or involve interacting with some kind of black box interface (System.Web.Page, etc).

If you really want to teach someone events, find a scenario where they are both the producer and the consumer of the event, and that the events provide substantial benefits over function/method calls. If you want to understand events, you not only have to grasp what they do but understand where they can be used to advantage.

# .net - WCF REST Starter Kit 是否已死在水中？

> ID：1006309
> 
> 赞同：21
> 
> 时间：2009-06-17T10:46:28.943
> 
> 标签：.net, wcf, rest

我们正在考虑从将 WCF 用于应用程序中的服务层切换到 REST。

到目前为止，我们假设这样做的方法是使用[WCF REST Starter Kit](http://code.msdn.microsoft.com/wcfrestlabs/Release/ProjectReleases.aspx?ReleaseId=2368)。但是，这仍处于预览版 2 中，并且自 2009 年 3 月以来尚未更新。

这个项目死在水里了吗？

如果是这样，我们有什么替代方法来创建基于 .NET 的 REST 服务？（有些人建议使用我们已经在 UI 层使用的[ASP.NET MVC ）](https://stackoverflow.com/questions/584254/has-anyone-used-the-new-wcf-rest-starter-kit-successfully-and-would-you-use-it-ag/584275#584275)

## 编辑

现在看来[，WCF REST Starter Kit 确实已经死了](http://aspnet.codeplex.com/wikipage?title=WCF%20REST)。[ASP.NET Web API](http://www.asp.net/web-api)是推荐的替代方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2010-04-25T19:49:46.703

在花费大量时间使用不同的 .net 休息框架后，我得出了一个结论。**使用 asp.net mvc 是迄今为止处理 RESTful 服务的最简单和最透明的方式。有很多不那么令人困惑的配置。**

**ASP.NET MVC**

就其本质而言，asp.net mvc 适合宁静的服务方法。asp.net mvc 没有采用复杂的soap 驱动框架并将其“调整”到restful 协议，而是将Web 编程范式作为其核心。它更加**透明**且易于调试。使用 asp.net 路由框架，iis 请求被连接到控制器类。返回任何类型的内容都是轻而易举的事。由于**约定优于配置**的理念，设置起来要容易得多。它只是工作。'纳夫说。

这是我在尝试让 wcf 与 rest 一起工作时玩过的项目列表。我花了几天时间学习不同的方法。最后，每个人都有我喜欢的地方，但没有什么能满足我们所有的需求。Mvc 获胜。

## WCF 休息项目

* * *

**WCF Rest Contrib** - wcfrestcontrib.codeplex.com

这个项目有一些非常有用的特性，比如零配置、错误处理（用于返回正确的 Web 响应代码）和 Web 身份验证。

它要求您更改创建 wcf 服务的服务工厂类。这意味着它不能与其他需要您使用其工厂的库很好地配合。

**WCF Rest 入门工具包** - code.msdn.microsoft.com/wcfrestlabs/

这实际上只是一个“学习工具”和实验室，用于展示如何在 wcf 中实现 rest。它看起来不再更新了。我认为 asp.net mvc 和 wcf 4.0 已经摆脱了它的销售。它确实有一些很好的类最终被合并到 wcf 4.0（帮助功能）中。

## 文档工具

* * *

**WCF Rest AutoDocs** - autodocs.codeplex.com

基于属性和新的端点行为适配器类生成非常酷、易于使用的文档。

我用这个打了一个大圈套。当我将它添加到 WCF 时，突然帖子不再有效。我不断收到未找到端点的错误。我最终放弃并停止使用图书馆。与其他库不能很好地配合。

**WCF 文档**- wcfdoc.codeplex.com

为基于肥皂和休息的服务生成文档。您可以创建自己的 xslt 并根据您公司的品牌生成看起来很酷的文档。我目前正在将其集成到我们的构建过程中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-19T23:36:44.520

自 .Net Framework 3.5 发布以来，WCF 提供了对 REST 样式服务的支持，您现在就可以开始在 WCF**上**构建 REST 服务了。

WCF REST Starter Kit 旨在作为一种工具，供团队从社区获得有关 WCF 中有关 REST 的新功能想法的反馈。我们正在积极致力于将开发人员最喜欢的入门套件功能整合到 .Net Framework 中——例如，您可以使用最近发布的 .Net 4 Beta 1 版本中的帮助页面功能。当我们收到有关入门套件功能的反馈时，我们会考虑将它们包含在框架中，您可以在生产环境中使用它们。

关于入门套件“死在水中”的评论，我可以向您保证，情况恰恰相反。正如我们在[入门工具包主页](http://aspnet.codeplex.com/Wiki/View.aspx?title=WCF%20REST)上所述，我们的目标是对入门工具包的新版本进行 4 个月的开发周期。我们拥有专门用于支持入门工具包和开发未来版本的资源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-02-22T23:57:38.310

我们使用 WCF 实现了一个 RESTFUL api，我们可以在其中使用 XML、JSON 和 ProtoBuf 发布和接收数据。与 GET 相同。

但是，一旦我们查看了 ASP.NET MVC，我们就抛弃了 WCF，现在使用 MVC 用更透明的代码来做同样的事情。谷歌上有一些关于如何做到这一点的好文章。我们的主要需求是为客户提供序列化请求和接收对 XML、JSON 或 Protobuf 的响应的选项。

我会说 WCF 对我们来说已经死了。MVC 万岁

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-20T13:33:32.903

这取决于您的场景，但您会发现 WCF REST 在启用某些场景时会妨碍您。

初学者工具包开始修复其中一些问题，其他问题将在下一个版本中修复，但如果您想要链接创建、内容类型协商和自定义媒体类型，您将花费大量时间使其工作.

还有其他框架可以更直接地解决同样的问题，我建议你看看 OpenRasta 和 Snooze，甚至是 MVC。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-17T11:06:46.720

我不认为它会去任何地方。从 Preview 1 到 Preview 2 用了 4 个月，而从那时起只过了 3 个月。远非官方，但[本文](http://msdn.microsoft.com/en-us/library/dd819897.aspx)将其命名为 Framework 4 - Beta 1 的一个亮点。还有一个关于它的[PDC 会议](http://channel9.msdn.com/pdc2008/TL35/)。太多的组织使用 REST 来为其服务提供 WCF 的支持。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-17T10:54:03.047

另一种可能性是此功能将成为 .NET 4.0 和 Visual Studio 2010 的一部分。我建议您下载测试版并找出答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-17T15:39:20.880

> 到目前为止，我们假设执行此操作的方法是使用 WCF REST Starter Kit。但是，这仍处于预览版 2 中，并且自 2009 年 3 月以来尚未更新。

**您可以使用 WCF 构建 REST 应用程序，而无需 Starter Kit。** .NET 3.5 中附带的 WCF 包括良好的 REST 功能和工具。它包括 URI 模板映射、WebGet 属性等。

入门工具包是示例代码、附加实用程序类、视频和其他有助于说明如何在 WCF 中执行 REST 的附加内容。在 WCF 中执行 REST 不需要入门工具包。

您无需等待入门工具包“完成”即可在 WCF中*执行REST。*如果里面有你喜欢的东西，比如 Http Request builder，那么就使用它。它是开源的，你可以在你的项目中使用。如果您不喜欢它，请不要使用它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-01T17:38:30.323

如果您正在寻找一些附加功能（如内容类型和接受基于标头的反序列化、按操作身份验证等），请查看 WCF REST Contrib 项目：

[http://wcfrestcontrib.codeplex.com/](http://wcfrestcontrib.codeplex.com/)

它基于 3.5 SP1 WCF REST API 并提供一些 RSK 中没有的功能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-11-01T21:17:55.277

我使用 WCF Rest Contrib 只是因为我需要支持从第三方开发的 iPad 应用程序发送给我们的 x-www-form-urlencoded 格式。另外，我需要支持自定义用户名验证，WCF 4 REST 服务同样不支持开箱即用。

不幸的是，缺点是我失去了自动生成帮助页面的能力，WCF Rest Contrib 库似乎不支持这种能力。

丢失帮助页面已成为真正的 PITA，但我看不到任何其他选择，因为上述要求不可协商。

我希望，随着使用 REST 的移动设备的爆炸式增长，微软将更加认真地在 WCF 中实施工业强度版本。就目前而言，我对 WCF 4 有点失望……我希望有更接近 WCF Rest Contrib 的东西。

（顺便说一句，服务实现库还支持经典非移动客户端的 SOAP WS 部署，在可以使用 WSDL 合同生成代理的地方更容易实现）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-20T16:57:53.247

我们正在构建一个应用程序来使用我们现有的服务。我们还需要实现 RESTful 服务，但我们的主要目标是重用/集中我们已经存在的 WCF 服务，实现可重用性。

然后我们试用了 Web API，发现它非常简单。它还为我们的架构提供了一个额外的层，我们也可以控制它。

起初我们有性能问题，但到目前为止，这些问题很少。

因此，如果您不介意在 WCF 服务上添加一个附加层，则让它作为 Web API 层存在，否则 HttpClient 作为一个选项同样可靠。

# wcf - RESTful WCF 服务是完全发布的版本吗？它以 Preview_2 的形式出现

> ID：1006311
> 
> 赞同：0
> 
> 时间：2009-06-17T10:47:08.070
> 
> 标签：wcf, rest

RESTful WCF 服务是完全发布版本还是 BETA 版本，因为下载 msi 时是“WCF_REST_Starter_Kit_Preview_2.msi”。这个 Preview_2 是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T15:41:38.270

WCF 包含并支持 REST 功能，它是当前 .NET Framework v3.5 的一部分。

REST Starter Kit 是 WCF for .NET 3.5 的一堆附加组件。入门工具包处于预览版 2。使用 WCF 进行 REST 不需要入门工具包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-19T23:30:02.553

WCF REST Starter Kit 旨在作为一种工具，供团队从社区获得有关 WCF 中有关 REST 的新功能想法的反馈。从这个意义上说，入门工具包可能始终保持其“预览”状态，并且永远不会作为独立的生产版本发布。

话虽如此，我们正在积极致力于将开发人员最喜欢的入门工具包功能整合到 .Net 框架中——例如，您可以使用最近发布的 .Net 4 Beta 1 版本中的帮助页面功能。当我们收到有关入门套件功能的反馈时，我们会考虑将它们包含在框架中，您可以在生产环境中使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T11:16:07.840

WCF REST Starter Kit Preview 2，顾名思义，只是一个预览版，而不是一个适当的版本 (RTM/RTW)。您可能会发现这个相关问题有助于回答您的问题：

> [WCF REST Starter Kit 是否已死在水中？](https://stackoverflow.com/questions/1006309/is-the-wcf-rest-starter-kit-dead-in-the-water)

# .net - 如何在指定节点 TOC (.NET) 上打开 CHM 文件

> ID：1006312
> 
> 赞同：7
> 
> 时间：2009-06-17T10:47:08.770
> 
> 标签：.net, chm

您好我需要在我的 .NET 应用程序中实现上下文帮助。我有 .chm 文件，我正在寻找在标准查看器中打开它并突出显示所需的 TOC 主题（或索引条目）的可能性

知道如何存档吗？

**编辑：**

也许用于打开 CHM 文件的 MS 应用程序具有一些允许存档的命令行参数？

顺便说一句：我在哪里可以找到那个应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-17T10:59:07.920

我认为以下 URL 之一可以工作或通过谷歌将您指向更多“网络点击”。但我认为有时会有一些限制，例如：可能仅在 IE 中有效，仅当 chm 在受信任的位置时，某些 url 可能仅适用于某些 Windows 版本，...。

```
mk:@MSITStore:C:\test.chm::/testpage.htm

ms-its:.\test.chm::/html/test.htm 
```

* * *

好像我说的不够具体。您应该能够使用上述内容直接从您的应用程序中启动 hh.exe 并将其作为 URI 作为参数传递。

使用 System.Diagnostics.Process 并像这样启动 hh.exe

```
hh.exe mk:@MSITStore:C:\test.chm::/test.htm 
```

应该做你想做的。

检查[HTMLHelp 命令行](http://www.help-info.de/en/Help_Info_HTMLHelp/hh_command.htm)以获取更多示例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T15:46:13.567

谢谢杰夫，我找到了解决方案。

下面的方法这样做 - 也许有人觉得它有用。感谢帮助！

```
public static void ShowHelpByKeyword(Control sourceControl, string helpFile, string parameter) {
   Help.ShowHelp(sourceControl, helpFile, HelpNavigator.KeywordIndex, parameter);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-17T12:56:39.773

您可能想查看[Help](http://msdn.microsoft.com/en-us/library/system.windows.forms.help.aspx)类。这是我用来在 Winforms 应用程序中显示帮助的工具。

# joomla - 我将如何归档以使用 Joomla 在单页中显示 3 篇不同的文章？

> ID：1006319
> 
> 赞同：0
> 
> 时间：2009-06-17T10:48:38.423
> 
> 标签：joomla, joomla1.5

我有一个名为 SECT_X 的部分，在该部分中，有 32 个不同的类别。

这些类别中的每一个都在菜单中，每个菜单条目应显示一个页面，其中包含一个具有 3 列的模板。

每一列都应包含不同的文章或一个对其部分唯一的文本块。

示例数据：

```
SECT_X ->
  CAT_1 -> 
    INTRO_1
    HISTORY_1
    FUTURE_1
  CAT_2 -> 
    INTRO_2
    HISTORY_2
    FUTURE_"
  CAT_3 -> 
    INTRO_3
    HISTORY_3
    FUTURE_3 
```

关于如何实现这一点的任何想法？菜单部分是直截了当的，ic

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T17:54:30.247

Not a real solution but got it:

Copied all the catogories to sections and made intro, history & future as categories and with content include module i can fetch the all the articles in section and place them on any of the columns.

# java - Java 接口、AbstractClass 和 Enum 命名约定

> ID：1006332
> 
> 赞同：32
> 
> 时间：2009-06-17T10:52:11.553
> 
> 标签：java, naming-conventions

我们的团队正在讨论 Java 的代码约定：

*   `interface`：`Foo`或`IFoo`或`FooInterface`？

*   `abstract`:`Foo`还是`AbstractFoo`？

*   `Enums`:`Foo`还是`FooEnum`？

我基本上是想把我的个人喜好放在一边:) 所以支持一个或其他约定的理由是非常受欢迎的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-06-17T10:53:55.043

在 Java 中：`Foo`和`AbstractFoo`-`Foo`虽然`AbstractFoo`可能只是`Foo`.

证据：

*   `java.util.List`（界面）
*   `java.util.AbstractList`（抽象类）
*   `java.util.Formatter.BigDecimalLayoutForm`（枚举）

对于接口部分，请参阅 Java 编码约定文档的[命名约定](http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html)部分。它虽然没有谈论枚举和抽象类。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2011-08-17T09:23:26.497

从[我的博客](http://blog.joda.org/2011/08/implementations-of-interfaces-prefixes.html)：

*   **Foo** - 接口最终定义了概念，所以它应该有最好的名字。
*   **AbstractFoo** - 一种抽象实现，旨在用作类层次结构的基础。
*   **BaseFoo** - 一种旨在用作类层次结构基础的实现，如果需要，可以单独使用基类。
*   **DefaultFoo** - 适用于大多数典型用例的“默认”实现。
*   **SimpleFoo** - 一个没有意外功能的“简单”实现，可能作为示例或模拟。一个简单的 POJO 将是一个很好的“简单”实现。
*   **{Descriptive}Foo** - 其他实现应该描述是什么让它们独一无二。

该博客还讨论了反对其他一些名称的原因。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-06-17T10:59:11.977

**接口：Foo**

原因：您的代码必须不需要知道它们正在处理接口。写“IFoo”就是这样做的。相反，Foo 明确表示 'Foo' 是通用的，其背后的对象可能是 'NumFoo' 或 'StrFoo'。代码真的不需要关心。

**抽象类：AbstractFoo**

原因：你的代码永远不会直接使用这个类。您将始终对此类进行子类化以创建其他代码使用的任何类。因此，程序员必须非常清楚该类是一个抽象类。还有什么更好的方法来命名它抽象！在需要使用 AbstractFoo 类型的引用的地方，您应该重新考虑使用接口。（当然，这在 C++ 中是不可能的）

**枚举：FooType**或 FooEnum。就个人而言， FooType 更好，因为 Type 更容易与 Enum 所做的“现实世界”相关联。

干杯!

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-17T11:14:37.030

没有特殊约定。

对这些类有特殊的命名约定基本上是匈牙利符号的一种形式（不好的那种）：它为您提供的信息已经存在于语法中，并且通常可以通过 IDE 轻松获得，例如当您将鼠标悬停在名称上时。把它放在名字本身是没有意义和丑陋的。

类名应该尽可能简单地描述类的角色。这*可能*会导致“自然”的命名约定——一个很好的例子是 Java 命名接口的约定，带有 -able 后缀（Iterable，Comparable）——但我不想想象如果它被普遍执行和 List 的结果，地图等只好跟着它走。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-17T10:56:23.853

我的约定：

*   **接口**：Foo
*   **abstract**：它取决于 FooAdaptor 或 AbstractFoo 或 BaseFoo
*   **枚举**：Foo 或 Foos

我真的不喜欢在接口名称甚至 FooInterface 中使用 I：

```
 interface FooInterface { 
```

就像写：

```
 class FooClass { 
```

甚至：

```
 abstract class AbstractFooClass { 
```

它只是冗长的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-17T10:54:04.030

我的约定：

*   **接口：** `Foo` ;
*   **摘要：** `AbstractFoo` ;
*   **枚举：**通常`Foo`但在某些情况下`FooType`。

`IFoo`非常.Net，而不是Java。`FooInterface`没见过用过的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-10-27T10:26:49.833

关于我个人喜欢的界面：

```
Fooable 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-10-27T10:20:54.173

关于接口：

我更喜欢 IFoo 因为它是一个会说话的名字，告诉你它是一个推断。其次，对于只为一个类创建接口的模块等，该类通常与接口具有相同的名称。然后你可以使用 Foo 扩展 IFoo。否则，好吧，你必须找到一个名字。或者使用 FooInterface 或其他什么...</p>

如前所述，java.util.list 使用 Foo。这没有问题，因为具有不同概念的类实现了它，因此已经建议了一个不同的名称（ArrayList、LinkedList ...）。我不太确定我是否真的更喜欢那里的 IList。不知道……：P

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-06-14T05:40:48.933

这是我在 ION 的开发团队中使用的对流。

**界面**

```
interface IMyInterface 
```

:::::::::::::::::::::::::::::::::::::::::::::::::: :::::::::::::::::::::::::::::::::::::::::::::::::: :::::::::::::

```
abstract class MyAbstract 
```

:::::::::::::::::::::::::::::::::::::::::::::::::: :::::::::::::::::::::::::::::::::::::::::::::::::: :::::::::::::

```
enum EMyEnumeration 
```

:::::::::::::::::::::::::::::::::::::::::::::::::: :::::::::::::::::::::::::::::::::::::::::::::::::: :::::::::::::

# struts - struts 常见错误转发

> ID：1006334
> 
> 赞同：0
> 
> 时间：2009-06-17T10:53:20.927
> 
> 标签：struts

我怎样才能对所有动作使用共同前锋。我的意思是我不想在所有动作中写共同的前锋。

```
<forward name="invalidlogin" path="/invalidlogin.jsp" /> 
```

我不想写这个`<Actions>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-19T17:43:51.077

听起来你只是在描述一个全球前锋。全局转发在 struts-config.xml 文件中定义。这样，前向被定义为所有动作，因此任何动作都可以使用前向。

因此，您可以在 struts-config.xml 文件中放置类似以下内容：

```
 <global-forwards>
    <forward name="error" path="jsp/error.jsp"/>
  </global-forwards> 
```

然后在您的操作类中转发到“错误”：

```
return mapping.findForward("error"); 
```

# asp.net-mvc - ASP.NET MVC 如何处理下拉列表的默认空值

> ID：1006336
> 
> 赞同：1
> 
> 时间：2009-06-17T10:53:36.153
> 
> 标签：asp.net-mvc, drop-down-menu

我使用这样的 ASP.NET MVC 助手创建一个下拉列表，

```
<%=Html.DropDownList("Group","-please select a group-")%> 
```

我得到这样的html，</p>

```
<label for="GroupId">Group:</label>
<select id="GroupId" name="GroupId"><option value="">-please select a group-</option>
<option value="15">Business</option>
<option value="16">Friends</option>
<option value="17">Others</option>
</select> 
```

默认选项为“-please selecta group-”，值为空。

如何验证选择值以查看它是否为空？我的意思是如果用户没有选择一个组，我怎么知道它并给用户一个错误消息。现在，代码只显示异常错误，因为默认选项的值为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T11:34:58.597

Action 中 Group 的值为 0。您可以测试 Group 是否为零并调用 ModelState.AddModelError。如果可以在下拉列表中显式设置默认项的值会更好，但这在 Html.DropDownList 中是不可能的

无论如何，我使用重载：

这样，您在模型中就有一个属性用于组列表，一个属性用于选定组的键。如果我使用

那么 ModelState.IsValid 对我来说总是错误的。

# ssrs-2008 - 如何抑制 SSRS 2008 中的空子报表

> ID：1006343
> 
> 赞同：7
> 
> 时间：2009-06-17T10:55:14.527
> 
> 标签：ssrs-2008, visibility, reporting-services, subreport

我正在 SSRS 2008 中创建一个“主”报告，它与其他关于一个人的报告协作。有时并非所有其他报告都是相关的，因此不会返回任何内容。我希望能够从主报告中排除它，这样它就不会留下空白页。

我知道'no-rows-message' 功能，但一个简单的“不适用于此人”的页面并不是最好的解决方案！

本质上，我正在寻找一种方法来确定子报表是否为“空”并在可见性表达式中使用它。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-17T11:39:43.500

好的，所以我现在想通了。答案是将子报表放入一个矩形中。然后将矩形的可见性设置为如下所示：

```
=IIF(First(Fields![SOMEFEILD].Value, "[SOMEDATASET]") IS NOTHING, TRUE, FALSE) 
```

`[SOMEDATASET]`以与填充子报表相同的方式填充数据集的位置在哪里。那么如果子报表为空，那么`[SOMEDATASET]`也将为空，更重要的是，该字段`[SOMEFEILD]`将等于`NOTHING`。

八大兵！一份没有浪费纸张的空白页面的报告。

注意：这种方法有一个不好的副作用，即 SQL 服务器将发送相同的信息两次，一次填充子报表的数据集，另一次填充报表中的重复数据集。对我来说，这是可以接受的，其他人可能想知道这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-13T15:48:46.643

该解决方案按预期对我有用，消除了子报告的超链接。在您指定子报告名称的部分的 «Action» 菜单中：

```
=iif(fields!SomfieldName.Value <> Nothing, "YourSubReportName",Nothing) 
```

简单易行的解决方案！

# java - 不同语言的内存管理是否足够相似以转移我的知识？

> ID：1006344
> 
> 赞同：4
> 
> 时间：2009-06-17T10:55:28.363
> 
> 标签：java, c++, c, objective-c, memory-management

我刚开始学习编程。到目前为止，我对 Objective-C 中的内存管理有所了解。学习它并不容易。

那么，出于好奇，C、C++、Java 等主要语言中使用的内存管理是否与我所学的类似？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-17T10:57:28.033

内存管理有两种不同的风格：非托管和托管。

非托管是程序员负责内存分配的 C/C++。

Managed 就像 Java/.Net，内存为您分配但由虚拟机清理（“垃圾收集”）。

在这两种口味中，您会发现许多变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T10:57:25.800

不，平台之间可能会有很大差异——即使在同一个平台内，也可能有各种不同的选项。（例如，在 C++ 中，您可以使用自动指针、Boehm GC 等）

请注意，Java 和 .NET 的内存管理*大多*相似。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-17T10:59:05.300

不，它是不同的。

在 Java 和 .NET 语言中，有涉及垃圾收集器的自动内存管理的概念。垃圾收集器的实现再次因语言和平台而异。

C/C++ 没有自动内存管理，程序员有责任自己管理内存。

简而言之，不同的语言是不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T16:14:07.350

内存管理方法因语言和平台而异，不仅在程序员的可见性和控制级别上，而且在实现上。

即便如此，当您深入到操作系统级别时，分配和取消分配内存的基础*大致相同。*当然存在差异、调整和优化，但通常程序员不必处理这些细节。

Objective-C 是一个有趣的混合体，因为该语言的 2.0 版添加了选择性垃圾收集，但也保留了使用引用计数（保留/释放/自动释放）的能力。事实上，相同的代码可以在任何一种模式下运行，具体取决于编译标志和同一进程中加载​​的其他代码的设置。这对于编程语言来说是非典型的——通常您会根据您编写的代码获得托管（自动）或非托管（手动），有时语言/平台根本不提供供您选择的方式（例如 Java）。

一种味道不一定比另一种更好，关于“真正的程序员[不]使用垃圾收集”是否仍然存在偶尔的宗教争论，但不要过分担心。各种内存管理方法如何不会伤害任何人的一般知识，并且通常了解您编码的语言的方法就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T11:48:51.377

天，

在各种语言中，您唯一可以说的与内存管理相似的是目标。即：

*   为进程提供固定的内存块，
*   保护该块之外的内存不被进程访问，
*   为变量/对象/函数/等提供动态分配机制。过程中，
*   确保这些项目的内存分配是在合理的边界上完成的，从处理器的角度来看是合理的，
*   提供一种根据需要释放内存的机制，
*   清理（​​垃圾收集）未使用的对象，
*   将碎片化的内存合并成连续的占用内存池，
*   等等

各种语言和运行时环境提供了至少实现其中一些特性的机制。

高温高压

干杯，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T10:58:11.650

我不知道在 Objective-C 中是如何管理内存的，但是 C 和 C++ 使用手动内存管理，而 Java 内置了垃圾收集，并且不允许手动内存管理。所以他们是非常不同的。

# java - 将我们的应用程序从 Java 版本 6 转换为 5，

> ID：1006352
> 
> 赞同：1
> 
> 时间：2009-06-17T10:57:41.713
> 
> 标签：java

是否有任何解决方案可以将在 netbeans IDE 6.5.1 中创建的 java'a 更高版本的应用程序转换为更低版本的 java 版本 5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T11:00:28.790

如果你有源代码，我假设你有，这可能容易或困难，具体取决于代码。

Java 6 对 Java 5 的语言更改很少。唯一想到的是您可以将 @Override 放在接口的实现上。

更大的问题是您是否使用任何 API 差异，其中有几个。我认为 JDBC 有一些主要差异，您可能会使用也可能不会使用。

这些问题或大或小。如果不了解您的应用程序，真的很难说。一般来说，虽然它们应该很小。

否则，您应该只能使用 Java 5 编译器重新编译它。

如果你没有源代码，它仍然是可行的，但你只需要先反汇编它，解决任何问题可能很乏味。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T11:00:42.363

您可以简单地尝试为 Java 5 重新编译它。由于版本 5 和 6 之间没有进行任何语言更改，如果您使用通过版本升级添加或增强的 API，您只会遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T11:02:51.873

如果您有源代码，则可以使用向后移植的库和代码重写。有一个名为 Retroweaver 的工具可以将 1.5 代码转换为 1.4，但我怀疑它适用于 6 到 5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T11:07:54.393

有一个选项可以告诉 Netbeans 使用非 Java 6 类生成 GUI。它记录在某处，抱歉我不记得了。我已经切换到 Netbeans 6.7 (RC3)。

还要检查 Desktop API、@Override 在实现接口方法等方面的用法。

在 CI 服务器（如 hudson）中使用 JDK5 构建是一个很好的做法。

# web - 这将被归类为搜索、登录或不同的东西？

> ID：1006359
> 
> 赞同：1
> 
> 时间：2009-06-17T10:59:13.740
> 
> 标签：web

一位客户问过我以前从未真正遇到过的事情，并想知道是否有人可以为我分类，以便我可以弄清楚如何设计它。

基本上他们想要一个用户在其中输入代码的框，该代码的第一部分将确定他们随后被发送到哪个页面。此页面不会有搜索结果，我将其视为带有链接的按钮的更复杂版本。

请问你能帮忙吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T11:46:39.010

您可以将其实现为表搜索。说桌子是这样的：

```
{"133"=>1, "147"=>1, "158"=>2, "342"=>3} 
```

这样代码 133 将用户发送到第 1 页，代码 147 - 也发送到第 1 页，代码 158 到第 2 页等。您的程序需要提取代码（例如从文本框中），在表，并将用户发送到正确的页面。

这在精神上类似于[Dispatch Table](http://en.wikipedia.org/wiki/Dispatch_table)。如果您指定首选的编程语言，我可能会找到更具体的信息。

# c++ - 最小的跨平台gui库？

> ID：1006364
> 
> 赞同：7
> 
> 时间：2009-06-17T11:00:06.250
> 
> 标签：c++, c, user-interface, frameworks

我正在寻找一个最小且易于学习的 C 或 C++ 跨平台 gui 库。

简而言之，我只需要以下功能：

*   应用程序窗口
*   菜单栏
*   一些简单的对话框，文件打开和保存。也许是用户编写的。
*   用户画布，我可以在其中画线和圆圈。
*   某种消息/事件循环机制。

目标平台是 Win32 和 linux。拥有 MacOS 会很不错，但目前并不重要。

为什么我要寻找最小的东西？我不想花太多时间为一个非常小的应用程序学习一个大而成熟的抽象系统。越简单越精简越好。

有什么建议么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-17T11:10:00.737

如果您需要一些小的东西，请尝试[FLTK](http://www.fltk.org/)库：我在工作中使用它们（嵌入式开发），我认为这是一个有效的选择。也许应用程序不像基于 QT 的应用程序那么“酷”，但是使用 FLTK 库进行开发既快速又简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-17T11:02:43.293

我不知道最小，但[Qt](http://qtsoftware.com/)很容易学习。

它的重量很轻，可以在嵌入式设备上运行，所以你来评判。

* * *

看到评论后编辑：

是的，Qt 是一个成熟的应用程序框架，但这是我的例子：一个具有跨平台 GUI 但其他平台相关代码的应用程序并不是真正的平台独立。我认为将现有的 C++ 代码移入 Qt 根本不需要任何工作。如果有的话，这将允许 Nils 使用他现有的 C++ 代码，并且仅将 Qt 用于 GUI。但当然，我假设现有的 C++ 代码是可移植的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-17T12:47:55.127

wxWidgets（以前称为 wxWindows）是一个小部件工具包，用于为跨平台应用程序创建图形用户界面 (GUI)。wxWidgets 使程序的 GUI 代码能够在几个计算机平台上编译和运行，而代码更改最少或无需更改。它涵盖了 Microsoft Windows、Mac OS X、Linux/Unix（X11、Motif 和 GTK+）、OpenVMS、OS/2 和 AmigaOS 等系统。嵌入式系统的版本正在开发中。

[http://www.wxwidgets.org/](http://www.wxwidgets.org/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-17T11:27:16.973

有关相关答案，请参阅[适用于 Windows 的 Good C++ GUI library 。](https://stackoverflow.com/questions/115045/good-c-gui-library-for-windows)

就个人而言，我会选择 Qt，因为它是开放的。您不一定想要一个*最小的*库，您想要一个*易于使用*的库，而高质量的文档和社区支持将为您提供。

小项目有一个令人讨厌的习惯，就是坚持和扩大范围——随着事情变得越来越多，你不想被一些没人知道的小库所困。

# internet-explorer - sIFR 3 r436 在 IE 中不稳定

> ID：1006366
> 
> 赞同：1
> 
> 时间：2009-06-17T11:00:36.060
> 
> 标签：internet-explorer, sifr

我的 sIFR 设置有问题。它在 IE 以外的所有其他浏览器中都能完美运行，并且在 IE 中它大部分时间都可以正常工作，但通常不是您第一次进入页面时。您必须刷新才能使其正常工作。当它不起作用时，它会用空白区域替换 webtext。不使用 position: absolute 任何地方，所以它不应该与此有任何关系。而且由于它有效，但不稳定，我更加茫然。

有人遇到过同样的问题吗？

-seltar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-19T06:55:21.443

通过在要替换的 h1 元素内添加跨度并链接到该跨度来修复

# caching - 缓存理论

> ID：1006376
> 
> 赞同：12
> 
> 时间：2009-06-17T11:03:47.957
> 
> 标签：caching, theory

有没有统一的缓存理论？也就是说，用于构造缓存和/或优化缓存的定理和算法的集合？

这个问题是故意宽泛的，因为我要寻找的结果也很宽泛。最大可实现加速的公式，缓存算法的指标，诸如此类。一本大学水平的教科书可能是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-22T22:26:37.567

绝大多数现实世界的缓存都涉及利用“80-20 规则”或[帕累托分布](http://en.wikipedia.org/wiki/Pareto_distribution)。请参阅下面的外观

![帕累托分布](../Images/cc114bfabd1574189a9ea1de0dbbb0f1.png)

这在应用程序中表现为：

*   大部分运行时都花在同一段代码中（使 CPU 上的代码缓存有效）
*   通常，当一个变量被访问时，它很快就会被再次访问（使 CPU 上的数据缓存有效）
*   当浏览器查找网站的主机名一次时，它会在不久的将来非常频繁地访问它（使 DNS 缓存有效）

因此，我会说“缓存理论”是只用掉一些通常“稀有”但“快速”的额外资源，以补偿您将要做的最活跃的重复性事情。

您这样做的原因是尝试根据上面高度倾斜的图表来“平衡”您执行“慢”操作的次数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-06T13:36:25.453

我与学校的一位教授交谈，他向我介绍了[在线算法](http://en.wikipedia.org/wiki/Online_algorithm)，这似乎是我正在寻找的主题。

缓存算法和页面替换算法之间有很多重叠。一旦我了解了有关该主题的更多信息，我可能会编辑这些主题的 WikiPedia 页面以澄清联系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T11:23:00.930

如果您可以假设缓存命中比缓存未命中快得多，您会发现超时，即使您只有缓存未命中，使用缓存仍将与不使用缓存一样快或更快。

请参阅下面的数学：

```
Number of hits = NumRequests - #CacheMisses

AverageTime = ((NumRequests-#CacheMisses) * TimePerHit + #CacheMisses * TimePerMiss)/NumRequests 
```

如果我们假设 NumRequests 是无穷大（这是一个极限问题，不要害怕微积分），我们可以看到：

```
AverageTime = Infinity*TimePerHit/Infinity - #CacheMisses*TimePerHit/Infinity + #CacheMisses*TimePerMiss/Infinity 
```

#CacheMisses 的两项都归零，但整个等式解析为：

```
AverageTime = TimePerHit 
```

当然，这适用于请求数量无穷大的情况，但您可以看到这将如何通过使用缓存轻松加速您的系统。

# javascript - 我应该使用 JSON 还是 AJAX 作为响应数据？

> ID：1006380
> 
> 赞同：8
> 
> 时间：2009-06-17T11:04:57.393
> 
> 标签：javascript, jquery, xml, ajax, json

为什么是 JSON？今天做了一些测试，无论是JSON，还是普通的AJAX请求的请求时间都是一样的。在“正常请求”中，我返回了完整的 text+html 标记，在 JSON 请求中，逻辑上我返回了“json 返回类型”，并使用客户端 JavaScript 创建了 HTML。

我不明白，为什么大型网站（谷歌阅读器等）甚至小型网站都使用 JSON？还是我不明白什么时候应该使用 JSON？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-06-17T11:08:18.027

你可能有点困惑。

JSON 和 AJAX 不是非此即彼的选择。

JSON 和 XML 是一种选择。

JSON 和 AJAX 是不同的，并且在很大程度上是不相关的，虽然 AJAX 经常使用 JSON，但它可以很容易地使用 XML、HTML 或纯文本。

还是您指的是 AJAX (XML) 中的 X？如果是这样，JSON 的参数基本上是：

*   JSON 的负载比同等的 XML 更小；和
*   JSON 在 Javascript 中更容易处理（比较评估 JSON 对象与遍历 XML 片段）。

除此之外，这主要是个人喜好。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-17T11:09:25.293

JSON 只是一种数据交换格式。它描述了数据在传输过程中以何种方式表示。您不能用 JSON 替换 Ajax。

Ajax 代表异步 JavaScript 和 XML，但是当使用 JSON 时，您可以说您正在使用 AJAJ（异步 JavaScript 和 JSON）。

也许您正在考虑 jQuery 方法[`$.getJSON()`](http://docs.jquery.com/Ajax/jQuery.getJSON)和[`$.get()`](http://docs.jquery.com/Ajax/jQuery.get#urldatacallbacktype)？

不同之处在于它会`$.getJSON()`自动假定它是 JSON 数据，而`$.get()`只会将数据作为纯文本获取。

使用时，`$.getJSON()`您还可以在域之间获取数据。

# winapi - 如何将 UINT64 转换为 2 个 DWORDS？

> ID：1006381
> 
> 赞同：1
> 
> 时间：2009-06-17T11:05:00.827
> 
> 标签：winapi, type-conversion

有没有有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T11:10:11.267

这就是你可以使用联合的东西：

```
union {
    UINT64 ui64;
    struct {
        DWORD d0;
        DWORD d1;
    } y;
} un;

un.ui64 = 27;
// Use un.y.d0 and un.y.d1 
```

一个例子（在 Linix 下使用不同的类型）：

```
#include <stdio.h>
union {
    long ui64;
    struct {
        int d0;
        int d1;
    } y;
} un;
int main (void) {
    un.ui64 = 27;
    printf ("%d %d\n", un.y.d0, un.y.d1);
    return 0;
} 
```

这会产生：

```
27 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-19T00:40:09.613

以为我会提供一个使用 LARGE_INTEGER FOR windows 平台的示例。如果我有一个名为“value”的 64 位变量，那么我会：

```
LARGE_INTEGER li;
li.QuadPart = value;
DWORD low = li.LowPart;
DWORD high = li.HighPart; 
```

是的，这复制了它，但我喜欢它的可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T12:33:23.440

请记住，在所有平台上，64 位整数的对齐限制至少与 32 位整数一样大。因此，将指向 64 位整数的指针转换为指向 32 位的指针是完全安全的。

```
ULONGLONG largeInt;
printf( "%u %u\n", ((DWORD *)&largeInt)[ 0 ], ((DWORD *)&largeInt)[ 1 ] ); 
```

显然，Pax 的解决方案要干净得多，但这在技术上更有效，因为它不需要任何数据复制。

# architecture - 使用 IBM Websphere、IBM Http Server、Load Balancer（或 Dispacher）构建场

> ID：1006383
> 
> 赞同：1
> 
> 时间：2009-06-17T11:05:07.987
> 
> 标签：architecture, websphere, web-architecture, ibmhttpserver

您是否知道网页或 pdf 或任何书籍来学习如何构建这些产品以创建农场？

此外，任何通用的 Web 应用程序场架构最佳实践资源都值得赞赏......

我想了解高度可用和可扩展的 Web 架构，尤其是使用 IBM 产品...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:11:04.170

查看 IBM 红皮书站点，也许是[WebSphere Application Server Network Deployment V6：高可用性解决方案](http://www.redbooks.ibm.com/abstracts/sg246688.html?Open)。

> IBM 红皮书出版物由 IBM 国际技术支持组织 (ITSO) 开发和出版。ITSO 为 IBM 技术专业人员、业务合作伙伴、客户和整个市场开发和提供技能、技术诀窍和材料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-29T16:22:56.443

今天早上我看到一篇有趣的文章 [1]，它讨论了如何在 WAS 中制作大型集群来处理极高的工作负载。

-瑞克

[1] [http://www.ibm.com/developerworks/websphere/techjournal/0906_banerjee/0906_banerjee.html](http://www.ibm.com/developerworks/websphere/techjournal/0906_banerjee/0906_banerjee.html)

# sql - SQL 执行计划显示大于表大小的“实际行数”

> ID：1006385
> 
> 赞同：6
> 
> 时间：2009-06-17T11:05:35.597
> 
> 标签：sql, sql-server, sql-execution-plan

我有一个相当复杂的连接的执行计划，它显示在“实际行数”读取〜70,000的表上执行索引搜索，而实际上表中总共只有〜600行（估计数行数仅为 127）。

请注意，所有统计信息都是最新的，查询的输入参数与编译 proc 时输入的参数完全相同。

为什么实际行数这么高，“实际行数”这个数字到底是什么意思？

我唯一的理论是大量的行与嵌套循环有关，并且这个索引搜索被执行了多次——“实际行数”实际上代表了所有执行的总行数。如果是这种情况，估计的行数是否也意味着所有执行的总行数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-17T12:24:43.193

**ActualRows**计算在物理运算符上调用**GetNext()**的次数。

您还应该查看[ActualRebinds、ActualRewinds 和 ActualEndOfScans](http://technet.microsoft.com/en-us/library/ms191158.aspx)以了解重新评估内部循环的次数：

> 重新**绑定**意味着连接的一个或多个相关参数已更改，并且必须重新评估内侧。**倒带**意味着没有任何相关参数发生变化，并且可以重用先前的内部结果集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T12:02:52.237

实际行数值是执行计划中该节点的所有处理值的结果。所以是的，它考虑了嵌套循环连接。

# opengl - 权限被拒绝在 Linux 上运行我自己的程序？

> ID：1006386
> 
> 赞同：8
> 
> 时间：2009-06-17T11:05:42.960
> 
> 标签：opengl, permission-denied, ubuntu-9.04

我有 Ubuntu 9.4。我已经构建了程序，一些基本的 OpenGL。该程序只是制作一个旋转正方形。然后运行它并：

```
sh: /blabla permission denied. 
```

一个空的`main`不起作用：

```
int main()
{
    return 0;
} 
```

我怎样才能让它消失？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-02-17T10:42:09.987

我有同样的问题，似乎我的分区被挂载为 noexec cat /etc/mtab

当我在 /etc/fstab 中配置选项时，我写了 exec,user 但似乎“user”选项默认设置为“noexec”。当我将这两个的顺序更改为 user,exec 时，一切恢复正常！

希望能帮助到你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-17T11:16:20.380

你是怎么编译的？你可以发布makefile吗？如果你跑

```
chmod +x myPorgram
./myProgram 
```

有什么变化？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-17T16:49:38.443

通过运行“mount”检查挂载点是否挂载为 noexec

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-31T17:42:30.357

我在 Ubuntu 上使用 CodeBlocks 并且多次遇到这个问题。KermiDT 所说的正是解决方案（如果我有足够的代表点，我会投票赞成）
“用户”选项默认设置为“noexec”。
所以在 /etc/fstab 中只需在用户之后添加 ,exec 。即我的看起来像这样：
`/dev/sda6 /media/DATA vfat uid=kenny,gid=kenny,users,user,exec 0 0`
虽然，间距有点偏离......但你明白了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T11:10:12.437

几个问题：

1.  文件的权限设置是否正确？
2.  任何解释器的路径是否设置正确？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T11:20:08.127

除了上面提到的 chmod +x 文件之外，另一个问题可能是缺少库。要检查所需的库，请使用 ldd：

```
$ ldd /bin/sh
    linux-vdso.so.1 =>  (0x00007fffb43fe000)
    libc.so.6 => /lib/libc.so.6 (0x00007fc4abe11000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fc4ac183000) 
```

如果其中一行显示缺少库，您将知道在运行程序之前需要安装什么。

另一种可能性是如果您的程序是脚本（shell、perl、python 或其他基于文本的程序）。第一行看起来像：

```
#!/usr/bin/perl 
```

如果找不到该文件，您将收到权限被拒绝错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-02-10T21:51:42.673

尝试在 64 位系统上执行 32 位应用程序时也会遇到此问题。执行：

```
a. file (executable name)
b. uname -a 
```

并检查两者是“i386”还是“amd64”。

如果它们不一样，请查看[这篇文章](http://www.markusbe.com/2009/09/about-running-32-bit-programs-on-64-bit-ubuntu-and-shared-libraries/#comment-279)：

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-17T11:49:31.670

尝试执行该命令[`strace`](http://linux.die.net/man/1/strace)以跟踪它进行的成功系统调用以及它停止的位置。

这就是你可以启动它的方式，

```
strace ./blabla 
```

您是否收到“权限被拒绝”错误或“执行格式错误”之类的错误？在**`chmod +rx`**文件上，您不应该点击“权限被拒绝”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-17T16:47:57.197

您还应该确保您的用户名在视频组中。检查 /etc/group 并确保您的用户名出现在“视频”行。

# java - DWR的缺点是什么？

> ID：1006387
> 
> 赞同：12
> 
> 时间：2009-06-17T11:06:01.120
> 
> 标签：java, javascript, ajax, request, dwr

在内网使用 DWR 时，会不会出现性能或安全问题等劣势？Direct Web Remoting 是一种使用 Ajax 请求从 js 文件联系服务器的工具。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-17T12:14:11.497

我要注意的一件事是，与（正常）全页 HTTP 交付相比，您的服务器很可能会受到更多 HTTP 请求的攻击。

让我解释。当您的网页启用 AJAX 时，您的客户端最终会创建更多 HTTP 请求以用于（例如）表单填充、页面片段重新生成等。我见过开发人员疯狂 AJAX 并让网页成为主要是动态文档。这会带来出色的用户体验（如果做得好），但每个请求都会导致服务器命中，从而导致可伸缩性和延迟问题。

注意 - 这不是 DWR 特有的，而是 AJAX 问题。我用过 DWR，效果很好。不幸的是，我发现它运行得非常好，而且非常容易，以至于所有东西都成为远程处理的候选对象，你最终可能会收到*大量*的小请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T12:20:25.480

我使用 DWR 进行了一个项目 - 一个非常好的工具。

不过，我不相信发展的速度。他们确实[在开发日志上](http://directwebremoting.org/dwr/devlog/index.html)发布了他们正在努力推出 3.0，但最后一个稳定版本 - 2.0 - 于 2006 年夏天发布。从支持的角度来看，这有点令人担忧 - 特别是错误修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T13:20:20.287

我遇到的主要问题是尝试在系统上编写负载测试脚本，其中主要工作是通过 DWR 调用完成的。与仅回复一堆带有更改参数的 url 相比，调用的格式很难复制。

尽管如此，DWR 仍然是一个出色的框架，它使实现 Javascript -> Java RPC 非常容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-05T09:50:39.840

当前 DWR 3.x 缺少一个任何用户都应该注意的特性是，当 bean 的实例具有 NULL 值的属性时，这些属性仍将被注入 JSON，并且这些冗余数据确实会影响性能。

当属性值为 NULL 时，通常不应将其发送到前端。

问题详情： http: [//dwr.2114559.n2.nabble.com/Creating-Custom-bean-converter-td6178318.html](http://dwr.2114559.n2.nabble.com/Creating-Custom-bean-converter-td6178318.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T17:48:39.773

DWR is a great tool when your site has a lot of ajax calls.

Each page that makes dwr rpc calls needs to include :

a) an interface file corresponding to the calls being made. and b) a js file bundled with dwr that contains the dwr engine code that makes these calls possible. for e.g. `<script src="/dwr/engine.js" ></script>`

one technique that is frequently used while optimizing web applications is to use the browser cache as much as possible when a resource(like a js file) has not changed on a server.

engine.js is something that will never change unless you upgrade your dwr to a newer version. But, by default, engine.js is not a static file served by your webserver. its bundled as part of the dwr tool itsef and is served by the dwr controller/servlet.this doesnt aid client side caching.

So, it is beneficial to save engine.js under the document root of your webserver and let the webserver serve it as a static file.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-08T07:59:27.560

传输对象（编组）的其他解决方案之间的最大区别是对象引用。

例如，如果您使用它来传输树：

一个

|-B

|-C

在列表 {A,B,C} 中：

B.parent = A C.parent = A

那么 A 就是 Javascrit 中的同一个对象！

不利的一面是，如果您有具有循环依赖关系和大量对象的复杂结构：A<-B、B<-C、C<-B、C<.A,... 它可能会崩溃。

无论如何，我在一个由数百家公司在生产中使用的实际项目中使用它来将数千个对象传输到单个 html 页面以绘制复杂的图形，并且它工作得很好，性能也很好。

# drag-and-drop - 在 View 和 Editor 中定义 DropTarget 有区别吗？

> ID：1006390
> 
> 赞同：1
> 
> 时间：2009-06-17T11:07:37.387
> 
> 标签：drag-and-drop, eclipse-plugin, eclipse-rcp

代码是：

```
 DropTarget target = new DropTarget(sqlViewer.getTextWidget(), 
    DND.DROP_DEFAULT | DND.DROP_COPY | DND.DROP_MOVE | DND.DROP_LINK);
    Transfer[] types = new Transfer[] {TreeLeafListTransfer.getInstance(), 
    TextTransfer.getInstance(), FileTransfer.getInstance()};
    target.setTransfer(types);
    target.addDropListener(new DropTreeLeafAdapter(sqlViewer)); 
```

它在视图中正常工作，但在编辑器中失败。有什么不同？
**upd**：最奇怪的是——如果我用 try/catch 块包围它，它仍然毫无例外地失败。
**编辑**：问题不仅仅是 DnD 不起作用。由于这个块，整个编辑器无法实例化。只出现一个空窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T20:50:07.630

> 它在视图中正常工作，但在编辑器中失败。有什么不同？

区别应该在于**[transfert 类型](http://www.eclipse.org/articles/Article-Workbench-DND/drag_drop.html)**：

> 回顾一下，传输类型允许拖动源指定它们允许从其小部件中拖出的对象类型，并且它们允许放置目标指定它们愿意接收的对象类型。
> 对于每种传输类型，都有一个`org.eclipse.swt.dnd.Transfer`. 这些子类实现了在对象和字节之间转换的编组行为，允许在应用程序之间进行拖放传输。

可能是您使用的传输类型列表与目标（编辑器）不太兼容？有关此问题的更多测试，请参[见此线程](http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg36844.html)。

另一个要考虑的项目是 a 的正确设置`TransferDropTargetListener`（就像在[这个线程](http://dev.eclipse.org/newslists/news.eclipse.tools.gef/msg01421.html)中一样）。

因为我还没有完全测试过 eclipse DnD，所以我不能给你更多关于这个话题的细节，但希望这会给你一些东西来开始你自己的分析。

# java - 在 Java 中迭代数组的最快方法：循环变量与增强的 for 语句

> ID：1006395
> 
> 赞同：32
> 
> 时间：2009-06-17T11:09:07.853
> 
> 标签：java, performance, iteration

在Java中，以老式方式遍历数组是否更快，

```
for (int i = 0; i < a.length; i++)
    f(a[i]); 
```

或者使用更简洁的形式，

```
for (Foo foo : a)
    f(foo); 
```

对于 ArrayList，答案是否相同？

当然，对于大量的应用程序代码，答案是它没有明显的区别，因此应该使用更简洁的形式以提高可读性。但是，我正在查看的上下文是重型技术计算，必须执行数十亿次的操作，因此即使是微小的速度差异最终也可能很重要。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-06-17T11:17:59.723

如果您正在遍历一个数组，那没关系 - 增强的 for 循环无论如何都使用数组访问。

例如，考虑以下代码：

```
public static void main(String[] args)
{
    for (String x : args)
    {
        System.out.println(x);
    }
} 
```

`javap -c Test`当用我们反编译时（对于`main`方法）：

```
public static void main(java.lang.String[]);
  Code:
   0:   aload_0
   1:   astore_1
   2:   aload_1
   3:   arraylength
   4:   istore_2
   5:   iconst_0
   6:   istore_3
   7:   iload_3
   8:   iload_2
   9:   if_icmpge   31
   12:  aload_1
   13:  iload_3
   14:  aaload
   15:  astore  4
   17:  getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;
   20:  aload   4
   22:  invokevirtual   #3; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   25:  iinc    3, 1
   28:  goto    7
   31:  return 
```

现在将其更改为使用显式数组访问：

```
public static void main(String[] args)
{
    for (int i = 0; i < args.length; i++)
    {
        System.out.println(args[i]);
    }
} 
```

这反编译为：

```
public static void main(java.lang.String[]);
  Code:
   0:   iconst_0
   1:   istore_1
   2:   iload_1
   3:   aload_0
   4:   arraylength
   5:   if_icmpge   23
   8:   getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;
   11:  aload_0
   12:  iload_1
   13:  aaload
   14:  invokevirtual   #3; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   17:  iinc    1, 1
   20:  goto    2
   23:  return 
```

增强的 for 循环中有更多设置代码，但它们基本上在做同样的事情。不涉及迭代器。此外，我希望他们能够 JITted 到更多类似的代码。

*建议：如果您真的*认为它可能会产生重大影响（只有在循环体绝对很小的情况下才会这样做），那么您应该用您的实际应用程序对其进行基准测试。这是唯一重要的情况。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-06-17T11:12:03.527

这完全属于[微优化](http://www.codinghorror.com/blog/archives/000185.html)领域。真的没关系。从风格上讲，我总是更喜欢第二种，因为它更简洁，除非你需要循环计数器来做其他事情。这*比这种微优化更重要*：可读性。

话虽这么说，对于 ArrayList 不会有太大区别，但 LinkedList 与第二个相比效率更高。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-17T11:12:47.503

测量它。所有性能问题的答案可能取决于 VM 版本、处理器、内存速度、缓存等。因此您必须针对您的特定平台对其进行测量。

我个人更喜欢第二种变体，因为意图更清楚。如果性能成为问题，我无论如何都可以稍后对其进行优化——如果该代码对整个应用程序的性能真的很重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T10:08:20.260

对于链表：

```
for(ClassOfElement element : listOfElements) {
  System.out.println(element.getValue());
} 
```

之前有人回答：

[for 循环和 for-each 循环之间是否存在性能差异？](https://stackoverflow.com/questions/256859/is-there-a-performance-difference-between-a-for-loop-and-a-for-each-loop)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T11:17:25.013

在数组或 RandomAccess 集合上，您可以通过以下方式稍微提高速度：

```
List<Object> list = new ArrayList<Object>();

for (int i=0, d=list.size(); i<d; i++) {
    something(list.get(i));
} 
```

但我一般不会担心。像这样的优化不会对您的代码产生超过 0.1% 的影响。尝试使用*-prof*调用 java以查看您的代码实际花费的时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T11:23:06.560

更快的是使用 fork-join 框架的 ParallelArray（如果你有足够大的数据集）。

# erlang - Nginx 反向代理到自定义 Mochiweb 应用程序

> ID：1006400
> 
> 赞同：4
> 
> 时间：2009-06-17T11:10:10.190
> 
> 标签：erlang, nginx, reverse-proxy

我将 Nginx 作为我的前端 Web 服务器，监听端口 80。对于某些请求，我设置了 nginx 以将其反向代理到我编写的基于 mochiweb 的 Web 服务器，监听端口 8000。我的 nginx 配置为这看起来像这样：

```
location /mymochiserver {

            proxy_pass         http://127.0.0.1:8000;
            proxy_redirect     off;

            proxy_set_header   Host             $host;
            proxy_set_header   X-Real-IP        $remote_addr;
            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;

            client_max_body_size       10m;
            client_body_buffer_size    128k;

            proxy_connect_timeout      90;
            proxy_send_timeout         90;
            proxy_read_timeout         90;

            proxy_buffer_size          4k;
            proxy_buffers              4 32k;
            proxy_busy_buffers_size    64k;
            proxy_temp_file_write_size 64k;
        } 
```

现在，当我访问 URL [http://localhost/mymochiserver](http://localhost/mymochiserver)时，我在浏览器上看不到响应。浏览器只是说“等待本地主机”。mymochiserver 将一些跟踪打印到运行它的终端窗口，无论何时用户连接到它，现在，我确实看到了我打开以连接此 URL 的每个浏览器窗口的跟踪。但我没有看到任何我希望看到的输出被写入浏览器。但是，当我直接访问 URL [http://127.0.0.1:8000/](http://127.0.0.1:8000/)时，一切正常，我在浏览器上看到了 mymochiserver 的输出。所以它在直接调用时有效。但是当通过 nginx 反向代理时，它似乎不起作用。知道有什么问题吗？

* * *

更新：在我的 Mochiweb 应用程序中，我有这些代码行：

```
Socket = Req:get(socket),
inet:setopts(Socket, [{active, once}]),
proc_lib:hibernate(?MODULE, feed, [Response, Userid, 1]); 
```

它基本上是一个 COMET 应用程序，用户将连接到 mymochiserver，服务器将数据推送到所有连接的客户端。如果没有要从服务器发送的数据，我会休眠该进程。然后当我醒来时，我调用 feed 函数来发送数据。如果我删除休眠代码，一切正常，我会在浏览器中看到输出。但是，如果我休眠，它就不起作用。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T13:06:08.397

固定的！

参考：[http ://timanovsky.wordpress.com/2009/01/09/toward-a-million-user-long-poll-http-application-nginx-erlang-mochiweb/](http://timanovsky.wordpress.com/2009/01/09/toward-a-million-user-long-poll-http-application-nginx-erlang-mochiweb/)

我不得不关闭代理缓冲并增加 nginx 中的 proxy_read_timeout 以使其工作。所以我的配置文件现在看起来像这样：

```
location /mymochiapp {
            proxy_pass         http://127.0.0.1:8000;
            proxy_redirect     off;

            proxy_set_header   Host             $host;
            proxy_set_header   X-Real-IP        $remote_addr;
            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;

            client_max_body_size       10m;
            client_body_buffer_size    128k;

            proxy_connect_timeout      90;
            proxy_send_timeout         90;
            proxy_read_timeout         3600;

            proxy_buffering off;
        } 
```

感谢 thomas55 指出答案！

# git - 在 Windows 上使用 git 和 Emacs eshell 模式时出现问题

> ID：1006403
> 
> 赞同：6
> 
> 时间：2009-06-17T11:10:33.967
> 
> 标签：git, emacs, eshell

当我尝试在 emacs eshell 模式下进行 git 提交时：

```
git commit -a -m "消息"

```

我收到一个错误：

```
'c:\Program' 未被识别为内部或外部命令，
可运行的程序或批处理文件。  

```

同时这个问题在 emacs shell 模式下不存在。如何强制 eshell 与 git 一起正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T11:58:33.883

这似乎是您要执行的程序的目录名称中的空格问题；这个空格似乎没有正确转义。

例如，如果您要执行的是“C:\Program Files\git\git.exe commit ...”，那么第一个空格需要转义，或者整个路径名用引号括起来，否则这一行将是解析为标记“C:\Program”、“Files\git\git.exe”、“...”，第一个标记是要执行的命令。

第一个解决方法是手动扩展全名并将其括在引号中，例如：

```
"C:\Program Files\git\git.exe" commit ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-04-08T11:26:41.563

有一个类似的问题，这是针对**magit**的，（在 MacOS 上）。在您的 emacs 启动文件中添加以下内容：

```
(add-to-list 'exec-path "/usr/local/git/bin")
(setq magit-git-executable "/usr/local/git/bin/git") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T13:24:37.377

不知道 git 和 emacs 的具体情况，但是对于其他应用程序，我可以在你的 PATH中`Program Files`替换它。`Progra~1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T13:04:42.520

我遇到了同样的问题，并通过更改 PATH 使 git.exe (in `c:\Program Files\Git\bin`) 出现在 git.cmd (in `c:\program files\git\cmd`，IIRC) 之前“解决”了它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-06-17T14:22:04.750

呃，eshell 和 git？为什么？

只需使用 magit 从 emacs 调用 git；它比命令行界面丰富得多。

# c# - (C#) 如何用 Tahoma 绘制高度 = 6 的“a”

> ID：1006408
> 
> 赞同：3
> 
> 时间：2009-06-17T11:11:51.077
> 
> 标签：c#, vb.net, fonts, gdi+, system.drawing

我一直在尝试这样做，但由于某种原因，这只是给了我奇怪的结果：

```
int bpp = Screen.PrimaryScreen.BitsPerPixel;
string fontName = "Tahoma";
Font font = new Font(fontName, 10 * bpp, GraphicsUnit.Point);
Bitmap bm = new Bitmap(20 * bpp, 20 * bpp);
Graphics g = Graphics.FromImage(bm);
TextRenderer.DrawText(g, "a", font, new Rectangle(0, 0, 5 * bpp, 6 * bpp), Color.Black);
g.Flush();
pictureBox1.Image = bm; 
```

我在这里做错了什么？我没有看到任何印在图片上的东西。如果我删除所有 bpp 引用，我可以看到它，但它非常小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T11:19:07.163

您知道[`BitsPerPixel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.bitsperpixel.aspx)描述颜色深度（用于描述像素颜色的内存位数），与分辨率无关吗？

我假设您想要做的是以与分辨率相关的大小绘制文本，您可以通过引用对象的[`DpiX`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.bitsperpixel.aspx)和[`DpiY`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.dpiy.aspx)属性来做到这一点[`Graphics`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)。

**更新**

我不确定您是否需要为此计算 Dpi。您需要做的就是创建一个 Rectangle 来定义所需的文本大小，然后计算正确的字体大小以使文本适合矩形。以下是这样做的（但最大化垂直和水平方向的文本大小）。它可能会为您提供一些解决问题的建议：

```
Bitmap bm = new Bitmap(50, 50);
using (Font font = new Font(fontName, 10, GraphicsUnit.Point))
using (Graphics g = Graphics.FromImage(bm))
{
    g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
    StringFormat stringFormat = new StringFormat()
    {
        Alignment = StringAlignment.Center,
        LineAlignment = StringAlignment.Near
    };
    Rectangle rect = new Rectangle(0, 0, bm.Width, bm.Height);
    // measure how large the text is on the Graphics object with the current font size
    SizeF s = g.MeasureString(text, font);
    // calculate how to scale the font to make the text fit
    float fontScale = Math.Max(s.Width / rect.Width, s.Height / rect.Height);
    using (Font fontForDrawing = new Font(font.FontFamily, font.SizeInPoints / fontScale, GraphicsUnit.Point))
    {
        g.DrawString(text, fontForDrawing, Brushes.Black, rect, stringFormat);
    }

} 
```

如果你想用给定的磅值打印文本，你不需要去测量；只需设置字体大小：

```
Bitmap bm = new Bitmap(20, 20);
using (Font font = new Font(fontName, 6, GraphicsUnit.Point))
using (Graphics g = Graphics.FromImage(bm))
{
    g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
    StringFormat stringFormat = new StringFormat()
    {
        Alignment = StringAlignment.Center,
        LineAlignment = StringAlignment.Near
    };
    Rectangle rect = new Rectangle(0, 0, bm.Width, bm.Height);
    g.DrawString(text, font, Brushes.Black, rect, stringFormat);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:56:44.330

“a”很小有两个主要原因：

字体的高度是使用磅值来衡量的（它是 1/72 英寸，与像素数完全不同，因为不同的计算机屏幕每英寸的像素数不同）。

字体高度是从一行文本的顶部到底部测量的。由于一些字母有上升（“h”中的高条）而其他字母有下降（“g”的悬空位），“a”将仅占据字体高度的三分之一左右。

如果您希望“a”填充图像，则需要将其绘制成一个更大的矩形并“剪掉”“a”上方和下方的空白区域。如果您不太担心不同计算机上的屏幕 DPI，那么您可以进行试验，直到找到合适的字体大小（和绘制位置）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T11:23:56.870

我会尝试：

```
int ImgQual = 600;

int Width = 50;

int Height = 50;

Font TextFont = New Font("Tahoma", 14, FontStyle.Bold)

Bitmap bmp = New Bitmap(Width, Height);

bmp.SetResolution(ImgQual, ImgQual);

System.Drawing.Graphics g = Graphics.FromImage(bmp);

System.Drawing.StringFormat sf = New System.Drawing.StringFormat();

sf.Alignment = StringAlignment.Center;

g.DrawString("a", NumberTextFont, Brushes.Black, New RectangleF(0, 0, Width, Height), sf);

return bmp; 
```

# xml - C# Regex.Replace 方法的 XML 等效项是什么？

> ID：1006411
> 
> 赞同：0
> 
> 时间：2009-06-17T11:12:41.417
> 
> 标签：xml, regex

我正在验证电话号码文本框。我想首先从输入的值中去除不必要的字符，然后验证字符数不大于或小于 11。我知道如何在 C# 代码中执行此操作。不幸的是，我现在需要在 XML 文档中执行此操作。验证更正数据的长度不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T11:14:16.003

从包含电话号码的属性或元素的值中提取电话号码的值后，对电话号码使用 RegEx.Replace。然后将编辑后的值放回去。

# vb.net - 自定义 Generic.IEqualityComparer(Of T) - 编译器错误

> ID：1006417
> 
> 赞同：6
> 
> 时间：2009-06-17T11:15:52.207
> 
> 标签：vb.net, linq, compiler-warnings, iequalitycomparer

我正在尝试实现一个简单的 IEqulityComparer 以与 LINQ 集合一起使用。为了讨论目的，我编写了以下代码，将其简化为最简单的形式...

```
Public Structure bob
    Dim SiteID As Integer
    Dim fred As String
End Structure

Public Class insCompare
    Implements System.Collections.Generic.IEqualityComparer(Of bob)

    Public Function Equals(ByVal x As bob, ByVal y As bob) As Boolean
        Return IIf(x.SiteID = y.SiteID, True, False)

    End Function

    Public Function GetHashCode(ByVal x As bob) As Integer
        Return x.SiteID.GetHashCode()

    End Function

End Class 
```

我遇到的问题是这两个函数都会引发编译器警告“函数'getHashCode'（或'Equals'）在基类'Object'中隐藏了一个可覆盖的方法。要覆盖基类方法，该方法必须声明为'Overrides ’。”

但是，如果我将它们声明为覆盖，我会收到错误“函数'GetHashCode'不能被声明覆盖，因为它没有覆盖基类中的函数。”！！

我还在“Implements”行收到编译器错误，大意是我必须实现“getHashCode”，但我认为这是第一个问题的结果。

我所有的研究表明我应该没事 - 请问有人有任何线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T19:50:19.850

这是对该问题的较晚答案，但根据文档，您可以使用以下内容。请注意包含 Overloads 关键字。

```
Public Class MyModelComparer
    Implements Generic.IEqualityComparer(Of MyModel)

    Public Overloads Function Equals(x As MyModel, y As MyModel) As Boolean Implements System.Collections.Generic.IEqualityComparer(Of MyModel).Equals
       ' do compare
    End Function

    Public Overloads Function GetHashCode(obj As MyModel) As Integer Implements System.Collections.Generic.IEqualityComparer(Of MyModel).GetHashCode
       ' do hashcode
    End Function

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-25T07:46:18.180

我遇到了同样的问题。我正在将我的 C# 代码转换为 VB.Net；即使添加工具也无济于事；使用影子或重载可以消除所有警告和错误。我想知道这两种情况下的行为有什么不同。如果我指定 Overrides，我会收到错误消息。不指定任何（覆盖、重载、阴影）都会发出警告。

```
' <summary>
' Pair Comparator for maintaining uniquness in results.
' </summary>
Public Class PairComparer
    Implements IEqualityComparer(Of Pair)
    Public Shadows Function Equals(ByVal x As Pair, ByVal y As Pair) As Boolean Implements System.Collections.Generic.IEqualityComparer(Of Pair).Equals

        If x.first = y.first AndAlso x.second = y.second Then
            Equals = True
        ElseIf x.first = y.second AndAlso x.second = y.first Then
            Equals = True
        Else
            Equals = False
        End If
    End Function

    Public Overloads Function GetHashCode(ByVal obj As Pair) As Integer Implements System.Collections.Generic.IEqualityComparer(Of Pair).GetHashCode
        GetHashCode = obj.first + obj.second
    End Function
End Class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T12:13:23.807

好的，它似乎可以通过重命名函数并将它们声明为“实现”来进行排序，尽管我在 Web 上看到了几十个例子，但情况并非如此。但是，我现在得到一个运行时异常，我将单独发布。

```
Public Class insCompare
    Implements System.Collections.Generic.IEqualityComparer(Of Object)

    Public Function Equals1(ByVal x As Object, ByVal y As Object) As Boolean Implements System.Collections.Generic.IEqualityComparer(Of Object).Equals
        Return IIf(x.SiteID = y.SiteID, True, False)

    End Function

    Public Function GetHashCode1(ByVal x As Object) As Integer Implements System.Collections.Generic.IEqualityComparer(Of Object).GetHashCode
        Return x.SiteID.ToString.ToLower.GetHashCode()

    End Function

End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T12:29:59.250

您收到编译器错误是因为您使用的是 VB.NET，而不是 C#。在 C# 中，具有与您需要实现的接口方法具有相同签名的方法会使编译器自动为您连接它。

VB.NET 要求您明确地实现说明正在实现的方法。您可以使用相同的名称（鼓励使用），您只需要使用“implements”子句即可。

# .net - 字典找不到使用 F# 时放入的键

> ID：1006426
> 
> 赞同：0
> 
> 时间：2009-06-17T11:18:27.180
> 
> 标签：.net, f#

好的，这让我发疯了。这段代码怎么可能不起作用？

```
open System.Collections.Generic
type testing (a:int)=
    let test = [Empty]
    member p.GetHashCode =
        fun () -> printfn "called hash";0

    override p.Equals(other:obj) =
        printfn "called equals"
        true
    interface IEquatable<testing> with
        override p.Equals(other:testing) =
            true
    static member op_Equality (other:obj) = printfn "called op" ;true   
let dict2 = new Dictionary<testing,int>()
dict2.[(testing 50)] <- 50
dict2.[(testing 50)] 
```

该片段在尝试从字典中提取并且不调用任何提供的方法时死亡。我今天只是疯了还是这里有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T11:20:43.353

您没有使用`override`修饰符`p.GetHashCode`（与 不同`p.Equals`）。我的 F#-fu 不足，但这对我来说听起来是件坏事。它会打印出“称为哈希”吗？如果不是，那将是原因，我强烈怀疑...

# excel - Excel 2007 VBA 文件搜索丢失

> ID：1006429
> 
> 赞同：2
> 
> 时间：2009-06-17T11:18:47.617
> 
> 标签：excel, vba

Excel 2007 中的 FileSearch 对象发生了一些事情。在文档中，据说 FileSearch 被隐藏了。这是否意味着再也无法使用 Excel VBA 搜索文件了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T11:34:32.623

您仍然可以使用 Dir 功能进行搜索 - 如果您搜索“excel 2007 vba 文件搜索”，网络上有很多示例，例如[这篇文章](http://www.ozgrid.com/forum/showpost.php?p=369573&postcount=4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T11:46:42.737

我将添加对 Microsoft Scripting Runtime 库的引用。这使您可以访问 FileSystemObject，这使您可以很容易地测试文件的存在和/或遍历目录，进行自己的搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T16:55:38.863

如果要搜索自定义文档属性，目前没有办法。您必须使用 Dir 缩小搜索范围并单独打开每一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-10-24T22:25:53.247

正如史蒂夫所说，您可以使用 FSO 对象使用给定的根路径和过滤器表达式搜索文件。有很好的文档可用于通过扩展进行拟合（请记住包含您想要的扩展或按*.xls*过滤）和使用 FSO 对象模型中的对象。

有关 FileSearch 方法折旧的解释（由 msft 提供）。见 - [http://support.microsoft.com/kb/920229](http://support.microsoft.com/kb/920229)

有关使用 FSO 使用 FSO 递归搜索一组目录的基本模式，请参阅 - [http://support.microsoft.com/kb/185601](http://support.microsoft.com/kb/185601/)

如果您想取回工作簿的路径，您仍然可以使用 Application.GetOpenFilename。

# html - 将 HTML 转换为 JSF

> ID：1006432
> 
> 赞同：3
> 
> 时间：2009-06-17T11:20:05.897
> 
> 标签：html, jsf

我有一个无序列表导航，我想将其转换为 JSF 代码。实际上，没有JSF标签..

这是原始 HTML 导航：

```
<ul id="navbar">
<li id="articles"><a href="Link1">Articles</a></li>
<li id="topics"><a href="Link2" title="Topics">Topics</a></li>
....
</ul> 
```

..所以我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T15:03:38.380

进行临时模板的一种方法是使用[Facelets](https://facelets.dev.java.net/)而不是 JSP。由于这些已经成为 JSF 2.0 的一部分（由于 JEE6），我认为现在是考虑它们的好时机。

例如，对于豆类：

```
public class LiBean implements Serializable {

  private static final long serialVersionUID = 1L;

  private String href;
  private String title;

  public String getHref() { return href; }

  public void setHref(String href) { this.href = href; }

  public String getTitle() { return title; }

  public void setTitle(String title) { this.title = title; }

} 
```

...和：

```
public class UlBean implements Serializable {

  private static final long serialVersionUID = 1L;

  private final List<LiBean> listItems = new ArrayList<LiBean>();

  public UlBean() {
    String[] links = { "http://www.sun.com", "Sun",
        "http://www.oracle.com", "Oracle",
        "http://www.ibm.com", "IBM",
        "http://stackoverflow.com",
        "<stackoverflow.com> & encoded output" };
    for (int i = 0; i < links.length; i++) {
      LiBean item = new LiBean();
      item.setHref(links[i]);
      item.setTitle(links[++i]);
      listItems.add(item);
    }
  }

  public List<LiBean> getListItems() {
    return listItems;
  }

} 
```

...在会话范围内定义：

```
 <managed-bean>
    <managed-bean-name>ulBean</managed-bean-name>
    <managed-bean-class>beans.UlBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
  </managed-bean> 
```

...可以在这个 Facelet 页面中使用：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>repeat</title>
</head>
<body>
<ul>
  <ui:repeat value="#{ulBean.listItems}" var="item">
    <li><a href="#{item.href}"><h:outputText
      value="#{item.title}" /></a></li>
  </ui:repeat>
</ul>
</body>
</html> 
```

...产生这个输出：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>repeat</title>
</head>
<body>
<ul>
    <li><a href="http://www.sun.com">Sun</a></li>
    <li><a href="http://www.oracle.com">Oracle</a></li>
    <li><a href="http://www.ibm.com">IBM</a></li>
    <li><a href="http://stackoverflow.com">&lt;stackoverflow.com&gt; &amp; encoded output</a></li>
</ul>
</body>
</html> 
```

* * *

如果您坚持使用 JSP，那么核心实现中没有任何东西可以让您这样做（唯一的重复控件是*dataTable*）。[您可能会在第 3 方组件库](http://www.jsfmatrix.net/)之一中找到一些东西。

# javascript - 特别是不要替换某些文本 - 不工作

> ID：1006434
> 
> 赞同：1
> 
> 时间：2009-06-17T11:20:13.383
> 
> 标签：javascript, sifr

首先，我使用的是 sIFR3、r419（我无法升级，因为我无法访问闪存......）。我有一个网页，我用 sIFR 替换了所有现有的 H1、H2 和 H3 - 这就像一个魅力。但我想使用 YUI 富文本编辑器。该编辑器的问题是它还在工具栏中使用了 H1、H2 和 H3。这两件事结合起来是，嗯，很丑:) 整个编辑器都在一个带有“yui-skin-sam”类的 div 中。我在我的 sifr-config.js 顶部添加了来自 sIFR 的 WIKI 的建议代码：

```
parseSelector.pseudoClasses = {
'not': function(nodes, selector) {
var result = [];
each: for(var i = 0, node; i < nodes.length; i++) {
  node = nodes[i];
  var ignore = parseSelector(selector, node.parentNode);
  for(var j = 0; j < ignore.length; j++) {
    if(ignore[j] == node) continue each;
  }
  result.push(node);
}
return result;
}
} 
```

我的问题是：我应该在 sifr-config.js 中做什么来选择除 div“.yui-sam-skin”中的所有 H1、H2、H3 之外的所有 H1、H2、H3？或者更确切地说，我应该如何指定选择器？

提前致谢！

Zyber

补充：如果我将选择器从 h2 更改为 div:not(.yui-toolbar-titlebar)>h2 它有点工作。如果我将选择器设置为 div:not(.yui-sam-skin)>h2 它不起作用 - 它仍然会更改为 sifr'd 文本。我说它有点工作，因为脚本仍然将类 .sifr-active 应用于那个 h2，这使得 h2 不可见，所以我需要一些行到 sifr-screen.css：

```
.sIFR-active .yui-toolbar-titlebar h2 {
    visibility: visible;
    font-family: verdana, sans-serif;
} 
```

这感觉很烦人！这个问题在新版本的 sIFR3 中解决了吗？

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T12:04:55.947

`div:not(.yui-sam-skin) h2`我认为应该可以工作……选择器的内容不在 sIFR 范围内，因此在以后的版本中不会发生任何变化。您可以尝试将选择器代码交换为 jQuery：[http](http://wiki.novemberborn.net/sifr3/parseSelector) ://wiki.novemberborn.net/sifr3/parseSelector 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T22:16:21.433

好的，所以我最后想出了一个丑陋的解决方案。在 sifr-config.js 之上：

```
function sIFRignore(selector) {
    var nodes = sIFR.dom.querySelectorAll(selector);
    for(var i=0; i < nodes.length; i++) {
        var node=nodes[i];
        node.style.visibility  = 'visible';
        node.style.fontFamily  = 'Verdana';
        sIFR.dom.addClass("sIFR-ignore", node);
    }
    return true;                
} 
```

我需要添加那些样式的东西，因为至少 firefox 仍然给它命名为 .sIFR-active 的样式！这是一个已知的错误，但是，嘿，它有效（几乎！）。

所以，就在 sIFR.activate 之前，我添加了这些行

```
sIFRignore(".yui-skin-sam * h2");
sIFRignore(".yui-skin-sam * h3"); 
```

# html - $.ajax 使用文件而不是 url？

> ID：1006435
> 
> 赞同：0
> 
> 时间：2009-06-17T11:20:14.447
> 
> 标签：html, ajax, json, append

在 $.ajax 函数中，url 部分有 data.json，它是一个文本文件，但我想放一个 url，即

该代码适用于

```
$(document).ready(function() {

    $('#content').html('');
    $.ajax({
            url:'data.json',
            dataType: "json",
            success: function(data) {
                    $('#content').append('<p>'+data.rank+'</p>');
            }
    });}); 
```

其中 data.json 是一个文本文件...但是我将 'data.json' 替换为 ' [http://twittercounter.com/api/username=Anand_Dasgupta&output=json&results=3](http://twittercounter.com/api/username=Anand_Dasgupta&output=json&results=3) '...这是实际的 url ，然后没有输出...

```
$(document).ready(function() {

    $('#content').html('');
    $.ajax({
          url:'http://twittercounter.com/api/username=Anand_Dasgupta&output=json&results=3',
            dataType: "json",
            success: function(data) {
                    $('#content').append('<p>'+data.rank+'</p>');
            }
    });}); 
```

建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T11:35:09.983

这似乎是跨域ajax预防的一个案例。

为此，您将需要使用服务器端代理脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T11:23:07.107

似乎您在 url 中有错字，问号很重要，因为它将 url 与参数区分开来：

```
http://twittercounter.com/api/?username=Anand_Dasgupta&output=json&results=3 
```

对我来说，似乎缺少更多参数。

编辑：

下面的答案看起来比我的更正确，肯定是跨域访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T11:56:20.317

正如@harshath.jr 正确指出的那样，您需要通过您的域代理该请求，例如：

```
 $('#content').html('');
    $.ajax({
          url:'twitterProxy.php?username=Anand_Dasgupta&results=3',
            dataType: "json",
            success: function(data) {
                    $('#content').append('<p>'+data.rank+'</p>');
            }
    });}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:30:28.627

使用[$.getJSON](http://docs.jquery.com/Ajax/jQuery.getJSON)应该可以解决您的所有后顾之忧。它会在早上给你打电话。

# flexbuilder - Flex 不导出资源来发布构建

> ID：1006436
> 
> 赞同：0
> 
> 时间：2009-06-17T11:20:19.127
> 
> 标签：flexbuilder, release-builds

我正在尝试使用以下行有条件地设置图像源：

```
source="{data.muted ? '/assets/audioMuted.gif' : '/assets/audio.gif'}" 
```

从 Flex builder 运行时应用程序运行良好，但是当我尝试从 Flex builder 导出发布版本时，这些 gif 文件不会导出。

有没有人知道在这种情况下该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:47:25.190

您需要嵌入资产。Flexbuilder 永远不会将图像添加到您的 swf 中，除非您嵌入它。如果您查看诸如[fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来查看您的应用程序正在做什么，您会看到其中一个图像被调用，并且您无法将它们放入适当的文件夹中。

```
[Embed("/assets/picture.gif")]
private const IMAGE1:Class;
[Embed("/assets/picture2.gif")]
private const IMAGE2:Class; 
```

那么你会做

```
source="{data.muted ? IMAGE1: IMAGE2 }" 
```

只要嵌入路径正确，就应该这样做（如果不正确，flexbuilder会告诉你）。

# ms-access - MS Access 中 DoCmd.OpenReport 的参数数量错误

> ID：1006445
> 
> 赞同：1
> 
> 时间：2009-06-17T11:23:20.133
> 
> 标签：ms-access, compilation, adp

抱歉，如果这是一个菜鸟问题，但我有幸支持一个古老的遗留 Access 2000 .adp 应用程序，这是几年前不再存在的人写得很糟糕，当时我自己对 Access 或 VB 几乎没有经验： )

我已经用 Access 2000（它是一个 Access 2000 项目）设置了一个 WinXP 开发机器来做一些支持工作。有一个预先存在的代码行应该打印一个报告，它使用 6 个参数调用 DoCmd.OpenReport：

```
DoCmd.OpenReport ReportName, acViewPreview, , "orderId = 1234", , Printtype 
```

当我运行它时，我得到一个编译错误：“参数数量错误或属性分配无效”。

所以我在 DoCmd.OpenReport 上使用了“intellisense”，我的访问 VB 代码编辑器告诉我它只需要 4 个参数，而不是 6 个：ReportName、acViewNormal、FilterName 和 WhereCondition。当我转到命令的对象浏览器时，定义是：

Sub OpenReport(ReportName, [View As AcView = acViewNormal], [FilterName], [WhereCondition]) Access.DoCmd 的成员（即 4 个参数）

查看网络上的各种帖子，有些人似乎传递了 4 个 args，有些人传递了 6 个。什么给了？我猜有不同版本的 Access 代码库，我猜错了。但我不知道从哪里开始解决这个问题。任何人都知道 Access 并且可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T11:48:03.173

在 Access 2000 中，[OpenReport](http://msdn.microsoft.com/en-us/library/aa203712(office.10).aspx)方法接受 4 个参数：

> **DoCmd.OpenReport** reportname[, view][, filtername][, wherecondition]

其中 [, *parameter* ] 是可选的。

在 Access XP 中，[OpenReport](http://msdn.microsoft.com/en-us/library/aa141526(office.10).aspx)获得了另外 2 个参数：

> **DoCmd.OpenReport** reportname[, view][, filtername][, wherecondition][, windowmode][, openargs]

*Printtype*被用作报告的参数，需要使用另一种方法传入，例如从表单字段或公共属性中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T11:42:34.417

只需删除 WhereCondition 参数之后的所有内容。附加参数适用于更高版本的 Access（它们适用于 WindowMode 和 OpenArgs）

# python - 在 Python 中将非 ASCII 单词大写

> ID：1006450
> 
> 赞同：5
> 
> 时间：2009-06-17T11:24:42.487
> 
> 标签：python, unicode, ascii, capitalization

如何在 Python 中将包含非 ASCII 字符的单词大写？有没有办法调整`string`的`capitalize()`方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-17T11:30:16.623

使用 Unicode 字符串：

```
# coding: cp1252
print u"é".capitalize()
# Prints É 
```

如果您只有一个 8 位字符串，请先将其解码为 Unicode：

```
# coding: cp1252
print "é".decode('cp1252').capitalize()
# Prints É 
```

如果您再次需要它作为 8 位字符串，请对其进行编码：

```
# coding: cp1252
print "é".decode('cp1252').capitalize().encode('cp1252')
# Prints É (assuming your terminal is happy to receive cp1252) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T11:32:52.220

`capitalize()`应该 Just Work™ 用于 Unicode 字符串。

# windows - 本地和虚拟机之间的同步

> ID：1006452
> 
> 赞同：1
> 
> 时间：2009-06-17T11:25:41.050
> 
> 标签：windows, synchronization

我在 Windows 平台上工作，并希望能够以一种**“更改”的方式将我的文件****自动**同步到我的虚拟 Windows 或 linux Web 服务器 - 还需要能够过滤文件类型。我可以通过网络驱动器连接到远程机器。

 **理想情况下，我正在寻找一个免费、易于设置的解决方案 - 一种可以满足我需要的商业产品称为[ViceVersa](http://www.tgrmn.com/)，但它有点矫枉过正和成本 :)

谢谢乔什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T11:27:28.953

我会使用 rsync - 简单、易于设置，并提供您需要的过滤器。第一次通过后带宽也非常低。

[这](http://optics.ph.unimelb.edu.au/help/rsync/rsync_pc1.html)是一个解释如何让它在 Windows 中工作的链接

虽然 rsync 不允许 'on-change' 自动同步，但它在扫描已同步的目录（甚至是非常大的目录）时非常快，因此您可以安排频繁的同步来克服这个问题。

编辑：您可以将它与这样的程序结合使用[，](http://www.safe-install.com/programs/watchdirectory.html)以触发文件夹内容更改的 rsync。比反之便宜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-23T07:47:01.637

对于其他用户，值得一提的[是 lsyncd](http://code.google.com/p/lsyncd/)，它将自动同步两台机器之间的更改（默认情况下推迟到 rsync）。虽然只能在 Linux 上运行，但如果那不是问题，它会很好用。

[Sparkleshare](http://sparkleshare.org/)似乎也终于发布了一些工作代码（Dropbox 克隆）。Havent 自己尝试过，但会进行跨平台同步，您可以设置自己的服务器。**

# windows - 我们可以在 Windows XP Media Center 上安装 Visual Web Express 2008 和 IIS 吗？

> ID：1006455
> 
> 赞同：0
> 
> 时间：2009-06-17T11:26:38.317
> 
> 标签：windows, windows-xp, mediacenter

Microsoft.NET 3.5（和 VWD Express 2008）是否与 Windows XP Media Center SP 2 兼容？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T11:47:39.647

是的你可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:09:49.930

我已经在 Windows XP Media Center SP 2 上安装了带有 VS.Net 2008 的 3.5 没有问题 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-24T00:26:40.350

是的。工作正常。

确保您使用正确的媒体中心 SDK，

" [http://www.microsoft.com/downloads/details.aspx?FamilyID=1D836C29-ABD5-4FDD-90C5-5C5ABAE97DB4&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=1D836C29-ABD5-4FDD-90C5-5C5ABAE97DB4&displaylang=en) "

适用于 Windows XP 上的媒体中心

然而

" [http://www.microsoft.com/downloads/details.aspx?FamilyId=A43EA0B7-B85F-4612-AA08-3BF128C5873E&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=A43EA0B7-B85F-4612-AA08-3BF128C5873E&displaylang=en) "

适用于Vista以后..

# c# - Form.ShowInTaskBar / Process.MainWindowHandle

> ID：1006459
> 
> 赞同：6
> 
> 时间：2009-06-17T11:28:59.700
> 
> 标签：c#, .net, windows, winforms, taskbar

当应用程序的 main `Form`（传递给的那个`Application.Run()`）具有

```
this.ShowInTaskBar = false; 
```

`Process`然后，表示该应用程序的实例具有`MainWindowHandle`of `0`，表示`Process.CloseMainWindow()`不起作用。

我怎样才能解决这个问题？我需要干净地关闭`Form`通过`Process`实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T09:22:42.763

我找到了一种替代方法，即退回到 Win32 的内容并使用窗口标题。这很乱，但它适用于我的情况。

该示例具有一个应用程序实例的上下文菜单，该菜单关闭该应用程序的所有实例。

```
[DllImport("user32.dll")]
public static extern int EnumWindows(EnumWindowsCallback x, int y);
public delegate bool EnumWindowsCallback(int hwnd, int lParam);
[DllImport("user32.dll")]
public static extern void GetWindowText(int h, StringBuilder s, int nMaxCount);
[DllImport("user32.dll")]
public static extern IntPtr PostMessage(IntPtr hWnd, int msg, int wParam, int lParam);
private void ContextMenu_Quit_All(object sender, EventArgs ea)
{
    EnumWindowsCallback itemHandler = (hwnd, lParam) =>
    {
        StringBuilder sb = new StringBuilder(1024);
        GetWindowText(hwnd, sb, sb.Capacity);

        if ((sb.ToString() == MainWindow.APP_WINDOW_TITLE) &&
            (hwnd != mainWindow.Handle.ToInt32())) // Don't close self yet
        {
            PostMessage(new IntPtr(hwnd), /*WM_CLOSE*/0x0010, 0, 0);
        }

        // Continue enumerating windows. There may be more instances to close.
        return true;
    };

    EnumWindows(itemHandler, 0);
    // Close self ..
} 
```

# sharepoint - 如何在 Sharepoint 中显示来自 OLAP 多维数据集的图表和 KPI？

> ID：1006461
> 
> 赞同：0
> 
> 时间：2009-06-17T11:29:20.713
> 
> 标签：sharepoint, ssas, olap, kpi

我需要在 Sharepoint 中显示来自 OLAP 多维数据集的内容。这可以使用 PerformancePoint Server 来完成，但不幸的是，微软前段时间决定放弃对该产品的支持。他们的计划是将一些功能直接集成到下一个版本的 Sharepoint 中。问题是我不能等那么久，将解决方案基于废弃的软件是不明智的。

我该如何解决这个问题，我应该使用 Excel Services 和/或我该怎么做？

你会怎么解决？

关于马库斯·林德霍尔姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T11:41:40.423

我发现一个有用的资源是这个 - 是的，我会使用 Excel Services

[Excel Services 分步指南：白皮书](http://technet.microsoft.com/en-us/library/cc263430.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:53:00.317

Reporting Services 2008 与 sharepoint 集成

# matrix - BLAS 子程序 dgemm、dgemv 和 ddot 不适用于标量？

> ID：1006462
> 
> 赞同：1
> 
> 时间：2009-06-17T11:29:45.877
> 
> 标签：matrix, fortran, gfortran, scalar

我有一个 Fortran 子程序，它使用 BLAS 的子程序 dgemm、dgemv 和 ddot，它们计算矩阵 * 矩阵、矩阵 * 向量和向量 * 向量。我有 m * m 矩阵和 m * 1 向量。在某些情况下，m=1。在这些情况下，这些子程序似乎不能很好地工作。他们没有给出错误，但结果似乎存在一些数值上的不稳定性。所以我必须写一些类似的东西：

```
if(m>1) then 
  vtuni(i,t) = yt(i,t) - ct(i,t) - ddot(m, zt(i,1:m,(t-1)*tvar(3)+1), 1, arec, 1)
else 
   vtuni(i,t) = yt(i,t) - ct(i,t) - zt(i,1,(t-1)*tvar(3)+1)*arec(1) 
```

所以我的实际问题是，当 m=1 时，那些 BLAS 的子例程不能正常工作，或者我的代码中是否有问题，我是对的吗？编译器会影响这个吗？我正在使用 gfortran。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-23T08:17:34.047

BLAS 例程应该与大小为 1 的对象正确运行。我认为它不能依赖于编译器，但它可能依赖于你所依赖的 BLAS 的实现（尽管我认为它是执行）。BLAS 的参考（阅读：非目标优化）实现可以在[Netlib](http://www.netlib.org/blas/ddot.f)上找到，可以很好地处理这种情况。

我已经对大小为 1 的数组和大小为 1 的更大数组的切片（如您自己的代码）进行了一些测试，它们都工作正常：

> ```
>  $ cat a.f90 
>  implicit none
>  double precision :: u(1), v(1)
>  double precision, external :: ddot
>  u(:) = 2
>  v(:) = 3
>  print *, ddot(1, u, 1, v, 1)
>  end
>  $ gfortran a.f90 -lblas && ./a.out
>   6.0000000000000000     
> 
>  $ cat b.f90                       
>  implicit none
>  double precision, allocatable :: u(:,:,:), v(:)
>  double precision, external :: ddot
>  integer :: i, j
>  allocate(u(3,1,3),v(1))
>  u(:,:,:) = 2
>  v(:) = 3
>  i = 2
>  j = 2
>  print *, ddot(1, u(i,1:1,j), 1, v, 1)
>  end
>  $ gfortran b.f90 -lblas && ./a.out
>   6.0000000000000000 
> ```

我会考虑进一步调试这个问题的事情：

*   检查您的`ddot`定义是否正确
*   将参考 BLAS 替换为您的优化版本，以检查它是否更改了任何内容（您可以编译并链接到`ddot.f`我之前在我的答案中链接到的文件）

# php - Zend_Form_Element_File - 表单错误时文件丢失

> ID：1006466
> 
> 赞同：1
> 
> 时间：2009-06-17T11:31:53.253
> 
> 标签：php, zend-framework

我正在创建一个包含 Zend 表单元素文件的 Zend 表单，以允许用户上传文件。当表单出现错误时（即验证失败），当重新显示给用户更正时，文件上传框是空的（所以他们必须点击浏览并再次选择它）。

是否有可能得到它来保存文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T11:39:21.833

绝对没有办法让 html 输入元素预先选择文件（这是一个安全问题）。您唯一能做的就是保存文件，并且不需要在重新发送表单时再次上传。

# visual-studio - 调用栈和反汇编疑问

> ID：1006468
> 
> 赞同：2
> 
> 时间：2009-06-17T11:33:11.267
> 
> 标签：visual-studio, debugging, assembly, windbg

三个疑惑 1）假设我得到的调用堆栈如下

```
 user32.dll!_InternalCallWinProc@20()  + 0x28 bytes  
user32.dll!_UserCallWinProcCheckWow@32()  + 0xb7 bytes  
user32.dll!_CallWindowProcAorW@24()  + 0x51 bytes   
user32.dll!_CallWindowProcW@20()  + 0x1b bytes 
```

现在每个函数末尾提到的字节是什么？就像第一个语句一样，什么是 0x28 字节。

2) 如何在 VS 的 windows 系统 dll 上设置断点？在windbg中，我可以搜索windows系统dll的特定功能

```
>x wininet!*funcA* 
```

使用此命令，我可以获得此函数的地址并可以放置断点。我可以在 Visual Studio 中做同样的事情吗？

3) 我没有 dll 的符号文件。我在反汇编中得到的调用堆栈是

```
7814XXX0  call        dword ptr [__imp__WindowsFuncA@32 (781EXXXXh)] 
```

`__imp__`上面的调用堆栈中有什么？这是否意味着这个 windows 函数与其他一些 dll 挂钩？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-17T11:37:56.343

**1)**它们是该堆栈帧中正在执行的指令的字节偏移量，相对于函数的开始。

**2)**在 New Breakpoint 对话框中输入如下内容：

```
{,,user32.dll}_SendMessageW@16 
```

其中`16`是函数期望的参数字节数（在 Win32 中，这几乎总是参数数量的 4 倍）。`W`指 API 的 Unicode 版本；`A`如果您正在调试 ANSI 应用程序，请使用。

**3)** `__imp__`引用 DLL 导入表 - 当前模块中的代码通过 a 重定向`JMP`到真正的 Windows DLL 中，`__imp__`符号表示`JMP`. 这些`JMP`s 存在于进行调用的 DLL 或 EXE 中的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T11:36:11.497

对于您问题的第一部分，提到的字节偏移是执行期间函数中的位置，导致后续调用在堆栈中更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T11:36:04.430

1) 它们是从函数开始到创建堆栈跟踪时正在执行的行的偏移​​量。

2 & 3 - 不知道。对不起。

# c# - 在 asp.net 中解决“潜在危险请求”错误的最佳方法是什么？

> ID：1006469
> 
> 赞同：3
> 
> 时间：2009-06-17T11:33:46.773
> 
> 标签：c#, asp.net, html

我目前正在处理的项目在结帐时提供了将嵌入的 YouTube 视频附加到广告的选项。

这让人很头疼：

我最初的计划是从 YouTube 获取用户提供的嵌入 html 并拆分出 videoID，并仅存储它，拒绝任何不符合特定模式的内容，以确保没有不可靠的业务。

不幸的是，ASP.net 验证在将 html 发送回给我进行处理之前捕获了它，*除了关闭验证之外*还有什么方法可以解决这个问题？

我可以自己处理不安全的 html，页面上有太多其他控件来证明关闭验证是合理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T11:41:35.137

关闭 ValidateRequest 标志是允许 .net 接受数据的唯一方法。

一种替代方法可能是使用 javascript 对输入进行编码，并让页面发布编码数据而不是原始 html。

另一种选择是在主页上的 iframe 中有一个带有控件的空白页面和一个“提交”按钮。这样，您只需要关闭该页面的验证，从而关闭该控件。不过，样式在这里可能是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:05:43.887

如果您只对来自 YouTube 的视频 ID 感兴趣，您能否不只是让用户输入 YouTube URL，然后从查询字符串中提取视频 ID？这样您就不必担心页面验证问题了。

# java - 客户端 Javascript --> 服务器端 Java --> 为用户提供 .doc

> ID：1006470
> 
> 赞同：1
> 
> 时间：2009-06-17T11:34:21.733
> 
> 标签：java, javascript, web-applications

我正在帮助某人开发一个基于 javascript 的 Web 应用程序（尽管我对 Web 开发几乎一无所知），我们不确定实现我们想要的功能的最佳方式。

基本上，用户将使用我们的工具通过 javascript 查看表格、列等中的各种无聊数据。我们希望实现一个功能，用户可以单击按钮或链接，然后允许用户下载 .doc 文件中显示的数据。

到目前为止，我们的基本想法是这样的：

*   单击链接时调用服务器上的 Java 函数，并将所需数据作为字符串传入
*   在服务器上生成 .doc 文件
*   在客户端浏览器中自动“打开”指向文件的链接以启动下载

这可能吗？如果可以，是否可行？或者，您能推荐一个更好的解决方案吗？

**编辑：**数据不驻留在服务器上；相反，它是从 SQL 数据库中查询的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T11:38:30.493

是的，有可能。您的救星是[Apache POI 库](http://poi.apache.org/)。它的 HWPF 库将帮助您使用 java 生成 Microsoft Word 文件。其余的只是巧妙地使用 HTTP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T11:44:46.113

你的基本想法听起来有点像 Rube-Goldbergesque。

服务器上是否存在文档中所需的数据？如果是这样，那么您需要做的就是显示一个带有 GET 参数的纯 HTML 链接来描述数据（即客户 X 从日期 A 到日期 B 的数据）。该链接将由一个 Servlet 在服务器上处理，该 Servlet 获取数据并生成 .DOC 文件作为其输出以供浏览器下载 - 这是一个非常简单的一步过程，甚至不涉及任何 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T11:46:34.737

将大量数据作为 GET/POST 传递可能不是最好的主意。您可以只传入之前用于生成 HTML 页面的相同参数。您甚至不需要使用 3rd 方库来生成 DOC。您可以只生成一个带有 DOC 扩展名的普通旧 HTML 文件，Word 会很乐意打开它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-28T14:08:33.843

听起来像[Docmosis](http://www.docmosis.com) Java 库可能会有所帮助 - 查看在线演示，因为它显示的内容类似于您所要求的内容 - 根据网页中的选择从网站生成真实的 doc 文件。Docmosis 可以从数据库中查询并且几乎可以在任何地方运行。

# asp.net - 如何检测 DetailsView 显示的不是数据而是 EmptyDataText

> ID：1006480
> 
> 赞同：0
> 
> 时间：2009-06-17T11:36:08.970
> 
> 标签：asp.net, .net, detailsview, emptydatatext

我的页面上有一个`DetailsView`和几个按钮。

所以我想隐藏它们，如果`DetailsView`不显示数据，而只是显示`EmptyDataText`属性的值。

我怎样才能做到这一点？

我发现只有一种方法 -`view.Rows[0].Cells.Count == 1`因为如果显示数据，则会出现多列。但我不喜欢这样的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:06:21.763

请尝试 DetailView 属性，如 DataItemIndex 和 DataItemCount

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:03:55.870

如果只有detailsview有空数据文本，第一行有空数据文本，我们可以比较一下......

```
 if (DetailsView1.Rows[0].Cells[0].Text == "your Empty Data text")
    {

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T17:30:14.777

我意识到这已经很老了，但这可能对其他人有所帮助：

```
 <EmptyDataTemplate>
        <style>
            .thingsiwanthidden {
                display: none;
            }
        </style>
    </EmptyDataTemplate> 
```

# c# - 从 Windows 服务打印 PDF

> ID：1006490
> 
> 赞同：4
> 
> 时间：2009-06-17T11:38:59.150
> 
> 标签：c#, visual-studio, pdf, windows-services, printing

使用 C#，如何将 PDF 文档（在后台没有任何对话框）打印到指定的打印机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T14:21:11.413

我过去曾使用以下 PDF 库从 C# Windows 服务执行 PDF 文档的批量打印。

[http://www.quickpdflibrary.com/](http://www.quickpdflibrary.com/)

这是一个相当不错的库，如果我没记错的话，打印文档只需要几行代码。它工作得很好，为我节省了大量时间。

此外，讨论使用 DDE 在服务器上启动桌面应用程序以执行打印的推荐链接是一个坏主意。Adobe Reader 可能不支持这一点，因为它是在无窗口会话中运行的桌面应用程序，您可能会遇到消息框和对话框的问题。以我的拙见，该解决方案无法扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:19:51.860

[开始了](http://vidmar.net/weblog/archive/2008/04/14/printing-pdf-documents-in-c.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T12:30:00.217

*免责声明：我为 Atalasoft 工作*

如果您不想依赖服务器上的 Acrobat，您需要自己光栅化 PDF 页面并使用普通的 .NET 打印 API 将它们发送到打印机。我们有一个可以[光栅化 PDF](http://www.atalasoft.com/products/dotimage/pdfrasterizer/)的产品，它使用了下面的 Foxit 引擎。它部署为普通的 .NET 程序集，不需要安装任何其他软件。

# php - PHP：可以调用创建你的类吗？

> ID：1006493
> 
> 赞同：0
> 
> 时间：2009-06-17T11:39:23.610
> 
> 标签：php

我在 php 中有一个创建另一个类的类，我希望这个子类能够调用父类，但不将 $this 作为参数传递给子类。我也不想让父类全球化。有没有办法调用父类，比如 parent->function 或类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T11:50:05.167

我认为您所说的父子关系只是一种组合（“父”在层次结构类中包含一个不相关的实例，即“子”）。如果我的假设是正确的，那么这闻起来很糟糕，因为这两个类将紧密耦合，并且指向某处的不良设计（“父母”、“孩子”或两者兼而有之）。

不那么臭的替代品：

*   从“孩子”获取所需的数据并使用该数据调用“父母”中的方法
*   将“父母”持有的数据传递给“孩子”并将方法放在那里，以便“孩子”可以调用它
*   调用“父”中的方法并将结果传递给“子”
*   如果有意义，请使用继承，这样“父母”和“孩子”都成为真正的父母和孩子，并且都有方法，那么“父母”不需要创建“孩子”，您可以直接使用孩子在代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T11:56:20.050

正如 Maciej 所说，这很 hackish，我不推荐它，但有可能：

```
<?php

    class B 
    {
        function B() {
            $trace = debug_backtrace();
            $trace[1]['object']->y();
        }
    }

    class A 
    {
        function x() {
            $z = new B;
        }
        function y() {
            printf("hi");
        }
    }

    $test = new A;
    $test->x();

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T11:40:28.960

这是一种黑客行为，但请尝试分析`debug_backtrace()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T12:38:25.253

> (...) 但没有将 $this 作为参数传递给子类

天堂，为什么？*“你看，妈，我不用用手抓着就可以小便。哎呀，现在又发生了。太好了。”*

它可能如此简单，但我想我们永远不会知道为什么这是被禁止的。我的猜测是，您只是不了解 OOP（正如您在类和实例层次结构之间的混淆所暗示的那样），而且您懒得学习它。[*Ceci n'est pas une pipe！*](http://en.wikipedia.org/wiki/The_Treachery_of_Images)

看：

```
<?php
    class AClass {
        public $parent = false;

        public function setParent($parent) {
            $this->parent = $parent;
        }

        public function createChild() {
            $newInstance = new AClass();
            $newInstance->setParent($this);
        }
    }
?> 
```

是的，就是这么简单！你现在有了父母。

还是因为不允许修改父类？
有一个秘密，但我会告诉你：

邪恶术士0级戏法：[*传承*](http://www.php.net/manual/en/language.oop5.basic.php)，又称“ `class B extends A {}`”。

我提前为自己是一个卑鄙、讽刺、无益的人道歉，但如果我真的支持道歉，我就不会写那个答案。

**但是**，如果您能给我们一个禁止传递参考的充分理由，我保证会投票赞成您的问题（并诚实道歉）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T13:15:57.847

我没有做足够的 PHP 来知道这是否可能，但你不能将委托/回调传递给对象的构造函数吗？这样，您就没有整个对象，只是对您要调用的方法的引用！

高温高压

OneSHOT

# linq-to-sql - LINQ to SQL 表列表到接口列表

> ID：1006494
> 
> 赞同：2
> 
> 时间：2009-06-17T11:39:41.863
> 
> 标签：linq-to-sql, interface

我有以下代码：

```
public IQueryable<ITax> FindAllTaxes()
{
      return db.Taxes;
} 
```

我收到以下错误

```
Cannot implicitly convert type 'System.Data.Linq.Table<Models.Tax>' to 'System.Linq.IQueryable<Interfaces.ITax>' 
```

我正在尝试在任何地方使用接口，但不知道如何转换它，有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T11:44:56.440

恐怕我们还没有泛型类型的协变。你可以做`IQueryable<Tax>`，但不行`IQueryable<ITax>`。您可以引入转换，但它可能会破坏可组合性，使其无用。你可以尝试一下：

```
return db.Taxes.Cast<ITax>(); 
```

在 C# 4.0 中，这可能会在没有额外演员表的情况下工作（尽管我还没有尝试过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T11:43:46.300

试试这个

```
 public IQueryable<Taxe> FindAllTaxes() { return db.Taxes; } 
```

或者

```
 public IQueryable<Tax> FindAllTaxes() { return db.Taxes; } 
```

# asp.net - ASP.NET 中的默认会话超时值是多少？

> ID：1006500
> 
> 赞同：16
> 
> 时间：2009-06-17T11:41:44.947
> 
> 标签：asp.net, session

ASP.NET 中的默认会话超时值是多少？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-06-17T11:58:06.037

默认为 20 分钟，但您可以在 web.conifg 中更改

```
<sessionState timeout="20"></sessionState> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-06-17T12:13:28.770

machine.config 可以覆盖服务器会话状态的默认值等。

> C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\machine.config

PS。ASP.NET v3.0 和 v3.5 也使用 v2.0.x 机器配置。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-06-17T11:43:37.643

20分钟。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-06-17T11:45:23.240

默认值为 20 分钟。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-05-04T10:07:28.720

默认超时为 20 分钟

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-29T13:30:01.383

1.  **会话**的默认有效期为 20 分钟。
2.  Cookie的默认有效期**为 30 分钟**。
3.  **ViewState 的**最大大小是页面大小的 25%

# fluent-nhibernate - 由于违反约束列 GroupId、idx 不唯一而中止

> ID：1006501
> 
> 赞同：1
> 
> 时间：2009-06-17T11:42:19.643
> 
> 标签：fluent-nhibernate

我正在使用 FluentNHibernate 并进行了多对多映射，但是当我尝试保存实体时，出现以下错误：

```
NHibernate.Exceptions.GenericADOException: NHibernate.Exceptions.GenericADOException
: could not insert collection: [Test.Entities.Recipient.Groups#b6815d34-f436-4142-9b8e-1bfcbf25509e][SQL: SQL not available]
---- System.Data.SQLite.SQLiteException : Abort due to constraint violation
columns GroupId, idx are not unique 
```

这是我的映射：

```
public class GroupMap : ClassMap<Group>
{
    public GroupMap()
    {
        Id(x => x.Id).GeneratedBy.Guid();
        Map(x => x.Name);
        Map(x => x.SenderName);
        Map(x => x.Created);
        HasManyToMany(x => x.Recipients)
            .AsList()
            .WithTableName("groups_recipients")
            .WithParentKeyColumn("GroupId")
            .WithChildKeyColumn("RecipientId")
            .LazyLoad()
            .Cascade.AllDeleteOrphan();
    }
}

public class RecipientMap : ClassMap<Recipient>
{
    public RecipientMap()
    {
        Id(x => x.Id).GeneratedBy.Guid();
        Map(x => x.Firstname);
        Map(x => x.Lastname);
        Map(x => x.Phone);
        Map(x => x.Email);
        HasManyToMany(x => x.Groups)
            .AsList()
            .WithTableName("groups_recipients")
            .WithParentKeyColumn("RecipientId")
            .WithChildKeyColumn("GroupId")
            .LazyLoad().Cascade.None();
    }
} 
```

这个问题似乎与关系表 id 有关，但我不知道如何解决它。

干杯，南达里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T13:28:08.727

使用 AsList() 不是一个好主意。应该是 AsBag()。一切似乎都奏效了。

# c# - ASP.NET Sitemap .ResourceKey 属性为空

> ID：1006504
> 
> 赞同：1
> 
> 时间：2009-06-17T11:43:07.317
> 
> 标签：c#, asp.net

我正在使用标准的 ASP.NET 和描述站点导航结构的 Web.sitemap 文件。现在，我想在我的代码中使用我的 resourceKey 属性作为页面标识符，所以我可以执行例如。授权检查和类似的。

问题是它始终为空，例如在检索 SiteMap.CurrentNode.ResourceKey 时

我试图在 Web.sitemap 中设置 enableLocalization="true"，在 Web.config 中设置 <siteMap enable="true" /> 但这没有帮助。

有什么建议吗？

谢谢，雅各布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T13:30:19.253

自己找到了解决方案：有必要在 App_GlobalResources 中为站点地图创建一个 .resx 文件，然后才能访问资源键。

IMO 这不是 100% 合乎逻辑的，但是 ResourceKeys 不应该用于除本地化之外的其他事情，曾经可能会争论。

# sharepoint - 如何在 Sharepoint 列表中自定义 Dispform.aspx

> ID：1006516
> 
> 赞同：1
> 
> 时间：2009-06-17T11:46:34.690
> 
> 标签：sharepoint, sharepoint-designer

早上好，

我有一个 SharePoint 网站，我已经尝试修复了一段时间。我在 NewForm.aspx 和 EditForm.aspx 中添加字段没有问题，但 Dispform.aspx 似乎是一个完全不同的问题。

我一直在使用 SharePoint Designer，它看起来好像所有其他字段都使用这个显示：

```
<xsl:value-of select="@Priority"/> 
```

但是当我继续按照相同的格式尝试插入一个新字段时，当我确定应该存在某些东西时，它会继续拉出空值。

简短内容：如何添加要在 DispForm.aspx 上显示的字段？

任何帮助将不胜感激，我被困住了！

谢谢， 乙

解决方案：

我忘记在我正在使用的列表的内容类型下添加我的新列。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:27:29.020

你的方法是好的，有几件事要检查：

1) 每个数据视图 Web 部件都有 DataFields 标记，它看起来像这样：

```
<DataFields>@URL,URL;@Comments,Notes;@Color,Color;@Image,Image;</DataFields> 
```

它包含您的字段名称。确保您的新字段显示在此列表中。

2）内部字段名称和字段名称之间也存在差异。在上面的示例中，**Comments**是内部名称，但名称是**Notes**。因此，要正确显示 Notes 字段，您应该使用：

```
<xsl:value-of select="@Comments"/> 
```

3) 确保您尝试在 XSLT 模板的正确位置输出此值。找到该位置的最简单方法是查找现有字段，然后在这些字段中添加新字段。

希望能帮助到你...

# c# - 我怎样才能制作一个四舍五入到下一个 5er 数字的方法？

> ID：1006518
> 
> 赞同：-1
> 
> 时间：2009-06-17T11:46:37.293
> 
> 标签：c#

> **可能重复：**
> [内置 .Net 算法将值四舍五入到最接近的 10 间隔](https://stackoverflow.com/questions/274439/built-in-net-algorithm-to-round-value-up-to-the-nearest-10-interval)

嗨，我需要一个返回 5er 行的下一个数字的方法。例如：3 -> 5 7 -> 10 8 -> 10 16 ->20

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T11:51:42.853

对于正值：

```
int rounded  = 5 * Math.Ceiling( (double)original / 5 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T12:03:55.980

```
 int rounded = original + (5 - original%5); 
```

# c# - 如何绑定 ComboBox 以使显示成员是源数据表的 2 个字段的连接？

> ID：1006521
> 
> 赞同：25
> 
> 时间：2009-06-17T11:47:18.977
> 
> 标签：c#, data-binding, combobox

我想将 a 绑定`ComboBox`到 a `DataTable`（我无法更改其原始架构）

```
cbo.DataSource = tbldata;
cbo.DataTextField = "Name";
cbo.DataValueField = "GUID";
cbo.DataBind(); 
```

我要`ComboBox`演出`tbldata.Name + tbldata.Surname`。

当然，将新名称+姓氏作为字段添加到`tbldata`绑定之前是可能的，但我希望有一个更优雅的解决方案（伪代码）

```
cbo.DataTextField = "Name";
cbo.DataTextField += "Surname"; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-06-17T12:04:05.433

计算出的列解决方案可能是最好的解决方案。但是，如果您无法更改数据表的架构来添加它，您可以遍历表并填充将用作数据源的新集合。

```
var dict = new Dictionary<Guid, string>();
foreach (DataRow row in dt.Rows)
{
    dict.Add(row["GUID"], row["Name"] + " " + row["Surname"]);
}
cbo.DataSource = dict;
cbo.DataTextField = "Value";
cbo.DataValueField = "Key";
cbo.DataBind(); 
```

显然，这不如直接绑定到 DataTable 的性能好，但除非表有数千行，否则我不会担心这一点。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-06-17T11:54:05.517

最简单的方法是使用 Expression 属性在 DataTable 中创建一个新的计算列：

```
tbldata.Columns.Add("FullName", typeof(string), "Name + ' ' + Surname");
...
cbo.DataTextField = "FullName"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-17T11:51:16.677

我会在您的数据对象上创建一个属性，然后将其映射到 DataTextField

**数据对象**

```
public string FullName
{
  get { return Name + " " + Surname; }
} 
```

**代码隐藏**

```
cbo.DataSource = tbldata;
cbo.DataTextField = "FullName";
cbo.DataValueField = "GUID";
cbo.DataBind(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-12-04T09:21:21.830

或者像这样实现“格式”事件：

```
DataRow r = ((DataRowView)e.ListItem).Row;
e.Value = r[ "FirstName" ] + " - " + r[ "LastName" ]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-17T11:53:42.083

在您的类中有一个属性，它是名称和姓氏的连接。并将 DataTextField 绑定到此属性。

如果您将其绑定到 DataTable，您可以向 DataTable 添加一个新列，其值为 name 和 Surname 的 concat 并将其绑定到组合。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T11:54:40.290

使用DataColumn的[Expression](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)属性查看计算列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T11:54:56.810

您可以注册组合绑定事件并迭代项目，使用组合框项目数据项将每个项目文本设置为所需的字段。

# c# - 如何调用像base.base.GetHashCode()这样的二级基类方法

> ID：1006530
> 
> 赞同：29
> 
> 时间：2009-06-17T11:50:56.223
> 
> 标签：c#, inheritance

```
class A
{
    public override int GetHashCode()
    {
        return 1;
    }
}
class B : A
{
    public override int GetHashCode()
    {
        return ((object)this).GetHashCode();
    }
}

new B().GetHashCode() 
```

这会溢出堆栈。我该如何`Object.GetHashCode()`打电话`B.GetHashCode()`？

编辑：`B`现在继承自`A`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-17T11:52:36.860

（编辑 - 误读问题）

如果您想获得原始`object.GetHashCode()`版本；你不能 - 至少，除非`A`通过以下方式提供它：

```
protected int GetBaseHashCode() { return base.GetHashCode();} 
```

（并有`B`电话`GetBaseHashCode()`）。

它溢出的原因是（显然）是虚拟的——如果你把它转换成;`GetHashCode`也没关系。`object`它仍然从实际对象中最衍生的实现开始，即`B.GetHashCode()`（因此爆炸）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-17T12:41:47.777

您可以使用`RuntimeHelpers.GetHashCode(object)`获取对象的原始哈希码：

```
 class A
  {
    public override int GetHashCode()
    {
      Console.WriteLine("base hashcode is: " + base.GetHashCode());

      return 1;
    }
  }

  class Program
  {
    public static void Main(string[] args)
    {
      A a = new A();

      Console.WriteLine("A's hashcode: " + a.GetHashCode());

      Console.WriteLine("A's original hashcode: " + RuntimeHelpers.GetHashCode(a));
    }
  } 
```

这会产生以下结果：

> 基本哈希码为：54267293
> A 的哈希码：1
> A 的原始哈希码：54267293

如果你看一下`RuntimeHelpers.GetHashCode(object)`Reflector，你会发现它调用了内部静态方法`object.InternalGetHashCode(object)`。如果您想了解更多信息，请查看有关 GetHashCode 的默认实现的[这个问题。](https://stackoverflow.com/questions/720177/default-implementation-for-object-gethashcode)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-02-28T19:30:33.383

我正在使用一个外部库，我也想调用 base.base （因为在某些情况下存在错误）。经过一些研究，我发现了这个页面[http://www.rsdn.ru/forum/dotnet/475911.aspx](http://www.rsdn.ru/forum/dotnet/475911.aspx)

这很简单：您使用要调用方法的基类定义一个委托，并将对象指针设置为 *this（或您想要的对象）

所以，重要的代码是：

```
public delegate void MD();

public void Test() {
        // A is the base class you want to call the method.
        A a = new A();
        // Create your delegate using the method name "M" with the instance 'a' of the base class
        MD am = (MD)Delegate.CreateDelegate(typeof(MD), a, "M");
        // Get the target of the delegate and set it to your object (this in most case)
        am.GetType().BaseType.BaseType.GetField("_target", BindingFlags.Instance BindingFlags.NonPublic).SetValue(am, this);
        // call the method using the delegate.
        am();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-12T08:01:36.410

如果您可以修改子子类的代码，那么您可以使用静态方法来实现子子方法的功能。这个静态（公共）方法的第一个参数是类的对象。这样你就可以从任何地方调用它。

```
class A
{
    public static int CalcHashCode(A obj)
    {
        return 1;
    }

    public override int GetHashCode()
    {
        return CalcHashCode(this);
    }
}
class B : A
{
    public override int GetHashCode()
    {
        return A.CalcHashCode(this);
    }
} 
```

# .net-3.5 - 扩展方法性能

> ID：1006537
> 
> 赞同：9
> 
> 时间：2009-06-17T11:52:25.347
> 
> 标签：.net-3.5, c#-3.0

```
 /*I have defined Extension Methods for the TypeX like this*/ 
        public static Int32 GetValueAsInt(this TypeX oValue)
        {
            return Int32.Parse(oValue.ToString());
        }
        public static Boolean GetValueAsBoolean(this TypeX oValue)
        {
            return Boolean.Parse(oValue.ToString());
        }

         TypeX x = new TypeX("1");
         TypeX y = new TypeX("true");

         //Method #1
         Int32 iXValue = x.GetValueAsInt();
         Boolean iYValue = y.GetValueAsBoolean();

         //Method #2
         Int32 iXValueDirect = Int32.Parse(x.ToString());
         Boolean iYValueDirect = Boolean.Parse(y.ToString()); 
```

不要被 TypeX 冲昏了头脑，说我应该在 TypeX 内部而不是扩展中定义这些方法）我无法控制它（我定义的实际类是在 SPListItem 上。

我想将 TypeX 转换为 Int 或 Boolean，这个操作是我在代码中很多地方都在做的一件常见的事情。我想知道这是否会导致性能下降。我尝试使用 Reflector 解释 IL 代码，但并不擅长。对于上面的示例，可能不会有任何性能下降。一般来说，我想知道在使用扩展方法时对性能的影响。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-06-17T12:02:17.513

扩展方法*只是*一个编译时更改：

```
x.GetValueAsBoolean() 
```

到

```
Extensions.GetValueAsBoolean(x) 
```

这就是所涉及的全部内容 - 将看起来像实例方法调用的内容转换为对静态方法的调用。

如果静态方法没有性能问题，那么将其作为扩展方法不会引入任何新问题。

编辑：IL，根据要求...

取这个样本：

```
using System;

public static class Extensions
{
    public static void Dump(this string x)
    {
        Console.WriteLine(x);
    }
}

class Test
{
    static void Extension()
    {
        "test".Dump();
    }

    static void Normal()
    {
        Extensions.Dump("test");
    }
} 
```

`Extension`这是and的 IL `Normal`：

```
.method private hidebysig static void  Extension() cil managed
{
  // Code size       13 (0xd)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldstr      "test"
  IL_0006:  call       void Extensions::Dump(string)
  IL_000b:  nop
  IL_000c:  ret
} // end of method Test::Extension

.method private hidebysig static void  Normal() cil managed
{
  // Code size       13 (0xd)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldstr      "test"
  IL_0006:  call       void Extensions::Dump(string)
  IL_000b:  nop
  IL_000c:  ret
} // end of method Test::Normal 
```

如您所见，它们完全相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T11:57:43.777

扩展方法只是编译器的巫术，因此它们在运行时具有普通方法的所有性能影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-28T16:27:22.997

扩展方法会***极大地***影响编译时间。在我参与的一个大型项目中，只需将扩展方法移动到不同的命名空间，我们的编译时间就从 15 分钟缩短到 3 分钟。完全相同的代码，只需复制并粘贴到不同的名称空间。

如果您正在考虑将编译时间作为“性能”指标的一部分，那么性能肯定会受到影响。作为开发人员，15 分钟的构建时间与 3 分钟的构建时间是很重要的。

对我们来说主要的问题是我们只有在几个命名空间中有大量的扩展方法。每个引用臃肿命名空间（使用 using 语句）的类或项目都会导致编译器搜索大量扩展方法。显然，这种搜索不是最优的，并且减慢了 IDE 的速度。Intellisense 非常缓慢并且变得没有响应。

通过简单地将扩展方法移动到单独的、更细化的命名空间中，编译时间大大缩短。绝对值得考虑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-17T11:58:08.800

你不会受到任何性能的影响，因为扩展方法都是在编译时绑定的（你怎么说？）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T12:02:34.140

在最坏的情况下，您将有一个额外的函数调用。不过，说真的，我希望它应该能够尽可能简单地内联这段代码，并且不会产生任何明显的效果。

# c++ - 对大文件有效的轻量级 XML 解析器？

> ID：1006543
> 
> 赞同：8
> 
> 时间：2009-06-17T11:53:14.753
> 
> 标签：c++, xml, parsing, sax, saxparser

我需要解析潜在的巨大 XML 文件，所以我猜这排除了 DOM 解析器。

是否有任何用于 C++ 的轻量级 SAX 解析器，可与 TinyXML 在占用空间上相媲美？XML 的结构非常简单，不需要像名称空间和 DTD 之类的高级东西。只是元素、属性和 cdata。

我知道 Xerces，但它超过 50mb 的绝对大小让我不寒而栗。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T11:59:15.567

如果您使用的是 C，那么您可以使用[Gnome](http://www.gnome.org)项目中的[LibXML 。](http://www.xmlsoft.org/)您可以为文档选择 DOM 和 SAX 接口，以及多年来开发的许多附加功能。如果您真的想要 C++，那么您可以使用[libxml++](http://libxmlplusplus.sourceforge.net/)，它是 LibXML 的 C++ OO 包装器。

该库已经一次又一次地被证明，具有高性能，并且几乎可以在您能找到的任何平台上编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-17T17:01:23.770

我喜欢 ExPat
[http://expat.sourceforge.net/](http://expat.sourceforge.net/)

它是基于 C 的，但有几个 C++ 包装器可以提供帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-01-23T21:44:14.043

[RapidXML](http://rapidxml.sourceforge.net/)是一个用 C++ 编写的非常快速的 XML 解析器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-17T18:37:27.230

[http://sourceforge.net/projects/wsdlpull](http://sourceforge.net/projects/wsdlpull) 这是 java xmlpull api ( [http://www.xmlpull.org/](http://www.xmlpull.org/) )的直接 c++ 端口

我强烈推荐这个解析器。我必须定制它以在我的嵌入式设备上使用（不支持 STL），但我发现它非常快且开销很小。我必须制作自己的字符串和向量类，即使在 Windows 上编译到大约 60k 的那些。

我认为拉解析比 SAX 之类的更直观。该代码更紧密地反映了 xml 文档，因此可以轻松地将两者关联起来。

一个缺点是它只是向前的，这意味着您需要在元素到来时对其进行解析。我们有一个相当混乱的设计来读取我们的配置文件，我需要解析整个子树，进行一些检查，然后设置一些默认值，然后再次解析。使用此解析器，处理此类事情的唯一真正方法是制作状态副本，用它进行解析，然后继续使用原始状态。与我们的旧 DOM 解析器相比，它在资源方面仍然是一个巨大的胜利。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T12:01:13.053

如果您的 XML 结构非常简单，您可以考虑基于 lex/yacc (flex/bison) 构建一个简单的词法分析器/扫描器。W3C 的资源可能会启发您：[http](http://www.w3.org/XML/9707/parser.y) ://www.w3.org/XML/9707/parser.y和[http://www.w3.org/XML/9707/scanner.l](http://www.w3.org/XML/9707/scanner.l)。

另请参见[libxml 中的 SAX2 接口](http://www.xmlsoft.org/html/libxml-SAX2.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-28T17:03:19.677

firstobject 的[CMarkup](http://www.firstobject.com/dn_markup.htm)是一个 C++ 类，它作为一个轻量级的大文件拉解析器（我推荐拉解析器而不是 SAX）和大 XML 文件编写器。它为您的可执行文件添加了大约 250kb。根据一位用户的报告，当在内存中使用时，它的占用空间是 tinyxml 的 1/3。当用于大文件时，它只在内存中保存一个小缓冲区（如 16kb）。CMarkup 目前是一种商业产品，因此它受到支持、记录和设计，可以通过单个 cpp 和 h 文件轻松添加到您的项目中。

尝试它的最简单方法是使用免费的 firstobject XML 编辑器中的脚本，例如：

```
ParseHugeXmlFile()
{
  C标记xml；
  xml.Open("HugeFile.xml", MDF_READFILE);
  while ( xml.FindElem("//record") )
  {
    // 进程记录...
    str sRecordId = xml.GetAttrib("id");
    xml.IntoElem();
    xml.FindElem("描述");
    str sDescription = xml.GetData();
  }
  xml.关闭（）；
}
```

从“文件”菜单中，选择“新建程序”，将其粘贴进去并针对您的元素和属性进行修改，按 F9 运行它或按 F10 逐行逐行执行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-11-23T14:40:30.527

你可以试试[https://github.com/thinlizzy/die-xml](https://github.com/thinlizzy/die-xml)。它似乎非常小且易于使用

这是一个最近开源的 C++0x XML SAX 解析器，作者愿意反馈

它解析输入流并在与 std::function 兼容的回调上生成事件

堆栈机器使用有限自动机作为后端，一些事件（开始标签和文本节点）使用迭代器来最小化缓冲，使其非常轻量级

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-09-04T03:46:32.193

如果您想要小而快，我会查看[生成特定于 DTD/Schema 的解析器的工具。](http://www.xmlthunder.com/)这些对于大型文档非常有用。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-06-09T00:46:49.010

我强烈推荐[pugixml](http://pugixml.org/)

pugixml 是一个轻量级的 C++ XML 处理库。

*“pugixml 是一个 C++ XML 处理库，它由一个具有丰富遍历/修改能力的类 DOM 接口、一个从 XML 文件/缓冲区构造 DOM 树的极快的 XML 解析器和一个用于复杂数据的 XPath 1.0 实现组成——驱动的树查询。还提供完整的 Unicode 支持，包括 Unicode 接口变体和不同 Unicode 编码之间的转换。*

在商业产品中选择和使用 pugixml 之前，我已经测试了一些 XML 解析器，包括一些昂贵的解析器。

pugixml 不仅是最快的解析器，而且拥有最成熟、最友好的 API。我强烈推荐它。是非常稳定的产品！我从 0.8 版开始使用它。现在是1.7。

这个解析器的最大好处是 XPath 1.0 实现！对于任何更复杂的树查询，XPath 都是上帝派来的功能！

具有丰富遍历/修改功能的类 DOM 接口对于处理现实生活中的“重”XML 文件非常有用。

它是小型、快速的解析器。如果您不介意链接 C++ 代码，即使对于 iOS 或 Android 应用程序也是不错的选择。

基准可以说明很多。见： http: [//pugixml.org/benchmark.html](http://pugixml.org/benchmark.html)

(x86) 的几个例子：

```
pugixml is more than 38 times faster than TinyXML

                    4.1 times faster than CMarkup,

                    2.7 times faster than expat or libxml 
```

For (x64) pugixml 是我所知道的最快的解析器。

还要检查您的 XML 解析器对内存的使用情况。一些解析器只是吞噬宝贵的内存！

# java - java内部类文件名太长

> ID：1006544
> 
> 赞同：4
> 
> 时间：2009-06-17T11:53:26.623
> 
> 标签：java, filesystems

我正在将某种语言的程序翻译成嵌套的 java 类。在某些时候，嵌套级别变得如此之深，以至于我得到：

编译Test.javaTest.java:5179：写入时出错：Test$2...$1.class（文件名太长）

其中 ... 是一个长字符串。

我使用的是 ext3 文件系统，所以我限制为 256 个字符的长文件名。另外，我想暂时继续使用这种翻译方法（到内部类），因为我对测试执行闭包转换的语言更感兴趣，这将解决问题。有没有一种快速而肮脏的方法来绕过这个？（可能使用不同的文件系统或告诉 javac 生成不同的文件名？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T12:32:01.913

底线是，是的，这是可行的。可以更改内部类的名称，因此它比分配的原始名称短`javac`。

我正在搜索[Java 语言规范](http://java.sun.com/docs/books/jls/third_edition/html/j3TOC.html)和[Java 虚拟机规范](http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html)，以找到它在哪里谈到使用`$`字符来表示内部类，但无法找到对它的引用。原因是，这并不重要。

案例与要点：

```
class A {
    class B {
        class C {}
    }

    A() {
        new B().new C();
    }

    public static void main(String[] s){
        new A();
    }
} 
```

在这里，我们嵌套了内部类。编译后，我们得到以下文件：

```
A.class
A$B.class
A$B$C.class 
```

这是一个快速实验：

1.  打开`A.class`文件，将引用`A$B$C`更改为`ABCDE`.
2.  将 重命名`A$B$C.class`为`ABCDE.class`。
3.  打开`ABCDE.class`，并将引用更改为`ABCDE`。
4.  运行`java A`，看看它是否运行。

*注意：之所以`A$B$C`更改为，`ABCDE`是因为标识符长度的更改似乎会破坏`class`文件格式，并且会导致错误。技术解释将在本文末尾。*

结果？有用。

原因在`class`文件中。这是原始的拆解`A.class`，只有相关部分：

```
Compiled from "A.java"
class A extends java.lang.Object
  SourceFile: "A.java"
  InnerClass: 
   #10= #3 of #7; //B=class A$B of class A
   #22= #2 of #3; //C=class A$B$C of class A$B

// ... snip ... //

const #2 = class    #21;    //  A$B$C

// ... snip ... //

const #21 = Asciz   A$B$C;

// ... snip ...// 
```

事实证明，内部类的名称只是常量池中的名称。

如果`A$B$C`常量池中的类的名称`A.class`更改为`ABCDE`，并且如果文件中的`A$B$C`类的文件名和名称发生了`class`更改，那么 Java 虚拟机将愉快地使用新命名的内部类执行。

这是什么意思？

不需要`MyClass$1$1$1 ... $1`为类名使用 ，而是任何其他适合自己需要的东西，因此，可以在更短的文件名中包含更多组合。

有人会怎么做呢？我将把它作为练习留给读者。

**注意`ABCDE`用作新的类名**

在这篇文章中，嵌套内部类的名称`A$B$C`被更改为`ABCDE`保持类名的长度相同，以防止 a`ClassFormatError`被抛出。原因是常量池的[`CONSTANT_Utf8_info`结构](http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#7963)`length`具有表示字符串长度的属性。`class`我在文本编辑器中编辑文件时无法更改长度。

为了缩短常量池中的字符串，我假设必须更改`length`字段的值以反映字符串本身的长度。

**更新**

是的，可以编辑`class`文件的常量池以缩短内部类的名称。

我能够将班级更改`ABCDE`为`Z`班级。

这是反汇编的一部分`A.class`：

```
Compiled from "A.java"
class A extends java.lang.Object
  SourceFile: "A.java"
  InnerClass: 
   #10= #3 of #7; //B=class A$B of class A
   #22= #2 of #3; //C=class Z of class A$B

// ... snip ...//

const #2 = class    #21;    //  Z

// ... snip ...//

const #21 = Asciz   Z;

// ... snip ...// 
```

可以看出，内部类现在由 引用`Z`，而不是`A$B$C`。

`A$B$C`通过在`A.class`and文件中查找字符串`A$B$C.class`并将其替换为`Z`，并将字符串前面的字符从值更改为`0x05`来执行更改`0x01`，表示字符串的长度现在是`1`而不是`5`。

通过这些更改，以及将文件重命名为`Z.class`，程序运行起来就好像什么都没发生过一样。

所以，是的，也*可以*缩短内部类的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:18:40.863

一种可能的解决方案是在另一个操作系统上编译，然后使用诸如[yGuard 之](http://www.yworks.com/en/products_yguard_about.html)类的混淆器。默认情况下，混淆器会将类名更改为最小名称（例如 A、B、C...），从而大大缩短类名（以及因此文件名）。

不过，这可能对您没有用，具体取决于您要测试的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T12:18:41.083

您可以从 java 中编译 java，将输出发送到您自己实现的文件管理器。

使用[javax.tools.JavaCompiler](http://java.sun.com/javase/6/docs/api/javax/tools/JavaCompiler.html)和[JavaFileManager](http://java.sun.com/javase/6/docs/api/javax/tools/JavaFileManager.html)为您提供编译后的输出，您也许可以直接将其写入 jar？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T12:00:55.220

[文件系统比较](http://en.wikipedia.org/wiki/Comparison_of_file_systems)，看起来 ResierFS 可能是唯一支持更长文件名的系统之一。我会警惕这种方法，因为所有工具（javac、java、ant、ls、rm、cp 等）可能会对文件名长度做出假设，因为大多数文件系统都是 255 并且您将被绑定到一个 FS（如果它消失了怎么办？）如果这纯粹是重新格式化（或使用虚拟化）的学术。

您可能只需要重新评估您的算法以避免将类嵌套得太深。可以使用多个文件吗？我知道你*不想*这样做，但这可能是*唯一*的选择

# java - 是否有非开发人员（翻译人员！）编辑资源包的工具？

> ID：1006550
> 
> 赞同：6
> 
> 时间：2009-06-17T11:55:47.493
> 
> 标签：java, translation, resourcebundle

我们公司为了让外部翻译人员翻译我们的软件所做的工作是……嗯……怎么说呢……

1.  cvs co someModule
2.  ant translation.export（在这个目标后面有一个自制的ant任务，将所有资源包一起导出为一个大的制表符分隔的文本文件，列：不同的语言，每一行所有语言对应一个键）
3.  一些 VB 工具对文件做了一些事情（你不想知道）
4.  翻译人员在他们的专栏中使用 Excel 工作
5.  有人收集并合并翻译
6.  VB工具
7.  蚂蚁翻译.import
8.  简历提交

... 最好的情况：1\. 到 8\. 之间的 2 周，开发仍在继续...

第一个问题：你如何处理这个问题？

我的想法是构建一个带有 web-gui 的工具，允许翻译人员直接在 cvs 模块上工作（在后台签出并在“保存”时提交，可能在后台进行标记）。我们从受训人员的实施开始，得到了类似于概念证明的东西。在我们继续开发之前，我想知道

第二个问题：你知道类似的工具吗？

和/或

第三个问题：你会使用这样的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T12:04:04.763

java也提供了自己的[资源包编辑器](https://resourcebundleeditor.dev.java.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T12:00:14.083

您应该使用[gettext](http://code.google.com/p/gettext-commons/)和[Poedit](http://www.poedit.net/)。翻译保存在单独的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T12:06:40.827

我们使用[Sisulizer](http://www.sisulizer.com/localization/software/platforms.shtml)本地化我们的应用程序（.NET），对于我在应用程序的文档中看到的，它还支持 Java，也许这可以帮助你。

使用 Sisulizer，您可以生成一个翻译项目，然后发送给翻译人员，当他们返回给您翻译后，您可以将翻译直接导入项目。

# python - 简单的python插件系统

> ID：1006556
> 
> 赞同：0
> 
> 时间：2009-06-17T11:57:14.650
> 
> 标签：python

我正在为 python 中的内部基于 xml 的元数据格式编写解析器。我需要提供不同的类来处理不同的标签。将需要相当大的处理程序集合，因此我将其设想为一个简单的插件系统。我想要做的只是加载一个包中的每个类，然后用我的解析器注册它。我目前的尝试是这样的：
（Handlers 是包含处理程序的包，每个处理程序都有一个静态成员标签，它是一个字符串元组）

```
class MetadataParser:
    def __init__(self):
        #...
        self.handlers={}
        self.currentHandler=None
        for handler in dir(Handlers): # Make a list of all symbols exported by Handlers
            if handler[-7:] == 'Handler': # and for each of those ending in "Handler"
                handlerMod=my_import('MetadataLoader.Handlers.' + handler)
                self.registerHandler(handlerMod, handlerMod.tags) # register them for their tags

    # ...

    def registerHandler(self, handler, tags):
        """ Register a handler class for each xml tag in a given list of tags """
        if not isSequenceType(tags): 
            tags=(tags,) # Sanity check, make sure the tag-list is indeed a list
        for tag in tags:
            self.handlers[tag]=handler 
```

但是，这不起作用。我收到错误`AttributeError: 'module' object has no attribute 'tags'` 我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T12:06:15.133

可能您的`handlerMod`模块之一不包含任何`tags`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T14:11:20.840

我建议您阅读[此页面](http://www.diveintopython.net/html_processing/all_together.html)上的示例和说明，其中说明了如何编写插件架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-06T14:11:35.893

首先，为格式错误/不正确的代码道歉。
也感谢您的关注。然而，罪魁祸首往往是在椅子和键盘之间。我被同名的类和模块弄糊涂了。my_import 的结果（我现在意识到我什至没有提到它来自哪里......它来自 SO: [link](https://stackoverflow.com/questions/211100/pythons-import-doesnt-work-as-expected/211101#211101)）是一个名为实例 areaHandler 的模块。我想要这个类，也叫 areaHandler。所以我只需要通过 eval('Handlers.' + handler + '.' + handler) 来挑选类。
再次感谢您的时间，并对带宽感到抱歉

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-28T17:11:33.813

通过[extend_me](https://github.com/katyukha/extend-me)库实现简单且完全可扩展的实现。

代码可能看起来像

```
from extend_me import ExtensibleByHash

# create meta class
tagMeta = ExtensibleByHash._('Tag', hashattr='name')

# create base class for all tags
class BaseTag(object):
    __metaclass__ = tagMeta

    def __init__(self, tag):
        self.tag = tag

    def process(self, *args, **kwargs):
        raise NotImeplemntedError()

# create classes for all required tags
class BodyTag(BaseTag):
    class Meta:
        name = 'body'

    def process(self, *args, **kwargs):
        pass  # do processing

class HeadTag(BaseTag):
    class Meta:
        name = 'head'

    def process(self, *args, **kwargs):
        pass  # do some processing here

# implement other tags in this way
# ...

# process tags
def process_tags(tags):
    res_tags = []
    for tag in tags:
        cls = tagMeta.get_class(tag)  # get correct class for each tag
        res_tags.append(cls(tag))  # and add its instance to result
    return res_tags 
```

有关更多信息，请查看[文档](http://pythonhosted.org/extend_me/)或[代码](https://github.com/katyukha/extend-me/blob/master/extend_me.py)。此库用于[OpenERP / Odoo RPC 库](https://github.com/katyukha/openerp-proxy)

# .net - 拖动时如何在光标旁边显示图像？

> ID：1006569
> 
> 赞同：1
> 
> 时间：2009-06-17T12:00:34.207
> 
> 标签：.net, winforms

谁能告诉我如何在 Vista 之类的光标旁边显示图像（将文件拖动到文件夹时，它会显示“复制到...”工具提示）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T20:42:54.053

看看下面的文章：

[http://blogs.msdn.com/adamroot/archive/2008/02/15/shell-style-drag-and-drop-in-net-part-3.aspx](http://blogs.msdn.com/adamroot/archive/2008/02/15/shell-style-drag-and-drop-in-net-part-3.aspx)

**更新：**您需要在 SwfDragSourceHelper.cs 中应用以下修改以启用 WinXP 支持。

```
public static void AllowDropDescription(bool allow)
{
    IDragSourceHelper2 sourceHelper = new DragDropHelper() as IDragSourceHelper2;
    if (sourceHelper != null)
        sourceHelper.SetFlags(allow ? 1 : 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T12:09:17.857

简短的回答开始于：

```
Cursor myCursor = new Cursor("myCursor.cur"); 
```

详细信息在这篇文章中解释：[如何使用自定义光标](http://www.switchonthecode.com/tutorials/csharp-tutorial-how-to-use-custom-cursors)

# c# - 如何使用 ConfigurationManager 通过 ClickOnce 更新持久化 app.config？

> ID：1006574
> 
> 赞同：7
> 
> 时间：2009-06-17T12:01:15.360
> 
> 标签：c#, clickonce, app-config, configurationmanager

[这个](https://stackoverflow.com/questions/622764/persisting-app-config-variables-in-updates-via-click-once-deployment)问题准确地描述了我的问题，除了我在`app.config`with中使用自定义配置部分`ConfigurationManager`，所以那里提出的解决方案不适用......

基本上，我的问题是当 ClickOnce 更新应用程序时，它会使用新的 app.config 安装到不同的目录中，从而删除所做的任何更改。我的应用程序使用 app.config 来持久化应用程序设置，所以这非常糟糕......合并更新会非常好（类似于在另一个问题中实现的），但在这一点上几乎任何自动化都会很好。

或者我应该只为我的 app.config 文件使用设置位置而不是尝试使用默认位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T12:12:09.503

ClickOnce 应该在更新之间维护用户设置，但由于未知原因（并且结果不佳），我已经失败了一次或两次。我没有尝试过自定义配置设置，但我对 ClickOnce 不覆盖设置的能力失去了信心。

我计划使用的方法是手动处理 ClickOnce 更新，而不是允许应用程序。检查更新并提示用户安装。我也有几个用户不接受更新，这很难恢复。通过手动处理更新，我希望能够在更新之前将用户设置读入内存，然后在更新完成后将它们写回。有一个 ApplicationUpdated 事件应该服务于这个目的。

也许这种方法也适用于您。

编辑添加参考：

*   [如何：使用 ClickOnce 部署 API 以编程方式检查应用程序更新](http://msdn.microsoft.com/en-us/library/ms404263.aspx)
*   [ApplicationSettingsBase.Upgrade 方法](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.upgrade.aspx)
*   [应用部署类](http://msdn.microsoft.com/en-us/library/system.deployment.application.applicationdeployment.aspx)

谷歌搜索 ApplicationDeployment 也应该有所帮助。

# php - PHP中的'print'和'echo'有什么区别吗？

> ID：1006586
> 
> 赞同：11
> 
> 时间：2009-06-17T12:03:56.137
> 
> 标签：php

> **可能重复：**
> [PHP 中的 echo 和 print 有何不同？](https://stackoverflow.com/questions/234241/how-are-echo-and-print-different-in-php)

更新 ：

我发现一个**完全相同的** [副本](https://stackoverflow.com/questions/234241/how-are-echo-and-print-different-in-php)让我松了一口气（起初我输入这个问题时它没有出现，我用 ... google 找到它）：请和我一起投票以结束这个问题，因为它很累，去寻找其他的有点可怜的家伙;-)

* * *

`print`PHP和`echo`PHP之间有什么区别吗？如果是这样，我应该使用哪个以及何时使用？如果不是，为什么有两个关键字？

更新 ：

在downvoters：请阅读 SO 常见问题解答。SO 也被设置为捕获可搜索的问题。所以你不应该对此投反对票，这个问题是一个有效的问题，在很多地方都得到了回答，现在也在 SO 上。

当然，您可以出于其他原因投反对票，但请在 -1 行中发表评论：投反对票 .. ，因为现在，我不理解投反对票。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-06-17T12:06:38.237

从此[链接中，该](http://www.faqts.com/knowledge_base/view.phtml/aid/1/fid/40)[函数的](http://www.php.net/echo)[PHP 手册条目`echo()`](http://www.php.net/echo)建议：

> 1.  速度。两者之间存在差异，但在速度方面，您使用哪一个应该无关紧要。echo 稍微快一点，因为如果您真的想深入了解细节，它不会设置返回值。
>     
>     
> 2.  表达。print() 的行为类似于您可以执行的函数： $ret = print "Hello World"; $ret 将是
>     
>     
> 3.  这意味着 print 可以用作 echo 不能的更复杂表达式的一部分。PHP手册中的一个例子：
>     
>     
>     
>     美元？打印“真”：打印“假”；
>     
>     
> 
> 如果要在复杂表达式中使用 print ，它也是优先表的一部分。它只是在优先级列表的底部。只有 "," AND、OR 和 XOR 较低。
> 
> 3.  参数）。语法是：echo expression [, expression[, expression] ... ] 但是echo ( expression, expression ) 是无效的。这将是有效的： echo ("howdy"),("partner"); 同：echo“你好”，“伙伴”；
>     （把括号放在那个简单的例子中没有任何意义，因为像这样的单个术语没有运算符优先级问题。）
> 
> 因此，不带括号的 echo 可以采用多个参数，这些参数被连接起来：
> 
> echo "和一个", 1, 2, 3; // 逗号分隔，不带括号
> echo ("and a 123"); // 只有一个带括号的参数
> 
> print() 只能接受一个参数：
> 
> print ("和一个 123"); 打印“和一个123”；

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-17T12:08:50.353

有人说 echo 比 print 稍快，因为它没有返回值。虽然有人认为速度差异并不重要...... [http://fabien.potencier.org/article/8/print-vs-echo-which-one-is-faster](http://fabien.potencier.org/article/8/print-vs-echo-which-one-is-faster)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-17T12:06:12.870

[答案在文档中。](http://php.net/print)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-17T12:10:11.800

print 返回， echo 没有。

你是对的，完全可以用谷歌搜索。

# javascript - Javascript：一般访问函数参数

> ID：1006590
> 
> 赞同：2
> 
> 时间：2009-06-17T12:05:01.080
> 
> 标签：javascript, function, arguments

这是我所拥有的：

```
var log = function(arg1, arg2){
    console.log("inside :" + arg1 + " / " + arg2);
}; 

var wrap = function(fn){
    return function(args){ 
        console.log("before :");
        fn(args);
        console.log("after :");
    }
};

var fn = new wrap(log);
fn(1,2); 
```

这是错误的，因为我想进入控制台：

```
before :
inside :1 / 2
after : 
```

但我得到了这个：

```
before :
inside :1 / undefined
after : 
```

我如何告诉 javascript`args`是传递给返回的函数的所有参数`wrap`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T12:09:54.453

您可以使用[apply](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Function/apply)调用具有指定 'this' 和参数数组的函数，因此请尝试

```
var wrap = function(fn){
    return function(){ 
        console.log("before :");
        fn.apply(this, arguments);
        console.log("after :");
    }
}; 
```

# c# - Fluent NHibernate 列名约定

> ID：1006593
> 
> 赞同：1
> 
> 时间：2009-06-17T12:05:52.607
> 
> 标签：c#, nhibernate, fluent-nhibernate

我想使用 Fluent NHibernate 自动映射为列名创建一个约定。有一个博客条目指出可以像这样设置属性约定：

```
ConventionBuilder.Property.When(
  x => x.Property.PropertyType == typeof(int),
  x => x.ColumnName(x.Property.Name + "Num")
) 
```

但问题是，它`x`只有一个`ColumnNames` *属性*，没有`ColumnName` *方法*。如何使用新样式配置更改属性映射约定？

（PS：截至今天，我正在使用网站上可用的最新二进制文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T12:21:49.657

好的...似乎他们从 ColumnName 属性更改为 ColumnNames 列表。您必须像这样将您的列名添加到此列表中：

```
ConventionBuilder.Property.Always(s => s.ColumnNames.Add(s.Property.Name + "Num")) 
```

# python - 为了实现尾调用优化，jvm 必须牺牲什么？

> ID：1006596
> 
> 赞同：3
> 
> 时间：2009-06-17T12:06:19.297
> 
> 标签：python, clojure, jvm, stack-trace, tail-call-optimization

人们说除了没有尾调用优化的限制之外，clojure 实现非常出色 - jvm 的限制而不是 clojure 实现。

[http://lambda-the-ultimate.org/node/2547](http://lambda-the-ultimate.org/node/2547)

据说在 Python 中实现 TCO 会牺牲

*   堆栈跟踪转储，以及
*   调试规律。

[向我解释尾调用优化有什么大不了的，为什么 Python 需要它](https://stackoverflow.com/questions/890461/explain-to-me-what-the-big-deal-with-tail-call-optimization-is-and-why-python-nee)

是否必须为 TCO 的 jvm 实现做出同样的牺牲？还要牺牲什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-17T12:33:34.780

虽然不同（因为 il 指令已经存在）但值得注意的是 .Net [64 位 JIT 团队](http://blogs.msdn.com/clrcodegeneration/archive/2009/05/11/tail-call-improvements-in-net-framework-4.aspx)必须通过额外的努力来尊重所有尾调用。

我特别呼吁评论：

> 当然，不利的一面是，如果您必须调试或分析优化的代码，请准备好处理看起来缺少几帧的调用堆栈。

我认为 JVM 也极不可能避免这种情况。

鉴于此，在请求尾调用优化的情况下，JIT 应该假设*需要*避免堆栈溢出，这不是可以在 Debug 构建中关闭的东西。如果它们在您到达有趣的部分之前崩溃，它们对调试没有多大用处。“优化”实际上是一个永久性功能，并且是受其影响的堆栈跟踪的问题。

值得指出的是，在执行程序员在概念上描述/理解为堆栈操作（例如调用函数）的操作时避免创建真实堆栈帧的任何优化都会固有地导致呈现给用户的内容之间的断开连接在调试/提供堆栈跟踪和现实时。
这是不可避免的，因为描述操作的代码与执行操作的状态机的机制越来越分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T16:03:42.473

[现在正在进行](http://challenge.openjdk.org/projects/mlvm/subprojects.html)向JVM 添加尾调用的工作。有一个[wiki 页面](http://wikis.sun.com/display/mlvm/TailCalls)讨论了一些细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-01T10:53:54.740

是的，通常情况下，实施 TCO 会阻止您获得完整的堆栈跟踪。这是不可避免的，因为 TCO 的重点是避免创建额外的堆栈帧。

值得一提的是，Clojure 有一个不消耗堆栈的“recur”特性来绕过当前 JVM 版本的这个限制。

例子：

```
(defn triangle [n accumulator] 
  (if 
    (<= n 0)  
      accumulator
      (recur (dec n) (+ n accumulator))))

(triangle 1000000 0)

=> 500000500000     (note stack does not explode here!) 
```

# python - wxProgressDialog 类似 wxDialog 的行为

> ID：1006598
> 
> 赞同：0
> 
> 时间：2009-06-17T12:06:23.417
> 
> 标签：python, wxpython, modal-dialog

我想创建模态对话框，但它不应该以模态方式运行，即控制流应该继续

如果我做

```
 dlg = wx.Dialog(parent)
 dlg.ShowModal()

 print "xxx"

 dlg.Destroy() 
```

“xxx”不会被打印，但在进度对话框的情况下

```
dlg = wx.ProgressDialog.__init__(self,title, title, parent=parent, style=wx.PD_APP_MODAL)
print "xxx"

dlg.Destroy() 
```

“xxx”将被打印

所以基本上**我想为普通对话框实现 wx.PD__APP__MODAL ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T15:37:32.040

只需使用`Show`而不是`ShowModal`.

如果您的函数（该`print "xxx"`部分）运行很长时间，您将不得不`wx.SafeYield`每隔一段时间手动调用一次，或者将您的工作移至单独的线程并从中将自定义事件发送到您的对话框。

还有一个提示。据我了解，您想在显示模态对话框后执行一些代码，这里有一个特殊绑定的小技巧，`EVT_INIT_DIALOG`可以实现这一点。

```
import wx

class TestFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)
        btn = wx.Button(self, label="Show Dialog")
        btn.Bind(wx.EVT_BUTTON, self.ShowDialog)

    def ShowDialog(self, event):
        dlg = wx.Dialog(self)
        dlg.Bind(wx.EVT_INIT_DIALOG, lambda e: wx.CallAfter(self.OnModal, e))
        dlg.ShowModal()
        dlg.Destroy()

    def OnModal(self, event):
        wx.MessageBox("Executed after ShowModal")

app = wx.PySimpleApp()
app.TopWindow = TestFrame()
app.TopWindow.Show()
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T10:17:09.603

It was very trivial, just using wx.PD_APP_MODAL style in wx.Dialog allows it to be modal without stopping the program flow, only user input to app is blocked, i thought PD_APP_MODAL is only for progress dialog

# php - 使用 curl 和 PHP 保存文件

> ID：1006604
> 
> 赞同：12
> 
> 时间：2009-06-17T12:07:19.967
> 
> 标签：php, xml, curl

如何使用 curl 和 PHP 保存文件？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-06-17T12:16:55.033

你想要这样的东西吗？

```
function get_file($file, $local_path, $newfilename) 
{ 
    $err_msg = ''; 
    echo "<br>Attempting message download for $file<br>"; 
    $out = fopen($local_path.$newfilename,"wb");
    if ($out == FALSE){ 
      print "File not opened<br>"; 
      exit; 
    } 

    $ch = curl_init(); 

    curl_setopt($ch, CURLOPT_FILE, $out); 
    curl_setopt($ch, CURLOPT_HEADER, 0); 
    curl_setopt($ch, CURLOPT_URL, $file); 

    curl_exec($ch); 
    echo "<br>Error is : ".curl_error ( $ch); 

    curl_close($ch); 
    //fclose($handle); 

}//end function 
```

功能：它是一个函数并接受三个参数

```
get_file($file, $local_path, $newfilename) 
```

`$file`: 是要检索的对象的文件名

`$local_path`: 是存储对象的目录的本地路径

`$newfilename`: 是本地系统上的新文件名

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-06-17T12:15:50.947

您可以使用：

```
<?php
// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab URL and pass it to the browser
$out = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);

$fp = fopen('data.txt', 'w');
fwrite($fp, $out);
fclose($fp);

?> 
```

请参阅：http: [//jp2.php.net/manual/en/function.curl-exec.php](http://jp2.php.net/manual/en/function.curl-exec.php) 和[http://us3.php.net/manual/en/function.fwrite.php](http://us3.php.net/manual/en/function.fwrite.php)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2009-06-17T12:30:07.470

我认为 curl 有 -o 选项可以将输出写入文件而不是标准输出。

在 -o 之后，您必须提供输出文件的名称。

例子：

```
curl -o path_to_the_file 网址

```

# java - Java 摆动计时器

> ID：1006611
> 
> 赞同：16
> 
> 时间：2009-06-17T12:10:02.363
> 
> 标签：java, swing, timer

```
ActionListener taskPerformer = new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        //...Perform a task...

        logger.finest("Reading SMTP Info.");
    }
};
Timer timer = new Timer(100 ,taskPerformer);
timer.setRepeats(false);
timer.start(); 
```

根据文档，这个计时器应该触发一次，但它永远不会触发。我需要它开火一次。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-06-17T12:19:34.560

这个简单的程序对我有用：

```
import java.awt.event.*;
import javax.swing.*;

public class Test {
    public static void main(String [] args) throws Exception{
        ActionListener taskPerformer = new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                //...Perform a task...

                System.out.println("Reading SMTP Info.");
            }
        };
        Timer timer = new Timer(100 ,taskPerformer);
        timer.setRepeats(false);
        timer.start();

        Thread.sleep(5000);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-09T10:18:08.750

该程序将正常工作...

`setRepeats(boolean flag)`用于设置`function(actionPerformed)`重复调用或仅调用一次的函数

1.  `timer.setRepeats(false) == timer`只调用一次 actionperformed 方法
2.  `timer.setRepeats(true) == timer`根据指定时间重复调用 actionPerformed 方法

**摆动定时器工作**

1.  做一次任务
2.  重复时间做任务

**创建摇摆计时器的步骤：**

1.  创建动作监听器
2.  创建计时器构造函数，然后在其中传递时间和动作侦听器
3.  实现执行`actionPerformed()`任务的功能
4.  用于`timer.start()`在计时器构造函数中指定的时间之间启动任务，`timer.stop()`用于停止任务

例子：

```
ActionListener al=new ActionListener() {
    public void actionPerformed(ActionEvent ae) {
        //do your task
        if(work done)
            timer.stop();//stop the task after do the work
    }
};
Timer timer=new Timer(1000,al);//create the timer which calls the actionperformed method for every 1000 millisecond(1 second=1000 millisecond)
timer.start();//start the task 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T12:27:15.713

您的任务可能只需要在事件线程 (EDT) 上*报告*结果，但在后台线程中以某种周期性速率执行实际工作。

[ScheduledExecutorService](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)正是您想要的*。*请记住通过 SwingUtility.invokeLater(...) 在 EDT 上更新 UI 的状态

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:28:02.920

我从日志语句中猜测您正在执行某种 SMTP 操作。我认为我的说法是正确的，`java.swing.Timer`它适用于与 UI 相关的定时操作，因此它为什么需要和 EDT 运行。对于更一般的操作，您应该使用`java.util.Timer`.

本文链接自 JavaDocs - [http://java.sun.com/products/jfc/tsc/articles/timer/](http://java.sun.com/products/jfc/tsc/articles/timer/)

# vb.net - LINQ 除了使用自定义比较器

> ID：1006614
> 
> 赞同：2
> 
> 时间：2009-06-17T12:10:42.923
> 
> 标签：vb.net, linq, iequalitycomparer, except

如果 IEqualityComparer 根据结果集中的单个字段的值排除某些结果，我正在尝试使用自定义实现对 LINQ 结果集使用“Except”方法。

所以，以简化的形式，我有......

```
'' Get collection of published sites...
Dim List1  = (From i In db.Sites _
              Where (i.StatusID = published) _
              Select i.SiteID, _
                     i.SiteName)

'' Find those with a pending site, but exclue all those whose SiteID is in List1...
Dim insComparer = New insCompare
Dim List2 = (From i In db.Sites _
             Where (i.StatusID = pending) _
             Select i.SiteID, _
                    i.SiteName).Except(List1, insComparer) 
```

我的比较器如下...

```
Public Class insCompare
    Implements System.Collections.Generic.IEqualityComparer(Of Object)

    Public Function Equals1(ByVal x As Object, ByVal y As Object) As Boolean Implements System.Collections.Generic.IEqualityComparer(Of Object).Equals
        Return IIf(x.SiteID = y.SiteID, True, False)

    End Function

    Public Function GetHashCode1(ByVal x As Object) As Integer Implements System.Collections.Generic.IEqualityComparer(Of Object).GetHashCode
        Return x.SiteID.ToString.ToLower.GetHashCode()

    End Function

End Class 
```

我在“.Except”行收到一个无效的强制转换异常，并显示消息“无法将'...insCompare'类型的对象强制转换为'System.Collections.Generic.IEqualityComparer'”

任何人都可以解释为什么这可能是请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:25:13.580

您的问题是您实现了 IEqualityComparer(Of Object)，但您的列表是 List(Of AT)，其中 AT 是匿名类型，因此您无法实现 IEqualityComparer(Of AT)。

我认为你的选择是：

1.  声明一个类/结构来保存 SideID/SiteName，并选择该类的一个实例，然后实现 IEqualityComparer(Of NewClass)。
2.  使用后期绑定调用（即，选项显式关闭，就像你现在正在做的那样），并在调用 except 之前在两个列表上放置一个 .Cast(Of Object)() 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T12:30:43.960

使用以下代码。

```
 from t in db.Sites
where
  !
    (from t0 in db.Sites2
    select new {
      t0.SomeID
    }).Contains(new { t.SomeID })
select t 
```

这是基于不在状态。我想这会对你有所帮助。你正在做一些复杂的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T12:17:25.250

看起来它要求您的比较器实现非通用接口`IEqualityComparer`，而您的实现`IEqualityComparer (Of Object)`，这是一个不同的接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:24:38.700

看起来您正在使用数据库作为后端。您**不能**为此提供自定义比较器，因为它不能映射到 TSQL。

你试过`Contains`吗？即`where !List1.Contains(i.SiteID)`？

# tomcat - 我可以通过 server.xml 中的配置在 request.getServerName() 或 request.getLocalAddr() 上操作 tomcats 答案吗

> ID：1006616
> 
> 赞同：0
> 
> 时间：2009-06-17T12:11:25.683
> 
> 标签：tomcat, tcp

如果是这样：如何？

我需要这个，因为服务器在不同子网的不同 IP 下是已知的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T12:33:35.733

据我所知，仅通过 web.xml 中的简单配置更改就无法更改[ServletRequest.getServerName()](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletRequest.html#getServerName())或[ServletRequest.getLocalAddr()返回的值。](http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletRequest.html#getLocalAddr())

但是您可以编写一个 ServletRequest/HttpServletRequest 包装器，它只将所有方法调用委托给原始请求，除了那些您想要返回非标准值的方法。要包装进入您的应用程序的所有请求，您可以实现一个[Filter](http://java.sun.com/javaee/5/docs/api/javax/servlet/Filter.html)，它只包装传入的请求，然后沿着过滤器链传递包装器。然后将在您的 web.xml 中配置过滤器。此过滤器之后的所有内容都将透明地使用您的包装器，并将获得您提供的自定义值。

包装器可能如下所示：

```
public class WrappedRequest implements ServletRequest {

    private final ServletRequest original;

    private String customServerName;

    public WrappedRequest(ServletRequest original) {
        this.original = original;
    }

    // ... delegate all method calls to original

    public String getServerName() {
        if (this.customServerName != null) {
            return this.customServerName;
        }
        return this.original.getServerName();
    }

    public void setServerName(String customServerName) {
        this.customServerName = customServerName;
    }
} 
```

过滤器：

```
public class RequestWrapperFilter implements Filter {

    private final String serverName;

    public void init(FilterConfig filterConfig) {
        this.serverName = filterConfig.getInitParameter("serverName");
    }

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) {
        WrappedRequest wrapped = new WrappedRequest(request);
        wrapper.setServerName(this.serverName);

        chain.doFilter(wrapped, response);
    }

    public void destroy() { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T18:49:29.097

您可以尝试为使用此 Tomcat 实例服务的每个子域设置虚拟主机。

# django - 模型 unique_together 约束 + 无 = 失败？

> ID：1006617
> 
> 赞同：6
> 
> 时间：2009-06-17T12:11:38.383
> 
> 标签：django, django-models, django-forms

2个问题：

*   当 parent=None 和 name 相同时，如何阻止创建重复项？
*   我可以从表单中调用模型方法吗？

请参阅下面的完整详细信息：

# 模型.py

```
class MyTest(models.Model):
    parent = models.ForeignKey('self', null=True, blank=True, related_name='children')
    name = models.CharField(max_length=50)
    slug = models.SlugField(max_length=255, blank=True, unique=True)
    owner = models.ForeignKey(User, null=True)

    class Meta:
        unique_together = ("parent", "name")

    def save(self, *args, **kwargs):
        self.slug = self.make_slug() 
        super(MyTest, self).save(*args, **kwargs)

    def make_slug(self):
        # some stuff here 
        return generated_slug 
```

注意：slug = 也是独一无二的！

# 表格.py

```
class MyTestForm(forms.ModelForm):
    class Meta:
        model = MyTest
        exclude = ('slug',)

    def clean_name(self):
        name = self.cleaned_data.get("name")
        parent = self.cleaned_data.get("parent")

        if parent is None:
            # this doesn't work when MODIFYING existing elements!
            if len(MyTest.objects.filter(name = name, parent = None)) > 0:
                raise forms.ValidationError("name not unique")
        return name 
```

# 细节

当. `unique_together`_ `parent != None`但是，当`parent == None`(null) 它允许创建重复项时。

为了避免这种情况，我尝试使用表单并定义 clean_name 来尝试检查重复项。这在*创建*新对象时有效，但在修改现有对象时无效。

有人提到我应该在 ModelForm 的 .save 上使用 commit=False，但我不知道如何做/实现这个。我还考虑过使用 ModelForm 的 has_changed 来检测模型的更改并允许它们，但是 has_changed 在新创建的带有表单的对象上也返回 true。帮助！

另外，（有点完全不同的问题）我可以从表单访问 make_slug() 模型方法吗？我*相信*目前我的`exclude = ('slug',)`行也忽略了 slug 字段上的“唯一”约束，而在模型保存字段中，我正在生成 slug。我想知道我是否可以在 forms.py 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-29T21:31:21.830

无论您是创建还是更新，您都可以有不同的表单。

实例化表单时使用 instance kwarg。

```
if slug:
    instance = MyTest.object.get( slug=slug )
    form = MyUpdateTestForm( instance=instance )
else:
    form = MyTestForm() 
```

对于第二部分，我认为您可以在其中引入 commit=False，例如：

```
if form.is_valid():
    inst = form.save( commit=False )
    inst.slug = inst.make_slug()
    inst.save() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-17T16:23:13.947

我不确定这是否会解决您的问题，但我建议在最新的 Django 主干代码上测试您的代码。得到它：

```
svn co http://code.djangoproject.com/svn/django/trunk/ 
```

自 1.02 发布以来，已经对 unique_together 进行了多次修复，例如，请参阅[票 9493](http://code.djangoproject.com/ticket/9493)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-17T16:27:56.690

唯一在一起应该是一个元组的元组

```
unique_together = (("parent", "name"),) 
```

# sifr - sIFR 3 r4.36 与 Flash 8 有问题

> ID：1006620
> 
> 赞同：1
> 
> 时间：2009-06-17T12:13:12.403
> 
> 标签：sifr

我无法使用 sIFR 3 r4.36 使用 Flash 8 导出任何字体。Flash 8 始终显示以下错误消息。知道为什么吗？

```
** Error ** Scene=Scene 1, layer=code, frame=1:Line 19: The class or interface 'sIFR' could not be loaded.
     import Options

Total ActionScript Errors: 1     Reported Errors: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T11:59:21.217

确保`sifr.fla`文件和 ActionScript 文件位于同一目录中。

# java - jdk 源代码中的神秘注释：// HD，第 2-1 节

> ID：1006626
> 
> 赞同：6
> 
> 时间：2009-06-17T12:15:02.183
> 
> 标签：java, comments

我只是偶然发现了这个评论。

```
 public static int lowestOneBit(int i) {
    // HD, Section 2-1
    return i & -i;
    } 
```

在 1.5 java 源代码中。这个评论是什么意思？它是对一本书的引用吗？规格？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-17T12:18:32.237

HD 可能指的是 Henry S. Warren[的 Hacker's Delight](https://rads.stackoverflow.com/amzn/click/com/0201914654)。事实上，这个公式出现在第 11 页，第 2-1 节。

# c - 变量的默认状态是什么？

> ID：1006635
> 
> 赞同：4
> 
> 时间：2009-06-17T12:18:38.633
> 
> 标签：c, memory, initialization

当 C 程序启动并将变量分配给内存位置时，C 标准是否说明该值是否已初始化？

```
// global variables
int a;
int b = 0;
static int c; 
```

在上面的代码中，'b' 将被初始化为 0。'a' 的初始值是多少？'c' 有什么不同，因为它对该模块是静态的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-17T12:23:39.060

由于您特别提到了**全局**变量：对于全局变量，无论是否声明它们`static`，它们都将被初始化为0。

**另一方面，**局部变量将是****未定义**的（除非它们被声明`static`，在这种情况下它们也将被初始化为 0——感谢 Tyler McHenry）。翻译过来，这意味着你不能依赖它们包含任何特定的东西——它们只会包含该位置内存中已经存在的任何随机垃圾，这可能因运行而异。**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-17T12:19:50.363

> **编辑：** *以下仅适用于局部变量 - 不适用于全局变量。*

变量的初始值未定义。在某些语言中，变量在内存中的位置在声明时为零，但在 C（和 C++ 中）中，未初始化的变量将包含当时存在于该位置的任何垃圾。

因此，最好的想法是未初始化的变量很可能包含垃圾并具有未定义的行为。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-17T12:26:03.407

`a``c`如果它们是全局的并且未显式初始化，则它们也将为零。对于局部静态变量也是如此。

只有局部非静态变量没有被初始化。使用 malloc 分配的内存也未初始化。

请参阅[`here`](https://stackoverflow.com/questions/604104/does-c-allocate-memory-automatically-for-me/604123#604123)C 中针对不同对象的初始化和分配规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:29:19.593

今天早上我打字太慢了。三个人在我回答时迅速出现，所以我删除了大部分帖子。我找到的链接清晰而简短，所以无论如何我都会发布：[Wikipedia on "uninitialized variable"](http://en.wikipedia.org/wiki/Uninitialized_variable)用于讨论基本问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T12:25:17.683

快速测试显示 a 和 c 为 0。

```
int a;
static int c;
int main() {
    printf("%d %d\n", a, c);
    return 0;
} 
```

a（和c）的位置在编译时确定；也就是说，它们既不会放在堆栈上，也不会放在 malloc 返回的内存间隔中。我认为 C 标准说它们在所有情况下都被初始化为 0。

我对 有 99.9% 的信心，对 有`c`98% 的信心`a`。关键字`static`，在全局变量的上下文中，实际上类似于`private`（比如说）C++ 和 Java：它是关于可见性，而不是存储位置。

Andrew Hare 关于未初始化变量的说法对于存储在堆栈或 malloc 内存中的数据是正确的。对于静态存储的变量，情况并非如此。**

# asp.net - 在 Asp.Net 中使用 NHibernate 更新实体

> ID：1006647
> 
> 赞同：0
> 
> 时间：2009-06-17T12:21:20.563
> 
> 标签：asp.net, nhibernate

更新实体的推荐方法是什么？到目前为止，我想出了两种方法：

1.  只需使用现有的 Id 和更新的属性值创建一个新实体，然后使用 session.SaveOrUpdate()
2.  使用 DTO，使用 session.Load(dto.Id) 检索现有实体，从 dto 分配新值，然后保存。

No1 需要更少的努力，但有时我会遇到异常：“具有相同标识符值的不同对象已与会话相关联”。有没有简单的方法解决这个问题？

我猜第二号可能需要额外前往数据库？

抱歉，如果已经回答了，只是找不到答案。

谢谢乌鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T14:29:27.573

您使用 DTO 的第二个选项是我的首选方式。您的 DTO 应该特定于屏幕（Google Screen Bound DTO），以便屏幕和您的域可以相互独立地更改。

它也不会向数据库添加额外的行程，因为＃1 需要一个断开连接的实体，事后必须重新连接（触发选择）。担心一个额外的选择也有强烈的过早优化的味道。

在从域转换为 DTO 方面，我建议查看 AutoMapper。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:46:07.563

要使用 No1，您可以尝试从 nHibernates 会话中驱逐对象。这将消除有关对象已在会话中的错误。

我会推荐方法 2。特别是如果你想添加任何类型的光锁定。在许多情况下，对数据库的一次额外命中不会那么昂贵。

**编辑**

要检查会话中是否已存在实体，您可以在 Session 实例上使用 Contains(obj) 方法。

# macos - 如何在我的应用程序包装脚本启动后使停靠图标停止弹跳？

> ID：1006648
> 
> 赞同：5
> 
> 时间：2009-06-17T12:21:32.170
> 
> 标签：macos, shell, zsh, dock

所以我最近`.app`为 zsh 脚本制作了一个包装器，但是当我运行它时，应用程序的图标一直在 Dock 中跳跃。

该应用程序基本上是：

```
% find Example.app -type f
Example.app/Contents/Info.plist
Example.app/Contents/MacOS/wrapper.sh
% cat Example.app/Contents/Info.plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
 <!-- tell OSX what the name of the executable is -->
 <key>CFBundleExecutable</key>
 <string>wrapper.sh</string>
</dict>
</plist>
% cat Example.app/Contents/MacOS/wrapper.sh
#!/usr/bin/env zsh
# not my real script, but something else that hangs for a while
sleep 10
% 
```

您也可以[从 github 获取它](http://github.com/rampion/Example-OSX-Application-Wrapper/tree/master)。

有什么方法可以让应用程序图标停止跳动，并像普通应用程序一样工作，然后坐在那里，旁边有一个三角形？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-17T16:47:09.927

应用程序的图标将在 OS X Dock 中反弹，直到应用程序进入其主事件循环并开始响应用户输入。由于您的脚本可能没有运行 Carbon 或 Cocoa 事件循环（请分别参见 Carbon 事件管理器和 NSApplication 的文档），因此 Dock 不断等待，期望出现一个常规的前台 GUI 应用程序。

我成功使用的脚本包装工具是[Platypus](http://www.sveinbjorn.org/platypus)。它可以在执行脚本时运行自己的事件循环，并执行许多其他方便的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T16:26:28.627

你想要[DropScript](http://www.wsanchez.net/software/)。Dock 不适用于这样的 shell 脚本，它需要一些更成熟的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T01:10:08.237

我认为如果您将 LSUIElement 添加到 Info.plist 文件中，它应该可以工作。

# language-agnostic - 如何开发和测试一个发送电子邮件的应用程序（而不用测试数据填充某人的邮箱）？

> ID：1006650
> 
> 赞同：132
> 
> 时间：2009-06-17T12:21:48.563
> 
> 标签：language-agnostic, email, testing, smtp

我有很多发送电子邮件的应用程序。有时一次只有一两条消息。有时是数千条消息。

在开发中，我通常通过用我自己的地址替换任何收件人地址来进行测试。我确信这就是其他人所做的，直到他们厌倦它并找到更好的解决方案。

我正在考虑创建一个虚拟 SMTP 服务器，它只捕获消息并将它们转储到 SQLLite 数据库或 mbox 文件或其他任何东西中。

但是这样的工具*肯定*已经存在了吗？你如何测试发送电子邮件？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-06-18T06:58:57.120

几周前我遇到了同样的问题并写了这个：[http ://smtp4dev.codeplex.com](http://smtp4dev.codeplex.com)

> Windows 7/Vista/XP/2003/2010 兼容的虚拟 SMTP 服务器。位于系统托盘中，不传递收到的消息。可以快速查看、保存收到的消息并检查源/结构。对于测试/调试生成电子邮件的软件很有用。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2010-04-01T10:39:26.787

不久前，我遇到了以下针对**.NET 平台**的解决方案。

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="SpecifiedPickupDirectory">
      <specifiedPickupDirectory pickupDirectoryLocation="C:\TestMailMessages\" />
    </smtp>
  </mailSettings>
</system.net> 
```

只需将上述代码放在您的 App.config 或 Web.config 中。当您现在发送消息时，它将作为文件存储在您提供为“pickupDirectoryLocation”的目录中。奇迹般有效。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2010-04-01T10:20:38.780

现在有一个基于 Web 的 Papercut 版本。

基于应用程序的版本也适用于我。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-06-17T12:26:55.903

Dumbster 可能就是你想要的。这是一个用 Java 编写的开源假 SMTP 服务器。它取代了真正的 SMTP 服务器，因此您可以在实际设置中测试您的应用程序，而无需删除任何代码。您可以确保将正确的消息发送到 SMTP 服务器，而无需实际传递消息。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-06-30T18:21:07.103

这与 smtp4dev 类似，只是在 java 中实现，因此它适用于非 Windows 开发人员。

[http://www.aboutmyip.com/AboutMyXApp/DevNullSmtp.jsp](http://www.aboutmyip.com/AboutMyXApp/DevNullSmtp.jsp)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-07-01T15:08:24.310

还有[Papercut](http://invalidlogic.com/papercut/)和[Neptune](http://www.donovanbrown.com/post/2008/10/20/Neptune.aspx)，可惜这些都不能以便携的方式运行。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-02-09T09:03:55.757

多年来，我一直在使用 ToolHeap 的“测试邮件服务器工具”。

[http://www.toolheap.com/test-mail-server-tool/](http://www.toolheap.com/test-mail-server-tool/)

这是一个简单的应用程序，可以在您的系统托盘中运行并将电子邮件转储到文件夹中。它还可以配置为在您的默认邮件程序中打开每封电子邮件。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2010-04-01T10:49:13.517

如果您使用的是 java，我会使用[Wiser](http://code.google.com/p/subethasmtp/wiki/Wiser)：Wiser 是一个简单的 SMTP 服务器，可用于对发送邮件的应用程序进行单元测试。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-05-18T08:21:18.327

您也可以使用 netDumbster。

[http://netdumbster.codeplex.com/](http://netdumbster.codeplex.com/)

# php - PHP 中的“&”是什么意思？

> ID：1006652
> 
> 赞同：21
> 
> 时间：2009-06-17T12:21:51.483
> 
> 标签：php

考虑这个 PHP 代码：

```
call_user_func(array(&$this, 'method_name'), $args); 
```

我知道它在定义函数时意味着传递引用，但是在调用函数时是这样吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-17T12:29:08.393

从[通过引用](http://us3.php.net/manual/en/language.references.pass.php)文档页面：

> 您可以通过引用函数来传递变量，以便函数可以修改变量。语法如下：

```
<?php
function foo(&$var)
{
    $var++;
}

$a=5;
foo($a);
// $a is 6 here
?> 
```

> ...在最新版本的 PHP 中，当您在 foo(&$a); 中使用 & 时，您将收到一条警告说“调用时传递引用”已被弃用；

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2009-06-17T12:23:08.750

这是一个传递引用。

​​​​​</p>

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-03-25T16:41:48.357

```
call_user_func(array(&$this, 'method_name'), $args); 
```

此代码生成注意事项：注意事项：未定义变量：this

这是一个正确的例子：

```
<?php
 error_reporting(E_ALL);
function increment(&$var)
{
    $var++;
}

$a = 0;
call_user_func('increment', $a);
echo $a."\n";

// You can use this instead
call_user_func_array('increment', array(&$a));
echo $a."\n";
?>
The above example will output:

0
1 
```

# c# - 扩展 System.Data.Linq.DataContext

> ID：1006653
> 
> 赞同：13
> 
> 时间：2009-06-17T12:22:35.800
> 
> 标签：c#, asp.net-mvc, linq, linq-to-sql

我有一个反映我的 dbml 文件的类，它扩展了 DataContext，但出于某种奇怪的原因，它告诉我

> System.Data.Linq.DataContext' 不包含采用“0”参数的构造函数”

我已经按照各种教程进行了此操作，但没有遇到此问题，而且 VS 似乎无法修复它。

这是我的实现

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Reflection;
using System.Text;
using IntranetMvcAreas.Areas.Accounts.Models;

namespace IntranetMvcAreas
{
  partial class ContractsControlDataContext : DataContext
  {
    [FunctionAttribute(Name="dbo.procCC_Contract_Select")]
    [ResultType(typeof(Contract))]
    [ResultType(typeof(ContractCostCentre))]
    [ResultType(typeof(tblCC_Contract_Data_Terminal))]
    [ResultType(typeof(tblCC_CDT_Data_Service))]
    [ResultType(typeof(tblCC_Data_Service))]
    public IMultipleResults procCC_Contract_Select(
        [Parameter(Name = "ContractID", DbType = "Int")] System.Nullable<int> ContractID,
        [Parameter(Name = "ResponsibilityKey", DbType = "Int")] System.Nullable<int> ResponsibilityKey,
        [Parameter(Name = "ExpenseType", DbType = "Char")] System.Nullable<char> ExpenseType,
        [Parameter(Name = "SupplierID", DbType = "Int")] System.Nullable<int> SupplierID)
    {

      IExecuteResult result = this.ExecuteMethodCall(this, (MethodInfo)(MethodInfo.GetCurrentMethod()), ContractID, ResponsibilityKey, ExpenseType, SupplierID);
      return (IMultipleResults)result.ReturnValue;
    }
  }
} 
```

这就是`ContractsControlDataContext`问题所在

（顺便说一句，这与我最近发表的一篇文章无关，只是我在做同样的事情）

**编辑**

这可能值得澄清，所以请仔细阅读。

如果您*不在*分部类中扩展 DataContext，则`ExecuteMethodCall`无法访问。

> “Intranet.ContractsControlDataContext”不包含“ExecuteMethodCall”的定义，并且找不到接受“Intranet.ContractsControlDataContext”类型的第一个参数的扩展方法“ExecuteMethodCall”（您是否缺少 using 指令或程序集引用？）

也许我错过了一些非常愚蠢的东西？

**解决了**

我想也许 Visual Studio 在这里挣扎，但我完全依赖于自动生成的代码。当右键单击数据库建模语言设计视图并点击“查看代码”时，它会自动在特定命名空间中为您创建一个部分类，*但是*，这个命名空间是错误的。如果有人能为我澄清这一点，我将不胜感激。

.designer.cs 文件位于 .cs 中`namespace Intranet.Areas.Accounts.Models`，但 .cs 文件（Visual Studio 为 .designer.cs 文件生成**的**部分**类**）位于. 在这方面比我更有经验的人很容易发现。**`namespace Intranet`**

 **现在真正的问题是，我将谁的答案标记为正确？因为你们中的许多人为发现这个问题做出了贡献。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-17T12:34:25.433

linq 的对象 DataContext 没有空的构造函数。由于它没有空的构造函数，因此您必须将它所排除的项目之一传递给基础。

来自 DataContext 的元数据。

```
// Summary:
//     Initializes a new instance of the System.Data.Linq.DataContext class by referencing
//     the connection used by the .NET Framework.
//
// Parameters:
//   connection:
//     The connection used by the .NET Framework.
public DataContext(IDbConnection connection);
//
// Summary:
//     Initializes a new instance of the System.Data.Linq.DataContext class by referencing
//     a file source.
//
// Parameters:
//   fileOrServerOrConnection:
//     This argument can be any one of the following: The name of a file where a
//     SQL Server Express database resides.  The name of a server where a database
//     is present. In this case the provider uses the default database for a user.
//      A complete connection string. LINQ to SQL just passes the string to the
//     provider without modification.
public DataContext(string fileOrServerOrConnection);
//
// Summary:
//     Initializes a new instance of the System.Data.Linq.DataContext class by referencing
//     a connection and a mapping source.
//
// Parameters:
//   connection:
//     The connection used by the .NET Framework.
//
//   mapping:
//     The System.Data.Linq.Mapping.MappingSource.
public DataContext(IDbConnection connection, MappingSource mapping);
//
// Summary:
//     Initializes a new instance of the System.Data.Linq.DataContext class by referencing
//     a file source and a mapping source.
//
// Parameters:
//   fileOrServerOrConnection:
//     This argument can be any one of the following: The name of a file where a
//     SQL Server Express database resides.  The name of a server where a database
//     is present. In this case the provider uses the default database for a user.
//      A complete connection string. LINQ to SQL just passes the string to the
//     provider without modification.
//
//   mapping:
//     The System.Data.Linq.Mapping.MappingSource.
public DataContext(string fileOrServerOrConnection, MappingSource mapping); 
```

像这样简单的东西会起作用。任何从 DataConext 继承的类都必须至少将它排除的一种类型传递给基本构造函数。

```
public class SomeClass : System.Data.Linq.DataContext
{
    public SomeClass(string connectionString)
        :base(connectionString)
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-17T12:36:53.277

我*假设*命名空间和（数据上下文）类型名称是正确的......首先仔细检查。

在我看来，codegen 失败了，所以你只有**一半**的数据上下文（而不是 IDE 打算提供的那一半）。LINQ-to-SQL 中有一个已知错误，如果（如您的情况）`using`声明位于命名空间之上，则此错误可能会失败。不，我不是在开玩笑。尝试更改代码：

```
namespace IntranetMvcAreas
{
    using System;
    using System.Collections.Generic;
    using System.Data;
    using System.Data.Linq;
    using System.Data.Linq.Mapping;
    using System.Reflection;
    using System.Text;
    using IntranetMvcAreas.Areas.Accounts.Models;
    // the rest of your code 
```

现在进入设计器，调整一些东西（例如，更改属性的名称并再次将其改回）并点击保存（这会强制代码生成）。现在看看它是否有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-22T08:03:53.053

David Basarab 的答案是正确的，应该标记为答案。

您的类没有提供任何构造函数，因此提供了默认构造函数。仅当基类具有无参数构造函数时，才能提供派生类的默认构造函数。但是，在此示例中作为基类的 DataContext 类不提供无参数构造函数。这解释了编译器返回给您的错误消息。

**编辑**：

例子：

```
class A {
    public A(string s) {
    }
}

class B : A {
} 
```

在 B 类中返回错误的编译尝试：

> “A”不包含采用“0”参数的构造函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-23T19:04:04.410

生成器关于构造函数的行为在某种程度上由 DBML 的 Connection 属性控制。如果 Application Settings 为 True，并且有设置属性名称，它将生成一个构造函数，该构造函数从程序集的 Application Settings 中读取连接字符串。如果有连接字符串，它将在 .designer.cs 文件中生成一个带有硬编码连接字符串的构造函数。如果两者都没有，它将不会生成没有连接字符串参数的构造函数，并且您可以安全地在部分类中提供无参数构造函数而不会导致冲突。

这些设置更改无法在数据库模式的往返行程中继续存在，但我只是在进行更改之后和保存 DBML 之前从属性中清除连接设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T16:12:51.577

@Sander：我认为你是在正确的轨道上。我没有使用部分类并为 sproc 实现函数，而是关注[了这个博客](http://www.infosysblogs.com/microsoft/2008/02/querying_store_proceduressp_re.html)并使用 *.designer.cs 文件来实现它。虽然我仍然遇到无效类型转换的问题，但它确实摆脱了原来的问题。**

# mysql - 查找两个纬度/经度点之间距离的最快方法

> ID：1006654
> 
> 赞同：237
> 
> 时间：2009-06-17T12:22:41.247
> 
> 标签：mysql, location, gis

我目前在 mysql 数据库中只有不到一百万个位置，所有位置都包含经度和纬度信息。

我试图通过查询找到一个点与许多其他点之间的距离。它没有我想要的那么快，尤其是每秒点击 100 次以上。

除了 mysql 之外，是否有更快的查询或可能更快的系统？我正在使用这个查询：

```
SELECT 
  name, 
   ( 3959 * acos( cos( radians(42.290763) ) * cos( radians( locations.lat ) ) 
   * cos( radians(locations.lng) - radians(-71.35368)) + sin(radians(42.290763)) 
   * sin( radians(locations.lat)))) AS distance 
FROM locations 
WHERE active = 1 
HAVING distance < 10 
ORDER BY distance; 
```

*注意：提供的距离以**英里**为单位。如果您需要**公里**，请使用`6371`而不是`3959`.*

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2009-06-17T12:25:00.383

*   使用表中数据类型的`Point`值创建您的点。[从 Mysql 5.7.5](https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-5.html#mysqld-5-7-5-spatial-support)[开始，表现在也支持](https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-5.html#mysqld-5-7-5-spatial-support)[索引。](https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-5.html#mysqld-5-7-5-spatial-support)`Geometry``MyISAM`[`InnoDB``SPATIAL`](https://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-5.html#mysqld-5-7-5-spatial-support)

*   在这些点上创建`SPATIAL`索引

*   用于`MBRContains()`查找值：

    ```
     SELECT  *
      FROM    table
      WHERE   MBRContains(LineFromText(CONCAT(
              '('
              , @lon + 10 / ( 111.1 / cos(RADIANS(@lat)))
              , ' '
              , @lat + 10 / 111.1
              , ','
              , @lon - 10 / ( 111.1 / cos(RADIANS(@lat)))
              , ' '
              , @lat - 10 / 111.1 
              , ')' )
              ,mypoint) 
    ```

, 或, 在`MySQL 5.1`及以上:

```
 SELECT  *
    FROM    table
    WHERE   MBRContains
                    (
                    LineString
                            (
                            Point (
                                    @lon + 10 / ( 111.1 / COS(RADIANS(@lat))),
                                    @lat + 10 / 111.1
                                  ),
                            Point (
                                    @lon - 10 / ( 111.1 / COS(RADIANS(@lat))),
                                    @lat - 10 / 111.1
                                  ) 
                            ),
                    mypoint
                    ) 
```

这将选择框内大约所有的点`(@lat +/- 10 km, @lon +/- 10km)`。

这实际上不是一个盒子，而是一个球面矩形：球体的经纬线段。这可能与**弗朗兹约瑟夫地**的普通矩形不同，但在大多数有人居住的地方都非常接近。

*   应用额外的过滤来选择圆圈内的所有内容（不是正方形）

*   可能应用额外的精细过滤来解决大圆距离（对于大距离）

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2009-06-17T12:42:41.753

不是 MySql 特定的答案，但它会提高你的 sql 语句的性能。

您实际上正在做的是计算到表中每个点的距离，看看它是否在给定点的 10 个单位内。

在运行此 sql 之前，您可以做的是创建四个点，在一边绘制一个 20 个单位的框，您的点在中心，即。(x1,y1)。. . (x4, y4)，其中 (x1,y1) 是 (givenlong + 10 个单位，givenLat + 10units) 。. . （givenLong - 10 个单位，givenLat -10 个单位）。 *实际上，你只需要两个点，左上角和右下角分别称为 (X1, Y1) 和 (X2, Y2)*

现在，您的 SQL 语句使用这些点来排除距离您给定点绝对超过 10u 的行，它可以使用纬度和经度上的索引，因此将比您目前拥有的快几个数量级。

例如

```
select . . . 
where locations.lat between X1 and X2 
and   locations.Long between y1 and y2; 
```

盒子方法可能会返回误报（您可以在盒子的角落拾取距离给定点 > 10u 的点），因此您仍然需要计算每个点的距离。但是，这又会快得多，因为您已将要测试的点数大大限制为框内的点。

我称这种技术为“在盒子里思考”:)

**编辑：**这可以放在一个 SQL 语句中吗？

我不知道 mySql 或 Php 能做什么，抱歉。我不知道构建这四个点的最佳位置在哪里，也不知道如何将它们传递给 PHP 中的 mySql 查询。但是，一旦您掌握了这四点，就没有什么能阻止您将自己的 SQL 语句与我的结合起来了。

```
select name, 
       ( 3959 * acos( cos( radians(42.290763) ) 
              * cos( radians( locations.lat ) ) 
              * cos( radians( locations.lng ) - radians(-71.35368) ) 
              + sin( radians(42.290763) ) 
              * sin( radians( locations.lat ) ) ) ) AS distance 
from locations 
where active = 1 
and locations.lat between X1 and X2 
and locations.Long between y1 and y2
having distance < 10 ORDER BY distance; 
```

我知道使用 MS SQL 我可以构建一个声明四个浮点数（X1、Y1、X2、Y2）并在“主”选择语句之前计算它们的 SQL 语句，就像我说的那样，我不知道这是否可以用mysql。但是，我仍然倾向于在 C# 中构建这四个点并将它们作为参数传递给 SQL 查询。

抱歉，我无法提供更多帮助，如果有人可以回答 MySQL 和 Php 的特定部分，请随时编辑此答案。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-08-20T14:27:52.097

我需要解决类似的问题（按与单点的距离过滤行）并将原始问题与答案和评论相结合，我想出了在 MySQL 5.6 和 5.7 上都非常适合我的解决方案。

```
SELECT 
    *,
    (6371 * ACOS(COS(RADIANS(56.946285)) * COS(RADIANS(Y(coordinates))) 
    * COS(RADIANS(X(coordinates)) - RADIANS(24.105078)) + SIN(RADIANS(56.946285))
    * SIN(RADIANS(Y(coordinates))))) AS distance
FROM places
WHERE MBRContains
    (
    LineString
        (
        Point (
            24.105078 + 15 / (111.320 * COS(RADIANS(56.946285))),
            56.946285 + 15 / 111.133
        ),
        Point (
            24.105078 - 15 / (111.320 * COS(RADIANS(56.946285))),
            56.946285 - 15 / 111.133
        )
    ),
    coordinates
    )
HAVING distance < 15
ORDER By distance 
```

`coordinates`是具有类型的字段`POINT`并且具有`SPATIAL`索引
`6371`用于计算距离（以公里
`56.946285`为单位） 中心点的纬度 中心点
`24.105078`的经度 以
`15`公里为单位的最大距离

在我的测试中，MySQL 使用`coordinates`字段上的空间索引来快速选择矩形内的所有行，然后计算所有过滤位置的实际距离，以排除矩形角的位置，只留下圆圈内的位置。

这是我的结果的可视化：

[![地图](../Images/47563dd8836a327454e8f57b71b9874a.png)](https://i.stack.imgur.com/IEW7z.png)

灰色星星可视化地图上的所有点，黄色星星是 MySQL 查询返回的点。矩形角内（但在圆形外）的灰色星由子句选择`MBRContains()`然后取消选择。`HAVING`

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-06-11T17:41:54.030

以下 MySQL 函数已发布在[此博客文章](https://zcentric.com/2010/03/11/calculate-distance-in-mysql-with-latitude-and-longitude/)中。我没有对其进行太多测试，但从我从帖子中收集到的信息来看，如果您的[纬度和经度字段被索引](http://mysql.rjweb.org/doc.php/latlng)，这可能对您有用：

```
DELIMITER $$

DROP FUNCTION IF EXISTS `get_distance_in_miles_between_geo_locations` $$
CREATE FUNCTION get_distance_in_miles_between_geo_locations(
  geo1_latitude decimal(10,6), geo1_longitude decimal(10,6), 
  geo2_latitude decimal(10,6), geo2_longitude decimal(10,6)) 
returns decimal(10,3) DETERMINISTIC
BEGIN
  return ((ACOS(SIN(geo1_latitude * PI() / 180) * SIN(geo2_latitude * PI() / 180) 
    + COS(geo1_latitude * PI() / 180) * COS(geo2_latitude * PI() / 180) 
    * COS((geo1_longitude - geo2_longitude) * PI() / 180)) * 180 / PI()) 
    * 60 * 1.1515);
END $$

DELIMITER ; 
```

## **示例用法：**

假设一个`places`用字段`latitude`&调用的表`longitude`：

> ```
> SELECT get_distance_in_miles_between_geo_locations(-34.017330, 22.809500,
> latitude, longitude) AS distance_from_input FROM places; 
> ```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-11-07T14:12:49.073

如果您使用的是 MySQL 5.7.*，那么您可以使用**st_distance_sphere(POINT, POINT)**。

```
Select st_distance_sphere(POINT(-2.997065, 53.404146 ), POINT(58.615349, 23.56676 ))/1000  as distcance 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-10-14T08:20:25.260

```
SELECT * FROM (SELECT *,(((acos(sin((43.6980168*pi()/180)) * 
sin((latitude*pi()/180))+cos((43.6980168*pi()/180)) * 
cos((latitude*pi()/180)) * cos(((7.266903899999988- longitude)* 
pi()/180))))*180/pi())*60*1.1515 ) as distance 
FROM wp_users WHERE 1 GROUP BY ID limit 0,10) as X 
ORDER BY ID DESC 
```

这是MySQL中到点之间的距离计算查询，我在一个长数据库中使用它，它工作得很好！注意：根据您的要求进行更改（数据库名称、表名称、列等）。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-04-27T05:50:37.573

```
set @latitude=53.754842;
set @longitude=-2.708077;
set @radius=20;

set @lng_min = @longitude - @radius/abs(cos(radians(@latitude))*69);
set @lng_max = @longitude + @radius/abs(cos(radians(@latitude))*69);
set @lat_min = @latitude - (@radius/69);
set @lat_max = @latitude + (@radius/69);

SELECT * FROM postcode
WHERE (longitude BETWEEN @lng_min AND @lng_max)
AND (latitude BETWEEN @lat_min and @lat_max); 
```

[来源](https://blog.fedecarg.com/2009/02/08/geo-proximity-search-the-haversine-equation/)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-04-22T06:03:47.060

```
 select
   (((acos(sin(('$latitude'*pi()/180)) * sin((`lat`*pi()/180))+cos(('$latitude'*pi()/180)) 
    * cos((`lat`*pi()/180)) * cos((('$longitude'- `lng`)*pi()/180))))*180/pi())*60*1.1515) 
    AS distance
    from table having distance<22; 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-03-03T09:57:24.090

一个 MySQL 函数，它返回两个坐标之间的米数：

```
CREATE FUNCTION DISTANCE_BETWEEN (lat1 DOUBLE, lon1 DOUBLE, lat2 DOUBLE, lon2 DOUBLE)
RETURNS DOUBLE DETERMINISTIC
RETURN ACOS( SIN(lat1*PI()/180)*SIN(lat2*PI()/180) + COS(lat1*PI()/180)*COS(lat2*PI()/180)*COS(lon2*PI()/180-lon1*PI()/180) ) * 6371000 
```

要以不同的格式返回值，请将`6371000`函数中的 替换为您选择的单位中的地球半径。例如，km 是`6371`，miles 是`3959`。

要使用该函数，只需像调用 MySQL 中的任何其他函数一样调用它。例如，如果你有一张桌子`city`，你可以找到每个城市到其他城市的距离：

```
SELECT
    `city1`.`name`,
    `city2`.`name`,
    ROUND(DISTANCE_BETWEEN(`city1`.`latitude`, `city1`.`longitude`, `city2`.`latitude`, `city2`.`longitude`)) AS `distance`
FROM
    `city` AS `city1`
JOIN
    `city` AS `city2` 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-08-16T10:10:52.100

有关如何安装为 MySQL 插件的详细信息的完整代码在这里：[https ://github.com/lucasepe/lib_mysqludf_haversine](https://github.com/lucasepe/lib_mysqludf_haversine)

我去年发布了这个作为评论。由于好心@TylerCollier 建议我发布作为答案，就在这里。

另一种方法是编写一个自定义 UDF 函数，该函数返回两点的半正弦距离。这个函数可以接受输入：

```
lat1 (real), lng1 (real), lat2 (real), lng2 (real), type (string - optinal - 'km', 'ft', 'mi') 
```

所以我们可以这样写：

```
SELECT id, name FROM MY_PLACES WHERE haversine_distance(lat1, lng1, lat2, lng2) < 40; 
```

获取距离小于 40 公里的所有记录。或者：

```
SELECT id, name FROM MY_PLACES WHERE haversine_distance(lat1, lng1, lat2, lng2, 'ft') < 25; 
```

获取距离小于 25 英尺的所有记录。

核心功能是：

```
double
haversine_distance( UDF_INIT* initid, UDF_ARGS* args, char* is_null, char *error ) {
    double result = *(double*) initid->ptr;
    /*Earth Radius in Kilometers.*/ 
    double R = 6372.797560856;
    double DEG_TO_RAD = M_PI/180.0;
    double RAD_TO_DEG = 180.0/M_PI;
    double lat1 = *(double*) args->args[0];
    double lon1 = *(double*) args->args[1];
    double lat2 = *(double*) args->args[2];
    double lon2 = *(double*) args->args[3];
    double dlon = (lon2 - lon1) * DEG_TO_RAD;
    double dlat = (lat2 - lat1) * DEG_TO_RAD;
    double a = pow(sin(dlat * 0.5),2) + 
        cos(lat1*DEG_TO_RAD) * cos(lat2*DEG_TO_RAD) * pow(sin(dlon * 0.5),2);
    double c = 2.0 * atan2(sqrt(a), sqrt(1-a));
    result = ( R * c );
    /*
     * If we have a 5th distance type argument...
     */
    if (args->arg_count == 5) {
        str_to_lowercase(args->args[4]);
        if (strcmp(args->args[4], "ft") == 0) result *= 3280.8399;
        if (strcmp(args->args[4], "mi") == 0) result *= 0.621371192;
    }

    return result;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-06-29T11:59:34.247

可以使用[球面投影](http://en.wikipedia.org/wiki/Geographical_distance#Spherical_Earth_projected_to_a_plane)进行快速、简单和准确（对于更小距离）的近似。至少在我的路由算法中，与正确计算相比，我得到了 20% 的提升。在 Java 代码中，它看起来像：

```
public double approxDistKm(double fromLat, double fromLon, double toLat, double toLon) {
    double dLat = Math.toRadians(toLat - fromLat);
    double dLon = Math.toRadians(toLon - fromLon);
    double tmp = Math.cos(Math.toRadians((fromLat + toLat) / 2)) * dLon;
    double d = dLat * dLat + tmp * tmp;
    return R * Math.sqrt(d);
} 
```

不确定 MySQL（对不起！）。

确保您了解限制（assertEquals 的第三个参数表示以公里为单位的精度）：

```
 float lat = 24.235f;
    float lon = 47.234f;
    CalcDistance dist = new CalcDistance();
    double res = 15.051;
    assertEquals(res, dist.calcDistKm(lat, lon, lat - 0.1, lon + 0.1), 1e-3);
    assertEquals(res, dist.approxDistKm(lat, lon, lat - 0.1, lon + 0.1), 1e-3);

    res = 150.748;
    assertEquals(res, dist.calcDistKm(lat, lon, lat - 1, lon + 1), 1e-3);
    assertEquals(res, dist.approxDistKm(lat, lon, lat - 1, lon + 1), 1e-2);

    res = 1527.919;
    assertEquals(res, dist.calcDistKm(lat, lon, lat - 10, lon + 10), 1e-3);
    assertEquals(res, dist.approxDistKm(lat, lon, lat - 10, lon + 10), 10); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-11-21T20:40:34.317

这是一个非常详细的关于使用 MySQL 进行地理距离搜索的描述，这是一个基于对 mysql 执行 Haversine 公式的解决方案。包含理论、实现和进一步性能优化的完整解决方案描述。尽管在我的情况下空间优化部分无法正常工作。 [http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-09-04T15:18:29.430

阅读[使用 MySQL 进行地理距离搜索](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)，这是一种基于对 MySQL 实施 Haversine 公式的解决方案。这是一个完整的解决方案描述，包括理论、实现和进一步的性能优化。尽管在我的情况下空间优化部分无法正常工作。

我注意到这里有两个错误：

1.  `abs`在 p8 上的 select 语句中的使用。我只是省略`abs`了它，它起作用了。

2.  p27 上的空间搜索距离函数不会转换为弧度或将经度乘以`cos(latitude)`，除非考虑到他的空间数据已加载（无法从文章的上下文中看出），但他在 p26 上的示例表明他的空间数据`POINT`未加载弧度或度数。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-04-09T07:28:49.617

```
$objectQuery = "SELECT table_master.*, ((acos(sin((" . $latitude . "*pi()/180)) * sin((`latitude`*pi()/180))+cos((" . $latitude . "*pi()/180)) * cos((`latitude`*pi()/180)) * cos(((" . $longitude . "- `longtude`)* pi()/180))))*180/pi())*60*1.1515  as distance FROM `table_post_broadcasts` JOIN table_master ON table_post_broadcasts.master_id = table_master.id WHERE table_master.type_of_post ='type' HAVING distance <='" . $Radius . "' ORDER BY distance asc"; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-16T19:02:12.790

使用 mysql

```
SET @orig_lon = 1.027125;
SET @dest_lon = 1.027125;

SET @orig_lat = 2.398441;
SET @dest_lat = 2.398441;

SET @kmormiles = 6371;-- for distance in miles set to : 3956

SELECT @kmormiles * ACOS(LEAST(COS(RADIANS(@orig_lat)) * 
 COS(RADIANS(@dest_lat)) * COS(RADIANS(@orig_lon - @dest_lon)) + 
 SIN(RADIANS(@orig_lat)) * SIN(RADIANS(@dest_lat)),1.0)) as distance; 
```

见：[https ://andrew.hedges.name/experiments/haversine/](https://andrew.hedges.name/experiments/haversine/)

请参阅：[https ://stackoverflow.com/a/24372831/5155484](https://stackoverflow.com/a/24372831/5155484)

见：[http ://www.plumislandmedia.net/mysql/haversine-mysql-nearest-loc/](http://www.plumislandmedia.net/mysql/haversine-mysql-nearest-loc/)

注意：`LEAST`用于避免空值作为[https://stackoverflow.com/a/24372831/5155484上建议的评论](https://stackoverflow.com/a/24372831/5155484)

# java - java原始整数是设计的还是偶然的？

> ID：1006655
> 
> 赞同：41
> 
> 时间：2009-06-17T12:22:41.603
> 
> 标签：java, multithreading

就此而言，java原始整数（int）是否是原子的？两个线程共享一个 int 的一些实验似乎表明它们*是*，但当然没有证据表明它们*不是*并不意味着它们是。

具体来说，我运行的测试是这样的：

```
public class IntSafeChecker {
    static int thing;
    static boolean keepWatching = true;

    // Watcher just looks for monotonically increasing values   
    static class Watcher extends Thread {
        public void run() {
            boolean hasBefore = false;
            int thingBefore = 0;

            while( keepWatching ) {
                // observe the shared int
                int thingNow = thing;
                // fake the 1st value to keep test happy
                if( hasBefore == false ) {
                    thingBefore = thingNow;
                    hasBefore = true;
                }
                // check for decreases (due to partially written values)
                if( thingNow < thingBefore ) {
                    System.err.println("MAJOR TROUBLE!");
                }
                thingBefore = thingNow;
            }
        }
    }

    // Modifier just counts the shared int up to 1 billion
    static class Modifier extends Thread {
        public void run() {
            int what = 0;
            for(int i = 0; i < 1000000000; ++i) {
                what += 1;
                thing = what;
            }
            // kill the watcher when done
            keepWatching = false;
        }
    }

    public static void main(String[] args) {
        Modifier m = new Modifier();
        Watcher w = new Watcher();
        m.start();
        w.start();
    }
} 
```

（并且仅在 32 位 Windows PC 上使用 java jre 1.6.0_07 进行了尝试）

本质上，修改器将计数序列写入共享整数，而观察器检查观察值是否永远不会减少。在必须将 32 位值作为四个单独的字节（甚至两个 16 位字）访问的机器上，Watcher 有可能会捕获处于不一致、半更新状态的共享整数，并检测到值减小而不是增加。无论（假设的）数据字节是收集/写入 LSB 1st 还是 MSB 1st，这都应该有效，但充其量只是概率性的。

考虑到今天的宽数据路径，32 位值很可能是有效的原子，即使 java 规范不需要它。事实上，对于 32 位数据总线，您可能需要更加努力地获得对*字节*的原子访问而不是对 32 位整数的访问。

谷歌搜索“java原始线程安全”会发现关于线程安全类和对象的大量内容，但查找原始信息似乎是在大海捞针。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-06-17T12:31:03.973

默认情况下，Java 中的所有内存访问都是原子的，除了`long`and `double`（它*可能*是原子的，但不一定是原子的）。老实说，这并没有说*得很清楚，但我相信这就是暗示。*

从JLS 的[第 17.4.3 节：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3)

> 在顺序一致的执行中，所有单独的操作（例如读取和写入）都有一个与程序顺序一致的总顺序，并且每个单独的操作都是原子的，并且对每个线程都是立即可见的。

然后在[17.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7)中：

> 一些实现可能会发现将 64 位 long 或 double 值的单个写入操作划分为相邻 32 位值的两个写入操作很方便。为了提高效率，这种行为是特定于实现的；Java 虚拟机可以自由地以原子方式或分两部分执行对 long 和 double 值的写入。

请注意，原子性与波动性非常不同。

当一个线程将整数更新为 5 时，可以保证另一个线程不会看到 1 或 4 或任何其他中间状态，但如果没有任何显式的易变性或锁定，另一个线程可以永远看到 0。

关于努力获得对字节的原子访问，你是对的：VM 很可能必须努力……但它确实必须这样做。从规范的[第 17.6 节：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.6)

> 一些处理器不提供写入单个字节的能力。在这样的处理器上通过简单地读取整个字，更新适当的字节，然后将整个字写回内存来实现字节数组更新是非法的。这个问题有时被称为字撕裂，并且在不能轻易单独更新单个字节的处理器上，将需要一些其他方法。

换句话说，这取决于 JVM 是否正确。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-06-17T12:29:01.233

*   再多的测试都无法证明线程安全——它只能*反驳*它；
*   [我在JLS 17.7](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.7)中找到了一个间接参考，其中指出

> 一些实现可能会发现将 64 位 long 或 double 值的单个写入操作划分为相邻 32 位值的两个写入操作很方便。

再往下

> 出于 Java 编程语言内存模型的目的，对非易失性 long 或 double 值的单次写入被视为两次单独的写入：每个 32 位一半。

这似乎意味着对 int 的写入是原子的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-06-29T22:40:49.720

我同意 Jon Skeet 的观点，我想补充一点，很多人混淆了原子性、易变性和线程安全的概念，因为有时这些术语可以互换使用。
例如，考虑一下：

```
private static int i = 0;
public void increment() { i++; } 
```

虽然有人可能会争辩说这个操作是原子的，但所提到的假设是错误的。
该语句`i++;`执行三个操作：
1) 读取
2) 更新
3) 写入

因此，对这个变量进行操作的线程应该像这样同步：

```
private static int i = 0;
private static final Object LOCK = new Object();
public void increment() {
   synchronized(LOCK) {
       i++;
    } 
} 
```

或这个：

```
private static int i = 0;
public static synchronized void increment() {
   i++; 
} 
```

请注意，对于单个对象实例，调用由多个线程访问的方法并对共享的可变数据进行操作，必须考虑到方法的参数、局部变量和返回值对于每个线程都是局部的这一事实。

有关更多信息，请查看此链接：
[http ://www.javamex.com/tutorials/synchronization_volatile.shtml](http://www.javamex.com/tutorials/synchronization_volatile.shtml)

希望这可以帮助。

**更新**：还有一种情况是您可以在类对象本身上进行同步。更多信息：[如何在运行 java 中类的不同实例的线程之间同步静态变量？](https://stackoverflow.com/questions/2120248/how-to-synchronize-a-static-variable-among-threads-running-different-instances-o)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-17T12:42:10.707

从整数或任何较小类型的读取或写入应该是原子的，但正如 Robert 所指出的，long 和 double 可能取决于实现，也可能不取决于实现。但是，任何同时使用读取和写入的操作，包括所有增量运算符，都不是原子的。因此，如果您必须让线程在整数 i=0 上运行，一个执行 i++，另一个执行 i=10，则结果可能是 1、10 或 11。

对于这样的操作，您应该查看[AtomicInteger](http://java.sun.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)，它具有在检索旧值时以原子方式修改值或以原子方式递增值的方法。

最后，线程可能会缓存变量的值，并且不会看到其他线程对其所做的更改。为确保两个线程始终看到另一个线程所做的更改，您需要将变量标记为易失性。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-24T11:47:32.500

我认为它不像你预期的那样工作：

```
private static int i = 0;
public void increment() {
   synchronized (i) { 
      i++; 
   }
} 
```

integer 是不可变的，因此您始终在不同的对象上同步。int "i" 被自动装箱为 Integer 对象，然后您对其设置锁定。如果另一个线程进入此方法 int i 将自动装箱到另一个 Integer 对象，并且您之前在不同的对象上设置了锁定。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-19T13:34:12.977

这不是原子的：

```
i++; 
```

然而，这是：

```
i = 5; 
```

我认为这是一些混乱的地方。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T12:30:16.613

这有点复杂，并且与系统字长有关。Bruce Eckel 更详细地讨论了它：[Java 线程](http://www.artima.com/weblogs/viewpost.jsp?thread=126834)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T02:08:36.153

原子读取和写入仅意味着您永远不会读取，例如 int 更新的前 16 位和旧值的另一个。

这没有说明其他线程何时看到这些写入。

长话短说，当两个线程在它们之间没有内存障碍的情况下竞争时，就会丢失一些东西。

启动两个或多个线程，它们递增单个共享整数并计算它们自己的增量。当整数达到某个值时（例如，INT_MAX。很好而且很大，可以让事情升温）停止一切并返回 int 的值和每个线程执行的增量数。

```
 import java.util.Stack;

public class Test{

  static int ctr = Integer.MIN_VALUE;
  final static int THREADS = 4;

  private static void runone(){
    ctr = 0;
    Stack<Thread> threads = new Stack<>();
    for(int i = 0; i < THREADS; i++){
      Thread t = new Thread(new Runnable(){
        long cycles = 0;

        @Override
        public void run(){
          while(ctr != Integer.MAX_VALUE){
            ctr++;
            cycles++;
          }
          System.out.println("Cycles: " + cycles + ", ctr: " + ctr);
        }
      });
      t.start();
      threads.push(t);
    }
    while(!threads.isEmpty())
      try{
        threads.pop().join();
      }catch(InterruptedException e){
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    System.out.println();
  }

  public static void main(String args[]){
    System.out.println("Int Range: " + ((long) Integer.MAX_VALUE - (long) Integer.MIN_VALUE));
    System.out.println("  Int Max: " + Integer.MAX_VALUE);
    System.out.println();
    for(;;)
      runone();
  }
} 
```

这是在我的四核机器上进行的测试结果（可以随意使用代码中的线程数，显然我只是匹配了我的核心数）：

```
Int Range: 4294967295
Int Max: 2147483647

Cycles: 2145700893, ctr: 76261202
Cycles: 2147479716, ctr: 1825148133
Cycles: 2146138184, ctr: 1078605849
Cycles: 2147282173, ctr: 2147483647

Cycles: 2147421893, ctr: 127333260
Cycles: 2146759053, ctr: 220350845
Cycles: 2146742845, ctr: 450438551
Cycles: 2146537691, ctr: 2147483647

Cycles: 2110149932, ctr: 696604594
Cycles: 2146769437, ctr: 2147483647
Cycles: 2147095646, ctr: 2147483647
Cycles: 2147483647, ctr: 2147483647

Cycles: 2147483647, ctr: 330141890
Cycles: 2145029662, ctr: 2147483647
Cycles: 2143136845, ctr: 2147483647
Cycles: 2147007903, ctr: 2147483647

Cycles: 2147483647, ctr: 197621458
Cycles: 2076982910, ctr: 2147483647
Cycles: 2125642094, ctr: 2147483647
Cycles: 2125321197, ctr: 2147483647

Cycles: 2132759837, ctr: 330963474
Cycles: 2102475117, ctr: 2147483647
Cycles: 2147390638, ctr: 2147483647
Cycles: 2147483647, ctr: 2147483647 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-22T01:40:26.917

当线程之间共享数据时，需要同步。在处理可以从主内存到多处理器系统中的处理器缓存的整数时，线程可能正在更新绑定到特定处理器的整数的本地副本。

Java 中的 volatile [（参见 Java 部分中的 Wiki）](https://en.wikipedia.org/wiki/Volatile_(computer_programming))关键字将确保对 Integer 的任何更新都将发生在内存中而不是本地副本中。

此外，要将更新同步到 Integer，请考虑使用 AtomicInteger。这个实现有一个方法[（compareAndSet）](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html#compareAndSet-int-int-)来检查一个值是否是线程所期望的，如果是，则设置它。如果它不匹配，那么另一个线程可能已经更新了该值。AtomicInteger 将在原子操作中执行 Integer 的读取和更新，其优点是不必阻塞。

# ios - 如何将 UITableView 设置为分组样式

> ID：1006663
> 
> 赞同：94
> 
> 时间：2009-06-17T12:24:36.140
> 
> 标签：ios, objective-c, uitableview, cocoa-touch

我有一个`UITableViewController`带有部分的子类。这些部分以默认样式（无圆角）显示。如何在代码中将 TableView 样式设置为分组？我没有为此使用Interface Builder，所以我需要类似的东西

```
[self.tableView setGroupedStyle] 
```

我在 Stack Overflow 上进行了搜索，但找不到答案。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2009-08-18T21:49:17.457

您可以执行以下操作：

```
UITableView *myTable = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped]; 
```

斯威夫特 3：

```
let tableView = UITableView.init(frame: CGRect.zero, style: .grouped) 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2009-06-17T12:47:10.400

如果我明白你的意思，你必须用那种风格初始化你的控制器。就像是：

```
myTVContoller = [[UITableViewController alloc] initWithStyle:UITableViewStyleGrouped]; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2011-05-28T17:30:38.137

我给你我的解决方案，我在“XIB 模式”下工作，这里是 UITableViewController 的子类的代码：

```
-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithStyle:UITableViewStyleGrouped];
    return self;
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-03-03T11:23:05.960

下面的代码为我工作，我也在使用 UITableview 类

```
- (id)initWithStyle:(UITableViewStyle)style
{
     self = [super initWithStyle:UITableViewStyleGrouped];

     if (self)
    {

     }
    return self;
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-09-06T07:01:15.933

如果你继承 UITableViewController，你可以再次初始化 tableView。

目标 C：

```
self.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped]; 
```

迅速：

```
self.tableView = UITableView(frame: CGRect.zero, style: .grouped) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-07-15T02:29:53.073

设置并不像问题中提到的那么难。其实很简单。在故事板上试试这个。

[![在此处输入图像描述](../Images/5fd1259442a973957b2925c567cbb5a8.png)](https://i.stack.imgur.com/XdbZ6.gif)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-02-26T21:25:12.400

**斯威夫特 4+：**

```
let myTableViewController = UITableViewController(style: .grouped) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-08T07:27:28.540

**斯威夫特 4**

**使用普通的 TableView**

```
let tableView = TableView(frame: .zero, style: .grouped) 
```

**使用 TPKeyboardAvoidingTableView**

```
let tableView = TPKeyboardAvoidingTableView(frame: .zero, style: .grouped) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-26T05:39:27.350

对于在 ui 本身中设置分组样式：-选择 TableView 然后将“样式”（在属性检查器中）从普通更改为分组。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-07-28T20:24:53.200

如果您想在已经在单独的 swift 文件中创建的子类上使用它，您也可以这样做（可能不是 100% 正确但有效）

```
override init(style: UITableViewStyle) {
    super.init(style: style)
    UITableViewStyle.Grouped
}

required init?(coder aDecoder: NSCoder) {
    fatalError("init(coder:) has not been implemented")
} 
```

现在在你的 appdelegate.swift 中你可以调用：

```
let settingsController = SettingsViewController(style: .Grouped) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-09-26T11:57:40.947

您也可以使用 storyboard/XIB 来做到这一点

1.  转到情节提要 -> 选择您的 viewController -> 选择您的表格
2.  在界面生成器中选择“样式”属性
3.  选择“分组”
4.  完毕

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-23T16:13:41.200

如果您有一个 TableView 用于多个表，并且其中一个表是分组的，而另一个是普通的，那么您可以使用 UITableViewDelegate 中的函数模拟普通样式：

```
override func tableView(tableView: UITableView, heightForHeaderInSection section: Int) -> CGFloat {   
    return CGFloat.min
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-14T06:52:45.327

**迅速 4**

如果您不想使用情节提要，这可能会有所帮助。

您可以在闭包中添加表格视图并设置属性：

```
lazy var tableView: UITableView = {
        let tableView = UITableView(frame: .zero, style: .grouped)

        tableView.backgroundColor = UIColor(named: Palette.secondaryLight.rawValue)
        tableView.rowHeight = 68
        tableView.separatorStyle = .none
        tableView.translatesAutoresizingMaskIntoConstraints = false
        return tableView
    }() 
```

然后添加子视图并设置约束。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-26T10:56:39.033

如果您在代码中创建 UITableView，则可以执行以下操作：

```
class SettingsVC: UITableViewController {

    init() {
        if #available(iOS 13.0, *) {
            super.init(style: .insetGrouped)
        } else {
            super.init(nibName: nil, bundle: nil)
        }
     }

     @available(*, unavailable)
     required init?(coder aDecoder: NSCoder) {
         fatalError("init(coder:) has not been implemented")
     }
 } 
```

* * *

## 回答 #15

> 赞同：-5
> 
> 时间：2010-07-06T18:12:17.733

您还可以尝试使分隔线颜色清晰，这可以产生分组样式效果：

```
[myTVContoller.tableView setSeparatorColor:[UIColor clearColor]]; 
```

* * *

## 回答 #16

> 赞同：-11
> 
> 时间：2012-03-27T06:36:08.440

您可以使用：

```
(instancetype)init {
return [[YourSubclassOfTableView alloc] initWithStyle:UITableViewStyleGrouped];
} 
```

* * *

## 回答 #17

> 赞同：-28
> 
> 时间：2009-06-17T12:45:46.050

```
self.tableView.style = UITableViewStyleGrouped 
```

编辑：

假设这是一个读/写属性。在这种情况下，您可以在实例化控制器时遵循 Dimitris 的建议并设置样式，或者（如果您使用的是 XIB），您可以通过 IB 设置它。

# java - 从未签名的 Javascript 调用时，如何获得已签名的 Java Applet 以执行特权操作？

> ID：1006674
> 
> 赞同：7
> 
> 时间：2009-06-17T12:25:54.080
> 
> 标签：java, javascript, security, applet

已签名的 Java 小程序与在客户端上运行的普通 Java 应用程序具有相同的安全权限。对于一个特定的项目，我*需要*这些权限，并且我*需要*通过 JavaScript 调用来执行特权操作。

现在，问题是，至少对于 Ubuntu（目标浏览器和平台）中的 Firefox 3，当通过未签名的 JavaScript 调用小程序方法时，它会失去其特殊权限。由于签署 JavaScript 不是一种选择，我需要一种方法来解决这个限制。

实现此目的的一种方法是在小程序启动时创建一个线程，并在主线程接收到 JavaScript 调用时调用该线程上的方法。我已经实现了这个想法的工作原型，但我发现它有点笨拙，因为它使用了太多反射并且不像我想要的那样容易重用。

有没有一种常见的标准方式来做我想做的事情？而且，如果我的想法是正确的方法，您将如何以可重用的方式实现它？我想要实现的是一个框架，它允许将这种“在特权线程中运行的方法”的东西用于各种对象。理想的乌托邦解决方案类似于：

```
// when the applet starts-up
PrivilegedExecuter priv = new PrivilegedExecuter(myObject); //or MyClass.class
// ...
// inside a JavaScript-called method (myObject has myMethod)
priv.myMethod(); // myMethod is run synchronously in a privileged thread 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-17T12:35:54.637

使用 java.security.AccessController 类。

有一个 doPrivilegedAction 和 doPrivilegedExceptionAction 可以完全满足您的需要。

例如：

```
AccessController.doPrivileged(new PrivilegedAction() {
            公共对象运行（）{
               ..做一些只适用于签名小程序的事情..
            }
        });

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:47:25.993

值得补充的是：使您的 privaction'd`run()`方法尽可能小且独立。显然，您可以让已签名的小程序的 init() 方法调用特权`run()`，而特权又会执行实际的小程序，但这只是乞求被滥用、意外误用或彻底被利用。

此外，签名的小程序在被 JavaScript 调用时会失去其特殊权限这一事实并不特定于特定的浏览器或平台。就是这样，无处不在，无时无刻不在。

# python - Python 中的 OLE 复合文档

> ID：1006682
> 
> 赞同：3
> 
> 时间：2009-06-17T12:27:12.860
> 
> 标签：python, ole

您将如何使用 Python解析 Microsoft [OLE 复合文档？](http://www.forensicswiki.org/wiki/OLE_Compound_File)

**编辑：**对不起，我忘了说我也需要写支持。简而言之，我有一个 OLE 复合文件，我必须读取、修改一点并写回磁盘（这是一个使用 CAD 应用程序制作的文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T12:34:37.523

刚刚找到[OleFileIO_PL](http://www.decalage.info/python/olefileio)，~~但它没有写支持.. :/~~并且从版本 0.40 (2014) 开始，它**有**写支持。

**编辑：**看起来有一种方法（尽管仅限 Windows）也支持写入[。pywin32](http://python.net/crew/mhammond/win32/)扩展（[StgOpenStorage](http://docs.activestate.com/activepython/2.6/pywin32/pythoncom__StgOpenStorage_meth.html)函数和相关）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T14:26:23.540

另一种选择：xlrd 包有一个阅读器。xlwt 包（pyExcelerator 的一个分支）有一个编写器。他们乐于处理 100 MB 的文件大小；这些包已被广泛使用了大约 4 年。复合文档模块的目标是尽可能高效地将“工作簿”流进出 Excel .xls 文件，但具有合理的通用性。与 OleFileIO_PL 不同，它们不提供对属性流内部的访问。

```
http://pypi.python.org/pypi/xlrd
http://pypi.python.org/pypi/xlwt 
```

如果您决定使用它们并需要帮助，请在此论坛中提问：

`http://groups.google.com/group/python-excel`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:45:59.320

为了完整起见：在 Linux 上还有[GNOME 结构化文件库](http://projects.gnome.org/libgsf/)（但 Debian/Ubuntu 的默认包禁用了 Python 支持，因为[自 2006 年以来不支持](http://git.gnome.org/browse/libgsf/tree/python/README-python)Python 绑定）和[POIFS](http://poi.apache.org/poifs/index.html) Java 库。

# c# - System.IO.Directory.CreateDirectory 仅对当前用户具有权限？

> ID：1006684
> 
> 赞同：2
> 
> 时间：2009-06-17T12:27:19.020
> 
> 标签：c#, .net, vb.net, filesystems, system.io.directory

我希望asp应用程序创建一个文件夹，该文件夹只能访问应用程序运行时使用的帐户（即asp帐户？）

我实际上想使用[这个](http://msdn.microsoft.com/en-us/library/9h4z99zb.aspx)，但我不知道如何动态使用“Computer\CurrentAccount”。

我想获得当前的工作帐户。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T12:34:45.137

[这里](http://msdn.microsoft.com/library/system.security.accesscontrol.directorysecurity)有一个为命名用户创建`DirectorySecurity`实例并添加 ACE的示例（但使用默认构造函数以空 ACL 开始）。

要获取帐户的 SID，有两种可能性（这些需要测试）：

第一种方法是依赖进程的所有者作为目录的所有者。如果进行模拟（例如，在 Windows 身份验证下将客户端的身份用于对文件系统内容的访问控制），这可能会中断：

```
var ds = new DirectorySecurity();
var sid = new SecurityIdentifier(WellKnownSidType.CreatorOwnerSid, null)
var ace = new FileSystemAccessRule(sid,
                                   FileSystemRights.FullControl,
                                   AccessControlType.Allow);
ds.AddAccessRule(ace); 
```

从流程 Token 获取流程所有者的第二种方法，这将需要 P/Invoke。这包括一个示例：[http://www.codeproject.com/KB/cs/processownersid.aspx](http://www.codeproject.com/KB/cs/processownersid.aspx)，一旦您拥有 SID 为它创建一个 SecurityIdentifier 实例并按照上述创建 ACL。

# javascript - Jquery 效果 Onunload

> ID：1006687
> 
> 赞同：1
> 
> 时间：2009-06-17T12:27:37.087
> 
> 标签：javascript, jquery, effect, onunload

当用户离开页面时，我想使用 jquery slideUp 效果，只是为了让页面在关闭时看起来很酷。

我假设我应该使用 onunload 事件，但是我怎样才能延迟页面关闭足够长的时间以使效果运行完成。

想到的选项之一是有效地劫持页面关闭函数，将其存储在某个变量中，然后在运行效果后执行它，但我不知道该怎么做。

任何建议或替代想法都非常受欢迎

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T12:30:27.017

您正在寻找的是 onbeforeunload 事件。
不过只是一个警告......它应该***非常***快......或者无论它看起来多么酷，您的访问者都可能会讨厌它

至于防止页面在动画完成之前导航离开，这是一个更大的问题......任何动画都将依赖于 setTimeout/setInterval 并且页面不会等待那些完成后再离开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T12:34:09.710

在用户要求时关闭窗口之外的任何操作都违反了与用户的合同。浏览器窗口不是你的，是用户的，效果再酷，难免会惹恼你的大部分用户。

onbeforeunload 事件的功能非常有限。它必须返回一个字符串，然后用于提示用户确认离开页面。它不适用于很酷的动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T12:34:38.773

据我所知，阻止用户离开页面的唯一方法是 onbeforeunload 事件，该事件**不可**取消。相反，您从该方法返回一个字符串，浏览器通过是/否对话框提示用户，生活继续。[276660 对此](https://stackoverflow.com/questions/276660/how-can-i-override-the-onbeforeunload-dialog-and-replace-it-with-my-own)有更多信息。

我不认为你会在这个方面有很多运气。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:32:52.927

为什么不呢，**而不是**在用户简单**地想要离开**您的网站时产生“酷”效果（即使用户关闭浏览器/选项卡也会触发卸载事件）并以此来烦扰简单用户......防止他/她又回来了……

...**当用户**第一次访问您的网站时，会产生**那种**“酷”的效果吗？作为一个正常的介绍效果？

 **我这样做是一个简单的想法，你可以在这里看到它：[http ://www.balexandre.com/jmfc](http://www.balexandre.com/jmfc)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T12:34:00.223

我会 100% 同意[Jonathan Fingland 的回答](https://stackoverflow.com/questions/1006687/jquery-effect-onunload/1006708#1006708)，并添加此内容。

在 IE 中，（我不确定哪些版本支持此功能，我知道 IE6 支持）您可以在离开页面时使用一些[适当的元标记来实现淡入淡出等。](http://jansfreeware.com/articles/ie-page-transitions.html)但是，这在浏览器中是有限的（仅限 IE），因此您无法跨浏览器使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-05-17T00:03:50.857

您可能会发现通过 AJAX 加载新内容可以让您更好地控制效果和过渡，并减少因尝试以这种方式劫持浏览器操作而给用户带来的烦恼。

我会考虑使用上面提到的滑块形式（例如参见[http://webdesignledger.com/tutorials/13-super-useful-jquery-content-slider-scripts-and-tutorials](http://webdesignledger.com/tutorials/13-super-useful-jquery-content-slider-scripts-and-tutorials)），或者只是加载内容窗格响应用户点击。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-08T10:34:01.843

我发现延迟关闭窗口的唯一方法是使用警报。如果这对您的情况来说是一个可以接受的折衷方案，它确实会延迟内存中的窗口破坏，并允许您的页面计时器执行（当然，如果用户没有在您的动画完成之前关闭警报弹出窗口）。

我最近使用了这种方法，所以我可以通过 FABridge 调用一个 flex 方法（否则它会在 flex 方法调用完成之前被销毁）。我想听听你对此的评论。**

# java - 如何在 Java Swing 中显示英镑 (£) 符号？

> ID：1006688
> 
> 赞同：4
> 
> 时间：2009-06-17T12:27:38.600
> 
> 标签：java, swing, encoding, character

目前，我在 Java 源代码中添加了一个英镑 (£) 符号，并将生成的 Swing 组件编译为方形（不支持的字符）符号。

我怀疑这是一个编码问题，Java 源文件被编码为 cp1252（Eclipse 似乎默认为这个）。解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-17T12:31:48.670

使用 \u00A3 表示法。[此处](http://www.herongyang.com/JDK/Encoding-Conversion-Unicode-Signs-in-Different-Encodings.html)为其他符号的~~unicodes~~ Unicode 代码点的更多示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T12:52:02.217

我相信您可以从 Eclipse（或任何体面的编辑器）更改源代码的编码。将其设置为 UTF-8。那么一切都应该顺利进行，因为 Java 字符串是 Unicode。

我强烈建议在源代码中使用正确的编码，而不是这个 \uXXX 表示法。原因是，你到底如何从代码中推断出例如 \u00A3 的含义？将正确的字符放在那里会更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T12:32:59.197

也许弄乱[java.util.Currency](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Currency.html)的 getSymbol() 可能会产生一些结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-17T12:23:28.717

```
Locale locale = Locale.UK;
Currency curr = Currency.getInstance(locale);
System.out.println("Symbol: " + curr.getSymbol()); 
```

对于某些货币，它有效。

# windows - 检查 Win32 线程是否正在运行或处于挂起状态

> ID：1006691
> 
> 赞同：17
> 
> 时间：2009-06-17T12:28:06.867
> 
> 标签：windows, winapi

如何检查 Win32 线程是否正在运行或处于挂起状态？

我找不到任何提供线程状态的 Win32 API。那么如何获取线程状态呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-17T14:11:53.770

我认为 - 最初 - 未提供此信息，因为提供此信息的任何 API 都会具有误导性和无用。

考虑两种可能的情况 - 当前线程已暂停感兴趣的线程。当前线程中的代码*知道*挂起状态并且应该能够共享它，因此内核团队无需添加 API。

第二种情况，系统中的某个其他/第三个线程已暂停感兴趣的线程（并且无法跟踪是哪个线程）。现在你有一个竞争条件——其他线程可以在任何时候——取消挂起感兴趣的线程并且从 API 收集的信息是无用的——你有一个值表明线程实际上是挂起的，而不是。

故事的寓意——如果你想知道一个线程被挂起——挂起它： SuspendThread 的返回值是线程之前的挂起计数。现在您确实知道一些有用的东西 - 线程被暂停并且仍然被暂停 - 这很有用。或者它没有（但现在）被暂停。无论哪种方式，线程的状态现在都是确定性的，因此理论上您可以基于此做出一些明智的选择 - 是恢复线程，还是保持暂停。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-05-21T10:36:00.603

您可以通过使用 SystemProcessesAndThreadsInformation 的值（整数值 5）调用 NtQuerySystemInformation() 来获取此信息。

如果您想了解如何使用此信息的示例，请查看[Thread Status Monitor](http://www.softwareverify.com/cpp/thread-status-monitor/index.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T13:03:47.043

WMI 的[Win32_Thread](http://msdn.microsoft.com/en-us/library/aa394494.aspx)类有一个`ThreadState`属性，其中 5：“Suspended Blocked”和 6：Suspended Ready。

您将需要线程的 ID 来直接获取正确的实例（WMI 对象的 Handle 属性是线程 ID）。

编辑：鉴于此 PowerShell 查询：

```
gwmi win32_thread | group ThreadState 
```

给

```
计数名称组
----- ---- -----
    6 2 {, , , ...}
  966 5 {, , , ...}

```

WMI 对“暂停”的定义与 Win32 不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:42:10.863

在 Windows 7 中，您可以使用[QueryUmsThreadInformation](http://msdn.microsoft.com/en-us/library/dd627177(VS.85).aspx)。（UMS 代表用户模式调度）。

见[这里](http://msdn.microsoft.com/en-us/library/dd627186(VS.85).aspx)`UmsThreadIsSuspended`。 _

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T23:21:05.250

您可以使用如下代码获取线程挂起计数：

```
DWORD GetThreadSuspendCount(HANDLE hThread) {
    DWORD dwSuspendCount = SuspendThread(hThread);
    ResumeThread(hThread);
    return dwSuspendCount;
} 
```

但是，正如已经说过的 - 这是不准确的。此外，暂停线程是邪恶的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-08T23:03:22.010

YES：可以获取线程状态并确定它是否被挂起。

不：您不需要 Windows 7 来执行此操作。

我在 Stackoverflow 上发布了我的工作类：[如何获取线程状态（例如挂起）、内存 + CPU 使用率、开始时间、优先级等](https://stackoverflow.com/questions/22949725/how-to-get-thread-state-e-g-suspended-memory-cpu-usage-start-time-priori)

此类需要 Windows 2000 或更高版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T23:48:03.107

我认为这里的状态被称为

*   如果线程在线程 proc 中，则进行一些处理或
*   等待事件

这可以通过使用变量来处理，该变量可以判断线程是实际运行还是等待事件发生。

这些场景在考虑线程池时出现，有一些 n 个线程，根据每个线程的运行状态，可以将任务分配给空闲线程。

# c# - 无法设置 TestContext 属性

> ID：1006702
> 
> 赞同：25
> 
> 时间：2009-06-17T12:29:42.933
> 
> 标签：c#, unit-testing

我有一个 Visual Studio 2008 单元测试，我收到以下运行时错误：

```
Unable to set TestContext property for the class JMPS.PlannerSuite.DataServices.MyUnitTest.  Error:  System.ArgumentException:  Object of type 'Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestAdapterContext' cannot be converted to type 'Microsoft.VisualStudio.TestTools.UnitTesting.TestContext' 
```

我读过 VS 2008 在转换 2005 项目时没有正确更新对 UnitTestFramework 的引用。我的单元测试是在 2008 年创建的，但它继承自 VS 2005 中构建的基类。这是我的问题所在吗？我的基类必须在 2008 年重建吗？我宁愿不这样做，因为它会影响其他项目。

在 2005 年构建的其他派生单元测试中，我们需要做的就是注释掉派生单元测试中的 TestContext 属性。我在 VS 2008 单元测试中尝试过这个，但没有运气。我还尝试“新建”TestContext 属性，这给了我一个不同的运行时错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-16T15:38:07.393

当我升级一个旧项目（我认为是 2005 年）时，我在 Visual Studio 2012 中遇到了同样的问题。

对 Microsoft.VisualStudio.QualityTools.UnitTestFramework 的引用需要通过在解决方案资源管理器中右键单击它然后将其删除来删除。

要添加正确的：

1.  添加新参考
2.  Extensions，找到Microsoft.VisualStudio.QualityTools.UnitTestFramework，可能有几个
3.  鼠标悬停显示路径，选择 ../IDE/PublicAssemblies 中的那个
4.  干净的
5.  重建
6.  重新运行测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T00:32:47.520

我在这里发布这个是希望它可以帮助某人对智能设备项目进行单元测试。当我第一次尝试对我在 Visual Studio 2008 中处理的智能设备项目中的方法运行单元测试时，我遇到了一个非常相似的错误：

```
Error: System.ArgumentException: Object of type 'Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestAdapterContext' cannot be converted to type 'Microsoft.VisualStudio.TestTools.UnitTesting.TestContext' 
```

谷歌搜索错误返回的结果表明它是由将测试项目从 Visual Studio 2005 格式升级到 2008 引起的，并且对 UnitTestFramework.dll 的引用仍然适用于旧版本 (8.0) 并且需要更新。这不适用于我，因为我没有从 VS2005 升级我的测试项目。于是我继续寻找。

在寻找错误的其他原因数小时后没有成功，我偶然发现了智能设备项目中的以下参考：

*   Microsoft.WindowsMo​​bile.dll
*   Microsoft.WindowsMo​​bile.Status.dll

Visual Studio 正在从以下文件夹中获取这些引用：

```
C:\Program Files\Windows Mobile 5.0 SDK R2\Managed Libraries 
```

但是，智能设备项目的目标平台是**Windows Mobile 6 Professional SDK**。我之前没有注意到这一点，因为我最初并没有创建智能设备项目。所以我删除了对这两个 DLL 的引用，并从以下文件夹中读取它们：

```
C:\Program Files\Windows Mobile 6 SDK\Managed Libraries 
```

重建智能设备项目后，运行测试方法成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-09T18:19:21.527

我遇到了同样的问题。结果发现我的一个项目引用了 8.0 程序集，而另一个项目引用了 9.0。解决方案已编译，但出现运行时异常。

# .net - Telnet 针对 Aastra Mx-One

> ID：1006736
> 
> 赞同：0
> 
> 时间：2009-06-17T12:35:00.003
> 
> 标签：.net, telnet, pbx

我正在尝试使用 telnet 连接到 MX-One pbx。奇怪的是，当我使用超级终端时，我可以连接并获得登录：promt 作为回报。它就像 DOS telnet 应用程序一样工作。

但是，当我使用 nSoftwares IP*Works Telnet 组件尝试使用我们的 C# 应用程序（用于 Aastra MD110 pbx，以收集相同格式的相同数据）登录时，我可以连接但没有得到任何回报，即使它连接成功。

任何人都对从哪里开始寻找解决方案有任何想法或指示。

提前感谢约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T13:52:08.100

一个起点是尝试[WireShark](http://www.wireshark.org/)。这是一个协议分析器。有了这个，您可以跟踪您真正发送到服务器的内容以及服务器响应的内容。

# file - Ant 目标将目录移出另一个目录

> ID：1006740
> 
> 赞同：11
> 
> 时间：2009-06-17T12:36:42.810
> 
> 标签：file, ant

将所有内容移出目标目录的最简单方法是什么？

我有这个`basedir/parentdir/<subdir>`。我有很多不同的`<subdir>`. 我需要将它们移到与它相同的级别`parentdir`，使其变为`basedir/<subdir>`. 现在，每个都`<subdir>`包含许多其他子目录和文件的深层树，包括空子目录。

我尝试了以下方法：

```
<move todir="basedir">
    <fileset dir="parentdir">
        <include name="**/*.*" />
    </fileset>
</move> 
```

这未能移动空目录 - 意味着在移动之后，所有这些`<subdir>`都丢失了它们的空子目录。默认情况下，“移动”应该复制空子目录，所以我接下来尝试了以下操作：

```
<move todir="basedir">
    <fileset dir="parentdir">
        <include name="**/*" />
        <include name="**/*.*" />
    </fileset>
</move> 
```

虽然我确实设法移动了空子目录，但奇怪的是所有的所有直接子目录都`<subdir>`被复制到`basedir`. 每个`<subdir>`都有`src`,`test`和`build`. 这些现在正坐在`basedir`原地以及在他们原来的位置上感动`<subdir>`。

我很肯定我做错了什么，但我不知道是什么。我以错误的方式处理事情吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-17T12:58:54.043

试试这个

```
<project name="moveproject" basedir="." default="moveDirs">
<target name="moveDirs">
    <move todir="${basedir}" includeEmptyDirs="yes" verbose="true">
        <fileset dir="parentdir" >
            <include name="**/*" />
        </fileset>
    </move>
</target>
</project> 
```

# linux - 在 disown 和 logout 后是否可以看到输出到 stdout？

> ID：1006745
> 
> 赞同：7
> 
> 时间：2009-06-17T12:37:31.777
> 
> 标签：linux, bash

我对那个程序做了这个： ctrl-z disown -h %1 bg 1

然后注销，

我现在还可以看到该程序输出到标准输出的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-19T01:30:38.140

```
ctrl-z the program
bg %  so it wont die when you logoff
screen retty $Pid
will attach the running program into screen 
```

[如何用“screen”替换“disown”的](https://stackoverflow.com/questions/1006885)重复问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T14:18:11.013

一般[`screen`用法](http://www.delorie.com/gnu/docs/screen/screen_toc.html)：

```
user@machine:/home/user$ screen bash -l
user@machine:/home/user$ long_running_program
<user presses ctrl-a d to detach from the screen session>
user@machine:/home/user$ screen -ls
There is a screen on:
        58356.ttys000.machine     (Detached)
1 Socket in /tmp/uscreens/S-user.
user@machine:/home/user$ screen -r 58356
<user is connected to the original screen session> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-07T21:47:19.503

This should be possible..

Yes, this is an old question, but I'm sure others have been in the same position. This gentleman's gdb script wizardry allows one to "repoint" file descriptors in running processes. It can be done per-process by PID, or will call fuser to find all processes using the file. I also just confirmed it works on /dev/pty/*, so STD(IN,OUT,ERR) are possible as well.

[http://groups.google.com/group/alt.hackers/browse_thread/thread/d1932c31ce43bd4c](http://groups.google.com/group/alt.hackers/browse_thread/thread/d1932c31ce43bd4c)

.

Same as the answer I posted here: [how to replace the "disown" with "screen"?](https://stackoverflow.com/questions/1006885/how-to-replace-the-disown-with-screen/3654324#3654324)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T13:16:43.867

不知道它是否对您有帮助，但您可以调用“gdb”并更改文件描述符。见[http://blog.tridgell.net/?p=4](http://blog.tridgell.net/?p=4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T12:44:04.917

如果您已注销，则不会。该进程会将标准输出写入登录时分配的 pty，注销将删除此分配。您必须将标准输出重定向到一个文件，然后将其拖尾。

# c# - 将 T 类型的数组转换为 I 类型的数组，其中 T 在 C# 中实现 I

> ID：1006746
> 
> 赞同：4
> 
> 时间：2009-06-17T12:37:41.713
> 
> 标签：c#, arrays, list, ienumerable

我正在尝试用 C# 完成一些我在 Java 中很容易做到的事情。但是遇到了一些麻烦。我有一个未定义数量的 T 类型对象数组。A 实现了一个接口 I。最后我需要一个 I 数组，它是所有数组中所有值的总和。假设没有数组将包含相同的值。

此 Java 代码有效。

```
ArrayList<I> list = new ArrayList<I>();
for (Iterator<T[]> iterator = arrays.iterator(); iterator.hasNext();) {
    T[] arrayOfA = iterator.next();
    //Works like a charm
    list.addAll(Arrays.asList(arrayOfA));
}

return list.toArray(new T[list.size()]); 
```

但是，此 C# 代码不会：

```
List<I> list = new List<I>();
foreach (T[] arrayOfA in arrays)
{
    //Problem with this
    list.AddRange(new List<T>(arrayOfA));
    //Also doesn't work
    list.AddRange(new List<I>(arrayOfA));
}
return list.ToArray(); 
```

所以很明显我需要以某种方式将数组`T[]`添加`IEnumerable<I>`到列表中，但我不确定最好的方法是什么？有什么建议么？

编辑：在 VS 2008 中开发，但需要为 .NET 2.0 编译。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T12:44:09.953

为 2.0 编辑；它可以变成：

```
static void Main() {
    IEnumerable<Foo[]> source = GetUndefinedNumberOfArraysOfObjectsOfTypeT();
    List<IFoo> list = new List<IFoo>();
    foreach (Foo[] foos in source) {
        foreach (IFoo foo in foos) {
            list.Add(foo);
        }
    }
    IFoo[] arr = list.ToArray();
} 
```

怎么样（在.NET 3.5中）：

```
I[] arr = src.SelectMany(x => x).Cast<I>().ToArray(); 
```

要在上下文中显示这一点：

```
using System.Collections.Generic;
using System.Linq;
using System;
interface IFoo { }
class Foo : IFoo { //  A implements an interface I
    readonly int value;
    public Foo(int value) { this.value = value; }
    public override string ToString() { return value.ToString(); }
}
static class Program {
    static void Main() {
        // I have an undefined number of arrays of objects of type T
        IEnumerable<Foo[]> source=GetUndefinedNumberOfArraysOfObjectsOfTypeT();
        // I need an array of I at the end that is the sum of
        // all values from all the arrays. 
        IFoo[] arr = source.SelectMany(x => x).Cast<IFoo>().ToArray();
        foreach (IFoo foo in arr) {
            Console.WriteLine(foo);
        }
    }
    static IEnumerable<Foo[]> GetUndefinedNumberOfArraysOfObjectsOfTypeT() {
        yield return new[] { new Foo(1), new Foo(2), new Foo(3) };
        yield return new[] { new Foo(4), new Foo(5) };
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-17T12:51:51.827

这里的问题是 C# 不支持泛型中的[协](http://weblogs.asp.net/astopford/archive/2006/12/28/c-generics-covariance.aspx)变（至少直到 C# 4.0，我认为），因此泛型类型的隐式转换将不起作用。

你可以试试这个：

```
List<I> list = new List<I>();
foreach (T[] arrayOfA in arrays)
{
    list.AddRange(Array.ConvertAll<T, I>(arrayOfA, t => (I)t));
}
return list.ToArray(); 
```

* * *

对于遇到这个问题并使用 .NET 3.5 的任何人，这是使用 Linq 做同样事情的一种稍微更紧凑的方式。

```
List<I> list = new List<I>();
foreach (T[] arrayOfA in arrays)
{
    list.AddRange(arrayOfA.Cast<I>());
}
return list.ToArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-17T12:45:24.790

我假设你已经尝试过

```
list.AddRange((I[])arrayOfA); 
```

已经？

**编辑**在回复您的评论时说我的建议不起作用：我在一分钟前成功运行了这段代码：

```
using System;
using System.Collections.Generic;

namespace Tester
{
    class Program
    {
        private interface I
        {
            string GetValue();
        }

        private class A : I
        {
            private string value;

            public A(string v)
            {
                value = v;
            }

            public string GetValue()
            {
                return value;
            }
        }

        static void Main(string[] args)
        {
            List<I> theIList = new List<I>();

            foreach (A[] a in GetAList())
            {
                theIList.AddRange((I[])a);
            }

            foreach (I i in theIList)
            {
                Console.WriteLine(i.GetValue());
            }
        }

        private static IEnumerable<A[]> GetAList()
        {
            yield return new [] { new A("1"), new A("2"), new A("3") };
            yield return new [] { new A("4") };
        }
    }
} 
```

还是我只是搞砸了一个要求？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:41:17.137

尝试添加通用约束

其中 T:I

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T12:43:29.457

我猜这里的问题是泛型没有意识到 T 实现了 I。明确声明 T : I 可能有效。

您也可以执行 for 循环并一次添加一个 T 对象，而不是使用 AddRange。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T12:57:06.403

c# 的类型结构目前不支持这一点（将`Foo<T>`视为`Foo<I>`if X : I），这被称为 I 上的协方差。

底层框架确实如此，并且[c# 4.0 正在添加对它的支持](http://blogs.msdn.com/ericlippert/archive/tags/Covariance+and+Contravariance/default.aspx)

由于需要这样的显式转换，马克的答案是最简单的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T12:59:21.717

在您的 C# 代码中，您没有将 arrayOfA 添加到结果列表中：

```
List<I> list = new List<I>();
foreach (T[] arrayOfA in arrays)
    list.AddRange(arrayOfA);

return list.ToArray(); 
```

但是，如果您使用的是 .NET 3.5，则可以使用 LINQ 执行此操作：

```
return (from arrayOfA in arrays
        from element in arrayOfA
        select element as I).ToArray(); 
```

或使用 LINQ 方法：

```
return arrays.SelectMany(arrayOfA => arrayOfA.Cast<I>()).ToArray(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-17T14:55:06.617

[引用对象数组在 C# 中是协变的](http://blogs.msdn.com/ericlippert/archive/2007/10/17/covariance-and-contravariance-in-c-part-two-array-covariance.aspx)（Java 也是如此）。

从名字上看，我猜你的 T 是泛型而不是真正的类型，所以你必须将它限制为引用类型才能获得从 T[] 到 I[] 的隐式转换。

试试这个：

```
public static I[] MergeArrays<T,I>(IEnumerable<T[]> arrays) 
    where T:class,I
{
    List<I> list = new List<I>();
    foreach(T[] array in arrays){
        list.AddRange(array);
    }
    return list.ToArray();
} 
```

# ios - NSHost 在设备中运行会给出 NSHost.h 错误

> ID：1006754
> 
> 赞同：0
> 
> 时间：2009-06-17T12:41:06.373
> 
> 标签：ios, iphone, nshost

NSHost 不支持 iphone ......当我在模拟器中运行它时它工作正常......但是当我想在设备中运行时意味着它给出了一个 NSHost.h 错误......

我也想在设备中执行此操作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T12:44:33.993

NSHost 是 iPhone 上的私有 API，因此在实际设备上不受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-01T13:14:16.537

[Apple 发布了关于“在没有 NSHost 的情况下使用 NSStreams 进行 TCP 连接](https://developer.apple.com/library/archive/qa/qa1652/_index.html)”的技术说明 (QA1652) 。

该页面上有一个代码示例，但这里有一个摘要：

> 您可以通过利用 NSStream 和 CFStream 之间的免费桥梁来做到这一点。使用 CFStreamCreatePairWithSocketToHost 向主机创建 CFStreams，然后将生成的 CFStreams 转换为 NSStreams。

# php - 使用 Flash Actionscript 设置 PHP 会话变量

> ID：1006758
> 
> 赞同：9
> 
> 时间：2009-06-17T12:41:42.597
> 
> 标签：php, flash, actionscript-3

我有一个从我的 Flash 应用程序调用的简单 PHP 上传脚本。我确信它会调用，因为它实际上会上传文件！

```
session_start();

$default_path = 'files/';

$target_path = ($_POST['dir']) ? $_POST['dir'] : $default_path;

if(!file_exists($target_path)) mkdir($target_path, 0777, true);

$destination = $target_path . basename( $_FILES[ 'Filedata' ][ 'name' ] );

$file_name =  rand(1,9999).$_FILES[ 'Filedata' ][ 'name' ];

if(move_uploaded_file($_FILES[ 'Filedata' ][ 'tmp_name' ], $destination)){

$_SESSION['path'] = 'flashuploader_online/upload/'.$destination;

} 
```

但是，我尝试在另一个脚本中使用会话变量“path”，但它给了我一个空值！是的，我确保使用 session_start。

我错过了什么吗？

## 更新

至少现在我知道问题是什么了！但我不知道如何解决它而不会使跨会话变量传递变得混乱。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-18T17:06:30.330

您将不得不通过将 session_id 作为变量传递来在所有请求中保持 session_id。我保证不会太乱！您需要对显示 Flash 的页面以及它发布到的脚本进行一些更改。您还需要对 Flash 应用程序本身稍作更改，以便在将文件上传到服务器时包含会话 ID。

首先，您需要通过在 FlashVars 中包含会话 ID 来为 flash 提供会话 ID。您将需要使用 PHP 对显示 flash 的页面进行预处理，否则将无法保持会话。确保在输出 Flash 的页面中调用 session_start()。你最终会得到这样的东西：

```
<object classid="clsid:(blah)" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" width="800" height="800" id="ZoomifyHotspotViewer">
  <param name="flashvars" value="phpsessionid=<? print session_id(); ?>">
  <param name="src" value="YourSWF.swf">
  <embed flashvars="phpsessionid=<? print session_id(); ?>" src="YourSWF.swf" pluginspage="http://www.adobe.com/go/getflashplayer" type="application/x-shockwave-flash" width="800" height="800" name="YourSWF"></embed>
</object> 
```

这部分尤其是需要在 param 和 embed 标记中添加的内容：

```
phpsessionid=<? print session_id(); ?> 
```

然后，当您发出请求时，在您的 Flash 应用程序中，您现在可以访问变量“phpsessionid”中的会话 ID。您需要在名为 PHPSESSID（全部大写）的 POST 变量中包含该值 - 包含它，但是您包含其他变量，例如您使用的“dir”变量。

包含该变量将确保当您在下一页调用 session_start() 时，将恢复会话而不是启动新会话。有几个配置情况不会自动发生。如果您确实是这种情况（即下一页上的会话 id 仍然不同），您需要在处理上传的页面中执行以下操作：

```
session_id($_POST['PHPSESSID']);
session_start(); 
```

这将手动强制 PHP 使用指定的 ID 更新保存的会话。这甚至不应该是您必须处理的问题，但如果是，您可能必须在下一页上执行类似的操作，用户也继续这样做，或者向所有页面添加一般情况：

```
if (isset($_REQUEST['PHPSESSID'])) {
  session_id($_REQUEST['PHPSESSID']);
}
session_start(); 
```

请确保如果您最终需要以这种方式调用 session_id() 作为 setter，请确保在调用 session_start()**之前**这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-21T12:56:23.747

每次网络服务器向您提供响应（页面、图形等）时，它都有机会向您的浏览器发送 cookie。

1) 每个 cookie 仅被发送回最初来自的同一网站 2) cookie 的“内容”（它包含的数据）只能由网络服务器已经知道的任何信息组成.

因此，您的浏览器会自动在 HTTP 标头中的“Cookie”变量中发送 cookie。您可以在 PHP 中使用以下命令阅读它：

```
$headers = apache_request_headers();
echo $headers['Cookie']; 
```

服务器（如果在 PHP 配置中启用会话支持）会自动在 cookie 中创建 PHPSESSID（您可以在配置中修改变量名），您可以使用上面的脚本直接访问它（您需要解析 $headers 以获得 PHPSESSID 变量或任何其他曲奇饼）。我认为没有必要使用 flashvars，您的浏览器会自动在 HTTP 标头中添加 Cookie 变量。

希望这可以帮助 ！

# c++ - 在 C++ 中使用指针和指向指针的指针读取和存储序列化对象的快速方法

> ID：1006767
> 
> 赞同：2
> 
> 时间：2009-06-17T12:42:35.683
> 
> 标签：c++, pointers, object

我需要一种快速的方法来读取和存储带有指针和指向 c++ 中 xml 文件中的指针的指针的对象。每个对象都有自己的 id 、 name 和类类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T12:51:59.657

在序列化数据时，您应该构建指向 ID 的指针映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:49:30.193

您不能为指针执行此操作，您需要定义一些其他识别对象的方法 - 例如 GUID 或其他一些唯一标识符。在许多情况下，您可以只存储对象本身而不是指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T12:58:26.133

你检查过[boost::serialize](http://www.boost.org/doc/libs/1_39_0/libs/serialization/doc/index.html)吗？

我很确定它会自动执行一级指针间接，并且能够编写 xml 的“表单”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T13:01:10.840

我已经尝试过提升，但是对于我的项目的规模来说它太大了（它很大，但它具有 4-5 个类的高度简单性）

# php - PHP SOAP：如何使用 SOAP 从 PHP 返回对象？

> ID：1006771
> 
> 赞同：0
> 
> 时间：2009-06-17T12:43:15.073
> 
> 标签：php, web-services, soap

我需要使用 SOAP 向 PHP 发送/返回对象或数组。有什么好的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-01-13T06:54:07.153

我正在使用 Zend_Soap_Server 和 Zend_Soap_Client。我发送/接收复杂结构的数组。

首先创建具有您想要接收的结构的类。

```
<?php

/**
 * Information about people
 */
class PeopleInformation
{
    /**
     * Name of ...
     *
     * @var string
     */
    public $name;

    /**
     * Age of
     * @var int
     */
    public $age;

    /**
     * Array of family
     *
     * @var FamilyInformation[]
     */
    public $family;
}

/**
 * Information about his family
 */
class FamilyInformation
{
    /**
     * Mother/sister/bro etc
     *
     * @var string
     */
    public $relation;

    /**
     * Name
     * @var string
     */
    public $name;
}

?> 
```

然后创建服务来接收这些数据：

```
<?php

/**
 * Service to receive SOAP data
 */
class SoapService
{
    /**
     *
     * @param PeopleInformation $data
     * @return string
     */
    public function getUserData($data)
    {
        //here $data is object of PeopleInformation class

        return "OK";
    }
}
?> 
```

[现在通过 url http://ourhost/soap/](http://ourhost/soap/)在控制器中创建 Zend_Soap_Server 实例：

```
<?php

//disable wsdl caching
ini_set('soap.wsdl_cache_enabled', 0);
ini_set('soap.wsdl_cache', 0);

$wsdl = $_GET['wsdl'];

//this generate wsdl from our class SoapService
if (!is_null($wsdl))
{
    $autodiscover = new Zend_Soap_AutoDiscover('Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence');
    $autodiscover->setClass('SoapService');
    $autodiscover->handle();
}
//handle all soap request
else
{
    $wsdlPath = 'http://ourhost/soap/?wsdl';

    $soap = new Zend_Soap_Server($wsdlPath, array(
        'cache_wsdl' => false
    ));
    $soap->registerFaultException('Zend_Soap_Server_Exception');
    $soap->setClass('SoapService');
    $soap->handle();
}

?> 
```

*现在您可以在SoapService::getUserData*中构造和处理请求，从而获得 wsdl (http://ourhost/soap/?wsdl) 。该方法的输入参数是*PeopleInformation*类的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-08T14:46:52.043

基本上，您需要创建一个类映射并将其传递给您的肥皂客户端。是的，这是一种痛苦。我通常只有一个将 Soap 对象名称映射到 PHP 对象（即`Person => MY_Person`）的方法，并且只编写我需要手动编写的那些（即`createdOn => DateTime`）。

```
class MY_WSHelper
{  
  protected static $ws_map;  
  public static function make_map()
  {
    if( ! self::$ws_map)
    {
      self::$ws_map = array();
      //These will be mapped dynamically
      self::$ws_map['Person'] = NULL;
      self::$ws_map['Animal'] = NULL;
      //Hard-coded type map
      self::$ws_map['createdOn'] = DateTime;
      self::$ws_map['modifiedOn'] = DateTime;

      foreach(self::$ws_map as $soap_name => $php_name)
      {
        if($php_name === NULL)
        {
          //Map un-mapped SoapObjects to PHP classes
          self::$ws_map[$soap_name] = "MY_" . ucfirst($soap_name);
        }
      }
    }
    return self::$ws_map;
  }
} 
```

客户：

```
$client = new SoapClient('http://someurl.com/personservice?wsdl',
  array('classmap' => MY_WSHelper::make_map()));

$aperson = $client->getPerson(array('name' => 'Bob'));  
echo get_class($aperson); //MY_Person  
echo get_class($aperson->createdOn); //DateTime 
```

[http://php.net/manual/en/soapclient.soapclient.php](http://php.net/manual/en/soapclient.soapclient.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T17:31:04.090

我重播以分享我的（坏）经历。

我使用 PHP ZendFramework2 (ZF2) 创建了一个 web 服务。

服务器回复对象和对象数组，直到它将字符串作为输入，它运行良好。我正在使用**ArrayOfTypeComplex**策略。

```
$_strategy = new \Zend\Soap\Wsdl\ComplexTypeStrategy\ArrayOfTypeComplex(); 
```

当我尝试使用字符串数组作为输入时，我感到在一个黑暗和不愉快的山谷中，直到我找到了 Ramil 的答案，所以我改变了策略并且一切正常！

```
$_strategy = new \Zend\Soap\Wsdl\ComplexTypeStrategy\ArrayOfTypeSequence();

if (isset($_GET['wsdl'])) {
    $autodiscover = new \Zend\Soap\AutoDiscover($_strategy);
    $autodiscover->setBindingStyle(array('style' => 'document'));
    $autodiscover->setOperationBodyStyle(array('use' => 'literal'));
    $autodiscover->setClass('Tracker\Queue\Service')
        ->setUri($_serverUrl);
    echo $autodiscover->toXml();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T12:58:02.890

Papa Google 向我指出了这篇[Zend 文章](http://devzone.zend.com/article/689)，其中有很多关于使用 Soap 的客户端和服务器方面的好示例（特别是 PHP5 的实现）。看起来是一个很好的起点。

如果您有点像我，并且对手动编写 WSDL 的想法感到畏缩，我建议您使用[WSHelper](http://www.jool.nl/new/1,webservice_helper.html)，它使用 PHP 的反射类为您动态生成 W​​SDL。绝对节省时间

# windows - Windows 7 上的 Sql Server 2005 企业版

> ID：1006773
> 
> 赞同：2
> 
> 时间：2009-06-17T12:43:18.740
> 
> 标签：windows, sql-server-2005, windows-7

是否有可能在 Windows 7 上安装 Sql Server 2005 企业版？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-12-04T03:10:37.010

SQL Server 2005 企业版在客户端操作系统（如 Vista、XP 或 Windows 7）上不受支持。开发人员版在客户端操作系统上受支持，允许您使用企业功能进行开发，但企业版仅在 Window Server 安装上受支持，根据波尔：

[http://msdn.microsoft.com/en-us/library/ms143506(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms143506(SQL.90).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-17T12:51:40.953

是的，工作正常。

确保在 Visual Studio 之前安装它，并确保首先启用这些 Windows 功能：

**常见的 HTTP 功能**

*   静态内容
*   默认文档
*   HTTP 重定向
*   目录浏览

**应用程序开发**

*   ASP.NET
*   ISAPI 扩展
*   ISAPI 过滤器

**安全**

*   Windows 身份验证

**IIS6**

*   IIS 6 WMI
*   IIS 元数据库

然后至少安装SP2，但最好安装SP3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T12:48:07.700

是的，有可能：

1.  [http://blogs.msdn.com/sqlexpress/archive/2009/05/14/installing-sql-server-express-on-windows-7-release-candidate.aspx](http://blogs.msdn.com/sqlexpress/archive/2009/05/14/installing-sql-server-express-on-windows-7-release-candidate.aspx)
2.  [http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/6a569376-4207-4184-a8a7-73d5168c787e](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/6a569376-4207-4184-a8a7-73d5168c787e)

您需要使用 Service Pack 3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-13T11:55:11.493

企业版仅适用于服务器操作系统（服务器 2k3 2k8 ...），如果您只是将其用于开发，请尝试使用 Sql 服务器开发者版，它具有与企业版相同的功能，而且更便宜（但它只能用于开发）。

# git - 如何引用初始提交？

> ID：1006775
> 
> 赞同：143
> 
> 时间：2009-06-17T12:43:36.227
> 
> 标签：git, git-commit

我有一个脚本需要引用存储库中的初始提交。git 有特殊的引用`HEAD`，但没有对应的`TAIL`. 我找不到任何`git help rev-parse`似乎对我有帮助的东西。

这是我想做的：

```
git show TAIL 
```

这是我有的一个选择：

```
git show `git log --reverse | if read a commit ; then echo $commit ; fi` 
```

这很 hacky 并且取决于 git log 的输出不会改变。

现在我只是标记初始提交并将其用作我的参考规范。但是，我想发布一个通用工具，所以这不是一个好选择。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2009-06-17T14:51:24.660

不要使用 git-log 编写脚本：使用[`git-rev-list`](https://git-scm.com/docs/git-rev-list), 或[`git-log`](https://git-scm.com/docs/git-log)指定自定义格式（`--format=*<sth>*`选项）。

您的问题还有一个问题：存储库中可能存在**多个**这样的 TAIL 根提交（无父提交）（即使我们折扣断开的分支，例如 git.git 中的 'html'、'man' 和 'todo'存储库）。这通常是将单独的项目合并为一个，或者使用单独开发的子项目的子树合并的结果。

例如 git 存储库有 6 个根提交：git-gui、gitk（子树合并）、gitweb（合并，不再单独开发）、git 邮件工具（在项目历史的早期合并）和 p4-fast-export（也许是偶然的）。这还不包括“html”和“man”分支的根、包含预生成文档的“便利”分支以及带有 TODO 列表和脚本的“todo”分支。

* * *

如果您有 git 1.7.4.2 或更新版本，您可以使用以下`--max-parents`选项：

```
$ git rev-list --max-parents=0 HEAD 
```

否则，您可以使用以下命令获取可从当前分支访问的所有无父（根）提交的列表：

```
$ git rev-list --parents HEAD | egrep "^[a-f0-9]{40}$" 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-06-17T12:54:12.430

`git rev-list HEAD | tail -n 1`是更稳定的选择。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-08-14T15:05:02.703

不确定您要在这里做什么，但是一些 git 命令可以`--root`作为一个选项，以引用提交树的根，例如

```
git rebase --interactive --root main 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-02-12T17:59:08.720

假设合并的第一个父级是开发的主线：

```
git rev-list --reverse --topo-order --first-parent HEAD | sed 1q 
```

# java - 套接字和 ObjectInputStreams

> ID：1006776
> 
> 赞同：1
> 
> 时间：2009-06-17T12:43:57.817
> 
> 标签：java

我有两个应用程序在两台不同的机器上运行，它们通过 Java 套接字实现发送可序列化的“消息”对象进行通信。每个人创建一个 SocketServer，连接到其他服务器，然后是以下位（为简洁起见，省略了伪 Java、错误和连接详细信息）：

接收代码：

```
while (true) {
    Object received = oisFromOtherMachine.readUnshared();
    dispatch(received);
} 
```

发送代码：

```
synchronized void sendMessage(Message m) {
    oosToOtherMachine.writeObject(m);
    oosToOtherMachine.flush();
    oosToOtherMachine.reset();
} 
```

从各种不同的线程相当定期地调用它。

直到大约 3 周前，这一切都运行良好且花花公子，有时，为了响应特定的用户输入，对 readUnshared 的调用会抛出。到目前为止，我们已经看到了 "java.lang.IllegalStateException: unread block data" 和 "java.lang.ClassCast Exception: java.util.HashMap cannot be cast to java.io.ObjectStreamClass"，两者都来自于对象输入流。

这种情况大约五分之一发生，通常是在两个系统启动并相互交谈 15 分钟以上之后。由于各种原因，我们有两根网线经常在两者之间使用，一根多结打结 15m（ping 30ms+），另一根大约 1m（ping <1ms）。它只发生在短电缆上（相信我，我们已经在长电缆上尝试过很多次）。

我已经尝试检查任何消息对象可访问的所有内容都是可序列化的，在发送消息之前，任何一个应用程序的日志中都没有任何线索，并且没有收到错误的应用程序继续愉快地运行，没有意识到任何问题。

所以。谷歌不建议在 OIS、OOS 或 Java 套接字中存在任何可能导致它的问题，我的同事和我一样难过......以前有人见过这样的事情吗？

编辑：谢谢大家的建议。(-: 总之，我怀疑对某些日志记录状态对象的一些不同步访问正在生成一个损坏的对象图，这会导致 OIS 阻塞。不过，这需要在昨天解决，并且同步关键字的自由应用以及以下内容可憎...

```
try {/* message loop */ } catch (RuntimeException) { /* resync appstate and continue*/ } 
```

... 将比更令人沮丧（25 分钟以上）的重现问题和相关的头疼尝试更快地完成并且成功的机会更高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T13:00:49.250

我的猜测：两台机器之间存在一些数据损坏；或者它们在不同的 Java 版本上运行；您在对象图中有一些棘手的单例；发送方的 reset() 搞砸了。

为什么使用 readUnshared()？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T12:47:00.730

从未见过这种情况发生，而且我大量使用 Sockets + ObjectStreams。

我建议您尝试更新的 JVM 版本，核心类库深处的 IllegalStateExceptions 闻起来很奇怪。它仅在非常快速的连接上发生的事实*几乎*使它听起来像是一种竞争条件。

也许这次你确实“在 GCC 中发现了一个错误”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T13:02:26.063

在我看来，网络数据已损坏。

难道仅仅是短电缆损坏了吗？您是否尝试过使用不同的短电缆？

另一种可能性是有故障的网卡或驱动程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T13:28:06.857

我的随机猜测：虽然`sendMessage`标记为`synchronized`，但每个流都有多个对象实例。`ObjectOutputStream`或者，也许您每个都有不止一个`Socket` `OutputStream`。

# java - 如何在命令行上使用不同版本的 Java

> ID：1006780
> 
> 赞同：1
> 
> 时间：2009-06-17T12:44:19.643
> 
> 标签：java, linux, command-line

好的，我的机器（CentOS 5）上安装了 2 个不同版本的 Java，系统默认为 1.5.0_14，但我需要使用较新版本的 Java 在命令行上运行命令。如何在命令行中传递较新版本？

抱歉，这是一个非常n00b的问题，但我用谷歌搜索并没有找到任何东西，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T12:45:37.800

只需使用您的 java 可执行文件的完整路径名，而不是让操作系统根据您的 PATH 选择一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T12:45:39.873

使用 java 可执行文件的绝对路径：

`/opt/java-1.4/bin/java`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T12:47:18.950

您可以链接到该文件：

```
ln myJava1 <java version you want>
ln myJava2 <java version you want> 
```

然后当您需要其中一个时，键入相应的链接。

或者，如果你想要一个标准的 java 并且只需要另一个，你可以这样做：

```
ln theJava <myJava1 or myJava2> 
```

然后只需使用Java（或任何你想调用它的东西

# templates - 如何在 Proficy Change Management 中更新工厂布局模板？

> ID：1006783
> 
> 赞同：0
> 
> 时间：2009-06-17T12:44:57.737
> 
> 标签：templates, change-management, proficy

如何在 Proficy Change Management 中更新工厂布局模板（即它们在签出时位于何处？）。例如generic.htm？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T12:47:22.803

程序：

1.  打开 Proficy 变更管理
2.  检查所需的工厂布局
3.  打开资源管理器 (Win-E) 并转到 C:\fx\fxLayout\FactoryLayoutName
4.  进行更改（编辑、创建等）
5.  发布并签入工厂布局

该路径将根据您的配置而有所不同，但可能与上面提到的类似。当您发布或签入时，您更改或添加到该文件夹​​的任何文件都将被捕获。

# java - 什么是asp的应用程序对象java等价物？

> ID：1006784
> 
> 赞同：0
> 
> 时间：2009-06-17T12:45:05.757
> 
> 标签：java, http, caching, asp-classic

在 asp 中有一个 Application 对象，它类似于 Session 但它在所有会话之间共享......

[http://msdn.microsoft.com/en-us/library/ms525360.aspx](http://msdn.microsoft.com/en-us/library/ms525360.aspx)

> 您可以使用 Application 对象在给定应用程序的所有用户之间共享信息。基于 ASP 的应用程序定义为虚拟目录及其子目录中的所有 .asp 文件。因为 Application 对象可以由多个用户共享，所以有 Lock 和 Unlock 方法来确保多个用户不会尝试同时更改一个属性。

我使用这个对象来为小数据集实现一个简单的缓存......

什么是 java / jsp 等价物？

多谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T12:54:05.753

[ServletContext](http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletContext.html)类似于 ApplicationObject。您可以使用 setAttribute 方法添加所有用户共享的信息。在 servlet 中，您可以调用 getServletContext() 来访问它。但是我不确定它是否提供锁定/解锁功能。

如果您使用 Spring 或其他 IoC 容器，您可以轻松定义一个可供所有用户访问的 bean。我想这对两个世界来说都是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:24:48.047

JSP 中的应用程序范围与 ServletContext 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T13:00:07.037

我知道在 JSP 中实现这一点的两种方法。

1.  在应用范围内定义一个bean：

    <jsp:useBean id="appCounter" class="com.company.AppCounter" scope="application" />

2.  创建一个单例类。[例子](http://www.dofactory.com/Patterns/PatternSingleton.aspx)

# google-calendar-api - 谷歌日历 API：java.lang.ClassNotFoundException：com.google.common.collect.Maps

> ID：1006790
> 
> 赞同：12
> 
> 时间：2009-06-17T12:45:46.487
> 
> 标签：google-calendar-api

我正在创建一个相当简单的 Java 客户端，它连接到我的帐户并获取所有事件。在这里我得到一个例外说：

```
java.lang.ClassNotFoundException：com.google.common.collect.Maps
```

谁能告诉我我缺少哪个 JAR 以及从哪里下载它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-06-17T12:50:20.380

[谷歌收藏](http://code.google.com/p/google-collections/)，现在称为[番石榴](https://code.google.com/p/guava-libraries/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-01T10:38:40.503

我通过下载 jar 文件 guava-r07.jar 解决了这个问题。 [http://code.google.com/p/guava-libraries/downloads/detail?name=guava-r07.zip](http://code.google.com/p/guava-libraries/downloads/detail?name=guava-r07.zip) 试试看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T20:34:50.633

对于我们这些使用 Maven 的人，这里是 guava 的依赖项：

```
 <!-- https://mvnrepository.com/artifact/com.google.guava/guava -->
    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>19.0</version>
    </dependency> 
```

信用到期的信用：以上来自[http://mavenrepository.com/artifact/com.google.guava/guava/19.0](http://mavenrepository.com/artifact/com.google.guava/guava/19.0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-24T12:48:40.677

您是否尝试导入 google-collect-1.0-rc1.jar？它可以在（在源代码树中）找到： [http ://code.google.com/p/gdata-java-client/source/browse/#svn/trunk/java/deps](http://code.google.com/p/gdata-java-client/source/browse/#svn/trunk/java/deps)

谢谢， 雷诺

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-19T04:59:05.330

我还通过包含番石榴依赖解决了这个问题。Guava 是旧的 Google Collections Library 的超集。这是链接：[https](https://mvnrepository.com/artifact/com.google.guava/guava/21.0) : //mvnrepository.com/artifact/com.google.guava/guava/21.0 在您的 build.sbt 中包含此依赖项

# c - 在 C 中尝试和真正简单的文件复制代码？

> ID：1006797
> 
> 赞同：9
> 
> 时间：2009-06-17T12:46:49.310
> 
> 标签：c, file-io, copy, stdio

这看起来像一个简单的问题，但我在这里没有找到类似的东西。

由于C中没有文件复制功能，所以我们必须自己实现文件复制，但我不喜欢重新发明轮子，即使是这种琐碎的东西，所以我想问云：

1.  对于使用 fopen()/fread()/fwrite() 进行文件复制，您会推荐什么代码？
    *   对于使用 open()/read()/write() 进行文件复制，您会推荐什么代码？

这段代码应该是可移植的（windows/mac/linux/bsd/qnx/younameit）、稳定、经过时间考验、快速、内存高效等。欢迎进入特定系统的内部以获取更多性能（比如获取文件系统集群大小） .

这似乎是一个微不足道的问题，但例如，CP 命令的源代码不是 10 行 C 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T00:38:47.233

这是我需要从一个文件复制到另一个文件时使用的功能 - 使用测试工具：

```
/*
@(#)File:           $RCSfile: fcopy.c,v $
@(#)Version:        $Revision: 1.11 $
@(#)Last changed:   $Date: 2008/02/11 07:28:06 $
@(#)Purpose:        Copy the rest of file1 to file2
@(#)Author:         J Leffler
@(#)Modified:       1991,1997,2000,2003,2005,2008
*/

/*TABSTOP=4*/

#include "jlss.h"
#include "stderr.h"

#ifndef lint
/* Prevent over-aggressive optimizers from eliminating ID string */
const char jlss_id_fcopy_c[] = "@(#)$Id: fcopy.c,v 1.11 2008/02/11 07:28:06 jleffler Exp $";
#endif /* lint */

void fcopy(FILE *f1, FILE *f2)
{
    char            buffer[BUFSIZ];
    size_t          n;

    while ((n = fread(buffer, sizeof(char), sizeof(buffer), f1)) > 0)
    {
        if (fwrite(buffer, sizeof(char), n, f2) != n)
            err_syserr("write failed\n");
    }
}

#ifdef TEST

int main(int argc, char **argv)
{
    FILE *fp1;
    FILE *fp2;

    err_setarg0(argv[0]);
    if (argc != 3)
        err_usage("from to");
    if ((fp1 = fopen(argv[1], "rb")) == 0)
        err_syserr("cannot open file %s for reading\n", argv[1]);
    if ((fp2 = fopen(argv[2], "wb")) == 0)
        err_syserr("cannot open file %s for writing\n", argv[2]);
    fcopy(fp1, fp2);
    return(0);
}

#endif /* TEST */ 
```

显然，这个版本使用来自标准 I/O 的文件指针而不是文件描述符，但它相当高效并且尽可能地可移植。

* * *

好吧，除了错误函数 - 这对我来说很独特。只要你干净地处理错误，你应该没问题。标题`"jlss.h"`声明`fcopy()`；标`"stderr.h"`头声明`err_syserr()`了许多其他类似的错误报告功能。下面是该函数的一个简单版本——真正的函数添加了程序名称并执行了一些其他操作。

```
#include "stderr.h"
#include <stdarg.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

void err_syserr(const char *fmt, ...)
{
    int errnum = errno;
    va_list args;
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    if (errnum != 0)
        fprintf(stderr, "(%d: %s)\n", errnum, strerror(errnum));
    exit(1);
} 
```

* * *

*上面的代码可以被视为具有现代 BSD 许可证或 GPL v3 供您选择。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T15:32:16.107

就实际的 I/O 而言，我以各种形式编写了一百万次用于将数据从一个流复制到另一个流的代码是这样的。它在成功时返回 0，或者在错误时返回 -1 并设置 errno（在这种情况下，可能已经复制了任意数量的字节）。

请注意，对于复制常规文件，您可以跳过 EAGAIN 内容，因为常规文件总是阻塞 I/O。但不可避免地，如果您编写此代码，有人会在其他类型的文件描述符上使用它，因此将其视为免费赠品。

GNU`cp`做了一个特定于文件的优化，我在这里没有打扰，对于 0 字节的长块，而不是写你只是通过寻找结尾来扩展输出文件。

```
void block(int fd, int event) {
    pollfd topoll;
    topoll.fd = fd;
    topoll.events = event;
    poll(&topoll, 1, -1);
    // no need to check errors - if the stream is bust then the
    // next read/write will tell us
}

int copy_data_buffer(int fdin, int fdout, void *buf, size_t bufsize) {
    for(;;) {
       void *pos;
       // read data to buffer
       ssize_t bytestowrite = read(fdin, buf, bufsize);
       if (bytestowrite == 0) break; // end of input
       if (bytestowrite == -1) {
           if (errno == EINTR) continue; // signal handled
           if (errno == EAGAIN) {
               block(fdin, POLLIN);
               continue;
           }
           return -1; // error
       }

       // write data from buffer
       pos = buf;
       while (bytestowrite > 0) {
           ssize_t bytes_written = write(fdout, pos, bytestowrite);
           if (bytes_written == -1) {
               if (errno == EINTR) continue; // signal handled
               if (errno == EAGAIN) {
                   block(fdout, POLLOUT);
                   continue;
               }
               return -1; // error
           }
           bytestowrite -= bytes_written;
           pos += bytes_written;
       }
    }
    return 0; // success
}

// Default value. I think it will get close to maximum speed on most
// systems, short of using mmap etc. But porters / integrators
// might want to set it smaller, if the system is very memory
// constrained and they don't want this routine to starve
// concurrent ops of memory. And they might want to set it larger
// if I'm completely wrong and larger buffers improve performance.
// It's worth trying several MB at least once, although with huge
// allocations you have to watch for the linux 
// "crash on access instead of returning 0" behaviour for failed malloc.
#ifndef FILECOPY_BUFFER_SIZE
    #define FILECOPY_BUFFER_SIZE (64*1024)
#endif

int copy_data(int fdin, int fdout) {
    // optional exercise for reader: take the file size as a parameter,
    // and don't use a buffer any bigger than that. This prevents 
    // memory-hogging if FILECOPY_BUFFER_SIZE is very large and the file
    // is small.
    for (size_t bufsize = FILECOPY_BUFFER_SIZE; bufsize >= 256; bufsize /= 2) {
        void *buffer = malloc(bufsize);
        if (buffer != NULL) {
            int result = copy_data_buffer(fdin, fdout, buffer, bufsize);
            free(buffer);
            return result;
        }
    }
    // could use a stack buffer here instead of failing, if desired.
    // 128 bytes ought to fit on any stack worth having, but again
    // this could be made configurable.
    return -1; // errno is ENOMEM
} 
```

打开输入文件：

```
int fdin = open(infile, O_RDONLY|O_BINARY, 0);
if (fdin == -1) return -1; 
```

打开输出文件很棘手。作为基础，您希望：

```
int fdout = open(outfile, O_WRONLY|O_BINARY|O_CREAT|O_TRUNC, 0x1ff);
if (fdout == -1) {
    close(fdin);
    return -1;
} 
```

但也有混杂因素：

*   当文件相同时，您需要特殊情况，我不记得如何便携。
*   如果输出文件名是一个目录，您可能希望将该文件复制到该目录中。
*   如果输出文件已经存在（使用 O_EXCL 打开以确定这一点并检查 EEXIST 是否有错误），您可能想要做一些不同的事情，就像`cp -i`这样。
*   您可能希望输出文件的权限反映输入文件的权限。
*   您可能希望复制其他特定于平台的元数据。
*   您可能希望也可能不希望在出错时取消链接输出文件。

显然，所有这些问题的答案都可能是“做同样的事情`cp`”。在这种情况下，原始问题的答案是“忽略我或其他任何人所说的一切，并使用”的来源`cp`。

顺便说一句，获取文件系统的集群大小几乎没有用。在超过磁盘块的大小之后，您几乎总是会看到速度随着缓冲区大小的增加而增加。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-26T14:12:43.157

每次读取的大小需要是 512 的倍数（扇区大小） 4096 是一个不错的选择

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T12:50:36.323

这是一个非常简单明了的例子：[复制文件](http://www.java2s.com/Code/C/File/Copyafile.htm)。由于它是用 ANSI-C 编写的，没有任何特定的函数调用，我认为它非常便于移植。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-17T12:54:10.310

根据您复制文件的意思，这肯定不是微不足道的。如果您的意思是仅复制内容，那么几乎无事可做。但通常，您需要复制文件的元数据，这肯定是平台相关的。我不知道有任何 C 库可以以可移植的方式执行您想要的操作。如果您关心可移植性，仅处理文件名本身就不是一件小事。

在 C++ 中，[boost中有文件库](http://www.boost.org/doc/libs/1_39_0/libs/filesystem/doc/index.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T13:38:31.093

我在实现自己的文件副本时发现了一件事，这似乎很明显，但事实并非如此：I/O 很**慢**。您几乎可以通过复制多少来确定副本的速度。很明显，您需要尽可能少地做这些。

我发现最好的结果是当我给自己一个巨大的缓冲区时，在一次 I/O 中将整个源文件读入其中，然后在一次 I/O 中将整个缓冲区写回。如果我什至必须分 10 批进行，它会变得很慢。尝试读取和写入每个字节，就像一个天真的编码器可能首先尝试的那样，只是很痛苦。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-25T15:48:25.980

Steve Jessop 写的接受的答案没有回答问题的第一部分，Jonathan Leffler 做了，但是做错了：代码应该写成

```
while ((n = fread(buffer, 1, sizeof(buffer), f1)) > 0)
    if (fwrite(buffer, n, 1, f2) != 1)
        /* we got write error here */

/* test ferror(f1) for a read errors */ 
```

解释：

1.  根据定义，sizeof(char) = 1，总是：其中有多少位无关紧要，8（在大多数情况下）、9、11 或 32（例如，在某些 DSP 上）- char 的大小为 1。注意，这里不是错误，而是额外的代码。
2.  The fwrite function writes *upto* nmemb (second argument) elements of specified size (third argument), it *does not* required to write exactly nmemb elements. To fix this you must write the rest of the data readed or just write *one* element of size n — let fwrite do all his work. (This item is in question, should fwrite write all data or not, but in my version short writes impossible until error occurs.)
3.  You should test for a read errors too: just test ferror(f1) at the end of loop.

Note, you probably need to disable buffering on both input and output files to prevent triple buffering: first on read to f1 buffer, second in our code, third on write to f2 buffer:

```
setvbuf(f1, NULL, _IONBF, 0);
setvbuf(f2, NULL, _IONBF, 0); 
```

(Internal buffers should, probably, be of size BUFSIZ.)

# javascript - 如何在 Javascript 不可用时显示内容，在 javascript 可用时隐藏它并且在任何一种情况下都不闪烁？

> ID：1006798
> 
> 赞同：1
> 
> 时间：2009-06-17T12:46:50.260
> 
> 标签：javascript, html, css, progressive-enhancement, graceful-degradation

我有一个用于运输选项的简单表单，当有人从下拉列表中选择新选项时，我正在使用 javascript 自动提交表单。

为了支持没有 javascript 的浏览器，还有一个提交表单的按钮。此按钮使用 javascript 隐藏。

但是，这意味着我的按钮在短时间内可见，并且在重新格式化其余内容时可能会导致闪烁。

任何人都可以建议一种创建按钮的方法，以便它开始隐藏，但只有在 javascript 不可用时才可见？例如，从 display:none 开始；并神奇地更改为 display:block; 当且仅当没有 javascript。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-17T12:49:05.217

只需将任何内容放入`<noscript> ... </noscript>`标签中，然后它只会在 JavaScript 未启用/可用时出现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-17T12:50:13.657

这取决于您如何隐藏它，您是使用准备好的 DOM 还是准备好窗口？窗口就绪等待所有图像下载，这通常太长了。

出于可访问性的原因，我会将其隐藏在加载的 DOM 上。但是为了确保它不会出现，你可以把它放在一个 noscript 元素中

```
<noscript>
    <input type="submit" />
</noscript> 
```

至于你的最后一段，在没有 JavaScript 的情况下不会发生这样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T13:15:59.937

只需编写不显眼的 javascript：http: [//icant.co.uk/articles/seven-rules-of-unobtrusive-javascript/](http://icant.co.uk/articles/seven-rules-of-unobtrusive-javascript/)。

您所做的是将您的页面编写为普通页面，但是，然后使用底部的代码启动 javascript，并开始编辑页面以使其更具交互性。这样做的好处是，如果他们关闭了 javascript 页面是正常的，但是，如果他们打开了它，那么您可以优雅地添加更多功能。

我不是该选项的忠实拥护者，因为这可能意味着需要下载大量不需要的额外代码。

在此页面上，请查看评论 5，以获得能够在实际显示任何内容之前进行更改的良好解决方案：http: [//dean.edwards.name/weblog/2006/06/again/](http://dean.edwards.name/weblog/2006/06/again/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T12:56:53.767

您可以在提交按钮之前和之后使用脚本来编写隐藏的 div 元素开始和结束标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T22:43:27.573

一种选择是从显示的按钮开始，然后从 JavaScript 修改其 CSS：

```
<head>
    ...
    <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8">
    <script>
        document.styleSheets[0].addRule(".hideMe", "display:none");
    </script>
    ...
</head> 
```

修改样式表而不是按钮（并将此代码*放在*onload 之外）可确保在绘制按钮之前将其隐藏。

# sql-server-2005 - SQL Server 2005 中 TRY ... CATCH 的成功策略

> ID：1006801
> 
> 赞同：0
> 
> 时间：2009-06-17T12:47:15.580
> 
> 标签：sql-server-2005, try-catch

我正在更改一些代码以利用 SQL Server 2005 中的 TRY ... CATCH。您找到了哪些成功的策略来使用它？

我正在考虑创建一个存储过程，它调用提供错误详细信息的系统函数，回滚任何打开的事务并引发错误。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T13:11:17.467

[这是我正在使用](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)的模板示例：

```
create procedure [usp_my_procedure_name]
as
begin
    set nocount on;
    declare @trancount int;
    set @trancount = @@trancount;
    begin try
        if @trancount = 0
            begin transaction
        else
            save transaction usp_my_procedure_name;

        -- Do the actual work here

lbexit:
        if @trancount = 0   
            commit;
    end try
    begin catch
        declare @error int, @message varchar(4000), @xstate int;
        select @error = ERROR_NUMBER()
                , @message = ERROR_MESSAGE()
                , @xstate = XACT_STATE();
        if @xstate = -1
            rollback;
        if @xstate = 1 and @trancount = 0
            rollback
        if @xstate = 1 and @trancount > 0
            rollback transaction usp_my_procedure_name;

        raiserror ('usp_my_procedure_name: %d: %s', 11, 1, @error, @message) ;
        return;
    end catch   
end 
```

这个模板处理嵌套事务，每个过程只回滚自己的工作（如果可能的话）并让调用者决定是否回滚调用者的工作。重要的是要检查[XACT_STATE](http://msdn.microsoft.com/en-us/library/ms189797.aspx)，因为有可能发生交易失败。[MSDN 也有关于这个主题](http://msdn.microsoft.com/en-us/library/ms179296(SQL.90).aspx)的相当长的文本。

还有各种利害攸关的问题可能会改变您在 TRY/CATCH 和事务管理方面可以和应该做的事情：您是否使用分布式事务？你有链接服务器吗？您的某些维护工作是否需要恢复命名保存点功能？您需要调用者访问原始异常代码吗？您是否想保留异常严重性，也许是为了您的自动监控和警报通知？重点是一些模板和实践在某些情况下有效，有些在其他情况下有效。到目前为止，我发布的模板对我的大多数情况都证明是好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T12:58:17.960

我完全按照您描述的方式使用 TRY...CATCH，`RAISERROR`在 CATCH 块的末尾使用将错误传递回调用者。这也允许您处理存储过程中的某些错误代码。

# interop - 在 powerpoint 2007 中拖放 html 表格

> ID：1006809
> 
> 赞同：3
> 
> 时间：2009-06-17T12:48:36.187
> 
> 标签：interop, drag-and-drop, powerpoint, office-2007

我已经处理这个问题很长一段时间了：我们公司为 word/excel/ppt 开发插件（2003 和 2007 版本）

我们的插件提供的选项之一是将表格从插件拖到应用程序中。

这是通过 3 种不同的方式实现的：

1.  Excel --> 我们创建一个制表符分隔的字符串并将其拖放为 DataFormats.text
2.  Word --> 我们创建一个 RTF 表，并将其拖放为 DataFormats.rtf
3.  PPT --> 我们创建一个 HTML 表格，并将其拖放为 DataFormats.html

在 2003 和 2007 中，一切都运行良好，除了 powerpoint 2007，它似乎不支持任何类型的 html 删除（不像 powerpoint 2003，它运行良好）我们已经尝试了所有方法，但我们开始绝望。

任何人都知道如何让 PowerPoint 2007 允许将 html 拖放到演示文稿中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:12:08.443

可能会晚几年，但回复总是好的。

我也是这样做的。您应该将 HTML 转换为 JPEG

```
WebsiteToImage websiteToImage = new WebsiteToImage(temporaryFilePath, @"C:\image.bmp");
websiteToImage.Generate();
slide.Shapes.AddPicture(@"C:\image.bmp", Microsoft.Office.Core.MsoTriState.msoTrue, Microsoft.Office.Core.MsoTriState.msoTrue, oldshapeleft, oldshapetop, oldshapewidth, oldshapeheight); 
```

找到的来源： [从 ASP.NET 将网页转换为图像](https://stackoverflow.com/questions/2715385/convert-webpage-to-image-from-asp-net)

# ajax - Drupal Ajaxifying 一切

> ID：1006817
> 
> 赞同：1
> 
> 时间：2009-06-17T12:50:28.990
> 
> 标签：ajax, drupal

有没有什么方法可以使 Drupal 重新加载，以便页面重新加载不是重新加载，而只是内容修改？

所以菜单会被更新，内容会被更新，任何块等都会被适当地修改，但不会有将整个页面吐出给用户进行客户端修复的开销，也不会丢失 Drupal 拥有的漂亮的 javascript UI (像可折叠的字段集、可拖动的表格项和其他 ajaxified 模块等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T22:00:21.690

1.  最简单的解决方案是在您的视图中使用 ajax 寻呼机（这只适用于一次块或主要内容）

2.  ajaxify 可以使用的每个表单[http://drupal.org/project/ajax](http://drupal.org/project/ajax)

如果你想 ajaxify*一切*然后页面重新加载是更好的选择 =]

# wordpress - 一次显示一个类别的 Wordpress 档案？

> ID：1006818
> 
> 赞同：2
> 
> 时间：2009-06-17T12:50:33.530
> 
> 标签：wordpress, categories, archive

我几乎完成了使用 Wordpress 进行自定义 CMS 的卑微尝试。我唯一的困难是让一个页面只显示一个类别的档案（它是孩子）。有人有想法吗？非常感谢！里吉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T13:56:57.360

[您可以使用类WP_Query](http://codex.wordpress.org/Function_Reference/WP_Query)创建自己的自定义存档页面。具体来说，类似：

```
<?php $query = new WP_Query('category_name=code'); ?>  
<?php while ($query->have_posts()) : $query->the_post(); ?>
<!-- display the category here --> 
<?php endwhile; ?> 
```

您可以查看默认主题的 archive.php 以了解在您熟悉的布局中显示特定类别还需要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T03:50:16.567

这是我用来显示“mycategory”类别的标题和永久链接列表的内容；这可以进入主 Wordpress 循环：

```
<?php $my_query = new WP_Query('category_name=mycategory&showposts=-1'); ?><?php while ($my_query->have_posts()) : $my_query->the_post(); ?><a href="<?php the_permalink() ?>" rel="bookmark"><?php the_title(); ?></a><?php endwhile; ?> 
```

将“-1”更改为“1”以仅显示最近的一篇文章；到“10”以显示最后 10 个帖子等。

# c# - 如何将上一个控件选择为容器控件？

> ID：1006820
> 
> 赞同：1
> 
> 时间：2009-06-17T12:51:00.470
> 
> 标签：c#, .net, winforms, focus

我有一个包含`NumericUpDown`. 仅当容器具有焦点时才会显示 updown，因此容器必须是可选择的（否则它永远无法获得焦点）。我希望控件在选项卡顺序方面表现为单个实体；也就是说，当用户tab到控件时，它会显示updown并且updown是聚焦的；当用户从 updown 上移开标签时，就好像他们从控件上移开了一样。

实现第一部分很容易：在容器的 OnEnter 中，我关注的是 updown。如果用户在不换档的情况下跳开，它也可以正常工作，因为选项卡顺序中的下一个控件是正确的。但是，上一个选项卡顺序中的上一个控件是容器，因为它必须是可选择的；因此，当用户将选项卡从 updown 移开时，容器被选中，因此 updown 再次被选中。

当用户将选项卡从 updown 移开时，如何选择容器控件的上一个控件？

更新：

我的问题不是检测何时需要执行此操作 - 它正在找到将焦点发送到的控件。

更新：

`SelectNextControl`似乎只在容器的父控件内工作；如果容器是其父级的唯一控件，则它不会更改焦点，即使层次结构中的其他控件应该通过选项卡接收焦点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T13:49:48.480

如果你知道你可以使用的标签的方向，`SendKeys.Send("+{TAB}");`并且`SendKeys.Send("{TAB}");`

或者你可以使用`Control.SelectNextControl()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T14:11:40.387

```
void UserControl1_Leave(object sender, EventArgs e)
    {
        this.numericUpDown1.Visible = false;
        Control c = Parent.Controls[this.Name];
        int i = Parent.Controls.IndexOf(c);
        Parent.Controls[i - 1].Focus();
    } 
```

我已将此休假事件添加到自定义控件中，并且它对我有用。基本上，当用户将选项卡移开时，此事件会将焦点设置到父窗体的控件集合中的前一个控件。不知道它是否是您正在寻找的东西，但希望它会引导您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T14:29:08.790

实际上这似乎是我的默认行为？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T13:36:41.783

这是一个 hack，但您可以使用 OnEnter 事件和一个布尔变量。如果变量设置为 true，那么您已经在容器中并转到上一个控件（这可能是容器控件的属性，因此您知道要去哪里）。

如果变量为假，您只需进入自定义控件并专注于上/下。

在容器退出时，将变量设置回 false。

我敢肯定那里有更简单的东西，但这是我能想到的最快的事情。

# apache-flex - 在 flex 中创建网络图

> ID：1006821
> 
> 赞同：1
> 
> 时间：2009-06-17T12:51:02.420
> 
> 标签：apache-flex, actionscript

好的，我最近基于此提出了一个问题。

但我需要缩小更多范围..

我需要创建一个带有 flex 节点的网络图。一旦我给出输入，如果节点有共同点，它们必须相互连接。

节点必须是可点击的以显示它连接到的其他节点。

一个简单的代码示例将不胜感激。

可以修改气泡图来执行此操作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T15:38:28.263

我想你可以试试[Flare](http://flare.prefuse.org/)。

看看 Layout 的演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:28:59.427

我个人认为，气泡图并不是真正正确的方法......最简单的事情 - 在 flex 世界中 - 将子类化`UIComponent`两次，例如，`NodeView`and `ConnectionView`，然后将所有这些放入某个容器中，绝对定位...

另一种方法是简单地将 a 添加`Sprite`到 a`UIComponent`中，并在普通 AS3 中做同样的事情，只需子类化`Sprite`两次......减少开销和其他问题，但不会受益于 flex 功能，例如样式......

你已经有网络模型了吗？节点也有坐标，还是你需要自己安排？或者，如果从外部加载，您可以显示一些示例数据吗？

问候

back2dos

# asp.net-mvc - 使用部分视图在 MVC 中的 aspx 页面上使用用户控件

> ID：1006822
> 
> 赞同：0
> 
> 时间：2009-06-17T12:51:37.460
> 
> 标签：asp.net-mvc, renderpartial

我有下拉菜单，点击一个按钮，我想在用户控件中显示数据，下面的代码没有按预期工作。

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <%
        using (Html.BeginForm())
        {%>
    <%=Html.DropDownList("CarMake", (SelectList)ViewData["CarMake"])%>
    <input type="submit" value="Get all car model" />
    <%
         Html.RenderPartial("CarModel");
        } %>
</asp:Content> 
```

// 在控制器中

```
 public ActionResult Test1()
        {
            ViewData["CarMake"] = new SelectList(_carDataContext.Makes.Select(m => new { ID = m.Id, Name = m.Name }), "ID", "Name");
            return View();
        }

        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Test1(int carMake)
        {
            ViewData["CarMake"] = new SelectList(_carDataContext.Makes.Select(m => new { ID = m.Id, Name = m.Name }), "ID", "Name");
            var carModel = _carDataContext.Models.Where(m => m.MakeId == carMake).ToList();
            return PartialView("CarModel", carModel);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T12:56:30.337

由于您正在发布表单的完整帖子，因此您不想返回部分视图。您想将 ViewData["CarModel"] 设置为正确的模型，然后重新渲染相同的视图。视图中的 RenderPartial 将使用它在代码中“包含”正确的局部视图。

请注意，如果您通过 AJAX 发布，这将有所不同。此时，您将设置它以替换页面的特定元素，并且您只想渲染进入该元素的部分。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Test1(int carMake)
    {
        ViewData["CarMake"] = new SelectList(_carDataContext.Makes.Select(m => new { ID = m.Id, Name = m.Name }), "ID", "Name");
        ViewData["CarModel"] = _carDataContext.Models.Where(m => m.MakeId == carMake).ToList();
        return View();
    } 
```

# delphi - 在 Windows Vista 64 位下从命令行使用 Delphi 2009 进行编译

> ID：1006831
> 
> 赞同：1
> 
> 时间：2009-06-17T12:53:31.807
> 
> 标签：delphi, windows-vista, delphi-2009, win64

有没有人在不安装 Delphi 2009 的情况下，在 64 位 Windows Vista 下使用命令行 dcc32.exe 编译器成功编译 Win32 GUI 应用程序？在我们的系统上它失败了，并显示 DFM 文件包含未知 16 位资源的消息。这通常表示无法读取 DFM 文件。它在我们尝试过的所有 32 位 Vista 和 Windows XP 上都能完美运行。

我在问，因为我们希望确保以后可以在需要时重建当前的 exe 文件，所以即使我们将来都切换到 64 位操作系统，我们希望能够重建旧的 2009 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T14:51:27.000

使用 Delphi 2009，您应该使用 msbuild 命令行编译您的项目 (msbuild YourProject.dproj)。请务必从 RAD Studio 命令提示符执行此操作。这确保设置了一些环境变量。这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-22T07:01:39.560

添加 lnkdfm120.dll 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T17:57:37.520

是的，我们正在通过 dcc32 通过 nant 在 Vista 64 位和 Windows 2008 64 位中执行控制台构建。如果您安装到默认位置，您可能必须处理 (X86) 的一些路径问题（我们不会删除这些类型的依赖项）。

# active-directory - Active Directory 获取角色中的用户

> ID：1006833
> 
> 赞同：1
> 
> 时间：2009-06-17T12:53:58.763
> 
> 标签：active-directory, ldap, membership

我得到了一个 AD 组的成员，但我得到的是显示名称而不是用户名。我怎样才能得到用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T12:59:48.830

在您返回的属性中查找 sAMAccountName。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T13:39:39.063

好吧，我认为这可能是不可能的，因为唯一与用户相关的属性是“成员”。因此，作为一种解决方法，我使用具有“成员”属性值的 DirectoryService 再次从 AD 中获取用户并获取它的 sAMAaccoundName。我很高兴听到另一种解决方案，可以为除第一个呼叫之外的每个用户保存对 AD 的呼叫。谢谢

# java - 分离web server和app server，都需要java吗？

> ID：1006839
> 
> 赞同：3
> 
> 时间：2009-06-17T12:54:20.323
> 
> 标签：java

如果我们要分离我们的 Web 服务器和应用程序服务器，我们需要在两台机器上安装 java 吗？我有一位同事说要在两台机器上安装 jboss（如果两台机器都安装了应用服务器，这似乎无法达到目的），另一位说只在一台机器上安装 jboss，在另一台机器上安装 apache（应用程序服务器/网络服务器）。

我已经设置了 Web 项目，它使用了 servlet 和 JSP。JSP 显示内容，而 servlet 执行操作。servlet 接收请求并将响应转发给 JSP。我的问题是，如果 Web 服务器只有 apache 并因此显示静态内容，我该怎么做？我了解如何将请求从 Web 服务器转发到应用程序服务器，但是如何维护会话状态，是否在 Web 服务器上完成，如果是，将如何完成？

如果登录页面是html并且登录后的内容是html，那么如果人们没有登录，我怎么能阻止他们访问内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-17T13:08:27.113

您描述的后一种设置是标准设置，Apache 提供静态内容并将 JSP/servlet 请求转发到应用程序服务器。

会话状态保持正常，应用服务器上的 Java webapp 向用户发送回一个包含 JSESSIONID 的 cookie，当用户发出后续请求时，Apache 在转发到应用服务器的内容中包含所有请求信息（包括 cookie）。

如果您想让 Apache 位于多个 JBoss 实例的前面并对请求进行负载平衡，那么设置会变得有点复杂，但是使用[mod_proxy_balancer](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)设置仍然很容易。

一些可能对您有帮助的链接：

[http://help.shadocms.com/blog/2009/how-to-setup-apache-with-jboss-on-a-shado-site.cfm](http://help.shadocms.com/blog/2009/how-to-setup-apache-with-jboss-on-a-shado-site.cfm) [http://redlumxn.blogspot.com/2008/01/configure -apache2-and-jboss-422ga.html](http://redlumxn.blogspot.com/2008/01/configure-apache2-and-jboss-422ga.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T13:10:04.317

有很多可能性。

1.  在 web 机器上只安装带有 mod_jk 的 apache 以将请求重定向到 tomcat/jboss。在这种情况下，您不需要在这台机器上安装 java。

2.  您还可以将您的 jsp 容器（例如 tomcat/jboss）和您的应用程序服务器分开，在这种情况下，您需要在拥有 Web 容器的地方安装 java。

3.  通常，在需要更高安全性的地方，人们会结合上述可能性。瘦 web 层 (apache + no java) + Web 容器 (例如 tomcat) + 应用层 (jboss/glassfish)

第一种解决方案通常是标准解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T13:05:09.833

你的场景让我想起了 SiteMinder。它用于对我们的应用程序进行访问控制。它内置了 HTTP 转发，因此从用户的角度来看，浏览器与 siteminder 对话，siteminder 与真实应用程序对话。他们都使用会话 cookie 和 siteminder 的称为 SMSESSION 而应用程序称为 JSESSIONID，因此没有冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T13:10:36.127

一个常见的部署是使用 Apache 前端服务器来提供静态内容并将动态内容的请求转发到 JSP 服务器。这主要是出于性能原因，Apache 在提供内容方面更快，并且减少了 JSP 服务器上的负载。

我看不出你为什么不能使用 IIS 作为前端服务器（从等式中删除 Java）的任何原因，尽管拥有丰富的 Apache 模块和有关配置的随附信息，我认为你可能会让生活变得困难如果你这样做了，为你自己。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T13:13:22.580

简短的回答 - 不。

长答案-

这取决于您的应用程序的需求。您希望将 Web 服务器安装在不同的物理机器上的原因有几个：

*   您想让 Web 服务器为静态内容提供服务，并让应用服务器自由地只处理 servlet/jsp 内容

*   您希望实现基于软件的负载平衡。您将向 多个后备应用服务器
    发出 apache 服务器代理请求

在您的登录示例中，html 页面由 apache 提供，html 表单的操作指向您的 servlet 进行处理 - 因此 JBoss/java 仍将管理会话。请记住，您希望 apache 到服务器的任何静态内容都需要存在于 Web 服务器上。

# math - 计算加密数据的最大大小

> ID：1006841
> 
> 赞同：8
> 
> 时间：2009-06-17T12:55:19.463
> 
> 标签：math, encryption, aes, rijndaelmanaged, rijndael

有没有办法计算具有固定数组长度的 Rijndael 加密的最大结果？

加密方式：RijndaelManaged

填充：PKCS7

密码模式：CBC

块大小 128

密钥大小：128

我需要这个，因为我正在转换一个所有字符串都将被加密的数据库，所以我需要更改所有字符串字段的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-23T22:06:36.860

您需要尝试的一切：

```
 public partial class Form1 : Form
   {
      private SymmetricAlgorithm mEncryptionType;

      public Form1()
      {
         mEncryptionType = new RijndaelManaged();
         mEncryptionType.Padding = PaddingMode.PKCS7; //PaddingMode.None;
         mEncryptionType.Mode = CipherMode.CBC;
         mEncryptionType.BlockSize = 128; // 192; // 256; // Update byte array to IV when changed
         mEncryptionType.KeySize = 128; // 192; // 256; // Update byte array to Key when changed
         mEncryptionType.IV = new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
                                           0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F};
         mEncryptionType.Key = new byte[] { 0x00, 0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77,
                                           0x88, 0x99, 0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF };

         int encrypted_size = CalculateEncryptedSize(new byte[] { 0x22, 0x23, 0x44 });
         // Shows Theran's point about exact block size
         encrypted_size = CalculateEncryptedSize(new byte[] { 0x00, 0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77,
                                           0x88, 0x99, 0xAA, 0xBB, 0xCC, 0xDD, 0xEE, 0xFF  });
      }

      /// <summary>
      /// Calculate the encrypted size of input buffer
      /// </summary>
      /// <param name="inputBuffer">The input buffer</param>
      /// <returns>Size of the encrypted buffer</returns>
      public int CalculateEncryptedSize(byte[] inputBuffer)
      {
         int extra_padding = 0;
         if (mEncryptionType.Padding != PaddingMode.None)
         {
            int padding_size = (mEncryptionType.BlockSize / 8);
            extra_padding = (padding_size - (inputBuffer.Length % padding_size));
         }
         return inputBuffer.Length + extra_padding;
      }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T13:03:41.867

是的。将输入大小四舍五入到最接近的块大小倍数（例如 128 / 8 = 16 字节）。

```
extraBytesNeeded = (16 - (inputSize % 16)) % 16;
maxSize = inputSize + extraBytesNeeded. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-19T02:30:22.793

Jeff 的回答几乎是正确的，除了 PKCS7 将始终为消息添加填充，即使消息完全适合整数个块。另外，不要忘记，如果使用随机 IV，也必须存储 IV。PKCS7 填充消息长度的更正公式为：

```
extraBytesNeeded = (16 - (inputSize % 16)); // whole block of padding if input fits exactly
maxSize = inputSize + extraBytesNeeded + IVbytes; 
```

# c# - C# 多维数组，如 PHP

> ID：1006850
> 
> 赞同：4
> 
> 时间：2009-06-17T12:57:50.270
> 
> 标签：c#, arrays

我一直在尝试这样做大约 6 个小时，我被难住了..

我想要 C# 中的等效项：

```
 $settings = array();
    foreach(file('settings.txt') as $l) $settings[]=explode(',',$l);
    print $settings[0][2]; 
```

到目前为止，这是我所没有的：

```
 string fileName = System.IO.Path.GetDirectoryName(Application.ExecutablePath) + "\\" + "settings.txt";
    string[,] settings;

    FileStream file = null;
    StreamReader sr = null;

    try
    {
        file = new FileStream(fileName, FileMode.OpenOrCreate, FileAccess.Read);
        sr = new StreamReader(file, Encoding.ASCII);
        string[] line;
        int i = 0;
        do
        {
            line = sr.ReadLine().Split(',');
            settings[i++, 0] = line[0];
        } while (line != null);
        file.Close();

        MessageBox.Show(settings[1, 0]);
    } catch (Exception err) { MessageBox.Show(err.Message); } 
```

我得到“对象引用未设置为对象的实例”，任何想法将不胜感激..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T13:02:45.363

使用*锯齿状数组*而不是多维数组——或者更好的是，a `List<string[]>`：

```
var settings = new List<string[]>();

foreach (string line in File.ReadLines("settings.txt", System.Text.Encoding.ASCII))
    settings.Add(line.Split(',')); 
```

Marc 使用 LINQ 代替循环是一个不错的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T12:59:58.037

您应该首先启动您的阵列，如下所示：

```
string[,] settings = new string[3,3]; 
```

**编辑：**同样通过这一行，您跳过设置数组的第一项：

```
settings[i++, 0] = line[0]; 
```

你应该这样分配你的价值：

```
settings[i, 0] = line[0];
i++; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-17T13:03:19.027

如果您要查看许多不同的单元格：

```
 string[][] lines = File.ReadAllLines(path).Select(
        line => line.Split(',').ToArray()).ToArray();
    Console.WriteLine(lines[0][2]); 
```

如果你**只**想要[0][2]，你可以稍微限制一下......

```
 using (StreamReader sr = File.OpenText(path))
    { // only read the first line (zero)
        Console.WriteLine(sr.ReadLine().Split(',')[2]);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-17T13:04:24.860

好吧，那甚至不应该编译 - 你永远不会初始化`settings`. .NET 中的数组具有固定大小 - 在我看来，您应该使用 a`List<string[]>`来代替：

```
List<string> settings = new List<string>();

using (TextReader reader = File.OpenText(fileName, Encoding.ASCII))
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        settings.Add(line.Split(','));
    }
}

MessageBox.Show(settings[1][0]); // Shows the first part of the second line 
```

（请注意，即使发生异常，这也可以确保文件被关闭 - 您绝对应该了解该`using`语句。Marc 的解决方案通过在一次调用中加载所有行来避免这种情况，这显然有内存开销，但在其他方面很好。 )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T13:17:59.917

感谢您的超快速答案！

我决定：

```
 List settings = new List();
    foreach (string line in File.ReadAllLines("settings.txt", System.Text.Encoding.ASCII)) settings.Add(line.Split(',')); 
```

谢谢！

院长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T13:19:01.477

上周有一个关于类似问题的[代码高尔夫问题。](https://stackoverflow.com/questions/966889/codegolf-convert-csv-to-html-table-with-smallest-amount-of-code-in-c)根据要求，我编写了一个使用 LINQ 的版本。你可以在我的[网站](http://hackersbasement.com/?p=96)上查看。

您可能想根据自己的需要对其进行一些调整...

```
static void Main(string[] args)
{
        string[][] lines = null;
        using (var lp = "settings.txt".Load())
            lines = lp.Select(l => l.Split(',')).ToArray();
} 
```

[http://hackersbasement.com/?p=96](http://hackersbasement.com/?p=96)（以防万一我的网站发生变化）

```
public static class LineProcessorLinq
{
    public static LineProcessor Load(this string fileName)
    {
        return new LineProcessor(fileName);
    }

    public static void Write(this IEnumerable<string> lines, string header, string footer, string fileName)
    {
        using (var fs = File.AppendText(fileName))
            lines.Write(header, footer, fs);
    }

    public static void Write(this IEnumerable<string> lines, string header, string footer, StreamWriter writer)
    {
        if (writer == null)
            throw new ArgumentNullException("writer");

        if (!string.IsNullOrEmpty(header))
            writer.Write(header);

        foreach (var line in lines)
            writer.Write(line);

        if (!string.IsNullOrEmpty(footer))
            writer.Write(footer);
    }
}
public class LineProcessor : Component, IEnumerable<string>
{
    private StreamReader _reader = null;

    public LineProcessor(string fileName) : this(File.OpenText(fileName)) { }

    public LineProcessor(StreamReader reader)
    {
        if (reader == null)
            throw new ArgumentNullException("reader");
        _reader = reader;
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing && _reader != null)
            _reader.Close();
    }

    #region IEnumerable<string> Members

    public IEnumerator<string> GetEnumerator()
    {
        var currentPos = _reader.BaseStream.Position;
        while (!_reader.EndOfStream)
            yield return _reader.ReadLine();
        if (_reader.BaseStream.CanSeek)
            _reader.BaseStream.Seek(currentPos, SeekOrigin.Begin);
    }

    #endregion

    #region IEnumerable Members

    IEnumerator IEnumerable.GetEnumerator() { throw new NotImplementedException(); }

    #endregion
} 
```

# iphone - iphone刷新图片UIImageView

> ID：1006866
> 
> 赞同：1
> 
> 时间：2009-06-17T13:01:29.357
> 
> 标签：iphone, uiimageview

我有一个相当基本的问题。`UIImageView`我的屏幕上有几 (5)张图像。当我单击一个按钮时，我想将每个图像更改为其他图像。我还想在每个图像更改时播放声音。

所以我基本上想要在每个图像发生变化时发出咔哒声。

问题是，由于某种原因，如果我说 5 个图像，
声音会先播放 5 次，然后图像会发生变化。

这就像图像只有在控制权返回给用户进行输入时才会刷新。

一旦我告诉它要显示什么图像，我如何“强制”它刷新图像？

我是 iphone/macworld 的新手，所以请放轻松 :-)

瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-12-25T03:40:30.340

如果您正在寻找定期刷新 UIImageView 的方法，可以参考以下内容： [http ://www.shanison.com/2010/12/25/uiimageview-load-remote-image/](http://www.shanison.com/2010/12/25/uiimageview-load-remote-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T14:07:04.593

听起来您可能在异步播放声音时从磁盘或网络上加载图像。也许您正在使用`AudioServicesPlaySystemSound`with `UIImage +imageWithContentsOfURL:`？实际的图像加载和声音播放代码在这里最有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T14:09:31.077

> 这就像图像只有在控制权返回给用户进行输入时才会刷新。

这正是发生的事情。UI 在主线程上更新，因此在您的代码运行时不会发生更新。

为了实现您想要的，您将需要计时器。查看 NSTimer 文档。您需要创建一个计时器来触发更改第二个图像的方法，然后将计时器重新排队以更改您的第三个图像。有一种方便的方法可以创建您需要的计时器：`+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats`

```
[NSTimer timerWithTimeInterval:1.0f target:self selector:@selector(updateImage2:) userInfo:nil repeats:NO]; 
```

那么，你有一个方法：

```
- (void) updateImage2(NSTimer*)theTimer
{

     //Update image 2 here
     // play sound 2 here

    [NSTimer timerWithTimeInterval:1.0f target:self selector:@selector(updateImage3:) userInfo:nil repeats:NO];
} 
```

我会留给你来实现方法 updateImage3: ;-)

像这样运行更新使主线程有机会更新 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-14T14:07:56.910

当我想更改 uiimageview 背景并刷新它，然后继续执行代码时，这对我有用：

```
-(void)imgTapped_event:(UIImageView*)imgViewTapped
{
     imgViewTapped.backgroundColor=[UIColor whiteColor];

     //let the system update ui changes
     [NSRunLoop currentRunLoop]runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.0f]];

     //continue your code execution, play sounds etc...

     //my helper method to play sound
     [self playSound:@"goodAnswer" sync:YES loops:0]; 
 } 
```

# recursion - 以非递归方式检索二叉树节点的深度

> ID：1006867
> 
> 赞同：3
> 
> 时间：2009-06-17T13:01:32.447
> 
> 标签：recursion, binary-tree, non-recursive

谁能指出一种在*不使用递归*的情况下获取二叉树（不是平衡树或 BST）中节点深度的方法？理想情况下使用 Java/C/C#

节点表示为：

```
class Node
{
  Node Left;
  Node Right;
  string Value;
  int Depth;
} 
```

我的第一个想法是使用带有 FIFO 列表的 Level Order，但我在检测级别何时发生变化时遇到了困难，特别是对于不平衡的树。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-17T13:51:05.513

您可以使用堆栈实现任何递归方法，这就是递归的工作方式。想象一下你的递归函数看起来像

```
function int getDepth (Node head, string val)
{
    if (head == NULL)
        return -1;

    if (val == head.Value)
        return head.Depth;

    return MAX(getDepth(head.Left, val), getDepth(head.Right, val);
} 
```

非递归函数看起来像

```
function int getDepth (Node head, string val)
{
    Stack s = new Stack();

    s.push(head);

    while(s.count > 0)
    {
        Node temp = s.pop();

        if (temp != NULL)
        {
            if (s.Value == val)
                return s.Depth;
            else
            {
                s.push(temp.Left);
                s.push(temp.Right);
            }
        }

    }

    return -1;
} 
```

编辑：

此函数设置每个节点的深度

```
function void setDepth (Node head)
{
    Stack s = new Stack();

    head.Depth = 0;
    s.push(head);

    while(s.count > 0)
    {
        Node temp = s.pop();

        if (temp != NULL)
        {
            if (temp.Left != NULL)
            {
                temp.Left.Depth = temp.Depth + 1;
                s.push(temp.Left);
            }

            if (temp.Right != NULL)
            {
                temp.Right.Depth = temp.Depth + 1;
                s.push(temp.Right);
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-17T14:03:02.043

我假设您的意思是填写节点上的深度值，和/或找到最大深度。一种方法是使用两个列表，并按照建议执行级别顺序。它类似于：

```
int level=0;
List<Node> currentLevel = new List<Node>{root};
while(currentLevel.Count != 0)
{
  List<Node> nextLevel = new List<Node>{};
  foreach(Node node in currentLevel)
  {
    if(node.Right!=null) nextLevel.Add(node.Right);
    if(node.Left != null) nextLevel.Add(node.Left);
    node.Depth=level;
  }
  level++;
  currentLevel=nextLevel;
} 
```

基本上，您枚举给定级别上的每个节点，然后找到下一个级别的每个节点；直到你用完节点/级别。显然，List 可以替换为几乎任何列表，如数据结构（链表、队列等）。而“级别”的最后一个值将是最大深度 + 1。我怀疑。

基于重新阅读问题的另一项澄清；如果您正在搜索具有特定值的节点，并且想要找到它的深度，您可以更改 foreach 循环以包含“if(node.Value==searchValue) return level;”。而且，从技术上讲，如果您正在搜索特定值，则不应执行级别顺序遍历，而应使用相关的二叉树属性（例如 val < currentNode.Value goto left else goto right）搜索该值，并跟踪您的深度。如果只给您一个节点并且想要找到它的深度，您需要从根节点对节点执行二进制搜索，或者您需要跟踪节点的父节点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-11T16:22:42.193

Here's a simpler solution, I think. If the data structure allowed for an arbitrary number of children, this solution could be easily modified for that case too:

```
int getDepthNoRecursion(Node n) {
  if(n == null) {
    return 0;
  }
  int retval = 0;
  n.depth = 1;
  Stack s = new Stack();
  s.push(n);
  while(!s.isEmpty()) {
    Node n = (Node) s.pop();
    int currDepth = n.depth;
    if(currDepth > retval) {
      retval = currDepth;
    }
    if(n.left != null) {
      n.left.depth = currDepth + 1;
      s.push(n.left);
    }
    if(n.right != null) {
      n.right.depth = currDepth + 1;
      s.push(n.right);
    }
  }
  return retval;
}
class Node {
  Node left;
  Node right;
  int depth = 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-24T05:31:50.510

这是我提出的最有效的解决方案（C++）。诀窍是使用第二个队列来存储当前级别的所有节点的子节点。这将适用于平衡和不平衡的二叉树。

```
template <class T>
struct TreeNode {
  TreeNode<T>* left_;
  TreeNode<T>* right_;
  T* data_;
};

template <class T>
int find_depth( const TreeNode<T>* root ) {   
  if ( root == NULL ) return 0;
  int depth = 0;
  std::queue<const TreeNode<T>*>* q1 = new std::queue<const TreeNode<T>*>;
  std::queue<const TreeNode<T>*>* q2 = new std::queue<const TreeNode<T>*>;
  q1->push( root );
  while ( !q1->empty() ) {
    // At the top of the outer loop q1 contains a complete horizontal level of the tree                                                                                  
    depth++;

    // Swap the queue pointers to avoid any deep copies                                                                                                                  
    std::queue<const TreeNode<T>*>* tmpQ = q2;
    q2 = q1;
    q1 = tmpQ;

    // Iterate over this level, inserting all children into q1                                                                                                           
    while( !q2->empty() ) {
      const TreeNode<T>* node = q2->front();
      if ( node->left_ != NULL ) q1->push( node->left_ );
      if ( node->right_ != NULL ) q1->push( node->right_ );
      q2->pop();
    }
  }
  delete q1;
  delete q2;
  return depth;
} 
```

# excel - 为数据透视图中的所有系列设置线宽

> ID：1006872
> 
> 赞同：1
> 
> 时间：2009-06-17T13:03:01.943
> 
> 标签：excel, charts, pivot-table, excel-2000

我已经尝试查看所有图表选项，但我似乎无法找到一种方法来一劳永逸地设置图表系列的线宽。当然，每次更改数据透视图中的系列选择时，我都可以运行一个宏，但我希望有一种更简单的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-17T14:43:08.107

这是当前的（缓慢，hacky）解决方案 - “CustomChart”类模块：

```
Option Explicit

Public WithEvents customChart As Chart

Private Sub customChart_Calculate()
    Dim customSeries As series
    Application.ScreenUpdating = False

    For Each customSeries In customChart.SeriesCollection
        customSeries.Border.Weight = xlThick
    Next

    Application.ScreenUpdating = True
End Sub 
```

这个片段在任何模块的顶部：

```
Dim myChart As New customChart

Sub Auto_Open()
    Set myChart.customChart = Charts(1)
End Sub 
```

# c# - 在水晶报表中传递参数

> ID：1006873
> 
> 赞同：6
> 
> 时间：2009-06-17T13:03:09.823
> 
> 标签：c#, crystal-reports

我正在从存储过程创建水晶报告，当我传递一个参数时效果很好，但它显示错误

> “参数不正确”

当我传递两个参数时，我的代码是

```
 {
    ReportDocument reportDocument = new ReportDocument();
    ParameterField paramField = new ParameterField();
    ParameterFields paramFields = new ParameterFields();
    ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();

    paramField.Name = "@Dept";
    paramDiscreteValue.Value = TextBox1.Text.ToString();
    paramField.CurrentValues.Add(paramDiscreteValue);
    paramFields.Add(paramField);

    paramField.Name = "@Name";
    paramDiscreteValue.Value = TextBox2.Text.ToString();
    paramField.CurrentValues.Add(paramDiscreteValue);
    paramFields.Add(paramField);

    CrystalReportViewer1.ParameterFieldInfo = paramFields;
    reportDocument.Load(Server.MapPath("CrystalReport.rpt"));
    CrystalReportViewer1.ReportSource = reportDocument;
    reportDocument.SetDatabaseLogon("sa", "sa", "OPWFMS-7KYGZ7SB", "test");

} 
```

请让我知道任何更改

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-17T13:09:41.480

您需要为这两个参数创建新的 parameterField 和 value。您当前的代码添加参数，修改它（更改名称和值）并再次添加相同的对象。这应该是正确的：

```
 {
ReportDocument reportDocument = new ReportDocument();

ParameterFields paramFields = new ParameterFields();
// ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();

ParameterField paramField = new ParameterField();
ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();
paramField.Name = "@Dept";
paramDiscreteValue.Value = TextBox1.Text.ToString();
paramField.CurrentValues.Add(paramDiscreteValue);
paramFields.Add(paramField);

paramField = new ParameterField(); // <-- This line is added
paramDiscreteValue = new ParameterDiscreteValue();  // <-- This line is added
paramField.Name = "@Name";
paramDiscreteValue.Value = TextBox2.Text.ToString();
paramField.CurrentValues.Add(paramDiscreteValue);
paramFields.Add(paramField);

CrystalReportViewer1.ParameterFieldInfo = paramFields;
reportDocument.Load(Server.MapPath("CrystalReport.rpt"));
CrystalReportViewer1.ReportSource = reportDocument;
reportDocument.SetDatabaseLogon("sa", "sa", "OPWFMS-7KYGZ7SB", "test"); 
```

}

**编辑：** 评论中提到的错误可能是因为代码中有变量 paramField 或 paramDiscreteValue 的两个定义。在一种 c# 方法中，您不能多次定义具有相同名称的变量。尝试上面编写的代码，如果仍然出现编译器错误，请在此处粘贴完整的错误文本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-18T15:39:05.017

试试这个更简洁一点

```
{    
  ReportDocument reportDocument = new ReportDocument();

  reportDocument.Load(Server.MapPath("CrystalReport.rpt"));
  CrystalReportViewer1.ReportSource = reportDocument;
  reportDocument.SetParameterValue("@Dept", TextBox1.Text.ToString());    
  reportDocument.SetParameterValue("@Name", TextBox2.Text.ToString());

 // CrystalReportViewer1.ParameterFieldInfo = paramFields;

  reportDocument.SetDatabaseLogon("sa", "sa", "OPWFMS-7KYGZ7SB", "test");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-17T13:09:01.840

确保参数中传递的实际数据没有被隐式转换为错误的数据类型。就像您为 @Dept 参数传递数字 ID 一样，请确保预期接收该值的输入参数的数据类型也是数字类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-17T13:12:48.510

尝试在添加到报表的每个参数之前创建 ParameterField：

```
paramField = new ParameterField();
paramDiscreteValue.Value = ...
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T06:31:05.643

可以使用 Crystal Reports for Visual Studio 2005 复制该问题。解决方法是首先设置 CrystalReportViewer 的 ReportSource 属性，然后设置参数值。因此，您的代码应该是：

```
{
ReportDocument reportDocument = new ReportDocument();

CrystalReportViewer1.ReportSource = reportDocument;

ParameterField paramField = new ParameterField();
ParameterFields paramFields = new ParameterFields();
ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();

paramField.Name = "@Dept";
paramDiscreteValue.Value = TextBox1.Text.ToString();
paramField.CurrentValues.Add(paramDiscreteValue);
paramFields.Add(paramField);

paramField.Name = "@Name";
paramDiscreteValue.Value = TextBox2.Text.ToString();
paramField.CurrentValues.Add(paramDiscreteValue);
paramFields.Add(paramField);

CrystalReportViewer1.ParameterFieldInfo = paramFields;
reportDocument.Load(Server.MapPath("CrystalReport.rpt"));
reportDocument.SetDatabaseLogon("sa", "sa", "OPWFMS-7KYGZ7SB", "test");
} 
```

# xml - xs:choice 是 C++ 枚举的等价物吗？

> ID：1006874
> 
> 赞同：3
> 
> 时间：2009-06-17T13:03:17.060
> 
> 标签：xml, xml-serialization, xsd

我们通过 MS XML 4 完成了很多序列化。当我们序列化 C++ 枚举时，我们使用一个表将每个可能的值转换为一个字符串，并将该字符串存储为一个属性值。当我们反序列化时，我们读取该属性值，将其与表中的所有项目进行比较并检索相应的枚举值。如果我们找不到我们会引发错误。

为了便于外部程序创建 XML，我们为所有感兴趣的数据类型发布了 XML 模式。枚举的属性定义如下：

```
<xs:complexType>
    //other fields here
    <xs:attribute name="Color" type="xs:string"></xs:attribute>
</xs:complexType> 
```

它有效，但不包含可能的字符串值的定义。我怎样才能在这个定义中添加可能的值？我为此使用 xs:choice 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T13:13:52.220

不，`xs:choice`向模式提供“在这个地方，你可以有这个或这个或这个，但不能组合”的信息；[`xs:choice`您可以在此处](http://www.w3schools.com/schema/el_choice.asp)了解更多信息。

要创建枚举，您需要将它们定义[为](http://www.w3schools.com/schema/schema_facets.asp)基于`xs:string`.

例如：

```
<xs:simpleType name="ColorType">
  <xs:restriction base="xs:string">
    <xs:enumeration value="white"/>
    <xs:enumeration value="black"/>
    <xs:enumeration value="blue"/>
  </xs:restriction>
</xs:simpleType> 
```

然后，您可以像使用其他任何类型一样使用此类型：

```
<xs:complexType>
  <xs:attribute name="Color" type="ColorType" />
</xs:complexType> 
```

有关[使用`xs:restriction`](http://www.w3schools.com/schema/schema_facets.asp)和其他 XSD 元素和属性的更多信息，请访问[www.w3schools.com](http://www.w3schools.com)。他们有很多与 Web 相关的主题的参考指南和教程，例如 XHTML、XSLT、XPath 和 XSD（以及 javascript 和 AJAX）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T13:10:52.227

```
<xs:complexType>
  //other fields here
  <xs:attribute name="Color">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:enumeration value="RED"/>
        <xs:enumeration value="BLUE"/>
        <xs:enumeration value="GREEN"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:attribute>
</xs:complexType> 
```

您还可以将其创建为外部类型：

```
<xs:complexType>
  //other fields here
  <xs:attribute name="Color" type="Color"/>
</xs:complexType>
<xs:simpleType name="Color">
  <xs:restriction base="xs:string">
    <xs:enumeration value="RED"/>
    <xs:enumeration value="BLUE"/>
    <xs:enumeration value="GREEN"/>
  </xs:restriction>
</xs:simpleType> 
```

`<xs:choice>`完全意味着其他东西。XML 模式中的名称不直观且有些误导。选择意味着包含的元素之一。

# bash - 如何将“disown”替换为“screen”？

> ID：1006885
> 
> 赞同：6
> 
> 时间：2009-06-17T13:05:12.283
> 
> 标签：bash

```
ctrl-z
disown -h %1
bg 1

logout 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-19T01:15:39.060

```
ctrl-z the program
bg %  so it wont die when you logoff
screen retty $Pid
will attach the running program into screen 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-06T21:12:41.343

是的，这是一个老问题，但我相信其他人也处于同样的位置。这位绅士的 gdb 脚本魔法允许在正在运行的进程中“重新指向”文件描述符。它可以通过 PID 对每个进程进行，或者调用 fuser 来查找所有使用该文件的进程。我也刚刚确认它适用于 /dev/pty/*，所以 STD(IN,OUT,ERR) 也是可能的。

[http://groups.google.com/group/alt.hackers/browse_thread/thread/d1932c31ce43bd4c](http://groups.google.com/group/alt.hackers/browse_thread/thread/d1932c31ce43bd4c)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-18T04:08:27.550

唯一且唯一的规范方法是已经在屏幕内启动内容。

# c# - GridView 单元格未在 RowCommand 事件上注册任何控件

> ID：1006888
> 
> 赞同：1
> 
> 时间：2009-06-17T13:05:39.600
> 
> 标签：c#, asp.net, gridview, rowcommand

首先，我意识到大部分这些也可以使用 ItemTemplates 来完成。如果我想做的事情根本不可能，我会考虑使用它们。

以下是我的困境的基本情况：

我在 CodeBehind 中加载的 ASPX 页面中有一个 GridView。每行包含几个触发 OnRowCommand 事件的按钮。当有人单击“编辑”按钮时，我会创建一个 TextBox 对象并将其添加到特定单元格的 Controls 集合中。

这工作正常。

问题是，当用户单击“保存”按钮时，再次触发 OnRowCommand，但该单元格在 Controls 集合中注册了 0 个项目。我很确定这是在 PostBack 之前发生的，所以我不确定为什么我无法访问 TextBox 控件。

我在最初添加 TextBox 后进行了检查，它在单元格中显示了 1 个控件。在加载带有文本框的页面和单击按钮之间的某个地方，这些控件已经丢失。谷歌没有太大帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T13:09:21.277

您正在动态创建文本框，因此您必须在每次回帖时重新绑定您的网格，提供您的文本框和 id（始终相同）并重新附加任何事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:10:18.217

当用户单击编辑按钮时，您处于 GridView 的编辑模式。你也需要设置吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T13:10:47.640

如果您正在动态创建控件，它们将始终在回发时消失，这意味着您必须在每个循环中继续创建它们。

我个人建议坚持使用 ItemTemplates，让自己远离所有这些可能带来的头痛。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T13:47:06.053

当您在代码后面创建按钮时，您可以创建一个带有委托的 addhandler。处理程序将在行命令之前触发。

```
 Protected Sub GridView1_RowCreated(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowCreated

Dim btnsave As New ImageButton
If e.Row.RowType <> DataControlRowType.Pager And e.Row.RowType <>  DataControlRowType.Header Then
    AddHandler btnedit.Click, AddressOf btnedit_Click
    GridView1.Rows(i).Cells(8).Controls.Add(btndel)
end if

end sub

Public Delegate Sub ImageClickEventHandler(ByVal sender As Object, ByVal e As ImageClickEventArgs)
Sub btnedit_Click(ByVal sender As Object, ByVal e As ImageClickEventArgs)

//do whatever you want here.
//possibly a redirect to the current page so nothing else fires

end sub 
```

# php - 使用 ignore_user abort 和 set_time_limit(0) 用 PHP 编写的守护进程有多可行

> ID：1006891
> 
> 赞同：2
> 
> 时间：2009-06-17T13:06:49.660
> 
> 标签：php, daemon

我正在处理守护进程，并想知道使用 PHP 执行此操作的可行性（就内存和 CPU 使用以及可靠性而言）：

```
<?php
// Ignore user aborts and allow the script
// to run forever
ignore_user_abort(true);
set_time_limit(0);

$fp = fopen('loop.log', 'w');
fwrite($fp, date('Y-m-d H:i:s') . ' Started' . PHP_EOL);
while(1) {
    fwrite($fp, date('Y-m-d H:i:s') . ' Looped' . PHP_EOL);
    if (file_exists('loop.stop')) {
        break;
    }
    // Sleep for 100 seconds
    sleep(100);
}
fwrite($fp, date('Y-m-d H:i:s') . ' Stopped' . PHP_EOL);
fclose($fp); 
```

[这个简单的例子（改编自ignore_user_abort](http://www.php.net/manual/en/function.ignore-user-abort.php)的 PHP 手册）只是容器脚本。实际功能将放置在`while`循环内。

我已经让这个脚本在我的笔记本电脑上运行了 7 个小时，它看起来很好，但它并没有做太多。有没有其他人试过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T18:20:00.423

我倾向于将循环放入 BASH 脚本中，以便定期清理任何 PHP 资源。

```
#!/bin/bash
clear
date

php -f doChecksAndAct.php
sleep 100
# rerun myself
exec $0 
```

如果您在 PHP 脚本中执行任何特别繁重的设置任务，您还可以在其中放置一个小（ish）循环（例如 50-100 次迭代，如果它们之间没有暂停几秒钟）以减少总数运行之间的开销时间。

**补充：**我写过关于 Bash/PHP（或其他语言）配对的博客，这样您就可以非常轻松地循环进入 PHP 脚本，然后退出以立即重新启动，或者暂停一段时间 -[在其他地方进行工作 - 边栏运行工人](http://www.phpscaling.com/2009/06/23/doing-the-work-elsewhere-sidebar-running-the-worker/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:18:59.463

我建议反对。

4 年前有一个错误打开，它说[为对象方法中创建的对象分配的内存未释放](http://bugs.php.net/bug.php?id=33487)。

开发人员认为这是一个*功能请求*，但在使用长时间运行的进程时很难解决它。我尝试过，但当我能够退出应用程序时，我感到非常欣慰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-23T21:40:05.927

sonic 服务器守护进程可能也值得一试

[http://dev.pedemont.com/sonic](http://dev.pedemont.com/sonic)

# perl - 为什么@my_array = undef 有一个元素？

> ID：1006904
> 
> 赞同：4
> 
> 时间：2009-06-17T13:10:29.997
> 
> 标签：perl, arrays

```
@my_array = undef;
if (@my_array ) {  
    print 'TRUE'; 
} else {
    print 'FALSE';
} 
```

这将打印`TRUE`

为什么数组有一个元素？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-06-17T13:41:23.787

该数组有一个元素，因为您分配了一个。考虑以下：

```
@array = undef;  # Assigns the value 'undef' to @array
@array = ();     # Assigns the empty list to @array
undef @array;    # Undefines @array 
```

它们看起来很相似，但第一行与其他两行不同（它们是等价的）。第一行生成具有单个元素（值`undef`）的数组。另外两个导致一个空数组。在 Perl 中，`undef`既是值又是运算符。第一行将其用作值，最后一行将其用作运算符。

通常不需要清除数组。声明时它们为空：

```
my @array;  # There's nothing in here, yet 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-06-17T13:21:35.183

看看[什么是真理？](http://www.foo.be/docs/tpj/issues/vol4_2/tpj0402-0002.html)有关 Perl 中布尔值的更多信息。（如果您来自另一种语言，您可能会遇到其他一些惊喜，因此值得一读。）

这是文章中的一个关键点：

> `defined`并且`undef`适用于测试和设置标量。不过，不要尝试使用数组。目前， `defined(@array)`如果 Perl 为数组分配了一些奇怪且对普通程序员无用的存储，则返回 true。要将数组返回到其初始状态，我们说：
> 
> ```
> @array = ();        # good 
> ```
> 
> 说`@array = undef`是`@array` 包含一个元素列表，单个元素是标量值 `undef`。这几乎不是我们想要的。

另一个提示：使用以下方法本地化您的变量`my`： my @array = ( #whatever );

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-17T13:16:40.637

在 Perl 中，`undef`是一个有效值。您可以将一个（或任意数量）的`undef`s 放入数组或列表中。

如果要删除数组的所有元素，请执行以下操作：

```
@my_array = (); 
```

# database - 数据库中是否可以接受循环引用？

> ID：1006917
> 
> 赞同：38
> 
> 时间：2009-06-17T13:13:24.187
> 
> 标签：database, oracle, circular-dependency

什么时候可以在数据库中接受循环引用？

理论和实践，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-20T10:35:38.137

考虑城市和州。每个城市都存在于一个州内。每个州都有一个首都。

```
CREATE TABLE city (
  city  VARCHAR(32),
  state VARCHAR(32) NOT NULL,
  PRIMARY KEY (city),
  FOREIGN KEY (state) REFERENCES state (state)
);

CREATE TABLE state (
  state VARCHAR(32),
  capital_city VARCHAR(32),
  PRIMARY KEY (state),
  FOREIGN KEY (capital_city) REFERENCES city (city)
); 
```

第一个问题 - 您不能如图所示创建这些表，因为外键不能引用表中不（尚）存在的列。解决方案是在没有外键的情况下创建它们，然后再添加外键。

第二个问题 - 您不能在任一表中插入行，因为每个插入都需要另一个表中预先存在的行。解决方案是将其中一个外键列设置为 NULL，然后分两个阶段插入该数据。例如

```
--Create state record
INSERT INTO state (state, capital_city) VALUES ('Florida', NULL);

--Create various city records
INSERT INTO city (city, state) VALUES ('Miami', 'Florida');
INSERT INTO city (city, state) VALUES ('Tallahassee', 'Florida');
INSERT INTO city (city, state) VALUES ('Orlando', 'Florida');

--Set one of the cities as the capital
UPDATE state SET capital_city = 'Tallahassee' WHERE state = 'Florida'; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-06-17T14:23:44.777

指向其他记录的记录在数据库中很有用。有时这些记录形成一个循环。这可能仍然有用。实践中唯一真正的烦恼是避免违反约束。

例如，如果您有一个用户和事务表，用户可能有一个指向他的最后一个事务的指针。您需要先插入事务，然后将其更新`last_transaction_id`为正确的值。虽然这两个记录都存在，但您无法删除它们，因为`user.last_transaction_id`指向`transaction.id`和`transaction.user_id`指向`user.id`。这意味着没有交易的用户有一个 null `last_transaction_id`。这也意味着您必须先将该字段设为空，然后才能删除交易。

管理这些外键约束是一件痛苦的事，但它肯定是可能的。如果您稍后将约束添加到数据库，从而引入新的循环依赖项，则可能会出现问题。在这种情况下你必须小心。但是，只要循环中的一条记录具有可为空的外键字段，就可以打破循环并删除记录。只要您以正确的顺序插入记录，更新通常不会成为问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-17T14:15:23.547

这在技术上是可行的，但在删除记录时会导致各种问题，因为它会产生鸡与蛋的问题。这些问题通常会采取激烈的措施，例如手动删除 FK 并删除有问题的项目来解决。

如果你有这样的关系：

```
create table foo_master (
       foo_master_id int not null primary key
      ,current_foo_id int
)

create table foo_detail (
       foo_detail_id int not null primary key
       foo_master_id int not null
)

alter table foo_master
  add constraint fk_foo_current_detail
      foreign key (current_foo_id)
      references foo_detail

alter table foo_detail
  add constraint fk_foo_master
      foreign key (foo_master_id)
      references foo_master 
```

然后由于循环依赖关系，删除记录可能会导致这样的鸡和聚集问题。

一个更好的模式看起来像：

```
create table foo_master (
       foo_master_id int not null primary key
)

create table foo_detail (
       foo_detail_id int not null primary key
       foo_master_id int not null
       is_current char (1)
)

alter table foo_detail
  add constraint fk_foo_master
      foreign key (foo_master_id)
      references foo_master 
```

这意味着该关系是非循环的，并且仍然可以识别“当前” foo_detail 记录。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-18T02:17:58.123

Oracle 分层查询语法的最新添加之一 -`NOCYCLE`关键字 - 明确用于此目的 - 处理数据中的循环引用。我看不出有什么问题，之前也不得不处理这种模型。这并不太难，尤其是在支持可延迟约束的 Oracle 中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-17T13:18:39.497

我已经看到出于性能原因进行了循环引用。虽然它看起来很丑，性能可能可以忽略不计。

示例：一些公告板（我认为 phpBB 会这样做）在类别表中有一个 lastpostid，它是线程中最后一个帖子的快捷方式。

这将创建一个圆圈，其中最后一个帖子有一个指向类别表的 FK，而类别表有一个指向最后一个帖子的 FK。

就像我说的，我不是很喜欢它，但我已经看到它完成了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T13:16:03.480

应该像瘟疫一样避免循环引用。可以建立双向关系，甚至与自己的关系（如果你是一张桌子），但循环依赖只是自找麻烦。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T13:28:04.220

我很少遇到必要的 1:1 关系并强加循环关系

请注意，这种关系中的外键字段必须可以为空，否则您永远无法从表中删除行

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-17T13:59:11.487

如果您使用的是只写数据库，我想这不是问题。如果您计划使用 CRUD 的 RUD 部分，您可能会在处理它们时遇到（通常可以避免的）复杂问题。

# java - java - 如何在java swing中获得要在JTable中显示的图像

> ID：1006921
> 
> 赞同：2
> 
> 时间：2009-06-17T13:13:53.857
> 
> 标签：java, swing

我创建了一个 jTable 并将一个 ImageIcon 对象放在其中一列中。我想知道如何让它显示图像而不是图像名称作为字符串。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T13:16:05.850

您必须实现 a`TableCellRenderer`并将其设置为相应的列。

A`TableCellRenderer`只有一个方法，它返回 a`Component`以显示在表格单元格中。但是，当您想要显示图像时，您可能需要调整行高，因为行不会自动调整到它们的内容。

关于如何使用自定义渲染器，您可以参考[Java 教程](http://java.sun.com/docs/books/tutorial/uiswing/components/table.html#renderer)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:17:37.220

您需要提供自定义表格单元格渲染器来显示图像。如果您使用 Google jtable 图像渲染器，您会找到示例。看[这里](http://www.java2s.com/Code/Java/Swing-JFC/RenderinganimageinaJTablecollumn.htm)一个。

# windows-services - 通过 Server 2008 上的 Windows 服务实现 Office 自动化

> ID：1006923
> 
> 赞同：24
> 
> 时间：2009-06-17T13:14:23.280
> 
> 标签：windows-services, windows-server-2008, ms-office, dcom, comexception

我们有一个在 2003 Server 上运行的 Windows 服务。它使用 Word Interop 打开一个源 Word 文档，然后用它做一些事情。它也同样适用于 Excel 和 PowerPoint 文件。

最近，我们尝试将此服务移至 Windows 2008 Server 机器上，但遇到了实际问题。

Microsoft.Office.Interop.Excel.Workbooks.Open 处的 COMException Microsoft.Office.Interop.Word.Documents.Open 处的 COMException

当 Windows 服务在 2008 Server 上运行时，我得到了上述异常。查看任务管理器，应用程序确实加载正常，但不久之后又关闭了。

我已经阅读了有关 Vista 和 Server 2008 不再具有 Session0 的内容，并尝试相应地更改 Office DCOM 安全属性，包括将运行它们的用户的身份更改为集成但无济于事。

有谁知道这是否可能？这是我们系统的一个基本方面，因此我们需要能够做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-11-05T12:22:10.097

我在 Windows Server 2008 下从 Windows 服务自动化 Office 时遇到了问题，即使在 Windows Server 2003 下工作正常。这个问题也出现在 Open 调用中，所以它可能是同一个问题。

我尝试按照 H Ogawa 在[此 MSDN 线程](http://social.msdn.microsoft.com/Forums/en/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91 "这个 MSDN 线程")中给出的建议，它似乎有效。这很奇怪，但要感谢小川先生发现它。

“Ogawa Hack”摘要：为系统配置文件创建一个桌面文件夹，如下所示：

```
 C:\Windows\System32\config\systemprofile\Desktop 
```

**并且**，如果在 64 位机器上运行，则创建*另一个*，如下所示：

```
 C:\Windows\SysWOW64\config\systemprofile\Desktop 
```

此外，文件夹需要任何用户“驾驶”Office 的写入权限。

* * *

[编辑：更正的链接 URL]

[编辑 2：澄清在 64 位 Windows 上，您需要两个文件夹，而不仅仅是 WOW64 一个]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-29T20:43:40.033

如果您使用的是 Apache，您可能还需要按照以下步骤使 MS Word 正常工作（以及其他答案中概述的所有内容）：

下面是一个屏幕截图，显示了您需要调出的两个对话框： ![在此处输入图像描述](../Images/662e3e1f3fddaa4c878e3bb3bc5ec342.png)

对于阿帕奇：

服务->Apache->右键单击（属性）->登录选项卡

微软字：

启动 dcomcnfg.exe->控制台根目录->组件服务->计算机->我的电脑->DCOM 配置->查找 Microsoft 应用程序->右键单击（属性）->身份选项卡

**如果您找不到 MS Word，请确保根据您安装的 Office 版本启动正确的 DCOM 配置（64 位与 32 位）。

这里有两个选项，您可以将 Apache 设置为使用*本地系统帐户*并选中复选框以允许桌面交互。如果这样做，则需要将MS Word的*Identity设置为***Interactive User**。

否则，您需要将两者都设置为同一个用户（理想情况下是登录的用户），如图所示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-20T13:59:09.707

好吧，您需要运行“MMC -32”（命令提示符）来启动 32 位 MMC，然后添加组件服务（文件 > 添加/删除管理单元的菜单）

然后按照以下说明之一进行操作：

[http://theether.net/download/Microsoft/kb/288366.html](http://theether.net/download/Microsoft/kb/288366.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T13:20:36.730

这也发生在启用 UAC 的 Vista 上。您可能想尝试将 DCOM 身份设置为管理员帐户并再次测试。

我最近也开始在尝试通过互操作服务在 Excel 中打开工作簿的 XP 机器上遇到此问题，但尚未找到解决方法。我本人希望社区能够提供任何其他见解......

# tsql - SQL - 按日期范围查询

> ID：1006925
> 
> 赞同：1
> 
> 时间：2009-06-17T13:14:34.853
> 
> 标签：tsql, syntax, between

我有一个名为“OrderH”的订单标题表。在此表中有一个名为“OrderDate”的列。我正在尝试检索日期在特定范围内的订单。我认为我可以使用“between”关键字来完成此操作，但我没有任何运气。这是我一直在烦恼的 SQL：

```
select 
    * 
from
    OrderH h
where
        h.OrderDate between '2009-06-16' and '2009-06-01'
order by
    h.OrderDate desc 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-17T13:17:41.947

较小的日期必须是第一个

```
between  '2009-06-01' and '2009-06-16' 
```

代替

```
between '2009-06-16' and '2009-06-01' 
```

使用 between 时也要小心，因为您将从较大的日期获得午夜值，而没有别的

看看[SQL Server 中的日期之间是如何工作的？](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/how-does-between-work-with-dates-in-sql-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:18:41.350

查询不起作用，因为在您的示例中，第一个日期大于第二个日期。交换日期。第一个日期必须小于等于第二个日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T13:19:06.653

很难找到在开始之前就结束的日期。更改最小值和最大值...

```
h.OrderDate between '2009-06-01' and '2009-06-16' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T13:18:19.450

```
select 
    * 
from
    OrderH h
where
        h.OrderDate between '2009-06-01' and '2009-06-16'
order by
    h.OrderDate desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T13:21:16.947

在 2009 年 6 月 16 日午夜之后发生的 MS-SQL Server 事件将不包括在内。

# php - php curl 将文件留在目录中 - 如何清理

> ID：1006926
> 
> 赞同：0
> 
> 时间：2009-06-17T13:14:42.280
> 
> 标签：php, curl

我有一个使用 curl 的 php 脚本，一切都很好。它通过 cron 作业运行。我稍后再回来，每次它运行一个新文件时都会保存输出。

如何防止创建这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T14:27:15.037

生成该文件的是 cron 守护进程。默认情况下，它将标准输出保存到文件中。更改脚本以将其输出指向 /dev/null：

/etc/crontab：

```
59 *    * * *   USER    curl localhost/script.php > /dev/null 2>&1 
```

这样就行了。

/Zyber

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T20:07:50.677

如果您使用 wget 在 cron 中调用脚本，则可能需要通过以下方式将输出设置为 dev/null：

```
59 * * * * wget -O - -q http://yourdomain.com/path/to/script.php 
```

`-O`指定输出写入的位置，以下指定`-`dev/null。`-q`告诉 wget 以安静模式运行，这意味着它不会将消息写入标准输出。

如果它正在创建文件，您还可以通过将上面的行更改为以下内容来抑制 cron 的任何输出：

```
59 * * * * wget -O - -q http://yourdomain.com/path/to/script.php > /dev/null 2>&1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-02T03:11:30.023

问题是因为这是在一个“共享”主机帐户上，他们声称不可能将 cron 结果发送到 /dev/null。谁知道，谁在乎。为了解决这个问题，我创建了一个每天删除输出文件的脚本。感谢大家的帮助。

# javascript - Eclipse JavaScript 编辑器：js 文件的内容辅助，自动完成

> ID：1006934
> 
> 赞同：41
> 
> 时间：2009-06-17T13:15:38.987
> 
> 标签：javascript, eclipse, autocomplete, eclipse-plugin, content-assist

我正在尝试将 Eclipse（带有 JavaEE 和 Web 开发插件）作为 JavaEE/GoogleAppEngine IDE。在 HTML 编辑器中，如果我输入一个`<script ... src="..." />`，`<head>`我会自动在引用的文件中获得 JavaScript 的内容辅助。我想知道是否有可能在 JavaScript 编辑器中获得其他 JavaScript 文件（例如 jQuery 或自制 js 库）的内容辅助。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-06-17T14:25:54.337

我刚刚弄清楚如何在**Eclipse JavaScript 编辑器**中获取 js 内容辅助（没有 Aptana 插件）：

如果项目类型本身不包含 JavaScript 支持：打开 Web（或 JavaScript）透视图，右键单击项目并选择*Web 开发支持*>*添加 JavaScript 支持*（如果 JavaScript 支持已经存在，这不会有什么坏处）

然后在项目中右键单击*JavaScript Support*并选择*Properties*，在 JavaScript 部分中转到 JavaScript library 然后选择 Source 选项卡：在这里您可以为当前项目添加要由内容辅助扫描的文件夹和文件

* * *

在**Aptana Studio**中（作为 Eclipse 插件，但我想独立版本几乎相同）：打开任何 js 或 html 文件，显示*引用*窗口（或在 eclipse 中打开 Aptana 透视图）并拖放要添加到 JavaScript 的 js 文件范围（可以使用不同的 JavaScript 文件和资源构建和激活不同的范围配置文件：只需单击窗口工具栏中的*添加配置文件）*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-17T13:18:18.403

imo，[Aptana](http://www.aptana.com/)是最好的 Eclipse js 编辑插件。它包括对许多主要库的支持，如 jQuery、yui、dojo 等。

[不过Spket](http://spket.com/)也不错。虽然主要是如果你做 Firefox 扩展开发（虽然有点过时了）

内置的 js 编辑器很糟糕。它声称到处都有错误，即使显然没有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-06-29T12:18:18.407

对于 Aptana Studio 3：（已测试 Eclipse 插件）

找到您感兴趣的库...将其保存到您的磁盘，然后将其拖到您的项目中。它位于项目中的哪个位置并不重要，因此您可以根据需要为此类文件创建一个新文件夹。

**！！该项目必须是某种类型的 Web 项目：Web、PHP、Python、Ruby、Rails。**

[http://wiki.appcelerator.org/display/tis/Using+JavaScript+Libraries](http://wiki.appcelerator.org/display/tis/Using+JavaScript+Libraries)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-05T16:38:46.233

对于 Eclipse Juno 4.2 和 Aptana Studio 3 和 JQuery (jquery-1.7.2.js)

我确实得到了这个有效的答案，并在上面提出了一个警告。

根据上面的 magjis 将缩小的 JQuery 库放到现有项目的子文件夹中对我不起作用。在创建一个新项目并使用未压缩的库后，它确实对我有用。

SO 和其他地方有几十个过时的帖子，它们引用了已弃用的 Aptana 对话框，并提供了与当前 Eclipse 版本无关的信息。我所知道的是，对于 Eclipse Juno 4.2、Aptana 3 和 JQuery 1.7.2，这是有效的（至少对我而言）：

确保您已安装 Aptana 插件并且处于 Web 透视图中。这就是 Aptana Studio 透视图的名称……如果他们将其命名为包含“Aptana”一词的东西，那么它就不会那么混乱了。

确保您的默认编辑器是“JavaScript 源代码编辑器”。在 Window -> Preferences -> General -> Editors -> File Associations 中进行设置，然后在列表中选择 .js 扩展名。下面的列表框中有多个选项。使用任何其他编辑器甚至都没有给我代码着色……这是我唯一可以使用代码辅助的编辑器。

我在遵循上述 magjis 的建议之前这样做了，所以我不知道这是否有必要。但我安装了 JQuery 卢布如下： [http ://wiki.appcelerator.org/display/tis/JavaScript+Library+Support#JavaScriptLibrarySupport-jQuery%28](http://wiki.appcelerator.org/display/tis/JavaScript+Library+Support#JavaScriptLibrarySupport-jQuery%28)

然后，为了解释上面 magjis 的回答：创建一个新项目并添加未压缩的 JQuery 库，方法是将 jquery-1.7.2.js 拖放到 Project Explorer 中的项目中，并在出现的对话框中选择 Link To File 选项。我链接到项目根目录的 /js 文件夹中的 jquery-1.7.2.js ，无论如何，这是库通常所在的位置。将 jquery1.4.2.sdocml 拖放到项目中，然后选择复制或链接到该文件。我将文件复制到项目的根目录中。

如果我可以做进一步的评论，回想起来，我希望我在两个月前放弃了 Eclipse 并坚持使用 Notepad++，或者花时间寻找更精简、更快、更稳定的 PHP/JS/HTML/CSS 环境。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-12T07:41:38.030

免责声明 我是 tern.java 的作者。

我建议你[安装 tern.java](https://github.com/angelozerr/tern.java/wiki/Installation-Update-Site)，它扩展了 JSDT 以改进对许多现代 JavaScript 框架（jQuery、jQuery UI、jQuery Mobile、YUI、Dojo、Cordova 等）的 JavaScript 支持（完成、悬停、超链接、验证）。[燕鸥模块](https://github.com/angelozerr/tern.java/wiki/Getting-Started#tern-modules)的完整列表

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-07T00:06:05.480

我尝试了很多建议，但都失败了。即将放弃我遇到了这个：

1.  从 Eclipse 市场搜索 JSDT jQuery 并安装。我找到了 JSDT jQuery 1.5.0。
2.  右键单击您的项目并配置构建路径（我知道我也希望它是工作区级别）。
3.  转到 JavaScript > 包含路径，然后单击添加 JavaScript 库...
4.  选择 jQuery。这是 v1.8 支持。我看了看，但找不到任何更新的东西。
5.  重新启动 Eclipse 和 viola。

最后，对吧？！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-22T13:17:52.437

为 Aptana Studio 3.2 启用 Javascript 验证：

1.  窗口 -> 首选项 -> 验证
2.  选择 Javascript 并启用 jslint
3.  项目 -> 属性 -> 项目性质
4.  选择 Web（以及您想要的任何其他内容）
5.  窗口 -> 显示视图 -> 问题
6.  保存你的文件，问题应该充满警告

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-21T08:00:24.557

1.  右键单击您的项目并选择属性。
2.  展开 Javascript -> 包含路径。
3.  在库选项卡中，单击“添加 Javascript 库”。
4.  选择“用户库”->“配置用户库”。
5.  添加您需要的所有 .js 文件，单击确定并等待项目构建完成。
6.  您应该在编辑自己的 .js 文件时从添加的所有库文件中完成代码。

[![将 .js 库添加到您的项目中](../Images/90d1ba8eb536b9bff894fcb54f9be039.png)](https://i.stack.imgur.com/hYGKS.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-13T04:21:29.657

对于最近的 Eclipse 版本（比如我的 Indigo SR2），需要做两件事来获得 GAE 项目中 jQuery 的代码辅助。

1.  通过以下方式将项目配置为 JavaScript 项目：右键单击项目 -> 配置（属性上方） -> 转换为 JavaScript 项目

2.  按照 Butterworth 先生和[jQuery 自动](https://stackoverflow.com/questions/11731884/jquery-autocompletion-with-eclipse-juno-java-ee)补全说的做，安装 JSDT jQuery 插件并将 jQuery 添加到项目的 JavaScript 资源中

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-25T10:41:45.040

作为对其他答案的补充，我强烈建议安装[Eclipse JSHint 插件](http://github.eclipsesource.com/jshint-eclipse/)。您可以通过项目偏好配置它，它就像一个魅力。它会在 JavaScript 编辑器中显示其他警告。

我还建议在您的函数上方编写 jsDoc，因为这将有助于 Eclipse（`@memberOf`您可以使用 Ctrl+o 进行导航）。

您也可以迁移到 TypeScript，因为 Eclipse 支持现在已经成熟（2015 年），TypeScript 是类型化的，并且 IDE 可以获得好处（自动完成就像[Palantir](https://github.com/palantir/eclipse-typescript)的魅力一样）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-16T22:31:26.203

对于最新的 Eclipse Kepler 版本，还有一个要考虑的选项是[VJET JavaScrip IDE](http://projects.eclipse.org/projects/webtools.vjet "VJET JavaScript IDE")。最初在 eBay 开发，最近为 Eclipse 基金会做出了贡献。它仍处于孵化阶段，但可以从每晚更新站点安装。“VJET: JavaScript Toolkit”提案中描述了初始功能。它在 JavaScript 编辑器中为各种 JS 库提供内容辅助，例如：

*   节点.js
*   jQuery
*   道场
*   JSON
*   帆布

通过[VJET ANVILs 项目](http://wiki.eclipse.org/VJET/Importing_VJET_ANVILs "VJET ANVILS 项目")导入工作区。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-22T12:39:32.893

自 2019-06 起，您可以使用“Wild Web Developer”插件（又名 WWD），它取代了许多其他插件（Tern、AngularJS Eclipse，...）。

*   [https://projects.eclipse.org/proposals/eclipse-wild-web-developer](https://projects.eclipse.org/proposals/eclipse-wild-web-developer)
*   [https://marketplace.eclipse.org/content/eclipse-wild-web-developer-html-css-javascript-typescript-nodejs-angular-json-yaml](https://marketplace.eclipse.org/content/eclipse-wild-web-developer-html-css-javascript-typescript-nodejs-angular-json-yaml)
*   [https://github.com/eclipse/wildwebdeveloper](https://github.com/eclipse/wildwebdeveloper)

[![在此处输入图像描述](../Images/f1bec558acd2c850627e68ab52331dce.png)](https://i.stack.imgur.com/Gd5e5.png)

编辑 HTML、CSS、JavaScript、**TypeScript** (+ESLint)、JSON (+schema)、XML (+schema)、YAML (+schema)，专门支持 Angular、React 和 Kubernetes，并调试 Node.js 和 HTML+JS在 Eclipse IDE 中简单而高效的 web-apps。

要查看它的实际效果，请使用默认包含在 Eclipse IDE 中的通用编辑器打开所需的文件。

版本支持的文件格式：

```
HTML
CSS, SCSS, SASS, LESS
JavaScript (EcmaScript 2018 - 9th edition)
TypeScript 3.8
JSON and JSONC (including schema support)
YAML (including schema support)
XML (including schema support), XSL, XSD, DTD 
```

支持的框架（文件专业化）和版本的 linter：

```
Angular (template assistance in HTML and TS files)
Kubernetes (schema built-in when editing YAML)
React (JSX, TSX, embedded HTML)
ESLint (including Typescript-ESLint) 
```

版本支持的功能是

```
Validation (diagnostics, markers)
Code Completion
Hover
Outline
Rename refactoring
Jump to declaration
Find references
Color preview
... and other features part of the Language Server Protocol 
```

支持的调试目标

```
Node.js
Firefox
Chromium and Chrome 
```

有关安装，请参见[github](https://github.com/eclipse/wildwebdeveloper)页面。

# c# - 让用户控件填充其容器

> ID：1006941
> 
> 赞同：2
> 
> 时间：2009-06-17T13:16:35.927
> 
> 标签：c#, winforms, size, user-controls

我创建了一个包含标签和进度条的用户控件。我还创建了另一个用户控件，它只包含一个流向设置为自上而下的流布局面板。当我将前者添加到后者的流布局面板时，我希望它使用可用的最大水平空间量和最小量的垂直空间，以便尊重标签和进度条的默认高度。有没有办法做到这一点？

我上传了一个[屏幕截图](https://imgur.com/V5Rbf.png)来帮助说明问题。包含标签和进度条的用户控件为红色，包含流布局面板的用户控件为绿色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-07-01T02:08:28.730

我认为问题在于您实际上并不希望控件“流动”，您只希望它们消耗主机控件中的最高位置。您只需使用常规面板控件即可获得所需的结果。只需将子用户控件添加到容器控件的控件集合中，然后将添加的用户控件的 Dock 设置为“顶部”。

```
 ChildDisplay dsp1 = new ChildDisplay();
        pnlHost.Controls.Add(dsp1);
        dsp1.Dock = DockStyle.Top;

        ChildDisplay dsp2 = new ChildDisplay();
        pnlHost.Controls.Add(dsp2);
        dsp2.Dock = DockStyle.Top;

        ChildDisplay dsp3 = new ChildDisplay();
        pnlHost.Controls.Add(dsp3);
        dsp3.Dock = DockStyle.Top; 
```

注意：将 [ChildDisplay] 替换为您正在使用的 UserControl 的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T13:36:54.093

只需将用户控件的 Dock 属性设置为“顶部”...

```
UserControl.Dock = System.Windows.Forms.DockStyle.Top; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T14:33:30.717

控件的定位和分层有时可能很棘手。确保绿色流控件的 Dock 属性设置为 Fill。之后，开始放置标签控件并开始定位。如果需要，您可以将 Dock 属性设置为 Top，但在大多数情况下，我不喜欢它。我想说在设置控件位置时要记住的最重要的事情之一，尤其是在使用 Dock 属性时，就是顺序很重要。如果您看不到某个控件（即……它似乎隐藏在其他控件后面），请尝试重新排序它们添加到父控件的方式（在本例中为流控制面板）。如果您在 VS 中使用设计器，您可以通过右键单击并使用“发送到顶部/底部”命令来执行此操作（在使用 Dock 属性时非常有用，

此外，在我看来，一个经常被忽视的选项是正确使用[Control.Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)。我建议看看它。

# sql-server - 无法从 SQL Reporting Services 打印报告

> ID：1006944
> 
> 赞同：1
> 
> 时间：2009-06-17T13:17:01.260
> 
> 标签：sql-server, internet-explorer, reporting-services

我遇到了一个问题，我可以在 ASP.NET 环境中查看我的报告，甚至可以导出它们，但是一旦我打印它们，我就会收到以下 javascript 错误：

> “对象不支持此属性或方法”

当我运行调试器时，我看到以下代码：

```
<HTML>
    <BODY onload="Print()">

        <OBJECT ID="RSClientPrint" CLASSID="CLSID:FA91DF8D-53AB-455D-AB20-F2F023E498D3" CODEBASE="?rs:Command=Get&rc:GetImage=8.00.1038.00rsclientprint.cab#Version=2000,080,1044,000" VIEWASTEXT></OBJECT>

        <script language="javascript">
        function Print()
        {
            RSClientPrint.MarginLeft = 6.35;
            RSClientPrint.MarginTop = 3.81;
            RSClientPrint.MarginRight = 6.35;
            RSClientPrint.MarginBottom = 3.81;

            RSClientPrint.PageHeight = 215.9;
            RSClientPrint.PageWidth = 355.6;

            RSClientPrint.Culture = 1033;
            RSClientPrint.UICulture = 9;

            RSClientPrint.Print("http://192.9.200.36/ReportServer", "%2fERSReports%2fGrossRequirements", "GrossRequirements")
        }
        </script>

    </BODY>
</HTML> 
```

我什至尝试从服务器执行此操作，以管理员身份登录......并将 IE 中的安全设置设置为低，但仍然出现此错误。

这一切都在上周工作，据我所知，唯一可能发生的事情是服务器推出了更新，这可能是罪魁祸首。

无论如何，知道如何解决这个问题吗？我的用户迫切需要打印这些报告。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T13:20:37.557

[http://www.tek-tips.com/viewthread.cfm?qid=1541733&page=1](http://www.tek-tips.com/viewthread.cfm?qid=1541733&page=1)

检查这个线程。听起来与您的问题非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T15:14:52.663

[http://blogs.msdn.com/brianhartman/archive/2008/11/05/client-print-fails-to-load-after-microsoft-update-956391.aspx](http://blogs.msdn.com/brianhartman/archive/2008/11/05/client-print-fails-to-load-after-microsoft-update-956391.aspx) - 这对这个问题有很好的解释，所以你可以理解它。

确保您还在您的应用程序/Web 服务器上安装了可再分发的报表查看器。过了这个问题后，我又遇到了另一个问题。

[http://support.microsoft.com/default.aspx/kb/933137](http://support.microsoft.com/default.aspx/kb/933137)

# php - MySQL“Not IN”查询突然停止返回结果

> ID：1006945
> 
> 赞同：1
> 
> 时间：2009-06-17T13:17:04.710
> 
> 标签：php, mysql

我正在为共享托管环境中的一个站点做一些工作，该站点具有翻转我们设置的历史。本周，一个更新脚本突然停止工作，根本原因是用于返回结果的 NOT IN 子句不再这样做。

本质上，查询是这样的：

```
SELECT  *
FROM db1.entry
where entry_id not in
(
  select entry_id from db2.content
) 
```

我可以通过直接检查这两个表来验证确实有应该返回的记录。运行以下两个查询时，第一个返回第二个不返回的 entry_ids：

```
SELECT  *
FROM db1.entry 
order by entry_id desc

SELECT  *
FROM db2.content
order by entry_id desc 
```

再次重申，这一切都正常工作了几个月。没有进行代码更改，但可能在此过程中更改了 MySQL 设置。在 PHP 环境中也有可能发生了一些变化，但这似乎不太可能，因为从 phpMyAdmin 运行时，有问题的查询以与从实时站点运行时相同的方式失败。

而且，当然，它仍然可以在我的开发盒上完美运行。

实时站点正在运行 MySQL 版本 4.1.11。我的问题是，是否有人知道该版本的 MySQL 设置会改变这些 NOT IN 查询的工作方式？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T13:17:58.873

确保您的内部查询不返回`NULL`'s.

从[**文档**](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)：

> 为了符合`SQL`标准，不仅如果左侧的表达式是，而且如果在列表中没有找到匹配项并且列表中的表达式之一是 ，则`IN` 返回。`NULL``NULL``NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:21:03.127

您可能在 entry_id 的至少一行中有一个 NULL 值，而是使用 LEFT JOIN 或 NOT EXISTS

# php - 如何构建表格以使该字段保持原子性？

> ID：1006947
> 
> 赞同：1
> 
> 时间：2009-06-17T13:17:17.877
> 
> 标签：php, mysql, database-design, shopping-cart, atomic-values

我有一个购物车，我必须在其中跟踪库存，这包括带有属性的库存。例如：

```
shirt
 -- blue, small  = 50
 -- blue, medium = 22
 -- blue, large  = 53
 -- red,  small  = 15
 etc... 
```

这些字段目前在数据库中用逗号分隔，ID 如下：

```
1,3
1,4
1,5
2,3 
```

其中每个数字代表一个特定属性（1=蓝色，3=小）。问题是这变得非常难以处理，因为数据在数据库中不是原子的，但我不知道如何构造表，因为可能有无限多的项目组合，例如：

```
blue, small, long-sleeved 
```

任何人都可以建议一种更好的方式将这些信息存储在数据库中吗？我想过使用查找表，但由于属性数量不同，这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-17T13:26:24.753

表：衬衫 { shirt_id }

表： ShirtAttributeDefinitions{ attribute_id , attribute_description }

表： ShirtAttribute{ shirt_id , attribute_id }

这样，您可以通过向 Table:ShirtAttributeDefinitions 添加记录来继续定义新的 ShirtAttributes。

**例子：**

你有两件衬衫：{ shirt_id:1 }, { shirt_id:2 }

你有五个衬衫属性：{attribute_id:1, attribute_description:blue }, {attribute_id:2, attribute_description:small }, {attribute_id:3, attribute_description:ladies }, {attribute_id:4, attribute_description:red }, {attribute_id:5 , 属性描述：人 }

现在你的第一件衬衫是一件蓝色的小女士衬衫，第二件是一件红色的男士衬衫。所以你的 ShirtAttribute 表将有这些记录：

{shirt_id:1, attribute_id:1}, {shirt_id:1, attribute_id:2}, {shirt_id:1, attribute_id:3}, {shirt_id:2, attribute_id:4}, {shirt_id:2, attribute_id:5}

尽管这种方法有效，但最好将 Shirt 表的这些属性字段设置为。通过这种方式，您可以确保衬衫不会同时具有“男士”和“女士”属性。这种方法只是一种严格符合您的问题的肮脏方法。

jrh

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-17T13:34:08.980

属性表有什么问题？

```
create table Attributes (
    Id int not null identity etc,
    CartItemId int not null foreign-key etc,
    Name nvarchar(32),
    Value nvarchar(32)
) 
```

?

# listbox - 如何将多选列表框项目（任何订单选定项目）传输到.vb 中的另一个列表框？

> ID：1006951
> 
> 赞同：1
> 
> 时间：2009-06-17T13:17:44.723
> 
> 标签：listbox

我有三个列表框。单击添加按钮时，一个列表框（lst1）中的选定项目应填充到另一个列表框（lst2）中，因此第三个列表框（lst3）需要根据lst2中的选定值填充来自db的值。没有使用 ms visual studio2005 的 selecteditems 属性，单击删除按钮需要使用类似的逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:08:59.913

```
public static class Extensions
{
    public static IEnumerable<ListItem> GetSelectedItems(
           this ListItemCollection items)
    {
        return items.OfType<ListItem>().Where(item => item.Selected);
    }

}
On button click
------------------
var selected = lstFirst.Items.GetSelectedItems();

    foreach (var li in selected)
    {
        if (!lstSecond.Items.Contains(li))
        {
            ListItem newItem = new ListItem(li.Text, li.Value);
            lstSecond.Items.Add(newItem);
        }
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-06-17T13:22:29.520

someting 和 somethingelse 是列表框

```
 For Each Item As ListItem In something.Items
        If Item.Selected Then
            somethingelse.Items.Add(Item)
        End If
    Next 
```

# syntax - 我可以在 Scala 中省略哪些字符？

> ID：1006967
> 
> 赞同：25
> 
> 时间：2009-06-17T13:19:53.143
> 
> 标签：syntax, scala

在 Scala 中，为什么我可以在以下`T m 0`（而不是`T.m(0)`）中省略点和括号？

```
scala> object T { def m(i:Int) = 0 == i }
defined module T

scala> T m 0
res19: Boolean = true 
```

但是为什么我不能`n(0)`在下面省略刹车？

```
scala> def n(i:Int) = 0 == i
n: (Int)Boolean

scala> n 0
<console>:1: error: ';' expected but integer literal found.
       n 0
         ^ 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-06-18T20:19:31.060

前一个例子，T m 0，是“运算符符号”的一个例子。Scala 有三种类型的运算符符号，前缀（称为一元）、中缀和后缀。让我们在这里查看所有三个实例：

```
class MyByte(val n : Int) {
  require(n >= 0 && n <= 255)
  def unary_! = new MyByte(n ^ 0xff)
  def +(m : MyByte) = new MyByte(n + m.n)
  def bits = (math.log(n) / math.log(2) + 1).toInt
  override def toString = "0" * (8 - bits) + n.toBinaryString
} 
```

这里正在使用：

```
scala> val a = new MyByte(5)
a: MyByte = 00000101

scala> val b = new MyByte(10)
b: MyByte = 00001010

scala> ! a  // Prefix/Unary
res58: MyByte = 11111010

scala> a + b  // Infix
res59: MyByte = 00001111

scala> b bits  // Postfix
res60: Int = 4 
```

虽然中缀和后缀表示法接受任何有效的 Scala 标识符，尽管有人谈论限制后缀表示法，但只有四个标识符可以用作前缀：~、!、- 和 +。

现在，当您尝试“m 0”时，Scala 将其作为一元运算符丢弃，理由是它不是一个有效的运算符（~、!、- 和 +）。它发现“m”是一个有效的对象——它是一个函数，而不是一个方法，所有的函数都是对象。

由于“0”不是有效的 Scala 标识符，它既不能是中缀也不能是后缀运算符。因此，Scala 抱怨它期望“;” -- 这将分隔两个（几乎）有效的表达式：“m”和“0”。如果你插入它，那么它会抱怨 m 需要一个参数，或者，如果没有，一个“_”将它变成一个部分应用的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T14:29:19.243

我相信运算符语法样式仅在您在左侧有显式对象时才有效。该语法旨在让您以自然的方式表达“操作数运算符操作数”样式的操作。

# sql - 为什么批量插入/更新更快？批量更新如何工作？

> ID：1006969
> 
> 赞同：49
> 
> 时间：2009-06-17T13:20:09.493
> 
> 标签：sql, rdbms

为什么批量插入更快？是因为插入单行的连接和设置开销对于一组行是相同的吗？还有哪些其他因素使批量插入更快？

批量更新如何工作？假设表没有唯一性约束，插入语句实际上对批处理中的其他插入语句没有任何影响。但是，在批量更新期间，更新可能会改变表的状态，因此可能会影响批量中其他更新查询的结果。

我知道批量插入查询的语法是在一个大查询中拥有所有插入值。批量更新查询是什么样的？例如，如果我有以下形式的单个更新查询：

```
update <table> set <column>=<expression> where <condition1>
update <table> set <column>=<expression> where <condition2>
update <table> set <column>=<expression> where <condition3>
update <table> set <column>=<expression> where <condition4> 
```

当它们被批量使用时会发生什么。单个查询会是什么样子？

批量插入和更新是 SQL 标准的一部分吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-14T15:10:49.187

我正在寻找关于“批量/批量”更新的同一主题的答案。人们经常通过将其与具有多个值集（“批量”部分）的插入子句进行比较来描述问题。

```
INSERT INTO mytable (mykey, mytext, myint)
VALUES 
  (1, 'text1', 11),
  (2, 'text2', 22),
  ... 
```

明确的答案仍然避开我，但我在这里找到了解决方案：[http ://www.postgresql.org/docs/9.1/static/sql-values.html](http://www.postgresql.org/docs/9.1/static/sql-values.html)

说清楚：

```
UPDATE mytable
SET 
  mytext = myvalues.mytext,
  myint = myvalues.myint
FROM (
  VALUES
    (1, 'textA', 99),
    (2, 'textB', 88),
    ...
) AS myvalues (mykey, mytext, myint)
WHERE mytable.mykey = myvalues.mykey 
```

它具有相同的“大容量”属性，也就是一个语句包含大量数据。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-06-17T13:26:05.003

> 为什么批量插入更快？

有很多原因，但主要的三个是：

*   查询不需要重新解析。
*   这些值在一次往返中传输到服务器
*   命令在单个事务中

> 是因为插入单行的连接和设置开销对于一组行是相同的吗？

部分是的，见上文。

> 批量更新如何工作？

这取决于`RDBMS`.

您可以将所有值作为`Oracle`集合传输，并将此集合用作`JOIN`.

在`PostgreSQL`and`MySQL`中，您可以使用以下语法：

```
INSERT
INTO    mytable
VALUES 
        (value1),
        (value2),
        … 
```

您还可以准备一次查询并在某种循环中调用它。通常在客户端库中有一些方法可以做到这一点。

> 假设表没有唯一性约束，插入语句实际上对批处理中的其他插入语句没有任何影响。但是，在批量更新期间，更新可以改变表的状态，因此会影响批处理中其他更新查询的结果。

是的，您可能会或可能不会从这种行为中受益。

> 我知道批量插入查询的语法是在一个大查询中拥有所有插入值。批量更新查询是什么样的？

在`Oracle`中，您在连接中使用集合：

```
MERGE
INTO    mytable
USING   TABLE(:mycol)
ON      …
WHEN MATCHED THEN
UPDATE
SET     … 
```

在`PostgreSQL`：

```
UPDATE  mytable
SET     s.s_start = 1
FROM    (
        VALUES
        (value1),
        (value2),
        …
        ) q
WHERE   … 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-26T17:12:56.207

其他帖子解释了为什么批量语句更快以及如何使用文字值来做到这一点。

我认为知道如何使用占位符很重要。不使用占位符可能会导致巨大的命令字符串、引用/转义错误，从而导致易于 SQL 注入的应用程序。

### 在 PostgreSQL >= 9.1 中使用占位符批量插入

要将任意数量的行插入到表“mytable”中，该表由列“col1”、“col2”和“col3”组成，都在一个得到（一个语句，一个事务）：

```
INSERT INTO mytable (col1, col2, col3)
 VALUES (unnest(?), unnest(?), unnest(?)) 
```

您需要为此语句提供三个参数。第一个必须包含第一列的所有值，依此类推。因此，所有参数都必须是等长的列表/向量/数组。

### 在 PostgreSQL >= 9.1 中使用占位符进行批量更新

假设您的表称为“mytable”。它由“键”和“值”列组成。

```
update mytable 
  set value = data_table.new_value
  from 
    (select unnest(?) as key, unnest(?) as new_value) as data_table
  where mytable.key = data_table.key 
```

我知道，这并不容易理解。它看起来像混淆的 SQL。另一方面：它可以工作，可以扩展，无需任何字符串连接即可工作，安全且速度极快。

您需要为此语句提供两个参数。第一个必须是包含“键”列的所有值的列表/向量/数组。当然，第二个必须包含列“值”的所有值。

如果您达到大小限制，您可能需要查看`COPY INTO ... FROM STDIN`（PostgreSQL）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T20:39:19.790

在批量更新中，数据库针对一组数据工作，在逐行更新中，它必须运行与可能多次相同的命令，因为有行。因此，如果您批量插入一百万行，则该命令将被发送和处理一次，而在逐行更新中，该命令将被发送和处理一百万次。这也是为什么您永远不想在 SQL Server 中使用游标或相关子查询的原因。

SQL server 中基于集合的更新示例：

```
update mytable
set myfield = 'test'
where myfield is null 
```

这将一步更新所有 100 万条为空的记录。游标更新（这是您以非批处理方式更新一百万行的方式）将一次遍历每一行并更新它。

批量插入的问题在于批量的大小。如果您尝试一次更新太多记录，数据库可能会在整个过程中锁定表，从而将所有其他用户锁定在外。所以你可能需要做一个循环，一次只占用部分批次（但几乎任何一次大于一行的数字都会比一次快一行）这比更新、插入或删除整个批次，但比逐行操作更快，并且在用户不尝试查看和更新​​同一个表中的其他记录时，可能需要在具有许多用户且可用停机时间很少的生产环境中。

# css - 定位错误 我注意到我正在维护的一个网站在 FF/IE8/Chrome 中存在一个小布局错误（例如在此页面上） - 左上角的图像有点高，误入顶部的标题。 我想知道为什么当我接管该站 问问题 问问题 2009-06-17T13:20:40.240 4570 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我注意到我正在维护的一个网站在 FF/IE8/Chrome 中存在一个小布局错误（例如在此页面上） - 左上角的图像有点高，误入顶部的标题。 我想知道为什么当我接管该站点时我没有注意到它，但我意识到它只是在我将 IE7 升级到 IE8 之后才变得明显 - 显然这个问题早就存在于“正确的”浏览器中。 对于这些“正确”的浏览器，这个绝对定位的图像需要将 top 属性设置为 59px，而不是 IE7（及更低版本）需要的 56px。 解决方案很简单，但是 a) 我想先了解问题，b) 我想考虑一系列解决方案（我知道会有不止一个）。考虑到这一点... 问题的原因是什么？ 很多定位问题是由于错误的IE框模型，但我认为这已经被IE7修复了。它是仍然影响 IE7 的盒子模型问题还是不同的东西？ 什么是最好的解决方案？ 许多消息来源建议使用条件注释来包含 IE7 补丁 CSS 文件是要走的路： 直截了当，但我宁愿不必将其插入网站上每个页面的标题中（但如果必须的话，我当然会这样做）。 我知道有许多 CSS hack 可能可以完成这项工作，但有一种学派认为应该避免使用 CSS，因为它们更难维护，尤其是在新的浏览器出现时。我当然可以同情这种心态；但是，该站点将在 3 个月内完全重新开发，因此我正在寻找一个短期解决方案。如果我选择使用 CSS hack，我需要做些什么来改变 IE7 及更低版本的行为？ 我还读到好的重置样式表可以避免许多这些问题，所以为了一笑，我应用了 Eric Meyer 的Reset Reloaded样式表 - 正如预期的那样，它严重破坏了网站。 回顾一下，到底是什么问题？什么是最好的长期解决方案，什么解决方案最容易部署，给出问题的短期性质？ CSS（'Banner02'）：http ://new.eminox.com/_lib.css/content.css 实际上，我认为您的问题不在于“banner02”的定位，而是“banner01”div 顶部的高度。我在 FF 和 IE7 中打开了站点，并在页面的顶部边缘对齐。图像“banner02”的高度位置完全相同，但标题 div“banner01”在一个浏览器中比另一个浏览器高。我还认为 IE7 以“怪癖模式”运行，这稍微改变了盒子模型。 为了让 FF 和 IE7 看起来一样（对不起，我没有安装 IE8，这是我的工作 PC，所以我不能安装太多来检查它们），我做了 2 处更改： 1) 将 DOCTYPE 更改为： <-- 这可能不是必需的。请参阅下面的评论。 到： 2) 为“banner01”定义一个高度，因为之前没有设置（在 Global.css 中）： .banner01 { width: 770px; height: 48px; background-color: white; border-color: #555555; border-style: solid; border-width: 10px 0 1px 0; } （横幅 02 为 59px，因此我们选择高度 48，因为 48 + 10px 上边框 + 1px 下边框 = 59px） 这为我清除了它......但同样，我只在 2 个浏览器中测试了它。希望这会有所帮助！ cssinternet-explorerpositioning 4 1 回答 1 This answer is useful 3 实际上，我认为您的问题不在于“banner02”的定位，而是“banner01”div 顶部的高度。我在 FF 和 IE7 中打开了站点，并在页面的顶部边缘对齐。图像“banner02”的高度位置完全相同，但标题 div“banner01”在一个浏览器中比另一个浏览器高。我还认为 IE7 以“怪癖模式”运行，这稍微改变了盒子模型。 为了让 FF 和 IE7 看起来一样（对不起，我没有安装 IE8，这是我的工作 PC，所以我不能安装太多来检查它们），我做了 2 处更改： 1) 将 DOCTYPE 更改为： <-- 这可能不是必需的。请参阅下面的评论。 至： 2) 为“banner01”定义一个高度，因为之前没有设置（在 Global.css 中）： .banner01 { width: 770px; height: 48px; background-color: white; border-color: #555555; border-style: solid; border-width: 10px 0 1px 0; } （横幅 02 为 59px，因此我们选择高度 48，因为 48 + 10px 上边框 + 1px 下边框 = 59px） 这为我清除了它......但同样，我只在 2 个浏览器中测试了它。希望这会有所帮助！ 于 2009-06-17T13:55:48.140 回答 Related 1 graph - 图结构中的自有指针 1 actionscript-3 - fla 、 swf 和 as 文件之间的区别 1 android - Android AssetManager.list() 非常慢 1 python - 难以理解 python 的 gc.garbage（用于跟踪内存泄漏） 1 java - Web 服务处理程序中的静态块 4 javascript - JSON值在javascript中解析为未定义 2 heroku - 完美运行的 Heroku 应用程序崩溃并且无法重新启动 0 java - JavaFX 特定的音频输出 1 c# - MobileServiceCollection 数据绑定到列表框 2 java - 在敌对环境中运行 OSGi Equinox 控制台 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：1006975
> 
> 赞同：1
> 
> 时间：
> 
> 标签：css, internet-explorer, positioning

我注意到我正在维护的一个网站在 FF/IE8/Chrome 中存在一个小布局错误（例如在[此页面](http://new.eminox.com/news/release_2009-06-04.shtml)上） - 左上角的图像有点高，误入顶部的标题。

我想知道为什么当我接管该站点时我没有注意到它，但我意识到它只是在我将 IE7 升级到 IE8 之后才变得明显 - 显然这个问题早就存在于“正确的”浏览器中。

对于这些“正确”的浏览器，这个绝对定位的图像需要将 top 属性设置为 59px，而不是 IE7（及更低版本）需要的 56px。

解决方案很简单，但是 a) 我想先了解问题，b) 我想考虑一系列解决方案（我知道会有不止一个）。考虑到这一点...

*   问题的原因是什么？

很多定位问题是由于错误的IE框模型，但我认为这已经被IE7修复了。它是仍然影响 IE7 的盒子模型问题还是不同的东西？

*   什么是最好的解决方案？

许多消息来源建议使用条件注释来包含 IE7 补丁 CSS 文件是要走的路：

```
<!--[if lte IE 7]>
 <link href="IE7Fix.css" rel="stylesheet" type="text/css">
<![endif]--> 
```

直截了当，但我宁愿不必将其插入网站上每个页面的标题中（但如果必须的话，我当然会这样做）。

我知道有许多 CSS hack 可能可以完成这项工作，但有一种学派认为应该避免使用 CSS，因为它们更难维护，尤其是在新的浏览器出现时。我当然可以同情这种心态；但是，该站点将在 3 个月内完全重新开发，因此我正在寻找一个短期解决方案。如果我选择使用 CSS hack，我需要做些什么来改变 IE7 及更低版本的行为？

我还读到好的重置样式表可以避免许多这些问题，所以为了一笑，我应用了 Eric Meyer 的[Reset Reloaded](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)样式表 - 正如预期的那样，它严重破坏了网站。

回顾一下，到底是什么问题？什么是最好的长期解决方案，什么解决方案最容易部署，给出问题的短期性质？

CSS（'Banner02'）：[http ://new.eminox.com/_lib.css/content.css](http://new.eminox.com/_lib.css/content.css)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-17T13:55:48.140

实际上，我认为您的问题不在于“banner02”的定位，而是“banner01”div 顶部的高度。我在 FF 和 IE7 中打开了站点，并在页面的顶部边缘对齐。图像“banner02”的高度位置完全相同，但标题 div“banner01”在一个浏览器中比另一个浏览器高。我还认为 IE7 以“怪癖模式”运行，这稍微改变了盒子模型。

为了让 FF 和 IE7 看起来一样（对不起，我没有安装 IE8，这是我的工作 PC，所以我不能安装太多来检查它们），我做了 2 处更改：

1)~~将 DOCTYPE 更改为：~~ *<-- 这可能不是必需的。请参阅下面的评论。*

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

至：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

2) 为“banner01”定义一个高度，因为之前没有设置（在 Global.css 中）：

```
.banner01 {
  width: 770px;
  height: 48px;
  background-color: white;
  border-color: #555555;
  border-style: solid;
  border-width: 10px 0 1px 0;
} 
```

（横幅 02 为 59px，因此我们选择高度 48，因为 48 + 10px 上边框 + 1px 下边框 = 59px）

这为我清除了它......但同样，我只在 2 个浏览器中测试了它。希望这会有所帮助！

# oracle - 具有多个子查询的 oracle 查询

> ID：1006976
> 
> 赞同：2
> 
> 时间：2009-06-17T13:20:40.380
> 
> 标签：oracle

尝试选择表行，然后使用子查询生成单行列表（item1，item2，item3）

无论如何sql：

```
select 
  username,
  concat(firstname || ' ', lastname) as name,
  email,
  phone,
  (
  select 
    ltrim(sys_connect_by_path(res, ', '), ', ')
  from (
    select 
      count(*) over() as cnt, 
      row_number() over(order by ofield) as rnum, 
      (select name from rooms where code=roomcode) as res 
    from adminrooms
    where roomcode=admins.code) /*admins.code - come from main query but it gives error: invalid identifier*/
  where cnt=rnum start with rnum=1 connect by prior rnum=(rnum-1)
  ) as groups
from admins
where frozen=0 and (type <> 'root' or type is null) 
```

问题似乎是表“管理员”中的主要查询字段“代码”在列表生成查询中不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T14:11:05.350

我可以用一个简单的例子重现你的发现。考虑：

```
SQL> SELECT (SELECT d1.dummy FROM dual d2) d2
  2    FROM dual D1;

D2
--
X 
```

这是有效的，因为子查询“d2”可以看到主查询“d1”的行，但是如果我们添加一个级别，我会得到与您相同的错误：

```
SQL> SELECT (SELECT NULL FROM (SELECT d1.dummy FROM dual d3))
  2  FROM dual D1;

SELECT (SELECT NULL FROM (SELECT d1.dummy FROM dual d3))
FROM dual D1                     ~

ORA-00904: "D1"."DUMMY": invalid identifier 
```

这里的子查询“D3”不能从“D1”中看到行的值。

您将不得不修改您的查询：
* join `admin`with`adminrooms`然后使用`sys_connect_by_path`or
* 编写一个函数，该函数将代码作为参数并输出您选择的结果。

如果您需要示例，请向我们提供 CREATE TABLE 和示例数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T13:36:19.367

我猜“管理员”表中没有“代码”列……这只是一个小错误。如果有，你不会想加入 adminrooms 的房间代码，而是像“admincode=admins.code”这样的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T00:38:21.070

根据您的数据库图，最好的方法是使用自定义[字符串聚合](http://www.oracle-base.com/articles/10g/StringAggregationTechniques.php)函数，然后进行分组。这类似于 mysql group_concat。

如果您使用上面的链接创建了一个名为 string_agg() 的函数，则可以在代码中使用它，如下所示：

```
select a.username, string_agg(c.name) from admins a, adminrooms b, groups c
where a.code=b.admincode
and b.groupcode=c.code
group by a.username 
```

这是 string_agg 函数创建脚本。只需将其作为脚本运行，您将拥有上面的功能（取自上面显示的链接）：

```
CREATE OR REPLACE TYPE t_string_agg AS OBJECT
(
  g_string  VARCHAR2(32767),

  STATIC FUNCTION ODCIAggregateInitialize(sctx  IN OUT  t_string_agg)
    RETURN NUMBER,

  MEMBER FUNCTION ODCIAggregateIterate(self   IN OUT  t_string_agg,
                                       value  IN      VARCHAR2 )
     RETURN NUMBER,

  MEMBER FUNCTION ODCIAggregateTerminate(self         IN   t_string_agg,
                                         returnValue  OUT  VARCHAR2,
                                         flags        IN   NUMBER)
    RETURN NUMBER,

  MEMBER FUNCTION ODCIAggregateMerge(self  IN OUT  t_string_agg,
                                     ctx2  IN      t_string_agg)
    RETURN NUMBER
);
/
SHOW ERRORS

CREATE OR REPLACE TYPE BODY t_string_agg IS
  STATIC FUNCTION ODCIAggregateInitialize(sctx  IN OUT  t_string_agg)
    RETURN NUMBER IS
  BEGIN
    sctx := t_string_agg(NULL);
    RETURN ODCIConst.Success;
  END;

  MEMBER FUNCTION ODCIAggregateIterate(self   IN OUT  t_string_agg,
                                       value  IN      VARCHAR2 )
    RETURN NUMBER IS
  BEGIN
    SELF.g_string := self.g_string || ',' || value;
    RETURN ODCIConst.Success;
  END;

  MEMBER FUNCTION ODCIAggregateTerminate(self         IN   t_string_agg,
                                         returnValue  OUT  VARCHAR2,
                                         flags        IN   NUMBER)
    RETURN NUMBER IS
  BEGIN
    returnValue := RTRIM(LTRIM(SELF.g_string, ','), ',');
    RETURN ODCIConst.Success;
  END;

  MEMBER FUNCTION ODCIAggregateMerge(self  IN OUT  t_string_agg,
                                     ctx2  IN      t_string_agg)
    RETURN NUMBER IS
  BEGIN
    SELF.g_string := SELF.g_string || ',' || ctx2.g_string;
    RETURN ODCIConst.Success;
  END;
END;
/
SHOW ERRORS

CREATE OR REPLACE FUNCTION string_agg (p_input VARCHAR2)
RETURN VARCHAR2
PARALLEL_ENABLE AGGREGATE USING t_string_agg;
/
SHOW ERRORS 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T08:10:14.657

尝试重写你的子查询

```
 (
    select 
      count(*) over() as cnt, 
      row_number() over(order by ofield) as rnum, 
      (select name from rooms where code=roomcode) as res 
    from adminrooms
    where roomcode=admins.code) 
```

作为主查询中的表

```
 ... from admins, 
       (
        select 
          roomcode,
          count(*) over() as cnt, 
          row_number() over(order by ofield) as rnum, 
          (select name from rooms where code=roomcode) as res 
        from adminrooms) t
 where t.roomcode = admins.code... 
```

并使用`wmsys.WM_CONCAT()`而不是`sys_connect_by_path()`

# sql-server - 将“null”或 NOT NULL 列添加到巨大的 SQL Server 表

> ID：1006977
> 
> 赞同：5
> 
> 时间：2009-06-17T13:20:58.757
> 
> 标签：sql-server, database

我有一个包含大约 30 列的表，已在应用程序中广泛使用。即，在存储过程和 UDF 的数量上，以许多不同的方式（开发人员认为他们喜欢的任何方式）编写了该表的 Select、Insert 和 Update 操作。我现在接到了一项任务来扩展表格所服务的功能，并且我需要向表格添加额外的细节（通常可以假设为表格的附加列）。考虑到它将在其他地方造成的影响，我不想在表中添加额外的列是一项庞大且效率低下的任务。

我现在能想到的另一种方法是使用主表的外键创建一个新表并维护新表中的记录。我也对这种方式持怀疑态度。在表的模式中处理这种修改的有效方法是什么？

在需要时使用 SQL Server 2000。

编辑：

不幸的是，列不应该接受 NULL 值。确实错过了这个关键信息

我认为由于已经实施的不良做法可能会产生的影响是，

> 1）“SELECT *”并直接绑定到一些数据网格到前端。（非常非常低的可能性）
> 
> 2) 使用“SELECT *”时，使用列号从数据集或数据表中获取，而不是前端的列名
> 
> 3）“插入”按顺序给出的值而不是列名。

通过某种方式，如果我可以使列接受“NULL”值（通过稍微调整要求）由于上述几点有什么影响吗？

我对分析现有代码持怀疑态度，因为使用此表的 SP 和函数的数量可能会达到数百个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-17T14:02:08.830

1.  使用您需要的所有列构建一个新表，随意调用它。
2.  创建一个视图，将其命名为与旧表相同的名称，并让它返回旧表使用的所有列。
3.  ？？？
4.  $

（是的，我知道这对于维护来说可能会造成混淆，因为很多 DBA 使用视图的命名约定：V_Viewname。我从来没有用它是什么类型的对象来命名 SQL 对象，也没有看到这样的好处一个约定）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T13:27:16.403

问问自己为什么添加一列会产生巨大的影响。也许您有使用 SELECT * 的查询？找出影响显着的原因 - 然后将其视为错误并修复它们。

大多数时候，添加一列不应该破坏任何东西。添加 NOT NULL 列将影响执行 INSERT 的任何操作，但除此之外，如果您的数据库设计得当，影响应该不大。

* * *

**非空更新后编辑**

解决方案很明显：将列添加为 NULL，更新数据以包含每一行的非 NULL 值，然后将列更改为 NOT NULL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T13:40:22.447

> 考虑到它将在其他地方造成的影响，我不想在表中添加额外的列是一项庞大且效率低下的任务。

你能详细说明一下吗？

将列添加为可为空或使用默认值，意味着实际上没有人必须提供值。**没有影响**

如果您担心将列添加到表中时的锁定时间，请将列添加到表的末尾（这样 SQL Server 不必创建新表，将数据复制到它，删除旧表，并重命名新表。）**几乎没有运行时影响**

## 添加 5000 万行数据对运行时几乎没有影响？

用户@BrianWhite 似乎很困惑，如何在包含 5000 万行的表中添加一列几乎不会对运行时产生影响。他似乎认为向大表添加列是一项昂贵的操作，因为扩展操作会阻塞用户，这会给其他用户带来问题。他似乎认为添加一列会导致服务器写入 5000 万行：

> 它将在写入 5000 万个数据条目所需的时间内持有表锁

重要的一点是它**不会**写入 5000 万条数据。为了证明这一点，恰好有一个包含**28,176,266**行 ( **4,557 MB** ) 的表：

```
--How many rows in the table
SELECT COUNT(*) FROM BigTable

28176266
(1 row(s) affected)

--How big is the table
EXECUTE sp_spaceused 'BigTable'

name      rows      reserved    data        index_size  unused
--------  --------  ----------  ----------  ----------  ------
BigTable  28176266  4681560 KB  4666984 KB  14536 KB    40 KB 
```

现在我们已经确定我有一个**2800 万**行的表，即**4.6 GB**，让我们在这个表中添加一列：

```
ALTER TABLE BigTable ADD NewColumn int NULL 
```

等待！问题是：*需要多长时间？这不是在创建 2800 万个条目时会占用表锁的长时间操作吗？*

***不！***让我们计算需要多长时间：

```
PRINT 'Time before adding the column: '+CONVERT(varchar(50), getdate(), 126)
ALTER TABLE BigTable ADD NewColumn int NULL
PRINT 'Time after adding the column: '+CONVERT(varchar(50), getdate(), 126) 
```

将一列添加到 2800 万行、4.6 GB 的表中需要多长时间？

```
Time before adding the column: 2012-11-06T14:14:33.493
Time after adding the column: 2012-11-06T14:14:33.503 
```

答案：大约**10 毫秒**

十***毫秒***。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-17T14:20:05.517

添加一个新表来容纳这个新列的建议在技术上被称为[垂直分区](http://en.wikipedia.org/wiki/Partition_(database))，虽然它在数据库设计中占有一席之地，但这些问题与性能有关。

理想情况下，您应该能够简单地将新列添加到现有表中。如果每次要添加新列时都必须向数据库中添加新表，那么您的系统将很快变得难以管理。我假设您没有与生产分开的开发/测试环境。这可能是让你的老板相信你需要一个的绝佳机会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T13:25:33.770

任何一种方法都可以，但需要注意以下几点：

*   如果您有 SELECT * ... 某处，您的新列将显示在结果集中，这可能是不可取的，例如

    插入#tmpTable select * from sometable where blah-blah-blah

除非在临时表中定义了新列，否则将导致错误

*   使用“扩展”表影响较小但效率较低，但是，它是唯一保证不会干扰现有存储过程、视图等的方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T13:25:36.737

如果无法在现有表中添加新列，请添加与旧表一一对应的新表。它应该包含旧表中的主键字段和新列。此键字段也是新表的主键（强制一对（零或一）基数）。

缺点是：

*   为了找到新数据，您需要进行连接（实际上是外连接）。
*   插入/更新/删除记录时，必须在两个表中进行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T13:25:50.760

在重构代码和数据库时，我会添加所需的表并向原始表添加触发器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-17T13:27:50.570

您必须评估对现有代码库的影响，这就是您的答案。如果它符合时间表，那么我通常建议把它做好。如果它超出了时间表，那么显然你只需破解它并再次修复它。

有时我们无法解决所有问题，唯一的解决方案就是创可贴。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-17T13:30:22.467

我将首先调查您仅更改原始表格时遇到的问题。如果您只是添加可为空的列，那么您可能会发现根本没有问题。

从现有代码的角度来看，可能存在的问题是开发人员可能已经完成了 SELECT * FROM TABLE，如果添加更多代码，可能会弄乱此代码。但是，永远不要执行 SELECT * 是一种相当普遍的最佳实践。

如果你沿着第二个表路线走，你可以只为这两个表添加一个视图，这样任何新的开发都可以基于这个视图。

不过，在我看来，我可能只是修改现有表并处理您遇到的任何问题。这当然取决于错误的现实生活“成本”，人会死吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-17T13:34:44.377

我喜欢创建新表的想法。我认为这是最安全的方法。但是，如果您要添加的新列可以允许空值，那么您应该没有任何问题。只需确保使该列允许空值即可。

如果它不能允许空值，请将列设置为允许空值，在现有数据的列中插入所需的值，然后确保将列设置回允许空值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-17T13:38:50.687

我认为扩展表是你最好的选择。当您从 sys 表中获取表的使用位置列表并进行更改时，我建议您创建一个链接到新扩展表的表的新视图，并在您的选择语句中使用它. 这应该会在未来为您带来一些灵活性。

编辑：我不会尝试在此扩展表中保留一对一的关系。仅当有必要时，我才会在扩展表中输入一行并在视图中加入。这样您就不必担心触发器或大量数据验证，以确保表同步。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-17T14:36:44.347

如果您使用alter table并添加一个默认值以便所有记录都有一个值，那么除非您有数百万条记录，否则它应该不会太糟糕。不要通过企业管理器执行此操作（您永远不应该使用企业管理器更改表，因为它完全重新创建了更改表没有的表）。如果您有太多记录而无法自动填充默认值，您首先需要更改表以添加一个包含空值的列，然后将该列更新为正确的值（如果您有很多记录，您可能想要这样做根据您为确定现有记录的正确值而制定的任何规则，而不是锁定整个表。一旦您知道没有没有值的记录，然后更改表以使该列不可为空。

添加列是否会对现有代码产生影响。如果开发人员没有使用 select * （绝不应该在生产代码中使用），它不会产生太大影响，除了您必须出于某种目的添加新列并且与该目的相关的任何代码都需要更新以包含新列。由于这是一个不可为空的列，因此至少需要更改插入记录的代码，并且可能需要更改您的代码来更新它们（取决于这是否是一个一旦到位就会更新的值。）有也可能是一些可能会受到影响的选择。插入代码必须与使列不可为空的更改大致同时到位，否则所有插入都将失败，直到您将其到位。您可以通过将其全部制作成一个大脚本来做到这一点。

如果您认为很多会受到影响，并且需要一些时间才能将它们全部整理出来。创建一个包含新列的新表。从旧表中填充它。更改插入/更新/删除以转到新表。然后删除旧表并使用旧表的名称创建一个视图，该表只有旧列。在脚本中执行所有这些操作，以便它可以一起在 prod 上运行。不要在一天中的主要部分运行它，将它安排在数据库使用的最轻时间运行。

# asp.net - 具有自定义报告创建能力的最佳 ASP.NET 报告引擎

> ID：1006979
> 
> 赞同：40
> 
> 时间：2009-06-17T13:21:06.200
> 
> 标签：asp.net, reporting-services, crystal-reports, reporting

我们需要为我们的 ASP.NET 应用程序选择报告引擎。主要功能要求是最终用户（不是程序员，只是普通用户）**创建自定义报告**的能力。我们将使用 SQL Server 作为数据库，因此我知道一些选项：SQL Server Reporting 服务、Crystal Reports、Active Reports，甚至 WindwardReports。

但坦率地说，除了报告服务，我从未使用过任何其他服务，而且很难选择最适合客户自定义报告创建需求的服务。是否有可能获得这些选项的一些利弊，或者至少您对在这种情况下使用什么更好的建议。非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-09-13T15:01:17.170

我使用过所有主要的报告工具，每个工具都有其优点和缺点。关于 SQL Report Services 方面唯一的“加分项”是 SQL Server 许可证之上没有额外的 $$ 支出。缺点是报表设计器可能是最孩子气的。

Crystal 一直存在，有些人喜欢它，很多人讨厌它，它可以完成工作，但如果您想将它用于除个人用途之外的任何用途，则涉及到严重的价格标签。而且它的网络报告服务器非常昂贵。

ActiveReports、XtraReports、Telerik 都有很好的产品，并且都在积极改进（当然速度不同）。每个都有一个 Web 查看器，但它们不包括您可能希望从 Web 报告服务器获得的其余内容。

如果您发现您确实需要用于 Crystal、ActiveReports、XtraReports 或 Telerik 报告（或任何其他报告设计器，就此而言）的企业级 Web 服务器选项，现在可从 www.versareports.com 获得。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-17T13:26:29.200

DevExpress XtraReports 套件。

报告只是一个类，不涉及 Web 服务或 rpt 文件。

[http://www.devexpress.com/Products/NET/Reporting/](http://www.devexpress.com/Products/NET/Reporting/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-17T13:47:43.790

如果你有 Microsoft SQL Server 作为数据库，那么你不需要购买许可证来支持 SQL Reporting Services，但是 SQL Reporting Services 有一个问题，SQL Reporting Services 只与 IE 兼容。检查这些链接...
[http://msdn.microsoft.com/en-us/library/ms156511.aspx](http://msdn.microsoft.com/en-us/library/ms156511.aspx)

[SQL Reporting Services - Mozilla 中未显示打印按钮](https://stackoverflow.com/questions/951009/print-button-not-shown-in-mozilla-sql-reporting-services)

另一方面，如果您使用 Reporting Services 以外的其他服务，则需要购买许可证。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-15T14:23:03.170

你可以试试[jsreport](http://jsreport.net)。它是免费的、开源的、有 .net 客户端、跨平台（nodejs），不需要任何编译，让您的用户修改他们的报告是安全的。报告是使用 javascript 模板引擎设计的，应该为您的报告布局提供最大的灵活性。

缺点

*   目前不支持excel和word
*   预览中
*   不直接与 sql db 对话，但无论如何您都应该从 BL 发送数据，除非您正在搜索 BI 报告

[您可以在 jsreport操场](https://playground.jsreport.net/)上尝试无需任何身份验证

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-17T13:29:12.390

Reporting Services 是我最熟悉的一种，它是 SQL Server 中根深蒂固的一种，这是我更喜欢的一种。我也碰巧比水晶更喜欢 RS 的“感觉”。

其他两个选项我完全不熟悉，我想它们的市场份额（因此在寻求帮助方面也更小）比 RS 或 Crystal 小得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-17T13:24:57.237

一个建议是让您至少对所有这些选项进行一些评估。主要原因是你可以对他们有足够的了解来判断如何让他们一起打得很好。

这样，如果您需要切换报告引擎，或者可能针对某些特定要求使用不同的引擎，您就会知道如何去做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-17T13:27:21.647

SQL 报告服务。他们有一个 Web 工具来构建与其他任何工具一样好的临时报告。

ad hoc 报告的一般问题是，用户试图做的“事情”要么超出了工具，要么超出了用户，你必须以任何方式去做，作为程序员，SSRS 是一个更好的环境。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-19T04:55:58.463

首先，感谢您提前提及 Windward。很高兴看到我们在默认短名单上:)

这实际上取决于哪种报告设计方法最适合您。如果您更喜欢 IDE 中的编程类型方法，那么它是 Crystal、SSRS 等。如果您更喜欢可以在 Microsoft Word、Excel 或 PowerPoint 中设计报告的方法（恕我直言，这使得报告设计和编辑变得快速而简单） ，然后仔细查看[迎风报告](https://www.windwardstudios.com/reporting-software)。（免责声明，我是 Windward 的 CTO。）

对于一般信息，我建议[使用 dotnet-reports](http://www.dotnetreports.info/)和[reporting-software](http://www.reportingsoftware.info/)。一个适合您的系统的关键是设计工具自然适合您的风格 - 所以尝试几个。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-06-17T13:25:03.913

***水晶报表***，可轻松与 .net 集成

# caching - 读取 CPU 缓存内容

> ID：1006981
> 
> 赞同：11
> 
> 时间：2009-06-17T13:21:16.777
> 
> 标签：caching, hardware, cpu, cpu-cache

有什么方法可以读取 CPU 缓存内容吗？架构适用于 ARM。

我正在使一系列地址无效，然后想确定它是否无效。虽然我可以在有和没有无效和检查无效的情况下读写地址范围，但我想知道是否可以读取缓存内容

谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-29T05:07:11.883

ARM9 提供高速缓存操作和测试寄存器，允许您检查高速缓存的状态。这是一个合理的起点：

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0151c/Chdcfejb.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0151c/Chdcfejb.html)

> ICache 和 DCache 使用 MCR 和 MRC 指令维护 CP15 寄存器 7 和 9，由 ARM v4T 程序员模型定义。可以使用 MCR 和 MRC 对 CP15 寄存器 15 执行其他操作。这些操作与使用寄存器 7 和 9 的操作相结合，可以完全在软件中测试高速缓存。

这些是特权指令，因此可能无法在您的目标平台上访问。

我将从一个转储所有缓存行状态的简单程序开始。这应该为您提供足够的信息来读取缓存中的数据，只需读取缓存标签提供的内存位置即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T13:47:51.557

我犹豫要不要写它是不可能的，所以我写它非常困难。可能没有通用的答案。鉴于 CPU 缓存透明地工作，因此不可能在不更改缓存内容的情况下从连接的 CPU 读取其内容。CPU缓存通常实现为CAM（内容可寻址内存，关联内存），如果CPU尝试访问数据，则查找缓存，如果数据不存在，则从内存中获取，但恐怕这个过程对CPU是透明的.

选项是使用一种硬件观察模块和系统总线上的嗅探，它将缓存连接到 RAM。如果数据请求出现在总线上，则请求的数据不在缓存中。

希望有更深入的硬件知识的人会有所启发。

维基百科上有一个条目讨论 CPU 缓存： [http ://en.wikipedia.org/wiki/CPU_cache](http://en.wikipedia.org/wiki/CPU_cache)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T08:48:42.567

根据定义，读取缓存内容所需要做的就是加载缓存存储的内存位置。如果缓存正常工作，它将从缓存中提取内容。

但是，如果您尝试读取 I-cache 的内容，则取决于架构。另外，您将需要考虑比赛条件。用于读取缓存内容的指令可能会无意中覆盖缓存内容本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T14:49:06.723

如[该线程](https://stackoverflow.com/questions/683023/determine-whether-memory-location-is-in-cpu-cache)所述，简单地使用 CPU 会导致缓存的内容发生变化。由于（大多数）缓存实现有意对 CPU 完全透明，因此您将无法直接从运行在传统 CPU 上的软件中查看缓存的内容。

做这样的事情需要一个缓存感知CPU（带有控制缓存的特殊指令；我不知道这些是否真的存在），或者你需要安装一个单独的硬件模块来查看缓存。以下是我对此的两个想法：

1.  用具有附加控制功能并且可以连接到系统总线以读取数据的缓存控制器替换您的原始缓存控制器。该控制器位于 CPU 和缓存“之间”。

2.  将辅助模块与原始缓存并行放置，并具有只读缓存访问权限。使用特殊的中断线（或类似的硬件-而非软件信号），CPU 可以触发将缓存转储到该模块的内存中，然后稍后（通过总线）将其读回。该控制器不会影响您的缓存操作；它只会让您在任何给定时间拍摄快照。

# .htaccess - .htaccess 反向重写而不循环？

> ID：1006989
> 
> 赞同：0
> 
> 时间：2009-06-17T13:22:43.933
> 
> 标签：.htaccess, mod-rewrite

**我有一个名为bfly.php**的现有页面，我需要将其更改为**butterfly-jewelry.php**

我想这样做，以便如果有人访问 URL *butterfly-* jewelry.php 他们会得到 bfly.php 页面，但 url 不会改变它保持为*butterfly-jewelry.php*。但是，如果有人直接访问 bfly.php，则 url 将更改为*butterfly-jewelry.php*

有没有办法做到这一点而不会陷入重写循环？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T14:36:48.293

您可以将文件重命名为例如 bfly1.php ，然后使用：

```
RewriteRule ^butterfly-jewelry\.php bfly1.php [L,QSA]
RewriteRule ^bfly\.php http://yourhost.com/butterfly-jewelry.php [L,QSA,R=301] 
```

（我尝试了 Blixt 的解决方案，但它导致了一个无限循环，尽管有 L 标志。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T13:52:08.727

您可以使用 Last Rule 和 Redirect 标志来做您想做的事情（请参阅[mod_rewrite 文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)）：

```
# Rewrite request to bfly.php, and then stop the rewrite engine.
RewriteRule ^butterfly-jewelry\.php$ bfly.php [L]
# Redirect the client to butterfly-jewelry.php with "Permanently Moved" status
RewriteRule ^bfly\.php$ butterfly-jewelry.php [L,R=301] 
```

我没有测试过以上，但我相信它应该工作。

# ruby-on-rails - rails 最佳实践 - 使用 VCS 颠覆提交

> ID：1006992
> 
> 赞同：1
> 
> 时间：2009-06-17T13:24:24.633
> 
> 标签：ruby-on-rails, svn, commit

当您想使用 Rails 回滚数据迁移时，更新项目的最佳实践是什么？在本地删除迁移，然后提交整个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T13:32:47.563

您不必删除*任何*迁移。所有迁移都应该是可逆的。如果您 100% 确定没有其他人使用过这些迁移，您可以通过以下方式删除它们：

```
svn rm db/migrate/your_migration
svn commit db/migrate 
```

但是，如果您所说的回滚是为那些已经使用该迁移的人修复它，那么要走的路是创建一个新的迁移来扭转陷入困境的迁移。

# ruby-on-rails - 模板自定义/rails 重新加载

> ID：1006995
> 
> 赞同：0
> 
> 时间：2009-06-17T13:24:48.593
> 
> 标签：ruby-on-rails, customization, reload, liquid

我正在寻找让用户能够在 Rails 应用程序的最小部分中修改代码，该部分位于应用程序目录中。我被“在生产中不自动重新加载任何东西”所困扰，有没有办法避免它？

（谈论“用户的模板定制”；液体是解决这个问题的一种方法吗？看起来不是这样，但仍然可能是）。

如果有任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-17T13:32:06.817

**允许用户修改代码！？哇！？**

换句话说，我强烈建议不要这样做。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T15:33:02.157

您可以在开发模式下部署您的应用程序...

但是话又说回来，就像 fig-gnuton 说的那样，你不应该那样做，必须有更好的方法来做你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-17T15:38:44.220

当然这就是变量和数据库的用途吗？存储用户首选项并使用这些首选项更改输出到用户浏览器的内容。

模板自定义是指 .html.erb 文件吗？为什么你不能通过使用某种身体类的疯狂来使用 CSS 来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T16:51:48.053

我建议您不要让用户更改应用程序内容。相反，如果您希望用户更改模板，您应该将它们存储在数据库中。就像[browsercms](http://browsercms.org/)和 Radiant 项目一样，仅举几例。