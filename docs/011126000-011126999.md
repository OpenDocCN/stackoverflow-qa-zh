# StackOverflow 问答 11126000-11126999

# html - 标记为 schema.org/Article 的文章的多个部分

> ID：11126000
> 
> 赞同：3
> 
> 时间：2012-06-20T18:37:04.280
> 
> 标签：html, schema.org

假设在 HTML 网页中有一篇文章。目的是使用这样的模式标记内容（我更喜欢[schema.org](http://schema.org)提供的那些）。因此，人们开始按照[schema.org/Article](http://schema.org/Article)来标记内容。关键是，如果文章属于多个部分，是否应该将每个部分放在一个单独的跨度中，如下所示：

```
<span itemprop="articleSection">Section1</span> -
<span itemprop="articleSection">Section2</span> -
<span itemprop="articleSection">Section3</span> 
```

或者相当于让它们处于一个独特的跨度中，如下所示？

```
<span itemprop="articleSection">Section1 - Section2 - Section3</span> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:50:24.347

如果您的文章是许多不同部分的一部分，那么您应该将每个部分标记为 articleSection，就像在第一个示例中一样：

```
<div itemscope itemtype="http://schema.org/Article">
  <span itemprop="name">President to throw ceremonial first pitch at Nationals Park</span>
  by <span itemprop="author">John Smith</span>
  <span itemprop="articleSection">Sports</span> -
  <span itemprop="articleSection">Politics</span> -
  <span itemprop="articleSection">US News</span>
</div> 
```

# forms - struts2 输入迭代

> ID：11126001
> 
> 赞同：2
> 
> 时间：2012-06-20T18:37:05.610
> 
> 标签：forms, struts2, freemarker, textinput

我使用带有freemarker模板的struts2，我想迭代输入并将它们保存在搜索条件中。

在我的行动中，我有

```
private SearchCriteria criteria. 
```

使用方法 setCriteria 和获取标准

```
public void setCriteria(SearchCriteria criteria) {
  this.criteria= criteria;
}
public SearchCriteria getCriteria() {
    return criteria;
} 
```

在标准中，我可以设置 ProductToSearch 对象列表，其中包含 id 和标签。

在我的 ftl 文件中迭代 produtctsToSearch 列表

```
<input id="test1" type="text" name="criteria.produtctToSearch[0].id" value="123" />
<input id="test2" type="text" name="criteria.produtctToSearch[0].label" value="testLabel" />
<input id="test1" type="text" name="criteria.produtctToSearch[1].id" value="123" />
<input id="test2" type="text" name="criteria.produtctToSearch[1].label" value="testLabel" /> 
```

但是在查看了我的条件对象之后，里面的 productsToSearch 列表是空的。

我通过带有数据的 ajax 调用我的操作：`$("#form").serialize();` 序列化值是：

```
criteria.produtctToSearch%5B1%5D.id=123&criteria.produtctToSearch%5B1%5D.label=testLabel&... 
```

你能告诉我我错过了什么吗？

# ios5 - 如何播放来自网络服务的视频，该服务将视频作为数据块返回

> ID：11126003
> 
> 赞同：0
> 
> 时间：2012-06-20T18:37:07.403
> 
> 标签：ios5, xcode4.3

我需要在 iPad 中播放视频，该视频将从网络服务中检索。我不能直接给 MPMoviePlayerController 一个 url 来播放视频。我需要创建一个 SOAP Web 请求以从 Web 服务获取视频。

此 Web 服务以数据块的形式返回请求视频，每个数据块只有几 KB。

我的问题是，我们如何在 iPad 中播放这些数据块。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:33:35.570

尝试使用 WebView。

视图控制器.h

@property (unsafe_unretained, nonatomic) IBOutlet UIWebView *enbededWebView;

视图控制器.m

```
NSString *vedioYoubeString=@"<iframe width=\"560\" height=\"315\" src=\"http://yoururl pass here" frameborder=\"0\" allowfullscreen></iframe>";

//[[self.view addSubview:_enbededWebView]loadHTMLString:vedioYoubeString baseURL:nil];

[_enbededWebView loadHTMLString:vedioYoubeString baseURL:nil]; 
```

# php - 根据帖子大小“拉伸”图像

> ID：11126011
> 
> 赞同：1
> 
> 时间：2012-06-20T18:37:38.510
> 
> 标签：php, html, css, forums

在[魔兽世界论坛上](http://us.battle.net/wow/en/forum/topic/5889309137#1)，他们有一种我想效仿的简洁风格。我不知道该怎么做，所以我决定深入研究他们的样式表并抓取其中的各个部分并将它们放在一起学习如何制作相似的样式。

在浏览样式表时，我发现[了这张](http://us.battle.net/wow/static/images/layout/cms/post_bg.jpg)图片。如您所见，这是他们论坛帖子的背景，但它是固定大小的。 **这是我的问题 - 如果用户的帖子比图片长得多，他们如何动态创建更多长度？**

在一个测试网站上，我抓取了他们用于该部分的相同 CSS。他们将其设置为溢出：隐藏；这样它就不会继续放大图像。自然，复制他们的部分代码会让我在[测试网站](http://www.mylifeiscode.com/index2.php#)上一团糟。

它适用于较小的帖子，因为他们只需要把它剪掉，但我假设他们可能有一个非常薄的（设置宽度，可能是 1 像素高度）.jpg 图像，它们根据大小相乘论坛帖子。

有人知道我该怎么做吗？

PS 当然，我不会使用他们的图像等 - 我现在只是复制它只是为了了解如何制作我自己的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:39:09.227

看起来他们帖子的背景颜色与该图像最底部的颜色相同。这样它只是“淡入”——图像实际上并没有改变大小。

示例 CSS 将是：

```
#yourPostSelector {
  background-image: url('path/to/image.jpg');
  background-position: top left; /* or 'top center' - whatever works for you */
  background-attachment: scroll;
  background-color: #000000; /* pick the bottom color of your background image */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T18:41:06.347

就像是：

CSS：

```
.post 
 {
   background:#1A0F08 url(http://us.battle.net/wow/static/images/layout/cms/post_bg.jpg) top no-repeat; 
 } 
```

（图像和颜色是真正使用的，希望他们不要为此起诉我:)）

就是你要找的。背景图像位于顶部并保持在那里，而容器高度的其余部分具有与图像渐变相同的背景颜色（使用渐变）。所以这只是拉伸图像的错觉，但实际上只是你看不到图像结束的中断

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T18:49:54.027

只需将您使用的背景颜色更改为**#00000***

它应该更改为您使用的背景图像的颜色，基本上是底部，以便完美融合。目前根据您当前的图像，代码将是这样的：-

```
.body {
    background: url("../images/post_bg.jpg") no-repeat scroll 50% 0 #1A0F09;
    clear: both;
    height: 100%;
    margin: 0 auto;
    overflow: hidden;
    width: 990px;
} 
```

更新这个类并检查结果，如果你不明白这里的评论会让你明白。

# python - 读取 CSV 并按列分隔

> ID：11126012
> 
> 赞同：4
> 
> 时间：2012-06-20T18:37:42.223
> 
> 标签：python, list, csv, coordinate

全新的 Python（和一般编程），如果这很简单和/或在我没有找到的地方回答，请随时以典型的论坛方式骚扰我。

我有一堆 CSV，每个包含 10 个 XY 坐标，如下所示：

```
10,5
2,4
5,6 
7,8
9,12
3,45
2,4
6,5
0,3 
5,6 
```

我希望将 X 坐标和 Y 坐标分成两个单独的列表，以便我可以从给定列表中的每个值中减去一个值。例如，从 X 坐标列表中的每个值中减去 5，从 Y 坐标列表中的每个值中减去 3。然后我将获取每个值的 abs() 并找到最小值。一旦找到这些最小值，我想将列表添加在一起，以便将每个值添加到它的对应项

IE) 如果 X 的绝对值类似于

```
4
5
.... 
```

和Y类似

```
6
7
.... 
```

我想添加 4 和 6，然后添加 5 和 7，等等。

为了将它们分开，我尝试了

```
import csv
filein = open("/path/here")
reader = csv.reader(filein, skipinitialspace = True)
listofxys = []
for row in reader:
    listofxys.append(row)

Xs = listofxys.pop(0) # to pop all the X's

Ys = listofxys.pop() # to pop all the Y's 
```

但它提供的不是所有前导值，而是第一个 XY 对。我在这里做错了什么？

最终目标是找到离 XY 坐标最近的点，所以如果这是一个不好的方法，请随时引导我转向另一个方向。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:43:09.563

值得注意的是， 在 Python 中打开文件时应该尝试使用[该`with`语句。](http://preshing.com/20110920/the-python-with-statement-by-example)这既更具可读性，又消除了文件未关闭的可能性（即使发生异常）。

你的实际问题在于你没有做你想做的事。

```
reader = csv.reader(filein, skipinitialspace = True)
listofxys = []
for row in reader:
    listofxys.append(row) 
```

所有这一切都是`reader = list(csv.reader(filein, skipinitialspace = True))`以一种非常低效的方式进行的。

您想要做的是使用[内置函数](http://docs.python.org/library/functions.html#zip)[获取`zip()`](http://docs.python.org/library/functions.html#zip)一对列表并将其转换为两个列表。您可以使用星号运算符执行此操作：

```
import csv

with open("test") as filein:
    reader = csv.reader(filein, skipinitialspace = True)
    xs, ys = zip(*reader)

print(xs)
print(ys) 
```

这使：

```
('10', '2', '5', '7', '9', '3', '2', '6', '0', '5')
('5', '4', '6', '8', '12', '45', '4', '5', '3', '6') 
```

请注意这些值是字符串的事实。如果您想将它们作为数字，您将需要使用[`csv.QUOTE_NONNUMERIC`](http://docs.python.org/library/csv.html#csv.QUOTE_NONNUMERIC)，例如：`reader = csv.reader(filein, quoting=csv.QUOTE_NONNUMERIC, skipinitialspace = True)`

这使：

```
(10.0, 2.0, 5.0, 7.0, 9.0, 3.0, 2.0, 6.0, 0.0, 5.0)
(5.0, 4.0, 6.0, 8.0, 12.0, 45.0, 4.0, 5.0, 3.0, 6.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:43:37.277

听起来您正在寻找 zip 功能，记录在这里：

[http://docs.python.org/library/functions.html#zip](http://docs.python.org/library/functions.html#zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T17:49:34.137

```
 import os,csv, numpy, scipy
    from numpy import *
    f= open('some.csv', 'rb') 
    reader = csv.reader(f, delimiter=',')
    header = reader.next()
    zipped = zip(*reader)
    print( zipped[1] ) # is the 2nd column of the csv file 
```

高温高压

# python - wxListCtrl 无法正确显示

> ID：11126015
> 
> 赞同：0
> 
> 时间：2012-06-20T18:37:53.260
> 
> 标签：python, wxpython

帮助！

我是一名非 GUI 程序员，正在尝试使用 wxPython 编写一个简单的（！）程序。

我已经在网上阅读了所有可以阅读的内容，但是我总体上缺乏 GUI 经验大概是导致我看不到问题所在。

简而言之，我想要一个带有多个标签的 wxNotebook 窗口。当然，每个选项卡都有自己的子小部件。我设想有一个 wxListCtrl（如我的代码中所示）或可能有一个 wxGrid 控件，以及几个按钮。

这是我的“EmployeesPanel”类。当我运行它时，我看到一个必须代表 listctrl 的小方块，但对于我来说，我无法弄清楚如何让它看起来正确。当然，我也有可能在其他一些领域离基地很远。

任何关于我做错了什么的帮助将不胜感激。

这是代码：

```
import wx
import sys

employees = [('Earl Boffo', 'Software'), ('Mildred Plotka', 'Software'), ('Sugar Kane', 'QA')]

classes = [('Python'), ('Java'), ('C#')]

class EmployeesPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        # create some sizers 
        mainSizer = wx.BoxSizer(wx.VERTICAL)
        grid = wx.GridBagSizer(hgap=5, vgap=5)

        #hSizer = wx.BoxSizer(wx.HORIZONTAL|wx.EXPAND)
        hSizer = wx.BoxSizer(wx.HORIZONTAL)

        panel = wx.Panel(self, -1)

        self.list = wx.ListCtrl(panel, size=(100,100), style=wx.LC_REPORT)

        self.list.InsertColumn(0, 'Name')
        self.list.InsertColumn(1, 'Group')

        for i in employees:
            index = self.list.InsertStringItem(sys.maxint, i[0])
            self.list.SetStringItem(index, 1, i[1])

        # A button
        self.button = wx.Button(self, label="Exit")
        self.Bind(wx.EVT_BUTTON, self.OnClick,self.button)
        self.list.Show(True)

        # add the listctrl widget to the grid
        grid.Add(self.list, pos=(0,0), flag=wx.EXPAND|wx.ALL)

        # add the button to the grid
        grid.Add(self.button, pos=(1,0))

        # add a spacer to the sizer
        grid.Add((10, 40), pos=(1,1))

        # add grid to hSizer
        hSizer.Add(grid, 0, wx.ALL, 5)

        # add hSizer to main (v) sizer
        mainSizer.Add(hSizer, 0, wx.ALL, 5)
        self.SetSizerAndFit(mainSizer)
        self.Show()

    def EvtComboBox(self, event):
        self.logger.AppendText('EvtComboBox: %s\n' % event.GetString())
    def OnClick(self,event):
        sys.exit(3)

app = wx.App(False)
frame = wx.Frame(None, title="Training Tracker", size=(700,500))
nb = wx.Notebook(frame)

nb.AddPage(EmployeesPanel(nb), "Employees")
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:36:10.410

欢迎来到 wxPython！一旦你掌握了它，它实际上会很有趣。我几乎从不使用网格尺寸器，因为它们对于像这样的简单布局来说只是一种痛苦。如果您有一个类似网格的界面，并且没有跨单元格的控件，那就太好了。否则，我几乎总是使用相互嵌套的 BoxSizer。我大大简化了您的代码以显示这两个小部件。目前列表控件仅水平拉伸。如果您也需要它垂直移动，则在 sizer.Add 部分中将比例从 0 更改为 1。

```
import wx
import sys

employees = [('Earl Boffo', 'Software'), ('Mildred Plotka', 'Software'), ('Sugar Kane', 'QA')]

classes = [('Python'), ('Java'), ('C#')]

class EmployeesPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        # create some sizers 
        mainSizer = wx.BoxSizer(wx.VERTICAL)

        self.list = wx.ListCtrl(self, size=(100,100), style=wx.LC_REPORT)

        self.list.InsertColumn(0, 'Name')
        self.list.InsertColumn(1, 'Group')

        for i in employees:
            index = self.list.InsertStringItem(sys.maxint, i[0])
            self.list.SetStringItem(index, 1, i[1])

        # A button
        self.button = wx.Button(self, label="Exit")
        self.Bind(wx.EVT_BUTTON, self.OnClick,self.button)

        mainSizer.Add(self.list, 0, wx.EXPAND|wx.ALL, 5)
        mainSizer.Add(self.button, 0, wx.ALL, 5)

        self.SetSizer(mainSizer)
        self.Show()

    def EvtComboBox(self, event):
        self.logger.AppendText('EvtComboBox: %s\n' % event.GetString())
    def OnClick(self,event):
        sys.exit(3)

app = wx.App(False)
frame = wx.Frame(None, title="Training Tracker", size=(700,500))
nb = wx.Notebook(frame)

nb.AddPage(EmployeesPanel(nb), "Employees")
frame.Show()
app.MainLoop() 
```

我也认为这些文章可能会对您有所帮助：

*   wxPython：[wx.ListCtrl 提示和技巧](http://www.blog.pythonlibrary.org/2011/01/04/wxpython-wx-listctrl-tips-and-tricks/)
*   wxPython：[使用 ObjectListView 而不是 ListCtrl](http://www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/)
*   [http://wiki.wxpython.org/ListControls](http://wiki.wxpython.org/ListControls)

# android - 如何从线程中更改 TextViews 文本？

> ID：11126022
> 
> 赞同：0
> 
> 时间：2012-06-20T18:38:30.820
> 
> 标签：android

我正在尝试编写代码以每秒拉服务器以获取更新的消息。然后消息会显示在文本视图中。如果我不更改文本视图中的文本，它运行良好。如果我尝试更改线程上的 textview，它将崩溃。如果我没有在线程上更改它可以正常工作。

我假设线程无法访问主线程内存？如何使用刚刚通过 Internet 加载的文本在视图中设置文本？

在下面的代码中，我有一个线程在睡眠中执行无限循环。它调用一个名为 SendMessage 的方法。发送消息通过互联网以文本形式加载，最后尝试使用它更新视图。发生这种情况时会导致异常。

代码：

```
public class cChat extends cBase  implements OnClickListener {
    /** Called when the activity is first created. */
      TextView mUsers; 
      TextView mComments; 
      int i=0;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.chat);

            mUsers=( TextView) findViewById(R.id.viewusers);;
            mComments=( TextView) findViewById(R.id.viewchats);;

          Thread thread = new Thread()
          {
              @Override
              public void run() {
                  try {
                      int t=0;
                      while(true) 
                      {
                          SendMessage();
                          sleep(1000*5);
                          t++;
                      }
                  } catch (InterruptedException e) {
                      e.printStackTrace();
                  }
              }
          };

          thread.start();

        }

       public void onClick(View v) {

           } // end function

        // send a uypdate message to chat server 
        // return reply in string
        void SendMessage()
        {

            try {

            URL url = new URL("http://50.63.66.138:1044/update");
               System.out.println("make connection");

               URLConnection conn = url.openConnection();
               // set timeouts to 5 seconds
               conn.setConnectTimeout(1000*5);
               conn.setReadTimeout(5*1000);
               conn.setDoOutput(true);
               BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

            //   String line;
               String strUsers=new String("");
               String strComments=new String("");
               String line=new String();
               int state=0;
               while ((line= rd.readLine()  ) != null) {
                 switch(state){
                 case 0:
                   if ( line.contains("START USER"))
                     state=1;
                   if ( line.contains("START COMMENTS"))
                     state=2;
                   break;
                 case 1:
                   if ( line.contains("END USER"))
                         state=0;
                   else
                   {
                   strUsers+=line;
                   strUsers+="\n";
                   }
                   break;
                 case 2:
                       if ( line.contains("END COMMENTS"))
                             state=0;
                       else {
                       strComments+=line;
                       strComments+="\n";
                       }
                       break;
                 } // end switch   
               } // end loop

      // the next line will cause a exception
               mUsers.setText(strUsers);
               mComments.setText(strComments);

        } catch (Exception e) {
             i++; // use this to see if it goes here in debugger  
            //   System.out.println("exception");
           //    System.out.println(e.getMessage());
           }

        } // end methed
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:41:43.023

使用 runOnUiThread 作为

```
 YOUR_CURRENT_ACTIVITY.this.runOnUiThread(new Runnable() {

         @Override
         public void run() {
         // the next line will cause a exception
           mUsers.setText(strUsers);
           mComments.setText(strComments);
            //....YOUR UI ELEMENTS
         }
        }); 
```

**编辑：** 见文档[runOnUiThread](http://developer.android.com/reference/java/lang/Runnable.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:44:37.680

您不能从与用于创建它的线程（UI 线程）不同的线程中触摸 UI 小部件。但是，如果您有对 的引用`Activity`，您可以简单地执行以下操作：

```
activity.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        mUsers.setText(strUsers);
        mComments.setText(strComments);
    }
}); 
```

这需要`strUsers`匿名类可以访问。为此，您可以简单地执行以下操作：

```
final String finalUseres = strUsers; 
```

并`finalUsers`在`run()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:45:15.453

```
the Andoid UI toolkit is not thread-safe. So, you  
must not manipulate your UI from a worker thread 
```

为了解决这个问题，Android 提供了几种从其他线程访问 UI 线程的方法。以下是可以提供帮助的方法列表：

*   [Activity.runOnUiThread（可运行）](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)
*   [View.post（可运行）](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)
*   [View.postDelayed（可运行，长）](http://developer.android.com/reference/android/view/View.html#postDelayed%28java.lang.Runnable,%20long%29)

你也可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

请参阅[本教程关于 android 中的进程和线程](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#Threads)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:47:55.083

您可以使用处理程序将任务（Runnables）发布到 UI/主线程：

```
private Handler handler = new Handler();

//...

Thread thread = new Thread()
{
@Override
public void run() {
    try {
        int t=0;
        while(true) 
        {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    SendMessage();
                }
            });

            sleep(1000*5);
            t++;
        }
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:48:24.843

尝试使用 a`Service`持续将数据拉/发送到服务器。这将减少 UI 线程的负载。

# linq - 在 linq pad 中回滚插入/更新/删除？

> ID：11126025
> 
> 赞同：9
> 
> 时间：2012-06-20T18:38:40.927
> 
> 标签：linq, rollback, linqpad

我找到[了这篇](http://www.squaredroot.com/2007/12/05/addupdatedelete-with-linqpad/)关于如何使用 linq pad 插入、更新和删除的文章，但它没有提到任何关于回滚的内容。

是否可以在 linqpad 中回滚？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T05:32:40.797

是的。你可以做：

```
using (TransactionScope scope = new TransactionScope()) {
  // Put the operations that you want to protect in a transaction here.

  if (you_want_to_commit) {
    scope.Complete();
  }
  // Otherwise, it'll roll back when you exit the using block.
} 
```

# c - 在 Linux 内核空间中使用 MD5

> ID：11126027
> 
> 赞同：1
> 
> 时间：2012-06-20T18:38:48.657
> 
> 标签：c, linux, cryptography

我正在尝试使用 md5 算法（md5.h 和 md5.c）的内核空间实现。事实证明，md5.h 没有声明 md5.c 中的函数，所以我不能简单地将 md5.h 包含到我的 c 文件中。我还想避免更改 md5.h 来声明函数，因为这可能会产生意想不到的后果。还有其他方法可以在内核空间中使用 md5 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:42:22.830

Use [Crypto API](https://stackoverflow.com/questions/3869028/how-to-use-cryptoapi-in-the-linux-kernel-2-6) instead of rolling your own.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-23T12:54:30.947

请注意，**wande chen**发布的代码会导致内核堆损坏。

> 结构 shash_desc *desc;
> 
> desc = kmalloc(sizeof(*desc), GFP_KERNEL);
> 
> desc->tfm = crypto_alloc_shash("md5", 0, CRYPTO_ALG_ASYNC);

这是因为 md5 引擎将使用**struct shash_desc 之后**的内存来存储 md5 上下文。

可以在[这里](https://elixir.bootlin.com/linux/latest/source/fs/cifs/misc.c#L924)找到分配**struct shash_desc**的正确方法。

> *shash = crypto_alloc_shash(name, 0, 0);
> 
> 大小 = sizeof(struct shash_desc) + crypto_shash_descsize(*shash);
> 
> *sdesc = kmalloc(大小, GFP_KERNEL);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-05T07:58:20.300

```
struct sdesc {
    struct shash_desc shash;
    char ctx[];
};

static struct sdesc *init_sdesc(struct crypto_shash *alg)
{
    struct sdesc *sdesc;
    int size;

    size = sizeof(struct shash_desc) + crypto_shash_descsize(alg);
    sdesc = kmalloc(size, GFP_KERNEL);
    if (!sdesc)
        return ERR_PTR(-ENOMEM);
    sdesc->shash.tfm = alg;
    return sdesc;
}

static int calc_hash(struct crypto_shash *alg,
             const unsigned char *data, unsigned int datalen,
             unsigned char *digest)
{
    struct sdesc *sdesc;
    int ret;

    sdesc = init_sdesc(alg);
    if (IS_ERR(sdesc)) {
        pr_info("can't alloc sdesc\n");
        return PTR_ERR(sdesc);
    }

    ret = crypto_shash_digest(&sdesc->shash, data, datalen, digest);
    kfree(sdesc);
    return ret;
}

static int do_md5(const unsigned char *data, unsigned char *out_digest)
{
    struct crypto_shash *alg;
    char *hash_alg_name = "md5";
    unsigned int datalen = strlen(data); // remove the null byte

    alg = crypto_alloc_shash(hash_alg_name, 0, 0);
    if(IS_ERR(alg)){
        pr_info("can't alloc alg %s\n", hash_alg_name);
        return PTR_ERR(alg);
    }

    unsigned char hash[32];
    calc_hash(alg, data, datalen, hash);

    // Very dirty print of 8 first bytes for comparaison with sha256sum
    printk(KERN_INFO "HASH(%s, %i): %02x%02x%02x%02x%02x%02x%02x%02x\n",
          data, datalen, hash[0] & 0xFFu, hash[1] & 0xFFu, hash[2] & 0xFFu, hash[3] & 0xFFu, hash[4] & 0xFFu, 
          hash[5] & 0xFFu, hash[6] & 0xFFu, hash[7] & 0xFFu);

    char c[3];
    for (int i = 0; i < 16; i++)
    {
        sprintf( c, "%02x", hash[i] & 0xFFu);
        memcpy(out_digest+i*2, c, 2);
    }

    crypto_free_shash(alg);
    return 0;
}

tested. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-23T08:42:04.587

```
#include <crypto/hash.h>

bool md5_hash(char *result, char* data, size_t len){
    struct shash_desc *desc;
    desc = kmalloc(sizeof(*desc), GFP_KERNEL);
    desc->tfm = crypto_alloc_shash("md5", 0, CRYPTO_ALG_ASYNC);

    if(desc->tfm == NULL)
        return false;

    crypto_shash_init(desc);
    crypto_shash_update(desc, data, len);
    crypto_shash_final(desc, result);
    crypto_free_shash(desc->tfm);

    return true;
} 
```

# c# - 动态添加的下拉列表不会触发 SelectedIndexChanged 事件

> ID：11126029
> 
> 赞同：3
> 
> 时间：2012-06-20T18:38:55.593
> 
> 标签：c#, asp.net

我看到了很多关于这个话题的东西，但我找不到解决方案。我在一个事件中添加了许多下拉列表，但它们没有触发 SelectedIndexChanged 事件。这是 drplist 创建者代码：

```
foreach (var row in cmdSelectCats.ExecuteReader())
{
    var id = row["ProductCategoryID"].ToString();

    var dropDownStatus = new DropDownList {ID = "DrpStatus-" + id};

    dropDownStatus.Items.Add(new ListItem("Aktif", "1"));
    dropDownStatus.Items.Add(new ListItem("Pasif", "2"));

    dropDownStatus.AutoPostBack = true; 
    dropDownStatus.SelectedIndexChanged += Status_SelectedIndexChanged;

    var tableCell = new TableCell();
    tableCell.Controls.Add(dropDownStatus);
    dropDownStatus.SelectedValue = row["ProductCategoryStatusID"].ToString();
    tableRow.Cells.Add(tableCell);
    TblCatList.Rows.Add(tableRow);
} 
```

当然还有我的活动：

```
public void Status_SelectedIndexChanged(object sender, EventArgs e)
{
    //DO SOMETHING
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-20T19:46:54.413

这是一个常见问题，它与页面生命周期有关：

看看以下问题：

[按钮数组上的单击事件](https://stackoverflow.com/q/11061675/1268570)

[点击事件后按钮数组消失](https://stackoverflow.com/q/11061754/1268570)

[动态创建一个 ImageButton](https://stackoverflow.com/q/11061872/1268570)

现在创建动态控件时要记住的基本步骤是：

*   当您不使用母版页时，应在`PreInit`事件中创建动态控件，如果是，则在`Init`事件中创建控件
*   避免在这些事件中设置可以在每个帖子中更改的属性，因为当应用视图状态时（在帖子事件中），这些属性将被覆盖
*   **每次发布页面时都必须创建**动态控件，避免这种情况`if(!this.IsPostBack) this.CreatemyDynamicControls();`
*   当您在`PreInit`or`Init`事件中创建控件时，它们的状态将在发布事件中自动设置，这意味着`LoadComplete`即使您在每个帖子中再次创建它们，即使您没有明确设置，您的控件也会包含它们的状态他们的状态。*请注意，当您处理在设计时创建的控件时，此行为是不同的，在这种情况下，已设置状态的事件是 Load 事件*
*   事件订阅应该在 之前发生，`PageLoadComplete`否则它们将不会被引发

考虑来自 MSDN 的以下描述

> 如果控件是在运行时动态创建或在数据绑定控件的模板中以声明方式创建的，则它们的事件最初不会与页面上其他控件的事件同步。例如，对于在运行时添加的控件，Init 和 Load 事件在页面生命周期中发生的时间可能比以声明方式创建的控件的相同事件要晚得多。因此，从它们被实例化的那一刻起，动态添加的控件和模板中的控件一个接一个地引发它们的事件，直到它们赶上它被添加到 Controls 集合中的事件。

以上对我来说不是很清楚，但我发现了以下内容。以下`TextBox`是在设计时创建的

```
 protected void Page_PreInit(object sender, EventArgs e)
    {
        this.txtDesignTextBox1.Text = "From PreInit";
        this.txtDesignTextBox1.Text += DateTime.Now.ToString();
    }

    protected void Page_Init(object sender, EventArgs e)
    {
        this.txtDesignTextBox2.Text = "From Init";
        this.txtDesignTextBox2.Text += DateTime.Now.ToString();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        this.txtDesignTextBox3.Text = "From Load";
        this.txtDesignTextBox3.Text += DateTime.Now.ToString();
    } 
```

乍一看，您可能会认为在每篇文章中，所有文本框都使用当前日期进行更新，但事实并非如此，因为它们是在设计时创建的，它们严格遵循 ASP.Net 页面生命周期，这意味着**它们的状态在 PreInit 和 Init 事件之后被覆盖**，只有`txtDesignTextBox3`在每个帖子中更新，因为它的`Text`属性在设置**视图状态后**更新（在`Load`事件中）。

但是**动态**控件的行为是不同的，记住 MSDN 的描述：

> 对于在运行时添加的控件，Init 和 Load 事件可能会在页面生命周期的后期发生

考虑以下：

```
 protected void Page_PreInit(object sender, EventArgs e)
    {
        var textBox = new TextBox { Text = "From PreInit", Width = new Unit("100%") };
        textBox.Text += DateTime.Now.ToString();
        this.myPlaceHolder.Controls.Add(textBox);
    }

    protected void Page_Init(object sender, EventArgs e)
    {
        var textBox = new TextBox { Text = "From Init", Width = new Unit("100%") };
        textBox.Text += DateTime.Now.ToString();
        this.myPlaceHolder.Controls.Add(textBox);
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        var textBox = new TextBox { Text = "From Load", Width = new Unit("100%") };
        textBox.Text += DateTime.Now.ToString();
        this.myPlaceHolder.Controls.Add(textBox);
    } 
```

在这种情况下，控件的行为略有不同，在这种情况下，在每个帖子中，即使在事件中创建**的控件也不会更新控件**`Load`

原因是它们的生命周期事件发生在页面生命周期的后期，这意味着**即使在 Load 事件之后它们的状态也会被覆盖**

为了解决这个问题，你可以使用`LoadComplete`事件，在这个事件中你可以改变动态控件的状态：

```
 protected void Page_LoadComplete(object sender, EventArgs e)
    {
        var textBox = new TextBox { Text = "From LoadComplete", Width = new Unit("100%") };
        textBox.Text += DateTime.Now.ToString();
        this.myPlaceHolder.Controls.Add(textBox);
    } 
```

在这种情况下，状态将在每个帖子中更新。

但是，考虑到您应该在事件之前订阅动态控件事件，`LoadComplete`否则它们将不会被引发。

*...我知道我讨厌这种行为，这就是我喜欢 MVC 的原因*

作为在设计时创建的控件的快速参考：注意`LoadViewState`方法是如何在and事件**之后**但在事件之前调用的。该事件被认为是*稳定*的，因为在此事件中您可以访问控件的视图状态。另请注意，该方法表示导致回发的控制事件，可以是，，，等，此事件在事件*之后处理*`PreInit``Init``Load``Load`*`RaisePostBackEvent``SelectedIndexChanged``Click`*`Load`**

 **![在此处输入图像描述](../Images/7505aea2b05c87001a1f39b6c36b041c.png)

有关完整的详细规范，请阅读[MSDN 页面生命周期文档](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:51:06.450

我通常看到这是由页面生命周期问题引起的。如果控件仅在触发事件时创建，那么当您的索引更改事件触发时，控件不存在以将其绑定到回发。

例子：

1.  MyEvent 触发。下拉菜单已创建。指定的事件处理程序。
2.  已触发索引更改事件。页面重新加载。未找到下拉菜单，无法触发。

您必须确保在 .NET 尝试处理事件之前创建下拉列表。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-20T20:31:07.620

您缺少：
1- 覆盖 SaveViewState
2- 覆盖 LoadViewState

我为这个问题提供了一个示例代码。我测试它。这是工作。

ASPX：

```
<form id="form1" runat="server">
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
<div id="myDiv" runat="server">
</div>
<asp:Label ID="lblDescription" runat="server"></asp:Label>
</form> 
```

代码背后：

```
public partial class Default : System.Web.UI.Page
    {
        private List<string> values = new List<string>();

        protected void Page_Load(object sender, EventArgs e)
        {

        }        

        protected override object SaveViewState()
        {
            object baseState = base.SaveViewState();            
            object[] allStates = new object[2];
            allStates[0] = baseState;
            allStates[1] = values;
            return allStates;
        }

        protected override void LoadViewState(object savedState)
        {
            object[] myState = (object[])savedState;
            if (myState[0] != null)
                base.LoadViewState(myState[0]);
            if (myState[1] != null)
            {
                values = (List<string>)myState[1];
                MyRender();
            }
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < 10; i++)
            {
                DropDownList ddl = new DropDownList();
                ddl.ID = "ClientID" + i;

                ddl.Items.Add("Item 1");
                ddl.Items.Add("Item 2");
                ddl.AutoPostBack = true;                
                values.Add(ddl.SelectedValue);

                myDiv.Controls.Add(ddl);
            }
        }

        private void MyRender()
        {
            for (int i = 0; i < values.Count; i++)
            {
                DropDownList ddl = new DropDownList();
                ddl.ID = "ClientID" + i;

                ddl.Items.Add("Item 1");
                ddl.Items.Add("Item 2");
                ddl.AutoPostBack = true;
                ddl.SelectedIndexChanged += new EventHandler(ddl_SelectedIndexChanged);

                myDiv.Controls.Add(ddl);
            }
        }

        void ddl_SelectedIndexChanged(object sender, EventArgs e)
        {
            lblDescription.Text = ((DropDownList)sender).ID + ": Selected Index Changed";
        }
    } 
```**

# postgresql - 带有时区的 PostgreSQL date()

> ID：11126037
> 
> 赞同：67
> 
> 时间：2012-06-20T18:39:19.267
> 
> 标签：postgresql, datetime, timezone, postgresql-9.1, rails-postgresql

我在从 Postgres 中正确选择日期时遇到问题 - 它们以 UTC 格式存储，但无法使用 Date() 函数正确转换。

如果超过太平洋标准时间下午 4 点，将时间戳转换为日期会给我错误的日期。

`2012-06-21`应该`2012-06-20`在这种情况下。

列`starts_at`数据类型是`timestamp without time zone`. 这是我的查询：

不转换为 PST 时区：

```
Select starts_at from schedules where id = 40;

      starts_at      
---------------------
 2012-06-21 01:00:00 
```

转换给出了这个：

```
Select (starts_at at time zone 'pst') from schedules where id = 40;
        timezone        
------------------------
 2012-06-21 02:00:00-07 
```

但两者都不会转换为时区中的正确日期。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-11-18T00:21:01.390

基本上你想要的是：

```
$ select starts_at AT TIME ZONE 'UTC' AT TIME ZONE 'US/Pacific' from schedules where id = 40 
```

我从这篇文章中得到的解决方案如下，这是纯金！！！它非常清楚地解释了这个重要的问题，如果您想更好地了解 pstgrsql TZ 管理，请阅读它。

[在本地时间表示没有区域的 PostgreSQL 时间戳](https://icu.iorahealth.com/blog/2012/05/07/expressing-postgresql-timestamps-without-zones-in-local-time/)

这是正在发生的事情。首先，您应该知道'PST 时区比 UTC 时区晚 8 小时，因此例如 2014 年 1 月 1 日下午 4:30 PST（2014 年 1 月 1 日星期三 16:00:30 -0800）相当于 2014 年 1 月 2 日 00:30上午 UTC（2014 年 1 月 2 日星期四 00:00:30 +0000）。PST 下午 4:00 之后的任何时间都会滑到第二天，解释为 UTC。

此外，正如 Erwin Brandstetter 上面提到的，postresql 有两种时间戳数据类型，一种有时区，一种没有。如果您的时间戳包含时区，那么一个简单的：

```
$ select starts_at AT TIME ZONE 'US/Pacific' from schedules where id = 40 
```

将工作。但是，如果您的时间戳是无时区的，则执行上述命令将不起作用，您必须首先将您的无时区时间戳转换为带有时区的时间戳，即 UTC 时区，然后再将其转换为您想要的“PST”或“US/”太平洋”（在某些夏令时问题上是相同的。我认为你应该可以接受）。

让我用一个创建无时区时间戳的示例来演示。为方便起见，我们假设我们的本地时区确实是“PST”（如果不是，那么它会变得有点复杂，这对于本解释而言是不必要的）。

说我有：

```
$ select timestamp '2014-01-2 00:30:00' AS a, timestamp '2014-01-2 00:30:00' AT TIME ZONE 'UTC' AS b,  timestamp '2014-01-2 00:30:00' AT TIME ZONE 'UTC' AT TIME ZONE 'PST' AS c, timestamp '2014-01-2 00:30:00' AT TIME ZONE 'PST' AS d 
```

这将产生：

```
"a"=>"2014-01-02 00:30:00"   (This is the timezoneless timestamp)
"b"=>"2014-01-02 00:30:00+00" (This is the UTC TZ timestamp, note that up to a timezone, it is equivalent to the timezoneless one)
"c"=>"2014-01-01 16:30:00" (This is the correct 'PST' TZ conversion of the UTC timezone, if you read the documentation postgresql will not print the actual TZ for this conversion)
"d"=>"2014-01-02 08:30:00+00" 
```

最后一个时间戳是在 postgresql 中将无时区时间戳从 UTC 转换为“PST”的所有混淆的原因。当我们写：

```
timestamp '2014-01-2 00:30:00' AT TIME ZONE 'PST' AS d 
```

我们采用无时区时间戳并尝试将其转换为 'PST TZ（我们间接假设 postgresql 会理解我们希望它从 UTC TZ 转换时间戳，但 postresql 有自己的计划！）。在实践中，postgresql 所做的是它采用无时区时间戳（'2014-01-2 00:30:00）并将其视为已经是“PST”TZ 时间戳（即：2014-01-2 00:30 :00 -0800) 并将其转换为 UTC 时区！！！所以它实际上将它提前 8 小时而不是向后推！因此我们得到 (2014-01-02 08:30:00+00)。

无论如何，最后一个（不直观的）行为是所有混乱的原因。如果您想要更彻底的解释，请阅读文章，实际上我得到的结果与最后一部分的结果有些不同，但总体思路是相同的。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-22T00:02:39.163

我在您的问题中看不到*确切的*类型。`starts_at`您确实应该包含此信息，这是解决方案的关键。我将不得不猜测。

PostgreSQL*总是*在内部存储该类型的 UTC 时间`timestamp with time zone`。输入和输出（显示）调整为当前`timezone`设置或给定时区。的效果[`AT TIME ZONE`](https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT)也会随着基础数据类型的变化而变化。看：

*   [在 Rails 和 PostgreSQL 中完全忽略时区](https://stackoverflow.com/questions/9571392/ignoring-time-zones-altogether-in-rails-and-postgresql/9576170#9576170)

如果您`date`从 type中提取一个[`timestamp [without time zone]`](https://www.postgresql.org/docs/current/datatype-datetime.html)，您将获得当前时区的日期。输出中的日期将与`timestamp`值显示中的相同。

如果您`date`从类型中提取一个[`timestamp with time zone`](https://www.postgresql.org/docs/current/datatype-datetime.html)（`timestamptz`简称），则首先“应用”时区偏移量。您仍然可以获得当前时区的日期，与时间戳的*显示一致。*同一时间点在欧洲部分地区转化为第二天，例如在加利福尼亚时间已超过下午 4 点。要获取某个时区的日期，`AT TIME ZONE`请先申请。

因此，您在问题顶部的描述与您的示例相矛盾。

鉴于这`starts_at`是 a**`timestamp [without time zone]`**并且您的服务器上的时间设置为本地时间。测试：

```
SELECT now(); 
```

它是否与墙上的时钟显示相同的时间？如果是（并且数据库服务器以正确的时间运行），则`timezone`当前会话的设置与您当地的时区一致。如果不是，您可能需要访问`timezone`您`postgresql.conf`或您的客户端中的会话设置。[手册中的详细信息。](https://www.postgresql.org/docs/current/datatype-datetime.html#DATATYPE-TIMEZONES)

请注意，`timezone`偏移量使用了与时间戳文字中显示的相反的**符号**。看：

*   [Postgres 数据库中的特殊时区处理](https://stackoverflow.com/questions/40795645/peculiar-time-zone-handling-in-a-postgres-database/40797123#40797123)

获取您的本地`starts_at`日期

```
SELECT starts_at::date 
```

等于：

```
SELECT date(starts_at) 
```

顺便说一句，您的当地时间现在是 UTC-7，而不是 UTC-8，因为夏令时有效（不是人类更聪明的想法）。

太平洋标准时间 (PST) 通常`timestamp`比 UTC（通用时区）“早”8 小时（值更大），但在夏令时期间（如现在），它可以是 7 小时。这就是为什么在您的示例`timestamptz`中显示的原因。`2012-06-21 02:00:00`**`-07`**该构造`AT TIME ZONE 'PST'`考虑了夏令时。这两个表达式产生不同的结果（一个在冬天，一个在夏天），并且在转换时可能会导致不同的日期：

```
SELECT '2012-06-21 01:00:00'::timestamp AT TIME ZONE 'PST'
     , '2012-12-21 01:00:00'::timestamp AT TIME ZONE 'PST' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-04T16:43:33.067

我知道这是一个旧的，但您可能需要考虑在投射时使用 AT TIME ZONE "US/Pacific" 以避免任何 PST/PDT 问题。所以

```
SELECT starts_at::TIMESTAMPTZ AT TIME ZONE "US/Pacific" 
  FROM schedules 
 WHERE ID = '40'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-06-07T09:35:51.817

```
cast(master.Stamp5DateTime as date) >= '05-05-2019' AND 

cast(master.Stamp5DateTime as date) <= '05-05-2019' 
```

# java - Eclipse 中部署组件和 J2EE 模块依赖关系的区别

> ID：11126044
> 
> 赞同：9
> 
> 时间：2012-06-20T18:39:41.050
> 
> 标签：java, eclipse, jakarta-ee, eclipse-indigo, eclipse-3.5

在为 Java EE 开发人员使用 Eclipse 3.7 Indigo 时，有一个叫做**Deployment Assembly**的东西。我可以在 google 上找到并了解它类似于 **J2EE 模块依赖**项，我们可以在其中选择 jar，并且在 WAR 的情况下它位于 EAR 文件夹或 WEB-INF/lib 中。现在我的疑问是，

我有一个 JavaProject **Dependencies**。我已经通过*类路径*变量添加了所有依赖的罐子。现在**Dependencies** Project 作为依赖项添加到我的 Web 项目**TestWebProject**中。Web 项目的编译是正确的，但是在运行时我得到一个错误，因为没有找到一些 jar。**我可以在一个独立项目的 Deployment Assembly of Dependencies**项目中修复我的包含 jar 。

问题是，为什么我必须在部署程序集中修复 jar，因为首先，它是一个独立项目，其次是如果我没有这个部署程序集，如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T19:05:17.663

> *我可以在 google 上找到并了解它类似于 J2EE 模块依赖项*

在 Eclipse 3.5 之前，它被称为“J2EE 模块依赖项”。在那个版本之后，它被重命名为“部署程序集”。但在 Java EE Web 项目的情况下，它实际上是相同的。

* * *

> *问题是，为什么我必须在部署程序集中修复 jar，因为它是一个独立项目*

Because this way Eclipse will autobuild a JAR file of the project and put in `/WEB-INF/lib` of the web project's deployment. If you don't do that, the JAR isn't available during webapp's runtime, but only during compiletime and Eclipse expects that you've already built and placed it anywhere else in runtime classpath, e.g. server's own `/lib`.

* * *

> *if I would not have this deployment assembly , how could this be fixed?*

Manually build/export the JAR and drop in webapp's own `/WEB-INF/lib` or server's own `/lib`. The "Deployment Assembly" configuration is however more easy and the recommended way.

### See also:

*   [Business Logic Layerin Servlet and JSP](https://stackoverflow.com/questions/3511479/business-logic-layerin-servlet-and-jsp/3511933#3511933)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T19:04:41.493

组装 WAR 时，Eclipse 无法仅通过查看构建路径依赖关系来判断它们是否应该捆绑在 WAR 的 WEB-INF/lib 目录中，或者它们是否是您希望在服务器类路径中可用的东西。需要额外的元数据来区分这些情况。

如果您查看问题视图，您应该会看到许多如下所示的警告：

“类路径条目 [something] 将不会被导出或发布......”

右键单击这些并选择“快速修复”。您将看到一个包含可用修复的对话框。其中一个会说“将关联的类路径条目标记为发布/导出依赖项......”。使用该选项。

以上将对您的 Java 项目的 .classpath 文件进行轻微更改，以标记依赖项以包含在程序集中。通过导出 WAR 文件并检查 WEB-INF/lib 文件夹的内容，您可以在不运行的情况下进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T08:01:34.503

Build path - place your jar's here directly, it will be available for code runtime and compile time.

Deployment assembly - eclipse expects the projects under this path to be bundled and deployed as .jar in web-inf/lib folder. So that it is available for both compile time and run time. If the project is not deployed in deployment assembly then the code is available only for compile time, eclipse won't bundle it and at run-time dependent projects are unavailable to the code.

# javascript - 在 UIWebView 的 div 中找到光标位置的 y 坐标

> ID：11126047
> 
> 赞同：4
> 
> 时间：2012-06-20T18:39:53.207
> 
> 标签：javascript, objective-c, ios, uiwebview

我有一个带有一些基本 html 的 UIWebView，它充当一个简单的编辑器。

```
// in initWithFrame: of UIView subclass.
_editorHTML = [@"<!doctype html>"
                   "<html>"
                   "<head>"
                   "<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">"
                   "<style type=\"text/css\">"
                   "#content { font-family:Arial, Helvetica, sans-serif; font-size:1em; } "
                   "</style>"
                   "<script type=\"text/javascript\">"
                   "function load()"
                   "{"
                   "    window.location.href = 'ready://' + document.body.offsetHeight;"
                   "}"
                   "</script>"
                   "</head>"
                   "<body id=\"bodyDiv\" onload=\"load()\">"
                   "<div id=\"content\" contenteditable=\"true\">%@</div>"
                   "</body>"
                   "</html>" retain];

_webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height)];
_webView.delegate = self;
_webView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
_webView.scrollView.bounces = NO;
[_webView loadHTMLString:[NSString stringWithFormat:_editorHTML, @""] baseURL:[NSURL fileURLWithPath:directory]];

- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];
    if (navigationType == UIWebViewNavigationTypeOther) {
        if ([[url scheme] isEqualToString:@"ready"]) {

            int height = (int)_webView.frame.size.height;
            [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementById('content').style.minHeight = '%dpx'", height - WEBVIEW_DIVHEIGHT_OFFSET]];

            return NO;
        }
    }
    return YES;
} 
```

那么，如何确定我的 div 中的光标位置，以便我可以更新我的 scrollView 以确保内容在 UIKeyboard 上方可见，从而不必让用户手动滚动以保持文本可见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:13:43.573

您可以从选择中获取所选范围并使用其[`getClientRects()`](http://www.w3.org/TR/cssom-view/#the-getclientrects-and-getboundingclientrect-methods)方法。

现场演示：http: [//jsfiddle.net/timdown/xMEjD/](http://jsfiddle.net/timdown/xMEjD/)

代码：

```
function getCaretClientPosition() {
    var x = 0, y = 0;
    var sel = window.getSelection();
    if (sel.rangeCount) {
        var range = sel.getRangeAt(0);
        if (range.getClientRects) {
            var rects = range.getClientRects();
            if (rects.length > 0) {
                x = rects[0].left;
                y = rects[0].top;
            }
        }
    }
    return { x: x, y: y };
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T12:49:02.310

@timdown 有趣的是，您的脚本总是返回 0,0 作为行首。[question] 中的脚本：[浏览器页面中选定文本的坐标](https://stackoverflow.com/questions/6846230/javascript-text-selection-page-coordinates)确实返回正确的 Y 值。

在这里重复以方便搜索：

```
function getSelectionCoords() {
    var sel = document.selection, range;
    var x = 0, y = 0;
    if (sel) {
        if (sel.type != "Control") {
            range = sel.createRange();
            range.collapse(true);
            x = range.boundingLeft;
            y = range.boundingTop;
        }
    } else if (window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount) {
            range = sel.getRangeAt(0).cloneRange();
            if (range.getClientRects) {
                range.collapse(true);
                var rect = range.getClientRects()[0];
                x = rect.left;
                y = rect.top;
            }
        }
    }
    return { x: x, y: y };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-03T14:31:41.140

该解决方案是公认答案的演变。修复了 WebKit 中的 newLine 问题。

```
function getCaretClientPosition() {
    var x = 0, y = 0;
    var sel = window.getSelection();
    if (sel.rangeCount) {

        var range = sel.getRangeAt(0);
        var needsToWorkAroundNewlineBug = (range.startContainer.nodeName.toLowerCase() == 'p'
                                           && range.startOffset == 0);

        if (needsToWorkAroundNewlineBug) {
            x = range.startContainer.offsetLeft;
            y = range.startContainer.offsetTop;
        } else {
            if (range.getClientRects) {
                var rects = range.getClientRects();
                if (rects.length > 0) {
                    x = rects[0].left;
                    y = rects[0].top;
                }
            }
        }
    }
    return { x: x, y: y };
} 
```

# .net-4.0 - Using Configuration Manager

> ID：11126049
> 
> 赞同：1
> 
> 时间：2012-06-20T18:40:05.317
> 
> 标签：.net-4.0, configurationmanager, asna-visual-rpg

some of my web applications write to the disk on the web server. The paths change depending on location, prod and dev, etc. I used to store the paths in web.config under configuration / appSettings like:

```
<add key='PDFOutPutPath'   value='C:\Temporary_Web_Files\PDFTempDocs\'/> 
```

And then get them like this:

path = ConfigurationSettings.AppSettings('PDFOutPutPath')

Now in .Net 4, I get compile warnings about this being depreciated, so I found some instructions telling me to add a configuration file, move my values to it like so:

```
<configuration> 
 <appSetings> 
    <add key='PDFOutPutPath'   value='C:\Temporary_Web_Files\PDFTempDocs\'/>
 </appSettings>
</configuration> 
```

and use configuration manager like so:

ConfigurationManager.AppSettings( 'PDFOutPutPath' )

However, this does not work. I'm not sure if I'm supposed to be using the configuration manager for this or not - If not, where do you put stuff like this? I have System.Configuration referenced, so this in not my issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:47:15.550

因此，您遵循的说明似乎有点误导。

您不需要第二个文件，您应该删除 app.config 文件。您可以将所有配置值放在 web.config 中。只要确保配置项在`<appSetings>`节点中。但是您应该继续在代码中使用 ConfigurationManager 类来访问这些值。

# ruby-on-rails-3 - Rails 3/Devise - 更改密码重置的错误消息

> ID：11126053
> 
> 赞同：2
> 
> 时间：2012-06-20T18:40:16.743
> 
> 标签：ruby-on-rails-3, devise

我正在使用 Rails 3 应用程序，需要调整密码重新发送视图上的错误消息。如果用户输入电子邮件地址并提交，目前，应用程序将显示以下错误消息：

```
Email not found 
```

我需要将此错误消息更改为：

```
We don't have an account with that e-mail address. Maybe you used another address? 
```

我知道您可以在设计 YML 文件中进行调整，但不确定如何执行此操作……有什么建议吗？

**工作代码**

```
class PasswordsController < Devise::PasswordsController
  def create
    user = User.find_by_email(params[:user][:email])

    if user.nil?
      flash.now[:notice] = "We don't have an account with that e-mail address. Maybe you used another address?"
    end

    super
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:47:16.777

您可以尝试使用 before_filter 来检查电子邮件是否存在于数据库中，如果不存在，它会将您重定向到密码重置表单并发出快速通知

# javascript - 可以创建的 vxworks 风印的最大数量是多少？

> ID：11126058
> 
> 赞同：0
> 
> 时间：2012-06-20T18:40:33.003
> 
> 标签：javascript, vxworks

我有一个 vxworks 6.9 嵌入式 Web 与运行 JavaScript 的 FireFox 浏览器对话，在添加了更多风印之后，每个人现在都会在页面上显示此错误：

WindMark(aaa_windmark) 读取尝试失败。错误号：ffffff9a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:09:32.947

vxworks 风印的最大数量仅受可用内存的限制。

重新启动 Windows 计算机并完全重建 VxWorks 项目后，“errno: fffffff9a”上面的错误消失了。

# windows - 有没有办法检查计算机的 AD 组成员资格？

> ID：11126060
> 
> 赞同：2
> 
> 时间：2012-06-20T18:40:36.880
> 
> 标签：windows, powershell, active-directory, active-directory-group

我正在尝试通过 Powershell 检查计算机组成员身份。我希望能够指定某个计算机名称并从 Powershell 脚本中找到该计算机所在的组。我计划在计算机上运行脚本，获取主机名，然后打印出该计算机所在的 AD 组。有没有简单的方法可以做到这一点？

编辑：所以这里的计划是让一台计算机检查它所在的组，然后根据它所在的组分配一台打印机。我们有许多打印机，只有 3 到 4 人使用，但由于分散的性质的用户无法缩减打印机的数量。我正在查看组策略，但不想创建 20 个不同的 GPO。我想用登录/启动脚本来做到这一点。我不确定这是否可行或可行。

编辑＃2：这个编辑真的晚了，但我想如果有人发现它会有所帮助。我们最终在用户>首选项>控制面板>打印机对象上使用了项目级目标。我们在 AD 中为需要访问打印机的每组用户创建了一个帐户。尽管它确实为计算机的第一次登录创建了一个漫长的登录过程，但它仍然有效。我们还启用了 Point-to-Print 限制，以便从服务器安静地加载驱动程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T20:42:05.143

这将为您提供本地计算机的组成员身份（组名）（需要 powershell 2.0）：

```
([adsisearcher]"(&(objectCategory=computer)(cn=$env:COMPUTERNAME))").FindOne().Properties.memberof -replace '^CN=([^,]+).+$','$1' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T06:49:28.333

抱歉，如果我在聚会上迟到了一点，但我还需要找到计算机的组成员身份。经过大量的试验和错误，这对我有用。

```
Get-ADComputer "mycomp" -Properties MemberOf | %{if ($_.MemberOf -like "*group name*") {Write-Host "found"} } 
```

我注意到如果字符串比较在单独的行上，我需要执行以下操作

```
$g=Get-ADGroupMember -Identity "CN=myADgroup,OU=myOU,DC=corp,DC=com" -server corp.com
foreach($mbr in $g) {if($name.MemberOf -like "*mycomp*" -eq $true) {Write-Host "found"}} 
```

不确定，但我想根据成员的数量，测试计算机可能比测试组更快、更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-28T23:58:02.263

gpresult 方法似乎是我能找到准确的唯一方法。查询 AD 不准确，因为计算机可能已添加到组但未重新启动。我相信有人可以浓缩这一点，但它对于我需要看到的东西来说已经足够好了。

```
# Get all active domain servers
$staledate = (Get-Date).AddDays(-90)
$computers = Get-ADComputer -Filter {(OperatingSystem -Like "*Server*") -and (Enabled -eq $True) -and (LastLogonDate -ge $staledate) -and (Modified -ge $staledate) -and (PasswordLastSet -ge $staledate) -and (whenChanged -ge $staledate) -and (Name -notlike "PHXVSSA101A")} | Select name -expandproperty name
$computers = $computers | Where {(Resolve-DNSName $_.name -ea 0) -and (Test-Connection -ComputerName $_.Name -Count 1 -ea 0)} | Sort
# Loop through all active domain servers
Foreach ($computer in $computers)
{
# Pull the gpresult for the current server
$Lines = gpresult /s $computer /v /SCOPE COMPUTER
# Initialize arrays
$cgroups = @()
$dgroups = @()
# Out equals false by default
$Out = $False
# Define start and end lines for the section we want
$start = "The computer is a part of the following security groups"
$end = "Resultant Set Of Policies for Computer"
# Loop through the gpresult output looking for the computer security group section
ForEach ($Line In $Lines)
{
If ($Line -match $start) {$Out = $True}
If ($Out -eq $True) {$cgroups += $Line}
If ($Line -match $end) {Break}
}
# Loop through all the gathered groups and check for Active Directory groups
ForEach ($group in $cgroups)
{
Try {
$check = Get-ADgroup $group -ErrorAction Stop
If ($check) {
$dgroups += $group
}
}
Catch {}
}
# Output server name and any Active Directory groups it is in
$computer
$dgroups
# End of computers loop
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-03T15:17:35.657

> 尝试运行 gpresult /V 并在“安全组”下检查

您还可以`gpresult /scope computer /v`在命令提示符下尝试（提升为管理员）以获得更具体的结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-29T09:36:31.910

下面是一个 LDAP 查询，以递归方式查找计算机是否在组中：

```
(((objectClass=computer)(sAMAccountName=COMPUTERNAME$))(memberof:1.2.840.113556.1.4.1941:=DistinguishedNameOfGroup)) 
```

更多信息：http: [//justanotheritblog.co.uk/2016/01/27/recursively-check-if-a-usercomputer-is-a-member-of-an-ad-group-with-powershell-2-0 /](http://justanotheritblog.co.uk/2016/01/27/recursively-check-if-a-usercomputer-is-a-member-of-an-ad-group-with-powershell-2-0/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-09T15:25:19.173

要检查计算机自己的组成员视图，您可以运行：

```
(New-Object System.Security.Principal.WindowsPrincipal("$env:computername$")).IsInRole('Example Group')
True 
```

在重新启动计算机之前，将计算机退出`Example Group`不会影响上述输出。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-08-27T14:02:28.710

试试这个 DOS 命令，这将返回这台计算机所属的所有本地组：

```
net localgroup 
```

# c++ - Is this a circular dependency

> ID：11126061
> 
> 赞同：0
> 
> 时间：2012-06-20T18:40:38.410
> 
> 标签：c++, circular-dependency

```
//A.h  
class B;  
class A{  
  void Stuff();
  B* FOO():  
  B* _b;
}  
extern A* A_A();

//A.cpp  
#include "A.h"  
#include "B.h" 
B* A::FOO(){
  return(_b);
} 

//B.h
class B{
 void BOO();
}

//B.cpp
#include "A.h"
#include "B.h" 
void B::BOO(){
 A_A->Stuff();
} 
```

Here there is a cross include of the .h files from the .cpp files. So they both depend on one another. Though using the forward declaration and pointers it seems like that would break the cycle. So my question is: Is this a circular dependency? Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:10:14.067

当`A`依赖于`B`，反之亦然，根据定义，你有一个循环依赖。您可以让它与前向声明一起工作的事实并没有改变这一事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:14:32.493

您已经使用前向声明破坏了循环*包含*链，但您仍然在 A 和 B 之间存在逻辑循环依赖关系。它们每个都需要另一个类提供的东西。

关于您上面的评论，您永远不应该为向您的团队提出问题而感到羞耻。如果发现你错了，那么你就学到了一些东西。

# c# - How to print a docx to a specific printer using Microsoft.Office.Interop.Word.Document.PrintOut()

> ID：11126065
> 
> 赞同：8
> 
> 时间：2012-06-20T18:41:06.523
> 
> 标签：c#, ms-word, office-interop

This seems like such a simple need, but for some reason I cannot find how I can accomplish this. I have code like this:

```
Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();
MemoryStream documentStream = getDocStream();
FileInfo wordFile = new FileInfo("c:\\test.docx");
object fileObject = wordFile.FullName;
object oMissing = System.Reflection.Missing.Value;
Microsoft.Office.Interop.Word.Document doc = wordInstance.Documents.Open(ref fileObject, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);
doc.Activate();
doc.PrintOut(oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing); 
```

I need to have a config setting drive which printer and tray are used. After searching around I found Microsoft.Office.Interop.Word.Application.ActivePrinter which is a settable string property that the documentation says takes "the name of the active printer", but I don't know what it means for a printer to the the "Active Printer", especially when I have two of them. How can this be accomplished?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T22:42:21.457

**TL;DR**您无法打印到特定的打印机。您必须将默认打印机更改为您想要使用的打印机。然后正常打印。

自从我们第一次在该领域开展工作以来，情况可能发生了巨大变化，但我们无法找到任何方法来打印到特定的打印机。因此，我们所做的就是将系统的默认打印机更改为我们想要的，在该计算机上打印我们想要的所有文档，然后将其更改回原来的样子。（实际上，我们放弃了将其更改回来，因为没有其他任何东西期待任何特定的默认打印机，所以没关系）。

简短的回答：

```
Microsoft.Office.Interop.Word._Application _app = [some valid COM instance];
Microsoft.Office.Interop.Word.Document doc = _app.Documents.Open(ref fileName, ...);
doc.Application.ActivePrinter = "name of printer";
doc.PrintOut(/* ref options */); 
```

但是，我们发现这非常不可靠！请阅读以获得更多详情：

如果您还没有这样做，我强烈建议您构建自己的包装类来处理`_Document`和`_Application`. 现在可能不像以前那么糟糕（`dynamic`对我们来说不是一个选择），但这仍然是一个好主意。您会注意到其中缺少某些美味的代码......我试图专注于与您所要求的内容相关的代码。此外，这个`DocWrapper`类是代码的许多独立部分的合并——请原谅这种混乱。最后，如果您认为异常处理很奇怪（或者只是抛出异常的糟糕设计）——请记住，我正在尝试将许多地方的部分代码放在一起（同时也忽略了我们自己的自定义类型）。阅读代码中的注释，它们很重要。

```
class DocWrapper
{
  private const int _exceptionLimit = 4;

  // should be a singleton instance of wrapper for Word
  // the code below assumes this was set beforehand
  // (e.g. from another helper method)
  private static Microsoft.Office.Interop.Word._Application _app;

  public virtual void PrintToSpecificPrinter(string fileName, string printer)
  {
    // Sometimes Word fails, so needs to be restarted.
    // Sometimes it's not Word's fault.
    // Either way, having this in a retry-loop is more robust.
    for (int retry = 0; retry < _exceptionLimit; retry++)
    {
      if (TryOncePrintToSpecificPrinter(fileName, printer))
        break;

      if (retry == _exceptionLimit - 1) // this was our last chance
      {
        // if it didn't have actual exceptions, but was not able to change the printer, we should notify somebody:
        throw new Exception("Failed to change printer.");
      }
    }
  }

  private bool TryOncePrintToSpecificPrinter(string fileName, string printer)
  {
    Microsoft.Office.Interop.Word.Document doc = null;

    try
    {
      doc = OpenDocument(fileName);

      if (!SetActivePrinter(doc, printer))
        return false;

      Print(doc);

      return true; // we did what we wanted to do here
    }
    catch (Exception e)
    {
      if (retry == _exceptionLimit)
      {
        throw new Exception("Word printing failed.", e);
      }
      // restart Word, remembering to keep an appropriate delay between Quit and Start.
      // this should really be handled by wrapper classes
    }
    finally
    {
      if (doc != null)
      {
        // release your doc (COM) object and do whatever other cleanup you need
      }
    }

    return false;
  }

  private void Print(Microsoft.Office.Interop.Word.Document doc)
  {
    // do the actual printing:
    doc.Activate();
    Thread.Sleep(TimeSpan.FromSeconds(1)); // emperical testing found this to be sufficient for our system
    // (a delay may not be required for you if you are printing only one document at a time)
    doc.PrintOut(/* ref objects */);
  }

  private bool SetActivePrinter(Microsoft.Office.Interop.Word.Document doc, string printer)
  {
    string oldPrinter = GetActivePrinter(doc); // save this if you want to preserve the existing "default"

    if (printer == null)
      return false;

    if (oldPrinter != printer)
    {
      // conditionally change the default printer ...
      // we found it inefficient to change the default printer if we don't have to. YMMV.
      doc.Application.ActivePrinter = printer;
      Thread.Sleep(TimeSpan.FromSeconds(5)); // emperical testing found this to be sufficient for our system
      if (GetActivePrinter(doc) != printer)
      {
        // don't quit-and-restart Word, this one actually isn't Word's fault -- just try again
        return false;
      }

      // successful printer switch! (as near as anyone can tell)
    }

    return true;
  }

  private Microsoft.Office.Interop.Word.Document OpenDocument(string fileName)
  {
    return _app.Documents.Open(ref fileName, /* other refs */);
  }

  private string GetActivePrinter(Microsoft.Office.Interop.Word._Document doc)
  {
    string activePrinter = doc.Application.ActivePrinter;
    int onIndex = activePrinter.LastIndexOf(" on ");
    if (onIndex >= 0)
    {
      activePrinter = activePrinter.Substring(0, onIndex);
    }
    return activePrinter;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-15T14:35:36.703

有一种方法可以指定打印机，但不要将其设置为系统默认值（我使用 C++/CLR，但它应该可以移植到 C#）：

```
String^ printername = "...";
auto wordapp= gcnew Microsoft::Office::Interop::Word::Application();
if (wordapp != nullptr)
{
  cli::array<Object^>^ argValues= gcnew cli::array<Object^>(2);
  argValues[0]= printername;
  argValues[1]= 1;
  cli::array<String^>^ argNames= gcnew cli::array<String^>(2);
  argNames[0]= "Printer";
  argNames[1]= "DoNotSetAsSysDefault";
  Object^ wb= wordapp->WordBasic;
  wb->GetType()->InvokeMember( "FilePrintSetup", System::Reflection::BindingFlags::InvokeMethod, nullptr, wb, argValues, nullptr, nullptr, argNames);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-09T22:31:02.303

我继承了一个使用 Word.Application 的 C# 项目。因为它是一个 C# 项目，而且翻译看起来很简单，所以我使用了 @Lars C++ 代码，并在我的项目中添加了一个 C# 翻译方法。在这里发布他的代码的直接翻译，希望能让某人的生活更轻松一些：

```
string printername = "...";
var wordapp = new Microsoft.Office.Interop.Word.Application();
if (wordapp != null)
{
    object[] argValues = new object[2];
    argValues[0] = printername;
    argValues[1] = 1;
    string[] argNames = new string[2];
    argNames[0] = "Printer";
    argNames[1] = "DoNotSetAsSysDefault";
    var wb = wordapp.WordBasic;
    wb.GetType().InvokeMember("FilePrintSetup", System.Reflection.BindingFlags.InvokeMethod, null, wb, argValues, null, null, argNames);
} 
```

# java - Adding and finding the average in an array

> ID：11126066
> 
> 赞同：0
> 
> 时间：2012-06-20T18:41:09.220
> 
> 标签：java, arrays

I"m trying to make a program that retrieves an endless amount of numbers that user inputs, and then it tells you how many numbers that you inputted, the sum of all the numbers, and then the average of the numbers. Here is the code I have so far. I don't know why it does not work. I get no errors, but it just does not get a valid sum or average.

```
import javax.swing.*;

public class SumAverage {
    public static float sum;
    public static float averageCalculator;
    public static float average;
    public static void main(String[]args) {
        float numbers[] = null;
        String userInput = JOptionPane.showInputDialog(null, "Ready to begin?");
        if(userInput.equalsIgnoreCase("no"))
        {
            System.exit(0);
        }
        for(int i = 0; i != -2; i++)
        {
            numbers = new float[i + 1];
            userInput = JOptionPane.showInputDialog(null, "Input any number. Input * to exit");
            if(userInput.length() == 0 || userInput.equals("*") || userInput.equals(null))
            {
                break;
            }
            else 
            {
                numbers[i] = Float.parseFloat(userInput);   
            }
        }
        for (int i = 0; i < numbers.length; i++)
        {
            sum += numbers[i];
        }

        average = sum / numbers.length;

        JOptionPane.showMessageDialog(null, "The sum of all your numbers is " + sum + ". The average is " + average + ". You entered a total of " + numbers.length + " numbers.");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:43:55.797

问题出在这一行：

```
 numbers = new float[i + 1]; 
```

您正在创建一个新数组，但您没有将分配给它的前一个数组中的值复制`numbers`到其中。

您可以通过两种方式解决此问题：

*   使用复制值[`System.arraycopy()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)（您需要使用新变量进行调用，然后将其分配给`numbers`）
*   **不要使用数组！**改用 a `List<Float>`，它的大小会自动增长

一般来说，要避免使用数组，特别是对于“应用程序逻辑”。尝试始终使用集合——它们有许多强大而方便的方法。

如果您想存储数字以供以后使用，请尝试使您的代码如下所示：

```
List<Float> numbers = new ArrayList<Float>();
...
numbers.add(Float.parseFloat(userInput));
...
for (float n : numbers) {
    sum += n;
}
average = sum / numbers.size();  // Note: Don't even need a count variable 
```

最后，如果您不需要存储数字，只需保持运行总和并计数，避免任何类型的数字存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T18:47:26.890

与 Q 无关，但请注意，您可以在不存储所有输入数据的情况下计算运行计数/平均值 - 或者假设您想要保留输入 - 而无需在每次迭代时遍历它。伪代码：

```
count = 0
sum = 0
while value = getUserInput():
  count++
  sum += value
  print "average:" + (sum / count) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T18:49:11.910

和

```
numbers = new float[i + 1]; 
```

您正在每次迭代中创建一个全新的数组。这意味着您总是在创建一个新数组，该数组将在每次迭代时将其大小增加 1，但只有一个字段填充了当前用户输入，并且所有其他字段都为空。

**删除此行并在之前初始化数组。**

**如果数组的大小应该在循环内动态增长，则根本不要使用数组，而是使用动态数据结构，如 List 或 ArrayList。**

此外，我建议使用

```
while (true) {

    //...
} 
```

实现无限循环。

# objective-c - 2D distortion of a face from an image on iOS? (similar to Fat Booth etc.)

> ID：11126067
> 
> 赞同：1
> 
> 时间：2012-06-20T18:41:11.890
> 
> 标签：objective-c, ios, opengl-es

I was just wondering if someone knows about some good library or tutorial on how to achieve a 2D distortion of a face taken from an image taken by the user.

I would like to achieve a similar effect to the one in Fatify, Oldify, all those Fat Booths, etc., because I am creating an app where you will throw something at the face and I would the face to jiggle and move when the object hits it.

How should I do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:13:38.103

我在[这里](https://stackoverflow.com/questions/5330410/how-do-image-distortion-applications-like-the-booth-series-work)找到了一个几乎相同的问题，并得到了公认的答案。

此外，谈到失真算法，GIMP 使用了一种称为“液体重新缩放”的算法。你可以在[这里](http://liquidrescale.wikidot.com/)找到它，它是用 C/C++ 编写的，所以你可以将它集成到你的 iOS 应用程序中（许可允许，我没有检查过）。

[这](https://stackoverflow.com/questions/225548/resources-for-image-distortion-algorithms)是另一个类似的问题。

希望这有助于您开始这方面的工作。

编辑：[一些例子](http://liquidrescale.wikidot.com/en:examples)（很快就会发布一些代码）

编辑 2：我正在寻找一些代码，我发现一些博客文章解释了用于实现液体重缩放算法的过滤算法。这并不容易，而且我认为在短时间内并且没有关于该主题的先验知识，我可以做的不仅仅是分享这个[链接](http://www.imagemagick.org/Usage/resize/#liquid-rescale)。GIMP 实现的作者似乎被称为“Shai Avidan”（参见这篇[文章](http://mattiesworld.gotdns.org/weblog/2007/11/06/liquid-rescale-open-source-implementation/)）。我建议您可以尝试联系他或该领域的任何其他人（请参阅有关该[主题](http://en.wikipedia.org/wiki/Seam_carving)的维基百科参考资料）。抱歉，如果我不能提供更多帮助。

[编辑 3：我找到了一本关于“数字图像处理原理：基本技术](http://www.amazon.co.uk/dp/1848001908/ref=rdr_ext_tmb)”的JAVA 代码的书。

此外，[这](http://www.stanford.edu/class/ee368/)是斯坦福大学 Bernd Girod 教授的数字图像处理课程的链接。有幻灯片和教程。

然后我通过谷歌搜索“数字图像处理原理”一词找到了更多结果。

无论如何..这只是为了在我之前考虑的答案中添加一些额外的内容。

# c++ - sqlite3_prepare_v2 depends on scope

> ID：11126070
> 
> 赞同：0
> 
> 时间：2012-06-20T18:41:19.810
> 
> 标签：c++, sqlite

i use sqlite3_prepare_v2 within c++ application and get memory leaks, when instantiate a sqlite3_stmt outside function which is calling sqlite3_prepare_v2.

sample:

```
sqlite3_stmt* ps=NULL;
void prepare(void)
{
   if(ps == NULL)
       sqlite3_prepare_v2(&db,"insert into nomatterbd...",-1,&ps,NULL);

} 
```

call prepare, close application and you get memory leaks.

Doing this way:

```
void prepare(void)
{
  sqlite3_stmt* ps=NULL;
  sqlite3_prepare_v2(&db,"insert into nomatterbd...",-1,&ps,NULL);
} 
```

no memory leaks. checked with latest amalgation.

My goal is to open and close a DB on each insert or update. To speed up the whole thing, i'd like to prepare global statements for insert and update. Unfortunately, this will fail, if global and once created statements cause mem leaks.

Can anyone help ? Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:49:32.580

你在调用 sqlite3_finalize() 吗？

[http://sqlite.org/c3ref/finalize.html](http://sqlite.org/c3ref/finalize.html)

您的问题没有说明何时发生内存泄漏-我猜程序何时退出。

# jsf - Primefaces commandButton 动作属性未被调用

> ID：11126074
> 
> 赞同：3
> 
> 时间：2012-06-20T18:41:36.897
> 
> 标签：jsf, jakarta-ee, primefaces

我正在使用 primefaces 创建一个 JSF 应用程序。基本上我有这个看法。有一个选项卡视图，每个选项卡都包含一个命令按钮和一个手风琴面板（另一种选项卡视图）。手风琴面板的选项卡以及其他元素包含每个命令按钮。我的问题是第一个命令按钮（在 1 级选项卡下）在单击时正确调用操作方法，而第二个按钮（在 2 级选项卡下）没有。我应该说 tabView 和手风琴面板都正常工作，因为它们正在显示它们应该显示的信息。

我发布了我的观点的简化版本，以便您可以看到正在发生的事情。

```
<h:form>
<p:tabView id="unitTabs"  orientation="left" dynamic="true" cache="false" var="unit" value="#{unitController.getUnitsOfLoggedInUser(loginController.checkedUser)}">
    <p:tab id="unitTab" title="#{unit.unitName}">

    <p:commandButton value="Add Lecture" action="#{unitController.setTemporary(unit)}" onclick="createLectureDialog.show()">

    <p:accordionPanel id="lectureTabs" value ="#{lectureController.getLecturesForUnit(unit)}" var="lecture" dynamic="true" cache="false">

         <p:tab title="#{lecture.lectureName}">
              <p:commandButton value="Add Criterion" action ="#{lectureController.setTemporary(lecture)}" onclick="createCriterionDialog.show()" >
         </p:tab>
     </p:accordionPanel>
     </p:tab>
</p:tabView>
</h:form> 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:25:08.450

此构造要求 和属性`value`中的 EL 表达式在处理表单提交期间返回与初始显示期间**完全相同的值。**`<p:tabView>``<p:accordionPanel>`

 **如果 bean 是请求范围的和/或值在幕后依赖于基于请求的参数或变量，因此它在每个请求上返回不同的值，那么它将失败，因为 JSF 无法找到被调用的按钮。要修复它，需要将 bean 放置在视图范围内，并且 getter 方法不应包含任何业务逻辑，或者应在后续请求中保留任何基于请求的参数或变量。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 4 点。**

# mule - Mule: Keep track of the message type

> ID：11126076
> 
> 赞同：0
> 
> 时间：2012-06-20T18:41:40.423
> 
> 标签：mule

Is there an "easy" way to track/know what the message type is at a given point in the flow (plus any additional message property)?
Thinking about branching and sub-flows, I find it very difficult to keep track of the message and it's properties.
I could probably investigate each message processor / transformer along the way to figure out what the message type is but I am wondering if there is a better way. Maybe there is something already built-in with MuleStudio that I don't know about?

thanks, Markus

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:22:13.367

您是否尝试过[**记录器**](http://www.mulesoft.org/documentation-3.2/display/MULE3STUDIO/Logger+Component+Reference)组件？它显示了消息负载类型、消息属性、负载内容等。您还可以配置您需要的日志级别。

# internet-explorer - Adjustable input field Internet Explorer cakephp

> ID：11126079
> 
> 赞同：0
> 
> 时间：2012-06-20T18:41:44.527
> 
> 标签：internet-explorer, cakephp

I have an input field that might require a lot of text. On a mac I can adjust the field to whatever size I want, see first image, but on a pc(Internet Explorer) I get the scrolly bar of doom, see other image. Is there a way to duplicate that? Or am I stuck setting it to a certain height(Can I do that?)?

Image 1:

![The little arrow on the bottom right of the image let's me adjust it.](../Images/31e7bb17a22bb04b49c03b7c14ec432b.png)

Image 2:

![Scrolling bar of doom on the bottom right, annoying with lots of text](../Images/043defc76a3bd82c0ab957e3e09ffb0a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:46:54.113

IE 不像其他浏览器那样为 textareas 提供可调整大小（就像前一段时间一样）。

您可以在网上找到添加该功能的 javascript，但在我看来，它比有用更麻烦，因为它必须添加一个 div 和移动钩子以在 div 移动时调整字段的大小等。

# r - 有什么方法可以在summaryBy中为不同的功能指定不同的NA动作？

> ID：11126080
> 
> 赞同：2
> 
> 时间：2012-06-20T18:41:46.357
> 
> 标签：r, grouping

有没有办法为summaryBy中的不同功能指定不同的NA动作？例如，假设我想要数据集中各个组的观测值的平均值和数量。我可以做这个：

```
library(doBy)
var1 = c(10.5,15,6.2,3.5,NA,NA)
group = c("A","B","B","A","B","A")
df = data.frame(var1, group)
summaryBy(var1 ~ group, data=df, FUN=c(mean,length), na.rm=TRUE) 
```

您需要`na.rm = TRUE`以便该`mean`函数可以处理缺失值。但是，该`length`函数只接受一个参数，但`summaryBy`传递`na.rm=TRUE`给`length`以及 to `mean`，因此`summaryBy`调用给出以下错误：

```
Error in currFUN(x, ...) : 
2 arguments passed to 'length' which requires 1 
```

有没有办法指定参数`summaryBy`应该`na.rm=TRUE`只传递给`mean`而不是传递给`length`？还是有其他（相当优雅的）解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:52:30.787

一种简单的方法是定义一个包装器`mean`作为`na.rm=TRUE`默认值。

例如：

```
mean <- function(x)base::mean(x, na.rm=TRUE)
summaryBy(var1 ~ group, data=df, FUN=c(mean,length))

  group var1.mean var1.length
1     A       7.0           3
2     B      10.6           3 
```

你也可以传递一个匿名函数：

```
rm(mean)
summaryBy(var1 ~ group, data=df, FUN=c(function(x)mean(x, na.rm=TRUE),length))

  group var1.FUN1 var1.FUN2
1     A       7.0         3
2     B      10.6         3 
```

# directx-9 - Convert ID3D11Texture2D into a memory buffer

> ID：11126081
> 
> 赞同：0
> 
> 时间：2012-06-20T18:41:49.887
> 
> 标签：directx-9, directx-11, directx-10

How can we convert `ID3D11Texture2D` into a memory buffer? I have `ID3D11Texture2D*` and need to read data from it to a memory buffer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:55:59.330

您需要创建具有相同格式/大小的第二个纹理，但将其创建为暂存。

[纹理描述](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476253(v=vs.85).aspx)

Cpu 访问标志需要设置为`D3D11_CPU_ACCESS_READ` ，使用需要设置为`D3D11_USAGE_STAGING`.

然后你可以调用`ID3D11DeviceContext::CopyResource`从纹理复制到暂存的。

然后你打电话[`Map`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476457(v=vs.85).aspx)来访问数据。

# iphone - UITableView Sections like Contacts App

> ID：11126087
> 
> 赞同：0
> 
> 时间：2012-06-20T18:42:11.140
> 
> 标签：iphone, uitableview

在通讯录应用程序中，当您滚动浏览通讯录时，该字母似乎停留在该部分上方。这张照片是在我切换 P 和 Q 触点时拍摄的![在此处输入图像描述](../Images/44b7740ec47272315bb8f84158a50cd8.png)

这是怎么做到的？我认为这是默认行为，但在实现我的部分标题后我意识到它不是。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:04:54.497

`UITableView`您描述的行为是具有 style的默认行为`UITableViewStylePlain`。如果你有`UITableViewStyleGrouped`，这不会发生。

# linux - 我如何知道我的服务器是否有 NUMA？

> ID：11126093
> 
> 赞同：24
> 
> 时间：2012-06-20T18:42:49.283
> 
> 标签：linux, jvm, kernel, processor, numa

从 Java Garbage Collection 跳出来，我遇到[了 NUMA 的 JVM 设置](http://www.slideshare.net/ludomp/gc-tuning-in-the-hotspot-java-vm-a-fisl-10-presentation/35)。奇怪的是，我想检查我的 CentOS 服务器是否具有 NUMA 功能。是否有可以获取此信息的 *ix 命令或实用程序？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-20T18:52:21.207

我不是这里的专家，但这里有一些东西：

方框 1，无 NUMA：

```
~$ dmesg | grep -i numa
[    0.000000] No NUMA configuration found 
```

方框 2，一些 NUMA：

```
~$ dmesg | grep -i numa
[    0.000000] NUMA: Initialized distance table, cnt=8
[    0.000000] NUMA: Node 4 [0,80000000) + [100000000,280000000) -> [0,280000000) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-01-21T21:39:16.130

我认为这个前面的问题是类似的：[如何确认 NUMA？](https://stackoverflow.com/questions/10109783/how-to-confirm-numa/28077157#28077157)

特别是，您可以在此处查看 NUMA 手册页：http: [//man7.org/linux/man-pages/man7/numa.7.html](http://man7.org/linux/man-pages/man7/numa.7.html)

从那里你会看到：

```
$ find /proc -name numa_maps
/proc/1/task/1/numa_maps
/proc/1/numa_maps
/proc/2/task/2/numa_maps
/proc/2/numa_maps
/proc/3/task/3/numa_maps
[etc if you have numa] 
```

你可以像这样获得更多细节：

```
$ grep NUMA=y /boot/config-`uname -r`
CONFIG_NUMA=y
CONFIG_K8_NUMA=y
CONFIG_X86_64_ACPI_NUMA=y
CONFIG_ACPI_NUMA=y

$ numactl --hardware
available: 2 nodes (0-1)
node 0 size: 18156 MB
node 0 free: 9053 MB
node 1 size: 18180 MB
node 1 free: 6853 MB
node distances:
node   0   1
  0:  10  20
  1:  20  10 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-10T08:24:52.327

对于 Redhat 4、5、6 和 7 系统，可以尝试以下方法来确定是否禁用了 NUMA 配置：

numactl --show 不显示多个节点

```
# numactl --show
policy: default
preferred node: current
physcpubind: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
cpubind: 0
nodebind: 0
membind: 0 
```

或 numactl --hardware 没有列出多个节点

```
# numactl --hardware
available: 1 nodes (0)
node 0 cpus: 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
node 0 size: 524163 MB
node 0 free: 505253 MB
node distances:
node   0
  0:  10 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-05-12T09:43:04.220

您还可以从 lscpu 命令获取此信息：

```
lscpu | grep -i numa
NUMA node(s):          2
NUMA node0 CPU(s):     0-19,40-59
NUMA node1 CPU(s):     20-39,60-79 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-05-06T07:20:05.173

您也可以只查询信息`/sys`（这就是`numactl`下面的工具）。正如其他人指出的那样，使用 dmesg 将是不可靠的，因为它通常没有无限缓冲。

要了解当前可用的 NUMA 节点数量，请执行以下操作：

```
cat /sys/devices/system/node/online
0-3 
```

# c# - Calling log4net from a singleton that is in a separate project stops all logging

> ID：11126094
> 
> 赞同：0
> 
> 时间：2012-06-20T18:42:54.103
> 
> 标签：c#, singleton, log4net

The application is a WinForms .net 3.5 app with multiple projects, one main project and multiple library projects. If I call log4net from a singleton that exists in one of the sub-projects it causes all logging to stop.

**Update**

Based on some of the comments I changed the TestSingletonLog4net class in the following ways. The problem still exists with these changes.

*   Made the test class thread safe as Jon Skeet pointed this out.
*   Changed the member declaration and added the log4net.Config.XmlConfigurator.Configure(); config call as per Norla's example with the same results, still whenever it is called all logging stops.

Here is the updated class to reproduce the problem.

```
 public class TestSingletonLog4Net
{
    private static volatile TestSingletonLog4Net instance;
    private static object syncRoot = new Object();

    public static readonly log4net.ILog log = log4net.LogManager.GetLogger(typeof(TestSingletonLog4Net));

    private  TestSingletonLog4Net()
    {
        log4net.Config.XmlConfigurator.Configure();

        log.Info("Test write from singleton");
    }
    public static TestSingletonLog4Net Instance
    {
        get
        {
            if (instance == null)
            {
                lock (syncRoot)
                {
                    if (instance == null)
                        instance = new TestSingletonLog4Net();
                }
            }

            return instance;
        }
    }
} 
```

I setup a small project to duplicate the problem, and here is what is happening.

*   if I use log4net from the main UI project with either singleton or normal class logging works.
*   If I use log4net from sub-project libraries that are not a singleton logging works.
*   If I attempt to use log4net from a singleton that is in one of the sub-project libraries all logging stops, not only does it not log but also logging done from main project no longer work either.

I originally had the log4net configuration as part of the app.config but I suspected it may be a problem so I moved log4net configuration into it's own config file.

Using log4net version 1.2.11

I have also tried calling log from outside the constructor with the same results.

The reset of my setup is below.

The following line is just below the using statements in my Program.cs

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 
```

In each class I am calling log4net with:

```
private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

Any advice for a resolution is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:41:38.967

您应该只在您的应用程序中调用`log4net.Config.XmlConfigurator.Configure();` **一次**。这应该在主应用程序中调用，而不是在包含单例的类中。

此外，如果您要调用`log4net.Config.XmlConfigurator.Configure();`以下行，则应删除：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:08:22.070

我有一个使用 log4net 的单例对象。这就是我正在做的事情。

在成员声明中：

```
public static readonly log4net.ILog Logger = log4net.LogManager.GetLogger(typeof (TestSingletonLog4Net)); 
```

在构造函数中：

```
log4net.Config.XmlConfigurator.Configure(); 
```

而已。迄今为止没有任何问题。请让我知道这是否有效。

# ruby - 如何使用 gdata gem / api 创建文档？

> ID：11126095
> 
> 赞同：2
> 
> 时间：2012-06-20T18:42:54.613
> 
> 标签：ruby, api, gdata

我能够创建..*一些东西*......但我在我的帐户的 web 视图中看不到它

```
require "gdata"
require "awesome_print"
require "nokogiri"

@client = GData::Client::DocList.new
@client.clientlogin('me', "mypass")

def post_doc
  # Return documents the authenticated user owns
  feed = @client.get('https://docs.google.com/feeds/documents/private/full/-/mine').to_xml
  entry = feed.elements['entry']  # first <atom:entry>

  acl_entry = <<-EOF
  <entry xmlns="http://www.w3.org/2005/Atom" xmlns:gAcl='http://schemas.google.com/acl/2007'>
    <category scheme='http://schemas.google.com/g/2005#kind'
      term='http://schemas.google.com/acl/2007#accessRule'/>
    <title>Testing Ruby GData gem</title>
    <gAcl:role value='writer'/>
    <gAcl:scope type='user' value='idk@example.com'/>
  </entry>
  EOF

  # Regex the document id out from the full <atom:id>.
  # http://docs.google.com/feeds/documents/private/full/document%3Adfrk14g25fdsdwf -> document%3Adfrk14g25fdsdwf
  ap entry.elements['id']
  doc_id = entry.elements['id'].text[/full\/(.*%3[aA].*)$/, 1]
  response = @client.post("https://docs.google.com/feeds/acl/private/full/#{doc_id}", acl_entry)

end 
```

如果我更改 gAcl:scope type='user' 字段的值，我似乎只能上传文档。

在我的 google 帐户上，Docs 不见了，取而代之的是 google drive，这会是个问题吗？

**另外，某处**的条目中是否有字段列表，因此我可以指定要创建的文档的正文？

# javascript - 我想更改 wordpress 标题中的脚本链接。它们在哪里定义？

> ID：11126097
> 
> 赞同：0
> 
> 时间：2012-06-20T18:43:07.053
> 
> 标签：javascript, wordpress, header, wordpress-theming

我刚刚安装了 SSL 证书，并且正在尝试确保页面上的所有资源也是从安全站点调用的，因此我不会收到“存在不安全内容”错误。

我查看了 wordpress 为我的一个页面创建的代码，发现了一个链接： [http](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js?ver=3.4) ://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js?ver=3.4 我想更改为 https:// 但我在模板中找不到添加的位置。

如果我在管理屏幕中的模板编辑器中，是否有一个公共页面可以构建到 JS 文件的链接？或者有没有办法让我回过头来弄清楚这是在哪里添加的，这样我就可以更改源了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:53:44.713

我建议您首先在文件 header.php 或 footer.php 中搜索（如果脚本直接包含在 html 中）。否则，您应该在文件 functions.php 中搜索对该函数的一些调用： wp_enqueue_script('...');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:52:56.513

看起来您正在使用自定义主题。它可能在 header.php 中。您可能只想通过 FTP 或 SSH 对其进行编辑。

# hibernate - Hibernate 可以自动从存储过程结果集中填充对象吗？

> ID：11126103
> 
> 赞同：2
> 
> 时间：2012-06-20T18:43:28.650
> 
> 标签：hibernate, jpa, annotations, persistence, resultset

我知道，对于单个数据库行上的插入/更新/选择/删除，如果类已适当地放置了注释，Hibernate 可以在没有 XML 列映射的情况下获取或持久化对象`@Id`，`@Column`等等`@Table`。

但是对于存储过程返回的结果集，这种操作是否可能，通过 Hibernate 分析`ResultSetMetaData`和注释自动填充对象或对象集合中的每个字段？如果是，它是如何完成的？

结果集的 SQL 查询是否必须基于单个表，或者它可以是从多个表返回混合列的表连接（我意识到我必须定义一个与特定集合匹配的实体对象查询中返回的列数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:01:21.157

我不确定 Hibernate 是否这样做，但我认为使用的注释在运行时可用。如果您觉得雄心勃勃，那么获取列名并将它们映射到相应的字段应该不会有太多的工作。

您可以在查询中使用[本机 SQL 。](http://www.oracle.com/technetwork/articles/vasiliev-jpql-087123.html)

# ruby - 在 ruby / rbenv 中安装 openssl

> ID：11126105
> 
> 赞同：21
> 
> 时间：2012-06-20T18:43:30.927
> 
> 标签：ruby, gem, openssl, rbenv

我需要在 ruby​​ 中使用 openssl。我应该如何安装相同的？我已经通过 rbenv 安装了 ruby​​，并且正在使用 ubuntu 12.04。

```
kprakasam@ubuntu:~$ ruby -v
ruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-linux]

kprakasam@ubuntu:~$ irb
irb(main):001:0> require 'openssl'
LoadError: no such file to load -- openssl
    from /home/kprakasam/.rbenv/versions/1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/kprakasam/.rbenv/versions/1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):1
    from /home/kprakasam/.rbenv/versions/1.9.2-p180/bin/irb:12:in `<main>' 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-04-05T07:28:36.273

对于 Mac OSX，这救了我：

```
RUBY_CONFIGURE_OPTS=--with-openssl-dir=<openssl install dir> rbenv install 
```

来自[Ruby 构建 wiki](https://github.com/rbenv/ruby-build/wiki#missing-openssl)

但是..如何找到*openssl安装目录*？：

```
$ brew list openssl
/usr/local/Cellar/openssl/1.0.2d_1/bin/c_rehash
/usr/local/Cellar/openssl/1.0.2d_1/bin/openssl
... 
```

然后*openssl 安装目录*是：

```
/usr/local/Cellar/openssl/1.0.2d_1/ 
```

ruby 安装命令如下结束：

```
RUBY_CONFIGURE_OPTS=--with-openssl-dir=/usr/local/Cellar/openssl/1.0.2d_1/ rbenv install 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-20T18:51:44.470

`openssl`需要安装在本地机器上。

然后，您需要使用 openssl 支持编译 Ruby，这是通过`--with-openssl-dir`命令行开关实现的。

也许[这](https://gist.github.com/1200482)会对你有所帮助。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-17T21:50:16.930

首先，安装openssl：

```
sudo apt-get -y install build-essential zlib1g-dev libreadline-dev libssl-dev libcurl4-openssl-dev 
```

之后，重新编译 Ruby。

注意：仅修复上面@Nebojsa 的评论

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-20T19:04:16.523

这可能会对您有所帮助：[Rails：无法加载此类文件 - openssl](http://www.dinduks.com/rails-cannot-load-such-file-openssl)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-05-20T14:34:20.757

编辑：请注意，此答案可能已过时。有[问题的问题](https://github.com/postmodern/ruby-install/issues/387)已在[v0.8.1](https://github.com/postmodern/ruby-install/blob/master/ChangeLog.md#081--2020-12-20)中解决。

* * *

在阅读了这个问题的多个答案后，我设法使用以下命令使其在 macOS 10.15 上运行：

```
brew install rbenv/tap/openssl@1.0
OPENSSL_1_0_DIR=$(brew --prefix rbenv/tap/openssl@1.0)

export CPPFLAGS=-I${OPENSSL_1_0_DIR}/include
export LDFLAGS=-L${OPENSSL_1_0_DIR}/lib

ruby-install ruby 2.2.10 -- --with-openssl-dir=${OPENSSL_1_0_DIR} 
```

# php - 使用带有 php 和 mysql 的复选框

> ID：11126108
> 
> 赞同：0
> 
> 时间：2012-06-20T18:44:03.407
> 
> 标签：php, mysql

我试图让一个简单的真假复选框工作，但我遇到了一些麻烦。

首先，它使用自定义类 tep_draw_checkbox_field，其定义如下：

```
 function tep_draw_checkbox_field($name, $value = '', $checked = false, $compare = '') {
    return tep_draw_selection_field($name, 'checkbox', $value, $checked, $compare);
  } 
```

好的，那么在我的php中：

```
<tr>
    <td class="main"><?php echo "Made in Canada?"; ?></td>
    <td class="main"><?php echo '&nbsp;' . tep_draw_checkbox_field('made_in_canada', '1'); ?></td>
</tr> 
```

最重要的是，我将空白数组存储到变量 $pInfo 中（取出不必要的）：

```
$parameters = array('products_name' => '',
                       'canadian' => '');

$pInfo = new objectInfo($parameters); 
```

我将产品的查询存储在一个名为 $product 的数组变量中

```
$pInfo->objectInfo($product); 
```

这就是事情变得真正不稳定的地方。这是我尝试将是否检查到变量的地方：

```
 if (isset($pInfo->canadian)) {
    $canadian =  1;
  } else {
     $canadian = false;
  } 
```

我认为这就是我们所需要的。我没有让数据库识别复选框，我也没有让该框反映数据库是否为真（1）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:48:51.070

您是否回发到同一页面？你需要做的就是说

```
if(!empty($_POST['made_in_canada']) {
  // It's made in canada
} 
```

# magento - 查明magento 1.6.2中两个页面之间的差异和更改

> ID：11126112
> 
> 赞同：0
> 
> 时间：2012-06-20T18:44:19.300
> 
> 标签：magento, layout

我有两个页面应该使用完全相同的模板和布局。

正确的项目布局如下所示。 [http://dokha.co/index.php/medwakh/custom-medwakh-from-white-horse-studios-13.html](http://dokha.co/index.php/medwakh/custom-medwakh-from-white-horse-studios-13.html)

不正确的项目布局如下。 [http://dokha.co/index.php/shisha-tobacco/al-fakher-shisha-tobacco-1.html](http://dokha.co/index.php/shisha-tobacco/al-fakher-shisha-tobacco-1.html)

正如您在第一张图片中看到的那样，项目的布局很紧凑。在第二个链接中，它全部被绘制出来。

我很想知道你能不能告诉我如何让第二个像第一个一样，紧凑的风格。我不确定在 magento 中可以进行哪些修改以导致布局仅针对特定项目以这种方式显示，因为只有链接 1 上的类别中的项目才会这样，我想知道如何使它们全部以这种方式行事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:24:01.937

好的，第一件事：布局略有不同，因为在第一个示例中，您有一个简单的产品，而在第二个示例中，您有一个可配置的产品。

因此，view.phtml 在每个中都包含不同的模板。

无论如何，您在第二个示例中看到的扩展空间的真正罪魁祸首是由清除 div 引起的。只需将其删除。

您正在寻找的 div 是这样的：

```
<div class="clearer"></div> 
```

你会发现它在`app/design/frontend/your_package/your_theme/template/catalog/product/view.phtml`

# php - 需要帮助使用 cookie 完成登录脚本

> ID：11126113
> 
> 赞同：0
> 
> 时间：2012-06-20T18:44:22.617
> 
> 标签：php, mysql, forms, login

我的问题是，当我提交登录表单时，脚本显示“用户不存在”，即使它确实存在于我的数据库中。

工作正常：如果没有设置输入字段，它会正确打印“填写两个输入字段”。

PHP 脚本

```
<? 

if(isset($_POST['login'])){////4

$hostname = "localhost";
$data_username = "xxxxx"; //database username
$data_password = "xxxxx"; //database password
$data_basename = "xxxxx"; //database name
$conn = mysql_connect("".$hostname."","".$data_username."","".$data_password."");  
mysql_select_db("".$data_basename."") or die(mysql_error()); 

$lastvisit = date("d-m-Y H:i:s");

if(isset($_POST['username']) && !empty($_POST['username'])  AND isset($_POST['password']) && !empty($_POST['password'])) {///3

    $check_user_data = mysql_query("SELECT * FROM so_users WHERE `username` = '$username'") or die(mysql_error());
    if(mysql_num_rows($check_user_data) !== 0){ //// 2

        $get_user_data = mysql_fetch_array($check_user_data);
        if($get_user_data['password'] == $password){//// 1

            if (isset($_POST['rememberme'])) {
                /* Set cookie to last 1 year */
                setcookie('username', $_POST['username'], time()+60*60*24*365, '/projekter/smartorder', 'www.xxxxx.dk');
                setcookie('password', $_POST['password'], time()+60*60*24*365, '/projekter/smartorder', 'www.xxxxx.dk');
                setcookie('usertype', $get_user_data['usertype'], time()+60*60*24*365, '/projekter/smartorder', 'www.xxxxx.dk');
                mysql_query("UPDATE so_users SET visits=visits+1 WHERE username='$username'");
                mysql_query("UPDATE so_users SET lastvisit='$lastvisit' WHERE username='$username'");

            } else {

                /* Cookie expires when browser closes */
                setcookie('username', $_POST['username'], false, '/projekter/smartorder', 'www.xxxxx.dk');
                setcookie('password', $_POST['password'], false, '/projekter/smartorder', 'www.xxxxx.dk');
                setcookie('usertype', $get_user_data['usertype'], false, '/projekter/smartorder', 'www.xxxxx.dk');
                mysql_query("UPDATE so_users SET visits=visits+1 WHERE username='$username'");
                mysql_query("UPDATE so_users SET lastvisit='$lastvisit' WHERE username='$username'");
            }
            header('Location: index.php');

       }//// 1
       else { $msg = 'Incorrect password<br><div class="border"></div><br>'; }
       }/// 2
       else { $msg = 'User does not exist!<br><div class="border"></div><br>'; }
       }/// 3
       else { $msg = 'You must fill out both fields!<br><div class="border"></div><br>'; }
       }/// 4

?> 
```

HTML 表单：

```
<form class="boxCont" method="POST">
    <?php echo '<div class="statusmsg">'.$msg.'</div>'; ?>
        <div>
            <label for="userName">Username</label>
            <input id="username" type="text" name="username" placeholder="Please enter your username here" />
        </div>
        <br>
        <div>
            <label for="password">Password</label>
            <input id="password" type="password" name="password" placeholder="And your password here" />
        </div>

        <div>
                    <label>
                    <input type="checkbox" id="login" name="login" value="Login" style="margin-top:32px;"/>&nbsp;Remember me
                    </label>​
                    <input type="submit" id="login" name="login" value="Login" class="btn right" />
                </div>
        <div class="border"></div>
        <div style="font-size: 12px; margin-left:124px; color: #888888;">
             Arent't user yet? Register <a href="/projekter/smartorder/signup" style="color: #555555; font-weight: bold;">here</a>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:50:32.437

您在任何地方都没有设置值`$username`（除非您打开了 register_globals，在这种情况下...稍后会详细介绍），因此您的查询结果如下：

```
SELECT * FROM so_users WHERE `username` = ''
                                           ^--look mom, no username! 
```

如果您**确实**打开了 register_globals，那么我建议您立即关闭您的 Web 服务器并阅读 PHP 站点上的文档，了解为什么[register_globals](http://php.net/manual/en/security.globals.php)是有史以来被放到公共互联网上的最大愚蠢行为。

看到这样的结构：

```
mysql_select_db("".$data_basename."") or die(mysql_error()); 
                ^^-- huh?        ^^^-- double-huh? 
```

建议一定数量的货物崇拜节目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:50:08.150

你使用cookies而不是'$_SESSION'有什么原因吗？cookie 存储在客户端的 pc 上，在服务器将 html 发送到客户端之前，会话在服务器上进行处理。

因此，将密码存储在 cookie 中而不是会话变量中可能非常不安全。

> 另外，在您的代码中
> 
> ```
> ("SELECT * FROM so_users WHERE `username` = '$username'") 
> ```
> 
> 丢失用户名周围的`。

^ 正如 matthieu 所说，这确实是不必要的，但您应该记住，使用 cookie 是非常不安全的。

# windows - PDCurses 和 DOS 代码页 437

> ID：11126118
> 
> 赞同：1
> 
> 时间：2012-06-20T18:44:38.920
> 
> 标签：windows, console-application, codepages, pdcurses

我正在为 Windows 使用 PDCurses 3.4 版；它正在编译并正常运行，但我无法让它显示代码页 437 中的 IBM 扩展 Ascii 字符（尽管控制台正在该代码页中运行）。我特别想得到画线字符。

以下命令显示错误字符：

```
mvaddch(0,20,186);
mvaddch(1,20,204);
for (unsigned i=0; i<80; i++) {
  mvaddch(1,i+20,205);
} 
```

（这是一个 100x50 列的终端窗口。）

在定义了 PDC_WIDE 的情况下，为 mvaddch() 提供角色等效的 Unicode 代码点（186 = 2251、204 = 2560、205 = 2250）也会失败，显示相同的字符（第 1 行上的“º”，第 2 行上的重复“I”）。

如何让画线字符（以及 IBM 扩展 ASCII 的其余部分）显示？

（相关文章——不同的症状，相同的解决方案：[PDcurses 显示问号代替预期字符](https://stackoverflow.com/questions/4358387/pdcurses-displaying-question-marks-in-place-of-intended-character)。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:34:38.037

我应该下载 pdc34dll.zip 而不是 pdc34dllw.zip，尽管后者的标题中有一个“w”（代表“Windows”？）并且 SourceForge 将其宣传为最新版本。

我不知道为什么会这样；但确实如此，而且 PDCurses 现在可以正确显示 IBM 扩展 ASCII 字符。

# android - 有没有办法在Android中使用标签？

> ID：11126119
> 
> 赞同：1
> 
> 时间：2012-06-20T18:44:39.270
> 
> 标签：android, tags

我想我没有正确解释我的问题。我想在 xml 中添加一个文本区域，使用户能够选择电子邮件的内容，此外还能够使用可以根据发送电子邮件的电子邮件地址更改电子邮件内容的标签。例如用户可以添加 Dear 并且当电子邮件被例如另一个电子邮件地址是 james@mail.com 的人收到时，电子邮件是 Dear james。从技术上讲，在设备发送电子邮件之前，从数据库中检查用户的电子邮件地址是 james @mail.com 的名称，并用 James 替换标签。我有任何意义吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:52:00.493

嗯，你可以这样做：

```
String body = "<h1> any html! </h1>";

Intent intent = new Intent(Intent.ACTION_SEND);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setType("text/html");
intent.putExtra(Intent.EXTRA_EMAIL, new String[]{"me@test.com"});
intent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body));
Intent chooser = Intent.createChooser(intent, "Send Email");
       chooser.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(chooser); 
```

这将为您创建一个 HTML 电子邮件。正文标签可以是您想要的任何内容（甚至是用户输入）。

这是你的意思吗？

# xpath - Selenium：验证单选选项及其标签的可见性。

> ID：11126121
> 
> 赞同：0
> 
> 时间：2012-06-20T18:44:55.203
> 
> 标签：xpath, selenium

嗨，我有以下简单的单选按钮

```
<label>
    <input type="radio" name="radioOption1" value="option1">
    System option1\. 
</label> 
```

我将如何使用 selenium 来验证单选按钮及其标签不可见。

```
selenium.isVisible("//input[@name='radioOption1' and @value='option1']"); 
```

将验证该选项是否不可见，但我想验证整个标签不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:14:24.083

xpath 有一个父伪指针，对 Selenium 实现不太确定

```
//parent::input[@name='radioOption1' and @value='option1'] 
```

或者

```
//label[./input[@name='radioOption1' and @value='option1']] 
```

# jquery - Ajax：获取请求状态并更新 jProgressBar

> ID：11126124
> 
> 赞同：1
> 
> 时间：2012-06-20T18:45:03.287
> 
> 标签：jquery, ajax, asp-classic, progress-bar

我有一个在文件中提取 zip 文件的任务：`Update.asp` How can I update jquery progress bar after task started on `index.asp`.

我在 index.asp 找到了使用 2 ajax 调用的解决方案。一个用于启动任务，`update.asp`另一个用于`session("progress_status")`在每个提取文件完成时获取此 Session 更改的内容`update.asp`

```
<%
session("progress_status") = 0
'file 1 extracted
session("progress_status") = 50
'file 2 extracted
session("progress_status") = 100
%> 
```

问题是当第一个 ajax 调用开始时，第二个 ajax 调用保持挂起直到第一个调用完成。

[我的 ajax 调用](http://jsfiddle.net/LjGr9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:43:10.713

您遇到的问题是 ASP 处理器一次只会为特定会话处理一个脚本。因此，您对尝试获取进度的 asp 脚本的调用将在执行提取的 asp 脚本后面排队。

这就是我建议你这样做的方式：假装它。您向执行提取的页面发出 ajax 请求。在提取时，您有一个使用计时器的纯 javascript 驱动的进度条。给它一些放松，这样一开始看起来进展很快，但随后呈指数级放缓。当 ajax 请求完成时，您可以在移除进度条之前将其简要显示为已完成。

如果您可以获取 zip 的原始大小，则可以使用该图形来改善伪造的进度条与现实之间的匹配。如果此类提取发生得相当频繁，您可以通过记录提取各种 zip 文件所需时间的一些统计数据来进一步了解这一点，以获得一些风味时间与字节的比率。

最终，您的用户想要一种温暖而模糊的感觉，即某事正在发生，而上述实现了这一点。

# cocoa-touch - 使用 Xcode for iPhone 在 Objective C 中动态重绘一个矩形？

> ID：11126133
> 
> 赞同：0
> 
> 时间：2012-06-20T18:45:32.070
> 
> 标签：cocoa-touch, drawing

我试图通过更改其 x 值然后重绘来使矩形在 iPhone 屏幕上移动。我是Objective C的新手，有人可以指点我如何做到这一点的教程吗？看起来 DrawRect 不接受参数，我应该创建一个公共变量来存储矩形 x 值吗？

看起来我需要运行一个 for 循环来逐步缩放矩形的 x 值，并且在每个 x 更改后调用 setNeedsDisplay。我有很多我不认识的文件和默认功能。将 for 循环放在哪里合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:07:14.000

您可以使用 UIView 转换方法。只需转到文档并搜索[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)，应该会有一个动画部分。实际上这很容易。我会在这里发布代码，但这应该是不言自明的。

* * *

像这样的东西：

```
-(void)animateLeft
{
    [UIView beginAnimations:ANIMATE_TO_LEFT context:nil];
    [UIView setAnimationDelay:0];
    [UIView setAnimationDuration:0.2f];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDelegate:self];

    CGRect updateFrame = [self frame];
    updateFrame.origin.x = updateFrame.origin.x-distanceToMove;
    [self setFrame:updateFrame];

    [UIView commitAnimations];
} 
```

# database - 在sql中存储域名

> ID：11126135
> 
> 赞同：0
> 
> 时间：2012-06-20T18:45:36.527
> 
> 标签：database, database-design, dns, schema, tld

我应该规范化域名以拆分域名、子域、tld 吗？我将每秒添加大约 100 个域/子域，并每秒查询大约 500 个域/子域。

我有一个计划，我可以在其中获得 tlds [http://data.iana.org/TLD/tlds-alpha-by-domain.txt的表格](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)

我可以有另一个用于域名的表和另一个用于子域的表

事实是我有一个在线站点正常运行时间服务，我希望每天检查所有可能的域的正常运行时间大约 100 次并爬网以查找更多信息。

什么是最好的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:59:11.453

如果您只存储完整的主机名，则似乎很难对例如 *.stackoverflow.com 运行有效的查询。子字符串匹配将无法利用该字段上的任何索引。另一方面，存储完整的字符串更容易，效率较低的查询可能在很长一段时间内都不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:50:14.033

我会使用完整的主机名（例如 www.stackoverflow.com 和 stackoverflow.com 是不同的）。对于某些网站，两个特定的主机名可能是等价的，但对于其他网站则不然。我也看不出跟踪 TLD 会有什么用处（尤其是在即将到来的 TLD 爆炸之后）。

我可以理解您为什么要按域对其进行分类，但请记住两个不同的页面（http://example.com/store 和[http://example.com/wiki](http://example.com/wiki)）可能设置完全不同（例如不同的编程语言和数据库），所以一个很容易在另一个运行良好的情况下关闭。用户将需要基于每个 URL 的此信息。

# android - 使用两个不同的凭据登录时不一致

> ID：11126136
> 
> 赞同：0
> 
> 时间：2012-06-20T18:45:45.003
> 
> 标签：android

我使用一些凭据登录到应用程序，并且该用户有一些通过 Web 服务下载的数据。问题是，当我在退出后使用其他凭据登录（不退出应用程序）时，有时我会得到以前用户的数据。谁能告诉可能是什么问题。当我注销删除与以前用户相关的数据时，我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:55:34.610

如果您的数据存储在[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)中，那么当一个用户“退出”时，您可以调用[clear()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#clear%28%29)方法来清除您的内存。

[与HashMap](http://developer.android.com/reference/java/util/HashMap.html)类似，它也有[clear()](http://developer.android.com/reference/java/util/HashMap.html#clear%28%29)方法。

# c# - 从具有指定属性的通用类列表生成 HTML 表

> ID：11126137
> 
> 赞同：13
> 
> 时间：2012-06-20T18:45:45.440
> 
> 标签：c#, generics, reflection

我想从几个指定的参数生成一个 HTML 表。具体来说，我想传递给我的方法的两个参数是：IEnumerable 列表和 T 的一些属性子集。例如，假设我有一个此类的列表：

```
class Person
{
  string FirstName
  string MiddleName
  string LastName
} 
```

假设列表中有 5 个人。我希望能够通过执行以下操作来获取该类（或任何其他任意类）的 HTML 表：

```
List<Person> people;
...add people to list

string HTML = GetMyTable(people, "FirstName", "LastName"); 
```

我确信有更好的方法来指定我希望从哪些属性生成表（或者我想从表中排除哪些属性，这会更好，因为我通常需要大部分或所有类的属性），但我'不确定如何（我从未使用过反射，但我猜是这样）。此外，该方法应该接受任何类型的类的列表。

关于如何做到这一点的任何聪明的想法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-20T19:07:51.490

也许是这样的？

```
var html = GetMyTable(people, x => x.LastName, x => x.FirstName);

public static string GetMyTable<T>(IEnumerable<T> list,params Func<T,object>[] fxns)
{

    StringBuilder sb = new StringBuilder();
    sb.Append("<TABLE>\n");
    foreach (var item in list)
    {
        sb.Append("<TR>\n");
        foreach(var fxn in fxns)
        {
            sb.Append("<TD>");
            sb.Append(fxn(item));
            sb.Append("</TD>");
        }
        sb.Append("</TR>\n");
    }
    sb.Append("</TABLE>");

    return sb.ToString();
} 
```

**--2.0版--**

```
public static string GetMyTable<T>(IEnumerable<T> list, params  Expression<Func<T, object>>[] fxns)
{

    StringBuilder sb = new StringBuilder();
    sb.Append("<TABLE>\n");

    sb.Append("<TR>\n");
    foreach (var fxn in fxns)
    {
        sb.Append("<TD>");
        sb.Append(GetName(fxn));
        sb.Append("</TD>");
    }
    sb.Append("</TR> <!-- HEADER -->\n");

    foreach (var item in list)
    {
        sb.Append("<TR>\n");
        foreach (var fxn in fxns)
        {
            sb.Append("<TD>");
            sb.Append(fxn.Compile()(item));
            sb.Append("</TD>");
        }
        sb.Append("</TR>\n");
    }
    sb.Append("</TABLE>");

    return sb.ToString();
}

static string GetName<T>(Expression<Func<T, object>> expr)
{
    var member = expr.Body as MemberExpression;
    if (member != null)
        return GetName2(member);

    var unary = expr.Body as UnaryExpression;
    if (unary != null)
        return GetName2((MemberExpression)unary.Operand);

    return "?+?";
}

static string GetName2(MemberExpression member)
{
    var fieldInfo = member.Member as FieldInfo;
    if (fieldInfo != null)
    {
        var d = fieldInfo.GetCustomAttribute(typeof(DescriptionAttribute)) as DescriptionAttribute;
        if (d != null) return d.Description;
        return fieldInfo.Name;
    }

    var propertInfo = member.Member as PropertyInfo;
    if (propertInfo != null)
    {
        var d = propertInfo.GetCustomAttribute(typeof(DescriptionAttribute)) as DescriptionAttribute;
        if (d != null) return d.Description;
        return propertInfo.Name;
    }

    return "?-?";
} 
```

**PS：**重复调用`fxn.Compile()`可能是紧密循环中的性能杀手。将其缓存在字典中会更好。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-13T21:09:12.237

这就是我所做的，它似乎工作正常，并且没有对性能造成巨大影响。

```
 public static string ToHtmlTable<T>(this List<T> listOfClassObjects)
    {
        var ret = string.Empty;

        return listOfClassObjects == null || !listOfClassObjects.Any()
            ? ret
            : "<table>" +
              listOfClassObjects.First().GetType().GetProperties().Select(p => p.Name).ToList().ToColumnHeaders() +
              listOfClassObjects.Aggregate(ret, (current, t) => current + t.ToHtmlTableRow()) +
              "</table>";
    }

    public static string ToColumnHeaders<T>(this List<T> listOfProperties)
    {
        var ret = string.Empty;

        return listOfProperties == null || !listOfProperties.Any()
            ? ret
            : "<tr>" +
              listOfProperties.Aggregate(ret,
                  (current, propValue) =>
                      current +
                      ("<th style='font-size: 11pt; font-weight: bold; border: 1pt solid black'>" +
                       (Convert.ToString(propValue).Length <= 100
                           ? Convert.ToString(propValue)
                           : Convert.ToString(propValue).Substring(0, 100)) + "..." + "</th>")) +
              "</tr>";
    }

    public static string ToHtmlTableRow<T>(this T classObject)
    {
        var ret = string.Empty;

        return classObject == null
            ? ret
            : "<tr>" +
              classObject.GetType()
                  .GetProperties()
                  .Aggregate(ret,
                      (current, prop) =>
                          current + ("<td style='font-size: 11pt; font-weight: normal; border: 1pt solid black'>" +
                                     (Convert.ToString(prop.GetValue(classObject, null)).Length <= 100
                                         ? Convert.ToString(prop.GetValue(classObject, null))
                                         : Convert.ToString(prop.GetValue(classObject, null)).Substring(0, 100) +
                                           "...") +
                                     "</td>")) + "</tr>";
    } 
```

要使用它，只需传递 ToHtmlTable() 一个列表示例：

列出文档 = GetMyListOfDocuments(); var table = 文档.ToHtmlTable();

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T19:11:55.233

这里有两种方法，一种使用反射：

```
public static string GetMyTable(IEnumerable list, params string[] columns)
{
    var sb = new StringBuilder();
    foreach (var item in list)
    {
        //todo this should actually make an HTML table, not just get the properties requested
        foreach (var column in columns)
            sb.Append(item.GetType().GetProperty(column).GetValue(item, null));
    }
    return sb.ToString();
}
//used like
string HTML = GetMyTable(people, "FirstName", "LastName"); 
```

或使用 lambda：

```
public static string GetMyTable<T>(IEnumerable<T> list, params Func<T, object>[] columns)
{
    var sb = new StringBuilder();
    foreach (var item in list)
    {
        //todo this should actually make an HTML table, not just get the properties requested
        foreach (var column in columns)
            sb.Append(column(item));
    }
    return sb.ToString();
}
//used like
string HTML = GetMyTable(people, x => x.FirstName, x => x.LastName); 
```

使用 lambda，正在发生的事情是您将方法传递`GetMyTable`给获取每个属性的方法。这比反射有好处，比如强类型，可能还有性能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-12T13:06:46.733

祝你好运

**扩展方法**

```
 public static class EnumerableExtension
{
    public static string ToHtmlTable<T>(this IEnumerable<T> list, List<string> headerList, List<CustomTableStyle> customTableStyles, params Func<T, object>[] columns)
    {
        if (customTableStyles == null)
            customTableStyles = new List<CustomTableStyle>();

        var tableCss = string.Join(" ", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Table).Where(w => w.ClassNameList != null).SelectMany(s => s.ClassNameList)) ?? "";
        var trCss = string.Join(" ", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Tr).Where(w => w.ClassNameList != null).SelectMany(s => s.ClassNameList)) ?? "";
        var thCss = string.Join(" ", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Th).Where(w => w.ClassNameList != null).SelectMany(s => s.ClassNameList)) ?? "";
        var tdCss = string.Join(" ", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Td).Where(w => w.ClassNameList != null).SelectMany(s => s.ClassNameList)) ?? "";

        var tableInlineCss = string.Join(";", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Table).Where(w => w.InlineStyleValueList != null).SelectMany(s => s.InlineStyleValueList?.Select(x => String.Format("{0}:{1}", x.Key, x.Value)))) ?? "";
        var trInlineCss = string.Join(";", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Tr).Where(w => w.InlineStyleValueList != null).SelectMany(s => s.InlineStyleValueList?.Select(x => String.Format("{0}:{1}", x.Key, x.Value)))) ?? "";
        var thInlineCss = string.Join(";", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Th).Where(w => w.InlineStyleValueList != null).SelectMany(s => s.InlineStyleValueList?.Select(x => String.Format("{0}:{1}", x.Key, x.Value)))) ?? "";
        var tdInlineCss = string.Join(";", customTableStyles?.Where(w => w.CustomTableStylePosition == CustomTableStylePosition.Td).Where(w => w.InlineStyleValueList != null).SelectMany(s => s.InlineStyleValueList?.Select(x => String.Format("{0}:{1}", x.Key, x.Value)))) ?? "";

        var sb = new StringBuilder();

        sb.Append($"<table{(string.IsNullOrEmpty(tableCss) ? "" : $" class=\"{tableCss}\"")}{(string.IsNullOrEmpty(tableInlineCss) ? "" : $" style=\"{tableInlineCss}\"")}>");
        if (headerList != null)
        {
            sb.Append($"<tr{(string.IsNullOrEmpty(trCss) ? "" : $" class=\"{trCss}\"")}{(string.IsNullOrEmpty(trInlineCss) ? "" : $" style=\"{trInlineCss}\"")}>");
            foreach (var header in headerList)
            {
                sb.Append($"<th{(string.IsNullOrEmpty(thCss) ? "" : $" class=\"{thCss}\"")}{(string.IsNullOrEmpty(thInlineCss) ? "" : $" style=\"{thInlineCss}\"")}>{header}</th>");
            }
            sb.Append("</tr>");
        }
        foreach (var item in list)
        {
            sb.Append($"<tr{(string.IsNullOrEmpty(trCss) ? "" : $" class=\"{trCss}\"")}{(string.IsNullOrEmpty(trInlineCss) ? "" : $" style=\"{trInlineCss}\"")}>");
            foreach (var column in columns)
                sb.Append($"<td{(string.IsNullOrEmpty(tdCss) ? "" : $" class=\"{tdCss}\"")}{(string.IsNullOrEmpty(tdInlineCss) ? "" : $" style=\"{tdInlineCss}\"")}>{column(item)}</td>");
            sb.Append("</tr>");
        }

        sb.Append("</table>");

        return sb.ToString();
    }

    public class CustomTableStyle
    {
        public CustomTableStylePosition CustomTableStylePosition { get; set; }

        public List<string> ClassNameList { get; set; }
        public Dictionary<string, string> InlineStyleValueList { get; set; }
    }

    public enum CustomTableStylePosition
    {
        Table,
        Tr,
        Th,
        Td
    }
} 
```

**使用**

```
 private static void Main(string[] args)
    {
        var dataList = new List<TestDataClass>
        {
            new TestDataClass {Name = "A", Lastname = "B", Other = "ABO"},
            new TestDataClass {Name = "C", Lastname = "D", Other = "CDO"},
            new TestDataClass {Name = "E", Lastname = "F", Other = "EFO"},
            new TestDataClass {Name = "G", Lastname = "H", Other = "GHO"}
        };

        var headerList = new List<string> { "Name", "Surname", "Merge" };

        var customTableStyle = new List<EnumerableExtension.CustomTableStyle>
        {
            new EnumerableExtension.CustomTableStyle{CustomTableStylePosition = EnumerableExtension.CustomTableStylePosition.Table, InlineStyleValueList = new Dictionary<string, string>{{"font-family", "Comic Sans MS" },{"font-size","15px"}}},
            new EnumerableExtension.CustomTableStyle{CustomTableStylePosition = EnumerableExtension.CustomTableStylePosition.Table, InlineStyleValueList = new Dictionary<string, string>{{"background-color", "yellow" }}},
            new EnumerableExtension.CustomTableStyle{CustomTableStylePosition = EnumerableExtension.CustomTableStylePosition.Tr, InlineStyleValueList =new Dictionary<string, string>{{"color","Blue"},{"font-size","10px"}}},
            new EnumerableExtension.CustomTableStyle{CustomTableStylePosition = EnumerableExtension.CustomTableStylePosition.Th,ClassNameList = new List<string>{"normal","underline"}},
            new EnumerableExtension.CustomTableStyle{CustomTableStylePosition = EnumerableExtension.CustomTableStylePosition.Th,InlineStyleValueList =new Dictionary<string, string>{{ "background-color", "gray"}}},
            new EnumerableExtension.CustomTableStyle{CustomTableStylePosition = EnumerableExtension.CustomTableStylePosition.Td, InlineStyleValueList  =new Dictionary<string, string>{{"color","Red"},{"font-size","15px"}}},
        };

        var htmlResult = dataList.ToHtmlTable(headerList, customTableStyle, x => x.Name, x => x.Lastname, x => $"{x.Name} {x.Lastname}");
    }

    private class TestDataClass
    {
        public string Name { get; set; }
        public string Lastname { get; set; }
        public string Other { get; set; }
    } 
```

**结果**

```
<table class="normal underline" style="font-family:Comic Sans MS;font-size:15px;background-color:yellow">
<tr style="color:Blue;font-size:10px">
    <th style="background-color:gray">Name</th>
    <th style="background-color:gray">Surname</th>
    <th style="background-color:gray">Merge</th>
</tr>
<tr style="color:Blue;font-size:10px">
    <td style="color:Red;font-size:15px">A</td>
    <td style="color:Red;font-size:15px">B</td>
    <td style="color:Red;font-size:15px">A B</td>
</tr>
<tr style="color:Blue;font-size:10px">
    <td style="color:Red;font-size:15px">C</td>
    <td style="color:Red;font-size:15px">D</td>
    <td style="color:Red;font-size:15px">C D</td>
</tr>
<tr style="color:Blue;font-size:10px">
    <td style="color:Red;font-size:15px">E</td>
    <td style="color:Red;font-size:15px">F</td>
    <td style="color:Red;font-size:15px">E F</td>
</tr>
<tr style="color:Blue;font-size:10px">
    <td style="color:Red;font-size:15px">G</td>
    <td style="color:Red;font-size:15px">H</td>
    <td style="color:Red;font-size:15px">G H</td
</tr> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-19T16:27:44.157

扩展@Tim 的答案

```
 public string GetHtmlTable<T, Tproperty>(IEnumerable<T> list, params Expression<Func<T, Tproperty>>[] columns)
    {
        var sb = new StringBuilder();

        sb.AppendLine("<table>");
        sb.AppendLine("<tr>");
        foreach (var column in columns)
        {
            sb.Append("<th>");
            sb.Append(GetPropertyName(Activator.CreateInstance<T>(), column));
            sb.Append("</th>");
        }
        sb.AppendLine("</tr>");
        sb.AppendLine("<tbody>");

        foreach (var item in list)
        {
            sb.AppendLine("<tr>");

            foreach (var column in columns)
            {
                var func = column.Compile();
                sb.Append("<td>");
                sb.Append(func(item));
                sb.Append("</td>");

            }
            sb.AppendLine("</tr>");
        }
        sb.AppendLine("</tbody>");
        sb.AppendLine("</table>");

        return sb.ToString();
    }

    public string GetPropertyName<TSource, TProperty>(TSource source, Expression<Func<TSource, TProperty>> propertyLambda)
    {
        Type type = typeof(TSource);

        var expressionBody = propertyLambda.Body;
        if (expressionBody is UnaryExpression expression && expression.NodeType == ExpressionType.Convert)
        {
            expressionBody = expression.Operand;
        }

        MemberExpression member = (MemberExpression)expressionBody;
        if (member == null)
            return "";

        PropertyInfo propInfo = member.Member as PropertyInfo;
        if (propInfo == null)
            return "";

        if (type != propInfo.ReflectedType &&
            !type.IsSubclassOf(propInfo.ReflectedType)) return "";

        return propInfo.Name;
    }
} 
```

# jquery - jquery代码没有链接链接

> ID：11126142
> 
> 赞同：1
> 
> 时间：2012-06-20T18:46:07.500
> 
> 标签：jquery

我有以下 jquery 代码：

```
$(document).ready(function() {
$("body[class*=page-calendar-practices] #content-header h1#title").after("<div id='athletics_practice-schedule'><div id='inner-title'><a href='www.example.com' class='athletics_links'>GAMES</a><a href='www.example.com/games' class='athletics_links'>PRACTICES</a></div></div>");

}); 
```

此代码在页面上按应有的方式创建锚链接，但是（至少在 Google Chrome 中）它们不会显示为链接，而是显示为文本。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:47:13.040

可能是因为它们不是正确的 URL？您需要在绝对 URL 的域名前添加“http://”。

[http://jsfiddle.net/X3399/1/](http://jsfiddle.net/X3399/1/) - 您的代码实际上工作正常，但链接没有指向您可能期望它们指向的位置。

# javascript - Jquery id 选择器变量无法绑定到 onchange

> ID：11126144
> 
> 赞同：1
> 
> 时间：2012-06-20T18:46:11.180
> 
> 标签：javascript, jquery, variables, dynamic, jquery-selectors

我在表单中有输入区域列表，其 id 为“contact1_title”、“contact2_title”、“contact3_title”......

而且我在这个表格中也有一个选择列表，其中 id 像“contact1_name”、“contact2_name”、“contact2_name”......

我想编写一个循环来动态绑定选择的 onchange 函数。

这是我的代码：

```
for(var j=1;j<6;j++){                        
                    $('#contact'+j+'_name').change(function() {
                        alert(j);
                        //json.engineer is a json object
                        $('#contact'+j+'_title').val( json.engineer[this.selectedIndex-1].title );
                    });
} 
```

当我更改选择时，它总是提醒 6。

并且标题输入区域不能通过选择来改变。

这是否意味着javascript中的变量总是改变？

如何动态绑定动作？

我可以使用 "this.name.split("_")[0]" 破解它，但代码看起来很难看。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:47:14.667

`change`通过闭包来包装你的功能：

```
for(var j=1;j<6;j++){     
    (function(j){                   
         $('#contact'+j+'_name').change(function() {
             alert(j);
             //json.engineer is a json object
             $('#contact'+j+'_title').val( json.engineer[this.selectedIndex-1].title );
         });
     })(j);
} 
```

问题是，当您单击时，您的循环已经结束，因此`j`等于`6`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:57:07.917

另一种解决方案是将计数器作为事件数据传递：

```
for(var j=1;j<6;j++){                        
    $('#contact'+j+'_name').change({index: j}, function(event) {
        $('#contact' + event.data.index + '_title')
           .val(json.engineer[this.selectedIndex-1].title );
    });
} 
```

如果您可以避免使用`for`循环，那就更好了，但这取决于您的标记以及您是否可以控制创建的元素，因为您可能必须调整它们才能这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:52:17.230

已经有一个闭包，有效地使用它。

```
for(var j=1;j<6;j++){                        
     $('#contact'+j+'_name').change(function() {
     var k=j;
     alert(k);
     //json.engineer is a json object
     $('#contact'+k+'_title').val( json.engineer[this.selectedIndex-1].title );
     });
} 
```

# java - Apache Tomcat 安全性

> ID：11126145
> 
> 赞同：0
> 
> 时间：2012-06-20T18:46:13.007
> 
> 标签：java, tomcat, axis2, rampart, security-constraint

我快要完成我的Tomcat 配置了。

我遇到的麻烦与我的客户端应用程序和浏览器有关。

我希望当用户使用他的浏览器访问 Tomcat 时，它只能通过 https 访问，以便我可以使用证书进行身份验证。

在我的客户端应用程序中，当我与axis2通信时，我只想使用http，所以我不会超载服务器。我正在使用带有使用证书的密码回调的 apache 壁垒，因此不使用 https 没有问题。

现在，这就是问题的开始。这是我设法开始工作的内容：

在 tomcat 上允许 SSL，客户端认证就像浏览器的魅力一样。

但是，服务器仍然可以通过

```
http://localhost:8080 
```

关于这个问题，这是我的 server.xml：

```
<Connector port="8080" protocolo="HTTP/1.1" redirectPort="8443" />

<Connector port="8443" maxThreads="150" scheme="https" secure="true" SSLEnabled="true" keystoreFile="conf/service.jks" keystorePass="password" clientAuth="true" keyAlias="service" sslProtocol="TLS"/> 
```

它不应该重定向到 8443 端口吗？

我的客户端应用程序可以通过 8080 端口毫无问题地进行通信。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:02:04.963

您是否在应用程序的 web.xml 中定义了安全约束？如果没有，请尝试添加如下内容：

```
<security-constraint>
  <web-resource-collection>
    <web-resource-name>SSL Forwarding</web-resource-name>
    <url-pattern>/*</url-pattern>
  </web-resource-collection>
  <user-data-constraint>
    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
  </user-data-constraint>
</security-constraint> 
```

# c# - 创建新线程时，Web API“ApiController”是否会从 ASP.NET 线程池中窃取线程？

> ID：11126146
> 
> 赞同：0
> 
> 时间：2012-06-20T18:46:13.283
> 
> 标签：c#, asp.net-mvc, asynchronous, asp.net-web-api

据我了解，MVC`AsyncController`专门用于处理在创建新线程时避免从 ASP.NET 线程池中窃取线程的问题。新的 Web API 没有类似的`AsyncApiController`. 的继承/实现签名也与和`ApiController`非常不同。`Controller``AsyncController`

**问题：** Web API 是否已经处理了在创建新线程时避免从 ASP.NET 线程池中窃取线程的问题？我错过了自动处理这个的新东西吗？

**以供参考：**

*   [MVC：控制器](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.aspx)
*   [MVC：异步控制器](http://msdn.microsoft.com/en-us/library/system.web.mvc.asynccontroller.aspx)
*   [Web API：ApiController](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller%28v=vs.108%29.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T21:59:02.227

`ApiController`实现`IHttpController`并且该接口只定义了一个`ExecuteAsync`返回 a 的方法 ( ) `Task`，因此这意味着它`ApiController`是异步的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T23:44:41.333

MVC 在 MVC 2 中引入了 AsyncController 来支持异步方法。使用异步控制器不会使您的代码神奇地异步。在 MVC 4 中，控制器支持异步方法，因此不需要 AsyncController。异步方法不会用神奇的轻量级线程替换 ASP.NET 或 IIS 线程 - 当您进行异步工作时，您并不总是使用线程。例如，当您发出异步 Web 服务请求时，ASP.NET 不会在异步方法调用和等待之间使用任何线程。请参阅我的教程[在 ASP.NET MVC 4 中使用异步方法](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

# spring - 带有备用数据源的 Grails 'withTransaction'

> ID：11126149
> 
> 赞同：5
> 
> 时间：2012-06-20T18:46:29.653
> 
> 标签：spring, grails, grails-orm

试图弄清楚如何在 grails 中使用备用数据源打开事务。我定义了以下数据源...

```
dataSource {
    dbCreate = "update"
    url = "jdbc:h2:mem:testDb;MVCC=TRUE"
}

dataSource_ALT {
   dbCreate = "update"
   url = "jdbc:h2:mem:altDb;MVCC=TRUE"
} 
```

我可以使用默认的数据源来做到这一点......

```
Foo.withTransaction { status ->
    //...
} 
```

但是当我尝试使用 ALT 数据源执行此操作时，我得到一个异常 - '没有配置 transactionManager bean'......

```
Foo.ALT.withTransaction { status ->
   //...
} 
```

有没有办法使用不同的数据源启动事务？我已经进行了一些挖掘，但找不到太多。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:58:10.463

@Raphael您的建议确实有效。我能够进行下一步并通过分配事务管理器来使 withTransaction 正常工作。它们似乎是被创造出来的，只是没有附着。它们以 Spring bean 的形式存在，命名为 transactionManager_ALT（在本例中）。不确定实际上是什么创建了它们，以及为什么它们没有附加到 GormStaticApi。

即在这里你会做：

```
Foo["ALT"].transactionManager = transactionManager_ALT 
```

可能会尝试选择一个域类并分配所有不同的事务管理器，看看是否可行，然后在任何地方使用该域类来启动事务。

# android - 在 Phonegap 中读取 URL/Google Docs/XML

> ID：11126150
> 
> 赞同：1
> 
> 时间：2012-06-20T18:46:36.483
> 
> 标签：android, cordova

我有谷歌电子表格，它每隔几分钟更新一次数据

我已将其作为 html 页面发布

我想从那个html页面导入到phonegap

google doc 也支持 Android XML。

如何将文本从 html 读入支持 html 的 phonegap

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:40:41.890

IIRC，您可以很容易地以 JSON 格式获取 Google Docs 电子表格。

这是我可以在书签中找到的唯一链接，但它应该可以帮助您入门：[http ://david-burger.blogspot.com.au/2009/03/display-google-docs-spreadsheet-data-on .html](http://david-burger.blogspot.com.au/2009/03/display-google-docs-spreadsheet-data-on.html)

# ruby - 如何访问存储为变量的属性

> ID：11126152
> 
> 赞同：0
> 
> 时间：2012-06-20T18:46:49.760
> 
> 标签：ruby, variables

模型样本具有汽车、自行车的属性

```
x ="bike"

y = Sample.new 
```

我能怎么做？

是吗？它给了我一个错误有什么办法可以做到吗，我知道 x 是一个属性，但我不知道是哪一个。

那么我怎样才能得到 yx 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:48:09.150

当方法存储为字符串时，您可以使用它[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)来调用对象上的方法：

```
x = "bike"

y = Sample.new

y.send(x) # Equivalent to y.bike 
```

以下是等效的，除了您可以`send`保护方法：

```
object.method_name
object.send("method_name")
object.send(:method_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:48:11.757

您必须使用动态消息传递。试试这个：

```
y.send :bike 
```

或者，在你的情况下

```
y.send x 
```

# html - 如何为输入 html5 执行该模式？

> ID：11126155
> 
> 赞同：0
> 
> 时间：2012-06-20T18:47:00.680
> 
> 标签：html, input

我需要为我的输入生成这样的模式，例如：

```
+375 29 911-91-91 
```

一般来说，它看起来像这样：

```
+375 XX XXX-XX-XX 
```

注意空格！

我试过这个：

```
[\+][\ ]\d{3}[\ ]\d{2}\d{3}[\-]\d{2}[\-]\d{2} 
```

这会在IE中工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:56:13.547

```
\+\d{3}\s\d{2}\s\d{3}\-\d{2}\-\d{2} 
```

应该管用。您也不需要将方括号 [ 和 ] 放在每个字符周围，除非您想要进行 or [a|b] 测试或者您需要执行一系列字符 [az]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:56:58.307

+\s*\d{3}\s+\d{2}\s+\d{3}-\d{2}-\d{2}

# php - 按两个值对多维数组进行分组

> ID：11126158
> 
> 赞同：2
> 
> 时间：2012-06-20T18:47:14.657
> 
> 标签：php

我有这样的数组。

```
[11] => Array
    (
        [transactioncurrencyid] => Array
            (
                [!name] => US Dollar
                [!] => {041E3DC9-D938-DD11-982C-0013724C58B7}
            )

        [smi_processingmonth] => Array
            (
                [!date] => 6/1/2011
                [!time] => 2:27 PM
                [!] => 2011-06-01T14:27:00-07:00
            )

        [smi_cchistoryid] => {678C5036-9EAA-E111-88E0-00155D010302}
        [smi_includeindeal] => Array
            (
                [!name] => No
                [!] => 0
            )

                  [smi_locationid] => Array
            (
                [!name] => 1134 Hooksett Rd
                [!] => {5CC1585B-91AA-E111-88E0-00155D010302}
            )
    )

[12] => Array
    (
        [transactioncurrencyid] => Array
            (
                [!name] => US Dollar
                [!] => {041E3DC9-D938-DD11-982C-0013724C58B7}
            )

        [smi_processingmonth] => Array
            (
                [!date] => 5/1/2011
                [!time] => 2:27 PM
                [!] => 2011-05-01T14:27:00-07:00
            )

        [smi_cchistoryid] => {688C5036-9EAA-E111-88E0-00155D010302}
        [smi_includeindeal] => Array
            (
                [!name] => No
                [!] => 0
            )

        [smi_locationid] => Array
            (
                [!name] => 1134 Hooksett Rd
                [!] => {5CC1585B-91AA-E111-88E0-00155D010302}
            )
    ) 
```

我如何按位置 ID 对它们进行分组，然后按 smi_processingmonth

所以我得到这样的东西

```
[1134 Hooksett Rd] => Array
    (
        [ 5/1/2011] = array(
            [transactioncurrencyid] => Array
            (
                [!name] => US Dollar
                [!] => {041E3DC9-D938-DD11-982C-0013724C58B7}
            )

            [smi_processingmonth] => Array
                (
                    [!date] => 5/1/2011
                    [!time] => 2:27 PM
                    [!] => 2011-05-01T14:27:00-07:00
                )

            [smi_cchistoryid] => {688C5036-9EAA-E111-88E0-00155D010302}
            [smi_includeindeal] => Array
                (
                    [!name] => No
                    [!] => 0
                )

            [smi_locationid] => Array
                (
                    [!name] => 1134 Hooksett Rd
                    [!] => {5CC1585B-91AA-E111-88E0-00155D010302}

             )
           )
         [1/1/2011] = array(
          [transactioncurrencyid] => Array
            (
                [!name] => US Dollar
                [!] => {041E3DC9-D938-DD11-982C-0013724C58B7}
            )

        [smi_processingmonth] => Array
            (
                [!date] => 6/1/2011
                [!time] => 2:27 PM
                [!] => 2011-06-01T14:27:00-07:00
            )

        [smi_cchistoryid] => {678C5036-9EAA-E111-88E0-00155D010302}
        [smi_includeindeal] => Array
            (
                [!name] => No
                [!] => 0
            )

                  [smi_locationid] => Array
            (
                [!name] => 1134 Hooksett Rd
                [!] => {5CC1585B-91AA-E111-88E0-00155D010302}
            )
            )
    ) 
```

我试过了

```
 foreach($array as $keys)
                {

                    $key =  $keys['smi_processingmonth']['!date'];;
                    if (!isset($groups[$key])) 
                    {
                        $groups[$key] =  array($keys);
                    } else {
                        $groups[$key][] = $keys;
                    }
                }
                $newGroups = array();

                if(is_array($groups))
                {
                    foreach($groups as $cats => $values)
                    {

                        foreach($values as $itemValues){
                            $st = rtrim(trim($itemValues['smi_locationid']['!']));
                                $key = $st;
                                if (!isset($newGroups[$key])) 
                                {
                                    $newGroups[$key] = array($groups);

                                } else {
                                    $newGroups[$key][] = $itemValues;
                                }
                            }
                        }
                    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:03:22.650

取自 Johan 的一些修改：

*   如果已经使用修剪，请避免使用 ltrim
*   放入一个函数，我可以使用临时变量来保持可读性
*   添加一个 final **[]**，以避免令人讨厌的 $name/$date 冲突，超出原始请求，但更安全

> ```
> function compactArray($data)
> {
>     $new_structure = array();
>     foreach ( $data as $row ) 
>       {
>         $name = trim($row['smi_locationid']['!name']);
>         $date = trim($row['smi_processingmonth']['!date']);
>         $new_structure[ $name ][ $date ][] = $row;
>     }
>     return $new_structure;
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:32:54.590

嗯，我没有测试过。但不只是：

```
$new_structure = array();
foreach ( $data as $row ) {
  $key1 = rtrim(trim($row['smi_locationid']['!name']));
  $key2 = rtrim(trim($row['smi_processingmonth']['!date']));
  $new_structure[$key1][$key2] = $row;
} 
```

这段代码可以使用一些 isset()s，但为了清楚起见，我决定将它们排除在外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:54:27.303

以下产生您想要的输出数组，正确排序：

```
function transaction_datecmp($tran1, $tran2)
{
   return strtotime($tran1['smi_processingmonth']['!']) -
          strtotime($tran2['smi_processingmonth']['!']);
}

$output_arr = array();
foreach ($input_arr as $transaction) {
   $location = $transaction['smi_locationid']     ['!name'];
   $date     = $transaction['smi_processingmonth']['!date'];
   $output_arr[$location][$date] = $transaction;
}
ksort($output_arr); // sorts by location
foreach ($output_arr as &$transaction_arr) {
   uasort($transaction_arr, 'transaction_datecmp');
} 
```

您的数据结构依赖于同一天不可能有两个事务的假设，这是一个有点危险的假设。同样使用位置作为键也很不理想（因为拼写、位置变化等）——除非它真的应该对事物进行分组，比如纸质邮件。

数据清理，如`trimm`ing 字符串，应该事先完成，最好在数据输入时完成。

# magento - 如何合并订单中的商品以在 magento 中发货？

> ID：11126167
> 
> 赞同：-1
> 
> 时间：2012-06-20T18:47:36.680
> 
> 标签：magento

我正在考虑将来自不同订单的多个商品放入同一个装运箱中。理想情况下，当我去发货订单时，该订单的项目部分会显示该客户的所有未清项目。我已将生成项目的代码隔离到：

app/design/adminhtml/default/mytemplate/template/sales/order/shipment/create/items.phtml

以及该文件中的代码行：

$_items = $this->getShipment()->getAllItems();

在函数 getAllItems 我添加了以下代码：

```
$cust_orders = Mage::getModel('sales/order')->getCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToSelect('entity_id')
    ->addFieldToFilter('customer_id',$this->getCustomerId());

foreach ($cust_orders as $order) {
    $order_id = $order->getEntityId();
    $cust_items = Mage::getModel('sales/order_item')
        ->getCollection()
        ->addAttributeToSelect('*')
        ->addFieldToFilter('order_id', $order_id);
    foreach ($cust_items as $cust_item) {
        { help! }
    } 
```

我需要一些帮助！部分。我正在尝试将新数组 ($cust_items) 正确地放入数组 $items 中。但我似乎无法弄清楚那部分......似乎使用 getItemsCollection 函数填充了对象；我正在做的事情已经漂泊了......

如果您有任何新想法，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:00:43.177

```
 $cust_orders = Mage::getModel('sales/order')->getCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToSelect('entity_id')
    ->addFieldToFilter('customer_id',$this->getCustomerId());

foreach ($cust_orders as $order) {
    $order_id = $order->getEntityId();
    $cust_items = Mage::getModel('sales/order_shipment_item')
        ->getCollection()
        ->addAttributeToSelect('*')
        ->addFieldToFilter('parent_id', $order_id);
    foreach ($cust_items as $cust_item) {
        $items[] = $cust_item;
    } 
```

其他一些小调整和更多测试，但我看起来不错。

这个答案显然是错误的......仍在努力寻找解决方案......让我很困惑......

# jquery - 悬停时激活

> ID：11126169
> 
> 赞同：0
> 
> 时间：2012-06-20T18:47:52.410
> 
> 标签：jquery, hover, hoverintent

我想创建一个选项卡式窗口。带有 3 个选项卡`Blue`、`Green`和`Red`。第一个选项卡，`Blue`其内容默认选择。

我需要一个 jQuery 脚本来完成这项工作：当鼠标移到每个选项卡上时，应该选择标题（`selected`类）并显示内容；当鼠标离开时（从标题或内容），500 毫秒后，应该选择默认选项卡。（最重要的是：当鼠标从标题到内容时，内容不应该隐藏。如果鼠标完全熄灭，默认应该显示）

另一件事是，如果使用单击选定的标题或内容，默认应更改为当前选定的选项卡。

例如，我创建[了这个小提琴](http://jsfiddle.net/Xkjbq/3/)。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:18:00.280

这是使用[jQuery UI 的 Tabs](http://jqueryui.com/demos/tabs/#mouseover)的示例：

[http://jsfiddle.net/lbstr/Xkjbq/8/](http://jsfiddle.net/lbstr/Xkjbq/8/)

一旦你像他们在他们的例子中那样设置了 html 结构，你所要做的就是这个

```
$('#tabs').tabs({event: "mouseover"}); 
```

你完成了，儿子。

# ios - 在免费和付费应用程序之间共享文件

> ID：11126172
> 
> 赞同：1
> 
> 时间：2012-06-20T18:47:58.270
> 
> 标签：ios, file, share

我们在 App Store 上有一个付费应用，其 id 遵循 com.company.client 的行，我们希望添加一个免费版本，最好使用 com.company.client.free 的 id。我需要弄清楚，如果用户在使用免费应用程序后购买付费应用程序，他们可以将他们的数据从免费版本获取到付费应用程序......我记得在某处读过这是可能的，但我不能我的生活在苹果文档中找到它。我隐约记得这与应用程序的捆绑 ID 和使用通配符有关，但由于我们已经在应用程序商店中有一个无法更改的版本，我不知道这会如何影响它。任何帮助或正确文档的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:10:02.353

您可以在同一系列的应用程序之间共享钥匙串数据。但是，我只建议将其用于小用户数据，例如密码、用户名等。

请参阅本指南以了解如何执行此操作： http: [//useyourloaf.com/blog/2010/04/03/keychain-group-access.html](http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html)

对于较重的数据，我建议您使用带有用户帐户的在线服务在您的应用程序之间共享数据。（正如 Clafou 所说，iCloud 可能会在 iOS5 及更高版本中为您提供帮助）

您的第三种选择可能是免费提供付费版本，然后对付费内容使用 add in-app-purchase。但这可能会导致问题，例如如何处理已经为您的应用付费的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:22:22.780

我有类似的要求，但尚未尝试，但如果您乐于使用 iCloud，那么您可以在您的应用程序的两个版本中使用相同的 iCloud 标识符（与您的 Bundle ID 不同），以便数据可以是跨设备和跨您的应用程序版本（付费和免费）同步。

# r - R gui的批处理

> ID：11126177
> 
> 赞同：0
> 
> 时间：2012-06-20T18:48:10.103
> 
> 标签：r, batch-file

我创建了一个批处理文件来在 Rterm.exe 中启动 R 脚本。这适用于常规的每周任务。<PBWeeklyMeetingScriptV3.R> 是 Rterm 运行的 R 脚本。

> 设置 R_TERM="C:\Program Files\R\R-2.14.0\bin\x64\Rterm.exe"
> 
> %R_TERM% --slave --no-restore --no-save --args 20120401 20110403 01-apr-12 03-apr-11 < PBWeeklyMeetingScriptV3.R > PBWeeklyMeetingScriptV3.batch 2> error.txt

我试图修改它以启动 R GUI 而不是后台进程，因为我想检查并可能操纵和检查数据。

如果我将批处理文件更改为：

> 设置 R_TERM="C:\Program Files\R\R-2.14.0\bin\x64\Rgui.exe"

批处理文件将启动 R GUI，但不会启动脚本。有没有办法启动脚本呢？

或者，有没有办法保存/加载工作空间图像以访问在脚本中创建的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:11:01.340

您可以使用 save.image() 和 load() 保存和加载工作区。我在编写脚本以在两个单独的脚本文件之间传递数据集时一直这样做，这些脚本文件使用 Python 或 bash 捆绑在一起。在每个 R 脚本的末尾，只需添加：

```
save.image("Your_image_name.RData") 
```

该图像将是运行命令时存在的工作区（因此，如果它是文件中的最后一个命令，则它是文件存在之前的工作区）。在我的工作中，我们还使用它来创建输入和输出数据的“快照”，以便我们以后可以重现研究。（我们使用简单的命名约定来获取运行时间，然后用它标记文件）。

不确定是否启动并运行带有特定脚本的 GUI；我不认为这是您在 R 中可以找到的功能，仅仅是因为运行批处理文件的全部目的通常是避免使用 GUI。但希望您可以将图像保存到磁盘，然后根据需要查看或将其传递给其他程序。希望有帮助！

# postgresql - 使用按位 AND 运算符对位串列进行排除约束

> ID：11126180
> 
> 赞同：6
> 
> 时间：2012-06-20T18:48:15.203
> 
> 标签：postgresql, indexing, constraints, bit-manipulation, postgresql-9.1

所以我只是在阅读PostgreSQL 中的[排除约束](http://www.postgresql.org/docs/9.1/static/sql-createtable.html#SQL-CREATETABLE-EXCLUDE)，我似乎找不到在位串上使用位运算符的方法，我想知道这是否可能。

我的用例是我有一`name: text`列和一`value: bit(8)`列。我想创建一个基本上这样说的约束：

```
ADD CONSTRAINT route_method_overlap
EXCLUDE USING gist(name WITH =, value WITH &) 
```

但这不起作用，因为

> 运算符 &(bit,bit) 不是运算符系列“gist_bit_ops”的成员

我认为这是因为 bit_ops & 运算符不返回布尔值。但是有没有办法做我想做的事情？有没有办法强制`operator &`将其返回值转换为布尔值？

### 编辑

忘记版本号了。这是在 9.1.4 上安装的“btree_gist”扩展，全部来自 Ubuntu 12.04 存储库。但版本无关紧要。如果上游有修复/更新，我可以从存储库安装。我还处于这个设计阶段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T21:13:50.580

您安装了扩展[`btree_gist`](https://www.postgresql.org/docs/current/btree-gist.html)。没有它，该示例将在`name WITH =`.

```
CREATE EXTENSION btree_gist; 
```

安装的算子类`btree_gist`覆盖了很多算子。不幸的是，`&`运营商不在其中。显然，因为它不返回`boolean`预期运营商符合条件的 a 。

### 替代解决方案

我会使用 b-tree**多列索引**（用于速度）和**触发器**的组合。考虑这个演示，在 PostgreSQL **9.1**上测试：

```
CREATE TABLE t (
  name text 
, value bit(8)
);

INSERT INTO t VALUES ('a', B'10101010'); 

CREATE INDEX t_name_value_idx ON t (name, value);

CREATE OR REPLACE FUNCTION trg_t_name_value_inversion_prohibited()
  RETURNS trigger
  LANGUAGE plpgsql AS
$func$
BEGIN
   IF EXISTS (
      SELECT FROM t
      WHERE (name, value) = (NEW.name, ~ NEW.value)  -- example: exclude inversion
      ) THEN

       RAISE EXCEPTION 'Your text here!';
   END IF;

   RETURN NEW;
END
$func$;

CREATE TRIGGER insup_bef_t_name_value_inversion_prohibited
BEFORE INSERT OR UPDATE OF name, value  -- only involved columns relevant!
ON t
FOR EACH ROW
EXECUTE FUNCTION trg_t_name_value_inversion_prohibited();

INSERT INTO t VALUES ('a', ~ B'10101010');  -- fails with your error msg. 
```

在 Postgres 10 或更早版本中使用：

```
...
EXECUTE PROCEDURE trg_t_name_value_inversion_prohibited(); 
```

看：

*   [触发功能不存在，但我很确定它存在](https://dba.stackexchange.com/a/255319/3684)

[`~`是反演算子](https://www.postgresql.org/docs/current/functions-bitstring.html)。

在这种情况下`btree_gist`不需要*扩展*。

为了提高效率，我将[触发器限制在`INSERT OR UPDATE OF`相关列](https://www.postgresql.org/docs/current/sql-createtrigger.html)。

**检查约束**不起作用。我引用[手册`CREATE TABLE`](https://www.postgresql.org/docs/current/sql-createtable.html)：

> 目前，`CHECK`表达式不能包含子查询，也不能引用除**当前行**的列之外的变量。

大胆强调我的。

应该执行得很好，实际上比排除约束要好，因为维护 b-tree 索引比 GiST 索引便宜。并且使用基本`=`运算符的查找应该比使用`&`运算符的假设查找更快。

此解决方案不像排除约束那样万无一失，因为触发器可以更容易地被规避 - 例如在同一事件的后续触发器中，或者如果触发器被暂时禁用。如果出现此类情况，请准备好对整张桌子进行额外检查。

### 更复杂的条件

示例触发器仅捕获`value`. 正如您在评论中澄清的那样，您实际上需要这样的条件：

```
IF EXISTS (
      SELECT FROM t
      WHERE  name = NEW.name
      AND    value & NEW.value <> B'00000000'::bit(8)
      ) THEN 
```

这种条件稍微贵一些，但仍然可以使用索引。上面的多列索引可以工作 - 如果你有使用它的话。或者，更有效的是，一个简单的名称索引：

```
CREATE INDEX t_name_idx ON t (name); 
```

您评论说，每个最多只能有 8 个不同的行`name`，实际上更少。所以这应该还是很快的。

### 终极插入性能

如果`INSERT`性能是最重要的，特别是如果许多尝试的 INSERT 都未能满足条件，您可以做更多：创建一个预先聚合的物化`value`视图`name`：

```
CREATE TABLE mv_t AS 
SELECT name, bit_or(value) AS value
FROM   t
GROUP  BY 1
ORDER  BY 1; 
```

`name`保证在这里是独一无二的。我会使用`PRIMARY KEY`on`name`来提供我们所追求的索引：

```
ALTER TABLE mv_t SET (FILLFACTOR=90);

ALTER TABLE mv_t
ADD CONSTRAINT mv_t_pkey PRIMARY KEY(name); 
```

然后你`INSERT`可能看起来像这样：

```
WITH i(n,v) AS (SELECT 'a'::text, B'10101010'::bit(8)) 
INSERT INTO t (name, value)
SELECT n, v
FROM   i
LEFT   JOIN mv_t m ON m.name = i.n
                  AND m.value & i.v <> B'00000000'::bit(8)
WHERE  m.n IS NULL;          -- alternative syntax for EXISTS (...) 
```

仅当[`fillfactor`](https://www.postgresql.org/docs/current/sql-createtable.html)您的表获得大量更新时才有用。

更新物化视图中的行以`TRIGGER AFTER INSERT OR UPDATE OF name, value OR DELETE`使其保持最新。必须仔细权衡额外对象的成本和收益。很大程度上取决于您的典型负载。

# html - CSS悬停 - 我如何让它改变两个嵌套的div

> ID：11126184
> 
> 赞同：0
> 
> 时间：2012-06-20T18:48:27.730
> 
> 标签：html, css, hover

我正在尝试在 td 上完成悬停触发器，这将更改类“selectTemplate”更改的整个背景。但是目前发生的事情是 -`{{description}}`更改正确，但`{{name}}`保持不变。

我希望`{{name}}`&`{{description}}`在悬停时都改变。

HTML

```
<table class="templateList templatepolicy-table">
        <thead>
        </thead>
        <tbody>
        {{#items}}
            <div id="TemplateItem">
                <tr>
                    <td>
                        <div id="{{sequence}}" class="selectTemplate">
                                <div class="TemplateName">
                                    {{name}}
                                </div>
                                {{description}}
                        </div>

                    </td>
                </tr>
            </div>
        {{/items}}
        </tbody>
    </table> 
```

CSS

```
table.templatepolicy-table 
{
    width: 100%;
    border-width: 0px;
    border-spacing: 5px;
    border-style: none;
    border-color: black;
    border-collapse: separate;
    background-color: white;
}

table.templatepolicy-table .TemplateName  
{
    background-color: rgb(232, 232, 232); 
    color: #2779AC;
    font-weight:bolder;
}

table.templatepolicy-table td 
{
    color: #656565;
    width: 100%;
    border-width: 0px;
    padding: 5px;
    border-style: none;
    border-color: white;
    background-color: rgb(232, 232, 232);
}

table.templatepolicy-table td:hover
{ 
    color: #FFF;
    background-color: #2779AC;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:51:12.123

将最后一个选择器更改为：

```
table.templatepolicy-table td:hover,
table.templatepolicy-table td:hover .TemplateName {
    color: #FFF;
    background-color: #2779AC;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:01:12.497

我想通知您，如果您使用 td:hover，它将无法在较低版本的 IE 上运行。

现在关于你的css不起作用，让我向你解释原因。您的主要问题是悬停在`<td>`整个背景颜色上时`class="selectTemplate" or the td`没有改变。实际上它在变化，但是当您`<div class="TemplateName">`使用 this定义背景颜色时`table.templatepolicy-table .TemplateName { background-color: rgb(232, 232, 232); }`，它与更改的背景颜色重叠。

`<div class="TemplateName">`因此，要解决这个问题，您必须通过悬停更改背景颜色。正如之前的答案所说，代码将是： -

```
table.templatepolicy-table td:hover,
table.templatepolicy-table td:hover .TemplateName {
    color: #FFF;
    background-color: #2779AC;
} 
```

希望这能澄清您的疑问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:52:49.313

那是因为`.TemplateName`有一套`background-color`，所以这条规则被遵守了。你必须覆盖它：

```
table.templatepolicy-table td:hover,
table.templatepolicy-table td:hover .TemplateName {
   color: #FFF;
   background-color: #2779AC;
} 
```

# mysql - MYSQL SUM() 在一个表中并与另外 2 个表连接

> ID：11126186
> 
> 赞同：2
> 
> 时间：2012-06-20T18:48:35.383
> 
> 标签：mysql, sql, join, sum

我有 3 个表：`items`、`purchases`和`collaborators`。用户可以拥有一件物品、购买一件物品或成为一件物品的合作者。此外，所购买的物品的评级可以上调`+1`、 或下调 、`-1`。所有者或合作者不能购买他们自己的项目。

我想获取给定用户的所有项目，并显示每个项目的评级。

这是我的桌子：

```
 items           |           purchases           |     collaborators
i_id  item_id user_id | p_id item_id  user_id  rating |c_id item_id user_id
  1      1       11   |  1      1         13     -1   |  1     1        12 
  2      2       12   |  2      2         11      1   |  2     2        13
  3      3       13   |  3      3         12     NULL |    
                      |  4      1         14     -1   | 
```

到目前为止，这是我的 MYSQL 查询：

```
select *, count(p_id) as tots, sum(rating=1) as yes, sum(rating= '-1') as no
from items
left join purchases
on items.item_id=purchases.item_id
left join collaborators
on items.item_id=collaborators.item_id
where items.user_id=13 or purchases.user_id=13 or collaborators.user_id=13
group by items.item_id 
```

这是我的预期结果`user_id=11`（更改子句中的**每个）：** `user_id``WHERE`

```
item_id    tots  yes no
  1         2     0   2
  2         1     1   0
// notice how user_id=11 doesn't have anything to do with item_id=3 
```

这是我的预期结果`user_id=12`：

```
item_id    tots  yes no
  1         2     0   2
  2         1     1   0    
  3         1     1   0 
```

这是我的预期结果`user_id=13`：

```
item_id    tots  yes no
  1         2     0   2
  2         1     1   0    
  3         1     1   0   
//notice user_id=13 should have same results as user_id=12\. Although, their 
relation to each of the 3 items is different, they still either purchased, 
own, or collaboratored on each of them. 
```

不幸的是，我得到了前两个结果，但不是正确的`user_id=13`。出于某种原因`user_id=13, item_id=1`，我无法理解`tots=1`。`tots=2`

任何想法，例如“最好将其分成 2 个查询”，将不胜感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:14:52.953

我仍然不能完全确定我理解你是否正确，但你可以尝试以下声明，让我们从那里开始工作。

**编辑**

以下语句返回预期结果。[您可以在此处](https://data.stackexchange.com/stackoverflow/revision/73520/81723/mysql-sum-in-one-table-and-join-with-2-other-tables)
[验证这一点*（使用 SQL Server）*](https://data.stackexchange.com/stackoverflow/revision/73520/81723/mysql-sum-in-one-table-and-join-with-2-other-tables)。

这样做的要点是

*   从三个表中选择所有可能的 user_id 和 item_id 组合
*   选择每个项目的计数/评级
*   结合结果

**SQL 语句**

```
SELECT u.user_id, pt.item_id, pt.cnt, pt.yes, pt.no
FROM   (
        SELECT user_id, item_id, title FROM items 
        UNION SELECT user_id, item_id, NULL FROM purchases
        UNION SELECT user_id, item_id, NULL FROM collaborators      
       ) u INNER JOIN (
        SELECT COUNT(*) AS cnt
               , SUM(CASE WHEN ISNULL(rating, 1) = 1 THEN 1 ELSE 0 END) AS yes
               , SUM(CASE WHEN rating =-1 THEN 1 ELSE 0 END) AS no
               , item_id
        FROM   purchases
        GROUP BY
               item_id
      ) pt ON pt.item_id = u.item_id 
```

**MYSQL 语句**

```
SELECT u.user_id, pt.item_id, pt.cnt, pt.yes, pt.no, u.title
FROM   (
    SELECT user_id, item_id, title FROM items where user_id=13
    UNION SELECT user_id, item_id, NULL FROM purchases where user_id=13
    UNION SELECT user_id, item_id, NULL FROM collaborators where user_id=13       
   ) u INNER JOIN (
    SELECT COUNT(*) AS cnt
           , SUM(rating=1) AS yes
           , SUM(rating =-1) AS no
           , item_id
    FROM   purchases 
    GROUP BY
           item_id
  ) pt ON pt.item_id = u.item_id 
```

# c++ - Cocos2d-x image not found “已经有后缀-ipad。正在使用。”

> ID：11126191
> 
> 赞同：0
> 
> 时间：2012-06-20T18:49:20.173
> 
> 标签：c++, objective-c, ios, cocos2d-iphone

所以我正在使用 Cocos2d 并且我不断收到错误消息

```
Cocos2d: cocos2d: CCFileUtils: Warning file not found: fps_images-ipad.fnt
Cocos2d: cocos2d: CCFileUtils: Warning file not found: fps_images-ipad.png
Cocos2d: cocos2d: CCFileUtils: Warning file not found: fps_images-ipad.png
Cocos2d: cocos2d: CCFileUtils: Warning file not found: fps_images-ipad.png
Cocos2d: cocos2d: CCFileUtils: Warning file not found: TurkeySprite_v2-ipad.png
Cocos2d: cocos2d: WARNING Filename(TurkeySprite_v2-ipad) already has the suffix -ipad. Using it.
Cocos2d: cocos2d: WARNING Filename(TurkeySprite_v2-ipad) already has the suffix -ipad. Using it. 
```

我不确定这一切意味着什么，但我几乎刚刚开始我的项目并且想知道我怎么这么快就出错了。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:11:09.047

警告

```
Cocos2d: cocos2d: CCFileUtils: Warning file not found: fps_images-ipad.fnt 
```

意味着您尝试显示加载文件名@“fps_images.fnt”的精灵，并且没有找到它的iPad特定版本（这将被称为@“fps_images-ipad.fnt”。

另一方面，您收到的另一个警告：

```
Cocos2d: cocos2d: WARNING Filename(TurkeySprite_v2-ipad) already has the suffix -ipad. Using it. 
```

表示您尝试通过将图像名称指定为：@“TurkeySprite_v2-ipad.png”来加载图像；因为它已经包含`-ipad`您收到警告的后缀。

在第一种情况下，您可以通过提供 iPad 特定版本的文件来避免警告；在第二种情况下，只需`-ipad`从文件名中删除：@“TurkeySprite_v2.png”。

在这两种情况下，这两种警告都没有绝对错误。

# string - 使匹配的agrep输出偏移

> ID：11126192
> 
> 赞同：0
> 
> 时间：2012-06-20T18:49:29.103
> 
> 标签：string, grep, string-matching, agrep

我正在尝试使用 agrep 并且可以进行近似匹配，但我需要知道匹配从哪里开始以及在哪里结束。是否有任何标志可以让我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:44:57.057

是`--show-position`你要找的吗？从[文档](http://linux.die.net/man/1/agrep)：

> **输出控制：**
> 
> > **--显示位置**
> > 
> > > 使用记录中第一个匹配项的开始和结束偏移量为每个输出记录添加前缀。记录的第一个字符的偏移量为 0。结束位置作为匹配后第一个字符的偏移量给出。

# sql-server - 使用 XML 输入的 SQL SELECT

> ID：11126193
> 
> 赞同：4
> 
> 时间：2012-06-20T18:49:30.870
> 
> 标签：sql-server, xml, tsql, xquery

我目前有一个响应 HTTP 请求的 C# 应用程序。HTTP 请求 (XML) 的正文被传递到 SQL Server，此时数据库引擎执行正确的指令。其中一条指令用于使用客户的 id (InvoiceLoad) 加载有关发票的信息：

```
<InvoiceLoad ControlNumber="12345678901">
   <Invoice>
      <CustomerID>johndoe@gmail.com</CustomerID>
   </Invoice>
</InvoiceLoad> 
```

我需要对发票表（包含关联的电子邮件地址）执行 SELECT 操作。

我试过使用：

```
SELECT 'Date', 'Status', 'Location' 
FROM Invoices 
WHERE Email_Address = Invoice.A.value(.)  

using an xml.nodes('InvoiceLoad/Invoice/CustomerId') Invoice(A) 
```

命令。

但是，由于此查询每分钟可能运行数千次，因此我希望使其尽可能快。我听说这样做的一种方法可能是使用 CROSS APPLY （我从未使用过）。那是解决方案吗？如果没有，我将如何尽可能快地进行此查询？非常感谢任何和所有建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:00:22.123

我不明白你为什么需要调用`.nodes()`- 据我了解，每个 XML 片段只有一个条目 - 对吧？

所以给定这个 XML：

```
<InvoiceLoad ControlNumber="12345678901">
   <Invoice>
      <CustomerID>johndoe@gmail.com</CustomerID>
   </Invoice>
</InvoiceLoad> 
```

您可以使用此 SQL 来获取`<CustomerID>`节点的值：

```
DECLARE @xmlvar XML

SET @xmlvar = '<InvoiceLoad ControlNumber="12345678901">
   <Invoice>
      <CustomerID>johndoe@gmail.com</CustomerID>
   </Invoice>
</InvoiceLoad>'

SELECT 
   @xmlvar.value('(/InvoiceLoad/Invoice/CustomerID)[1]', 'varchar(100)') 
```

您可以将其加入您的客户表或您需要做的任何事情。

`<CustomerID>`如果您将XML 存储在一个**表**中，并且您总是需要从然后使用方便加入。这需要做一些工作——一个将`XML`输入作为输入的存储函数——但它确实是一种从 XML 中“显示”某些重要数据片段的好方法。

第 1 步：创建您的函数

```
CREATE FUNCTION dbo.ExtractCustomer (@input XML)
RETURNS VARCHAR(255)
WITH SCHEMABINDING
AS BEGIN
    DECLARE @Result VARCHAR(255)

    SELECT 
        @Result = @Input.value('(/InvoiceLoad/Invoice/CustomerID)[1]', 'varchar(255)') 

    RETURN @result
END 
```

因此，给定您的 XML，您将获得一个`<CustomerID>`节点并提取其“内部文本”并将其作为`VARCHAR(255)`.

第 2 步：向您的表中添加一个计算的、持久的列

```
ALTER TABLE dbo.YourTableWithTheXML
ADD CustomerID AS dbo.ExtractCustomer(YourXmlColumnHere) PERSISTED 
```

现在，具有 XML 列的表有一个新列 -`CustomerID`它将自动`<CustomerID>`包含`VARCHAR(255)`. 该值是持久的，即只要 XML 不改变，就不必重新计算。您可以像使用表中的任何其他列一样使用该列，甚至可以对其编制索引以加速其上的任何连接！

# c# - 强制实现默认构造函数

> ID：11126196
> 
> 赞同：5
> 
> 时间：2012-06-20T18:49:45.410
> 
> 标签：c#, constructor, constraints

> **可能重复：**
> [定义构造函数签名的接口？](https://stackoverflow.com/questions/619856/interface-defining-a-constructor-signature)

我有一个混合的类和接口层次结构。

为了使用序列化，我需要每个类中都有一个默认构造函数。如果编译器可以告诉我层次结构中的某处缺少默认构造函数，我真的会很感激。（在编译时看到问题，而不是在以后的测试中）

我想要的可能是一些标记或属性，但我找不到任何东西。

就像是：

```
[ForceDefaultConstructor]
interface IVeryQuickSerializable
{   
    Serialize();
    Deserialize();
} 
```

会很好！

但任何类似的事情都非常感谢。

有一个限制：我无法更改序列化。使其通用可以解决问题，但我没有来源。编写一个包装器可能会完成这项工作，但是对于从顶级序列化接口（可能不会改变）派生的对象来说，它会有一个漏洞。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T18:52:29.787

您不能在界面或属性中执行此操作。

两个想法：

*   集成测试：使用反射找到所有相关的类，并在测试中检查它们
*   在使用该`T : new()`子句的通用 API 中公开您的序列化代码，即

    ```
    void Serialize<T>(T obj, ...) where T : IVeryQuickSerializable, new() 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:54:16.293

很可能有更好的解决方案，但您可以编写一个使用反射在构建后事件期间检查程序集的应用程序。

# c++ - c++中虚函数的概念？

> ID：11126198
> 
> 赞同：0
> 
> 时间：2012-06-20T18:49:54.517
> 
> 标签：c++, algorithm, oop, function

我阅读了很多博客，并且了解了如何在 C++ 中使用虚函数。但是，我仍然不明白为什么我们使用虚函数。你能给我一个真实世界的例子，这样我就可以更容易地想象虚函数的实际含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:36:14.720

需要提到的重要一点是继承（关键字 virtual 是其基础）不应仅用于代码重用，为此请使用委托。

当我们有一个类说 BroadbandConnection 并带有一个名为 connection() 的方法时，委托将是。然后您的经理说我们要添加加密，因此您创建了一个 BroadbandConnectionWithEncryption 类。您的本能可能是使用继承，然后使新类 BroadbandConnectionWithEncryption 派生自 BroadbandConnection。

这样做的缺点是初始类的创建者没有将其设计为继承，因此您需要更改其定义以使方法 connection() 虚拟，以便您可以覆盖其在派生类中的行为。这并不总是理想的。一个更好的想法是在这里使用委托来实现代码重用。

```
class BroadBandConnection
{
public:
    void Connection (string password)
    {
        //connection code.
    }
};

class BroadBandConnectionWithEndcryption
{
public:
    void Connection (string password)
    {
        mbroadbandconnection.Connection(password);
        //now do some stuff to zero the memory or
        //do some encryption stuff
    }

private:
    BroadBandConnection mbroadbandconnection;
}; 
```

关键字 virtual 用于多态性。顾名思义，它是一个对象具有多种形式的能力。这种决定将在设计接口或类时做出。

```
class IShape
{
    virtual void Draw () = 0; 
};

class Square
{
    void Draw()
    {
        //draw square on screen 
    }
};

class Circle
{
    void Draw()
    {
        //draw circle on screen
    }
}; 
```

我使用 = 0 将 Draw() 设为纯虚拟。我本可以省略它并添加一些默认实现。对于没有合理默认实现的接口，纯虚拟是有意义的。

这让我做的是将 Shape 对象传递给各种方法，它们不需要关心我刚刚给它们的东西。他们所知道的是，我必须提供一些东西来支持形状自行绘制的能力。

```
IShape* circle = new Circle ();
IShape* square = new Square ();

void SomeMethod (IShape* someShape)
{
   someShape->Draw(); //This will call the correct functionality of draw
} 
```

将来，随着人们开始思考新的形状，他们可以从 IShape 派生，只要他们为 Draw 实现一些功能。他们可以将此对象传递给 SomeMethod。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:55:57.113

首先，[这](https://meta.stackexchange.com/questions/128548/what-stack-overflow-is-not/134609#134609).

现在，一个现实生活中的例子。我有一个带有三个选项卡的 GUI 程序。每个选项卡都是派生自公共基础 TabBase 的类的对象。它有一个虚函数 OnActivate()。当一个选项卡被激活时，调度程序在当前选项卡上调用它。有一些常见的操作和特定于此选项卡的操作。这是通过虚函数实现的。

好处是控制器不需要知道它是什么类型的选项卡。它存储了一个 TabBase 指针数组，并且只对它们调用 OnActivate()。虚函数的魔力确保调用正确的覆盖。

```
class TabBase
{
    virtual void OnActivate()
    {
    //Do something...
    }
};

class SearchTab: public TabBase
{
    void OnActivate() //An override
    {
        TabBase::OnActivate(); //Still need the basic setup
        //And then set up the things that are specific to the search tab
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:05:59.233

决定使用虚函数是一件简单的事情。您只需要知道何时要覆盖基本方法。以下面的代码为例：

```
 class animal
 {
   public:
 void sound()
 {
  cout << "nothing";
 }
};
class bird : public animal
{
 public:
void sound()
{
cout << "tweet";
} 
```

};

在这种情况下，我想覆盖bird()。但如果我没有呢？这就是会发生的事情：

```
animal * a = new bird;
a->sound();
 **Output**
nothing 
```

屏幕什么也不会说，因为出于所有意图和目的，C++ 只看到动物。但是，如果您将其声明为虚拟的，它就会知道在类层次结构中搜索最低的方法。再试一遍：

```
 class animal{
   public:
    virtual void sound(){cout<<"nothing";}
  };
 class bird : public animal
 {
    public:
   void sound()
    {
      cout << "tweet";
    }
  };
   animal * a = new bird;
  a->sound();
 **Output**
   tweet. 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:58:00.520

他们实际上在Wiki上举了一个例子

[http://en.wikipedia.org/wiki/Virtual_function](http://en.wikipedia.org/wiki/Virtual_function)

使用动物。Animals 是超类，所有动物都吃（超类虚函数）。每只动物的吃法可能与所有其他动物不同（覆盖虚拟功能）。我有一个任意动物的列表，当我调用eat函数时，它们会显示出自己不同的饮食习惯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:58:38.890

如果您熟悉 Java - 这应该很容易。在 Java 中，所有类方法实际上都是虚拟的。如果您在派生类中覆盖它，并通过基类引用调用它，则将调用覆盖，而不是基类。

这不是 C++ 中的默认行为。如果您希望函数以这种方式运行，则必须在基类中将其声明为虚拟。很容易。

Java 充满了虚函数。它只是没有明确的关键字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T18:59:15.947

虚函数的目的是实现[动态调度](http://en.wikipedia.org/wiki/Dynamic_dispatch)。

您说您熟悉 Java，因此对于虚拟函数的实际使用，请考虑 Java 中您可能使用`interface`或使用`@Override`公共/受保护方法的任何地方。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T18:55:08.960

我们有一个具有方法的基类（动物），可以由它的子类（例如）以不同的方式实现。当我们将这个方法声明为虚拟时，我们可以对该方法进行寻址，它将从它的子定义中实现。如果您处理子项的重载方法，则不必使用 virtual，但是当您处理父项的方法时，您必须使用。

例如，如果您有一个动物向量，每个动物都是不同的。您将方法（例如）声明为虚拟并从动物类中调用它，它将从相应的子类中调用。

如果我错了，请纠正我，这就是我的理解。

# ruby-on-rails - 在 Rails 中提交多个数据库

> ID：11126200
> 
> 赞同：0
> 
> 时间：2012-06-20T18:49:56.647
> 
> 标签：ruby-on-rails, activerecord

[http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)提到使用与各种数据库关联的模型嵌套一些事务块作为解决方法。然而，这在我的情况下不起作用。也许是因为我的模型是猴子拼凑在一起的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:01:30.120

我找到了两种解决方案：

*   非承诺模型中的建立连接（“#{Rails.env}”）
*   MyNoncommittalModel.connection.execute("COMMIT")

两者都感觉像一个黑客。

# c++ - 使用类成员的声明应为成员声明 (C++2003)

> ID：11126203
> 
> 赞同：4
> 
> 时间：2012-06-20T18:50:04.463
> 
> 标签：c++

第 7.3.3 段。的 C++2003 标准规定

> 对类成员使用声明应为成员声明。

这意味着以下给出了语法错误：

```
struct S1
{
    static int var1;
};

using S1::var1; 
```

虽然以下编译良好：

```
namespace N2
{
    int var2;
}

using N2::var2; 
```

有人知道这背后的理由（如果有的话）吗？

更重要的是，该标准给出了结构的静态数据成员的明确示例，并告诉它应该导致语法错误。MS C++ 给出了这个错误：

> cpptest1.cxx(9) : error C2885: 'S1::var1': not a valid using-declaration at non-class scope

目前尚不清楚为什么应该禁止这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:29:42.697

它不起作用的原因仅仅是因为标准禁止它。示例中要特别注意`s`：

![在此处输入图像描述](../Images/056e2d4851c718d16ffd5a15b77d9ef0.png)

作为一种解决方法，您可以说：

```
auto& var = S1::var; 
```

使标准（以及所有编译器）更复杂以处理具有方便解决方法的不寻常情况只是没有通过成本效益测试。

# d3.js - 使用 d3.js 缩放条形图

> ID：11126207
> 
> 赞同：9
> 
> 时间：2012-06-20T18:50:17.700
> 
> 标签：d3.js, bar-chart, zooming

我正在尝试创建一个带有时间刻度的条形图，可以放大任何时间段。我能够为我的 x 轴（时间刻度）创建缩放功能，但是我的数据（在本例中为矩形）不会随我的轴一起缩放。

这是我的图表的简化版本：http: [//jsfiddle.net/gorkem/Mf457/5/embedded/result/](http://jsfiddle.net/gorkem/Mf457/5/embedded/result/) 如您所见，我可以放大到我的 x 轴，但条形图不会放大。

这是 jfiddle 链接：http: [//jsfiddle.net/gorkem/Mf457/6/](http://jsfiddle.net/gorkem/Mf457/6/)

```
var y = d3.scale.linear().domain([0, max_val]).range([graph_height, 0]);
var x = d3.time.scale().domain([minDate, maxDate]).range([0, graph_width]);

var chart = d3.select(location).append("svg")
    .attr("class", "chart")
    .attr("width", graph_width+20)
    .attr("height", graph_height+20)
    .call(d3.behavior.zoom().x(x).scaleExtent([1, 8]).on("zoom", zoom));

var lines = chart.selectAll("line");

var lines_y = lines
    .data(x.ticks(5))
    .enter().append("line")
    .attr("x1", x)
    .attr("x2", x)
    .attr("y1", function (d) {return graph_height - 20 - d;})
    .attr("y2", graph_height)
    .style("stroke", "#ccc");

var lines_x = lines
        .data(y.ticks(10))
        .enter().append("line")
        .attr("x1", 0)
        .attr("x2", graph_width)
        .attr("y1",  y)
        .attr("y2",  y)
        .style("stroke", "#ccc");

xAxis = d3.svg.axis().scale(x);
yAxis = d3.svg.axis().scale(y).orient("left");

chart.append("svg:g")
    .attr("class", "xaxis")
    .attr("transform","translate(0,300)")
    .call(xAxis);
chart.append("svg:g")
    .attr("class", "yaxis")
    .attr("transform", "translate(25,0)")
    .call(yAxis);

var rect = chart.selectAll("rect")
    .data(data)
    .enter().append("rect")
    .attr("x", function (d,i) {return x(new Date(d["date"]))+20; })
    .attr("y", function (d,i) { return graph_height - (d["num"] *v_scale);})
    .attr("width", x(new Date(data[1]["date"])))
    .attr("height", function (d,i) {return d["num"]*v_scale;});

rect.call(d3.behavior.zoom().x(x).scaleExtent([1, 8]).on("zoom", zoom));

function zoom() {
    chart.select(".xaxis").call(xAxis);
    chart.select(".yaxis").call(yAxis);
} 
```

}

我觉得我应该为我的缩放功能添加更多功能，以使该功能在条形（矩形）上有效。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T15:43:32.593

使用“selectAll”，我分别对每个条形应用了缩放和平移，将缩放和平移都限制在 x 轴上。

```
function zoom() {
    chart.select(".xaxis").call(xAxis);
    chart.select(".yaxis").call(yAxis);
    chart.selectAll(".chart rect").attr("transform", "translate(" + d3.event.translate[0] + ",0)scale(" + d3.event.scale + ", 1)");
} 
```

这同样适用于单个路径元素，这是我在偶然发现您的问题时试图弄清楚的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:41:42.530

我想知道同样的事情，所以至少要知道你在好公司。这是我目前的方法。首先，我无法从您的代码中生成绘图，并且链接不会将我发送到任何有用的东西——没有图表呈现。所以我无法帮助您解决具体问题。但是，这里有一个具有可缩放矩形的示例：http: [//bl.ocks.org/1962173](http://bl.ocks.org/1962173)。我目前正在检查它并删除不必要的元素，看看我是否可以让它工作。希望这会有所帮助！

# android - 新意图，如何链接到我的课程？

> ID：11126215
> 
> 赞同：0
> 
> 时间：2012-06-20T18:50:54.593
> 
> 标签：android, view, android-intent

我是Android（和java）的初学者，我只是在玩，想在单击按钮后创建新视图。到目前为止，这是我的代码：

**主班**

```
package myTests.homeSpace;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class TestsActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener( new OnClickListener()
        {
            public void onClick(View v)
            {
                Intent myIntent = new Intent(TestsActivity.this, screen1.class);
                startActivity(myIntent);
            }
        });
    }
} 
```

**单击按钮后要运行的类**

```
package myTests.homeSpace;

import android.app.Activity;
import android.os.Bundle;

public class screen1 extends Activity {
    @Override
    public void onCreate(Bundle SavedBundleInstance)
    {
        super.onCreate(SavedBundleInstance);
        setContentView(R.layout.screen1);
    }
} 
```

问题是，点击按钮后，我得到“不幸的是，测试已停止”错误。（“测试”是应用程序名称）。我知道（或猜想）问题出在这一行`Intent myIntent = new Intent(TestsActivity.this, screen1.class);` 我猜我对类的引用在`screen1`某种程度上是错误的，但我不知道为什么。没有编译错误也没有警告，布局 .xmls 不应该是错误的。

你们中的任何人都可以告诉我任何解决方案吗？

**编辑**

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="myTests.homeSpace"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TestsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**控制台输出**

```
[2012-06-20 19:56:21 - ddms] null
java.lang.NullPointerException
    at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
    at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
    at com.android.ddmlib.HandleHello.sendHELO(HandleHello.java:142)
    at com.android.ddmlib.HandleHello.sendHelloCommands(HandleHello.java:65)
    at com.android.ddmlib.Client.getJdwpPacket(Client.java:672)
    at com.android.ddmlib.MonitorThread.processClientActivity(MonitorThread.java:317)
    at com.android.ddmlib.MonitorThread.run(MonitorThread.java:263) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:52:46.553

我敢打赌，如果您在某处阅读*崩溃日志说**您是否忘记在清单中声明此活动？*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:03:01.153

我同意，没有在您的清单文件（AndroidManifest.xml）中声明活动很可能是您的问题。有关更多信息，请参阅有关活动的 android 开发者[页面](http://developer.android.com/guide/topics/manifest/activity-element.html)。以下是相关描述：

> 声明一个实现应用程序可视用户界面的一部分的活动（一个活动子类）。所有活动都必须由清单文件中的元素表示。任何未在此处声明的内容都不会被系统看到并且永远不会运行。

我刚刚发布了这个，所以你会有更多的空间来自己研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:12:09.810

将 Manifest.xml 中的第二个活动声明为：

```
<activity
        android:name=".screen1">
    </activity> 
```

就在您的第一个活动的声明下方。

# ios - UINavigationItem modal如何从presentingviewcontroller继承颜色

> ID：11126221
> 
> 赞同：0
> 
> 时间：2012-06-20T18:51:22.740
> 
> 标签：ios, uinavigationitem

我有一个模态视图控制器，我希望它的导航栏（我认为是 UINavigationItem）继承其呈现视图控制器的导航栏的颜色。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:58:15.697

在呈现模态视图控制器之前设置它。例如：

```
viewController.navigationController.navigationBar.tintColor = self.navigationController.navigationBar.tintColor;
[self presentModalViewController:viewController animated:YES]; 
```

# devise - 使用 CanCan 分配用户角色？

> ID：11126223
> 
> 赞同：0
> 
> 时间：2012-06-20T18:51:42.710
> 
> 标签：devise, ruby-on-rails-3.2, cancan

我已经设置了一个具有两个基本用户角色的应用程序。

可以管理一切的管理员和普通用户，可以创建事物（作业和客户）但不能删除。

我对如何为用户分配角色感到有些困惑。我认为这是向我的数据库添加角色列的情况？由于用户仅由管理员用户创建。我需要在我的表单中添加某种集合选择吗？

谁能指出我正确的方向？

编辑：我尝试了**每个用户**指令的一个角色，如 cancan wiki 中所述[，](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)但我收到了错误`uninitialized constant User::ROLES`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:49:32.940

找到了答案:)

我插入了这段代码..

```
 ROLES = %w[admin user]

    def role_symbols
      [role.to_sym]
    end 
```

进入我的`User`模型并放入`<%= f.collection_select :role, User::ROLES, :to_s, :humanize %>`我的表格中:)

# junit - 使用 mock 对 Play 控制器进行单元测试

> ID：11126225
> 
> 赞同：8
> 
> 时间：2012-06-20T18:51:47.753
> 
> 标签：junit, controller, playframework, mocking, playframework-2.0

标题基本概括了所有内容。我想设置一个传统的 JUnit 测试来模拟控制器的依赖关系并针对操作运行测试。

我发现我可以像这样实现我的目标：

```
public class AccountsControllerTest {
    private controllers.Accounts accountsController;

    @Test
    public void test() {
        running(fakeApplication(), new Runnable() {
            public void run() {
                accountsController = new controllers.Accounts();
                accountsController.setAccountsWorkflow(mock(workflow.Accounts.class));
            }
        });
    }
} 
```

这里明显的问题是我正在实例化我的测试类并从测试方法本身注入模拟依赖项，而我应该在`setup()`方法中这样做。`setup()`如果我要以传统方式测试我的控制器，该方法似乎没用。

当然，我可以[按照 Play 推荐的方式](http://www.playframework.org/documentation/2.0/JavaFunctionalTest)测试控制器，但是我的应用程序依赖于外部 SOAP Web 服务，因此我需要进行单元测试来证明我们的代码在服务器关闭时可以正常工作。

那么，使用 mock 对 Play 控制器进行单元测试，同时仍然利用`setup()`and`teardown()`方法的最佳方法是什么？

**编辑**

我意识到我在这里假设了一些知识，所以对于那些不知道的人来说，单元测试中的控制器实例必须包含在一个`running()`函数或 Play 中！将抛出运行时异常，说明尚未启动任何应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:02:38.917

您可以使用 Mockito 和 Play 的 FakeApplication 并设置静态 Http.Context 变量来完成此操作。

这样您就可以像所有其他 JUnit 测试一样编写测试。

*例子：*

```
...
import static play.test.Helpers.status;
import play.test.FakeApplication;
import play.test.Helpers;
import play.mvc.Http;
import play.mvc.Result;
...

@RunWith(MockitoJUnitRunner.class)
public class ApplicationTest {

  public static FakeApplication app;

  @Mock
  private Http.Request request;

  @BeforeClass
  public static void startApp() {
      app = Helpers.fakeApplication();
      Helpers.start(app);

  }

  @Before
  public void setUp() throws Exception {
      Map<String, String> flashData = Collections.emptyMap();
      Http.Context context = new Http.Context(request, flashData, flashData);
      Http.Context.current.set(context);
  }

  @Test
  public void testIndex() {
      final Result result = Application.index();
      assertEquals(play.mvc.Http.Status.OK, status(result));
  }

  @AfterClass
  public static void stopApp() {
      Helpers.stop(app);
  } 
```

# vb.net - vb.net 获取面板颜色

> ID：11126226
> 
> 赞同：0
> 
> 时间：2012-06-20T18:51:48.773
> 
> 标签：vb.net, winforms

```
for i = 0 to 10
    dim paneln as new panel
    paneln.backcolor = color.red
    if i = 5 then
        paneln.backcolor = color.white
    end if
    me.controls.add(paneln)
next 
```

现在我想获取表单上每个面板的颜色

红色
红色
红色
红色
白色
红色
红色
红色
红色
红色

就像是：

```
For Each p As Panel In Me.Controls
    MsgBox(p.BackColor)
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:05:55.550

如果您使用的是 .Net 3.5 或 4.0，您可以尝试：

```
For Each p as Panel In Me.Controls.OfType(Of Panel)
    MessageBox.Show(p.BackColor)
Next 
```

这将仅遍历面板控件（或从面板派生的控件），而忽略其他控件。请注意，这只会获取直接在表单上的面板，而不是容器对象内部的任何面板，就像其他面板一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:06:17.983

尝试：

```
For Each p As Panel In Me.Controls.OfType(Of Panel)()
  MessageBox.Show(p.BackColor.ToString())
Next 
```

# wcf - 防止在 WCF 中的用户之间共享登录凭据

> ID：11126230
> 
> 赞同：1
> 
> 时间：2012-06-20T18:51:54.813
> 
> 标签：wcf, security, authentication, azure

我在 Azure 的 Worker Role 中托管了一项服务。客户端使用用于相互客户端/服务身份验证的证书和自定义用户名密码验证通过 NetTcp 绑定进行连接。

客户端还接收使用共享机密身份验证通过 Azure 服务总线广播的事件通知。

我希望这是安全的，并且不允许一个人与朋友或其他任何人共享他/她的登录信息 - 他们的登录仅供他们使用。类似地，忘记在一台机器上注销然后从另一台机器（即平板电脑、工作计算机等）登录到服务的用户应该触发未注销的应用程序的自动关闭。

我正在使用按呼叫服务，并且使用会话实现解决方案需要大量重新布线。

我想我需要在用户进行操作调用时跟踪用户的上下文，并跟踪哪些 IP 当前正在使用该登录名/凭据。我希望能够进行某种“死亡接触”，当检测到多个登录时，服务可以向客户端发送终止命令。

任何处理此问题的模式的建议或指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:43:33.317

即使您确实使用了 PerSession，您仍然需要确定同一用户是否在多个会话中，并且您有会话的开销。

我只在 WSHttpBinding 上对此进行了测试，而不是托管在 Azure 角色中，所以如果它不适用于 NetTcp Azure 角色，请不要投反对票 - 评论，我将删除它。即使使用 PerCall，SessionID 也是持久的，并且 SessionID 在客户端和服务器上都可用。多个用户可以拥有相同的 IP 地址，但 SessionID 对会话来说是唯一的。显然，您需要记录用户 ID、会话 ID，但表存储很便宜。

也许更新许可证模型以供并发使用。通过记录 userID 和 sessionID，您可以编写一个算法来计算最大并发使用量。

# html - 在 Internet Explorer 9 中使用 HTML5 实时流式传输 h.264

> ID：11126231
> 
> 赞同：6
> 
> 时间：2012-06-20T18:51:58.347
> 
> 标签：html, video, stream, live, h.264

我试图找到一种在 Internet Explorer 9 中流式传输实时视频的方法。视频将以 h.264 编码（我必须使用这种编码），用户只会使用 Internet Explorer 9。我做了一些研究和每篇文章我发现已经很老了。当时，没有太多可用的信息，我找不到任何令人满意的答案。另外，我认为也许浏览器支持从那以后发展了。

我目前的视频源是 RTSP，但如果我需要也可以更改为任何内容（http 或其他东西，我对此不太了解）。

那么有谁知道在IE 9中是否有我想做的事情（使用HTML5，我们已经有了flash/silverlight/解决方案）。最好不需要插件来播放直播。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:20:44.380

该`<video>`标签支持 RTSP 流：您可以使用：

```
<video src="rtp://domain.com/stream">
    Your browser does not support RTP streams.
</video> 
```

这将是一个很好的起点，我没有在 IE9 中测试过，但我知道它在 Chrome/FF 中可以正常工作。

# c++ - Fast Delegate (et al) 背后的想法是否已用于优化 std::function？

> ID：11126238
> 
> 赞同：22
> 
> 时间：2012-06-20T18:52:12.933
> 
> 标签：c++, performance, boost, c++11, std-function

已经有关于 C++“委托”的提议，其开销低于`boost::function`：

*   [成员函数指针和最快的 C++ 委托](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)
*   [快速 C++ 代表](http://www.codeproject.com/Articles/13287/Fast-C-Delegate)
*   [难以置信的快速 C++ 代表](http://www.codeproject.com/Articles/11015/The-Impossibly-Fast-C-Delegates)

有没有使用这些想法来实现`std::function`，从而产生比 更好的性能`boost::function`？有没有人比较过`std::function`vs的表现`boost::function`？

**我想专门针对英特尔 64 位架构上的 GCC 编译器和 libstdc++ 了解这一点**，但欢迎提供有关其他编译器的信息（例如 Clang）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-20T20:34:32.587

在 libstdc++ 中，`std::function`我们使用适当大小和对齐的联合类型来存储指针、函数指针或指向成员函数的指针。我们避免为任何可以以该大小和对齐方式存储的函数对象进行堆分配，**但**前提是它是“位置不变的”

```
/**
 *  Trait identifying "location-invariant" types, meaning that the
 *  address of the object (or any of its members) will not escape.
 *  Also implies a trivial copy constructor and assignment operator.
 */ 
```

该代码基于`std::tr1::function`实现，该部分没有显着变化。我认为这可以简化使用`std::aligned_storage`并且可以通过专门化特征来改进，以便将更多类型识别为位置不变。

调用目标对象是在没有任何虚函数调用的情况下完成的，类型擦除是通过在其中存储一个函数指针来完成的，该指针`std::function`是函数模板特化的地址。所有操作都是通过存储的指针调用该函数模板并传入一个枚举来确定它被要求执行的操作。这意味着不需要 vtable，并且只需要在对象中存储一个函数指针。

这个设计是由`boost::function`原作者贡献的，我相信它接近于 boost 的实现。有关基本原理，请参阅 Boost.Function 的[性能](http://www.boost.org/doc/libs/1_49_0/doc/html/function/misc.html#id1550476)文档。这意味着 GCC 不太可能`std::function`比 更快`boost::function`，因为它是同一个人的类似设计。

注意，我们`std::function`还不支持使用分配器进行构造，它需要做的任何分配都将使用`new`.

* * *

为了回应 Emile 的评论，该评论表示希望避免为`std::function`包含指向成员函数和对象的指针的 a 进行堆分配，这里有一个小技巧（但你没有从我这里听到 ;-)

```
struct A {
  int i = 0;
  int foo() const { return 0; }
};

struct InvokeA
{
  int operator()() const { return a->foo(); }
  A* a;
};

namespace std
{
  template<> struct __is_location_invariant<InvokeA>
  { static const bool value = true; };
}

int main()
{
  A a;
  InvokeA inv{ &a };

  std::function<int()> f2(inv);

  return f2();
} 
```

诀窍是它`InvokeA`足够小以适合`function`的小对象缓冲区，并且 trait 特化表示存储在那里是安全的，因此`function`直接保存该对象的副本，而不是在堆上。`a`只要指向它的指针持续存在，这就需要持续存在，但是如果`function`' 的目标是`bind(&A::foo, &a)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T16:59:18.840

正如评论中所指出的，std::function 只是一个接口，不同的实现可能会做不同的事情，但值得注意的是，标准确实对此事有话要说。从 20.8.11.2.1/5 （看起来更像是一个 IP 地址而不是标准的一部分）：

> *注意：*鼓励实现避免为小的可调用对象使用动态分配的内存，例如，其中 f 的目标是一个只包含一个指针或对一个对象的引用和一个成员函数指针的对象。*——尾注*

This is the standard's way of encouraging implementers to employ the "small function optimization," which was motivated by the cited articles on delegates. (The articles themselves don't actually talk about delegates in the .NET sense. Rather, they use the term "delegate" to mean bound member functions.)

# python - 来自字符串的 Python 名称变量

> ID：11126239
> 
> 赞同：0
> 
> 时间：2012-06-20T18:52:13.393
> 
> 标签：python, list, variables, dictionary, naming

是否可以根据字符串的值创建变量名？

我有一个脚本，它将读取信息块的文件并将它们存储在字典中。然后将每个块的字典附加到“主”字典。文件中信息块的数量会有所不同，并使用“完成”一词来表示块的结束。

我想做这样的事情：

```
master={}
block=0
for lines in file:
  if line != "done":
    $block.append(line)
  elif line == "done":
    master['$block'].append($block)
    block = block + 1 
```

如果一个文件有这样的内容：

```
eggs
done
bacon
done
ham
cheese
done 
```

结果将是一个包含 3 个列表的字典：

```
master = {'0': ["eggs"], '1': ["bacon"], '2': ["ham", "cheese"]} 
```

这怎么可能实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:57:40.937

我实际上建议您改用列表。有没有什么特别的点，为什么你需要数组式的字典？

如果你可以使用数组，你可以使用这个：

```
with open("yourFile") as fd:
    arr = [x.strip().split() for x in fd.read().split("done")][:-1] 
```

输出：

```
[['eggs'], ['bacon'], ['ham', 'cheese']] 
```

* * *

如果你想要数字字符串索引，你可以使用这个：

```
with open("yourFile") as fd:
    l = [x.strip().split() for x in fd.read().split("done")][:-1]
    print dict(zip(map(str,range(len(l))),l)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:57:09.943

您似乎误解了字典的工作原理。他们拿的是对象的钥匙，所以这里不需要魔法。

但是，我们可以根据需要使用 a[`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)来制作子列表，从而使您的代码更好。

```
from collections import defaultdict

master = defaultdict(list)
block = 0
for line in file:
    if line == "done":
        block += 1
    else:
        master[block].append(line) 
```

但是，我建议如果您想要连续的编号索引，则不需要字典 - 这就是列表的用途。在这种情况下，我建议您遵循[Thrustmaster 的第一个建议](https://stackoverflow.com/a/11126324/722121)，或者，作为替代方案：

```
from itertools import takewhile

def repeat_while(predicate, action):
    while True:
        current = action()
        if not predicate(current):
            break
        else:
            yield current

with open("test") as file:
    action = lambda: list(takewhile(lambda line: not line == "done", (line.strip() for line in file)))
    print(list(repeat_while(lambda x: x, action))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:55:50.627

我认为“完成”的分裂注定要失败。考虑一下列表：

```
eggs
done
bacon
done
rare steak
well done stake
done 
```

从 Thrustmaster 窃取（我为我的盗窃给了 +1）我建议：

```
>>> dict(enumerate(l.split() for l in open(file).read().split('\ndone\n') if l))
{0: ['eggs'], 1: ['bacon'], 2: ['ham', 'cheese']} 
```

我知道这需要一个尾随的“\ n”。如果有问题，你可以使用 "open(file).read()+'\n'" ，如果最终完成是可选的，甚至可以使用 "+'\n\ndone\n'" 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:56:55.543

使用 setattr 或 globals()。
请参阅[如何在当前模块上调用 setattr()？](https://stackoverflow.com/questions/2933470/how-do-i-call-setattr-on-the-current-module)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T19:30:22.767

这是您的代码，用于并列：

```
master={}
block=0
for lines in file:
  if line != "done":
    $block.append(line)
  elif line == "done":
    master['$block'].append($block)
    block = block + 1 
```

正如 Thrustmaster 的帖子中所提到的，在这里使用嵌套列表更有意义。这是您将如何做到的；我从您的原始代码结构上尽可能少地改变：

```
master=[[]] # Start with a list containing only a single list
for line in file: # Note the typo in your code: you wrote "for lines in file"
  if line != "done":
    master[-1].append(line) # Index -1 is the last element of your list
  else: # Since it's not not "done", it must in fact be "done"
    master.append([]) 
```

这里唯一的事情是你最终会在你的列表末尾有一个额外的`master`列表，所以你应该`del`在最后一个空子列表中添加一行：

```
del master[-1] 
```

# c# - 使用 JsonConvert.DeserializeObject 将 Json 反序列化为 C# POCO 类

> ID：11126242
> 
> 赞同：72
> 
> 时间：2012-06-20T18:52:19.197
> 
> 标签：c#, json, serialization, json.net, poco

这是我的简单`User`POCO 类：

```
/// <summary>
/// The User class represents a Coderwall User.
/// </summary>
public class User
{
    /// <summary>
    /// A User's username. eg: "sergiotapia, mrkibbles, matumbo"
    /// </summary>
    public string Username { get; set; }

    /// <summary>
    /// A User's name. eg: "Sergio Tapia, John Cosack, Lucy McMillan"
    /// </summary>
    public string Name { get; set; }

    /// <summary>
    /// A User's location. eh: "Bolivia, USA, France, Italy"
    /// </summary>
    public string Location { get; set; }

    public int Endorsements { get; set; } //Todo.
    public string Team { get; set; } //Todo.

    /// <summary>
    /// A collection of the User's linked accounts.
    /// </summary>
    public List<Account> Accounts { get; set; }

    /// <summary>
    /// A collection of the User's awarded badges.
    /// </summary>
    public List<Badge> Badges { get; set; }

} 
```

我用来将 JSON 响应反序列化为`User`对象的方法（这个实际的[JSON 调用在这里](http://coderwall.com/sergiotapia.json)）：

```
private User LoadUserFromJson(string response)
{
    var outObject = JsonConvert.DeserializeObject<User>(response);
    return outObject;
} 
```

这会引发异常：

> 无法将当前 JSON 对象（例如 {"name":"value"}）反序列化为类型“System.Collections.Generic.List`1[CoderwallDotNet.Api.Models.Account]”，因为该类型需要 JSON 数组（例如 [ 1,2,3]) 正确反序列化。
> 
> 要修复此错误，请将 JSON 更改为 JSON 数组（例如 [1,2,3]）或更改反序列化类型，使其成为普通的 .NET 类型（例如，不是像整数这样的原始类型，而不是像这样的集合类型可以从 JSON 对象反序列化的数组或列表。JsonObjectAttribute 也可以添加到类型中以强制它从 JSON 对象反序列化。路径“accounts.github”，第 1 行，位置 129。

以前从未使用过这种 DeserializeObject 方法，我有点卡在这里。

我已确保 POCO 类中的属性名称与 JSON 响应中的名称相同。

我可以尝试将 JSON 反序列化到这个 POCO 类中吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-06-20T20:12:34.173

这是一个工作示例。

要点是：

*   宣言`Accounts`
*   `JsonProperty`属性的使用

.

```
using (WebClient wc = new WebClient())
{
    var json = wc.DownloadString("http://coderwall.com/mdeiters.json");
    var user = JsonConvert.DeserializeObject<User>(json);
} 
```

-

```
public class User
{
    /// <summary>
    /// A User's username. eg: "sergiotapia, mrkibbles, matumbo"
    /// </summary>
    [JsonProperty("username")]
    public string Username { get; set; }

    /// <summary>
    /// A User's name. eg: "Sergio Tapia, John Cosack, Lucy McMillan"
    /// </summary>
    [JsonProperty("name")]
    public string Name { get; set; }

    /// <summary>
    /// A User's location. eh: "Bolivia, USA, France, Italy"
    /// </summary>
    [JsonProperty("location")]
    public string Location { get; set; }

    [JsonProperty("endorsements")]
    public int Endorsements { get; set; } //Todo.

    [JsonProperty("team")]
    public string Team { get; set; } //Todo.

    /// <summary>
    /// A collection of the User's linked accounts.
    /// </summary>
    [JsonProperty("accounts")]
    public Account Accounts { get; set; }

    /// <summary>
    /// A collection of the User's awarded badges.
    /// </summary>
    [JsonProperty("badges")]
    public List<Badge> Badges { get; set; }
}

public class Account
{
    public string github;
}

public class Badge
{
    [JsonProperty("name")]
    public string Name;
    [JsonProperty("description")]
    public string Description;
    [JsonProperty("created")]
    public string Created;
    [JsonProperty("badge")]
    public string BadgeUrl;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-19T22:05:46.937

将骆驼大小写的 JSON 字符串反序列化为帕斯卡大小写的 POCO 对象的另一种更简化的方法是使用[CamelCasePropertyNamesContractResolver](http://james.newtonking.com/json/help/index.html?topic=html/T_Newtonsoft_Json_Serialization_CamelCasePropertyNamesContractResolver.htm)。

它是 Newtonsoft.Json.Serialization 命名空间的一部分。这种方法假定 JSON 对象和 POCO 之间的唯一区别在于属性名称的大小写。如果属性名称的拼写不同，则需要使用 JsonProperty 属性来映射属性名称。

```
using Newtonsoft.Json; 
using Newtonsoft.Json.Serialization;

. . .

private User LoadUserFromJson(string response) 
{
    JsonSerializerSettings serSettings = new JsonSerializerSettings();
    serSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();
    User outObject = JsonConvert.DeserializeObject<User>(jsonValue, serSettings);

    return outObject; 
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T19:07:29.657

你可以创建一个`JsonConverter`. 请参阅[此处](https://stackoverflow.com/a/9453191/95573)以获取与您的问题类似的示例。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-20T18:59:41.810

帐户属性定义如下：

```
"accounts":{"github":"sergiotapia"} 
```

您的 POCO 声明如下：

```
public List<Account> Accounts { get; set; } 
```

尝试使用这个 Json：

```
"accounts":[{"github":"sergiotapia"}] 
```

项目数组（将被映射到列表）总是用方括号括起来。

**编辑：**帐户 Poco 将是这样的：

```
class Account {
    public string github { get; set; }
} 
```

也许还有其他属性。

**编辑2：**没有数组使用如下属性：

```
public Account Accounts { get; set; } 
```

与我在第一次编辑中发布的示例类类似。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-27T23:24:32.633

根据接受的答案，如果您有 JSON 文本示例，您可以将其插入[此转换器](http://jsonutils.com/)，选择您的选项并生成 C# 代码。

如果您在运行时不知道类型，那么这个主题看起来很合适。

[将json动态反序列化为传入的任何对象。c#](https://stackoverflow.com/questions/25672338/dynamically-deserialize-json-into-any-object-passed-in-c-sharp)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-20T19:02:35.283

```
to fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the
deserialized type so that it is a normal .NET type (e.g. not a primitive type like
integer, not a collection type like an array or List) that can be deserialized from a
JSON object.` 
```

整个消息表明可以序列化为 List 对象，但输入必须是 JSON 列表。这意味着您的 JSON 必须包含

```
"accounts" : [{<AccountObjectData}, {<AccountObjectData>}...], 
```

其中 AccountObject 数据是 JSON，表示您的 Account 对象或 Badge 对象

它目前似乎得到的是

```
"accounts":{"github":"sergiotapia"} 
```

其中 accounts 是 JSON 对象（用大括号表示），而不是 JSON 对象数组（数组用方括号表示），这正是您想要的。尝试

```
"accounts" : [{"github":"sergiotapia"}] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-26T18:30:48.097

这不完全是我的想法。如果你有一个只能在运行时知道的泛型类型，你会怎么做？

```
public MyDTO toObject() {
  try {
    var methodInfo = MethodBase.GetCurrentMethod();
    if (methodInfo.DeclaringType != null) {
      var fullName = methodInfo.DeclaringType.FullName + "." + this.dtoName;
      Type type = Type.GetType(fullName);
      if (type != null) {
        var obj = JsonConvert.DeserializeObject(payload);
      //var obj = JsonConvert.DeserializeObject<type.MemberType.GetType()>(payload);  // <--- type ?????
          ...
      }
    }

    // Example for java..   Convert this to C#
    return JSONUtil.fromJSON(payload, Class.forName(dtoName, false, getClass().getClassLoader()));
  } catch (Exception ex) {
    throw new ReflectInsightException(MethodBase.GetCurrentMethod().Name, ex);
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-23T22:31:17.407

对于遇到此问题的任何人，我都没有正确看到 json 值。[https://jsonutils.com/](https://jsonutils.com/)在那里，您可以检查应该生成的类，并在您阅读代码中的 json 后仅返回其中一个类。

例如，我需要一个 booklist 对象，所以我的代码应该只读取一个

```
res = await response.Content.ReadAsAsync<BookList>(); 
```

书单看起来像

```
 public class BookList
    {

        [JsonProperty("data")]
        public IList<Datum> Data { get; set; }
     } 
```

并且在该列表中有较小的书类，即名为 Datum 的转换器（只是书）

```
 public class Datum
    {

        [JsonProperty("id")]
        public string Id { get; set; }

        [JsonProperty("isbn")]
        public string Isbn { get; set; }
    } 
```

同样，如果您有疑问[https://jsonutils.com/](https://jsonutils.com/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-11T22:58:48.783

可能会迟到，但使用 QuickType 是最简单的方法：

[https://app.quicktype.io/](https://app.quicktype.io/)

# user-interface - 没有 scilab gui (Ubuntu 12.04)

> ID：11126249
> 
> 赞同：0
> 
> 时间：2012-06-20T18:52:48.417
> 
> 标签：user-interface, ubuntu, scilab

我在 Ubuntu 12.04 中安装了 scilab。当我在终端或 KDE 应用程序菜单中启动时，我只得到一个 scilab 控制台。为什么我没有gui？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:30:58.227

试试安装，

```
apt-get install scilab 
```

**scilab-cli**只是终端中的控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:56:14.310

这是某种 X 或 QT 问题。我正在使用 XFCE，但它适用于 KDE。

# java - 为 OS X 2012-004 安装 Java 后小程序未运行

> ID：11126251
> 
> 赞同：0
> 
> 时间：2012-06-20T18:52:51.427
> 
> 标签：java, macos, applet

我用最新的 OS X 更新更新了我的 mac mini，并安装了适用于 OS X 2012-004 的 Java。现在我无法在我的应用程序中运行任何小程序。我启用了小程序插件，所有设置看起来都很好。我发现需要修复小程序代码才能与苹果发布的新更新一起使用。任何人都可以帮助我解决小程序代码中需要修复的问题吗？

谢谢拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:05:51.847

*Doesn't work* in my application is terribly vague.

*   What application?
*   Is it just a WebView?
*   In what way does it not work?
*   Does it not launch?
*   Do other applets launch? (e.g. [http://www.red3d.com/cwr/boids/](http://www.red3d.com/cwr/boids/))
*   Do you get the inactive plugin error? If the embed tag is too small then it's most likely that you can't see it
*   After the install of the update, it disables java *again*, and then auto-disables it every ?30 days
*   Did you try enabling the java console (will probably require relaunching the browser/application)?

...

# python - 如何通过 fcgi 重启 django 应用程序

> ID：11126252
> 
> 赞同：0
> 
> 时间：2012-06-20T18:52:52.240
> 
> 标签：python, django, fastcgi

我们通过这个命令在我们的服务器上运行一个 django 应用程序。

`python manage.py runfcgi host=127.0.0.1 port=8070 pidfile=/home/ubuntu/autoleg_webapp/autoleg_clients.pid --settings=PROD_Settings`

我对 PROD_Settings.py 文件进行了一些更改，我现在想重新启动，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:03:22.390

Tour 进程的 PID 在 pidfile 中，所以你基本上应该杀死这个 PID。

为此，请在 shell 中执行以下命令：

```
kill `cat /home/ubuntu/autoleg_webapp/autoleg_clients.pid` 
```

由于反引号，您的 shell 将替换`cat home/ubuntu/autoleg_webapp/autoleg_clients.pid`为文件中的 PID。

# c - linux和8051微控制器板在c中使用rs-232进行串行通信

> ID：11126257
> 
> 赞同：-4
> 
> 时间：2012-06-20T18:53:06.443
> 
> 标签：c, linux, serial-port, microcontroller, embedded-linux

我在使用 RS-232 从 linux OS 到 uc 8051 串行发送数据时遇到问题。8051 设置：

波特率 = 9600;
端口 = 端口 1。
奇偶校验 = 无
停止位 = 一

```
// my code for receiving data on 8051 uc
#include <reg51.h>

unsigned char value;
int i,j;

void ini()     
{
    TMOD=0x20;  //Timer1, mode 2, baud rate 9600 bps
    TH1=0XFD; 
    SCON=0x50;
    TR1=1;
}

void delay()
{
    for(i=0;i<=1000;i++)
    for (j=0;j<=300;j++);
}

void recieve() 
{
    unsigned char value;
    while(RI==0);
    value=SBUF;
    P1=value;
    RI=0;
}

void main()
{
    while(1)
    {
        ini();
        recieve();
    }
}

// and code which run on linux is as following
#include <stdio.h> // standard input / output functions
#include <string.h> // string function definitions
#include <unistd.h> // UNIX standard function definitions
#include <fcntl.h> // File control definitions
#include <errno.h> // Error number definitions
#include <termios.h> // POSIX terminal control definitionss
#include <time.h>   // time calls

int open_port(void)
{
    int fd; // file description for the serial port

    fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY | O_NDELAY);

    if (fd == -1) // if open is unsucessful
    {
        //perror("open_port: Unable to open /dev/ttyS0 - ");
        printf("open_port: Unable to open /dev/ttyS0\. \n");
    }
    else
    {
        fcntl(fd, F_SETFL, 0);
        printf("port is open.\n");
    }

    return(fd);
} //open_port

int configure_port(int fd)      // configure the port
{
    struct termios port_settings;      // structure to store the port settings in

    cfsetispeed(&port_settings, B9600);    // set baud rates
    cfsetospeed(&port_settings, B9600);

    port_settings.c_cflag &= ~PARENB;    // set no parity, stop bits, data bits
    port_settings.c_cflag &= ~CSTOPB;
    port_settings.c_cflag &= ~CSIZE;
port_settings.c_cflag |= CS8;

    tcsetattr(fd, TCSANOW, &port_settings);    // apply the settings to the port
    return(fd);

} //configure_port

int query_modem(int fd)   // query modem with an AT command
{
    char n;
    fd_set rdfs;
    struct timeval timeout;

    // initialise the timeout structure
    timeout.tv_sec = 10; // ten second timeout
    timeout.tv_usec = 0;

    // Create byte array
    unsigned char send_bytes[] = {  0x00, 0xff};

    write(fd, send_bytes, 2);  //Send data
    printf("Wrote the bytes. \n");

    // do the select
    n = select(fd + 1, &rdfs, NULL, NULL, &timeout);

    // check if an error has occured
    if(n < 0)
    {
        perror("select failed\n");
    }
    else if (n == 0)
    {
        puts("Timeout!");
    }
    else
    {
        printf("\nBytes detected on the port!\n");
    }
    return 0;
} //query_modem

int main(void)
{ 
    int fd = open_port();
    configure_port(fd);
    query_modem(fd);
    return(0);
} // main 
```

但是我有问题..所以请帮助我并告诉我linux通过rs-232发送数据的格式。也接收8051单片机的格式。需要 C 中的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:11:01.487

我推荐基本的故障查找

*   确保使用正确的电缆（2 和 3 被划掉，没有握手线开始）
*   分离设备，即将您的 Linux 机器连接到运行终端程序的 PC 并尝试建立双向通信 - 使用 Linux/C 代码工作，直到您实现
*   将您的 8051 连接到运行终端程序的 PC ....
*   仅当 Linux 和 8051 都针对已知且经过验证的设备工作时才连接它们

如果您的 8051 代码示例代表所有代码 .... 8051 将如何响应 AT .... 它只能接收。

祝你好运

# css - 跨浏览器 base64 网络字体支持

> ID：11126258
> 
> 赞同：5
> 
> 时间：2012-06-20T18:53:06.513
> 
> 标签：internet-explorer, internet-explorer7, internet-explorer8, , , css, internet-explorer, internet-explorer-8, internet-explorer-7, stylesheet

[internet-explorer](/questions/tagged/internet-explorer "显示标记为“互联网浏览器”的问题") 有时会**中止**`EOT`文件加载进度，因此**字体无法**正确加载。

1.  [**eotfast & mhtml**](http://nnucomputerwhiz.com/demos/fonts/demo-embed-eotfast.html)有一个抽象的解决方案，但它在 IE7+8 中不受支持。

2.  常规`base64`方法效果很好，但*仅*适用于 IE9 ：

    > src: url('data:font/eot;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAggg=='); /* IE 9 */

为[internet-explorer7](/questions/tagged/internet-explorer7 "show questions tagged 'internet-explorer7'") + [internet-explorer8](/questions/tagged/internet-explorer8 "显示标记为“internet-explorer8”的问题")**实施内联 opentype webfonts**的常见解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:43:21.263

### Internet Explorer 7 不支持数据 URL
[有关 DataURL 支持的更多详细信息](http://caniuse.com/#feat=datauri)

在这种情况下，使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)将非 DataURL 字体提供给 IE7 及更低版本：

```
<!--[if (lte IE 7)]>
    <link rel="stylesheet" media="screen" href="css/fontface-ielt8.css" />
<![endif]--> 
```

### Internet Explorer 8 的 DataURL 大小限制为 32KB

如果您的字体没有显示在 IE8 中，这可能是原因。
然后尝试通过[fontsquirrel](http://www.fontsquirrel.com/fontface/generator)（专家模式）或其他应用程序修改字体以减小字体大小。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T02:40:35.763

看到您的问题不是*为 IE7+8 实现内联 opentype webfonts 的问题，*而是*Internet Explorer 似乎有时会中止 EOT 文件加载进度*的事实，我不得不指出字体必须遵守[跨域资源共享](http://dev.openfontlibrary.org/wiki/Web_Font_linking_and_Cross-Origin_Resource_Sharing)。

# javascript - 将包装在对象中的参数提供给函数是一个坏主意吗？

> ID：11126261
> 
> 赞同：1
> 
> 时间：2012-06-20T18:53:36.623
> 
> 标签：javascript, performance, function, arguments

通常，随着我的代码库的增长，函数会收到越来越多的参数，并且维护起来有点草率，所以我通常只是默认为这样的：

```
f = function(args){return args.v + 1;}

f({"v":2}); 
```

它看起来更干净，但是可以这样做吗？为什么不是每个人都这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T18:58:59.443

通常，如果一个函数接受了太多参数，它可能做的太多了。您应该考虑将其重构为更小的函数/对象。

Bob 大叔在他的书 Clean Code 中建议使用很少参数的函数，我同意。当您有许多参数或传入一个对象或数组时，它会使代码难以阅读。如果您在不读取函数主体的情况下传入一个对象，我无法猜测该函数将对所有参数做什么，或者它期望作为参数做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:58:02.423

“它看起来更干净，但可以这样做吗？”

是的。

“为什么不是每个人都这样做？”

他们不是吗？这是 Javascript 中最常见的“多参数”情况的标准做法：传递选项。由于在 Javascript 中创建一次性对象没有开销，因此当您有多个参数时，这是一种常见的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:03:55.683

很好 - 只要您对作为变量传递的对象类型保持良好的控制，并根据需要验证这些值（考虑“假”/空/未定义类型问题），那么是的，这很好实践。维护起来也容易很多。

# java - 在 Java Scripting 中的 JavaScript 脚本中绑定方法调用

> ID：11126263
> 
> 赞同：22
> 
> 时间：2012-06-20T18:53:44.110
> 
> 标签：java, javascript, scripting

假设我有一个 Javascript 文件

```
function js_main(args){
     /* some code */
     var x = api_method1(some_argument);
     /* some code */
} 
```

我尝试用`javax.scripting`通常的方式运行它

```
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByName("javascript");
engine.eval(...); 
```

现在我想`api_method1`用我的 Java 类处理对 Javascript 的调用。我想要某种映射/绑定调用，即每次脚本调用`api_method1(arg)`方法时

```
public Object api_method1(Object arg){ ... } 
```

（与引擎放在同一类中）将被调用。

我能做到这一点吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T19:00:39.297

1.  用于`engine.createBindings()`制作 Bindings 对象；
2.  将一个对象暴露您的方法放入具有某个名称的绑定中：

    ```
    Bindings b = engine.createBindings();
    b.put("api", yourApiObject);
    engine.setBindings(b, ScriptContext.ENGINE_SCOPE); 
    ```

3.  然后在 JavaScript 中会有一个可以调用的全局“api”对象：

    ```
    api.method1( "foo", 14, "whatever" ); 
    ```

该设施易于使用，但要小心您来回传递的内容；将 JavaScript 类型转换为 Java 类型并没有多大作用。

# python - Python 中的基准测试和监控

> ID：11126267
> 
> 赞同：-2
> 
> 时间：2012-06-20T18:53:52.550
> 
> 标签：python, multiprocessing, benchmarking, monitor

我正在尝试运行基准测试并在基准测试运行时监控 cpu 频率。在尽可能小的空间内做到这一点的最佳方法是什么？

基本上，我有一个要运行的基准测试和一个脚本化的 while 循环，用于轮询 cpu 寄存器的数据并计算 cpu 频率。当基准测试终止时，我希望 while 循环也终止。有任何想法吗？

谢谢。

编辑：为了更清楚地阐述，我希望 while 循环继续轮询。假设此任务分配给 cpu 上的特定核心，我希望该核心也可用于基准测试。

主要是，我希望基准测试能够像轮询循环不存在一样运行，并表现出相同的行为。如果有四个核心，我不希望基准测试只使用三个，因为 while 循环被分配给另一个核心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:26:19.260

前言：我是一名计算机科学专业的学生。
我的理解是你有两个用 python 编写的程序，你想同时运行这两个程序。如果您只运行这两个程序，则如何处理由操作系统决定。但是，您可以使用线程来手动控制对所需资源的访问。

关于线程的 Python 文档：http: [//docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)

如果您使用的是花园品种 *nix 发行版，您可以在命令末尾添加 & 以在后台执行它们。操作系统将从那里接管，将您的 while() 脚本视为在基准测试旁边运行的另一个程序。（很像在等待时玩纸牌）

```
python myBenchamrk.py &
python myWhile.py & 
```

我相当有信心以上内容也适用于 mac OS X（也许它算作 *nix 系统？）
我确信 Windows 也有类似的功能。

# asp.net - “AlternatingItemTemplate”在 Windows 资源管理器 9 中有效吗？

> ID：11126271
> 
> 赞同：0
> 
> 时间：2012-06-20T18:54:05.303
> 
> 标签：asp.net, .net, css

以下具有交替背景的代码在 Chrome 和 Firefox 中显示良好，但在 IE9 中不显示：如果 IE9 确实支持它，我错过了什么？

![在此处输入图像描述](../Images/99c3b742381f7d6a2cbdc3519d3f2765.png)

这是分别在 Chrome 和 IE9 中的输出。请注意 IE9 上缺少灰色背景

![在此处输入图像描述](../Images/95dc88dcf1f956880dac0d76e41444ef.png)

![在此处输入图像描述](../Images/aab92559b002ca53beca5e99cfce885a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T18:57:12.390

Internet Explorer 或任何其他浏览器对此一无所知`AlternatingItemTemplate`。它是服务器端控件的一部分。当它是备用行时，ASP.NET*会呈现*的内容。`AlternativeItemTemplate`

至于您的背景颜色不起作用，我建议使用[开发人员工具](http://msdn.microsoft.com/en-us/library/dd565628%28v=vs.85%29.aspx)并跟踪样式以确定它为什么不可见。

# haskell - Haskell：确定函数类型

> ID：11126272
> 
> 赞同：0
> 
> 时间：2012-06-20T18:54:06.320
> 
> 标签：haskell, functional-programming

在准备函数式编程考试时，我在之前的考试中遇到了以下问题：

```
t2 = (\x -> \y -> \z -> (x y, x (x z)))

t3 = t2 (take 3 . reverse) mnr mnr 
```

对于 t2，它被要求确定语句的最一般类型。答案似乎是：

```
(a -> a) -> a -> a -> (a,a) 
```

我可以通过将语句输入 WinHugs 来找到答案，但是如何找到这个答案？我从我[之前的帖子](https://stackoverflow.com/questions/11124354/haskell-function-composition-with-anonymous-lambda-function)中了解到，它与 lambda 函数有关，但我无法解释这里发生了什么。

问题的第二部分 (t3) 然后将两个函数应用于变量 mnr 的两个实例。对于 mnr = [0,1,2,3,4,5,6]，这将导致：

```
([6,5,4],[4,5,6]) 
```

这是如何运作的？函数 take 和 reverse 很清楚，但它们如何应用于 t2 中的 lambda 函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T19:16:14.623

让我们从中间开始，看看结果。

```
(x y, x (x z)) 
```

因为`x`被应用于事物（`y`、`z`和`x z`），所以我们知道它具有`(a -> ?)`问号表示未知类型的类型。现在， 的结果`x`被传递给`x`in `x (x z)`，所以它的输入类型必须是它的输出类型：

```
x :: a -> a 
```

现在，`x`应用于`y`和`z`，所以它们都必须是 类型`a`。`x y`并且`x (x z)`也是类型`a`（因为那是`x`的返回类型），所以`t2`返回类型的东西`(a, a)`。

`x`把它和它的参数的类型（ , `y`, 和）放在一起`z`，我们得到它有类型

```
(a -> a) -- x's type
-> a -- y's type
-> a -- z's type
-> (a, a) -- the result type 
```

`t2`对于你的第二个问题，让我们先看看在's 的定义中哪些东西与哪些变量绑定。第一个参数是 x，所以在这种情况下

```
x = (take 3 . reverse) 
```

下一个参数是 y，所以

```
y = mnr 
```

同样对于 z，

```
z = mnr 
```

结果将是`(x y, x (x z))`，所以让我们评估一下

```
(x y, x (x z))
= ((take 3 . reverse) mnr, (take 3 . reverse) ((take 3 . reverse) mnr))
= (take 3 (reverse mnr), take 3 (reverse (take 3 (reverse mnr)))) 
```

对于 的这种特殊情况`mnr = [0,1,2,3,4,5,6]`，我们得到

```
= (take 3 (reverse [0,1,2,3,4,5,6]), take 3 (reverse (take 3 (reverse [0,1,2,3,4,5,6]))))
= (take 3 [6,5,4,3,2,1,0], take 3 (reverse (take 3 [6,5,4,3,2,1,0])))
= ([6,5,4], take 3 (reverse [6,5,4]))
= ([6,5,4], take 3 [4,5,6])
= ([6,5,4], [4,5,6]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:02:21.743

> t2 = (\x -> \y -> \z -> (xy, x (xz)))

注意最后的应用程序。x 应用于 y，所以 x 必须是一个函数。x 也适用于 (xz)，因此 x 必须返回与它作为参数相同的类型。

我不确定你对第二个问题的意思。mnr 的两个实例？

编辑：所以，t3 只是 t2 应用于参数（取 3 . reverse） mnr mnr。第一个参数是 t2 中的 x，我们在上面看到 x 应用于 y，然后应用于 (xz)。

那么结果就是`((take 3 . reverse) mnr, (take 3 . reverse) ((take 3 . reverse) mnr))`

元组第一部分中的 mnr 是作为参数 (y) 传递的第一个 mnr。第二部分中的一个是第二个参数（z）。当然，它们是一样的。

# hadoop - 使用 Hadoop 处理大型二进制文件

> ID：11126273
> 
> 赞同：2
> 
> 时间：2012-06-20T18:54:07.993
> 
> 标签：hadoop, mapreduce, binary-data, large-files

我知道这里有类似的帖子，但我找不到真正有可靠答案的帖子。

我们有一个加载了二进制文件的 Hadoop 集群。这些文件的大小可以从几百 k 到几百 mb 不等。

我们目前正在使用自定义记录阅读器处理这些文件，该阅读器将文件的全部内容读入每个地图。从那里我们提取我们想要将其序列化为 JSON 的适当元数据。

我们预见的问题是我们最终可能会达到我们的名称节点无法处理的大小。只有这么多的内存可以使用，拥有一个具有几 TB 内存的名称节点似乎很荒谬。

有没有一种优雅的方式来处理像这样的大型二进制文件？尤其是那些因为我们不知道reducer会按照什么顺序将它们重新组合在一起而无法拆分的那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T01:42:48.837

所以不是这样的答案，但我有很多问题，评论列表会更难传达，所以这里是：

您说您将每个地图的全部内容读入内存，您能否详细说明这些文件的实际二进制输入格式：

*   它们是否包含逻辑记录，即单个输入文件是否代表单个记录，还是包含许多记录？
*   文件是否被压缩（事后或某些内部压缩机制）？
*   您目前如何一次处理此文件，您将转换为 JSON 的整体 ETL 逻辑是什么？
*   您是否真的需要在处理开始之前将整个文件读入内存，或者一旦填充了一定大小的缓冲区（例如 DOM 与 SAX XML 解析），您是否可以处理。

我的猜测是，您可以将一些映射器逻辑迁移到记录阅读器，甚至可能找到一种在多个映射器之间“拆分”文件的方法。这将允许您解决您的可扩展性问题。

要解决您问题中的一些问题：

*   NameNode 只需要内存来存储有关块的信息（名称、块[大小、长度、位置]）。假设您为其分配了一个不错的内存占用量（GB），那么您没有理由不能拥有一个在 HDFS 存储中保存 PB 级数据的集群（假设您有足够的物理存储）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:48:41.130

Namenode与存储或处理没有任何关系。你应该专注于你的Datanodes和Tasktrackers。另外我不知道你是想解决存储问题还是在这里处理你的文件。如果你正在处理大量二进制文件，值得一看 Hadoop SequenceFile。SequenceFile 是由二进制键/值对组成的平面文件，因此在 MapReduce 中广泛用作输入/输出格式。有关详细说明，您可以访问此页面 -

```
http://wiki.apache.org/hadoop/SequenceFile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T01:32:15.140

当您有大型二进制文件时，使用 SequenceFile 格式作为输入格式并相应地设置映射的输入拆分大小。您可以根据总输入大小和您设置的拆分大小来设置映射器的数量。Hadoop 将负责拆分输入数据。

如果您有以某种格式压缩的二进制文件，则 hadoop 无法进行这种拆分。所以二进制格式必须是SequenceFile。

# c#-3.0 - 序列不包含匹配元素，但是当我插入断点时它包含元素

> ID：11126274
> 
> 赞同：1
> 
> 时间：2012-06-20T18:54:10.273
> 
> 标签：c#-3.0

我有这个代码：

```
int gts_size=20;
int gts_type=1;

var r = from room in collection_of_rooms.rooms
        where gts_size <= room.capacity_of_room 
        select room;

var r2 = r.First<Room>(rr => (rr.room_type == gts_type)); // here is the error 
```

rooms 是 "Room" 类的数组，具有以下字段： capacity_of_room 和 room_type

消息“序列不包含匹配元素”引发的异常 **但是**当我插入断点来跟踪代码时，它可以正常工作并且 r1,r2 有值。我已经尝试过 FirstOrDefault() 并且仍然在发生同样的事情。

任何人都可以帮助我吗？

# mysql - 有没有办法在表没有 UPDATE 权限的情况下创建一个带有 Rails 迁移的 MySQL 表？

> ID：11126277
> 
> 赞同：2
> 
> 时间：2012-06-20T18:54:18.943
> 
> 标签：mysql, ruby-on-rails, ruby, migration

我正在寻找创建一个只读表，我认为 MYSQL 权限是最好的方法。

这可以通过迁移实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:24:44.047

生成迁移文件如下，

```
rails g migration add_permissions_to_table_name    
invoke  active_record
      create    db/migrate/20120620191050_add_permissions_to_table_name.rb 
```

编辑文件如下，

think@thinkComputer:~/Agile/ajax1$ vi db/migrate20120620191050_add_permissions_to_table_name.rb

```
class AddPermissionsToTableName < ActiveRecord::Migration
  def up

    execute "GRANT SELECT ON database1.table_name TO 'someuser'@'somehost'"

  end

  def down

    execute "REVOKE SELECT ON database1.table_name TO 'someuser'@'somehost'"

  end

end 
```

按如下方式运行 rake 任务，

```
$ rake db:migrate 
```

将来，如果您想撤销该许可，请执行以下操作，

```
$ rake db:migrate:down VERSION=20120620191050 
```

您希望成为对“database1.table_name”具有授予权限的 mysql 用户，否则您将收到以下错误，

```
mysql> GRANT SELECT ON database1.table_name TO 'someuser'@'somehost';
ERROR 1142 (42000): GRANT command denied to user 'current_mysql_user'@'localhost' for table 'table_name' 
```

**mysql 用户和数据库的详细信息位于“config/database.yml”**

请让我知道这是否有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:28:47.650

如果你想编辑你的模型，你可以：

```
class YourModel < ActiveRecord::Base
  attr_readonly :your_field_name
end 
```

这不是迁移，但可能是最简单的方法。

# jquery - jQuery Mobile changepage 使父函数运行两次

> ID：11126279
> 
> 赞同：0
> 
> 时间：2012-06-20T18:54:25.967
> 
> 标签：jquery, html, jquery-mobile, web

大家好，我的 jQuery 移动脚本似乎有问题。

```
<script>
$(document).bind('pageinit', function()
    {
        var count=0;
        var pages = ["#home","#rich","#dan"];
        $('.master').click(function() 
        {
        count=count+1;

            $.mobile.changePage($(pages[count]));

            console.log(count);         

        });

    });
</script> 
```

所以会发生什么是第一次点击它工作。计数上升到 1，页面更改为 #rich。第二次单击计数变为 2 页面快速闪烁到 #dan，然后立即闪回 #rich，计数又回到 1。如果我再次单击，我会收到一条错误消息

> b.data("page") 未定义

不知道为什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:55:07.127

正如 Huangism 所建议的，[每次加载新页面时都会运行 pageinit](http://jquerymobile.com/test/docs/api/events.html)，很可能会重置您的计数器。尝试使用 $(document).ready() 或其他仅触发一次的事件来设置您的点击事件。

# php - 如何在 PHP 中使用 NT 身份验证连接？

> ID：11126280
> 
> 赞同：2
> 
> 时间：2012-06-20T18:54:29.273
> 
> 标签：php, sql-server, iis, active-directory

我正在尝试使用 PHP（在 IIS 中）连接到 Microsoft SQL 服务器数据库。代码中提供的用户/通行证是一个AD帐户，可以在Access中通过ODBC访问数据库就好了。

```
$serverName = "servername";
$connectionInfo = array( "Database"=>"dbname", "UID"=>"myuser", "PWD"=>"mypass");
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn ) {
     echo "Connection established.<br />";
}else{
     echo "Connection could not be established.<br /><pre>";
     die( print_r( sqlsrv_errors(), true));
} 
```

用户名和密码有效，服务器名称和数据库名称也是有效的。但这是返回错误：

> [Microsoft][SQL Server Native Client 10.0][SQL Server]用户“myuser”登录失败。

对于用户名（这是 AD 中的有效用户，我可以使用 Access 连接/链接到该数据库）我也尝试过：

*   DOMAIN.ORG\myuser
*   DOMAIN.ORG\\myuser
*   myuser@DOMAIN.ORG

我的域用户 ( `myuser`) 通过 AD 拥有该服务器的管理员权限。但这会返回相同的`Login failed`错误。有什么我想念的吗？我可以毫无问题地使用 Access 连接到同一个数据库（在同一用户下）。

我在 Access 中连接的方式是本地用户的 ODBC 数据源。数据源设置为“通过使用网络登录 ID 的 Windows NT 身份验证”进行身份验证。我怎样才能在 PHP 中做到这一点？

[这种模拟配置](http://blogs.msdn.com/b/brian_swan/archive/2010/02/10/sql-server-driver-for-php-understanding-windows-authentication.aspx)是可能的原因吗？

PHP在用户下运行`nt authority\iusr`

如果它试图使用登录`iusr`，错误消息不会这样说吗？

我尝试在这台名为“TestDS”的机器上创建一个数据源并使用代码：

```
$conn = odbc_connect("TestDS", "", ""); 
```

但这给了我：

> 指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配，SQLConnect 中的 SQL 状态 IM014

Machine1 是一个试图访问网页的客户端（PHP 代码在 Machine2 上），Machine2 上的代码正在与 Machine3 建立 SQL 连接 ( `servername`)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:14:26.993

通过在连接字符串中指定“Trusted Connection=SSPI”来启用 SQL Server 连接中的“Windows 安全”。连接字符串中不存储用户名或密码（仅用于“SQL Server 安全性”）。运行 PHP 的进程（可能是 php_cgi.exe 本身）必须在 Windows（本地或 AD）下运行，该 Windows 登录已在 SQL Server 上注册。

在 IIS 下，php_cgi.exe 以应用程序池的用户身份运行。如果你有一个异构的安全环境，我建议为这个单一的网站创建一个 IIS 应用程序池。

# javascript - 如何复制 div 及其内容，并将其附加到其他地方但保持原始隐藏

> ID：11126281
> 
> 赞同：0
> 
> 时间：2012-06-20T18:54:33.813
> 
> 标签：javascript, jquery, css

我有一个 div 元素，例如：

```
<div id="abc">....</div> 
```

它`display:none`在页面加载时是隐藏的或默认情况下。

我知道想将此 div 及其内容附加到其他地方，并使其可见，但原始内容应保持不可见（或者我可以将其删除）。

我怎样才能做到这一点？

我目前正在附加它，但它出现在 2 个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:07:30.570

深度克隆、附加、删除`id`属性和显示。

```
​​$("div#abc")
  .clone()
  .appendTo("div#other")
  .removeAttr("id")
  .show();​​​​​​ 
```

删除或修改您的`id`属性，有多个相同的元素`id`很麻烦。如果你碰巧使用 CSS 类，你也可以这样使用它：

```
.template {
  display: none;
} 
```

```
​​$("div.template")
  .clone()
  .appendTo("div#other")
  .removeClass("template");​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:56:44.343

从隐藏的 div 中获取 HTML 并将其附加到您的目标中，使用`.html()`and`.append()`

```
var html = $('div.hidden-div').html();
$('div.target-div').append(html); 
```

要显示目标 div 然后删除旧的，请执行以下操作：

```
$('div.target-div').show();
$('div.hidden-div').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:20:53.550

如果可以删除它（如您所说），只需将其附加到另一个元素即可。该元素将自动从一开始就被删除，并且永远不会出现在那里。

```
$("#abc").appendTo(place2).show(); 
```

# javascript - 使用 Javascript (JQuery) 解析 JSON 文件

> ID：11126283
> 
> 赞同：-3
> 
> 时间：2012-06-20T18:54:53.043
> 
> 标签：javascript, jquery, json, parsing

我拼命尝试用 Javascript 解析 JSON 文件。

这是我的数据：

```
{
    "streetCity":
    {
        "132":"Abergement-Clemenciat",
        "133":"Abergement-de-Varey",
        "134":"Amareins"
    }
} 
```

我只想访问每个数据，但我尝试过但失败了。

你有想法阅读这些数据吗？

谢谢 ！

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:00:23.090

如果您只想解析文件，则可以使用库中`.getJSON()`的函数。`jQuery`然后，您可以轻松地创建一个读取数据的脚本，然后对其进行处理。

```
 $.getJSON('test.json', function(data) {
      alert (data.value1)
 }); 
```

有关更多信息，请阅读链接[getJSON](http://api.jquery.com/jQuery.getJSON/)和[jQuery](http://jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:05:00.350

如果这是您的数据，或者您的数据是这种形式，那么您可以简单地使用。

```
var obj = {"streetCity":
    {
        "132":"Abergement-Clemenciat",
        "133":"Abergement-de-Varey",
        "134":"Amareins"
    }
    };
console.log(typeof(obj)); // will tell the type, it should be object
obj.streetCity['132']  will return Abergement-Clemenciat", 
```

它的行为类似于 JSON 对象。

否则，如果您的数据是动态生成的，请使用**[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)**函数从服务器获取 JSON 数据。它将以 JSON 格式返回数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:56:39.270

```
var obj = {
    "streetCity":
    {
        "132":"Abergement-Clemenciat",
        "133":"Abergement-de-Varey",
        "134":"Amareins"
    }
};

obj.streetCity[132] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T18:58:12.167

我假设，通过说 JSON 文件，你的意思是你`JSON`的脚本中有一些。

```
var data={
    "streetCity":
    {
        "132":"Abergement-Clemenciat",
        "133":"Abergement-de-Varey",
        "134":"Amareins"
    }
}; 
$.each(data.streetCity,function(index,item){

       alert(item);            
}); 
```

示例[http://jsfiddle.net/yjXjh/4/](http://jsfiddle.net/yjXjh/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T18:59:01.987

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

必须解析带引号和单引号的 JSON。

如果您创建的 JSON 没有引号和单引号（格式不正确），那么您可以将 JSON 设置为等于一个变量。但不要这样做。

# php - 样式化 php twitter 提要

> ID：11126284
> 
> 赞同：0
> 
> 时间：2012-06-20T18:54:55.123
> 
> 标签：php, css, twitter, styles, feed

我不太确定如何设计这个特定的 php 样式：

```
<div id="twitter-feed">
    <a href="http://www.twitter.com/frshstudio"><span style="font-weight:bold;">@frshstudio</span></a>

        <?php
        include_once(ABSPATH . WPINC . '/feed.php');
        $rss = fetch_feed('https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=frshstudio');
        $maxitems = $rss->get_item_quantity(3);
        $rss_items = $rss->get_items(0, $maxitems);
        ?>

        <ul>
        <?php if ($maxitems == 0) echo '<li>No items.</li>';
        else
        // Loop through each feed item and display each item as a hyperlink.
        foreach ( $rss_items as $item ) : ?>
        <li>
        <a href='<?php echo $item->get_permalink(); ?>'>
        <?php echo $item->get_title(); ?>
        </a>
        </li>
        <?php endforeach; ?>
        </ul>
    </div><!-- end twitter-feed --> 
```

理想情况下，我想在每条推文之前用一个要点替换“FRSHStudio”。此外，每条推文之间可能会有一些填充，因此提要不会那么混乱。

[现场直播。](http://frshstudio.com/blog/)

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:05:47.677

要删除每个项目中的 FRSHStudio，您可以使用以下代码：

```
<?php echo str_replace('FRSHStudio: ', '', $item->get_title()); ?> 
```

然后，在 css 中，要在列表的每个项目上添加项目符号和一些填充，请使用以下命令：

```
#twitter-feed ul li {
    list-style: disc;
    padding-bottom: 4px;
    padding-left: 10px
} 
```

# php - 如何在彼此前面显示动态文本框

> ID：11126291
> 
> 赞同：1
> 
> 时间：2012-06-20T18:55:24.943
> 
> 标签：php, html, css

请帮助我显示我的网页。

下图显示了三个文本框，上面有各自的名称。请我如何使用 CSS 使它们显示在彼此的前面，即在同一（单）行上，并且每个标题中心对齐它的框？

每个框标题都是从数据库（php/mysql）生成的，而文本框则添加到生成标题的循环中。

图片 ![](../Images/3fc076c366eab06337c89e26cbd41d79.png)

谢谢你。

**更新**

这是我用来生成这个显示的代码

```
 <form action="<?php echo htmlentities($_SERVER['SCRIPT_NAME']) ?>" method               ="post"> 
           <?php             
          while($row=mysql_fetch_assoc($query)){                       
       echo $row['senatorial']."</br>" ;?> 
```

```
 <?php  } ;?>
          <input type="hidden" name="action" value="submit" />
                <input type='submit' name='submit' class='OpenInput_Btn' value='Create' title='Register Constituency' />
                </form> 
                <?php  
     } 
```

?>

**CSS**

```
.consistuency{
             display: inline;
             margin-left: 90px;
             font-size: 15px;
             font-family: Calibri:
        } 

     label {
            width: 8em;
            float: left;
            display: block;
            font-size: 1.1em;
            color: Beige;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:06:37.187

假设您想保持标签原样，将每个标签/字段对包装在一个 div 中，给这些 div 一个类名（例如，“fieldWrapper”）并给该类`display: inline-block;`：

```
.fieldWrapper {
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:03:38.210

我假设您希望文本框的标题在一行中彼此相邻，因此正如 bfavaretto 所说，使用 div。

在 while 循环中将 div 标签添加到此代码中：

```
 <label for='name'></label>     
          <input type='text' name='constituency' class='OpenInput_Text' />
                 </br> 
```

如果您确切知道将从 db 表返回多少行，那么您可以将 div 宽度设置为百分比，在本例中类似于 %30。

否则，您可以计算返回的行数并使用此值来计算 div 的百分比/宽度，然后使用内联 css 进行设置。

# git - 无法在 Git 存储库中取消忽略以前忽略的文件

> ID：11126292
> 
> 赞同：77
> 
> 时间：2012-06-20T18:55:28.350
> 
> 标签：git, gitignore

我有一个站点，该站点有一个`/sites/default/files/`通常保存用户内容的目录。考虑到我不需要跟踪这些东西，我将 /sites/default/files/ 添加到我的 .gitignore 文件中。

然后我发现我还想在那个目录中保留一些主要是永久的上传。现在跟踪 /sites/default/files/ 中的所有内容并排除不需要的子目录更有意义，而不是反过来做。

问题是 Git 不会停止忽略该目录。我已从 .gitignore 中删除了指定此目录的行，它不会跟踪它。我可以选择`git add /sites/default/files/ -f`强制 git 跟踪目录，但我以前做过，看起来很乱。

如果 .gitignore 不再将该目录指定为忽略，为什么我必须强制 Git 开始跟踪这些文件？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-20T19:01:56.507

你已经知道该怎么做了。是的，`git add -f`就是这样。

如果你问为什么......这是因为 git 在`assume-unchanged`内部设置了一点。这一点让 git 认为文件没有被修改，所以`git add`不会添加它。

如果你想弄乱实现细节，你可以使用`git update-index --no-assume-unchanged <file>`命令。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-20T19:37:44.210

我不认为 J-16 是正确的。来自[http://www.kernel.org/pub/software/scm/git/docs/git-add.html](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)：

> git add 命令默认不会添加被忽略的文件。如果在命令行上明确指定了任何被忽略的文件， git add 将失败并显示被忽略文件的列表。由 Git 执行的目录递归或文件名通配（在 shell 之前引用你的通配符）到达的忽略文件将被静默忽略。**git add 命令可用于使用 -f（强制）选项添加被忽略的文件。**

`git add -f`似乎仅用于在某处添加忽略文件中**确实**存在的文件。

也许 /sites 或 /sites/default 中还有另一个 .gitignore 文件，它也告诉 Git 忽略此目录，或者它可能已在 .git/info/exclude 中设置？

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-22T14:52:03.830

对于后代：我的问题的答案是“仔细看”。

@twalberg 正确地指出，我在 .gitignore 文件中可能忽略了一条规则。应用 .gitignore 规则的级联方式使得排除比预期更广泛的文件变得容易。

据我所知，我对 git 工作方式所做的假设是正确的。同样，我的案例似乎不支持（或反驳）@J-16 SDiZ 关于该`assume-unchanged`位可能扮演什么角色的评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-30T14:43:46.413

我们的 Drupal 站点目录中有一个非常相似的问题。问题是*Drupal 发行版*在更高级别的 drupal 目录中有一个 .gitignore 文件，该文件与 drupal/sites/files/* 中的任何内容匹配

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-19T16:32:38.453

就我而言，回购中`.png`的`.xlsx`文件被忽略了。正如@doub1ejack、@J-16 SDiZ 和其他人所说，您需要使用`git add -f`来跟踪更改。但是，`git add -f`除非您明确指定文件或模式并响应为

`Nothing specified, nothing added.`

`Maybe you wanted to say 'git add .'?`

为了开始跟踪以前忽略的文件或模式：

1.  首先，您需要通过键入将工作目录更改为存储库`cd <path>`。
2.  其次，您需要指定文件或模式以通过键入`git add -f <file name>.extension`特定文件或`git add -f *.xlsx`所有 excel 文件来跟踪它们。

这忽略了我的案例被忽略的文件。您还可以查看此[YouTube 视频](https://www.youtube.com/watch?v=RbtIfBHDgJ8)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-13T13:11:28.747

如果您通过 git staging 错误地单击了忽略的选项 ion Eclipse git，那么要取回您的文件，请执行以下操作：

1.  打开你的 git bash
2.  `git status --ignored` execute this cmd here your ignored file will displayed
3.  copy the path of that file
4.  `git add -f <file path>` [add file path after -f ]
5.  `git status`
6.  file will visible

# r - 将 id 更新为其 parent_id 除非它具有不同的值

> ID：11126301
> 
> 赞同：3
> 
> 时间：2012-06-20T18:56:01.003
> 
> 标签：r

首先，为可怜的不清楚的问题标题道歉，这是一个非常具体的问题，我不知道如何用一行来表达！

无论如何，我的问题如下。我有一个带有 id、父 id 和两个值的数据框，比如 a 和 b。我想将一行的 id 更新为它的 parent_id，除非它的值不等于它的 parent_id。

所以例如说我有桌子：

```
id parent_id a b  
1    0       x x
2    1       x x
3    1       x y
4    0       y y
5    4       x x 
6    1       x x
7    4       y y 
```

可以用代码生成

```
 x <- data.frame('id' = c(1,2,3,4,5,6,7),
                 'parent_id' = c(0,1,1,0,4,1,4),
                 'a' = c('x','x','x','y','x','x','y'),
                 'b' = c('x','x','y','y','x','x','y')) 
```

这应该变成：

```
id parent_id a b
1    0       x x
1    1       x x
3    1       x y
4    0       y y
5    4       x x
1    1       x x
4    4       y y 
```

所以`id`2 变成了 1，因为它是`parent_id`，并且是属性`a`&`b`都等于`x`，与 1 相同`id`，但是`id`3 保持不变，尽管它`parent_id`是`1`，但它不具有相同的属性。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:28:34.137

其他人可能有一个更优雅的解决方案，但这得到了你想要的：

```
# list of a-b pairs for parent_id
parent.id.ab <- with(x, lapply(parent_id, FUN=function(y) c(a[id==y], b[id==y])))

# list of a-b pairs for id
id.ab <- with(x, mapply(function(y,z) c(y,z), a, b, SIMPLIFY=FALSE))

# condition is a vector of TRUE/FALSE, TRUE if the parent_id a-b pair equals the id a-b.
# When the parent_id is 0, its a-b pair is integer(0). Since all(logical(0)) is TRUE,
# we only use all(z == y) when z and y have the same length.
condition <- mapply(function(z,y) if (length(z) == length(y)) all(z == y) else FALSE, 
                    parent.id.ab, id.ab)

x$id <- ifelse(condition, x$parent_id, x$id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:36:08.910

此更新版本应适用于文本或数字 id 变量：

```
vars <- c("a","b")
matches <- apply(x[vars]==x[match(x$parent_id,x$id),][vars],1,all)
x$id[matches==TRUE & is.na(matches)==FALSE] <- x$parent_id[matches==TRUE & is.na(matches)==FALSE] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:33:49.037

感谢你们俩，thelatemails 的答案适用于我给你的示例，但实际上我的数据框中的 id 不是 1、2、3、4 等...而是更随机且不包含所有数字，因此代码当你得到 ds[matches, ] 时会掉下来。我认为 mplourde 的答案可以解决问题，但我最终使用以下代码完成了它：

```
 betValues <- with(x, paste(id, a, b, sep="-"))

  x[, 'id'] <- with(x, ifelse(parent_id== 0, id, 
          ifelse(!paste(parent_id, a, b, sep="-") %in%  betValues, id, parent_id))) 
```

我认为这很有效，而且非常快速和整洁。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T23:04:00.297

有趣的问题，我的看法：

```
own.idx        <- seq_len(nrow(x))
parent.idx     <- match(x$parent_id, x$id)
matches.parent <- mapply(function(i,j)!is.na(j) && all(x[i, c("a", "b")] ==
                                                       x[j, c("a", "b")]),
                         own.idx, parent.idx)

x$id <- ifelse(matches.parent, x$parent_id, x$id) 
```

# objective-c - 如何使用 RestKit 加载多个不相关的对象？

> ID：11126303
> 
> 赞同：0
> 
> 时间：2012-06-20T18:56:15.857
> 
> 标签：objective-c, ios, rest, core-data, restkit

我需要使用 RestKit 将多个没有关系但位于同一个远程 API 上的对象加载到 CoreData 中（换句话说，下载远程对象以在 iOS 本地使用它们）

所以我已经设置了我的 Client 和 objectManager：

```
client = [RKClient clientWithBaseURL:[NSURL URLWithString:baseUrl]]; 
[client setUsername:@"someUsername"];
[client setPassword:@"somePassword"];

objectManager = [RKObjectManager managerWithBaseURLString:baseUrl];
[objectManager setClient:client]; 
```

然后我为一个 Object#1 设置了一些映射：

```
RKManagedObjectMapping* companyMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Company" inManagedObjectStore:objectManager.objectStore];
companyMapping.primaryKeyAttribute = @"backendID";
[companyMapping mapKeyPath:@"id" toAttribute:@"backendID"];
[companyMapping mapKeyPath:@"company_name" toAttribute:@"companyName"]; 
```

然后我为对象 #2 设置了一些映射：

```
RKManagedObjectMapping* eventMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Event" inManagedObjectStore:objectManager.objectStore];
eventMapping.primaryKeyAttribute = @"backendID";
[eventMapping mapKeyPath:@"id" toAttribute:@"backendID"];
[eventMapping mapKeyPath:@"description" toAttribute:@"eventDescription"]; 
```

之后，我将 objectMapping 设置为 mappingProvider：

```
 [objectManager.mappingProvider setObjectMapping:companyMapping forResourcePathPattern:remoteObjectPath];
 [objectManager.mappingProvider setObjectMapping:eventMapping forResourcePathPattern:remoteObjectPath]; 
```

最后，我为这两个对象一个接一个地调用“loadObjects ...”：

```
[objectManager loadObjectsAtResourcePath:remoteCompaniesObjectPath delegate:self];
[objectManager loadObjectsAtResourcePath:remoteEventsObjectPath delegate:self]; 
```

在这之后会发生什么，来自公司和事件的数据以某种方式加载到事件表中，因此表数据完全不可用。如果我只运行`loadObjectsAtResourcePath:remoteCompaniesObjectPath`，那么一切都按预期工作，远程公司对象下载到 CoreData 中它自己的表中。

虽然它为什么会发生是有道理的（数据对于公司开始加载并获得新的映射，所以它加载到错误的表中）**问题**是：如何调用`loadObjectsAtResourcePath:remoteObjectPath`方法来加载多个不相关的对象，以便它们可以正确加载到各自的表中在核心数据？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:12:46.803

好吧，我认为 restkit 没有什么可以区分公司和事件两种对象类型。

有两种方法可以解决这个问题。两者都很简单，取决于您选择什么：

1.  您为公司和活动提供了 restkit 的根密钥路径。然后你修改你的 api 以在 json 中包含一个 rootkeypath。像下面的东西..

    ["company":{ "Backendid":1 "company name":"abc" } {"events":{ {Backendid":1 "description":"party" }]

    在这种情况下，restkit 将知道哪个是事件，什么是公司，并会自动映射到正确的表。查看 rkgithub 示例以获取更多提示。

2.  您将在线 api 设置为两者都有 2 个不同的 url。因此，不同的 URL 将确保 restkit 不会混淆表格。

还有一点要问的是，您的活动栏也有公司名称栏吗？因为我原以为 restkit 会给您一个错误，因为从您的映射来看，事件表中似乎没有名为 company name 的列。你想在这里建立某种对多的关系吗？公司有很多活动类型的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:59:02.673

您的映射提供者需要进行调整 - 使用其各自的 URL 设置每个映射。

从以下位置更改映射：

```
[objectManager.mappingProvider setObjectMapping:companyMapping forResourcePathPattern:remoteObjectPath];
[objectManager.mappingProvider setObjectMapping:eventMapping forResourcePathPattern:remoteObjectPath]; 
```

至：

```
[objectManager.mappingProvider setObjectMapping:companyMapping forResourcePathPattern: remoteCompaniesObjectPath];
[objectManager.mappingProvider setObjectMapping:eventMapping forResourcePathPattern:remoteEventsObjectPath]; 
```

# facebook - facebook注册规则链接

> ID：11126311
> 
> 赞同：0
> 
> 时间：2012-06-20T18:56:52.253
> 
> 标签：facebook, api

是否可以在字段描述中嵌入链接？

我想要一个复选框字段“我接受*规则*”并使用 _blank 链接将用户重定向到规则...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:09:34.820

不，那是不可能的。

但是您的应用程序隐私政策 URL 和 TOS URL 将显示在插件的页脚（以及身份验证对话框中） - 所以也许您可以提醒用户阅读这些内容，然后在字段描述中使用简单*文本*选中复选框（“见下面的链接”……）而不是在复选框旁边有一个链接。

# java - 什么是最佳 scrypt 工作因素？

> ID：11126315
> 
> 赞同：71
> 
> 时间：2012-06-20T18:57:07.127
> 
> 标签：java, cryptography, scrypt

我正在使用[Java scrypt 库](https://github.com/wg/scrypt)来存储密码。当我加密事物时，它需要一个`N`,`r`和`p`值，它的文档将其称为“CPU成本”、“内存成本”和“并行化成本”参数。唯一的问题是，我实际上并不知道它们的具体含义，或者对它们有什么好的价值；也许它们以某种方式对应于[Colin Percival 原始应用程序](http://www.tarsnap.com/scrypt.html)上的 -t、-m 和 -M 开关？

有人对此有什么建议吗？该库本身列出了 N = 16384，r = 8 和 p = 1，但我不知道这是强还是弱或什么。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-25T10:41:14.013

作为开始：

*cpercival*[在他 2009 年的幻灯片](http://www.tarsnap.com/scrypt/scrypt-slides.pdf)中提到了一些东西

*   (N = 2^14, r = 8, p = 1) for < 100ms (交互式使用), 和
*   (N = 2^20, r = 8, p = 1) for < 5s (敏感存储)。

即使在今天（2012-09），这些值对于一般用途（某些 WebApp 的密码数据库）也足够好。当然，具体取决于应用程序。

此外，这些值（大部分）意味着：

*   `N`：一般工作因子，迭代次数。
*   `r`: 用于底层哈希的块大小；微调相对内存成本。
*   `p`: 并行化因子；微调相对 CPU 成本。

`r`并且`p`旨在解决 CPU 速度、内存大小和带宽未按预期增加的潜在问题。如果 CPU 性能提高得更快，你就会提高`p`，相反，如果内存技术的突破提供一个数量级的改进，你就会提高`r`。并且`N`是否可以跟上每个时间跨度的一般性能*翻倍*。

*重要提示：*所有值都会改变结果。（更新：）这就是为什么所有 scrypt 参数都存储在结果字符串中的原因。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2015-05-18T16:44:54.980

## 简短的回答

这样验证密码需要 250 毫秒

## 长答案

scrypt 运行所需的内存计算如下：

> 128 字节 × `cost (N)`×`blockSizeFactor (r)`

对于您引用的参数 ( `N=16384`, `r=8`, `p=1`)

> 128×16384×8 = 16,777,216 字节 = 16 MB

选择参数时必须考虑到这一点。

Bcrypt比 Scrypt *“弱”*（尽管仍然[比 PBKDF2 强三个数量级](http://emsec.rub.de/media/crypto/veroeffentlichungen/2014/10/22/reconfig14_bcrypt.pdf)），因为它只需要 4 KB 的内存。你想让硬件中的并行破解变得困难。例如，如果显卡有 1.5 GB 的板载内存，并且您将 scrypt 调整为消耗 1 GB 内存：

> 128×16384×512 = 1,073,741,824 字节 = 1 GB

然后攻击者无法在他们的视频卡上并行化它。但是，您的应用程序/电话/服务器每次计算密码时都需要使用 1 GB 的 RAM。

它可以帮助我将 scrypt 参数视为一个矩形。在哪里：

*   宽度是所需的内存量 (128*N*r)
*   高度是执行的迭代次数
*   得到的面积就是整体*硬度*

![内存所需的次数迭代是 scrypt 硬度](../Images/3294d0dbc1366728bcfbc31fc2c3d5c3.png)

*   `cost`( **N** ) 增加了内存**使用**和**迭代**。
*   ( **r**`blockSizeFactor` )增加**内存使用量**。

 ****剩余的参数`parallelization`( **p** ) 意味着您必须执行整个操作 2、3 或更多次：

![在此处输入图像描述](../Images/944295cc7dc9f807167f0e326676b1a7.png)

如果您的内存比 CPU 多，则可以并行计算三个单独的路径 - 需要三倍的内存：

![在此处输入图像描述](../Images/15a5362f77aa7176c4034c355291e1bd.png)

但在所有现实世界的实现中，它是按顺序计算的，所需的计算量增加了三倍：

![在此处输入图像描述](../Images/1dac5bf5835030e01494abca7037d86a.png)

实际上，没有人选择过`p`除 以外的因素`p=1`。

理想的因素是什么？

*   尽可能多的 RAM
*   尽可能多的时间！

## 奖金表

以上的图形版本；你的目标是~250ms：

[![在此处输入图像描述](../Images/bbe9303d9ea0d835c151a4d977d63609.png)](https://i.stack.imgur.com/EPia0.png)

笔记：

*   纵轴是对数刻度
*   成本因子（水平）本身是对数（迭代次数 = 2 ^(CostFactor)）
*   在`r=8`曲线中突出显示

并将上述版本放大到合理区域，再次查看~250ms 幅度：

[![在此处输入图像描述](../Images/58034eb4245fe646e26e9c5e39439b68.png)](https://i.stack.imgur.com/P8HgT.png)

## 奖金喋喋不休

*   如果 scrypt 配置为使用小于 4 MB 的空间，则 scrypt 的密码存储比 bcrypt 弱 ^([1](https://archive.vn/4OTWX))
*   Argon2 (i/d/id) 在用于身份验证的密码散列方面比 bcrypt 弱（即 <1,000 毫秒验证时间）  ^([2](https://archive.vn/EWuCc))

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-10-23T08:31:18.533

我不想踩到上面提供的出色答案，但没有人真正谈论为什么“r”具有它所具有的价值。Colin Percival 的 Scrypt 论文提供的低级答案是它与“内存延迟-带宽乘积”有关。但这实际上意味着什么？

如果您正确使用 Scrypt，则应该有一个大内存块，该内存块主要位于主内存中。主内存需要时间来提取。当块跳跃循环的迭代首先从大块中选择一个元素以混合到工作缓冲区中时，它必须等待大约 100 ns 的时间才能让第一个数据块到达。然后它必须请求另一个，并等待它到达。

对于 r = 1，您将执行 4nr Salsa20/8 迭代*和*2n 延迟从主内存读取。

这不好，因为这意味着攻击者可以通过构建一个对主内存的延迟减少的系统来获得优势。

但是，如果您增加 r 并按比例减少 N，您就能够实现与以前相同的内存需求并执行相同数量的计算——除了您已经将一些随机访问换成了顺序访问。扩展顺序访问允许 CPU 或库有效地预取下一个所需的数据块。虽然初始延迟仍然存在，但后期块的减少或消除延迟将初始延迟平均到最低水平。因此，攻击者从改进他们的内存技术中获益甚微。

但是，随着 r 的增加，存在一个收益递减点，这与前面提到的“内存延迟-带宽乘积”有关。该产品表示的是在任何给定时间可以从主存储器传输到处理器的数据字节数。这与高速公路的想法相同——如果从 A 点行驶到 B 点需要 10 分钟（延迟），而道路从 A 点（带宽）以 10 辆/分钟的速度运送到 B 点，则 A 点和 B 点之间的道路B 包含 100 辆汽车。因此，最佳 r 与您一次可以请求多少个 64 字节数据块有关，以掩盖初始请求的延迟。

这提高了算法的速度，允许您根据需要增加 N 以获得更多内存和计算，或者增加 p 以获得更多计算。

增加“r”太多还有其他一些问题，我没有看到太多讨论：

1.  在减小 N 的同时增加 r 会减少内存周围的伪随机跳转次数。顺序访问更容易优化，并且可以给攻击者一个窗口。正如 Colin Percival 在 Twitter 上向我指出的那样，更大的 r 可以让攻击者使用成本更低、速度更慢的存储技术，从而大大降低他们的成本 ( [https://twitter.com/cperciva/status/661373931870228480](https://twitter.com/cperciva/status/661373931870228480) )。
2.  工作缓冲区的大小为 1024r 位，因此最终将被送入 PBKDF2 以生成 Scrypt 输出密钥的可能最终产品的数量为 2^1024r。围绕大内存块跳转的排列（可能的序列）数为 2^NlogN。这意味着内存跳跃循环有 2^NlogN 个可能的产品。如果 1024r > NlogN，这似乎表明工作缓冲区混合不足。虽然我不确定这一点，并且希望看到证据或反驳，但它*可能*有可能在工作缓冲区的结果和跳转序列之间找到相关性，这可以让攻击者有机会减少他们的内存需求，而不会大大增加计算成本。同样，这是基于数字的观察——可能每一轮中的一切都混合得很好，这不是问题。r = 8 远低于标准 N = 2^14 的这个潜在阈值——对于 N = 2^14，这个阈值将是 r = 224。

总结所有建议：

1.  选择 r 使其足够大，以平均化内存延迟对您的设备的影响，仅此而已。请记住，Colin Percival 推荐的值 r = 8 对于内存技术而言似乎仍然是相当理想的，而且这显然在 8 年内没有太大变化；16可能会稍微好一点。
2.  确定每个线程要使用多大的内存块，记住这也会影响计算时间，并相应地设置 N。
3.  将 p 任意增加到您的使用可以容忍的程度（注意：在我的系统上并使用我自己的实现，p = 250（4 个线程），N = 16384 和 r = 8 需要约 5 秒），如果可以处理，请启用线程增加了内存成本。
4.  调整时，更喜欢大的 N 和内存块大小，而不是增加 p 和计算时间。Scrypt 的主要优势在于其大内存块大小。

我自己在具有 i5-4300（2 核，4 线程）的 Surface Pro 3 上实现 Scrypt 的基准，使用常数 128Nr = 16 MB 和 p = 230；左轴是秒，下轴是 r 值，误差线是 +/- 1 标准偏差：

[![Scrypt r 值与具有恒定大块大小的 p](../Images/913fbf00b37cf8bdc30fb7e5dc198bbc.png)](https://i.stack.imgur.com/rzFDn.png)****

# python - objects.filter() 和外键 NULL

> ID：11126323
> 
> 赞同：1
> 
> 时间：2012-06-20T18:57:35.130
> 
> 标签：python, django, null, foreign-keys

我在 Django 中编写了一个复杂的搜索表单。

这是我的示例模型：

```
class student(models.Model):
   name = models.CharField(max_length=255)
   school = models.ForeignKey('school', null=True, blank=True)
class school(models.Model):
    name = models.CharField(max_length=255) 
```

所以学生使用 FK 上学。它应该是可选的，所以`null=True`和`blank=True`被使用。如果我想搜索具有特定学校名称的学生，我使用带有 HTML 代码的表单，如下所示：

```
<input type="text" name="school_name"/> 
```

我确实像这样查询数据库（示例）：

```
def search(request):
 results = student.objects.filter(
    name__icontains=request.POST.get('student_name',''),
    school__name__icontains=request.POST.get('school_name','')
     ) 
```

问题是：如果我将搜索表单留空，它应该显示所有学生，因为没有应用过滤器。如果每个学生都设置了一所学校，那就行得通。如果学生没有设置学校，则它在 MySQL 中的值为“NULL”。我假设找不到它们，因为空字符串不是 NULL。但我怎样才能避免呢？我必须在每个过滤器表达式之前写一个 if 语句吗？我们谈论要过滤的 50-100 个字段！

我会感谢每一个提示来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:03:56.960

你可以这样写：

```
query = {
    'name__icontains': request.POST.get('student_name',''),
}
school_name = request.POST.get('school_name', None)
if school_name is not None:
    query['school__name__icontains'] = school_name
results = student.objects.filter(**query) 
```

其他领域也是如此。这意味着每个字段都有一个 if 语句。您甚至可以动态地执行此操作，因为其中的键`query`只是字符串。这意味着您也可以计算它们并`query`在需要时添加它们。

# windows - 如何在 Windows 7 中为 symfony2 命令运行

> ID：11126325
> 
> 赞同：1
> 
> 时间：2012-06-20T18:57:46.480
> 
> 标签：windows, linux, command-line, symfony, ubuntu-11.10

我正在使用 Ubuntu 环境**（LAMP）** 。但是当我在**Windows 7 入门**操作系统上安装**symfony2**时，当我尝试在 Windows 中使用命令提示符创建**实体时遇到问题，它不需要****php app/console**

 ******任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T19:11:42.370

您需要将 PHP 可执行文件添加到您的[PATH](http://www.php.net/manual/en/faq.installation.php#faq.installation.addtopath)中，或者使用绝对链接调用它：`c:\path\to\php\php.exe app/console`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:12:07.710

只需转到 symfony 文件夹并开始编写 symfony 命令...

c:\path-to-symfony-project> 例如“ *c:\xampp\htdocs\test>* ”******

# c# - 如何使用 C# 发送 Lotus Notes 电子邮件

> ID：11126334
> 
> 赞同：0
> 
> 时间：2012-06-20T18:58:13.930
> 
> 标签：c#, lotus-notes, lotus-domino

我需要使用 C# 发送一封简单的 Lotus Notes 电子邮件。我已经尝试过使用[这里](http://www.codeproject.com/Articles/29442/Send-Lotus-Notes-Email-Using-C)的代码，但它不起作用。我收到此错误：

> 异常未知软件异常 (0xe0434f4d) 发生在位置 0x7c812afb 的应用程序中

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:31:00.050

在项目的构建选项下，确保将平台目标设置为“x86”（不是“任何 CPU”，也不是“x64”——Domino 库仅与“x86”兼容）。

如果您必须以 x64 为目标，那么您需要将所有 Domino 代码隔离到一个单独的 x86 项目中，然后从您的 x64 项目中调用该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:30:28.943

确保您对所引用的 COM 文件具有正确的权限。也许授予每个人读取权限只是为了排除这种情况。

# c - 如何通过串行连接（蓝牙）获取 TCP/IP 数据包

> ID：11126337
> 
> 赞同：4
> 
> 时间：2012-06-20T18:58:22.090
> 
> 标签：c, sockets, network-programming, bluetooth, embedded

我正在开发一个 TCP/IP 堆栈，它将在通过蓝牙连接的另一台设备上运行。

但我想测试一个工作堆栈。我的测试场景是：

我的设备 TCP/IP 堆栈 --------------蓝牙 ----- WINDOWS/MAC TCP/IP 堆栈。

任何人都知道如何在 Linux/Windows 或 mac 上通过蓝牙连接编写 IP 数据包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:17:59.147

一种方法是您可以先通过蓝牙在设备和 PC 之间建立 ppp 连接。为此，您需要在设备端支持 ppp。一旦您能够拨号并建立 ppp 连接，就可以在 ppp 上运行 tcp/ip。

这些链接可能有用（尽管它们特定于 linux）：

[http://www.daybefore.net/bluetooth_ppp.html](http://www.daybefore.net/bluetooth_ppp.html)

[http://www.rpgameplace.de/blog/index.php?/archives/19-Networking-over-Bluetooth-using-BlueZPPP.html](http://www.rpgameplace.de/blog/index.php?/archives/19-Networking-over-Bluetooth-using-BlueZPPP.html)

# grails - 当枚举是选择对象的属性时，使用 g:select 中的枚举值

> ID：11126340
> 
> 赞同：12
> 
> 时间：2012-06-20T18:58:41.097
> 
> 标签：grails, select, enums, gsp, scaffolding

例子：

batchTag 是 batchRange 的枚举类型属性，其值如下：

```
JAN1 "January Biweekly 1",
JAN2 "January Biweekly 2", 
```

等等

我想在select中显示batchTag的VALUE，IOW，select应该包含

```
"January Biweekly 1"
"January Biweekly 2" ... 
```

不是

```
JAN1
JAN2
FEB1
FEB2
FEB3 ... 
```

我在 g:select 中尝试了几件事来做到这一点，但没有任何成功。我想也许“它”将作为 g:select 的一部分提供（因为它显然是一个迭代）并尝试为 optionValue 引用 it.batchTag.name，但这不起作用。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T19:20:54.573

```
enum BatchRange {
    JAN1 "January Biweekly 1",
    JAN2 "January Biweekly 2",

    final String value

    BatchRange(String value) { this.value = value }

    String toString() { value } 
    String getKey() { name() }
} 
```

请注意 getKey() 方法。然后你的 g:select

```
<g:select name="batch" from="${BatchRange.values()}" optionKey="key" /> 
```

或者

```
<g:select name="batch" from="${BatchRange.values()}" keys="${BatchRange.values()*.name()}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-30T08:10:02.733

在这种情况下，更好的方法是使用 i18n 消息。有两种选择：

1.  将 valueMessagePrefix 添加到选择中。
2.  [按照此博客文章](http://adhockery.blogspot.se/2009/03/internationalizing-domain-classes-and.html)`org.springframework.context.MessageSourceResolvable`中的描述使枚举实现。

有关更多信息，请参阅[此问题](https://stackoverflow.com/q/7571808/1737590)。

# php - PHP自动完成与mysql多字段

> ID：11126342
> 
> 赞同：0
> 
> 时间：2012-06-20T18:58:46.447
> 
> 标签：php, jquery, mysql, autocomplete

数据库名称“customdata”

```
jobNo CustomerName Country     Tel    Item
1      John        USA         045     Mouse
2      Tony        Australia   054     laptop
3      Karuma      India       548     keyboard
4      Anton       Canada      854     Pen
5      Lusinda     Italy       758     Book 
```

不关心数据库数据。

我想在 php 脚本中添加一个文本字段。当键入“I”时，它应该自动完成下拉列表框，如下所示

```
2,Tony,Australia,054,Laptop
3,Kumara,India,548,keyboard
5,Lusinda,Italy,758,book 
```

包含“I”字母的所有行。

在下一步“输入”中

```
3,Kumara,India,548,keyboard 
```

会留下来，其他人会出去。

我可以尝试使用 jquery 自动完成。有人请帮我从表中选择数据并添加到数组中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:06:14.170

尝试这个。

```
$searchVar = $_POST['searchVar'];

$search = "Select `jobNo`, `CustomerName`, `Country`, `Tel`, `Item`
    FROM `customdata` c
    WHERE
    `c`.`CustomerName` LIKE '%$searchVar%' OR
    `c`.`Country` LIKE '%$searchVar%' OR
    `c`.`Item` LIKE '%$searchVar%'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:14:20.363

这个怎么样？？

## 为我'

```
SELECT * 
FROM customdata
WHERE CONCAT(CustomerName, ' ', Country,' ',Item) like '%i%'; 
```

## 对于“在”

```
SELECT *
FROM customdata
WHERE CONCAT(CustomerName, ' ', Country,' ',Item) like '%In%'; 
```

你只需要在`like '%in%'`

如果您想要***区分大小写的***搜索，请使用**BINARY** after`WHERE`语句。

```
SELECT *
FROM customdata
WHERE BINARY CONCAT(CustomerName, ' ', Country,' ',Item) like '%In%'; 
```

## [演示](http://sqlfiddle.com/#!2/55cf9/5)

***注意：***当您键入时`in`，您将获得da中Lus**中**存在一样`id=5`数据`id=3``in`
`CustomerName`

 **## 更新 1

在 PHP 代码中将是

```
$mySearch = $_POST['mySearchHTMLVariable'];

$query="SELECT * 
        FROM customdata
        WHERE CONCAT(CustomerName, ' ', Country,' ',Item) like '%$mySearch%'"; 
```

请根据您的要求进行更改。**

# xml - 使用包含 2 个浮点数的元素序列定义 XML 模式

> ID：11126353
> 
> 赞同：0
> 
> 时间：2012-06-20T18:59:33.460
> 
> 标签：xml, xsd, schema

我正在尝试为 XML 文件定义一个架构，如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<traverse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="test.xsd">
  <cp>1.0 2.0</cp>
  <cp>3.0 -2.0</cp>
  <cp>-1.365575 0</cp>
  <cp>4 1.3</cp>
</traverse> 
```

它必须是至少 3 个 cp（控制点）的序列，每个由两个双精度定义。我试过这个（没有必须至少有 3 个控制点的限制）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
  <xs:element name="traverse">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="cp" type="control-point" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:simpleType name="listOfValues">
    <xs:list itemType="xs:double"/>
  </xs:simpleType>
  <xs:simpleType name="control-point">
    <xs:restriction base="listOfValues">
      <xs:length value="2"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

当我尝试验证上面的 XML 文件时，XMLSpy 告诉我在 traverse-tag 中不允许使用 cp-tags。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:35:51.467

改变这个：

```
 <xs:sequence>
    <xs:element name="cp" type="control-point" />
  </xs:sequence> 
```

对此：

```
 <xs:sequence>
    <xs:element name="cp" type="control-point" minOccurs="3" maxOccurs="unbounded"/>
  </xs:sequence> 
```

# php - FPDF 字母间距

> ID：11126354
> 
> 赞同：3
> 
> 时间：2012-06-20T18:59:41.253
> 
> 标签：php, fpdf

我正在尝试为 fpdf 中的特定文本“块”设置字母间距。我已经搜索并且只找到了一种设置整个文档的字母间距的方法，即使这样也没有用。文本发布到 php fpdf 生成器。

```
$pdf->SetFont('Arial','b',85, LetterSpacing Here?); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-09-01T14:36:24.917

基于其他提供的答案，我扩展了我们使用的 FPDF 类，以便下划线考虑用户定义的字母间距。

```
<?php
class Custom_FPDF extends FPDF
{
protected $FontSpacingPt;      // current font spacing in points
protected $FontSpacing;        // current font spacing in user units

function SetFontSpacing($size)
{
    if($this->FontSpacingPt==$size)
        return;
    $this->FontSpacingPt = $size;
    $this->FontSpacing = $size/$this->k;
    if ($this->page>0)
        $this->_out(sprintf('BT %.3f Tc ET', $size));
}

protected function _dounderline($x, $y, $txt)
{
    // Underline text
    $up = $this->CurrentFont['up'];
    $ut = $this->CurrentFont['ut'];
    $w = $this->GetStringWidth($txt)+$this->ws*substr_count($txt,' ')+(strlen($txt)-1)*$this->FontSpacing;
    return sprintf('%.2F %.2F %.2F %.2F re f',$x*$this->k,($this->h-($y-$up/1000*$this->FontSize))*$this->k,$w*$this->k,-$ut/1000*$this->FontSizePt);
}
} 
```

样品使用测试：

```
$pdf = new Custom_FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial', 'BU', 11);
$pdf->SetFontSpacing(3);
$pdf->Cell(0, 10, 'Test of letter spacing with underline', 0, 1);
$pdf->SetFontSpacing(0);
$pdf->Cell(0, 10, 'Test of letter spacing with underline');
$pdf->Output(); 
```

测试扩展 FPDF 版本 1.81

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-22T09:52:43.267

这真的可以让你做字母间距：

```
// letter-spacing (0 for normal, 0.3 = 33%, 1 = 100%) 
function SetCharSpacing($cs) { 
    $this->_out(sprintf('BT %.3F Tc ET',$cs*$this->k)); 
} 
```

学分： http: [//fpdf.de/forum/showthread.php?t =3241](http://fpdf.de/forum/showthread.php?t=3241)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T13:03:00.340

不幸的是**，您不能**仅使用 FPDF 函数直接执行此操作。你需要在这里编写一个新函数`Cell()`，用一些新参数重新创建......

但是等等……**有人已经这样做了！**

在这里：[Patrick Benny 的 FPDF 插件](http://www.fpdf.de/downloads/addons/62/)

这是一项很棒的工作，你甚至不需要别的东西！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-11T13:00:56.933

把它放在你的 fpdf php 类中。

```
function SetFontSpacing( $size ) {
   if ( $this->FontSpacingPt == $size ) return;

   $this->FontSpacingPt = $size;
   $this->FontSpacing = $size / $this->k;

   if ( $this->page > 0 )
   $this->_out( sprintf( 'BT %.3f Tc ET', $size ) );
} 
```

在此之前在 fpdf 类中添加全局变量；var $FontSpacingPt;

希望它对最新的 fpdf 课程有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-12T16:33:34.823

如果您使用这些答案并且遇到右对齐文本问题，我可以使用下面的代码修复它。我认为它也适用于居中的文本。该`GetStringWidth`函数没有考虑新的字符间距，因此它返回了错误的字符串宽度。

修复它的部分是：`$wtf = $this->cs/4+1;`和`$w += $charw*$wtf;`。我不知道为什么会这样，但是经过大约一个小时的反复试验和修补不同的数字和方程式，这些数字似乎适用于任何字符间距值。它可能仅适用于我的字体（Roboto Condensed），因此您可能需要添加或减去`4`一点才能使其与您的字体一起使用。我不知道。

如果有人比我聪明并且可以添加真正的解决方案，我将非常感激。或者，如果它非常适合您，我很想听听。

```
protected $cs; // character spacing

// Sets character spacing (0 for normal, 0.5 = 50%, 1 = 100%)
function SetFontSpacing($cs=0)
{
    $this->cs = $cs;
    $this->_out(sprintf('BT %.3F Tc ET', $cs*$this->k));
}

function GetStringWidth($s)
{
    // Get width of a string in the current font
    $s = (string)$s;
    $cw = &$this->CurrentFont['cw'];
    $w = 0;
    $l = strlen($s);
    for($i=0;$i<$l;$i++) {
        $charw = $cw[$s[$i]];
        $wtf = $this->cs/4+1;
        $w += $charw*$wtf;
    }
    return $w*$this->FontSize/1000;
} 
```

# android - Runnable 不会在 Android Widget 处停止

> ID：11126357
> 
> 赞同：1
> 
> 时间：2012-06-20T18:59:49.147
> 
> 标签：android, android-widget, runnable

我有一个 android 小部件，我想每 5 秒更新一次它自己的 textview。

将其视为一个新闻小部件，其中最重要的新闻将一次显示在小部件上。出于演示目的，我将只使用一个数组来向您展示不同的文本。

代码是这样的：

```
public class ListingsWatchWidget extends AppWidgetProvider {

    private static int WIDGET_REFRESH_TIME = 5;
    public Handler handler = new Handler();

    //private RemoteViews views;    
    private int REFRESH_COUNT = 0;
    private String[] titles = {"Title 1", "Title 2", "Title 3"};

    public boolean killMe = false;

    private Context ctx;

    Runnable updateWidgetText = new Runnable()
    {
        @Override
        public void run() {

        Log.i("ListingsWatchWidget", "killMe is " + ListingsWatchWidget.this.killMe);
        if (ListingsWatchWidget.this.killMe) { return; }

        AppWidgetManager gm = AppWidgetManager.getInstance(ctx);                        
        ComponentName thisWidget = new ComponentName(ctx, ListingsWatchWidget.class);         

        int index = (int)(REFRESH_COUNT % titles.length);
        Log.i("ListingsWatchWidget", "index = " + index);

        RemoteViews views = new RemoteViews(ctx.getPackageName(),R.layout.widget);    
        views.setTextViewText(R.id.titleTextView, titles[index]);  

        gm.updateAppWidget(thisWidget, views);

        REFRESH_COUNT++;

        handler.postDelayed(this, WIDGET_REFRESH_TIME * 1000);

        }   
    };  

    @Override
    public void onReceive(Context context, Intent intent) {
        super.onReceive(context, intent);

        Log.i("ListingsWatchWidget", intent.getAction());

        if (intent.getAction().equals("android.appwidget.action.APPWIDGET_ENABLED")) {
            handler.removeCallbacks(updateWidgetText);
            ctx = context;
            handler.postDelayed(updateWidgetText, WIDGET_REFRESH_TIME*1000);
        }
        else if (intent.getAction().equals("android.appwidget.action.APPWIDGET_DISABLED")) {
            handler.removeCallbacks(updateWidgetText);
            this.killMe = true;
        }

    }

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        //TODO ...
    }

} 
```

一切都按预期工作，除非用户从他的桌面上删除小部件。runnable 继续无休止地运行。

我已经尝试过各种解决方案，如[this](https://stackoverflow.com/questions/5844308/removecallbacks-not-stopping-runnable)和[this](https://stackoverflow.com/questions/5885587/how-to-cancel-handler-in-code)但没有一个有效。

让我给你一个片段，如果记录器在将小部件添加到桌面和删除它时：

```
06-20 22:22:57.318: I/ListingsWatchWidget(4012): android.appwidget.action.APPWIDGET_ENABLED
06-20 22:22:57.328: I/ListingsWatchWidget(4012): android.appwidget.action.APPWIDGET_UPDATE
06-20 22:23:02.323: I/ListingsWatchWidget(4012): killMe is false
06-20 22:23:02.323: I/ListingsWatchWidget(4012): index = 0
06-20 22:23:06.857: I/ListingsWatchWidget(4012): android.appwidget.action.APPWIDGET_DELETED
06-20 22:23:06.877: I/ListingsWatchWidget(4012): android.appwidget.action.APPWIDGET_DISABLED
06-20 22:23:07.338: I/ListingsWatchWidget(4012): killMe is false
06-20 22:23:07.338: I/ListingsWatchWidget(4012): index = 1 
```

小部件被删除后，runnable 应该停止...

# jquery - Ajax 请求控制器错误

> ID：11126360
> 
> 赞同：1
> 
> 时间：2012-06-20T19:00:09.163
> 
> 标签：jquery, ajax, codeigniter

我正在使用 ajax 来执行用户注册功能。我使用 ajax 将用户信息发送到控制器，然后控制器将信息传递给模型以将信息插入数据库。

当我看到数据库中的条目时，插入成功完成。但是对于我的 ajax 请求，它总是返回一个错误。

我注意到的是，一旦我将其中一个字段留空，它就会返回成功。

我的ajax脚本如下

```
var post_data = 
    {
        'username':user_name,
        'password':user_password,
        'email':user_email,
        'role':user_role
    };

    $.ajax({
        type: "POST",
        dataType: "json",
        url:"login_register/register_data",
        data: post_data,
        success: function(data) {
                alert('Insertion of user ok');
        },
        error: function(data)
        {
            alert('Insertion of user error ' + data.responseText);
        }
    }); 
```

我的控制器代码

```
public function register_data()
{
    $this->load->database();
    $this->load->model('login_model');

    $user_name=$this->input->post('username');
    $user_password=$this->input->post('password');
    $user_email=$this->input->post('email');
    $user_role=$this->input->post('role');

    $result = $this->login_model->register_data_model($user_name,$user_password,$user_email,$user_role);

    //if($result)
        echo "true";
    //else echo "false";
} 
```

我的型号代码

```
public function register_data_model($user_name,$user_password,$user_email,$user_role)
{
    $result = $this->db->query("INSERT INTO user_table (user_name,user_password,user_email,user_role) VALUES (".$this->db->escape($user_name).",".$this->db->escape($user_password).",".$this->db->escape($user_email).",".$this->db->escape($user_role).")");
} 
```

即使我没有从模型和控制器返回任何东西，它的行为仍然是这样的。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:16:01.153

检查网络标头以确保您的站点没有抛出 500 或其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:12:36.527

我不认为 post_data 是正确的......试试这个：

```
$.ajax({
    type: "POST",
    dataType: "json",
    url:"login_register/register_data",
    data: {user_name:'username', user_password:'password',user_email:'email',user_role:'role'},
    success: function(data) {
            alert('Insertion of user ok');
    },
    error: function(data)
    {
        alert('Insertion of user error ' + data.responseText);
    }
}); 
```

这将要求您通过控制器中的新密钥获取，即

```
$user_name=$this->input->post('user_name'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:07:46.157

id 建议返回实际的 json 格式数据，而不仅仅是 true。

类似于：

```
[{"successfull":"yes" }] 
```

并将您的 php 标头设置为应用程序类型 json。

然后在你的javascript中你可以在成功函数中测试

```
if(data[0]["successfull"].indexOf("yes") != -1)
    {
    dosomething()
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:56:42.933

尝试这个：

```
var post_data = 
{
     username:user_name,
     password:user_password,
     email:user_email,
     role :user_role
}; 
```

# java - 作为映射器值输出的接口

> ID：11126362
> 
> 赞同：3
> 
> 时间：2012-06-20T19:00:15.137
> 
> 标签：java, interface, hadoop, mapreduce, elastic-map-reduce

我有一个映射器，其输出值设置为这样的接口：

```
public interface OutValue extends Writable {} 
```

在映射期间，我使用此签名创建对象并发出它们：

```
public class OutRecord implements OutValue {} 
```

我的映射器是这样的：

```
public class ExampleMapper extends
    Mapper<LongWritable, Text, ExampleKey, OutValue > {} 
```

但是我收到此错误：

```
java.io.IOException: Type mismatch in value from map: expected OutValue, recieved OutRecord
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:850)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:541)
    at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80) 
```

所以我的第一个直觉是尝试像这样投射它：

```
context.write(key, (OutValue) record); 
```

但是我仍然遇到同样的错误。这在我将映射器输出类型从 OutRecord 类更改为 OutValue 接口之前有效。我这样做的原因是我想从这个映射器发出许多类型的 OutRecord 类。

这可能吗？OutValue 必须是类而不是接口吗？

### 更新：

我挖掘了 Hadoop 0.20.205.0 的一些源代码，发现了这个：

```
public synchronized void collect(K key, V value, int partition) throws IOException {
...
if (value.getClass() != valClass) {
  throw new IOException("Type mismatch in value from map: expected "
                        + valClass.getName() + ", recieved "
                        + value.getClass().getName());
} 
```

所以他们使用的运行时检查需要类中的严格相等，他们不检查子类/接口等。当然这是一个常见的用例，有没有人尝试过这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:57:23.370

对类型进行这种严格检查有几个原因：

如果要输出到序列文件，则此文件的标头包含 Key 和 Value 类的类型。然后，当序列文件被读回时，Hadoop 使用注册的序列化程序来创建这些对象的新实例。

如果您注册为输出类型的类是接口，或者您输出的实际对象是声明类型的子类，那么您将无法在运行时实例化接口，或者实例化的类将不是子类您期望的类（并且您的反序列化很可能会因 IOException 而失败）。

（当我开始输入这个时，我想到了另一个原因，但它暂时让我忘记了）。

现在，如果您希望能够输出不同的类型（子类），那么请考虑使用[GenericWritable](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/io/GenericWritable.html)来“包装”您的对象——在这种情况下，每个对象输出都以一个类型开头——查看[源代码](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/core/org/apache/hadoop/io/GenericWritable.java?view=markup)和 javadocs 以获取更多详细信息。

请注意，这是有代价的——输入和输出不会利用在 hadoop 其他地方看到的对象重用，但您可能不会注意到这个成本。您可以通过为每个看到的实例类型汇集一个对象并以通常的方式重新使用它来重写 GenericWritable 以提高效率。

# joomla - 在 Joomla 上更改 Zephyr 主题中的标题颜色

> ID：11126363
> 
> 赞同：0
> 
> 时间：2012-06-20T19:00:18.920
> 
> 标签：joomla, content-management-system

Joomla！Zephyr 模板题 1.5 版本

我已经进行了详细搜索，但没有找到与我的问题直接相似的问题，但我希望这是一个简单的问题。

网站上的所有标题都设置为#000000

我想将它们全部更改为#c3c665

我尝试更改以下 template.css 行： /* Modules */ .module-title .title {margin-top: 0;font-weight: normal;font-size: 130%;padding: 0;letter-间距：1px;}

To be: /* Modules */ .module-title .title {margin-top: 0;font-weight: normal;font-size: 130%;padding: 0;letter-spacing: 1px; 颜色：#c3c665;}

但是什么都没有发生？

我也尝试使用 Firebug 来追踪它，但运气不佳，我希望有人更精通 firebug，或者更了解 Joomla 的人可以告诉我哪里出错了。

网站链接：[http ://www.transformaison.com/index.php](http://www.transformaison.com/index.php)

我想改变颜色的文本是所有标题，最显着的是在主页上：

“Lorem Ipsum” - 主要文章标题

所有模块标题，例如“联系信息”和“专业名称”

这个配色在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:07:27.493

从我所见，如果 index.php 的类`.title`为 #000000，则第 45 行将覆盖模板。禁用它并使用您喜欢的颜色对我来说效果很好。

特别是在保留 #000000 的 index.php 中，删除`.title`应该可能会这样做。

```
.box8, .box8 .title, .box8 a:hover, .box11, .box11 .title, .box11 a:hover, .title3 .module-title .title {color:#000000 !important;} 
```

# java - 如何生成特定的 JNI 标头

> ID：11126364
> 
> 赞同：1
> 
> 时间：2012-06-20T19:00:19.997
> 
> 标签：java, c, header, java-native-interface, javah

我有一个 .dll 库，它以以下格式导出函数：

_Java_folder1_folder2_folder3_JavaClassName_javamethodname@16

我无法修改 .dll。它是给我的。

我需要编写一个 java 程序来调用 native `javamethodname`. 但是，我无法生成正确的头文件。如何生成具有上述指定签名的头文件？

我尝试了 javah -jni JavaClassName，但它没有给我想要的结果。当我从目录层次结构中调用 javah 时，我得到一个像这样的标题：

Java_JavaClassName_java方法名

当我尝试从目录层次结构外部调用 javah 时，出现错误。

另外，如何在Java前面的标头签名中获取下划线？即：_Java 不是 Java。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:12:23.663

将您的 Java 类放在包 folder1.folder2.folder3 中。

C 源代码将命名为“Java_folder1_folder2_folder3_JavaClassName_javamethodname”，不带下划线。

您需要确定本机方法期望的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:41:38.453

编写 Java 代码很容易：您创建一个包名为**folder1.folder2.folder3**的 Java 项目，并将您的类`JavaClassName`与`native javamethodname`. 您不需要生成头文件或任何东西，这已经由创建 DLL 并具有与您正在重构的类相同的类的人完成。

[Java_前缀是标准的**，**](http://java.sun.com/docs/books/jni/html/design.html#9984)由 JVM-JNI 链接器添加，您无需关心它。

但是，我在字里行间读到，前导下划线也有问题。它是一种“编译器装饰”，如果你只有 DLL（没有源代码，没有重新编译），你可能也注定要失败。各种编译器添加了各种“装饰”，以确保您不会混淆调用者 (JVM) 和被调用者 (DLL) 之间的调用约定。它具有一些[可观察到的默认行为](http://java.sun.com/docs/books/jni/html/design.html#9984)，并且可以被[各种编译器选项](http://comments.gmane.org/gmane.comp.gnu.mingw.user/30507)和/或定义文件（MSVC 上的 .def）破坏。这两者都不适用于您的情况。所以你需要：

1.  找出用于生成 DLL 的编译器
2.  查找给定编译器为其生成观察到的符号装饰的调用约定
3.  `JNICALL`您的 DLL 只能通过 JVM 运行，该 JVM 具有与宏定义相同的调用约定`$JAVA_HOME/include/your_platform/jni_md.h`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:48:41.557

如果 DLL 还没有附带带有本地方法声明的相应 Java 类，那么它是不完整的，并且可能 100% 无用。不应期望您对此进行逆向工程。它甚至可能构建不正确。在我进一步研究之前，我会要求提供证据证明它有效。该证据必须包括 Java 部分；否则不是证据。

# ios - 如何在 iOS 中裁剪非矩形区域

> ID：11126366
> 
> 赞同：2
> 
> 时间：2012-06-20T19:00:21.510
> 
> 标签：ios, cocoa-touch, ipad, ios5, crop

我正在为 iOS 5 构建一个照片共享应用程序，我想让用户能够跟踪图像的某些部分，然后裁剪出该选定区域。我已经四处寻找如何做到这一点，每个人似乎都认为您正在尝试裁剪矩形区域。有没有办法为非矩形区域做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:05:03.697

[此答案](https://stackoverflow.com/a/2570861/14606)显示了如何使用路径复制图像。答案为路径添加了一个矩形，因此您可以将用户绘制的所有线段添加到您的路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:49:11.753

我制作了这个适合您需要的裁剪工具。它使用户可以控制要裁剪的区域。

[https://github.com/nicholjs/BFCropInterface](https://github.com/nicholjs/BFCropInterface)

# javascript - 在您用javascript提交表单之前检查是否每个单选按钮都已填写

> ID：11126370
> 
> 赞同：0
> 
> 时间：2012-06-20T19:00:29.893
> 
> 标签：javascript, forms

我知道网站上还有其他带有解决方案的帖子，但我真的需要清楚地了解我在做什么，我的表格如下：

```
<form name="multichoice" action="">
    <table>
         <tr>
             <td>Q1.</td>
             <td>Do you think you are pretty?</td>
             <td class="radiobox"><input type="radio" name="q1" value="1"/></td>
             <td class="radiobox"><input type="radio" name="q1" value="2"/></td>
             <td class="radiobox"><input type="radio" name="q1" value="3"/></td>
             <td class="radiobox"><input type="radio" name="q1" value="4"/></td>
         </tr>

         <tr>
             <td>Q2.</td>
             <td>Do you think you are smart?</td>
             <td class="radiobox"><input type="radio" name="q1" value="1"/></td>
             <td class="radiobox"><input type="radio" name="q1" value="2"/></td>
             <td class="radiobox"><input type="radio" name="q1" value="3"/></td>
             <td class="radiobox"><input type="radio" name="q1" value="4"/></td>
         </tr>
    </table>
</form> 
```

所以我正在寻找javascript代码以确保在我们提交之前每个问题都会有答案，期待您的答案

如果您能提供帮助，请提前感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:30:45.037

如果你想保持 jQuery-free：

```
function isAnswered() {
  var radioGroups = {}
  for(i in (inputs = document.getElementsByTagName('input'))) {
    if(inputs[i].type === 'radio') {
      radioGroups[inputs[i].name] = radioGroups[inputs[i].name] ? true : inputs[i].checked;
    }
  }
  for(i in radioGroups) {
    if(radioGroups[i] === false) return false; 
  }
  return true;
} 
```

这只是遍历每个无线电元素，并跟踪每个无线电组，为每个组寻找“检查”值。jQuery中的类似解决方案：

```
function isAnswered() {
  var isAnswered = true;
  $('input[type=radio]').each(function() {
    var name = $(this).attr('name');
    if($('input[name=' + $(this).attr('name') + ']:checked').length === 0) {
      isAnswered = false;
      return false;
    }
  });
  return isAnswered;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:11:44.977

您可以使用 JQuery 来实现这一点，这是一个测试示例：-

```
 if (!$("input[name='q1']:checked").val()) {

       return false;
    }
    if (!$("input[name='q2']:checked").val()) {     
       return false;
    }

    return; 
```

如果您将其包装在一个函数中，然后调用该`onsubmit`表单的此函数事件。验证将完成。

编辑：

单选按钮名称也应该有变化，每组或一组单选按钮必须具有唯一的名称。像这样 ：-

```
<table>
     <tr>
         <td>Q1.</td>
         <td>Do you think you are pretty?</td>
         <td class="radiobox"><input type="radio" name="q1" value="1"/></td>
         <td class="radiobox"><input type="radio" name="q1" value="2"/></td>
         <td class="radiobox"><input type="radio" name="q1" value="3"/></td>
         <td class="radiobox"><input type="radio" name="q1" value="4"/></td>
     </tr>

     <tr>
         <td>Q2.</td>
         <td>Do you think you are smart?</td>
         <td class="radiobox"><input type="radio" name="q2" value="1"/></td>
         <td class="radiobox"><input type="radio" name="q2" value="2"/></td>
         <td class="radiobox"><input type="radio" name="q2" value="3"/></td>
         <td class="radiobox"><input type="radio" name="q2" value="4"/></td>
     </tr>
</table> 
```

# c# - Linq to entity 不知道 .Date 运算符是什么

> ID：11126371
> 
> 赞同：1
> 
> 时间：2012-06-20T19:00:31.797
> 
> 标签：c#, mysql, linq, linq-to-sql, linq-to-entities

我收到一条错误消息，提示 linq to entity 不知道`.Date`以下查询中的运算符：

```
var data = from p in page_loads
           join f in sites
           on p.site_id equals f.id
           join tr in test_runs
           on p.test_run_id equals tr.id
           where f.id == 17
           group p by  p.created_at.Date into g
           select new { time = g.Average(t => t.time), created_at = g.Key }; 
```

**注：** `created_at`是`NOT NULL`在数据库中。我指出这一点是因为我知道 created_at 不可为空，并且 linq to entity 会有问题。但我不知道如何解决这个问题。

**编辑：**

```
[EdmScalarProperty(EntityKeyProperty = false, IsNullable = false)]
    [DataMember]
    public DateTime created_at { get; set; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:05:41.780

听起来您可能想要[`SqlFunctions.DatePart`](http://msdn.microsoft.com/en-us/library/dd487171.aspx)：

```
group p by SqlFunctions.DatePart("day", p.created_at) into g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:40:15.620

您可以按（为每个年/月/日组合创建一个新的唯一匿名对象）中的其他字段进行分组，`DateTime`并且您将希望使用它`let`来简化查询：

```
var data = from p in x
       join f in sites
       on p.site_id equals f.id
       join tr in test_runs
       on p.test_run_id equals tr.id           
       where f.id == 17
       let date = p.created_at
       group p by new { y = date.Year, m = date.Month, d = date.Day} into g
       select new { time = g.Average(t => t.time), created_at = g.Key }; 
```

如果您希望`created_at`最终投影中的 不是匿名类型，则可以`DateTime`通过将 3 个匿名值传递给`DateTime`构造函数将 group-by 匿名类型转换回 a 。

在[另一个](https://stackoverflow.com/questions/4188066/linq-to-entities-group-by-failure-using-date)使用`EntityFunctions.TruncateTime`.

# python - 确定 TCP listen() 队列中的当前积压连接数

> ID：11126372
> 
> 赞同：8
> 
> 时间：2012-06-20T19:00:39.147
> 
> 标签：python, linux, sockets, tcp, twisted

有没有办法找出*当前*在 Linux 上的 TCP 套接字上等待 accept() 的连接尝试次数？

我想我可以计算在每个事件循环上点击 EWOULDBLOCK 之前成功的接受（）的数量，但我使用的是隐藏这些细节的高级库（Python/Twisted）。它还使用 epoll() 而不是老式的 select()/poll() 循环。

我试图大致了解高性能非阻塞网络服务器上的负载，我认为这个数字将是一个很好的表征。平均负载/CPU 统计数据没有多大帮助，因为我在并发工作进程中执行了大量磁盘 I/O。Linux 上的大多数这些统计数据都将等待磁盘 I/O 所花费的时间计算为负载的一部分（对于我的特定服务器架构，它不是）。接受（）和响应之间的延迟也不是一个好的衡量标准，因为一旦服务器处理了每个请求，它通常会很快得到处理。我只是想找出我距离服务器无法以比它们进来的速度更快的速度发送请求的断点有多近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T01:54:01.477

假设 SYN cookie 未启用（或由于数量过多而未触发），我认为您应该能够通过检查 netstat 的输出并查看有多少针对您的端口的连接处于 SYN_RECV 状态来获得近似数字.

这是一个小 Python hack，它可以为您获取给定侦听端口的数字：

```
!/usr/bin/python

import sys

STATE_SYN_RECV = '03'

def count_state(find_port, find_state):
    count = 0
    with open('/proc/net/tcp', 'r') as f:
        first = True
        for line in f:
            if first:
                first = False
                continue
            entries = line.split()
            local_addr, local_port = entries[1].split(':')
            local_port = int(local_port, 16)
            if local_port != find_port:
                continue
            state = entries[3]
            if state == find_state:
                count += 1
    return count

if __name__ == '__main__':
    if len(sys.argv) != 2:
        print "Usage: count_syn_recv.py <port>"
        sys.exit(1)

    port = int(sys.argv[1])

    count = count_state(port, STATE_SYN_RECV)
    print "syn_recv_count=%d" % count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:52:41.977

在我见过的 BSD Sockets API 中没有这个功能。我质疑它是否真的是一种有用的负载量度。一方面，您假设客户端没有连接池，并且您还假设延迟完全表现为挂起的连接。但是，由于您无论如何都无法获得数字，因此这一点没有实际意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-21T00:36:19.423

您可以查看`unacked`的输出中的值`ss`，例如在检查端口 80 时：

```
ss -lti '( sport = :http )' 
```

输出可能如下所示：

```
State  Recv-Q  Send-Q  Local Address:Port  Peer Address:Port   
LISTEN    123      0              :::http               :::*
    rto:0.99 mss:536 cwnd:10 unacked:123 
```

`unacked`有关确实是 TCP 连接积压的详细证明（包括内核源代码和所有） ，请参阅[Ryan Frantz 的详细文章“Apache TCP Backlog”](https://ryanfrantz.com/posts/apache-tcp-backlog.html)。请注意，您可能需要一个相当新的版本`ss`才能`unacked`包含输出。至少我的 ( `iproute2-ss131122`) 没有提供它。

# c# - 如何确定 .NET 中的数据类型有多大？

> ID：11126375
> 
> 赞同：7
> 
> 时间：2012-06-20T19:00:42.590
> 
> 标签：c#, memory, types

我想加深对数据类型的理解，想知道如何确定数据类型有多大。我希望找到答案的旅程能发现其他未知数。

我知道在 .NET 中，一个字节是一个 8 位无符号整数，但这只是因为我读过它。如果我有一个非常简单的控制台应用程序，如下所示：

```
static void Main(string[] args)
{
byte b = 1;
} 
```

如何在 Visual Studio 中判断“b”的数据结构有多大？我看到有一些内存诊断窗口，但它只说当我跳过 b 的分配时它们无法评估表达式。我打开了反汇编窗口，可以看到 mov 操作...

```
mov         dword ptr [ebp-40h],1 
```

...但不确定信息的含义。我认为 dword 暗示了大小，也许 ptr ebp-40h 指向了一个地址。有没有一种方法可以让我在 Visual Studio 中查看所有地址，并通过查看范围来收集大小？

我知道在这样的简短论坛中回答这些问题很棘手，但感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T19:02:31.177

您可以使用`sizeof(T)`来获取原始值类型和非引用类型的大小。对于其他类型，获取大小可能非常困难，因为引用类型通常没有固定大小。

这可能是简单类型之外的一个复杂问题（根据下面的讨论），但通常，如果类型的大小没有由其数据结构明确定义，因为它本身就是引用类型，或者它是包含引用类型的结构，那么就无法计算存储（因为根据定义，它是不固定的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T19:13:44.247

**tl; dr：** `sizeof(YourType)`应该给你“答案”，但`Marshal.SizeOf`可能更合适。

### 解释：

这并不*总是*有效的。C# 不喜欢你打破它的抽象障碍，所以*它只*让你找到结构的“大小”，如果结构在托管和非托管代码中*具有相同的大小*（或者更准确地说，是“blittable”）。否则，C# 声称，“你为什么关心托管大小？它对你没用”，并且不允许你采用`sizeof`托管类型。

有一些方法可以解决这个问题（通过直接生成 MSIL），但如果您实际上想要同一对象的*非托管*表示的大小，那么您可能想要`Marshal.SizeOf`改用它。`sizeof`实际上并没有看起来那么有用——它只是更方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T19:31:00.107

还有一个核心[SOS](http://msdn.microsoft.com/en-us/library/bb190764.aspx)选项，它将为您提供对象大小的真实值。

使用`!ObjSize`命令

```
==Immediate Window==
.load sos
!ObjSize <address> 
```

您可能需要四处寻找对象的地址。检查`!Dump*`命令，例如`!DumpHeap`和`!DumpStack`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T19:03:44.847

我不确定我是否理解得很好，但是有一个运算符[sizeof()](http://msdn.microsoft.com/en-us/library/eahchzkf%28v=vs.71%29.aspx)。

```
Console.WriteLine(sizeof(byte)); 
```

还有一个与引用类型相关的答案：[Getting the size of a field in bytes with C#](https://stackoverflow.com/questions/207592/getting-the-size-of-a-field-in-bytes-with-c-sharp#207605)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T19:09:20.267

我很确定您要的是某种数据类型消耗多少内存？我会使用 sizeof() 方法，因此：

```
int a = 2; 
```

您可以找到一个 int 占用了多少空间：

```
Console.WriteLine(sizeof(int); 
```

# java - 学习java中的Web服务

> ID：11126377
> 
> 赞同：-4
> 
> 时间：2012-06-20T19:00:43.043
> 
> 标签：java, web-services, rest, soap

我是 Java Web 服务的新手，需要熟悉我的项目中基于 REST 和 SOAP 的 Web 服务。

您能否参考任何有关它的书籍或任何在线教程链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:11:32.363

请记住，您需要学习两件事：

1.  **RESTful Web 服务的服务设计**：是什么让 Web 服务成为 RESTful？在设计 REST 服务时，您应该采取或避免哪些设计决策？REST 服务应该与实现无关；当您设计一个 REST 服务时，您不必担心是要使用 Ruby 还是 Java 或其他任何方式来实现它。我推荐[O'Reilly 食谱](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFoQFjAB&url=http://shop.oreilly.com/product/9780596801694.do&ei=5iDiT_fEDYWo8ATWy7yGCA&usg=AFQjCNFtmJ7c7pweE0xYM64_WdQNA6pRLQ)。

2.  **如何实现 RESTful Web 服务？**如果您需要使用 java，您将需要评估几个不同的框架来确定适合您的框架。我在下面概述了一些。

[Restlet](http://www.restlet.org/)是一个相当流行的 Java REST 框架，已经有一段时间了。

如果您已经在其他领域使用 Spring，那么[Spring REST可能会很好地工作。](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18s02.html)

我没有使用[DropWizard](http://dropwizard.codahale.com/)，但它看起来真的很酷。如果您正在寻找非常轻量级的东西，我会从这里开始。

就 SOAP 而言，从 java 的角度来看，[Axis2](http://axis.apache.org/axis2/java/core/)肯定是相当流行的。您没有在您的问题中说您是否需要一个服务来支持 SOAP 和 REST，但是如果您这样做，Axis2 就[会这样做](http://axis.apache.org/axis2/java/core/docs/rest-ws.html)。

# salesforce - Salesforce 公式：计算两个日期之间的营业时间

> ID：11126378
> 
> 赞同：2
> 
> 时间：2012-06-20T19:00:43.077
> 
> 标签：salesforce

我可以使用如下公式轻松计算潜在客户的年龄（以分钟为单位）：

```
ROUND((NOW()-CreatedDate)*1440,0) 
```

但是，我只想计算该时间跨度的营业时间（实际上是分钟）部分。我想在 Salesforce 公式（不是顶点触发器）中执行此操作。我在[这里](http://success.salesforce.com/questiondetail?qId=a1X30000000HxCfEAK)和[这里](https://stackoverflow.com/a/5274372/864030)找到了一些灵​​感。我对此解决方案的优先事项：

*   5,000 个字符限制下的 Salesforce 公式
*   比较任意两个日期时间字段（不仅仅是 NOW() 与 CreatedDate）
*   合理的误差范围（+/- 3 小时）
*   忽略周末
*   忽略太平洋时间上午 6 点至下午 5 点以外的时间（格林威治标准时间 13:00-23:59）
*   ~~忽略特定的假期，如 7 月 4 日和 12 月 25 日~~（对我的需求来说过于复杂）

* * *

想只计算**工作日数吗？**[与此处 Salesforce 支持示例](http://success.salesforce.com/questiondetail?qId=a1X30000000HxCfEAK)建议的模板中的 1,685 个字符相比，此公式使用 873 个编译字符（有些人抱怨在将较大的模板与其他代码组合时[超过了 5,000 个字符的限制）。](http://success.salesforce.com/questionDetail?qId=a1X30000000dNoHEAU)

```
(
    5*FLOOR((TODAY()-DATE(1996,01,01))/7) + 
    MIN(5, MOD(TODAY()-DATE(1996,01,01), 7))
) - (
    5*FLOOR((DATEVALUE(CreatedDate)-DATE(1996,01,01))/7) + 
    MIN(5, MOD(DATEVALUE(CreatedDate)-DATE(1996,01,01), 7))
) 
```

阅读我的答案以了解它是如何工作的，以及如何在需要时计算营业时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T22:53:48.800

我通过计算两个不同日期的参考点的营业日两次，然后减去以获得之间的营业日数（包括小数部分）来解决这个问题，这样我就可以轻松地将其转换为营业时间或营业分钟。通过将参考点选择为过去的星期一（例如 1996 年 1 月 1 日）的开始时间，我可以使数学变得更容易，并解决 Salesforce 公式的限制。

例如，假设我有两个日期，D1 =“5/10/2012 12:49 PM”和 D2 =“6/20/2012 14:19 PM”。我的工作周是 5 天/周 x 10 小时/天。我随意选择“2012-04-02 13:00:00”作为参考日期。从参考日期算起，到 D1 有 28.682 个工作日，到 D2 有 57.832 个工作日。减法给出了 D2 和 D1 之间 29.150 个工作日的正确答案。

以下是计算任何 Salesforce 记录的营业时间的公式（从格林威治标准时间 1300 开始，每天 11 小时）：

```
ROUND(11*(
(5*FLOOR((TODAY()-DATE(1996,01,01))/7) +
MIN(5, 
    MOD(TODAY()-DATE(1996,01,01), 7) +
    MIN(1, 24/11*(MOD(NOW()-DATETIMEVALUE('1996-01-01 13:00:00'), 1)))
))
-
(5*FLOOR((DATEVALUE(CreatedDate)-DATE(1996,01,01))/7) +
MIN(5, 
    MOD(DATEVALUE(CreatedDate)-DATE(1996,01,01), 7) +
    MIN(1, 24/11*(MOD(CreatedDate-DATETIMEVALUE('1996-01-01 13:00:00'), 1)))
))
), 0) 
```

让我们分解一下。我正在计算两个工作日的时间跨度。对于每一个，我都在计算完整的工作周数、最后一个部分周内的完整工作日以及最后一个部分日内的部分工作时间，然后将它们全部加起来。

```
(5*FLOOR((TODAY()-DATE(1996,01,01))/7) 
```

计算自参考点（必须是星期一）以来的完整周数，并为每个工作日计入 5 个工作日。

```
MOD(TODAY()-DATE(1996,01,01), 7) 
```

计算最后部分周中额外的全天数，并为每个计入 1 天。

```
24/11*(MOD(CreatedDate-DATETIMEVALUE('1996-01-01 13:00:00'), 1)) 
```

计算自营业开始以来已过去一天的部分。模数 1 只返回小数部分。乘以 24/11 会将其从小数 24 小时工作日转换为小数 11 小时工作日（对于 8 小时工作日，可以使用 8 而不是 11）。

```
MIN(1, ...) 
```

确保我们永远不会将在深夜很容易发生的零碎部分记入超过一个完整的工作日。

```
MIN(5, ...) 
```

确保我们在周六或周日很容易发生的部分工作周中的计入时间不会超过 5 个完整工作日。

```
ROUND(11*(...), 0) 
```

将其从工作日转换为整个工作时间。将其保留为工作日，包括小数部分。

结束思想：

*   此公式将工作假期计为工作日。我可以忍受这一点。
*   当我们的时间跨度与夏令时重叠时，可能会休息一个小时。我可以忍受这一点。
*   由于我们不计算几个月或几年，我认为我们不受闰年问题的影响。
*   我尽可能少地使用 DATETIMEVALUE()，因为它过度夸大了公式的大小。
*   上面的公式是 1,099 个字符，这应该让我有足够的空间为 EMEA 记录使用不同的参考日期。
*   我不会将它用于 1996 年 1 月 1 日之前的任何日期，但如果您选择更早的星期一，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-23T20:01:16.593

我知道您正在寻找营业时间，但是我注意到您有多个工作日公式，并认为我会在两个日期之间发布此替代工作日数（周一至周五）：

```
1 +
(
 (EndDate__c - StartDate__c) * 5 -
 (MOD(StartDate__c - DATE(1970,1,4),7) - MOD(EndDate__c - DATE(1970,1,4),7)) * 2
) / 7 -
IF(MOD(EndDate__c - DATE(1970,1,4),7) = 6,1,0) -
IF(MOD(StartDate__c - DATE(1970,1,4),7) = 0,1,0) 
```

改编自[这个 c# 公式](http://alecpojidaev.wordpress.com/2009/10/29/work-days-calculation-with-c/)。编译为 479 个字符。

理论上，您可以在此基础上计算小时数，当然可以计算出小时数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:48:18.830

如果您可以容忍合理的保证金错误

（计算自createdBy date -1以来的工作日数）*（11小时）+（time_now_in_24_hr_format - 6）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-07T20:07:19.437

只是关于夏令时 (arrg) 的注释......当考虑到它至关重要时，我会做一个 IF 语句，如果我的源字段（例如 CreatedDate）在夏令时范围之间，我使用一个（调整后）公式的版本，如果不是，我使用未调整的版本。将公式的大小加倍，但相当简单，因为这两个版本仅相差一两个字符。

# mysql - MYSQL - 如何选择案例（两个表，如果一个不存在，请检查另一个）

> ID：11126379
> 
> 赞同：4
> 
> 时间：2012-06-20T19:00:56.133
> 
> 标签：mysql, select, case

我拥有的是 mysql 数据库中的两个表。

一个表包含具有值的字段`"example@example.com"`

另一张桌子没有...

我想做的是检查两个表中是否有一个值匹配的字段`"example@example.com"`。

这是我的查询不起作用：

```
(#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 13)

SELECT CASE WHEN
EXISTS (
    SELECT address, suburb, city, postCode, province
    FROM user_postal
    INNER JOIN user_info ON user_postal.id = user_info.id
    WHERE user_info.emailContact = 'example@example.com'
)
OR EXISTS (
    SELECT address, suburb, city, postCode, province
    FROM user_postal
    INNER JOIN user_business_info ON user_postal.id = user_business_info.id
    WHERE user_business_info.emailContact = 'example@example.com'
) 
```

我想返回与`address, suburb, city, postCode, province`用户 id 和 email 匹配的字段的值`example@example.com`。（这可能在两个表中的任何一个中，但肯定在一个或另一个中）

谁能告诉我我哪里出了问题？任何这方面的信息将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:03:58.160

这个怎么样：

```
SELECT address, suburb, city, postCode, province
FROM user_postal
INNER JOIN user_info ON user_postal.id = user_info.id
WHERE user_info.emailContact = 'example@example.com'

UNION

SELECT address, suburb, city, postCode, province
FROM user_postal
INNER JOIN user_business_info ON user_postal.id = user_business_info.id
WHERE user_business_info.emailContact = 'example@example.com' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:05:04.443

```
SELECT address, suburb, city, postCode, province 
FROM user_postal
        INNER JOIN user_business_info ON (user_postal.id = user_business_info.id AND user_info.emailContact = 'example@example.com')
                                        OR (user_postal.id = user_info.id AND user_business_info.emailContact = 'example@example.com') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:03:26.860

这是您要使用[`UNION`](https://dev.mysql.com/doc/refman/5.6/en/union.html).

# php - 如何反序列化 std class()

> ID：11126380
> 
> 赞同：0
> 
> 时间：2012-06-20T19:01:04.993
> 
> 标签：php

我在数据库中序列化了值，我从数据库中获取它们然后当我这样做时

```
<pre>
print_r($DataValues)
</pre> 
```

它向我展示了这样的价值

```
[0] => stdClass Object
    (
        [categories] => a:1:{i:38;s:21:"Summer Market Session";}
    )

[1] => stdClass Object
    (
        [categories] => a:1:{i:38;s:21:"Summer Market Session";}
    )

[2] => stdClass Object
    (
        [categories] => a:2:{i:38;s:21:"Summer Market Session";i:39;s:21:"Autumn Market Session";}
    ) 
```

我想在反序列化后只获取值，我试图反序列化但显示 bolean false

&当我在为每个值运行后尝试打印该值时，它会显示下面提到的错误

**可捕获的致命错误：stdClass 类的对象无法转换为字符串**

我不知道我是怎么做到的，我正在尝试我所知道的所有反序列化策略，并且我还尝试使用 foreach 循环将值存储在数组中，但我失败了..

请帮助我在取消序列化后如何获得它的价值......？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:25:26.653

好吧，不知何故，我仍然看不到问题所在。我已经重建了您似乎从 DB 获得的数据结构：

```
$testObject             = new stdClass();
$testCategories         = array(38 => 'Summer Market Session');
$testObject->categories = serialize($testCategories);

$anotherTestObject             = new stdClass();
$anotherTestCategories         = $testCategories;
$anotherTestCategories[]       = 'Autumn Market Session';
$anotherTestObject->categories = serialize($anotherTestCategories);

$dataValues = array(
  $testObject, clone $testObject, $anotherTestObject
);

print_r($dataValues); 
```

它给了我你在问题中引用的相同输出，所以我想这是一个正确的重建。要解开这些数据，简单的循环就足够了：

```
foreach ($dataValues as $dataElement) {
  $categories = unserialize($dataElement->categories);
  print_r($categories);
} 
```

还是我做错了什么？

无论如何，这里[有一个沙箱](http://codepad.org/isTp6IZ5)来检查所有这些。

# javascript - 如何重复循环浏览 javascript 对象？

> ID：11126387
> 
> 赞同：1
> 
> 时间：2012-06-20T19:01:25.473
> 
> 标签：javascript, jquery, html, css

我有一个像这样的javascript对象：

```
var object = [{ id: 1, title:"xyz" }, {id: 2, title: "abc"}, {id: 3, title: "sdfs"}]; 
```

现在我要做的是遍历对象，使其读取第一个 id 并输出“xyz”，然后暂停 5 秒，然后通过第二个 id 并输出“abc”，再次暂停 5 秒然后继续通过第三个条目输出“sdfs”，再次暂停 5 秒，然后从条目 1 重新开始。我希望这无限期地继续下去。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:03:52.730

您的基本递归函数：

```
function recursive(obj,idx) {
    if (obj[idx]) {
        alert(obj[idx].title);
       setTimeout(function(){recursive(obj,idx+1);}, 5000); // milliseconds
    };
};
recursive(myObject,0); 
```

或者，无限循环：

```
function recursive(obj,idx) {
    if (obj[idx]) {
        alert(obj[idx].title);
        setTimeout(function(){recursive(obj,idx+1);}, 5000); // milliseconds
    } else {
        recursive(obj,0);
    };
};
recursive(myObject,0); 
```

[http://jsfiddle.net/Mezxw/](http://jsfiddle.net/Mezxw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:08:32.383

```
var object = [{ id: 1, title:"xyz" }, {id: 2, title: "abc"}, {id: 3, title: "sdfs"}];

setTimeout(doNextObject, 5000);

var index = 0;
var length = object.length;

function doNextObject() {
    alert(object[index].title);

    index = ++index % length;
    setTimeout(doNextObject, 5000);
} 
```

# azure - 无法将域名指向 Windows Azure 网站

> ID：11126393
> 
> 赞同：7
> 
> 时间：2012-06-20T19:02:20.107
> 
> 标签：azure, dns, azure-storage, cname, azure-web-app-service

我在 Windows Azure 上注册了一个 As-You-Go 帐户，并创建了一个 SQL 数据库并设置了“网站”。然后我成功地将我的网站部署到我的 Azure 帐户，并在线阅读了*一堆*文章，基本上说我需要将我的域名 CNAME 到我的 Windows Azure 网站 URL。

所以我这样做了：

![在此处输入图像描述](../Images/8ccbd21c9372e9c45dda13ffc61bcfa0.png)

然后我偶然发现另一篇文章说“对于'网站'，您需要将服务器扩展到'保留'模式。”

我也这样做了：

![在此处输入图像描述](../Images/0692d43798ba73ac6fb18db97ad4db92.png)

但它没有奏效。

我的主页上出现 404，它托管在我以前的托管公司的服务器上，*即使我已将其设置为指向 Azure 的服务器。*

任何人都可以帮助阐明这一点吗？难道我做错了什么？如您所见，已经大约 72 小时了，鉴于上面的信息，对我来说，它表明它还没有传播。是这样吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T19:24:05.983

在配置页面上，您还需要输入您的自定义主机名：

![在此处输入图像描述](../Images/dc6ae46d257a330899574c1389b0d13a.png)

# git - 在本地完成重置后恢复远程 git repo

> ID：11126394
> 
> 赞同：0
> 
> 时间：2012-06-20T19:02:21.217
> 
> 标签：git

在本地完成重置后，如何恢复远程 git repo？

我们不小心将更改推送到主分支。我已将本地分支中的代码还原为最后一次好的提交。现在，我正在尝试更新远程存储库，以便它也处于最后一次提交——未来的拉取和克隆是最后一次好的提交，但是会遇到错误。

这是我尝试过的：

```
git reset --hard <last-good-commit-hash> 
```

效果很好

然后，要更新远程仓库，

```
git push origin master 
```

这给了我：

```
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'host:/srv/git/cms'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details. 
```

然后，我尝试了：

```
git push --force origin master

Total 0 (delta 0), reused 0 (delta 0)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To host:/srv/git/cms
 ! [remote rejected] master -> master (non-fast-forward)
error: failed to push some refs to 'host:/srv/git/cms' 
```

如果我拉动，我会回到错误的提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:16:35.043

而不是`git reset <commit>`尝试

```
git revert <commit>
git push origin master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:21:19.583

检查服务器上的配置文件，它有`denyNonFastForwards=true`吗？

如果是，请执行以下操作：

```
git config receive.denyNonFastForwards false 
```

# html - 如何在不使用 API 的情况下向嵌入网站的 Google 地图添加其他地图标记？还是不可能？

> ID：11126396
> 
> 赞同：6
> 
> 时间：2012-06-20T19:02:22.670
> 
> 标签：html, google-maps, embed

假设我有 2 个办公地点要用于我的联系页面。我想要一个嵌入的谷歌地图来显示这两个位置。在谷歌地图本身中，我能够显示两个地图标记。但是，嵌入 HTML 代码仅使用输入的第一个地址。

问题 1：是否可以更改 Google 提供的 HTML 嵌入代码以显示第二个位置的地图标记？

问题 2（仅当上述答案为“是”时）：如何？

以下是 Google 提供的一些示例嵌入代码：

```
<iframe width="920" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.ca/maps?hl=en&amp;client=safari&amp;q=33+Victoria+St.,+Toronto,+ON+M5C+3A1&amp;ie=UTF8&amp;hq=&amp;hnear=33+Victoria+St,+Toronto,+Ontario+M5C+3A1&amp;gl=ca&amp;t=m&amp;ll=43.536603,-79.796448&amp;spn=0.696882,2.526855&amp;z=9&amp;iwloc=A&amp;output=embed"></iframe><br /><small><a href="https://maps.google.ca/maps?hl=en&amp;client=safari&amp;q=33+Victoria+St.,+Toronto,+ON+M5C+3A1&amp;ie=UTF8&amp;hq=&amp;hnear=33+Victoria+St,+Toronto,+Ontario+M5C+3A1&amp;gl=ca&amp;t=m&amp;ll=43.536603,-79.796448&amp;spn=0.696882,2.526855&amp;z=9&amp;iwloc=A&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T19:56:30.627

您可以通过使用`My Places`. 以下是实现此目的的步骤：

1.  在谷歌地图中，​​注意`My Places`旁边的按钮`Get Directions`- 点击它。
2.  单击`Create a Map`左侧面板中的
3.  指定标题和描述（可能是关于您办公室的信息），然后点击保存。
4.  现在像在搜索栏中一样搜索您的两个位置。
5.  单击`Save to map`左侧面板上结果列表底部的 ，然后指定要保存到的地图（应该是您之前设置的标题）。
6.  对这两个位置都这样做，然后像通常那样使用嵌入工具来嵌入地图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T02:44:10.673

我不确定您的问题的答案，但 Google API 非常方便且相对容易学习。

创建标记实际上只需要 3 行、新标记、标记位置和您正在使用的地图。在 JS 中创建具有多个标记的地图也相对较短。这是一个示例。

```
function initialize() {
    var myOptions = {
        zoom: 4,
        center: new google.maps.LatLng(-25.363882, 131.044922),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);

    var marker = new google.maps.Marker({
        position: map.getCenter(),
        map: map,
    });
    var marker2 = new google.maps.Marker({
        position: new google.maps.LatLng(35, 96),
        map: map,
    });
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

如果将来需要，使用 API 还可以让您进一步向地图添加更多功能。最终，您可能希望让标记显示它们的位置，甚至可能获得前往其中一个标记的路线。谷歌已经编写了所有这些代码，任何人都可以使用。

这是一个使用融合表 API 的更高级的示例，但是除了标记之外，您还可以使用许多很酷的功能。 [https://developers.google.com/fusiontables/docs/samples/infowindow_driving_directions](https://developers.google.com/fusiontables/docs/samples/infowindow_driving_directions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:40:33.087

尝试将您的办公地点保存到 Google 我的地图，然后在 iframe 的 href 中提供地图的链接地址

# c# - “参数无效” Image.FromStream

> ID：11126399
> 
> 赞同：1
> 
> 时间：2012-06-20T19:02:35.160
> 
> 标签：c#

我有一个将图像作为流返回的 Web 服务。

```
public Stream GetImageStream()
{
    // Omitted code ...

    return httpResponse.GetResponseStream();
} 
```

在另一个页面中，我使用了这个功能：

```
Image img = Image.FromStream(GetImageStream()); 
```

但是执行此行时出现以下错误：

“参数无效”

另外当一个空流来时我该如何处理？

# php - 在 PHP 中使用 DOM 更改属性无法正确保存

> ID：11126402
> 
> 赞同：0
> 
> 时间：2012-06-20T19:02:41.547
> 
> 标签：php, dom, setattribute

我有一个涉及 DOM 的奇怪错误。我正在尝试遍历文档中的每个 href 并在必要时将其替换为绝对路径。问题是，在我使用后`$dom->setttribute()`，`getAttribute`返回更改后的值。然而，如果我`saveHTML()`再次使用 getElementsByTagName 和 getAttribute 查询标签，这些值就会从[http://example.com/path.php?ccc](http://example.com/path.php?ccc)截断为[http://example.com](http://example.com)。

这是我的代码：

```
<?php
//include 'url_to_absolute.php';

function url_to_absolute($url, $href) {
    return trim($url . $href);
}

 $url = 'http://example.com';
 //$url = $_GET["url"];
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$contents = curl_exec($ch);
@curl_close();

$dom = new DOMDocument();
$dom->loadHTML($contents);

//change the urls to absolute
$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor)
{
    $href = $anchor->getAttribute('href');
    $abs = url_to_absolute($url, $href);
    $anchor->removeAttribute('href');
    $anchor->setAttribute('href', $abs);

    //changed
    $newhref = $anchor->getAttribute('href');
    echo "newhref = " . $newhref; //shows http://example.com/.... (good)
}

$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor)
{
    echo "new2 = " . $anchor->getAttribute('href'); //returns http://example.com only
}

//print output
echo @$dom->saveHTML();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:05:32.540

试试这些 curl 选项 + curl_init($url)：

```
<?php
//include 'url_to_absolute.php';
function url_to_absolute($url, $href){
    return trim($url . $href);
}

$url = 'http://example.com';
//$url = $_GET["url"];
$ch = curl_init($url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch,CURLOPT_FOLLOWLOCATION, TRUE);
$contents = curl_exec($ch);
curl_close();

$dom = new DOMDocument();
$dom->loadHTML($contents);
//$dom->saveHTMLFile('dom_doc_test.html');

//change the urls to absolute
$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor)
{
    $href = $anchor->getAttribute('href');
    $abs = url_to_absolute($url, $href);
    $anchor->removeAttribute('href');
    $anchor->setAttribute('href', $abs);

    //changed
    $newhref = $anchor->getAttribute('href') . '<br />';
    echo "newhref = " . $newhref; //shows http://example.com/.... (good)
}

$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor)
{
    echo "new2 = " . $anchor->getAttribute('href') . '<br />'; //returns http://example.com only
}

//print output
echo @$dom->saveHTML();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:55:43.050

它应该是您的 url_to_absolute 函数中的错误。我的简单 url_to_absolute 是：

```
function url_to_absolute($url, $href){
    return trim($url . $href);
}

$url = 'http://example.com';

$dom = new DOMDocument();
$dom->loadHTML('<html><body><a href="/path.html?q=hello&a=bye"></a><a href="/path2.html?before=34&after=44"></a></body></html>');

$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor){
    $href = $anchor->getAttribute('href');
    echo "href = " . $href . '<br />';
}

echo '<br />';

$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor){
    $href = $anchor->getAttribute('href');
    $abs = url_to_absolute($url, $href);
    $anchor->removeAttribute('href');
    $anchor->setAttribute('href', $abs);  

    $newhref = $anchor->getAttribute('href');
    echo "newhref = " . $newhref . '<br />';
}

echo '<br />';

$anchors = $dom->getElementsByTagName('a');
foreach($anchors as $anchor){
    echo "new2 = " . $anchor->getAttribute('href') . '<br />';
} 
```

结果是：

```
href = /path.html?q=hello&a=bye
href = /path2.html?before=34&after=44

newhref = http://example.com/path.html?q=hello&a=bye
newhref = http://example.com/path2.html?before=34&after=44

new2 = http://example.com/path.html?q=hello&a=bye
new2 = http://example.com/path2.html?before=34&after=44 
```

# javascript - javascript 菜鸟。变量和元素

> ID：11126404
> 
> 赞同：1
> 
> 时间：2012-06-20T19:03:10.750
> 
> 标签：javascript, function, syntax

使用javascript的总菜鸟。我正在尝试更改功能。这是目前存在并且有效的。

```
function hideStateField(theForm) {
    theForm.state.disabled = true;
    theForm.state.className = 'hiddenField';
    theForm.state.setAttribute('className', 'hiddenField');
    document.getElementById("stateLabel").className = 'hiddenField';
    document.getElementById("stateLabel").setAttribute('className', 'hiddenField');
    document.getElementById("stateText").className = 'hiddenField';
    document.getElementById("stateText").setAttribute('className', 'hiddenField');
    document.getElementById("stateBreak").className = 'hiddenField';
    document.getElementById("stateBreak").setAttribute('className', 'hiddenField');
} 
```

我想让它更通用，因此它不特定于“状态”字段。所以我正在更改函数名称以反映这一点并添加第二个参数。然后我尝试使用第二个参数作为变量来代替我们看到的“状态”。

```
function hideAddressField(theForm,theField) {
    theForm.theField.disabled = true;
    theForm.theField.className = 'hiddenField';
    theForm.theField.setAttribute('className', 'hiddenField');
    document.getElementById(theField+"Label").className = 'hiddenField';
    document.getElementById(theField+"Label").setAttribute('className', 'hiddenField');
    document.getElementById(theField+"Text").className = 'hiddenField';
    document.getElementById(theField+"Text").setAttribute('className', 'hiddenField');
    document.getElementById(theField+"Break").className = 'hiddenField';
    document.getElementById(theField+"Break").setAttribute('className', 'hiddenField');
} 
```

我只是用“状态”作为第二个变量对其进行了测试，以确保它有效......但它没有。我不断收到“未捕获的类型错误：无法设置未定义的属性‘禁用’”。我确定它是一个语法错误。我对这个函数的调用是：

```
hideAddressField(theForm,state); 
```

表单的名称也是“theForm”，所以我认为变量“theForm”被分配了“theForm”的值，而变量“theField”被分配了“state”的值，这两个函数应该是等价的。明显不是。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:05:51.320

您必须使用`theForm[theField]`语法，因为“theField”是一个包含属性名称的变量，而不是属性本身。此外，您将需要`state`作为字符串传递。

# c++ - 新手，帮忙做个对象

> ID：11126409
> 
> 赞同：0
> 
> 时间：2012-06-20T19:03:31.093
> 
> 标签：c++, object, vector

我正在学习c++，我已经知道java，c#+++。所以我认为这将是在公园里散步，但没有！我要做的是制作一个简单的对象（“t​​est”），我可以在其中通过 add 函数将字符串添加到向量“data”，然后制作某种打印函数来打印它。我试过在下面显示一些东西，任何输入将不胜感激:)

```
Call:
test a;
a.add("blabla");
a.print();

test.h:
class test{
    vector<string>* data;
    std::string str;
public:
    test();
    void add(std::string t);
};

**test.cpp:**
test::test() {
data = new vector<string>;
}

void test::add(std::string t) {
data->pushback(t);
}

void test::print() {
cout << data[0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:54:23.200

使 C++ 与 Java 和 C# 不同的根本原因之一是，在 C++ 中，所有类都是“值类”。另一个是动态内存是“手动”的。

从第二点可以得出这样一个事实：每次你打电话时`new`，你必须考虑谁和什么时候打电话`delete`。

从第一点开始下降`vector`并`string`表现为值，并且处理它们的增长和收缩所需的动态内存由类本身管理。无需动态分配它们。

您还必须注意声明类的标头（`#include`在使用时必须为 d）和包含您使用的声明的名称空间（通过声明 a`using`或通过显式调用它们）。

以下代码（在单个文件中）执行您想要的操作。

```
#include <vector>
#include <string>
#include <iostream>

class test
{
public:
    void add(std::string t);
    void print() const;
private:
    typedef std::vector<std::string> data_t;
    data_t data;
};

void test::add(std::string t)
{ data.push_back(t); }

void test::print() const
{
    for(data_t::size_type i=0; i<data.size(); ++i)
        std::cout << data[i] << std::endl;
}

int main()
{
    test a;
    a.add("first");
    a.add("second");
    a.add("third");
    a.print();
    return 0;
} 
```

还有更多`canonical`处理打印的方法（通过参数化输出流并制作一个 << 运算符重载，将“a”视为另一个普通值）。但是现在，将这段代码（与您的代码最相似的代码）与您的代码进行比较，并找出不仅仅是语法上的不同。

编辑

我不知道你是否使用 C++11 ......这里有两种可能的增强功能：

如果坚持 C++03，

`void add(sd::string t)`可以更好地参数化为

```
void add(const std::string& t)
//       ^^^^^            ^ 
```

如果使用 C++11，由于将`t`其交给 push_back 后不再需要，

```
void test::add(std::string t)
{ data.push_back(std::move(t)); } 
```

在这种情况下不要使用`const&`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:06:45.643

你还记得在你的 main 方法中包含 test.h 吗？

此外，您需要在代码中使用`std::cout`或包含该行`using namespace std;`。

另外，vector 的推回方法是`push_back()`，不是`pushback()`。

最后，由于您`new`在构造函数中使用了关键字，因此您还需要一个析构函数，它看起来像这样：

```
test::~test()
{
    delete data;
} 
```

当您进行 C++ 编程而不是 Java 或 C# 时，请记住这一点非常重要。C++ 实现不会自动进行垃圾收集，因此您需要自行释放分配的内存。

编辑：

此外，以下答案之一指出了另一个问题。您忘记在索引矢量指针之前取消引用它。你需要打印出来`(*data)[0]`。故事的寓意是，如果您将数据设为 a`vector`而不是指向`vector`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:02:36.807

我想你忘了取消引用 test::print 中的向量指针

```
void test::print() {
    cout << (*data)[0];
} 
```

*另外重要的是要记住删除创建的对象`new`

# c# - 在 C# 中为 XAML 浏览器应用程序设置读取本地 XML 文件的权限

> ID：11126411
> 
> 赞同：0
> 
> 时间：2012-06-20T19:03:37.740
> 
> 标签：c#, xml, xbap, securityexception

我有一个最终将放置在服务器上的 XAML 浏览器应用程序，但是我目前正在我的 Documents 文件夹中对其进行测试。我正在尝试从本地读取 XML 文档，但我被困在`XmlReader.Create();` 当我尝试使用我的 XML 文档时，抛出了 SecurityException，所以我尝试使用以下内容来授予 XML 文件的读取权限：

```
FileIOPermission fpa1 = new FileIOPermission(FileIOPermissionAccess.Read, @"C:\Users\User1\Documents\Visual Studio 2010\Projects\WpfBrowserApplication2\WpfBrowserApplication2\XMLDoc1.xml");
xReader = XmlReader.Create(@"C:\Users\User1\Documents\Visual Studio 2010\Projects\WpfBrowserApplication2\WpfBrowserApplication2\XMLDoc1.xml" 
```

错误消息如下：

```
A first chance exception of type 'System.Security.SecurityException' occurred in mscorlib.dll
Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=[tokennumber]' failed. 
```

FileIOPermission 是用于启用 XmlReader 读取权限的正确类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:22:38.900

FileIOPermission 类用于检查您是否有权限，而不是设置它。

IE：

```
try
{
    FileIOPermission perf = new FileIOPermission(FileIOPermissionAccess.Read, @"C:\Users\jbeaulac\Documents\test.xml");
    perf.Demand();
}
catch (Exception ex)
{
    MessageBox.Show("Not enough permission, blah blah blah.");
    return;
}

var reader = XmlReader.Create(@"C:\Users\jbeaulac\Documents\test.xml");
/// ... 
```

在 XBAP 应用程序中，您不能随意弄乱用户的文件，除非您的应用程序是完全信任的。

项目属性 --> 安全 --> 这是一个完全信任的应用程序

此外，如果您打算使用 XBAP，那么此文档确实值得一读：

[http://msdn.microsoft.com/en-us/library/aa970910.aspx](http://msdn.microsoft.com/en-us/library/aa970910.aspx)

# mysql - 需要用 MySQL 存储过程/http post 方法查询远程 API

> ID：11126414
> 
> 赞同：1
> 
> 时间：2012-06-20T19:03:50.017
> 
> 标签：mysql, stored-procedures, http-post

我想使用 MySQL 中的存储过程通过 HTTP Post 将 2 个变量发送到远程 API，然后获取响应并将其写入新表。到目前为止，程序如下，据我所知 wget 会起作用。

IP 地址和时间戳当然会改变。如果这是通过 http 帖子进行的，我还需要将字段名称作为发送的 URL 的一部分。

如何在单个块中将变量添加到 URL？

```
DELIMITER$$
DROP PROCEDURE IF EXISTS mpTest2$$
CREATE PROCEDURE mpTest2(INOUT ipqAddress VARCHAR(16), INOUT ipqTime DATETIME)

BEGIN
 DECLARE URI VARCHAR(30) = '';
 DECLARE apiKey VARCHAR(--) = ...
 DECLARE method VARCHAR(15);
 -- declare ipAddress varchar(16);
 -- declare ipTime    datetime;
 DECLARE lCount INT; -- counter for cursor
 DECLARE lflag INT;

 DECLARE curl CURSOR FOR
    SELECT mpalltrans.`IP`
    FROM mpalltrans;

DECLARE CONTINUE HANDLER FOR NOT FOUND SET lflag=1;

OPEN curl;
ipqloop:LOOP
    FETCH curl INTO ipaddress
    IF lflag = 1 THEN
        LEAVE ipqloop;
    wget http://www.w.cookies/ ***Need to insert table variables here with predefined field names***
END LOOP iploop;
CLOSE curl;
END;
DELIMITER$$ 
```

谢谢你，J

# android - ListView.removeFooterView(View) 上的崩溃

> ID：11126422
> 
> 赞同：11
> 
> 时间：2012-06-20T19:04:05.550
> 
> 标签：android, android-layout

我收到崩溃报告

```
 android.widget.ListView  lv;  lv.removeFooterView(v) 
```

错误是空指针异常。我检查 listView 本身不为空。这是什么原因造成的？是否有必要确保要删除的视图不为空？这是否足够，还是我首先需要检查页脚视图是否已添加？

```
java.lang.NullPointerException
at android.widget.ListView.removeFooterView(ListView.java:374) 
```

在我看来，这种方法应该足够强大而不会崩溃！如果它不能删除视图，为什么它不只是返回 false ？

PS。我想知道有没有其他人看过这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T19:46:28.267

不幸的是，您没有提及错误报告来自哪个 Android 版本。但是，查看源代码，Android 2.1-update1 似乎是一个不错的候选者。

我将复制整个方法以使事情清楚：

```
public boolean removeFooterView(View v) {
    if (mFooterViewInfos.size() > 0) {
        boolean result = false;
        if (((HeaderViewListAdapter) mAdapter).removeFooter(v)) { // <- line 274
            mDataSetObserver.onChanged();
            result = true;
        }
        removeFixedViewInfo(v, mFooterViewInfos);
        return result;
    }
    return false;
} 
```

现在将上述`removeFooterView(...)`方法与更新平台的实现进行比较：

```
public boolean removeFooterView(View v) {
    if (mFooterViewInfos.size() > 0) {
        boolean result = false;
        if (mAdapter != null && ((HeaderViewListAdapter) mAdapter).removeFooter(v)) {
            if (mDataSetObserver != null) {
                mDataSetObserver.onChanged();
            }
            result = true;
        }
        removeFixedViewInfo(v, mFooterViewInfos);
        return result;
    }
    return false;
} 
```

如您所见，我们为某些成员添加了一些额外的检查，而不是`null`. 这表明第一种方法确实会在第 274 行 if 失败`mAdapter == null`，而新的实现不会导致崩溃。

要解决这个问题，您可能需要做的就是`lv.getAdapter() != null`在尝试删除页脚视图之前添加类似的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:43:39.440

如果您查看文档，您会发现实际上是这样的：

[http://developer.android.com/reference/android/widget/ListView.html)](http://developer.android.com/reference/android/widget/ListView.html#removeFooterView%28android.view.View%29)

> 退货
> 
> 如果视图被删除，则为 true；如果视图不是页脚视图，则为 false

因此，您应该为视图和 listView 添加一个空检查，或者如果这是一个异常状态（很少发生然后将其包装在一个异常块中）。

# qt - 测试 QAbstractListModels

> ID：11126423
> 
> 赞同：1
> 
> 时间：2012-06-20T19:04:10.470
> 
> 标签：qt, unit-testing, testing, qt4, model-view

我想测试一些我已经实现的 QAbstractListModels，是使用 Qt 实验室的 ModelTest 还是使用 QTestLib 进行我自己的单元测试更好。也有人能指出我实际上 ModelTest 做了什么以及如何使用它或除此之外的一个很好的[教程](http://qt-project.org/wiki/Model_Test)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T01:03:52.953

两者都做。ModelTest 只会检查您的模型是否满足 ModelView 框架的基本期望。您仍然需要编写自己的单元测试用例来验证您的模型是否以您期望的方式运行。

有许多模型可以通过 ModelTest 测试，但您仍然觉得需要编写自己的模型。显然，您的模型有一些特殊之处，否则您不会费心编写新模型。所以，测试那些东西！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:47:46.827

ModelTest 只是监听模型发出的信号。在每个信号之后，它会尽可能多地验证信号所暗示的内容是否在模型中实际发生。

不需要教程，因为它使用起来很简单，就像您链接到的文章一样。

只需为您的模型实例化一个 ModelTest。它甚至可以是模型的孩子，只要模型存在，它就会存在。下面的辅助函数说明它实际上是微不足道的。

```
void instrument(QAbstractItemModel * model)
{
  new ModelTest(model, model);
} 
```

# objective-c - CoreLocation：没有调用 didUpdateToLocation

> ID：11126426
> 
> 赞同：0
> 
> 时间：2012-06-20T19:04:27.270
> 
> 标签：objective-c, ios, xcode, core-location

我目前正在开发我的第一个基于 CoreLocation 的应用程序，但我遇到了 CLLocationManager 不调用委托方法的问题。这是我正在使用的课程：

```
//
//  LocationGetter.h
//  whatsunderme
//
//  Created by Tobias Timpe on 16.06.12.
//  Copyright (c) 2012 tobisoft. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
@protocol LocationGetterDelegate
@required
- (void) newPhysicalLocation:(CLLocation *)location;
@end

@interface LocationGetter : NSObject <CLLocationManagerDelegate> {
   CLLocationManager *locationManager;
   id delegate;
} 

- (void)startUpdates;

@property (nonatomic, retain) CLLocationManager *locationManager;
@property (nonatomic, retain) id delegate;
@end

//
//  LocationGetter.m
//  whatsunderme
//
//  Created by Tobias Timpe on 16.06.12.
//  Copyright (c) 2012 tobisoft. All rights reserved.
//

#import "LocationGetter.h"

@implementation LocationGetter

@synthesize locationManager, delegate;
BOOL didUpdate = NO;

- (void)startUpdates {
    if (self.locationManager == nil) {
        self.locationManager = [[CLLocationManager alloc] init];
    }
    self.locationManager.delegate = self;
    NSLog(@"Starting Location Updates");
    locationManager.distanceFilter = 100;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [self.locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    NSLog(@"Error");
}

// Delegate method from the CLLocationManagerDelegate protocol.
- (void)locationManager:(CLLocationManager *)manage didUpdateToLocation:(CLLocation *)
newLocation fromLocation:(CLLocation *)oldLocation {
        NSLog(@"new Location found");
    didUpdate = YES;
    // Disable future updates to save power.
    [self.locationManager stopUpdatingLocation];

    [self.delegate newPhysicalLocation:newLocation];

}

@end 
```

didUpdateToLocation 和 didFailWithError 方法都没有被调用。我不知道为什么。希望您能帮我解决这个问题，因为我花了 2 个小时试图找出问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:38:08.697

使用我的代码，它应该对你有用......

首先通过添加以下内容来确保您正在使用该协议，例如添加到您的 AppDelegate 或您希望 CoreLocation 在其中工作的任何控制器......

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate> 
```

创建一些属性，我也使用自定义方法但您没有...

```
@property (strong, nonatomic) CLLocationManager *locationManager;
@property (strong, nonatomic) CLLocation *currentLocation;

- (void)startUpdatingCurrentLocation; 
```

然后在你的实现文件中调用自定义方法来启动 CL

```
// start location services
[self startUpdatingCurrentLocation]; 
```

下面是我的自定义方法的代码。

```
- (void)startUpdatingCurrentLocation
{    
  // if location services are on
  if([CLLocationManager locationServicesEnabled])
  {
    // if location services are restricted do nothing
    if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied || [CLLocationManager authorizationStatus] == kCLAuthorizationStatusRestricted )
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Determining your current location cannot be performed at this time because location services are enabled but restricted." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];
    }
    else 
    {
        if(!locationManager_)
        {
            locationManager_ = [[CLLocationManager alloc] init];
            [locationManager_ setDesiredAccuracy:kCLLocationAccuracyBest];
            [locationManager_ setDelegate:self];
            [locationManager_ setDistanceFilter:5.0f];          // measured in meters
            [locationManager_ setHeadingFilter:5];              // measured in degrees
            [locationManager_ setPurpose:@"Enabling location services is required in order to automatically determine the location of yada yada yada..."];
        }

        [locationManager_ startUpdatingLocation];
    }
  }
  else 
  {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Determining your current location cannot be performed at this time because location services are not enabled." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T01:27:58.550

对我来说，将字符串“location-services”添加到 Info.plist 中的 UIRequiredDeviceCapabilities 数组解决了这个问题。

在此处阅读文档 [https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)

UIRequiredDeviceCapabilities 的值是一个字符串数组，指示您的应用程序需要的功能。有两个与位置服务相关的字符串：

如果您通常需要位置服务，请包括位置服务字符串。如果您的应用需要 GPS 硬件提供的精度，请包括 gps 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:27:43.280

呸呸呸呸呸！

我忘记在 .h 文件而不是 .m 文件中声明 LocationGetter 实例的变量！

# java - 对象的静态实例中的数组被破坏

> ID：11126427
> 
> 赞同：0
> 
> 时间：2012-06-20T19:04:27.160
> 
> 标签：java, android

我做了一个类：

```
public class Msg {
     int[] Data;
} 
```

在程序启动中，我创建了类并创建了数组：

```
static Msg rMessage;

rMessage = new Msg();
rMessage.Data = new int[8]; 
```

问题是，如果我想稍后在程序中使用该数组，它就会被破坏。在启动时，我可以在调试器中看到数组，但后来在代码中它变为`null`. 该类的其他属性仍设置为正确的值。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:08:48.573

尝试这样做。

```
Msg.Data = new int[8]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:05:51.070

我通过将它放在另一个非活动类中解决了这个问题：“static Msg rMessage;”

但这仍然是一种奇怪的行为。

# jquery - jQuery - 创建使用配置选项的公共方法

> ID：11126430
> 
> 赞同：0
> 
> 时间：2012-06-20T19:04:41.203
> 
> 标签：jquery, jquery-plugins, options, public-method

我正在尝试创建一个使用选项的基本插件，然后创建一个使用设置选项的对象的方法。

```
 $.sn_Watermark = $.sn_Watermark || {
        options: {
            waterMarkText: "Watermark Text",
            className: "watermarked"
        },
        show: function(selector) {
            $(selector)
                .addClass("watermarked")
                .val("Watermark Text");
        }
    };  

   $.fn.sn_Watermark = $.fn.sn_Watermark || function (options) {
            if(options == null)
                options = $.sn_Watermark.options;
            else
                options = $.extend($.sn_Watermark.options, options);

            return this.each(function () {
                $tb = $(this);
                    if ($tb.val() == "" || $tb.val() == options.waterMarkText ) {
                        $tb.addClass(options.className);
                        $tb.val(options.waterMarkText);
                    }
                }).focus(function () {
                    $tb = $(this);
                    if ($tb.val() == options.waterMarkText) {
                        $tb.val("");
                        $tb.removeClass(options.className);
                    }
                }).blur(function () {
                //var clearLnk = "[LnkClearRowNum=" + $tb.attr('TextBoxRowNum') + "]";
                if ($tb.val() == '') {
                    // $(clearLnk).hide();
                    $tb.addClass(options.className);
                    $tb.val(options.waterMarkText);
                }
                else if ($tb.val() == options.waterMarkText){ //if user types in water mark text
                    $tb.addClass(options.className);
                }
                else {
                    //$(clearLnk).show();
                    $tb.removeClass(options.className);
                }
            });
        };

    $(document).ready(function () {
      $("[TextBoxRowNum]").sn_Watermark({waterMarkText: "My Text"} );
      $.sn_Watermark.show("[TextBoxRowNum]");
   }); 
```

因此，当我调用 show 时，它使用“硬编码”默认值。我试图做这样的事情，但没有任何运气。

```
 $.sn_Watermark = $.sn_Watermark || {
        options: {
            waterMarkText: "Watermark Text",
            className: "watermarked"
        },
        show: function(selector) {
            $(selector)
                .addClass(options.waterMarkTest)
                .val(options.className);
        }
    }; 
```

所以我的问题是，有没有一种简单的方法可以在 show 方法中传递选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:10:04.960

我认为没有理由创建一个外部方法来通过扩展应用这些选项。

为什么不尝试将选项放在插件函数中，然后扩展它们呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:44:12.867

```
$.sn_Watermark = $.sn_Watermark || {
    options: {
        waterMarkText: "Watermark Text",
        className: "watermarked"
    },
    show: function(selector) {
        $(selector)
            .addClass($.sn_Watermark.options.className)
            .val($.sn_Watermark.options.waterMarkText);
    }
}; 
```

知道了。让它称它为自己。

# http-live-streaming - 适用于 Windows 的 HLS 变量播放列表创建器

> ID：11126432
> 
> 赞同：1
> 
> 时间：2012-06-20T19:04:41.717
> 
> 标签：http-live-streaming, m3u, mediastreamsegmenter

我最初的任务是为 Windows 找到一个分段器，它可以在不更改其编解码器的情况下拆分 h264\aac 视频文件并使其可通过 HLS 播放。

对我有用的最好方法是像这样使用 ffmpeg：

```
ffmpeg -i encoded.mp4 -c copy -map 0 -vbsf h264_mp4toannexb -flags -global_header -f segment -segment_time 10 -segment_format mpegts stream%d.ts 
```

现在，这或多或少正确地拆分了文件，尽管`mediastreamvalidator`引发了一些警告，但我仍然能够播放视频。

但是，棘手的部分是：ffmpeg 无法为您创建 .m3u8 文件。这不是问题，除非您需要创建我需要的变体播放列表文件。所以现在我需要找到或编写一个模仿 Windows 的应用程序`varianplaylistcreator`

因此，假设您为每个不同的带宽编码了相同的视频：64、150、300、500、800、1200 和 2400。现在，在分割每个视频之后，您可能希望将这些片段放入单独的文件夹中，包括播放列表文件对于每个演绎。

现在我们可以创建一个变体播放列表文件，在其中列出所有再现，并说明哪些带宽服务器应该自动切换为不同的再现提供服务。

通常变体播放列表如下所示：

```
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=512376
500/500k_512x384_x264_372_quicktime_128.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=68795
64/64k_256x192_x264_32_quicktime_32.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=155580
150/150k_256x192_x264_118_quicktime_32.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=308895
300/300k_512x384_x264_172_quicktime_128.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=811310
800/800k_512x384_x264_672_quicktime_128.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1210182
1200/1200k_1024x768_x264_1072_quicktime_128.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=2408106
2400/2400k_1024x768_x264_2272_quicktime_128.m3u8 
```

注意 BANDWITH 属性值。我怀疑这些是由`varinatplaylistcreator`.

我不知道它是怎么做到的。我想以某种方式它需要每个再现的视频（片段）的平均比特率，并以此为基础。

所以我的问题是：这些是如何计算的。或者，也许有人已经创建了一个可以在 Windows 上运行并创建变体播放列表的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:37:51.487

FFmpeg 可以报告 ts 流的比特率。使用 ffprobe 工具，您将获得如下输出：

```
Input #0, mpegts, from 'foo.ts':
  Duration: 00:04:50.87, start: 2.000011, bitrate: 10381 kb/s
  Program 1
    Stream #0.0[0x810]: Video: h264 (High), yuv420p, 1280x720 [PAR 1:1 DAR 16:9], 25 fps, 25 tbr, 90k tbn, 50 tbc 
```

比特率以每秒千比特为单位，因此将其乘以 1024，您将获得 BANDWIDTH 标签所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-10T10:32:21.577

您可以使用[Bento4](https://www.bento4.com/documentation/mp4hls/)。他们在文档中指定说我们可以使用它来代替 Apple 的 variantplaylistcreator

# xcode - XCode + cmake 忽略对当前构建的更新

> ID：11126433
> 
> 赞同：1
> 
> 时间：2012-06-20T19:04:45.040
> 
> 标签：xcode, cmake

我正在尝试使用 Xcode 交叉编译一个 c++/Objective-C 项目。我第一次构建它时，应用程序构建得很好并且运行正常。问题是，在那之后，对代码的任何修改都不再涉及应用程序。我可以看到代码正在编译，并且可以确认源文件已构建，但这根本不会改变应用程序！

我试图删除构建的库、生成的应用程序，甚至清理项目似乎都不会改变输出的应用程序。似乎新库正在另一个文件夹中生成，编译器没有找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:20:46.033

这确实有些奇怪。对我来说，删除相关的 .o 文件、链接的应用程序二进制文件以及整个 .dSYM 文件夹都有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T13:09:05.700

所以我发现删除 .app 中生成的二进制文件并再次构建会强制重新链接所有内容。烦人，但至少我不必进行完全清洁+重建。

# c# - 用于服务应用程序的 Google oAuth 2.0（JWT 令牌请求）

> ID：11126439
> 
> 赞同：16
> 
> 时间：2012-06-20T19:05:12.133
> 
> 标签：c#, oauth, oauth-2.0, google-oauth, jwt

我正在尝试为此处描述的服务帐户实施 Google oAuth 2：UnityScript （或 C# 上的[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount) - 没关系，因为它们都使用相同的 Mono .NET类）。

我在这里找到了类似的主题：[Is there a JSON Web Token (JWT) example in C#?](https://stackoverflow.com/questions/10055158/is-there-a-json-) web-token-jwt-example-in-c 但我仍然没有成功。

首先，我生成了标题和声明集（就像在谷歌文档中一样）

```
var header: String = GetJWTHeader();
var claimset: String = GetJWTClaimSet(); 
```

结果是（为清楚起见，用新行分隔）：

> {"alg":"RS256","typ":"JWT"}
> 
> {"iss":"425466719070-1dg2rebp0a8fn9l02k9ntr6u5o4a8lp2.apps.googleusercontent.com",
> 
> “范围”：“ [https://www.googleapis.com/auth/prediction](https://www.googleapis.com/auth/prediction) ”，
> 
> “aud”：“ [https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token) ”，
> 
> “exp”：1340222315，
> 
> "iat":1340218715}

Base-64 编码方式：

```
public static function Base64Encode(b: byte[]): String {
    var s: String = Convert.ToBase64String(b);
    s = s.Replace("+", "-");
    s = s.Replace("/", "_");
    s = s.Split("="[0])[0]; // Remove any trailing '='s
    return s;
}

public static function Base64Encode(s: String): String {    
    return Base64Encode(Encoding.UTF8.GetBytes(s));
} 
```

然后我正在做一个签名。

```
var to_sign: byte[] = 
     Encoding.UTF8.GetBytes(Base64Encode(header) + "." + Base64Encode(claimset));
var cert: X509Certificate2 = 
     new X509Certificate2(google_pvt_key.ToArray(), "notasecret");
var rsa: RSACryptoServiceProvider = cert.PrivateKey;
var sgn: String = Base64Encode(rsa.SignData(to_sign, "SHA256"));

var jwt: String = Base64Encode(header) + "." + Base64Encode(claimset) + 
                     "." + sgn; 
```

然后形成请求：

```
var url: String = "https://accounts.google.com/o/oauth2/token";
var form: WWWForm = new WWWForm();
form.AddField("grant_type", "assertion");
form.AddField("assertion_type", "http://oauth.net/grant_type/jwt/1.0/bearer");
form.AddField("assertion", jwt);
var headers: Hashtable = form.headers;
headers["Content-Type"] = "application/x-www-form-urlencoded";

var www: WWW = new WWW(url, form.data, headers); 
```

我得到的只是“**错误 400：错误请求**”。

编码数据看起来像（为清楚起见添加了换行符）：

> eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9。
> 
> eyJpc3MiOiI0MjU0NjY3MTkwNzAtMWRnMnJlYnAwYThmbjlsMDJrOW50cjZ1NW80YThscDIuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzY29wZSI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcHJlZGljdGlvbiIsImF1ZCI6Imh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbiIsImV4cCI6MTM0MDIyMjMxNSwiaWF0IjoxMzQwMjE4NzE1fQ。
> 
> LIFg7-Og_BcC5qpICLt7USwGIHUOz-vV4ADNq0AWhuRtsvFrbZn5mxk4n9r5qU66q4reTVVAtuW06DeGsdcBMNgEdIMvN6VuYQybs64p9mqrfECBYxO1FWHbUG-2On1IpowybEsRRUjZfp0jFuEYjmezLQ3

我花了两天时间试图找出问题所在，但我看不到。

此外，我找不到任何合适的文档和示例。

我只是想收到一个令牌。

1.  我是否以正确的方式签署字节？
2.  声明集中的“范围”参数应该是什么样的？我试过“ [https://www.googleapis.com/auth/devstorage.readonly](https://www.googleapis.com/auth/devstorage.readonly) ”和“ [https://www.googleapis.com/auth/prediction](https://www.googleapis.com/auth/prediction) ”。
3.  “iss”参数应该等于什么？客户 ID 或电子邮件地址？（都试过了）
4.  有什么方法可以找出我的错误？
5.  是否有任何用于服务应用程序的 C# 库（不适用于已安装的应用程序或客户端登录）？

我快疯了......它必须工作，但它没有...... :-/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T22:32:54.717

解决方案是在请求代码中所有斜杠都必须反斜杠

错误的：

```
"scope":"https://www.googleapis.com/auth/prediction",
"aud":"https://accounts.google.com/o/oauth2/token", 
```

正确的：

```
"scope":"https:\\/\\/www.googleapis.com\\/auth\\/prediction",
"aud":"https:\\/\\/accounts.google.com\\/o\\/oauth2\\/token", 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-11T09:32:22.950

尝试使用[system.identitymodel.tokens.jwt](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.jwtsecuritytokenhandler(v=vs.114).aspx) .Net 库您可以从 NuGet 安装它。请参阅我的帖子中的示例（我用它来验证 websockets 服务器，但 JWT 处理是通用的）

[http://mydevtricks.blogspot.co.il/2014/10/xsocketsnet-authentication-with-jwt.html](http://mydevtricks.blogspot.co.il/2014/10/xsocketsnet-authentication-with-jwt.html)

# php - PHP mySQL 查询中的错误无法追踪

> ID：11126444
> 
> 赞同：-1
> 
> 时间：2012-06-20T19:05:47.767
> 
> 标签：php, mysql, mysql-error-1064

下面的代码执行得很好，但是在某个地方出现了一个产生错误消息的 mySQL 错误。

```
 $sql = mysql_query("UPDATE users SET password = $user_pwd WHERE email = '$user_email' AND authkey = '$user_authkey'");

 if(!mysql_query($sql,$config_connect))
 {
      echo $error .= 'The reset key did not match or has expired';
 }
 else
 {
      $approve = 1;
      $command .= '<div>Your password has been reset.</div>';
 } 
```

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“1”附近使用正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:24:37.183

我希望你`mysql_real_escape_string`在代码中的某个地方使用。此外，虽然与问题没有直接关系，但不鼓励使用 mysql 扩展。如果您不维护遗留代码，您应该切换到[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)或[mysqli](http://www.php.net/manual/en/book.mysqli.php)。

我会像这样重写它，然后您可以打印 $sql 并自己运行它以更好地了解出了什么问题（注意密码周围的引号）。

```
$sql = sprintf("UPDATE users SET `password`='%s' WHERE email='%s' AND authkey = '%s'", $user_pwd, $user_email, $user_authkey);
$result = mysql_query($sql,$config_connect);

if (!$result) {
    echo $error .= 'The reset key did not match or has expired';
} else { 
    $approve = 1;
    $command .= '<div>Your password has been reset.</div>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:24:52.203

密码是 MySQL 中的受限关键字，请在查询中引用它。

这：

```
$sql = mysql_query("UPDATE users SET password = $user_pwd WHERE email = '$user_email' AND authkey = '$user_authkey'"); 
```

应该：

```
$sql = mysql_query("UPDATE users SET `password` = '$user_pwd' WHERE email = '$user_email' AND authkey = '$user_authkey'"); 
```

除非您在 $user_pwd 中传递引号，否则您还需要在查询中引用该字符串。

如果可能的话，请更改数据库中的该字段名称，以免将来进行一些噩梦般的调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:09:17.500

你应该引用 $user_pwd : '$user_pwd'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:11:02.237

也许我找到了。

对 $user_pwd > '$user_pwd' 使用撇号

我会在 sql 编辑器上试试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T19:12:46.387

```
$sql = mysql_query("UPDATE users SET password = '$user_pwd' WHERE email = '$user_email' AND authkey = '$user_authkey'"); 
```

您应该将 $user_pwd 放在引号中，因为密码必须是字符串字段，并且查询正在尝试为该字段分配整数值，这就是引发语法错误的原因。试试这个修改。

# ruby-on-rails-3 - rails 3 复杂的 url，有害还是无害？能修好吗？

> ID：11126451
> 
> 赞同：0
> 
> 时间：2012-06-20T19:06:19.640
> 
> 标签：ruby-on-rails-3, url, params

以下 url 在我的 rails 应用程序中形成，

```
 "http://example.com/filter/filters?binding_id=1>1&escape=false&filter_type=publisher_id&from_pagination=0&genre_id=0>57&order=3&page=8&publisher_id=3>160&query=books&search_case=products&sub_category_id=1&tree_filter_id=115&utf8=%E2%9C%93&view_name=generic2d4e4c5333133cd814a2cb102571e4dc" 
```

**这个可以吗？**

如果我更改上述 URL 中的任何一个参数，代码会因错误而崩溃，这是合理的，因为“过滤器”控制器的“过滤器”操作需要“参数”哈希中的所有这些。

**这样好吗。。有没有办法处理这个？**

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:37:54.247

我可能错了，但看起来您试图在 URL 中传递太多参数。

看起来您正在使用 HTTP GET 将数据传递给您的控制器，而不是 HTTP POST。

使用 POST，您可以使用 HTML 表单将数据传递给控制器​​，并且您的 url 会更清晰。

# java - 播放框架：意外异常 [PersistenceException：EntityManager 没有持久性提供程序

> ID：11126455
> 
> 赞同：2
> 
> 时间：2012-06-20T19:06:27.883
> 
> 标签：java, sql, hibernate, jpa, playframework

我得到了例外

```
play.api.UnexpectedException: Unexpected exception [PersistenceException: No Persistence provider for EntityManager named defaultPersistenceUnit]
at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:134) ~[play_2.9.1.jar:2.0.1]
at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0.1]
at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0.1]
at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.1]
at scala.Either$RightProjection.flatMap(Either.scala:277) ~[scala-library.jar:0.11.2]
at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.1]
at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.1]
at akka.dispatch.Future$$anon$3.liftedTree1$1(Future.scala:195) ~[akka-actor.jar:2.0.1]
at akka.dispatch.Future$$anon$3.run(Future.scala:194) ~[akka-actor.jar:2.0.1]
at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:83) ~[akka-actor.jar:2.0.1]
at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381) ~[akka-actor.jar:2.0.1]
at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259) ~[akka-actor.jar:2.0.1]
at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:974) ~[akka-actor.jar:2.0.1]
at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1478) ~[akka-actor.jar:2.0.1]
at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) ~[akka-actor.jar:2.0.1]
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named defaultPersistenceUnit
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69) ~[hibernate-jpa-2.0-api.jar:1.0.1.Final]
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47) ~[hibernate-jpa-2.0-api.jar:1.0.1.Final]
at play.db.jpa.JPAPlugin.onStart(JPAPlugin.java:35) ~[play_2.9.1.jar:2.0.1]
at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.1]
at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.1]
at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.2]
at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.2]
at play.api.Play$.start(Play.scala:60) ~[play_2.9.1.jar:2.0.1]
at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:125) ~[play_2.9.1.jar:2.0.1]
... 15 common frames omitted 
```

我在文件夹 conf/META-INF 中定义了我的 persistence.xml 这是我的代码

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
         version="2.0">
<persistence-unit name="defaultPersistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
<exclude-unlisted-classes>false</exclude-unlisted-classes> 
    <properties>
<property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect"/>
    </properties>
</persistence-unit>
</persistence> 
```

最后是我的 application.conf

```
#Database Configuration
db.default.driver=net.sourceforge.jtds.jdbc.Driver
db.default.url="jdbc:jtds:sqlserver://server3;DatabaseName=SANDBOX"
db.default.user=private
db.default.pass=private
db.default.jndiName=DefaultDS
# JPA Configuration
jpa.default=defaultPersistenceUnit 
```

我一直在疯狂地试图找出问题所在。任何见解或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:17:47.563

您需要在`persistence-unit`节点下添加以下行：

```
<non-jta-data-source>DefaultDS</non-jta-data-source> 
```

# java - 从字符串中删除除特殊单词外的所有内容

> ID：11126458
> 
> 赞同：1
> 
> 时间：2012-06-20T19:06:53.570
> 
> 标签：java, string

假设我有一个这样的字符串：

```
String test = "hfikoebndolahsdHEL123LOkjahhsdqhuihs"; 
```

然后我想删除除“HEL123LO”之外的所有内容，但该数字可能类似于 653，无论如何它都不会删除它。那可能吗？

我希望你能理解我！

提前致谢。

（抱歉英语不好）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T19:08:52.137

使用[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)正确的正则表达式的方法。

```
test = test.replaceAll(".*(HEL\\d{3}LO).*", "$1"); 
```

此正则表达式匹配整个输入并将其替换为匹配的组（组号 1）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T19:13:37.867

如果您`String`将属于您提到的那种类型，`"hfikoebndolahsdHEL123LOkjahhsdqhuihs"`并且只是数字之间的变化，并且您想要保留`HEL123LO`并且其余字母与您的示例中的那种类型相同，那么您可以做一个简单的子字符串. 我知道这可能不是最好的解决方案，而只是提出一个替代方案。

```
test = test.substring(test.indexOf("H"),(test.lastIndexOf("O")+1)); 
```

# c++ - 编写 C++ SOAP（多线程）客户端应用程序 - 没有 gSOAP

> ID：11126459
> 
> 赞同：5
> 
> 时间：2012-06-20T19:07:00.860
> 
> 标签：c++, linux, soap, https, betfair

我正在编写一个多线程 C++ (Linux) SOAP 客户端来与 Betfair API 交互。我最初试图掌握 gSOAP，但我根本无法使用多个 WSDL 文件使其正常工作，因此我暂时放弃了它。我已经实现了我自己的类，用于使用 RapidXML 存储数据和解析/生成 XML——我唯一要寻求建议的是 HTTPS 传输方面的用途。我已经使用 OpenSSL 和 libcurl 实现了一些初始测试应用程序，这些工作正常，但是我在多线程方面遇到了一些问题，它们比 C++ 更多，老实说，我正在寻找一些更新的东西。所以我的问题是——如果我要从头开始重写，那么处理 HTTPS 传输的最佳工具是什么。

1.  OpenSSL（已实现）
2.  libcurl（已实现）
3.  boost::asio 库（没有尝试过，因为我还没有涉足 Boost）
4.  尝试使用套接字编程自己完成所有操作（不热衷于这种方法）
5.  只需尝试使用 gSOAP 并在网络上搜索使其工作的方法即可。
6.  完全不同的东西，我还没有遇到过。

所以基本上，鉴于上述情况，有人会建议在可靠的性能和最小的多线程问题方面使用什么最佳方法？或者有没有人有任何上述任何表现不佳的经验，并会劝阻我不要使用它？？？任何建议和意见将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T00:52:54.253

如果您担心性能，根据我的经验， boost::asio 的扩展性非常好，尤其是在大型多线程项目中。但是请注意 boost::asio 是一个非常低级的面向套接字的库，因此您必须深入研究它；有一些带有 boost::asio 的 HTTPS 很好的例子，例如[this](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/example/ssl/server.cpp)。我会拒绝你自己动手的套接字想法，因为这正是 boost::asio 提供的。

我个人还没有使用过 libcurl，但是 OpenSSL 提供了一个相当高级的 API，应该可以涵盖你需要的一切；但是，您将以性能为代价购买便利。在大多数情况下，性能不足是微不足道的，因此可以忽略不计，但这取决于您的应用程序。

gSOAP 非常适合客户端的 SOAP 请求，但老实说，服务器端的支持相当少，您必须进行大量调整才能在多线程应用程序中支持多个 WSDL 文件。我个人也会投票反对这样做。

总之，如果你想最大化性能并且对套接字感到舒适，我会使用 boost::asio，如果方便和快速开发具有更高的优先级，我会使用 OpenSSL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:26:51.087

[我已经使用Poco](http://pocoproject.org/)库编写了自己的客户端。它包含为此目的所需的一切。

*   XML 解析器（支持 DOM 和 SAX API）；
*   HTTP 和 HTTPS 客户端。

# python - Django - 异常处理

> ID：11126461
> 
> 赞同：2
> 
> 时间：2012-06-20T19:07:09.417
> 
> 标签：python, django

我在 Django 中有这个错误页面。

```
Exception Type: IndexError
Exception Value: list index out of range
Exception Location: /home/nirmal/try/portfolio/views.py in vimeo_authorize, line 52 
```

我需要的是我只想在我的观点中排除这个错误。我试过这样：

```
try:
       .........
except IndexError:
       ......... 
```

但它不起作用。谁能给我正确的代码？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T19:18:31.283

该代码是正确的。你把它放在错误的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:19:41.897

“列表索引超出范围”错误在 Python 中非常基本，异常处理也是如此，您应该参考以下文档：

*   [http://docs.python.org](http://docs.python.org)
*   [http://docs.python.org/library/stdtypes.html#iterator-types](http://docs.python.org/library/stdtypes.html#iterator-types)
*   [http://docs.python.org/library/exceptions.html](http://docs.python.org/library/exceptions.html)

在任何情况下，“列表索引超出范围”错误意味着您正在尝试获取不存在的可迭代对象的特定索引，例如以下代码：

```
mylist = [1,2,3,4]
print mylist[57] 
```

...会抛出该错误，因为只创建了索引 0 - 3，而我正在尝试访问 57。要处理此异常，您可以执行以下操作：

```
try:
    item = mylist[57]
except IndexError:
    # Do some other stuff if we don't find the index we want...
    item = None 
```

# php - PHP彗星睡眠阻止apache mpm？

> ID：11126465
> 
> 赞同：2
> 
> 时间：2012-06-20T19:07:21.297
> 
> 标签：php, postgresql, pdo, comet

我有一颗彗星，我以这种方式运行一个while循环

```
$items = $statement->fetchAll();//statement is a PDO Statement
$iteration = 0;
while(count($items) == 0 && $iteration < 100){
    $items = $statement->fetchAll();
    usleep(10000);
    ++$iteration;
} 
```

当彗星运行时，我可以看到所有其他 HTTP 请求都处于待处理状态。甚至非数据库请求也处于待处理状态。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:54:13.310

您需要手动提交使用`PDO::commit`，因为请求被保留在事务中。

请参阅有关此行为的文档：

[http://www.php.net/manual/de/pdo.commit.php](http://www.php.net/manual/de/pdo.commit.php)

[http://www.php.net/manual/en/pdo.transactions.php](http://www.php.net/manual/en/pdo.transactions.php)

# html - 出现在固定标题后面的内容

> ID：11126482
> 
> 赞同：7
> 
> 时间：2012-06-20T19:08:24.757
> 
> 标签：html, header, position, fixed

我修复了网站的标题部分，但页面的第一个 div 出现在标题后面；而不是从标题的末尾开始。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T00:01:48.227

当您应用`position: fixed`或`position: absolute`从文档流中删除元素时，之后的元素将其视为不存在。这就是你`div`跳起来的原因。要解决这个问题，请应用`margin-top`等于您的标题高度的 - [http://jsfiddle.net/2xjES/](http://jsfiddle.net/2xjES/)

# html - 侧边栏未到达内容 div 的底部

> ID：11126488
> 
> 赞同：2
> 
> 时间：2012-06-20T19:08:39.977
> 
> 标签：html, css, height, sidebar

我有一个叫做`content`div 的 div 里面有一个叫做`sidebar`. 我希望侧边栏伸展到`content`div 的底部，但事实并非如此。这是相关的标记和CSS：

```
<div id="content">
    <div id="sidebar">
        <ul>
            <li><a href="/register">Register</a></li>
            <li><a href="/login">Login</a></li>
            <li><a href="/forgotpass">Forgotten password</a></li>
        </ul>
    </div>
    <form action="login" method="post" id="main-form">
        <p class="p-username">
            <label for="username">Username</label>
            <?php echo form_error('username'); ?>
            <input original-title="Alphanumeric characters, underscores and dashes" type="text" name="username" value="<?php echo set_value('username') ?>">
        </p>
        <p class="p-password">
            <label for="password">Password</label>
            <?php if(isset($error)): ?>
                <span class="error"><?php echo $error ?></span>
            <?php else: ?>
                <?php echo form_error('password'); ?>
            <?php endif; ?>
            <input original-title="Please choose a strong password" type="password" name="password">
        </p>
        <p>
            <input type="submit" class="primary-button" value="Log in">
        </p>
    </form>
    <div class="clear"></div>
</div> 
```

CSS：

```
#content {
    width: 960px;
    border: 1px solid #e7e7e7;
    margin-top: 10px;
    border-radius: 5px;
}

#sidebar {
    width: 250px;
    background: #f5f8fa;
    float: left;
    height: 100%;
    border-right: 1px solid #e0eefb;
    box-shadow: inset -5px 0px 4px -2px #e8f1f9;
    margin-right: 10px;
}

#sidebar ul {
    margin:; 0;
    padding: 0;
    list-style-type: none;
}

#sidebar ul li {
    line-height: 40px;
}

#sidebar ul li a {
    display: block;
    width: inherit;
    padding-left: 20px;
    text-decoration: none;
    font-size: 16px;
} 
```

还有一个 jsFiddle 链接：http: [//jsfiddle.net/QXfH3/](http://jsfiddle.net/QXfH3/)

如您所见，侧边栏在最后一个列表项之后停止。我希望它延伸到`content`div 的底部。我认为添加`height: 100%`会做到这一点，但显然不是。`height: inherit`什么也不做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:14:50.657

你错过了：

```
.clear {clear:both} 
```

高度继承自父元素，因此您需要添加：

```
body, html {height:100% } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:37:11.340

您必须为容器 div 指定一个高度，在本例中为 #content。如果不是高度 100% 没有意义。 [http://jsfiddle.net/fS8TB/1/](http://jsfiddle.net/fS8TB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:44:21.213

您正在寻找的是固定流体布局。不幸的是，在没有指定绝对高度的情况下，纯 CSS 中的事情可能会有些棘手，因此 a`<table>`可能是您最好的选择。否则，看这里...

[小提琴演示固定流体布局](http://jsfiddle.net/eHGBX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T21:40:27.930

实现此目的的一种方法是设置背景图像，`#content`用于`#sidebar`：

```
#content {
    background: url(data:image/png;base64,[BASE64-DATA]) repeat-y; /* background-image for #sidebar */
} 
```

删除`background`,`border-right`并`box-shadow`从`#sidebar`:

```
#sidebar {
    width: 250px;
    /* background: #f5f8fa; */
    float: left;
    height: 100%;
    /* border-right: 1px solid #e0eefb;
    box-shadow: inset -5px 0px 4px -2px #e8f1f9; */
    margin-right: 10px;
} 
```

并将右列的全部内容包装到一个`div`（在本例中`#right`）并应用此样式：#right { display: inline-block }

这样，您就不必关心您在其中放入了多少内容；）

**现场演示**：http: [//jsfiddle.net/QXfH3/5/](http://jsfiddle.net/QXfH3/5/)

*If you don't want to use images, to get this illusion, the [answer from Alvaro](https://stackoverflow.com/questions/11126488/sidebar-not-reaching-to-bottom-of-content-div#11126922) seems to be the best way*

# java - Java OpenGL 只绘制一种颜色而不是图像中的所有颜色

> ID：11126489
> 
> 赞同：0
> 
> 时间：2012-06-20T19:08:41.013
> 
> 标签：java, image, opengl

我正在尝试在窗户上画一幅画，但它只画了一种颜色。

我的代码发布在下面。

纹理管理器：-

```
package oregon.src;

import oregon.client.*;

import java.io.*;
import java.util.*;

import org.newdawn.slick.opengl.*;

public class TextureManager {
    private static HashMap<String, Texture> textures = new HashMap<String, Texture>();

    public static Oregon oregon = new Oregon();

    public static boolean loadTexture(String path, String name) {
        Texture texture = null;

        try {
            if ((texture = TextureLoader.getTexture("PNG", new FileInputStream(path))) != null) {
                textures.put(name, texture);

                return true;
            }
        } catch (FileNotFoundException e) {
            oregon.stop(e);
        } catch (IOException e1) {
            oregon.stop(e1);
        }

        return false;
    }

    public static Texture getTexture(String name) {
        if (textures.containsKey(name)) {
            return textures.get(name);
        }

        return null;
    }
} 
```

画：-

```
package oregon.src;

import static org.lwjgl.opengl.GL11.*;

public class Draw {
    public static Settings settings = new Settings();

    public static void renderBlock(String path, String name, int coord1, int coord2) {
        if (settings.testing) {
            path = settings.pathWhilstTesting + path;
        } else if (!settings.testing) {
            path = settings.pathWhilstUsing + path;
        }

        TextureManager.loadTexture(path, name);

        glBindTexture(GL_TEXTURE_2D, TextureManager.getTexture(name).getTextureID());
        glBegin(GL_QUADS);
            glVertex2i(coord1, coord1);
            glVertex2i(coord1, coord2);
            glVertex2i(coord2, coord2);
            glVertex2i(coord2, coord1);
        glEnd();
    }
} 
```

在你问之前，我没有收到任何错误，代码很好，只是图像。:D

**编辑：-**我无法添加图片！:'(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:13:59.500

您需要首先启用纹理使用

```
 glEnable(GL_TEXTURE_2D) 
```

另外:)，您没有为 OpenGL 提供纹理坐标（请参阅此处的[纹理](http://en.wikipedia.org/wiki/Texture_mapping#Texture_mapping)）。您的绘图调用应如下所示：

```
 glBegin(GL_QUADS);
        glTexcoord2f(0, 0);
        glVertex2i(coord1, coord1);

        glTexcoord2f(0, 1);
        glVertex2i(coord1, coord2);

        glTexcoord2f(1, 1);
        glVertex2i(coord2, coord2);

        glTexcoord2f(1, 0);
        glVertex2i(coord2, coord1);
    glEnd(); 
```

希望这可以帮助。

# c++ - 在内联函数中访问静态全局变量

> ID：11126496
> 
> 赞同：6
> 
> 时间：2012-06-20T19:09:02.980
> 
> 标签：c++, gcc

我遇到了一个奇怪的问题，我将其范围缩小到以下测试用例：

inl.h:

```
inline const char *fn() { return id; } 
```

抄送：

```
#include <stdio.h>

static const char *id = "This is A";

#include "inl.h"

void A()
{
    printf("In A we get: %s\n", fn());
} 
```

抄送：

```
#include <stdio.h>

static const char *id = "This is B";

#include "inl.h"

void B()
{
    printf("In B we get: %s\n", fn());
}

extern void A();

int main()
{
    A();
    B();
    return 0;
} 
```

现在，当我用它编译它时，`g++ -O1 a.cc b.cc`它似乎可以正常工作。我得到：

```
In A we get: This is A
In B we get: This is B 
```

但如果我编译`g++ -O0 a.cc b.cc`我得到：

```
In A we get: This is A
In B we get: This is A 
```

请注意，我实际上是在这里尝试使用 C11 语义，但我使用的是 g++，因为 gcc 还不支持 C11。

现在据我所见，同时查看 C11 规范和 C++ 规范（C++11 和更早的规范——内联和静态全局变量的语义似乎没有改变），它应该做我想要的，使用失败`-O0`是gcc中的一个错误。

这是正确的，还是我在规范中缺少某些东西会导致这种未定义的行为？

**编辑**

常见的答案似乎声称`fn`需要声明`static`它才能工作。但根据 C99 规范的 6.7.4.6（C11 规范中的 6.7.4.7——不确定 C++ 规范）：

> 如果翻译单元中函数的所有文件范围声明都包含不带 extern 的内联函数说明符，则该翻译单元中的定义是内联定义。内联定义不为函数提供外部定义，也不禁止在另一个翻译单元中进行外部定义。

所以由于这里没有明确的`extern`，这些应该是两个独立的内联函数，彼此没有交互。不需要明确`static`的。

使用显式静态解决了 C 的问题，但不适用于 C++ 内联成员函数，因为`static`在这种情况下关键字具有完全不同的含义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T19:12:30.770

您违反了单一定义规则。非静态函数`fn`在两个翻译单元中的定义不同。一个与*a.cc*`id`中定义的变量绑定，而另一个与*b.cc*中的变量绑定。这些定义在*文本上*是相同的，但这不足以满足单一定义规则，即使为声明的函数设置了例外，所以你会得到未定义的行为。*`id`**`inline`***

 ***您使用的是 C++ 编译器，而不是 C 编译器，因此 C11 所说的任何内容都与您的 C++ 程序表现出的行为无关。在 C++11 中，标准（第 3.2/5 节）似乎说明了关于如何`fn`引用的规则`id`（强调和省略我的）：

> 如果每个定义出现在不同的翻译单元中，并且定义满足以下要求，则程序中可以有多个定义……具有外部链接的内联函数（7.1.2）……。给定这样一个`D`在多个翻译单元中定义的实体，那么
> 
> *   的每个定义`D`应由相同的标记序列组成；和
> *   在 的每个定义中`D`，根据 3.4 查找的相应名称**应指在 的定义中定义的实体`D`，或应指同一实体**，在重载决议 (13.3) 和部分模板特化 (14.8.3) 匹配之后)，但`const` 如果对象在 的所有定义中具有相同的文字类型`D`，并且该对象使用常量表达式 (5.19) 初始化，并且值（但不是地址) 被使用，并且该**对象在 的所有定义** 中具有相同的值`D`；和
> *   …

您的 的定义`fn`由相同的标记序列组成，但它们指的`id`是未在 中定义的`D`，在两个翻译单元中不是相同的实体，并且在所有定义中都没有相同的值。我在 C++ 标准中没有看到内联函数隐式获取内部链接的规定。C++11 §7.1.1/7 说：

> *在没有存储类说明符*的命名空间范围内声明的名称具有外部链接，除非它由于先前的声明而具有内部链接并且如果它没有被声明`const`。

如果您在某些优化级别或某些编译器的某些版本中获得了预期的行为，那么您只是得到了特别邪恶的未定义行为版本，尽管出现了错误，但事情似乎仍然有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:33:24.297

因为`fn()`未声明`static`，正如@RobKennedy 指出的那样，您正在冒险进入UB 领域。在这种特定情况下，`-O0`可能会禁用内联，这意味着将保留一个发出的函数的非内联版本，而另一个将被丢弃，并且两个调用都将针对一个非内联版本。是否始终保留 A 版本可能取决于您在命令行上指定文件的顺序，或其他任何事情。`-O1`可能包括内联，在这种情况下，即使发出函数的非内联副本，这两个调用仍可能是内联的，这会给出（错误的）预期结果。***

# web-services - Grails CXF Web 服务，包括 WSDL 中的所有方法

> ID：11126499
> 
> 赞同：0
> 
> 时间：2012-06-20T19:09:18.690
> 
> 标签：web-services, grails, cxf

我正在尝试使用 CXF 插件在 Grails 中实现 SOAP Web 服务。我的服务类很简单。

```
package com.ld.api

import com.ld.domain.*
import javax.jws.*
import grails.converters.XML

class CabinetService {

    static transactional = true
    static expose=['cxf']
    String getCabinetList() {

        String list = Cabinet.list()

        //return list as XML

        return "jim"

    }

    def serviceMethod() {
        println "IN serviceMethod"
        "Hello...."
    }

} 
```

我得到了这个 WSDL：

```
<wsdl:definitions name="CabinetService" targetNamespace="http://api.ld.com/"><wsdl:types><xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://api.ld.com/"><xsd:element name="serviceMethod" type="tns:serviceMethod"/><xsd:complexType name="serviceMethod"><xsd:sequence/></xsd:complexType><xsd:element name="serviceMethodResponse" type="tns:serviceMethodResponse"/><xsd:complexType name="serviceMethodResponse"><xsd:sequence><xsd:element minOccurs="0" name="return" type="xsd:anyType"/></xsd:sequence></xsd:complexType></xsd:schema></wsdl:types><wsdl:message name="serviceMethodResponse"><wsdl:part element="tns:serviceMethodResponse" name="parameters">
    </wsdl:part></wsdl:message><wsdl:message name="serviceMethod"><wsdl:part element="tns:serviceMethod" name="parameters">
    </wsdl:part></wsdl:message><wsdl:portType name="CabinetServicePortType"><wsdl:operation name="serviceMethod"><wsdl:input message="tns:serviceMethod" name="serviceMethod">
    </wsdl:input><wsdl:output message="tns:serviceMethodResponse" name="serviceMethodResponse">
    </wsdl:output></wsdl:operation></wsdl:portType><wsdl:binding name="CabinetServiceSoapBinding" type="tns:CabinetServicePortType"><soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/><wsdl:operation name="serviceMethod"><soap:operation soapAction="" style="document"/><wsdl:input name="serviceMethod"><soap:body use="literal"/></wsdl:input><wsdl:output name="serviceMethodResponse"><soap:body use="literal"/></wsdl:output></wsdl:operation></wsdl:binding><wsdl:service name="CabinetService"><wsdl:port binding="tns:CabinetServiceSoapBinding" name="CabinetServicePort"><soap:address location="http://localhost:8080/LucanDOCS2013/services/cabinet"/></wsdl:port></wsdl:service></wsdl:definitions> 
```

自动生成的“serviceMethod”包含在 WSDL 中，但不包含 getCabinetList()。我尝试了各种注释组合，但没有运气。

我在 grails 2.0.3 和插件的 0.9.0 版本上。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:50:33.700

只有用“def”定义的方法在 WSDL 中可见，getCabinetList() 会丢失它

也可以使用： static expose = [ 'cxfjax' ] ... 查看最新的插件文档。

我也在导出的方法中使用它：

```
@WebMethod( operationName="createUpdateUser" )
@WebResult( name="result" )
def ResultDTO createUpdateUser( @WebParam( name="authorizationCode" ) String a uthorizationCode,
                                @WebParam( name="username" ) String username ) ) { ... } 
```

另外不要忘记对类进行注释，您正在通过服务进行传输，或者您最终会得到没有参数和数据类型的 WSDL：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class ResultDTO {
    int code;
    String message;
} 
```

# javascript - HTML5 Canvas 对比过滤器

> ID：11126503
> 
> 赞同：2
> 
> 时间：2012-06-20T19:09:48.870
> 
> 标签：javascript, html, canvas, filter, contrast

如何使用 HTML5 Canvas 像素操作功能调整图像的对比度？我已经很容易成功地改变了图像的亮度，但对比度似乎有点复杂。

有谁知道我可以遵循的算法，或者我可以从中获取想法的示例 javascript 代码？

提前感谢您提供有关此问题的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:14:20.947

既然你说你已经调整了亮度，听起来你只需要调整对比度的算法，这里有一个 C# 方法的线程（查看更新 2），代码的逻辑是合理的，并且可以在任何程序中工作：

[有效地调整 C# 中图像的对比度 - 代码日志](https://stackoverflow.com/a/3115178/1217408)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-27T09:11:31.387

我将发布所有过滤器的演示。您可以通过 id 或 class 在画布上轻松使用它。但问题是你不能用画布渲染它意味着你不保存或预览。因为画布不能渲染样式。

代码

```
<!-- canvas -->
<html>
<head>
<style>
img {
    width: 33%;
    height: auto;
    float: left;
}
.origional {filter:none;}
.blur {-webkit-filter: blur(4px);filter: blur(4px);}
.brightness {-webkit-filter: brightness(0.30);filter: brightness(0.30);}
.contrast {-webkit-filter: contrast(180%);filter: contrast(180%);}
.grayscale {-webkit-filter: grayscale(100%);filter: grayscale(100%);}
.huerotate {-webkit-filter: hue-rotate(180deg);filter: hue-rotate(180deg);}
.invert {-webkit-filter: invert(100%);filter: invert(100%);}
.opacity {-webkit-filter: opacity(50%);filter: opacity(50%);}
.saturate {-webkit-filter: saturate(7); filter: saturate(7);}
.sepia {-webkit-filter: sepia(100%);filter: sepia(100%);}
.shadow {-webkit-filter: drop-shadow(8px 8px 10px green);filter: drop-shadow(8px 8px 10px green);}
</style>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
<script>
$( document ).ready(function() {
//origional canvas image
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var img = document.getElementById("origional");
   ctx.drawImage(img, 0, 0,300,300);

   $('#button').click(function() {
    canvas.classList.add("origional");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});

   $('#button1').click(function() {
    canvas.classList.add("blur");
    canvas.classList.remove("origional");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});

   $('#button2').click(function() {
    canvas.classList.add("brightness");
    canvas.classList.remove("blur");
    canvas.classList.remove("origional");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});
   $('#button3').click(function() {
    canvas.classList.add("contrast");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("origional");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});
   $('#button4').click(function() {
    canvas.classList.add("grayscale");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("origional");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});
   $('#button5').click(function() {
    canvas.classList.add("huerotate");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("origional");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});
   $('#button6').click(function() {
    canvas.classList.add("invert");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("origional");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});
   $('#button7').click(function() {
    canvas.classList.add("opacity");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("origional");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});
   $('#button8').click(function() {
    canvas.classList.add("saturate");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("origional");
    canvas.classList.remove("sepia");
    canvas.classList.remove("shadow");
});
   $('#button9').click(function() {
    canvas.classList.add("sapia");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("origional");
    canvas.classList.remove("shadow");
});
   $('#button10').click(function() {
    canvas.classList.add("shadow");
    canvas.classList.remove("blur");
    canvas.classList.remove("brightness");
    canvas.classList.remove("contrast");
    canvas.classList.remove("grayscale");
    canvas.classList.remove("huerotate");
    canvas.classList.remove("invert");
    canvas.classList.remove("opacity");
    canvas.classList.remove("saturate");
    canvas.classList.remove("sepia");
    canvas.classList.remove("origional");
});
});
</script>
</head>
<body>
<h1>
canvas
</h1>
<canvas id="canvas" width="300" height="300" ></canvas>
<br>
<div ><input type="button" id="button" value="origional" />
<input type="button" id="button1" value="blur" />
<input type="button" id="button2" value="brightness" /> 
<input type="button" id="button3" value="contrast" /> 
<input type="button" id="button4" value="grayscale" /> 
<input type="button" id="button5" value="huerotate" /> 
<input type="button" id="button6" value="invert" /> 
<input type="button" id="button7" value="opacity" /> 
<input type="button" id="button8" value="saturate" /> 
<input type="button" id="button9" value="sepia" /> 
<input type="button" id="button10" value="shadow" />  
</div>
<br>
<!-- image -->
<h1>
image
</h1>
<img id="origional" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img id="blur" class="blur" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="brightness" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="contrast" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="grayscale" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="huerotate" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="invert" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="opacity" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="saturate" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="sepia" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
<img class="shadow" src="https://lh5.googleusercontent.com/-bSF6HLBpWZU/AAAAAAAAAAI/AAAAAAAAABI/6UVYOKY6QhE/photo.jpg" alt="Pineapple" width="300" height="300">
</body>
</html> 
```

这里[现场演示](https://jsfiddle.net/dinesh93/5duLqnc2/20/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:12:48.173

查看[Pixastic](http://www.pixastic.com/)提供了大量出色的效果，您可以使用示例[编辑器](http://editor.pixastic.com/)来查看其中的一些功能。[Pixastic 亮度/对比度示例](http://www.pixastic.com/lib/docs/actions/brightness/)

这是我制作的对比鲜明的马里奥的演示。

**[现场演示](http://jsfiddle.net/loktar/AEqwu/)**

如果您不想使用整个库，还可以[查看对比方法](https://github.com/jseidelin/pixastic/blob/master/actions/brightness.js)的 pixastic github 源代码，了解它如何实现到您的代码中。

# android - 如何检测用户是否喜欢 Android 上的某个 Facebook 页面？

> ID：11126511
> 
> 赞同：2
> 
> 时间：2012-06-20T19:10:08.683
> 
> 标签：android, facebook, facebook-like

我知道当你喜欢他们的 Facebook 页面时，很多应用都会给你一些奖励。我想知道如何实现一个功能来检测用户是否喜欢 Android 上的 Facebook 页面。

* * *

到目前为止我的进展：我已经阅读了 Facebook 文档，并且知道它与带有 facebook.com/userid/likes/facebook_page_id 之类的 URL 的 HTML GET 有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:00:53.710

## 脸书和Java

我们为在 Java 上运行的网站做了类似的事情，您可能想尝试这个 Facebook Graph API Java 实现[http://restfb.com/](http://restfb.com/)

这使得这些事情变得非常容易...... [http://restfb.com/#fetching-single-objects](http://restfb.com/#fetching-single-objects)

最好的部分：它是开源的！（麻省理工学院许可证）

# jquery - 为标签制作下一个、上一个链接

> ID：11126514
> 
> 赞同：1
> 
> 时间：2012-06-20T19:10:16.980
> 
> 标签：jquery

我有一个 jQuery 选项卡，这是我的代码：

```
$(document).ready(function() {
    //When page loads...
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content

        var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active ID content
        return false;
    });
});​ 
```

我如何获得标签的下一个和上一个链接？

这是我的 HTML 代码：

```
<ul class="tabs">
    <li>
        <a href="#tab1">Tab1</a>
    </li>
    <li>
        <a href="#tab2">Tab2</a>
    </li>
    <li>
        <a href="#tab3">Tab3</a>
    </li>
</ul>
<div class="tab_container">
    <div id="tab1" class="tab_content">Content 1</div>
    <div id="tab2" class="tab_content">Content 2</div>
    <div id="tab3" class="tab_content">Content 3</div>
</div>​ 
```

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:00:14.133

这是“下一步”链接的快速草稿：

```
$('#next').click(function() {
    var activeTab = $('.tab_container div.tab_content:visible');
    var nextTab = activeTab.next();
    if(nextTab.length) {
        activeTab.hide();
        nextTab.show();
    }
}); 
```

对于“上一个”链接，只需更改`next()`（`prev()`并`$('#next')`相应更改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:39:34.743

参考**[现场演示](http://jsfiddle.net/SivaCharan/fZKJ3/)**

我已将 CSS 类额外应用于您的 JQuery 和 HTML，如下所示：-

```
ul.tab li {
    display: none;
}
.active {
    display: block;
} 
```

似乎工作正常。再检查一次。

# android - 显示不同屏幕尺寸android的位图

> ID：11126515
> 
> 赞同：0
> 
> 时间：2012-06-20T19:10:21.583
> 
> 标签：android, bitmap

*   我有一个 ListView，每一行都有一个 ImageView。

*   这些图像在单独的线程中下载，然后附加到 UI 线程中的 ImageViews。

*   我正在下载的图像是 92 X 136 像素。我使用 BitmapFactory 将这些图像缩小到 50 X 100 像素。

*   我希望这些图像在不同的屏幕尺寸上看起来大小相同。我知道在密度较高的屏幕上，这些图像看起来更小，而在密度较低的屏幕上，它们看起来更大。

*   通常我们会将这些图像放在 mdpi、hdpi 等文件夹中，但在这种情况下，图像是动态下载并以编程方式缩放的。

    有人可以指出我应该做什么的正确方向。我不需要任何代码......只是一些算法应该做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:33:36.383

一种方法是像这样在 DP 中扩展：

```
int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, <HEIGHT>, getResources().getDisplayMetrics()); 
```

另一种方法是在 dp 中硬编码 imageView 上的尺寸或在获取屏幕指标并计算要填充的宽度/高度的某个百分比后以编程方式分配其高度宽度（尽管我认为仅在布局中使用固定 dp 就足够了，如果需要，您可以使用值/尺寸来标记视图的大小）。并为 imageView 分配一个类似`fitXY`或的 scaleType`centerCrop`以填充整个内容区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:25:45.733

也许在文件夹中的 xml 中定义 ImageView 的大小以获得适当的密度，并在那里设置像 fitXY 这样的 scalingType 属性？

# twitter-bootstrap - Twitter 的 Bootstrap 手动控制崩溃 - div 没有隐藏

> ID：11126516
> 
> 赞同：0
> 
> 时间：2012-06-20T19:10:26.163
> 
> 标签：twitter-bootstrap, collapse

我想**在**每个可折叠元素中使用[Twitter 的 Bootstrap 折叠。](http://twitter.github.com/bootstrap/javascript.html#collapse) 但它不像我预期的那样工作 - 请参阅[演示](http://jsbin.com/exomaw/edit#preview)：

 **1.  当按下*搜索*按钮时它是好的，因为通过 javascript 手动控制：

    $("#myform").collapse('hide'); $("#search-results").collapse('show');

2.  当点击链接*显示搜索表单*时，我希望`myform`显示，但`search-results`隐藏，但它不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:39:42.423

您可以将此代码添加到您的**就绪**函数 中

```
 $("a").click(function(){
    $("#myform").collapse('show');
      $("#search-results").collapse('hide');
  }); 
```

这是一个工作示例：http: [//jsbin.com/upavon/1/edit](http://jsbin.com/upavon/1/edit)

谢谢**

# ios - if else 语句的变量范围

> ID：11126517
> 
> 赞同：0
> 
> 时间：2012-06-20T19:10:31.207
> 
> 标签：ios, variables, if-statement

这听起来可能不是很聪明，但我很难让这种方法发挥作用。我想使用 interstitialad 变量来存储在第一个条件下调用它的时间。然后当 callcount >=2 我想使用与以前相同的值。有人可以给我一些想法吗？

```
 -(void)timestamp{

       long now = [[NSDate date]timeIntervalSince1970]/1000;
        long interstitialad = 0.00;
        long finalad;

       if(Callcount ==1){
        interstitialad = [[NSDate date]timeIntervalSince1970]/1000;

       }

     else if (Callcount >= 2 && now - interstitialad >= 200){

     [self displayInterstitial];

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:15:38.740

首先，您必须了解，在 if else 中，每次调用时间戳时只会访问其中一个。如果您希望一次执行两项检查，请去掉 else 关键字。

如果您只想在整个类中保留 interstitialad 变量的值，只需将其从方法中移出，将其转换为实例变量，在您的界面中声明它并使用正确设置的属性保持对它的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:14:36.363

使其成为此代码所在类的实例变量，并使用该类的相同对象来处理所有`timestamp`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:14:39.490

在 if 语句（或 else 语句）中声明的变量在语句结束时超出范围。您必须在 if/else 语句之前声明变量，以使其值在语句之间保持不变。请注意，某些语言将绑定的 if/else 语句视为同一语句，而其他语言则不然。

# c++ - Random_shuffle 可以在没有的情况下运行 图书馆？

> ID：11126527
> 
> 赞同：1
> 
> 时间：2012-06-20T19:11:21.980
> 
> 标签：c++, random, vector, c++11

我写这个不包括，它运行成功。`srand`和是否`random_shuffle`在标准库中？是不是很奇怪？

[这里](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)和[这里](http://www.cplusplus.com/reference/algorithm/random_shuffle/)的链接说它们在算法库中。

```
#include <array>
#include <time.h>
#include <vector>
using namespace std;
    int main()                                          
    {
        vector<int> myvector;
        srand((unsigned)time(NULL));
        for (int i=0; i<10; ++i) 
            {myvector.push_back(i);}
        random_shuffle ( myvector.begin(), myvector.end() );
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T19:15:15.970

C++ 没有指定哪些标准头文件包含在其他标准头文件中，因此它因实现而异。为了便于移植，您需要确保始终直接包含您正在使用的标头，但代码通常会在没有它的情况下编译。这一点也不稀奇。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:19:11.143

许多编译器能够在命令行或设置中指定额外的包含文件。确保您没有自动包含这些标题。也检查makefile。

如果程序没有您正在调用的函数的原型，C++ 将不会编译该程序。

# math - 如何在自己的服务器上托管 Google Image Charts？

> ID：11126531
> 
> 赞同：2
> 
> 时间：2012-06-20T19:11:40.087
> 
> 标签：math, charts

[https://developers.google.com/chart/infographics/docs/formulas](https://developers.google.com/chart/infographics/docs/formulas)

图像图表已弃用。我找不到源头。使用 JS 的替代品似乎无法处理数学，这是我感兴趣的。是否有可用的资源来自己托管它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:19:21.737

没关系，找到更好的方法： http: [//www.mathjax.org/](http://www.mathjax.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-09T13:13:29.107

免责声明：我是 Image-Charts 的创始人。

为此，我为 Google Image Charts 构建了一个名为[**Image-Charts**](http://image-charts.com)的替代品。您可以将其托管在我们自己的服务器上或使用永久免费的 SaaS 版本。

# perl - Perl 错误：在 @INC 中找不到 XFileConfig.pm

> ID：11126536
> 
> 赞同：0
> 
> 时间：2012-06-20T19:11:55.543
> 
> 标签：perl, apache, centos, perl-module, mod-perl

我正在尝试在我的服务器中安装 Perl 脚本。当我收到服务器访问权限时。

我安装了 apache2，mod_perl，在 var/www/html 中激活了 mod_rewrite

当我尝试执行 install.cgi 时，出现以下错误：

```
[Wed Jun 20 21:09:36 2012] [error] Can't locate XFileConfig.pm in @INC (@INC contains: . /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi /usr/lib/perl5/5.8.8 /etc/httpd) at /var/www/cgi-bin/install.cgi line 4.\nBEGIN failed--compilation aborted at /var/www/cgi-bin/install.cgi line 4.\n 
```

我在 Centos 5, Perl v5.8.8 下

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:28:50.147

1.  确保您已安装 XFileSharing。
2.  找到安装 XFileSharing 的 lib 的路径。您可以使用以下命令找到 XFileConfig.pm

    ```
    updatedb
    locate XFileConfig.pm 
    ```

3.  在 perl 脚本顶部添加以下行。

    ```
    use lib '<path>'; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:10:19.977

检查模块是否已安装或未使用`perl -MModule::Name -e "print 'OK';"`

使用`cpan install Module::Name`.

添加`@INC`使用 httpd.conf的路径

`SetEnv PERL5LIB "/path/to/directory/containing/module"`.

`@INC`这会永久添加路径。

或者

`use lib '/path/to/directory/containing/module';`在使用该模块的 perl 脚本中。

这是一种临时方法，您必须在每个 perl 脚本中添加它。

或者

`perl -I/var/www/cgi-bin install.cgi`

`-I`用于在运行 install.cgi 时包含路径。

前任：

```
> perl -IC:\a\b -e "print @INC;"
C:\a\bC:/Perl/site/libC:/Perl/lib. 
```

# android - Android在片段中无法通过ID找到视图

> ID：11126538
> 
> 赞同：1
> 
> 时间：2012-06-20T19:12:02.323
> 
> 标签：android, android-fragments, findviewbyid

我在 xml (fragment_edit_text.xml) 的布局中有一个自定义的 EditText `MomentumEditText`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.frazerm.momentum.MomentumEditText
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/writing_edittext"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</RelativeLayout> 
```

我可以成功地在片段中膨胀和显示布局，但试图让`MomentumEditText`using`View.findViewById(R.id.writing_edittext)`返回 null。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    View root = inflater.inflate(R.layout.fragment_edit_text, container, true);
    MomentumEditText editText = (MomentumEditText) root.findViewById(R.id.writing_edittext);
} 
```

我也尝试从中获取 MomentumEditText `onStart()`，但它仍然返回 null。

**编辑**= 我尝试用普通的 EditText 替换 xml 中的自定义 EditText，并且 findViewById() 有效！这是 MomentumEditText：

```
package com.frazerm.momentum;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.MotionEvent;
import android.widget.EditText;

public class MomentumEditText extends EditText  {

boolean moveCursorDisabled = true;
boolean deleteCharsDisabled = true;

private static Paint linePaint;
private static Paint marginPaint;
MomentumEditText thisEditText = this;

Editable currentText;

public MomentumEditText(Context context, AttributeSet attrs) {
    super(context);

    setCursorVisible(true);
    this.setGravity(Gravity.TOP);
    TextWatcher inputTextWatcher = new TextWatcher() {
        CharSequence textToAdd = "";
        boolean charWasDeleted = false;
        public void beforeTextChanged(CharSequence s, int start, int count, int after)  {
            if (moveCursorDisabled) {
                if( count > after ) {
                    textToAdd = s.subSequence(start + after, start + count);
                    charWasDeleted = true;
                }
            }
        }

        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        @Override
        public void afterTextChanged(Editable s)    {
            if (moveCursorDisabled) {
                if (charWasDeleted == true) {
                    charWasDeleted = false;
                    s.append(textToAdd);
                }
                else    {
                    thisEditText.setSelection( thisEditText.getText().length() );
                }
            }
        }

    };
    this.addTextChangedListener(inputTextWatcher);

}

//disables ability to move the cursor to other parts of the text
@Override
public boolean onTouchEvent(MotionEvent event)
{
    if (deleteCharsDisabled)    {
        final float eventX = event.getX();
        if( getSelectionStart() != eventX )
        {
            super.onTouchEvent(event);
            thisEditText.setSelection( thisEditText.getText().length() );
            return true;
        }
        return super.onTouchEvent(event);
    }
    return super.onTouchEvent(event);
}

@Override
protected void onDraw(Canvas canvas) {
    linePaint = new Paint();
    linePaint.setColor(0x77777777);
    //linePaint.setStyle(Style.STROKE);

    marginPaint = new Paint();
    marginPaint.setColor(0x99FF4444);
    //marginPaint.setStyle(Style.STROKE);

    Rect bounds = new Rect();
    int firstLineY = getLineBounds(0, bounds);
    int lineHeight = getLineHeight();
    int totalLines = Math.max(getLineCount(), getHeight() / lineHeight);

    for (int i = 0; i < totalLines; i++) {
        int lineY = firstLineY + i * lineHeight + dip(2);
        canvas.drawLine(0, lineY, bounds.right, lineY, linePaint);
    }

    canvas.drawLine( (float) dip(64), (float) 0, (float) dip(64), getHeight(), marginPaint );

    super.onDraw(canvas);
    setPadding(dip(64), 0, 0, 0);
}

public void setCursorMoveAllowed(boolean allowed)   {
    moveCursorDisabled = !allowed;
    setCursorVisible(allowed);
    return;
}

public void setBackspaceAllowed(boolean allowed)    {
    deleteCharsDisabled = !allowed;
    return;
}

public boolean superTouchEvent(MotionEvent event)   {
    return super.onTouchEvent(event);
}

public int dip ( int dip )  {
    float d = this.getResources().getDisplayMetrics().density;
    int pixels = (int)(dip * d);        
    return pixels;

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:19:45.540

尝试将附加设置为root false，因为您是root！

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View root = inflater.inflate(R.layout.fragment_edit_text, container, false);

    MomentumEditText editText = (MomentumEditText) root.findViewById(R.id.writing_edittext);

    return root;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:58:55.950

因为您正在扩展当前视图，所以您需要覆盖所有可以使用的构造函数。尝试：

```
public class MomentumEditText extends EditText  {

    public MomentumEditText(Context context) {
        super(context);
        init();
    }

    public MomentumEditText(Context context, AttributeSet attrs) {
        super(context, attrs); // This is the constructor used by XML (you were missing the super call)
        init();
    }

    public MomentumEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defstyle);
        init();
    }

    private void init(){
         setCursorVisible(true);
         // your other code
    }
} 
```

参考： http: [//developer.android.com/reference/android/widget/EditText.html](http://developer.android.com/reference/android/widget/EditText.html)（公共构造函数）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:30:29.613

尝试将这行代码移到您的`onActivityCreated`方法中：

```
MomentumEditText editText = (MomentumEditText) findViewById(R.id.writing_edittext); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:23:02.007

我猜这`fragment_edit_text.xml`是您在问题中显示的布局文件？

如果是，请检查指定某些配置（如语言、密度等）的某些文件夹中是否没有其他同名布局。

例如，您可能有：

`/layout/fragment_edit_text.xml`

和

`/layout-land/fragment_edit_text.xml`

**但只有在`layout-land`目录**中有您的自定义视图，因此它可以编译，但是在纵向模式下您`findViewById`将返回`null`

# windows - 批处理图灵完成了吗？

> ID：11126539
> 
> 赞同：22
> 
> 时间：2012-06-20T19:12:05.240
> 
> 标签：windows, batch-file, dos

我找不到它是否是，我很好奇 - 如果它不符合条件，它缺乏什么功能来符合条件？我已经完成了相当多的批次，并且没有看到任何明显的能力失误。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-05-10T12:58:04.543

我刚刚通过批量创建brainfuck解释器“证明”批处理是图灵完整的（因为brainfuck被证明是图灵完整的）：

[https://github.com/yyny/Brainfuck-In-Batch](https://github.com/yyny/Brainfuck-In-Batch)

顺便说一句，图灵完备的编程语言意味着它：

*   不可能创建一个程序来确定另一个程序（使用相同的语言）是否最终会停止或将永远运行（我不知道这个程序是如何工作的，而且我认为没有人用过这个程序来证明图灵完整性）。
*   可以创建一个可以运行该语言中所有可能程序的程序（解释器：[Brainfuck 中的 Brainfuck 解释器](https://github.com/canoon/bfbf/blob/master/bf.bf)（有一个更好的版本，遗憾的是我找不到。这个非常慢））
*   可以像图灵机一样行动或模拟图灵机，因此**至少**包含以下几个方面：
    *   写入内存（即将变量值更改为任何其他值；只能更改`true`为`false`，反之亦然。在批处理的情况下`SET A=5`：）
    *   “无限”内存（即，您也必须可以写入不止一位/字节，最好是无限多。字符串、数组、表、位域甚至整数都是有效的，只要我们可以写入整个对象。请注意，必须可以通过地址读取和写入变量：如果您希望整数有效，则必须有位移，并且您必须能够索引您的数组，例如`array[index];`.)
    *   条件跳转语句（即`IF %A%==0 GOTO LABEL`（如果 A 为零则跳转到标签）、`while (var) {/*code*/}`（当 var 不为零时跳转回代码开头）或`jmp0 exit;`（如果堆栈上的当前值为零则跳转到退出））

传统的图灵机要求你有一个两边都是无限的磁带，但是一个简单的数组、字符串、表（对象）或二进制数（位域）也可以。例如，在我的“Brainfuck in Batch”中，我使用了一个类似数组/表的对象来存储内存（因为批处理允许您更改值的键，如下所示`SET ARRAY[%KEY%]=%VALUE%`：）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-20T19:20:59.863

我相信它是合格的。图灵完备性的基本要求被认为可以简化为一些简单的操作，包括：存储状态的能力（变量）、分支的能力（条件）和迭代的能力（循环）。批处理具有所有这些，因此除非对图灵完整性有一些尚未发现的要求，否则批处理脚本是合格的。

# math - 日光时间计算

> ID：11126541
> 
> 赞同：1
> 
> 时间：2012-06-20T19:12:07.673
> 
> 标签：math, trigonometry, julian-date

我在尝试使用此公式计算白天时间时无法获得此表达式的数值。当我评估这个表达式时，它最终给出了一个 NaN。

> J 代表儒略日。（例如今天 J = 172;）

任何帮助都将非常有价值，谢谢

```
P = Math.asin(0.39795*Math.cos(0.2163108 + 2*Math.atan(0.9671396*Math.tan[0.00860*(J-186)]))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:29:34.110

我试了一下，得到了答案……：

```
P = Math.Asin(0.39795 * Math.Cos(0.2163108 + 2 * Math.Atan(0.9671396 * Math.Tan(0.00860 * (J- 186))))); 
```

我在 Math.tan[0.00860*(J-186)])))中将**"["**更改为**"("**

我得到了一个结果......（为了测试它，我将 J 更改为 172）

确保 P 是**Double**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:33:42.640

```
 //GET LATITUDE
            latitude = document.getElementById("latit").value;
            L = latitude;

            //GET JULIAN DAY
              Now=new Date();
              Now_Y=Now.getYear();
              if (Now_Y < 70)   { Now_Y=Now_Y*1+2000; }
              if (Now_Y < 1900) { Now_Y=Now_Y*1+1900; }
              Now_M=Now.getMonth();                     // Jan-Dec = 0-11
              Now_D=Now.getDate();                      // 1-31
              Now_H=Now.getHours();                     // 0-23
              Now_N=Now.getMinutes();                   // 0-59
              Now_S=Now.getSeconds();                   // 0-59
              Now_U=Now.getMilliseconds();              // 0-999
              Now_T=Now.getTime();                      // miliseconds since 1970-01-01
              Now_O=Now.getTimezoneOffset();            // in minutes
              Now_W=Now.getDay();                       // weekday: Sun-Sat = 0-6
              Now_J=                                    // day of year (Julian day)
                Math.round((                            // ...account for DST
                (new Date(Now_Y,Now_M,Now_D))           // ...most recent midnight
                - (new Date(Now_Y,0,0)))                // ...Dec. 31st midnight
                /86400000);                             // ...mili-seconds per day
              Gmt_N=Now_N+Now_O;
              Gmt=new Date(Now_Y,Now_M,Now_D,Now_H,Gmt_N,Now_S);
              Gmt_Y=Gmt.getYear();
              if (Gmt_Y < 70)   { Gmt_Y=Gmt_Y*1+2000; }
              if (Gmt_Y < 1900) { Gmt_Y=Gmt_Y*1+1900; }
              Gmt_M=Gmt.getMonth();                     // Jan-Dec = 0-11
              Gmt_D=Gmt.getDate();                      // 1-31
              Gmt_J=                                    // day of year (Julian day)
                Math.round((                            // ...account for DST
                (new Date(Gmt_Y,Gmt_M,Gmt_D))           // ...most recent midnight
                - (new Date(Gmt_Y,0,0)))                // ...Dec. 31st midnight
                /86400000);                             // ...mili-seconds per day
                alert("Julian Day: "+Gmt_J);

            J = Gmt_J;

            P = Math.asin(0.39795*Math.cos(0.2163108 + 2*Math.atan(0.9671396*Math.tan(0.00860*(J-186)))));

            alert("P is : "+P)

            pi = 3.14159265;

            var D = 24 - (24/pi)*Math.acos((Math.sin(0.8333*pi/180) + Math.sin(L*pi/180)*Math.sin(P))/ (Math.cos(L*pi/18

0)*Math.cos(P))); 
```

# php - 使用 SimpleXML 将 SOAP 响应转换为关联数组

> ID：11126542
> 
> 赞同：0
> 
> 时间：2012-06-20T19:12:09.057
> 
> 标签：php, xml, simplexml

如何使用 SimpleXML 将这样的 SOAP 响应转换为 php 数组？

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Header>
    <eWAYHeader xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
      <eWAYCustomerID>9******5</eWAYCustomerID>
      <Username>ac****@si****.com.sand</Username>
      <Password>*******</Password>
    </eWAYHeader>
  </soap:Header>
  <soap:Body>
    <CreateRebillCustomerResponse xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
      <CreateRebillCustomerResult>
        <Result>Success</Result>
        <ErrorSeverity />
        <ErrorDetails />
        <RebillCustomerID>60066328</RebillCustomerID>
      </CreateRebillCustomerResult>
    </CreateRebillCustomerResponse>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:36:32.157

你可能想看看[SoapClient](http://php.net/soapclient)类呢？它会省去很多麻烦。

# nginx - iptables 或 nginx 拒绝 IP 阻塞？

> ID：11126546
> 
> 赞同：3
> 
> 时间：2012-06-20T19:12:24.313
> 
> 标签：nginx, iptables

我们使用 nginx 作为负载均衡器，并希望：

*   黑名单、白名单选择 IP 范围
*   限制来自另一组 IP 范围的请求

...从我们的内部列表以及像[SpamHous](http://www.spamhaus.org/)这样的地方采购 IP 范围。看起来这可以使用：1\. iptables 2\. nginx 的[HttpAccessModule](http://wiki.nginx.org/HttpAccessModule)来实现。

寻找有关每种方法的优缺点的建议......到目前为止，IMO nginx 方法看起来更灵活（可以创建基于 URI 的规则），但我想知道 iptables 在拒绝服务的情况下是否会表现得更好被列入黑名单的 IP 尝试。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:48:54.740

这可能不是非此即彼的情况。

iptables 可能会更有效，但正如你提到的，Nginx 更灵活一些。由于我假设您不需要黑名单的灵活性，但可能需要节流，使用 iptables 将黑名单列入黑名单，并使用 Nginx 进行节流。

# c++ - 读取 Win32 变量

> ID：11126547
> 
> 赞同：2
> 
> 时间：2012-06-20T19:12:29.367
> 
> 标签：c++, winapi

如果我可以挂接到 Win32 进程，我能做到：

*   从进程内部的类中读取变量？

*   我有上面 Win32 应用程序的完整源代码，我可以用它作为这个主题的参考吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:20:35.283

是的。一旦您的模块被挂接到进程中，您就共享相同的地址空间。这意味着您可以访问进程已分配的内存（例如，用于类实例）。

如果您知道类实例的偏移量，那么您可以：

*   将此内存地址转换为指向类的指针（前提是您包含类头）
*   使用此内存地址的偏移量来访问类的成员。

请参阅MSDN 上[的遍历模块列表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686849%28v=vs.85%29.aspx)。一旦你有了想要“挂钩”的进程的[MODULEENTRY32](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684225%28v=vs.85%29.aspx)`modBaseAddr` ，你就可以使用它作为你的偏移量的基础。例如，如果您知道指向类实例的全局变量位于 0x000AD421，您可以执行以下操作：

```
ClassName *pClassBase = moduleEntry->modBaseAddr + 0x000AD421;
pClassBase->UseSomeFunctions(); 
```

或者

```
unsigned char *pClassBase = moduleEntry->modBaseAddr + 0x000AD421; // if we don't know the exact definition of the class we want to play with
float flMemberValue = *reinterpret_cast<float*>((unsigned char *)pClassBase + 24); // float member value at offset 24
// value of member is flMemberValue

*reinterpret_cast<float*>((unsigned char *)pClassBase + 24) = 15.25; // setting the same member value to 15.25. 
```

正如其他评论者所说，找到类基的偏移量是这个过程中最难的部分。但是，如果您有方便的类定义，这基本上是您必须做的唯一工作（即您也不必找到类成员偏移量）。

# vba - 应该附加的文本被覆盖

> ID：11126551
> 
> 赞同：2
> 
> 时间：2012-06-20T19:12:38.573
> 
> 标签：vba, file-io, filesystemobject

这看起来真的很容易（我已经做了一百万次并且从来没有遇到过问题），但这让我很生气。

我想根据 Excel 电子表格中的内容创建一些 SQL 脚本。为此，我创建了一个使用以下代码读取文本文件的宏

```
Dim fso As FileSystemObject
Set fso = New FileSystemObject

Dim stream As TextStream
Set stream = fso.OpenTextFile(filepath, 8, False) 
```

这*应该*打开文本文件以附加并插入我的新值。

不幸的是，它总是*覆盖*而不是附加，这让我发疯了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T19:20:30.430

我最近刚刚构建了一个将字符串附加到文件的函数。几周/几个月前，我遇到了这个问题，发现如果使用实际单词**ForAppending**，就像它在 Intellisense 中显示的那样，插入数字**8**它对我有用。

```
Const ForAppending = 8

Sub AppendStringToFile(ByVal strFile As String, ByVal strNewText As String, Optional intBlankLine As Integer = 1)

Dim fso as FileSystemObject, ts as TextStream

Set fso = New FileSystemObject
Set ts = fso.OpenTextFile(strFile, ForAppending, True)

With ts
    .WriteBlankLines intBlankLine
    .WriteLine (strNewText)
    .Close
End With

Set ts = Nothing
Set fso = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T02:38:38.037

回归基础......
`Open pathname For mode [Access access] [lock] As [#]filenumber [Len=reclength]`

用于您的要求：

```
Dim FNum As Integer

FNum = FreeFile()
Open strFile For Append As FNum

'do your stuff here
Write #FNum, MyData

Close FNum 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-20T19:19:11.190

很奇怪，在[这个文档](http://msdn.microsoft.com/en-us/library/aa265347%28v=vs.60%29.aspx)中，它提到了对应的常量`ForAppending`is `8`，但它`3`在底部的示例中使用。

尝试：

```
Dim fso As FileSystemObject
Set fso = New FileSystemObject

Dim stream As TextStream
Set stream = fso.OpenTextFile(filepath, 3, False) 
```

# android - 如何从 sqlite Android 中检索数据

> ID：11126552
> 
> 赞同：0
> 
> 时间：2012-06-20T19:12:42.433
> 
> 标签：android

它给出了我的错误。如何获得所有字段。谢谢

```
show.setOnClickListener(new Button.OnClickListener() {
     public void onClick(View arg0) 
     {
            String mm = seg.getText().toString();
            String mmm =ubs.getText().toString();
            String mmmm=area.getText().toString();
            String mmmmm= microarea.getText().toString();
            String mmmmmm= imovel.getText().toString();
                              String query = ( " SELECT * FROM DOMICIL WHERE "
              + " SEG ="+ mm
              + " And UNIDADE ="+mmm
              + " And  AREA ="+mmmm 
              + " And MICROAREA ="+mmmmm
              + " And IMOVEL ="+ mmmmmm );
            Cursor c =my.rawQuery(query,null);
            c.moveToFirst();
            while(!c.isAfterLast())
            {
              int id = c.getInt(0);
              seg.setText(c.getString(1));
              ubs.setText(c.getString(2));
              area.setText(c.getString(3));
              microarea.setText(c.getString(4));
              imovel.setText(c.getString(5));
              numer_casa.setText(c.getString(6));
              cep.setText(c.getString(7));
              complemento.setText(c.getString(8));
              c.moveToNext();
            } 
           c.close();  
           }  
        });
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:18:49.567

假设您的列是文本，请尝试将要查询的文本括在引号中。

前任。

```
+ " SEG = '"+ mm + "'"
+ " And UNIDADE = '"+mmm  + "'"
+ " And  AREA = '"+mmmm  + "'"
+ " And MICROAREA = '"+mmmmm + "'"
+ " And IMOVEL = '"+ mmmmmm  + "'" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:59:34.740

如果为 null ，则用于 Strings ； `SEG LIKE %'"+mm"'%`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T20:03:31.503

如果我是你，我可能会做类似的事情

```
String query = " SELECT * FROM DOMICIL WHERE "
              + " SEG = ? " 
              + " And UNIDADE = ?" 
              + " And  AREA = ? " 
              + " And MICROAREA = ? " 
              + " And IMOVEL = ? ";
Cursor c =my.rawQuery(query,new String[]{mm,mmm,mmmm,mmmmm,mmmmmm}); 
```

我还会使用更具描述性的变量名称。

# c++ - 模棱两可的模板函数特化编译错误

> ID：11126556
> 
> 赞同：2
> 
> 时间：2012-06-20T19:12:51.997
> 
> 标签：c++, templates, template-specialization

我目前正在尝试创建一组转换函数，通过一次调用，可以（尝试）将 JavaScript 对象（`CefV8Value`）转换为其 C++ 对应对象，并支持指针。

下面是转换函数（最后是指针转换）：

```
template<typename T>
T convert_v8value_to_cpp(const CefRefPtr<CefV8Value> &value) {};

// Explicit type conversion functions
#define V8VALUE_TO_CPP_CONVERSION(type) \
      template<> type \
      convert_v8value_to_cpp<type>(const CefRefPtr<CefV8Value> &value)

V8VALUE_TO_CPP_CONVERSION(CefRefPtr<CefV8Value>)
{
    return value;
}

V8VALUE_TO_CPP_CONVERSION(bool)
{
    return value->GetBoolValue();
}

V8VALUE_TO_CPP_CONVERSION(int)
{
    return value->GetIntValue();
}

V8VALUE_TO_CPP_CONVERSION(std::string)
{
    return value->GetStringValue().ToString();
}

V8VALUE_TO_CPP_CONVERSION(const char *)
{
    return value->GetStringValue().ToString().c_str();
}

V8VALUE_TO_CPP_CONVERSION(std::wstring)
{
    return value->GetStringValue().ToWString();
}

// HACKHACK: most VGUI functions take non-const wchar_t pointers, when they
// shouldn't
V8VALUE_TO_CPP_CONVERSION(wchar_t *)
{
    return (wchar_t*)value->GetStringValue().ToWString().c_str();
}

V8VALUE_TO_CPP_CONVERSION(const wchar_t *)
{
    return value->GetStringValue().ToWString().c_str();
}

V8VALUE_TO_CPP_CONVERSION(double)
{
    return value->GetDoubleValue();
}

V8VALUE_TO_CPP_CONVERSION(float)
{
    return value->GetDoubleValue();
}

//-----------------------------------------------------------------------------
// Purpose: converts a JS array to a C++ vector (of type T)
//-----------------------------------------------------------------------------
template<typename T>
std::vector<T> convert_v8value_to_cpp(const CefRefPtr<CefV8Value> &value)
{
    std::vector<T> vec;

    if(!value->IsArray())
        return vec;

    for(int i = 0; i < value->GetArrayLength(); ++i)
    {
        CefRefPtr<CefV8Value> element = value->GetValue(i);
        vec.push_back(convert_v8value_to_cpp<T>(element));
    }

    return vec; // hopefully move semantics will optimise this and not copy-construct
}

//-----------------------------------------------------------------------------
// Purpose: converts a JS object to a C++ pointer (where T is a pointer type)
//-----------------------------------------------------------------------------
template<typename T>
typename std::enable_if<std::is_pointer<T>::value, T>::type
    convert_v8value_to_cpp(const CefRefPtr<CefV8Value> &value)
{
    if(!value->IsObject())
        return NULL;

    CefRefPtr<CefV8Value> pTypeId = value->GetValue("__v8bind_typeid__");
    if(!pTypeId || !pTypeId->IsString())
        return NULL;

    CefRefPtr<CefV8Value> pPointerVal = value->GetValue("__v8bind_ptr__");
    if(!pPointerVal || !pPointerVal->IsInt())
        return NULL;

    if(pTypeId->GetStringValue().ToString() == typeid(T).name())
        return (T)pPointerVal->GetIntValue();

    return NULL;
} 
```

这是使用所述指针函数的代码：

```
WrapClass *pThis = convert_v8value_to_cpp<WrapClass*>(object); 
```

**Visual Studio**抱怨说：

```
error C2668: 'convert_v8value_to_cpp' : ambiguous call to overloaded function
binding_test.cpp(106): could be 'Point *convert_v8value_to_cpp<WrapClass*>(const CefRefPtr<T> &)'
with
[
   WrapClass=Point,
   T=CefV8Value
]

binding_test.cpp(88): or       'std::vector<_Ty,_Ax> convert_v8value_to_cpp<WrapClass*>(const CefRefPtr<T> &)'
with
[
   _Ty=Point *,
   _Ax=std::allocator<Point *>,
   WrapClass=Point,
   T=CefV8Value
]

binding_test.cpp(31): or       'T convert_v8value_to_cpp<WrapClass*>(const CefRefPtr<CefV8Value> &)'
with
[
   T=Point *,
   WrapClass=Point
]

while trying to match the argument list '(CefRefPtr<T>)'
with
[
   T=CefV8Value
] 
```

我不明白调用是如何模棱两可的（除了`WrapClass *`匹配 的第一个转换函数`T`）。但是，它也表示可能的呼叫候选是`std::vector`转换。这怎么可能？

提前谢谢了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T19:46:38.373

这两个：

```
template<typename T>
std::vector<T> convert_v8value_to_cpp(const CefRefPtr<CefV8Value> &value)
{ ... }

template<typename T>
typename std::enable_if<std::is_pointer<T>::value, T>::type
convert_v8value_to_cpp(const CefRefPtr<CefV8Value> &value)
{ ... } 
```

不是函数的部分特化（无论如何都不允许），而是重载，因此与主函数模板一起，它们都是三个模棱两可的，因为它们仅在返回类型上有所不同。

您希望您的函数模板`convert_v8value_to_cpp`委托给`do_it()`类模板中的静态函数（例如）`convert_v8value_to_cpp_helper`，因为与函数模板不同，类模板*可以*被专门化。

初级班模板：

```
template <typename T>
struct convert_v8value_to_cpp_helper {}; // no do_it() here by intention 
```

全专业：

```
// Explicit type conversion functions
#define V8VALUE_TO_CPP_CONVERSION(type, code) \
template <> struct convert_v8value_to_cpp_helper< type > { \
  static T do_it() code \
}

V8VALUE_TO_CPP_CONVERSION(bool, {return value->GetBoolValue();});
V8VALUE_TO_CPP_CONVERSION(int,  {return value->GetIntValue(); });
V8VALUE_TO_CPP_CONVERSION(std::string,
{ return value->GetStringValue().ToString(); });
V8VALUE_TO_CPP_CONVERSION(const char *,
{ return value->GetStringValue().ToString().c_str(); });
V8VALUE_TO_CPP_CONVERSION(std::wstring,
{ return value->GetStringValue().ToWString(); });
// HACKHACK: most VGUI functions take non-const wchar_t pointers, when they
// shouldn't
V8VALUE_TO_CPP_CONVERSION(wchar_t *,
{ return (wchar_t*)value->GetStringValue().ToWString().c_str(); });
V8VALUE_TO_CPP_CONVERSION(const wchar_t *,
{ return value->GetStringValue().ToWString().c_str(); });
V8VALUE_TO_CPP_CONVERSION(double, {return value->GetDoubleValue();});
V8VALUE_TO_CPP_CONVERSION(float,  {return value->GetDoubleValue();}); 
```

专业化`std::vector`（包括具有自定义分配器的那些）：

```
template<typename T, typename A>
struct convert_v8value_to_cpp< std::vector<T,A> > {
    static std::vector<T,A> do_it(const CefRefPtr<CefV8Value> &value)
    {
        std::vector<T,A> vec;

        if (!value->IsArray())
            return vec;

        for(int i = 0; i < value->GetArrayLength(); ++i)
        {
            CefRefPtr<CefV8Value> element = value->GetValue(i);
            vec.push_back(convert_v8value_to_cpp<T>(element));
        }

        return vec; // return value optimisation will kick in here
    }
}; 
```

最后，指针的特化：

```
template<typename T>
struct convert_v8value_to_cpp<T*> { // no need for enable_if
    static T* do_it(const CefRefPtr<CefV8Value> &value)
    {
        if (!value->IsObject())
            return nullptr; // don't use NULL in C++

        CefRefPtr<CefV8Value> pTypeId = value->GetValue("__v8bind_typeid__");
        if (!pTypeId || !pTypeId->IsString())
            return nullptr;

        CefRefPtr<CefV8Value> pPointerVal = value->GetValue("__v8bind_ptr__");
        if (!pPointerVal || !pPointerVal->IsInt())
            return nullptr;

        if (pTypeId->GetStringValue().ToString() == typeid(T).name())
            return (T*)pPointerVal->GetIntValue();

        return nullptr;
    }
}; 
```

这些现在在真实的函数模板中使用：

```
template <typename T>
T convert_v8value_to_cpp(const CefRefPtr<CefV8Value> &value)
{ return convert_v8value_to_cpp_helper<T>::do_it(value); } 
```

不再有歧义，因为只有一个函数模板（但如果部分模板专业化排序无法找到单个最佳匹配，则可能会出现歧义，但这里不应该是这种情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T20:16:49.360

mmutz 解释为什么它是模棱两可的（你有三个重载采用完全相同的参数类型，都可以匹配`convert_v8value_to_cpp<WrapClass*>`）

编辑：我看到 mmutz 现在也添加了一个解决方案，类似于我的下面。我发现完整地阅读它要容易得多，宏不会让我更容易阅读，甚至不会节省太多打字。

如果你想部分特化一个模板，你需要使用一个类：

```
template<typename T>
struct Converter;

template<>
struct Converter<bool>
{
  typedef bool result_type;
  static result_type convert(const CefRefPtr<CefV8Value> &value)
  { ... }
};

template<typename T>
struct Converter<std::vector<T>>
{
  typedef std::vector<T> result_type;
  static result_type convert(const CefRefPtr<CefV8Value> &value)
  { ... }
};

template<typename T>
struct Converter<T*>
{
  typedef T* result_type;
  static result_type convert(const CefRefPtr<CefV8Value> &value)
  { ... }
};

template<typename T>
typename Converter<T>::result_type
convert_v8value_to_cpp(const CefRefPtr<CefV8Value> &value)
{ return Converter<T>::convert(value); } 
```

# css - 父div小于子div？

> ID：11126557
> 
> 赞同：32
> 
> 时间：2012-06-20T19:13:04.087
> 
> 标签：css, html, wrapper

这是我的问题，我想`content div`用白色填充。但是当我这样做时，它并没有填满整个 div。子 div 更大，它们越过父 div（内容）。我希望内容 div 覆盖所有子 div。

这是我的代码

```
#content {
  width: 100%;
  min-height: 400px;
  height: auto;
  max-height: 2000px;  /* ONLY FOR THE MOMENT */
  margin-top: -7px;
  background:white;
}
#fastMenu {
  float:left;
  width: 200px;
  height: 100%;
  margin-top: 20px;
}
#contenu {
  float:left;
  width: 430px;
  height: 100%;
  margin-top: 20px;
  background:white;
}
```

```
<div id = "content">
  <div id = "fastMenu">
    <a href="conseil-d-administration">
      <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuAdmin.png'; ?>" border="0" />
    </a>
    <a href="congres-2012">
      <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuCongres.png'; ?>" border="0" />
    </a>
    <a href="formation">
      <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuFormation.png'; ?>" border="0" />
    </a>            
    <a href="devenir-membre">
      <img src="<?php echo 'http://dev201.viglob.gtvr.com/client_file/themes/default/interface/FR/menuMembre.png'; ?>" border="0" />
    </a>            
  </div>  
  <div id="contenu" class="txt"></div>
</div> 
```

我还想要一个跨浏览的答案（IE7、IE8、IE9、Firefox、Chrome、Opera）

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-20T19:16:05.740

添加`overflow: auto`到CSS中`.content`

# heroku - heroku.com 将其用作 git 存储库

> ID：11126559
> 
> 赞同：0
> 
> 时间：2012-06-20T19:13:05.740
> 
> 标签：heroku, github

我有一个 gitHub 存储库，我喜欢它。我的公司正在使用 SalesForce，我正在开发一个 iOS 应用程序。

现在我想使用 github，但与购买 heroku.com 的 Salesforce 合作，我被告知使用 heroku.com 进行后端处理。

这可能吗，我的印象是您可以使用Java等其他语言进行后端编码，但不适用于ios等其他语言。这是正确的方式还是我应该说服我的经理购买 github 访问（私人集线器）？

提前致谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T01:18:40.780

您似乎想将 GitHub 用于您的存储库和源代码协作，但部署到 Heroku。这很常见并且得到很好的支持。只需在您的开发工作流程中使用`git push origin master`（这里，github 远程是您的`origin`）进行开发并推送到 github。

当你想部署到 Heroku 时，你会做一个`git push heroku master`（在这里，heroku repo 被标记为`heroku`远程）。

同一个项目有两个 git 遥控器这一事实不是问题，事实上，由于 git 的分布式特性，它得到了很好的优化。使用 Heroku 为您的移动应用程序开发支持 API 或 Web 应用程序并不意味着您不能使用 GitHub 进行源代码控制。

# php - 在 Twitter 上自动关注

> ID：11126560
> 
> 赞同：2
> 
> 时间：2012-06-20T19:13:07.357
> 
> 标签：php, twitter, twitter-follow

我现在有几千个 Twitter 关注者，直到现在我一直在手动关注他们。我现在想用 PHP 自动化这个过程，因为跟踪每个人可能需要很长时间。

我找到了一个由 Abraham Williams 创建的 PHP twitter 库，并开始编写一些代码。

但是，每次我运行脚本时，我需要跟进的用户数量都是不正确的！这是我的编码错误，还是 Twitter API 的工作原理？

这是我的代码：

```
<?php

require_once 'twitteroauth/twitteroauth.php';

define('CONSUMER_KEY', '');
define('CONSUMER_SECRET', '');
define('ACCESS_TOKEN', '');
define('ACCESS_TOKEN_SECRET', '');

ob_start();
set_time_limit(0);

function autoFollow($action){
    //auth with twitter.
    $toa = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, ACCESS_TOKEN, ACCESS_TOKEN_SECRET);

    //get the last 5000 followers
    $followers = $toa->get('followers/ids', array('cursor' => -1));
    $followerIds = array();

    foreach ($followers->ids as $i => $id) {
        $followerIds[] = $id;
    }

    //get the last 5000 people you've followed
    $friends = $toa->get('friends/ids', array('cursor' => -1));
    $friendIds = array();
    foreach ($friends->ids as $i => $id) {
        $friendIds[] = $id;
    }

    if($action=="unfollow"){
        //unfollow all users that aren't following back.
        $usersNotFollowingBackcount = 0;
        $usersNotFollowingBack = array();

        foreach($friendIds as $id){ 
            if(!in_array($id,$followerIds) ){
                array_push($usersNotFollowingBack, $id); 
                //unfollow the user
                //$toa->post('friendships/destroy', array('id' => $id));
                $usersNotFollowingBackcount++;
                echo $usersNotFollowingBackcount.' users unfollowed so far</br>';
                ob_flush();
                flush();
            }
        } 

        echo sizeof($usersNotFollowingBack).' users who weren\'t following you back have now been unfollowed!';
    }
    if($action =="follow"){                 
        //follow all users that you're not following back.
        $usersYoureNotFollowingBackcount = 0;
        $usersYoureNotFollowingBack = array();

        foreach($followerIds as $id){ 
            if(!in_array($id,$friendIds) ){
                array_push($usersYoureNotFollowingBack, $id); 
                //follow the user
                //$toa->post('friendships/create', array('id' => $id));
                $usersYoureNotFollowingBackcount++;
                echo $usersYoureNotFollowingBackcount.' users followed back so far</br>';
                ob_flush();
                flush();
            }
        } 

        echo sizeof($usersYoureNotFollowingBack).' users have been followed back!';
    }
}

if($_GET['action']){
    autoFollow($_GET['action']);
    ob_end_flush();
}
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T10:25:45.113

我刚刚用我的 twitter 帐户在我的笔记本电脑上运行了你的代码，我得到了正确的值。从您的角度来看，您的代码是正确的。

如果关注者或您关注的人的数量超过 5000 或他们之间的差异超过 5000，则可能会出现不一致，因为某些用户不会出现在最后 5000 个关注者中，因为在他之后，其他 5000 个用户关注了您和您从未跟随他。所以这个角色会被错过。

如果你的问题是，一些用户在运行代码时没有被关注，这可能是因为 Twitter 的 API 速率限制。

> OAuth 调用每小时允许 350 个请求，并根据请求中使用的 oauth_token 进行测量。

检查更多信息：[https](https://developer.twitter.com/en/docs/basics/rate-limiting.html) ://developer.twitter.com/en/docs/basics/rate-limiting.html 因此，由于 twitter 的速率限制，将无法关注超过 350 个用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T01:58:37.290

如果您有超过 5000 个关注者/朋友，这适用于[twitteroauth.php + OAuth.php和 appi v1.1 关注/取消关注。](https://github.com/abraham/twitteroauth/tree/master/twitteroauth)关注取消关注的 999 限制是因为 1000 天限制。我开始[了这个](http://www.emoticode.net/php/unfollow-people-were-following-on-twitter-which-are-not-following-us-back.html)

```
//FULL FOLLOWERS ARRAY WITH CURSOR ( FOLLOWERS > 5000)
    $e = 0;
    $cursor = -1;
    $full_followers = array();
    do {
        //SET UP THE URL
      $follows = $oTwitter->get("followers/ids.json?screen_name=youruser&cursor=".$cursor);
      $foll_array = (array)$follows;

      foreach ($foll_array['ids'] as $key => $val) {

            $full_followers[$e] = $val;
            $e++; 
      }
           $cursor = $follows->next_cursor;

      } while ($cursor > 0);
echo "Number of followers:" .$e. "<br /><br />";

//FULL FRIEND ARRAY WITH CURSOR (FOLLOWING > 5000)
    $e = 0;
    $cursor = -1;
    $full_friends = array();
    do {

      $follow = $oTwitter->get("friends/ids.json?screen_name=youruser&cursor=".$cursor);
      $foll_array = (array)$follow;

      foreach ($foll_array['ids'] as $key => $val) {

            $full_friends[$e] = $val;
            $e++;
      }
          $cursor = $follow->next_cursor;

    } while ($cursor > 0);
    echo "Number of following:" .$e. "<br /><br />";

//IF I AM FOLLOWING USER AND HE IS NOT FOLLOWING ME BACK, I UNFOLLOW HIM
$index=1;
$unfollow_total = 0;

foreach( $full_friends as $iFollow )
{
$isFollowing = in_array( $iFollow, $full_followers );

echo $index .":"."$iFollow: ".( $isFollowing ? 'OK' : '!!!' )."<br/>";
$index++;

if( !$isFollowing )
    {
    $parameters = array( 'user_id' => $iFollow );
    $status = $oTwitter->post('friendships/destroy', $parameters);
    $unfollow_total++;
    } if ($unfollow_total++; === 999) break;
} 
```

> //如果用户关注我而我不是，我关注

```
$index=1;
$follow_total = 0;
foreach( $full_followers as $heFollows )
{
$amFollowing = in_array( $heFollows, $full_friends );

echo "$heFollows: ".( $amFollowing ? 'OK' : '!!!' )."<br/>";

$index++;
     if( !$amFollowing )
    {
    $parameters = array( 'user_id' => $heFollows );
    $status = $oTwitter->post('friendships/create', $parameters);
    $follow_total++;
    } if ($follow_total === 999) break;
}

echo 'Unfollowed:'.$unfollow_total.'<br />';
echo 'Followed:'.$follow_total.'<br />'; 
```

# eclipse - Eclipse PDE项目，添加bundle依赖

> ID：11126566
> 
> 赞同：2
> 
> 时间：2012-06-20T19:13:35.560
> 
> 标签：eclipse, osgi, pde

在 PDE 项目中，有没有办法将文件系统中的第三方包添加为我的项目的依赖项？我希望做 BND 工具允许的同样事情；将包添加到本地存储库，然后从项目中的该包中导入包。我不想使用 maven osgi 插件。

我已经尝试使用外部包创建用户库并将其设置为项目的构建路径，但这没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:05:37.720

你所追求的是[目标平台](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.pde.doc.user/concepts/target.htm)。目标平台中的任何包都位于具有正确包导入的项目的构建路径上。创建目标平台的工具在Window->Preferences->Plug-in Development->Target Platform下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:48:19.527

您可以在插件开发中使用约定，在每个项目中创建目录“bundles”（或“lib”）。编辑目标平台（如 Holly 所述）并使用 project_loc 变量添加新位置：

${project_loc}/捆绑

然后对于每个项目，其 bundles 目录中的任何插件都将自动作为依赖项可用。（如果新的捆绑包没有立即出现，请转到首选项中的目标平台并选择您的项目，它将刷新）。

如果您使用 Run As... OSGi Framework 来测试您的 bundle，但它找不到外部 bundle，您需要转到 Run As... > Run Configurations... 并确保在列表中检查了 bundle目标平台。

# jquery - 优化 jQuery UI 拖放计划网格

> ID：11126569
> 
> 赞同：0
> 
> 时间：2012-06-20T19:13:42.463
> 
> 标签：jquery, jquery-ui, drag-and-drop, draggable, droppable

我有一个基于使用 jQuery/jQuery UI 拖放的 HTML 表的计划网格。表中的每个单元格代表一个用户和时间段。我在 IE9、FireFox 和 Chrome 中都有很好的性能，但是 IE8 无法使用，因为在用户开始拖动和拖动助手出现之间有几秒钟的暂停。

我知道问题的一部分是我正在创建大量的可放置对象，在这种情况下：

24 小时网格上的 112 个用户（共创建了 2688 个可放置对象）

如果我删除使空 2688 单元格可丢弃的代码，速度会显着提高，但 IE8 中的动画仍然感觉迟缓。

有什么建议可以加快速度？我考虑过让表格本身成为可放置的，但我不确定如何计算要放置到哪个单元格上，并且我会丢失指示活动单元格的 hoverState CSS 背景。

一个关键要求是我坚持使用 HTML 表，因为它是如何在服务器上绑定数据的。

我在与 IE8 打一场失败的战斗吗？我真的很想在那个浏览器中尽可能快地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:17:24.933

我会尝试绑定到 mouseover 事件，并且在鼠标实际位于元素上方之前，实际上不会初始化任何可放置（或与元素交互所需的其他参数）。通过采用这条路线，我在高度交互的页面上将性能提高了大约 400%。

如果这没有帮助，请考虑使用 dynaTrace ajax 版本进行测试，该版本向您显示 javascript 中的慢点在哪里。

# javascript - 使用 __doPostBack 和 JQuery 可能出现的错误

> ID：11126572
> 
> 赞同：0
> 
> 时间：2012-06-20T19:13:49.383
> 
> 标签：javascript, jquery, asp.net, dotnetnuke, dopostback

我正在尝试使用 __doPostBack 将一些数据从客户端传递到服务器端。我对 JS 不是很熟悉，但是在 Firebug 中调试时发生了一些奇怪的事情。我将首先显示我的代码。

```
<script type="text/javascript">
function BeginDownload() {
        var temp = $("#waterwheel-carousel-horizon").CurrentSelectedImg().toString()
        __doPostBack("ImgDownload", temp);
}
</script> 
```

这是我试图调用的相关 jquery。

```
// Relevant Waterwheel jquery code.
$.fn.CurrentSelectedImg = function () {
        return data.currentCenterItem.data().index; };
$.fn.waterwheelCarousel = function (options) {

        // override the default options with user defined options
        options = $.extend({}, $.fn.waterwheelCarousel.defaults, options || {});

        return $(this).each(function () {

            /* These are univeral values that are used throughout the plugin. Do not modify them
            * unless you know what you're doing. Most of them feed off the options
            * so most customization can be achieved by modifying the options values */
            var data = {
                itemsContainer: $(this).find(".carousel-images"),
                totalItems: $(this).find(".carousel-images img").length,
                containerWidth: $(this).width(),
                containerHeight: $(this).height(),
                currentCenterItem: null,
                items: [],
                itemDistances: [],
                waveDistances: [],
                itemWidths: [],
                itemHeights: [],
                itemOpacities: [],
                carouselRotationsLeft: 0,
                currentlyMoving: false,
                itemsAnimating: 0,
                currentSpeed: options.speed,
                intervalTimer: null
            };

            // Setup the carousel
            beforeLoaded();
            // Preload the images. Once they are preloaded, the passed in function
            // will be called and the carousel will be setup
            preload(function () {
                setupDistanceArrays();
                setupCarousel();
                setupStarterRotation();
            }); 
```

还有幕后的代码。目前还没有达到。

```
// This code is currently not reached, but I put it here for completion.
#region EventTarget
private string EventTarget
{
    get{
        return Request.Form["__EVENTTARGET"].ToString().ToUpper();
    }            
}
#endregion EventTarget

#region HandlePostBack
void HandlePostBack()
{
    switch (EventTarget)
    {
        case "ImgDownload":
            DownloadImage(EventArgs);
            break;
    }
}
#endregion HandlePostBack

private void DownloadImage(string index)
{
    string test = index;
} 
```

最终发生的事情是我单击链接按钮，firebug 跳转到第一行代码，但在它完成该函数之前，它甚至在我传递变量之前突然跳转到 __doPostBack 函数的代码。为什么会这样？

我还应该提到我在 DNN 中这样做，如果这有影响的话。我认为问题可能是我形成该 jquery 函数的方式或我如何调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:54:59.993

发现了问题。我只需要移动我的 jquery 在代码中的位置。我认为它只是不在某个括号内，所以它看不到数据。缺乏智能和杂乱无章的代码再次来袭！现在写那个下载函数。

# c# - 如何控制其他应用程序中的按钮

> ID：11126575
> 
> 赞同：0
> 
> 时间：2012-06-20T19:14:06.797
> 
> 标签：c#, .net, wpf, controlling

我是一名高中最后一年的学生，想帮助我父亲保护他的电脑。他不是 IT 天才，他很难记住在 spybot 和 avast 中必须执行的所有步骤。

我正在尝试创建 ac# windows 应用程序，它只有一个下一步按钮，然后单击安全应用程序中的正确按钮。有没有一种简单的方法（我对c很陌生，用了3年的pascal）来做到这一点？我发现了一些关于使用 autoit 的信息，但这需要我导入一个 dll。任何帮助，将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:17:19.357

是的，有一个简单的方法。寻找像这样的 ui 自动化框架：

[http://white.codeplex.com/](http://white.codeplex.com/)

只需研究所有示例，您就会明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:24:05.043

对于简单的脚本语言（Perl）来说，这可能是一个很好的任务。而不是编译和重新编译配置更改等。您可以查看相当容易使用的 Perl 模块：http: [//sourceforge.net/projects/winguitest](http://sourceforge.net/projects/winguitest)

如果您迷上了 C# 理念，请遵循其他解决方案（也许是为了学习；这很酷）。但在这种情况下，我不建议使用 C# 应用程序来提高稳定性或可维护性。

# javascript - 如何获得第三 直接放置在最高的 2 个其他 div 下而不嵌套前 2 个？

> ID：11126576
> 
> 赞同：1
> 
> 时间：2012-06-20T19:14:07.737
> 
> 标签：javascript, jquery, html, css

我已经尝试为此做一个小提琴，但是解释一切太难了，所以请多多包涵：

我正在制作一个交互式简历生成器，因为根据我申请的不同工作，有些人想要不同的信息。

当前直播，但未广泛发布，页面在[这里](http://specialorange.org/ResumeBuilder/semantic.html)。

我想做的总体布局就是[在这里](https://docs.google.com/drawings/d/1fhUg8R4mhBF3MgapuLOQl-kPQdvcKSPey6QXaGulVjU/edit)。

因此，在生成的内容 Div 中，有五个部分。我希望前两个并排。但是由于这个页面是动态生成的（由H1s，也可以随意尝试并提供反馈），“业务方法”和“快照”的高度可能会根据用户想要查看的内容而有所不同。但是，当“快照”部分（生成内容中的右列）小于左侧“业务方法”时，第 3 部分位于其下方。我如何设置它不这样做。

我的一个非常有可能的错误：我已经尝试包装前两个部分，但这破坏了我的大部分 JQuery 生成，我不想，（除非我绝对必须）包装它们然后重写 Jquery陈述。有史以来第一个 JS/JQuery 项目，并且只有大约 2.5 周，因此欢迎提出建设性的批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:20:31.703

如果我理解正确的话，比如？

```
<div id="1" style="float: left; width: 50%; margin:0">left col</div>
<div id="2" style="float: left; width: 50%; margin:0">right col</div>
<div id="3" style="float: left; clear:left; width:100%; margin:0">col bottom 100% wide</div> 
```

在`clear:left`最后一个 div 做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:22:36.927

我检查了你的代码，发现你给每个部分一个单独的类，因为你的代码`<section class="workexperience">`是第三部分。

只需将此类添加到您的 css 中即可：-

```
.workexperience {
     clear:both;
} 
```

上面的 css 将使第三部分下降，无论第一个到列的高度是多少，它总是会下降。试试这个，让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:23:44.587

添加`clear: both`到名为`workexperience`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:32:07.180

最佳实践说，不要使用浮动，您可以使用 display: inline-block 和 vertical-align: top。这会自动生成响应式设计。

例子：

```
.fp .businessapproaches {
width: 74%;
display: inline-block;
vertical-align: top;
}

.fp .snapshot {
width: 25%;
display: inline-block;
text-align: right;
vertical-align: top;
}

.fp .workexperience {
width:100%;
} 
```

通过此示例，您可以看到如何设计没有浮动的模板。

# list - 为什么 Buffer 和 List 对象相等（即使它们来自不同的类）？

> ID：11126577
> 
> 赞同：8
> 
> 时间：2012-06-20T19:14:09.087
> 
> 标签：list, scala, buffer, equals

```
scala> import scala.collection.mutable.Buffer
import scala.collection.mutable.Buffer

scala> val b = Buffer(1, 2, 3)
b: scala.collection.mutable.Buffer[Int] = ArrayBuffer(1, 2, 3)

scala> val l = List(1, 2, 3)
l: List[Int] = List(1, 2, 3)

scala> b == l
res1: Boolean = true 
```

我想知道，为什么 Buffer 和 List 对象可以与 true 的结果进行比较？

我一直在想，因为他们来自不同的阶层，所以*比较*起来一定是假的。有人可以解释一下，为什么要这样实现？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-20T19:23:17.173

来自[http://www.scala-lang.org/docu/files/collections-api/collections_41.html](http://www.scala-lang.org/docu/files/collections-api/collections_41.html)

> 集合库对相等和散列有统一的方法。这个想法首先是将集合划分为集合、映射和序列。不同类别的集合总是不平等的。例如，Set(1, 2, 3) 不等于 List(1, 2, 3)，即使它们包含相同的元素。另一方面，在同一类别中，集合是相等的当且仅当它们具有相同的元素（对于序列：相同的元素中的相同元素）。例如，List(1, 2, 3) == Vector(1, 2, 3) 和 HashSet(1, 2) == Treeset(2, 1)。
> 
> 对于相等性检查，集合是可变的还是不可变的并不重要。(...)

所以这是因为 scala.collection.mutable.Buffer 和 List 属于同一类别（序列），然后将相等定义为具有相等的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:36:27.333

`List`并且`Buffer`都是`scala.collection.Seq`。它们具有可以枚举的元素，可能是重复的（即，第一个元素、第二个元素等）。

`List`一个是 a而另一个是 a 的事实`Buffer`只是一个实现细节。

一个更好的问题是为什么 a`scala.collection.immutable.Seq`和 a`scala.collection.mutable.Seq`可以相等，答案是可变性与它们的比较方式无关。

# c# - .NET 程序集绑定，我可以将程序集映射到另一个程序集中的版本吗？

> ID：11126593
> 
> 赞同：4
> 
> 时间：2012-06-20T19:14:50.763
> 
> 标签：c#, .net, configuration, app-config, .net-assembly

早上好，是否可以将程序集请求映射到另一个程序集内的版本？例如我们的产品使用 NHibernate 3.2。我们正在迁移到 NServiceBus 3.2.2。对于 DBSubscription 存储，它使用 NHibernate，并且在 NServiceBus.NHibernate 中的 NHibernate 版本中烘焙为 3.3。

如何将 NHibernate 3.2.0.2002 的请求映射到 3.3 的 NServiceBus.NHibernate ...

```
<assemblyIdentity name="NHibernate"
                          publicKeyToken="aa95f207798dfdb4"
                          culture="neutral" />
        <bindingRedirect oldVersion="3.2.0.2002"
                         newVersion="3.3.0.4000"/> //I need it to be NServiceBus.NHibernate 
```

感谢您提供任何提示或技巧。样品和链接总是很受欢迎。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:33:49.703

在绑定重定向中，您可以使用以下[`codeBase`](http://msdn.microsoft.com/en-us/library/efs781xb)元素重定向到不同的代码库：

```
<dependentAssembly>
    <assemblyIdentity name="NHibernate" publicKeyToken="aa95f207798dfdb4" culture="neutral" />
    <bindingRedirect oldVersion="3.2.0.2002" newVersion="3.3.0.4000"/>
    <codeBase version="3.3.0.4000" href="file:///C:/path/to/assembly.dll" />
</dependentAssembly> 
```

但是，公钥必须相同。您不能绑定到使用不同密钥签名的不同程序集。

如果密钥不同，那么您需要针对 NServiceBus.NHibernate 重新编译您的解决方案。

# objective-c - NSURLConnection 委托方法没有被调用

> ID：11126595
> 
> 赞同：2
> 
> 时间：2012-06-20T19:14:54.623
> 
> 标签：objective-c, ios, ssl, https

我正在尝试使用 NSURLConnection 的委托方法。当前未调用以下方法：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection;

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data;

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;
//I also want to be able to use self-signed https urls

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace;
//I also want to be able to use self-signed https urls 
```

我目前正在使用同步调用，但异步似乎更好，因为在我完成代码库后，我将把它实现到 iPhone 应用程序中，我不能让我的 ui 冻结。

用下面的方法`responseData = [NSMutableData dataWithData:[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]];`

我取回了我需要的数据，但使用异步我似乎必须使用委托方法来取回数据。我试图通过使用添加委托`@interface myClass : NSObject<NSURLConnectionDelegate>`

我调用我的方法如下：

```
-(void)grabData{
    NSArray* array = [NSArray arrayWithObjects:@"auth.login",@"user",@"pass", nil];
    NSData* packed_array = [array messagePack];

    NSURL* url = [NSURL URLWithString:@"https://192.168.1.115:3790/"];
    NSMutableURLRequest* request = [[[NSMutableURLRequest alloc]initWithURL:url]retain];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"RPC Server" forHTTPHeaderField:@"Host"];
    [request setValue:@"binary/message-pack" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d",[packed_array length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:packed_array];

    //NSHTTPURLResponse *response = nil;
    NSError *error = nil;

    NSLog(@"connecting");
    NSURLConnection* connection = [[[NSURLConnection alloc]initWithRequest:request delegate:self]retain];
    if (connection) {
        NSLog(@"connection exists");
        self.responseData = [[NSMutableData data]retain];
    }
    else {
        NSLog(@"Connection doesn't exist?");
    }
    NSLog(@"response data: %@",[responseData messagePackParse]);
    NSLog(@"error: %@",error);
} 
```

我尝试了以下方法：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection start]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T21:38:07.290

我继续搜索相关问题，发现[这个答案最有帮助](https://stackoverflow.com/a/5787223/1253944)。它导致我使用以下方法。首先，我在我的接口中声明了一个名为finished 的BOOL 属性，并在我的实现中添加了以下方法，这导致我的委托方法被调用。

```
while(!finished) {
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:45:43.060

只是一个想法 - 您是否有机会使用自动引用计数并且创建 NSURLConnection 的对象在您调用 [connection start] 和应该调用委托方法（即已收到数据）之间被释放？

是否有任何东西维护对您用于创建 NSURLConnection 的对象的引用？

根据其他信息，这似乎是一个可能的原因。您的 App Delegate（或您创建的另一个类）中可能有如下代码。

```
MyClass *object = [[MyClass alloc] init];
[object grabData]; 
```

这很棒——它实例化一个对象，然后告诉该对象获取相关数据。但是，一旦 grabData 完成（并且在 NSURLConnection 返回数据之前），对象将被释放，因为没有任何东西保留它。要解决这个问题：

1.  在您的 .h 文件（创建对象的位置）中创建一个属性以保留您的 MyClass 实例。

    @property (strong) MyClass *object;

2.  在 .m 文件中合成该属性

    @synthesize 对象；

3.  而不是仅仅创建你的对象，持有对它的引用：

    MyClass *myClass = [[MyClass alloc] init];

    [myClass 抓取数据];

    self.object = myClass;

这将防止您的对象被 ARC 释放。

当您完全完成对象（您的 NSURLConnection 已返回数据）时，您可以设置 self.object = nil 以摆脱该引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T07:23:30.760

你可以使用这个：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest: request delegate:self startImmediately:NO];

[connection scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];

[connection start]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:40:00.423

如果你遇到问题，你可以做我过去做过的事情，并像这样使用同步请求：

```
NSHTTPURLResponse *response = nil;
NSError *error = nil;
[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error] 
```

这将输出您需要的数据，为了不锁定您的 UI，您需要做的就是使用块 (GCD)：

```
dispatch_queue_t downloadQueue = dispatch_queue_create("download queue", NULL);
dispatch_async(downloadQueue, ^{
  NSHTTPURLResponse *response = nil;
  NSError *error = nil;
  NSData *myData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]
  dispatch_async(dispatch_get_main_queue(), ^{
    // Handle your response data
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-25T11:06:13.923

建立连接后，只需在下面写

[连接开始]；您的委托方法将被调用。

# c - 限制 C 中寄存器的使用

> ID：11126597
> 
> 赞同：2
> 
> 时间：2012-06-20T19:15:17.697
> 
> 标签：c, gcc, compiler-construction, cpu-registers

我的问题非常类似于：[GCC: Prohibit use of some registers](https://stackoverflow.com/questions/6682733/gcc-prohibit-use-of-some-registers)

但是，我想限制 C 函数中使用的寄存器数量。换句话说，我希望能够像使用clobber 寄存器一样使用指令，但应用在C 函数级别而不是内联汇编中。此外，每个函数可能有一组不同的寄存器可供使用，因此它不是一个万能的解决方案。

我想到的唯一两种可能的解决方案是：

*   在汇编程序中做所有事情。不是真正解决我的问题...
*   使用某种指令分别编译每个函数，以便在 GCC 中条件使用寄存器。通过单独编译每个函数，我会失去很多潜在的优化，这会使代码几乎不可读。

由于我试图在 C 中完成所有这些工作，因此预编译器有什么办法可以在这里提供帮助吗？是否有任何可能的方法来实现我的预期目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:25:08.320

不，那里没有。您将需要在函数或汇编语言中使用内联汇编语句。

# jquery - jQuery 中的 .html() 从 PHP 脚本中获取回显

> ID：11126598
> 
> 赞同：0
> 
> 时间：2012-06-20T19:15:31.720
> 
> 标签：jquery, ajax

我有这个：

```
 $(document).ready(function() {
    $("input[type=button]").click(function () {
        $("#test").html("W3Schools");
        alert("Would submit: " + $(this).siblings("input[type=text]").val());
        $.ajax({ url: "index.php",
        data: {action: $(this).siblings("input[type=text]").val()},
        type: 'post'
        });
    });
}); 
```

'W3Schools' 显然只是填充物，我在我的 php 脚本中有一个名为 'generateHTML()' 的函数，我想用它来代替 'W3Schools'。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:21:18.397

无论您在何处定义该函数，请使用**回显**响应而不是**返回**响应。

因此，每当您调用 $.ajax 函数时，它都会给出您可以在 html 中使用的响应。

**PHP函数：**

```
function generateHTML(){
 // code
  echo $response;
} 
```

**JS：**

```
$(document).ready(function() {
    $("input[type=button]").click(function () {
        $("#test").html("W3Schools");
        alert("Would submit: " + $(this).siblings("input[type=text]").val());
        $.ajax({ url: "index.php",
        data: {action: $(this).siblings("input[type=text]").val()},
        type: 'post',
        success: function(response){
              $("#test").html(response); // will overwrite the previous HTML of test element
            }
        });
    });
}); 
```

# oracle - impdp 奇怪的 ora 错误

> ID：11126602
> 
> 赞同：2
> 
> 时间：2012-06-20T19:15:44.913
> 
> 标签：oracle, oracle10g

我使用 impdp 进行了导入。

后来我在日志文件中发现了这些错误。

```
ORA-31693: Table data object "SMTAPP"."XP_ENTITIES_CONFIGS" failed to load/unload and is being skipped due to error:
ORA-29913: error in executing ODCIEXTTABLEOPEN callout
ORA-29400: data cartridge error
ORA-26065: check constraint cannot reference column, SYS_NC00005$, in direct path load 
```

表 XP_ENTITIES_CONFIGS 有一个 XML 数据类型列。表本身已成功重新创建，但数据丢失。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:16:02.833

Oracle 支持有几个点击量；最接近的看起来像错误 5574904。有点难以理解，但可能直到 11.2 才修复。

所述的解决方法是使用`exp`/`imp`代替；或者要在您导入的架构中删除约束（因为您已经说过它创建了表），请`impdp`使用附加参数重试`tables=XP_ENTITIES_CONFIGS table_exists_action=append`，然后在导入数据后重新创建约束。

很可能是别的东西，所以如果有疑问，请向 Oracle 提出服务请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T19:24:59.313

**检查您的文件的校验和！**

我在服务器之间移动转储文件时遇到了文件损坏问题。花了很长时间才发现我损坏了一个文件。

# javascript - 将引号传递给 Javascript 函数中的 html 元素内的 onclick 事件

> ID：11126603
> 
> 赞同：3
> 
> 时间：2012-06-20T19:15:53.390
> 
> 标签：javascript, dom-events

这似乎比我见过的类似帖子复杂了一步：*我*
在 js 函数中创建了以下行：

`content.push("<input type='button' value='Use This Location' onclick='alert(" + result.location.y + "," + result.location.x + ")'/>");`

结果是一个带有以下内容的按钮： `onclick="alert(40.7445068,-73.9834671)"`

但我希望结果是： `onclick="alert('40.7445068,-73.9834671')"`

或者..你知道..只是..但是它需要让警报显示文本，而不仅仅是第一个数字。

如何重新格式化原始块中的引号以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:20:30.837

```
content.push("<input type='button' value='Use This Location' onclick='alert(\"" +
result.location.y + ',' + result.location.x + "\")'/>"); 
```

编辑：修正了一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:27:00.740

您应该能够添加转义的单引号（例如 \'）

所以改变

```
onclick='alert(" + result.location.y + "," + result.location.x + ")' 
```

至

```
onclick='alert(\'" + result.location.y + "," + result.location.x + "\')' 
```

编辑：格式问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-11T19:11:20.447

非常感谢各位！您的输入（无意放置）导致了一个可行的解决方案： `content.push('<input type="button" value="Use This Location" onclick="alert(&#39;'+ result.location.y + "," + result.location.x + '&#39;)" />');`

由于它是 Javascript 中 HTML 中的 Javascript，我将 push 方法作为单引号而不是原来的双引号传递，然后我能够使 html 元素双引号和`onclick`单引号。然后我不得不使用`&#39;`而不是`&#34`这样我才能在 HTML 中插入一个特殊的单引号。

再次，非常感谢。所有评论都是解决问题的关键/我很感激！

# ruby-on-rails - Mongoid：如何链接急切加载？

> ID：11126606
> 
> 赞同：3
> 
> 时间：2012-06-20T19:16:20.430
> 
> 标签：ruby-on-rails, mongoid, eager-loading

我有三个模型：Project、LineItem 和 Spec

项目有很多订单项 项目有很多规格

我想出了如何在 LineItem 查询中急切加载项目：

```
LineItem.all.includes(:project) 
```

但我似乎无法让渴望加载的项目也渴望加载他们的规范。一条链如何在 Mongoid 中加载如此急切的负载？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-07T22:27:50.613

`mongoid_includes`应该为你回答这个问题[https://github.com/ElMassimo/mongoid_includes](https://github.com/ElMassimo/mongoid_includes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:55:56.723

如果急切加载如此重要，也许您应该考虑嵌入这些规范。我知道这不是您问题的答案，但它可能是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-19T15:02:46.190

在这里查看[Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

```
LineItem.all.includes(:project => :specs)
# or
LineItem.all.includes({project: :specs}) 
```

# windows - Delphi FTP上传访问冲突

> ID：11126607
> 
> 赞同：0
> 
> 时间：2012-06-20T19:16:26.290
> 
> 标签：windows, delphi, ftp, indy

我正在尝试在我的网络空间中上传文件 .txt，但是问题开始了，我尝试的代码是这样的：

```
uses
Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
Dialogs, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient,
IdExplicitTLSClientServerBase, IdFTP, StdCtrls;

procedure TForm1.Button1Click(Sender: TObject);
var
FTP:tidftp;
begin
FTP.Host:='website.altervista.org';
FTP.Username:='website';
FTP.Password:='password';
FTP.Port:=25;
FTP.Connect;
FTP.Put('C:\Users\user\Desktop\text.txt');
FTP.Quit;
end; 
```

我没有收到任何错误，但是当我启动程序并单击按钮时，出现错误：

![在此处输入图像描述](../Images/275febc8b67851238c57db330d54c4aa.png)

紧接着又是：

![在此处输入图像描述](../Images/965de4fc95470999766c06fc7bd4a4e7.png)

按钮消失。

为什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:19:31.650

您必须创建第一个实例 `tidftp`。

```
var
FTP:tidftp;
begin
FTP:=Tidftp.Create(nil); //create the instance
try
  FTP.Host:='siteweb.altervista.org';
  FTP.Username:='siteweb';
  FTP.Password:='password';
  FTP.Port:=25;
  FTP.Connect;
  FTP.Put('C:\Users\user\Desktop\text.txt');
  FTP.Quit;
finally
  FTP.Free;
end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T19:20:33.510

在访问它之前，您必须`TIdFTP`为局部变量实例化该对象。`FTP`所以尝试使用这个：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  FTP: TIdFTP;
begin
  FTP := TIdFTP.Create(nil);
  try
    FTP.Host := 'serioussamhd.altervista.org';
    FTP.Username := 'serioussamhd';
    FTP.Password := 'password';
    FTP.Port := 21;
    FTP.Connect;
    FTP.Put('C:\Users\user\Desktop\text.txt');
    FTP.Quit;
  finally
    FTP.Free;
  end;
end; 
```

# wordpress - Disqus 评论在顶部没有通知

> ID：11126608
> 
> 赞同：2
> 
> 时间：2012-06-20T19:16:28.420
> 
> 标签：wordpress, comments, disqus

![在此处输入图像描述](../Images/e64da5a3497cf90ba6d597d273cf194a.png)

我想删除您的网站正在使用新的 Disqus。查看 Disqus 2012 常见问题解答或访问... 有什么地方可以关闭此通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:35:11.707

有人在另一个线程上回复了这个请求：[如何从柜台中删除 Disqus 反应？](https://stackoverflow.com/questions/11137162/how-to-remove-disqus-reaction-from-the-counter)但对我来说，不清楚这个 CSS 应该放在哪里，所以如果有人能帮助解决这个问题，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:21:05.337

您可以在 disqus 上使用自定义 CSS 代码，只需将其添加到外观部分[http://disqus.com/admin/settings/appearance/](http://disqus.com/admin/settings/appearance/)

```
#disqus_thread #help-notice{
     display:none;
} 
```

# ubuntu - 设置 autoconf 和 automake 的 Ubuntu 问题

> ID：11126612
> 
> 赞同：0
> 
> 时间：2012-06-20T19:17:10.237
> 
> 标签：ubuntu, installation, autoconf, automake

我正在尝试在最新的 Ubuntu 上安装 autoconf 和 automake 工具，但是我在网上找不到任何可以帮助我做到这一点的东西时遇到了问题，我尝试过 apt-get update 但我没有运气。我需要这些工具来安装机器翻译程序。所以我的问题是我究竟如何安装这两个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:39:59.203

这可能更适合询问：[http](http://askubuntu.com) ://askubuntu.com 。但你应该做的就是：

```
sudo apt-get install automake autoconf 
```

# ruby-on-rails - 回形针 - 样式 lambda

> ID：11126618
> 
> 赞同：0
> 
> 时间：2012-06-20T19:17:35.990
> 
> 标签：ruby-on-rails, paperclip

我有一个脚本，我可以从中加载我的 rails 环境。(

当我构建附件并保存其父级时，所有保存并由附件样式创建的内容始终为 ["100>", "jpg"]

我的脚本：

```
require './config/environment.rb'
house = House.find(1)
house.attachments.build(doc: File.new('myfile.pdf'), category_id: 2)
house.save 
```

楷模

```
House < AR::Base
  has_many :attachments, :as => :attachable
end

Attachment < AR::Base
  ### has_attached_file :doc, styles: lambda {|attachment| {thumb: (attachment.instance.category_id == 2 ? ["500>", 'jpg'] : ['100>', 'jpg']} )}  
  has_attached_file :doc, styles: lambda {|attachment| {thumb: (attachment.instance.category_id == 2 ? ["500>", 'jpg'] : ['100>', 'jpg'] )}}  #category_id is always nil at this point but still still saves in the database 
  belongs_to :attachable, polymorphic: true
end 
```

我猜我在这里忽略了一些愚蠢的事情，但我会很感激任何指针:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:28:47.530

你在那个 lambda 上的语法看起来有点古怪。我不确定那个三元运算符是如何不叫“意外的'：'”的。

试一试：

```
Attachment < AR::Base
  has_attached_file :doc, styles: lambda {|attachment| { thumb: (attachment.instance.category_id == 2 ? ["500>", 'jpg'] : ['100>', 'jpg'])}}
  belongs_to :attachable, polymorphic: true
end 
```

# javascript - 阻止重音字符

> ID：11126619
> 
> 赞同：0
> 
> 时间：2012-06-20T19:17:50.407
> 
> 标签：javascript

> **可能重复：**
> [过滤文本字段数值的正确方法是什么？](https://stackoverflow.com/questions/10866444/which-is-the-proper-way-of-filtering-numeric-values-for-a-text-field)

我有一个文本字段，其中只允许使用数字。我使用了正则表达式 /^[0-9]/ ，它阻止了大部分字符。但不是选项 +e ，选项 +n 等。

使用 Macosx 10.7.3

尝试在文本字段的 keydown 和 keyup 上完全阻止 alt 键，但没有运气

```
function block(evt) {
if(evt.altKey==true)
return false;
return true;
} 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:22:44.433

试试这个功能。它查看字符代码，如果不是数字则返回 false。48 和 57 来自[ASCII 表](http://www.cdrummond.qc.ca/cegep/informat/Professeurs/Alain/images/ASCII1.GIF)。如果您在`onkeydown`活动中使用它，它也会阻止粘贴。

```
function isNumberKey(evt)
{
    var charCode = (evt.which) ? evt.which : event.keyCode
    if (charCode < 48 || charCode > 57)
        return false;

    return true;
} 
```

[**演示**](http://jsfiddle.net/9GJ4E/)

# java - 将 JMS 连接到 glassfish 时出错

> ID：11126620
> 
> 赞同：2
> 
> 时间：2012-06-20T19:17:53.170
> 
> 标签：java, glassfish, jms

当我尝试`DomainRoot`使用以下内容时：

```
final TLSParams tlsParams = new TLSParams( TrustAnyTrustManager.getInstanceArray(), null );
        final AppserverConnectionSource conn 
            = new AppserverConnectionSource(
                    AppserverConnectionSource.PROTOCOL_RMI, 
                        "localhost", 4848, "admin",
                            "adminadmin", tlsParams, null);
DomainRoot domainRoot = conn.getDomainRoot(); 
```

我得到以下异常：

> ProxyFactory.getInstance：尝试创建新 ProxyFactory 失败：java.io.IOException：无法检索 RMIServer 存根：javax.naming.CommunicationException [根异常是 java.rmi.ConnectIOException：JRMP 连接建立期间出错；嵌套异常是：

任何人都可以帮忙吗？谢谢。

# apache-flex - Adobe Air 软件的注册或许可

> ID：11126621
> 
> 赞同：2
> 
> 时间：2012-06-20T19:17:56.417
> 
> 标签：apache-flex, air, licensing

我正在制作一个需要在 Windows、Mac 和 Linux 上运行的 Adob​​e Air 软件。让我感到困惑的问题之一是注册/许可过程。

基本上，我希望用户试用一个月的完整版软件，然后如果他们觉得有用就购买。我无法弄清楚许可如何在所有这些平台上工作。

*   Mac 和 Linux 中没有可以存储试用信息的注册表。
*   如果我以某种方式在数据库中本地维护东西，发布试用版，如果用户只是卸载并重新安装软件，试用版将重新开始 30 天。
*   不想将东西存储在文件系统中，因为这甚至不接近实际的身份验证。
*   对软件进行在线激活会消耗一些资源并且具有网络依赖性，因此该选项也超出了范围。

我应该选择什么方式？我还有什么其他选择？adobe 是否为此提供任何支持...我可以免费使用的任何 3rd 方库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:41:30.370

我使用 LimeLM (https://wyday.com/limelm) 为我的 Adob​​e Air 应用程序（Windows 和 Mac，没有 linux）进行许可。和你一样，我有一个 30 天的试用期，LimeLM 有一个与硬件相关的试用功能，所以卸载/重新安装不会给用户另一个免费试用版。

LimeLM 需要网络激活，但您可以允许宽限期，因此必须有人连接到网络，例如，每 30 天使用一次才能激活。

我同意上面的帖子，即 EncryptedLocalStore 也是一个好主意。

不幸的是，Adobe AIR 的许可选项是有限的。LimeLM 功能强大且价格便宜（它们不会降低购买价格）。我查看了 NitroLM，它非常昂贵（我认为他们需要购买价格的 30%）并且非常复杂 - 我永远无法理解它。Zaqon也在那里。我不喜欢他们的许可界面对我们用户的看法。LimeLM 是最灵活的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:35:05.410

您是否尝试过[EncryptedLocalStore](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/data/EncryptedLocalStore.html)？即使在应用程序卸载后，存储在 ELS 中的数据仍然存在。

# joomla - Joomla 2.5 的组件分页

> ID：11126623
> 
> 赞同：2
> 
> 时间：2012-06-20T19:18:01.563
> 
> 标签：joomla, pagination, joomla-extensions, joomla2.5, joomla-component

我正在为 Joomla 2.5 编写一个新组件，但在处理前端（用户站点）上的分页时遇到了问题。

我查看了核心组件（com_content）以了解它们是如何做到的，但我仍然无法复制它。所以当我把这行放在我的 view.html.php 文件中时：

```
$pagination = $this->get('Pagination'); 
```

我得到了 JPagination 对象并可以打印出来，但我无法让它们像下面那样正确显示（它们在 com_content 中是如何做到的）

```
echo $this->pagination->getPagesCounter();
echo $this->pagination->getPagesLinks(); 
```

我错过了什么？我还需要什么？我的 Models/thisview.php 文件中是否需要更多功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:20:45.580

看起来你应该这样做：

```
$pagination = $this->get('Pagination');
echo $pagination->getPagesCounter(); 
```

# android - Android 2.0 中的网格布局？

> ID：11126625
> 
> 赞同：3
> 
> 时间：2012-06-20T19:18:04.730
> 
> 标签：android

我正在尝试制作类似于网格布局的布局，但我受限于 Android 2.0

有没有人有任何想法？

```
<?xml version="1.0" encoding="UTF-8"?>
<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:columnCount="2"
    android:rowCount="13" >

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="SN : " />

    <TextView
        android:id="@+id/snTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="Ver : " />

    <TextView
        android:id="@+id/verTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="Type : " />

    <TextView
        android:id="@+id/typeTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="OD : " />

    <TextView
        android:id="@+id/odTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:text="Closing Mode"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:id="@+id/closingModeTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:text="CT : "
        android:layout_gravity="fill_horizontal" />

</GridLayout> 
```

编辑：

嗯，我大约半小时前开始在 .xml 文件中编码，我将在上面发布代码。为了看看它的第一部分看起来如何，我去了图形布局，然后出现了以下错误......

“com.android.layoutlib.bridge.MockView 无法转换为 android.view.ViewGroup 异常详细信息记录在 Window>Show View> Error Log 中找不到以下类：- GridLayout(Fix Build Path, Edit XML)”

我猜可能是其他问题，但在图形布局调色板中没有列出 GridLayout，而其余的是（线性（垂直/霍兹）、相对、框架、片段、表格等）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T19:26:08.433

`GridLayout`已向后移植以与 API 级别 7 及更高级别兼容。它是（某种）支持库的一部分。下载支持库后，您会在本地 sdk 文件夹中找到一个 Android 库项目，该文件夹位于：

```
<sdk_folder>\extras\android\compatibility\v7\gridlayout 
```

将其设置为您正在处理的项目的依赖项。之后，您需要确保将整个项目中的所有引用都指向该版本，而不是 15 级版本，以支持 ICS 之前的设备。用法应该是相似的，如果不完全相同的话。

另请参阅：[android API 10 中的网格布局支持](https://stackoverflow.com/questions/10278358/grid-layout-support-in-android-api-10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:28:28.957

如果您想要在每行中具有相同数量的列的布局，则 GridView 是一种选择。这样做的好处是您可以定义一个适配器来将其分配给 gridView ，它将保存您的所有视图。您可以在 android 上找到大量关于此的示例。

现在，另一种选择是您想要一个布局，该布局实际上每行中的列数不相等（与 google play 应用程序相同）。在这种情况下，您仍然可以使用 GridLayout。它在与最新版本一起下载的兼容性库中可用。它可以作为库项目添加到您的应用程序中，并以与在 android 4.0+ 中使用它的方式完全相同的方式使用它。我认为这也需要添加兼容性库。我认为此时您不会找到太多关于如何将兼容性网格布局添加到您的项目的文档，但这与添加任何库项目相同。您可以在兼容性 v7 下的 android sdk 文件夹中找到项目代码。

# c++ - timespec.tv_sec 总是返回 0

> ID：11126626
> 
> 赞同：0
> 
> 时间：2012-06-20T19:18:05.330
> 
> 标签：c++, time, clock

我只是在学习如何使用clock_getres（网络上几乎没有很好的文档）。我的代码如下所示：

```
timespec now;
clock_getres(CLOCK_REALTIME,&now);
std::cout<<statut_cast<int>(now.tv_sec)<<","<<static_cast<int>(now.tv_nsec)<<std::endl; 
```

无论我何时运行此代码，输出始终为 0,1 谁能解释为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T19:33:18.833

用于`clock_gettime`返回当前时间，而不是`clock_getres`返回时钟的分辨率。

[http://pubs.opengroup.org/onlinepubs/009604599/functions/clock_getres.html](http://pubs.opengroup.org/onlinepubs/009604599/functions/clock_getres.html)：

> 该`clock_getres()`函数应返回任何时钟的**分辨率**。
> 
> 该函数应返回指定时钟`clock_gettime()`的当前值， 。`tp``clock_id`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T19:42:13.040

这是正确的行为 - 输出是`0,1`因为您试图获得分辨率的时钟具有纳秒分辨率。因此`now.tv_nsec=1`和`now.tv_sec=0`。如果它没有纳秒分辨率，则输出将是`0,0`.

# installation - 使用一个 NSIS 安装程序在 32 位操作系统上安装 32 位二进制文 件并在 64 位操作系统上安装 64 位二进制文 件可能吗？

> ID：11126629
> 
> 赞同：14
> 
> 时间：2012-06-20T19:18:18.147
> 
> 标签：installation, nsis

我目前有两个用于我维护的产品的 WIX 安装程序。一种用于 32 位操作系统，一种用于 64 位操作系统。我不想维护两个单独的安装程序，而是想将它们组合成一个 NSIS 安装程序，该安装程序可以“确定”操作系统的“位数”，然后将适当的二进制文件复制到程序目录中。有没有人有这方面的经验并且可以提供 NSIS 可以用来制作安装程序的工作示例脚本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T19:29:50.537

[x64.nsh](https://sourceforge.net/p/nsis/code/HEAD/tree/NSIS/trunk/Include/x64.nsh)有一些辅助宏，您可以安装到`$programfiles32`或`$programfiles64`

**编辑：**

```
Function .onInit
StrCpy $instdir $programfiles32\MyApp
${If} ${RunningX64}
  StrCpy $instdir $programfiles64\MyApp
${EndIf}
FunctionEnd

...

Section
Setoutpath $instdir
${If} ${RunningX64}
  File /r build\64\*
${Else}
  File /r build\32\*
${EndIf}
SectionEnd 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T20:19:54.677

我相信我想通了......我还没有测试过这个，但它应该可以工作......

答案是为每组文件创建两个“部分”。`SEC0000`对于 32 位和`SEC0001`64 位文件。然后，

```
!include x64.nsh

Function .onInit
  #Determine the bitness of the OS and enable the correct section
  ${if} ${RunningX64}
    SectionSetFlags ${SEC0001} 17
    SectionSetFlags ${SEC0000} 16
  ${else}
    SectionSetFlags ${SEC0001} 16
    SectionSetFlags ${SEC0000} 17
  ${endif}
FunctionEnd 
```

我相信函数中也需要相同的逻辑，`un.onInit`以便卸载程序知道要删除哪些文件......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-05T16:00:52.727

对于使用 3.0a0 的简单通用安装程序，我通过一些实验发现以下内容对我有用：

```
!include x64.nsh
Function .onInit
  #Determine the bitness of the OS and enable the correct section
  ${If} ${RunningX64}
    SectionSetFlags ${SEC0000}  ${SECTION_OFF}
    SectionSetFlags ${SEC0001}  ${SF_SELECTED}
  ${Else}
    SectionSetFlags ${SEC0001}  ${SECTION_OFF}
    SectionSetFlags ${SEC0000}  ${SF_SELECTED}
  ${EndIf}
FunctionEnd 
```

我只需要记住将函数放在引用的部分之后。我的每个部分都在各自的 32 位 / 和 64 位 / 目录中简单地引用了同名 .exe，因此我的卸载程序不需要任何特殊处理。我没有在 32 位系统上测试过它，但它确实适用于 64 位系统。

例子：

```
section "64-bit" SEC0001
  messageBox MB_OK "64-BIT!"
  File "C:\foo\64-bit\some-utility.exe"
sectionEND 
```

# django - 根据 Django 版本覆盖管理模板

> ID：11126632
> 
> 赞同：1
> 
> 时间：2012-06-20T19:18:29.753
> 
> 标签：django, django-admin, django-templates

有没有办法根据 Django 版本用不同的文件覆盖管理模板？

我已经`admin/index.hml`从 Django 管理模板复制，以实现此目的：[Django admin, hide a model](https://stackoverflow.com/questions/2431727/django-admin-hide-a-model)，但在不同版本的 Django 中该模板有变化，有时分页符（特别是`ADMIN_MEDIA_PREFIX`在 Django 1.4 中弃用）

我想将我的站点安装在具有不同版本 Django 的许多服务器上，但只使用一个自动通知版本的统一代码。那可能吗？

我已经检查了[Django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)，但我没有找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:48:39.047

该类`ModelAdmin`具有可以在子类中指定的各种模板设置。在 Django 1.3 中，这些是（在`django.contrib.admin.options`第 271 行）：

```
add_form_template = None
change_form_template = None
change_list_template = None
delete_confirmation_template = None
delete_selected_confirmation_template = None
object_history_template = None 
```

同样，`AdminSite`具有各种模板设置（在`django.contrib.admin.sites`第 35 行）：

```
index_template = None
app_index_template = None
login_template = None
logout_template = None
password_change_template = None
password_change_done_template = None 
```

您可以覆盖这些子类或在代码的中心位置（例如`__init__.py`文件）中指定它们。例如：

```
from django.contrib.admin.sites import AdminSite
AdminSite.index_template = '...' 
```

然后，您可以根据当前的 Django 版本改变模板。您可能需要检查早期 Django 版本中的代码是什么样的，因为我没有检查所有这些变量是否存在于早期的 Django 管理代码中。

# javascript - 如何在事件中写信给 ko.observable？

> ID：11126633
> 
> 赞同：0
> 
> 时间：2012-06-20T19:18:29.927
> 
> 标签：javascript, knockout.js, knockout-2.0

我正在使用敲除来进行绑定，并且正在开发共享模块。基本上，有几个链接，它们基本上都使用不同的值调用相同的函数。例如，当您单击 Facebook 时，所有服务的值为“Facebook”，而当您单击 Twitter 时，则调用值为“Twitter”的函数。但基本上调用相同的函数。现在没有办法从 HTMl 指定参数，因为我所能做的就是 data-bind="click: Share" 之类的。在这里我们可以看到我不能在这里指定任何参数。

现在我可以在我的 js 文件中创建一个 ko.observable ，这个函数将作为参数......但是当点击不同的链接时，我需要一种方法来从 html 点击事件中写入该 observable 。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:44:08.920

Knockout 将当前上下文传递给数据绑定中使用的任何函数。这意味着如果您调用`click: share`它，它将传入您绑定的服务。[这是一个演示这个的小提琴](http://jsfiddle.net/tyrsius/zP7L2/1/)，但我会在这里输入代码，因为它非常基本。

对于更复杂的绑定，您的对象可能有一个`name`属性，您可以使用它来代替`$data`，以及在您的`share()`函数中使用。

HTML：

```
<ul data-bind="foreach: services">
    <li data-bind="text: $data, click: $parent.share" />
</ul>​ 
```

Javascript：

```
data = [
"Facebook",
"Twitter",
"Flickr",
"SomeOtherWeb2.0 Service"
];

var ViewModel = function(data) {
    this.services = ko.observableArray(data);
    this.share = function(service){
        alert("You Clicked on: " + service);
    };

};

ko.applyBindings(new ViewModel(data));​ 
```

# asp.net-mvc - ASP.NET MVC 请求上下文详细信息

> ID：11126636
> 
> 赞同：0
> 
> 时间：2012-06-20T19:18:41.187
> 
> 标签：asp.net-mvc, authentication

我可以在哪里插入自定义提供程序来设置请求上下文？

我想在“从属”模式下运行 ASP.NET MVC 应用程序，同时逐渐从旧系统转换功能。每个请求都有一个 cookie，我想获取 cookie，进行外部调用以将其解析为用户身份，并为请求的其余部分设置该用户身份。

我可能会设置一个表单身份验证 cookie，或者使用 Session，但关于身份验证的事实来源必须是每个请求的外部设置的 cookie。

最好的方法是什么？我在哪里插入？我查看了 Authentication 提供程序和 Authorization 属性，但这些似乎都不适合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:32:51.083

我会认为 HttpModule 非常适合这种情况？

如果我理解正确的话，我最近在一个项目上做了类似的事情：

```
 public class UserSessionHttpModule : IHttpModule
{

    private HttpApplication mApplication;

    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        mApplication = context;
        context.BeginRequest += new EventHandler(CheckUserSession);
    }

    private void CheckUserSession(Object sender, EventArgs e)
    {
        var extension = Path.GetExtension(mApplication.Context.Request.Path);

        if (extension == "" || extension == ".aspx")
        {
            var userSessionService = ObjectFactory.GetInstance<IUserSessionService>();
            userSessionService.CheckUserSession();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:33:09.413

您可以覆盖页面中的`Init`方法`Global.asax`并监听`PostAuthenticateRequest`事件，事件在身份验证后触发，因此您可以从表单中更改您喜欢的任何值验证 cookie 并注入您自己的

# css - 下拉菜单帮助 CSS

> ID：11126641
> 
> 赞同：0
> 
> 时间：2012-06-20T19:18:53.557
> 
> 标签：css, drop-down-menu

我有一个正在使用的下拉菜单，但无法让它正常工作。

```
<ul id="nav" class="dropdown dropdown-linear dropdown-columnar">
    <a href="http://www.example.com/index.php"><li>Home</li></a>
    <a href="http://www.example.com/products/index.php"><li class="dir">Products
        <ul>
            <li class="dir"><a href="http://www.example.com/buckyballs/index.php">Buckyballs</a></li>
            <li class="dir"><a href="http://www.example.com/calicocritters/index.php">Calico Critters</a></li>
            <li class="dir"><a href="http://www.example.com/games/index.php">Games</a></li>
            <li class="dir"><a href="http://www.example.com/magnetics/index.php">Magnetics</a></li>
            <li class="dir"><a href="http://www.example.com/playmobil/index.php">Playmobil</a></li>
            <li class="dir"><a href="http://www.example.com/quercetti/index.php">Quercetti</a></li>
        </ul>
    </li></a>
    <a href="http://www.example.com/calendar/index.php"><li>Calendar</li></a>
    ...
</ul> 
```

菜单是白色的，带有红色文本，然后当我将鼠标悬停在它们上时，从红色背景变为白色文本。但是，当我将鼠标悬停在 Products 上时，当我将鼠标悬停在 li 标签上时，整个东西都会变红，而当我将鼠标悬停在它上面时，文本只会变白。但是当我将鼠标悬停在下降的东西上时，它又是红色的。请参阅 redballoontoystore.com 上的导航栏。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:23:50.940

我很确定，如果您使用锚标签切换列表项元素的嵌套，这将解决您的问题：

```
<a href="http://www.example.com/buckyballs/index.php"><li class="dir">Buckyballs</li></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:26:10.293

添加

```
.dir:hover a {
    color: white!important;
} 
```

到你的 CSS 代码。`!important`如果您将规则放在正确的位置，这可能是可选的。

# javascript - 在 javascript 和浏览器中如何处理循环引用？

> ID：11126643
> 
> 赞同：0
> 
> 时间：2012-06-20T19:19:03.943
> 
> 标签：javascript, recursion, buster.js

我一直在探索各种 MV* 框架中的模式，今天注意到一个奇怪的模式，这似乎会导致一些问题

模型原型。有财产`collections: []`

集合原型。有财产`models: []`

当一个集合获得一个新模型时，它被推入`collection.models`，但模型本身也被装饰以知道它是其成员的集合 - 即集合实例被推入`model.collections`。

`model.collections[0]`包含 a 的集合也是 `.models[0]`具有集合属性的模型......等等。

最基本的：

```
var A = function() {
    this.collections = [];
},
    B = function() {
        this.models = [];
        this.add = function(what) {
            what.collections.push(this);
            this.models.push(what)
        };
    };

var model = new A();
var collection = new B();

collection.add(model); 
```

这是有罪的一方：[https](https://github.com/lyonbros/composer.js/blob/master/composer.js#L310-313) ://github.com/lyonbros/composer.js/blob/master/composer.js#L310-313 ，然后进一步向下推入模型：[https ://github.com/ lyonbros/composer.js/blob/master/composer.js#L781-784](https://github.com/lyonbros/composer.js/blob/master/composer.js#L781-784)

我想会有一定程度的惰性评估——在需要之前不会使用东西。该代码 - 就其自身而言 - 有效。

但我也在通过 buster.js 编写测试，我注意到所有依赖的测试都在`sinon.spy()`生成`InternalError: too much recursion`(FF) 或`RangeError: Maximum call stack size exceeded`(Chrome)。捕获的 FF 甚至没有响应地崩溃，这是我以前从未遇到过的 buster 测试驱动程序 - 它甚至在我的午休时间使用了 3.5gb 的内存。

经过相当多的调试后，我取消了参考存储，突然间，一切又恢复正常了。诚然，删除`spy()`断言也有效，但这不是重点。

所以，问题是 - 有这样的代码，是否可以接受，浏览器将如何解释它，瓶颈是什么以及如何用指向它们所属集合的指针来装饰模型（可能是集合控制器和集合 uid或者其他的东西）。

将失败的 buster.js 测试的完整要点：[https ://gist.github.com/2960549](https://gist.github.com/2960549)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:26:24.337

浏览器不在乎。问题是您使用的工具无法通过对象图检查循环引用链。这些是完全合法的，至少如果你想要它们并期待它们的话。

如果您想到一个对象及其属性，以及通过这些属性直接或间接引用的对象，那么该程序集就构成了一个*图*。如果可以跟随参考并回到您开始的地方，那么这意味着该图有一个*循环*。语言允许循环绝对是一件好事。在给定系统中是否合适取决于相关代码。

因此，例如，如果图是循环的，则遍历对象图而不检查对象是否已访问过的递归函数肯定会触发“递归过多”错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:29:42.330

只有两个对象相互引用（称为“循环引用”）。

```
var a, b = {a: a={b: b}};
// a.b: pointer to b
// b.a: pointer to a 
```

根本没有递归。如果您遇到错误`too much recursion`或`Maximum call stack size exceeded`错误，则需要有一个过于频繁调用的函数。例如，当您尝试克隆对象并递归属性而不关心循环引用时，可能会发生这种情况。您需要进一步查看代码，错误消息也应包含（非常长的）调用堆栈。

# java - 从通用抽象类扩展的 Java 类之间的转换

> ID：11126644
> 
> 赞同：0
> 
> 时间：2012-06-20T19:19:05.620
> 
> 标签：java, casting, abstract

我有一个有趣的情况，EMF 强迫我进入：

```
abstract class AbstractDog{
   ...
}

public class Dog extends AbstractDog{
   < implemented code >
}

public class DogTemplate extends AbstractDog{
   < implemented code identical to Dog >
} 
```

在 Dog 和 DogTemplate 中找到的代码实际上是相同的（不要问 - 我们的系统非常依赖 Eclipse 的东西，这是唯一的方法）。我需要从 DogTemplate 转换为 Dog，但是`java.lang.ClassCastException`当我这样做时会得到`Dog d = (Dog) dogTemplateInstance`。我完全理解为什么会发生这个异常，所以请不要告诉我为什么。

我需要知道的是，是否有任何方法可以利用两个类之间的共同祖先关系来实现这种转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:24:13.790

无法`DogTemplate`将 a 强制转换为 a `Dog`，因为`Dog`它甚至不能扩展`DogTemplate`。只有 Dog 实例可以转换为 Dog。

如果可能的话，您可以使用将 DogTemplate 的所有字段复制到 Dog 的构造函数创建一个新的 Dog 实例。或者，您可以对这两个类使用通用接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:27:23.907

使 dog 和 dogTemplate 实现相同的接口。在此接口中，声明 Dog 的公共合约/行为。

然后您将能够投射 DogTemplate -> IDog。

# c - 负数如何存储在内存中？如何知道位表示？

> ID：11126645
> 
> 赞同：3
> 
> 时间：2012-06-20T19:19:09.463
> 
> 标签：c, binary, bit-manipulation, bit

我知道 MSB、LSB、符号和幅度 1 和 2 的补码等。现在，我想知道我是否正在编写和编程进行一些位操作，我将如何检查内存中的实际位级数据？

即`int a = -1;`我怎么知道它是4 位表示`1001`还是4`1110`位`1111`表示？

如何找出我的实现用来表示负数的方法？

我正在寻找某种方法来检查 C 程序的位级数据。

我当前的平台是 Ubuntu 12.04 LTS。再一次，问题不在于它是如何完成的。它是关于如何找出或证明它是以某种方式完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:25:02.503

```
union { int i; unsigned u; } x;
x.i = -1; 
```

现在`x.u`为您提供具有相同位的无符号整数。只有一种方法可以表示无符号数，因此您可以检查它。（作为提示：它很可能是二进制补码。）

```
printf("%x\n", x.u); 
```

上面的打印语句将打印出无符号整数的十六进制表示，您可以使用它来确定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:33:08.287

```
void showBit(int num, int nBit)//nBit -> number of bits
{
    unsigned int temp = 1<<(nBit-1), i;

    for(i=0; i<nBit; ++i)
    {
        printf("%d ", ((num&temp)?1:0) );
        temp = temp>>1;
    }
    printf("\n");
} 
```

您可以使用此函数打印二进制表示。在[ideone](http://ideone.com/Ioi3I)上看到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T11:06:05.583

在 C 中，负数以 2 的补码格式表示有符号数。

这样做是为了避免任何编译器（我，即使 int 是 8 位或 16 位或 32 位等它也可以工作）。

在您的情况下，如果您的编译器将 int 解释为 8 位，则 1111 1111 将被存储。只要第一位（符号位）为 1，编译器就会理解它是一个负数，并且理解该数字必须是两者的互补。这不过是 0000 0001，带有负号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T19:25:48.830

通过应用按位运算。例如，您可以通过执行测试是否设置了第 n 位`a & (1<<n)`（循环应用它，然后您得到整数）。

**编辑：**但这仅在内部表示为二进制时才有效。当使用不同的系统（例如，俄罗斯人在 70 年代拥有具有三进制逻辑和数字系统的计算机，而波兰人使用负二进制系统）时，这不会给出正确的内部使用格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T19:26:53.517

一种简单的方法是在调试器中检查变量，如下所示：

```
(gdb) p/t var 
```

`p/t`说打印二进制表示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T20:12:00.653

你甚至可以使用**union**。

```
union num
{
    int f;
    char c[4];
};

void printBinary(union num u)
{
    int i,t,j;

    for(i=sizeof(u)-1; i>=0; i--)
    {
            for(j=0,t=128; j<8; j++,t>>=1)
                    printf("%d",(u.c[i]&t)?1:0);
            printf(" ");
    }
}

int main() 
{
    union num n;
    n.f=10;
    printBinary(n);
    return 0;
} 
```

见这里：http: [//ideone.com/i9YCt](http://ideone.com/i9YCt)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T21:16:28.207

> 如何找出我的实现用来表示负数的方法？

方法如下：

```
unsigned int a = -1;
swicth (a & 3U)
{
    case 3:
        printf("two's complement\n");
        break;

    case 2:
        printf("one's complement\n");
        break;

    case 1:
        printf("sign and magnitude\n");
        break;

    default:
        printf("compiler broken\n");
        break; 
} 
```

最终答案实际上在您的编译器文档中，需要记录使用哪种签名表示。例如，对于`gcc`：

> *有符号整数类型是使用符号和大小、二进制补码还是一个补码表示，以及异常值是陷阱表示还是普通值 (C99 6.2.6.2)*
> 
> GCC 只支持二进制补码整数类型，所有位模式都是普通值

[http://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html](http://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-21T14:29:07.720

由数字的第 8 位标识的正数和负数。如果第 8 位为 0，则为正，否则为负。

```
For example x=8
so In binary x=8=0000 1000 (It is positive number, so eight bit is 0 from right to left)

For negative x = -8
The negative numbers are represented in binary using 2's complement usually.
 so x = -8 

step 1 binary of        8 = 0000 1000
step 2 1's complement     = 1111 0111
step 3 2's complement     =         1
                         y = 1111 1000 =248(so it represents the negative because 8th bit is 1 then it follows the below formula)

The formula for getting negative value from binary representation is 2^8-y
 so 256-248=8 
```

# heroku - Heroku db：推送问题

> ID：11126652
> 
> 赞同：5
> 
> 时间：2012-06-20T19:19:27.047
> 
> 标签：heroku, gem

我正在尝试将本地 Postgres 数据库推送到我的 Heroku 应用程序，并按照 Heroku 指南进行操作，`heroku db:push`但出现以下错误：

```
leonsas@leonsas-VirtualBox:~$ heroku db:push
 !    Taps Load Error: cannot load such file -- sqlite3
 !    You may need to install or update the taps gem to use db commands.
 !    On most systems this will be:
 !    
 !    sudo gem install taps 
```

我已经试过了`sudo gem install taps`，`sudo gem install sqlite3`但我不能让它工作。有什么想法为什么在我使用 postgres 时尝试加载 sqlite3 db？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T01:10:00.440

在 postgres 实例之间迁移数据时，不再推荐使用 Taps 工具。请改为尝试[heroku-pg-transfer 。](https://github.com/ddollar/heroku-pg-transfer)

这仅在您使用[生产数据库](https://postgres.heroku.com/pricing)之一或新的[Heroku postgres 开发计划](https://devcenter.heroku.com/articles/heroku-postgres-dev-plan)时才有效。如果您仍在使用旧的共享数据库计划，我建议您切换到新的开发计划。

首先，在 Heroku 上找到您的数据库的 URL：

```
$ heroku config:get DATABASE_URL
postgres://yada:yada@ec2-107-21-122-141.compute-1.amazonaws.com:5432/123 
```

然后从本地数据库转移到 heroku 数据库：

```
$ heroku plugins:install https://github.com/ddollar/heroku-pg-transfer
$ heroku pg:transfer -f postgres://localhost/dbname -t postgres://yada:yada@ec2.../123 
```

由于 heroku-pg-transfer 工具利用了 postgres 的本机 pg_dump 工具，它是一个更具可预测性和弹性的工具。

# wpf - WPF 优化：从 StackPanel 插入/删除子项

> ID：11126656
> 
> 赞同：0
> 
> 时间：2012-06-20T19:19:34.357
> 
> 标签：wpf, user-controls, stackpanel

我经常将 20-30 个非常复杂的 UserControl 插入/删除到`StackPanel`. 所有用户控件都已创建并缓存以供重用。在重用控制之前，我清理旧的父级并记住控制。

像这样的操作在我的场景`StackPanel.Children.Remove`中`StackPanel.Children.Add`需要很多时间。

如何优化这些操作？例如，一次插入所有控件`StackPanel`或在集合修改期间冻结通知或其他？

请问谁知道有用的文章重新分级wpf优化（除了MSDN）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:25:31.897

您可以覆盖您的`OnCollectionChanged()`事件处理程序`ObservableCollection`，以一起禁用事件处理，或者将事件排队以供稍后处理。

请参阅此处的帖子，答案可以帮助您 - [https://stackoverflow.com/a/5491534/903056](https://stackoverflow.com/a/5491534/903056)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:30:20.377

我假设您需要研究虚拟化 UI 或数据加载（如果有）策略。

在这种特定情况下，使用控件`VirtualizingStackPanel`来减少 UI 绘制的内容。您可以在[此](http://bea.stollnitz.com/blog/?p=338)博客上获得更多信息。

# sql - SQL设置浮点精度

> ID：11126659
> 
> 赞同：11
> 
> 时间：2012-06-20T19:19:58.987
> 
> 标签：sql, floating-point, precision, truncate

对于正在转换为浮点数的 SQL int，如何设置浮点数的精度？

这是我想截断到小数点后两位或三位的选择：

```
AVG(Cast(e.employee_level as Float))avg_level, 
```

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-20T19:27:19.480

[在 TSQL 中，您可以为float](http://msdn.microsoft.com/en-us/library/ms173773.aspx)指定两种不同的大小，24 或 53。这会将精度分别设置为 7 位或 15 位。

如果您只想截断一组小数位数，则可以使用[ROUND](http://msdn.microsoft.com/en-us/library/ms175003.aspx)，即：

```
ROUND(AVG(CAST(e.employee_level as float)), 3) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:43:59.750

作为一般规则，您不能为浮点数指定小数点后的位数。浮点数据类型存储与任何给定值最接近的浮点近似值。最接近的浮点近似值不太可能具有您想要的位数。尽管您可以在第三个数字之后抑制每个数字，但这只会改变值的外观，而不是值本身。

整数是另一回事。整数——存储、转换或强制转换为浮点数据类型——将精确存储在一个大范围内。浮点数据类型不必为整数存储任何小数单位。

我建议，尽管对你来说最好的做法是

*   如果不需要小数单位，请避免将整数转换为浮点数，或者
*   如果*确实*需要小数单位，则将整数转换为十进制或数字，或者
*   完全在应用程序代码中处理显示问题。

# java - 将 math.random 值分配给数组

> ID：11126660
> 
> 赞同：0
> 
> 时间：2012-06-20T19:20:07.793
> 
> 标签：java, arrays, for-loop

我有一个快速的问题，我正在测试 Math.random 功能。我正在尝试将`(int) (Math.random()*6)+1`100 个框中的每一个的结果分配给一个数组以存储值。但我收到一个错误，它不是一个声明。有人可以提供一些指导吗？

```
public shoes(int[] pairs)
{
   System.out.println("We will roll go through the boxes 100 times and store the input for the variables");
   for(int i=0; i < 100; i++)
   {
       //("Random Number ["+ (i+1) + "] : " + (int)(Math.random()*6));
       int boxCount[i]  =  (int) (Math.random()*6) + 1;
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:23:20.797

您有语法错误。`boxCount`尚未实例化且不是已知类型。您需要先创建`boxCount`数组，然后再尝试使用它。请参见下面的示例：

```
public void shoes(int[] pairs)
{
    System.out.println("We will roll go through the boxes 100 times and store the input for the variables");
    int boxCount[] = new int[100];
    for(int i=0; i < boxCount.length; i++)
    {
        //("Random Number ["+ (i+1) + "] : " + (int)(Math.random()*6));
        boxCount[i]  =  (int) (Math.random()*6) + 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:23:48.793

```
int boxCount[i]  =  (int) (Math.random()*6) + 1; 
```

这行代码看起来像您正在尝试创建一个数组或其他东西。

您想`boxCount`在 for 循环之前创建数组：

```
int boxCount[] = new int[100]; 
```

然后你可以在你的循环中这样做：

```
boxCount[i]  =  (int) (Math.random()*6) + 1; 
```

# python - 如何使用 couchdb.Database 库从 python 中的 couch DB 获取最新修订 ID

> ID：11126666
> 
> 赞同：0
> 
> 时间：2012-06-20T19:20:49.867
> 
> 标签：python, couchdb

如何`ID`使用 couchdb.Database 库在 Python 中获取文档的最新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:00:16.487

[http://packages.python.org/CouchDB/client.html#document](http://packages.python.org/CouchDB/client.html#document)？

# sql - Oracle SQL——这个分组有什么问题？

> ID：11126673
> 
> 赞同：1
> 
> 时间：2012-06-20T19:21:12.730
> 
> 标签：sql, oracle, group-by

我正在尝试获取具有某列最大值的行。通常我会为此使用 Rank 并选择 rank = 1 但是当我知道我只需要一列的最大值时这似乎毫无意义。这是我的 SQL：

```
SELECT
  name,
  value,
  MAX(version)
FROM
  my_table t
WHERE
  person_type = "STUDENT"
GROUP by NAME,VALUE
HAVING version = max(version) 
```

这会在尝试运行时返回“您做错了涉及分组错误”，即“不是 GROUP BY 表达式”。如果我按字段将版本添加到组中，则此 SQL 会运行，但它显然会返回所有行，而不仅仅是每个行的最大版本。

所以我的问题主要是“为什么这不起作用？” 我正在选择版本的最大值，所以我不明白为什么我需要按它分组。我知道还有其他解决方案（分区，排名......），但我更感兴趣的是为什么这在语法上特别有缺陷。

编辑：更明确地使用这个有子句。

假设表 t 中有这两行：

```
NAME    VALUE    VERSION
JEREMY  C        1
JEREMY  A        2 
```

此查询返回的内容应该是：

```
JEREMY A 2 
```

但是，如果我删除了，那么我会得到：

```
JEREMY A 2
JEREMY C 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:27:38.653

HAVING 子句通常需要包含由 group by 生成的列。实际上，您可以将 HAVING 子句视为 group by 上的 WHERE。

也就是说，查询：

```
select <whatever>
from t
group by <whatever>
having <some condition> 
```

相当于：

```
select <whatever>
from (select <whatever>
      from t
      group by <whatever
     ) t
where <some condition> 
```

如果你这样想，你会意识到 max(version) 是有意义的，因为它是一个聚合值。但是，“版本”没有意义，因为它既不是计算值也不是按列分组。

你似乎知道如何解决这个问题。另一条评论是某些数据库（尤其是 mysql）会接受您的语法。他们将“HAVING version = max(version)”视为“HAVING any(version) = max(version)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:24:51.687

您正在尝试`version`在 HAVING 子句中使用，但它没有被分组。

如果您只需要名称、值和最大版本，则根本不需要该`HAVING`子句。

```
SELECT
  name,
  value,
  MAX(version)
FROM
  my_table t
WHERE
  person_type = "STUDENT"
GROUP by NAME,VALUE 
```

HAVING 子句适用于您希望在聚合后拥有“Where”子句时，例如

```
HAVING max(version) > 5 
```

编辑：

根据您的示例数据，您按 VALUE 进行分组，但您真正想要做的是确定每个 NAME 具有 MAX(VERSION) 的 VALUE。

为此，您需要使用 WHERE EXISTS 或自连接，如下所示：

```
select name, value, version from t 
where exists
(
  select 1 from
  (select name, max(version) version
     from t 
    group by name) s
  where s.name = t.name and s.version = t.version
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T19:28:00.357

此 SQL 语句失败，因为`HAVING`子句在`GROUP BY`-- 它之后运行，它只能对子句中列出的聚合或列进行操作`GROUP BY`。如果您仅按`NAME`and分组`VALUE`，则单独没有任何意义 - 此时，对于and`VERSION`的每个组合，它都有许多可能的值，因此将它与每个and恰好具有 1 值的任何其他聚合进行比较是没有意义的一对。`NAME``VALUE``MAX(version)``NAME``VALUE`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T20:33:56.770

另一种获得你想要的东西的方法：

```
select *
from (select name
        , value
        , version
        , max(version) over 
            (partition by name) as max_version
    from t)
where version = max_version; 
```

示例执行： SQL> create table t (name varchar2(30) 2 , value varchar2(1) 3 , version number not null 4 , constraint t_pk primary key (name, version));

```
Table created.

SQL> insert into t select 'JEREMY', 'C', 1 from dual
  2  union all select 'JEREMY', 'A', 2 from dual
  3  union all select 'SARAH', 'D', 2 from dual
  4  union all select 'SARAH', 'X', 1 from dual;

4 rows created.

SQL> commit;

Commit complete.

SQL> select name, value, version
  2  from (select name
  3          , value
  4          , version
  5          , max(version) over
  6              (partition by name) as max_version
  7      from t)
  8  where version = max_version;

NAME                           V    VERSION
------------------------------ - ----------
JEREMY                         A          2
SARAH                          D          2 
```

# asp.net-mvc - 使用 RedirectToAction 时如何知道调用方/父级 ActionResult？

> ID：11126675
> 
> 赞同：0
> 
> 时间：2012-06-20T19:21:19.673
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下代码：

```
 public ActionResult EditTrain(EditTraing editrain)
     {
      ....
      ....
        return RedirectToAction("Details", new { id = "200241"}); 
     } 
```

一旦我进入详细信息操作，我想检查推荐人是谁。在这种情况下，我将成为 EditTrain。无论如何我可以弄清楚重定向来自什么动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:25:23.947

您可能可以在`querystring`

```
 public ActionResult EditTrain(EditTraing editrain)
 {     
    return RedirectToAction("Details", new { id = "200241" ,from="edittrain"}); 
 }
 public ActionResult Details(int id,string from)
 {
      //do stuff        
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:34:07.617

从内存中，您应该能够从您的操作中访问 HttpContext.Request.UrlReferrer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:25:24.257

使用 TempData 或在重定向本身中传递信息。

# javascript - 在 jQuery 中调整动画图像的大小

> ID：11126676
> 
> 赞同：1
> 
> 时间：2012-06-20T19:21:21.440
> 
> 标签：javascript, jquery, html, css

我正在处理一个 HTML/CSS/jQuery 文档，其中一部分涉及洪水的图像，该图像短暂移动，然后膨胀以填充屏幕直到被点击，此时它恢复到原始大小并消失进入后台。它按应有的方式移动，单击时行为正常，并且*大部分都*可以正确调整大小。

我的问题是，在它成长之前它就消失了。至少，我认为它正在消失。它最初可能会将自身大小调整为 0x0。无论如何，我无法弄清楚从图像的正常大小开始调整大小的语法。

有一些代码！在上下文中，这是一系列图像的一部分，随后单击这些图像可获得各种效果。作为记录，第二个 .animate() 中的 'left:"20"' 位是为了创造洪水停留在原地的错觉。那就是在做它应该做的事。此外，由于该项目的要求，应尽可能避免使用原始 javascript（但是，如果不可能，就必须按照我的想法去做）。

```
$("img#window").click(function() {
    $(this).replaceWith('<img id="window" src="../Kafka/chain 3/window_bw.png" style="opacity:0.35;filter:alpha(opacity=35);z-index:5;">');
    $("img#flood").show().animate({
        left: "160"
    }, 2500, function() {
        $("img#flood").animate({
            left: "20",
            width: "400%",
            height: "400%"
        }, 20000)
    });
    $("span#three").replaceWith('<span class="text" id="three">Flood</span>')
});

$("img#flood").click(function() {
    $(this).replaceWith('<img id="flood" src="../Kafka/chain 3/flood_bw.png" style="opacity:0.35;filter:alpha(opacity=35);z-index:5;">');
    $("img#stranger").show();
    $("span#three").replaceWith('<span class="text" id="three">Stranger</span>')
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:57:16.847

试试这个并告诉我。如果它不起作用，您可以制作一个 jsfiddle 页面并分享。我会告诉你我想在这里做什么。基本上，我不是告诉 jQuery 将大小设置为 400%，而是告诉它将大小增加 300%（假设它在时间点为 100%）。如果不是 100%，则相应地更改值 300。

```
$("img#window").click(function() {
    $(this).replaceWith('<img id="window" src="../Kafka/chain 3/window_bw.png" style="opacity:0.35;filter:alpha(opacity=35);z-index:5;">');
    $("img#flood").show().animate({
        left: "160"
    }, 2500, function() {
        $("img#flood").animate({
            left: "20",
            width: "+=300%",
            height: "+=300%"
        }, 20000)
    });
    $("span#three").replaceWith('<span class="text" id="three">Flood</span>')
});

$("img#flood").click(function() {
    $(this).replaceWith('<img id="flood" src="../Kafka/chain 3/flood_bw.png" style="opacity:0.35;filter:alpha(opacity=35);z-index:5;">');
    $("img#stranger").show();
    $("span#three").replaceWith('<span class="text" id="three">Stranger</span>')
});​ 
```

# playframework - 如何使用播放框架呈现简单的 html 页面？

> ID：11126678
> 
> 赞同：5
> 
> 时间：2012-06-20T19:21:38.830
> 
> 标签：playframework, playframework-2.0

它是一种使用播放框架版本 2 呈现纯 html 文件的方法吗？我不想把它放在 public/ 文件夹中，因为稍后会添加一些动态信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-23T20:18:29.180

这是我的解决方案：

在路线中：我做了一些配置如下。

```
GET     /hello.html                 controllers.Assets.at(path="/public/html", file="hello.html")
GET     /public/javascripts/jquery-1.9.0.min.js     controllers.Assets.at(path="/public/javascripts", file="jquery-1.9.0.min.js")
GET     /public/stylesheets/bootstrap.css           controllers.Assets.at(path="/public/stylesheets", file="bootstrap.css") 
```

然后文件结构如下：

```
public->HTML->hello.html
public->javascripts->jquery-1.9.0.min.js
public->stylesheets->bootstrap.css 
```

对于 hello.html ，这是它的内容。

```
<!DOCTYPE html>    
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel='stylesheet' type='text/css' href='/public/stylesheets/bootstrap.css'>
</head>    
<body>
    <script src="/public/javascripts/jquery-1.9.0.min.js" type="text/javascript"></script>
</body>
</html> 
```

完成这三个步骤后，就可以直接在 HTML 之外使用了。无需按照 Play 模板进行前端开发工作。所以现在，Play 只负责后端。前端开发者只需要操作这个公共文件就可以进行开发。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-20T19:53:09.363

当然，把你的整个静态 html 即。在`index.scala.html`并使用最简单的方法：

```
public static Result index(){
    return ok(index.render());
} 
```

这是基础知识，您应该阅读 Play 的文档和示例

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-09T18:50:41.503

GET / controllers.Assets.at(path="/public/html", file="index.html")

在我的情况下，这适用于 play 2.0.1。层次结构是公开的 - html ---index.html

# string - 传递一个字符串并将其与列表进行比较

> ID：11126682
> 
> 赞同：0
> 
> 时间：2012-06-20T19:22:01.040
> 
> 标签：string

我正在通过机器人框架传递一个参数。参数是一个字符串。“底特律”。我希望代码将该字符串分解为“D”、“De”、“Det”、“Detr”、“Detro”、“Detroi”和“Detroit”。当然，如果输入另一个字符串，比如“Flint”，它只会将其分解为 5 个元素。F、Fl、Fli、Flin、Flint。

（伪代码）

```
def checkCity (self, x):
     (take x which is the string, and make it a list of elements containing the letters as above).
     (Then take each element and check it against data provided by the device(using a loop for each iteration)
     (Once any of the elements are matched to the data, return another function that acts as a key press) 
```

我对python（和编程）足够熟悉，一般都有理论，只是不知道如何编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T13:58:01.757

在 python 中，您可以通过使用访问字符串的各个部分

```
string[5:7] 
```

这将给出第 5 个和第 6 个字符

python中的这个函数将返回一个你想要的列表

```
def toSubLists(string):
    sublists = []
    for i in range(1, len(string)+1):
        sublists.append(string[0:i])
    return sublists 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:32:15.853

我不熟悉您使用的编程语言，但我会尽我所能提供帮助。

为了分解字符串，您可以使用`while`循环或`for`循环，无论您喜欢哪个。结束条件是您放入第二个参数的字符串的长度。在循环中，您可以使用`substring`方法分解字符串并将每个元素存储到数组列表中。

然后为了检查是否有任何元素匹配，您将（如您所说）为每次迭代使用一个循环。

# grails - Grails Webflow：访问动作或转换状态之外的流范围

> ID：11126683
> 
> 赞同：0
> 
> 时间：2012-06-20T19:22:05.993
> 
> 标签：grails, spring-webflow

我想调用一个控制器未知的子流。它在参数中传递给 beginFlow，我将其保存在流范围内。在 goToForm 中，我想调用保存在 flow.theController 中的控制器。

* * *

```
def beginFlow = {
    enter {
        action {
            if (params?.redirectTo != null) {
                String flow.theController = params.redirectTo
            }

            if ( flow.theController() ) { 
                success()
            }
        }
        on("success").to("beginPage")
    }
    beginPage {
        on('next').to('goToForm')
    }       
    goToForm {
                    // I'd like this:
                    // subflow(controller: flow.theController, action:'start'

                    // this subflow works, but won't work for all cases
        subflow(controller: 'AZ_A4', action:'start')
        on('done').to('showResults')
        on('notDone').to('beginPage')
    }

    showResults {
        redirect(action: 'results')
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:05:48.617

正如用户列表中所讨论的，这似乎无法直接实现，因为在构建流结构时（在应用程序启动时）必须知道子流名称。但是由于流定义 DSL 是 Groovy 代码，您可以执行以下操作：

```
beginPage {
    on('next').to('selectSubflow')
}
selectSubflow {
    action {
        return "subflow_${flow.theController}"()
    }
    for(subController in listOfControllers) {
        on("subflow_${subController}").to("subflow_${subController}")
    }
}
for(subController in listOfControllers) {
    "subflow_${subController}" {
        subflow(controller:subController, action:'start')
        on('done').to('showResults')
        on('notDone').to('beginPage')
    }
} 
```

listOfControllers 可以在某处是静态的，或者您可以在流定义的顶部执行类似的操作

```
def beginFlow = {
    def listOfControllers = grailsApplication.controllerClasses.findAll {
        it.flows.containsKey('start')
    }.collect { it.logicalPropertyName }
    enter {
        // ... 
```

枚举应用程序中定义 startFlow 的所有控制器。你的课堂上可能需要一个`def grailsApplication`，我总是忘记 Grails 中的哪些地方默认提供它，而哪些地方没有......

# java - 在 Spring 服务类中使用 ConcurentHashMap 和 AtomicInteger 作为实例变量

> ID：11126684
> 
> 赞同：2
> 
> 时间：2012-06-20T19:22:09.093
> 
> 标签：java, multithreading, spring, concurrency

我正在尝试在注入控制器的单例弹簧服务中实现 ConcurentHashMap 的线程安全使用：

```
@Service
public MyService{

  final ConcurrentMap<String, AtomicInteger> myMap = new ConcurrentHashMap<String,   AtomicInteger>(10) {
        {/* initialize the ten key/values */
        }
    };

 public int add(String key) {
   return myMap.get(key).incrementAndGet();
 }

    // accessed via ajax loop (and controller), if value changes update display
  public int getCount(String key) {
    return myMap.get(key).get();
  }
} 
```

有没有更好的方法来访问 hashmap 线程安全？我怎样才能使它适应在集群环境中工作？[这是对我的另一个问题](https://stackoverflow.com/q/11125497/106261)的跟进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:16:44.057

我的目标不是要回答这个问题，尤其是。因为我没有集群情况下的专业知识；但是，我想指出我认为值得注意的地方。

@JB Nizet 在其中一条评论中提到代码是*线程安全*且*正确*的。我想根据[Java API Reference添加但](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)*不一致*：

> 检索操作（包括 get）一般不会阻塞，因此可能与更新操作（包括 put 和 remove）重叠

*这意味着在某些更新当前正在*运行时，可能会有客户端获取此信息。而且，这是有道理的，因为您在代码中提到了“循环”。所以，如果这对你来说**并不**重要，那么一切都应该没问题。

但是，如果你需要让这个更严格，我想也许使用一个实例[`ReentrantReadWriteLock`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)是一个不错的选择。锁定使您的代码能够阻止所有读取请求，直到有可用信息的*一致*快照。您可能会使用`getCount`方法上的锁来严格阻塞，直到`add`方法释放所有等待代码中使用的映射的一致快照的锁。

我还猜测，当您将其迁移到集群解决方案时，同样的担忧是有效的；如果需要跨不同集群节点的*一致性*，那么应该注意它。

# css - 为什么容器 div 坚持比 IMG 或 SVG 内容略大？

> ID：11126685
> 
> 赞同：88
> 
> 时间：2012-06-20T19:22:11.653
> 
> 标签：css

我正在尝试制作另一个灯箱作为非常需要的 HTML/CSS/Javascript 实践，但我遇到了一个看起来微不足道的样式问题（而且可能是！）但我无法解决它。

我有一个`div`包含一个`img`. 无论我尝试什么（`border`、、、、自动高度等） `margin`，`padding`我都无法进行`div`缩小以匹配图像尺寸。我已将问题简化为：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <title>Layout experiments</title>

        <style type="text/css">
            #lightbox {
                margin: 0;
                padding: 0;
                position    : fixed;
                left        : 50%;
                margin-left : -320px;
                top         : 100px;
                border-radius: 22px;
                background  : #e0e0f0;
                color       : #102020;
            }

            #lightbox img {
                border-radius: 15px;
            }
            .imagebg {
                margin      : 7px;
                background  : black;
                border-radius: 15px;
                height      : 100%;
            }

        </style>

    </head>
    <body>

        <div id="lightbox">
            <div class="imagebg">
                <img src="picture.jpg">
            </div>
        </div>
    </body>
</html> 
```

'picture.jpg' 是 640x400，但容器 div 想要是 640x404，差异显示为图像下方的黑色条带。div 存在，因此我可以通过将其不透明度混合为 0 来将图像淡化为黑色，交换它，然后将其重新混合。

我查看了多个浏览器中的计算样式，但看不到 4px 增量来自何处。

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-06-20T19:23:28.090

尝试添加：

```
img { display: block; } 
```

到你的 CSS。由于`<img>`默认情况下 an 是内联元素，因此其高度的计算方式与默认 line-height 值相关。

在内联元素上，line-height CSS 属性指定用于计算行框高度的高度。

在块级元素上，line-height 指定元素内行框的最小高度。

来源：[https ://developer.mozilla.org/en/CSS/line-height](https://developer.mozilla.org/en/CSS/line-height)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-20T19:24:29.737

您的图像使用其父级的行高。试试这个：

```
.imagebg { line-height: 0 } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-03-30T12:23:14.977

尝试添加：

```
vertical-align: middle; 
```

这在 google material design lite 中用于消除音频、画布、iframe、图像、视频及其容器底部之间的间隙。

材料设计精简版：[https ://getmdl.io](https://getmdl.io)

Github 讨论：[https ://github.com/h5bp/html5-boilerplate/issues/440](https://github.com/h5bp/html5-boilerplate/issues/440)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-05-31T16:12:39.757

除了其他有效的答案外，将`display`parent 的属性设置`flex`为也为我工作：

```
.imagebg { display: flex } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-20T19:27:57.957

基本上你在 IE 上遇到了这个错误，虽然你没有提到但这是事实。`<img>`IE 在标签下方生成一些额外的空间。因此，制作图像是一种很好的做法`img { display: block; }`。

编辑：你可以说它是 IE 的错误

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-10-03T06:59:38.637

如果您不想更改`display`元素，请尝试

```
margin-bottom: -4px; 
```

# excel - selection.copy leads to selection.pastespecial not working. excel VBA

> ID：11126694
> 
> 赞同：1
> 
> 时间：2012-06-20T19:22:59.800
> 
> 标签：excel, vba, copy, paste

I will keep this quick. The attached code for the most part works i have used slight variations of it on other projects. the commented out range3.copy is from my last project.

I am currently having issues getting selection.copy to copy the selected range in the correct workbook. I have tried many things some are noted in the script. but I can not get the selection.copy to work .range.copy will work and populate the clipboard. But I have not figured out how to pastespecial using .copy.

I tried outputting to variable .. didn't work as i thought it might. I feel I have to be missing something on the workbook selection/activation but I don't know what. Thanks in advance for any advice or assistance .. I will continue plugging away and see if I can figure it out.

**Here is the first segment with the issue. SRCrange1.select then selection.copy does not actually copy the designated selection. The full code is below**.

```
 Dim MyColumn As String
    Dim Here As String
    Dim AC As Variant

     'SRCrange1.copy  ': This will copy to clipboard

       'objworkbook.Worksheets("plan").Range("b6:h7").Select  no change from SRCrange1.select
       'SRCrange1.Select 'the range does select
        'Selection.copy  '  this will cause a activecell in DSTwb _
        to be copied neither direct reference to SRCrange1.select or .avtivate will change that.

DSTwb.Select
             DSTwb.Range("b2").Select
             Here = ActiveCell.Address
             MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)
             Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)
             lastrow.Select
             Selection.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True 
```

**FULL CODE**

```
Sub parse()
Dim strPath As String
Dim strPathused As String

'On Error Resume Next

Set objexcel = CreateObject("Excel.Application")
objexcel.Visible = True
objexcel.DisplayAlerts = False
strPath = "C:\prodplan"
Set objfso = CreateObject("Scripting.FileSystemObject")
Set objFolder = objfso.GetFolder(strPath)

'Loop through objWorkBooks
For Each objfile In objFolder.Files

    If objfso.GetExtensionName(objfile.Path) = "xlsx" Then
        Set objworkbook = objexcel.Workbooks.Open(objfile.Path)
                                ' Set path for move to at end of script
                                strPathused = "C:\prodplan\used\" & objworkbook.Name

'open WB to consolidate too
                        Workbooks.Open "C:\prodplan\compiled\plancon.xlsx"

'Range management sourcebook
        Set SRCwb = objworkbook.Worksheets("plan")
        Set SRCrange1 = objworkbook.Worksheets("plan").Range("b6:i7")
        Set SRCrange2 = objworkbook.Worksheets("plan").Range("k6:p7")
        'Set SRCrange3 = objworkbook.Worksheets("").Range("")

'Range management sourcebook
        Set DSTwb = Workbooks("plancon.xlsx").Worksheets("data")
        'Set DSTrange1 = Workbooks("plancon.xlsx").Worksheets("data").Range("")
        'Set DSTrange2 = Workbooks("plancon.xlsx").Worksheets("data").Range("")
        'Set DSTrange3 = Workbooks("plancon.xlsx").Worksheets("data").Range("")

'start header dates and shifts copy from objworkbook to consolidated WB
                SRCwb.Select
                'On Error Resume Next
                'SRCwb.Cells.UnMerge

Dim MyColumn As String
Dim Here As String
Dim AC As Variant

 'SRCrange1.copy  ': This will copy to clipboard

   'objworkbook.Worksheets("plan").Range("b6:h7").Select  no change from SRCrange1.select
   'SRCrange1.Select 'the range does select
    'Selection.copy  '  this will cause a activecell in DSTwb _
    to be copied neither direct reference to SRCrange1.select or .avtivate will change that.
         DSTwb.Select
         DSTwb.Range("b2").Select
         Here = ActiveCell.Address
         MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)
         Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)
         lastrow.Select
         Selection.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

   SRCrange2.Select
    Selection.copy
         Workbooks("plancon.xlsx").Worksheets("sheet1").Select
         ActiveSheet.Range("b2").Select
         ActiveSheet.Range("b2").Activate
         Here = ActiveCell.Address
         MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)
         Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)
         lastrow.Select
         Selection.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

'    range3.copy
'         Workbooks("data.xlsx").Worksheets("sheet1").Activate
'         ActiveSheet.Range("c2").Select
'         ActiveSheet.Range("c2").Activate
'         Here = ActiveCell.Address
'         MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)
'         Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)
'         ActiveSheet.Paste Destination:=lastrow

                    'start loop for objworkbook name copy to field in plancon corisponding with date/shift and copy/paste select row data.

    objworkbook.Close False
                        'Move proccesed file to new Dir

    OldFilePath = objfile 'original file location
        NewFilePath = strPathused ' new file location
            Name OldFilePath As NewFilePath ' move the file

End If

Next

objexcel.Quit

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:58:31.130

First, a relative welcome to SO!

Second, some tips for you that will make life easier in VBA programming:

1.  Use Option Explicit and always Dimension and Declare your variable types.
2.  When naming variables, make them easy to understand and follow. So, if you are going to create a worksheet variable, call it something like wksCopy. Or, if you are going to name a workbook, call it wkbCopyTo
3.  You don't need to use .Select and .Activate, but rather you can work directly with your objects. Also, by declaring the appropriate variables types, this make it much easier to work with these objects in your code each time you need them.
4.  I don't know if you are running this code inside Excel, or another application (like Access), but if you are in Excel, there is no need to create an Excel object, as you can work with the Excel App directly. Ignore this if you are using Access / Word / PPT etc to fire the code.

All these tips make your code much easier to read and understand and follow when trying to debug, and write.

All that said, I have refactored your code above to incorporate most of these principles (I kept all your variable names intact so you wouldn't get lost in any re-namings.) If this re-write doesn't directly solve your problem = which it may not, because the code is kind of confusing to me as written, I think it will be much easier for you to follow and understand and find out where it's not doing what you expect when you debug. Also, I think it will help us help you if you can't figure it out.

```
Sub parse()

    Dim strPath As String, strPathused As String
    Dim objexcel As Excel.Application

    Set objexcel = CreateObject("Excel.Application")
    With objexcel
        .Visible = True
        .DisplayAlerts = False
    End With

    strPath = "C:\prodplan"

    Dim objfso As FileSystemObject, objFolder As Folder

    Set objfso = CreateObject("Scripting.FileSystemObject")
    Set objFolder = objfso.GetFolder(strPath)

    'Loop through objWorkBooks
    For Each objfile In objFolder.Files

        If objfso.GetExtensionName(objfile.Path) = "xlsx" Then

            Dim objWorkbook As Excel.Workbook
            Set objWorkbook = objexcel.Workbooks.Open(objfile.Path)

            ' Set path for move to at end of script
            strPathused = "C:\prodplan\used\" & objWorkbook.Name

            'open WB to consolidate too
            objexcel.Workbooks.Open "C:\prodplan\compiled\plancon.xlsx"

            'Range management sourcebook
            Dim SRCwb As Excel.Worksheet, SRCrange1 As Excel.Range, SRCrange2 As Excel.Range

            Set SRCwb = objWorkbook.Worksheets("plan") 'sjh -> to me wb implies wb, but you set it to a worksheet (could be a style thing, but worth pointing out
            Set SRCrange1 = objWorkbook.Worksheets("plan").Range("b6:i7")
            Set SRCrange2 = objWorkbook.Worksheets("plan").Range("k6:p7")

            'Range management sourcebook
            Set DSTwb = Excel.Worksheet
            Set DSTwb = Workbooks("plancon.xlsx").Worksheets("data")

            'start header dates and shifts copy from objworkbook to consolidated WB
            Dim MyColumn As String
            Dim Here As String
            Dim AC As Variant

            Here = DSTwb.Range("B2").Address
            MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)

            'sjh comment -> best to change "ActiveWorkbook" to the workbook referece you mean, like objWorkbook
            Dim lastrow As Range
            Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)

            SRCrange1.Copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

            Here = Workbooks("plancon.xlsx").Worksheets("sheet1").Range("B2").Address
            MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)

            'sjh comment -> best to change "ActiveWorkbook" to the workbook referece you mean, like objWorkbook
            Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)

            SRCrange2.Copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

            objWorkbook.Close False

            'Move proccesed file to new Dir

            OldFilePath = objfile 'original file location
            NewFilePath = strPathused ' new file location
            Name OldFilePath As NewFilePath ' move the file

        End If

    Next

objexcel.Quit

End Sub 
```

**UPDATE** If you are running this all in Excel. Just use this code below. I left both codes in my answer, in case you are not running this from Excel.

```
Option Explicit

Sub parse()

    Application.DisplayAlerts = False

    Dim strPath As String, strPathused As String
    strPath = "C:\prodplan"

    Dim objfso As FileSystemObject, objFolder As Folder

    Set objfso = CreateObject("Scripting.FileSystemObject")
    Set objFolder = objfso.GetFolder(strPath)

    'Loop through objWorkBooks
    For Each objfile In objFolder.Files

        If objfso.GetExtensionName(objfile.Path) = "xlsx" Then

            Dim objWorkbook As Workbook
            Set objWorkbook = Workbooks.Open(objfile.Path)

            ' Set path for move to at end of script
            strPathused = "C:\prodplan\used\" & objWorkbook.Name

            'open WB to consolidate too
            Workbooks.Open "C:\prodplan\compiled\plancon.xlsx"

            'Range management sourcebook
            Dim SRCwb As Worksheet, SRCrange1 As Range, SRCrange2 As Range

            Set SRCwb = objWorkbook.Worksheets("plan")
            Set SRCrange1 = SRCwb.Range("b6:i7")
            Set SRCrange2 = SRCwb.Range("k6:p7")

            'Range management sourcebook
            Dim DSTwb As Worksheet
            Set DSTwb = Workbooks("plancon.xlsx").Worksheets("data")

            'start header dates and shifts copy from objworkbook to consolidated WB
            Dim MyColumn As String
            Dim Here As String
            Dim AC As Variant

            Here = DSTwb.Range("B2").Address
            MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)

           'sjh comment -> best to change "ActiveWorkbook" to the workbook referece you mean, like objWorkbook or the other workbook you have open
            Dim lastrow As Range
            Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)

            SRCrange1.Copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

            Here = Workbooks("plancon.xlsx").Worksheets("sheet1").Range("B2").Address
            MyColumn = Mid(Here, InStr(Here, "$") + 1, InStr(2, Here, "$") - 2)

           'sjh comment -> best to change "ActiveWorkbook" to the workbook referece you mean, like objWorkbook or the other workbook you have open
            Set lastrow = ActiveWorkbook.ActiveSheet.Range(MyColumn & "65536").End(xlUp).Offset(1, 0)

            SRCrange2.Copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=False, Transpose:=True

            objWorkbook.Close False

            'Move proccesed file to new Dir

            OldFilePath = objfile 'original file location
            NewFilePath = strPathused ' new file location
            Name OldFilePath As NewFilePath ' move the file

        End If

    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T23:53:02.423

Just to add to the other answers: for contiguous ranges you don't need to use copy for this operation (pastespecial >> values + transpose)

```
Sub CopyValuesTranspose()

    Dim rngCopy As Range, rngPaste As Range

    Set rngCopy = Range("A1:B10")
    Set rngPaste = Range("D1")

    rngPaste.Resize(rngCopy.Columns.Count, rngCopy.Rows.Count).Value = _
                                   Application.Transpose(rngCopy.Value)

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:49:26.133

no need to select a range and then copy the selection, when you can copy a range directly:

```
objworkbook.Worksheets("plan").Range("b6:h7").Copy
same_or_different_Range.PasteSpecial Paste:=xlPasteValues, _
    operation:=xlNone, skipblanks:=False, Transpose:=True 
```

# debugging - 在 Pharo 中，有没有办法使用 em 设置调试器窗口的默认宽度？

> ID：11126697
> 
> 赞同：2
> 
> 时间：2012-06-20T19:23:08.153
> 
> 标签：debugging, fonts, smalltalk, pharo

我仍在使用带有 Omni-Browser 和 Dejavu 12 号字体的 Pharo 1.3。默认是 9 号。所以我把字体变大了。现在，当弹出一个新的调试器并单击“调试”或“创建”时，右侧的一些按钮会被切断。

我在哪里可以调整调试器的默认宽度？

有没有办法使宽度取决于默认字体大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:45:03.240

用户无法做到这一点。您必须进入调试器的代码并进行更改。如果您对此感到满意，并且只想为自己的个人形象做一些修改，那么以下方法将起作用...

1.  在 Debugger>>addOptionalButtonsTo:at:plus: 行之后`buttons := self customButtonRow.`，添加以下行当`buttonRowWidth := buttons initialExtent x.`提示时，“声明实例”。

2.  将 Debugger>>openFullMorphicLabel: 更改为以下

    ```
    "Open a full morphic debugger with the given label"

    | window |
    window := UIManager default openDebugger: self fullMorphicLabel: aLabelString.
    window
        width: buttonRowWidth + (2 * window borderWidth). 
    ```

# android - 使用 MyLocationOverlay 绘制精确圆

> ID：11126709
> 
> 赞同：2
> 
> 时间：2012-06-20T19:24:02.550
> 
> 标签：android, gps, maps, osmdroid, mylocationoverlay

我正在开发一个显示带有用户位置的地图的 Android 应用程序，到目前为止，我能够在线和离线显示地图。现在我想知道如何使用 osmdroid 中的标记绘制一个精确圆`MylocationOverlay`？

这是我的代码：

```
public class AhmedActivity extends Activity 
{
    /** Called when the activity is first created. */
    private MapView mapView;
    private MapController mapController;
    private ScaleBarOverlay mScaleBarOverlay; 
    MyLocationOverlay myLocationOverlay = null;
    private LocationManager locationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Initialize the location:
        locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        initializemap();

        /* My location overlay */
        /* Create a static Overlay showing a the current location and a compass */                  
        myLocationOverlay = new MyLocationOverlay(this, mapView);
        mapView.getOverlays().add(myLocationOverlay);
        myLocationOverlay.runOnFirstFix( new Runnable() {
            public void run() {
                mapController.animateTo( myLocationOverlay
                                 .getMyLocation());
            }
        });

        //Add Scale Bar
        mScaleBarOverlay = new ScaleBarOverlay(this);                           
        ScaleBarOverlay myScaleBarOverlay = new ScaleBarOverlay(this);
        mScaleBarOverlay.setLineWidth(50); 
        mapView.getOverlays().add(myScaleBarOverlay);
    }

    /** (re-)enable location and compass updates */      
    @Override
    public void onResume() {
        super.onResume();
        myLocationOverlay.enableCompass();
        myLocationOverlay.enableMyLocation();
        //myLocationOverlay.followLocation(true);
        //myLocationOverlay.setDrawAccuracyEnabled(true);
        //myLocationOverlay.isDrawAccuracyEnabled();
    }  

    /** disable compass and location updates */        
    @Override      
    public void onPause() {
        super.onPause();
        myLocationOverlay.disableMyLocation();
        myLocationOverlay.disableCompass();
    }

    public void initializemap()
    {
        mapView = (MapView) this.findViewById(R.id.mapView); 
        mapView.setTileSource(TileSourceFactory.MAPNIK); 
        mapView.setBuiltInZoomControls(true); 
        mapView.setMultiTouchControls(true); 
        mapController = this.mapView.getController();     
        mapController.setZoom(12);
        mapController.setCenter(new GeoPoint(15.610762,32.540345));
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-10-04T21:55:15.340

在您的位置绘制精确圆的完整示例（这不包括您所在位置的标记）。这是基于 OSMDroid 类[DirectedLocationOverlay](https://github.com/osmdroid/osmdroid/blob/master/osmdroid-android/src/main/java/org/osmdroid/views/overlay/mylocation/DirectedLocationOverlay.java)显示您的位置与方向箭头（我不需要并删除）。

```
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;

import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapView;
import org.osmdroid.views.Projection;
import org.osmdroid.views.overlay.Overlay;

public class AccuracyOverlay extends Overlay {

    private Paint paint = new Paint();
    private Paint accuracyPaint = new Paint();
    private GeoPoint location;
    private final Point screenCoords = new Point();
    private float accuracy = 0;

    public AccuracyOverlay(GeoPoint location, float accuracyInMeters) {
        super();

        this.location = location;
        this.accuracy = accuracyInMeters;
        this.accuracyPaint.setStrokeWidth(2);
        this.accuracyPaint.setColor(Color.BLUE);
        this.accuracyPaint.setAntiAlias(true);
    }

    @Override
    public void onDetach(MapView view){
        paint = null;
        accuracyPaint = null;
    }

    @Override
    public void draw(final Canvas c, final MapView map, final boolean shadow) {

        if (shadow) {
            return;
        }

        if (location != null) {
            final Projection pj = map.getProjection();
            pj.toPixels(location, screenCoords);

            if (accuracy > 0) {  //Set this to a minimum pixel size to hide if accuracy high enough
                final float accuracyRadius = pj.metersToEquatorPixels(accuracy);

                /* Draw the inner shadow. */
                accuracyPaint.setAntiAlias(false);
                accuracyPaint.setAlpha(30);
                accuracyPaint.setStyle(Paint.Style.FILL);
                c.drawCircle(screenCoords.x, screenCoords.y, accuracyRadius, accuracyPaint);

                /* Draw the edge. */
                accuracyPaint.setAntiAlias(true);
                accuracyPaint.setAlpha(150);
                accuracyPaint.setStyle(Paint.Style.STROKE);
                c.drawCircle(screenCoords.x, screenCoords.y, accuracyRadius, accuracyPaint);
            }
        }
    }
} 
```

然后在您的活动中：

```
@Override
public void onLocationChanged(Location location) {
    if (accuracyOverlay != null) {
        map.getOverlays().remove(accuracyOverlay);
        map.invalidate();
    }

    accuracyOverlay = new AccuracyOverlay(new GeoPoint(location), location.getAccuracy());
    map.getOverlays().add(accuracyOverlay);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:44:57.783

Abo 7med,

例如，您需要扩展 Overlay

```
public class AccuracyCircleOverlay extends Overlay {
    public AccuracyCircleOverlay() {}
    public void draw(Canvas canvas, MapView mapv, boolean shadow){
       super.draw(canvas, mapv, shadow);
       // your drawing code here
    }
} 
```

您可以像这样将叠加层添加到您的视图中：

```
mapView.getOverlays().add(new AccuracyCircleOverlay()); 
```

# html - 使用 MATLAB 解析 HTML 以获取锚点中的 URL，帮助快速

> ID：11126721
> 
> 赞同：2
> 
> 时间：2012-06-20T19:24:49.320
> 
> 标签：html, regex, matlab, anchor

我有严格的时间限制，我真的需要一个正则表达式来解析这种类型的锚（它们都是这种格式）

`<a href="20120620_0512_c2_1024.jpg">20120620_0512_c2_102..&gt;</a>`

对于网址

`20120620_0512_c2_1024.jpg`

我知道它不是一个完整的 URL，它是相对的，请帮助

到目前为止，这是我的代码

```
year = datestr(now,'yyyy');
timestamp = datestr(now,'yyyymmdd');
html = urlread(['http://sohowww.nascom.nasa.gov//data/REPROCESSING/Completed/' year '/c2/' timestamp '/']);
links = regexprep(html, '<a href=.*?>', ''); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:32:40.203

尝试以下操作：

```
url = 'http://sohowww.nascom.nasa.gov/data/REPROCESSING/Completed/2012/c2/20120620/';
html = urlread(url);
t = regexp(html, '<a href="([^"]*\.jpg)">', 'tokens');
t = [t{:}]' 
```

生成的单元格数组（截断）：

```
t = 
    '20120620_0512_c2_1024.jpg'
    '20120620_0512_c2_512.jpg'
    ...
    '20120620_2200_c2_1024.jpg'
    '20120620_2200_c2_512.jpg' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:54:01.780

我认为这就是你要找的：

```
htmlLink = '<a href="20120620_0512_c2_1024.jpg">20120620_0512_c2_102..&gt;</a>';

link = regexprep(htmlLink, '(<a href=")(.*\.jpg)(">.*</a>)', '$2');

link =
20120620_0512_c2_1024.jpg 
```

`regexprep`也适用于字符串元胞数组，所以这也适用：

```
htmlLinksCellArray = { '<a href="20120620_0512_c2_1024.jpg">20120620_0512_c2_102..&gt;</a>', '<a href="20120620_0512_c2_1025.jpg">20120620_0512_c2_102..&gt;</a>', '<a href="20120620_0512_c2_1026.jpg">20120620_0512_c2_102..&gt;</a>' };

linksCellArray = regexprep(htmlLinksCellArray, '(<a href=")(.*\.jpg)(">.*</a>)', '$2')

linksCellArray = 
'20120620_0512_c2_1024.jpg'  '20120620_0512_c2_1025.jpg'  '20120620_0512_c2_1026.jpg' 
```

# appharbor - 为什么要使用 AppHarbor 插件？

> ID：11126734
> 
> 赞同：4
> 
> 时间：2012-06-20T19:25:35.287
> 
> 标签：appharbor

当我可以直接从提供商那里获得一个帐户并获得额外的好处（例如每个帐户多个用户或项目）时，我为什么要使用 AppHarbor 插件？我知道每个应用程序都有插件集中配置，但这也意味着你必须通过 AppHarbor。

此外，AppHarbor 在一些供应商（尤其是 Airbrake）的网站上添加了他们的标题，这破坏了设计（看起来不合适并且有巨大的利润）。在某些插件上，定价比插件定价灵活得多（同样，Airbrake 是一个很好的例子 - 不知道这些计划提供什么！）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:01:58.790

通过 AppHarbor 提供附加组件为您提供了自动应用程序配置、合并计费以及能够管理来自 AppHarbor 的所有内容的优势（并且不必记住 X 登录，也不必记住在各个服务提供商处更新 X 信用卡）。

我们已尝试使标题尽可能不显眼，并且它似乎在我们的大多数附加合作伙伴网站上运行良好。如果它在任何地方造成破损，请给我们留言。

我们还不断与我们的附加合作伙伴合作，以保持他们的附加计划产品是最新的，我刚刚给 AirBrake 的人发了一封电子邮件。感谢您提醒我们这个问题！

# jquery - Jqgrid 查看记录允许编辑可编辑字段

> ID：11126735
> 
> 赞同：0
> 
> 时间：2012-06-20T19:25:39.310
> 
> 标签：jquery, jqgrid

我正在使用**Jqgrid 4.4.0 版。**我的网格是带有内联编辑的小复杂网格。在选择行时，我根据条件使行可编辑。下面是使行可编辑的代码。

```
$("#list1").jqGrid('editRow', id, true, null,null,null,null, successfunc ); 
```

在网格的导航按钮中，我有“查看记录”按钮。单击查看按钮时，查看表单会显示所有字段。查看记录提供了编辑可编辑字段的选项。我只想在这里限制用户视图而不是编辑。当我搜索 jqgrid wiki 时，它显示没有与此“查看记录”按钮关联的事件。我还尝试使用 beforeShowForm: 进行自定义`function(formid){}`。但没有运气。请建议如何实现这一目标？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:25:33.483

您可以将[beforeShowForm](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events1)与导航器按钮中的“查看”按钮一起使用。例如，请参见[此处](https://stackoverflow.com/a/4651561/315935)的示例。

此外，我建议您以对象形式使用[editRow的参数：](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)

```
$("#list1").jqGrid('editRow', id, {
    keys: true,
    successfunc: successfunc
}); 
```

在我看来，它使代码更具可读性，因为不需要每个参数的位置。

# perl - Catalyst 中的 SOAP::LITE 客户端使我的所有 Catalyst 应用程序在访问或超时期间等待

> ID：11126739
> 
> 赞同：1
> 
> 时间：2012-06-20T19:25:53.980
> 
> 标签：perl, soap, nginx, catalyst, soaplite

在我的 Catalyst 应用程序中，我使用带有 WSDL 的 SOAP 与远程服务器建立了非常重要的连接。

一切正常，但是当远程服务器由于某种原因关闭时，**我的所有应用程序都会等待超时到期。一切。所有的控制器和进程，所有的客户端！！**

如果我为 SOAP LITE 传输错误设置了 15 秒的超时，那么一切都会等待 15 秒。在超时等待期间，无法显示来自任何用户或连接的任何页面。

我将 Fast CGI 和 Ngnix 用于 Catalyst 应用程序。如果我在一个等待时使用多个 fcgi 进程，其他人会处理连接，但如果他们都尝试访问有故障的 SOAP 服务......他们都会等待并等待答案，直到达到超时。当他们都在等待时，不允许更多的连接。

寻找我在某处读到 SOAP::LITE 是“单线程”的答案。

这是真的吗？这是否意味着我的所有应用程序以及所有访问者都只能使用**一个**SOAP 连接？很难相信。

这是我的通话代码：

```
sub check_result {
    my ($self, $code, $IP, $PORT) = @_;

    my $soap = SOAP::Lite->new( proxy => "http://$IP:$PORT/REMOTE_SOAP
+");

    $soap->autotype(0);
    $soap->default_ns('http://REMOTENAMESPACE/namespace/default');
    $soap->transport->timeout(15);

     $soap-> on_fault(sub { my($soap, $res) = @_; 
        eval { die ref $res ? $res->faultstring : $soap->transport->st
+atus };
          return ref $res ? $res : new SOAP::SOM;
       });

     my $som = $soap->call("remote_function",
         SOAP::Data->name( 'Entry1' )->value( $code ),
     );

    return $som->paramsout;
} 
```

[我还尝试了 perlmonks 建议的](http://www.perlmonks.org/?node_id=973399)这种略有不同的方法，但没有什么比这更好的了

拜托，有人能指出我正确的方向吗？

米格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T10:53:46.513

这不是 SOAP::Lite 或 Catalyst 本身的问题。您查询的几乎所有资源很可能会等待返回（即：磁盘上的文件读取、数据库访问）。如果资源阻塞了很长时间，那么在等待此返回时，您可能会“饿死”其他请求。

这个问题没有一个简单的答案，但是您可以创建一个单独的进程执行的“作业队列”，然后您可以将条目添加到队列中并获取令牌，而不是调用其他服务。请求完成后，队列存储与该令牌关联的结果，然后您的应用程序在单独的请求中检查您想要的令牌是否已经有结果。

有专门的“作业队列”框架，例如 RabbitMQ、ApacheMQ，甚至还有一些基于 Redis 的解决方案。如果您的 Web 应用程序使用丰富的 Javascript，您甚至可以使用例如 WebSockets 将“作业队列”通知发送到 javascript 客户端，否则，只需每秒轮询一次以查看是否有响应。

# php - How to accept a floating point value in an html form and send it to MySQL DB

> ID：11126748
> 
> 赞同：0
> 
> 时间：2012-06-20T19:26:36.010
> 
> 标签：php, javascript, mysql, html

I have created a form that contains fields used to accept a floating value as input. My goal is to be able to store these values in a DB and use them later on. Everything I've tried so far has resulted in failure.

I have tried changing the input field type from text to number, float, and even number with a small step size. It seems that when I request the value of the field with php and then send it to my DB, something goes wrong and stores only the nearest whole number. Ideas?

My form code is:

```
<form name ="chemAdd"  action="submitChemData.php" method="POST" id="chemData">

                <fieldset>
                <legend>Chemical Information</legend>
                <label for="chemName">Chemical Name:</label>
                <input type="text" name="chemName" />

                <label for="chemFormula">Molecular Formula:</label>
                <input type="text" name="chemFormula" />
                </fieldset>
                <br />

                <fieldset>
                <legend>Antoine Constants</legend>
                <label for="A">A:</label>
                <input type="number" name="A" size="10" min="0" max="9999" step="0.00000001" />

                <label for="B">B:</label>
                <input type="float" name="B" size="10"/>

                <label for="C">C:</label>
                <input type="text" name="C" size="10"/>

                <br /><br />

                <label for="unitT">Unit (Temperature):</label>
                    <select name="unitT" >
                        <option value="K">Kelvin</option>
                        <option value="C">Celcius</option>
                        <option value="F">Fahrenheit</option>
                    </select>

                <label for="unitP">Unit (Pressure):</label>
                    <select name="unitP" >
                        <option value="P">Pascal</option>
                        <option value="Hg">mm Hg</option>
                        <option value="bar">bar</option>
                    </select>

                </fieldset>
                <br />
                <fieldset>
                <legend>Reference Information</legend>
                <label for="Tmin">Temp. Minimum:</label>
                <input type="float" name="Tmin" size="10"/>

                <label for="Tmax">Temp. Maximum:</label>
                <input type="float" name="Tmax" size="10"/>
                <br /><br />
                <label for="Reference">Reference:</label>
                <input type="text" name="Reference" size="60"/>

                </fieldset>
                <br />
                <input type="submit"  value="Add to Database" id="submit" />    

                </form>
            </form> 
```

My PHP code is:

```
 require_once 'dbConnectChem.php';

$name = trim(strtoupper($_REQUEST['chemName']));  
$formula= trim(strtoupper($_REQUEST['chemFormula']));  
$A =  $_REQUEST['A']; 
$B = $_REQUEST['B']; 
$C = $_REQUEST['C']; 
$unitT = $_REQUEST['unitT']; 
$unitP = $_REQUEST['unitP']; 
$Tmin = $_REQUEST['Tmin']; 
$Tmax = $_REQUEST['Tmax']; 
$Reference = $_REQUEST['Reference']; 

//INSERT Query
mysql_query("INSERT INTO Antoine (Name,Formula,A,B,C,unit_T,unit_P,Tmin,Tmax,Reference) VALUES ('{$name}','{$formula}','{$A}','{$B}','{$C}','{$unitT}','{$unitP}','{$Tmin}','{$Tmax}','{$Reference}') ")
    or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:38:39.767

Use DECIMAL data type instead of Float. AS described in [this link](http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html), sometimes floating point values leads to issues, while Decimal works fine.

Use it like this way :

```
CREATE TABLE t1 (i INT, d1 DECIMAL(9,2), d2 DECIMAL(9,2)); 
```

Here 9 is the precision and 2 is the scale.Change it accordingly

# django - Django 的自定义模型字段方法 to_python 什么时候得到除了实例之外的任何东西？

> ID：11126755
> 
> 赞同：2
> 
> 时间：2012-06-20T19:27:13.080
> 
> 标签：django, django-models

从[文档中`to_python`](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.to_python)：

> 作为一般规则， [ `to_python`] 应该优雅地处理以下任何参数：
> 
> *   正确类型的实例（例如，`Hand`在我们正在进行的示例中）。
> *   一个字符串（例如，来自反序列化器）。
> *   无论数据库为您使用的列类型返回什么。

我正在查看我的测试覆盖率（使用coverage.py），以及我顶部的代码`to_python`：

```
def to_python(self, value):
    if isinstance(value, Hand):
        return value

    # More code for handling strings below (I never get here) 
```

是我的`to_python`方法中唯一被调用的部分。我还应该测试什么？我已经测试了从数据库中保存和检索对象，并且我已经测试了这样的序列化：

```
 cereal = serializers.serialize('json',
                                   Hand.objects.all())
   objects = list(serializers.deserialize("json", cereal)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:38:39.660

我找到了一个`to_python`以实例以外的东西结束的地方 - 在未提供值的情况下（例如，如果您的字段设置为允许为空）。在那种情况下，因为我实施`get_prep_value`得很糟糕，所以`to_python`传递了一个包含`None`.

# mysql - 结合这些 MySQL 查询

> ID：11126757
> 
> 赞同：0
> 
> 时间：2012-06-20T19:27:23.513
> 
> 标签：mysql, join, pdo

我正在学习 MySQL 并搞乱连接。我想知道我是否可以减少这些查询并将它们组合起来。这是我通常会做的：

```
$stmt = $db_pdo->prepare('SELECT date, table2_id, comments 
                          FROM table1 
                          WHERE user = "victor"');
$stmt->execute();
foreach ($stmt as $row) {
  $table2_id = $row['table2_id'];
}

$stmt = $db_pdo->prepare('SELECT table3_id 
                          FROM table2 
                          WHERE table2_id = '.$table2_id.'');
$stmt->execute();
foreach ($stmt as $row) {
  $table3_id = $row['table3_id'];
}

$stmt = $db_pdo->prepare('SELECT previous_comments_count 
                          FROM table3 
                          WHERE table3_id = '.$table3_id.'');
$stmt->execute();
foreach ($stmt as $row) {
  $table3_id = $row['table3_id'];
} 
```

（我更改了变量，所以故意看起来很愚蠢-我没有为这家公司设计表格）

基本上，我需要从第一个表中获取大部分信息，但是有一个“id”需要跨两个表，我想将它们放入第一个查询中。

所以我尝试的是：

```
$stmt = $db_pdo->prepare('SELECT date, table2_id, comments 
                          FROM table1 
                          LEFT JOIN table2 
                                 ON table1.table2_id = table2.table2_id 
                          LEFT JOIN table3 
                                 ON table2.table3_id = table3.table3_id 
                          WHERE user = "victor"'); 
```

很明显，我的第一个（以及这条线的许多调整版本）失败了，导致一个空白提取。

我可以做第一个左连接，但即使这样似乎也没有显示第二个表中的信息。第二个和第三个表没有与第一个表相同的列。（我不认为这是一个问题，但我可能是错的。）

我在各种网站上进行了一些阅读，虽然我喜欢自己解决问题，但我认为最好问问我想要完成的事情是否可能，并尝试尽快完成。我已经阅读了一些其他类似的问题，但我只是对这个问题的复杂性感到困惑，更不用说那些问题了。（这是那些日子之一......）

可能是我也是第一次使用 pdo 和准备好的语句，我认为这不是问题，但如果是这样，我深表歉意。我不是 MySQL 天才，也没有花太多时间在数据库上。

另外（附带问题，如果允许）：我必须使用 foreach 吗？或者我可以相信在执行后调用 $stmt 就足够了吗？（AKA 在应该显示的 ONE 结果上传递真/假）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:36:55.243

试试这样的连接：

```
table3
LEFT JOIN table2
ON table3.table3_id = table2.table3_id
LEFT JOIN table1
ON table2.table2_id = table1.table2_id 
```

# html - jQuery切换不适用于持续时间

> ID：11126759
> 
> 赞同：0
> 
> 时间：2012-06-20T19:27:28.087
> 
> 标签：html, cross-browser, jquery, jquery-delegate

我有一个动态生成的面板，当单击触发器时，它会从右侧滑入和滑出。

这是HTML：

```
<div id="panel_wrapper">
    <div class="trigger">
        <a id="trigger"></a>
    </div>
    <div id="panel" class="right">
        <div id="panel_nav">
        </div>
    </div>
</div> 
```

这是jQuery：

```
$(div).delegate('#trigger', 'click', function() {
    $('#panel').toggle('fast');
}); 
```

作为记录，这在 Firefox 中完美运行。它可以漂亮地滑入和滑出。但是，它在 Chrome 或 Safari 中无法正常工作（尚未在 IE 中测试）。在 Chrome 或 Safari 中测试时，它会成功打开和关闭**一次**。之后，它将不再起作用。这是踢球者。如果我没有通过持续时间间隔 | 字符串到切换功能，它工作得很好。`$('#panel').toggle();`

最初的反应可能是尝试其他方式滑入和滑出，我向你保证，我已经尝试过了。它们都会产生相同的副作用，即一次正常工作，然后不再起作用。关于到底是什么问题的任何线索？

如果需要更多详细信息，请告诉我。提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:38:40.560

这是您要查找的内容吗：**[jsFiddle 示例](http://jsfiddle.net/j08691/E7TYm/1/)**。

**jQuery**

```
$('div.trigger').on('click', '#trigger', function() {
    $('#panel').toggle('fast');
});​ 
```

此外，从 jQuery 1.7 开始，[.delegate()](http://api.jquery.com/delegate/)已被[.on()](http://api.jquery.com/on/)方法取代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:38:24.213

这是你的（不工作）

```
$(div).delegate('#trigger', 'click', function() {
    $('#panel').toggle('fast');
}); 
```

这是我的（工作）

```
$('div.trigger').delegate('#trigger', 'click', function(e){
    $('#panel').toggle('fast');
}); 
```

[**演示。**](http://jsfiddle.net/heera/RrYDa/)

**更好的：**

```
$('div.trigger').on('click', '#trigger', function(e) {
    $('#panel').toggle('fast');
});​ 
```

**原因：**有两个 div，并且由于“委托”，两个 div 都被委托，所以事件触发了两次，但没有指定它，但使用`div.classname`解决了它。[**检查此项以进行调试。**](http://jsfiddle.net/heera/RrYDa/4/)

# html - 页脚出现在两页的错误位置（其他都很好）

> ID：11126760
> 
> 赞同：1
> 
> 时间：2012-06-20T19:27:28.057
> 
> 标签：html, css, footer

我的网站页脚显示在我的[联系页面](http://frshstudio.com/contact/)和[博客页面](http://frshstudio.com/blog/)的错误位置。所有其他页面的页脚样式正确且位置正确。什么可能导致这个/什么是最好的补救方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:31:13.127

添加`clear:both`到`#footer`您的样式表中。那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:34:28.630

在您的页脚元素上明确：两者：

```
#footer {
clear: both;
} 
```

博客和侧边栏 div 是浮动的。您需要清除页脚上的浮动，以使页脚表现“块状”。

# qt - Qt：在 QDrag 的 QMimeData 中发送 QPixmap？

> ID：11126767
> 
> 赞同：1
> 
> 时间：2012-06-20T19:28:10.660
> 
> 标签：qt, drag-and-drop, mime, qgraphicsview, qlistwidget

我从`QListWidgetItem`. 我可以在这个拖动对象中将文本作为 mime 数据发送。

如何发送像素图并从 mime 数据中检索它？甚至可以创建`QGraphicsItem`并检索它吗？

我尝试从 拖放`QListWidget`到`QGraphicsView`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T21:43:39.707

有多种方法可以发送`QPixmap`through `QMimeData`：

1.  通过将其编码为诸如 PNG 之类的文件格式并使用 mime-type 发送`image/png`（`QMimeData`对此具有内置支持，参见`QMimeData::imageData()`）。
2.  通过使用 a将其序列`QPixmap`化为a并在特定于应用程序的 mime-type 下发送序列化。`QByteArray``QDataStream``application/x-app-name`
3.  通过将图像数据写入磁盘上的文件并使用 mime-type 发送文件 URL `text/uri-list`（`QMimeData`对此具有内置支持，参见`QMimeData::urls()`）。这允许将这些图像拖到文件管理器或桌面上。
4.  与上面的 (2) 类似，您还可以创建 a `QGraphicsItem`，将其地址填充到 a`QByteArray`中，然后在特定于应用程序的 mime 类型下发送。当然，如果拖动在另一个进程中结束，这将不起作用（接收站点可​​以测试，因为在这种情况下`QDragEvent::source()`返回`0`），并且需要特别注意处理图形项的生命周期。

鉴于`QMimeData`允许您一次传递多种格式，这些选项是非排他性的。但是，您应该对从重新实现返回的格式进行排序，`QMimeData::formats()`以降低特异性，即您的应用程序私有格式排在第一位，最后排`text/uri-list`在最后。

# sql - 执行存储在过程参数中的 sql 语句

> ID：11126768
> 
> 赞同：1
> 
> 时间：2012-06-20T19:28:10.997
> 
> 标签：sql, oracle, stored-procedures

我对 Oracle 中的存储过程有疑问。以下是存储过程和表的现状：

```
create table STORES
(
    ID number,
    NAME varchar2(100),
    CITY varchar2(100),
    EXPIRES DATE
)

insert into stores values(1, 'Store 1', 'City 1', sysdate);
insert into stores values(2, 'Store 2', 'City 1', sysdate);
insert into stores values(3, 'Store 3', 'City 2', sysdate);

create table CLOSED
(
    ID number,
    NAME varchar2(100),
    CITY varchar2(100)
)

create or replace PROCEDURE 
pr_TestProc(subQuery  IN VARCHAR2)
IS
begin
    insert into CLOSED (ID, NAME, CITY) 
    select ID, NAME, CITY 
    from STORES 
    where ID in (1, 2, 3);
end; 
```

我想做的是用作为参数传入的 subQuery 替换“in”值。因此，如果我运行以下程序：

```
execute pr_TestProc('select ID from STORES where EXPIRES <= sysdate'); 
```

传入的查询应该作为在过程中运行的子查询来执行。就像是：

```
insert into CLOSED (ID, NAME, CITY) select ID, NAME, CITY 
from STORES 
where ID in (execute(subQuery)); 
```

显然这是行不通的，但是实现这一目标的最佳方法是什么，或者甚至有可能吗？

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:55:05.887

您可以使用动态 SQL

```
 create or replace PROCEDURE pr_TestProc(subQuery  IN VARCHAR2)
 IS
   l_sql_stmt varchar2(1000);
 begin
   l_sql_stmt := 'insert into CLOSED (ID, NAME, CITY) ' ||
                 ' select ID, NAME, CITY ' ||
                 '   from STORES ' ||
                 '  where id in (' || subquery || ')';
   dbms_output.put_line( l_sql_stmt );
   EXECUTE IMMEDIATE l_sql_stmt;
 end;

SQL> execute pr_TestProc('select ID from STORES where EXPIRES <= sysdate');

PL/SQL procedure successfully completed.

SQL> column name format a20
SQL> column city format a20
SQL> select * from closed;

        ID NAME                 CITY
---------- -------------------- --------------------
         1 Store 1              City 1
         2 Store 2              City 1
         3 Store 3              City 2 
```

如果您在相对空闲的系统中很少调用此过程，那么它可能会运行得很好。但是，如果您使用不同的子查询频繁调用它，您将生成大量不可共享的 SQL 语句。这将迫使 Oracle 进行大量的硬解析。它还会用不可共享的 SQL 语句淹没您的共享池，可能会强制执行您想要缓存的计划，然后在再次执行这些 SQL 语句时强制进行更难的解析。如果你做的足够快，你很可能最终得到错误（或导致其他进程得到错误），Oracle 无法在共享池中为特定查询分配足够的内存。此外，动态 SQL 更难编写、更难调试、易受 SQL 注入攻击等。

一个更优雅的解决方案是传入一个集合而不是子查询是传入一个集合

```
SQL> create type id_coll
  2      as table of number;
  3  /

Type created.

SQL> ed
Wrote file afiedt.buf

  1  create or replace PROCEDURE pr_TestProc( p_ids IN id_coll)
  2  is
  3  begin
  4      insert into CLOSED (ID, NAME, CITY)
  5      select ID, NAME, CITY
  6      from STORES
  7      where ID in (select column_value
  8                     from table( p_ids ) );
  9* end;
SQL> /

Procedure created.

SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_ids id_coll;
  3  begin
  4    select id
  5      bulk collect into l_ids
  6      from stores
  7     where expires <= sysdate;
  8    pr_TestProc( l_ids );
  9* end;
SQL> /

PL/SQL procedure successfully completed.

SQL> select * from closed;

        ID NAME                 CITY
---------- -------------------- --------------------
         1 Store 1              City 1
         2 Store 2              City 1
         3 Store 3              City 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:40:08.160

也许您不需要将查询传递给存储过程。只需使用查询作为参数调用存储过程。

```
create or replace PROCEDURE 
pr_TestProc(listOfIds_IN  IN integer)
IS
begin
ids integer := listOfIds_IN;
insert into CLOSED (ID, NAME, CITY) 
select ID, NAME, CITY from STORES where ID in (ids );
end; 
```

像这样调用存储过程：

```
pr_TestProc(SELECT id FROM Table WHERE condition) 
```

# android - 适用于流行手机的 Eclipse Android 布局配置

> ID：11126769
> 
> 赞同：1
> 
> 时间：2012-06-20T19:28:11.470
> 
> 标签：android, eclipse

在我问这个问题之前，让我声明我已经尝试使用几个关键词在谷歌上搜索，但运气不佳。

我在 Eclipse 图形布局编辑器的“设备布局配置”列表之后。流行手机的列表，例如三星 Galaxy 系列和 HTC 的各种欲望手机是我所追求的。

如果有人能够指出我正确的方向，我将不胜感激。

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:55:45.010

*无耻的自塞*

看来我需要稍微改进一下我的[SEO](http://en.wikipedia.org/wiki/Search_engine_optimization)！

这是每个密度桶的“设备布局配置”（模拟器设置）列表：http:
[//blog.blundellapps.com/emulator-settings-for-each-android-density/](http://blog.blundellapps.com/emulator-settings-for-each-android-density/)

这是一个开始。进一步阅读是我按密度桶列出的流行设备列表：http:
[//blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/](http://blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/)

# wpf - Infragistics：加载带有浮动选项卡的布局时，文档内容主机“延迟显示已在进行中”

> ID：11126773
> 
> 赞同：2
> 
> 时间：2012-06-20T19:28:28.480
> 
> 标签：wpf, infragistics

我们正在使用 infragistics LoadLayout(layout) 方法来加载和保存停靠管理器。加载文档内容主机时，我们收到一条错误消息，指出“延迟的节目已经在进行中”。当布局包含浮动窗格时会发生这种情况。布局存储在数据库中并作为字符串传递给方法。它并不总是发生，有时会加载正常。我假设这是某种时间问题，但找不到任何信息。关于为什么会发生此错误的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T14:47:49.243

它也发生在我们身上。似乎只有在浮动窗格从未固定或调整大小时才会发生。如果它被固定或调整大小，那么它加载得很好。要观察的 xml 参数是“lastFloatingWindowRect”。如果它包含 NaN,NaN 那么它将无法正确加载。

# sql - 来自 Oracle 中 dblink 等待事件的 SQL*Net 消息

> ID：11126777
> 
> 赞同：2
> 
> 时间：2012-06-20T19:28:34.320
> 
> 标签：sql, oracle, insert, oracle10g

我在 Oracle 10g 中有一个 INSERT 查询，它卡在“来自 dblink 的 SQL*Net 消息”事件上。看起来像：

```
INSERT INTO my_table (A, B, C, ...) 
  SELECT A, B, C, ... FROM link_table@other_system; 
```

`my_table`除了我正在尝试执行的 INSERT 中的锁之外，我没有看到任何锁。单独运行时，SELECT 查询可以`link_table@other_system`毫无问题地完成。我只有在尝试进行 INSERT 时才会遇到这个问题。

有谁知道这里会发生什么？

**更新** SELECT 在单独运行时在约 1.5 分钟内返回 4857 行。在我决定杀死它之前，INSERT 运行了一个多小时，并带有这个等待消息。

**更新** 我在我的方法中发现了一个错误。我使用日期范围来限制结果。我仅在测试 SELECT 时使用的日期范围是在最后一次在 link_table 上运行 OraStats 之前，但我在测试 INSERT 时使用的日期范围是在最后一次在 link_table 上运行 OraStats 之后。所以，这误导我相信 INSERT 有问题。我这样做不是很科学；我的错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:54:28.513

`SQL*Net message from dblink`通常意味着您的本地系统正在网络上等待通过网络传输数据。对于此类查询，这是一个非常正常的等待事件。

`SELECT`语句返回多少行？这代表了多少数据（以 MB/GB 为单位）？

当您说它“自行完成而没有任何麻烦”时，您实际上是在获取所有数据吗？如果您使用的是 TOAD 或 SQL Developer 之类的东西，GUI 通常会获取前 N 行并返回给您。这可能非常快，但并不意味着数据库已完成执行查询 - 完成生成查询将返回的所有行可能需要更多时间。人们通常测量获取前 N 行所需的时间而不是获取最后一行的时间——显然，在从远程表中获取所有行之前，您的 INSERT 语句无法返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T04:42:13.890

您是否使用`/*+ driving_site(link_table) */`提示让 Oracle 在远程服务器上执行连接？

If so, that hint will **not** work with DML, as explained by Jonathan Lewis on [this page](http://jonathanlewis.wordpress.com/2008/12/05/distributed-dml/).

This may be a rare case where running the query just as a `SELECT` uses a very different plan than running the query as part of an `INSERT`. (You will definitely want to learn how to generate explain plans in your environment. Most tools have a button to do this.)

As Andras Gabor recommended in the link, you may want to use PL/SQL `BULK COLLECT` to improve performance. This may be a rare case where PL/SQL will work faster than SQL.

# php - 如果请求的图像在 php 中不存在，则生成正确大小的 error.jpg 图像

> ID：11126779
> 
> 赞同：0
> 
> 时间：2012-06-20T19:28:35.767
> 
> 标签：php, image, error-handling

当源不存在时，对 image=90273497823 发出非法请求，您应该返回正确大小的占位符图像来代替。

一个例子可能是：

```
<img src="resources/image.php?id=95648633&amp;x=160&amp;y=120&amp;color=1"  alt="kitty"/> 
```

我没有让网页直接从我的服务器中提取图像，而是调用脚本 image.php 来处理这个请求，并在需要时处理异常。该脚本适用于所有存在的图像，但对于不存在的图像，脚本无法加载我拥有的 error.jpg 图像；让我相信我的错误处理是不正确的。

我希望我的脚本做的是检查文件是否存在，如果不替换为正确大小（不存在图像的相同大小请求）error.jpg

我的脚本如下。

```
<?php

header('Content-type: image/jpg');//override the return type
                              //so browser expects image not file
$id=$_GET['id'];//get file name
$new_width=$_GET['x'];//get width
$new_height=$_GET['y'];//get heigth
$color=$_GET['color'];//get colored version type
$filename=$id;//file id is set as file name
$filename.=".jpg";//append .jpg onto end of file name

// create a jpeg from the id get its size
$im=imagecreatefromjpeg($filename);

// get the size of the image
list($src_w, $src_h, $type, $attr)=getimagesize($filename);

/*
  Exception handling for when an image is requested and the file dosent exist
  in the current file system or directory. Returns file "error.jpg" correctly
  sized in the place of the  requested null file.
*/
if(!file_exists($filename))//(file_exists($filename) == false)
//(!file_exists($filename))
  {

    imagedestroy($im);//why do I have to destroy it, why cant I write over it?
    $im=imagecreatefromjpeg("error.jpg");
    list($src_w, $src_h, $type, $attr)=getimagesize($im);

  }

/*
  this function will resize the image into a temporary image
  and then copy the image back to $im
*/
if($new_width != '' && $new_height != '')

  {
     //MAKE A TEMP IMAGE TO COPY FROM
     $imTemp=imagecreate($new_width, $new_height);
     imagecopyresized($imTemp, $im, 0, 0, 0, 0, $new_width, $new_height, $src_w,
                     $src_h);
     imagedestroy($im);//free up memory space

     //COPY THE TEMP IMAGE OVER TO $im
     $im=imagecreate($new_width, $new_height);
     imagecopy($im, $imTemp, 0, 0, 0, 0, $new_width, $new_height);
     imagedestroy($imTemp);//free up memory space
  }

/*
  If the image being requested has color = 0, then we return a grayscale image,
  but if the image is already grayscale
*/
if($color == 0)
  {
     imagefilter($im, IMG_FILTER_GRAYSCALE);
  }

//What do we do if color = 0, but they want a colorized version of it???

imagejpeg($im);//output the image to the browser
imagedestroy($im);//free up memory space
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:34:09.800

[getimagesize](http://php.net/getimagesize)采用文件名，而不是图像资源句柄。那可能是你出错的地方。

# c# - 什么是更好的方法性能明智

> ID：11126780
> 
> 赞同：0
> 
> 时间：2012-06-20T19:28:36.323
> 
> 标签：c#, c#-4.0

假设我需要从数据库中获取一些记录，并根据枚举类型属性过滤它们。

*   拿来`List<SomeType>`
*   过滤`SomeType.Size`
*   枚举`Size { Small, Medium, Large }`

显示记录时，大小过滤器（例如中）会有一个预定义的值。在大多数情况下，用户将通过预定义的值从过滤数据中选择一个值。用户也有可能过滤到大，然后过滤到中，然后再次过滤到大。

我有相同情况的不同情况：

*   列表包含少于 100 条记录和 3-5 个属性
*   列表包含 100-500 条记录和 3-5 个属性
*   列表最多包含 2000 条记录，包含 3-5 个属性

我在这里最好的方法是什么？我应该有一个包含每个枚举网格的选项卡，还是应该有一个通用枚举并始终过滤，或者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:43:02.590

我会在数据库上进行过滤，如果这些字段被索引，我会怀疑使用 db 过滤器会比事后使用 c-sharp 过滤快得多。

当然，您始终可以缓存过滤后的数据库结果，以防止多次不必要的数据库调用。

编辑：至于在数据库中存储信息，假设你有这个字段设置：

```
CREATE TABLE Tshirts
(
    id int not null identity(1,1),
    name nvarchar(255) not null,
    tshirtsizeid int not null,
    primary key(id)
)

CREATE TABLE TshirtSizes
(
    id int not null, -- not auto-increment
    name nvarchar(255)
)

INSERT INTO TshirtSizes(id, name) VALUES(1, 'Small')
INSERT INTO TshirtSizes(id, name) VALUES(2, 'Medium')
INSERT INTO TshirtSizes(id, name) VALUES(3, 'Large')

ALTER TABLE Tshirts ADD FOREIGN KEY(tshirtsizeid) REFERENCES tshirtsize(id) 
```

然后在你的 C#

```
public enum TShirtSizes 
{
    Small = 1,
    Medium = 2,
    Large = 3
} 
```

在此示例中，该表`TshirtSizes`仅用于让读者了解幻数 1、2 和 3 的含义。如果您不关心数据库的可读性，您可以省略这些表而只使用索引列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:34:05.043

内存通常很便宜。否则，您可以一次性对所有值进行排序并根据 O(n) 的比较进行检索。您可以跟踪事物的位置并以这种方式更快地检索。

# objective-c - 如何从字典数组中提取范围进行随机化？（目标-C）

> ID：11126781
> 
> 赞同：0
> 
> 时间：2012-06-20T19:28:39.780
> 
> 标签：objective-c, ios

我有一个字典数组存储在带有键和字符串的 plist 中，它们是我的测验应用程序的问题和答案。我在屏幕上放了一个随机问题，但我想在屏幕上也以随机顺序放置问题的答案。我怎样才能做到这一点？

引用问题的方式如下：

```
-(void)displayQuestion: (NSDictionary *) Question 
{
    [questionLabel setText:[Question objectForKey:@"Question"]];
    [answer1 setText:[Question objectForKey:@"Answer1"]];
    [answer2 setText:[Question objectForKey:@"Answer2"]];
    [answer3 setText:[Question objectForKey:@"Answer3"]]; 
}

<dict>
    <key>category</key>
    <string>Elementary Pilot</string>
    <key>Question</key>
    <string>You are approaching a hang glider head-on and at approximately the same height. You should:</string>
    <key>Answer1</key>
    <string>Turn to your right?</string>
    <key>Answer2</key>
    <string>Turn to your left?</string>
    <key>Answer3</key>
    <string>Lose height rapidly?</string>
</dict> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:34:11.580

使用此答案中找到的类别[What's the Best Way to Shuffle an NSMutableArray?](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

将您的答案放在 NSMutableArray 中，然后使用

```
NSMutableArray *answers = //get answers
[answers shuffle]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:33:53.530

如果每个问题只有一个答案，那么您可以简单地保留两个数组，一个用于问题，一个用于答案。获取答案计数并使用以下方法获取该范围内的随机数

```
int randomNumber = arc4random()%[answers count]; 
```

然后您可以简单地在索引 = randomNumber 处获取答案数组中的对象。

* * *

好的，创建一个包含问题本身和 answerArray 的 questionObject。当您阅读 plist 时，您必须浏览每个问题的答案数组，然后您可以简单地按照之前的任何一个回答进行操作。

* * *

好的，让我们从头开始。您的 plist 是什么类型的对象？提示，提示，字典。到目前为止还好吗？要阅读 plist，您可以先找到它的路径：

```
// Path to the plist (in the application bundle)
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"NameOfPlist" ofType:@"plist"]; 
```

然后只需找到给定的字典，在这种情况下 plistInstance 是一个字典实例。

```
plistInstance = [[DataCacheManager dictionaryForPlistAtPath:plistPath] retain]; 
```

从那里您将能够访问该 plist 的直接键。在这种情况下，它可能是一个问题数组，所以你可以有这样的东西：

```
NSArray *questionsArray = [NSArray arrayWithArray:[plistInstance objectForKey:@"Questions"]]; 
```

在该数组中，您的问题对象应该有一个问题字符串和一个用于该问题答案的数组，依此类推。

# java - C++ 指针指向 Java 中的指针

> ID：11126782
> 
> 赞同：9
> 
> 时间：2012-06-20T19:28:40.757
> 
> 标签：java

我是一个 Java 菜鸟。我已经能够掌握将 C/C++ 指针转换为 Java 引用的概念，而且进展相当顺利。

我打了一段代码，它有指向指针的指针（即**ptr）。我需要取消引用指针并更改它指向的指针的值（即*ptr = &newthing;）

这在java中似乎更难。有没有人对如何解决这个问题有任何想法？快速谷歌搜索什么也没发现。

这是 C++ 中的代码示例。我想在 java 中获得类似的工作，但 ptr_to_ptr 变量是一个问题：

```
struct _coord
{
   int x;
   int y;
   _coord * next_coordinate;
} coordinate_t;   

coordinate_t buffer[100];
coordinate_t * head;
coordinate_t ** ptr_to_ptr;

if (wednesday)
{
    ptr_to_ptr = &head;
}
else
{
    ptr_to_ptr = &head->next_coordinate;
}
*ptr_to_ptr = &buffer[3];   // <<<---- HOW DO YOU MAKE THIS WORK? 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T19:38:45.287

在 Java 中可以用来对指向指针的指针建模的一个典型技巧是使用数组：对数组本身的引用充当“指针”，而数组元素充当所指向的项。您可以随意嵌套它们，但代码看起来不像在 C/C++ 中那样漂亮。

与其将 C/C++ 习语移植到 Java 中，不如构建一个可变类，让您可以更改其中的项目。此类将充当“指针”，为您提供您正在寻找的功能，它还将增加 Java 代码的可读性。泛型极大地简化了您的任务，只需要一种可以重用的实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T19:49:47.557

那么指针的指针在 Java 中是不能直接映射的。我假设您想将一个新对象分配给函数内的指针。

据我所知，您只能通过使用充当引用的包装器对象来解决此问题，因此您可以修改内部的真实引用：

```
class ObjRef {

   public RealObj obj;

}

void modifyRef(ObjRef ref){

   ref.obj = new RealObj()

} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T22:33:39.637

我会回答我自己的问题。我找不到任何简单的方法来在 java 中执行指向指针（对引用的引用）的指针。所以我重构了代码以使用引用数组和数组索引而不是指针。我*认为*这会起作用（它很容易编码），但我还没有测试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:35:14.167

Java没有指针。但是可以说，当您创建一个 时`Object`，您正在创建一个指向该 的引用（指针）`Object`。

例如：

```
Object obj = new Object(); 
```

所以引用`obj`实际上是指向`Object`你刚刚创建的新的。

现在，如果您想将指针的概念转换为指针，您可以简单地创建一个指向现有引用的引用。

```
Object obj = new Object();
Object obj2;
obj2 = obj; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T20:47:28.267

唯一的“类指针”方法是 unsafe() 。您可以使用它分配内存。但是你不能走出 JVM 区域 :)

# json - JSON 和处理未导出的字段

> ID：11126793
> 
> 赞同：81
> 
> 时间：2012-06-20T19:29:27.443
> 
> 标签：json, go

编码/json不包含未导出的字段是否有技术原因？如果不是，这是一个任意决定，即使未导出，是否还有一个额外的后门选项（比如“+”）要包括在内？

要求导出客户端代码以获取此功能感觉很不幸，特别是如果小写提供封装或编组结构的决定远晚于它们的设计。

人们如何处理这个问题？只导出所有内容？

此外，不导出字段名称会使遵循建议的习语变得困难。我认为如果结构 X 具有字段 Y，则不能有访问器方法 Y()。[如果您想提供对 Y 的接口访问，您必须为 getter 取一个新名称，并且根据http://golang.org/doc/effective_go.html#Getters](http://golang.org/doc/effective_go.html#Getters)，无论如何您都会得到一些不习惯的东西

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-20T23:10:57.490

有技术原因。json 库无权使用反射查看字段，除非它们被导出。一个包只能查看自己包中未导出的类型字段

为了解决您的问题，您可以做的是使用导出的字段创建一个未导出的类型。如果传递给它没有问题，Json 将解组为未导出的类型，但它不会出现在 API 文档中。然后，您可以制作一个嵌入未导出类型的导出类型。然后，此导出的类型将需要实现`json.Marshaler`和`json.Unmarshaler`接口的方法。

注意：所有代码都未经测试，甚至可能无法编译。

```
type jsonData struct {
    Field1 string
    Field2 string
}

type JsonData struct {
    jsonData
}

// Implement json.Unmarshaller
func (d *JsonData) UnmarshalJSON(b []byte) error {
    return json.Unmarshal(b, &d.jsonData)
}

// Getter
func (d *JsonData) Field1() string {
    return d.jsonData.Field1
} 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-06-20T23:31:05.553

斯蒂芬的回答是完整的。顺便说一句，如果您真正想要的是 json 中的小写键，您可以手动指定键名，如下所示：

```
type Whatever struct {
    SomeField int `json:"some_field"`
} 
```

以这种方式，编组一个 What 会为字段 SomeField 生成键“some_field”（而不是在您的 json 中包含“SomeField”）。

如果您对保留未导出的字段一无所知，您还可以通过定义带有签名的方法来实现 json.Marshaler 接口`MarshalJSON() ([]byte, error)`。一种方法是使用结构文字，它只是导出了未导出字段的版本，如下所示：

```
type Whatever struct {
    someField int
}

func (w Whatever) MarshalJSON() ([]byte, error) {
    return json.Marshal(struct{
        SomeField int `json:"some_field"`
    }{
        SomeField: w.someField,
    })
} 
```

这可能有点麻烦，因此您也可以使用 a`map[string]interface{}`如果您愿意：

```
func (w Whatever) MarshalJSON() ([]byte, error) {
    return json.Marshal(map[string]interface{}{
        "some_field": w.SomeField,
    })
} 
```

但是应该注意，编组`interface{}`有一些注意事项，并且可以执行诸如编组`uint64`到浮点数之类的操作，从而导致精度损失。（所有代码未经测试）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-03T02:30:25.897

使用接口将是另一种选择。

```
type Person interface {
    Name() string
    SetName(name string) Person
    Age() int
    SetAge(age int) Person
}

type person struct {
    Name_ string
    Age_  int
}

func (p *person) Name() string {
    return p.Name_
}

func (p *person) SetName(name string) Person {
    p.Name_ = name

    return p
}

func (p *person) Age() int {
    return p.Age_
}

func (p *person) SetAge(age int) Person {
    p.Age_ = age

    return p
}

func NewPerson() Person {
    return &person{}
} 
```

由于`person struct`是小写字母，您将无法访问其包之外的公共字段。要实例化一个 person 值，您需要提供一个构造函数，该构造函数将它包装在大写`Person`接口中。

[操场](https://play.golang.org/p/B5y4eIIc44z)

# codeigniter - 在活动记录中获取加入的结果计数

> ID：11126794
> 
> 赞同：0
> 
> 时间：2012-06-20T19:29:33.633
> 
> 标签：codeigniter, activerecord

考虑这个简单的查询：

```
$this->db->join('bids','bids.bid_for = request_quote.quoteid','left'); 
```

有没有办法改变它，所以它不是加入结果，而是加入它找到的所有出价的 COUNT ？

我可以用普通 SQL 重写它，但它是更大查询的一部分，我不想用 SQL 重写

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:30:59.237

艰难的一个。我查看了 CI 的源代码，但没有看到“黑客”。也许你可以使用这个 CI 的方法：

```
$this->db->count_all_results(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:55:07.360

好吧，在搞砸了几个小时后，我让它开始工作了，所以我会分享它以防万一有人再次需要它：

```
 public function getAllJobsByUserId($userid){
        $this->db->select('quoteid')->select('quoteby')->select('country_from')
    ->select('country_to')->select('city_from')->select('city_to')
    ->select('countries.country_name, countries_to.country_name AS     country_name_to')
        ->select('COUNT(\'bids.bid_id\') as bid_count');
        $this->db->from('request_quote');
        $this->db->where('quoteby',$userid);
        $this->db->join('countries','countries.country_id = request_quote.country_from');
        $this->db->join('countries as countries_to','countries_to.country_id = request_quote.country_to');
        $this->db->join('bids as bid_count','bid_count.bid_for = request_quote.quoteid','outter');
        $query=$this->db->get();
    return $query->result();
    } 
```

这似乎有效。但是将来仍然可能会在直接 SQL 中编写更复杂的查询 :)

# ruby - 在 ruby 中分组和格式化哈希值数组

> ID：11126796
> 
> 赞同：0
> 
> 时间：2012-06-20T19:29:39.910
> 
> 标签：ruby, arrays, grouping

嘿，我有一个哈希值数组，如下所示。

```
[{"group" => "1", "message" => "hey", "weight" => 1}, {"group" => "1", "message" 
 => "hey1", "weight" => 2}, {"group" => "2", "message" => "hey3", "weight" => 4}] 
```

我想 group_by 组并对其进行格式化，以便获得以下信息：

```
[{"group" => 1, "messages" => {"hey","hey1"}, "weights" => {1,2}}, {"group" => 2,
  "messages" => {"hey3"}, "weights" => {4}}] 
```

有没有很好的红宝石方法来实现这一目标？

**编辑**：现在我有：

```
[
  {"group" => "1", "message" => {"hey" => "1"}},
  {"group" => "1", "message" => {"hey1" => "2"}}
] 
```

我想拥有

```
{"group" => "1", "messages" => {"hey1" => "1", "hey2" => "2"} } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:07:03.160

根据您修改后的问题：

```
groups = [
  {"group" => "1", "message" => {"hey" => "1"}},
  {"group" => "1", "message" => {"hey1" => "2"}}
]

merged = groups.inject do |h1,h2|
  h1.merge(h2) do |k,v1,v2|
    if v1==v2
      v1
    elsif v1.is_a?(Hash) && v2.is_a?(Hash)
      v1.merge(v2)
    else
      [*v1,*v2]
    end
  end
end

p merged
#=> {"group"=>"1", "message"=>{"hey"=>"1", "hey1"=>"2"}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:55:40.787

我认为你想要的输出是：

```
[{"messages"=>["hey", "hey1"], "weights"=>[1, 2], "group"=>"1"}, {"messages"=>["hey3"], "weights"=>[4], "group"=>"2"}] 
```

如果是这种情况，此代码将执行您想要的操作：

```
h.group_by { |item| item["group"] }.values.map do |item|
    item.inject({"messages" => [], "weights" => []}) do |result, subitem|
        result["group"] = subitem["group"]
        result["messages"] << subitem["message"]
        result["weights"] << subitem["weight"]
        result
    end
end 
```

您应该能够更好地了解您的具体问题，但这应该是一个很好的起点。

# ember.js - 当前 ember-late 中的 CollectionView 错误？

> ID：11126804
> 
> 赞同：1
> 
> 时间：2012-06-20T19:30:00.373
> 
> 标签：ember.js, handlebars.js, collectionview

我用 ember-0.9.8.1.js 做了一些测试，下面的代码按预期工作。之后，我阅读了有关路由器的信息，并且该路由器的代码仅在当前的 ember-latest.js (16.06.2012) 中可用。我用这个版本测试下面的代码。问题是列表被渲染：

```
 <div id="ember143" class="ember-view">
    <ul id="PersonList" class="ember-view ListBox">
      <li id="ember179" class="ember-view">
       <script id="metamorph-0-start" type="text/x-placeholder"></script>
       <script id="metamorph-0-end" type="text/x-placeholder"></script>
      </li>
      <li id="ember183" class="ember-view">
        <script id="metamorph-1-start" type="text/x-placeholder"></script>
        <script id="metamorph-1-end" type="text/x-placeholder"></script>
      </li>
      <li id="ember187" class="ember-view">
        <script id="metamorph-2-start" type="text/x-placeholder"></script>
        <script id="metamorph-2-end" type="text/x-placeholder"></script>
      </li>
      <li id="ember191" class="ember-view">
        <script id="metamorph-3-start" type="text/x-placeholder"></script>
        <script id="metamorph-3-end" type="text/x-placeholder"></script>
      </li>
      </ul>
     </div> 
```

但是是空的。与

模板：Ember.Handlebars.compile("{{content.name}}"),

无法正常工作或某些语法方面已更改。

代码行

console.log("content:",this.get('content'));

在点击处理程序中显示，正确的内容在那里，但是

Ember.Handlebars.compile("{{content.name}}"),

不会渲染内容。

这是一个错误？？？

Javascript代码：

```
 var App = Em.Application.create({

    ready: function(){
        App.personListController.getData();
    }
    });

    // Model Objects

    App.Person = Ember.Object.extend({
      name: null,
      myTickets: null,
      selected: false
    });

    // Liste von Personen anlegen

    App.personListController = Ember.ArrayController.create({

    getData: function(){

        $.get('json/person.json', function(data) {
            var personList = Ember.A([]);
            data.forEach(function(item) {
                var p = App.Person.create({
                    'name': item.name,
                    'myTickets': null,
                    'selected': false
                });
                personList.pushObject(p);
            });
            App.personListController.set('content', personList);
        })
    },
    resetSelection: function(){
        App.personListController.content.forEach(function(item){
            item.set('selected',false);
        })
    },
    selectedPerson: null
    });

    App.PersonList = Ember.CollectionView.extend({
      tagName: 'ul',
      contentBinding: 'App.personListController.content',
      classNames: ['ListBox'],
      mouseenter: function(event){
        console.log("PersonList.content:",this.get('content'));
      },

    itemViewClass: Ember.View.extend({
        template: Ember.Handlebars.compile("{{content.name}}"),
        classNameBindings: ['selected:selected'],
        selectedBinding: 'content.selected',
        click:
            function(event){
                App.personListController.resetSelection() ;
                this.setPath('content.selected',true);
                App.personListController.set('selectedPerson',this.get('content'));
                console.log("ItemViewInfo selected:",this.getPath('content.selected'));
                console.log("content:",this.get('content'));
                //this.set('isSelected',true);
            }
       })
    }); 
```

HTML：

```
 <script type="text/x-handlebars">
   {{#view App.PersonList id="PersonList"}}

   {{/view}}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:46:49.967

这是因为`view`最新提交中更改的查找上下文。现在，`view`如果您想在`view`. 请参阅提交[8a6c6](https://github.com/emberjs/ember.js/commit/8a6c62ac1960dd8590f2128e7aad737404234506)中的文档更新。

因此模板更改为

```
template: Ember.Handlebars.compile("{{view.content.name}}") 
```

见[http://jsfiddle.net/pangratz666/DsdHU/](http://jsfiddle.net/pangratz666/DsdHU/)。

Tom Dale 有一个[Gist](https://gist.github.com/2494968)进一步解释了这些变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:49:24.273

latest-ember.js（以及 ember-1.0.pre.js）不再包含把手，您必须自己包含它。

您现在还必须自己启动事件循环： **！！-> 好像你不再需要那个了.. !!**

```
App.initialize(); 
```

..相关的jsfiddle：http: [//jsfiddle.net/aGMzD/](http://jsfiddle.net/aGMzD/)

# c# - 对于编码的 UI 测试，窗口消失得太快

> ID：11126805
> 
> 赞同：3
> 
> 时间：2012-06-20T19:30:04.990
> 
> 标签：c#, visual-studio-2010, coded-ui-tests

在我使用 Coded UI Tests 测试的程序中，我有一个只打开一秒钟左右的窗口，我想验证这个窗口是否正在打开。

有没有办法冻结程序，或者让它运行缓慢，以便测试能够找到那个窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T07:40:46.717

正如我在评论中已经提到的那样，您可以通过`CodedUi Test`捕获窗口来做很多事情（也许什么也做不了），因为此功能内置于应用程序中。

我的建议是使这个属性可配置。被测应用程序中的某些属性需要可配置，以便对其进行测试。考虑以下要求：

*   该服务每月重新启动。
*   用户在一年不活动后被删除。

你将如何测试它们？你会等一个月还是一年？这些参数必须可供 Qa 团队使用，否则无法测试。我知道使用这种方法，您必须更改应用程序的代码并构建，但我认为这是解决它的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:02:57.643

添加一个 Thread.Sleep(100); 怎么样？

[http://msdn.microsoft.com/en-us/library/d00bd51t](http://msdn.microsoft.com/en-us/library/d00bd51t)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:15:24.223

据我了解，最好的方法是将您的任务分解得尽可能小。因此，对于我所做的 UI 测试，它在我的工具栏上打开一个快捷方式，在其中的弹出窗口上单击登录，然后单击应用程序中的一个选项卡，代码如下所示：

```
namespace CodedUITestProject1
{
/// <summary>
/// Summary description for CodedUITest1
/// </summary>
[CodedUITest]
public class CodedUITest1
{
    public CodedUITest1()
    {
    }

    [TestMethod]
    public void CodedUITestMethod1()
    {
        // To generate code for this test, select "Generate Code for Coded UI Test" from the shortcut menu and select one of the menu items.
        // For more information on generated code, see http://go.microsoft.com/fwlink/?LinkId=179463
        this.UIMap.OpenWindow();
        this.UIMap.ClickLogin();
        this.UIMap.ClickDevelopment();
    }
//snip
} 
```

所以然后在 ClickDevelopment() 方法中，我知道程序应该是可见的，所以我可以抛出一个 Thread.Sleep() 使其可见一段时间，而不是直接进入方法操作。

```
public void ClickDevelopment()
    {
        Thread.Sleep(10000);
        #region Variable Declarations
        WinClient uIDevelopmentClient = this.UIQualityTrack30Window.UIItemWindow.UIQualityTrack30Client.UIDevelopmentClient;
        #endregion

        // Click 'Development' client
        Mouse.Click(uIDevelopmentClient, new Point(39, 52));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T10:06:09.133

使用 Playback.Wait(2000) 而不是 Thread.Sleep(2000);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-07T12:30:02.780

最好的方法是添加轮询机制。一旦您执行将打开窗口的操作，请调用一个函数，该函数将持续检查窗口是否出现，例如 1 分钟左右。

确保在执行操作后立即调用此函数。因此，即使窗口停留 500 毫秒，信息也会被捕获。

我们在项目中也做过类似的事情。

# ruby - 页面对象模型：为什么不在页面方法中包含断言？

> ID：11126806
> 
> 赞同：37
> 
> 时间：2012-06-20T19:30:06.120
> 
> 标签：ruby, selenium, webdriver, selenium-webdriver, pageobjects

第一次海报。我从事 UI 自动化工作多年，但最近才被介绍/指导使用页面对象模型。其中大部分是常识，包括我已经使用过的技术，但有一个特别好的点我无法在自己的脑海中证明，尽管广泛搜索了一个合理的解释。我希望这里有人可以启发我，因为当我尝试将 POM 与我自己的最佳实践集成时，这个问题引起了一些恐慌。

来自[http://code.google.com/p/selenium/wiki/PageObjects](http://code.google.com/p/selenium/wiki/PageObjects)：

> 上面给出的代码显示了一个重要的点：测试，而不是 PageObjects，应该负责做出关于页面状态的断言......当然，与每条指南一样，也有例外......

来自[http://seleniumhq.org/docs/06_test_design_considerations.html#chapter06-reference](http://seleniumhq.org/docs/06_test_design_considerations.html#chapter06-reference)：

> 页面对象的设计方式有很大的灵活性，但是有一些基本规则可以让您的测试代码获得所需的可维护性。页面对象本身不应该进行验证或断言。这是测试的一部分，应该始终在测试代码中，而不是在页面对象中。页面对象将包含页面的表示，以及页面通过方法提供的服务，但与正在测试的内容相关的代码不应包含在页面对象中。
> 
> 有一个单一的验证可以而且应该在页面对象内，即验证页面以及页面上可能的关键元素是否正确加载。此验证应在实例化页面对象时完成。

这两个“指导方针”都允许潜在的例外情况，但我完全不同意基本前提。我习惯于在“页面方法”中进行大量验证，并且我认为验证的存在是一种在各种上下文中查找问题的强大技术（即，每次调用方法时都会进行验证）而不是而不仅仅是在特定测试的有限环境中发生。

例如，假设当您登录到 AUT 时，会出现一些文本，上面写着“以用户身份登录”。有一个单独的测试来专门验证它是合适的，但你为什么不想*每次都验证它*登录叫什么？这个工件与页面是否“加载正确”没有直接关系，一般来说也与“正在测试什么”没有关系，所以根据上面的POM指南，它显然不应该在页面方法中。 .. 但在我看来，它显然应该存在，通过尽可能多地验证重要工件，尽可能少地预先考虑，从而最大限度地发挥自动化的力量。将验证码放入页面方法中，通过允许您“免费”获得大量验证，而无需在测试中担心它，从而增加了自动化的力量，并且在不同的上下文中进行如此频繁的验证通常会发现您找不到的问题如果验证仅限于，例如，对该工件的单一测试。

换句话说，我倾向于区分特定于测试的验证和“一般”验证，并且我认为将后者广泛包含在页面方法中是完全合适/理想的。这促进了更精简的测试和更厚的页面对象，这通常通过重用更多代码来*提高*测试的可维护性——尽管这些指南中存在相反的争论。我错过了重点吗？不想在页面方法中进行验证的真正理由是什么？我描述的情况实际上是这些指南中描述的“例外”之一，因此实际上与 POM 不一致吗？提前感谢您的想法。-jn-

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-20T10:50:09.843

作为准则，断言应该在测试中而不是在页面对象中完成。当然，有时这不是一种务实的方法，但这些时候并不常见，以至于上述指导方针是正确的。以下是我不喜欢在页面对象中使用断言的原因：

1.  `verify`阅读一个只调用断言隐藏在页面对象中其他地方的方法的测试是非常令人沮丧的。在可能的情况下，测试断言的内容应该很明显；当断言直接在测试中时，这是最好的实现。通过将断言隐藏在测试之外的某个地方，测试的意图并不那么清楚。

2.  浏览器测试中的断言可能很昂贵——它们确实会减慢您的测试速度。当您有数百或数千个测试时，可以将分钟/小时添加到您的测试执行时间；这是一件坏事。如果您将断言移动到只关心那些特定断言的测试，您会发现您将拥有更快的测试，并且您仍然会发现相关的缺陷。问题包括以下内容：

    > 将验证码放入页面方法中，让您“免费”获得大量验证，从而使自动化的力量倍增

    好吧，“自由不是免费的” :) 你*实际上*增加的是你的测试执行时间。

3.  到处都有断言违反了另一个好的准则；“每个测试一个断言”（[http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html](http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html)）。我不虔诚地坚持它，但我努力遵循这个原则。在可能的情况下，测试应该只对一件事感兴趣。

4.  测试的价值降低了，因为一个错误会导致大量测试失败，从而阻止他们测试他们应该测试的内容。

    > 例如，假设当您登录到 AUT 时，会出现一些文本，上面写着“以用户身份登录”。让一个测试专门验证这一点是合适的，但是为什么您不想在每次调用 login 时验证它呢？

    如果您在页面对象类中有断言并且预期的文本发生更改，则*所有*登录的测试都将失败。相反，如果断言在测试中，那么只有一个测试会失败 - 专门测试正确消息的测试 - 让所有其他测试继续运行以查找其他错误。你不需要 5000 次测试就可以告诉你登录信息是错误的；1个测试就可以了；）

5.  让一个班级做不止一件事违反了[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)中的“S” ，即：“[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)”( `SRP`)。一个类应该负责一件事，而且只负责一件事。在这种情况下，页面对象类应该负责为页面（或其部分）建模，仅此而已。如果它的作用不止于此（例如：包括断言），那么您就违反了 SRP。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-20T20:34:53.650

我有时也为这个建议而苦苦挣扎。我相信这个指南背后的原因是为了让你的页面对象保持可重用性，并且在你的页面对象中放置断言可能会限制它们被大量不相关的测试重用的能力。也就是说，我已经在我的页面对象上放置了某些验证方法，例如测试标题的标题 - 根据我的经验，这是一种更好的方法来封装页面中不会更改的元素的测试逻辑。

另一个注意事项 - 我已经看到 MVC 应用程序将域模型重用为页面对象。如果做得正确，这可以显着减少测试库中的冗余代码。使用这种模式，视图模型没有对测试框架的引用，因此很明显，您不能在其中放置任何断言。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-11T21:26:01.427

您的页面对象不应执行断言，因为页面对象必须了解您的测试框架（除非您使用内置语言断言）。但是您的页面需要知道它的状态才能定位元素并执行操作。

关键在于“当然，正如每条指南都有例外......”

您的页面应该抛出异常，而不是执行断言。这样，您的测试可以捕获断言并保释或采取相应措施。例如。

```
page = ProfilePage.open
try 
  page.ChangePassword(old, new)
catch notLoggedIn
  page.Login(user, pass)

assert page.contains "your password has been updated" 
```

在这个有限的示例中，您必须再次（一次又一次）检查，因此它可能不是最好的方法，但您明白了。你也可以只检查状态（两次）

```
if page.hasLoginDialog
  page.Login

if page.hasLoginDialog //(again!)
  assert.fail("can't login") 
```

您也可以只检查您是否有个人资料页面

```
try 
  page = site.OpenProfilePage
catch notOnProfilePage 
```

或者有你需要的元素试试 profilepage.changePassword(old,new) catch elementNotFound

或不抛出异常

```
page = site.OpenProfilePage
if ! page instanceof ProfilePage 
```

或复杂的检查

```
assert page.looksLikeAProfilePage 
```

重要的不是你怎么做。您希望将测试中的逻辑保持在最低限度，但您不希望将页面对象绑定到您的测试框架——毕竟，您可能使用相同的对象进行抓取或数据生成——或者使用不同的测试有它自己的断言的框架。

如果你觉得有必要，你可以将你的断言从你的测试用例中推到测试辅助方法中。

```
page = site.GoToProfilePage
validate.looksLikeProfilePage(page) 
```

如果您的语言支持它们，这是一个很好的混入机会，因此您可以拥有干净的页面对象 - 并混入您的健全性检查。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-11T05:24:30.493

当我看到可以在多个测试方法中使用相同的断言时，这让我感到困惑。例如，编写断言特定方法 -

```
public PaymentPage verifyOrderAmount(BigDecimal orderAmount) {      
   Assertion.assertEquals(lblOrderAmount.getText(), orderAmount, "Order Amount is wrong on Payment details page"); 
   return this; 
} 
```

现在我可以在我需要的所有测试中重用它。而不是在处理多个场景的多个测试中重复相同的断言语句。不用说，我可以根据测试在一个方法中链接多个断言，即 -

```
 .verifyOrderAmount(itemPrice)
 .verifyBankAmount(discountedItemPrice)
 .verifyCouponCode(flatDiscountCode.getCouponCode()) 
```

那么当页面对象应该代表页面提供的服务时，断言点不也是页面提供的服务吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-12T10:26:19.380

@Matt 在页面对象中重用域模型可能会节省您的时间，但这不是测试气味，测试逻辑对域模型很清楚（取决于您要实现的目标）。

回到最初的问题，如果你真的必须在页面对象中进行断言，为什么不使用 selenium loadablecomponent<> ，你可以使用 isLoaded() 方法或在 loadablecomponent<> 类中包含自定义断言。这将使您的页面对象免于断言。但是您可以在可加载组件中进行断言。请看下面的链接...

[https://github.com/SeleniumHQ/selenium/wiki/LoadableComponent](https://github.com/SeleniumHQ/selenium/wiki/LoadableComponent)

_梦想家

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-09-30T14:42:51.130

我完全同意作者的看法。

在测试方法中添加断言可以帮助您“尽早失败”。通过断言，我的意思是检查单击按钮后是否加载了某个页面等（所谓的一般断言）。

我真的不相信它会增加执行时间。默认情况下，UI 自动化很慢，添加一些几毫秒的检查并没有太大的区别，但可以简化您的故障排除、报告早期故障并使您的代码更具可重用性。

但是，它也取决于 UI 测试的类型。例如，如果您正在实施具有大部分正路径的端到端测试，那么在测试方法中检查单击按钮实际上会导致打开页面是有意义的。但是，如果您正在编写一堆负面场景，情况并非总是如此。

# vb.net - Vb.net：对象引用未设置为对象的实例

> ID：11126807
> 
> 赞同：-1
> 
> 时间：2012-06-20T19:30:07.507
> 
> 标签：vb.net, winforms

例外：

```
Object reference not set to an instance of an object. 
```

代码：

```
 For Each p As Panel In Me.Controls.OfType(Of Panel)()
        arr.Add(p.BackColor.ToString())
        Me.Controls.Remove(p)
    Next 
```

该行：

```
arr.Add(p.BackColor.ToString()) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:31:21.423

您可能声明`arr`了这样的内容：

```
Dim arr As List(Of String) 
```

您需要先将变量初始化为 的实例，`List(Of String)`然后才能使用它。将其更改为：

```
Dim arr As New List(Of String) 
```

# python - 在继承层次结构中更改基类

> ID：11126808
> 
> 赞同：0
> 
> 时间：2012-06-20T19:30:10.053
> 
> 标签：python, inheritance

我有一个类结构

```
class A:
    def method1(self):
        return 1

class B:
    def method2(self):
        return 2

class C(A,B):
    def method3(self):
        return self.method1()+self.method2() 
```

类`A`并`B`提供功能，该类`C`通过一些包装器收集和丰富。现在碰巧我需要一个类似的类`C2`，它派生自不同的实现`A2`而不是`A`:`class C2(A2, B)`具有相同的`method3`.

您将如何实现这样的设计（`C`可以从不同的实现类派生）？

如果它与高级 Python 编程（元类？）有关，将不胜感激：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:32:37.460

```
class CMixin:
    def method3(self):
        return self.method1()+self.method2()

class C1(A,B, CMixin):
    pass

class C2(A2,B, CMixin):
    pass 
```

尽管您描述的设计听起来像您想要聚合：

```
class C:
    def __init__(self, a, b):
        self.a = a
        self.b = b

    def method3(self):
        return self.a.method1() + self.b.method2()

c1 = C(a1, b)
c2 = C(a2, b) 
```

# c# - Metro App 读取 HTML 格式的字符串

> ID：11126825
> 
> 赞同：1
> 
> 时间：2012-06-20T19:31:11.380
> 
> 标签：c#, html, windows-runtime, microsoft-metro, winrt-xaml

我有一个地铁应用程序，想将一个`<TextBlock>`元素绑定到一个包含一些 HTML 格式元素的字符串。我似乎记得在 WinRT 之前有这种东西的转换器，但我在 WinRT 命名空间中找不到任何对此的引用。

这是字符串的示例：

```
This is<br>a string with some formatting<br>elements<img src="http://image-url"> 
```

目前，我只是将它绑定到 TextBlock 并获得格式错误的标记。如果不自己编写迷你转换器，有没有办法为 WinRT 处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:01:33.353

您可以使用 WebView 并且 WebView 具有 WebView.NavigateToString(HTMLContent) 方法。希望这可能会有所帮助。

# jquery - Jquerytools“可滚动”滚动到第一页

> ID：11126826
> 
> 赞同：0
> 
> 时间：2012-06-20T19:31:12.203
> 
> 标签：jquery, jquery-tools

我正在使用 jquerytools 可滚动库。 [http://jquerytools.org/demos/scrollable/plugins.html#navigator](http://jquerytools.org/demos/scrollable/plugins.html#navigator)

导航一切正常。但我有几十页。所以**我想告诉滑块滚动到第一页/最后一页。** 我该怎么做？

这就是我到目前为止使用的。

```
$( ".items" ).css('left',0); 
```

它有效，只是导航按钮无法识别我滚动了 Oo 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:08:41.763

这有效：

```
$form.find(".scrollable").data("scrollable").begin(0); // scroll to beggining of slider 
```

# workflow-foundation-4 - 注册工作流程序集时出现 FileNotFound 错误

> ID：11126827
> 
> 赞同：0
> 
> 时间：2012-06-20T19:31:12.923
> 
> 标签：workflow-foundation-4

我正在使用 CRM 插件注册工具将自定义活动加载到我们的 CRM 服务器上。我的自定义活动扩展`System.Activities.CodeActivity`。但是，每当我尝试注册程序集时，都会出现以下错误：

`Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'System.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. at System.Reflection.Assembly._GetExportedTypes() at System.Reflection.Assembly.GetExportedTypes() at PluginRegistrationTool.AssemblyReader.RetrievePluginsFromAssembly(String path) in C:\Users\sblessing\Desktop\sdk\tools\pluginregistration\AssemblyReader.cs:line 60 at PluginRegistrationTool.AssemblyReader.RetrievePluginsFromAssembly(String path) at PluginRegistrationTool.RegistrationHelper.RetrievePluginsFromAssembly(String pathToAssembly) in C:\Users\sblessing\Desktop\sdk\tools\pluginregistration\RegistrationHelper.cs:line 49 at PluginRegistrationTool.PluginRegistrationForm.btnLoadAssembly_Click(Object sender, EventArgs e) in C:\Users\sblessing\Desktop\sdk\tools\pluginregistration\PluginRegistrationForm.cs:line 127`

我需要在哪里复制我的程序集才能消除此错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:44:16.953

您可以检查以下.. 1\. CRM 必须支持 4.0 框架。2\. 在 CRM 中引用工作流 DLL（System.Activity 和其他）或将所有这些复制到目录中。

# google-apps-script - 脚本作为 Web 应用程序

> ID：11126834
> 
> 赞同：0
> 
> 时间：2012-06-20T19:31:36.963
> 
> 标签：google-apps-script

我成功地将脚本部署为 webapp：

[https://docs.google.com/macros/s/AKfycbxJvSRpH7dMmrmMnkJW6LRZwMImqQ_5MT8tWMYUVXryWlgw1Fck/exec](https://docs.google.com/macros/s/AKfycbxJvSRpH7dMmrmMnkJW6LRZwMImqQ_5MT8tWMYUVXryWlgw1Fck/exec)

并查看文档、教程和此处，我没有找到如何导入它。如何将此脚本导入另一个 Google 帐户的电子表格中？

而且我前两天也发到了Public Gallery，可惜直到现在都没有回复。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:51:47.910

你读过[图书馆的文档吗？](https://developers.google.com/apps-script/guide_libraries?hl=fr-FR#includeLibrary)

我不太清楚的是为什么您要谈论附加到电子表格的 webapp 和脚本？这些应该是脚本的 2 种不同用途……您实际上是指哪一种？

还是我误解了你的问题？

# php - 在 PHP 中使用列表

> ID：11126835
> 
> 赞同：3
> 
> 时间：2012-06-20T19:31:42.123
> 
> 标签：php, python, arrays

我需要将一些 Python 代码重写为 PHP（不要恨我，客户要求我这样做）

在 Python 中，您可以执行以下操作：

```
// Python
numbers = [34.6, -203.4, 44.9, 68.3, -12.2, 44.6, 12.7]
positive = [int(n) for n in numbers if n > 0]
negative = [int(n) for n in numbers if n < 0] 
```

但是如果你在 PHP 中尝试这样的事情，它就不起作用了：

```
// PHP
$numbers = array(34.6, -203.4, 44.9, 68.3, -12.2, 44.6, 12.7);
$positive = array(intval($n) for $n in $numbers if $n > 0);
$negative = array(intval($n) for $n in $numbers if $n > 0); 
```

而不是做类似的事情：

```
<?php
$numbers = array(34.6, -203.4, 44.9, 68.3, -12.2, 44.6, 12.7);

$positive = array();
$negative = array();

foreach($numbers as $n) {

    if($n > 0):
        $positive[] = intval($n);
    else:
        $negative[] = intval($n);
    endif;
}
?> 
```

有没有办法像在 Python 中那样用更少的代码来编写它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T19:34:38.817

您可以使用[`array_filter`](http://php.net/array_filter)匿名函数（仅当您拥有 PHP 5.3 或更高版本时才使用后者），但您使用更多代码显示的方式更高效，对我来说看起来更整洁。

```
$positive = array_filter($numbers, function($x) { return $x > 0; });
$negative = array_filter($numbers, function($x) { return $x < 0; }); 
```

并[`array_map`](http://php.net/array_map)申请`intval`：

```
$positive = array_map('intval', array_filter($numbers, function($x) { return $x > 0; }));
$negative = array_map('intval', array_filter($numbers, function($x) { return $x < 0; })); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:34:27.033

当然。采用[`array_filter`](http://php.net/array-filter)

```
$positive = array_filter($numbers,function($a) {return $a > 0;});
$negative = array_filter($numbers,function($a) {return $a < 0;}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T19:33:57.303

PHP 在数组/映射处理方面有点冗长，这是 Python 的强项之一。有一些函数可以帮助处理数组，例如：

```
$positive = array_filter($numbers,function($n){return $n > 0;});
$positive = array_map('intval',$positive);
$negative = array_filter($numbers,function($n){return $n < 0;});
$negative = array_map('intval',$positive); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-20T19:33:56.877

不...据我所知， foreach 循环是唯一的方法。

这不是更多的代码。

但是如果你想让它更短一点，你可以在 foreach 循环之前去掉显式的数组声明。

# jsf-2 - 如何在 JSF 中刷新 selectOneMenu 选择的页面？

> ID：11126837
> 
> 赞同：3
> 
> 时间：2012-06-20T19:31:54.137
> 
> 标签：jsf-2, primefaces

我有一个包含 PrimeFaces (2.2.1) 编辑器组件、刷新按钮和 selectOneMenu 的页面，其选择会影响编辑器的内容，如下所示：

```
<p:editor id="uploadedText" value="#{facilityDataUploadBean.uploadedText}"
          width="600" height="180" disabled="true" controls="" />
<h:commandButton value="Refresh" immediate="true" />
<h:selectOneMenu id="skipLines" styleClass="dropdown"
                 value="#{facilityDataUploadBean.skipLines}">
    <f:selectItems value="#{facilityDataUploadBean.skipLinesList}" />
    <f:ajax listener="#{facilityDataUploadBean.importParameterChanged}" />
</h:selectOneMenu> 
```

`facilityDataUploadBean.importParameterChanged`更新`facilityDataUploadBean.uploadedText`。更改 selectOneMenu 值后，操作员按下 Refresh 按钮刷新页面，包括`p:editor`. （我不能简单地刷新`p:editor`使用 AJAX，因为它不能正确重新渲染，至少在 PF 2.2.1 中是这样。）

似乎我应该能够在`selectOneMenu`值更改时自动完成页面刷新，但我一直无法想出可以做到这一点的属性和事件的组合。我已经尝试了`onchange="submit();"`,`immediate="true"`和`valueChangeListener`,`selectOneMenu`以及`execute="@all/@form"`,事件的各种组合，`render="@all/@form"`但`f:ajax`都无济于事。我目前的解决方法是显示一条消息，要求用户在更改`selectOneMenu`选择时按下刷新按钮 - 非常狡猾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T04:07:49.450

调用`window.location.replace(window.location.href)`而不是`submit()`在`onchange`事件中，如：

```
<h:selectOneMenu id="skipLines" ... onchange="window.location.replace(window.location.href);">
    <f:selectItems ... />
    <f:ajax ... />
</h:selectOneMenu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:43:26.940

请尝试以下`onchange="window.location.reload();"`方法：

```
<h:selectOneMenu id="skipLines" ... onchange="window.location.reload();">
    <f:selectItems ... />
    <f:ajax ... />
</h:selectOneMenu> 
```

这在我的环境（GF 3.1.1，PF 3.2）中工作得很好，但请注意可能会中断一些 ajax 功能。

希望这会有所帮助，玩得开心！

# ms-access - 具有单个选项卡形式的多个表

> ID：11126840
> 
> 赞同：0
> 
> 时间：2012-06-20T19:32:30.827
> 
> 标签：ms-access, vba, ms-access-2003

您可以使用单个选项卡式表单连接多个表吗？

例如，如果我有 3 个表，并且我有 1 个带有 3 个选项卡的选项卡式表单，我希望选项卡 1 使用表 1，选项卡 2 使用表 2，选项卡 3 使用表 3。目前，我只能指向一个表对于整个选项卡式控件，因此似乎所有 3 个选项卡都必须共享相同的记录源或表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:35:56.473

这不完全是一个编程问题。是的，您可以拥有与选项卡上的子表单一样多的表格。我不推荐它。我通常发现最好有一个或两个带有子表单控件的选项卡，并根据需要在运行时将表单加载到子表单控件中。

# iphone - 单击并拖动到另一个按钮

> ID：11126841
> 
> 赞同：0
> 
> 时间：2012-06-20T19:32:31.667
> 
> 标签：iphone

有一个名为 DurionLite 的应用程序（iPhone 上免费），它玩文字游戏，点击字母并将其拖入单词构造槽以创建单词。当拖动的字母靠近构造槽时，最近的构造槽的边界会突出显示，如果您随后松开该字母，它会进入突出显示的构造槽。然后，您还可以单击并从构造槽中拖动字母（尽管不能回到它们的原始位置）。我正在尝试做类似的事情，但无法弄清楚如何做到这一点。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:57:49.593

第二个工作的人。它似乎更复杂，但部分代码甚至不需要在那里。

# solr - 在 Eclipse 中调试 solr 响应

> ID：11126842
> 
> 赞同：0
> 
> 时间：2012-06-20T19:32:34.747
> 
> 标签：solr

响应中有一些双字段的值为“NaN”，但是，我知道索引字段具有有效值。但是，在 Eclipse 中，如何调试以及在哪里找到写出响应的代码？嗯...我能够在 Eclipse 中启动 tomcat 并从浏览器调用请求，但是如何调试响应以及在哪里调试？

我是 solr 的新手，我们将不胜感激您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:55:59.030

您可以转到 Run->Add Class Load Breakpoints... 并添加您的响应类名称。当调用类的构造函数时，您将遇到此断点。

# perl - 如何在多个 Perl 进程中使用同一个 SQLite3 数据库？

> ID：11126845
> 
> 赞同：6
> 
> 时间：2012-06-20T19:32:37.750
> 
> 标签：perl, sqlite

我有一个不幸的情况，多个 Perl 进程同时写入和读取同一个 SQLite3 数据库。

这通常会导致 Perl 进程崩溃，因为两个进程会同时写入，或者一个进程正在从数据库中读取，而另一个进程试图更新相同的记录。

有谁知道我如何协调多个进程以使用同一个 sqlite 数据库？

我将努力将此系统移至不同的数据库引擎，但在此之前，我需要修复它以使其按原样工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T19:38:44.473

SQLite 旨在用于多个进程。如果您将 sqlite 文件托管在网络驱动器上，则存在一些例外情况，并且可能有一种方法可以编译它以使其期望从一个进程中使用，但我经常从多个进程中使用它。如果您遇到问题，请尝试增加超时值。SQLite 使用文件系统锁来保护数据不被同时访问。如果一个进程正在写入文件，则第二个进程可能必须等待。我将超时设置为 3 秒，并且对此几乎没有问题。

[这是设置超时值的链接](https://metacpan.org/pod/DBD::SQLite#$dbh->sqlite_busy_timeout(-$ms-))

# c# - 使用 WinRT 在 C# 中 Ping 网站

> ID：11126846
> 
> 赞同：0
> 
> 时间：2012-06-20T19:32:43.310
> 
> 标签：c#, windows-runtime

我正在开发适用于 Windows 8 的应用程序。我需要检测用户是否连接到互联网。我不能使用 IsNetworkAvailable 因为它只会通知是否有可用的接入点。但是，它并不能说明是否存在与 Internet 的实际活动连接。为了确定这一点，我想当我想检查用户是否连接到互联网时，我会尝试 ping 谷歌。

我的问题是，如何在 WinRT 中进行阻塞调用？基本上我想说：

```
if (Utility.CanPingGoogle()) {
  // I know I'm connected to the internet, do stuff
} 
```

但是，所有调用都显示为异步的。我想创建一个阻塞调用，以便我可以在实用程序类中折腾功能并根据需要使用它。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:13:56.567

您可以对异步函数进行阻塞调用。

> 数据数据 = Model.SomeAsyncFunction().GetResults();

或使用 Result 属性。

> 数据数据 = Model.SomeAsyncFunction().Result;

取决于您使用的功能。

看看有没有用

——尼玛

# ios - 确定 tableHeaderView 的位置

> ID：11126848
> 
> 赞同：0
> 
> 时间：2012-06-20T19:32:46.930
> 
> 标签：ios, uitableview

我正在我的 tableview 上制作自定义标题视图。自定义视图上有一个渐变。

我只希望该渐变显示它是否是唯一可见的标题。

因此，如果用户正在滚动并碰巧看到 tableview 的两个部分，则 tableview 上的第二个部分不应该有渐变。

做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:35:32.110

以下是一些想法：

也许在您的表的委托中，您可以缓存标题视图，并且每次请求一个时，检查它的对等点以查看它们是否在屏幕上（由 UIView 的 .window 属性非零确定）。

```
- (UIView *)tableView:tableView viewForHeaderInSection:section {
    if([_headerViews objectAtIndex:section-1].window ||  [_headerViews objectAtIndex:section+1].window) {
        // there are peers on screen
    } else {
        // this is the only one onscreen
    }
} 
```

这只是示例代码，并不能确保正确初始化视图等，只是一个想法。

# eclipse - eclipse ASTNode 到源代码行号

> ID：11126857
> 
> 赞同：5
> 
> 时间：2012-06-20T19:33:24.137
> 
> 标签：eclipse, abstract-syntax-tree, eclipse-jdt

在eclipse中给定一个ASTNode，有什么办法可以得到对应的源码行号？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T04:22:40.460

`ASTNode`您可以使用以下代码获取行号

```
 int lineNumber = compilationUnit.getLineNumber(node.getStartPosition()) - 1; 
```

编译单元可以从`ASTParser`使用下面的代码中获得

```
 ASTParser parser = ASTParser.newParser(AST.JLS3);

    // Parse the class as a compilation unit.
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(source); // give your java source here as char array
    parser.setResolveBindings(true);

    // Return the compiled class as a compilation unit
    CompilationUnit compilationUnit = parser.createAST(null); 
```

然后，您可以使用`ASTVisitor`以下代码使用该模式访问所需节点的类型（例如 MethodDeclaration 节点）：

```
 compilationUnit.accept(new ASTVisitor() {

        public boolean visit(MethodDeclaration node) {       
            int lineNumber = compilationUnit.getLineNumber(node.getStartPosition()) - 1;
            return true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:26:16.277

ASTNode 具有处理字符偏移的 getStartPosition() 和 getLength() 方法。要将字符偏移量转换为行号，您应该使用 CompilationUnit 的 getLineNumber() 方法。CompilationUnit 是 AST 树的根。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-24T07:39:23.167

除了已经描述的通用解决方案之外，如果您需要 ASTNode 的行号，包括前导空格或写在 ASTNode 前面的潜在注释，还有另一个适用的解决方案。然后你可以使用：

```
int lineNumber = compilationUnit.getLineNumber(compilationUnit.getExtendedStartPosition(astNode)) 
```

请参阅[API](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fdom%2FCompilationUnit.html)：

> 返回给定节点的扩展起始位置。与 ASTNode.getStartPosition() 和 ASTNode.getLength() 不同，扩展的源范围可能包括紧接在节点的正常源范围之前或之后的注释和空格。

# java - Java中的线程安全多线程

> ID：11126866
> 
> 赞同：13
> 
> 时间：2012-06-20T19:33:48.660
> 
> 标签：java, multithreading, thread-safety, singleton, multiton

给定以下多吨：

```
public class Multiton 
{
    private static final Multiton[] instances = new Multiton[...];

    private Multiton(...) 
    {
        //...
    }

    public static Multiton getInstance(int which) 
    {
        if(instances[which] == null) 
        {
            instances[which] = new Multiton(...);
        }

        return instances[which];
    }
} 
```

如果没有昂贵的 getInstance() 方法同步和双重检查锁定的争议，我们如何保持线程安全和惰性？[这里](https://stackoverflow.com/questions/7048198/thread-safe-singletons-in-java)提到了单例的有效方法，但似乎并没有扩展到多例。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-09T14:50:08.330

更新：使用 Java 8，它可以更简单：

```
public class Multiton {
    private static final ConcurrentMap<String, Multiton> multitons = new ConcurrentHashMap<>();

    private final String key;
    private Multiton(String key) { this.key = key; }

    public static Multiton getInstance(final String key) {
        return multitons.computeIfAbsent(key, Multiton::new);
    }
} 
```

嗯，这很好！

* * *

原始答案

这是一个基于[JCiP 中描述的 Memoizer 模式](https://stackoverflow.com/questions/4886485/in-java-concurrency-in-practice-by-brian-goetz)的解决方案。它像其他答案之一一样使用 ConcurrentHashMap ，但不是直接存储 Multiton 实例，这可能导致创建未使用的实例，而是存储导致创建 Multiton 的计算。该附加层解决了未使用实例的问题。

```
public class Multiton {

    private static final ConcurrentMap<Integer, Future<Multiton>> multitons = new ConcurrentHashMap<>();
    private static final Callable<Multiton> creator = new Callable<Multiton>() {
        public Multiton call() { return new Multiton(); }
    };

    private Multiton(Strnig key) {}

    public static Multiton getInstance(final Integer key) throws InterruptedException, ExecutionException {
        Future<Multiton> f = multitons.get(key);
        if (f == null) {
            FutureTask<Multiton> ft = new FutureTask<>(creator);
            f = multitons.putIfAbsent(key, ft);
            if (f == null) {
                f = ft;
                ft.run();
            }
        }
        return f.get();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T20:24:35.490

这将为您的 Multitons 提供一个线程安全的存储机制。唯一的缺点是可以创建一个不会在***putIfAbsent()***调用中使用的 Multiton。可能性很小，但确实存在。当然，如果它确实发生的可能性很小，它仍然不会造成伤害。

从好的方面来说，不需要预分配或初始化，也没有预定义的大小限制。

```
private static ConcurrentHashMap<Integer, Multiton> instances = new ConcurrentHashMap<Integer, Multiton>();

public static Multiton getInstance(int which) 
{
    Multiton result = instances.get(which);

    if (result == null) 
    {
        Multiton m = new Multiton(...);
        result = instances.putIfAbsent(which, m);

        if (result == null)
            result = m;
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T19:43:40.917

您可以使用一组锁，至少能够同时获取不同的实例：

```
private static final Multiton[] instances = new Multiton[...];
private static final Object[] locks = new Object[instances.length];

static {
    for (int i = 0; i < locks.length; i++) {
        locks[i] = new Object();
    }
}

private Multiton(...) {
    //...
}

public static Multiton getInstance(int which) {
    synchronized(locks[which]) {
        if(instances[which] == null) {
            instances[which] = new Multiton(...);
        }
        return instances[which];
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-02T15:29:34.557

随着 Java 8 的出现以及对`ConcurrentMap`lambda 的一些改进，现在可以以更整洁的方式实现 a `Multiton`（甚至可能是 a ）：`Singleton`

```
public class Multiton {
  // Map from the index to the item.
  private static final ConcurrentMap<Integer, Multiton> multitons = new ConcurrentHashMap<>();

  private Multiton() {
    // Possibly heavy construction.
  }

  // Get the instance associated with the specified key.
  public static Multiton getInstance(final Integer key) throws InterruptedException, ExecutionException {
    // Already made?
    Multiton m = multitons.get(key);
    if (m == null) {
      // Put it in - only create if still necessary.
      m = multitons.computeIfAbsent(key, k -> new Multiton());
    }
    return m;
  }
} 
```

我怀疑——尽管这会让我感到不舒服——`getInstance`可以进一步最小化为：

```
// Get the instance associated with the specified key.
public static Multiton getInstance(final Integer key) throws InterruptedException, ExecutionException {
  // Put it in - only create if still necessary.
  return multitons.computeIfAbsent(key, k -> new Multiton());
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T01:18:52.570

您正在寻找[AtomicReferenceArray](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicReferenceArray.html)。

```
public class Multiton {
  private static final AtomicReferenceArray<Multiton> instances = new AtomicReferenceArray<Multiton>(1000);

  private Multiton() {
  }

  public static Multiton getInstance(int which) {
    // One there already?
    Multiton it = instances.get(which);
    if (it == null) {
      // Lazy make.
      Multiton newIt = new Multiton();
      // Successful put?
      if ( instances.compareAndSet(which, null, newIt) ) {
        // Yes!
        it = newIt;
      } else {
        // One appeared as if by magic (another thread got there first).
        it = instances.get(which);
      }
    }

    return it;
  }
} 
```

# macos - 在外接显示器上使用单独的桌面？

> ID：11126868
> 
> 赞同：8
> 
> 时间：2012-06-20T19:33:49.957
> 
> 标签：macos, osx-snow-leopard

对于我的工作流程，我喜欢拥有多个桌面。一个用于浏览器，另一个用于某种编辑器，另一个用于全屏终端。

当我连接外接显示器时。它不像我想要的那样工作。

如果我在外接显示器上放置一个窗口（比如我的音乐播放器或其他东西）。然后我切换桌面以查看我的编辑器。我的外接显示器也改变了桌面。

此外，如果我使用暴露，我的外接显示器也会进入暴露模式。

有点烦。

无论如何（可能使用第 3 方工具）。为了保持两台显示器分开并有两个专用的工作区/桌面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:44:12.820

我有同样的问题。我喜欢在每个桌面上打开不同的 IDE，并将我的外接显示器用作“通用”桌面来保存参考资料等。

我已经能够通过将某些应用程序设置为“所有桌面”来模拟它，但如果它是基于窗口和自动的，那就太好了。这样，人们可以将一个窗口拖到外接显示器上，让它贴在所有桌面上，然后把它拖回来，让它贴在当前桌面上。

# sql - 使用内部连接更新查询 ....？

> ID：11126873
> 
> 赞同：0
> 
> 时间：2012-06-20T19:34:06.457
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, linq-to-sql

我有这个名为 SubscriptionCharity 的表，它如下所示：

```
SubscriptionId       ChannelURI       CharUserID
1                       AX                12
2                       ZA                7
3                       AX                10 
```

如果表中的任何记录具有相同的通道 uri 并将其设置为 null ，我想检查特定的 CharUserId ，因此在此表中“Subcriptionid =1”应设置为 null

我对此有两个查询，一个在 MS SQL 管理 m 中有效，但不适用于 LINQ：（它不影响行）

```
UPDATE SubscriptionCharProg 
Set ChannelURI = null 
FROM SubscriptionCharProg as t1
INNER JOIN SubscriptionCharProg as t2 
    on t1.ChannelURI = t2.ChannelURI 
    and t1.DeviceId = t2.DeviceId 
WHERE CharUserId! = 5 
```

另一个适用于 LINQ 但不适用于 MS SQL 管理：（MS SQL 管理错误：无效的对象名称“t1”）

```
context.ExecuteStoreCommand("UPDATE t1 Set t1.ChannelURI = 1 FROM SubscriptionCharProg as t1 INNER JOIN  
  SubscriptionCharProg as t2 on t1.ChannelURI = t2.ChannelURI WHERE t1.CharUserId! = " 
  + charuserID + "", null); 
```

另外，主要问题是，两个查询都使每个channelURi都为空，无论它是否相等。

请问有什么想法吗？

编辑：如果具有特定 charuserID 的记录存在两次或更多次，它会保留并且不会将其设置为 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:41:01.397

尝试这个：

```
UPDATE t1
SET ChannelURI = null 
FROM SubscriptionCharProg as t1
INNER JOIN SubscriptionCharProg as t2 
    on t1.ChannelURI = t2.ChannelURI 
    and t1.DeviceId = t2.DeviceId 
    and t1.CharUserID <> t2.CharUserID
WHERE t2.CharUserID = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:39:19.093

将第一行从：

```
UPDATE SubscriptionCharProg 
```

至

```
UPDATE t1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T07:04:56.467

```
update quiz_subgroup as sg  

inner join (select qq_qsg_id, count(qq_id) as cnt_ques from quiz_questions group by qq_qsg_id) as ques on(ques.qq_qsg_id = sg.qsg_id) 

set sg.qsg_count_of_questions = ques.cnt_ques; 
```

# objective-c - 如何在视图上放置“x”个对象

> ID：11126880
> 
> 赞同：0
> 
> 时间：2012-06-20T19:34:24.100
> 
> 标签：objective-c, ios

如果用户提供一个数字，例如 8，我将如何在视图上放置八个标签？

例如：

```
int userGivenNumber = textfield.text;

for (int labelNumber=1; i<=userGivenNumber; i++) {

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(50, *previousLabel*.frame.origin.y + 20)];

} 
```

您将如何获得 的位置`previousLabel`？此外，如果用户想要编辑标签，例如标签 3，我将如何编辑此标签？

问题是我不知道他们在编码时要放置多少标签，而且我无法跟踪标签，因为它们被称为`label`. 你有什么想法？你明白我在问什么吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:38:35.523

```
- (void)addLabels {

    CGFloat offset = 0;

    // labels is NSMutableArray property

    labels = [[NSMutableArray alloc] initWithCapacity:8];

    for (int i = 0; i < 8; i++) {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, offset, 320, 20)];
        [self.view addSubview:label];
        [labels addObject:label];

        offset += label.frame.size.height;
    }

} 
```

**编辑：**就像 jerrylroberts 所说，要从代码中的其他地方访问标签数组，您应该将其声明为属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:45:08.857

所以你可以像这样添加视图：

```
int userGivenNumber = [textfield.text intValue];

for (int labelNumber=1; i<=userGivenNumber; i++) {

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(50, *previousLabel*.frame.origin.y + 20)];

    [self.view addSubview:label];

    [label release];

} 
```

如果您想跟踪它们，您可以创建一个可变数组作为属性，然后在添加到子视图之前将每个标签添加到数组中；

**界面**

```
@property (nonatomic, retain) NSMutableArray *addedLabels; 
```

**执行**

```
@synthesize addedLabels=_addedLabels;

- (void)viewDidLoad

    [super viewDidLoad];

    // Create your array to hold labels

    NSMutableArray *addedLabels = [[NSMutableArray alloc] initWithCapacity:0];

    self.addedLabels = addedLabels;

    [addedLabels release];

    // NOW put your code

    int userGivenNumber = [textfield.text intValue];

    for (int labelNumber=1; i<=userGivenNumber; i++) {

        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(50, *previousLabel*.frame.origin.y + 20)];

        [self.view addSubview:label];

        [addedLabels addObject:label];

        [label release];

    }
} 
```

现在，如果您有索引，您可以轻松访问您添加的任何标签。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:38:13.903

只需在循环外保留对位置 (CGPoint) 的引用，但在循环内将其更新为当前标签的位置。当您分配下一帧时，请根据标签的宽度和大小进行操作，并且不要忘记更新 CGPoint 的参考。

# c# - 如何同时使用多个客户端（并行）调用 WCF Web 服务

> ID：11126893
> 
> 赞同：1
> 
> 时间：2012-06-20T19:35:06.173
> 
> 标签：c#, wcf, parallel-processing, httpwebrequest

我有 ac# WCF Web 服务，它是一个服务器，我有 2 个客户端，一个是 java 客户端，另一个是 c++ 客户端。我希望两个客户端同时运行。我有并且无法弄清楚的情况是：

我的 java 客户端将调用 WCF Web 服务，处理时间可能需要大约 10 分钟，同时我希望我的 c++ 客户端调用 Web 服务并获取响应。但是现在我只能在处理 java 客户端请求时使用 c++ 客户端调用 Web 服务。在 Java 客户端请求完成之前，我没有收到 C++ 客户端请求的响应。

任何人都可以建议我如何使这项工作并行。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:44:25.270

任何“正常”的 WCF 服务都绝对可以在任何给定时间处理多个客户端请求。

这完全取决于您的设置`InstanceContextMode`：

*   **PerSession**意味着，每个会话都获取服务类的副本来处理多个请求（来自同一个客户端）

*   **PerCall**意味着，每个请求都会获得服务类的新副本来处理请求（并且在处理调用后再次处理它）

*   **单身**意味着，你有一个单身 - 只是你的服务类的一个副本。

如果你有一个单身人士 - 你需要问自己：**为什么？**默认情况下，`PerCall`这是推荐的设置，它应该很容易同时支持很多请求。

有关更详尽的说明，请参阅[了解实例上下文模式。](http://www.danrigsby.com/blog/index.php/2008/05/23/understanding-instancecontext-in-wcf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:42:54.087

采用

```
[ServiceBehavior( ConcurrencyMode = ConcurrencyMode.Multiple )] 
```

服务类的属性。更多关于这个的例子在这里：

[http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:27:15.807

这是您的问题的外围，但您是否考虑过来自需要 10 分钟以上才能返回的方法的异步回调，然后让进程在单独的线程中运行？让服务调用同步等待 10 分钟并不是一个很好的做法，并且可能会解决您的问题，尽管该服务应该允许同时允许多个调用者（我们的 WCF 服务需要数千个同时请求）。

当您调用 WCF 时，您可以选择同步或异步调用它。同步调用等待响应在同一操作中发送回调用者。在调用者中，它看起来像“myresult = svc.DoSomething()”。通过异步调用，调用者为服务提供一个函数，以便在服务完成时调用，但不等待响应。调用者在等待响应时不会阻塞并继续其业务。

您的回调将采用 DoSomethingCompletedEventArgs: void myCallback(object sender, DoSomethingCompletedEventArgs e) { var myResult = e.Result; //然后使用之前的结果。}

您像事件处理程序一样注册回调函数： svc.DoSomethingCompleted+=myCallback; 然后是 svc.DoSomethingAsync()。请注意，该语句中没有返回值；该服务将在完成时执行 myCallBack 并传递结果。（来自 Silverlight 的所有 WCF 调用都必须是异步的，但对于其他客户端，此限制不存在）。

这是一篇 codeproject 文章，详细演示了一种略有不同的方式。 [http://www.codeproject.com/Articles/91528/How-to-Call-WCF-Services-Synchronously-and-Asynchr](http://www.codeproject.com/Articles/91528/How-to-Call-WCF-Services-Synchronously-and-Asynchr)

这可以防止客户端在 10 多分钟的过程中阻塞，但并没有真正改变服务本身的运行方式。

Now the second part of what I was mentioning was firing off the 10+ minute process in a separate thread from inside the service. The service methods themselves should be very thin and just be calling functionality in other libraries. Functions that are going to take a long time should ideally be called in their own threads (say a backgroundworker, for which you register on the service side a callback when it completes) and have some sort of persistent system to keep track of their progress and any results that need to go back to the client. If it were me I would register the request for the process in a db and then update that db with its completion. The client would then periodically initiate a simple poll to see if the process was completed and get any results. You might be able to set up duplex binding to get notified when the process completes automatically but to be honest it's been a few years since I've done any duplex binding so I don't remember exactly how it works.

These topics are really too big for me to go into depth here. I would suggest researching multithreaded operations with the BackgroundWorker.

# ruby-on-rails - Rails 看不到 .rjs 文件

> ID：11126896
> 
> 赞同：0
> 
> 时间：2012-06-20T19:35:37.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rjs

我正在尝试学习如何在我的 Rails 应用程序中使用 AJAX，所以我决定从简单的事情开始。我有一个博客应用程序，用户可以在该应用程序上对任何博客文章进行投票。这是我的代码`posts#vote`：

**post_controller.rb**

```
class PostsController < ApplicationController
  (...)
  def vote
    post = Post.find(params[:id])

    if current_user.voted_on?(post)
      current_user.unvote_for(post)
    else
      current_user.vote_for(post)
    end

    respond_to do |format|
      format.html { redirect_to post_path(post) }
      format.js
    end
  end
end 
```

这是我的链接代码`posts#view`：

**视图.html.erb**

```
<%= link_to "Vote", vote_post_path(post.id), :remote => true %> 
```

现在，如果我单击我的`Vote`链接，`posts#vote`则操作有效并进行了投票，但是我收到了一个错误：

> ActionView::MissingTemplate（缺少模板帖子/投票，应用程序/投票与 {:handlers=>[:haml, :coffee, :erb, :builder], :locale=>[:en], :formats=>[:js , :html]}。

我的文件夹中有（空）`vote.rjs`文件，`views/posts`但由于某种原因，rails 看不到它。根据错误，rails 搜索的唯一文件扩展名是`.haml`,`.coffee`和. 该列表不应该还有扩展名吗？提前致谢。`.erb``.builder``.rjs`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:37:55.573

你的文件应该被称为`vote.js.erb`. Rails 不使用`.rjs`扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:45:36.813

该`.rjs`扩展最初用于`Rails`和`Prototype`JS 库。

用`Rails 3.1`默认库切换到 JQuery。

如果你想`.rjs`在你的 Rails 项目中使用它，那就意味着使用 Prototype 而不是 JQuery。最重要的是[prototype-rails](https://github.com/rails/prototype-rails)。

# python - 在python中解码json字符串

> ID：11126902
> 
> 赞同：6
> 
> 时间：2012-06-20T19:35:52.873
> 
> 标签：python, json

我有以下 JSON 字符串（来自维基百科[http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)）

```
{
        "name":"Product",
        "properties":
        {
                "id":
                {
                        "type":"number",
                        "description":"Product identifier",
                        "required":true
                },
                "name":
                {
                        "type":"string",
                        "description":"Name of the product",
                        "required":true
                },
                "price":
                {
                        "type":"number",
                        "minimum":0,
                        "required":true
                },
                "tags":
                {
                        "type":"array",
                        "items":
                        {
                                "type":"string"
                        }
                },
                "stock":
                {
                        "type":"object",
                        "properties":
                        {
                                "warehouse":
                                {
                                        "type":"number"
                                },
                                "retail":
                                {
                                        "type":"number"
                                }
                        }
                }
        }
} 
```

我正在尝试使用 Python json 库解码此字符串。我想访问节点

`properties - > stock - > properties - > warehouse`.

我了解该`json.loads()`函数将 json 字符串存储为字典。但在这种情况下，属性是我的关键，其下的一切都是值。如何访问上述节点。

```
import json
jsonText=""
file = open("c:/dir/jsondec.json")
for line in file.xreadlines():
    jsonText+=line
data = json.loads(jsonText)
for k,v in data.items():
    print k // shows name and properties
file.close(); 
```

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T19:39:56.003

您可以像这样直接从文件中加载 json：

```
 f = open("c:/dir/jsondec.json")
 data = json.load(f) 
```

根据您的输入字符串，`data`现在是一个包含其他字典的字典。您可以像这样向上浏览字典：

```
 node = data['properties']['stock']['properties']['warehouse']
 print str(node) 
```

# magento - 只有 1 个 Magento 店面慢

> ID：11126908
> 
> 赞同：0
> 
> 时间：2012-06-20T19:36:15.533
> 
> 标签：magento, pagespeed, storefront

我有 Magento 设置来管理 VPS 上的 7 个不同的店面。每个店面都有一个唯一的 IP，虽然它们当然共享同一个数据库，但只有一些产品在某些站点上。大约一周前，其中一家店面变得非常萧条。我说的是 10 秒以上的加载时间。奇怪的是，所有其他站点在大约 4 秒时仍然正常嗡嗡作响。但周期性地，他们的表现也会下降。我的主人说他们没有对服务器做任何事情，他们纠正了一些问题，但即使他们也无法确定发生了什么。我减少了日志清理之间的时间（尽管我认为没有必要）。我必须补充一点，我有超过 100 个静态页面，而且我们的 htaccess 非常大（215k），因为有一些重定向和阻止的 IP。我认为这是一个magento问题而不是服务器问题，但我不明白为什么只有这一个店面。这种情况发生在其他人身上吗？或者有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T06:52:07.123

你需要做一些分析来找出罪魁祸首。Magento 甚至提供了一些开箱即用的选项。
首先，转到*System > Configuration > Developer*，然后将您当前的公共 IP 添加到 Developer Client Restriction Allowed IP's。

然后切换到相关商店的商店视图范围，并在调试部分打开分析器显示。

接下来，您需要启用分析器来收集数据。这将进一步减慢网站（所有商店）的速度，但由于它会为您提供修复它所需的数据，因此这种临时权衡将是值得的。

Magento 中集成了两个分析器。一种用于 PHP 代码，另一种用于 DB SQL 查询。

**PHP Profiler**
打开 Magento 根目录下的*index.php*文件，去掉调用行前面的注释字符

```
Varien_Profiler::enable(); 
```

当您在启用该调用后重新加载页面时，您应该会在每个页面的底部看到一长串分析器计时器，告诉您花费的时间以及对相关分析器部分的调用次数。

**DB Profiler**
打开文件*app/etc/local.xml*并将`<profiler>`节点添加到连接配置中。

```
<config>
    <global>
        <resources>
            <default_setup>
                <connection>
                    <host><![CDATA[localhost]]></host>
                    <username><![CDATA[xxxx]]></username>
                    <password><![CDATA[xxx]]></password>
                    <dbname><![CDATA[xxx]]></dbname>
                    <active>1</active>
                    <!-- This is the line you need to add: -->
                    <profiler>true</profiler>
                </connection>
            </default_setup>
         </resources>
    </global>
</config> 
```

刷新配置缓存后，您还应该在页面底部看到一些数据库查询统计信息和该页面请求期间最慢的查询。

希望这能让您了解是什么让商店变慢，并为您提供一些如何修复它的数据。完成后
记得**关闭****代码分析器**、**SQL 分析器**和**分析器输出**。仅仅打开输出仍然会让分析器愉快地收集数据并减慢整个网站的速度。

编辑：分析器收集的数据可用于，例如，创建可排序的电子表格和添加自定义计时器。这可能会有所帮助，但超出了本文的范围。熟悉 Magento 的开发人员可以自行创建此类自定义模块。

# javascript - 如何强制 Facebook 登录窗口始终位于顶部？

> ID：11126909
> 
> 赞同：0
> 
> 时间：2012-06-20T19:36:23.667
> 
> 标签：javascript, facebook, window, focus, facebook-login

我有一个要部署为信息亭的应用程序，但遇到了这个问题：

登录 Facebook 需要出现 Facebook 登录窗口。如果用户不小心在该窗口之外点击，他/她将在没有登录 Facebook 的情况下返回应用程序，这基本上会使应用程序超时。

我试图通过告诉包含我的应用程序的窗口在 Facebook 登录窗口打开后接收焦点时模糊来解决此问题。

我目前必须控制的代码如下：

```
function initBlurring() {
    if( window.self ) {
        window.self.onfocus = function(e){ 
            window.self.blur();
        }
    } else {
        console.log( "IT did not work..." );

    }
} 
```

任何关于如何完成这项工作的想法将不胜感激。如果可以使用 jQuery，那就太好了。AFAIK Opera 和 Chrome 都无法识别窗口对象上的 blur() 方法，因此信息亭很可能会使用 Firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:41:53.587

使登录对话框成为模态，它不会让用户点击其他任何地方，直到它消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:01:11.440

为什么不只使用服务器端登录？这样用户就*停留*在同一个窗口中，因此不会出现*可能*失去焦点的弹出窗口……</p>

# mysql - 在子查询中使用外部 MySQL 查询中的列

> ID：11126912
> 
> 赞同：0
> 
> 时间：2012-06-20T19:36:30.407
> 
> 标签：mysql, subquery, union

我有一个 MySQL 查询，我想稍微优化一下。这里是：

```
SELECT `items`.category AS 'Category', 'Without' AS 'Which', COUNT(*) AS 'Count'
FROM `items` 
WHERE `id`=706 
GROUP BY `category`

UNION

SELECT `items`.category AS 'Category', 'With' AS 'Which', COUNT(*) AS 'Count'  
FROM `items` 
WHERE `id`=706 AND `qa_items`.pointsoff=0 
GROUP BY `category`; 
```

我得到的是：

```
+---------------------------+---------+-------+
| Category                  | Which   | Count |
+---------------------------+---------+-------+
| Category A                | Without |     3 |
| Category B                | Without |     8 |
| Category C                | Without |     4 |
| Category A                | With    |     2 |
| Category B                | With    |     6 |
| Category C                | With    |     4 |
+---------------------------+---------+-------+ 
```

但我想要的是：

```
+---------------------------+---------+-------+
| Category                  | Without | With  |
+---------------------------+---------+-------+
| Category A                |       3 |     2 |
| Category B                |       8 |     6 |
| Category C                |       4 |     4 |
+---------------------------+---------+-------+ 
```

我知道我可能必须做某种子查询，但我不确定如何引用我在子查询中寻找的类别。我确定这里缺少一些简单的东西。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:39:39.170

在这里，您可以简单地删除 UNION 并改用：

```
SELECT
    category as Category,
    COUNT(*) as Without,
    SUM(pointsoff = 0) as With
FROM items
WHERE id=706
GROUP BY category; 
```

请注意 SUM（布尔条件）模式。这是一个**非常有用**的技巧，值得记住，因为它在性能方面有一些漂亮的用法。请注意，您可以在其中使用任何您想要的布尔条件，它只会为您提供组中满足条件的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:51:51.217

而不是你的查询......你会想要做类似的事情

```
SUM(IF(items.Without, 1,0)) as Without, SUM(IF(items.With, 1,0)) as With for the columns 
```

# c - 假设简化乘法时不会发生有符号溢出

> ID：11126914
> 
> 赞同：3
> 
> 时间：2012-06-20T19:36:32.467
> 
> 标签：c, gcc

所以有这个 gcc 警告让我感到困扰：

```
warning: assuming signed overflow does not occur when simplifying multiplication 
```

它指向的代码如下所示：

```
/* Move the memory block of entries after the removed one - if any. */          
if (database->entries + database->entries_size - 1 != database_entry) {         
    memmove(                                                                    
        database_entry,                                                         
        database_entry + 1,                                                     
        sizeof(spm_database_entry_t)                                            
            * (                                                                 
                (database->entries + database->entries_size)                    
                - database_entry - 1                                            
            )                                                                   
    );                                                                          
} 
```

您可以很容易地猜到，它会在元素移除后移动容器的部分内存，以允许其进一步重新分配（缩小）。

*   `database_entry`是指向`spm_database_entry_t*`已移除元素的类型指针
*   `database->entries`是指向数组的指针`spm_database_entry_t`
*   `database->entries_size`是移除**前**`size_t`的代表数字`database->entries`元素

 **如何摆脱警告？我可以防止乘法简化还是有更好的方法来计算需要移动多少内存？

**编辑**

**你确定`database_entry < database->entries + database->entries_size`吗？**

积极的。

**您使用的编译器标志是什么？**

```
-Wall -Wextra -Wshadow -Wpointer-arith -Wcast-qual -Wstrict-prototypes
-Wmissing-prototypes -Wdeclaration-after-statement -Wwrite-strings
-Winit-self -Wcast-align -Wstrict-aliasing=2 -Wformat=2
-Wmissing-declarations -Wmissing-include-dirs -Wno-unused-parameter
-Wuninitialized -Wold-style-definition -Wno-missing-braces
-Wno-missing-field-initializers -Wswitch-default -Wswitch-enum
-Wbad-function-cast -Wstrict-overflow=5 -Winline -Wundef -Wnested-externs
-Wunreachable-code -Wfloat-equal -Wredundant-decls
-pedantic -ansi
-fno-omit-frame-pointer -ffloat-store -fno-common -fstrict-aliasing 
```

**编辑2**

在乘法`unsigned int`之前强制转换似乎可以解决问题，但强制转换`size_t`不会。我不明白-标准说`size_t`总是未签名...

**编辑3**

如果上下文可以有任何用途：[https ://github.com/msiedlarek/libspm/blob/master/libspm/database.c#L116](https://github.com/msiedlarek/libspm/blob/master/libspm/database.c#L116)

**编辑4**

基于史蒂夫哈的回答的解决方案：

```
/* Calculate how meny entries need moving after the removal. */                 
size_t entries_to_move = (                                                             
    (database->entries + database->entries_size)                                
    - database_entry - 1                                                        
);                                                                              

/* Move the memory block of entries after the removed one - if any. */          
memmove(                                                                        
    database_entry,                                                             
    database_entry + 1,                                                         
    sizeof(spm_database_entry_t) * entries_to_move                              
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:14:45.097

就个人而言，我更喜欢额外的中间临时变量。编译器将看到它们仅用于一次计算，并将优化变量；但是在调试版本中，您可以单步执行，检查变量，并确保它确实按照您的预期进行。

```
/* Move the memory block of entries after the removed one - if any. */          
assert(database_entry >= database->entries &&
        database_entry < database->entries + database->entries_size);

size_t i_entry = database_entry - database->entries;
size_t count_to_move = (database->entries_size - 1) - i_entry;
size_t bytes_to_move = count_to_move * sizeof(spm_database_entry_t);
memmove(database_entry, database_entry + 1, bytes_to_move); 
```

大多数时候，`bytes_to_move`不会为 0，但如果为 0，则`memmove()`只会移动 0 个字节，不会造成任何伤害。因此，我们可以删除该`if`语句，除非您在其中有其他内容仅在移动发生时才需要执行。

此外，如果您这样做，并且仍然收到警告，您将获得一个行号，该行号将指出编译器所担心的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:47:46.803

我怀疑这个问题与`size_t`返回的`sizeof(spm_database_entry_t)`, 始终是无符号类型（如果我没记错的话，通常只是`unsigned int`or的类型同义词）这一事实有关。`unsigned long int`但是，理论上存在一种可能性，即如果 的值`database_entry`超过该值`database->entries + database->entries_size`，您最终会将有符号数量乘以无符号类型，从而增加错误或整数溢出的可能性。通常，当有符号和无符号类型像这样混合时，较小的类型被强制转换/强制转换为较大的类型，或者，如果它们的排名相同，则有符号类型被强制转换为无符号类型。我不知道您的其余代码是什么样的，因此很难提出改进建议。**

# android - 通过不同子网的 WiFi 连接 Android App 和 Server

> ID：11126916
> 
> 赞同：0
> 
> 时间：2012-06-20T19:36:39.033
> 
> 标签：android, http, webserver, ip, wifi

我有什么：Android 应用程序，我的笔记本电脑。

我的应用通过 httpget 发送一些值，例如：`http://ipaddress/receive?value1=1`

我有一个在我的笔记本电脑上运行的网络服务器来监听这个 http 请求。

我通过 WiFi 连接我的笔记本电脑和手机：

1）WiFi连接。

2）我运行浏览器，它打开带有http地址的安全页面。我写了我的登录名并通过，它把我重定向到 https，上面写着 Connection Succesfull。现在我可以上网了。

我的手机获取IP：xxx.xxx.147.139

我的笔记本电脑获得IP：xxx.xxx.146.177

*xxx - 相同。

当我从笔记本电脑上的浏览器发送请求时 - 我的服务器读得很好。当我试图从电话中获取 http (http://xxx.xxx.146.177/receive?value1=1 - 我使用我的笔记本电脑 IP) 时，它不起作用。

我知道我有不同的子网（对吗？），我的 httpget 无法完成。

在这种情况下我能做什么？

谢谢！

# c# - 关于 HL7 监听器的几个问题

> ID：11126918
> 
> 赞同：6
> 
> 时间：2012-06-20T19:36:58.187
> 
> 标签：c#, tcplistener, hl7

我正在寻找在 C# 中构建一个 HL7 侦听器。我们已经在解析作为文本文件发送给我们的消息并将它们导入数据库，因此我了解 HL7 消息是什么以及如何解析它们。

我关于听众的主要问题。侦听器只是 TCP 侦听器吗？如果是这样，我可以组合一个基本的 TCP 侦听器来获取消息并解析结果，将它们导入我们的数据库吗？

我的第二个问题是关于 ACK。我对此的理解是，它只是在收到消息后发回给发件人的消息。它只是另一个指定为响应消息的 HL7 消息。

我的理解正确吗？另外，如果有人有任何其他信息或指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T20:35:28.350

是的，它只是一个简单的 TCP 侦听器。

要确认一条消息，您必须返回一条 MSH 消息，它应该看起来像这样：

```
<11> this means a byte represented in a decimal value. this is VT from the ascii table.    

<11>MSH|^~\&|KS||LAB||20040915080800||ACK|59793000678|P|2.2|59793000678<13>
MSA|AA|59793000678<13>
<28><13> 
```

你应该看看： http: [//nhapi.sourceforge.net/home.php](http://nhapi.sourceforge.net/home.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T22:36:53.380

几个项目：

1.  在套接字上运行的“协议”是 HL7 最小底层协议（MLP 或有时 MLLP）。这个简单的协议用开始和结束字符包装 HL7 消息。[描述 HL7 MLP](http://www.hl7standards.com/blog/2007/05/02/hl7-mlp-minimum-layer-protocol-defined/)包装字符。
2.  正如@the_ajp 所指出的，作为 HL7 消息的接收者，您需要构建一个 HL7 确认。涉及一些古老的规则，但最终关键的部分是您应用程序接受（“AA”）MSA-1 中的消息。一些发送者对他们的 Acks 非常挑剔，需要唯一的消息 ID、正确消息的确认、MSH-9 中的正确触发代码等。[HL7 ACK 消息](http://www.hl7standards.com/blog/2007/02/01/ack-message-original-mode-acknowledgement/)的详细信息；讨论[原始和增强的 HL7 致谢](http://www.corepointhealth.com/resource-center/hl7-resources/hl7-acknowledgement-ack)。
3.  显然，您可以开发自己的硬编码 HL7 子系统。然而，在此之前，请考虑[构建和支持 HL7 子系统的总成本](http://www.corepointhealth.com/sites/default/files/whitepapers/healthcare-communications-subsystem.pdf)，查看一些免费选项（如[Mirth](http://www.mirthcorp.com/products/mirth-connect/faq)），并考虑商业解决方案（如[Corepoint](http://www.corepointhealth.com/)或[Interfaceware](http://www.interfaceware.com)）。

*披露：我是 HL7 基础设施和消息 (InM) 委员会的联合主席、Corepoint 的首席技术官和 Cloverleaf 集成引擎的首席架构师。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:02:38.550

买比。建造。如果您已经“完成”了您的 HL7 界面并且它可以在文件系统之外运行，那么您究竟为什么要重建如此容易获得的东西。有 Mirth 项目，它是开源的，或者如果你想要一些

a) 开箱即用，完全符合您的要求（因为它专为您概述的场景而设计）。

b) 拥有世界上此类商业 HL7 软件成本最低的（如果不是的话）之一。

c) 在几分钟内安装和配置。

稍微调查一下，看看这个：[http](http://www.hermetechnz.com/EasyHL7/Prod_Listeners.asp) ://www.hermetechnz.com/EasyHL7/Prod_Listeners.asp 。

除非您真的打算一年进行数百或数千次部署，否则您只需要问自己这是否是您时间的最佳利用。

披露：我在这家公司从事客户支持工作，但我们根本不雇用销售人员，它只是一种在全球范围内使用的优质、便宜、可靠的 HL7 产品。

# java - Interviewstreet 中位数挑战：Java

> ID：11126921
> 
> 赞同：1
> 
> 时间：2012-06-20T19:37:09.480
> 
> 标签：java, algorithm

我正在尝试解决 interviewstreet 的中值挑战。我在这里看到了一个类似的问题：[interviewstreet medium challenge](https://stackoverflow.com/questions/11007406/interviewstreet-median-challenge)，但我想找出我的方法有什么问题。我正在使用二进制搜索和排序的 ArrayList 来找出每个点的中位数。只有第 1 次、第 3 次和第 10 次测试通过，其余测试均以错误答案失败。问题：[http](http://pastebin.com/1QhbiB2U) ://pastebin.com/1QhbiB2U 这是代码：

```
/**
 * @param args
 */
public static void main(String[] args) {
    Scanner in = new Scanner(System.in);
    long N = in.nextLong();
    List<Long> list = new ArrayList<Long>();
    for(int i=0; i<N; i++){
        String op = in.next();
        long number = in.nextLong();
        performOperation(op, number, list);
    }
}

private static void performOperation(String op, long number, List<Long> list) {
    int index = Collections.binarySearch(list, number);
    if(op.equalsIgnoreCase("r")){
        if(index < 0){
            System.out.println("Wrong!");//Doesn't exist
            return;
        }else{
            list.remove(index);//Remove any one occurence
        }
    }else{
        if(index < 0){
            list.add(-index-1, number);//Add in sorted list
        }else{
            list.add(index, number);//Add where the same number exists, should still be sorted.
        }
    }

    if(list.size() == 0){
        System.out.println("Wrong!");
    }else if(list.size()%2 == 0){
        double median = (list.get(list.size()/2) + list.get(list.size()/2 - 1))/2.0;
        if(median == Math.ceil(median))
            System.out.println((long)median);
        else
            System.out.println(median);
    }else{
        System.out.println(list.get((list.size()-1)/2));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:05:45.527

我认为问题在于附加程序中双打的输出。我从问题中验证了该程序以供输入：

```
2
a 1
a 1000000000 
```

给出：

```
1
5.000000005E8 
```

这种改变适用于上述情况（虽然不是很好）：

```
long median = (list.get(list.size()/2) + list.get(list.size()/2 - 1));  // median is multiplied by 2
    if(1==(median&1))
        //odd
    System.out.println(""+(median/2)+".5");
else
    System.out.println(median/2); 
```

请注意，带有索引的 ArrayList.add 为 O(n)。

# php - Zend_db_Select 多个 where 但可以使用可变子句？

> ID：11126923
> 
> 赞同：0
> 
> 时间：2012-06-20T19:37:16.960
> 
> 标签：php, zend-framework, zend-db, zend-db-select

是否可以动态创建带有多个 where() 子句的 select 语句？假设一个函数接受多个参数。如果第 N 个参数不为空，则在语句中添加 ->where('sth = ?", $value) 子句并对所有参数执行此操作。

现在，简单的方法是使用一个巨大的开关盒，但感觉不对。如果 where() 子句接受数组，那会很容易，但现在呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:37:52.670

我在评论中指出，实现通用 WHERE 包装器并非易事：这就是为什么（我认为）ZF 开发人员决定采用更简单的方法，该方法基本上需要一个 SQL 表达式 - 而不是数组。

为您的案例实现这样的功能会更容易：

```
function whereX(Zend_Db_Select $select, array $args) {
  foreach($args as $argExpression => $argValue) {
    $select->where($argExpression, $argValue);
  }
} 
```

...然后通过这样的方式使用它...

```
whereX($select, array('price < ?' => $minimumPrice, 'price > ?' => $maximumPrice)); 
```

但是当您决定使用“OR”条件或制作一些更复杂的子句时，应该调整该功能。随着它变得越来越复杂，它的简单性变得越来越差......

我想这就是为什么它不包含在 Zend 标准包中的原因——至少目前是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T04:28:06.570

如果有人正在寻找替代方案（Zend Framework 1.12.3）：

```
 $where = array();
 foreach($delete_ids as $delete_cond)
          $where[]=$db_adapter->quoteInto ('id=?', $delete_cond);

  $where = implode(' OR ', $where);
  $where = '('.$where.') AND '.$db_adapter->quoteInto('somethingEse=?', $something); 
```

这将为您提供以下结果：

```
WHERE (as many OR conditions as you like of the **same** column) AND (single condition that must
also be met) 
```

您可以使用 raina77ow 的答案对其进行一些调整，以便在 OR 条件中具有不同的列条件。

# sql - 编写一个 PL/pgSQL 函数，以便在找到“无”时不设置 FOUND？

> ID：11126924
> 
> 赞同：1
> 
> 时间：2012-06-20T19:37:36.163
> 
> 标签：sql, function, postgresql, stored-procedures, plpgsql

我刚刚开始使用 PostgreSQL 中的函数，这可能是非常基本的，但是这是如何完成的呢？

我希望能够在函数中使用以下内容：

```
PERFORM id_exists();
IF FOUND THEN
   -- Do something
END IF; 
```

其中`id_exists()`函数（与 SELECT 和 PERFORM 一起使用）是：

```
CREATE OR REPLACE FUNCTION id_exists() RETURNS int AS $$
DECLARE
  my_id int;
BEGIN
  SELECT id INTO my_id
  FROM tablename LIMIT 1;
  RETURN my_id;
END;
$$ LANGUAGE plpgsql; 
```

目前，即使在`my_id`表中不存在时`FOUND`也是如此，大概是因为仍在返回一行（空整数）？如何重写它以便找到一个整数返回，否则什么都没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:43:48.100

您的假设是正确的，如果最后一条语句返回一行，`FOUND`则设置为`TRUE`，无论值如何（可能是`NULL`您的情况）。手册中的详细信息在[这里](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS)。

重写为，例如：

```
IF id_exists() IS NOT NULL THEN
   -- Do something
END IF; 
```

**或者**重写你的函数的返回值，**`SETOF`**这样它就可以返回多行——**或者没有行**！`RETURN QUERY`像我演示的那样使用。您可以在原始设置中使用此功能。

```
CREATE OR REPLACE FUNCTION id_exists()
  RETURNS SETOF int LANGUAGE plpgsql AS
$BODY$
BEGIN
  RETURN QUERY
  SELECT id
  FROM   tablename
  LIMIT  1;
END;
$BODY$; 
```

**或者**，使用**语言 SQL**函数更简单：

```
CREATE OR REPLACE FUNCTION id_exists()
  RETURNS SETOF int LANGUAGE sql AS
$BODY$
  SELECT id
  FROM   tablename
  LIMIT  1;
$BODY$; 
```

# nosql - 尝试新的 CQL 3 时出现 Cassandra 错误

> ID：11126925
> 
> 赞同：2
> 
> 时间：2012-06-20T19:37:36.447
> 
> 标签：nosql, cassandra

我下载了 Cassandra 1.1.1 并在版本 3 下启动了 cqlsh

我试图创建一个新的列族：

```
CREATE TABLE stats (
 pid          blob,
 period      int,
 targetid     blob,
 sum         counter,
PRIMARY KEY (pid, period, targetid)
); 
```

但我得到了这个：

> 回溯（最后一次调用）：文件“./cqlsh”，第 908 行，在 perform_statement self.cursor.execute(statement, decoder=decoder) 文件“./../lib/cql-internal-only-1.0.10 .zip/cql-1.0.10/cql/cursor.py”，第 117 行，在执行响应 = self.handle_cql_execution_errors(doquery,prepared_q,compress) 文件“./../lib/cql-internal-only-1.0\. 10.zip/cql-1.0.10/cql/cursor.py”，第 132 行，在 handle_cql_execution_errors 返回执行器（*args，**kwargs）文件“./../lib/cql-internal-only-1.0.10 .zip/cql-1.0.10/cql/cassandra/Cas​​sandra.py”，第 1583 行，在 execute_cql_query self.send_execute_cql_query（查询，压缩）文件“./../lib/cql-internal-only-1.0.10\. zip/cql-1.0.10/cql/cassandra/Cas​​sandra.py”，第 1593 行，在 send_execute_cql_query 中。*oprot.trans.flush() 文件“./../lib/thrift-python-internal-only-0.7.0.zip/thrift/transport/TTransport.py”，第 293 行，冲洗自。*_trans.write(buf) 文件“./../lib/thrift-python-internal-only-0.7.0.zip/thrift/transport/TSocket.py”，第 117 行，写入 plus = self.handle.send （buff）错误：[Errno 32] 断管

在服务器控制台上：

> 处理消息时发生错误。org.apache.cassandra.db.marshal.AbstractCompositeType.getBytes(AbstractCompositeType.java:51) 在 org.apache.cassandra.db 的 java.nio.Buffer.limit(Buffer.java:247) 的 java.lang.IllegalArgumentException。 marshal.AbstractCompositeType.getWithShortLength(AbstractCompositeType.java:60) 在 org.apache.cassandra.db.marshal.AbstractCompositeType.getString(AbstractCompositeType.java:140) 在 org.apache.cassandra.config.CFMetaData.validate(CFMetaData.java: 929) 在 org.apache.cassandra.cql3.statements.CreateColumnFamilyStatement.announceMigration(CreateColumnFamilyStatement.java:83) 在 org.apache.cassandra.cql3 的 org.apache.cassandra.service.MigrationManager.announceNewColumnFamily(MigrationManager.java:131) .statements.SchemaAlteringStatement。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:59:27.527

我建议在[https://issues.apache.org/jira/browse/CASSANDRA](https://issues.apache.org/jira/browse/CASSANDRA)报告错误。

# paypal - 使用 PayPal _cart 系统，但需要能够限制仅运送到英国地址

> ID：11126926
> 
> 赞同：1
> 
> 时间：2012-06-20T19:37:39.623
> 
> 标签：paypal

我们正在使用 PayPal _cart 系统，但需要能够限制仅运送到英国地址。有谁知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:13:39.523

经过多次追逐，我现在直接从 PayPal 得到了答案……显然，这不再可能了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:42:38.297

这是一个链接，提供来自 PayPal 论坛版主的说明：

[https://www.paypal-community.com/t5/Shipping/I-don-t-want-to-accept-International-orders/td-p/183580](https://www.paypal-community.com/t5/Shipping/I-don-t-want-to-accept-International-orders/td-p/183580)

正如该链接中的建议所建议的那样，您可以转到“管理我的风险”，其中有一个部分允许您拒绝来自您可以指定的国家/地区列表的付款。您可以使用该选项将所有国家/地区移至拒绝方。请务必将您的国家/地区留在左侧的“不受监控”栏中，这样右侧栏中将包含除您以外的所有国家/地区。

在您的帐户设置中，您可以限制仅从您所在国家/地区拥有 PayPal 帐户的人购买。另一种选择是对任何国际订单收取荒谬的运费，以阻止任何人在国外购买。这些可能是矫枉过正，但为了以防万一，这样做可能不会有什么坏处。

# java - Twitter4j 中的不兼容类型

> ID：11126927
> 
> 赞同：0
> 
> 时间：2012-06-20T19:37:41.953
> 
> 标签：java, twitter4j, incompatibletypeerror

我正在关注 twitter4j 的本教程：

[http://www.javacodegeeks.com/2011/10/java-twitter-client-with-twitter4j.html](http://www.javacodegeeks.com/2011/10/java-twitter-client-with-twitter4j.html)

我几乎把所有事情都做对了。除了这一小部分之外，我所有的代码都可以编译：

```
 ResponseList list = twitter.getHomeTimeline();
    for (Status each : list) { //incompatible types error

        System.out.println("Sent by: @" + each.getUser().getScreenName()
                + " - " + each.getUser().getName() + "\n" + each.getText()
                + "\n");
    } 
```

这是该异常的输出：找到不兼容的类型：java.lang.Object required: twitter4j.Status

我正在使用 twitter4j 2.2.5 罐子。我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:46:29.903

缺少泛型，也许您可​​以尝试：

```
 ResponseList<Status> list = twitter.getHomeTimeline();
    for (Status each : list) {

        System.out.println("Sent by: @" + each.getUser().getScreenName() + " - " + each.getUser().getName() + "\n"
                + each.getText() + "\n");
    } 
```

# sql-server-2008 - SQL Server重复运行不在循环中的查询

> ID：11126929
> 
> 赞同：0
> 
> 时间：2012-06-20T19:37:47.113
> 
> 标签：sql-server-2008, tsql

我目前正在学习如何在 SQL Server 环境中创建存储过程。

我有一个与 Joes2Pros SQL 服务器系列一起使用的查询块。

T-SQL 语法目前如下所示：

```
Use JProCo
GO

CREATE PROCEDURE sp_GetProductListByCategory @Category VarChar(50)
AS
BEGIN
    SELECT ProductID, ProductName, RetailPrice
    FROM dbo.CurrentProducts
    WHERE Category = @Category
END

EXECUTE sp_GetProductListByCategory 'No-Stay' 
```

运行此代码得到如下结果：

```
(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected)

(80 row(s) affected) 
```

我所期待的是一张满是结果和记录的表格。相反，查询似乎运行了很多次。我想知道的是：

为什么这似乎运行了很多次？我没有看到任何会在这个逻辑集中创建循环的东西。（我尝试了上面没有 BEGIN 和 END 语句的 T-SQL 代码，并且存在相同的行为）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:42:14.033

您已将对 SP 的调用包含在 SP 本身中。批量创建 SP。

```
CREATE PROCEDURE sp_GetProductListByCategory @Category VarChar(50)
AS
BEGIN
    SELECT ProductID, ProductName, RetailPrice
    FROM dbo.CurrentProducts
    WHERE Category = @Category
END 
```

然后调用它。

```
EXECUTE sp_GetProductListByCategory 'No-Stay' 
```

# c++ - 将 boost::spirit::qi::phrase_parse() 与 qi::grammar 一起使用时出错

> ID：11126930
> 
> 赞同：1
> 
> 时间：2012-06-20T19:37:50.170
> 
> 标签：c++, boost, c++11, boost-spirit, boost-spirit-qi

我正在使用 IRC 消息解析器，`Boost.Spirit`但是当我尝试解析输入时出现（非常长的）错误。我遵循了“[罗马数字](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/tutorials/roman_numerals.html)”的例子。另外，我正在使用`g++4.7`with `-std=c++11`。该错误仅在我调用时发生`phrase_parse()`，`test.cpp`而不是在我创建`message_grammar`.

语法课是：

```
class message_grammar : qi::grammar<std::string::const_iterator, std::string()>
{
public:
    message_grammar() : base_type(m_message)
    {   
        using qi::_val;
        using qi::_1;
        using boost::spirit::ascii::char_;
        using qi::lit;

        qi::rule<std::string::const_iterator, std::string()> alpha, graph, number, special, user,
            nick, chn, channel;

        alpha  = qi::as_string[qi::alpha];
        graph  = qi::as_string[qi::graph];
        number = qi::as_string[char_('0', '9')];
        chn    = qi::as_string[(char_('#') | char_('$'))];

        special = qi::as_string[
                char_('-') | char_('[') | char_(']') | char_('\\') 
            |   char_('`') | char_('^') | char_('{') | char_('}')
        ];

        user = (
                graph   [_val = std::string("USER%% ") + _1] 
            >>  *graph[_val += _1]
        );

        nick = (
                alpha[_val = std::string("NICK%% ") + _1]
            >>  
            *(
                    alpha           
                |   number
                |   special
            )[_val += _1]
        );

        channel = (
                chn                         [_val = std::string("CHAN%% ") + _1]
            >>  +(alpha | number | special) [_val += _1]
        );

        m_message = (
                nick    [_val = _1]
            >>  alpha   [_val += std::string(" ") + _1]
            >>  channel [_val += std::string(" ") + _1]
            >>  user    [_val += std::string(" ") + _1]
        );
    }

    qi::rule<std::string::const_iterator, std::string()> m_message;
}; 
```

测试功能为：

```
int main()
{
    string str, parsed_str;
    getline(cin, str);

    irc::message_grammar grammar;

    auto it = str.begin();
    auto end = str.end();

    bool ok = qi::phrase_parse(it, end, 
        grammar
    , qi::space, parsed_str);

    if (ok && it == end) {
        cout << "OK" << endl;
        cout << parsed_str << endl;
    }
    else {
        cout << "NO " << ok << endl;
    }
} 
```

和错误信息：

```
murilo@mac:cleverbot$ g++-mp-4.7 -std=c++11 test.cpp -Wall
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp: In instantiation of 'struct boost::proto::domainns_::domain<>::as_expr<irc::message_grammar>':
/opt/local/include/boost/proto/traits.hpp:266:71:   required from 'struct boost::proto::result_of::as_expr<irc::message_grammar, boost::proto::domainns_::default_domain>'
/opt/local/include/boost/spirit/home/support/meta_compiler.hpp:221:16:   required from 'struct boost::spirit::traits::matches<boost::spirit::qi::domain, irc::message_grammar>'
/opt/local/include/boost/spirit/home/qi/parse.hpp:155:9:   required from 'bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const Expr&, const Skipper&, boost::spirit::qi::skip_flag, Attr&) [with Iterator = __gnu_cxx::__normal_iterator<char*, std::basic_string<char> >; Expr = irc::message_grammar; Skipper = boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::standard> >, 0l>; Attr = std::basic_string<char>]'
/opt/local/include/boost/spirit/home/qi/parse.hpp:197:86:   required from 'bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const Expr&, const Skipper&, Attr&) [with Iterator = __gnu_cxx::__normal_iterator<char*, std::basic_string<char> >; Expr = irc::message_grammar; Skipper = boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::standard> >, 0l>; Attr = std::basic_string<char>]'
test.cpp:20:25:   required from here
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef void boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_is_expr_' is inaccessible
In file included from /opt/local/include/boost/proto/traits.hpp:32:0,
                 from /opt/local/include/boost/proto/expr.hpp:27,
                 from /opt/local/include/boost/proto/core.hpp:17,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp:141:13: error: within this context
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef void boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_is_expr_' is inaccessible
In file included from /opt/local/include/boost/proto/traits.hpp:32:0,
                 from /opt/local/include/boost/proto/expr.hpp:27,
                 from /opt/local/include/boost/proto/core.hpp:17,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp:141:13: error: within this context
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef void boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_is_expr_' is inaccessible
In file included from /opt/local/include/boost/proto/traits.hpp:32:0,
                 from /opt/local/include/boost/proto/expr.hpp:27,
                 from /opt/local/include/boost/proto/core.hpp:17,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp:142:17: error: within this context
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef void boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_is_expr_' is inaccessible
In file included from /opt/local/include/boost/proto/traits.hpp:32:0,
                 from /opt/local/include/boost/proto/expr.hpp:27,
                 from /opt/local/include/boost/proto/core.hpp:17,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp:143:56: error: within this context
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef void boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_is_expr_' is inaccessible
In file included from /opt/local/include/boost/proto/traits.hpp:32:0,
                 from /opt/local/include/boost/proto/expr.hpp:27,
                 from /opt/local/include/boost/proto/core.hpp:17,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp:146:29: error: within this context
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef void boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_is_expr_' is inaccessible
In file included from /opt/local/include/boost/proto/traits.hpp:32:0,
                 from /opt/local/include/boost/proto/expr.hpp:27,
                 from /opt/local/include/boost/proto/core.hpp:17,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp:146:29: error: within this context
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef void boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_is_expr_' is inaccessible
In file included from /opt/local/include/boost/proto/traits.hpp:32:0,
                 from /opt/local/include/boost/proto/expr.hpp:27,
                 from /opt/local/include/boost/proto/core.hpp:17,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/domain.hpp:146:46: error: within this context
In file included from /opt/local/include/boost/proto/core.hpp:23:0,
                 from /opt/local/include/boost/proto/proto.hpp:12,
                 from /opt/local/include/boost/spirit/home/support/meta_compiler.hpp:19,
                 from /opt/local/include/boost/spirit/home/qi/meta_compiler.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi/action.hpp:14,
                 from /opt/local/include/boost/spirit/home/qi.hpp:14,
                 from /opt/local/include/boost/spirit/include/qi.hpp:16,
                 from ircparser.h:6,
                 from test.cpp:1:
/opt/local/include/boost/proto/matches.hpp: In instantiation of 'struct boost::proto::matches<irc::message_grammar, boost::spirit::meta_compiler<boost::spirit::qi::domain>::meta_grammar>':
/opt/local/include/boost/spirit/home/support/meta_compiler.hpp:221:16:   required from 'struct boost::spirit::traits::matches<boost::spirit::qi::domain, irc::message_grammar>'
/opt/local/include/boost/spirit/home/qi/parse.hpp:155:9:   required from 'bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const Expr&, const Skipper&, boost::spirit::qi::skip_flag, Attr&) [with Iterator = __gnu_cxx::__normal_iterator<char*, std::basic_string<char> >; Expr = irc::message_grammar; Skipper = boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::standard> >, 0l>; Attr = std::basic_string<char>]'
/opt/local/include/boost/spirit/home/qi/parse.hpp:197:86:   required from 'bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const Expr&, const Skipper&, Attr&) [with Iterator = __gnu_cxx::__normal_iterator<char*, std::basic_string<char> >; Expr = irc::message_grammar; Skipper = boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::standard> >, 0l>; Attr = std::basic_string<char>]'
test.cpp:20:25:   required from here
/opt/local/include/boost/proto/extends.hpp:551:13: error: 'typedef struct boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()> boost::proto::exprns_::extends<boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::qi::reference<const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>(), boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, 0l>, boost::spirit::qi::grammar<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::basic_string<char>()>, boost::proto::domainns_::default_domain, 0l>::proto_derived_expr' is inaccessible 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:26:13.737

您应该声明`message_grammar`为结构而不是类。此外，您可以从以下位置公开派生您的课程`qi::grammar`：

```
class message_grammar : public qi::grammar<std::string::const_iterator, std::string()>
{
} 
```

您也可能会发现这篇[文章](https://stackoverflow.com/questions/8750292/class-v-s-struct-in-boostspirit)很有用。

# android - 您的视图在 XML 中的放置是否必须与您的活动中的代码相匹配？

> ID：11126933
> 
> 赞同：0
> 
> 时间：2012-06-20T19:37:56.087
> 
> 标签：android, xml, spinner

我有一个显示一些`TextView`s 和`EditText`s 以及`DatePicker`s 和`TimePicker`s 的活动。现在我正在添加一个`Spinner`，它几乎接近底部，就像我的代码在`onCreate()`它中一样。当我点击 Spinner 时，它会弹出来，可能是因为它靠近底部并且没有足够的空间。所以我想我会在它位于顶部时对其进行测试。但它失败了。错误是：

```
06-20 15:31:28.802: E/AndroidRuntime(980): java.lang.RuntimeException: 
Unable to start activity ComponentInfo{com.zeroe/com.zeroe.AddEventActivity}: 
java.lang.ClassCastException: android.widget.Spinner cannot be cast to
android.widget.Button 
```

我不明白，但据我猜测，XML 的位置应该遵循代码的位置。我实际上是在将 xml 代码复制并粘贴到顶部，所以我知道我没有更改任何内容。这是一条规则，还是我犯了某种错误？感谢您提前输入。

编辑：

我的代码`Spinner spinner = (Spinner)findViewById(R.id.reminder_spinner);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:45:48.337

请注意，当您更改布局时，有时*Eclipse*不会重建资源，并且您留下的*id与其 XML 声明的**Views*不匹配。完全清洁和重建应该照顾它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:40:25.537

问题是您正试图`Spinner`将`Button`

我想你有一些看起来像这样的代码：

```
Button myButton = findViewById(R.id.mySpinnerID) 
```

相反，它应该看起来像这两行之一：

```
Spinner mySpinner = findViewById(R.id.mySpinnerID)
Button myButton = findViewById(R.id.myButtonID) 
```

在创建与 .xml 中的视图相对应的 java 对象时，您必须确保为相应的视图创建正确的对象类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:41:25.507

该错误几乎是不言自明的。您正在尝试将`Spinner`对象转换为`Button`对象。只是为了确认您的视图在 XML 中的位置与访问该 XML 的代码之间没有关系。

# mysql - AVG 返回 null 但不应该

> ID：11126934
> 
> 赞同：0
> 
> 时间：2012-06-20T19:37:59.503
> 
> 标签：mysql, sql, average

我有一个包含这些值的*Birthdate*字段：

```
28 Juillet 1982   (I want this one to be excluded)
09/16/1981        (This one will be used)
                  (empty, should be excluded)
03/19/1953        (This one will be used) 
```

我想获得 mm/dd/yyyy 日期的平均年龄。现在我的查询是：

```
SELECT AVG(NULLIF(YEAR(NOW())-YEAR(Birthdate), 0)) AS AvgAge FROM `User` 
```

我也试过：

```
SELECT AVG( YEAR(NOW())-YEAR(Birthdate) ) AS AvgAge FROM `User` 
```

但结果总是一样的：*NULL*

每个 100% 数字的 id_user 都有正确的 mm/dd/yyyy 生日，所以我也尝试过：

```
SELECT AVG(CASE WHEN id_user >=0 THEN YEAR( NOW( ) ) - YEAR( Birthdate ) ELSE NULL END )  AS AvgAge FROM `User` 
```

然后：

```
SELECT AVG(CASE WHEN CEIL(id_user) = id_user THEN YEAR( NOW( ) ) - YEAR( Birthdate ) ELSE NULL END )  AS AvgAge FROM `User` 
```

仍然*为空*...

你知道为什么会这样吗？
也许是我的一个简单错误，但我无法弄清楚。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:47:11.370

读这个：

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html)

我认为类型可能不正确。

> 尽管 MySQL 尝试以多种格式解释值，但日期部分必须始终按年-月-日顺序给出（例如，'98-09-04'），而不是按月-日-年或日-月-其他地方常用的年份顺序（例如，'09-04-98'、'04-09-98'）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:45:00.900

你写错了，你用`nulllif`而不是`IFNULL`试试这个：

```
SELECT AVG(IFNULL(YEAR(NOW())-YEAR(Birthdate), 0)) AS AvgAge FROM `User` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:58:55.797

正如 duffymo 所说，因为 Birthdate 列的类型是 VACHAR，所以 YEAR() 不能工作。

所以我终于做到了：

```
SELECT AVG(IF(CONCAT('',id_user*1) = id_user, (YEAR(NOW()) - SUBSTRING(Birthdate, -4)), NULL))  AS nbUserWithCorrectDate FROM `User` 
```

# jquery - jQuery 自定义验证

> ID：11126938
> 
> 赞同：-5
> 
> 时间：2012-06-20T19:38:12.560
> 
> 标签：jquery, jquery-validate

在表单上，​​我需要提供验证，其中验证取决于两个字段的值，但我似乎无法让它工作。

```
$.validator.addMethod("validateTask",function (value, element, params) {
        if (($("#ID").val() == 1) && ($("#IDName").val() == 0)) {

                return  "required";

            }
    }, 'Enter an individual.'); 
```

电话是

```
Name:{
        validateTask: true
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:06:23.917

从插件文档中，您似乎只需要一个**[必需的依赖回调](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-callback)**

```
$(selector).validate({    
    rules:{
       Name:{
           required: function(element){
            return $("#ID").val() == 1 && $("#IDName").val() == 0;
       }
    },
    messages:{
        Name:{ required: 'Enter an individual.'}
    }
}) 
```

# grep - xargs: zcat: 由信号 13 终止

> ID：11126950
> 
> 赞同：2
> 
> 时间：2012-06-20T19:38:51.297
> 
> 标签：grep, xargs

我使用了如下脚本

zgrep -i xxxx FileA|grep -o "RID=[0-9|AZ]*"|uniq|cut -d "=" -f2|xargs -0 -I string zcat FileB| requestID="RequestID=" stringone=$requestID$string grep stringone FileB

在`xargs`使用之前，我的 o/p 是

```
01982893213982312 - RID 1
32103213213213213 - RID 2
32103213213213343 - RID 3
32103213213251261 - RID 4 
```

对于此处存在的每个 RID，文件 B 中都有相应的行。我计划在以下内容之后执行以下操作：

```
zgrep -i xxxx FileA | grep -o "RID=[0-9|A-Z]*" | uniq | cut -d "=" -f2 | xargs|
{grep RID1 in file B, grep RID2 in file B,grep RID3 in file B, grep RID4 in file B} 
```

现在，如果我这样做，我会收到一个错误 xargs: zcat: terminate by signal 13

请帮帮我

# c++ - 如何在 Flash Player 中触发“运行状态”？

> ID：11126955
> 
> 赞同：0
> 
> 时间：2012-06-20T19:39:15.587
> 
> 标签：c++, com, activex, flash

如果我使用窗口激活（`HWND`在函数中给 Flash 播放器一个有效`GetWindow`就足以触发它），播放器将运行加载的 swf 文件。但是，如果我使用无窗口激活，加载的文件不会运行，只显示第一帧。[这篇文章](http://www.codeproject.com/Articles/14673/Transparent-Flash-Control-in-Plain-C)声称我应该打电话给

```
DoVerb(OLEIVERB_SHOW, NULL, (IOleClientSite *)this, 0, NULL, NULL); 
```

但是，这没有任何效果。我究竟做错了什么？

编辑：自从我发表这篇文章后，我发现它返回 -2147467259，这不是已知的 HRESULT，但肯定不是 0。这是什么意思？

经过一番挖掘，我发现返回值为`OLE_E_NOTRUNNING`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:19:01.493

我发现了问题。在这个电话之前，我在做：

```
hr = _shockwaveFlash->put_WMode(BSTR("opaque")); 
```

但我公然忽略了那里的 HRESULT。它使 Flash Player 感到困惑，因为它不是`BSTR`在代码中插入常量（这是一个宽字符串）的有效方法。正确：

```
hr = _shockwaveFlash->put_WMode(L"opaque"); 
```

现在它可以正常工作了。检查你的 HRESULT，孩子们:)

# python - 数组乘法

> ID：11126956
> 
> 赞同：0
> 
> 时间：2012-06-20T19:39:16.270
> 
> 标签：python, arrays, list

我正在尝试在不使用 numpy 的情况下将两个数组相乘。但是，我在“multi = a[i]*b[j]”行收到一个错误，指出索引超出范围。

```
a = [1,2,3]
b = [4,5,6]

multi = [0,0,0,0,0,0,0,0]

for i in a:
    for j in b:
        multi = a[i]*b[j]
        append.multi(y)

print multi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:49:37.000

让我们从你正在尝试的开始。for 循环：

```
a = [1,2,3]
b = [4,5,6]

ab = []

for x in a:
    for y in b:
        ab.append(x * y)

print(ab)

[4, 5, 6, 8, 10, 12, 12, 15, 18] 
```

现在，我建议你在这里阅读[python 数据结构](http://docs.python.org/tutorial/datastructures.html)

一旦你了解了如何使用 for 循环，理解列表推导就很容易了。

与 for 循环相同，但结果直接进入列表。这很好。事实上，几乎每个人都这样做非常好。

```
a = [1,2,3]
b = [4,5,6]

ab = [ x * y for x in a for y in b ]

print(ab)

[4, 5, 6, 8, 10, 12, 12, 15, 18] 
```

所以，而不是 `for ... ab.append(x * y)`我们写`[ x * y for ... ]`

现在如果代码是这样写的：

```
ab = ( x * y for x in a for y in b ) 
```

它将使其成为发电机。很多人也使用这些。将这些视为惰性列表。你可以把东西放进去，但在你尝试用它做某事之前，它不会被评估。

```
print(ab)
<generator object <genexpr> at 0x4d7058>

print( list(ab) )
[4, 5, 6, 8, 10, 12, 12, 15, 18] 
```

如果您“正在”尝试使用索引解决此问题，我可能会使用：

```
[a[x] * b[y] for x,_a in enumerate(a) for y,_b in enumerate(b)] 
```

您还可以做一些有趣的事情，例如：

```
from operator import mul

a = [1,2,3]
b = [4,5,6]

ab = list(map(mul, a,b))

print(ab)

[4, 10, 18] 
```

如果您使用：

```
ab = map(mul, a,b) 
```

您将创建一个地图对象...这与`< generator >`.

```
print(ab)
>>> <map object at 0x4d4eb0>

print( list(ab) )
>>> [4, 10, 18] 
```

或者如果您有三个列表：

```
a = [1,2,3]
b = [4,5,6]
c = [7,8,9]

abc = list(map(lambda x,y,z: x * y * z, a,b,c))

print(abc)

[28, 80, 162] 
```

如果你真的想要你可以这样做：

```
from itertools import product
from functools import reduce
from operator import mul

a = [1,2,3]
b = [4,5,6]

ab = list(map(lambda x: reduce(mul,x), product(a,b)))
--or--
ab = list(map(lambda x: mul(*x), product(a,b)))

print(ab)

[4, 5, 6, 8, 10, 12, 12, 15, 18] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:42:05.880

您的代码中有很多错误，应该阅读[Python 教程](http://docs.python.org/tutorial/)。

`for i in a`迭代 a 的元素，而不是它们的索引。所以你想要`i*j`，不是`a[i]*b[j]`。此外，`append.multi(y)`这不是附加到列表的正确方法，而且您也没有定义任何调用的变量`y`，因此不清楚您要做什么。阅读教程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T19:59:48.857

使用列表推导：

```
a = [1,2,3]
b = [4,5,6]
m = [x * y for x in a for y in b]
print m
>>> [4, 5, 6, 8, 10, 12, 12, 15, 18] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:42:12.130

`for i in a`不返回索引，它返回值。你应该做这个：

```
for i in a: for j in b: multi=i*j ... 
```

# python - 如何使用 python-xlib 移动/调整窗口大小？

> ID：11126972
> 
> 赞同：7
> 
> 时间：2012-06-20T19:40:46.460
> 
> 标签：python, xlib

如何使用 python-xlib 调整窗口大小/移动窗口？我有 X 窗口 ID。等效的 python-xlib 片段是`wmctrl -i -r $id -e $gravity,$x,$y,$width,$height`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T01:19:48.483

您需要 ConfigureWindow 请求来更改 x、y、width、height 和 ChangeWindowAttributes 请求来更改重力。您可以直接使用它们或与资源/窗口包装器一起使用

```
win = xobject.drawable.Window(display, id)
win.configure(x=123, y=345, width=678, height=910)
win.change_attributes(win_gravity=X.NorthWestGravity, bit_gravity=X.StaticGravity) 
```

# localhost - 更改本地主机首页

> ID：11126973
> 
> 赞同：1
> 
> 时间：2012-06-20T19:40:47.597
> 
> 标签：localhost

我不知道正确的说法是什么，但这就是我想做的。

我已经设置了本地主机，`/var/www/`并且文件夹中有一个`index.php`文件用作本地主机的索引页面。我已经设置了`/var/www/drupal/`drupal，当我在网络浏览器中访问本地主机时，有没有办法将首页指向drupal文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:44:35.427

尝试将其放入 /var/www/index.php：

```
<?php
   header( 'Location: http://www.example.com/drupal/' ) ;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:44:45.047

简单的解决方案：将 HTTP 重定向放在里面`index.php`：

```
<? Header('Location: drupal/'); ?> 
```

# java - “x”类型中的方法 search() 不适用于参数（字符串）

> ID：11126977
> 
> 赞同：0
> 
> 时间：2012-06-20T19:41:23.367
> 
> 标签：java, eclipse, macos, jsp

安装 Mac OSX 10.6.7、Eclipse、Tomcat 1.6

我正在尝试将 Java 文件中的字符串调用到我的 JSP 以将其显示给用户，但我不断收到以下错误。一如既往地感谢任何帮助，

JSP

```
<%
Injector injector = Guice.createInjector(new GuiceInjector());
SliceConnector r = injector.getInstance(SliceConnector.class);  
out.println(r.search());    

String dbConcept = "http://dbpedia.org/resource/human_rights";
System.out.println(r.search(dbConcept));
%> 
```

爪哇

```
public String search(String dbConcept)
{
    setSlicepediaProductionMode(true);

    List<SliceHit> sliceHits = searchForSlices();
    if (sliceHits == null) {
        System.err.println("Timeout occurred while fetching slices");
        return "error";
    }
    if (!sliceHits.isEmpty()) {
        System.out.println("Found some slices Yuhuuuu ! :-) ");
        String sliceContent = createSlices(sliceHits);
        System.out.println("Slice content:");
        System.out.println(sliceContent);
        return sliceContent;
    } else {
        System.out.println("No Slices were found for this query");
    }
    System.out.println("Slice Consumer stopped activity");      
    return "SliceConnector";
}

private void setSlicepediaProductionMode(boolean productionMode)
{
    sliceSearcher.setProductionMode(productionMode);
    sliceCreator.setProductionMode(productionMode);
}
private List<SliceHit> searchForSlices() {
    SlicepediaQuery sliceQuery = new SlicepediaQuery();

    String dbConcept = "http://dbpedia.org/resource/human_rights";

    sliceSearcher.setSliceQuery(sliceQuery);
    if (sliceSearcher.run()) 
    {
        return sliceSearcher.getSliceHits();
    } else 
    {
        return null;
    }
} 
```

错误

```
exception

org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 141 in the jsp file: /SimpleResponse2.jsp
The method search() in the type SliceConnector is not applicable for the arguments (String)
138:            
139:            
140:        String dbConcept = "http://dbpedia.org/resource/human_rights";
141:        System.out.println(r.search(dbConcept)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:49:52.010

我看到您调用了 search() 两次，第一次没有参数，第二次使用字符串。在发布的代码中，您仅提供后一种情况，因此您应该在第一次调用时已经收到错误。

更正第一次调用并确保您引用了正确的文件。

# c# - 无法在 Android Spinner 教程上隐式转换类型错误

> ID：11126979
> 
> 赞同：1
> 
> 时间：2012-06-20T19:41:25.453
> 
> 标签：c#, android, xamarin.android

嗨，我正在尝试为 Android 做 Spinner 教程。 [http://docs.xamarin.com/android/tutorials/User_Interface/spinner](http://docs.xamarin.com/android/tutorials/User_Interface/spinner) 我收到错误： `Cannot implicitly convert type 'System.EventHandler<Android.Widget.ItemEventArgs>' to 'System.EventHandler<Android.Widget.AdapterView.ItemSelectedEventArgs>' (CS0029)` 在我的 Activity1.cs 的第 26 行。我刚刚从教程中复制了代码，所以我不确定我需要将这一行更改为什么以便我可以运行它。这是我的 Activity1.cs ：

```
using System;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;

namespace HelloSpinner
{
[Activity (Label = "HelloSpinner", MainLauncher = true)]
public class Activity1 : Activity
{
    int count = 1;

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "Main" layout resource
        SetContentView (Resource.Layout.Main);

        Spinner spinner = FindViewById<Spinner> (Resource.Id.spinner);

        spinner.ItemSelected += new EventHandler<ItemEventArgs> (spinner_ItemSelected); 
        var adapter = ArrayAdapter.CreateFromResource (
            this, Resource.Array.planets_array, Android.Resource.Layout.SimpleSpinnerItem);

        adapter.SetDropDownViewResource (Android.Resource.Layout.SimpleSpinnerDropDownItem);
        spinner.Adapter = adapter;
    }

    private void spinner_ItemSelected (object sender, ItemEventArgs e)
    {
        Spinner spinner = (Spinner)sender;

        string toast = string.Format ("The planet is {0}", spinner.GetItemAtPosition (e.Position));
        Toast.MakeText (this, toast, ToastLength.Long).Show ();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:45:40.217

最简单的方法可能是只使用事件声明的委托类型......理想情况下使用更简单的方法组转换语法：

```
spinner.ItemSelected += spinner_ItemSelected; 

...

private void spinner_ItemSelected(object sender, AdapterView.ItemSelectedEventArgs e) 
```

（现在你只需要一个 using 指令`Android.Widget`。）

# google-apps-script - 我可以让我的 UiApp 可拖动吗？

> ID：11126981
> 
> 赞同：1
> 
> 时间：2012-06-20T19:41:26.867
> 
> 标签：google-apps-script

使用 Google Apps 脚本，我制作了一个用于 Google 电子表格的 UI。

调用时，它会出现在电子表格的中心。我想让它可拖动，以便用户可以在必要时将其移开 - 他们可能需要在 UI 处于活动状态时更改单元格选择。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:37:54.490

您应该添加一个标题，然后您可以“按标题”拖动它；-)

例子 ： `app.setTitle("drag me here");`

# javascript - 检测用户何时从下拉列表中选择一个选项

> ID：11126997
> 
> 赞同：0
> 
> 时间：2012-06-20T19:42:59.010
> 
> 标签：javascript, html

我有一个经典的 HTML 选择框：

```
Show:
<select name="show" id="showThreads">
   <option value="all" selected="selected">All</option>
   <option value="new">Only unread</option>
</select> 
```

现在，当用户更改框中的选择（没有 jQuery）时，我需要 JavaScript 来发出 Ajax 请求。我试过了：

*   监听`<option>`标签上的点击，但它不适用于使用键盘或触摸设备的用户
*   每隔一段时间，循环遍历`<option>`标签并检查选定的标签是否发生变化，但即使我只是将鼠标悬停在第二个选项上，它似乎也会触发。

有没有一种适用于所有浏览器/设备的方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:44:36.920

`onChange`在`<select>`标签上听。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T19:45:05.270

试试这个`"change"`事件。

```
document.getElementById("showThreads").onchange = function() {

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:47:34.770

```
function yourAjaxCall(something) {

}

<select name="choice1" size="1" onchange="yourAjaxCall(this);">
    <option value="one">first</option>
    <option value="two">second</option>
    <option value="three">third</option>
</select> 
```