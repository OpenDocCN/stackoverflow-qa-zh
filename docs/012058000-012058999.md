# StackOverflow 问答 12058000-12058999

# php - 尽管权限正确，但 nginx + php 无法 mkdir

> ID：12058006
> 
> 赞同：0
> 
> 时间：2012-08-21T15:12:59.640
> 
> 标签：php, linux, permissions, nginx, mkdir

```
www@srv:/$ ls -lAh /data/
drwxrwxr-x 654 www www  20K Aug 21 00:01 history

ls -lAh /data/history/
drwxrwxrwx    19 www www 4.0K Aug 21 10:58 2012-08-21 
```

所以我有一个目录 2012-08-21 并且权限似乎没问题...

PHP 和 Nginx 都以 www:www 的身份运行...

然而...

```
Warning: mkdir(): Permission denied in /www/sites/mine/shop.php on line 366
string(57) "dir: /data/history/2012-08-21/1104-DAD2974M/" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:46:14.410

如果您确定您的服务器正在运行`www`，那么您需要检查`/data/history/2012-08-21/`. 它可能不允许在其中创建目录。

目录的权限`history`不够审核，还得看下一级。

# vbscript - VB Do While 仅适用于一次迭代

> ID：12058007
> 
> 赞同：3
> 
> 时间：2012-08-21T15:13:04.150
> 
> 标签：vbscript

我以前从未使用 VB 做过任何事情，我正在尝试解决这个脚本的一个小问题。基本上，脚本应该在文件夹中查找所有 jpg，如果文件名已经存在，则将其从目标文件夹中删除，将值添加到表中，然后重命名源文件，使其存在于目标文件夹中。

该脚本在一定程度上起作用，例如，如果文件不存在，它将重命名任何文件，但对于已经存在的任何文件，它只处理一个然后结束。我可以多次运行它以清除其余部分，但宁愿它一次将它们全部清除。我已经做了很多阅读，但看不出哪里出了问题。任何人都可以对此有所了解吗？

```
Public Function GetLPUFileAddress()

Dim strSourceFolder As String
Dim strFile As String
Dim strTargetFolder As String

Dim dbs As DAO.Database
Dim rstMgr As DAO.Recordset

strSourceFolder = "C:\Users\Images\LPU-HOLDING\"
strFile = Dir(strSourceFolder & "*.JPG")
strTargetFolder = "C:\Users\Images\LPU\"

Do While strFile <> ""
    If Dir(strTargetFolder & strFile) <> "" Then Kill strTargetFolder & strFile
    CurrentDb.Execute "INSERT INTO TBL_LPU ( File_Name, Import_Date ) VALUES ('" & strFile & "',Date())"
    Name strSourceFolder & strFile As strTargetFolder & strFile
    strFile = Dir
Loop

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:19:53.020

通过使用适当的过滤器调用`Dir()`函数，例如`"C:\Users\Images\LPU\*.JPG"`，您开始枚举并获取第一个文件名。
之后，在`Dir()`不带任何参数的情况下重复调用该函数，您将获得所有`*.JPG`文件名，每次调用一个。
如果您在任何时候`Dir()`使用参数调用，这将重置当前枚举并开始一个新枚举。

因此`Dir()`，当您使用`Dir()`. 这将重置枚举。

您必须使用[其他方法](http://msdn.microsoft.com/en-us/library/aa242706(v=vs.60).aspx)来[检查文件的存在性](http://msdn.microsoft.com/en-us/library/aa265024(v=vs.60))，或者只是尝试在不检查的情况下杀死它，而[忽略错误](https://stackoverflow.com/questions/2202869/what-does-the-on-error-resume-next-statement-do)。

# java - Struts2 jsp中的HTML引用转义

> ID：12058009
> 
> 赞同：2
> 
> 时间：2012-08-21T15:13:11.693
> 
> 标签：java, html, jsp, struts2, escaping

我当前的设置是将用户输入保存为 xml 格式并使用 `<s:property>`标签显示它。

一切正常，除了单引号，双引号，数据存储在xml中

```
&amp;amp;amp;quot; 
```

当我使用属性标签将其拉出时，它没有转换回`"`

我该如何克服呢？这是存储数据或显示的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:48:25.223

[Struts2 属性标签](http://struts.apache.org/docs/property.html)

```
<s:property value="%{yourValue}" escape="false"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:01:34.127

这可能是存储的数据以及标签显示的数据的问题。我建议您首先检查存储在数据库中的数据，看看是否以应有的方式存储，如果这是正确存储它可能是属性标签显示方式的问题。

Struts2 属性标签定义了一些关于 HTML、XML 和 JS 的属性，这些属性告诉标签天气是否在渲染数据时转义它们，很少有值被设置为 true，很少设置为 false，您需要根据您的要求设置它们将信息传递给标记渲染类。

```
escape  false   true
escapeCsv   false   false
escapeHtml  false   true
escapeXml   false   false 
```

为了更好地理解，请参阅更详细描述它的官方文档 [属性标签](http://struts.apache.org/docs/property.html)

# asp.net - ASP.Net 4.5 OAuth 失败并返回 400 响应，开箱即用

> ID：12058010
> 
> 赞同：1
> 
> 时间：2012-08-21T15:13:13.537
> 
> 标签：asp.net, dotnetopenauth, visual-studio-2012

我启动了 VS 2012 并使用 oAuth 模板创建了一个新网站，并使用 Facebook 创建了一个应用程序来测试它。我修改了 AuthConfig.cs 以包含应用程序 ID 和应用程序密码，但我的登录测试返回了 400 响应，可能来自 Facebook 的服务器。

这是我在 Facebook 上的应用配置： ![在此处输入图像描述](../Images/6ee3d1df9b2cf61d3876831fed1b77f1.png)

这是发生 400 响应的行：

```
var authResult = OpenAuth.VerifyAuthentication(redirectUrl); 
```

就像我说的，我已经修改了 AuthConfig.cs 中的两行，但没有别的。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:42:16.037

Urg...我在应用程序秘密中有一个领先的空间。当您直接从页面复制和粘贴时，可能会发生这种情况。无论如何，我删除了空间，然后它就消失了。

# python - 反向树构建（具有奇数个孩子）

> ID：12058011
> 
> 赞同：8
> 
> 时间：2012-08-21T15:13:18.027
> 
> 标签：python, algorithm, hash, amazon-web-services, hashtree

我刚刚发现了 AWS Glacier 服务，并想编写一个*小型*Python 应用程序来通过 REST API 上传文件。我查看了所需的标题并偶然发现了`x-amz-sha256-tree-hash`. 我需要计算整个文件的 SHA-256 哈希值以及每个 1 MB 块的所有哈希值的父级哈希值。这导致以下树：

![AWS 的 SHA-256 树散列程序](../Images/79cfc16a7bf1f30bf3fe371a81d43c5c.png)

（图片取自[这里](http://docs.amazonwebservices.com/amazonglacier/latest/dev/checksum-calculations.html)）

我已经制作了一个读取 1 MB 块的函数和一个即时计算其哈希值的类，但后来我完全挣扎：

在我的应用程序中，我创建了一个名为的类`chunk`，它获取数据并计算`__init__`方法中的哈希值，并保存父项和子项（如常规树）。当用户打开一个文件时，这些块实例将使用它们各自的哈希正确生成（在这个例子中，这将是 7 个块实例）。

现在我有两个相互关联的大问题：

1.  如何反向构建这棵树？我基本上需要为最低层上的每两个块实例创建一个新块，并根据这两个散列计算一个散列。但是我在哪里存储那个父母？在父母的孩子和做反向树行走？
2.  这如何处理奇数个孩子？如果我有一个遍历每个父层的算法，那么我会错过最后一个（0.5 MB）块。

我在 SO 上查看了[这个主题](https://stackoverflow.com/questions/3395780/recursive-pedigree-tree-building-from-child-parent-list-in-python)，但该方法仅适用于偶数儿童计数，这并不总是给出。

你能帮我找到解决这个问题的方法/算法/方法吗？

提前致谢！

保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:37:15.960

先计算层数，然后

```
def proclevel(levels):
    if levels > 0:
        generator = proclevel(levels - 1)
        temp = None
        for firsthash, secondhash in generator:
            if not temp: temp = hashofthem(firsthash, secondhash)
            else: yield temp, hashofthem(firsthash, secondhash); temp = None
        #If odd number of packets
        if temp: yield temp, None
    else:
        temp = None
        for chunk in chunks:
            if not temp: temp = hash(chunk)
            else: yield temp, hash(chunk); temp = None
        if temp: yield temp, None 
```

**确保将 None 作为 hashofthem 中的第二个参数处理 :)**

# python - 使用更宽键的 MongoDB 搜索

> ID：12058012
> 
> 赞同：0
> 
> 时间：2012-08-21T15:13:19.080
> 
> 标签：python, mongodb

不确定 mongo 是否是这里最好的解决方案，或者这是否可能：

我有一个文件：

```
{
  u'action': [
    {
       u'url': u'http://foo.com',
       u'payload': {
         u'action': u'EndCall'
       }, 
       u'timer': 0
    },
    {
       u'url': u'http://foo.com', 
       u'payload': {
         u'action': u'EndCall'
       },
       u'timer': 0
    }
  ],
  u'pattern': {u'c': 3, u'b': 2, u'd': 4}
} 
```

它实际上是一个键/值对，其中模式是键，动作是值，

现在说，当我使用包含模式以及其他一些值（未知且不相关）的字符串进行搜索时，我想检索此值/文档

例如我上面应该匹配的搜索字符串是：

```
query = {"a": 1, "b" : 2, "c" : 3, "d" : 4, "e" : 5 } 
```

所以这中间部分匹配模式值，但我不知道我可以删除哪些值以获得完全匹配（例如 a & e）

该应用程序是用 Python 编写的，因为我目前正在 Mongo 中尝试这个，但很高兴探索任何其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:21:24.303

关于我能想到做你想做的事情的唯一方法是使查询成为一系列 OR 选项，如下所示：

```
db.foo.find( { $or : [ { "a" : 1 } , { "b" : 2 }, { "c" : 3 }, { "d" : 4 }, { "e" : 5 } ] } ) 
```

这应该有效，因为看起来您实际上是在“模式”节点的任何部分中寻找这些值中的任何一个。

# actionscript-3 - 使用 actionscript 上传预选文件

> ID：12058013
> 
> 赞同：0
> 
> 时间：2012-08-21T15:13:20.353
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flash-builder

我正在创建一个 Photoshop 扩展，我需要在其中保存人们正在处理的文件并将其上传到服务器。所以我希望扩展能够自动选择当前文件并将其上传到我的服务器。

问题是我不知道如何为人们预先选择文件。到目前为止，这是我的代码：

```
 var app:Application = Photoshop.app;

        var doc:Document = app.documents.add();
        doc.selection.selectAll();

        var color:RGBColor = new RGBColor();
        color.red = 0;
        color.green = 0;
        color.blue = 255;

        doc.selection.fill(color);
        var saveOptions:JPEGSaveOptions = new JPEGSaveOptions();
        //Add other PDF save options here.
        doc.saveAs(File.applicationStorageDirectory, saveOptions);

        var jsonOBJ:Object = {};
        jsonOBJ.option = "iphone";
        jsonOBJ.title = "c";
        jsonOBJ.description = "s";
        jsonOBJ.app_store_url = "iphone";
        jsonOBJ.tags = "c";
        jsonOBJ.temp_number = 1;

        var _service:HTTPService = new HTTPService();
        _service.url = "http://localhost:3000/designs";
        _service.method = "POST";
        _service.contentType = "application/json";
        _service.resultFormat = "text";
        _service.useProxy = false;
        _service.makeObjectsBindable = true;
        _service.addEventListener(FaultEvent.FAULT,faultRX);
        _service.addEventListener(ResultEvent.RESULT,resultRX);
        _service.showBusyCursor = true;
        _service.send( JSON.encode( jsonOBJ ) );

        function resultRX():void
        {
            trace(ResultEvent.RESULT);
        }
        function faultRX():void
        {
            trace(FaultEvent.FAULT);
        }

        var file:FileReference;  
        var filefilters:Array;  
        var req:URLRequest;

        filefilters = [ new FileFilter('Images', '*.jpg') ]; // add other file filters  
        file.browse(filefilters); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:03:42.947

这是一个 Photoshop 扩展。我最终使用了 FileReference 并链接到该文件。有效。我不知道如何实际上传图像。当我使用 file.upload(requestUrl) 时，它会发送错误的内容类型。——</p>

# linux - SFTP 因“匹配组”子句而失败

> ID：12058016
> 
> 赞同：7
> 
> 时间：2012-08-21T15:13:25.440
> 
> 标签：linux, ubuntu, ssh, ftp, sftp

我正在尝试在 EC2 上的 ubuntu/precise 上设置 sftp 服务器。我已经成功添加了一个可以通过 ssh 连接的新用户，但是一旦我添加了以下子句：

```
Match Group sftp
    ChrootDirectory /home/%u
    AllowTCPForwarding no
    X11Forwarding no
    ForceCommand internal-sftp 
```

我无法再连接（无论是 ssh 还是其他方式），我收到了消息

```
Error: Connection refused
Error: Could not connect to server 
```

我能够将子系统设置为：

```
#Subsystem sftp /usr/lib/openssh/sftp-server
Subsystem sftp internal-sftp 
```

知道为什么 ssh 服务器会因这个“匹配”子句而失败吗？本质上，除了“chroot”部分之外，一切都在工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:23:33.033

好的，解决了问题：

2 件事导致了问题

1.  我不得不将“匹配”子句移到文件的末尾，它在中间
2.  存在权限问题 - 在其他地方找到了修复它的答案

来自：[https ://askubuntu.com/questions/134425/how-can-i-chroot-sftp-only-ssh-users-into-their-homes](https://askubuntu.com/questions/134425/how-can-i-chroot-sftp-only-ssh-users-into-their-homes)

“所有这些痛苦都是由于这里详述的几个安全问题。基本上 chroot 目录必须由 root 拥有，并且不能是任何组写入访问权限。可爱。所以你基本上需要把你的 chroot 变成一个容纳单元和在其中，您可以拥有可编辑的内容。

```
sudo chown root /home/bob
sudo chmod go-w /home/bob
sudo mkdir /home/bob/writable
sudo chown bob:sftponly /home/bob/writable
sudo chmod ug+rwX /home/bob/writable 
```

而且 bam，你可以登录并写入 /writable。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:24:17.243

确保 /home 和 /home/%u 被改写为 root:root。

# oracle - 在 sqlplus 中执行时将 plsql 错误消息重定向到日志文件

> ID：12058020
> 
> 赞同：3
> 
> 时间：2012-08-21T15:13:30.277
> 
> 标签：oracle, logging, plsql, sqlplus, ksh

在 sqlplus 中执行时，需要一种将 PL/SQL 程序错误消息重定向到日志文件的方法。

假设 PL/SQL 程序被命名`send_2012.sql`并且它具有以下异常块

```
EXCEPTION
        WHEN NO_DATA_FOUND
        THEN
                var_err := 'Data not found. ';
        WHEN OTHERS
        THEN
                var_err := 'Error in '
                        || $$plsql_unit
                        || ' | '
                        || SQLERRM
                        || ' | '
                        || 'Details: '
                        || DBMS_UTILITY.format_error_backtrace;
END; 
```

要在 KornShell (ksh) 脚本中运行 PL/SQL 程序，我有：

```
sqlplus some_username/'some_password' @some_database \
            @/some/directory/send_2012.sql \
            $parameter1 $paramenter2 
```

假设执行时发生错误`send_2012.sql`，如何将错误消息从 var_err 重定向到`/some/log/directory/log_send_2012.txt`？

非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:16:05.450

像这样设置你的脚本：

```
-- test.sql script run from sqlplus
set serveroutput on
set echo on
WHENEVER SQLERROR EXIT SQL.SQLCODE
spool on
spool test.log

declare
  l_val date;
begin
  select sysdate into l_val from dual where 1=0;
exception
  when others then raise;
end;
/

spool off 
```

从该目录登录到 sqlplus 并运行：

```
SQL>@test.sql 
```

您将在日志文件 (test.log) 中找到异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:06:26.953

我解决了日志记录问题，这是我所做的：

在我插入`DBMS_PUTLINE("error messages goes here, etc");`到程序主体和异常部分的 pl/sql 程序中。

从 Korn shell 脚本调用 sqlplus 时，我使用常规输出重定向来记录 pl/sql 异常：

```
sqlplus some_username/'some_password' @some_database \
            @/some/directory/send_2012.sql \
            $parameter1 $paramenter2 \
            > /some/log/directory/send_2012.log 
```

我所做的可能不是最好的解决方案。在您的 pl/sql 程序之前和之后换`Spool`行可能会为您提供更多格式化选项，但它也可能包括`select`系统成功执行程序时的输出结果（例如来自语句）。

# node.js - 天蓝色上的 rail.js 节点网站返回错误并且不记录

> ID：12058022
> 
> 赞同：0
> 
> 时间：2012-08-21T15:13:31.867
> 
> 标签：node.js, azure, railway.js

尝试在 azure 上运行 rail.js 节点应用程序时出现 iisnode 错误 500。不幸的是，LogFiles/nodejs 和 wwwroot/server.js.logs 中的日志文件中没有任何内容

这是回复

```
iisnode encountered an error when processing the request.

HRESULT: 0x2
HTTP status: 500
HTTP reason: Internal Server Error
You are receiving this HTTP 200 response because system.webServer/iisnode/@devErrorsEnabled configuration setting is 'true'.

In addition to the log of stdout and stderr of the node.exe process, consider using debugging and ETW traces to further diagnose the problem.

The node.exe process has not written any information to the stdout or stderr. 
```

该应用程序在本地运行良好，我还可以将 vanilla hello world 节点应用程序（不是 rail.js 应用程序）部署到 Azure。如何获得有关错误的更多信息，无论如何我可以看到控制台输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:59:08.847

重启确实解决了这个问题。看起来它可能与您用于会话缓存的机制有关，因为默认值与在多个实例下运行不兼容。

要打开日志记录，请确保您在 iisnode.yml 文件中有 loggingEnabled: true，然后您应该能够下载日志

# arrays - J Tally的误区(#)

> ID：12058028
> 
> 赞同：3
> 
> 时间：2012-08-21T15:13:59.103
> 
> 标签：arrays, rank, j

在 J 中，要找到可以使用 # 的元素数对吗？

例如

```
# 2 3 4 5 6
5 
```

好的。那么多维数组呢

```
b=: 2 3 4 $ i.2

   b
0 1 0 1
0 1 0 1
0 1 0 1

0 1 0 1
0 1 0 1
0 1 0 1 
```

这里#b 是2。我猜是因为第一个维度的长度为2。即数组的框架。

所以如果我稍微改变一下：

```
b=:3 2 4 $ i.2
   b
0 1 0 1
0 1 0 1

0 1 0 1
0 1 0 1

0 1 0 1
0 1 0 1 
```

这有 3，因为前导维度的长度为 3，对吗？

但我无法解释这一点：

```
#\b
1 2 3 
```

我通过 b 的元素进行计数。所以我认为每个 2x4 子数组都会被使用，我希望 #\b 给

```
2 2 2 
```

因为：

```
c=:2 4 $i.2
   c
0 1 0 1
0 1 0 1
   #c
2 
```

所以我的问题是，为什么#\b = 1 2 3？我认为这与动词等级有关，对吗？我正在努力理解这个话题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:52:32.673

查看发生了什么的最简单方法是将`<`您的`\b`：

```
 <\b
┌───────┬───────┬───────┐
│0 1 0 1│0 1 0 1│0 1 0 1│
│0 1 0 1│0 1 0 1│0 1 0 1│
│       │       │       │
│       │0 1 0 1│0 1 0 1│
│       │0 1 0 1│0 1 0 1│
│       │       │       │
│       │       │0 1 0 1│
│       │       │0 1 0 1│
└───────┴───────┴───────┘ 
```

`u\y`适用`u`于`y`的前缀：

```
<\1 2 3
┌─┬───┬─────┐
│1│1 2│1 2 3│
└─┴───┴─────┘
#\1 2 3
1 2 3
*/\1 2 3
1 2 6 
```

因此，`#\b`为您提供每个`b`' 前缀的项目数。

你可能认为你会得到的是 b 的 2 秩项数：

```
#"2 b
2 2 2
<"2 b
┌───────┬───────┬───────┐
│0 1 0 1│0 1 0 1│0 1 0 1│
│0 1 0 1│0 1 0 1│0 1 0 1│
└───────┴───────┴───────┘ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:54:23.293

要获取多维数组中 rank-0 项的计数，请执行以下操作：

```
 rank_0s =: */&$
   wild1 =: 2 3 4 $ 'abcdefghijklmnopqrstuvwxyz'

   rank_0s wild1
24 
```

# android - 将图片从 sdcard 加载到 html 中

> ID：12058037
> 
> 赞同：0
> 
> 时间：2012-08-21T15:14:41.617
> 
> 标签：android, html, image

嗨，我已经实现了一个 android web 服务器，并且我正在根据请求的 uri 即时提供 html 页面。

当我尝试从我的 sdcard 中包含图像时，它们没有显示在 html 页面上。我在清单中有必要的权限。我试过环顾四周，但大多数示例都涉及 webview 中的图像。我正在使用以下代码获取 sdcard 上 .png 文件的路径。

```
String file_icon=Environment.getExternalStorageDirectory().getAbsolutePath()+"/file_icon.png";
String folder_icon=Environment.getExternalStorageDirectory().getAbsolutePath()+"/folder_icon.png"; 
```

我正在使用以下内容写入输出流

```
writer.write("<tr><td><input type=\"checkbox\" name=\""+files.toString()+"\" value=\"file\"/></td><td><a href=\"\"><img src=\""+file_icon+"\"/>"+files.toString()+"</a></tr>");
writer.write("<tr><td><input type=\"checkbox\" name=\""+files.toString()+"\" value=\"file\"/></td><td><a href=\"\"><img src=\""+folder_icon+"\"/>"+files.toString()+"</a></tr>"); 
```

当我启动模拟器并访问该页面时，我看不到任何图像。 [屏幕 http://img820.imageshack.us/img820/7973/capturekuw.png](http://img820.imageshack.us/img820/7973/capturekuw.png)

任何正确方向的想法或指示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:19:59.200

环顾四周后，我发现我需要实现一个 ContentProvider 并覆盖 openFile() 方法。 [http://www.techjini.com/blog/2009/01/10/android-tip-1-contentprovider-accessing-local-file-system-from-webview-showing-image-in-webview-using-content/](http://www.techjini.com/blog/2009/01/10/android-tip-1-contentprovider-accessing-local-file-system-from-webview-showing-image-in-webview-using-content/)

# php - Mac OS X 创建 zip 文件的权限

> ID：12058038
> 
> 赞同：3
> 
> 时间：2012-08-21T15:14:42.147
> 
> 标签：php, macos, permissions, apache2

在互联网上搜索找到答案后，我决定直接寻求帮助。

我正在运行 mac os x 10.7、PHP、Apache 和 MySQL。我试图让用户从表单中选择文件，然后将它们压缩并发送给个人。起初 PHP 甚至无法创建文件。我发现了以下内容：

```
sudo chmod -R +a "_www allow read,write,append,readattr,writeattr,readextattr,writeextattr,readsecurity,file_inherit,directory_inherit" ~/Sites 
```

这让我可以创建一个文件。但是当我尝试创建一个 zip 时，我在末尾附加了一些未知的扩展名，并且正在创建 2 个文件。所以不知道出了什么问题，我以为我可以通过打开目录并将其强制重命名回 *.zip 来找到该文件。我在手动重命名后检查了文件，似乎没问题。

我收到以下错误：

```
Warning: rename(tmp/RosenData082112-1102.zip.ohoKRw,RosenData082112-1102.zip) [function.rename]: Permission denied in /Users/mmcri/Sites/rosenlab/download.php on line 42

ls -le reveals this to the files:
-rw-------+ 1 _www  staff  43775 Aug 21 11:02 RosenData082112-1102.zip.1qJUE4
 0: user:_www inherited allow read,write,append,readattr,writeattr,readextattr,writeextattr,readsecurity
-rw-------+ 1 _www  staff  43775 Aug 21 11:02 RosenData082112-1102.zip.ohoKRw
 0: user:_www inherited allow read,write,append,readattr,writeattr,readextattr,writeextattr,readsecurity 
```

这是制作 zip 文件的 PHP 代码部分：

```
if(extension_loaded('zip'))
{ 
   $zip = new ZipArchive();
   $zipname = "RosenData".date("mdy-Hi").".zip";

   if($zip->open($direct.$zipname, ZIPARCHIVE::CREATE) === TRUE)
   {
       foreach($filelist as $file)
            $zip->addFile($path.$file,$file) or die ("Error adding file: $file");
       $zip->close();
}
 // Random stuff below
} 
```

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-22T23:56:06.050

您是否有权在 Mac 中的该文件夹上写入？

尝试使用 fopen 而不是 ZipArchive。

# javascript - d3.js 脚本的单独 CSS

> ID：12058039
> 
> 赞同：3
> 
> 时间：2012-08-21T15:14:46.280
> 
> 标签：javascript, css, html, svg, d3.js

我有一个带有 HTML5 doctype: 的 HTML 文档`<!DOCTYPE html>`，其中我链接了一个用于 d3.js 图形的专用 CSS 文件以及一个用于使用 d3.js 绘制图形的单独 .js 脚本。

例如：

```
<head>
    ...
    <link type="text/css" href="./graph.css" rel="stylesheet"/>
</head>
<body>
    ...
    <div class="graph">
        <script type="text/javascript" src="./graph1.js"></script>
    </div>
    ...
</body> 
```

在内部`graph1.js`，我使用来自`graph.css`.

*现在，如果我在没有*doctype 的情况下渲染 HTML 文件，则在浏览器中使用`graph.css`. 但是，一旦我添加了 doctype，它就无法应用 CSS 文件中的任何样式。

我想知道这个问题的原因是什么，以及如何在不将样式从 CSS 文件移回 d3.js 代码中的情况下解决它`graph1.js`。谢谢！

# html - 在较小的容器中垂直对齐图像

> ID：12058040
> 
> 赞同：1
> 
> 时间：2012-08-21T15:14:46.630
> 
> 标签：html, css, dom, width

我有一个 100 像素 x 100 像素的容器。我在其中放了一张我不知道尺寸的图像，除了我将宽度设置为 100px 的事实。我想在 CSS 中找到一种方法来垂直对齐这个图像在它的容器中间。我把溢出卡住了：隐藏在容器上，以防止它显示广场外的任何东西。

我在这里找到了一些关于如何做相反的事情（宽度，而不是高度）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:25:48.343

将图像包裹在两个 div 中，这将模拟一个 html 表格。外部 div 将具有`display: table`属性，而内部 div 将具有`display: table-cell`属性。您可以将`vertical-align`内部 div 的属性设置为顶部、中间或底部。

HTML：

```
<div class="table">
    <div class="table-cell middle">
        <img src="https://www.google.ca/images/srpr/logo3w.png" alt="" />
    </div>
</div>​ 
```

CSS：

```
.table {
    display: table;
    width: 100px;
    height: 100px;
    border: 1px solid blue;
}
.table-cell {
    display: table-cell;
}
.middle {
    vertical-align: middle;
}
img {
    width: 100%;
    outline: 1px solid red;
} 
```

[这是小提琴。](http://jsfiddle.net/JnESs/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:28:11.527

您需要知道图像的高度才能垂直对齐它，然后使用这个 CSS：

```
div {
    position:relative;
    overflow:hidden;
}

div img {
    position:absolute;
    top:50%;
    margin-top:-XXXpx /*(where XXX px is half the height of the image)*/
} 
```

# ruby-on-rails - FactoryGirl 和递归模型

> ID：12058041
> 
> 赞同：0
> 
> 时间：2012-08-21T15:14:54.550
> 
> 标签：ruby-on-rails, factory-bot

我无法弄清楚如何使用引用父类的 has_many/belongs_to 关系为我的类设置工厂。它设置如下。

```
class PrivateMessage < ActiveRecord::Base
  attr_accessible :body, :read_at, :title, :receiver_id, :sender_id, :conversation_id
  belongs_to :sender, class_name: 'Profile', foreign_key: 'sender_id'
  belongs_to :receiver, class_name: 'Profile', foreign_key: 'receiver_id'
  belongs_to :conversation, :class_name => 'PrivateMessage'  # Reference to parent message
  has_many :replies,  :class_name => 'PrivateMessage', :foreign_key => 'conversation_id',
    order: 'created_at DESC' 
```

我不知道如何处理这个问题，或者在这种情况下我是否应该使用工厂。在我的控制器中，如果 conversation_id 通常为 nil，我会创建一条消息（使用 profile.sent_messages.build），否则如果发送方/接收方之间有任何消息，我会引用父消息，并使用 parent_message.replies.build 构建它.

我想我需要某种带有 after_build 钩子的嵌套工厂，但我不能完全理解如何去做。像这样的东西？我在上面定义私人消息的地方。这显然是错误的，但我在正确的轨道上吗？如何使用 after_build 块引用父消息？

```
factory :private_message do
  sequence(:body) { |n| "This is a body of a message :) #{n}" }
  association :sender
  association :receiver
end  

factory :reply do
  association :private_message
  sequence(:body) { |n| "This is the body of a reply #{n}" }
  association :sender
  association :receiver
  after_build do |private_message|
    private_message.replies << :reply
  end  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:59:24.547

如果我理解这个问题...

这样的事情有意义吗？

```
factory :private_message do
  sequence(:body) { |n| "This is a body of a message :) #{n}" }
  association :sender
  association :receiver

  factory :reply do
    sequence(:body) { |n| "This is the body of a reply #{n}" }
    association :conversation
  end
end 
```

你可能会让你的生活更容易将对话分成一个单独的模型......

# post - 使用一些简单的参数和一个数组发布请求

> ID：12058046
> 
> 赞同：0
> 
> 时间：2012-08-21T15:15:07.980
> 
> 标签：post, curl

如何使用 curl 创建具有以下参数的 POST 请求？

```
"person_id"
"address_data" : <ADDRESS> // look below what <ADDRESS> is

<ADDRESS>:
Array(
    street
    city
    zip_code
) 
```

我的问题是如何将这个应该是数组的 address_data 放入请求中。

```
curl.exe -d "module=website_api&action=add_addresses&person_id=123&address_data=XXXX>" MY_URL_HERE 
```

我不知道该放什么来代替 XXXX。

# javascript - jQuery.calendarPicker 日期格式

> ID：12058050
> 
> 赞同：0
> 
> 时间：2012-08-21T15:15:31.573
> 
> 标签：javascript, jquery, date

我正在尝试使用以下代码在我的网站上使用[jQuery.calendarPicker ：](http://bugsvoice.com/applications/bugsVoice/site/test/calendarPickerDemo.jsp)

```
<script type="text/javascript">
var calendarPicker2 = $("#wedding_date_picker").calendarPicker({
  showDayArrows: false,
  callback:function(cal) {
    console.log(cal.currentDate);
  }
});
</script> 
```

我已经设法开始工作，并且正在记录以下内容：

```
Date {Wed Aug 21 2013 16:12:19 GMT+0100 (GMT Daylight Time)} 
```

然而，我现在想要做的是在我将其格式化为 yyyy-mm-dd 之后，获取这个日期并将其插入隐藏的输入字段......问题是我不知道如何进行格式化。

有人可以帮忙吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:22:26.883

来自 jquery UI 手册：

```
//setter
$( ".selector" ).datepicker( "option", "dateFormat", "yy-mm-dd" ); 
```

[http://jqueryui.com/demos/datepicker/#option-dateFormat](http://jqueryui.com/demos/datepicker/#option-dateFormat)

可以在此处找到可用日期格式的完整列表：http: [//docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:20:34.033

您可以像这样使用 JS 函数`Date.format`：

```
var formattedDate = cal.currentDate.format("yyyy-mm-dd"); 
```

# android - Iphone 和 Android 移动开发 - 入门

> ID：12058054
> 
> 赞同：0
> 
> 时间：2012-08-21T15:15:38.077
> 
> 标签：android, iphone, mobile

我是 ASP.NET、C# 的 Web 开发人员，并希望开始一些移动开发。我知道 Apple 使用 Objective C 而 Android 使用 Java，有没有办法为这两个平台创建应用程序，还是我需要购买 Mac 和一些关于 Objective C 和 Java 的书籍？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:21:19.887

您可以使用[http://phonegap.com/](http://phonegap.com/)或[http://www.appcelerator.com/platform](http://www.appcelerator.com/platform)编写跨平台应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:20:22.253

传闻 Delphi XE3（即将推出）可以编译到 Apple、Android、Windows 8 等。所以，如果你能坚持久一点，那应该很好！

现在，您最好使用 mac（带有 XCode）为 IOS 或 OSX 编程，因为 Apple 非常特别，您需要设备、项目、开发和分发等证书等。

Android 我相信您可以多玩一些，但目前它是 2 种不同的语言。查看开发中心： [https](https://developer.apple.com) ://developer.apple.com developer.android.com/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:20:28.103

有多种方法可以为这两个平台创建应用程序，尤其是如果您了解 Web 技术：[PhoneGap](http://phonegap.com/)等。

但是就像[文档中指定的那样](https://build.phonegap.com/docs/ios-builds)，如果你想构建到 iOS，你很可能需要一个实际的 mac

虽然有[变通办法](http://nickalchemist.wordpress.com/iapproach-mobile-development-made-elegant/deploying-to-iphone-without-a-mac-with-an-apple-developer-account-and-phonegap-build/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:23:09.317

您可以使用[PhoneGap](http://phonegap.com)或[Appcelerator](http://www.appcelerator.com/platform)。不过，我自己还没有尝试过。但是使用这些工具，您可以为 Android 和 iOS 构建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T15:23:31.083

由于您是 .Net、C# 开发人员，我建议您使用 Mono for Android，它会带来成本，但会节省您的时间并且易于部署 [http://xamarin.com/monoforandroid](http://xamarin.com/monoforandroid)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T15:43:09.110

真正实现跨平台的最佳方式是为 Web 开发。正如 Peter 提到的，除了 PhoneGap 和 Titanium 之外，我还会在您考虑开发策略时将其包括在内。您无法访问核心操作系统功能，但一直在改进（请参阅[http://mobilehtml5.org/](http://mobilehtml5.org/)）。这是否可行取决于您要完成的工作。

# android - Ksoap2 ClassCastException

> ID：12058055
> 
> 赞同：1
> 
> 时间：2012-08-21T15:15:45.300
> 
> 标签：android, ksoap2, android-ksoap2, ksoap

您好我正在尝试构建一个从网络服务检索数据的应用程序。我正在使用 KSOAP2 从 Web 服务获取数据。数据从 Web 服务传入 arraylist。进入数组列表..

下面是代码

```
class NetworkConnectTask extends AsyncTask<String, Void, ViewSchedule> {

    @Override
    protected void onPreExecute() {

        super.onPreExecute();
    }

    protected ViewSchedule doInBackground(String... urls) {
        try
        {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("username",username);
            request.addProperty("startdate",currentDateString);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION,envelope);
            Object result = envelope.getResponse();

            ArrayList<String> recivedlistItems = new ArrayList<String>();
            recivedlistItems=(ArrayList<String>) result; // exception caught here

            if(!recivedlistItems.isEmpty())
            {

                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        addItems("some crap");

                    }
                });
            }
            else
            {
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        addItems("No bookings");

                    }
                });
            }
        }
        catch (Exception e)
        {
            System.out.println("error");
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(LoginScreen feed) {

    } 
```

这是我的wsdl（网络服务）的代码

```
public synchronized ArrayList<String> View(String username, String startdate ) {

    System.out.println("\n entered the method");

    try {
        /* Create object of the Connect class */

        Connect connect = new Connect();
        /*
         * calling the Connection method of Connect class to establish a
         * database connection
         */
        Connection conn = connect.Connection();

        java.sql.PreparedStatement preparedStatement = null;
        /* Creating a query to be executed with prepared statement */
        String query = "select title,startdate,enddate from bookinginformation where username=? and startdate=?";

        preparedStatement = conn.prepareStatement(query);
        preparedStatement.setString(1, username);
        preparedStatement.setString(2, startdate);
        // stmt.executeUpdate(query);

        ResultSet rs = preparedStatement.executeQuery();

        boolean empty = true;
        while (rs.next()) {
            empty = false;
            String title =rs.getString(1);
            String S_date=rs.getString(2);
            String e_date=rs.getString(2);
            StringBuilder sb=new StringBuilder();
            String temp="";
            temp = sb.append(title).append("-").append(S_date).append("-")
                    .append(e_date).toString();
            listItems.add(temp);
            System.err.println("\n added  \n");
        }

        if (empty) {
            System.out.println("\n no data");
            //return "false";
        }
        rs.close();
        conn.close();

    } catch (Exception e) {
        e.printStackTrace();
        System.err.println("Cannot connect to database server");
        System.exit(0);
    }
    return listItems;

} 
```

下面是错误

```
java.lang.ClassCastException: org.ksoap2.serialization.SoapPrimitive
at com.example.androidfrontend.ViewSchedule$NetworkConnectTask.doInBackground(ViewSchedule.java:162)
at com.example.androidfrontend.ViewSchedule$NetworkConnectTask.doInBackground(ViewSchedule.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:22:23.580

```
recivedlistItems=(ArrayList<String>) result; // wrong code 
```

`result`是一个`Object`，你正试图投进一个`String`。因此例外。

试试这个代码。

```
 SoapObject result = (SoapObject) envelope.getResponse(); 
            int childCount = result.getPropertyCount();

            int i;
            for (i = 0; i < childCount; i++) {
                recivedlistItems.add(result.getProperty(i).toString()); //**edited** after Srikanth pointed it out
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:18:21.667

我不知道返回什么`envelope.getResponse();`，但我看到你将它存储在一个`Object`.

然后，您尝试将其转换为`ArrayList<String>`. 那是行不通的，Object 不是 ArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:47:13.383

对 Swayam 的代码稍作改动对我有用..

```
SoapObject result=(SoapObject)envelope.bodyIn;
            int childCount = result.getPropertyCount();

            int i;
            for (i = 0; i < childCount; i++) {
                String temp= result.getProperty(i).toString();
                recivedlistItems.add(temp);
            } 
```

# ms-access - 在 ACCESS 中替换功能

> ID：12058058
> 
> 赞同：2
> 
> 时间：2012-08-21T15:15:51.120
> 
> 标签：ms-access

我是 MS ACCESS 的初学者。我需要加入两个表：table_A 和 table_B。由于我想使用替换功能，但它不起作用。我的愚蠢代码是：

```
UPDATE table_A
INNER JOIN table_B
SET table_A.name = table_B.name
ON table_A.age = Replace(table_B.age, "years-old","") 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:32:00.563

`SET`您必须在子句之前完全定义数据源。所以将`ON`条件上移一行：

```
UPDATE table_A
INNER JOIN table_B
ON table_A.age = Replace(table_B.age, "years-old","")
SET table_A.name = table_B.name 
```

然而，这种`ON`表达方式可能很棘手。`ON`Access 查询设计器与包含函数的表达式不能很好地配合。但是如果两者都是文本数据类型 `table_A.age`，则查询可以工作。`table_B.age`

我建议您首先将其作为`SELECT`查询来解决。连接设置并工作后，您可以将其从 a`SELECT`转换为`UPDATE`.

# apache-flex - 从 Flex 打开一封电子邮件，其中填充了电子邮件的正文

> ID：12058063
> 
> 赞同：3
> 
> 时间：2012-08-21T15:16:07.293
> 
> 标签：apache-flex, email, flex4.5

我想设置来自 Flex 的电子邮件，以便当我按下按钮时，它会从默认邮件程序打开一封新邮件。（在大多数情况下，这将是 Outlook）。我有一些使用 mailTo: 的东西，并打开一条填写了收件人电子邮件地址的新消息。我想要的是填充电子邮件的消息部分。我不太关心谁在 to: 行。我只想填充消息部分。

这在 Flex 中可行吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:21:52.907

这是填充电子邮件正文的示例

```
 var mailMsg:URLRequest = new URLRequest('mailto:' + recipients);
 var variables:URLVariables = new URLVariables();               
 variables.subject = mailSubject;
 variables.body = mailBody;
 mailMsg.data = variables;
 mailMsg.method = URLRequestMethod.GET;
 navigateToURL(mailMsg, "_self"); 
```

# apache - 如何使用 Bash 从 Apache 访问日志中计算对文件的访问

> ID：12058067
> 
> 赞同：0
> 
> 时间：2012-08-21T15:16:29.743
> 
> 标签：apache, bash, logging

我`/redir`在网站上有一个目录，其中`.htaccess`文件将各种静态地址重定向到其他地址，以便计算访问特定链接的次数。我想编写一个脚本来帮助计算该数据。

我已经有两个脚本。第一个`access.log.0`在每天凌晨 2:00 左右通过 cron 作业将数据附加到文件中的 log.total 文件中。第二个是一个脚本，可以交互运行以运行生成计数，给定最小和最大日期。

cron 脚本：

```
#!/bin/bash
rm -f log.tmp
grep "GET /redir/.*" access.log.0 | cut -d " " -f4,5,7 > log.tmp
cat log.tmp >> log.total
rm log.tmp 
```

这会生成如下所示的数据：

```
[21/Aug/2012:00:31:27 -0700] /redir/abc.html
[21/Aug/2012:00:31:35 -0700] /redir/def.html
[21/Aug/2012:00:31:35 -0700] /redir/abc.html
[21/Aug/2012:00:31:40 -0700] /redir/ghi.html
[21/Aug/2012:00:31:46 -0700] /redir/123.html
[21/Aug/2012:00:31:58 -0700] /redir/def.html
[21/Aug/2012:00:32:07 -0700] /redir/abc.html
etc... 
```

现在，我想要一个可以运行的脚本，`readLogs.sh "log.total" "1 week ago" "today"`它可以计算从一周前到今天每个文件被访问的次数。

我已经在下面发布了我的脚本，它可以完成这项工作，但是有一些限制，在那里概述了。输出可以是任何可读格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:57:12.660

如果将日期转换为 UNIX 时间戳以进行范围比较，则会更容易。您可以将它们作为第二个字段添加到您的文件中：

```
[21/Aug/2012:00:31:27 -0700] 1345534287 /redir/abc.html 
```

（您可以使用 获取 UNIX 时间戳`date +%s --date "date string"`。我假设您希望保留人类可读的时间戳，但如果您愿意，可以将其替换为时间戳。）

这是一个修改后的脚本，假设您的日志文件已按照建议进行修改；该脚本还使用 bash 参数扩展使其更短：

[更新：修改为在达到结束时间戳后退出。]

```
#!/bin/bash

# :- means to use the RHS if the LHS is null or unset
FILE="${1:-log.total}"  
MINTIME="${2:-1 day ago}"
MAXTIME="${3:-now}"

START=$( date +%s --date "$MINTIME" )
END=$( date +%s --date "$MAXTIME" )

# No need for cut; just have awk print only the field you want
# Field 1 is the date/time
# Field 2 is the timezone
# Field 3 is the timestamp you added
# Field 4 is the path
awk -v start=$START -v end=$END '$3 > end { exit } $3 >= start {print $4}' "$FILE" | \
  sort | uniq -c | sort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:21:12.790

这是我想出的脚本。限制是如果输入的日期没有出现在日志中，它就不能正常工作。例如，如果我输入“1 天前”作为开始日期，但从昨天开始没有访问，它将选择文件的开头作为开始计数的位置。

```
#!/bin/bash

if [ "$1" ]; then
FILE="$1"
else
FILE="log.total"
fi

#if test -t 0; then
#INPUT=`cat $FILE`
#else
#INPUT="$(cat -)"
#fi

if [ "$2" ]; then
MINTIME="$2"
else
MINTIME="1 day ago"
fi

if [ "$3" ]; then
MAXTIME="$3"
else
MAXTIME="now"
fi

START=`grep -m 1 -n $(date --date="$MINTIME" +%d/%b/%Y) "$FILE" | cut -d: -f1`
if [ -z "$START" ]; then
START=0
fi

END=`grep -m 1 -n $(date --date="$MAXTIME" +%d/%b/%Y) "$FILE" | cut -d: -f1`
if [ -z "$END" ]; then
END=`wc "$FILE" | cut -d" " -f3`
fi

awk "NR>=$START && NR<$END {print}" "$FILE" | cut -d" " -f3 | sort | uniq -c | sort 
```

输出如下所示：

```
 1 /redir/123.html
    1 /redir/ghi.html
    2 /redir/def.html
    3 /redir/abc.html 
```

# php - PDO 事务锁？

> ID：12058070
> 
> 赞同：0
> 
> 时间：2012-08-21T15:16:49.043
> 
> 标签：php, mysql, transactions, pdo, innodb

我通过 PHP PDO 接口对 MySQL 事务进行了广泛的研究。我对事务方法的实际后台工作仍然有些模糊。具体来说，我需要知道是否有任何理由要阻止从脚本开头到结尾的事务中的所有查询（包括选择）？当然，处理事务中的任何错误并在需要时回滚它们。

我想知道在事务期间是否有任何锁定，如果有，是否是行级锁定，因为它是 InnoDB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:57:37.430

不要那样做。

这样做的原因是事务利用了[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)一种机制，通过该机制，每条更新的数据实际上都不是就地更新，而只是插入到其他地方。

MVCC 意味着分配内存和/或存储空间来累积和操作您发送的所有更改，而不会将它们提交到磁盘，直到您发出`COMMIT`.

这意味着当您的整个脚本运行时，所有更改都会存储到脚本结束。并且您在事务期间尝试和更改的所有记录都被标记为“正在进行中”，以便其他进程/线程可以知道这些数据很快就会失效。

在整个脚本长度中将某些数据标记为“正在进行中”意味着任何**其他**并发更新都会看到该标志并说“我必须等到这完成，所以我会得到最新的数据”。

这包括`SELECTS`取决于隔离级别。选择标记为“正在进行中”的内容可能不是您想要的，因为您可能想要加入的某些表可能包含已更新的数据，而其他表尚未更新，从而导致脏读。

操作的事务性和原子性是可取的，但代价高昂。在需要的地方使用它。是的，这意味着您需要做更多的工作来确定可能发生竞态条件的位置，即使发生竞态条件，您也必须做出决定，它们是否真的很关键，或者“某些”数据丢失/混合是否可以接受。

您是否希望您的日志、访问计数器和其他统计数据降低整个站点的速度？**或者该**信息的质量是否可以为速度而牺牲（只要它不是分析套装，您就可以承受偶尔的碰撞）。

您是否希望一个座位预订应用程序在座位数为 0 后仍然失败并允许更多用户抢到座位？当然不是——在这里你想利用事务和隔离级别来确保永远不会发生。

# tomcat - 在 tomcat 7.0 服务器上访问 pdf 文件

> ID：12058074
> 
> 赞同：2
> 
> 时间：2012-08-21T15:16:52.400
> 
> 标签：tomcat, pdf, file-handling

如何配置我的服务器以托管可通过以下方式访问的 pdf 文件
`<object data="/uploads/file.pdf">`？我环顾四周，发现我应该向我的服务器添加一个上下文，所以在`<host>`我的 tomcat 的 conf/server.xml 文件中我添加了
`<Context docBase="C:\path_to_file\uploads" path="/uploads" />`. 这在我的 tomcat 6.0 服务器中有效，但现在该文件未显示在我的 7.0 服务器中

# perl - 这里的适当关闭是什么意思

> ID：12058075
> 
> 赞同：6
> 
> 时间：2012-08-21T15:16:58.900
> 
> 标签：perl, closures, subroutine, lexical, typeglob

这是直接从**Perl Cookbook**中提取的代码：

```
@colors = qw(red blue green yellow orange purple violet);
for my $name (@colors) {
no strict 'refs';
*$name = sub { "<FONT COLOR='$name'>@_</FONT>" };
} 
```

其目的是形成 6 个不同颜色的子程序。在解释部分，书中写道：

> 这些函数看起来都是独立的，但真正的代码实际上只编译了一次。这种技术节省了编译时间和内存使用。要创建正确的闭包，匿名子例程中的任何变量都必须是词法。这就是循环迭代变量上 my 的原因。

**适当的闭包**是什么意思，如果`my`省略了会发生什么？另外，即使不能为词法变量定义 typeglob 并且应该抛出错误，typeglob 怎么会与词法变量一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:09:37.490

正如其他人所提到的，食谱使用术语“适当的”来指代创建一个带有来自更高词法范围的变量的子例程的事实，并且该变量不再可以通过任何其他方式访问。我使用过度简化的助记符“对`$color`变量的访问是'关闭'”来记住这部分闭包。

声明“不能为词法变量定义类型团”误解了关于类型团的几个关键点。您将其读作“您不能使用 'my' 来创建 typeglob”，这在某种程度上是正确的。考虑以下：

```
my *red = sub { 'this is red' }; 
```

这将在“my *red”附近出现“语法错误”，因为它试图使用“my”关键字定义类型团。

但是，您示例中的代码并没有尝试这样做。它定义了一个全局的类型团，除非被覆盖。它使用词法变量的值来定义类型团的名称。

顺便说一句，typeglob 可以是词法本地的。考虑以下：

```
my $color = 'red';

# create sub with the name "main::$color". Specifically "main:red"
*$color = sub { $color };

# preserve the sub we just created by storing a hard reference to it.
my $global_sub = \&$color;

{
  # create a lexically local sub with the name "main::$color".
  # this overrides "main::red" until this block ends
  local *$color = sub { "local $color" };

  # use our local version via a symbolic reference.
  # perl uses the value of the variable to find a
  # subroutine by name ("red") and executes it
  print &$color(), "\n";

  # use the global version in this scope via hard reference.
  # perl executes the value of the variable which is a CODE
  # reference.
  print &$global_sub(), "\n";

  # at the end of this block "main::red" goes back to being what
  # it was before we overrode it.
}

# use the global version by symbolic reference
print &$color(), "\n"; 
```

这是合法的，输出将是

```
local red
red
red 
```

在警告下，这将抱怨“Subroutine main::red redefined”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T15:56:54.233

我相信“适当的关闭”实际上意味着关闭。如果 $name 不是词法，所有的 subs 将引用同一个变量（其值将被重置为它在 for 循环之前的任何值，如果有的话）。

`*$name`正在使用 $name 的值作为有趣的取消引用 * sigil 的引用。由于 $name 是一个字符串，它是一个符号引用（因此没有严格的 'refs'）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:28:31.657

从[perlfaq7](http://perldoc.perl.org/perlfaq7.html)：

> **[什么是闭包？](http://perldoc.perl.org/perlfaq7.html#What%27s-a-closure?)**
> 
> 闭包记录在[perlref](http://perldoc.perl.org/perlref.html)中。
> 
> 闭包是一个计算机科学术语，具有精确但难以解释的含义。通常，闭包在 Perl 中作为匿名子例程实现，并在它们自己的范围之外持续引用词法变量。这些词法神奇地引用了定义子程序时周围的变量（深度绑定）。
> 
> 闭包最常用于编程语言中，您可以让函数的返回值本身就是一个函数，就像在 Perl 中一样。请注意，某些语言提供匿名函数但不能提供适当的闭包：例如 Python 语言。有关闭包的更多信息，请查看任何有关函数式编程的教科书。Scheme 是一种不仅支持而且鼓励闭包的语言。

答案继续以相当详细的方式回答问题。

[Perl 常见问题解答](http://perldoc.perl.org/perlfaq.html)是一个很好的资源。但是，如果没有人阅读它们，那么维护它们就有点浪费了。

**编辑**（以更好地回答您帖子中的后续问题）：

1/ 适当关闭是什么意思？- 看上面

2/ 如果省略 my 会发生什么？- 行不通。尝试一下，看看会发生什么。

3/ typeglob 怎么会使用词法变量？- 该变量`$name`仅用于定义要使用的 typeglob 的名称。它实际上并没有被用作 typeglob。

是不是更有帮助？

# select - 复选框选择数据表jsf2 primefaces

> ID：12058078
> 
> 赞同：0
> 
> 时间：2012-08-21T15:17:00.477
> 
> 标签：select, jsf-2, checkbox, datatable, primefaces

我使用具有复选框选择功能的数据表，但是当我在选择某些行后单击页脚按钮时，这些行不会受到我的对象 selectedCommandes [] 的影响，证明是我在显示我的方法中添加了一行selectedCommandes[] 的长度，但它返回 0，我不知道为什么，我认为我所有的代码都很好，这里是数据表：

```
<p:dataTable id="cars" var="car" value="#{commandesUserController.mediumCommandesModel}" selection="#{commandesUserController.selectedCommandes}"  tableStyle="width:auto">  

                <f:facet name="header">  
                    Checkbox Based Selection  
                </f:facet>  

                <p:column selectionMode="multiple" style="width:18px" />  

                <p:column headerText="Model" style="width:100px">  
                    <h:outputText value="#{car.id}" />  
                </p:column>  

                <p:column headerText="Year" style="width:100px">  
                    <h:outputText value="#{car.dateEnvoi}" />  
                </p:column>  

                <p:column headerText="Manufacturer" style="width:100px">  
                    <h:outputText value="#{car.dateLivraisonRecommande}" />  
                </p:column>  

                <p:column>
                    <p:commandLink ajax="false" value="Editer" action="updateUser_v1" >
                        <f:setPropertyActionListener value="#{car}" target="#{editUserController.u1}" />  
                    </p:commandLink>
                </p:column>

                <p:column>
                    <p:commandLink  value="Supprimer" oncomplete="confirmation.show()" >
                        <f:setPropertyActionListener value="#{car}" target="#{commandesUserController.selectedCommande}" />  
                    </p:commandLink>
                </p:column>

                <p:column style="width:40px">                         
                    <p:commandButton id="selectButton" update=":myform:carDlg" oncomplete="carDialog.show()" icon="ui-icon-search" title="View">  
                        <f:setPropertyActionListener value="#{car}" target="#{commandesUserController.selectedCommande}" />  
                    </p:commandButton>                       
                </p:column>  

                <f:facet name="footer">  
                    <p:commandButton id="supprion" value="supprimer selection"   oncomplete="confirmation2.show()"   />  
                </f:facet>

            </p:dataTable> 
```

这是有问题的按钮：

```
<f:facet name="footer">  
                    <p:commandButton id="supprion" value="supprimer selection"   oncomplete="confirmation2.show()"   />  
                </f:facet> 
```

这是我单击上面的按钮时出现的对话框：

```
<p:confirmDialog id="confirmDialog2" message="etes vous sur de vouloir supprimer ces commande avec tous les données et fichiers correspondants !"  
                             header="confirmation de suppression" severity="alert" widgetVar="confirmation2">  

                <p:commandButton id="confirm2" value="oui" update="cars" oncomplete="confirmation2.hide()"  
                                 action="#{commandesUserController.deleteCommandes()}" />  
                <p:commandButton id="decline2" value="non" onclick="confirmation2.hide()" type="button" />   

            </p:confirmDialog> 
```

这是 managedBean 中的方法：

```
public String deleteCommandes(){
   System.out.println("je suis dans delete l ensemble avec tous    =   "+selectedCommandes.length);
   for(int j = 0;j<selectedCommandes.length;j++){
      selectedCommandes[j].setListFichiers(uh.getFichiersById(this.selectedCommandes[j].getId()));
       for(int i = 0; i<selectedCommandes[j].getListFichiers().size();i++){
       //System.out.println("alors "+selectedCommande.getListFichiers().get(i).getId());
       uh.deleteFichier(selectedCommandes[j].getListFichiers().get(i));
   }
   uh.deleteCommande(selectedCommandes[j]);
   }

    return "commandesUser"; 
```

}

这一行： System.out.println("je suis dans delete l ensemble avec tous = "+selectedCommandes.length); 总是返回 0

我已经创建了实现 SelectableDataModel 的类

我希望我能解释问题

你有什么想法吗谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T15:44:17.070

添加 `<p:ajax event="cellEdit" listener="#{tableBean.onCellEdit}" update=":form:messages" />`

在下面

`<p:datatTable>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:57:34.430

周围有`h:form`放置`p:dataTable`吗？如果不是这种情况，这可能是您的问题的原因。

在 PrimeFaces 的展示页面上，结构如下所示：

```
<h:form>
    <p:dataTable>
        <!-- content of data table -->
    </p:dataTable>

    <p:confirmDialog>
        <!-- content of dialog -->
    </p:confirmDialog>
</h:form> 
```

我猜将`p:dataTable`and放在`p:confirmDialog`单独的形式中也应该起作用：

```
<h:form>
    <p:dataTable>
        <!-- content of data table -->
    </p:dataTable>
</h:form>
<h:form>
    <p:confirmDialog>
        <!-- content of dialog -->
    </p:confirmDialog>
</h:form> 
```

您可以在 setter 上设置断点`selectedCommandes`以检查是否被调用。（不用担心 setter 被多次调用，这是正常的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T20:28:38.997

正如你告诉我的，我用两种形式在一个单独的页面中进行了测试：这是新的 xhtml 页面：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="./template_utilisateur.xhtml">

            <ui:define name="tohead">             
            </ui:define>
            <ui:define name="content">

                Bienvenue #{userController.u1.nom} #{userController.u1.prenom}
                <br></br><br></br><br></br>
                <h:form id="form">                     

                    <p:dataTable id="cars" var="car" value="#{acceuilUserController.lc_maj}"  tableStyle="width:auto" rowStyleClass="#{(car.lu == false) ? 'red' : null}" >  

                        <p:column headerText="Commande N° : " style="width:100px">  
                            <h:outputText value="#{car.commande.id}" />  
                        </p:column>  

                        <p:column headerText="Date de mise à jour : " style="width:100px">  
                            <h:outputText value="#{car.dateMaj}" />  
                        </p:column> 

                        <p:column headerText="Decision : " style="width:100px">  
                            <h:outputText value="#{car.decison}" />  
                        </p:column> 

                        <p:column headerText="Etat : " style="width:100px">  
                            <h:outputText value="#{car.etat}" />  
                        </p:column> 

                        <p:column style="width:40px">                         
                            <p:commandButton  id="selectButton"  update=":form:carDlg" oncomplete="carDialog.show()" icon="ui-icon-search" title="plus de détails">  
                                <f:setPropertyActionListener value="#{car}" target="#{acceuilUserController.selectedMajCommande}" />  
                            </p:commandButton>                       
                        </p:column> 

                    </p:dataTable>                    

                    <p:dialog header="Commande editée le #{acceuilUserController.selectedMajCommande.dateMaj} par l'#{acceuilUserController.selectedMajCommande.utilisateur.type} #{acceuilUserController.selectedMajCommande.utilisateur.nom} #{acceuilUserController.selectedMajCommande.utilisateur.prenom}" widgetVar="carDialog" resizable="false" id="carDlg"  
                              showEffect="fade" hideEffect="explode" modal="true">  

                        <f:ajax event="close" execute="@this" render="cars" listener="#{acceuilUserController.refreshDatatable()}"/>
                        <table id="gradient-style" >
                            <tr style="border: hidden;">
                                <th>
                                    <h:outputLabel value="Model:" />
                                </th>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{acceuilUserController.selectedMajCommande.commande.id}" />
                                </td>                                       
                            </tr>
                            <tr style="border: hidden;">
                                <th>
                                    <h:outputLabel value="Year:" />
                                </th>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{acceuilUserController.selectedMajCommande.commande.etat}" />
                                </td>                                       
                            </tr>
                            <tr style="border: hidden;">
                                <th>
                                    <h:outputLabel value="Manufacturer:" />
                                </th>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{acceuilUserController.selectedMajCommande.commande.dateEnvoi}" />
                                </td>                                       
                            </tr>
                            <tr style="border: hidden;">
                                <th>

                                    <h:outputLabel value="Color:" />
                                </th>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{acceuilUserController.selectedMajCommande.commande.dateLivraisonRecommande}" />
                                </td>                                       
                            </tr>
                        </table>
                        <table id="gradient-style" >
                            <th>Nom Fichier</th><th>Taille</th><th>Télécharger</th>
                            <ui:repeat value="#{acceuilUserController.selectedMajCommande.commande.listFichiers}" var="jjjjj">
                                <tr>
                                    <td>
                                        <h:outputLabel style="font-weight: bold;" value="#{jjjjj.nom}" />
                                    </td>
                                    <td>
                                        <h:outputLabel style="font-weight: bold;" value="#{jjjjj.taille}" />
                                    </td>
                                    <td>
                                        <h:commandLink value="Télécharger">
                                            <p:fileDownload value="#{jjjjj.convertFichier}" />                                            
                                        </h:commandLink>

                                    </td>
                                </tr>

                            </ui:repeat>

                        </table>

                    </p:dialog>  

                </h:form> 

            </ui:define>

        </ui:composition>

    </body>
</html> 
```

这是 selectedCommandes 的 set 方法：

```
public void setSelectedCommandes(Commande[] selectedCommandes) {
    System.out.println("je suis la dans son set tous                     :     :"+selectedCommandes.length);
    this.selectedCommandes = selectedCommandes;
} 
```

我注意到，当我检查一行时，上面的方法没有运行，当我点击时它只运行一次：

```
<f:facet name="footer">  
                <p:commandButton id="supprion" value="supprimer selection" update=":form2:displayMulti"  oncomplete="confirmation2.show()"   />  
            </f:facet> 
```

在数据表的页脚中，它是这样写的：

```
 Infos: je suis la dans son set tous                     :     :0 
```

你有什么想法吗，谢谢

# ruby-on-rails-3 - Rails 3 Unknown Action 即使它在我的路线中定义

> ID：12058080
> 
> 赞同：1
> 
> 时间：2012-08-21T15:17:11.527
> 
> 标签：ruby-on-rails-3, rails-routing

我有一个正在开发的应用程序，它在购买一种产品时将用户引导到“捆绑”页面，这样他们就有机会添加另一种产品来“捆绑”他们的购买以获得折扣。

这是我的路线：

```
resources :orders, :path_names => { :new => 'checkout' }
match "/orders/bundle" => "orders#bundle", :as => 'bundle_order'
match "/orders/add_product" => "orders#add_product", :as => 'add_product' 
```

这是我的控制器#Action

```
def bundle
op_client = Client.find_by_name(opposite_client(current_client))
@product = Product.find_by_client_id_and_type_and_status(op_client.id, "subscription", "Active")

respond_with @product
end 
```

出于某种原因，当我使用`redirect_to`此方法时，我收到此错误：

```
Unknown action
The action 'show' could not be found for OrdersController 
```

我的 OrdersController 中没有 show 方法，因为我不需要它。为什么我会看到这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:21:59.757

这个错误可能是由两个不同的事情引起的。

第一的：

你在使用类似的东西：`<%= link_to @order_object %>`?? 如果你是，这就是问题所在。

第二：

在`routes.rb`改变这一行：

```
resources :orders, :path_names => { :new => 'checkout' } 
```

到

```
resources :orders, :path_names => { :new => 'checkout' }, :except => [:show] 
```

这应该有效。如果没有，请提供有关您用于执行此操作的代码的更多详细信息`redirect_to`

# javascript - 比较两个输入字段

> ID：12058081
> 
> 赞同：4
> 
> 时间：2012-08-21T15:17:12.053
> 
> 标签：javascript, html

我有这个功能，我用它来比较两个输入字段。如果用户在两个文本字段中输入相同的数字。提交时会报错。现在我想知道是否有办法允许相同的数字但不高于或低于前一个文本框的值1。例如，如果用户在前一个文本框中输入5，则用户只能输入4， 5或6在其他输入字段。请给我一些建议。

```
 <script type="text/javascript">
function Validate(objForm) {
var arrNames=new Array("text1", "text2");
var arrValues=new Array();
for (var i=0; i<arrNames.length; i++) {
var curValue = objForm.elements[arrNames[i]].value;
if (arrValues[curValue + 2]) {
alert("can't have duplicate!");
return false;
}
arrValues[curValue] = arrNames[i];
}
return true;
}
</script> 
```

```
<form onsubmit="return Validate(this);">
<input type="text" name="text1" /><input type="text" name="text2" /><button type="submit">Submit</button>
</form> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T15:29:38.967

一种易于阅读的简洁方法：

```
var firstInput = document.getElementById("first").value;
var secondInput = document.getElementById("second").value;

if (firstInput === secondInput) {
    // do something here if inputs are same
} else if (firstInput > secondInput) {
    // do something if the first input is greater than the second
} else {
    // do something if the first input is less than the second
} 
```

这允许您在比较后再次使用这些值作为变量 (firstInput)、(secondInput)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:25:58.623

这是一个建议/提示

```
if (Math.abs(v1 - v2) <= 1) {
    alert("can't have duplicate!");
    return false;
} 
```

这是[jsfiddle](http://jsfiddle.net/su__/dtUUJ/)链接，如果您想查看答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:21:36.253

给他们两个ID。

然后使用

```
if(document.getElementById("first").value == document.getElementById("second").value){
    //they are the same, do stuff for the same
}else if(document.getElementById("first").value >= document.getElementById("second").value
    //first is more than second
} 
```

等等。

# c# - 如何检查文件是否存在于 UNC 路径中？

> ID：12058082
> 
> 赞同：1
> 
> 时间：2012-08-21T15:17:15.097
> 
> 标签：c#

我试图使用 c# 中的 File.Exist() 函数检查 UNC 路径中文件的存在，但即使文件存在，它也只会返回为 false。

以下是示例代码

```
outPath="\\DevSrv\\outPath\\result.txt";
if(File.Exists(outPath))
{
 .....
} 
```

如果路径“\DevSrv\outPath\result.txt”有效，上述代码总是失败。我可以使用 Windows 资源管理器访问路径。

* * *

抱歉，我在创建此帖子时错过了“\”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:19:32.337

在您的字符串之前使用`@`以避免必须转义斜杠

```
outPath=@"\\DevSrv\outPath\result.txt";
if(File.Exists(outPath))
{
  .....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:18:51.957

您没有逃避斜线，请尝试：

```
outPath="\\\\DevSrv\\outPath\\result.txt";
if(File.Exists(outPath))
{
    .....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T15:25:37.560

当使用带有反斜杠的字符串时，您需要考虑转义序列。此链接将为您提供有关转义序列的详细视图。 [http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-c​​haracter-escape-sequences-are-available.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-character-escape-sequences-are-available.aspx)

引用链接：

C# 定义了以下字符转义序列：

*   \' - 单引号，字符文字需要
*   \" - 双引号，字符串文字需要
*   \\ - 反斜杠
*   \0 - Unicode 字符 0
*   \a - 警报（字符 7）
*   \b - 退格（字符 8）
*   \f - 换页（字符 12）
*   \n - 换行（字符 10）
*   \r - 回车（字符 13）
*   \t - 水平制表符（字符 9）
*   \v - 垂直引号（字符 11）
*   \uxxxx - 十六进制值 xxxx 字符的 Unicode 转义序列
*   \xn[n][n][n] - 十六进制值 nnnn 字符的 Unicode 转义序列（\uxxxx 的可变长度版本）
*   \Uxxxxxxxx - 十六进制值 xxxxxxxx 字符的 Unicode 转义序列（用于生成代理）

其中，\a、\f、\v、\x 和 \U 在我的经验中很少使用。

所以在你的例子中。您可以对字符串使用以下选项。

```
outPath=@"\\DevSrv\outPath\result.txt";
//Or
outPath="\\\\DevSrv\\outPath\\result.txt"; 
```

# iphone - 将 UIButton 固定到 MapView

> ID：12058084
> 
> 赞同：0
> 
> 时间：2012-08-21T15:17:44.983
> 
> 标签：iphone, uibutton, mkmapview, cgrect

我在 annotationView 上制作了一个 UIButton，如下所示：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
CGPoint point = [mainMapView convertCoordinate:sac.coordinate toPointToView:self.smallView];
button.frame = CGRectMake(point.x - 30, point.y - 30, 60, 60); 
```

效果很好，但是当我移动地图时，按钮不会随地图移动。有没有办法用 a 来绘制按钮`CGRectMake`，把它`button.frame`放在地图上而不是视图上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:27:56.490

你真的应该使用 MKMapAnnotation 的东西来完成它。[此链接将](http://blog.just2us.com/2010/05/how-to-use-mapkit/)引导您了解设置所需代表的基础知识。基本上所有将按钮保留在某个位置的工作都已为您完成——您只需要利用它即可。 [此类参考](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008207)展示了如何为覆盖视图和其他各种内容设置图像。

# c# - 在多线程测试 (MBUnit) 中使用 Visual Studio 生成的 SOAP 服务引用

> ID：12058089
> 
> 赞同：0
> 
> 时间：2012-08-21T15:17:59.577
> 
> 标签：c#, multithreading, soap, mbunit, gallio

我已经编写了 MbUnit 测试，这些测试通过 VS 2010 中的“添加服务引用”生成的客户端使用 SOAP 服务。

这些测试使用 DegreeOfParallelism 属性并行运行，因此一次运行最多 10 个测试，每个测试都创建自己的 Soap 客户端实例。

我在并行运行时看到了一些非常慢的响应时间（大约 30 秒），而在运行单个线程时不会发生这种情况。在我开始“责备” SOAP 服务之前，我是否会因为在不同线程中创建大量客户端而面临问题？

我没有使用“使用”，我应该使用这个吗？那会有什么不同吗？

谢谢

罗比

# hibernate - HQL：如果有时为空，如何过滤属性

> ID：12058095
> 
> 赞同：0
> 
> 时间：2012-08-21T15:18:13.053
> 
> 标签：hibernate, grails, join, hql, isnull

两个域类（bean）

A 和 B，A 具有 B 类型的属性 b (-> Ab) 另外，A 是使用单个表的继承层次结构的父级。

我想使用 HQL 加入这些并保留结果集中与 A 无关的所有 B。如果 A 和 B 之间存在关联，我只想要其中一些基于 A 的某些标准。

我最初的查询看起来像这样

```
SELECT (a.something, b.something)
FROM A as a RIGHT OUTER JOIN a.b
WHERE a.dateCreated < someDate; 
```

此查询的问题：a 有时为空，因此 WHERE 条件解析为 false 并且不返回元组，因此结果集不包含与 A 无关的 B。

所以我将查询修改为如下内容：

```
SELECT (a.something, b.something)
FROM A as a RIGHT OUTER JOIN a.b
WHERE a is null or (a.dateCreated < someDate); 
```

这在生成的 SQL 中没有帮助，似乎无法控制类选择语句的位置，例如

```
where a.class in ('someChildOfA', 'anotherChildOfA', 'aThirdChildOfA') 
```

被插入；它必须放在括号内，即

```
where a is null or (a.dateCreated < someDate and a.class in ('someChildOfA', 'anotherChildOfA', aThirdChildOfA')) 
```

但它最终被添加到外面，即

```
where (a.id is null OR dateCreated < someDate) and a.class in ('someChildOfA', 'anotherChildOfA', 'aThirdChildOfA') 
```

现在，我有点没有想法......任何（甚至可能更清洁）的建议？如果重要的话，我正在使用 Grails。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:23:20.570

您基本上在 where 子句中有一个带有过滤器的右外连接。此外，由于此过滤器用于左侧表 (A)，因此连接减少为内部连接。

我遇到了同样的问题，在 HQL 中解决它的唯一方法是检查 null ex：替换你的 where 如下

**`where (a.id is null OR dateCreated < someDate)`**

我不明白选课问题。这有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:27:45.650

您不能`B`从`A`(where `a`is `null`) 中选择孤立的 s - 这毫无意义。您需要一个不同的查询来从中`B`进行选择。

所以最简单也可能是最好的工作方法是发出两个不同的查询。如果不可接受，请尝试[HQL UNION 替换](https://stackoverflow.com/questions/201023/hibernate-union-alternatives)，或者退回到 SQL。

# spring - Spring 测试框架 - JNDI 资源

> ID：12058098
> 
> 赞同：8
> 
> 时间：2012-08-21T15:18:22.393
> 
> 标签：spring, jndi, spring-test

我正在玩弄 Spring 测试框架，但我有一个问题。通常，当应用程序部署在 Tomcat 上时，我们有

```
<Resource
       name="jdbc/sqliteDS"
       auth="Container"
       type="javax.sql.DataSource"
       maxActive="4"
       maxIdle="2"
       username="x"
       maxWait="5000"
       driverClassName="org.sqlite.JDBC"
       password="x"
       url="jdbc:sqlite:/home/xxx/db.sqlite"/> 

</Context> 
```

在 Tomcat context.xml 中，

```
<resource-ref>
    <description>sqlite DataSource</description>
    <res-ref-name>jdbc/sqliteDS</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

在 web.xml 和

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:/comp/env/jdbc/sqliteDS" />
</bean> 
```

在 data-context.xml 中获取数据源，但是我如何模拟 Spring 测试框架的 JNDI 资源，因为现在在初始化期间我收到了找不到数据源的错误，他是对的。

此外，如果无需编写另一个 .xml 文件就可以做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T15:34:04.010

前段时间我不得不处理这个问题，但我没有找到合适的解决方案，而是一个暗示另一个 xml 文件的解决方法：

首先，您创建一个定义 JNDI 信息 (jndi.xml) 的 Spring 配置文件：

```
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

  <bean id="dataSource" class="org.apache.tomcat.dbcp.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
    <property name="url" value="jdbc:oracle:thin:@server:port:instance" />
    <property name="username" value="user" />
    <property name="password" value="pwd" />
  </bean>
</beans> 
```

然后是一个静态类来绑定你的 JNDI 变量：

```
public class Initialize {
    public static void initializeJndi() throws Exception {
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("jndi.xml");
        SimpleNamingContextBuilder builder = new SimpleNamingContextBuilder();
        builder.bind("java:comp/env/jdbc/foo", applicationContext.getBean("dataSource"));
        builder.activate();
    }
} 
```

然后在您的测试类中，添加以下内容：

```
 @BeforeClass
    public static void initJndi() throws Exception {
        Initialize.initializeJndi();
    } 
```

因此，当您加载 Spring 主配置文件时，可以访问 JNDI 资源。

也许这不是最好的方法，但它确实有效。

顺便说一句，拥有一个特定的配置文件似乎是个好主意，因为您可能不想在最终数据库上运行单元测试。这样做更多地被认为是集成测试而不是单元测试。

希望能帮助到你，

穆瓦

# python - 远程设备监控

> ID：12058099
> 
> 赞同：1
> 
> 时间：2012-08-21T15:18:28.963
> 
> 标签：python, monitoring, snmp

这是一篇比我[上一篇](https://stackoverflow.com/questions/12049530/client-server-json-communication-with-python)更全面的帖子。

我想使用 python 监控设备，所以：

*   我有一个远程代理，它带有传感器，将获取设备数据，例如磁盘使用情况、进程等。
*   服务器从远程代理获取数据并将它们存储到数据库中
*   网站允许您查看这些数据

我已经拥有的：

*   psutil 获取设备信息
*   MySQL + NoSQL 存储设备数据
*   django 作为网站查看存储的数据

我需要的：

*   如何在远程代理和服务器之间进行通信。我已经阅读过关于 zmq、twisted、rpc-json、tornado 的文档，但我不知道哪个对我的项目最好
*   安排转移以避免超载的可能性
*   安全连接

PS：以一种理想的方式，我想用标准的 python 库编写我的代理。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:01:38.033

仅供参考，我现在将使用[SNMP](http://en.wikipedia.org/wiki/Simple_Network_Management_Protocol)协议，我已经找到了如何用 Python 实现

# jvm - 不同 JRE 中 JVM 之间的差异

> ID：12058100
> 
> 赞同：1
> 
> 时间：2012-08-21T15:18:30.743
> 
> 标签：jvm, java

有许多具有不同 JVM（热点、IcedTea）的 JRE（Suns、Oracles、）。

那么它们之间有什么重大区别吗？它们是否类似于 linux 发行版，其中一个侧重于安全性，另一个侧重于可用性？

它们之间的速度是否有很大差异，还是它们受硬件影响更大？

我试图获得一些很好的解释，甚至是不同 JVM 的示例，但没有设法找到太多信息。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:01:24.173

您可能会发现博客文章[了解各种 JDK](http://openj.dk/2011/05/19/understanding-the-various-jdks/)很有用。

> IcedTea 为 OpenJDK 提供 webstart、插件实现、构建工具（以及更多），以帮助各种 Linux ditro 进行自己的 JDK 构建。典型的 Java 应用程序开发人员可能不会使用 IcedTea，相反，他们会使用其 Linux 发行版提供商提供的 JDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:23:42.923

恕我直言，它们之间没有太大区别，因为它们都在某种程度上基于 OpenJDK。

最显着的区别是 JVM 仅在特定操作系统上可用。例如，在 IBM AIX 上，您不会获得 Oracle/Sun JRE。

# ruby-on-rails - 如何从 Rails 中的自定义模块访问参数？

> ID：12058102
> 
> 赞同：0
> 
> 时间：2012-08-21T15:18:43.053
> 
> 标签：ruby-on-rails, hash, module, params

我编写了一个自定义模块，我在控制器中包含了 require "mymodule.rb"。有没有一种方法可以访问参数而不将其显式传递给我的模块函数？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:31:40.827

请参阅此问题的答案，[Advice on using modules with Ruby on Rails](https://stackoverflow.com/questions/4932034/advice-on-using-modules-with-ruby-on-rails)。已接受答案的最后一句话说您将不得不将参数传递给模块。

# java - 如何使用匿名内部类？

> ID：12058104
> 
> 赞同：1
> 
> 时间：2012-08-21T15:18:52.257
> 
> 标签：java, nested-class

我制作了这两个类以利用匿名内部类的概念。类 1 有一个静态内部类。2 级使用它。但我不明白如何调用内部类的方法。请帮帮我。

1级

```
public class outerclass {
  outerclass() {
    System.out.println("Constructor of new class");
  }

  public void showthis(String str) {
    System.out.println(str);
  }

  static class insideclass {
    insideclass() {
      System.out.println("This is inside class constructor");
    }

    public void nowshowthis(String str) {
      System.out.println(str);
    }
  }
} 
```

2 级

```
public class helloworld {
  public static void main(String args[]) {
    //this is an object of the outer class
    outerclass example=new outerclass();
    //How do i make an anonymous inner class and call the method "nowshowthis()"
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:22:23.927

**让我摆脱眼前的问题！**如果你的内部类*是非静态的*，这就是如何实例化它：（假设`example`是一个类型的对象`outerclass`）

```
 example.new insideclass().nowshowthis("my String") 
```

对于`static public`内部类，您甚至*不需要*外部类的实例。这样做（很像访问公共静态变量）

```
new outerclass.insideclass().nowshowthis("my String") 
```

你试过这个吗？

**这是怎么回事？**在您的情况下，您并没有真正处理 Anonymous 内部类。它实际上只是一个普通的内部类。（我无法解释你为什么要这样做。）

**那么什么是匿名类，我们在哪里使用它呢？**匿名类就像一次性使用的类的实例。当您实现某个接口时，其中一个示例就会浮出水面……但您不需要以其他方式使用它。例如，您想将处理程序附加到按钮。您可以以这种方式进行操作（假设示例）

```
 MyButtonInterface obj= new MyButtonInterface(){
      @Override
      onClick(Model obj){
             //save model in DB
       }
   }
   UI.add(obj, "specificId"); 
```

你看？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:37:06.010

匿名内部类是在另一个类的方法体中创建和定义的。本质上，您正在从抽象定义中动态创建一个具体类。到目前为止，您的 InnerClass 类实际上只是一个常规的内部类，这意味着非匿名。

如果您想尝试匿名内部类，我能想到的最简单的方法是将您的 InnerClass 更改为接口，如下所示：

```
public interface InnerClass{
    public void doSomething();
} 
```

所以此刻，InnerClass 确实蹲下了；在定义之前它没有任何意义。接下来，您需要更改 OuterClass 的工作方式。像这样改变你的 showThis() 函数：

```
public showThis(InnerClass innerObj){
    innerObj.doSomething();
} 
```

现在我们有你的外部类要求内部类实例做某事，但我们仍然没有定义我们想要它做什么。这就是魔法发生的地方 - 在您的 main 方法中，您将定义内部类实例的实际外观：

```
public static void main (String[] args){
    OuterClass outer = new OuterClass();

    // This is the key part: Here you are creating a new instance of inner class 
    // AND defining its body. If you are using Eclipse, and only write the 
    // new InnerClass() part, you'll notice that the IDE complains that you need 
    // to implement the doSomething() method, which you will do as though you
    // were creating a plain 'ol class definition
    outer.showThis(new InnerClass(){ 
        public void doSomething(){
            System.out.println("This is the inner anonymous class speaking!");
        }
    });
} 
```

在实践中，我并没有过多地使用匿名内部类，但是了解它们很有用。我在进行 GUI 编程时最常使用它们来定义 GUI 控制事件的侦听器，例如按钮单击。

另外，正如其他人所提到的，请记住 Java 标准的类名的第一个字母是大写字母，我在这里做了。您将希望遵循该标准，因为它使其他人更容易阅读您的代码，并且一眼就可以很容易地分辨出您何时在看一个类，何时在看一个对象。

无论如何，希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:24:36.347

`insideclass`是一个非静态类，因此必须通过外部类的实例访问它，如下所示：
`new outerclass().new insideclass().nowshowthis();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T15:30:41.033

那不是一个匿名的内部类。下面是一个匿名内部类的例子：

```
class InnerClassDemo {
  public static void main(String[] args) {
    ActionListener a = new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        System.out.println(e.getActionCommand());
      }
    };
    // now a is the only instance of an anonymous inner class implementing the ActionListener interface
  }
} 
```

当然，您也可以使用自己的接口或类来执行此操作：

```
class InnerClassDemo {
  public class InsideClass {
      InsideClass() {
          System.out.println("This is inside class constructor");
      }

      public void nowshowthis(String str) {
          System.out.println(str);
      }
  }

  public static void main(String[] args) {
    InsideClass anonym = new InsideClass() {
      @Override
      public void nowshowthis(String str) {
          System.out.println("anonymous inner class override: "+str);
      }
    }
    InsideClass normalInstance = new InsideClass();
    anonym.noshowthis("test");
    normalInstance.noshowthis("test");
  }
} 
```

你的输出将是

```
anonymous inner class override: test
test 
```

`anonym`一个匿名内部类实现的实例也是如此，`InsideClass`而`normalInstance`只是你的类的一个普通实例`InsideClass`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T15:32:32.637

```
public class HelloWorld {

    public static void main(String args[])
        {

        outerclass.insideclass example= new outerclass.insideclass();

        example.nowshowthis("Hello");

    }
} 
```

或者，将 nowshowthis 方法设为静态，它可以像这样调用：

```
outerclass.insideclass.nowshowthis("Howdy. This method is static."); 
```

# configuration - Ejabberd - 公共连接的服务器配置

> ID：12058106
> 
> 赞同：0
> 
> 时间：2012-08-21T15:19:05.640
> 
> 标签：configuration, xmpp, ejabberd

我有一个linux服务器。

我在服务器上安装了 ejabberd。

我可以进入管理网址 -`http://ipaddress:5280/admin`

我无法通过 jabber 客户端连接到服务器。

如何为公共连接设置服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:57:56.847

确保：

a) 您没有为端口设置防火墙。b) 您拥有域的有效[SRV 记录](http://wiki.xmpp.org/web/SRV_Records)，例如，

```
_xmpp-client._tcp.example.net. 86400 IN SRV 5 0 5222 server.example.net.
_xmpp-server._tcp.example.net. 86400 IN SRV 5 0 5269 server.example.net. 
```

# salesforce - 将自定义链接放在网络链接部分之外

> ID：12058108
> 
> 赞同：0
> 
> 时间：2012-08-21T15:19:13.833
> 
> 标签：salesforce, visualforce

如何将自定义链接放在 Salesforce 页面的 Web 链接部分之外？或者有没有一种方法可以创建多个网络链接部分？

如果没有，我可以创建一个可以调用 javascript 方法的自定义字段吗？（我的自定义链接调用一个 js 方法，验证后将调用一个 Web 服务来做一些工作。）我尝试创建一个自定义字段（公式），但我无法从那里调用一个 js 函数，或者放置一些脚本。

我想要做的是将我在网络链接部分中的自定义链接传播到页面上的不同部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:30:37.030

我过去曾使用此方法覆盖链接和按钮操作。您也可以使用相同的方法在页面周围移动元素。

创建一个 visualforce 页面并使用它来覆盖您要修改的对象的标准页面。覆盖页面需要使用该对象的标准控制器。如有必要，您可以使用扩展控制器添加 Apex 功能。

使用详细标签来渲染胆量。然后放入一个脚本标签来选择你想在页面上移动的锚链接。您需要使用浏览器调试器进行一些检查才能准确找到您要查找的内容。

```
<apex:page StandardController="CustomObject__c" extensions="CustomObjectController"  >
    <apex:detail relatedList="false" inlineEdit="true" id="mydetail" />
    <script>
         // select your elements you want to move, edit or delete here
    </script>
</apex:page> 
```

# ruby-on-rails - reflect_on_all_associations 上的内存泄漏

> ID：12058113
> 
> 赞同：1
> 
> 时间：2012-08-21T15:19:42.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试追踪我的 Rails 应用程序中的内存泄漏。我知道使用 reflect_on_all_associations 有点慢，但是有没有人发现这会导致 Rails 应用程序中的内存泄漏？我正在使用 3.2.6。通常在生产应用程序中使用 reflect_on_all_associations 是否令人不悦？

就像是：

```
Event.reflect_on_all_associations.map{|mac| mac.class_name if mac.macro==:belongs_to}.compact
Event.reflect_on_all_associations.map{|mac| mac.class_name if mac.macro==:has_many}.compact 
```

谢谢！

# google-refine - Google Refine Reconciliation：如何用结果文本自动替换

> ID：12058114
> 
> 赞同：1
> 
> 时间：2012-08-21T15:19:41.913
> 
> 标签：google-refine

假设我有这样的单元格：“Nat. Taiwan Normal Univ., Taipei”

一旦我进行和解，我得到这个：Nat。Taiwan Normal Univ., Taipei VV 创建新主题 搜索匹配

然后我点击“搜索匹配”，得到一个下拉结果：“国立台湾师范大学”

2个问题： - 如何将结果文本（“国立台湾师范大学”）输出到单独或同一列中？- 是否可以将结果大学所在的国家/地区输出到单独的列？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:56:55.993

GREL 表达式`cell.recon.match.name`将为您提供名称。将其放在单独的列中，这样您就不会丢失侦察对象。

使用“从 Freebase 添加列”将允许您添加`/location/location/contained_by`具有以下约束的属性`"type":"/location/country"`

# iphone - 使用 TouchXML 解析 XML 时内存泄漏

> ID：12058115
> 
> 赞同：0
> 
> 时间：2012-08-21T15:19:46.997
> 
> 标签：iphone, ios, cocoa-touch, ipad

我正在使用 TouchXML 来解析 XML。虽然我在“配置文件”模式下运行相同。我可以看到内存泄漏。我该如何解决这个问题？

```
-(NSMutableArray *) grabXML:(NSData *)xmlData andQuery:(NSString *)query {  
    NSMutableArray *blogEntries = [[[NSMutableArray alloc] init] autorelease];  
    CXMLDocument *rssParser = [[[CXMLDocument alloc] initWithData:xmlData options:0 error:nil] autorelease];
    NSArray *resultNodes = [rssParser nodesForXPath:query error:nil];
    for (CXMLElement *resultElement in resultNodes) {
        NSMutableDictionary *blogItem = [[NSMutableDictionary alloc] init];
        int counter;
        for(counter = 0; counter < [resultElement childCount]; counter++) {
            [blogItem setObject:[[resultElement childAtIndex:counter] stringValue] forKey:[[resultElement childAtIndex:counter] name]];
        }
        for( int i = 0; i < [[resultElement attributes] count]; i++) {
            CXMLNode *node = [[resultElement attributes] objectAtIndex:i];
            [blogItem setObject:[[resultElement attributeForName:[node name]] stringValue] forKey:[node name]];
        }
        [blogEntries addObject:[blogItem copy]];
        [blogItem release];
    }
    return [blogEntries copy];
} 
```

我以下面提到的格式调用上述方法。

```
NSMutableArray *arr = [[self grabXML:responseData andQuery:@"//wsCheneliereResult"] autorelease]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:34:37.097

```
[blogEntries addObject:[blogItem copy]]; 
```

这是你的错误：你不需要复制`blogItem`,`addObject:`实际上`retain`它的参数，这样你就可以安全地`[blogItem release];`之后调用。

而且您很可能也不应该这样做`return [blogEntries copy]`，并且只返回`blogEntries`：这是常见的编程习惯，名称不包含“复制”或“创建”的方法返回自动释放的值，例如您不需要在完成时释放它们他们。

总而言之，我会选择：

```
-(NSMutableArray *) grabXML:(NSData *)xmlData andQuery:(NSString *)query {  
    NSMutableArray *blogEntries = [[[NSMutableArray alloc] init] autorelease];  
    CXMLDocument *rssParser = [[[CXMLDocument alloc] initWithData:xmlData options:0 error:nil] autorelease];
    NSArray *resultNodes = [rssParser nodesForXPath:query error:nil];
    for (CXMLElement *resultElement in resultNodes) {
        NSMutableDictionary *blogItem = [[NSMutableDictionary alloc] init];
        int counter;
        for(counter = 0; counter < [resultElement childCount]; counter++) {
            [blogItem setObject:[[resultElement childAtIndex:counter] stringValue] forKey:[[resultElement childAtIndex:counter] name]];
        }
        for( int i = 0; i < [[resultElement attributes] count]; i++) {
            CXMLNode *node = [[resultElement attributes] objectAtIndex:i];
            [blogItem setObject:[[resultElement attributeForName:[node name]] stringValue] forKey:[node name]];
        }
        [blogEntries addObject:blogItem];
        [blogItem release];
    }
    return blogEntries;
} 
```

和

```
NSMutableArray *arr = [self grabXML:responseData andQuery:@"//wsCheneliereResult"]; 
```

# windows-xp - WMI 命名空间 - 是否有“官方列表”？

> ID：12058118
> 
> 赞同：3
> 
> 时间：2012-08-21T15:20:01.603
> 
> 标签：windows-xp, wmi

我（不幸）正在尝试使用 Windows (XP) 脚本和 WMI (Windows Management Instrumentation)，因为我正在尝试编写脚本来配置网络适配器、用户等。

关键似乎是所谓的 WMI“命名空间”；一旦有了名称空间，显然就可以在名称空间中发现类并根据需要读取/更改数据。（如果我对 WMI 和命名空间有任何误解，请致歉）。

所以显而易见的问题是，究竟有哪些 WMI 命名空间可用？能够编写一个列出它们的脚本很好，但微软官方的命名空间列表在哪里？你到底应该怎么知道：

1.  命名空间官方存在吗？
2.  每个命名空间下都有哪些类？
3.  我在哪里寻找网络设置的特定类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-07T19:41:52.717

我创建了列表，您可以在[http://wutils.com/wmi/namespaces.html](http://wutils.com/wmi/namespaces.html)看到它。当然，这不是官方名单。它包含 Windows 服务器的普通安装中的命名空间列表，其中包含一些扩展（sql server、exchange）和每个命名空间中的类/属性/方法列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:29:44.810

**1.Namespaces官方存在吗？**

AFAIK 没有 WMI 命名空间的官方列表，但您可以通过[编程方式获取已安装命名空间的列表](https://stackoverflow.com/questions/5332501/how-do-you-query-for-wmi-namespaces)。

**2.每个命名空间下有哪些类？**

同样没有官方列表，但是您可以让这个列表连接到每个命名空间，然后执行这个 WQL 语句

```
select * from meta_class 
```

**3.我在哪里寻找网络设置的特定类？**

查看 MSDN 文档[`Windows Management Infrastructure Classes`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394554%28v=vs.85%29.aspx)

如果您需要有关 WMI 类和命名空间的更多信息，我建议您使用类似的工具[`WMI Delphi Code Creator`](http://code.google.com/p/wmi-delphi-code-creator/)，该工具允许您生成代码来访问 WMI 类、事件和方法。还包括一组选项，用于搜索与特定关键字相关的类、执行 WQL 语句、获取有关任何 WMI 类的元数据信息等。

# php - 使用正则表达式将内容中的链接替换为超链接

> ID：12058120
> 
> 赞同：4
> 
> 时间：2012-08-21T15:20:02.460
> 
> 标签：php, regex, preg-replace

我有一个包含用户博客内容的字符串。如果它们包括以下内容：

```
www.google.com
http://google.com
http://www.google.com 
```

在他们的博客文章中，我希望 PHP 用真正的超链接替换这些出现，但保留原始子字符串（即不更改`www.google.com`为`http://www.google.com`）。

有人知道我如何使用 PHP 和正则表达式来做到这一点吗？我试过这个：

```
echo preg_replace('/((www|http:\/\/)[^ ]+)/', '<a href="$1" target="_blank">$1</a>', $content); 
```

但这只有在您以空格结束链接时才会成功。如果以逗号或句号结束，则失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:33:10.997

```
preg_replace('/\b(?:(http(s?):\/\/)|(?=www\.))(\S+)/is',
             '<a href="http$2://$3" target="_blank">$1$3</a>',
             $content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:48:15.533

```
$pattern = '/<a (.*?)href=[\"\'](.*?)\/\/(.*?)[\"\'](.*?)>(.*?)<\/a>/i';
$new_content = preg_replace($pattern, '$5', $content); 
```

# objective-c - NSOutlineView：单元格最初太窄

> ID：12058128
> 
> 赞同：1
> 
> 时间：2012-08-21T15:20:29.807
> 
> 标签：objective-c, cocoa, nsoutlineview

我做了一个小演示来隔离我在项目中遇到的问题。

当我启动应用程序时，单元格`NSOutlineView`对于文本来说太窄了：

![初始视图](../Images/5835dfcb7749937b8075154540950205.png)

然后我用鼠标调整窗口大小，使其比以下内容更窄`NSOutlineView`：

![缩小视野](../Images/d53dc0de32308290f8cb04a2fae75145.png)

当我现在再次放大窗口时，问题就解决了。从现在开始，大纲按预期工作：

![重新放大视图](../Images/1bed9fcae1338e8060d3b5fa724f2bfd.png)

这是我的 AppDelegate 的主要方法：

```
- (void)applicationDidFinishLaunching:(NSNotification *)notification {
    NSRect frame = NSMakeRect(0., 0., 400., 300.);
    NSUInteger styleMask = NSTitledWindowMask | NSClosableWindowMask | NSResizableWindowMask;
    _mainWindow = [[NSWindow alloc] initWithContentRect:frame styleMask:styleMask backing:NSBackingStoreBuffered defer:NO];
    _mainWindow.title = @"Outline";

    NSScrollView *leftScrollView = [[NSScrollView alloc] init];
    leftScrollView.hasVerticalScroller = YES;
    leftScrollView.hasHorizontalScroller = NO;
    leftScrollView.drawsBackground = NO;
    leftScrollView.autoresizingMask = NSViewWidthSizable | NSViewHeightSizable;
    _mainWindow.contentView = leftScrollView;

    NSOutlineView *outlineView = [[NSOutlineView alloc] init];
    NSTableColumn *outlineColumn = [[NSTableColumn alloc] initWithIdentifier:@"Menu Item"];
    [outlineView addTableColumn:outlineColumn];
    outlineView.outlineTableColumn = outlineColumn;
    outlineView.selectionHighlightStyle = NSTableViewSelectionHighlightStyleSourceList;
    outlineView.autoresizingMask = NSViewWidthSizable | NSViewHeightSizable;
    outlineView.headerView = nil;
    _outlineDataSourceAndDelegate = [[MROutlineDataSourceAndDelegate alloc] init];
    outlineView.dataSource = _outlineDataSourceAndDelegate;
    outlineView.delegate = _outlineDataSourceAndDelegate;
    leftScrollView.documentView = outlineView;

    [_mainWindow makeKeyAndOrderFront:NSApp];
} 
```

谁能解释一下这种奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:10:51.760

我不知道这是否是最优雅的解决方案，但至少它有效。我在创建后添加了以下单行`NSTableColumn`：

```
 outlineColumn.width = SIDEBAR_WIDTH_DEFAULT; 
```

就是这样。我花了将近一天的时间才弄清楚:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:56:17.600

上面的答案对我来说不够干净，所以我继续玩。现在我很高兴：我在滚动视图中添加了一个监听器，它将大纲视图的宽度调整为与滚动视图相同。不再需要提前设置大纲栏的宽度。如果事先不知道宽度，这很重要。

# c# - 将同一处理程序分配给许多事件的紧凑方式

> ID：12058134
> 
> 赞同：0
> 
> 时间：2012-08-21T15:20:47.667
> 
> 标签：c#, winforms, events, code-duplication

在我的用户控制代码中，我注意到许多具有相同处理程序的事件：

```
btnMas.MouseDown += MyMouseDown;
btnMenos.MouseDown += MyMouseDown;
txtValue.MouseDown += MyMouseDown;
lblMax.MouseDown += MyMouseDown;
lblMin.MouseDown += MyMouseDown;
lblName.MouseDown += MyMouseDown; 
```

有没有更紧凑的方法来写这个？就像遍历事件集合或使用 lambdas 一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:24:48.343

如果您在许多对象上订阅相同的事件，并且该事件由某个基类公开，您可以使用：

```
var controls = new Control[] { btnMas, btnMenos, txtValue,
                               lblMax, lblMin, lblName };
foreach (var control in controls)
{
    control.MouseDown += MyMouseDown;
} 
```

请注意，我不确定这是否*真的*更清洁。当然，如果您需要对同一组控件执行多个不同的操作，它会变得更加简洁。

编辑：鉴于额外的信息，它真的很简单：

```
foreach (Control control in this.Controls)
{
    control.MouseDown += MyMouseDown;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:24:57.133

```
foreach (var control in myForm.Controls)
{
    string name = control.GetType().Name;
    if (name  == "TextBox" || name  == "Label" || name  == "Button")
    {
        control.MouseDown += MyMouseDown;
    }
} 
```

如果要专门选择控件，可以使用此`In`扩展：

```
public static bool In<T>(this T obj, params T[] values)
{
    for (int i=0; i < values.Length; i++)
    {
         if (object.Equals(obj, values[i]))
             return true;
    }
    return false;
} 
```

像这样：

```
foreach (var control in myForm.Controls.Where(c => c.Name.In(
    "btnMas", "btnMenos", "txtValue", "lblMax", "lblMin", "lblName"))
{
    control.MouseDown += MyMouseDown;
} 
```

# jquery - 如何实现页面向上滚动显示的固定“联系方式”面板？

> ID：12058138
> 
> 赞同：0
> 
> 时间：2012-08-21T15:21:02.430
> 
> 标签：jquery, css

我可以解释效果的最好方法是通过这个网站的例子......

[http://www.optimus2020.com/](http://www.optimus2020.com/)

有任何想法吗？这是一个巧妙的技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:29:00.037

看起来已经给出了“面板”`position: fixed;`并将其放在主要内容后面，使用`z-index`. 滚动内容的底部边距/填充等于面板的高度。使用这种技术，浏览器将滚动“过去”内容，显示底层面板。

我个人认为这有点奇怪，但这只是我。

*代码示例*

```
<html>
    <head><title>Test</title></head>
    <body>

        <style type="text/css">
            #content {
                position: relative;
                z-index: 10;
                height: 1000px;
                background: #fff;
                margin-bottom: 100px;
            }

            #panel {
                z-index: 1;
                width: 100%;
                height: 100px;
                background: #00f;
                color: #fff;
                position: fixed;
                bottom: 0;
            }
        </style>

        <div id="content">Content</div>
        <div id="panel">Panel</div>

    </body>
</html> 
```

# javascript - 带有 javascript 的 Photoshop 面板

> ID：12058139
> 
> 赞同：1
> 
> 时间：2012-08-21T15:21:07.993
> 
> 标签：javascript, photoshop

我想知道是否可以仅使用 javascript 在 Photoshop 中创建自定义面板？并最终添加为 Photoshop 的扩展或类似的东西？

是否可以扩展现有面板，即添加另一个类似于眼睛的“复选框”，在当前眼睛复选框附近的某处显示/隐藏图层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:55:32.970

使用 Photoshop 附带的 scriptUI 库。[这是我在该主题上找到的最佳参考。](http://www.kahrel.plus.com/indesign/scriptui.html)我不认为你可以扩展现有的面板。

# magento - Magento中的类别树在前端具有更多级别

> ID：12058143
> 
> 赞同：0
> 
> 时间：2012-08-21T15:21:15.703
> 
> 标签：magento

谢谢.......但是......我有下面的代码，它正在工作到第一级而不是类别树中的更多级别，有人可以帮助我达到第三级和更多...... ........类别树的级别...........这意味着如果我单击父类别，只有那个特定的父级与他的孩子一起打开，所有其他的都会像 Category1 一样关闭-subcategory1 ----subsubcategory1 -subcategory2

类别 2 -子类别 1 -子类别 2

```
 <?php
          $obj = new Mage_Catalog_Block_Navigation();
          $store_cats   = $obj->getStoreCategories();
          $current_cat  = $obj->getCurrentCategory();
           $current_cat = (is_object($current_cat) ? $current_cat->getName() : '');

            foreach ($store_cats as $cat) {
                  if ($cat->getName() == $current_cat) {
                        echo '<li class="current"><a href="'.$this->getCategoryUrl($cat).'">'.$cat->getName()."</a>\n<ul>\n";
                        foreach ($obj->getCurrentChildCategories() as $subcat) {
                        echo '<li><a href="'.$this->getCategoryUrl($subcat).'">'.$subcat->getName()."</a></li>\n";
                  }
                   echo "</ul>\n</li>\n";
                  } else {
                       echo '<li><a href="'.$this->getCategoryUrl($cat).'">'.$cat->getName()."</a></li>\n";
                       }
                 }
         ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:41:49.233

解决这个问题的最简单方法是创建一个递归函数（一个调用自身的函数）。

以下是您可能希望设置代码的方式：

```
//go through all the parent catgeroies
foreach ($store_cats as $cat) {
        // if it's the category we are looking for let's spit it out as an <li>
        if ($cat->getName() == $current_cat) {
                    echo '<li class="current"><a href="'.$this->getCategoryUrl($cat).'">'.$cat->getName()."</a>\n<ul>\n";
                    // let's get all the subcategories no matter how deep (look at function below).
                    getChildCategories();

       }
}
//our new sub-category getter
public function getChildCategories() {

            // lets loop through all the children of the current category and spit out <li> for them    
            foreach ($obj->getCurrentChildCategories() as $subcat) {
                         echo '<li><a href="'.$this->getCategoryUrl($subcat).'">'.$subcat->getName()."</a></li>\n";

                        //lets call ourself again to see whether there are deeper layer to be found
                         getChildCategories();
              }
} 
```

您想要添加到代码中的是一个 if 语句，用于检查是否有子代：

```
 if ($obj->getCurrentChildCategories()) {//then loop through etc.} 
```

这样，您就可以避免在触底时出现错误。

# c# - 每个 NavbarControl 组内的 TreeListControl

> ID：12058158
> 
> 赞同：0
> 
> 时间：2012-08-21T15:22:05.363
> 
> 标签：c#, wpf

我对 WPF 很陌生，我正在尝试在每个导航栏组中创建一个树列表导航。因为导航栏组和树列表的数量是动态的，所以我必须在代码中制作它们，而不是在 XAML 中预定义它们。

到目前为止，我已经测试了以下内容，这些内容旨在定义导航栏组的内容，而不是使用默认项

```
private void CreateGroup2(NavBarControl navBar)
{
    NavBarGroup group2 = new NavBarGroup();
    group2.Header = "Custom Content";
    //Specify that the group's content should be defined via the Content property
    group2.DisplaySource = DisplaySource.Content;

    TreeListControl tree = new TreeListControl();
    tree.ItemsSource = TreeList_DataBinding.Stuff.GetStuff();
    group2.Content = tree;

    navBar.Groups.Add(group2);
} 
```

这给出了一个异常：Grid.InfiniteGridSizeException：默认情况下，不允许无限的网格高度，因为所有网格行都将被渲染，因此网格将非常缓慢地工作。要解决此问题，您应该将网格放入一个容器中，该容器将为网格提供有限的高度，或者您应该手动指定网格的高度或 MaxHeight。请注意，您还可以通过将 TreeListControl.AllowInfiniteGridSize 静态属性设置为 True 来避免此异常，但在这种情况下，网格将运行缓慢。

我有点困惑，因为我没有使用网格？任何人都可以提供任何指示出了什么问题以及如何在每个导航栏组下添加一个treview？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:25:29.450

回答我自己的问题感觉有点不对，但我设法使用以下方法让它工作

```
private void CreateGroup2(NavBarGroup navBarGroup)
{

    System.Windows.Controls.TreeView treeview = new System.Windows.Controls.TreeView();

    TreeViewItem nod = new TreeViewItem();
    nod.Header = "Tree Node1";
    treeview.Items.Add(nod);

    TreeViewItem nod1 = new TreeViewItem();
    nod1.Header = "Tree Node2";
    treeview.Items.Add(nod1);

    TreeViewItem nod2 = new TreeViewItem();
    nod2.Header = "Tree Node3";
    nod1.Items.Add(nod2);

    //StackPanel stcPnl = new StackPanel(); /optiona
    //stcPnl.Children.Add(treeview);
    //navBarGroup.Content = stcPnl;

    navBarGroup.Content = treeview;

    navBarGroup.DisplaySource = DisplaySource.Content;

} 
```

# sql - 使用动态 sql 的替代方法

> ID：12058159
> 
> 赞同：7
> 
> 时间：2012-08-21T15:22:07.187
> 
> 标签：sql, tsql, stored-procedures

我有一个接受输入@featuretype 的sp。@featuretype 将等于“mobile”、“login”或“index”，并将对应于 db 中的一列。

在我的 sp 我有：

```
EXEC(
    'select TOP 3 * from featuredtypes_v where'+' featuredtypes_v.'+@featuretype+'Page=1'+
    ' order by featuredtypes_v.priority desc'
    ) 
```

但是，有人告诉我这会将数据库打开到 sql 注入。我的两个问题是，为什么会这样，为了避免这种情况，我还能怎么写这个查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:30:21.947

你为什么不使用`case`？

```
select TOP 3 * 
from featuredtypes_v F
where
    case
        when @featuretype = 'mobile' then F.MobilePage
        when @featuretype = 'login' then F.LoginPage
        when @featuretype = 'index' then F.IndexPage
    end
    = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:26:38.597

如果用户提供传递给变量的值，或者如果有人找到一种方法来执行存储过程并传入特制的恶意代码，则您的过程可能会被注入。谷歌我的用户名，以获取基于此的有趣漫画。

由于您处于存储过程中，因此您可以检查变量，然后`SELECT`根据提供的变量执行语句：

```
IF @featuretype = 'mobile'
BEGIN
    select TOP 3 * 
    from featuredtypes_v 
    where featuredtypes_v.MobilePage=1
    order by featuredtypes_v.priority desc
END
IF @featuretype = 'login'
BEGIN
    select TOP 3 * 
    from featuredtypes_v 
    where featuredtypes_v.LoginPage=1
    order by featuredtypes_v.priority desc
END
-- etc... 
```

或者，您可以将`WHERE`子句中的条件放在一个查询中：

```
select TOP 3 * 
from featuredtypes_v 
where (featuredtypes_v.MobilePage=1 AND @featuretype = 'Mobile') OR 
    (featuredtypes_v.LoginPage=1 AND @featuretype = 'Login') OR
    (featuredtypes_v.IndexPage=1 AND @featuretype = 'Index')
order by featuredtypes_v.priority desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:49:00.997

一种方法是这样。确保该列存在于表中，然后执行动态sql，否则不存在。

```
if Exists(select * from sys.columns where Name = N'@featuretype'  
            and Object_ID = Object_ID(N'tableName'))
begin

   EXEC(
    'select TOP 3 * from featuredtypes_v where'+' featuredtypes_v.'+@featuretype+'Page=1'+
    ' order by featuredtypes_v.priority desc'
    )

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-04T03:49:02.697

你们都没有回答问题。这是可能发生的 sql 注入

```
txtUserId = getRequestString("UserId");
txtSQL = "SELECT * FROM Users WHERE UserId = " + txtUserId; 
```

现在如果 txtUser = 105 OR 1=1 那么 sql 语句将是这样的

```
SELECT UserId, Name, Password FROM Users WHERE UserId = 105 or 1=1; 
```

您可以通过使用 sql 参数来避免 sql 注入。它验证字符串并且 sql 执行 alwaus 就像它假设的那样

# javascript - Ajax xml 源解析依赖于 jQuery 的点击动作

> ID：12058165
> 
> 赞同：1
> 
> 时间：2012-08-21T15:22:28.107
> 
> 标签：javascript, jquery, ajax, parsing

我有一个 AJAX xml 解析：

```
$.ajax({
    type:"GET",
    url: "data/content_data.xml",
    dataType:"xml",
    success: function(xml) { 
```

单击某些按钮元素后是否有任何选项可以更改源？例如，我点击 button_01 和脚本加载源 from `url: "data/content_data_01.xml"`，点击 button_02 加载源 from `url: "data/content_data_02.xml"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:32:13.290

设置一些按钮：

```
<input type="button" id="B01" value="Get nr. one" />
<input type="button" id="B02" value="Get nr. two"/> 
```

并做一些 jQuery 的东西：

```
$('button').on('click', function() { //attach click handler
    doAjax(this.id.replace('B','')).done(function(xml) { // remove B and do ajax
        //do something with xml in the deferred callback
    });
});

function doAjax(url_id) { //url_id value will be 01 or 02 and ....
    return $.ajax({
        type:"GET",
        url: "data/content_data_"+url_id+".xml", //is inserted here in the url
        dataType:"xml"
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:28:11.433

绝对地。有很多方法可以做到这一点。基本上，您只需为您的 url 值使用字符串变量而不是文字字符串。您也许可以定义一个对象，您将使用它来查找这些值

```
var buttonIDtoURL = {
    "button_01": "data/content_data_01.xml",
    "button_02": "data/content_data_02.xml"
}

$(".button_class").click(function() {
    var urlToUse = buttonIDtoURL[$(this).id];
    $.ajax({
        type:"GET",
        url: urlToUse,
        dataType:"xml",
        success: function(xml) {
            // your success handler here
        }
    });
 }); 
```

# c++ - 如何配置 Qt 调试器以及它需要什么才能工作

> ID：12058172
> 
> 赞同：2
> 
> 时间：2012-08-21T15:22:46.073
> 
> 标签：c++, qt, debugging, qt-creator

好的，所以我在这里真的很困惑，我得到了与启动此线程的 Martin.kv 相同的错误[如何在 Qt Creator 中配置 CDB？](https://stackoverflow.com/questions/9975949/how-to-configure-cdb-in-qt-creator/12057804#12057804)

其中说“用于调试'x86-windows-msvc2010-pe-32bit'类型的二进制文件的首选调试器引擎不可用....详细信息：没有可用于格式'x86-windows-msvc2010-pe的二进制文件的CDB二进制文件-32 位"

我想我必须下载一些东西来解决这个问题，所以我去了这里[http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)我在 32 位系统上安装了 Windows 7，所以我在这个标题下“为 Windows 安装 Windows 7 版本的调试工具”，然后到这里[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=8279](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=8279)下载调试工具视窗。

从我读过的所有内容，在我引用的线程和其他一些内容中，我下载的似乎是正确的。

我承认我搞砸了一点，因为我忘记检查调试器工具的放置位置，因为当它开始下载时，我仍在寻找下载后要做什么。但我很确定它在“C:\Program Files\Microsoft Windows Performance Toolkit”中，但我没有任何称为 Windows 工具包的东西，其他人都说他们的工具包在其中，而且我似乎仍然没有 cdb.exe ..

我下载错了吗？我需要做什么/下载？还有我在哪里可以获得 Qt 站点和许多其他人建议的符号服务器？

抱歉，我是 Qt 的新手，一般来说还有一些编程知识，我的实习计划在一天结束时到期，昨晚它停止了工作，所以我有点吓坏了，但我认为调试器可以帮助，因为它停止工作的原因并没有真正的意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:42:43.230

只有在以下步骤之后，我才让 cdb 与 QtCreator 一起工作：1) 下载并安装适用于 Windows 的调试工具 2) QtCreator->Tools->Options->Build & Run->Tool Chains 3) 将自动检测到的 MS 编译器复制到“手册”第 4 节）设置 cdb.exe 的路径 5）使用“手动”MS 编译器。

也许有一些方法可以避免步骤 3-5（可能会使用环境变量），但所描述的方案工作正常，所以我不介意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:26:21.730

Qt Creator 设置中应该有一个位置，您可以将其指向 Windows 调试工具附带的 cdb.exe。

见这里：[http ://doc.qt.nokia.com/qtcreator-2.5/creator-debugger-engines.html](http://doc.qt.nokia.com/qtcreator-2.5/creator-debugger-engines.html)

# ruby-on-rails - 在单元测试期间连接到 2 个数据库导致错误

> ID：12058173
> 
> 赞同：0
> 
> 时间：2012-08-21T15:22:48.943
> 
> 标签：ruby-on-rails, oracle, unit-testing, postgresql

我已经启动了一个提交到 PostgresSQL 数据库的表单，并且我已经对我的模型进行了大量测试以验证我的验证。但是，我创建了一个自定义验证器，它检查旧版 Oracle 数据库，以验证最终用户以表格形式提供的许可证号是否存在于旧版数据库中。通过命令行调试器，我可以验证我创建的库是否连接到数据库并返回结果，如果不满足条件，自定义验证器会导致模型无效。但是，当我针对我的模型运行单元测试时，测试运行时会发生错误。如果我删除自定义验证，测试运行通过。

```
PG::Error: ERROR:  relation "LICENSE" does not exist
      LINE 4:              WHERE a.attrelid = '"LICENSE"'::regclass
                                              ^
      :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
                    FROM pg_attribute a LEFT JOIN pg_attrdef d
                      ON a.attrelid = d.adrelid AND a.attnum = d.adnum
                   WHERE a.attrelid = '"LICENSE"'::regclass
                     AND a.attnum > 0 AND NOT a.attisdropped
                   ORDER BY a.attnum 
```

从我看到的情况来看，似乎测试正在尝试针对 database.yml 文件中指定的 PostgresSQL 数据库而不是我编写的库中指定的 Oracle 数据库运行自定义验证。我不太确定这是否是原因，或者是否是它发生的原因以及如何解决该问题。

这是我的库文件的样子：

```
module Legacy
  DB_CONFIG = YAML::load(File.open("#{Rails.root}/config/legacy_database.yml"))[Rails.env]

  class Legacy::License < ActiveRecord::Base
    establish_connection DB_CONFIG

    self.table_name = "LICENSE"
    self.primary_key = "LICENSE_ID"
  end
end 
```

这是我的模型：

```
require "#{Rails.root}/lib/legacy.rb"

class Vehicle < ActiveRecord::Base
  belongs_to :user

  validates_presence_of :permit_license, :name
  validate :validate_license

  def validate_license
    license = Legacy::License.where('license_number = ?', license_number)

    if license.empty?
      errors.add(:license_number, 'License not valid')
    end
  end
end 
```

任何有关为什么会发生这种情况的见解都会有所帮助和赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:25:21.923

我认为这是您配置两个数据库的方式。我有类似的情况，一个遗留数据库与一个基于 Rails ActiveRecord 的数据库混合。（在我的情况下是 SQLServer 和 mysql）

这是我如何配置它。（仅显示开发）：

配置/数据库.yml：

```
aimdevelopment:
  adapter: sqlserver
  .... 

development: 
  adapter: mysql2
  ..... 
```

我的旧系统称为 AIM

然后我为我的所有旧模型创建一个基本模型以遵循：

模型/目标.rb：

```
class Aim < ActiveRecord::Base
  establish_connection ("aim#{Rails.env}")
end 
```

然后如果我需要连接到遗留数据库中的表

```
class Product < AIM
  self.table_name 'Product'
  self.primary_key 'ProductID'
end 
```

我认为，当您尝试管理模块中的“建立连接”时，您绕过了导轨这一事实可能是让您搞砸的原因。

# c# - 服务提供者之间的 SAML 2.0 身份验证断言（C#、.net、MVC4、组件空间）

> ID：12058176
> 
> 赞同：0
> 
> 时间：2012-08-21T15:22:59.967
> 
> 标签：c#, asp.net-mvc-4, single-sign-on, saml-2.0

我正在构建的系统有问题。我已经成功实施了一个由 SP 发起的 SSO 系统。但是，当考虑到该系统具有多个必须能够交互和交换数据的独特且完全隔离的服务提供者时，就会出现问题。当一个 SP (SP1) 需要与另一个 SP (SP2) 通信时，它们需要能够在保持安全的同时无缝转换。因此，我假设他们需要能够断言或共享 SAML 数据。

例如，用户尝试通过 SP1 访问系统并被重定向到 IdP。用户针对 IdP 进行身份验证，然后 IdP 将通过 http post 断言回 SP1。用户现在在 SP1 上执行一系列任务，最终需要数据传输或浏览器重定向到 SP2。SP2 不知道 SP1 已成功验证用户身份并收到来自 IdP 的 SAML 响应。这就是我的问题出现的地方。我需要实现一种机制，让 SP2 能够了解用户在 SP1 上的状态。更一般地说，我需要允许一组服务提供者中的任何服务提供者就用户的状态相互断言。但是，我找不到有关完成此任务的“官方”方式的文档。

我已经想到了该问题的多种解决方案，但我怀疑它们中的任何一个至少是“官方的”。一种是在 IdP 上保留 SAML 断言列表，可以由 guid 引用。然后将链接从 SP1 传递到 SP2，该链接将引用控制器操作和 guid，从而允许 IdP 将数据重新声明到 SP2。这似乎缓慢而复杂。两个将在 SP1 上收到响应后以某种方式保留 SAML 响应，并在用户被重定向时以某种方式将数据传递给 SP2。

我可能想多了，把这个过程复杂化了。我可能需要转向 IdP 发起的基于 SSO 的解决方案。我可能正在查看文档中的某些内容。

如果有人能对这个话题有所了解，将不胜感激。我很乐意提供有关该主题的任何其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:38:21.823

如果您控制 IdP（从某种意义上说，您可以在 IdP 端实现一些额外的东西），我会考虑在发布 SAML 令牌时在 IdP 端保留一些信息，然后将信息附加到 SAML 令牌。

假设 SP1 通过重定向到 IdP 登录。您存储此信息（cookie、会话）。然后 SP2 通过重定向到 IdP 登录。如果这是同一个浏览器会话，那么信息仍然存在，在 IdP 端，只是因为您之前已经预先设置了它（cookie、会话）。然后，您可以使用此信息向 SP2 发出任何断言。

我不太明白为什么您必须存储此信息以供 guid 引用。

尽管上述想法仅适用于您的服务联系 IdP 的顺序（SP1 没有信息；SP2 有关于 SP1 的信息；SP3 有关于 SP1 和 SP2 的信息，但是 SP1 仍然没有关于 SP2 和 SP3 的信息，因为它不会启动与 IdP 的另一个对话，因为它已经过身份验证），我认为您可以通过让您的服务 DROP 身份验证信息轻松消除此限制，以便与您的服务的下一次联系需要它启动与 IdP 的对话。

例如，SP1 没有信息，SP2 有关于 SP1 的信息，但是 SP1 想要获取关于 SP2 的信息。为此，SP1 在本地“注销”，以便它转到 IdP 并获取有关 SP2（和任何其他登录方）的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:08:43.710

我们解决问题的方法是针对 IdP 对用户进行身份验证。然后，一旦用户通过身份验证，我们将允许会话在一段时间内保持活动状态。该解决方案通过对 IdP 进行身份验证完全独立于 SP，使 SSO 成为可能。换句话说，不是 SP 跟踪哪些其他 SP 已通过身份验证，因为那是 IdP 的工作。如果用户从浏览器登录到 IdP 并将该浏览器重定向到任何一个分布式 SP，则每当该 SP 向 IdP 发送其身份验证请求时，它将根据自己的会话进行验证并向 SP 断言。

# android - 如果获取了唤醒锁并且我的应用程序崩溃了，我该怎么办？

> ID：12058178
> 
> 赞同：7
> 
> 时间：2012-08-21T15:23:06.387
> 
> 标签：android, process, crash, wakelock, kill-process

当标志设置为 true 时，我的应用程序始终运行后台服务。如果是这种情况，即使应用程序关闭，此后台服务仍需要 CPU 时间。如果我获得了唤醒锁（不是为了“屏幕开启”的目的，而是为了这个后台服务），然后应用程序崩溃或用户 FC 它，那么我无法释放这个唤醒锁。

预期的结果是什么？

Android 是否知道这一点并释放唤醒锁？

我应该以什么方式处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:32:53.613

这类问题也可能发生在 Android 的其他方面。作为我个人遇到的一个例子，如果您不释放相机对象并且您的应用程序崩溃，那么相机将不可用，直到用户重新启动。您可以像这样处理这些类型的情况：

```
// Store the default uncaughtexceptionhandler in a variable.
private Thread.UncaughtExceptionHandler previousHandler = Thread.currentThread().getUncaughtExceptionHandler(originalExceptionHandler);

@Override
public void onCreate(Bundle bundle){
    Thread.currentThread().setUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler(){

        @Override
        public void uncaughtException(Thread thread, Throwable ex) {
            try{ 
               // release your wakelock here.
            }
            catch(Exception e){ 
               // log 
            }
            finally{
               thread.setUncaughtExceptionHandler(previousHandler);
               previousHandler.uncaughtException(thread, ex);
               thread.setUncaughtExceptionHandler(previousHandler);
            };
        }

    }); 
} 
```

您在这里所做的是在遇到异常时覆盖正常的崩溃行为，并让自己有时间在应用程序完全崩溃并且您没有希望恢复之前释放真正需要清理的任何问题点。

# c++ - Google Mock：如何测试这段代码？

> ID：12058180
> 
> 赞同：1
> 
> 时间：2012-08-21T15:23:08.530
> 
> 标签：c++, mocking, googletest, googlemock

我编写了以下代码以使用 Google Mock 进行模拟`Xyz::xyz_func`测试。`Abc::abc_func`

```
#include <iostream>
#include "gmock/gmock.h"
#include "gtest/gtest.h"

using namespace std;
using ::testing::_;
using ::testing::Return;

class Abc
{
    public:
        virtual ~Abc() {}

        virtual bool abc_func(int arg)  = 0;
};

class MockAbc : public Abc
{
    public:
        virtual ~MockAbc() { }

        MOCK_METHOD1(abc_func,  bool(int arg));
};

class AbcImpl : public Abc
{
    public:
        virtual bool abc_func(int arg)
        {
            cout << arg << " :: " << __FILE__ << " :: " << __LINE__ << endl;
            return true;
        }
};

class Xyz : public AbcImpl
{
    public:
        virtual ~Xyz() {}
        virtual bool xyz_func()
        {
            AbcImpl obj;
            return obj.abc_func(1);
        }
};

TEST(AbcTest, func_success)
{
    MockAbc *mock = new MockAbc();

    EXPECT_CALL(*mock,  abc_func(_)).WillOnce(Return(true));

    Xyz test;

    EXPECT_TRUE(test.xyz_func());

    delete mock;
}

int main(int argc, char** argv)
{
    ::testing::InitGoogleMock(&argc, argv);
    return RUN_ALL_TESTS();
} 
```

但我收到以下错误。我想知道我们如何告诉 Xyz 类调用 abc_func 的模拟而不是实际的实现。请你帮助我好吗。

```
1 :: ./gmock_test.cpp :: 30
./gmock_test.cpp:50: Failure
Actual function call count doesn't match EXPECT_CALL(*mock, abc_func(_))...
         Expected: to be called once
           Actual: never called - unsatisfied and active 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:36:12.480

您正在创建一个类型的模拟对象，`MockAbc`但您从不使用它。从您的代码看来，您希望`MockAbc`创建的实例能够自动替换`AbcImpl`您在 中显式创建的对象`Xyz::xyz_func`。

相反，您需要做的是使用[依赖反转](http://en.wikipedia.org/wiki/Dependency_inversion_principle)来允许`xyz_func`在运行时指定 by 使用的对象。

您不需要`Xyz`继承自`AbcImpl`or `Abc`。

* * *

两种可能的解决方案：

```
class Xyz {
public:
    explicit Xyz(Abc& obj) : 
        obj(&) {
    }

    virtual bool xyz_func() {
        return obj->abc_func(1);
    }
private:
    Abc* obj;
}; 
```

或者

```
class Xyz {
public:
    virtual bool xyz_func(Abc& obj) {
        return obj->abc_func(1);
    }
}; 
```

# jquery - 带有背景的 jQuery 幻灯片效果

> ID：12058182
> 
> 赞同：1
> 
> 时间：2012-08-21T15:23:18.820
> 
> 标签：jquery, html, css

我遇到了我想尝试的这种幻灯片效果。基本上是将一个 div 滑到另一个具有深色背景的 div 上。当我将鼠标悬停在图像上时……只是边框变暗了。没有文字显示在图像或任何东西上。你能看看有没有什么不正常的地方吗？？

CSS：

```
#container {
 width:400px;
 height:150px;
 position:relative;
 overflow:hidden;
 z-index:0;
 margin:0 auto;
 background-image:url(../images/slide-bg.png);
 border:10px solid #414141;
}

#container:hover {
 border-color:#303030;
}

#overlay {
 background-color:#000;
 display:block;
 position:absolute;
 top:0;
 left:0;
 width:400px;
 height:150px;
 z-index:1;
}

#hover {
 width:400px;
 display:block;
 height:100px;
 position:absolute;
 z-index:3;
 padding:25px;
 background-color:#1e1e1e;
 padding-top:150px;
 font-size:11px;
 font-family:Arial, Helvetica, sans-serif;
}

#hover p {
 color:#fff;
 font-weight:normal;
} 
```

HTML：

```
<div id="container">
    <div id="overlay">
    </div>
    <div id="hover">
        Some Text here????
    </div>
</div> 
```

查询：

```
$(document).ready(function () {
    var colour = $("#overlay");
    var content = $("#hover");
    content.hide();
    colour.hide();
});

$("#container").hover(function() {
    content.show().css({ "left" : "-400px" }).animate({left : 0}, 300);
    colour.stop().fadeTo(500, .7)
},function() {
    content.animate({left : 400}, 300);
    colour.stop().fadeTo(500, 0)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:31:41.543

在 jQuery 部分——从第 7 行开始，代码在 jQuery onReady 之外——它使用 jQuery。其余的似乎还可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:38:47.583

它在你的 css 中.. 这是因为你有

```
padding-top: 150px; 
```

它将文本推到框下方。

我在下面的小提琴中对其进行了评论，它出现了。

您还想将 .hover 代码放入`$(document).ready`函数中

[http://jsfiddle.net/wirey00/vCe6N/](http://jsfiddle.net/wirey00/vCe6N/)

# c++ - 如何使用静态 C++ 库扩展 Lua？

> ID：12058186
> 
> 赞同：5
> 
> 时间：2012-08-21T15:23:38.257
> 
> 标签：c++, lua

我有一个使用 Lua 5.2.1 的 Visual Studio 2008 C++03 应用程序。我想用一个名为“foo”的模块来扩展 Lua，但是当我调用`require("foo")`我的 Lua 脚本时，我得到了错误：

```
foo_test.lua:1: module 'foo' not found:
    no field package.preload['process']
    no file '!\lua\process.lua'
    no file '!\lua\process\init.lua'
    no file '!\process.lua'
    no file '!\process\ 
```

我的 Lua 脚本：

```
foo.bar() 
```

我的 lua_foo.h 文件：

```
#include <lua.h>
extern "C" int luaopen_foo( lua_State* L ); 
```

我的 lua_foo.cpp 文件：

```
#include "lua_foo.h"
#include <lua.hpp>

static int l_bar( lua_State *L )
{
    puts( "in bar()" );
    return 1;
}

int luaopen_foo( lua_State *L ) 
{
    static const luaL_Reg foo[] = {
        { "bar", l_bar },
        { NULL, NULL }
    };

    luaL_newlib( L, foo );
    return 1;
} 
```

这些被编译到一个静态库“lua_foo.lib”中，该库静态链接到我的主要 Lua 可执行文件。

任何人都可以帮助我了解我要去哪里错了吗？谢谢。我宁愿避免使用 c++ 包装器（目前），并且我不想将此库作为与主 Lua 引擎分开的 DLL 打包。

* * *

**编辑**

问题出在 lua 引擎代码中。我添加了`luaL_requiref`每个 @NicolBolas 的建议。

```
lua_State* L = luaL_newstate();
if( NULL != L )
{
    luaL_openlibs( L );
    luaL_requiref( token.get(), "foo", luaopen_foo, 1 );
    luaL_dofile( L, "foo_test.lua" );
    lua_close( L );
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T17:16:09.350

了解`require`机器是如何工作的以及为什么你的代码不工作是很重要的。

`require`旨在在文件系统和***DLL***中查找 Lua 脚本。静态库不是 DLL；实际上，就 C/C++ 而言，一旦完成链接，静态库与将那些 .c/.cpp 文件直接编译到应用程序中没有什么不同。

当`require`找到具有适当名称的 DLL 时，它会加载它并尝试查找名为 的函数`luaopen_<modname>`，其中`<modname>`是模块的名称。当它执行时，它将执行此函数并将其返回的值存储在已加载模块的内部数据库中。

调用`require`模块将返回此函数返回的任何内容；如果模块已经加载，则从数据库中提取返回值并直接返回。

简单地调用`luaopen_foo`不会*做任何这些*。事实上，简单地调用这个函数是个坏主意。它是一个 Lua 函数，需要*作为 Lua 函数调用*（即：您需要将其推入 Lua 堆栈`lua_pushcfunction`并调用它`lua_call`等等）。

如果您想创建一个*本地*模块（不在 Lua 脚本或 DLL 中，而是从您的代码中公开），那么您需要使用 Lua 工具来执行此操作。具体来说，使用`luaL_requiref`：

```
luaL_requiref(L, "foo", luaopen_foo, 0); 
```

调用它而不是`luaopen_foo`直接调用。这将自动注册来自加载模块的内部数据库的返回`luaopen_foo`值`require`。因此，后续调用`require "foo"`将返回此表。

还有一件事：`do`是Lua中的*关键字*；你不应该对 Lua 表键名使用关键字。你*可以*，但你总是必须引用它们（即：你的脚本必须`foo["do"](...)`调用它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:43:46.323

*   `luaopen_foo`创建一个包含一个函数的表，但它不会以任何方式将其暴露给 Lua。如果你想访问它，你需要将它分配给你的脚本可以访问的东西。你可以使用包机制来做到这一点，或者只是将它分配给一个全局的（这是 Lua 的内置库所做的）。
*   您有一个名为 的字段`do`，如果您想使用`foo.do`语法，这是有问题的，因为`do`它是一个关键字。
*   Lua 函数的返回值告诉 Lua 你在堆栈上留下了多少值。你的`l_do`函数在于它的返回值。
*   在 的情况下`luaopen_foo`，由于您直接调用它并忽略它的返回值，因此它根本不需要返回任何内容。

将您的代码更改为：

```
static int l_bar( lua_State *L )
{
   puts("l_bar called.");
   return 0;
}

void luaopen_foo( lua_State *L ) 
{
   static const struct luaL_Reg foo[] = {
      { "bar", l_bar },
      { NULL, NULL }
   };
   luaL_newlib( L, foo );   // create table containing `bar`
   lua_setglobal(L, "foo"); // assign that table to global `foo`
} 
```

并将您的脚本更改为：

```
foo.bar() 
```

# sql-server - MS SQL 查询安全吗？

> ID：12058199
> 
> 赞同：3
> 
> 时间：2012-08-21T15:24:31.740
> 
> 标签：sql-server, sql-server-2008, asp-classic, parameters, sql-injection

我对这类事情没有经验，所以我想问一下我是否要使用下面的代码，我可以免受 MS SQL 注入攻击/类似的事情吗？

```
' OPEN DATABASE
dim objConn,objRS,objTRS,objUnit

Set objConn = Server.CreateObject("ADODB.Command") 
objConn.ActiveConnection = "Driver={SQL Server};Server=MSSQLSrv;Database=DbTest;UID=blablabala;PWD=blablabala"

strQuery = "SELECT USERNAME,PASSWORD from CUSTOMERS where EMAIL=?"
objConn.CommandText=strQuery 
objConn.Parameters(0) = Request.QueryString("email")
SET objRS = objConn.execute(strQuery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:26:49.317

通过使用参数化，您可以防止 SQL 注入。

**但是**您不能防止跨站点脚本攻击。

此外，您应该在数据库中散列您的用户密码，并检查与散列的匹配，而不是将其存储为纯文本。

通过允许网站`select`对客户表执行操作，您的数据也不是特别安全。如果您的网络服务器受到威胁，您的数据也会受到威胁。减少此漏洞的一种方法是在代码中使用存储过程而不是原始 SQL。

（为了您的理智和未来的就业能力，您可能希望从经典的 ASP 转移到 .Net :)）

# sql - SQL中竖线的使用

> ID：12058200
> 
> 赞同：4
> 
> 时间：2012-08-21T15:24:34.240
> 
> 标签：sql, syntax

我一直在运行（别人的）这样的代码

```
Case
When (variable & (2|4|8|16)>0) Then ...
WHEN (variable & (1|32)>0 Then ...
...
End 
```

`variable`我认为这里发生的事情是它正在测试变量的 2^1、2^2、2^3 或 2^4 位置是否有 1 或 0 。这是正确的吗？无论哪种方式，我仍然不清楚为什么这个表达式是这样写的。我无法找到有关此逻辑的任何文档，主要是因为我不知道该怎么称呼它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:25:39.263

没错，“管道”符号`|`对应于按位 OR 运算符，而与号`&`对应于按位 AND 运算符（至少在某些数据库中）。

他们正在使用那些按位运算符检查位。他们这样做的最可能原因是“提高可读性”。例如，在写入时更容易查看正在检查哪些位

```
2|4|8|16 -- rather than 30
1|32     -- rather than 33 
```

# c++ - C++中显式构造函数调用的值初始化？

> ID：12058201
> 
> 赞同：0
> 
> 时间：2012-08-21T15:24:35.463
> 
> 标签：c++, class, default-constructor, value-initialization

> **可能重复：**
> [以下短语在 C++ 中是什么意思：零、默认和值初始化？](https://stackoverflow.com/questions/1613341/what-do-the-following-phrases-mean-in-c-zero-default-and-value-initializat)

有很多地方人们说过，对类构造函数的显式调用会导致值初始化[当不存在使用定义的构造函数时]，这不是由默认构造函数[这是一个无操作的构造函数]完成的，而是完全不同的东西。

如果没有调用构造函数，实际会发生什么或在这种情况下什么是值初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:27:43.447

> 首先，如果没有调用构造函数，实际会发生什么

构造对象时始终调用类类型的构造函数，无论是用户定义的还是编译器生成的。对象已初始化，但成员可以保持未初始化状态。这使得问题的第二部分过时了。

> 其次，是否有支持/提及/解释这种行为的文档？

万能的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:30:10.497

这仅适用于**聚合**：考虑一下：

```
struct Holder
{
   Aggregate a;
   NonAggr   n;

   Holder(int, char) : a(), n() { }
   Holder(char, int) { }
};

Holder h1(1, 'a');
Holder h2('b', 2); 
```

假设`Aggregate`是一个聚合类型。现在`h1.a`是值初始化，它对每个成员进行`h2.a`值初始化，而是默认初始化，它对每个成员进行默认初始化。成员也是如此`n`，但如果`NonAggr`是非聚合类类型，则将始终调用其默认构造函数。

# ios - 在 iOS 上为 file:// URL 使用自定义 NSURLProtocol 会导致“帧加载中断”错误

> ID：12058203
> 
> 赞同：11
> 
> 时间：2012-08-21T15:24:38.807
> 
> 标签：ios

我想将更改的文件加载到 UIWebView 中，并且我希望它们在 file:// 方案下加载，这样我就可以在我的页面中包含其他 file:// 资源（例如 html5 视频元素）。为此，我实现了自己的 NSURLProtocol 并覆盖了 file:// URL 子集的加载。

我的`startLoading`方法看起来像：

```
- (void) startLoading {
    ... data is populated ...
    [protocolClient URLProtocol:self didLoadData:data];
    [protocolClient URLProtocolDidFinishLoading:self];
} 
```

这在 iOS4/5 上运行良好，但在 iOS 6 beta 4 上出现以下错误：

```
2012-08-21 16:06:07.236 TemplateApp[57283:1d403] 57283: CFNetwork internal error (0xc01a:/SourceCache/CFNetwork_Sim/CFNetwork-606/Connection/URLConnectionClient.cpp:2341)
/SourceCache/WebCore_Sim/WebCore-1634/wak/WKView.mm:385 void WKViewAddSubview(WKViewRef, WKViewRef):  invalid parameter
2012-08-21 16:06:07.272 TemplateApp[57283:1e603] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSSetM addObject:]: object cannot be nil'
*** First throw call stack:
(0x29d0552 0x2733e7e 0x2a5dc08 0x69c6c1e 0x69c4c88 0x69c543b 0x5b40dbd 0x5b40f0f 0x5b3c240 0x5ff8060 0x5ff75d1 0x5eb8d08 0x65a4fb2 0x678486f 0x677fa3d 0x7b3ab1 0x7b2d63 0x7f0e5a 0x2972ebd 0x7f14dc 0x7f1455 0x6db410 0x29544ff 0x2953f2f 0x2976cf4 0x2976504 0x29763db 0x69d0530 0x907caed9 0x907ce6de)
libc++abi.dylib: terminate called throwing an exception 
```

我通过添加`didReceiveResponse`对我的`startLoading`方法的调用解决了这个问题，如下所示：

```
- (void) startLoading {
    ... data is populated ...
    [protocolClient URLProtocol:self didReceiveResponse:[[NSURLResponse alloc] init] cacheStoragePolicy:NSURLCacheStorageAllowed]
    [protocolClient URLProtocol:self didLoadData:data];
    [protocolClient URLProtocolDidFinishLoading:self];
} 
```

但是现在在 iOS 5 和 6 上尝试加载页面时出现以下错误：

```
Webview error: Error Domain=WebKitErrorDomain Code=102 "Frame load interrupted" UserInfo=0x9d4c0a0 {NSErrorFailingURLKey=file:///src/index.html, NSErrorFailingURLStringKey=file:///src/index.html, NSLocalizedDescription=Frame load interrupted} 
```

我在`didReceiveResponse`方法中尝试了各种不同的 NSURLResponse 对象，但它们都不允许 WebView 加载页面。使用 file:// 以外的 URL 方案也可以，但是我不能将 file:// 路径用于嵌入的资源，例如 HTML5 视频。

有没有办法让我将特定 file:// URL 的动态内容加载到适用于 iOS 6 beta 4 的 UIWebView 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T16:30:48.703

也遇到了这个。这是我认为可行的解决方法，但不适用于`history.back()`并且需要对 UIWebView 的全局引用。

```
- (void)startLoading {
    NSURL* insteadURL = ...;
    NSURLRequest* request = [self request];
    BOOL isTopLevelNavigation = [request.URL isEqual:request.mainDocumentURL];

    // iOS 6+ just gives "Frame load interrupted" when you try and feed it data via a URLProtocol.
    if (isTopLevelNavigation) {
        [gWebView loadData:[NSData dataWithContentsOfURL:insteadURL] MIMEType:@"text/html" textEncodingName:@"utf8" baseURL:[request URL]];
    } else {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:37:05.693

我目前在将内容加载到 UIWebView 时遇到了一些其他问题，但我认为您需要`NSURLResponse`使用[`initWithURL:MIMEType:expectedContentLength:textEncodingName:`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLResponse_Class/Reference/Reference.html)

否则，我认为您没有有效的响应对象。我遇到的问题是，在我被调用之前，我得到了“错误的 URL” `startLoading`。

更新：我现在开始工作了，显然我`canonicalRequestForRequest:`很傻

# iphone - 如何使 UIToolbar 具有清晰的背景？

> ID：12058208
> 
> 赞同：15
> 
> 时间：2012-08-21T15:24:55.313
> 
> 标签：iphone, objective-c, ios, uinavigationbar, uitoolbar

我有一个带有白色色调的 UIToolbar，带有一个条形按钮项，然后是一些灵活的空间，然后是另一个条形按钮项。我想让工具栏完全清晰，以便我可以看到灵活空间下的内容（我不关心看到按钮后面的内容）。有没有办法做到这一点？我尝试将工具栏设置为半透明，但这并不能完全清楚。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-16T11:24:02.980

```
[self.toolbar setBackgroundImage:[UIImage new]
              forToolbarPosition:UIToolbarPositionAny
                      barMetrics:UIBarMetricsDefault];

 [self.toolbar setBackgroundColor:[UIColor clearColor]]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T15:29:50.403

子类 UIToolbar，并实现以下方法：

```
- (void)drawRect:(CGRect)rect 
{
  [[UIColor colorWithWhite:0 alpha:0.6f] set]; // or clearColor etc
  CGContextFillRect(UIGraphicsGetCurrentContext(), rect);
} 
```

[在此处](https://stackoverflow.com/questions/6250439/transparent-uitoolbar)查看更多详细信息

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-10T13:38:33.493

像这样设置toolbarStyle -1

```
 tools.barStyle = -1; // clear background 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-14T14:53:18.910

哈基，对不起，但到目前为止我发现在 iOS 7 和 iOS 6 中可靠工作的唯一方法是这样做：

```
[[toolbar.subviews objectAtIndex:0] removeFromSuperview]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-21T01:02:32.223

如果您想要一个全局解决方案，请利用`UIAppearance`代理：

`UIToolbar *toolbarAppearance = [UIToolbar appearance]; [toolbarAppearance setBackgroundImage:[[UIImage alloc] init] forToolbarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T05:54:11.023

它可以在 iOS 6+ 中通过将属性设置`translucent`为“YES”来完成，而无需子类化。

这在下面的 iOS 5 中不起作用。这是在没有子类工具栏的情况下如何完成的：

```
const float colorMask[6] = {222, 255, 222, 255, 222, 255};
UIImage *img = [[UIImage alloc] init];
UIImage *maskedImage = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(img.CGImage, colorMask)];

[self.toolbar setBackgroundImage:maskedImage forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-05T13:07:31.450

Swift 5.1中的**@ievgen**答案中有一个解决方案

```
toolbar.setBackgroundImage(UIImage(), forToolbarPosition: .any, barMetrics: .default)
toolbar.backgroundColor = .clear 
```

如果要清除分隔符灰线

```
toolbar.setShadowImage(UIImage(), forToolbarPosition: .any) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-12-26T12:18:41.433

Swift 3 版本的已接受答案：

```
 self.toolbar.isTranslucent = true
    self.toolbar.setBackgroundImage(UIImage(),
                               forToolbarPosition: UIBarPosition.any,
                               barMetrics: UIBarMetrics.default)

    self.toolbar.setShadowImage(UIImage(), forToolbarPosition: UIBarPosition.any) 
```

# javascript - 在 extjs4 中获取已加载的商店

> ID：12058210
> 
> 赞同：3
> 
> 时间：2012-08-21T15:25:05.970
> 
> 标签：javascript, sencha-touch, extjs4, extjs

当我尝试从控制器获取已加载的存储时，我得到了 null。加载也是成功的。我证实了这一点。

我有如下商店。

```
Ext.define('GridApp.store.schemedatastore',{
    extend: 'Ext.data.Store',
    model: 'GridApp.model.schemedatamodel',
    autoLoad: true,
    alias: 'store.schemedata',
    storeId: 'schemedatastoreid',
    constructor:function(){
        console.log('Calling parent');
        this.callParent(arguments);
        },
    listeners: {
        load:function(store,records,isSuccessful){
            if(isSuccessful){
                console.log('Load successful');
            }
            console.log(records[0].get('name'));
            console.log('scheme Data store loaded too.');
        },
    }
}); 
```

在我的控制器中，我添加了喜欢，

```
stores: ['schemesstore',
             'schemedatastore'], 
```

我尝试在控制器中以这两种方式访问​​，

`Ext.getStore('schemedatastoreid');`它返回 null 并 `this.getschemedatastoreStore();`表示它是控制器中的未定义函数。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T15:30:42.527

尝试以下任何一种：

```
this.getSchemedatastoreStore()

// the non-alias version of getStore    
Ext.StoreManager.lookup('schemedatastoreid') 

// in case MVC behavior overrides your storeId config
Ext.StoreManager.lookup('schemedatastore') 
```

如果您没有定义自己的，MVC 模式将自动为您的商店提供商店类名称作为商店 ID。

因此，如果您删除`storeId: 'schemedatastoreid'`配置，那么您将自动获得 storeId 的`schemedatastore`. 我通常不给 MVC 商店一个单独的`storeId`配置，所以我不知道它是否会在某处引起冲突。我通常也不会给我的商店起别名，这也可能导致该`getStore`功能出现一些困难。

# java - 文本字段上的无限焦点循环

> ID：12058212
> 
> 赞同：1
> 
> 时间：2012-08-21T15:25:14.957
> 
> 标签：java, swing, focus, infinite-loop, error-checking

我有 2 个 JTextField：

```
JTextField txtJobType, txtPriorityCode; 
```

这是我需要的功能：

当用户在 txtJobType 中输入“管理”并点击选项卡（或单击离开）时，将进行错误检查以查看该字段是否为空或输入的文本是否存在于数据库中。我这样做的方式是：

```
private void txtJobTypeFocusLost(java.awt.event.FocusEvent evt) {                                     
    System.out.println("JobType Focus Lost");
    if (!checkFieldExists(txtJobType.getText(), "jobType", "jobCode",
            JobType.class) || txtJobType.getText().isEmpty()) {
        txtJobType.requestFocusInWindow();
        txtJobType.selectAll();
    } else {
    }
} 
```

因此，如果该字段不存在或文本为空，则将焦点返回到 txtJobType 并突出显示所有文本（如果有）

这没有问题。但是，我有 txtPriorityCode 字段，它需要具有完全相同的行为。所以我做了：

```
private void txtPriorityCodeFocusLost(java.awt.event.FocusEvent evt) {                                          
    System.out.println("PriorityCode Focus Lost");
    if (!checkFieldExists(txtPriorityCode.getText(), "priority", "priorityCode",
            Priority.class) || txtPriorityCode.getText().isEmpty()) {
        txtPriorityCode.requestFocusInWindow();
        txtPriorityCode.selectAll();
    }
} 
```

这就是问题开始的地方：如果用户将 jobType 和 tabs 留给 Priority，那么代码会尝试将焦点返回给 jobtype，但由于此时priority 也是空白的，它会尝试从 jobtype 中取回焦点，从而导致此输出：

```
PriorityCode Focus Lost
JobType Focus Lost
PriorityCode Focus Lost
JobType Focus Lost 
```

感谢任何有关如何实现此行为的帮助，因为我必须为至少 10 个其他文本字段执行此操作。

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T16:07:19.093

您不应该摆弄失去焦点或其他低级结构。相反，为什么不按照[这个例子](https://stackoverflow.com/a/11042759/522444)和[这个](https://stackoverflow.com/a/11818183/522444)例子简单地使用一个 InputVerifier呢？

例如，它可能看起来像这样：

```
import javax.swing.*;

public class InputVerifierEg {
   private JPanel mainPanel = new JPanel();
   private JTextField txtJobType = new JTextField(10);
   private JTextField txtPriorityCode = new JTextField(10);

   public InputVerifierEg() {
      txtJobType.setInputVerifier(new MyInputVerifier("jobType", "jobCode",
            JobType.class));
      txtPriorityCode.setInputVerifier(new MyInputVerifier("priority", "priorityCode",
            Priority.class));

      mainPanel.add(new JLabel("Job Type:"));
      mainPanel.add(txtJobType);
      mainPanel.add(Box.createHorizontalStrut(15));
      mainPanel.add(new JLabel("Priority Code:"));
      mainPanel.add(txtPriorityCode);

   }

   public JPanel getMainPanel() {
      return mainPanel;
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("InputVerifierEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new InputVerifierEg().getMainPanel());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class MyInputVerifier extends InputVerifier {
   private String fieldName;
   private String codeName;
   private Class<?> classType;

   public MyInputVerifier(String fieldName, String codeName, Class<?> classType) {
      this.fieldName = fieldName;
      this.codeName = codeName;
      this.classType = classType;
   }

   @Override
   public boolean verify(JComponent input) {
      JTextField tField = (JTextField) input;

      // assuming that the checkFieldExists is a static method of a utility class
      if (!FieldCheckerUtil.checkFieldExists(tField.getText(), fieldName,
            codeName, classType)) {
         return false;
      }

      if (tField.getText().trim().isEmpty()) {
         return false;
      }
      return true;
   }

   @Override
   public boolean shouldYieldFocus(JComponent input) {
      JTextField tField = (JTextField) input;

      if (verify(input)) {
         return true;
      } else {
         tField.selectAll();
         // show JOptionPane error message?
         return false;
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:36:46.133

也许做一项检查：

```
txtPriorityCode.getText().isEmpty() 
```

然后另一方面，测试是否：

```
!txtPriorityCode.getText().isEmpty() && txtJobType.getText().isEmpty() 
```

*即*，如果第一个不为空，则只检查第二个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:46:46.620

就个人而言，我讨厌像这样完成验证并阻止我在我认为合适的表单中移动字段。为什么不在提交表单时对所有字段进行验证并突出显示当时无效的字段？

# xml - 架构位置未复制到具有 Xalan 管道扩展的 XSLT 中

> ID：12058222
> 
> 赞同：0
> 
> 时间：2012-08-21T15:25:59.027
> 
> 标签：xml, xslt, xalan

我得到了带有“xsi：schemaLocation =”location1 location2 ...”和很多“xmlns：someNs”的xml文件。虽然命名空间将被复制到新文档中，但schemaLocations不是，我真的不知道为什么它们被删除（所有命名空间和 schemaLocations 也在我的样式表中）。

谷歌表示，当不在文档或类似的东西中使用它们时，它们将被删除，我必须自己添加它们，但似乎我不能......我正在使用 xalan 管道来管道一些基本的转换，现在我试图在管道的末端添加一个样式表来再次添加位置。这是我的最后一张纸：

```
<xsl:template match="node()|@*">
  <xsl:copy>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="/*">
    <xsl:attribute name="xsi:schemaLocation">
      <xsl:text>MYLOCATION</xsl:text>
    </xsl:attribute>

    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>

</xsl:template> 
```

我有几个带有元素标签的变体，没有副本……最好的结果是一个带有 schemaLocation 的双根元素和一个带有所有命名空间的双倍根元素，我真的无法弄清楚这一点。

谢谢你的帮助 ;）

€：似乎我所有的个人样式表都在工作，除了 xalan 管道。

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:pipe="http://xml.apache.org/xalan/PipeDocument"
                extension-element-prefixes="pipe"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xsi:schemaLocation="someschema"
              >

  <xsl:param name="source"/>
  <xsl:param name="target"/>

  <!-- I think this block has no effect -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">

    <pipe:pipeDocument 
          source="{$source}"
          target="{$target}">
      <stylesheet href="sheet1.xsl"/>
      <stylesheet href="sheet2.xsl"/>
      <stylesheet href="sheet3.xsl"/>
    </pipe:pipeDocument>

  </xsl:template>

</xsl:stylesheet> 
```

Xalan 不再使用 -IN 和 -OUT 调用，我认为这就是我丢失位置的地方，尽管我不明白为什么 xmlns 声明仍在输出中。每张纸都进行自己的身份转换，如果在没有管道的情况下使用，则可以按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:54:29.117

目前尚不清楚为什么`xsi:schemaLocation`属性会从您的输出中消失，主要是因为您没有显示输入数据、输出数据或从该输入生成输出的模板。

您显示的模板无法产生您描述的结果，因为它们根本无法产生任何结果。（我怀疑您为了简洁而将它们编辑了下来，这通常是一个好主意，但您已经走得太远了。）模板匹配`/*`正在尝试编写一个属性，而没有在输出中打开任何元素；如果此模板的某些变体有效但产生了双倍的根元素，我猜这是因为您`xsl:copy`在模板中有两个元素。

从身份样式表的工作版本开始，我希望您会看到命名空间声明和 `xsi:schemaLocation`属性都出现在输出中。

例如，考虑这个样式表（它省略了注释和处理指令的模板）：

```
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  version="1.0">
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

将其应用于此输入：

```
<test 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:foo="http://example.com/foo"
  xmlns:bar="http://example.com/bar"
  xsi:schemaLocation="http://example.com/foo foo.xsd
                      http://example.com/bar nss/bar.xsd">
  <data/>
</test> 
```

我得到的结果是：

```
<test 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:foo="http://example.com/foo" 
  xmlns:bar="http://example.com/bar" 
  xsi:schemaLocation="
    http://example.com/foo foo.xsd
    http://example.com/bar nss/bar.xsd">
  <data/>
</test> 
```

`xsi:schemaLocation`在那儿。命名空间声明在那里。如果它们不在您现有样式表的输出中，则逐步更改此工作代码，使其更像您现有的代码。当模式位置属性和/或命名空间停止出现在输出中时，您已经发现了错误。

如果我不得不猜测，我猜该`xsi:schemaLocation`属性正在被您现有的样式表删除，因为您在输入中没有匹配它的模板，和/或因为与其父级匹配的模板不包含`xsl:apply-templates`与`select="@*"`.

# php - PHP 不会从数组中读取 sha1-hash（字符串） - 行为不稳定

> ID：12058229
> 
> 赞同：0
> 
> 时间：2012-08-21T15:26:11.927
> 
> 标签：php, arrays, for-loop, sha1

我正在尝试根据子数组中保存的 sha1 代码访问数组的某些子数组。我有以下代码为我工作：

```
//I take a sha1 string of 40chars from GET
if(isset($_REQUEST['sha1'])){

  //then I iterate through the array and check if the subarrays sha1 matches
  for($i = 0; $i < count($scomplaints); $i++) {
    if($scomplaints[$i]['sha1'] == $_REQUEST['sha1']){

      //once a match is found I delete the match...
      unset($scomplaints[$i]);

      //... reserialize the array and update it in the database
      $new_c = serialize($scomplaints);
      // ( add new array to database )
      break;
    }
  }
} 
```

很直接。唯一的问题是：在某些随机情况下，循环不会读取子数组的 sha1 值。相反，它从数组中读取一个空字符串。

但是，当我对数组进行 var_dump 时，sha1 代码清楚地保存在数组中，并且与我从 GET 获得的代码相同（我进行了手动比较）。

我无法弄清楚问题是什么，也许是一些编码错误？也许你们中的一个可以帮助我解决这个问题？

感谢您的所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:32:45.367

我解决了。问题是数组没有被 unset($array) 重新索引。一旦我用 array_values($array) 重新索引它，它就会再次工作。

# apache - 错误的重定向行为

> ID：12058230
> 
> 赞同：0
> 
> 时间：2012-08-21T15:26:12.927
> 
> 标签：apache, .htaccess, codeigniter, rewrite

我遇到了一个问题，因为我找不到导致这种行为的原因。

简而言之，问题是：我有一个网站。当我去[http://mysite.com](http://mysite.com) - 加载正常。网址不变。当我去[http://www.mysite.com](http://www.mysite.com) - 重定向到[http://mysite.com/index.php/](http://mysite.com/index.php/)

最初我在 .htaccess 中有一些规则，但现在 - 我评论了所有这些规则，因此使用干净的 .htaccess 重现了该行为。

在codeigniter的配置中，我有：

```
$config['base_url'] = "http://mysite.com/";
$config['index_page'] = ""; 
```

我检查了 apache 配置 - 没有找到任何可能表现得像这样的重定向。

任何想法在哪里挖掘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:17:52.483

这对我来说是相当愚蠢的——但把它放在这里，也许是为了其他人，这有助于不要像我一样花太多时间。

问题是我使用的是本地版本的站点，并且最近更改了主机文件。现在只为主域编写了 127.0.0.1，而不是为子域编写了 127.0.0.1。

所以基本上当我进入 www.site.com 时，我是从网站的生产版本下载的。真是愚蠢的错误。

# c# - ASP.Net MVC 中是否存在线程敏捷性？

> ID：12058231
> 
> 赞同：3
> 
> 时间：2012-08-21T15:26:17.823
> 
> 标签：c#, asp.net, asp.net-mvc, multithreading, threadpool

在 ASP.Net 中，请求可以从一个线程迁移到另一个线程（线程敏捷性）： http: [//piers7.blogspot.fr/2005/11/threadstatic-callcontext-and_02.html](http://piers7.blogspot.fr/2005/11/threadstatic-callcontext-and_02.html)

我们可以看到使用 ASP.Net MVC 的请求从一个线程迁移到另一个线程吗？如果有，什么时候？过滤器、控制器构造器和操作是否在同一个线程上执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:28:59.867

绝对地。

例如，您的控制器可能使用 async / await 从外部 Web 服务加载资源。该请求的执行将在异步操作期间暂停，当它恢复时，它将在线程池中的任何可用线程上恢复

# java - Spring 应用程序未在调试模式下部署

> ID：12058237
> 
> 赞同：3
> 
> 时间：2012-08-21T15:26:33.007
> 
> 标签：java, spring, debugging, spring-mvc

我有一些奇怪和令人沮丧的错误，它阻止调试模式。它突然开始，我无法摆脱它，即使试图恢复最后的更改。

在正常模式下运行我的 webApp 时，它可以正常部署和运行，但是在调试模式下运行时，它无法完成，我的最后一个堆栈跟踪信息是：

```
[...] INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/mvc/i18n.xml]
DEBUG: org.springframework.web.context.support.XmlWebApplicationContext - Bean factory for WebApplicationContext for namespace 'appServlet-servlet': org.springframework.beans.factory.support.DefaultListableBeanFactory@2222af8c: defining beans [gruposTrabajoServiceImpl,usuarioServiceImpl,vacacionesServiceImpl,calendarioServiceImpl,administracionServiceImpl,empleadosServiceImpl,aeropuertosServiceImpl,rotacionesServiceImpl,rotacionesController,empleadosController,vacacionesController,aeropuertosController,loginController,includeController,administracionController,gruposTrabajoController,informesController,festivoDAOImpl,empleadoDAOImpl,limitacionDAOImpl,habilidadEmpDAOImpl,fpCalendarioEmpDAOImpl,autorizacionDAOImpl,minimosPatronDAOImpl,ceAnoEmpDAOImpl,poaUpaDAOImpl,turnoRotacionDAOImpl,patronRotacionDAOImpl,anoEmpDAOImpl,grupoTrabajoDAOImpl,incidenciaDiaDAOImpl,telefonoEmpDAOImpl,usuarioDAOImpl,escalaDAOImpl,limitacionEmpDAOImpl,visibleCntMinimosDAOImpl,configuracionContratoEscalaDAOImpl,puntuacionDAOImpl,vpCalendarioEmpDAOImpl,usuarioEscalaDAOImpl,anoEscalaDAOImpl,vpCupoGtDAOImpl,habilidadDAOImpl,formacionEmpDAOImpl,dominioDAOImpl,formacionDAOImpl,tipoTurnoDAOImpl,incidenciaDAOImpl,observacionDiaDAOImpl,rotacionDAOImpl,turnoDAOImpl,calendario,mes,perfilAspect,excelEscala,excelAnual_,excelEscala_,globalConstants,dominioConstants,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#1,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#1,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#2,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#2,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#3,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#3,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.web.servlet.handler.SimpleMappingExceptionResolver#0,messageSource,localeResolver,org.springframework.web.servlet.handler.MappedInterceptor#1]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@4349e631
DEBUG: org.springframework.web.context.support.XmlWebApplicationContext - Using MessageSource [org.springframework.context.support.ResourceBundleMessageSource: basenames=[messages]]
DEBUG: org.springframework.web.context.support.XmlWebApplicationContext - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@6e3f6d73]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2222af8c: defining beans [gruposTrabajoServiceImpl,usuarioServiceImpl,vacacionesServiceImpl,calendarioServiceImpl,administracionServiceImpl,empleadosServiceImpl,aeropuertosServiceImpl,rotacionesServiceImpl,rotacionesController,empleadosController,vacacionesController,aeropuertosController,loginController,includeController,administracionController,gruposTrabajoController,informesController,festivoDAOImpl,empleadoDAOImpl,limitacionDAOImpl,habilidadEmpDAOImpl,fpCalendarioEmpDAOImpl,autorizacionDAOImpl,minimosPatronDAOImpl,ceAnoEmpDAOImpl,poaUpaDAOImpl,turnoRotacionDAOImpl,patronRotacionDAOImpl,anoEmpDAOImpl,grupoTrabajoDAOImpl,incidenciaDiaDAOImpl,telefonoEmpDAOImpl,usuarioDAOImpl,escalaDAOImpl,limitacionEmpDAOImpl,visibleCntMinimosDAOImpl,configuracionContratoEscalaDAOImpl,puntuacionDAOImpl,vpCalendarioEmpDAOImpl,usuarioEscalaDAOImpl,anoEscalaDAOImpl,vpCupoGtDAOImpl,habilidadDAOImpl,formacionEmpDAOImpl,dominioDAOImpl,formacionDAOImpl,tipoTurnoDAOImpl,incidenciaDAOImpl,observacionDiaDAOImpl,rotacionDAOImpl,turnoDAOImpl,calendario,mes,perfilAspect,excelEscala,excelAnual_,excelEscala_,globalConstants,dominioConstants,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#1,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#1,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#2,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#2,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#3,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#3,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.web.servlet.handler.SimpleMappingExceptionResolver#0,messageSource,localeResolver,org.springframework.web.servlet.handler.MappedInterceptor#1,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@4349e631 
```

它总是停留在同一个地方预实例化单例......

我已经尝试在 Tomcat 7 和 weblogic 10.3.4 中运行我的应用程序，但我得到了相同的结果。

任何想法？没有调试模式我迷路了。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:33:29.217

长镜头，但也许你在你的一个类的代码中添加了一些断点，当处于调试模式时，执行等待你明确地发出信号继续？

您可能打开了一些调试窗口。它在那里显示什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T15:12:44.653

刚刚遇到与 STS IDE 版本 3.6.4 完全相同的问题，似乎它在断点处停止而没有突出显示。因此，我对这种情况一无所知。我清除了所有断点，它现在神奇地工作了。

# jquery - Backbone + JQuery 插件不起作用（用 CoffeeScript 编写）

> ID：12058238
> 
> 赞同：0
> 
> 时间：2012-08-21T15:26:34.150
> 
> 标签：jquery, jquery-mobile, backbone.js, coffeescript

好的，我有一个简单的 JQuery 插件，当应用于 div 时，它将使用预加载器图像整齐地加载该 div 中的所有图像。这工作正常。

但是，在 Backbone 中，我在页面加载后将数据从 JSON 附加到元素。因此下面的代码将不起作用。

```
$(document).ready( ->
    $("#theList").preloader()
) 
```

所以我需要在我的列表生成后将“$("#theList").preloader()”放在我的渲染函数中..

```
class HomeView extends Backbone.View
constructor: ->
    super

initialize: ->
    @isLoading = false

events: {
     "click #nextPage": "nextPage"
     "click #prevPage": "prevPage"  
}

template: _.template($('#home').html())
theListTemplate: _.template($('#theList').html())

render: ->
    $(@el).append(@template)
    @loadResults()
    $("#theList").preloader() #<----------------- DOESN'T WORK NOW

loadResults: () ->
    @isLoading = true

    Properties.fetch({
        success: (data) =>

            #Append properties to list
            $('#theList').append(@theListTemplate({data: data.models, _:_})).listview('refresh')

        error: ->
            @isLoading = false
            alert('Unable to load information')
    }) 
```

但是，现在代码行位于主干视图/模型/控制器或其他任何内容中，它不起作用..

作为参考，我像这样加载我的应用程序..

```
$(document).ready( ->
    console.log('document ready')
    app.AppRouter = new AppRouter()
    Backbone.history.start()
) 
```

任何帮助将非常感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:34:35.453

假设预加载器不打算在添加的节点上操作`loadResults#fetch#success`（因为在您调用预加载器时 fetch 尚未返回），我怀疑问题是，在`render()`函数执行期间，视图`el`不是一部分DOM 还没有。

如果你调用`HomeView`喜欢

```
myHomeView = new HomeView()
$('some selector').append(myHomeView.render().el) 
```

HomeView 的 el 尚未添加到 DOM，它在一个分离的文档中。

因此 jQuery 选择器`$("#theList")`返回一个空的结果 - 因为它搜索 DOM。这可以通过 console.log'n 选择器的结果轻松验证，或者使用调试器放置断点并使用控制台进行测试。

值得庆幸的是，修复很容易。您需要通过将选择器范围限定为视图来引用分离的文档，或者使用[范围为视图的 jQuery 引用](http://backbonejs.org/#View-dollar)：

```
@$("#theList").preloader() 
```

或者，自己做

```
$(@el).find("#theList").preloader() 
```

# javascript - 用于 setinterval() 的 Clearinterval()

> ID：12058245
> 
> 赞同：0
> 
> 时间：2012-08-21T15:26:54.770
> 
> 标签：javascript

> **可能重复：**
> [如何清除所有 setInterval() 的 Interval()？](https://stackoverflow.com/questions/958433/how-can-i-clearinterval-for-all-setinterval)

我在我的页面中调用了 setInterval，我无法访问存储 setInterval 的原始变量，但我想从我的页面中清除它。

那么如何清除页面上存在的所有计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:28:59.770

清除所有间隔！

```
// This could take a while.
for (var i=0; i<2147483647; i++) clearInterval(i); 
```

您可能会降低最大值`i`，但仍然可以全部捕捉到。上面的代码仅在 12008757 毫秒后在我的浏览器中完成。那是 3.3 小时，或`clearInterval()`每毫秒约 179 秒。

# jquery - 如何在 JQuery Mobile 中更改页面时传递参数？

> ID：12058248
> 
> 赞同：8
> 
> 时间：2012-08-21T15:27:08.317
> 
> 标签：jquery, jquery-mobile

我搜索了stackoverflow，但没有找到合适的解决方案来以编程方式更改jqm页面并传递一个（get）参数。我是 jqm 的新手，所以我在使用 changePage() 函数传递数据时可能会出错。

使用 jquery mobile 1.1.1 和 jquery 1.8.0

我有一个列表，希望所有项目都指向同一个#profile 页面。在该页面上，我想使用 ajax/json 加载适当的数据。

```
<ul data-role="listview" data-theme="a">
   <li><a href="#profile">Martin</a></li>
   <li><a href="#profile?id=2">Johnny</a></li>   
   <li><a href="#" onclick="changePage()">Luke</a></li>
</ul> 
```

第一个链接有效，但没有传递 id（显然）

第二个链接不起作用引发异常（在 chrome 中）：未捕获错误：语法错误，无法识别的表达式：#profile?id=3

第三个链接使用这个函数：

```
function changePage() {
            $.mobile.changePage("#profile", { data: {id:1} });
            //alert('page changed.'); 
            return false;
        } 
```

它更改了页面，但 url 是 basefile.html?id=1 但它应该是 basefile.html#profile?id=1

任何人都可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T17:10:01.687

> 正如[jQuery Mobile Docs](http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-navmodel.html)中提到的，jQuery Mobile 不支持将查询参数传递给内部/嵌入式页面，但是您可以将两个插件添加到您的项目中以支持此功能。有一个轻量级[页面参数插件](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)和一个功能更全面的[jQuery Mobile 路由器插件](https://github.com/azicchetti/jquerymobile-router)，可与主干.js 或脊柱.js 一起使用。

还有其他方法可以实现不同页面之间的数据传递，但其中一些方法可能不受旧 Web 浏览器的支持。您必须仔细选择您的实现方式，以免对应用程序在多个浏览器上的互操作性产生影响。

您可以使用**Web Storage**在不同页面之间传递数据。

> 正如[W3schools](http://www.w3schools.com/html5/html5_webstorage.asp)网站中提到的，HTML5 网页可以在用户浏览器中本地存储数据。早些时候，这是通过 cookie 完成的。但是，**Web 存储**更安全、更快速。数据不包含在每个服务器请求中，但仅在请求时使用。也可以在不影响网站性能的情况下存储大量数据。数据以键/值对的形式存储，网页只能访问自己存储的数据。**Internet Explorer 8+、Firefox、Opera、Chrome 和 Safari**支持 Web 存储。**Internet Explorer 7**及更早版本，**不支持网络存储**。
> 
> 有两个对象用于在客户端存储数据：
> 
> *   localStorage 存储没有过期日期的数据
> *   sessionStorage 存储一个会话的数据

例子：

**本地存储示例：**

在第 1 页：localStorage.carType="test";
在 Page2 中，您可以使用以下命令检索汽车类型：localStorage.carType

**会话存储示例：**

第1页：sessionStorage.carNumber=10；
在 Page2 中，您可以使用以下方法检索 carType： sessionStorage.carNumber

关于您的情况，一种可能的解决方案是在每个锚点中添加 id。然后捕捉点击事件，获取id，将id保存在网络存储中，进行页面转换。在下一页中，从 Web 存储中检索 id。您可以在下面找到实现：

```
<ul id="menu_list" data-role="listview" data-theme="a">
   <li><a id="1" href="#">Martin</a></li>
   <li><a id="2" href="#">Johnny</a></li>   
   <li><a id="3" href="#">Luke</a></li>
</ul>

$('#menu_list').children().each(function(){
    var anchor = $(this).find('a');
    if(anchor)
    {
        anchor.click(function(){
            // save the selected id to the session storage and retrieve it in the next page
            sessionStorage.selectedId=anchor.attr('id');
            // perform the transition
            changePage();
        });
    }
}); 
```

**编辑：**

**遵循多页方法时传递参数的替代方法**

此示例使用`jQM changePage()`Ajax 页面请求发送数据。

```
$('#list-d a').on('click', function(e) {
    e.preventDefault();
    $.mobile.changePage('car-details.html', {
        data: {
            id: this.id
        }
    });
}); 
```

构造的 URL 是 .../car-details.html?id=my-id

有关完整示例，请查看此[StackOverflow 答案](https://stackoverflow.com/questions/15095634/dynamic-jquery-mobile-navigation/15100127#15100127)

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T23:34:20.420

我看到这个问题已经得到了回答，并且对答案进行了评论，我也遇到了这个问题。按预期使用 jQuery Mobile 允许加载 ajax，因此除非用户发起，否则不需要刷新浏览器，对吗？如果用户出于某种原因正在刷新，这意味着该站点或应用程序没有按照预期的方式运行，因为大多数用户不会在没有令人沮丧的原因的情况下刷新。

这么说，正如评论所建议的那样，创建变量是将数据从“页面”传递到“页面”的有效方式。但是，我这样做的建议是创建一个全局变量来包含站点信息。

```
$('#elemControlToChangeBy').on("tap", function(oEvent)
{
   oMyNameSpace.PageDataObj = oDataObj;

   $.mobile.changePage("#elemPage", {transition : "type"})
});

$("elemPage").on("pageshow", function()
{
   var oDataObj = oMyNamespance.PageDataObj;

   //Use the data...
}); 
```

显然，代码必须根据您的编码约定进行修改，但概念就在那里：

*   存储您的数据或通过其他方式访问它
*   将数据放在包含的变量中，以防止任何外部代码覆盖
*   到达下一页时访问数据对象变量

如前所述，还有其他路线（本地存储等），所以我不会再谈了，因为信息已经在那里了。

如上所述，我遇到了这个问题，我的建议是按预期使用 jQuery Mobile，并使用您自己的代码库使用有组织的对象层次结构创建和存储变量。你如何组织它是你的选择，这正是 javascript 如此出色的语言的原因。

我们已经变得过于依赖库来解决作者留给我们使用我们的创造性和个人标准驱动方法来解决的简单问题。祝所有人编码愉快，鼓励构建，而不仅仅是设计！

# java - registerOnSharedPreferenceChangeListener() 方法比较

> ID：12058249
> 
> 赞同：5
> 
> 时间：2012-08-21T15:27:14.447
> 
> 标签：java, android, listener

在我维护的一些代码中，我注意到注册共享首选项更改侦听器的两种不同方法：

(1) 直截了当的方法，其中包含已注册成员函数的类实现[SharedPreferences.OnSharedPreferenceChangeListener](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html#onSharedPreferenceChanged%28android.content.SharedPreferences,%20java.lang.String%29)。

```
preferences.registerOnSharedPreferenceChangeListener(mImageView); 
```

(2) 间接方法，其中*可能*包含已注册成员函数的类由于某种原因倾向于不实现[SharedPreferences.OnSharedPreferenceChangeListener](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html#onSharedPreferenceChanged%28android.content.SharedPreferences,%20java.lang.String%29)，而是选择定义和实例化一个专用于该侦听器的全新类：

```
SharedPreferences.OnSharedPreferenceChangeListener mPreferencesListener = 
  new SharedPreferences.OnSharedPreferenceChangeListener() {
    public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
      // do here what's needed to do
    }
  };

....

preferences.registerOnSharedPreferenceChangeListener(mPreferencesListener); 
```

两者都运作良好，但现在我想知道：一种方法比另一种更可取吗？

是否存在实际上只能使用这两种方法中的*一种*的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:08:48.413

这取决于实现，就可维护性而言，有些人可能会发现一种或其他方式更符合他们的意图，有些人只是进一步考虑可读性、自然医学等。

另一方面，您当然可能希望防止任何泄漏和垃圾收集问题，如果创建的成员`mPreferencesListener`正在访问您可能在某些问题中运行的任何封闭实例方法，作为一个好公民，您应该在知道之后取消注册您的侦听器您将不会使用它们（例如 onPause、onDestroy 等）并选择静态内部类而不是成员内部类，并且在匿名和本地内部类访问封闭实例方法/属性时要小心。

最后值得一提的是，目前[SharedPreferencesImpl](https://github.com/android/platform_frameworks_base/blame/master/core/java/android/app/SharedPreferencesImpl.java)使用[Wea​​kHashMap](https://developer.android.com/reference/java/util/WeakHashMap.html)作为其侦听器。

# c# - 调用 OnPaint 时，Infragistics UltraGrid 上的“索引超出了数组的范围”

> ID：12058250
> 
> 赞同：2
> 
> 时间：2012-08-21T15:27:33.513
> 
> 标签：c#, multithreading, infragistics, onpaint, ultrawingrid

我已将网格的 DataSource 绑定到我从另一个线程更新的 BindingSource 对象。我写了以下代码：

```
 protected override void OnPaint(PaintEventArgs pe)
    {
        if (this.InvokeRequired)
        {
            this.Invoke(new OnPaintMethodInvoker(this.OnPaint), pe);
        }
        else
        {
            try
            {
                    base.OnPaint(pe);
            }
            catch 
            {
            }
        }
    } 
```

我发生了两件事：1\. Invoke 从未被调用（我猜 Ultragrid 知道如何处理它） 2\. 当我在更新数据时玩屏幕（鼠标悬停/调整大小）时 - 我收到以下信息例外：

指数数组的边界之外。

```
 at Infragistics.Shared.SparseArray.GetItemAtScrollIndex(Int32 scrollIndex, ICreateItemCallback createItemCallback)
   at Infragistics.Win.UltraWinGrid.ScrollCountManagerSparseArray.GetItemAtScrollIndex(Int32 scrollIndex, Boolean allocate)
   at Infragistics.Win.UltraWinGrid.RowsCollection.GetRowAtScrollIndex(Int32 scrollIndex, Boolean allocate)
   at Infragistics.Win.UltraWinGrid.RowsCollection.get_IsLastScrollableRowNotAllocatedYet()
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.IsLastScrollableRowVisible(ScrollbarVisibility colScrollbarVisibility)
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.GetMaxScrollPosition(Boolean scrollToFill)
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.EnsureScrollRegionFilled(Boolean calledFromRegenerateVisibleRows)
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.RegenerateVisibleRows(Boolean resetScrollInfo)
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.RegenerateVisibleRows()
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.WillScrollbarBeShown(ScrollbarVisibility assumeColScrollbarsVisible)
   at Infragistics.Win.UltraWinGrid.ScrollRegionBase.WillScrollbarBeShown()
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.PositionScrollbar(Boolean resetScrollInfo)
   at Infragistics.Win.UltraWinGrid.ScrollRegionBase.SetOriginAndExtent(Int32 origin, Int32 extent)
   at Infragistics.Win.UltraWinGrid.RowScrollRegion.SetOriginAndExtent(Int32 origin, Int32 extent)
   at Infragistics.Win.UltraWinGrid.DataAreaUIElement.ResizeRowScrollRegions()
   at Infragistics.Win.UltraWinGrid.DataAreaUIElement.PositionChildElements()
   at Infragistics.Win.UIElement.VerifyChildElements(ControlUIElementBase controlElement, Boolean recursive)
   at Infragistics.Win.UltraWinGrid.DataAreaUIElement.VerifyChildElements(ControlUIElementBase controlElement, Boolean recursive)
   at Infragistics.Win.UltraWinGrid.DataAreaUIElement.set_Rect(Rectangle value)
   at Infragistics.Win.UltraWinGrid.UltraGridUIElement.PositionChildElements()
   at Infragistics.Win.UIElement.VerifyChildElements(ControlUIElementBase controlElement, Boolean recursive)
   at Infragistics.Win.UltraWinGrid.UltraGridUIElement.VerifyChildElements(ControlUIElementBase controlElement, Boolean recursive)
   at Infragistics.Win.UIElement.DrawHelper(Graphics graphics, Rectangle invalidRectangle, Boolean doubleBuffer, AlphaBlendMode alphaBlendMode, Boolean clipText, Boolean forceDrawAsFocused, Boolean preventAlphaBlendGraphics)
   at Infragistics.Win.UIElement.Draw(Graphics graphics, Rectangle invalidRectangle, Boolean doubleBuffer, AlphaBlendMode alphaBlendMode, Boolean forceDrawAsFocused, Boolean preventAlphaBlendGraphics)
   at Infragistics.Win.ControlUIElementBase.Draw(Graphics graphics, Rectangle invalidRectangle, Boolean doubleBuffer, AlphaBlendMode alphaBlendMode, Size elementSize, Boolean preventAlphaBlendGraphics)
   at Infragistics.Win.ControlUIElementBase.Draw(Graphics graphics, Rectangle invalidRectangle, Boolean doubleBuffer, AlphaBlendMode alphaBlendMode, Size elementSize)
   at Infragistics.Win.ControlUIElementBase.Draw(Graphics graphics, Rectangle invalidRectangle, Boolean doubleBuffer, AlphaBlendMode alphaBlendMode)
   at Infragistics.Win.UltraWinGrid.UltraGridUIElement.Draw(Graphics graphics, Rectangle invalidRectangle, Boolean doubleBuffer, AlphaBlendMode alphaBlendMode)
   at Infragistics.Win.UltraControlBase.OnPaint(PaintEventArgs pe)
   at Infragistics.Win.UltraWinGrid.UltraGrid.OnPaint(PaintEventArgs pe)
   at MyProject.Common.UI.Controls.GridControl.OnPaint(PaintEventArgs pe) 
```

任何人都知道可能是什么问题？我试图将 lock(this) 放在 base.OnPaint(pe) 周围，但没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:20:19.547

您不应在后台线程上更新绑定控件的数据源。对您绑定的列表所做的任何更新都应首先编组回 UI 线程，并且更新应该在那里发生。

当您在后台线程上更新 WinGrid 绑定到的列表时，这会触发事件处理程序来响应要在后台线程上执行的数据更改，而不是在 UI 线程上执行，这会导致问题，因为只有少数成员实际上是线程安全的[控件。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)

您可能还想参考Mike Saltzman 回答过类似问题的[Infragistics 论坛。](http://www.infragistics.com/community/forums/t/7734.aspx)

# javascript - 删除表单标签中的 novalidate

> ID：12058256
> 
> 赞同：3
> 
> 时间：2012-08-21T15:27:53.400
> 
> 标签：javascript, ruby-on-rails

在我的 ruby​​ on rails 应用程序中，我有一个向数据库提交数据的表单。

我注意到我的 jquery 验证不起作用，当我执行“查看源代码”时，我`novalidate="novalidate"`在表单标记中发现。

```
<form novalidate="novalidate" action="/subapp_test/books/create_sub_book"  id="new_book" method="post" onsubmit="validateBook();">
..... 
```

如何禁用它？

这是表单的rails代码：

```
<% remote_form_for @book, :url => { :controller => "books", :action => "create_sub_book", :id =>params[:id] }, :html => { :onsubmit => "validateBook();"} do |f| %> 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:32:20.140

```
:onsubmit => "return validateform();"} 
```

标记`return`那里..

# c# - NHibernate 得到第一个 x 不同的结果不会让我得到 x 个结果？

> ID：12058259
> 
> 赞同：1
> 
> 时间：2012-08-21T15:27:56.913
> 
> 标签：c#, hibernate, nhibernate, postgresql, nhibernate-criteria

我有一个这样的 ICriteria 查询：

```
var contentCriteria = DetachedCriteria.For<InvoiceItem>();
var countCriteria = DetachedCriteria.For<InvoiceItem>();

if (model.CurrentPage <= 0) model.CurrentPage = 1;

if (model.OnlyShowErrors)
{
    contentCriteria.Add(Restrictions.Not(Restrictions.Eq("TroubleClass", TroubleClasses.Success)));
    countCriteria.Add(Restrictions.Not(Restrictions.Eq("TroubleClass", TroubleClasses.Success)));
}

if (!string.IsNullOrEmpty(model.BatchId))
{
    contentCriteria.Add(Restrictions.Eq("BatchId", model.BatchId));
    countCriteria.Add(Restrictions.Eq("BatchId", model.BatchId));
}

if (model.DocumentStartDate != null)
{
    contentCriteria.Add(Restrictions.Ge("DocumentDate", model.DocumentStartDate));
    countCriteria.Add(Restrictions.Ge("DocumentDate", model.DocumentStartDate));
}

if (model.DocumentEndDate != null)
{
    contentCriteria.Add(Restrictions.Le("DocumentDate", model.DocumentEndDate));
    countCriteria.Add(Restrictions.Le("DocumentDate", model.DocumentEndDate));
}

if (!string.IsNullOrEmpty(model.VendorId))
{
    contentCriteria.Add(Restrictions.Eq("VendorId", model.VendorId));
    countCriteria.Add(Restrictions.Eq("VendorId", model.VendorId));
}

using (var session = GetSession())
{

    var countC = countCriteria.GetExecutableCriteria(session)
        .SetProjection(Projections.CountDistinct("RecordId"));

    var contentC = contentCriteria
        .AddOrder(Order.Desc("PersistedTimeStamp"))
        .GetExecutableCriteria(session)
        .SetResultTransformer(Transformers.DistinctRootEntity)
        .SetFirstResult((model.CurrentPage * model.ItemsPerPage) - model.ItemsPerPage)
        .SetMaxResults(model.ItemsPerPage);

    var mq = session.CreateMultiCriteria()
        .Add("total", countC)
        .Add<InvoiceItem>("paged", contentC);

    model.Invoices = ((IEnumerable<InvoiceItem>)mq.GetResult("paged"));
    model.Invoices = model.Invoices
        .OrderBy(x => x.PersistedTimeStamp);

    model.TotalItems = (int)(mq.GetResult("total") as System.Collections.ArrayList)[0];
}
return model; 
```

这会返回结果，但我希望结果是在 组中的`model.ItemsPerPage`，它很少是。我认为`.SetResultTransformer(Transformers.DistinctRootEntity)`转换是在`.SetMaxResults(model.ItemsPerPage)`限制之后运行的，我不知道为什么或如何解决它。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:51:59.650

您需要查看 NHibernate 生成的 SQL，因为这本质上不是 NHibernate 错误，而是 SQL 查询在一起应用时`ROWNUM`的行为。`DISTINCT`这一直是我们已知问题列表中的一个问题。

以下网址可能会启发您...

[行号与不同](https://stackoverflow.com/questions/2635665/row-number-vs-distinct)

[ROWNUM 的工作原理](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:36:57.720

[所以这与这篇博](http://julianjelfs.wordpress.com/2009/04/03/nhibernate-removing-duplicates-combined-with-paging/)文中所写的内容直接相关。此外，我遇到了 PostgreSQL 特定于平台的复杂性，它不允许 DISTINCT 有序集由不在 SELECT 列表中的东西排序。最终，我不得不对数据库进行两次调用，如下所示：

```
using (var session = GetSession())
{
    //I honestly hope I never have to reverse engineer this mess.  Pagination in NHibernate
    //when ordering by an additional column is a nightmare.
    var countC = countCriteria.GetExecutableCriteria(session)
        .SetProjection(Projections.CountDistinct("RecordId"));

    var contentOrdered = contentCriteria
        .SetProjection(Projections.Distinct(
            Projections.ProjectionList()
                .Add(Projections.Id())
                .Add(Projections.Property("PersistedTimeStamp"))
                ))
        .AddOrder(Order.Desc("PersistedTimeStamp"))
        .SetFirstResult((model.CurrentPage * model.ItemsPerPage) - model.ItemsPerPage)
        .SetMaxResults(model.ItemsPerPage);

    var contentIds = contentOrdered.GetExecutableCriteria(session)
        .List().OfType<IEnumerable<object>>()
        .Select(s => (Guid)s.First())
        .ToList();

    var contentC = DetachedCriteria.For<InvoiceItem>()
        .Add(Restrictions.In("RecordId", contentIds))
        .SetResultTransformer(Transformers.DistinctRootEntity);

    var mq = session.CreateMultiCriteria()
        .Add("total", countC)
        .Add("paged", contentC);

    model.Invoices = (mq.GetResult("paged") as System.Collections.ArrayList)
        .OfType<InvoiceItem>()
        .OrderBy(x => x.PersistedTimeStamp);

    model.TotalItems = (int)(mq.GetResult("total") as System.Collections.ArrayList)[0];
}
return model; 
```

这并不漂亮，但它奏效了；我认为 NHibernate 的人们需要在这方面努力，让它变得更容易一些。

# c++ - SP中的事务避免正确答案

> ID：12058269
> 
> 赞同：0
> 
> 时间：2012-08-21T15:28:31.890
> 
> 标签：c++, sql, sql-server, stored-procedures, odbc

我有一个从 SSMS 调用时运行良好的 SP。但是当我从用本机 C++ 编写的应用程序中调用它并使用 ODBC 连接到数据库时，该操作不会返回任何错误，但实际上在数据库中什么也不做。

我的 SP 从一些临时表中读取一些值，然后将它们插入数据库或更新它们。

我在 SP 中有一个事务来保护 SP 的所有代码，我几乎不调试我的 SP 并发现该函数将在第一次插入或更新时返回，所以什么也不做。所以我删除了部分工作的事务和功能，我的意思是它添加了一些项目，但将其中一些项目留在那里而不将它们添加到数据库中。这是我的 SP 的骨架：

```
--开始交易
声明@id bigint，@name nvarchar(50)
从 MyTable 中删除而不是（id IN（从 #MyTable 中选择 id））
DECLARE cur1 CURSOR FOR SELECT id, name FROM #MyTable
打开 cur1
而 1 != 0
开始
    将 cur1 提取到 @id、@name
    IF @@FETCH_STATUS != 0 中断；

    UPDATE MyTable SET [Name]=@name WHERE [id]=@id
    如果@@ROWCOUNT = 0
        插入 MyTable (ID, Name) 值 (@id, @name)
结尾
关闭 cur1
释放 cur1
--提交交易

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:45:01.853

我通过添加到我的 SP 的开始来解决我的问题`SET NOCOUNT ON`，所以我认为当 SQL 由于执行我的 SQL 而返回多个结果集时，ODBC 在收到第一个结果集时关闭或取消命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:15:08.637

您是否有可能在 ODBC 中启动了一个需要显式 COMMIT 才能结束的隐式事务（在调用 SP 之后）？SSMS 通常使用自动提交模式。

# r - .Rd 链接到建议的包

> ID：12058273
> 
> 赞同：14
> 
> 时间：2012-08-21T15:28:58.040
> 
> 标签：r, documentation, rd

我的`hyperSpec`包提供了处理光谱数据集的功能。我为来自其他包的许多功能提供了 hyperSpec 方法。但是，我列出了其中一些其他软件包，`Suggests:`因为我不想强迫用户安装类似 20 个其他软件包（计算依赖项），如果他们可能永远不会使用特定功能的话。

从编码的角度来看，这很好用。但是，我不知道如何在 .Rd 文件中处理它 - 但我确信这是一个相当普遍的问题。

通常`\code{\link[otherpkg]{fun}}`不会可靠地工作，因为不能保证 otherpkg 可用。如果未安装 otherpkg，则链接断开。这将被`R CMD check`例如 Winbuilder 和 r-forge 检测到。这意味着：包裹不会通过 CRAN 检查。

哪些软件包是一个很好的例子？

到目前为止，我发现的唯一提示（尽管没有解决方案）：[https](https://stat.ethz.ch/pipermail/r-devel/2009-November/055425.html) ://stat.ethz.ch/pipermail/r-devel/2009-November/055425.html （但该电子邮件没有回复）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T16:34:38.060

*编写 R 扩展*的[交叉引用](http://cran.r-project.org/doc/manuals/R-exts.html#Cross_002dreferences)部分说要链接到其他包使用

 *```
\link[otherpkg]{foo} 
```

棘手/难以理解的事情是 foo 是您要链接到*的 html 帮助页面的名称*（在包中，不需要`[mypkg]`并且`foo`会`\alias`在另一个手册页中）。帮助页面的名称由`\name`定义您有兴趣检索的帮助的 Rd 文件中的指令确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T08:48:16.927

最后，我做`otherpkg`了一个依赖。*

# javascript - 跨域 HTML 获取请求

> ID：12058277
> 
> 赞同：1
> 
> 时间：2012-08-21T15:29:00.200
> 
> 标签：javascript, jquery, get, cross-domain

我正在使用 Coda，我正在尝试编写一个程序来使用 Javascript/Jquery 在他们的统计页面 (http://www.nfl.com/stats/player) 上加载 nfl 的 html，然后删除所有多余的 html。产生了几个球员名单和他们的统计数据。

我试过使用`$('#container').load('http://www.nfl.com/stats/player')。

这在 Coda 中运行良好，但我无法以我想要的方式解析 html。

在谷歌浏览器中我得到了错误

```
XMLHttpRequest cannot load http://www.nfl.com/stats/player. Origin null is not 
allowed by Access-Control-Allow-Origin. 
```

据我了解，这是所有浏览器都内置的安全功能。这个问题有解决方法吗？我可以使用不同类型的请求吗？

我知道我**应该**对这种类型的请求使用 JSONP，但我不相信 nfl 有一个 API 可以使这成为可能。

我见过这样的问题被抛出，但我认为还没有人给出一个非常好的可靠答案。

我认为仍然有很多人想知道是否有一种简单的方法来`$.get`跨域 HTML 并**解析**它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:32:04.680

不允许您这样做，因为它可用于 XSS（跨站点脚本），其中脚本由站点域之外的脚本访问。即您可以通过这种方式获取cookie 信息。

你将不得不做这个服务器端。如果您使用的是 php，您可以使用`$content = file_get_contents('http://nfl.com/stats/player');`，或者如果您愿意，也可以使用 curl。

否则，合法的方法是通过 API，但正如您所指出的，这不是您的选择。

# c# - 格式 {0:x} 是什么意思？

> ID：12058278
> 
> 赞同：14
> 
> 时间：2012-08-21T15:29:03.180
> 
> 标签：c#

我遇到了这个 C# 文字，想知道它是什么意思？

特别是在以下情况下：

```
string.Format("{0:x}", byteArray[i]); 
```

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T15:29:46.210

这意味着将第一个参数（索引 0）格式化为十六进制：http: [//msdn.microsoft.com/en-us/library/s8s7t687 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/s8s7t687(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:34:17.627

这意味着第一个参数将输出为十六进制（小写！！）。要输出大写，您可以使用“{0:X}”。

查看 msdn 以获取有关字符串格式的更多信息：[MSDN 自定义字符串格式](http://msdn.microsoft.com/en-gb/library/0c899ak8%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T15:32:27.717

这代表`hexadecimal`格式。

# django - WSGI 加载错误项目的设置：如何调试？

> ID：12058279
> 
> 赞同：2
> 
> 时间：2012-08-21T15:29:07.300
> 
> 标签：django, mod-wsgi

我在同一台服务器上有两个基于 django 的 Web 应用程序。其中一个我会打电话给**CORRECT_PROJECT**，另一个**叫WRONG_PROJECT**

最后一个，CORRECT_PROJECT，使用虚拟环境安装，使用不同版本的 django (1.4)。有一个非常奇怪的问题：有时，通常在注销或电子邮件确认后（但有时看起来只是随机的！），服务器返回**500 内部服务器错误**，错误日志显示

> **“无法导入设置 'WRONG_PROJECT.settings'（是否在 sys.path 上？）：没有模块名称 WRONG_PROJECT.settings，请参阅：CORRECT_PROJECT/URL”**

也就是说，通过加载 CORRECT_PROJECT，有时系统（WSGI？Apache？Django？）会尝试从 WRONG_PROJECT 加载设置。

通过积极地点击刷新，错误消失了。有什么问题？我该如何调试？

CORRECT_PROJECT 在守护模式下使用 WSGI。

## 解决方案

使用守护程序模式： http: [//modwsgi.readthedocs.org/en/latest/configuration-directives/WSGIDaemonProcess.html](http://modwsgi.readthedocs.org/en/latest/configuration-directives/WSGIDaemonProcess.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T03:31:12.890

您正在使用 Django 1.4 中的 wsgi.py。在同一进程中托管多个 Web 应用程序时，这将不起作用。

最好的解决方案是使用守护进程模式并将每个模式委托给一个不同的守护进程组。

如果不能这样做，请更改两者的 wsgi.py 文件，以便它们不使用：

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings") 
```

而是使用：

```
os.environ["DJANGO_SETTINGS_MODULE"] = "mysite.settings" 
```

根据需要更改 mysite.settings。

# javascript - 传递给 JavaScript 函数的无法解释的参数，我缺少的一些基本的东西

> ID：12058285
> 
> 赞同：2
> 
> 时间：2012-08-21T15:29:34.693
> 
> 标签：javascript, google-chrome-extension

上个月我一直在自学 JavaScript，因为我的工作一直很忙，所以我一直在自学 JavaScript，当我停工时，我的工作是为我们的销售团队进行扩展。

现在我没有无法解决的具体问题，但我有一个问题让我认为 javascript 中的函数有一些非常不同的地方，但我仍然缺少。

看看这段代码，我会解释一下让我感到困惑的地方：

```
function click(e) {
  var selection = e.target.id;
}

document.addEventListener('DOMContentLoaded', function () {
  var divs = document.querySelectorAll('div');
  for (var i = 0; i < divs.length; i++) {
    divs[i].addEventListener('click', click);
  }
}); 
```

因此，在这段代码中，我了解除了 click(e) 部分之外发生了什么。'e' 是一个事件对象，对吗？我不清楚它是如何通过的，以及它是如何知道“e”的意思的。我假设我可以用“foo”替换 e，它仍然可以工作，但究竟发生了什么还不清楚。我很确定它与这行代码有关：

```
divs[i].addEventListener('click', click); 
```

但我不明白幕后发生了什么，才能以这种方式发生。

另一个例子是来自[http://developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)的消息传递：

```
contentscript.js
================
chrome.extension.sendMessage({greeting: "hello"}, function(response) {
  console.log(response.farewell);
});

background.html
===============
chrome.tabs.getSelected(null, function(tab) {
  chrome.tabs.sendMessage(tab.id, {greeting: "hello"}, function(response) {
    console.log(response.farewell);
  });
}); 
```

我不清楚其中的“响应”来自何处，就像另一个示例中的“e”一样。任何帮助揭开它是如何工作的神秘面纱将不胜感激，我愿意学习，我还没有找到一个很好的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:33:04.000

事件对象由浏览器本身通过函数传递。

如果存在事件并且附加了相应的事件处理程序，浏览器将调用该事件处理程序并将带有一些（或多或少）有关事件的相关信息的事件对象传递给事件处理程序。

所以关于你的第一个例子：

首先，该函数`click( e )`以常规方式定义。

之后注册了两个事件处理程序：

1.  为活动`DOMContentLoaded`
2.  对于`click`多个`<div>`元素的事件。

对于第一个处理程序，使用匿名函数。

```
document.addEventListener('DOMContentLoaded', function () {
  // do stuff here
}); 
```

这里省略了事件对象，因为它可能不需要。

在第二种情况下，`<div>`所有元素都获得相同的事件处理程序，即`click(e)`.

```
divs[i].addEventListener('click', click); 
```

然而，在这里，事件对象被函数捕获为参数，因为它在函数体内需要。

通常，在 JavaScript 中，您不必在函数声明或函数调用中定义所有参数。您只需定义所需的参数，并按给定的顺序应用它们。这就是为什么在第一个事件处理程序的定义中，可以省略事件对象的参数而不会出现任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:33:33.930

该`click`函数由浏览器调用以响应单击事件。浏览器将适当的事件对象作为第一个参数传递。

另外，你是对的，`e`可以是任何东西。您可以为参数提供您想要的任何（合法）名称。

# windows - 在 Windows 中添加辅助文件关联？

> ID：12058286
> 
> 赞同：1
> 
> 时间：2012-08-21T15:29:36.210
> 
> 标签：windows, file-association

在 Windows 中，您可以右键单击文件，并且有一个选项可让您选择使用该文件启动哪个程序。因此，例如，当用户右键单击一个 .cdr 文件时，他可以选择`Open With -> Corel Draw`选项，它将使用 Corel Draw 启动。

现在，我需要将某些程序添加到该列表中（程序也必须使用其他一些参数启动）。但我不想更改该文件的默认程序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:32:22.140

以下注册表项控制此列表：

1.  HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\ *.FileExtension* \OpenWithList

2.  HKEY_CLASSES_ROOT \ *.FileExtension* \ OpenWithList

有关格式的更多信息，请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/bb166549%28v=vs.80%29.aspx)。

# php - 为不在根目录中的页面生成别名页面？PHP

> ID：12058290
> 
> 赞同：0
> 
> 时间：2012-08-21T15:29:47.693
> 
> 标签：php, content-management-system

我不知道该怎么说，所以我会尽力解释。我用 PHP 为 CMS 编写了一个插件系统。但是，插件包含在它们自己的文件夹中，带有插件的页面可能如下所示：

```
 http://www.mysite.com/plugins/forum/index.php 
```

但是，这看起来很难看，并且明显暴露了插件系统的站点结构。到目前为止，我一直在解决这个问题：

```
 http://www.mysite.com/page.php?id=forum 
```

但这仍然有点丑陋，即使它比后者更干净。但是，我想知道是否可以创建一个“虚拟”页面，它实际上只是我想要的页面的别名。所以

```
 http://www.mysite.com/forum.php points to http://www.mysite.com/plugins/forum/index.php 
```

虽然我可以手动在根 forum.php 中创建一个页面，但我想知道是否有某种方法可以自动化它。换句话说，当用户调用不存在的 forum.php 时，我有一个 404 页面包含一段 PHP 代码，该代码确定正在调用什么（如果它是未知页面调用，则抛出 404）。换句话说，如果我请求forum.php，一段代码会查询数据库以找到链接器，如果找到了，则返回该特定URL 下的页面内容。

我希望这不会太混乱。让我知道是否有点难以理解这个想法......我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:32:29.190

如果您使用的是 apache，解决方案是使用 mod_rewrite (.htacces)

[.htaccess 技巧和窍门](http://corz.org/serv/tricks/htaccess2.php)

这个想法是在用户访问时在内部重定向到您的插件

```
http://www.mysite.com/forum.php 
```

例如：你把它放在你的 webroot 的 .htaccess 文件中

```
RewriteEngine on
RewriteRule ^forum\.php$ /plugins/forum/index.php.php [QSA] 
```

# java - Java webservice 错误 - vendor.xml 无法启动

> ID：12058302
> 
> 赞同：1
> 
> 时间：2012-08-21T15:30:31.567
> 
> 标签：java, webservice-client

嗨 Java Web 服务专家，我正在开发一个 Web 服务项目。我的目标是创建一个客户端 Java 程序来使用供应商 Web 服务并提供数据文件。我可以通过 JDeveloper 从供应商 wsdl 文档生成代理类。现在我开始着手创建 java 独立客户端应用程序。我的问题是由于以下错误，我无法调试或运行我的 java 程序。我认为这与 Jdeveloper 中导入的 vendor.xml 文档有关，但我不确定。下面是错误

> 目标 vendor.xml 无法启动，因为它不是可运行的目标。
> 目标运行无法启动，因为它不存在。

我已经研究过这个问题，但毕竟没有太多信息。我是这个网络服务的新手，希望能得到所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:37:20.847

谢谢你回答我的问题。为了回答这个问题，Jdeveloper 与其他骨架类一起生成的 vendor.xml 文档。我尝试编译或运行一个非常简单的 java 客户端程序，我构建该程序只是为了测试它是否可以正确编译或运行，但我得到了那个错误。它指向供应商 xml 文档并说它无法运行或启动，因为它不存在。

# c - C - 无法设置 pcap 过滤器。功能无法正常工作

> ID：12058305
> 
> 赞同：0
> 
> 时间：2012-08-21T15:30:38.753
> 
> 标签：c, function, filter, network-programming, pcap

当我尝试运行此函数时，它会在第二个`if`语句处撞墙并打印：（ `cannot set pcap filter: ip dest host 92.40.255.82 ��z]$`注意末尾的奇数符号）。我怀疑错误在于`bpf_program filterprog`但没有任何运气来解决它。我已经检查了相关的手册页，除非我错过了一些我使用过的功能应该没问题......所以我很难过。它与错误消息末尾的符号有关吗？为什么不设置过滤器？

```
void capture()
{
pcap_t *pd;
bpf_u_int32 netmask;
bpf_u_int32 localnet;
char filterbuf[64];
snprintf(filterbuf, sizeof(filterbuf), "ip dest host %s", dstip); 
char *filter = filterbuf;       
char *dev = NULL;
char errbuf[PCAP_ERRBUF_SIZE];
struct bpf_program filterprog;
int dl = 0, dl_len = 0;

if ((pd = pcap_open_live(dev, 1514, 1, 500, errbuf)) == NULL) 
    {           
        fprintf(stderr, "cannot open device %s: %s\n", dev, errbuf);
        exit(1);
    }

pcap_lookupnet(dev, &localnet, &netmask, errbuf);
pcap_compile(pd, &filterprog, filter, 0, localnet);
if (pcap_setfilter(pd, &filterprog) == - 1)
    {
        fprintf(stderr, "cannot set pcap filter: %s %s\n", filter, errbuf);
        exit(1);
    }

pcap_freecode(&filterprog);
dl = pcap_datalink(pd);

switch(dl) {
    case 1:
        dl_len = 14;
        break;
    default:
        dl_len = 14;
        break;
}       

if (pcap_loop(pd, -1, receive, (u_char *) &dl_len) < 0) 
    {
        fprintf(stderr, "cannot get raw packet: %s\n", pcap_geterr(pd));
        exit(1);
    }
} 
```

编辑：这些是对 dstip 的其他引用：

（在原型中）`char *dstip = 0;`

（主要）`dstip = optarg;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:39:25.850

您的过滤器错误（s/b `ip dst host`，not `ip dest host`），错误消息的原因如下：

`errbuf`- 返回错误文本并且仅在 pcap_lookupnet 子例程失败时设置

成功完成后，pcap_setfilter 子例程返回 0。如果 pcap_setfilter 子例程不成功，则返回 -1。在这种情况下，可以使用 pcap_geterr 子例程来获取错误文本，并且可以使用 pcap_perror 子例程来显示文本。

# php - SimpleXMLElement 单引号编码

> ID：12058309
> 
> 赞同：0
> 
> 时间：2012-08-21T15:30:44.873
> 
> 标签：php

我使用 SimpleXMLElement 生成 XML，其中一个子注释在其中得到了一个单引号的句子，然后接收器失败了……我怎样才能对句子进行编码以更改单引号。

代码：

```
$objLeadXML = new SimpleXMLElement ( '<CancelLead/>' );

    $cancelReason = $objLead->getReasonForCancelling ();
    $cancelReason = str_replace("\'", "&#39;", $cancelReason);

    $objLeadElement = $objLeadXML->addChild ( 'Lead', $cancelReason );
    $objLeadElement->addAttribute ( 'ELMSRef', $objLead->getID () );
    $objLeadElement->addAttribute ( 'CancelDate', $objLeadHistory->ActionDate );
    $objLeadElement->addAttribute ( 'IsCancelled', $objLead->getStatusID () == KStatus::CANCELLED ? 1 : 0 );
    $objLeadElement->addAttribute ( 'CancelledBy', $objLeadHistory->PerformedBy ); 
```

$cancelReason 包含取消原因，例如“没有驾照”，我需要对该句子中的单引号进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:34:56.257

`str_replace("\'", "&#39", $parentString);`

或者 ´ 而不是 \' ，如果它是锐角符号。

# html - 在 HTML 中，如何使控件占据其容器的所有水平空间而不重叠边框？

> ID：12058312
> 
> 赞同：0
> 
> 时间：2012-08-21T15:30:53.340
> 
> 标签：html, css

考虑这个 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<table cellspacing = "10" cellpadding="0" border="1" width="100%">
<tr>
    <td>
        <input style="border-width:1px; border-style:solid; width:100%; background-color:aqua">
    </td>
</tr>
</table>
</html> 
```

它输出以下内容，如您所见，右侧有一点重叠。

![在 IE 和 Chrome 中输出](../Images/1f37c8bcd9342fd98e7fa55ddfc56178.png)

如何更改此代码，以使输入框占据 TD 的整个内部空间而不会重叠？

请注意，我正在寻找一种解决方案，其中：

*   DOCTYPE 标记和html 标记如上所述。
*   如上所述，容器元素的大小不是固定的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:48:24.597

正如 JamWaffles 所提到的，在输入标签的样式元素上添加 box-sizing:border-box 解决了这个问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<table cellspacing = "10" cellpadding="0" border="1" width="100%">
<tr>
    <td>
        <input style="box-sizing: border-box; border-width:1px; border-style:solid; width:100%; background-color:aqua">
    </td>
</tr>
</table>
</body>
</html> 
```

# c# - 在 ASP.NET / C# 中更改页面位置

> ID：12058315
> 
> 赞同：1
> 
> 时间：2012-08-21T15:31:15.637
> 
> 标签：c#, asp.net

基本上，在提交表单后，我希望用户浏览器滚动到页面下方的区域，就像您可能使用以下代码一样：

```
<a href="#lower-stuff">Click here to scroll to stuff lower down in the page</a>
<div id="lower-stuff">Stuff lower down in the page is here</div> 
```

除了我不知道该怎么做。

我正在使用 gaia（所以页面不会重新加载）我尝试做这样的事情：

```
<gaia:LinkButton runat="server" ID="SubmitButton" Text="Submit" OnClick="SubmitButton_Click" Text="Go" CssClass="goButton" **href="#lower-stuff"**/> 
```

但这显然是不允许的。. .

有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:36:54.477

您可以通过调用 javascript 页面滚动来实现这一点

```
function pageScroll() {
        window.scrollBy(0,50); // horizontal and vertical scroll increments
        scrolldelay = setTimeout('pageScroll()',100); // scrolls every 100 milliseconds
} 
```

我同意上面的代码不能处理动态高度。

干得好

```
 $(document).scrollTo('#contact'); 
```

其中#contact 是您要滚动到的元素的 id。

对于 YUI，试试这个：

```
var element = document.getElementById('test');
var myAnim = new YAHOO.util.Scroll(element, {
    scroll: {    
        to: [ 500, test.scrollTop ]
    } 
});
myAnim.animate(); 
```

这里的 test 是您要滚动到的元素的 id。

# android - ListActivity中如何设置LongClick来创建AlertDialogue

> ID：12058316
> 
> 赞同：0
> 
> 时间：2012-08-21T15:31:18.363
> 
> 标签：android, android-alertdialog, long-click

我偶然发现在我的 ListActivity 中的 onLongClick 之后设置 AlertDialogue。如下所示，我已经设置了 onListItemClick 以毫无问题地打开 AlertDialogue 并且工作正常，但是我找不到在此之上调用 LongClick 的正确方法：

```
public class InspectionActivity extends ListActivity {
private Button newInspection;
private static final int ACTIVITY_CREATE=0;

private RMDbAdapter rmDbHelper;
private AlertDialog clickOptionsDialog;
private String inspectionDialogueText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_inspection);
    setUpViews();
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();

    // Get a Cursor for the list items
    Cursor listCursor = rmDbHelper.fetchAllInspections();
    startManagingCursor(listCursor);           

    // set the custom list adapter     
    setListAdapter(new MyListAdapter(this, listCursor));

}

private void setUpViews() {
    newInspection = (Button)findViewById(R.id.new_inspection);
    newInspection.setOnClickListener(new View.OnClickListener() {                       
        public void onClick(View v) {
            createInspection();
        }
    }); 

}

// In your ListActivity class, create a new inner class that extends ResourceCursorAdapter. 
//This inner class is the custom CursorAdapter we will use to manage how data is bound to list   item:

private class MyListAdapter extends ResourceCursorAdapter { 

    public MyListAdapter(Context context, Cursor cursor) { 
        super(context, R.layout.inspection_row, cursor);

    } 

    @Override
    public void bindView(View view, Context context, Cursor cursor) { 
        TextView title = (TextView) view.findViewById(R.id.inspection_row_item_main_title);
        title.setText(cursor.getString(                            
                cursor.getColumnIndex(RMDbAdapter.INSPECTION_REF)));

        TextView description = (TextView) view.findViewById(R.id.inspection_row_item_description);        

        String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex(
                        RMDbAdapter.INSPECTION_COMPANY)), "Company unknown");
        String inspectionDate = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex(
                        RMDbAdapter.INSPECTION_DATE)), "date unknown");
        description.setText("(" + companyName + ", " + inspectionDate + ")");       
    }      
}

private void createInspection() {
    Intent i = new Intent(this, InspectionEdit.class);
    startActivityForResult(i, ACTIVITY_CREATE);
}

protected void onListItemClick(ListView l, View v, final int pos, final long id){

    Cursor cursor = (Cursor) rmDbHelper.fetchInspection(id);

    String inspectionRef = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_REF)), "Reference unknown"); 
    String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_COMPANY)), "company unknown"); 

    inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")"; 

    super.onListItemClick(l, v, pos, id);
    clickOptionsDialog = new AlertDialog.Builder(InspectionActivity.this)
    .setTitle(inspectionDialogueText)
    .setMessage(R.string.general_text_select_option)
    .setPositiveButton(R.string.general_button_open, new AlertDialog.OnClickListener(){

        public void onClick(DialogInterface dialog, int which) {
            Toast.makeText(getApplicationContext(), inspectionDialogueText + " (Area activity to be created)", 
                    Toast.LENGTH_LONG).show(); 
            clickOptionsDialog.cancel();
            }
        })
    .setNeutralButton(R.string.general_button_export, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){

            Toast.makeText(getApplicationContext(), inspectionDialogueText + " (Export activity to be created)", 
                    Toast.LENGTH_LONG).show(); 
            clickOptionsDialog.cancel();
            }
        })

    .setNegativeButton(android.R.string.cancel, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){
            clickOptionsDialog.cancel();
            }
        })
    .create();
    clickOptionsDialog.show(); 
```

谢谢你的帮助！！

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:34:18.377

您可以使用 OnItemLongClickListener 实现 onListItemLongClick 事件来处理对列表视图项目的长按。

# css - 字体在谷歌浏览器中移位

> ID：12058320
> 
> 赞同：1
> 
> 时间：2012-08-21T15:31:23.220
> 
> 标签：css, firefox, google-chrome, font-face, webfonts

我知道 Chrome 和 Firefox（Windows，两者）之间存在浏览器渲染不一致。但是我看到了一个奇怪的错误，涉及@font-face 和 gooogle-fonts 在 Chrome 中将字体向下移动了大约 10 像素。

这是说明问题的图像。我已经突出显示了文本，以便您可以看到转变：

![Chrome 和 Firefox 的屏幕截图](../Images/f7735f40e0b58772d45c834c5883ad91.png)

为了清楚起见，这是CSS：

```
.primary-menu li a,
.primary-menu li a:visited {
    display: block;
    text-decoration: none;
    text-transform: uppercase;
    color: white;
    font-family: 'Oswald', sans-serif;
    font-weight: 700;
    padding-right: 0;
    transition: padding-right .5s;
} 
```

我正在为 Oswald 字体使用 Google 字体：

```
<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans:400,700|Oswald:400,700' type='text/css'> 
```

我正在使用 CSS 重置，因此大多数属性都设置为默认值。我曾尝试摆弄 CSS 以查看是否可以分析它为什么会发生变化，但除了关闭字体外，我看不到其他效果。

这是供参考的源站点。[概念设计有限公司](http://www.conceptdesignltd.co.uk)

任何关于为什么会发生这种情况的知识都会很棒。

非常感谢，尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:38:15.577

我最近遇到了同样的问题，但是我的字体没有在本地安装。（顺便说一句，这将是网页设计中的一个问题，因为您无法控制 pageviewer 计算机上安装的字体）。该问题仅出现在 Windows 的 Chrome 26 中，后来出现在 Windows 的 Firefox 19 中，但没有出现在任何其他浏览器（Windows 和 Mac OS x 都没有）上。我终于发现 Chrome/Win 只会正确呈现 SVG 字体，而 Firefox 则不加提示地使用 WOFF。

所以我用类似这样的 CSS 代码修复了错误渲染的降档

```
/* for all browsers */
@font-face {
font-family: 'myfont';
src: url('myfont.eot');
src: url('myfont?#iefix') format('embedded-opentype'),
         url('myfont.woff') format('woff'),
         url('myfont.ttf') format('truetype'),
         url('myfont.svg#wf') format('svg');
}

/* for all webkit-browsers (Chrome, Safari and newly Opera */
@media screen and (-webkit-min-device-pixel-ratio:0) {
  @font-face {
font-family: 'myfont';
    src: url('myfont.svg#wf') format('svg');
  }
}

/* for all mozilla-browsers (Firefox) */
@-moz-document url-prefix() {
  @font-face {
font-family: 'myfont';
    src: url('myfont_unhinted.woff') format('woff');
  }
} 
```

希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:03:16.670

我遇到了同样的问题，但在 FireFox 中 - 我删除了计算机字体目录中的 Oswald 字体，它解决了这个问题。也许试一试？

# c++ - 在函数内部调用函数

> ID：12058325
> 
> 赞同：0
> 
> 时间：2012-08-21T15:31:42.747
> 
> 标签：c++, function

这个函数定义有什么问题？我已经创建了这两个函数，第二个函数调用第一个函数，所以我想要的是，取决于第一个函数中的 if，调用 AlignCamera(); 将改变 AlignXAXis() 中发生的情况；

```
void AlignCamera();
        {
        double cx = ox+(0.5*(xmax-xmin))*sx;
        double cy = oy+(0.5*(ymax-ymin))*sy;
        double cz = oz+(0.5*(zmax-zmin))*sz;
        int vx=0;
        int vy=0;
        int vz=0;
        int nx=0;
        int ny=0;
        int nz=0;
        int iaxis = current_widget->GetPlaneOrientation();

        if (iaxis == 0)
        {
            vz = -1;
            nx = ox + xmax*sx;
            cx = ox + 256*sx;
            }
        else if (iaxis == 1)
        {
            vz = -1;
            ny = oy + ymax*sy;
            cy = oy + 512*sy;
            }
        else
        {
            vy = 1;
            nz = oz +zmax*sz;
            cz = oz + 64*sz;
            }
        int px = cx+nx*2;
        int py = cy+ny*2;
        int pz = cz+nz*3;

        vtkCamera *camera=ren->GetActiveCamera();
        camera->SetViewUp(vx, vy, vz);
        camera->SetFocalPoint(cx, cy, cz);
        camera->SetPosition(px, py, pz);
        camera->OrthogonalizeViewUp();
        ren->ResetCameraClippingRange();
        renWin->Render();
    }

// Define the action of AlignXAxis
void AlignXAxis();
        {
        int slice_number;
        int po = planeX->GetPlaneOrientation();
        if (po == 3)
        {
            planeX->SetPlaneOrientationToXAxes();
            slice_number = (xmax-xmin)/2;
            planeX->SetSliceIndex(slice_number);
        }
        else
        {
            slice_number = planeX->GetSliceIndex();
        }

        current_widget= planeX;
        ui->horizontalScrollBar->setValue(slice_number);
        ui->horizontalScrollBar->setMinimum(xmin);
        ui->horizontalScrollBar->setMaximum(xmax);
        AlignCamera();
    } 
```

需要的变量在它之前定义，例如ox, oy, oz....

当我运行它时，它说未定义对“AlignCamera()”或“AlignXAxis()”的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:35:59.470

```
void AlignCamera();  //This is merely a prototype, not a declaration. 
```

删除分号，或之后创建声明。

```
void AlignCamera();  //Prototype
void AlignCamera() { //Declaration
    //Do Stuff
} 
```

这同样适用于其他功能。删除那个分号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:38:24.537

去掉分号，所以：

```
void AlignCamera();
    {
     ...
    } 
```

变成

```
void AlignCamera()
    {
     ...
    } 
```

# .net - System::String^ 和 System::String 之间的区别

> ID：12058333
> 
> 赞同：0
> 
> 时间：2012-08-21T15:32:10.530
> 
> 标签：.net, c++-cli

`System::String^ ex;`和之间实际上有什么区别`System::String ex1;`？我发现带有“^”的那个表示它是顶级的。但是，这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:19:59.810

`System::String^`是对托管字符串对象的引用，`System::String`是直接在堆栈上或内联在另一个类中的托管字符串对象。

正如[C++/CLI 中的插入符号 ('^') 是什么意思中所述？](https://stackoverflow.com/questions/202463/what-does-the-caret-mean-in-c-cli),`^`是一个跟踪引用，大致相当于`*`非托管代码中的指针。以同样的方式你可以拥有`unmanagedClass* foo1;`and `unmanagedClass foo2;`，你可以拥有`System::String^ str1;`and`System::String str2;`

当不带 使用时，它遵循与不带 :`^`的非托管类相同的规则：使用非托管类`*`访问方法。离开范围时自动清理（非托管中的析构函数，托管中的处置方法）。`.``->`

确实使使用托管对象`^`变得更加困难的一件事是，大多数托管对象没有定义复制构造函数或等于运算符。这些都不会在 C# 或 VB 中使用，因此它们通常不会被实现。没有它们，就不可能为没有 a 的变量分配新值`^`，因此您通常仅限于构造单个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T17:38:59.083

C++/CLI 有一个称为[“堆栈语义”](http://msdn.microsoft.com/en-us/library/ms177191.aspx)的特性。它旨在模拟 C++ 中的 RAII 模式，当您声明没有 ^ 帽子的引用类型的局部变量时，编译器会自动发出对类的析构函数的调用。

这不适用于 System::String 类，它没有析构函数。

由于它也没有任何有用的构造函数，所以当您尝试在不带帽子的情况下声明它时，您几乎总是会收到编译器错误消息。始终使用帽子。

# android - 在 ORMLite 中使用外键

> ID：12058344
> 
> 赞同：0
> 
> 时间：2012-08-21T15:32:43.180
> 
> 标签：android, foreign-keys, foreign-key-relationship, ormlite

我有一堂课

```
 @DatabaseTable(tableName = "subjects")
public class Subject {
    private static final String SUBJECT_ID = "subject_id";
    @SerializedName("subject_id")
    @DatabaseField(columnName = SUBJECT_ID,id = true,generatedId = false)
    int id;
    @SerializedName("title")
    @DatabaseField(dataType = DataType.STRING)
    String title;
    public Subject()
    {}
    public int getSubjectId() 
    {
         return this.id;
    } 
    public String getSubjectTitle() 
    {
         return this.title;
    }
    public void setSubjectId(int id)
    {
         this.id = id;
    }
    public void setSubjectTitle(String title)
    {
         this.title = title;
    }

    @Override
    public String toString()
    {       
    return "{title="+title +" "+"subject_id"+id+"}";    
    }

} 
```

这是在类中引用“多对一”：

```
 @DatabaseTable(tableName = "categories")
public class Category {
    public final static String CATEGORY_TITLE_FIELD_NAME = "title";
    public final static String SUBJECT_TITLE_FIELD_NAME = "subject";
    private static final String SUBJECT_ID = "subject_id";
    @SerializedName("id")
    @DatabaseField(id = true, generatedId = false)
    int id;
    @SerializedName("title")
    @DatabaseField(dataType = DataType.STRING, columnName = CATEGORY_TITLE_FIELD_NAME)
    String title;
    @SerializedName("subject")
    @DatabaseField(columnName = SUBJECT_ID,foreign = true, foreignAutoCreate = true, foreignAutoRefresh = true)
    Subject subject;

    public Category() {
    }

    public Category(int id, String title, Subject subject) {
        this.id = id;
        this.title = title;
        this.subject = subject;
    }

    public int getCategoryId() {

        return this.id;
    }

    public String getCategoryTitle() {
        return this.title;
    }

    public Subject getCategorySubject() {
        return this.subject;
    }

    public void setCategoryId(int id) {
        this.id = id;
    }

    public void setCategoryTitle(String title) {
        this.title = title;
    }

    public void setCategorySubject(Subject subject) {
        this.subject = subject;
    }

    @Override
    public String toString() {
        return "{title=" + title + " " + "id=" + id + "subject" + subject+ "}";
    }

} 
```

我首先在我的活动中添加主题，然后是类别。如果我不使用参考，一切正常。当我想将 Subject 对象作为外键时，我得到：

```
 08-21 18:19:24.369: W/System.err(4049): java.sql.SQLException: Unknown field 'subject_id' from the Android sqlite cursor, not in:[title, id]
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.android.AndroidDatabaseResults.findColumn(AndroidDatabaseResults.java:97)
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.field.FieldType.resultToJava(FieldType.java:793)
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.stmt.mapped.BaseMappedQuery.mapRow(BaseMappedQuery.java:60)
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.stmt.SelectIterator.getCurrent(SelectIterator.java:270)
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.stmt.SelectIterator.nextThrow(SelectIterator.java:161)
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.stmt.StatementExecutor.query(StatementExecutor.java:161)
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.dao.BaseDaoImpl.query(BaseDaoImpl.java:261)
08-21 18:19:24.369: W/System.err(4049):     at com.j256.ormlite.stmt.QueryBuilder.query(QueryBuilder.java:262)
08-21 18:19:24.369: W/System.err(4049):     at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:276)
08-21 18:19:24.369: W/System.err(4049):     at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:1)
08-21 18:19:24.369: W/System.err(4049):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-21 18:19:24.369: W/System.err(4049):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-21 18:19:24.369: W/System.err(4049):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-21 18:19:24.369: W/System.err(4049):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-21 18:19:24.369: W/System.err(4049):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-21 18:19:24.369: W/System.err(4049):     at java.lang.Thread.run(Thread.java:1019)
08-21 18:19:24.419: I/ApplicationPackageManager(4049): cscCountry is not German : SEK
08-21 18:19:24.549: D/AndroidRuntime(4049): Shutting down VM
08-21 18:19:24.549: W/dalvikvm(4049): threadid=1: thread exiting with uncaught exception (group=0x40018578)
08-21 18:19:24.609: E/AndroidRuntime(4049): FATAL EXCEPTION: main
08-21 18:19:24.609: E/AndroidRuntime(4049): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.assignmentexpert/com.assignmentexpert.DashboardActivity}: java.lang.NullPointerException
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.os.Looper.loop(Looper.java:123)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at java.lang.reflect.Method.invokeNative(Native Method)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at java.lang.reflect.Method.invoke(Method.java:507)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at dalvik.system.NativeStart.main(Native Method)
08-21 18:19:24.609: E/AndroidRuntime(4049): Caused by: java.lang.NullPointerException
08-21 18:19:24.609: E/AndroidRuntime(4049):     at com.assignmentexpert.DashboardActivity.onCreate(DashboardActivity.java:66)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-21 18:19:24.609: E/AndroidRuntime(4049):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-21 18:19:24.609: E/AndroidRuntime(4049):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T15:56:01.563

Remove application and install it again with Subject and Category as above. As I understand this error may happened when you add columnName = SUBJECT_ID in Subject class at the middle of application development when DB have already created.

# php - 在不同目录中包含标题和 CSS

> ID：12058350
> 
> 赞同：-1
> 
> 时间：2012-08-21T15:32:57.910
> 
> 标签：php, html, include

这一定是一个简单的修复，但我就是想不通！

我通过 PHP 将标题包含到每个新页面中，标题包含 CSS 和脚本等。

唯一的问题是由于页面位于不同的目录中，当我链接到 ../header 等标题时，它看起来不错，但包含的脚本是通过短 URL 包含的，例如 /js/script.js

这意味着在页面上（在另一个目录中）脚本不起作用！

我发现很难解释，但看看这个：

```
http://www.healthygit.com/ 
```

如果您查看源代码，所有脚本链接都很好。

现在看看这个：

```
http://www.healthygit.com/fitness/running.php 
```

如果您尝试单击脚本来查看它，它会将您带到 404，或者在这种情况下，302 会将您带到主页。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:37:07.023

Easy peasy，您的脚本、样式表等的源代码应该`/`在它们前面有一个，这样头文件将始终引用站点根目录中的文件。

即：

```
src="js/whatever.js" 
```

应该成为

```
src="/js/whatever.js" 
```

这样，它将始终从站点的根目录中查找文件。这同样适用于 CSS 文件，即`/css/whatever.css`.

# android - '不幸的是，应用程序已停止' Android/Cordova 应用程序

> ID：12058353
> 
> 赞同：2
> 
> 时间：2012-08-21T15:33:06.710
> 
> 标签：android, mobile, cordova

我刚刚设置了一个 Android/Cordova 2.0.0 应用程序，其中除了 Cordova“入门”指南中的简单索引页面外几乎没有任何内容。
但我越来越“不幸的是，当我在 4.0.3 模拟器中运行项目时，应用程序立即停止。我可以运行我已经完成的旧项目没有问题。

这是 logCat 内容：

```
08-21 09:13:30.881: E/AndroidRuntime(529): FATAL EXCEPTION: main
08-21 09:13:30.881: E/AndroidRuntime(529): java.lang.SecurityException: ConnectivityService: Neither user 10040 nor current process has android.permission.ACCESS_NETWORK_STATE.
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.os.Parcel.readException(Parcel.java:1327)
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.os.Parcel.readException(Parcel.java:1281)
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.net.IConnectivityManager$Stub$Proxy.getActiveNetworkInfo(IConnectivityManager.java:597)
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.net.ConnectivityManager.getActiveNetworkInfo(ConnectivityManager.java:365)
08-21 09:13:30.881: E/AndroidRuntime(529):  at org.apache.cordova.NetworkManager.execute(NetworkManager.java:124)
08-21 09:13:30.881: E/AndroidRuntime(529):  at org.apache.cordova.api.PluginManager.exec(PluginManager.java:218)
08-21 09:13:30.881: E/AndroidRuntime(529):  at org.apache.cordova.CordovaChromeClient.onJsPrompt(CordovaChromeClient.java:207)
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:600)
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.os.Looper.loop(Looper.java:137)
08-21 09:13:30.881: E/AndroidRuntime(529):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-21 09:13:30.881: E/AndroidRuntime(529):  at java.lang.reflect.Method.invokeNative(Native Method)
08-21 09:13:30.881: E/AndroidRuntime(529):  at java.lang.reflect.Method.invoke(Method.java:511)
08-21 09:13:30.881: E/AndroidRuntime(529):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-21 09:13:30.881: E/AndroidRuntime(529):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-21 09:13:30.881: E/AndroidRuntime(529):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 androidManifest 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.active.myApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".myAppActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

和我的活动文件：

```
package com.active.myApp;

import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;

public class myAppActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:37:00.410

您需要为您的应用授予您的科尔多瓦设置所需的所有权限。AFAIK 这至少包括`ACCESS_NETWORK_STATE`现在提出问题的特权。

尝试

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在`<manifest>`您的 AndroidManifest.xml 中的元素内并从那里开始工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-01T23:59:44.713

对于刚接触 Cordova 的任何人，请运行：

`~/Library/Android/sdk/platform-tools/adb logcat`

清除屏幕（Mac OS X 上 Terminal.app 中的 command-k），然后从单独的控制台运行您的应用程序：

`cordova run android`

当您的应用程序崩溃时，请查看 logcat 输出。就我而言，提到了 OpenGL，所以我跑了：

`~/Library/Android/sdk/tools/android avd`

然后编辑我的模拟器并检查`Use Host GPU`并能够在那之后运行它。我很幸运，它是如此简单，YMMV。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T15:35:35.980

将此添加到您的清单中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

# oracle - Oracle 函数中的加密/解密密码

> ID：12058356
> 
> 赞同：4
> 
> 时间：2012-08-21T15:33:19.960
> 
> 标签：oracle, encryption, plsql

由于以前设计不佳的结构，我必须使用的当前数据库将用户的密码存储为文本。

现在，我正在构建一个必须使用这些密码的前端部分，我当然不想发送未加密的密码。

我的想法是编写一个 Oracle 函数来加密和解密文本密码，并在将返回加密数据的存储过程中使用这些函数。

在 Oracle 中这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:40:45.930

如果您想编写自己的函数来加密和解密数据，您只需调用[DBMS_CRYPTO](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_crypto.htm#i1001225) `encrypt`和`decrypt`带有适当参数的方法（即选择您的加密算法、您的密钥等）。

当然，如果您编写自己的例程，假设您将密钥存储在数据库中或数据库可以访问的某个位置，那么您在安全方面并没有做太多事情。通过网络发送未加密的密码是不好的，但将未加密的密码存储在数据库中通常更糟糕（或者如果`decrypt`数据库中有一种方法可以访问密钥来解​​密数据，则使用加密的密码）。从数据库中窃取数据通常比嗅探通过网络发送的数据以找到密码要容易得多。

当然，正确的答案是重新构建系统，以便您根本不存储密码。您应该存储`DBMS_CRYPTO`不可逆的密码哈希（您也可以使用包生成）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T15:36:09.673

看看 DBMS_CRYPTO

它具有加密和解密内置数据的方法。比自己编写更好。

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_crypto.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_crypto.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T16:40:19.267

这是一个使用 ( ) 加密密码的打包函数（成功实现`DBMS_CRYPTO`）-

```
CREATE OR REPLACE
PACKAGE BODY encrypt_paswd
AS
  G_CHARACTER_SET VARCHAR2(10) := 'AL32UTF8';
  G_STRING VARCHAR2(32) := '12345678901234567890123456789012';
  G_KEY RAW(250) := utl_i18n.string_to_raw
                      ( data => G_STRING,
                        dst_charset => G_CHARACTER_SET );
  G_ENCRYPTION_TYPE PLS_INTEGER := dbms_crypto.encrypt_aes256 
                                    + dbms_crypto.chain_cbc 
                                    + dbms_crypto.pad_pkcs5;
  ------------------------------------------------------------------------
  --Encrypt a password 
  --Salt the password
  ------------------------------------------------------------------------
  FUNCTION encrypt_val( p_val IN VARCHAR2 ) RETURN RAW
  IS
    l_val RAW(32) := UTL_I18N.STRING_TO_RAW( p_val, G_CHARACTER_SET );
    l_encrypted RAW(32);
  BEGIN
    l_val := utl_i18n.string_to_raw
              ( data => p_val,
                dst_charset => G_CHARACTER_SET );

    l_encrypted := dbms_crypto.encrypt
                   ( src => l_val,
                     typ => G_ENCRYPTION_TYPE,
                     key => G_KEY );

    RETURN l_encrypted;
  END encrypt_val;
END encrypt_paswd; 
```

这使用`encrypt_aes256`-“高级加密标准。分组密码。使用 256 位密钥大小。” , `chain_cbc`- “密码块链接。明文在加密之前与前一个密文块进行异或运算。” - `pad_pkcs5`“提供符合 PKCS #5：基于密码的加密标准的填充”。

除此之外，您还可以创建一个类似的函数来解密。像 -

```
 FUNCTION decrypt_val( p_val IN RAW ) RETURN VARCHAR2  
  IS
    l_decrypted RAW(32);
    l_decrypted_string VARCHAR2(32);
    l_user  VARCHAR2(32);
  BEGIN
    SELECT user 
      INTO l_user
      FROM dual;

    if l_user = 'ADMIN' -- you can restrict usage of decrypt to certain db users only.
    then
        l_decrypted := dbms_crypto.decrypt
                ( src => p_val,
                  typ => G_ENCRYPTION_TYPE,
                  key => G_KEY );

        l_decrypted_string := utl_i18n.raw_to_char
                    ( data => l_decrypted,
                      src_charset => G_CHARACTER_SET );
        RETURN l_decrypted_string;
    else            
            RAISE_APPLICATION_ERROR(-20101, 'You are not authorized to use this function - decrypt_val()');
    end if;
    RETURN 'Unknown';
  END decrypt_val; 
```

您还可以考虑在将包编译到数据库中之前先包装包`wrap iname=package_name.pkb`，然后再编译生成的`plb`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-03T05:29:59.257

或者你可以像这样使用密码散列算法 pbkdf2 [http://mikepargeter.wordpress.com/2012/11/26/pbkdf2-in-oracle/](http://mikepargeter.wordpress.com/2012/11/26/pbkdf2-in-oracle/) 我用 rfc [https://www.ietf.org/验证了结果rfc/rfc6070.txt](https://www.ietf.org/rfc/rfc6070.txt)它工作正常。

检查此链接以获取最小迭代和 key_size：[PBKDF2 推荐的密钥大小？](https://stackoverflow.com/questions/10943837/pbkdf2-recommended-key-size) 请注意，结果是长度的两倍，因为它是十六进制编码的。

我们将这些列存储在数据库中

```
PASSWORD_HASH                 VARCHAR2(512 BYTE),
PASSWORD_SALT                 VARCHAR2(256 BYTE),
PASSWORD_ITERATIONS           NUMBER(10),
PASSWORD_HASH_METHOD          VARCHAR2(30 BYTE),
PASSWORD_CHANGED_DT           DATE 
```

hash、salt 和迭代用于提供 pbkdf2 算法 hash_method 用于迁移目的， changed_dt 用于使密码过期

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-12T16:33:18.197

用户此代码绝对有效

```
create or replace PACKAGE          "PKG_LOGI_PWD_REG" 
AS
  function ENCRYPT_VAL( P_VAL in varchar2 ) return varchar2;
  function DECRYPT_VAL( P_VAL in raw ) return varchar2;
end;
/

create or replace PACKAGE BODY          "PKG_LOGI_PWD_REG" 
as
  FUNCTION decrypt_val( p_val IN RAW ) RETURN VARCHAR2  
  IS
    l_decrypted RAW(32);
    l_decrypted_string VARCHAR2(32);
    L_USER  varchar2(32);
    L_CHARACTER_SET varchar2(10);
    L_STRING varchar2(32);
    L_KEY raw(250);
    L_ENCRYPTION_TYPE PLS_INTEGER;
  BEGIN
        L_KEY := UTL_I18N.STRING_TO_RAW
                            ( data => '98345678901234567890123456789012',
                              DST_CHARSET => 'AL32UTF8' );
        L_ENCRYPTION_TYPE := dbms_crypto.encrypt_aes256 
                                        + DBMS_CRYPTO.CHAIN_CBC 
                                        + DBMS_CRYPTO.PAD_PKCS5;

        l_decrypted := dbms_crypto.decrypt
                ( SRC => P_VAL,
                  TYP => L_ENCRYPTION_TYPE,
                  key => L_KEY );

        l_decrypted_string := utl_i18n.raw_to_char
                    ( data => l_decrypted ,
                      src_charset => 'AL32UTF8' );
        RETURN l_decrypted_string;

  end DECRYPT_VAL;

  FUNCTION encrypt_val( p_val IN VARCHAR2 ) RETURN VARCHAR2
  is
    L_VAL RAW(32);
    L_ENCRYPTED raw(32);
    L_CHARACTER_SET varchar2(10);
    L_STRING varchar2(32);
    L_KEY RAW(250);
    L_ENCRYPTION_TYPE PLS_INTEGER;
  begin

    L_KEY := UTL_I18N.STRING_TO_RAW
                        ( data => '98345678901234567890123456789012',
                          DST_CHARSET => 'AL32UTF8' );
    L_ENCRYPTION_TYPE := dbms_crypto.encrypt_aes256 
                                    + DBMS_CRYPTO.CHAIN_CBC 
                                    + DBMS_CRYPTO.PAD_PKCS5;
    L_VAL := utl_i18n.string_to_raw
              ( data => p_val,
                dst_charset => 'AL32UTF8' );

    L_ENCRYPTED := dbms_crypto.encrypt
                   ( SRC => L_VAL,
                     TYP => L_ENCRYPTION_TYPE,
                     key => L_KEY );

    return L_ENCRYPTED;
  EXCEPTION when OTHERS then
    RETURN SQLCODE||'-'||SQLERRM;
  end ENCRYPT_VAL;
end PKG_LOGI_PWD_REG;
/ 
```

# python - 如何从 django 的同一文件夹中的不同项目访问设置变量

> ID：12058358
> 
> 赞同：1
> 
> 时间：2012-08-21T15:33:20.437
> 
> 标签：python, django, caching

我在 django 的一个文件夹下有不同的项目。我正在尝试从每个 settings.py 中获取所有缓存变量以显示在一个项目 A 中。到目前为止，我已经能够访问 A 中的本地设置。使用类似的东西

```
<!-- language: lang-py -->
from django.conf import settings
def get_cache_settings():
    return settings.CACHES.keys() 
```

然后我尝试了以下从 B 获取设置但没有用

```
<!-- language: lang-py -->
from B.django.conf import settings 
```

也试过

```
<!-- language: lang-py -->
from B import django.conf.settings 
```

树文件夹如下所示：

```
Project/
       A/
         cache/
              urls.py
              view.py
         settings.py
       B/
         settings.py 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:42:21.353

Django 设置是项目级别的，所以没有应用设置之类的东西。

如果您谈论的是位于应用程序目录 A 中的 settings.py 文件，只需：

```
from A import settings as A_settings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:04:03.687

您需要做的是将更大的文件夹添加到您的 python 路径中。

```
$export PYTHONPATH=..:$PYTHONPATH 
```

现在你可以做

```
from A import settings as A_settings

from B import settings as B_settings 
```

# objective-c - 循环中的 UILabel 动画

> ID：12058359
> 
> 赞同：1
> 
> 时间：2012-08-21T15:33:26.960
> 
> 标签：objective-c, ios, animation, uikit

我正在尝试制作一个动画，其中文本在淡出时移动到底部，同时它重新出现在与以前相同的位置并执行相同的动画。这是我的代码：

```
for (int i=0; i<10; i++)
{
    [UIView animateWithDuration:0.5
                          delay:0.2f
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         productTextLabel.center = CGPointMake(381, 410);
                         productTextLabel.alpha = 0.0;
                         productTextLabel.center = CGPointMake(381, 340);
                         productTextLabel.alpha = 1;
                     }
                     completion:^(BOOL fin) {
                     }];

} 
```

我的问题是我试图让这个动画发生不止一次。我正在使用 for 循环，但它只执行一次。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T15:44:27.623

您可以使用 animationWithDuration: 方法中的选项 UIViewAnimationOptionRepeat 和 UIViewAnimationOptionAutoReverse 自动重复和反转动画。

整个方法将变为：

```
[UIView animateWithDuration:0.5
                      delay:0.2f
                    options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoReverse
                 animations:^{
                     productTextLabel.center = CGPointMake(381, 410);
                     productTextLabel.alpha = 0.0;
                 }
                 completion:^(BOOL fin) {
                 }]; 
```

要取消动画，您可以调用

```
[productTextLabel.layer removeAllAnimations]; 
```

注意：您应该导入 QuartzCore 以便能够调用 removeAllAnimations 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:33:32.530

试试这种方式，它对我有用：

```
__block void (^fadePart1)() = ^{ productTextLabel.center = CGPointMake(381.f, 410.f); productTextLabel.alpha = 0.f; };
__block void (^fadePart2)() = ^{ productTextLabel.center = CGPointMake(381.f, 340.f); productTextLabel.alpha = 1.f; };
__block void (^fadePart1Finished)(BOOL finished) =  ^(BOOL finished) {
    if (_willFinishAnimation == false) {
        [UIView animateWithDuration:0.5f delay:0.2f options:UIViewAnimationCurveEaseInOut|UIViewAnimationOptionAllowUserInteraction animations:fadePart2 completion:^(BOOL finished) {
            if (_willFinishAnimation == false) [UIView animateWithDuration:0.5f delay:0.2f options:UIViewAnimationCurveEaseInOut|UIViewAnimationOptionAllowUserInteraction animations:fadePart1 completion:fadePart1Finished];  
        }]; 
    }
};
fadePart1Finished(false); 
```

我有一个全局`Boolean _willFinishAnimation;`变量，在我设置动画之前`false`，当我想完成我设置的效果时`true`，就是这样。

# javascript - 我的 jquery 是否需要准备好 requirejs 的文档

> ID：12058363
> 
> 赞同：0
> 
> 时间：2012-08-21T15:33:48.117
> 
> 标签：javascript, jquery, dom, requirejs

有人对您是否需要使用已准备好 require.js 的文档有任何想法吗？我的意思是，如果您在页面底部调用 js 并且您的 main.js 具有依赖项，那么在加载所有必要的代码之前，肯定不会执行 js 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:38:04.677

> 调用页面底部的js

是的，在这种情况下，您可以省略`$(document).ready`- 文档加载到页面结束之前。

> 在加载所有必要的代码之前，肯定不会执行 js 吗？

不，永远不要依赖这样的时间假设。始终声明您的依赖项 - 当它们已经加载时它不会减慢您的代码，但如果它们没有加载，它将防止它失败。

# transparent - 如何将我的 Flowplayer 设置为透明？

> ID：12058365
> 
> 赞同：0
> 
> 时间：2012-08-21T15:33:55.023
> 
> 标签：transparent, flowplayer

我正在为我的播放器使用此代码：

```
 <div class="video">
            <div id="player">
                                        <script type="text/javascript" src="/flowplayer/flowplayer-3.2.10.min.js"></script> 
                                            <a href="http://www.mediacollege.com/video-gallery/testclips/20051210-w50s.flv" style="display:block;width:640px;height:480px" id="myAlternativeContent"></a> 
                    <script>
                        flowplayer("myAlternativeContent", { 
                             src:"/flowplayer/flowplayer.commercial-3.2.11.swf", 
                             wmode: 'transparent',
                             key: '#$52177209b15c5b2bf56'
                             },
                             {
                          clip:  {
                              autoPlay: false,
                              autoBuffering: true,
                              url: 'http://www.mediacollege.com/video-gallery/testclips/20051210-w50s.flv',
                              provider: 'lighttpd'
                          },
                          plugins: {
                                lighttpd: {
                                    url: "/flowplayer/flowplayer.pseudostreaming-3.2.9.swf"
                                }
                            }
                        });
                                            </script>
    <!-- this will install flowplayer inside previous A- tag. -->

                                <!-- id="player" --></div> 
```

但是播放器似乎并不透明。当我添加播放器广告但它们没有显示时。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:37:21.937

您可以使用对象参数来设置`wmode`播放器的属性，但它必须是第二个参数，包括`src`要传入播放器 swf 的属性（即您的第二个参数）。

[http://flash.flowplayer.org/demos/configuration/wmode.html](http://flash.flowplayer.org/demos/configuration/wmode.html)：

```
flowplayer("player", {
    src:"http://releases.flowplayer.org/swf/flowplayer-3.2.14.swf",
    wmode: "opaque" // This allows the HTML to hide the flash content
},
{
    clip: {
        url: 'http://pseudo01.hddn.com/vod/demo.flowplayervod/flowplayer-700.flv'
    }
}); 
```

# c++ - BGL：具有顶点不变量的同构示例

> ID：12058366
> 
> 赞同：2
> 
> 时间：2012-08-21T15:33:56.837
> 
> 标签：c++, boost, graph, boost-graph, isomorphism

有人可以向我展示如何将 Boost Graph Library 同构函数与顶点不变量一起使用的示例吗？我正在查看[http://www.boost.org/doc/libs/1_50_0/libs/graph/example/isomorphism.cpp](http://www.boost.org/doc/libs/1_50_0/libs/graph/example/isomorphism.cpp)上的示例，它使用 degree_vertex_invariant()。但是，我想定义自己的不变函数，一个例子真的可以帮助我理解如何做到这一点。

以下是更多细节：

我在顶点上定义了一组离散属性，以便我可以用整数标记每个顶点。所以我有一个从任何顶点（g，v）到它的不变标签的映射，这是一个无符号整数。这些标签不一定是唯一的，即同一个图中的几个顶点可以共享同一个标签。所以假设我定义了一个函数：

```
template <typename Graph>
unsigned discrete_vertex_invariant(const typename boost::graph_traits<Graph>::vertex_descriptor &v, const Graph &g) 
```

我想这样称呼同构：

```
typename property_map<Graph, vertex_index_t>::type
      v1_index_map = get(vertex_index, g1),
      v2_index_map = get(vertex_index, g2);
vector<typename graph_traits<Graph>::vertex_descriptor> f(num_vertices(g1));

bool is_isomorphic = isomorphism(g1, g2,
   isomorphism_map(make_iterator_property_map(f.begin(), v1_index_map, f[0])),
   discrete_vertex_invariant, discrete_vertex_invariant
)) 
```

...但我收到一个错误：

```
no matching function for call to ‘isomorphism(
...
 <unresolved overloaded function type>, <unresolved overloaded function type>)’ 
```

定义discrete_vertex_invariant() 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:35:56.790

你可以在[这里](http://www.boost.org/doc/libs/1_51_0/boost/graph/isomorphism.hpp)找到的定义`degree_vertex_invariant`。它只是一个带有 typedef 的函数对象，`result_type`预计`argument_type`将与图的每个顶点一起调用，并且它还有一个名为的成员，该成员`max`返回一个等于不变量的最大值加一的整数。

使用您的函数的类似仿`discrete_vertex_invariant`函数如下所示：

```
template <typename Graph>
class discrete_vertex_invariant_functor
{
    typedef typename boost::graph_traits<Graph>::vertex_descriptor vertex_t;
    const Graph &graph;
public:
    typedef unsigned int result_type;
    typedef vertex_t argument_type;
    discrete_vertex_invariant_functor(const Graph &g):graph(g){}
    result_type operator()(argument_type v)const
    {
        return discrete_vertex_invariant(v,graph);
    }
    result_type max()
    {
        return MAX_LABEL+1;
    }
};

//helper function to help with argument deduction
template <typename Graph>
discrete_vertex_invariant_functor<Graph> make_discrete_vertex_invariant(const Graph &g)
{
    return discrete_vertex_invariant_functor<Graph>(g);
} 
```

然后，您可以`isomorphism`使用其命名参数版本进行调用：

```
bool ret=isomorphism(g1, g2, 
            isomorphism_map(make_iterator_property_map(f.begin(), v1_index_map, f[0]))
            .vertex_invariant1(make_discrete_vertex_invariant(g1))
            .vertex_invariant2(make_discrete_vertex_invariant(g2))
         ); 
```

# ruby-on-rails - Heroku - 2 个应用程序。如何将 Sinatra 应用程序与 RoR 应用程序连接并使用一个数据库？

> ID：12058367
> 
> 赞同：0
> 
> 时间：2012-08-21T15:33:56.113
> 
> 标签：ruby-on-rails, ruby, database, heroku, sinatra

我有 Heroku 2 应用程序 - 第一个是用 RoR 编写的，还包含数据库。第二个应用程序是用 Sinatra 框架编写的，在这个应用程序中，我需要处理保存在 RoR 应用程序数据库中的数据。

我试图查看一些如何从其他应用程序的数据库中加载 Sinatra 中的数据库数据的示例，但我不是很成功......

你能给我任何建议吗，如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:00:49.523

我最好的建议是在您的 sinatra 应用程序使用的 Rails 应用程序上创建一个 API（您可以使用[fernet 之](https://github.com/hgmnz/fernet)类的东西来签名身份验证令牌）。不要让多个应用程序连接到同一个数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T16:23:07.690

如果您只想共享数据库，您可以通过将 DATABASE_URL 配置变量从一个应用程序复制到另一个应用程序来实现。

你可以得到这样的值

```
heroku config --app <app_name_of_app1> 
```

一旦有了 的值`DATABASE_URL`，您就可以像这样为其他应用程序设置它。

```
heroku config:add DATABASE_URL=<long_url_string_from_step_one> --app <app_name_of_app2> 
```

# objective-c - 将内容从主 nsdictionary 复制到另一个 nsdictionary

> ID：12058369
> 
> 赞同：0
> 
> 时间：2012-08-21T15:34:00.893
> 
> 标签：objective-c, properties, nsmutabledictionary

需要知道将一个内容复制`NSMutableDictionary`到另一个的最佳方法`NSMutableDictionary`。

我有大约 10 个类别，每个类别都有自己的列表：

![在此处输入图像描述](../Images/1e0c5baf238b96a907c9ea4337b4c5ab.png)

我有一个`UITableView`使用称为`listContent`它的类成员`datasource`：

```
@property (nonatomic) NSMutableDictionary *listContent; 
```

然后我需要将 listContent 的内容保存到另一个列表中：

```
//Cached list results
@property (nonatomic) NSMutableDictionary *listContentCategory1;
@property (nonatomic) NSMutableDictionary *listContentCategory2;
@property (nonatomic) NSMutableDictionary *listContentCategory3; 
```

这是为了节省获取先前获取的结果的开销。

简单地做`self.listContentCategory1 = self.listContent;`就是不复制`self.listContent`into的当前内容`self.listContentCategory1`。

我应该使用`(nonatomic,copy)`, 在`self.listContentCategory1,self.listContentCategory2?`

(1) 我应该如何设置我的属性`self.listContent`和`self.listContentCategoy1,self.listContentCategoy2,etc?`

(2) 作业的最佳方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:28:04.987

```
self.listContentCategory1 = [NSMutableDictionary dictionaryWithDictionary: Self.listContent]; 
```

使属性（非原子，保留）

# c# - C# 检测用户是否现在使用计算机

> ID：12058379
> 
> 赞同：3
> 
> 时间：2012-08-21T15:34:34.373
> 
> 标签：c#, detect

> **可能重复：**
> [C# - 检测上次用户与操作系统交互的时间](https://stackoverflow.com/questions/1037595/c-sharp-detect-time-of-last-user-interaction-with-the-os)

我正在使用 VS 2010/C# 构建一个 Windows 窗体软件，我想在用户不使用计算机时每天更新软件。

谁能建议我如何检测用户现在是否使用计算机？我试图检查用户是否在最后 10 分钟内单击键盘或移动鼠标，但问题是如果他看电影并且他没有移动任何东西.. 我真的想要任何建议如何检查计算机是否打开并且用户不使用它..

谢谢大家有美好的一天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:21:51.470

你不需要把它变成一个更大的问题。我会保持简单。第一次更新可以在 Windows 启动时触发。您可以在 Windows 服务中打包更新软件并将启动类型设置为自动。可以在用户不工作的时间（例如凌晨 2:00）进行定期更新（当机器运行时）……您应该选择最适合您的时间。替代方案是监控机器 CPU，但正如我所说，我会保持简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:43:02.393

[我在链接http://www.blackwasp.co.uk/InactivityDetection.aspx](http://www.blackwasp.co.uk/InactivityDetection.aspx)中找到了很好的解决方案 + 演示

# javascript - 使用javascript更改复选框的''checked'属性

> ID：12058381
> 
> 赞同：2
> 
> 时间：2012-08-21T15:34:37.417
> 
> 标签：javascript, html, ajax, jsp

现在，当它第一次加载 html 页面时，我的复选框是以这种方式创建的：

```
<input type="checkbox" id="CBOX1" name="CBOX1" onclick="onCBOX(this)" disabled/> 
```

在同一个 html 中的函数中：

```
boolean checked = true;
document.theForm.elements['CBOX1'].checked = true; 
```

由于某种原因，稍后在页面上调用该函数时，未选中复选框值。是因为当我第一次创建复选框时，我创建它时没有“选中”属性？然后当我为它分配一个值时，该元素似乎不再包含选中的属性，就像我检查页面源时一样。它仍然是一样的......

```
<input type="checkbox" id="CBOX1" name="CBOX1" onclick="onCBOX(this)" disabled/> 
```

为简单起见，我肯定知道使用 AJAX 对该元素的其他属性进行了更改，但我不知道为什么检查的属性没有被继承......还有什么选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:42:07.613

选中复选框：

```
document.theForm.elements['CBOX1'].checked = true;
document.theForm.elements['CBOX1'].checked = "checked"; 
```

取消选中复选框：

```
document.theForm.elements['CBOX1'].checked = false; 
```

如果您希望在加载时未选中它，请不要触摸它，默认情况下它是未选中的。

此外，如果您在输入字段上使用**disabled**属性，则不会注册任何点击事件。

有关示例，请参[见此 jsfiddle](http://jsfiddle.net/kgdvm/)。

**编辑**

如果可点击性不是问题，那么就按照我已经指出的去做。这是一个**完整**的工作示例。

```
<html>
 <head>
 </head>
 <body>
  <input id="tar" type="checkbox" disabled />
  <input type="checkbox" onclick="callFunc(this)" />
  <script type="text/javascript">
   function callFunc(elem){
    document.getElementById("tar").checked = elem.checked;
   }
  </script>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:37:09.907

尝试将其设置为`true`：

```
document.theForm.elements['CBOX1'].checked = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:38:27.537

试试这个，反正没有测试。

```
document.theForm.elements['CBOX1'].checked = true; 
```

# error-handling - 如何在重新启动时将手移到手上

> ID：12058382
> 
> 赞同：1
> 
> 时间：2012-08-21T15:34:37.503
> 
> 标签：error-handling, common-lisp

是否可以像这样在重新启动时手把手地移动：

```
(handler-bind ((simple-error #'(lambda(condition)
                       (write condition)
                       (invoke-restart 'alle condition))))
    (restart-case
      (restart-case
        (error 'simple-error)
       (next (err)))
      (alle (err) (invoke-restart 'next)))) 
```

这目前导致

```
No restart NEXT is active.
   [Condition of type SB-INT:SIMPLE-CONTROL-ERROR] 
```

我希望能够实现像“just-log-all-conditions”这样的一般重启，然后针对其表达式中发出的任何条件调用正确的重启。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:27:47.870

您可能会检查这是否真的是您想要做的......通常您希望处理程序选择最佳重启。处理程序会看到所有可用的重新启动。从重新启动到重新启动是不寻常的。恕我直言。对于某些情况，也没有“正确”的重新启动。几次重新启动可能可用且有用。这可以由用户以编程方式或交互方式确定。重新启动对于几种不同的情况也可能有用。

Common Lisp 条件系统有几个基本概念：

*   **条件**，通常实现为 CLOS 类

*   **发出**条件对象的信号，这通常在用户代码中完成。

*   **处理**情况。根据条件选择并调用处理程序。当处理程序运行时，它可以检查并决定要做什么。处理程序通常拒绝处理条件或选择可用的重新启动之一。在典型的开发环境中，这可能涉及显示重新启动并要求用户做出选择。

*   **重新启动**。然后重新启动负责摆脱这种状况。将控制权转移到重新启动使我们摆脱了错误上下文。我们可以通过“UNWIND-PROTECT”强​​制执行代码。一旦我们重新启动，发出条件信号的上下文就消失了。

这意味着只有处理程序才能看到所有可用的重新启动，并且处理程序也可以将控制权转移到下一个处理程序。

*从重启跳到*重启并不是这个模型的一部分。

有关条件系统概念的一些背景信息，请参见 Kent Pitman 的这篇文章：[Lisp 语言家族中的条件处理](http://www.nhplace.com/kent/Papers/Condition-Handling-2001.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:01:50.510

您应该以相反的顺序指定所有内容，如下所示：

```
(restart-case
    (restart-case
        (handler-bind ((simple-error #'(lambda(condition)
                                         (write condition)
                                         (invoke-restart 'alle condition))))
          (error 'simple-error))
      (alle (err) (invoke-restart 'next)))
  (next () #|do nothing|#)) 
```

有关详细信息，请参阅[CLHS](http://www.lispworks.com/documentation/HyperSpec/Body/m_rst_ca.htm#restart-case)。

# java - javac中的Java自类型递归类型参数和继承错误

> ID：12058384
> 
> 赞同：8
> 
> 时间：2012-08-21T15:34:42.917
> 
> 标签：java, generics, javac, java-7, java-6

为什么这段代码无法编译？

```
public class x
{
    private void test()
    {
        handle(new ThingA());
        handle(new ModifiedThingA());
    }

    private <T extends BaseThing<T>, X extends T> java.util.List<T> handle(X object)
    {
        return object.getList();
    }

    private static class BaseThing<T extends BaseThing<T>>
    {
        public java.util.List<T> getList()
        {
            return null;
        }
    }

    private static class ThingA
        extends BaseThing<ThingA>
    {
    }

    private static class ModifiedThingA
        extends ThingA
    {
    }
} 
```

Java 6 给出了这个错误`handle(new ModifiedThingA());`：

```
x.java:6: <T,X>handle(X) in x cannot be applied to (x.ModifiedThingA)
            handle(new ModifiedThingA());
            ^ 
```

Java 7 甚至不喜欢`handle(new ThingA());`，这是 Java 7 的输出：

```
x.java:5: error: invalid inferred types for T; inferred type does not conform to declared bound(s)
            handle(new ThingA());
                  ^
    inferred: ThingA
    bound(s): CAP#1
  where T,X are type-variables:
    T extends BaseThing<T> declared in method <T,X>handle(X)
    X extends T declared in method <T,X>handle(X)
  where CAP#1 is a fresh type-variable:
    CAP#1 extends BaseThing<CAP#1> from capture of ?
x.java:6: error: invalid inferred types for T; inferred type does not conform to declared bound(s)
            handle(new ModifiedThingA());
                  ^
    inferred: ModifiedThingA
    bound(s): CAP#1
  where T,X are type-variables:
    T extends BaseThing<T> declared in method <T,X>handle(X)
    X extends T declared in method <T,X>handle(X)
  where CAP#1 is a fresh type-variable:
    CAP#1 extends BaseThing<CAP#1> from capture of ?
2 errors 
```

在我看来，当它实际上是a时，它`javac`被误认为是 a 。这是我的错误还是我的？`ModifiedThingA``BaseThing<ModifiedThingA>``BaseThing<ThingA>``javac`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:48:28.323

`javac`的行为似乎是正确的。理论上，一个类型变量 ,`T`就足够了。但是，您引入了第二个类型变量`X`，以帮助进行类型推断。首先推断出for 的参数`X`，然后根据调用上下文`T`推断出 for 的参数：

```
List<ThingA> a = handle(new ThingA());
List<ThingA> b = handle(new ModifiedThingA()); 
```

但是，您的调用上下文不会对返回类型设置任何限制。因此，编译器[被迫](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.8-120-A.5)引入一个类型变量 ( `CAP#1`)，其下限为 null。`T`的论点将被推断为`glb(BaseThing<CAP#1>) = BaseThing<CAP#1>`。鉴于其下限，`X`不能证明是 的子类型`T`。

有两种或三种方法可以解决这个问题。

1.  手动推断（如果很少需要也可以）
2.  提供返回类型为 void 的“重载”（需要另一个名称，呃）
3.  如果返回的列表是不可变的或防御性副本，您可以断开 type 参数`T`与其 bounds 参数的连接

我更喜欢选项3：

```
private <T extends BaseThing<T>> List<T> handle(BaseThing<? extends T> object) {
    return new ArrayList<T>(object.getList());
    // or (using guava's ImmutableList)
    return ImmutableList.copyOf(object.getList());
} 
```

快乐的泛型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T12:44:02.767

您的代码在 javac 1.8.0_45 和 Eclipse 4.1.1 中编译得很好。

可能为了以一种很好的方式编译 lambda 表达式而对 Java 8 中的类型推断算法所做的更改也解决了您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:48:39.820

javac 1.7.0_09 和 1.7.0_11 似乎有一个bug，导致了这个问题。

# r - 用于异常检测的具有缺失值的时间序列的 STL 分解

> ID：12058390
> 
> 赞同：18
> 
> 时间：2012-08-21T15:35:21.887
> 
> 标签：r, statistics, time-series, na, stl-decomposition

我正在尝试检测气候数据时间序列中的异常值，其中一些缺失的观测值。在网上搜索我发现了许多可用的方法。其中，stl 分解似乎很有吸引力，因为它去除了趋势和季节性成分并研究了其余部分。阅读[STL: A Seasonal-Trend Decomposition Procedure Based on Loess](http://www.wessa.net/download/stl.pdf)， stl 在确定分配可变性的设置方面似乎很灵活，不受异常值的影响，尽管有缺失值也可以应用。但是，尝试在 R 中应用它，经过四年的观察并根据[http://stat.ethz.ch/R-manual/R-patched/library/stats/html/stl.html](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/stl.html)定义所有参数，我遇到错误：

> 时间序列包含内部 NA

当`na.action = na.omit`, 和

> 系列不是周期性的或少于两个周期

当`na.action = na.exclude`.

我已经仔细检查了频率是否正确定义。我在博客中看到了相关问题，但没有找到任何可以解决此问题的建议。是否可以在缺少值的系列中应用 stl？我非常不愿意插入它们，因为我不想引入（并因此检测......）伪影。出于同样的原因，我不知道改用 ARIMA 方法有多可取（如果缺失值仍然是一个问题）。

如果您知道在缺失值的系列中应用 stl 的方法，或者您认为我的选择在方法上不合理，或者您有更好的建议，请分享。我是该领域的新手，并且被大量（看似......）相关信息所淹没。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T00:28:24.773

一开始`stl`我们[发现](http://svn.r-project.org/R/trunk/src/library/stats/R/stl.R)

```
x <- na.action(as.ts(x)) 
```

不久之后

```
period <- frequency(x)
if (period < 2 || n <= 2 * period) 
    stop("series is not periodic or has less than two periods") 
```

也就是说，`stl`期望在（否则）之后`x`成为`ts`对象。让我们先检查一下。`na.action(as.ts(x))``period == 1``na.omit``na.exclude`

显然，最后`getAnywhere("na.omit.ts")`我们发现

```
if (any(is.na(object))) 
    stop("time series contains internal NAs") 
```

这很简单，什么都做不了（`na.omit`不排除`NAs`对象`ts`）。现在`getAnywhere("na.exclude.default")`排除`NA`观察，但返回一个类对象`exclude`：

```
 attr(omit, "class") <- "exclude" 
```

这是另一种情况。如上所述，`stl`expects `na.action(as.ts(x))`to be `ts`，但`na.exclude(as.ts(x))`is of class `exclude`。

`NAs`因此，如果一个人对排除感到满意，那么例如

```
nottem[3] <- NA
frequency(nottem)
# [1] 12
na.new <- function(x) ts(na.exclude(x), frequency = 12)
stl(nottem, na.action = na.new, s.window = "per") 
```

作品。通常，`stl`不适用于`NA`值（即 with `na.action = na.pass`），它在 Fortran 中崩溃得更深（请参阅[此处](http://svn.r-project.org/R/trunk/src/library/stats/src/stl.f)的完整源代码）：

```
z <- .Fortran(C_stl, ... 
```

替代方案`na.new`并不令人愉快：

*   `na.contaguous`- 查找时间序列对象中最长的连续非缺失值。
*   `na.approx`, `na.locf`from`zoo`或其他一些插值函数。
*   不确定这个，但可以在[此处](http://projects.scipy.org/scipy/browser/trunk/Lib/sandbox/pyloess?rev=2844)找到 Python 的另一个 Fortran 实现。经过一些修改后，可以使用 Python 可能从源代码安装 R，以防此模块确实允许缺失值。

正如我们在[论文](http://cs.wellesley.edu/~cs315/Papers/stl%20statistical%20model.pdf)中看到的那样，没有一些简单的缺失值过程（比如在一开始就近似它们）可以在调用之前应用于时间序列`stl`。[因此，考虑到原始实现](http://svn.r-project.org/R/trunk/src/library/stats/src/stl.f)相当冗长这一事实，我会考虑一些其他替代方案，而不是全新的实现。

**更新：**`NAs`当有可能`na.approx`来自时，在许多方面都是一个非常理想的选择`zoo`，所以让我们检查它的性能，即比较 的结果`stl`与完整数据集的结果，以及当有一定数量的 时的结果`NAs`，使用`na.approx`。我使用[MAPE](http://en.wikipedia.org/wiki/Mean_absolute_percentage_error)作为准确度的度量，但仅用于趋势，因为季节性分量和余数过零并且会扭曲结果。的位置`NAs`是随机选择的。

```
library(zoo)
library(plyr)
library(reshape)
library(ggplot2)
mape <- function(f, x) colMeans(abs(1 - f / x) * 100)

stlCheck <- function(data, p = 3, ...){
  set.seed(20130201)
  pos <- lapply(3^(0:p), function(x) sample(1:length(data), x))
  datasetsNA <- lapply(pos, function(x) {data[x] <- NA; data})
  original <- data.frame(stl(data, ...)$time.series, stringsAsFactors = FALSE)
  original$id <- "Original"
  datasetsNA <- lapply(datasetsNA, function(x) 
    data.frame(stl(x, na.action = na.approx, ...)$time.series, 
               id = paste(sum(is.na(x)), "NAs"), 
               stringsAsFactors = FALSE))
  stlAll <- rbind.fill(c(list(original), datasetsNA))
  stlAll$Date <- time(data)
  stlAll <- melt(stlAll, id.var = c("id", "Date"))
  results <- data.frame(trend = sapply(lapply(datasetsNA, '[', i = "trend"), mape, original[, "trend"]))
  results$id <- paste(3^(0:p), "NAs")
  results <- melt(results, id.var = "id")
  results$x <- min(stlAll$Date) + diff(range(stlAll$Date)) / 4
  results$y <- min(original[, "trend"]) + diff(range(original[, "trend"])) / (4 * p) * (0:p)
  results$value <- round(results$value, 2)
  ggplot(stlAll, aes(x = Date, y = value, colour = id, group = id)) + geom_line() + 
    facet_wrap(~ variable, scales = "free_y") + theme_bw() +
    theme(legend.title = element_blank(), strip.background = element_rect(fill = "white")) + 
    labs(x = NULL, y = NULL) + scale_colour_brewer(palette = "Set1") +
    lapply(unique(results$id), function(z)
      geom_text(data = results, colour = "black", size = 3,
                aes(x = x, y = y, label = paste0("MAPE (", id, "): ", value, "%"))))
} 
```

`nottem`, 240 次观察

```
stlCheck(nottem, s.window = 4, t.window = 50, t.jump = 1) 
```

![在此处输入图像描述](../Images/82c910f3f29dc9ba17b179a8fd8f2364.png)

`co2`, 468 次观察

```
stlCheck(log(co2), s.window = 21) 
```

![在此处输入图像描述](../Images/b6a12d845bc80250336448afecca5cce.png)

`mdeaths`, 72 个观测值

```
stlCheck(mdeaths, s.window = "per") 
```

![在此处输入图像描述](../Images/00cb8414464fb15f4e9bab6a4924106a.png)

在视觉上，我们确实看到案例 1 和案例 3 的趋势存在一些差异。但考虑到样本量，这些差异在案例 1 中非常小，在案例 3 中也令人满意 (72)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-12T20:56:20.497

意识到这是一个老问题，但我想我会更新，因为`stl`R 中有一个名为`stlplus`. [这是它在 github 上的主页](https://github.com/hafen/stlplus)。您可以使用 CRAN 从 CRAN 安装它，也可以`install.packages("stlplus")`直接从 github 使用`devtools::install_github("hafen/stlplus")`.

# javascript - 使用 javascript 获取子文件夹名称

> ID：12058391
> 
> 赞同：0
> 
> 时间：2012-08-21T15:35:23.540
> 
> 标签：javascript, jquery, tree, subdirectory

我已经环顾了很长时间，但似乎找不到从特定目录获取子文件夹列表的方法。

一个例子是，如果我在 www.mysite.com/projects 并且在项目内部有几个包含单个项目文件的文件夹。

我想这样做的原因是我要制作一个脚本，该脚本将使用子文件夹名称将新项目的名称添加到菜单中。

我错过了什么吗？这甚至可以使用 JQuery 或 JavaScript 吗？

我已经获取了路径名和位置，还查看了 ActiveXObjects，但无法在我的 PC 或服务器上运行任何东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:40:29.340

HTTP 中没有目录之类的东西。只有资源。

其中一些资源可能是一个 HTML 文档，其中列出了一些其他资源（位于运行 HTTP 服务器的计算机上文件系统的特定目录中）。大多数 HTTP 服务器会[自动为您生成此类文档](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)。

您需要让服务器为合适的请求生成合适的响应。然后使用（因为您提到 jQuery）该[`ajax()`](http://api.jquery.com/jQuery.ajax/)方法来发出该请求。

然后你需要解析响应。您可以使用默认目录索引页面然后解析返回的 HTML，也可以编写服务器端程序以更好的格式（例如 JSON）生成数据。

也就是说……</p>

> 我想这样做的原因是我要制作一个脚本，该脚本将使用子文件夹名称将新项目的名称添加到菜单中。

几乎可以肯定，在服务器上这样做会更好。您将获得更可靠、更快且搜索引擎友好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:40:48.470

ActiveX 是一种使 JScript（JavaScript 的 Microsoft 实现）能够更多地访问**客户端**计算机的技术，它仅适用于 Internet Explorer。

服务器上的文件夹与文件系统中的文件夹不同。任何文件夹/子文件夹都有可能包含一个 index.html，它输出一些文本（不一定是它包含的子文件夹列表）。

此外，即使没有 index.html，大多数网络服务器配置都有一个不显示子文件夹列表的活动选项。

您可以做的是在该文件夹中放置一个 index.php 文件，其中包含以下代码：

```
<?php
    $directories = scandir('.');
    header('Content-Type: application/json');
    echo json_encode($directories); 
```

您可以这样接收此内容：

```
$.getJSON('http://domain.com/path/to/folder/', function(directories) {
    do_something(directories);//
}); 
```

# javascript - 检测外部脚本是否已加载

> ID：12058392
> 
> 赞同：11
> 
> 时间：2012-08-21T15:35:25.460
> 
> 标签：javascript, jquery

使用 JavaScript，有没有办法检测外部脚本（来自第三方供应商）是否已完全加载？

有问题的脚本用于拉入和嵌入作业列表的标记，不幸的是，它没有使用任何变量或函数。它用于`document.write`输出嵌入到我的页面中的所有内容。

理想情况下，我想在等待外部脚本加载时显示某种加载消息，如果加载失败，则显示“抱歉，稍后再回来查看...”消息。

我在网站上使用 jQuery，但是在我调用 jQuery 之前调用了这个外部脚本。

以下是`document.write`来自外部脚本的内容：

```
document.write('<div class="jt_job_list">');
document.write("
    <div class=\"jt_job jt_row2\">
        <div class=\"jt_job_position\">
            <a href=\"http://example.com/job.html\">Position Title</a>
        </div>
        <div class=\"jt_job_location\">City, State</div>
        <div class=\"jt_job_company\">Job Company Name</div>
    </div>
"); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T15:38:51.153

将函数附加到加载事件：

```
<script type="text/javascript" src="whatever.js" onload ="SomeFunction()" /> 
```

就您的`loading...`问题而言，尝试显示一个用于加载的 div，然后`display:none`在您的`onload`函数中使用它。不过，请确保处理脚本也无法加载的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T15:40:30.357

脚本标签会阻止下载，因此只要依赖于脚本的内容低于脚本加载的位置，就可以了。即使脚本在您的页面正文中也是如此。

[这个网站](http://stevesouders.com/hpws/js-middle.php)有一个很好的例子来说明它是如何工作的。

如果您异步加载脚本，这显然不起作用。

> 在浏览器继续解析页面之前，会立即获取并执行没有 async 或 defer 属性的脚本。

来源：[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/Script#Attributes)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T15:41:45.367

您可以在页面上放置一个脚本块：

```
<script src="external_script.js"></script>
<script type="text/javascript">
    ExternalScriptHasLoaded();
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T18:14:28.340

感谢上述帮助，尤其是 ngmiceli 的 Steve Souders 链接！

我决定采用可能是“懒惰”的方法，并且放弃了“加载”消息：

```
$(document).ready(function(){
    if ($('.jt_job_list').length === 0){
        $('#job-board').html("<p>We're sorry, but the Job Board isn't currently available. Please try again in a few minutes.</p>");
    };
}); 
```

非常简单，但我正在查看`.jt_job_list`该类的元素是否在 dom 中。如果不是，我会显示一条错误消息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-28T03:44:38.527

这对我有用：但是，它确实依赖于大多数现代浏览器支持的较新的 querySelector 接口。但是，如果您使用的**是非常**旧的浏览器，则可以使用 getElement... 并运行 for 循环。

```
function loadJS(file, callback, error, type) {
    var _file = file ;
    var loaded = document.querySelector('script[src="'+file+'"]') ;

    if (loaded) {
      loaded.onload = callback ;
      loaded.onreadystatechange = callback;
      return
    }

    var script = document.createElement("script");

    script.type = (typeof type ==="string" ? type : "application/javascript") ;

    script.src = file;
    script.async = false ;
    script.defer = false ;
    script.onload = callback ;

    if (error) {
       script.onerror = error ;
       }
    else {
       script.onerror = function(e) {
              console.error("Script File '" + _file + "' not found :-(");
              };
       }

    script.onreadystatechange = callback;

    document.body.appendChild(script);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T15:38:01.140

您可以提供任何您正在寻找的 ID

并检查 ID 是否已加载使用`document.getElementById("ID");`

那是你在寻找的东西，我不确定我是否完全理解？

# c# - SendMessage WM_SETTEXT 引发 SecurityPermission 错误

> ID：12058394
> 
> 赞同：1
> 
> 时间：2012-08-21T15:35:34.367
> 
> 标签：c#, winforms, winapi

我在调用 SendMessage(WM_SETTEXT..) API 时遇到问题，我们的客户端机器抛出错误。它在其他客户的机器和我们这里的所有机器上都可以正常工作。抛出的错误是 System.Security.Permissions.SecurityPermission。我用谷歌搜索，但找不到任何关于原因的参考资料。即使 hwnd 没有指向真正的窗口，我的测试也没有错误。任何帮助，将不胜感激。

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, int wParam, string lParam);
...

private void RegisterWithCaller()
{
    if (this.hwndCaller != IntPtr.Zero)
    {
        if (FormMode.DELIVERY == this.formMode)
        {
            SendMessage(this.hwndCaller, WM_SETTEXT, 0, "hWndInvoiceDisplay=" + this.txtCommunicate.Handle.ToInt32().ToString());
        }
        else
        {
            SendMessage(this.hwndCaller, WM_SETTEXT, 0, "hWndBOLsDisplay=" + this.txtCommunicate.Handle.ToInt32().ToString());
        }
    }
} 
```

# sql - Grails 查询以过滤关联并仅返回匹配的实体

> ID：12058396
> 
> 赞同：2
> 
> 时间：2012-08-21T15:35:49.350
> 
> 标签：sql, grails, grails-orm

我有以下 1 - M（单向）关系：

```
Customer (1) -> (M) Address 
```

我正在尝试过滤包含特定文本的特定客户的地址，例如

```
def results = Customer.withCriteria {
    eq "id", 995L
    addresses {
        ilike 'description', '%text%'
    }
} 
```

问题是这会返回客户，当我反过来访问“地址”时，它会给我完整的地址列表，而不是过滤后的地址列表。

我无法使用`Address.withCriteria`，因为我无法从条件查询中访问关联表。

我希望避免恢复到原始 SQL 查询，因为这意味着无法使用大量现有的功能来以灵活和可重用的方式构建标准查询。

很想听听任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:39:56.237

我相信 2.1 中不同行为的原因记录[在这里](http://grails.org/doc/2.0.x/guide/single.html#persistenceFeatures)

具体这点：

> 对于跨关联的条件查询，LEFT JOIN 的先前默认值现在是 INNER JOIN。

IIRC，当您使用内部联接时，Hibernate 不会急切地加载关联。

看起来您可以在这里`createAlias`指定一个外部连接[示例](http://grails.1312388.n4.nabble.com/GORM-criteria-how-to-revert-to-old-quot-left-outer-join-quot-behaviour-for-a-query-td4630152.html)：

我对这个特定问题的经验来自于 NHibernate 的经验，所以我真的无法比这更清楚地说明它是否能正常工作。如果结果不正确，我会很乐意删除此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:19:08.437

尝试这个：

```
def results = Customer.createCriteria().listDistinct() {
    eq('id', 995L)
    addresses {
        ilike('description', '%Z%')
    }
} 
```

这将为您提供具有正确 id 和任何匹配地址的 Customer 对象，并且只有那些地址不匹配。

您还可以使用此查询（稍作修改）来获取具有匹配地址的所有客户：

```
def results = Customer.createCriteria().listDistinct() {
    addresses {
        ilike('description', '%Z%')
    }
}

results.each {c->
    println "Customer " + c.name
    c.addresses.each {address->
        println "Address " + address.description
    }
} 
```

**编辑** 这里是域类和我添加地址的方式：

```
class Customer {
  String name
  static hasMany = [addresses: PostalAddress]
  static constraints = {
  }
}
class PostalAddress {
  String description
  static belongsTo = [customer: Customer]
  static constraints = {
  }
}
//added via Bootstrap for testing
def init = { servletContext ->
    def custA = new Customer(name: 'A').save(failOnError: true)
    def custB = new Customer(name: 'B').save(failOnError: true)
    def custC = new Customer(name: 'C').save(failOnError: true)

    def add1 = new PostalAddress(description: 'Z1', customer: custA).save(failOnError: true)
    def add2 = new PostalAddress(description: 'Z2', customer: custA).save(failOnError: true)
    def add3 = new PostalAddress(description: 'Z3', customer: custA).save(failOnError: true)
    def add4 = new PostalAddress(description: 'W4', customer: custA).save(failOnError: true)
    def add5 = new PostalAddress(description: 'W5', customer: custA).save(failOnError: true)
    def add6 = new PostalAddress(description: 'W6', customer: custA).save(failOnError: true)

} 
```

当我运行它时，我得到以下输出：

```
Customer A
Address Z3
Address Z1
Address Z2 
```

# r - 如何将向量传递给积分函数

> ID：12058405
> 
> 赞同：3
> 
> 时间：2012-08-21T15:36:19.317
> 
> 标签：r

我想集成一个`fun_integrate`以向量`vec`作为输入参数的函数：

```
fun_integrate <- function(x, vec) { 
  y <- sum(x > vec)
  dnorm(x) + y
}

#Works like a charm
fun_integrate(0, rnorm(100))

integrate(fun_integrate, upper = 3, lower = -3, vec = rnorm(100))
300.9973 with absolute error < 9.3e-07
Warning message:
  In x > vec :
  longer object length is not a multiple of shorter object length 
```

据我所知，问题如下：`integrate`调用它基于and计算`fun_integrate`的向量。这个向量化调用似乎不适用于作为附加参数传递的另一个向量。我想要的是调用它在内部计算的每一个，并将那个单一的与向量进行比较，我很确定我上面的代码不会那样做。`x``upper``lower``integrate``fun_integrate``x``x``vec`

我知道我可以自己实现一个集成例程，即计算和之间的节点`lower`并`upper`分别评估每个节点上的函数。但这不是我的首选解决方案。

另请注意，我检查了`Vectorize`，但这似乎适用于另一个问题，即该函数不接受`x`. 我的问题是我想要一个额外的向量作为参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:45:04.733

```
integrate(Vectorize(fun_integrate,vectorize.args='x'), upper = 3, lower = -3, vec = rnorm(100),subdivisions=10000)

304.2768 with absolute error < 0.013

#testing with an easier function
test<-function(x,y) {
  sum(x-y)
}

test(1,c(0,0))
[1] 2

test(1:5,c(0,0))
[1] 15
Warning message:
In x - y : 
longer object length is not a multiple of shorter object length

Vectorize(test,vectorize.args='x')(1:5,c(0,0))
[1]  2  4  6  8 10

#with y=c(0,0) this is f(x)=2x and the integral easy to solve
integrate(Vectorize(test,vectorize.args='x'),1,2,y=c(0,0))
3 with absolute error < 3.3e-14 #which is correct 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T17:45:12.477

罗兰的回答看起来不错。只是想指出它是`sum`，而不是`integrate`抛出警告信息。

```
Rgames> xf <- 1:10
Rgames> vf <- 4:20
Rgames> sum(xf>vf)
[1] 0
Warning message:
In xf > vf :
 longer object length is not a multiple of shorter object length 
```

您得到的答案不是正确的值这一事实表明`integrate`没有将您期望的 x 向量发送到您的函数。

# jsf - 如何获取 p:inputText 值并将其设置为 f:param 值？

> ID：12058407
> 
> 赞同：1
> 
> 时间：2012-08-21T15:36:21.683
> 
> 标签：jsf, primefaces, spring-webflow

我有一个如下的xhtml页面

```
 <p:inputText id="inputFilterKey" name="inputFilterKey" value="#{key}"  />
    <p:commandButton id="filterByKey" action="searchByKey" value="Search" ajax="false">
             <f:param name="filterKey" value=? />
    </p:commandButton> 
```

参数“filterKey”应具有用户在 inputText 中提供的值。值 '#{key}' 是 spring webflow 中定义的流范围变量。也就是说，它不是取自后豆。我应该如何获得 inputText 的值？这是流定义，以备不时之需。

```
 <transition on="searchByKey" to="editTexts" >
        <set name="flowScope.key" value="requestParameters.filterKey"/>
        <evaluate expression="textManager.searchByKey(key)" result="viewScope.textsByKey" result-type="dataModel"/>
    </transition> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:51:28.613

那是不可能的。在`<f:param value>`呈现/显示表单时评估 ，而不是在提交/处理表单时评估。

我不熟悉 Spring Webflow，但这是 IMO 一个非常奇怪的设计。如果您以正确的方式做事，您可能想与 SWF 人员确认。也许您应该在构建/初始化期间将 SWF 变量作为托管 bean 属性注入或其他什么？

无论如何，有一些方法可以在不将输入组件的值绑定到托管 bean 属性的情况下获取提交的值。其中之一是直接从请求参数映射中获取它`@ManagedProperty`：

```
@ManagedProperty("#{param['formId:inputFilterKey']}")
private String key; // +setter 
```

或者当托管 bean 的范围比请求范围更广时：

```
String key = externalContext.getRequestParameterMap().get("formId:inputFilterKey"); 
```

这`formId:inputFilterKey`只是组件`name`的生成的 HTML`<input>`元素表示形式`<p:inputText>`。

# python - 带有两个滑块的 tkinter 刻度？

> ID：12058408
> 
> 赞同：9
> 
> 时间：2012-08-21T15:36:28.687
> 
> 标签：python, tkinter, ttk, tkinter-scale

有谁知道是否可以从`tkinter`模块中获得一个带有两个“滑块”的单个比例小部件？或者无论如何要伪造它？

如（用 GIMP 编辑）：

![在此处输入图像描述](../Images/1066a63b15f490f09983e528e52e5de3.png)

我正在考虑将一个比例放在另一个比例之上，但背景透明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:52:54.733

不，您不能使用比例小部件执行此操作。你不能给它一个透明的背景并将它们堆叠起来。

如果我必须实现这个功能，我会使用画布小部件并绘制我自己的滑块。这不是很难做到，但显然它比现成的小部件需要更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-13T19:32:39.940

[这](https://github.com/MenxLi/tkSliderWidget)是一个使用画布的自定义小部件，由 MenxLi 制作。

# python - Python SMTP Pcap 生成器

> ID：12058409
> 
> 赞同：1
> 
> 时间：2012-08-21T15:36:30.893
> 
> 标签：python, pcap

我需要使用特定的 SMTP/MIME 消息生成网络流量。Python 是否有任何库支持生成包含我正在寻找的特定信息的 pcap 文件的能力？

# android - 导入的库生成错误

> ID：12058411
> 
> 赞同：0
> 
> 时间：2012-08-21T15:36:39.407
> 
> 标签：android, emulation, dalvik

我导入了 Jama 库，但仍然出现以下错误：

```
08-21 15:29:10.153: E/AndroidRuntime(655):  at   
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-21 15:29:10.153: E/AndroidRuntime(655):  at   
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-21 15:29:10.153: E/AndroidRuntime(655):  at dalvik.system.NativeStart.main(Native   
Method)
08-21 15:29:54.233: E/dalvikvm(664): Could not find class 'Jama.Matrix', referenced 
from method amr.NAVKA_Projekt.MPTest.RotationMatrix.calcDirectionVector 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:08:17.437

该库是否与您的其余代码一起导出？假设您使用的是 Eclipse，如果您右键单击项目 -> 属性 -> Java 构建路径 -> 转到“订购和导出”选项卡并确保选中 Jama 库。

如果不是，则该库在构建时不会包含在项目的其余部分中，这通常会导致“找不到类”错误。

# cursor - 遍历 hsqldb 游标

> ID：12058412
> 
> 赞同：0
> 
> 时间：2012-08-21T15:36:40.843
> 
> 标签：cursor, iteration, hsqldb

HSQLDB 游标迭代的语法是什么？
我知道如何声明和打开游标，但在其他方言中，打开游标后，您通常会执行以下操作

```
WHILE "more rows" DO
    FETCH  NEXT FROM c INTO @var1, @var2, ...
    "do something with vars here"
END WHILE 
```

我找不到将光标移动到下一行的任何示例。
我是从错误的角度看这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:09:42.137

在使用 FOR 循环的 SQL 例程（FUNCTION 和 PROCEDURE）中支持使用游标的操作。

```
for_label: 
FOR SELECT COL1, COL2 FROM ATABLE WHERE COL3='something' DO
    SET VAR1 = COL1;
    SET VAR2 = COL2;
    -- do something
END FOR for_label; 
```

请参阅[http://hsqldb.org/doc/2.0/guide/sqlroutines-chapt.html#src_psm_for_statement](http://hsqldb.org/doc/2.0/guide/sqlroutines-chapt.html#src_psm_for_statement)

# node.js - 不同的 Express JS 安装

> ID：12058413
> 
> 赞同：-1
> 
> 时间：2012-08-21T15:36:43.367
> 
> 标签：node.js, express

我刚刚开始使用 Express Js。有人可以解释两者之间的区别吗

```
npm install 
```

和

```
npm install -g express 
```

（安装代码取自[在此处输入链接描述](http://expressjs.com/guide.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:40:29.687

该`-g`标志意味着在您的全局 node_modules 目录中安装 Express。这使您可以在`express`任何地方调用该命令。`npm install express`将用于`express`在您的应用程序中安装该库，也就是说，您将导航到您的应用程序目录并键入`npm install express`.

我建议您执行以下操作：

`npm install -g express`

然后，当您导航到您的应用程序目录时，您将键入`npm link express`. 此符号链接到全局快速安装。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:18:28.357

除了@JP Richardson 和@3on 关于**npm install express**和**npm -g install express**的说明之外，当你运行**npm install**（没有 express 或 -g express）时，npm 将读取当前目录中的 package.json 文件并安装（本地）package.json 中列出的依赖项

这就是[http://expressjs.com/guide.html](http://expressjs.com/guide.html)中的示例有效的原因。它要求您创建的 package.json 将 Express 3.x 指示为依赖项，npm 将知道如何下载和安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:42:37.007

```
npm install express 
```

将在您当前的文件夹中创建一个名为 node_modules 的文件夹并在其中安装 express。

```
npm install -g express 
```

将在您的系统上安装 express，例如 /usr/local/lib/node_modules

例如，您想要全局安装 Express 或 supervisor 的原因是使用 bin 工具。

express的bin工具生成模板项目，超级好用。

# jquery - django处理动态html元素

> ID：12058415
> 
> 赞同：0
> 
> 时间：2012-08-21T15:36:50.020
> 
> 标签：jquery, django, dynamic-data

我使用 Django 动态创建 html 项目。

```
{% for scraper in scrapers %}
<div class='scraper_item'>
        <ul class="scraper_actions1">
        <li><a href="/schedule/{{ scraper.id }}">Schedule</a></li>
        <li><a class="delete" id="{{ scraper.id }}" href="/delete/{{scraper.id}}">Delete</a></li>
    </ul>
</div>
{% endfor %} 
```

我将“scrapers”作为模型对象传递到 html 页面并列出它们。我想使用相同的 jQuery 函数处理由 id 选择的每个对象。我如何选择特定元素以将其传递给 Django 视图`def delete(request, scraper_id)`而无需多重编码？

```
$("a.delete").click(function(event){
        alert("going to delete...");
                    ...???
            return false;    
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:43:58.123

尝试下一个代码来查找元素的“id”属性：

```
$( event.target ).attr( 'id' ) 
```

[更多信息](http://api.jquery.com/event.target/)。

# asp.net - 将更改的事件附加到动态创建的单选按钮

> ID：12058416
> 
> 赞同：0
> 
> 时间：2012-08-21T15:36:52.280
> 
> 标签：asp.net, events, radio-button

我正在后面的代码中动态创建大量单选按钮（加载时 vb.net），并且想知道如何在它们上创建事件。我有一个带有两列的gridview，每一行在两个列中都有一个单选按钮，它们都在一个组中（fyi 组意味着选中一个，另一个未选中）。我想在选中的任何一个上将背景颜色更改为黄色。我将如何做到这一点最好？Javascript（捕获所有单选按钮更改事件）、JQuery（捕获所有单选按钮更改事件）还是 Vb.net（创建时附加方法）？这是我创建它们的方式；

```
Dim r As RadioButton
    Dim l As Label
    Dim radioBtnNumber As Integer = 0
    For row As Integer = 0 To GridView1.Rows.Count - 1
        If GridView1.Rows(row).RowType = DataControlRowType.DataRow Then
            Dim x As Integer = 0
            For Each tc As TableCell In GridView1.Rows(row).Cells
                l = New Label()
                l.Text = tc.Text
                If (x = 1) Or (x = 2) Then
                    r = New RadioButton()
                    r.GroupName = String.Format("RdBtnGroup{0}", row)
                    r.ID = radioBtnNumber.ToString
                    //Could add in event here. Tried this but didn't work
                    //r.Attributes.Add("OnCheckedChanged", "radiobuttonChecked()")
                    tc.Controls.Add(r)
                    radioBtnNumber = radioBtnNumber + 1
                End If
                tc.Controls.Add(l)
                x = x + 1
            Next
        End If
    Next 
```

该代码实际上更令人困惑，因为gridview实际上是翻转的（垂直而不是水平）。因此，我有名为 0、1、2、3、4 等的单选按钮，其中 0 和 1 在一个组中，2 和 3 在一个组中等等，我只想知道哪个已更改。请记住，尽管我需要 RB 的名称或它在我的 gridView 中的位置，因为我还必须更改与之配对的 RB 的背景颜色！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:49:58.140

添加行（代码是C#，翻译成VB）：

```
r.CheckedChanged += new System.EventHandler(this.radiobuttonChecked); 
```

当您创建`RadioButton`. `radiobuttonChecked`应该是您网页的方法：

```
protected void radiobuttonChecked(Object sender, EventArgs e)
{
...
} 
```

您将能够将发件人投射到`RadioButton`并分析其属性的位置。这将导致回发到服务器，您可以在其中修改单选按钮。

如果您想在客户端上执行此操作，则可以首先将 CssClass（例如“rbClass”）分配给所有这些字符串并使用

```
r.Attributes.Add("pairName", "<name for the pair of radiobuttons>") 
```

然后将javascript添加到您的页面：

```
$(document).ready(function(){
  $(".rbClass").change(function(){
    // here you look at $(this).attr and 
    // adjust its and its pair's css accordingly
  })
}); 
```

# java - 如何处理 RESTful 应用程序中的竞争条件？

> ID：12058420
> 
> 赞同：8
> 
> 时间：2012-08-21T15:37:03.913
> 
> 标签：java, web-services, design-patterns, rest

这是我的 RESTful Web 应用程序中发生的事情：

1.  HTTP 请求进来
2.  应用程序开始构建响应，其中包含一些初始数据部分
3.  另一个请求更改了步骤 2 中使用的数据
4.  第一个请求就知道数据过期了

它应该怎么做？请求失败并向客户端返回错误？还是应该从头开始（花费比客户预期更多的时间）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:41:24.383

恕我直言，您应该非常接近对待数据库事务的方式来处理 REST 请求：

*   要么确保，在做一些实际工作之前锁定需要锁定的内容
*   或准备在并发问题上失败/重试

很多时候，这实际上可以传递给数据库事务 - 取决于您的请求所做的非数据库工作的数量和内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T16:26:23.640

我认为一个很好的起点是 CouchDB 使用的并发模型。在本质上：

*   每个请求都是单独处理的，即不受其他并发请求的影响。这意味着当您开始处理请求时，您需要能够获得数据库的一致快照，大多数 DBMS 系统都支持某些事务概念。
*   GET 请求总是成功，并返回提交时系统的状态，忽略任何后续更新。
*   GET 请求返回相关资源的修订 ID，该修订 ID 必须作为字段包含在任何后续 PUT 请求中。
*   在 PUT 请求中，将根据数据库中的最新修订 ID 检查提交的修订 ID。如果它们不匹配，则返回错误代码，在这种情况下，客户端必须重新获取最新版本并重新应用他们所做的任何更改。

更多阅读：

[http://wiki.apache.org/couchdb/Technical%20Overview#ACID_Properties](http://wiki.apache.org/couchdb/Technical%20Overview#ACID_Properties) [http://wiki.apache.org/couchdb/HTTP_Document_API#PUT](http://wiki.apache.org/couchdb/HTTP_Document_API#PUT)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T20:36:01.430

假设它与数据库事务无关，并说每个步骤都涉及分布式长时间运行的进程。

在这种情况下，应向客户端发送适当的响应（例如 409/410 http 代码），其中包含表明此请求不再有效且客户端应重试的详细信息。重试可能会陷入循环，或者最坏的情况最终会导致客户不知道。

例如，当您在线预订酒店/机票时，您会收到回复说价格已更改，您需要再次提交以使用新价格购买。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T15:44:15.870

从我的角度来看，您的问题与以下相同：
“如果我尝试从数据库中读取，而另一个事务尝试写入，它将阻塞。但是当我完成读取时，我会错过新数据将由我读取后传入的新事务填充。”
这是一种不好的思考方式。您应该确保客户端在响应中获得一致的数据。如果在他们得到响应时数据已经更新，则不是原始方法的问题。
您的问题是数据当前已更新，我碰巧知道。如果在响应传出网络后立即更新数据怎么办？
恕我直言，选择适合您要求的最简单的解决方案。
客户端应该更频繁地“轮询”以确保他们始终拥有最新的数据副本

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T15:43:30.843

严格来说，比赛条件是一个错误。竞争条件的解决方案是没有共享数据。如果对于给定的用例不能避免这种情况，那么先到先得的原则通常会有所帮助：

第一个请求锁定共享数据，第二个请求等待第一个请求完成。

# asp.net-mvc - 如何从 HDD 获取文件到位图对象 [ASP MVC 3]？

> ID：12058428
> 
> 赞同：2
> 
> 时间：2012-08-21T15:37:33.887
> 
> 标签：asp.net-mvc

我是 ASP MVC 的新手，我一直在尝试将位图文件从硬盘上传到 C# Bitmap 对象，稍后我将其分配给我的模型。

视图（cshtml 文件）如下所示：

```
 <form action = "DisplayAddedPicture" method=post>
    <input type=file name="Picture" id = "Picture"/>
    <input type=submit value="Send!" />
    </form> 
```

以及来自控制器的 DisplayAddedPicture 方法：

```
 [HttpPost]
        public ActionResult DisplayAddedPicture()
        {
          HttpPostedFileBase File = Request.Files["Picture"];

          if (File == null) throw new Exception("NullArgument :( ");

          // file stream to byte[]
          MemoryStream target = new MemoryStream();
          File.InputStream.CopyTo(target);
          byte[] TempByteArray = target.ToArray();

          // byte[] to Bitmap
          ImageConverter imageConverter = new ImageConverter();
          Image TempImage = (Image)imageConverter.ConvertFrom(TempByteArray);
          Bitmap FinalBitmap = new Bitmap(TempImage);

          // (...)
        } 
```

事实证明，每次我得到的都是一个异常，因为 HttpPostedFileBase 对象始终为空。我的逻辑中是否有任何流程（除了之后发生的所有转换，我知道它们很混乱）还是有任何其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:46:35.033

试试这个

在你看来，

```
@using (Html.BeginForm("DisplayAddedPicture", "YourControllerName", 
                      FormMethod.Post, new { enctype = "multipart/form-data" }))
{
     <input type=file name="Picture" id = "Picture"/>
     <input type=submit value="Send!" />
} 
```

和 Action 方法

```
[HttpPost] 
public ActionResult DisplayAddedPicture(HttpPostedFileBase Picture)
{
  if (Picture!= null && Picture.ContentLength > 0) 
  {
      //Do some thing with the Picture object
      //try to save the file here now.
      //After saving follow the PRG pattter (do a redirect)

      //return RedirectToAction("Uploaded");
  }  
  return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:45:17.257

尝试将以下内容添加到您的表单标签中：`enctype="multipart/form-data"`

```
<form method="post" action="DisplayAddedPicture" enctype="multipart/form-data">

    <input type=file name="Picture" id = "Picture"/>
    <input type=submit value="Send!" />

</form> 
```

# android - 具有嵌套布局的 ListView

> ID：12058434
> 
> 赞同：0
> 
> 时间：2012-08-21T15:38:03.233
> 
> 标签：android, listview, sqlite

我有一个问题，我已经尝试了很多事情，这是最终可能会有所帮助的解决方案。我有一个列表视图，里面装满了数据库数据。用户插入一个任务，任务就会出现在屏幕上。问题是用户还可以插入任务的子任务，这些“新任务”必须显示在深度为 4 的主任务下的列表视图的不同行中。例如：

```
 -Main_Task1
    -SubTask1
       -subtask1
       -subtask2
    -SubTask2
 -Main_Task2
    -SubTask1
       -subtask1
          -subtask1
 -Main_Task3 
```

这是来自数据库的代码。

```
 private static final String DATABASE_CREATE =
    "create table tasks (_id integer primary key autoincrement, "

    + "title text not null,"
    +"location text not null, " 
    + "body text not null , "
    +" goaldate text not null , "
    +" absolutedate text not null , "
    +" currentdate text not null , "
    +" prio text not null, "
    +" done text not null, "
    +" category text not null, "
    +" timespent text not null, "
    +" pososto text not null, "
    +" father text not null, " 
    +" check1 text not null );";

  // fetch all tasks(tasks and subtasks)
public Cursor fetchTasks() { 

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER, KEY_TODAY},null, null, null, null, null);

}

//fetch subtasks of a task, given the father's key
public Cursor fetchSubTasks(String id) { 

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER, KEY_TODAY}, KEY_FATHER + " LIKE" + "'"+ id+"'", null, null, null, null);

}

//fetch a subtask
  public Cursor fetchSubTask(String fid,String uid) { // tropopoihsh ths methodou wste   sthn arxiki othoni na fainontai mono oi tasks

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER, KEY_TODAY}, KEY_FATHER + " LIKE" + " '"+ fid +" '"+ " AND " + KEY_ROWID + " LIKE " + " '"+ uid +"' ", null, null, null, null);

} 
```

这是 TasksCursorAdapter 类的代码。

```
 LinearLayout list = (LinearLayout)v.findViewById(R.id.linear); // fill a textview of   the list with one more textview
          list.removeAllViews();
          LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

          mCursor = mDbHelper.fetchTasks();//fetching all the tasks
          String id;

          int columnIndex = 0;

          mCursor.moveToFirst();
          while(mCursor.moveToNext()) {

              id = mCursor.getString(0);

              subCursor = mDbHelper.fetchSubTasks(id);// fetching the subtasks with father_id=id

              // Loop through the subCursor
             while(subCursor.moveToNext()) {

                 timeCursor = mDbHelper.fetchSubTask(id, subCursor.getString(columnIndex));// fetching each time the task with the unique id( from the array)
                 //while(timeCursor.moveToNext()){

                  View line = inflater.inflate(R.layout.tasks_row,null);

                  list.addView(line);

              } }

        //  } 
```

使用此代码，我得到一个列表视图，其中在每个项目列表中出现一个新行，每次添加子任务时都包括未正确获取任务。任何想法都可以提供帮助。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:41:56.470

如果您尝试在 ListView 的每一行下添加子任务，则应该使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。

# java - Java 中的 CardLayout 通过“卡片”之一中的操作进行更改

> ID：12058439
> 
> 赞同：3
> 
> 时间：2012-08-21T15:38:32.890
> 
> 标签：java, swing, jpanel, cardlayout, 2d-games

我正在使用`JFrame`. 我制作了一个简单的“开始”屏幕，它基本上由 a`String`和 a组成`JButton`。我正在使用该`actionPerformed(ActionEvent e)`方法单击按钮。我不知道如何使用按钮单击来更改卡片。这似乎是一个很容易解决的问题，但随之而来的是扭曲：我的主 JFrame、我的 StartScreen 和我的 JPanel 都在不同的文件中。我的主文件 Virus.java 是我创建`JFrame`. 我的文件 VirusGamePanel.java 是游戏发生的地方。我的文件 StartScreen.java 是带有按钮的屏幕。当玩家单击按钮时，我想将“卡片”更改为游戏屏幕。我怎样才能做到这一点？我的 StartScreen.java 文件：

```
package virus;

import javax.swing.JPanel;
import java.awt.event.ActionListener;
import java.awt.Graphics;
import java.awt.Font;
import java.awt.Color;
import javax.swing.JButton;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.CardLayout;

public class StartScreen extends JPanel implements ActionListener{
    private static final long serialVersionUID = 1L;
    JButton start = new JButton("Start");
    public StartScreen(){
        start.addActionListener(this);
        start.setBounds(new Rectangle(400,300,100,30));
        this.add(start);
    }
    public void paint(Graphics g){
        super.paint(g);
        g.setFont(new Font("Impact",Font.BOLD,72));
        g.setColor(Color.MAGENTA);
        g.drawString("Virus",275,300);
    }
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==start)
        {
            //what to do here?
        }
    }
} 
```

我的 Virus.java 文件：

```
package virus;

import javax.swing.*;
import java.awt.CardLayout;
import virus.StartScreen;

public class Virus extends JFrame{
    private static final long serialVersionUID =1L;
    JFrame jf = new JFrame("Virus");
    static JPanel thegame = new JPanel(new CardLayout());
    JPanel game = new VirusGamePanel();
    JPanel start = new StartScreen();

    public Virus(){
        jf.setResizable(false);
        jf.setSize(600,600);
        jf.setLocationRelativeTo(null);
        jf.setDefaultCloseOperation(EXIT_ON_CLOSE);
        jf.setVisible(true);
        jf.add(thegame);
        thegame.add(start);
        thegame.add(game);

    }

    public static void main(String[] args) {
        new Virus();

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:14:51.073

你只需要在你的`actionPerformed(...)`方法中纠正这个：

```
public void actionPerformed(ActionEvent e)
{
    if(e.getSource()==start)
    {
        //what to do here?
        CardLayout cardLayout = (CardLayout) Virus.thegame.getLayout();
        cardLayout.next(Virus.thegame);
    }
} 
```

正如@kleopatra（皇后）本人非常指出的那样，不要覆盖，`paint()`而是在`paintComponent(Graphics g)`any 方法中进行绘画`JPanel/JComponent`。此外，首先将组件添加到您的`JFrame`，一旦实现它的大小，然后只将其设置为可见，而不是在那之前。与其为`JFrame`简单地覆盖`JPanel`的方法设置大小`getPreferredSize()`，不如让它返回一些有效的`Dimension`对象。

下次编写代码时，请务必观看此序列：

```
public Virus(){
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jf.setResizable(false);                               
    thegame.add(start);
    thegame.add(game);
    jf.add(thegame);        
    jf.pack();
    jf.setLocationRelativeTo(null);
    jf.setVisible(true);
} 
```

这是您的完整代码：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.event.ActionListener;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Font;
import java.awt.Color;
import javax.swing.JButton;
import javax.swing.JLabel;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.CardLayout;

public class Virus extends JFrame{
    private static final long serialVersionUID =1L;
    JFrame jf = new JFrame("Virus");
    static JPanel thegame = new JPanel(new CardLayout());
    JPanel game = new VirusGamePanel();
    JPanel start = new StartScreen();

    public Virus(){
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.setResizable(false);                               
        thegame.add(start);
        thegame.add(game);
        jf.add(thegame);        
        jf.pack();
        jf.setLocationRelativeTo(null);
        jf.setVisible(true);
    }

    public static void main(String[] args) {
        new Virus();

    }

}

class StartScreen extends JPanel implements ActionListener{
    private static final long serialVersionUID = 1L;
    JButton start = new JButton("Start");
    public StartScreen(){
        start.addActionListener(this);
        start.setBounds(new Rectangle(400,300,100,30));
        this.add(start);
    }

    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);
        g.setFont(new Font("Impact",Font.BOLD,72));
        g.setColor(Color.MAGENTA);
        g.drawString("Virus",275,300);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(600, 600));
    }

    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==start)
        {
            //what to do here?
            CardLayout cardLayout = (CardLayout) Virus.thegame.getLayout();
            cardLayout.next(Virus.thegame);
        }
    }
}

class VirusGamePanel extends JPanel
{
    public VirusGamePanel()
    {
        JLabel label = new JLabel("I am ON", JLabel.CENTER);
        add(label);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(600, 600));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:48:52.553

您的`StartScreen`类必须有权访问该类`CardLayout`的`JFrame`实例和`VirusGamePanel`该类的实例。`setLayout`您可以在构造函数或类的方法和`setVirusGamePanel`方法中传递这些实例`StartScreen`。

就像是：

```
layout.next(virusGamePanel); 
```

应该管用。

# tfs - 有没有办法将新的 TFS 变更集与旧的变更集相关联？

> ID：12058444
> 
> 赞同：0
> 
> 时间：2012-08-21T15:38:53.823
> 
> 标签：tfs

所以几个月前我在我们的主分支上修复了一个错误，比如说一些旧的变更集 555。最近，我手动将这些更改复制到一个子分支，以获得最近批准的修补程序变更集 999。我想在 999 上做一个跟踪变更集并看到它已合并到主分支为 555。但是，我已经根据 TFS 规则向后执行此操作，您不能合并到子分支。

有没有办法告诉 TFS“接受我的旧变更集 555 作为 999 到主分支的合并”？

这类似于 ClearCase 版本树工作流程，使用“不执行合并，仅绘制箭头”。因此 555 或 999 的 Track Changeset 将显示它们是相关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:39:28.960

我不确定你的意思

> 但是，我已经根据 TFS 规则反向执行此操作，您不能合并到子分支。

不应该有任何东西阻止您将此更改合并到子分支，您可能需要解决一些合并冲突。但是，如果这真的不可能，并且您想将“999”合并到主分支而不实际合并代码（即调整合并历史记录），那么您可以使用`tf merge`命令行。

打开 Visual Studio 命令提示符并使用命令

`tf merge $/TeamProject/childBranch $/TeamProject/MainBranch /version:C999~C999 /recursive /discard`

这将告诉 TFS 更新其历史记录，以说明合并发生了，即使它没有发生。您可能希望在`/preview`“真正”进行合并之前使用该开关，以确保您丢弃了您期望的文件。

# c# - 调用 Sybase SP，错误“SP 未找到”

> ID：12058445
> 
> 赞同：0
> 
> 时间：2012-08-21T15:38:55.290
> 
> 标签：c#, stored-procedures, odbc, sybase-asa

我正在连接到 Sybase 9 数据库以检索数据。我可以使用 ODBC 连接毫无问题地查询数据库，但我在调用存储过程时遇到问题。该程序可能是在 6-7 年前编写的。这就是我必须执行的存储过程。

```
OdbcCommand itemWeightAve = conn.CreateCommand();
itemWeightAve.CommandText = "ComputeLastCost";
itemWeightAve.CommandType = CommandType.StoredProcedure;
itemWeightAve.Parameters.AddWithValue("@OwnerId", "BananaHammock");//company number
itemWeightAve.Parameters.AddWithValue("@InventoryId", InventoryNumberHere);//inventory id from query results
itemWeightAve.Parameters.AddWithValue("@EndDate", EndDateHere);//end date from query results
OdbcDataReader itemAveReader = itemWeightAve.ExecuteReader(); 
```

我对 Sybase 或 ODBC 不是很熟悉，而且这些人使用的版本非常旧，不再受到官方支持。升级 Sybase 数据库是不可能的。尝试执行此命令时出现的错误是...

> 错误 [42S02] [Sybase][ODBC 驱动程序][Adaptive Server Anywhere]
> 
> `ComputeLastCost`未找到程序“ ”

我知道该过程存在，输入正确，并且参数名称存在并且输入正确。有人对我在这里做错的事情有任何提示/提示/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:12:28.567

把评论变成了答案...

您使用的登录名的默认数据库是什么？

存储过程是否在同一个数据库中？

如果没有，您需要在您的过程名称前加上数据库名称“sharedDB.ComputeLastCost”。

您可以通过 isql 使用相同的用户/密码登录并尝试手动执行它来检查这一点。如果在执行之前必须使用数据库（即使用数据库sharedDB），则需要将数据库名称放在前面。

您还可以更改用户的默认数据库。无论哪种方式都应该有效。

# java - 通过套接字问题发送图像流 - Android

> ID：12058453
> 
> 赞同：4
> 
> 时间：2012-08-21T15:39:35.880
> 
> 标签：java, android, image, sockets, stream

我已经实现了一个应用程序，它使用 SP 相机拍照并通过套接字将其发送到服务器。

我正在使用以下代码读取本地存储的图像文件并通过套接字将其以连续的块形式发送：

```
FileInputStream fileInputStream = new FileInputStream( "my_image_file_path" );
ByteArrayOutputStream buffer = new ByteArrayOutputStream();

int nRead;
byte[] data = new byte[16384];

try {
    while( (nRead = fileInputStream.read(data, 0, data.length)) != -1 ){
        buffer.write(data, 0, nRead);
        networkOutputStream.write( buffer.toByteArray() );
        buffer.flush();
    }
} catch( IOException e ){
    e.printStackTrace();
} 
```

我面临的问题是**更改字节数组的大小`data[]`会影响实际发送到服务器的图像量**。

下面发布的图片应该可以帮助您理解：

*   `byte[] data = new byte[16384];`

![在此处输入图像描述](../Images/161cc0bd79803af918e145a9acc0ac86.png)

*   `byte[] data = new byte[32768];`

![在此处输入图像描述](../Images/c174c0e1e91948d499151e267674500a.png)

*   `byte[] data = new byte[65536];`

![在此处输入图像描述](../Images/4a18d2283835838e8840a715fd599b65.png)

等等。

正如您可以想象的那样，我可以找到一个允许我发送完整图像的尺寸，但是这种临时解决方案是不可接受的，因为可能需要发送任何尺寸的图像。

在我看来，我以缓冲方式读取图像文件的方式似乎存在问题，您能帮帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T16:16:38.560

ByteArrayOutputStream 的使用是多余的，每次它增长时你都在发送它的全部内容。改变你的循环如下：

```
FileInputStream fileInputStream = new FileInputStream( "my_image_file_path" );

int nRead;
byte[] data = new byte[16384];

try {
    while( (nRead = fileInputStream.read(data)) != -1 ){
        networkOutputStream.write( data, 0, nRead );
    }

} catch( IOException e ){
    e.printStackTrace();
}
fileInputStream.close(); 
```

# php - 如何通过php动态抓取mysql字段

> ID：12058454
> 
> 赞同：0
> 
> 时间：2012-08-21T15:39:37.880
> 
> 标签：php, mysql

在 php 中，我从 mysql 查询结果集中访问结果，如下所示：

```
$results->fldname; 
```

我的问题是如何动态地将字段名称传递给 $results？例如：

```
$results->fld_$name; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:42:40.080

试试这个：

```
$results->{'fld_'.$name};
//or (not recommended)
$name = 'fld_'.$name;
$results->$name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:42:37.503

如果你问这在 PHP 中是否可行，那么是的：

```
$field = "fld_name";
$result->$field; 
```

这将与以下内容相同：

```
$result->fld_name; 
```

# jquery - 在 wp 中使用 jquery 动态调整图像大小

> ID：12058457
> 
> 赞同：1
> 
> 时间：2012-08-21T15:39:47.100
> 
> 标签：jquery, dynamic, resize, image-resizing, window-resize

我是新来的，一直在使用这个论坛并学到了很多东西。我有一个问题，我希望你们能帮助我。我正在开发一个基于 WP 和 WPEC 的网站。

我要做的是使产品模式视图中的图像动态调整大小（当用户垂直和水平更改/调整浏览器大小时，图像将调整大小）。

我已经设法使该功能在窗口调整大小上起作用。但是，问题是，加载时它仍然显示实际尺寸（800x1200），不适合浏览器尺寸。然后当我拖动浏览器时它会调整大小（因为它应该在 window.resize 上）

我曾尝试添加 DOM 来调整大小，但它只是杀死了我需要努力打开模态视图的其他功能（悬停在产品页面上）。

无论如何，这是调整大小的代码：

```
function resize() {

var w, h, conwidth, conheight, imgheight, imgwidth, top, left;
w = $(window).width();
h = $(window).height();
conwidth = w - 0;
if(conwidth < 493){ conwidth = 493; }
conheight = h - 0;
conratio = conwidth/conheight;
imgwidth = 800;
imgheight = 1204;
imgratio = 800/1204;
if(conratio < imgratio){
    width = conwidth;
    height = conwidth / imgratio;
} else {
    height = conheight;
    width = conheight * imgratio;
}
if(width > imgwidth || height > imgheight){
    width = imgwidth;
    height = imgheight;
}

top = (h/2) - (height/2);
left = (w/2) - (width/2);
if(left < 130){left = 130; }

$(".slideshow-content").css("position","fixed").css("margin",0);
$(".slideshow-content").css("top",0).css("left",0).css("height",height+"px").css("width",width+"px");
$(".psp-active").css("position","fixed").css("margin",0);
$(".psp-active").css("top",0).css("left",left+"px").css("height",height+"px").css("width",width+"px");
$(".slideshow-content img").css("left",left+"px").css("width",width+"px").css("height",height+"px"); 
```

}

看到[这个尝试](http://www.mickkmg.com/wordpress/store)

我希望它不会太难，也许它只是缺少一条线，但我一直在拉我的头发，因为这个......

非常感谢你们！

# android - 在 Eclipse 中创建新的 android 应用程序项目

> ID：12058459
> 
> 赞同：0
> 
> 时间：2012-08-21T15:39:53.787
> 
> 标签：android, eclipse, project

我尝试根据[http://developer.android.com/training/basics/firstapp/creating-project.html](http://developer.android.com/training/basics/firstapp/creating-project.html)在 Eclipse（Java 4.2）中使用最新的 android sdk 创建一个新的 android 应用程序项目 我输入应用程序名称和项目姓名。其他值是默认值。

在最后一步点击完成后，创建新项目的窗口仍然打开。我必须单击“X”才能关闭窗口。在project explore中，新建了一个project，但是files前面的图标都是灰色的，没有src文件。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T05:03:23.753

确保你有这些东西：

1.  Java SDK 最新（或最流行，目前是 Java 7，即使 8 可用）
2.  ADT
3.  Eclipse 已更新（通过菜单...帮助 > 检查更新）
4.  检查 JDK 路径
    *   通过菜单... Window > Preferences > Java > Installed JREs > [Point to path]
        *   路径应该与此类似
            *   x64: C:\Program Files\Java\jre7
            *   x86: C:\Program 文件 x86\Java\jre7
            *   x64[JDK]：C:\Program Files\Java\jdk1.7.0_45\jre
            *   x86[JDK]：C:\Program Files x86\Java\jdk1.7.0_45\jre
5.  在 Eclipse Kepler 中创建 Android 项目时，至少使用 14 个 API，因为似乎存在导致 Eclipse Kepler 崩溃的错误（其他相关问题：[AppCompat](https://stackoverflow.com/questions/22374891/unable-to-write-jarlist-cache-file-while-creating-android-project "AppCompat 和 Android 参考问题")！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T02:52:41.550

似乎根本没有创建“src”文件夹中的 MainActivity.java。
您需要更新 ADT。

转到以下内容：
*“帮助”->“安装新软件”*并输入 [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

选择 ADT 选项并安装它。它将更新 ADT。

即使我有同样的问题，我的问题也得到了解决！！

# html - 无法在表格单元格中垂直居中浮动元素

> ID：12058460
> 
> 赞同：0
> 
> 时间：2012-08-21T15:39:54.290
> 
> 标签：html, css, css-tables

我有在表格内声明的表单元素，它们本质上垂直居中于表格单元格。

我有一个表格单元格，它有一个无序列表和一个向左浮动的选择框，以便将它们与自己内联。似乎将其中两个元素放在同一个单元格中会破坏我的第二个元素（选择框）的垂直居中并强制到单元格的顶部（仍然与无序列表内联，只是不再垂直居中）。

我无法弄清楚为什么会发生这种情况以及如何解决问题。有任何想法吗？

这是代码：http: [//jsfiddle.net/pVpnd/1/](http://jsfiddle.net/pVpnd/1/)。

 `如果隐藏无序列表，则选择框将在表格单元格中居中，但仅当它是单元格中的唯一元素时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:45:45.150

尝试以下 CSS 而不是 float：

```
select,ul{
    display:inline-block;
    vertical-align:middle;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/pVpnd/6/)**`

# iphone - iOS中的自定义形状（倒T）边框Uiview

> ID：12058464
> 
> 赞同：4
> 
> 时间：2012-08-21T15:40:09.767
> 
> 标签：iphone, objective-c, ios, uiview, customization

我必须在 iOS 上创建一个自定义形状（倒 T）边框的 Uiview。我附上下面的屏幕截图。我进行了很多研究，并从[这里找到了使用](https://stackoverflow.com/questions/10214897/ios-drawing-just-portions-of-a-uimage/10220145#10220145)**UIBezierPath**的方法。

但是我没有任何想法将我的视图塑造成倒 T 形。

![倒镶边T](../Images/274ec82a1b2c4872ab72f601a932ed4a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:46:25.490

`UIView`s 总是矩形的。从文档中：

> UIView 类定义了屏幕上的一个矩形区域以及用于管理该区域内容的接口。

即使视图仅限于矩形，您也可以以任何您喜欢的方式塑造您的活动区域。通过将其与透明背景相结合，您可以模仿可以绘制的任何形状的视图。

当您的矩形视图接收到触摸和其他事件时，您的事件处理程序应首先检查活动是否发生在倒 T 区域中。如果活动在外面，则应忽略该事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T12:27:38.383

呼……终于我做到了。我使用**了两个 UiViews 子类（顶部和底部）**。

我面临的主要挑战是关于边框，因为如果我将边框设置为我的两个视图（顶部和底部），它将不会显示为单个容器项。:)

**我做的步骤：**

创建**了两个 UiView 子类**。让我们调用**topView**和**bottomView**。

```
 TopView *topView = [[TopView alloc] initWithFrame:CGRectMake(220, 60, 200, 200)];
    [topView setBackgroundColor:[UIColor yellowColor]]; 
    [self.view addSubview:topView]; 

    BottomView *bottomView = [[BottomView alloc] initWithFrame:CGRectMake(130, 260, 380, 200)];
    [bottomView setBackgroundColor:[UIColor yellowColor]];
    bottomView.customShape = topView; //Set the custom shape as TopView to frame to draw the border.    
    [self.view addSubview:topView]; 
```

我通过覆盖**drawRect**方法为**TopView绘制****了三个边框**（上、右、左），为**BottomView 绘制**了**两个完整边框**（下、右）、**两个部分边框**（左上、右上） 。

 ****[在这里](http://pastebin.com/wc50RpHk)查看我的 TopView 课程。

[在这里](http://pastebin.com/L0QpUhWJ)查看我的 BottomView 课程。

谢谢大家。

**输出**：

![自定义 UIView](../Images/6e01001dd4c6279eeec0a1cbcdcf420b.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T15:52:05.040

应该可以创建一个以 CAShapeLayer 作为图层的视图。

创建 UIView 的子类并覆盖 layerClass 方法：

```
+ (Class)layerClass {
    return [CAShapeLayer class];
} 
```

然后在 viewDidLoad 中，您可以指定 shapeLayer 的 bezierPath：

```
- (void)viewDidLoad {
     [(CAShapeLayer *)self.layer setPath:someBezierPath.CGPath];
     [self.layer setBackgroundColor:[UIColor redColor].CGColor];
} 
```****

# r - R，ggplot2 元素/点/线的大小/暗淡

> ID：12058471
> 
> 赞同：1
> 
> 时间：2012-08-21T15:40:37.827
> 
> 标签：r, ggplot2

我正在使用 ggplot2 绘制此图像：

问题是：在 X 轴上是范围。我想做的事情：我想让每个点/线/与范围（写在 X 轴上）一样大。

那可能吗？我的代码如下所示：

```
ggplot(data, aes(as.character(paste(data$V3,data$V4,sep="-")), means, color = factor(numSamp),group = 1))+
  geom_point()+
  stat_smooth(method = "lm") 
```

![在此处输入图像描述](../Images/dec7ecaf51bb5e37e3c77c67e6804851.png)

干杯，

马里奥

# java - 从码头到绝对 URL 的骆驼路线

> ID：12058479
> 
> 赞同：8
> 
> 时间：2012-08-21T15:41:42.670
> 
> 标签：java, routing, osgi, apache-camel, apache-karaf

我有一个`OSGi`捆绑部署在`Apache Karaf`. 我有一个简单的骆驼路线：

```
 <camelContext trace="true" xmlns="http://camel.apache.org/schema/spring">
        <route>
            <from uri="jetty:http://0.0.0.0:8282/services?handlers=securityHandler&amp;matchOnUriPrefix=true"/>
            <setHeader headerName="CamelHttpQuery">
                <constant>wt=xml&amp;rows=1000000&amp;fl=nid,title&amp;fq=sm_vid_Third_parties_with_which_this_organisation_s_content_can_be_shared:%22Indeed%22</constant>
            </setHeader>
            <to uri="http://172.28.128.158:8983/solr/targetjobs.co.uk.gtimedia.test/select/?"/>

<!--        <split>
                <xpath>//int[@name='nid']</xpath>
            </split>-->
            <convertBodyTo type="java.lang.String" />
        </route>
    </camelContext> 
```

我无法让它工作。当我调用`http://localhost:8282/services`它时，它应该路由到`uri`下面指定的`setHeader`. 相反，我得到了这个例外：

> java.lang.IllegalArgumentException：无效的 uri：/服务。如果您要转发/桥接 http 端点，请在端点上启用 bridgeEndpoint 选项：端点 [ [http://172.28.128.158:8983/solr/targetjobs.co.uk.gtimedia.test/select/]](http://172.28.128.158:8983/solr/targetjobs.co.uk.gtimedia.test/select/])

它说我需要启用网桥端点，但这不是端点，它是我试图指向我的路由的绝对 URL。

[我已尝试按此处](http://camel.apache.org/http.html#HTTP-SettingMaxConnectionsPerHost)`Spring`所示进行设置，但这也不起作用。我还尝试更改此设置：

```
<to uri="http://172.28.128.158:8983/solr/targetjobs.co.uk.gtimedia.test/select/?"/> 
```

对此：

```
<to uri="jetty//http://172.28.128.158:8983/solr/targetjobs.co.uk.gtimedia.test/select/?"/> 
```

也没有成功。也许有人知道如何从`jetty` `uri`绝对路由`url`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T09:33:08.487

你试过`bridgeEndpoint`吗？如下所述：

[http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html](http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html)

您的目标网址将如下所示：

```
<to uri="jetty//http://172.28.128.158:8983/solr/targetjobs.co.uk.gtimedia.test/select?bridgeEndpoint=true&amp;throwExceptionOnFailure=false"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T20:11:33.017

为我工作：

```
@Override
public void configure() throws Exception {

  restConfiguration()
    .host("localhost")
    .component("jetty")
    .port("8085");

  rest("/api")

    //NEW ROUTE
    .get("/getResidences")
    .produces("application/json")

    //OLD ROUTE
    .to("http://localhost:3000/api/residences?bridgeEndpoint=true&throwExceptionOnFailure=false");

} 
```

注意休息配置中的 .componet("jetty")

# nosql - Cassandra 超级列混杂？

> ID：12058483
> 
> 赞同：0
> 
> 时间：2012-08-21T15:41:51.907
> 
> 标签：nosql, cassandra

我有一个看起来像这样的设置：

```
user: {
    data : {
        name
        email
    }
    address : {
        city
        state
    }
} 
```

所以数据和地址是用户列族中的超级列......

我真正想要的是列和超级列的混合，例如：

```
user: {
    name
    email
    address : {
        city
        state
    } 
```

cassandra甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:27:36.017

首先，您不能在一个 CF 中混合标准柱和超级柱。每个 CF 都必须指定为标准或超级。其次，您应该避免使用超级列，因为它们已被有效弃用。相反，您可以使用标准 CF 实现此特定数据模型，并使用复合列存储地址字段，如下所示：

```
user: {
    name : "John",
    email : "john@somedomain.com",
    address:city : "Some City",
    address:state : "Some State"
} 
```

这将允许您存储不同的地址方案，但能够将它们作为一组列进行查询。我想这是你的目标。

# c# - foreach 的 for/while 等价物是什么？

> ID：12058491
> 
> 赞同：10
> 
> 时间：2012-08-21T15:42:14.587
> 
> 标签：c#, .net, foreach, ienumerable, ienumerator

我有一个`foreach`需要转换为`for`or循环的`while`循环。我的循环如下所示：

```
foreach (Item item in Items)
{
    // some stuff
} 
```

什么是等价物`for`或`while`循环？

我想我需要使用`GetEnumerator`来获得一个`IEnumerator<Item>`，但我不知道如何正确使用它。`Items`不是列表，否则我会使用索引。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-21T15:46:06.910

在最简单的情况下（不处置等），您可以使用：

```
var enumerator = Items.GetEnumerator();// `var` to take advantage of more specific return type
while(enumerator.MoveNext())
{
  Item item = enumerator.Current;
  ...
} 
```

有关确切的规则，请查看 C# 规范 8.8.4 The foreach 语句。

> 形式的 foreach 语句
> 
> ```
> foreach (V v in x) embedded-statement 
> ```
> 
> 然后扩展为：
> 
> ```
> {
>   E e = ((C)(x)).GetEnumerator();
>   try {
>      V v;
>      while (e.MoveNext()) {
>         v = (V)(T)e.Current;
>                 embedded-statement
>     }
>   }
>   finally {
>      … // Dispose e
>   } 
> ```
> 
> }

*（引自 C# 语言规范 4.0 版）*

这里使用的类型是：“集合类型`C`、枚举类型`E`和元素类型`T`”。`E`是 的返回类型`GetEnumerator`，并且不一定`IEnumerator<V>`因为`foreach`使用鸭子类型。该规范还描述了一些极端情况以及如何推断这些类型，但这些细节可能与这里无关。

在 C# 5 中， 的声明`v`将被移到`while`循环中以获得更直观的闭包语义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T15:48:07.107

如果要使用`for`循环，通常意味着有某种方法可以快速访问第 n 个项目（通常是索引器）。

```
for(int i = 0; i < Items.Count; i++)
{
  Item item = Items[i]; //or Items.Get(i) or whatever method is relevant.
  //...
} 
```

如果您只是要访问迭代器，您*通常*只想使用`foreach`循环。但是，如果您不能，这通常是有意义的模型：

```
using(IEnumerator<Item> iterator = Items.GetEnumerator())
while(iterator.MoveNext())
{
  Item item = iterator.Current;
  //do stuff
} 
```

从技术上讲，您可以在`for`循环中执行此操作，但这会更难，因为该构造与这种格式不太一致。如果您要讨论不能使用`foreach`循环的原因，我们可能会帮助您找到最佳解决方案，无论是否涉及使用`for`循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:01:26.023

这是 for 循环中的等价物

```
for (IEnumerator i = Items.GetEnumerator(); i.MoveNext(); )
{
    Item item = (Item)i.Current;
    // some stuff
} 
```

# java - TestNG 类很少，如何一键运行所有测试？

> ID：12058492
> 
> 赞同：2
> 
> 时间：2012-08-21T15:42:18.193
> 
> 标签：java, eclipse, testng

我是TestNG的新手。在我的项目中，我有几个 TestNG 类，我想通过“单击”运行每个类的方法。有谁知道该怎么做？我使用 Eclipse 靛蓝。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:44:30.393

**[这](http://www.mkyong.com/unittest/testng-tutorial-5-suite-test/)**应该很有用。您可以创建一个 TestNG 套件，在其中包含所有测试，然后单击运行该套件。

```
<suite name="My test suite">
  <test name="testing">
    <classes>
       <class name="TestNGTest1" />
       <class name="TestNGTest2" />
    </classes>
  </test>
</suite> 
```

创建上述套件后，您可以创建 TestNG 启动配置。选择`Run / Run... (or Run / Debug...)`菜单并创建一个新的 TestNG 配置：

![在此处输入图像描述](../Images/8b93609a6676b5b74e92d451bd9922d1.png)

如果您没有安装 TestNG 插件，您可以按照**[此处](http://testng.org/doc/eclipse.html)**的 TestNG-For-Eclipse 官方指南进行安装。

最后，对于 One-Click-Joy，如果您在启动配置的`Common`选项卡中将此启动配置标记为收藏夹：

![在此处输入图像描述](../Images/07fb95f9c85d53cf3ff31f24bce30b87.png)

一旦你这样做了，这个启动配置将在 Eclipse 工具栏中可用：

![在此处输入图像描述](../Images/09cce7aeada151e74c6cbcd9a490c597.png)

# python - 将字符串更改为日期时间对象

> ID：12058494
> 
> 赞同：0
> 
> 时间：2012-08-21T15:42:20.687
> 
> 标签：python, datetime

time_list 是一个元组列表，每个元组内是一个整数和两个字符串，这两个字符串是日期格式，但我想将它们更改为实际的日期时间对象。这就是我所做的：

```
for row in time_list:
    row[1] = datetime.strptime(row[1], "%Y-%m-%d %H:%M:%S.%5N")
    row[2] = datetime.strptime(row[2], "%Y-%m-%d %H:%M:%S.%5N")
    delta = row[2] - row[1]
    timedelta.append(delta) 
```

当我删除 %5N 时，我得到一个不同的错误，但这不是我想要做的，所以我不会为此烦恼。我确实知道 %5N 导致了这个问题。我得到的错误是：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Users\user\Programs\time_database.py", line 50, in search2
    row[1] = datetime.strptime(row[1], "%Y-%m-%d%t%H:%M:%S.%5N")
  File "C:\Python27\lib\_strptime.py", line 317, in _strptime
    (bad_directive, format))
ValueError: '5' is a bad directive in format '%Y-%m-%d %H:%M:%S.%5N' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:47:07.833

`%5N``strftime`Python 中使用的方法不支持。改用[`%f`（微秒）](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)：

```
datetime.strptime(row[1], "%Y-%m-%d %H:%M:%S.%f") 
```

# asp.net-mvc-3 - Jquery ajax将空值返回给控制器 - MVC3

> ID：12058499
> 
> 赞同：2
> 
> 时间：2012-08-21T15:42:36.133
> 
> 标签：asp.net-mvc-3, jquery

我正在使用 jQuery ajax 构建视图模型列表，然后尝试将该视图模型发送到另一个 ActionResult 以创建 PartialViews。第一部分运行良好，我能够创建视图模型（列表），但是当我尝试将视图模型发送回控制器以构建部分视图时，视图模型中的所有内容都是 0。它返回正确的数字列表中的项目，但它似乎丢失了值。

谁能看看我是否在这里遗漏了什么？

jQuery：

```
$.ajax({
    async: false,
    type: 'GET',
    dataType: "json",
    url: '@Url.Action("GetMapDetails")',
    success: function (data) {
        $.ajax({
            async: false,
            type: 'POST',
            dataType: "json",
            url: '@Url.Action("GetMapItems")',
            data: {
                list: data
            },
            success: function (list) {
                //callback
                });
            }
        });
    }
}); 
```

和控制器：

```
public ActionResult GetMapDetails()
{
    List<ViewModel> vm = new List<ViewModel>();

    //create viewmodel here 

    return Json(vm.ToArray(), JsonRequestBehavior.AllowGet);
}
[HttpPost]
public ActionResult GetMapItems(List<ViewModel> list)
{
    return PartialView("_MapItemsPartial", list);
} 
```

我也尝试过使用`contentType: 'application/json'`，`JSON.stringify(data)`但这给了我一个`Invalid JSON primitive`错误。

任何帮助表示赞赏 - 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:47:40.907

您可以将它们作为 JSON 请求发送：

```
$.ajax({
    async: false,
    type: 'POST',
    contentType: 'application/json',
    url: '@Url.Action("GetMapItems")',
    data: JSON.stringify({
        list: data
    }),
    success: function (result) {
        //callback
    }
}); 
```

另请注意，我已删除该`dataType: 'json'`参数，因为您的`GetMapItems`POST 控制器操作不返回任何 JSON。它返回一个`PartialView`. 所以我猜你做错了什么，这不是从这个控制器动作返回的意思，因为从我在你的成功回调中看到的你期望操纵 JSON。

哦，请删除这个`async:false`=> 它违背了 AJAX 的全部目的，因为您不再执行任何 AJAX，您现在正在执行 SJAX。

# iphone - 推送和弹出视图控制器

> ID：12058504
> 
> 赞同：0
> 
> 时间：2012-08-21T15:42:52.757
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, pushviewcontroller

我有一个导航视图控制器，它是一个表格视图，然后如果我选择一行，它会从表格视图进入详细视图页面。当我转到详细视图页面时，我从服务器检索一些信息，如果服务器没有响应，那么我会弹出一个警报视图，该视图出现在我的父导航视图前面。现在，当在警报视图上按确定并单击另一行时，它确实进入了我的“didselectview”方法，但没有进入我的详细视图页面。有人会知道为什么吗？下面给出的代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
//Navigation logic may go here. Create and push another view controller.
Item *selectedItem = (Item *)[self.fetchedObjectsArray objectAtIndex:indexPath.row];
NSString * urlString = [CONST_FEED_DISCRIPTION_URL stringByAppendingString:selectedItem.guid];
NSDate * dateString = selectedItem.date;
JsonViewController *jsonViewController = [[JsonViewController alloc] initWithURLString:urlString date:dateString];
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" 
                                                               style:UIBarButtonItemStyleBordered
                                                              target:nil
                                                              action:nil];
self.navigationItem.backBarButtonItem = backButton;
self.navigationController.navigationBar.tintColor = [UIColor colorWithHexString:CONST_NAVIGATIONBAR_COLOR];
[self.navigationController pushViewController:jsonViewController animated:YES];
[backButton release];
[jsonViewController release];
} 
```

您第一次获得警报视图（这是一条错误消息）。之后，当您单击一行时，什么也没有发生。但我知道它进入下面给出的方法。有人知道为什么吗？和我推观点有关系吗？而不是弹出它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:48:24.783

将推送推迟到下一个 runLoop，让 tableView 返回：

```
dispatch_async(dispatch_get_main_queue(), ^ {
    NSLog(@"Going to push...");
    NSLog(@"...view Controller %@", jsonViewController);
    [self.navigationController pushViewController:jsonViewController animated:YES];
    [jsonViewController release];
    NSLog(@"Just pushed %@", jsonViewController);
) ); 
```

为了清楚起见，从现有代码中删除这两行：

```
[self.navigationController pushViewController:jsonViewController animated:YES];
[jsonViewController release]; 
```

# msbuild-4.0 - msbuild 如何决定使用哪些工具？

> ID：12058506
> 
> 赞同：1
> 
> 时间：2012-08-21T15:43:05.807
> 
> 标签：msbuild-4.0

我正在尝试设置一个新的 TeamCity 代理。

我的新代理正在调用：C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64\CL.exe

现有代理正在调用：C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\AMD64\CL.exe

就我而言，现有代理正在做正确的事情，因为它们都是 64 位主机并构建 64 位二进制文​​件。两者都使用相同的参数调用 msbuild（删除了细节以保护无辜者）： C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe (xxxx.sln /clp:PerformanceSummary /p:Configuration=Release / p:平台=x64)

我找到了这个博客： http: [//blogs.msdn.com/b/aaronhallberg/archive/2007/07/16/msbuild-property-evaluation.aspx](http://blogs.msdn.com/b/aaronhallberg/archive/2007/07/16/msbuild-property-evaluation.aspx)，它解释了 msbuild 如何评估属性。但我不知道使用哪些属性来决定这些工具。

您可能想知道我为什么关心工具选择。在任何一种情况下，CL 调用都会成功（您可以在 64 位窗口下运行 32 位编译）。但是在新代理上，我在预编译头文件中出现错误“预编译头文件来自先前版本的编译器，或者预编译头文件是 C++，而您正在从 C 中使用它（反之亦然）” - 并且预编译的头文件正在被同一个 AMD64\CL.exe 使用。

因此，如果有人知道 msbuild 实际使用了哪些道具，它将帮助我弄清楚这一点。

作为旁注，我在我的工作站上的 VC++ 目录、可执行目录下的 Visual Studio 项目属性页中看到了交叉编译器 (x86_amd64\CL.exe)。这是Win 7，64位。它说它是继承的，我还没有自定义 msbuild 道具（在 C:\Users\bdelavega\AppData\Local\Microsoft\MSBuild\v4.0 中）。为什么会是默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:28:13.043

这篇文章解释了 msbuild 在从 VS 2010 调用时默认使用交叉编译器，并且有一个命令行开关可以覆盖它。

[http://social.msdn.microsoft.com/Forums/en-US/vcprerelease/thread/d6b352ea-12b6-4867-b86d-a052fbab1da4](http://social.msdn.microsoft.com/Forums/en-US/vcprerelease/thread/d6b352ea-12b6-4867-b86d-a052fbab1da4)

这不是完整的答案，但它足以让我克服我的问题。

# jquery - 我该怎么做 在 Twitter 引导程序中出现在 Jquery Masonry 和 Twitter Bootstrap 的砌体格式中？

> ID：12058507
> 
> 赞同：2
> 
> 时间：2012-08-21T15:43:07.523
> 
> 标签：jquery, twitter-bootstrap, jquery-masonry

我正在尝试在以下页面上获取每个：

[http://snowbird.camorada.com/test.php](http://snowbird.camorada.com/test.php)

查看如下砌体格式：

[http://masonry.desandro.com/demos/basic-single-column.html](http://masonry.desandro.com/demos/basic-single-column.html)

这是我想以砖石格式出现的 div：

```
 <div class="tiled">
          <div class="newz_caption" style="background: #FFFFFF;">
               //content
          </div>
      </div> 
```

这是我用来选择的代码，（对不起评论）

```
<script>
    $(function(){
      $('#container').masonry({
        // options  
        itemSelector : '.tiled',
        isAnimated: !Modernizr.csstransitions

      });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T16:03:05.227

与往常一样，Google 是您最好的[朋友](http://mpezzi.github.com/bootstrap_isotope/)、[伴侣](http://pknopf.com/blog/jquery-isotope-with-responsive-twitter-bootstrap)或[傍大款](http://www.maurizioconventi.com/2012/06/19/responsive-example-integrating-twitter-bootstrap-and-jquery-masonry/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:40:37.080

使用带有砌体的引导程序的问题是列的大小不同，具体取决于您的屏幕大小。

你可以试试这个解决方案：http: [//www.deanclatworthy.com/2012/09/responsive-twitter-bootstrap-masonry/](http://www.deanclatworthy.com/2012/09/responsive-twitter-bootstrap-masonry/)

# c++ - 使用 Python 在 OpenCV 中解析 XML 或 YML

> ID：12058510
> 
> 赞同：4
> 
> 时间：2012-08-21T15:43:22.740
> 
> 标签：c++, python, xml, opencv, yaml

使用 openCV，您可以使用 YML 或 XML 格式保存/加载数据。`cv::FileStorage`使用 c++ API很容易。我不能让它与 python API 一起工作。`

[这](http://pastebin.com/YhrecFLr)是使用 opencv c++ API 创建的 YML 文件的示例。

如果有人成功使用 openCV python API 加载它，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T20:19:23.410

我迟到了，但我没有找到任何方法在纯 Python 中做到这一点，因为 OpenCV（YAML 1.0）创建的 YAML 文件不完全兼容，也不容易与 Python 中可用的 YAML 库读取(YAML 1.1)。

Python/OpenCV 绑定存在，但只是一堆完全没有文档的 C 方法，因此它们在这一点上几乎无法使用。

但是，编写一个小的 C 扩展并将其包装在一个类中非常容易，因此我建议您尝试一下。如果您（或其他任何人）仍然需要它，我也许可以发布我编写的小模块的代码，我会在周五的工作中询问。

为了给你一些想法，这里是我如何使用我的模块：

```
with FileStorage("my/file.yml") as fs:
  print(fs["string"])  # Prints the "string" string key
  print(fs["int"])     # Prints the "int" integer key
  print(fs["matrix”])  # Prints a matrix (read as a NumPy array) 
```

# c# - 界面中的事件、委托

> ID：12058514
> 
> 赞同：0
> 
> 时间：2012-08-21T15:43:40.283
> 
> 标签：c#, interface, delegates

更好的是：使用 EventHandler 或在接口外部使用委托并在接口内部使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:52:56.307

`EventHandler`如果您需要提供的信息以外的其他信息（主要*是*引发事件的信息），您只需要创建自己的委托。

如果您只想将一些数据附加到事件中，您可以使用`EventHandler<TEventArgs>`并创建自己的`EventArgs`类来附加数据。

如果这些事件总是来自一种特定类型（或其子类型），那么您可以创建一个单独的`EventHandler`类，使用该类型作为发送者而不是`object`. 这样做的一个好处是您不必在事件处理程序中检查发送方的类型。

不要再创建任何干净设计所必需的类型。

# cocos2d-iphone - 将 CCLayer 添加到 CCMenu

> ID：12058517
> 
> 赞同：0
> 
> 时间：2012-08-21T15:43:52.507
> 
> 标签：cocos2d-iphone, cclayer, ccmenuitem

**如何将 CCLayer 子类添加到 CCMenu？**我有一个类似于开关控件的 CCLayer 子类，我想将其包含在 CCMenu 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:44:22.307

CCMenu 管理 CCMenuItem 的子类。您可以尝试从 CCMenuItem 继承您的开关并覆盖它的`activate`方法。

# jsp - 在这种情况下如何处理路径

> ID：12058520
> 
> 赞同：0
> 
> 时间：2012-08-21T15:43:59.277
> 
> 标签：jsp, servlets

我的应用程序中有以下结构

```
--Controller
  |_ServletA
  |_ServletB
--Webpages
  |_Secure
      |_PageA
      |_PageB
  |_PageC 
```

现在应用程序从 PageC 开始，它发布到 ServletB。ServletB 转发到 PageA。

现在从 PageA 单击指向 ServletB 的链接。servletB 做一些工作并转发给 PageB。在这个阶段 url 上的地址是 `http://localhost:8080/MyApp-war/Secure/PageB.jsp.`

现在的问题是 PageB 上的链接指向 ServletB。链接是

```
<a href="ServletB"> 
```

因此浏览器`http://localhost:8080/MyApp-war/Secure/ServletB`应该指出哪个是错误的`http://localhost:8080/MyApp-war/ServletB`。如何在不更改从 pageB 到 ServletB 的链接的情况下解决此问题，因为它在第一次尝试时可以正常工作，但是当相对地址更改时它会失败？

编辑 ：

简而言之，我想知道的是我应该在链接中放置什么

```
<a href="ServletB"> 
```

所以如果相对地址是`http://localhost:8080/MyApp-war/Secure/`它指向`http://localhost:8080/MyApp-war/ServletB`而不是，`http://localhost:8080/MyApp-war/Secure/ServletB`如果相对地址是`http://localhost:8080/MyApp-war/`它把它带到同一个位置`http://localhost:8080/MyApp-war/ServletB`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:56:28.023

您需要在这里做的是将您的 Web 应用程序的上下文路径添加到链接中。你可以做这样的事情；

这意味着，如果您的 servlet 定义`web.xml`是这样的

```
<servlet>
    <servlet-name>ServletB</servlet-name>
    <servlet-class>com.myfullpackage.MyServletB</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>ServletB</servlet-name>
    <url-pattern>/ServletB</url-pattern>
</servlet-mapping> 
```

你会做这样的事情

```
<a href='<%=request.getContextPath()%>/ServletB'> 
```

或者你使用表达语言形式

```
<a href='${pageContext.request.contextPath}/ServletB'> 
```

让我知道这是否解决了您的问题。

# ruby-on-rails - ActiveRecord 子类化困境

> ID：12058522
> 
> 赞同：2
> 
> 时间：2012-08-21T15:44:07.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, subclassing

所以我们开始吧。我有一个 Activerecord::Base 模型，让它被称为人类。

```
class human < ActiveRecord::Base
   has_one :Animal
end 
```

Animal 是一个抽象类 -

```
class animal < ActiveRecord::Base
   self.abstract_class = true;
 end 
```

我有一个动物的子类，让它成为狗

```
class dog < Animal 
```

如果我不使用抽象类，我不能将实例变量添加到“狗”（因为它存储在“动物”表中）。如果我使用抽象类，我无法将“动物”添加到“人类” - 因为 rails 不知道如何存储，例如“狗”（ActiveRecord 错误：找不到表“”） . 这种情况让我发疯，我无法克服它。我是错过了什么还是只是做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-03T07:34:45.587

按照 Ruby 中的约定，Animal 将引用一个类（实际上，它涉及更多一些 - 这个链接有更多[详细信息](https://stackoverflow.com/questions/212407/what-exactly-is-the-singleton-class-in-ruby%20*this%20link*)）。在你原来的帖子中，“class dog”应该是“class Dog”b/c，类名是一个常量，如果你在人和动物之间有一个has_one关联，你可以说human.animal =（一些动物实例） ，但是 human.Animal 如果不立即崩溃，可能会产生奇怪的效果。其他人推荐的 STI 方法将完全按照您的意愿进行，尽管您将设置“类型”值，而不是“动物”（请不要直接这样做）。

您应该阅读 Ruby 和 RoR、STI、活动记录关联和多态关联中大写的含义。像这样的东西应该可以工作（未经测试，而且标准化不好 - 您可以使用 has_one 关联和一种称为委托的模式来设置通用动物特征在一个表中，而“人类特定”特征在另一个表中以避免数据库中的一堆 NULL 列）：

```
# remember to set up your migrations to add a 'type' column to your Animal table
# if animals can own other animals who own other animals, you may want to look at
# acts_as_tree, which does trees in relational databases efficiently 

class Animal < ActiveRecord::Base 
  self.abstract_class = true
end

class Dog < Animal
  # this is bad normalization - but you can keep this simple by adding 
  # a human_id field in your animal table (don't forget to index)
  # look into the 'belongs_to' / 'references' type available for DB migrations   
  belongs_to :human
end

class Human < Animal
  has_one :dog, :autosave => true # or you could use 'has_many :dogs' 
end

human = Human.new # => adds record to Animal table, with type = 'human'
dog = Dog.new
human.dog = dog
human.save 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T15:51:36.107

ActiveRecord 具有对多态关联的内置支持，因此您可以这样做：

[http://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:32:51.627

ActiveRecord 默认从模型名称中获取表名。但是，您可以覆盖它。如果你想在一张桌子上放狗，在另一张桌子上放猫，等等，那么你可以这样做（在 Rails 3.2 中）：

```
class Dog < Animal
  self.table_name = 'dogs'
end

class Cat < Animal
  self.table_name = 'cats'
end 
```

（您必须添加迁移才能创建这些表。）

但是，如果您希望所有动物都存在于一张表中，则应查看 Single-Table-Inheritance。有关更多信息，请参阅[ActiveRecord 文档](http://railsapi.com/doc/rails-v3.2.6/)。

# maven - 即时将文件安装到 Maven 存储库

> ID：12058527
> 
> 赞同：0
> 
> 时间：2012-08-21T15:44:19.330
> 
> 标签：maven, dependencies

我正在运行 Maven 3.0.3。我有一个不属于任何在线存储库的 JAR。我将它保存在我项目的 lib/quickbase.jar 中。理想情况下，在构建项目时，我希望将其自动安装到本地存储库，而不必先运行“mvn install:install-file”。我找到了这个并将其包含在我的 pom.xml 中......

```
 <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-install-plugin</artifactId>
                            <executions>
                                    <execution>
                                            <id>install-quickbase-jar</id>
                                            <phase>compile</phase>
                                            <configuration>
                                                    <file>${basedir}/lib/quickbase.jar</file>
                                                    <repositoryLayout>default</repositoryLayout>
                                                    <groupId>quickbase</groupId>
                                                    <artifactId>quickbase</artifactId>
                                                    <version>1.0</version>
                                                    <packaging>jar</packaging>
                                                    <generatePom>true</generatePom>
                                            </configuration>
                                            <goals>
                                                    <goal>install-file</goal>
                                            </goals>
                                    </execution>
                            </executions>
                    </plugin> 
```

我的 pom 中的依赖是

```
 <dependency>
                    <groupId>quickbase</groupId>
                    <artifactId>quickbase</artifactId>
                    <version>1.0</version>
            </dependency> 
```

但是，运行 Maven 会导致

```
mvn clean test
...
[ERROR] Failed to execute goal on project didoclient: Could not resolve dependencies for project org.mainco.myco:didoclient:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: quickbase:quickbase:jar:1.0, 
```

是否可以即时安装此依赖项，如果可以，我该如何调整上述内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:14:09.427

最好的解决方案是将此文件仅安装一次到本地存储库（命令行 mvn install:install-file），但最好的解决方案是将其放入存储库管理器中，然后您可以将其用作通常的依赖项。

您可以尝试更改安装插件的生命周期阶段，可能是 generate-sources 或更早，如初始化，但我认为这也不起作用。

# eclipse - 使用 Eclipse 迁移 GIT 代码库

> ID：12058528
> 
> 赞同：1
> 
> 时间：2012-08-21T15:44:24.480
> 
> 标签：eclipse, git

我有一个 GIT 代码库，我想将它移到另一台机器上。我不想丢失版本历史和其他所有内容。如何使用 Eclipse 的菜单选项移动整个代码库（稍后将其恢复到同样运行 Eclipse 的第二台机器上）？只是为了强调，我不想使用命令行。

在 Eclipse 的 GIT Repositories 视图中，我在上下文菜单中看到“push”、“pull”、“fetch”等条目。这是要走的路吗？也许我必须从我的源机器推送并获取到我的目标机器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:21:00.420

如果你有 git 存储库，你只需要复制它。

作为一种好的做法，您应该在远程位置维护您的存储库。我使用 www.assembla.com，它是免费的。

# php - 在 PHP 5.4.6 上使用 PHPUnit 运行 PHPT 的错误失败

> ID：12058531
> 
> 赞同：2
> 
> 时间：2012-08-21T15:44:43.690
> 
> 标签：php, phpunit, phpt

PHPUnit 可以毫无问题地运行常规测试，但它错误地将这个[基本的 PHPT 示例](http://qa.php.net/write-test.php#basic-format)报告为失败，而它应该通过：

```
--TEST--
strtr() function - basic test for strstr()
--FILE--
<?php
/* Do not change this test it is a README.TESTING example. */
$trans = array("hello"=>"hi", "hi"=>"hello", "a"=>"A", "world"=>"planet");
var_dump(strtr("# hi all, I said hello world! #", $trans));
?>
--EXPECT--
string(32) "# hello All, I sAid hi planet! #" 
```

运行这个`phpunit basic-format.phpt`给

```
There was 1 failure:

1) basic-format.php
--- Expeccted
+++ Actual
@@ @@
- # hello All, I sAid hi planet! #
+ 
```

我正在使用 Windows / PHP 5.4.6。该测试适用于 PHP 5.4.0，但我无法确定除 php 版本之外的任何差异。

# javascript - 如何在 jQuery 中使用查找？

> ID：12058532
> 
> 赞同：-1
> 
> 时间：2012-08-21T15:44:52.723
> 
> 标签：javascript, jquery, html

```
​&lt;table>
    <tr>
        <td>aaa</td>
        <td>aaa</td>
        <td>
            <div title="now">
                <div id="here">here</div>
            </div>
        </td>
        <td>
            <div>vvvv</div>
        </td>
        <td>
            <div>vvvv</div>
        </td>
        <td>
            <div title="now">vvvv</div>
        </td>
        <td>
            <div  title="now">vvvv</div>
        </td>
    </tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我在`#here`。我想从这个地方添加所有 div 的类`title="now"`。我想使用 find 或其他，但我不能将其设置为`$('div[title=now]')`.

```
$(#here).parent().parent().find(????).addClass('new'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:47:01.190

```
$("#here").closest("tr").find("div[title=now]").addClass('new') 
```

我在`closest`这里找到了第一个父级 a `tr`，这比调用`parent`两次要好一些。`find`就像你写的那样。

目前还不清楚您是否要选择 title=now 的所有三件事，但您应该能够从中解决！

应该做的工作。这是一个显示正在发生的事情的小提琴。[http://jsfiddle.net/MurwG/3/](http://jsfiddle.net/MurwG/3/)

（顺便说一下，最接近的比父母更快，如此处所示：http: [//jsperf.com/jquery-parents-vs-closest/8](http://jsperf.com/jquery-parents-vs-closest/8)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:48:22.537

```
$("#here").closest("td").find("div[title=now]").addClass('new') 
```

我不确定您是要选择单元格中的所有 div，还是要选择行中的所有 div - 然后使用`.closest("tr")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:50:22.453

$("#here").parent().parent().parent().find("div[title=now]").addClass("new");​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​</p>

[http://jsfiddle.net/2xAVn/](http://jsfiddle.net/2xAVn/)

# curl - 使用 wget 批量下载两个范围

> ID：12058538
> 
> 赞同：1
> 
> 时间：2012-08-21T15:45:23.550
> 
> 标签：curl, download, wget

我有一个 PHP 图片库，里面有大约 20000 个照片文件。我想在自己的服务器上备份图像，但这是我的 url 问题；

```
http://photos.blabla.net/photo.php?g=XX&p=YY 
```

XX 是画廊编号，YY 是照片编号。提供的画廊编号错误，无法访问这些照片。所以我想创建一个批量下载，例如。

```
http://photos.blabla.net/photo.php?g=[1:2000]&p=[1:20000] 
```

如何在 shell 帐户中使用 wget 或 curl 或任何其他方式完成此操作。甚至任何 Windows 解决方法都会受到赞赏。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:02:26.583

一个人无法做到这一点`wget`。

在几行 Python 中将其作为子进程运行就可以解决问题（理论上）：

```
import subprocess

g=1
p=1

while g <= 2000:
    while p <= 20000:
        subprocess.Popen(['wget', '-A jpg', 'http://photos.blabla.net/photo.php?g='+g+'&p='+p+''])
        p = p+1
    g = g+1
    p = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:42:23.093

Python 脚本总是很好。但如果你不想编写额外的脚本，请在 bash 中使用一行命令：

```
for g in {1..2000}; do for p in {1..20000}; do wget http://photos.blabla.net/photo.php?g=$g&p=$p; done done 
```

# java - VLCJ Java Applet 无法加载

> ID：12058539
> 
> 赞同：3
> 
> 时间：2012-08-21T15:45:26.017
> 
> 标签：java, applet, vlcj

我正在尝试将 vlcj 应用程序编译成 java 小程序。我有 vlcj 运行所需的 3 个 jar 文件`/lib`。而我的类文件在`/src`. 在 Eclipse 中，小程序在小程序查看器中运行良好。但是当我打包 jar 文件并加载我的测试 html 页面时。什么都没发生！我知道由于 java 小程序的沙盒，小程序需要签名。并且已经签署了小程序，但我肯定做错了什么。

这些是我做的步骤：

1）所以要创建小程序首先我将 .java 文件编译为 .class 文件并将 .class 文件存储在`/bin.`

`javac -cp lib/vlcj-2.1.0.jar:lib/platform-3.4.0.jar:lib/jna-3.4.0.jar Test.java`

2）然后我创建我的jar文件

`jar cvf Test.jar lib/* Test.class`

3）然后我生成密钥：`keytool`

4）然后我签署`Test.jar`文件`jarsigner`以产生`SignedTest.jar`.

5）然后我将公钥导出到证书

6) 然后将该证书作为可信证书导入。

我的测试 html 页面使用以下命令打开 java 小程序：

`<applet code="bin/Test.class" archive="SignedTest.jar” width=200 height=200>`

这些步骤中是否有任何错误？我错过了一两个阶段吗？还有一个额外的问题？有人知道如何在linux中获取控制台输出吗？

- - 编辑 - -

这是签名 Jar 文件的结构。

```
 703 Wed Aug 22 09:25:16 BST 2012 META-INF/MANIFEST.MF
   908 Wed Aug 22 09:25:16 BST 2012 META-INF/SIGNFILE.SF
   782 Wed Aug 22 09:25:16 BST 2012 META-INF/SIGNFILE.DSA
   500 Wed Aug 22 09:06:28 BST 2012 Test$1.class
  1448 Wed Aug 22 09:06:28 BST 2012 Test.class
    40 Tue Aug 14 11:36:48 BST 2012 Notes
1008730 Tue Jul 10 13:15:48 BST 2012 lib/jna-3.4.0.jar
913436 Tue Jul 10 13:15:48 BST 2012 lib/platform-3.4.0.jar
278211 Tue Jul 10 13:15:48 BST 2012 lib/vlcj-2.1.0.jar
   371 Tue Jul 10 13:23:54 BST 2012 .project
   351 Tue Jul 10 13:16:18 BST 2012 .classpath 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:04:48.940

```
java.lang.NoClassDefFoundError: uk/co/caprica/vlcj/component/EmbeddedMediaPlayerComponent. 
```

需要将包含的 Jar`uk.co.caprica.vlcj.component.EmbeddedMediaPlayerComponent`添加到小程序的运行时类路径中。这是通过元素的`archive`属性来实现的。`applet`它应该是小程序所需的以逗号分隔的 Jars 列表。根据编译细节并假设它们都与 HTML 位于同一目录中，可能会导致此小程序元素。

```
<applet 
    code="Test" 
    archive="SignedTest.jar,vlcj-2.1.0.jar,platform-3.4.0.jar,jna-3.4.0.jar" 
    width=200 
    height=200>
</applet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:01:32.317

也许 Test.class 永远不会被添加到 .jar 文件中？因为 Eclipse 将 .class 文件放入 /bin/Test.class，而您正在尝试添加 /Test.class

要检查，请尝试

```
 jar tvf Test.jar 
```

在第 2 步之后。

尝试使用 Eclipse 创建 Jar。文件 | 出口 | 爪哇 | 罐子文件。

# heroku - heroku上的测功机特定环境变量可能吗？

> ID：12058540
> 
> 赞同：3
> 
> 时间：2012-08-21T15:45:31.100
> 
> 标签：heroku, environment-variables

对于heroku上的每个测功机，相同的环境变量是否可以有不同的值？

例如：web.1：100 web.2：200

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T07:40:27.103

一个鲜为人知的事实：环境变量`PS1`（是的，shell 提示符）用于保存诸如“web.1”、“worker.2”等值。后来它被更改为`PS`，并且根据[链接](https://devcenter.heroku.com/changelog-items/293?utm_source=dlvr.it&utm_medium=twitter)它现在被称为`DYNO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:13:21.150

No, however you can create a UUID on app initialization, which would be unique across each of the dynos, and can be used for logging and whatnot.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-22T10:50:53.720

我正在寻找相同问题的解决方案，并在 sidekiq 问题跟踪器中发现了一些可能有帮助的内容：[在启动时设置 ENV 变量](https://github.com/mperham/sidekiq/issues/374)

引用贡献者 betegeuse ：

> 显然不是。任何方式只需在命令前面加上 env 就可以了：
> 
> `worker: env ANY_ENV=foo any_command`

# javascript - 我应该如何在backbone.marioentte中测试/监视这种事件

> ID：12058542
> 
> 赞同：1
> 
> 时间：2012-08-21T15:45:40.930
> 
> 标签：javascript, backbone.js, jasmine, marionette

我正在尝试为此模块 (2) 实施测试 (1)。
我的目的是检查在触发特定事件时是否获取了集合。
正如您从我在 (2) 中的评论中看到的那样，我收到消息 `Expected spy restartPolling to have been called.`
The module works but the test failed。有任何想法吗？

* * *

PS：

This question is related to this one [Expected a spy, but got Function](https://stackoverflow.com/questions/12053799/expected-a-spy-but-got-function/12058090#12058090)

* * *

(1)

```
// jasmine test module

describe('When onGivePoints is fired', function () {
    beforeEach(function () {
        spyOn(UsersBoardCollection.prototype, 'restartPolling').andCallThrough();
        app.vent.trigger('onGivePoints');
    });
    it('the board collection should be fetched', function () {
        expect(UsersBoardCollection.prototype.restartPolling).toHaveBeenCalled();
        // Expected spy restartPolling to have been called.
    });
}); 
```

* * *

(2)

```
// model view module
return Marionette.CompositeView.extend({
    initialize: function () {
        this.collection = new UserBoardCollection();
        this.collection.startPolling();
        app.vent.on('onGivePoints', this.collection.restartPolling);
    },
    // other code
}); 
```

* * *

(3)

```
// polling module

var poller = {
    restartPolling: function () {
        this.stopPolling();
        this.startPolling(options);
    },
    // other code
}; 
```

* * *

(4)

```
var UsersBoardCollection = Backbone.Collection.extend({
    // some code
});

_.extend(UsersBoardCollection.prototype, poller);

return UsersBoardCollection; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:42:20.380

我正在使用 Marionette，我对其进行了一些不同的测试。我的想法不是测试，当事件在调用函数的真实应用程序上触发时，因为这将由 Marionette 开发人员进行测试。

我测试该事件是否绑定到`app.vent`. 因此，我自己创建了一个间谍`app.vent.on`并随后触发了该功能：

```
spyOn(app.vent, 'on');
expect(app.vent.on.argsForCall[0][0]).toBe('onGivePoints')

app.vent.trigger.argsForCall[0][1]() 
```

# php - symfony2 不允许我获取整个参数

> ID：12058545
> 
> 赞同：2
> 
> 时间：2012-08-21T15:45:54.023
> 
> 标签：php, symfony

在 Symfony 2 中，我有一个这样的 yml 文件：

```
my_application:
  application:
      name: "Hello World"
      version: { major: 1, minor: 0, build: 4, stage: BETA } 
```

如果我想获取`Hello World`- 例如 - 我使用这个**命令**：

```
echo $container->getParameter('my_application.application.name'); 
```

**打印**：

```
"Hello World" 
```

现在，如果我想获得整个应用程序怎么办？在数组内部？

```
print_r($container->getParameter('my_application.application')); 
```

给我一个**错误**：

```
ParameterNotFoundException: You have requested a non-existent parameter "my_application.application". 
```

但它**存在**。我想做的就是获取整个节点。作为**数组**。

是否有**可能**，如果是，**如何**？如果不是，**为什么**又是？

*- 显然，symfony 告诉我这不是一个参数，而是一个包（也许），但我怎样才能将它作为数组获取？-*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:40:07.990

是的 - 因为它将配置映射到平面结构。您可以确切地看到数据是如何以这种方式存储的：

```
var_dump($container->parameters) 
```

# asp.net-mvc-3 - MvcSiteMap 仅显示根节点

> ID：12058547
> 
> 赞同：0
> 
> 时间：2012-08-21T15:45:57.570
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider

我正在尝试使用 DynamicNodeProvider 在 MVC3 中创建多级站点地图。但只显示根节点。请指导我代码中的问题所在。我已经定义了一个类来覆盖 GetDynamicNodeCollection，如下所示：

```
 public class UserJourneyNavigationProvider : DynamicNodeProviderBase
            {
                private List<NavigationGroups> NavigationGroups { get; set; }

                public UserJourneyNavigationProvider()
                {
                }

                public UserJourneyNavigationProvider(List<NavigationGroups> NavigationGroups)
                {
                    this.NavigationGroups = NavigationGroups;
                }

                public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
                {
                    // Build value 
                    var returnValue = new List<DynamicNode>();

                    NavigationGroups ng1 = new NavigationGroups();
                    ng1.CategoryName = "Menu1";
                    NavigationGroups ng2 = new NavigationGroups();
                    ng2.CategoryName = "Menu2";
                    NavigationGroups ng3 = new NavigationGroups();
                    ng3.CategoryName = "Menu3";
                    NavigationGroups ng4 = new NavigationGroups();
                    ng4.CategoryName = "Menu4";
                    NavigationGroups ng5 = new NavigationGroups();
                    ng5.CategoryName = "Menu5";
                    NavigationGroups ng6 = new NavigationGroups();
                    ng6.CategoryName = "Menu6";
                    NavigationGroups ng7 = new NavigationGroups();
                    ng7.CategoryName = "Menu7";
                    NavigationGroups ng8 = new NavigationGroups();
                    ng8.CategoryName = "Menu8";
                    NavigationGroups ng9 = new NavigationGroups();
                    ng9.CategoryName = "Menu9";
                    NavigationGroups ng10 = new NavigationGroups();
                    ng10.CategoryName = "Menu10";

                    ng1.ChildCategory = new List<NavigationGroups>();
                    ng1.ChildCategory.Add(ng2);
                    ng1.ChildCategory.Add(ng3);
                    ng1.ChildCategory.Add(ng4);

                    ng5.ChildCategory = new List<NavigationGroups>();
                    ng5.ChildCategory.Add(ng6);
                    ng5.ChildCategory.Add(ng7);
                    ng5.ChildCategory.Add(ng8);

                    ng7.ChildCategory = new List<NavigationGroups>();
                    ng7.ChildCategory.Add(ng9);
                    ng7.ChildCategory.Add(ng10);

                    int i = 1;
                    ng1.CategoryId = (i++).ToString();
                    ng2.CategoryId = (i++).ToString();
                    ng3.CategoryId = (i++).ToString();
                    ng4.CategoryId = (i++).ToString();
                    ng5.CategoryId = (i++).ToString();
                    ng6.CategoryId = (i++).ToString();
                    ng7.CategoryId = (i++).ToString();
                    ng8.CategoryId = (i++).ToString();
                    ng9.CategoryId = (i++).ToString();
                    ng10.CategoryId = (i++).ToString();

                    NavigationGroups = new List<NavigationGroups>();
                    NavigationGroups.Add(ng1);
                    NavigationGroups.Add(ng5);

                    NavigationLinkGenerator(NavigationGroups, returnValue, "Home");

                    return returnValue;
                }

                private void NavigationLinkGenerator(List<NavigationGroups> navGroups, List<DynamicNode> returnValue, string parentKey)
                {
                    foreach (NavigationGroups navGroup in navGroups)
                    {
                        DynamicNode node = new DynamicNode();
                        node.Controller = "Home";
                        node.Action = "ProcessActionLink";
                        node.Title = navGroup.CategoryName;
                        node.Description = navGroup.CategoryName;

                        node.ChangeFrequency = MvcSiteMapProvider.ChangeFrequency.Always;

                        node.Key = navGroup.CategoryId;

                        if (!string.IsNullOrWhiteSpace(parentKey))
                            node.ParentKey = parentKey;

                        if (navGroup.ChildCategory != null && navGroup.ChildCategory.Count > 0)
                        {
                            NavigationLinkGenerator(navGroup.ChildCategory, returnValue, navGroup.CategoryId);
                        }

                        returnValue.Add(node);
                    }
                }
            } 
```

在 Mvc.sitemap 我这样定义节点：

```
 <mvcSiteMapNode title="Home"  controller="Home" action="Index" key="Home">
                  <mvcSiteMapNode title="" controller="Home" action="ProcessActionLink" dynamicNodeProvider="Business.Layer.UserJourneyNavigationProvider, Business.Layer" />
              </mvcSiteMapNode> 
```

在 _Layout.cshtml 我有以下代码：

```
 @Html.MvcSiteMap().Menu(false, true, true) 
```

# javascript - 在 Windows 中运行 JavaScript

> ID：12058548
> 
> 赞同：12
> 
> 时间：2012-08-21T15:45:58.497
> 
> 标签：javascript, windows

我想对于一些只运行几个命令的简单测试，我会尝试使用一些 JavaScript 并从 Windows XP 的命令行运行它。

所以为了快速测试，我创建了一个脚本

```
alert('Hello, World!'); 
```

然后尝试运行它

```
D:\>Cscript.exe hello.js
Microsoft (R) Windows Script Host Version 5.7
Copyright (C) Microsoft Corporation. All rights reserved.

D:\hello.js(1, 1) Microsoft JScript runtime error: Object expected 
```

谷歌没有帮助，我确信我错过了一些愚蠢的东西，你们中的任何人都可以解释为什么这个简单的脚本不能运行吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T15:48:36.153

您正在调用一个名为 的函数[`alert`](https://developer.mozilla.org/en-US/docs/DOM/window.alert)，但这不是 JavaScript 的一部分（它是 DOM 0 的一部分，由浏览器提供）

由于您尚未定义它，因此您试图将`undefined`其视为一个函数，但事实并非如此。

Qnan 建议改用[Echo](http://msdn.microsoft.com/en-us/subscriptions/h8f603s7%28v=vs.80%29.aspx)方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T15:52:41.470

尝试命名函数替换，因为 WSH 不支持 window.alert 方法。

```
if (!alert) alert = function foo(s){WScript.Echo(s)}
alert("hello world"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-10T15:15:47.817

一个好的方法是重定向所有常见的输出，如下例所示。它将允许您测试为 Web 设计的 JavaScript，而无需重写。

**测试.js**

```
var console = {
    info: function (s){
        WSH.Echo(s);
    }
}
var document = {
    write : function (s){
        WSH.Echo(s);
    }
}
var alert = function (s){
    WSH.Echo(s);
}

console.info("test");
document.write("test2");
alert("test3"); 
```

您可以像这样调用脚本：

```
Cscript.exe test.js firstParam secondParam 
```

这会给你：

```
test
test1
test2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T15:49:12.750

`alert`是浏览器`window`对象的方法。Window 的脚本宿主不提供这样的对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-14T21:04:28.710

Microsoft 的**JScript**运行时编译器不提供当今所有主要浏览器都支持的 DOM（文档对象模型）中的原生 JavaScript 弹出窗口。但是，这可以通过将函数（在您的情况下`alert`）包装在 WSH（Windows 脚本主机）中的本机周围来完成，`MessageBox`就像 WSH 支持的任何其他脚本语言一样。

但是，只是为了给你一个更简单的选择......试试[DeskJS](https://deskjs.wordpress.com)。这是一款适用于 Windows 的新控制台式应用程序，旨在在远离浏览器的情况下运行纯 JavaScript（目前为**ECMAScript 5.1 ），并支持所有基本的 JavaScript 弹出框以及该语言的其他漂亮附加功能。**您可能比浏览器的控制台更喜欢它......

# r - 使用矩阵调整 igraph 中的节点大小

> ID：12058556
> 
> 赞同：11
> 
> 时间：2012-08-21T15:46:33.200
> 
> 标签：r, nodes, igraph

我有以下网络图：

```
set.seed(1410)
df<-data.frame(
"site.x"=c(rep("a",4),rep("b",4),rep("c",4),rep("d",4)),
"site.y"=c(rep(c("e","f","g","h"),4)),
"bond.strength"=sample(1:100,16, replace=TRUE))

library(igraph)
df<-graph.data.frame(df)
V(df)$names <- c("a","b","c","d","e","f","g","h")
layOUT<-data.frame(x=c(rep(1,4),rep(2,4)),y=c(4:1,4:1))
E(df)[ bond.strength < 101 ]$color <- "red"
E(df)[ bond.strength < 67 ]$color <- "yellow"
E(df)[ bond.strength < 34 ]$color <- "green"
V(df)$color <- "white"
l<-as.matrix(layOUT)
plot(df,layout=l,vertex.size=10,vertex.label=V(df)$names,
edge.arrow.size=0.01,vertex.label.color = "black") 
```

![在此处输入图像描述](../Images/a97da11b560b4c98dfb56d5a847cb39a.png)

并想使用如下矩阵调整节点的大小：

```
m<-matrix(data=c(25,0,15,0,35,0,5,0,0,10,0,5,0,19,0,44), nrow=2, ncol=8)
colnames(m)<-c("a","b","c","d","e","f","g","h")
row.names(m)<-c("site.x","site.y")

        a  b  c d  e f  g  h
site.x 25 15 35 5  0 0  0  0
site.y  0  0  0 0 10 5 19 44 
```

有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T16:15:01.853

你可以使用

```
node.size<-setNames(c(25, 15, 35, 5, 10, 5, 19, 44),c("a", "b","c", "d", "e", "f", "g", "h"))
plot(df,layout=l,vertex.label=V(df)$names,
edge.arrow.size=0.01,vertex.label.color = "black",vertex.size=node.size) 
```

所以基本上是一个命名向量。

```
plot(df,layout=l,vertex.label=V(df)$names,
edge.arrow.size=0.01,vertex.label.color = "black",vertex.size=as.matrix(node.size) ) 
```

也可以

![在此处输入图像描述](../Images/0faca777300d539aec801e7f914a09da.png)

更新：

如果你需要使用你的`m`矩阵

```
plot(df,layout=l,vertex.label=V(df)$names,
edge.arrow.size=0.01,vertex.label.color = "black",vertex.size=m[m!=0]) 
```

# php - 使用 PHP 从数据库行格式化层次结构

> ID：12058559
> 
> 赞同：0
> 
> 时间：2012-08-21T15:46:40.430
> 
> 标签：php, structure, hierarchy

我试图用PHP从数据库行（例如这些行）中格式化分层布局，我正忙得不可开交。谁能帮助我，如果国家/地区不同，我尝试使用 foreach 循环并设置一个开关，但我无法让其他人正确格式化。

```
ID      City        State         Country
==================================================
1       Dallas      Texas         United States
2       Baltimore   Maryland      United States
3       Houston     Texas         United States
4       Essex       London        United Kingdom
5       Salford     Manchester    United Kingdom 
```

给我以下内容（最好在多选字段中）

```
United States
--Maryland
----Baltimore
--Texas
----Dallas
----Houston
United Kingdom
-- London
---- Essex
-- Manchester
----Salford

<select multiple="yes" name="locations">
  <option value="United States">United States</option>
  <option value="Maryland">-- Maryland</option>
  <option value="Baltimore">---- Baltimore</option>
  <option value="Texas">-- Texas</option>
  <option value="Dallas">---- Dallas</option>
  <option value="Houston">---- Houston</option>
  <option value="United Kingdom">United Kingdom</option>
  <option value="London">-- London</option>
  <option value="Essex">---- Essex</option>
  <option value="Manchester">-- Manchester</option>
  <option value="Salford">---- Salford</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:54:47.777

这里的基本目标是遍历行，将它们放置在您正在寻找的层次结构中。我建议这样的事情：（这可能会给你一些 E-STRICT 警告，但这里和那里的一些错误检查从未杀死任何人）。然后，您可以随意从层次结构中打印。

```
$locations = array();
foreach($rows as $row)
    locations[$row->Country][$row->state][$row->city] = $row->id;

echo '<select multiple="yes" name="locations">';

$foreach($locations as $country=>$states){
    echo "<option value='$country'>$country</option>";
    $foreach($states as $state=>$cities){
        echo "<option value='$state'>-- $state</option>";
        $foreach($cities as $city=>$id)
            echo "<option value='$city'>---- $city</option>";
    }
}

echo '</select>'; 
```

# c# - 用于服务（在服务器上）的 C# HTML 到 PDF 代码

> ID：12058560
> 
> 赞同：3
> 
> 时间：2012-08-21T15:46:44.330
> 
> 标签：c#, asp.net, html, pdf, adobe

我正在寻找一些 C# 代码来从呈现的 HTML 页面在服务器上创建 .PDF 文档。我要转换为 .PDF 的 HTML 的结构和内容非常简单（DIV、TABLE、IMAGE 等），因此我需要以下代码：

1.  创建可由客户端浏览保存的文档（在他们单击另存为 .PDF 后）
2.  处理 HTML 流并将其转换为 .PDF
3.  处理将图像添加到文档中
4.  指定文档的分辨率（？） - 这将是我想要的打印质量（高 DPI 和我嵌入的图像将是高分辨率）

我已经看到了很多关于此的问题，但是在搜索了一个小时左右之后，我无法找到一个好的起点。任何指针都会很棒...理想情况下，我正在寻找一些我可以使用的源代码，而不是可购买的组件或可以完成所有工作的 Web 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:50:05.200

你看过 wkhtmltopdf 吗？它是开源的，虽然是 LGPL，但是我能找到最好的转换。它是命令行，所以应该在服务器上运行良好。 [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

另请参阅：[调用 wkhtmltopdf 从 HTML 生成 PDF](https://stackoverflow.com/questions/1331926/calling-wkhtmltopdf-to-generate-pdf-from-html/1698839#1698839)以获取 c# 中的说明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-07T13:48:04.997

[WkHtmlToPdf](http://code.google.com/p/wkhtmltopdf/)满足您的所有要求（包括自定义 DPI 和嵌入图像）。

为了节省时间，我建议在 WkHtmlToPdf 上使用现成的 .NET 包装器之一，例如[PDF Generator for .NET](http://www.nrecosite.com/pdf_generator_net.aspx)（它是免费的），因为

*   您根本不需要下载和安装 wkhtmltopdf（所有内容都打包到一个 DLL 中）
*   您可以使用 1 行代码将 HTML 转换为 PDF：

    (new NReco.HtmlToPdfConverter()).GeneratePdf(htmlContent);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:58:06.817

我在 Expected Behavior 工作，我们开发了一个名为 DocRaptor 的 HTML 到 PDF API，它使用 Prince XML 作为我们的 PDF 渲染引擎。既然您提到想要创建高质量的文档，我认为我们的服务非常适合。

我们有 C# 的示例代码，您可以在这里找到：

[DocRaptor C# 示例](http://docraptor.com/documentation/examples_csharp)

DocRaptor 是一项基于订阅的服务，但我们还提供免费计划，允许用户每月创建多达 5 个文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T15:52:00.383

你可以试试[Amyuni WebkitPDF](http://www.amyuni.com/en/webkitpdf/)。它是一个免费的组件，可以将 HTML 转换为 PDF 或 XPS，并且该包包含 C# 的示例代码。
*通常的免责声明适用*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-07T19:38:15.377

这将取决于 SDK 的具体部分，比如这个[你](http://www.pdfonline.com/c%23-html-to-pdf/) 也可以查看那些手册，在 Native SDK Pages 的服务器端操作部分中描述的小部分。 [http://www.pdfonline.com/easypdf/sdk/usermanual/source/running_on_server/asp_sample.htm](http://www.pdfonline.com/easypdf/sdk/usermanual/source/running_on_server/asp_sample.htm) [http://www.pdfonline.com/easypdf/sdk/usermanual/source/using_objects/native_net_printer.htm](http://www.pdfonline.com/easypdf/sdk/usermanual/source/using_objects/native_net_printer.htm)

其他一切都取决于您的体系结构以及您希望如何将文件获取到运行 SDK 的机器。我想最简单的方法是使用 FileUpload 元素，这是一个可以添加到由 Visual Studio 设计的网站的 Web 窗体元素。从该对象中，您可以将文件本地保存在服务器上，也可以将其读入内存并处理转换。

这是一个使用 FileUpload 的简单方法。切换到您想要的任何文件上传方法也很容易，唯一重要的是获取文件及其文件扩展名的 byte[] 数组，然后您可以将其发送到 PrintOut3()。或者，您可以将文件本地保存到服务器上以使用 PrintJob 或 PrintJob2。

```
//Upload and convert a File when a Button is pushed
protected void Button1_Click(object sender, EventArgs e)
{
    if(FileUpload1.HasFile)
    {
        string iEXT = Path.GetExtension(FileUpload1.FileName);
        byte[] iMEM = FileUpload1.FileBytes;
        byte[] oMEM;

        Printer oPrin = new Printer();
        PrintJob oPJob = oPrin.PrintJob;

        try
        {
            oMEM = oPJob.PrintOut3(iMEM, iEXT);
        }
        catch (PrinterException ex)
        {
            //Perform your desired Error Handling
        }
        finally
        {
            oPrin.Dispose();
        }

        // Save oMEM as Desired, or use it how you see fit.
    }
} 
```

# javascript - 如何使用 knockout.js 为列表中的选定项目动态生成编辑表单

> ID：12058563
> 
> 赞同：2
> 
> 时间：2012-08-21T15:46:51.063
> 
> 标签：javascript, html, knockout.js

我现在可能是个菜鸟，但问题来了。我有一个由 knockoutjs 生成的用户列表。这是我正在使用的基本代码（跳过了所有不必要的细节）：

```
function User(info) {
    this.id = info.id;
    this.firstName = ko.observable(info.firstname);
    this.lastName = ko.observable(info.surname);

    this.fullName = ko.computed(function() {
        return this.firstName() + " " + this.lastName();
    }, this);
}

function HrManagementViewModel() {
    var self = this;
    self.users = ko.observableArray([]);

    $.getJSON("/users", function (data) {
        var mappedUsers = $.map(data, function (item) { return new User(item); });
        self.users(mappedUsers);
    });
} 
```

HTML 代码如下所示：

```
<ul data-bind="foreach: users">
   <li data-bind="text: fullName"></li>
</ul> 
```

我在这里要完成的是，每当单击列表项时，都会显示预先填充了单击用户信息的编辑表单。关于如何实现这一点的任何提示或技巧对你们来说都非常棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:06:20.493

`ko.applyBindings()`函数有一个可选的第二个参数，可用于指定要搜索数据绑定属性的元素。所以你可以做这样的事情：

```
<ul data-bind="foreach: users">
    <li data-bind="text: fullName, click: $parent.showForm"></li>
</ul>
<hr/>
<form id="form">
    <p><input data-bind="value: id"></input></p>
    <p><input data-bind="value: firstName"></input></p>
    <p><input data-bind="value: lastName"></input></p>
</form> 
```

然后，在 HrManagementViewModel 中：

```
self.currentUser = ko.observable(null);

self.showForm = function(user, event) {
    // first argument here is the item, associated with the <li> element
    // second - the event object.

    var previousSelection = self.selectedUser();
    self.selectedUser(user); // Wrap your user viewModel in observable. To change
                             // the input fields bindings just update it 
                             // with a new viewModel and KO will do the rest.
    if (previousSelection == null) {
        var target = document.getElementById('form');
        ko.applyBindings(self.selectedUser, target); 
    }
} 
```

在这里，试一试：http: [//jsfiddle.net/mH3fx/4/](http://jsfiddle.net/mH3fx/4/)

# c# - 为了Hashtable遍历

> ID：12058564
> 
> 赞同：1
> 
> 时间：2012-08-21T15:46:53.373
> 
> 标签：c#, visual-studio-2008, hashtable

`Hashtable`我在我的类中编写了一个简短的静态方法，以按键 (s) 的顺序迭代我拥有的一些s，`string`但我遇到了一个奇怪的编译器错误。这是有问题的方法：

```
public static DictionaryEntry inorderHashtable(Hashtable ht) {
    string[] keys = ht.Keys.Cast<string>().ToArray<string>();
    Array.Sort(keys);

    foreach (string key in keys) {
        yield return new DictionaryEntry(key, ht[key]);
    }
} 
```

这稍后在类中使用，如下所示：

```
foreach(DictionaryEntry dentry in inorderHashtable(myTable)) { /* ... */ } 
```

这是我从 VS2008 得到的错误：`'ns.myclass.inorderHashtable(System.Collections.Hashtable)' cannot be an iterator block because 'System.Collections.DictionaryEntry' is not an iterator interface type`

有什么办法可以解决这个错误？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T15:48:41.320

您的方法需要具有返回类型`IEnumerable<DictionaryEntry>`。

基本上，通过使用`yield return`而不是`return`，您不会返回*one* `DictionaryEntry`，而是（可能）返回*many*。

如果您不确定发生了什么，请参阅[此处](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)和[此处。](http://msdn.microsoft.com/en-us/library/dscyy5s0.aspx)

# unix - Minicom 空字符

> ID：12058565
> 
> 赞同：0
> 
> 时间：2012-08-21T15:46:54.087
> 
> 标签：unix, terminal, serial-port

我正在尝试使用 Minicom 从串口读取数据。我认为当我的程序写入值为 0 的字符时，minicom 会以某种方式忽略数据。我在输出中看不到 0 或 NULL 字符。我不知道如何解决这个问题。

谢谢， 普拉纳夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:12:36.883

为了避免这种情况，我刚刚在我的设备上实现了 XModem 协议，并使用 Minicom Xmodem 接收文件来接收整个数据以及空字符。

xmodem 代码可以在这里找到 - [http://www.codeforge.com/article/21174](http://www.codeforge.com/article/21174)

# c# - .NET BCL 方法的最佳实践

> ID：12058570
> 
> 赞同：0
> 
> 时间：2012-08-21T15:47:09.113
> 
> 标签：c#, .net, wcf, class

需要对以下案例提出一些建议

我有一个子方法，它在以编程方式设置绑定信息和端点信息后初始化服务客户端实例。保存实例的变量是在类级别定义的，子方法只是将它设置为一个新实例。在代码审查会议期间，开发人员建议我们将实例作为子方法的参数传递，并将参数返回给主方法。Whis 是最好的方法

```
private void InstantiateClient()
{
    //do some configurations on bindings and endpoint 
    _ClassLevelInstanceClient = new ServiceClient(bindingInfo, endpointInfo);
} 
```

或者

```
private ServiceClient InstantiateClient(ServiceClient myClientInstance)
{
    //do some configurations on bindings and endpoint
    myClientInstance = new ServiceClient(bindingInfo, endpointInfo);
    return myClientInstance;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:20:18.503

我想我们需要更多地了解您的应用程序才能提供适当的解决方案。最好的方法是从相关开发人员那里找到有关评论的原因。我个人不同意。虽然这是我可能会做的一些事情。

在父/调用方法中：

```
using(ServiceClient client = InstantiateClient()){
//Make service call here
} 
```

在子方法中，

```
private ServiceClient InstantiateClient()
{
    //do some configurations on bindings and endpoint 
    return new ServiceClient(bindingInfo, endpointInfo);
} 
```

同样，如果它在您的应用程序中有意义，我会将 InstantiateClient 设为通用方法，如下所示：

```
private ClientBase<T> InstantiateClient(){
// create and return specific client here
} 
```

# php - 是否可以使用 phpexcel 隐藏 excel 工作表？

> ID：12058572
> 
> 赞同：8
> 
> 时间：2012-08-21T15:47:13.683
> 
> 标签：php, phpexcel

我正在生成一个 excel 模板，我正在使用 4 张工作表，其中 3 张只是用于存储数组中的数据。这些数据正在数据验证列表中使用，因此我为仅用于存储数据的 3 张工作表添加了保护，但我想知道是否可以隐藏它们，以便用户在下载模板时，将无法看到这些他不需要知道存在的床单。

可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T16:02:39.267

```
$objPHPExcel->getSheetByName('Worksheet 1')
    ->setSheetState(PHPExcel_Worksheet::SHEETSTATE_HIDDEN); 
```

或者

```
$objPHPExcel->getSheetByName('Worksheet 1')
    ->setSheetState(PHPExcel_Worksheet::SHEETSTATE_VERYHIDDEN); 
```

**编辑**

您可以使用 Excel 的格式/工作表/隐藏来隐藏整个工作表。这会将工作表的可见属性设置为 xlSheetHidden。但除非您使用密码保护工作簿结构，否则任何人都可以选择格式/工作表/取消隐藏来查看隐藏的工作表。

如果您使用 Excel 97 或更高版本，则可以“非常隐藏”工作表：

*   按 Alt-F11 显示 Visual Basic 编辑器
*   在项目窗口中，双击 Microsoft Excel 对象并选择要隐藏的工作表。
*   按 F4 显示属性框
*   将工作表的 Visible 属性设置为 xlSheetVeryHidden。

现在该工作表不再可以通过“格式/工作表/取消隐藏”访问

当您将 SheetState 设置为 VERYHIDDEN 时，这就是 PHPExcel 所做的更简单的事情

# css - CSS 中的像素密度、视网膜显示和字体大小

> ID：12058574
> 
> 赞同：24
> 
> 时间：2012-08-21T15:47:21.663
> 
> 标签：css, pixel, retina-display

我自己没有 Retina MacBook 来测试这些东西，而且互联网上似乎有很多关于高像素密度显示器上的网页设计的困惑。

现在，我假设带有 Retina 显示屏的 MacBook 上的 WebKit 将页面缩放到大约两倍的大小，因为大多数网页不是为了适应更高的像素密度而构建的？

在我看来，在设计这些或实际上任何类型的显示器时，理想的情况是使用 ems 而不是像素，就像你可以做的那样；

```
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
    body { font-size: 150%; }
}

@media
only screen and (-webkit-min-device-pixel-ratio : 2),
only screen and (min-device-pixel-ratio : 2) {
    body { font-size: 200%; }
} 
```

并且整个页面会相应地缩放。还是会？在 Retina MacBook 上运行的浏览器上的默认字体大小仍然是 16 像素还是更高？因为如果它更高，缩放效果会成倍增加。

我想我的问题是；如果我一直使用 ems，我唯一需要做的就是更改每个设备像素比的字体大小？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-21T19:11:11.717

好的，这是一个非常严重的误解（这很酷！:)），所以这里简要解释一下您可能想要做什么。

首先，任何最近的 iPhone/iPod/iPad 或许多 Android 手机都有 Hi DPI 屏幕，所以你可能已经有一些东西可以测试了。如果没有，而且您是专业人士，那么只需购买 4G iPod Touch。

就其工作方式而言，对于 99% 的东西，您无需执行任何操作。如果它按照您的建议进行，那么大多数网站的大小将是它们应有的大小的四分之一，并且互联网将被破坏。

对于字体、SVG、CSS 框阴影、渐变和任何其他 CSS 绘制的东西，一切都很好。没有任何额外的工作，这些东西看起来很棒。（这就是为什么我们一直在推动 CSS 中的一切。）

对于位图（即 png、jpg、gif），您需要做的就是提供 2 倍分辨率的图像，但大小与正常大小相同。

例如，如果您的页面有一个 100 像素 x 100 像素的图像，您将提供一个 200 像素 x 200 像素的图像，但在 CSS 中或作为 HTML 中的属性指定它是 100 像素 x 100 像素。

这样做的原因是屏幕上的像素与 CSS 像素不同。这是一件好事，因为否则正如我所说，事情会很小。

`px`我想事后看来，在 CSS中将单元称为不同的东西可能会更好，比如 a`dot`或其他东西，但是你去吧。

您有时会看到对设备独立像素的引用，这是 CSS`px`和屏幕上的真实像素之间的区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T17:52:26.047

Retina 显示屏不会将元素的大小加倍。它只影响网络上的图像。

对于图像中的每个“网络像素”，它需要 4 个（*我认为*）“屏幕像素”，因此图像被拉伸以填充这些额外的像素空间，使它们在视网膜显示器上看起来不那么清晰。图像应该以更高的 DPI 导出，并通过媒体查询或 Javascript 提供给 Retina 显示器。

文本、CSS 效果、画布、SVG 矢量等不受视网膜显示的直接影响。

# java - Play2 - 子域

> ID：12058575
> 
> 赞同：1
> 
> 时间：2012-08-21T15:47:27.070
> 
> 标签：java, routing, playframework, playframework-2.0, subdomain

我想用子域创建一个像 stackexchange 这样的网络。

例如

```
subdomain1.test.com
subdomain2.test.com
subdomain3.test.com
subdomain4.test.com 
```

我还希望在一个应用程序中拥有所有网站，这样我就可以更轻松地扩展和服务它们。

我如何在 play2 中做到这一点？

我可以指定一个子域`routes`吗？

伪代码

```
GET     subdomain1/                           controllers.Application.index()
GET     subdomain2/                           controllers.Application.index() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:26:03.793

它不起作用：如果`router`包含两个具有相同类型和目标操作的路由，它将仅首先使用。对于最快的解决方案，您可以只创建一个包装方法，它将执行您需要的操作并在视图/控制器级别使用它们：

`route`

```
GET   /home    controllers.Application.index 
```

`Application controller`

```
public static String linkMeta(play.api.mvc.Call path) {
    return "http://meta.domain.tld" + path;
} 
```

模板样本：

```
<a href='@Application.linkMeta(routes.Application.index)'>Absoulte URL link to meta's index</a>
URL: http://meta.domain.tld/home

<a href='@routes.Application.index'>Relative URL to meta's index</a>
URL: /home 
```

# java - 需要为 LocalDate 的日期对象的正确类型

> ID：12058577
> 
> 赞同：0
> 
> 时间：2012-08-21T15:47:31.033
> 
> 标签：java, architecture, jodatime, service-layer

如果我想将 JodaTime 库合并到我的 MVC 项目中。为我的 bean 编写 setter/getter 方法的最佳方法是什么？我目前已经将我的局部变量绑定到 JodaTime 中的 LocalDate 对象，但这可能不是一个好主意（如果其他人使用这个 bean，他们可能无法使用 Joda 库）。我应该使我的局部变量成为`java.util.Date`对象吗？如果是这样，我是否会将这些`java.util.Date`对象转换为控制器或服务层中的 JodaTime 的 LocalDate （我的假设是服务层，因为这是我的业务逻辑当前所在的位置）？

```
public class Survey {
    LocalDate startdate;
    LocalDate enddate;

    public void setStartDate(LocalDate startDate) {
        this.startDate = startDate;
    }

    public LocalDate getStartDate() {
         return this.startDate;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:54:58.477

> （如果其他人使用这个 bean，他们可能无法使用 Joda 库）

你现在有理由相信他们做不到吗？

如果这是一个内部项目，想必你应该能够找出他们是否*可以*利用 Joda Time。

如果可能的话，我*强烈*敦促您端到端地坚持使用 Joda Time。每次转换都会在编码和（更重要的是）人类对您尝试表示的数据的理解方面引入另一个潜在错误。

# android - 警报未决警报不取消

> ID：12058581
> 
> 赞同：5
> 
> 时间：2012-08-21T15:47:47.837
> 
> 标签：android, android-pendingintent

我已经阅读了 Stackoverflow 上的许多问题和答案，其中许多只是强调`.cancel()`了特殊的唯一 ID。但是，现在无论我尝试了多少次，我都无法取消它。

* * *

我的唯一ID

`final static int RQS_1 = 1337;`

* * *

我的 setAlarm 函数。pickTime 是当前 Activity，timesUp 是另一个`Service`在时间到时显示 toast 的类。

```
Intent intent = new Intent(pickTime.this, timesUp.class);
PendingIntent timesUpIntent = PendingIntent.getService(pickTime.this, RQS_1, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(),
                 timesUpIntent);
alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(), timesUpIntent); 
```

* * *

我的取消警报功能

```
Intent intent = new Intent(this, pickTime.class);
PendingIntent timesUpIntent = PendingIntent.getBroadcast(this, RQS_1, intent, 0);
        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        if (timesUpIntent != null) {
            alarmManager.cancel(timesUpIntent);
            timesUpIntent.cancel();
            Toast.makeText(getApplicationContext(), "Alarm is cancelled",
                    Toast.LENGTH_SHORT).show();
                    } else {

            Toast.makeText(getApplicationContext(), "Unable to stop timer",
                    Toast.LENGTH_SHORT).show();
        } 
```

* * *

我的时代**服务**

```
public class timesUp extends Service {

    @Override
    public void onCreate() {

        // TODO Auto-generated method stub

        Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG)
                .show();

    }

    @Override
    public IBinder onBind(Intent intent) {

        // TODO Auto-generated method stub

        Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG)
                .show();

        return null;

    }

    @Override
    public void onDestroy() {

        // TODO Auto-generated method stub

        super.onDestroy();

        Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG)
                .show();

    }

    @Override
    public void onStart(Intent intent, int startId) {

        // TODO Auto-generated method stub

        super.onStart(intent, startId);

        Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG)
                .show();

    }

    @Override
    public boolean onUnbind(Intent intent) {

        // TODO Auto-generated method stub

        Toast.makeText(this, "MyAlarmService.onUnbind()", Toast.LENGTH_LONG)
                .show();

        return super.onUnbind(intent);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T04:27:05.920

好吧，要取消警报，您必须创建与启动它时创建的相同的 PendingIntent。你正在做的同时开始，

```
Intent intent = new Intent(pickTime.this, timesUp.class);
PendingIntent timesUpIntent = PendingIntent
                                .getService(pickTime.this, RQS_1, intent, 0); 
```

您在取消时正在做，

```
Intent intent = new Intent(this, pickTime.class);
PendingIntent timesUpIntent = PendingIntent
                                        .getBroadcast(this, RQS_1, intent, 0); 
```

> 他们是一样的吗？

不，它们不一样。您正在创建`PendingIntent`for`Service`开始并尝试使用不同`PendingIntent`的取消`BroadCast`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:33:15.957

我怀疑`PendingIntent.getService(pickTime.this, RQS_1, intent, 0);`代码中方法的最后一个（第 4 个）参数有问题。

尝试使用`PendingIntent.FLAG_CANCEL_CURRENT`而不是 0，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:11:15.703

不确定这是否是唯一的问题，但

```
@Override
public void onStart(Intent intent, int startId) {

    // TODO Auto-generated method stub

    super.onStart(intent, startId);

    Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG)
            .show();

}**strong text** 
```

onStart 已弃用。对于服务使用 onStartCommand()。

请参阅开发人员文档中的示例：

[安卓服务](http://developer.android.com/reference/android/app/Service.html)

我在我的应用程序音频控制中使用了类似的东西，它运行良好。

```
Intent intent = new Intent(getApplicationContext(), QuickReceiver.class);
intent.putExtra("extraKeyHere", "some extra if you like");

PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(),
    1137, intent, PendingIntent.FLAG_CANCEL_CURRENT);

AlarmManager al = 
    (AlarmManager)getApplicationContext().getSystemService(Context.ALARM_SERVICE);

al.setRepeating(AlarmManager.RTC_WAKEUP, endCal.getTimeInMillis(), 
    AlarmManager.INTERVAL_DAY, pi); 
```

这只是创建一个将触发广播接收器（QuickReceiver.class）的意图。

```
public class QuickReceiver extends BroadcastReceiver
{   
@Override
public void onReceive(Context context, Intent intent)
{   
        Bundle extras = intent.getExtras();
        if(extras != null)
        {   
        String endProfile = extras.getString("extraKeyHere");

            Intent i = new Intent(context, QuickReceiver.class);

            PendingIntent pi = PendingIntent.getBroadcast(context,     
            1137, i, PendingIntent.FLAG_CANCEL_CURRENT);

            AlarmManager al =                                       
                 (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);

            al.cancel(pi);
        }
    }
} 
```

记下我对两个pendingIntents 都使用了“getBroadcast()”。您可以从广播开始您的服务（当然使用 onStartCommand() :)）并在那里做更多的工作。

# web-services - 保护请求的最佳方式（与 Salesforce 服务器之间）

> ID：12058582
> 
> 赞同：0
> 
> 时间：2012-08-21T15:47:52.343
> 
> 标签：web-services, authentication, iis, salesforce, security

此问题不一定限于 Salesforce。

我在我们公司的服务器上有一个基于订单信息生成文档的网络服务。我在 Salesforce 中创建了页面，以在查询字符串中动态创建包含必要订单信息的链接。

例子：`https://www.mysite.com/documents?orderid=123&documentid=1`

然后，我的 Web 服务从 Salesforce API（名字和姓氏、邮寄地址等）请求订单的详细信息，并返回填充的文档。

我正在考虑两种方法来确保这一点：

1.  [将我的 Web 服务中的Salesforce IP 范围](https://help.salesforce.com/apex/HTViewSolution?language=en_US&id=000003652)和我公司在 Salesforce 中的IP列入白名单。
2.  在初始查询字符串中填充所有必要信息。例子：`https://www.mysite.com/documents?documentid=1&firstname=John&lastname=Smith&address=123%20Main`

哪种方式是“最好的”？我应该两者都做吗？有一个更好的方法吗？

# java - 用于对 ASM 代码执行特定“数据分析”的 Java 工具

> ID：12058583
> 
> 赞同：-5
> 
> 时间：2012-08-21T15:48:00.563
> 
> 标签：java, bytecode, data-analysis, java-bytecode-asm

我需要使用 Java 类或可在 Eclipse 上使用的任何东西对 ASM 代码进行特定的“数据分析”。具体来说，我需要用这个顺序确定一个变量的三个步骤：1）使用；2）初始化；3) 删除。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:50:56.467

之前你不能`Use`变量`Initialization`。你不能`Delete`变量。

如果你想分析字节码，我建议使用 ObjectWeb 的 ASM 库。

# django - Django TastyPie 资源更新错误

> ID：12058585
> 
> 赞同：1
> 
> 时间：2012-08-21T15:48:03.003
> 
> 标签：django, tastypie

我正在使用 JQuery 的移动客户端使用美味的 API 更新 Django 模型。当我发送 PUT 请求时，我收到错误消息`Column 'created' cannot be null`。

'created' 列在我的模型中要更新，它是类型

```
models.DateTimeField(auto_now_add=True). 
```

使用tastepie API 更新时，更新会导致此列设置为`null`引发错误。

可以直接使用django表单成功更新模型。该错误仅由 API 更新调用引起。不知道可能是什么问题。

我尝试将字段更改为 ( `default=datetime.datetime.now, editable=False, blank=True`) 代替，`auto_now_add`但它仍然给出了相同的错误。让我知道是否有人知道问题可能是什么。

以下是部分资源代码：

```
class AbcResource(ModelResource):

    def obj_update(self, bundle, request=None, **kwargs):
        logger.debug("Update called")
        res = super(AbcResource, self).obj_update(bundle, request)
        signals.abc_updated.send( sender=request, abc=res.obj, user=request.user )
        return res 
```

这是模型的一部分：

```
class Abc( models.Model ):
    created = models.DateTimeField(_('created'), auto_now_add=True) 
```

该模型没有自定义保存方法。

Hers 是发送 PUT 请求的代码：

```
var url = root + "/api/v1/abc/" + selected_abc + "/" + "?user_key=" + user_guid + "&user_name=" + username + "&format=json";
var abc_data = xmlRequest(url, false);
abc_data["field"] = field_value;
var request = $.ajax({
                     url: url,
                     type: 'PUT',
                     contentType: 'application/json',
                     data: JSON.stringify(abc_data),
                     dataType: "application/json",
                     processData: false
                     })
request.done(function(msg) {
             console.log("Status update pass : " + msg);
             });

request.fail(function(jqXHR, textStatus) {
             console.log("Status update fail : " + jqXHR.responseText);
             console.log(jqXHR);
             }); 
```

是否需要更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:40:20.463

您的模型中是否有除 DateTimeField 之外的其他字段？使用 PUT 命令将完全更改您的数据，因此您需要一个完整的条目。如果要部分更新字段，请尝试 PATCH 命令 [http://django-tastypie.readthedocs.org/en/latest/interacting.html#partially-updating-an-existing-resource-patch](http://django-tastypie.readthedocs.org/en/latest/interacting.html#partially-updating-an-existing-resource-patch)

# php - HTML 和 PHP：在 IE 8 上按“Enter”时输入表单无法正常工作

> ID：12058586
> 
> 赞同：0
> 
> 时间：2012-08-21T15:48:06.447
> 
> 标签：php, html, input, submit, enter

这是一个带有输入行和输入按钮的简单表单：

```
<form name="input_form" action="process_data.php" method="post" >
    <input type="text" name="input" size="100"></input>
    <input type="submit" name="input_button" style="height: 25px;" />
</form> 
```

如果我按“Enter”，在谷歌浏览器、IE 9 等下一切正常。

但是，在 IE 8 下我需要按下提交按钮。它也会对“Enter”做出反应，但不是应有的反应。大概它不会用输入的文本填充 $_GET 变量。

代码必须如何修改（尽可能简单）才能在所有浏览器上正常工作？

ED：我问：

```
isset($_POST['input_button']) 
```

但在 IE 8 下按 ENTER 时没有设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:22:27.530

如果`submit`输入没有值，则不会发布。尝试这个：

```
<form name="input_form" action="process_data.php" method="post" >
    <input type="text" name="input" size="100" />
    <input type="submit" name="input_button" value="Submit!" style="height: 25px;" />
</form> 
```

# firefox - CSS 媒体查询、Opera 和 Firefox 问题

> ID：12058588
> 
> 赞同：1
> 
> 时间：2012-08-21T15:48:13.290
> 
> 标签：firefox, css, opera, media-queries

我在我的网站上使用了**Ubuntu**字体，当我这样做时 Opera 不会呈现页面：

```
html {
  font-family: 'Ubuntu', sans-serif;
} 
```

所以我必须做 css 媒体查询：

```
/*Chrome*/
@media not all and (-webkit-min-device-pixel-ratio:0) {  
  html,
  button,
  input,
  select,
  textarea {
    font-family: 'Ubuntu',sans-serif;
  } 
}

/*Safari*/
@media screen and (-webkit-min-device-pixel-ratio:0) {
  html,
  button,
  input,
  select,
  textarea {
    font-family: 'Ubuntu',sans-serif;
  } 
}

/*Opera*/
@media not screen and (1) {
  html,
  button,
  input,
  select,
  textarea {
    font-family: sans-serif;
  } 
} 
```

问题是现在我不知道如何为 Firefox 实现这个。搜索互联网并没有给我答案。

有任何想法吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:51:10.473

这样：

```
@media not all and (-moz-windows-compositor) { ... } 
```

在这里查看更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:05:47.933

使用媒体查询`-moz-windows-compositor`，您只是针对 Windows/Linux 上的 Firefox，对于各种其他操作系统（如果您在那里的字体也有问题），您需要

```
 @media not all and (-moz-device-pixel-ratio) {…} 
```

# c - 使用 int 从 getword 返回一个单词；binsearch 中可能出现的拼写错误

> ID：12058590
> 
> 赞同：0
> 
> 时间：2012-08-21T15:48:15.920
> 
> 标签：c, return, kernighan-and-ritchie

我终于完成了 K&R，但遇到了另一个不清楚的代码。第 6.3/6.4 章

1.  参考getword。它怎么能返回int，这应该是一个词。我知道它返回 word[0] 是第一个字母。但是在我看来，如果我想返回一个词，我会引入类似 char *getword 的东西。我对吗？
    int 如何表示它是一个单词？

2.  还是关于getword：假设我输入“in”并在空格后按回车键。getword 读取 'i' 因为它不是空格，而 isalpha 所以第一个 if 被省略。那会发生什么？

3.  我在 binsearch 中标记了该行。你不认为它应该是高 = 中 - 1；那里？

```
int getword(char *word, int lim) {
    char *w = word;
    int c;

    while (isspace(c = getch()))
    {}
    if (c != EOF) {
        *w++ = c;
    }

    if (!isalpha(c)) {
        *w = '\0';
        return c;
    }
    for ( ; --lim > 0; w++) {
        if (!isalnum(*w = getch())) {
            ungetch(*w);
            break;
        }
    }
    *w = '\0';
    return word[0];
} 
```

* * *

```
/* binsearch: find word in tab[0]...tab[n-1] */
struct key *binsearch(char *word, struck key *tab, int n)
{
    int cond;
    struct key *low = &tab[0];
    struct key *high = &tab[n];
    struct key *mid;
    while (low < high) {
        mid = low + (high-low) / 2;
        if ((cond = strcmp(word, mid->word)) < 0)
            high = mid; /* [3] */
        else if (cond > 0)
            low = mid + 1;
        else
            return mid;
    }
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:57:47.510

`high = mid`是正确的。不包括右边界。请注意，最初`high = &tab[n]`，即它指向`tab`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:17:06.113

你是对的，如果函数会返回一个单词，那就是`char *getword()`. 然而，根据 K&R

> 函数值是单词的第一个字符，或文件结尾的 EOF，如果不是字母，则为字符本身

返回 an`int`是可以的，就像在 C 中一样，一个字符就像一个`int`只有 8 位的字符，在 [-128, +127] 范围内。

那么这个词在哪里返回？
在`char *word`给定的 as 参数中。最初`char *w`获取指针的副本`word`，然后将读取的字符设置到 指向的内存中`w`。

在`"in "`输入缓冲区中，`isspace`将返回 false，并`c`分配非空格字符。然后，`*w++`将该字符放在单词 ( *i*`w` ) 的位置 [0] 处，使指针 ( ) 递增`++`。`word[0]`包含“我”。

该`!isalpha`测试是错误的，因此该部分被跳过。

然后从输入中读取字符并将其存储到下一个`w`位置，直到读取到非字母数字条目（或`lim`达到限制） - 在这种非字母数字情况下，读取的字符实际上被放回输入缓冲区，并且`w`-包含不需要的字符 - 不增加（由于`break`）。然后以下内容`*w = '\0'`覆盖该非字母字符，并“关闭”C 字符串（在 C 字符串中以具有 0 值的字符结尾）。

在您的示例中，将 'n' 存储在 中`w`，递增`w`，然后将 '' 存储到`w`并执行代码`!isalnum`，即中断循环。然后由于`w`在存储 ' ' 后没有增加，所以`*w = '\0'`替换空格，并“关闭”字符串。

[*另一半问题已经有人回答*]

# unit-testing - Ruby - 使用 TDD/BDD 进行软件测试的实用方法

> ID：12058594
> 
> 赞同：1
> 
> 时间：2012-08-21T15:48:29.010
> 
> 标签：unit-testing, testing, tdd, integration-testing, bdd

尽管 TDD/BDD 是理想的并且由于时间有限，您不可能总是拥有 100% 的测试覆盖率并且总是在实现功能之前编写测试，那么，您有什么方法可以在紧迫的时间安排下拥有一个经过良好测试的项目？

我最初的想法是：

1.  使用 RSpec 进行验收测试
2.  发展
3.  返回 1

在验收测试/开发周期的几次迭代之后，我将添加

1.  集成测试

最后运送给QA进行手动测试，如果发现错误，则添加

1.  单元测试

您认为上述工作流程合理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T05:22:03.210

*免责声明：我被测试感染了*

这是一方面的信心和另一方面的短期交付速度之间的滑动比例。你不能两者兼得。向右滑动可以加快发货速度。最佳位置取决于您的背景（团队技能、项目不确定性/风险、组织文化、日程安排等）

至于上面的流程大纲，我可能读错了。看来您正在削减单元测试以提高速度。即不使用TDD 进行ATDD。

如果那是您前进的方向，我会看到以下风险

*   验收测试很繁琐：它们会告诉你某些东西失败了——但**对缺陷隔离没有帮助**。同一个验收测试可能因多种原因而失败/多个系统测试可能因同一个错误而失败。您可能会浪费大量时间来追踪原因。有针对性的单元测试应该立即准确地告诉您问题出在哪里。随着时间的推移，调试验收测试失败所花费的时间可能会超过不编写重点测试所节省的时间
*   验收测试很慢：与单元测试相比，您只能在 5 分钟内运行少数（乐观的）大块测试。您可以同时运行数千个微测试。这很有帮助的原因是单元测试会给你**更快的反馈**，更接近破坏某些东西的代码更改。由于它们需要时间来运行，因此通常的趋势是运行验收测试的次数最少。花费更多时间来确定破坏应用程序的确切代码更改。
*   验收测试并不彻底：不能涵盖每一个微小的边缘情况，因为它会导致不可行的测试套件执行时间。虫子可以在那些未经测试的地方繁殖。

最后，恕我直言验收/系统测试应该是最后一道防线；不是第一个。我见过团队在代码质量问题上苦苦挣扎，他们对代码质量并不真诚，而是依靠系统测试来捕捉一切；如上所述，这是在自欺欺人。TDD 对代码质量有更直接的影响。ATDD 只会告诉您某些内容已损坏/客户“不可接受”。也就是说，根据您团队中纪律+经验的正确组合，它可能在短期内奏效......只是我不会打赌。

如果您想减少单元测试所花费的时间，请与团队坐下来定义关键/重点领域/模块。使用 TDD 完成这些工作。

# java - 在没有 ORM 的情况下实现实体类之间的关系

> ID：12058595
> 
> 赞同：1
> 
> 时间：2012-08-21T15:48:34.263
> 
> 标签：java, database, design-patterns, dao

我有一些实体类与其他实体具有一对一和/或一对多的关系。

我尝试制作一个非常通用的示例来反映我的情况......假设我将以下表存储在数据库中（不允许空值）：

```
 operations (ID, workerID, customerID, etc_etc)
      workers (ID, email, password, etc_etc)
    customers (ID, etc_etc)
 mobilePhones (workerID, phoneNumber) 
```

应该很清楚的是：

*   **1 个**操作*只有* **1 个**工人和**1 个**客户。
*   **1**位客户*至少有* **1 个**手机号码。

因此我有以下实体类：

```
public class Customer {
    private int id;
    //other fields, then constructors, getters and setters
}

public class Worker {
    private int id;
    //other fields
    private String[] mobilePhones;
} 
```

正如我在标题中已经说过的，**我不能使用**Hibernate 之类的 ORM，所以我将使用 DAO。
*{**编辑：**我应该知道你很想知道为什么我不能使用 ORM ......好吧，正如我在下面的评论中写的：*这是一项作业（软件工程考试的项目）*。}*

现在，我想我不会有任何问题，它可以通过从所有电话号码中选择等于实际工人 ID 的`WorkerDAO`方式轻松管理一对多关系。`mobilePhones``workerID`

对我来说真正的问题是如何管理 an`Operation`与其关联`Worker`和`Customer`. 如果我想避免浪费内存，我应该这样设计我的`Operation`实体：

```
public class Operation { // here I have some doubts
    private int id;
    private int workerId;
    private int customerId;
    //other fields
} 
```

或者可能是这样的：

```
public class Operation { // here I have some doubts
    private int id;
    private Worker worker;
    private Customer customer;
    //other fields
} 
```

?

后者似乎更*面向对象*，但有一个微不足道的含义：工作者和客户的实例必须在内存中，即使客户`Operation`可能不需要它们。

更糟糕的是：如果`OperationDAO`将 worker 和 customer 设置为新的 Worker 和 Customer 实例，这将导致在内存中保留*多个引用同一个 worker/customer 的实例*（例如，由同一个 worker 执行的两个操作）。除了内存浪费之外，这肯定会导致*数据不一致*（例如，一个实例被修改而没有更新其他实例）。

为了避免这种情况，应该引入一些知道当前加载了哪些实例的类（例如，使用类似 , 等的东西`List<Worker>`）`List<Customer>`......老实说，这在我看来是一种矫枉过正。

我还认为我可以尝试实现某种*惰性获取*，例如仅在第一个请求时设置工作实例，但我仍然需要一些类来跟踪内存中的内容以及必须查询的内容；我什至不知道这个类是否应该与*数据访问逻辑*或*业务逻辑*相关（我猜是前者，但仍然不确定）。

无论如何，没有理由实现所有这些，因为我不需要缓存系统（而且我觉得它看起来很像那样）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:16:24.783

您不能使用框架，但可以使用框架本身使用的模式。因此，我向您推荐这些基于[EAA 的 P 的解决方案。马丁·福勒](http://martinfowler.com/eaaCatalog/)

1.  您可以使用您的第一个选项**（带有 workerId 和 customerId 字段的操作）**并为每个实体（操作、工人、客户）使用[行数据网关。](http://martinfowler.com/eaaCatalog/rowDataGateway.html)[现在，如果内存是一个问题并且您的模型需要它，请使用Identity Map](http://martinfowler.com/eaaCatalog/identityMap.html)控制所有 Worker 和 Customer 加载的实例，并避免重新加载。

2.  您可以使用您的第二个选项**（在操作中有一个工作人员和客户实例）**并使用带有[延迟加载的](http://martinfowler.com/eaaCatalog/lazyLoad.html)[表数据网关](http://martinfowler.com/eaaCatalog/tableDataGateway.html)仅在需要时加载实例。

担心是否加载多个实例取决于您正在构建的应用程序的类型和实例的范围；例如，如果你是一个创建基于 CRUD 的应用程序，你的实例通常会有一个请求范围，所以使用第二种方法，不要担心内存浪费或数据不一致。

建议：使用接口来定义你的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:45:43.580

我自己回答，呵呵。

参考我在 davidmontoyago 答案的评论中解释的问题，我认为实现我的目标的最简单方法可能如下：

*   有一个类来跟踪已从数据库加载并在内存中的实例。这可能是一种实用程序类，我的意思是私有构造函数和所有静态方法。
*   确保所有返回实体类实例的 DAO 检查请求的实例是否在缓存中；如果是，他们返回该实例，否则他们从数据库加载它并将其添加到缓存中。

我尝试绘制一些代码：

```
/* The class that will cache istances. */
static final class Cache { // package-private, so that only DAOs can see it.
    private static final int CAPACITY = 100; // max 100 istance per entity

    /* I will track each instance by its id, that is an Integer */
    private static Map<Integer,Worker> workers;
    private static Map<Integer,Customer> customers;
    private static Map<Integer,Operation> operations;

    private Cache() {} // I don't really need to istantiate this class

    // SOME OPERATIONS

    public static boolean isCached(Worker w);
    public static boolean isCached(Customer c);
    public static boolean isCached(Operation o);

    public static Worker getWorker(int id);
    public static Worker getCustomer(int id);
    public static Worker getOperation(int id);

    public static void addWorker(Worker w);
    public static void addCustomer(Customer c);
    public static void addOperation(Operation o);

}

class DAOWorkerImpl implements DAOWorker {
    public find(int id) {
        Worker w = null;
        if (Cache.isCached(id))
            w = Cache.getWorker(id);
        else {
            //retrieve worker
            Cache.addWorker(w);
        }
        return w;
    }
} 
```

你怎么看待这件事？它看起来很简单，它应该完成它的工作。

顺便说一句，在编写这段代码时，我认为最好避免编写`Cache`类并让管理所有到它们各自的 DAO（例如`DAOWorker`管理内存中的实例`Worker`等）。

唯一不能说服我的是，这可能会破坏[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)......你怎么看？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:27:48.893

通常我更喜欢

```
public class Operation { 
    private int id;
    private Worker worker;
    private Customer customer;
    //other fields
} 
```

因为这更加面向对象并且使获取更容易。但是由于您与ORM特别遥远（我不知道为什么？？？）所以看起来

```
public class Operation { 
    private int id;
    private int workerId;
    private int customerId;
    //other fields
} 
```

成为更好的选择，您可以在需要时加载对象。

ORM 本来是首选... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T16:31:43.957

我会使用 Spring JDBC 或模板方法模式的其他一些实现。每个实体 1 个 DAO 类。关于事务问题，您可以通过在 JDBC 连接上调用 setAutoCommit(false) 并处理所有查询的结果来简单地自己管理它们。

祝你重新发明轮子好运：]

# java - 为什么单击按钮后我的应用程序会关闭？

> ID：12058597
> 
> 赞同：0
> 
> 时间：2012-08-21T15:48:34.513
> 
> 标签：java, android

我正在为 android 开发一个应用程序，这是一个测验。在页面上有两个按钮。一种有效，一种无效。当我打开模拟器并按下按钮时，应用程序关闭并出现此消息：“应用程序已意外关闭”我不知道我错过了什么。这是清单和三个活动： 这是带有两个按钮的 Java 文件：

```
package com.saifandvarun.quizofidiocy;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.app.Activity;
import android.content.Intent;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle iLikeTennis) {
        super.onCreate(iLikeTennis);
        setContentView(R.layout.activity_main);

        Button failstart = (Button) findViewById(R.id.loser);
        failstart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.saifandvarun.quizofidiocy.FAILSCREEN"));
            }
        });

        Button truestart = (Button) findViewById(R.id.the_quiz);
        truestart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.saifandvarun.quizofidiocy.FIRSTQUESTION"));
            }
        });

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }
} 
```

这是匹配的 xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/home_back" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="22dp"
        android:text="Welcome To The Quiz Of Idiocy."
        android:textColor="#DF013A"
        android:textSize="21dp"
        android:textStyle="bold|italic" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="34dp"
        android:text="The rules are simple, get the question right, you move on, get it wrong, you&apos;re an idiot. (Oh yeah, and you lose)"
        android:textSize="20dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/the_quiz"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="102dp"
        android:text="Just A Pointless Button..."
        android:textSize="25dp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/loser"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="START!!"
        android:textColor="#00FF00"
        android:textSize="34dp"
        android:textStyle="bold|italic" /> 

</RelativeLayout> 
```

这是工作按钮导航到的 java 文件：

```
package com.saifandvarun.quizofidiocy;
import android.app.Activity;
import android.os.Bundle;

public class Firstquestion extends Activity {

    @Override
    protected void onCreate(Bundle iLikeCricket) {
        // TODO Auto-generated method stub
        super.onCreate(iLikeCricket);
        setContentView(R.layout.firstquestion);
    }
} 
```

这是匹配的xml布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</RelativeLayout> 
```

这是java非工作按钮应该导航到的文件：

```
package com.saifandvarun.quizofidiocy;
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Failscreen extends Activity {

    MediaPlayer whawHawha;

    @Override
    protected void onCreate(Bundle iLikeTabletennis) {
        // TODO Auto-generated method stub
        super.onCreate(iLikeTabletennis);
        setContentView(R.layout.failscreen);
        MediaPlayer.create(Failscreen.this, R.raw.lose_sound);
        whawHawha.start();

        Button retry = (Button) findViewById(R.id.tryagain);
        retry.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("android.intent.action.MAIN"));
            }
        });
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        whawHawha.release();
    }
} 
```

以及相应的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="LOSER!!! You lost, Idiot!"
        android:textColor="#ff0000"
        android:textSize="70dp"
        android:textStyle="bold" >
    </TextView>

    <Button
        android:id="@+id/tryagain"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="22dp"
        android:text="Try Again???"
        android:textColor="#ffffff"
        android:textStyle="bold|italic" >
    </Button>

</RelativeLayout> 
```

最后这里是主要的：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.saifandvarun.quizofidiocy"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Failscreen"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.saifandvarun.quizofidiocy.FAILSCREEN" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Firstquestion"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.saifandvarun.quizofidiocy.FIRSTQUESTION" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我不知道我错过了什么。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:55:11.023

你的问题是你从来没有初始化你的`MediaPlayer`in `Failscreen`。它正在抛出一个`NullPointerException`，`onCreate()`这就是为什么它说它无法创建`Activity`.

```
public class Failscreen extends Activity {
    MediaPlayer whawHawha;//please initialize me before you attempt to call me!

    @Override
    protected void onCreate(Bundle iLikeTabletennis) {
        // TODO Auto-generated method stub
        super.onCreate(iLikeTabletennis);
        setContentView(R.layout.failscreen);
        MediaPlayer.create(Failscreen.this, R.raw.lose_sound);

        whawHawha.start(); //I am causing a NullPointerException
        //because I am never initialized!

        Button retry = (Button) findViewById(R.id.tryagain);
        retry.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("android.intent.action.MAIN"));
            }
        });
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        whawHawha.release();
    }
} 
```

# facebook-graph-api - 在开放图中使用访问令牌获取特定 Facebook 用户的帖子/提要

> ID：12058599
> 
> 赞同：3
> 
> 时间：2012-08-21T15:48:36.307
> 
> 标签：facebook-graph-api

我正在尝试在开放图中使用访问令牌获取特定 facebook 用户的帖子（提要）。用户是我的朋友，她通过口头承诺同意了这个操作。

我有令牌：

> `https://graph.facebook.com/oauth/access_token?client_id=xxxxx&client_secret=xxxxx&grant_type=client_credentials`

但我看不到所有帖子（只是公共状态消息）。

```
Request => https://graph.facebook.com/100001958850690/posts?access_token=xxxxx&q=facebook
Response => {
   "error": {
      "message": "(#606) actor_id (100001958850690)  must be a connection of the viewer",
      "type": "OAuthException",
      "code": 606
   }
} 
```

有没有办法可以阅读特定/同意用户的公开帖子？

# iis-7 - 为什么 IIS 需要声明 mime 类型？

> ID：12058601
> 
> 赞同：5
> 
> 时间：2012-08-21T15:48:41.570
> 
> 标签：iis-7, web, mime-types, mime, iis-express

在我的一项任务中，我试图渲染一个 SVG 图像。我花了一些时间才看到一个链接，该链接指出，为了让 IIS express 呈现 SVG 图像，您必须在 web.config 文件中包含以下代码

```
<staticContent>
    <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
</staticContent> 
```

有效。但我不明白为什么/如何？以前我认为服务器应该发送正确的 Content-Type 标头。但我的 svg 代码是用 Javascript 编写的。我认为（可能是错误的）IIS 只将 HTML 文件发送到客户端，并且这些 HTML 文件在标题中链接了 Javascript。那么，这是否意味着 IIS 也在扫描与 HTML 相关的所有 javascript 文件？这似乎有点难以置信。如果我的 HTML 主文件中有 10 个 javascript 文件，其中一个有 SVG 文件，这是否意味着 IIS 将扫描所有这些文件，然后发现 SVG 丢失？这是它的工作原理吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T15:56:54.640

当您的浏览器点击一个 URL 时，它最初只下载 HTML。对于每个链接的文件（Javascript、图像、CSS、SVG 等），浏览器都会向服务器发出单独的请求。正如您所指出的，IIS 不会提供这些文件，除非它识别出 MIME 类型。

要回答您的问题，不，这不是它的工作原理。IIS 不*扫描*HTML 文件，它只是被动响应来自客户端（浏览器）的请求。它是解析 HTML 和 Javascript 并执行 JavaScript 的浏览器，根据需要额外往返返回服务器以获取链接资源。

*编辑*

IIS 的 MIME 类型有两个目的：

1.  限制对服务器资源的访问。如果客户端请求 Web.config 文件，那么 IIS 当然应该阻止该请求，因为该文件可能包含密码等敏感信息。
2.  跟踪如何处理每种文件类型。例如，HTML 文件一般应该只是发送，而 ASPX 文件则需要先经过 ASP.Net 处理，然后再发送。

# c++ - 如何在成员函数上使用 std::for_each

> ID：12058603
> 
> 赞同：3
> 
> 时间：2012-08-21T15:48:44.753
> 
> 标签：c++, stl

我正在尝试采用更具“功能性”的 STL 编程风格，并采用以下简化案例

```
class Widget;

class Zot
{
public:
  std::vector<Widget> Widgets;

  void ProcessAWidget(int x, Widget w) { ... }

  void Process()
  {
      int ctx=123;

      std::for_each(Widgets.begin(), Widgets.end(), 
           std::bind(&Zot::ProcessAWidget, this, ctx, _1));
   }
}; 
```

有没有更好的方法来编写 for_each 调用的最后一个参数？

特别是必须明确提及这感觉是“错误的”，并且放弃类限定符也会很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T15:52:42.767

如果编译器支持 C++11 lambda：

```
std::for_each(Widgets.begin(),
              Widgets.end(),
              [&](Widget& a_w) { ProcessAWidget(ctx, a_w); }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T15:51:30.893

Lambdas 来拯救：

```
std::for_each(Widgets.begin(), Widgets.end(),
              [=](Widget & w) { ProcessAWidget(ctx, w); }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T15:52:26.073

在 C++11 中，您可以将 lambda 函数与 std::for_each 一起使用，这通常使代码比您必须使用 std::bind 玩的游戏更具可读性。

# backbone.js - 骨干木偶：templateHelpers 和 itemViewOptions

> ID：12058610
> 
> 赞同：11
> 
> 时间：2012-08-21T15:49:03.393
> 
> 标签：backbone.js, marionette

我对 Backbone Marionette 和 ItemView 渲染有疑问。我需要将一个值从复合视图传递给它的每个项目视图。该值正确包含在项目视图的选项数组中，但是，我无法从 templateHelpers 方法访问它。

所以我试图将它设置为我的视图的值，但是当我渲染数组时它返回一个“未定义”的值。

**复合视图**

```
var TableView = Backbone.Marionette.CompositeView.extend({
....
    itemViewOptions: {
        foo: "bar",
    }, 
```

**项目视图**

```
var RowView = Backbone.Marionette.ItemView.extend({

template: RowTemplate,
tagName: "tr",
foo: "",

initialize: function(){

    this.foo = this.options.foo;              
},

templateHelpers: {  

     foo: function(){
         return this.foo;
     }

}, 
```

我做错了什么？如何访问该值并将其提取到模板中？谢谢你。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-22T02:51:59.630

在`templateHelpers`函数中，`this`变量是从`serializeData`方法返回的对象。那么，要进入`itemViewOptions`，`templateHelpers`您需要修改`serializeData`项目视图上的方法：

```
 ItemView.extend({

  // ...

  serializeData: function(){
    // call the super method
    var data = Backbone.Marionette.ItemView.prototype.serializeData.apply(this, arguments);

    // augment the data the way you need
    data.foo = this.options.foo;

    // send back your custom data
    return data;
  }

}); 
```

这应该使您的数据在`templateHelpers`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-14T14:42:51.183

更简单的解决方案使用构造`templateHelpers: function(){return {}}`，例如：

```
var RowView = Backbone.Marionette.ItemView.extend({
    // ...
    templateHelpers: function(){  
        return {
            foo: this.foo
        }
    },
    // ...
}) 
```

并用于数据：

```
var RowView = Backbone.Marionette.ItemView.extend({
    // ...
    templateHelpers: function(){
        var foo = this.foo  // context is view
        return {
            something: function(){ 
                return this.name + " " + foo  // context is data object
            }
        }
    },
    // ...
}) 
```

文档：[https ://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#object-or-function-as-templatehelpers](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#object-or-function-as-templatehelpers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T11:43:55.367

我认为这更简单

在你看来

```
var RowView = Backbone.Marionette.ItemView.extend({
...
 initialize: function(options){
            this.options = options;
        },
        options: {},
  templateHelpers: function(){
        var foo = this.options.foo;
....

} 
```

这样做的好处是，如果您有其他想要传递值的东西，他们可以从选项中获取它，例如在我的一个观点中

```
 className: function(){ return this.options.size + "-widget"; } 
```

对于小部件的集合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T09:35:35.647

当您按照 Derick 的建议调用超级方法时

```
var data = Backbone.Marionette.ItemView.prototype.serializeData.apply(this, arguments); 
```

请务必在适当的类上调用它，例如`CompositeView`而不是`ItemView`，因为 Marionette 2.2 `SerializeData`fn 已更改为将实现逻辑传递给特定函数，并且并非所有类都可用

或者，如果您使用的是 CoffeeScript，您可以调用`data = super(arguments)`

# mysql - MySQL在触发器错误中声明变量

> ID：12058611
> 
> 赞同：1
> 
> 时间：2012-08-21T15:49:03.983
> 
> 标签：mysql, triggers

有人知道我的触发器声明有什么问题吗？

```
CREATE TRIGGER `sch_trigger_curriculum_subject_before_insert` BEFORE INSERT ON  
`sch_curriculum_subject` FOR EACH ROW 
BEGIN
   DECLARE curriculum_code VARCHAR(50);        
   SET curriculum_code = SELECT code FROM sch_curriculum WHERE id=NEW.id;
   SET NEW.`code_name` = CONCAT(curriculum_code,' - ', NEW.code,' - (',NEW.name,')');
END; 
```

错误：SQL 错误（1064）：您的 SQL 语法有错误.....在第 4 行的 '' 附近。

根据错误消息，我的课程代码声明有问题。但我无法找出问题所在。

提前致谢

**更新：** 已经解决，问题出在分隔符上，这是工作的

```
DELIMITER $$
CREATE TRIGGER `sch_trigger_curriculum_subject_before_insert` BEFORE INSERT ON  
`sch_curriculum_subject` FOR EACH ROW 
BEGIN
  DECLARE curriculum_code VARCHAR(50);        
  SET curriculum_code = (SELECT code FROM sch_curriculum WHERE id=NEW.id);
  SET NEW.`code_name` = CONCAT(curriculum_code,' - ', NEW.code,' - (',NEW.name,')');
END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:52:12.727

您不能`SELECT`以这种方式将语句分配给变量。至少您应该将`SELECT`语句放在括号中以将其作为子查询执行，但更好的是：

```
SELECT code FROM sch_curriculum WHERE id = NEW.id INTO curriculum_code; 
```

请注意查询不会返回多条记录（假设列`UNIQUE`上存在约束`id`，因此这可能不是问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:52:21.537

您需要确保不会从`SELECT`.

尝试：

```
SET curriculum_code = (SELECT code FROM sch_curriculum WHERE id=NEW.id LIMIT 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:52:51.180

你不能简单地`SET curriculum_code = some_SQL`。我怀疑你的意思是`SELECT ... INTO curriculum_code`

# iphone - iPhone应用程序中的字符问题

> ID：12058623
> 
> 赞同：-3
> 
> 时间：2012-08-21T15:49:47.600
> 
> 标签：iphone, character-encoding

我正在将文件从服务器下载到我的 iPhone 应用程序。但在文本文件中我无法读取这些字符

> 艾伊欧

有什么方法可以读取字符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:05:29.327

尝试使用`+ (id)stringWithContentsOfFile:(NSString *)path encoding:(NSStringEncoding)enc error:(NSError **)error`. 您必须找出文件使用的编码并使用它。这是[可用编码的列表](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)（跳转到... NSStringEncoding）。

# android - 如何在 Android 的 WebView 中加载 url 以使其正常显示？

> ID：12058624
> 
> 赞同：1
> 
> 时间：2012-08-21T15:49:51.673
> 
> 标签：android, android-emulator, android-webview

我正在`http://www.google.com`WebView 中加载 url。但是，即使我从设备/模拟器加载它，webview 的内容也不会根据设备尺寸进行调整。

![图像的屏幕截图](../Images/c5a485ce86516f1646ed7ae7ff3e2686.png)

如果您看到，Google 页面没有根据 WebVie 的尺寸正确设置。但是，如果我在具有相同尺寸的模拟器浏览器中打开相同的 url，那么它会通过缩放等正确加载。

如何在 Android 的 WebView 上正确加载 webview？

这是 WebView 布局的 XML
`<WebView android:id="@+id/webView1" android:layout_width="300dp" android:layout_height="300dp" android:layout_alignParentBottom="true" android:layout_below="@+id/button1" android:layout_centerHorizontal="true" />`

MainActivity.java 文件 `WebView web_view =(WebView)findViewById(R.id.webView1); web_view.getSettings().setLoadWithOverviewMode(true); web_view.getSettings().setUseWideViewPort(true); web_view.loadUrl("google.com";);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:02:23.580

您需要更改用户代理以使其不加载移动网站。

* * *

尝试这个

```
<WebView android:id="@+id/webView1" android:layout_width="fill_parent" 
android:layout_height="fill_parent" android:layout_alignParentBottom="true" 
android:layout_below="@+id/button1" android:layout_centerHorizontal="true" /> 
```

# git - Git：修补在不相关的仓库中所做的更改

> ID：12058629
> 
> 赞同：0
> 
> 时间：2012-08-21T15:50:04.247
> 
> 标签：git, merge, diff, patch

让我用一个例子来解释这个问题：

假设我对位于`OldRepo/libs/graphics`项目 git 存储库目录中的文件进行了几项更改。

现在，我开始使用新版本的图形处理一个新项目

`NewRepo/Dir1/libs/graphics`

我想将对旧项目存储库中的图形目录所做的所有更改应用到新项目存储库中的图形目录（请注意`Dir1`新存储库的路径）。

我正在寻找一种解决方案，它可以将更改和单个提交从诸如此类的工具转移`OldRepo`到`NewRepo`诸如此类的工具中`git diff`，`diff`但还不够。

我怎样才能做到这一点？

**我试图解决的实际问题如下**

我开始了一个`cocos2d-iphone`1.1 版的 iphone 项目。它来自xcode模板；它使用包含 1.1 版的初始提交创建了一个全新的项目，其中包含新的 repo `cocos2d-iphone`（注意：它只是源代码）。

我继续开发我的项目...提交，提交... *[添加新文件]* 在某些时候，我需要更改 cocos2d-iphone 1.1 版的行为，所以我直接更改源代码并提交我的更改.. *[改进的 Cocos2d-ccnode]*。和.. *[改进的 Cocos2d-ccsprite]*

最后我发布了应用程序。

现在，我正在开始一个新项目，并且`cocos2d-iphone`2.0 版本可用。我安装了新的项目模板（`cocos2d-iphone`2.0 版）。

从模板创建新项目；这又是一个全新的项目，带有一个新的 repo，初始提交包含`cocos2d-iphone`2.0 版

请注意，`cocos2d-iphone`2.0 版并不是对 1.1 版的完全重写，而是包含一些小的更改。

我想将我对`cocos2d-iphone`1.1 版所做的改进应用到我的新项目中。绝对不是一次提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:29:21.207

我会建议：

```
 cocos1.1        cocos2.0 (you work on this right now)
    \        
     \    
    changes 
```

这就是你所拥有的，对吧？所以你想要的是选择你在 cocos1.1 上所做的确切更改并将其应用于 cocos2.0？我的建议是对`git cherry-pick`你的改变。

你也可以变基，但我不确定它是否会起作用，因为 cocos2.0 似乎没有直接链接到 cocos1.1（你也可以尝试这种方式）

顺便说一句，我想 cocos1.1 和 2.0 不是同一个本地 repo。所以你应该首先将 cocos1.1 添加为远程：在 cocos2.0 中，运行`git remote add cocos1.1 path/to/cocos1.1`. 然后`git branch --track cocos1.1changes cocos1.1/desiredbranch`。

所以你计算出你的提交列表，比如 c1 到 c20（你需要使用他们的 SHA-1 哈希）。他们在`cocos1.1changes`树枝上。

你要做的是`git checkout cocos2.0`在正确的分支上工作，然后应用你的提交。您可以从简单开始`git cherry-pick c1`（c1 是 SHA-1 哈希）

我认为有类似`git cherry-pick c1~c20`或类似的技巧，但无论如何获取一些关于樱桃采摘的信息，我认为这就是你需要的。

祝你好运

# jquery - 使用 IE9 的跨域 AJAX 请求

> ID：12058632
> 
> 赞同：5
> 
> 时间：2012-08-21T15:50:33.577
> 
> 标签：jquery, ajax, internet-explorer, jsonp

跨域 AJAX 请求（使用 jQuery 1.7.2 生成）不会在 IE9 中执行，除非请求的 dataType 设置为“jsonp”或“script”。

我在构建一个我不关心响应并且未指定 dataType 的请求时发现了这个问题（是的，我知道我应该关心响应）。

因此，例如，这将起作用：

```
$.ajax({
    url: "http://www.google.com",
    type: "GET", // or "POST"
    dataType: 'jsonp'
}); 
```

但这不会：

```
$.ajax({
    url: "http://www.google.com",
    type: "GET" // or "POST"
}); 
```

“工作”是指我看到在 Firebug 或 F12 中发出的 HTTP 请求。

这两个请求都适用于其他浏览器。设置`jQuery.support.cors = true;`不会影响成功，也不会将 crossDomain 设置为 true 或将缓存设置为 false（在 AJAX 请求中）。

为什么 AJAX 请求的成功取决于仅 IE 中请求的数据类型？我可以理解为什么它会影响我处理任何返回数据的能力；我也了解某些服务器可能会拒绝对某个数据类型的所有请求（但这里显然不是这种情况）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:55:28.087

这不是数据类型的问题，而是在浏览器中清楚地验证服务器是否真的想要回答这个查询。

通过强加[JSONP](http://en.wikipedia.org/wiki/JSONP)，您可以强制服务器有一个非常具体的答案（包括方法调用）。

请注意，现在还有其他解决方案：您可以在服务器上设置特定的标头（请参阅[https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:41:31.413

如果您在不重新加载页面的情况下执行跨域 ajax 调用来处理表单帖子，则将数据类型设置为“脚本”对我有用。

我会对指向信息的可靠链接非常感兴趣，以了解更多关于为什么会这样的信息。我拉了几天的头发，不明白为什么除了 IE9 之外的所有浏览器都在工作。

@dystroy 即使在放入标头之后，也允许 FF 工作，但在我使用脚本数据类型之前并没有在 IE9 中产生差异

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-24T10:21:20.567

您不必为此编写长脚本。只需简单地在下面添加这段代码，看看它的神奇之处。

```
$(document).ready(function(){
jQuery.support.cors = true;
// call your other functions below.....
}) 
```

# xcode - iPhone 分发证书在 Keychain 中看起来不错，但 XCode 声称未找到有效的签名身份

> ID：12058633
> 
> 赞同：1
> 
> 时间：2012-08-21T15:50:34.997
> 
> 标签：xcode, certificate, keychain

像许多人一样，我遇到了来自 Apple 的分发证书的问题，我已经能够毫无问题地将其包含在我的钥匙串访问中，并且它在那里显示得很好。当我尝试在 XCode 中检查我的发布配置文件时，我看到分发配置文件显示为未找到有效的签名身份。

我删除了配置文件并重新创建了它们，甚至删除了我自己的开发人员配置文件并重新创建了它。分发配置文件在 Apple 网站上的配置文件中创建得很好。虽然我不是通过 XCode，而是通过 PhoneGap 构建应用程序，但我仍然需要能够提取 PhoneGap 构建过程的证书。

我已经完成了之前关于此问题的所有步骤，我正在运行 XCode 4.3.2，所以我认为我已经解决了 XCode 没有正确签署证书的错误。我已删除并重新创建了登录钥匙串中的所有证书。关于我现在注意到的唯一一件事，但不确定发生了什么，分发配置文件出现在钥匙串中没有钥匙，它应该有一个吗？当我去评估它时，我没有找到根证书，但是如果我检查证书，我会看到它通过 WDR 证书到 Apple 根 CA 的链。

如果我已经完成了重新创建证书的步骤，我想知道是否有办法验证签名身份有什么问题？什么身份会有问题？如果从 Apple 站点构建，分发配置文件是否使用根证书安装？我觉得在许多说明中我错过了一个步骤，但不知道它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:01:00.433

结果证明我们创建的证书与之前完成我们工作的第 3 方以及处理构建的 PhoneGap 服务不兼容。从头开始删除和重新创建所有内容最终成功了，早些时候我没有删除我们的初始认证，因为这与早期的第三方工作有关。

# dotnetnuke - 调整浏览器窗口大小时如何使dnn跳转到移动皮肤

> ID：12058634
> 
> 赞同：2
> 
> 时间：2012-08-21T15:50:37.743
> 
> 标签：dotnetnuke

我已经安装了 dnn6 专业版，想知道如何或是否可以根据浏览器窗口大小更改样式表。我认为 Darkkight 皮肤会有这种功能，但它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:31:06.320

通常，您不会更改样式表，而是使用[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)在同一个样式表中包含不同大小的样式。DotNetNuke 没有任何具体的帮助，但也不会阻止您以任何方式使用它。

DotNetNuke 确实提供了基于设备检测的重定向，因此您可以轻松地将使用移动设备的用户重定向到不同的 URL（在 DNN 站点上或不在 DNN 站点上）。但是根据屏幕大小来改变网站的显示，需要一个具有响应式/自适应设计的皮肤，这完全取决于皮肤设计者来实现。

# html - HTML/CSS 贝宝按钮

> ID：12058635
> 
> 赞同：3
> 
> 时间：2012-08-21T15:50:45.067
> 
> 标签：html, css, paypal

我已经搜索了很多，但所有结果都使用自定义图像进行引用。我正在使用流畅的布局/视网膜显示，我希望按钮是纯 HTML/CSS。

有谁知道解决方法/方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:03:25.903

在没有看到一些代码的情况下，我会说用 jQuery 隐藏图像，然后再次使用 jQuery 创建一个新元素，其中包含你想要的任何内容，我认为是使用的锚标记。

如果不支持 javascript，它将显示图像，如果不支持，它将显示您的新元素（您可以相应地设置样式）

编辑：好的，一些澄清......使用jquery隐藏现有的输入type =“image”......然后再次使用jquery创建一个新的提交类型的输入，做你需要做的任何事情

这是一个要解释的小提琴：http: [//jsfiddle.net/erinfreeman/PFZY8/](http://jsfiddle.net/erinfreeman/PFZY8/)

如果有更好的方法，我会全力以赴。如下所示，我认为 jpann 不能添加任何其他代码，否则它只是隐藏现有输入字段并添加另一个的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T20:07:16.173

嗨，我正在做一个项目，客户想要自定义贝宝按钮。我找到了一个为按钮提供自定义代码的好网站：[http ://www.daddydesign.com/wordpress/how-to-create-a-custom-paypal-button-without-images/](http://www.daddydesign.com/wordpress/how-to-create-a-custom-paypal-button-without-images/)

您只需将 input type="image" 标记替换为 input type="submit" 并设置样式即可。希望这可以帮助。

# spring-security - Spring Security SAML - 无法验证签名

> ID：12058636
> 
> 赞同：9
> 
> 时间：2012-08-21T15:50:54.293
> 
> 标签：spring-security, digital-signature, x509, saml-2.0, spring-saml

我在 Tomcat 7 上使用 Spring Security SAML 2.0 示例 webapp，并对其进行了修改以尝试使其针对 Ping Identity 服务进行身份验证。webapp 正在与服务对话，它正在发回一个断言，但在尝试验证签名时失败，如下面的调试输出所示：

```
- Attempting to verify signature and establish trust using KeyInfo-derived credentials
- Signature contained no KeyInfo element, could not resolve verification credentials
- Failed to verify signature and/or establish trust using any KeyInfo-derived credentials
- Attempting to verify signature using trusted credentials
- Failed to verify signature using either KeyInfo-derived or directly trusted credentials
- Validation of received assertion failed, assertion will be skipped
org.opensaml.xml.validation.ValidationException: Signature is not trusted or invalid 
```

我知道它无法验证签名，并且我已获得 Ping Identity 管理员的证书以供使用，但我不确定如何将其包含在应用程序中。我尝试使用 JDK 的 keytool 程序将其添加到示例应用程序附带的 JKS（密钥库）中，但似乎无法在其中找到它。我还尝试将其添加到服务提供商的元数据 xml 文件中，如下所示：

```
<md:KeyDescriptor use="signing">
    <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:X509Data>
            <ds:X509Certificate>
                [Certificate is here...]
            </ds:X509Certificate>
        </ds:X509Data>
    </ds:KeyInfo>
</md:KeyDescriptor> 
```

但是它仍然返回相同的错误。

是否有我应该放置证书以验证签名的特定位置？一般来说，我对 SAML 和应用程序安全性比较陌生，所以如果我使用了错误的术语，我深表歉意。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T15:21:18.960

终于让这个工作了。结果我错过了安全上下文文件中的一行配置，并且（看起来好像）服务提供商的元数据 XML 文件中不需要 X509 证书定义。

基本上我已经将我提供的公钥导入现有的 JKS（使用`keytool`），但我没有告诉应用程序专门使用它。为了做到这一点，我必须进入安全上下文文件（在我的例子中是“securityContext.xml”）并将以下行添加到`ExtendedMetadata`SP 的元数据 xml 文件的 bean 定义中：

```
<property name="signingKey" value="[alias of the provided key in the JKS goes here]"/> 
```

因此，在此修改之后，`ExtendedMetadataDelegate`bean 定义如下所示：

```
<bean class="org.springframework.security.saml.metadata.ExtendedMetadataDelegate">
  <constructor-arg>
    <bean class="org.opensaml.saml2.metadata.provider.FilesystemMetadataProvider">
      <constructor-arg>
        <value type="java.io.File">classpath:security/[Path to SP metadata xml file].xml</value>
      </constructor-arg>
      <property name="parserPool" ref="parserPool" />
    </bean>
  </constructor-arg>
  <constructor-arg>
    <bean class="org.springframework.security.saml.metadata.ExtendedMetadata">
      <property name="alias" value="[SP alias goes here]" />
      <property name="signingKey" value="[alias of the provided key in the JKS goes here]"/>
    </bean>
  </constructor-arg>
</bean> 
```

希望这可以帮助任何可能处于类似情况的人。

# module - 在 ExpressionEngine 网站上显示投票数据

> ID：12058640
> 
> 赞同：1
> 
> 时间：2012-08-21T15:51:00.143
> 
> 标签：module, expressionengine

我正在使用 eeHarbor 投票模块，需要以下帮助：

由于当前配置了代码，因此投票问题将显示在我的主页上。如果用户选择一个选项并进行投票，或者单击“查看结果”选项，则结果将显示在主页的同一区域内（替换投票问题和选项）。

我想让结果（在投票后或用户选择“查看结果”后）显示在不同的页面上，我可以在其中添加相关内容。有谁知道我可以如何编辑投票模块的参数来实现这一点？

此外，投票模块会创建所有新的投票，其中包含 2 个可能的投票选项/答案。有一个链接可以点击，应该允许管理员“添加选项”或“添加其他选项”，但点击这个链接不会傻，每次民意调查只有 2 个选项。

我已经卸载并重新安装了模块，没有任何变化。

任何想法为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T10:17:09.923

在此处查看常见问题解答页面：http: [//eeharbor.com/polls/faq](http://eeharbor.com/polls/faq)

我可以更改给定投票的返回 URL 吗？是的，从 1.4 版开始，您可以添加一个名为“return_url”的隐藏表单元素，以指定您希望用户在提交投票后被发送到的 url。

```
<input type="hidden" name="return_url" value="" /> 
```

# python - Selenium - 没有名为 http.client 的模块

> ID：12058647
> 
> 赞同：4
> 
> 时间：2012-08-21T15:51:18.043
> 
> 标签：python, selenium

我刚刚为 Python 2.7 安装了 Selenium（来自源代码）。

当我尝试时`import selenium`，我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\selenium-2.25.0-py2.7.egg\selenium\__init__.py", line 16, in <module>
    from .selenium import selenium
  File "C:\Python27\lib\site-packages\selenium-2.25.0-py2.7.egg\selenium\selenium.py", line 19, in <module>
    import http.client
ImportError: No module named http.client 
```

这可能是什么原因造成的？如果我没记错的话，http.client 是一个 python 3 模块。为什么硒试图导入它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:36:44.307

感谢 DSM 的帮助，我想通了。因为我之前偶然运行了带有 python3 可执行文件的 setup.py，所以 selenium 构建文件夹中填充了 2to3 转换的代码。当我后来运行`python27 setup.py install`它时，它最终使用相同的构建文件夹进行安装，而没有覆盖其内容。我最终删除了构建文件夹并再次尝试，它可以工作。

# c# - 尝试更新 Linq2Sql 表，但我的 DataContext 中的某些表已将 isReadOnly 设置为 true？

> ID：12058651
> 
> 赞同：1
> 
> 时间：2012-08-21T15:51:39.553
> 
> 标签：c#, linq-to-sql

我在这张表上没有主键。我在某处读到这很重要。

出于某种原因，一个简单的

```
public bool UpdateServiceRequest(RequestedServiceAction action) {
    DataContext db = new DataContext();
    var service = db.tbl1.ToList().ElementAt(0)
    service.requestedAction = action.RequestedAction;
    service.requestedBy = action.RequestedBy;
    service.requestedDate = action.RequestedDate;
    service.SubmitChanges();
    return true;
} 
```

不起作用。请求的 Action、By 和 Date 永远不会写入数据库。进一步检查，我注意到 tbl1 的 isReadOnly 属性设置为 true。所以我`db.ObjectTrackingEnabled = false;`在上下文创建后尝试设置，但 isReadOnly 仍然设置为 true。

DataContext 可能需要一个主键来跟踪“Element(0)”？

编辑：没有仔细阅读 MSDN：http: [//msdn.microsoft.com/en-us/library/bb339901.aspx](http://msdn.microsoft.com/en-us/library/bb339901.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:44:49.647

表格没有任何固有的顺序。出于这个原因，获得“第一个”元素几乎没有意义。您只能**通过某种顺序**获得第一个元素。像这样：

```
db.tbl1.OrderBy(x => x.MyField).First() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:26:47.480

SQL Server 需要主键才能知道要在 SubmitChanges 上更新哪条记录。如果未指定键，则该表将是只读的。此外，如果您在 select 子句中投影出匿名类型，则生成的属性也将是只读的。

# iphone - 是否可以更改 tableView.backgroundView 框架？

> ID：12058656
> 
> 赞同：2
> 
> 时间：2012-08-21T15:52:03.940
> 
> 标签：iphone, ios, xcode, uitableview

我想将我的表格视图背景放在导航栏下方。当我尝试改变框架时没有任何反应..

```
 UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(100, -100, 320, 480)];
 imageView.image = self.theme.bgImage;
 [self.tableView setBackgroundView:imageView]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T15:56:19.683

在文档中它说：

> 表格视图的背景视图会自动调整大小以匹配表格视图的大小。

所以我认为它总是被框架再次调整大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T16:42:20.077

将 UIImageview 添加为子视图以查看并设置适当的图像。将图像视图放在 tableview 后面。使 tableview 背景为零。然后尝试改变框架。这可能会对您有所帮助。

# java - Jmockit：在返回的接口上模拟一个方法（Mockito spy() 等效）

> ID：12058662
> 
> 赞同：2
> 
> 时间：2012-08-21T15:52:31.760
> 
> 标签：java, unit-testing, mocking, mockito, jmockit

我对 JMockit 很陌生，我正在尝试找到一种方法来做一些我不能做或我不明白如何形成文档的事情。在 Mockito 中相当容易。

我有许多真正的具体类，它们返回其接口引用的实例。例如：

```
final IAmAnInterface interf = 
    someRealClass.createMeAnInterfaceInstance(param1, param2, param3) 
```

我想模拟实现 interf out 的方法之一，以便它做一些特定的事情，但只是在测试用例的后期，例如，如果我处理的是类而不是我会使用的接口：

```
new Mockup<ConcreteClassOfIAmAnInterface>() {
    @Mock
    int someMethod() throws SomeException {
        return 1+2+3+4+5; // my special value
    }
} 
```

如果我*知道*someRealClass 会返回什么效果很好，但是如果我用“IAmAnInterface”替换“ConcreteClassOfIAmAnInterface”，那么该方法就不会被模拟。

如果我要使用 Mockito，我会做类似的事情：

```
final IAmAnInterface mock = spy(interf);
when(mock.someMethod()).thenReturn(1+2+3+4+5); 
```

在 JMockit 中是否有一个不错的方法/任何方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T18:07:06.453

您尝试使用“JMockit Mockups”API，它与典型的模拟 API 非常不同。

相反，使用更熟悉的“JMockit Expectations & Verifications”API：

```
@Test // note the "mock parameter" below (or declare a mock field)
public void regularTest(@Mocked final IAmAnInterface mock)
{
    // Record expectations if/as needed:
    new NonStrictExpectations() {{
        mock.someMethod(); result = 123;
    }};

    // Use the mock object in the SUT.
    ...

    // Verify expectations if/as needed:
    new Verifications() {{ mock.doSomething(); }};
}

@Test // this is the equivalent to a Mockito "spy"
public void testUsingPartialMocking()
{
   final IAmAnInterface realObject = new SomeImplementation();

   new NonStrictExpectations(realObject) {{
      // Record zero or more expectations.
      // Calls to "realObject" *not* recorded here will execute real code.
   }};

   // call the SUT

   // verify expectations, if any
} 
```

# python - 条件更新：仅当值为 None 或 'null' 或键不存在时更新

> ID：12058670
> 
> 赞同：0
> 
> 时间：2012-08-21T15:52:47.390
> 
> 标签：python, mongodb, pymongo

我试图弄清楚是否有一种方法可以使用诸如 $set 之类的条件来进行更高级的更新。这就是我在伪代码中尝试做的事情：

```
# new data to use in a possible update
newData = { 'emailAddress' : $usersEmailAddress,
            'keyA' : 'valueA', 
            'keyB' : None,
            'keyC' : '<null>' }

self.request.root.db.users.update(
                { 'emailAddress' : newData['emailAddress'] },
                { '$set': { 
                          "Here, loop through all newData keys/values and if 
                          notNull(newData[key]) == True and is different than the 
                          corresponding key/value in the user 
                          document (or if user document doesn't have that key) 
                          than update with newData key/value"
                          } }, upsert = False, safe = True )

# The result should be that if the value of keyA (and ONLY key A because the 
#  others are null) is different in the user document
#  than in newData, than the user document should be updated with the new value.

# function to catch any possible None value or equivalent string
def notNull(valueToCheck):
    if thingToCheck and thingToCheck != "null" and thingToCheck != 'nil' and thingToCheck != '<null>' and thingToCheck != '' and thingToCheck != ' ':
        return True
    else:
        return False 
```

这样做最有效的方法是什么？因为目前我不得不用 find_one 拉出整个文档，而且有人告诉我，那相当昂贵。有没有办法只用 $set 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:34:29.673

不，MongoDB 不支持此功能。正如您所说，您可以检索文档，在客户端代码中对其进行分析，然后根据其内容发布更新，或者您可以发布一系列更新，例如：

```
db.users.update({
    'emailAddress': newData['emailAddress'],
    '$or': [
        { 'keyA': { '$exists': false } },
        { 'keyA': None } ] }
    ]
}, {
    '$set': { 'keyA': newData['keyA'] }
}) 
```

当然，前者会更有效，因为它是一次获取和一次更新。但是请考虑您是否需要防止多个 MongoDB 客户端同时获取和更新同一个文档。

# sql - 用 Nothing、= Nothing 或 IsNullOrEmpty 确定空列

> ID：12058674
> 
> 赞同：1
> 
> 时间：2012-08-21T15:52:56.030
> 
> 标签：sql, vb.net, nothing, isnullorempty

当您想确定数据库列是否为空（即不是 null 但其中没有任何值）时，以下选项之间有什么区别：

`customerRegion varchar(10) NULL`从 SQL 数据库中检索：

1.  `If customerRegion = "" Then`
2.  `If customerRegion = Nothing Then`
3.  `If String.IsNullOrEmpty(customerRegion) Then`
4.  `If customerRegion Is Nothing Then`

1,2,3 返回 True 4 当列为空时返回 False。

1和2在技术上是一样的吗？为什么 4 返回 False？

在 1,2 和 3 中，应该使用哪一个来确定该列是否为空（或者是否有其他方法）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:01:02.770

1.  `If customerRegion = "" Then`- 这将测试该列是否包含空（0 长度）字符串。这是“最佳”选项，因为该值永远不会是`Nothing`. 如果列值为 null，则等于`DBNull`，而不是`Nothing`。
2.  `If customerRegion = Nothing Then`- 这很令人困惑，因为很多人会认为它可以与#4 ( `Is Nothing`) 互换。当您测试一个字符串是否等于`Nothing`时，VB.NET 会自动认为`Nothing`是一个空字符串。这就是它评估为 True 的原因。
3.  `If String.IsNullOrEmpty(customerRegion) Then`- 这会很好用，但它是不必要的，因为列值永远不会是 null ( `Nothing`)（参见 #1）。
4.  `If customerRegion Is Nothing Then`- 这将永远不会返回 true（参见 #1）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:02:40.147

*   不，它们不一样。`True`如果值实际上是 ，则#2 将返回`Nothing`。从[文档](http://msdn.microsoft.com/en-us/library/0x9tb07z.aspx)中：

> 对于 Visual Basic 中的字符串，空字符串等于 Nothing。因此，“” = 没有什么是真的。

因此，该行为与 VB 特定的`= Nothing`字符串处理有关。

*   数字 4 返回`False`是因为字符串为空，但它不是`Nothing`。

*   您还可以进行另一项检查：`IsNullOrWhitespace`. 但是，如果您需要专门检测零长度的字符串，则应将它们与[`String.Empty`](http://msdn.microsoft.com/en-us/library/system.string.empty.aspx).

像这样：

```
If customerRegion = String.Empty Then 
```

# google-app-engine - 如何绕过 Google App Engine 中一些公共页面所需的登录？

> ID：12058677
> 
> 赞同：3
> 
> 时间：2012-08-21T15:53:03.943
> 
> 标签：google-app-engine

我有一个大约有一百页的 Google App Engine 网络应用程序。我需要限制登录的人访问除 5 个以外的所有页面。

我知道在 app.yaml 文件中我可以添加：

```
- url: .*
  script: main.app
  login: required 
```

但这需要登录所有页面。

有没有办法指定不需要，像这样（我是 GAE 和 Python 的新手）：

```
- url: /public/.*
  script: main.app
  login: not required 
```

或者是为受限页面的每个引用添加级别的唯一方法（对受限页面的数百个引用）。就像是：

```
- url: /restricted/.*
  script: main.app
  login: required

- url: /public/.*
  script: main.app 
```

如果这是唯一的方法，两者仍然可以指向同一个 main.app 吗？

处理这个问题的最佳方法是什么？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T16:53:41.853

app.yaml 处理程序条目是按顺序处理的，因此您可以在 app.yaml 中包含如下内容：

```
- url: /(publicpage1|publicpage2|publicpage3).*
  script: main.app

- url: /.*
  script: main.app
  login: required 
```

# c# - 该进程无法访问该文件，因为它在尝试从目录中删除文件时被其他进程使用

> ID：12058685
> 
> 赞同：-9
> 
> 时间：2012-08-21T15:53:23.937
> 
> 标签：c#

您好我正在尝试从目录中删除文件。它能够删除第一个文件，但之后它无法删除其他文件。它显示错误消息“该进程无法访问该文件，因为它被其他进程使用.我的删除代码是

```
 foreach(FileInfo file in files)
             {
            file.delete()
              } 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:58:18.303

操作系统不会让您删除另一个进程正在使用的文件。

使用此工具找出正在访问您尝试删除的文件的进程：

[进程浏览器 v15.3](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

# android - 加载进度条android

> ID：12058687
> 
> 赞同：0
> 
> 时间：2012-08-21T15:53:33.983
> 
> 标签：android, progress-bar, development-environment

*我有加载一些文件并更新 UI 的类...查看结果需要一些时间...所以我想添加一个加载条或进度条。一些数据已被其他活动传递（Bundle extras1 = getIntent().getExtras();）。但我正在为每个项目下载一张图片......我认为这需要更多时间。任何人都可以帮助我吗？

这是我的代码：

```
public class ShowSelectedEvents extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewdetailsevents);
    Bundle extras1 = getIntent().getExtras();
    String eventTitle = extras1.getString("eventTitle");
    final String address = extras1.getString("address");
    String date = extras1.getString("date");
    String time = extras1.getString("time");
    final String fix = extras1.getString("fix");
    final String mobile = extras1.getString("mobile");
    final String web = extras1.getString("web");
    final String mail = extras1.getString("mail");
    String imageLink = extras1.getString("imageLink");
    final String videoLink = extras1.getString("videoLink");
    // Add item image
    Bitmap bitMap = null;
    try {
        bitMap = DownloadImage("imageLink);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ImageView imageItem = (ImageView) findViewById(R.id.imageItem);
    imageItem.setImageBitmap(bitMap);
    TextView viewTitle = (TextView) findViewById(R.id.viewTitle);
    viewTitle.setText(eventTitle);
    TextView viewDateTime = (TextView) findViewById(R.id.dateTime);
    viewDateTime.setText("Event is on "+date +" @ "+ time);
    // View Address
    TextView viewAdd = (TextView) findViewById(R.id.viewAddress);   
    viewAdd.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC),Typeface.ITALIC);
    viewAdd.setText(address);
    // On click open Navigation
    if (!(address.equals("-"))){
        ImageView navigationIcon = (ImageView) findViewById(R.id.imageMapNavigation);
        navigationIcon.setOnClickListener(new OnClickListener() {           
            @Override
            public void onClick(View v) {
                String url = "google.navigation:q="+address;
                Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url));            
                startActivity(i);
            }
        }); 
    }else{
        Context context = getApplicationContext();
        CharSequence text = "Address is incomplete!";
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
    }
    // View Phone number
    TextView viewPhoneNumber = (TextView) findViewById(R.id.viewPhoneNumber);
    viewPhoneNumber.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC),Typeface.ITALIC);
    viewPhoneNumber.setText(fix);
    // On click open call 
    if (!(fix.equals("-"))){
        viewPhoneNumber.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                String url = "tel:"+fix;
                Intent i = new Intent(Intent.ACTION_CALL, Uri.parse(url));  
                startActivity(i);
            }
        });
    }
    //View Mobile number
    TextView viewMobileNumber = (TextView) findViewById(R.id.viewMobileNumber);
    viewMobileNumber.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC),Typeface.ITALIC);
    viewMobileNumber.setText(mobile);
    // on click call mobile number
    if (!(mobile.equals("-"))){
        viewMobileNumber.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                String url = "tel:"+mobile;
                Intent i = new Intent(Intent.ACTION_CALL, Uri.parse(url));  
                startActivity(i);
            }
        });
    }
    //View web url
    TextView viewWeb = (TextView) findViewById(R.id.viewWeb);
    viewWeb.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC),Typeface.ITALIC);
    viewWeb.setText(web);
    //on click open web browser
    if (!(web.equals("-"))){
        viewWeb.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(web));
                startActivity(i);
            }
        });
    }
    TextView viewMail = (TextView) findViewById(R.id.viewMailAddress);
    viewMail.setTypeface(Typeface.defaultFromStyle(Typeface.ITALIC),Typeface.ITALIC);
    viewMail.setText(mail);
    if(!(mail.equals("-"))){
        viewMail.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
                emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] {mail});
                emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Contact from tamilpage.ch");
                emailIntent.setType("text/plain");
                startActivity(Intent.createChooser(emailIntent, "Send a mail ..."));
            }
        });
    }
    // On click play the video
    if (!(address.equals("-"))){
        ImageView videoIcon = (ImageView) findViewById(R.id.videoButton);
        videoIcon.setOnClickListener(new OnClickListener() {            
            @Override
            public void onClick(View v) {
                Intent browserIntent = new Intent(Intent.ACTION_VIEW,
                        Uri.parse(videoLink));
                startActivity(browserIntent);
            }
        }); 
    }else{
        Context context = getApplicationContext();
        CharSequence text = "No advert video for this event";
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
    }
}
private Bitmap DownloadImage(String url) throws Exception {
    Bitmap bitmap = null;
    InputStream in = null;
    try {
        in = OpenHttpConnection(url);
        bitmap = BitmapFactory.decodeStream(in);
        in.close();
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    return bitmap;
}
private InputStream OpenHttpConnection(String url) throws Exception {
    InputStream in = null;
    int response = -1;
    System.out.println("Nishi1"); 
    URL url1 = new URL(url); 
    URLConnection conn = url1.openConnection();
    if (!(conn instanceof HttpURLConnection)) 
        throw new IOException("Not an HTTP connection");
    try{
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect(); 
        response = httpConn.getResponseCode(); 
        if (response == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream(); 
            System.out.println(in);
        } 
    }
    catch (Exception ex)
    {
        throw new IOException("Error connecting"); 
    }
    return in; 
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:08:37.693

> 所以我想添加一个加载条或进度条

对于您的方法，您需要使用`Threads`. 特别是我建议你看看

*   [`Handler`](http://developer.android.com/reference/android/os/Handler.html)
*   [`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

两种方法都提供与线程一起工作。AsyncTask 比 Handler 更复杂，而且它是泛型类型，因此提供更多类型安全和更快的工作。

你应该阅读一些教程

*   [`ProgressBar updating using Message Handler`](http://www.helloandroid.com/tutorials/progressbar-updating-using-message-handler)
*   [`Create A Custom Progress Bar Using AsyncTask`](https://sites.google.com/site/androidhowto/how-to-1/create-a-custom-progress-bar-using-asynctask)

Vogella 有非常棒和有用的教程

*   [`Android Threads, Handlers and AsyncTask - Tutorial`](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:56:21.893

我会考虑使用`AsyncTask`. 这是一个可以帮助您入门的链接：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:59:02.597

您想要执行此操作的方式是在具有用于更新进度条的回调的 ASyncTask 中。我在下面包含了一个实际上并没有做任何事情的示例。您将调用下载的代码放在 doInBackground() 中并从 onProgressUpdate 更新进度。

```
public class BackgroundAsyncTask extends
    AsyncTask<Void, Integer, Void> {

  int myProgress;

  @Override
  protected void onPostExecute(Void result) {
   // TODO Auto-generated method stub
   Toast.makeText(AndroidAsyncTaskProgressBar.this,
         "onPostExecute", Toast.LENGTH_LONG).show();
  }

  @Override
  protected void onPreExecute() {
   // TODO Auto-generated method stub
   Toast.makeText(AndroidAsyncTaskProgressBar.this,
         "onPreExecute", Toast.LENGTH_LONG).show();
   myProgress = 0;
  }

  @Override
  protected Void doInBackground(Void... params) {
   // TODO Auto-generated method stub
   while(myProgress<100){
    myProgress++;
    publishProgress(myProgress);
       SystemClock.sleep(100);
   }
   return null;
  }

  @Override
  protected void onProgressUpdate(Integer... values) {
   // TODO Auto-generated method stub
   progressBar.setProgress(values[0]);
  }

 } 
```

# ant - 使用 Ant 编译 build.xml 文件

> ID：12058696
> 
> 赞同：2
> 
> 时间：2012-08-21T15:54:24.733
> 
> 标签：ant, jasper-reports

我最近在我的*Ubuntu*机器上安装了*Ant 1.8.4*和*JasperReports 4.6.0 。*

 *在我的帐户中设置了以下环境变量：

```
PATH=$PATH:/opt/ant/bin

export PATH

export ANT_HOME=/opt/ant

export JAVA_HOME=/usr/lib/jvm/java-6-openjdk-amd64 
```

当我尝试使用命令在*JasperReports*演示示例目录中运行演示构建文件时，`ant`我收到以下错误：

```
Buildfile: build.xml

BUILD FAILED
/opt/jasperreports-4.6.0/demo/samples/antcompile/build.xml:3: The following
 error occurred while executing this line:
jar:file:/opt/ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml:37: Problem: failed to create task or type componentdef
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
```

解决此问题的任何帮助都将非常有帮助。

*build.xml*文件的片段：

```
<project name="antcompile" default="test" basedir=".">

    <description>Shows how multiple JRXML files can be compiled in batch mode using ANT.</description>

    <path id="classpath">
        <pathelement location="../../../build/classes"/>
        <fileset dir="../../../lib">
            <include name="**/*.jar"/>
        </fileset>
    </path>

    <path id="runClasspath">
        <path refid="classpath"/>
        <pathelement location="../../fonts"/>
        <pathelement location="./build/classes"/>
    </path>

    <taskdef name="jrc" classname="net.sf.jasperreports.ant.JRAntCompileTask"> 
        <classpath refid="classpath"/>
    </taskdef>

    <target name="javac" description="Compiles the Java source files used in the report designs.">
        <mkdir dir="./build/classes"/> 
        <javac srcdir="./src" destdir="./build/classes" debug="true" optimize="false" deprecation="false"/>
    </target> 

    <target name="compile1" description="Compiles report designs specified using the &quot;srcdir&quot; in the &lt;jrc&gt; tag."> <!-- 27 row # -->
        <mkdir dir="./build/reports"/> 
        <jrc 
                srcdir="./reports"
                destdir="./build/reports"
                tempdir="./build/reports"
                keepjava="true"
                xmlvalidation="true">
            <classpath refid="runClasspath"/>
            <include name="**/*.jrxml"/>
        </jrc>
    </target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:47:52.350

我通过将 CLASSPATH 中的以下元素 /opt/jasperreports-4.6.0/lib/ant-1.7.1.jar 更改为 /opt/ant/lib/ant.jar 使其工作。感谢 Alex 发布有用的链接！安詹

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:56:01.670

此*Ant*脚本正在使用自定义任务***jrc***。

从下面的代码片段中可以看到（这是来自***jasperreports-4.6.0/demo/samples/antcompile****文件夹的build.xml*文件），此任务的定义引用了来自同一构建文件的**类路径。**

 ***```
<path id="classpath">
    <pathelement location="../../../build/classes"/>
    <fileset dir="../../../lib">
        <include name="**/*.jar"/>
    </fileset>
</path>

...

<taskdef name="jrc" classname="net.sf.jasperreports.ant.JRAntCompileTask"> 
    <classpath refid="classpath"/>
</taskdef> 
```

您应该检查***../../../build/classes***文件夹（在*JasperReports*包的包含示例的文件夹结构中） - ***net.sf.jasperreports.ant.JRAntCompileTask***类必须在那里。

换句话说，你应该把这个类（或**jasperreports-4.6.0.jar**）放到类路径（*`path id="classpath"`*）中。

* * *

问题的另一个可能来源是*Ant*包的版本。

您可以阅读有关Project#createTask 抱怨它在*Ant*的 bugtracker 和[project.createTask() not working with ant-1.8.2](http://ant.1045680.n5.nabble.com/project-createTask-not-working-with-ant-1-8-2-td3385716.html) post上[找不到任务 componentdef](https://issues.apache.org/bugzilla/show_bug.cgi?id=50788)问题。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:24:15.583

你得在这里帮我们一点忙……

您正在构建 JasperReports-4.6.0 吗？或者，您是否使用 JasperReports 作为您的`build.xml`? 这是`build.xml`演示 JasperReports 的测试吗？

错误提示*Check that any custom tasks/types have been declared*，那么第 37 行中的 Ant 任务是什么？*中*有一个*吗？**它是否定义了***类路径***？**如果您有***taskdef***，请让我们看看它是什么，以及自定义任务是什么。**`build.xml`*

 ***我正在下载 iReport 看看我是否能弄清楚你在做什么，但这需要 15 分钟。我打赌你应该把一些罐子放进去`$ANT_HOME/lib`。也许是 JasperReports 或 iReport jarfile。

一旦我可以下载 iReport 并看到你在说什么，我会更新我的答案。

同时，将第 35 行周围的相关代码包含在您的文件中`build.xml`，并将`taskdef`任务包含在您的`build.xml`.

* * ** 

*下载完iReport，里面没有build.xml*文件。您将不得不发布您的代码，以便我们查看它。

同样，我的假设是他们认为你会坚持`/opt/ant/lib`并没有坚持的一些 jar 文件。*******

# c# - 反射 - 可空对象的获取方法

> ID：12058697
> 
> 赞同：2
> 
> 时间：2012-08-21T15:54:25.450
> 
> 标签：c#, reflection, db2

虽然 Stackoverflow 中有类似的问题，但它对我的问题没有帮助。这是我正在做的事情的总体情况。我正在为我的 iDB2DataReader 生成 IL，以从数据库中动态获取我的类型并映射到我的 poco。我在获取可空值以提取数据时遇到问题。

所以我有一个方法需要通过反射返回methodinfo。为了得到这个，我正在使用我需要的类型的“getmethod”。这是代码：

```
private static MethodInfo GetDataMethod(Type destinationDataType, Type underlyingDestinationDataType, iDB2DataReader reader)
{
    MethodInfo methInfo = null;

    if (_readerDataMethods.ContainsKey(destinationDataType))
    {
        methInfo = _readerDataMethods[destinationDataType];
    }
    else
    {

        if (underlyingDestinationDataType != null)
        {
            //trying to get underlying type which would be DateTime thus resulting in GetDatetime.
            methInfo = reader.GetType().GetMethod("Get" + underlyingDestinationDataType.Name);
        }
        else
            methInfo = reader.GetType().GetMethod("Get" + destinationDataType.Name);
        //methInfo = reader.GetType().GetMethod("Get" + destinationDataType.ToGenericTypeString());

        if (methInfo != null)
        {
            _readerDataMethods[destinationDataType] = methInfo;
        }
    }

    return methInfo;
} 
```

正如您从我的代码注释中看到的那样，我得到了 datetime 的基础类型，但这不起作用，它得到一个运行时错误“操作可能使运行时不稳定。”。

真正的问题是我不知道我应该为 a 的 getmethod 使用什么名称`Nullable<DateTime>`。或者至少我希望它是那么简单。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:59:23.393

您可能必须创建一个特殊情况的毛皮 Nullables，因为实际类型名称在方法名称中无效。我会检查它是否是 Nullable 类型并使用反射来获取泛型参数。

例子：

```
Type t = typeof (Nullable<DateTime>);

Console.WriteLine(t.Name);   // Nullable`1
if (t.IsGenericType && t.GetGenericTypeDefinition() == typeof(Nullable<>))
{
    Type t2 = Nullable.GetUnderlyingType(t);
    Console.WriteLine("Nullable"+t2.Name); // NullableDateTime
} 
```

# git - 做 git clone 的更好方法

> ID：12058705
> 
> 赞同：7
> 
> 时间：2012-08-21T15:54:50.070
> 
> 标签：git, shell, automation

这是懒惰的程序员要求。我想创建一个 shell 脚本自动执行以下过程：

```
git clone <remote-repo-url>
cd <cloned-folder>
open <cloned-folder> 
```

所以这里的想法是克隆一个 URL，然后立即`cd`进入`cloned-folder`. `cloned-folder`这里的诀窍是从 url 模式中识别。

现在我们可以假设 url 结构是这种模式，`.../<cloned-folder>.git`即 url。

我想知道我们是否真的可以使用使用`awk`或类似的工具。我想我被困的部分是找到一个合适的`regex`。

**用例：这里的用例是如果你克隆一个 url，你希望尽快进入 repofolder **。**如果您想运行任何`git`命令，`git log`或者`mate .`我们 99% 的时间都在执行，这是先决条件。**

 **提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T16:25:08.180

bash 函数来做到这一点（也适用于 zsh）：

```
function lazyclone {
    url=$1;
    reponame=$(echo $url | awk -F/ '{print $NF}' | sed -e 's/.git$//');
    git clone $url $reponame;
    cd $reponame;
} 
```

该`awk`命令打印最后一部分之后的部分`/`（例如 from`http://example.com/myrepo.git`到`myrepo.git`）。该`sed`命令删除尾随`.git`

用法：

```
$ pwd
~/
$ lazyclone https://github.com/dbr/tvdb_api.git
tvdb_api
Cloning into 'tvdb_api'...
remote: Counting objects: 1477, done.
remote: Compressing objects: 100% (534/534), done.
remote: Total 1477 (delta 952), reused 1462 (delta 940)
Receiving objects: 100% (1477/1477), 268.48 KiB | 202 KiB/s, done.
Resolving deltas: 100% (952/952), done.
$ pwd
~/tvdb_api 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:02:34.527

使用 git clone，您可以指定要克隆到的文件夹，而不是允许它自动命名。

```
dir=myclone
git clone git://somerepo "$dir"
cd "$dir"
open "$dir" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T05:01:13.063

@dbr 回答的改进：

```
function lazyclone {
    reponame=${1##*/}
    reponame=${reponame%.git}
    git clone "$1" "$reponame";
    cd "$reponame";
} 
```

借助 Bash 的参数扩展，我们可以摆脱`awk`和`sed`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-24T23:24:11.250

bash 参数版本非常好，我选择了`basename`因为它看起来更干净

```
function gclocd {
  # git clone and enter the cloned file
  if [[ -z "$2" ]]; then
    reponame=$(basename "$1" ".git");
  else
    reponame=$2;
  fi
    git clone "$1" "$reponame";
  cd "$reponame";
} 
```

我为一堆这样的事情使用简短的、令人难忘的制表符可完成的函数名称，并将它们`.bashrc`作为别名/函数放在我的中，例如`gcmmt`for `git commit -m`. `lazy`很可能已经是你 shell 中事物的前缀，这意味着每次都要输入更多内容......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-05T04:09:26.537

我们可以直接`cd`进入最新创建的目录，而不是从 url 获取目录名称。下面是对应的shell脚本：

```
gclcd() {
    git clone --recursive $* && cd "$(ls -t | head -1)"
} 
```**

# mysql - mysql搜索与空值不一致

> ID：12058710
> 
> 赞同：1
> 
> 时间：2012-08-21T15:54:58.787
> 
> 标签：mysql, null

我正在使用 MySQL 社区版 5.1。这是一个奇怪的问题。我有一个表，其中某个列的值是`null`. 可以说我们有

`table1`是

```
| col_1 |   id  |
 null    1 
```

当我这样做时：

`select col_1 from table1 where id = 1`

我明白了->

```
| col_1 |
 null 
```

但是当我这样做时：

`select col_1 from table1 where id = 1 and col_1 != "x";`

查询不返回任何结果。

我希望这里的第二个查询返回与第一个查询相同的结果，因为值`col_1`显然不是“x”。为什么会这样？我可以对第二个查询做些什么，以便它按应有的方式工作，即。返回 id = 1 的行和`col_1`除“x”之外的所有值？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:00:19.880

请参阅[SQL 中 NULL 的行为](http://www-cs-students.stanford.edu/~wlam/compsci/sqlnulls)

> 涉及 NULL 的两个值之间的布尔比较既不返回 true 也不返回 false，但在 SQL 的三值逻辑中是未知的。[3] 例如，NULL 不等于 NULL 或 NULL 不等于 NULL 都是真的。测试一个值是否为 NULL 需要一个表达式，例如 IS NULL 或 IS NOT NULL。

因此，您可以将查询更改为：

```
select col_1 
from table1 
where id = 1 
    and (col_1 is null or col_1 != 'x'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T16:07:57.663

正如其他人所提到的，与一个或多个`NULL`操作数的比较会导致`NULL`. 您可以改为使用 MySQL 的[`NULL`-safe 相等运算符](http://dev.mysql.com/doc/en/comparison-operators.html#operator_equal-to), `<=>`：

```
SELECT col_1 FROM table1 WHERE id = 1 AND NOT col_1 <=> "x" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T16:00:47.880

在 mysql 中使用 != 将 NULL 与一个值进行比较可能会产生意想不到的结果。这是 SQL 的一个愚蠢的怪癖（对不起，我没有更好的答案） NULL 对他们来说意味着“没有价值”，因此无法比较。见[http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

尝试：

```
select col_1 from table1 where id = 1 and (col_1 != "x" OR col_1 IS NULL); 
```

# python - 给定名称列表中关联数字的 Python 总和

> ID：12058712
> 
> 赞同：-1
> 
> 时间：2012-08-21T15:55:06.417
> 
> 标签：python

我有一个列表字典：

```
d = {'a': ['Adam', 'Book', 4], 'b': ['Bill', 'TV', 6, 'Jill', 'Sports', 1, 'Bill', 'Computer', 5], 'c': ['Bill', 'Sports', 3], 'd': ['Quin', 'Computer', 3, 'Adam', 'TV', 3], 'e': ['Quin', 'TV', 2, 'Quin', 'Book', 5], 'f': ['Adam', 'Computer', 7]} 
```

每个列表代表该人使用给定对象的次数。例如，对于列表“a”，它显示每周`Adam`读取一次。`Book` `4`在“b”中，每周`Bill`观看一次，“ ”每周播放一次。`TV` `6``Jill``sports`

我想在每个列表中找到一个人做某事的总次数。

在这种情况下，输出将是这样的：

```
a: Adam 4
b: Bill 11, Jill 1
c: Bill 3
d: Quin 3, Adam 3
e: Quin 7
f: Adam 7 
```

不必是那种确切的格式，但类似的东西。

目前，我已经尝试使用 Counter 但它只计算人名，而不是与之关联的数字。我尝试只返回名称，然后返回数字，但这最终不适用于名称超过 1 个的列表，因为有些列表甚至有 6 个总名称。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:12:02.320

If you *really* want to do this with your data structure, you could do something like:

```
from collections import defaultdict

for k, lst in d.iteritems():
    counts = defaultdict(int)
    for i in range(0, len(lst), 3):
        counts[lst[i]] += lst[i + 2]
    print k, ", ".join(["%s %d" % (n, c) for n, c in counts.items()]) 
```

*However*, a better idea would be to store the data in a sensible data structure. Storing information in lists with rules like "Each list comes in groups of threes, where the first of each three is the name etc" makes working with the data clumsy and counterintuitive. Instead, what if you stored the data as:

```
d = {'a': {'Adam': {'Book': 4}},
     'b': {'Bill': {'TV': 6, 'Computer': 5}, 'Jill': {'Sports': 1}},
     'c': {'Bill': {'Sports': 3}},
     'd': {'Quin': {'Computer': 3}, 'Adam': {'TV': 3}},
     'e': {'Quin': {'TV': 2, 'Book': 5}},
     'f': {'Adam': {'Computer': 7}}} 
```

Then, you could answer the question like this:

```
for k, v in d.items():
    print k, ", ".join(["%s %d" % (n, sum(a.values())) for n, a in v.items()]) 
```

This would have many other benefits as well: You could find out how many times Adam read a book in "a" just by doing `d["a"]["Adam"]["Book"]` (or, if you're not sure that "Adam" or "Book" are there, `d["a"].get("Adam", {}).get("Book", 0)`). Other calculations based on this list would also be possible and useful.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:10:41.290

I think that a `defaultdict` and list slicing would be useful here ...

```
a = ['Adam', 'TV', 4, 'Adam', 'Bike', 4 ]
print a[::3] # ['Adam', 'Adam' ]
print a[2::3] # [4, 4]

from collections import defaultdict
for key,value in d.items():
    c = defaultdict(int)
    for k,v in zip(value[::3],value[2::3]):
        c[k] += v
    print key, c 
```

A `Counter` would work too, but it's not introduced until python2.7 whereas `defaultdict` is python2.5 compatible and provides the same functionality in this instance.

Although as others have stated, this seems to be a *very strange* data structure that you're using ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:13:04.150

This produces the desired result:

```
import collections
for k, v in sorted(d.iteritems()):
        tmp=collections.defaultdict(int)
        for i in xrange(0, len(v), 3):
                tmp[v[i]]+=v[i+2]
        print "{}: {}".format(k,
                ", ".join("%s %s" % (a, b)
                        for a, b in sorted(tmp.iteritems()))) 
```

Output:

```
a: Adam 4
b: Bill 11, Jill 1
c: Bill 3
d: Adam 3, Quin 3
e: Quin 7
f: Adam 7 
```

# ruby-on-rails - simple_form，选择 group_method with where

> ID：12058714
> 
> 赞同：0
> 
> 时间：2012-08-21T15:55:09.943
> 
> 标签：ruby-on-rails, associations, simple-form

我有模型：案例、医生和角色 案例
医生`belongs_to :doctor`
角色`has_one :role`
表有 2 列：在我创建案例的位置，我选择医生。与医生 goup 的诊所。 代码：`doctor_id``rang`

`<select>`

```
= f.input :doctor_id, label: false, collection: Clinic.order(:title),
          label_method: :doctor_option, as: :grouped_select,
          group_method: :doctors, group_label_method: :title 
```

ps 我使用 simple_form
我想要什么：
我想要选择 rang == 2 的医生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T12:27:50.553

首先，我没有看到任何关于 Clinic 的模型参考，所以我不确定您到底在寻找什么，但鉴于我对您的理解正确，这就是我的做法。

在您的表格中（我假设原始表格用于创建案例）。

```
<% simple_form_for @case do |f| %>
   <%= f.association :doctor, collection: Doctor.where(rang: 2), 
    as: :grouped_select, group_method: :clinics %>
<% end %> 
```

由于我还没有看到 Clinics 模型，我不确定这是否有效，但如果所有模型都设置正确，这可能会成功。

# emacs - 对 Emacs 自定义系统感到困惑

> ID：12058717
> 
> 赞同：47
> 
> 时间：2012-08-21T15:55:18.710
> 
> 标签：emacs, elisp

有几个类似的设置功能：

1.  设置和设置
2.  默认设置
3.  自定义
4.  自定义设置值
5.  自定义设置变量
6.  自定义设置值
7.  自定义设置变量

那么，这些功能有什么区别呢？

如果我想将自己的偏好设置为附加组件，对于这些场景：

1.  如果通过 defcustom 设置变量，哪个设置功能会更好？
2.  那么 defvar 的变量设置呢？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-21T16:28:57.577

对您的问题的简短回答是：

*   使用`setq`or`setq-default`定义的变量`defvar`。

*   使用`setq`, `setq-default`, 或`Customize`定义的变量的机制`defcustom`

以下是长答案。

您将要使用的功能如下：

*   `set`是设置变量值的主要函数。

*   `setq`是另一个自动引用其第一个参数的版本。这很有用，因为引用第一个参数是您几乎一直想做的事情。

*   有些变量不能全局设置。每当您设置变量时，它只会为当前缓冲区设置。如果要模拟全局设置此变量，请使用`set-default`or `setq-default`。

包编写器使用的功能是：

*   `defvar`它允许包编写者定义一个变量并提供一些文档。此功能不是必需的，但可以使用户的生活更轻松。

*   `defcustom`建立在`defvar`. 它告诉 emacs 它是一个变量，它允许开发人员创建一个`custom`接口来设置值。开发人员可以说，“这个变量只能包含值 'foo 或 'bar”。

设置变量可以通过两种方式完成：

1.  如果`defvar`使用，则只能由用户`.emacs`通过使用`set`函数（或变体）在其中设置值

2.  如果`defcustom`使用了，则可以使用`set`（参见 1.）或使用`Customize`. 当使用自定义机制时，emacs 会生成一些代码，它会放置在`custom-set-variables`. 用户不应使用此功能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T16:30:52.807

它们基本上都是通向同一事物的途径。虽然有一些重要的区别。了解它们的最佳方式是阅读 Emacs 和 Elisp 的手册（请参阅`C-h i)`。不过，头顶上：

*   `set`是一个“低级”的变量赋值
*   `(setq foo bar)`是简写`(set (quote foo) bar)`
*   `(set-default foo bar)``foo`表示“除非在当前缓冲区中有更明确的范围定义，否则使用值 bar”，并适用于所有缓冲区。
*   `defcustom`用于将变量标记为期望用户能够通过该`customize`功能安全地修改的变量。
*   `custom-set-value`和`customize-set-value`是两个指向同一个函数的名字。它们是使用`customize`系统的便捷方法。
*   `custom-set-variables`并`customize-set-variables`用于激活一些通过定制的定制变量，IIRC。

一般来说，建议使用`M-x customize`来改变周围的事物。您可以自由设置`defcustom`使用`set`或`setq`在您`.emacs`的 中定义的内容，如果您稍后更改它，自定义系统会警告您`customize`。

`defcustom`通常仅由编写用于分发的软件包的人使用，而且我认为我没有见过有人`custom-set-*`在内部文件之外使用来自定义。`setq`在人们的初始化文件中很常见，用于设置他们喜欢的东西，无论这些东西是否标记为使用`customize`。

我对这一切都没有完全理解，希望其他人可以提供更多的信息，但我认为这是一个相当不错的概述：P

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-21T16:45:27.197

1.  `set`并且`setq`是用于分配任何类型变量的最低级别的原语。
2.  `set-default`并且`setq-default`是与缓冲区局部变量一起使用的 emacs 扩展，以允许设置用于新缓冲区的默认值。3-7。所有“自定义”内容都是后来添加的，旨在支持用于管理旨在用作用户首选项的变量的用户界面。
3.  `defcustom`类似于`defvar`，但允许您指定选项层次结构中的位置以及数据类型信息，以便 UI 可以将值显示为菜单，或自动将用户输入转换为适当的类型。
4.  我认为没有`custom-set-value`功能。
5.  `custom-set-variables`保存所有用户的选项时由自定义 UI 使用。它列出了用户从默认值更改的所有变量。6-7。`custom-set-value`并由`custom-set-variable`自定义 UI 用于提示用户选项变量的当前值和默认值，并分配它们。您通常不会自己调用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-27T12:50:22.677

另外，由于引入了词法绑定，这些命令之间的差异增加了，尽管如果您只想自定义一些变量，这些差异实际上并不相关。

构造`def...`声明*全局*变量。这些`set...`函数*设置*变量，无论是全局变量还是局部变量。何时`x`既不是局部变量（当前函数的形式参数或由`let`表单或类似声明）也不是由`def...`表单定义，并且您编写`(setq x 0)`字节编译器甚至会显示警告

```
Warning: assignment to free variable `x' 
```

`defvar`用, `defcustom`,声明的变量`defconst`是动态绑定的，即当你有一个构造时

```
(let ((lisp-indent-offset 2))
  (pp (some-function))) 
```

该函数`some-function`将看到全局变量的变化`lisp-indent-offset`。

当变量未动态绑定时，例如

```
(let ((my-local-var 1))
  (some-function)) 
```

where`my-local-var`没有全局值，则`some-function`不会看到分配的值，因为它是词法范围的。

另一方面，动态范围的变量*不会*被捕获到词法闭包中。

更多细节可以在[http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html中看到](http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html)

# python - BottlePy 预请求处理

> ID：12058720
> 
> 赞同：0
> 
> 时间：2012-08-21T15:55:34.670
> 
> 标签：python, uwsgi, bottle

我正在寻找一种`foo()`在进入*路由*之前让所有请求进入函数内部的方法。

这样我就可以`request.environ`在做真正的工作之前阅读。

我正在尝试这样做，以免重复代码，但找不到在**BottlyPy**中执行此类操作的方法...

我的设置是：nginx -> uwsgi -> bottlepy。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:00:19.333

这就是[插件](http://bottlepy.org/docs/dev/plugindev.html)的用途。

这是一个例子：

```
import bottle
from bottle import request, response

def foo(callback):
    def wrapper(*args, **kwargs):
        # before view function execution
        print(request.environ)  # do whatever you want

        body = callback(*args, **kwargs)  # this line basically means "call the view normally"

        # after view function execution
        response.headers['X-Foo'] = 'Bar'  # you don't need this, just an example

        return body  # another 'mandatory' line: return what the view returned (you can change it too)
    return wrapper

bottle.install(foo) 
```

# ruby-on-rails - “Sunspot” Gem 区分 UTF-8 字符

> ID：12058721
> 
> 赞同：0
> 
> 时间：2012-08-21T15:55:35.577
> 
> 标签：ruby-on-rails, utf-8, full-text-search, sunspot-rails, rsolr

在 Rails 应用程序中，我开始使用 sunspot => [https://github.com/sunspot/sunspot/blob/master/README.md](https://github.com/sunspot/sunspot/blob/master/README.md)

一切都很顺利，直到我注意到这一点（取自 rails-console）：

```
1.9.3p194 :002 > MyModel.search{fulltext "leon"}.results
=> [#<MyModel id: 16, name: "Leon">]
1.9.3p194 :003 > MyModel.search{fulltext "león"}.results
=> [#<MyModel id: 18, name: "León">] 
```

我怎样才能告诉系统不要区分“leon”和“león”（我想要像 search{fulltext "leon"} => [#MyModel id: 16 ... , #MyModel id: 18... ])

我一直在寻找这个问题，并且每次都发现相同的响应：

> 使用 Gemfile 中的这一行，同时 rsolr 的下一个版本：gem 'rsolr', :git => "https://github.com/mwmitchell/rsolr.git"

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:57:42.553

感谢您的回复。至少我昨晚用另一个想法解决了这个问题，我从[http://codeshooter.wordpress.com/2011/01/13/full-text-search-in-in-rails-with-sunspot-和-solr/](http://codeshooter.wordpress.com/2011/01/13/full-text-search-in-in-rails-with-sunspot-and-solr/)

这个想法在**Restaurant.rb**

```
text :name do 
  self.name.my_normalize
end 
```

和功能

```
to_s.mb_chars.normalize(:kd).gsub(/[^\x00-\x7F]/,'').downcase 
```

该行适用于 "äáàÁÄÀ" --- "aaaaaa" 之类的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:13:22.773

in the schema.xml you need to add a character filter as described in [AnalyzersTokenizersTokenFilters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.MappingCharFilterFactory) for example:

```
<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/> 
```

and in the you should have mapping-ISOLatin1Accent.txt you should have entries that will map the unicode byte sequence to a asci character sequence. You can see an example here [mapping-ISOLatin1Accent.txt](http://code.google.com/p/allforgood/source/browse/trunk/SOLR/app/conf/mapping-ISOLatin1Accent.txt?r=365)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:59:00.177

您需要在 Solr（应用程序，而不是 gem）配置文件中进行更改。Solr 被“嵌入”在 gem 中，但您可以访问它的配置，就像它是单独安装的一样。查看 Solr 文档。

# c# - 在列表上运行 Dijkstra 算法 在 C# 中

> ID：12058722
> 
> 赞同：0
> 
> 时间：2012-08-21T15:55:35.810
> 
> 标签：c#, list, point, zedgraph

我有一个 C# 中的点类型列表。我想在这个列表中的第一个条目是起始位置的点列表上运行[Dijkstra 算法。](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

有没有办法使用现有的库来做到这一点？

如果这样的库不存在，有没有办法用 x 和 y 坐标计算两点之间的距离。例如，计算A点（x坐标=2，y坐标=4）和B点（（x坐标=9，y坐标=7）的距离。

我已经使用 ZedGraph 库来构建图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:43:11.960

我认为您误解了 Dijkstra 算法的含义。

> 对于图中的给定源顶点（节点），算法会在该顶点与其他所有顶点之间找到成本最低的路径（即最短路径）。

您需要（我认为）基于坐标的两点之间的最短距离。

可以使用基本数学计算两点之间的距离：

```
Point p = new Point(4, 5);
Point r = new Point(10, 2);

double distance = Math.Sqrt(Math.Pow(p.X - r.X, 2) + Math.Pow(p.Y - r.Y, 2)); 
```

使用这些知识，可以使用如下两个函数来解决问题：

**`p`返回和之间的距离`r`：**

```
static double distance(Point p, Point r)
{
     return Math.Sqrt(Math.Pow(p.X - r.X, 2) + Math.Pow(p.Y - r.Y, 2));
} 
```

**返回距离列表`fromIndex`第 th 个元素最近的点的索引`points`：**

```
static int closestPoint(List<Point> points, int fromIndex)
{
    Point start = points[fromIndex];
    int resultIndex = 0;

    for (int i = 1; i < points.Count; i++)
    {
        if (fromIndex == i) 
            continue;

        Point current = points[i];

        if (distance(start, current) < distance(start, points[resultIndex]))
            resultIndex = i;
    }

    return resultIndex;
} 
```

真的很抱歉，如果我误会了你！

# python - Python 日志记录字典配置

> ID：12058723
> 
> 赞同：5
> 
> 时间：2012-08-21T15:55:46.687
> 
> 标签：python

我正在尝试为 Python 配置一些日志记录。来自 [http://docs.python.org/howto/logging.html](http://docs.python.org/howto/logging.html) 建议我们使用 YAML 配置文件——

```
version: 1
formatters:
  simple:
    format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
handlers:
  console:
    class: logging.StreamHandler
    level: DEBUG
    formatter: simple
    stream: ext://sys.stdout
loggers:
  simpleExample:
    level: DEBUG
    handlers: [console]
    propagate: no
root:
  level: DEBUG
  handlers: [console] 
```

在我的代码中，我将其用作 -

```
import logging.config

logging.config.dictConfig('logging.config') 
```

但是，在运行它时，我得到一个错误

```
Traceback (most recent call last):
  File "TestLogger.py", line 62, in <module>
    Test5()  
  File "TestLogger.py", line 55, in Test5
    logging.config.dictConfig('logging.dict.2.config') 
  File "/usr/lib/python2.7/logging/config.py", line 776, in dictConfig
    dictConfigClass(config).configure()
  File "/usr/lib/python2.7/logging/config.py", line 380, in __init__
    self.config = ConvertingDict(config)
ValueError: dictionary update sequence element #0 has length 1; 2 is required 
```

所以看来我以不正确的方式调用配置文件。只是找不到调用它的正确方法。请帮忙？非常感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T15:59:25.250

您需要加载并解析 YAML 文件：

```
import yaml
logging.config.dictConfig(yaml.load(open('logging.config', 'r'))) 
```

# java - 传递一个泛型类 作为论据

> ID：12058724
> 
> 赞同：6
> 
> 时间：2012-08-21T15:55:50.303
> 
> 标签：java, generics, type-erasure

我需要传递一个类作为参数，但我只有泛型类型 T。如何推断泛型类并将其传递给`fromJson()`？

```
public class Deserializer<T> implements JsonDeserializer<JsonList<T>> {
    public T someMethod(){
        ...
        T tag = gson.fromJson(obj, ???); // takes a class e.g. something.class
        ...
    }                       
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:57:18.853

感谢 Java 类型擦除，您不能。

[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:57:18.303

您无法在运行时生成它。这就是为什么`Gson#fromJson()`要求你通过它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:01:04.187

假设`Deserializer`是您的类，执行此操作的典型方法是将`Class`用作构造函数参数：

```
public class Deserializer<T> implements JsonDeserializer<JsonList<T>> {

  public static <T> Deserializer<T> newInstance(Class<T> c) {
    return new Deserializer<T>(c);
  }

  private final Class<T> clazz;
  private Deserializer(Class<T> c) { this.clazz = c; }

  public T someMethod(){
    ...
    T tag = gson.fromJson(obj, clazz); // takes a class e.g. something.class
    ...
  }                       
} 
```

然后在客户端代码中：

```
Deserializer<String> d = Deserializer.newInstance(String.class); 
```

# android - 单击通知后关闭状态栏

> ID：12058726
> 
> 赞同：6
> 
> 时间：2012-08-21T15:55:59.710
> 
> 标签：android, notifications, statusbar

我的通知包含几个按钮：

*   1个按钮启动主要活动（这样做时应该关闭状态栏）
*   其中 4 个发送未决意图来控制音乐（应保持状态栏打开）

问题是，第一个按钮没有关闭状态栏......

第一个按钮发送的 PendingIntent ：

```
Intent activityIntent = new Intent(smp, MusicShaker.class)
            .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                    | Intent.FLAG_ACTIVITY_SINGLE_TOP);
activityIntent.setAction(MyIntentAction.DO_LAUNCH_ACTIVITY_FROM_NOTIF);
remoteViews.setOnClickPendingIntent(R.id.notif_album_IV, PendingIntent
            .getActivity(ctxt, 0, activityIntent,
                    PendingIntent.FLAG_CANCEL_CURRENT)); 
```

活动已正确启动，但状态栏停留在那里并且不会自行关闭。
我错过/误解了一面旗帜吗？我可以从 MyActivity.onResume() 关闭状态栏吗？
编辑：顺便说一下，通知是由服务推送的

谢谢 =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-02T15:07:56.157

您只需要在创建构建器时指定 setAutoCancel(true)。这就是全部:)

```
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("title goes here")
            .setContentText("content text goes here").setAutoCancel(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:24:12.883

好的，我找到了解决方案......我无法重现标准通知产生的相同行为，所以我：
- 使我的 imageButton “notif_album_IV” 不可点击，并将其更改为 ImageView
- 使用此代码：

```
builder.setContentIntent(PendingIntent.getActivity(smp, 0,
  activityIntent,PendingIntent.FLAG_CANCEL_CURRENT)) 
```

不是在图像上“手动”设置 setOnClickPendingIntent，而是由内容背景处理意图广播

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T17:37:23.577

是的，当您的应用程序启动时，您必须以编程方式取消通知。

```
NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.cancel(NOTIFICATION_ID); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-08T09:28:34.953

这对我有用：

```
sendBroadcast(new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS)); 
```

# javascript - 容器 IE8 中的固定 div 问题

> ID：12058728
> 
> 赞同：0
> 
> 时间：2012-08-21T15:56:00.740
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8

> **可能重复：**
> [IE8 中的 pageYOffset 滚动和动画](https://stackoverflow.com/questions/10286162/pageyoffset-scrolling-and-animation-in-ie8)

在我之前的问题中：

[容器内的固定 div](https://stackoverflow.com/questions/11888317/a-fixed-div-within-a-container/11888396#11888396)

答案和解决方案是：

[http://jsfiddle.net/BbAck/3](http://jsfiddle.net/BbAck/3)

经过进一步测试后，我遇到的问题是它在 IE8 中不起作用。

我在这里缺少什么，我应该在哪里解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:53:59.913

尝试改变：

```
yOffset = window.pageYOffset; 
```

经过：

```
yOffset = $(window).scrollTop(); 
```

并确保您的页面具有 html5 文档类型：

```
<!DOCTYPE html> 
```

[http://jsfiddle.net/BbAck/4/](http://jsfiddle.net/BbAck/4/)

# asp.net - 不可见的 FileUpload 控件导致 IE 中的 javascript 回发错误

> ID：12058731
> 
> 赞同：3
> 
> 时间：2012-08-21T15:56:11.190
> 
> 标签：asp.net, .net, internet-explorer, webforms

我有带有 Fileupload 控件和图像的 asp.net webforms 页面。当用户单击图像时，我触发 FileUpload 单击，当单击确定时，我在客户端调用 __doPostBack。如果 FileUpload 可见，它工作正常，但是当我设置`style='visibility: hidden'`或`display: none`- javascript 给出错误：访问被拒绝！它只在 IE 中重现，而不是 FF 或 chrome。谁能告诉我如何避免这种情况并将文件发布到服务器？我试过 input type='file' 和 runat='server', non-server input-file - 结果是一样的......

HTML：

```
<input id="_ctl00_fuplImage" type="file" style="visibility: hidden" name="$ctl00$fuplImage"> 
```

JavaScript：

```
var fileupload = $('#<%= fuplImage.ClientID %>');

$('#<%= imgPhoto.ClientID %>').click(function() {
    fileupload.click();
});

fileupload.change(function() {
    var val = fileupload.val();
    if (val == '') return;
    __doPostBack(fileupload.attr('id'), val);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:10:22.527

IE（仅限）不允许发送带有隐藏文件上传输入的表单是无法解决的安全问题。非常感谢您的帮助。

# c# - 数据库脚本运行时对用户有什么好的反馈

> ID：12058738
> 
> 赞同：0
> 
> 时间：2012-08-21T15:56:28.997
> 
> 标签：c#, winforms

C# WinForms：在我的应用程序中，当用户单击工具栏按钮时，我会在后端运行一个 SQL 脚本，运行大约需要 2 分钟。这很好:) 这就是运行所需的时间。但是当这个脚本正在运行时，我正在考虑向用户显示一些反馈，如果我可以快速简单地做一些事情，那么在脚本运行时主窗体仍然可以响应，那就更好了，但不是真的有必要..我主要是在想向用户显示一些视觉反馈，表明脚本正在运行......

你有什么建议？快速而肮脏的方法很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:01:04.313

看看[BackGroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类。您可以在后台运行您的 sql 查询，同时 UI 保持对用户的响应。对于简单的操作，它可以轻松实现，消除与线程操作相关的复杂性。您可以在后台工作程序完成运行后获得反馈。

# php - 将 swf 渲染为 png 或其他格式？

> ID：12058741
> 
> 赞同：0
> 
> 时间：2012-08-21T15:56:37.120
> 
> 标签：php, flash, server-side, gnash

我需要渲染`SWF`传递的 flash vars 参数的最终状态。

假设我使用`var text="Some text"`，并且 swf 在静态背景上显示文本。我需要将其渲染为 png 文件，我已经尝试使用 gnash 但到目前为止没有运气，这是我正在运行的命令的示例。

> gnash --screenshot last --screenshot-file imagename.png -1 -r1 test.swf -P "FlashVars=parameter=text"

问题是这会渲染背景图像，而没有应该在它上面的文本。

~~我不能使用`swftools`，因为我不控制服务器，他们不想安装软件。~~

现在我可以在服务器上安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:58:01.223

嗯，您可以访问 swf 代码吗？如果是这样，您可以例如将舞台的内容保存到位图，然后保存为 png/jpeg，您可以将其传输到服务器端或直接提供给客户端以供下载。

查看这篇文章的示例代码[尝试使用 BitmapData 捕获舞台区域](https://stackoverflow.com/questions/2450381/trying-to-capture-stage-area-using-bitmapdata)

# javascript - 检查 'this' 是 $(this) 还是普通的旧 'this'

> ID：12058749
> 
> 赞同：3
> 
> 时间：2012-08-21T15:57:02.610
> 
> 标签：javascript, jquery

我有一个功能：

```
function myFunction(){
var id = $(this).attr('id');
} 
```

现在有时，myFunction 会以 $(this) 作为上下文调用，但有时上下文只是“this”。

在一行中，我该如何做类似的事情：

```
if(this == $(this)){
var e = $(this);
} 
```

基本上是一个测试，看看 'this' 是 jQuery 'this' 还是 JS 'this'。

可能的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T15:58:31.803

```
if (this.jquery) { // refers to jQuery version
  // jQuery object
} 
```

或者：

```
if (this instanceof jQuery) { // prototype chain
  // jQuery object
} 
```

但是，正如其他人所说，这并不重要，`$(this)`无论是否`this`已经是`jQuery`对象或 DOM 元素都可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T15:59:50.580

你也可以只做`var e = $(this)`when`this`是一个 jQuery 对象，或者如果它不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:04:04.323

处理它的一种方法是始终将其包装在`$(...)`. 像这样包装一个 jQuery 对象会创建一个克隆（请参阅[jQuery 文档](http://api.jquery.com/jQuery/#cloning-jquery-objects)），所以这个 HTML：

```
<a href="test" id="​​​​​​​​​​​​​​​​​​​​​​​​​test-link">Test Link</a>​​​​​​​​​​​​​​​​​​​​​​​ 
```

用这个 JS：

```
​var link = $('#test-link');
var doubleWrappedLink = $(link);

alert(doubleWrappedLink.attr('href'));​​​​​​​ 
```

将正确弹出“测试”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T23:05:36.683

您可以使用以下代码段：

```
if (obj instanceof jQuery || 'jquery' in Object(obj)) { } 
```

看一下：**[检查对象是否为 jQuery 对象](https://stackoverflow.com/a/25004941/2247494)**

# delphi - 如何检测编辑框中的 Enter 键？

> ID：12058750
> 
> 赞同：8
> 
> 时间：2012-08-21T15:57:03.517
> 
> 标签：delphi, keyboard-events

我有一个带有发送按钮的 UDP 信使，但让我很恼火的是我必须按下按钮而不是点击`Enter`. 所以我创建了程序`TForm1.Edit2KeyPress`。现在我不知道如何在`if (enter is pressed) then {code for sending message}`.

回答后我有新问题。我输入的任何内容都会逐个发送。这是我的代码单元chat1；

```
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, IdSocketHandle, StdCtrls;

type
  TForm1 = class(TForm)
   Button1: TButton;
   Memo1: TMemo;
Edit1: TEdit;
Button2: TButton;
Edit2: TEdit;
Label1: TLabel;
procedure Button1Click(Sender: TObject);
procedure FormActivate(Sender: TObject);
procedure Button2Click(Sender: TObject);
procedure Edit2KeyPress(Sender: TObject; var Key: Char);
private
Activated: Boolean;
procedure SearchEvent(ResultIP, ResultName: String);
procedure UDPRead(Sender: TObject; AData: TStream;
  ABinding: TIdSocketHandle);
procedure UDPException(Sender: TObject);
public
end;

var
Form1: TForm1;
ss:string  ;

implementation

uses UDP;

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
begin
  UDPSearchForm.SearchEvent := SearchEvent;
  UDPSearchForm.Left := Left;
  UDPSearchForm.Top := Top;
  UDPSearchForm.AktIP := Edit1.Text;
UDPSearchForm.SearchPartner;
end;

procedure TForm1.SearchEvent(ResultIP, ResultName: String);
begin
  Edit1.Text := ResultIP;
  Label1.Caption := ResultName;
end;

procedure TForm1.FormActivate(Sender: TObject);
var
  s, s2: String;
begin
  if Activated then exit;
  Memo1.Clear;
  Activated := true;
  UDPSearchForm.OnUDPRead := UDPRead;
  UDPSearchForm.OnException := UDPException;
  UDPSearchForm.Active := true;
  s := UDPSearchForm.LocalAddress;
  s2 := UDPSearchForm.WSGetHostByAddr(s);
  Memo1.Lines.Add('I''m (' + s + ') ' + s2);
end;

procedure TForm1.UDPRead(Sender: TObject; AData: TStream;
   ABinding: TIdSocketHandle);
var
  Buffer: Array [0..2047] of Byte;
  count: Integer;
  PeerIP: String;
  PeerPort: Integer;
  s: String;
  i: Integer;
begin
  PeerIP := ABinding.PeerIP;
  PeerPort:= ABinding.PeerPort;
  count := AData.Size;
  if count > Length(Buffer) then begin
    exit;
  end;
  AData.Read(Buffer, count);
  if (Buffer[0] <> $00) and  (Buffer[0] <> $01) then begin  // not search
    Edit1.Text:= PeerIP;
  end;
  case Buffer[0] of
   $00: begin   // search request
    case count of
     4: begin
      case Buffer[1] of
       0: begin
        Buffer[0] := $01;
         UDPSearchForm.Host := PeerIP;
         UDPSearchForm.DoSend(Buffer, 4, Length(Buffer));
        Memo1.Lines.Add('Inquiry [' + UDPSearchForm.WSGetHostByAddr(PeerIP) + '(' +     PeerIP + ')' +          ' Port: ' + IntToStr(PeerPort) +
      ']');
   end;
  end;
 end;
end;
   end;
   $01: begin // Search Reply
    case count of
     4: begin
      case Buffer[1] of 0:
        begin
        ss := UDPSearchForm.WSGetHostByAddr(PeerIP);
    s := '[' + ss + '(' + PeerIP + ')' +
      ' Client Port: ' + IntToStr(PeerPort) +
      ']';
    Memo1.Lines.Add('Inquiry Reply ' + s);
    if PeerIp = UDPSearchForm.LocalAddress then begin
      ss := '<myself>' + ss;
    end;
    UDPSearchForm.Add(PeerIP, ss);
    end;
   end;
  end;
 end;
end;
    $10: begin // Text
     case Buffer[1] of
      0: begin
       s := '';
           for i := 4 to count-1 do begin
             s := s + char(Buffer[i]);
           end;
       Memo1.Lines.Add(ss+'  says: ' + s);
      end;
     end;
    end;
  end;
end;

procedure TForm1.UDPException(Sender: TObject);
begin
  //nothing
end;

procedure TForm1.Button2Click(Sender: TObject);
var
  x: Array[0..100] of Byte;
  i: Integer;
begin
  UDPSearchForm.Host := Edit1.Text;
  UDPSearchForm.Active := true;
  x[0] := $10; // Text
  x[1] := 0;   // Type 0
  for i := 1 to Length(Edit2.Text) do begin
    x[i+3] := Byte(Edit2.Text[i]);
  end;
  UDPSearchForm.DoSend(x, 4+Length(Edit2.Text), length(x));

   Memo1.Text:=Memo1.Text+Edit2.Text+#13#10;
end;

procedure TForm1.Edit2KeyPress(Sender: TObject; var Key: Char);
var
  x: Array[0..100] of Byte;
  i: Integer;
begin
if Ord(Key) = VK_RETURN then
  UDPSearchForm.Host := Edit1.Text;
  UDPSearchForm.Active := true;
  x[0] := $10; // Text
  x[1] := 0;   // Type 0
  for i := 1 to Length(Edit2.Text) do begin
    x[i+3] := Byte(Edit2.Text[i]);
  end;
  UDPSearchForm.DoSend(x, 4+Length(Edit2.Text), length(x));

   Memo1.Text:=Memo1.Text+Edit2.Text+#13#10;

end;

end. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T16:11:22.843

将[`Default`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TButton.Default)发送按钮的属性设置为 True。当用户按下 Enter 时，它的`OnClick`事件将自动触发。

# php - FOREACH 在每次迭代时不准备 PDO 语句

> ID：12058752
> 
> 赞同：1
> 
> 时间：2012-08-21T15:57:10.697
> 
> 标签：php, sql, foreach, pdo

我正在尝试使用 PDO 运行 FOREACH，但到目前为止，我的代码似乎只为 FOREACH 迭代一次并且只返回第一个值。

这是我所拥有的：

```
$colors = $_GET['color'];
$colors = explode(' ', $colors);
foreach ($colors as $color) 
    {
    $items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
    $items -> bindValue(":colorbase1", $color);
    }
$items ->execute();
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{
echo $info['color_base1'];
} 
```

请注意，$colors 包含从复选框和 jquery 获得的超过 1 种不同的颜色。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:03:16.257

您的代码嵌套错误：您想准备一次查询，并多次执行它，但您正在做相反的事情。

而不是：

```
foreach ( ... )
{
    prepare( ... );
    bind( ... );
}
execute(); 
```

你需要：

```
prepare( ... );
foreach ( ... )
{
    bind( ... );
    $results[] = execute();
} 
```

或者，您可以使用 SQL`IN`子句来构建一个查询，而不是多次来回访问数据库的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:20:05.350

在这里试试这个：

```
<?php 
//Check your vars before setting!
$colors = (!empty($_GET['color'])?$_GET['color']:null);
$colors = explode(' ', $colors);

//Prepare the query once
$items = $con->prepare("SELECT * FROM item_descr WHERE color_base1 = :colorbase");
//Use bindParam then you can set $color later on
$items->bindParam(":colorbase", $color);

//Execute the query, iterating over each color
$results=array();
foreach ($colors as $color){
    $items->execute();
    //Fetch the result and store in $results
    $results[] = $items->fetchAll(PDO::FETCH_ASSOC);
}

//Loop through results
if(!empty($results)){
    foreach($results as $result) {
        foreach($result as $row){
            echo $row['color_base1'].'<br />';
        }
    }
}else{
    //empty
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:03:23.437

你可以提供一个`print_r`吗`$_GET['color']`？

这样做的原因 - 我认为如果你在 q 字符串中有空格，那么第一个空格将不会进一步发展，因此 foreach 只会运行一次。

# awk - 相当于 MySQL 的 substring_index 的 awk

> ID：12058753
> 
> 赞同：2
> 
> 时间：2012-08-21T15:57:15.187
> 
> 标签：awk

我有带分隔字段的字符串，但每个字段的数量不同，例如：

*   这个那个
*   这个/那个/另一个
*   这个/那个/那个/其他/东西

我想在每种情况下检索最后两个字段，即：

*   这个那个
*   那个/那个
*   其他/东西

这在 MySQL 中很容易使用 substring_index 函数，我看到[这个线程](https://stackoverflow.com/questions/6885793/php-equivalent-of-mysqls-function-substring-index)解释了如何在 PHP 中做到这一点。

有人可以帮助我在命令行中使用 awk 实现相同的目标吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:16:41.680

```
echo 'this/that/theother/stuff' | awk -F/ '{print $(NF-1) "/" $(NF)}' 
```

# c++ - 未记录的 GCC 扩展：结构中的 VLA

> ID：12058760
> 
> 赞同：11
> 
> 时间：2012-08-21T15:57:45.517
> 
> 标签：c++, memory, gcc, g++, variable-length-array

在阅读 Clang 文档时，我发现了以下有趣的花絮：[[1]](http://clang.llvm.org/docs/UsersManual.html#intentionally-unsupported-gcc-extensions)

> clang 不支持允许在结构中使用可变长度数组的 gcc 扩展。这有几个原因：第一，实现起来很棘手，第二，扩展完全没有文档记录，第三，扩展似乎很少使用。请注意，clang 确实支持灵活的数组成员（在结构末尾具有零或未指定大小的数组）。

如何使用此扩展程序？我的理解是，在构造函数中使用 alloca 会导致堆栈指针在调用函数的末尾被恢复，在这种情况下它将是构造函数——而不是在封闭结构的末尾。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:08:13.277

见[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=37428](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=37428)

还有[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42121](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42121)

是的，这很奇怪。

# java - 如何在通过“查看”测试通过很明显的情况下编写单元测试？

> ID：12058763
> 
> 赞同：5
> 
> 时间：2012-08-21T15:57:49.617
> 
> 标签：java, unit-testing

有时，我遇到的情况是，我需要测试的只是程序的执行是否达到了某个点，而没有抛出任何异常，或者程序被中断或陷入无限循环等。

我不明白的是如何为此编写单元测试。

例如，考虑以下“单元测试” -

```
@Test
public void testProgramExecution()
  {
     Program program = new Program();
     program.executeStep1();
     program.executeStep2();
     program.executeStep3();

     // if execution reaches this point, that means the program ran successfully. 
     // But what is the best practice?
     // If I leave it like this, the test will "pass", 
     // but I am not sure if this is good practice. 
  } 
```

通常，在测试结束时，我会有这样的声明——

```
assertEquals(expectedString, actualString); 
```

但是如何为上述情况编写 assertEquals 或其他类型的测试语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T16:00:30.693

您的代码看起来不错，只需删除注释，但留下这个：

```
// If execution reaches this point, that means the program ran successfully. 
```

所以你的代码的读者会理解为什么没有断言。

值得注意的是，在您的测试中调用的每个方法都应该具有某种效果，并且该效果应该被断言为正确发生，即使您说“您不在乎”。

如果您坚持不需要检查，请添加注释以解释原因 - 这将使读者免于浏览您的代码以自己找出“无关紧要”的原因，例如：

```
// No assertions have been made here because the state is unpredictable.
// Any problems with execution will be detected during integration tests. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:00:27.137

如果仅仅没有抛出异常就意味着测试已经通过，那么您不需要任何断言。诚然，这表明该动作没有可观察到的副作用，这有点罕见。在这种情况下，注释比断言更有用。

通常我发现只有当我有其他测试来检查实际结果时才会发生这种情况，有些测试证明输入*无效*，还有一些类似的测试证明输入*有效*。例如，如果我想验证输入必须在范围内，`[0, 100]`我可能会对一些中等值进行“完整”测试，然后是 -1 和 101 的无效值，然后是 0 和 100 的有效值，这只是证明它们是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:01:01.923

在这种情况下，我只是插入

```
assertTrue(true); 
```

在函数的最后......

# c - 如何在基于 C 的扩展中安全地使用指向 Ruby 对象的指针？

> ID：12058771
> 
> 赞同：3
> 
> 时间：2012-08-21T15:58:30.147
> 
> 标签：c, ruby, garbage-collection, gem

我正在考虑编写一个基于 C 的 Ruby gem 来加速[Prawn](http://prawn.majesticseacreature.com)中的文本换行。我之前读过一小部分 MRI 的 C 源代码，但还不了解用于构建扩展的 API。

在我的 C 代码中，我想获得一个指向 Ruby 字符串中数据的直接指针，然后逐个字节地遍历它。除此之外，我想将指针存储*在*我自己的缓冲区中`struct`，并且不仅在单个调用的范围内使用它们，而且在对扩展代码的*后续调用中使用它们。*

这可能吗？GC 可以*移动*字符串，使我的指针无效吗？而且，如何让 Ruby 知道我在自己的`struct`s 中持有指向字符串的指针（因此 GC 不会尝试回收它们）？这段代码能否以与 MRI 1.8 和 1.9 兼容的方式编写？

既然我问的是在基于 C 的 Ruby 扩展中安全地使用指针：我可以像在“常规”基于 C 的项目中一样使用`malloc`和吗？`free`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:06:39.363

马特提供的链接非常好。如果我以前找到它，它会节省我几天的时间。

您可以保留对 ruby​​ 字符串的引用和指向它们的指针。我建议冻结字符串。然后每次更改字符串的尝试都会失败。有一个函数 Data_Wrap_Struct() 可让您将自己的数据结构包装到 Ruby 对象中。除了数据结构和结构的类之外，该函数还接受两个函数参数。其中之一（标记）用于向垃圾收集器显示您的结构引用其他 ruby​​ 对象的位置。

我花了一些时间才明白，垃圾收集器实际上是在扫描所有 ruby​​ 线程的堆栈以寻找对 ruby​​ 对象的引用。因此，将 VALUE 保留在堆栈上也是一种保持对象被引用的安全方法。

> 这段代码能否以与 MRI 1.8 和 1.9 兼容的方式编写？

从 1.8 到 1.9，扩展的基本 API 没有太大变化（我认为）。但到目前为止，我只使用了 1.9。

> 我可以像在“常规”基于 C 的项目中一样使用 malloc 和 free 吗？

当然，我想不出任何为什么这不可能，只要您不期望垃圾收集器来处理分配的内存。

我很难混合 C++ 代码，用另一个版本的 gcc 编译，而不是编译 ruby​​ 解释器的版本。如果您遇到奇怪的启动行为，我会检查编译器版本差异。

# javascript - 如何检查html是否看起来“空”

> ID：12058772
> 
> 赞同：0
> 
> 时间：2012-08-21T15:58:30.487
> 
> 标签：javascript, jquery, aloha-editor

我正在与 Aloha-Editor (AE) 合作，正如[这里](https://raw.github.com/alohaeditor/Aloha-Editor/dev/doc/guides/source/functional_description.textile)所解释的，Aloha 似乎用`<br>`s 和段落做了一些时髦的事情，所以即使我有一些看起来很空的东西，它实际上不在 HTML 代码中（见下文）。

以下是 Aloha 有时可以生成的底层 HTML 示例，当它看起来很空时。

`<br class="aloha-end-br">`

`<br class="aloha-end-br" style="">`

`<p style=""><br class="aloha-end-br"></p>`

`&nbsp;`这不是 Aloha 产生的，但如果我添加了一个空格，它看起来仍然是空的。

我的问题是如何“修剪” contenteditable 的 html 内容，以便我知道它看起来是空的。我想使用这样的东西的原因是，我可以知道我是否应该将内容可编辑更新发送回服务器（如果它有内容），或者我是否应该删除简单地删除 contenteditable 元素并告诉服务器它已被删除（如果它是空的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:03:12.857

只需使用 获取文本`text()`，其中没有 HTML。`&nbsp;`是空格，所以你必须修剪它们。这是一个简单的函数：

```
function isEmpty( el ) {
    return $.trim( el.text() ) === '';
} 
```

用法：

```
if ( isEmpty( $( '#someId' ) ) {
    // It's empty!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:03:20.647

尝试在其上运行 .text() ，然后修剪空格并 nbsp 你得到的字符串。这将删除您的所有 html 标记。

# android - 旋转屏幕后更改背景颜色无效

> ID：12058774
> 
> 赞同：0
> 
> 时间：2012-08-21T15:58:38.917
> 
> 标签：android, user-interface, tcp, tcpclient

我是 Android 新手，现在我面临一个奇怪的问题，简而言之，问题是

**“一旦屏幕旋转，接收 TCP 消息然后更改 GUI 的背景颜色将无效。”**

**我要归档的内容：**

在Android设备上运行一个APP，通过TCP连接到PC。PC 可以向 APP 发送一个字符串，然后 APP 会根据收到的字符串做一些事情。在这种情况下，通过 TCP 将字符串“将背景颜色更改为红色（手机振动）/黑色”发送到 APP，因此 Android 用户将看到振动的致盲效果。

**问题是什么：**

我可以归档我想要的。但是一旦屏幕旋转，颜色就无法改变，只剩下震动。

**我试过的：**

我在APP上放了一个按钮，它将手动触发颜色变化事件（带振动）。即使我旋转屏幕，它也能正常工作。

进一步测试表明，TCP读取触发的改变背景颜色和动画等UI操作消失了，但铃声和振动保持不变。

我将视频上传到 Youtube [http://youtu.be/n0gxXzzf-bo](http://youtu.be/n0gxXzzf-bo)

下面是java代码，按钮和TCP调用相同的方法：ChangeColor()

```
public void ChangeColor(){
    Thread t= new Thread(new ChangeColorTest());        
    t.start();
}
public class ChangeColorTest  implements Runnable{

    public void run() {             
            try {
                    for(int i=0;i<3;i++){

                    mBlinkHandler.sendEmptyMessageDelayed(1, 0);                    
                    Thread.sleep(300);              
                    mBlinkHandler.sendEmptyMessageDelayed(2, 0);
                    Thread.sleep(300);                  

                    }

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }   

}

Handler mBlinkHandler = new Handler(){
        @Override
        public void handleMessage(Message msg){
             super.handleMessage(msg);
            //   mScreen = (LinearLayout)findViewById(R.id.mylinerlayout);
             if(msg.what==1){
             mScreen.setBackgroundColor(Color.RED);
             Vibratoration();
             }else if(msg.what==2){
             mScreen.setBackgroundColor(Color.BLACK);
             }
        }
    }; 
```

**我想知道什么？**

如果有人可以找到解决方案，将不胜感激。

**我的平台是什么？** 服务器 PC：Win7 64bits VS2010 C# Android 平台：4.0 Samsung S2 开发 IDE：Motodev SDK API：Android 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:06:08.963

一种解决方案是锁定屏幕使其无法旋转？（或者至少在此功能期间将其锁定。）

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:09:47.340

当您旋转屏幕时，Android 将重新创建整个活动 - 因此您的变量“mScreen”可能不会指向旋转后在屏幕上实际可见的实例。

您可以避免，android 重新创建活动，如下所述：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# java - Android：在 ListView 中删除行时出现 IndexOutOfBounds 错误

> ID：12058775
> 
> 赞同：0
> 
> 时间：2012-08-21T15:58:45.470
> 
> 标签：java, android, arrays, listview, indexoutofboundsexception

我有一个有 2 个屏幕的应用程序。第一个屏幕有一个电影列表视图，其中一行包含 3 个元素：在 strings.xml 中声明的 Title、Date 和 Gross。用户可以选择通过单击菜单按钮来添加电影，这会将他发送到另一个屏幕。第二个屏幕有 3 个编辑文本，分别对应 Title Date 和 Gross，返回屏幕 1 时立即按字母顺序排序。

同样，用户也可以通过长按弹出上下文菜单的行来编辑/删除条目。编辑功能的工作方式如下：

a.) 用户长按 Titanic 并选择编辑 b.) 行被删除，用户被带到屏幕 2 c.) 编辑文本填充了已删除行的初始数据 d.) 当用户编辑数据时，新电影被添加在 ListView 的底部。

当用户在 ListView 底部删除这个新电影时，就会出现问题。Logcat 给出了一个

```
 java.lang.IndexOutOfBoundsException: Invalid index 50, size is 50 
```

这是我的代码（请注意，我正在使用 Perst 来保存数据，但我认为这与我的问题无关紧要）：

```
 case R.id.contextedit:
            Lab9_082588FetchDetails row = (Lab9_082588FetchDetails)    getListView()
                    .getItemAtPosition(info.position);
            Intent editData = new Intent(MovieList.this,    Lab9_082588Edit.class);
        String startTitle = row.getTitle();
        String startGross = row.getGross();
        String startDate = row.getDate();

        editData.putExtra(Lab9_082588Edit.TITLE_STRING, startTitle);
        editData.putExtra(Lab9_082588Edit.GROSS_STRING, startGross);
        editData.putExtra(Lab9_082588Edit.DATE_STRING, startDate);
        startActivityForResult(editData, MovieList.EDIT_MOVIE);

        int posEdit = info.position;
        String editTitle = results.get(info.position).getTitle();
        results.remove(posEdit);
        adapter.notifyDataSetChanged();

                    //Perst
        Index<Lab9_082588FetchDetails> rootEdit = (Index<Lab9_082588FetchDetails>) db
                .getRoot();
        rootEdit.remove(editTitle, results.get((int) info.id));
        db.setRoot(rootEdit);

        return true; 
```

编辑类：

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection using item.getItemId()
    switch (item.getItemId()) {
    case R.id.edit:
        next();
        break;
    }
    return true;
}

private void next() {
    // TODO Auto-generated method stub
    EditText movieTitle = (EditText) findViewById(R.id.etTitle);
    EditText movieGross = (EditText) findViewById(R.id.etGross);
    EditText movieDate = (EditText) findViewById(R.id.etDate);

    String title = movieTitle.getText().toString();
    String gross = movieGross.getText().toString();
    String date = movieDate.getText().toString();

    if ((title.length() > 0) && (gross.length() > 0)
            && (date.length() == 4)) {

        Intent hobby = getIntent();
        hobby.putExtra(Lab9_082588Edit.TITLE_STRING, title);
        hobby.putExtra(Lab9_082588Edit.GROSS_STRING, gross);
        hobby.putExtra(Lab9_082588Edit.DATE_STRING, date);
        setResult(RESULT_OK, hobby);
        finish();
    }
} 
```

删除功能：

```
 int posDelete = info.position;
                                String deleteTitle = results.get(
                                        info.position).getTitle();
                                results.remove(posDelete);
                                adapter.notifyDataSetChanged();

                                  Index<Lab9_082588FetchDetails> rootDelete = (Index<Lab9_082588FetchDetails>) db
                                        .getRoot();
                                rootDelete.remove(deleteTitle,
                                        results.get(info.position));
                                db.setRoot(rootDelete); //Perst

                                return; 
```

OnActivityResult（编辑）：

```
 case EDIT_MOVIE:
            Lab9_082588FetchDetails edittedMovie = new Lab9_082588FetchDetails();
            NumberFormat formatterEdit = new DecimalFormat("###,###,###");

            edittedMovie.setTitle(data
                    .getStringExtra(Lab9_082588Add.TITLE_STRING));
            edittedMovie.setGross("$"
                    + formatterEdit.format(Double.parseDouble(data
                            .getStringExtra(Lab9_082588Add.GROSS_STRING))));
            edittedMovie.setDate(data
                    .getStringExtra(Lab9_082588Add.DATE_STRING));

            results.add(edittedMovie);
            adapter.notifyDataSetChanged(); 
```

填充列表视图：

```
 for (int i = 0; i < items.size(); i++) {
        Lab9_082588FetchDetails sr = new Lab9_082588FetchDetails();
        sr.setTitle(items.get(i).getTitle());
        sr.setGross(items.get(i).getGross());
        sr.setDate(items.get(i).getDate());
        results.add(sr);
        Collections.sort(results, ignoreCaseStart);
    } 
```

我该如何补救？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:46:55.677

出现此问题是因为在您的删除函数中，您首先从结果集合中删除元素（“results.remove(posDelete);”），然后，几行之后，您调用“results.get(info.position)”为 rootDelete.remove 调用获取参数，但该参数已被删除。

如果该元素是集合的最后一个元素，假设是第 50 个元素，“info.position”的值为 50。您删除了一个元素，因此元素数现在为 49。在您调用的 rootDelete.remove 行中results.get(50)，它会产生错误。

# java - 数据库时间戳不匹配

> ID：12058779
> 
> 赞同：0
> 
> 时间：2012-08-21T15:59:05.170
> 
> 标签：java, sql-server, hibernate, struts, timestamp

我在 struts2 中有一个操作，它将查询数据库中的对象，然后通过一些更改复制它。然后，它需要从副本中检索新的 objectID 并创建一个名为 objectID.txt 的文件。

这是相关的代码：

动作类：

```
ObjectVO objectVOcopy = objectService.searchObjects(objectId);
//Set the ID to 0 so a new row is added, instead of the current one being updated
objectVOcopy.setObjectId(0);
Date today = new Date();
Timestamp currentTime = new Timestamp(today.getTime());
objectVOcopy.setTimeStamp(currentTime);
//Add copy to database
objectService.addObject(objectVOcopy);
//Get the copy object's ID from the database
int newObjectId = objectService.findObjectId(currentTime);
File inboxFile = new File(parentDirectory.getParent()+"\\folder1\\folder2\\"+newObjectId+".txt"); 
```

对象DAO

```
//Retrieve identifying ID of copy object from database
List<ObjectVO> object = getHibernateTemplate().find("from ObjectVO where timeStamp = ?", currentTime);
return object.get(0).getObjectId(); 
```

问题在于，ObjectDAO 搜索方法通常不会返回任何内容。调试时，我注意到传递给它的时间戳 currentTime 通常与数据库中的值相差约 1-2 毫秒。我已经解决了这个错误，更改了休眠查询以搜索时间戳在经过的 3 毫秒内的对象，但我不确定这种差异来自何处。我没有重新计算当前时间；我使用同一个从数据库中检索，就像我写入数据库一样。我还担心当我将它部署到另一台服务器时，差异可能会更大。除了 objectID，这是唯一的唯一标识符，因此我需要使用它来获取复制对象。

有谁知道为什么会发生这种情况，是否有比仅搜索范围更好的解决方法？我正在使用 Microsoft SQL Server 2008 R2 顺便说一句。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:04:13.060

SQL Server 的 DATETIME 数据类型的精度与您可以用其他语言生成的精度不完全匹配。SQL Server 四舍五入到最接近的 0.003 - 这就是为什么你可以说：

```
DECLARE @d DATETIME = '20120821 23:59:59.997';
SELECT @d; 
```

结果：

```
2012-08-21 23:59:59.997 
```

然后尝试：

```
DECLARE @d DATETIME = '20120821 23:59:59.999';
SELECT @d; 
```

结果：

```
2012-08-22 00:00:00.000 
```

由于您使用的是 SQL Server 2008 R2，因此应确保使用 DATETIME2 数据类型而不是 DATETIME。

这就是说，@RedFilter 提出了一个很好的观点——当你可以使用生成的 ID 时，为什么还要依赖时间戳呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:04:50.490

这感觉不对。

> 除了 objectID，这是唯一的唯一标识符

数据库具有唯一标识符的概念是有原因的。您应该真正使用它来检索对象的实例。

您可以在 Hibernate 会话上使用 get 方法，也可以利用会话和二级缓存。

使用您的方法，您每次检索对象时都会执行查询。

# php - 为什么这些推动多对多关系不起作用？

> ID：12058780
> 
> 赞同：1
> 
> 时间：2012-08-21T15:59:13.550
> 
> 标签：php, mysql, foreign-keys, propel

我正在关注此文档： http: [//www.propelorm.org/documentation/04-relationships.html#manytomany_relationships](http://www.propelorm.org/documentation/04-relationships.html#manytomany_relationships)

我有一个非常相似的设置（尽管为了便于阅读而进行了一些简化）：

**日志**

```
 <table name="logbook" phpName="Logbook" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" size="10" sqlType="int(10) unsigned" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="location" phpName="Location" type="VARCHAR" size="255" required="false"/>
  </table> 
```

**接触**

```
 <table name="contact" phpName="Contact" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" size="10" sqlType="int(10) unsigned" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="title" phpName="Title" type="VARCHAR" size="255" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="255" required="true"/>
    <column name="telephone" phpName="Telephone" type="VARCHAR" size="20" required="true"/>
  </table> 
```

**日志联系方式**

```
 <table name="logbook_contact" phpName="LogbookContact" idMethod="native" isCrossRef="true">
    <column name="logbook_id" phpName="LogbookId" type="INTEGER" size="10" sqlType="int(10) unsigned" primaryKey="true" required="true"/>
    <column name="contact_id" phpName="ContactId" type="INTEGER" size="10" sqlType="int(10) unsigned" primaryKey="true" required="true"/>
    <foreign-key foreignTable="contact" name="fk_logbook_contact_contact" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="contact_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="logbook" name="fk_logbook_contact_logbook" onDelete="CASCADE" onUpdate="CASCADE">
      <reference local="logbook_id" foreign="id"/>
    </foreign-key>
    <index name="fk_logbook_contact_contact">
      <index-column name="contact_id"/>
    </index>
  </table> 
```

注意`isCrossRef="true"`logbook_contact 表上的 ，它表明这是一个联结表。从这里我重新运行`propel-gen om`，甚至`propel-gen convert-conf`（在清除构建目录之后），但我似乎仍然无法做这样的事情：

```
<?php
/* presume $logbook has been LogbookQuery::create()'d already... */
$contacts = $logbook->getContacts();
$nbContacts = $logbook->countContacts(); 
```

我使用 Zend Studio，但在代码提示窗口中看不到它：

![没有 $logbook->getContacts();](../Images/389ca3b8521e48b7541d92f995a49460.png)

谁能向我建议我在这里可能做错了什么？我很高兴您向我指出文档 - 我已尽可能密切地关注这些文档，并且一切正常，直到`$test`工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:07:00.250

您可能想调用`getContacts()`一个`Logbook`实例，而不是一个`PropelCollection`. 查看您的代码，您似乎获取了一个集合`Logbook`而不是一个实例：

```
$this->logbook = $this->company->getLogbooks(); 
```

在这里，`$this->logbook`似乎是`PropelCollection`关于自动完成输出。它不是一个`Logbook`对象。你可以试试：

```
$test = $this->logbook[0]->getContacts(); 
```

# php - Doctrine 不映射来自 FOSUserBundle 用户类的字段

> ID：12058785
> 
> 赞同：5
> 
> 时间：2012-08-21T15:59:33.250
> 
> 标签：php, doctrine-orm, fosuserbundle, symfony-2.1

我在运行 PHP 5.3.13 的 Windows 服务器上使用`Symfony 2.1 RC1`和。`FOSUserbundle`

我已按照[此处的说明](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)进行操作， 但 Doctrine 不会在数据库中为从基本 FOS User 类继承的属性创建字段（仅来自我的类​​的字段）。

尝试使用 FOS 登录表单登录会产生错误：

```
Unrecognized field: usernameCanonical 
```

我有以下教义配置：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true 
```

FOSUserBundle 配置看起来像：

```
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: SP\PickList\UserBundle\Entity\User 
```

我的用户实体：

```
namespace SP\PickList\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use FOS\UserBundle\Document\User as BaseUser;

/**
 * SP\PickList\UserBundle\Entity\User
 *
 * @ORM\Table(name="fos_user")
 * @ORM\Entity
 */
class User extends BaseUser
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

谢谢你的帮助，

詹姆斯·班奇

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T19:55:59.120

看来您正在混合 ORM 和 ODM 的说明，如果您根据配置使用 Doctrine ORM，您的 User 类必须扩展`FOS\UserBundle\Entity\User`，尝试将`use`语句更改为

```
use FOS\UserBundle\Entity\User as BaseUser; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T18:08:09.613

To save someone some time. Don't forget if you are not using auto_mapping in your ORM config in config.yml you need to add 'FOSUserBundle: ~' to the mapping.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T06:20:19.913

您还必须在 app/config/config.yml 中指定要使用的实体用户类

```
# FOS
fos-user: 
    db_driver: orm
    firewall_name: main #optional
    user_class: FOS\UserBundle\Entity\User 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T11:03:22.807

我正在使用 fosuserbundle 的 v2.1.2，我的用户类是

```
use FOS\UserBundle\Model\User as BaseUser;
class Nutzer extends BaseUser {...} 
```

我的 config.yml 看起来像

```
orm:
    default_entity_manager: default
    entity_managers:
        default:
            connection: postgres
            naming_strategy: doctrine.orm.naming_strategy.underscore
            mappings:
                AppBundle: ~ 
        my:
            connection: mysql
            naming_strategy: doctrine.orm.naming_strategy.underscore
            mappings:
                AppBundle: ~
                FOSUserBundle: ~ #this line does not change anything if left out

        ms:
            connection: mssql
            naming_strategy: doctrine.orm.naming_strategy.underscore
            mappings:
               AppBundle: ~ 
```

仍然只创建此 SQL（使用 创建模式时`--em=my`）：

```
CREATE TABLE nutzer (id INT AUTO_INCREMENT NOT NULL, supervisor_id INT DEFAULT NULL, api_key VARCHAR(64) DEFAULT NULL, INDEX IDX_A9B4F58919E9AC5F (supervisor_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB; 
```

所以所有的基本字段都不见了！

映射中的行`FOSUserBundle: ~`不会改变任何东西。

但是对于 postgresql 和 mssql 实体管理器，一切正常！

例如对于 postgres：

```
CREATE TABLE nutzer (id INT NOT NULL, supervisor_id INT DEFAULT NULL, username VARCHAR(180) NOT NULL, username_canonical VARCHAR(180) NOT NULL, email VARCHAR(180) NOT NULL, email_canonical VARCHAR(180) NOT NULL, enabled BOOLEAN NOT NULL, salt VARCHAR(255) DEFAULT NULL, password VARCHAR(255) NOT NULL, last_login TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, confirmation_token VARCHAR(180) DEFAULT NULL, password_requested_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, roles TEXT NOT NULL, api_key VARCHAR(64) DEFAULT NULL, PRIMARY KEY(id))' 
```

# silverlight - 在 OOB 应用程序中将自定义用户设置存储在哪里？

> ID：12058787
> 
> 赞同：0
> 
> 时间：2012-08-21T15:59:43.700
> 
> 标签：silverlight, silverlight-5.0

我试图弄清楚如何存储用户设置。

一个用户去`Settings`。有服务和类别等的列表，用户可以选择他/她想要使用的列表。这些列表是从`.xml`文件中加载的并且具有简单的结构，即`ServiceName + true/false`（选择/未选择）。但是在应用程序的整个生命周期中，将添加另一个列表，因此可能会有大约 50 个 .xml 文件或更多。

是`IsolatedStorageSettings`我需要的一切还是仅用于应用程序设置和首选项而不用于自定义用户设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:30:51.520

您可以使用存储在独立存储中的[Application Setting](http://msdn.microsoft.com/en-us/library/cc221360%28v=vs.95%29.aspx)，但对于您尝试执行的操作，您可能需要查看类似[SterlingDB](http://sterling.codeplex.com/)的内容。SterlingDB 很简单，很容易启动和运行。它还使用隔离存储。

# php - 将多个数组打印到 html 表中

> ID：12058794
> 
> 赞同：0
> 
> 时间：2012-08-21T16:00:03.283
> 
> 标签：php, html, arrays, html-table

我有两个从 XML 响应到 api 构建的数组。一个数组给我一个商店的产品信息，另一个数组给我另一个商店的库存水平。它看起来像这样：

```
foreach($filteredStock as $t=>$k){
    $codeFirst[] = $k['code'];

    echo '<tr><td>'.$t;
    echo '</td><td>'.$k['desc'];
    echo '</td><td>'.$k['family'];
    echo '</td><td>'.$_POST['filterSelect'];
    echo '</td><td>'.$k['onOrder'];
    echo '</td><td>'.$k['cost'];
    echo '</td><td>'.$k['sell'];
    echo '</td><td>'.$k['invStore'];
    echo '</td>';
}

$output = array();

$result = array_intersect_key($mainArray, array_flip($codeFirst));
foreach($result as $results=>$rValues){

    echo '<td>'.$rValues['inv'];
    echo '</td>'; 
    echo '</tr>';
} 
```

我想显示它，使其在表格中看起来像这样：

代码/描述/家庭/filteredClass/onOrder/成本/销售/invStore/invwarehouse

因为我需要第二个`foreach`循环来获取第二个数组的值，所以试图让它在每一行与另一个数组重复会导致问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:05:09.640

与其在每次循环迭代时回显输出，不如按照自己的意愿建立表格，然后在安排妥当后输出？

从代码中我不清楚您到底要做什么，但是如果这是一个组织问题，那么为什么不将这些值存储在单独的数组中，然后在输出它们之前组合并适当地排列它们呢？

对每个循环迭代立即使用 echo 会在一定程度上限制您的选择。

# jquery - jQuery show() 在特定的下拉选择中

> ID：12058795
> 
> 赞同：0
> 
> 时间：2012-08-21T16:00:12.767
> 
> 标签：jquery

当从下拉框中选择某个值时，我希望使用 jQuery 的 show() 函数显示表单的另一部分。目前，我在标题上方的代码如下所示：

```
<script>   
    $(":input#location").change(function(){
      if($(this).val() === 'On Rental'){
        $('div#dpo').show("slow");
      }
    }
</script> 
```

而且，表单的编码如下：

```
<p>
    <strong><label for="location">Location</label></strong>
</p>
<select name="location" id="location">
    <option value="Clarksville">Clarksville</option>
    <!--etc.-->
</select>

<div id="dpo" style="display:none">
  <!--Stuff I want to show here.-->
</div> 
```

出于某种原因，当我从下拉字段中选择“出租时”时，什么也没有发生，而且我终生无法弄清楚我做错了什么。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:03:54.853

修剪值并尝试如下，另一件事是如果您使用 id 则无需在选择器中指定标记类型

```
$("#location").change(function(){ 
      if($.trim($(this).val()) == 'On Rental'){
         $('#dpo').show("slow");
       }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:02:41.217

```
<script>   
$("input#location").change(function(){
  if($(this).val() === 'On Rental'){
    $('div#dpo').show("slow");
  }
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:04:47.290

将其包装在 document.ready 函数中。你也可以只使用`ID`选择器。而且您的选择不是输入类型..

```
$(function(){
    $("#location").change(function() {
        if ($(this).val() === 'On Rental') {
            $('#dpo').show("slow");
        }
    }​
}) 
```

[http://jsfiddle.net/wirey00/FYwPv/](http://jsfiddle.net/wirey00/FYwPv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:20:49.333

我尝试了上面的所有建议（包括将其包装在 document.ready 函数中），但我无法让它工作。当我将代码放在文档底部而不是在标题中时，我最终使代码正常工作（就像我最初拥有的那样）。我对 JavaScript 和 jQuery 知之甚少，不知道为什么会这样……？

# php - php paypal 不返回任何东西

> ID：12058798
> 
> 赞同：-1
> 
> 时间：2012-08-21T16:00:24.297
> 
> 标签：php, paypal

我正在使用 paypal 测试我的网站，看看我是否收到了钱并且我的系统正在更新

当我要求发送包含 POST 中所有信息的电子邮件时，我收到的是空电子邮件。有人能告诉我我的代码有什么问题吗

```
$req = 'cmd=_notify-validate';
$req .= payment_safe_check ($_POST);

$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

$mode = strtolower($paymod_data['PAYMENT_MODE']);

    mail("to email", "subject",serialize($_POST) );

if ($mode == 'test')
{
    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);
}
else
{
    $fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);
}

if (!$fp)
{
    // HTTP ERROR
    die ("Error");
}
else 
{
    // NO HTTP ERROR
    fputs ( $fp, $header . $req );
    while (!feof($fp))
    {
        $res = fgets ($fp, 1024);
        if (strcmp ($res, "VERIFIED") == 0)
        {
            processing ( $_POST );
        }
        else if (strcmp ($res, "INVALID") == 0)
        {

        }
    }
    fclose ($fp);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:53:10.170

将 var_dump($res) 放在 while 代码中，因为这是变量存在的上下文。

# python - 如何使用 libtorrent for python 获取 info_hash

> ID：12058802
> 
> 赞同：4
> 
> 时间：2012-08-21T16:00:40.320
> 
> 标签：python, libtorrent

```
from libtorrent as lt
info = lt.torrent_info(open('example.torrent','rb').read())
info.info_hash() 
```

这没有得到哈希，而是我得到了对象`<libtorrent.big_number object at ...... >`

我应该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T17:57:57.833

现有的答案为您提供所需的一切......但这里有一些代码可以使其明确：

```
import libtorrent as lt
info = lt.torrent_info(open('example.torrent','rb').read())
info_hash = info.info_hash()
hexadecimal = str(info_hash)
integer = int(hexadecimal, 16) 
```

**编辑**：实际上，这是错误的 -`torrent_info()`应该传递 torrent 文件的长度及其内容。修订（工作）版本：

```
import libtorrent as lt
torrent = open('example.torrent','rb').read()
info = lt.torrent_info(torrent, len(torrent))
info_hash = info.info_hash()
hexadecimal = str(info_hash)
integer = int(hexadecimal, 16) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:27:07.307

根据[http://www.rasterbar.com/products/libtorrent/manual.html#torrent-info](http://www.rasterbar.com/products/libtorrent/manual.html#torrent-info)

```
info_hash() returns the 20-bytes sha1-hash for the info-section of the torrent file. 
For more information on the sha1_hash, see the [big_number] class. 
```

所以[http://www.rasterbar.com/products/libtorrent/manual.html#big-number](http://www.rasterbar.com/products/libtorrent/manual.html#big-number)

只需遍历字节即可获得哈希值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-27T13:18:34.097

只要打电话`str(info.info_hash())`。

编辑：实际上`str`是不正确的。但是写出十六进制字符串的正确方法是什么？

# javascript - 地图加载后 Google Maps API v3 不会禁用滚轮

> ID：12058805
> 
> 赞同：5
> 
> 时间：2012-08-21T16:00:49.587
> 
> 标签：javascript, google-maps-api-3

我正在一个网站上实现谷歌地图，一切都很好，除了地图加载后我似乎无法禁用滚轮。如果我在地图加载到滚轮之前设置选项：false，则滚轮被禁用，但如果我稍后再尝试（我有一个启用/禁用滚轮的复选框）。

这是我在页面加载时使用谷歌地图的选项：

```
var myOptions = {
            zoom: 15,
            center: currentPosition,
            draggable: true,
            scrollwheel: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }; 
```

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

然后在单击事件触发复选框后，我有以下代码来禁用滚轮。有趣的是，draggable = false 正在工作并阻止我拖动地图。

```
var checked = $('#chkPin').is(':checked');
        log("map active: " + checked);
        if (checked) {
            map.scrollwheel = false;
            map.draggable = false;
            map.zoomControl = false;
        } else {
            map.scrollwheel = true;
            map.draggable = true;
            map.zoomControl = true;
        } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-21T16:29:23.587

不支持编辑 Maps API 对象上未记录的属性，这可能会导致不可预知的结果。您不应该直接修改地图对象的属性。相反，使用记录的选项之一修改属性：

# 对象特定定义的 getter/setter：

```
map.setOptions({'scrollwheel': false}); 
```

# MVCObject 通用 getter/setter：

```
map.set('scrollwheel', false);
var isScrollWheelEnabled = map.get('scrollwheel'); 
```

这两个选项在地图初始化后都成功地禁用了地图的滚轮缩放。

# asp.net-mvc-3 - 不显眼的验证范围不起作用

> ID：12058815
> 
> 赞同：0
> 
> 时间：2012-08-21T16:01:12.130
> 
> 标签：asp.net-mvc-3

我正在做一个 MVC 3 应用程序。我有一个模型`[Range(1, 175, ErrorMessage="Invalid")]`。

在其中一个控制器上，视图完美呈现所有标记以进行验证。在具有相同设置的第二个控制器上，在下拉列表中完成的范围验证不会出现在 html 标记上。我有验证和 unostrusiveValidation true on `config.web`。我正在使用`LINQTOSQL`并且我已经完成了一个部分类来添加额外的元数据。该字段确实选择了`[Display(Name="State")]`，但 Range 不是。

```
 <tr>
            <td>@Html.LabelFor(x => x.carta.INVprovincia)</td>
            <td>@Html.DropDownListFor(x => x.carta.INVprovincia, Model.provinciaItems, new { @class = "ddlsmall" }) <br /> @Html.ValidationMessageFor(x => x.carta.INVprovincia)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(x => x.carta.INVmunicipio)</td>
            <td>@Html.DropDownListFor(x => x.carta.INVmunicipio, Model.municipiosItems, new { @class = "ddlsmall" }) <br /> @Html.ValidationMessageFor(x => x.carta.INVmunicipio)</td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:12:09.387

The Html.XXX helpers won't generate HTML5 `data-*` attributes used by the unobtrusive validation framework if they are not inside a form which seems to be your case. I guess that the form is contained within a parent view. This bug (IMHO) is fixed in ASP.NET MVC 4\. A possible workaround is to put the following on the to of your partial view to fake a form and make the helpers believe that they are inside a form:

```
@{
    ViewContext.FormContext = new FormContext();
} 
```

# jquery - 为滑块组合两个 jquery 函数

> ID：12058817
> 
> 赞同：0
> 
> 时间：2012-08-21T16:01:23.080
> 
> 标签：jquery, function

嘿，我有两个功能，我有一个带有深度链接的滑块。有一个与滑块配对的轮播，当滑块移动到下一张幻灯片时，事件会提示轮播移动到下一张幻灯片并切换类。问题是当您使用深层链接加载页面时没有事件，所以它不会突出显示拇指，所以我有两个单独的功能，它们似乎重复，我想知道是否有办法将它们组合起来？

```
$(function() {
    if(portfolio_slide_TOTAL.currSlideId == 4) {
        // your code here!
        $('#portfolio_carousel_thumbs').data('touchCarousel').goTo(4);
        $("#color_goto").addClass("library_thumb_active");
    }
});
$(function() {
    portfolio_slide_TOTAL.ev.on('rsAfterSlideChange', function() {
        if(portfolio_slide_TOTAL.currSlideId == 4) {
            // your code here!
            $('#portfolio_carousel_thumbs').data('touchCarousel').goTo(4);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:09:40.710

尝试 ：

```
$(function() {
    var flag=true;
    test_slide(); //runs first

    portfolio_slide_TOTAL.ev.on('rsAfterSlideChange', test_slide);

    function test_slide() {
        if(portfolio_slide_TOTAL.currSlideId == 4) {
            // your code here!
            $('#portfolio_carousel_thumbs').data('touchCarousel').goTo(4);
            if (flag) {
                $("#color_goto").addClass("library_thumb_active"); //only on first
                flag=false; //set flag to false after first run
            }
        }

    }
});    ​ 
```

# java - 从 PreferenceActivity 启动 android Play Store 应用程序？

> ID：12058823
> 
> 赞同：1
> 
> 时间：2012-08-21T16:01:36.180
> 
> 标签：java, android, sharedpreferences, android-preferences, preferenceactivity

我正在尝试启动**android Play 商店**

从我的**PreferenceActivity**。

这是我试图这样做的代码

在我的`pref.xml`档案中

```
<Preference  android:key="rateus" android:title="See Android Market"></Preference> 
```

在我的 java 文件中

```
public class ExampleAppWidgetConfigure extends PreferenceActivity {

private int appWidgetId;
@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getPreferenceManager().setSharedPreferencesName(
            widgetsharedpref.PREFS_NAME);
    addPreferencesFromResource(R.xml.prefs);

    Preference prefereces=findPreference("rateus");
    prefereces.setIntent(new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=com.xyz.xyz")));

} 
```

}

但是当我运行它并单击首选项时。

没发生什么事。

这里有什么问题？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:16:32.710

您的代码没有启动市场活动，它只是创建了启动它的意图

用这个

```
Preference prefereces=findPreference("rateus");
preference.setOnPreferenceClickListener (new Preference.OnPreferenceClickListener(){
    public boolean onPreferenceClick(Preference preference){
        Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=com.xyz.xyz"));
        startActivity(intent);
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-05T04:37:02.967

虽然 vikki 的答案工作正常，但这里是做同样事情的简化版本。它会简单地使用指定的应用程序详细信息启动 Play 商店应用程序。

```
<PreferenceScreen
    android:title="Rate My app on Play Store"
    android:summary="Please take a moment to rate our application and service on play store.">
    <intent
        android:action="android.intent.action.VIEW"
        android:data="market://details?id=com.abc.xyz" />
</PreferenceScreen> 
```

另一个版本更安全一些。只需将`android:data`属性替换为原始 Play 商店应用链接即可。

```
android:data="http://play.google.com/store/apps/details?id=com.abc.xyz" 
```

It basically tries to load the playstore URL. This one works even if the play store application is not installed. The only problem is that, the installed browsers will be capturing the intent along with the play store app.

# django - Django - MongoEngine - 选择属性 - 没有属性“仅”

> ID：12058824
> 
> 赞同：0
> 
> 时间：2012-08-21T16:01:41.973
> 
> 标签：django, mongodb, mongoengine, database

我试图从一个对象中选择一些属性。医生说我应该只使用。

我有这样的用户对象：

```
from mongoengine.django.auth import User

class MyUser(User):    
      username = StringField()
      firstname = StringField()
      ... 
```

和这样的查询：

```
user = MyUser.objects.get(username='Katyss').only('firstname') 
```

但我得到这样的东西：

> MyUser 对象没有“仅”属性

有任何想法吗？

**编辑：**

关于*Daniel Roseman*的帖子，我尝试使用`only`with `filter`。但我收到以下错误消息：

> error_message”：“强制转换为 Unicode：需要字符串或缓冲区，找到 NoneType”

谷歌这个错误我发现一个人声称在模型/文档中使用 unicode() 函数会有所帮助。但我想要这个`only`- 选择只是这一次 - 不是每次。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:24:02.170

`only`是一个 QuerySet 方法。它用于返回仅选择了那些属性的实例列表。您使用`get`了 ，它返回一个实例，而该实例没有该方法。

但是，我敢肯定，您实际上并不需要它。除非您的 MyUser 模型上有数百个属性，否则仅获取整个实例并使用您需要的内容并不会显着降低效率。

# internet-explorer - Firefox 和 IE9 在 Windows 上无法正确渲染字体

> ID：12058825
> 
> 赞同：3
> 
> 时间：2012-08-21T16:01:46.913
> 
> 标签：internet-explorer, firefox, font-face, webfonts

我在我的网站上使用网络字体 Bitter。最初我从 Google Web Fonts 中嵌入了它，但 Google Chrome/Win 没有正确渲染 .woff（它在较小的尺寸上有奇怪的锯齿状伪影）。谷歌搜索了一下后，我发现 Chrome/win 通常在这种格式上存在问题，而使用 SVG 可以解决它。这意味着我必须自己托管/嵌入文件，而不是使用 Google Web Fonts。我使用 Font Squirrel 来获取正确的 @font-face 代码，在我在 Windows 上的 IE9/Firefox 中进行测试之前，一切似乎都很好。两种浏览器都将大写 T 呈现为小于其余大写字母（如[http://d.pr/i/LIty](http://d.pr/i/LIty)）

这是我的字体代码

```
@font-face {
    font-family: 'bitter';
    src: url('fonts/bitter-regular-webfont.eot');
    src: url('fonts/bitter-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/bitter-regular-webfont.svg#bitterregular') format('svg'),
         url('fonts/bitter-regular-webfont.ttf') format('truetype'),
         url('fonts/bitter-regular-webfont.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'bitter';
    src: url('fonts/bitter-bold-webfont.eot');
    src: url('fonts/bitter-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/bitter-bold-webfont.svg#bitterbold') format('svg'),
         url('fonts/bitter-bold-webfont.ttf') format('truetype'),
         url('fonts/bitter-bold-webfont.woff') format('woff');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'Bitter';
    src: url('fonts/bitter-italic-webfont.eot');
    src: url('fonts/bitter-italic-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/bitter-italic-webfont.svg#bitteritalic') format('svg'),
         url('fonts/bitter-italic-webfont.ttf') format('truetype'),
         url('fonts/bitter-italic-webfont.woff') format('woff');
    font-weight: normal;
    font-style: italic;
} 
```

我如何理解这种嵌入，浏览器使用他们可以接受的第一种文件格式，然后忽略其余的？如果我没记错浏览器兼容性，那意味着 IE 使用 EOT，Chrome 使用 SVG，Firefox 使用 TTF。所以起初看起来实际文件有问题，但 Firefox 在 Mac 上渲染字体很好。

[你可以在http://dev.thesmackpack.com](http://dev.thesmackpack.com)上看到它。我能做些什么来修复字体文件，或者让它们使用正确的格式，还是什么？

编辑：我从原始创建者那里下载了字体的副本，并通过 Font Squirrel 生成器运行它，取消选中修改文件的所有选项。T 是固定的，但现在 FF 和 IE 中出现了糟糕的渲染伪影。[http://d.pr/i/5sVT](http://d.pr/i/5sVT)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:14:55.137

可悲的是，我无法找到足够的解决方案来解决这个问题。我切换回 Google Web Fonts 版本（带有锯齿状的工件，但没有损坏的字母大小）并更改了字体大小以最小化工件（它们在特定尺寸上更糟）。它仍然不是很好，但它是我能做的最好的。

这里要学习的一课：在开始开发之前，在所有操作系统上的所有浏览器上测试所有大小的网络字体。

# plugins - 如何创建一个插件来“记录”网络抓取执行步骤到文件中？

> ID：12058827
> 
> 赞同：0
> 
> 时间：2012-08-21T16:01:48.847
> 
> 标签：plugins, browser, web-scraping, element

我经常负责创建网络抓取算法，而我一直这样做的方式是直接抓取代码，这使得每个工具都特定于页面。

我想为浏览器创建一个插件（最好是 JavaScript），以便用户可以动态定义抓取执行顺序（记录一个脚本，稍后将解释并执行实际抓取）。

思路如下：

1.  用户打开他想要抓取的页面，右键单击任意位置，然后点击“开始录制”，这会“激活”插件并将页面的 URL 保存到它的“录制文件”中。
2.  对于用户需要单击/键入/更改的每个元素，他右键单击它，并显示一组特定于元素的选项。插件按顺序保存这些选择的选项。

* * *

*   可以点击按钮。
*   编辑可以用单个特定字符串填充，也可以用文件中的字符串列表循环抓取。
*   可以对列表中的每个项目或与文件中的列表匹配的项目进行循环抓取。
*   ETC...

* * *

录制完成后，用户只需右键单击任意位置并点击“停止录制”，他将拥有一个包含所需抓取操作的类似脚本的文件。

之后，实际的抓取应用程序接管（自动或手动启动），并仅读取记录的文件，执行描述的操作并保存结果页面。

这些生成的页面稍后可以通过更容易编码的页面特定算法进行解析。

* * *

我知道说起来容易做起来难，但我很确定它是可以编码的。我需要一些帮助来确定“子步骤”：

*   “如何在浏览器的（+元素）上下文菜单中显示新选项？”
*   “如何知道右键单击了哪个元素？”
*   “如何从插件写入文件？”
*   ETC...

尽管其中一些问题之前已经提出过，但其中大多数是在不同的背景下提出的；即，您已经知道单击了哪个元素并希望在单击后执行功能的上下文；不是这里的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:45:48.557

在过去的几天里，我实际上一直在编写一个 Greasemonkey 脚本来做到这一点：

它的工作原理如下

1.  在页面中注入一个“抓取接口”

2.  向文档注册 mouseup 监听器

3.  当鼠标向上事件发生时，提取用户的选择，并将选择标记为要抓取的数据

4.  在页面中插入 div/类以突出显示要抓取的数据

5.  使用 GM_setValue 存储所有抓取指令/访问过的页面

6.  在文本区域中显示抓取脚本，以便用户可以将其复制/粘贴到抓取应用程序

# abap - 不使用 TMS 将 TR 文件推送到 SAP ERP 系统

> ID：12058828
> 
> 赞同：2
> 
> 时间：2012-08-21T16:01:56.903
> 
> 标签：abap, transport, sap-basis

我是 salesforce.com 开发人员，我需要为演示目的构建一个简单的 SFDC/SAP 集成场景。

我完全没有使用 SAP 的经验，但我们至少有一个我目前只能通过 SAP GUI 访问的 SAP 演示系统。现在，第三方集成解决方案提供商向我传递了一些文件，并告诉我使用事务 STMS 将它们传输到我的 SAP 演示系统中。我想我理解 SAP 的传输管理系统是某种部署工具，用于将 ABAP 代码从 DEV 提升到 QA 再到 PROD。

问题是 SAP 演示系统不包括运输管理，或者至少来自印度的托管它的人不愿意支持它。

现在我最后的希望是将 ABAP 内容直接导入我们的 SAP 演示系统，但我不确定这是否可能。因此，如果有人可以给我一个关于如何进行的提示，我会非常高兴！

谢谢和最好的问候，亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:12:47.373

老实说，请，请，请让了解该系统的人参与其中。你会做你自己和我们所有人都必须支持你建立一个巨大的支持的东西。

关于传输文件，您必须将文件上传到服务器，然后告诉系统导入它们。您需要访问传输目录，并且使用导入工具意味着 TMS 已配置。如果不是，您将需要更多您没有的知识。所有其他“将东西放入系统”的方法都容易出现你甚至没有机会预料到的错误，如果你知道的那么少，就比你说的理解要少得多。我不想让你气馁，但试图绕过 TMS 并没有什么好处，即使毫无疑问有人会在此过程中提出建议。只需拿一些尖锐的物体并刺激基础管理员，直到他们导入传输文件。毕竟这只是一个演示系统。（我希望。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T04:42:17.043

您可以尝试让为您提供传输文件的人员使用[SAPLink](http://code.google.com/p/saplink/)将 ABAP 代码导出到 XML 文件。然后您可以尝试使用相同的工具将它们导入您的 SAP 演示系统。当然，一开始您可能会遇到未解决依赖关系的错误，因为您的演示系统可能没有安装所有需要的模块。

要导出/导入一些特殊对象（类、接口、函数组等），您还需要[为 SAPLink 安装一些插件](https://cw.sdn.sap.com/cw/groups/saplink-plugins)

# oracle-adf - 在数据控件返回新值之前，ADF 部分页面刷新更新表单

> ID：12058832
> 
> 赞同：1
> 
> 时间：2012-08-21T16:02:14.140
> 
> 标签：oracle-adf

我有一组基于单个数据源（包装 Web 服务调用的会话 Bean）的主详细信息表。顶层表 (t1) 显示机会数据，底层 (t2) 显示特定机会的联系人。在 t1 中选择机会时，与该机会关联的联系人将显示在 t2 中。这些表按需要工作。

我有一个基于不同数据控件的只读表单（面板表单布局）（由通过 EJB3 实体调用 LinkedIn API 和数据库表的会话 Bean 支持）。LinkedIn Session Bean 方法接受我从 t2 中的当前行获取的参数。（#{bindings.relatedContact.currentRow.dataProvider.id}）我已在表单上将 PartialTriggers 设置为“t2”。

当页面第一次加载时，表 t2 的第一行（A 行）被选中，表单显示与该行关联的数据。如果我选择另一行（B 行），会话 Bean 会使用新选择的行中的 id 值调用，但表单会显示 A 行的关联数据。随后，每次我在 t2 中选择一行时，都会使用新值调用 bean，但表单会显示来自先前选择的行的数据。

我假设正在发生的事情是刷新了表单（使用数据控件中的陈旧数据），然后调用了会话 bean。我在 bean 中使用 print 语句和 Thread.sleep() 验证了这一点。

这是正确的行为吗？如何确保在刷新表单之前调用 bean？

我正在使用 JDeveloper 版本 11.1.2.2.0

谢谢

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:18:17.630

默认情况下，PageDef 文件中迭代器的 Refresh 属性设置为“延迟”。对于您的用例，最好将其设置为“ifNeeded”。因此，转到详细 Web 服务 (t2) 的迭代器并将 Refresh 属性设置为 ifNeeded。这将解决您的问题

坦率

# c# - 发布了一个 ClickOnce 应用程序并不断重置其设置

> ID：12058835
> 
> 赞同：11
> 
> 时间：2012-08-21T16:02:22.753
> 
> 标签：c#, visual-studio-2010, settings, clickonce, publish

我已经使用 Visual Studio 2010 的发布功能部署了这个应用程序；它需要保存一些用户设置（例如数据库连接信息），并且有这台特定的计算机以某种方式不断地重置应用程序的设置。最让我困惑的部分是我一直无法弄清楚这是在什么情况下或发生这种情况的原因。我知道设置已正确设置，因为该应用程序在 6 或 7 台其他计算机上运行良好。

什么可能会擦除应用程序的设置？或者，您建议我使用什么来存储这些设置？加密文件？

编辑：我正在使用默认应用程序设置。它们在 app.config 文件中定义。它们可以使用`Properties.Settings.Default.propertyName`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T07:00:49.320

如果您有用户级设置，ClickOnce 应该在用户获得更新时将它们复制到下一个版本的缓存中。在某些情况下，它不会向前复制文件，例如当您更改证书时。

应用程序级别的设置不会保留并继续到下一个版本。

我不建议使用这种机制并依赖它。您可能想查看[这篇关于保护您的数据免受 ClickOnce 更新影响的文章](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/)。我们推出了自己的配置管理器，并将数据存储为 XML 并按照该文章中的说明进行存储。这样，您可以控制数据发生的情况。

唯一的缺点是当用户卸载应用程序时，它会留下这些数据。另一方面，当用户卸载应用程序时，它会留下他的数据，所以如果他因为遇到问题而卸载它，或者因为遇到问题而清除了 ClickOnce 缓存，那么当他安装新版本时，他的数据还在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:53:48.723

当您更新应用程序时，您的工作就是升级以前的设置。

`Settings.Default.GetPreviousVersion()`并且`Settings.Default.Upgrade()`可以对此有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-19T23:31:45.763

我想出了一个解决方案，可以帮助未来的开发人员解决这个问题。我意识到，出于某种原因，更新版本读取了一些以前的配置设置，但不是最后一个。例如，如果您有此应用程序文件夹：

```
myapp_0000000000000000_0001.0000_a4e7e981ca9c18fa
myapp_0000000000000000_0001.0000_a4e7e981ca9c19ee
myapp_0000000000000000_0001.0000_a4e7e981ca9c20aa 
```

更新时，配置设置是从与上一个不同的某个随机文件夹复制的（我不知道这是否是随机的，可能会采用最旧的，但我不确定）。

因此，如果您删除了其他文件夹，并且只保留了最后一个版本，那么当您更新时，除了从这个仅有的一个文件夹中获取配置设置之外别无选择。自己试试吧。

所以我制作了这个每次应用程序启动时运行的代码片段，它删除了旧版本的文件夹，所以当下一次更新到来时，一切都会正常工作。

```
private void ClearOldConfigurations()
{
    var level = ConfigurationUserLevel.PerUserRoamingAndLocal;
    var configuration = ConfigurationManager.OpenExeConfiguration(level);
    var configurationFilePath = configuration.FilePath;

    var routePieces = configurationFilePath.Split(Path.DirectorySeparatorChar);

    var toRetainFolder = string.Empty;
    var toClearFolder = string.Empty;
    for (int i = routePieces.Length - 1; i > 1; i--)
    {
        if (routePieces[i].ToLower() == "data")
        {
            toRetainFolder = string.Join(Path.DirectorySeparatorChar.ToString(), routePieces.Take(i));
            toClearFolder = string.Join(Path.DirectorySeparatorChar.ToString(), routePieces.Take(i - 1));
            break;
        }
    }

    if (string.IsNullOrWhiteSpace(toRetainFolder) || string.IsNullOrWhiteSpace(toClearFolder))
    {
        return;
    }

    foreach (var dir in Directory.GetDirectories(toClearFolder))
    {
        if (dir.ToLower().Trim() != toRetainFolder.ToLower().Trim())
        {
            try
            {
                Directory.Delete(dir, true);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    }
} 
```

可能不是最干净的解决方案，但对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-24T15:02:48.000

对于遇到此问题的任何人：检查您是否有无条件

```
Properties.Settings.Default.Upgrade(); 
```

在你的代码中。在具有多个版本的 ClickOnce 安装中，此语句从以前的版本复制用户设置并覆盖上次会话中保存的任何设置。正确的模式是：

```
if (Properties.Settings.Default.UpgradeRequired)
{
    Properties.Settings.Default.Upgrade();
    Properties.Settings.Default.UpgradeRequired = false;
    Properties.Settings.Default.Save();
} 
```

where`UpgradeRequired`是一个默认为 true 的设置。

# javascript - 骨干集合搜索网址

> ID：12058837
> 
> 赞同：1
> 
> 时间：2012-08-21T16:02:23.657
> 
> 标签：javascript, backbone.js

我是骨干新手，需要创建一个搜索页面。为此，我有一个带有事件处理程序的集合，当用户单击搜索按钮时，将触发此事件。

这是此事件的处理函数：

```
on_request_search_phone_call:function(args) {
    //GET DATES TO SEND
    var start_date = args[0].toString('MM-dd-yyyyHH:mm:ss');
    var end_date    = args[1].toString('MM-dd-yyyyHH:mm:ss');

    //HERE IS WHERE URL SHOULD BE CHANGED TO SEND START DATE AND END DATE
} 
```

我想知道更改 url 并使用这些参数获取数据的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:14:17.687

Backbone.js 带有一个 (url)[路由器](http://documentcloud.github.com/backbone/#Router)，使用它您可以执行以下操作

`myRouter.navigate("search/" + start_date + '/' + end_date , {trigger: true});`

您当然需要确保您的路由和路由器设置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T09:35:56.197

您可以使用 fetch 如下：

```
 var start_date = DATE1,
         end_date = DATE2
     collection.fetch({ reset : true,
              data  : {
                start_date : start_date,
                end_date   : end_date
              }
}); 
```

在对服务器的 GET 请求中

```
http://your.domain/search/?start_date=DATE1?end_date=DATE2 
```

在服务器端，您可以访问它们。

# c++ - 我可以使用 std::vector 来调用带有数组/指针参数的函数吗？

> ID：12058838
> 
> 赞同：5
> 
> 时间：2012-08-21T16:02:29.913
> 
> 标签：c++, arrays, pointers, stl, vector

我想重写一些使用大量`unsigned char`数组的代码，而不是使用`std::vector<unsigned char>`对象。我遇到的问题是这些当前用于存储将写入串行端口或套接字写入缓冲区的数据，并且执行此操作的库函数采用`void*`或`unsigned char*`. 这种函数的一个例子是

```
 WriteToSocketBuffer(unsigned char* pBuffer, int iSize); 
```

所以目前我有形式的代码

```
 unsigned char* pArray = new unsigned char[iSize];
 //   populate array with data
 WriteToSocketBuffer(pArray,iSize);
 delete [] pArray; 
```

我的问题如下：如果我将类更改`std::vector<unsigned char>`为使用原始数组而不是原始数组，我可以简单地使用调用我的库函数吗

```
 std::vector<unsigned char> myVector;
  WriteToSocketBuffer(&myVector[0],myVector.size()); 
```

传递向量中第一个元素的地址是否与传递原始数组中第一个元素的地址相同。就这么简单吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T16:04:45.563

是的，向量的元素被保证是连续的，类似于数组。

参考：

**C++03 标准：** **[lib.vector] 23.2.4 类模板向量**

> ......
> **向量 的 元素 是 连续 存储 的**, 这 意味着 如果`v`是 a `vector<T, Allocator>`where`T`是 其他 类型`bool`, 那么 它 服从`&v[n] == &v[0] + n`所有 的 恒等 .`0 <= n < v.size()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T16:07:17.487

C++98 并没有要求对 中的数据进行连续分配`std::vector`，但这就是所有已知实现所做的。

从 C++03 开始​​，这已被标准化为一项要求，因此现在是必需的，而不仅仅是事情发生的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T16:31:47.717

是的，只要缓冲区永远不会为空，您就可以这样做。

如果向量是空的，那么`&buffer[0]`就是一个错误，即使被调用的函数通常不会因为大小为 0 而取消引用指针，它也可能会崩溃。

# matlab - 在matlab GUI中画一条线

> ID：12058846
> 
> 赞同：1
> 
> 时间：2012-08-21T16:02:44.093
> 
> 标签：matlab, matlab-guide

我是matlab工具的新手。我想在 matlab 的 GUI 中画很多线。matlab中的标准工具没有形状或线条等控件。

我的 UI 包括其他控件，例如按钮和静态文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:40:00.317

不幸的是，您不能使用`line()`命令直接在图形上绘图。但是，有一个技巧：您可以制作一个不可见的轴，因为可见性不会传播给孩子。在不可见的轴上绘图几乎与直接在图形上绘图一样好。这是一个例子：

```
f = figure;
a = axes;
set(a, 'Visible', 'off');
%# Stretch the axes over the whole figure.
set(a, 'Position', [0, 0, 1, 1]);
%# Switch off autoscaling.
set(a, 'Xlim', [0, 1], 'YLim', [0, 1]);

%# Create all the controls.
uicontrol('Parent', f, 'Style', 'edit', 'String', 'Input...');

%# Draw!
for y = 1 : 9
    line([0.1, 1], [1 - y/10, 0.5], 'Parent', a)
end 
```

**编辑：**当然，禁用轴的自动缩放是个好主意。否则，绘图的可预测性要低得多。

# r - 为什么我的 R 对象不能打印到文件中？

> ID：12058847
> 
> 赞同：0
> 
> 时间：2012-08-21T16:02:45.603
> 
> 标签：r, file-io

我一直在努力让我的 R 程序打印到文件中。我尝试过 write、write.table、writeLines 和 cat，但都无济于事，我希望有人能告诉我这里哪里出错了。这是一种尝试：

```
cat(searchn, file = "output.txt", sep = " ") 
```

这是另一个：

```
write.table(searchn, file = "output.txt", row.names = FALSE,
            append = FALSE, col.names = TRUE, sep = " ") 
```

但他们都只是以空文件结束。我知道 searchn 有一个实际的价值：

```
head(searchn)
factor(0)
1253 Levels: 1:12 1:56 ... X:93 
```

由于 searchn 中有数据这一事实，我倾向于认为这只是我试图写入文件的代码行中的一个问题。虽然我不知道 factor(0) 是什么意思，而且快速的谷歌搜索并没有出现太多。我欢迎在这方面做出解释，即使它不会给我带来麻烦。有谁看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:10:10.960

您的对象`searchn`不包含任何值。我知道，因为结果`head(searchn)`是：

```
factor(0) 
```

这意味着您的 a`factor`长度为零，即它是空的。

例如，尽管对象是空的，但它仍然包含有关因子级别的元信息。所以打印这个元信息应该没有问题。例如，尝试：

```
cat(levels(searchn), file="output.txt") 
```

# php - twitter GET 搜索备份系统

> ID：12058848
> 
> 赞同：0
> 
> 时间：2012-08-21T16:02:54.697
> 
> 标签：php, xml, api, twitter, twitter-search

我正在使用 Twitter GET 搜索从指定帐户、主题标签等中检索推文。但 Twitter GET 搜索有其局限性：它有 6 到 9 天的可见推文时间限制。这就是我要确保网站上始终可见三条推文的地方。

问题是我不能只将整个 xml 字符串添加到数据库中（试过了，它可以工作，但是如果在其他推文不再可见时有一条新推文，我会坚持使用 1 条推文而不是 3 条推文更新）并且需要针对 xml 文件的各个节点。

关键是我想检索新推文，但要与旧推文“缩小差距”（以防 GET 搜索中的推文少于 3 条）。

我仍然想将 xml 字符串保存到数据库中，但要使用上述备份计划。我想使用 php 来修改这个 xml 字符串。有人对此有什么建议吗？我尝试了simpleXML，但这有它的局限性（例如读取、编辑或删除对象的节点）。

我知道 Twitter Stream API，但我就是不知道它是如何工作的，这就是我尝试使用 GET 搜索的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:15:06.580

你为什么不：

1.  获取搜索 XML
2.  解析它以提取每条推文
3.  将每条推文存储在一个表中（使用`tweet_id`as PK）
4.  继续抓取搜索
5.  如果搜索中的最后一条推文与数据库中的最后一条推文不同，则将其整合
6.  回到 4\. 并循环

这样，您将始终有 XX 条推文可用。当你有 XX 条推文时，你可以清理表格以保持里面有新的推文。

之后，您可以改进查找推文是否在您身边的方式。但我认为这是一个好的开始。

# android - 我需要带有游标加载器的内容提供程序吗？

> ID：12058849
> 
> 赞同：19
> 
> 时间：2012-08-21T16:03:03.433
> 
> 标签：android, sqlite, android-contentprovider

我无法弄清楚如何使用 CursorLoader。

我要解决的问题是如何在 ListActivity 中显示我的 SQLite 数据库中的数据。列表行使用自定义布局，因此需要来自 3 个字段的数据（都在同一个表中）。

除了一些 Stack Overflow 问题，我还阅读[了这篇博](http://www.androiddesignpatterns.com/2012/05/why-you-should-use-loadermanager.html)文，并决定我需要为我的数据库创建一个内容提供程序。

在我访问[Android 帮助](http://developer.android.com/guide/topics/providers/content-provider-creating.html)了解如何执行此操作之前，我从未使用过 Content Providers。

第 1 点指出：

> 如果使用完全在您自己的应用程序中，则不需要提供程序来使用 SQLite 数据库。

所以现在我被卡住了，我似乎无法在没有 ContentProvider 的情况下使用 CursorLoader，如果它仅在我的应用程序中使用，我建议不要创建 ContentProvider。

我目前在想，也许帮助已经过时，或者在编写时没有考虑光标加载器？

那么我是否需要继续创建一个 ContentProvider 还是有其他方法可以做到这一点？任何建议都会有所帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T16:15:15.907

简短的回答是，您可以使用自己的 Loader 来跳过对 Content Provider 的需求，并直接与 SQLite 数据库交互。其他人已经完成了实现，其中一个由[CommonsWare](https://stackoverflow.com/users/115145/commonsware)完成，称为[LoaderEx](https://github.com/commonsguy/cwac-loaderex)。该项目有一个名为[SQLiteCursorLoader](https://github.com/commonsguy/cwac-loaderex/blob/master/src/com/commonsware/cwac/loaderex/SQLiteCursorLoader.java)的类，您可能会发现它很有用。

除了上述 GitHub 项目提供的示例之外，您还可以查看我的一个[测试应用程序](https://github.com/wsanville/cursortest)（也在 GitHub 上），使用没有 Content Provider 的 Loaders。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T14:40:08.573

经过研究，我发现如果您使用内置的 CursorLoader，则需要一个 ContentProvider。

正如 wsanville 所说，您可以滚动自己的 Loader，这样它就不需要 ContentProvider。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T15:52:20.357

创建 ContentProvider 非常简单。很简单，它不应该妨碍您使用 CursorLoader。这是将它们与简单的 ContentProvider 一起使用的快速示例：[http ://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html](http://responsiveandroid.com/2012/03/19/using-an-android-cursor-loader-with-a-content-provider.html)

# javascript - 谷歌电子表格 API

> ID：12058858
> 
> 赞同：0
> 
> 时间：2012-08-21T16:03:49.477
> 
> 标签：javascript, html, google-api, google-sheets

我在使用 Google API 时遇到了一些问题。我正在尝试找到一种方法将我的搜索框链接到我的电子表格，所以当用户在我的搜索框中输入查询时，它会在我的 Google 电子表格中搜索该链接 - 甚至可能吗？如果有人可以帮助我，我会很高兴的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:51:12.310

这是可能的。您可以使用 URL Query Language 和应用程序脚本 URLFetch 服务尝试它。这样你甚至可以使用类似 SQL 的语句。

有关信息，请参阅： [https](https://developers.google.com/chart/interactive/docs/spreadsheets) ://developers.google.com/chart/interactive/docs/spreadsheets https://developers.google.com/chart/interactive/docs/querylanguage

其他选项只是检索一个范围并为您的搜索查询解析数组。

# jquery-ui - jQuery timepicker 强制一个值

> ID：12058861
> 
> 赞同：1
> 
> 时间：2012-08-21T16:04:02.357
> 
> 标签：jquery-ui, datetimepicker

我正在使用[Trent Richardson 的 Timepicker 插件](http://trentrichardson.com/examples/timepicker/)。

我有一个包含可选时间选择器字段的表单。加载表单时，将设置这些字段的默认值。

有谁知道如何将时间选择器字段的默认值设置为空白？

**正在生成的 HTML：**

```
</p><p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="birthday"/>
    <input type="text" class="form_datetime" name="birthday" value="01/01/1970 01:00 AM"/><label for="birthday">Birthday</label>
</p><div class="item_header">
    <label>Office Hours</label>
</div>
<p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="start_office"/>
    <input type="text" class="form_time" name="start_office" value="01:00 AM"/><label for="start_office">Start of the day</label>
</p><p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="end_office"/>
    <input type="text" class="form_time" name="end_office" value="01:00 AM"/><label for="end_office">Gone for the day</label>
</p><p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="vacation_start"/>
    <input type="text" class="form_date" name="vacation_start" value="01/01/1970"/><label for="vacation_start">Vacation start</label>
</p><p class="name"> 
```

**JS：**

```
 $('.form_datetime').datetimepicker({ampm: true,hourGrid: 4,minuteGrid: 15, timeFormat: 'hh:mm TT'});
        $('.form_date').datepicker();
        $('.form_time').timepicker({ampm: true, hourGrid: 4,minuteGrid: 15, timeFormat: 'hh:mm TT'});
//attempt to clear out html data being generated by plugin
$('.datetime_value_fix').each(function(){ 
  field_name = $(this).attr('id'); 
  field_value = $(this).val(); 
  $(' :input').each(function(){ 
    if ($(this).attr('name') == field_name){ 
      if ($(this).val() != field_value){ 
        $(this).val(field_value); 
      } 
    } 
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:12:20.157

Just clear the `value` from inputs :

```
</p><p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="birthday"/>
    <input type="text" class="form_datetime" name="birthday" value=""/><label for="birthday">Birthday</label>
</p><div class="item_header">
    <label>Office Hours</label>
</div>
<p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="start_office"/>
    <input type="text" class="form_time" name="start_office" value=""/><label for="start_office">Start of the day</label>
</p><p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="end_office"/>
    <input type="text" class="form_time" name="end_office" value=""/><label for="end_office">Gone for the day</label>
</p><p class="name">
    <input type="hidden" class="datetime_value_fix" value="" id="vacation_start"/>
    <input type="text" class="form_date" name="vacation_start" value=""/><label for="vacation_start">Vacation start</label>
</p><p class="name"> 
```

# visual-studio-2010 - 如何使用 Visual Studio 2010 创建 RTC 构建定义和构建引擎？

> ID：12058864
> 
> 赞同：2
> 
> 时间：2012-08-21T16:04:08.307
> 
> 标签：visual-studio-2010, build, build-automation, rtc

我正在尝试为已经使用 RTC 3.0.1 的分布式团队配置带有基于 Jazz 的 Rational Team Concert(RTC) 的构建服务器。文档往往令人困惑，因为它往往是基于 Eclipse 的。这篇文章 (https://jazz.net/library/article/119) 引用了一个不存在的 Package Explorer。其他文章说我可以使用 Jazz Build Engine 进行构建，但我没有找到任何下载。提到 Rational Build Forge 是有代价的，但我希望尽可能接近免费。总之，我的情况是：

*   带有源代码存储库的 RTC 服务器。
*   带有 Visual Studio 2010 和 Rational Team Concert Client for Eclipse IDE（版本 3.0.1）的构建服务器
*   几个开发人员成功使用了 RTC Visual Studio 客户端。

任何人都可以为我指出这个特定场景的正确文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:59:43.160

两种选择：

*   使用[BuildForge](https://jazz.net/wiki/bin/view/Main/RationalBuildForge)（RTC[知道如何与它集成](https://jazz.net/wiki/bin/view/Main/BuildFAQ#How_does_Jazz_Team_Build_interop)，但 Build Forge 不是免费的。请参阅“[使用 Build Forge 和 Rational Team Concert 3.0 的企业构建解决方案](https://jazz.net/library/article/607)”）。
    请参阅“ [Rational Team Concert 3.0 和 Build Forge：一个集成场景](https://jazz.net/wiki/bin/view/Main/BuildFAQ#How_does_Jazz_Team_Build_interop)”。
*   使用 Team Build（RTC 的一部分），它包括一个 Jazz Build Engine (JBE)，它从构建定义队列中提取请求以构建这些配置。
    TeamBuild 的限制：一旦您开始使您的 Ant 脚本变得更大且更难调试，或者想要在同一个项目中使用多个活动阶段来编排您的软件交付生命周期，您可能希望使用 Build Forge 来完成这些企业级自动化目标的类型。

您可以从 Team Build 和[Jazz Build Engine](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.build.doc/topics/t_build_overview.html)开始，甚至[可以在一台机器上定义多个](https://jazz.net/wiki/bin/view/Main/BuildFAQ#MultipleJBEs)，以避免仅按顺序处理所有 Build 作业）。
您可以[按照此页面](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.jazz.install.doc/topics/t_install_build_toolkit.html)安装它，并访问“[您的 RTC 版本的所有下载页面](https://jazz.net/downloads/rational-team-concert/releases/3.0.1.1?p=allDownloads)”：查找“构建系统工具包”。

这些都不是 Visual Studio 特有的，但如果您可以使用 TeamBuild 开始构建，那么您可以检查[Visual Studio 如何与构建集成](https://jazz.net/products/rational-team-concert/features/vsclient#vs-4)。

# ios - 在 UITableView 的单元格中选择特定的字符串值

> ID：12058868
> 
> 赞同：0
> 
> 时间：2012-08-21T16:04:39.977
> 
> 标签：ios, uitableview

我有一个表格视图，其中包含 AppDelegate 中的项目列表。表格视图允许用户选择他们想要的项目，并且在选择之后项目旁边有一个复选标记。接下来，用户可以返回上一个屏幕，此选择会更新显示给用户的字符串值。该值也存储在 AppDelegate 中。一切正常，但如果用户选择返回到用户可以更改其选择的屏幕，我希望自动选择此值。

这是我的 SetSizeViewController.m 中的 cellFroRowAtIndexPath 函数

我无法选择存储在 appDelegate.selectedSize 中的值。例如，此值可能类似于“Meter”。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 self.checkedIndexPath = indexPath;

[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];

[tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];

[tableView deselectRowAtIndexPath:indexPath animated:YES];

UITableViewCell *result = nil;

static NSString *CellIdentifier = @"CellIdentifier";

result = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (result == nil){
    result = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

TabAndSplitAppAppDelegate *appDelegate = (TabAndSplitAppAppDelegate *)[[UIApplication sharedApplication] delegate];
SetSize *setSize = (SetSize *)[appDelegate.setSizes objectAtIndex:indexPath.row];

appDelegate.selectedSize = setSize.name;

appDelegate.selectedSizeCheckedIndexValue = (NSInteger *)indexPath.row;

[tableView reloadData];
}

-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

TabAndSplitAppAppDelegate *appDelegate = (TabAndSplitAppAppDelegate *)[[UIApplication sharedApplication] delegate];

if(appDelegate.selectedSize.length > 0)
{
    if ((int)indexPath.row == (int)appDelegate.selectedSizeCheckedIndexValue) {

        [cell setSelected:YES animated:YES];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        [cell setSelected:NO];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:37:27.967

你应该避免给`didSelectRowAtIndexPath:`自己打电话。无论如何，您应该尝试调用`[result setSelected:YES animated:YES]`.

另外，您如何检查此单元格是否是要选择的单元格？如果我错了，请纠正我，但在我看来，有了这个`if(appDelegate.selectedSize) { ...`，每个单元格对于选择代码都是正确的。

**编辑：**

删除`[result setSelected:YES animated:YES]`并`cellForRowAtIndexPath`添加以下内容：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == mySelectedRow) { //mySelectedRow is the index value you stored previously.

        cell.selected = YES; //or [cell setSelected:YES animated:YES] if you want it to be animated.
    }
} 
```

**编辑2：**

首先调整你的 if 函数`willDisplayCell:`以防万一：

```
if ((int)indexPath.row == (int)appDelegate.selectedSizeCheckedIndexValue) {

    [cell setSelected:YES animated:YES]; //or animated:NO depends on what you need.
    [self performSelector:@selector(unselectCellAtIndexPath:) withObject:indexPath afterDelay:1.0]; //add a delay to the deselection. you can change the delay time to whatever suits you.
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

}
else {

    [cell setSelected:NO];
    cell.accessoryType = UITableViewCellAccessoryNone;
}

-(void)unselectCellAtIndexPath:(NSIndexPath *)indexPath {

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

然后在您的内部`didSelectRowAtIndexPath:`，选择您的单元格后，调用`[tableView reloadData]`

# google-apps-script - 在显示谷歌应用程序脚本中扔东西

> ID：12058870
> 
> 赞同：0
> 
> 时间：2012-08-21T16:04:44.370
> 
> 标签：google-apps-script

我正在为google站点平台中的站点编写一个小工具的脚本，在屏幕上显示准确的信息但我不能使用方法MsgBox（），我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:17:16.107

试试[对话框小部件](https://developers.google.com/apps-script/class_dialogbox)。您不能在电子表格之外使用 MsgBox()。

# json - 获取 Json 变量

> ID：12058874
> 
> 赞同：0
> 
> 时间：2012-08-21T16:04:52.037
> 
> 标签：json, variables

我有以下 json 数据：

```
var JSONObject2= {
    "weather": {
        "curren_weather": [
            {
                "humidity": "69",
                "pressure": "1012",
                "temp": "70",
                "temp_unit": "f",
                "weather_code": "1",
                "weather_text": "Mostly cloudy",
                "wind": [
                    {
                        "dir": "Not Available",
                        "speed": "0",
                        "wind_unit": "mph"
                    }
                ]
            }
        ],
        "forecast": [
            {
                "date": "2012-08-21",
                "day": [
                    {
                        "weather_code": "0",
                        "weather_text": "Sunny skies",
                        "wind": [
                            {
                                "dir": "NW",
                                "dir_degree": "311",
                                "speed": "7",
                                "wind_unit": "mph"
                            }
                        ]
                    }
                ],
                "day_max_temp": "83",
                "night": [
                    {
                        "weather_code": "0",
                        "weather_text": "Clear skies",
                        "wind": [
                            {
                                "dir": "WNW",
                                "dir_degree": "289",
                                "speed": "7",
                                "wind_unit": "mph"
                            }
                        ]
                    }
                ],
                "night_min_temp": "57",
                "temp_unit": "f"
            },
            {
                "date": "2012-08-22",
                "day": [
                    {
                        "weather_code": "0",
                        "weather_text": "Sunny skies",
                        "wind": [
                            {
                                "dir": "N",
                                "dir_degree": "7",
                                "speed": "4",
                                "wind_unit": "mph"
                            }
                        ]
                    }
                ],
                "day_max_temp": "85",
                "night": [
                    {
                        "weather_code": "0",
                        "weather_text": "Clear skies",
                        "wind": [
                            {
                                "dir": "S",
                                "dir_degree": "176",
                                "speed": "7",
                                "wind_unit": "mph"
                            }
                        ]
                    }
                ],
                "night_min_temp": "63",
                "temp_unit": "f"
            }
        ]
    }
}; 
```

在非常简单的 json 数据上，我可以弄清楚如何获取变量。像上面这样的事情，对我来说很难。

因此，要访问温度为 70 的位置，我将编写代码： var my_temp= weather.curren_weather.temp // 这不起作用

因此，正如 2 个示例，我将如何获得 temp(70) 并说出 wind_degree 是 311 的位置？

还有一个程序可以像上面一样粘贴到 json 对象中，它会输出访问任何变量所需的正确代码？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:09:58.803

您的对象因嵌套数组而*变得*复杂，目前尚不清楚为什么*当前天气*需要嵌套数组。

在给定这种结构的情况下，要获得`temp`70 分，您需要：

```
var temp = JSONObject2.weather.curren_weather[0].temp; 
```

对于那个特定的风读数：

```
var wind = JSONObject2.weather.forecast[0].day[0].wind[0].dir_degree; 
```

对于该`forecast`字段，嵌套数组是合理的，因为您获得了不同日期 m 的预测列表，因此可以使用以下方法提取数据中表示的第二个日期的白天风读数：

```
var wind = JSONObject2.weather.forecast[1].day[0].wind[0].dir_degree; 
```

# c# - 显示浏览量和评论数的算法

> ID：12058876
> 
> 赞同：1
> 
> 时间：2012-08-21T16:05:05.943
> 
> 标签：c#, algorithm

我写了这样的东西：

```
var _views = (@Model.Views == 1 ? "view" : "views");
var _comments = (@Model.Comments == 1 ? "comment" : "comments");

if(@Model.Views > 0)
{
   if (@Model.Comments > 0)
   {
       @String.Format("{0:n0} {1}, {2:n0} {3}", @Model.Views, _views, @Model.Comments, _comments);
   }
   else
   {
       @String.Format("{0:n0} {1}", @Model.Views, _views);
   }
}
else if (@Model.Comments > 0)
{
   @String.Format("{0:n0} {1}", @Model.Comments, _comments);
} 
```

它确实有效。

它显示视频的观看次数和评论数（例如[http://www.voiceofconscience.org/Video/2](http://www.voiceofconscience.org/Video/2)）

我以这种低质量的方式解决了一个单数/复数问题。

我想知道它应该如何被视为“好风格”

问候马吕斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:17:52.663

这有点更紧凑，它概括为两个以上的计数：

```
var items = new List<string>();
if (Model.Views > 0)
    items.Add(string.Format("{0:n0} {1}", Model.Views, _views));
if (Model.Comments > 0)
    items.Add(string.Format("{0:n0} {1}", Model.Comments, _comments));
var result = ", ".Join(items); 
```

（注意：所有`@`s 都让您看起来像是在编写 ASP.NET MVC 视图，但我不太明白您是如何放置它们的，因此`@`在必要时插入 s。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:18:47.030

*   通常应避免使用以 @ 为前缀的变量——它们使代码更难阅读。
*   下划线前缀通常用于私有实例变量。在这里使用它可能会令人困惑。

对于复数形式，请查看`System.Data.Entity.Design.PluralizationServices.PluralizationService`.

[http://msdn.microsoft.com/en-us/library/system.data.entity.design.pluralizationservices.pluralizationservice.aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.design.pluralizationservices.pluralizationservice.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T16:20:10.180

我认为如果您累积结果字符串而不是遇到 if-else 碎片，它会更好看。像这样：

```
StringBuilder sb = new StringBuilder();
if(@Model.Views > 0)
  sb.AppendFormat("{0:n0} {1}",@Model.Views, _views);
if(@Model.Comments> 0)
  sb.AppendFormat("{0:n0} {1}",@Model.Comments, _comments); 
```

# javascript - 谷歌地图天空 api v3

> ID：12058880
> 
> 赞同：1
> 
> 时间：2012-08-21T16:05:25.590
> 
> 标签：javascript, google-maps

我正在寻找一种使用 Google Maps API V3 显示[夜空地图](http://www.google.com/intl/it/sky/)的方法，但 Google 本身似乎仍在使用 V2，该版本最早将于 2013 年 5 月 19 日停止使用。

Google Maps API V2允许您在课堂[上选择](https://developers.google.com/maps/documentation/javascript/v2/reference#GMapType)各种夜空表示。`GMapType`

Google Maps API V3 只承认`HYBRID`, `ROADMAP`, `SATELLITE`, `TERRAIN`.

有什么方法可以使用 V3 来显示 Google Sky？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:34:25.313

即使 v3 中没有 SKY 地图类型，您也可以直接检索 Sky 地图贴图。在使用 v3 API 的 Maps API 演示库中有一个使用天空数据的示例。

[http://gmaps-samples-v3.googlecode.com/svn/trunk/planetary-maptypes/planetary-maptypes.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/planetary-maptypes/planetary-maptypes.html)

```
mapTypes['sky'] = {
       getTileUrl: function(coord, zoom) {
        return getHorizontallyRepeatingTileUrl(coord, zoom, function(coord, zoom) {
          return "http://mw1.google.com/mw-planetary/sky/skytiles_v1/" +
                 coord.x + "_" + coord.y + '_' + zoom + '.jpg';

        });
      },
      tileSize: new google.maps.Size(256, 256),
      isPng: false,
      maxZoom: 13,
      radius: 57.2957763671875,
      name: 'Sky',
      credit: 'Image Credit: SDSS, DSS Consortium, NASA/ESA/STScI'
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:13:47.950

现在不行。甚至 google 自己的天空地图页面也在 v.2 中：[http ://www.google.com/sky](http://www.google.com/sky)

# java - 使用java对数字进行排序

> ID：12058884
> 
> 赞同：0
> 
> 时间：2012-08-21T16:05:43.260
> 
> 标签：java

```
class sort {
    public static void main(String args[]) {
        int arr[], i, j, n, temp;
        n = args.length;
        for (i = 0; i <n; i++) {
            arr[i] = Integer.parseInt(args[i]);
        }
        for (i = 0; i < n-1; i++) {
            for (j = i + 1; j < n; j++) {
                if (arr[i] > arr[j]) {
                    temp = arr[i];
                    arr[i] = arr[j];
                    arr[j] = temp;
                }
            }
        }
        for (i = 0; i <= n; i++) {
            System.out.println(arr[i]);
        }
    }
} 
```

我在我的程序中发现了一些错误，请检查一下。arr[] 中的一些错误即将到来，但我无法找到实际问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:08:02.310

在这段代码中

```
for (i = 0; i <= n; i++) 
```

应该

```
for (i = 0; i < n; i++) 
```

但如果不提供抛出的异常，则无法说。

你能发布实际错误是什么以及它发生在哪里吗？

* * *

我猜测

```
for(j=1+1; j<=n; j++) 
```

应该

```
for(j= i +1; j < n; j++) 
```

但你真的应该使用`Arrays.sort(arr)`和`Arrays.toString(arr)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T16:08:14.633

您从未初始化`arr`. 数组是一个对象，需要先“更新”才能使用。

```
arr = new int[100]; //Sets size of array to hold 100 integers 
```

或针对您的情况

```
arr = new int[args.length]; 
```

它需要知道要分配多少内存（要存储多少整数）。在尝试在以下行中访问它*之前*，请确保使用上面的代码初始化数组：

```
arr[i] = Integer.parseInt(args [i]); 
```

这段代码应该给你一个编译器错误

> 变量 arr 可能尚未初始化

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:08:22.317

它更好地使用`Collections.sort(List list);`

```
List<Integer> list=new ArrayList();
 for (i = 0; i <= n; i++) {
            list.add(Integer.parseInt(args[i]));
        }
Collections.sort(list); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T18:20:49.933

只需删除最后一个循环中的等号，您的程序就会运行良好！

# jquery - 在我的 jQuery 对话框中删除行后，滚动条仅在 IE 中显示

> ID：12058885
> 
> 赞同：0
> 
> 时间：2012-08-21T16:05:47.310
> 
> 标签：jquery

我有一个 jQuery 对话框，我在其中添加/删除行。

![在此处输入图像描述](../Images/5b042e8ba41d762e804cc3782c38050d.png)

当我删除行（使用垃圾桶按钮）时，我看到一个带有 Internet Explorer 9 的滚动条。

用 Chrome 没问题。

![在此处输入图像描述](../Images/1bf92065a839733b3bb9873dc16c161b.png)

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:08:04.767

您需要将此 css 添加到正确的 div 中：

```
overflow: hidden; 
```

# css - 如何将 div 直接定位在其兄弟的下方（不使用固定坐标）？

> ID：12058886
> 
> 赞同：1
> 
> 时间：2012-08-21T16:05:47.433
> 
> 标签：css

我有以下html：

```
<div id="container">
    <div id="pageHeader">
      <h1><span>Page Title</span></h1>
    </div>

    <div id="navigation_menu">
      <ul>
        <li id="treeslink"><a href="#">Trees</a></li>
        <li id="gardenslink"><a href="#">Gardens</a></li>
        <li id="portlink"><a href="#">Portfolio</a></li>
      </ul>
    </div> 
  </div> 
```

我想`navigation_menu`直接放在`pageHeader`.

所以我的 .css 中有这个：

```
#container {width:870px; margin:0 auto;position:relative;}

#pageHeader h1 
{
  position:absolute;
  width:870px;  
  margin-top:0;
  font:74px "F25_TypewriterCondensed";
  letter-spacing:-2px;
}

#navigation_menu
{
  position:absolute;
  width: 169px;
} 
```

但navigation_menu 只是出现在`pageHeader`左上角`container`。有可能在下面得到它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:13:04.643

I don't see why you use the absolute positioning. What you are after is actualy default behaviour. I updated your css to this:

```
#container 
{
   width:870px; 
   margin:0 auto;
}

#pageHeader h1 
{

  margin-top:0;
  font:74px "F25_TypewriterCondensed";
  letter-spacing:-2px;
}

#navigation_menu
{
  width: 169px;
}​ 
```

check the fiddle to see the code in action: [http://jsfiddle.net/ebgVq/](http://jsfiddle.net/ebgVq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:13:29.983

You have a few problems, first, get rid of absolute positioning on `navigation_menu`, it will make it ignore the "pushiness" of the other divs above it.

Second, we have to make pageHeader get pushed. When you make an element positioned absolutely it loses it's ability to make other objects flow around it, including parent elements which want to re-size to their content. Having an absolutely positioned `h1` inside of that `div` makes the `div` size to 1px x 1px.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T16:14:54.597

如果您设置一个高度`#pageHeader h1`，然后使用相同的数量（例如每个 100 像素）设置一个边距顶部，`#navigation_menu`这应该可以实现您想要的。由于您是绝对定位，因此您将元素从文档流中取出。通过给标题一个高度，您可以通过将其向下移动相同的量来明确地将菜单定位在其下方。这实际上只是一种视觉效果，因为这两个元素都没有流动。

# php - 如何处理需要组合的具有多个键和整数的数组？

> ID：12058887
> 
> 赞同：0
> 
> 时间：2012-08-21T16:06:01.043
> 
> 标签：php, arrays

我知道标题有点含糊，但我不知道该怎么说。我有这个包含名称和数字的数组。我要做的是组合相同的名称，但将该名称的数字相加。

所以这里是数组：

```
array (array[0] => ([tom] => 4) array[1] => ([mike] => 6) array[2] => ([tom] => 6) array[3] => ([alice] => 9) array[4] => ([alice] => 10) array[5] => ([mike] => 3)) 
```

*很确定我在上面打错了，但我想你明白我的意思了吗？

因此，我不确定将名称组合为唯一的最佳方法，但同时将该名称的所有数字加起来，最终结果看起来像这样。

```
array ([tom] => 10 [mike] => 9 [alice] => 19) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:18:17.620

从这里开始：

```
$source = array(
    array('tom' => 4),
    array('mike' => 6),
    array('tom' => 6),
    array('alice' => 9),
    array('alice' => 10),
    array('mike' => 3)
);

$result = array_fill_keys(array_map("key",$source),0);

foreach ($source as $person)
    foreach ($person as $name => $value)
        $result[$name] += $value;

var_dump($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:12:23.457

```
$source = array(
    array('tom' => 4),
    array('mike' => 6),
    array('tom' => 6),
    array('alice' => 9),
    array('alice' => 10),
    array('mike' => 3)
);

$result = call_user_func_array('array_merge_recursive', $source);
echo '1st step: '; print_r($result);

$result = array_map('array_sum', $result);
echo '2nd step: '; print_r($result); 
```

结果：

```
1st step: Array
(
    [tom] => Array
        (
            [0] => 4
            [1] => 6
        )

    [mike] => Array
        (
            [0] => 6
            [1] => 3
        )

    [alice] => Array
        (
            [0] => 9
            [1] => 10
        )

)
2nd step: Array
(
    [tom] => 10
    [mike] => 9
    [alice] => 19
) 
```

# java - 深拷贝应该如何工作？

> ID：12058890
> 
> 赞同：6
> 
> 时间：2012-08-21T16:06:10.947
> 
> 标签：java

好吧，当做一个深拷贝时，显然不应该复制引用。但是，如果被复制的对象包含本身是对同一对象的引用的对象，则应该维护或应该只复制数据。

例子

```
public class Program() {
    public void Main(String[] args) {
        Person person = new Person();
        person.setName("Simon");

        List<Person> people = new ArrayList<Person>();
        people.add(person);
        people.add(person);
        people.add(person);

        List<Person> otherPeople = magicDeepCopyFunction(people);

        otherPeople.get(0).setName("Adam");

        // should this output 'Adam' or 'Simon'?
        System.out.println(otherPeople.get(1)); 
    }
} 
```

我可以看到两者的论点，但我想知道共识是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:13:14.973

A true deep copy creates copies of everything all the way down the tree of references.

If B is a deep copy of A, any changes you make to A will *not* be visible via B.

Most deep copy algorithms would not notice that in your example, all three members of `people` are references to the same `person`. A typical deep copy algorithm would create three new Person objects.

However, it's not all that common to see a true deep copy, because it's hard to program reliably (except for very strictly defined data structures), and expensive at runtime.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:11:42.713

这取决于您对数据结构如何工作的期望。

通常，您会使参考文献与原始文献中的参考文献一样普遍。即它应该假设您有两个对同一个对象的引用，这是有充分理由的。您不应该期望它会制作同一个对象的两个副本来解决不正确的数据结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:14:07.390

+1 为 Simon 如果我看到了 magicDeepCopyFunction() 的调用，我会期待真正的深层副本。它更具防御性并且更难实现，因为可能存在另一个级别的关系、循环等。这实际上取决于您想要做什么，但是如果您调用方法深拷贝，其他人可以将其用作黑匣子没有任何风险。

# ruby-on-rails - 如何根据 rails config 中的本地操作系统信息进行配置？

> ID：12058893
> 
> 赞同：1
> 
> 时间：2012-08-21T16:06:26.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

在我的 Rails 应用程序的配置文件 (config/environments/*.rb) 中，我需要提供配置 HTTPS 所需的一些文件的路径。我不想将这些文件本身打包到我的应用程序本身中，因为它们就像私钥文件一样。

我想做的是检查本地操作系统（无论是 Windows 还是 Linux）并提供基于此的替代路径。我可以打电话来获取这些信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:27:40.130

可能这有帮助

```
 case RUBY_PLATFORM
    when /linux.*x86_64|x86_64.*linux/
      OS_PLATFORM = 'linux64'
    when /linux/
      OS_PLATFORM = 'linux32'
    when /darwin/
      OS_PLATFORM = 'darwin'
    else
      OS_PLATFORM = 'win32'
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:31:58.867

这是一个在 Linux 机器上输出“linux”的命令行示例：

```
 ruby -e "require 'rbconfig'; puts Config::CONFIG['target_os']" 
```

# node.js - 在 Handlebars.js 中设置 Embers.js 属性

> ID：12058894
> 
> 赞同：0
> 
> 时间：2012-08-21T16:06:27.717
> 
> 标签：node.js, ember.js, pug, handlebars.js

我有一个站点在后端使用 Node.js 和 Jade，在客户端我使用 Handelbars.js 和 Embers.js。我正在将一个属性传递到我的 flickr apiKey 的 .jade 模板中，这样我就可以将所有这些密钥保存在一个服务器端 json 文件中。然后我想在 html 中设置我的 Embers flickrPhotoSearchRequestModel 的属性，以便它可以使用它来访问 api。

我正在尝试做

```
script(type='text/x-handlebars')
  {{Piccee.flickrPhotoSearchRequestModel.set('api_key', 1)}} 
```

但是，这似乎不起作用。

FlickrController.js

```
Piccee.FlickrPhotoSearchRequestModel = Em.Object.extend({
api_key: "",
searchTerm: "",
page: 1,
url: function() {
    var url = "http://api.flickr.com/services/rest/?method=flickr.photos.search";
    url += '&api_key=' + this.get("api_key");
    url += '&tags=' + this.get("searchTerm");
    url += '&text=' + this.get("searchTerm");
    url += '&page=' + this.get('page'); 
    url += '&sort=interestingness-desc&extras=url_sq%2C+url_t%2C+url_s%2C+url_q%2C+url_m%2C+url_n%2C+url_z%2C+url_c%2C+url_l%2C+url_o&format=json&nojsoncallback=1';
    return url;
}.property('api_key', 'searchTerm', 'page'),    
});

Piccee.flickrPhotoSearchRequestModel = Piccee.FlickrPhotoSearchRequestModel.create({
api_key: "123",
searchTerm: "",
page: 1 
```

});

在 .js 中，上面的 set 方法可以正常工作，只是在 Handelebar 的模板中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:07:00.843

Ember 不会执行括号中的内容，因此尝试 a 之类的东西是`set`行不通的。相反，您应该创建一个视图并将您的数据作为参数（即“api_key”）。现在我通常建议通过绑定来执行此操作，以便可以更新/传播，但您的数据是在 HTML 中生成的，并且只需要执行一次......所以您可以尝试这样的事情：

```
<script type='text/x-handlebars'>
    {{#view SomeView api_key=1}}
        <a {{bindAttr href="piccee.url"}}>Some Pics</a>
    {{/view}}
</script> 
```

然后：

```
SomeView = Em.View.extend({
    api_key: null,
    piccee: null,

    init: function(){
        this._super();
        this.set('piccee', Piccee.FlickrPhotoSearchRequestModel.create({ 
            api_key: this.get('api_key'); 
        }));
    }
}); 
```

如果您对此有疑问，请告诉我，我将创建一个提琴手。

话虽如此，您还可以注册自己的车把助手（尽管如此`Ember.Handlebars.registerHelper`），它可以接受参数并绘制视图。它本质上是一个小部件；一旦你的视图工作并且你知道你想一遍又一遍地使用它，我只会沿着这条路走。

**编辑：**所以，现在我们想要绑定该值而不是最初设置它。你可以`parentViews`在你的路径中引用，这使得这样的事情变得很好。

```
{{#view SomeHeaderView api_key=1}}
    ...
    stuff & things 
    ...

    {{#each myList}}
        {{#view SomeView}}
            ... link here ...
        {{/view}}
    {{/each}}
{{/view}} 
```

并在该网址内（更改`api_key`为`parentView.api_key`）：

```
...
url: function() {
    var url = "http://api.flickr.com/services/rest/?method=flickr.photos.search";
    url += '&api_key=' + this.get("parentView.api_key");
    url += '&tags=' + this.get("searchTerm");
    url += '&text=' + this.get("searchTerm");
    url += '&page=' + this.get('page'); 
    url += '&sort=interestingness-desc&extras=url_sq%2C+url_t%2C+url_s%2C+url_q%2C+url_m%2C+url_n%2C+url_z%2C+url_c%2C+url_l%2C+url_o&format=json&nojsoncallback=1';
    return url;
    }.property('parentView.api_key', 'searchTerm', 'page'),    
... 
```

我通常会得到一个视图，因为我发现我想要的不仅仅是简单的操作，而且它是[合法](http://emberjs.com/documentation/#toc_displaying-a-list-of-items)的。我仍然不是 100% 确定我会遵循，但我认为这就是你要去的方向。

# .net - 使用自己的基于 .NET 的框架的不同项目

> ID：12058895
> 
> 赞同：2
> 
> 时间：2012-08-21T16:06:28.127
> 
> 标签：.net, visual-studio, project-management, release

在使用您自己开发的代码库时，我正在寻找有关正确发布管理的信息。我们正在使用 Visual Studio 2010，在 .NET 中开发并使用 TFS。让我勾勒一下情况。

我们正在与一个团队合作开展不同的项目，这些项目都产生了自己的程序/产品。所以我们开始考虑重用代码并将它们放入某种框架或库中。为此，我们创建了一个单独的解决方案，其中包含不同的项目和它们之间的依赖关系。我们称之为“*平台*”。

“***平台***”的解决方案例如有以下项目：

*   日志记录
*   记录.测试
*   实用程序
*   图表控件
    *   *日志依赖*
    *   *实用程序依赖*
*   本土化
    *   *日志依赖*
*   本地化.测试

实际上，我们已经有 20 个项目，并且项目之间的依赖关系更多，但这应该让事情变得清晰。

假设我们现在有两个项目*A*和*B*。它们如下所示：

## 项目A

*   *参考记录*
*   *参考 Utils*
*   *对 ChartControl 的引用*
*   *本地化参考*
*   达尔
    *   *日志依赖*
*   主应用
    *   *DAL 依赖*
    *   *日志依赖*
    *   *实用程序依赖*
    *   *ChartControl 依赖项*
    *   *本地化依赖*

## 项目 B

*   *对 ChartControl 的引用*
*   *本地化参考*
*   主应用
    *   *ChartControl 依赖项*
    *   *本地化依赖*

我们如何管理这种结构？我看到了几个问题，但没有真正的答案。

*   *我们是否在平台*的项目 A 和 B 中包含 DLL 或代码？
*   我们是否签入 DLL 并复制到不同的项目？分支可以有益吗？
*   版本呢？假设项目 A 使用 Logging V.1.0.0.0，并且与同样使用 Logging V.1.0.0.0 的 ChartControl 一起工作得很好。在某一天，我们决定使用新版本的 ChartControl，它也使用新版本的 Logging V.2.0.0.0。如何确保项目 A 不会被迫也开始使用 Logging V.2.0.0.0？
*   我们可以决定将平台作为一部分、全部或全部发布。但是我们如何管理所有这些 DLL 的构建。手动更新所有项目中的版本号需要大量工作，并且从所有不同的 bin 文件夹中提取它们甚至更多。
*   我们如何将“*平台*”集成到我们的项目中。我们是否创建了一个引用文件夹并将所有 DLL 放在其中，以便在解决方案中引用它们？
*   我们如何跟踪依赖关系？如果为整个*平台*发布一个版本，我们如何丢弃不需要的 DLL。例如，项目 B 对 Utils 不感兴趣，但间接对 Logging 感兴趣。
*   如果我们将平台作为一个平台发布，那么小的改动就会产生一组全新的 DLL。例如，Utils 项目中的更改也将导致 Logging、Localization 等新版本......除非没有更改。

我还尝试搜索互联网并进行了一些内部讨论，但没有提供真正的答案。我在 Stack Overflow 上发现的是关于库和框架之间的定义差异，在 MSDN 上你可以阅读很多关于 DLL 和 GAC 的信息。

欢迎任何最佳实践、工具、经验……。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:04:58.747

我会为“平台”创建 NuGet 包，并将它们分隔在具有清晰依赖结构的逻辑块中，这样当您需要例如“Utils”时，您可以安装此包，并且会立即安装“Logging”包。它还涵盖了版本管理。

请参阅[http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)

然后，因为它是一个内部框架，你想看看设置你自己的 NuGet 提要：[http ://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)

设置它可能是最初的承诺，但从长远来看，您肯定会从这种方法中获益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:47:32.823

我会使用包含所有代码的分层目录结构，以及库 DLL 的发布版本；使用相对路径来引用其他 DLL 或项目。这应该使您可以根据需要灵活地维护和更新依赖项。

> 我们是否在平台的项目 A 和 B 中包含 DLL 或代码？

将所有内容都签入 TFS。每个项目都可以决定是否通过引用 DLL 或项目文件来解决其依赖关系。

> 我们是否签入 DLL 并复制到不同的项目？分支可以有益吗？

签入 DLL，但将它们保存在源代码控制结构中较低级别的*Shared Resources文件夹中：*

```
/Shared
    /DLLs
        /Platform
            /Logging
                /V1.0.0.0
                    /Debug
                    /Release
                /V2.0.0.0
            /ChartControl
/Source
    /Platform
        /Logging
        /ChartControl
    /Projects
        /ProjectA
        /ProjectB 
```

> 版本呢？假设项目 A 使用 Logging V.1.0.0.0，并且与同样使用 Logging V.1.0.0.0 的 ChartControl 一起工作得很好。在某一天，我们决定使用新版本的 ChartControl，它也使用新版本的 Logging V.2.0.0.0。如何确保项目 A 不会被迫也开始使用 Logging V.2.0.0.0？

如果您需要让不同的项目引用同一库的不同版本，请签入每个发布版本。所以*ChartControl*可以引用/Shared/DLLs/Logging/V1.0.0.0，而*Project A*可以引用V2.0.0.0。（不过，我倾向于注意这一点，因为它可能会变得混乱；如果新的日志记录版本使用不同的文件/数据库格式怎么办？）

> 我们可以决定将平台作为一部分、全部或全部发布。但是我们如何管理所有这些 DLL 的构建。手动更新所有项目中的版本号需要大量工作，并且从所有不同的 bin 文件夹中提取它们甚至更多。

要自动化构建任务，一定要考虑持续集成服务器（Cruise Control、QuickBuild、Jenkins 等）。

> 我们如何将“平台”整合到我们的项目中。我们是否创建了一个引用文件夹并将所有 DLL 放在其中，以便在解决方案中引用它们？

我认为这是正确的做法。引用 DLL 使您能够遵守平台的单独开发/测试/发布过程。

> 我们如何跟踪依赖关系？如果为整个平台发布一个版本，我们如何丢弃不需要的 DLL。例如，项目 B 对 Utils 不感兴趣，但间接对 Logging 感兴趣。

每个项目所有者都必须跟踪自己的依赖关系；只有项目 B 的所有者知道是否引用 Utils。

> 如果我们将平台作为一个平台发布，那么小的改动就会产生一组全新的 DLL。例如，Utils 项目中的更改也将导致 Logging、Localization 等新版本......除非没有更改。

不过这应该没问题吧？这是一个政策问题；是否应该强制每个项目集成平台的最新版本，或者他们可以针对旧版本工作。我认为你是在暗示后者是正确的。项目 A、B 等是最终产品，因此由这些项目的所有者决定何时集成新的 DLL。

# jquery - 在 JQuery 中恢复多个分离的元素

> ID：12058896
> 
> 赞同：2
> 
> 时间：2012-08-21T16:06:29.397
> 
> 标签：jquery, detach

我在表格中有一个链接，单击该链接会删除整个 parent `tr`。我`detach()`用于稍后根据事件恢复该项目。

通常，人们会将其存储为一个变量，然后再调用它并稍后再使用它`append()`，但是如果我需要恢复多行怎么办？

没有`.=`向变量添加更多内容的方法吗？

JSFiddle = [http://jsfiddle.net/nErDy/](http://jsfiddle.net/nErDy/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T16:11:49.363

Why not use an array?

```
var deleted = [];
//Allow people to delete rows
$('a.delete').click(function() {
    deleted.push($(this).parent().parent().detach());
});

//Restore all
$('a.restore').click(function() {
    $.each(deleted, function(i, v) {
        $('#teams').append(v);
    });
});​ 
```

[http://jsfiddle.net/wirey00/nErDy/2/](http://jsfiddle.net/wirey00/nErDy/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:11:14.550

you should use an array to store all the dettached items: [http://jsfiddle.net/nErDy/1/](http://jsfiddle.net/nErDy/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T16:17:19.887

其他人都说，使用数组。此外，将奇数行的 css 移动到实际的 css 中，因此它尊重已删除的行。

```
#teams tr:nth-child(even) td { background-color : #cecece }​ 
```

[http://jsfiddle.net/44Qab/](http://jsfiddle.net/44Qab/)

# mysql - 使用连接而不是子查询

> ID：12058898
> 
> 赞同：0
> 
> 时间：2012-08-21T16:06:38.050
> 
> 标签：mysql, join, nested-query

我有一个 mysql 数据库，其中包含两个表 - **[PM_text]**和**[PM_bact]**等。这两个表包含一个公共数据列。我的意图是使用与第二个表中的公共数据列的匹配项从第一个表中检索信息。我最初为此使用了嵌套查询，并且效果很好。我突然注意到它不再最终执行。我想改用'joins'，看看是否会进一步优化它。

这是我的初始查询：

**SELECT pmid, year, title, pages FROM PM_text WHERE pmid IN (SELECT pmd_id from PM_bact WHERE bact1 LIKE ? AND bact2 LIKE ? AND associat LIKE ?);**

但我打算将其更改为：

**从 PM_text、PM_bact 中选择不同的 PM_text.pmid、PM_text.year、PM_text.title、PM_text.pages 在哪里 PM_text.pmid = PM_bact.pmd_id 和 PM_bact.bact1 喜欢？和 PM_bact.bact2 喜欢吗？和 PM_bact.associat 喜欢吗？;**

我需要确保与第二个表中的 'bact1'、'bact2' 和 'associat' 匹配，并且担心在查询中重复使用 'AND' 可能会影响其优化。

我相信有更好的方法可以做到这一点，并且对这个主题不熟悉我会很感激你能提供的任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:28:29.753

您的第二个查询很好，很多和语句都没有错。确保您在 pmid 和 pmd_id 列上有索引，您应该会看到这方面的良好性能。

你可以把它写出来，用 on 子句完全拼出内部连接，但是查询的执行方式与你现在的一样。

# php - 将动画 GIF 转换为 PNG

> ID：12058900
> 
> 赞同：1
> 
> 时间：2012-08-21T16:06:47.577
> 
> 标签：php, png, animated-gif

我正在尝试仅将动画 GIF 的第一帧显示为 PNG 以用作缩略图。我目前有这个代码：

```
<?php
function myImageCreateFromGif($file_or_url) { 
$dummy_file = "/tmp/dummy.gif"; 
# if this is a url, use fopen to get the file data, then 
# save it to a dummy file 
if (preg_match("/(http|ftp):\/\//i", $file_or_url)) { 
        # open the file using fopen, which supports remote URLs 
        $input = fopen($file_or_url, "rb"); 
        # read the contents of the file 
        # will accept files up to 10Mb, but will probably get 
        # and EOF before that, we have to do it this way because 
        # filesize isn't designed to work with URLs.  sigh. 
        $image_data = fread($input, 10000000); 
        fclose($input); 
        # write the contents to a dummy file 
        $output = fopen("$dummy_file", "wb"); 
        fwrite($output, $image_data); 
        fclose($output); 
        # create the gif from the dummy file 
        $image = ImageCreateFromGif($dummy_file); 
        # get rid of the dummy file 
        unlink($dummy_file); 
    } 
    # if it's not a URL, we can simply open the image directly 
    else { 
        $image = ImageCreateFromGif($file_or_url); 
    } 
    if ($image) { return $image; } 
    else { return 0; } 
}
$image = "http://i.imgur.com/".$_GET["i"].".gif";
$img = myImageCreateFromGif($image);
if($img) {
    header("Content-Type: image/png");
    ImagePNG($img);
    ImageDestroy($img);
}
?> 
```

效果很好，但是 GIF 在变成 PNG 之前不会完全加载，因此如果 GIF 根本无法加载，页面会返回损坏的图像，或者通过重复它的内容来填充未加载部分的部分加载的 GIF设法加载。那么，我怎样才能在将 GIF 变成 PNG 之前让它完全加载呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:13:57.113

我会使用 ImageMagick`convert`将 GIF 的第一帧转换为 PNG。`[0]`您通过添加到文件名来处理第一帧。

哦，最近的版本`convert`可以很好地直接处理源文件位置的 URI：

```
 convert  "http://imgur.com/a.gif[0]"  a.png 
```

或者

```
 convert  "http://imgur.com/a.gif[0]"  -thumbnail  128x128  a.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:14:15.050

您应该使用 perl 通过 http 检索文件。

这是来自 php 手册： [http ://www.php.net/manual/de/function.curl-exec.php](http://www.php.net/manual/de/function.curl-exec.php)

```
/**
 * Send a GET requst using cURL
 * @param string $url to request
 * @param array $get values to send
 * @param array $options for cURL
 * @return string
 */
function curl_get($url, array $get = NULL, array $options = array())
{   
    $defaults = array(
        CURLOPT_URL => $url. (strpos($url, '?') === FALSE ? '?' : ''). http_build_query($get),
        CURLOPT_HEADER => 0,
        CURLOPT_RETURNTRANSFER => TRUE,
        CURLOPT_TIMEOUT => 4
    );

    $ch = curl_init();
    curl_setopt_array($ch, ($options + $defaults));
    if( ! $result = curl_exec($ch))
    {
        trigger_error(curl_error($ch));
    }
    curl_close($ch);
    return $result;
} 
```

它将返回您在 th`$url`参数中设置的文件的文件内容。

# ios - iOS系统符号符号服务

> ID：12058901
> 
> 赞同：1
> 
> 时间：2012-08-21T16:06:47.610
> 
> 标签：ios, crash-reports, symbolicate

我正在使用[QuincyKit](http://quincykit.net/)从我的 iOS 用户那里获取崩溃日志。我的 Mac 盒子用作后端，并针对应用程序调试符号表示这些崩溃。

但在绝大多数情况下，它无法表示属于系统库的堆栈条目。有时，这会妨碍调试。我的 Mac 没有适用于所有可想到的 iOS 版本的符号。[如前所述](https://stackoverflow.com/questions/10231779/force-download-ios-5-0-1-symbols)，甚至没有官方支持在没有设备的情况下获得它们。

问题 - 有没有人知道在线服务可以将我的崩溃日志与一个好的系统符号库进行对比？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:26:49.863

既然您使用的是 QuincyKit，为什么不使用[HockeyApp.net](http://HockeyApp.net) :) 它来自同一个开发人员，即我和其他人 :) HockeyApp 具有所有可用版本的系统符号，因此符号化根本不是问题。

SDK 还与 SDK 的 HockeyApp 特定继任者一起推进：http: [//www.hockeyapp.net/blog/2012/8/13/hockeysdk-for-ios.html](http://www.hockeyapp.net/blog/2012/8/13/hockeysdk-for-ios.html)

注意：这个新的 SDK 以异步安全的方式在发生崩溃的设备上象征系统符号。

# sql - SQL - ORDER BY - 线程和消息

> ID：12058902
> 
> 赞同：0
> 
> 时间：2012-08-21T16:06:58.740
> 
> 标签：sql, sql-server, sql-order-by

我有三张桌子：

```
Message_Threads: ( thread_ID )
Message_Users:   ( thread_ID, user_ID, notify )
Messages:        ( thread_ID, user_ID, message_ID, date_created ) 
```

我试图按线程中最新消息的顺序仅列出线程，但我想显示那些在其余消息之上具有 notify=1 的线程（当一个新的线程上的所有其他用户的通知设置为 1当他们访问该线程时，消息被发布并设置为 0）。有人给我一个怪物选择声明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:11:53.157

您的数据结构没有明确消息和消息用户的关系。我的假设是这些都加入了 thread_id 和 user_id。然后在线程级别聚合它们：

```
select t.thread_id
from thread t join
     message m
     on t.thread_id = m.thread_id join
     message_users mu
     on m.thread_id = mu.thread_id and
        m.user_id = mu.user_id
group by thread_id
order by max(mu.notify) desc, max(m.date_created) desc 
```

这其中的关键是最终的顺序。按先通知排序，但降序排列，因此“1”出现在“0”之前（假设非 1 值为 0）。然后按创建日期。

要将其限制为特定用户，请在组之前使用 WHERE 语句：

```
WHERE u.user_id = session_user_id 
```

# ios - SQLite 保存 NSData 并取回

> ID：12058909
> 
> 赞同：0
> 
> 时间：2012-08-21T16:07:45.850
> 
> 标签：ios, iphone, sqlite, nsdata

我在我的程序中使用 sqlite。为了保存 NSData 我正在使用这个：

```
sqlite3_bind_blob(addStmt, 5, somedata, -1, SQLITE_TRANSIENT); 
```

并像这样取回它：

```
NSData *data = [[NSData alloc] initWithBytes:sqlite3_column_blob(selectstmt, 4) length:sqlite3_column_bytes(selectstmt, 4)]; 
```

但是当我试图查看数据时：

```
NSLog(@"%@", data); 
```

它回来了：`<84fa8801 0200>`

请帮我把它转换成真正的 NSData ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:57:31.553

我相当确定

`NSLog(@"%@", data);`

只是打印出`NSData`对象的内存地址。我想你正在寻找这样的东西：

```
NSString *stringData = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)]; 
```

这将为您提供第一个单元格中当前行中包含的数据作为`NSString`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:17:02.887

“真正的 NSData”是什么意思？NSData 将始终是二进制数据，看起来与您在日志语句中使用它时发布的方式非常相似。

要再次拥有可打印的 NSString，您必须使用 [initWithData:] 函数创建一个 NSString：

```
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] 
```

# winapi - 可以将 TCP SOCKET 句柄设置为不可继承吗？

> ID：12058911
> 
> 赞同：10
> 
> 时间：2012-08-21T16:07:52.770
> 
> 标签：winapi, winsock

Windows 句柄可以设置为可继承或不可继承，以控制子进程是否会接收它们（当`bInheritHandles`in`CreateProcess`为 TRUE 时）。但是，使用`SetHandleInformation`标记 SOCKET 不可继承并不总是有效。特别是，当安装了某些分层服务提供程序 (LSP) 时，子进程无论如何都会继承句柄。这特别有可能导致侦听套接字出现错误。（但是，由于[另一个问题](https://stackoverflow.com/questions/11847793/)，如果孩子尝试使用套接字，它将无法做到！真正的 catch-22！）

### 重现步骤

1.  创建例如一个监听套接字。使用 . 将其标记为不可继承`SetHandleInformation`。
2.  产生一个孩子，与`bInheritHandles`真实。
3.  关闭父级中的套接字，并尝试重新绑定到端口。

当安装（非 IFS）LSP 时，例如。PCTools Internet Security，侦听套接字将在子进程中打开（在 中可见`netstat`），尽管`SetHandleInformation`在创建子进程之前调用套接字以禁用继承。

有关替代方案，请参阅[KB2398202](http://support.microsoft.com/kb/2398202)中的（简要）步骤。

### 有哪些解决方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T16:07:52.770

## 简短的回答

通常不可能将 SOCKET 句柄设置为不可继承。也就是说，当安装了某些（非 IFS）LSP 时，即使您将进程中的句柄特别标记为不可继承，也无法阻止子进程`bInheritHandles=TRUE`接收它们。

## 解释

防火墙或 A/V 产品通常使用 LSP 来过滤所有 TCP 连接。LSP 是由 WinSock 加载到您的进程中的 DLL，它处理所有 TCP 操作，通常通过执行一些过滤然后将调用直接传递到底层 WinSock 实现。LSP 通过为每个产生 WinSock 实现的实际 SOCKET 句柄创建一个虚拟句柄来工作：您对 WSASocket 的调用将为您提供虚拟句柄；当您使用虚拟句柄时，调用将发送到创建它的 LSP；然后 LSP 将 dummy 映射回实际句柄，并将操作（例如`accept`or `bind`）传递给底层句柄。

因此，问题在于仅调用`SetHandleInformation`您创建的套接字是不够的：您从未见过的底层句柄（由 LSP 内部使用）仍然由子进程继承。

## 解决方法

1.  **永远不要调用`CreateProcess`允许从使用套接字的应用程序的任何继承。**这是最可靠的解决方案。相反，要建立与孩子的通信，请创建一个具有适当权限的命名管道，在命令行上将其名称传递给孩子，然后在孩子中重新连接。然后手动传递您希望孩子继承的任何句柄。这是安全的，因为尽管其他用户可以读取命令行，但如果设置正确，则只有孩子的实际用户令牌才能连接到管道。
    如果您只想做一些简单的事情，例如重定向孩子的 stdio，这是非常不雅的，因为您必须控制孩子中的参数解析。要解决这个问题，请创建一个包装器二进制文件，它从命令行读取命名管道名称并连接，设置可继承的句柄，并使用重定向的 stdio 重新调用剩余的参数。从包装器继承句柄是安全的，因为进程中没有套接字。
2.  或者，在 Vista（带有[KB2398202](http://support.microsoft.com/kb/2398202)）、Windows 7（带有 SP1）和更高版本上，该`WSA_FLAG_NO_HANDLE_INHERIT`标志被添加到`WSASocket`. *（这是我可以从 Microsoft 找到的关于该问题的尽可能多的文档。创建修补程序几乎是承认，如果没有它来防止 Base Service Provider 句柄被继承，这是不可能的。虽然它没有很好地宣传！）*
3.  最后，在 Vista 上，还有允许查询基本服务提供者使用的句柄的 ioctl。然后可以将这些标记为不可继承。虽然这很痛苦，但仍然不能解决 XP 的问题。

# java - jsadebugd.exe 无法附加，但 VisualVM 工作正常

> ID：12058912
> 
> 赞同：2
> 
> 时间：2012-08-21T16:07:53.260
> 
> 标签：java, debugging, reverse-engineering, remote-debugging, jvm-hotspot

我正在尝试将调试器附加到第 3 方程序以进行一些逆向工程。该程序正在保存[非普通 zip 文件的 zip 文件](https://superuser.com/questions/457271/identifiying-a-zip-file-that-is-not-really-a-zip-file)，它可以很好地打开它们，但是当我尝试使用 7zip 或 CSharpZipLib 等软件时出现错误。我想附加一个调试器，看看程序是如何解压的。此外，每个 zip 文件中的“畸形”也不相同。有些没有修改就可以解压，有些像我的链接问题一样有格式错误的标题，有些似乎没问题，但 CSharpZipLib 无法解压缩它（但窗口的内置解压缩工作正常）。

我知道它在解压缩时调用了 java 中的某些东西，因为`ProcessExplorer`我可以看到很多`rt.jar`来自 exe 的调用，而它正在将解压缩的版本写入临时文件夹（我需要自己做，因为我需要解压缩 105,987 zip文件，并且通过程序的 UI 执行此操作并从临时文件夹中获取解压缩的文件将花费不合理的时间）。

从[这个 SO question](https://stackoverflow.com/questions/376201/debug-a-java-application-without-starting-the-jvm-with-debug-arguments)我发现了如何在程序没有从 JVM 启动的调试器参数时调试程序。我下载了[VisualVM](http://visualvm.java.net/index.html)，我可以附加和分析程序，但我找不到任何方法从 VisualVM 内部获取函数调用跟踪。

我也尝试了[jsadebugd](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jsadebugd.html)解决方案，但是当我尝试启动程序时出现以下错误。

```
C:\>"c:\Program Files\Java\jdk1.6.0_34\bin\jsadebugd.exe" 8824
Attaching to process ID 8824 and starting RMI services, please wait...
Error attaching to process or starting server: sun.jvm.hotspot.debugger.DebuggerException: Windbg Error: ReadVirtual failed!
        at sun.jvm.hotspot.debugger.windbg.WindbgDebuggerLocal.readBytesFromProcess0(Native Method)
        at sun.jvm.hotspot.debugger.windbg.WindbgDebuggerLocal.readBytesFromProcess(WindbgDebuggerLocal.java:485)
        at sun.jvm.hotspot.debugger.DebuggerBase.readBytes(DebuggerBase.java:219)
        at sun.jvm.hotspot.debugger.DebuggerBase.readCInteger(DebuggerBase.java:375)
        at sun.jvm.hotspot.debugger.DebuggerBase.readAddressValue(DebuggerBase.java:454)
        at sun.jvm.hotspot.debugger.windbg.WindbgDebuggerLocal.readAddress(WindbgDebuggerLocal.java:316)
        at sun.jvm.hotspot.debugger.windbg.WindbgAddress.getAddressAt(WindbgAddress.java:72)
        at sun.jvm.hotspot.HotSpotTypeDataBase.readVMTypes(HotSpotTypeDataBase.java:126)
        at sun.jvm.hotspot.HotSpotTypeDataBase.<init>(HotSpotTypeDataBase.java:85)
        at sun.jvm.hotspot.HotSpotAgent.setupVM(HotSpotAgent.java:388)
        at sun.jvm.hotspot.HotSpotAgent.go(HotSpotAgent.java:315)
        at sun.jvm.hotspot.HotSpotAgent.startServer(HotSpotAgent.java:221)
        at sun.jvm.hotspot.DebugServer.run(DebugServer.java:107)
        at sun.jvm.hotspot.DebugServer.main(DebugServer.java:46)
        at sun.jvm.hotspot.jdi.SADebugServer.main(SADebugServer.java:63) 
```

我确实在路径下安装了“Windows 调试工具” `C:\Program Files\Debugging Tools for Windows (x64)`。我也`windbg.exe`位于`C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x64`和下`C:\Program Files (x86)\Windows Kits\8.0\Debuggers\x86`。多个副本可能是我的问题，如果是，我该如何解决？

我需要做什么来观察这个 exe 正在做什么，以便我可以模仿它的 zip 解压缩程序？

# python - 简单的python + igraph用法

> ID：12058917
> 
> 赞同：0
> 
> 时间：2012-08-21T16:07:58.640
> 
> 标签：python, igraph

我第一次使用 python + igraph 0.6 并且有一些基本问题。

首先，我想制作一个随机图，然后在某处插入一个集团。

```
from igraph import *
g = Graph.Erdos_Renyi(50,0.1)
h = Graph.Full(5) 
```

如何制作一个新的图 g2，其中 h 由两条边连接到图 g？

其次，完成此操作后，我想找到最大的派系并在图片中显示它们所在的位置。调用组合图 g2。

```
mcliques = g2.maximal_cliques(4, 7) 
```

我现在如何单独或在图表 g2 中绘制我们刚刚找到的派系？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T19:30:47.990

回答你的第一个问题：

```
g2 = g + h
g2.add_edges([(0, 50), (1, 51)]) 
```

甚至更简单：

```
g2 = g + h + [(0, 50), (1, 51)] 
```

这里我们利用`+`两个图之间的算子创建两个图的不相交并集的事实，并且由于`igraph`总是使用连续的顶点 ID 范围，我们可以简单地知道顶点 0-49`g2`将跨越`g`，顶点 50-54 将跨度`h`。

关于您的第二个问题，您没有通过绘制派系来具体说明您的意思，但可能的解决方案如下：

```
group_markers = [(clique, "gray") for clique in mcliques]
plot(g2, mark_groups=group_markers) 
```

`Graph.__plot__`有关参数的更多信息，请参阅文档`mark_groups`；基本上，它要么是一个将颜色映射到顶点组（顶点 ID）的字典，要么是一个产生顶点 ID 和颜色对的列表。然后将顶点组用给定颜色作为背景的阴影区域包围。

# c# - 使用整个类作为参数 - 好的做法？

> ID：12058918
> 
> 赞同：5
> 
> 时间：2012-08-21T16:08:00.073
> 
> 标签：c#, class, parameters

假设一个名为“Place”的类存储位置和相关细节：

```
class Place
{
    string Name;
    string Location;
    // etc...
} 
```

稍后，我们会填充多达 80 个不同城镇的名称和详细信息。所以我们将这些城镇以数字形式存储在一个数组中：

```
class Setup
{
    public static GetTowns
    {
        for (int i = 1; i <= numberOfTowns; i++)
        {
            Town[i] = new Place(name, location);
        }
        // more code...
    }
    // more methods...
} 
```

要访问特定城镇及其数据，我们将城镇本身作为参数传递并接收它：

```
public static void DescribeTown(Place Town)
{
    // example method from some other class
    Console.WriteLine("Shipping to {0}.", Town.Name);
} 
```

其他方法需要访问多个城镇，或所有城镇。然后我们可以传入整个 Town 数组作为参数：

```
public static void ListAllTowns(Place[] Town)
{
    Console.WriteLine("Our Beloved Clients:");
    foreach (Place here in Town)
    {
        Console.WriteLine("{0} in {1}", here.Name, here.Location);
        // Various other operations requiring info about the Towns
    }
} 
```

*完整参考 C# 2.0*声明如下

> 参数是在调用方法时接收传递给方法的参数值的变量。

`ListAllTowns`这似乎是说类的每个实例以及所涉及的所有数据在每次调用时都会被传入。这对我来说听起来很浪费，但是是吗？

（出于概念验证的原因，此示例被*大大简化，但方法需要读/写权限以及多个城镇之间的比较。）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:11:21.563

There's nothing wasteful about it. You're not passing a copy of all of the items, you're simply creating an array and then passing a reference to that array to the `ListAllTowns` method (arrays are reference types).

You're doing things (one of) the right way(s).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T16:12:07.390

Parameters are always passed by value (unless the `ref` or `out` keywords are used), but for a reference type the value is not the object itself, but the reference to the object.

So, the entire object is not passed as a parameter, only a reference to the object.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:13:17.967

All classes in C# are references by default, so only a pointer is being send to function.

Answering to your question: it depends. Sometimes it actually does make sense to send a whole object as a parameter (i.e. we are trying to something with an object). On the other hand, creating classes only for function parameters is probably not nice. In your particular example it does make sense to create a class.

One exception from what I've just told: structs are being sent as a copy (all members will be copied). You must be careful while sending these as function parameters.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T16:37:54.587

这总是一个两难的境地。

一方面 - 奥卡姆剃刀说你不需要任何过度的东西，另一方面 - 更改`DescribeTown(Place Town)`为`DescribeTown(string TownName)`意味着不以 OOP 方式进行操作，而这反过来又意味着代码将来更难更改和维护。

但有时当系统成熟稳定时，当发现整体`Town`仍然过度时，您可以将其重构回`DescribeTown(string TownName)`.

另一个方面 - 单元测试。比更容易测试`DescribeTown(string TownName)`方法`DescribeTown(Place Town)`，后者需要模拟一个 Town 对象，并且你应该模拟哪些属性并不明显（你必须在测试之前知道它）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T16:14:59.810

在 .NET 中，对象作为*引用*保存。在这种情况下，您不是在传递或复制整个数据，而是对该数据的已创建实例的引用。

在这种情况下，鼓励传递整个实例，因为它允许您保持一致性（处理 Towns 的方法将 Towns 作为参数是有道理的）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T16:18:13.057

我的观点是，将一个类作为参数传递是完全可以的。这得到了包括 Robert Martins Clean Code 在内的多位作者的支持。我还认为，如果可能的话，您应该完全避免传递参数。如果不是将 Town 对象数组传递给 ListAllTowns 方法，而是将“ListAll”设置为 Place 类的方法，那么您会像这样调用该方法：

Towns.ListAll()

从这个意义上说，您不必在每次使用时都将列表传递给函数，因为它只是在其拥有的对象上进行操作。

# java - executeQuery 在 NetBeans IDE 中永远不会返回，但在由 java 运行时可以工作

> ID：12058927
> 
> 赞同：1
> 
> 时间：2012-08-21T16:08:24.150
> 
> 标签：java, sql-server, netbeans, jdbc, ide

我正在使用 NetBeans IDE 7.0.1，并且正在使用 Microsoft 的 JDBC 测试 Microsoft SQL Server 连接。我有这个测试程序：

```
package testsql;
import java.sql.*;
public class TestSQL {

    public static void main(String[] args) {
        Statement stmt = null;
        ResultSet rs = null;
        Connection con = null;

        try {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            String connectionURL = 
                    "jdbc:sqlserver://foo.bar.com:1433;" +
                    "databaseName=flintstone;integratedSecurity=true;";
            con = DriverManager.getConnection(connectionURL);
        } catch (SQLException e) {
            System.out.println("SQL Exception: " + e.toString());
        } catch (ClassNotFoundException e) {
            System.out.println("Class Not Found Exception: " + e.toString());
        }

        try {
            String SQL = con.nativeSQL("SELECT COUNT(*) AS Count FROM fred");
            stmt = con.createStatement();
            rs = stmt.executeQuery(SQL);
            while (rs.next()) {
                System.out.println("Count = " + rs.getString("Count"));
            }
        } catch (SQLException e) {
            System.out.println("SQL Exception: " + e.toString());
        }

    }
} 
```

我将 NetBeans VM Options 属性设置为`-Djava.library.path=C:\lib`.

当我在 IDE 中运行代码时，程序在 executeQuery 处冻结并“永远”运行。不返回错误并且不引发超时。

但是，如果我构建包然后运行它，`java -Djava.library.path=C:\lib -jar TestSQL.jar`我会得到预期的数据返回：`Count = 7349`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:23:22.737

我现在有在 IDE 中工作的项目。原来是我使用的 JDK 版本。用 JDK1.7 替换 JDK1.6 解决了这个问题，它现在可以正常工作了。

# php - 寻找一个简单的url解析正则表达式

> ID：12058930
> 
> 赞同：0
> 
> 时间：2012-08-21T16:08:45.240
> 
> 标签：php, regex

我正在寻找一个简单的正则表达式来获取一段文本，从中解析出所有 url，然后返回它们。url 基本上会被`<a href>`标签替换，所以`http://google.com`会变成`<a href="http://google.com">http://google.com</a>`，依此类推。因此，我认为它不需要非常彻底或允许各种疯狂的 url 方案和非英文字符。

这是我想出的一个正则表达式：

```
%http[s]?://[A-z0-9/\.\-_]+%i 
```

它将匹配以 http:// 或 https:// 开头的所有字符串，后跟至少以下字符之一：Az 0-9 、点、正斜杠 (/)、下划线、连字符 (-)、不区分大小写

可以对其进行任何改进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:16:05.940

您没有验证 url，只是解析文本以查找 url，所以只需使用`%\bhttps?://\S+%i`

如果要检查此类 url 是否在`<a`标签内，请使用：

```
%<a\s[^>]*\bhref=['"](https?://\S+)["']%i 
```

要验证 url 使用`filter_var()`功能：

```
var_dump(filter_var($url, FILTER_VALIDATE_URL)); 
```

# sublimetext2 - 如何在 Sublime Text 2 中使用键盘命令切换行号？

> ID：12058932
> 
> 赞同：16
> 
> 时间：2012-08-21T16:08:51.387
> 
> 标签：sublimetext2

在 Sublime Text 2 中，您可以使用该设置打开和关闭行号`line_numbers`，但是没有`toggle_line_numbers`可以绑定到击键的等效命令（例如，`toggle_tabs`切换文件选项卡）。那么是否有另一种配置方法，以便我可以通过按键切换行号？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-21T17:12:13.213

根据[http://www.sublimetext.com/docs/2/settings.html](http://www.sublimetext.com/docs/2/settings.html)，看起来您应该能够执行以下操作：

```
{ "keys": ["ctrl+shift+l"], "command": "toggle_setting", "args":
        {"setting": "line_numbers"} } 
```

如果您放置在 Key Bindings Preferences 文件末尾以外的任何位置，请不要忘记在上述代码末尾添加逗号。

# asp-classic - 使用 CAPICOM 进行散列和加盐？SHA 512 使用 asp-classic

> ID：12058933
> 
> 赞同：2
> 
> 时间：2012-08-21T16:09:00.317
> 
> 标签：asp-classic, hash, salt, sha512

我想知道这种方法是否可以安全地用于登录，因为这是我发现的唯一一种易于理解的方法，并且它是 asp-classic，因此我的菜鸟可以理解并添加到我拥有的网站。

谢谢

```
 <%
    Dim sDigest,sPassword,sSalt
    sDigest=SHA256(sRndStr)

    sPassword = Request.Form("pass")
    sSalt = Request.Form("username") & "SomeThingThatisStatic1234567890"

    With CreateObject("CAPICOM.HashedData") 
      .Algorithm = 6 '<--- This will use SHA-512
      'CAPICOM_HASH_ALGORITHM_SHA1      = 0 
      'CAPICOM_HASH_ALGORITHM_MD2       = 1 
      'CAPICOM_HASH_ALGORITHM_MD4       = 2 
      'CAPICOM_HASH_ALGORITHM_MD5       = 3 
      'CAPICOM_HASH_ALGORITHM_SHA_256   = 4 - Not supported on Windows XP or 2000 
      'CAPICOM_HASH_ALGORITHM_SHA_384   = 5 - Not supported on Windows XP or 2000 
      'CAPICOM_HASH_ALGORITHM_SHA_512   = 6 - Not supported on Windows XP or 2000 

      .Hash sPassword & sSalt 

'Response.Write "Here is your hash: " & .Value 
'---> here i would then check this hash with the hash in the database
'---> and if it's the same let the user login if not go to error: wrong info.
    End With 
%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:24:08.260

除非我错过了一些相当重要的东西，否则它看起来并不特别安全。特别是，您似乎正在通过连接发送盐/密码的哈希值，并在服务器上进行验证。如果是这样，它就容易受到重放攻击——即，有人进入对话，看到用户响应登录的内容，然后通过发送相同的响应以这些凭据登录。对密码进行散列/加盐可以防止他们知道用户的原始密码，但他们不在乎——知道散列，这就是让他们登录的所有服务器检查。

为避免这种情况，您通常希望使用质询/响应设置：

1.  用户发送一些东西说他们想登录
2.  服务器生成一个随机数并发送给用户
3.  客户端使用他们的散列/加盐密码作为密钥对随机数进行加密，并将结果连同他们的用户名一起发送回服务器
4.  服务器使用该用户的哈希/加盐密码的想法进行相同的加密
5.  服务器比较两个加密数字

每次用户尝试登录时，服务器都会生成一个新的/不同的随机数。即使有人拥有先前登录的数据包，他们也不会让间谍再次登录。

# msbuild - 如何在 TeamCity 中运行 OpenCover + NUnit 而不运行所有单元测试两次？

> ID：12058935
> 
> 赞同：5
> 
> 时间：2012-08-21T16:09:06.140
> 
> 标签：msbuild, continuous-integration, nunit, teamcity, opencover

我在我的 MSBuild 脚本中设置了 OpenCover，设置了 ReportGenerator，并将其作为工件输出并有一个自定义选项卡——所有这些都很好。这是我的 MSBuild 目标：

```
<Target Name="Test">

        <!-- Check Code Coverage -->
        <Exec Command="..\..\tools\OpenCover.4.0.519\OpenCover.Console.exe -register:user -target:..\..\tools\NUnit\nunit-console.exe -targetargs:&quot;$(TestAssemblies) /xml=NUnitReport.xml /noshadow&quot; -filter:&quot;+[HelloWorld.Mvc3UI*]* -[HelloWorld.Mvc3UI.UnitTests*]*&quot; -output:OpenCoverReport.xml"></Exec>

        <!-- Format Code Coverage Report -->
        <Exec Command="..\..\tools\ReportGenerator.1.5.0.0\ReportGenerator.exe OpenCoverReport.xml OpenCoverReport"></Exec>

</Target> 
```

然而，为了运行 OpenCover，它附加到 NUnit 运行器以生成报告，然后运行所有单元测试。虽然这可以为单元测试生成 xml 输出，但我还没有找到一个 xsl 文件来生成与 TeamCity 7.1 中内置的报告一样好的报告，更不用说过滤和搜索功能了。

但是，如果我使用内置的 NUnit 运行程序在 TeamCity 中启用报告（显然这是在 TeamCity 中获取单元测试报告的唯一方法），它会重新运行单元测试以生成其报告。

虽然所有这些都有效，但我的问题是，是否有一种方法可以在不必运行所有单元测试两次的情况下获得这两个报告？具体来说，OpenCover 是否可以在不运行 NUnit 测试的情况下生成其报告，或者 TeamCity 是否可以在不运行单元测试的情况下生成其报告？

请注意，这是一个 ASP.NET MVC3 应用程序，OpenCover 文档没有指定如何附加 ASP.NET 或是否可能，但很明显它需要一个可执行文件才能附加。另请注意，我正在使用 NUnit 2.6.1，以防万一。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T20:20:04.160

您可以使用“构建功能”导入 NUnit xml 报告，如下面的屏幕截图所示： ![在此处输入图像描述](../Images/9c293fb48ac00380fceebd908cf27f4b.png)

# javascript - 为数组元素的属性赋值会设置所有其他类似元素的属性

> ID：12058938
> 
> 赞同：0
> 
> 时间：2012-08-21T16:09:31.447
> 
> 标签：javascript, arrays

```
function Block(){
    this.x = 100;
    this.y = 100;
}

// update canvas
        function UpdateCanvas(){
            // check if game is still on going
            if (!isStopped)
            {
                for(var i = segments.length - 1; i > 0 ; i--)
                {
                    segments[i] = segments[i - 1];
                }

                switch(direction)
                {
                    case "left":
                        segments[0].x = segments[0].x - pixelChange;
                        DrawCanvas();
                        break;
                    case "right":
                        segments[0].x = segments[0].x + pixelChange;
                        DrawCanvas();
                        break;
                    case "up":
                        segments[0].y = segments[0].y - pixelChange;
                        DrawCanvas();
                        break;
                    case "down":
                        segments[0].y = segments[0].y + pixelChange;
                        DrawCanvas();
                        break;
                }
            }
        } 
```

我创建了一个数组和一个名为 Block 的类。现在在数组中创建 2 个对象并将 blockArray[0]'sx 属性更改为不同的数字后，blockArray[1]'sx 也类似于 blockArray[0]'sx 值更改，而不是保留初始值 100。

我做错了什么？以及如何在不影响数组中其他对象的情况下更改 blockArray[0]'sx？

编辑：更新了代码。segment 是一个带有 Block 元素的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T04:45:14.583

固定谢谢。Norguard 和 Mark Reed 的评论让我找到了代码的错误部分（我忘记在我的帖子中包含）。

正在做：

```
for(var i = segments.length - 1; i > 0 ; i--){
    segments[i] = segments[i - 1];
} 
```

将段[i - 1] 的引用保存到段[i] 而不是保存对象。为我吸取的教训。

# mysql - 如何为树（邻接列表）结构数据库设置用户权限？

> ID：12058943
> 
> 赞同：4
> 
> 时间：2012-08-21T16:09:47.000
> 
> 标签：mysql, permissions, tree, adjacency-list

我们正在使用 mysql。假设我们有一个 Adjacency List 模型表。（我知道它没有被规范化。）例如，具有以下字段的人员表：

```
Personnel
|employee|boss    |salary|
--------------------------
|CEO     |null    |999999|
|boss1   |CEO     |99    |
|boss2   |CEO     |99    |
|slvdrvr1|boss1   |9     |
|slvdrvr2|boss1   |9     |
|slave1  |slvdrvr1|1     |
|slave2  |slvdrvr1|1     |
|slave3  |slvdrvr1|1     |
|slave4  |slvdrvr2|1     |
|slave5  |boss2   |1     |
|slave6  |boss2   |1     | 
```

我们还有一张桌子，里面有一些用户。例如，

```
Uers
|userid|role   |
----------------
|super1|b1     |
|super2|b2     |
|user1 |sd     |
|ruut  |admin  | 
```

假设工资信息是保密的。因此，一些用户可以从某个分支看到工资信息。

例如，角色 b1 可以查看/编辑老板 1 及以下的所有工资。角色 b2 可以查看/编辑老板 2 及以下的所有工资。角色 sd 可以查看/编辑 slvdrvr1 和 slvdrvr2 及以下的所有工资。因此，我们需要设置一个用户-人员权限表来实现这一点。

Personnel 表很大，有数万行。

我的问题是我们如何设置一个我们可以轻松维护和查询的权限表？

例如，选项 1：我们可以为每个人设置角色权限。但是，权限表会很大。

选项2：我们只能为父节点设置角色权限。但是，每次用户想要查看一定数量的记录时，我们都必须为每条记录查找权限，一直到我们有设置的地方。

用户数约为数百。角色数量少于 100。

如果不清楚，请向我提问。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:23:37.153

为了让生活更有趣，考虑在用户之间也有一个树形结构！

开始实现，创建另一个表“User_EMPL_ACCESS”，它应该如下所示：

表 USER_EMPL_ACCESS( User_ID char(..), ACCESS_PATH char(..) )

在访问路径中，存储每个用户有资格查看的最顶层节点的完全限定路径。

然后，开发一个名为 hasAccess (userID, EMPLID) 的 UDF。

hasAccess 函数应该执行以下操作：

1.  从用户 ID 开始
2.  从 USER_EMPL_ACCESS 获取用户的访问路径
3.  使用 CTE 逻辑将邻接表扩展为完全限定的路径。如果您的数据库不提供 CTE，请将 Adjacency Model 转换为 NestedSet 模型。
4.  获取用户访问路径和邻接路径的交集，从根开始
5.  如果输入 EMPLID 是上述任意交叉路径的叶节点，则返回 1，否则返回 0。

现在您的查询如下所示：

```
 select * from SALARY_TABLE where MONTH = 'JAN' 
    and hasAccess('myUserID', SALARY_TABLE.EMPLID) = 1 
```

# c - 检查用户是否输入了 int - C

> ID：12058945
> 
> 赞同：0
> 
> 时间：2012-08-21T16:10:02.567
> 
> 标签：c, loops, input, while-loop, scanf

我需要检查用户是否在 scanf() （在 C 中）中输入了一个整数。我有这个代码：

```
do {
    srs = scanf("%d", &x);
} while (!srs); 
```

如果我输入一个数字，它会工作并继续程序，但如果我输入一个字符，它只会要求我再次输入。虽然，如果我输入一个正确的整数，它不会打破循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:12:31.837

当您不先输入号码时，它会将非数字字符留在输入流中，以供下一个呼叫接听。所以你进入了一个无限循环。

您应该使用`fgets`读取整行输入，然后`sscanf`在该输入行上。

```
do {
    char line[512];
    fgets(line,512,stdin);
    srs = sscanf(line,"%d", &x);
} while (!srs); 
```

# extjs - Extjs：未捕获的类型错误：对象# has no method 'read' I wanted to post the answer I found to the error I was getting Uncaught TypeError: Object # has no method 'read' Hopefully it will save some 问问题 问问题 2012-08-21T16:10:08.770 3793 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I wanted to post the answer I found to the error I was getting Uncaught TypeError: Object # has no method 'read' Hopefully it will save some people a few hours of headache. Your object searchn contains no values. I know that because the result of head(searchn) is: factor(0) which means you have a factor of length zero, i.e. it's empty. Although the object is empty, it still contains meta-information about the factor levels, for example. So printing this meta-information should work without a problem. For example, try: cat(levels(searchn), file="output.txt") extjsextjs4 4 1 回答 1 This answer is useful 1 I traced the code and got to a point where Ext was trying to call the proxies reader.read method. But for whatever reason the reader was not being created. I searched around online and found that there's some bug in Ext. At least that seemed to be the consensus. What seemed to solve other's problem and my problem was to either include the models using script tags before creating the stores. Or using Ext.require( your models ) before creating the stores. Hope this helps! ===Update=== line 40866 in ext-all-debug.js if (me.lastFieldGeneration !== **me.model**.prototype.fields.generation) { me.buildExtractors(true); } This is the line that blows up if a model isn't set or undefined. Not sure if it has anything to do with the above error, but this is where ext crashed for me with no errors when my model wasn't loading correctly. This is seems like poor coding to me, referencing something without checking if it's defined or not. 于 2012-08-21T16:10:08.770 回答 Related 1 backbone.js - 在 jQuery 函数/插件中使用 Backbone 模型 3 ruby-on-rails - Rails和Ruby之间正则表达式的区别？ 2 javascript - How to write an angularJs Controller to GET Rest Data from Parse.com 2 apache-flex - Flex 4.7 进程栏 1 codeigniter - 如何知道是什么破坏了 Codeigniter 会话 3 ios - UIDatePicker set minimum and maximum time 1 file - 如何将多个文件分成单独的列？ 4 javascript - on button click, loop through text boxes javascript 2 c - Passing const char * to a function in C 2 vbscript - Exact details of how Empty works in VBScript Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12058947
> 
> 赞同：0
> 
> 时间：
> 
> 标签：extjs, extjs4

I wanted to post the answer I found to the error I was getting

```
Uncaught TypeError: Object #<Object> has no method 'read' 
```

Hopefully it will save some people a few hours of headache.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:10:08.770

I traced the code and got to a point where Ext was trying to call the proxies reader.read method. But for whatever reason the reader was not being created. I searched around online and found that there's some bug in Ext. At least that seemed to be the consensus.

What seemed to solve other's problem and my problem was to either include the models using script tags before creating the stores. Or using Ext.require( **your models** ) before creating the stores.

Hope this helps!

===Update=== line 40866 in ext-all-debug.js

```
 if (me.lastFieldGeneration !== **me.model**.prototype.fields.generation) {
            me.buildExtractors(true);
        } 
```

This is the line that blows up if a model isn't set or undefined. Not sure if it has anything to do with the above error, but this is where ext crashed for me with no errors when my model wasn't loading correctly. This is seems like poor coding to me, referencing something without checking if it's defined or not.

# c - Strange bug in windows when running code in c

> ID：12058951
> 
> 赞同：1
> 
> 时间：2012-08-21T16:10:18.377
> 
> 标签：c, windows

I have written some code to solve the british informatics olympiad question 1 (2012) in c. If it is of any help to anyone, or possibly of interest, the program finds the product of the unique prime factors of a number. If the number is prime, it returns the original number.

It is supposed to work up to an input of 1 000 000 and it does so when compiled on linux and mac.

For some reason when it is compiled on windows (using the mingw compiler) it does not work for an input above 520558!

It is probably something to do with the declaration of an array that is 520558 integers long but I have no idea how to remedy it.

Any help would be much appreciated

Thanks.

Code:

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char* argv[]){
    printf("Please enter your input: ");
    int input;
    scanf("%d",&input);
    int numbers[input-2];
    for (int i=0;i<input-2;i++) {
        numbers[i] = i+2;
    }
    for (int i=0;i<input-2;i++) {
        if(numbers[i] == 0) {
            continue;
        }else{
            for (int j=(i+2)*2;j<input;j+=numbers[i]){
                numbers[j-2] = 0;
            }
        }
    }
    int product = 1;
    for (int i=0;i<input-2;i++) {
        if(numbers[i]!=0){
            if(input%numbers[i]==0) {
                product *= numbers[i];
            }
        }
    }
    if(product == 1){
        printf("%u",input); 
    }else{
        printf("%u",product);
    }
    printf("\n");
    // Get rid of this on mac and linuxs
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:19:40.027

`int numbers[input-2];`

这会在堆栈上创建一个整数数组。堆栈的大小是有限的；这通常是几兆字节或更少的 2 的幂。520558 可疑地接近 2^19，表明堆栈区域为 2Mb。

如果你正在处理这么大的数组，你应该使用堆来代替：

```
int * numbers = (int*)malloc((input-2)*sizeof(int)); 
. 
. 
. 
free(numbers); 
return 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:24:06.677

尝试用`numbers`这个替换你的声明：

```
int* numbers = (int *) malloc((input-2)*sizeof(int)); 
```

正如 squiguy 所提到的，这将在堆上动态分配数组，避免您可能遇到的任何潜在堆栈问题。您还应该在完成后释放它，使用：

```
free(numbers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:19:16.097

最好`numbers`在堆而不是堆栈上分配变量：

```
#define MAXNUMS 1000000
int numbers[MAXNUMS];

int main() {
...
} 
```

# php - A configuration to stop PHP execution an any warnings or exceptions

> ID：12058953
> 
> 赞同：0
> 
> 时间：2012-08-21T16:10:42.070
> 
> 标签：php, exception, error-handling

In php I have my `error_reporting` set to `E_ALL`.

I was wondering if there was a centralized way to make php STOP execution if any warnings are hit, or if any exceptions are hit. Completely stop execution. I have run into many bugs where I have typos in variables and script continues execution.

I found [Strict mode in PHP?](https://stackoverflow.com/questions/3193072/strict-mode-in-php) which gives a good code solution but am looking for some sort of configuration whcih would allow me to accomplish the same thing. Does one exist?

But I am trying to avoid having to a custom error handler for all of my projects? Does anyone know of a way to do this perhaps in php.ini? Preferably there would be a way to configure php so it would display the warning or error and just stop..

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:16:01.890

据我所知，除了创建一个立即停止执行的自定义错误处理程序之外，没有办法做到这一点。但是，只需大约四行即可完成此操作（或使用 SomeKittens 发布的答案/评论）。

很抱歉，但您的问题的答案是“不”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:16:37.937

使用[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)在错误处理程序中引发异常。

未捕获的异常将停止执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T16:16:45.430

自定义错误处理程序将是我所知道的最简单的方法。它们并不复杂 - 您可以简单地编写一个立即终止脚本的函数，并指示 PHP 将其用于错误处理 - 一个（简单）示例：

```
function my_error_handler($num,$msg) {
 die();
}
set_error_handler("my_error_handler"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T16:16:06.210

您的应用程序应尽快注册您自己的错误处理程序。如果出现任何警告或错误，请在此处中止。请注意语法错误不会被这样捕获。见[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-09T17:05:34.300

在**PHP 5.5 zts/non-zts**中看到，模块**Suhosin**具有此默认行为*，在 eval 和 func 黑名单参数上带有 E_WARNING。

*在第一次警告时停止脚本。

# javascript - I cannot get a return code from my javascript function

> ID：12058955
> 
> 赞同：0
> 
> 时间：2012-08-21T16:10:43.370
> 
> 标签：javascript, jquery

I assign the following to a button on a modal. When the user clicks on the button it calls submitHandler.

```
 var btn = {
        'Submit & Close': function (win) {
            var rc = submitHandler(oLink.$link, $modal);
            $('#createLink').prop('disabled', false);
        },
        'Close': function (win) {
            $modal.closeModal();
            $('#createLink').prop('disabled', false);
        }
    } 
```

My submitHandler looks like this:

```
 function submitHandler($link, $modal) {

  if (!$form.valid || $form.valid()) {
        $submitBt.disableBt();
        $modal.removeBlockMessages()
            .blockMessage('Contacting Server, please wait ... ', { type: 'loading' });
        $.ajax({
            url: oSubmit.href,
            dataType: 'json',
            type: 'POST',
            data: $form.serializeArray()
        })
        .done(function (json, textStatus, XMLHttpRequest) {
            json = json || {};
            if (json.success) {
                submitSuccessModal(oSubmit, json);
                return true;
            } else {
                submitFailModal(oSubmit, json);
                return false;
            }
            return false;
        })

    } 
```

When I check in the debugger submitHandler runs but when I look at the value of rc it is undefined.

Is there something obvious I am missing. I simply cannot get rc to equal anything other than "undefined".

**Update:**

I added in an actual section of the code. I am wondering if it could be the ajax call that's causing this? Note that I can follow the code with the debugger to the return true; line.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T16:11:59.407

Statements are terminated with semicolon, not colon.

```
function submitHandler($link, $modal) {
   return true;
}          // ↑ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:12:37.547

Check the semicolon at the end of the return statement in the handler.

```
function submitHandler($link, $modal) {
   return true;
} 
```

# javascript - 在 Javascript 生成的列表中，如何为标签添加自定义属性？

> ID：12058959
> 
> 赞同：1
> 
> 时间：2012-08-21T16:11:11.447
> 
> 标签：javascript, jquery, list

我有一个为我生成列表的 javascript。这一切都有效。问题出在`<a>`标签上。在这个标签中，我想添加更多的属性，比如`data-i="2"`Putting an extra attribute in like: `menu: f.menuCaption`，`class: f.class`或者`style: f.style`完美运行。请看我的小提琴：http: [//jsfiddle.net/mauricederegt/mjdyW/13/](http://jsfiddle.net/mauricederegt/mjdyW/13/)

但是当我想添加一个新属性时：`data-i`它不起作用。怎么会？请参阅演示小提琴： http: [//jsfiddle.net/mauricederegt/mjdyW/15/](http://jsfiddle.net/mauricederegt/mjdyW/15/)（第二个`<UL>`是使用 改编的`data-i`）。

我怎样才能做到这一点，以便我也可以添加/使用`data-i`脚本之类的属性？我的最终目标是创建这个：（`<a class="d" data-i="50" data-t="d" data-f="2" data-r="0" data-c="0" style="margin-top: -4.725em; margin-left: -4.6em; "></a>`当然从脚本中获取值）

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:14:42.163

`data-i`不是 JavaScript 中的有效标识符，因此您需要在对象文字中引用它：

```
{
    'data-i': 'whatever'
} 
```

在财产访问期间：

```
whatever['data-i'] 
```

[请参阅更新的 jsFiddle。](http://jsfiddle.net/minitech/mjdyW/16/)

# sql - "Lazy" require in ruby

> ID：12058965
> 
> 赞同：2
> 
> 时间：2012-08-21T16:11:32.257
> 
> 标签：sql, ruby, require, lazy-evaluation

I have a ruby script (pretty big one) that update a couple of dbs using SQL. Most of the sql queries (and even table names), are constant, and look like:

```
MONTH = 8
SOME_TABLE = "the_table_name_" + MONTH + SOME_SUFFIX
SOME_QUERY = "CREATE TEMPORARY TABLE #{SOME_TABLE} SELECT yada, yada2 FROM #{SOME_OTHER_TABLE} WHERE yada=1 AND MONTH=#{MONTH};" 
```

There are hundreds of queries and tables like that, and they all use each other. I made a recent change, to get the "month" as a parameter from the command line instead a constant in the command line, so run this script in a cron management system.

My first problem was that i couldn't set MONTH as a const. At first place, i worked around it with something like:

```
eval("MONTH=%d" % options[:month]) 
```

later on i changed MONTH to be @month (global) and that fixed that.

the second and main problem was than my main.rb has that line

```
require("queries.rb") 
```

at the beginning, therefore ruby tries to expand the var MONTH (or @month) when requiring, before my main even ran! I worked around that problem using that code:

```
def run_lazy_loaded_work
    require './queries.rb'
    run_work
end 
```

and removing the require in the start of the file of course. that solution works perfectly, since the expansion in queries.rb happens when requiring, after @month has already been set.

However, It doesn't smell like the correct solution, and feels like a nasty patch, which might not be bullet proof when other developer will take ownership of that code.

I tried to initialize all the queries in a config class, which initializes all the queries in the instance's initialization, and has accessors to that, but since that's hundreds of lines, and also all the lines that are using them, it becomes even nastier.

I would love to hear if anyone can think of a more elegance solution.

Thanks! :)

*** UPDATE **** I've edited it a bit more, and currently it looks like that:

main.rb:

```
require './work.rb'
def main
    run_work(options)
end 
```

work.rb:

```
def run_work(options)
    @month=options[:month]
    load 'queries.rb'
    run_query(SOME_QUERY, SOME_TABLE, SOME_INDEX)
end 
```

queries.rb:

```
SOME_TABLE = "table_name_#{@month}"
SOME_QUERY = "SELECT * FROM #{SOME_TABLE} WHERE month=#{month}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:01:48.367

一种可能的解决方案是进行更改`queries.rb`，以使昂贵的属性实际上是方法而不是“假”常量。然后要求`queries.rb`不会很昂贵，您可以将代码更改为：

```
require queries.rb

#...

def run_lazy_loaded_work
    run_work(Queries.some_query())
end 
```

我知道更改具有“数百个”属性的文件可能看起来有点可怕，但是看起来像一个常数但实际上对我来说并不可怕的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:07:37.207

我会尽力给我的 2 美分。

您可以使用方法，而不是使用常量和实例变量。

第一次调用该方法时，它会定义一个内部帮助程序实例变量的值。因此，仅在需要时才扩大月份。

前任。：

```
def month
  # set @month at first time; or return it in further calls
  @month ||= $options[:month]     # here I'm using a global $options
end

(...)

# will get the month (will define it at first call)
SOME_TABLE = "the_table_name_" + month + SOME_SUFFIX 
```

# c# - c# to javascript for YUI calendar

> ID：12058966
> 
> 赞同：1
> 
> 时间：2012-08-21T16:11:35.333
> 
> 标签：c#, javascript, asp.net, yui

I am looking to run a select statement in my C# code behind pages to select dates from a MSSQL table so that I can highlight booked dates in my YUI calendar. I have done this manually by using the following JavaScript (this highlights September 1st):

```
YAHOO.example.calendar.cal1.addRenderer("9/1/2012",YAHOO.example.calendar.cal1.renderCellStyleHighlight1); 
```

Is there a way to get the dates that I have selected from the database to then be 'echoed' into JavaScript like below? I know how to do this in PHP but not in ASP.NET!

Any help would be appreciated. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:19:55.877

您可以使用 AJAX 返回日期，这里有一个快速教程：http: [//blogs.microsoft.co.il/blogs/gilf/archive/2008/10/04/asp-net-ajax-pagemethods.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2008/10/04/asp-net-ajax-pagemethods.aspx)

# r - The hourly mean for a time series in R

> ID：12058970
> 
> 赞同：1
> 
> 时间：2012-08-21T16:11:48.187
> 
> 标签：r, time-series

> **Possible Duplicate:**
> [The hourly mean in time series](https://stackoverflow.com/questions/12070867/the-hourly-mean-in-time-series)

I have a time series:

It is data that is measured every 30min, so I have 536 days with

```
n=25728\. 
```

It is a `ts` with one column and `freq=48`. I would like to calculate the mean for every 30min.

So for example:

```
First 30min:
ts[1]+t[49]+t[97]+t[145]+.../536 days

Second 30min:
t[2]+t[50]+t[98]+..../536 days 
```

What is the best code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:11:33.850

要实现此效果，您可以使用`aggregate`or `tapply`，另请参阅：

[时间序列中的每小时平均值](https://stackoverflow.com/questions/12070867/the-hourly-mean-in-time-series)

[计算ts对象的月平均值](https://stackoverflow.com/questions/6529981/calculate-monthly-average-of-ts-object?lq=1)

一些示例代码：

```
time_series = runif(72)
# Create a ts object
time_ts = ts(time_series, frequency = 24)
# Calculate the mean
> tapply(time_ts, cycle(time_ts), mean)
        1         2         3         4         5         6         7         8 
0.2954238 0.6791355 0.6113670 0.5775792 0.3614329 0.4414882 0.6206761 0.2079882 
        9        10        11        12        13        14        15        16 
0.6238492 0.4069143 0.6333607 0.5254185 0.6685191 0.3629751 0.3715500 0.2637383 
       17        18        19        20        21        22        23        24 
0.2730713 0.3170541 0.6053016 0.6550780 0.4031117 0.6857810 0.4492246 0.4795785 
> aggregate(as.numeric(time_ts), list(hour = cycle(time_ts)), mean)
   hour         x
1     1 0.2954238
2     2 0.6791355
3     3 0.6113670
4     4 0.5775792 
```

# android - Android NDK OpenGL; a slight slowdown

> ID：12058978
> 
> 赞同：1
> 
> 时间：2012-08-21T16:12:11.183
> 
> 标签：android, opengl-es, android-ndk, unity3d

I wrote a simple OGL ES 2.0 program running on my Tegra2-based Android 2.2 device. It simply renders a big quad on the screen with some diffuse and specular lighting (no normal mapping). Obviously, I was curious about the performance. I measure it by computing a sum of delta times for one second and then divide that sum by the total number of FPS counted. Here's the code:

```
long currentTime = System.currentTimeMillis();
long deltaTime = currentTime - lastTime;
lastTime = currentTime;

timeCounter += deltaTime;
FPS++;

if (timeCounter >= 1000)
{
    System.out.println(FPS + "    " + (float)timeCounter/(float)FPS);

    timeCounter = 0;
    FPS = 0;
} 
```

After I run the program, the first 2-3 measurements (seconds) give me something around 31-33 FPS but after that time it drops to 28-29 for one measurement, and finally to 26 and stays at this number. What is interesting here is that 26 = 52/2 and no matter what I do I cannot make my program run faster than with 52 FPS, even with the simplest solid-colored fragment shaders. Moreover, changing the shader a little bit (by removing pow function from the specular compuations for instance) does not affect the performance - still 26 FPS. There has to be a more performance-heavy (or -lighter) change to see the FPS changed. So I am wondering if there is any synchronization I am falling into here? Anyone expierienced anything like that?

I also made a simple program in Unity 3D, which does exactly what my original program does. I even copied the GLSL fragment shader and adapted it a little bit to conform with Unity 3D instead of using preferred Cg/HLSL language. The timings from the program in Unity clearly show a stable FPS around 31-33, which is what I get in my program for the first 2-3 seconds. I know that Unity is a good piece of software, but I would expect my program to perform, under the same conditions, almost exactly the same :).

# android - admob电汇费用是多少？

> ID：12058984
> 
> 赞同：0
> 
> 时间：2012-08-21T16:12:34.973
> 
> 标签：android, admob

我是 admob 上的发布者，我选择了电汇作为付款方式。有谁知道转会费是多少？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:16:10.823

它们不收取任何费用，由 AdMob 承保，但 AdMob 可能不涵盖 AdMob 之外的其他费用（例如，银行可能会收取将美元兑换成当地货币的费用）

[这](http://support.google.com/admob/bin/answer.py?hl=en&answer=1307283)是有关该主题的更多信息

关于使用 AdMob 付款

> AdMob 将承担发送 ACH 或电汇所需的费用。但是，您可能会因收到我们无法控制的 ACH 存款或电汇而向您收取额外费用。
> 
> 另请注意，出版商付款是以美元支付的，您的银行可能会收取将其转换为当地货币的费用。我们强烈建议所有选择通过 ACH 存款或电汇方式接收付款的发布商联系当地银行，了解接收此类付款所涉及的费用。

# javascript - Web Worker 中不同的服务器请求行为

> ID：12058987
> 
> 赞同：3
> 
> 时间：2012-08-21T16:12:42.283
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, web-worker

在我们的 Web 应用程序中，我们使用以下服务器通信方法

*   XMLHttpRequest

在这两种情况下，我们都发送相同的内容/数据，但 XMLHttpRequest 在网络工作中运行。

使用的浏览器是带有 --disable-web-security 标志的 chrome。

网络工作者 XMLHttpRequest 会在工作者内部而不是外部失败，有什么原因吗？

如果将 XMLHttpRequest 的完全相同的代码从 worker 移到普通的 JavaScript 中，它会完美运行吗？

错误：

XMLHttpRequest 无法加载 URL。Access-Control-Allow-Origin 不允许使用原始文件：//。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:59:22.060

更新：

经过这里大多数团队的大量努力，我们发现在 Chrome 中，Web Worker 的运行安全性似乎与主浏览器不同。（我的意思是当浏览器使用 --disable-web-security 运行时，网络工作者不会）。

我们试图从 (file:///) 访问域资源 (http://domain.com/resource)。尽管浏览器在禁用网络安全的情况下运行，但解决方案是让服务器以“Access-Control-Allow-Origin：*”的标头响应。

尽管我们可以使用 file:/// 而不是通配符，但我们无法确定这会如何在生产中的设备之间发生变化，而且由于我们在封闭的网络中运行，所以这不是一个问题。

一天结束时的代码完全保持不变，只需要在服务器响应的标头中进行这种更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:21:24.030

有两个可能的问题可能导致这种情况。哪个是罪魁祸首取决于您的设置。

**1.您正在尝试从 Web 应用程序访问文件**

听起来这可能是您所指的问题。Chrome 有一个非常严格的访问控制政策，规定您不能远程访问本地文件。可悲的是没有办法解决它。

**2.您正试图从另一个文件访问一个文件并且没有启用它**

关于本地文件的访问控制规则的唯一例外是当您从另一个本地文件发出请求时。这仍然默认禁用，需要在`--allow-file-access-from-files`启动 chrome 时通过传递标志来启用。

# c - Is there a -rdynamic equivalent to build dll with Visual Studio?

> ID：12058988
> 
> 赞同：5
> 
> 时间：2012-08-21T16:12:51.887
> 
> 标签：c, visual-studio, dll

In a DLL (linked at runtime) I need to call functions statically linked in my application.

I achieved to do this on the Linux side linking the application with the `-rdynamic` gcc option, but with Visual Studio I can't find a way to export all non-static symbols to dynamic libraries and to link the DLL without `unresolved symbol` errors.

*   I don't really want to convert all my application in multiple DLLs and adding handy macros to handle the `_declspec(dllimport)`/`_declspec(dllexport)` properly.
*   I neither don't want to pass all my API to DLLs by function pointers.

Is there a better way to work around this issue?

# java - Spring Controller

> ID：12058994
> 
> 赞同：0
> 
> 时间：2012-08-21T16:13:20.480
> 
> 标签：java, spring-mvc, spring-annotations

I am trying to follow the Spring tutorial, but keep receiving a 404 error. Below is my Controller class:

```
@Controller
@RequestMapping("/updatedescription.htm")
public class UpdateDescriptionController {
    /** Logger for this class and subclasses */
    protected final Log logger = LogFactory.getLog(getClass());

    @Autowired
    private ProductManager productManager;

    @RequestMapping(value="/{description}", method=RequestMethod.GET) 
    public String updateDescription(@PathVariable("description") String description, Model model) {       
        return "redirect:/hello.htm";
    }

    @Autowired
    public UpdateDescriptionController(ProductManager productManager) {
        this.productManager = productManager;
    }
} 
```

When I try and go to "http://localhost:8505/baseSpringMVC/updatedescription.htm/Chair" I get a 404 error.

I've setup my web.xml file to point all *.htm traffic to the DispatcherServlet...

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:javaee="http://java.sun.com/xml/ns/javaee" 
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd" version="2.5">   
  <servlet>
    <servlet-name>baseSpringMVC</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>baseSpringMVC</servlet-name>
    <url-pattern>*.htm</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

baseSpringMVC-servlet.xml:

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
        xmlns:oxm="http://www.springframework.org/schema/oxm"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd">

    <!-- the application context definition for the springapp DispatcherServlet -->

    <context:component-scan base-package="springapp.controllers"/>

    <!-- Load dummy data -->
    <bean id="productManager" class="springapp.model.SimpleProductManager">
        <property name="products">
            <list>
                <ref bean="product1"/>
                <ref bean="product2"/>
                <ref bean="product3"/>
            </list>
        </property>
    </bean>

    <bean id="product1" class="springapp.model.Product">
        <property name="description" value="Lamp"/>
        <property name="price" value="5.75"/>
    </bean>

    <bean id="product2" class="springapp.model.Product">
        <property name="description" value="Table"/>
        <property name="price" value="75.25"/>
    </bean>

    <bean id="product3" class="springapp.model.Product">
        <property name="description" value="Chair"/>
        <property name="price" value="22.79"/>
    </bean>

    <!--  pull in messages from <classpath>/messages.properties -->
    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="messages"/>
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

</beans> 
```

Any help would be great.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:37:50.187

当您将 /Chair 添加到它的末尾时，它不是 *.htm。发布您的 web.xml，以便我们对其进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:25:49.487

您的类级请求映射不应包含“.htm”。也就是说，改变：

```
@RequestMapping("/updatedescription.htm") 
```

至

```
@RequestMapping("/updatedescription") 
```

如果这不能解决问题，我们可能需要查看您的 Spring 配置文件。

**编辑：**

Spring 配置文件的顶部，包括 MVC 命名空间，应如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context" 
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:oxm="http://www.springframework.org/schema/oxm" 
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd 
http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:24:03.883

删除控制器上的顶级 RequestMapping 注释。您的 updateDescription 方法将指示请求映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T17:14:03.307

将方法更改为 POST，对其进行测试并让我知道，以便我们进一步调试

```
@RequestMapping(value="/{description}", method=RequestMethod.POST) 
```

# javascript - 向 JavaScript 对象字面量添加数据

> ID：12058998
> 
> 赞同：6
> 
> 时间：2012-08-21T16:13:30.760
> 
> 标签：javascript

这是我的对象文字：

```
var obj = {key1: value1}; 
```

我该如何添加

```
{key1: value1,value2,value3} 
```

到`obj`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:14:38.670

您的对象的值必须是存储单独值的数组或对象，如下所示：

```
{key1: [value1,value2,value3]} 
```

或者

```
{key1: new compositeValue(value1, value2, value3)} 
```

# android - 如何使主屏幕应用程序图标始终在android上启动相同的活动

> ID：12058999
> 
> 赞同：0
> 
> 时间：2012-08-21T16:13:31.993
> 
> 标签：android, android-activity, launch

我有一个应用程序，其中包含多个活动。

我将启动屏幕设置为当用户从主屏幕（或设备应用程序屏幕）点击应用程序图标时创建并运行的活动。我使用意图过滤器类别“android.intent.category.LAUNCHER”来做到这一点。

我遇到的问题是，如果我启动我的应用程序并导航到与启动屏幕*不同*的活动，然后我点击设备“主页”按钮，然后从应用程序图标重新启动应用程序，它似乎恢复了我的活动点击设备主页按钮，而不是再次通过我的启动屏幕活动。

无论如何，当我点击应用程序图标时，如何让它通过启动屏幕活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:18:07.767

将其放入 XML 中的活动标记中

```
android:clearTaskOnLaunch = "true" 
```

是否所有活动都将从任务中删除，除了根活动，无论何时从主屏幕重新启动 - 如果任务总是被剥离到其根活动，则为“true”，否则为“false” . 默认值为“假”。该属性仅对启动新任务的活动（根活动）有意义；任务中的所有其他活动都会忽略它。当值为“true”时，每次用户再次启动任务时，他们都会被带到其根活动，而不管他们最后在任务中做什么，也不管他们是使用后退还是主页按钮离开它。当值为“false”时，任务可能会在某些情况下清除活动（请参阅 alwaysRetainTaskState 属性），但并非总是如此。