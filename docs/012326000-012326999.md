# StackOverflow 问答 12326000-12326999

# arrays - 在数组数组中搜索索引

> ID：12326000
> 
> 赞同：1
> 
> 时间：2012-09-07T22:03:18.617
> 
> 标签：arrays, vb.net, search

我有一个数组数组：

将 IDMUsers 调暗为列表（数组）

我用信息填充这个数组。示例：[{Data1a,Data2a,Data3a,....,Data30a},{Data1b,Data2b,Data3b,....,Data30b},{Data1c,Data2c,Data3c,....,Data30c}]

现在，我需要找到例如“Data3b”，并且该函数必须返回它所在的寄存器号，在这种情况下它必须返回记录号 2。即 {Data1b,Data2b,Data3b,....,Data30b}

我在 VB.Net 工作。

我的代码是：

```
Sub Main()
    Dim TecoReader As New FileManagement
    Dim IDMUsers As List(Of Array)

   ' Populate Array
    IDMUsers = TecoReader.ReadFromFile(My.Settings.ActivosIDMFilePath, My.Settings.CharSeparator)

   Console.writeline (SearchInArray("text"))
end sub

Private Function SearchInArray(ByVal ToSearchFor As String) As String
    For Each Register In IDMUsers
        For Each Field In Register
            If Field = ToSearchFor Then
                Return Register(26) & " - " & Register(27)
            End If
        Next
    Next
    Return ""
End Function 
```

它适用于 SeachInArray 函数，但我有一个大数组（20K 寄存器），所以速度很慢，我需要更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:32:53.837

我的代码是用 C# 编写的，避免至少一个**FOR EACH**循环可能对您有所帮助....

```
int mainArrayIndex = 0;
        string arrayIndex = string.Empty;
        int searchIdex = 0;
        foreach (string[] item in jaggedArray)
        {
            mainArrayIndex++;
            searchIdex = Array.BinarySearch(item, "H");
            if (searchIdex > 0)
            {
                arrayIndex = mainArrayIndex + "," + searchIdex.ToString();
                break;
            }
        } 
```

# c++ - 在不占用内存的情况下读取文本文件的最佳方法

> ID：12326008
> 
> 赞同：1
> 
> 时间：2012-09-07T22:04:01.150
> 
> 标签：c++, arrays, memory-management, vector

阅读文本文件的最佳方法是什么，例如我有一个包含数百本书的文本文件。在这些书籍下将是作者等，一些作者可以拥有多本书。

我将如何编写这个程序，以便在搜索或查找一条信息时它不会将整个文件读入内存（数组、向量等）。假设我输入作者姓名，它会找到他们写的每一本书。所以我很好奇做到这一点的最佳方式和最有效的方式。

我会用 C++ 编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:04:39.833

基本答案是 FileStream。因此，您在磁盘上的文件中寻找一个位置，然后从那里读取。但是，此时您将非常受磁盘 io 限制，并且您的文件必须符合某种结构，除非您每次想要查找某些内容时都必须从头读取到目标。即它必须按作者顺序排列，即使可以接受，这也可能意味着通过它搜索其他任何东西都会非常低效。

解决问题的经典方法是索引文件。因此，books.dat 将是一个相关的 authors.idx，它可以说是作者和标题的列表，最好按作者排序。然后你有titles.idx，它是标题和书在books.dat中开始的位置。文件中的下一个标题将为您提供书籍的长度。

当然，您必须维护这两个文件。如果应用程序不编辑文件，那么使用 uo 工具来创建您需要的索引将是一个不错的方法。

# jquery - 无法使用 Ajax 更新我的 div (Rails 3)

> ID：12326015
> 
> 赞同：1
> 
> 时间：2012-09-07T22:04:37.233
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有一个表单，用户将使用它来输入书名，我将把它传递给外部图书搜索 API，然后我想在不重新加载页面的情况下在下方显示图书结果。

# 新的.html.haml

（输入标题的表格）

```
= form_tag book_search_path, :method => :get, :remote => true do
    = label_tag "Title: (#{@title})"
    = text_field_tag "title", ""
    = submit_tag "Search!"

#results // results should be updated here 
```

# book_controller.rb

（book_search_path 到这里，到 'search' 动作）

```
class BooksController < ApplicationController

def index
    @books = Book.find :all
    render :action => 'list'
end 

def new 
    @books = Book.find :all
end 

def search
    Rails.logger.info("DOSEARCH!!!")
    # HIT THE API
    @results = search_keywords params[:title]
    # implicit render search.js.erb
end 
```

# 搜索.js.erb

（在书籍#search 操作结束时呈现）

```
m = $('#results');    
m.innerHTML = "<%= escape_javascript(render :partial => 'results.html.haml') %>"; 
```

# _results.html.haml

（这是我想通过 ajax 插入结果 div 的内容）

```
- @results.each do |b| 
  %tr 
    %td 
      - Rails.logger.info("Got title...#{b.title}")
      = b.title
    %td 
      = b.isbn 
```

我知道它`_results.html.haml`正在运行，因为我看到了“得到标题”日志，但它没有显示在`results`div 内的 new.html.haml 上。知道发生了什么吗？

编辑：更新 books_controller。带有完整的代码。Book.rb 是一个空模型，除了 :attr_accessible 字段

编辑：阿贾克斯响应：

```
m = $('#results');    
m.innerHTML = "<table id=\'results_table\'>\n  <tbody><\/tbody>\n  <th>Title<\/th>\n  <th>ISBN<\/th>\n  <tr>\n    <td>\n      The Odyssey\n    <\/td>\n    <td>\n      \n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey of Homer\n    <\/td>\n    <td>\n      1604240687\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey\n    <\/td>\n    <td>\n      1613821166\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey of Homer\n    <\/td>\n    <td>\n      1437818080\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      Odyssey\n    <\/td>\n    <td>\n      0872204847\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey (Penguin Classics)\n    <\/td>\n    <td>\n      0143039954\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey: The Fitzgerald Translation\n    <\/td>\n    <td>\n      0374525749\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey\n    <\/td>\n    <td>\n      1613823398\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey\n    <\/td>\n    <td>\n      0763642681\n    <\/td>\n  <\/tr>\n  <tr>\n    <td>\n      The Odyssey (Penguin Classics)\n    <\/td>\n    <td>\n      0140449116\n    <\/td>\n  <\/tr>\n<\/table>\n"; 
```

编辑：这是 Rails 3.2.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:00:24.970

尝试将以下块添加到您的`search`操作中：

```
respond_to do |format|
  format.js
end 
```

另外，将行替换`search.js.erb`为如下所示：

```
$('#results').html("<%= escape_javascript(render :partial => 'results') %>"); 
```

**更新**：

看起来真正的问题（假设没有其他语法问题）是不是所有浏览器都支持innerHTML（参见[this](https://stackoverflow.com/questions/3563107/jquery-html-vs-innerhtml)）

# database - 带有标签的信息窗口（Infobubble）仅显示添加的最后一个标记的内容（通过 PHP/Mysql））

> ID：12326021
> 
> 赞同：2
> 
> 时间：2012-09-07T22:05:29.007
> 
> 标签：database, tabs, maps, infobubble

好的，我一直在尝试使用填充了许多标记的地图上的[选项卡来实现 Infobubbles，这些标记通过 ajax 调用从 Mysql 数据库中恢复（使用](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)[Google 的本教程](https://developers.google.com/maps/articles/phpsqlajax_v3)构建）。

click 事件对每个标记都反应良好，但问题是每个 infobubble 都在选项卡中显示相同的 html 内容，我猜从添加的最后一个标记开始......肯定有一个关闭问题，但我觉得很没用此刻，这让我快疯了！感谢您提供任何帮助...

```
function init() {

    var mapCenter = new google.maps.LatLng(48.204612, 7.419058);
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 9,
      center: mapCenter,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infoBubble = new InfoBubble({
        map: map,
        maxWidth: 300,
        disableAnimation: true
    });

    // Get markers and info from the database
downloadUrl("phpsqlajax_genxml3.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var description = markers[i].getAttribute("description");
        var type = markers[i].getAttribute("type");
        var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
        var html = "<b>" + name + "</b> <br/>" + address;
        var icon = customIcons[type] || {};
        var marker = new google.maps.Marker({
        map: map,
        title: name,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow,
        });

        google.maps.event.addListener(marker, 'click', function() {
        if (!infoBubble.isOpen()) {
        infoBubble.open(map, this); 
        }
        });

        google.maps.event.addListener(map, "click", function(){
        infoBubble.close();
        });
    }

infoBubble.addTab('Tab1', html);
infoBubble.addTab('Tab2', description);

});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:30:30.520

因为您的 infoWindow 只创建一次，并且仅在代码执行开始时创建。您需要将 infoWindow 的初始化放在 click 事件中或使用方法 setContent 修改标记单击的内容

# c++ - 与 GLSL 相关的 OpenGL 应用程序代码

> ID：12326023
> 
> 赞同：2
> 
> 时间：2012-09-07T22:05:53.313
> 
> 标签：c++, opengl

我在理解我的 OpenGL 应用程序和我的 GLSL 文件（.ver​​t 和 .frag）之间的连接时遇到了一些困难。我知道如何创建顶点或片段着色器，并且网络上有很多示例，但我很难在我的应用程序中实际使用我的着色器，特别是将（绑定？）纹理链接到我的着色器。我的问题是，我缺少什么代码来使用我上传到我的应用程序和着色器的纹理？

我当前的应用程序创建一个窗口，加载 4 个纹理（岩石、草、石头和一个混合贴图，因为我想用它来进行纹理喷溅），然后在主循环中绘制一个四边形。我的整个应用程序代码如下：

```
#include <windows.h>
#include <iostream>
#include <sstream>
#include <fstream>
#include <SFML/Graphics.hpp>
#include <glew.h>
#include <gl/gl.h>
#include <gl/glu.h>

#include "textfile.h"
#include "textfile.cpp"

using namespace std;

class Scene {
public:
    void resize( int w, int h ) {
        // OpenGL Reshape
        glViewport( 0, 0, w, h );
        glMatrixMode( GL_PROJECTION );
        glLoadIdentity();
        gluPerspective( 120.0, (GLdouble)w/(GLdouble)h, 0.5, 500.0 );
        glMatrixMode( GL_MODELVIEW );
    }
};

///Shader
GLuint p, f, v;
void setShader() {

    char *vs,*fs;

    v = glCreateShader(GL_VERTEX_SHADER);
    f = glCreateShader(GL_FRAGMENT_SHADER);

    vs = textFileRead("shader.vert");
    fs = textFileRead("shader.frag");

    const char * vv = vs;
    const char * ff = fs;

    glShaderSource(v, 1, &vv,NULL);
    glShaderSource(f, 1, &ff,NULL);

    free(vs);free(fs);

    glCompileShader(v);
    glCompileShader(f);

    p = glCreateProgram();

    glAttachShader(p,v);
    glAttachShader(p,f);

    glLinkProgram(p);
    glUseProgram(p);
}

int main() {

    sf::RenderWindow window(sf::VideoMode(800, 600, 32), "Test");

    ///Setup the scene, materials, lighting
    Scene scene;
    scene.resize(800,600);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glColorMaterial(GL_FRONT_AND_BACK, GL_EMISSION);
    glEnable(GL_COLOR_MATERIAL);
    glShadeModel(GL_SMOOTH);

    ///Terrain Textures
    sf::Image tex0;
    tex0.loadFromFile("mixmap.png");
    sf::Image tex1;
    tex1.loadFromFile("grass.png");
    sf::Image tex2;
    tex2.loadFromFile("rock.png");
    sf::Image tex3;
    tex3.loadFromFile("stone.png");

    GLuint mixmap;
    glGenTextures(1, &mixmap);
    glBindTexture(GL_TEXTURE_2D, mixmap);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, tex0.getSize().x, tex0.getSize().y, 0, GL_RGBA, GL_UNSIGNED_BYTE, (const GLvoid*)tex0.getPixelsPtr() );

    GLuint grass;
    glGenTextures(1, &grass);
    glBindTexture(GL_TEXTURE_2D, grass);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, tex1.getSize().x, tex1.getSize().y, 0, GL_RGBA, GL_UNSIGNED_BYTE, (const GLvoid*)tex1.getPixelsPtr() );

    GLuint rock;
    glGenTextures(1, &rock);
    glBindTexture(GL_TEXTURE_2D, rock);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, tex2.getSize().x, tex2.getSize().y, 0, GL_RGBA, GL_UNSIGNED_BYTE, (const GLvoid*)tex2.getPixelsPtr() );

    GLuint stone;
    glGenTextures(1, &stone);
    glBindTexture(GL_TEXTURE_2D, stone);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, tex3.getSize().x, tex3.getSize().y, 0, GL_RGBA, GL_UNSIGNED_BYTE, (const GLvoid*)tex3.getPixelsPtr() );

    ///I am afrain I am missing some code here that will actually link the textures to the shader itself

    ///Shader
    glewInit();
    setShader();

    ///Start loop
    while( window.isOpen() ) {
        sf::Event event;
        while( window.pollEvent( event ) ) {
            if( event.type == sf::Event::Closed )
                window.close();
        }

        glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(50.0, 1.0, 1.0, 50);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        gluLookAt(1, 0, 1, 0, 0, 0, 0, 1, 0);

        glBegin(GL_QUADS);
            glVertex3f(-0.5, -0.5, 0.0);

            glVertex3f(-0.5, 0.5, 0.0);

            glVertex3f(0.5, 0.5, 0.0);

            glVertex3f(0.5, -0.5, 0.0);
        glEnd();

        ///Reset env settings for SFML
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

        window.display();
    }
    return 1;
} 
```

下面也是我的顶点和片段着色器，虽然我不确定我的顶点着色器是否完整......

顶点：

```
void main()
{
 gl_TexCoord[0] = gl_MultiTexCoord0;
 gl_Position = ftransform();
} 
```

分段：

```
uniform sampler2D MixMap;
uniform sampler2D Grass;
uniform sampler2D Stone;
uniform sampler2D Rock;

varying vec4 texCoord;

void main(void)
{
   vec4 mixmap   = texture2D( MixMap, texCoord.xy );
   vec4 tex0    = texture2D( Grass, texCoord.xy ); 
   vec4 tex1    = texture2D( Rock,  texCoord.xy ); 
   vec4 tex2    = texture2D( Stone, texCoord.xy );

   tex0 *= mixmap.r; 
   tex1 = mix( tex0, tex1, mixmap.g ); 
   vec4 outColor = mix( tex1, tex2, mixmap.b ); 

   gl_FragColor = outColor;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T22:52:01.747

首先，您需要将每个纹理对象绑定到 OpenGL 上下文中的纹理单元。GPU 有`GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS`许多纹理图像单元，每个单元都可以附加纹理。

这看起来像这样：

```
glActiveTexture(GL_TEXTURE0 + 0);
glBindTexture(GL_TEXTURE_2D, mixmap); //mixmap now attached to sampler 0

glActiveTexture(GL_TEXTURE0 + 1);
glBindTexture(GL_TEXTURE_2D, grass); //attached to sampler 1

glActiveTexture(GL_TEXTURE0 + 2);
glBindTexture(GL_TEXTURE_2D, rock);  //attached to sampler 2

glActiveTexture(GL_TEXTURE0 + 3);
glBindTexture(GL_TEXTURE_2D, stone); //attached to sampler 3 
```

注意`GL_TEXTURE0`+ *x*语法。这样做是为了让您不会因为`GL_TEXTUREi`只达到`GL_TEXTURE32`;而感到束缚。您可以同时拥有超过 32 个多纹理（如果您的实现支持它）。当然，我不知道你为什么想要，但你可以。

现在您有四个纹理绑定到四个纹理图像单元。下一步是将 GLSL 采样器分配给纹理图像单元。链接着色器后，您必须查询每个采样器的统一位置，然后告诉程序它应该在哪个纹理图像单元中查找实际纹理。

```
compileAndLinkProgram();
glUseProgram(program);

mixmapUniformLocation = glGetUniformLocation(program, "MixMap"); //get the uniform associated with "MixMap"
glUniform1i(mixmapUniformLocation, 0); //set MixMap uniform to 0 (sampler 0);

grassUniformLocation = glGetUniformLocation(program, "Grass"); //get the uniform associated with "Grass"
glUniform1i(grassUniformLocation, 1); //set Grass uniform to 1 (sampler 1);

...repeat for 4 samplers... 
```

现在，当您在着色器中对采样器进行采样时，它将从绑定到该采样器的纹理中提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:14:43.610

您需要同时使用[glGetUniformLocation](http://www.opengl.org/sdk/docs/man/xhtml/glGetUniformLocation.xml)和[glUniform](http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml)来告诉着色器程序哪些纹理附加到哪些采样器。

此处的示例： [GLSL 中的多个纹理 - 只有一个有效](https://stackoverflow.com/questions/3569261/multiple-textures-in-glsl-only-one-works)

# bash - 循环遍历bash中的行和多列

> ID：12326024
> 
> 赞同：7
> 
> 时间：2012-09-07T22:05:58.870
> 
> 标签：bash, loops

我正在尝试对一个文件进行循环，该文件具有多列（字段）的多行和条件。

以下是示例文件 ( `file.txt`) 的样子：

```
aaa  bbb  ccc
ddd  kkk
fff  ggg  hhh lll
ooo
sss 
```

...ETC...

我想编写一个循环遍历第一个字段的第一行的 bash 脚本，如果名称存在，则继续到第二行。如果第一个字段的第一行的名称不存在 test 然后测试第二个字段（在这种情况下测试名称“bbb”），依此类推，直到第四个。对于给定的行，我有一个可变字段编号，最多有四 (4) 个字段，最少有一个字段（列）。

```
for i in cat file.txt; do 
    echo $i
    if [ -e $i ]; then
        echo "name exists"
    else
        echo "name does not exist"
    fi
done 
```

显然，上面的脚本测试了行和列。但是如果第一个字段不存在并且如果第二个字段不存在，我也想循环到第二个，第三个和第四个字段，测试第三个字段，直到第四个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T23:35:02.650

我认为你真正想做的是逐行而不是逐字读取文件。您可以使用`while`和来做到这一点`read`。喜欢：

```
while read field1 field2 field3 field4; do
  if [ -e "$field1" ]; then
     something
  elif [ -e "$field2" ]; then
      ...
  fi
done < file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-04T18:18:48.680

这对我来说是阅读专栏的工作，我认为它可以适用于你的情况。

```
while read field1 field2 field3 field4; do
    echo $field1 $field2 $field3 $field4
done < file.txt | awk '{ print $1,$2,$3,$4 }' 
```

# php - 分解未知数量的变量

> ID：12326033
> 
> 赞同：0
> 
> 时间：2012-09-07T22:06:30.770
> 
> 标签：php

我有一个长度未知的数据字符串，例如`$myvar = "data,data";`，我想要`explode`字符串，例如`list($a, $b) = explode(",", $myvar)`，如果我知道数据的长度，它会很好用，但我不确定如何处理可变长度。

我正在考虑使用`if`语句。

例如：`$letter_count = substr_count($myvar, ',');`

```
if($letter_count == 2) { list($a, $b) = explode(",", $myvar) }
elseif($letter_count == 3) { list($a, $b, $c) = explode(",", $myvar) } 
```

但这不切实际，有人知道我还能怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:10:08.013

只是爆炸成一个常规的数组引用：

```
$return = explode("," $myvar); 
```

您使用的格式是……好吧……当您知道预期的输出是什么时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T22:13:52.457

如果使用`explode`，它将返回一个由分隔符分割的数组。然后，您将通过其索引位置调用每个项目。以下示例使用空格作为分隔符。

```
$pizza  = "piece1 piece2 piece3 piece4 piece5 piece6";
$pieces = explode(" ", $pizza);
echo $pieces[0]; // piece1
echo $pieces[1]; // piece2 
```

# powershell - PowerShell - If Then：无法在空值表达式上调用方法

> ID：12326038
> 
> 赞同：0
> 
> 时间：2012-09-07T22:07:00.643
> 
> 标签：powershell, methods, null, runtimeexception

当我运行这个函数时，我得到一个对我来说没有意义的神秘错误。我不知道我正在对一个空值表达式运行一个方法。我突然想到，这要么是范围问题，要么是未设置值。但是，我无法弄清楚并将其发布给社区：

```
You cannot call a method on a null-valued expression.
At C:\Users\Administrator\Desktop\DCB Settings Modification\DCBxPowershell.ps1:747 char:21
+                 If ($resetAdapter -eq $FAIL_RESULT){
+                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidOperation: (:) [], RuntimeException
+ FullyQualifiedErrorId : InvokeMethodOnNull
You cannot call a method on a null-valued expression.
At C:\Users\Administrator\Desktop\DCB Settings Modification\DCBxPowershell.ps1:760 char:17
+             If ($resetAdapter -eq $FAIL_RESULT){
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidOperation: (:) [], RuntimeException
+ FullyQualifiedErrorId : InvokeMethodOnNull** 
```

* * *

```
$FAIL_RESULT = 0
$PASS_RESULT = 1

Function Use-Menu
{ 
    param($DCBmenuItems, $modificationCatagoryChoosen)

    ## Function Menu-Choose --## Holds choosen Network Interface Index to work with            
    $networkIndex = Menu-Choose $strippedNetworkIndex $networkChooseTitle
    #$networkIndex[0]  ### Debug -
    $resetAdapter = $FAIL_RESULT

    Start-Sleep -s .7

    If ($result = $PASS_RESULT) {
    ## Find Current Config in order to display it to user
        $dcbConfig = Find-Config $networkIndex
    }

    #The following 'DO WHILEs' are for the "Go back to previous Menu" functionality.
    Do {
        Do {

            ## Function Menu-Choose --## Let user choose which catagory of modification to perform
            $modificationCatagoryChoosen = Menu-Choose $DCBmenuItems $DCBMenuTitle $networkIndex -scope global
            If (($DCBmenuItems.count - 1) -eq $modificationCatagoryChoosen) {
                $resetAdapter = $PASS_RESULT
            }

            # These If Then statements allow reset of adapter without changing settings
            If ($resetAdapter -eq $FAIL_RESULT){
                $DCBmenuItems2 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].Option
                $DCBMenuTitle2 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].Name

                Start-Sleep -s .7

                ## Function Menu-Choose --## Let user choose which modification to perform
                $modificationChoosen = Menu-Choose $DCBmenuItems2 $DCBMenuTitle2 $networkIndex
            }

        } While (($modificationChoosen -eq $DCBmenuItems2.GetUpperBound(0)) -and ($resetAdapter -eq $FAIL_RESULT))

        # These If Then statements allow reset of adapter without changing settings
        If ($resetAdapter -eq $FAIL_RESULT){ 
            ## Changes the options to choose on Menu-Choose to last chosen catagory
            $DCBmenuItems3 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].SubMenu[$modificationChoosen].Option
            $DCBMenuTitle3 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].SubMenu[$modificationChoosen].Name

            Start-Sleep -s .7

            ## Function Menu-Choose --## Let user choose how to modify DCB setting
            $modificationOptionChoosen = Menu-Choose $DCBmenuItems3 $DCBMenuTitle3 $networkIndex
        }
    } While (($modificationOptionChoosen -eq $DCBmenuItems3.GetUpperBound(0)) -and ($resetAdapter -eq $FAIL_RESULT)) 

    # These If Then statements allow reset of adapter without changing settings
    If ($resetAdapter -eq $FAIL_RESULT){
        Start-Sleep -s .7

         ## Function Set-RegistryValues --## Records modified DCB setting to registry
        Set-RegistryValues $xmlDCBregEdits $modificationCatagoryChoosen $modificationChoosen $modificationOptionChoosen
    }

Return $networkIndex 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:41:34.533

似乎从最初的两个 if-then 语句更改为在我的初始 if-then 语句之后插入中断并在第二个 Do-Loop 上添加一个相同的语句解决了我遇到的问题。我这样做的原因是，在下一层菜单然后返回顶层后，我注意到选择重置适配器时错误不存在。

> 侧边栏：我没有解释我在这里列出的函数是一个遍历 $DCBmenuItems 的菜单，尽管这从代码中可能很明显。

我认为`$resetAdapter`由于某种原因没有正确设置。我不是 100% 确定为什么这解决了我的问题以及为什么其他代码会抛出错误。这是修改后的代码：

```
$FAIL_RESULT = 0
$PASS_RESULT = 1

Function Use-Menu
{ 
    param($DCBmenuItems, $modificationCatagoryChoosen)

    ## Function Menu-Choose --## Holds choosen Network Interface Index to work with            
    $networkIndex = Menu-Choose $strippedNetworkIndex $networkChooseTitle
    #$networkIndex[0]  ### Debug -

    $resetAdapter = $FAIL_RESULT
    $modificationCatagoryChoosen = $null
    $modificationChoosen = $null
    $modificationOptionChoosen = $null
    $DCBmenuItems2 = $null
    $DCBMenuTitle2 = $null
    $DCBmenuItems3 = $null
    $DCBMenuTitle3 = $null

    Start-Sleep -s .7

    If ($result = $PASS_RESULT) {
    ## Find Current Config in order to display it to user
        $dcbConfig = Find-Config $networkIndex
    }

    #The following 'DO WHILEs' are for the "Go back to previous Menu" functionality.
    Do {
        Do {

            ## Function Menu-Choose --## Let user choose which catagory of modification to perform
            $modificationCatagoryChoosen = Menu-Choose $DCBmenuItems $DCBMenuTitle $networkIndex -scope global
            If (($DCBmenuItems.count - 1) -eq $modificationCatagoryChoosen) {
                $resetAdapter = $PASS_RESULT
                break
            }

            # These If Then statements allow reset of adapter without changing settings

            $DCBmenuItems2 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].Option
            $DCBMenuTitle2 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].Name

            Start-Sleep -s .7

            ## Function Menu-Choose --## Let user choose which modification to perform
            $modificationChoosen = Menu-Choose $DCBmenuItems2 $DCBMenuTitle2 $networkIndex

        } While (($modificationChoosen -eq $DCBmenuItems2.GetUpperBound(0)) -and ($resetAdapter -eq $FAIL_RESULT))

        If (($DCBmenuItems.count - 1) -eq $modificationCatagoryChoosen) {
                break
        }
        # These If Then statements allow reset of adapter without changing settings

        ## Changes the options to choose on Menu-Choose to last chosen catagory
        $DCBmenuItems3 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].SubMenu[$modificationChoosen].Option
        $DCBMenuTitle3 = $xmlDCBoptions.MenuItems.MenuOptions[$modificationCatagoryChoosen].SubMenu[$modificationChoosen].Name

        Start-Sleep -s .7

        ## Function Menu-Choose --## Let user choose how to modify DCB setting
        $modificationOptionChoosen = Menu-Choose $DCBmenuItems3 $DCBMenuTitle3 $networkIndex

    } While (($modificationOptionChoosen -eq $DCBmenuItems3.GetUpperBound(0)) -and ($resetAdapter -eq $FAIL_RESULT)) 

    # These If Then statements allow reset of adapter without changing settings
    If ($resetAdapter -eq $FAIL_RESULT){
        Start-Sleep -s .7

         ## Function Set-RegistryValues --## Records modified DCB setting to registry
        Set-RegistryValues $xmlDCBregEdits $modificationCatagoryChoosen $modificationChoosen $modificationOptionChoosen
    }

Return $networkIndex 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:38:45.540

此错误的位置似乎不正确。我看不到 PowerShell 如何在这种`if ()`情况下得到这种类型的错误。但是，此行可能会导致错误：

```
$DCBmenuItems3.GetUpperBound(0) 
```

添加检查以确保`$DCBmenuItems3`不为空。此外，在调试问题时（或者只是作为一种常规做法），我将其放在`Set-StrictMode -version latest`脚本的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T05:16:04.947

```
FAIL_RESULT = 0
PASS_RESULT = 1 
```

错字？

```
$FAIL_RESULT = 0
$PASS_RESULT = 1 
```

# node.js - node.js 中的奇怪行为

> ID：12326039
> 
> 赞同：3
> 
> 时间：2012-09-07T22:07:05.950
> 
> 标签：node.js

我正在阅读[http://www.nodebeginner.org](http://www.nodebeginner.org)中的教程，我在数据输出中有一个奇怪的行为。我知道，Stackoverflow 上有一个类似的问题，但没有答案。所以我有这个网络服务器代码：

```
//server.js
var http = 要求（'http'）
var url = 需要（'url'）

功能开始（路线，句柄）{
    函数 onRequest（请求，响应）{
        var postData = ""
        var pathname = url.parse(request.url).pathname
        console.log("请求 " + 路径名 + " 已收到。")

        request.setEncoding('utf8')
        request.addListener("数据", function(postDataChunk) {
            postData += postDataChunk
            console.log("收到 POST 数据块 '" + postDataChunk +"'.")
        })

        request.addListener("end", function() {
            路线（句柄，路径名，响应，postData）
        })
        var content = route（句柄、路径名、响应）
    }

    http.createServer(onRequest).listen(80, '192.168.1.34')
    console.log("服务器已启动")
}

出口.开始 = 开始

```

调用 requestHandler.upload 的 router.js 代码 - 我的错误函数

```
//路由器.js
功能路线（句柄，路径名，响应，postData）{
    console.log("关于路由请求" + 路径名)
    if (typeof handle[pathname] === 'function') {
        handle[pathname](response, postData) //调用 requestHandler.upload
    } 别的 {
        console.log("没有找到" + 路径名的请求处理程序)
        response.writeHead(404, {'Content-Type' : 'text/plain'})
        response.write("404 未找到")
        响应.end()
    }
}

```

以及 requestHandler.upload 的代码

```
//requestHandler.js
函数上传（响应，postData）{
    console.log("请求处理程序 'upload' 是用 POST 数据调用的：" + postData); //工作正常
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write("你已经发送：" + postData); //丑陋的工作
    response.end();
}

```

假设在 POST 数据中有一个 string `text=123`。此函数的第一行输出真实数据，例如`"Request handler 'upload' was called with POST data: text=123"`. 虽然，这一行在`response.write("You've sent: " + postData);`浏览器中输出下一条消息：`You've sent: undefined`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:34:41.643

在您的代码中`server.js`：

```
var content = route(handle, pathname, response) 
```

在`"end"`事件侦听器中调用之前首先运行，执行函数但省略`postData`参数。它运行...

```
response.write("You've sent: " + postData);
response.end(); 
```

因此，发回浏览器的响应是：

```
You've sent: undefined 
```

该`"end"`事件随后被触发，事件侦听器调用...

```
route(handle, pathname, response, postData) 
```

哪个正确通过了`postData`，这会正确输出到控制台。由于此时的响应已经结束，因此第二次调用`response.write(...)`不会回传到浏览器。

我希望这能解释问题。

**编辑**答案是删除呼叫

```
var content = route(handle, pathname, response) 
```

当客户端完成发布数据并且此时您正在正确运行该函数时，`"end"`将调用该事件。`route`

# c++ - 当我从通常核心的 cron 运行某些东西时，我怎样才能获得核心转储？

> ID：12326040
> 
> 赞同：1
> 
> 时间：2012-09-07T22:07:34.360
> 
> 标签：c++, c, unix, cron, coredump

今天，我 cron 并尝试检测核心转储并提醒我的东西实际上遇到了错误断言（当我在前台或后台的命令行上运行它时，通常核心会转储它）但没有核心被转储。我写了这个简单的测试：

```
int main
{
sleep(3);
assert(false);
} 
```

当我编译和运行时，它会一直进行核心转储。但是当我把它放在 crontab 上时，我收到了一封来自 cron 守护进程的电子邮件，上面写着：

```
rocket: main.cpp:10: int main(int, char**): Assertion `false' failed.
/bin/sh: line 1: 32448 Aborted                 ./rocket 
```

并且没有核心文件被放置在`/cores`. 为什么会这样，我怎样才能得到我的核心？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T09:58:16.717

要在崩溃时生成核心文件，必须在当前环境中启用核心转储。在 shell 中，这可以使用 ulimit 来完成：

```
ulimit -c unlimited 
```

这意味着“将最大核心转储大小设置为无限制”。您的系统可能配置为在交互式 shell 中执行此操作，但不是在 cron 作业中。要从 cron 作业执行此操作，您需要修改此限制。如果 cron 作业是一个调用其他程序的 shell 脚本，你可以`ulimit`像上面那样调用。另一方面，如果作业是可执行文件，您可以创建一个包装器来运行它：

```
#!/bin/bash
ulimit -c unlimited
exec "$@" 
```

另一种选择是修改程序以使用[setrlimit](http://linux.die.net/man/2/setrlimit)函数设置限制本身。

至于为什么你的核心进入 /cores 而不是工作目录：你的发行版可能已经调整了[核心模式](http://www.kernel.org/doc/man-pages/online/pages/man5/core.5.html)，可能使用一个程序来处理核心文件并将它们放在 /cores 中。

# firefox - 使网站在 safari/firefox 中工作的估计时间

> ID：12326041
> 
> 赞同：0
> 
> 时间：2012-09-07T22:07:51.650
> 
> 标签：firefox, google-chrome, safari, web, cross-browser

我有一个网站，最初是为在 IE 7/8 下封闭的 Intranet 使用而设计的，现在需要在 Web 上运行，这意味着要对 firefox、safari 和 chrome 进行调整。

问题是我在时间估计方面不太好，并且正在寻找有关使站点跨浏览器兼容时的期望的建议。Firefox 开发工具告诉我有几个 CSS 标签，例如 *overflow-x 和 filter 不受支持。

Safari 和 chrome 渲染网站与 IE 和 firefox 有何不同？

它是一个 HTML、CSS、Javascript 和 ASP.net 网站。

您必须提供的任何见解将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:18:36.780

这首先取决于该网站的编写好/坏。

第一个问题：网站是以标准模式还是怪癖模式呈现的？如果它处于怪癖模式，则将您的估计值加倍。

第二个问题：你有多少 Javascript？你在使用 jQuery 还是任何其他库？如果您有很多 Javascript 代码，并且没有使用好的库，那么您很可能需要做很多工作。

重新您指出的特定CSS：

`* overflow-x`- 这里的星号是针对 IE 的 hack；如果该站点最初仅适用于 IE，则不确定为什么它会在那里，但它不会影响任何其他浏览器。

`filter`- 这是一种特定于 IE 的样式，用于各种特殊效果，包括不透明度、旋转和一堆其他东西。大多数（如果不是全部）可以在其他浏览器中使用标准 CSS 轻松完成，但您必须手动将其全部转换。弄清楚它在做什么，然后用谷歌搜索 CSS 标准的做法。

# javascript - 文本区域焦点上的 Div 淡出

> ID：12326043
> 
> 赞同：0
> 
> 时间：2012-09-07T22:07:54.550
> 
> 标签：javascript, jquery, focus, fadein

我有一个 div 需要淡出表单中文本区域的焦点。

我有以下 JS 文件来执行此操作，*“消息”*是我的文本区域的类，*“气泡”*是应该淡入/淡出的 div 的 ID。我也将它直接包含在我的页面中，看看是否修复了它。

```
function (){

$(".message").focus(function() {
$("#bubble").fadeOut();
   }).blur(function() {
    $("#bubble").fadeIn();
   });
})(); 
```

HTML如下，并不是特别有趣！

```
 <div id="bubble">
    <img src="images/hire_me_bubble.png" alt="Hire me" />
 </div> 
```

可以在[此处](http://www.jamesperrett.co.uk/testsite/)看到实时站点- 联系表单中的文本区域应该开始淡出气泡。

我试过检查代码，但看不到任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:11:57.250

你的语法搞砸了。你有`)()`什么不匹配的。尝试这个：

```
$(function (){
    $(".message").focus(function() {
        $("#bubble").fadeOut();
    }).blur(function() {
        $("#bubble").fadeIn();
    });
}); 
```

这将在文档就绪时执行代码。

# java - Java注解之间可以有空格吗

> ID：12326046
> 
> 赞同：3
> 
> 时间：2012-09-07T22:08:19.013
> 
> 标签：java, eclipse, annotations

我正在调试一些奇怪的代码，我发现了一个问题。

当我的代码看起来像这样时。也就是说，EclipseLink 注释之间有一个空格是无法拾取某些注释的。

```
 @Id
  @GeneratedValue(generator = "EDGE_PK", strategy = GenerationType.SEQUENCE)

  @SequenceGenerator(name = "EDGE_PK", sequenceName = "SEQ_EDGE_ID")
  @Column(name = "EDGE_ID", nullable = false)
  private Long edgeId; 
```

如果我删除空间，则系统开始按预期工作。

像我这样在注释之间留一个空格是否合法，或者它会改变含义？即，有些适用于类而不是变量。

编辑：我现在正在使用 Eclipse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:10:31.363

注释之间的空白完全无关紧要，在我看来，您在 IDE 中发现了一个关于屏幕显示注释的怪癖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:17:31.317

我觉得这是一个IDE问题。IntelliJ IDEA 对这些类型的注释没有问题，我怀疑`javac`也不会（他们不关心空格）。

# c++ - 在 C++ 中从 char* 获取奇怪的返回值

> ID：12326048
> 
> 赞同：0
> 
> 时间：2012-09-07T22:08:47.407
> 
> 标签：c++, char

我是 C++ 编程的新手，我从我设置的 char* 变量返回一个奇怪的值，这取决于我如何使用它。我显然在做一些非常愚蠢的事情，但我看不到问题所在。接下来的几段描述了设置（很糟糕），但只看输出和代码可能更容易。

基本上，我有几个类 - Menu 和 MenuItem。MenuItem 类有一个 char* 类型的名称。根据我使用菜单项的方式，当我在 MenuItems 上执行 getName() 时会得到奇怪的结果。

我有一个具有状态（TestState）的机器类。此 TestState 创建一个包含 MenuItems 的菜单。当我在我的 main 函数中创建一个 TestState 并让它打印出菜单时，我得到了我所期望的。当我创建一个包含 TestState 的机器并要求它打印菜单时，它会为菜单中的根项目的名称打印一些奇怪的东西。

**输出**- 最后一行我期待**menuItem1**，但我得到**HâΔHã=ò**

```
Output direct from TestState Object

Displaying menu state 
menuItem1
root not null 
menuItem1

Output from TestState within Machine

Displaying menu state 
menuItem1
root not null 
Hâ∆Hã=ò 
```

**这是我的代码 - Main.cpp**

```
#include "Menu.h"
#include "Machine.h"
#include <iostream>

using namespace std;

Machine m;
TestState t;

int main(void) {
    cout << "Output direct from TestState Object" << endl << endl;
    t = TestState();
    t.print();

    cout << endl << endl << "Output from TestState within Machine" << endl << endl;
    m = Machine();
    m.printCurrentState();
} 
```

**菜单.h**

```
#ifndef Menu_h
#define Menu_h

#include <stdlib.h>

class MenuItem {
public:
    MenuItem();
    MenuItem(const char* itemName);
    const char* getName() const ;

protected:
    MenuItem *next;
    const char* name;
};

class Menu {
public:
    Menu(MenuItem *rootItem);
    Menu();
    void setRoot(MenuItem *r);
    MenuItem* getRoot() ;
protected:
    MenuItem *root;
};

#endif 
```

**机器.h**

```
#ifndef MACHINE_H_
#define MACHINE_H_

#include "Menu.h"

class TestState;
class Machine;

class TestState {
public:
    TestState();
    virtual ~TestState();
    void print();
protected:
    Machine* machine;
    MenuItem menuItem1;
    Menu menuMain;
};

class Machine {
public:
    Machine();
    void printCurrentState();
protected:
    TestState testState;
};

#endif /* MACHINE_H_ */ 
```

**机器.cpp**

```
#include "Machine.h"
#include <iostream>
using namespace std;

TestState::TestState() {
    menuItem1 = MenuItem("menuItem1");
    menuMain = Menu(&menuItem1);
}

void TestState::print(){
    cout << "Displaying menu state " << endl;
    cout << menuItem1.getName() << endl;

    if (menuMain.getRoot() == NULL) {
        cout << "root is null" << endl;
    } else {
        cout << "root not null " << endl;
        cout << menuMain.getRoot()->getName() << endl;
    }
}

TestState::~TestState() {
    // TODO Auto-generated destructor stub
}

Machine::Machine() {
    testState = TestState();
}

void Machine::printCurrentState() {
    testState.print();
} 
```

任何帮助，将不胜感激。我有点失落。谢谢戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:41:15.810

我怀疑正在发生的事情是`Menu.root`指向某个地方的临时对象。您会注意到您在 main 函数中复制了您的机器：

```
// in main():
m = Machine(); // makes a machine, then copies it 
```

那台机器有一个`TestState`，它有一个`MainMenu`，它有一个指向 a 的指针`MenuItem`：

```
// in MenuItem class definition:
MenuItem *root; 
```

该指针被初始化为原始机器成员的地址。问题是，该对象只存在很短的时间：当复制完成时它被销毁，留下一个悬空指针。

换句话说，您需要确保在复制包含指针的对象时，更新这些指针以反映复制对象的地址而不是旧对象的地址。

您需要添加如下复制构造函数：

```
Machine::Machine(const Machine& other)
{
    teststate = other.teststate;
    teststate.machine = this; // you will need to expose TestState.machine to Machine
}

TestState::TestState(const TestState& other)
{
    machine = other.machine; // Machine copy constructor modifies this for us

    menuItem1 = other.menuItem1; // these 3 we have to do
    menuItem2 = other.menuItem2;
    menuMain = other.menuMain;

    menuMain.setRoot(&menuItem1); // update pointers to be to persistent copies
    menuItem1.setNext(&menuItem2);
    menuItem2.setNext(NULL);
} 
```

您可能会注意到您的系统相当脆弱。我建议少依赖对象之间的指针，因为龙会走这条路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:44:14.550

```
TestState::TestState() {
    menuItem1 = MenuItem("menuItem1");
    menuItem2 = MenuItem("menuItem2");
    menuMain = Menu(&menuItem1);
    menuMain.add(&menuItem2);
}

Machine::Machine() {
    testState = TestState();
} 
```

构造`Machine`函数构造一个临时变量`TestState`并将其数据成员复制到`Machine::testState`. `Machine`构造函数完成后，临时对象消失`TestState`，但`Machine::testState.menuMain.root`仍指向临时对象的成员。

怎么修：

了解初始化变量的各种不同方式的含义，以及如何在构造函数中使用初始化列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T22:57:46.853

而不是写`Thing name = Thing(ctorParams);`make name 一个指针并使用`new Thing(ctorParams);`. 看起来你以为你在使用指针，但它在没有 new 关键字的情况下工作，所以你继续并没有使用它们，这会导致你的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T22:17:38.307

`Machine`没有复制构造函数，因此`Machine`（特别是 within `TestState`）内的各种指针和引用都指向垃圾。

# matlab - Matlab/Octave/Numpy 数值差

> ID：12326049
> 
> 赞同：6
> 
> 时间：2012-09-07T22:08:56.890
> 
> 标签：matlab, numpy, octave

我正在将一个在 Matlab 中工作的算法移植到 numpy 并观察到一个奇怪的行为。相关的代码段是

```
P = eye(4)*1e20;
A = [1 -0.015 -0.025 -0.035; 0.015 1 0.035 -0.025; 0.025 -0.035 1 0.015; 0.035 0.025 -0.015 1];
V1 = A*(P*A')
V2 = (A*P)*A' 
```

这段代码，当我用 Matlab 运行时，提供了以下矩阵：

```
V1 = 1.0021e+20            0  -8.0000e+00            0
              0   1.0021e+20            0            0
    -8.0000e+00            0   1.0021e+20            0
              0            0            0   1.0021e+20

V2 = 1.0021e+20            0  -8.0000e+00            0
              0   1.0021e+20            0            0
    -8.0000e+00            0   1.0021e+20            0
              0            0            0   1.0021e+20 
```

请注意，正如预期的那样，V1 和 V2 是相同的。

当相同的代码在 Octave 中运行时，它提供：

```
V1 = 1.0021e+20   4.6172e+01  -1.3800e+02   1.8250e+02
    -4.6172e+01   1.0021e+20  -1.8258e+02  -1.3800e+02
     1.3801e+02   1.8239e+02   1.0021e+20  -4.6125e+01
    -1.8250e+02   1.3800e+02   4.6125e+01   1.0021e+20

V2 = 1.0021e+20  -4.6172e+01   1.3801e+02  -1.8250e+02
     4.6172e+01   1.0021e+20   1.8239e+02   1.3800e+02
    -1.3800e+02  -1.8258e+02   1.0021e+20   4.6125e+01
     1.8250e+02  -1.3800e+02  -4.6125e+01   1.0021e+20 
```

在 numpy 中，段变为

```
from numpy import array, dot, eye
A = numpy.array([[1, -0.015, -0.025, -0.035],[0.015, 1, 0.035, -0.025],[0.025, -0.035, 1, 0.015],[0.035, 0.025, -0.015, 1]])
P = numpy.eye(4)*1e20
print numpy.dot(A,numpy.dot(P,A.transpose()))
print numpy.dot(numpy.dot(A,P),A.transpose()) 
```

哪个输出

```
[[  1.00207500e+20   4.61718750e+01  -1.37996094e+02   1.82500000e+02]
 [ -4.61718750e+01   1.00207500e+20  -1.82582031e+02  -1.38000000e+02]
 [  1.38011719e+02   1.82386719e+02   1.00207500e+20  -4.61250000e+01]
 [ -1.82500000e+02   1.38000000e+02   4.61250000e+01   1.00207500e+20]]
[[  1.00207500e+20  -4.61718750e+01   1.38011719e+02  -1.82500000e+02]
 [  4.61718750e+01   1.00207500e+20   1.82386719e+02   1.38000000e+02]
 [ -1.37996094e+02  -1.82582031e+02   1.00207500e+20   4.61250000e+01]
 [  1.82500000e+02  -1.38000000e+02  -4.61250000e+01   1.00207500e+20]] 
```

因此，Octave 和 numpy 都提供了相同的答案，但它与 Matlab 的答案非常不同。第一点是 V1 != V2，这似乎不对。另一点是，虽然非对角元素比对角元素小很多数量级，但这似乎在我的算法中引起了一些问题。

有谁知道 numpy 和 Octave 的行为方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T22:16:26.593

他们在内部使用双精度，只有大约 15 位精度。您的数学运算可能会超过此值，这会导致数学上错误的结果。

值得一读： http: [//floating-point-gui.de/](http://floating-point-gui.de/)

**编辑：**从我收集到的[文档](http://docs.scipy.org/doc/numpy/user/basics.types.html)中，Numpy 没有更高的精度。[SymPy](http://sympy.org/en/index.html)似乎[可以为您提供所需的精度](https://stackoverflow.com/questions/6876377/numpy-arbitrary-precision-linear-algebra)- 如果该库也适合您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T00:08:19.977

不管它值多少钱，我在 64 位系统上得到与 matlab 相同的结果：

```
[[  1.00207500e+20   0.00000000e+00  -8.00000000e+00   0.00000000e+00]
 [  0.00000000e+00   1.00207500e+20   0.00000000e+00   0.00000000e+00]
 [ -8.00000000e+00   0.00000000e+00   1.00207500e+20   0.00000000e+00]
 [  0.00000000e+00   0.00000000e+00   0.00000000e+00   1.00207500e+20]]
[[  1.00207500e+20   0.00000000e+00  -8.00000000e+00   0.00000000e+00]
 [  0.00000000e+00   1.00207500e+20   0.00000000e+00   0.00000000e+00]
 [ -8.00000000e+00   0.00000000e+00   1.00207500e+20   0.00000000e+00]
 [  0.00000000e+00   0.00000000e+00   0.00000000e+00   1.00207500e+20]]
[[  1.00207500e+20   0.00000000e+00  -8.00000000e+00   0.00000000e+00] 
```

如果您使用的是 32 位系统（或者您在 64 位系统上安装了 32 位版本的 python 和 numpy），您将遇到精度问题，并得到不同的答案，如 @Lucero 所述以下。在这种情况下，您可以尝试显式指定 64 位浮点数（但操作会更慢）。例如，尝试使用`np.array(..., dtype=np.float64)`.

如果您认为需要额外的精度，可以使用`np.longdouble`（与`np.float128`64 位系统和`np.float96`32 位系统相同），但这可能并非在所有平台上都受支持，并且许多线性代数函数会将事物截断回本机精度。

另外，您使用的是什么 BLAS 库？numpy 和 octave 结果可能相同，因为它们使用相同的 BLAS 库。

最后，您可以将 numpy 代码简化为：

```
import numpy as np
A = np.array([[1,     -0.015, -0.025, -0.035],
              [0.015, 1,      0.035,  -0.025],
              [0.025, -0.035, 1,      0.015],
              [0.035, 0.025,  -0.015, 1]])
P = np.eye(4)*1e20
print A.dot(P.dot(A.T))
print A.dot(P).dot(A.T) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T15:47:50.267

`np.einsum`更接近 MATLAB

```
In [1299]: print(np.einsum('ij,jk,lk',A,P,A))
[[  1.00207500e+20   0.00000000e+00  -5.07812500e-02   0.00000000e+00]
 [  0.00000000e+00   1.00207500e+20   5.46875000e-02   0.00000000e+00]
 [ -5.46875000e-02   5.46875000e-02   1.00207500e+20   0.00000000e+00]
 [  0.00000000e+00   0.00000000e+00   0.00000000e+00   1.00207500e+20]] 
```

第 2 行和第 2 列中的非对角项不同，但在其他地方具有相同的 0。

使用双点，`P.dot(A.T)`添加产品时会产生舍入误差。那些传播到下一个`dot`。 `einsum`生成所有产品，只需一个总和。我怀疑 MATLAB 解释器会识别这种情况，并执行旨在最小化舍入误差的特殊计算。

[Numpy Matrix Multiplication U*B*UT Results in Non-symmetric Matrix](https://stackoverflow.com/questions/31415709/numpy-matrix-multiplication-ubu-t-results-in-non-symmetric-matrix/31417476#31417476) - 是一个更新的问题，具有相同的解释。

# java - 为什么playorm没有建立？

> ID：12326058
> 
> 赞同：3
> 
> 时间：2012-09-07T22:09:48.803
> 
> 标签：java, eclipse, filenotfoundexception, playorm

这是我到一个停止点的过程：

从使 WinExplorer 中的扩展可见开始，我破译了什么文件实际上是 .bat 文件，单击该文件，打开 cmd 提示符并通知“JAVA_HOME 环境变量设置不正确”。

因此，在将环境设置为 C:\Program Files\Java\Playorm\deanhiller-playorm-6558bf1 之前重新尝试了 .bat 文件和命令大约需要。4 秒编译

在 Eclipse 中，我启动了一个“新项目”，单击“现有 Ant Buildfile 中的 Java 项目”并从“bldfiles”文件夹中选择 build.xml 文件。Eclipse 中的“projectExplorer”窗口开始填充 javasrc、src 和 multiple.jar 文件。0 个错误、5 个警告和 4 个其他（如屏幕截图所示）

新手，不发图，[点这里](https://ws.elance.com/php/files/main/download.php?crypted=Y3R4JTNEcG1iJTI2ZmlkJTNENTMxMjE1ODElMjZyaWQlM0QtMSUyNnBpZCUzRDMzMjc2NDQ2 "1stPlayOrmJavaProjectBuild.jpg")看截图！

接下来右键com.alvazan.test包，选择Run As -> Junit Test，结果：11/55次运行，15次错误，0次失败。（如截图所示）

再一次，作为新手，不能发图，所以[点击这里](https://ws.elance.com/php/files/main/download.php?crypted=Y3R4JTNEcG1iJTI2ZmlkJTNENTMxMjIyMjQlMjZyaWQlM0QtMSUyNnBpZCUzRDMzMjc2NDQ2 "1stPlayOrm_com.alvazan.test_testRun.jpg")看截图！

“运行时异常”如下：

```
java.lang.RuntimeException: java.io.FileNotFoundException: 
    C:\Program%20Files\Java\Playorm\deanhiller-playorm-6558bf1\output\classes 
    (The system cannot find the path specified) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:55:17.713

看起来您在 playOrm 中遇到了错误（您可能希望将问题标记为 playorm，因为我们只订阅了标记为 playorm 的问题）。将项目移动到没有空格的路径作为解决方法

编辑：现在在 playOrm 中修复了错误，并将在一周内合并到主分支。

# c# - 为了惰性访问，你如何在本地封装一个字段值？

> ID：12326059
> 
> 赞同：3
> 
> 时间：2012-09-07T22:09:48.560
> 
> 标签：c#, inheritance, properties, encapsulation

以下片段展示了我最近经常遇到的一个问题。

基本上我想知道是否有比使用继承更好的解决方案来隐藏属性的支持值，如图所示。

作为一个附带问题，我的非编译解决方案所暗示的功能是否可能对未来版本的 C# 有好处？

```
// This is a service that supplies a value but doesn't want to be called 
// until needed.
static class Service
{
    public static int GetP()
    {
        Console.WriteLine ("doing work...");
        return 1;
    }
}

// This is a class that implements a property which calls the service
// the first time that property is accessed but nothing stops the
// same code from accidentally referencing the uninitialized backing value.
class C
{
    void F()
    {
        // Easy to accidentally reference backing value of property
        Console.WriteLine (this.p);
    }

    int p = 0;
    int P
    {
        get
        {
            if(p == 0)
                p = Service.GetP();
            return p;
        }
    }
} 
```

使用具有私有支持值的继承和受保护属性的解决方案。

```
// This class hides the backing value and exposed the property the derived class.
class CBase
{
    int p = 0;
    protected int P
    {
        get
        {
            if(p == 0)
                p = Service.GetP();
            return p;
        }
    }
}

class C1 : CBase
{
    void F()
    {
        // Now I can't see the backing value but I've used inheritance for the sole purpose of hiding it
        Console.WriteLine (this.P);
    }
} 
```

如果 const 可能位于实例级方法/属性的主体中，该方法/属性会延迟设置直到第一次运行时使用，那该怎么办？

```
class D
{
    int P
    {
        get
        {
            const int a = Service.GetP(); // Doesn't compile
            return a;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:14:02.043

如果您使用的是 .net 4，只需使用[Lazy](http://msdn.microsoft.com/en-us/library/dd642331.aspx)类

```
class C
{
    private Lazy<int> p = new Lazy<int>(() => Service.GetP());

    private int P
    {
        get
        {
            return p.Value;
        }
    }
} 
```

第一次访问 Lazy.Value 时，将调用提供给构造函数的函数来初始化值。

# android - 重复活动初始化和内存使用

> ID：12326061
> 
> 赞同：5
> 
> 时间：2012-09-07T15:00:47.010
> 
> 标签：android, memory, android-activity

感谢您按问题阅读，尽管这是一个非常菜鸟...

Android 系统如何管理关于活动初始化的内存，特别是如果一个活动是通过其他活动初始化的？这一直是我脑海中挥之不去的问题，但我将尝试用一个例子来说明：

假设我有 3 个活动 - **A**、**B**和**C** - 活动**A**是第一次启动应用程序时启动的活动。现在，假设活动**A**具有导航到活动**B**和**C**的按钮，并且这些活动是使用 Android 的`startActivity()`函数启动的，并传递给它一个`Intent`实例。同样，假设活动**B**和**C**具有启动对应活动的按钮......到目前为止有意义吗？

现在，如果我再使用`startActivity()`to：

*   从活动**A**开始活动**B**
***   然后从活动**B开始活动****C*****   然后从活动**C开始活动****A*****   然后无限期地重复上述步骤（所以绕圈子）******

 ******...假设Android系统会“知道”活动之前已经开始并且不会重新初始化它们并杀死越来越多的内存，而是调用类似`onRestart()`功能的东西，而不是“切换”回到已经初始化的活动实例？

一个非常简单的问题/问题的相当解释......如果已经在其他地方提出并回答了这个问题......我无法在其他任何地方找到明确的答案，即使在阅读 Android 开发人员的[Android 培训](http://developer.android.com/training/index.html)部分时也是如此地点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T16:58:46.037

答案是：视情况而定。:-)

**如果您对活动A**、**B**和**C**使用标准设置，您的应用程序将耗尽内存。原因是Android会将每个活动保留在“Back Stack”中，允许用户通过按下后退按钮来导航。

但是，如果您在文件中将 Activity 设置为`android:launchMode`，那么 Android 将通过调用 Activity 将 Intent 路由到正在运行的 Activity 实例。`singleTop``AndroidManifest.xml``onNewIntent()`

您可以在[Android 开发者文档](http://developer.android.com/guide/components/tasks-and-back-stack.html#TaskLaunchModes)中阅读有关启动模式的更多信息。******

# php - 传递给 PDOObject::bindParam 的变量是否需要先初始化？

> ID：12326062
> 
> 赞同：1
> 
> 时间：2012-09-07T22:10:00.707
> 
> 标签：php, pdo

传递给 bindParam 的变量是否需要初始化？

编辑：真实用例

```
$user = 0; //IS THIS REQUIRED?
$stmt = $db->prepare("SELECT * FROM Blah WHERE something=?");
$stmt->bindParam(0, $user);
foreach($array as $user)
   $stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:14:11.910

这取决于您绑定的参数类型。如果它是一个*out*参数，则不需要初始化它。如果它是*in*或*inout*参数，则出于显而易见的原因需要对其进行初始化。

在您的情况下，您应该真正初始化它，因为您在`WHERE`部件中使用它，即作为*in*参数。

从文档：

> ```
> bool PDOStatement::bindParam(mixed $parameter, mixed &$variable, ...) 
> ```
> 
> `variable`- 要绑定到 SQL 语句参数的 PHP 变量的名称。

# sql-server - 如果以前的值可用，实体框架 SQL Server 会乱序递增 Id 键

> ID：12326063
> 
> 赞同：0
> 
> 时间：2012-09-07T22:10:05.077
> 
> 标签：sql-server, asp.net-mvc, entity-framework, key, asp.net-mvc-4

我有一个 MVC4 网站，它有一个包含其帖子的 SQL Server 数据库。在每个帖子上都有一个`Next`和`Previous`按钮。这些按钮是从`databaseContext.Post.Count()`正负 1 计算出来的，并且（如果 item = 0 不显示`Previous`，反之亦然。）但是由于一些`Posts`被删除，因此中间有一些为空的点。这不会打扰我，除非现在由于某种原因数据库一直在向这些空白点添加新条目，所以`Count()`它们的实际值是关闭的，这导致最高值的 next 指向比实际存在的值更高的值（因为它超过了总数，请记住，即使它的 Id 也超过了总数。）

我知道我可以以编程方式检查此类问题，但是我想知道是否有办法更改 Id 键的创建方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:15:57.803

您假设生成的 ID 将是密集单调的，没有间隙。这是不正确的假设。生成的 ID 中总会有间隙。你永远不能假设计算记录会给你有效的 ID。如果您想要一个密集、单调的行号，请使用专用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)功能，但利用它进行导航是有问题的。

# c# - InvalidCastException 与 Windows 8 上的共享目标

> ID：12326069
> 
> 赞同：15
> 
> 时间：2012-09-07T22:10:19.357
> 
> 标签：c#, windows-8, windows-runtime, mvvm-light, .net

我正在尝试使用 Windows 8“Metro Styled Apps”、MVVM Light 并希望创建一个共享目标 - 到目前为止一切都很好。但是，如果我在 OnShareTargetActivated 方法中并且想要将一个项目添加到 ObservableCollection 中，我会在类类型和 COM 对象之间捕获一个 InvalidCastException。

> Das COM-Objekt des Typs "System.Collections.Specialized.NotifyCollectionChangedEventHandler" 在 den Klassentyp "System.Collections.Specialized.NotifyCollectionChangedEventHandler" umgewandelt 下。Instanzen von Typen, die COM-Komponenten repräsentieren, können nicht in andere Typen umgewandelt werden, die keine COM-Komponenten repräsentieren。Eine Umwandlung in Schnittstellen ist jedoch möglich, sofern die zugrunde liegende COM-Komponente QueryInterface-Aufrufe für die IID der Schnittstelle unterstützt。

英文版：

> 无法将类型为“System.Collections.Specialized.NotifyCollectionChangedEventHandler”的 COM 对象转换为类类型“System.Collections.Specialized.NotifyCollectionChangedEventHandler”。表示 COM 组件的类型的实例不能转换为不表示 COM 组件的类型；但是，只要底层 COM 组件支持对接口的 IID 的 QueryInterface 调用，它们就可以转换为接口。

现在我有点困惑，不知道如何正确处理这种行为。

```
MainViewModel main1 = new ViewModelLocator().Main;
MainViewModel main2 = new MainViewModel();
var conversation = new ConversationViewModel();
conversation.Messages.Add(new MessageViewModel { Image = img, Text = "Share" });
main1.Conversations.Add(conversation); // error InvalidCastException 
main2.Conversations.Add(conversation); // no error 
```

`img`新创建的 BitmapImage在哪里

视图模型定位器

```
public class ViewModelLocator
{
    /// <summary>
    /// Initializes a new instance of the ViewModelLocator class.
    /// </summary>
    public ViewModelLocator()
    {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

        SimpleIoc.Default.Register<MainViewModel>();
        SimpleIoc.Default.Register<UserViewModel>();
        SimpleIoc.Default.Register<UriViewModel>();
    }

    public MainViewModel Main
    {
        get
        {
            return ServiceLocator.Current.GetInstance<MainViewModel>();
        }
    }

    //...
} 
```

堆栈跟踪：

> 在 System.StubHelpers.StubHelpers.GetCOMIPFromRCW_WinRTDelegate(Object objSrc, IntPtr pCPCMD, IntPtr& ppTarget)
> 在 System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
> 在 System.Collections.ObjectModel.ObservableCollection 1.InsertItem(Int32 索引, T 项目）在 System.Collections.ObjectModel.Collection`1.Add（T 项目）`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
> at System.Collections.ObjectModel.ObservableCollection`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:16:18.960

而不是显式转换使用“as”转换，听起来服务定位器返回的实例不是`MainViewModel`对象，将该行更改为

```
return ServiceLocator.Current.GetInstance() as MainViewModel; 
```

它的行为可能不同，如果实例不是 a`MainviewModel`那么它将返回`null`，这将帮助您调试为什么`null`从服务定位器返回实例。

# asp.net - ASP.NET MVC 3 - 单用户聊天

> ID：12326070
> 
> 赞同：1
> 
> 时间：2012-09-07T22:10:25.387
> 
> 标签：asp.net, asp.net-mvc-3, chat

我有很多麻烦，因为我不知道如何开始这件事。

我的 MVC Web 应用程序中需要类似“聊天”的内容，但无法在所有访问者之间共享聊天。我的意思是，我只需要一个页面或部分视图或任何你能想象到的东西，我的网站访问者在哪里写东西，让我们问一个关于网站销售的产品的问题；然后会弹出一个小窗口给卖家或任何可能正在观看或处理聊天的人，他/她会回复该消息。

例如，我需要像 facebook 聊天这样的东西，但我不想使用 google 或 facebook 身份验证，而是使用我自己的身份验证。部署的主要方面是当通信两端都在线时，通信应该是“同步”或类似的；而当一端离线时，通信应该是“异步的”，就像邮件消息一样。这么说，“类似facebook”的聊天，我的意思是它的所有简单或常见的功能，要知道：聊天和消息记录。

我真的很抱歉写的凌乱，我不知道该怎么解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:37:50.907

不知道你的问题是什么，但我会通过在前端使用 jQuery 来解决这个问题，然后将聊天日志存储在后端的数据库中。确保聊天日志包含涉及的用户和每条消息的时间戳。

在前端设置超时事件以检查新消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:17:52.217

你可以从这里开始...

[http://www.dreamincode.net/forums/topic/33396-basic-clientserver-chat-application-in-c%23/#/](http://www.dreamincode.net/forums/topic/33396-basic-clientserver-chat-application-in-c%23/#/)

我不相信它包括以后的持久消息，但可以通过一些修改来完成。

从 .zip 重命名为 .rar 以打开并将其包含在解决方案中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T13:14:00.890

我终于设法使用**SignalR**做到了这一点......它真的很整洁而且很棒！

I'm sorry I don't give you further details, I don't remember from what link I took the code. I also had to do some minor tweaks in order to get a 1-to-1 functionality.

# java - ant - 如何在类路径中包含 .java 文件

> ID：12326072
> 
> 赞同：3
> 
> 时间：2012-09-07T22:10:34.387
> 
> 标签：java, ant, classpath, build.xml

*请先注意：*我不需要包含 .jar 文件！

我想用 ant 包含来自另一个 java 项目的 .java 文件。但我不知道怎么做，谷歌也不知道。我的 build.xml 看起来像这样：

```
<project>

    <!-- Main properties -->
    <property name="projectname"    value="rasco" />
    <property name="mainclass"      value="de.beyermatthias.rasco.Rasco" />
    <property name="lib.dir"        value="./lib/java-speech-api/src/" />

    <path id="classpath">
            <pathelement path="${lib.dir}"/>
    </path>

    <!-- Tasks -->
    <!-- Clean Task -->
    <target name="clean">
            <delete dir="build" />
    </target>

    <!-- Compile Task -->
    <target name="compile" depends="clean" >
            <mkdir dir="build/classes" />
            <javac srcdir="src" destdir="build/classes/">
            </javac>
    </target>

    <!-- Jar Task -->
    <target name="jar" depends="compile" >
            <mkdir dir="build/jar" />
            <jar destfile="build/jar/${projectname}.jar" basedir="build/classes/">
                    <manifest>
                            <attribute name="Main-Class" value="${mainclass}" />
                    </manifest>
            </jar>
    </target>

    <!-- Run Task -->
    <target name="run">
            <java jar="build/jar/${projectname}.jar" fork="true" />
    </target>
</project> 
```

我的项目层次结构是这样的：

```
 .
 ├── build
 │   └── classes
 ├── build.xml
 ├── lib
 │   └── java-speech-api
 │       ├── CHANGELOG.markdown
 │       ├── CREDITS.markdown
 │       ├── java-speech-api.iml
 │       ├── README.markdown
 │       └── src
 │           ├── com
 │           │   └── darkprograms
 │           │       └── speech
 │           │           ├── microphone
 │           │           │   └── Microphone.java
 │           │           ├── recognizer
 │           │           │   ├── FlacEncoder.java
 │           │           │   ├── GoogleResponse.java
 │           │           │   └── Recognizer.java
 │           │           └── synthesiser
 │           │               └── Synthesiser.java
 │           └── META-INF
 │               └── MANIFEST.MF
 └── src
     └── de
         └── beyermatthias
             └── rasco
                 └── Rasco.java 
```

大多数教程都谈到在类路径中包含 .jar 文件，但我需要包含 .java 文件，如您所见。我希望你能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:11:52.623

您可以包含已编译的 .class 文件的文件夹，但不能包含 .java 源文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T08:01:23.080

您可以在 javac 中使用多个 src 元素。这看起来像：

```
<javac destdir="some_dir" classpath="some_classpath" ... >
   <src path="some_source" />
   <src path="some_other_source"/>
 </javac> 
```

# custom-controls - 自定义绘制组合框以减小箭头的大小 [C++ Builder XE/2]

> ID：12326075
> 
> 赞同：0
> 
> 时间：2012-09-07T22:10:59.480
> 
> 标签：custom-controls, c++builder, builder, vcl

我有一个下拉组合框的字符串（水平）。考虑到其中的数据非常小，下拉箭头占用了大量空间，让整个东西看起来很丑。

所以我想知道让“箭头”只在鼠标悬停时打开，或者类似的东西。但我不希望其他人看到它并让他们的眼睛流血。我知道，我知道，UI 标准是有原因的，但这对我来说似乎是个例外。我假设如果有人想要更改数据，他们至少会将鼠标悬停在它上面，如果不点击它。

目标是 C++ Builder XE2，但 Visual C++ 目标示例也很好。我不期望一个完整的工作示例，只是朝着正确的方向推动（当然，除非有一个完全工作的组件已经在等待拖放，在这种情况下没有必要重新发明）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:42:13.633

您无法控制下拉箭头。它是由操作系统管理的底层组合框窗口的一部分，而不是 VCL。

我建议你做的是使用`TEdit`而不是`TComboBox`，然后创建一个单独的，上面`TForm`有一个`TListBox`。当用户将鼠标悬停在 a`TEdit`上或单击它时，您可以显示`TForm`并更新其`TListBox`以包含相关项。如果用户单击 中的某个项目`TListBox`，您可以将该字符串值分配给当前`TEdit`. 这使您可以更好地控制显示器的外观`TListBox`，让您可以更好地控制其屏幕定位，甚至可以通过`TForm.AlphaBlend`属性添加一些特殊效果，例如淡入/淡出等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:34:51.413

使用 TLabel 而不是 TEdit（因为用户永远不需要直接编辑它），当用户将鼠标悬停在标签上时，它会在完全相同的位置显示一个 TComboBox，因此很明显您可以单击它。一旦鼠标离开该区域，TComboBox 就会隐藏，只显示标签。

或者，有一个 TEdit，我在自己身上显示箭头，并在单击时显示一个 TListBox（与上面发布的答案非常相似，但没有表单）

# java - Spring逗号分隔的bean引用列表

> ID：12326076
> 
> 赞同：4
> 
> 时间：2012-09-07T22:11:01.373
> 
> 标签：java, spring

在 Spring 中，是否可以将逗号分隔的 bean 引用列表提供给另一个 bean，理想情况下不需要任何自定义属性编辑器。此列表来自我无法控制的占位符。

例如（不起作用）：

```
<bean id="bean1" class="java.lang.Integer />
<bean id="bean2" class="java.lang.Integer />

<bean class="customclass">
  <constructor-arg><ref bean="bean1,bean2" /></constructor-arg>
</bean> 
```

这将等同于：

```
<bean id="bean1" class="java.lang.Integer />
<bean id="bean2" class="java.lang.Integer />

<bean class="customclass">
  <constructor-arg>
    <list>
      <ref bean="bean1"/>
      <ref bean="bean2"/>
    </list>
  </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T19:43:06.360

可以使用这种方法：

考虑一个带有如下条目的属性文件：

`test.properties`：

```
beanlist1=#{{@bean1,@bean2}} 
```

现在您将能够执行此操作：

```
<context:property-placeholder location="test.properties"/>
<bean id="bean1" class="java.lang.Integer />
<bean id="bean2" class="java.lang.Integer />

<bean class="customclass">
  <constructor-arg value="${beanlist}></constructor-arg>
</bean> 
```

这与您想要的非常接近（表示略有不同 -`#{{@bean1,@bean2}}`而不是`bean1,bean2`）。

另一种方法如下：

```
<bean class="customclass">
  <constructor-arg value="#{{@bean1,@bean2}}"></constructor-arg>
</bean> 
```

两者都使用 Spring-EL 表达式来表示列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:29:58.443

不是直接的，但编写一个工厂 bean 来为你做这件事很容易。它需要将逗号分隔的字符串作为属性，将其拆分，并为每个名称返回`ManagedList`包含 a 的 a 。`RuntimeBeanReference`然后可以以通常的方式将其注入到其他 bean 中，并且将以您需要的方式解析引用。

# iphone - iOS 中的日历页面

> ID：12326079
> 
> 赞同：0
> 
> 时间：2012-09-07T22:11:23.760
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

如何在我的应用程序中添加带有日历的视图控制器？查看所有其他示例，我不能使用 KAL 或 TAPKU 库，因为它们不断出现错误，而且我也不想依赖外部代码。任何简单的代码来展示我的日历。太感谢了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:40:17.483

当前的 sdk 是不可能的，您需要使用自己的日历或第三方。在此阶段，没有发布的日历 URL 可让您执行此操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T03:30:52.783

我也想在我的一个应用程序中执行此操作，但遗憾的是，此功能并未内置于 iOS 中。

# sql-server - 数据复制 vs 服务总线 vs App Fabric vs ...？

> ID：12326080
> 
> 赞同：0
> 
> 时间：2012-09-07T22:11:39.347
> 
> 标签：sql-server, architecture, soa

我正在构建一个需要使用源数据库中的数据的应用程序。源数据库有几个问题，包括：

*   性能问题
*   带有糟糕的键、命名约定等的遗留结构。
*   我的应用程序不关心的大量数据

我想设置一个特定于应用程序的 SQL Server 数据库。新数据库将填充来自源数据库（以及来自一些其他源系统）的数据子集。数据将始终以一种方式从源数据库移动到特定于应用程序的数据库（即，数据不会同步回源）。它将具有与源数据库不同的 DDL 模型。数据不需要绝对实时同步，但超过几分钟的延迟可能会导致问题。我应该如何将数据从源数据库移动到应用程序数据库？我应该使用

*   复制
*   编写自定义 SSIS 包
*   抽象到更高级别的 SOA 解决方案，如 nServiceBus、AppFabric 等？
*   其他一些想法？

每个人的优点/缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:36:14.030

在我看来，您不需要像 NServiceBus 这样的消息传递服务 - 这将涉及修改遗留系统以在数据更改时发布事件，我希望您不想进入。因为在您的情况下，您的本地数据存储稍微过时是可以接受的，所以 SSIS 包可能是可以接受的。

但是，如果源数据库非常大，这可能是个问题，因为您每隔几分钟就会这样做。此外，如果旧系统的用户已经遇到性能问题，那么每隔几分钟运行一次 SSIS 包也无济于事。也许您可以引入源数据的时间戳，以便它只复制新的/修改的数据？

如果源数据非常大并且性能是一个严重的问题，那么 NServiceBus 可能是一个好主意。您还可以考虑 Mass Transit 或您自己基于 MSMQ 构建的简单解决方案。但这将意味着让您对遗留代码感到厌烦。

# ruby-on-rails - 使用除主键以外的列的导轨关联

> ID：12326088
> 
> 赞同：0
> 
> 时间：2012-09-07T22:12:39.933
> 
> 标签：ruby-on-rails, database-design, activerecord, associations, schema-design

我对 Rails 很陌生，想利用 ActiveRecord 提供的关联来尝试建立一个新的项目和模式。我有两个模型，用户和问题。当管理用户设置用户时，我有一个带有类别列表复选框的表单。我希望这些类别映射到特定问题，以便稍后询问设置用户。我的想法是我有一个映射表 user_to_categories，它可以让我从用户那里得到必要的问题。但是问题表将具有 question_id 的主键，因此 has_many :through 似乎在这里不起作用。由于许多问题可以属于同一类别，因此 category_id 将只是问题表中的另一列。关于如何设置它以利用 Rails 和活动记录关联的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:16:14.063

用户和类别之间的多对多，问题属于类别。现在，当您通过 UI 传递 category_ids 添加用户选择类别时，

# java - 变压器错误

> ID：12326091
> 
> 赞同：0
> 
> 时间：2012-09-07T22:13:13.327
> 
> 标签：java, xml, csv

我有一个进行简单转换的对象。我创建了一个将 XML 数据转换为 CSV 的样式表。转换后，将创建一个 CSV 文件，但内容为空。

```
public class Simplex
 {

private String xmlFile ;
private String xslFile;
private String  outputFile;

/**
 * Constructor for objects of class Simple
 */
   public Simplex(String xmlFile, String xslFile,String outputFile)
  {
   this.xmlFile = xmlFile;
    this.xslFile = xslFile;
   this.outputFile= outputFile;
  }

 public String simplexTransform() throws    
TransformerException,TransformerConfigurationException,FileNotFoundException,
IOException

  {String mystring = "";

  TransformerFactory tFactory = TransformerFactory.newInstance();
 Transformer transformer = tFactory.newTransformer(new StreamSource(xslFile));
 transformer.transform(new StreamSource(xmlFile), new StreamResult(new    
FileOutputStream(outputFile)));
  return mystring = "*Data Has Been Transformed,Check ouput File *";
  } 
} 
```

# r - 如何从现有的 R 包中获取 Makefile？

> ID：12326092
> 
> 赞同：1
> 
> 时间：2012-09-07T22:13:19.570
> 
> 标签：r, makefile, packages

我喜欢 R 中的 GBM 包。

我无法让 R 的内存管理与我的机器/数据集/任务的组合一起使用，原因已在其他地方介绍过，出于本问题的目的，应将其视为题外话。

我想从 R 中“撕掉”GBM 算法并将其重建为独立代码。

不幸的是，包 tarball 中没有 Makefile（或者实际上我见过的任何 R 包 tarball）。有没有地方可以查找 R 包的直接 Makefile？还是我真的必须回到零基础，为未来漫长而痛苦的旅程编写自己的 Makefile？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T22:22:02.173

正如亨利·斯宾塞 (Henry Spencer) 打趣的那样：“那些不了解 Unix 的人注定要重新发明它，很糟糕。”

R 包没有 Makefile，因为R在构建包时会使用当前 R 安装的默认值和包中的设置（通常通过文件）*即时创建一个*`Makevars`Makefile 。

运行通常的命令`R CMD INSTALL foo_1.2.3.tar.gz`，您将看到*生成的 Makefile*在构建过程中的效果。在最坏的情况下，您总是可以从复制和粘贴开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:31:42.457

您还可以查看`CMake`哪些可以很容易地为您创建 makefile。我花了最少的时间让它为我的项目工作。

# solr - 在 Solr 中对多值参数使用过滤器查询，重复文档作为响应

> ID：12326093
> 
> 赞同：1
> 
> 时间：2012-09-07T22:13:28.027
> 
> 标签：solr

我在对 Solr 的请求中使用 fq 参数时收到奇怪的问题

```
curl '127.0.0.1:8080/solr/app/select?rows=0&start=0&q=app+AND+categoryId:20'
<?xml version="1.0" encoding="UTF-8"?>
<response>
<lst name="responseHeader"><int name="status">0</int><int name="QTime">1</int>
<lst name="params"><str name="start">0</str><str name="q">app AND categoryId:20</str>
<str name="rows">0</str></lst></lst>
<result name="response" numFound="42236" start="0"></result>
</response> 
```

和第二个请求

```
curl '127.0.0.1:8080/solr/app/select?rows=0&start=0&q=app+AND+categoryId:20&fq=categoryId:20'
<?xml version="1.0" encoding="UTF-8"?>
<response>
<lst name="responseHeader"><int name="status">0</int><int name="QTime">1</int>
<lst name="params"><str name="start">0</str><str name="q">app AND categoryId:20</str>
<str name="fq">categoryId:20</str><str name="rows">0</str></lst></lst>
<result name="response" numFound="69480" start="0"></result>
</response> 
```

不同之处仅在于使用附加参数 &fq=categoryId:20 ，但正如您所见，此过滤器也存在于主查询中，并且必须对结果没有影响。

我检查了响应并在第一个请求中发现了很多重复项。

标签还显示 categoryId=20 的 42236 个文档，

那么为什么用 &fq=categoryId:20 查询返回这么多（和重复）文档呢？PS所有其他类别都正确。

方案的一部分：

```
 <field name="id" type="int" indexed="true" stored="true" required="true"/>
    <field name="title" type="text_general" indexed="true" stored="true" required="true"/>
    <field name="description" type="text_general" indexed="true" stored="false" required="true"/>
    <field name="categoryId" type="int" indexed="true" stored="false" required="true" multiValued="true"/>
    <field name="tags" type="string" indexed="true" stored="false" required="false" multiValued="true"/>
    <field name="type" type="int" indexed="true" stored="false" required="true"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:04:38.040

可能是 Facet Caching 删除记录问题。检查[SOLR-3793](https://issues.apache.org/jira/browse/SOLR-3793)

# javascript - 使用 jQuery 在类的每个实例上添加随机 CSS

> ID：12326094
> 
> 赞同：2
> 
> 时间：2012-09-07T22:13:29.413
> 
> 标签：javascript, jquery, css, random, positioning

我需要做的是向`.project_content`我的 HTML 中的每个实例添加三种 CSS 样式中的一种，并且需要为每个实例随机选择样式。

三种样式如下：
`float:left`
`float:right`OR
`margin:auto`+ `width:x`（这里计算的是宽度，`.project_content`是计算`x`出来的宽度）

现在我有这个：

```
<script type="text/javascript">
$(document).ready(function(){
    var floats         = ["right","left"];                
  var rand = Math.floor(Math.random()*floats.length);           
  $('.project_content').css("float", floats[rand]);
});​​​​​​​​​​​​​
</script> 
```

这个脚本为我做的所有事情都是应用`float:left`或`float:right`应用于所有实例，`.project_content`而不是为每个实例选择右或左。

如何让我的脚本为每个实例选择一个随机变量，`project_content`以及如何将`margin:auto`+ 计算结果添加`width`到组合中？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T22:17:10.197

您需要为集合中的*每个*元素获取随机样式，而不是为*整个*集合获取单个随机值。这可以使用 来完成[`.css( propertyName, function(index, value) )`](http://api.jquery.com/css/#css2)，因为*每个*匹配的元素都会调用该函数：

```
$('.project_content').css("float", function () {
  var rand = Math.floor(Math.random() * floats.length);
  return floats[rand];  
})​; 
```

**[​演示](http://jsfiddle.net/pWpAB/)** 。

要添加`margin`和`width`混合，您不能再使用`css()`（因为您需要修改多个属性之一），但您可以使用`.each()`：

```
var styles = [ "left", "right", "margin" ];
$('.project_content').each(function () {
  var randomStyle = styles[Math.floor(Math.random() * floats.length)];
  if (randomStyle == "left" || randomStyle == "right") {
    $(this).css('float', randomStyle);
  } else { // margin
    $(this).css('margin', 'auto')
           .css('width', your_calculated_width);
  }
})​; 
```

# ruby-on-rails - Capybara-selenium 故障并重定向 example.com/ 当没有一切都是绿色的

> ID：12326096
> 
> 赞同：3
> 
> 时间：2012-09-07T22:13:55.017
> 
> 标签：ruby-on-rails, selenium, rspec, capybara, capybara-webkit

当我使用 gem 'selenium-webdriver' 运行测试时（带有“ `describe "with valid information", :js => true do`”）

规范/请求/post_pages_spec.rb

```
require 'spec_helper'

describe "Post pages" do
  subject { page }  
  category = Category.create(name: "Food")
  let(:post) { FactoryGirl.create(:post) }
     describe "with valid information", :js => true do
      it "should create a post" do
        fill_in "Title", with: post.title
        fill_in "Content", with: post.content
        fill_in "Publish", with: Date.today
        check "Food"  
        expect { click_button "Create Post" }.to change(Post, :count).by(1)
      end
    end
  end 
```

我在规范中遇到错误：

```
Failures:

  1) Post pages post creation with valid information should create a post
     Failure/Error: expect { click_button "Create Post" }.to change(Post, :count).by(1)
       count should have been changed by 1, but was changed by 0
     # ./spec/requests/post_pages_spec.rb:35:in `block (4 levels) in <top (required)>' 
```

日志/test.log

```
Started POST "/posts" for 127.0.0.1 at 2012-09-08 01:54:52 +0400
Processing by PostsController#create as HTML
  Parameters: {"utf8"=>"✓", "post"=>{"title"=>"Lorem ipsum", "content"=>"Lorem ipsum", "category_ids"=>["", "1"], "publish"=>"2012-09-08"}, "commit"=>"Create Post"}
  [1m[35mCategory Load (0.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (5013.9ms)[0m  INSERT INTO "posts" ("content", "created_at", "publish", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["content", "Lorem ipsum"], ["created_at", Fri, 07 Sep 2012 21:54:52 UTC +00:00], ["publish", Sat, 08 Sep 2012], ["title", "Lorem ipsum"], ["updated_at", Fri, 07 Sep 2012 21:54:52 UTC +00:00]]
SQLite3::BusyException: database is locked: INSERT INTO "posts" ("content", "created_at", "publish", "title", "updated_at") VALUES (?, ?, ?, ?, ?)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
SQLite3::BusyException: cannot rollback transaction - SQL statements in progress: rollback transaction
Completed 500 Internal Server Error in 5019ms
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "posts" 
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "posts" ("content", "created_at", "publish", "title", "updated_at") VALUES (?, ?, ?, ?, ?)  [["content", "Lorem ipsum"], ["created_at", Fri, 07 Sep 2012 21:54:57 UTC +00:00], ["publish", Sat, 08 Sep 2012], ["title", "Lorem ipsum"], ["updated_at", Fri, 07 Sep 2012 21:54:57 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m

Started GET "/posts" for 127.0.0.1 at 2012-09-08 01:54:57 +0400
Processing by PostsController#index as HTML
  [1m[35mPost Load (0.2ms)[0m  SELECT "posts".* FROM "posts" 
  [1m[36mCategory Load (0.2ms)[0m  [1mSELECT "categories".* FROM "categories" INNER JOIN "categorizations" ON "categories"."id" = "categorizations"."category_id" WHERE "categorizations"."post_id" = 1[0m
  Rendered layouts/_navigation.html.erb (1.1ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 14.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "posts" 

Started DELETE "/posts/1" for 127.0.0.1 at 2012-09-08 01:54:57 +0400
Processing by PostsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPost Load (0.2ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "posts" WHERE "posts"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/posts
Completed 302 Found in 3ms (ActiveRecord: 0.5ms) 
```

但是当我在没有 Selenium ( `describe "with valid information" do`)的情况下运行测试时，
测试是绿色的。

为什么 Selenium 不创建 Post 并使测试变为红色？
如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T12:01:28.843

解决方案是 Capibara 与 Rspec 的特定工作。
我将以下文件添加到`spec/support/database_cleaner.rb`

```
RSpec.configure do |config|
  config.use_transactional_fixtures = false

  config.before :each do
    if Capybara.current_driver == :rack_test
      DatabaseCleaner.strategy = :transaction
    else
      DatabaseCleaner.strategy = :truncation
    end
    DatabaseCleaner.start
  end

  config.after do
    DatabaseCleaner.clean
  end
end 
```

在中添加了宝石`Gemfile:`

```
group :development, :test do
  gem 'database_cleaner'
end 
```

$> 捆绑安装

我在下面的行中添加了评论`spec/spec_helper.rb`

```
RSpec.configure do |config|
  #config.use_transactional_fixtures = true
end 
```

测试变为绿色。

# sublimetext2 - Sublime Text subl 快捷方式不起作用：ln：/Users/edmundmai/bin/subl：没有这样的文件或目录

> ID：12326098
> 
> 赞同：11
> 
> 时间：2012-09-07T22:14:07.480
> 
> 标签：sublimetext2

嗨，我正在尝试为 sublime text 2( `subl`) 设置终端快捷方式，但它不起作用。我正在遵循[https://github.com/mhartl/rails_tutorial_sublime_text/blob/master/README.md](https://github.com/mhartl/rails_tutorial_sublime_text/blob/master/README.md)上的指示，但无法通过第一步。

当我输入：

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl 
```

我收到错误

```
ln: /Users/edmundmai/bin/subl: No such file or directory 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-07T22:38:53.220

这可能意味着没有`~/bin`目录。这也可能意味着它不在`PATH`. 所以继续下一个建议：

```
sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /usr/bin/subl 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-23T16:27:57.540

或者，您可以将其放入本地垃圾箱：

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

它可能需要事先创建 bin：

```
mkdir /usr/local/bin 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T20:06:08.613

另一种方法是将 subl 定义为您的 shell 别名

[http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/#Open_files_from_command-line](http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/#Open_files_from_command-line)

这是推荐的方法，因为它违反了在 /usr/bin 中添加符号链接的最佳做法

# css - 如何使用滚动条制作一个列表，使每个项目的宽度保持一致

> ID：12326101
> 
> 赞同：2
> 
> 时间：2012-09-07T22:14:24.160
> 
> 标签：css, list, width, scrollbar

danielsherson 建议使用以下代码来制作列表最大项目的确切宽度。如果列表的长度不太长，它会很好用。我尝试提供高度，但代码不补偿滚动条的宽度。关于谁来完成这件事的任何想法？

```
<style>
  ul, li{float:left;margin;padding:0;display:block;}
  li {clear:left;width:100%;margin:1px 0;background:#03a;}
</style>
<ul>
  <li>Item 1</li>
  <li>Item 2 which is longer</li>
  <li>Item 3</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:26:44.050

解决此类情况的一种方法是确保始终使用此规则的滚动条：

```
body {
    overflow-y: scroll;
} 
```

不需要时滚动条会变灰。这样，您就可以在设计页面时少考虑一个变量。

# events - C# 将参数传递给事件处理程序

> ID：12326106
> 
> 赞同：0
> 
> 时间：2012-09-07T22:14:56.357
> 
> 标签：events, parameters, handler

我想到了一个问题。假设我想将变量 theVar 传递给下面的事件处理程序声明

```
new EventHandler<AsyncCompletedEventArgs>(evHandler) 
```

并在下面的定义中接收它：

```
public void evHandler(object sender, EventArgs e)
{
} 
```

我该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T00:47:38.907

如果您是编写引发事件的代码的人，Hopkinson 先生在他的回答中说得非常好。您需要一个带有属性的自定义 EventArgs 来表示您希望传递的数据。

但是，如果您只是消费事件而不是提出它，那么您的选择就会更加有限。

但是，由于您预计会从您的事件中接收 AsyncCompletedEventArgs，因此您确实有一个选择：AsyncCompletedEventArgs 的 UserState 属性。这是您在调用最终导致事件被触发的异步方法时提供的属性。它可以是您选择的任何对象。您在调用异步方法时提供它，当方法调用完成时，事件在事件参数属性中将它返回给您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:29:08.807

定义 EventArgs 的后代

例如

```
public class MySpecialEventArgs :EventArgs
{
   public int theVar {get; private set;}

   public MySpecialEventArgs(int argVar)
   {
      theVar = argVar;
   }

} 
```

然后，当您引发事件时，将上述事件之一而不是 EventArgs

添加处理程序时，e 将是 MySpecialEventArgs。

# c# - 是否可以将 Gtk.TreeModelFilter 与可编辑列一起使用？

> ID：12326109
> 
> 赞同：0
> 
> 时间：2012-09-07T22:15:04.467
> 
> 标签：c#, mono, gtk#

我正在尝试实现一个`TreeView`可以过滤和编辑的 ，但没有成功。`Gtk.TreeModelFilter`没有实现`SetValue()`功能。我试图创建一个`Gtk.TreeModelFilter`以它为基础的新类并创建一个新`SetValue()`方法，但它没有被调用`TreeView`（总是`Gtk.TreeModelFilter`调用 's 方法）。我怎样才能实现一个过滤器`TreeView`可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:31:36.273

您要设置的值是多少？

树视图 ui 对象通常需要您在渲染之前设置对象树。有时你通过树 api 构建新叶子；有时，它是一个对象。

树对象示例：

```
{ name: 'Maurice', 
  children: [ 
    { name: 'Mark', children: [ 
      { name: 'Molly', children: [] },
      { name: 'Drew', children: [] },   
      { name: 'Craig ', children: [] }]}]} 
```

# c++ - 这个 typedef 到底是什么意思？

> ID：12326111
> 
> 赞同：2
> 
> 时间：2012-09-07T22:15:57.510
> 
> 标签：c++, typedef

```
typedef const char* Argv[3+ 8]; 
```

我在这一点上的猜测`[3+8]`是创建一个 Argv 类型的匿名数组（它的类型为 const char*）。如果我是对的，匿名数组部分基本上是没有意义的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T22:18:19.243

它定义`Argv`为“11 个 const char* 数组”的同义词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:21:27.410

如同

```
const char* somevar[11]; 
```

或 IOW

```
Argv somevar; 
```

# php - PHP 数组值

> ID：12326114
> 
> 赞同：-2
> 
> 时间：2012-09-07T22:16:11.163
> 
> 标签：php, multidimensional-array

我有这个数组

数组的 print_r

```
Array (
  [@attributes] => Array (
    [from] => 14073377593@s.whatsapp.net
    [id] => 1346984983-2
    [type] => chat
    [t] => 1346985039
  )
  [notify] => Array (
    [@attributes] => Array (
      [name] => SISTEMA SMS
    )
  )
  [request] => Array ( )
  [body] => Hola
) 
```

我需要这个值

```
[body] => Hola 
```

有人可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:18:46.450

```
echo $array['body']; 
```

你试过什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:19:00.693

它住在`$array["body"]`

看看类似这样的东西，了解关联数组的旋风之旅：http: [//phpjournal.blogspot.co.uk/2004/11/php-associative-arrays.html](http://phpjournal.blogspot.co.uk/2004/11/php-associative-arrays.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T22:22:12.600

然而，作为您的多维数组，该`body`属性位于第一级：

```
Array ( 
    [@attributes] => Array ( 
        [from] => 14073377593@s.whatsapp.net
        [id] => 1346984983-2
        [type] => chat
        [t] => 1346985039 
    )
    [notify] => Array ( 
        [@attributes] => Array (
            [name] => SISTEMA SMS
        )
    ) 
    [request] => Array ( ) 
    [body] => Hola
) 
```

因此，作为提示，`print_r`使用 HTML 标记包装您的调用，[`<pre>`](http://www.w3.org/wiki/HTML/Elements/pre)以便读取格式正确的输出：

```
 echo '<pre>';
 print_r($stuff);
 echo '</pre>'; 
```

这可能看起来很愚蠢，但它为我节省了很多时间。

# python - 为什么 QVariant.toFoo() 和 QVariant.convert(Foo) 不等效？

> ID：12326117
> 
> 赞同：0
> 
> 时间：2012-09-07T22:16:23.350
> 
> 标签：python, qt, pyqt

我正在尝试将 QVariant 转换为 QSize。

```
from PyQt4.QtCore import (                                                     
    QVariant,                                                                  
    QSize,                                                                      
    )                                                                          

s = QSize(4,3)                                                                 
x = QVariant(s)                                                                

#Check, and hopefully do conversion                                            
print x.canConvert(QVariant.Size) #True                                           
print x.convert(QVariant.Size)    #True                                           
print type(x)                     #<class 'PyQt4.QtCore.QVariant'>...why??                
print type(x.toSize())            #<class 'PyQt4.QtCore.QSize'> 
```

为什么我必须做 x.toSize 才能使 x 的类型成为 QSize？我预计 x.convert() 会使 x 成为 QSize 的实例。

这对我没有多大帮助...... [http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qvariant.html#convert](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qvariant.html#convert) ...因为它说convert（）“投射请求类型的变体......”

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T23:22:26.043

您误解了[QVariant.convert](http://doc-snapshot.qt-project.org/4.8/qvariant.html#convert)的目的。

它转换*变量值*的类型，而不是`QVariant`本身。

展示：

```
>>> from PyQt4.QtCore import QVariant
>>> v = QVariant(100)
>>> v.typeName()
'int'
>>> v.convert(QVariant.String)
True
>>> v.typeName()
'QString' 
```

`to*()`函数返回转换为请求类型的变量*值*（如果可能），但不更改`QVariant`自身的当前类型：

```
>>> v.toInt()
(100, True)
>>> v.typeName()
'QString' 
```

# windows - 是否可以将 SVN 存储库作为 Windows 中的普通文件夹进行探索（例如，挂载为远程驱动器）？

> ID：12326127
> 
> 赞同：1
> 
> 时间：2012-09-07T22:17:42.697
> 
> 标签：windows, svn, tortoisesvn, webdav

所以，我需要为我们的团队做一个文件存储。我也有SVN服务器。对我们的项目进行回滚和控制谁创建或删除文件的机会是非常必要和重要的。

有任何想法吗？也许没有SVN。我可以使用 WebDAV 进行连接，但只能在只读模式下（因为其中不支持 LOCKS）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:41:01.500

您可以设置 SVN 服务器以允许这样做。阅读 SVN 书中关于[WebDAV 和 Autoversioning的章节](http://svnbook.red-bean.com/en/1.7/svn.webdav.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:46:22.920

那么，您想要的是回滚更改的能力，并限制谁可以进行更改，而无需签入和签出文件？

也许 Subversion 不适合你。我已经与[Dropbox](http://dropbox.com)进行了类似的共享，现在[BoxNet](http://box.com)应该类似于 Steroids 上的 Dropbox。Dropbox（我假设 box.net 也是）有一些非常好的功能：

*   您可以设置特定团队之间的文件夹共享。这样，您就可以说出谁可以访问这些文件，谁不能访问这些文件。
*   Dropbox 会自动保存文件的每个版本，因此您可以随时返回到以前的版本——即使该文件已被删除。
*   文件存储在本地。用户所要做的就是将特定文件保存在特定文件夹中，并且每个人都可以访问它。我已经成功地使用 Dropbox 与经理合作，让 Dilbert 的尖头头发老板看起来像一个高科技天才。

还有[Skydrive](http://windows.microsoft.com/en-US/skydrive/home)和[Google Drive](https://drive.google.com/start#home)，但我发现它们不像 Dropbox 那样通用或易于使用。无需访问 Dropbox 网站即可使用 Dropbox。对于非极客来说，这似乎很神奇，因为我编写和编辑的文件出现在他们的驱动器上。我花了几周的时间来培训一个人，当他进行更改时，他不必通过电子邮件将他的文档发送给我，因为我已经有了它。

Dropbox 免费为您提供 2 Gb 的空间，这听起来并不多。然而，我的第一个硬盘是 20Mb，是当时标准 10Mb 硬盘的两倍。如果您不存储大量多媒体演示文稿或进行大量 Photoshop，那么 2Gb 对于您的项目可能绰绰有余。

我知道 Windows 7 及更高版本内置了某种[版本控制系统。](http://www.howtogeek.com/howto/11130/restore-previous-versions-of-files-in-every-edition-of-windows-7/)我知道这一点是因为任何时候有人提到 Mac OS X 有时间机器，一些 Wingeek 管道说 Windows 有同样的东西，但只有更好！不幸的是，Windows 不是我的强项，所以我对这个特定功能不太了解。我相信默认值是每天一次，但可以更改。如果每个人都在 Windows 上，这可能是完美的解决方案。

[正如Stefan 所说](https://stackoverflow.com/a/12348043/368630)，Subversion 可以进行自动版本控制。考虑到他在 Subversion 社区的地位（尤其是他在 TortoiseSVN 上的工作），他知道自己的东西。不幸的是，我对此知之甚少，因为我从未使用过或见过此功能的实现。这可能是因为我主要与知道什么是版本控制系统的开发人员一起工作，因此不需要为他们进行版本控制的东西。

另外不要忘记检查您是否可以使用您的公司 Sharepoint，它可以做很多您想要的事情。我对 Sharepoint 印象不深，但如果设施在那里，并且贵公司可以为您提供支持，那么您可能想要研究一下。

# iphone - UITableview 搜索时背景变化

> ID：12326131
> 
> 赞同：0
> 
> 时间：2012-09-07T22:18:27.217
> 
> 标签：iphone, objective-c, ios, uitableview

我正在开发一个包含 UITableView 和搜索栏的应用程序。我为 UITableView 的背景设置了清晰的颜色，但是当我在搜索栏中搜索项目时，TableView 背景颜色变为白色。我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:26:04.210

问题是，一旦您开始搜索，searchbar 就有自己的 tableview 用于显示搜索结果。我不确定有什么方法可以处理该 tableview 以便可以更改颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:26:32.277

为 tableview 所在的视图设置相同的背景。

希望它有帮助，**马里奥**

# reporting-services - 我应该在 Windows 2008 R2 上安装哪个版本的 MS Report Reviewer？

> ID：12326135
> 
> 赞同：0
> 
> 时间：2012-09-07T22:18:50.643
> 
> 标签：reporting-services

将一个应用程序从 windows 2003 服务器移动到 windows 2008 R2。该应用程序使用 Microsoft Report Viewer。发布应用程序后，当我浏览 Web 应用程序时，我收到 web.config 错误，指出 Microsoft 审阅者不可用。是否可以下载 Report Reviewer 2005 redisrtibutables 以与旧服务器上安装的内容保持一致，或者我应该安装最新的 Report Reviewer 2010 SP1 版本。请告诉我。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:22:35.887

任何一个选项都应该没问题，但 2010 年报表查看器是一个巨大的改进，并且工作得非常好。

# javascript - 在开始时而不是在单击后隐藏 FX.slide 内容

> ID：12326137
> 
> 赞同：1
> 
> 时间：2012-09-07T22:18:55.993
> 
> 标签：javascript, mootools, show-hide

我的 mootools FX.slide 工作正常，但我希望内容在开始时隐藏，而不是在他们单击链接后隐藏。我已经用 jquery 完成了这个，我通常只是将类更改为 display:none; 但它与 mootools 不同。

我如何开始隐藏内容？

这是我所做的一个小提琴：

[http://jsfiddle.net/ajrdesign/seVM7/](http://jsfiddle.net/ajrdesign/seVM7/)

这是代码：

JS

```
var mySlide = new Fx.Slide('slider_content');

$('toggle').addEvent('click', function(e){
   mySlide.toggle();
}); 
```

HTML

```
<li>
    <h3>What can I do with Revu iPad?</h3>
    <a id="toggle" href="#">Answer</a>
    <div id="slider_content">
        <p>Revu iPad includes some of the most popular features of Bluebeam Revu, enabling you to redline PDFs and collaborate with others on the go. Access PDFs through Dropbox, Box,  iTunes, or WebDAV and redline PDFs with markup tools* including your existing tool sets. Additionally, collaborate with project partners across the globe in real time using Bluebeam Studio. </p>
        <p>Revu iPad does not include all the features of Bluebeam Revu. Our app is designed to provide users with the features they need to document issues and collaborate in the field, without compromising speed.</p>
        <p>*Measurement annotations are currently not supported.</p>
    </div>
</li> 
```

CSS

```
#slider_content {
    padding: 10px;
    margin: 20px;
    border: 1px solid #e8e8e8;
    border-radius: 4px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:03:20.667

找到解决问题的方法！

[http://jsfiddle.net/ajrdesign/seVM7/1/](http://jsfiddle.net/ajrdesign/seVM7/1/)

基本上添加了一点 domready 事件：

```
var mySlide = new Fx.Slide('slider_content');
document.addEvent("domready", function() { 
   $('slider_content').slide('hide'); 
   $('toggle').addEvent('click', function(e) { 
      e.stop(); 
      mySlide.toggle(); 
   }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:40:32.563

我一直在寻找相同的（即将默认状态设置为“隐藏”），实际上解决方案非常简单，并已在[此处](https://stackoverflow.com/questions/5760944/approximating-a-mootools-slideout-on-an-element-prior-to-fx-slide-instanti)描述：

只需将 .hide() 添加到您的行中，如下所示：

```
var mySlide = new Fx.Slide('slider_content').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T22:21:09.263

1.  将`style="display:none"`HTML 代码添加到您要添加的元素中`toggle()`；
2.  `Fx.Slide`使用`onComplete`回调创建：

    ```
    var myFx = new Fx.Slide('slider_content', {
       onComplete: function() {
          if (this.wrapper.offsetHeight != 0)
             this.wrapper.setStyle('height', 'auto');
       }
    }); 
    ```

3.  `div`在第一次展开之前运行一些代码：

    ```
    var e = $('slider_content');
    if ( e.getStyle('display') != 'block' ) {
       myFx.hide();
       e.setStyle('display', 'block');
    }

    myFx.toggle(); 
    ```

# jquery - Jquery：从多个具有相同名称的类中选择一个类？

> ID：12326139
> 
> 赞同：0
> 
> 时间：2012-09-07T22:19:17.643
> 
> 标签：jquery, jquery-selectors

我需要从以列表格式单击的父元素中选择一个类。同时防止显示具有相同类名的其他类。

因此，例如：

```
$('ul').click(function() {
    $('li').next(".info").css({ "display" : "block" });
}); 
```

虽然我已经`.info`设置为`display:none;`

我的html代码是：

```
<ul>
    <li><span>Guy</span></li>
    <li class="info">
        <p>This should pop up when I click on the "Guy" span.</p>
    </li>
</ul> 
```

虽然，我似乎无法弄清楚为什么它不会工作/开火。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:21:34.797

基本上，您的目标是错误的元素。只需使用：

```
$('ul li').click(
    function(){
        $(this).next('li.info').show();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uBsX3/)。

在您的原始代码`$(this)`中`ul`，被点击的是 （事件从被点击或向上`click`冒泡），然后查找也*具有*类名的.`li``span``ul``ul`*`info`*

 *我的修改是通过将`click`事件的目标设为`li`，它*有*一个类为 的同级元素`info`。

顺便说一句，在 jQuery 不起作用的情况下，`console.log($(this))`检查选择器是否匹配您认为应该匹配的内容会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:24:21.413

您可以将事件绑定到*span*元素。

```
$(document).ready(function(){
    $('ul span').click(function() {
        // $('.info').hide()
        $(this).parent().next().show();
    });
}) 
```

[http://jsfiddle.net/2mvdt/](http://jsfiddle.net/2mvdt/)*

# php - 如何将布尔或 int 从 PHP 传递到 Android

> ID：12326141
> 
> 赞同：-1
> 
> 时间：2012-09-07T22:19:49.847
> 
> 标签：php, android, http, boolean, int

我一直在编写一个非常依赖于将字符串从 PHP 传递到 android 的程序；我使用 entityutils.toString 将该信息传递给我的应用程序。

但是，我现在需要将一个布尔值从 PHP 传递给 android。显然 entityutils.toString 工具不会有任何好处。在我的在线搜索中，我很难确定正确的方法。

你们中的任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:23:37.447

使用诸如 JSON 之类的编码来区分整数和布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:33:05.830

将布尔值更改为真/假，将 int 更改为常规 int。1 (true) 与 1 整数相同。您还可以在开头附加字母 b 或 i 吗？

# facebook - 打开图表：按对象计算操作

> ID：12326142
> 
> 赞同：1
> 
> 时间：2012-09-07T22:19:55.623
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我是 facebook 开放图的新手。我想知道一个动作在给定对象上执行了多少次。

例如：

*   鲍勃做**巧克力蛋糕**
*   山姆做橘子蛋糕
*   彼得做**巧克力蛋糕**

我想询问有多少人煮过“巧克力蛋糕”以获得 2 个结果。

谢谢 ！

# ajax - 在单元格编辑时通过 jqgrid 传递 csrf 令牌

> ID：12326145
> 
> 赞同：0
> 
> 时间：2012-09-07T22:20:14.117
> 
> 标签：ajax, codeigniter, jqgrid, parameters, csrf

我正在使用 Codeigniter 和 jqgrid 来构建应用程序。出于安全原因，我最近启用了 Codeigniter 的内置 CSRF 保护，它用 jqgrid 破坏了一些东西。当 jqgrid 被实例化时，我已经能够传递 csrf 令牌，因此我的所有数据都加载（通过将 csrf 令牌添加到 postData），但现在每当我编辑单元格时，我都会收到 500 错误，因为 csrf 令牌不是通过了。每次编辑单元格时，我都可以通过查看发布数据来验证这一点。我读了几个地方，editData 是我想要的，但是在那里添加令牌似乎并没有在编辑 ajax 请求中传递它。有任何想法吗？

```
$("#cust_grid").jqGrid({
    url:'/ajax/grid',
    datatype: 'xml',
    mtype: 'POST',              
    postData: {<?php echo $this->security->get_csrf_token_name().":'".$this->security->get_csrf_hash()."'"; ?>},
    editData: {<?php echo $this->security->get_csrf_token_name().":'".$this->security->get_csrf_hash()."'"; ?>},
    colNames:['Name1', 'Name2'],
    colModel :[ 
        {name:'name1', index:'name1', width:55, search: true},
        {name:'name2', index:'name2', width:110, search: true},
                        ],
    pager: '#pager',
    rowNum:25,
    rowList:[10,25,50,100],
    sortname: 'name1',
    sortorder: 'asc',
    viewrecords: true,
    gridview: true,
    caption: 'Customers',
    height: 600,
    width: 1200,
    shrinkToFit: false,
    altRows: true,
    cellEdit: true,     
    cellsubmit: "remote",
    cellurl: "/ajax/editCell",
},
{}
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T12:40:22.363

似乎您可以按照我在[此处](https://stackoverflow.com/a/6477061/315935)描述的大部分方式解决问题。主要区别在于您使用[单元格编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing)而不是[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing)。所以你应该使用`ajaxCellOptions`而不是`ajaxEditOptions`：

```
ajaxCellOptions: {
    loadBeforeSend: function(jqXHR) {
        // you should modify the next line to get the CSRF tocken
        // in any way (for example $('meta[name=csrf]').attr('content')
        // if you have <meta name="csrf" content="abcdefjklmnopqrstuvwxyz="/>)
        var csrf_token = '<%= token_value %>'; // any way to get
        jqXHR.setRequestHeader('X-CSRF-Token', csrf_token);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:54:35.577

我最终找到了解决问题的另一种方法。我正在调查另一个答案中发布的单元格编辑链接，我看到了 beforeSubmitCell 选项。事实证明，如果您从该函数返回 json 数据，则每次编辑单元格时，它将附加到 post 数据中。所以我需要做的就是添加一个选项：

```
beforeSubmitCell: function (rowid,celname,value,iRow,iCol) {
  return {<?php echo $this->security->get_csrf_token_name().":'".$this->security->get_csrf_hash()."'";?>} 
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T08:04:59.183

我试过后没有答案。然后我找到了通过使用以下方法将 CSRF 令牌从 Jqgrid 内联编辑传递到 Django 的解决方案：

```
onSelectRow: function(id){
   if(id && id!==lastSel){ 
      $(selector).restoreRow(lastSel); 
      lastSel=id; 
   }

 var editparameters = {
    extraparam: {csrfmiddlewaretoken: $('.token-data').data('token')},
    keys: true,
  };
 $(selector).jqGrid('editRow', id, editparameters);
} 
```

示例用法：http: [//yodi.polatic.me/jqgrid-inline-editing-integration-with-django-send-csrf-token/](http://yodi.polatic.me/jqgrid-inline-editing-integration-with-django-send-csrf-token/)

# php - PHP：为什么在关联数组中缺少值？

> ID：12326146
> 
> 赞同：1
> 
> 时间：2012-09-07T22:20:20.403
> 
> 标签：php

有人可以让我摆脱痛苦并解释为什么我在尝试将 preg_match 的结果推送到另一个数组时缺少中间值吗？这要么是愚蠢的，要么是我理解的巨大差距。无论哪种方式，我都需要帮助。这是我的代码：

```
<?php 

$text = 'The group, which gathered at the Somerfield depot in Bridgwater, Somerset, 
        on Thursday night, complain that consumers believe foreign meat which has been 
        processed in the UK is British because of inadequate labelling.';

$word = 'the';

preg_match_all("/\b" . $word . "\b/i", $text, $matches, PREG_OFFSET_CAPTURE);

$word_pos = array();

for($i = 0; $i < sizeof($matches[0]); $i++){

    $word_pos[$matches[0][$i][0]] = $matches[0][$i][1];

}

    echo "<pre>";
    print_r($matches);
    echo "</pre>";

    echo "<pre>";
    print_r($word_pos);
    echo "</pre>"; 
```

?>

我得到这个输出：

```
Array
(
[0] => Array
    (
        [0] => Array
            (
                [0] => The
                [1] => 0
            )

        [1] => Array
            (
                [0] => the
                [1] => 29
            )

        [2] => Array
            (
                [0] => the
                [1] => 177
            )

    )

)
Array
(
[The] => 0
[the] => 177
) 
```

所以问题是：为什么我错过了 [the] => 29？有没有更好的办法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:21:47.940

PHP 数组是 1:1 映射，即一个键指向一个值。所以你正在覆盖中间值，因为它也有 key `the`。

最简单的解决方案是使用偏移量作为键，使用匹配的字符串作为值。但是，根据您想要对结果执行的操作，完全不同的结构可能更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:22:48.990

首先你分配`$word_pos["the"] = 29`，然后你用 覆盖它`$word_pos["the"] = 177`。

您不会覆盖`The`，因为索引区分大小写。

所以也许使用这样的对象数组：

```
$object = new stdClass;
$object->word = "the"; // for example
$object->pos = 29; // example :) 
```

并将其分配给数组

```
$positions = array(); // just init once
$positions[] = $object; 
```

或者，您可以分配一个关联数组而不是对象，所以它就像

```
$object = array(
    'word' => 'the',
    'pos' => 29
); 
```

或者分配你做的方式，而不是覆盖，只是将它添加到一个数组中，比如：

```
$word_pos[$matches[0][$i][0]][] = $matches[0][$i][1]; 
```

代替

```
$word_pos[$matches[0][$i][0]] = $matches[0][$i][1]; 
```

所以你会得到类似的东西：

```
Array
(
[The] => Array
      (
         [0] => 0
      )
[the] => Array
      (
         [0] => 29
         [1] => 177
      )
) 
```

希望有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T22:46:14.603

实际发生了什么：

```
when i=0,
$word_pos[The] = 0   //mathches[0][0][0]=The 
when i=1
$word_pos[the] = 29       
when i=3
$word_pos[the] = 177  //here this "the" key overrides the previous one
                      //so your middle 'the' is going to lost :( 
```

现在基于数组的解决方案可以是这样的：

```
for($i = 0; $i < sizeof($matches[0]); $i++){

    if (array_key_exists ( $matches[0][$i][0] , $word_pos ) ) {

        $word_pos[$matches[0][$i][0]] [] = $matches[0][$i][1];

    }

    else $word_pos[$matches[0][$i][0]] = array ( $matches[0][$i][1] );

} 
```

现在如果你转储 $word_pos 输出应该是：

```
Array
(
[The] => Array
    (
    [0] => 0
        )
    [the] => Array 
        (
             [0] => 29 ,
             [1] => 177
        )
    ) 
```

希望有帮助。

参考：[array_key_exist](http://php.net/manual/en/function.array-key-exists.php)

# php - 使用 .php 解析为 javascript 源，如何使用条件在 php 括号之间包装 javascript 代码

> ID：12326147
> 
> 赞同：-1
> 
> 时间：2012-09-07T22:20:52.880
> 
> 标签：php, javascript, parsing

目前我正在开发一个项目，该项目需要使用一些简单的 javascript 函数解析动态内容，我需要根据当前使用给定用户的“视图”来加载这些内容。

我在 .js 或 .php 文件上使用类似的东西时遇到问题：

** 调用 javascript 的 .php 文件。

```
<script type="text/javascript" src="*.js/.php"  /> 
```

** .js 文件

```
<?php header(Content-type: 'application/javascript'); ?>

alert('this shows correctly);

<?php if(isset($_REQUEST['view']) { 
          if($_REQUEST['view']=='private_view') { ?> 

            var xname = <?php echo $_SESSION['x']; ?>
            //Array stuff filled from MySQL queries.
<?php } ?>

<?php     if($_REQUEST['view']=='public_view') { ?> 

            var other_variable = <?php echo $xxx; ?>
            $(element).functions();
<?php } ?> 
```

我使用的 php 代码可以正常工作，已经测试过了。我也相信还有其他方法可以解决这个问题，比如使用不同的文件并在我定义脚本调用的 .php 上使用条件权选择它们，但我很好奇为什么这不起作用。

我习惯于像这样在括号之间包装 HTML 内容，根据给定的条件隐藏或显示。

这个输出将只是警报调用，没有 PHP 错误/警告/通知，

我似乎找不到正确的方法来做到这一点，已经搜索了一段时间，但只找到了如何将 .js 解析为 php 修改 .htaccess 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:22:43.707

您应该简单地将文件重命名为`.js`文件`.php`。

# php - 从字符串中删除一些字符

> ID：12326150
> 
> 赞同：0
> 
> 时间：2012-09-07T22:21:09.823
> 
> 标签：php, regex, preg-replace

我正在抓取网站的一些项目并将其作为响应：

```
<a href="t-1956883.html">Oh my gooood <span class="smalltext">403 readers</span></a> 
```

现在我想将 href 从 更改`t-1956883.html`为`http://www.somemagicsite.com/t1956883`.

这是我目前得到的正则表达式；`t-[0-9]*.html`但我不知道如何过滤掉结果而不仅仅是匹配它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:28:24.930

用这个，

```
 $string = '<a href="t-1956883.html">Oh my gooood <span class="smalltext">403 readers</span></a>
';
    $pattern = '/t-(\d+).html/';
    $replacement = 'http://www.somemagicsite.com/t$1';
    echo preg_replace($pattern, $replacement, $string); 
```

检查php.net 中的[preg_replace](http://php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:49:45.130

为此，您可以使用[preg_replace 函数。](http://php.net/manual/en/function.preg-replace.php)

```
echo preg_replace("t-[0-9]*.html",  "http://www.somemagicsite.com/t1956883", $string); 
```

它应该可以解决问题。

# macos - 如何在 Cocoa 中使用 IKScannerDeviceView

> ID：12326156
> 
> 赞同：4
> 
> 时间：2012-09-07T22:21:38.087
> 
> 标签：macos, cocoa, scanning, ikscannerdeviceview

如何使用 IKScannerDeviceView 扫描我的应用程序内的文档？

我尝试通过 IB 将 IKScannerDeviceView 添加到我的视图中，并将其委托设置为我的应用程序委托（它实现了 IKScannerDeviceViewDelegate），但是当我运行应用程序时，我得到一个带有按钮的视图`Show Details`，`Scan`并且只有`Show Details`启用，当我单击它时什么也没有发生。

我插入了扫描仪，可以通过 Image Capture 进行扫描，但不能通过我的应用程序进行扫描。

有人有关于如何使用它的好教程吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T00:41:53.927

我终于能够弄清楚如何使用 IKScannerDeviceView。

您的类必须实现以下委托：

```
IKScannerDeviceViewDelegate, ICScannerDeviceDelegate, ICDeviceBrowserDelegate 
```

并且您需要在窗口中有一个 IKScannerDeviceView，其委托设置为实现的类`IKScannerDeviceViewDelegate`

要开始使用它，您必须创建一个`ICDeviceBrowser`这样的：

```
 ICDeviceBrowser *mDeviceBrowser = [[ICDeviceBrowser alloc] init];
    mDeviceBrowser.delegate = self;
    mDeviceBrowser.browsedDeviceTypeMask = ICDeviceLocationTypeMaskLocal|ICDeviceLocationTypeMaskRemote|ICDeviceTypeMaskScanner;
    [mDeviceBrowser start]; 
```

然后以类似于以下的方式实现委托方法：

```
- (void)scannerDeviceDidBecomeAvailable:(ICScannerDevice*)scanner;
{
    [scanner requestOpenSession];
}
- (void)deviceBrowser:(ICDeviceBrowser*)browser didAddDevice:(ICDevice*)addedDevice moreComing:(BOOL)moreComing
{
    if ( (addedDevice.type & ICDeviceTypeMaskScanner) == ICDeviceTypeScanner )
    {
        [scannerView setScannerDevice:(ICScannerDevice*)addedDevice];
    }
}
-(void)didRemoveDevice:(ICDevice*)removedDevice
{
    [removedDevice requestCloseSession];
} 
```

然后，如果一切顺利，您的 IKScannerDeviceView 将能够与您的扫描仪进行交互！

# android - 片段通信不起作用，我的应用程序不断崩溃

> ID：12326157
> 
> 赞同：0
> 
> 时间：2012-09-07T22:21:39.747
> 
> 标签：android, fragment

我尝试了很多东西，例如 2 个参考：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html) & [http://developer.android.com/guide/components/fragments.html# CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)以及 StackOverflow 上其他人的一些帮助，我只是无法让我的 ListFragment (FragmentA) 仅将一个简单的字符串发送到另一个 ListFragment (FragmentB)。当我单击 FragmentA 中的列表进入 FragmentB 时，我的应用程序不断崩溃，告诉我有一个 NullPointerException。我已经坚持了 2 天了，我只是想把头撞在墙上。如果有人知道出了什么问题，请发布代码来解决我的问题。

主要活动：

```
import com.example.fragmentcommunication.FragmentB.OnDataPass;

public class MainActivity extends Activity implements OnDataPass{
...
@Override
public void onCreate(Bundle savedInstanceState) {
...
@Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub
            String librarySelected = libraryList[position];
            Fragment newFragment = null;

            if (librarySelected.equals("Item1")){
                newFragment = new FragmentA();

            }

            FragmentTransaction transaction = getFragmentManager().beginTransaction();
            transaction.replace(R.id.tab2, newFragment, "FragA");
            transaction.addToBackStack(null);
            transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
            transaction.commit();

        }

    });        
}

public void onDataPass(String data) {
    // TODO Auto-generated method stub

    FragmentB transaction1 = ((FragmentB) getFragmentManager().findFragmentByTag("FragB"));
    transaction1.use(data);
}
} 
```

片段A：

```
public class FragmentA extends ListFragment{

... 
OnDataPass dataPasser;

public interface OnDataPass{
    public void onDataPass(String data);
}

@Override
public void onAttach(Activity a) {
    super.onAttach(a);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        dataPasser = (OnDataPass) a;
    } catch (ClassCastException e) {
        throw new ClassCastException(a.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String libraryList;

    //Get the position the user clicked.
    Fragment newFragment = null;

    libraryList = l.getItemAtPosition(position).toString();
    dataPasser.onDataPass(libraryList);

    if(libraryList.equals("Ranged")){
        newFragment = new FragmentB();          

    }

    FragmentTransaction transaction = getFragmentManager().beginTransaction();
    transaction.replace(R.id.tab2, newFragment, "FragB");
    transaction.addToBackStack(null);
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    transaction.commit();
}

} 
```

片段B：

```
public class FragmentB extends ListFragment{

...
String getListInfo;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    //Testing to see if the String was passed from Fragment A.
    System.out.println(getListInfo);

    ...

public void use(String data) {
    // TODO Auto-generated method stub
    this.getListInfo = data;

}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:24:24.190

> 我只是无法让我的 ListFragment (FragmentA) 仅将一个简单的字符串发送到另一个 ListFragment (FragmentB)。

由于 Fragment 背后的主要观点是它们可能不会同时出现在屏幕上（例如，在`-normal`屏幕上），FragmentA 不应该尝试“仅向”FragmentB 发送一个简单的字符串。片段B 可能不存在。

如果 FragmentA 中发生的事件可能具有超出 FragmentA 的 UI 效果，则 FragmentA 应告知其托管活动有关该事件的信息。然后，托管活动可以将事件路由到另一个片段，方法是直接调用其上的方法（如果活动也托管 FragmentB），创建它并将其添加到 UI（并使用工厂方法传递数据， like `newInstance()`)，或者通过调用`startActivity()`来启动另一个活动（如果 FragmentA 和 FragmentB 的空间不足，因此我们有一个单独的活动显示 FragmentB）。

关于您现有的代码，`getListInfo`是`null`因为您从未为其分配任何值。

# php - 是什么导致请求中的空字节值被过滤掉？

> ID：12326159
> 
> 赞同：7
> 
> 时间：2012-09-07T22:21:43.683
> 
> 标签：php, curl, security

在尝试强化 PHP Web 应用程序以防止[空字节中毒](http://hakipedia.com/index.php/Poison_Null_Byte)时，我注意到我实际上在我的请求中发送了一个空字节。

使用 cURL，我终于能够找到一种在我的请求中发送空字节的方法，但我注意到一些非常奇怪的事情：没有任何包含空字节的请求参数到达我的 PHP 应用程序。

作为概念证明，我`test.php`在我的服务器上创建了一个名为的文件：

```
<?php echo json_encode($_GET), PHP_EOL; 
```

这是对该脚本的一些请求的结果：

```
> curl 'http://localhost/test.php?foo=bar&baz=nu%00ll'
{"foo":"bar"}

> curl 'http://localhost/test.php?foo=bar&b%00az=null'
{"foo":"bar","b":"null"}

```

似乎键在空字节处被截断，如果值包含空字节，则该参数将从请求数组中完全删除。

使用`print_r()`产生类似的结果：

```
<?php print_r($_GET); 
```

```
> curl 'http://localhost/test.php?foo=bar&baz=nu%00ll'
大批
(
    [foo] => 酒吧
)

> curl 'http://localhost/test.php?foo=bar&b%00az=null'
大批
(
    [foo] => 酒吧
    [b] => 空
)

```

如果我修改我的脚本和 cURL 请求以使用`$_POST`.

并不是我在抱怨，但我确实需要知道为什么会这样，这样我才能确保每个网络服务器都配置正确。

是什么导致了这种行为？

```
> php -v

PHP 5.3.3 (cli)（构建：2012 年 7 月 3 日 16:40:30）
版权所有 (c) 1997-2010 PHP 集团
Zend Engine v2.3.0，版权所有 (c) 1998-2010 Zend Technologies
    与 Suhosin v0.9.29，版权所有 (c) 2007，SektionEins GmbH

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T02:58:32.977

我将您指向 PHP 源代码的 /main/SAPI.c 的第 1010 行。

```
SAPI_API char *sapi_getenv(char *name, size_t name_len TSRMLS_DC)
{
    if (sapi_module.getenv) { 
        char *value, *tmp = sapi_module.getenv(name, name_len TSRMLS_CC);
        if (tmp) {
            value = estrdup(tmp);
        } else {
            return NULL;
        }
        if (sapi_module.input_filter) {
            sapi_module.input_filter(PARSE_ENV, name, &value, strlen(value), NULL TSRMLS_CC);
        }
        return value;
    }
    return NULL;
} 
```

estrdup() 是在 /Zend/zend_alloc.c 的第 396 行的 _estrdup() 中#定义的，它使用标准库函数 strlen() 和 memcpy() 来完成它的竞标。基本上 estrdup() 只会复制一个空字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:31:24.553

在许多语言中，空字节表示字符串的结束。我会将数据作为十六进制发送并在服务器端重新解释它。我不认为 GET 支持二进制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:50:26.197

首先禁用 Suhosin。它已经处理好了。

只要你启用了它，你就不能那么容易地注入 NUL 字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T13:48:06.373

**`var_dump($your_url);`**
如果它包含 UGLY/NULL 字符，那么首先尝试**`TRIM()`**它。

# css - 每条消息都有负边距的消息/聊天系统

> ID：12326162
> 
> 赞同：0
> 
> 时间：2012-09-07T22:21:51.987
> 
> 标签：css, chat, messaging

我正在尝试将以下模型转换为工作动态代码，但我现在遇到了一些问题。

样机：[http ://www.imagebanana.com/view/a6yuqvgm/chat.png](http://www.imagebanana.com/view/a6yuqvgm/chat.png)

这里的目标是实现每个消息框的“负边距”，以便消息重叠一点。因此，如果 A 人（我）和 B 人进行对话，那么来自 B 人的所有消息都应该在右侧，而我的所有消息（A 人）都应该在左侧。这部分显然相当容易。

此外，如果我回复来自我的聊天伙伴的消息，我的消息应该有一个负边距，以便我的消息有点“进入”来自我的伙伴的消息，但在另一边。这是出于设计和节省空间的原因。消息越长，边距应该越大。较短的消息需要有较小的边距。

我目前对如何成功实现这些事情感到困惑。一个简单的负边距是不够的，因为当用户连续发送两条消息时，消息会重叠（第二条进入第一条）。该模型显示了完美的情况，旋转消息（A 人、B 人、A 人、B 人等），但显然情况并非总是如此。

我现在的问题是，纯 CSS 甚至可能吗？我想我需要在 PHP 或 JS 中添加一些动态部分，两者都可以。我只需要一些正确方向的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:13:43.267

*如果*您不需要根据每条消息的高度调整边距，则可以在纯 CSS 中执行此操作。在这两种情况下，关键是使用相邻 (+) 选择器来定位到消息之后的来自消息，反之亦然，避免来自同一个人的连续消息之间的重叠。

方法如下：http: [//jsbin.com/ujonoj/14/edit](http://jsbin.com/ujonoj/14/edit)

请注意 CSS 的注释部分：如果需要，您可以使用它来获得静态负边距（无论您想要多少）并避免使用 JS。

编辑 - 添加了两项安全检查以涵盖在非常短的消息之后出现非常长的消息的情况，并停止 setMargin 在连续的 to/from-from 消息上运行。多空安全检查根本不会将负边距设置为大于前一条消息的某个百分比（在我的示例中为 80）。

# javascript - 在移动浏览器上显示大文本文件

> ID：12326163
> 
> 赞同：0
> 
> 时间：2012-09-07T22:21:56.950
> 
> 标签：javascript, text-processing

我需要在移动设备浏览器上显示较大的文本文件（小于 10 MB）。目前不支持分块下载文件。

我现在做的事情如下：

1.  下载文件
2.  将文件内容放入`<pre>`标签中

这样做的问题是`<pre>`它不能很好地使用`word-wrap:break-words`CSS 进行自动换行。它以不可接受的方式（显然）破坏单词并使显示的文本不可读。没有自动换行不是一种选择，因为您不想要水平滚动（而且移动 Safari 只是拒绝在`<pre>`元素上生成水平滚动条）

将纯文本转换为等效的 HTML，然后将所述 HTML 插入 DOM 需要很长时间（插入是这里的瓶颈；转换时间大约为毫秒）。

关于如何在移动设备上以可接受的方式显示纯文本的任何想法？

### 编辑：

删除了关于使用 web workers 的部分，因为它不能进行 DOM 操作，当时我认为文本处理是瓶颈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:26:14.413

假设您显示的文档是一个日志文件...

以某种方式尾随文件，比如说，只取最后 1k 行。使用 javascript 加载并使每一行成为列表中的条目，并使用 css 或 javascript**在交替元素上放置背景颜色**。这使得换行无关紧要，而无需增加水平滚动。

在文档的顶部有一个**输入元素，其内容用于过滤列表**。每当输入元素的内容发生变化时，列表中不匹配的元素（作为正则表达式）将被隐藏，并重新应用色带。如果您不能一次显示整个文件，您可以根据过滤框的内容重新请求该文件（可能需要按下另一个按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:02:24.610

我这样做的方式如下：

```
<pre id='text_preview'>
</pre> 
```

大致代码如下。

```
$.get("url/of/text/file.txt", function(response) {
    var fileText = response, pageNumber = 1, pageSize = 105600;
    //first 100 kb of content, assuming 8 bytes/char
    //don't have exact value for this, using approx
    $('#text_preview').text(fileText.slice(0, pageNumber * pageSize);
    window.onscroll = function() {
       //implementation of this left as an exercise for the reader
       if(scrollNearBottom()) {
          pageNumber++;
          $("#text_preview").append(fileText.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);
       }
    }
}); 
```

显然，这不会帮助我使用 Ctrl+F 查找文本，但确实满足了我能够显示大型电子书的要求。

# jquery - 跟随悬停菜单中的链接

> ID：12326169
> 
> 赞同：2
> 
> 时间：2012-09-07T22:22:18.290
> 
> 标签：jquery, css, drop-down-menu

我有一个水平菜单，第一个菜单项上有一个下拉 div。

[http://jsfiddle.net/2dPXY/](http://jsfiddle.net/2dPXY/)

我希望第一个链接“Find a Doctor”仍然可以点击，所以有人可以从下拉列表中选择，或者直接点击链接。

现在它不可点击，我不知道为什么。我尝试将以下内容添加到我的 jquery 文件中，但没有奏效：

（这也在上面的jfiddle中）

```
 $("#menu li a").click(
        function () {
          console.log($(this).html());
          window.location.href = $(this).attr('href');
        }
      ); 
```

知道为什么我无法单击具有下拉列表的链接以及如何修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:36:47.200

问题是您的`.submenu`div 位于选项卡的顶部，因此它拦截了点击。（我发现它通过设置一个 10 像素的红色边框定位在选项卡上）。解决此问题所需要做的就是使用`top`30px 的 a 而不是`margin-top`in `#catmenu`。

查看我更新的 jsfiddle：http: [//jsfiddle.net/q9A9T/](http://jsfiddle.net/q9A9T/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:37:41.060

是在`.submenu`链接。

提示： 1）ID 必须是唯一的，以免引起冲突。

2）这是不必要的：

```
 $("#menu li").hover(
    function () {
      $("a#menulink", this).css('color','#39c')
      .next('.submenu').css('display','block');
    }
  ); 
```

仅使用 CSS：

```
#menuli:hover #menulink{
    color: #39c;
}

#menuli:hover .submenu{
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T22:39:22.527

您可以在css中添加到`ul#menu a#menulink`-ID `z-index:1;`，它会起作用！见这里：http: [//jsfiddle.net/2dPXY/4/](http://jsfiddle.net/2dPXY/4/)

# javascript - XHR 不适合聊天应用程序？

> ID：12326177
> 
> 赞同：0
> 
> 时间：2012-09-07T22:23:12.540
> 
> 标签：javascript, ajax

当我们发送一个 XMLHttpRequest 时，我们总是伴随着数百个额外的字节。在正常使用中它是好的。但是在构建需要速度的应用程序时，这不利于可靠性。

```
function update(){
    var xhr = getXMLHttp(); // Normal catch handler for XHR
    xhr.open("POST", "update.php?r=" + "&chatvslog=" + user, true);
    xhr.send();
window.setTimeout("update();",300);
} 
```

发送请求确实需要从 170 到 360 毫秒。问题是我需要更快地完成这项工作。

有没有办法改进我的 XMLHttpRequest 或以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:28:41.600

轮询是一种糟糕的解决方法，它可以在小范围内完成这项工作，但实施起来效率不高且难看。

现代浏览器支持 WebSockets 作为允许双向通信的更好方式。使用诸如 node.js 的[Socket.IO](https://github.com/LearnBoost/socket.io)之类的东西，您甚至可以使用高级 WebSocket 抽象层，该抽象层回退到浏览器中可用的任何东西——它可以使用 WebSockets（首选）和诸如 Flash 套接字、AJAX 长等技术——轮询或 JSONp 长轮询，而您不必关心使用了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:28:55.720

这就是 WebSockets 的设计目的，但它尚不支持 IE（尽管它在 IE 10 中提供）或其他大型浏览器的一些较旧但仍在使用的版本。

[http://caniuse.com/#search=websockets](http://caniuse.com/#search=websockets)

在那之前，看看彗星：

[http://en.wikipedia.org/wiki/Comet_（编程）](http://en.wikipedia.org/wiki/Comet_(programming))

# functional-programming - SML 斐波那契大数

> ID：12326178
> 
> 赞同：1
> 
> 时间：2012-09-07T22:23:13.430
> 
> 标签：functional-programming, sml, smlnj, ml

我尝试编写自己的 fib 函数，该函数适用于大量（超过 50），但我没有运气。首先，我尝试了明显的解决方案，但很快就溢出了。我的下一个解决方案是这个

```
 $fun fib(a:int, b:int, index:int) = if(index = 1) then
    $                                      (a+b)
    $                                   else
    $                                       fib(b, (a+b), index - 1); 
```

不幸的是，这也溢出了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:36:19.880

您需要查看[`IntInf`模块](http://www.standardml.org/Basis/int-inf.html)，它提供了对任意精度整数的访问。

您可以从 转换`Int.int`为`IntInf.int`using `IntInf.fromInt`。

请注意，对于您对它们执行的任何操作，您必须使用`IntInf.<operation>`而不是`Int`对应的。这包括加法之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:35:32.600

请注意，在 Poly/ML 中，结构 Int 和 IntInf 默认提供无界（大）整数。由于实现在底部使用了 GNU MP 库，并且在仍然可能的范围内使用小机器整数，所以它也非常快。

# java - 在javafx中注册鼠标处理程序但处理程序不是内联的

> ID：12326180
> 
> 赞同：2
> 
> 时间：2012-09-07T22:23:15.220
> 
> 标签：java, javafx-2, mouse-listeners

我有一个 JavaFX 应用程序变得有点大，我想让代码保持可读性。

我有一个 LineChart，我想在鼠标点击时内置缩放功能。我知道我需要在图表上注册一个鼠标侦听器。我无法从 Oracle 示例中弄清楚，即写在这里：

[http://docs.oracle.com/javafx/2/events/handlers.htm](http://docs.oracle.com/javafx/2/events/handlers.htm)

是如何不将我的处理程序定义为内联到注册。换句话说，我希望处理程序的主体（即多行代码）位于另一个类中。我可以这样做吗？如果是这样，我如何在我的主 Javafx 控制器代码中将处理程序注册到我的图表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T23:04:52.850

将您的处理程序放在实现鼠标事件处理程序的新类中，并通过节点的 setOnClicked 方法将您的类的实例注册到目标节点。

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.*;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

/** 
 * JavaFX sample for registering a click handler defined in a separate class.
 * http://stackoverflow.com/questions/12326180/registering-mouse-handler-but-handler-not-inline-in-javafx
 */ 
public class ClickHandlerSample extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    stage.setTitle("Left click to zoom in, right click to zoom out");
    ImageView imageView = new ImageView("http://upload.wikimedia.org/wikipedia/commons/b/b7/Idylls_of_the_King_3.jpg");
    imageView.setPreserveRatio(true);
    imageView.setFitWidth(150);
    imageView.setOnMouseClicked(new ClickToZoomHandler());

    final StackPane layout = new StackPane();
    layout.getChildren().addAll(imageView);
    layout.setStyle("-fx-background-color: cornsilk;");
    stage.setScene(new Scene(layout, 400, 500));
    stage.show();
  }

  private static class ClickToZoomHandler implements EventHandler<MouseEvent> {
    @Override public void handle(final MouseEvent event) {
      if (event.getSource() instanceof Node) {
        final Node n = (Node) event.getSource();
        switch (event.getButton()) {
          case PRIMARY:
            n.setScaleX(n.getScaleX()*1.1);
            n.setScaleY(n.getScaleY()*1.1);
            break;
          case SECONDARY:
            n.setScaleX(n.getScaleX()/1.1);
            n.setScaleY(n.getScaleY()/1.1);
            break;
        }
      }
    }
  }
} 
```

![示例程序输出](../Images/5c1b72d22d2a05dedefe4414798a3c49.png)

# html - 如何使 HTML ID 离开我的容器？

> ID：12326181
> 
> 赞同：0
> 
> 时间：2012-09-07T22:23:14.470
> 
> 标签：html, css, tags, position, overflow

我有一个 900px 宽度的容器，然后在里面我有一个 100% 宽度的标题，但它只占用容器的 100%，我怎样才能让它占据整个页面并忽略容器而不将它从容器中取出html标签？

```
#container {
width: 900px;
margin: auto;
padding: auto;
position: relative;
}

#header {
background-image: url(pat.png);
background-repeat: repeat;
padding: 0px;
margin: 0px;
height: 150px;
width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:31:55.657

使用绝对定位。然后，标题元素将根据已`position: relative;`定义的最近父元素（默认情况下为`<body>`元素）调整大小和定位。像这样：

```
#header {
    position: absolute;
    left: 0;
    right: 0; /* it will span from the left to the right edges */
    height: 100px; /* it helps to set a fixed-sized height too, but this isn't required */
} 
```

# javascript - Javascript onclick改变变量值

> ID：12326188
> 
> 赞同：3
> 
> 时间：2012-09-07T22:23:44.540
> 
> 标签：javascript, javascript-events, onclick

我是 JavaScript 新手，需要一些帮助。我正在制作一个网站，并且我有几张团队成员的图像，如果单击（所以我猜测 onclick 事件）将更改与该团队成员对应的变量值。例如，如果我在一个单独的 div 中单击比尔盖茨的图片，我需要有一个变量（比如说名称）将值更改为比尔盖茨。然后，如果我单击史蒂夫乔布斯的图像，包含比尔盖茨数据的变量将被史蒂夫乔布斯的数据覆盖。我该怎么做呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:32:51.943

假设标记如下：

```
<div id="gallery">
    <img class="people" data-subject="Steve Jobs" src="path/to/imageOfSteve.png" />
    <img class="people" data-subject="Bill Gates" src="path/to/imageOfBill.png" />
</div>
<span id="caption"></span> 
```

然后是一个相对简单且纯 JavaScript 的方法：

```
function identifySubject(image, targetEl) {
    if (!image) {
        return false;
    }
    else {
        var targetNode = document.getElementById(targetEl) || document.getElementById('caption'),
            person = image.getAttribute('data-subject');
            text = document.createTextNode(person);
        if (targetNode.firstChild.nodeType == 3) {
            targetNode.firstChild.nodeValue = person;
        }
        else {
            targetNode.appendChild(text);
        }
    }
}

var images = document.getElementsByClassName('people');
for (var i=0, len=images.length; i<len; i++) {
    images[i].onclick = function(e){
         identifySubject(this, 'caption');
    };
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/k7VUx/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:28:38.950

`Onclick`属性是对的。您需要将 javascript 函数的名称添加到图像的 onclick 属性（例如`<img src="" onclick="changeVariable()"...`）。

如果您希望页面上的文本根据您点击的人而改变，您需要查看使用`getElementById()`或类似方法在 Javascript 中选择 div 并查看 InnerHTML 属性。

见：[http ://woork.blogspot.co.uk/2007/10/how-to-change-text-using-javascript.html](http://woork.blogspot.co.uk/2007/10/how-to-change-text-using-javascript.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T22:31:46.750

希望这可以帮助

```
<img src="path/to/image1"  onclick="getValue('bill gates')" />
<img src="path/to/image2"  onclick="getValue('steve jobs')"/>
<div id="show_value"></div>

<script>
function getValue(val){
    document.getElementById('show_value').innerHTML = val
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T22:33:08.150

HTML：

```
 <div class="member"><img src="billgates.jpg" /><span>Bill Gates bla bla</span></div>
 <div class="member"><img src="stevejobs.jpg" /><span>Steve Jobs bla bla</span></div>
 <div id="variables"></div> 
```

JS：

```
$(function(){
    $('.member img').click(function(){
        $('#variables').html($(this).closest('span').html());
    });

}); 
```

# javascript - CodeMirror 动态语法验证

> ID：12326190
> 
> 赞同：11
> 
> 时间：2012-09-07T22:24:29.387
> 
> 标签：javascript, validation, syntax-highlighting, codemirror, ace-editor

一直试图在使用 CodeMirror 或 Ace 编辑器之间做出决定。我一直倾向于 CodeMirror，但是我非常喜欢 Ace 的一个功能，那就是它如何进行语法验证。因此，当我输入时，行号旁边的左侧装订线区域可能会出现一个警告或错误图标，当我将鼠标悬停在它上面时，它会给我一些描述。

有没有办法在 CodeMirror 中获得这个功能？具体来说，我使用 CodeMirror 的 css 模式。

能够添加我自己的自定义验证也很好。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T09:34:35.607

请参阅[http://codemirror.net/3/demo/widget.html](http://codemirror.net/3/demo/widget.html)以获得一个不错的演示。

但王牌也有其他不错的功能。对我来说，决定因素是多个光标和 indentGuides

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:54:44.547

对于 Ace，添加您自己的验证函数非常简单。以下是我们使用 CSSLint 添加 CSS 验证的方法：

[https://github.com/ajaxorg/ace/blob/master/lib/ace/mode/css_worker.js](https://github.com/ajaxorg/ace/blob/master/lib/ace/mode/css_worker.js) [https://github.com/ajaxorg/ace/blob/master/lib/ace/mode/css.js #L78](https://github.com/ajaxorg/ace/blob/master/lib/ace/mode/css.js#L78)

# ruby-on-rails - 有什么方法可以从 heroku 提供 gzip 资产？

> ID：12326191
> 
> 赞同：22
> 
> 时间：2012-09-07T22:24:37.890
> 
> 标签：ruby-on-rails, heroku, gzip, asset-pipeline, rack

我想知道是否有任何方法可以让 Rails 网络服务器（瘦）为资产管道创建的***.gz文件提供服务。**据我了解，它们的压缩级别比 高`Rack::Deflater`，后者仅适用`serve_static_assets`于 rackup 文件而不适用于`config.middleware`.

`Zlib`一个不太理想的解决方案可能是更改`Rack::Deflater`引用的默认压缩级别。它应该只需要 gzip 一次，然后转到`Rack::Cache`，然后希望是 CDN。

第二个不太理想的解决方案可能是`Rack::Rewrite`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T22:49:04.070

您的问题的答案可以在[https://gist.github.com/2152663](https://gist.github.com/2152663)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T07:07:51.923

用这个`gem github.com/mattolson/heroku_rails_deflate`

# java - GWT：地点、历史和 MVP 示例

> ID：12326192
> 
> 赞同：4
> 
> 时间：2012-09-07T22:24:40.057
> 
> 标签：java, gwt, android-activity, mvp, gwt-history

假设我想创建一个包含两个简单“屏幕”的 GWT 应用程序：

*   用户在应用程序首次启动时看到的*主菜单*（他们转到特定的 URL） - 忘记登录屏幕等，对于这个简单的示例；和
*   当用户单击主菜单上的按钮时，一个*编辑首选项*“页面”/屏幕/视图代替主菜单；此编辑首选项屏幕还有一个按钮，可将用户带回主菜单；因此
*   用户可以整天简单地在主菜单和编辑首选项“页面”（这是 GWT 所以它实际上是一个单页应用程序）之间来回切换

所以这个的伪代码可能看起来像：

```
public class MainMenuPresenter implements Presenter {
    // mainMenuScreen may be a Composite that contains a Button for
    // switching/navigating to the EditPreferencesView
    private MainMenuView mainMenuScreen;
}

public class EditPreferencesPresenter implements Presenter {
    // editPrefsScreen may be a Composite that contains a Button for
    // switching/navigating back to the MainMenuView
    private EditPreferencesView editPrefsScreen;
} 
```

问题：

1.  a`Place`和它的关联如何`Activities`适应这个范式？如果是在 MVP 和 Places/Activity*之间*进行选择，那么这个示例在使用 Activities/Places 范式时会如何？
2.  如果 MVP 和 Activities/Places 可以很好地配合使用（并且不是相互排斥的），那么我们如何在此处实现 GWT 的 History API，以便我们可以将其设置`MainMenuView`为历史中的一个“地方”，`EditPreferencesView`作为第二个“地方”，然后允许用户点击后退/前进浏览器按钮并继续在它们之间切换？
3.  如果 MVP 和活动/地点是互斥的，我必须在两者之间进行选择，那么上面问题 #2 中的代码有什么不同需要更改吗？

我还对a如何`Place`与 我需要先了解这些概念，然后才能继续讨论这些概念。提前致谢！`ActivityManager``PlaceChangeEvents`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T23:25:07.767

我将尝试概述一个可以在您的情况下工作的示例设置。有很多变化，但我想专注于一个简单的（并鼓励你想出可以调整的地方）。

### 1\. 定义 URL 令牌

选择一些 URL 标记，例如“#mainmenu”和“#editprefs”，它们将附加到主机页面的 URL。它们将用于浏览器历史记录，因此后退和前进按钮可以工作等。

DefaultHistorian 将自动为您完成 URL 处理。PlaceChangeEvent 将由 PlaceController 触发。

### 2\. 将标记映射到 Place 对象

Place 对象只是令牌的面向对象的抽象——这很有用，因为更高级的令牌也可以采用需要解析的参数。您需要一种将标记映射到 Place 对象的方法。这是**PlaceHistoryMapper**的职责。

在我的示例中，我们只需手动实现 PlaceHistoryMapper，将“#mainmenu”映射到 MainMenuPlace，将“#editprefs”映射到 EditPreferencesPlace。

[[或者，也可以使用@WithTokenizers 注释并为每种类型的地点实现一个（空）PlaceTokenizer。然后，您可以使用 @Prefix 注释将“mainmenu”和“editprefs”指定为标记。]]

### 3\. 将地点映射到活动

Place 对象本身不做任何事情 - 如上所述，它基本上只是一个抽象标记。实际代码将在 Activity 中运行。因此，您必须将地点映射到活动。这是**ActivityMapper**的职责。

在我的示例中，您将实现它以将 MainMenuPlace 映射到 MainMenuActivity 并将 EditPreferencePlace 映射到 EditPreferenceActivity。

### 4\. 活动和演讲者

为简单起见，在我的示例中，Activity 还将实现 Presenter。所以 MainMenuActivity 将实现 MainMenuPresenter。这根本没有必要，但也许是一个不错的起点。这就是 Places+Activity 可以与 MVP 连接的地方。这两个概念不需要彼此，但它们可以很好地协同工作：

*   活动+地点基本上是关于历史令牌和活动之间的连接。
*   MVP 基本上是关于 Presenter 和 View 之间的连接。

如果您让一个 Activity（或其代表之一）实现一个 Presenter，那么您已经连接了两者。

### 5\. 快速概览

```
"#mainMenu"
---(PlaceHistoryMapper)---> MainMenuPlace
---(ActivityMapper)---> MainMenuActivity implements MainMenuPresenter 
```

# unix - 将文件放入 tar 时更改目录结构

> ID：12326195
> 
> 赞同：-1
> 
> 时间：2012-09-07T22:24:45.860
> 
> 标签：unix, tar

我目前正在尝试编写一个脚本来备份一些文件，方法是获取相关文件并将它们压缩成一个 tarball。问题是，我需要删除它们结构中间的两层文件夹，以便可以直接将它们提取到必要的目录中。例如，我当前的结构如下所示：

```
foo/bar/remove/remove/files... 
```

但提取时需要看起来像这样：

```
foo/bar/files... 
```

由于我要备份的文件数量，在 tar-ing 之前将所需的文件复制两个级别并不是一个真正的选择。我已经研究过 using `--directory`，但这似乎并没有达到我想要的效果。
有没有办法做到这一点，还是我不走运？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:21:25.953

结束创建目录结构的副本，并带有指向所需文件夹的符号链接，然后使用`-h`选项 on`tar`跟随它。

# javascript - 如何验证我对 StockTwits API 的调用？

> ID：12326196
> 
> 赞同：0
> 
> 时间：2012-09-07T22:25:34.823
> 
> 标签：javascript, oauth, oauth-2.0, stocktwits

我正在用 Javascript 构建一个 StockTwits 应用程序。

我正在查看有关 OAuth [http://stocktwits.com/developers/docs/authentication](http://stocktwits.com/developers/docs/authentication)的 API 文档，但对如何完成客户端 OAuth 流程感到困惑。

如何正确验证我在 javascript 中对 StockTwits 的调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T17:48:24.610

请参阅[身份验证页面](http://stocktwits.com/developers/docs/authentication)上的“客户端 OAuth 流程” 。

一旦您获得了向我们注册应用程序的消费者密钥和消费者秘密，请使用您的详细信息调用授权端点：

```
https://api.stocktwits.com/api/2/oauth/authorize?client_id=<client_id>&response_type=token&redirect_uri=http://www.example.com&scope=read,watch_lists,publish_messages,publish_watch_lists,follow_users,follow_stocks 
```

一旦您或用户从身份验证框中授权应用程序，访问令牌将作为您在授权调用中提供的重定向 URI 中的哈希传递。

如果仍然无法正常工作，请告诉我们您收到的回复。

# php - Javascript 连接到 websocket

> ID：12326198
> 
> 赞同：0
> 
> 时间：2012-09-07T22:25:51.607
> 
> 标签：php, javascript, sockets, websocket

跟进我的最后一个问题 -

```
var socket;
if ("WebSocket" in window)
  {
     alert("WebSocket is supported by your Browser!");
     // Let us open a web socket
   socket = new WebSocket("ws://localhost:10001");
  }

socket.onopen() = function(){
    alert("Connection Opened");
}

socket.onmessage() = function(msg){
    alert(msg);
} 
```

我可以使用 telnet 连接到服务器，但我似乎无法使用 Javascript 进行连接，这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:31:55.207

因为 WebSocket 不是普通的通用套接字。它要求远程端的服务器符合由[WebSocket 协议](http://www.whatwg.org/specs/web-socket-protocol/)定义的非常具体的握手。如果您的服务器没有实现此协议，WebSocket 将无法连接到它。

此外，正如 Rocket 所指出的，您的代码当前正在尝试调用`socket.onopen()`函数调用并为其赋值。去掉括号。

# haskell - 对 lambda 的这种使用感到困惑

> ID：12326200
> 
> 赞同：5
> 
> 时间：2012-09-07T22:25:58.183
> 
> 标签：haskell

所以我认为 Lambdas 就像 Learn You a Haskell 中所展示的那样：

```
(filter (\xs -> length xs > 15) (map chain [1..100])) 
```

xs 的输入是从`(map chain [1..100]))` That's easy to read 生成的列表。

所以这就是我感到困惑的地方，看看一些真实世界的代码（tm）。

这是来自 [导管的功能](https://github.com/snoyberg/conduit/blob/master/resourcet/Control/Monad/Trans/Resource.hs)

```
fmap f (ResourceT m) = ResourceT $ \r -> fmap f (m r) 
```

r 的输入来自哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T22:33:46.713

`r``\r -> fmap f (m r)`在实际调用函数之前不会有值。在 的定义中`fmap`，该函数永远不会被调用 - 它只存储在`ResourceT`. 然后可以稍后将其从 中取出`ResourceT`并调用。那时`r`将获得价值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T22:39:36.650

这`\r -> fmap f (m r)`是一个函数，它是一个[闭包](http://www.haskell.org/haskellwiki/Closure)的例子。变量`f`和`m`是函数将被执行的环境的一部分。此外，由于 Haskell 是一种函数式语言，因此可以在不被评估或部分评估的情况下传递函数，就像在这种情况下一样。

# powershell - 在 powershell 中访问 $args 数组

> ID：12326205
> 
> 赞同：32
> 
> 时间：2012-09-07T22:26:18.707
> 
> 标签：powershell, args

我有一个如下所示的测试 powershell V2 脚本：

```
 function test_args()
    {
      Write-Host "here's arg 0: $args[0]"
      Write-Host "here's arg 1: $args[1]"
    }

    test_args 
```

如果我从 powershell 命令提示符调用它，我会在屏幕上看到它：

```
here's arg[0]: [0]

here's arg[1]: [1] 
```

不完全是我想要的。看来我必须先将 $args[0] 和 $args[1] 复制到脚本中的新变量，然后才能使用它们？如果我这样做，我可以正常访问。

有没有办法在我的代码中访问索引的 $args ？我试过以各种方式在它们周围使用花括号，但没有运气。

我最终将转向命名参数，但我正在处理的脚本（不是这个演示脚本）是批处理文件的直接端口。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-07T22:28:08.560

试试这个：

```
function test_args()
{
  Write-Host "here's arg 0: $($args[0])"
  Write-Host "here's arg 1: $($args[1])"
}

test_args foo bar 
```

请注意，它是`$args`而不是`$arg`。此外，当您在字符串中使用 PowerShell 变量时，PowerShell 仅替换变量的值。您不能直接使用像`$args[0]`. 但是，您可以将表达式`$()`放在双引号字符串内的子表达式组中，以让 PowerShell 计算表达式，然后将结果转换为字符串。

# php - PHP 将值推入关联数组

> ID：12326208
> 
> 赞同：3
> 
> 时间：2012-09-07T22:26:39.050
> 
> 标签：php, arrays

我在任何地方都找不到答案。

```
foreach ($multiarr as $array) {
   foreach ($array as $key=>$val) {
      $newarray[$key] = $val;
   }
} 
```

说`$key`有重复的名字，所以当我试图推入`$newarray`它时，实际上看起来像这样：

```
$newarray['Fruit'] = 'Apples';
$newarray['Fruit'] = 'Bananas';
$newarray['Fruit'] = 'Oranges'; 
```

问题是，上面的例子只是*替换*了旧值，而不是推入它。

是否可以推动这样的价值观？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T22:28:32.147

是的，请注意新的一对方括号：

```
foreach ($multiarr as $array) {
   foreach ($array as $key=>$val) {
      $newarray[$key][] = $val;
   }
} 
```

您也可以使用[`array_push()`](http://php.net/manual/en/function.array-push.php)，引入一些开销，但我大部分时间都会坚持使用速记。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-02-14T07:45:20.383

我将提供一个替代moonwave99 的答案，并解释它是如何微妙地不同的。

以下技术将关联数组的索引数组解包，并将每个子数组作为`array_merge_recursive()`执行合并“魔术”的单独参数提供服务。

代码：（[演示](https://3v4l.org/OMJR1)）

```
$multiarr = [
    ['Fruit' => 'Apples'],
    ['Fruit' => 'Bananas'],
    ['Fruit' => 'Oranges'],
    ['Veg'   => 'Carrot'],
    //['Veg'   => 'Leek'],
];

var_export(
    array_merge_recursive(...$multiarr)
); 
```

当您递归合并时，如果相应键只有一个值，则不使用子数组，如果键有多个值，则使用子数组。

`Leek`通过取消注释元素来查看此操作。

* * *

ps 如果您*知道*您只针对单列数据并且您知道您所针对的键，那么`array_column()`这将是一个明智的选择。

代码：（[演示](https://3v4l.org/v7039)）

```
var_export(
    ['Fruit' => array_column($multiarr, 'Fruit')]
); 
```

# .htaccess - 如何在 .htacces &Itemid=x 中重定向到 &Itemid=Y

> ID：12326212
> 
> 赞同：0
> 
> 时间：2012-09-07T22:27:09.080
> 
> 标签：.htaccess, mod-rewrite, joomla, joomla2.5, http-status-code-301

你好我有这个问题

我无法将此 index.php?option=com_adsmanager&view=list&catid=8&Itemid=435 重定向到此 index.php?option=com_adsmanager&view=list&catid=8&Itemid=565

catid=8 是一个变量，我需要重定向所有 catid= 值

我只需要将 &Itemid=435 更改为 &Itemid=565

我有这个代码

```
 RewriteEngine on
    RedirectMatch 301 ^(.+)\&Itemid=435$ $1&Itemid=565 
```

我不知道出了什么问题我需要所有的网址 any&Itemid=435 去sameanything&Itemid=565

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:22:58.783

**选择**

在 Joomla或Joomla`PHP Code`的顶部添加下方！`index.php``configuration.php`

它检查数字`catid`&`Itemid`请求 & 如果它会用& new`Itemid=435`重定向 URL 。随意根据您的需要修改代码！`catid``Itemid`

```
if(isset($_GET['catid']) && is_numeric($_GET['catid']) && isset($_GET['Itemid']) && is_numeric($_GET['Itemid']))        
if($_GET['Itemid'] == 435)
{
    $catid    = $_GET['catid'];
    $location = "/index.php?option=com_adsmanager&view=list&catid=$catid&Itemid=565";
    header ('HTTP/1.1 301 Moved Permanently');
    header ('Location: '. $location);
} 
```

* * *

**答案 - 2**

我假设您想要重定向`URI-1`到`URI-2`.

1.  index.php?option=com_adsmanager&view=list&catid=8&Itemid= **435**

2.  index.php?option=com_adsmanager&view=list&catid=8&Itemid= **565**

下面`mod_rewrite`将让您重定向`specific URI`到其他`specific URI`. 只需在`.htaccess`文件中添加以下规则。

```
<IfModule mod_rewrite.c>
 Options +FollowSymlinks
 RewriteEngine on
 RewriteCond %{QUERY_STRING} ^option=com_adsmanager&view=list&catid=8&Itemid=435$
 RewriteRule ^/?index\.php$ /index.php?option=com_adsmanager&view=list&catid=8&Itemid=565 [R=301,L]
</IfModule> 
```

* * *

**答案 - 3**

`.htaccess`如果您想使用`'/index.php'`和处理请求，请在您的`'/'`.

```
<IfModule mod_rewrite.c>
 Options +FollowSymlinks
 RewriteEngine on
 RewriteCond %{QUERY_STRING} ^option=com_adsmanager&view=list&catid=8&Itemid=435$
 RewriteRule ^(.*)$ /index.php?option=com_adsmanager&view=list&catid=8&Itemid=565 [R=301,L]
</IfModule> 
```

**注意：不要在单个`.htaccess`文件中使用这两个代码。**

# windows - 窗口 CSP api

> ID：12326214
> 
> 赞同：3
> 
> 时间：2012-09-07T22:27:15.703
> 
> 标签：windows, cryptography, provider, cryptoapi

我正在尝试编写自己的 CSP。我试图通过实现一个 dll 文件来做到这一点，但我不确定我是否走在正确的道路上。

我发现了这样的东西： Cryptographic Service Provider Developer's Toolkit (CSPDK)

有 CSP API 的示例

CPAcquireContext CPGenKey ...等。

（它在我看来就像一个旧的 api 或 winCE 的 api）

我的问题来了，我应该实现哪些功能来为 Windows 7 和 XP 提供新的 CSP。

我的计划好吗？- 我应该实现简单的 DLL 并将她的引用放在寄存器中吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:26:11.353

您可能缺少[CNG](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376210%28v=vs.85%29.aspx)，它是 MS Crypto API 的（长期）替代品。您也可以为此创建模块。不幸的是，它仅在 Vista 之后可用。Windows XP 太旧了（无论如何您可能不应该为 XP 开发新的应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:46:13.533

您的 HSM 供应商将为您编写 CSP。当你安装他们的驱动程序时，你会得到这个 csp。您只需从您的代码中访问此 CSP。

要与您的 HSM 供应商的 CSP 交互（检查他们支持的内容），您应该使用[PKCS#11](http://www.rsa.com/rsalabs/node.asp?id=2133)或使用[cryptoAPI CSP 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380252%28v=vs.85%29.aspx#csp_functions)。

# html - 导航栏 - 如果活动 URL 突出显示背景？

> ID：12326215
> 
> 赞同：0
> 
> 时间：2012-09-07T22:27:16.087
> 
> 标签：html, css, navigation

感谢您花时间看这个。

我们有一个导航栏作为 magento 的标准配置，我设法复制了这个（通过复制和编辑 html/css 的位）并将其放在原始导航栏下方 - 所以我们实际上有 2 个。

原始导航栏通过 magento 代码工作，并识别类别 URL 是否处于活动状态，然后该类别的导航栏以红色突出显示。

我现在想尝试复制它，任何帮助将不胜感激。我在本地执行此操作，因此很遗憾无法提供网站链接。

HTML：

```
 <div class="nav-container2">
    <ul id="nav2">
        <li class="downloads"><a href="http://127.0.0.1/foscamsite/downloads" id="Downloads"><span>Downloads</span></a></li>
        <li class="forum"><a href="http://127.0.0.1/foscamsite/forum" id="Forum"><span>Forum</span></a></li>
</ul></div> 
```

CSS：

```
.nav-container2 { width:940px; margin:auto; height:30px;}
    #nav2 { width:547px; height:40px; float:right; margin:1px 0 0 0; font-size:105%; background:url(../images/bg-nav.png) 0 0 repeat-x; -webkit-border-radius:5px; -moz-border-radius:5px; border-radius:5px; box-shadow:0 0 3px #ccc; }
    #nav2 li { position:relative; text-align:left; }
    #nav2 li.over { z-index:998; }
    #nav2 a,
    #nav2 a:hover { display:block; line-height:1.3em; text-decoration:none; }
    #nav2 span { display:block; cursor:pointer; white-space:nowrap; }
    #nav2 li ul span {white-space:normal; }
    #nav2 ul li.parent a { background:url(../images/bkg_nav2.gif) 100% 100% no-repeat; }
    #nav2 ul li.parent li a { background-image:none; }
    #nav2 li { float:left; margin:0 1px 0 0; }
    #nav2 li.active a { background:url(../images/bg-nav-hover.png) 0 0 repeat-x; color:#fff; }
    #nav2 a { float:left; padding:12px 14px 11px; color:#787878; font-size:105%;  }
    #nav2 li.over a,
    #nav2 a:hover { background:url(../images/bg-nav-hover.png) 0 0 repeat-x; color:#fff; } 
```

感觉有些 CSS 是不需要的，只是不需要从哪里开始修改它。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:37:25.017

如果您在标题上方添加一个 php 变量并将其用于导航中的活动状态，这可能更容易做到。

例如：

```
<?php $page = $_SERVER['REQUEST_URI']; ?>
<div class="nav-container2">
<ul id="nav2">
    <li <?php if ($page == 'downloads.php') { ?>class="active"<?php } ?>><a href="downloads.php" id="Downloads">     <span>Downloads</span></a></li>
<li <?php if ($page == 'forum.php') { ?>class="active"<?php } ?>><a href="forum.php" id="Forum"><span>Forum</span></a></li> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:23:30.713

尝试这个。请注意，我已经取消了服务器地址并将 URL 设为相对，因此希望它可以更轻松地迁移到实时服务器：

```
<?php

echo "<div class=\"nav-container2\">\n";
echo "<ul id=\"nav2\">\n";
echo "<li class=\"downloads";
if ($_SERVER['REQUEST_URI'] == "/foscamsite/downloads") echo " active";
echo "\"><a href=\"/foscamsite/downloads\" id=\"Downloads\"><span>Downloads</span></a></li>\n";
echo "<li class=\"forum";
if ($_SERVER['REQUEST_URI'] == "/foscamsite/forum") echo " active";
echo "\"><a href=\"/foscamsite/forum\" id=\"Forum\"><span>Forum</span></a></li>\n";
echo "</ul>\n";
echo "</div>\n";

?> 
```

# c# - 模态弹出扩展器

> ID：12326217
> 
> 赞同：0
> 
> 时间：2012-09-07T22:27:28.653
> 
> 标签：c#, asp.net

我正在做的是使用 ListView 创建票证列表。项目模板中的控件之一是显示工单标题的链接按钮。当用户单击链接按钮时，我想打开一个模式窗口，以可读格式显示票证。为了获得票，我将向该页面传递一个变量，然后它会完成剩下的工作；没什么复杂的。该页面将有 3 个按钮，当您单击其中一个按钮时需要关闭窗口。

现在，我或多或少地弄清楚了如何使用 Ajax 中的 ModalPopupExtender。您在它自己的 div 中创建面板，该面板保持隐藏状态。我创建了一个点击事件，它基本上使用 webclient 从页面下载 html 并将其插入到该 div 的 innerHtml 中。这似乎第一次起作用。但是，一旦您单击不同的链接，该页面就会呕吐并说明它处于非法状态。

我不确定我是否做错了，而且我找不到任何像样的例子来说明如何做到这一点。好吧，有一个，但英语很难理解，而且是用 VB 而不是 C#。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:29:50.200

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>  
<form id="form1" runat="server">
    <div><asp:toolkitscriptmanager id="ToolkitScriptManager1" runat="server">          </asp:toolkitscriptmanager>
        <br />
        <asp:modalpopupextender dropshadow="true" okcontrolid="btnOk" cancelcontrolid="btnClose" runat="server" popupcontrolid="Panel1" id="ModalPopupExtender1" targetcontrolid="Button1" />
        <asp:panel id="Panel1" runat="server" cssclass="modalPopup" style="display: none;">  This is basic modal popup.  <br /><br />  
            <asp:Button ID="btnOk" runat="server" Text="Ok" />  <asp:Button ID="btnClose" runat="server" Text="Close Me" />    
            <iframe src="http://www.google.com"></iframe>   
        </asp:panel>
        <asp:button id="Button1" runat="server" text="First Modal Popup" />
    </div>
</form> 
```

# jquery - jQuery：创建自定义事件

> ID：12326235
> 
> 赞同：0
> 
> 时间：2012-09-07T22:30:14.130
> 
> 标签：jquery

我应该创建一个在页面加载时触发的自定义事件，该事件将类“green”添加到 id 为 #myElementId 的 div。这是我对代码的尝试，但我收到一条错误消息，说我必须添加绿色类。你能告诉我我做错了什么吗？

```
$(document).ready(function(){

 $('#myElementId').bind('ready', function() {
      $(this).addClass('green');
    });
}); 
```

HTML

```
<body>
<div id="myElementId"></div>

</body> 
```

更新

这取自 codecademy 课程，该课程应该教我如何创建在页面加载时添加类的自定义事件，因此即使有其他更简单的解决方案，我也在尝试按照课程的预期方式解决它。

这是他们给的暗示

```
$("#myElementId").on("myCustomEvent", function(event) {
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:32:11.630

你可以这样做：

```
$(document).ready(function() {
    $("#myElementId").addClass('green');
}​);​ 
```

另请注意，您的`id`. 是`myElementId`，不是`myElementID`。

**编辑**：要触发事件，请使用[`.trigger()`](http://api.jquery.com/trigger/)：

```
$(document).ready(function() {

 // Bind a function to be executed when 'myCustomEvent' is triggered
 $('#myElementId').bind('myCustomEvent', function() {
   $(this).addClass('green');
 });

 // Trigger the event 'myCustomEvent'
 $('#myElementId').trigger("myCustomEvent"); 

});​ 
```

此外，从 jQuery 1.7 开始，您应该`.on()`使用`.bind()`.

**[演示](http://jsfiddle.net/E7zyW/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:31:40.200

只需在 CSS 中按名称添加类 green .. 这应该可以为您完成工作..

```
.green
{
    font-weight: bold;
    background-color: green;
} 
```

检查这个[小提琴](http://jsfiddle.net/sushanth009/mD88R/)

你也不需要这条线

```
$('#myElementID').bind('ready', function() { 
```

# macos - OS X 10.5 上的 libspotify 和缺少符号

> ID：12326237
> 
> 赞同：5
> 
> 时间：2012-09-07T22:30:22.737
> 
> 标签：macos, spotify

有人在 Leopard 上成功运行用 libspotify 编译的东西吗？我有一台配备 10.5.8 的 Intel Mac，但似乎无法正常工作。我将 libspotify 12.1.51 扔到 /Library/Frameworks 并编译了“存根”示例

```
gcc -o stub main.c ../appkey.c -framework libspotify 
```

它可以编译和链接，但是当我运行它时

```
dyld: lazy symbol binding failed: Symbol not found: ___bzero
  Referenced from: /Library/Frameworks/libspotify.framework/libspotify
  Expected in: /usr/lib/libSystem.B.dylib

dyld: Symbol not found: ___bzero
  Referenced from: /Library/Frameworks/libspotify.framework/libspotify
  Expected in: /usr/lib/libSystem.B.dylib 
```

所以 bzero() 是一个用于重置内存的遗留函数，我的 libc 版本显然缺少它的实现。它是否存在于某些较旧/较新版本的 OS X 上？

# asp.net-mvc-3 - 来自 iframe 的 mvc3 渲染视图

> ID：12326240
> 
> 赞同：0
> 
> 时间：2012-09-07T22:30:44.843
> 
> 标签：asp.net-mvc-3, iframe

我有一个控制器，它通过调用 web 服务为 iFrame 创建一个 url。我需要创建一个视图和一个模型，并将 iFrame 的这个 url 传递给视图。我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:45:52.280

```
// Controller
ViewBag.IframeUrl = theIframeUrl;
View("ViewName");

//View
<iframe src="@ViewBag.IframeUrl"></iframe> 
```

这是最简单的方法。根据您的问题，您可能想要使用模型/视图模型。

# c++ - 读取文本文件和输出字符串

> ID：12326242
> 
> 赞同：1
> 
> 时间：2012-09-07T22:31:06.233
> 
> 标签：c++, fstream, ifstream

下面我有一个读取文本文件的代码，如果其中包含单词，则仅将一行写入另一个文本文件 `"unique_chars"`。我在那条线上还有其他垃圾，例如。`"column"`我怎样才能让它`"column"`用其他东西代替短语，例如`"wall"`？

所以我的线就像`<column name="unique_chars">x22k7c67</column>`

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{

    ifstream  stream1("source2.txt");
    string line ;
    ofstream stream2("target2.txt");

        while( std::getline( stream1, line ) )
        {
            if(line.find("unique_chars") != string::npos){
             stream2 << line << endl;
                cout << line << endl;
            }

        }

    stream1.close();
    stream2.close();    

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:57:02.287

如果您希望替换所有出现的字符串，您可以实现自己的 replaceAll 函数。

```
void replaceAll(std::string& str, const std::string& from, const std::string& to) {
    if(from.empty())
        return;
    size_t pos = 0;
    while((pos = str.find(from, pos)) != std::string::npos) {
        str.replace(pos, from.length(), to);
        pos += to.length();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:57:17.773

要进行替换，您可以使用 std::string 的方法“replace”，它需要一个开始和结束位置以及将取代您要删除的内容的字符串/令牌，如下所示：

（你也忘了在你的代码中包含字符串标题）

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main()
{
    ifstream  stream1("source2.txt");
    string line;
    ofstream stream2("target2.txt");

    while(getline( stream1, line ))
    {
        if(line.find("unique_chars") != string::npos)
        {
            string token("column ");
            string newToken("wall ");
            int pos = line.find(token);

            line = line.replace(pos, pos + token.length(), newToken);
            stream2 << line << endl;
            cout << line << endl;
        }
    }

    stream1.close();
    stream2.close();    

    system("pause");
    return 0;
} 
```

# java - Java application speed goes up after adding log output

> ID：12326254
> 
> 赞同：16
> 
> 时间：2012-09-07T22:32:12.613
> 
> 标签：java, performance

We stumbled upon a rather strange problem IMO. Our clients have been complaining about the speed at which our application imports and processes data from files [ filesize 1kB cca, time required to import the file under normal conditions is 4-10 seconds, depending on the overall workload. Yes, it is a lot ]...

So we started looking into it, but something quite unexpected happened: after inserting debug log outputs into certain parts of the code [ not affecting the logic otherwise ] the import sped up quite a lot : 300ms-2200ms /file depending on the overall workload.

Language used: Java

JDK 6_34 on my station [ don't know what versions my colleagues use ]

I've went through the code... many times. Nothing unusual. Even though it's all executed in a thread, this thread doesn't have a competitor doing the same job OR accessing the same files.

Is this situation familiar to anyone?

P.S.: I do hope that this question does belong here. If not, I apologize sincerely.

edit:

as for logging, we use log4j.

OS: Windows XP / my machine. One colleague has the same, the other uses Win7 /

CPU: E7500 @ 2.93 GHz

RAM: 2 GB DDR2

One other machine is basically the same. The configuration of the third is unknown to me as it's new and not my workstation.

Files are all loaded/stored from/to a local HDD in my situation.

What concerns me most is that we use a platform for which we have no source, because, well we've paid for a license, but not source >.<

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T23:08:55.763

My theory is that adding logging is changing something in your application's thread scheduling patterns.

Normally, this shouldn't matter. But if the underlying problem in your application is something related to thread scheduling, then it is not surprising that the logging changes the observed behaviour.

I recommend that you audit the relevant parts of your codebase looking for `Thread.sleep(...)` calls, `Thread.yield()` calls, places where your code is polling, and so on. Also consider that this might be happening in 3rd-party library code.

@OldCurmudgeon's answer includes two simple versions of what you should be looking for. Even using `sleep(0)` is wasteful, though it is better than `sleep(N)` where `N` is significantly greater than zero.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T23:03:02.883

Were you able to reproduce the customer's original problem (i.e. Were you able to pull files and have them take 4-10 seconds as you mentioned) on a machine that you are using?

If not, then there are too many factors involved to specifically give log4j the credit. I'm with Wilf on this one. There's no way that adding logs could reliably increase the speed of a piece of code...at least there's no way that I can think of.

If you were able to reproduce the issue, then added logs, and then, using the same hardware, same logic, and same files got that much of a speed increase, then you have officially blown my mind.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-08T06:57:10.420

In this sort of situation, what I did was place trace timings at key parts of the application (say 5 - 10 stages) and see what part was taking the most time. In your case you could see what stage speeds up. I suspect there is just one stage which will be faster in which case you can places more timing in that and narrow down to the code where you see the most difference.

In the past where you see strange increase in delay this has been down to network calls such a DNS lookups. When you process the file, are you accessing an external application/network service?

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-07T23:01:50.427

Adding logging adds synchronisation points to your logic. Perhaps what you are seeing is a (odd) side effect of this.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T23:47:19.497

You're looking for a spin loop.

Somewhere in your code (or the underlying framework) you have code that looks something like:

```
while (!ready()) {
  // Do next to nothing.
} 
```

or something that boils down to that.

Essentially the loop is spinning so fast the resource it is waiting for does not get enough time to become available. You will usually also see strangely high CPU usage.

The logging alleviates the condition because it slows down the loop, thus allowing the resource to become ready.

You need to change it to something like:

```
while (!ready()) {
  Thread.currentThread().sleep(0);
} 
```

or, ideally, use a proper blocking mechanism.

# arrays - MongoDB中的结果顺序与$ in？

> ID：12326258
> 
> 赞同：1
> 
> 时间：2012-09-07T22:32:58.167
> 
> 标签：arrays, mongodb, sorting

我正在使用 搜索数组`$in`，在没有指定排序的情况下返回结果的顺序是什么？我希望它们按我搜索的数组的顺序返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T04:46:38.713

一般来说：如果您在没有指定排序顺序的情况下进行搜索，则无法保证结果的排序。

此外，不可能按数组排序（如果您想按所述数组对数组进行排序，则更是如此）。[sort()](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D)使用逻辑比较来根据结果文档中的字段确定升序或降序。

您必须在自己的应用程序代码中实现任何所需的自定义排序逻辑。

一种有用的方法可能是利用 MongoDB 2.2 中的新[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/).. 特别是能够将数组[$unwind到文档流中。](http://docs.mongodb.org/manual/reference/aggregation/#_S_unwind)

例如，将测试数据设置为：

```
{ "_id" : ObjectId("504ac93fb50571321b2f932a"), "a" : [ 1, 2, 4 ] }
{ "_id" : ObjectId("504ac946b50571321b2f932b"), "a" : [ 5, 4, 9 ] }
{ "_id" : ObjectId("504ac94eb50571321b2f932c"), "a" : [ 2, 1, 3 ] }
{ "_id" : ObjectId("504ac954b50571321b2f932d"), "a" : [ 7, 3, 9 ] } 
```

`$in`搜索 [2,3] 会得到匹配的文档：

```
> db.matches.find({'a': { $in: [2,3]}})
{ "_id" : ObjectId("504ac93fb50571321b2f932a"), "a" : [ 1, 2, 4 ] }
{ "_id" : ObjectId("504ac94eb50571321b2f932c"), "a" : [ 2, 1, 3 ] }
{ "_id" : ObjectId("504ac954b50571321b2f932d"), "a" : [ 7, 3, 9 ] } 
```

使用聚合框架，您可以`$match`处理相同的文档，然后处理结果以实现一些基本排序：`$unwind`数组、`$sort`它们，然后将`$group`它们返回结果：

```
db.matches.aggregate(
  { $match : {
       a: { $in: [2,3] }
  }},
  { $unwind : "$a" },
  { $sort: {
      "a": -1
  }},
  { $group : {
      _id: '$_id',
      a: { $addToSet: "$a" }
  }}
) 
```

因此，在此示例中，具有匹配数组的文档现在按数组值的升序排序：

```
{
    "result" : [
        {
            "_id" : ObjectId("504ac94eb50571321b2f932c"),
            "a" : [ 1, 2, 3]
        },
        {
            "_id" : ObjectId("504ac93fb50571321b2f932a"),
            "a" : [ 1, 2, 4 ]
        },
        {
            "_id" : ObjectId("504ac954b50571321b2f932d"),
            "a" : [ 3, 7, 9 ]
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T03:53:19.303

简短的回答：这是不可能的。

# javascript - 如何在鼠标悬停时将对象从开始位置移动到结束位置，然后在鼠标移出时再次返回

> ID：12326263
> 
> 赞同：0
> 
> 时间：2012-09-07T22:33:12.097
> 
> 标签：javascript, animation, positioning

我一直在将 div 框从 a 移动到 b 然后再返回时遇到问题。当鼠标离开 div 框时，我还需要它返回开始位置。到目前为止，这是我想出的。

```
<div id="tank" style=" width:344px; height:300px;
 background-image:url('images/warning2.png');
 box-shadow:0px 0px 100px;
 ;border-radius:20px; position:relative; left:-180px; top:10px;">
 </div>

 <script type="text/javascript">

 document.getElementById('tank').onmouseover = function() {
 var elem = this, 
 pos = -180,

 timer = setInterval(function() {
 pos--;
 elem.style.left = pos+"px";
 if( pos == 500) clearInterval(timer) ;
 document.getElementById('plane').onmouseover = null;
 },1);
 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:03:53.730

如果可以使用`jQuery`，则可以执行以下操作：

```
$("#tank").hover(
  function () {
    $(this).animate({
        left: '-=180'
    });
  }, 
  function () {
    $(this).animate({
        left: '+=180'
    });
  }
);​ 
```

[http://jsfiddle.net/charlescarver/QgF2h/](http://jsfiddle.net/charlescarver/QgF2h/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:24:56.607

你的位置从-180开始，你的最终位置是+500。但是你正在减少位置变量的值，所以它永远不会达到 500。

至于重新退出鼠标，您应该执行以下操作：

```
var timer = null;
var tank = document.getElementById('tank');

function animate(elem, target)
{
    var pos = parseInt(elem.style.left.replace(/[^0-9\-]/g, ""));

    clearInterval(timer);
    timer = setInterval(function()
    {
        elem.style.left = (pos += pos < target ? 1 : -1) + "px";
        if(pos == target) clearInterval(timer) ;
    }, 1);
}

tank.addEventListener("mouseover", function()
{
    animate(this, 500);
}, false);

tank.addEventListener("mouseout", function()
{
    animate(this, -180);
}, false); 
```

​</p>

# gradle - 如何解释 Gradle DSL

> ID：12326264
> 
> 赞同：35
> 
> 时间：2012-09-07T22:33:16.393
> 
> 标签：gradle

我正在尝试学习 Gradle。我喜欢的学习方式是在低层次上了解正在发生的事情。为此，我试图解释文档的[示例 6.1](http://www.gradle.org/docs/current/userguide/tutorial_using_tasks.html#hello)中关于[DSL 参考的情况：](http://www.gradle.org/docs/current/dsl/index.html)

```
task hello {
    doLast {
        println 'Hello world!'
    }
} 
```

我知道这个脚本是在`Project`. 所以我可以从`Project` [文档](http://www.gradle.org/docs/current/dsl/org.gradle.api.Project.html)中看到有很多重载的`task(...)`方法。查看签名，我需要选择一个具有闭包作为最终参数的签名。由于我们没有在`Map`这里传递 a ，我假设被调用的方法是`task(String name, Closure closure)`.

但是，我正在努力解决的部分是，在此脚本中，文字字符串如何`hello`映射到`String`.

另一个示例是[示例 6.7](http://www.gradle.org/docs/current/userguide/tutorial_using_tasks.html#lazyDependsOn)：

```
task taskX(dependsOn: 'taskY') << {
    println 'taskX'
}

task taskY << {
    println 'taskY'
} 
```

在这里，我假设我们正在调用`task(Map<String, ?> args, String name)`方法的形式。但，

1.  同样，文字字符串如何`taskX`以`String`?
2.  鉴于括号不用于构造`Map`文字，括号中的部分如何最终成为 a `Map`？
3.  如果我正确地找出了正在调用的方法，那么与 DSL 文档相比，脚本中给出的参数顺序是否错误？
4.  使用括号的语法像方法调用一样查找整个世界。这可能表明委托给`Project`对象以解析`taskX`为未知方法。`task`但是，AFAIK，鉴于方法调用紧接在它之前，方法调用此时在语法上无效。

正如您所看到的，对于示例语法如何映射到 DSL 参考指南，我有点困惑，这让我很难真正理解基层发生的事情。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-07T22:56:19.727

任务声明语法的`task foo`变化是特殊的，因为它是使用 Groovy 编译器插件实现的。据我所知，这是唯一使用编译器插件来支持特殊语法的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-24T09:00:31.213

这是一个很好的文档： [https ://ouyi.github.io/post/2017/12/09/groovy-gradle.html](https://ouyi.github.io/post/2017/12/09/groovy-gradle.html)

最后写在这里：

“自定义任务的语法很棘手。例如：

```
task myTask(type:Tar, dependsOn anotherTask) {
    // clousre
} 
```

我可以弄清楚这可能是在调用`Task task(Map<String,?> args, String name, Closure configureClosure)`项目对象上定义的方法，但我不知道如何将`myTask()`构造与 name 参数匹配。而且我并不孤单，类似的讨论在这里和这里。

事实证明，Gradle 使用了 Groovy 的一些高级元编程特性（编译时元编程）来将`myTask()`构造转换为名称参数。老实说，这是 Gradle 中我不喜欢的部分，因为实现那些语法糖似乎太棘手了（而且过多的糖可能不健康）。毕竟，Gradle 只是一个构建工具，应该易于理解、使用和扩展。”

# image-processing - 道路交通监测的背景减法

> ID：12326265
> 
> 赞同：0
> 
> 时间：2012-09-07T22:33:28.540
> 
> 标签：image-processing, computer-vision, background-subtraction

我必须在视频流（记录）上检测汽车并提供一些交通数据。我读过背景减法是最重要的步骤，这样我们就可以提取前景对象。

问题是，我们如何为彩色框架做到这一点？我读过的文章更多地谈论黑白图像。

我想使用自动背景去除，它使用帧差分（在我的理解中）。

如果我以灰度进行删除，我是否仍然能够重播带有彩色跟踪对象的视频？因为重点是能够在原始视频上显示被跟踪的汽车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:02:05.977

使用灰色是因为它减少了所需的信息，而不是从信息中取出整体含义。

背景提取是对“场景的一般外观”的提取。前景是添加到图像中的所有对象。从技术上获取图像的差异是可行的。但是，平均所有图像将为您提供最佳版本的背景。[这假设了一些事情，但我稍后再谈]。一旦你有了背景，这将帮助你创建一个蒙版，你可以用它来将它应用到一个简单的图像上。一旦您使用将分离出前景对象并将其用于您想要的对象的蒙版。

颜色真的只对你有用的跟踪。[平均色移可能会帮助您进行跟踪]。

假设：这是假设您将有足够的视频来创建一个平均场景，并且前景对象最终会消失。[否则他们会变成背景：也就是留下一辆抛锚的车辆]。此外，您平均的方式是另一个问题，重大的季节变化可能会改变背景。【过冬后路容易开裂】

# javascript - 奇怪的javascript问题

> ID：12326270
> 
> 赞同：-1
> 
> 时间：2012-09-07T22:34:28.010
> 
> 标签：javascript, jquery, jquery-ui

请看看这个小提琴

[http://jsfiddle.net/Qstuw/7/](http://jsfiddle.net/Qstuw/7/)

当您进入页面时，默认选择第一个答案。尝试选择第二个答案。然后返回第一个并再次选择它。我不明白我错过了什么，但我无法再次选择第一个答案。有什么建议吗？

# 更新

根据第一个答案：

真正的答案必须在答案之间“切换”。就像在 SO 上一样。当您单击某个活动按钮时，必须启用所有其他按钮，并且必须禁用您单击的按钮。仅在您单击的答案上出现绿色边框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:50:46.177

检查这个[UPDATED FIDDLE](http://jsfiddle.net/sushanth009/Qstuw/24/)。我已经进行了必要的更改以使其正常工作。您正在缓存对象并在更改选择时为它们分配新元素

//

```
 AnswerDiv.on("click", ".NotSelectedAnswer", function(){
        $(this).button("disable");
        NotSelectedAnswerBtn= $(".NotSelectedAnswer");
        SelectedAnswerBtn= $(".SelectedAnswer");
        SelectedAnswerBtn.removeClass("SelectedAnswer").addClass("NotSelectedAnswer").button("enable");
        NotSelectedAnswerBtn.removeClass("NotSelectedAnswer").addClass("SelectedAnswer").button("disable");
        $("div.Answer[data-id="+SelectedAnswerBtn.data("id")+"]").toggleClass("SelectedDiv");
        $("div.Answer[data-id="+$(this).data("id")+"]").toggleClass("SelectedDiv");
    }) 
```

还要确保最初将 var 分配给局部变量。这是一个很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:40:08.347

您没有重新声明按钮。应该让你更接近

```
AnswerDiv.on("click", ".NotSelectedAnswer", function(){
    $(this).button("disable");

    SelectedAnswerBtn.removeClass("SelectedAnswer").addClass("NotSelectedAnswer").button("enable");
    $("div.Answer[data-id="+SelectedAnswerBtn.data("id")+"]").toggleClass("SelectedDiv");
    $("div.Answer[data-id="+$(this).data("id")+"]").toggleClass("SelectedDiv");

    NotSelectedAnswerBtn=$(".NotSelectedAnswer");
    NotSelectedAnswerBtn.button('enable');
SelectedAnswerBtn=$(".SelectedAnswer");
AnswerDiv=$("div.Answer");
}) 
```

# c++ - 对派生类的未定义引用

> ID：12326273
> 
> 赞同：4
> 
> 时间：2012-09-07T22:34:33.663
> 
> 标签：c++, constructor, undefined-reference

编辑：与[c++ 未定义的对 `vtable 的引用相关](https://stackoverflow.com/questions/12327679/c-undefined-reference-to-vtable/12327728#12327728)

我正在尝试做一个关于继承的项目，我收到了这个错误：

```
/tmp/ccw1aT69.o: In function `main':
main.cpp:(.text+0x15): undefined reference to `Derived::Derived(int)'
/tmp/ccw1aT69.o: In function `Derived::~Derived()':
main.cpp:(.text._ZN20DerivedD2Ev[_ZN20DerivedD5Ev]+0x13): undefined reference to `vtable for Derived'
main.cpp:(.text._ZN20DerivedD2Ev[_ZN20DerivedD5Ev]+0x1f): undefined reference to `Base::~Base()'
collect2: ld returned 1 exit status 
```

这是我的代码：

主.cpp：

```
#include <iostream>
#include "Base.h"
#include "Derived.h"

int main() {
    Derived intList(25);
} 
```

基地.h：

```
#ifndef BASE_H
#define BASE_H

class Base {
    public:
            ...
            Base (const Base& otherList);
            virtual ~Base();
    protected:
            int *list;
            int length;
            int maxSize;
};

#endif 
```

基础.cpp：

```
#include "Base.h"
#include <iostream>

using namespace std;

...definitions of my members...

Base::Base (int size) {
//stuff
}
Base::~Base() {
    delete [] list;
}
Base::Base (const Base& otherList) {
//stuff
} 
```

派生的.h：

```
#ifndef DERIVED_H
#define DERIVED_H
#include "Base.h"

class Derived: public Base {
    public:
             ...
            Derived (int size = 100);
            ~Derived(); //THIS LINE ADDED AFTER FIRST ANSWER
};

#endif 
```

派生的.cpp：

```
#include "Derived.h"
#include <iostream>

using namespace std;

Derived::Derived (int size)
        :Base(size){
} 
```

是什么导致了这个错误？看起来我不能调用构造函数，但对我来说看起来不错。

编辑：我尝试了第一个解决方案。现在错误：

```
/tmp/ccA4XA0B.o: In function `main':
main.cpp:(.text+0x15): undefined reference to `Derived::Derived(int)'
main.cpp:(.text+0x21): undefined reference to `Derived::~Derived()'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T22:46:32.130

您已经在 中声明了一个虚拟析构函数`Base`，但您从未定义它。它需要定义在`Derived`（以及`Base`因为它不是纯虚函数），因为一旦`main`退出它就会被调用。你应该有：

```
class Base {
public:
    // ...
    virtual ~Base();
};

Base::~Base() {}

class Derived : public Base {
public:
    // ...
    ~Derived();
};

Derived::~Derived() { /* whatever */ } 
```

* * *

这至少是您的一个错误的原因。我不知道这个是不是红鲱鱼，但它似乎是：

> /tmp/ccw1aT69.o：在函数`main': main.cpp:(.text+0x15): undefined reference to`Derived::Derived(int)'

您定义`Derived::Derived(int)`，因此很难想象这是一个真正的错误。定义你的析构函数，看看它是否消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T00:26:40.533

好的，只是为了清楚起见，因为除了答案之外，我无法将格式化的代码放入任何内容中。您不需要仅仅因为您的基类具有虚拟 dtor 或纯方法就在派生类中提供析构函数。以下是我可以在三种不同的构造/破坏条件下证明这一点的最简单的方法。输出列在代码之后。我希望这至少有助于@Jeff。我在 VS2005/2008/2010 和一个古老的 gcc 4.1.2 下测试了这个，所以最好是对的。

```
#include <iostream>

class Base {
public:
    Base()
        { std::cout << "Base()" << std::endl; };

    virtual void call_me() = 0;

    virtual ~Base()
        { std::cout << "~Base()" << std::endl << std::endl; };
};

class Derived : public Base {
public:
    Derived(int i=1)
        { std::cout << "Derived(" << i << ")" << std::endl; }

    // Base::call_me requirements.
    void call_me() 
        { std::cout << "call_me()" << std::endl; }
};

int main(int argc, char* argv[])
{
    // use derived class pointer type
    Derived* pDerived = new Derived();
    pDerived->call_me();
    delete pDerived;

    // use base class pointer type
    Base* pBase = new Derived(2);
    pBase->call_me();
    delete pBase;

    // scope based
    {
        Derived obj(3);
        obj.call_me();
    }
    return 0;
} 
```

输出是：

```
Base()
Derived(1)
call_me()
~Base()

Base()
Derived(2)
call_me()
~Base()

Base()
Derived(3)
call_me()
~Base() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:46:34.263

```
main.cpp:(.text+0x15): undefined reference to `Derived::Derived(int)' 
```

正如您的标题问题所说，此错误消息并未说明对*类的未定义引用。*相反，它抱怨对采用 int 参数的*构造函数的未定义引用。*从我粗略地看一下你的代码，你只声明了这个构造函数而没有定义它。将定义添加到您的 .cpp 文件中，您应该可以解决此错误。

此外，通常的做法是在所有成员函数声明之前放置构造函数声明。起初我错过了这些声明，因为它们不是我所期望的。我强烈建议您这样做是为了避免将来在此处提问时产生误解。

# actionscript-3 - AS3 - 分数未更新

> ID：12326274
> 
> 赞同：0
> 
> 时间：2012-09-07T22:34:35.123
> 
> 标签：actionscript-3, flash, actionscript

我已经设置了当玩家击中硬币时，应该添加一个点（实际上我可以看到它是通过跟踪添加的）但是 textField 没有更新。我做错了吗？顺便说一句，文本字段已经是动态的，我已经合并了字体。

```
coin.addEventListener(Event.ENTER_FRAME, addScore);

var score:Number = 0;
scoreCounter.text = "0";

function addScore (e) {
if (objPlayer.hitTestObject(coin)) {
updateScore();
trace("Score: " + score);
coin.x = - 1 - coin.width/2;
    }
}
 function updateScore() {
    score++;
    scoreCounter.text = String(score);
} 
```

我也尝试过这种方法：

```
coin.addEventListener(Event.ENTER_FRAME, addScore);

var score:int = 0;

function addScore (e) {
if (objPlayer.hitTestObject(coin)) {
    score++;
    updateScore();
    trace("Score: " + score);
    coin.x = - 1 - coin.width/2;
}
}
function updateScore():void {
 scoreCounter.text = ("Score: " + score);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:14:58.053

看起来你的代码很好。您使用特定字体（Arial），因此您需要嵌入该字体。或者，改用**_sans**字体。那么它应该适合你。

# php - 简单的查找和替换脚本 PHP/MySQL

> ID：12326285
> 
> 赞同：2
> 
> 时间：2012-09-07T22:35:51.813
> 
> 标签：php, mysql, database

我一直在关注这个简单的脚本，并认为是时候尝试寻求帮助了。我正在尝试制作一个 PHP 脚本来与我的数据库进行通信。我希望能够编写一个包含所有要查找的单词和替换它们的所有单词的数组。例子：

数组（find_word1、replace_word1、find_word2、replace_word2....等）

我还希望能够指定要查看的表，我也会手动更改它。

我将手动填写所有单词，但我想让它动态化，这样如果我的数组长度发生变化，它就不会中断。

我已经尝试了很多事情，这就是我到目前为止所拥有的：

```
 <?php

//set up variables and enter your credentials here
$dbname = "name"; 
$dbhost = "localhost";
$dbpass = "password";
$dbuser = "user";
$tbl_name = "Chairs";
//set up your master array! Array goes in this or
$mstr_array = array(
                "find1", "replace1",
                "find2", "replace2");

//connect to database
$con = mysql_connect($dbhost, $dbuser, $dbpass) or die('no connection:'  . mysql_error());
$db = mysql_select_db($dbname) or die ('cant select db: ' . mysql_error());

// reteive each column
$sql = "SHOW COLUMNS FROM `{$tbl_name}`";
$res = mysql_query($sql) or  die ('could not get columns: ' . mysql_error());
$find = 0;
$replace = 1;

while ($col = mysql_fetch_array($res)) {

        $sql = "UPDATE `{$tbl_name}` SET `{$col[0]}` = REPLACE(`{$col[0]}`, '{$mstr_array[$find]}' , '{$mstr_array[$replace]}')";
        $find = $find + 2;
        $replace = $replace + 2;
}

?> 
```

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:57:19.853

我想到的第一件事是，而不是使用：

```
$mstr_array = array(
                "find1", "replace1",
                "find2", "replace2"); 
```

采用：

```
$mstr_keys = array('find1', 'find2', ....);
$mstr_values = array('replace1', 'replace2', ....); 
```

然后在查询中您可以简单地使用：

```
$count = 0;
$sql = "UPDATE `{$tbl_name}` SET `{$col[0]}` = REPLACE(`{$col[0]}`, '{$mstr_keys[$count]}' , '{$mstr_values[$count]}')";
$count++; 
```

我希望这是你要找的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:00:50.083

有一些错误。$col[0] 将返回列中的值，而不是列名。如果您正在使用这样的更新查询，您需要定义列名，而不是将值定义为设置值，例如：

```
SET column_name = REPLACE(column_name, ... 
```

但是，如果您知道列名或可以将其设置为变量，那么您只需要以下内容：

```
$column = "chairType";
for($i=0;$i<count($mstr_array);$i++){
    $find=$mstr_array($i++);
    $replace = $mstr_array($i);

    $sql = "UPDATE '{$tbl_name}' SET '{$column}' = REPLACE('{$column}',$find,$replace)
    $mysql_query($sql) or die(mysql_error());
} 
```

但是请注意，这将替换列与 $find 匹配的所有行。

# c# - 使用 C# SDK 获取 facebook 群组列表

> ID：12326292
> 
> 赞同：1
> 
> 时间：2012-09-07T22:37:26.123
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

> **可能重复：**
> [如何使用图形 api 获取用户的 facebook 群组列表](https://stackoverflow.com/questions/11990123/how-to-get-a-list-of-facebook-groups-for-a-user-using-graph-api)

我是 facebook 的 C# SDK 的新手。有人可以告诉我如何使用 C# 获取用户组列表，我需要他们用每个组 ID 填充组合框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:55:54.190

没有一个。找到另一种方法来做到这一点。对不起。

# solr - 在多词查询搜索中获取 OR 而不是 AND

> ID：12326293
> 
> 赞同：2
> 
> 时间：2012-09-07T22:37:29.383
> 
> 标签：solr

当我对一个单词进行查询时，我的分面

效果很好，但是当我搜索多个单词时，Solr 将每个单词视为 OR。例如线性代数，返回线性，然后是代数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:53:09.153

如果要更改默认设置，可以在 中进行更改`schema.xml`。找到如下所示的行：

```
<solrQueryParser defaultOperator="OR"/> 
```

并将其更改`OR`为`AND`.

如果您不想更改全局默认值或者您无权访问它，您可以使用[本地参数](http://wiki.apache.org/solr/LocalParams)和前缀`{!q.op=AND}`来发送到 Solr 的查询。

# ms-access - 计算 MS Access 中的季节性成本

> ID：12326294
> 
> 赞同：0
> 
> 时间：2012-09-07T22:37:39.720
> 
> 标签：ms-access

我正在构建一个 Access 数据库，该数据库需要计算每晚的季节性成本（基于酒店 ID）并填充查询中日期范围的整个成本。目前，所有都必须分段计算和/或手动输入。

我已经尝试过各种表和查询，但它们都留下了很多需要手动输入的内容。我想看看是否有办法完全自动化这个计算，任何帮助都将不胜感激。

下表显示了一个日期范围，其中一晚费用为 118 美元，另一晚为 159 美元，总计 277 美元。我希望能够运行自动查询来填充总成本并删除除入住和退房日期之外的所有内容（请原谅间距不佳，仍在确定此处帖子的格式。）

```
  身份证 | 酒店 | 签到 | 结帐 | 数字峰值 | 峰值成本 | 数字非峰值 | 非峰值成本 | 总消耗

   1 | CILBV | 2012 年 4 月 6 日 | 2012 年 4 月 8 日 | 0000001 | $118.00 | 0000001 | $159.00 | $277.00

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:32:08.890

您绝对应该能够构建一个接受签入+签出日期的查询，并返回总成本。关键信息是酒店对每个日期范围的收费。

假设该表有这样的列（如果它分散在多个表中，那么您必须使用适当的内部连接构建查询）。

```
hotel_id peak_start_date peak_end_date peak_price non_peak_price

```

棘手的部分是有很多可能的情况：

1.  *高峰*前开始和结束
**   高峰前开始，高峰结束*   高峰前开始，高峰后结束*   高峰开始，高峰结束*   高峰开始，高峰结束*   高峰后开始，高峰后结束*

 *这只是开始+结束日期在同一年的情况；下一年结帐时还有六种情况。

所以问题是如何最好地进行计算，高峰天数和非高峰天数。您可以：

1.  构造一系列复杂的嵌套`IIF`语句
2.  使用 VBA 方法执行逻辑，首先从表中提取必要的信息
3.  1和2的某种组合

我可能会选择#3，构建几个简单的帮助查询，但将实际逻辑放入 VBA 方法中。

* * *

如果您尝试并遇到困难，您可以随时在这里提出另一个问题（更具体的问题往往会得到更好的答案）。*

# android - 从另一个函数调用子函数

> ID：12326298
> 
> 赞同：0
> 
> 时间：2012-09-07T22:37:57.440
> 
> 标签：android

在这里，我想调用`sortByDateModified()`函数并将该行包含`Arrays.sort(files, filecomparatorByLastModified)`在该函数中。但是该行`Arrays.sort(files, filecomparatorByLastModified)` 位于另一个函数中`public void getDir(String dirPath)`。如何从函数中调用另一个函数的子函数...

```
public void onClick(View v) { sortByDateModified(); }       

public void getDir(String dirPath) {
    myPath.setText("Location: " + dirPath);
    item = new ArrayList<String>();
    path = new ArrayList<String>();
    File f = new File(dirPath);
    File[] files = f.listFiles();

    if(!dirPath.equals(root)) {
        item.add(root);
        path.add(root);
        item.add("../");
        path.add(f.getParent());    
    }

    Arrays.sort(files, filecomparatorByLastModified);
    Arrays.sort(files, filecomparator);

    for(int i=0; i < files.length; i++) {
        File file = files[i];

        if(!file.isHidden() && file.canRead()){
            path.add(file.getPath());
            if(file.isDirectory()){
                item.add(file.getName() + "/");
            }
            else { item.add(file.getName()); }
        }   
    }

    ArrayAdapter<String> fileList = new ArrayAdapter<String>(this, R.layout.row, item);
    setListAdapter(fileList);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:45:00.343

最终，您将不得不共享目录或文件数组变量。

```
File[] fileList = null;

public void methodLikeOnCreateOrConstructor( String dirPath )
{
   //needs to be initialized before onClick could be called
   fileList = getDir( dirPath );

}

public void onClick(View v) {
   Arrays.sort(fileList, filecomparatorByLastModified);      
}

public void getDir( String dirPath ) 
{
   //...
   File f = new File( dirPath );
   files = f.listFiles();

   //...
} 
```

# playframework-2.0 - play framework 2 application.conf中的端口定义

> ID：12326301
> 
> 赞同：2
> 
> 时间：2012-09-07T22:38:35.750
> 
> 标签：playframework-2.0

有人知道是否可以在 Play Framework 2 应用程序的 application.conf 文件中定义 http 端口吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:38:56.200

在 Play 2.x 中，在命令行（或 Play 的控制台）中运行/启动应用程序时设置端口

**例子：**

1.  使用端口在开发模式下运行应用程序`9123`：

    ```
    bash#: play "~run 9123" 
    ```

2.  在端口上以生产模式启动应用程序`9321`：

    ```
    bash#: play "start 9321" 
    ```

3.  您可以通过首先触发控制台来执行相同的操作，然后将命令放在前面的引号中：

    ```
    bash#: play 

    #(after console's load)
    [your-new-app] $ ~run 9123 
    ```

当然，如果您总是使用指定的端口，最好编写一个 shell 脚本（或 Windows 上的 *.bat 文件）并将它们命名为`run-local-dev.sh`等`start-local-prod.sh`。

# z3 - 需要帮助理解方程

> ID：12326306
> 
> 赞同：6
> 
> 时间：2012-09-07T22:39:14.127
> 
> 标签：z3, z3py

有方程 Pell`x*x - 193 * y*y = 1`

在 z3py 中：

```
x = BitVec('x',64)
y = BitVec('y',64)
solve(x*x - 193 * y*y == 1, x > 0, y > 0) 
```

结果：`[y = 2744248620923429728, x = 8169167793018974721]`

为什么？

PS 有效答案：[y = 448036604040，x = 6224323426849]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T02:48:37.613

可以使用位向量算术来求解丢番图方程。基本思想是用来`ZeroExt`避免Pad指出的溢出。例如，如果我们将两个位向量乘以size `x`，那么我们必须将零位添加到and以确保结果不会溢出。也就是说，我们写：`y``n``n``x``y`

```
 ZeroExt(n, x) * ZeroExt(n, y) 
```

以下 Python 函数集可用于“安全地”将任何丢番图方程编码`D(x_1, ..., x_n) = 0`为位向量算术。通过“安全”，我的意思是如果有适合用于编码的位数的解决方案`x_1`, ..., `x_n`，那么最终将找到模资源，例如内存和时间。使用这些函数，我们可以将 Pell 方程编码`x^2 - d*y^2 == 1`为`eq(mul(x, x), add(val(1), mul(val(d), mul(y, y))))`。该函数`pell(d,n)`尝试查找`x`和`y`使用`n`位的值。

以下链接包含完整示例： [http ://rise4fun.com/Z3Py/Pehp](http://rise4fun.com/Z3Py/Pehp)

话虽如此，使用位向量算术求解 Pell 方程是非常昂贵的。问题是乘法对于位向量求解器来说真的很难。Z3 使用的编码复杂度是 上的二次方`n`。在我的机器上，我只设法解决了具有小解的 Pell 方程。例子：`d = 982`, `d = 980`, `d = 1000`, `d = 1001`. 在所有情况下，我都使用了`n`小于`24`. 我认为对于具有非常大的最小正解的方程没有希望，例如`d = 991`我们需要大约 100 位来编码 和 的`x`值`y`。对于这些情况，我认为专门的求解器会表现得更好。

顺便说一句，rise4fun 网站的超时时间很小，因为它是一个共享资源，用于运行 Rise 组中的所有研究原型。因此，要求解非平凡的 Pell 方程，我们需要在自己的机器上运行 Z3。

```
def mul(x, y):
  sz1 = x.sort().size()
  sz2 = y.sort().size()
  return ZeroExt(sz2, x) * ZeroExt(sz1, y)
def add(x, y):
  sz1 = x.sort().size()
  sz2 = y.sort().size()
  rsz = max(sz1, sz2) + 1
  return ZeroExt(rsz - sz1, x) + ZeroExt(rsz - sz2, y)  
def eq(x, y):
  sz1 = x.sort().size()
  sz2 = y.sort().size()
  rsz = max(sz1, sz2)
  return ZeroExt(rsz - sz1, x) == ZeroExt(rsz - sz2, y)
def num_bits(n):
  assert(n >= 0)
  r = 0
  while n > 0:
    r = r + 1
    n = n / 2
  if r == 0:
    return 1
  return r
def val(x):
  return BitVecVal(x, num_bits(x))
def pell(d, n):
  x  = BitVec('x', n)
  y  = BitVec('y', n)
  solve(eq(mul(x,x), add(val(1), mul(val(d), mul(y, y)))) , x > 0, y > 0) 
```

# javascript - 如何将dojo工具提示定位在靠近文本的位置？

> ID：12326307
> 
> 赞同：2
> 
> 时间：2012-09-07T22:39:20.037
> 
> 标签：javascript, dojo

就像标题说的那样，我希望能够在靠近文本的地方显示工具提示，目前它在单元格中显示得很远。

Tobe 指出，对于大文本，工具提示位置正确，仅对小文本失败。

在 DOJO 中，如何将工具提示定位在靠近文本的位置？

我有这段代码片段在网格单元格中显示工具提示。

html

```
<div class="some_app claro"></div> 
```

.

```
..

          this.createGrid = function () {
            var me = this;
            var options = me.options;

            this.grid = new dojox.grid.EnhancedGrid ({

              width: options.width,
              height: options.height,
              query: { id: "*" },
              keepSelection: true,
              formatterScope: this,
              structure: options.columns,
              columnReordering: options.draggable,
              rowsPerPage: options.rowsPerPage,

              //sortInfo: options.sortInfo,
              plugins : {
                menus: options.menusObject,
                selector: {"row":"multi", "cell": "disabled" },

              },

              canSort: function(col) {
                if (options.columns[Math.abs(col)-1].sortable) return true;
                else return false;
              },

              onStyleRow: function (row) {
                var grid = me.grid;
                var item = grid.getItem(row.index);

                if (item && options.rowClass(item)) {
                  row.customClasses += " " +options.rowClass(item);                    
                  if (grid.selection.selectedIndex == row.index) {
                    row.customClasses += " dojoxGridRowSelected";            
                  }    
                  grid.focus.styleRow(row);
                  grid.edit.styleRow(row);     
                }
              },

              onCellMouseOver: function (e){  
              // var pos = dojo.position(this, true);
             // alert(pos);
                console.log( e.rowIndex +" cell node :"+ e.cellNode.innerHTML);
               // var pos = dojo.position(this, true);
                console.log( " pos :"+ e.pos);
                if (e.cellNode.innerHTML!="") {
                  dijit.showTooltip(e.cellNode.innerHTML, e.cellNode);
                }
              },

              onCellMouseOut: function (e){
                dijit.hideTooltip(e.cellNode);
              },

              onHeaderCellMouseOver: function (e){   
                if (e.cellNode.innerHTML!="") {
                  dijit.showTooltip(e.cellNode.innerHTML, e.cellNode);
                }
              },

              onHeaderCellMouseOut: function (e){
                dijit.hideTooltip(e.cellNode);
              },

            });    

       //  ADDED CODE FOR TOOLTIP
        var gridTooltip = new Tooltip({
                connectId: "grid1",
                selector: "td",
                position: ["above"],
                getContent: function(matchedNode){
                    var childNode = matchedNode.childNodes[0];
                    if(childNode.nodeType == 1 && childNode.className == "user") {
                        this.position = ["after"];
                        this.open(childNode);
                        return false;                
                    }
                    if(matchedNode.className && matchedNode.className == "user") {
                        this.position = ["after"];            
                    } else {
                        this.position = ["above"];                               
                    }

                    return matchedNode.textContent;
                }
            });
        ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T08:32:47.390

工具提示位于单元格周围，即`<td>`HTML 中的元素，而不是文本。有两种出路：

A. 使用[格式化程序](http://livedocs.dojotoolkit.org/dojox/grid/DataGrid#formatting-a-date-field)将文本包装到一个元素中并放置`Tooltip`到表格单元格的这个子元素中。

![在此处输入图像描述](../Images/62aff4b34d692d557311d5e3fbf01678.png)

B. 放置`Tooltip`在单元格上方：

![在此处输入图像描述](../Images/ce238382768e4374f9ba9b1577bfedb7.png)

```
var gridTooltip = new Tooltip({
    connectId: "grid1",
    selector: "td",
    position: ["above"],
    getContent: function(matchedNode){
        return matchedNode.textContent;
    }
}); 
```

在 jsFiddle 上查看 A 和 B 如何工作：http: [//jsfiddle.net/phusick/7F5Cr/](http://jsfiddle.net/phusick/7F5Cr/)

# java - 如何在 Java 中调试总线错误？

> ID：12326309
> 
> 赞同：1
> 
> 时间：2012-09-07T22:39:23.913
> 
> 标签：java, macos, lwjgl, libgdx, bus-error

我最近开始在一些我有一段时间没有运行的代码中遇到总线错误，我不确定发生了什么变化，但我希望能够确定原因。不幸的是，我习惯于在 Eclipse 调试器中调试错误，但这在这种情况下无济于事，因为程序只是终止了。

```
Java information:
 Exception type: Bus Error (0xa) at pc=164c38674

 Java VM: Java HotSpot(TM) 64-Bit Server VM (20.10-b01-428 mixed mode macosx-amd64)

Current thread (10d8bb800):  JavaThread "AWT-EventQueue-0" [_thread_in_native, id=547360768, stack(120901000,120a01000)]
Stack: [120901000,120a01000]
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  org.lwjgl.opengl.GL11.nglDrawArrays(IIIJ)V+0
J  com.badlogic.gdx.graphics.Mesh.render(Lcom/badlogic/gdx/graphics/glutils/ShaderProgram;III)V
j  org.viridia.fta.engine.particles.QuadSpriteBatchRenderer.flush()V+140
J  org.viridia.fta.engine.particles.QuadSpriteAppearance.draw(Lorg/viridia/fta/engine/particles/ParticleSystem;Lcom/badlogic/gdx/math/Matrix4;Lcom/badlogic/gdx/math/Matrix4;[Lorg/viridia/fta/engine/particles/Particle;II)V
j  org.viridia.fta.engine.particles.ParticleEmitter.render(Lorg/viridia/fta/engine/particles/ParticleSystem;Lcom/badlogic/gdx/math/Matrix4;Lcom/badlogic/gdx/math/Matrix4;)V+16
j  org.viridia.fta.engine.particles.ParticleSystem.render(Lcom/badlogic/gdx/math/Matrix4;Lcom/badlogic/gdx/math/Matrix4;)V+29
j  org.viridia.tiles.ui.TileMapEditor.render()V+474
j  com.badlogic.gdx.backends.lwjgl.LwjglAWTCanvas.render()V+190
j  com.badlogic.gdx.backends.lwjgl.LwjglAWTCanvas$1.paintGL()V+4
j  org.lwjgl.opengl.AWTGLCanvas.paint(Ljava/awt/Graphics;)V+172
j  org.lwjgl.opengl.AWTGLCanvas.update(Ljava/awt/Graphics;)V+2
j  sun.awt.RepaintArea.updateComponent(Ljava/awt/Component;Ljava/awt/Graphics;)V+6
j  sun.awt.RepaintArea.paint(Ljava/lang/Object;Z)V+305 
```

（ETC...）

最近确实发生了变化的一件事是 OS X“软件更新”服务最近更新了默认 JVM。但是，这可能不是原因 - 我尝试在 Eclipse 中的不同 JVM 下运行并遇到同样的问题。

正如您从堆栈转储中看到的那样，我正在使用轻量级 Java 游戏库，它是通过 libgdx 调用的。据我所知，我自己的代码在这里没有做任何特别的事情，并且在我最后一次尝试时（大约一个月前）它运行良好：

```
 public void flush() {
    if (vertexCount > 0 && shader != null) {
      mesh.setVertices(vertices, 0, vertexCount);
      shader.begin();
      Gdx.gl20.glEnable(GL20.GL_BLEND);
      Gdx.gl20.glDepthMask(false);
      Gdx.gl20.glEnable(GL20.GL_DEPTH_TEST);
      if (texture != null && hasTexture) {
        texture.bind(0);
        shader.setUniformi("uTexture0", 0);
      }
      shader.setUniformMatrix("uViewXForm", view);
      shader.setUniformMatrix("uProjXForm", proj);
      mesh.render(shader, GL20.GL_TRIANGLES, 0, vertexCount);
      shader.end();
      Gdx.gl20.glDepthMask(true);
    }
    vertexCount = 0;
  } 
```

# php - PHP正则表达式查找字符串直到

> ID：12326317
> 
> 赞同：0
> 
> 时间：2012-09-07T22:40:09.233
> 
> 标签：php, regex, preg-match

我有一个 url 抓取器设置，它工作正常。它抓取响应标头中的文档的 url，例如：

```
<script type='text/javascript' language='JavaScript'>
document.location.href = 'http\x3a\x2f\x2fcms.example.com\x2fd\x2fd\x2fworkspace\x2fSpacesStore\x2f61d96949-b8fb-43f1-adaf-0233368984e0\x2fFinancial\x2520Agility\x2520Report.pdf\x3fguest\x3dtrue'
</script> 
```

这是我的抓取脚本。

```
<?php

set_time_limit(0);
$target_url = $_POST['to'];
$html =file_get_contents($target_url);

$pattern = "/document.location.href = '([^']*)'/";
preg_match($pattern, $html, $matches, PREG_OFFSET_CAPTURE, 3);

$raw_url = $matches[1][0];
$eval_url = '$url = "'.$raw_url.'";';

eval($eval_url);
echo $url; 
```

我们必须在我们的文档管理系统中添加一个变量，所以每个文档 url 都需要在 url 的末尾加上 ?guest=true。当我们这样做时，我的抓取器返回了完整的 url 并将其附加到文件名中。所以我试图让它只抓取 url，直到它到达 /guest=true。使用此代码：

```
<?php

set_time_limit(0);

$target_url = $_POST['to'];
$html =file_get_contents($target_url);

$pattern = "/document.location.href = '([^']*)\x3fguest\x3dtrue'/";

preg_match($pattern, $html, $matches, PREG_OFFSET_CAPTURE, 3);

$raw_url = $matches[1][0];
$eval_url = '$url = "'.$raw_url.'";';

eval($eval_url);
echo $url; 
```

为什么直到 ?guest=true 部分才返回 url？aka 为什么这不起作用？解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:56:26.610

这就是解决方案。您将直接获得比赛，而不是分组。

```
set_time_limit(0);

$target_url = $_POST['to'];
$html = file_get_contents($target_url);

$pattern = '/(?<=document\.location\.href = \').*?(?=\\\\x3fguest\\\\x3dtrue)/';

preg_match($pattern, $html, $matches))

$raw_url = $matches[0];
$eval_url = '$url = "'.$raw_url.'";';

eval($eval_url);
echo $url; 
```

你可以在**[这里](http://regexr.com?323rb)**查看结果。

您的正则表达式的问题在于您没有转义字符串 ( `.`and `\`) 中您想要捕捉文学作品的某些字符。此外，您不需要使用`PREG_OFFSET_CAPTURE`和偏移`3`. 我猜您是从[本页](http://php.net/manual/en/function.preg-match.php)示例中复制了这些值。

这是正则表达式模式的解释：

```
# (?<=document\.location\.href = ').*?(?=\\x3fguest\\x3dtrue)
# 
# Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=document\.location\.href = ')»
#    Match the characters “document” literally «document»
#    Match the character “.” literally «\.»
#    Match the characters “location” literally «location»
#    Match the character “.” literally «\.»
#    Match the characters “href = '” literally «href = '»
# Match any single character that is not a line break character «.*?»
#    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=\\x3fguest\\x3dtrue')»
#    Match the character “\” literally «\\»
#    Match the characters “x3fguest” literally «x3fguest»
#    Match the character “\” literally «\\»
#    Match the characters “x3dtrue” literally «x3dtrue» 
```

*此答案已被编辑以反映问题的更新。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:45:00.143

看来您的正则表达式是错误的。你添加到你的正则表达式，它从字面上`\?guest=true`匹配。`?guest=true`

在您的示例响应标头中，它以 结尾`\x3fguest\x3dtrue`，这是不同的。

尝试：

```
$pattern="/document.location.href = '([^']*)(\?|(\\x3f))guest(=|(\\x3d))true'/"; 
```

我只是替换了以下子表达式：

*   `\?`现在`(\?|(\\x3f))`是匹配`?`或`\x3f`字面上的
*   `=` 现在`(=|(\\x3d))`是匹配`=`或`\x3d`字面上的

这样，如果使用`?`or的转义十六进制表示`=`，它仍然会正确匹配。

# vb.net - Visual Basic .NET（128 位或更多位）是否有任何大整数类？

> ID：12326319
> 
> 赞同：2
> 
> 时间：2012-09-07T22:40:22.830
> 
> 标签：vb.net, class, integer, biginteger, bits

好吧，我可以找到许多大型整数库，但它们适用于除 VB.NET 之外的所有编程语言。有谁知道可以处理非常大的数字的 Visual Basic .NET 的类/库？（我想处理 1024 甚至更多位）。我需要它的唯一计算支持加法、替换、乘法、除法和舍入。

它与此代码一起使用：

```
Dim Letterz() As Integer = {33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 0}
Function itoa(ByVal val As ULong)
    Dim toret As String = ""
    Dim TempVal As ULong = val
    For pos As ULong = 0 To 999999999999999999
        If TempVal > 0 Then
            Dim remainder As ULong = TempVal Mod Letterz.Length
            Dim ToInsert As Integer = Letterz(remainder)
            Dim ToInsStr As String = Chr(ToInsert)
            toret = ToInsStr & toret
            Dim DividedVal As Double = TempVal / Letterz.Length
            DividedVal = DividedVal - 0.5
            DividedVal = Math.Round(DividedVal, 0, MidpointRounding.ToEven)
            TempVal = DividedVal
        Else
            Exit For
        End If
    Next
    itoa = toret
End Function

Function atoi(ByVal val As String) As ULong
    Dim CURRNUM As ULong = 0
    Dim len As ULong = val.Length()
    If len > 0 Then
        For i As ULong = 0 To len - 1
            For x As ULong = 0 To Letterz.Length - 1
                Dim y As ULong = (len - i) - 1
                If val(y) = Chr(Letterz(x)) Then
                    Dim PWR As ULong = Math.Pow(Letterz.Length, i)
                    Dim MLTPLY As ULong = x * PWR
                    CURRNUM += MLTPLY
                End If
            Next
        Next
    End If
    atoi = CURRNUM
End Function
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    TextBox2.Text = itoa(ULong.Parse(TextBox1.Text))
    TextBox3.Text = atoi(TextBox2.Text).ToString()
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T22:42:18.660

.NET 4 中引入了[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)类型。`System.Numerics`它可用于表示“任意大的有符号整数”。

# php - SQL统计海量数据

> ID：12326330
> 
> 赞同：0
> 
> 时间：2012-09-07T22:41:55.647
> 
> 标签：php, sql, time, database-performance

我的 MySQL 数据库有超过 100 万条记录，而且还在不断增长。我在那里有一个价值“援助”，有时可以多次使用。我想算援助。

我试过

```
SELECT COUNT ( DISTINCT (value) ) AS somevalue
FROM table 
```

这有效，但现在有太多的值，它需要比 max_exec_time 更长的时间。我也对 GROUP BY 进行了同样的尝试，但没有成功。

有没有办法快速运行这个查询？或者还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T22:44:37.920

让价值成为指数！计算索引比处理表中的记录要快得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-08T16:09:06.863

只需为每一行分配一个 ID（ID、uto_increment），然后取最后一个分配的 ID。

# macos - HTML5：本地数据库的位置

> ID：12326332
> 
> 赞同：0
> 
> 时间：2012-09-07T22:41:59.893
> 
> 标签：macos, html, localdb

我是 HTML5 的新出价，请帮我解决这个问题

我正在像这样在客户端机器上通过 HTML% apis 创建一个本地数据库

```
function initDB(){
var shortName = 'stuffDB';
var version = '1.0';
var displayName = 'MyStuffDB';
var maxSize = 65536; // in bytes
localDB = window.openDatabase(shortName, version, displayName, maxSize);
} 
```

是否可以获得像警报一样创建的数据库的位置（“数据库的路径是”+ dbPath）；

在此先感谢 Ankit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:25:36.680

最终用户根本无法获得该信息。尽管大多数（如果不是全部）localDB 引擎使用相同的后端，但该规范允许数据可能保存在其他地方——包括 Windows 注册表——只要 localDB[1] 引擎以正确的方式运行。

[1] 不现实的可能性，但不在规格之外。

# java - Java UnmarshalException on shutdown / System.exit from MBean via JConsole

> ID：12326333
> 
> 赞同：1
> 
> 时间：2012-09-07T22:42:14.793
> 
> 标签：java, jmx, shutdown, unmarshalling, jconsole

我想知道当我使用带有 JConsole 的 MBean 远程执行关闭时如何避免出现此异常，该关闭调用`System.exit(1)`. 我已经验证当不调用关机时我没有例外，所以其他一切都设置正确。错误是：

`Problem invoking shutdown: java.rmi.UnmarshalException: Error unmarshaling return header; nested exception is: java.io.EOFException`

这当然是有道理的！我只是不希望这是一个错误条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:44:29.940

这是意料之中的。我假设您的 JMX 操作是由什么发起的`System.exit(1)`？这意味着 Jconsole 正在等待来自服务器的响应，并且在套接字关闭之前没有发送任何响应。即使`void`通过 JMX 调用方法也会等待确认，因此 jconsole 可以说“方法已成功调用”。由于服务器正在关闭，因此您没有得到响应是有道理的。

如果你想避免这种情况，你可以分叉一个线程来休眠一下，然后发出退出。就像是：

```
 public String jmxShutdown() {
     new Thread(new Runnable() {
         public void run() {
             try {
                Thread.sleep(100);
             } catch (InterruptedException e) {
                // ignored
             }
             System.exit(1);
         }
     });
     return "Shutting down";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T15:56:40.587

根据您的用例，[配置您自己的`JMXConnectorServer`](https://stackoverflow.com/a/23273580/1523648)并从 JMX 方法停止连接器服务器而不是调用`System.exit()`. 手动配置的连接器服务器正在用户线程中运行，因此当服务器停止时（并且没有其他用户线程在运行），JVM 也会终止。

这种方法的优点是连接器服务器确保所有正在运行的 JMX 调用在释放其用户线程之前仍然正常处理。我已经通过创建一个测试 MBean 方法来验证此行为，该方法[`stop()`](http://docs.oracle.com/javase/7/docs/api/javax/management/remote/JMXConnectorServerMBean.html#stop%28%29)在连接器服务器上调用并在之后休眠一秒钟，并且在从 JMX 客户端调用测试方法时总是得到响应。

# wordpress - 主菜单的后备菜单？需要建议

> ID：12326334
> 
> 赞同：0
> 
> 时间：2012-09-07T22:42:15.877
> 
> 标签：wordpress

我是 WordPress 的新手，并且仍在努力学习这个众所周知的 CMS 的细节。

如果我的问题听起来很离谱，请原谅我，但我还是要问。

我想知道，我是否应该或必须有主菜单的后备？

我已经在我的 function.php 文件中注册了 wp_nav_menu()：

```
// This theme uses wp_nav_menu() in one location.
register_nav_menus( array(
    'primary' => __( 'Primary Navigation', 'xxxxxx' ),
) ); 
```

这是我的 header.php 文件中的回调：

```
<nav>            
        <?php wp_nav_menu( array('theme_location' => 'Primary', 'menu' =>  'Primary','container' => '', 'items_wrap' => '<ul class="main">%3$s</ul>'  )); ?>
</nav> 
```

就像我说的，我是新人。所以请，任何帮助都将受到欢迎。

如果可以，请举个例子。我没那么亮！哈哈....

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:55:08.577

不，你不需要后备。默认为所有页面，或 wp_page_menu（此帖子类型下的所有页面）。

您可以通过将值设置为 false 来覆盖它。使用您的示例：

```
wp_nav_menu( array('theme_location' => 'Primary', 'menu' =>  'Primary','container' => '', 'items_wrap' => '<ul class="main">%3$s</ul>','fallback_cb'=> false  )); 
```

等等……我想我看错了。所以让我澄清一下。您发布的第一个函数在 wordpress 中注册菜单。现在您将在菜单选项卡中看到它。您仍然需要创建一个菜单并在 ui 中激活，并将第二个功能放置在您希望它显示的位置。第二个功能是注册和创建菜单的实际结果。

我的第一条评论是关于如果您不在 wordpress 菜单 UI 中添加任何内容会发生什么。它默认回退以显示所有页面。您可以禁用此功能。

# sqlite - 使用 datajs 从 OData 获取数据并保存到 phonegap 中的 sqlite

> ID：12326336
> 
> 赞同：0
> 
> 时间：2012-09-07T22:42:29.313
> 
> 标签：sqlite, cordova, datajs

我正在 phonegap 中开发一个应用程序，它使用 datajs 从 OData 获取数据并将其保存到 sqlite。datajs 工作正常，但是当我尝试将数据保存到 sqlite 时，我收到错误**“E/Web Console(11533): Uncaught Error: INVALID_STATE_ERR: DOM Exception 11 at file:///android_asset/www/js/core/Sincronizacion. js:19"**

这是代码：

```
function SincronizarClientes()  // This function runs after a button click
{
    var db = window.openDatabase("TestDb", "1.0", "TestDb - 1", 2000000);
    db.transaction(ActualizarClientes, FalloSincronizacion, OkSincronizacion);  
}  

function ActualizarClientes(tx)
{

    OData.read("http://192.168.0.4:30003/TeyunaServices.svc/Clientes?$filter=EQUIPO eq 'T1' and startswith(NOM_UCLIENTE, 'MIGUEL') eq true",
    function (data, request) {
        var html = "", sql = "";
        for (var i = 0; i < data.results.length; i++) {
            html += "<div>" + data.results[i].NOM_UCLIENTE + "</div>";
            sql = "INSERT OR REPLACE INTO Clientes (Cod_UCliente, Nom_UCliente, Fecha_Actualizacion) VALUES ('" + data.results[i].COD_UCLIENTE + 
                          "','" + data.results[i].NOM_UCLIENTE + "', datetime())";
            //sql = "INSERT OR REPLACE INTO Clientes (Cod_UCliente, Nom_UCliente, Fecha_Actualizacion) VALUES ('00012125', 'PEDRO PEREZ PINTO', datetime())";              
            tx.executeSql(sql);  //This is line 19
            alert(sql);
        }
        document.getElementById("mainContent").innerHTML = sql;

        alert("Los clientes se actualizaron correctamente!");
    },  function(err) {
            alert("Error occurred " + err.message);
        }
    );   
}

// Transaction error callback
//    
function FalloSincronizacion(tx, err) {
    alert("Error actualizando los clientes: " + err);
}

// Transaction success callback
//
function OkSincronizacion() {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:31:29.663

`INVALID_STATE_ERR`不是SQLite 错误*。*

我猜你的 OData 回调函数是异步运行的，在`SincronizarClientes()`返回之后，所以事务`tx`已经关闭。

`db.transaction()`而是在回调函数内部调用。

# actionscript-3 - AS3：是否可以将舞台元素或位图数据捕获到网络流中？

> ID：12326337
> 
> 赞同：3
> 
> 时间：2012-09-07T22:42:38.040
> 
> 标签：actionscript-3, flash, flash-media-server, netstream

我正在查看[netstream 文档。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#appendBytes%28%29)但是如果 appendBytes() 真的可以获取任意数据，则无法真正收集。我真的可以只获取任意位图数据（作为字节数组）并将帧附加到流中（大概在将其发送到 FMS 以保存文件之前）吗？我想我错了：它只对动态流有用。我知道可以通过 FMS 获取网络摄像头并直接对视频进行编码。但是假设我想在编码之前添加一些叠加层，这在 Flash 中是否可行？即您能否在 Flash 中动态生成 netStream 对象，或者您唯一能做的就是[从 netStream 中绘制位图数据，](http://www.adobe.com/inspire-archive/july2007/articles/article6/index.html?trackingid=BANHR)反之亦然？

基本上，目标是像[Movie Masher](http://www.moviemasher.com/)一样操作视频和音频，并直接保存实际的视频文件。Movie Masher 实际上将单帧保存到服务器以供以后转换。

我听说 FP11 具有原生 H264 编码——所以“规范”问题：最终的 netStream 是否可以在浏览器中编码然后通过 HTTP 上传到服务器，或者 FMS 仍然是一个要求吗？我正在查看这个[实时编码器演示](http://onlinelib.de/tl_files/demos/labs/h264WebEncoder/)，但我不确定他们是否只是将 FMS 用作文件转储，或者它是否是该过程的一部分。

[有一个用于编码 FLV](http://www.zeropointnine.com/blog/updated-flv-encoder-alchem/)的开源项目，它使用 ByteArrayFlvEncoder 允许您对原始 ByteArrays 进行编码。H264 是否有等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T03:45:54.807

根据文档，似乎无法使用本机编码器，因为您不能同时利用`NetStream.publish()`两者`NetStream.appendBytes()`：

> NetStream 既可以发布流也可以播放流，但不能两者兼得。要发布流并从服务器查看回放，请创建两个 NetStream 对象。

换句话说，似乎没有办法通过`NetStream`对象将自定义数据发送到 FMS。

所以，你可以：

1.  将相机连接到`Video`对象
2.  通过像素操作对其应用一系列效果
3.  将像素数据通过套接字发送到服务器以供以后编码，或使用您提到的 AS3 编码器将烘焙的 FLV 保存为文件（在用户计算机或服务器上）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:21:57.873

NetStream 类上的 appendBytes 与 NetStreamAppendBytesAction 类一起使用。

示例代码：参考演示： [http ://www.bytearray.org/?p=1689](http://www.bytearray.org/?p=1689)

```
// retrieve the FLV stream
var bytes:ByteArray = event.currentTarget.data;
// put the NetStream class into Data Generation mode
netstream.play(null);
// before appending new bytes, reset the position to the beginning
netstream.appendBytesAction(NetStreamAppendBytesAction.RESET_BEGIN);
// append the FLV video bytes
netstream.appendBytes(bytes); 
```

# python - 映射/遍历 Python 对象列表

> ID：12326338
> 
> 赞同：1
> 
> 时间：2012-09-07T22:42:40.040
> 
> 标签：python, map, itertools, functools

有没有办法在具有多个属性的用户定义 Python 对象列表上迭代和调用函数？假设它名为Entry，具有属性名称和年龄。

这样我可以说一些大意的东西

```
def func(name, age):
    //do something

def start(list_of_entries)
    map(func, list_of_entries.name(), list_of_entries.age()) 
    //but obviously the .name and .age of the object, not the iterable
    //these are the only two attributes of the class 
```

正在考虑使用 functools.partial() 但不确定在这种情况下是否有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T22:46:49.350

我想你可以使用 lambda 函数：

```
>>> def start(list_of_entries):
...     map((lambda x:func(x.name,x.age)), list_of_entries) 
```

但为什么不只使用循环呢？：

```
>>> def start(list_of_entries):
...     for x in list_of_entries: func(x.name, x.age) 
```

或者如果您需要 func 的结果：

```
>>> def start(list_of_entries):
...     return [func(x.name, x.age) for x in list_of_entries] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:51:04.280

您可以使用 operator.attrgetter() 允许指定多个属性，但显式列表理解更好：

```
results = [f(e.name, e.age) for e in entries] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T22:56:16.477

如果 name 和 age 是仅有的两个属性，您可以使用 vars。否则，将 **kwargs 添加到您的 func 并忽略其余部分。

```
def func(name, age, **kwargs):
    //do something with name and age

def start(list_of_entry):
    map(lambda e: func(**vars(e)), list_of_entry) 
```

# backbone.js - 击退 - 主干模型重置，如果渲染则淘汰

> ID：12326341
> 
> 赞同：0
> 
> 时间：2012-09-07T22:43:24.893
> 
> 标签：backbone.js, knockout.js, knockback.js

我正在使用骨干进行持久性和淘汰赛进行绑定，即我在页面加载时使用淘汰赛，一切都很好。当我单击复选框时，根据 IsChecked 的值，显示是或否。

当我单击重置模型按钮时，之前看到的行为会丢失。也就是说，如果显示“是”并且我单击重置，则无论复选框状态如何，都不会显示“否”。

如果我使用可见绑定，它会起作用，但我需要让这个“如果”起作用，以便我可以根据用户标准决定是否呈现某些表单元素。

任何帮助表示赞赏。谢谢。

这是我的示例代码：

```
<script type="text/javascript">

var model_a;
var collection_ac;

var example_new_model_a;

$(document).ready(function () {
    model_a = Backbone.Model.extend({
        idAttribute: 'A_Pid',
        defaults: {
            A_Pid: null,
            ChildName: "",
            IsChecked: false,
            Show: false,
        },
    });

    example_new_model_a = new model_a();
    example_new_model_a.set('ChildName', 'child of test');

    vm = kb.viewModel(example_new_model_a);

    ko.applyBindings(vm, $('#div1')[0]);
});

var vm;

function reset_model() {
    kb.utils.release(vm);
    vm = null;

    example_new_model_a = new model_a();
    example_new_model_a.set('ChildName', 'child of test2');

    vm = kb.viewModel(example_new_model_a);
    ko.applyBindings(vm, $('#div1')[0]);
}

function show_div() {
    example_new_model_a.set('Show', true);
} 
```

```
<div id="div1">
<div data-bind="visible: Show">
Check or Uncheck <input type="checkbox" data-bind="checked: IsChecked" />
<!-- ko if:IsChecked -->
<p>yes</p>
<!-- /ko -->
<!-- ko if:!IsChecked() -->
<p>no</p>
<!-- /ko -->
    <button data-bind="click: reset_model">Reset</button>
</div>
<button data-bind="click: show_div">Show</button> 
```

**编辑**

我发现如果我添加以下代码，即使在按下重置后，它也可以工作。阅读后[如何强制视图刷新而不使其从可观察对象自动触发？](https://stackoverflow.com/questions/8537397/knockout-js-how-to-force-view-refresh-instead-of-using-ko-observable)和[Knockout.js Templates Foreach - 强制完成重新渲染](https://stackoverflow.com/questions/7516636/knockout-js-templates-foreach-force-complete-re-render)，我用 if 尝试了模板，它可以工作。不知道如何调用 value 已经从击退视图模型中发生了变异，所以除非有更好的方法，否则我将使用这个解决方法。

```
<div data-bind="template: { name: 'test-template-1', if:IsChecked}"></div>
<script type="text/html" id="test-template-1">
  <p>yes2</p>
</script>

<div data-bind="template: { name: 'test-template-2', if:!IsChecked()}"></div>
<script type="text/html" id="test-template-2">
  <p>no2</p>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:23:24.603

Hope I'm not misunderstanding your question: I use [memento](https://github.com/derickbailey/backbone.memento) to reset models to a previous state.

When I load a new view: I make a snapshot using model.store() When leaving the page, or reseting I call model.restore()

# html - 通过脚本将 IDML 转换为 HTML5

> ID：12326342
> 
> 赞同：2
> 
> 时间：2012-09-07T22:43:33.357
> 
> 标签：html, idml

我正在尝试通过脚本将 IDML 转换为 HTML5，而不是通过 InDesign。除了 IDML 中的旋转文本外，一切正常。旋转文本时，我从 IDML 的 ItemTransform 中获取值，并按照[http://www.adobe.com/products/postscript/pdfs/PLRM.pdf](http://www.adobe.com/products/postscript/pdfs/PLRM.pdf)中详述的几何计算。除了“top”值之外，我在 HTML5 输出中正确获取了所有 css 值。如果您之前尝试过此操作，请告诉我如何计算 IDML 到 HTML5 的 css 值。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:03:34.813

当旋转后顶部/y 坐标关闭时，通常是因为您正在围绕与您认为的不同的原点旋转。在旋转之前，您需要确保旋转的原点位于 0,0，因此您通常将对象平移为零，然后旋转，然后再将其平移回来。如果没有看到一些代码，很难更有帮助 - IDML 输入的示例、您的旋转函数以及您获得的 html5 输出可能会揭示问题所在。

本教程基于 Flash，但仍然是我发现的关于矩阵转换如何工作的最佳解释之一：[http ://www.senocular.com/flash/tutorials/transformmatrix/](http://www.senocular.com/flash/tutorials/transformmatrix/)

# ios - 暂时暂停 scrollViewDidScroll

> ID：12326345
> 
> 赞同：0
> 
> 时间：2012-09-07T22:43:55.167
> 
> 标签：ios, uiscrollview

`scrollViewDidScroll`我在启用分页的情况下有大量代码，`scrollView`我还有一个将视图重置为`0, 0`. 我需要`scrollViewDidScroll`在动画重置期间暂时暂停，因为动画不断“滚动”。有没有办法在重置开始时暂停它，然后再恢复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:33:43.107

您可以向您的类添加一个 BOOL 实例变量，例如 shouldSkipScrollCode 并在 scrollViewDidScroll 中检查它。如果是，则返回 - 否则，执行您的代码。当用户按下按钮重置滚动视图时，将此变量设置为 YES。

要将其重新设置为 NO，请使用委托通知[scrollViewDidEndScrollingAnimation](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)，它将在滚动完成时触发。这是您有机会将 shouldSkipScrollCode 重置为 NO 的地方。

# jquery - jquery 验证和清除错误信息

> ID：12326350
> 
> 赞同：0
> 
> 时间：2012-09-07T22:44:16.653
> 
> 标签：jquery, ajax, validation

我有一个表格，需要输入 3 个字段，名字、姓氏和电子邮件地址。

这些元素都与我为电子邮件地址获取的元素相似：

```
<dl>
  <dt>
    <label for="Email_Address">Email Address</label>
  </dt>
  <dd style="float:right">
     <input type="text" id="Email_Address" class="required  email" name="Email_Address" />
     <br>
     <span class="form_error" id="email_error">
       <span id="email_msg"></span>
     </span>
   </dd>
</dl> 
```

它下面的跨度类“form_error”是我显示任何验证错误的地方。验证代码一切正常，检查有效的电子邮件地址等。然后我想我会抛出一个 AJAX 验证，在那里我可以检查该电子邮件地址是否已经在文件中，如果是，也显示一条消息. 这一切都很好。问题是，如果有人输入了已存档的电子邮件地址，他们会收到“电子邮件已存档”的消息。然后他们去更改表单中的电子邮件地址，我收到验证错误，但我似乎无法弄清楚如何清除“已存档”消息。我试过使用`empty()`,`replaceWith()`和其他一些，但它似乎不起作用。

这是带有 AJAX 调用的验证代码。我确信这很简单，但我还不是这方面的专家。

```
$(document).ready(function(){
  $("#LegalVita_Sign_Up").validate({
    submitHandler: function(form) {
      var isDup = false;

      $.ajax({
        url: 'dup_email.php',
        data: { email: $('#Email_Address').val() },
        async: false, 
        success: function(msg) { 
          isDup = msg === "1" ? true : false 
        },
      });         

      if (isDup) {
        error = 'duplicate email address: ' + $('#Email_Address').val();
        $('#email_msg').replaceWith(error);
        return false;
      } else {
        form.submit();
        return true;
      }
    },
    messages: {
      First_Name: " First name required",
      Last_Name: " Last name required",
      Email_Address: {
        required: " email required",
        email: " email must be of the format: 'name@domain.com'"
      }
    },
    errorPlacement: function(error, element) {
      if (element.attr("name") == "First_Name" )
        error.insertBefore("#first_msg");
      else if (element.attr("name") == "Last_Name" )
        error.insertBefore("#last_msg");
      else if (element.attr("name") == "Email_Address" ) {
        error.insertBefore("#email_msg");
      } else
        error.insertAfter(element);
},
  });  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:47:00.610

您的问题与 jQuery Validate 无关。`$('#email_msg').text('')`在提交处理程序的开头设置。

# linux - 有没有办法在 Glib v2.32+ 中设置线程优先级？

> ID：12326354
> 
> 赞同：4
> 
> 时间：2012-09-07T22:44:39.247
> 
> 标签：linux, multithreading, cross-platform, glib, multiplatform

Glib 2.30 [API允许通过](http://developer.gnome.org/glib/2.30/glib-Threads.html)[GThreadPriority](http://developer.gnome.org/glib/2.30/glib-Threads.html#GThreadPriority)枚举设置线程优先级。但是，该 API[自 2.32 起已弃用，](http://developer.gnome.org/glib/2.31/glib-Deprecated-Thread-APIs.html)我找不到有关使用新 API 设置线程优先级的任何信息。[我已经按 Ctrl+F 浏览了API 参考](http://developer.gnome.org/glib/2.32/)中所有与线程相关的部分，但没有发现任何与优先级相关的内容。谷歌似乎也一无所知。

那么在 2.32 API 中是否可以为线程分配优先级？如果是，如何在创建时执行它，是否可以在创建线程后更改它？我知道 pthread 支持所有这些，但我更愿意坚持使用与平台无关的 Glib API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T23:00:13.320

设置线程优先级已不复存在。在 glib git log[这个提交](http://git.gnome.org/browse/glib/commit/?id=51d92adeee67d1df30d13fe41e97af9e563f62ec)解释了原因

> ## GThread：弃用线程优先级
> 
> 线程优先级已经被记录为在 Solaris 上不起作用，并且它们在 Linux 上毫无意义，除非进程单独请求实时调度（即使那样，它似乎也只能以 root 身份工作）。

也许使用线程池并且[`g_thread_pool_set_sort_function ()`](http://developer.gnome.org/glib/2.32/glib-Thread-Pools.html#g-thread-pool-set-sort-function)可能没问题？

# c# - WebForm 的 NUnit 测试用例

> ID：12326355
> 
> 赞同：3
> 
> 时间：2012-09-07T22:44:41.950
> 
> 标签：c#, asp.net, nunit

我是 asp、C#、nunit 的新手。我正在尝试为一个没有任何业务逻辑的简单 Web 表单编写（做我的家庭作业/作业）nunit 测试用例。

Web 表单有 4 个文本框（姓名、电子邮件地址、密码、电话号码）、一个单选列表、下拉列表（性别）。该表单只是验证数据并将数据显示在另一个页面中作为输出文本（标签）。验证只是电子邮件、电话的正则表达式验证。名称和密码的长度验证。requiredField 验证性别。

请建议我如何为此 Web 表单编写 NUnit 测试用例

例如，如果有一个计算阶乘的方法，我首先使用**代码中给出**的参数调用该方法（例如：4）。它返回我 4！进入变量“结果”（即结果现在有 24 个）。然后我会调用 AssertEquals(24,result)

因此，在 Web 表单的情况下，它需要用户输入。代码中没有给出输入。AssertEquals 的参数是什么

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:01:35.057

您是否允许使用[Selenium](http://seleniumhq.org/)或[WatiN](http://watin.org/)等 Web 测试框架？如果是这样，您可以使用它们在浏览器中打开网站，在文本框中输入值并在页面上查找失败文本的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T05:49:55.113

如果您无法使用 Web 测试框架，请创建 Windows 窗体或 Windows Presentation Foundation (WPF) 应用程序并将页面加载到 WebBrowser 控件（[Windows 窗体版本](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)或[WPF 版本](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)）中。您可以通过这种方式检查 DOM 并在页面上调用 JavaScript。可以在[http://msdn.microsoft.com/en-us/library/3s8ys666.aspx](http://msdn.microsoft.com/en-us/library/3s8ys666.aspx)找到 Windows 窗体应用程序的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T12:13:13.617

最终，您可以做的（根据 jflood.net 的评论）是将您的担忧分开。所以目前你有两个主要问题（你甚至可以进一步分解它，但我们也应该避免过度工程） - 向用户呈现数据并验证用户的输入。

您的 ASP.NET WebForm 代码处理问题 #1。为了分离验证问题，您应该创建一个新的验证类来处理验证逻辑。就像是

```
public class Validator
{
     public bool ValidateEmail(string email)
     {
          bool valid = false;
          //Run RegEx validation and set the valid flag
          return valid;
     }
} 
```

现在在您的页面加载中，您可以使用这个新类

```
 protected void Page_Load(object sender, EventArgs e)
 {
      Validator validator = new Validator();
      string email = Request.Form["EmailInput"];
      bool isEmailValid = validator.ValidateEmail(email);

      if (isEmailValid)
          Response.Write("Email is valid");
 } 
```

**请注意，这有点伪代码，因为这是家庭作业，我不想输入完整的解决方案。**

现在您已将验证问题分离到自己的类中。这使得更容易理解和单元测试更容易。

您现在需要为 Validator 类编写单元测试，特别是在本例中为 ValidateEmail。

这是一个例子

```
 [Test]
  public void ValidateGoodEmail()
  {
     Validator validator = new Validator();
     bool shouldBeTrue = validator.ValidateEmail("test@test.com");

     Assert.AreEqual(true, shouldBeTrue);
  }

  [Test]
  public void ValidateBadEmail()
  {
     Validator validator = new Validator();
     bool shouldBeFalse = validator.ValidateEmail("test@.com");

     Assert.AreEqual(false, shouldBeFalse);
  } 
```

请记住，在单元测试中，您只是在测试不同的逻辑流程。您不必测试任何输入，因此在这里我测试了使用给定错误电子邮件地址的错误验证和使用良好电子邮件地址的真实验证。

希望这可以帮助

# r - 如何使用 R 中的 lm() 函数从回归中删除无关紧要的因子水平？

> ID：12326357
> 
> 赞同：4
> 
> 时间：2012-09-07T22:44:54.227
> 
> 标签：r, regression, linear-regression

当我在 R 中执行回归并使用类型因子时，它可以帮助我避免在数据中设置分类变量。但是如何从回归中删除不显着的因素以仅显示显着变量？

例如：

```
dependent <- c(1:10)
independent1 <- as.factor(c('d','a','a','a','a','a','a','b','b','c'))
independent2 <- c(-0.71,0.30,1.32,0.30,2.78,0.85,-0.25,-1.08,-0.94,1.33)
output <- lm(dependent ~ independent1+independent2)
summary(output) 
```

这导致以下回归模型：

```
Coefficients:
          Estimate Std. Error t value Pr(>|t|)   
(Intercept)     4.6180     1.0398   4.441  0.00676 **
independent1b   3.7471     2.1477   1.745  0.14148   
independent1c   5.5597     2.0736   2.681  0.04376 * 
independent1d  -3.7129     2.3984  -1.548  0.18230   
independent2   -0.1336     0.7880  -0.170  0.87203 
```

如果我想拉出无关紧要的独立1级别（b，d），有没有办法可以做到这一点？

在这种情况下，将数据设置为具有分类变量很容易，但是当我包含周数或其他具有很多级别的因素时，它变得不方便。

这是使用分类变量构建模型的方法。正如你所看到的，构建数据最终变得更加痛苦，但也给了我更多的控制权。

```
regressionData <- data.frame(cbind(1:10,c(-0.71,0.30,1.32,0.30,2.78,0.85,-0.25,-1.08,-0.94,1.33),c(0,1,1,1,1,1,1,0,0,0),c(0,0,0,0,0,0,0,1,1,0),c(0,0,0,0,0,0,0,0,0,1),c(1,0,0,0,0,0,0,0,0,0)))

names(output) = c('dependent','independent2','independenta', 'independentb','independentc','independentd')

attach(regressionData)

result <- lm(dependent~independent2+independentb+independentc+independentd)
summary(result) 
```

现在我可以删除 Independent2 因为它无关紧要

```
result <- lm(dependent~independentb+independentc+independentd)
summary(result) 
```

我会删除独立的，因为它并不重要

```
result <- lm(dependent~independentb+independentc)
summary(result) 
```

但在这种情况下，调整后的 R 平方下降（我什至不打算进行部分 F 检验），因为它很重要，但在许多情况下这不是真的，我需要从回归中删除分类，因为它是吃掉在这种情况下很重要的自由度，并可能掩盖其他重要变量的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-15T12:56:11.143

您可以使用以下选项删除因子变量的水平`exclude`：

```
lm(dependent ~ factor(independent1, exclude=c('b','d')) + independent2) 
```

这样，因素 b、d 将不会包含在回归中。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:19:25.610

如果您愿意只使用系数表而不是整个摘要，则可以这样做：

提取整个系数表：

```
ss <- coef(summary(output)) 
```

只取你想要的行：

```
ss_sig <- ss[ss[,"Pr(>|t|)"]<0.05,] 
```

`printCoefmat`漂亮地打印带有重要星等的系数表。

```
> printCoefmat(ss_sig)
              Estimate Std. Error t value Pr(>|t|)   
(Intercept)     4.6180     1.0398  4.4414 0.006756 **
independent1c   5.5597     2.0736  2.6811 0.043760 * 
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

（这个答案类似于@Jilber 的答案，只是它会自动为您找到不重要的行，而不是要求您手动指定它们。）

但是，我必须同意@Charlie 上面的评论，即这是不好的统计做法......将预测变量人为地分为显着/非显着（p=0.049 和 p=0.051 的预测将被区别对待），尤其是对分类预测变量，其中重要的特定参数集将取决于对比/哪个水平用作基线...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T23:07:24.717

如果您只想从输出中删除不重要的级别，但将它们包含在估计中，您可以使用包中的`coeftest`函数`AER`，然后使用正确的 indexig，您将得到您想要的。

```
 library(AER)
 coeftest(output)[-c(2,4), ]
                Estimate Std. Error    t value    Pr(>|t|)
(Intercept)    4.6180039  1.0397726  4.4413595 0.006756325
independent1c  5.5596699  2.0736190  2.6811434 0.043760158
independent2  -0.1335893  0.7880382 -0.1695214 0.872031752 
```

如果您不想使用`AER`包，您还可以执行以下操作：

```
summary(output)$coefficients[-c(2,4),]
                Estimate Std. Error    t value    Pr(>|t|)
(Intercept)    4.6180039  1.0397726  4.4413595 0.006756325
independent1c  5.5596699  2.0736190  2.6811434 0.043760158
independent2  -0.1335893  0.7880382 -0.1695214 0.872031752 
```

我更喜欢最后一个，因为您不需要安装额外的软件包。

我不知道这是否是你要找的。

# r - 不能将矩阵数字类强制为整数

> ID：12326366
> 
> 赞同：11
> 
> 时间：2012-09-07T22:46:04.067
> 
> 标签：r, oop, class, matrix

我正在写一个邻接矩阵，`R`如下所示：

```
neighbours <- array(0, c(100,100))
for (i in 1:100) { neighbours[i,i] = 1 }    #reflexive 
```

但后来我注意到`class(neighbours)`is `double matrix`。这将占用更大的矩阵太多的空间。所以我想强制类型为，`integer`或者更好，因为这是无向的，`logical`.

但...

```
> class(neighbours[5])
[1] "numeric"
> class(neighbours[5]) <- "integer"
> class(neighbours[5])
[1] "numeric" 
```

不听我的！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T23:29:33.817

最好不要一开始就将其初始化为数字，但如果你不能这样做，请设置`storage.mode`：

```
R> neighbours <- array(0, c(100,100))
R> for (i in 1:100) { neighbours[i,i] = 1 }
R> str(neighbours)
 num [1:100, 1:100] 1 0 0 0 0 0 0 0 0 0 ...
R> storage.mode(neighbours) <- "integer"
R> str(neighbours)
 int [1:100, 1:100] 1 0 0 0 0 0 0 0 0 0 ...
R> storage.mode(neighbours) <- "logical"
R> str(neighbours)
 logi [1:100, 1:100] TRUE FALSE FALSE FALSE FALSE FALSE ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-17T16:59:16.383

对于那些仍在寻找将现有数字矩阵强制为整数的方法的人：

```
m2 <- apply (m, c (1, 2), function (x) {
  (as.integer(x))
  }) 
```

c(1, 2) 表示将函数应用于行和列。测试元素的类然后给出：

```
> class(m2[1,])
[1] "integer"
> class(m[1,])
[1] "numeric"
> 
```

我一直在寻找这样的东西，因为我需要转换一个已经存在的数字矩阵。这是计算速度非常慢的结果，因此修改代码比简单地转换结果要花费我更多的时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T22:57:13.610

也许我遗漏了一些东西，但为什么不直接将它声明为一个逻辑数组呢？

```
neighbors <- array(FALSE, c(100,100))
diag(neighbors) <- TRUE 
```

比较两者：

```
> object.size(array(0, c(100,100)))
80200 bytes
> object.size(array(FALSE, c(100,100)))
40200 bytes 
```

编辑：我很想知道为什么一个逻辑数组每个条目占用 4B，不过......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T22:58:55.367

一种选择是最初用整数 0 ( `0L`) 填充，然后用整数 1 ( `1L`)替换对角线

```
m <- matrix(0L, 100, 100)
diag(m) <- 1L 
```

这是在 R 中创建对角矩阵的更直接方法的一半大小：

```
m2 <- diag(1L, 100, 100)

> object.size(m)
40200 bytes
> object.size(m2)
80200 bytes 
```

因此，分配整数矩阵`m`然后改变对角线会导致最紧凑的密集矩阵。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T23:01:15.933

Matrix 包（现在是标准包）中有一个 sparseMatrix 超类。如果你想要一个稀疏的对角矩阵，你可以用

```
library(Matrix) 
Matrix(diag(1,4) , sparse=TRUE)
#---------
4 x 4 sparse Matrix of class "dsCMatrix"

[1,] 1 . . .
[2,] . 1 . .
[3,] . . 1 .
[4,] . . . 1 
```

进一步的思考。如果要将矩阵的模式更改为整数并且不关心它是否保持密集：

```
> m <- matrix(rnorm(25), 5)
> m[] <- as.integer(m)  
# you do need those square-brackets or the structure becomes a dimensionless vector.
> m
     [,1] [,2] [,3] [,4] [,5]
[1,]    0    0   -1    0    0
[2,]    1    0    0    0    0
[3,]    1    0    0    0    0
[4,]    0    0    0    0    0
[5,]    0    0    0   -1    0 
```

然而，Gavin 的评论引发了进一步的思考：如果您的目标是表示“邻接”，并且它是一个非常大的样本空间，您可能只想使用 sparseMatrix 类作为模型，而不是使用带有数字的两列矩阵列中的对.. 这并不是 sparseMatrices 保存它们的行、列和值的方式，但是 2 列存储模式可能适用于您的问题。请参阅“igraph”包中的工作示例。我认为您的问题可能表示为无向图。

# python - 在 Python 中解析 JSON 时出现各种错误

> ID：12326370
> 
> 赞同：3
> 
> 时间：2012-09-07T22:46:18.667
> 
> 标签：python, json, simplejson

试图从需要登录的 url 解析 json。在这里包括我的所有代码，因为我不确定错误在哪里。

```
try: import simplejson as json
except ImportError: import json
import urllib2

username = 'user'
password = '1234'
url = "https://www.blah.com/someplace"

# set up the username/password/url request
password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
password_mgr.add_password(None, "https://www.blah.com", username, password)
handler = urllib2.HTTPBasicAuthHandler(password_mgr)
opener = urllib2.build_opener(handler)
urllib2.install_opener(opener)
request = urllib2.Request(url)
response = opener.open(request)

# option 1
json_object = json.loads(str(response))

#option 2
json_object = json.loads(response) 
```

如果我使用选项 1 运行代码（注释掉选项 2），我会收到此错误：

```
Traceback (most recent call last):
  File "jsontest.py", line 22, in <module>
    json_object = json.loads(str(request))
  File "/usr/lib/python2.7/dist-packages/simplejson/__init__.py", line 413, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/dist-packages/simplejson/decoder.py", line 402, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/dist-packages/simplejson/decoder.py", line 420, in raw_decode
    raise JSONDecodeError("No JSON object could be decoded", s, idx)
simplejson.decoder.JSONDecodeError: No JSON object could be decoded: line 1 column 0 (char 0) 
```

如果我运行选项 2：

```
Traceback (most recent call last):
  File "jsontest.py", line 23, in <module>
    json_object = json.loads(request)
  File "/usr/lib/python2.7/dist-packages/simplejson/__init__.py", line 413, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/dist-packages/simplejson/decoder.py", line 402, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
TypeError: expected string or buffer 
```

据我所知，我的示例 JSON 是有效的：

> {"set1":[{"data1":"411","data2":"2033","data3":"1","data4":"43968077","data5":"217","data6" :"106828","data7":[]}], "set2":{"data8":"411","data9":"2033","data10":"43968077","data11":"217223360" "data12":"106828"}}

simplejson 版本 = 2.3.2，Python 2.7.3

这一切都很新，所以任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T22:54:28.223

您想解码*响应*，而不是请求：

```
json_object = json.load(response) 
```

响应是一个类似文件的对象，因此您可以使用`.load()`json 库直接读取它。

或者（以使用一些临时内存为代价），使用`.loads()`具有完全读取响应的函数：

```
json_object = json.loads(response.read()) 
```

请注意，python 2.7 已经包含 simplejson 库，重命名为[`json`](http://docs.python.org/library/json.html)：

```
import json 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:57:00.147

您需要使用响应，而不是请求（可能只是一个错字？），但您还需要使用`response.read()`来获取 HTTP 响应的正文：

```
json_object = json.loads(response.read()) 
```

# node.js - 猫鼬中间件问题

> ID：12326372
> 
> 赞同：0
> 
> 时间：2012-09-07T22:46:28.190
> 
> 标签：node.js, mongodb, mongoose

场景如下

场景#1

```
someSchema.pre('save', function(next){
  asyncFunction(function(){
    this.sub.value = 'something'
    next()
  })
}) 
```

这失败了，因为这改变了上下文，现在代表 asyncFunction，所以我不能修改函数中的传入数据。出现 this.sub 未定义的错误

场景 #2，基于来自 hooks-js 的信息

```
some.Schema.pre('save', function(next){
  asyncFunction(function(){
    next('something')
  });
});
some.Schema.pre('save', function(next, value){
  this.sub.value=value
  next()
}) 
```

这是可行的，只要它修改了值，并且 mongodb 端很好，但是它只是挂起，并且在保存文档后永远不会继续。

难道我做错了什么？有更好的方法吗？或者这是一个错误

场景 #3 最初失败但现在似乎有效

```
someSchema.pre('save', function(next){
  x = this
  asyncFunction(function(){
    x.sub.value = 'something'
    next()
  })
}) 
```

也就是说，我仍然很好奇为什么场景 #2 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:00:27.430

在第一个场景中，您需要捕获`this`您想要提供给回调的原始上下文，如下所示：

```
someSchema.pre('save', function(next){
  var self = this;
  asyncFunction(function(){
    self.sub.value = 'something'
    next()
  })
}) 
```

在第二种情况下，我认为你有点离题了。您不能通过参数将值从一个中间件函数传递到下一个函数。当您使用[中间件](http://mongoosejs.com/docs/middleware.html)的双参数回调版本时，您将其标记为并行中间件，第二个参数是`done`回调完成处理后必须调用的函数。

# magento - 向特定的电子邮件地址域发送新用户电子邮件确认

> ID：12326379
> 
> 赞同：0
> 
> 时间：2012-09-07T22:47:23.380
> 
> 标签：magento, magento-1.7

在我的 Magento 安装中，我禁用了“需要电子邮件确认”功能，因为我不需要所有用户。但是，我希望特定域“foo.com”的用户实际收到此电子邮件确认。

一旦他们使用电子邮件链接确认他们的电子邮件地址，我想将他们添加到特定组。

谁能告诉我应该从哪里开始进行这种 Magento 修改？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:00:46.660

您可以扩展或覆盖

```
app/code/core/Mage/Customer/controllers/AccountController.php

public function createPostAction()
{
    if (true === $validationResult) {
        $customer->save();

        // Do your custom Code here to match the domains you want to make Confirmation Required for them.
        $patterns = array('@foo.com','@boo.com','@bar.com');
        $patterns_flattened = implode('|', $patterns);
        if ( preg_match('/'. $patterns_flattened .'/i', $customer->getEmail(), $matches) )
        {  
            $customer->setIsConfirmationRequired(true);
        }

       if ($customer->isConfirmationRequired()) {
            $customer->sendNewAccountEmail('confirmation', $this->_getSession()->getBeforeAuthUrl());
            $this->_getSession()->addSuccess($this->__('Account confirmation is required. Please, check your e-mail for confirmation link. To resend confirmation email please <a href="%s">click here</a>.',
                Mage::helper('customer')->getEmailConfirmationUrl($customer->getEmail())
           ));
            $this->_redirectSuccess(Mage::getUrl('*/*/index', array('_secure'=>true)));
            return;
        }
        else {
            $this->_getSession()->setCustomerAsLoggedIn($customer);
            $url = $this->_welcomeCustomer($customer);
            $this->_redirectSuccess($url);
            return;

        }
    }
} 
```

所以你可以通过两种方式做到这一点

启用激活电子邮件并设置`$customer->setIsConfirmationRequired(false);`电子邮件是否与您要验证的域不匹配（推荐）

禁用激活电子邮件并设置`$customer->setIsConfirmationRequired(true);`电子邮件是否与您要验证的域匹配

谢谢

# ibm-mq - AMQ8145：IBM MQ 中的连接中断错误

> ID：12326380
> 
> 赞同：1
> 
> 时间：2012-09-07T22:47:25.053
> 
> 标签：ibm-mq

我在 AIX 系统中运行了以下命令并出现以下错误，它之前一直在工作，但我突然遇到了这个问题。我在非 mqm id 中运行了瘦命令。

我尝试从 mqm id 提供“刷新安全性”，即使它不起作用。

```
$ print "显示 qlocal(*) curdepth"|runmqsc TEMP.QMGR
5724-H72 (C) 版权所有 IBM Corp. 1994, 2005。保留所有权利。
为队列管理器 TEMP.QMGR 启动 MQSC。

AMQ8145：连接中断。

未读取 MQSC 命令。
没有命令有语法错误。
已处理所有有效的 MQSC 命令。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:17:52.797

通常，在尝试将 mqsc 运行到正在静默的 QMgr 后，会返回此代码。您应该`dspmq`查看 WMQ 认为 QMgr 的状态是什么，并查看 /var/mqm/errors 以查看是否有任何与错误相关的 FDC 文件。

如果 QMgr 因停止而处于停顿状态，`endmqm -w`则`endmqm -i`您可以发出`endmqm -p`将切断所有未完成的连接并抢先关闭 QMgr 的命令。然后您可以重新启动它，该命令应该可以工作。

如果该`-p`选项不起作用，请参阅信息中心中的*[手动停止队列管理器](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa22290_.htm)*。如果 QMgr 挂起，这会告诉您以哪个顺序终止进程。

**确保为您的 WebSphere MQ 版本使用信息中心，因为版本之间的进程和终止顺序会发生变化！**

# asp.net-mvc-3 - 如何在 ASP.NET Razor 表中编码摘要行？

> ID：12326381
> 
> 赞同：5
> 
> 时间：2012-09-07T22:47:39.220
> 
> 标签：asp.net-mvc-3, linq, entity-framework, razor

我在 Razor 视图中构建了一个表格，如下所示：

```
@foreach (var item in Model)
{
    <tr>
        <td>@Html.DisplayFor(modelItem => item.column1)</td>
        ...
        ...
    </tr>
} 
```

我想在最后添加表格摘要，例如：

```
<tr>
    <td>@Model.Sum(a => a.column1)</td>
    ...
    ...
</tr> 
```

这实际上有效，但它不使用我的数据注释，因为我没有使用 DisplayFor()。我尝试将 Model.Sum 放在 DisplayFor() 中，但代码不起作用。谁能指出我的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:53:55.603

您可以编写一个 HTML 帮助程序来检查属性 lambda、执行 sum() 并利用您的数据注释。

## 查看模型

```
public class FooViewModel
{
    [Required]
    [Display( Name = "My Display Name" )]
    public int Bar {
        get;
        set;
    }

    public string Baz {
        get;
        set;
    }
} 
```

## 看法

```
@model IEnumerable<FooViewModel>

@* Razor engine prefers this syntax? think generic may confuse it *@
@(Html.SumFor<FooViewModel>( o => o.Bar )) 
```

## 助手扩展

这远非完美。一个改进是允许对任何类型求和，而不必为每个可求和类型提供不同的方法。

```
public static IHtmlString SumFor<TEnumerableItem>( this HtmlHelper helper, 
    Expression<Func<TEnumerableItem, int>> expression ) {

    // get metadata through slightly convoluted means since the model
    // is actually a collection of the type we want to know about

    // lambda examination
    var propertyName = ( (MemberExpression)expression.Body ).Member.Name;

    // property metadata retrieval
    var metadata = ModelMetadataProviders.Current
        .GetMetadataForProperty( null, typeof( TEnumerableItem ), propertyName );

    // make an assumption about the parent model (would be better to enforce 
    // this with a generic constraint somehow)
    var ienum = (IEnumerable<TEnumerableItem>)helper.ViewData.Model;

    // get func from expression
    var f = expression.Compile();

    // perform op
    var sum = ienum.Sum( f );

    // all model metadata is available here for the property and the parent type
    return MvcHtmlString.Create( 
       string.Format( "<div>Sum of {0} is {1}.</div>", metadata.DisplayName, sum )
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:56:06.997

我希望我能理解您...向您的模型添加一个属性并使用您所需的 DataAnnotation：

```
 [MyDataAnnotation]
    public int Sum
    {
        get
        {
            var sum = 0;
            foreach(var item in this)
            {
                sum += item.Value;
            }    
            return sum;     
        }
    } 
```

然后将 displayfor 与此属性一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:36:00.360

您可以使用 jQuery Datatables 插件。在 Javasript 中，您只需打开/关闭表配置属性即可获得大量“免费赠品”。因此，您可以在表格顶部获得一个搜索框 - 例如按字母自动对列进行排序，您还会在表格底部获得一个信息行 - 类似于“显示 8 个条目中的 1 个”

# email - 我应该使用哪个 Emacs 邮件包？

> ID：12326382
> 
> 赞同：10
> 
> 时间：2012-09-07T22:47:40.727
> 
> 标签：email, emacs, emacs24, gnus

GNU Emacs 附带的（显然）有能力的邮件读写包的数量让我不知所措，更不用说第 3 方的了。我什至不知道从哪里开始，所以让我说一下我在寻找什么样的功能，希望有人能说服我一个选择比其他选择更好。

我已经使用 Claws Mail 一年多了，我对此非常满意。也就是说，我的大部分计算时间都花在了终端 Emacs 上，我也更愿意从那里管理我的电子邮件。我需要的一些功能是：

*   从多个 SMTP 服务器发送邮件
*   从多个 IMAP 服务器读取邮件
*   本地邮箱与服务器上的邮箱自动（或轻松）同步，反之亦然
*   曾经阅读和发送的所有消息的本地副本，其组织方式便于搜索，即使未连接到 Internet
*   轻松阅读 RSS 提要
*   在终端 Emacs 中很好地呈现 HTML 邮件以供阅读（这可能与阅读包无关）
*   地址簿和组（有时称为“别名”）
*   自动过滤、处理、标记等

我可能错了，但看来我的选择是在 MH-E、Gnus 和 Message/Rmail 之间。我已经非常敷衍地研究了每一个，并被这三个显然无限的可定制性所淹没。我有能力学习任何一种，但我一般对电子邮件知之甚少，我想在深入研究电子邮件之前确保自己有正确的选择。MH-E 使用与 Claws Mail 相同的邮箱格式，但我不知道应该有多大的不同。

# facebook - 从uid获取access_token

> ID：12326383
> 
> 赞同：0
> 
> 时间：2012-09-07T22:47:52.153
> 
> 标签：facebook, access-token

所以我制作了一个应用程序，我设置了身份验证和权限，并且我让用户获得了离线访问权限。但我没有将 access_token 保存在数据库中。

有没有办法从**uid获取****access_token**以便我可以进行一些 API 调用（rsvp 到事件）？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:27:57.583

[用户通过身份验证](https://developers.facebook.com/docs/authentication/)流程返回您的应用程序后，您将获得更新的令牌。但是，如果用户不回来，您将无法获得访问令牌。**

# android - 将 Activity 的上下文传递给 Android 中的另一个 Activity

> ID：12326384
> 
> 赞同：1
> 
> 时间：2012-09-07T22:47:56.043
> 
> 标签：android

考虑我有一个活动“ProductsActivity”和“AddItemsActvity”，我需要 AddItemsActvity 中 ProductsActivity 的上下文。是否有任何建议或方法可以在 android.xml 中的活动之间传递上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:52:05.053

“ProductsActivity的Context”其实就是ProductsActivity的实例（Activity是从Context派生的）。所以你想要的是将 ProductsActivity 的引用传递给 AddItemsActivity。

这不是一个好主意，因为您的 ProductsActivity 可能会在您的 AddItemsActivity 运行时停止和销毁。您通常不想传递活动指针。

# php - 为什么我的javascript脚本在页面加载时运行而不是onclick？

> ID：12326392
> 
> 赞同：0
> 
> 时间：2012-09-07T22:50:35.010
> 
> 标签：php, javascript, ajax, onclick

所以下面是我点击屏幕上的按钮时想要运行的脚本。基本上使用 AJAX 来查询我的数据库以获得更多结果。问题是，我对 Javascript 非常陌生，并且该脚本在页面加载时运行，而不是在我单击应该调用它的按钮时运行。

* * *

```
<script type="text/javascript">
function next_ten_results()
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("main").innerHTML=xmlhttp.responseText;
    }
  }
var page = "<?php echo $page_count; ?>";
alert('the city of ' + page + '!');
var name = "<?php echo $sql_name; ?>";
var rest_location = "<?php echo $sql_location; ?>";
xmlhttp.open("GET","another_ten_results.php?location="+rest_location+"&rest_name="+name+"&page="+page,true);
xmlhttp.send();
}
</script> 
```

感谢阅读小伙伴！我确定我犯了一个简单的错误，比如我需要等待文件准备好或其他什么，但正如我所说，我很新。任何帮助和建议表示赞赏。

干杯!

编辑：在需要时调用此函数的代码......即使代码在没有它的情况下运行：

```
if($num_rows > 9){
      echo '<onclick="next_ten_results_NOT()" class="button next" id="button_next" >Page 2</a>'; } 
```

编辑（2）：为了将来参考，问题（如上所述科迪）是我忘记了`<a...`onclick 事件之前。这就是导致代码以某种方式运行的原因。更改后，javascript 查询按计划工作。错误实际上是在 HTML 中。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:59:08.270

对于那些访问这里寻找答案的人：

您调用 javascript 函数的 HTML 无效。没有以 . 开头的标签`<onclick ...`。我们可以通过结束标签`</a>`来判断这应该是一个链接。

替换`<onclick`为`<a onclick`将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:14:55.800

将我的答案移动到答案而不是原来的评论：

您正在回显`'<onclick="next_ten_results_NOT()" class="button next" id="button_next" >Page 2</a>';`正在创建一个名为 . 你错过了`<a`，这意味着它是一个无效的标签。

# c++ - QT - 在 pro 中指定 DLL 路径。文件

> ID：12326401
> 
> 赞同：9
> 
> 时间：2012-09-07T22:51:57.233
> 
> 标签：c++, qt, project-files

所以正如问题标题所说，我特别想知道如何在实际项目文件中包含 .dll 文件的路径。我知道将 dll 文件包含在项目文件中是更好的做法，但我仍然想知道是否可以这样做？

目前我的 .pro 文件包含以下内容；

```
QT       += core gui

TARGET = Test
TEMPLATE = app

win32 {
    INCLUDEPATH += "D:/Projects/Build Output/include/"

    CONFIG(debug, debug|release) {
        LIBS += "D:/Projects/Build Output/libs/debug/myLib.lib"
        LIBS += "D:/Projects/Build Output/bin/x86 debug/myLib.dll"
    } 
    else {
        LIBS += "D:/Projects/Build Output/libs/release/myLib.lib"
        LIBS += "D:/Projects/Build Output/bin/x86 release/myLib.dll"
    }
}

SOURCES += main.cpp\
    mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui 
```

会很酷，只是知道它可以完成，提前感谢您的帮助:)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T00:44:49.373

如果您的意思是您希望生成的 exe 可以在您运行它时自动找到其依赖的 dll 文件，那么它不能用于隐式 dll 链接（即与 .lib 文件链接，如您的示例中所示）。Windows 有[一个固定的搜索顺序](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx)来定位必要的 dll 文件。这些序列中的任何一个都不能放入 QT pro 文件中。所以下面的语句~~没有效果~~ 只让 QT 知道在该路径中搜索 dll 的 .lib/.a 文件：

```
 LIBS += "D:/Projects/Build Output/bin/x86 debug/myLib.dll" 
```

最接近的方法可能是将 dll 路径定义为 pro 文件中的宏。然后使用 LoadLibrary从您的 c/c++ 源文件中的这些路径[显式加载 dll](http://msdn.microsoft.com/en-US/library/zzk20sxw%28v=vs.80%29)。当然，前提是您可以使用显式链接而不是隐式链接来解决，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-19T11:46:16.237

您不需要将 dll 路径放在 .pro 文件中（Windows）。您需要做的就是将所有外部 dll 文件放在一个目录中，并将该目录添加到 path 环境变量中。（与接受的答案相同）。我在这里添加这个只是为了提一个重要的事实：RESTART QT CREATOR 以便重新加载新的 PATH 环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:43:45.133

您只需要阅读手册并执行相同的操作：http: [//qt-project.org/doc/qt-4.8/qmake-variable-reference.html#libs](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#libs)。您使用的语法似乎是正确的。

# class - 为什么有 GLint 和 GLfloat？

> ID：12326404
> 
> 赞同：9
> 
> 时间：2012-09-07T22:52:14.890
> 
> 标签：class, opengl, floating-point, int, primitive-types

我知道 Open GL 需要使用数字，但为什么不只使用常规的整数和浮点数或已经存在的包装类（无论哪个是整个 Open GL 世界很好地融合在一起所必需的）？除了名称和在 Open GL 中专门使用的名称之外是否有区别，或者它们几乎是相同的东西但名称不同？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T22:55:40.633

因为 int 在 32 位系统上是 32 位（在这里过于简单化了），在 64 位系统上是 64 位 - 所以即使只是“一个 int”也不是一个普遍的概念。请记住，运行图形代码*的硬件与您的 cpu 是不同的硬件*，因此需要新的类型。通过使用自己的 typedef，OpenGL 可以确保在将数据发送到显卡时以正确的方式打包正确的位数。

可以使用抽象出“不同整数”的混乱的转换函数来做到这一点，但这会导致性能损失，当您谈论进出显卡的每个数字时，这通常是不可接受的。

tl; dr 使用“int”时，您在编写时要考虑到处理器的硬件。使用“GLInt”时，您在编写时要考虑到显卡的硬件。

编辑：正如评论中指出的那样，`int`出于兼容性原因，在 64 位处理器上，可以（并且可能会）32 位。从历史上看，通过 8 位、16 位和 32 位硬件，它一直是处理器的本机大小，但从技术上讲，它是编译器在创建机器代码时感觉使用的任何东西。@Nicol Bolas 和 @Mark Dickinson 的道具

# iphone - 如何在facebook中单独识别请求？

> ID：12326412
> 
> 赞同：0
> 
> 时间：2012-09-07T22:53:13.907
> 
> 标签：iphone, objective-c, ios, facebook

我正在开发一个包含 facebook 登录的应用程序，我需要在登录时获取我的详细信息和我朋友的详细信息。我为此使用了以下代码：

```
 - (void)fbDidLogin
    {
        [facebook requestWithGraphPath:@"me" andDelegate:self]; 
        [facebook requestWithGraphPath:@"me/friends" andDelegate:self];

    }

    - (void)request:(FBRequest *)request didLoad:(id)result
    {
     NSLog(@"%@",result);
    } 
```

它不能正常工作。我可以在 didLoad 中单独识别请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:56:59.663

在获取您的朋友列表之前，您必须确保您已成功登录。一次做一个。

```
 - (void)fbDidLogin
    {
        apiCall = logInUser;
        [facebook requestWithGraphPath:@"me" andDelegate:self]; 

    } 

   - (void)request:(FBRequest *)request didLoad:(id)result {
        switch (apiCall) {
            case logInUser:
            {
              if ([result isKindOfClass:[NSArray class]]) {
                result = [result objectAtIndex:0];
                }
                if ([result objectForKey:@"name"]) {
                   //login success
                    apiCall = getFriends;
                   [facebook requestWithGraphPath:@"me/friends" andDelegate:self];
                }
            }break;
            case getFriends:{
               //success  
             }break;
              .
              .
              . 
```

# java - 片段、GWT.runAsync 和 AsyncProvider

> ID：12326415
> 
> 赞同：1
> 
> 时间：2012-09-07T22:54:01.033
> 
> 标签：java, gwt, mvp, fragment

我的*理解*是，`GWT.runAsync`只要您希望实现“代码拆分”并触发新的独家片段下载，就会调用它。

我的*理解*是，建议（由 GWT）为特定片段设计/开发功能，以便它可以一次下载到一个单例实例中`AsyncProvider`并一次又一次地重用。

我的问题是：

1.  如果我使用 MVP 模式，这种“ `AsyncProvider`”风格是否适用于模型、视图和演示者？换句话说，我是否必须以模型/视图/演示者“MVP-1”不引用模型/视图/演示者“MVP-2”内部的代码的方式进行编码，以便在`AsyncProvider`调用`GWT.runAsync`和下拉时MVP-1 的片段，它是一个漂亮、干净、无依赖的下载吗？还是我从根本上`AsyncProvider`完全误解了这种模式？
2.  什么是 an`AsyncProxy`以及它如何适应这里？
3.  为什么片段需要一次又一次地重用？换句话说，`AsyncProvider`模式的好处是什么？！？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T12:40:47.480

Code Splitting 和 MVP 是两个不同的东西，这意味着你不需要 MVP 来进行代码拆分，但是使用 MVP 是一件非常好的事情。

广义上讲，一个带有 GWT 的 UI，它有很多组件（View/Presenter）放在一起，每个组件可以是 MVP 代码，也可以不是 MVP。并且当一个组件调用另一个组件时`GWT.runAsync`，如果要拆分代码，则必须使用 。所以对于第一个问题：是的，`AsyncProvider`与 MVP 一起工作。

对于其他问题，我邀请您观看 32:55 的[Google I/O 2011](http://www.youtube.com/watch?v=0F5zc1UAt2Y)，解释得很好。

我个人使用并推荐使用地点和活动进行代码拆分，请参阅[问题 5129](http://code.google.com/p/google-web-toolkit/issues/detail?id=5129)

# asp.net-mvc-3 - 在 ModelState 无效时操作其他元素

> ID：12326416
> 
> 赞同：0
> 
> 时间：2012-09-07T22:54:00.987
> 
> 标签：asp.net-mvc-3, validation, modelstate

何时可以更改另一个元素上的类`!ModelState.IsValid`？

我的观点，简化如下，将`<div class="control">`围绕每个`<input>`领域

```
@using(Html.BeginForm("AddRole","Admin", FormMethod.Post, new { @class = "ajax" })) {
    <div class="control">
        @Html.TextBoxFor(x => x.Role, new { @class = "input-xlarge", @placeholder = Html.DisplayNameFor(x => x.Role)})
        @Html.ValidationMessageFor(x => x.Role)
    </div>
}

$(function () {
    $('form.ajax').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                if (result.success) {
                    location.reload(true);
                } else {
                    $(this).html(result);
                }
            }
        });
        return false;
    });
}); 
```

和我的控制器...

```
[HttpPost]
public ActionResult AddRole(RoleModel model) {
    if(!ModelState.IsValid) {
        return PartialView("_AddRolePartial", model);
    }
    try {
        System.Web.Security.Roles.CreateRole(model.Role);
        return Json(new {success = true});
    } catch(Exception) {
        ModelState.AddModelError("", "Role creation unsuccessful.");
    }

    return PartialView("_AddRolePartial", model);
} 
```

我希望能够为模型中无效的任何属性`error`添加类。`div.control`我想我可以在 ajax 成功事件中通过 jQuery 处理这个问题，但也许有一个更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T06:17:28.783

您试图实现的目标会在您的控制器和视图之间引入耦合，这从根本上违背了 MVC（关注点分离）背后的理念。您的控制器不应该对您的视图一无所知，因此我强烈建议您在视图中使用 jQuery/javascript 执行此操作。只需返回一个包含无效属性名称的 viewbag 并使用 jquery 添加错误类。

# iphone - 从 iOS 应用程序读取 SD 卡文件

> ID：12326420
> 
> 赞同：3
> 
> 时间：2012-09-07T22:55:45.027
> 
> 标签：iphone, ios, xcode, sdk

> **可能重复：**
> [如何通过 iOS SDK 中的 iPad Camera Connection Kit 读取 SD 卡内容？](https://stackoverflow.com/questions/5488233/how-to-read-sd-card-contents-through-ipad-camera-connection-kit-in-ios-sdk)

我想编写一个 iOS 应用程序来通过 Apple 的 SD 读卡器访问 SD 卡中的数据。我想知道我需要在 Xcode 中导入什么框架，或者我被允许开发这种与从外部存储访问文件相关的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:57:16.303

到目前为止，开发人员还没有访问 SD 读卡器附件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:46:21.620

驱动器应该安装在`/var/mnt`. 查看名为 iFile 的 Cydia 应用程序。

# asp.net - 将 Ajax 工具包添加到 web.config，以便在整个项目中使用它

> ID：12326423
> 
> 赞同：0
> 
> 时间：2012-09-07T22:56:05.043
> 
> 标签：asp.net, ajax, web-config, asp.net-ajax, ajaxcontroltoolkit

我想将以下内容添加到 Web.config，以便 Ajax 工具包可用于我的整个项目，因为这是我从电子书中学习的教程的一部分。

```
<pages theme="Blue">
  <controls>
⋮
    <add tagPrefix="atk" namespace="AjaxControlToolkit"
        assembly="AjaxControlToolkit" />
  </controls>
</pages> 
```

在我们的 Web.config 文件中没有控件标记，所以我尝试添加控件标记并得到一个错误，告诉我它需要子元素控件。我假设这些子元素控件在电子书中由 ⋮ 指示。

你能告诉我需要添加哪些子元素控件以便我可以添加 tagPrefix 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:52:46.380

好的，我更改了这个答案，因为您的代码看起来很好，假设您有页面和控件`<system.web>` ，您是否在 bin 文件夹中添加了 AjaxControlToolkit？

```
<system.web>
<pages>
  <controls>
    <add assembly="Subtext.Web.Controls"
            namespace="Subtext.Web.Controls"
            tagPrefix="st" />
    <add src="~/Controls/SomeControl.ascx"
            tagName="SomeControl"
            tagPrefix="st" />
  </controls>
</pages> 
```

# android - 在Android中同时获取多个传感器数据

> ID：12326429
> 
> 赞同：8
> 
> 时间：2012-09-07T22:56:58.653
> 
> 标签：android, sensors

我现在正在尝试创建一个应用程序来监控振动。我使用加速度计来完成这项工作，当记录的加速度超过某个阈值时，我称之为触发器。当有触发时，我想将触发时的加速度、磁场、光照水平数据（来自不同的传感器）记录到文件中。

现在的问题是：我可以从单个传感器获取数据，但无法弄清楚如何同时从多个传感器获取数据。例如：我可以设置一个sensorlistener来监听加速度计的变化，当我记录加速度数据的时候，我是否也能同时获取其他传感器的数据呢？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T23:21:07.197

是的，您可以按以下方式执行此操作：

```
private SensorManager manager;
private SensorEventListener listener;

manager = (SensorManager) this.getSystemService(Context.SENSOR_SERVICE);
listener = new SensorEventListener() {
    @Override
    public void onAccuracyChanged(Sensor arg0, int arg1) {
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        Sensor sensor = event.sensor;
        if (sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
            ...
        }
        else if (sensor.getType() == Sensor.TYPE_GYROSCOPE) {
            ...
        }
    }
}

manager.registerListener(listener, manager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_GAME);
manager.registerListener(listener, manager.getDefaultSensor(TYPE_GYROSCOPE), SensorManager.SENSOR_DELAY_GAME); 
```

# c# - 从 linq 查询在 C# 中计算运行总计

> ID：12326439
> 
> 赞同：1
> 
> 时间：2012-09-07T22:57:47.533
> 
> 标签：c#, asp.net-mvc, arrays, json, linq

我花了好几天学习 linq 并从我的控制器在 mvc 中生成 json 结果。然而，我现在陷入了一个问题，我希望滚动 Y 轴数据的总和（累积总和）值以生成年初至今的折线图。

我目前生成简单月度数据的代码如下：

```
//Generic Json For Graphs
public JsonResult GetJSONYTD(int kpiID)
{
    var ViewData = 
        (from kpidata in departmentrepo.GetGraphData(kpiID)
         select new DepartmentOverviewDetailsViewModel.GraphJSONViewModel
         {
             XData = kpidata.Year.Year1 + "-" 
                     + kpidata.Month.Real_Month_Int + "-01",
             YData = kpidata.Value
         });

    var ChartData = ViewData.Select(
                        x => new object[] { x.XData, x.YData }).ToArray();

    return Json(ChartData, JsonRequestBehavior.AllowGet);
} 
```

以上产生以下数组：

```
[
 ["2011-10-01",0],
 ["2011-11-01",22],
 ["2011-12-01",22],
 ["2012-1-01",14],
 ["2012-2-01",14.4],
 ["2012-3-01",17.5],
 ["2012-4-01",20.3],
 ["2012-5-01",23.5],
 ["2012-6-01",24.5],
 ["2012-7-01",26.5]
] 
```

我想输出：

```
[
 ["2011-10-01",0],
 ["2011-11-01",22],
 ["2011-12-01",44],
 ["2012-1-01",38],
 ["2012-2-01",52.4],
 etc
] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:21:21.670

将您的代码更改为：

//图的通用Json

```
public JsonResult GetJSONYTD(int kpiID)
{
    var graphData = departmentrepo.GetGraphData(kpiID);
    var ViewData = (from kpidata in graphData

                    select new DepartmentOverviewDetailsViewModel.GraphJSONViewModel
                    {
                        XData = kpidata.Year.Year1 + "-" + kpidata.Month.Real_Month_Int + "-01",
                        YData = graphData.Where(x=>x.Date<=kpidata.Date).Sum(x=>x.Value)
                    });

    var ChartData = ViewData.Select(x => new object[] { x.XData, x.YData }).ToArray();

    return Json(ChartData, JsonRequestBehavior.AllowGet);
} 
```

上面的代码将在 YData 中存储数据小于或等于当前日期的所有数据点的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:13:55.973

您可以使用 Aggregate 内联执行此操作：

```
 var rollingSum = ViewData.Aggregate(
        // start with a list of a single model with value 0 (this avoids func having to deal with the empty list case
        seed: new[] { new DepartmentOverviewDetailsViewModel.GraphJSONViewModel { XData = string.Empty, YData = 0.0 } }.ToList(),
        // the aggregation function adds to the list a new tuple with the current date string
        // and a cumulative sum value
        func: (list, data) => {
            list.Add(new DepartmentOverviewDetailsViewModel.GraphJSONViewModel { XData = data.XData, YData = data.YData + list[list.Count - 1].YData });
            return list;
        }
    )
    .Skip(1) // skip the first dummy value we seeded the list with
    .ToArray(); 
```

另一种选择是编写一个通用的累积和函数，然后使用它：

```
public static class MyEnumerableExtensions {

    public static IEnumerable<double> CumulativeSum(this IEnumerable<double> @this) {
        var sum = 0;
        foreach (var value in @this) { sum += value; yield return sum; }
    }

}

// then to compute the sum you want
var rollingSum = ViewData.Select(m => m.YData).CumulativeSum();
var rollingSumWithDates = ViewData.Zip(rollingSum, (m, sum) => new DepartmentOverviewDetailsViewModel.GraphJSONViewModel { XData = m.XData, YData = sum })
    .ToArray(); 
```

# php - Magento; 在正文类之前删除空格

> ID：12326440
> 
> 赞同：0
> 
> 时间：2012-09-07T22:57:55.760
> 
> 标签：php, magento

如何删除类值之前的空格？

为了验证 HTML，这：

```
<body class=" cms-index-index cms-home"> 
```

应该：

```
<body class="cms-index-index cms-home"> 
```

这发生在我的主页上。

布拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T02:08:33.180

这在验证和渲染的世界中应该无关紧要......但是，只需将[`Mage_Page_Block_Html::getBodyClass()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Page/Block/Html.php#L157)方法重写如下：

```
public function getBodyClass()
{
    return trim($this->_getData('body_class');
} 
```

# python - 线程同步的设计帮助

> ID：12326443
> 
> 赞同：0
> 
> 时间：2012-09-07T22:58:14.597
> 
> 标签：python, multithreading, synchronization

我正在编写一个验证设备事件的 python 程序。

我不断地从设备的串行端口读取一些数据。当我在设备的 serail 端口上写一些东西时，设备会在我必须读取的串行端口上写入一个字符串。从串行端口连续读取部分是在一个单独的工作线程中，我逐行读取它并将其写入一个线程。设备连续写入一些数据，并将事件描述写入串行端口。

更具体地说，当我在设备上写东西时，它会在设备上生成一个事件。事件的描述被写回到串口。我必须读回它并验证事件是否发生。

现在，当我在线程中逐行读取设备输出时发生了什么，当我写一些东西并开始读取要发生的事件描述时，它的输出已经消失，接下来正在读取其他一些输出行。我如何同步这个？

任何人都可以帮助我设计这部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:07:00.803

如果您只是将线程用于异步 IO，最好不要使用线程并使用 select.select，或者如果您想让自己更轻松，甚至可以使用 asyncore。

[http://docs.python.org/library/asyncore.html](http://docs.python.org/library/asyncore.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T19:46:17.323

代码片段如下：

SerialCom 类：

```
 __init__(self,comport):

     self.comport = comport

     self.readSerialPortThread = ReadSearialPortThread(self.comport)

  def writeStringToSerialPort(someString):

     self.comport.write(someString)

  def waitfordata(someString):

    #I have to continuously read data from serial port till we someString. 
```

在 ReadSearialPortThread 中，来自串行端口的数据不断读取设备信息值。当我使用 writeStringToSerialPort() 写入数据时，设备会向串行端口输出一些数据，我必须从函数 waitfordata 读取这些数据，以验证来自设备的响应。

现在发生的事情是，当我写入一些值并调用 waitfordata() 时，readSerialPortThread 已经读取了所需的值并继续读取其他一些值，例如设备信息。所以我在那里失去了价值观。我想知道如何同步。

# jquery - 如果硬件加速不可用，CSS3 过渡与 jQuery 动画？

> ID：12326445
> 
> 赞同：1
> 
> 时间：2012-09-07T22:58:19.650
> 
> 标签：jquery, html, css, css-transitions, hardware-acceleration

我有一个在汽车的仪表板显示单元中运行的 HTML5/JS 应用程序。我在动画中使用了 jQuery，但最终在硬件上看到它之后，我意识到它的表现就像垃圾一样。

我改用 CSS3 过渡。但是，我刚刚了解到 CSS3 硬件加速仅在我的应用程序将运行的某些单元中可用。

所以据我了解，CSS3 过渡相对于 jQuery .animate 的最大优势是硬件加速，对吧？但是如果硬件加速在特定设备上不可用，我最好使用 CSS3 或 jQuery 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:05:08.307

如果可以的话，我会推荐使用 CSS3，因为浏览器可以直接应用任何必要的优化。尽管我相信 jQuery 正朝着在某些动画可能的情况下利用 CSS3 的方向发展。

# c# - 使用 iPhone 本机应用程序中的 Xamarin 库

> ID：12326447
> 
> 赞同：1
> 
> 时间：2012-09-07T22:58:42.683
> 
> 标签：c#, ios, xamarin

我想将一些计算 C# 代码编译成 iOS/iPhone 原生库，可供原生 iPhone 应用程序使用。我有 Xamarin，但我没有 Mac。

我对 iPhone 开发或目标 C 不是很熟悉。我在想，既然 Xamarin 编译为本机库，那么它可能归结为公开一些方法并创建一些头文件？

1.  这可能吗？
2.  如何？（如果您没有完整的答案，那么也许您有一些建议/想法可以帮助我。）
3.  有什么方法可以在 Windows/Linux 下为 iPhone 编译我的库，还是我必须购买 Mac？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:16:12.443

在尝试了不使用 Mac 进行 iPhone 开发的痛苦之后，我建议理解它的唯一方法是购买便宜的 Mac mini，即使是二手的也可以，然后安装 MonoDevelop、Xamarin MonoTouch 和 XCode。

昂贵的部分是 Mac，它是大约 600 美元新的或少得多的二手货，以及 Xamarin 工具的专业许可证。

好处是你得到了一台 Mac，它在*某些方面*胜过 PC 的垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:48:10.453

据我所知，Xamarin 的 MonoTouch 仅适用于 Mac，所以我不相信这是可能的。

在 windows / linux 机器上编译任何 iPhone 库或应用程序的唯一方法是设置 iphone 工具链。（见[http://code.google.com/p/iphone-dev/wiki/Building](http://code.google.com/p/iphone-dev/wiki/Building)）

一旦你设置了工具链，就有可能以某种方式将 Xamarin 集成到这个工具链中，但我绝对不知道该怎么做。此外，您不会拥有任何带有工具链的 IDE。

因此，我认为购买 Mac 并使用 MonoDevelop 安装 Xamarin 会容易得多。

# java - 我的精灵动画系统高度重新计算有一些问题

> ID：12326448
> 
> 赞同：0
> 
> 时间：2012-09-07T22:58:50.037
> 
> 标签：java, animation, gravity

基本上，它的工作方式是更新帧以显示每 24 个滴答声，并且每次帧更新时，它都会重新计算要渲染的新精灵的高度和宽度，以便我的重力逻辑和东西运行良好。但是我现在遇到的问题有点难以用语言来解释，因此我将使用这张图片来帮助我

![图片](../Images/9c934fefa2a7f50a8d24d6a13756887d.png)

所以我基本上需要的是，如果假设我在第一帧冻结了精灵，然后解冻它并在第二帧冻结它，让第二帧的精灵（假设这是一个俯卧动作）简单地站在立足点而不开始重力和切换回来时，让第一个精灵像往常一样回到立足点而不是在立足点之下。

我对此有两个想法，但我不确定这是最有效的方法，所以我想听听你的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:06:21.657

修复了我的问题，不确定它在未来是否还能有效运行，但对我来说这似乎是一个不错的方法

（我为对象Foothold添加了一个currentFoothold定义实体，当实体是OnGround时，自然地将那个立足点对象设置为他当前站立的立足点。重新计算高度时，如果实体isOnGround && foothold != null 设置实体的Y坐标到地图中立足点的Y坐标）

# mysql - Mysql“安装失败，安装程序遇到和导致安装失败的错误”

> ID：12326451
> 
> 赞同：2
> 
> 时间：2012-09-07T22:59:19.203
> 
> 标签：mysql

在我的系统上运行 MySQL 后，我无法在 Mac OS X 上重新安装它。

我卸载了它，因为 PreferencePane 没有按预期工作，使用这里描述的过程：http: [//akrabat.com/computing/uninstalling-mysql-on-mac-os-x-leopard/](http://akrabat.com/computing/uninstalling-mysql-on-mac-os-x-leopard/)

尝试重新安装 MySQL Mac OS X 版本时。10.6（x86，64位），使用PKG安装程序的DMG存档版本，它说`The installation failed`

以下是完整的安装日志：

我将非常感谢任何帮助

```
Sep  7 15:12:10 Mariana.local installd[18515]: PackageKit: Extracting file://localhost/Volumes/mysql-5.5.27-osx10.6-x86_64/MySQLStartupItem.pkg (destination=/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root/Library/StartupItems, uid=0)
Sep  7 15:12:10 Mariana.local installd[18515]: PackageKit: prevent user idle system sleep
Sep  7 15:12:10 Mariana.local installd[18515]: PackageKit: suspending backupd
Sep  7 15:12:10 Mariana.local installd[18515]: PackageKit: Shoving /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/Cleanup At Startup/PKInstallSandboxManager/1.sandbox/Root (1 items) to /
Sep  7 15:12:10 Mariana.local install_monitor[18520]: Temporarily excluding: /Applications, /Library, /System, /bin, /private, /sbin, /usr
Sep  7 15:12:10 Mariana.local installd[18515]: PackageKit: Executing script "./postinstall" in /Volumes/mysql-5.5.27-osx10.6-x86_64/MySQLStartupItem.pkg/Contents/Resources
Sep  7 15:12:10 Mariana.local install_monitor[18520]: Re-included: /Applications, /Library, /System, /bin, /private, /sbin, /usr
Sep  7 15:12:11 Mariana.local installd[18515]: PackageKit: releasing backupd
Sep  7 15:12:11 Mariana.local installd[18515]: PackageKit: allow user idle system sleep
Sep  7 15:12:11 Mariana.local installd[18515]: PackageKit: Install Failed: Error Domain=PKInstallErrorDomain Code=112 "An error occurred while running scripts from the package “MySQLStartupItem.pkg”." UserInfo=0x7fb809c201f0 {NSFilePath=./postinstall, NSURL=file://localhost/Volumes/mysql-5.5.27-osx10.6-x86_64/MySQLStartupItem.pkg, PKInstallPackageIdentifier=com.mysql.mysqlstartup, NSLocalizedDescription=An error occurred while running scripts from the package “MySQLStartupItem.pkg”.} {
        NSFilePath = "./postinstall";
        NSLocalizedDescription = "An error occurred while running scripts from the package \U201cMySQLStartupItem.pkg\U201d.";
        NSURL = "file://localhost/Volumes/mysql-5.5.27-osx10.6-x86_64/MySQLStartupItem.pkg";
        PKInstallPackageIdentifier = "com.mysql.mysqlstartup";
    }
Sep  7 15:12:11 Mariana.local Installer[18449]: install:didFailWithError:Error Domain=PKInstallErrorDomain Code=112 "An error occurred while running scripts from the package “MySQLStartupItem.pkg”." UserInfo=0x7f82d14a84c0 {NSFilePath=./postinstall, NSURL=file://localhost/Volumes/mysql-5.5.27-osx10.6-x86_64/MySQLStartupItem.pkg, PKInstallPackageIdentifier=com.mysql.mysqlstartup, NSLocalizedDescription=An error occurred while running scripts from the package “MySQLStartupItem.pkg”.}
Sep  7 15:12:11 Mariana.local Installer[18449]: Install failed: The Installer encountered an error that caused the installation to fail. Contact the software manufacturer for assistance.
Sep  7 15:12:11 Mariana.local Installer[18449]: IFDInstallController D0434500 state = 7
Sep  7 15:12:11 Mariana.local Installer[18449]: Displaying 'Install Failed' UI.
Sep  7 15:12:11 Mariana.local Installer[18449]: 'Install Failed' UI displayed message:'The Installer encountered an error that caused the installation to fail. Contact the software manufacturer for assistance.'. 
```

# ruby - Ruby、WordPress：阅读最新文章

> ID：12326452
> 
> 赞同：1
> 
> 时间：2012-09-07T22:59:19.620
> 
> 标签：ruby, wordpress

在阅读了 WordPress 文档并进行了一些研究之后，似乎关于如何在 WordPress 网站上获取最后 10 个帖子的建议是执行以下操作：

```
require 'xmlrpc/client'
#initialize a connection
connection = XMLRPC::Client.new2('http://www.mywordpresssite.com')
result = connection.call('metaWeblog.getRecentPosts', 1,'admin','123456')
#or it seems that I can also call:
result = connection.call('wp.getPages', 1,'admin','123456',10) 
```

在连接调用之后，我得到了一个合法的结果：

```
 => #<XMLRPC::Client:0x007fdfec50cac0 @http_header_extra=nil, @http_last_response=nil, @cookie=nil, @host="www.mywordpresssite.com", @path="/RPC2", @proxy_host=nil, @proxy_port=nil, @use_ssl=false, @timeout=30, @port=80, @password=nil, @user=nil, @auth=nil, @http=#<Net::HTTP www.mywordpresssite.com:80 open=false>, @parser=nil, @create=nil> 
```

但是当我这样做时：

```
result = connection.call('wp.getPages', 1,'admin','123456',10) 
```

或者

```
result = connection.call('metaWeblog.getRecentPosts', 1,'admin','123456') 
```

我得到：

SocketError: getaddrinfo: nodename or servname provided, or not known

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:22:39.270

实际上，当我尝试使用 xmlrpc/client 从我的 Sinatra 应用程序发布时，我遇到了相同的错误消息。

有趣的是，当我使用从 IRB 发帖的相同方式时，我可以成功地发帖到我的博客上。

我发现 xmlrpc 似乎并不真正喜欢该协议。我删除了

```
 http:// 
```

从链接，它顺利进行。试试看，也许有帮助。

# ios - 如何使用标签或标识符将多张图片添加到自定义 tableviewcells

> ID：12326453
> 
> 赞同：1
> 
> 时间：2012-09-07T22:59:23.417
> 
> 标签：ios, uitableview, uiimage, nsmutablearray

我想将图片从表格添加`NSMutableArray`到自定义单元格中。每个单元格中将有四个或更多图像。所以这是我的问题：

如果我指的`indexPath.row`是自定义单元格，它将如下所示：

> 单元格1：图片1、图片2、图片3、图片4 单元格2：图片2、图片3、图片4、图片5 单元格3：图片3、图片4、图片5
> 、
> 图片6

但我想要：

> 单元格1：图片1，图片2，图片3，图片4 单元格2 ：图片5，
> 图片6，图片7，图片8 单元格3
> ：图片9，图片10，图片11，图片12

我是 xCode 的新手，我没有看到一个好的解决方案。

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"ImageCustomCell";

    ImageCustomCell *cell = (ImageCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ImageCustomCell" owner:nil options:nil];

        for(id currentObject in topLevelObjects) {

            if ([currentObject isKindOfClass:[UITableViewCell class]]) {

                cell = (ImageCustomCell *) currentObject;

            break;
            }
        }
    }
// here i get the indexPath.row for every cell and add +1 - +3 to it to get the next image, but every new cell just get +1, not +4
    cell.imageForCell.image = [UIImage imageWithContentsOfFile:[imagePathArray objectAtIndex:indexPath.row]];
    cell.imageForCell2.image = [UIImage imageWithContentsOfFile:[imagePathArray objectAtIndex:indexPath.row+1]];
    cell.imageForCell3.image = [UIImage imageWithContentsOfFile:[imagePathArray objectAtIndex:indexPath.row+2]];
    cell.imageForCell4.image = [UIImage imageWithContentsOfFile:[imagePathArray objectAtIndex:indexPath.row+3]];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:23:42.250

您的问题是，虽然`indexPath.row`每次调用增加一个，`tableView:cellForRowAtIndexPath:`但编码好像增加了 4。当然，`UITableView`行索引增量应该并且将保持在每行一个，因此您必须找到一种不同的方法。

您需要找到一个函数，该函数映射到与您要放置在单元格中最左侧的图像对应`indexPath`的索引，该图像由. 一旦你找到那个索引，剩下的三个图像就是从那个位置偏移的 1、2 和 3 个元素。`imagePathArray``indexPath`

由于这没有标记为“作业”，我想我只会给你答案：它是行乘以每行的图像数量。您可以随意使用它，也可以使用这段代码。尚未编译或测试，如果您无法自行解决任何拼写错误或错误，请告诉我。

实现这样的方法：

```
- (NSArray *)imagePathsForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger imagePathArrayStartingIndex = indexPath.row * IMAGES_PER_ROW;
    NSRange imagePathArrayIndexRange = NSMakeRange(imagePathArrayStartingIndex, IMAGES_PER_ROW);
    NSIndexSet *imagePathArrayIndexes = [NSIndexSet indexSetWithIndexesInRange:imagePathArrayIndexRange];
    NSArray *imagePathsForRow = [imagePathArray objectsAtIndexes:imagePathArrayIndexes];
    return imagePathsForRow;
} 
```

然后更改您在其中设置单元格图像的行`tableView:cellForRowAtIndexPath`：

```
NSArray *imagePathsForRow = [self imagePathsForRowAtIndexPath:indexPath];
cell.imageForCell.image  = [UIImage imageWithContentsOfFile:[imagePathsForRow objectAtIndex:0]];
cell.imageForCell2.image = [UIImage imageWithContentsOfFile:[imagePathsForRow objectAtIndex:1]];
cell.imageForCell3.image = [UIImage imageWithContentsOfFile:[imagePathsForRow objectAtIndex:2]];
cell.imageForCell4.image = [UIImage imageWithContentsOfFile:[imagePathsForRow objectAtIndex:3]]; 
```

希望这可以帮助！

# c++ - Linux shell 模拟：卡在多个管道上

> ID：12326457
> 
> 赞同：2
> 
> 时间：2012-09-07T23:00:01.857
> 
> 标签：c++, linux, fork, pipe

我知道已经有人问过类似的问题，但没有一个答复对我有帮助。我正在尝试实现一个微型 Linux shell 并被困在多个管道上。带有单个管道（例如`ls | wc`）的命令可以工作，但是如果我添加第二个管道，控制台上不会显示任何内容。这是我的代码。

```
void ExecuteCommand(NODE *cHead,NODE *oHead)
{
    int fd[10][2];  // file descriptors' array
    int nfdCnt = 0 ;    // file descriptors counter
    string strCmd;      // command
    string strOp = "";  // operator
    int nOpCnt = 0 ;    // operator count

    while(1)
    {
        if (cHead != NULL)  // cHead is head pointer to the linked list of commands.
        {
            strCmd =  GetCmdOROperator(&cHead); // get command
        }
        if (oHead == NULL)  // oHead is head pointer to the linked list of operators.
        {
            strOp = "";
        }
        else
        {
            strOp = GetCmdOROperator(&oHead);   // get operator
        }

        if (strOp.empty())  // no operator exists. single or last command in the chain.
        {
            // Fork the child process
            pid_t child_id = fork();

            if(child_id == 0)
            {
                // Execute the command

                if (nOpCnt) // if we previously encountered any operator
                {
                    close(fd[nfdCnt-1][FD_WRITE]);
                    dup2(fd[nfdCnt-1][FD_READ], FD_READ);   // read from pipe updated by previous command
                }

                // call execvp()

                exit(-1);
            }
            else
            {
                for (int i = 0 ; i < nfdCnt; i++)
                {
                    close(fd[nfdCnt][0]);
                    close(fd[nfdCnt][1]);
                }
                wait(NULL);
                break;
            }
        }

        if (strOp == "|")
        {
            nOpCnt++ ;

            if (pipe (fd[nfdCnt]) < 0)
            {
                printf("\npipe error");
                return ;
            }

            pid_t child_id = fork();
            if (child_id == 0)
            {
                close(fd[nfdCnt][FD_READ]); // we dont need this
                dup2(fd[nfdCnt][FD_WRITE], FD_WRITE);

                if(nOpCnt > 1) // if we have already encountered a pipe before
                {
                    dup2(fd[nfdCnt-1][FD_READ],FD_READ);
                    close(fd[nfdCnt-1][FD_WRITE]);
                }

                // call execvp()
                exit (-1);
            }
            else
            {
                nfdCnt++;
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T17:57:03.163

我没有仔细查看您的代码，但看起来您正在打开文件描述符，在这种情况下，由于有人打开了写入端，即使您认为您已经关闭了它，进程也会在读取时阻塞。尝试在每个 dup2 之后添加关闭：

```
 dup2( fd[ nfdCnt - 1 ][ FD_READ ], FD_READ );
 close( fd[ nfdCnt - 1 ][ FD_READ ]) 
```

（另外，添加一些错误检查。 `dup2`, `fork`,`close`等都可能失败。在向论坛发布问题时跳过错误检查有时很方便，但请确保在实际代码中不要省略它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T18:13:20.507

这个

```
 if (strOp == "|") 
```

在 C 中不起作用；用于`strcmp`比较字符串。或者也许你把你的问题弄错了 C 而不是 C++？你使用什么语言编译器？

# android - 一旦活动加载，操作栏 Sherlock 就会消失

> ID：12326461
> 
> 赞同：0
> 
> 时间：2012-09-07T23:00:23.957
> 
> 标签：android, actionbarsherlock

当我从它们开始活动时，我的 ActionBar 选项卡正在消失。我可以正常看到活动，但选项卡没有出现。

我的 SherlockFragmentActivity 是 -

```
public class FragmentDemoActivity extends SherlockFragmentActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tab1 = bar.newTab();
    ActionBar.Tab tab2 = bar.newTab();

    tab1.setText("Fragment A");
    tab2.setText("Fragment B");

    tab1.setTabListener(new MyTabListener());
    tab2.setTabListener(new MyTabListener());
    bar.addTab(tab1);
    bar.addTab(tab2);
}

private class MyTabListener implements ActionBar.TabListener
{

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if(tab.getPosition()==0)
        {
            CalendarViewActivity frag = new CalendarViewActivity();
            startActivity(new Intent(getApplicationContext(),CalendarViewActivity.class));
            //ft.replace(android.R.id.content, frag);

        }
        else
        {
            TestActivity frag = new TestActivity();
            //ft.replace(android.R.id.content, frag);
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

}

虽然我的 Acitivity 是一个普通的 Android Activity -

```
public class CalendarViewActivity extends Activity 
```

请提供任何帮助。

而我的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:19:13.790

> 我可以正常看到活动，但选项卡没有出现。

当然不是。你没有放任何标签`CalendarViewActivity`，部分原因`CalendarViewActivity`是它只是一个普通的`Activity`.

如果您认为点击选项卡应该将某些内容加载到`FragmentDemoActivity`中，那么您不应该`startActivity()`从您的`TabListener`. 相反，您应该执行`FragmentTransaction`或以其他方式修改`FragmentDemoActivity`.

# php - 从网站获取数据

> ID：12326470
> 
> 赞同：-5
> 
> 时间：2012-09-07T23:01:57.893
> 
> 标签：php, cakephp, curl

我正在开发一个应用程序，我需要从另一个来源/网站获取数据。我做了谷歌并测试了一些选项，如 file_get_contents / Curl。很明显 curl 比 file_get_contents 快得多。

现在，我需要获取的是某个内容列表，例如 div 中的项目列表。我想忽略 HEAD 信息/脚本/css 等。只需要获取数据并在我自己的主题中设置样式。

请告诉我获取内容和样式输出的最佳方法/功能。如果您可以抽出时间编写基本代码，那将非常有帮助...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:10:41.800

我会使用 HTML 解析器。我使用**简单的 HTML DOM 解析器：http://simplehtmldom.sourceforge.net/** [，](http://simplehtmldom.sourceforge.net/)它很棒。还有一个很棒的文档。它在其主页中给出了这个例子：

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');

// Find all images 
foreach($html->find('img') as $element) 
       echo $element->src . '<br>';

// Find all links 
foreach($html->find('a') as $element) 
       echo $element->href . '<br>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:27:22.020

你可以做到这一点的一种*方法*`file_get_contents`是使用.

例子：

`$fileHTML = file_get_contents('http://www.google.ca');`
`$title = substr($fileHTML,strpos($fileHTML,'<title>') + 7,strpos($fileHTML,'</title>') - (strpos($fileHTML,'<title>') + 7));`
+ 7 所以它将转到 <title> 的末尾
`echo $title;`
这应该显示 Google 网站的标题。

可行的方法是获取 ID，因为在适当的网站中，具有 id 的所有内容都是唯一的。

# autocomplete - 通用代码完成库/工具

> ID：12326471
> 
> 赞同：9
> 
> 时间：2012-09-07T23:02:05.480
> 
> 标签：autocomplete, code-completion

我正在尝试在我最喜欢的编辑器中设置正确的代码完成，我们称之为 AnEditor 以避免互联网上充斥着特定于程序的答案。（而且语言是语言，你知道。）编辑器有两个我喜欢它的特性：它在控制台和 GUI 中工作得一样好，所以我可以在网络上使用它，而且它具有很大的可扩展性。所以我不愿意使用成熟的 IDE。但是编辑器没有可靠的代码完成功能，但如果我找到合适的解决方案可以插入它。

我已经用谷歌搜索了一大堆关于“ *[editor/IDE Y]中的**[language X]*完成”的问题和解决方案。似乎每个新的 IDE 都在从头开始为每种语言实现其代码完成，解析器等等。每个更简单的编辑器（包括 AnEditor）都会执行以下操作之一：

 **   仅完成标准库函数名称，
*   或使用 ctags 提供基于正则表达式的延迟“解析”（对于非 C 程序），并且不应该告诉您刚刚输入的变量的类型，因此对于真正的代码完成不是很有用，
*   如果编辑器可以通过插件进行扩展，还有其他方法，但它们通常归结为上述或多或少的变态组合，以及大量自定义正则表达式。

现在，问题是，为什么我们不能有一个健全的代码完成库，我可以将其插入 AnEditor 并让其他人插入 ABigIDE？据我所知（解密 C 指针丛林不是我的目标），答案应该看起来像这样：

*   yacc/lex/bison 风格的通用解析器（或静态分析器），以某种方式放松以容忍编写过程中的代码，能够理解 JavaDoc 风格的注释。并且速度快，最好，所以它可以在飞行中使用
*   一个索引，可以告诉类的成员、方法的签名及其在文件中的位置（ctags 现在这样做）、返回值和来自 JavaDoc 注释的其他文档
*   另一个知道变量类型的索引，以及一个根据当前正在编写的文件或代码中的位置告诉类型的函数

因此，要完成某些语言工作，您需要为该语言制定解析器规则，在标准库和您的项目上构建索引，调用类型识别函数并查找类的成员和文档。或者，如果您正在处理对象构造或静态调用，则只需列出类和成员。

如果 Eclipse、Netbeans 和 JetBrains 已经在 J​​ava 中成功地完成了它（所以我应该将[Eclipse 插入 AnEditor](http://eclim.org/)），为什么没有人能以一种不那么臃肿和更通用的方式来做呢？还是我错过了什么，未来已经潜伏在某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-18T12:24:24.897

所以：到目前为止，几乎所有的人都解决了这个确切的问题。[“语言服务器”提供了一种协议，可以将特定语言的语义感知完成和其他功能插入到不同的编辑器和 IDE。](https://langserver.org)

值得注意的是，“语言服务器”往往是用它们解析的相同语言开发的。在 Python 等速度较慢的语言中，这可能是一个值得怀疑的决定。

对于某些语言，类似的解决方案在一段时间内可用，独立于 Langservers ——例如[用于 JS 的 Tern、](https://ternjs.net/)用于Haskell 的[Scion](https://github.com/nominolo/scion)和[ghc-mod](http://www.mew.org/~kazu/proj/ghc-mod/en/)等。这些往往主要服务于 Emacs 和 Vim。可以预见，这样的解决方案主要出现在非主流语言上，就像所有编译成 JS 的语言一样——它们的出现似乎比为每个编辑器/IDE 开发单独的插件更快。*

# .net - 从 TFS 启动 CruiseControl 构建

> ID：12326472
> 
> 赞同：0
> 
> 时间：2012-09-07T23:02:06.980
> 
> 标签：.net, build, tfs, cruisecontrol.net, tfsbuild

我的团队已将我们的源代码从另一个源代码控制系统迁移到 TFS。我们的构建利用 CruiseControl.NET。构建迁移的第一步是继续我们的 CC.NET 构建过程，但从 TFS 获取源代码。没问题。

下一步是开始向基于 TFS 的构建迁移。我正在考虑的第一步是从 TFS 中启动 CC.NET 构建。这样，TFS 处理触发器（例如基于签入的 CI 构建）和构建报告，但 CC.NET 执行实际构建。

**有人做过这种 TFS/CC 集成吗？有任何陷阱或警告吗？启动构建并从 CC.NET 获取构建结果的最佳方式是什么？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:26:51.663

为什么不保留您当前的 CCNet 设置？只需切换源代码控制，一切正常。因为这仍然是您公司的主要构建服务器。

接下来，您可以轻松设置/试验基于纯 tfs 的构建服务器的功能。我不会尝试将 CCNet 的结果转换为 tfs。只是因为您必须更改当前构建服务器设置中的 X 设置，这将中断当前的构建流程。CI / QA / 生产

让它们并行运行，暂时只使用另一个基于 tfs 的标签系统。这样您就可以在一切正常时进行切换，并且不会干扰您当前的设置。

# java - JSTL嵌套foreach循环不打印

> ID：12326473
> 
> 赞同：3
> 
> 时间：2012-09-07T23:02:10.333
> 
> 标签：java, jsp, jstl

目前正在从事一个项目，我从 JSP 中的 Servlet 接收 Map 对象的 ArrayList。它的工作方式是当页面被拉起时，有一个通过 jquery 对 Servlet 的 AJAX 调用，该 Servlet 将使用必要的地图列表发送回响应。我遇到的问题是在页面加载后我试图根据 Map 对象中的值构建一个表。我的代码似乎正在工作（有点）。当我使用 firebug 查看 XHR 响应时，我可以看到整个页面中都存在正确的标签（即 tr 和 td 标签）。当我尝试在浏览器中使用“查看源代码”查看页面时，将在 forEach 循环中创建的 HTML 不存在，只有我手动创建的 HTML 存在。

```
 <table>
            <tr>
                <th>Home</th>
                <th>Away</th>
            </tr>
            <c:forEach var="currentTeam" items="${GamesList}">
                <tr id="game">
                <c:forEach var="currentGame" items="${currentTeam}">
                    <c:if test="${currentGame.key eq 'Home' }">
                        <td>${currentGame.value}</td>
                    </c:if>
                    <c:if test="${currentGame.key eq 'Visitor' }">
                        <td>${currentGame.value }</td>
                    </c:if>
                </c:forEach>
                </tr>
            </c:forEach>
        </table> 
```

是我正在使用的当前代码。它本身包含在 div 标签中。不确定它是否有帮助，但只有当用户单击按钮打开 Jquery 弹出窗口时才会显示此 div。任何帮助，将不胜感激。

在 Firebug 中查看的 XHR 响应如下所示

```
 <tr><td>New York Giants</td><td>Dallas Cowboys</td></tr>
                <tr><td>Chicago Bears</td><td>Indianapolis Colts</td></tr>
                <tr><td>Minneosta Vikings</td><td>Jacksonville Jaguars</td></tr>
                <tr><td>New York Jets</td><td>Buffalo Bills</td></tr>
                <tr><td>Houston Texans</td><td>Miami Dolphins</td></tr>
                <tr><td>Tennessee Titans</td><td>New England Patriots</td></tr>
                <tr><td>Detroit Lions</td><td>St. Louis Rams</td></tr>
                <tr><td>New Orleans Saints</td><td>Washington Redskins</td></tr>
                <tr><td>Cleveland Browns</td><td>Philadelphia Eagles</td></tr>
                <tr><td>Kansas City Chiefs</td><td>Atlanta Falcons</td></tr>
                <tr><td>Green Bay Packers</td><td>San Francisco 49ers</td></tr>
                <tr><td>Arizona Cardinals</td><td>Seattle Seahawks</td></tr>
                <tr><td>Tampa Bay Buccaneers</td><td>Carolina Panthers</td></tr> 
```

为简洁起见。查看源代码如下所示：

```
 <table>
            <tr>
                <th>Home</th>
                <th>Away</th>
            </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T06:36:31.467

在 Servlet 中打印列表并将结果设置为 div 内容，如下所示

```
$("button").click(function(){
    $.ajax({url: "\ServletCall", success: function(result){
        $("#div1").html(result);
    }});
});

<table>
            <tr>
                <th>Home</th>
                <th>Away</th>
            </tr>
<div id="div1"></div>
</table> 
```

# php - 如何在没有回显的情况下输出嵌套/线程注释

> ID：12326475
> 
> 赞同：0
> 
> 时间：2012-09-07T23:02:46.550
> 
> 标签：php, codeigniter, hierarchical-data, nested-loops

我为 Codeigniter 创建了一个嵌套注释库，它*几乎*可以工作了。

`<ul>`如果不回显每个or`<li>`元素，我似乎无法输出嵌套注释。我不希望库直接写任何东西，我想将它保存到一个变量中并返回它，以便我可以在视图中回显它。

这是库代码：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class Comments
{
    public $parents  = array();
    public $children = array();

    public function init($comments)
    {
        foreach ($comments as $comment)
        {
            if ($comment['parent_comment_id'] === NULL)
            {
                $this->parents[$comment['comment_id']][] = $comment;
            }
            else
            {
                $this->children[$comment['parent_comment_id']][] = $comment;
            }
        }

        $this->prepare($this->parents);

    } // End of init

    public function thread($comments)
    {
        if(count($comments))
        {
            echo '<ul>';

            foreach($comments as $c)
            {
                echo "<li>" . $c['text'];
                //Rest of what ever you want to do with each row

                if (isset($this->children[$c['comment_id']])) {
                    $this->thread($this->children[$c['comment_id']]);
                }

                echo "</li>";
            }
            echo "</ul>";
        }
    } // End of thread

    private function prepare()
    {
        foreach ($this->parents as $comment)
        {
            $this->thread($comment);
        }
    } // End of prepare

} // End of Comments class 
```

上面的代码生成：

```
- Parent
    - Child
        - Child Third level
- Second Parent
    - Second Child 
```

或在 HTML 中：

```
<ul>
    <li>Parent
        <ul>
        <li>Child
            <ul>
                <li>Child Third level</li>
            </ul>
        </li>
        </ul>
    </li>
</ul>

<ul>
    <li>Second Parent
        <ul>
            <li>Second Child</li>
        </ul>
    </li>
</ul> 
```

这是正确的 HTML，但不希望将它们回显出来。

我试图做的是：

```
public function thread($comments)
    {
        if(count($comments))
        {
            $output = '<ul>';

            foreach($comments as $c)
            {
                $output .= "<li>" . $c['text'];
                //Rest of what ever you want to do with each row

                if (isset($this->children[$c['comment_id']])) {
                    $this->thread($this->children[$c['comment_id']]);
                }

                $output .= "</li>";
            }
            $output .= "</ul>";

            echo $output;
        }
    } // End of thread 
```

这不能按预期工作，并且在回显时会生成以下内容：

```
- Child Third level
- Child
- Parent
- Second Child
- Second Parent 
```

或 HTML：

```
<ul><li>Child Third level</li></ul>
<ul><li>Child</li></ul>
<ul><li>Parent</li></ul>
<ul><li>Second Child</li></ul>
<ul><li>Second Parent</li></ul> 
```

这显然是不希望的，因为它没有嵌套评论。

我整天都被困在这上面，有人对我如何正确生成列表有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:15:47.290

尝试这个：

```
public function thread($comments,$output='')
{
    if(count($comments))
    {
        $output. = '<ul>';

        foreach($comments as $c)
        {
            $output .= "<li>" . $c['text'];
            //Rest of what ever you want to do with each row

            if (isset($this->children[$c['comment_id']])) {
                $output.=$this->thread($this->children[$c['comment_id']],$output);
            }

            $output .= "</li>";
        }
        $output .= "</ul>";

        return $output;
    }
} 
```

我还没有测试它，但它看起来应该可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:30:43.803

问题是在递归调用完成之前，您不会回显某个级别的输出，因为您正在将内容累积到`$output`变量中。与其积累它，不如在那一刻回显它：

```
public function thread($comments)
    {
        if(count($comments))
        {
            echo'<ul>';

            foreach($comments as $c)
            {
                echo "<li>" . $c['text'];
                //Rest of what ever you want to do with each row

                if (isset($this->children[$c['comment_id']])) {
                    $this->thread($this->children[$c['comment_id']]);
                }

                echo "</li>";
            }
            echo "</ul>";
        }
    } // End of thread 
```

# jquery - jQuery队列执行误区

> ID：12326476
> 
> 赞同：1
> 
> 时间：2012-09-07T23:02:50.080
> 
> 标签：jquery, queue

我正在尝试在我正在构建的网站中的内容的 div 上制作阅读更多/隐藏文本效果。我已经制作了我希望使用的效果，并且我已经在控制台中一一尝试了它们，它应该可以正常工作，但是当我将它们与队列一起使用时，就会出现问题并且效果会出现故障。

这是演示页面的链接： [演示链接](http://casaazul.zebradm.mx/inicio.php)

因此，为了测试演示，您必须单击“Leer mas...”工具提示下的“-”按钮。

打开效果很好，我想对关闭做完全相同的效果，只是倒置。我在控制台中使用以下命令对其进行了测试...

```
$('#texto p').queue(function() { $(this).animate({ opacity: 0 }, 1000); $(this).dequeue(); });    
$('#texto').queue(function() { $(this).animate({ height: '1px' }, 1000); $(this).dequeue(); });
$('#texto p').queue(function() { $(this).hide(0); $(this).dequeue(); } );
$('#texto').queue(function() { $(this).css('height','auto'); $(this).dequeue(); });
$('#texto').queue(function() { $(this).animate({ width: '-=350px' }, 600); $(this).dequeue(); });
$('.content').queue(function() { $(this).animate({ width: '-=350px' }, 600); $(this).dequeue(); });
$('#leer_mas').queue(function() { $(this).fadeIn(500); $(this).dequeue(); }); 

$(this).removeClass('extendido'); 
```

顺序基本上如下：

1.  我把段落变成透明的。
2.  我将段落的父 div 的高度降低到 1 以隐藏带有溢出的段落。
3.  然后我隐藏段落以便能够使用显示功能。
4.  然后我删除 1px 高度，让父 div 可用于显示功能。
5.  然后我用 350px 减少父母的。
6.  我对主 div 做同样的事情。
7.  我展示了“Leer mas ...”跨度。
8.  我删除了 .extendido 类。

当我在控制台中逐步执行此操作时，它可以完美运行，但我认为我在队列中做错了。你能帮我修一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T06:39:47.300

注意，不确定`$(this)`元素的`$(this).removeClass('extendido');`? `.extendido`附在`.content`下面的元素上的类

尝试

```
function fn1() {
    return $('#texto p').animate({
        opacity: 0
    }, 1000, dq)
};

function fn2() {
    return $('#texto').animate({
        height: '1px'
    }, 1000, dq)
};

function fn3() {
    return $('#texto p').hide(0, dq);
};

function fn4() {
    return $('#texto').css('height', 'auto')
      .promise().done(dq);
};

function fn5() {
    return $('#texto').animate({
        width: '-=350px'
    }, 600, dq)
};

function fn6() {
    return $('.content').animate({
        width: '-=350px'
    }, 600, dq)
};

function fn7() {
    return $('#leer_mas').fadeIn(500, function () {
        $(".content").removeClass("extendido")
    })
};

$.queue($(".content")[0], "steps", [fn1, fn2, fn3, fn4, fn5, fn6, fn7]);

var dq = function () {
    return $.dequeue($(".content")[0], "steps")
};

dq(); 
```

jsfiddle [http://jsfiddle.net/guest271314/8ay5s3zg/](http://jsfiddle.net/guest271314/8ay5s3zg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:25:28.280

我认为问题在于您的操作与不同的元素相关联：`#texto p`、`#texto`、`.content`和`#leer_mas`. 每个都有自己的队列，它们并行运行。所以步骤 1 和 2 是同时发生的，而不是顺序发生的。如果您希望所有步骤按顺序运行，请使用`complete:`to 选项`.animate`，为其提供链中下一步的功能。

代替

```
$('#texto p').queue(function() { $(this).animate({ opacity: 0 }, 1000); $(this).dequeue(); }); 
```

尝试：

```
$(document).queue(function() { $('#texto p').animate({ opacity: 0 }, 1000); $(this).dequeue(); }); 
```

以及所有其他动画的类似更改。

# updates - 基于条件的 SQL UPDATE

> ID：12326477
> 
> 赞同：0
> 
> 时间：2012-09-07T14:55:10.727
> 
> 标签：updates, sql

我们需要使用用户 ID (NBK) 更新表。带有 NBK 的表也有用户状态 (0 - 1)，一次只有一个用户有 1。挑战是#1 捕获活动用户#2 用用户 NBK 更新另一个表。我希望下面的代码只有一个我找不到的简单语法错误？

```
Dim nb As String
Dim NBK As String

nb = [Employees]![NBK] & "' WHERE "
nb = nb & " " & [Employees]![Status] = '1'
NBK = " Update tbl_DateTracking SET NBK = "
NBK = NBK & "'" & nb & "' WHERE "
NBK = NBK & "CaseId = '" & CaseId & "' AND OCC_Scenario = '" & OCC_Scenario & "' ;"

DoCmd.RunSQL nb
DoCmd.RunSQL NBK 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:17:05.053

这里有几个注意事项：

1.  您应该使用参数化查询而不是字符串连接。这可以防止/包含 SQL 注入和其他有关格式错误的输入的问题。
2.  理想情况下，您应该规范化数据库，以便“活动用户”不是用户表上的字段。当数据库中有两个用户设置为“活动”时会发生什么？

但是，使用这个给定的模式，您将需要使用子选择查询。前任：

`UPDATE tbl_DateTracking SET NBK=(SELECT NBK FROM Employees WHERE Status=1 LIMIT 1) WHERE CaseID=? AND OOC_Scenario=?`然后传入`CaseId`和`OOC_Scenario`作为参数。

请注意，我不熟悉 VB 或它如何与 SQL 交互；以上只是一个示例，您必须将其应用于您的应用程序并对其进行更改以使其工作。您构建和运行嵌套查询的方式看起来也行不通，因为您的第一个查询不包含命令（您可能想要`SELECT`，我*认为*。VB 是否使用`[]![]`语法自动执行此操作？），以及何时您将它嵌套在第二个查询中，它没有被`()`. 如果您将第一个查询作为子查询包含在第二个查询中，则单独运行第一个查询也没有任何效果。

# scheme - 将文字评估为表达式（方案）

> ID：12326484
> 
> 赞同：3
> 
> 时间：2012-09-07T23:04:33.000
> 
> 标签：scheme, expression, literals, evaluation

我正在尝试将文字评估为 Scheme 中的表达式（目前使用 Guile）。例子：

```
(define x '(+ 6 6))
(define y (evaluate-literal x))     ; Expected result:  y = 12 
```

（在这里，`evaluate-literal`是我正在寻找的占位符。）是否有一个 lisp 函数/习语可以做到这一点？我需要这样做的原因是因为表达式在定义时可能是无效的，但稍后在评估时会是一个有效的表达式。

* * *

目前我的解决方案是使用`delay`，`force`但它不是很优雅：

```
(define x (delay (+ 6 6)))
(define y (force x)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:06:35.983

最简单的方法是使用`eval`，尽管很难安全使用。请参阅此[帖子](http://blog.racket-lang.org/2011/10/on-eval-in-dynamic-languages-generally.html)以了解原因。

```
(define x '(+ 6 6))
(define y (eval x)) 
```

使用内置`delay/force`程序是一个很好的解决方案：

```
(define x (delay (+ 6 6)))
(define y (force x)) 
```

或者，正如评论中所建议的，您可以使用 a`lambda`来实现您自己的`delay/force`语法：

```
(define-syntax my-delay
  (syntax-rules ()
    ((my-delay object)
     (lambda () object))))

(define (my-force delayed-object)
  (delayed-object))

(define x (my-delay (+ 6 6)))
(define y (my-force x)) 
```

上面是一个玩具实现，一个真实世界的实现会记住结果以避免`lambda`每次调用的需要，但你明白了。

# jquery - jquery ui switching from tab view to one view works fine with single tab widget but not when tab is subtab of another tab widget

> ID：12326490
> 
> 赞同：0
> 
> 时间：2012-09-07T23:05:13.533
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

jQuery ui从选项卡视图切换到一个视图与单个选项卡窗口小部件的工作正常，但当tab widget是另一个选项卡窗口小部件的孩子时。目标是保持父选项卡完整，但有一个按钮（显示子选项卡或显示子视图）来控制子信息的查看。我让它工作但还必须将父选项卡更改为非选项卡。见小提琴：http: [//jsfiddle.net/remy/GhpqB/10/](http://jsfiddle.net/remy/GhpqB/10/)

有谁知道如何保持父选项卡完好无损，但允许子选项卡能够从选项卡式视图切换到一页视图？

谢谢，

弗兰基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:16:48.550

您可以使用：

```
$('#tabs').tabs('destroy') 
```

破坏选项卡功能，然后在显示选项卡功能中重新初始化它们。

[更新小提琴](http://jsfiddle.net/GhpqB/12/)

# sharepoint - SharePoint：FormField 强制呈现为选择菜单？

> ID：12326491
> 
> 赞同：0
> 
> 时间：2012-09-07T23:05:31.140
> 
> 标签：sharepoint, sharepoint-2010

我正在使用 SP2010 中的 SPD 编辑自定义 NewForm.aspx 页面。我想要做的是让 SharePoint 呈现一个包含大约 300 个项目的特定字段作为选择菜单。SP 坚持将字段呈现为预先输入的查找控件，这对我的情况来说是行不通的。我希望它以列表中只有少数项目时的方式呈现字段；一个好的 ol' HTML 选择菜单。

我的谷歌搜索和搜索都没有成功。我可以在 SharePoint:FormField 控件上设置没有明显的“renderAs”参数。

我尝试在 sharepoint.stackexchange.com 上问一个类似的问题，但没有取得多大成功，所以如果再次提问是不好的形式，请提前道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:00:21.783

我将回答我自己的问题，尽管这可能很粗鲁。我发现，如果我创建了一个新的 NewForm.aspx 页面（命名略有不同）并手动添加数据绑定下拉控件，它会保持所需的状态。尝试重新使用默认的 NewForm.aspx 页面是徒劳的。

# python - 使用 Python 从 XML 中提取属性

> ID：12326493
> 
> 赞同：1
> 
> 时间：2012-09-07T23:06:01.270
> 
> 标签：python, xml, xml-parsing

我想使用此代码 xml 文件从 xml 文件中提取属性：

> ```
> xml= "<graphics type='xxx' port=’0’ autoport='xxx' listen='0.0.0.0'>
>   <listen type='address' address='0.0.0.0'/>
> </graphics>" 
> ```

代码是：

> ```
> def xml_to_dict(xml):  
>       d={}   
>       if xmlk.text:
>          d[xmlk.tag] = xmlk.text  
>       else:
>          d[xmlk.tag] = {}   
>      children = xmlk.getchildren()   
>      if children:
>          d[xmlk.tag] = map(xml_to_dict, children)  
>          return d
> 
>      xml_to_dict(xyz) Output: {'graphics': [{'listen': {}}]} 
> ```

我试过 dmlk,attrib 而不是标签，但无济于事。有谁知道这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:33:21.420

我建议使用 lxml，但以下代码适用于 lxml 或 ElementTree

您还需要稍微调整一下算法：

```
from xml.etree import ElementTree as etree
tree = etree.fromstring(xml)

def xml_to_dict(tree):  
  d={}   
  if tree.text:
     d[tree.tag] = tree.text  
  elif len(tree) < 0:
     d[tree.tag] = {}   
  else:   
     d[tree.tag] = map(xml_to_dict, tree)  
 return d 
```

这给了你你所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:24:05.593

目前尚不清楚您要使用什么输出格式。这是尝试接近您的代码的一种可能性：

```
empty = lambda s: not (s and s.strip())

def xml_to_dict(root):
    assert empty(root.tail), 'tail is not supported'
    d = root.attrib
    assert root.tag not in d, 'tag and attribute name conflict'
    if len(root) > 0: # has children
       assert empty(root.text), 'text and chilren conflict'
       d[root.tag] = map(xml_to_dict, root)
    elif not empty(root.text):
       d[root.tag] = root.text
    return d 
```

一般情况下是不可逆的。

### 例子

```
import pprint
import xml.etree.ElementTree as etree

xml = """<graphics type='xxx' port='0' autoport='xxx' listen='0.0.0.0'>
  <listen type='address' address='0.0.0.0'/>
 <value>1</value>
 <blank/>
</graphics>
"""
pprint.pprint(xml_to_dict(etree.fromstring(xml))) 
```

### 输出

```
{'autoport': 'xxx',
 'graphics': [{'address': '0.0.0.0', 'type': 'address'}, {'value': '1'}, {}],
 'listen': '0.0.0.0',
 'port': '0',
 'type': 'xxx'} 
```

注意：`<listen>`标签名称不在`graphics`列表中，`<blank/>`而是在列表`{}`中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:19:00.620

```
from lxml import etree
dict(etree.fromstring(xml).items()) 
```

输出

```
{'autoport': 'xxx', 'type': 'xxx', 'port': '0', 'listen': '0.0.0.0'} 
```

# css - 页脚位于页面上方太远

> ID：12326494
> 
> 赞同：0
> 
> 时间：2012-09-07T23:06:15.647
> 
> 标签：css, positioning, footer

当页脚上方有足够的内容以将其“推”到页面底部时，我的页脚位于我想要的位置（[http://v3.edharrisondesign.com/](http://v3.edharrisondesign.com/)），但没有内容它位于太高（[http: //v3.edharrisondesign.com/about/](http://v3.edharrisondesign.com/about/)）。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:05:48.220

如果您在谷歌上搜索粘性页脚，您会发现这是一些解决方案的常见问题。无论如何，我查看了您的网站，这是您需要做的：

1）在`html's`规则集中，添加：

```
height: 100%; 
```

2)`body`的规则集：

```
-moz-box-sizing: border-box;
box-sizing: border-box;
position: relative;
min-height: 100%;
padding-bottom: 80px; /* same as footer's height */ 
```

3）`footer`：

```
position: absolute;
bottom: 0; /* you already have this */ 
```

该解决方案利用了 box-sizing 属性。如果需要支持较旧的浏览器，则它将不起作用-为此，您需要在 html 中添加一个额外的元素（让我知道这是否是您想要的）。

***很棒的网站，顺便说一句！***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:30:12.410

John 的意思是在您的页眉和页脚之间需要有一个容器，具有最小高度，以便您在两者之间为浏览器提供所需的像素数量，无论如何。对于主页，它是“thumbnail-continer”，但在您的内部页面上，您似乎根本没有任何内容。无论哪种方式（无论是将缩略图容器放置在内部页面中还是创建一个新的 div），在每个页面上创建一个内容井并为其设置您想要的最小高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:26:18.423

# 缩略图容器{min-height:400px}

将在 ie7/8/9 和其他主要浏览器中工作。IE6 会忽略它。

# windows - 如何知道 Windows 中窗口的大小何时发生变化？

> ID：12326497
> 
> 赞同：0
> 
> 时间：2012-09-07T23:06:45.030
> 
> 标签：windows, size, signals

> **可能重复：**
> [Win32 C++ - 检查窗口 PositionX/PositionY 和 Width/Height 是否改变](https://stackoverflow.com/questions/11713728/win32-c-check-if-the-window-positionx-positiony-and-width-height-changed)

Windows 中是否有任何信号可以知道窗口大小何时发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:11:42.483

有一条消息叫[`WM_SIZE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646)：

> 大小改变后发送到窗口。窗口通过其 WindowProc 函数接收此消息。

# php - MongoDB适合做身份验证和敏感操作吗？

> ID：12326501
> 
> 赞同：1
> 
> 时间：2012-09-07T23:07:28.367
> 
> 标签：php, security, mongodb, authentication

我想创建一个基于 Web 的带有身份验证的聊天系统。
它可能包含敏感数据，如电子邮件、密码等...

我数据库上的记录可能会变得越来越快。
MongoDB 是否适合这个计划，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T02:16:53.107

请记住，默认的 MongoDB 配置是“无身份验证”，因此任何人都可以连接到数据库。因此，要么您应该限制网络访问，要么更好的是，启用身份验证。此外，不支持对线路上的流量进行加密，因此如果您想在线路上加密，则需要使用 ipsec/SSH 隧道等。

特定于 MongoDB 的重要注意事项： [http ://www.mongodb.org/display/DOCS/Do+I+Have+to+Worry+About+SQL+Injection](http://www.mongodb.org/display/DOCS/Do+I+Have+to+Worry+About+SQL+Injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T23:11:54.790

如果您对任何需要身份验证和其他敏感操作的应用程序采取应采取的标准安全预防措施，那么您会没事的。MongoDB 不存在任何已知的重大安全漏洞。

# javascript - 如何在 node.js 中弹出 CD 驱动器？

> ID：12326502
> 
> 赞同：5
> 
> 时间：2012-09-07T23:07:29.117
> 
> 标签：javascript, node.js

我想用 node.js 创建一个小应用程序，看起来像这样：

```
console.log("Creating extra beer holder...");
EjectCD(); 
```

这样的功能是否已经存在，或者是否有必要创建某种 C++ 绑定来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T23:31:27.757

您可以利用 node.js 在环境控制台中运行这一事实来做到这一点。也就是说，它只会打开您服务器上的驱动器，并且取决于您服务器的操作系统。以下应该（我没有要测试的 cd 驱动器）在您的 cd 驱动器安装为“cdrom”的 linux 环境中工作：

```
console.log("Creating extra beer holder...");
exec("eject cdrom -r"); 
```

此页面提供有关 linux 弹出命令的更多信息：http: [//linux.about.com/od/commands/l/blcmdl1_eject.htm](http://linux.about.com/od/commands/l/blcmdl1_eject.htm)

没有用于弹出的本机 Windows 命令行命令，但是您可以在服务器上放置许多简单的可执行文件来完成此操作，例如[http://www.nirsoft.net/utils/nircmd.zip](http://www.nirsoft.net/utils/nircmd.zip)，这需要命令：

```
"C:\nircmd.exe cdrom open d:" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-02T07:09:33.770

现在有一个 NPM 模块可以用来弹出 cd 驱动器。[这是模块。](https://github.com/brendanashworth/diskdrive)

```
var diskdrive = require('diskdrive');
diskdrive.eject(); 
```

目前它不支持 Windows，但是 Linux 和 Mac 都支持。该库通过调用弹出 cd 驱动器所需的相应命令行工具来工作，同时添加对不同操作系统的支持并消除回调地狱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T23:30:07.733

在linux中，您可以使用nodejs来调用`eject`命令行...

```
var exec = require('child_process').exec;
exec("eject [options]", function (error, stdout, stderr) { ... }) 
```

在 Windows 中，您需要利用媒体控制界面。不幸的是，NodeJS 似乎还不存在任何东西，因此您可能需要使用另一种语言的包来移植某些东西或菊花链。在 Lua 中，有一个模块可以做到这一点......

[使用 Windows API 调用打开 CD/DVD 门？](https://stackoverflow.com/questions/1829342/open-cd-dvd-door-with-a-windows-api-call)

# sharepoint - 在开发笔记本电脑上开发

> ID：12326503
> 
> 赞同：1
> 
> 时间：2012-09-07T23:07:30.690
> 
> 标签：sharepoint

我正在为 SharePoint 场开发 Web 应用程序。在我的笔记本电脑上，我尝试将我的 SharePoint 站点（我正在运行 Windows 7）设置为尽可能靠近场上的 SharePoint 站点 (Server 2008)。我让管理员为我创建了一个站点模板，但是当我尝试安装它时，我收到错误消息，指出我的笔记本电脑上没有农场上的某些功能（一个是 SSRS）。管理员有没有办法从场中导出站点，这样我就可以导入而不会出现所有未安装的功能错误，也不需要我安装服务器场具有的所有功能？

# python - Django 重定向到自定义 URL

> ID：12326504
> 
> 赞同：6
> 
> 时间：2012-09-07T23:07:36.120
> 
> 标签：python, ios, django, oauth-2.0, custom-url

从我的 Django 应用程序中，如何将用户重定向到 somescheme://someurl.com？

为了给您一些上下文以防万一，我有一个用 Python/Django 编写的工作 oauth2 服务器，我需要允许用户注册具有自定义 URL 方案的 redirect_uris。此自定义 URL 方案用于[处理本机应用程序中的重定向](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW20)。

我的第一反应是使用 HttpResponseRedirect，但是这个 URL 有一个自定义方案并且不是 HTTP，所以我猜这不是我想要的。提前感谢您提供的任何建议。

编辑：我确实尝试过，Django 正确返回响应重定向而不会引发错误，但浏览器不会重定向到这个 URL。我正在使用 Chrome 进行测试。

编辑 2： HttpResponseRedirect 在 safari 中工作正常。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T15:46:07.727

这实际上**不应该**工作，因为 Django 只允许重定向到`http`，`https`并且`ftp`默认情况下出于安全原因：

[https://www.djangoproject.com/weblog/2012/jul/30/security-releases-issued/](https://www.djangoproject.com/weblog/2012/jul/30/security-releases-issued/)

我在使用 OAuth 并重定向到自定义方案时遇到了同样的问题。Django（在 Apache 上）在重定向到自定义方案时
会抛出 500（ ）。`django.core.exceptions.SuspiciousOperation`解决方案是创建自己的`HttpResponseRedirect`子类或只是这样做：

```
location = < your redirect URL >
res = HttpResponse(location, status=302)
res['Location'] = location
return res 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T23:13:51.303

> 类 HttpResponseRedirect
> 
> 构造函数的第一个参数是必需的——重定向到的路径。这可以> 是一个完全限定的URL（例如'http://www.yahoo.com/search/'）或一个没有> 域的绝对路径（例如'/search/'）。有关其他可选构造函数参数，请参阅 HttpResponse。请注意 > 这将返回 HTTP 状态代码 302。

这是从这里： [https ://docs.djangoproject.com/en/dev/ref/request-response/](https://docs.djangoproject.com/en/dev/ref/request-response/)

从我正在阅读的内容来看，它应该可以工作。

# java - Java - 无法让 JFrame 刷新图像

> ID：12326506
> 
> 赞同：0
> 
> 时间：2012-09-07T23:07:43.313
> 
> 标签：java, image, swing, refresh, embedded-resource

我为学习目的编写了一个小型文本冒险（控制台）。现在我想用一些图像来增加它的趣味性，但我无法让图像刷新。我究竟做错了什么？有人可以帮我吗？

主类是GameMaster.java，我用来展示图片的类是DrawRoom.java

相关代码：

* * *

## 游戏大师.java

```
class GameMaster
{   

public static void main(String args[])
{

    // Doing some stuff here, like building rooms, etc...

    // Here I start using images
    DrawRoom drawRoom = new DrawRoom();
    Thread myThread = new Thread(drawRoom); 
    myThread.start(); // The first image appears as expected.

    // Then in a while loop, I get user input from the console and process it.
    // According to which room the user is in, I want to draw the corresponding
    //image.

    drawRoom.changeImage("Images/SOME-OTHER-IMAGE.JPG");
    // This however, does not change the shown image!   
}
} 
```

* * *

## 画室.java

```
public class DrawRoom extends JPanel implements Runnable{

Image image;
JFrame frame;

    public DrawRoom(){

        this.image = Toolkit.getDefaultToolkit().getImage("Images/GAME-START.JPG"); 
        this.frame = new JFrame("The Current Image");
        this.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.frame.setSize(640,510);
    }

    public void paintComponent(Graphics g){

        g.drawImage(image,0,0,640,480, this);
    }

    public static void main(String arg[]){
        // Left empty.
    }

    public void run(){

        DrawRoom panel = new DrawRoom();
        this.frame.setContentPane(panel);
        this.frame.setVisible(true);
    }

    public void changeImage(String whichImage){

        this.image = Toolkit.getDefaultToolkit().getImage(whichImage);
        this.frame.revalidate();
        this.frame.repaint();
    }
} 
```

* * *

我是新手，尤其是图形和线程新手。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T23:23:34.913

您需要调用自身的`repaint()`方法`DrawRoom`：

```
public void changeImage(String whichImage){

    this.image = Toolkit.getDefaultToolkit().getImage(whichImage);
    this.repaint(); // not this.frame.repaint()!

} 
```

顺便说一句，在方法中使用一个好的 ol'`System.out.println(whichImage)`来`changeImage`检查它是否被您的代码正确调用。

编辑：您构建了一个新的`DrawRoom`内部`run()`方法，然后将其添加到框架中`contentPane`- 不要那样做！只需将面板添加到面板的构造函数中即可：

```
public DrawRoom(){

    this.image = Toolkit.getDefaultToolkit().getImage("Images/GAME-START.JPG"); 
    this.frame = new JFrame("The Current Image");
    this.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.frame.setSize(640,510);

    this.frame.setContentPane(this);
    this.frame.setVisible(true);

}

...

public void run(){

    // do not need to create any DrawRoom instances!

}

public void changeImage(String whichImage){

    this.image = Toolkit.getDefaultToolkit().getImage(whichImage);
    this.repaint();

} 
```

希望现在都是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:51:11.110

我建议您从如下所示的源代码开始。

这样做是让主线程为图像创建显示的框架和面板，然后循环更改图像。在这个例子中，我只有两个来回交换的图像。

还要确保您的图像在测试时位于正确的文件夹中，并且您的图像文件路径是正确的。如果您只看到一个空白框架，那么文件不在正确的位置对我来说是个问题。

我没有使用多个线程，但是这里是[Constructing Threads 和 Runnables](http://www.javamex.com/tutorials/threads/thread_runnable_construction.shtml)的资源。

主类如下所示：

```
import javax.swing.*;

public class SimpleThreeTierMain {
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        // Doing some stuff here, like building rooms, etc...

        // Here I start using images
        DrawRoom drawRoom = new DrawRoom();
        JFrame  frame;

        frame = new JFrame("The Current Image");
        frame.setContentPane(drawRoom);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(640,510);
        frame.setVisible(true);

        // Then in a while loop, I get user input from the console and process it.
        // According to which room the user is in, I want to draw the corresponding
        //image.

         long  lTime = 2050;
        int   iChange = 0;
        try {
            while (true) {
                Thread.sleep (lTime);
                if (iChange == 1)
                    drawRoom.changeImage("0112091252a.jpg");
                else
                    drawRoom.changeImage("0112091251.jpg");
                iChange = 1 - iChange;
            }
        } catch (InterruptedException iex) {}
    }
} 
```

客厅类如下所示：

```
import javax.swing.*;
import java.awt.*;

public class DrawRoom extends JPanel {

    Image image;

        public DrawRoom() {
            this.image = Toolkit.getDefaultToolkit().getImage("0112091251.jpg"); 
        }

        public void paintComponent(Graphics g){
            g.drawImage(image,0,0,640,480, this);
        }

        public void changeImage(String whichImage){
            this.image = Toolkit.getDefaultToolkit().getImage(whichImage);
            this.repaint();
        }
    } 
```

# visual-studio-2012 - 将引用“Microsoft.TeamFoundation.Client.dll”添加到 Windows Metro 风格应用程序时出错

> ID：12326508
> 
> 赞同：0
> 
> 时间：2012-09-07T23:08:07.727
> 
> 标签：visual-studio-2012

我添加了`Microsoft.TeamFoundation.Client`对`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0`我的`Windows Metro`样式应用程序的引用。Set `Copy Local = true`，但是当我尝试构建此项目时，出现错误：

**错误 1** `Invalid Resx file. This .resources file should not be read with this reader. The resource reader type is "Microsoft.TeamFoundation.Client.GzipResourceReader, Microsoft.TeamFoundation.Client, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a". C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.Client.dll TFS Project Management`

我无法`copy local = false`在`Windows Metro`Style 应用程序中设置，因为这`DLL`没有复制到应用程序包（我会出现运行时错误`Could not load file or assembly 'Microsoft.TeamFoundation.Client, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.`：）

`Microsoft.TeamFoundation.Common.dll`工作正常，问题仅在于`Microsoft.TeamFoundation.Client`.

我添加时的情况`Microsoft.TeamFoundation.Client.dll`相同`C:\Windows\assembly\GAC_MSIL\Microsoft.TeamFoundation.Client\11.0.0.0__b03f5f7f11d50a3a`

我该如何解决这个问题？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:06:55.157

您不能将 TFS SDK 用于 Metro 应用程序，因为 TFS SDK 所需的 .Net Framework 依赖项在 Metro 应用程序中不可用。

# c# - 如何在事件处理程序内调用 WebBrowser 上的方法？

> ID：12326509
> 
> 赞同：3
> 
> 时间：2012-09-07T23:08:08.337
> 
> 标签：c#, .net, events, webbrowser-control

这就是我所拥有的：

```
public void initiate(WebBrowser browser)
{         
   browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(refDocumentCompleted);
   // navigate browser to the referal Uri
   browser.Navigate(refreral);

   browser.DocumentCompleted -= refDocumentCompleted;
   //remove here so that it doesn't do this everytime a document is completed, i want it just in this method
}

private void refDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // want to call navigate method on browser here. but Its out of scope.
} 
```

我想做的是，导航到`referral`，然后一旦加载导航到另一个页面，该页面存储为类中的全局字符串。

我确定我的麻烦是因为对事件如何工作的理解不足，我试图阅读它，但似乎无法理解它，但我认为我不需要创建自己的处理程序.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:18:55.760

您已经拥有了 webbrowser 对象。你只需要投射它：

```
((WebBrowser)sender).Navigate(...); 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T23:20:29.037

使用 lambda，例如：

```
public void initiate(WebBrowser browser)
{

    browser.DocumentCompleted += (sender, e) => {
        browser.DoStuff(); // it's in scope via closure
    };

    // etc
} 
```

编辑：要添加/删除它，请将 lambda 分配给一个变量：

```
public void initiate(WebBrowser browser)
{

    var doStuff = (sender, e) => {
        browser.DoStuff(); // it's in scope via closure
    };

    browser.DocumentCompleted += doStuff;

    // etc

    browser.DocumentCompleted -= doStuff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:10:23.703

在您的`initiate`方法中将其存储`WebBrowser`在一个实例字段中，然后从您的事件处理程序中引用它：

```
private WebBrowser _browser;

// inside initiate 
_browser = browser;

// Inside event handler
_browser.Navigate(...); 
```

# jquery - jQuery 选择切换

> ID：12326512
> 
> 赞同：0
> 
> 时间：2012-09-07T23:08:41.957
> 
> 标签：jquery, html

我有一个投资组合页面，您可以在其中选择一个项目，它将显示更多详细信息。

我有一个小提琴：http: [//jsfiddle.net/TxKqx/](http://jsfiddle.net/TxKqx/)

我想要做的是，如果用户已经选择了一个项目来查看，如果他们选择另一个项目来取消选择并淡出细节。

我有以下代码可以打开并选择项目：

```
$('.widget-item-expand').click(function() {
        $(this).parent().toggleClass("selected");
        var currentId = $(this).parent().attr('id');
        var currentIdfull = "#"+currentId+"-full";
        $('#port-full-item').css("height","320px");
        $('#port-full-item').slideDown('slow');
        $(currentIdfull).css("height","320px");
        $(currentIdfull).fadeToggle('slow');
});
​ 
```

我已经尝试过这种方法来解决它，但它不起作用：（不是这个确切的代码）

```
if ($('#elm').is('.selected')) {
//#elm has the class
} else {
//#elm doesn't have the class
} 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:47:04.637

我希望我已经很好地理解了你想要什么。

见[http://jsfiddle.net/TxKqx/2/](http://jsfiddle.net/TxKqx/2/)

```
$('.widget-item-expand').click(function() {
    $(this).parent().siblings('.selected').removeClass('selected');
    $(this).parent().toggleClass("selected");
    $('#port-full-item')
        .addClass('selected')
        .css("height","320px")
        .slideDown('slow');
    var currentId = $(this).parent().attr('id'),
        $prevFull=$(".widget-full.selected");
    if(currentId+'-full'!==$prevFull.attr('id')){
        $prevFull
            .hide()
            .removeClass('selected');
    }
    $("#"+currentId+"-full")
        .addClass('selected')
        .css("height","320px")
        .fadeToggle('slow');
}); 
```

# java - 如何从 Android 上的 Camera 拾取的图像中获得正确的宽度和高度？

> ID：12326517
> 
> 赞同：1
> 
> 时间：2012-09-07T23:09:26.043
> 
> 标签：java, android

我需要执行以下操作：

1.  使用 Android 的相机获取照片...
2.  从图像中删除背景并放入另一个背景
3.  保存

我做这 3 个步骤很好......问题是图像以小尺寸（160 x 120）保存。当我从相机获得结果时，我会这样做：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST) {  
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            Log.i("Test", "Width: " + photo.getWidth() + " Height: " + photo.getHeight()); 
```

它返回

```
Width: 160 Height: 120 
```

我从“数据”变量中获得的图像是 1280 x 960 ...

如果我使用

```
background= Bitmap.createScaledBitmap(background, 1280, 960, false); 
```

我得到的图像质量很差......

我怎样才能得到正确大小的位图？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:30:33.753

尝试将图像写入文件，然后返回文件名作为结果：

```
@Override
public void onPictureTaken(byte[] data, Camera camera) {
  File pictureFile = new File(filename);

  try {
    FileOutputStream fos = new FileOutputStream(pictureFile);
    fos.write(data);
    fos.close();
  } catch (Exception e) {
  }

  Intent intent = this.getIntent();
  intent.putExtra("filename", filename);
  this.setResult(RESULT_OK, intent);
  finish();
} 
```

# c++ - 通过引用传递与通过指针传递时的对象范围

> ID：12326518
> 
> 赞同：1
> 
> 时间：2012-09-07T23:09:39.053
> 
> 标签：c++, memory-management, destructor

考虑下面的简单代码。

```
 struct test
    {
      test(int n):numelements(n){ arr = new int[numelements] }

      int numelements;
      int* arr;

      ~test()
       {
          delete[]  arr;
       }
    }

   void foo_ref(test& x,n)
   {
       // set first n elements of the array x.arr to random numbers
   }

  void foo_ptr(test* x,n)
   {
       // set first n elements of the array x->arr to random numbers
   }

    int main(void)
    {
     test mystruct(1000000);
     foo_ref(mystruct,20);
     // foo_ptr(&mystruct,20); 

     return 0;
   } 
```

在上面的代码中，`foo_ref`对它`foo_ptr`引用的对象执行完全相同的操作，即。`mystruct`. 但是 foo_ref 通过引用传递对象，而 foo_ptr 通过指针传递。

在这两种情况下**，**调用对象的析构函数在哪里？我知道这个问题的标准答案总是“当对象的范围结束时”

但是考虑通过引用传递的情况。在 mystruct 的主体内`foo_ref` 具有该函数的范围。那么对象的析构函数不会在函数结束时被调用`foo_ref`吗？

也许我的困惑与对事物范围的理解有关。请让我知道我的推理哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T23:17:53.010

我在这里看不到任何`const`引用，因此答案是“引用和指针之间的对象生命周期没有区别”。

`const`绑定到临时表达式的引用具有延长临时对象生命周期的特殊规则，但这不适用于您的代码。

您的困惑可能源于[一个非常流行的常见问题解答中的声明](http://www.parashift.com/c++-faq/overview-refs.html)，它类似于“引用是被引用的对象”。如您所见，这不是真的。引用与它所引用的对象是分开的，每个都有自己的生命周期（而且很少看到这样做正确，但是引用的生命周期延长比对象的生命周期更长也是合法的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T23:18:30.093

`foo_ref`将有一个参数，并且该参数将具有函数的范围。无论是指针还是引用都不会对mystruct的删除产生任何影响。

如果您按值传递结构，则副本将在函数结束时被销毁。如果您做一些愚蠢的事情，例如在副本中引用相同的 arr，那么您可能会在原始结构仍在使用它时意外删除 arr。在这种情况下，您可能希望使用共享指针来跟踪 arr 使用的内存，而不是手动删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T23:25:36.753

在示例代码中，析构函数 for`mystruct`在`main`.

**指针**当指针超出范围时，所指向的对象不会发生任何事情。如果指针不存在，对象的生命周期将保持不变。当然，还有一个重要的细节：由`new`/创建的对象在`new[]`它们被`delete`d/ `delete[]`d 之前一直存在，而由 / 分配的`malloc`内存在它被`free`d 之前一直存在。

**引用**引用只不过是现有对象的附加名称。除了`const`指向临时对象的引用之外，引用的生命周期对被引用对象的生命周期没有影响；当该对象正常超出范围时调用析构函数（对临时对象的`const`引用使临时对象保持活动状态，直到`const`引用超出范围）。

[使用术语“对象”是一种简化](https://stackoverflow.com/a/4715888/103167)，指针或引用确实指向内存；它不会以任何方式“跟踪”实际对象。例如，可以在指针超出范围之前销毁被指向的对象，或者在引用超出范围之前销毁被引用的对象。这些无效的指针/引用分别称为“悬空指针”和“悬空引用”：

```
int* i = new int(5);
int& j = *i;
delete i;

// i is now a dangling pointer, and j is now a dangling reference 
```

# angularjs - AngularJS - 设置模型属性不更新输入文本（数字验证）

> ID：12326522
> 
> 赞同：0
> 
> 时间：2012-09-07T23:10:37.260
> 
> 标签：angularjs

看看这个小提琴：http: [//jsfiddle.net/bwjbz/6/](http://jsfiddle.net/bwjbz/6/)

我正在尝试严格执行正整数。我已经尝试了几种途径，但我似乎无法得到我正在寻找的东西。（如果您尝试几次，您最终可能会得到一个非数字或负数来粘贴输入）。

除了上面的小提琴，我还尝试过使用数字过滤器并尝试创建自己的指令。

号码过滤器：

```
<input type="number" min="0" max="1000" value="{{itm.qty | number:0}}" required data-ng-model="itm.qty" data-ng-change="setQty()" data-whole-number> 
```

您会注意到数据整数指令。我对指令还不是很满意，但就是这样：

```
app.directive('wholeNumber', function() {
  return function(scope, elem, attrs) {
    elem.on("blur", function() {
      var num;
      num = parseInt(elem.val(), 10);
      num = Math.abs(num);
      scope.$apply(elem.val(num));
    });
  };
}); 
```

指令本身会进行正确的 DOM 操作，但模型不会使用新值进行更新。

所以这个问题有两个方面：

1.  小提琴可以在模型上设置正确的值，但模型文本不会更新。但是，在另一种方法中，我将模型 itm 的数量设置为 1，它会同时更改模型和可见值。您会注意到它实际上确实正确地更改了模型（例如，当值设置为 1.56 时，请注意绑定，足球数 = 1）。

2.  为什么指令不传播对模型的更改？

提前非常感谢，-布赖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:59:26.250

**更新**：使用指令工作小提琴：http: [//jsfiddle.net/mrajcok/U7Je2/](http://jsfiddle.net/mrajcok/U7Je2/)

要点：

```
<input type="number" min="0" max="{{maxValue}}" data-ng-model="itm.qty" whole-number>

link: function(scope, elem, attrs) {
        elem.on("blur", function() {
            var num = Math.abs(parseInt(elem.val(), 10));
            num = num > scope.maxValue ? 0 : num;
            scope.itm.qty = num
            scope.$apply();

            // or, the above two lines can be rewritten as
            scope.$apply(scope.itm.qty = num);

        // or, the blur function can be rewritten as
        elem.on("blur", function() {
            scope.$apply(function() {
                var num = Math.abs(parseInt(elem.val(), 10));
                num = num > scope.maxValue ? 0 : num;
                scope.itm.qty = num;
            });
        }); 
```

原“答案”：

关于你的第一个小提琴，最近在 SO 上出现了类似的问题，请参阅[AngularJS - reset of $scope.value doesn't change value in template (random behavior)](https://stackoverflow.com/q/12176925/215945)

如果我们将该帖子中的 $timeout 解决方案应用于您的问题，请将 setQty() 逻辑包装在 $timeout 函数中，它会起作用。看到[这个小提琴](http://jsfiddle.net/mrajcok/uMwgF/)。我说“有点”是因为可以输入像“2-2-3-4”这样的“数字”，“abc”也可以。当你改变焦点时，那些虚假的价值就会变得清晰。Angular 似乎没有为这些虚假条目调用 setQty() ......我不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:31:10.063

标记，

您的解决方案的问题是指令需要知道绑定变量的名称。一个更有用的解决方案是匿名更新它（并调用任何关联的事件），以便可以在绑定到任何控制器的任何部分 html 上使用该指令：

```
// update the bound scope variable and if exists call the change function
var evalStr = attrs.ngModel + '=' + num.toString();
if (typeof attrs.ngChange != 'undefined')
{
  evalStr += ';'+attrs.ngChange;
}
scope.$apply(evalStr); 
```

请注意，评估 'evalStr' 作为 scope.$apply 参数的优势意味着 AngularJS 向控制台报告任何异常并且应用程序可以继续。

# regex - 使用 grep 测试文件是否是有效的 FASTA（即匹配单个正则表达式的完整文件）

> ID：12326528
> 
> 赞同：1
> 
> 时间：2012-09-07T23:11:28.367
> 
> 标签：regex, linux, grep, fasta

什么是测试给定文件是否为有效 FASTA 的简单方法：

valid_example.fasta

```
>genename1 atgcgtcactgNNNNNactgat
>genename 2 ACACTTACAGGGCTAC

>genename3 ATCCaACTACGGCTGGACTTGCGGCAT 
```

我尝试了以下方法，但如果至少有 1 个有效基因，而不是所有基因，它会给出匹配

```
grep -Pli "(>.+\n[atgcn]\n+)*" valid_example.fasta 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:09:18.910

使用`-v`标志来反转匹配。然后检查是否有任何行匹配。

你可能想做

```
grep -qv [other options] [pattern] $file || echo $file matches 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T11:41:41.963

正则表达式到核苷酸 fasta 格式：

```
>.+\n[acgtnACGTN\n]+ 
```

# algorithm - Matlab中的convhull()函数使用什么算法？

> ID：12326532
> 
> 赞同：0
> 
> 时间：2012-09-07T23:11:45.650
> 
> 标签：algorithm, matlab, computational-geometry, convex-hull

[`convhull`](http://www.mathworks.com/help/matlab/ref/convhull.html)MATLAB 中的和[`convhulln`](http://www.mathworks.com/help/matlab/ref/convhulln.html)函数实现了哪些算法来计算[凸包](https://en.wikipedia.org/wiki/Convex_hull)？

我找不到任何参考..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:41:58.610

*（让我的评论成为答案）*

根据 MathWorks [convhulln](http://www.mathworks.com/help/techdoc/ref/convhulln.html)文档

> *“convhulln 基于 Qhull。有关 Qhull 的信息，请参阅[http://www.qhull.org/](http://www.qhull.org/) ”*

另请参阅`qhull.m`以获取更多信息。

Barber、CB、DP Dobkin 和 HT Huhdanpaa，“[凸壳的 Quickhull 算法](http://dx.doi.org/10.1145/235815.235821)”，ACM Trans。关于数学软件，22（4），1996。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T19:48:50.470

过去，两者都`convhull`在内部`convhulln`使用[Qhull 库](http://www.qhull.org/)。

然后从 R2009b 开始，`convhull`切换到使用[CGAL 库](http://www.cgal.org/)作为实现，（但不是`convhulln`）。

* * *

如果您仔细阅读发行说明，您可以确认以下事实：

*   在[R2009a 发行说明中](http://www.mathworks.com/help/matlab/release-notes-older.html#bryg9vd-2)：

> ### 升级到计算几何
> 
> MATLAB 包括一个新的面向对象的计算几何工具套件，以及一个名为 CGAL 的新底层库。新库提供了改进的稳健性、性能和内存效率。新工具分为三类：
> 
> *   新类`TriRep`为 2-D 和 3-D 空间中的三角剖分提供拓扑和几何查询。
> *   新类`DelaunayTri`为 Delaunay 三角剖分提供了更多功能，包括拓扑和几何查询、增量修改和边缘约束。
> *   新类`TriScatteredInterp`提供快速稳健的分散数据插值和新的自然邻域插值技术。

*   然后在[R2009b 发行说明中](http://www.mathworks.com/help/matlab/release-notes-older.html#br7v2hm)：

> ### 计算几何函数正在改变
> 
> 2 维和 3 维计算几何函数 ( `delaunay`, `convhull`, `griddata`, `voronoi`, `delaunay3`, `griddata3`) 不再使用 QHULL 或 QHULL 选项参数。ND 函数`gridatan`, `delaunayn`, `convhulln`,`voronoin`仍然使用 QHULL。
> 
> ...

*   最后在[R2013a 发行说明](http://www.mathworks.com/help/matlab/release-notes.html#btpx7z7)中，这些类被弃用，取而代之的是当前首选的方法：

> ### `scatteredInterpolant`替换的类`TriScatteredInterp`
> 
> `TriScatteredInterp`将在未来的版本中删除。请改用新 `scatteredInterpolant`类。该类`scatteredInterpolant`对 2-D 和 3-D 散射数据执行插值，支持在样本点的凸包外进行外插。 `scatteredInterpolant`还支持网格矢量格式的查询以节省内存。
> 
> ...
> 
> ### `triangulation`类替换`TriRep`
> 
> `TriRep`将在未来的版本中删除。请改用新`triangulation`类。该类`triangulation`使用与`TriRep`.
> 
> ...
> 
> ### `delaunayTriangulation`类替换`DelaunayTri`
> 
> `DelaunayTri`将在未来的版本中删除。请改用新 `delaunayTriangulation`类。`delaunayTriangulation` 使用与 类似的形式和语法表示 2-D 和 3-D Delaunay 三角剖分`DelaunayTri`。
> 
> ...

* * *

TL;博士：

*   [`convhull`](http://www.mathworks.com/help/matlab/ref/convhull.html)基于[CGAL](http://www.cgal.org/)。
*   [`convhulln`](http://www.mathworks.com/help/matlab/ref/convhulln.html)基于[Qhull](http://www.qhull.org/)。

# c# - 根据 URL 内容类型执行任务

> ID：12326536
> 
> 赞同：0
> 
> 时间：2012-09-07T23:12:38.100
> 
> 标签：c#, c#-4.0

我正在编写一个基于 URL 内容执行某些操作的程序。确定内容类型的最佳方法是什么？

//伪代码

```
WebClient c = new WebClient();
var data = c.DownloadData("http://mysite.com/download/2938923");
//var dataType = get data type

switch(dataType)
{
    case "pdf":
       //Run PDF
       break;
    case "doc":
       //Run Word
       break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:16:59.350

使用 MIME 类型（作为`ContentType`请求头返回）。这种方式符合标准。

```
string contentType = (c.ResponseHeaders[HttpResponseHeader.ContentType] ?? "").ToLower();
switch(contentType)
{
    case "application/pdf":
        // Run PDF
        break;
    case "text/plain":
        // Text file
        break;

    // etc ...
} 
```

*   [WebClient.ResponseHeaders](http://msdn.microsoft.com/en-us/library/system.net.webclient.responseheaders.aspx)属性

# c++ - 字母计数器给出错误的结果

> ID：12326539
> 
> 赞同：-5
> 
> 时间：2012-09-07T23:13:10.477
> 
> 标签：c++, conditional

我正在用 C++ 编写一个程序来计算文本文档中的字母数。我需要知道我做错了什么，我得到了疯狂的结果数字。上次我得到了一些很好的帮助，我把我的“频率[？]”放在了计数之后。计数本身有问题，但是什么？

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

const int ALPHA_SIZE = 26;

void open_file ( ifstream & );

void process ( ifstream &, int [], string lineBuffer);

void draw ( int [] );

void printchar ( int[] );

string lineBuffer;

int main()
{
    string lineBuffer;
    ifstream infile;
    open_file ( infile );

    int frequency [ALPHA_SIZE];

    process ( infile, frequency, lineBuffer);
        draw ( frequency );

    system("Pause");
    return 0;
}

void open_file ( ifstream & inf )
{
    char infilename[50]; //actual file name
    cout << "File name for input? ";
    cin >> infilename;
    inf.open(infilename);
}

void process (ifstream &infile, int frequency[], string lineBuffer)
{

    int A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z;
    A = 0;
    B = 0;
    C = 0;
    D = 0;
    E = 0;
    F = 0;
    G = 0;
    H = 0;
    I = 0;
    J = 0;
    K = 0;
    L = 0;
    M = 0;
    N = 0;
    O = 0;
    P = 0;
    Q = 0;
    R = 0;
    S = 0;
    T = 0;
    U = 0;
    V = 0;
    W = 0;
    X = 0;
    Y = 0;
    Z = 0;
    if (infile.is_open())
    {

        while(getline(infile, lineBuffer))

        {

        if ( 'a' ||  'A')
            { A++;
            }
        if ( 'b' ||  'B')
            {  B++;
            }
        if ( 'c' ||  'C')
            {  C++;
            }
        if ( 'd' ||  'D')
            {  D++;
            }
        if ( 'e' ||  'E')
            {  B++;
            }
        if ( 'f' ||  'F')
            {  F++;
            }
        if ( 'g' ||  'G')
            {  G++;
            }
        if ( 'h' ||  'H')
            {  H++;
            }
        if ( 'i' ||  'I')
            {  I++;
            }
        if ( 'j' ||  'J')
            {  J++;
            }
        if ( 'k' ||  'K')
            {  K++;
            }
        if ( 'l' ||  'L')
            {  L++;
            }
        if ( 'm' ||  'M')
            {  M++;
            }
        if ( 'n' ||  'N')
            {  N++;
            }
        if ( 'o' ||  'O')
            {  O++;
            }
        if ( 'p' ||  'P')
            {  P++;
            }
        if ( 'q' ||  'Q')
            {  Q++;
            }
        if ( 'r' ||  'R')
            {  R++;
            }
        if ( 's' ||  'S')
            {  S++;
            }
        if ( 't' ||  'T')
            {  T++;
            }
        if ( 'u' ||  'U')
            {  U++;
            }
        if ( 'v' ||  'V')
            {  V++;
            }
        if ( 'w' ||  'W')
            {  W++;
            }
        if ( 'x' ||  'X')
            {  X++;
            }
        if ( 'y' ||  'Y')
            {  Y++;
            }
        if ( 'z' ||  'Z')
            {  Z++;
            }
          }
        infile.close();
        frequency [0] = A;
        frequency [1] = B;
        frequency [2] = C;
        frequency [3] = D;
        frequency [4] = E;
        frequency [5] = F;
        frequency [6] = G;
        frequency [7] = H;
        frequency [8] = I;
        frequency [9] = J;
        frequency [10] = K;
        frequency [11] = L;
        frequency [12] = M;
        frequency [13] = N;
        frequency [14] = O;
        frequency [15] = P;
        frequency [16] = Q;
        frequency [17] = R;
        frequency [18] = S;
        frequency [19] = T;
        frequency [20] = U;
        frequency [21] = V;
        frequency [22] = W;
        frequency [23] = X;
        frequency [24] = Y;
        frequency [25] = Z;

    }
}

void draw(int frequency[])
{
    cout << "A:" << frequency[0] << endl;
    cout << "B:" << frequency[1] << endl;
    cout << "C:" << frequency[2] << endl;
    cout << "D:" << frequency[3]<< endl;
    cout << "E:" << frequency[4] << endl;
    cout << "F:" << frequency[5] << endl;
    cout << "G:" << frequency[6] << endl;
    cout << "H:" << frequency[7] << endl;
    cout << "I:" << frequency[8] << endl;
    cout << "J:" << frequency[9] << endl;
    cout << "K:" << frequency[10] << endl;
    cout << "L:" << frequency[11] << endl;
    cout << "M:" << frequency[12] << endl;
    cout << "N:" << frequency[13] << endl;
    cout << "O:" << frequency[14] << endl;
    cout << "P:" << frequency[15] << endl;
    cout << "Q:" << frequency[16] << endl;
    cout << "R:" << frequency[17] << endl;
    cout << "S:" << frequency[18] << endl;
    cout << "T:" << frequency[19] << endl;
    cout << "U:" << frequency[20] << endl;
    cout << "V:" << frequency[21] << endl;
    cout << "W:" << frequency[22] << endl;
    cout << "X:" << frequency[23] << endl;
    cout << "Y:" << frequency[24] << endl;
    cout << "Z:" << frequency[25] << endl;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T23:15:54.200

这些条件中的每一个

```
 if ( 'n' ||  'N') 
```

将始终评估为 true，因为它们是非零常量 char 值。因此，您用来计数的变量总是递增的。要测试一个字符的发生率，你需要这样的东西

```
char char_to_test;
if (char_to_test == 'n' || char_to_test == 'N') {
    N++;
} 
```

你目前拥有的总是增加你的计数。此外，您需要实际从文件中提取每个字符才能进行测试。一旦你得到`string`from `getline`，你应该迭代它的各个字符并像上面一样测试它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:22:12.400

你的代码有很多问题。

其中之一是您正在调用一个函数来打开文件。

`void open_file ( ifstream & inf )`

一旦文件上的范围消失，此函数将关闭文件。

你所有的变量都有很多重复的代码，如果使用循环，这些代码很容易变得更紧凑。

```
#include <string>
#include <iostream>
#include <algorithm>
#include <fstream>
#include <cctype>
#include <map>

int main() {
    std::map<char,int> alpha;
    //Fills the map with A-Z with 0 as the value.
    for(char k = 65; k <= 90; k++) {
        alpha.insert(std::pair<char,int>(k,0));
    }
    //opens example.txt contains "the quick brown fox jumped over the cow"
    std::ifstream in("example.txt");
    std::string str;
    if(in.is_open()) {
        //loops through every line in the file.
        while(std::getline(in,str)) {
            //removes all whitespace
            str.erase(std::remove_if(str.begin(),str.end(), ::isspace),str.end());
            //capitalizes the string
            std::transform(str.begin(),str.end(),str.begin(), ::toupper);
            //loops through the string
            for(auto& i : str) {
                if(isalpha(i))
                    alpha[i]++; //Increments the frequency.
            }
        }
    }
    for(auto& i : alpha)
        std::cout << i.first << " " << i.second << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:45:41.460

我认为你需要努力变得更懒惰。这是C语言的一个版本：

```
unsigned counts[UCHAR_MAX];

int main() {  
    int ch;

    while (EOF != (ch=getchar()))
        ++counts[toupper((unsigned char)ch)];

    for (int i=0; i<UCHAR_MAX; i++)
        if (isupper(i))
            printf("%c: %u\n", i, counts[i]);

    return 0;
} 
```

我已经简化了一点（例如，读取`stdin`而不是打开文件），但这最终是一项非常简单的工作——不要试图让 a 变得比实际复杂得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T23:22:49.690

程序中没有任何内容可以确保它只读取每个字符一次。这类似于这个问题： [http](http://www.cplusplus.com/forum/beginner/24492/) ://www.cplusplus.com/forum/beginner/24492/ 你必须告诉程序什么时候结束。你要求程序做的是“虽然 A 存在于文件 A++ 中”它总是存在于文件中。你可以这样： [http ://www.cplusplus.com/reference/iostream/istream/get/](http://www.cplusplus.com/reference/iostream/istream/get/)

这将帮助它逐个字符地压缩文件。您仍然需要弄清楚如何让它在文件末尾停止。

# xsd - JAXB 绑定文件：使用整数 id 枚举

> ID：12326540
> 
> 赞同：0
> 
> 时间：2012-09-07T23:13:21.297
> 
> 标签：xsd, jaxb, maven-jaxb2-plugin

我在 XSD 中有一个枚举如下：

```
<xsd:simpleType name="Status">
    <xsd:restriction base="xsd:string">
        <xsd:enumeration value="ACTIVE"/>
        <xsd:enumeration value="INACTIVE"/>     
    </xsd:restriction>
</xsd:simpleType> 
```

使用此模式和 JAXB 绑定文件，我想生成类似于此的枚举：

```
public enum Status {
    ACTIVE(1),
    INACTIVE(2);

    private final int statusId;

    Status(int statusId) {
        this.statusId = statusId;
    }

    public int getId() {
        return this.statusId
    }

    public static Status getStatusById(int id) {
        // iterate through all status and return it
    }
} 
```

我正在尝试找出实现上述 Java 枚举的 JAXB 绑定代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:26:23.450

这是我在网络上进行一些研究后可以找到的内容：我认为您不能像我在问题中那样生成枚举。您以您想要的方式编写枚举，并告诉 xjc 插件在生成的代码中使用该枚举。

您首先需要一个绑定文件来解释如何处理 XSD 文件中的枚举：*binding.xml*

```
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    jaxb:version="2.0" xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
    jaxb:extensionBindingPrefixes="xjc" xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <jaxb:bindings schemaLocation="Schema.xsd">
        <jaxb:bindings node="//xs:simpleType[@name='Status']">
            <jaxb:javaType name="com.yourcompany.project.enums.Status"
                parseMethod="com.yourcompany.project.util.ProjectUtils.parseStatus"
                printMethod="com.yourcompany.project.util.ProjectUtils.printStatus" />
        </jaxb:bindings>        
    </jaxb:bindings>

</jaxb:bindings> 
```

接下来在binding.xml中按要求编写打印和解析方法：*ProjectUtils.java*

```
public class ProjectUtils {

    public static Status parseStatus(String statusStr) {
        return Status.valueOf(statusStr.trim().toUpperCase());              
    }

    public static String printStatus(Status status) {
        return status.name();
    }
} 
```

现在您需要在 xjc 工具中引用 binding.xml 文件。有很多方法可以做到这一点，但在这里我使用的是 maven 插件`cxf-xjc-plugin`，您可以拥有一个配置文件，您可以使用该配置文件从您的 XSD 生成源文件。

```
<profiles>
    <profile>
        <id>xsdtojava</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.cxf</groupId>
                    <artifactId>cxf-xjc-plugin</artifactId>
                    <version>2.3.0</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>xsdtojava</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <sourceRoot>${basedir}/src/main/java</sourceRoot>
                        <xsdOptions>
                            <xsdOption>
                                <extension>true</extension>
                                <xsd>${basedir}/src/main/resources/schema/Schema.xsd</xsd>
                                <bindingFile>${basedir}/src/main/resources/schema/binding.xml</bindingFile>
                                <extensionArgs>
                                    <arg>-Xdv</arg>
                                    <arg>-Xts</arg>
                                </extensionArgs>
                                <packagename>com.yourcompany.project.generated</packagename>
                            </xsdOption>
                        </xsdOptions>
                        <extensions>
                            <extension>org.apache.cxf.xjcplugins:cxf-xjc-dv:2.3.0</extension>
                            <extension>org.apache.cxf.xjcplugins:cxf-xjc-ts:2.3.0</extension>
                        </extensions>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

# actionscript-3 - AIR / Flex - AlivePDF 打印整个画布

> ID：12326544
> 
> 赞同：1
> 
> 时间：2012-09-07T23:14:23.887
> 
> 标签：actionscript-3, apache-flex, printing, air, alivepdf

是否有可能使用[AlivePDF](http://alivepdf.bytearray.org/)打印整个画布 UI 元素（及其所有子元素） ？

我知道[正常的方法](http://alivepdf.bytearray.org/alivepdf-asdoc/)是分别添加每个元素，但是如果有一大堆元素（文本、图像..）那就是个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:32:46.457

一种可能的方法是从 Canvas 控件创建图像并将图像添加到 PDF。这可能比您想要的分辨率低，并且文本将无法选择。

```
 var myBitmapData:BitmapData = new BitmapData(canvas.width, canvas.height);

    myBitmapData.draw(canvas);

    myPDF.addImage(new Bitmap(myBitmapData, PixelSnapping.AUTO, true),
                    0, 0, canvas.width, canvas.height, 
                    ImageFormat.JPG, 100, 1); 
```

# javascript - Javascript 运算符 << 和 >>

> ID：12326549
> 
> 赞同：-5
> 
> 时间：2012-09-07T23:15:09.893
> 
> 标签：javascript, operators, bit-shift

> **可能重复：**
> [这些操作员是做什么的？](https://stackoverflow.com/questions/4535328/what-do-these-operators-do)
> [Java中的这个表达式是什么（1 << 2）？](https://stackoverflow.com/questions/9833050/what-is-this-expression-in-java-1-2)

JavaScript 中的 >> 和 << 运算符有什么作用？

我以前从未见过他们，我想破脑袋想了解他们。

任何帮助表示赞赏：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:16:55.653

它们是位移运算符。

[Mozilla 参考 1](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FOperators%2FBitwise_Operators)

[Mozilla 参考 2](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FOperators%2FBitwise_Operators)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:18:04.840

它们是[按位移位运算](http://en.wikipedia.org/wiki/Arithmetic_shift)符。

在实践中，它们用于将变量的位移动指定的数量，例如

```
2 << 2 = 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:19:52.423

它们是标准的按位移位运算符。您需要在纸上画出 1 和 0 才能更好地理解它：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators)

# css - 使用定制的引导框架

> ID：12326553
> 
> 赞同：1
> 
> 时间：2012-09-07T23:16:08.880
> 
> 标签：css, twitter-bootstrap

我从这个链接下载了一个定制的引导 CSS 框架

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)。

我只有`bootstrap.css`和`bootstrap.min.css`文件。但是当我使用响应式功能时，我还需要自定义版本的`bootstrap.responsive.css`. 我如何`bootstrap.responsive.css`根据我的新`bootstrap.css`.

PS：我制作了 15 个跨度列，并为每个列赋予了新的宽度。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:30:15.973

它全部包含在单个 CSS 文件中

# c++ - 编译器是否应该忽略导致构造函数或析构函数运行的未使用变量？

> ID：12326554
> 
> 赞同：4
> 
> 时间：2012-09-07T23:16:29.587
> 
> 标签：c++, g++, destructor, compiler-warnings, unused-variables

我有一些代码放入析构函数中，以确保它在正常退出和异常堆栈展开时都运行：

```
struct withProtectedClose {

  ~withProtectedClose() {
    // Do some cleanup here...
  }
};

void test() {
  withProtectedClose close;

  // Do some work before closing
} 
```

然而 g++ 编译器 (g++ (GCC) 3.4.6 20060404 (Red Hat 3.4.6-11)) 抱怨：

```
test.cpp: In function `void test()':
test.cpp:28: warning: unused variable 'close' 
```

我可以通过以某种方式引用变量来使其静音，但这只会使代码变得混乱以使编译器静音，而不是我希望我的代码受到影响。

有一个析构函数的事实不应该足以提示编译器，因为在构造后没有使用变量没有区别吗？

假设编译器在仍然收到合法未使用变量的通知时无法关闭，除了使用它之外，有没有办法让这个编译器静音？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:32:11.587

我倾向于认为这是编译器中的错误。它仍然存在于 g++ 4.7.1 中。

作为一种解决方法，您可以尝试定义一个什么都不做的构造函数。它使用 g++ 4.7.1 抑制警告，我不知道 3.4.6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:37:53.430

由于它似乎只是一个 GCC 问题，您可以通过像这样声明您的结构来“修复”它：

```
struct __attribute__ ((__unused__)) withProtectedClose 
```

这可靠地消除了我的版本 4.6.3 编译器上的警告（并且根据标准，析构函数明显运行）。但是，它**仍会**警告您未使用的变量，否则。

大多数情况下，这是您真正想知道的错误，因此完全关闭警告 ( `-Wno-unused-variable`) 并不是一个好的选择。如果没有其他原因，人们会想要删除（无意中）未使用的变量，因为它们会使阅读代码的人感到困惑并给优化器带来不必要的负担。

如果您需要可移植，请使用宏来封装属性内容（非 GCC 上的空宏）。

为了解决实际问题“编译器是否应该忽略导致构造函数或析构函数运行的未使用变量？” ——**没有。**

C++ 标准规定 [3.7.3.3]：

> 如果具有自动存储持续时间的变量具有初始化或具有副作用的析构函数，则即使它看起来未使用，也不应将其消除，除非可以按照 12.8 中的规定消除类对象或其复制/移动。

*在此范围内，不允许*编译器忽略*该*变量。但是，它可以警告通常是无意的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:34:35.490

在这种情况下，MSVC 不会发出此警告。如果您的 gcc 版本有，请尝试以这种方式抑制它：

```
withProtectedClose close; 
(close); 
```

# windows-phone-7 - 为实时或测试环境切换应用设置的值

> ID：12326555
> 
> 赞同：0
> 
> 时间：2012-09-07T23:16:32.207
> 
> 标签：windows-phone-7

创建 Web 应用程序时，我们可以在 web.config 上设置应用程序设置。我们可以在 web.config 上轻松更改 app.setting 的值。我们可以将 web.config 文件切换为实时或测试环境。在 Windows 手机应用程序上怎么样？我可以使用文本文件而不是 web.config 吗？当应用程序加载时，我阅读了文本文件中的内容，这样我就可以轻松地将其替换为实时。这是个好主意吗？如果没有，你能给我一个想法如何切换设置的值以进行测试或生活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:40:46.430

我使用类似的东西。我有一个 app.config 文件，它是一个具有我自己结构的 xml 文件。我有一个加载和使用它的类。您可以创建 app.config 和 app.config-debug 并像这样加载它们

```
#if DEBUG
    //load app.config-debug
else
    //load app.config
#endif 
```

当您的应用程序启动时。

# coldfusion - 为什么搜索词的顺序会影响 solr 查询结果？

> ID：12326556
> 
> 赞同：2
> 
> 时间：2012-09-07T23:16:35.977
> 
> 标签：coldfusion, solr, coldfusion-9

如果我搜索`Authorname "Title of Work"`记录不会出现，但如果我搜索`"Title of Work" Authorname`那么它们就会出现。

为什么会发生这种情况？

这是在 Coldfusion 上运行的 solr。唯一的变化是条款的顺序。

### 更新

示例冷融合代码。请注意，在此示例中，第一个获得 2 个匹配项，而第二个获得 1 个匹配项。所以看起来这取决于搜索的实际字符串，但它仍然意味着更改术语的顺序会更改返回的记录数。

我可以理解它改变返回记录的*顺序*，因为改变顺序会改变结果的相关性。但所有 3 条记录都应显示为任何一条。我会看看我是否可以找到 solr 日志并发布它们，这可能会有所帮助。

```
<cfset term1='"globalization of information"'>
<cfset term2='Reiter'>
<cfsearch name="ExampleOne" criteria='#term1# #term2#' collection="abstracts,fulltexts">
<cfoutput>#ExampleOne.recordcount#</cfoutput>
<cfsearch name="ExampleTwo" criteria='#term2# #term1#' collection="abstracts,fulltexts">
<cfoutput>#ExampleTwo.recordcount#</cfoutput>
<cfabort> 
```

输出：

> 2 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:32:49.280

只需尝试用单引号给出搜索词，我已经在 CF 10 上进行了测试，它对我来说效果很好。所以代替：cfset term1=""信息全球化"'

试试这个 cfset term1="'信息全球化'"

# c - 指向结构数组的指针的臭名昭著的动态分配

> ID：12326558
> 
> 赞同：1
> 
> 时间：2012-09-07T23:16:41.453
> 
> 标签：c, arrays, data-structures, dynamic-data

我有一个使用此代码的程序的长版本和一个短版本。这是短版，奇怪的是，这段代码在短版程序中运行得非常好，但是因为我在大版本中遇到访问冲突，我感觉有些不对劲。是否有人看到以下代码有任何严重错误（可能导致数据损坏和/或访问冲突错误）？或者这样可以吗？

```
char strlist[5][11] = {
    { "file01.txt" },
    { "file02.txt" },
    { "file03.txt" },
    { "file04.txt" },
    { "file05.txt" }
};

typedef struct DYNAMEM_DATA {
    char *string;
    int   strlen;
} DYNAMEM_DATA;

typedef struct DYNAMEM_STRUCT {
    struct DYNAMEM_DATA **data;
    int           num_elements;
} DYNAMEM_STRUCT;

DYNAMEM_STRUCT *create_dynamem_struct(int num_elements, char *strlist)
{
    DYNAMEM_STRUCT *ds = (DYNAMEM_STRUCT *)calloc(1, sizeof(DYNAMEM_STRUCT));
    wchar_t wstring[128];
    char len[3];
    int i;

    ds->data = (DYNAMEM_DATA **)calloc(num_elements, sizeof(DYNAMEM_DATA *));
    ds->num_elements = num_elements;

    for(i = 0; i < num_elements; i++) {
        ds->data[i] = (DYNAMEM_DATA *)calloc(1, sizeof(DYNAMEM_DATA));
        ds->data[i]->string = (char *)calloc(1, strlen(&strlist[i*11])+5);
        ds->data[i]->strlen = strlen(&strlist[i*11]);
        sprintf(ds->data[i]->string, "%s, %d", &strlist[i*11], ds->data[i]->strlen);
        mbstowcs(wstring, ds->data[i]->string, 128);
        MessageBox(NULL, wstring, TEXT("Error"), MB_OK);
    }

    return ds;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:49:08.270

此代码运行，产生 5 条“错误”消息（这是意料之中的），并且不会泄漏任何内存。在 Mac OS X 10.7.4（使用 GCC 4.7.1）上运行`valgrind`（3.7.0），它得到了一份干净的健康账单。

问题显然不在这个版本的代码中。

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <wchar.h>

char strlist[5][11] = {
    { "file01.txt" },
    { "file02.txt" },
    { "file03.txt" },
    { "file04.txt" },
    { "file05.txt" }
};

typedef struct DYNAMEM_DATA {
    char *string;
    int   strlen;
} DYNAMEM_DATA;

typedef struct DYNAMEM_STRUCT {
    struct DYNAMEM_DATA **data;
    int           num_elements;
} DYNAMEM_STRUCT;

enum { MB_OK = 0 };
static void destroy_dynamem_data(DYNAMEM_DATA *dd)
{
    free(dd->string);
    free(dd);
}
static void destroy_dynamem_struct(DYNAMEM_STRUCT *ds)
{
    for (int i = 0; i < ds->num_elements; i++)
        destroy_dynamem_data(ds->data[i]);
    free(ds->data);
    free(ds);
}
static void MessageBox(const void *null, const wchar_t *wcs, const char *ncs, int status)
{
    if (null == 0 || status == MB_OK)
        fprintf(stderr, "%s\n", ncs);
    else
        fwprintf(stderr, L"%s\n", wcs);
}
static const char *TEXT(const char *arg) { return arg; }

extern DYNAMEM_STRUCT *create_dynamem_struct(int num_elements, char *strlist);

DYNAMEM_STRUCT *create_dynamem_struct(int num_elements, char *strlist)
{
    DYNAMEM_STRUCT *ds = (DYNAMEM_STRUCT *)calloc(1, sizeof(DYNAMEM_STRUCT));
    wchar_t wstring[128];
    //char len[3];
    int i;

    ds->data = (DYNAMEM_DATA **)calloc(num_elements, sizeof(DYNAMEM_DATA *));
    ds->num_elements = num_elements;

    for(i = 0; i < num_elements; i++) {
        ds->data[i] = (DYNAMEM_DATA *)calloc(1, sizeof(DYNAMEM_DATA));
        ds->data[i]->string = (char *)calloc(1, strlen(&strlist[i*11])+5);
        ds->data[i]->strlen = strlen(&strlist[i*11]);
        sprintf(ds->data[i]->string, "%s, %d", &strlist[i*11], ds->data[i]->strlen);
        mbstowcs(wstring, ds->data[i]->string, 128);
        MessageBox(NULL, wstring, TEXT("Error"), MB_OK);
    }

    return ds;
}

int main(void)
{
    DYNAMEM_STRUCT *ds = create_dynamem_struct(5, strlist[0]); 
    destroy_dynamem_struct(ds);
    return 0;
} 
```

# c++ - 初始化程序列表不起作用xCode 4.4

> ID：12326569
> 
> 赞同：1
> 
> 时间：2012-09-07T23:17:43.653
> 
> 标签：c++, compiler-errors, xcode4.4

我正在尝试在 XCode 4 中使用初始化列表，

```
struct Vector2f
{
  float x,y;
  Vector2f():x(0.f),y(0.f){}
  Vector2f( float ix, float iy ):x(ix),y(iy){}
} ; 
```

但我收到 7 个编译器错误，

![错误](../Images/93fa4e60f498b8173fe4a99f218416e2.png)

所以看起来它认为我正在做一些“位域”业务，但我正在尝试使用初始化列表！

代码文件在文件属性中被标记为“C++ 头”，但它似乎编译为 C？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:39:22.873

我懂了。*包含*此 C++ 源代码的文件是一个文件`.m`——即它被编译为“Objective-C”。

`#include`将ing 文件重命名为`.mm`将其编译模式改为**Objective-C++**，则`Vector2f`C++ 类的编译成功。

*   我得到的另一个错误（当我`struct Vector2f`改为`class Vector2f`）

> [未知类型名称“类”；您指的是 'Class' 吗？](https://stackoverflow.com/questions/8588734/unknown-type-name-class-did-you-mean-class)

# javascript - Rails：使用Heroku时如何获取当前用户的时区

> ID：12326570
> 
> 赞同：19
> 
> 时间：2012-09-07T23:17:44.980
> 
> 标签：javascript, ruby-on-rails, heroku

我使用以下方法将 Heroku 网站的时区设置为太平洋标准时间 (PST)：

```
heroku config:add TZ=America/Los_Angeles 
```

用户的时间现在总是在 PST 中——无论他们是否在 PST 时区。

获取用户实际时区（即他们实际所在的时区）的最佳方法是什么？

我猜这可以使用 Rails（或 Javascript？）来解决，而不是 Heroku。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-07T23:37:56.213

有两种方法可以做到这一点。

*   事实上，您可以使用 javascript 来获取他们当前的时间/时区。有可能是用户的计算机时间设置不正确，在这种情况下您显示的时区将不正确。

    因为您使用的是 Rails，所以推荐的方法是将 javascript 捆绑为 gem，例如[`detect_timezone_rails`](https://github.com/scottwater/detect_timezone_rails). 这使它易于安装（因为它全部自动捆绑在资产管道中。

*   您可以使用 IP 地址来推断他们的国家和时区。这种情况下的危险是用户可能正在使用代理。此外，虽然 IP 地址通常具有城市级别的分辨率，但它可能或多或少准确，在极少数情况下可能会给出错误的时区。

    使用 IP 地址，您可以获得他们的大致城市和纬度/经度。[在Ruby Toolbox](https://www.ruby-toolbox.com/categories/geocoding___maps)上有很多 gem 可以做到这一点，例如。[`geocoder`](https://github.com/alexreisner/geocoder). 使用纬度/经度，您可以使用像[`timezone`](https://github.com/panthomakos/timezone).

您还可以使用上述方法之一，并允许用户在您的网站上手动更改他们的时区（如果已注册，则将此设置存储在数据库中，或者作为浏览器上的 cookie）。这在您弄错时区时很有用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-07T23:58:06.720

根据您的应用程序设置方式，您可以通过多种方式执行此操作。这些都不是 Heroku 环境独有的。

如果您的应用程序允许用户注册，那么您很可能有一个用户模型，并且您可能正在使用 Devise gem 进行身份验证/注册。将一个字段添加到您的数据库（：time_zone），并在用户注册时将用户时区存储在此字段中。

```
>> rails generate migration add_time_zone_to_users time_zone:string
>> rake db:migrate 
```

Rails 为您提供了一个方便的 time_zone_select 表单助手，它为您提供了一个选择列表，其中包含您可以向用户显示的所有时区。将其添加到用户注册表单中，并允许用户在注册时设置他们的时区。 [http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/time_zone_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/time_zone_select)

在您的应用程序控制器中，您可以执行以下操作；

```
before_filter :set_time_zone

def set_time_zone
    #current user is a devise method see https://github.com/plataformatec/devise
    Time.zone = current_user.time_zone if current_user
end 
```

然后，当您在时间实例上的应用调用中显示日期时`.in_time_zone`，该时间实例将显示用户时区的时间。

```
<%= Time.now.in_time_zone %> or <%= @your_model.created_at.in_time_zone %> 
```

如果您没有用户身份验证，那么您可以回退到 javascript。为此，您可以`getTimezoneOffset()`在日期对象上使用本机 javascript，或者更好地使用以下 jsTimezoneDetect 插件：

[http://www.pageloom.com/automatic-timezone-detection-with-javascript](http://www.pageloom.com/automatic-timezone-detection-with-javascript)

最后，您可以使用两者的混合，首先使用 javascript 检测它们的时区偏移，然后将此值存储在 rails session/cookie 中，然后使用 before_filter 设置 Time.zone 如上所述，但基于之前计算的会话 time_zone 值在 JavaScript 中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-25T07:40:48.180

或者你可以使用这个很棒的 gem [https://github.com/kbaum/browser-timezone-rails](https://github.com/kbaum/browser-timezone-rails)

# string - 将输入与字符串进行比较

> ID：12326589
> 
> 赞同：0
> 
> 时间：2012-09-07T23:19:36.977
> 
> 标签：string, perl, input

所以我正在编写一个相对简单的程序，它会提示用户输入命令、加法、减法等，然后提示输入数字来完成该操作。一切都写好了，编译得很好，但是当我在（加、减等）中输入一个命令时，它并没有正确地比较它。没有进入if case的操作分支，而是进入了我添加的无效命令catch。这是包含声明和第一个 if 语句的代码的一部分。

```
my $command = <STDIN>;
my $counter = 1;
#perform the add operation if the command is add
if (($command eq 'add') || ($command eq 'a')){

    my $numIn = 0;
    my $currentNum = 0;
    #While NONE is not entered, input numbers.
    while ($numIn ne 'NONE'){
        if($counter == 1){
            print "\nEnter the first number: ";
        }else{
            print "\nEnter the next number or NONE to be finished.";
        }
        $numIn = <STDIN>;
        $currentNum = $currentNum + $numIn;

        $counter++;
    }

    print "\nThe answer is: #currentNum \n";

#perform the subtract operation if the command is subtract
}` 
```

有谁知道为什么如果我输入添加它会跳过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T23:23:41.627

$command 可能仍然附加了新行，因此 eq 将失败。因为“添加”！=“添加\n”

您可能会考虑只检查命令的第一个字母，例如使用正则表达式

```
$command =~ /^a/i 
```

或在 $command 上使用 Chop 删除最后一个字符。

```
chop($command) 
```

# objective-c - 自动释放不允许编译代码

> ID：12326591
> 
> 赞同：2
> 
> 时间：2012-09-07T23:20:08.477
> 
> 标签：objective-c, ios

我正在尝试将旧代码转换为 ARC 代码。但是，我在以下行收到构建错误

```
[[token retain] autorelease]; 
```

我按以下顺序收到 3 个错误：

-'autorelease' 不可用：在自动引用计数模式下不可用

-[重写器] 删除未使用的“自动释放”消息是不安全的；它的接收器可能会立即被销毁

-ARC 禁止发送“自动释放”的显式消息

如果我删除此特定行，则代码可以正确编译

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T23:28:58.563

如果这就是在线上的全部内容，您可能可以将其删除。该代码声明了对该对象的引用，但也表示您不想担心稍后发布，但是使用 ARC 您不必担心它。

我猜 Xcode 并没有因为缺乏上下文而自动摆脱它。如果它位于更常见的位置，例如在 return 语句中，那么意图是什么就很明显了。当它完全独立时，它可能是，但可能不是，更复杂的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T23:23:25.660

ARC 为您管理内存，因此您无需调用“autorelease”、“release”、“retain”等。使用 ARC，编译器会根据需要保留和释放对象，因此您不必显式地进行这些操作来电。如果您想手动管理内存禁用 ARC，或者您可以使用编译器标志“-fno-objc-arc”来禁用特定类的 ARC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:25:41.657

ARC 意味着您不必使用释放、保留或其他讨厌的内存管理工具。ARC 会在您编译应用程序时自动为您添加它们。[在这里阅读更多](http://developer.apple.com/library/mac/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

如果您的旧代码不是删除所有内存管理调用的最佳解决方案，[请检查此答案以禁用特定文件的 ARC](https://stackoverflow.com/questions/10184307/batch-adding-fno-objc-arc-flag-to-multiple-source-files/10184313#10184313)

# xml - DB2：xmlparse/cursor 没有结果集

> ID：12326594
> 
> 赞同：1
> 
> 时间：2012-09-07T23:20:27.740
> 
> 标签：xml, stored-procedures, db2

技术人员——即使我知道我有 2 行，其中 1 行与 000020 上的 EMPNO 匹配，而另一行在 000030 上匹配，我得到一个空结果集。有任何想法吗？

这是电话：

```
CALL DB2INST1.EMP_MULTIPLE_XML(XMLPARSE(
    DOCUMENT '<EMPLOYEE><EMPNO>000020</EMPNO><EMPNO>000030</EMPNO></EMPLOYEE>')); 
```

这是更改后的存储过程：

```
 BEGIN

   CREATE PROCEDURE DB2INST1.EMP_MULTIPLE_XML (IN DOC XML)
   DYNAMIC RESULT SETS 1
   READS SQL DATA
   LANGUAGE SQL SPECIFIC EMP_MULTIPLE_XML

   DECLARE CSR1 CURSOR WITH RETURN FOR
    SELECT emp.EMPNO,
           emp.FIRSTNME,
           emp.LASTNAME,
           emp.WORKDEPT
     FROM DB2INST1.EMPLOYEE emp
     WHERE emp.EMPNO IN
      (SELECT X.EMPNO FROM
        XMLTABLE('$d/EMPLOYEE/EMPNO' PASSING DOC AS "d" COLUMNS EMPNO CHAR(6) PATH 'EMPNO') AS X);

 OPEN CSR1;
 END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T05:03:44.017

考虑到 proc 正在将结果集从过程中传递出来，这`FETCH`似乎没有必要。尝试删除 FETCH 及其之后的所有内容（最后的 END 除外）。

`'$d/employee'`调用中的参数`XMLTABLE`不正确，因为您希望每次出现`'$d/employee/empno'`, 而不是`'$d/employee'`. 这就是导致*item(), item()+错误的原因*

此过程是一个独立的示例，它展示了如何实现通过 XML 文档参数传递一组输入值的目标：

```
CREATE OR REPLACE PROCEDURE test.INPUT_MULTIPLE_XML (IN DOC XML)
DYNAMIC RESULT SETS 1
LANGUAGE SQL
SPECIFIC INPUT_MULTIPLE_XML

BEGIN

DECLARE CSR1 CURSOR WITH RETURN FOR

  select t.type,
         t.tabschema,
         t.tabname
   from syscat.tables t,  
   XMLTABLE('$d/tables/tabname' PASSING DOC AS "d" 
            COLUMNS "TABNAME" VARCHAR(128) PATH '.'
   ) AS X
   WHERE X.tabname = t.tabname
;

  OPEN CSR1;

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:27:06.777

对于那些在我身后关注这个线程的人，这里是有效的 sproc：

```
 CREATE OR REPLACE PROCEDURE test.INPUT_MULTIPLE_XML (IN DOC XML) 
  DYNAMIC RESULT SETS 1  
  LANGUAGE SQL SPECIFIC INPUT_MULTIPLE_XML  
  BEGIN  
     DECLARE CSR1 CURSOR WITH RETURN FOR    
        select t.type,          
               t.tabschema,          
               t.tabname    
         from syscat.tables t,      
          XMLTABLE('$d/tables/tabname' PASSING DOC AS "d" 
          COLUMNS "TABNAME" VARCHAR(128) PATH '.'    ) AS X   
           WHERE X.tabname = t.tabname ;    

  OPEN CSR1;  
  END 
```

# c# - 仅当鼠标仍在元素上方时，如何在 1 秒后在 Jquery 中显示元素？

> ID：12326600
> 
> 赞同：2
> 
> 时间：2012-09-07T23:21:20.707
> 
> 标签：c#, jquery, asp.net

当您将鼠标悬停在聊天列表中的名称上时，我正在尝试在类似于 Gmail 的网格视图中创建悬停菜单。

**仅当鼠标仍在元素上方时，**如何在 1-2 秒后在 Jquery 中显示元素？

以下内容无法正常工作，因为如果我只是在整个列表中移动鼠标，所有元素都会显示出来（即使延迟 1 秒。）

```
 $('.label, .popup').hover(function(e) {
                setTimeout(function() {
                    $(e.target).closest("tr").find(".popup").show();
                }, 1000);

            }, function(e) {
                setTimeout(function() {
                    $(e.target).closest("tr").find(".popup").hide();
                }, 1000);
            });

<asp:TemplateField>
    <ItemTemplate>

        <asp:Label ID="label1" CssClass="label" runat="server" Text='<%# Eval("Column1") %>'></asp:Label>

            <asp:Panel runat="server" ID="popup" CssClass="popup" 
            Style="display: none; position: absolute; margin-left: 60px; width: 250px;">

                Random text

            </asp:Panel>

    </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:30:12.913

清除 mouseout 函数中的 setTimeout，因此如果鼠标悬停在该元素上之后还没有经过 1 秒，则不会显示。

```
$('.label, .popup').hover(function(e) {
            $(this).data('timeout', setTimeout(function() {
                $(e.target).closest("tr").find(".popup").show();
            }, 1000));

        }, function(e) {
            clearTimeout($(this).data('timeout'));
            setTimeout(function() {
                $(e.target).closest("tr").find(".popup").hide();
            }, 1000);
        }); 
```

# function - Mathematica：绘制一个包含 FindRoot 的模块

> ID：12326604
> 
> 赞同：4
> 
> 时间：2012-09-07T23:22:09.230
> 
> 标签：function, module, plot, wolfram-mathematica, delayed-execution

我偶尔会遇到这个问题，但我还没有找到解决方法。它通常发生在我找到方程的根，并且想要根据某个参数最大化/最小化/绘制该根时。所以我尝试将代码包装在一个模块中，这样它就可以只用一个输入数字来执行，但它不能在像 Plot 这样的函数中工作。例如：

```
f[din_] := Module[{d = din},
  sol = NDSolve[{y'[x] == y[x], y[0] == 1}, y[x], {x, 0, 10}];
  t1 = Flatten[FindRoot[y[x] - d /. sol, {x, 1}]];
  x /. t1
  ]
f[2]
f[2.5]
f[3]
Plot[f[x], {x, 2, 3}] 
```

使用数字对 f 的调用都按预期工作，但 Plot 函数中的 f 似乎是用符号“x”或其他东西进行评估的，只是给出了很多错误文本。

有什么办法吗？

环顾论坛，我发现了一些针对类似问题的建议——比如这样定义：

```
 f[din_?NumericQ]:= 
```

我尽我所能，但似乎没有任何改变。我正在使用 Mathematica 8.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:17:39.723

主要解决方法是`sol = NDSolve[...`从模块中取出。模块本身也可以简化如下：-

```
sol = NDSolve[{y'[x] == y[x], y[0] == 1}, y[x], {x, 0, 10}];

f[din_] := x /. FindRoot[y[x] - din /. sol, {x, 1}]

Plot[f[x], {x, 2, 3}] 
```

![在此处输入图像描述](../Images/6c381b38449312ef475ba1607588bd10.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:45:00.700

尝试 ：

```
f[din_?NumericQ] := Module[{LocalDummy, Localy, LocalSol},
  Localy = y /. NDSolve[{y'[LocalDummy] == y[LocalDummy], y[0] == 1}, y, {LocalDummy, 0, 10}][[1]];
  LocalSol = FindRoot[Localy[LocalDummy] - din == 0, {LocalDummy, 1}][[1, 2]] ] 
```

![阴谋](../Images/ccaa23775a1e861a0f9cd181e62efaec.png)

# php - MYSQL 按第二个表排序

> ID：12326605
> 
> 赞同：1
> 
> 时间：2012-09-07T23:22:09.357
> 
> 标签：php, mysql

我有一个名为属性的表，我想获取此表中匹配“hold = 1”的所有记录，但是一个额外的表包含不同语言的属性名称我需要获取英语，或者如果不存在语言标记作为默认值

表属性：

```
pid     hold 
```

属性翻译：

```
pid     lang_id     pname     description     isDefault 
```

我通常使用工会获得语言

```
(select pname from property_translations where lang_id='en' and pid=$pid)
union
(select pname from property_translations where isDefault='Yes' and pid=$pid)
limit 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:33:52.190

```
SELECT p.pid, t.pname FROM properties p LEFT OUTER JOIN translations t ON p.pid = t.pid
    WHERE p.hold=1 AND t.isDefault='Yes' AND NOT EXISTS
    ( SELECT * FROM translations ti WHERE ti.pid = p.pid AND ti.lang_id='en')
    UNION SELECT p.pid, t.pname FROM properties p 
    LEFT OUTER JOIN translations t ON p.pid = t.pid
    WHERE p.hold=1 AND t.lang_id='en'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:34:10.640

尝试：

```
 SELECT pt.pname
     FROM property_translations AS pt
LEFT JOIN properties AS p ON p.pid = pt.pid
    WHERE pt.pid = $pid
      AND p.hold = 1
      AND pt.lang_id='en'
      AND isDefault='Yes' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:37:57.897

如果你`select`得到你想要的结果并且你只想过滤它们`hold=1`，你可以简单地加入第一个表：

```
(select pname from property_translations t
              join properties p on (t.pid=p.pid and p.hold = 1)
              where lang_id='en' and pid=$pid)
union
(select pname from property_translations t
              join properties p on (t.pid=p.pid and p.hold = 1)
              where isDefault='Yes' and pid=$pid
              and not exists (select 1 from property_translations t2
                              where t2.pid=t.pid and t2.lang_id='en' and t2.isDefault='Yes')) 
```

请注意，我不是在检查您原件的有效性`select`，只是展示如何针对第二个表添加检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T00:29:19.603

```
SELECT p.pid pid, pname
from properties p
JOIN (SELECT t1.pid tpid, IFNULL(t2.pname, t1.pname) pname
      FROM translations t1
      LEFT OUTER JOIN translations t2
      ON t1.pid = t2.pid
      AND t2.lang_id = 'en'
      WHERE t1.isDefault = 'Yes') t
ON p.pid = t.pid
WHERE p.hold = 1 
```

# assembly - 8086 汇编 Int 21h 和扩展 ASCII 字符

> ID：12326609
> 
> 赞同：3
> 
> 时间：2012-09-07T23:22:48.707
> 
> 标签：assembly, ascii, dos, x86-16

我需要一些帮助来完成一项任务。我需要处理 ASCII 格式的纯文本文件，并返回每个代码存在多少个字符（有多少个 a，多少个 b，等等）。它现在几乎可以完美运行。

我现在遇到的问题是，如果文件上有扩展的 ASCII 字符，当我使用 3fh 服务中断时，它不能很好地读取它们。

例如，如果文件有一个 é（ascii 代码 130），它会读取一个 ß（ascii 代码 225）。恐怕我用错了中断，但我不知道该怎么做，所以在这里提供一点帮助将不胜感激。调试也无济于事，因为中断执行得很好，没有错误，它只是返回缓冲区中的错误值。

这是我用来读取文件的确切代码。我有上一个中断的句柄。

```
 xor ax,ax
      lea dx, buffer        
      mov ah,3fh            
      mov bx,handle         
      mov cx,4096           
      int 21h 
```

谢谢！

**编辑**

我发现了问题，但不知道如何解决。原来，读作 225 的字符不是 é，而是 á。根据我发现的每个 ASCII 表，á 的代码应该是 160……但在 Unicode 中是 225……这很奇怪，因为我特意告诉记事本将其保存为 ANSI，而不是 ASCII……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T14:08:31.177

您正在混淆代码页。

MS-DOS 使用代码页 437，其中 é 是代码 130。但 ANSI 模式下的记事本使用[代码页 1252](http://en.wikipedia.org/wiki/Windows-1252)，其中 é 是代码 233。

ASCII 最多只能定义为 127，因此没有 130 或 160 的 ASCII 图表之类的东西。扩展的 ASCII 没有标准化，因此不同的人以不同的方式扩展它。特别是，MS-DOS 和 Windows 使用不同的代码页，它们实际上是不同的扩展 ASCII 表。

如果您要使用 MS-DOS 操作文件，请使用代码页 437。如果您要使用 Windows 操作文件，请使用代码页 1252。（或者更好，使用 Unicode。）

但是你不能让一个文件在 MS-DOS 和 Windows 中得到相同的解释，就像你不能写一本可以用英语和法语解释相同的书一样。

# java - “无法找到或加载主类” OS X M.Lion

> ID：12326613
> 
> 赞同：3
> 
> 时间：2012-09-07T23:23:23.290
> 
> 标签：java, macos, runtime-error

我在运行教科书附带的示例代码时遇到问题。我`JDK7`在`OS X`Mountain Lion 上使用。`StringMutation.java`编译正常，但运行 java`StringMutation.class`给我以下错误

`Could not find or load main class StringMutation.class`.

我在 StringMutation.java 和 StringMutation.class 所在的同一目录中运行 javac StringMutation.java 和 java StringMutation.class。

如果重要的话，我将 Java SE7 设置为 Java Preferences 中的最高优先级。感谢您的帮助。

这是示例代码：

```
public class StringMutation
{

   public static void main (String[] args)
   {
  String phrase = "Change is inevitable";
  String mutation1, mutation2, mutation3, mutation4;

  System.out.println ("Original string: \"" + phrase + "\"");
  System.out.println ("Length of string: " + phrase.length());

  mutation1 = phrase.concat (", except from vending machines.");
  mutation2 = mutation1.toUpperCase();
  mutation3 = mutation2.replace ('E', 'X');
  mutation4 = mutation3.substring (3, 30);

  // Print each mutated string
  System.out.println ("Mutation #1: " + mutation1);
  System.out.println ("Mutation #2: " + mutation2);
  System.out.println ("Mutation #3: " + mutation3);
  System.out.println ("Mutation #4: " + mutation4);

  System.out.println ("Mutated length: " + mutation4.length());
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:19:15.537

不要在命令中包含“.class”。你需要运行：`java StringMutation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T19:47:59.140

If you use not empty package you need to run: `java <package>.<className>`

*Example: `java com.test.MyClass`*

# jquery - 带有登录和注册的 Jquery 模态对话框

> ID：12326615
> 
> 赞同：3
> 
> 时间：2012-09-07T23:23:28.747
> 
> 标签：jquery, modal-dialog

我正在尝试为登录和注册创建一个 Jquery 模式窗口。当单击页面上的 css 触发器时，模态窗口通过 ajax 动态注入到页面主体中。模式窗口打开时显示的默认表单是登录表单。此时一切都按预期工作（表单验证、ajax 提交等）。无论哪种形式设置为默认值，该脚本都可以正常工作。

如果用户还没有帐户，他/她可以单击链接以显示注册表单。此时登录表单淡出，注册表单淡入。

但是，当我切换到注册表单时，jquery 不会按照 plMShowRegBtn 和 plMShowLoginBtn 单击事件中的脚本指示重新定义 plActiveForm 变量。如果我将注册表单设置为默认表单，那么一切正常，直到我切换到登录表单，此时我遇到同样的问题 - jquery 只是不在表单上执行 - 但所有其他 jquery 工作正常（例如关闭模态窗口并将其从标记中删除）。

似乎一旦加载了 jquery 并且为 plActiveForm 变量定义了值，它就不会让我重新定义它。此变量保存当前表单的 ID，并在整个代码中使用。

我尝试使用带有 live() 和 on() 函数的 plMShowRegBtn 和 plMShowLoginBtn 点击事件无济于事。

此处未显示 html 部分，但它非常简单。一个带有两种表单的 div 容器——一种用于登录，一种用于注册，还有两个用于切换显示的表单的输入按钮。默认情况下，这两种形式都是 css display:none。

任何帮助，将不胜感激。谢谢！

我的插件如下图所示：

```
// -----------------------------------------------
// JQUERY - FOR MODAL LOGIN + REGISTRATION FORM
// -----------------------------------------------
(function ($) {
$.fn.plMlogin = function (options) {

    // -----------------------------------------------
    // DEFAULTS AND OPTIONS
    // -----------------------------------------------
    var defaults = {
        plTooltip: true,
        plResetButton: true,
        plBubbleResponse: true
    };
    var settings = $.extend({}, defaults, options);

    // -----------------------------------------------
    // SHOW MODAL WINDOW ON CLICK
    // -----------------------------------------------
    $('.pl-m-trigger').click(function(e) {
        e.preventDefault();

        // -> append container into body
        $('body').append('<div class="pl-m-container">');

        // -> load modal forms into container
        $.ajax({
            url: 'pl-module/public/modal-login-html.php',
            dataType: 'html',
            timeout: 10000, // 10 seconds
            success: function(html) {

                // -----------------------------------------------
                // -> LOAD FORMS INTO CONTAINER
                // -----------------------------------------------
                $(".pl-m-container").html(html);

                // -----------------------------------------------
                // PROPERTIES
                // -----------------------------------------------
                var plMContainer = $('.pl-m-container'),
                    plMWrap = $('.pl-m'),
                    plMOverlay = $('.pl-m-overlay'),
                    plMLoginFrm = $('#pl_frmMlogin'),
                    plMRegFrm = $('#pl_frmMRegister'),
                    plMLoading = $('.pl-loading'),
                    plMCloseBtn = $('.pl-m-close'),
                    plMShowRegBtn = $('#pl_showRegForm'),
                    plMShowLoginBtn = $('#pl_showLoginForm'),
                    plMLoginSubmitUrl = 'pl-module/public/login.php',
                    plMRegisterSubmitUrl = 'pl-module/public/register.php',
                    plActiveForm = plMLoginFrm,
                    plSubmitUrl = plMLoginSubmitUrl;

                // -----------------------------------------------
                // SHOW MODAL WINDOW AND DEFAULT FORM
                // -----------------------------------------------
                $(plMWrap).fadeIn('fast');
                $(plMOverlay).fadeIn('fast');
                $(plActiveForm).fadeIn('fast');

                // -----------------------------------------------
                // CLOSE MODAL WINDOW ON BTN CLICK
                // -----------------------------------------------
                $(plMCloseBtn).click(function(e) {
                    e.preventDefault();
                    $(plMWrap).fadeOut('fast', function() {
                        $(plMOverlay).fadeOut('fast', function() {
                            $(plMContainer).remove();
                        });
                    });
                });

                // -----------------------------------------------
                // CLOSE MODAL WINDOW ON OVERLAY CLICK
                // -----------------------------------------------
                $(plMOverlay).click(function() {
                    $(plMWrap).fadeOut('fast', function() {
                        $(this).fadeOut('fast', function() {
                            $(plMContainer).remove();
                        });
                    });
                });

                // -----------------------------------------------
                // SWITCH TO REGISTRATION FORM
                // -----------------------------------------------
                $(plMShowRegBtn).click(function(e) {
                    e.preventDefault();
                    plResetForm();
                    $(plMLoginFrm).slideUp('fast', function() {
                        $(plMRegFrm).slideDown('fast', function(){
                            // set active form to registration
                            plActiveForm = plMRegFrm;
                            plSubmitUrl = plMRegisterSubmitUrl;
                        });
                    });
                });

                // -----------------------------------------------
                // SWITCH TO LOGIN FORM
                // -----------------------------------------------
                $(plMShowLoginBtn).click(function(e) {
                    e.preventDefault();
                    plResetForm();
                    $(plMRegFrm).slideUp('fast', function() {
                        $(plMLoginFrm).slideDown('fast', function(){
                            // set active form to login
                            plActiveForm = plMLoginFrm;
                            plSubmitUrl = plMLoginSubmitUrl;
                        });
                    });
                });

                // -----------------------------------------------
                // RESPONSE MESSAGES
                // -----------------------------------------------
                function plResponse(plMsg, plShowHide) {
                    var plResponse = $('.pl-response', plActiveForm);
                    if (plShowHide === true) {
                        $(plResponse).fadeIn('slow').html(plMsg);
                    } else if (plShowHide === false) {
                        $(plResponse).fadeOut('slow');
                    }
                }

                // -----------------------------------------------
                // RESET FORM BUTTON CLICK
                // -----------------------------------------------
                if (settings.plResetButton) {
                    var plResetBtn = $('.pl-reset-btn', plActiveForm);

                    $(plResetBtn).click(function (e) {
                        e.preventDefault();
                        plResetForm();
                    });
                }

                // -----------------------------------------------
                // RESET FORM FUNCTION
                // -----------------------------------------------
                function plResetForm() {
                    $('.pl-cust-response', plActiveForm).remove();
                    $('.pl-error', plActiveForm).removeClass('pl-error');
                    plResponse('', false);
                    plResetBtn.hide();
                    $(plActiveForm)[0].reset();
                }

                // -----------------------------------------------
                // FORM VALIDATION
                // -----------------------------------------------
                function plValidate() {
                    // remove custom errors if visible
                    $('.pl-cust-response', plActiveForm).remove();

                    // -----------------------------------------------
                    // CHECK - EMPTY REQUIRED FIELDS
                    // -----------------------------------------------
                    $(plActiveForm).find('.pl-required').each(function () {
                        var plEmptyCheck = $.trim($(this).val());
                        if (plEmptyCheck.length == 0) {
                            plResponse(PLLANG.MSG_03, true);
                            if (settings.plBubbleResponse) {
                                $(this).parent().append('<span class="pl-cust-response">' + PLLANG.MSG_04 + '</span>');
                                $('.pl-cust-response').fadeIn('slow');
                            }
                            $(this).addClass('pl-error');
                        } else {
                            $(this).removeClass('pl-error');
                        }
                    });

                    // -----------------------------------------------
                    // IF ERROR(S) FOUND
                    // -----------------------------------------------
                    var $errors = $('.pl-error', plActiveForm);
                    if ($errors.length > 0) {
                        if (settings.plResetButton) {
                            plResetBtn.show();
                        }
                        return false;
                    } else {
                        plResponse('', false);
                        return true;
                    }
                }

                // -----------------------------------------------
                // FORM SUBMIT
                // -----------------------------------------------
                plActiveForm.submit(function (e) {
                    e.preventDefault();

                    // if validation is ok
                    if (plValidate() === true) {
                        var plFormData = $(this).serialize();
                        plAjaxSubmit(plFormData);
                        $(plMLoading).show();
                    } else {
                        return false;
                    }
                });

                // -----------------------------------------------
                // AJAX SUBMIT FUNCTION
                // -----------------------------------------------
                function plAjaxSubmit(plFormData) {
                    $.ajax({
                        type: 'POST',
                        url: plSubmitUrl,
                        data: plFormData,
                        dataType: 'json',
                        cache: false,
                        timeout: 20000,
                        success: function (data) {
                            $.each(data, function(key, value) {
                                if (value.error == true) {
                                    // hide loading image
                                    $(plMLoading).hide();

                                    plResponse(value.msg, true);

                                    // show reset button
                                    if (settings.plResetButton) {
                                        plResetBtn.show();
                                    }
                                } else if (value.error == false) {
                                    // reset form
                                    plResetForm();

                                    // hide loading image
                                    $(plMLoading).hide();

                                    // display success message
                                    plResponse(value.msg, true);
                                }
                            });
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            plResponse(PLLANG.MSG_06, true);

                            // hide loading image
                            $(plMLoading).hide();
                        },
                        complete: function (XMLHttpRequest, status) {
                            // hide loading image
                            $(plMLoading).hide();
                        }
                    });
                }
            }
        });
    });
};
})(jQuery);

// -----------------------------------------------
// INSTANTIATE MODAL LOGIN
// -----------------------------------------------
$(document).ready(function() {
    $('.pl-m').plMlogin({
        plTooltip : true,
        plResetButton : true,
        plBubbleResponse : true
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T05:56:21.730

听起来像一个范围问题。尝试将您的“属性”声明从 ajax 成功中移到插件的主体中。举个例子：

```
$.fn.plMlogin = function (options) {
    // declare private properties here
    var plActiveForm, plMLoginFrm; // etc. 
```

并在 ajax 成功函数中，设置属性而不使它们成为本地`var`：

```
plMLoginFrm = $('#pl_frmMlogin');
plActiveForm = plMLoginFrm; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T00:20:00.080

我已经通过创建一个单独的插件来处理模式窗口并加载发送给它的文件来解决这个问题 - 非常紧凑并且是唯一需要包含在页面中的参考。表单有自己的插件来处理所有的验证和其他功能。通过模态插件触发动作将表单及其相关js注入页面，使整个操作几乎没有重量。一切都是动态添加然后删除....

# ios - 如何从另一个视图控制器修改视图控制器中的对象（使用 StoryBoards）

> ID：12326617
> 
> 赞同：1
> 
> 时间：2012-09-07T23:23:33.417
> 
> 标签：ios, uiviewcontroller, storyboard

好的，所以，对不起，如果这是一个菜鸟问题，但我是菜鸟。我想知道如何使用情节提要，如何通过单击视图 2 中的按钮来更改视图 1 中的对象（即标签的文本）？

# css - 图像滑块标题未正确对齐

> ID：12326624
> 
> 赞同：1
> 
> 时间：2012-09-07T23:24:38.320
> 
> 标签：css, image, slider, title

谁能弄清楚为什么此图像滑块上的标题无法正确对齐？我希望它与图像的长度相同。目前，左侧太长。

此外，由于图像淡入，标题太短，但随后会自行校正为适当的长度。有想法该怎么解决这个吗？

这是该页面的网址：http: [//homepages.uc.edu/~daniela8/slider/slider4/slider4.html](http://homepages.uc.edu/~daniela8/slider/slider4/slider4.html)

这是标题的css：

```
#wowslider-container1 .ws-title{
position: absolute;
bottom:0;
left: 32px;
margin-right:5px;
z-index: 50;
background-color:#000000;
color:#FFFFFF;
padding:10px 1%;
width:78%;
font-family: "Myriad Pro", Arial, "Franklin Gothic Medium";
font-size: 14px;
opacity:0.55;
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=55); 
}
#wowslider-container1 .ws-title div{
padding-top:5px;
font-size: 12px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:12:17.597

这是我能想到的：

```
.ws-title {
    display: block;
    padding-left: 54px;
    padding-right: 54px;
    position: absolute;
} 
```

我对其进行了测试，上面的代码似乎已经对齐了标题。`padding-left`您可以根据需要更改和的值来进行更多实验`padding-right`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T23:42:53.543

```
left: 32px;
width:78%; 
```

减小宽度，增加左边距

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:14:17.740

我同意前面的 2 个答案，但我认为问题的根源在于图像本身。他们都有一个空白的左边距，例如； [http://homepages.uc.edu/~daniela8/slider/slider4/data1/images/frog.jpg](http://homepages.uc.edu/~daniela8/slider/slider4/data1/images/frog.jpg)

标题从图像的开头开始，但图像本身有填充。

# java - JAVA::CORBA NameComponent nameService.rebind 导致异常 java.lang.NullPointerException

> ID：12326632
> 
> 赞同：1
> 
> 时间：2012-09-07T23:25:48.717
> 
> 标签：java, corba

我得到了以下我正在尝试调试的 JAVA CORBA 服务器代码。

代码片段（不是所有代码）如下。代码运行没有任何问题。但是，当我取消注释“nameService.rebind(countName”时，我得到以下异常：

java.lang.NullPointerException

在我看来，这个问题与 countName 数组有关。知道什么会导致异常吗？

// 在命名服务中绑定 Count 对象

```
 NameComponent[] countName = new NameComponent [1000];
  for(int i=1;i<1000;i++){
      countName[i] = new NameComponent ("+i+", "");
  }
 // nameService.rebind(countName, 
 //         myPOA.servant_to_reference(countServant));

  System.out.println(myPOA.servant_to_reference(countServant)
        + " is ready."); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:08:15.227

您的 NameComponent[0] 在这里为 NULL。将代码更改为

```
NameComponent[] countName = new NameComponent [1000];
  for(int i=0;i<1000;i++){
      countName[i] = new NameComponent ("+i+", "");
  } 
```

在您的代码中，您从 1 开始循环，但您应该从 0 开始

# css - CSS 不会在 IE8 中加载

> ID：12326634
> 
> 赞同：3
> 
> 时间：2012-09-07T23:25:53.170
> 
> 标签：css, wordpress, internet-explorer-8

我在 IE8 加载我的子主题 CSS 时遇到问题。它会在主页 (hazelhomemaker.com) 上加载 Google 字体和我的其他自定义 CSS，但不会在我的辅助页面上加载面包屑或 Google 字体的 CSS 设置：hazelhomemaker.com/about 和 hazelhomemaker.com/接触。在页脚小部件中，链接被编码为没有下划线，但它们在主页和辅助页面上以这种方式显示。？？？

我在 Wordpress 中使用 Headway 主题。这个问题已经被几个不同的开发人员解决了几天，没有人能弄清楚。因此，如果这里有人可以，那么您在我的书中确实很出色。

我们已经排除了插件冲突。我们已尽我们所能排除了 CSS 编码错误。Headway 坚持认为这对他们来说不是问题。我已经黔驴技穷了。

帮助将不胜感激。

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:54:04.840

您可以尝试将其强制加载到标题中吗？

```
<!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" media="all" href="http://hazelhomemaker.com/wp-content/themes/headway-schematic/style.css" />
<![endif]--> 
```

# ruby-on-rails - 分享给章鱼出版社？

> ID：12326637
> 
> 赞同：2
> 
> 时间：2012-09-07T23:26:50.573
> 
> 标签：ruby-on-rails

我想使用一种简单的方法在 octopress 上写博客，类似于使用[http://www.facebook.com/share_options.php在 facebook 上共享页面](http://www.facebook.com/share_options.php)

我不知道是否有任何方法可以（轻松）做到这一点？

我在想一个很酷的方法是拥有一个 chrome 扩展等，它会指向你的 octopress 目录，并会根据你共享的页面在那里生成一个新的博客文章。然后，您可以使用此骨架帖子并在必要时添加更多详细信息吗？

外面有这样的吗？

# ruby-on-rails - 在请求规范中评估 JS 时超时

> ID：12326638
> 
> 赞同：1
> 
> 时间：2012-09-07T23:26:50.800
> 
> 标签：ruby-on-rails, rspec, capybara

在我的请求规范（Webdriver 规范）中，我有以下内容：

```
page.evaluate_script("$('#open-modal').click();") 
```

它单击按钮，但一旦模式打开，它就会超时。我得到：

```
 Failure/Error: page.evaluate_script("$('#open-modal').click();")
 Timeout::Error:
   Timeout::Error 
```

它使用 Twitter Bootstrap 模式。我怎样才能让它继续执行规范/不超时？

（我不能这样做`click_on`的原因是元素在屏幕外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:04:53.810

你可以做类似的事情

```
begin
  # Your spec
rescue Timeout::Error
  puts("I failed because of a timeout error")
  assert(false)
end 
```

您可以`puts`用一些代码替换该语句，这些代码会为您的测试框架发出消息

# python - 从 Pandas.DataFrame 中的时间戳位置计算速度

> ID：12326641
> 
> 赞同：6
> 
> 时间：2012-09-07T23:27:20.807
> 
> 标签：python, time-series, pandas

我对 Pandas 很陌生，但熟悉 Numpy 和 Python。

假设我有一个按时间（日期时间）索引的 X、Y 点（float64）的“Pandas.DataFrame”，如果我已经知道如何计算点之间的欧几里德距离，我该如何计算速度？

编辑：我刚刚阅读了关于 的帮助`pandas.Series.diff()`，但我仍然想用另一个函数“替换” diff 上使用的减法，比如“euclidean_distance()”。有没有办法做到这一点？

DataFrame 看起来像（第一列中的索引，第二列中的位置）：

```
2009-08-07 16:16:44    [37.800185, -122.426361]
2009-08-07 16:16:48    [37.800214, -122.426153]
2009-08-07 16:16:49    [37.800222, -122.426118]
2009-08-07 16:16:52    [37.800197, -122.426072]
2009-08-07 16:17:32    [37.800214, -122.425903]
2009-08-07 16:17:34    [37.800236, -122.425826]
2009-08-07 16:17:40    [37.800282, -122.425534]
2009-08-07 16:17:44    [37.800307, -122.425315]
2009-08-07 16:17:46    [37.800324, -122.425207]
2009-08-07 16:17:47    [37.800331, -122.425153]
2009-08-07 16:17:49    [37.800343, -122.425047]
2009-08-07 16:17:50    [37.800355, -122.424994]
2009-08-07 16:17:51    [37.800362, -122.424942]
2009-08-07 16:17:54    [37.800378, -122.424796]
2009-08-07 16:17:56    [37.800357, -122.424764] 
```

我想要的是某种从中获得速度的方法，提供第一个数据样本的速度根据定义始终为零（前一个样本中没有已知的时间增量）。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T00:42:02.103

像这样的东西会起作用吗？

```
In [99]: df
Out[99]: 
                            X         Y
2009-08-07 00:00:00 -0.900602 -1.107547
2009-08-07 01:00:00  0.398914  1.545534
2009-08-07 02:00:00 -0.429100  2.052242
2009-08-07 03:00:00  0.857940 -0.348118
2009-08-07 04:00:00  0.394655 -1.578197
2009-08-07 05:00:00 -0.240995 -1.474097
2009-08-07 06:00:00  0.619148 -0.040635
2009-08-07 07:00:00 -1.403177 -0.187540
2009-08-07 08:00:00 -0.360626 -0.399728
2009-08-07 09:00:00  0.179741 -2.709712

In [100]: df['Time'] = df.index.asi8

In [101]: dist = df.diff().fillna(0.)

In [102]: dist['Dist'] = np.sqrt(dist.X**2 + dist.Y**2)

In [103]: dist['Speed'] = dist.Dist / (dist.Time / 1e9)

In [104]: dist
Out[104]: 
                            X         Y          Time      Dist     Speed
2009-08-07 00:00:00  0.000000  0.000000  0.000000e+00  0.000000       NaN
2009-08-07 01:00:00  1.299516  2.653081  3.600000e+12  2.954248  0.000821
2009-08-07 02:00:00 -0.828013  0.506708  3.600000e+12  0.970752  0.000270
2009-08-07 03:00:00  1.287040 -2.400360  3.600000e+12  2.723637  0.000757
2009-08-07 04:00:00 -0.463285 -1.230079  3.600000e+12  1.314430  0.000365
2009-08-07 05:00:00 -0.635650  0.104100  3.600000e+12  0.644118  0.000179
2009-08-07 06:00:00  0.860143  1.433462  3.600000e+12  1.671724  0.000464
2009-08-07 07:00:00 -2.022324 -0.146906  3.600000e+12  2.027653  0.000563
2009-08-07 08:00:00  1.042550 -0.212188  3.600000e+12  1.063924  0.000296
2009-08-07 09:00:00  0.540367 -2.309984  3.600000e+12  2.372345  0.000659 
```

# c# - Windows 7 中的扩展 dll 版本号

> ID：12326643
> 
> 赞同：3
> 
> 时间：2012-09-07T23:27:37.860
> 
> 标签：c#, asp.net, windows-7

我正在尝试验证我的最新 dll 是否已部署到测试环境。

当我右键单击 dll --> 属性，然后单击详细信息选项卡时，产品版本如下所示。

![在此处输入图像描述](../Images/87d22a42bce6f876f51c8e00f05afc1f.png)

不过从公司的测试环境诊断页面版本号看是：1.6.0.28117

如何在 Windows 7 中查看此扩展的 dll 版本号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:10:26.983

这个 Windows 资源管理器扩展对我有用。

[http://powerext.codeplex.com/](http://powerext.codeplex.com/)

# javascript - 如何正确使用带有熨斗的 nconf

> ID：12326644
> 
> 赞同：3
> 
> 时间：2012-09-07T23:27:41.750
> 
> 标签：javascript, node.js, configuration, flatiron.js

我正在尝试使用 flatiron 构建一个小框架。我想使用 nconf 加载我的所有配置文件，以便它们在我的应用程序的任何地方都可用。在我的根目录中，我有我的 app.js，我想从 config/bootstrap.js 中提取配置数据。

配置/配置/js

```
module.exports =
  { 'app' :
    { "host"   : "localhost"
    , "port"   : process.env.port || 3000
    }
  } 
```

bootstrap.js：

```
var nconf   = require('nconf')
  // database config
  , dsource = require('./datasource')
  // general or user config
  , config  = require('./config')

// allow overrides
nconf.overrides({
  'always': 'be this value'
});

// add env vars and args
nconf.env().argv();

// load in configs from the config files
var defaults = {}
  // so we can iterate over each config file
  , confs = [dsource, config]

// for every config file
confs.forEach(function(conf)
{
  // get each key
  for (var key in conf)
  {
    // and add it to the defaults object
    defaults[key] = conf[key]
  }
})
// save the defaults object
nconf.defaults(defaults)

// logging this here works and properly shows the port setting
console.log('app port : ' + nconf.get('app:port'))

module.exports = nconf 
```

所以当控制台从文件中登录时。一切似乎都很好。但是当我尝试导出它，并从 app.js 要求它作为 conf.get('app:port') 它不起作用。

app.js（只是'flatiron create app'中的香草app.js）

```
var flatiron = require('flatiron')
  , app = flatiron.app
  , path = require('path')
  , conf = require('./config/bootstrap')

app.config.file({ file: path.join(__dirname, 'config', 'config.json') });

app.use(flatiron.plugins.http);

app.router.get('/', function () {
  this.res.json({ 'hello': 'world' })
});

// this doesnt work, conf
app.start(conf.get('app:port')); 
```

那么我怎样才能让它正常工作，以便在我的应用程序的任何地方都可以使用配置。理想情况下，我希望能够从任何地方获得配置，例如`app.config`

这是使用 nconf 的最佳方式吗？我似乎找不到很多例子。我看到的所有这些都只是从实际的 nconfig 示例文件中提取配置信息。不是来自文件外部的任何地方`app.config`

还是我没有正确使用它？有没有更好的方法来做到这一点。理想情况下，我想使用这个引导文件来加载我的所有配置，以及资源/视图（RVP 风格的应用程序），这样它就全部加载了。

这是我对布局的总体想法，对于一个想法

```
|-- conf/
|   |-- bootstrap.js
|   |-- config.js
|-- resources
|   |-- creature.js
|-- views/
|-- presenters/
|-- app.js
|-- package.json 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:33:59.380

您的配置可从您可以访问应用程序的任何地方获得，如下所示：

```
app.config.get('google-maps-api-key') 
```

如果你像这样加载它：

```
app.config.file({ file: path.join(__dirname, 'config', 'config.json') }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:37:49.740

这是加载 JSON 配置的正确方法：

```
nconf.use('file', {
  file: process.cwd() + '/config.ini'
, format: nconf.formats.json
}); 
```

# ios - facebook ios sdk 2.0 于 2012 年 9 月 7 日停止工作？

> ID：12326645
> 
> 赞同：3
> 
> 时间：2012-09-07T23:27:48.827
> 
> 标签：ios, facebook-graph-api

我们正在使用带有 oauth 对话框的 ios sdk 2.0。直到最后几个小时，一切似乎都运行良好。

对话框出现并提示输入 facebook uname/pword，提交后返回的页面显示....“找不到您请求的页面”“返回上一页”链接大部分时间没有任何作用，尽管有几次我们收到错误代码 100。

该应用程序要求提供 publish_stream 和电子邮件权限。

sdk 2.0 完全弃用了吗？

此外，我们一直在通过应用发布一些帖子，有时会删除帖子或应用。我们如何才能发现 facebook 正在过滤我们的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:04:29.613

转到 Facebook 应用程序的设置，单击“高级”，然后在“身份验证”部分选择“桌面/本地”单选按钮。

# jquery - Smooth Div Scroll Left Hot Spot 显示光标，但不滚动且向右过快

> ID：12326646
> 
> 赞同：2
> 
> 时间：2012-09-07T23:27:50.707
> 
> 标签：jquery, jquery-plugins, smooth-scrolling

因此，我将 Thomas Kahn 的 Smooth Div Scroll 实现到了 Wordpress 主题中，并且使用 Zenfolio 插件来显示来自 Zenfolio 画廊的滚动图像。Zenfolio 插件似乎工作正常，但 Smooth Div Scroll 似乎无法正常工作。它的自动滚动很好，但左边的热点出现了，但没有响应，右边的热点使滚动速度过快。你可以检查代码，但我的设置真的很慢，它不应该移动得那么快。

这是我正在使用的代码：

HTML：

```
<div id="feature-slideshow">
<div id="makeMeScrollable">
    <img src="http://wiltonphotography.zenfolio.com/img/s11/v27/p1106836720-4.jpg?sn="  class="portfolio-img">
    <img src="http://wiltonphotography.zenfolio.com/img/s1/v55/p1106836968-4.jpg?sn="  class="portfolio-img">
    <img src="http://wiltonphotography.zenfolio.com/img/s2/v58/p1106833686-4.jpg?sn="  class="portfolio-img">
    <img src="http://wiltonphotography.zenfolio.com/img/s1/v55/p1106834346-4.jpg?sn="  class="portfolio-img">
    <img src="http://wiltonphotography.zenfolio.com/img/s4/v62/p1106834158-4.jpg?sn="  class="portfolio-img">
    <img src="http://wiltonphotography.zenfolio.com/img/s2/v61/p1106834196-4.jpg?sn="  class="portfolio-img">
    <img src="http://wiltonphotography.zenfolio.com/img/s2/v58/p1106834786-4.jpg?sn="  class="portfolio-img">
    <!-- /zfp_photoset -->
</div>
</div> 
```

CSS：

```
#makeMeScrollable { width:100%; height: 630px; position: relative; }
#makeMeScrollable div.scrollableArea img { display: none; position: relative; float: left; margin: 0; padding: 0 50px 0 0; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none; user-select: none; }
#makeMeScrollable div.scrollableArea img:first-child { padding-left: 340px; }

/* Invisible left hotspot */
div.scrollingHotSpotLeft { min-width: 50px; width: 10%; height: 100%; background-image: url(img/big_transparent.gif); background-repeat: repeat; background-position: center center; position: absolute; z-index: 200; left: 0; cursor: url(img/cursors/cursor_arrow_left.png), url(img/cursors/cursor_arrow_left.cur),w-resize; }

/* Visible left hotspot */
div.scrollingHotSpotLeftVisible { background-image: url(img/arrow_left.gif); background-color: #fff; background-repeat: no-repeat; opacity: 0.35; -moz-opacity: 0.35; filter: alpha(opacity = 35); zoom: 1; }

/* Invisible right hotspot */
div.scrollingHotSpotRight { min-width: 50px; width: 10%; height: 100%; background-image: url(img/big_transparent.gif); background-repeat: repeat; background-position: center center; position: absolute; z-index: 200; right: 0; cursor: url(img/cursors/cursor_arrow_right.png), url(img/cursors/cursor_arrow_right.cur),e-resize; }

/* Visible right hotspot */
div.scrollingHotSpotRightVisible { background-image: url(img/arrow_right.gif); background-color: #fff; background-repeat: no-repeat; opacity: 0.35; -moz-opacity: 0.35; filter: alpha(opacity = 35); zoom: 1; }

div.scrollWrapper { position: relative; overflow: hidden; width: 100%; height: 100%; }
div.scrollableArea { position: relative; width: auto; height: 100%; } 
```

JS：

```
<script src="<?php echo get_template_directory_uri(); ?>/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
<script src="<?php echo get_template_directory_uri(); ?>/js/jquery.mousewheel.min.js" type="text/javascript"></script>
<script src="<?php echo get_template_directory_uri(); ?>/js/jquery.smoothdivscroll-1.2-min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        // None of the options are set
        $("div#makeMeScrollable").smoothDivScroll({
            mousewheelScrolling: true,
            hotSpotScrollingStep: 5,
            visibleHotSpotBackgrounds: "",
            autoScrollingMode: "onstart"
        });
    });
</script> 
```

你可以在这里看到问题：traviswilton.com

谁能看到我哪里出错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:26:28.700

事实证明，Smooth Div Scroll jQuery 与我使用的 Google CSS3 Media Queries JS 的交互很差。我尝试更改级联顺序，但似乎没有用。对于这个站点，CSS3 Media Queries JS 不是必需的，所以我只是将其剥离，它 Smooth Div Scroll 工作正常。

这不是一个大问题，但如果 Smooth Div Scroll 或 CSS3 Media Queries 解决它会很好。

# cassandra - 在 cqlsh 中禁用颜色

> ID：12326648
> 
> 赞同：9
> 
> 时间：2012-09-07T23:28:24.320
> 
> 标签：cassandra, cql

cqlsh 是 Apache Cassandra 的 CQL 命令提示符，被编程为在查询结果中显示颜色。有没有一种简单的方法可以在 cqlsh 中禁用颜色？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-02T14:38:57.337

要禁用颜色输出，请使用 ./bin/cqlsh --no-color

参考

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T23:58:35.237

只是`$TERM`设置了不支持颜色的东西。例如，

```
~$ TERM=dumb cqlsh 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T21:56:10.770

似乎虽然有一个`--color`选项，但它没有提供禁用颜色的方法，所以我打开了[CASSANDRA-4634](https://issues.apache.org/jira/browse/CASSANDRA-4634)来解决这个问题。

附带说明一下，如果`--file`使用该选项，颜色将被禁用，以防您担心。

# selecteditem - Radiobuttonlist selecteditem 始终为空

> ID：12326650
> 
> 赞同：1
> 
> 时间：2012-09-07T23:28:59.357
> 
> 标签：selecteditem, radiobuttonlist

测验项目，一个问题有一个单选按钮列表，其中包含 2 个项目（T/F）或 4 个项目（a、b、c、d）问题的数量各不相同。面板用于一次仅显示一个问题（显示/隐藏）。回答完所有问题后，用户单击提交按钮，所有答案都应保存在数据库中。在 selecteditem 后面的代码中始终为 null 并且 value 始终为空字符串。

```
<asp:DataList ID="dtQuestion" runat="server" RepeatDirection="Vertical" OnItemDataBound="FormatDataListRow" >
        <ItemTemplate>
            <asp:Panel id="panel" runat="server" BorderColor="#536895" BorderStyle="Solid" BorderWidth="1" style="display: none;" EnableViewState="true">
                <asp:Label id="lblQuestionDesc" runat="server" Text="" ></asp:Label>
                <asp:RadioButtonList id="rbl" runat="server" EnableViewState="true" >    </asp:RadioButtonList>
                </asp:Panel>
            </ItemTemplate>                
</asp:DataList> 
```

在提交点击。我调用了一个在页面上搜索 RBL 的函数，我可以看到它们的正确 ID 和列表项，但没有选择任何内容。

```
 string id;
       if     (c.GetType().ToString().Equals("System.Web.UI.WebControls.RadioButtonList"))
               {
                   if (c.ID != "rbl")
                   {
                    id = c.ID;
                    al.Add(id + "," + ((RadioButtonList)c).SelectedItem.Value); //SelectedValue);  //
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T18:24:38.873

似乎您正在页面加载时填充 RadioButtonList - 如果是这样 - 请确保您使用 If/Then/Postback 块围绕 RadioButtonList 的填充：如果不是 Page.IsPostBack then ' 填充您的 RBL end if

例如：

```
 if (!IsPostBack)
        {
            loadradiobuttonlist();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:20:28.183

Try accessing the submitted value like this:

```
this.Request.Form[((RadioButtonList)c).UniqueID] 
```

During debugging you can always check what values you've got in `this.Request.Form` collection.

# c# - 在 svc 中使用带有逻辑的 asmx 文件的 Windows azure wcf 问题

> ID：12326651
> 
> 赞同：1
> 
> 时间：2012-09-07T23:29:01.743
> 
> 标签：c#, wcf, azure, asmx, svc

目前在公司有一个在 Windows azure 中运行的服务，我做了一些需要投入生产的更改，但是当我在 Azure 模拟器中运行该服务时，该服务无法正常工作。

在 Visual Studio 解决方案中，它看起来类似于以下内容：

> Service1.svc.cs //<-- 包含所有实现的方法
> Service1.svc
> Service1.asmx //<-- 使用Service1.svc.cs中的逻辑

我的问题是，如果我不使用 windows azure 运行它，它可以完美运行，但是如果我从 windows azure 模拟器运行它，它就不能正常工作，结果会在另一个窗口中使用不同的端口打开。

例如，如果我在以下地址调用方法：

```
http://127.0.0.1:81/Service1.asmx 
```

当我执行该方法时，它返回如下内容：

```
http://127.0.0.1:82/Service1.asmx/CurrentVersion 
```

我读到，对于以前的版本，WCF 和负载均衡器存在问题，但在这种情况下，我使用的是 .NET 4.0 和 Azure 1.7。

在 web.config 中，我还添加了一些配置，其他论坛说它可以解决平衡器的问题。

```
<behaviors>
      <serviceBehaviors>
        <behavior name="DefaultServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <!-- Test from microsoft -->
          <useRequestHeadersForMetadataAddress>
            <defaultPorts>
              <add scheme="http" port="81" />
              <add scheme="https" port="444" />
            </defaultPorts>
          </useRequestHeadersForMetadataAddress>
        </behavior>
      </serviceBehaviors>
    </behaviors> 
```

有谁知道我应该如何解决这个问题？

下面是我的代码示例：

```
 public class Service1 : IService1
 {
     public string CurrentVersion(string accountcode)
     {
         SiteServiceConfiguration sitecfg = GetSiteServiceConfiguration(accountcode);
         return sitecfg.CurrentVersion;
     }
 }

[ServiceContract]
[WebService(Name = "Service1")]
[WebServiceBinding(Name = "ServiceSoap1", ConformsTo = WsiProfiles.BasicProfile1_1, EmitConformanceClaims = false)]
public interface IService1
{
    [OperationContract]
    [WebMethod]
    string CurrentVersion(string accountcode);
} 
```

其他信息：

这个 web 服务是从一个用 .NET 1.1 编写的应用程序调用的，而它升级到了一个更新的版本，我需要让这个服务工作。

# functional-programming - 顶级函数私下共享一个范围

> ID：12326656
> 
> 赞同：3
> 
> 时间：2012-09-07T23:29:47.547
> 
> 标签：functional-programming, scheme

在方案中，可以使用`set!`创建两个（或更多）函数，它们之间共享一个私有范围：

```
(define f1 #f) ; or any other "undefined" value
(define f2 #f)

(let ((private some-value) (another-private some-other-value))
  (set! f1 (lambda ... <use of private variables> ...))
  (set! f2 (lambda ... <use of private variables> ...))) 
```

或通过使用第三个变量：

```
(define functions
  (let ((private some-value) (another-private some-other-value))
    (list (lambda ... <use of private variables> ...)
          (lambda ... <use of private variables> ...))))

(define f1 (car functions))
(define f2 (cadr functions)) 
```

然而，由于`set!`在第一个和第二个中使用了剩余变量，这两个似乎都不优雅`functions`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T00:11:08.587

```
(define-values (f1 f2)
  (let ((private values) ...)
    (values (lambda ...)
            (lambda ...)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:02:21.007

并非每个方案实现都提供定义值。计划者 wiki 上有一个宏定义：

```
(define-syntax define-values 
  (syntax-rules () 
    ((define-values () exp) 
     (call-with-values (lambda () exp) (lambda () 'unspecified))) 
    ((define-values (var . vars) exp) 
     (begin  
       (define var (call-with-values (lambda () exp) list)) 
       (define-values vars (apply values (cdr var))) 
       (define var (car var)))) 
    ((define-values var exp) 
     (define var (call-with-values (lambda () exp) list))))) 
```

[http://community.schemewiki.org/?scheme-faq-macros](http://community.schemewiki.org/?scheme-faq-macros)

# jquery - jQuery 克隆链式选择

> ID：12326661
> 
> 赞同：4
> 
> 时间：2012-09-07T23:30:22.907
> 
> 标签：jquery, select, clone, chained

我刚从：[http://jsfiddle.net/FJFFJ/1/](http://jsfiddle.net/FJFFJ/1/)开始 （由[Chain 使用 JQuery 动态创建的下拉菜单](https://stackoverflow.com/q/5545229/1513125)）

这真的很好，但现在我需要改变一点：克隆最后一组选择。

IE。：

```
+-
Argentina | San Juan | Rawson
Chile     | Santiago | Chiñihue 
```

然后，如果我点击“+”，它将克隆

```
Chile | Santiago | Chiñihue 
```

而不是第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:36:55.373

这实际上是一个比我想象的更难的问题。显然，当您克隆 SELECT 元素集时，它无法更改为未显示的内容。我花了大约一个小时左右才弄清楚到底发生了什么，很好的挑战，谢谢！

我最终要做的是克隆您的模板并手动更改值并手动调用“更改”事件，以便在辅助和三元 SELECT 元素中可以使用正确的选项。

版本 1：http: [//jsfiddle.net/m4JTQ/2/](http://jsfiddle.net/m4JTQ/2/)

版本 2（这是摆脱**i**迭代器的修改版本：http: [//jsfiddle.net/Zf7xb/1/](http://jsfiddle.net/Zf7xb/1/)

这是 jsfiddle 最终消失的代码。

```
// Version 1
$(function() {

    // Iterator for the dupe ids
    var i = 0;

    $('#clone').click(function() {
        // put the clone() into cloned
        var cloned = $('#template').clone();

        // Add .dupe class to cloned
        $(cloned).addClass('dupe');

        // Set the id of cloned, use i++ instead of incrementing it elsewhere.
        $(cloned).attr('id', 'duplicate'+ i++);

        // Append cloned to #filter
        $(cloned).appendTo('#filter');

        // Passing selector rather than iteration                   
        chainItWithId($(cloned));

        // If this is NOT the first addition, do some kludge
        if ($('#filter div.dupe').length!==1) {
            // Set the previous clone to lastClone
            var lastClone = $(cloned).siblings('div.dupe:last');

            // Set the value of .pais to the value of the previous .pais
            $(cloned).find('.pais').val($(lastClone).find('.pais').val());
            // Do the "change" event manually.
            $(cloned).find('.pais').change();

            // Set the value of .provincia to the value of the previous .provincia
            $(cloned).find('.provincia').val($(lastClone).find('.provincia').val());
            // Do the "change" event manually
            $(cloned).find('.provincia').change();

            // Set the value of .ciudad to the value of the previous .cudad
            $(cloned).find('.ciudad').val($(lastClone).find('.ciudad').val());

        }

        // Show the hidden div
        $('#filter div:hidden').show();

    });
    $('#remove').click(function() {
        // Remove all but the very last set of options
        if ($('#filter > div').length > 1) {
            $('#filter > div').last().remove();
        }
    });

    // Manually do the "click" event
    $('#clone').click();
});

// Here I'm getting the cloned full selector
function chainItWithId(cloned) {
    // Chain .provincia to .pais in the current clone
    $(cloned).find('.provincia').chained($(cloned).find('.pais'));
    // Chain .ciudad to .provincia in the current clone
    $(cloned).find('.ciudad').chained($(cloned).find('.provincia'));
} 
```

* * *

在这个版本中没有**i**迭代器，它更干净一些。

```
// Version 2
$(function() {

    $('#clone').click(function() {
        // put the clone() into cloned
        var cloned = $('#template').clone();

        // Add .dupe class to cloned
        $(cloned).addClass('dupe');

        // Set the id to the count of div.dupe elements in #filter
        // This will increment 0,1,2,3 as you add elements.
        $(cloned).attr('id', 'duplicate'+ $('#filter div.dupe').length);

        // Append cloned to #filter
        $(cloned).appendTo('#filter');

        // Passing selector rather than iteration                    
        chainItWithId($(cloned));

        // If this is NOT the first addition, do some kludge
        if ($('#filter div.dupe').length!==1) {
            // Set the previous clone to lastClone
            var lastClone = $(cloned).siblings('div.dupe:last');

            // Set the value of .pais to the value of the previous .pais
            $(cloned).find('.pais').val($(lastClone).find('.pais').val());
            // Do the "change" event manually.
            $(cloned).find('.pais').change();

            // Set the value of .provincia to the value of the previous .provincia
            $(cloned).find('.provincia').val($(lastClone).find('.provincia').val());
            // Do the "change" event manually
            $(cloned).find('.provincia').change();

            // Set the value of .ciudad to the value of the previous .cudad
            $(cloned).find('.ciudad').val($(lastClone).find('.ciudad').val());

        }

        // Show the hidden div
        $('#filter div:hidden').show();

    });
    $('#remove').click(function() {
        // Remove all but the very last set of options
        if ($('#filter > div').length > 1) {
            $('#filter > div').last().remove();
        }
    });

    // Manually do the "click" event
    $('#clone').click();
});

// Here I'm getting the cloned full selector
function chainItWithId(cloned) {
    // Chain .provincia to .pais in the current clone
    $(cloned).find('.provincia').chained($(cloned).find('.pais'));
    // Chain .ciudad to .provincia in the current clone
    $(cloned).find('.ciudad').chained($(cloned).find('.provincia'));
} 
```

# asp.net - 为什么我的文本框在我提交时无法识别值已更改？

> ID：12326662
> 
> 赞同：4
> 
> 时间：2012-09-07T23:30:23.133
> 
> 标签：asp.net, linq

当我的页面加载时，它会在数据库中查询一些值并用它们填充一些文本框：

```
protected void Page_Load(object sender, EventArgs e)
{
    tadbDataContext tadb = new tadbDataContext();
    Dictionary<string, string> hexColors = tadb.msp_silentAuctionColors.ToDictionary(t => t.colorDescription, t => t.colorValue);

    tbTextColor.Text = hexColors["textColor"];
    tbAltColor.Text = hexColors["altColor"];
    tbBackgroundColor.Text = hexColors["backgroundColor"];
} 
```

然后我更改值并尝试通过单击执行以下操作的按钮重新提交到数据库：

```
using (tadbDataContext tadb = new tadbDataContext())
{
    var textColor = tadb.msp_silentAuctionColors.Single(x => x.colorDescription == "textColor");

    var altColor = tadb.msp_silentAuctionColors.Single(x => x.colorDescription == "altColor");
    var backgroundColor = tadb.msp_silentAuctionColors.Single(x => x.colorDescription == "backgroundColor");

    textColor.colorValue = tbTextColor.Text;
    altColor.colorValue = tbAltColor.Text;
    backgroundColor.colorValue = tbBackgroundColor.Text;

    tadb.SubmitChanges();
} 
```

回发的值是原始（不是更改的）值。如果我注释掉加载时填充文本框的行，它可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T23:32:27.300

那是因为您没有将数据绑定内容包装在`IsPostBack`-check in 中`Page_Load`。因此，您总是用数据库中的旧值覆盖更改的值。

所以你只需要这样做：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        tadbDataContext tadb = new tadbDataContext();
        Dictionary<string, string> hexColors = tadb.msp_silentAuctionColors.ToDictionary(t => t.colorDescription, t => t.colorValue);

        tbTextColor.Text = hexColors["textColor"];
        tbAltColor.Text = hexColors["altColor"];
        tbBackgroundColor.Text = hexColors["backgroundColor"];
    }
} 
```

# asp.net - Windows 2008 R2 上的 AJax 和 minifier，我要安装在服务器端吗？

> ID：12326674
> 
> 赞同：1
> 
> 时间：2012-09-07T23:32:44.120
> 
> 标签：asp.net, ajaxcontroltoolkit

我有一个在带有 Ajax 面板的 windows 2003 环境中运行良好的应用程序，检查当我将此应用程序移动到新的 windows 2008 服务器 R2 时，是否需要安装 Ajax 工具包，然后再安装 Ajax minifier？

谢谢，

# php - jQuery 服务器/浏览器税费和闪烁

> ID：12326686
> 
> 赞同：3
> 
> 时间：2012-09-07T23:34:47.317
> 
> 标签：php, jquery, ajax, webserver

我在一个正在构建的新门户网站的几个页面上有一些这样的内容，我想知道在服务器/客户端浏览器上拥有以下内容是多么的繁重：

```
$(document).ready(function(){
  var refreshId = setInterval(function() {
    $("#passed_views").load('counter_passed.php');
  }, 500);
  $.ajaxSetup({ cache: false });
}); 
```

此外，它似乎在 Chrome 中闪烁...有没有更好的方法来激活这样的侦听器？

任何帮助 - 非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:57:17.160

我有一个每 60 秒运行一次 ajax 的脚本，典型用户从它触发到它得到响应的时间有 1-3 秒的延迟，一些用户会达到 10 秒等。我要做的是在发送另一个请求之前验证您从先前的 ajax 调用中取回了数据，这样它就不会排队一堆请求。这样你甚至可以不使用设定的时间，只需使用一个循环来调用脚本，每次它从上一个调用中获得返回，这样时间慢的人会说相隔 5 秒，而负载较快的人会得到 1 秒分开。

# node.js - Node.JS 抓取编码？

> ID：12326688
> 
> 赞同：15
> 
> 时间：2012-09-07T23:35:16.307
> 
> 标签：node.js, unicode, encoding

我正在使用 Node.JS 中的[这个请求库来获取](https://github.com/mikeal/request)[这个页面，并使用](http://www.relaisentrecote.fr/)[Cheerio](https://github.com/MatthewMueller/cheerio)解析正文。

调用`$.html()`解析后的响应正文显示页面的标题属性是：

```
<title>Le Relais de l'Entrec?te</title> 
```

...应该是什么时候：

```
<title>Le Relais de l'Entrecôte</title> 
```

我尝试将请求库的选项设置为 include `encoding: 'utf8'`，但这似乎并没有改变任何东西。

如何保留这些字符？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-09-10T06:27:08.570

您可以使用[iconv](https://npmjs.org/package/iconv)（或更好[的 iconv-lite](https://npmjs.org/package/iconv-lite)）进行转换本身，但要检测编码，您应该检查[charset](https://github.com/fengmk2/charset)和[jschardet](https://github.com/aadsm/jschardet)模块。这是他们两个在行动的例子：

```
var charset = require('charset'),
    jschardet = require('jschardet'),
    Iconv = require('iconv').Iconv;

request.get({url: 'http://www.example.com', encoding: 'binary'}, function(err, res, body) {
    var enc = charset(res.headers, body) || jschardet.detect(body).encoding.toLowerCase();

    if(enc !== 'utf8') {
        var iconv = new Iconv(enc, 'UTF-8//TRANSLIT//IGNORE');
        body = iconv.convert(new Buffer(body, 'binary')).toString('utf8');
    }

    console.log(body);
}); 
```

* * *

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-08T00:37:56.533

该页面似乎使用 iso-8859-1 编码。你需要告诉你通过传递和使用类似[node-iconv](https://github.com/bnoordhuis/node-iconv)的东西来转换它来`request`交回一个未编码的缓冲区。`encoding: null`

如果您正在编写通用爬虫，则必须弄清楚如何检测遇到的每个页面的编码以正确解码，否则以下内容应该适用于您的情况：

```
var request = require('request');                                               
var iconv = require('iconv');                                                   

request.get({                                                                   
  url: 'http://www.relaisentrecote.fr',                                         
  encoding: null,                                                               
}, function(err, res, body) {                                                   
  var ic = new iconv.Iconv('iso-8859-1', 'utf-8');                              
  var buf = ic.convert(body);                                                   
  var utf8String = buf.toString('utf-8');  
  // .. do something with utf8String ..                                                                             
}); 
```

# json - 在 GAE 上使用 simplejson 和 Python 2.7

> ID：12326690
> 
> 赞同：1
> 
> 时间：2012-09-07T23:35:54.153
> 
> 标签：json, google-app-engine, python-2.7, simplejson

`simplejson`与运行 Python 2.7 的谷歌应用引擎一起使用时遇到问题。

刚刚从主/从数据存储上的 Python 2.5 切换到高复制数据存储上的 Python 2.7。这曾经有效：

```
from django.utils import simplejson 
```

现在为了使用 json，我可以这样做：

```
import json 
```

但是，我需要使用`simplejson`. 这适用于 localhost 调试器，但不适用于服务器：

```
import simplejson 
```

在 GAE 上运行 Python 2.7 时如何使用这个库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T12:25:22.683

我认为 json 和 simplejson 现在是兼容的。如果你有使用 simplejson 的代码，你可以试试

```
import json as simplejson 
```

# php - 使用 PHP 简单的 HTML DOM 将隐藏的输入标记值作为字符串获取

> ID：12326691
> 
> 赞同：3
> 
> 时间：2012-09-07T23:35:56.397
> 
> 标签：php, html, dom, hidden

我正在尝试获取输入类型隐藏标记值（CAS、AH、11 等）以及 name 属性，但在运行基于 PHP 的解析器时得到的只是一个空白页面。有人知道出了什么问题吗？我已经检查了[Grabbing hidden inputs as a string (Using PHP Simple HTML DOM Parser)](https://stackoverflow.com/questions/6496220/grabbing-hidden-inputs-as-a-string-using-php-simple-html-dom-parser)但它没有帮助。

我需要遍历的html块：

```
<td valign="bottom" align="center">
<input type="hidden" value="CAS" name="College">
<input type="hidden" value="AH" name="Dept">
<input type="hidden" value="111" name="Course">
<input type="hidden" value="J1" name="Section">
<input type="hidden" value="" name="Subject">
<input type="hidden" value="" name="MtgDay">
<input type="hidden" value="" name="MtgTime"> 
```

我的解决方案什么都不显示：

```
<?php
include('simple_html_dom.php'); 

  $seed = 'https://www.bu.edu/link/bin/uiscgi_studentlink.pl/1346752597?ModuleName=univschr.pl&SearchOptionDesc=Class+Subject&SearchOptionCd=C&KeySem=20133&ViewSem=Fall+2012&Subject=&MtgDay=&MtgTime=';
  web_scrape($seed);

  function web_scrape($url)
{
    $data = new simple_html_dom();  
    $data->load_file($url);
    $nodes = $data->find("/html/body/form/center/table/tbody/tr/td[2]/input[type=hidden]");

    foreach ($nodes as $node) {
    $val = $node->value;
    echo $val;
    }

}

 ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T23:54:47.207

我尝试了代码，这对我有用，我认为您的 $data->find 不正确：

```
include('../simple_html_dom.php');

  $seed = 'https://www.bu.edu/link/bin/uiscgi_studentlink.pl/1346752597?ModuleName=univschr.pl&SearchOptionDesc=Class+Subject&SearchOptionCd=C&KeySem=20133&ViewSem=Fall+2012&Subject=&MtgDay=&MtgTime=';
  web_scrape($seed);

  function web_scrape($url)
{
   $data = file_get_html($url);
    //$data = new simple_html_dom();  
   // $data->load_file($url);
    $nodes = $data->find("input[type=hidden]");

    foreach ($nodes as $node) {
    $val = $node->value;
    echo $val . "<br />";
    }

} 
```

# ruby - 如何在可变参数列表末尾传递哈希？

> ID：12326692
> 
> 赞同：2
> 
> 时间：2012-09-07T23:35:58.973
> 
> 标签：ruby

我有一个函数，它接受一个带有可选散列的可变参数，可以作为最后一项传递：

```
def func(*args)
  options = args.last.is_a?(Hash) ? args.pop : {}
  items = args

end 
```

如果我有一个数组并且还想传递一个哈希，我将如何调用这个函数？

```
x = [ "one", "two", "three" ]
....                              
func(*x, :on => "yes")            # doesn't work, i get SyntaxError 
```

SyntaxError 消息是：

```
syntax error, unexpected tSYMBEG, expecting tAMPER
fun(*x, :on => "yes") 
```

我正在运行 ruby​​ v1.8.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:26:06.940

`*`在第一个参数之前调用它。

```
def func(*args)
  options = args.last.is_a?(Hash) ? args.pop : {}
  items = args

  puts "Options: On: #{options[:on]}, Off: #{options[:off]}\n" if options.length > 0
  p args
end

func(x, 123, 'a string', {:on => "yes", :off => "no"})

# Prints:
Options: On: yes, Off: no
[["one", "two", "three"], 123, "a string"] 
```

# ruby - 我可以使用与其他 ruby 实现不同的 Ironruby 吗？

> ID：12326698
> 
> 赞同：1
> 
> 时间：2012-09-07T23:37:03.493
> 
> 标签：ruby, visual-studio

这个学期我要上红宝石课。在我的书中，它说有一个用于 VS 的 ruby​​ 实现，称为**IronRuby**。我想使用我用任何方式工作的视觉工作室。我唯一关心的是知道与其他红宝石是否有显着差异（如果有的话），以便我可以继续使用 VS2012？在课堂上，我们使用一本名为“**松本的 Ruby 编程语言**”的书

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:15:59.847

如果你只是在做书中的练习，你应该没问题。

就个人而言，我不会使用它，因为：

*   IronRuby 多年来一直没有稳定（或 alpha）版本，而且它的未来是不确定的（很少有项目活动和缺少主要开发人员）。

*   它与 MRI[不是 100% 兼容](http://www.ironruby.info/)，因此您可能会遇到奇怪的情况，尽管我无法找到更详细的 RubySpec。

*   与 Windows 相比，在类 Unix 机器上编写和测试的 Ruby 更多，因此如果您需要使用 gems，您可能会遇到在 IronRuby 中不会出现在 MRI 中的奇怪问题。

*   你应该把大部分时间花在学习上`irb`，所以 Visual Studio 并不能真正帮助你:)。（`irb`是交互式提示——您可以实时测试您的代码，而不必保存和运行[或编译]。）

# ruby - 错误：未安装 Gem 捆绑器，请先运行“gem install bundler”

> ID：12326705
> 
> 赞同：32
> 
> 时间：2012-09-07T23:38:05.723
> 
> 标签：ruby, gem

嗨，我一直在尝试安装 Ruby gem 包。收到此消息后，我按照说明`gem install bundle`进行操作，但是当我键入时它仍然不起作用`bundle -v`。我也打字

`which bundle`并收到

```
/Users/edmundmai/.rvm/bin/bundle 
```

所以它存在！那为什么不行！！我没有得到的神秘 $PATH 有什么问题吗？（我是菜鸟）。

这是我的 .bash_profile：

```
PATH=$PATH:~/bin
export PATH
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

这是我的 .bashrc ：

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

这是我的宝石环境：

```
RubyGems Environment:
- RUBYGEMS VERSION: 1.8.24
- RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin11.3.1]
- INSTALLATION DIRECTORY: /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd
- RUBY EXECUTABLE: /Users/edmundmai/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
- EXECUTABLE DIRECTORY: /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/bin
- RUBYGEMS PLATFORMS:
  - ruby
  - x86_64-darwin-11
- GEM PATHS:
   - /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd
   - /Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@global
- GEM CONFIGURATION:
   - :update_sources => true
   - :verbose => true
   - :benchmark => false
   - :backtrace => false
   - :bulk_threshold => 1000
   - "install" => "--no-rdoc --no-ri"
   - "update" => "--no-rdoc --no-ri"
- REMOTE SOURCES:
   - http://rubygems.org/ 
```

回声 $PATH

`/Users/edmundmai/.rvm/bin:/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/bin:/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/edmundmai/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/edmundmai/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/edmundmai/bin:/Users/edmundmai/bin`

更新因此，在再次尝试阅读 RoR 教程之后，我在我的两个终端窗口之一中重复了本章前面的一些步骤（我们称它们为终端 #1 和终端 #2）。终端 #2 仍然不起作用（命令行不在任何目录上，只是默认目录），而终端 #1（在我的 sample_app 目录中）工作。我想`rvm get head && rvm reload`可能是关键？但这是否意味着我每次打开终端时都必须运行它？查看我的终端 #1 之前和之后的命令（我删除了一些输出，以便更清楚我的输入行是什么）：

```
Edmunds-MacBook-Pro:sample_app edmundmai$ bundle -v
ERROR: Gem bundler is not installed, run `gem install bundler` first.
Edmunds-MacBook-Pro:sample_app edmundmai$ gem install
ERROR:  While executing gem ... (Gem::CommandLineError)
Please specify at least one gem name (e.g. gem build GEMNAME)
Edmunds-MacBook-Pro:sample_app edmundmai$ rvm -v

rvm 1.15.8 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis     <mpapis@gmail.com> [https://rvm.io/]

Edmunds-MacBook-Pro:sample_app edmundmai$ rspec spec/
No DRb server is running. Running in local process instead ...
........

Finished in 0.36709 seconds
8 examples, 0 failures

Randomized with seed 59500

Edmunds-MacBook-Pro:sample_app edmundmai$ subl .
Edmunds-MacBook-Pro:sample_app edmundmai$ bundle install --binstubs=./bundler_stubs
Using rake (0.9.2.2) 
...
...
(**list of stuff)
Using uglifier (1.2.3) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
Edmunds-MacBook-Pro:sample_app edmundmai$ bundle show bundler
/Users/edmundmai/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/bundler-1.2.0 
```

我非常不清楚 $PATH 的作用。如果你们需要更多信息，请随时告诉我，我会提供。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-08T02:56:18.663

我认为这是问题所在：您已将 bundler 安装到特定[gemset](https://rvm.io/gemsets/basics/)，这就是为什么它仅在您位于应用程序目录中时可用的原因（我假设那里有一个`.rvmrc`文件）。

你有几个选择：

1.  安装`bundler`到全局 gemset。`rvm gemset use global && gem install bundler`
2.  如果您安装了 Homebrew，请`brew install ruby`完全避免使用 rvm。（还有 rbenv 和 ry 作为 rvm 的替代品，但我在所有应用程序中只使用 1.9.3，所以 Homebrew 很好。）

作为参考，`$PATH`是一个 shell 环境变量，其中包含保存可执行文件的目录列表（例如，、、、`echo`等`ls`）`vim`。这是贝壳固有的。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-01-03T12:24:09.937

有时只是您没有正确采购 rvm，因为您不在登录 shell 中（使用屏幕？）。类型

```
    源 ~/.rvm/scripts/rvm

```

并使用任何捆绑命令。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-06T13:40:51.870

将以下行添加到`~/.bashrc`文件

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

然后重新加载文件：

```
$ source ~/.bashrc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-26T10:51:27.203

即使我有同样的问题，

在服务器 rvm 中没有被选为默认值。所以

```
rvm use 1.9.3 --default

gem install bundler 
```

解决了我的问题

（只有在使用rvm时才会出现问题）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T20:59:26.567

如果您使用的是 rvm，请创建一个单独的 gemset，它是自包含的 gem 包。

```
rvm use 1.9.3@myApplicationNameHere --create --default 
```

*   myApplicationNameHere = 将此更改为您的应用程序名称
*   create = 创建一个 gemset
*   default = 表示默认使用此版本的 ruby​​ 和 gemset

这是 rvm 网站和相关部分的链接[https://rvm.io/gemsets/basics/](https://rvm.io/gemsets/basics/)

# c# - 在 C# 中，我可以在抛出异常时执行代码吗？

> ID：12326706
> 
> 赞同：2
> 
> 时间：2012-09-07T23:38:09.017
> 
> 标签：c#, winapi, crash-reports, crash-dumps

我有一个我很难跟踪的错误。这是仅在未连接调试器时发生的情况之一:)

我已经 pinvoked MiniDumpWriteDump() 并且对于创建我可以在事后调试的 .dmp 文件非常有效。

但是，我正在做类似的事情

```
try
{
    foo();
}
catch(Exception)
{
    CreateMiniDump()
} 
```

这很好用，但是我没有得到所需的调用堆栈。我真的更喜欢在抛出异常的地方拥有调用堆栈（带有所有成员变量）。

这可能吗？是否有一种机制可以在异常中获得第一个 dibs？这样我就可以创建一个小型转储并保留调用堆栈等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:40:22.173

您可以订阅以`AppDomain.CurrentDomain.UnhandledException`获取在异常即将解除时引发的事件。当它被提升时，原始上下文仍在堆栈中。您可以将您的小型转储创建代码放在您的事件处理程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T23:42:24.410

在 .NET 4 及更高版本中，您可以订阅[FirstChanceException](http://msdn.microsoft.com/en-us/library/system.appdomain.firstchanceexception%28v=vs.100%29.aspx)事件。

# mysql - MySQL未知列问题

> ID：12326707
> 
> 赞同：1
> 
> 时间：2012-09-07T23:38:19.837
> 
> 标签：mysql, sql, database

这是我的数据库结构

[https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c](https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c)

我的 SQL 查询看起来像这样

```
SELECT
    u.fullname,
    a.id,
    a.content,
    a.addDT,
    a.`right`,
    acr.score,
    acr.checkDT
FROM
    answers a,
    users u
LEFT JOIN `answer_chk_results` acr ON acr.aid = a.id
WHERE
    a.qid = 7
AND u.id = a.uid
GROUP BY
    a.`right` DESC 
```

收到错误信息

`[Err] 1054 - Unknown column 'a.id' in 'on clause'`

我很确定 a.id 列存在

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:55:29.203

您不能将连接语法与逗号分隔的表语法混合使用。如果要左连接，则需要对其他两个表使用内连接。

```
SELECT
    u.fullname,
    a.id,
    a.content,
    a.addDT,
    a.`right`,
    acr.score,
    acr.checkDT
FROM
    answers a
    INNER JOIN users u ON u.id = a.uid
LEFT JOIN `answer_chk_results` acr ON acr.aid = a.id
WHERE
    a.qid = 7
GROUP BY
    a.`right` DESC 
```

这*也可能*有效，但不能保证：

```
SELECT
    u.fullname,
    a.id,
    a.content,
    a.addDT,
    a.`right`,
    acr.score,
    acr.checkDT
FROM
    (answers a,
    users u)
LEFT JOIN `answer_chk_results` acr ON acr.aid = a.id
WHERE
    a.qid = 7
AND u.id = a.uid
GROUP BY
    a.`right` DESC 
```

# javascript - Javascript变量使用jquery查找变量

> ID：12326719
> 
> 赞同：3
> 
> 时间：2012-09-07T23:40:09.283
> 
> 标签：javascript, jquery, html, css, variables

我用按钮做了一个[小提琴。](http://jsfiddle.net/WBLhH/50/)现在在 javascript 中，我正在尝试学习 jquery，通过这样做，我将旧小提琴从 javascript 转换为 jquery，但是我知道如何。

我的问题是，在我的名为 init 的函数中，我无法弄清楚如何转换 javascript 方式来获取一个 id 存储在变量中的 html 元素。

javascript中的旧代码：

```
var but = document.getElementById("but"); 
```

jQuery 中的新代码：

```
var but = $('#but'); 
```

我认为问题在于我从 javascript 语句开始，然后使用 jQuery。我不知道如何处理 jQuery 中的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:45:08.157

`$('#but')`返回一个 jQuery 对象，而不是 DOM 对象。您可以在其上调用 jQuery 方法，也可以从中获取 DOM 对象，但不能直接在其上使用 DOM 方法。如果您想从中取出 DOM 对象，您可以通过以下方式获取它：

```
$('#but')[0] 
```

而且，你的方法是这样的：

```
function init() {
    var but = $('#but')[0];
    but.addEventListener("mouseover", butResult, false);
    but.addEventListener("mouseout", reverse, false);
    var button = $('#button')[0];
    button.addEventListener("mouseover", buttonResult, false);
    button.addEventListener("mouseout", reverse, false);
} 
```

或者，您可以在 jQuery 对象上使用 jQuery 方法，而不是使用本机 DOM 方法。

```
function init() {
    $('#but').on("mouseover", butResult).on("mouseout", reverse);
    $('#button').on("mouseover", buttonResult).on("mouseout", reverse);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T23:45:32.687

您需要添加`[0]`到您的 jquery 代码中以获取文档元素，但这对于添加事件侦听器的 jquery 方法毫无意义。我建议要么`$('#but').mouseout(etc)`要么`$('#but').on('mouseout', etc)`。

我已将您的 jsfiddle 更新[为按预期工作](http://jsfiddle.net/WBLhH/56/)，但我将尝试在这里简单介绍一下：

根据 jquery 文档，您应该熟悉两种添加事件侦听器的方法；`.on()`方法，方法`.(event)()`。后者可以添加到 jquery ojects 来代替`object.(eventName)()`示例，将点击处理程序添加到对象： `object.click(function() { console.log('executed'); });`

但是，此方法不是“实时”的，如果动态添加元素，它不会自行更新，并且仅在文档准备好（`$(document).ready(function() { do stuff });`）时附加事件。为了将事件附加到动态添加的元素，我们需要该`.on()`方法。

以下面的 html 为例：

```
<div class="wrapper">
    <span class="dynamically_added">stuff</span>
</div> 
```

为了将事件侦听器附加到动态添加的跨度，在您的 jquery 中，添加以下内容：

```
$(".wrapper").on('click', '.dynamically_added', function() {
    console.log('executed');
}); 
```

`.on()`is(are) 事件的第一个参数。您可以通过用空格分隔多个事件来附加多个事件：`.on('click hover')`. 第二个参数要么是要执行的函数，要么是目标元素。在上面的例子中，它是跨度。最后一个参数当然是要执行的函数。据我所知，您需要有一个匿名函数来引用要执行的函数，而不是简单地写在那里。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:47:52.860

不知道我是否理解你？完全，但是，这是你大致寻找的：

```
var b1 = document.getElementById('button');
var b2 = $(b1);
    b2.click( function(){
      alert('hi');            
    }) 
```

# sql-server-2008 - 无法连接到 SQL Server 2008？

> ID：12326724
> 
> 赞同：1
> 
> 时间：2012-09-07T23:40:55.120
> 
> 标签：sql-server-2008

我一直在尝试各种技巧——从启用 TCP/IP、向防火墙添加例外到戳钞票门巫毒娃娃。但似乎没有什么对我有用。通过management studio连接sql server 2008真的那么难吗？也许，抢劫银行会更容易。

当我弄清楚要抢劫哪家银行时，你能帮我解决这个问题吗？

当我尝试登录到 sql server 2008 时，这是我得到的错误 - 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：2）

到目前为止我尝试过的链接 -

blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft- sql-server-错误/

以及网络上更多的随机链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T02:48:31.633

安装 SQLServer 时，有几个选项可能会影响 SQLServer 的运行方式以及您必须如何连接到它。您在问题中包含的指向*sqlauthority博客的链接有一个**Vince*发布的附加线程。请务必遵循这些说明，以便将 SQLServer 设置为侦听端口 1433 而不是动态端口。

此外，当您登录时，如果它告诉您登录失败（例如，对于 xxx\yyy），那么您可能错过了安装中将*当前用户*添加为授权用户的选项。在这种情况下，您必须使用 SSMS 登录`SQL Server Authentication`，并提供`sa`您在安装期间设置的用户名和密码。

登录后，您可以通过展开 SSMS 对象资源管理器中的根*Security*文件夹，将您的 Windows 用户帐户添加到授权用户列表中，右键单击*Logins*并选择*New Login*。从那里您可以搜索您的用户帐户并添加*Windows 身份验证*用户。这将使您可以使用登录，`Windows Authentication`因此您不必在每次启动 SSMS 时都输入密码。

# c# - 我应该将我的 MVC 视图特定的 javascript 文件放在哪个文件夹中？

> ID：12326725
> 
> 赞同：1
> 
> 时间：2012-09-07T23:41:07.443
> 
> 标签：c#, javascript, model-view-controller

我想知道特定于视图的 javascript 文件位置的最佳做法是什么。
我的一些观点有 1700 多行代码，其中 70% 是 javascript，所以我将它们放入 .js 文件中以利用捆绑/缩小的优势。

我知道核心脚本文件（例如 jquery）通常进入根 /Scripts 文件夹，但是有很多视图我需要这样做（50+），所以我想知道我是否应该把它们放在他们的相应的视图文件夹（例如：/Views/Account/ViewName.js），或者我应该将它们全部转储到根目录的 /Scripts 文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:47:36.163

在我的实践中，我基本上做了以下静态资产结构：

```
public
-- css
-- javascript
---- controllers
---- lib
-- otherAssets 
```

并且使用一些控制器逻辑，我为每个控制器添加一个文件`/public/javascript/controllers`，这样我的控制器特定代码都捆绑在一起。

您可以轻松地将其装配为每个模型，然后在您的 js 文件中使用面向对象的方法，如下所示：

```
myModel = {
    pageA: function() {
        //stuff
    },
    pageB: function() {
        //stuff
    }
}; 
```

这样做意味着您需要一个父 javascript 文件，该文件基本上可以找到正确的 javascript 模型对象（即`myModel`），然后是控制器方法（`pageA`），然后调用该函数。

任何比这更复杂的东西都会真正开始将您带入需要像 require.js 这样的 javascript 资产管理器的领域

# ios - 在 UILabel 中查找文本的位置

> ID：12326727
> 
> 赞同：0
> 
> 时间：2012-09-07T23:41:30.267
> 
> 标签：ios, uilabel

是否可以在 UILabel 中找到文本的确切位置？（例如，如果标签可以是可变宽度但文本可以右对齐或左对齐）

可能的？不可能？不值得努力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:43:00.657

如果您询问如何检测标签当前文本对齐的状态，您可以使用：

```
if (myLabel.textAlignment == UITextAlignmentLeft) {
    //do something for left alignment
}else if (myLabel.textAlignment == UITextAlignmentRight){
    //do something for right alignment
}else{
    //do something for center alignment
} 
```

要使标签“可点击”，您可以通过在标签上启用用户交互并添加`UITapGestureRecognizer`.

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(someMethod:)];
[tap setDelegate:self];
[tap setNumberOfTapsRequired:1];
[tap setNumberOfTouchesRequired:1];
[myLabel addGestureRecognizer:tap]; 
```

# outlook - 如何使用 VSTO RichTextBox 功能区和上下文菜单上的“文本格式”选项卡

> ID：12326728
> 
> 赞同：2
> 
> 时间：2012-09-07T23:42:06.117
> 
> 标签：outlook, vsto, richtextbox, outlook-addin, outlook-2010

如[本文](http://msdn.microsoft.com/en-us/magazine/cc163403.aspx#S5)所述，我已将`RichTextBox`控件添加到**Outlook 窗体区域**。问题是没有用于编辑文本大小、颜色等的控件。我只是认为默认的上下文菜单和功能区可以与控件一起使用，但显然我弄错了。`RichTextBox`

必须做些什么来连接这些？甚至可能吗？如果没有，还有哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T11:22:20.517

我不确定您是否可以将功能区中的现有格式选项卡连接到自定义 RichTextBox，但是您可以轻松添加自己的功能区选项卡，并为这些选项卡制作控件。见[这里](http://msdn.microsoft.com/en-us/office/hh128768#Ribbon)。

另一种选择是在 RichTextBox 上方添加您自己的功能区样式面板，以使用户更清楚这些是该 RTB 的编辑工具。

# php - PHP中的分隔符（|）？

> ID：12326729
> 
> 赞同：1
> 
> 时间：2012-09-07T23:42:11.437
> 
> 标签：php, codeigniter

直接取自[CodeIgniter 页面](http://codeigniter.com/user_guide/libraries/form_validation.html)。

```
$this->form_validation->set_rules('username', 'Username', 'trim|required|min_length[5]|max_length[12]|xss_clean'); 
```

这部分：

```
'trim|required|min_length[5]|max_length[12]|xss_clean' 
```

PHP 是否具有通过 | 分隔值的内置功能？检查，还是 CodeIgniter 手动进行？

如果是这样，

他们为什么不使用这样的东西？

```
set_rules('username', 'Username', array('trim', 'required' ...)); 
```

处理数组而不是浪费不必要的代码来检查不是更容易吗？符号和单独的标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T23:53:39.750

CodeIgniter 将`explode()`在该字符串上运行一个，使用`|`(pipe) 作为分隔符。归根结底，这只是设计师的喜好和创造力。

下面是来自[CI 源](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Form_validation.php)的片段，它进行了拆分。

```
// Cycle through the rules for each field, match the
// corresponding $_POST item and test for errors
    foreach ($this->_field_data as $field => $row)
    {
        // Fetch the data from the corresponding $_POST or validation array and cache it in the _field_data array.
        // Depending on whether the field name is an array or a string will determine where we get it from.
        if ($row['is_array'] === TRUE)
        {
            $this->_field_data[$field]['postdata'] = $this->_reduce_array($validation_array, $row['keys']);
        }
        elseif (isset($validation_array[$field]) && $validation_array[$field] !== '')
        {
            $this->_field_data[$field]['postdata'] = $validation_array[$field];
        }

        // Don't try to validate if we have no rules set
        if (empty($row['rules']))
        {
            continue;
        }

        $this->_execute($row, explode('|', $row['rules']), $this->_field_data[$field]['postdata']);
    } 
```

# asp.net - ASP.NET Webforms 不为 Chrome/iOS 呈现回发 JavaScript 函数

> ID：12326736
> 
> 赞同：8
> 
> 时间：2012-09-07T23:43:04.040
> 
> 标签：asp.net, ios, google-chrome, .net-4.0, browser-detection

当我们向 .NET 4 webforms 应用程序提供用户代理 `Mozilla/5.0 (iPhone; CPU iPhone OS 5_0_1 like Mac OS X; en-us) AppleWebKit/534.46.0 (KHTML, like Gecko) CriOS/21.0.1180.80 Mobile/9A405 Safari/7534.48.3`时，定义函数 __doPostBack 的脚本不会出现在页面上，因此使用它的任何内容都不起作用。

如果我们提供任何其他用户代理字符串（例如 Safari），它就可以正常工作。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-08T02:27:34.693

所以问题是.net 无法识别 Chrome 用户代理，因此它假定它正在处理低级浏览器。

为了解决，我们添加`~/App_Browsers/CriOS.browser`了以下内容：

```
<browsers>
    <browser id="CriOS" parentID="Safari">
        <identification>
            <userAgent match="CriOS" />
        </identification>

        <capabilities>
            <capability name="browser" value="CriOS" />
            <capability name="ecmascriptversion" value="3.0" />
            <capability name="javascript" value="true" />
            <capability name="javascriptversion" value="1.7" />
        </capabilities>
    </browser>
</browsers> 
```

# list - 如何从列表中获取 href 值？

> ID：12326737
> 
> 赞同：0
> 
> 时间：2012-09-07T23:43:17.533
> 
> 标签：list, get, include, href

我试图在单击它后获取 href 值，因此我可以使用`<?php include 'list'; ?>`来加载我之前单击的 php 页面的内容。我正在尝试这样的事情：

```
$(document).ready(function() {
$('list').click(function)
var page=$(href);

<ul id="list">
<li><a href="mypage.php">Mypage</a> </li>
<li><a href="mypage2.php">Mypage2</a> </li> 
```

所以我可以使用我之前点击的链接的内容在我的页面中加载一个段落？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:11:59.070

您可以获取 href 值，然后使用适当的选择器和任何适当的 jQuery ajax 函数（如[ajax()](http://api.jquery.com/jQuery.ajax/)或[load()](http://api.jquery.com/load/) ）加载链接页面的内容。

```
$(document).ready(function() {
    $('#list > li a').click(function(event) {
        var page = this.attr("href");

        // Here should go your ajax code or what-have-you to load the content.
        // If you use an ajax function, the url will be equal to the var page.
        event.preventDefault();

        $.ajax({
            type: "POST", // or "GET" may be better for your needs
            url: page,
            data: "",
            success: function(content) {
                console.log("ajax success");
                $("#divID").html(content);
            },
            error: function() {
                alert("ajax error");
            },
            complete: function() {
                console.log("ajax complete");
            }
        });
    });
});

<ul id="list">
  <li><a href="mypage.php">Mypage</a> </li>
  <li><a href="mypage2.php">Mypage2</a> </li>
</ul> 
```

代码缺少告诉 jQuery 查找 id 'list' 的哈希值。'#list > li a' 告诉 jQuery 将代码块应用到 #list 的所有 'li a' 子级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T11:08:33.020

```
//thanks a lot for your response, i real apreciate it
//i finally used this and works fine
$(function() {
$("#team-tabs a").click(function() {
    var page= this.hash.substr(1);
    $.get(page+".php",function(gotHtml) {
        $("#cv-content").html(gotHtml);
    });
    return false;
});
});

//for this:
<ul id="team-tabs">
    <li><a href="#team/cv1">name 1</a></li>
    <li><a href="#team/cv2">name 2</a></li> 
```

# delphi - 解析文件和文件夹的备忘录

> ID：12326739
> 
> 赞同：2
> 
> 时间：2012-09-07T23:43:40.943
> 
> 标签：delphi, parsing

我对 Delphi 完全陌生，我想通过做某事来学习应该没问题（我的希望！）我的想法是因为我经常不得不重新创建相同的任务：

始终创建相同的目录，其中有时包含文件，有时则为空...

所以我的结论是以某种方式自动化它。

假设一个备忘录包含以下内容：

```
config.xml|enc
/skin
/data/defines.dat:blub
/temp 
```

应在其中创建上述所有内容的 Basepath：

C:\用户\BGates\测试

":blub" 只是占位符，例如 :blub 可以包含来自我的应用程序中另一个备忘录的任何文本，这意味着稍后的 define.dat 会填充文本 blub 包含...

正如你所看到的，有时我使用 | 有时：对于占位符...

所以从上面的信息我想解析备忘录的内容来创建一个这样的目录结构：

```
C:\users\BGates\test\
config.xml
skin
data
  defines.dat (while defines.dat will contain the stuff which comes from blub)
temp 
```

我的问题是备忘录的解析，特别是如何决定它是一个文件夹还是另一个文件夹中的文件夹，然后是根目录中的文件或文件夹内的文件等等......

好吧，可能有一种更简单的方法（我正在阅读有关 csv 文件等的信息，但是后来？我的工具对于使用它的人来说很难理解，因为它不知道 csv 文件的外观），而我上面的示例感觉可能对他们来说更亲近了……

有人可以向我展示一个如何以正确（最佳实践）方式解析它的示例，以便我可以从中学习吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:05:48.053

单元中有一些例程`SysUtils`可以使文件路径解析变得容易得多。首先看一下`ExtractFileName`and `ExtractFilePath`。此外，如果您使用的是最新版本的 Delphi（D2010 或任何 XE 系列），则该`IOUtils`单元在记录下包含一组帮助程序方法`TPath`，可简化使用路径。

例如，如果我想处理 line `/data/defines.dat:blub`，我会这样做：

```
function NormalizePath(const name: string): string;
begin
   result := StringReplace(name, '/', '\', [rfReplaceAll]);
end;

procedure ProcessLine(line: string);
var
   path, filename, data: string;
   colonPos: integer;
begin
   colonPos := pos(':', line);
   if colonPos > 0 then
   begin
      data := copy(line, colonPos + 1);
      delete(line, colonPos, MAXINT);
   end;
   line := TPath.Combine(BASE_PATH, normalizePath(line));
   if ExtractFileExt(line) = '' then
      path := line
   else begin
      path := ExtractFilePath(line);
      filename := line;
   end;
   ForceDirectories(path); //ensure that the folder exists
   if filename <> '' then
      TFile.WriteAllText(filename, data);
end; 
```

注意：我只是在脑海中写下了这个。它可能包含错误。不先测试就不要相信它。此外，这使用了 中的功能`IOUtils`，如果您的 Delphi 版本中没有它，事情会有点棘手。但这应该让您大致了解如何处理您要解决的问题。

# mysql - MySQL rand() 忽略重复项

> ID：12326743
> 
> 赞同：0
> 
> 时间：2012-09-07T23:44:11.687
> 
> 标签：mysql, sql, random, distinct

我一直在尝试使用以下 MySQL：

```
 SELECT distinct(photos.id)
       , photos.file
       , photos.tags
       , photos.desc
       , photos.ratio
       , tags.bid
       , tags.tagname_id 
    FROM photos
       , tags 
   WHERE photos.trending=1 
     AND tags.pid=photos.id
ORDER BY RAND() 
   LIMIT 10 
```

我尝试使用`DISTINCT`来防止重复条目，但它似乎不适用于我的情况。

让它发挥作用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:06:16.633

```
 SELECT photos.id
   , photos.file
   , photos.tags
   , photos.desc
   , photos.ratio
   , tags.bid
   , tags.tagname_id 
FROM photos
   , tags 
WHERE photos.trending=1 
 AND tags.pid=photos.id
GROUP BY photos.id
ORDER BY RAND() 
LIMIT 10 
```

这是进行查询的正确方法，但它会从 photos.id 中任意选择相同的一行，因此您最终可能会在不同的实例上得到不同的结果。

MS SQL 有效查询，查看[sqlfiddle](http://sqlfiddle.com/#!6/4d121/3)：

```
select photos.col1,max(photos.col2),max(photos.col3),max(tags.col5),max(tags.col6)
from photos,tags
where photos.col1=tags.col4
group by col1 
```

SQL 指令是：当使用 group by 列时，不能包含在 select 中，除非它按 OR 分组，否则在聚合函数中使用。

# sql - 高尔夫计分 SQL 查询

> ID：12326744
> 
> 赞同：3
> 
> 时间：2012-09-07T23:44:14.013
> 
> 标签：sql, sql-server

我有以下 MS SQL 查询，它交叉引用三个表（tTeam、tPlayer 和 tScores）来获得按 Net score 和 Team 排序的总“Net score”、“Gross score”和“Position”。

```
SELECT TeamID, Team, NetScore, Gross,  
CASE WHEN cnt > 1 THEN 'T' + CAST(rnk AS VARCHAR(5)) 
         ELSE CAST(rnk AS VARCHAR(5))
END Pos
FROM (
SELECT tTeam.TeamID, 
       tTeam.Title AS Team, 
       SUM(CONVERT(INT, tScores.Net_Score)) AS NetScore, 
       SUM(CONVERT(INT, tScores.Out_Score) + CONVERT(int, tScores.In_Score)) AS Gross, 
       rank() OVER ( ORDER BY SUM(CONVERT(INT, tScores.Net_Score))) rnk, 
       COUNT(*) OVER ( PARTITION BY SUM(CONVERT(INT, tScores.Net_Score))) cnt
FROM tScores INNER JOIN tPlayer ON tScores.PlayerID = tPlayer.PlayerID INNER JOIN tTeam ON tPlayer.TeamID = tTeam.TeamID 
WHERE tTeam.TournamentID = 13
GROUP BY tTeam.TeamID, tTeam.Title ) temp
ORDER BY NetScore, Team 
```

该查询效果很好，但是（这是我需要帮助的地方），它正在按团队计算所有球员的净得分和总得分，而我需要做的只是按团队计算“4 个最低球员的净得分和总得分”只要。

我花了最后一天半的时间用这个把头发拉出来，任何帮助都将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:09:11.947

如果我理解正确，您只想将每个玩家的四个最低分数相加，您可以使用另一组 row_numbers 来隔离最低分数。我不认为 rn_gross 是必要的（基于 rank() 函数），但我仍然包含它。如果不需要单独编号，则从总和中删除条件并添加`and lowestScores.rn_net <= 4`到 where 子句。

```
; with lowestScores as
(
  select *,
         ROW_NUMBER() over (PARTITION by PlayerID
                            order by CONVERT(INT, Net_Score)) rn_net,
         ROW_NUMBER() over (PARTITION by PlayerID
                            order by CONVERT(INT, Net_Score) + CONVERT(int,In_Score)) rn_gross
    from tScores                            
),
temp as
(
  SELECT tTeam.TeamID, 
         tTeam.Title AS Team, 
         SUM(CASE WHEN rn_net <= 4 THEN CONVERT(INT, lowestScores.Net_Score) END) AS NetScore, 
         SUM(CASE WHEN rn_gross <= 4 THEN CONVERT(INT, lowestScores.Out_Score) END
           + CASE WHEN rn_gross <= 4 THEN CONVERT(int, lowestScores.In_Score) END) AS Gross, 
         rank() OVER ( ORDER BY SUM(CASE WHEN rn_net <= 4 THEN CONVERT(INT, lowestScores.Net_Score) END)) rnk, 
         COUNT(*) OVER ( PARTITION BY SUM(CASE WHEN rn_net <= 4 THEN CONVERT(INT, lowestScores.Net_Score) END)) cnt
    FROM lowestScores 
   INNER JOIN tPlayer 
      ON lowestScores.PlayerID = tPlayer.PlayerID 
   INNER JOIN tTeam 
      ON tPlayer.TeamID = tTeam.TeamID 
   WHERE tTeam.TournamentID = 13
   GROUP BY tTeam.TeamID, tTeam.Title
)
SELECT TeamID, Team, NetScore, Gross,  
       CASE WHEN cnt > 1 
            THEN 'T' + CAST(rnk AS VARCHAR(5)) 
            ELSE CAST(rnk AS VARCHAR(5))
        END Pos
  FROM temp
 ORDER BY NetScore, Team 
```

# objective-c - 如何突然停止当前在后台执行的线程？

> ID：12326745
> 
> 赞同：2
> 
> 时间：2012-09-07T23:44:32.453
> 
> 标签：objective-c, ios, multithreading, while-loop

**事实：**

我有一个在后台线程上执行的方法：

```
[currentGame performSelectorInBackground:@selector(playOn:) withObject:self]; 
```

这个方法基本上包含一个 while 循环，它会一直执行，直到用户单击*Quit*按钮：

```
-(void) playOn: (UIViewController*) thisViewController
{
    while(!quitButtonPressed)
    {
       // this is my method's main loop
    }
} 
```

**问题：**

> 如果用户在上述循环中间的某处单击退出，则循环 *的其余部分*必须在再次检查 BOOL 并最终停止*之前执行。*为了防止这种情况发生并在用户单击退出时*立即停止 while 循环，我想我还可以在我的 while 循环中**到处添加**许多* ，以便*半持续地*检查并*“立即”*脱离如果需要的话。*然而，考虑到上述主 while 循环的大小以及它包含**许多较小的 while 循环*的事实，从设计的角度来看，这似乎不是很聪明或实用`if(quitButtonPressed) break;` *****在其中（`if.. break;`我必须添加的数量会很大，并且可能会使事情变得非常复杂。）*****

 *****可能的解决方案**（但它是正确的吗？）**：**

> 所以我认为最好的方法是停止/取消执行上述方法的while循环的后台线程，而不是方法内部的while循环本身，用户点击*退出的那一刻*
> 
> 这是可能的，还是类似的（即更好的建议），我该怎么做？

**上述解决方案的可能实施：**

我可以创建这个新方法：

```
-(void)checkQuitButton
{
   while(!quitButtonPressed)
   {
      //wait
   }
   if(quitButtonPressed)
   {
     // stop this thread-->[currentGame performSelectorInBackground:@selector(playOn:) withObject:self];
     // this is the method I'm looking for
   }
} 
```

然后我可以开始在两个单独的后台线程上同时执行上述和我之前的 main 方法，如下所示：

```
[currentGame performSelectorInBackground:@selector(playOn:) withObject:self];
[currentGame performSelectorInBackground:@selector(checkQuitButton) withObject:nil]; 
```

当*游戏*while 循环正在执行时，*另一个*while 循环同时检查 QuitButton。但是有没有一种我可以实际调用的方法来取消这里开始的操作：

```
[currentGame performSelectorInBackground:@selector(playOn:) withObject:self]; 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T00:21:20.600

正确的解决方案是定期检查“停止”标志。突然终止线程没有机会清理资源。简而言之，您会严重泄漏内存。

但更深层次的问题是你几乎肯定不应该有这种线程。它强烈表明设计不正确。在 iOS 中，大多数后台操作应该采取集中操作的形式，`NSOperation`使用 Grand Central Dispatch 或块来实现。您应该非常非常少需要一个执行多种不同功能的长寿命线程。在您的操作中，放置“检查取消”语句的位置应该相当简单。

也几乎没有你应该使用`performSelectorInBackground:`. 这是一种极其危险的方法，几乎​​无法控制。相反，请阅读[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)以获取有关如何正确实现后台操作的指导。请特别注意“从线程迁移”部分。***

# jquery - 有人可以解释这个 Jquery

> ID：12326747
> 
> 赞同：2
> 
> 时间：2012-09-07T23:44:37.057
> 
> 标签：jquery

```
$(document).ready(function () {
    if ((screen.width >= 1024) && (screen.height >= 768)) {
        alert('Screen size: 1024x768 or larger');
        $("link[rel=stylesheet]:not(:first)").attr({
            href: "style2.css"
        });
    } else {
        alert('Screen size: less than 1024x768, 800x600 maybe?');
        $("link[rel=stylesheet]:not(:first)").attr({
            href: "style1.css"
        });
    }
}); 
```

我没有得到这部分：`$("link[rel=stylesheet]:not(:first)").attr`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T23:47:41.967

它选择所有`link`标签，具有名为 的属性`rel`，其值为`stylesheet`，并且不是第一个标签。例如，如果您有：

```
<link rel="icon" />
<link rel="stylesheet" href="style2.css" />
<link rel="stylesheet" href="style3.css" />
<link rel="stylesheet" href="style4.css" /> 
```

选择器会选择最后两个`link`标签。为什么？因为它*排除*了第一个，因为`rel`属性的值不是`stylesheet`，而是`icon`；并*排除*第二个，因为它是所有具有属性的 s 中的*第一个*，并将这个过滤掉。`link``rel="stylesheet"``not(:first)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T23:48:52.077

```
$("link[rel=stylesheet]:not(:first)").attr({href : "style1.css"}); 
```

把它分解成各个部分。在这种情况下，选择器将匹配任何`<link>`具有`rel`equals 属性的元素，`stylesheet`但它找到的是`:not`( `:first`) 。发现时。Jquery 附加了一个`href`属性，该属性等于浏览器窗口大小的样式表......*呼吸*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T23:49:22.600

**link[rel=stylesheet]**将选择所有带有**rel="stylesheet"属性的标签**

和**:not(:first)**将过滤掉第一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T23:52:52.470

这些是 CSS 选择器。在这个特定的示例中，所有 rel 值为“样式表”的链接标签都被选中，但遇到的第一个标签将被忽略。

以下内容非常适合掌握选择器：

W3Schools 参考：[http ://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

Nettuts 文章： http: [//net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

# django-templates - 用户输入验证。在 django 中正确执行此操作的方法

> ID：12326749
> 
> 赞同：0
> 
> 时间：2012-09-07T23:44:53.100
> 
> 标签：django-templates

我需要验证来自站点的用户电子邮件输入。当然还有 django.core.validation。但是，在所有字段都有效之前，只使用 jquery 验证插件而不发送 POST 数据不是更容易吗？还是验证抛出的视图更好？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:47:38.440

这是您可以选择做出的设计决策。如果您需要对字段进行实时验证，那么 jquery-validation 是您的最佳选择。

但是，如果您希望在回发时完成验证，最好使用 Django 的表单验证来完成工作。如果您决定对回发进行验证，您所要做的就是使用[EmailField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#emailfield)，django 将负责其余的工作。

# mysql - Database Smell - 使用多个表改进当前设计

> ID：12326752
> 
> 赞同：3
> 
> 时间：2012-09-07T23:45:11.720
> 
> 标签：mysql, database-design

我正在创建我的技术 wiki 站点的第二个版本，我想要改进的一件事是数据库设计。问题（或者我认为）是为了显示每个文档，我需要加入 15 个以上的表。我有一堆查找表，其中包含与每个 wiki 条目相关的描述性数据，例如使用的程序员、cpu、标签、外围设备、PCB 布局软件、难度级别等。

下面是一个布局示例：

```
 doc
--------------
id   | author_id   |    doc_type_id      .....
1    | 8           |        1
2    | 11          |        3
3    | 13          |        3 
```

_

```
 lookup_programmer
--------------
doc_id   | programmer_id     
1        | 1                    
1        | 3                     
2        | 2 
```

_

```
 programmer
--------------
programmer_id   | programmer      
1               | USBtinyISP        
2               | PICkit              
3               | ..... 
```

由于某些文档 ID 可能具有单个属性（例如程序员）的多个条目，因此我创建了数据库来弥补这一点。`programmer`其他 10 个属性的布局与上面的 2 个表格类似。要显示单个文档文章，需要连接大约 20 个表。

我使用 Sphinx 搜索引擎来查找具有某些特征的文章。本质上，Sphinx 索引所有数据（不存储）并根据提供的过滤器返回感兴趣的 wiki 文档 ID。如果我想找到使用某个程序员的文章然后按日期排序，MYSQL 必须先将**所有**文档与 2 个程序员表连接，然后过滤，最后按插入时间对剩余的文档进行排序。没有索引可以帮助我对过滤结果进行排序（150k 文档 ID 需要很长时间），因为它是在临时表中完成的。可以想象，随着需要过滤的参数越多，情况会变得更糟。

这是因为我必须依靠 Sphinx 才能返回 - 比如说所有使用特定 CPU 和程序员的 wiki 条目 - 这让我相信我当前的设置存在 DB 气味......

~~编辑：看起来我已经实现了[实体-属性-值模型]~~ [1](http://en.wikipedia.org/wiki/Entity-attribute-value_model)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:09:15.307

我在这里看不到任何表明您已实施 EAV 的内容。相反，看起来您已经为每个表中的每一行分配了一个 ID 号。这是增加连接数量的有保证的方法，它与规范化*无关。*（没有“我现在添加了一个身份证号”的正常形式。）

选择一个查找表。（我将在我的示例中使用“程序员”。）不要这样构建它。

```
create table programmer (
  programmer_id integer primary key,
  programmer varchar(20) not null,
  primary key (programmer_id),
  unique key (programmer)
); 
```

相反，像这样构建它。

```
create table programmer (
  programmer varchar(20) not null,
  primary key (programmer)
); 
```

在引用它的表中，考虑级联更新和删除。

```
create table lookup_programmer (
  doc_id integer not null,
  programmer varchar(20) not null,
  primary key (doc_id, programmer),
  foreign key (doc_id) references doc (id) 
    on delete cascade,
  foreign key (programmer) references programmer (programmer)
    on update cascade on delete cascade
); 
```

你有什么收获？您保留了外键引用为您提供的所有数据完整性，您的行更具可读性，并且您已经消除了连接。以这种方式构建所有“查找”表，并且您可以消除每个查找表的一个连接。（除非您有数百万行，否则您可能不会看到性能下降。）

# c# - C# 在 System.Sockets 中接收数据包

> ID：12326753
> 
> 赞同：1
> 
> 时间：2012-09-07T23:45:21.733
> 
> 标签：c#, sockets, client-server

在我的客户端服务器应用程序中，我想知道如何制作一个数据包并通过客户端将其发送到服务器

然后在服务器上我识别出这是哪个数据包并发送正确的重播

但是突然间我遇到了这个话题，这让我担心我是否会陷入这个问题

> 问题
> 
> 对于为 TCP/IP 设计协议的人来说，最常见的初学者错误之一是他们假设消息边界被保留。例如，他们假设单个“发送”将导致单个“接收”。
> 
> 部分 TCP/IP 文档应归咎于此。许多人读到 TCP/IP 如何保存数据包——在必要时将它们拆分，并在接收端重新排序和重新组装它们。这是完全正确的；但是，单个“发送”不会发送单个数据包。
> 
> 本地机器（环回）测试证实了这种误解，因为通常当客户端和服务器在同一台机器上时，它们的通信速度足够快，以至于单个“发送”实际上对应于单个“接收”。不幸的是，这只是一个巧合。
> 
> 当尝试将解决方案部署到 Internet（增加客户端和服务器之间的延迟）或尝试发送大量数据（需要分段）时，通常会出现此问题。不幸的是，此时项目通常处于最后阶段，有时甚至已经发布了应用协议！
> 
> 真实故事：我曾经在一家开发定制客户端/服务器软件的公司工作。最初的通信代码犯了这个常见的错误。但是，它们都在具有高端硬件的专用网络上，因此根本问题很少发生。当它发生时，运营商只会将其归结为“那个有问题的 Windows 操作系统”或“另一个网络故障”并重新启动。我在这家公司的一项任务是改变沟通方式以包含更多信息；当然，这导致问题经常出现，并且必须更改整个应用程序协议才能解决它。真正令人惊奇的是，这个软件已经在无数的 24x7 自动化系统中使用了 20 年；它从根本上被破坏了，没有人注意到。

那么我怎么能发送类似 AUTH_CALC,VALUE1=10,VALUE2=12 的数据包并以安全的方式从服务器接收它......

如果你想要一个我在这里做的例子，它在下面

[客户]

```
Send(Encoding.ASCII.GetBytes("1001:UN=user123&PW=123456")) //1001 is the ID 
```

[服务器]

```
private void OnReceivePacket(byte[] arg1, Wrapper Client)
{
    try
    {
        int ID;
        string V = Encoding.ASCII.GetString(arg1).Split(':')[0];
        int.TryParse(V, out ID);

        switch (ID)
        {
            case 1001://Login Packet
                AppendToRichEditControl("LOGIN PACKET RECEIVED");
                break;

            case 1002:
                //OTHER IDs
                break;

            default:
                break;
        }
    }
    catch { }         
} 
```

那么这是构造消息并在服务器上处理它的好方法吗？

另外，使用 ASCII 或 UTF8 哪种编码更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:54:56.633

最好的方法是使用长度指示器。假设你正在发送一个 10000 字节的文件，首先发送文件的长度并从另一端接收 ack 即“OK”字符串，然后继续逐块发送 10,000 字节（可能你可以占用 4096 字节）。每次发送 4096 个字节，分两次发送，最后一个块发送 2000 个奇数字节。在接收方，无法保证一次发送您将收到整个 4096 字节，因此您需要等到您获得 4096 字节，然后继续下一个 4096 字节。

# jsf - 禁用数据表中的特定按钮，jsf

> ID：12326756
> 
> 赞同：2
> 
> 时间：2012-09-07T23:45:56.767
> 
> 标签：jsf, button, datatable

我有一个包含两列的数据表 - Title 和 Action 标题是从托管 bean 中的列表填充的，对于列表中的每个标题，数据表在 Action 列下都有一个名为 Confirm 的按钮。当用户单击“确认”按钮时，会显示一个对话框，其中包含附加信息和另一个名为“提交”的按钮。

如果用户在该对话框中点击 Submit 按钮，则在 backing bean 中设置了一个变量 confirmDate，confirmDate 不为空，我需要禁用主数据表中 Action 列下的特定 Confirm 按钮。现在如果我禁用它，所有的确认按钮都会被禁用。如何仅禁用选定的确认按钮。非常感谢您对此的帮助。

主要数据表

```
<h:panelGrid id="notificationList" width="100%">
<h:panelGroup >                          
  <p:dataTable var="dt" value="#  
  {myBean.listAll}" id="titles" rowKey="#{dt.id}">                                 

    <f:facet name="header">
      <h:outputText value = "Title List"/>                                             
    </f:facet>

     <p:column headerText ="Title">
         <h:outputText value="#{dt.title}"/>
     </p:column>

     <p:column headerText="Action">

        <p:commandButton id="nID"                                                      
         value="Confirm"      
         oncomplete="myDialog.show();" 
         process="@this"
         disabled= "#{not empty dt.confirmDate}
         update="@form">

         <f:setPropertyActionListener value="#{dt}" target="#
           {myBean.selectedTitle}"/>                                       
        </p:commandButton>
    </p:column>
 </p:dataTable>
 </h:panelGroup>
</h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:20:31.217

很难用您的代码说，也许您`dt`通过 listAll 检索的所有对象都是相同的对象。你如何设置列表？

无论如何，这应该有效（简化）：

```
<p:dialog widgetVar="dlg">
    <p:commandButton value="Submit" action="#{myBean.updateNotificationConfirmDate}" oncomplete="dlg.hide()"
        update="notificationList" />
</p:dialog>
<p:dataTable id="notificationList" var="dt" value="#{myBean.tableData}">
    <p:column>
        <p:commandButton value="Confirm" process="@this" disabled="#{!empty dt.confirmDate}" update="@form"
            oncomplete="dlg.show();">
            <f:setPropertyActionListener value="#{dt}" target="#{myBean.selectedTitle}" />
        </p:commandButton>
    </p:column>
</p:dataTable> 
```

和支持bean（无论你的DT是什么:)）：

```
@ManagedBean
@ViewScoped
public class MyBean {
    private List<DT> tableData = new ArrayList<DT>();
    private DT selectedTitle;

    public MyBean() {
        tableData.add(new DT(1L, "title1", null));
        tableData.add(new DT(2L, "title2", null));
        tableData.add(new DT(3L, "title3", null));
        tableData.add(new DT(4L, "title4", null));

    }

    public DT getSelectedTitle() {
        return selectedTitle;
    }

    public void setSelectedTitle(DT selectedTitle) {
        this.selectedTitle = selectedTitle;
    }

    public List<DT> getTableData() {
        return tableData;
    }

    public void updateNotificationConfirmDate() {
        selectedTitle.setConfirmDate(Calendar.getInstance());
    }
} 
```

# graphics - 映射到 VGA 调色板的颜色结果错误

> ID：12326759
> 
> 赞同：1
> 
> 时间：2012-09-07T23:46:18.557
> 
> 标签：graphics, dos, vga

我正在学习旧的 DOS 编程，特别是直接控制 VGA。我也这样做是为了重新学习并在 C 方面做得更好。

无论如何，我已经编写了一个小程序来加载 PCX 文件并显示它。我使用的是来自 DooM 的 cacodemon，带有原始的 DooM 调色板。像素数据以及调色板的 RGB 值似乎是正确的（我对所有 256 个 rgb 三元组进行了 printf，它们与我正在使用的编辑器相匹配）。但是，当我显示调色板时，会有明显的差异，并且图像的颜色会失真。

原始图像和调色板：

[http://i.imgur.com/7lM5R.png](http://i.imgur.com/7lM5R.png)

我的输出（数字是调色板值，并且是正确的）：

[http://i.imgur.com/MJTUE.png](http://i.imgur.com/MJTUE.png)

这是调色板加载代码

```
void setPalette(unsigned char * newPalette)
{
    int x, y = 0;
    //SET PALETTE MEMORY
    for (x = 0; x <= 255; x++)
    {
        outp(PALETTE_MASK, 0xFF); //Can access whole palette
        outp(PALETTE_REGISTER_WR, x); //Set index
        outp(PALETTE_DATA,newPalette[y]); //Write R value
        outp(PALETTE_DATA,newPalette[y+1]); //Write G value
        outp(PALETTE_DATA,newPalette[y+2]); //Write B value

        printf("%d, %d, %d\n", newPalette[y], newPalette[y+1], newPalette[y+2]);

        y += 3;

        //getch();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:58:41.603

我想到了。因为 VGA 仅存储 64 级 R、G 和 B，您需要将每个值向右移动两次。

# file - 在 Seam Jboss 应用程序中上传图像以及更改实体字段

> ID：12326764
> 
> 赞同：0
> 
> 时间：2012-09-07T23:46:54.790
> 
> 标签：file, jboss, upload, entity, seam

我目前一直在努力在文件上传时更新我的​​ bean 所以就这样

```
memberEdit.xhtml

<rich:fileUploadfileUploadListener="#{FileUpload.listener}"
              maxFilesQuantity="1" id="upload"  immediateUpload="false"
                acceptedTypes="jpg, gif, png, bmp, jpeg"allowFlash="false">
                <a4j:supportevent="onuploadcomplete"reRender="memberPhotoField"/>
            </rich:fileUpload>

<s:decorateid="memberPhotoField"template="layout/edit.xhtml">
<ui:definename="label">Member photo</ui:define>
<h:inputTextareaid="memberPhoto"cols="80"rows="3"
required="true"value="#{memberHome.instance.memberPhoto}"/> 
```

我的文件上传 bean

```
@Name ("FileUpload")
//getters setters
    public void listener(UploadEvent event) throws Exception{
         memberHome memberinstance = new CiomemberHome(); 
        //After copying file on hard disk need to update my text field with filename
         memberinstance.setphoto(item.getFileName());
       // I do get logs correct for item.getFilename
} 
```

我的家实体

```
@Name("memberHome")
//getter setters....
public void setphoto(String image)
{
        log.info("In method set photo");
        getInstance().setMemberPhoto(image);
        update(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:17:58.637

首先，您**永远**不想自己实例化 Seam 组件（如在 中`new CiomemberHome()`），因为如果您这样做，它们不再是 Seam 组件（双射将不起作用等），而不是您自己创建实例，而是要求 Seam 处理它们在 FileUpload 中使用`Component.getInstance("memberHome")`或注入它。

关于您的问题，我认为文件名是空的。如果这是问题所在，那么原因是richfaces 实际上并没有创建临时文件，而是将内容保存在内存中。要将上传的数据存储到文件中，您需要更改`web.xml`：

```
<filter>
    <filter-name>Seam Filter</filter-name>
    <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
    <init-param>
        <param-name>createTempFiles</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>maxRequestSize</param-name>
        <param-value>10000000</param-value>
    </init-param>
</filter> 
```

注意`createTempFiles`设置为`true`（默认为false）。在侦听器中检索数据时，而不是`item.getData()`使用`File temp = item.getFile()`返回临时文件实例的字节数组。

见[https://stackoverflow.com/a/7276813/1417546](https://stackoverflow.com/a/7276813/1417546)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T20:51:49.560

错误/消息

```
13:49:42,540 INFO  [FileUploadBean] result of persist: updated
13:49:42,613 INFO  [lifecycle] WARNING: FacesMessage(s) have been enqueued, but may not have       been displayed.
sourceId=null[severity=(INFO 0), summary=(Successfully updated), detail=(Successfully updated)]
sourceId=null[severity=(INFO 0), summary=(Successfully updated), detail=(Successfully updated)]
sourceId=ciomember:officePhoneField:officePhone[severity=(ERROR 2), summary=(value is required), detail=(value is required)] 
```

sourceId=ciomember:cityField:city[severity=(ERROR 2), summary=(value is required), detail=(value is required)] sourceId=ciomember:agencyNameField:agencyName[severity=(ERROR 2), summary=(value是必需的），detail=（需要值）] sourceId=ciomember:lastNameField:lastName[severity=（错误 2），summary=（需要值），detail=（需要值）] sourceId=ciomember:memberPhotoField:memberPhoto [severity=(ERROR 2), summary=(value is required), detail=(value is required)] sourceId=ciomember:zipField:zip[severity=(ERROR 2), summary=(value is required), detail=( value is required)] sourceId=ciomember:stateField:state[severity=(ERROR 2), summary=(value is required), detail=(value is required)] sourceId=ciomember:firstNameField:firstName[severity=(ERROR 2) ，摘要=（需要值），detail=(必填值)] sourceId=ciomember:titleField:title[severity=(ERROR 2), summary=(必填值), detail=(必填值)] sourceId=ciomember:agencyUrlField:agencyUrl[severity=( ERROR 2), summary=(value is required), detail=(value is required)] sourceId=ciomember:address1Field:address1[severity=(ERROR 2), summary=(value is required), detail=(value is required) ]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:27:56.553

感谢您尝试解决我的问题。但我发现我需要在该模态实体上使用@Inject，以便我可以使用当前实例并对其进行操作。谢谢你。:)

# clojure - 简化这个单子表达式

> ID：12326767
> 
> 赞同：1
> 
> 时间：2012-09-07T23:47:21.537
> 
> 标签：clojure

观看本教程后，我正在研究自己的一些示例：http: [//www.infoq.com/presentations/Why-is-a-Monad-Like-a-Writing-Desk](http://www.infoq.com/presentations/Why-is-a-Monad-Like-a-Writing-Desk)并阅读[http://blog。 sigfpe.com/2006/08/you-could-have-invented-monads-and.html](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)。

我想出了以下功能：

```
（定义单位 [vs]
  (fn [] [vs]))

（定义绑定 [mv f]
  (f (mv)))

（定义公司+ [mv]
  （绑定
   MV
   (fn [[对]]
     (让 [r (inc v)]
       (unit r (apply str (concat s "inc+(" (str r) ")")))))))

（定义双+ [mv]
  （绑定
   MV
   (fn [[对]]
     （让 [r (* 2 v)]
       (unit r (apply str (concat s " double+(" (str r) ")")))))))

（定义三重+ [mv]
  （绑定
   MV
   (fn [[对]]
     （让 [r (* 3 v)]
       (unit r (apply str (concat s " triple+(" (str r) ")")))))))

;; 测试：

((-> (unit 1 "1 ->") inc+))
;; => [2 "1 -> 公司+(2)"]

((-> (unit 3 "3 ->") inc+ double+ inc+))
;; => [27 "3 -> inc+(4) double+(8) inc+(9) Triple+(27)"]

```

我希望重写 bind 以封装 inc+ double+ 和 Triple+ 方法的模式，并获得与以前相同的输出。这将如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:38:48.633

我分两个阶段弄清楚：

```
（定义单位 [vs]
  (fn [] [vs]))

（定义绑定 [mv f]
  (让 [[iv 是] (mv)
        [av as] (f iv)]
    (单位 av (str is " " as))))

（定义公司+ [mv]
  （绑定
   MV
   (fn [v]
     [(inc v) (str "inc+(" (inc v) ")")])))

（定义双+ [mv]
  （绑定
   MV
   (fn [v]
     [(inc v) (str " double+(" (inc v) ")")])))

（定义三重+ [mv]
  （绑定
   MV
   (fn [v]
     [(inc v) (str " Triple+(" (inc v) ")")])))

```

然后：

```
（定义单位 [vs]
  (fn [] [vs]))

（定义绑定 [mv f]
  (让 [[vs] (mv)
        r (fv)
        xs (->> (str (type f))
                   (重新找#"\$([^\$]*)\$?")
                   第二） ]
    (单位 r (str s " " (str xs "(" r ")")))))

（定义公司+ [mv]
  (绑定 mv inc))

（定义双+ [mv]
  (绑定 mv #(* 2 %)))

（定义三重+ [mv]
  (绑定 mv #(* 3 %)))

((-> (unit 3 "3 ->") inc+ double+ inc+ Triple+))
;;=> [27 "3 -> inc_PLUS_(4) double_PLUS_(8) inc_PLUS_(9) Triple_PLUS_(27)"]

```

因此，查看其他 Monad 教程，尤其是[http://channel9.msdn.com/Shows/Going+Deep/Brian-Beckman-Dont-fear-the-Monads](http://channel9.msdn.com/Shows/Going+Deep/Brian-Beckman-Dont-fear-the-Monads)，我想我现在了解了核心原则。'Monads' 真的是关于能够重用我们手头的功能。`unit`并且`bind`必须设计为可以协同工作。然后，将函数组合在一起几乎是微不足道的。

然后再抽象一个写`do-m`操作符：

```
（定义单位 [vs]
  (fn [] [vs]))

（定义绑定 [mv f]
  (让 [[vs] (mv)
        r (fv)
        xs (->> (str (type f))
                   (重新找#"\$([^\$]*)\$?")
                   第二） ]
    (单位 r (str s " " (str xs "(" r ")")))))

(定义双 [v] (* 2 v))

（定义三元组 [v] (* 3 v)）

(defn do-m [v & fs]
  (let [fn-ms (map #(fn [mv] (bind mv %)) fs)]
    ((((apply comp (reverse fn-ms)) (unit v (str v "->"))))))

(do-m 3 inc 双三倍)
;;=> [24 "3 -> inc(4) double(8) Triple(24)"]

```

* * *

这是实现相同结果的另一种编写方式，请注意更改是取出 lambda 函数 in以及相关的and`unit`调用。`bind``do-m`

```
（定义单位 [vs] [vs]）

（定义绑定 [mv f]
  （让 [[vs] mv
        r (fv)
        xs (->> (str (type f))
                   (重新找#"\$([^\$]*)\$?")
                   第二） ]
    (单位 r (str s " " (str xs "(" r ")")))))

(定义双 [v] (* 2 v))
（定义三元组 [v] (* 3 v)）
(defn sqrt [v] (数学/sqrt v))

(defn do-m [v & fs]
  (let [fn-ms (map #(fn [mv] (bind mv %)) fs)]
    (((apply comp (reverse fn-ms)) (unit v (str v "->")))))

（do-m 3 inc 双双三三平方）
;; => [12.0 "3 -> inc(4) 双(8) 双(16) 三重(48) 三重(144) sqrt(12.0)"]

```

# javascript - 如何将一个类嵌套在另一个类中？

> ID：12326770
> 
> 赞同：1
> 
> 时间：2012-09-07T23:47:40.890
> 
> 标签：javascript, class, nested

因此，我正在尝试使用 JavaScript“类”来尝试澄清和简化我的一些代码。我所拥有的是这样的：

```
function action (name, vActor, vTarget) {
    this.name = name;
    this.vActor = vActor;
    this.vTarget = vTarget;
    this.addRoll = addRoll;
    this.children = {};
}
function addRoll (name, diffMod, dice, success, critSuccess, failure) {
    this.children[name] = {} ;
    this.children[name].diffMod = diffMod;
    this.children[name].dice = dice;
    this.children[name].success =       {condition: success,        outcome: {}};
    this.children[name].critSuccess =   {condition: critSuccess,    outcome: {}};
    this.children[name].failure =       {condition: failure,        outcome: {}};
    this.children[name].addSuccess = addSuccess;
    this.children[name].addFailure = addFailure;
    this.children[name].addOutcome = addOutcome;
} 
```

这是解决这个问题的正确方法吗？我的主要问题是关于谁拥有“function addRoll()”部分中的“this”对象。我假设“这个”仍然属于动作“类”。我也不确定关于开始一个新的空白对象和使用点符号分配东西的语法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:05:10.477

忽略函数绑定和调用apply或call，`this`属性是方法的所有者。打电话...

```
addRole(...) 
```

该`this`属性指向全局`window`对象。如果你有一个用函数调用的对象`{}`或实例并调用它......`new Something()``x``addRole`

```
x.addRole(...) 
```

该`this`物业是`x`。

**附加**您已将功能正确分配给操作对象，因此当您调用...

```
var a = new action(...); 
```

然后打电话

```
a.addRole(...); 
```

该`this`属性是您创建的`a`实例。`action`为了防止它被称为全局函数并向 中添加属性，`window`您可以将其分配给`prototype`. 该`prototype`对象具有一些强大的功能来构建继承，但现在只是改变......

```
addRole(...) {...} 
```

对以下...

```
action.prototype.addRole = function(...) {...} 
```

并删除正在执行的任务......

```
this.addRole = addRole 
```

将防止函数在没有所有者的情况下被意外调用

**此外**，您可以重写在 addRole 中分配子项的方式，以更好地使用对象文字表示法......

```
function addRoll(name, diffMod, dice, success, critSuccess, failure) {
    this.children[name] = {
        diffMod: diffMod,
        dice: dice,
        success: {
            condition: success,
            outcome: {}
        },
        critSuccess: {
            condition: critSuccess,
            outcome: {}
        },
        failure: {
            condition: failure,
            outcome: {}
        },
        addSuccess: addSuccess,
        addFailure: addFailure,
        addOutcome: addOutcome
    };
} 
```

您还可以重构代码以使用子类的类，如下所示。

```
function Action(name, vActor, vTarget) {
    this.name = name;
    this.vActor = vActor;
    this.vTarget = vTarget;
    this.children = {};
}
Action.prototype.addRoll = function(name, role) {
    this.children[name] = role;
}

function Role(diffMod, dice, success, critSuccess, failure) {
    this.diffMod = diffMod;
    this.dice = dice;
    this.success = success;
    this.critSuccess = critSuccess;
    this.failure = failure;
}
Role.prototype.addSuccess = function(...) {...}
Role.prototype.addFailure = function(...) {...}
Role.prototype.addOutcome = function(...) {...}

function Condition(condition) {
    this.condition = condition;
    this.outcome = {};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:07:54.797

您在这里问了很多问题，让我尝试一次回答一个，这是您的代码，简化版

```
function Action (name) {
    this.name = name;
    this.addRoll = addRoll;
}
function addRoll (name, diffMod, dice, success, critSuccess, failure) {
    ...
} 
```

1.  如何开始一个新的空白对象？
    你使用“新”关键字，所以要创建一个新的“动作”对象，你做`var newAction = new Action('hello')`

2.  javascript中的“this”指的是什么？
    “this”指的是函数的调用者。一个简单的例子：
    `var newAction = new Action('hello world');`
    `newAction.addRoll(//...);`
    在这个例子中，addRoll 函数中的“this”是“newAction”
    ，但是如果你直接调用“addRoll”，如果你使用浏览器，“this”指的是“Window”对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:57:48.000

是的，如果`addRoll`从 的实例调用`action`then`this`对象仍将属于`action`.

`prototype`你这样做的方式对我来说有点困惑，我通常通过它们的属性分配构造函数的方法（你称之为类，但不是真的）

像这样

```
function action()
{
...
}

action.prototype.addRoll = function(){...}

var instance = new action();
instance.addRoll(); 
```

# xna - Kinect Studio 使 XNA 应用程序崩溃

> ID：12326772
> 
> 赞同：0
> 
> 时间：2012-09-07T23:48:06.943
> 
> 标签：xna, kinect

当我尝试将 Kinect Studio 连接到 XNA 应用程序时，应用程序崩溃。我使用 Developer Toolkit 中的示例对其进行了测试。

我使用 VS2010 和 W7 64 位以及用于 Xbox 的 Kinect。

WPF 示例运行良好。运行 XNABasics 示例时出现的错误如下（对不起，部分是德语）：

问题签名：

问题名称：APPRCASH

名称：XnaBasics.exe

Anwendungs版本：1.0.0.0

Anwendungszeitstempel: 504a7d42

模块名称：KinectStudioConnector32.dll

Fehlermodulversion：1.5.2.222

Fehlermodulzeitstempel: 5015e310

Ausnahme 代码：c0000005

Ausnahmeoffset: 00007198

Betriebsystem版本：6.1.7601.2.1.0.256.48

Gebietsschema-ID：1031

祖萨茨信息 1: 867d

Zusatz信息2：867dcfba8c79c419cc83e8596b854db9

祖萨茨信息 3: 614f

祖萨茨信息 4：614fd16b3adacbd899bb6a7de15896be

当我大约一周前最后一次运行它时，一切正常。可能是因为显卡驱动程序更新或类似原因？

# uitableview - 无法访问自定义 UITableViewCell 中的自定义 UILabel

> ID：12326775
> 
> 赞同：1
> 
> 时间：2012-09-07T23:48:27.333
> 
> 标签：uitableview, uilabel

这是 Nsr（只是 xcoding 的初学者），使用 xcode 4.3.3，

我通过故事板制作了一个带有自定义 UITableviewcell 的自定义 UITableview，我的自定义单元格中有一个 UIBUtton 和一个 UILabel。我删除了单元格选择（也清除了背景），以便只能访问作为自定义 UILabel 的背景的按钮。

由于使用数据数组，现在有一堆按钮，当我单击任何按钮时，它会转到另一个视图（详细视图），我想要的只是从先前选择的设置自定义标签（设置在详细视图上）带有“标签”的按钮...表示新标签 = 上一页从自定义表格视图中单击的标签..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    Custom *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[Custom alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    cell.myLabel.text = [myArray objectAtIndex:indexPath.row];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    [self.myTable reloadData];

} 
```

我希望你能解决我的问题，非常抱歉我的英语很差。请帮助我，我真的一团糟，因为这个问题已经花了我 3 天的时间 :( 提前谢谢，干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:15:06.140

函数返回自定义单元格，但在标题中您编写 UItableviewCell 将其更改为自定义

# mysql - Magento 无法连接 MySQL

> ID：12326782
> 
> 赞同：-2
> 
> 时间：2012-09-07T23:49:24.027
> 
> 标签：mysql, magento, magento-1.6

有人搞砸了服务器后，Magento 无法连接 MySql DB。
第一次尝试，我使用`mysql -u <username> -h localhost -p`并未能通过身份验证。
经过一番努力，[*这个人*](https://stackoverflow.com/a/1667615/1057429)帮助了我（解决方案在评论中），所以我终于成功地使用 Magento 的凭据连接到数据库。但是后来我无法远程连接，[*这个*](https://stackoverflow.com/questions/1673530/error-2003-hy000-cant-connect-to-mysql-server-on-127-0-0-1-111)没有帮助，因为`--skip-networking`禁用了远程连接，但我终于想通了（现在我不记得我做了什么，要么在`my.cnf`或中改变了一些东西`/etc/hosts`）。 所以现在我可以在本地和远程

连接 Magento 用户名/密码（在 中配置）。 尽管如此，Magento 仍会打印出[无法连接 MySql](https://stackoverflow.com/questions/2138959/confusing-pdo-only-problem-cant-connect-through-socket-access-denied-cant-co)的错误。`configuration.php`

我检查了`local.xml`和`config.xml`（在 下`<Magento root>/app/etc`），两者似乎都配置正确。

我开始考虑从头开始安装整个东西，问题是没有任何好的备份，我不确定这样做/是否会丢失数据，但如果我必须这样做，我会备份文件+数据库并继续努力......有什么
想法吗？

* * *

**更新**

经过无休止的挖掘，显然与local.xml和config.xml在同一目录下还有其他XML文件。删除这些文件（这些文件是作为备份创建的，但带有 .xml 扩展名），问题就解决了。

结论：如果您备份 xml 文件，请保存备份，`file.xml.backup`这样它就不会被视为具有 xml 扩展名的文件！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:58:11.873

如果您正在考虑重新安装整个东西，作为前言，我是否可以建议您在与混乱服务器不同的服务器上执行此操作 - 只是为了将数据保留在旧服务器上，以防万一出现问题。您可能还想在同一台服务器上执行此操作，但使用不同的虚拟主机、主文件夹和 mysql 数据库。

这是我在将 Magento 项目迁移、导入和其他与 Magento 相关的东西从一台服务器移动到另一台服务器时使用的过程。

这要求您可以从 shell 访问 mysql + mysqldump。

这是我在带有 LAMP 的基于 Debian 的发行版上经常使用的程序。

* * *

## 在源服务器上

**1.清洁BD**

如果您认为从新目标服务器下载的数据库过于繁重，这是必要的。另外，请确保您确实知道要截断哪些表。我无法确切地说出哪一个，因为这取决于您的 Magento 版本。

粗略地说，截断索引表 + core_url_rewrite、日志表、cron_schedule、平面目录表、数据流批处理表和配置文件历史记录、报告聚合表。

**2.备份数据库**

```
mysqldump -h [host] -u [user] -p'[password]' [dbname] > magento.sql 
```

**3\. 清理你的 Magento 文件系统**

从您的 Magento 根文件夹：

```
rm -rf var/session/* && rm -rf var/cache/* && rm -rf var/log/* 
```

**4\. 归档您的 Magento 文件系统**

从您的 Magento 根文件夹：

```
tar -zcvf magento.tar.gz . 
```

* * *

## 在目标服务器上

以您喜欢的任何方式检索您的 magento.sql 和 magento.tar.gz（wget，从 SSH GUI 客户端复制/粘贴...）并将它们放在新的 Magento 根目录中。

**5\. 导入你的数据库**

```
mysql -h [your_host] -u [user] -p'[password]' [dbname] 
```

这将在您的新数据库上打开 mysql shell

```
mysql> SET FOREIGN_KEY_CHECKS = 0;
mysql> source /full/path/to/magento.sql
...
mysql> SET FOREIGN_KEY_CHECKS = 1; 
```

**6.提取你的magento.tar.gz**

从新的 Magento 根目录

```
tar -zxvf magento.tar.gz 
```

您现在应该可以看到您的网站。可能需要对 app/etc/local.xml 进行一些权限修改和微调，以使其适合您的目标服务器 MySql 配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:21:49.230

尝试从后端刷新缓存或删除 /var/cache/*

# java - LWJGL 鼠标滚轮输入

> ID：12326783
> 
> 赞同：2
> 
> 时间：2012-09-07T23:49:46.897
> 
> 标签：java, mouse, lwjgl, mousewheel

我想知道如何使用 LWJGL 的 Mouse 类获得以下操作：

*   当鼠标滚轮向下滚动时
*   当鼠标滚轮向上滚动时
*   按下鼠标滚轮时

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:31:25.147

按照[lwjgl javadoc](http://www.lwjgl.org/javadoc/org/lwjgl/input/Mouse.html)中的说明，尝试调用

```
 Mouse.getDWheel(); // Scroll amount
    Mouse.isButtonDown(2); // Scroll wheel pressed? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-17T06:31:25.090

对于 LWJGL 3，您可以这样做

```
import org.lwjgl.glfw.GLFW;
import org.lwjgl.glfw.GLFWScrollCallback;

// ...

float mouseWheelVelocity = 0;

GLFW.glfwSetScrollCallback(windowId, new GLFWScrollCallback() {
    @Override public void invoke (long win, double dx, double dy) {
        System.out.println(dy);
        mouseWheelVelocity = (float) dy;
    }
}); 
```

用你的替换`windowId`变量。确保它在那个时候被初始化。然后您可以保存`dy`显示鼠标滚轮旋转变化的参数（+1 和 -1）。

# objective-c - 动画视网膜图像

> ID：12326785
> 
> 赞同：1
> 
> 时间：2012-09-07T23:50:32.343
> 
> 标签：objective-c, ios, ipad

我正在尝试为一些图像设置动画。这些图像在非视网膜 iPad 上运行良好，但它们的视网膜对应物很慢，并且动画不会以指定的速率循环播放。我正在使用的代码如下所示，该方法每 1/25 秒调用一次。这种方法似乎比`UIViewAnimations`.

```
if (counter < 285) {
        NSString *file = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"Animation HD1.2 png sequence/file_HD1.2_%d", counter] ofType:@"png"];
            @autoreleasepool {
                UIImage *someImage = [UIImage imageWithContentsOfFile:file];
                falling.image = someImage;
            }
        counter ++;
    } else {
        NSLog(@"Timer invalidated");
        [timer invalidate];
        timer = nil;
        counter = 1;
    }
} 
```

我意识到有很多图像，但帧数较少的动画的性能是相同的。就像我说的，非视网膜动画效果很好。上面的每张图片大约是 90KB。我做错了什么还是这仅仅是 iPad 的限制？老实说，当它可以处理复杂的 3D 游戏之类的东西时，我很难相信它无法处理这样的事情，所以我想我做错了什么。任何帮助，将不胜感激。

**编辑1：**

从下面的答案中，我编辑了我的代码，但无济于事。执行以下代码会导致设备崩溃。

在`viewDidLoad`

```
NSString *fileName;
myArray = [[NSMutableArray alloc] init];
for(int i = 1; i < 285; i++) {
    fileName = [NSString stringWithFormat:@"Animation HD1.2 png sequence/HD1.2_%d.png", i];
    [myArray addObject:[UIImage imageNamed:fileName]];
    NSLog(@"Loaded image: %d", i);
}
falling.userInteractionEnabled = NO;
falling.animationImages = humptyArray;
falling.animationDuration = 11.3;
falling.animationRepeatCount = 1;
falling.contentMode = UIViewContentModeCenter; 
```

动画方法

```
-(void) triggerAnimation {
    [falling startAnimating];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T00:38:55.983

首先，Retina iPad 上的动画性能是出了名的不稳定。也就是说，您可以做一些事情来确保您的动画获得最佳性能（无特定顺序）。

1.  **预加载图像**- 正如其他一些人所提到的，当您必须在绘制图像之前等待读取图像时，您的动画速度会受到影响。如果你使用 UIImageView 的动画属性，这个预加载将被自动处理。

2.  **使用正确的图像类型**- 尽管文件大小有优势，但使用 JPEG 代替 PNG 会显着降低动画速度。PNG 压缩较少，系统更容易解压缩。此外，Apple 还针对读取和绘制 PNG 图像对 iOS 系统进行了显着优化。

3.  **减少混合**- 如果可能，请尝试从动画图像中移除任何透明度。确保图像中没有 Alpha 通道，即使它看起来完全不透明。您可以通过在预览中打开图像并打开检查器来进行验证。通过减少或移除这些透明像素，您可以消除系统在显示图像时必须执行的额外渲染通道。这可以产生重大影响。

4.  **使用 GPU 支持的动画**- 不建议您当前使用计时器为图像设置动画的方法以获得最佳性能。通过不使用 UIViewAnimation 或 CAAnimation，您将强制 CPU 完成大部分动画工作。Core Animation 和 UIViewAnimation 的许多动画技术都是由 OpenGL 优化和支持的，它使用 GPU 来处理图像和动画。图形处理是 GPU 的用途，利用它可以最大限度地提高动画性能。

5.  **避免像素错位**- 确保动画图像在屏幕上显示时的尺寸正确。如果您在制作动画或使用不正确的帧时拉伸图像，系统必须做更多的工作来处理每一帧。此外，当系统尝试将图像定位在小数像素上时，对任何帧或点值使用整数将避免抗锯齿。

6.  **小心阴影和圆角**- CALayer 有很多简单的方法来创建阴影和圆角，但是如果您在动画中移动这些图层，系统通常会在动画的每一帧中重新绘制图层。使用 shadowOffset 属性指定阴影时就是这种情况（使用 UILabel 的阴影属性不会渲染每一帧）。此外，边框和使用 maskToBounds 和 clipToBounds 将更加注重性能，而不仅仅是使用图像编辑器来裁剪实际资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:12:13.203

这里有几点需要注意：
如果“下降”是 UIImageView，请确保它的内容模式显示类似“中心”而不是某种缩放（当然，请确保您的图像适合它）。
除此之外，正如@FogleBird 所说，测试您的设备是否有足够的内存来预加载所有图像，如果没有，请尝试至少通过使用图像文件创建 NSData 对象来预加载数据。
您对 @autorelease 池的使用不是很有用，您最终会创建一个自动释放对象，它只做一件事 - 删除对已保留对象的引用 - 没有内存增益，但性能损失。
如果有的话，你应该已经包装了文件名格式化程序代码，并且考虑到这个方法是由 NSTimer 调用的，它已经被包装在一个自动释放池中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:32:45.870

只是想指出-当您使用图像名称创建 NSString 时-“动画 HD1.2 png 序列/HD1.2_%d.png”是什么？

看起来您正在尝试在那里放置路径，请尝试仅使用图像名称 - 例如。“HD1.2_%d.png”。

# coldfusion - 如何检索 YouTube 字幕轨道

> ID：12326788
> 
> 赞同：1
> 
> 时间：2012-09-07T23:51:18.847
> 
> 标签：coldfusion

有人可以告诉我如何检索 YouTube 字幕轨道吗？我正在阅读[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_captions#Retrieve_Caption_Track)，但我不知道从哪里开始。

我应该使用 cfhttp 命令还是其他命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:01:24.540

是的，你会使用 cfhttp。您首先需要获取有关视频本身的信息。根据文档，如果存在字幕轨道，它将存在于标签中。所以寻找它，如果它存在，你再调用一次 cfhttp 来获取它。这也可能是我们添加到[YoutubeCFC](http://youtubecfc.riaforge.org/)项目中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:10:36.063

您可以通过从 Web 开发人员控制台复制来获取它。

我发现它在 #player .html5-video-player .html5-video-controls #caption-window-0 .caption-window-transform .captions-text 下面动态变化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:29:01.803

是的，您可以使用 java 中的 httpclient 类。创建它的对象并使用可以从社交网站获取信息。获取更多详细信息。

# c# - 在 ScrollViewer Windows 8 Metro 中查找控件

> ID：12326794
> 
> 赞同：0
> 
> 时间：2012-09-07T23:52:47.597
> 
> 标签：c#, xaml, microsoft-metro

我正在尝试在 XAML 中执行此操作：

```
TextBox tb = (TextBox)e.Item.FindControl("tvNote"); 
```

我在滚动查看器中有一个文本框，我需要找到它的值。这是我的代码：

```
 <Grid x:Name="itemDetailGrid" Margin="0,60,0,50">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Image Grid.Row="1" Margin="0,0,20,0" Width="180" Height="180" Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}" Visibility="Collapsed" />
            <StackPanel x:Name="itemDetailTitlePanel" Grid.Row="1" Grid.Column="1">
                <TextBlock x:Name="itemTitle" Margin="0,-10,0,0" Text="{Binding Name}" Style="{StaticResource SubheaderTextStyle}"/>
                <TextBlock x:Name="itemSubtitle" Margin="0,0,0,20" Text="{Binding Description}" Style="{StaticResource SubtitleTextStyle}"/>

                <TextBlock Grid.Row="2" Grid.ColumnSpan="2" Margin="0,20,0,0" Text="{Binding Price, Mode=TwoWay,Converter={StaticResource PriceValueConverter}}"  Style="{StaticResource BodyTextStyle}"/>
                <TextBox x:Name="tvQuantity"/>
                <TextBox x:Name="tvNotes"/>
                <Button x:Name="btnAdd" Content="Add" Click="btnAdd_Click"/>
            </StackPanel>
        </Grid>
    </ScrollViewer> 
```

使用按钮单击，我如何找到 TV Note？这是我的按钮点击：

```
public void btnAdd_Click(object sender, RoutedEventArgs e)
    {
        Button btnAdd = (Button)sender;

        int quan = 0;
        bool q = int.TryParse(tvQuantity.Text, out quan);
        if (q == false)
        {
            MessageDialog messageDialog = new MessageDialog("Please enter a valid quantity.", "Quantity Invalid");
            messageDialog.ShowAsync();
            return;
        }

        //this causes an issue for items in an existing order

        Product product = btnAdd.CommandParameter as Product;
        IEnumerable<OrderDetail> query = App.CurrentOrder.OrderDetails.Where(a => a.Name == product.Name);

        if (query.Count() == 0)
        {

            //insert order
            Repository.AddOrderDetail(product.Name, product.Description, product.Price, quan, App.CurrentOrder.Id, tvNote.Text, product.Category);
            MessageDialog messageDialog = new MessageDialog(product.Name + " has been successfully added to your order.", "Item Added");
            messageDialog.ShowAsync();
            messageDialog.Commands.Add(new UICommand("OK", new UICommandInvokedHandler(YesCommandInvokedHandler)));

        }
        else
        {
            OrderDetail orderDetail = btnAdd.CommandParameter as OrderDetail;
            orderDetail.Quantity = quan;
            orderDetail.OrderDetailNote = tvNote.Text;
            Repository.UpdateOrderDetail(orderDetail.Id, orderDetail.Category, orderDetail.Description, orderDetail.Name, orderDetail.OrderDetailNote, orderDetail.OrderId, orderDetail.Price, quan);
            MessageDialog messageDialog = new MessageDialog(orderDetail.Name + " has been successfully updated.", "Item Updated");
            messageDialog.ShowAsync();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:53:34.980

我在您的 XAML 中没有看到 tvNote？我懂了：

```
<TextBox x:Name="tvNotes"/> 
```

所以，也许这是一个错字？

如果这是在 DataTemplate 中，那么您需要切换到使用不同的技术，因为 FindName 不起作用，如此[处所示](http://www.wiredprairie.us/blog/index.php/archives/1730)。

# cakephp - 从评论中获取一些额外信息

> ID：12326802
> 
> 赞同：0
> 
> 时间：2012-09-07T23:54:35.997
> 
> 标签：cakephp, model

所以，我有一个使用 CakePHP 的基本会员系统。他们可以发布东西，我想添加一个评论系统。

所以我在数据库中制作了表格，并使模型和用户/帖子/评论以这种方式链接：

用户型号：

```
public $hasMany = array("Post", "Comment"); 
```

帖子模型：

```
public $belongsTo = "User";
public $hasMany = "Comment"; 
```

评论型号：

```
public $belongsTo = array("User", "Post"); 
```

它似乎工作得很好，我正确地得到了一篇文章的评论，这里是一篇文章的调试：

```
array(
    'Post' => array(
        'id' => '25',
        'title' => 'Rocket Club',
        'description' => 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam elementum sem ac sem imperdiet cursus. Quisque venenatis pulvinar ornare. Donec rutrum, lacus vel imperdiet sagittis, metus risus interdum ante, iaculis venenatis arcu nibh et odio.',
        'image' => '25-75da9db5.jpg',
        'created' => '2012-09-07 01:40:14',
        'user_id' => '19'
    ),
    'User' => array(
        'password' => '*****',
        'id' => '19',
        'username' => 'Axiol',
        'mail' => '*****',
        'firstname' => 'Arnaud',
        'lastname' => 'Delante',
        'description' => 'C'est moi le monsieur qui est derrière ce site. Dingue hein ?',
        'local' => '4420 Saint-Nicolas, Belgique',
        'twitter' => 'Axiol',
        'facebook' => 'axiol',
        'gplus' => '100906827397700671747',
        'github' => 'Axiol',
        'website' => 'http://www.axioland.me',
        'created' => '2012-09-04 02:10:31',
        'lastlogin' => '2012-09-07 01:38:44',
        'active' => '1'
    ),
    'Comment' => array(
        (int) 0 => array(
            'id' => '1',
            'content' => 'Test test d'un joli commentaire constructif et tout pour aider la personne qui a postée l'image.',
            'post_id' => '25',
            'user_id' => '19'
        )
    )
) 
```

但是，我想要更多。我想知道是否有一种简单的方法可以获取有关发表评论的用户的一些额外信息（例如他的昵称和他的邮件）？有内置的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T02:22:32.880

有两种方法可以做到这一点。

1-`'recursive' => 2`在您的`find()`通话中设置。这种方法的问题是它会从二级关联中带来所有的数据，这可能太多了。

2- 使用[Containable behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，并尝试这样的事情：

```
$this->Post->find('first', array('conditions' => array('Post.id' => 1), 'contain' => array('User', 'Comment', 'Comment.User'))); 
```

# jquery - Jquery fadeIn 和 CSS 媒体查询

> ID：12326806
> 
> 赞同：0
> 
> 时间：2012-09-07T23:55:14.723
> 
> 标签：jquery, css

**问题：**

我有一个在页面加载时淡入的导航栏。然后一段文本延迟淡入。由于在文本元素上导致内联样式的事实逐渐消失，这会破坏设置为在较小屏幕分辨率下隐藏文本的媒体查询。

如果您删除为文本进行淡入淡出的脚本，您将明白我的意思。我怎样才能解决这个问题，以便 jQuery 不会破坏我的媒体查询。那么，只有当媒体查询的元素可见时，我怎样才能让文本淡入呢？

**jsFiddle：**

[http://jsfiddle.net/visualdecree/RAWUG/](http://jsfiddle.net/visualdecree/RAWUG/)

**CSS**

```
.banner-title{
    display: none;
}

.bar-top{
    height: auto;
    padding: 1.3em 0 1.3em 0;
    background: pink;
    margin: -135px 0 2.5em 0;
}

@media only screen and (min-width: 300px) {
    .banner-title{
        display: block;
        margin: 0;
        width: 100%;
        color: #333;
        font-style: italic;
        font-size: 1.1em;
        padding: 0 0 0 1%;
    }
}​ 
```

**jQuery**

```
$(function() {

    $(".bar-top").delay(700).animate({marginTop:'0px'}, 750, 'swing');

    $(".banner-title").delay(1500).addClass("fade");
        $(".fade").fadeIn("slow")
        $(".fade").css("display":"none");
        $(".fade").hide();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:03:21.033

你有一个语法错误`$(".fade").css("display":"none");`应该是`$(".fade").css("display", "none");`或`$(".fade").css({"display":"none"});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:21:09.703

问题是它们相对于淡入的文本向下移动的链接的位置，我修复了它[JsFiddle](http://jsfiddle.net/RAWUG/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:31:29.857

这是一种不言自明的方法：（小提琴 - [http://jsfiddle.net/joplomacedo/RAWUG/3/](http://jsfiddle.net/joplomacedo/RAWUG/3/)）

```
 $(".bar-top").delay(700).animate({
        marginTop: '0px'
    }, 750, 'swing');

    if ( $(".banner-title").css('display') == 'block' ) {
        $(".banner-title").delay(1500).addClass("fade");
        $(".fade").fadeIn("slow");
        $(".fade").hide();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T00:24:18.370

好吧，看来我的解决方案还可以。任何有改进的人请随时添加。我发现该修复程序正在运行第二个函数，该函数基本上查看屏幕宽度并覆盖由`fadeIn`在页面加载时运行的任何内联样式设置。

**jsFiddle**

[http://jsfiddle.net/visualdecree/RAWUG/4/](http://jsfiddle.net/visualdecree/RAWUG/4/)

如果您发现问题或错误，请告诉我，这可能会对遇到类似问题的人有所帮助。

# objective-c - 在 drawRect 中从 CIImage 绘制 UIImage：

> ID：12326809
> 
> 赞同：1
> 
> 时间：2012-09-07T23:56:00.840
> 
> 标签：objective-c, ios, cocoa-touch, core-image

我正在学习如何绘制 UIImages 和 CGI​​mages，使用 CIFilters 等。为了测试我的知识，我制作了一个带有滑块的小型测试应用程序，它以编程方式更改药水精灵的颜色并将其显示在屏幕上（使用 CIHueBlendMode CIFilter）。完成后，我想清理相对冗长的代码，并注意到我可以使用 UIImage 的 imageWithCIImage: 方法直接从 CIImage 到 UIImage，而不是从过滤器输出的 CIImage 到 CGImage 再到 UIImage。

但是，当我尝试使用 drawInRect: 绘制生成的 UIImage 时，没有绘制任何内容。当然，通过 CGImage 阶段可以纠正这一点。我对此的理解是，*从 CIImage 制作 UIImage 会导致 UIImage 中的 NULL CGImage 属性，该属性用于 drawInRect:*。它是否正确？如果是这样，有没有比通过 CGImage 和 UIImage 更好的方法来显示 CIImage？我可以只画一个用 CIImage 制作的 CGImage，但这会翻转图像，这会导致另一个问题。目前，我首先将我绘制的任何内容包装在 UIImage 中以处理翻转。还有其他更有效的方法吗？

**太长; 未读：**有没有更好的方法来绘制 CIImage，而不是将它变成一个 CGImage，然后是一个 UIImage 并绘制它？绘制 CGImage 时处理翻转的最佳方法是什么？

感谢任何可以回答我的一些问题的人。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:33:55.793

在对什么是 CIImage 进行了一些研究之后，我现在意识到你不能跳过从 CIImage 制作 CGImage 的步骤，即使你可以，它也不会真正变得更有效率，因为你仍然必须无论如何处理CIImage。[正如 Apple 文档](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/QuartzCoreFramework/Classes/CIImage_Class/Reference/Reference.html)中所述， CIImage 并不是真正的图像，它是在变成 CGImage 时进行处理的。这也是为什么如果我在我的项目中使用 Time Profiler，我会看到我在 drawRect: 方法中 99% 的时间都花在了 createCGImage: 上，而不是使用 CIFilters。

至于应对 Core Graphics 和 iPhone 之间坐标系变化的最有效方法，似乎将对象包装在 UIImage 实例中是最简单（不确定最好）的方法。它很简单，而且相对有效。另一种选择是转换图形上下文。

* * *

如果我在三天内没有得到比我自己更好的答案，我会将其标记为已接受。

# c# - 如何更改 ServiceStack 中的默认 ContentType？

> ID：12326810
> 
> 赞同：2
> 
> 时间：2012-09-07T23:56:19.250
> 
> 标签：c#, .net, web-services, rest, servicestack

我在 ServiceStack中[注册了一个新的内容类型：](http://www.servicestack.net/ServiceStack.Northwind/vcard-format.htm)

```
appHost.ContentTypeFilters.Register("application/x-my-content-type", 
   SerializeToStream, DeserializeFromStream); 
```

如果客户端在 http 流中发送内容类型，一切都会按预期工作。

不幸的是，我有一个不受 HTTP 请求头控制且不发送内容类型的客户端。

如何让 ServiceStack 为该路由设置默认内容类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T23:56:19.250

在每个 ServiceStack [/metadata 页面上](http://mono.servicestack.net/json/metadata?op=Hello)，都列出了客户端请求特定 Content-Type 的不同方式：

> **要覆盖客户端 HTTP Accept** Header中的 Content-type，请附加**?format=xml**或 add 。**格式**扩展

**例如，客户端可以使用?format=x-my-content-type**指定您的自定义 ContentType ，添加`.x-my-content-type`扩展名或通过指定 HTTP 标头（在 HttpClient 中）：

> 接受：应用程序/x-my-content-type

否则，如果您的 HttpClient 不发送 Accept 标头，您可以在 AppHost 中指定默认内容类型：

```
SetConfig(new HostConfig {
     DefaultContentType = "application/x-my-content-type"
}); 
```

*注意：ServiceStack 中的所有配置选项都设置在`HostConfig`.*

从 Web 浏览器调用 Web 服务时的问题是，它们通常会`Accept: text/html`根据合同要求 ServiceStack 通过返回 HTML（如果已启用）来强制执行。

为确保始终返回您的 Content-Type，您可能还需要禁用 HTML 功能：

```
SetConfig(new HostConfig {
    EnableFeatures = Feature.All.Remove(Feature.Html),
}); 
```

否则，如果您想**覆盖 Accept**标头，您可以通过在 HttpResult 中装饰您的 Response DTO 来强制您的服务始终返回您的 Content-Type，即：

```
return new HttpResult(dto, "application/x-my-content-type"); 
```

否则，在您的服务之外的任何地方（例如请求/响应过滤器），您都可以在任何可以访问 a 的地方设置响应内容类型`IHttpRequest`：

```
httpReq.ResponseContentType = "application/x-my-content-type"; 
```

# php - Magento：获取给定客户组的产品价格

> ID：12326814
> 
> 赞同：4
> 
> 时间：2012-09-07T23:56:51.840
> 
> 标签：php, magento, product, rule, magento-1.7

在 magento 1.7 上，我为“特殊会员”客户群创建了 20% 折扣的促销价格规则。

我想显示两个价格。我以为会有类似的东西

```
$_product->getPriceByCustomerGroup( $groupId ); 
```

**目标**

（未登录）：

*   正常价格：10.99 美元
*   会员价：5.99 美元

（会员登录）：

*   正常价格：10.99 美元
*   会员价：5.99 美元

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T23:29:31.723

好吧，有点乱，但我想我有。

您可以通过调用产品的 setCustomerGroupId 来获取特定组 ID（在下面的例子中为 3）的价格。唯一需要注意的是，一旦您调用 setCustomerGroupId 函数，您就不能将客户组 ID 设置为不同的组并接收该组的价格 - 它设置一次价格，然后不会覆盖它。

在下面的示例中，我有一个产品的正常价格为 399.99 美元，适用于除组 id 3 之外的所有组。对于组 id 3，我设置了 20% 折扣的目录价格规则。

如果我运行下面的代码，我会得到：

```
product A: 399.99
product B (group id 3): 319.9900
product B (group id 0): 319.9900 
```

请注意我第二次设置客户组时它不会改变价格

```
$_productA = $this->getProduct();

$_productB = Mage::getModel('catalog/product')->load($_productA->getId());  
$_productB->setCustomerGroupId(3);

echo 'product A: '.$_productA->getFinalPrice().'<br/>';
echo 'product B (group id 3): '.$_productB->getFinalPrice().'<br/>';

$_productB->setCustomerGroupId(0);

echo 'product B (group id 0): '.$_productB->getFinalPrice().'<br/>'; 
```

第二次幸运:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T21:26:55.830

在破解了一段时间后实现了我自己的愿望

```
$now = Mage::getSingleton('core/date')->timestamp( time() );
$websiteId = Mage::app()->getStore()->getWebsiteId();
$customerGroup = 4;

Mage::getResourceModel('catalogrule/rule')->getRulePrice( $now, $websiteId, $customerGroup, $_productId); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-27T05:24:16.900

这是我对这个问题的解决方案。我还添加了关于其他解决方案和一些有用技巧的评论。

```
<?php
//Get the product
$_product = $this->getProduct();
//or load it from the DB by product ID: $_product = Mage::getModel('catalog/product')->load($_id);

$qty = 1; //price for only one item
Mage::log("Current customer GroupID ('0' for Not Logged In): ".Mage::getSingleton('customer/session')->getCustomerGroupId());
Mage::log("Initial Product price GroupID (always = Null): ".$_product->getCustomerGroupId());
Mage::log("Initial Product price: ".$_product->getPriceModel()->getFinalPrice($qty, $_product));

$NonMember_gr=1; //"1" - is default group for logged in customers
$Member_gr=2;
$_product->setCustomerGroupId($NonMember_gr);
$NonMemberPrice = $_product->getPriceModel()->getFinalPrice($qty, $_product);
Mage::log("Product Group changed to: ".$_product->getCustomerGroupId());
Mage::log("Non-member price is: ".$NonMemberPrice);

$_product->setCustomerGroupId($Member_gr);
$MemberPrice = $_product->getPriceModel()->getFinalPrice($qty, $_product);
Mage::log("Product Group changed to: ".$_product->getCustomerGroupId());
Mage::log("Member price is: ".$MemberPrice);

$_product->setCustomerGroupId(Mage::getSingleton('customer/session')->getCustomerGroupId());
Mage::log("Product Group returned to: ".$_product->getCustomerGroupId());
Mage::log("Price returned to: ".$_product->getPriceModel()->getFinalPrice($qty, $_product));
?> 
```

之后，您将在日志文件中拥有：

```
2013-12-05T03:01:10+00:00 DEBUG (7): Current customer GroupID ('0' for Not Logged In): 0
2013-12-05T03:01:10+00:00 DEBUG (7): Initial Product price GroupID (always = Null): 
2013-12-05T03:01:10+00:00 DEBUG (7): Initial Product price: 55
2013-12-05T03:01:10+00:00 DEBUG (7): Product Group changed to: 1
2013-12-05T03:01:10+00:00 DEBUG (7): Non-member price is: 40.0000
2013-12-05T03:01:10+00:00 DEBUG (7): Product Group changed to: 2
2013-12-05T03:01:10+00:00 DEBUG (7): Member price is: 25.0000
2013-12-05T03:01:10+00:00 DEBUG (7): Product Group returned to: 0
2013-12-05T03:01:10+00:00 DEBUG (7): Price returned to: 55 
```

如果您没有定义团体价格，它将仅返回一般价格

因此，每次更改 GID 时，此函数都会为客户 GID 返回正确的价格

```
$price = $_product->getPriceModel()->getFinalPrice($qty, $_product); 
```

请小心使用此函数，因为它只会在您最初设置产品客户组 ID 时返回正确的价格一次（null 到 $gid）

```
$price = $_product->getFinalPrice(); 
```

还要小心 Dmitry 的解决方案，因为它返回“原始”产品组价格。这意味着必须为产品定义组价格，并且该价格不受目录规则折扣的影响，因此它可能高于实际最终价格或一般价格。

```
$gr_price_arr = $_product->getData('group_price');
foreach ($gr_price_arr as $gr_price){
    echo '<br>CustomerGroup='.$gr_price['cust_group'].' GroupPrice='.$gr_price['price'];
} 
```

获得目录规则和购物车规则的特殊价格和折扣的一些其他有用功能

```
//get Catalogue Rule by ID
$rule = Mage::getModel('catalogrule/rule')->load($rule_id); 
//get Rule Name and Discount Amount
echo '<br>name: '.$rule->getName().' Amount: '.$rule->getDiscountAmount().'<br>';

//get Cart Rules and Coupon Discounts
$coupon = Mage::getModel('salesrule/rule');
$couponCollection = $coupon->getCollection();
foreach($couponCollection as $c){
    echo 'Code:'.$c->getCode().'--->Discount Amount:'.$c->getDiscountAmount().'<br />'; } 
```

有时检查客户是否登录可能很有用

```
Mage::getSingleton('customer/session')->isLoggedIn() 
```

我希望这会对某人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-04T14:00:48.597

另一种解决方案。如果团价将小于主价，函数 getGroupPrice 返回主价。

```
//get product
$product = Mage::getModel('catalog/product')->load($id);

//get group by code
$group = Mage::getModel('customer/group')->load($code, 'customer_group_code');

//get group price
$product->setCustomerGroupId($group->getId());
$price = $product->getGroupPrice();

//get main price
$product->setCustomerGroupId(null);
$price = $product->getPrice(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T20:30:10.620

这是你如何做到的。经测试，正常工作。

```
<?php
$now = Mage::getSingleton('core/date')->timestamp( time() );
$websiteId = 1; // Choose your store # here
$customerGroup = 4;
$productId = 9369;
$rules = Mage::getResourceModel('catalogrule/rule');
echo $rules->getRulePrice($now, $websiteId, $customerGroup, $productId));
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-01T13:09:01.623

如果有人仍在寻找 1.7.0.2 CE 版本的解决方案，那么这样的代码对我有用（在这种情况下，当我使用产品对象时）：

```
$group_id = 4;
$grp_price = $_product->getData('group_price');
echo $grp_price[$group_id]['price']; 
```

# javascript - innerHTML 不会改变元素

> ID：12326817
> 
> 赞同：0
> 
> 时间：2012-09-07T23:57:11.587
> 
> 标签：javascript, dom, innerhtml

我的页面上有一个 div 元素（“ `main`”），其内容在两个不同的屏幕之间来回变化（它们的 id 是“ `readout`”和“ `num`”），其内容存储为隐藏的 div 元素（使用`display:none`）。每个屏幕都有一个按钮，该按钮设置`main`为另一个隐藏的 div。

由于我努力让 javascript加载，我最终将几乎相同的内容（具有不同的表单名称）放入 main `num.innerHTML`：`main``num`

```
<p>Number of Passengers per Carriage:</p>
<form method="post" action="javascript:void(0);" name="applesForm" onSubmit="setPassengers();">

<input type="text" name="numApples" id="numPassengers" />

<br/><br/>
<input type="submit" name="Submit" value="OK!"/>
</form> 
```

`setPassengers()`成功将`main`的内容设置为`readout`. `readout`成功将`main`的内容设置为`num`（与 的原始内容几乎相同`main`）。但它不会回到读数。

这里是`setPassengers()`and `setPassengersAgain()`，它们是相同的，但表单名称不同：

```
function setPassengers()
    {
            passengers=document.applesForm.numPassengers.value;

            document.getElementById('main').innerHTML=readout.innerHTML;
        }

        function setPassengersAgain()
        {
            passengers=document.applesFormAgain.numPassengers.value;

            document.getElementById('main').innerHTML=readout.innerHTML;
        } 
```

所以我的问题是：1）为什么不`num`改为`readout`？2）有没有办法`num`在页面加载时立即加载以简化代码？

编辑：我可以使用 onload，这意味着这`num`是唯一被破坏的位......

编辑2：这是隐藏的div：

```
<div id="readout" style="display:none">
<p>Throughput per hour:</p>
<p id="output">--</p>

<p>Average Dispatch Time:</p>
<p id="avDisTime">--</p>

<form method="post" action="javascript:void(0);" name="dispatchForm" onSubmit="dispatch();i++;">
<input type="submit" name="Submit" value="Press on Dispatch!"/>
</form>
<br/>

<form method="post" action="javascript:void(0);" name="resetTimesForm" onSubmit="resetTimes();">
<input type="submit" name="Submit" value="Reset Times"/>
</form>

<form method="post" action="javascript:void(0);" name="resetAllForm" onSubmit="resetAll();">
<input type="submit" name="Submit" value="Reset All"/>
</form>
</div>

<!--back to default page-->
<div id="num" style="display:none">

<p>Number of Passengers per Carriage:</p>

<form method="post" action="javascript:void(0);" name="applesFormAgain" onSubmit="setPassengersAgain();">

<input type="text" name="numApples" id="numPassengers" />

<br/><br/>
<input type="submit" name="Submit" value="OK!"/>
</form>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:27:05.147

你没有发布你的 HTML 代码，所以我不知道它的样子，但你可以使用类似的东西：

HTML：

```
<button id="changeMain">Change #main</button>
<div id="main">
    <div id="readout" class="screen show">
        Readout
    </div>
    <div id="num" class="screen">
        Num
    </div>
</div> 
```

CSS：

```
#main>.screen{display:none;}
#main>.screen.show{display:block;} 
```

JavaScript：

```
var els=[document.getElementById('readout'),document.getElementById('num')],current;
function addClass(el,c){
    var arr=el.className.split(' ');
    if(arr.indexOf(c)>-1){return;}
    arr.push(c);
    el.className=arr.join(' ');
}
function delClass(el,c){
    var arr=el.className.split(' ');
    var i=arr.indexOf(c);
    if(i===-1){return;}
    arr.splice(i,1);
    el.className=arr.join(' ');
}
document.getElementById('changeMain').onclick=function(){
    if(!current){
        for(var i=0,l=els.length;i<l;i++){
            if(els[i].className.indexOf('show')>-1){
                current=i;
                break;
            }
        }
    }
    delClass(els[current],'show');
    current=(current+1)%els.length;
    addClass(els[current],'show');
} 
```

[**演示**：http://jsfiddle.net/CUgqh/](http://jsfiddle.net/CUgqh/)

**说明**：

如果你想要一些内容 insode `#main`，你应该把它放在里面（隐藏或显示）。然后，我们`.screen`用`#main>.screen{display:none;}`except `.screen.show`:隐藏所有内容`#main>.screen.show{display:block;}`。

然后，JavaScript 代码：

首先，我们创建一个包含元素的数组：

```
var els=[document.getElementById('readout'),document.getElementById('num')],current; 
```

`c`还有一个向元素添加/删除类的函数`el`：

```
function addClass(el,c){
    var arr=el.className.split(' ');
    if(arr.indexOf(c)>-1){return;}
    arr.push(c);
    el.className=arr.join(' ');
}
function delClass(el,c){
    var arr=el.className.split(' ');
    var i=arr.indexOf(c);
    if(i===-1){return;}
    arr.splice(i,1);
    el.className=arr.join(' ');
} 
```

我们为按钮创建一个事件：

```
document.getElementById('changeMain').onclick=function(){
    if(!current){
        for(var i=0,l=els.length;i<l;i++){
            if(els[i].className.indexOf('show')>-1){
                current=i;
                break;
            }
        }
    }
    delClass(els[current],'show');
    current=(current+1)%els.length;
    addClass(els[current],'show');
} 
```

上面的代码做了：

*   如果是第一次未定义当前`els`的 ' 索引 ( `current`)，我们默认搜索哪个元素具有该类`show`。
*   它将类删除`show`到当前显示的元素，因此它消失了。
*   它将 1 添加到`current`（如果它是最后一个`els`' 元素，则变为 0
*   它将类添加`show`到当前元素，因此它出现了。

# jquery - jQuery - 限制整个可排序列表中子列表中的可放置容量

> ID：12326819
> 
> 赞同：1
> 
> 时间：2012-09-07T23:57:16.973
> 
> 标签：jquery, html-lists, jquery-ui-sortable, droppable

所以是的，这个可能有点令人困惑——我有一个可排序的列表，在这个列表中，我将有子列表，这些子列表也是可排序的，并且可以接受它们内部的总体列表中的列表元素（嵌套）。我需要做的是阻止这些内部列表在达到一定数量的子元素后接受更多元素。

这是我迄今为止尝试过的：

javascript方面：

```
$(document).ready(function() {
    $(".sortable").sortable({
        connectWith: ".sortable",
        revert:true
    }).disableSelection();

    $(".inner").droppable({
        accept: function(d) {
            // this here refers to the inner list, correct?
            if ($(this).children().length > 1) {
                return false;
            }
            else {
                return true;
            }
        },
        drop: function() {
        // blah blah blah
        }
    });
}); 
```

HTML 方面：

```
 <ul id="mainlist" class="sortable">
            <li class="ui-state-default">Item 1</li>
            <li class="ui-state-default">Item 2</li>
            <li class="ui-state-default">Item 3</li>
                   <li class="ui-state-default">Item 4</li>
            <li class="ui-state-default">
                Place here:[[  &nbsp;&nbsp;
                <ul class="sortable inner">
                           <li class="ui-state-default">Item 5</li>
                </ul>
                &nbsp;&nbsp;
                ]]
            </li>
        </ul> 
```

有没有人看到我做错了什么？有没有更好的方法来做到这一点？

# animation - 我可以将动画 SVG 渲染到 Canvas 吗？

> ID：12326822
> 
> 赞同：5
> 
> 时间：2012-09-07T23:58:44.390
> 
> 标签：animation, canvas, svg

我想创建一个 SVG 动画，然后将其渲染到 Canvas。我知道 CanVG，但我不确定它是否满足我的需求：在 Canvas div 中显示 SVG 元素，而不是在“本机”SVG 窗口中使用 javascript 进行动画处理。当我查看 CanVG 示例代码时，它似乎指向一个 SVG 文件，而不是利用属于同一文件的一部分的 SVG 代码，并由 javascript 实时操作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T05:18:19.580

前段时间我也遇到过这个问题，并尝试了上面提到的所有可能性，不幸的是没有结果。经过一番研究，我找到了一种将 SVG 注入 Canvas 的方法，虽然有点痛苦和额外的工作是可能的。因此解决方案是定义 svg 元素，然后将其推送到数组中，然后将该 SVG 渲染为图像。

这是一个简短的代码片段：

**SVG**部分：

```
var data = "data:image/svg+xml," +
    "<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'>" +
        "<foreignObject width='100%' height='100%'>" +
            "<div xmlns='http://www.w3.org/1999/xhtml' style='font: bold 160px Myriad Pro, Arial, Helvetica, Arial, sans-serif'>" +
                "<span style='color:rgb(32,124,202); opacity: 0.8; -webkit-text-stroke-color: white; -webkit-text-stroke-width: 2px'>" + letters[pos] + "</span>" +
             "</div>" +
            "</foreignObject>" +
    "</svg>";
characters.push(data); 
```

和**JS**部分：

```
var letters = [...] // a pool of characters 
var images = new Array(letters.length);

for (var i=0; i< letters.length; i++) {
    var textPosition = WIDTH/2 - (letters.length * CHAR_DISTANCE)/2;
    var txt = new Text(letters[i], textPosition + (i*CHAR_DISTANCE), HEIGHT/2,
    (Math.random() * 3) + 5 , (-Math.random() * 10) + 5);
    images[i] = new Image();
    images[i].src = characters[i];
    textArray.push(txt);
} 
```

您可以在这里查看整个源代码：[https ://esimov.com/experiments/javascript/404/](https://esimov.com/experiments/javascript/404/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T03:43:08.773

有几个库（如 CanVG）只是将 SVG 转换为 Canvas 绘图命令。他们对动画帮助不大。

对于动画，你将不得不自己做。您可以尝试使用 CanVG 将 SVG 绘制到画布上，因为它正在动画，使用计时器来更新画布，但这非常混乱，除非浏览器也支持 SVG，否则无法完成（如果支持，为什么要你想做吗？）

如果您想实时*操作*SVG，您将不得不正确使用 SVG。否则，您需要在画布上滚动您自己的**所有状态和交互性。**那里没有捷径[1]，抱歉。

[1] 好吧，有一些用于画布对象交互的库允许您使用 SVG 对象作为它们的对象，例如 fabric.js。但取决于你想要什么，这可能还远远不够。

# ruby - Bundler 如何知道如何使用特定的 gem 版本？

> ID：12326823
> 
> 赞同：1
> 
> 时间：2012-09-07T23:58:55.763
> 
> 标签：ruby, gem, bundler

我注意到存在标记 gem 版本发布的习惯。这样，我可以理解 bundler 会尝试检查特定的标签，并尝试构建该特定的 gemspec。

但是，我也从 Sven Fuchs那里找到了[gem-release gem。](https://github.com/svenfuchs/gem-release)我本来希望凹凸命令正在为每个版本的 gem 创建标签。但是，我看到的只是对`version.rb`文件的修改（没有创建标签）。当我说：

```
gem "some_gem","0.0.1" 
```

当我说：

```
gem "some_gem","0.0.2" 
```

bundler 是如何安装它们的？如果不是上面的命令（假设我克隆了 gem 的 repo），我写：

```
gem "some_gem","0.0.3",:path => "~/some/path" 
```

现在如何使用正确的 gem 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:05:19.230

Bundler 默认从[http://rubygems.org/](http://rubygems.org/)获取它的 gem ，而不是从 Github。当作者实际发布它们时，Rubygems 具有实际发布的版本。

如果您告诉 bundler 从 git 地址安装，例如。with`:git => "git://github.com/svenfuchs/gem-release.git"`或 github with `:github => "svenfuchs/gem-release"`，它实际上会从存储库中获取它。

如果没有指定其他选项，bundler 将在默认分支 (master) 上获取最新提交 (HEAD)。在这种情况下，bundler 将版本视为提交哈希。同样，如果您指定`:branch`选项，它只是使用不同的分支。

如果您指定版本，它会找到与您请求的版本匹配的标签。您应该知道标签不是提交的一部分。git 存储库中的标记是指向提交的指针。[您可以通过在https://github.com/svenfuchs/gem-release/tags](https://github.com/svenfuchs/gem-release/tags)上浏览找到所有标签。

您会注意到该标记`v0.4.1`指的是提交哈希`34f563bd294c2...`，它链接到[提交](https://github.com/svenfuchs/gem-release/commit/34f563bd294c2123f682cc8258ceaac8429e4a3e)。但是，由于标记不是提交的一部分，因此您不会在提交本身中看到标记操作。您只会看到标签引用了该提交。

# php - 上传图片而不刷新页面然后显示图片

> ID：12326824
> 
> 赞同：0
> 
> 时间：2012-09-07T23:58:59.087
> 
> 标签：php, jquery, html

我有一个允许用户选择图像的按钮 - 如下所示：

```
 <div id="fileUpload">
          <form id="joinPhotoUploadForm" method="POST" enctype="multipart/form-data">
            <input type="file" id="file"/>
          </form>
          <div id="fakefile">
            <img src="../../images/button-grey-enhanced.png" id="usePhotoSubmit" alt="BROWSE for Photo">
            <span id="usePhoto">BROWSE</span>
          </div>
        </div> 
```

然后我需要将图像上传到服务器并在同一页面上显示图像而不刷新页面。我尝试了以下方法：

```
$('input#file').change(function() {
  $('form#joinPhotoUploadForm').submit();
}); 
```

关于如何在不刷新页面的情况下将图像上传并显示在同一页面上的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:31:35.137

您可以使用现代浏览器中可用的 FileReader 和 File API 在上传文件之前读取文件客户端并显示预览，然后允许用户在验证预览后上传。您还可以实现将图像从桌面拖放到浏览器，而不是传统的文件选择输入。

这是它的教程：http: [//www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

在较旧的浏览器中，您可以通过重新加载页面回退到传统的文件输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:27:58.633

您是否考虑过像[Uploadify](http://www.uploadify.com)或[Pupload](http://www.plupload.com/)这样的精美上传器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:34:34.753

您可以尝试本教程中提供的解决方案 [http://www.youtube.com/course?list=EC7C25B2F18F68F3EF&feature=plcp](http://www.youtube.com/course?list=EC7C25B2F18F68F3EF&feature=plcp)

# javascript - JSON - 什么 http 标头从浏览器发送到外部服务器 json 文件

> ID：12326827
> 
> 赞同：0
> 
> 时间：2012-09-07T23:59:21.687
> 
> 标签：javascript, json, browser, http-headers

让我们想象一下下面的情况。

我有一个网站 mysearchengine.com，然后我使用来自外部网站的搜索建议，例如 eniro.no：

```
http://map01.eniro.no/search/search.json?q=de&index=yp_sug&profile=pl&pageSize=10&callback=C 
```

eniro.no 是否可以看到他们的 JSON 是从网站 mysearchengine.com 请求的？

我的问题是我想使用另一个（不是我的）服务器的一些 JSON 资源，我想知道他们是否看到我正在这样做？

以上只是一个示例，我发现最简单的方法是向我展示关于 JSON 如何工作的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:02:01.707

是的，通过以下两种主要方式之一：

HTTP Referrer 标头： [http ://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#z14](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#z14)

直接 IP 地址记录：如果他们记录您的 IP 地址，他们可能会进行反向查找以找到您的网址。或者，如果您使用共享 IP，如果您滥用他们的网络资源，他们可能会阻止您的 IP 地址。

注意：您可以选择是否传递referer header。这取决于您的服务器。但是，无法屏蔽哪些计算机/服务器请求远程资源（是的，使用代理他们将能够知道代理的 IP 请求了资源，但这不是重点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:29:35.740

您是否希望用户单击您网站上的按钮，然后您的网站将使用 javascript 向另一个网站发出 GET 请求，然后将内容放到您的网站上？这就是所谓的跨域资源共享 ( [CORS](http://www.w3.org/TR/cors/) )。

如果您正在控制 javascript，则可以在请求中插入额外的标头，并且由于发出请求的是用户的浏览器，因此该站点只会看到该用户的信息，而不是您的站点的信息。

除此之外，Andrew M. 的回答是正确的，基于浏览器，可能会发送一个引用的标头，我不确定您是否可以通过 JS 摆脱它。

# validation - 如何重置 qTip2 验证？

> ID：12326828
> 
> 赞同：0
> 
> 时间：2012-09-07T23:59:31.540
> 
> 标签：validation, jquery-validate, qtip2

我在 ASP.Net MVC 项目中有一个表单，我在该项目上使用 qTip2 显示验证错误。在该表单上，我还有根据单选按钮所做的选择激活/停用的文本字段。当不使用字段时，我设置了它们的 disabled="disabled" 属性。这确保了这些字段的客户端验证（jQuery 非侵入式验证）也被停用。现在，我想知道如何为被禁用的字段重置 qTip2“气泡”。

假设我有单选按钮 1 和 2，分别启用文本框 A 和 B。我们还说默认选择单选按钮1，并且选择相应的单选按钮时，该文本框A和B是必需的字段。如果我按下提交按钮而不填写任何文本字段，文本框 A 旁边会出现一个 qTip 错误气泡。现在，如果我按下单选按钮 2，我必须清除该气泡，禁用文本框 A 及其验证，并启用文本框 B 及其验证。但是，如果此时我在不填写文本框 B 的情况下按提交，则不会出现错误气泡并且不会提交表单。

我尝试了以下命令的各种组合来完成此操作，但随后验证错误被完全禁用：

```
$('.qtip').remove();
$('.qtip').hide();
$("input.input-validation-error").removeClass("input-validation-error"); // watch out for the error message labels or they won't go away
$('form').data('validator').resetForm();
$("form").validate().form(); 
```

无论我在单击单选按钮并禁用/启用正确的文本框后执行这些命令的何种组合，qTip 气泡都会消失，但即使我单击提交按钮它们也不会再次出现，并且其他错误应该出现在表单上.

我可能没有使用正确的命令来重置 qTip 验证气泡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:19:03.420

好的，我在发布问题后立即找到了解决方案。我使用了这个页面上提出的解决方案[http://johnculviner.com/?tag=/unobtrusive-validation-reset](http://johnculviner.com/?tag=/unobtrusive-validation-reset)我修改了一点。我添加了以下行： $form.find('input').qtip('destroy');

它给出了这个：

```
//Taken from: http://johnculviner.com/?tag=/unobtrusive-validation-reset
(function ($) {
    $.fn.resetValidation = function () {
        var $form = this.closest('form');

        //Destroy qTip error bubbles (http://craigsworks.com/projects/forums/thread-using-qtip-with-jquery-validation-framework)
        //$form.find('input:not(.errormessage)').qtip('destroy');
        $form.find('input').qtip('destroy');

        //reset jQuery Validate's internals
        $form.validate().resetForm();

        //reset unobtrusive validation summary, if it exists
        $form.find("[data-valmsg-summary=true]")
            .removeClass("validation-summary-errors")
            .addClass("validation-summary-valid")
            .find("ul").empty();

        //reset unobtrusive field level, if it exists
        $form.find("[data-valmsg-replace]")
            .removeClass("field-validation-error")
            .addClass("field-validation-valid")
            .empty();

        return $form;
    };

    //reset a form given a jQuery selected form or a child
    //by default validation is also reset
    $.fn.formReset = function (resetValidation) {
        var $form = this.closest('form');

        $form[0].reset();

        if (resetValidation == undefined || resetValidation) {
            $form.resetValidation();
        }

        return $form;
    }
})(jQuery); 
```

然后，当单击单选按钮时，我调用 $("form").resetValidation(); 在启用/禁用正确的字段之后。

# php - 在没有 else {} 的情况下结束函数内部的布尔值（哲学）？

> ID：12326833
> 
> 赞同：1
> 
> 时间：2012-09-08T00:00:38.517
> 
> 标签：php

我很抱歉发布了一个非常多余的问题。`else {}`我想知道如果代码只是停止或返回一个值是否真的有必要使用。理论上，真的有必要放入 `else{}`这些场景吗？

```
function check() {
    if($something == "something") {
        exit;
    }
    echo "hello";
} 
```

或者

```
function check() {
    if($something == "something") {
        return true;
    }
    echo "hello";
} 
```

我发布这个的原因是因为我看到了一些“专业”的代码，我猜他们认为它看起来“不错”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:03:07.083

从语法上讲，它非常好。

这也是一种非常常见的使用模式，恕我直言，使代码更具可读性。

为了代码清晰/干净的编码，如果你返回一个布尔值，即使 if() 不匹配，你也应该返回一个布尔值。

```
function check() {
    if($something == "something") {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:06:22.353

您发布的代码是有效的，为了更清楚，我还会包括其他内容。

```
function check() {
   if($something == "something") {
    return true;
   } else{
    return false;
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:03:54.413

对于第二种情况，如果函数应该返回一些东西，你不需要 else，但你至少应该返回 false。就个人而言，我不喜欢放置 else，因为它需要开发人员通读更多的条件来确定返回的内容。相反，在底部，将 return true/false 放在底部，并将您拥有的任何条件放在它上面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T00:03:58.487

这不是必需的。

然而，真正的问题是这样做是否会提高可读性。这是有争议的，并且可能因开发人员而异，具体取决于偏好和编码标准。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T00:46:22.433

没有硬性规定。是否使用 else 子句的问题可能由缩进决定。如果您希望两个块中的代码对齐，则将其放入。如果您不这样做，则将其保留。

# javascript - 使用按钮更改 javascript 变量

> ID：12326837
> 
> 赞同：0
> 
> 时间：2012-09-08T00:01:37.630
> 
> 标签：javascript, function, onclick

我有一个全局变量。

```
var w = 4; 
```

和一个功能：

```
function do() {
    width = w;
    //make something
} 
```

现在我想用一个按钮将变量 w 更改为 8。

```
<input type="button" onclick="do(w = 8;)" value="set 8"> 
```

该函数可以使用 w = 8 并忘记旧的 w = 4！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:04:24.650

您需要放入`w`适当的范围：

```
var w = 4;

function do(width) {
    w = width;
    // ...
} 
```

然后将参数传递给您的函数：

```
<input type="button" onclick="do(8)" value="set 8"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-08T00:05:36.930

恐怕您的代码几乎从头到尾都是错误的。您确实需要阅读有关使用 JavaScript 的基本语法的书。

也就是说，这将满足您的要求：

```
var w = 4; // Bad idea to have a global variable.  It is also unused.

function do(w) { // You pass a parameter here.
    var width = w; // no need for this because now you have a 'w'
    //make something
}

<input type="button" onclick="do(8)" value="set 8"> <!-- the value does nothing here --> 
```

# css - 溢出：在 SVG 上可见

> ID：12326838
> 
> 赞同：32
> 
> 时间：2012-09-08T00:01:52.133
> 
> 标签：css, svg, webkit, overflow

是否可以`overflow: visible`在`<svg>`元素上设置？

[这个关于 jsfiddle](http://jsfiddle.net/Nu5m6/)的简单示例在我可以访问的每个浏览器（某些版本的 Chrome 和 Firefox）中都会中断，因为它们的行为就像`overflow: hidden`.

谁能告诉我 svg 支持是否仍然太不成熟而无法做如此简单的事情，或者我在代码中做错了什么？

我的实际用途`overflow: visible`是图表上的范围轴，其中刻度的下半部分`-0`被切断。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-08T13:15:56.397

我假设您的意思是 HTML 中的内联 <svg> 元素，如果是这样，那么这只是一个实现限制。IE9+ 允许`overflow:visible`使用 <svg> 元素，但到目前为止其他浏览器还没有 AFAIK。

一种可能的解决方法（这实际上是首先应该如何完成恕我直言）是指定一个`viewBox`定义svg内部坐标系的a。然后你在这个坐标系内绘制东西。如果东西被剪裁（或者换句话说，如果元素在`viewBox`区域之外），那么只需相应地增加`viewBox`宽度和/或高度。

如果您想知道您的特定 的良好默认值，请`viewBox`尝试`[0 0 width height]`（其中宽度和高度是您目前拥有的 svg 的大小），然后只需增加高度，直到底部刻度完全可见。

**2014 年更新：** 跨浏览器仍然有点不一致，但它已经到达那里。Firefox 和 IE`overflow:visible`对内联 svg 元素的支持，并且 Blink (Opera 23/Chrome 36) 也增加了对它的支持，详情请参阅[bugreport](http://code.google.com/p/chromium/issues/detail?id=231577)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-19T08:28:17.400

```
overflow: visible  
box-shadow : 0px -0px 10000px transparent /*trick for chrome*/ 
```

向 SVG 添加一个巨大的 box-shadow ，或者将 SVG 添加到一个带有巨大阴影的 DIV 中解决它。在 Chrome 中，我注意到溢出被裁剪到 box-shadow 限制。

# ios - openURL 没有打开 Safari

> ID：12326840
> 
> 赞同：4
> 
> 时间：2012-09-08T00:02:27.633
> 
> 标签：ios, safari, uiactionsheet, openurl

我正在尝试使用操作表通过链接打开 safari。变量设置正确并相应地显示链接，但由于某种原因，Safari 无法打开，我不知道为什么......

**这是代码：**

```
-(void)actionSheet {
    sheet = [[UIActionSheet alloc] initWithTitle:@"Options"
                                    delegate:self
                           cancelButtonTitle:@"Cancel"
                      destructiveButtonTitle:nil
                           otherButtonTitles:@"Open in Safari", nil];

    [sheet showInView:[UIApplication sharedApplication].keyWindow];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex != -1) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:self.url]];
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T08:44:35.860

```
NSString *strurl = [NSString stringWithFormat:@"http://%@",strMediaIconUrl];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:strurl]];
use http:// must. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:19:18.873

要在 Safari 中打开链接，您只需执行以下操作。`urlAddress`是`NSString`您在需要设置的任何地方设置的。或者，您可以替换`urlAddress`为`@"someString"`.

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: urlAddress]]; 
```

另外，您是否检查过您的头文件是否正在实现该`UIActionSheetDelegate`协议？

编辑：

在您的通话中尝试以下操作以查看是否生成错误：

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex != -1) {

        NSUrl *myURL = [NSURL URLWithString:self.url];

        if (![[UIApplication sharedApplication] openURL:myURL]) {
            NSLog(@"%@%@",@"Failed to open url:",[myURL description]);
        }

    }
} 
```

# r - 寻找算法来做长的成对的核苷酸比对

> ID：12326841
> 
> 赞同：3
> 
> 时间：2012-09-08T00:02:28.997
> 
> 标签：r, alignment, bioinformatics, bioconductor, sequence-alignment

我正在尝试扫描可能的`SNPs`并将`indels`支架与参考基因组的子序列对齐。（原始读数不可用）。我正在使用`R/bioconductor`Biostrings 包中的 `pairwiseAlignment 函数。这对于较小的脚手架工作得很好，但是当我尝试将 56kbp 脚手架与错误消息对齐时失败了：

> QualityScaledXStringSet.pairwiseAlignment 中的错误（模式 = 模式，：无法分配大小为 17179869183.7 Gb 的内存块

我不确定这是否是错误？; 我的印象是`Needleman-Wunsch algorithm`used by`pairwiseAlignment`是一个`O(n*m)`我认为意味着计算需求在`3.1E9`操作顺序上的`(56K * 56k ~= 3.1E9)`。似乎`Needleman-Wunsch`相似度矩阵也应该占用 3.1 gigs 的内存。不确定我是否没有正确记住 big-o 符号，或者这实际上是在给定`R scripting`环境开销的情况下构建对齐所需的内存开销。

有没有人建议使用更好的对齐算法来对齐更长的序列？已经使用 BLAST 完成了初始比对，以找到要比对的参考基因组区域。我`BLAST`对正确放置插入缺失的可靠性并不完全有信心，而且我还没有找到与 biostrings 提供的用于解析原始 BLAST 对齐的 API 一样好的 API。

顺便说一句，这是一个复制问题的代码片段：

```
library("Biostrings")
scaffold_set = read.DNAStringSet(scaffold_file_name) #scaffold_set is a DNAStringSet instance
scafseq = scaffold_set[[scaffold_name]] #scaf_seq is a "DNAString" instance

genome = read.DNAStringSet(genome_file_name)[[1]] #genome is a "DNAString" instance

#qstart, qend, substart, subend are all from intial BLAST alignment step
scaf_sub = subseq(scafseq, start=qstart, end=qend) #56170-letter "DNAString" instance
genomic_sub = subseq(genome, start=substart, end=subend) #56168-letter "DNAString" instance

curalign = pairwiseAlignment(pattern = scaf_sub, subject = genomic_sub)
#that last line gives the error: 
#Error in .Call2("XStringSet_align_pairwiseAlignment", pattern, subject,  : 
#cannot allocate memory block of size 17179869182.9 Gb 
```

较短的对齐（数百个碱基）不会发生该错误。我还没有找到错误开始发生的长度截止

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T05:43:11.927

所以我使用[Clustal](http://clustal.org)作为对齐工具。不确定具体的性能，但在进行大量的多序列比对时，它从来没有给我带来任何问题。这是一个运行整个 .fasta 文件目录并对齐它们的脚本。您可以修改系统调用上的标志以满足您的输入/输出需求。只需查看 clustal 文档即可。这是在 Perl 中，我不会过多地使用 R 进行对齐。您需要编辑脚本中的可执行路径以匹配您计算机上 clustal 的位置。

```
#!/usr/bin/perl 

use warnings;

print "Please type the list file name of protein fasta files to align (end the directory    path with a / or this will fail!): ";
$directory = <STDIN>;
chomp $directory;

opendir (DIR,$directory) or die $!;

my @file = readdir DIR;
closedir DIR;

my $add="_align.fasta";

foreach $file (@file) {
 my $infile = "$directory$file";
 (my $fileprefix = $infile) =~ s/\.[^.]+$//;
 my $outfile="$fileprefix$add";
 system "/Users/Wes/Desktop/eggNOG_files/clustalw-2.1-macosx/clustalw2 -INFILE=$infile -OUTFILE=$outfile -OUTPUT=FASTA -tree";
} 
```

# text - 如何从 pluzz.fr 下载字幕

> ID：12326842
> 
> 赞同：0
> 
> 时间：2012-09-08T00:02:34.483
> 
> 标签：text, video-streaming, television, subtitle

请问有没有办法从 pluzz fr 或 beta 版下载字幕/隐藏式字幕，[http](http://pluzz.francetv.fr) ://pluzz.francetv.fr ？

这是一个带有隐藏字幕的示例视频（Tout le monde veut prendre sa place）：[http ://pluzz.francetv.fr/videos/tout_le_monde_veut_prendre_sa_place_,69573658.html](http://pluzz.francetv.fr/videos/tout_le_monde_veut_prendre_sa_place_,69573658.html)

顺便说一句，您需要一个法国 IP 才能观看视频。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:00:13.573

我也一直在研究这个问题并取得了一些进展。为了更新您的示例，（对于未来 6 天可用的视频）我使用了[http://pluzz.francetv.fr/videos/tout_le_monde_veut_prendre_sa_place_,70697467.html](http://pluzz.francetv.fr/videos/tout_le_monde_veut_prendre_sa_place_,70697467.html)

使用该 URL 末尾的 ID 号，转到该 URL 以获取有关该程序的类似 XML 的信息文件，即 www.pluzz.fr/appftv/webservices/video/getInfosOeuvre.php?mode=zeri&id-diffusion=70697467

如果您查看该生成的文件，您将看到有关该程序的各种信息，包括最后：incrust type="accessibilite"。如果字幕可用，则后面是指向字幕文件的相对 URL。对于此示例，您可以看到：

```
<incrust type="accessibilite">/appftv/webservices/video/getFichierSmi.php?smi=france2/70697467.smi&source=azad</incrust> 
```

为 pluzz 网站的相对链接添加前缀，结果为：[http ://www.pluzz.fr/appftv/webservices/video/getFichierSmi.php?smi=france2/70697467.smi&source=azad](http://www.pluzz.fr/appftv/webservices/video/getFichierSmi.php?smi=france2/70697467.smi&source=azad)

它为您提供 SAMI 格式的字幕（文件扩展名为 .smi）。这是一种类似于 XML 的字幕格式，但我还没有（还没有！）找到任何可以正确显示它们的播放器，也没有找到一种简单的方法将它们转换为干净的 SRT 格式。但是，我确实认为将其转换为 SRT 格式将是一项相对简单的任务（对于具有一定编程技能的人），但那不是我......也许 OP 有这些技能并且可以从这里获取它？

PS。同样有趣的是，您不需要法国 IP 即可访问信息文件或字幕文件，只需访问视频文件即可。

# facebook-graph-api - 允许用户从列出所有用户朋友的对话框中选择朋友，并使用 Javascript Facebook SDK 在他们的墙上发帖

> ID：12326843
> 
> 赞同：1
> 
> 时间：2012-09-08T00:02:35.380
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, friend

我想在我的 Facebook 应用程序中有一个按钮，它会弹出一个对话框，允许用户选择朋友的墙来发帖。我很确定这种对话框存在，但到目前为止，我只能找到一个对话框，它允许您向朋友发送消息或发布到特定 Facebook 用户的墙上（没有对话框），但我在任何地方都找不到该文档描述了如何调出允许选择要发布到的用户的对话框。这可能吗？如果是这样，有人可以发布指向某些文档的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:56:27.683

我最终使用了这些天的 Facebook-friend-selector，它工作得非常好。

它具有 Facebook 风格的外观和感觉并满足了我的需求：

![在此处输入图像描述](../Images/14ef6045b4a6d1d4a1ca0584bf7561e9.png)

[https://github.com/thesedays/Facebook-friend-selector](https://github.com/thesedays/Facebook-friend-selector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T13:21:21.150

您可以使用 Facebook 的**Multi-Friend-Selector(MFS)**。

文档：[https ://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/](https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/)

# java - 一个知道可达性的缓存

> ID：12326847
> 
> 赞同：2
> 
> 时间：2012-09-08T00:03:35.987
> 
> 标签：java, caching, guava, weak-references, soft-references

我想要一个最大保留容量为 N 的缓存。我允许它最多容纳 N 个对象，否则这些对象将有资格进行 GC。现在，如果我的应用程序本身当前持有 N+1 对之前添加到缓存中的对象的强引用，我希望缓存也持有 N+1。为什么？因为缓存不会比其他情况更长时间地阻止这个 N+1th 对象被收集，而且我可以用更大的哈希表来换取更多的缓存命中。

另一种说法是，我想要一个对象缓存，它保留添加到其中的所有对象，同时它们保持强可达性，并且还保留足够的非强可达性对象以保持其大小 == N。

## 例子

我们创建了一个 N=100 的缓存。大小从 0 开始。添加了 150 个对象，大小为 150。这些对象中的 100 个变得非强可达（弱，软，等等）。缓存驱逐其中的 50 个并保留 50 个，大小为 100。添加了 49 个更强大的可达对象。大小仍然是 100，但现在其中 99 个是强可达的，只有一个是非强可达的。发生的事情是 49 个旧的、非强可达的对象被新的 49 个替换，因为新的对象是强可达的。

## 动机

我怀疑对于许多用例来说，这实际上是一件直观的事情。通常，缓存的容量会权衡缓存命中概率以保证最大内存使用。了解它所持有的对象的可达性后，缓存可以在不改变其最大内存使用保证的情况下提供更高的缓存命中概率。

## 麻烦

我担心这在JVM上是不可能的。我希望别人告诉我，但如果你知道一个事实是不可能的，如果有理由的话，我也会接受这个答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T07:11:03.093

您可以将条目添加到配置为 LRU 或 FIFO 缓存的 LinkedHashMap。你也可以有一个 WeakHashMap。如果将密钥添加到两个映射，LHM 将阻止清理，即使它在 WHM 中。一旦 LHM 丢弃了密钥，它可能在 WHM 中，也可能不在 WHM 中。

例如

```
private final int retainedSize;
private final Map<K,V> lruMap = new LinkedHashMap<K, V>(16, 0.7f, true) {
    @Override
    protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
        return size() > retainedSize;
    }
};
private final Map<K,V> weakMap = new WeakHashMap<K, V>();

public void put(K k, V v) {
    lruMap.put(k, v);
    weakMap.put(k,v);
}

public V get(K k) {
    V v = lruMap.get(k);
    return v == null ? weakMap.get(k) : v;
} 
```

这样做的原因之一是 WeakHashMap 就像是一下子变得更清晰，所以你的命中率可能会急剧下降。这种方法可确保在您遇到 Full GC 后，您的性能不会因为您试图赶上而下降太多。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:21:31.073

退房`WeakHashMap`。过时的引用将被自动删除。在放置之前，您可以检查大小是否超过阈值并跳过输入新值。

或者，如果大小高于阈值，您可以覆盖 put 并丢弃该值。

此方法将按照您的建议工作，因为您不需要缓存驱逐策略，如果大小大于您的阈值，您可以跳过放入新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T02:11:29.503

我认为你想要的是有道理的，但也许没有那么多。让我们假设这些值非常大（几千字节），否则其他地方的强保存值的缓存也可能变得昂贵。忽略此开销，您的缓存确实具有恒定的内存成本。但是，我不确定这个目标是否值得追求——我对如何为整个程序使用大约恒定的内存量很感兴趣（我不想留下太多未使用的内存，无论如何我都不想开始交换）。

想法：缓存应该使用*注册*的弱（或软）引用。¹您使用另一个线程`ReferenceQueue.remove()`在循环中调用并检查某些条件²。根据它，您要么从缓存中删除相应的条目（如 Guava 所做的那样），要么通过恢复值`reference.get()`，从而暂时保护它不被垃圾收集。³ . 这应该可以，但是在每次 GC 运行期间都会花费一些时间。

* * *

¹覆盖`finalize()`也可以。**实际上，看起来这是唯一的方法，因为`reference.get()`入队时总是返回 null，因此不能用于复活。**

²条件应该是“每次 GC 运行 100 次”。

³我不确定 GC 是否真的以这种方式工作，但我想确实如此。如果没有，那么您可以使用该值的副本。我也不确定下一次值失去强可达性时会发生什么，但同样，这肯定是可以解决的（例如，创建一个新的参考）。

# ruby-on-rails - 具有相同行为但不同属性的类的 Rails 继承

> ID：12326848
> 
> 赞同：0
> 
> 时间：2012-09-08T00:03:37.413
> 
> 标签：ruby-on-rails, inheritance, associations, polymorphism, scalability

我一直在研究解决我的问题的最佳方法，我最初是作为单表继承实现的，但我非常担心可伸缩性，因为表中可能会有数千列。

所以问题是我想要产品，每个产品的方法完全相同，唯一的区别是每个产品包含的属性。在这种情况下，多类继承（rails 本身不支持？）似乎是最好的方法或某种多态关联。

我想朝着以下方向努力

```
#product.rb
Class Product < ActiveRecord::Base

 attr_accessible :title .....

 def to_s # some arbitrary method used by all extending classes
 ....
 end

end

#book.rb
class Book < Product
 attr_accessible :author...
end 
```

所以我希望这本书继承产品的方法，而不是让产品知道每个子类所需的属性。如果可能的话，通过一个查询获得所有产品。

我需要知道解决这个问题的最佳方法，如果我做错了，请注意上面编写的代码只是为了简化我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:55:25.290

您可以做的是创建一个模块并将其包含在几个不同的模型中。

首先，在你的 lib 目录中创建一个文件

即）my_module.rb

```
module MyModule
  def full_name
    "#{first_name} #{last_name}"
  end
end 
```

然后，确保在 Rails 应用程序启动时加载模块：

在 config/application.rb 中：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

最后，将其包含在您的模型中：

即）app/models/thing.rb

```
class Thing < ActiveRecord::Base
  attr_accessible :first_name, :last_name

  include AdditionMod
end 
```

您可以在控制台中对其进行测试：

```
@thing = Thing.create(first_name: "Awesome", last_name: "Module")
@thing.full_name
=> "Awesome Module" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:32:57.533

发现我可以将 H-store 与 postgres 结合使用，这使我可以拥有一个包含模式较少哈希的列，该哈希可以与 postgres 的功能一起使用（例如，请查看[http://hstoredemo.herokuapp .com/](http://hstoredemo.herokuapp.com/) )

# mysql - 选择列还是空？

> ID：12326849
> 
> 赞同：0
> 
> 时间：2012-09-08T00:03:38.297
> 
> 标签：mysql, select, null

我可以这样选择吗？

```
SELECT DISTINCT idClient, idAcc,Description 
FROM client, account 
WHERE (account.idCliente = client.idCliente  
    OR account.idCliente is NULL ) 
```

我遇到了麻烦，因为它向我显示了重复的结果：x 我该怎么做？

谢谢

编辑：

结果

```
idClient idAcc Description
    1   3   good    
    1   2   bad 
    1   3   bad 
```

请注意，我为相同的 idAcc 获得了 2 个不同的描述

编辑2：

我真的需要通过 NULL 或 Not NULL 进行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:07:16.927

我会重写您的查询以使用 LEFT JOIN 以便您获得所有有 client.idCliente 的情况，以及那些 account.idCliente 不存在的情况。

像这样：

```
SELECT DISTINCT Description
FROM client 
LEFT JOIN account ON client.idCliente = account.idCliente; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:07:28.627

您正在使用隐式连接。尝试使用`JOIN`这样的显式：

```
SELECT DISTINCT Description 
FROM client
LEFT JOIN account ON account.idCliente = client.idCliente 
```

# java - java中&的正确使用

> ID：12326850
> 
> 赞同：0
> 
> 时间：2012-09-08T00:03:53.137
> 
> 标签：java

```
if ( 25 <= si & < 30 ) 
```

不工作，我无法找到一种方法来谷歌有关正确使用 & 的信息。

出现的错误消息说它期望 > 是 & 所在的位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T00:15:13.227

正确的语法是

```
if ( 25 <= si & si < 30 ) 
```

请注意，**这*不是*使用按位`&`运算！！**

在这种情况下，运算符的 LHS 和 RHS`&`是布尔值，因此 Java 将使用非短路逻辑 AND 操作。

你也可以这样写：

```
if ( 25 <= si && si < 30 ) 
```

...即使用短路逻辑与运算符。

你应该使用哪种形式？

*   从语义的角度来看，`&`and`&&`都会给出正确的答案，因为 LH 和 RH 子表达式没有副作用。

*   从性能的角度来看，我希望 JIT 编译器将这两个版本优化为相同（或等效执行）的本机代码。但是，如果优化器不这样做，那么在整个应用程序的上下文中考虑时，两个版本之间的性能差异很可能可以忽略不计。

*   从可读性的角度来看，`&&`表单可能更好……但这只是因为许多 Java 程序员会误读`&`表单，因为他们不明白`&` **在 Java**中不一定是按位的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:10:19.750

请注意，`<`, `<=`,`>`和`>=`是二元运算符，两边都需要一个整数值。编译器正在抱怨，因为在 if 条件中，在 the`&`和 the之间没有任何内容。`<`

`&`此外，您应该了解和运算符之间的区别`&&`。（我已经更正了我认为的区别。有关详细信息，请参阅Java 规范中的[15.22.2\. Boolean Logical Operators &、^ 和 |](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.2)和[15.23\. Conditional-And Operator &&](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.23)。）

综上所述，正确的代码是

```
if (25 <= si && si < 30) 
```

**最后，对于以后的问题，如果您复制并粘贴确切的**错误消息，我们回答您的问题将非常有帮助。通常，释义会丢失我们需要帮助您的许多细节。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T00:13:13.110

与所有 Java 布尔运算符一样，您需要使用该符号两次

即`&&`是为了和

```
|| is for or 
```

因此，您的解决方案应该是

```
(25 <= si && si < 30) 
```

这意味着大于或等于 25 且小于 30 (si = 25 || 26 || 27 || 28 ||29)

# iphone - RestKit 更新到 xcode 4.4.1 后的警告

> ID：12326853
> 
> 赞同：0
> 
> 时间：2012-09-08T00:03:58.217
> 
> 标签：iphone, ios, xcode, restkit

当我将 Xcode 更新到 4.4.1 时，它给了我 22 个使用 RestKit 库的警告。错误是这样的：

```
Direct access to objective-c's isa is deprecated in favor of object_setClass() and object_getClass() 
```

我通过替换修复了 18 个警告：

替换`%lu`为`%u`

替换`object->isa`为`object_getClass(object)`

替换`keyObject->isa`为`object_getClass(keyObject)`

还有 4 个我无法修复的警告，以下是警告及其描述：

文件名 1：RKManagedObjectMappingOperation.m 警告行 1：

```
NSAssert(mapping, @"Attempted to connect relationship for keyPath '%@' without a relationship mapping defined."); 
```

警告说明1：

```
more '%' conversations than data arguments 
```

文件名 2：RKReachabilityObserver.m 警告行 2：

```
return [NSString stringWithFormat:@"<%@: %p host=%@ isReachabilityDetermined=%@ isMonitoringLocalWiFi=%d reachabilityFlags=%@>",
            NSStringFromClass([self class]), self, self.host, self.isReachabilityDetermined ? @"YES" : @"NO",
            self.isMonitoringLocalWiFi ? @"YES" : @"NO", [self reachabilityFlagsDescription]]; 
```

警告说明2：

```
format specifies type int but the argument has type NSString 
```

文件名 3：JSONKit.m 警告行 3：

```
if(JK_EXPECT_F(((id)keys[idx])->isa != encodeState->fastClassLookup.stringClass) && JK_EXPECT_F([(id)keys[idx] isKindOfClass:[NSString class]] == NO)) { jk_encode_error(encodeState, @"Key must be a string object."); return(1); } 
```

警告说明3：

```
Direct access to objective-c's isa is deprecated in favor of object_setClass() and object_getClass() 
```

文件名 4：NSManagedObject+ActiveRecord.m 警告行 4：

```
RKLogError(@"Property '%@' not found in %@ properties for %@", propertyName, [propDict count], NSStringFromClass(self)); 
```

警告说明4：

```
format specifies type id but the argument has type NSUInteger 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:19:44.443

警告1：

```
NSAssert(mapping, @"Attempted to connect relationship for keyPath '%@' without a relationship mapping defined."); 
```

变成

```
NSAssert(mapping, @"Attempted to connect relationship for keyPath '%@' without a relationship mapping defined.", <<put the corresponding keyPath here >> ); 
```

或者

```
NSAssert(mapping, @"Attempted to connect relationship for a keyPath without a relationship mapping defined."); 
```

它说“比数据参数更多的'％'对话”意味着你有占位符，在这种情况下是％@，但没有参数来填充它们。所以要么提供一个参数，要么删除占位符。

警告 2：

```
return [NSString stringWithFormat:@"<%@: %p host=%@ isReachabilityDetermined=%@ isMonitoringLocalWiFi=%d reachabilityFlags=%@>",
        NSStringFromClass([self class]), self, self.host, self.isReachabilityDetermined ? @"YES" : @"NO",
        self.isMonitoringLocalWiFi ? @"YES" : @"NO", [self reachabilityFlagsDescription]]; 
```

变成

```
return [NSString stringWithFormat:@"<%@: %p host=%@ isReachabilityDetermined=%@ isMonitoringLocalWiFi=%@ reachabilityFlags=%@>",
        NSStringFromClass([self class]), self, self.host, self.isReachabilityDetermined ? @"YES" : @"NO",
        self.isMonitoringLocalWiFi ? @"YES" : @"NO", [self reachabilityFlagsDescription]]; 
```

请注意`isMonitoringLocalWiFi=%d`部分获取`%@`而不是`%d`，因为您提供了一个字符串参数但有一个整数占位符。

警告 3：抱歉，无法帮助您解决此问题。可能在我查看代码之后，我会发布更新。

**更新：**尝试更改

```
((id)keys[idx])->isa 
```

到

```
object_getClass( ((id)keys[idx]) ) 
```

警告 4：

```
RKLogError(@"Property '%@' not found in %@ properties for %@", propertyName, [propDict count], NSStringFromClass(self)); 
```

变成

```
RKLogError(@"Property '%@' not found in %d properties for %@", propertyName, [propDict count], NSStringFromClass(self)); 
```

注意第二个占位符应该是`%d`而不是`%@`因为你提供了一个整数，或者在这种情况下是一个 NSUInteger，即`[propDict count]`参数。

# asp.net-mvc - 在 ASP.NET MVC 中放置异常日志的位置

> ID：12326855
> 
> 赞同：1
> 
> 时间：2012-09-08T00:04:54.653
> 
> 标签：asp.net-mvc, exception-handling

谁能解释以下两种方法之间的区别。

登录控制器的 OnException 事件：

```
try
{
    //code         
}
catch
{
    //rollback trasanctions
    throw;
} 
```

或者，登录 catch 块：

```
try
{
    //code   
}
catch
{
   //logging here
   //rollback trasactions
   throw;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:17:52.667

`OnException`当处理请求时发生未处理的异常时，使用Controller的方法。它指示如果发生意外异常应该发生什么功能。你真的应该只在你搞砸或系统以意想不到的、致命的方式失败的情况下使用它作为保护措施。

如果您正在执行一些您希望抛出特定异常的代码，请将其包装在`try`块中，并相应地处理特定异常。这种防御方法将帮助您在问题发生时立即对其进行调试，而不是等待它们冒泡到您不知道原因的地步。

想一想，如果您有多个操作方法并且`OnException`每个控制器只有一个方法，那么您需要处理一个更复杂的问题，因为任何操作方法或过滤器都可能引发错误。但是，如果您捕获了由特定服务调用调用的异常，那么您已经确切地知道是什么导致了意外行为，并且相应地解决它会容易得多。

**阅读此内容以获得更好的理解：** Eric Lippert 有一篇出色的文章，他在其中分解了我们遇到的不同类别的异常，并提供了解决它们的最佳实践。它位于[http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)。如果你不知道 Eric Lippert 是谁，他很聪明，如果你用 C# 编写代码，你应该听他的。他的主要观点是：

*   不要捕获致命异常；无论如何，您对它们无能为力，并且试图通常会使情况变得更糟。

*   修复您的代码，使其永远不会触发愚蠢的异常——“索引超出范围”异常不应该在生产代码中发生。

*   通过调用那些在非异常情况下抛出的令人烦恼的方法的“尝试”版本，尽可能避免令人烦恼的异常。如果你无法避免调用一个令人头疼的方法，请捕获它令人头疼的异常。

*   始终处理表示意外外部条件的异常；一般来说，预测每一个可能的失败是不值得或不切实际的。只需尝试操作并准备处理异常。

## 更新

刚刚意识到我没有明确解决“日志记录”问题。避免在控制器范围内处理致命/外生错误可能最有意义，因为您最终会经常重复您的逻辑。在全局操作过滤器中可以更好地处理此行为。

这篇 codeproject 文章[ASP.NET MVC 中的异常处理](http://www.codeproject.com/Articles/422572/Exception-Handling-in-ASP-NET-MVC)解释了如何覆盖默认值`HandleErrorAttribute`并利用 an`ErrorController`以便可以全局应用它。

此外，以下 5 部分博客系列深入分析了 MVC 应用程序中错误处理的不同选项：http: [//perspectivespace.com/error-handling-in-aspnet-mvc-3-index-在职](http://perspectivespace.com/error-handling-in-aspnet-mvc-3-index-of-posts)

# sql-server - 我需要为我需要的结果集使用可怕的 sql server 循环/游标吗？

> ID：12326863
> 
> 赞同：0
> 
> 时间：2012-09-08T00:06:07.673
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2

我需要一个在列值上“中断”的 sql server 结果集，但是如果我在排名函数中按此列排序，我真正需要的顺序就会丢失。这最好通过例子来解释。我目前正在尝试的查询是：

```
select RANK() over(partition by Symbol, Period order by TradeDate desc) 
    SymbSmaOverUnderGroup, Symbol, TradeDate, Period, Value, Low, LowMinusVal,
    LMVSign
from #smasAndLow3 
```

它返回：

```
Rnk Symbol TradeDate Period Value  Low    LowMinusVal LMVSign
1   A      9/6/12    5      37.09  36.71  -.38        U
2   A      9/5/12    5      37.03  36.62  -.41        U
3   A      9/4/12    5      37.07  36.71  -.36        U
4   A      8/31/12   5      37.15  37.30   .15        O
5   A      8/30/12   5      37.22  37.40   .18        O
6   A      8/29/12   5      37.00  36.00  -1.00       U
7   A      8/28/12   5      37.10  37.00  -.10        U 
```

我在这里需要的排名是：`1,1,1,2,2,3,3`. 所以我需要按 Symbol、Period 进行分区，并且我需要在 LMVSign 上启动一个新分区（它只包含值 U、O 和 E），但我必须按 TradeDate desc 排序。除非我弄错了，否则 LMVSign 的分区或排序将使日期列无法排序。我希望这是有道理的。我在没有光标的情况下疯狂地工作，但我无法让它工作..提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T00:26:55.853

**澄清后更新**：我认为你正在进入岛屿和差距的世界。如果您的要求是按 Symbol、Period 和 LMVSign 对行进行分组，并按 TradeDate 降序排列，当这些列中的任何一个发生变化时对它们进行排序，您可以使用它（[通过 Itzik Ben-Gan 的岛和间隙解决方案](http://www.manning.com/nielsen/SampleChapter5.pdf)）。

```
; with islandsAndGaps as
(
  select *,
      -- Create groups. Important part is order by
      -- The difference remains the same as two sequences
      -- run along, but the number itself is not ordered
         row_number() over (partition by Symbol, Period
                            order by TradeDate)
      -  row_number() over (partition by Symbol, Period
                            order by LMVSign, TradeDate) grp
    from Table1
),
grouped as
(
  select *,
      -- So to order it we use last date in group
      -- (mind partition by uses changed order by from second row_number
      -- and unordered group number
         max(TradeDate) over(partition by LMVSign, grp) DateGroup
    from islandsAndGaps
)
-- now we can get rank
select dense_rank() over (order by DateGroup desc) Rnk,
       *
  from grouped
 order by TradeDate desc 
```

**[看看 Sql Fiddle](http://sqlfiddle.com/#!3/fc89f/4)。**

**旧答案：**

分区重新开始排名。我认为您需要通过以下方式订购：

```
dense_rank() over (order by Symbol, Period, LMVSign desc) Rnk 
```

然后你应该按顺序使用 TradeDate：

```
order by Rnk, TradeDate desc 
```

如果您需要它作为数字，请添加另一列：

```
row_number() over (order by Symbol, Period, LMVSign desc, TradeDate desc) rn 
```

# c# - 是否可以从 C# 调用具有数据集类型参数的 C++ 函数

> ID：12326868
> 
> 赞同：0
> 
> 时间：2012-09-08T00:06:31.003
> 
> 标签：c#, c++, managed-c++

我们有一个带有许多方法的遗留 C++ 程序（标准 C++ 不受管理）。大多数使用char和int的参数。但是，一个具有以下方法签名：

```
Convert(CDataSet &DataSet, CValue &Var, char *pOutput, int &nParser) 
```

我们需要从 C# 调用该方法。我们有一个现有的托管 C++ 类，它可以毫无问题地调用需要 char 和 int 的非托管方法。但是，当需要将数据集传递给它时，如何从 C# 调用 C++ 方法，我们束手无策。有人告诉我们这是不可能的。真的吗？

如果我们不能传递数据集，是否可以传递一个对象，然后让托管类将其转换为数据集以传递给非托管类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:39:02.430

例如，在您的托管 C++ 包装器库中接受 System.Data.DataSet 并将其数据转换为 CDataSet 并调用非托管代码。返回时将更新转换回来（如果需要）。

UPD：通过“转换”我的意思是在你的包装方法中创建一个 CDataSet 类的新实例，从托管对象填充它的数据，然后调用非托管函数。当它返回时，如有必要，将数据传输回原始托管对象并返回。

如果您需要在调用之间或跨进程边界管理对对象的更新（即，即使未传递对象，其他函数调用也会导致对该对象的更新）而不是在非托管对象周围创建一个包装器并提供可让您操作的托管接口所需级别的对象。

# php - MySQL COUNT 显示它正在运行

> ID：12326879
> 
> 赞同：0
> 
> 时间：2012-09-08T00:07:56.903
> 
> 标签：php, mysql, count

我希望以下输出数字“5”，因为数据库中有 5 行，项目 68 和用户 1。但我得到的是这个输出“12345”。

```
$resultb4 = mysql_query("SELECT COUNT(comparedRating) FROM recComparedRating WHERE user1='1' AND itemID='68' GROUP BY itemID AND user1");
while($rowb4 = mysql_fetch_array($resultb4)){
    $countcomparedratings=$rowb4['COUNT(comparedRating)'];
}
echo $countcomparedratings; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:12:39.187

您得到 12345 的原因是因为您的查询返回 5 个结果，而您输出计数的代码只是从查询中输出返回数组的串联。

在不了解您的数据库结构的情况下，我猜您获得“12345”的原因与您的 GROUP BY 子句有关。使用 MySQLWOrkbench 之类的程序连接到数据库并在将查询包含到代码中之前对其进行测试。调试查询是一种节省时间的技术。

另外，我会为 COUNT 值设置别名，以便您在引用列名时只需引用别名。

```
SELECT COUNT(comparedRating) as ratingCount FROM recComparedRating WHERE user1='1' AND itemID='68' GROUP BY itemID AND user1"); 
```

# c# - MVC 3 无法将 int 类型转换为 Model

> ID：12326881
> 
> 赞同：0
> 
> 时间：2012-09-08T00:08:02.240
> 
> 标签：c#, entity-framework

错误：**不能隐式转换类型 INT？为了建模** ，我的数据库配置文件和文章中有 2 个表......当有人在我的页面上创建文章而没有配置文件时，它们都共享一个共同的字段**配置文件 ID ，他们收到的****配置文件 id**为 NULL，但是当他们在那里创建配置文件时我我正在尝试将他们的 profileID 从 NULL 更新为他们从注册配置文件中获得的当前 ID。我收到**无法隐式转换类型 INT？建模**我一直在尝试新事物，但它一直给我这个错误

```
var oldID = (from x in db.Articles
             where a == x.RegistrationID
             select x.ProfileID).FirstOrDefault();

Article article;

var newID = (from x in db.profiles
             where a == x.registrationID
             select x.profileID).FirstOrDefault();

oldID = newID;
article = oldID;
db.Entry(article).State = EntityState.Modified; 
```

错误发生在**article=oldID**行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:16:15.010

执行第一个 LINQ 表达式后，变量`oldID`将获取实例`ProfileID`属性的值。`Article`我猜这个`ProfileID`属性是某种`numeric`类型的。article 是`Article`类的一个实例。通过写作`article=oldId;`，您试图将数值类型设置为不同的类型。那是行不通的！

您可能应该获取旧`Article`对象并将 ProfileID 属性值设置为新值，然后保存。

```
var oldArticle = (from x in db.Articles
             where a == x.RegistrationID
             select x).FirstOrDefault();

var newID = (from x in db.profiles
             where a == x.registrationID
             select x.profileID).FirstOrDefault();

oldArticle.ProfileID=newID;

db.Entry(article).State = EntityState.Modified; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:52:29.677

似乎`Article`具有名为的属性的类（我猜）`ProfileID`是 type `int`。当您将`article`类型`Article`的变量分配给名为的变量`oldId`时，编译器将导致类型不匹配。

请注意，C# 是一种强类型的 OO 编程语言。您必须遵循面向对象的编程规则。

如果您需要更多建议，请参阅 Jeremy 和 David 的评论并更新您的问题。

# javascript - 提交表单时是否可以使用 action="someFunction()" ？

> ID：12326884
> 
> 赞同：0
> 
> 时间：2012-09-08T00:08:25.030
> 
> 标签：javascript, html, ajax, forms

从网上看，我没有看到很多设置函数等于函数的例子。但是，在我发现的几个论坛中，似乎很多人说这种方法没有得到广泛支持。

为了解释我的问题，我有一个表格我想在上面实现它：

```
<table border="0" cellpadding="2" cellspacing="5">
                <th colspan="2" align="center">Check Out</th>
                <form name="checkOut" method="post" onSubmit="return(validate(this))" action="checkOut()"> 
                    <tr><td>Territory Number</td><td><input type="text" name="numberOut" tabindex="1" maxlength="3" size="3" /></td>
                    </tr><tr><td>First Name of Publisher</td><td><input type="text" onKeyUp="showHint(this.value)" name="fName" tabindex="2" maxlength="15"/></td>
                    </tr><tr><td>Last Name of Publisher</td><td><input type="text" onKeyUp="showHint_l(this.value)" name="lName" tabindex="3" maxlength="15" /></td>
                    </tr><tr><td><input type ="checkbox" name="specialC" tabindex="4" value="Yes"/> Special Campaign</td>
                    </tr><tr><td><input type="button" onClick="clearForm()" value="Reset" /></td><td><input type="submit" value="Check Out" /></td>
                </form>
                <p>Suggestions: <span id="txtHint"></span></p>
            </table> 
```

更具体地说，checkOut() 函数将使用 ajax 将表单值提交到一个 php 脚本，该脚本对数据库运行一些插入命令（我想使用 ajax 来学习该技术，因为我对基于 Web 的操作相当陌生语言。因此，我想暂时推迟使用 jQuery）。截至目前，我没有该功能的示例。

自然地，这引出了一个问题，我可以简单地将该函数放入事件处理程序中：onSubmit = "checkOut()" 吗？同时，我会离开action=""？我会假设整个函数将执行 php 脚本并完全按照我的意愿进行操作，而无需单独的操作脚本。

对于任何反馈，我们都表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:10:28.743

您可以将其设置为，`action="javascript:checkOut();"`但几乎可以肯定将其放入`onSubmit`处理程序中会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:33:53.787

使用`<input type="button" />`（或锚点，或 a`button`或其他）代替`<input type="submit" />`. 在按钮的点击事件上，执行：

```
if(validate(document.getElementById("formId"))){
    // post the form w/ AJAX
    checkOut();
} 
```

请记住，任何基于脚本的解决方案都应该有一个非脚本选项。在这种情况下，它可以像放置一个`<input type="submit" />`内部`noscript`标签一样简单。

顺便说一句，您的标记无效。A`form`不能作为 a 的直接子级出现`table`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T01:01:37.143

使用此代码是最好的方法

```
<input type="submit" id="submit_button"> 
```

和这样的javascript代码

```
var submit = getElementById('submit_button');
submit.preventDefault();
submit.addEventListener('click', checkOut); 
```

在第一行中，我们指定了按钮，接下来我们阻止执行默认操作，接下来我们添加一个监听器，用于单击按钮时

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T01:41:24.177

我通常使用：

```
<input type="button" value="Submit" onclick="myFunction();"> 
```

然后我的函数将使用底部的本机提交函数，如果一切都检查出来。：

```
if (isSuccess)
    theForm.submit();
else
    return false; 
```

# c - 为什么 C 中的 operator sizeof( function ) 输出 1 个字节

> ID：12326886
> 
> 赞同：-1
> 
> 时间：2012-09-08T00:08:41.817
> 
> 标签：c, sizeof

> **可能重复：**
> [为什么 C 中函数的大小总是 1 个字节？](https://stackoverflow.com/questions/12259101/why-is-the-size-of-a-function-in-c-always-1-byte)

考虑以下代码片段`C`：

```
double fn()
{
    return 1.1 ;
}

int main()
{
    printf( "%d", sizeof( fn ) );
    return 0;
} 
```

[输出](http://ideone.com/YNHyg)是：

```
1 
```

为什么 sizeof() 运算符输出 1 个字节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T00:11:20.770

`sizeof`运算符不应应用于函数。它是没有意义的，它的行为没有定义。

> 大小运算符不应应用于具有函数或不完整类型的表达式，...

参考：[ISO/IEC 14882（第 5.3.3 节）](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)

* * *

> sizeof 运算符不得应用于具有函数类型或不完整类型的表达式、此类类型的括号名称或指定位字段成员的表达式。

参考：[ISO/IEC 9899:1999（第 6.5.3.4 节）](http://c0x.coding-guidelines.com/6.5.3.4.pdf)

* * *

> sizeof 运算符可能不适用于：
> 
> *   一个位域
> *   函数类型
> *   未定义的结构或类
> *   不完整的类型（如 void）

参考：http: [//publib.boulder.ibm.com/](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=/com.ibm.vacpp6m.doc/language/ref/clrc05szofe.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:11:27.893

当您`sizeof`在函数上使用时，它的值是没有意义的，如此处所述[Why is the size of a function in C always 1 byte?](https://stackoverflow.com/questions/12259101/why-is-the-size-of-a-function-in-c-always-1-byte)

要获取返回值的大小，请尝试使用`sizeof(fn())`，因为`sizeof`它是编译时常量（在大多数情况下），`fn`但实际上不会被调用。

然而，不幸的是，要获得函数占用的字节大小是不可能的。如果您告诉我们您真正想要完成的工作，我们可能会帮助您做更多事情。

# c++ - 删除全局数组时堆损坏

> ID：12326890
> 
> 赞同：1
> 
> 时间：2012-09-08T00:09:21.820
> 
> 标签：c++, arrays, winapi, delete-operator, heap-corruption

每当调试器命中操作符时，以下代码似乎会导致堆损坏`delete[]`。它试图删除`extern`在头文件中定义为的全局结构数组，然后在主 .cpp 文件的全局范围内声明。

```
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{ 
  switch(msg) 
  { 
    case WM_CREATE: 
      { 
        int main_win_x, main_win_y;

        tiles_horiz = 10;  //temp code
        tiles_vert = 10;   //temp code
        num_mines = 5;    //temp code

        main_win_x = (tiles_horiz * 22) + 20;
        main_win_y = (tiles_vert * 22) + 20;

        MoveWindow(hwnd, 100, 100, main_win_x, main_win_y, TRUE);

        tiles_total = (tiles_horiz * tiles_vert);
        tile_array = new tile[tiles_total];

        SetupPlayField();
        DrawInitTiles(hwnd);
      }
      break;
    case WM_SIZE:
      {

      }
      break;
    case WM_CLOSE:
      delete[] tile_array;
      DestroyWindow(hwnd);
      break;
    case WM_DESTROY:
      PostQuitMessage(0);
      break;
    default:
      return DefWindowProc(hwnd, msg, wParam, lParam);
  }
  return 0;
} 
```

过去几天我在论坛上搜索了各种堆损坏主题，到目前为止，我已经尝试了各种尝试。

一个人建议，当程序运行时，指向我的数组 tile_array 的指针可能已经改变`delete[]`。但是我已经检查了几次，指针的地址和数组的第一个元素的地址保持不变。

来自其他人帖子的其他论坛回答通常表明我可能会多次删除该数组，但到目前为止，这是该`delete[]`运算符唯一一次用于该特定数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:34:06.283

在不知道对 title_array 的每次访问的情况下，很难推测此问题的原因。程序出现的内存损坏并不总是导致它的原因。

您可能要检查的一件事是 extern 声明是针对“tile* tile_array”而不是“tile tile_array []”的。我非常怀疑是否是这种情况，但是在处理 extern 和数组时，我看到这个错误咬了一些人。

我要做的另一件事是确保在删除 tile_array 之后以及声明它时将其设为 NULL。如果执行此操作后问题消失，则实际上是删除太早（在初始化之前）或删除太多。

您要仔细检查的最后一件事是没有缓冲区溢出/不足。new[] 运算符将一些元数据放在堆上，delete[] 运算符使用这些元数据来了解数组的大小，以便它可以正确清理内存。损坏此元数据可能会导致堆损坏。

# java - 注入和配置 Gradle 构建

> ID：12326892
> 
> 赞同：6
> 
> 时间：2012-09-08T00:09:45.460
> 
> 标签：java, groovy, build, gradle

我正在阅读 Gradle 并对它非常感兴趣，特别是因为（*看起来*）它允许在构建过程中引入继承。例如，如果我有一个可以打包并部署到 Google App Engine 实例和 Amazon EC2 实例的 Java Web 应用程序，我需要一个复杂的构建，它可以采用相同的 Java、XML、PROPERTIES、CSS 和图像文件并打包/将它们部署到 2 个完全不同的打包*文件*`WAR`中。

GAE 应用程序对它们的打包方式非常具体；EC2（几乎）只要求您符合 servlet 规范。通过从SDK 附带的脚本中运行`update`命令来“部署”GAE 应用程序；`appcfg.sh`EC2 有自己的方式来部署应用程序。关键是，对于两个 PaaS 提供商来说，它们是非常不同的打包/部署过程：

```
public abstract class PackageTask {
    // ...
}

// Package my Eclipse project for deployment to GAE.
public class AppEnginePackageTask extends PackageTask {
    // ...
}

// Package my Eclipse project for deployment to EC2 instances.
public class AmazonPackageTask extends PackageTask {
    // ...
}

public abstract class DeployTask {
    // ...
}

// Deployment to GAE.
public class AppEngineDeployTask extends DeployTask {
    // ...
}

// Deployment to EC2.
public class AmazonDeployTask extends DeployTask {
    // ...
} 
```

然后，我可能有一个`myapp.gradle`构建文件来模板化任务的构建顺序：

```
clean()
compile()
package()
deploy() 
```

...不知何故，我可以配置/注入`AppEnginePackageTask`/`AppEngineDeployTask`代替`package()`/`deploy()`用于基于 GAE 的构建，或者我可以配置/注入`AmazonPackageTask`/`AmazoneDeployTask`到那些模板化任务中。同样，我不确定如何做到这一点（或者即使 Gradle*可以*做到这一点），但这就是我所追求的。

我的*理解*是 Gradle 可以做到这一点。Ant 也可能被迫拥有以这种方式工作的高度模块化、优雅的构建，但是基于 XML，它需要一些技巧，而像 Groovy 这样的基于 OOP 的语言使这种构建更加简洁和简单。

但是，我看到的所有 Gradle 任务示例都采用以下形式：

```
task package(dependsOn: 'compile') {
    // ...
}

task deploy(dependsOn: 'package') {
    // ...
} 
```

所以我问：这些看起来/感觉像非 OOP 任务定义。我对 Gradle（及其 OOP 本质）的理解是否从根本上不正确？我在这里想念什么？我如何才能完成这些“可配置/可注入构建模板”和基于继承的任务的概念？提前致谢！

**编辑**我用“”重新标记了这个问题，`groovy`因为 Gradle buildscripts 是用 Groovy DSL 编写的，而碰巧是 Groovy 大师（说快 5 倍）的人也可能会插话，即使他们对此知之甚少摇篮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:21:48.053

如此[处所述](http://gradle.org/docs/current/userguide/custom_tasks.html)，有*简单*任务和*增强*任务。后者更加灵活和强大。

以下示例与您所描述的不完全一样，re:injection，但它说明了 OOP。

这是示例 build.gradle 文件。它避免了“包”，因为这是 Java/Groovy 中的关键字。“build”目标取决于“compile”和“doPack”的一些风格，取决于名为“pkgTarget”的属性。

```
task compile << { 
    println "compiling..." 
}

task build() << {
}

build.dependsOn { 
    compile
}

build.dependsOn { 

    if (pkgTarget == "Amazon") {
        task doPack(type: AmazonPackageTask)
    } else if (pkgTarget == "Google") {
        task doPack(type: GooglePackageTask)
    } else {
        task doPack(type: MyPackageTask) 
    }
} 
```

稍后在同一文件中定义任务。（根据文档，此代码可以进入“build src”目录）：

```
// ----- 

class MyPackageTask extends DefaultTask {
    def init() { println 'common stuff' }
    @TaskAction
    def doPackage() {
        println 'hello from MyPackageTask'
    }
}

class AmazonPackageTask extends MyPackageTask {
    @TaskAction
    def doPackage() {
        init()
        println 'hello from AmazonPackageTask'
    }
}

class GooglePackageTask extends MyPackageTask {
    @TaskAction
    def doPackage() {
        init()
        println 'hello from GooglePackageTask'
    }
} 
```

这是 gradle.properties 文件：

```
pkgTarget=Amazon 
```

# java - Java：查找字符串中最短的单词并将其打印出来

> ID：12326899
> 
> 赞同：2
> 
> 时间：2012-09-08T00:11:05.193
> 
> 标签：java, arrays, string, loops

我是 Java 新手。我参加了 C 的课程，所以我试图让自己摆脱这种思维模式。我正在编写的程序有一个部分，用户在其中输入一个整数*n*，然后输入*n*个单词。然后，此部分搜索这些单词并找到最短的单词，然后将其返回给用户。例如，输入可能是：

> **输入：** 4 JAVA编程很有趣
> 
> **输出：**是

我目前的代码似乎返回了错误的单词。在这种情况下，它返回“PROGRAMMING”，而它应该返回“IS”。我想也许你们都可以指出我正确的方向。

```
int numwords = scan.nextInt();
    String sentence = scan.nextLine();
    String shortestword = new String();
    String[] words = sentence.split(" ");
    for (int i = 0; i < numwords; i++){
        if (shortestword.length() < words[i].length()){
            shortestword = words[i];

        }
    }
    System.out.printf(shortestword); 
```

为了让您了解我想要做什么，我试图将单词输入一个字符串“sentence”，然后将该字符串分解为数组中的单个单词“words[]”，然后运行 ​​for循环通过将长度与数组中的条目进行比较来相互比较字符串。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T00:15:36.207

你快到了，但是你检测最短单词的比较是相反的。它应该是：

```
if (words[i].length() < shortestword.length()) { 
```

也就是说，如果您当前单词的长度小于您之前最短单词的长度，则覆盖它。

此外，不要以空`String`开头，而是以第*一个*单词开头，即`words[0]`. 否则，空字符串将始终比数组中的任何字符串短：

```
String[] words = sentence.split(" ");
String shortestword = words[0];
for (int i = 1; i < numwords; i++) { // start with 1, because you already have words[0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:16:30.340

你的 if 语句是错误的。这应该有效。

```
int numwords = scan.nextInt();
    String sentence = scan.nextLine();
    String shortestword = new String();
    String[] words = sentence.split(" ");
    for (int i = 0; i < numwords; i++){
        if (shortestword.length() > words[i].length()){
            shortestword = words[i];

        }
    }
    System.out.printf(shortestword); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-27T23:37:54.360

这是一个使用 Java 8 的[Stream API](http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#package.description)的版本：

```
String sentence = "PROGRAMMING IS FUN";
List<String> words = Arrays.asList(sentence.split(" "));

String shortestWord = words.stream().min(
                                     Comparator.comparing(
                                     word -> word.length()))
                                    .get();

System.out.println(shortestWord); 
```

您还可以通过它们的任何属性对更复杂的对象进行排序：如果您有几个`Person`s 并且您想按它们的 s 对它们进行排序`lastName`，最短的优先，代码变为：

```
Person personWithShortestName = persons.stream().min(
                                                 Comparator.comparing(
                                                 person -> person.lastName.length()))
                                                .get(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T20:54:54.370

**Java 8**使它变得更简单。将您的`String`数组转换为列表并用于`sorted()`按升序对列表进行比较和排序。最后，用于`findFirst()`获取列表的第一个值（排序后最短）。

看一看，

```
String[] words = new String[]{"Hello", "name", "is", "Bob"};
String shortest = Arrays.asList(words).stream()
      .sorted((e2, e1) -> e1.length() > e2.length() ? -1 : 1)
      .findFirst().get();

System.out.println(shortest); 
```

# perl - Perl 脚本开头的长 eval 字符串

> ID：12326903
> 
> 赞同：6
> 
> 时间：2012-09-08T00:11:25.530
> 
> 标签：perl, eval

我对 Perl 比较陌生，并且正在处理其他人编写的 Perl 文件，并且在脚本的开头我不断遇到以下语句：

```
eval '(exit $?0)' && eval 'exec perl -w -S $0 ${1+"$@"}' && eval 'exec perl -w -S $0 $argv:q'
  if 0; 
```

这两条线有什么作用？什么是代码检查？`if 0;`句子是做什么的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T00:14:25.973

这是 exec hack 的变体。在解释器可以用 a 可靠地指定之前的日子里`#!`，它被用来制作 shell exec perl。第二`if 0`行的 永远不会被 shell 读取，它只读取第一行并执行 perl，它读取`if 0`并且不会重新执行自身。

这是一个有趣的变体，但我认为不太正确。它似乎设置为与 bourne shell 或 csh 变体一起使用，使用初始 eval 来确定解析它的 shell，然后使用适当的语法将参数传递给 perl。中间子句是 sh 语法，最后一个子句适用于 csh。如果第二个`&&`是`||`并且最初的`eval '(exit $?0)'`确实在 csh 中失败了，那么这将实现这些目标，但正如所写的那样，我认为它对 csh 不太适用。在此之前是否有一个命令会`$?`根据 shell 设置为某个值？但即使是这种情况并且`$?`设置为非零值，除非将`&&`其替换为`||`. 有趣的事情正在发生。

# sql - LinqPad - 编写 SQL 并转换为 Linq Lambda

> ID：12326913
> 
> 赞同：4
> 
> 时间：2012-09-08T00:12:36.557
> 
> 标签：sql, linq, linq-to-sql, lambda, linqpad

LinqPad 是否有一种方法可以让您在 SQL 中编写查询并将其转换为 Linq 中的 Lambda 表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T00:24:40.913

LINQPad 不这样做。

但是[Linqer](http://www.sqltolinq.com/)做到了！

# jquery - jQuery委托函数

> ID：12326915
> 
> 赞同：1
> 
> 时间：2012-09-08T00:12:48.833
> 
> 标签：jquery

我遇到的问题显示在这个小提琴上。

[http://jsfiddle.net/mjmitche/Sy2G4/](http://jsfiddle.net/mjmitche/Sy2G4/)

我正在使用 jQuery delegate() 创建将响应相同单击事件的段落，即使这些新段落是在文档创建之后创建的。我知道委托已被 on() 取代，但我不认为 on() 具有该功能。无论如何，我什至不能让代表按我想要的方式工作。正如您将在小提琴中看到的那样，新段落对点击没有响应。

你能解释一下我做错了什么吗？

```
 $(document).ready(function(){

        $('p').delegate(this, 'click', function(){
        $(this).after('<p>"No click me!"</p>');   
        });

    });​

<p>click me!</p>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:19:53.987

jQuery on 确实适用于委托。

```
$('.mywrapper').on('click', 'p', function(){
   $(this).after('<p>No, click me!</p>'); 
});​ 
```

HTML

```
<div class="mywrapper">
    <p>Click me!</p>
</div>​ 
```

您选择容器元素（将挂起的东西）并告诉它从段落标记（当前和未来）触发。

[JSFiddle 示例](http://jsfiddle.net/codyatfiny/pEbb3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:18:28.927

您错误地将点击处理程序委托给`p`. 相反，您的代码应该更像：

```
$('body').delegate('p', 'click', function(){/*your click handler*/}); 
```

不同之处在于，现在侦听器附加在 处`body`，传播到它的任何点击事件都会根据`p`选择器的资格进行验证，然后才执行回调。

[摆弄](http://jsfiddle.net/Sy2G4/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T00:17:58.643

试试这个：

```
$(document).ready(function(){

    $('body').delegate('p', 'click', function(){
        $(this).after('<p>"No click me!"</p>');   
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T00:19:40.153

试试这个

```
$(document).ready(function(){
    $('body').delegate('p', 'click', function(){
        $(this).after('<p>"No click me!"</p>');   
    });
});​ 
```

[**演示**](http://jsfiddle.net/Sy2G4/3/)。

# webdriver - 使用 webdriver 获取元素文本

> ID：12326922
> 
> 赞同：1
> 
> 时间：2012-09-08T00:14:24.350
> 
> 标签：webdriver

我想得到一个节点的文本，而不是得到它的子文本。例如，如何从以下 HTML 中获取文本“hello”？

```
<div id="myid">hello <b>world</b></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:19:04.240

我能够完成这项工作的唯一方法是使用反射绕过 WebElement 的可见性保护：

```
WebElement webElement = driver.findElementById("myid");
Method getter = webElement.getClass().getDeclaredMethod("getElement");
getter.setAccessible(true);
HtmlElement htmlElement = (HtmlElement) getter.invoke(webElement);
String name = htmlElement.getFirstChild().getTextContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:30:16.100

试试 XPath 表达式

```
//div[@id='myid']/text() 
```

对于该 div 下的所有文本节点，以及

```
//div[@id='myid']/text()[k] 
```

对于该 div 下的第 k 个文本节点。

我已经使用 libxslt 使用 XSL 测试了这个 XPath，但不在 webdriver 中（但我知道 webdriver 支持 XPath）。

# ruby-on-rails - RoR Net::HTTP 发布错误未定义方法“字节大小”

> ID：12326923
> 
> 赞同：9
> 
> 时间：2012-09-08T00:14:24.007
> 
> 标签：ruby-on-rails, ruby, post, cookies

我目前正在反复用头撞墙，直到我通过这个问题。我正在使用 ruby​​-1.9.3-p194 和 Rails。我正在尝试发出一个可以使用 Net::HTTP.post_form 完成的发布请求，但我不能在这里使用它，因为我需要在标题中设置一个 cookie。http.post 出错说

```
"undefined method `bytesize' for #<Hash:0xb1b6c04>" 
```

因为我猜它正在尝试对正在发送的数据执行一些操作。

有没有人有某种修​​复或解决方法？

谢谢

```
headers = {'Cookie' => 'mycookieinformationinhere'}
uri = URI.parse("http://asite.com/where/I/want/to/go")
http = Net::HTTP.new(uri.host, uri.port)
response = http.post(uri.path, {'test' => 'test'}, headers) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-08T00:33:36.273

[`bytesize`](http://ruby-doc.org/core/String.html#method-i-bytesize)方法是开，`String`不是`Hash`。这是你的第一个线索。第二个线索是文档[`Net::HTTP#post`](http://ruby-doc.org/stdlib/libdoc/net/http/rdoc/Net/HTTP.html#method-i-post)：

> **发布（路径，数据，initheader = nil，dest = nil）**
> 
> 帖子`data`（必须是字符串）到`path`. `header`必须是像 { 'Accept' => '/', ... } 这样的 Hash。

您正在尝试将 Hash, `{'test' => 'test'}`, 传递到`post`它期望看到`String`. 我想你想要更像这样的东西：

```
http.post(uri.path, 'test=test', headers) 
```

# python - 文本文件编号如何转 Python 编号？

> ID：12326933
> 
> 赞同：-3
> 
> 时间：2012-09-08T00:16:24.603
> 
> 标签：python

我有一个问题，当我打开一个文件并使用命令 f.readline () 导入一行时。我运行模块然后它工作得很好。它显示数字 600，或者不管它是什么数字。但是我怎样才能让这个数字用于进一步的计算呢？当我输入下一个计算命令时，它会说类似于 for command int 它应该是一个字符串或一个数字。但是我如何将文本文件编号转换为我可以计算并且 Python 可以理解的数字呢？

```
from math import *

with open('C:\\Users\\admin\\Desktop\\terehommik.txt', 'r') as f:
    for line in f:
        s = f.readline() 
```

从那行来的数字，现在我需要将字符串数字转换为实数，这样我就可以用银行利率计算

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:17:53.417

使用`int`功能：

```
x = int('600')

# x is now 600, can be used in computations
print x + 1  # No TypeError--prints 601 
```

所以，

```
s = f.readline()
x = int(s)
y = x * 5  # etc. 
```

附录：

OP，您的输入文件是否每行包含一个数字？这就是我现在假设的。

```
with open('myfile') as f:
    for line in f:
        x = int(line)
        print x+3 
```

如果内容`myfile`是：

```
600
3
67
987 
```

那么上面的代码就可以工作了，打印：

```
603
6
70
990 
```

注意，对于浮点数，请改用恰当命名的`float`函数。

# jquery - 使用 jQuery 向 ASP.NET WebMethod 发送和处理未知数量的参数

> ID：12326936
> 
> 赞同：0
> 
> 时间：2012-09-08T00:16:54.133
> 
> 标签：jquery, asp.net, webmethod

我正在构建一个投票应用程序。用户输入一个问题，然后单击一个按钮以动态创建答案的文本框。

然后我使用以下代码序列化表单：

```
var formData = $("#form1").find("input,textarea,select,hidden").not("#__VIEWSTATE,#__EVENTVALIDATION").serializeObject(); 
```

我使用 jQuery.ajax 将序列化信息发送到 WebMethod 使用`data: formData`

这就是我的问题开始的地方。如果它是静态表单，我的 webmethod 将是；

```
<WebMethod()>_
Public Shared Function addPoll(byval question as string, byval answer1 as string, etc...) 
```

由于它们是动态的，我如何定义我的参数以及如何在 webmethod 函数中循环它们？

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:08:44.913

根据请求，使用通用列表将数据作为参数传递的示例（如果我的 VB.NET 语法不符合要求，请原谅我，我多年来一直专注于 C#）

首先，您将定义一个对象：

```
Public Class QA
    Public Property Question() As String
        Get
            Return m_Question
        End Get
        Set
            m_Question = Value
        End Set
    End Property
    Private m_Question As String
    Public Property Answer() As String
        Get
            Return m_Answer
        End Get
        Set
            m_Answer = Value
        End Set
    End Property
    Private m_Answer As String
End Class 
```

然后定义你的网络方法：

```
<WebMethod> _
Protected Sub addPoll(args As IEnumerable(Of QA))
    For Each qaPair As QA In args
        'do stuff with qaPair
    Next
End Sub 
```

jQuery 需要将此对象作为表示对象数组的 JSON 字符串传递到后端，如下所示：

```
[
    { Question: "what is the answer to life, the universe, and everything?",
        Answer: "42" },
    { Question: "what is the average velocity of a laden swallow?",
        Answer: "African or European?" }
] 
```

可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer%28v=vs.100%29.aspx#Y300)将其解析为 QA 对象列表。

希望这可以为您解决问题？

# python - Matplotlib 图形放置

> ID：12326940
> 
> 赞同：1
> 
> 时间：2012-09-08T00:17:33.393
> 
> 标签：python, matplotlib

我需要一些格式化方面的帮助。如何更改第二张图和第三张图之间的距离

```
 from matplotlib.font_manager import FontProperties
   import matplotlib.pyplot as plt

   fig  = plt.figure(1)
   graph1 = fig.add_subplot(3,1,1)
   graph2 = fig.add_subplot(3,1,2)
   norm =  fig.add_subplot(3,1,3)

   graph1.set_title(TITLE + '\nscaling factor: ' +str(round(rescale,3)))
   norm.set_title('Circle and Oval Height Difference')
   norm.set_xlabel(XLABEL +'(Degrees)')
   norm.legend(bbox_to_anchor=(1.13,1), prop={'size':8})
   plt.ylabel('Heights (nm)')

   graph1.legend(bbox_to_anchor=(1.13,1),prop={'size':8})
   graph2.legend(bbox_to_anchor=(1.13,1),prop={'size':8})
   fontP = FontProperties()
   fontP.set_size('small') 
```

![在此处输入图像描述](../Images/f6d44572a59ee8b669145f7c03316cdf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T00:29:48.280

快速的答案是[`fig.subplots_adjust`](http://matplotlib.sourceforge.net/api/figure_api.html#matplotlib.figure.Figure.subplots_adjust)，将 hspace 设置为更大的值。不幸的是，这也在前两个图表之间插入了一些空间，但这可能还是不错的，这取决于你想要什么。正如乔所说，如果 x 轴相同，我经常会删除它们。

如果您希望间距不均匀，即 2 和 3 之间的间距大于 1 和 2 之间的间距，则需要使用[`fig.add_axes`](http://matplotlib.sourceforge.net/api/figure_api.html#matplotlib.figure.Figure.add_axes).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:29:20.957

采用

```
plt.subplots_adjust(hspace=desiredspace) 
```

我很确定，matplotlib 的方式可能有更多方法可以做到这一点，但它解决了我的问题，甚至不得不手动找出最佳价值。

希望这可以帮助！

# nopcommerce - 没有为此对象定义无参数构造函数

> ID：12326945
> 
> 赞同：1
> 
> 时间：2012-09-08T00:18:21.963
> 
> 标签：nopcommerce

我在索引页面上收到以下错误：

== 没有为此对象定义无参数构造函数。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.

Source Error:

Line 5:      <div class="header-links-wrapper">
Line 6:          @Html.Action("HeaderLinks", "Common")
Line 7:          @Html.Action("FlyoutShoppingCart", "ShoppingCart")
Line 8:      </div>
Line 9:      <div class="header-selectors-wrapper"> 
```

## 这是堆栈跟踪：

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

[InvalidOperationException: An error occurred when trying to create a controller of type 'Nop.Web.Controllers.CatalogController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +232
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +49
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.Mvc.<>c__DisplayClass7.<BeginProcessRequest>b__6() +29
   System.Web.Mvc.ServerExecuteHttpHandlerWrapper.Wrap(Func`1 func) +38
   System.Web.Mvc.ServerExecuteHttpHandlerAsyncWrapper.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +98
   System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride) +1529
   System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage) +77
   System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm) +28
   System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm) +22
   System.Web.Mvc.Html.ChildActionExtensions.ActionHelper(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues, TextWriter textWriter) +497
   System.Web.Mvc.Html.ChildActionExtensions.Action(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues) +88
   System.Web.Mvc.Html.ChildActionExtensions.Action(HtmlHelper htmlHelper, String actionName, String controllerName) +10
   ASP._Page_Views_Home_Index_cshtml.Execute() in d:\E\SourceCode\JellybeanStreet\Presentation\Nop.Web\Views\Home\Index.cshtml:74
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +208
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +81
   System.Web.WebPages.StartPage.RunPage() +19
   System.Web.WebPages.StartPage.ExecutePageHierarchy() +67
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +78
   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +220
   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +303
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
   System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8969201
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

==

一切正常，没有进行任何更改，现在出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:10:58.020

发生错误的目的是什么？

在我看来，这个错误是依赖注入的问题。很常见的错误。

# windows-phone-7 - Visual Studio 2010 使用 SQLCe 3.5 但项目有 4.4 sdf 文件

> ID：12326952
> 
> 赞同：0
> 
> 时间：2012-09-08T00:19:32.177
> 
> 标签：windows-phone-7, sql-server-ce, versioning

我在 Visual Studio 2010 的 windows phone 7 项目中添加了 sql comppack edition v4.0 文件。我将数据库从应用程序文件夹复制到隔离存储，现在在查询时它给出了这个东西

```
countyList.Count()
A first chance exception of type 'System.Data.SqlServerCe.SqlCeException' occurred in Microsoft.Phone.Data.Internal.dll
'countyList.Count()' threw an exception of type 'System.Data.SqlServerCe.SqlCeException'
    base {System.Data.Common.DbException}: {"Incompatible Database Version. If this was a compatible file, run repair. For other cases refer to documentation. [ Db version = 4000000,Requested version = 3505053,File name = AMEDatabase.sdf ]"}
    _customMessage: "Incompatible Database Version. If this was a compatible file, run repair. For other cases refer to documentation. [ Db version = 4000000,Requested version = 3505053,File name = AMEDatabase.sdf ]"
    _errors: {System.Data.SqlServerCe.SqlCeErrorCollection}
    Errors: {System.Data.SqlServerCe.SqlCeErrorCollection}
    HResult: -2147467259
    Message: "Incompatible Database Version. If this was a compatible file, run repair. For other cases refer to documentation. [ Db version = 4000000,Requested version = 3505053,File name = AMEDatabase.sdf ]"
    NativeError: 28609
    Source: "SQL Server Compact ADO.NET Data Provider" 
```

当我从我的视觉工作室添加这个文件时，这个东西如何使用 3.5 版本？该怎么办？可能是因为 System.Data.Linq 文件吗？（我的项目有这个 dll 的 v 2.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:37:44.673

您只能在 Windows Phone 上使用 SQL Servver Compact 3.5 版数据库

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-08T02:05:59.323

我们需要一些设置才能在 VS 2010 中使用 sql ce v4.0，点击 google 获取更多信息。

# java - 安装 Eclipse Classic 4.2 时遇到问题

> ID：12326962
> 
> 赞同：2
> 
> 时间：2012-09-08T00:21:23.837
> 
> 标签：java, python, eclipse, installation

> **可能重复：**
> [Eclipse 找不到 JDK 或 JRE](https://stackoverflow.com/questions/4419983/eclipse-cant-find-the-jdk-or-jre)

我安装了最新的 JRE 和 JDK，但是当我安装 Eclipse Classic 4.2 并尝试运行它时，它会显示以下消息：

![Eclipse 错误消息](../Images/774ec8db49695310130baed7a54bc67d.png)

我已尝试将安装移至 Program Files 以及 Java 安装文件夹本身。前者除了消息中显示的路径之外没有任何区别。后者开始加载 Eclipse，直到它显示蓝色矩形加载框，此时我收到一条不同的错误消息，指出它无法在 Java 安装中加载特定的 .dll 文件。也就是说，我不明白为什么必须将 Eclipse 文件移动到 Java 文件夹中才能正常工作。

前段时间我曾经有一个工作安装的 Eclipse，我卸载了它。现在我计划使用 Eclipse，可能还有 PyDev，来学习 Python。

PS 我意识到这不完全是一个涉及编码的问题，但是我知道我不能是唯一遇到这个问题的人。因此，希望其他人可以从看到响应中受益。

编辑：安装现在正在工作。以下是我采取的步骤：

1) 确保 JDK 和 Eclipse 安装都是 32 位或 64 位，具体取决于您的设置。

2）添加`-vm /absolute/path/to/jre6/bin`到eclipse.ini文件的顶部

注意：重新安装 Eclipse 和 JDK 后，确保 bit-type 匹配后，不再需要第 2 步，因为 Eclipse 终于可以正常运行了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:38:48.723

如上所述：

*   请参考[http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F#Find_the_JVM](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F#Find_the_JVM)。
*   还要确保您使用的是带有 64 位 Eclipse 包的 64 位 JDK，以及带有 32 位 Eclipse 包的 32 位 JDK。
*   默认情况下，32 位 JDK 将安装到“Program Files (x86)”中，而 64 位 JDK 将安装到“Program Files”中。在 64 位 Windows 下，您可以选择使用 32 位或 64 位 Eclipse/JDK - 但 Eclipse 包和 JDK 必须匹配。（我推荐 64 位，因为您的操作系统支持它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:25:29.550

之前有人问过这个问题，答案写得很好，所以只需点击链接并阅读答案即可。

[Eclipse - 没有 Java (JRE) / (JDK) ...没有虚拟机](https://stackoverflow.com/questions/2030434/eclipse-no-java-jre-jdk-no-virtual-machine)

它对我有用。

# ruby-on-rails - 在 rails 中定义 heroku 救援人员

> ID：12326966
> 
> 赞同：0
> 
> 时间：2012-09-08T00:22:09.927
> 
> 标签：ruby-on-rails, heroku, resque

在 heroku 救援教程 (https://devcenter.heroku.com/articles/queuing-ruby-resque) 中，它说将以下行放入 Procfile。但是，我假设这是针对红宝石的。

```
resque: env TERM_CHILD=1 bundle exec rake jobs:work 
```

我会在哪里把这条线放在 ruby​​ on rails 中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:40:12.993

只需在您的 RoR 项目中创建一个 Procfile 文件。然后在那里添加那行代码。

# javascript - 动画/减慢元素填充移除元素留下的空间

> ID：12326970
> 
> 赞同：6
> 
> 时间：2012-09-08T00:22:40.477
> 
> 标签：javascript, jquery, css

这是我的例子：http: [//jsfiddle.net/MT5xS/](http://jsfiddle.net/MT5xS/)

当您单击第一张图片时，它会被删除，并且后面的所有图像都会向后移动以填充它留下的空间。但是它们移动得太快了，你甚至不知道它们移动了。

我的问题是，如何让这些元素顺利移动？当您移动或删除图标时，基本上就像 iPhone 一样，例如[http://youtu.be/-r7K4LTbI4A?t=27s](http://youtu.be/-r7K4LTbI4A?t=27s)

我不担心 IE6/7/8 或任何其他兼容性问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T00:28:39.707

我知道的最常见的解决方案是动画[**hide()**](http://api.jquery.com/hide/)，然后在回调函数中删除你的图像。

```
$('.user-pic').live('click', function() {
    var $item = $(this).closest('li');
    $item.hide('slow', function(){ $item.remove(); });
});​ 
```

### [演示](http://jsfiddle.net/FranWahl/xN5q2/)- 动画元素移除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:32:32.773

另一个选项是`fadeTo`0，`animate()`图像宽度为 0，然后`remove()`.

[http://jsfiddle.net/MT5xS/2/](http://jsfiddle.net/MT5xS/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T00:36:51.030

看看这个 jQuery 插件：[http ://razorjack.net/quicksand/](http://razorjack.net/quicksand/)

它做了我认为你所描述的。您可以使用它或在幕后看看它是如何完成的。我相信他们在所有网格项目上都使用 position: absolute 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T00:26:32.043

您不想在单击时删除元素，而是希望将目标元素淡出*然后*删除该元素。请注意，这不能通过链接`remove`所需的动画来完成。

如果您选择依赖老派`setTimeout()`，则必须记住正确的变量范围。或者，您可以添加一个回调以在动画完成时执行：

```
var $el = $(this).closest('li');    //no need to operate directly on img imo
$el.animate({
  opacity: 0    //plus any other animation you want... height:0, width:0, ...
}, 1000, function() {
  $el.remove();
}); 
```

[摆弄](http://jsfiddle.net/ovfiddle/MT5xS/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-08T00:35:54.097

我想你想要的是...

```
$(element).css("visibility", "hidden");
$(element).animate({"width": 0}, "slow", function() {
  $(this).remove();
}); 
```

这是小提琴[http://jsfiddle.net/MT5xS/4/](http://jsfiddle.net/MT5xS/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-08T00:36:22.347

试试这个它会向上滑动然后移除

```
$('.user-pic').live('click', function() {
  $(this).closest('li').slideUp('slow', function() {
    $(this).remove();
  });
});​ 
```

# ruby - 无法在 Cloudfoundry 中部署 ruby 应用程序

> ID：12326971
> 
> 赞同：0
> 
> 时间：2012-09-08T00:23:00.680
> 
> 标签：ruby, heroku, ruby-on-rails-3.1, cloud-foundry

我已经准备好应用程序，但是当我部署时，我在 heroku 和 cloud Foundry 中遇到错误部署

使用的宝石是：event_calender authlogic

错误：云铸造

```
wafuser@wafuser-VirtualBox:~/Documents/backups/backupnew/ecommerce$ vmc push
Would you like to deploy from the current directory? [Yn]: y
Application Name: shiva108
Detected a Rails Application, is this correct? [Yn]: y
Application Deployed URL [shiva108.cloudfoundry.com]: 
Memory reservation (128M, 256M, 512M, 1G, 2G) [256M]: 
How many instances? [1]: 1
Create services to bind to 'shiva108'? [yN]: y
1: mongodb
2: mysql
3: postgresql
4: rabbitmq
5: redis
What kind of service?: 2
Specify the name of the service [mysql-ceaf3]: 
Create another? [yN]: n
Would you like to save this configuration? [yN]: n
Creating Application: OK
Creating Service [mysql-ceaf3]: OK
Binding Service [mysql-ceaf3]: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (192K): OK   
Push Status: OK
Staging Application 'shiva108': OK                                              
Starting Application 'shiva108': .
Error: Application [shiva108] failed to start, logs information below.

====> /logs/migration.log <==== 
```

谁能为我的问题提出解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:13:31.483

尝试使用以下命令：

```
vmc logs <app-name> 
```

这将为您提供所需的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:32:51.100

尝试使用此命令：

赫罗库：

```
$ heroku logs 
```

云铸造：

```
$ vmc files shiva108 logs/stderr.log 
```

# php - 奇怪的重写（Apache mod_rewrite）

> ID：12326972
> 
> 赞同：1
> 
> 时间：2012-09-08T00:23:16.043
> 
> 标签：php, windows, apache, mod-rewrite, wamp

我对重写规则的结果感到非常困惑。我使用 WAMP 在我的本地机器上托管。

```
RewriteEngine on
RewriteBase   /niklasrosenstein/

RewriteCond   %{REQUEST_URI}    !res/(.+)$
RewriteCond   %{REQUEST_URI}    !index.php$
RewriteRule   ^(.*)$            index.php?uri=$1 [QSA] 
```

即将

> [http://localhost/niklasrosenstein/res](http://localhost/niklasrosenstein/res)

扩展到

> [http://localhost/niklasrosenstein/res/?uri=res](http://localhost/niklasrosenstein/res/?uri=res)

在*浏览器的*地址栏中。我已经在 Firefox 14、Opera 11.62 和 Internet Explorer 8 下对其进行了测试。

在 URL 的末尾添加一个斜杠，这将是

> [http://localhost/niklasrosenstein/res/](http://localhost/niklasrosenstein/res/)

没关系。

有谁知道为什么在浏览器的地址栏中调整 URL？我想使用*mod_rewrite*来摆脱模糊的 URL 格式，但这个问题实际上打破了它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:36:16.050

> 有谁知道为什么在浏览器的地址栏中调整 URL？

这看起来像 mod_dir/mod_rewrite 冲突。默认情况下， mod_dir 被加载，目录模块的默认值是：

```
DirectoryIndex index.html
DirectorySlash On 
```

第二个默认设置使得任何时候请求似乎访问目录，并且缺少尾部斜杠，301 重定向到与斜杠相同的 URI。这发生在 URI 文件映射管道中的某处，并且干扰了 mod_rewrite 通过您的规则应用的内部重写

由于您正在通过 路由所有内容，因此[关闭 DirectorySlash](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)`index.php`可能无害，因此在您目录中的 htaccess 文件中，尝试将其关闭：`/niklasrosenstein/`

```
DirectorySlash Off 
```

否则，您可以尝试使用 mod_rewrite 处理：

```
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond !.+[^/]$
RewriteRule ^(.+)$ $1/ [L] 
```

# reporting-services - 带有 expr 的报表生成器最大值

> ID：12326973
> 
> 赞同：0
> 
> 时间：2012-09-08T00:23:31.850
> 
> 标签：reporting-services, reporting, reportbuilder3.0

我有一个带有 MS 报告生成器 3.0 的报告，其中包含一个 expr 无法计算通行证数量（每个用户是/否）。现在我给该字段一个名为 NPasses 的标签名称，我试图用 expr 获得最大值，但没有工作，我得到了一个错误。

我该怎么做。考虑到这个最大值是其他失败的计数。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:08:10.267

我最终使用了我想最大化的字段分组，然后用另一个字段计算它，如果是或否。我的数据类型有点。所以这对我有用 =SUM(IIF(Fields!Pass.Value=0 ,0,1))

# windows - 如何为运行 vbs 文件的 Windows 脚本主机禁用 ECHO DIALOGS？

> ID：12326975
> 
> 赞同：0
> 
> 时间：2012-09-08T00:23:50.857
> 
> 标签：windows, wsh

今天遇到一个问题。我有一个带有一堆 .bat 文件的 Windows Server 2003，这些文件基本上启动了 .vbs 脚本。每次在脚本中使用 ECH 时，我都会得到包含回声内容的烦人对话框，并且需要一直单击 ENTER。我怎样才能禁用对话框并仅在命令提示符窗口中保留 ECHO？

![在此处输入图像描述](../Images/8dd5399a134cc6e424fe73059e53b72a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:30:18.767

强制它运行`cscript`而不是`wscript`

如果您手动运行脚本，只需放在`cscript`它前面。

否则，这可能会给你一种方法：

[http://www.robvanderwoude.com/vbstech_engine_force.php](http://www.robvanderwoude.com/vbstech_engine_force.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:27:27.850

将输出重定向到其他地方，即

```
scriptname.vbs > textfile.txt 
```

# java - 在java中将时间戳转换为ISO860，

> ID：12326976
> 
> 赞同：1
> 
> 时间：2012-09-08T00:24:16.330
> 
> 标签：java, javascript, jquery

> **可能重复：**
> [将符合 ISO8601 的字符串转换为 java.util.Date](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date)

在 JS 中将时间戳更改为 ISO 8601 时出现问题，因为它在 IE 和 Firefox 中的“topicDate”处出错，但它在 Chrome 中有效。所以我想在服务器端将时间戳更改为 ISO 8601 并通过 json 发送。谁能帮助我如何使用标准类将以下时间戳转换为 Java 中的 ISO 8601 格式？也欢迎任何其他关于这种方法的建议。

## 通过 json 发送的时间

```
 "topic_lstUpdate" : "2012-09-07 19:39:56.439", 
```

## JS脚本

```
var topicDate = new Date(args.topic_lstUpdate);
            var topicDateISO = topicDate.toISOString();
            var topicDateTimeago=jQuery.timeago(topicDate); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T00:26:56.197

在服务器端的 Java 中格式化：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.S'Z'");
df.setTimeZone(TimeZone.getTimeZone("UTC"));
String my8601formattedDate = df.format(new Date()); 
```

建议您包含`T`分隔符 - 但如果您确定两端的要求允许排除它，则可以省略它。有关详细信息，请参阅[http://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations](http://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:29:39.297

它已经快到了。您可以使用此 JavaScript 进行转换：

```
topicDate.replace(" ", "T"); 
```

# xcode - 信息灯按钮 放置和过渡

> ID：12326977
> 
> 赞同：0
> 
> 时间：2012-09-08T00:24:29.723
> 
> 标签：xcode, button, uinavigationbar, modal-dialog, transition

在我见过的应用程序中，信息灯按钮都在导航栏中，当触摸时，到新视图的转换是水平翻转。如果我制作的应用程序在导航栏中没有信息灯按钮，并且在触摸时使用推送动画将用户转移到新视图，是否可以？如果没有，有人可以告诉我如何为水平翻转编写代码，因为当我选择模态并翻转并连接到视图时，按下时没有任何反应（但如果我选择推送而不是模态，则可以使用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:29:05.937

你想做什么，就可以做什么。对于什么样的按钮应该引起什么样的视图变化，没有指导方针。

下面是几个如何更改视图控制器的示例：

```
//if you are using xibs use this line
UIViewController *controller = [[UIViewController alloc] initWithNibName:@"myXib" bundle:[NSBundle mainBundle]];
//if you are using storyboards use this line
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"myViewControllersID"];

[controller setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
//this sets the modal transition style

//to present the controller modally use this
[self presentViewController:controller animated:YES completion:nil];
//or if you are pushing to this controller using a navigation controller use this
[self.navigationController pushViewController:controller animated:YES]; 
```

# git - 如何将目录从一个 git 存储库复制到另一个，保留历史记录？

> ID：12326985
> 
> 赞同：8
> 
> 时间：2012-09-08T00:25:50.797
> 
> 标签：git, git-filter-branch

我知道我可以从 git 存储库的目录中创建一个新的存储库。见这里：[https ://help.github.com/articles/splitting-a-subfolder-out-into-a-new-repository/](https://help.github.com/articles/splitting-a-subfolder-out-into-a-new-repository/)

但是，如何将目录从一个存储库复制到另一个完全不同的存储库的新目录，同时保留该目录的历史记录？

更新：该历史记录是否有可能与 git log 一起显示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T01:36:30.730

你可以用`git filter-branch`. 基本上你会想要：

1.  使用您已经找到的链接，将第一个项目中的子路径拆分到一个新的存储库中。
2.  将其推送到唯一分支上的第二个项目的远程。
3.  将该分支提取到第二个存储库中，然后用于`git filter-branch`将其索引过滤到正确的子目录中：

    ```
    git filter-branch --index-filter '
        git ls-files -sz | 
        perl -0pe "s{\t}{\tnewsubdir/}" |
        GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
            git update-index --clear -z --index-info &&
            mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"
    ' HEAD 
    ```

4.  最后，签出`master`第二个项目的分支（或您正在使用的任何分支），然后合并到新过滤的分支中。

真的不是太糟糕的手术，总而言之。正如 AlexanderGladysh 在评论中指出的那样，您还可以使用[子树合并策略](http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html)来代替步骤 3 和 4。

# python - 在文件末尾添加一个新行

> ID：12326986
> 
> 赞同：-4
> 
> 时间：2012-09-08T00:26:04.330
> 
> 标签：python, perl, bash, sed

我已经看到向每个文件添加新行的方法（一次 10 个文本文件+），但这通常涉及创建一个新文件。有没有一种方法可以在不需要制作临时文件的情况下添加新行（基本上是源文件和目标文件应该相同）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T00:30:07.610

如果你想在一组文件中**追加**一行，即使在 shell 中也很容易：

```
for file in $files ; do
    echo "$line" >> "$file"
done 
```

如果要在文件**中间添加一行，则**必须使用临时文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T00:31:45.113

要将换行符插入到工作目录中所有文本文件的末尾：

```
sed -i -e '$G' *.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T00:29:55.117

例如，如果您想递归当前目录并在找到的每个 *.txt 文件的末尾添加一行，您可以这样做：

```
find . *.txt -exec sh -c 'echo "some text here" >> {}' \; 
```

# java - 如何模拟按下了哪些 JButtons 井字游戏

> ID：12326992
> 
> 赞同：0
> 
> 时间：2012-09-08T00:26:46.870
> 
> 标签：java, swing, jbutton

我已经用 Java 语言为游戏编写了 4 个类。有用于启动游戏、游戏逻辑、J 按钮和游戏板。我使用 for 循环创建并添加了所有 9 个按钮到网格布局中。每个按钮都有一个 actionListener。

如何建模用户按下了哪个 J 按钮。如果我知道那条信息，我相信我可以使用一组字符来模拟游戏逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:41:06.417

不确定这是否是问题所在，您可以使用[setActionCommand](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setActionCommand%28java.lang.String%29)方法将操作分配给按钮。然后从`ActionEvent`with中检索它`getActionCommand()`。有关更多详细信息和示例，请参阅[如何使用按钮](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)。

您还可以使用`ActionEvent.getSource()`来获取引发事件的对象，即被按下的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:43:43.193

使用单独的`AbstractAction`侦听器，它看起来像：

```
JButton[] buttons = new JButton[9];
for (int i=0; i < buttons.length; i++) {
    buttons[i] = new JButton("X or O here");
    buttons[i].addActionListener(new MyAction());
    add(buttons[i]);
} 
```

# ruby-on-rails - Ruby 有类似 JavaDoc 的东西吗？

> ID：12326996
> 
> 赞同：4
> 
> 时间：2012-09-08T00:27:19.483
> 
> 标签：ruby-on-rails, ruby, api

我正在尝试学习 Ruby，但在使用 API 时遇到问题。例如，我正在看这个：

**decode(json) 将 JSON 字符串转换为 Ruby 对象。**

```
# File lib/active_support/json/decoding.rb, line 11
11:       def decode(json)
12:         YAML.load(convert_json_to_yaml(json))
13:       rescue ArgumentError => e
14:         raise ParseError, "Invalid JSON string"
15:       end 
```

如何了解如何使用返回的“Ruby Object”？喜欢可用的方法等？万分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T00:30:24.723

尝试这个：

[http://ruby-doc.org/](http://ruby-doc.org/)

和这个

[http://rubyonrails.org/documentation](http://rubyonrails.org/documentation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T00:44:45.643

是的，它有：

[http://ruby-doc.org/](http://ruby-doc.org/)

例如：

[http://ruby-doc.org/core-1.9.3/](http://ruby-doc.org/core-1.9.3/)

在那里，您可以按方法名称或类名称搜索 api。