# StackOverflow 问答 000498000-000498999

# c# - 使用公共接口和内部类型参数的泛型

> ID：498002
> 
> 赞同：1
> 
> 时间：2009-01-31T01:47:24.500
> 
> 标签：c#, .net, generics, interface

我有以下情况：

```
// A public interface of some kind   
public interface IMyInterface {   
    int Something { get; set; }   
}   

// An internal class that implements the public interface.   
// Despite the internal/public mismatch, this works.   
internal class MyInternalConcrete : IMyInterface {   
    public int Something { get; set; }   
}   

// A generic class with an interface-restricted type parameter.
// Note that the constraint on T uses the *public* interface.
// The instance is *never* exposed as a public, or even protected member.
public class MyClass<T> where T : IMyInterface, new() {   
    T myInterfaceInstance;   

    public MyClass() {   
        myInterfaceInstance = new T();   
    }   
}   

// Attempting to implement concrete class... Inconsistent Accessibility Error!   
public class MySpecificClass : MyClass<MyInternalConcrete>   
{   
} 
```

尝试实现 MySpecificClass 时，出现错误：

> 可访问性不一致：基类“App1.MyClass”的可访问性低于类“App1.MySpecificT”

奇怪的是 MyInternalConcrete 尽管是**internal**，仍然可以实现**公共**接口。并且由于它实现了接口，所以它*应该*可以用作 MyClass 的类型参数 - 因为 T 受限于公共接口而不是内部类。

如果 MyClass 暴露了 T，我会理解它会失败，就像我们不使用泛型会失败一样：

```
public class MyClass<T> where T : IMyInterface, new() {      
    T myInterfaceInstance;      

    public MyClass() {      
        myInterfaceInstance = new T();      
    }      

    // This will fail with an internal T - inconsistent accessibility!    
    public T Instance {      
        get { return myInterfaceInstance; }      
    }      
} 
```

和上面一样，但没有泛型：

```
public class MyNonGenericClass {   
    MyInternalConcrete myInterfaceInstance;   

    public MyNonGenericClass() {   
        myInterfaceInstance = new MyInternalConcrete();   
    }   

    // This will fail - inconsistent accessibility! 
    // but removing it works, since the private instance is never exposed.   
    public MyInternalConcrete Instance {   
        get { return myInterfaceInstance; }   
    }   
} 
```

这是 C# 泛型的限制，还是我只是误解了泛型如何工作的一些基本知识？

[我也在 MSDN 上发布了这个帖子](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/cfea0f0b-c0da-4381-a92f-54729279a8a8)，但我被解雇了，因为我不知道我在说什么。我的担心是否有效？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-31T02:00:52.647

根据这篇关于[C# 泛型的文章](http://www.codeguru.com/csharp/sample_chapter/article.php/c11637__2/)

> “泛型类型的可见性是**泛型类型与参数类型的可见性的交集**。如果所有C、T1、T2和T3类型的可见性都设置为public，那么C的可见性也是public；但如果只有其中一种类型的可见性是私有的，那么 C 的可见性就是私有的。”

因此，虽然您的示例可能是可能的，但它不符合定义的规则。

有关更明确的来源，请参阅[C# 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)的第 25.5.5 节（第 399 页） 。

> 当所有组件 C、T1、...、TN 都可访问时，构造类型 C 是可访问的。更准确地说，构造类型的可访问域是未绑定泛型类型的可访问域和类型参数的可访问域的交集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-31T02:53:51.243

您面临的这种约束是有道理的，原因如下。

C# 是强类型的，所以...

为了能够在定义它的程序集范围之外引用 MySpecificClass，您必须知道它的参数类型才能生成对其实例的强类型引用；但是一个单独的程序集比内部定义不知道 MyInternalConcrete。

因此，如果在单独的程序集中，以下内容将不起作用：

```
MyClass<MyInternalConcrete> myInstance = new MySpecificClass(); 
```

在这里，单独的程序集不知道 MyInternalConcrete，所以你怎么能这样定义一个变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-31T03:18:55.640

如果允许，您可以将 MyClass 从程序集中传递出去，突然之间，另一个程序集可以访问它不应该访问的东西 - MyInternalConcrete！

# c# - 来自 C# 的 Unix 命令

> ID：498009
> 
> 赞同：2
> 
> 时间：2009-01-31T01:50:07.520
> 
> 标签：c#, unix, cross-platform, cygwin

是否有作为 .Net 程序集的 Unix shell 和命令的实现。这可以是 cygwin 的包装器，也可以是从公共域源构建的独立程序。我真正希望能够使用的命令类型是 wc、tar、cpio、ps、kill、cat、at ...

这样做有多酷（伪代码）

使用cygwin

......

```
 Shell myShell = new Shell("cat file1 file2 >> file3");
 myShell.Run(DateTime.Now); 
```

编辑 > 我可以看到 shell out 方法有效，我过去自己也使用过这种方法。然而，它只是感觉很难看，它是另一个正在运行的进程，它不安全，它需要在客户端机器上再次安装，你必须在构建命令字符串周围搞砸。作为另一个例子

```
 Shell myShell = new Shell();
 myShell.Infiles.Add (streamObject);
 myShell.Outfiles.Add (streamObject);

 myShell.Stderr.NewOutput += myErrorLogger(); 
```

ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-31T01:55:58.710

你看过 PowerShell 吗？许多使用 Unix 命令的任务都可以[转换为 PowerShell](http://blogs.msdn.com/powershell/archive/2006/04/25/comparative-examples-in-msh-and-ksh.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T01:58:58.173

可能会像下面这样。

```
Shell myShell = new Shell("c:\cygwin\bin\bash cat file1 file2 >> file3");  
myShell.Run(DateTime.Now); 
```

但是，我没有测试它的环境。

试试看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T16:14:24.560

我不知道任何实现，但我认为您拥有的是一个有趣的想法:) 对于开发可以在自己的控制台中运行并可由 .NET 程序集使用的[busybox](http://www.busybox.net/)的托管版本的人来说，这将是一个有趣的项目就像在您的示例代码中一样。但是这样的东西真的对很多人有用吗？

# java - 目前流行的 Java SIP 库是什么？

> ID：498043
> 
> 赞同：15
> 
> 时间：2009-01-31T02:02:26.090
> 
> 标签：java, sip

我正在用 Java 开发一个 SIP 应用程序，想知道目前最常用的 SIP 库是什么。

MJSIP？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-31T05:05:36.110

您可能想看看[SailFin](https://sailfin.dev.java.net/) - 它是由 Ericsson 使用[GlassFish](http://glassfish.java.net/)构建的 SIP servlet 容器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-31T04:20:57.263

据我所知，它的[JAIN-SIP](http://wiki.java.net/bin/view/Communications/JainSIP)。顺便说一下，很高兴了解 MjSip。您可能有兴趣查看[JBoss Mobicent](http://www.mobicents.org-a.googlepages.com/index.html)，用户指南目前还不完整。你不会在 Mobicent 上找到太多帮助。

或者正如[metadaddy](https://stackoverflow.com/users/33905/metadaddy)[在这里](https://stackoverflow.com/a/498307/42769)所说，“您可能想看看[SailFin - 它是爱立信使用](https://sailfin.dev.java.net/)[GlassFish](http://glassfish.java.net/)构建的 SIP servlet 容器。”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-01-06T12:49:56.610

有一个很棒的 SIP 堆栈称为[Pjsip](http://www.pjsip.org/)，它是用 C 编写的，但是有一个可用的 JNI[包装器](http://sourceforge.net/projects/pjsip-jni/)，因此可以通过 JNI 直接从 Java 调用特定于 SIP 的 C 函数。可以定义回调方法，这些方法可以在您的 Java 应用程序中实现。

可能的性能改进、代码可重用性（例如在 Android 和 iPhone 上）和活跃的开发社区是该堆栈的主要优势。

一个Android SIP VOIP 客户端，[CSipSimple](http://code.google.com/p/csipsimple/)使用这个堆栈，你可以看看它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-12-16T14:56:48.803

如果您的应用程序是客户端应用程序，您可能会对[peers](http://peers.sourceforge.net/)感兴趣，这是一个简单且有文档的 java sip 客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-27T11:08:38.993

JainSip sip stack 已被证明是成熟和完整的。[Mobicents 平台](http://mobicents.org)是一个成熟的平台，使用 Jain Sip 堆栈，拥有大量活跃的社区。

# c# - C# SIP 堆栈/库

> ID：498056
> 
> 赞同：62
> 
> 时间：2009-01-31T02:10:35.700
> 
> 标签：c#, voip, sip

我正在寻找一个用 C# 编写或提供 C# 包装器的好的 SIP 库。不一定需要是免费的。有人用过好东西吗？

澄清一下，我说的是 VoIP 协议 SIP。

我真的在寻找比谷歌搜索更多的东西。我希望有人回来说“我们使用______，效果很好。”

为了进一步澄清，我正在寻找一个可以帮助我实现 SIP 代理服务器而无需手动构建 SIP 数据包的库。我不是在寻找星号、freeswitch 或任何其他 pbx 软件。

我希望在 C# 中创建一个服务，它将等待 SIP 数据包并响应它们，我想要一个可以处理大部分细节的库。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-02-09T14:52:33.253

7 年前我经历了类似的任务，但正在寻找嵌入式 C 版本。我查看了[oSIP](http://www.gnu.org/software/osip/)库。它完成了将 SIP 数据包转换为结构并返回的所有工作。

但是，文档中有一点让我印象深刻。作者建议您非常熟悉 SIP 规范 ( [RFC 3261](http://www.ietf.org/rfc/rfc3261.txt) ) 以有效地使用该库。多次阅读规范后，我最终编写了自己的解析器和呼叫控制应用程序。

请记住，SIP 仍然是一个不断发展的标准。有一个活跃的[SIPForum](http://sipforum.org)小组目前正在开发[SIPConnect 1.1](http://www.sipforum.org/content/view/179/213/)，以标准化 SIP 服务提供商（例如 Vonage）和 SIP-PBX 之间的接口。还有一个名为[BLISS](http://www.bliss-ietf.org/charter.html)的活动，用于定义“最佳实践”以在用户代理之间实现 SIP 功能。

互操作性很困难。有数百个与 SIP 相关的 RFC。不同的端点使用不同的端点，并且对规范的解释并不总是兼容的。有几个不同的互操作性“测试事件（如[SIPit](http://www.sipforum.org/content/view/29/184/)）来确保您的实现与其他人一起工作。

无论您选择什么，请确保您对要实现的功能的规范有很好的了解。此外，规范和库将有助于数据包方面，但您仍然需要一个“呼叫控制”库（更高级别的“大脑”来决定如何处理 SIP 请求/响应）。除非您的应用程序纯粹是 SIP 代理，否则您还需要一个媒体层来处理音频。

说了这么多，几家互联网电话服务提供商 (ITSP) 已将[SIP Express 路由器](http://www.iptel.org/ser/)用作其服务的前端代理。它是非常可配置的，并且具有很高的兼容性成功率。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-07T15:40:06.350

恕我直言，迄今为止最好的堆栈之一是[PJSIP](http://www.pjsip.org/)。它是用非常便携的 C 语言编写的，并且有许多包装器。这是一个运行良好的[.NET 包装器](https://sites.google.com/site/sipekvoip/Home/documentation/pjsipwrapper)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-02T15:09:54.673

这是我遇到的一对：

[http://www.independentsoft.com/sip/index.html](http://www.independentsoft.com/sip/index.html)

[http://voipengine.googlepages.com/sipeksdk](http://voipengine.googlepages.com/sipeksdk)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-02-20T03:27:06.067

我的[吸毒](https://github.com/sipsorcery-org/sipsorcery)项目是另一种选择。它包含一个完全用 C# 编写的 SIP 堆栈。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-24T22:50:12.663

我们使用[SIP.Net](http://www.independentsoft.com/sip/index.html)，对我们来说工作正常。
我们使用它来等待 SIP 数据包并保持 SIP 流非常简单。
请注意，有时它的对象模型过于详细，因此产品本身非常灵活（如果您需要这种灵活性）。然而，我们编写了一个更高级别的包装器（一种外观）只是为了让我们更容易。他们反应迅速，但 IMO 的文档不够详细。
也可以查看[nsip](http://sourceforge.net/projects/nsip)（只是一个链接，我自己没试过）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-05T19:14:02.027

不久前我需要这个并最终编写了我自己的 B2BUA（一个 SIP 代理，它也处理音频并充当对话双方的端点）。

SIP 规范（和 RTP）的问题在于它非常复杂，尤其是您考虑了多年来对其进行的所有可选添加。每个人的实现方式都略有不同，因此如果您使用收缩包装的软件，您可能会遇到特定手机或服务器的问题。

就我而言，我试图让 Microsoft Speech Server 与 SIP 终结器进行通信。微软对 SIP 规范有一个特别有创意的解释（最显着的例子是它们不支持 UDP）。此外，一些 VOIP 网关不支持受监督传输的 REFER，这对于许多应用程序来说是必需的。

其他答案中提供了几个不错的链接：我的建议是自己动手或使用开源的东西，这样当您在 SIP 实现中遇到不可避免的不兼容时，您可以根据需要对其进行调整。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-31T02:31:44.877

看起来不错的起点可能是这篇[CodeProject 文章](http://www.codeproject.com/KB/cs/SIP_stack_with_SIP_proxy.aspx)。但是，我不相信它可以处理媒体流。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-10-14T04:02:33.660

[http://www.konnetic.com](http://www.konnetic.com)是一个相对较新的添加。完全托管。使用 SIP 和 SDP 所需的一切。他们没有像许多其他人那样在标准中摘取低垂的果实。Microsoft Lync 服务器同样出色但与 Microsoft 相关联。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-05T19:36:57.877

不知道你在这里找什么。您在寻找客户端 VOIP 应用程序还是服务器端？如果是后者，您可能需要查看 FreeSwitch。他们拥有的一项功能是能够在 Mono 中编写扩展代码，这允许使用 C#。寻找 mod_mono 支持。

[自由开关](http://www.freeswitch.org/node/157)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-07-12T11:17:48.920

也许你想试试 lumisoft。完全用 C# 构建。完全开源和免费。 [lumisoft](http://www.lumisoft.ee/lswww/download/downloads/Net)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-09-20T23:38:38.637

Konnetic 为 .NET 开发提供完全托管的 SIP 组件。

他们的[.NET SIP](http://www.konnetic.com/products/products_sip_sdk_std.aspx) SDK 可能是最全面的。

否则，Microsoft 的 Lync 服务器带有一个非常好的托管 SIP 库，可在此处获得：www.microsoft.com/en-us/lync/default.aspx

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-03-02T22:51:04.667

尝试[语音元素](http://www.voiceelements.com)。

它是一个 .NET 电话工具，他们有自己的 SIP 堆栈。使用 C# 或您选择的任何 .NET 语言。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-10T14:00:35.370

过去，我使用过 MS 的 Live Communications Server（以为是在 2003 年）。相关的 SDK 非常糟糕。

现在有了新版本 Office Communications Server。我没有使用 SDK 进行开发，但看过一些非常酷的演示。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-02-05T08:09:43.583

我已经看到（没有直接使用，只是回顾）一个相当大且稳定的 VOIP 系统，它使用来自 Radware 的 SIP 堆栈。非常好（即没有问题），我也没有发现任何安全问题......

我审查的系统是用 C# 编写的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-09-04T08:30:35.267

我发现最好的是[VoIP Video SIP SDK](http://conaito.com/products/voip-video-sip-sdk.aspx)它还提供高质量的视频

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-05-05T15:22:42.630

[LumiSoft.Net](https://github.com/pruiz/LumiSoft.Net)是一个非常好的 C# SIP 堆栈。它具有所有基本库，例如`SIP`、`RTP`、和许多其他库`SDP`，`DNS`可以非常轻松地构建强大的 sip 代理服务器或 SIP 客户端。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-01-31T03:30:23.073

这对我来说看起来很有趣...... [http://developers.inova.si/sipobjects/Default.aspx?tabid=92](http://developers.inova.si/sipobjects/Default.aspx?tabid=92) - 它不是开源的，但它绝对以.NET 为中心。它以 Avaya 为中心，因此可能不适合您的目的。

也看看这个： http: [//www.codeplex.com/mysipswitch](http://www.codeplex.com/mysipswitch)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-02-05T20:47:25.190

LanScape：[http ://www.lanscapecorp.com/](http://www.lanscapecorp.com/)

> 包括 LanScape VOIP Media Engine™ 在内的所有 LanScape VOIP 产品都经过全新设计，以支持 Microsoft Windows® 2000 和 XP 的所有版本，包括最新版本的 Windows Vista。

我个人也碰巧知道它是 C# 友好的。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2009-07-12T01:56:23.417

阅读有关 Avaya DMCC 的信息。您可以在 AvayaDev 中注册并免费下载。该 C# 框架让您可以利用 AES 和 CM 的所有 pbx 功能。您可以检查是否也支持 SIP。

# php - 将 URL 映射到 MySQL 数据库

> ID：498057
> 
> 赞同：0
> 
> 时间：2009-01-31T02:12:03.293
> 
> 标签：php, mysql, apache

我有兴趣提供[我的应用程序的托管版本和 SaaS 版本](https://stackoverflow.com/questions/495407/multiple-instances-for-applications-one-for-each-customer)。现在，SOers 建议我[将 URL 映射到 MySQL 数据库](https://stackoverflow.com/questions/495407/multiple-instances-for-applications-one-for-each-customer/495439#495439)。我能想到的是这样的

1.  companya.mysoft.com 将拥有以 companya* 开头的 MySQL 数据库。即，compana_mydb
2.  companyb.mysoft.com 将拥有以 companyb*.ie 开头的 MySQL 数据库，即 companyb_mydb
3.  等等。

这样，创建新的公司帐户和进行维护就更容易了。

现在，是否可以在 Apache 配置文件和 MySQL ini 以及 PHP ini 文件中调整所有这些 **设置**？（我正在使用 Apache、MySQL 和 PHP）。最好***不要更改我的应用程序***。

**编辑：** MySQL 不支持[用户指定的数据库特定目录](http://forums.mysql.com/read.php?10,245138,245158#msg-245158)。更改问题以反映这一点。

**Edit2：** 有人建议我编辑 PHP 应用程序以检查子域并选择正确的数据库。但这意味着要调整托管代码以满足 SaaS 版本。**所以基本上我们会有两个代码版本，一个用于托管，另一个用于 SaaS**，这不是我想要的。如果一切都通过配置文件完成会更好，这样我就只有一个版本的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-31T04:02:39.157

如果您正确设置 PHP 应用程序（可能使用某种类型的 MVC 设计模式或框架），您可以在一个地方指定该请求中所有后续 mysql 函数使用的数据库名称。然后只需检查请求标头，获取（并验证）公司/数据库名称前缀，并在`mysql_select_db`函数中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-31T05:26:30.127

您无法从 Apache 的配置中创建供 PHP 使用的数据库连接。必须从 PHP 代码中创建数据库连接，这可以执行检查标头（请求使用的域）等操作，或检查您创建的配置文件并指定您是在运行 SaaS 还是托管版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-31T04:09:19.830

为什么需要在 INI 文件中执行此操作？我只想让您的 PHP 数据库类首先解析 $_SERVER['SERVER_NAME'] （或其他等效项）以找出您所在的子域，然后从那里选择相应的数据库。

如果您对数据库函数使用 PDO 或 mysqli（您应该使用），则必须在构造函数调用中指定 db 名称，因此您可以在创建该对象之前执行此检查。

# javascript - actionscript ExternalInterface 命名空间冲突

> ID：498065
> 
> 赞同：1
> 
> 时间：2009-01-31T02:16:34.470
> 
> 标签：javascript, actionscript-2, namespaces, externalinterface, collision

A 有一个 Flash 小部件（一个音乐播放器），一个页面上有大约 10 个实例。我需要在 flash 和它所嵌入的页面的 javascript 之间进行通信。很长时间以来，我对 actionscript 的操作并不多，但是一些谷歌搜索将我带到了[这里](http://kb.adobe.com/selfservice/viewContent.do?externalId=tn_15683)，并转到了 ExternalInterface。它看起来很完美，但是有一个问题。我做了这样的事情：

```
ExternalInterface.addCallback("stopTrack", this, stopTrack); 
```

但是，现在 stopTrack 将注册到页面上的 10 个不同的事物。我希望能够只停止 10 首曲目中的一首。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T06:09:15.920

我完全不记得了——但我似乎认为回调没有添加到窗口对象，而是页面上的 swf 对象——有点像

```
document.getElementById('musicFlashPlayer10').stopTrack(); 
```

只会在该实例上触发回调。

这种格式可能会在不同的浏览器之间发生变化——无论如何，回调会添加到加载 Flash 文件的每个 javascript 实例中。

# html - CSS 优先规则

> ID：498069
> 
> 赞同：5
> 
> 时间：2009-01-31T02:20:47.740
> 
> 标签：html, css

我的理解是样式表有 3 种类型：

*   由页面作者定义
*   由用户定义（即一组由用户定义并安装到浏览器中的默认样式）
*   浏览器定义的默认样式表

根据[这本书](http://www.amazon.co.uk/Head-First-HTML-CSS-XHTML/dp/059610197X/ref=sr_1_1?ie=UTF8&s=books&qid=1233368093&sr=8-1)，如果一个元素没有被任何这些样式表中的选择器匹配，那么只有这样才能从父元素继承属性值。然而，这本书也说浏览器的默认样式表应该为所有类型的元素定义一个样式。

如果浏览器的样式表确实为所有类型的元素定义了一个样式，并且该样式的优先级高于继承，则不应观察到继承的属性值。显然情况并非如此，那么浏览器默认样式表中定义的属性和父元素定义的属性的正确优先级规则到底是什么？（我知道并非所有 CSS 属性都继承了，但为了便于讨论，假设我指的是一个属性，例如`color`）

在此先感谢，唐

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-31T03:40:10.747

浏览器不会为**所有**元素定义样式，只是为某些元素定义样式。简化的内部浏览器样式表可能如下所示：

```
a { color: blue; border-bottom: 1px solid blue }
p { margin-bottom: 1em; }
blockquote { margin: 0 5em 1em 5em; } 
```

以下面的 HTML 片段为例：

```
<ul>
  <li>
    <span>Blah blah blah.</span>
  </li>
  <li>
    <a href="about:">Foo</a>
  </li>
</ul> 
```

当浏览器渲染`<span>`元素时，它会查看所有样式表（浏览器、作者和用户）以查找匹配的规则，并[找出最重要](http://www.w3.org/TR/CSS2/cascade.html#cascade)的规则。对于此示例，作者样式表包含一条规则：

```
ul { color: Green; } 
```

您的浏览器的内部样式表没有为 指定`color`值`span`，因此它会沿着文档树向上遍历，直到找到*确实*定义了`color`规则的内容，在本例中为`ul`。

另一方面，当浏览器呈现`<a>`元素时，它在用户或作者样式表中找不到任何指定 a 的内容`color`，因此它使用在浏览器样式表中找到的规则。

最终结果：绿色文本，蓝色链接。

**奖励信息**：如果您使用的是 Firefox，则可以通过粘贴`resource://gre/res/html.css`到地址栏中来查看（其中一个）其内部 css 文件。（似乎直接的超链接混淆了 SO 的降价引擎）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-31T03:03:44.173

你是对的。样式表有三个来源。首先是浏览器样式，然后是用户（读者）样式，最后是作者样式；作者风格通常胜过用户风格。如果稍后在影响它的级联（在用户或作者样式表中）定义了样式，则在浏览器的默认样式表中定义的任何内容都将被覆盖。如果由于作者编写的样式而要继承某些内容，则它将覆盖默认样式，因为它是稍后在级联中定义的。

去[这里](http://css.maxdesign.com.au/selectutorial/advanced_cascade.htm)了解更多关于级联的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T03:06:15.620

忽略覆盖所有内容的内联样式，如果多个类/选择器适用于页面元素，则最后定义的那个获胜（因为首先定义浏览器样式，它们通常被覆盖）。当有一个类/选择器向下钻取层次结构的所有级别时，需要注意的是。

这是一个示例表：

```
 <style type="text/css">
        #content
        {
            width: auto;
        }

        #content DIV.special
        {
            width: 200px;
            background: #999999;
            border: 2px dotted #000000;
        }

        #content DIV
        {
             width: 300px;
             border: 1px solid #CCCCCC;
        }

    </style> 
```

给定以下 HTML：

```
 <div id="content">
            <div class="special">
                should render 200px wide with a gray background and a dotted border
            </div>
            <div>
               should render 300px wide with a 1pt border
            </div>
        </div> 
```

然后，如果您将此样式添加到工作表的底部：

```
 DIV
    {
        background: #CC9999;
    } 
```

除了具有 .special 类的 div（因为它更具体）之外，您将把所有东西都变成浅紫色（因为它是最后一个具有颜色值的 DIV）。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T03:42:43.970

从他们的父母那里继承元素的风格可以有两种方式。首先，虽然浏览器可以为每个元素定义样式属性，但它们通常不会详尽无遗地这样做。例如，“p”元素通常有一个默认的上边距（以及其他），但没有定义字体样式，因此在没有作者或用户规则的情况下，它将从其父元素继承。其次，在 CSS 中的某些地方可以使用显式的“继承”值来指示渲染器采用其父级的样式属性。这曾经在 IE 中的位置（我认为是表格单元格）中是必需的，并且在覆盖级联中的早期规则时继续如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T04:32:43.400

据我了解，您想知道无样式元素何时采用浏览器样式表中定义的样式，何时采用其父项的样式。这实际上是一个关于特异性的问题，而不是继承的问题。举这个过于明显和简单化的例子：

**浏览器表**
`a { color: blue }`

**页面作者表**
`div { color: green }`

**HTML**
`<div><a href="#">This is a link</a></div>`

如您所料，链接将是蓝色的，而不是绿色的，因为浏览器的规则更具体。它与继承无关，因为链接永远没有机会继承。元素样式流的优先级：

1.  内联样式；你不能比这更具体，它胜过一切（可能的例外是 !important 存在于相关规则中）
2.  最具体的选择器（位于任何地方）；将应用具有最高特异性的选择器，无论它位于继承结构中的哪个位置，如 Rob Allen 在此线程中所述
3.  最近应用的选择器，然后解析继承树（文档中的样式标签 => 作者表 => 用户表 => 浏览器表；请注意，在某些情况下，用户表可能会超过作者表，但通常作者是确定的）
4.  父级属性的样式（或者如果父级没有必要的属性，则在 DOM 上）；显然不是所有的属性都是继承的

浏览器样式不会阻止父样式被继承的主要原因是浏览器样式通常非常稀疏，并且会在 DOM 树的尽可能高的位置定义颜色、字体大小等内容，以便于覆盖它们。如果你有一个浏览器定义了 span 元素的颜色，那么你很可能会在试图继承一个通用的 div 颜色时遇到问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-18T23:14:23.493

您可能还想查看“特异性”

[http://htmldog.com/guides/cssadvanced/specificity/](http://htmldog.com/guides/cssadvanced/specificity/)

# exe - 如何制作修改后的EXE文件？

> ID：498078
> 
> 赞同：4
> 
> 时间：2009-01-31T02:26:02.563
> 
> 标签：exe, ida

我使用 IDA 进行了更改，但我不知道如何再次制作新文件 exe

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-07-02T23:26:58.193

编辑 -> 补丁程序 -> 将补丁应用于输入文件。您还将看到创建备份的选项，选择它，您应该复制输入文件，原始文件和新编辑的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-31T02:35:27.617

根据关于 OpenRCE 的[讨论](http://www.openrce.org/forums/posts/612)，您似乎不能直接强制 IDA Pro 输出“.exe”。你可以做的是让它产生一个“.dif”并用它来修补原始的“.exe”。

要让 IDA Pro 生成“.dif”：文件->生成文件->创建

# ruby-on-rails - Lua on Rails？

> ID：498087
> 
> 赞同：13
> 
> 时间：2009-01-31T02:35:23.107
> 
> 标签：ruby-on-rails, lua

有没有像 Rails for Lua 这样的库？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-31T14:49:17.213

完全像 Rails，我会说不。但是看看[Kepler 项目](http://www.keplerproject.org/)，特别是[Orbit](http://orbit.luaforge.net/)，它是一个 MVC 框架。我正在用它做网络事情，使用它真的很有趣。你没有 Rails 中的脚手架东西，但除此之外，它有一个 orm，一个模板引擎 ( [Cosmo](http://cosmo.luaforge.net) )，所以你可以开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-01-31T23:07:21.490

[Tir](http://tir.mongrel2.org/)是一个简单的 Lua + [Mongrel2](http://mongrel2.org/) Web 框架，由 Zed Shaw 编写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-15T08:34:12.973

在 Lua（或 MoonScript）中构建 Web 应用程序`lapis`可能是一个合适的解决方案。它似乎足够稳定，因为[http://itch.io](http://itch.io) 或[http://luarocks.org](http://luarocks.org)等知名网站都是用它构建的。

[http://leafo.net/lapis/](http://leafo.net/lapis/)

*Lapis 包括 URL 路由、HTML 模板、CSRF 保护和会话支持、PostgreSQL/MySQL 支持的模型、模式生成和迁移，以及开发网站所需的一系列有用功能*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-31T02:42:26.040

我想知道同样的事情，这是我在[LuaForge](http://luaforge.net/search/?type_of_search=soft&words=web&Search=Search)上找到的列表。

没有尝试过其中任何一个，因此您的里程可能会有所不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-10T04:48:20.830

通过 Rails，我假设您正在寻找 MVC Web 框架。看看[水手](http://sailorproject.org/)。它是一个开源框架，你可以在[GitHub 上](https://github.com/sailorproject/sailor)关注它的开发。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-24T09:40:41.980

从对实际问题的评论中，查看[此处](http://lua-users.org/wiki/LibrariesAndBindings)的 lua-users.org wiki以获取可用的 Web 框架列表。[我对Sailor](http://www.sailorproject.org)有一些经验，这似乎是一个不错的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-10T20:05:15.087

我肯定会检查**青金石**。它是 OpenResty 的一个非常轻量级和快速的框架。我真的很喜欢它，并预测它会有一个光明的未来！

[http://leafo.net/lapis/](http://leafo.net/lapis/)

正如您对利用 OpenResty 构建的任何东西所期望的那样，它的基准非常好：[https ://www.techempower.com/benchmarks/#section=data-r12&hw=peak&test=query](https://www.techempower.com/benchmarks/#section=data-r12&hw=peak&test=query)

Lapis 的作者还为 Lua 编写了一种类似于 CoffeeScript 的语言，称为 MoonScript，非常不错：[http ://moonscript.org/](http://moonscript.org/)

# c# - 包含实现 IDisposable 的项目的会话

> ID：498095
> 
> 赞同：7
> 
> 时间：2009-01-31T02:41:31.190
> 
> 标签：c#, asp.net, session, garbage-collection, idisposable

在 ASP.NET 中，如果项目保留在实现 IDisposable 的会话状态，但在会话到期时从未被应用程序专门删除和处置，是否会对 Dipose() 中的任何代码将执行的对象调用 Dispose？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-31T09:04:37.237

我不同意肖恩的回答；首先，终结器**不**应该经常添加到类中，即使它们是`IDisposable`- 终结器应该只真正用于表示非托管资源的类中。相反，带有终结器的类通常也是`IDisposable`.

问题是：被`Dispose()`称为-不，不是。该对象将在将来的某个时候被垃圾收集（不确定），但仅此而已。终结器不会在这里添加太多，因为任何封装的对象也已经有资格被收集（假设它们没有在其他地方引用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-31T02:56:14.967

如果`IDisposable`模式被[正确实现](http://www.codeproject.com/KB/cs/idisposable.aspx)，那么是的（即类的析构函数将负责处理对象）。我不相信 ASP.NET 会话管理器对显式调用`Dispose()`实现`IDisposable`.

请注意，尽管 Mark 强烈反对，但我并不是建议“常规地”添加终结器。我只是建议，如果您**希望**`Dispose`在会话到期时调用对象上的方法，这是一个可行的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-31T14:20:01.577

我会担心在 Session 中有 Disposable 对象。它几乎肯定会为您带来可扩展性问题。任何可处置的东西都可能与某些有限的资源相关联，如果您有许多活动会话，您可能会用完该资源。其次，我希望许多（大多数？）一次性对象在网络场中无法正常工作，因为它们所绑定的资源可能是单台机器的本地资源，并且它们不会在同一台机器上序列化然后反序列化状态。

# rsync - rsync 挂起，指定了许多远程文件

> ID：498101
> 
> 赞同：1
> 
> 时间：2009-01-31T02:49:07.447
> 
> 标签：rsync

当远程机器使用 rsyncd 时，使用以下 rsync 命令可以让您将大量远程文件复制到本地机器：

rsync -R 主机名::'module/path1/file1 module/path2/file2 module/path3/file3 module/path4/file4' /local/path

但是，如果文件数量太多，rsync 会挂起，不会在目标位置创建文件。我正在测试的环境中的限制是 22。对于 22 个文件，它会在几秒钟内完成；有 23 个或更多文件时，它会无限期挂起。

任何人都可以提供可能发生这种情况的原因吗？这是我检查过的一些事情：

*   两台机器都没有耗尽磁盘空间或内存。
*   所有文件都可以传输，只要我一次不超过 22 个。（换句话说，位置 23 及以上的特定文件并没有什么特别之处。）
*   没有权限问题；我有能力读取远程机器上的所有文件，并且可以写入目标目的地。（此外，正如我在上一项中指出的，只要我一次不超过 22 个，我的整个列表中的所有 ~50 个文件都可以传输。）
*   如果我使用 -n（试运行）选项，什么都不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-31T02:58:28.613

好的，经过进一步测试，它似乎与参数长度有关。我还没有计算出确切的长度，但我尝试了一组不同的 25 个文件，路径/文件名更短，并且工作正常。所以我想我只需要限制命令的长度。屁股。:\

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T04:06:09.350

没有解释为什么要指定单个文件。最简单的方法是递归地对整个目录进行 rsync，如果需要更多控制，则使用带有适当模式的`--include`or标志来匹配。`--exclude`

如果您的使用确实需要明确指定要备份的每个文件，则使用单独的文本文件列出这些文件并使用`--files-from`标志调用 rsync。

我已经使用了该`--files-from`选项。它运作良好。rsync 非常可靠 - 但许多配置选项可能会使学习变得混乱。例如，有一个`--cvs-exclude`标志可以从备份中排除所有元数据文件，不仅适用于 CVS，也适用于 SVN。非常有用，但绝对不容易被发现。

所有这些选项都在[此处](http://samba.anu.edu.au/ftp/rsync/rsync.html)的 rsync 文档中有详细说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T02:55:21.680

strace 客户端和服务器，看看是谁造成了问题。它闻起来像 rsync 中的某种错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-31T04:02:17.410

让我们假设这是一个错误而不是预期的行为。

由于[Rsync](http://samba.anu.edu.au/rsync/)是一个开源项目。您可以下载源代码，找到错误并为每个人上传修复程序。您应该首先检查您是否使用的是最新版本。

# php - 插件内子页面的wordpress url解析

> ID：498105
> 
> 赞同：2
> 
> 时间：2009-01-31T02:51:47.270
> 
> 标签：php, wordpress, url, plugins

假设我在 wordpress 中有一个页面“foo”，这样 http:/www.blah.com/foo 就会显示它。

假设这个页面在其内容中有一个触发器，例如 <!-- foo --!> 我的插件通过 add_filter('the_content', ..) 过滤器跟踪它。因此，所有对 http:www.blah.com/foo 和[http://www.blah.com/foo?var=bar](http://www.blah.com/foo?var=bar)的调用都被插件接收并处理。

现在有没有办法让插件知道它想要处理[http://www.blah.com/foo/bar](http://www.blah.com/foo/bar) [http://www.blah.com/foo/bar/类型的所有 url morefoo](http://www.blah.com/foo/bar/morefoo)等。“无需”为每个页面创建页面/子页面，因为这些 url 将被动态创建？

此外，除了在页面内的 the_content 上使用 add_content 过滤器之外，是否还有可以从理想地键入 url 的插件中获取控制权，因此对[http://www.blah.com/foo](http://www.blah.com/foo)的所有调用都由插件处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-31T03:40:15.503

是的，您可以获取 URL 引用（也称为查询）并解析它们，而无需创建子页面。

[查询概述页面](http://codex.wordpress.org/Query_Overview)中描述了事件的顺序。你想特别关注一下这个`parse_request`动作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-31T21:49:11.453

回答我自己的问题：

上面答案中的指针很有用，让我走上了正确的道路，但我一直遇到一个障碍，每当调用有问题的 url 时，它就会一直调用 index.php。

然后我遇到了[http://mikeschinkel.com/blog/restful-web-services-in-wordpress-plugin/](http://mikeschinkel.com/blog/restful-web-services-in-wordpress-plugin/) 在那里他进行了解释并提供了一个答案，需要一个 template_redirect 操作来确保控制在你想要的地方.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-31T03:47:52.320

我使用自定义 mod_rewrite 规则做了一些与您描述的非常相似的事情。按照您的示例，我有一个使用模板 foo.php 的页面 Foo。foo.php 模板接受一个查询变量，比如“path”，它定义了 URL 的其余部分。在我的 .htaccess 文件中，我有以下规则（小心将其置于WordPress 自动生成的规则*之外！）：*

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^foo/(.+) /foo/?path=$1 [L] 
</IfModule> 
```

您的插件可能还需要禁用“redirect_canonical”插件，该插件可能会意外盗取您的 URL。

```
remove_action('template_redirect', 'redirect_canonical'); 
```

我认为也可以使用[template_redirect](http://wphooks.flatearth.org/hooks/template_redirect/)钩子和[WP_Rewrite](http://codex.wordpress.org/Function_Reference/WP_Rewrite)类做类似的事情，但我自己没有尝试过。

# c++ - 如何从命令行编译 Visual Studio 项目？

> ID：498106
> 
> 赞同：138
> 
> 时间：2009-01-31T02:52:25.630
> 
> 标签：c++, python, visual-studio-2008, command-line

我正在为使用[Monotone](http://en.wikipedia.org/wiki/Monotone_%28software%29)、[CMake](http://en.wikipedia.org/wiki/CMake)、Visual Studio Express 2008 和自定义测试的大型 C++ 解决方案编写签出、构建、分发、测试和提交周期脚本。

所有其他部分看起来都非常简单，但我不知道如何在没有 GUI 的情况下编译 Visual Studio 解决方案。

该脚本是用 Python 编写的，但一个答案可以让我只调用： os.system 就可以了。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2009-01-31T03:04:10.523

我知道有两种方法可以做到这一点。

**方法 1**
第一种方法（我更喜欢）是使用[msbuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)：

```
msbuild project.sln /Flags... 
```

**方法2**
你也可以运行：

```
vcexpress project.sln /build /Flags... 
```

vcexpress 选项立即返回并且不打印任何输出。我想这可能是您想要的脚本。

请注意，DevEnv 没有随 Visual Studio Express 2008 分发（当我第一次遇到类似问题时，我花了很多时间试图弄清楚这一点）。

因此，最终结果可能是：

```
os.system("msbuild project.sln /p:Configuration=Debug") 
```

您还需要确保您的环境变量是正确的，因为默认情况下 msbuild 和 vcexpress 不在系统路径上。要么启动 Visual Studio 构建环境并从那里运行你的脚本，要么修改 Python 中的路径（使用[os.putenv](http://docs.python.org/library/os.html#os.putenv)）。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2009-01-31T02:58:27.147

MSBuild 通常可以工作，但我之前遇到过困难。你可能有更好的运气

```
devenv YourSolution.sln /Build 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-07-25T20:01:03.153

老实说，我必须加上我的 2 美分。

您可以使用**msbuild.exe**来完成。**msbuild.exe**有很多版本 。

> C:\Windows\Microsoft.NET\Framework64\v2.0.50727\msbuild.exe C:\Windows\Microsoft.NET\Framework64\v3.5\msbuild.exe C:\Windows\Microsoft.NET\Framework64\v4.0.30319 \msbuild.exe
> C:\Windows\Microsoft.NET\Framework\v2.0.50727\msbuild.exe C:\Windows\Microsoft.NET\Framework\v3.5\msbuild.exe C:\Windows\Microsoft.NET\Framework \v4.0.30319\msbuild.exe

使用您需要的版本。基本上你必须使用最后一个。

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe

那么该怎么做。

1.  运行**命令**窗口

2.  输入 msbuild.exe 的路径

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe

1.  输入项目解决方案的路径，例如

> “C:\Users\Clark.Kent\Documents\visual studio 2012\Projects\WpfApplication1\WpfApplication1.sln”

1.  在解决方案路径之后添加您需要的任何标志。

2.  按**ENTER**

请注意，您可以获得有关所有可能标志的帮助，例如

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe /帮助

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-09-29T08:20:49.510

正如其他人指出的那样使用`msbuild`对我有用，但我需要做的远不止这些。首先，`msbuild`需要能够访问编译器。这可以通过运行来完成：

```
"C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\vcvarsall.bat" 
```

然后`msbuild`不在我的 $PATH 中，所以我必须通过它的显式路径运行它：

```
"C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe" myproj.sln 
```

最后，我的项目使用了一些变量，例如`$(VisualStudioDir)`. 似乎那些没有设置，`msbuild`所以我不得不通过`/property`选项手动设置它们：

```
"C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe" /property:VisualStudioDir="C:\Users\Administrator\Documents\Visual Studio 2013" myproj.sln 
```

那条线终于让我编译了我的项目。

**奖励**：似乎命令行工具在使用 30 天后不需要注册，就像“免费”的基于 GUI 的 Visual Studio 社区版一样。有了 Microsoft 注册要求，该版本几乎不是免费的。如果有的话，就像在 Facebook 中一样免费......

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-31T02:55:12.520

[MSBuild 是您的朋友。](http://msdn.microsoft.com/en-us/library/ms171452.aspx)

```
msbuild "C:\path to solution\project.sln" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-09T08:47:03.997

DEVENV 在许多情况下都运行良好，但是在构建我的 WIX 安装程序的 WIXPROJ 上，我得到的只是 Out 日志中的“CATASTROPHIC”错误。

这有效：MSBUILD /Path/PROJECT.WIXPROJ /t:Build /p:Configuration=Release

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-29T06:40:51.897

`dotnet build`似乎是构建解决方案的最新方法。

[https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-build](https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-build)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-05-06T11:18:31.090

MSBuild 和 DevEnv 都在此处的答案中被正确地建议为从命令行构建的方法。我想指出，微软是这么说的：*“一般来说，DEVENV 比直接使用 MSBuild 更受欢迎，因为你可以让 Visual Studio 处理 MSBuild 的复杂性。”*

[参考](https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line?view=msvc-160#command-line-project-management-tools)

# svn - 将存储库从 git 转换为 subversion

> ID：498110
> 
> 赞同：46
> 
> 时间：2009-01-31T02:55:45.080
> 
> 标签：svn, git, version-control

除了这样做的原因之外，是否有一种合理的方法可以**将整个 git 存储库转换为 subversion**？

我只能找到关于*从*subversion迁移*到*git 以及在两者之间交换变更集的大量信息，但不能将整个 git 存储库简单地转换为 svn。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-31T03:04:13.517

在这个方向进行转换的一般问题是 Git 存储库可以包含的不仅仅是修订的线性历史，正如 Subversion 所期望的那样。具有不同历史和频繁合并提交的多个祖先都是可能的，这在 Subversion 存储库中不容易表示。

对于在 Git 存储库中确实有线性历史记录的简单情况，您可以使用`git-svn dcommit`将批次推送到其他空的 Subversion 存储库。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T15:55:14.790

[使用SubGit](http://subgit.com)很容易执行。

```
$ svnadmin create svn.repo
$ subgit configure svn.repo
$ nano svn.repo/conf/subgit.conf to specify a path to your bare repository (you may use "git clone --bare <URL>" if you have none locally)
$ subgit install svn.repo 
```

转换后，您的 SVN 和链接的 Git 存储库将同步：每次 Git 推送都将转换为 SVN 提交，反之亦然。中断翻译运行

```
$ subgit uninstall svn.repo 
```

虽然翻译 SubGit 将尽可能保留提交日期、标签、忽略、合并、EOL、分支等。我不能对 git-svn 存储库说同样的话。

# c# - 如何使 HtmlTextWriter 对象使用空格而不是制表符作为其缩进？

> ID：498134
> 
> 赞同：0
> 
> 时间：2009-01-31T03:06:17.867
> 
> 标签：c#, html, .net, htmltextwriter

我正在从 WinForm 上运行的代码创建一些 html。我想创建以下html：

```
<html>
<body>
    <div>
        <p>foo</p>
    </div>
</body>
</html> 
```

我正在使用 System.Web.UI.HtmlTextWriter 类来执行此操作：

```
System.Web.UI.HtmlTextWriter htmlWriter = new System.Web.UI.HtmlTextWriter();
htmlWriter.WriteFullBeginTag("html");
htmlWriter.WriteLine();
htmlWriter.WriteFullBeginTag("body");
htmlWriter.WriteLine();
htmlWriter.Indent++;
htmlWriter.WriteFullBeginTag("div");
htmlWriter.WriteLine();
htmlWriter.Indent++;
htmlWriter.WriteFullBeginTag("p");
htmlWriter.Write("foo");
htmlWriter.WriteEndTag("p");
htmlWriter.Indent--;
htmlWriter.WriteLine();
htmlWriter.WriteEndTag("div");    
htmlWriter.Indent--;
htmlWriter.WriteLine();
htmlWriter.WriteEndTag("body");
htmlWriter.WriteLine();
htmlWriter.WriteEndTag("html"); 
```

这很好用，但是，当我在文本编辑器中打开生成的 html 时，我的缩进看起来太远了，因为它使用的是制表符。有没有办法强制这个类使用多个空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T03:33:18.763

我不是 System.Web.UI 人，但从[MSDN 文档](http://msdn.microsoft.com/en-us/library/y8y8wst5(VS.80).aspx)中，看起来您可以提供用于缩进的字符作为 HtmlTextWriter 构造函数的第二个参数。因此，要获得 4 个空格而不是制表符：

```
System.Web.UI.HtmlTextWriter htmlWriter = 
    new System.Web.UI.HtmlTextWriter(yourTextWriter, "    "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-21T03:38:41.360

大卫在技术上回答了你的问题，但这条路通向黑暗的一面。客户端 Web 代码未编译。如果您使用四个空格而不是制表符，那么您做错了。

即使影响很小，什么时候可以接受降低 400% 的效率？如果你想无缘无故地让事情变慢一点，你也可以随机添加 Thread.Sleep() 调用到你的服务器端代码。

修复文本编辑器的设置。

# sql-server - 在负载下刷新汇总表的最佳方法是什么？

> ID：498142
> 
> 赞同：2
> 
> 时间：2009-01-31T03:12:30.303
> 
> 标签：sql-server, sql-server-2005, performance, transactions, deadlock

我在我的 SQL Server 2005 数据库中创建了一个表，并用汇总和计算值填充它。目的是避免在每次调用数据库时进行大量连接和分组。我希望此表每小时刷新一次，但我不确定在网站负载时执行此操作的最佳方法。如果我删除每条记录并在一个事务中重新填充表，那会成功还是会出现死锁和其他潜伏的麻烦？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T23:12:25.230

我在几个项目中这样做的方式是在不同的模式中使用表的两个副本。所以像：

```
CREATE SCHEMA fake WITH AUTHORIZATION dbo;
CREATE SCHEMA standby WITH AUTHORIZATION dbo;
GO

CREATE TABLE dbo.mySummary(<...columns...>);

CREATE TABLE fake.mySummary(<...columns...>);
GO 
```

现在创建一个截断并重新填充假表的存储过程，然后在事务中在模式之间移动对象。

```
CREATE PROCEDURE dbo.SwapInSummary
AS
BEGIN
    SET NOCOUNT ON;

    TRUNCATE TABLE fake.mySummary;

    INSERT fake.mySummary(<...columns...>)
        SELECT <expensive query>;

    BEGIN TRANSACTION;
        ALTER SCHEMA standby TRANSFER dbo.mySummary;
        ALTER SCHEMA dbo     TRANSFER fake.mySummary;
        ALTER SCHEMA fake    TRANSFER standby.mySummary;
    COMMIT TRANSACTION;
END
GO 
```

这可能是您可以让用户等待新数据刷新并且不会在读取过程中中断他们的最短时间。（与 NOLOCK 相关的许多问题使其成为不太理想的替代方案，尽管不可否认，它很容易编码。）为了简洁/清晰，我省略了错误处理等，我还应该指出，如果你使用同步数据库的脚本，确保在两个表上命名约束、索引等相同，否则一半时间会不同步。在程序结束时，您可以截断新的 fake.MySummary 表，但如果您有空间，我喜欢将数据留在那里，以便始终与以前的版本进行比较。

在 SQL Server 2005 之前，我在事务中使用 sp_rename 来完成完全相同的事情，但是由于我在工作中这样做，我很高兴切换到模式，因为当我这样做时，来自 sp_rename 的不可抑制警告停止填充起来我的 SQL Server 代理历史日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T15:00:45.863

您还可以根据负载的重量创建索引视图，这可能是一个不错的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T03:41:14.300

这取决于数据库中的关系以及针对它运行的查询。

如果它是一个可以容忍陈旧数据的汇总表，则可以使用查询来填充它，这些查询使用 NOLOCK 连接提示执行不带锁的 SELECT。**注意**：只有在您确定后果时才应使用 NOLOCK 提示。

通常有重新调整索引的空间，以减少负载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T17:20:52.617

我决定在@temp 表变量中建立数据。然后我会将汇总 ID 复制到它们匹配的临时表中。最后，我将基于@temp 表在汇总表中添加、更新和删除行。

# c++ - Qt 和 VC++ 6.0 IDE？

> ID：498169
> 
> 赞同：1
> 
> 时间：2009-01-31T03:40:32.070
> 
> 标签：c++, windows, user-interface, qt, visual-c++-6

首先，我想知道我是否应该同时使用 Qt 和 Windows。如果是这样，我应该使用 VC++ 6.0 IDE 还是另一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-31T03:55:06.083

我认为目前没有人应该将 VC++ 6.0 用于任何事情。如果您担心成本，最好购买 2008 的快速版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-05T11:33:09.053

查看[QT Creator](http://www.qtsoftware.com/developer/qt-creator)

> Qt® Creator 是一种全新的轻量级跨平台集成开发环境 (IDE)，旨在使使用 Qt 应用程序框架的开发更加快速和轻松。
> 
> 专门针对创建跨平台应用程序的 Qt 开发人员的需求量身定制 专注于提高开发人员生产力而不会妨碍他们的功能 帮助新的 Qt 开发人员更快地启动和运行 开放和可扩展；集成了熟悉的工具和文件格式
> 
> Qt Creator 的最终版本计划于 2009 年初发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-31T04:27:02.430

我在一个名为 ParaViewGeo (paraviewgeo.mirarco.org) 的产品上工作。它广泛使用了 Qt，我们一直成功地使用 Visual Studio 6 到 2008 年。

由于 Qt 是跨平台的，我将在这里切题并提到另一个好的跨平台想法是 CMake，它是一个跨平台 Make，可以从您的代码生成 Visual Studio 解决方案文件，以及其他编译器的项目文件，以防您改变主意并获得不同的 IDE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-31T03:43:26.590

他们一起工作得很好。
我使用了 Visual Studio Express 2008。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T11:26:09.177

还有[Eclipse](http://www.eclipse.org/)，它是免费的、跨平台的并且有大量的插件。

# cocoa - 自定义 NSControl 目标/操作方法！

> ID：498175
> 
> 赞同：4
> 
> 时间：2009-01-31T03:43:16.730
> 
> 标签：cocoa, class, action, target

我有一个自定义的 NSControl，它充当一种二维滑块，您可以在其中拖动视图周围的句柄。我添加了一些特定于类的方法，唯一被我覆盖的是鼠标操作和 drawRect。我的问题是，我如何让它实施目标行动？如何让它表现得像一个滑块并不断向绑定目标发送操作消息？到目前为止，我可以在界面生成器中将其连接起来，但没有发送任何操作。我已经阅读了很多关于 sendActionOn: 和 sendAction:to: 等方法的信息，但我不知道如何使用它们。如果有人会解释它，我相信我会明白的。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2009-02-01T02:14:11.807

`-sendActionOn:`仅当您将 NSControl 子类化并实现一个单元格时才相关，而您不是。

在`-mouseDragged:`（或调用任何方法`-mouseDragged:`来更改滑块位置）中，您应该只调用`[[self target] performSelector:[self action]]`.

# air - 在 AIR 启动时显示“正在加载...”对话框或忙碌光标

> ID：498178
> 
> 赞同：1
> 
> 时间：2009-01-31T03:44:40.003
> 
> 标签：air

对于需要在显示任何内容之前进行一些预处理的 AIR 应用程序，显示对话框或忙碌光标的最佳方式是什么？否则，用户可能会认为应用程序在 15-25 秒内崩溃...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-31T04:56:56.190

我不能专门为 AIR 说话，但在我编写的所有 Flash 页面、应用程序和小部件上，我总是包含一个预加载器。

这是实际加载外部内容[的预加载器的一个很好的示例。](http://newmovieclip.wordpress.com/2007/03/14/preloader-in-flash-cs3-actionscript-30-way/)

但是，如果您只是进行大量计算而不加载任何外部数据：

*   确定需要完成的“工作单元”的总数（例如：如果你有 100 行数据要处理，那就是你的总工作单元）
*   显示动画“正在加载...”影片剪辑
*   每次完成一个工作单元时开始计算并增加一个进度计数变量
*   当进度计数达到总数时，隐藏 Loading MovieClip

如果要显示加载百分比，请计算以下内容并将其输入到加载影片剪辑内的 TextField 中：

```
percentage = (count / total) % 100 
```

# design-patterns - 为什么解释器模式很烂？

> ID：498185
> 
> 赞同：14
> 
> 时间：2009-01-31T03:46:44.227
> 
> 标签：design-patterns, interpreter, interpreter-pattern

在[Steve Yegge 对设计模式的评论中](http://steve.yegge.googlepages.com/ten-great-books)，他将解释器模式称为“笑话”。他接着谈到编译器的看法发生了怎样的变化，但解释性语言仍然是如何流行的，尽管我看不出这与模式有何联系。

有人要开导这个无知的学生吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-31T03:53:55.850

具有讽刺意味的是 :) 现在每个人都喜欢解释语言，但 10 年前人们只是认为它们对于任何实用的东西来说都太慢了。就像今天一样，大多数人都在考虑静态类型与动态类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-20T00:29:48.643

INTERPRETER 模式很糟糕，因为它是 Greenspun 第十条规则的编纂：

> 任何足够复杂的 C 或 Fortran 程序都包含一个临时的、非正式指定的、充满错误的、缓慢的 Common Lisp 一半的实现。

这是在 1993 年声明的。现代附录可能包括 C++ 和 Java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-04T13:42:39.263

他喜欢这样：[http](http://steve-yegge.blogspot.com/2007/12/codes-worst-enemy.html) ://steve-yegge.blogspot.com/2007/12/codes-worst-enemy.html 。

# .net - 使用回车键覆盖 datagridview 的导航

> ID：498186
> 
> 赞同：1
> 
> 时间：2009-01-31T03:46:54.523
> 
> 标签：.net, vb.net

如何覆盖 datagridview 中的 enter 键，以便它将焦点设置到下一列而不是下一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T06:27:43.653

您需要做的就是处理 DataGridView 的 KeyDown 事件，并在处理程序中检查当前按下的键是否是 Enter 键。如果是这样，只需将 DataGridView 的 CurrentCell 设置为下一个单元格（还要检查这是否是该行中的最后一个单元格，在这种情况下，移动到下一行的第一个单元格。）

```
Private Sub DataGridView1_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) Handles DataGridView1.KeyDown
  If e.KeyCode = Keys.Enter Then
    Dim numCols As Integer = DataGridView1.ColumnCount
    Dim numRows As Integer = DataGridView1.RowCount
    Dim currCell As DataGridViewCell = DataGridView1.CurrentCell
    If currCell.ColumnIndex = numCols - 1 Then
      If currCell.RowIndex < numRows - 1 Then
        DataGridView1.CurrentCell = DataGridView1.Item(0, currCell.RowIndex + 1)
      End If
    Else
      DataGridView1.CurrentCell = DataGridView1.Item(currCell.ColumnIndex + 1, currCell.RowIndex)
    End If
    e.Handled = True
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T15:57:56.867

```
Private Sub DbGDetail_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles DbGDetail.KeyDown
    If e.KeyCode = Keys.Enter Then
        SendKeys.Send("{Tab}")
        e.Handled = True
    End If
End Sub

Private Sub DbGDetail_CellEndEdit(sender As Object, e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DbGDetail.CellEndEdit

    SendKeys.Send("{up}")
    SendKeys.Send("{Tab}")

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T21:42:03.867

我在 Rong-Chun Zhang 的关于 subclassing to override 的反馈中找到了让我进入[这个链接](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/b4d61bfb-5fa1-4e97-a419-a35ef0900ba6/)所需的帮助。在下面的示例中，我修改了他的工作以满足我自己的要求。`DataGridView``ProcessDialogKey`

目标：严格来说，当按下 ENTER 键时，保持 Grid 中的焦点不会从最后一行末尾的最后一个单元格跳转到下一行，只有在焦点离开倒数第二个单元格的情况下排。

背景：我启用了允许用户在数据库中创建新行的 Grid 选项，所以为了让他们简单，默认的 Grid 行为是总是在底部添加一个新的空行，并且只要用户即使无意中移动到它上面，也会在数据库中创建一个新的空行。用户通常在完成任何单元格中的编辑后点击 ENTER，因此没有一个好的方法让用户在不创建新的空白行的情况下结束对底部最后一个单元格的编辑。

请注意，在这种情况下，我只是将 CurrentCell 留在原处，但可以在调用“return true”之前重新分配它。

```
public class DataGridViewAddRow : DataGridView
{

    protected override bool ProcessDialogKey(Keys keyData)
    {

        //cell is in Edit mode

        if (keyData == Keys.Enter)
        {

            if (this.CurrentCell.RowIndex == this.Rows.Count-2)
            {                            
                return true;
            }

        }

        return base.ProcessDialogKey(keyData);

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T07:05:35.343

当为 VB.net 按下 Enter 键时，DataGridView 将焦点移到下一个单元格或列：

Private Sub DataGridView1_CellEndEdit(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) 处理 DataGridViewX1.CellEndEdit

如果 DataGridView1.CurrentCell.ColumnIndex = DataGridView1.ColumnCount - 1 那么 DataGridView1.CurrentCell = DataGridView1.Item(0, DataGridView1.CurrentCell.RowIndex + 1) 否则 SendKeys.Send("{up}") SendKeys.Send("{right} “） 万一

结束子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-19T19:36:09.387

公共类 CustomDataGridView 继承 DataGridView

```
<System.Security.Permissions.UIPermission( _
    System.Security.Permissions.SecurityAction.LinkDemand, _
    Window:=System.Security.Permissions.UIPermissionWindow.AllWindows)> _
Protected Overrides Function ProcessDialogKey( _
    ByVal keyData As Keys) As Boolean

    ' Extract the key code from the key value. 
    Dim key As Keys = keyData And Keys.KeyCode

    ' Handle the ENTER key as if it were a RIGHT ARROW key. 
    If key = Keys.Enter Then
        Return Me.ProcessTabKey(keyData)
    End If

    Return MyBase.ProcessDialogKey(keyData)

End Function

<System.Security.Permissions.SecurityPermission( _
    System.Security.Permissions.SecurityAction.LinkDemand, Flags:= _
    System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode)> _
Protected Overrides Function ProcessDataGridViewKey( _
    ByVal e As System.Windows.Forms.KeyEventArgs) As Boolean

    ' Handle the ENTER key as if it were a RIGHT ARROW key. 
    If e.KeyCode = Keys.Enter Then
        Return Me.ProcessTabKey(e.KeyData)
    End If

    Return MyBase.ProcessDataGridViewKey(e)

End Function 
```

结束类

# .net - 使用依赖注入框架的优秀开源项目？

> ID：498194
> 
> 赞同：5
> 
> 时间：2009-01-31T03:53:59.547
> 
> 标签：.net, open-source, dependency-injection, inversion-of-control, ninject

有谁知道开源项目实现**Ninject 框架**或另一个，我之前没有使用过 DI 框架，Ninject 引起了我的注意，因为您不需要在 XML 文件中进行配置。

在查看已经实现的代码时，我倾向于掌握更多。

如果你知道另一个使用不同 DI 框架的好项目？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-31T18:55:19.463

[Kigg](http://www.codeplex.com/kigg)使用 Unity 进行依赖注入。这是一个非常可靠的示例，说明了如何使用和设计它，以便他可以在需要时轻松插入另一个依赖注入框架。

# mysql - MySQL如何在两个字段上连接表

> ID：498197
> 
> 赞同：116
> 
> 时间：2009-01-31T03:55:16.550
> 
> 标签：mysql, join

我有两个带有`date`和`id`字段的表。我想加入这两个领域。我试过

```
JOIN t2 ON CONCAT(t1.id, t1.date)=CONCAT(t2.id, t2.date) 
```

这行得通，但速度很慢。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2009-01-31T04:00:25.790

```
JOIN t2 ON t1.id=t2.id AND t1.date=t2.date 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2009-01-31T03:59:16.247

```
JOIN t2 ON (t2.id = t1.id AND t2.date = t1.date) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-05-14T09:21:08.567

```
SELECT * 
FROM t1
JOIN t2 USING (id, date) 
```

也许你需要使用 INNEER JOIN 或者 t2.id 不为 null 如果你想要结果只匹配两个条件

# python - django admin 的有效用例？

> ID：498199
> 
> 赞同：11
> 
> 时间：2009-01-31T03:56:54.580
> 
> 标签：python, django, django-admin

我想建立一个 django 站点，其中某些受信任的用户可以编辑他们的个人资料信息。让每个受信任的用户都通过 django 管理界面有意义吗？我只希望他们能够查看和编辑自己的信息（显然）。这似乎不符合 django 人定义“信任”的方式，尤其是粗体字...

来自[Django Book，第 18 章](http://74.125.95.132/search?q=cache:fw9E1c2Oa7AJ:www.djangobook.com/en/beta/chapter18/+django+admin+use+cases&hl=en&ct=clnk&cd=2&gl=ca&client=firefox-a)：

> 管理员旨在供您（开发人员）信任的人使用。这不仅仅意味着“经过身份验证的人”；这意味着 Django 假设您的内容编辑器可以被信任做正确的事情。
> 
> 这意味着编辑内容没有“批准”过程——如果你信任你的用户，没有人需要批准他们的编辑。这也意味着权限系统虽然功能强大，但不支持基于每个对象限制访问。**如果您相信某人可以编辑他们自己的故事，那么您就相信他们不会在未经许可的情况下编辑其他人的故事。**

这是适合 django 管理模块的用例之一，还是只是针对不受信任的用户的专用视图？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-31T04:48:35.287

不，Django 管理员不适合单个用户配置文件，每个用户都可以查看和编辑所有其他用户配置文件。这更适合必须同时管理所有用户的管理员。

您需要构建的是用户个人资料页面。Django 已经有了一个不错的登录系统，由 django.contrib.auth 模块提供。您可以轻松地将其集成到您的页面中，这正是 Django 管理员用来验证用户的方式。

接下来，您必须构建一个简单的页面，根据用户模型公开该特定用户的个人资料信息。这应该相对轻松，因为它只需要一个视图和一个模板，并且模板可以利用 ModelForms。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-31T18:40:48.323

我建议您创建一个包含 OneToOneField 到用户模型（管理站点用户模型）的 Person 模型。有些像这样。。

```
from django.contrib.auth.models import User

    class Person(models.Model):
        """The person class FKs to the User class and contains additional user information
        including userImage, country, etc"""

        user = models.OneToOneField(User, related_name='person_fk')
        url = models.URLField(max_length=255, blank=True)
        country = models.CharField(max_length=2, blank=True)
        state = models.CharField(max_length=50, blank=True)
        zipCode = models.IntegerField(max_length=7, blank=True, null=True)
        userImage = models.ImageField(upload_to=generate_filename, blank=True, null=True) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-31T04:43:32.600

我不会认为在网站上编辑我的个人资料是一项管理任务。我认为[django-profiles](http://bitbucket.org/ubernostrum/django-profiles/wiki/Home)是您正在寻找的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-31T16:50:16.330

Django 的授权模型有点过于简单。它只是检查整个模型的权限。

对于这种事情，您几乎不得不编写自己的视图函数来处理额外的检查。

写完一两个后，你会看到模式。然后你可以考虑编写自己的装饰器来处理这个问题。

```
def profileView( request, object_id ):
    p= Profile.objects.get( id=int(object_id) )
    if request.session['user'] != p.get_user():
        # respond with a 401 not authorized or a helpful message
    # process normally, since the session['user'] is the user for the Profile. 
```

要使上述工作正常进行，您需要启用会话，并确保在用户成功登录时将用户记录在会话中。您还需要在他们注销时消除会话。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T19:13:49.423

仅供参考，这里有一个[片段](http://www.djangosnippets.org/snippets/1054/)演示了如何在 Django 管理员中相当容易地实现此效果（用户只能编辑他们的“自己的”对象）。警告：我不建议对用户配置文件执行此操作，使用 ModelForm 创建自己的编辑视图会更容易、更灵活。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-04T12:15:25.977

有一些 django 可插拔应用程序允许对您的管理模型进行行级权限。但是，我更倾向于编写自己的视图，允许用户在应用程序中进行操作。

在设计我目前正在开发的应用程序时，我有类似的愿望（使用管理员贡献），但我决定管理员应用程序确实是供管理员使用的，并且应该为普通用户提供自己的页面来完成工作和定制（如果需要）。

您可以使用通用视图和模型表单轻松地为特定模型生成 CRUD 视图，并且只需应用样式表即可与应用程序的其余部分保持一致的外观。

# .net - 如何最好地清理 .NET 应用程序的资源？

> ID：498200
> 
> 赞同：2
> 
> 时间：2009-01-31T03:57:07.263
> 
> 标签：.net, memory-leaks

确保 Winforms .NET 应用程序释放其在执行生命周期中消耗的所有资源的最佳方式或最佳实践方法是什么？

特别是文件句柄和图像的释放。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-31T04:06:45.433

如果您的实现是白盒化的，那么在文件流上调用 Close 应该关闭它的内存流。

如果类实现了 IDisposable，只需在 C# 中使用 using 块，这样资源就会被释放：

```
using (var foo = new Foo())
{
    // Do some stuff to foo
} 
```

如果您正在编写一个会大量消耗内存的包装器，那么我建议您实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T04:02:08.470

遵循这些拇指规则

1 - 尽可能使用 using 来确保正确处理对象（尤其是在使用流和所有对象时）。您可以应用“使用”来处理任何 IDisposable

```
using (SteramReader reader=new StreamReader(filePath)) 
{
     //Do your stuff here
} 
```

当您 Dispose 流时，将自动调用 Close。

* * *

2 - 如果您不使用托管组件，请确保在您的对象被处置或表单关闭时清理它们

* * *

3 - 如果您使用过多的 XML 序列化，请确保使用正确的构造函数，否则会导致内存泄漏 - [http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer .aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

* * *

4 - 将其他所有内容留给垃圾收集器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-31T04:08:09.270

如果您正在编写引用文件/图像的类，则您有责任为这些文件/图像提供一种释放机制。

对于所有 .NET 应用程序（不仅仅是 WinForms），在任何持有对大文件/内存资源的引用的类型上实现 IDisposable 始终是一个好的开始。

如果您正在使用访问资源的框架类型，那么正如其他人所说，使用块是一个优雅的解决方案。

也可以强制垃圾收集器在您请求时处理类型（确定性），但是强烈建议您不要这样做，而是让垃圾收集器自行决定这两种改进性能和内存管理。

最后，因为实际调用 Dispose（直接或通过使用）是由您的类型的用户完成的，因此必须清楚地记录这一点（XML 注释等）。

有关更多详细信息，请参阅此[较早的 SO 问题](https://stackoverflow.com/questions/331786/since-net-has-a-garbage-collector-why-do-we-need-finalizers-destructors-dispose)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T04:03:36.237

如果可以，请将它们放入 using 块中：

```
using(Bitmap bitmap = new Bitmap(path)) {
    ...
} 
```

那么bitmap的资源会保证在using块结束时释放。否则，使用 Dispose 模式：http: [//msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T04:09:14.307

1.-实现 IDisposable 接口将帮助您处理非托管资源。2.- 如果您在发生错误时以编程方式访问文件，请尝试在 try{}catch{}finally 语句中关闭（）文件或流，以避免锁定该资源 3\. 垃圾收集器将占用大部分资源次

# c# - 使用 LINQ 和 C# 的复杂查询

> ID：498216
> 
> 赞同：0
> 
> 时间：2009-01-31T04:06:25.247
> 
> 标签：c#, asp.net, database, linq

我有一个很大的问题要解决这个问题我有 2 个表

第一张表是： http: [//lh3.ggpht.com/_uMvfbnPHuko/SYPJQ1ZsBDI/AAAAAAAAAKs/eq49xquy3jM/s800/Untitled-2.jpg](http://picasaweb.google.com/lh/photo/iDp4kgFFjk5d2h5dUZtbvg?feat=embedwebsite)

其中包含一个模块（id 和 name）

第二张表是 [http://lh6.ggpht.com/_uMvfbnPHuko/SYPJQ4IXGwI/AAAAAAAAAK0/zmTIO6V-UEQ/s800/Untitled-3.jpg](http://picasaweb.google.com/lh/photo/PsT4H6bZ0lH8rN7ZPRMbjQ?feat=embedwebsite)

其中包含用户 ID 及其首选模块的编号

现在让我们转到我要生成复选框列表的问题

例如，对于具有以下模块“3,2 和 4”的用户 ID 1，结果将是

[http://lh4.ggpht.com/_uMvfbnPHuko/SYPJQ_LJeVI/AAAAAAAAAK8/6RV8a1S8eCY/s800/Untitled-4.jpg](http://picasaweb.google.com/lh/photo/KSQIDk_jeuIfyFabCsgXow?feat=embedwebsite)

请注意，未选中“为您推荐”复选框，因为用户 1 没有模块 ID“1”

我花了很长时间尝试使用 c# 和 LINQ 解决这个问题

看看我努力的结果:)（以下代码不起作用）

```
 var q = from m in db.modules
            from um in db.usersModules.Where(um2 => um2.userId == myUserId).Single().modules.Trim().Split(',')
            where um.Contains(m.moduleId.ToString())
            select new
            {
                moduleid = here i want the module id from modules table
                modulename = here i want the modulename from modules table
                ischecked = here i want "true" or "false" depending on if the user has this module or not

            }; 
```

如果 LINQ 对您来说很容易，请尝试解决这个问题？任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-31T04:34:41.883

您的查询不起作用，因为 LinqToSQL 尝试将所有内容都转换为纯 SQL。

如果你不能重构你的模式，并使用一个中间表，因为你显然有一个多对多的关系，你可以做这样的事情：

```
var userModules = db.userModules.SingleOrDefault(m => m.userId == myUserId).modules;
// Get the modules of the user (a comma delimited string)
var integerModules = modules.Split(',').Select(m => int.Parse(m));
// Convert the comma delimited string to IEnumerable<int>

var query = db.modules.Select(x => new {
                x.moduleId,
                x.moduleName,
                isChecked = integerModules.Contains(x.moduleId)
}); // And finally do the query 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T04:26:01.543

你为什么使用逗号分隔的列表？更好的方法是在其中存储用户和模块之间的映射的表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-31T04:26:25.270

如果可以的话，最好重构你的表，而不是尝试以它所在的格式处理数据。

在您的“usersModule”表中，如果您将模块列更改为“moduleId”并为与 userId 关联的每个模块插入一条记录，我相信您将更容易查询数据，并且您的数据库将会很多更容易维护。

```
Table: "modules"
moduleId    moduleName
1           Recommended...
2           Blah
3           ...

Table: "usersModule"
userId      moduleId
1           3
1           2
1           4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T04:30:06.213

如果它是一个选项，您可能想要重构您的数据库模式。您的 usersModule 表每行应该有一个用户 ID 和一个模块 ID，并且 moduleId 列应该是模块表的外键。如果你这样做，linq 查询将是微不足道的。

如果您按原样使用数据库，那么您可能会使用两个查询：一个用于检索模块 ID 的查询，另一个用于检索实际模块信息的查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T04:31:27.040

我认为这将是这样的，但是您没有提供有关您的数据库结构的足够准确信息，我无法准确地编写查询。

```
var q =
    from m in db.modules
    select new {
        m.moduleId,
        m.name,
        db.usersModules.Exists(um => um.userId == myUserId)
    }; 
```

编辑：哦，我刚刚意识到你有一个逗号分隔的东西。就像其他人所说的那样，首先正确地重新排列您的数据库。

# java - 什么时候应该使用 Throwable 而不是 new Exception？

> ID：498217
> 
> 赞同：45
> 
> 时间：2009-01-31T04:06:42.690
> 
> 标签：java, exception, throwable

给定：`Throwable`是`Exception`的超类。

当我阅读有关编写自己的“例外”的文本时，我看到了`Throwable`在`catch`块中使用的示例，而其他文本显示`new Exception()` 在`catch`块中使用。我还没有看到关于何时应该使用每个的解释。

我的问题是，什么时候应该`Throwable`使用，什么时候应该`new Exception()`使用？

在`catch`or`else`块内使用：

```
throw throwable; 
```

或者

```
throw new Exception(); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-01-31T04:20:50.883

总是抛出一个`Exception`（从不`Throwable`）。你通常也抓不到`Throwable`，但你可以。Throwable 是 and 的超类`Exception`，`Error`所以`Throwable`如果你不仅想捕捉`Exception`s还想捕捉 s，你就会捕捉到`Error`，这就是拥有它的意义所在。问题是，`Error`s 通常是普通应用程序不会也不应该捕获的东西，所以`Exception`除非你有特定的理由使用，否则就使用 s `Throwable`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-01-31T05:05:47.640

> （来自评论）提出这个问题的问题是，如果没有构建集合，我需要将“异常”传递给同事正在构建的一段代码。

在这种情况下，您可能想要抛出一个*检查异常*。您可以抛出一个[`Exception`](http://java.sun.com/javase/6/docs/api/java/lang/Exception.html)，它的适当现有子类（除了*未选中*[`RuntimeException`](http://java.sun.com/javase/6/docs/api/java/lang/RuntimeException.html)的子类及其子类），或（例如“ ”）的自定义子类。请参阅[Java 异常教程](http://java.sun.com/docs/books/tutorial/essential/exceptions/index.html)以了解 Java 异常。*`Exception``CollectionBuildException`*

 ** * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-31T04:24:22.497

您不应该真正捕获异常并抛出一个像“新异常”一样通用的新异常。

相反，如果您希望冒泡异常，只需执行以下操作：

```
try {
    // Do some stuff here
}
catch (DivideByZeroException e) {
    System.out.println("Can't divide by Zero!"); 
} 
catch (IndexOutOfRangeException e) { 
    // catch the exception 
    System.out.println("No matching element found.");
}
catch (Throwable e) {
    throw e; // rethrow the exception/error that occurred
} 
```

我认为，捕获异常并抛出一个新异常而不是引发到代码块的异常并不是一个好习惯，除非您引发一个有用的自定义异常，该异常提供了足够的上下文来逃避原始异常的原因.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-04-12T22:00:21.040

只有两个地方你应该`Throwable`在代码中看到这个词：

```
public static void main(String args[])
{
     try
     {
         // Do some stuff
     }
     catch(Throwable t)
     {

     }
 } 
```

和

```
public class SomeServlet extends HttpServlet
{
      public void doPost(HttpRequest request, HttpResponse response)
      {
         try
         {
             // Do some stuff
         }
         catch (Throwable t)
         {
              // Log
         }
      }
 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-15T16:42:56.403

[Oracle 在其官方教程（“如何抛出异常”）](https://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html)中给出了答案。

首先，它解释了这`Throwables`是**`Error`**和**`Exception`**类的联合，它们是**两个不同的东西**。

[![可抛出 = 错误 + 异常](https://i.stack.imgur.com/3L0xv.png)](https://i.stack.imgur.com/3L0xv.png)

接下来，很明显 an**`Error`是**极其罕见的东西，几乎**不可能从中恢复**。

> 当 Java 虚拟机发生动态链接失败或其他硬故障时，虚拟机会抛出 Error。

将 1+1 放在一起，它礼貌地**得出结论**，（除了简单`Exception`的 s）**捕捉**其他**`Throwable`s**是没有意义的，因为你对它们无能为力。

> 简单的程序通常不会捕获或抛出错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-31T04:20:58.993

~~Throwable 是一个接口，而不是一个类。~~两个类扩展了 Throwable，Exception 和 Error。

规则是：在捕获异常时尽可能具体——这意味着例如捕获 Exception 而不是 Throwable，以及 IOException 而不是 Exception。

不要捕获错误 - 错误是错误。改为修复代码。

如果你必须捕获所有东西，请使用“catch Throwable”，但这是一种不好的形式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-31T09:45:53.923

`throw new Exception();`是你*永远*不应该在 catch 块中做的事情，但你可能不得不或想要做 throw `new SomeException(throwable);`（保留完整的堆栈跟踪）而不是`throw throwable;`为了符合你的方法的 API，例如当它声明抛出`SomeException`但你'重新调用可能会抛出`IOException`您不想添加到方法`throws`子句中的代码。

可能最常见的情况是完全`new RuntimeException(throwable);`避免使用`throws`子句。许多人会告诉你这是一种可怕的滥用，因为你应该使用受检异常。IMO 他们是错误的，检查异常是 Java 语言设计中的一个错误，只会导致丑陋、不可维护的代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-31T04:30:11.177

正如我在 java 刚出现时听到的那样，理论是 Throwable 可能用于除异常之外的其他情况下的控制转移。不过，我从未见过它以这种方式使用（这可能是一件非常好的事情）。

所以只需捕获异常（或者更好的是，更细粒度的异常）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-31T04:33:29.483

Throwable 意味着只能被程序的容器或主循环捕获。大多数情况下，捕捉异常（例如错误）下的内容并不会为程序增加太多功能，毕竟如果抛出 VirtualError 其他错误，您可以做些什么。除了记录并继续之外没有太多。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-01T02:47:45.717

所有的异常最终都是一个问题......也说错误是错误并不意味着什么。

错误不是错误——它们是主机虚拟机遇到的问题，例如 OutOfMemoryError。异常是当前操作可以用来通知它失败并可能提供一些诊断的一种手段。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-01T07:29:41.343

通常，您不会投掷或接住 Throwable。特别是，JVM 错误（扩展 Error() ）不*应该*被用户代码捕获，除非您正在做奇怪的系统级工作。

将“Throwable”视为语言工件。之所以命名“异常”类，是因为它是程序员希望代码块“异常”退出时使用的类 - 通过不正常退出或返回值。

这包括常规错误情况（我的意思是“常规”，而不是 JVM 错误）以及您使用异常作为控制机制的地方。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-03-04T16:05:33.667

您也不应该将异常用作“返回类型”...

如果您要抛出的条件很常见，那么您将花费大量资源将该条件返回给调用例程。异常的构建成本很高。

我见过一些情况，其中紧密循环将异常作为“负面”抛出，例如 ID 分配，这个例程占用了大约 99% 的 CPU 时间。当改为记录的返回常量时，这个比例下降到 25%。

# c# - 针对大量可比对象测试现有字符串的最佳方法

> ID：498224
> 
> 赞同：1
> 
> 时间：2009-01-31T04:17:23.230
> 
> 标签：c#, regex, string, compare

假设您有一个定义值的首字母缩写词列表（例如 AB1、DE2、CC3），并且您需要检查字符串值（例如“Happy:DE2|234”）以查看是否在字符串中找到首字母缩写词。对于缩写词的简短列表，我通常会创建一个使用分隔符（例如 (AB1|DE2|CC3) ）的简单正则表达式，然后查找匹配项。

但是，如果要匹配超过 30 个首字母缩写词，我将如何解决这个问题？使用相同的技术（丑陋）是否有意义，还是有更有效和优雅的方式来完成这项任务？

请记住，示例首字母缩写词列表和示例字符串不是我正在使用的实际数据格式，而只是表达我的挑战的一种方式。

顺便说一句，我阅读了一个与 SO[相关的问题](https://stackoverflow.com/questions/192957/efficiently-querying-one-string-against-multiple-regexes)，但认为它不适用于我想要完成的任务。

编辑：我忘了包括我需要捕获匹配的值，因此选择使用正则表达式......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-31T05:39:41.050

就我个人而言，我不认为 30 对于正则表达式来说特别大，所以我不会太快排除它。您可以使用一行代码创建正则表达式：

```
var acronyms = new[] { "AB", "BC", "CD", "ZZAB" };
var regex = new Regex(string.Join("|", acronyms), RegexOptions.Compiled);
for (var match = regex.Match("ZZZABCDZZZ"); match.Success; match = match.NextMatch())
    Console.WriteLine(match.Value);
// returns AB and CD 
```

所以代码比较优雅和可维护。如果您知道首字母缩略词数量的上限，我会进行一些测试，谁知道正则表达式引擎中已经内置了什么样的优化。您还可以从未来的正则表达式引擎优化中免费受益。除非您有理由相信性能将是一个问题，否则请保持简单。

另一方面，正则表达式可能有其他限制，例如默认情况下，如果您有首字母缩写词 AB、BC 和 CD，那么它只会返回其中两个作为“ABCD”中的匹配项。所以它很擅长告诉你有一个首字母缩写词，但你需要小心捕捉多个匹配项。

当性能成为我的问题（> 10,000 个项目）时，我将“首字母缩略词”放在 HashSet 中，然后搜索文本的每个子字符串（从最小首字母缩写词长度到最大首字母缩写词长度）。这对我来说没问题，因为源文本很短。我以前没有听说过，但乍一看，你提到的问题中提到的 Aho-Corasick 算法似乎是解决这个问题的更好的通用解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-31T04:37:11.300

如果首字母缩略词具有固定大小（如上例所示），您可以为所有缩写词计算哈希值（每个应用程序生命周期可以计算一次），然后将字符串拆分为重叠的部分，并为它们计算哈希值。然后，您所要做的就是从一个数组中搜索值到另一个数组中。

您可能可以从首字母缩略词创建后缀/前缀树或类似的东西并使用此信息进行搜索，维基百科中有很多算法可以做到这一点。

您还可以为每个首字母缩略词创建一个确定性自动机，但它与以前的方法非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T04:42:08.593

为什么不简单地拆分字符串并比较返回的列表呢？在这种情况下，使用 REGEX 似乎是不必要的开销。我知道您的格式可能会有所不同，但您似乎可以：

*   根据“标题分隔符”拆分字符串，在您的情况下为冒号：
*   取结果的后半部分，即首字母缩写词字符串，并根据首字母缩写词分隔符将其拆分，在本例中为管道 |
*   最后，遍历新拆分的首字母缩略词列表，并使用嵌套的 for 循环将每个首字母缩写词与候选列表进行比较

**编辑：**如果您只需要知道字符串中是否存在特定的首字母缩写词或一组首字母缩写词，请使用 .Search() 方法而不是 .Match()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T05:26:49.017

正则表达式方法似乎足够高效和优雅。当然，您必须在构建表达式时注意未转义的字符，或者由于复杂性或大小限制而无法编译它。

另一种方法是构建一个[trie 数据结构](http://en.wikipedia.org/wiki/Trie)来表示所有的首字母缩写词（这可能在某种程度上重复了正则表达式匹配器正在做的事情）。当您逐步遍历字符串中的每个字符时，您将创建一个指向 trie 根的新指针，并将现有指针推进到适当的子节点（如果有）。当任何指针到达叶子时，您会得到匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T05:30:29.523

这是我想出的。如果您能提供任何建设性的批评，我将不胜感激……

首先，创建一个包含我的每个首字母缩写词的枚举：

```
enum acronym
{ AB1,DE2,CC3 } 
```

接下来我创建一个枚举的字符串数组：

```
string[] acronyms = Enum.GetNames(typeof(acronym)); 
```

最后，我遍历字符串数组并执行 regex.match 方法：

```
foreach (string a in acronyms)
{
    Match aMatch = Regex.Match(input, a.ToString(), RegexOptions.None);
    if (aMatch.Success)
    {
        ...<do something>...
        break;
    }
} 
```

看到这有什么问题吗？

# php - 将 PHP 中的图表库输出到 SVG 或 Canvas？

> ID：498229
> 
> 赞同：2
> 
> 时间：2009-01-31T04:21:35.310
> 
> 标签：php, charts, graph, canvas, svg

我正在寻找一个用 PHP 编写的图表库，它输出到 SVG（或 Canvas），可能用于集成到 ExtJS 项目中。我喜欢[http://pchart.sourceforge.net/index.php](http://pchart.sourceforge.net/index.php)的外观，但它可以输出位图并且是 GPL 许可的，由于该项目是一个内部商业项目，这可能会成为一个阻碍。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-31T04:33:27.970

它可能不是您正在寻找的，但有一个用于 Google Charts 的 PHP 对象包装器：

[http://code.google.com/p/gchartphp/](http://code.google.com/p/gchartphp/)

您是否需要 PHP 通过 GD 库生成实际图像？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:45:06.560

我强烈推荐 PHP + Flotr 解决方案[http://solutoire.com/flotr/](http://solutoire.com/flotr/)

您可以将 JSON 作为 PHP 的输出传递给 Flotr，这是一个将为您绘制图表的 JavaScript 库。它的速度非常快，而且效果很好，尤其是当您需要通过修改指标来动态更新图表时。

因为 Flotr 是一个 JS 库，所以在加载页面后，您所要做的就是在客户端更新它或向服务器运行一个快速的 Ajax 请求以获取更多数据点。

这是 Flotr 使用 ajax 即时提取 JSON 数据的示例：http: [//www.solutoire.com/experiments/flotr/examples/json-data.html](http://www.solutoire.com/experiments/flotr/examples/json-data.html)

虽然我更喜欢 Flotr + PHP，但还有一个用于 PHP 的全功能图表库，其工作方式大致相同，但它被封装为一个完整的库（JS + PHP）： http: [//phpchart.net](http://phpchart.net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-10T02:17:24.827

（我知道这是一个旧线程，但我想我会加两分钱。）当 GPL 适用于库时，我对 GPL 的理解是，您可以开发一个在商业上使用这些库的应用程序，但如果您对库进行任何定制在此过程中，您需要为这些定制提供源代码。如果您分发应用程序并将库与它捆绑在一起，您还必须将 GPL 信息与库一起保存。我要试试 SVGGraph [http://www.goat1000.com/svggraph.php](http://www.goat1000.com/svggraph.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T00:48:43.477

ezComponents 的[Graph 组件](http://zetacomponents.org/documentation/trunk/Graph/tutorial.html)可以渲染成不同的格式，包括 svg。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T14:39:14.237

它不是基于 Canvas，但如果你发现自己卡住了，我推荐[Open Flash Chart](http://teethgrinder.co.uk/open-flash-chart-2/)

# c# - 以编程方式为桌面“快捷方式”创建快捷键组合

> ID：498230
> 
> 赞同：1
> 
> 时间：2009-01-31T04:21:48.570
> 
> 标签：c#, .net, windows, installation, shortcut

有没有办法通过代码或通过创建安装项目（通过VS）来创建**带有预定义键盘快捷键**的桌面快捷方式？

[替代文字 http://img89.imageshack.us/img89/8066/shortcutce8.jpg](http://img89.imageshack.us/img89/8066/shortcutce8.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T04:44:27.713

你可以使用[IShellLink 接口](http://msdn.microsoft.com/en-us/library/bb774950(VS.85).aspx)，HotKey 方法来定义一个热键。

# c# - 如何编写自己的 LINQ 提供程序来查询一些自定义存储？

> ID：498231
> 
> 赞同：12
> 
> 时间：2009-01-31T04:22:23.453
> 
> 标签：c#, .net, linq

我打算编写一个 LINQ 提供程序，以便我可以在自定义存储中查询数据 - 例如，让我们说一些自定义文件格式。

什么是开始的好方法？有什么例子吗？

# .net - 在 Exceptions 基类的代码上记录异常是一种好的设计方法吗？

> ID：498232
> 
> 赞同：1
> 
> 时间：2009-01-31T04:22:44.280
> 
> 标签：.net, exception-handling, exception-logging

一些朋友刚刚完成了一个应用程序的实现，他们使用了自定义异常。引起我注意的是，当引发自定义异常时，他们将异常记录在他们实现的异常基类的代码中。所以我的问题是这是一个好的设计方法吗？我的想法是日志助手更有用

```
 public class BaseCustomException: System.Exception
{

   public BaseCustomException()
   {
              TightlyCoupledClass.Log(this);
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T04:33:42.540

不，这是一种可怕的方法 IMO。原因是假设创建的每个异常都会被抛出，但事实并非如此。

由于异常通常是只读的，因此在某些实现中，将为特定情况创建一个异常，并在必要时重新引发（CLR 在引发异常时设置 StackTrace，而不是在构造时设置）。

最重要的是，这并不常见，但创建时可能不会抛出异常，您不应该基于此做出假设。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-31T04:38:51.283

我理解他们将其落实到位的想法，以便他们可以确保在引发 CustomException 异常时进行日志记录；但是，这绝对是臭代码。

异常应该仅用于异常，并且执行可能导致引发 CustomException 的代码的代码应该能够决定如何处理该异常以及是否记录它......因为日志记录应该是特定的到导致它的场景。

附带说明，自定义异常应该从 ApplicationException 作为根继承，以便您可以判断异常是自定义的业务库还是来自 .NET 框架本身。
--更正-- 我刚刚发现[这篇](http://blogs.msdn.com/kcwalina/archive/2006/06/23/644822.aspx)我不知道的帖子本质上使用 ApplicationException 渲染是无用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T04:38:30.393

我不这么认为。我会设置一个全局异常处理程序，它将异常（和其他数据）写入日志。这样你只写捕获的异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T04:39:08.833

在构造函数中记录是非常讨厌的。尝试操作的代码应该如何构造可能包含异常的有意义的消息？异常的作用是代表问题，而不是记录消息。其他一些代码应该注意这一点，以便可以捕获该特定异常的每个部分都可以做他们想做的事情，这可能涉及也可能不涉及记录异常。

对于构造函数中的日志，如果异常被包装并重新抛出以再次捕获，则异常将被记录两次，这是愚蠢的。

```
catch ( CustomException exception ){
Logger.error( "Really useful message", exception );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T04:40:03.370

这个解决方案耦合太紧，而且不可配置。我建议使用更健壮的异常处理框架，例如[Enterprise Library Exception Handling Application Block](http://msdn.microsoft.com/en-us/library/cc309505.aspx)。

# security - 函数式编程范式中的漏洞？

> ID：498234
> 
> 赞同：16
> 
> 时间：2009-01-31T04:24:28.597
> 
> 标签：security, functional-programming

几天前，有几个关于缓冲区溢出漏洞的问题（例如[Java 有缓冲区溢出吗？](https://stackoverflow.com/questions/479701/does-java-have-buffer-overflows)、[Secure C 和大学 - 缓冲区溢出训练](https://stackoverflow.com/questions/483018/secure-c-and-the-universities-trained-for-buffer-overflow)，仅举几例），这可能发生在 C 等命令式编程语言中.

在函数式编程中（从我尝试[Haskell](http://www.haskell.org/)所获得的非常有限的曝光中），我可以看到不会发生诸如缓冲区溢出之类的漏洞，因为这些问题是更改程序状态或区域的结果记忆。（如果我错了，请纠正我。）

如果不考虑编译器、解释器或执行环境中存在漏洞的**可能性，函数式编程范式中是否存在任何类型的安全漏洞？函数式编程中是否存在任何特定类型的漏洞，但命令式编程中没有？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-31T05:06:24.160

如果程序员没有预料到*[某些输入]*可能会导致*[程序]*消耗超过可用的资源，那么这就是可能的 DoS 形式的漏洞。这是我见过的所有图灵完备语言的一个弱点，但 Haskell 的懒惰让我们更难推理计算所涉及的内容。

作为一个（相当人为的）例子，

```
import Control.Monad (when)
import System (getArgs)
main = do
    files <- getArgs
    contents <- mapM readFile files
    flip mapM_ (zip files contents) $ \(file, content) ->
        when (null content) $ putStrLn $ file ++ " is empty" 
```

天真的程序员可能会想，“Haskell 是懒惰的，所以它不会打开和读取文件，直到它需要”，以及“Haskell 是垃圾收集器，所以一旦处理完文件，它就可以关闭文件句柄”。不幸的是，这个程序实际上只会一次打开很多文件（特定于实现），并且只有空文件会关闭它们的文件句柄（实现的活跃性规则的副作用）：

```
$ ghc --make -O2 测试
[1 of 1] 编译 Main ( Test.hs, Test.o )
连接测试...
$ strace -etrace=open,close ./Test dir/* /dev/null
...
打开（“目录/1”，O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE）= 3
打开（“目录/2”，O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE）= 4
打开（“目录/3”，O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE）= 5
打开（“目录/4”，O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE）= 6
打开（“目录/5”，O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE）= 7
...
打开（“/dev/null”，O_RDONLY|O_NOCTTY|O_NONBLOCK|O_LARGEFILE）= 255
关闭(255)
/dev/null 为空
$

```

您可能没想到会出现 -EMFILE“打开的文件过多”错误。

就像我说的，这是一个人为的例子，也可以在其他语言中发生，但是在 Haskell 中更容易错过某些资源使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-31T15:45:49.987

由于其执行模型，函数式语言具有被低估的“通过晦涩难懂的安全性”优势。如果您查看 C 程序中的安全漏洞，它们利用了弱类型系统、指针操作和缺乏边界检查，但更重要的是，它们利用了易于理解的直接执行模型。例如，您可以在 C 中可靠地[粉碎堆栈](http://en.wikipedia.org/wiki/Stack_buffer_overflow)，因为只需获取局部变量的地址，就可以相对容易地*知道堆栈在哪里。*许多其他漏洞利用依赖于对执行模型的类似低级理解。

相比之下，如何将功能代码编译为二进制文件并不那么明显，因此设计用于执行注入代码或访问特权数据的方法并不那么容易。具有讽刺意味的是，执行模型的模糊性通常被认为是函数式语言的一个*弱点*，因为程序员并不总是对他们的代码将如何执行有很好的直觉。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-31T04:45:20.537

我不这么认为。

正如我所看到的，缓冲区溢出等漏洞与编译器/解释器架构/虚拟机有关，而不是编程范式。

例如，如果您在 .NET 环境（C#、VB 等）中使用函数式编程，只要您处理托管对象，就会处理缓冲区溢出问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-31T04:40:37.630

与相应的命令式实现相比，在函数式实现中可能更容易导致无限递归（以及由此产生的内存使用）。虽然命令式程序在处理格式错误的输入数据时可能会进入无限循环，但函数式程序可能会在执行相同处理时吞噬所有内存。通常，运行程序的虚拟机有责任限制特定进程可以消耗的内存量。（即使对于原生 Unix 进程，`ulimit`也可以提供这种保护。）

# css - CSS样式化dojo中的提示工具提示

> ID：498235
> 
> 赞同：0
> 
> 时间：2009-01-31T04:24:44.570
> 
> 标签：css, dojo, tooltip

有谁知道负责样式化与es关联的 dojo `promptMessage`（或`invalidMessage`s）工具提示的 CSS 类的名称。`ValidationTextBox`

通常，Firebug 可以很好地揭示 CSS 的所有内部工作原理，但在这种情况下，当我尝试检查它时，工具提示提示会消失！

我打算使用诸如工具提示`padding`之类的 CSS 属性。`width``promptMessage`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T18:36:43.447

[Dijit Tooltip 模板](http://download.dojotoolkit.org/release-1.2.3/dojo-release-1.2.3/dijit/templates/Tooltip.html)揭示了结构：

```
<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip">
    <div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" waiRole='alert'></div>
    <div class="dijitTooltipConnector"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-31T04:33:56.317

实际上，尽管我的问题仍然是出于一般目的，但在我感兴趣的特定情况下，可能很容易将 css 标记作为工具提示内容的一部分包含在我想要的内容中：

```
dijit.form.ValidationTextBox({
   promptMessage = "<div class='customizedWidth'>Blabla</div>"
},myNode); 
```

也就是说，我仍然渴望学习该特定工具提示的 dijit 类。在想要改变整个班级的外观的情况下，这是必要的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-30T10:21:59.747

在尝试调试为什么 ValidationTextBox 上的 ToolTip 的 css 显示为纯灰色框而不是使用正确的 css 时，我遇到了类似的问题。在 Firebug 中查看 css 和其他信息的常规方法不起作用，因为单击它时工具提示会消失。但是，我发现使用标准的 Web 开发人员工具栏，您可以转到 CSS 菜单项并选择查看样式信息（或者只需在键盘上执行 cmd-shift-Y）。这会将光标变成十字准线。然后，您可以将十字准线移动到工具提示上，整个 CSS 链将显示在工具提示中。这通过提供我需要将正确的主题类应用于 body 标签的提示解决了我的特定样式问题。我正在编码的系统不允许我直接更改或添加到生成的 html 中的 body 标记。

```
 dojo.query("body").addClass("claro"); 
```

and everything (Dialogs and tooltips) work great now.

# ruby-on-rails - 如何使用 Ruby on Rails 将普通台式电脑变成服务器以托管网站？

> ID：498247
> 
> 赞同：3
> 
> 时间：2009-01-31T04:30:58.833
> 
> 标签：ruby-on-rails, ruby

将普通台式电脑变成使用 Ruby on Rails 托管网站的服务器的最佳方法是什么？

我愿意改变操作系统，如果我需要购买零件，使用任何 Database People 推荐的软件和任何软件。

以下是计算机的大致详细信息：

该计算机是配备 1.86GHz 双核 CPU 的 HP 台式机。英特尔芯片组。1GB 内存，200GB 硬盘在 Windows XP 上运行

仅供参考，这不是商业项目，也不是为了省钱。我只是想学习一些新技能，我认为这会很有趣。

谢谢，

杰里米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-31T04:41:04.757

只是一个建议，您可以使用[http://www.slicehost.com](http://www.slicehost.com)。您可以以每月 20 美元的价格购买一台 256MB 的虚拟机，但您需要在加载 Ubuntu 等基础 Linux 发行版后从头开始构建该机器。那里有关于如何设置你的操作系统来做任何你想做的事情的很好的说明。

如果你真的想在你拥有的那台机器上运行服务器，从而每月节省 20 美元，我建议安装某种形式的 Linux。我建议使用 Debian 或 Ubuntu。如果你想更多地了解一些 Linux 基础知识，比如构建内核和调整 .conf 文件（在某些时候可能很有用），请尝试使用 Gentoo 之类的发行版。基本上下载ISO并启动它。

如果你只是想在那个盒子上玩 Ruby on Rails，当然，只要去[http://localhost](http://localhost)。此外，如果您只是在玩游戏，甚至不需要设置 apache……只需使用 Rails 内置的 Web 服务器。为了能够从世界任何地方访问该机器，如果您有一个静态 IP，请获取一个域名并指向该 IP。如果您的 IP 是动态的，则使用 dyndns.org 获取动态主机名。您通常可以配置大多数路由器以使用您最新的动态 IP 更新 dyndns.org 等站点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-31T04:36:35.810

虽然您可以在 Windows 上设置 Rails，但大多数人倾向于使用某种版本的 Linux 或 BSD。您拥有的硬件应该足以满足您的要求。

有很多关于如何安装您需要的软件的教程。典型的堆栈是 Ruby、Rails gem、[MySQL](http://www.mysql.com/)（带有 ruby​​ 绑定和 gem）、Apache 和[Passenger](http://www.modrails.com/)。

例如，Slicehost 有一个[很好的 Ubuntu 设置教程](http://articles.slicehost.com/2009/1/6/ubuntu-intrepid-ruby-on-rails)。根据您想了解多少系统管理，您可以使用包管理器来安装（例如 Ubuntu 上的 apt-get 或 aptitude），或从源代码编译。

Rails 的默认配置设置为使用[SQLite](http://www.sqlite.org/)作为数据库，基本上不需要管理。如果您公开您的网站并且获得的用户不只少数，那么下一步就是[MySQL](http://www.mysql.com/)或[PostgreSQL 。](http://www.postgresql.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-31T04:55:30.593

请注意，XP 在设计上一次限制为 10 个并发打开连接。因此，人们需要为生产服务器购买价格更高的 Microsoft 操作系统服务器版本。但是，如果您只想进行实验，那应该没问题。

首先，您需要一个愿意为您提供静态 IP（或获得动态 DNS 解决方案）的 IP。DNS 将 URL 映射到 IP 地址，而不断变化的 IP 地址会让您头疼不已。

接下来，您需要购买一个域并将其指向您的 IP。如果您的机器在路由器后面，您需要进入路由器中的 NAT 设置，并让它将端口 80 转发到您的机器。

最后，您需要在本地计算机上安装某种 Web 服务器。如果你想使用 Rails，我建议安装 InstantRails，它默认带有 Apache Web 服务器和 MySQL。

完成此操作后，启动 InstantRails，加载一个 rails 项目，然后访问您的域以查看是否一切正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-02T16:40:53.570

EngineYard 是较大的基于 Rails 的主机之一，提供了其部署平台的 VMWare 映像，您可以从[http://express.engineyard.com/下载该映像](http://express.engineyard.com/)

它适用于在 WinXP 上运行的免费 VMWare Player [http://www.vmware.com/products/player/ 。](http://www.vmware.com/products/player/)

这种安排，我已经为小型和内部项目做过几次，为您提供了一个功能齐全的 Rails 服务器，其中包含预构建的部署配方（使用 engineyard-eycap gem）。

*   下载 VMWare 播放器
*   下载EngineYard Express

在 VMWare Player 中启动您的新服务器并前往城镇。

我提出的唯一硬件建议是添加更多内存——VMWare 映像默认使用 640mb，并且性能更好，尽管听起来性能不是你关心的问题。

这个解决方案特别好的地方在于，一旦您对 Rails 感到满意，您就可以转向商业选项（Amazon EC2 上的 EngineYard Solo 或完整的 EngineYard 产品）或使用 Slicehost 自行推出等。但是这个解决方案让您负责事物的开发方面，而无需在服务器端浪费时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T06:19:49.003

在 Windows 上，首先安装 xampp。 [http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)（下载并安装：安装程序 39 MB） 这将安装 apache、php 和 mysql 数据库。

然后你需要安装 ruby​​：[http ://peri.me/?p=73](http://peri.me/?p=73)

到最后，您将在家用电脑上运行 ruby​​。

如果您希望除您之外的其他人访问服务器上的内容，您需要以某种方式调整您的路由器或计算机的设置以允许访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-31T12:32:03.917

我喜欢Shalmanese的回答，但我要补充一点，你*需要*一个防火墙。如果你没有硬件，你需要在 linux 中配置你的 iptables，这本身就很有趣:) 特别是如果你必须先重建内核才能让它工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-01T21:51:03.243

您可以找到很多教程来在各种发行版上设置“完美服务器”，[了解如何伪造](http://www.howtoforge.com/perfect-server-ubuntu8.04-lts)只需在他们的网站上搜索“完美服务器”，您就可以开始了 :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-02T05:11:11.933

公共 IP 地址和一种带有 Apache 的 Linux（Passenger 或 mongrel）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-02T17:19:45.240

[您可以使用 Sun 的VirtualBox](http://www.virtualbox.org/)或 Microsoft 的[Virtual PC](http://www.microsoft.com/windows/products/winfamily/virtualpc/default.mspx)等免费软件在 Windows 桌面的虚拟机中运行 Linux 主机。我一直这样做是为了在我的环境中运行开发 Linux 服务器，但它同样适用于您正在使用的“准生产”主机。

# c# - C# 公共库

> ID：498249
> 
> 赞同：7
> 
> 时间：2009-01-31T04:31:52.357
> 
> 标签：c#, .net, architecture

我希望找到一个开源的.net 通用库，但我很难找到一个。

我正在寻找的内容包含：日志记录、缓存、字符串操作、配置读取、分机？！？。

你知道这样的东西是否存在，或者这更有可能是我需要自己创造的东西吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-01-31T04:33:54.537

使用 Microsoft 企业应用程序块

从这里获取

[http://msdn.microsoft.com/en-us/library/cc467894.aspx](http://msdn.microsoft.com/en-us/library/cc467894.aspx)

源代码在这里

[http://www.codeplex.com/entlib](http://www.codeplex.com/entlib)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-31T04:43:17.077

*   [Microsoft Enterprise Library](http://msdn.microsoft.com/en-us/library/cc467894.aspx) - 由 Microsoft 构建，源代码可用
*   [Spring.NET](http://www.springframework.net/) - 开源开发框架

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-11T07:15:24.983

凯夫：

稍微详细一点，我花了很多时间尝试重用其他框架的代码：以下是基于功能集的细分：

基础设施框架（配置、日志记录、缓存等）

1.  SpringFramework.NET - （流行的 Java SpringFramework 的端口）

2.  Microsoft Enterprise Library - Microsoft 对 SpringFramework 的“回答”。

提供 ActiveRecord 或 Ioc（控制反转）或代码生成的框架：

1.  城堡项目 [http://www.castleproject.org/index.html](http://www.castleproject.org/index.html)

2.  亚音速 [http://subsonicproject.com/](http://subsonicproject.com/)

3.  NetTiers [http://nettiers.com](http://nettiers.com)

最后，您可能会在 CodePlex.com 上找到许多其他较小的库和框架，其中一些值得注意：

1.  CommonLibrary.NET [http://commonlibrarynet.codeplex.com/](http://commonlibrarynet.codeplex.com/)

2.  DotNet Commons [http://dotnetcommons.codeplex.com/](http://dotnetcommons.codeplex.com/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-31T05:39:10.817

所有这些都内置在框架中，所以你真正需要的只是单声道。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-23T08:50:30.273

也检查[Nido 框架](https://nidoframework.codeplex.com)

Nido 是一个代码框架、一个通用项目、一个架构模式，基于 Microsoft .NET/C# 4.5 编写，旨在帮助软件工程师更快地开发他们的系统。

除了为您自动构建/架构后端代码之外，它还可以帮助您

1.  处理登录异常，显示用户友好消息，跟踪错误。
2.  跟踪对重要数据项所做的更改，也称为审计跟踪
3.  验证记录并加密敏感数据以保护其隐私
4.  通过以一种标准方式处理复杂问题来控制复杂性
5.  为编码设置标准模式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-11T12:42:41.703

日志记录 - 看看[Log4net](http://logging.apache.org/log4net/index.html)

# php - 使用 jquery .ajax 从 mySQL DB 中检索记录

> ID：498278
> 
> 赞同：0
> 
> 时间：2009-01-31T04:43:58.043
> 
> 标签：php, jquery, mysql, ajax

我是一个 mySQL 菜鸟，并且有一个有点愚蠢的问题......

我正在使用 jquery 将表单发送到 php 脚本，然后将数据存储在 mySQL 数据库中。在我的应用程序的另一个页面上，我需要再次使用 jquery 从所述 mySQL DB 的一列中获取所有值（我假设我还必须编写另一个 php 脚本），以便我可以使用检索到的数据。我非常熟悉使用 POST 或 GET 发送数据，但突然意识到我不知道如何以 jquery 回调函数可以使用的方式检索它。

顺便说一句，我正在使用 php4。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-31T04:48:05.617

您正在寻找[json_encode()](http://au.php.net/manual/en/function.json-encode.php)。

这是一个使用[PHP、JSON 和 AJAX](http://ditio.net/2008/07/17/php-json-and-javascript-usage/)将 JSON 发送到 PHP 的示例。 [本教程](http://simpletutorials.com/?path=tutorials/javascript/simple_ajax)发回 JSON 数据。

顺便问一下，您使用的是[jQuery](http://jquery.com/)还是类似的 Javascript 框架？如果没有，我强烈推荐它，因为它可以通过[ajax()](http://docs.jquery.com/Ajax)调用抽象出许多跨浏览器差异和错误处理。以下是[.ajax() 的示例](http://www.ibm.com/developerworks/library/x-ajaxjquery.html)：

```
$.ajax({
    url: 'document.xml',
    type: 'GET',
    dataType: 'xml',
    timeout: 1000,
    error: function(){
        alert('Error loading XML document');
    },
    success: function(xml){
        // do something with xml
    }
}); 
```

现在所有这些都假设您使用的是 PHP 5.2+（这是添加 json_encode()/json_decode() 的时候）。如果不是这种情况，您可能不得不改用 XML。

这是[对 Javascript 和 XML 的介绍以及](http://www.devarticles.com/c/a/JavaScript/JavaScript-and-XML/)[PHP XML 解析器](http://au.php.net/xml)的手册。您正在使用 jQuery，因此 XML 解析变得更容易一些，请参阅[这篇文章](http://www.webmonkey.com/tutorial/Easy_XML_Consumption_using_jQuery?oldid=20032)。

XML 处理起来比较繁琐（而且消息稍微冗长一些），但可以说它更安全。为了完整起见，值得指出[JSON 的安全问题](http://directwebremoting.org/blog/joe/2007/03/05/json_is_not_as_safe_as_people_think_it_is.html)。

# php - 转到随机页面 PHP

> ID：498279
> 
> 赞同：0
> 
> 时间：2009-01-31T04:44:03.113
> 
> 标签：php, random

我有一个指向[http://example.com/random.php](http://example.com/random.php)的链接，下面是 random.php 的代码。

```
<?php
srand ((double) microtime( )*1000000);
$random_number = rand(1,100);
header( "Location: http://example.com/test?page=$random_number" ) ;
?> 
```

基本上我想要它做的是链接到一个随机页面。它最初可以工作，但在第一次单击后，它每次都会链接回同一个所谓的随机页面。知道如何解决这个问题吗？或者可能是完全解决问题的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-31T04:52:10.367

您的浏览器或服务器可能正在缓存该页面。在你的 php 代码中试试这个：

```
header("cache-Control: no-store, no-cache, must-revalidate, pre-check=0, post-check=0, max-age=0"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-31T04:58:07.437

我猜网络浏览器会缓存位置重定向。尝试在页面顶部添加一些“缓存破坏”标题

```
<?php
    //from http://php.net/header
    header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
    header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past

    srand ((double) microtime( )*1000000);
    $random_number = rand(1,100);
    header( "Location: http://example.com/test?page=$random_number" ) ;
?> 
```

**免责声明**：如果您将其用于邪恶目的，特此对您施加极客诅咒，您将在短期内被 grue 吃掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-31T05:08:41.863

你确定你的操作系统支持 microtime()，否则你用相同的值重新播种.. [“这个函数只在支持 gettimeofday() 系统调用的操作系统上可用”](http://us2.php.net/microtime)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-31T17:18:21.373

正如其他人所指出的，听起来浏览器正在缓存重定向；HTTP 重定向有多种类型，根据状态码，浏览器可能会或可能不会被允许缓存重定向。

您可以尝试更改响应代码以发出 a `303 See Other`，这是一种用户代理不应该缓存的重定向。例如：

```
header( 'Location: http://www.example.com', true /* overwrite */, 303 ); 
```

有关 HTTP 重定向代码的更多信息，请查看[HTTP 1.1 规范](http://www.faqs.org/rfcs/rfc2616)；特别是第 10.3 节，它处理重定向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T16:35:40.337

如果缓存对您来说成为一个太大的问题并且您无法通过 php 实现，您可以编写一个小的 javascript 来做同样的事情，并确保您每次都会获得一个随机链接。

```
函数跳转（）{
var random = Math.floor(Math.random()*1000);

window.location="test?page="+random;
}

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-31T04:49:00.340

您是否尝试过不调用 to `srand()`？[PHP 文档`srand`](http://php.net/srand)说：

> **注意**：从 PHP 4.2.0 开始，不需要使用**srand()**或 mt_srand() 为随机数生成器播种，因为现在这是自动完成的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-31T04:50:36.970

我想知道这是否与您的浏览器缓存重定向有关。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-01-31T04:47:43.853

嗯...你的代码有效，兄弟；也许您误解了这个概念，并认为重新加载您到达的页面应该会将您带到另一个随机生成的 URL...

# objective-c - 如何在 Objective-C 中处理我自己的 sharedInstance？

> ID：498305
> 
> 赞同：1
> 
> 时间：2009-01-31T05:03:25.447
> 
> 标签：objective-c, cocoa

如果我有一个类具有自身的 sharedInstance（单例模式）或另一个类的共享实例，我如何确保在我的程序退出时正确释放共享实例？更好的是，你能给我指出一些关于这个的文档吗？

示例类（为清楚起见删除了所有其他方法）：

```
@interface Foo : NSObject {
}
+ (Foo*)sharedInstance;

@end 
```

.m 文件：

```
static Foo* SharedInstance;

@implementation Foo

+ (Foo*)sharedInstance
{
    if (!SharedInstance)
        SharedInstance = [[Foo alloc] init]; // possible memory leak?

    return SharedInstance;
}
@end 
```

在上面的代码中，我什么时候可以释放 SharedInstance？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-31T06:12:27.257

除非共享实例之外的资源需要释放（例如文件、清理时的通知等），否则您可以只在应用程序退出时清理 sharedInstance 的内存。甚至文件和网络套接字等也会在应用程序退出时由操作系统清理，所以你*也*可以不清理它们。

如果您确实需要在应用程序退出*之前*执行清理操作，则必须向共享实例添加一个`cleanup`或一些此类方法，并添加一个静态方法来释放共享实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-03T12:56:46.487

正如 Barry 指出的那样，通常不需要在退出时清理任何东西，但是您可以做的是设置一个 NSApplication 委托来实现

```
- (void)applicationWillTerminate:(NSNotification *)aNotification 
```

然后在您的应用程序即将退出之前调用此方法。在此方法中，您可以调用共享实例类的一些静态方法来清理内部缓存的共享实例。

但是，不存在应用程序退出之外的内存泄漏之类的情况。如果您的应用程序终止，它曾经拥有的所有内存都会返还给系统，无论它是如何分配的。如果不是这种情况并且您的应用程序将崩溃，那么它在崩溃之前使用的内存最终会丢失给系统，这是不可接受的。在多任务操作系统上，崩溃的应用程序不能对系统的其余部分产生任何负面影响！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-29T19:09:00.723

无论你做什么，都不要自动释放一个非保留的共享实例，因为它会被释放，你会被搞砸的。按照您当前的方式进行操作，但在 applicationWillTerminate: 中输入如下内容：

```
BackgroundFactory * factory = [self sharedFactory];
// prevent an analyzer annoyance
NSValue * value = [NSValue valueWithPointer:factory];
id fac = (id)[value pointerValue];
[fac release]; 
```

请注意，sharedFactory 是返回共享实例的方法。所有这些代码都应该进入一个 +freeSharedInstance 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-23T21:30:07.850

最好这样做

```
+ (Foo*)sharedInstance
{
    if (!SharedInstance)
        SharedInstance = [[[Foo alloc] init] autorelease];

    return SharedInstance;
}
@end 
```

使用共享实例的 B 类可以保留和释放它。

# delphi - Delphi 2009 RawByteString 变幻莫测

> ID：498315
> 
> 赞同：5
> 
> 时间：2009-01-31T05:12:35.160
> 
> 标签：delphi, unicode, utf-8, delphi-2009, rawbytestring

假设出于某种不正当的原因，您想要显示 UTF8String 的原始字节内容。

```
var
  utf8Str : UTF8String;
begin    
  utf8Str := '€ąćęłńóśźż';
end; 
```

**(1)**这不行，它显示可读的形式：

```
memo1.Lines.Add( RawByteString( utf8Str ));
// output: '€ąćęłńóśźż' 
```

**(2)**但是，这确实“起作用” - 请注意串联：

```
memo1.Lines.Add( 'x' + RawByteString( utf8Str ));
// output: 'xâ‚¬Ä…Ä‡Ä™Ĺ‚Ĺ„ĂłĹ›ĹşĹĽ' 
```

我理解（1），尽管编译器对 UnicodeString 的强制强制似乎阻止了按原样显示 RawByteString var。但是，为什么（2）中的行为会发生变化？

**(3)**更奇怪 - 让我们反转串联：

```
memo1.Lines.Add( RawByteString( utf8Str ) + 'x' ); 
// output: '€ąćęłńóśźżx' 
```

我一直在阅读 Delphi 中新奇的字符串类型，并认为我理解它们是如何工作的，但这是一个谜。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-31T16:56:45.707

`RawByteString``AnsiString`仅存在以最小化使用具有不同代码页亲和力的各种风格的函数所需的重载数量。

一般来说，不要声明 type 的变量`RawByteString`。不要将值类型转换为该类型。不要对该类型的变量进行连接。关于你唯一能做的事情是：

*   声明这种类型的参数（原意）
*   索引这样的参数
*   在这样的参数中搜索
*   使用该`StringCodePage`函数检查字符串的实际代码页的智能操作。

例如，您会注意到`StringCodePage`函数本身`RawByteString`用作其参数类型。这样，它将与 any 一起使用`AnsiString`，而不是在将其作为参数传递之前进行代码页翻译。

对于您的情况，诸如串联之类的东西在很大程度上是未定义的。RTM 和 Update 2 之间的行为发生了变化，但是当 RTL 字符串连接函数接收具有不同代码页的多个字符串时，它没有简单的方法来确定最终字符串应该使用哪个代码页。这只是你不应该像在这里那样连接它们的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-02T02:10:05.387

您不能“按原样”将字符串添加到 TMemo。您总是需要对 Unicode 进行某种转换，因为这就是 TMemo 在 Delphi 2009 中所知道的全部内容。

如果您想假装您的 UTF8String 使用代码页 1252，请执行以下操作：

```
var
  utf8Str : UTF8String;
  Raw: RawByteString;
begin
  utf8Str := '€ąćęłńóśźż';
  Raw := utf8Str;
  SetCodePage(Raw, 1252, False);
  Memo.Lines.Add(Raw);
end; 
```

更多详细信息，请参阅我的文章[有效地使用 RawByteString](http://www.micro-isv.asia/2008/08/using-rawbytestring-effectively/)

# c++ - Visual Studio：智能感知问题和 Linux 兼容性

> ID：498319
> 
> 赞同：2
> 
> 时间：2009-01-31T05:17:22.860
> 
> 标签：c++, linux, visual-studio-2008, intellisense

两个有点无关的问题：

*   有时，当我在 Visual Studio 2008 Express 中处理 C++ 项目时，智能感知只是不想“工作”，即使它确实应该工作。自动完成框不显示，状态栏显示如下内容：“智能感知：没有更多信息可用”。
    有时可以通过重建解决方案或重新打开解决方案来修复它，有时即使这样也不起作用。这是一个已知问题吗？如果是这样：是否有任何已知的修复？

*   是否有任何适用于 Linux 的 C++ IDE 与 MSVC++ 的 .sln 文件兼容？有时我想在一些项目上工作，而不必经历创建新项目和添加文件或手动创建 Make 文件的麻烦。

编辑：
回答我自己的问题：

*   显然，除了尝试删除 .ncb 文件之外，没有真正的解决方法。替代方案是使用不同的 IDE 或使用商业包替换智能感知。

*   Code::Blocks 似乎能够打开 Visual Studio 文件。或者至少可以轻松导入它们。

我把这些贴在一起，因为它们都与视觉工作室有关，我认为它们不够重要，不值得拥有自己的主题。

确实认为downvote有点苛刻！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-12T21:43:21.700

Intellisense 失败通常是因为“损坏”的 ncb 文件。通常的解决方案是删除它。

据报道，下一个版本 VS 2010 将不再使用 ncb 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T05:51:04.133

实际上，我使用 Monodevelop 打开 .sln 文件时遇到了一些幸运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-21T02:53:48.477

为避免手动创建 Make 文件，请尝试[CMake](http://www.cmake.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T05:26:43.120

要回答您的第二个问题，除了 Visual Studio 之外，无法打开 .sln 文件。它们是一种专有文件类型，（似乎）没有人有兴趣为其编写解析器。

但是，您可以使用 Visual Studio 自动生成生成文件。只需使用 Visual Studio 中的“项目 > 导出 Makefile”菜单命令。

# c - 从命令行将参数传递给 C 程序

> ID：498320
> 
> 赞同：37
> 
> 时间：2009-01-31T05:17:24.013
> 
> 标签：c, linux, arguments

所以我在 Linux 中，我想让一个程序在你从命令行执行它时接受参数。

例如，

`./myprogram 42 -b -s`

因此，程序会将数字 42 存储为 int 并根据它得到的参数（如 -b 或 -s）执行某些代码部分。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-01-31T05:21:28.420

您可以使用[getopt](http://www.gnu.org/software/libtool/manual/libc/Getopt.html)。

```
 #include <ctype.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>

 int
 main (int argc, char **argv)
 {
   int bflag = 0;
   int sflag = 0;
   int index;
   int c;

   opterr = 0;

   while ((c = getopt (argc, argv, "bs")) != -1)
     switch (c)
       {
       case 'b':
         bflag = 1;
         break;
       case 's':
         sflag = 1;
         break;
       case '?':
         if (isprint (optopt))
           fprintf (stderr, "Unknown option `-%c'.\n", optopt);
         else
           fprintf (stderr,
                    "Unknown option character `\\x%x'.\n",
                    optopt);
         return 1;
       default:
         abort ();
       }

   printf ("bflag = %d, sflag = %d\n", bflag, sflag);

   for (index = optind; index < argc; index++)
     printf ("Non-option argument %s\n", argv[index]);
   return 0;
 } 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-01-31T05:19:37.817

在 C 中，这是使用传递给`main()`函数的参数来完成的：

```
int main(int argc, char *argv[])
{
    int i = 0;
    for (i = 0; i < argc; i++) {
        printf("argv[%d] = %s\n", i, argv[i]);
    }
    return 0;
} 
```

更多信息可以在网上找到，例如这篇[关于主要](http://publications.gbdirect.co.uk/c_book/chapter10/arguments_to_main.html)文章的参数。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-31T06:19:10.893

考虑使用[`getopt_long()`](http://www.gnu.org/software/libtool/manual/libc/Getopt-Long-Options.html#Getopt-Long-Options). 它允许任何组合的短期和长期期权。

```
#include <stdio.h>
#include <stdlib.h>
#include <getopt.h>

/* Flag set by `--verbose'. */
static int verbose_flag;

int
main (int argc, char *argv[])
{
  while (1)
    {
      static struct option long_options[] =
    {
      /* This option set a flag. */
      {"verbose", no_argument,       &verbose_flag, 1},
      /* These options don't set a flag.
         We distinguish them by their indices. */
      {"blip",    no_argument,       0, 'b'},
      {"slip",    no_argument,       0, 's'},
      {0,         0,                 0,  0}
    };
      /* getopt_long stores the option index here. */
      int option_index = 0;

      int c = getopt_long (argc, argv, "bs",
               long_options, &option_index);

      /* Detect the end of the options. */
      if (c == -1)
    break;

      switch (c)
    {
    case 0:
      /* If this option set a flag, do nothing else now. */
      if (long_options[option_index].flag != 0)
        break;
      printf ("option %s", long_options[option_index].name);
      if (optarg)
        printf (" with arg %s", optarg);
      printf ("\n");
      break;
    case 'b':
      puts ("option -b\n");
      break;
    case 's':
      puts ("option -s\n");
      break;
    case '?':
      /* getopt_long already printed an error message. */
      break;

    default:
      abort ();
    }
    }

  if (verbose_flag)
    puts ("verbose flag is set");

  /* Print any remaining command line arguments (not options). */
  if (optind < argc)
    {
      printf ("non-option ARGV-elements: ");
      while (optind < argc)
    printf ("%s ", argv[optind++]);
      putchar ('\n');
    }

  return 0;
} 
```

有关的：

*   ~~[您更喜欢哪种命令行命令样式？](https://stackoverflow.com/questions/367309/which-command-line-commands-style-do-you-prefer)~~
*   [Unix shell 命令的一般语法是什么？](https://stackoverflow.com/questions/2160083/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-01-31T05:21:03.820

看看 getopt 库；这几乎是这类事情的黄金标准。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-31T14:35:31.547

除了`getopt()`，您还可以考虑使用`argp_parse()`（同一库的替代接口）。

从[libc 手册](http://www.gnu.org/software/libtool/manual/libc/Parsing-Program-Arguments.html#Parsing-Program-Arguments)：

> `getopt`更标准（它的短选项版本是 POSIX 标准的一部分），但是 `argp_parse`对于非常简单和非常复杂的期权结构来说，使用通常更容易，因为它为您做了更多的脏工作。

但我总是对标准感到满意`getopt`。

注意 GNU`getopt`是`getopt_long`GNU LGPL。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-31T15:02:56.093

其他人已经击中了这个：

*   使您可以直接访问命令行的标准参数`main(int argc, char **argv)`（在它被 shell 破坏和标记之后）
*   有非常标准的工具来解析命令行：`getopt()`和`getopt_long()`

但是正如您所看到的，使用它们的代码有点罗嗦，而且非常符合规范。我通常会使用以下方式将其推到视野之外：

```
typedef
struct options_struct {
   int some_flag;
   int other_flage;
   char *use_file;
} opt_t;
/* Parses the command line and fills the options structure, 
 * returns non-zero on error */
int parse_options(opt_t *opts, int argc, char **argv); 
```

然后主要的第一件事：

```
int main(int argc, char **argv){
   opt_t opts;
   if (parse_options(&opts,argc,argv)){
      ...
   } 
   ...
} 
```

或者，您可以使用[Argument-parsing helpers for C/UNIX](https://stackoverflow.com/questions/189972/argument-parsing-helpers-for-c-unix/)中建议的解决方案之一。

# macos - 查找使用 AppleScript 安装的 Mac OSX 版本

> ID：498323
> 
> 赞同：9
> 
> 时间：2009-01-31T05:20:08.190
> 
> 标签：macos, applescript

如何使用 AppleScript 找到我的 Mac 上安装的 OSX 版本？我想以编程方式安装应用程序并根据版本运行不同的 pkg 文件。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2011-07-25T01:28:09.713

以下是如何使用内置函数在 AppleScript 中获取 OSX 版本：

```
将 sysinfo 设置为系统信息
将 osver 设置为 sysinfo 的系统版本

```

在 OS X Mavericks 上，结果是“10.9”。

单线：`set osver to system version of (system info)`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-25T17:26:39.423

您可以使用以下命令将操作系统版本作为显示字符串获取：

```
set _versionString to system version of (system info) 
```

如果您想将此与另一个版本进行比较，请务必使用[`considering numeric strings`](https://developer.apple.com/library/mac/documentation/applescript/conceptual/applescriptlangguide/reference/ASLR_control_statements.html)：

```
considering numeric strings
    set _newEnough to _versionString ≥ "10.9"
end considering 
```

否则，您可能会遇到诸如“10.4.11”小于“10.4.9”或“10.10”小于“10.9”等问题。

您也可以使用`system attribute`. 这使您可以将版本号作为整数获取，这样您就不必担心比较点分隔的字符串：

```
set _versionInteger to system attribute "sysv" -- 4240 == 0x1090 (Mac OS X 10.9)
set _isMavericksOrBetter to (system attribute "sysv") ≥ 4240 -- 0x1090
set _isMountainLionOrBetter to (system attribute "sysv") ≥ 4224 -- 0x1080
set _isLionOrBetter to (system attribute "sysv") ≥ 4208 -- 0x1070 
```

您还可以使用`system attribute`来获取各个版本组件，而无需解析字符串：

```
set _major to system attribute "sys1" -- 10
set _minor to system attribute "sys2" -- 9
set _bugFix to system attribute "sys3" -- 0 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-31T05:36:51.603

我不在 Mac 上，所以可能有更好的方法来做到这一点，但我想到的第一种方法就是执行一个 shell 命令来查询操作系统版本。

[http://developer.apple.com/technotes/tn2002/tn2065.html#TNTAG2](http://developer.apple.com/technotes/tn2002/tn2065.html#TNTAG2)

[http://developer.apple.com/DOCUMENTATION/Darwin/Reference/ManPages/man1/sw_vers.1.html](http://developer.apple.com/DOCUMENTATION/Darwin/Reference/ManPages/man1/sw_vers.1.html)

根据这些参考资料，您可能想要执行以下操作：

```
set os_version to do shell script "sw_vers -productVersion" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-09T04:32:53.353

您也可以从 Finder 应用程序中获取版本

```
tell application "Finder"
    set os_version to version
end tell

display dialog os_version 
```

在我的机器上显示“10.5.8”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-31T05:36:38.937

我对 AppleScript 不太熟悉，但是 AFAIK 你可以使用 sw_vers 命令从 shell 获取一些关于版本的信息。例如：

```
Macintosh:~ udekel$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.5.6
BuildVersion:   9G55 
```

如果您可以从 appleScript 读取和解析它，那可能是一个解决方案，尽管我确信必须有更优雅的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-31T05:51:47.703

尝试以下方式：

```
tell application "Terminal"
activate

set theVersion to do script with command "sw_vers -productVersion"
end tell 
```

编辑：有人指出这确实会打开终端，这可能不是您想要的行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-04T11:55:45.123

这对我有用

```
set OSVersion to system version (system info)
if OSVersion as string < "10.9" or OSVersion as string > "10.9.5" then
- Add code to execute if condition met
else
- Add code to execute if condition not met
end if
```

# git - 如何从 `git status` 报告中省略某些文件？

> ID：498331
> 
> 赞同：2
> 
> 时间：2009-01-31T05:25:48.503
> 
> 标签：git

我正在使用 git 并在 Python 中进行开发（尽管这显然与使用 git 管理的任何其他数据相关）。我如何告诉 git 我不想看到`.pyc`来自 python 的所有文件`git status`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-31T05:27:05.960

在文件`.gitignore`中添加以下行：

```
*.pyc 
```

请参阅[gitignore(5)](http://git-scm.com/docs/gitignore)。

# phpmyadmin - 在 Wamp 的 PhpMyAdmin 中为用户输入密码

> ID：498343
> 
> 赞同：22
> 
> 时间：2009-01-31T05:35:12.760
> 
> 标签：phpmyadmin, wampserver

如何更改 WAMP 服务器上 phpMyAdmin 中 root 用户的密码？因为我在错误地更改密码后被锁定在 phpMyAdmin 之外。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-01-31T06:14:06.597

我的 config.inc.php 文件在 phpmyadmin 文件夹中。将用户名和密码更改为您为数据库设置的用户名和密码。

```
 <?php
/*
 * This is needed for cookie based authentication to encrypt password in
 * cookie
 */
$cfg['blowfish_secret'] = 'xampp'; /* YOU SHOULD CHANGE THIS FOR A MORE SECURE COOKIE AUTH! */

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;

/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'enter_username_here';
$cfg['Servers'][$i]['password'] = 'enter_password_here';
$cfg['Servers'][$i]['AllowNoPasswordRoot'] = true;

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';

/*
 * End of servers configuration
 */

?> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-04T16:31:15.290

在 phpmyadmin 文件夹中有一个名为 config.inc.php 的文件。

文件路径为 C:\wamp\apps\phpmyadmin4.0.4

**将 auth_type 'cookie' 编辑为 'config' 或 'http'**

$cfg['Servers'][$i]['auth_type'] = 'cookie';

```
$cfg['Servers'][$i]['auth_type'] = 'config'; 
```

或者

```
$cfg['Servers'][$i]['auth_type'] = 'http'; 
```

当您访问 phpmyadmin 站点时，系统会要求您输入用户名和密码。如果您的 Web 服务器碰巧暴露在外部连接中，这也可以防止外部人员访问您的 phpmyadmin 应用程序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-09T13:52:04.147

按照以下步骤恢复**默认设置：**

代替

```
$cfg['Servers'][$i]['AllowNoPassword'] = false; 
```

将其更改为：

```
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

在你的`config.inc.php`文件中。

不要指定任何密码并输入以前的用户名，这意味着`root`.

例如

```
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = ''; 
```

在我编辑了我的`config.inc.php`文件后，这对我有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-11-23T16:12:10.877

我有一些问题，并使用另一个配置变量修复了它

```
$cfg['Servers'][$i]['AllowNoPassword'] = true;
instead
$cfg['Servers'][$i]['AllowNoPasswordRoot'] = true; 
```

可能对某人有帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-31T05:57:04.540

在您的 PhpMyAdmin 安装中搜索名为 Documentation.txt 的文件。这描述了如何创建一个名为 config.inc.php 的文件以及如何配置用户名和密码。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-07T01:45:52.960

看起来 phpmyadmin 的用户名和密码存储在 WAMP 中的其他位置（可能在自定义配置文件中），或者在该过程中涉及一些额外的哈希或 ...。

因此，要更改当前使用的默认 'config'-基于文件的密码，您可以`<host>/phpmyadmin/user_password.php`使用浏览器浏览“”。系统将提示您输入 mysql 凭据，然后您可以使用显示的表单更改您之前登录的用户的存储密码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-11T14:39:23.603

如果在命令行 mysql -u root -p 上没有找到任何密码，它会询问密码，这将是您在安装启动时输入的默认密码。这将是您登录 phpmyadmin 的密码

# mysql - 如何在不退出mysql的情况下中断mysql命令行工具中的长查询？

> ID：498344
> 
> 赞同：30
> 
> 时间：2009-01-31T05:35:19.593
> 
> 标签：mysql, command-line

在调试 SQL 语句时，如果我在使用输出大量结果的 mysql 命令行时不小心执行了一个查询（即使查询本身在合理的时间内执行），我知道停止无休止的输出流的唯一方法是 CTRL -C。

不幸的是，这让我回到了 shell，迫使我再次登录并选择数据库。

为了避免这种情况，我开始使用*--sigint-ignore*选项运行 mysql，以便忽略 CTRL-C。

现在我想要一种方法来中断那些长查询的输出。

是否有键盘快捷键可以做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-31T05:47:02.330

不是键盘快捷键。

唯一的选择是打开另一个会话，使用[SHOW PROCESSLIST](http://dev.mysql.com/doc/refman/5.1/en/show-processlist.html)然后[KILL QUERY](http://dev.mysql.com/doc/refman/5.1/en/kill.html)您要终止的会话。

您还可以使用`mysqladmin`命令行工具发出这些命令。

无论哪种方式，它都需要您登录。因此，与仅按 Ctrl-C 相比，这并没有太大的优势。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-01-31T09:58:59.467

您可以使用`--pager`将输出传递给寻呼机，例如`less`这将使您能够控制输出。不仅杀死它，而且比终端窗口提供的更好的分页、搜索甚至存储输出。

还有`--safe-updates`or`-U`开关 aka`--i-am-a-dummy`可以保护您免受无子句`update`s 和`delete`s 的影响，并且还可以自动将选择限制为 1000（可使用 select_limit 进行修改）。

所有这些都可以在`~/.my.cnf`.

```
[mysql]
pager
safe-updates 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-02-02T05:41:13.310

从当前的 mysql 文档：

> 从 MySQL 5.1.10 开始，键入 Control-C 会导致 mysql 尝试终止当前语句。如果这不能完成，或者在语句被终止之前再次键入 Control-C，则 mysql 退出。以前，Control-C 会导致 mysql 在所有情况下都退出。

由于我使用的是 5.0.67 版本，因此更新 mysql 似乎是最好的解决方法。但是，我接受了 Schwern 的回答，因为它可以快速实施并且工作起来就像一个梦想。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-14T09:04:30.157

有点晚了，但也许我的回答会对某人有所帮助。

通过命令行终止特定 mysql 查询的一种方法是：

1.  运行`mysqladmin processlist`并通过命令找到查询的进程id

2.  运行`mysqladmin kill <query_id>`。

    假设查询 ID 为 123456789，您只需要运行：`mysqladmin kill 123456789`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-16T10:12:03.187

采用`mysql --sigint-ignore`

并清除一行，使用`control`+`U`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-04T21:00:07.667

从 MySQL 5.7（2013 年发布）开始，`^C`取消正在进行的查询并将您返回到`mysql`shell。`^C`当前仅在没有查询运行时退出。

> 以前，mysql中的Control+C如果有则中断当前语句，如果没有则退出mysql。现在 Control+C 会中断当前语句（如果有的话），否则取消任何部分输入行，但不会退出。

[MySQL 5.7 发行说明](https://dev.mysql.com/doc/refman/5.7/en/mysql-nutshell.html)

# perl - 如何在 Perl 的 Class::DBI 中覆盖自动生成的访问器？

> ID：498345
> 
> 赞同：1
> 
> 时间：2009-01-31T05:36:18.670
> 
> 标签：perl, class-dbi

我按照[http://wiki.class-dbi.com/wiki/Overriding_autogenerated_accessors中的示例进行操作](http://wiki.class-dbi.com/wiki/Overriding_autogenerated_accessors)

我想在将 URL 插入数据库之前对其进行修改：

```
package Hosting::Company;
use base 'Class::DBI';

 my $class = __PACKAGE__;

$class->table('Companies');
$class->columns(Primary => 'CompanyId');
$class->columns(Others => qw/Name Url Comment/);

sub Url {
my $self = shift;

    # modify URL.
    if (@_) {
        $_[0] = 'aaaaaaaaaaaa';
        # return $self->_Url_accessor('aaaaaaaaaaaa'); - doesn't work either
    }

    # Back to normal Class::DBI 
    return $self->_Url_accessor(@_);
} 
```

但它不起作用：

```
my $company = Hosting::Company->insert({ Name => 'Test', Url => 'http://http://url' });
print $company->Url, "\n"; 
```

显示：

```
http://http://url 
```

我希望 Class:DBI 邮件列表还活着！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T09:31:38.057

在您的 URL 访问器中，您检查是否将参数传递给该方法。但是您没有传递任何信息，因此访问器只会调用 _Url_accessor()。您可能应该先调用 _Url_accessor 然后修改结果：

```
sub Url {
    my $self = shift;

    # Was there a param passed in?
    if ( @_ ) {
         # Do you really want to modify it here?
         return $self->_Url_accessor(@_);
    }
    else {
        my $url = $self->_Url_accessor();
        # mangle result here:
        $url = 'aaaaaaaaa';
        return $url;
     }
} 
```

如果你想在 URL 进入数据库之前更改它，我想你必须在你的类中提供一个 normalize_column_values ，每次插入时都会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T09:35:52.290

覆盖访问器不会改变`insert`。处理数据规范化的最佳方法是覆盖[`normalize_column_values()`](http://search.cpan.org/perldoc?Class::DBI#DATA_NORMALIZATION). 但是 Manni 是对的，你的访问器被破坏了。

PS [CDBI 邮件列表](http://lists.digitalcraftsmen.net/mailman/listinfo/classdbi)仍然有效，只是没有看到太多的帖子。大多数人已经转向[DBIx::Class](http://search.cpan.org/perldoc?DBIx::Class)。

# asp.net - 在使用 javascript 进行登录验证时需要帮助

> ID：498350
> 
> 赞同：0
> 
> 时间：2009-01-31T05:39:48.960
> 
> 标签：asp.net, javascript, login

请有人指出这里的错误是什么？使用 javascript 我正在验证用户输入。当我单击登录按钮而不检查 javascript 功能时，它会转到欢迎页面。这是我的代码：

```
<script type="text/javascript">  
function validLogin()
{
        if(document.getElementById("txtUserName").value == "")
        {
          alert("Please enter your UserName");
          return false;
        }

        if(document.getElementById("txtPassword").value == "")
        {
          alert("Please enter your Password");
          return false;
        }

}
</script>

 protected void Page_Load(object sender, EventArgs e)
 {
     BtnLogin.Attributes.Add("onClick","return ValidLogin();");     
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-31T05:47:12.220

我看到您正在使用 ASP .NET（您发布的代码上的 Page_Load 事件）。

[我认为通过ASP .NET Validation Controls](http://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp)（即[RequiredFieldValidator](http://www.w3schools.com/ASPNET/control_reqfieldvalidator.asp) ）处理验证会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T05:58:03.057

检查您的情况`return ValidLogin()`；它不匹配。

PS：我希望您没有在客户端执行所有用户验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T05:59:12.040

使用 ASP .NET 验证控件可能会更容易，这是一个示例：

```
User Name:
<asp:TextBox ID="UserName" runat="server" />
<asp:RequiredFieldValidator 
    ID="UserNameValidator" 
    ControlToValidate="UserName"
    ErrorMessage="User Name Required" 
    runat="server" />
Password:
<asp:TextBox ID="Password" runat="server" />
<asp:RequiredFieldValidator 
    ID="PasswordValidator" 
    ControlToValidate="Password"
    ErrorMessage="Password Required"
    runat="server" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-31T06:05:17.363

首先确保大小写没有区别...您的javascript函数是**v** alidLogin，在Page_Load中您有**V** alidLogin

# asp.net-mvc - 通用 UpdateModel 如何 与 MVC 'Controller' 中的 UpdateModel 不同？

> ID：498351
> 
> 赞同：1
> 
> 时间：2009-01-31T05:42:21.153
> 
> 标签：asp.net-mvc, model

ASP.NET MVC 控制器类中的 UpdateModel 有很多重载。

其中有些是通用的，有些则不是。

显然我想使用通用版本，但我看不到它实际上对我有什么作用？UpdateModel 不只是一种使用反射填充属性的方法。

那么这之间有什么区别：

```
 UpdateModel<ContestModel>(model); 
```

对比

```
 UpdateModel(model); 
```

如果它知道类型，反射是否会更快一点 - 还是有其他原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-31T10:00:55.703

`UpdateModel`没有泛型类型签名就不存在任何重载。您所看到的是编译器的智能程度。当调用具有泛型签名的方法并且其中一个参数是相同的泛型类型时，编译器会为您推断类型。

换句话说，您发布的这两个示例在编译器眼中完全相同。

# sql-server - 如何在 Sql 2008 中执行此空间查询？

> ID：498353
> 
> 赞同：3
> 
> 时间：2009-01-31T05:44:25.237
> 
> 标签：sql-server, sql-server-2008, subquery, spatial

我正在尝试在 sql 2008 中进行空间查询-> 对于给定的 POI 列表（兴趣点、长/纬度`GEOGRAPHY`数据），它们存在于哪些邮政编码中（多面`GEOGRAPHY`数据）。

所以这是我尝试过的查询，但它在语法上不正确：-

```
SELECT PostCodeId, ShapeFile
FROM Postcodes a
WHERE a.ShapeFile.STIntersects(
    SELECT PointOfInterest
    FROM PointOfInterests
    WHERE PointOfInterestId IN (SELECT Item from dbo.fnSplit(@PoiIdList, ',')) 
```

所以这意味着我传入一个[POI Id 的 csv 列表并拆分它们](https://stackoverflow.com/questions/337704/parameterizing-a-sql-in-clause)。这不是问题..这是我在`STIntersects`. 那是无效的。

所以..有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-31T12:44:17.323

怎么样：

```
SELECT a.PostCodeId, a.ShapeFile
FROM (SELECT Item from dbo.fnSplit(@PoiIdList, ',')) AS POI_IDs
INNER JOIN PointOfInterests
    ON PointOfInterests.PointOfInterestId = POI_IDs.Item
INNER JOIN Postcodes a
    ON a.ShapeFile.STIntersects(PointOfInterests.PointOfInterest) = 1 
```

# bash - 如何在 OS X Leopard 上的 bash 脚本中进行日期数学运算？

> ID：498358
> 
> 赞同：36
> 
> 时间：2009-01-31T05:50:54.553
> 
> 标签：bash, macos, date-math

我意识到我可以编写一个小的 C 或 Ruby 程序来执行此操作，但我希望我的脚本具有尽可能少的依赖项。

鉴于此*警告*，如何在 OS X 上的 bash 脚本中进行日期数学运算？我看过一个帖子（在另一个网站上），有人做了以下事情：

```
日期 -d "-1 天"
```

但这似乎不适用于 OS X。

**附录：**

有几个人评论并回应说 Ruby、Python、Perl 等是 OS X 的标准配置。我熟悉这三种语言，并且可以轻松编写执行我想要的脚本。事实上，我已经有了这样一个用 Ruby 编写的脚本。

所以也许我应该澄清我所说的“外部依赖”是什么意思。我的意思是，我不希望我的 bash 脚本必须调用它外部的任何其他脚本。换句话说，我希望它使用一些在 OS X 的 vanilla 安装中可用并且已经在路径上的实用程序。

但是，这看起来不太可能，所以我将不得不使用我的外部依赖项：一个 Ruby 脚本。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-01-31T06:20:03.543

```
$ date -v -1d 
```

-d 设置夏令时标志。

尝试 man date 以获取更多信息。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-09-19T15:06:31.540

例如，此 OS X 日期命令将在输入字符串 20160826（不是当前时间）中添加 14 天：

```
date -j -f %Y%m%d -v+14d 20160826 +%Y%m%d 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2011-04-08T17:37:28.830

因为MacOS是基于BSD，而不是linux，所以命令其实是：

```
date -v-1d 
```

调整开关采用格式`-v[+/-](number)[ymwdHMS]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-31T14:05:25.570

Matthew 提到的命令适用于 Leopard 上的 /bin/date。此外，正如 Schwern 所指出的，如果您确定您的 shell 脚本将在 Mac OS X 上运行，您为什么不想使用 Python 或 Ruby，它们都是 /usr/bin 中的标准配置？这绝不会影响您特定场景中的可移植性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T15:02:04.677

> 我意识到我可以编写一个小的 C 或 Ruby 程序来执行此操作，但我希望我的脚本具有尽可能少的依赖项。

用 C 或 Ruby 脚本执行会导致更少的依赖性，并且更跨平台。. Bash 脚本只调用各种其他脚本/应用程序，主要是 GNU 实用程序。. 许多命令不可用，或者采用不同的参数在其他平台上（尤其是在 OS X 和 Linux 之间）..

Ruby 默认包含在 OS X Leopard（和 10.4，如果我没记错的话可能是以前的版本）中，如果您使用 Rubys 内置日期库，它将在任何平台上始终如一地工作。

每当您尝试做任何远程复杂的事情时，通常最好使用“适当的”脚本语言！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-03T18:23:21.333

这是我用来在 google doc 中打印日记日期的脚本：

```
 #!/bin/bash

    # ask user for variable details
    read -p 'Starting date in "mm-dd-yyyy" format: ' DATE

    # adjust the count by editing the "x" number in {0..x}
    # 91 days will give you about 3 months, currently set to 6 for testing
    # %a gives short day of the week, -m -d gives single digit months and days, capital Y gives 4 digit year

    for i in {0..6}
    do
         NEXT_DATE=$(date -j -f %m-%d-%Y -v+"$i"d $DATE +'%a %-m/%-d/%y')
         echo -e "$NEXT_DATE\n\n\n"
    done 
```

这是示例输出，（我在每个日期之间使用 3 个新行）：

2018 年 4 月 1 日星期日

2018 年 4 月 2 日星期一

2018 年 4 月 3 日星期二

2018 年 4 月 4 日星期三

2018 年 4 月 5 日星期四

2018 年 4 月 6 日星期五

2018 年 4 月 7 日星期六

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-12T21:06:55.383

你可能正在寻找这个。`gdate '+%s' -d '2 weeks ago'`或者`gdate '+%s' -d '1 day ago'`

这两个示例在 Epoch 时间返回。我把那几秒钟变成了我的语言可以正常阅读的东西`strptime(seconds, '%s')`。Python Ruby 和 Javascript 是我所知道的少数拥有它的。我相信 Java 和所有其他人也会这样做。

也是`gdate`日期*（GNU coreutils）*它只是在mac上调用了一些不同的东西。奇怪的是在我的另一台 Mac 上，它让我使用它`data`来获得同样的效果。不知道为什么他们最近会改变一些东西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-20T14:41:34.510

我在 macOS Mojave 10.14.5 上使用了以下内容，以找到 DHCP 续订时间打开

```
date -v +`ipconfig getoption en0 renewal_t1_time_value`S 
```

# .net - 何时以及何时不安装到 GAC 中？

> ID：498361
> 
> 赞同：46
> 
> 时间：2009-01-31T05:51:18.733
> 
> 标签：.net, installation, gac, software-distribution

什么时候应该安装到 GAC 中，什么时候不应该？（实际上，我指的是在客户购买我们的产品后安装在他们的机器上）。

1.  我有一个仅用于我的一个应用程序（GAC 或无 GAC）的程序集？

2.  我有一个所有应用程序共享的程序集（GAC 或非 GAC）？

3.  我的所有应用程序*都可能*使用不同版本的程序集（GAC 或非 GAC）？

这是三种情况……但我相信还有更多。我不一定只寻找这三个问题的答案。

**类似的问题：[使用 GAC 的优点和缺点是什么？](https://stackoverflow.com/questions/23578/what-are-the-advantages-and-disadvantages-of-using-the-gac/23598)**

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-31T05:59:11.107

一般 MS 指南

1.  不
2.  不
3.  不

GAC 实际上是 Microsoft 通用 .NET 库的存储库。是的，他们也让开发人员使用它，但根据经验，如果您不需要 GAC，请不要使用它。如果没有伤害，请保持简单和本地化。

*   我只会出于性能原因考虑 GAC，例如，如果您有一些大型程序集，请尝试将它们放入 GAC 和[NGEN](http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)中。它应该会显着提高性能。Microsoft 在安装期间为所有标准 .NET 框架程序集执行此操作（现在您知道为什么安装需要这么长时间了）。Paint.NET 也这样做（以改善他们的应用程序的启动时间）。然而，我们大多数人并不在大型框架或 Photoshop 竞争对手上工作，所以大多数时候，在 GAC 中进行组装所带来的性能提升是微乎其微的。不值得放弃简单的 x-copy 部署。

*   一些开发人员可能会使用 GAC 来确保权限不足的用户无法删除或修改他们的程序集。

*   对于其他人来说，这可能是出于版本控制的原因，但在这里你真的应该重新考虑。我不会重复已经说过的话，[你可以在这里阅读为什么](http://www.sellsbrothers.com/Posts/Details/12503)。

并且不要忘记，一旦您想部署到 GAC 中，您的安装程序将需要管理员权限，您几乎可以忘记单击一次部署等...

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-01-31T09:29:15.847

GAC 的有用案例：

*   COM 可调用代码 - 即您希望一些非 .NET 代码能够访问您而不会弄乱 dll 等
*   [服务组件](http://msdn.microsoft.com/en-us/library/7c05y13x(VS.80).aspx)(COM+)
*   如果您正在编写如此常见的代码，那么使用 GAC （主要是 .NET 框架组件等）实际上是有意义的
*   如果您想使用[NGEN](http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)对代码进行预 JIT

除此之外，我倾向于像避免瘟疫一样避免 GAC。通过`robocopy`etc 为您的应用程序部署必要的 dll 要容易得多；这提供了隔离**和**易于部署。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-31T07:31:52.353

如果您正在安装**asp.net Web 应用程序**并且您是所有者并且可以完全控制机器，那么在某些情况下，将您计划在全局程序集缓存中**跨站点/Web 实例共享的程序集放置可能是有意义的。**

如果将程序集放在 GAC 中，则可以显着改善具有相同 ASP.NET 应用程序的多个多个实例的服务器上的应用程序的初始加载时间和内存使用情况。至少我在我们的服务器上看到了这个，有几十个安装。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-21T16:00:26.973

如果您要交付一个由多个程序集组成的可重用库，但其中只有几个程序集构成一个外观，那么您可以考虑将程序集安装到 GAC 中，前提是该程序包已安装到开发人员的 PC 上。

想象一下，您运送了 6 个组件，而这 6 个组件中只有一个包含外观 - 即其他 5 个仅由外观本身使用。您运送：

*   **MyProduct.Facade.dll** - 这是唯一打算供开发人员使用的组件
*   MyProduct.Core.dll - 由 MyProduct.Facade.dll 使用，但不打算供开发人员使用
*   MyProduct.Component1.dll - 相同
*   MyProduct.Component2.dll - 相同
*   ThirdParty.Lib1.dll - MyProduct.Component1.dll 使用的第三方库
*   ThirdParty.Lib2.dll - 相同
*   等等

使用您的项目的开发人员希望在他们自己的项目中仅引用**MyProduct.Facade.dll 。**但是当他们的项目运行时，它必须能够以递归方式加载它引用的所有程序集。如何做到这一点？通常，它们必须在 GAC 中的 Bin 文件夹中可用：

*   您可以要求开发人员找到您的安装文件夹并添加对您放置在那里**的所有 N 个程序集的引用。**这将确保它们将被复制到 Bin 文件夹中，以便在运行时可用。
*   **您可以安装已经包含这 6 个引用的**VS.NET 项目模板。有点复杂，因为您应该在安装*之前将程序集的实际路径**注入*此模板。这只能由安装程序完成，因为此路径取决于安装路径。
**   您可以要求开发人员**在 .csproj / .vbproj 文件中创建一个特殊的构建后步骤，**将必要的依赖项复制到 Bin 文件夹。相同的缺点。*   最后，您可以**将所有程序集安装到 GAC**中。在这种情况下，开发人员必须从他们的项目中添加对 MyProduct.Facade.dll 的引用。无论如何，其他一切都将在运行时可用。*

 *注意：最后一个选项不会让您在将项目运送到生产 PC 时做同样的事情。您可以在 Bin 文件夹中发送所有程序集，也可以将它们安装到 GAC 中 - 一切都取决于您的意愿。

因此，所描述的解决方案显示了在开发过程中将第三方程序集放入 GAC 的优势。与生产无关。

*您可能会发现，安装到 GAC 中主要是为了解决所需程序集（依赖项）的位置问题。如果程序集安装到 GAC 中，您可能会认为它存在于“附近”任何应用程序。这就像将 .exe 的路径添加到您的 PATH 变量中，但是以“托管方式”。* - 当然，这是相当简化的描述；）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-31T07:41:16.733

这是来自 Chris Sells 的链接，名为“Avoid the GAC”

[https://sellsbrothers.com/12503](https://sellsbrothers.com/12503)

解释很长，但简而言之，他确定的两个案例是

1.  在不接触受影响的应用程序的情况下修复严重错误（并且不破坏任何东西！）

2.  在运行时在单独部署的程序集之间共享类型

[注意：克里斯的帖子末尾](https://sellsbrothers.com/1199)有一个很长的讨论线程，非常好的评论列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-31T06:05:15.867

首先，如果您在客户端计算机上安装此应用程序，则需要添加一个自定义操作以在 GAC 中安装该应用程序，并在删除时添加另一个操作。

案例 A 绝对不是 GAC

在案例 B 上，如果您的库会不断变化，您将需要每次都将程序集的每个版本添加到 gac 并更新到该程序集

在案例 C 中并排执行允许您运行不同的程序集版本，并且您不需要添加任何内容来区分版本。

仅在您确实需要时使用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-31T09:24:58.413

如果同一台服务器上的大量 Web 应用程序将共享完全相同的库，那么安装到 GAC 中才有意义。例如，在 Sharepoint 服务器上可能有数百个网站都需要共享同一个 Web 部件，因此在这种情况下，将编译后的 Web 部件部署到 GAC 是有意义的。

# c# - 什么构成“冗余委托创建”？

> ID：498363
> 
> 赞同：14
> 
> 时间：2009-01-31T05:54:30.490
> 
> 标签：c#, .net, delegates

我在课堂上注册了一个活动，并且像往常一样，我很懒惰，只使用 Visual Studio 2008 Pro 中内置的自动完成功能，它会自动创建委托创建及其关联的方法。

```
public abstract class FooBase
{
    protected event EventHandler<MyValueChangedArgs> MyValueChanged;

    protected FooBase()
    {
        MyValueChanged +=
            new EventHandler<MyValueChangedArgs>(HandleMyValueChanged);
    }

    private void HandleMyValueChanged(object sender, MyValueChangedArgs e)
    {
        // Some handling logic
    }
} 
```

通常，当 Visual Studio 为我生成事件处理程序时，我不会三思而后行，但后来我收到了 Refactor 的推荐！赞成“删除冗余代表创建”。该建议的结果是：

```
public abstract class FooBase
{
    protected event EventHandler<MyValueChangedArgs> MyValueChanged;

    protected FooBase()
    {
        MyValueChanged += HandleMyValueChanged;
    }

    private void HandleMyValueChanged(object sender, MyValueChangedArgs e)
    {
        // Some handling logic
    }
} 
```

在什么情况下创建委托是多余的，什么时候创建委托合适？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-31T05:59:50.497

我认为重构！告诉你这条线

```
MyValueChanged += new EventHandler<MyValueChangedArgs>(HandleMyValueChanged); 
```

可以缩短，编译器将推断事件处理程序的创建和 TEventArgs 类型参数...

> 在什么情况下创建委托是多余的，什么时候创建委托合适？

在设计器生成的代码上...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-31T06:02:08.213

对于那个很抱歉。当匿名方法被添加到 C# 时，我们只是没有时间在产品计划中生成更短的代码。

我总是编辑生成的代码以删除额外的语法。

# c# - 如何为 64 位编译我的应用程序使其更快或更好？

> ID：498369
> 
> 赞同：14
> 
> 时间：2009-01-31T05:59:24.897
> 
> 标签：c#, .net, 64-bit

我使用 C#、.NET、VS.NET 2008。

除了能够处理更多内存之外，将我的应用程序编译为 64 位有什么优势？

它会更快还是更小？为什么？

它是否使它更兼容 x64 系统（与 32 位应用程序相比）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-31T07:38:39.733

对于*本机*应用程序，您可以获得诸如增加地址空间之类的好处。但是，.NET 应用程序在 CLR 上运行，它抽象出任何底层架构差异。

假设您只是在处理托管代码，那么针对特定平台没有任何好处；您最好只使用“anycpu”标志集（默认情况下打开）进行编译。这将生成与平台无关的程序集，这些程序集将在 CLR 运行的任何架构上同样良好地运行。

专门针对（比如说）x64 不会给您带来任何性能提升，并且会阻止您的程序集在 32 位平台上工作。

[这篇文章](http://blogs.msdn.com/gauravseth/archive/2006/03/07/545104.aspx)有更多关于这个主题的信息。

**更新：** Scott Hanselman 刚刚也对这个主题进行了很好的[概述](http://www.hanselman.com/blog/BackToBasics32bitAnd64bitConfusionAroundX86AndX64AndTheNETFrameworkAndCLR.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-31T06:40:55.373

理论上，为 x64 编译的程序将比为 x86 编译的程序运行得更快。这样做的原因是因为 x64 架构中有更多的通用寄存器。32 位 x86 只有 4 个通用寄存器。AMD 在其 x64 扩展中增加了 8 个通用寄存器。这允许更少的内存负载和（稍微）更快的性能。

实际上，这不会对性能产生巨大影响，但应该会产生轻微影响。

使用 64 位指令会增加二进制文件的大小和内存占用，但由于 x64 仍然是 CISC 架构，因此二进制文件大小不会像 RISC 架构中那样翻倍。大多数指令的长度仍短于 64 位。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-31T07:50:12.660

事实上，不需要大内存空间的 64 位应用程序往往运行速度较慢。其背后的原因之一是您必须四处移动数据。如果您不能使用 >2GB 的内存空间（例如用于缓存），我不会推荐它。

这是我刚刚发现的一个有趣的链接 [http://www.osnews.com/story/5768](http://www.osnews.com/story/5768)有很多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-31T07:38:28.707

我对此表示怀疑（鉴于 C#/.NET 平台），除非您使用的是本机代码。请记住，.NET 托管代码被编译为 IL，平台切换默认为 anycpu，因此您应该使用现有二进制文件在 64 位操作系统上获得更好的性能：

[http://blogs.msdn.com/gauravseth/archive/2006/03/07/545104.aspx](http://blogs.msdn.com/gauravseth/archive/2006/03/07/545104.aspx)

这篇文章有很多有用的信息，包括有关 CorFlags 工具的信息，它可以让您检查 PE 标头。

一般来说，对于本机代码二进制文件，是的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-31T06:42:29.100

我真的不是 CPU 架构方面的专家，所以请轻描淡写。维基百科有一篇描述 x86-64 架构的文章（[链接文本](http://en.wikipedia.org/wiki/X64)）。

x86-64 有更多的寄存器，仅此一项就应该有助于使程序更快。此外，这种新架构还提供了新的指令集，如果编译器利用它可以提高速度。

另一个需要考虑的因素是可用指令集的数量。当一个程序编译到 x86 时，它的目标通常是运行所有现有的 32 位 CPU（奔腾 1、2、3、4、核心* 等）。每一代新的 CPU 都会添加新的指令集，这些指令不能被想要在所有 x86 CPU 之间以二进制格式完全可移植的程序使用。由于 x86-64 位是一种新架构，因此为这台机器重新编译程序可为编译器提供更广泛的指令集以供使用，而无需过多担心 diff 64 位 CPU 之间的二进制兼容性。

# .net - 如何检测我的应用程序是否在虚拟机中运行？

> ID：498371
> 
> 赞同：44
> 
> 时间：2009-01-31T06:01:42.677
> 
> 标签：.net, winapi, virtualization

如果我的应用程序在虚拟机中运行，我如何检测（.NET 或 Win32）？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-21T19:21:34.140

这就是我使用的：

```
using (var searcher = new System.Management.ManagementObjectSearcher("Select * from Win32_ComputerSystem"))
{
  using (var items = searcher.Get())
  {
    foreach (var item in items)
    {
      string manufacturer = item["Manufacturer"].ToString().ToLower();
      if ((manufacturer == "microsoft corporation" && item["Model"].ToString().ToUpperInvariant().Contains("VIRTUAL"))
          || manufacturer.Contains("vmware")
          || item["Model"].ToString() == "VirtualBox")
      {
        return true;
      }
    }
  }
}
return false; 
```

**编辑 2014-12-02**：更新代码，使其不再将 Microsoft Surface Pro 检测为 VM。感谢 Erik Funkenbusch 指出这一点。

**编辑 2017-06-29**：更新了代码，以便它还检查`HypervisorPresent`属性的值。

**编辑 2018-02-05**：删除了对该`HypervisorPresent`属性的检查，因为它不正确。如果在 hyper-V 服务器上的主机 O/S 上运行，此属性可能返回 true。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-01-31T06:15:55.003

根据[Virtual PC Guy](http://blogs.msdn.com/virtual_pc_guy/)的博文“[检测微软虚拟机](http://blogs.msdn.com/virtual_pc_guy/archive/2005/10/27/484479.aspx)”，可以使用 WMI 来检查主板的制造商。在 PowerShell 中：

```
 (gwmi Win32_BaseBoard).Manufacturer -eq "Microsoft Corporation" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-14T15:07:57.940

此 C 函数将检测 VM 来宾操作系统：（在 Windows 上测试，使用 Visual Studio 编译）

```
#include <intrin.h>

    bool isGuestOSVM()
    {
        unsigned int cpuInfo[4];
        __cpuid((int*)cpuInfo,1);
        return ((cpuInfo[2] >> 31) & 1) == 1;
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-21T12:26:55.020

Jay Abuzi 在 powershell 中展示了解决方案。这与 ac# 函数相同：

```
 /// <summary>
    /// Detect if this OS runs in a virtual machine
    /// 
    /// http://blogs.msdn.com/b/virtual_pc_guy/archive/2005/10/27/484479.aspx
    /// 
    /// Microsoft themselves say you can see that by looking at the motherboard via wmi
    /// </summary>
    /// <returns>false</returns> if it runs on a fysical machine
    public bool DetectVirtualMachine()
    {
        bool result = false;
      const  string  MICROSOFTCORPORATION ="microsoft corporation";
        try
        {
            ManagementObjectSearcher searcher =
                new ManagementObjectSearcher("root\\CIMV2","SELECT * FROM Win32_BaseBoard");

            foreach (ManagementObject queryObj in searcher.Get())
            {
               result =  queryObj["Manufacturer"].ToString().ToLower() == MICROSOFTCORPORATION.ToLower();
            }
            return result;
        }
        catch (ManagementException ex)
        {
            return result;
        }
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-13T12:20:20.117

对于较低级别的测试，我建议查看 ScoopyNG [1]。它是已知的低级、运行良好的 vm 检测方法的集合，尽管有些过时。

如果你真的想依赖其他东西，比如安装的工具（VM* Additions），这些更容易“伪造”。

这篇 [2] 博客文章也有一个很好的概述，从低级 asm 的东西，检查特定的 DLL、文件路径和注册表项来检查。

[1] [http://trapkit.de/research/vmm/scoopyng/index.html](http://trapkit.de/research/vmm/scoopyng/index.html)

[2] [http://securitykitten.github.io/vm-checking-and-detecting/](http://securitykitten.github.io/vm-checking-and-detecting/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-02-01T05:15:56.743

我发现确定我的 C# 应用程序是否在 vmware VM 上运行的最简单方法是检查 NIC 卡的 MAC 地址。如果它是 VMware VM，它将始终是：00:50:56:XX:YY:ZZ

您可以通过此处解决的 NIC 进行枚举[。](https://stackoverflow.com/questions/218284/read-mac-address-from-network-adapter-in-net)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-12T15:11:22.407

```
public static bool isVirtualMachine()
{
    const string MICROSOFTCORPORATION = "microsoft corporation";
    const string VMWARE = "vmware"; 

    foreach (var item in new ManagementObjectSearcher("Select * from Win32_ComputerSystem").Get())
    {
        string manufacturer = item["Manufacturer"].ToString().ToLower();
        // Check the Manufacturer (eg: vmware, inc)
        if (manufacturer.Contains(MICROSOFTCORPORATION) || manufacturer.Contains(VMWARE))  
        {
            return true;
        }

        // Also, check the model (eg: VMware Virtual Platform)
        if (item["Model"] != null)
        {
            string model = item["Model"].ToString().ToLower();
            if (model.Contains(MICROSOFTCORPORATION) || model.Contains(VMWARE)) 
            {
                return true;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-07T21:57:27.947

此 C++ 代码将检测 Vmware 产品，例如 express、esx、fusion 或工作站

```
// VMWareDetector.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "windows.h"
#include <conio.h>
void CheckVM(void); 
int main()
{
    CheckVM(); 
    _getch(); 
    return 0;
}

void CheckVM(void)
{
    unsigned int    a, b;

    __try {
        __asm {

            // save register values on the stack
            push eax
            push ebx
            push ecx
            push edx

            // perform fingerprint
            mov eax, 'VMXh' // VMware magic value (0x564D5868)
            mov ecx, 0Ah // special version cmd (0x0a)
            mov dx, 'VX' // special VMware I/O port (0x5658)

            in eax, dx // special I/O cmd

            mov a, ebx // data 
            mov b, ecx // data (eax gets also modified
                       // but will not be evaluated)

                       // restore register values from the stack
                       pop edx
                       pop ecx
                       pop ebx
                       pop eax
        }
    }
    __except (EXCEPTION_EXECUTE_HANDLER) {}
    printf("\n[+] Debug : [ a=%x ; b=%d ]\n\n", a, b);
    if (a == 'VMXh') { // is the value equal to the VMware magic value?
        printf("Result  : VMware detected\nVersion : ");
        if (b == 1)
            printf("Express\n\n");
        else if (b == 2)
            printf("ESX\n\n");
        else if (b == 3)
            printf("GSX\n\n");
        else if (b == 4)
            printf("Workstation\n\n");
        else
            printf("unknown version\n\n");
    }
    else
        printf("Result  : Not Detected\n\n");
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-15T17:05:32.563

请记住，您不应该只检查**流行的 VM 型号、wmi 中的制造商名称**，还应该检查现实和虚拟化之间的差异。
VM没有太多功能。
**1)[检查 CPU 温度信息是否可用](https://evasions.checkpoint.com/techniques/hardware.html#check-if-cpu-temperature-information-is-available)**

```
wmic /namespace:\\root\WMI path MSAcpi_ThermalZoneTemperature get CurrentTemperature
//On Real PC
//CurrentTemperature
//3147

//On VM
//Node - Admin
//Error:
//Description not supported 
```

在 vmware、virtualbox、windows server、app.any.run 沙箱上测试。

**2) Win32_PortConnector**

```
Get-WmiObject Win32_PortConnector
//On Vm it is null

//On real pc it looks something like that
Tag                         : Port Connector 0
ConnectorType               : {23, 3}
SerialNumber                :
ExternalReferenceDesignator :
PortType                    : 2 
```

# ms-office - 在 PowerPoint 中捕获对象的 MouseOver

> ID：498373
> 
> 赞同：1
> 
> 时间：2009-01-31T06:03:37.040
> 
> 标签：ms-office, powerpoint

我可以在 PowerPoint 中以某种方式捕获一个对象的鼠标悬停吗？

在我的 PowerPoint 插件中，我希望能够知道鼠标何时在哪个对象上。这些对象不是 activex，它们是任何 powerpoint 的内置标准对象（图片等）。

我需要在演示的设计模式下执行此操作，而不是在运行/演示模式下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-31T06:12:14.590

我不确定这是否是您想要的，但[这里](http://www.pptworkbench.com/html/mouse_over_images.htm)有一篇文章展示了如何使用鼠标悬停开始动画

# amazon-s3 - 有人可以向我解释一下普通 Web 服务中使用了哪些 Amazon Web Services 组件吗？

> ID：498391
> 
> 赞同：1
> 
> 时间：2009-01-31T06:13:45.507
> 
> 标签：amazon-s3, amazon-ec2, cloud

我想在 AWS 上运行的 Web 服务必须存储和检索用户数据，通过网站将其呈现给用户，并且需要能够每 10 分钟左右解析数千个站点的站点地图。我需要使用 AWS 的哪些组件，例如 S3、EC2 和 CloudFront。关于每个组件的用途的简短摘要会很好。:)

我特别不明白简单队列服务的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T06:29:03.557

例如，您可以使用 EC2（按需、可扩展、VPS）来托管实际的应用程序，并使用 S3（网络存储）来存储数据。您可能不需要 Cloudfront（地理优化的内容镜像）。

我们使用 SQS（简单队列服务）对我们希望异步执行的任务进行排队，即不让用户等待它们完成。事实证明，如果您的网站流量很小，SQS 就会变得非常昂贵，因此我们很快就会在我们自己的一个盒子上处理排队问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T17:45:41.053

您可能想要查看的另一项服务是 Elastic Block Store (EBS)，它为 EC2 实例提供持久存储。如果您关闭实例，您使用实例获得的默认存储*不会保留，因此我建议您将所有关键数据存储在 EBS 上，以便在实例出现故障时您可以快速恢复。*

SimpleDB 也可能对您的服务有用。

查看 AWS 的[Wikipedia 条目](http://en.wikipedia.org/wiki/Amazon_Web_Services)以了解有关每项服务的更多信息。

# c# - CS0120：非静态字段、方法或属性“foo”需要对象引用

> ID：498400
> 
> 赞同：336
> 
> 时间：2009-01-31T06:22:02.667
> 
> 标签：c#

考虑：

```
namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //int[] val = { 0, 0};
            int val;
            if (textBox1.Text == "")
            {
                MessageBox.Show("Input any no");
            }
            else
            {
                val = Convert.ToInt32(textBox1.Text);
                Thread ot1 = new Thread(new ParameterizedThreadStart(SumData));
                ot1.Start(val);
            }
        }

        private static void ReadData(object state)
        {
            System.Windows.Forms.Application.Run();
        }

        void setTextboxText(int result)
        {
            if (this.InvokeRequired)
            {
                this.Invoke(new IntDelegate(SetTextboxTextSafe), new object[] { result });
            }
            else
            {
                SetTextboxTextSafe(result);
            }
        }

        void SetTextboxTextSafe(int result)
        {
            label1.Text = result.ToString();
        }

        private static void SumData(object state)
        {
            int result;
            //int[] icount = (int[])state;
            int icount = (int)state;

            for (int i = icount; i > 0; i--)
            {
                result += i;
                System.Threading.Thread.Sleep(1000);
            }
            setTextboxText(result);
        }

        delegate void IntDelegate(int result);

        private void button2_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }
    }
} 
```

为什么会出现这个错误？

> 非静态字段、方法或属性“WindowsApplication1.Form1.setTextboxText(int)”需要对象引用

* * *

## 回答 #1

> 赞同：470
> 
> 时间：2009-01-31T06:28:58.690

看起来您正在`setTextboxText`从静态方法（特别是）调用非静态成员（特别是属性或方法`SumData`）。您将需要：

1.  使被调用的成员也静态：

    ```
    static void setTextboxText(int result)
    {
        // Write static logic for setTextboxText.  
        // This may require a static singleton instance of Form1.
    } 
    ```

2.  `Form1`在调用方法中创建一个实例：

    ```
    private static void SumData(object state)
    {
        int result = 0;
        //int[] icount = (int[])state;
        int icount = (int)state;

        for (int i = icount; i > 0; i--)
        {
            result += i;
            System.Threading.Thread.Sleep(1000);
        }
        Form1 frm1 = new Form1();
        frm1.setTextboxText(result);
    } 
    ```

    传递一个实例也是`Form1`一种选择。

3.  使调用方法成为非静态实例方法（of `Form1`）：

    ```
    private void SumData(object state)
    {
        int result = 0;
        //int[] icount = (int[])state;
        int icount = (int)state;

        for (int i = icount; i > 0; i--)
        {
            result += i;
            System.Threading.Thread.Sleep(1000);
        }
        setTextboxText(result);
    } 
    ```

可以[在 MSDN](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-messages/cs0120)上找到有关此错误的更多信息。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-01-07T20:28:21.277

对于这种情况，如果您想要获得表单的控件并收到此错误，那么我为您提供了一点旁路。

转到您的 Program.cs 并更改

```
Application.Run(new Form1()); 
```

到

```
public static Form1 form1 = new Form1(); // Place this var out of the constructor
Application.Run(form1); 
```

现在您可以使用

```
Program.form1.<Your control> 
```

另外：不要忘记将您的 Control-Access-Level 设置为 Public。

是的，我知道，这个答案不适合问题调用者，但它适合对控件有这个特定问题的谷歌用户。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-01-31T08:40:21.263

您启动一个运行静态方法的线程`SumData`。但是，`SumData`调用`SetTextboxText`不是静态的。因此，您需要一个表单实例来调用`SetTextboxText`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-01T13:16:37.137

您的方法必须是静态的

```
static void setTextboxText(int result)
{
    if (this.InvokeRequired)
    {
        this.Invoke(new IntDelegate(SetTextboxTextSafe), new object[] { result }); 
    }
    else
    {
        SetTextboxTextSafe(result);
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-27T02:34:38.850

感谢@COOLGAMETUBE 告诉我最终对我有用的东西。他的想法很好，但是在创建表单后调用 Application.SetCompatibleTextRenderingDefault 时我遇到了问题。因此，稍作改动，这对我有用：

```
 static class Program
{
    public static Form1 form1; // = new Form1(); // Place this var out of the constructor `/// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(form1 = new Form1());
    }
}` 

            回答 #6

赞同：4

时间：2019-06-03T15:17:12.903

我实际上得到了这个错误，因为我正在检查 InnerHtml 是否有一些动态生成的内容 - 即 runat=server 的控件。

为了解决这个问题，我不得不删除我的方法中的“静态”关键字，它运行良好。

            回答 #7

赞同：3

时间：2013-01-12T12:20:28.720

从我的角度来看，你给一个文本框一个空值并在 a 中返回，`ToString()`因为它是一个静态方法。您可以将其替换为  `Convert.ToString()`可以启用空值的。

            回答 #8

赞同：2

时间：2021-10-01T10:19:07.543

使函数静态。这必须解决你的问题。

            回答 #9

赞同：1

时间：2021-05-02T00:05:34.397

您的问题的本质和解决方案是：

```
using System;

namespace myNameSpace
{
    class Program
    {
        private void method()
        {
            Console.WriteLine("Hello World!");
        }

        static void Main(string[] args)
        {
            method();//<-- Compile Time error because an instantiation of the Program class doesnt exist
            Program p = new Program();
            p.method();//Now it works. (You could also make method() static to get it to work)
        }
    }
} 
```

        windows - 如何研究“冻结”Windows系统的问题

ID：498409

赞同：4

时间：2009-01-31T06:28:28.487

标签：windows, debugging, system

**这不是一个新手问题**：

我运行 Windows Vista 的台式计算机有时会死机。冻结持续约 5-20 秒后，系统恢复正常，就像什么都没发生一样。这种情况经常发生（我可以放心地预计这会在 30 分钟内发生）。在冻结期间，我可以移动鼠标光标，但是切换到不同的应用程序不起作用。按键和鼠标点击被缓冲，并在系统解冻后应用。我相信这与驱动程序不兼容，但知道会很有趣。

所以我的问题是：如何调试这种情况？考虑到我无法隔离一个进程来进行内存转储，或者即使我可以尝试转储 Explorer，我也无法控制将创建内存转储的进程。

**澄清**

我想既然这个问题被误解了，我会澄清一下；我不关心修复系统，我对如何调试系统代码感兴趣。您将如何调试系统资源？有没有办法在系统进程上执行类似 adplus -crash 的操作来创建异常转储（如果确实发生但被吞下）。或者有没有办法在启动期间启动调试器以确保它也允许监视驱动程序。我确信这是由驱动程序开发人员定期完成的，因此请查找一些信息。

帖木儿

            回答 #1

赞同：1

时间：2009-01-31T06:51:24.837

这种缺乏响应能力听起来不像是真正的冻结，因为您显然不必事后重新启动。这可能只是因为一个或另一个应用程序在一段时间内占用了 100% 的 cpu，从而阻止了系统上的所有活动。如果您运行 Windows 任务管理器或[进程资源管理器](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)，您可能会看到一个或另一个应用程序必须在一段时间内达到 100%。Process Explorer 很好，因为它显示了更多的服务和应用程序。

            回答 #2

赞同：1

时间：2009-01-31T07:21:52.263

首先要从系统事件日志开始。查看是否是磁盘无响应问题或是否有其他问题。

            回答 #3

赞同：0

时间：2009-01-31T06:40:51.303

取出所有不需要的东西（声卡、网卡、连接的打印机、相机等）。

运行一段时间，如果问题没有发生，它是这些设备之一，或者它们之间的冲突。

如果仍然发生，请走得更远；卸下鼠标和键盘并使用远程桌面控制计算机，或尝试更换显卡。

虽然它对 Windows 用户没有帮助，但我想提一下[Linux Magic SysRq](http://en.wikipedia.org/wiki/Magic_SysRq_key)功能，它有时可以提供帮助。

            回答 #4

赞同：0

时间：2009-01-31T07:32:53.210

许多[Sysinternals](http://technet.microsoft.com/en-us/sysinternals/default.aspx)实用程序（例如 Process Explorer 和 Process Monitor）可能有助于隔离导致问题的原因。

但是，如果您真的想**调试**问题，只需查看[适用于 Windows 的调试工具](http://www.microsoft.com/whdc/DevTools/Debugging/default.mspx)，尤其是[WinDbg](http://msdn.microsoft.com/en-us/library/cc266321.aspx)。

        data-binding - Expression Blend 没有在 CLR 对象中列出我的应用程序的对象

ID：498422

赞同：3

时间：2009-01-31T06:49:06.137

标签：data-binding, expression-blend

我正在关注有关使用 Visual Studio / Expression Blend 进行数据绑定的视频教程。在本教程中，当演示者单击“+CLR 对象”按钮时，会列出应用程序的自定义对象，但在我这样做时，我的应用程序对象并未列出。

我需要做什么才能在此处列出我的应用程序对象？

            回答 #1

赞同：3

时间：2009-01-31T12:26:11.760

你有项目之间的参考吗？似乎子项目只是缺少对父项目的引用，因此可以拾取它们。

            回答 #2

赞同：2

时间：2009-06-18T14:42:23.523

您还需要确保如果您使用参数化构造函数，您的对象也有一个默认构造函数 - 这个问题让我有点生气，直到我意识到这一点。  

```
public class MyThing{

private int _item;

//If this is the only constructor Expression does not show it up
public MyThing(int item){
   _item = item;
}

//Expression will only list your object if you add this constructor 
//when you also have parameterised constructors

public MyThing(){}

} 
```

            回答 #3

赞同：1

时间：2009-02-04T21:43:55.593

我有同样的问题。我没有公开我的 C# 代码中的类。

我有这个：

我的班级

需要这个：

公共课 MyClass

        redmine - Mylyn 和 Redmine 集成

ID：498426

赞同：26

时间：2009-01-31T06:56:32.033

标签：redmine, mylyn

我试图让 Mylyn 和 Redmine 一起工作，这样我就可以在 Eclipse 中管理任务。我在 redmine wiki [http://www.redmine.org/wiki/redmine/HowTo_Mylyn](http://www.redmine.org/wiki/redmine/HowTo_Mylyn)上看到了这个，但我认为它适用于旧版本的 Mylyn。

我找不到 Mylyn 的通用 Web 连接器插件，但有这个 Web 模板插件。我认为它取代了通用 Web 连接器。但这与 Redmine wiki 上发布的屏幕截图完全不同。没有任务 URL、新任务 URL 等。

            回答 #1

赞同：34

时间：2009-06-02T13:56:14.877

这是您要查找的内容：

[http://sourceforge.net/projects/redmin-mylyncon/](http://sourceforge.net/projects/redmin-mylyncon/)

专门用于 RedMine 的 Mylyn 连接器。它适用于 eclipse ganymede。

更新站点为：[http ://redmin-mylyncon.sourceforge.net/update-site/N/](http://redmin-mylyncon.sourceforge.net/update-site/N/)

            回答 #2

赞同：7

时间：2011-09-15T07:44:02.517

以下是在 Eclipse Mylyn 和 Redmine 之间执行集成的步骤。我假设已经安装了 Eclipse、Mylyn 和 Redmine，后者在 $REDMINE_HOME 的某个位置。使用 Eclipse 3.7 和 Redmine 1.2.1 测试。

总之，您需要安装一个 Eclipse 插件和一个 Redmine 插件。

1.  转到 $REDMINE_HOME/vendor/plugins 并运行

    `git clone git://redmin-mylyncon.git.sourceforge.net/gitroot/redmin-mylyncon/redmine-mylyn-connector`

2.  （重新）启动服务器，并在管理/插件下的 Redmine 中列出 Mylyn 连接器插件

3.  再次在 Redmine 中，在 Administration/Settings/Authentication 下，选中“Enable REST web service”字段
4.  在 Eclipse 中，通过其更新站点安装 Eclipse 连接器

    [http://redmin-mylyncon.sourceforge.net/update-site/N/](http://redmin-mylyncon.sourceforge.net/update-site/N/)

5.  创建您的存储库并检查它是否连接，然后您就可以开始了！

            回答 #3

赞同：5

时间：2009-03-04T11:55:18.600

请参阅本手册。 
[http://wiki.eclipse.org/index.php/Mylyn_Extensions](http://wiki.eclipse.org/index.php/Mylyn_Extensions)

日食菜单。帮助 -> 软件更新... -> 添加站点...

[http://download.eclipse.org/tools/mylyn/update/incubator](http://download.eclipse.org/tools/mylyn/update/incubator)

            回答 #4

赞同：5

时间：2012-07-01T14:45:04.293

[http://www.redmine.org/projects/redmine/wiki/HowTo_Mylyn](http://www.redmine.org/projects/redmine/wiki/HowTo_Mylyn) 
[http://danmunn.github.com/redmine_mylyn_connector/](http://danmunn.github.com/redmine_mylyn_connector/) 
[https://github.com/danmunn/redmine_mylyn_connector](https://github.com/danmunn/redmine_mylyn_connector)

截至 2012 年 7 月，现在有一个新的专用 Redmine-Mylyn-Connector 正在为 Redmine 2.x 积极开发！（必须承认，我还没有测试过。）

我正在测试可以在 sourceforge 上找到的 1.x 连接器，完成后我将编辑这篇文章。

编辑：

mylyn-plugin 的更新站点来自已接受发布作品中的链接。以及用于 redmine 安装的 mylyn-connector。（用1.3.2安装测试，安装后别忘了重启web服务器。；））

但是这两件事都没有解决......一旦安装了 mylyn-connector，网络界面就不再工作了。;(

EDIT2：

特殊连接器适用于 2.x，Mylyn 终于看起来合适了。

[http://danmunn.github.com/redmine_mylyn_connector/](http://danmunn.github.com/redmine_mylyn_connector/) redmine 服务器插件。

[http://kenjiru.ro/blog/2012/02/install-the-redmine-mylyn-connector-for-eclipse](http://kenjiru.ro/blog/2012/02/install-the-redmine-mylyn-connector-for-eclipse)另一个服务器插件链接和eclipse连接器插件

[会是这个](http://mattanjakern.de/wp-content/uploads/2011/05/mylyn-redmine1.png)样子。

            回答 #5

赞同：4

时间：2011-11-26T13:10:09.587

截至昨天，Sven 已经关闭了更新站点（如果你去那里，你会发现什么），因为有人向 Sourceforge 报告了他（见[https://sourceforge.net/tracker/?func=detail&aid=3441532&group_id=228995&atid= 1075435](https://sourceforge.net/tracker/?func=detail&aid=3441532&group_id=228995&atid=1075435)）。

因此，Eclipse 现在没有可用的二进制文件。有谁知道获取这些插件的替代方法？我不知道如何编译。

GIT 和 SVN 存储库在那里，但我很伤心，我不是 Java 程序员。任何人都可以为 Sven 提供一个可以将二进制文件存储为更新的站点吗？

            回答 #6

赞同：2

时间：2013-09-24T14:17:52.113

用于检索 redmine mylyn 连接器

[https://github.com/ljader/redmine-mylyn-plugin](https://github.com/ljader/redmine-mylyn-plugin)

在 eclipse juno 4.2“安装新软件”和本地存档中，如本文所示：
[如何从 .zip 安装 Eclipse 插件](https://stackoverflow.com/questions/5482554/how-to-install-plugin-for-eclipse-from-zip)

            回答 #7

赞同：1

时间：2010-10-22T03:11:54.263

也是 redmine 的好读物。

如何将 Mylyn 存储库连接到 Redmine：
 [http ://www.redmine.org/wiki/1/HowTo_Mylyn](http://www.redmine.org/wiki/1/HowTo_Mylyn)

            回答 #8

赞同：0

时间：2011-06-21T20:54:41.917

download.eclipse.org/tools/mylyn/update/incubator 将不再起作用，对于新的更新站点，请查看[http://www.eclipse.org/mylyn/downloads/](http://www.eclipse.org/mylyn/downloads/)

可以通过[http://download.eclipse.org/mylyn/incubator/3.5找到 Web 连接器](http://download.eclipse.org/mylyn/incubator/3.5)

        c# - 如何在这样的设置中使用 IoC？有没有更好的方法来测试这个？

ID：498428

赞同：4

时间：2009-01-31T07:01:07.937

标签：c#, .net, tdd, inversion-of-control

我正在构建一个博客引擎来测试一些概念，例如我们的 TDD 和使用控制反转......我想出了一个设置，我将拥有一个通用的 IBlogRepository 接口，这样我就可以同时支持 SQL 和 XML。

```
public interface IBlogRepository : IRepository
{
    Post GetPostById(Guid postId);
    Post GetPostByFriendlyUrl(string friendlyUrl);

    List<Post> GetPostsByAuthor(string userName);       
    List<Post> GetPostByTags(params string[] tags);
    List<Author> Authors { get; }

    void Delete(Post post);
    void Delete(Comment comment);
    void Save(Post post);
    void Save(Comment comment);
} 
```

问题是 XML 存储库需要与数据库不同的资源......这是构造函数：

```
 public XmlBlogRepository(string dataPath, IFileReader fileReader, IDirectoryReader directoryReader, ILogger logger)
    {
        this.dataPath = dataPath;
        this.fileReader = fileReader;
        this.directoryReader = directoryReader;
        this.Logger = logger;
    } 
```

SQL 博客存储库不需要 fileReader、directoryReader 和 dataPath。

这使得执行控制反转来加载 IBlogRepository 的问题变得不可能，并且由于它们具有完全不同的 ctor，因此也很难通用地使用它们。

我必须传递它们的原因是，如果我只使用 File.Open/Directory.GetFiles，那么如果硬盘驱动器上没有 XML 文件，我将无法对类进行单元测试。

            回答 #1

赞同：7

时间：2009-01-31T07:24:49.233

我不明白为什么您的两个 IBlogRepository 实现具有不同的ctor签名这一事实使IoC“不可能”；相反，这是 IoC 中的常见场景。解决方法是您的 IoC 框架（并且只有您的 IoC 框架）负责调用所需 IBlogRepository 实现的 ctor。因此，您的 IoC 配置文件（或您使用的任何其他配置方法）知道正在使用哪个实现（毕竟必须这样做），但 IBlogRepository 服务的消费者只能通过其接口访问它。

            回答 #2

赞同：1

时间：2009-01-31T07:08:22.120

我认为提供者将通过实施提供者来满足您的需求，您将在其中包装资源

这里有一个不错的[链接](http://dotnetslackers.com/articles/designpatterns/HowToWriteAProviderModel.aspx)

        design-patterns - 你最喜欢的异步模式是什么？

ID：498429

赞同：3

时间：2009-01-31T07:08:19.983

标签：design-patterns, asynchronous

我目前正在尝试将 CCR 作为异步编程模型。在过去，我使用了标准的开始/结束方法。我主要在 VB.net 中进行开发，并且一直在期待 Yield/Enumerator 技巧。

你最喜欢的异步模式是什么？

            回答 #1

赞同：2

时间：2009-01-31T07:13:46.867

[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式。

            回答 #2

赞同：1

时间：2009-01-31T07:17:13.413

[异步编程模型](http://msdn.microsoft.com/en-us/magazine/cc163467.aspx)

            回答 #3

赞同：0

时间：2009-01-31T08:17:17.363

F#[异步工作流](http://blogs.msdn.com/dsyme/archive/2007/10/11/introducing-f-asynchronous-workflows.aspx)，或来自其他 .NET 语言的类似内容，使用 LINQ，如

[http://weblogs.asp.net/podwysocki/archive/2008/10/15/functional-c-implementing-async-computations-in-c.aspx](http://weblogs.asp.net/podwysocki/archive/2008/10/15/functional-c-implementing-async-computations-in-c.aspx)

            回答 #4

赞同：0

时间：2009-02-03T19:20:21.267

生产者消费者模式

[http://zone.ni.com/devzone/cda/tut/p/id/3023](http://zone.ni.com/devzone/cda/tut/p/id/3023)

[http://www.crystalclearsoftware.com/soc/coroutine/coroutine/producer_consumer1.html](http://www.crystalclearsoftware.com/soc/coroutine/coroutine/producer_consumer1.html)

            回答 #5

赞同：0

时间：2012-05-22T05:09:16.410

[数据流编程模型](http://en.wikipedia.org/wiki/Dataflow_programming)及其最有趣的特例，[Actor模型](http://en.wikipedia.org/wiki/Actor_model)

        c++ - 解决“类内只能初始化静态常量整数数据成员”编译错误

ID：498433

赞同：6

时间：2009-01-31T07:12:08.353

标签：c++, visual-studio, compiler-errors

以下用于创建全局对象会导致编译错误。

```
#include "stdafx.h" 
#include <iostream> 

using namespace System; 
using namespace std;    
#pragma hdrstop 

class Tester;

void input();

class Tester
{
    static int number = 5;

public:

    Tester(){};
    ~Tester(){};

    void setNumber(int newNumber)
    {
        number = newNumber;
    }

    int getNumber()
    {
        return number;
    }
}

Tester testerObject;

void main(void)
{
    cout << "Welcome!" << endl;

        while(1)
        {
            input();
        }
}

void input()
{
    int newNumber = 0;

    cout << "The current number is " << testerObject.getNumber();
    cout << "Change number to: ";

        cin >> newNumber;

    cout << endl;

    testerObject.setNumber(newNumber);

    cout << "The number has been changed to " << testerObject.getNumber() << endl;
} 
```

以下是编译错误：

```
1>------ Build started: Project: test, Configuration: Debug Win32 ------
1>Compiling...
1>test.cpp
1>.\test.cpp(15) : error C2864: 'Tester::number' : only static const integral data members can be initialized within a class
1>.\test.cpp(33) : error C2146: syntax error : missing ';' before identifier 'testerObject'
1>.\test.cpp(33) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>.\test.cpp(49) : error C2039: 'getNumber' : is not a member of 'System::Int32'
1>        c:\windows\microsoft.net\framework\v2.0.50727\mscorlib.dll : see declaration of 'System::Int32'
1>.\test.cpp(55) : error C2039: 'setNumber' : is not a member of 'System::Int32'
1>        c:\windows\microsoft.net\framework\v2.0.50727\mscorlib.dll : see declaration of 'System::Int32'
1>.\test.cpp(57) : error C2039: 'getNumber' : is not a member of 'System::Int32'
1>        c:\windows\microsoft.net\framework\v2.0.50727\mscorlib.dll : see declaration of 'System::Int32'
1>Build log was saved at "file://c:\Users\Owner\Documents\Visual Studio 2008\Projects\test\test\Debug\BuildLog.htm"
1>test - 6 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

1.  如何像我在这里尝试的那样正确创建全局类对象。
2.  以及如何解决“只能在类中初始化静态 const 整数数据成员”
3.  基本上我该如何修复其余的错误，以便编译它？

我喜欢在文件范围内声明全局类对象（我喜欢在文件范围内声明所有全局变量），因为当我必须创建单独的源文件并执行“extern”时，一切都会变得非常复杂，对我来说永远不起作用。虽然，我确实想最终弄清楚如何做到这一点......似乎我看到的每个教程都不会编译，除非它编译，否则我不知道如何重新创建它！

如果我可以编译它......那么我可以成功地学习如何做到这一点。因此，如果有人可以将上面的内容重写为它从字面上复制并粘贴到 Visual C++ Express 2008 中并且可以工作的地方，我最终将能够弄清楚如何重新创建它。看到这个问题的解决方案，我感到非常兴奋！只是我无法让全局对象正常工作！欢迎任何其他关于声明全局类对象的信息......或任何与此相关的信息！

            回答 #1

赞同：11

时间：2009-01-31T07:27:19.790

只需开始一一解决错误。很多错误只是从最初的错误级联而来，所以当只有几个错误时，看起来会有很多问题。只需从顶部开始：

```
1>.\test.cpp(15) : error C2864: 'Tester::number' : only static const integral data members can be initialized within a class 
```

您不能在类定义中初始化成员，除非它是静态、常量和其中一种整数类型。将“ `= 5`”从声明中去掉`number`。然后你需要有一个`Tester::number`类定义之外的定义，如下所示：

```
int Tester::number = 5; 
```

问题2：

```
1>.\test.cpp(33) : error C2146: syntax error : missing ';' before identifier 'testerObject' 
```

几乎就是它所说的（缺少分号错误可能有点不准确地说明分号应该在哪里） - 在`Tester`类的定义之后需要一个分号。

解决这些问题，您的编译问题就会消失。

关键是尝试从顶部一次处理一个编译器错误。如果你得到超过 3 个，你可能会忽略第三个左右之后的所有内容，因为初始错误只会导致编译进入杂草（如果它们是真正的错误，它们会在下一个再次出现无论如何编译）。

            回答 #2

赞同：1

时间：2009-01-31T07:30:15.993

*   错误 C2864：`const`向整数添加修饰符，或将初始化移到类外（如 中`class Tester { static int number; }; int Tester::number = 5;`）。后者似乎更适合您的情况。
*   错误 C2146：您在声明`class Tester { ... }`. 它应该是`class Tester { ... }`**`;`**

其他错误可能是由先前的错误引起的。他们应该在修复后自动修复。

作为旁注，我不认为你真的想要`static`你的成员上的修饰符。它似乎更适合实例字段。您仍然无法就地初始化它（这不是 C#），您必须将初始化移动到构造函数。例如：

```
class Tester {
    int number;
    static int staticNumber; // just to show you how to use a static field

public:
    Tester() : number(5) {}
    ~Tester() {} // I suggest you remove the destructor unless you need it

    int getNumber() { return number; }
    void setNumber(int value) { number = value; }

    static int getStaticNumber() { return staticNumber; }
    static void setStaticNumber(int value) { staticNumber = value; }
};

// initialize static members *outside* the class
int Tester::staticNumber = 5; 
```

            回答 #3

赞同：0

时间：2009-01-31T07:30:08.660

据此： http: [//publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp ?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr038.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr038.htm)

```
Tester testerObject;
int Tester::number = 5; 
```

我不是很肯定，但我认为其余的错误都来自那个问题。解决这个问题，看看它能让你走多远。

            回答 #4

赞同：0

时间：2009-01-31T14:31:03.303

此处已有的答案涉及您的代码无法编译的原因以及如何纠正该问题。但是，我对您对“外部”的评论很感兴趣。当您知道如何使用时，它非常容易使用。您在一个标头中声明了外部变量。然后你在一个文件中初始化它。任何其他文件都可以通过包含标题来引用该变量。例如

标头.h：

```
// ensure the file is only included once
#ifndef _HEADER_H
#define _HEADER_H

extern int foo;

#endif
// end file header.h 
```

头文件.cpp

```
#include "header.h"

int foo = 1;

// end file header.cpp 
```

主文件

```
#include "header.h"
#include <stdio.h>

int main(int argc, char** argv)
{
  printf("%d", foo);
  return 0;
}

// end file main.cpp 
```

虽然对全局变量使用静态类成员有助于适应 oo 设计方案，但它比必要的更复杂。如果您不必严格遵循oo，只需使用extern，它更容易且代码更少。

        windbg - 将 !dumpheap (windbg) 输出限制为 n 个对象

ID：498448

赞同：19

时间：2009-01-31T07:31:52.260

标签：windbg

当使用 windbg 并运行 !dumpheap 命令查看对象的地址时，如何限制特定数量的对象。[我发现的唯一方法是在博客http://dotnetdebug.ne​​t](http://dotnetdebug.net/2005/07/04/dumpheap-parameters-and-some-general-information-on-sos-help-system/) /2005/07/04/dumpheap-parameters-and-some-general-information-on-sos-help-system 上使用 CTRL+BREAK 和命令行[/](http://dotnetdebug.net/2005/07/04/dumpheap-parameters-and-some-general-information-on-sos-help-system/)

-l X - 仅打印每个堆中的 X 个项目，而不是所有对象。

显然 -l 在 SOS.dll 中不再存在

            回答 #1

赞同：9

时间：2009-01-31T08:15:21.690

你到底在找什么？在查看单个对象之前，通常会缩小感兴趣的区域。

–stat 开关显示堆上对象的每种类型的摘要。

**DumpHeap** [-stat] [-min ][-max ] [-thinlock] [-mt ] [-type ][start [end]]

*   -stat 选项将输出限制为统计类型摘要。
*   -min 选项忽略小于 size 参数的对象，以字节为单位。
*   -max 选项忽略大于 size 参数（以字节为单位指定）的对象。
*   -thinlock 选项报告 ThinLocks。有关详细信息，请参阅 SyncBlk 命令。
*   -mt 选项仅列出与指定 MethodTable 结构相对应的那些对象。
*   -type 选项仅列出类型名称是指定字符串的子字符串匹配的那些对象。

start 参数从指定的地址开始列出。end 参数在指定地址停止列出。

[参考](http://msdn.microsoft.com/en-us/library/bb190764.aspx)。

            回答 #2

赞同：9

时间：2010-10-19T21:14:36.523

您希望根据哪些标准限制输出数量？-l 选项仅根据行号限制输出。这是没用的：假设它只显示前 10 个对象，也许您要查找的对象甚至没有列出。

如果 WinDbgs 输出窗口的输出太长，请使用 .logopen 将对象转储到文件中，然后使用文本编辑器查看文件。

如果您对对象的外观有其他想法，则可以对所有对象执行循环

```
.foreach ( obj { !dumpheap -short -type MyType} ) 
```

然后决定`.if`您的对象是否符合此条件。

例如，我在大海捞针。我正在一个程序中搜索一个特定的哈希表，堆上有超过 3000 个哈希表。我尝试使用的命令是

```
.foreach ( obj { !dumpheap -short -type Hashtable }) {.if (poi(poi(${obj}+1c)) > 100) {!do ${obj}} } 
```

`1C`是哈希表的 count 成员的偏移量。

`100`是 Hashtable 至少应包含的项目数。

不幸的是，它并没有立即对 Hashtables 起作用，因为`!dumpheap -type`还列出了 HashtableEnumerators，它以某种方式使调试器崩溃。

要仅转储哈希表，请运行`!dumpheap -stat`并找出哈希表的方法表，然后使用`-mt <methodtable>`而不是运行命令`-type <classname>`，这给出

```
.foreach ( obj { !dumpheap -short -mt <MT of Hashtable> }) {.if (poi(poi(${obj}+1c)) > 100) {!do ${obj}} } 
```

        c++ - 遍历容器的最佳方法

ID：498455

赞同：1

时间：2009-01-31T07:40:12.960

标签：c++, iterator, containers

这两种迭代容器的方法的优点/缺点是什么/您更喜欢哪一种以及为什么：

```
for (MyClass::iterator i = m.begin(), e = m.end() ; i != e ; i++)
{
    // ...
} 
```

或者

```
for (MyClass::iterator i = m.begin() ; i != m.end() ; i++)
{
    // ...
} 
```

附属问题：i++ 还是 ++i？为什么？

            回答 #1

赞同：5

时间：2009-01-31T08:09:26.910

If the iterator is non-trivial (ie. not a pointer), ++i is definitely faster as it doesn't involves a copy to a temporary, which may or may not be optimized out.

The first form is a little faster but could be wrong if you erase or insert things in the loop.

For simple iteration over a container I use

```
#define foreach BOOST_FOREACH // in some header

foreach(MyType &element, any_container) {
  // deal with element
} 
```

most of the time for succinctness and clarity.

            回答 #2

赞同：3

时间：2009-01-31T07:47:02.090

除非您关闭了优化，否则两者都是等效的。至于 i++ 或 ++i，++i 效率更高，因为它不涉及临时值。

            回答 #3

赞同：2

时间：2009-01-31T07:57:52.677

对于普通的 stl 迭代器，没有太大的区别，但是如果你的集合很复杂并且要求 end 很昂贵，那么只要求 end 一次可能会更快。

同样，对于 ++i 与 i++，当迭代器是一个复杂的类（而不仅仅是 stl 迭代器中的指针）时，++i 可能是一个更昂贵的操作，而 i++ 发生的是它正在递增迭代器但返回一个副本迭代器处于其先前状态。对于 ++i 它以当前状态返回迭代器，因此可以只返回对自身的引用。

通常最好只在探查器发现存在问题时才优化代码——最好让代码尽可能易于阅读。

            回答 #4

赞同：1

时间：2009-01-31T07:52:08.663

实际上，我总是做第二个，尽管有时我确实担心多次调用 end 会减慢速度。我的印象是这会被优化，但不确定。

并且 ++i 绝对是。它永远不会比 i++ 慢，如果有的话，它会更快。

            回答 #5

赞同：1

时间：2009-01-31T07:54:00.343

第一个更快，因为`end()`不是每次迭代都调用。不，优化器不能轻易地为你缓存它，因为它不知道容器的大小在这次迭代中是否发生了变化（因此最终移动了）。由于别名问题，这也适用于 const 容器。

`i++`返回 i 的副本，然后递增。`++i`递增，然后返回递增的值。因此，当您丢弃返回值时，请使用它，`++i`因为它需要做的工作更少（不复制）。优化器很可能会修复内联`i++`调用，因此它的速度与它一样快，`++i`但不要依赖它。

我？我用

```
for(int i = 0; i < m.size(); i++) {
    // ... do something with m[i]
} 
```

因为它是最短最清晰的。为什么`int`而不是`MyClass::size_type`？因为它更简单，到目前为止我从来不用担心边缘情况。为什么`i++`？因为对于基本类型，它总是被优化为`++i`，并且它对同事来说不那么混乱。作为奖励，我也可以将`i`其用作数值。使用迭代器，我必须保留一个单独的计数器，或者使用`std::distance`.

**obecalp**指出，这不适用于一半的标准容器，例如`list`and `map`。事实上，那些需要使用适当的迭代器。`iterator`相关地，在编写通用代码时，您应该始终使用 an 。

            回答 #6

赞同：1

时间：2016-11-18T21:26:57.810

The C++ "for every element in container" loop is the most efficient where the context doesn't call for iterative logic.

```
for(Item& i : Container)
{
     dosomething(i);
} 
```

or

```
for(const Item& i : Container)
{
     dosomething(i);
} 
```

            回答 #7

赞同：0

时间：2009-01-31T08:16:16.977

[Boost.Foreach](http://www.boost.org/doc/libs/1_37_0/doc/html/foreach.html) introduces a nice way:

```
#define foreach         BOOST_FOREACH
// ...
Container<Item> container;
// ...
foreach (Item item, container) {
  // do some stuff with the item
} 
```

        c# - 代码分析或代码审查的最佳工具

ID：498457

赞同：3

时间：2009-01-31T07:45:08.677

标签：c#, asp.net

您建议使用哪种代码分析器或代码审查工具，

用于分析**DotNet 2.0 & 3.5**代码并获取

*所有类、方法、属性、实例、定义、数据库及其与代码的关系，*

我想获得有关代码和项目**的可打印信息，**

（*这里我不是指测试代码和结构的工具*）

有没有类似规格的？

            回答 #1

赞同：7

时间：2009-01-31T08:06:22.487

也许[NDepend](http://www.ndepend.com/)？

            回答 #2

赞同：3

时间：2009-01-31T08:12:50.757

[反射器](http://www.red-gate.com/products/reflector/)非常好而且免费。[Code Metrics](http://www.codeplex.com/reflectoraddins/Wiki/View.aspx?title=CodeMetrics&referringTitle=Home)插件将为您提供高质量的指标。这可能无法为您提供所需的打印准备。

[doxygen](http://www.doxygen.org/)可以分析您的源代码和输出文档，列出所有类、命名空间、调用树、依赖项等。这应该给您可打印性。

            回答 #3

赞同：1

时间：2009-01-31T08:24:10.890

[FxCop](http://msdn.microsoft.com/en-us/library/bb429476(vs.80).aspx)

它在以下方面进行了分析： * 正确性 * 库设计 * 本地化 * 命名约定 * 性能 * 安全性

            回答 #4

赞同：0

时间：2009-02-02T17:55:47.897

您应该查看 Atlassian Crucible 以进行同行代码审查。在线进行评论可以让他们继续前进，同时尽量减少对您团队的干扰。

[http://www.atlassian.com/software/crucible/](http://www.atlassian.com/software/crucible/)

        ruby-on-rails - 在 ruby onrails 中创建插件

ID：498458

赞同：1

时间：2009-01-31T07:45:50.577

标签：ruby-on-rails, plugins

我正在创建一个涉及控制器、模型和视图的插件。虽然我可以将这些文件从供应商/插件目录分别移动到应用程序/控制器、模型和视图。

现在我可以通过将它们复制到 vendor/plugins/plugin_name/lib 的 lib 文件夹中来运行我的控制器和模型，并且它们可以直接访问，但是我的视图没有从那里初始化，所以我需要一种可以在供应商中制作我的视图的技术/plugins/plugin_name/lib/views 无需复制即可被 Rails 框架访问。

我正在尝试将它们添加到 actionview，但不知道该怎么做。

请指导我。

            回答 #1

赞同：2

时间：2009-01-31T07:49:22.427

您可以通过多种方式将插件的视图目录添加到 ActionView 的“搜索路径”中，但处理所有这些的最简单方法是使用 Rails Engines 插件之类的东西来为您完成所有艰苦的工作。

            回答 #2

赞同：0

时间：2009-01-31T21:06:59.400

如果您希望通过插件添加模型、视图和控制器，请查看 Desert：http: [//github.com/pivotal/desert](http://github.com/pivotal/desert/tree/master)。我不太喜欢这种方法，但沙漠似乎对喜欢它的人有用。

        c++ - 在 Windows 上创建服务

ID：498460

赞同：1

时间：2009-01-31T07:48:39.713

标签：c++, windows-services

我无法在我的电脑上启动我的服务。我的代码基于这篇文章[http://www.gamedev.net/reference/articles/article1899.asp](http://www.gamedev.net/reference/articles/article1899.asp)

当我从我的 int main(int argc, char *argv[]) 调用 installService 时，它​​已成功注册（我可以在 msconfig 和 services.msc 中看到它）。然而它还没有开始。我通过 services.msv 手动启动服务，我收到错误“错误 2：系统找不到指定的文件”。为什么是这样？我在一分钟前注册了这些服务，我的外部 HD 仍然打开（这是当前存储的位置。当它准备好时，我会将非开发版本移动到 c:/）我做错了什么，还有其他教程吗？可以看看（我只找到通过谷歌链接的那个）

```
#define srvName "MyTestService_01312009"

void installService(char*path)
{
    SC_HANDLE handle = ::OpenSCManager( NULL, NULL, SC_MANAGER_ALL_ACCESS );
    SC_HANDLE service = ::CreateService(
        handle,
        srvName,
        "MyTestService_01312009b",
        GENERIC_READ | GENERIC_EXECUTE,
        SERVICE_WIN32_OWN_PROCESS,
        SERVICE_AUTO_START,
        SERVICE_ERROR_IGNORE,
        path,
        NULL,
        NULL,
        NULL,
        NULL,
        NULL
    );
}
void uninstallService()
{
    SC_HANDLE handle = ::OpenSCManager( NULL, NULL, SC_MANAGER_ALL_ACCESS );//?
    SC_HANDLE service = ::OpenService( handle, srvName, DELETE );
    if( service != NULL )
    {
        // remove the service!
        ::DeleteService( service );
    }
}

SERVICE_STATUS_HANDLE hStatus;
SERVICE_STATUS status;

/*
if( ::StartServiceCtrlDispatcher( dispatchTable ) == 0 )
{
    // if this fails, it's probably because someone started us from
    // the command line.  Print a message telling them the "usage"
}
*/
void WINAPI ServiceCtrlHandler( DWORD control )
{
    switch( control )
    {
    case SERVICE_CONTROL_SHUTDOWN:
    case SERVICE_CONTROL_STOP:
        // do shutdown stuff here

        status.dwCurrentState = SERVICE_STOPPED;
        status.dwWin32ExitCode = 0;
        status.dwCheckPoint = 0;
        status.dwWaitHint = 0;
        break;
    case SERVICE_CONTROL_INTERROGATE:
        // just set the current state to whatever it is...
        break;
    }

    ::SetServiceStatus( hStatus, &status );
}
void WINAPI ServiceDispatch( DWORD numArgs, char **args )
{
    // we have to initialize the service-specific stuff
    memset( &status, 0, sizeof(SERVICE_STATUS) );
    status.dwServiceType = SERVICE_WIN32;
    status.dwCurrentState = SERVICE_START_PENDING;
    status.dwControlsAccepted = SERVICE_ACCEPT_STOP;

    hStatus = ::RegisterServiceCtrlHandler( srvName, &ServiceCtrlHandler );

    // more initialization stuff here
    FILE *f = fopen("c:/testSrv.bin", "wb");
    ::SetServiceStatus( hStatus, &status );
}
SERVICE_TABLE_ENTRY dispatchTable[] =
{
    { srvName, &ServiceDispatch },
    { NULL, NULL }
}; 
```

            回答 #1

赞同：1

时间：2009-01-31T08:57:26.127

也许您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)找出问题所在。

启动它，并查找`NAME NOT FOUND`与服务启动相关的结果。

        html - 如何将用户输入的换行符从 TextArea 保存到数据库？

ID：498461

赞同：52

时间：2009-01-31T07:49:00.087

标签：html

如何将用户输入的换行符从`<textarea>`HTML 元素保存到数据库？

它总是删除换行符。

            回答 #1

赞同：104

时间：2018-02-08T08:18:31.140

`TextArea`HTML 元素保留数据库中的空白。

尝试在 Web 浏览器上显示时出现问题`\n`，这将失败。
要`\n`在 Web 浏览器中显示，请使用：

```
<p style="white-space: pre-line">multi-line text</p> 
```

            回答 #2

赞同：33

时间：2009-01-31T07:53:34.947

显示内容时需要将换行符转换为`<br />`标签，否则网络浏览器不会显示它们。这可能就是你认为他们没有得救的原因。如果您使用的是 PHP，请使用[nl2br()](http://php.net/nl2br)函数来执行此操作。在其他语言中，您可以进行字符串替换，将所有出现的 替换`"\n"`为`"<br />"`。

            回答 #3

赞同：21

时间：2015-11-23T14:36:32.707

只需将输出文本放在`<pre></pre>`标签之间，这将保留换行符。

            回答 #4

赞同：7

时间：2013-09-15T19:49:08.793

我刚学会使用 php 的[nl2br](http://www.php.net/manual/en/function.nl2br.php)函数，它对我来说很好用。我正在使用它来设置我的用户在从另一个用户发送电子邮件时如何接收电子邮件的样式。

            回答 #5

赞同：2

时间：2009-01-31T07:57:38.933

我从经验中知道，浏览器文本区域的表现不如人们想要的那么好，尤其是在换行方面。

您可以查看 javascript 是否能够在文本发送到服务器之前询问文本区域并找到换行符，从而以更格式的方式发送数据。但是在多个浏览器上进行这项工作所需的 javascript 调试量可能不值得付出努力。

也许您应该说您尝试捕获数据的格式。与跟踪换行符相比，获取数据可能有更好的方法——尽管换行符似乎很容易在用户输入中捕获。

            回答 #6

赞同：2

时间：2021-09-17T09:31:38.533

您的问题将使用“空白”属性解决：只需使用：

```
<textarea name="description" id="description" style="white-space: pre-wrap;"></textarea>
```

并继续你的工作。

            回答 #7

赞同：1

时间：2021-02-01T06:30:13.897

在将数据保存到数据库时使用 PHP`nl2br()`函数，如下所示`textarea`

```
<textarea 
    name="PostContent" 
    class="form-control" 
    rows="12" cols="30"
    id="PostContent" 
    required=""
    style="white-space: pre-wrap; text-indent: 50px;"
    >
</textarea>

$PostContent=$_POST["PostContent"];
$output =nl2br($PostContent); 
```

使用`$output`变量保存到数据库

            回答 #8

赞同：1

时间：2017-11-13T14:15:22.243

我注意到如果 textarea 位于 html 表单中，则可正常保存的易碎内容。但是，如果我使用没有任何形式的 textarea 并尝试在其中编辑长文本，插入换行符并通过 ajax 保存内容，它将作为合并文本保存到数据库中

            回答 #9

赞同：0

时间：2022-02-22T16:20:09.277

您可以在文本区域中添加文本并查看下面的格式化文本。

```
function ex() {
  const text = document.getElementById("description").value;
  const ss = document.getElementById("add");
  ss.textContent = text;
}
```

```
<textarea name="description" id="description" style="white-space: pre-wrap;"></textarea>
</br>
<button onclick="ex();">check</button>
</br>
<p style="white-space: pre-line" id="add"></p>
<style>
p {
 color: red;
 text-align: center;
} 
   </style>
```

jquery - jQuery 断言支持/防御性编程？

ID：498469

赞同：18

时间：2009-01-31T07:55:52.163

标签：jquery, debugging

jQuery 中是否有任何内置支持用于基本断言检查，主要是“预期的返回元素数量”之类的东西。

例如，我可能有这样一个简单的陈述：

```
 $("#btnSignup").click(function() {
     return validateForm();
 ); 
```

现在有很多原因`$("#btnSignup")`可能无法准确返回 1 项：

*   您输入错误的按钮 ID 名称
*   有人不小心改名了
*   页面上不存在
*   错误地有两个具有该 id 的元素
*   您正在使用 ASP.NET MVC，并且您不小心为按钮生成了 HTML，`HtmlHelper.Button(...)`而不是`HtmlHelper.Submit()`. 该`Button(...)`方法不会为按钮元素创建 ID。

现在在这种情况下（和许多情况下）我的应用程序根本无法工作，除非从选择器中返回一个项目。所以我总是想被告知是否`$("@#btnSignup")`不准确返回 1 项。那么我该怎么做呢？！如果这是一个例外或者最好是一个警告框，我很好 - 所以如果我没有在调试器中运行，那么我可以被告知。

我正在寻找类似这样的语法——它在功能上与 .NET 的[`Single()`](http://www.hookedonlinq.com/SingleOperator.ashx)扩展方法相似。

```
 $("#btnSignup").assertSingle().click(function() {
     return validateForm();
 );

 or 

 $("#btnSignup").assertSize(1).click(function() {
     return validateForm();
 ); 
```

我个人认为这段代码总是可以运行并告诉那里的任何人有问题。永远运行这个额外的代码显然不是[性能问题。](http://www.codinghorror.com/blog/archives/001218.html)`#btnSignup`在这种情况下，如果不存在，我的代码就会损坏。

我确信这个问题已经被打死了，并且有很多解决方案 - 但有人可以指出其中的一些吗？

我没有看到 jQuery 内置任何东西，我想知道最好的插件是什么。我宁愿在页面上放一些可以一直“监视”我并告诉我是否有问题的东西。我什至不会反对对错误报告服务进行 AJAX 调用。

            回答 #1

赞同：15

时间：2009-01-31T08:37:12.893

看起来没有内置任何东西。但是写一个扩展并不难：

```
$.fn.assertSize = function(size) { 
  if (this.length != size) { 
    alert("Expected " + size + " elements, but got " + this.length + ".");
    // or whatever, maybe use console.log to be more unobtrusive
  }
  return this;
}; 
```

用法与您在问题中提出的完全一样。

```
$("#btnSignup").assertSize(1).click(function() {
  return validateForm();
); 
```

请注意，即使断言失败，该函数仍以当前形式成功返回。您链接的任何内容仍将被执行。使用`return false;`而不是`return this;`停止链的进一步执行。

            回答 #2

赞同：8

时间：2011-06-29T12:20:24.273

对 Tomalak 答案的增强：抛出错误以停止执行，包括有问题的选择器并添加`assertSingle`变体。

```
$.fn.assertSize = function(size) {
    if (this.length != size) { 
        throw "Expected " + size + " elements, but selector '" + this.selector + "' found " + this.length + ".";
    }
    return this;
};
$.fn.assertSingle = function() { return this.assertSize(1); }; 
```

            回答 #3

赞同：3

时间：2013-02-28T17:19:52.977

我为此创建了一个插件：[jquery-assert](https://github.com/timbuethe/jquery-assert)。你可以像这样使用它：

在调用下一个函数之前，确保找到一个或多个元素：

```
$('#element01').assertFound().val('x') 
```

断言选择了 1 个元素：

```
$('#element01').assertOne(); // same as assertFound(1) 
```

确保在调用其他函数之前找到给定数量的元素：

```
$('.item').assertFound(10).find('p').assertFound(10).data(...) 
```

            回答 #4

赞同：-3

时间：2009-01-31T09:25:38.223

您可能想要[http://docs.jquery.com/Traversing/eq#index](http://docs.jquery.com/Traversing/eq#index)：

将匹配元素集减少为单个元素。

如果你的选择器没有返回任何对象，那么 jQuery 就不会运行链式代码，因为它没有运行它们的元素

        c# - Ajax Control Toolkit AutoCompleteExtender 剥离零并产生幻像值

ID：498474

赞同：1

时间：2009-01-31T07:58:13.313

标签：c#, asp.net, ajaxcontroltoolkit, autocompleteextender

我正在使用**Ajax Control Toolkit中的****AutoCompleteExtender**，它的行为很奇怪。 我的服务方法如下所示：

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public string[] getEJMaps(string prefixText, int count)
{   // method that returns the auto-suggest for the EJMaps positions
    string file_location = HttpContext.Current.Server.MapPath("~") + Utils.Settings.Get("attachments") + "ejmaps\\ejmaps.xml";
    XElement x = XElement.Load(file_location);
    string[] positions = (from p in x.Descendants("position") where p.Value.StartsWith(prefixText) orderby p.Value select p.Value).ToArray();
    if (positions.Count() == 0)
        return new string[] { "No Matching Results" };
    else return positions;
} 
```

它工作正常，如果我在测试页面中使用值**getEJMaps("00056", 4)**调用它，我会得到以下结果：

```
00056399
00056717
00056721
00056722
00056900
... 
```

这正是我想要的，但是当我将它绑定到**TextBox**并输入 00056 时，我得到了结果：

```
56399
24015
24017
56717
56721
... 
```

这显示了两个问题：

1.  我的零点到底怎么了？我怎样才能让他们回来？

2.  那些“240xx”数字是从哪里来的？xml 文档中甚至没有任何具有这些值的内容！

我对此完全感到困惑，请帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-02-03T21:39:54.310

您需要用引号将数组中的每个字符串括起来。例如，getEJMaps 应该返回一个如下所示的数组：

```
"00056399"
"00056717"
"00056721"
"00056722"
"00056900"
... 
```

不要忘记您需要使用 \ 转义引号

如果这修复了丢失的 0 而不是幻像值，请告诉我，我也会尽力帮助解决这个问题。我想它会的。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2010-11-29T10:59:02.727

```
SELECT   
'''' + CustomerShipTo + '''' AS CustomerShipTo   

FROM dbo.CustomerMaster 
```

这应该有用.....它对我有用

# php - PHP 一次只提供一个页面

> ID：498477
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-01-31T08:03:59.887
> 
>         
> 
> 标签：php

我正在运行 Apache 2 和 PHP 5.2 配置，由于某种原因，PHP 一次只能提供一个页面。

我有两个页面最能说明问题：test1.php 和 test2.php。

test1.php 里面只有 sleep(120)，test2.php 有一个简单的 'print "hello world";' 在里面。

如果 test1.php 当前正在浏览器窗口中加载，则加载 test2.php 的尝试会挂起，直到 test1.php 完成。

任何人都可以帮忙吗？这让我彻底疯了。

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-01-31T08:21:19.087

你在他们每个人中都做 session_start() 吗？如果是这样，这就是你的答案。对于长时间运行的进程，您将希望尽快结束会话，因为 session_start() 会锁定会话，直到您执行 session_commit() 或页面完成时隐式发生。

# c# - “集合初始值设定项的最佳重载 Add 方法 'System.Collections.Generic.List.Add(System.Guid)' 有一些无效参数”

> ID：498482
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T08:07:57.210
> 
>         
> 
> 标签：c#, .net, linq

```
List<PageInfo> subPages = new List<PageInfo>();
// ...
// some code to populate subPages here...
// ...
List<Guid> subPageGuids = new List<Guid> {from x in subPages select x.Id}; //doesn't work 
```

PageInfo 有一个类型为 Guid 的 Id 字段。所以 x.Id 是一个 System.Guid。

上面的第二行代码不起作用......我收到错误：

> 集合初始值设定项的最佳重载 Add 方法“System.Collections.Generic.List.Add(System.Guid)”有一些无效参数

和

> 参数“1”：无法从“System.Collections.Generic.IEnumerable”转换为“System.Guid”

我只用 C# 编码大约一个星期，但我以前做过类似的模式，从来没有遇到过这个问题。

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-01-31T08:18:07.860

我想你想要：

```
List<Guid> subPageGuids = new List<Guid>(from x in subPages select x.Id); 
```

（注意花括号改为普通大括号）

这将调用 List 的构造函数，该构造函数将 IEnumerable（这是 linq 查询返回的内容）作为参数。现在，您正在尝试使用[object initializer](http://msdn.microsoft.com/en-us/library/bb384062.aspx)的语法。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T08:17:12.107

它看起来像`Add()`被调用而不是被调用`AddRange()`。

您可以改用此语法：

```
List<Guid> subPageGuids = (from x in subPages select x.id).ToList(); 
```

或者

```
List<Guid> subPageGuids = new List<Guid>();
subPageGuids.AddRange(from x in subPages select x.id); 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T08:17:53.867

您在这里错误地使用了列表初始化程序。编译器希望您将单个 Guid 放在括号中，而不是 Guid 列表。这是您需要做的：

```
List<Guid> subPageGuids = (from x in subPages select x.Id).ToList(); 
```

# php - Mail() 不会在 windows server2003 中发送

> ID：498495
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T08:20:36.310
> 
>         
> 
> 标签：php, email, smtp, windows-server-2003

我在 windows server 2003 中安装了 PHP。除了邮件问题，所有文件都工作正常。SMTP 没有问题。因为我在同一台服务器上运行 JSP 项目。在那个邮件功能中工作正常。那么问题出在哪里？我该如何管理？我在 PHP 中将 SMTP 服务器设置为

```
; For Win32 only.
SMTP = localhost
smtp_port = 25 
```

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T08:45:06.823

SMTP 服务是否需要身份验证？也许 JSP 代码中有一个针对 SMTP 服务器进行身份验证的设置？您可以查看 JSP 代码以查看是否存在不同的 SMTP 配置。

另一个原因可能是 SMTP 只允许特定的发件人地址/域。PHP 和 JSP 应用程序的发件人地址是否不同？

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-21T12:24:38.983

如果您的 smtp 服务器没有暴露在防火墙后面并受到保护，您可以允许中继，这应该会处理好它。  

如果没有，则验证您可以使用 telnet 发送您想要的电子邮件

# biztalk - BizTalk 服务器中的 Web 服务场景

> ID：498498
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-01-31T08:21:30.133
> 
>         
> 
> 标签：biztalk

我是 BizTalk 服务器的新手，我想知道是否可以像 Web 服务器一样与 bizTalk 进行通信？我的场景是这样的。

我在 silverlight 中有一个应用程序，它将使用某些参数向 biztalk（Web 服务或 http）发送请求，biztalk 会将请求发送到第三方 Web 服务，第三方 Web 服务将响应 Biztalk，此响应将被发送回我的 Silverlight 应用程序。

这可能吗？如果是的话，任何人都可以给我一篇文章，帮助创建这种类型的应用程序。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T08:24:59.827

是 - 使用 SOAP 适配器和 MS 的 Web 服务端口
[Service Station](http://msdn.microsoft.com/en-us/magazine/cc163464.aspx)

您将需要创建一个编排和一个映射（如果两个服务之间的架构不同）来处理两个 Web 服务之间的实际消息传递。
[编排的第一步](http://www.codeproject.com/KB/biztalk/FootstepsInOrchestration.aspx)

[在 BizTalk 中创建地图](http://msdn.microsoft.com/en-us/library/ms945741.aspx)

和一个很好的 Web 服务指南和教程在  [这里](http://blogs.digitaldeposit.net/saravana/post/2006/12/20/BizTalk-2006-SOAP-Adapter-(Web-Service-call)-in-Messaging-Only-Scenario.aspx)

从 Silverlight 调用 biztalk 网络服务 
[http://weblogs.asp.net/jgalloway/archive/2007/06/14/calling-an-asmx-webservice-from-silverlight-use-a-static-port.aspx](http://weblogs.asp.net/jgalloway/archive/2007/06/14/calling-an-asmx-webservice-from-silverlight-use-a-static-port.aspx)

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-02-03T18:24:24.610

是的。您可以设置 HTTP 接收端口并处理来自 SilverLight 的直接 XML 消息，然后返回 SilverLight 需要的任何消息（确保使用 2-Way 接收/发送端口）。这里更大的问题是为什么？为什么不直接从 SilverLight 与远端 Web 服务通信？BizTalk 是否在这里增加了任何价值？您是否包含 BizTalk 作为未来功能的抽象层？BizTalk 是不是让消息内容更加丰富？

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-06T10:29:27.903

我的问题和 ChrisLoris 一样。为什么在这里使用 Biztalk？如果它只是调用服务 A 然后 B 并将信息传递回 silverlight 应用程序，我宁愿创建一个自定义的 .net .dll 来处理它。如果你真的想要一个工作流，你可以使用 WorkflowFoundation..

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-07-01T19:46:11.313

我找到了解决这个问题的方法。您需要在运行 biztalk 主机实例的用户的用户存储中安装证书，并使用 winhttpcertcfg 工具授予对证书私钥的访问权限。1) 使用 runas /user:<> mmc 打开 mmc 并将证书导入用户存储。2)winhttpcertcfg -g -c LOCAL_MACHINE\My -s <> -a <>

这两个步骤应该可以解决问题。

# javascript - 查找浏览器连接到 Web 服务器的时区

> ID：498503
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T08:28:14.690
> 
>         
> 
> 标签：javascript, timezone

我不喜欢网络（客户端/服务器）应用程序开发，但有一段时间有这个问题 -

如果某些网络浏览器（IE/Firefox）与某个网站建立连接，网络服务器是否可以找出客户端的时区，或客户端的当前本地时间，并在页面上显示相同的内容。

如果是，那么如何找到时区？客户端是否在此过程中扮演任何角色，或者服务器可以在没有客户端任何输入的情况下单独执行此任务？

-广告

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T08:30:56.773

是的。使用类似的东西：

```
<script type="text/javascript" language="javascript"> 
var tz =(new Date).getTimezoneOffset()/-60; 
</script> 
```

也可以看看：

[http://www.willmaster.com/library/javascript/determining-your-visitors-time-zone.php](http://www.willmaster.com/library/javascript/determining-your-visitors-time-zone.php) 
[http://www.tommylacroix.com/2008/02/25/detect-timezone-with-javascript/](http://www.tommylacroix.com/2008/02/25/detect-timezone-with-javascript/) 
[http ://www.webmasterworld.com/forum13/3922.htm](http://www.webmasterworld.com/forum13/3922.htm)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T11:48:16.253

服务器不能直接告诉客户端连接的时区，但你可以做的一个小技巧是在客户端使用 Javascript 来确定时区，然后以某种方式将其报告回服务器。这可以通过设置 cookie（服务器有权访问 cookie）、AJAX 请求或通过更改链接 href 以将时区插入 GET 参数来实现。

# 3d - 你如何编写一个 3d 游戏？

> ID：498507
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2009-01-31T08:31:17.240
> 
>         
> 
> 标签：3d

我一直想知道，游戏程序员如何将在外部 3d 建模软件（如 maya 或 3d max）中完成的游戏角色与用最喜欢的编程语言（例如 c 或 c++）完成的实际游戏逻辑联系在一起。

你如何将这两件事结合在一起，从角色建模到编程构建游戏的实际过程是什么？

一些让我想知道的事情是，你是从代码还是从 3d 模型编写角色动作？

例子会很高兴看到。

* * *

## 回答 #1

> 赞同：14
> 
>             
> 
> 时间：2009-01-31T08:47:55.227

大多数信息，如角色移动，实际上都存储在代码之外。这实际上是一个非常简单的过程：

1.  艺术家使用 Maya 或其他工具制作 3D 模型，然后将其保存在文件中。假设他们称之为“Gollum.3D”。

2.  现在“Gollum.3D”包含大量代表模型点、纹理和其他所有内容的数字。

3.  然后，程序代码读取文件“Gollum.3D”——它的所有模型点、纹理和所有内容，然后进行大量数学运算来计算在给定所有代表模型的数字的情况下 3D 场景的外观。

事实证明，游戏中的所有内容最终都与代码分开存储，而代码只是读取它并在游戏运行时将它们组合在一起。当我说一切时 - 我的意思是一切！所有文本、生命值和武器伤害量的统计数据、菜单屏幕图像，甚至人工智能都与脚本中的程序代码分开存储。程序代码最终做的很少。

您可能听说过有人为游戏制作模组。修改者是编辑位于程序代码之外的数据的人，这反过来会改变游戏以使其适合他们。他们只是利用了这样一个事实，即基本上关于游戏的所有内容（除了一些核心内容）都没有写入程序代码中。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-02-15T06:58:16.017

与最喜欢的答案不同，我敢说，如果您指的是拥有一个有动画的角色，这实际上是一项艰巨的任务。

最终结果将是启用通过脚本和配置文件绑定的大部分功能（换句话说 - 数据驱动），但构建这样一个系统的过程并不简单。

通常，您从外部建模器开始执行以下操作： 1\. 构建皮肤模型。2\. 构建骨架并根据权重等附加到皮肤上。 3\. 根据需要应用所有纹理和材料。4\. 导出到您的引擎。

现在您可以开始为这个角色骨架或任何类似的骨架构建动画库，如果您将其关联到多个（通常是骨架足够接近或模块化的情况）。一些动画将仅包含部分层次结构（以便能够仅混合部分动画 - 例如，下半身正在跑步，而上半身可以使用不同的动画或反向运动学 - 在跑步期间向敌人射击是一种很好的例子）。

现在终于到了代码部分。您需要构建一个系统，将动画与骨架相关联并正确渲染它。该系统还需要能够在动画和 IK 之间进行混合（例如 - 在站立和跑步之间转换），并且能够结合多个动画和部分动画 - 例如，行走（全身动画）、看着某人（IK对于上半身），同时挥手（IK 部分动画）和呼吸（部分动画）将结合 4 种不同的部分或全部混合。

我没有提到您需要构建导入器这一事实，并且动作和动作的动画之间也存在差异。动作可以有多个动画组合或随机选择 - 它们将通过数据映射文件关联。

我建议看一下 XNA——它有很多示例、导入器等等，并且包含很多库中的基本内容，因此您不必从头开始。正如人们还提到的 - Blender3D 是编辑器+的不错选择，因此 Torque 可能只是为了体验游戏引擎。

最后一句话-如果您要尝试一下，那不会是在公园里散步，但是嘿-非常有趣，结果会让您为自己感到自豪。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T08:58:56.047

查看[Blender 游戏引擎教程](http://www.blender.org/education-help/tutorials/game-engine/)，以及他们的[Project Apricot](http://www.yofrankie.org/about-apricot/)，这是一个使用 Blender 游戏引擎创建 3D 游戏的开放项目。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T09:53:53.173

3D 角色创建和 3D 游戏编程是两个不同的过程。

通常您在 3D 建模器（Blender、Maya、3D Studio Max 等）中雕刻您的 3D 角色，然后将该角色导出到文件（.obj、.md2 等），然后按顺序将代码写入您的 3D 游戏处理引擎中角色的导入。

虽然这听起来很困难，但[3D 游戏引擎](http://en.wikipedia.org/wiki/Game_engine)确实支持所有这些东西，而无需编写数百万行代码并重新发明轮子。

以 Ogre3D 为例，这是一个 3D 开源游戏引擎。您不必成为编程大师就可以在几分钟内启动并运行一个简单的示例。我建议你看看他们的[wiki](http://www.ogre3d.org/wiki/index.php/Main_Page)和[他们的](http://www.ogre3d.org/wiki/index.php/Ogre_Tutorials) [教程](http://www.ogre3d.org/wiki/index.php/DCC_Tutorials)。

例如[，这是](http://www.ogre3d.org/wiki/index.php/ArtisticallyDisabled)一个简单的教程，用于从 3D Studio Max 创建和导出简单模型并将它们导入 Ogre 3D

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T08:41:02.323

我自己没有很多游戏编程经验，但我发现 XNA 框架和资源非常有启发性。你可以在这里找到大量的例子和方法以及一个非常有用的论坛[http://creators.xna.com/en-US/](http://creators.xna.com/en-US/)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T08:56:14.507

动画可以在 3D 建模软件中完成，然后由代码根据游戏逻辑“运行”不同的动画。模型通过通用格式从建模软件进入游戏。例如，XNA 框架可以原生读取一些最常见的模型格式。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T10:34:42.407

您应该使用 3D 渲染引擎。其中很多都是免费的（[Ogre3D](http://www.ogre3d.org)是一个不错的选择），并且通常它们可以导入从通用建模软件创建的几乎任何类型的网格。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2010-05-19T18:33:08.240

访问 Unity3d.com，您将立即制作您的游戏。动画是在建模软件 Maya 等中完成的，但有些是在引擎中完成的。Unity 使物理学变得简单，您或多或少地创建了自己的世界并链接了对象的交互方式。

示例 - 您有一个相机 -> 您可以从 UI 设置相机以跟随主角和相机放置位置的 XYZ 变换。它也可以在视觉上完成。

看看它很有趣，而且代码比你想象的要少。从那里你当然可以编写自己的代码来做你自己独特的游戏。它很容易解释为编写脚本并将其拖到您希望脚本运行的对象上。

这是我所能得到的外行人。干杯。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2014-08-24T18:47:34.103

由于这个话题正在看到新的生命，我想我会做出贡献。我已经使用 Autodesk 3Ds Max 制作 3D 产品超过 12 年，并且更多地关注动画方面，但我知道 Autodesk 提供了一个广泛的类库，其中包含高级脚本模块和内置功能，其中包含编写 3D 的所有工具这个程序中的游戏。当然，您必须学习“Max Script”以及如何与诸如“Biped”、“Particle Flow”、“Havoc”现实模拟引擎等名称的此类内置包交互，更不用说渲染引擎（通常是默认的扫描线、Mental Ray、VRay）需要很多参数。

**如果您没有预算或喜欢开源，请查看 Blender！**  这个开源 3D 软件和社区提供的东西令人惊叹。他们甚至有一个“游戏引擎”也可以加入其中：http:   [//www.blender.org/features/](http://www.blender.org/features/)他们有资源可以帮助您入门。

我想补充一点，虚幻看起来很有前途，因为他们是“免费”发布的，如果你的游戏真正起飞，只需阅读大约 5% 版税的细则！  [https://www.unrealengine.com/what-is-unreal-engine-4](https://www.unrealengine.com/what-is-unreal-engine-4)

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2014-08-24T19:09:45.990

我发现有这么多学习特定工具的链接很奇怪。如果我要学习游戏开发，我会想要一个为此目的的通用论坛/站点。比如[GameDev.net](http://www.gamedev.net)。

PS: This is intended as a complementary answer, not a full one.

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T09:28:21.930

想一想你是如何在 2D 中完成这一切的，这与 3D 几乎相同，只是算法不同，需要关注的方面也不同。

你问的其余问题是一个设计问题，取决于游戏和程序员。一个人可能会编写一个复杂的模拟来移动他们的角色，而其他人可能只依赖于骨骼动画。有人可能会沿着 3d 模型存储游戏逻辑，而其他人则不会。

例子？也许[地震源代码](http://www.idsoftware.com/business/techdownloads/)是一个很好的研究来源。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T10:29:22.853

编写游戏引擎是一项复杂的任务，我的建议是使用现有引擎之一（从列表中选择：http: [//www.devmaster.net/engines/](http://www.devmaster.net/engines/)）。

选择发动机时，您需要考虑以下几点：

*   许可证（你要发布，有预算吗，是否开源）

*   编程语言/脚本（您最熟悉哪种语言）

*   目标平台（Windows/Linux/Mac/Console/Phone）

*   管道（是 3D 建模工具的导出器和引擎的导入器）

您的问题与最后一项更相关，您应该选择一个可以将您在 3DS、Maya 中生成的资产导入引擎的引擎，而您不必担心文件格式，因为这将使您更有效率因为你只专注于游戏。

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2014-08-22T21:10:36.943

我没有注意到太多关于要寻找什么的回应。近年来，发布了更多关于如何更容易但仍然相当复杂的信息。

自由

*   [http://cgi.tutsplus.com/categories/3d-studio-max](http://cgi.tutsplus.com/categories/3d-studio-max)（免费和付费内容的混合包）

*   [http://unity3d.com/learn](http://unity3d.com/learn)（在教程和文档之间）

*   [https://www.youtube.com/user/UnrealDevelopmentKit/playlists](https://www.youtube.com/user/UnrealDevelopmentKit/playlists)（虚幻引擎免费教程）

*   [https://docs.unrealengine.com/latest/INT/](https://docs.unrealengine.com/latest/INT/)（虚幻引擎文档）

有薪酬的

*   [http://www.pluralsight.com](http://www.pluralsight.com)（用于使用 C# 编写和使用 Unity）

*   [http://www.digitaltutors.com](http://www.digitaltutors.com)（建模、内容创建、虚幻和一些 Unity 教程）

*   [http://www.gnomon.com](http://www.gnomon.com)（建模和内容创建）

# wcf - Web 服务和接口兼容性

> ID：498520
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T08:49:54.350
> 
>         
> 
> 标签：wcf, interface, type-safety

在 Visual Studio 中添加对 Web 服务（这都是 WCF）的服务引用会生成一些生成的代码，包括正在公开的接口的客户端重述。

我理解为什么会生成这个接口：您可能正在使用 3rd 方服务并且无法访问实际接口。

但是我这样做了，即使透明代理确实确实实现了我想要转换的接口，两者*也不是分配兼容的。*

我可以使用反射，但这很难看。有什么方法可以打败这种虚假类型安全性并将元数据注入到，以便我可以使用类的接口？

* * *

我的具体问题以复杂的方式偏离了规范，这与单个客户端有关，该客户端直接使用基类的某些衍生物并通过服务引用远程使用其他的。每个服务器的基类都需要在集合中保留对订阅客户端的引用，以便枚举通知事件，并且由于使用代理，问题是类型不同的。

这些答案都不能解决我的具体问题，但每一个答案都具有指导意义和帮助。我找到了自己的解决方案（使用双重绑定），但如果您没有从根本上提高我对整个业务的理解，我永远不会想出来。

三个优秀的答案。如何只选择一个？我选择第一个，因为它直接解决了我最初*认为*的问题。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T09:41:32.950

如果您已经在客户端拥有合约 dll，您甚至不需要服务引用（除非您使用它来为您编写设置代码） - 您可以简单地继承 ClientBase 并公开 Channel，并直接使用它 -类似的东西（没有IDE方便......）：

```
public class WcfClient<T> : ClientBase<T> where T : class
{
    public new T Channel {get {return base.Channel;}}
} 
```

然后，您可以执行以下操作：

```
using(var client = new WcfClient<IFoo>())
{
    client.Channel.Bar(); // defined by IFoo
} 
```

您仍然需要配置中的配置设置来确定地址、绑定等 - 但没有代理生成那么混乱。此外，您可能会选择重新实现`IDipsoable`以处理 WCF 代理可以投入的事实`Dispose()`（这很糟糕）：

```
public class WcfClient<T> : ClientBase<T>, IDisposable where T : class
{
    public new T Channel {get {return base.Channel;}}
    void IDisposable.Dispose() {
        try {
           switch(State) {
              case CommunicationState.Open: Close(); break;
              // etc
           }
        } catch {} // swallow it down (perhaps log it first)
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T09:29:49.400

添加服务引用时，请转到“高级”并确保选中“在引用的程序集中重用类型”并选择包含您的接口定义的程序集。您也可以通过右键单击现有服务引用并转到“配置”来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T08:59:31.910

为了从服务返回接口，您需要使用 KnownType 属性：

*   [http://weblogs.asp.net/avnerk/archive/2006/07/31/WCF-Serialization-part-1_3A00_-Interfaces_2C00_-Base-classes-and-the-NetDataContractFormatSerializer.aspx](http://weblogs.asp.net/avnerk/archive/2006/07/31/WCF-Serialization-part-1_3A00_-Interfaces_2C00_-Base-classes-and-the-NetDataContractFormatSerializer.aspx)

    如果要从服务返回自定义类型：

*   [http://msdn.microsoft.com/en-us/library/bb628653.aspx](http://msdn.microsoft.com/en-us/library/bb628653.aspx)

这些有帮助吗？

# php - PHP 安全性：从服务器检索 PHP 文件，未处理

> ID：498521
> 
>         
> 
> 赞同：13
> 
>         
> 
> 时间：2009-01-31T08:49:59.560
> 
>         
> 
> 标签：php, security

真的有办法做到这一点吗？从服务器检索原始 .php 文件（进入服务器的 FTP 帐户除外）？这就是为什么有工具/脚本来加密 php 源代码的原因吗？

如果是真的，那么如何防范呢？（不使用php源代码加密）

编辑：提到的服务器正在运行 php，例如。apache-php-mysql，您的标准托管服务器配置。

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2009-01-31T09:00:54.560

如果您在谈论其他人的服务器，那么简短的回答是否定的。如果第三方可以读取您的 PHP 源代码，那将是一个相当大的安全漏洞，因为 PHP 文件往往包含数据库密码、哈希密钥、专有算法和其他您不希望落入坏人手中的好东西。

如果您正在谈论您自己的服务器（即您自己可以访问），那么您可以将一些简单的脚本放在服务器上，允许您指定服务器上任何文件的路径并将其返回为纯文本。
*但是，出于上述原因，您永远不想将这样的脚本放在生产服务器上。*

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T09:13:31.820

一般来说，您无法访问远程源代码。要发生这种情况，必须禁用 PHP 模块。

但作为一个思想实验，这怎么可能发生？

撇开可以访问整个文件系统的大规模漏洞利用不谈，想象一下应用程序中是否存在安全漏洞，允许您在 .htaccess 文件中插入一行。鉴于 httpd 进程可写的 .htaccess 对 Wordpress 等应用程序很有用，因此这种可能性并不太奇怪。

如果你添加了这个：

```
php_value engine off 
```

源文件现在可以下载了！

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T09:25:23.000

如果服务器没有很好地配置，PHP 文件可能不是这样的句柄。

一些例子：

*   一些服务器被配置为在请求时显示[突出显示的 PHP 文件的源代码](http://docs.php.net/highlight_file)`.phps`。

*   Some developers use `.inc` for files that are intended to be included using `include` or `require`. If the server is not configured to handle these as PHP as well, they will be delivered as plain text when they are requested directly.

But the developer can also be the source of vulnerability. For example when he uses a script for downloading files from the server and this script accepts nearly every input without validation.

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T08:52:23.127

如果文件是从启用了 php 解释（通过 HTTP）的 Web 服务器提供的，那么它将被处理。您收到未处理代码的唯一方法是 PHP 以某种方式被禁用。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T09:27:14.837

I have encountered a mis-configured web server in the past that had one virtual host properly setup to server PHP files via the PHP interpreter.  There was a second virtual host pointing at the same directory, but didn't have php enabled.  This meant things like the 'config.php' for several apps where visible as plain text.  As everyone knows a typical config.php has database auth credentials and other things that shouldn't be known.

So, it is very important to understand your web server setup, and make sure you aren't doing something silly.

# c++ - Native vs. Protothreads，哪个更容易？

> ID：498526
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T08:52:22.283
> 
>         
> 
> 标签：c++, c, multithreading

我只是偶然发现了 Protothreads。它们似乎优于本机线程，因为上下文切换是显式的。

我的问题是。让这种多线程编程再次成为一件容易的事吗？

（我想是的。但我错过了什么吗？）

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T09:23:44.967

它们不是“优越”——它们只是不同并且适合另一个目的。原型线程是模拟的，因此不是真正的线程。它们不会在多个内核上运行，并且它们都会在单个系统调用（socket recv() 等）上阻塞。因此，您不应将其视为解决所有多线程问题的“灵丹妙药”。Java、Ruby 和 Python 的此类线程已经存在了相当长的一段时间。

另一方面，它们非常轻巧，因此它们确实使某些任务更快更简单。由于代码和内存占用少，它们适用于小型嵌入式系统。如果您从头开始设计整个系统（包括小型嵌入式设备上惯用的“操作系统”），protothreads 可以提供一种实现并发的简单方法。

另请阅读[绿色线程](http://en.wikipedia.org/wiki/Green_threads)。

# language-agnostic - 在firefox中打开一个新标签并保持ff在后台

> ID：498530
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-01-31T08:56:05.927
> 
>         
> 
> 标签：language-agnostic, firefox, command-line, tabs

是否有一种以编程方式在 Firefox 的新选项卡中打开 URL 而不让 Firefox 获得焦点的方法？

到目前为止我发现了什么：

*   `firefox -new-window <URL>`让 ff 留在后台，但会打开一个新窗口而不是选项卡。

*   `firefox -new-tab <URL>`在新选项卡中打开 <URL> 但将焦点放在 ff 上。

编辑：我想要完成的是让爪子邮件中的提要阅读器插件在后台打开Firefox中的内容，这样我就可以浏览我的提要并打开我感兴趣的所有内容，然后实际阅读所有内容。哦，我可能应该提到一个 linux/gnome-only 解决方案也可以。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-02-01T06:44:10.157

如果在 about:config 中将 browser.tabs.loadDivertedInBackground 设置为 true，则 -new-tab 将在后台打开选项卡，而不是聚焦窗口。这比您（或我）想要的要多，但也许它对您来说是一个合适的解决方法？

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T15:44:48.753

我相信您可以将您的 Firefox 设置为在后台打开新标签。如果您以编程方式打开一个新选项卡，它可能会在后台打开它。如果有的话，它可能值得一试。

* * *

## 回答 #3

> 赞同：-1
> 
>             
> 
> 时间：2009-01-31T18:56:14.000

您找到了新的选项卡参数，因此您只是缺少焦点。

我认为这应该依赖于窗口管理器。不是firefox本身负责的事情。如果有一个尖锐的点击工具来调整 metacity 的方式，那么我不知道它。

# java - 来自 servlet 的 Java 异步处理

> ID：498534
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-01-31T08:57:05.893
> 
>         
> 
> 标签：java, tomcat, asynchronous, jms, quartz-scheduler

我目前有一个 tomcat 容器——在其上运行的 servlet 正在侦听请求。我需要将 HTTP 请求的结果提交给作业队列，然后将其异步处理。我希望每个“作业”在数据库中连续保存，以便在发生故障时进行跟踪和恢复。我一直在做很多阅读。这是我的选择（注意我必须使用开源的东西）。

1）JMS——使用ActiveMQ（但在这种情况下，谁是工作的消费者另一个servlet？）

2）让我的请求在数据库中创建一行。在我的 Tomcat 容器中有一个单独的 servlet，它始终运行——它使用 Quartz 调度程序或 java.util.concurrent 中提供的实用程序将行作为作业连续处理（使用线程池）。

我倾向于后者，因为查看 JMS 文档让我很头疼，虽然我知道它是一个更强大的解决方案，但我需要相对快速地实现它。在任何情况下，我都没有预料到在部署此服务器的早期会有大量负载。

很多人说 Spring 可能适用于 1 或 2。但是我从未使用过 Spring，我什至不知道如何开始使用它来解决这个问题。任何关于如何深入研究而不必重新编写我的整个项目的指示都会很有用。

否则，如果您可以权衡选项 1 或 2，那也很有用。

澄清：异步过程是屏幕抓取第三方网站，并向原始请求者发送消息通知。第三方网站有点不稳定和缓慢，这就是为什么它将作为异步过程处理（内置多次重试尝试）。我还将从该站点提取文件并将它们存储在 S3 中。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T09:07:01.430

您的 Quartz Job 不需要是 Servlet！您可以将传入的作业保存在数据库中，并在您的主 Servlet 启动时启动 Quartz。Quartz Job 可以是一个简单的 POJO，并定期检查数据库中的任何作业。

但是，我建议看一下Spring。[在 Tomcat](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html#context-create)中学习和设置并不难。[您可以在Spring 参考文档](http://static.springframework.org/spring/docs/2.5.x/reference/index.html)中找到很多很好的信息。它具有 Quartz 集成，这比手动操作要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T09:12:35.067

不需要您进行大量设计和编程的合适解决方案是在 servlet 中创建稍后需要的对象，并将其序列化为字节数组。然后把它放在数据库中的一个 BLOB 字段中并完成它。

然后您的处理线程可以读取内容，对其进行反序列化并使用复活的对象。

但是，通过描述您需要系统实际执行的操作，您可能会得到更好的答案 :)

# java - MVC 对移动设备有好处吗？

> ID：498536
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-01-31T08:57:47.610
> 
>         
> 
> 标签：java, model-view-controller, java-me, frameworks

使用 J2ME（资源、速度、性能……）开发 MVC 框架是否有益？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T09:15:05.327

MVC 特别适用于移动应用程序。由于不动产限制，这些通常具有大量特定用途的用户界面模块。因此，良好的 MVC 设计所暗示的对 SOC 的更加严格的关注，使得设计更加紧密地关注于抽象一致并且可以很好地协同工作的单一用途单元。

同时，这种模式有助于将功能划分为模块，这些模块可以更清晰地定义并具有坚实的连贯性，同时更精确地确定它应属于的有限内聚。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-11T16:50:39.823

是的，MVC 简化了设计过程并促进了可移植性。查看[PureMVC](http://trac.puremvc.org/PureMVC_Java/)。J2ME 版本是 alpha 版本。[诺基亚](http://wiki.forum.nokia.com/index.php/Model-View-Controller_Architecture)正在使用它。

# javascript - 使用 Javascript 创建文件

> ID：498539
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T09:00:40.740
> 
>         
> 
> 标签：javascript

是否可以使用 javascript 在 localhost 上创建文件？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T09:04:58.173

不在网页中。如果您使用的是 Windows Script Host，那么是的，您可以通过 ActiveX，但我认为您没有这样做。但是，您可以通过 AJAX 将数据发送回网络服务器并让它为您存储。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T10:07:55.113

您可以创建[cookie](http://www.w3schools.com/JS/js_cookies.asp)以在本地计算机上存储数据，这几乎是在本地计算机上创建文件的唯一方法。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2015-05-14T16:06:08.027

我假设您已准备好文件的内容。然后你可以提示一个“另存为”对话框，如下所示：

```
var exportText; // this variable needs to contain your content
var targetFilename = "myfilename.ext"

function presentExportFile() {
  var download = document.createElement('a');
  // you need to change the contenttype to your needs in the next line.
  download.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(exportText));
  download.setAttribute('download', targetFilename);

  download.style.display = 'none';
  document.body.appendChild(download);

  download.click();

  document.body.removeChild(download);
} 
```

2017 年附录：自从我写了这篇文章后，我有一个异国情调的浏览器 (xombrero) 拒绝了它。所以，我不能肯定地说这是*The Way*。

* * *

## 回答 #4

> 赞同：-1
> 
>             
> 
> 时间：2009-01-31T09:07:14.500

不，这将是一个安全问题。

您可以通过插件创建文件，请参阅[https://developer.mozilla.org/en/Code_snippets/File_I%2F%2FO](https://developer.mozilla.org/en/Code_snippets/File_I%2F%2FO)

* * *

## 回答 #5

> 赞同：-2
> 
>             
> 
> 时间：2010-09-29T06:40:36.973

```
<html>
<head>
<title>Create File</title>

<! This function will create a file named 'newfile' on the same directory as the HTML unless path is given>

<script language="javascript">
function openFile()
{ var filePath = 'c:/filename.txt';
var fileSysObj = new ActiveXObject('Scripting.FileSystemObject');

fileSysObj.CreateTextFile(filePath);
}
</script>
</head>

<body> 
```

这将在您的 c:\ 驱动器上创建一个名为“filename.txt”的文件。

您必须接受 ActiveX 控件或禁用提示才能创建文件。

```
<button type=submit name=button onClick="openFile();">create file</button>
</body>
</html> 
```

# iphone - iPhone 开发 - 使用表格视图显示浮动视图

> ID：498554
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T09:13:36.157
> 
>         
> 
> 标签：iphone, uitableview, view, floating

我在每个选项卡项上有一个带有导航控制器的选项卡栏应用程序。我想在标签栏上方的表格视图上添加一个浮动（半透明视图）。我怎样才能达到结果？

结果将类似于 Alpha 列表在 Contact Application 主视图右侧的显示方式。我希望我能清楚地解释我想要做什么。

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T16:00:26.570

如果您只想在表格视图上方显示浮动字母（或数字）索引，则只需在 UITableViewDataSource 中定义两个方法：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index 
```

这些为您的索引提供了 AZ（或其他）部分标题列表，以及每个部分在表视图中的开始位置。

对于更自定义的视图，您应该能够创建一个视图，将其背景设置为 [UIColor clearColor]，布置其内容，并将其作为子视图添加到表视图或作为表视图上方的子视图包含两者的视图。

# git - 用 git 处理配置文件的最佳方法是什么？

> ID：498576
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T09:39:14.267
> 
>         
> 
> 标签：git, hook, directory-structure

假设我的应用程序有一个纯文本配置文件。它们包含一些在我的开发环境中测试应用程序所需的敏感信息。我使用不同的操作系统来访问和处理我的项目（win、mac、...）。

我不希望配置文件中的某些信息进入我的公共 git 存储库。在最好的情况下，我希望将敏感信息替换为占位符，并将配置文件上传到存储库以跟踪它们的结构。

* * *

## 你会如何处理这个问题？

钩子本身对我来说不会有太大的问题。我对如何将它们联系在一起、可能的目录结构等更感兴趣。我对 git 很陌生。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T10:17:07.933

在 Django 世界中，您可以使用一个约定 -如果有可用的模块，则有一个标准`settings.py`文件在最后导入一个模块。`local_settings`

将您所有的秘密内容都保存在该`local_settings.py`文件中并将其添加到该文件中，`.gitignore`这样它就不会进入存储库。这样，人们就会知道他们可以将自己的设置添加到`local_settings`.

例如，

`settings.py`：

```
DATABASE_USERNAME = 'your username here'
DATABASE_PASSWORD = 'your password here' 
```

`local_settings.py`：

```
DATABASE_USERNAME = 'my top secret username'
DATABASE_PASSWORD = 'my top secret password' 
```

最好的部分是，您在 中定义的任何内容都`settings.py`将被`local_settings.py`.

# join - 选择多个值不同的表

> ID：498577
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T09:40:29.007
> 
>         
> 
> 标签：join, multiple-tables

我对 MySql 比较陌生。

我有 2 个具有以下结构的表

```
products
{
pid-autoincrement,
pname
p_desc
}

services
{
sid-autoincrement
s_name
s_desc
} 
```

我试图选择具有名称的产品或服务`'%<somekeyword>%'`

我正在使用查询：

```
SELECT DISTINCT products.*, 
                services.* 
           FROM products, services 
          WHERE products.pname 
                LIKE '%mob%' 
             OR services.s_name
                LIKE '%mob%' 
```

但我得到了很多重复的结果。

尝试使用连接但无法获得解决方案。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T09:54:33.703

你想使用 UNION，像这样：

```
SELECT DISTINCT products.pid-autoincrement AS id, 
                products.pname AS name, 
                products.p_desc AS desc 
           FROM products
          WHERE products.pname 
                LIKE '%mob%' 
UNION
SELECT DISTINCT services.sid-autoincrement AS id, 
                services.s_name AS name, 
                services.s_desc AS desc 
           FROM services
          WHERE services.s_name 
                LIKE '%mob%' 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T09:52:20.807

您必须使用 UNION 运算符

因此您只能选择相同的列（因为只有一个结果）

或者您选择 2 次 - 2 个结果

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T10:03:17.523

因为这些表不相关，所以您必须使用 UNION 运算符（如 karlis 所说），而不是 JOIN。但是由于您显然希望一起处理产品和服务（至少在某些时候），您最好将它们放在一个表中并添加一列来区分它们，如下所示：  

```
productsandservice [need better name]
{
id,
name,
desc,
isaservice
} 
```

# javascript - 如何将 ISO 8601 格式的日期值转换为 JavaScript 中的日期对象？

> ID：498578
> 
>         
> 
> 赞同：20
> 
>         
> 
> 时间：2009-01-31T09:40:41.173
> 
>         
> 
> 标签：javascript, date, iso8601

我一直在尝试将日期值转换为更易读的格式。为此，我尝试使用 JavaScript`Date.parse()`方法解析日期。但是，这不适`"2007-09-21T14:15:34.058-07:00"`用于我拥有的输入（例如：）。最终目标是输出一个日期字符串，如`"January 30th, 2008 @ 2:15PM"`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
>             
> 
> 时间：2009-01-31T23:10:28.417

您可能应该使用 f3lix 推荐的[datejs](http://www.datejs.com/) [，](https://stackoverflow.com/users/60617/)但是我很无聊并把一个小对象放在一起，它完全符合您的要求：

*2012 年 9 月 25 日：清理代码，允许非扩展格式，例如 20120925T164740+0200*

*2011 年 12 月 1 日：修复了月份字符串中的错误。八月不见了*

```
var ISODate = {
  convert :
    function (input){
      if (!(typeof input === "string")) throw "ISODate, convert: input must be a string";
      var d = input.match(/^(\d{4})-?(\d{2})-?(\d{2})[T ](\d{2}):?(\d{2}):?(\d{2})(\.\d+)?(Z|(?:([+-])(\d{2}):?(\d{2})))$/i);
      if (!d) throw "ISODate, convert: Illegal format";
      return new Date(
        Date.UTC(
          d[1], d[2]-1, d[3],
          d[4], d[5], d[6], d[7] || 0 % 1 * 1000 | 0
        ) + (
          d[8].toUpperCase() === "Z" ? 0 :
            (d[10]*3600 + d[11]*60) * (d[9] === "-" ? 1000 : -1000)
        )
      );
    },
  format :
    function(date, utc){
      if (typeof date === "string") date = this.convert(date);
      if (!(date instanceof Date)) throw "ISODate, format: t is not a date object";

      var t={'FullYear':0, 'Month':0, 'Date':0, 'Hours':0, 'Minutes':0, 'Seconds':0};
      for (var key in t) {
        if (t.hasOwnProperty(key)) t[key] = date["get" +(utc ? "UTC" :"") + key]()
      }

      return this.month[t.Month]
        + " "
        + this.ordinal(t.Date)
        + ", "
        + t.FullYear
        + " @ "
        + this.clock12(t.Hours,t.Minutes);
      },
  month:
    [
      "January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ],
  ordinal:
    function(n) {
      return n+(
        [
          "th", "st", "nd", "rd"
        ][
          (( n % 100 / 10) | 0) === 1 ? 0 : n % 10 < 4 ? n % 10 : 0
        ]
      );
  },
  clock12:
    function(h24, m, s){
      h24%=24;
      var h12 = (h24 % 12) || 12;
      return h12 + ":" +
        (m < 10 ? "0" + m : m) +
        (isFinite(s) ? ":" + (s < 10 ? "0" + s : s ) : "") +
        (h24 < 12 ? "AM" : "PM");
      }
}; 
```

例子：

```
//Shows the date in the users timezone:
alert(ISODate.format("2007-09-21T14:15:34.058-07:00"));

//Show the date in UTC (Timezone Z, 00:00)
alert(ISODate.format("2007-09-21T14:15:34.058-07:00",true)); 
```

解释：

**convert**将字符串作为输入，如果成功则返回日期对象，否则抛出异常。字符串必须采用以下格式之一：

*   YYYY-MM-DDThh:mm:ss.sZ

*   YYYY-MM-DDThh:mm:ss.sXaa:bb

在哪里：

*   YYYY 是 4 位整数的年份

*   MM 是 2 位整数的月份

*   DD 是月份的日期，为 2 位整数

*   T 是字符 T 或空格 (\x20)

*   hh 是 24 小时格式的小时，为 2 位整数

*   mm 是 2 位整数的分钟

*   ss.s 是第二个，可以是 2 位整数，也可以是带有 2 位数字后跟句点后跟一位或多位数字的浮点数。

*   Z 是字符 Z（表示时区 Z，UTC+00:00）

*   X 是与 UTC 的时间偏移的加号 (+) 或减号 (-)

*   aa 是 UTC 的时间偏移小时，为 2 位整数

*   bb 是时间偏移到 ITC 的分钟，为 2 位整数

**format**接受上述格式的字符串或日期对象，并返回格式为：

*   MD，Y@h:mm

其中 - M 是月份的全英文名称 - D 是带有数字顺序后缀的月份日期（1-2 位） - Y 是年份（1 位或更多位） - h 是 12 小时格式的小时（ 1-2 位）- m 是分钟（2 位）

**month**是一个带有月份名称的数组

**ordinal**是一个函数，它接受一个数字作为输入，并返回带有英文序数后缀的数字。

**clock12**是一个函数，它以 24 小时格式获取小时、分钟和秒，并将其转换为美国 12 小时格式的字符串。*秒*是可选的。

* * *

## 回答 #2

> 赞同：12
> 
>             
> 
> 时间：2009-01-31T09:49:01.280

试试[http://www.datejs.com/](http://www.datejs.com/)。它是一个 JavaScript 日期库，具有扩展的 Date.parse 方法和 Date.parseExact 方法，可让您指定格式字符串。请参阅[DateJS API 文档](http://code.google.com/p/datejs/wiki/APIDocumentation)。

# iphone - iPhone 开发 - 使用放置在 TableView 中的 TextField 进行输入时，键盘不会自动调整

> ID：498580
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T09:42:19.627
> 
>         
> 
> 标签：iphone, uitableview, keyboard, adjustment

我刚下载了2.2.1，我已经看到我的输入视图在选择输入字段（nstextfield）时不调整。早些时候，视图正在调整自己的键盘。

我用的是2.1。我怎样才能达到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2010-04-08T06:32:33.723

这是一个错误，已由 Apple 修复。

# php - 解决巨大问题的最优雅的解决方案

> ID：498581
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T09:43:14.320
> 
>         
> 
> 标签：php, mysql, database-design

我正在一个用户可以选择适用于他们的某些日期的网站上工作，例如日期 1、日期 2、日期 3 等。

每个日期都会有一些属于它的问题，因此如果客户勾选“日期 1”以表明该日期适用于他，那么他会看到一堆文本框询问他有关日期 1 以及它如何适用于他们的问题。所有其他日期也是如此。

日期 1 和 2 以及几个问题，但其余日期只有 1 个问题。

这些日期及其答案稍后将用于为客户创建个性化提醒并发送给他。

我还想要一种设计，使添加额外的日期和字段变得简单（或尽可能简单）。

我的问题是，在数据库中存储与用户相关的所有日期及其答案的最佳方式是什么？我在想，在`user`表格中，我有`boolean`来自 Date 1 - Last date 的列（显然它们实际上并未命名为 date 1、date 2 等）。如果日期 1 的列设置为 0，则表示客户没有勾选，如果设置为 1，则表示他勾选了并且他回答了问题。

关于日期的实际存储，我正在考虑这两个选项：

**1)**每个日期有 1 个表格，该日期的每个问题的列和一个`user_id`列。因此，在`Date_1`表格中，我将有类似的列`Q1_name`，`Q2_name`以及用户给出的问题的答案。

但我想要更优雅的东西，因为 1)，在计算什么信息时获取所有用户的答案会很痛苦。在发送个性化电子邮件时适用于他们。2) 有些日期只有 1 个问题，所以为他们创建一个完整的表格会很丑。

**2）**一个`user_answer`表，列：

```
user_id,date_name,question_name,answer_val 
```

2 似乎是迄今为止最优雅的，但应该有更好的解决方案。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T10:06:57.050

听起来您想要以下（基本）表结构：

*   **用户**-`userId, userInfo`

*   **日期**-`dateId, dateInfo`

*   **问题**-`questionId, questionInfo`

*   **UserDate** - `userId, dateId`- 这存储了适用于给定用户的所有日期，并表示用户和日期之间的多对多关系 - 一个用户可以有很多日期，一个日期可以有很多用户

*   **DateQuestion** - `dateId, questionId`- 这存储了适用于给定日期的所有问题，并表示日期和问题之间的多对多关系 - 一个日期可以有很多问题，我假设一个问题可以用于多个日期

*   **UserResponse** - `userId, questionId, questionResponse`- 这将存储所有用户对所提出的任何问题的响应。如果您需要知道问题适用于哪个日期，假设他们可以在多个日期多次回答同一个问题，请添加一`dateId`列。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T09:57:48.207

选项 2 似乎接近于好的解决方案，但我会用`date_name`and`question_name`替换`date_id`and `question_id`。

能够添加新问题和日期的最佳且最简单的解决方案似乎是：

1\. 带有字段的日期表`date_id, title, date`。

2\. 带有字段的问题表`question_id, date_id, title`（并可能键入答案和描述）。3\. 用和

回答表。  `question_id``answer`

您还需要确定您是否有几个日期共同的问题，以及在这种情况下该怎么做。（你可能想要两个不同的答案，或者一个共同的答案）。我建议不要使用第一个解决方案，它会使问题不是动态的 - 您必须为问题或日期的每次更改更改 sql 和表结构。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T10:02:21.317

我认为您已经掌握了它，唯一的事情是您可以将问题和日期名称分隔到一个单独的表中，从而为您提供以下架构：

> **用户**：（`id, ...`姓名、出生日期、最喜欢的食物等）日期名称
> 
>   **：（**称为日期名称，`id, name`因此与日期不冲突，这可能在 SQL 中表示其他含义）
> 
>   **问题**：用户`id, date_id, text`
> 
>   **答案**：`user_id, question_id, answer_val`

没有必要将它们分开，但这样做有三个原因： 1\. 查找整数（如`question_id`）与查找文本（如`question_name`）相比要快得多，因为整数更小且大小固定。2\. 如果您将文本更改为问题（例如更正拼写错误），您只需更改 Question 中的单个条目，而不是更改每一行。3\. 因为您只存储每一位文本一次，所以可以节省大量空间。存储 1000 个整数小于存储 1000 个字符串。好吧，只要字符串长于几个字符即可。

除此之外，我认为这可以很好地工作。

# c++ - 带有用 C 编写的库的智能指针

> ID：498582
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T09:44:58.153
> 
>         
> 
> 标签：c++, opencv, smart-pointers, raii

我将 C++ 与 OpenCV 库一起使用，这是一个库图像处理，尽管这与这个问题无关。目前我有一个设计决定要做。

OpenCV 是一个 C 库，其数据结构（例如 CvMat）被声明为结构。要创建它们，可以使用 cvCreateMat 之类的函数，要释放它们，请使用 cvReleaseMat 之类的函数。作为一名 C++ 程序员，我创建了一个特殊的`cv_scoped`类，当它超出范围时会自动调用 cvReleaseMat（如`boost::scoped_ptr`）。

我现在意识到的是，我希望我也可以使用`auto_ptr`and `shared_ptr`in case 。我只是觉得为自己`cv_auto_ptr`和`cv_shared_ptr`班级编写代码是个坏主意，更不用说浪费时间了。所以我一直在寻找解决方案，我提出了三种可能性。

**首先**，我可以使用我已经创建的 cv_scoped 类。我将它重命名为`cv_ptr`然后使用智能指针，如下所示`std::auto_ptr<cv_ptr>`：不过，令人讨厌的是，我总是不得不取消引用两次：

```
std::auto_ptr<cv_ptr> matrix(cv_ptr(cvCreateMat(320, 240, CV_32FC3)));
cvPow(matrix.get()->get()); // one get for the auto_ptr, one for the cv_ptr 
```

我知道看起来我可以声明一个隐式转换，但实际上我不能——大多数 OpenCV 的函数都有参数 void*——所以不会调用隐式转换。我真的很想这样做，我不必做双重取消引用。

**其次**，我可以以某种方式覆盖`operator delete`。我不想覆盖全局运算符 delete，因为我只希望它适用于 CvMat（和其他一些）类型。但是，我无法更改库，因此无法添加`operator delete`到 CvMat 结构中。所以我不知道这将如何工作。

**第三**，我可以重写我自己的`auto_ptr`,`scoped_ptr`和`shared_ptr`. 他们不是大班，所以不会太难，但我只是觉得这是糟糕的设计。如果我要这样做，我可能会按照以下方式做一些事情：

```
class cv_auto_ptr {
public:
  cv_auto_ptr();
  ~cv_auto_ptr();

  // each method would just be a proxy for the smart pointer
  CvMat* get() { return this->matrix_.get()->get(); }
  // all the other operators/methods in auto_ptr would be the same, you get the idea

private:
  auto_ptr<cv_ptr> matrix_; // cv_ptr deletes CvMat properly
} 
```

在我的情况下你会怎么做？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T10:18:41.720

`std::tr1::shared_ptr`您可以考虑的一种方法是使用具有提供自定义删除器功能的事实。我对 OpenCV 不熟悉，所以我从您所写的内容中推断。

```
struct CvMatDeleter
{
    void operator( CvMat* p ) { cvReleaseMat( p ) ; }
};

void test()
{
    std::tr1::shared_ptr< CvMat > pMat( cvCreateMat(320, 240, CV_32FC3), CvMatDeleter() );
    // . . .
} 
```

因为删除器存储在共享指针中，您可以正常使用它，当最终需要删除共享原始指针时，`cvReleaseMat`将根据需要调用。请注意，`auto_ptr`and`scoped_ptr`是更轻量级的类，因此没有自定义删除器的功能，但如果您已准备好应对较小的开销，则`shared_ptr`可以在它们的位置使用。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T17:16:29.240

auto_ptr 真的是为 C++ 类上的 RAII 设计的，带有构造/析构函数，您在这里将它们的用途推到它们可能不应该用于（但可以）的事情上。  

无论如何，您是否希望能够像使用普通堆栈变量一样使用您的 C++ 对象，而无需每次都动态分配？

您的问题的标准解决方案是使用构造函数/析构函数创建包装器。

但是为了使它可以被 C 函数使用，只需添加一个内部转换运算符，以便在传递给 C 函数时自动将自身转换回 C 对象

编写一个包装类。  

```
class Mat
{
    CvMat* impl;
    public:
        Mat(/* Constructor  Arguments */)
        {
            impl = cvCreateMat(/* BLAH */);
        }
        ~Mat()
        {
            cvReleaseMat(impl);
        }
        operator CvMat*()
        {   // Cast opertator. Convert your C++ wrapper object into C object
            // when you use it with all those C functions that come with the
            // library.

            return impl;
        }
};

void Plop(CvMat* x)
{   // Some C function dealing with CvMat
}

int main()
{                            // Don't need to dynamically allocate
    Mat                  m;  // Just create on the stack.
    Plop(m);                 // Call Plop directly

    std::auto_ptr<Mat>   mP(new Mat);
    Plop(*mP);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T10:14:53.990

如果您只关心异常安全，请在每次使用矩阵时执行此操作：

```
void f() {
    try {
        CvMat* mat = cvCreateMat(320, 240, CV_32FC3));
        // ...
    } catch(...) {
        cvReleaseMat(mat);
        throw;
    }
    cvReleaseMat(mat);
} 
```

另一方面，如果您想要一个**理智**的解决方案，请加倍努力并编写一个完整的包装器。

```
namespace cv {

class Mat {
public:
    enum Type { /* ... */ };
    Mat(int w, int h, Type type) {
        impl = cvCreateMat(w, h, intFromType(type));
    }

    ~Mat() {
        cvReleaseMat(impl);
    }

    void pow() { // wrap all operations
        cvPow(impl);
    }

private:
    CvMat* impl;
};

} 
```

走中间路线，使用通用智能指针和“cv_ptrs”的大杂烩听起来像是头痛和不必要的并发症。

# google-maps - 如何创建自定义 GControl

> ID：498586
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T09:52:03.273
> 
>         
> 
> 标签：google-maps

我正在尝试在谷歌地图周围创建一个灰色的“框架”（见下图），以尝试传达焦点区域的概念，而不是一个点（通常用标记表示）。请注意，这不是叠加层，也就是说，当您拖动地图时，灰色的“框架”不应移动。

**编辑：添加图片链接**

![http://i680.photobucket.com/albums/vv170/bustrofedon_bucket/inage1.jpg](https://i.stack.imgur.com/QHbfv.jpg)

似乎唯一的选择是“子类化” GControl 以创建自定义控件。我有 3 个问题

1）首先，GControl 子类化是最好的做法吗？

2）在我的例子中，地图渲染的画布（div）可以改变它的大小（即不是固定宽度）。当画布改变大小时，我是否必须删除和添加自定义控件？有关如何创建自定义地图控件的信息，请参阅文档[http://code.google.com/apis/maps/documentation/controls.html#Custom_Controls 。](http://code.google.com/apis/maps/documentation/controls.html#Custom_Controls)

3）现在，怎么做。天真地，我以为我可以创建一个包含 3 列和 3 行的表格，并为中间的单元格设置 display: none 。但这不起作用。我也尝试过剪裁，但也没有用。我的 css 技能相当欠缺，所以必须有比添加四个矩形灰色 div 更优雅的方法。如果我想添加一个带有 div 的内边框，那么我需要绘制 8 个。简而言之，创建“空心”矩形的最佳方法是什么？

谢谢 PS 这是我第一次进入 StackOverflow。才发现。令人印象深刻的是，SO 的组合如此之好。

# ruby-on-rails - 开源 ruby 和 rails 项目

> ID：498589
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-01-31T09:54:19.850
> 
>         
> 
> 标签：ruby-on-rails, ruby, open-source

您经常为哪些开源 ruby​​ 或 ruby​​ on rails 项目做出贡献？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T20:29:30.787

[Sinatra](http://sinatra.lighthouseapp.com/projects/9779-sinatra/tickets?q=all)和[Rack](http://rack.lighthouseapp.com/projects/22435-rack/tickets?q=all)是我最喜欢的两个项目，因为它们都相对年轻，这意味着它们有很多好工作要做。

如果您希望为项目做出贡献，还请参阅[我的 GitHub 个人资料](http://github.com/nakajima)，因为我一直在寻找补丁。:)

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-02-05T03:25:29.087

我在[Redmine](http://www.redmine.org)上工作，它的插件很多。我很快就会接触到[Sinatra](http://www.sinatrarb.com/)，它是一个非常好的框架，用于创建一个简单的 Web 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-13T08:46:35.583

我为[RSpec](http://rspec.info)做出了贡献。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-03-03T07:12:37.693

找到这个 - [23 个开源 Ruby on Rails 应用程序](http://www.webresourcesdepot.com/23-amazing-and-open-source-ruby-on-rails-applications/)

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-02-13T08:56:00.930

我在[rboard](http://github.com/radar/rboard)工作，这是一个为最新版本的 Rails 构建并积极维护的论坛系统。我也偶尔会提交 Rails 本身的文档。

我也在寻找 rboard 上的补丁，里面有一个很大的 TODO.html 文件。

# .net - LINQ - 动态 LINQ 是否可以动态指定 from 子句？

> ID：498597
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T10:05:48.067
> 
>         
> 
> 标签：.net, linq, .net-3.5

我想构建动态 linq。

但我想动态设置表（从子句）

这可能吗？

马尔科姆

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T10:54:45.643

一如既往，这取决于;-p

如果您想使用 LINQ 扩展方法或查询语法，那么不行：这与 紧密耦合`IQueryable<T>`，其中`T`是源类型。泛型可能是一种选择，具体取决于场景：

```
public IQueryable<T> Get<T>(int id) where T : SomeBaseClass
{
    return GetData<T>().Where(row=>row.SomeProp == id);
} 
```

`GetTable<T>()`例如，通过使用（和特别手工制作的数据对象），可以使上述内容与 LINQ-to-SQL 一起使用。当然，要从字符串到泛型，您必须使用反射 ( `MakeGenericMethod`) - 这不是微不足道的！

你能澄清一下这里的确切情况吗？

听起来*也许*您应该在这里只使用常规命令...例如，也许使用[ExecuteQuery](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executequery.aspx)，它接受字符串命令并将数据加载到类型化对象中。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T10:58:30.453

我认为您很可能刚从 SQL 世界（猜想）进来，然后是的，您要做的第一件事就是从字符串构建查询（我也想要）。但是在 Linq 中我们真的不喜欢字符串，所以如果你可以发送表的类型而不是字符串名称来查询，那么 Linq 会很高兴，并且你有编译器时间检查你的查询工作。这是一个双赢的局面:)

所以是的，给 os 一些例子，说明为什么你真的想要表名作为字符串:)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:44:50.883

LINK 不是 SQL。

当然，您可以使用 LINQ-To-SQL 从 SQL Server 数据库中获取数据，但是 LINQ 和 SQL 是两个非常不同的东西。

在很多情况下，它们的使用模式看起来很相似，但 LINQ 的优点是具有编译时类型检查和推断，而不是运行时检查。SQL 无法做到这一点。

# language-agnostic - 自安装应用程序或单独的安装程序？

> ID：498598
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-01-31T10:05:51.480
> 
>         
> 
> 标签：language-agnostic, installation

要在新计算机上安装应用程序，目前使用的主要方法似乎有两种：

1.  单独的安装程序：创建一个单独的安装程序包，创建应用程序所需的所有目录、文件、注册表项（即 MSI、InstallSheild 等），然后最终将您的应用程序复制到目标计算机。

2.  自行安装程序：在作为应用程序一部分的组件中包含所有必需的安装步骤。然后在每次运行主应用程序可执行文件时使用此组件检查并创建所需的设置。即只需运行应用程序即可安装。

我使用过一些应用程序会随着时间的推移破坏其设置，并且大多数应用程序都有单独的安装程序。因此，唯一的解决方法是重新安装，有时设置甚至数据都会丢失（非常令人沮丧）。  

同样在我从事的软件项目中，单独的安装程序方法通常要求在安装程序包和实际应用程序中传播特定于应用程序的知识。然后，当进行代码/功能更改时，安装程​​序和应用程序都需要更新。它总是感觉有点太脆弱并且容易出现人为错误。

所以我目前倾向于自我安装方法，因为安装/设置更简单更健壮，即只运行应用程序。我觉得这种自我安装的方法也会让自己成为一个更强大的应用程序。

与应用程序设置（选项）的集成也会更加简洁，在许多情况下，同一个组件可以执行安装和设置管理。

然而，消极的一面是，每次应用程序启动时执行这些额外的检查/步骤可能会对启动时间产生负面影响，并且操作系统集成可能比使用标准安装程序需要更多的工作。

那么人们推荐哪种方法，为什么？  

（目前我最感兴趣的是安装桌面富客户端应用程序。）

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T10:34:53.263

两种方法各有利弊：

*   拥有安装程序是安装必要系统组件（如驱动程序、库、COM 组件等）的正确方法。由于其中许多活动需要提升权限，因此管理员可以执行安装，而所有用户都可以使用该应用程序。

*   在企业环境中，实际上可能需要可编写脚本的安装过程。

*   没有安装程序为便携式应用程序开辟了道路。如果程序将所有内容都放在一个目录中，则可以简单地将其复制到 U 盘并在任何系统上运行。这对于您的特定类型的应用程序当然可能没有意义，但这由您决定。

我不确定有关损坏设置的问题在这里是否真的很重要。如果设置损坏（为什么？） - 应用程序如何知道如何处理它？OTOH 当然也可以编写安装程序以不盲目地覆盖任何旧设置。这一切都取决于...

**编辑：**您在评论中写道：

> 即使是便携式应用程序也需要某些配置/设置，让主应用程序在每次启动时检查设置是否有效/存在，并且只在需要时提示用户不是更好。

再一次，这真的取决于你的需要。有不同类型的配置设置或首选项，您必须单独决定：

*   如果应用程序由当前用户首次运行，则每个用户的配置设置将丢失。显示缺少的消息以及如何创建它会很有帮助。例如，在[FlameRobin](http://www.flamerobin.org)（Firebird 的数据库管理程序）中，当在程序启动时找不到已注册的服务器和数据库时，我们会显示一条消息，以及如何注册它们。

*   UI 行为的每用户设置也将丢失，但它们有默认值。用户将获得应用程序的默认行为，然后可以在选项对话框中进行更改。由于最好尽量减少此类设置的数量，并且由于默认值应该是大多数用户期望的或在一般情况下效果最好的默认值，因此也无需在程序启动时打扰用户。

*   某些配置可能不是每个用户，而是每个程序。这通常存储在标准用户没有写入权限的位置，因此检查并提示用户输入它并没有真正的帮助。可以做的是启动一个外部程序，向标准用户询问具有足够权限的帐户及其密码。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T11:07:11.170

从我的角度来看，使用单独的安装程序是“更好”的方式。让应用程序自行安装不仅会给应用程序本身增加额外的工作量，它还会“绕过”底层操作系统的任何安装程序系统（如 Windows 上的 MSI）。

如果应用程序随着时间的推移破坏了它的设置，它就会被破坏并需要修复。自安装程序应如何处理损坏的设置？只是用默认值覆盖它？用户也会对此感到恼火，因此让他们运行单独的安装程序并选择“修复”选项会使这至少更加透明。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T10:28:02.670

我会推荐一个单独的安装程序，它可以执行以下操作：

*   安装新安装

*   修复现有安装

*   删除现有安装

我推荐这些选项的原因是因为这是我对 Windows 环境中的安装程序的期望。

我建议将安装和应用程序逻辑分成两个不同的应用程序区域的原因：

*   安装程序和应用程序使用的依赖项之间可能存在冲突。

*   我想确保我的团队在开发应用程序时不会无意中使用安装程序框架的依赖项中的类。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-02T02:22:53.770

感谢您的反馈意见。我开始认为这些方面的东西将是一个很好的折衷方法：

*   通过创建主应用程序引用的安装程序组件（类库）来选择自安装程序方法。

*   该组件是应用程序的核心部分，负责确保所有配置/设置存在且有效。

*   主应用程序。每次运行时，可执行文件都会要求此组件检查设置的存在性/有效性，并且仅在需要时提示用户。这可以通过将所有设置问题分组并在单个 GUI 中呈现（避免一系列烦人的对话）以用户友好的方式轻松完成。

*   对于操作系统集成，安装程序组件（在 Windows 的情况下）确保将条目添加到应用程序的“添加删除程序”列表中，以及任何其他操作系统所需的约定。

*   在应用程序中，安装程序组件还提供标准选项/设置屏幕。这避免了重复设置管理代码。

我问这个问题是因为我遇到了许多非技术用户，他们问为什么他们不能简单地将应用程序从一台计算机复制到另一台计算机，他们可以用他们的数据（例如照片、文档等）来做到这一点。这是一个非常有效的问题，特别是对于面向 GUI 的桌面应用程序。

多年来，单独的安装程序肯定是 Windows 上的“完成方式”。对于驱动程序/系统组件，显然它们通常是必需品。但是对于桌面 GUI 风格的应用程序，我认为它们在用户/客户的简单性和可靠性方面并不是最好的。

# graphics - 有效计算观察光线和一组对象之间的第一个交点的最佳方法是什么？

> ID：498601
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T10:09:53.860
> 
>         
> 
> 标签：graphics, 3d, raytracing

例如：

一种有效计算视线与一组三个对象之间的第一个交点的方法：一个球体、一个圆锥体和一个圆柱体（其他 3D 图元）。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T10:47:00.277

您正在寻找的是空间分区方案。有很多选择可以解决这个问题，并且在这个领域也进行了大量的研究。值得一读的是 Christer Ericsson 的[Real-Time Collision Detection](http://realtimecollisiondetection.net/)。

那本书中介绍的一种简单方法是定义一个网格，将所有对象分配给它相交的所有单元格，然后沿着与线相交的网格单元从前到后，与与该网格单元关联的每个对象相交。请记住，一个对象可能与更多网格单元相关联，因此计算出的交点实际上可能不在当前单元中，但实际上在稍后。

下一个问题是如何定义该网格。不幸的是，没有一个好的答案，您需要考虑哪种方法最适合您的场景。

其他感兴趣的分区方案是不同的树结构，例如[kd-](http://en.wikipedia.org/wiki/Kd-tree)、[Oct-](http://en.wikipedia.org/wiki/Octree)和[BSP-trees](http://en.wikipedia.org/wiki/Binary_space_partitioning)。您甚至可以考虑将树与网格结合使用。

**编辑**

正如所指出的，如果您的集合实际上是这三个对象，那么您肯定最好只与每个对象相交，然后选择最早的对象。如果您正在寻找射线球、射线圆柱等相交测试，这些并不难，快速的谷歌应该提供您可能需要的所有数学。:)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T10:47:56.140

“计算效率”取决于集合有多大。

对于琐碎的三个，只需依次测试它们中的每一个，它真的不值得尝试优化。

对于较大的集合，请查看划分空间的数据结构（例如 KD-Trees）。整章（甚至整本书）都致力于解决这个问题。我最喜欢的参考书是[An Introduction to Ray Tracing](https://rads.stackoverflow.com/amzn/click/com/0122861604) (ed. Andrew. S. Glassner)

或者，如果我误读了您的问题，而您实际上是在要求针对特定*类型*对象的光线-对象交叉算法，请参阅同一本书！

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-20T19:14:18.487

嗯，这取决于你真正想要做什么。如果您想为简单场景中的几乎每个像素生成一个正确的解决方案，一种非常快速的方法是通过预渲染具有唯一标识的所有对象来预先计算每个像素的“前面是什么”使用扫描转换（也称为 z 缓冲区）将颜色转换为背景项缓冲区。这有时被称为项目缓冲区。

使用该预计算，您就可以知道您将要拍摄到场景中的几乎所有光线都可以看到什么。结果，您的光线-环境相交问题得到了极大的简化：每条光线都击中一个特定的对象。

当我[多年前](http://portal.acm.org/citation.cfm?id=833838)这样做时，我正在制作公认的简单场景的实时光线追踪图像。我已经有一段时间没有重新访问该代码了，但我怀疑使用现代编译器和图形硬件，性能会比我当时看到的要好几个数量级。

PS：我在 90 年代初进行文献检索时第一次读到有关 item buffer 的想法。我最初发现它在（我相信）70 年代后期的 ACM 论文中提到过。遗憾的是，我没有可用的源参考，但简而言之，这是一个非常古老的想法，并且在扫描转换硬件上运行良好。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-02T18:39:51.023

我假设您有一条射线 d = (dx,dy,dz)，从 o = (ox,oy,oz) 开始，并且您正在找到参数 t，使得交点 p = o+d*t。（就像[这个](http://local.wasp.uwa.edu.au/~pbourke/geometry/planeline/)页面，它描述了使用 P2-P1 表示 d、P1 表示 o 和 u 表示 t 的射线平面相交）

我要问的第一个问题是“这些物体是否相交”？

如果没有，那么您可以稍微作弊并按顺序检查光线碰撞。由于您有三个可能每帧移动也可能不移动的对象，因此需要预先计算它们与相机的距离（例如从它们的中心点）。按与相机的距离，从最小到最大依次测试每个对象。尽管空白空间现在是渲染中最昂贵的部分，但这比仅针对所有三个进行测试并取最小值更有效。如果您的图像是高分辨率的，那么这将特别有效，因为您可以在像素数上摊销成本。

否则，对所有三个进行测试并取最小值......

在其他情况下，您可能希望混合使用这两种方法。如果您可以按顺序测试其中两个对象（例如，一个球体和一个立方体沿圆柱形隧道向下移动），但测试第三个对象并取最小值以找到最终对象。

# eclipse - Eclipse 文件搜索缓存

> ID：498604
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T10:13:28.300
> 
>         
> 
> 标签：eclipse

我注意到在 Eclipse 中的文件搜索 (CTRL+H) 中，第一次搜索“工作集”时，搜索完成需要相当长的时间。对该工作集的后续搜索运行得更快，可能是因为它正在搜索某种索引而不是实际文件。但是，在（不确定）一段时间后，索引似乎过期并且搜索例程恢复到完整的文件解析。

这个缓存索引的生命周期是多久？可以增加或持续吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T10:45:50.853

我相信这是有效的操作系统级缓存。通过 CTRL-H 搜索时，Eclipse 本身不会缓存您的文件。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2012-03-21T09:24:52.517

如果您想要更快的搜索，请使用[InstaSearch Eclipse 插件](http://marketplace.eclipse.org/content/instasearch)。它创建并始终在自己的索引中搜索。在您键入时显示结果。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2015-07-03T00:03:45.737

我更喜欢使用 Spring Tools Project 中的快速搜索。

看看这篇博文：

[http://howtodoinjava.com/2015/04/03/use-eclipse-quick-search-plugin-for-faster-text-searches/](http://howtodoinjava.com/2015/04/03/use-eclipse-quick-search-plugin-for-faster-text-searches/)

# c# - 非托管/托管互操作 - 传递 int[] 时遇到问题

> ID：498618
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T10:34:08.507
> 
>         
> 
> 标签：c#, interop, unmanaged, marshalling, managed

我正在攻读化学博士学位，因此我需要编写一个软件应用程序来帮助我在显微镜下对样品进行成像。该显微镜配有 xyz 纳米定位台。该阶段由硬件供应商使用 VC++ 编写的非托管 DLL 控制。我可以为您提供更多需要的细节，但让我从这个开始；

dll 中的一种方法允许我读取运动轴的设置：

C++ 语法：

```
BOOL E7XX_qSVO (int ID, const char* szAxes, BOOL* pbValueArray) 
```

根据惯例，BOOL 是 int 0 或 1。

我的 C# 包装器包含：

```
[DllImport("E7XX_GCS_DLL.dll", EntryPoint = "E7XX_qSVO")]   
public static extern int qSVO(int iId, string sAxes, int []iValArray); 
```

这对我来说似乎是正确的。但是，当我在我的主应用程序中尝试这样的事情时（查询轴 1,2 和 3）：

```
Int32 [] _iValues = new Int32[3];
E7XXController.qSVO(m_iControllerID, "123", _iValues); 
```

我一直得到这样的数组：

{6, 0, 10} 而根据设备本身的显示我应该得到 {0, 0 , 0} 。互补功能：

`BOOL E7XX_SVO (int ID, const char* szAxes, const BOOL* pbValueArray)`在舞台上设置相同的状态位也不起作用......

dll 中的其他命令运行良好。我可以毫无问题地传入和传出字符串和双打，但不是 BOOL 类型......

你们知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-01T03:02:48.637

您是否尝试过指定 MarshalAs 属性，例如：-

```
[DllImport("E7XX_GCS_DLL.dll", EntryPoint = "E7XX_qSVO")]   
public static extern int qSVO(int iId, 
                              [MarshalAs(UnmanagedType.AnsiBStr)]string sAxes, 
                              [MarshalAs(UnmanagedType.LPArray)]int[] iValArray); 
```

另外，您是否尝试过将 sAxes 字符串作为 char 数组直接传递，例如：-

```
[DllImport("E7XX_GCS_DLL.dll", EntryPoint = "E7XX_qSVO")]   
public static extern int qSVO(int iId, 
                              [MarshalAs(UnmanagedType.LPArray)]char[] sAxes, 
                              [MarshalAs(UnmanagedType.LPArray)]int[] iValArray); 
```

我发现对于互操作，您通常需要进行一些试验才能使其正常工作，因此请尝试不同的组合，检查 UnmanagedType 枚举的不同成员，并考虑其他人的建议。但是，请尝试以上两种技术，让我知道它们是否有助于排序！

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T22:21:18.063

C++ 中的 BOOL 实际上是一个“int”，因此请确保使用 System.Int32 而不是 System.Boolean。或者，它可能使用 COM 数据类型，即 VARIANT_BOOL，在这种情况下，您需要 System.Boolean。您是否尝试过运行依赖查看器来确认函数原型？

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-01T02:29:19.937

这不会直接回答您的问题，但是使用 Pinvoke.net 轻松获得常见的 Interop Win32 调用的一个很好的工具甚至有一个 Visual Studio 插件。

[http://www.pinvoke.net/index.aspx](http://www.pinvoke.net/index.aspx)

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-01T02:46:54.283

您的函数的[文档](http://www.pi-portal.ws/index2.php?option=com_docman&task=doc_view&gid=628&Itemid=57)说：

> VC++ 编译器需要一个 extern "C" 修饰符。声明还必须指定这些函数将像标准 Win-API 函数一样被调用。这意味着 VC++ 编译器需要在声明中看到 WINAPI 或 __stdcall 修饰符。

的默认调用约定`DllImport`是**WinApi**。在 Windows 上，这就是 StdCall。但在 CE 上，这是 Cdecl。您要确保使用正确的调用约定。您可能想在托盘中添加：

```
CallConvention = CallingConvention.StdCall 
```

另外，指定我们的字符串字符集：

```
CharSet = CharSet.Ansi 
```

但即使没有这些，它也应该工作。这很奇怪，因为您的代码看起来正确。

# asp.net - 使用 subversion 进行 asp.net 部署 - 导致 appdomain 回收

> ID：498623
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T10:41:31.830
> 
>         
> 
> 标签：asp.net, svn, deployment

我正在尝试使用 subversion 将更新部署到我的 ASP.Net 应用程序，我面临的一个问题是，每当更新工作副本（包含构建）时，bin 内的“.svn”文件夹就会更新，这会导致ASP.Net appdomain 进行回收。我不希望这种情况发生，除非 bin 中的某些内容实际发生了变化。

有没有办法告诉 ASP.Net 忽略 bin 内的“.svn”文件夹？基本上不看那个文件夹的变化？

如果这不起作用，我将使用 Web 文件夹之外的临时文件夹将构建下载到服务器上，然后使用脚本修补/更新实际的 Web 文件夹。

[编辑：] svn 导出选项不会让我的部署处于版本控制之下，我希望能够在 Web 文件夹上执行“svn 更新”来部署和回滚版本。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T10:48:46.963

如果您使用[svn export](http://svnbook.red-bean.com/en/1.0/re10.html)而不是[svn checkout](http://svnbook.red-bean.com/en/1.0/re04.html)从存储库中获取文件，您将不会获得服务器上的 .svn 文件夹。

[编辑] 另一种选择是从您的存储库中删除“bin”（如果您需要修订，可能会将其提交到另一个存储库），然后在更改时手动将 bin-catalog 复制到您的 webroot。请记住将“bin”添加到您的 svn-ignore-list 中。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T12:27:48.903

您可能希望将“Bin”目录添加到您的 svn:ignore 列表中；无论如何都不应该提交它，因为它包含已编译的代码，而不是源代码。

无论如何，正如其他人所指出的那样，作为您的最终部署，“svn export”可能是一个更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2011-12-05T14:26:36.120

您是否考虑过使用持续集成服务器？

持续集成基本上是指一种旨在增加提交到存储库的频率的开发实践。

您提交的次数越多，回滚的粒度就越好，并且提交之间的破坏越少。

下面列出的工具都可以与 subversion 一起使用，并且可以与服务器上的 MSBuild 结合以生成自动化的构建和部署系统。

MSBuild 指令包括在复制到实时目录时忽略某些文件（即代码隐藏）的选项。此外，您可能希望有一些文件有一个开发版本和一个实时版本......在这种情况下，我们应该为 MSBuild 编写一个“转换”脚本，以确保在实时复制时文件对于实时服务器是正确的。（即web.config）

哈德逊 - [http://java.net/projects/hudson/](http://java.net/projects/hudson/)

德拉科 - [http://draconet.sourceforge.net/](http://draconet.sourceforge.net/)

CruiseControl - [http://cruisecontrol.sourceforge.net/](http://cruisecontrol.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T12:12:55.843

不幸的是，如果您这样做，那么正如您所经历的那样，您将重新启动 AppDomain。所以除非你按照 Espo 所说的那样使用 svn export，否则你会看到这个问题。

编写一个 svn 更新本地副本然后复制文件的 2 行批处理文件会更容易吗？

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T12:52:38.477

应用程序池回收应该没什么大不了的。您的问题是否可能是您的用户在发生这种情况时正在失去他们的会话？如果是这样，请切换到 StateServer 或 SQLServer 会话，而不是使用 InProc。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2012-03-07T11:43:25.470

Subversion 1.7 及更高版本不再在每个子目录中创建 .svn 文件，这样就可以在没有 .svn 文件妨碍的情况下做你想做的事。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2012-04-13T22:19:16.200

我玩游戏有点晚了，但我会扔掉我的 2 美分：

您可以使用[`svn export`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)传递`-r REV`参数。这使您能够将应用回滚到指定的修订版。

所以你可以使用：

`svn export REPOSITORY DESTINATION --force`更新到 HEAD（您的应用程序的当前状态）

或者

`svn export REPOSITORY -r REV DESTINATION --force`更新到其他版本（也许你应该使用标签）

不要忘记`--force`参数，以便它可以替换 DESTINATION 中的现有文件。

# sql - 在 SQL 中，我怎么能有两个不能相同的字段，只有一个是主键

> ID：498629
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T10:46:36.970
> 
>         
> 
> 标签：sql, mysql

我正在使用 MySQL，我有三个表，一个任务表，一个产品表和一个描述两者之间关系的表：每个产品由多个任务组成，每个任务可能在多个产品中找到。

描述两者关系的表有两个主键 ProductID 和 TaskID，它们也是外键。在此表中，我有一个名为 TaskOrder 的字段，它为给定的产品列出了必须执行任务的顺序。

我想说的是，对于任何产品，您都不能有两个具有相同 TaskOrder 的任务，但是我不能只将 TaskOrder 设置为唯一，因为不同的产品将（并且应该）具有重复的 TaskOrder 值

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T10:53:53.880

你想要一个 UNIQUE 约束：

```
create table ProductTasks
 ( ProductID ...
 , TaskId ...
 , TaskOrder ...
 , primary key (ProductId, TaskId)
 , unique (ProductId, TaskOrder)
 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T10:54:02.303

通过将以下内容添加到表创建命令中，在ProductID*和*TaskOrder两个字段的组合上创建唯一索引：

```
CONSTRAINT UNIQUE (ProductID, TaskOrder) 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T10:49:21.160

联结表有一个主键，但它是一个具有两个字段的多字段键（其他表的两个 FK）。PK 不需要只有一个字段。

# python - 对于安全关键型应用程序来说，Django 是一个不错的选择吗？

> ID：498630
> 
>         
> 
> 赞同：22
> 
>         
> 
> 时间：2009-01-31T10:46:37.030
> 
>         
> 
> 标签：python, django, security

对于安全关键型应用程序来说，Django 是一个不错的选择吗？

我问这个是因为大多数网上银行软件都是使用 Java 构建的。这有什么真正的原因吗？

* * *

## 回答 #1

> 赞同：30
> 
>             
> 
> 时间：2009-01-31T13:08:04.360

实际上，Java 和 Python 的安全性是相同的。仅限摘要的密码处理、快速超时的 cookie、小心删除会话、多因素身份验证。这些都不是 Java 框架或 Python 框架（如 Django）所独有的。

事实上，Django 有一个安全后端架构，允许您添加自己的 LDAP（或 AD）连接，可能会更改使用的摘要技术。  

Django 有一个 Profile 模型，您可以在其中保留其他身份验证因素。

Django 为视图功能授权检查提供了一些标准装饰器。由于 Python 非常灵活，您可以轻松编写自己的装饰器函数来分层进行不同或附加的身份验证检查。

安全性是 Django 中的许多一流特性。

* * *

## 回答 #2

> 赞同：17
> 
>             
> 
> 时间：2009-01-31T11:56:17.203

可能Java背后的原因不在于安全性。我认为 Java 更多地用于大型开发公司，银行通常会求助于它们来满足他们的开发需求（这可能不仅与网站有关，而且在后端更深层次地蔓延）。

所以，我认为没有安全原因，主要是文化原因。

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-01-31T21:18:49.640

用 Java 构建银行应用程序的原因与安全性无关，至少恕我直言。它们与：

1.  Java 是 21 世纪的 COBOL，因此有很多遗留代码需要重写并且需要时间。基本上，银行应用程序是旧应用程序，它们是十年前用 java 构建的，没有人愿意丢弃所有旧代码（顺便说一句，这几乎总是一个糟糕的决定），

2.  有些人认为静态类型语言比动态类型语言更“安全”。恕我直言，这是不正确的（以 Java 5 之前的集合为例）。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T22:06:48.030

我发现你在 Java 和银行业务之间的联系错误地结束了。

大多数银行软件的安全性很差。许多银行软件都是用 Java 编写的。这是否意味着 Java 比其他语言更难编写安全软件？

银行软件中的质量安全性（和安全性）如此之少，这可能不是 Java 的错。实际上，就像其他海报提到的那样，选择您的语言通常对您的安全性影响很小 - 除非您选择只有热门编码人员才能编写安全代码的少数语言之一（想到 C 和 PHP）。

许多大型电子商务网站是使用各种框架用 Python、Ruby 和 Perl 编写的。我认为商户的安全要求远高于银行业的要求。这是因为商家必须提供安全性和良好的用户体验，而银行客户愿意忍受 SecureID 令牌等无法使用的接口。

所以是的：Django 可以胜任。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T20:34:39.903

您不应将应用程序的安全性依赖于框架。尽管 Django 确实针对经典安全问题采取了相当多的措施，但它不能保证您的应用程序是安全的，您需要的不仅仅是编程框架来获得安全关键应用程序。

我会说是的，只要您了解它的功能和局限性并且了解**每个**应用程序的安全漏洞，Django 就是一个不错的选择。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2010-04-16T17:18:42.287

您可以使用 Django 构建一个安全的应用程序，就像使用任何流行的 Java 框架一样。Java 的亮点之一是其广泛的加密库。

对于 Django 所需的最小加密任务，Python 的加密服务就足够了，但是它缺乏强大的分组密码使得 Django 中的加密机制对于静态数据不安全。

Python 本身确实支持安全散列算法，包括 SHA1、SHA224、SHA256、SHA384 和 SHA512，但是 Django 的身份验证机制尚未更新为使用除 SHA1 之外的任何东西，这使其可能容易受到密码分析的影响。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T16:04:25.300

您是指*完整*的应用程序是用 Java 构建的，还是只是您在浏览器中看到的部分？如果是后者，原因可能是因为在网页的上下文中，Java小程序可以下载运行。

# java - Java 应用程序：无法正确读取 iso-8859-1 编码文件

> ID：498636
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-01-31T10:51:40.343
> 
>         
> 
> 标签：java, encoding, character-encoding, iso-8859-1

我有一个编码为 iso-8859-1 的文件，其中包含 ô 等字符。

我正在使用 java 代码读取此文件，例如：

```
File in = new File("myfile.csv");
InputStream fr = new FileInputStream(in);
byte[] buffer = new byte[4096];
while (true) {
    int byteCount = fr.read(buffer, 0, buffer.length);
    if (byteCount <= 0) {
        break;
    }

    String s = new String(buffer, 0, byteCount,"ISO-8859-1");
    System.out.println(s);
} 
```

然而 ô 字符总是乱码，通常打印为 ? .

我已经阅读了这个主题（并在途中学到了一点），例如

*   [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058)

*   [http://www.ingrid.org/java/i18n/utf-16/](http://www.ingrid.org/java/i18n/utf-16/)

但仍然无法正常工作

有趣的是，这适用于我的本地电脑（xp），但不适用于我的 linux 机器。

我检查了我的 jdk 是否支持所需的字符集（它们是标准的，所以这并不奇怪）使用：

```
System.out.println(java.nio.charset.Charset.availableCharsets()); 
```

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-01-31T10:59:35.977

我怀疑您的文件*实际上*没有编码为 ISO-8859-1，或者 System.out 不知道如何打印字符。

我建议首先检查文件中的相关字节。要检查第二个，检查字符串中的相关字符，将其打印出来

```
 System.out.println((int) s.getCharAt(index)); 
```

在这两种情况下，结果*都应该*是十进制的 244；0xf4 十六进制。

一般建议见[我关于 Unicode 调试](http://pobox.com/~skeet/csharp/debuggingunicode.html)的文章（提供的代码是 C#，但很容易转换为 Java，原理相同）。

一般来说，顺便说一句，我会`InputStreamReader`用正确的编码来包装流 - 这比“手动”创建新字符串更容易。我意识到这可能只是演示代码。

编辑：这是证明控制台是否可以工作的一种非常简单的方法：

```
 System.out.println("Here's the character: \u00f4"); 
```

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2009-01-31T11:18:17.263

将文件解析为固定大小的字节块并不好——如果某个字符的字节表示跨越两个块怎么办？使用[`InputStreamReader`](http://java.sun.com/javase/6/docs/api/java/io/InputStreamReader.html)适当的字符编码代替：

```
 BufferedReader br = new BufferedReader(
         new InputStreamReader(
         new FileInputStream("myfile.csv"), "ISO-8859-1");

 char[] buffer = new char[4096]; // character (not byte) buffer 

 while (true)
 {
      int charCount = br.read(buffer, 0, buffer.length);

      if (charCount == -1) break; // reached end-of-stream 

      String s = String.valueOf(buffer, 0, charCount);
      // alternatively, we can append to a StringBuilder

      System.out.println(s);
 } 
```

顺便说一句，记得检查 unicode 字符是否确实可以正确显示。您还可以将程序输出重定向到一个文件，然后将其与原始文件进行比较。

正如[Jon Skeet](https://stackoverflow.com/questions/498636/java-app-unable-to-read-iso-8859-1-encoded-file-correctly/498644#498644)所暗示的，这个问题也可能与控制台有关。试试看[`System.console().printf(s)`](http://java.sun.com/javase/6/docs/api/java/io/Console.html)有没有区别。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T15:40:00.183

@Joel -[您自己的回答](https://stackoverflow.com/questions/498636/java-app-unable-to-read-iso-8859-1-encoded-file-correctly/498967#498967)确认问题出在您的操作系统上的默认编码（UTF-8，Java 采用的那个）和您的终端使用的编码（ISO-8859-1）之间的差异。

考虑这段代码：

```
public static void main(String[] args) throws IOException {
    byte[] data = { (byte) 0xF4 };
    String decoded = new String(data, "ISO-8859-1");
    if (!"\u00f4".equals(decoded)) {
        throw new IllegalStateException();
    }

    // write default charset
    System.out.println(Charset.defaultCharset());

    // dump bytes to stdout
    System.out.write(data);

    // will encode to default charset when converting to bytes
    System.out.println(decoded);
} 
```

默认情况下，我的 Ubuntu (8.04) 终端使用 UTF-8 编码。使用此编码，将打印：

> UTF-8 
> 
>   ?ô

如果我将终端的编码切换为 ISO 8859-1，则会打印：

> UTF-8 
> 
>   ôÃ´

在这两种情况下，Java 程序都会发出相同的字节：

```
5554 462d 380a f4c3 b40a 
```

唯一的区别在于终端如何解释它接收到的字节。在 ISO 8859-1 中，ô 编码为 0xF4。在 UTF-8 中，ô 编码为 0xC3B4。其他字符对两种编码都是通用的。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T10:59:30.360

如果可以，请尝试在调试器中运行程序，以查看创建后的 's' 字符串中的内容。它可能具有正确的内容，但在 System.out.println(s) 调用后输出是乱码。在这种情况下，Java 认为的输出编码与 Linux 上终端/控制台的字符编码之间可能存在不匹配。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T11:36:55.057

基本上，如果它可以在您的本地 XP PC 上运行，但不能在 Linux 上运行，并且您正在解析完全相同的文件（即您以二进制方式在盒子之间传输它），那么它可能与 System.out 有关。 println 调用。我不知道您如何验证输出，但如果您通过从 XP 框中连接远程 shell 来验证输出，则需要考虑 shell（和客户端）的字符集。

此外，Zach Scrivena 的建议也是正确的——你不能假设你可以以这种方式从数据块创建字符串——要么使用 InputStreamReader，要么首先将完整的数据读入数组（显然不适用于大文件） . 但是，由于它似乎确实可以在 XP 上运行，所以我敢冒昧地说，在这种特定情况下，这可能不是您的问题。

# .net - XAML - （键入）它有什么意义？

> ID：498649
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-01-31T11:10:20.883
> 
>         
> 
> 标签：.net, wpf, xaml

我目前正在研究学习 WPF 和 Silverlight。到目前为止，我一直在使用 Delphi 和 C# (Winforms) 进行开发。在查看一些关于 WPF 的书籍并在线观看一些介绍性视频时，我得到的印象是这个 XAML 东西在效率和可用性方面（对于开发人员）是一个相当大的倒退。尤其是在在线视频中，人们很高兴地输入 XAML 代码来创建表单和控件，我认为随着视觉表单设计者等的到来，这种技术在很久以前就已经过时了。当使用表单设计器快得多时，为什么我要通过在 XAML 中键入文本表示来创建按钮或网格？当从属性检查器的下拉列表中选择颜色或字体名称要快得多时，为什么要输入颜色或字体名称？真实世界的应用程序 GUI 真的是由**键入**XAML？

我确定我在这里遗漏了一些东西，虽然我不知道是什么......

* * *

## 回答 #1

> 赞同：28
> 
>             
> 
> 时间：2009-01-31T11:16:11.027

与使用 WYSIWYG 编辑器相比，它与手动编写原始 HTML 几乎相同：对结果进行更精细的控制，而无需使用编辑器进行不必要的循环。

* * *

## 回答 #2

> 赞同：12
> 
>             
> 
> 时间：2009-01-31T11:22:55.773

> 现实世界的应用程序 GUI 真的是通过键入 XAML 开发的吗？

一句话，是的。也许不多，但肯定会发生。

我对视觉设计师的经验是，他们倾向于添加不必要的面板、固定尺寸和绝对定位，而需要更灵活、适当缩放的布局。例如看看[这个最近](https://stackoverflow.com/questions/497125/how-can-i-prevent-the-vs-wpf-designer-putting-margins-on-every-object-from-the-to)关于stackoverflow的问题

此外，如果您编写自定义控件，您通常需要做额外的工作以使它们与视觉设计器兼容，如果您能够直接编辑 xaml，则不需要这些额外的工作。

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2009-02-01T04:08:40.873

我倾向于手动编写所有 XAML，因为我还没有精通 Blend。但是与我一起工作的其他一些开发人员喜欢使用 Blend，它非常适合设置渐变之类的东西。  

我建议您下载 Blend 试用版并试一试，它与 Visual Studio 配合得非常好，如果您学习如何使用它，可以为您节省大量时间。

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2009-03-03T23:29:28.110

如果您可以**键入**XAML，那么您就**了解**XAML :)（恕我直言）

知道如何键入它的关键在于知道如何调试、重构和重组它。所有这些目前在 Expression blend 中都无法完成，对于大型项目，您需要所有这些。

这里提出的另一个问题是，手动编写 XAML 可以让您获得更多控制权，这不像 html 那样具有优势。XAML 比 html 和编辑器（如表达式混合或其他）更结构化，几乎提供与您手动编写的 XAML 相同的 XAML，几乎没有小例外。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T11:15:42.853

好吧，设计师倾向于使用 Expression Blend，它是一个强大的 xaml 设计器。但是，是的，我知道很多将 xaml 编辑为文本的开发人员发现它比设计人员更容易。

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T11:15:50.700

如果您想使用设计器，请获取 Expression Blend。

您是对的，尽管 VS 中也应该有一些初级设计师。

Silverlight 虽然来自不同的方向，但典型的控件是 silverlight 的新事物，而且还处于早期阶段。

话虽如此，作为开发人员，我实际上更喜欢键入 XAML，就像我更喜欢键入 HTML 一样。设计师（并且 blend 也不例外）将太多多余的东西倾倒到我不想出现的标记中。

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2009-03-03T23:00:29.460

一旦您了解了如何使用 WPF 中的不同面板结构，那么手动编写 XAML 确实比使用设计器更容易。我发现我可以比使用任何设计器更快地将控件输入到表单中，并且我可以更好地控制 XAML 的外观和布局。

我只使用设计器偶尔为表单上已有的控件设置属性。而且我使用 Blend 来制作动画，因为我还没有为此设置 XAML。

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2009-02-01T04:20:13.847

XAML 可以与 Glade XML 相比较，Glade XML 是一种用于存储基于 GTK+ 的 GUI 的格式。GTK+ 与 Windows 窗体和 WPF 不同，实际上是明智的，因为它使用相对定位。对于 Windows 窗体，当人们开始自定义他们的字体并且您的 GUI 看起来像带有大量文本剪辑的垃圾时，绝对定位就变成了 PITA。

相对定位很容易手工编码，不像绝对定位，因为你不需要计算坐标！

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T11:16:25.520

因为它更好地进入版本控制系统，所以其他人可以同时更改它而不会发生冲突？因为您可以在 emacs 中开发整个应用程序？因为您可以轻松地为这些东西编写生成器和检查器？因为很容易控制这个 GUI 如何看待每一个小细节？

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2010-08-17T07:56:58.910

我打字。

我最讨厌的不过是设计师的草率、非确定性和难以控制的输出，无论是 HTML 还是 XAML。

基本上，如果我创建一个 XAML 文件，我会完全按照我编写其他所有代码的方式进行操作。

我首先将整个事物分割成一个网格，在所有事物上放置一个精确的像素大小（除了奇怪的“自由浮动”空间，我放了“*”）决定什么去哪里，然后我还添加注释和空行到结构XAML。

另外，我拒绝每一个不符合这个标准的XAML为“不可用”，具有很好的教育效果。

最佳实践的马虎和疏忽是致命的罪过，我从不容忍它们。

# refactoring - 重构的目标？

> ID：498651
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-01-31T11:15:28.627
> 
>         
> 
> 标签：refactoring

重构代码的目标是什么？仅仅是为了增强代码结构吗？是否为未来的变化铺平了道路？

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2009-01-31T11:47:41.540

**易懂**

更直接和组织良好（分解）的代码更容易理解。

**正确性**

通过检查更易于理解的代码，更容易识别缺陷。过于复杂、结构不佳的 Rube Goldberg 风格的代码更难检查缺陷。此外，具有高一致性组件和组件之间松散耦合的良好组件化代码更容易进行测试。此外，在测试中更小、格式良好的位可以减少测试用例之间代码覆盖率的重叠，从而实现更快、更可靠的测试（这成为一个自我强化的循环，朝着更好的测试方向发展）。同样，更直接的代码往往更可预测和更可靠。

**易于维护和发展**

设计精良、质量上乘、易于理解的通用组件更易于使用、扩展和维护。对系统的许多更改现在更容易进行，因为它们的影响更小，并且更明显的是如何进行适当的更改。

* * *

仅就代码质量和正确性问题而言，重构代码本身确实具有优点，但重构最有效的地方在于软件设计的维护和发展。向旧的、分解不良的代码添加新功能时，一个好的策略通常是重构目标代码，然后添加新功能。与尝试添加新功能而不进行重构相比，这通常需要更少的开发工作，并且这是一种提高代码库质量的便捷方法，而无需进行大量难以证明的“天上掉馅饼”的假设优势重构/重新设计工作到管理。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T12:09:06.553

重构用于支付您的[技术债务](http://www.martinfowler.com/bliki/TechnicalDebt.html)。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T11:26:23.690

1.  消除/减少“代码气味”

2.  任何开发人员都更容易理解代码

3.  使其可维护。

4.  增加内聚减少耦合"

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T11:33:58.463

我通常不会仅仅为了减少代码异味或使其“更好”/更易于维护而重构代码。当我需要修复错误时，我会进行重构，并且我想让代码比以前更好。其他原因是当我想添加功能时，如果不进行重构就很难做到。第三个原因是使代码更具可测试性。有时我会重构以学习我不理解的代码:-)

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T11:34:27.420

在一个非常基本的层面上，目标是改进代码，使其更具可读性、更少耦合、降低错误率等等。

在另一个层面上，重构是作为 BigUpfrontDesign 的替代方案出现的。此外，在极限编程等环境中使用时，重构也是一项职责。您每天每小时都在为您的技术部门支付抵押贷款。与集体代码所有权原则一起，它还使每个人都负责在任何地方重构代码，而不仅仅是自己编写（或共同编写）的代码。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T12:02:53.757

代码重构是观察变化是不可避免的事实的必要性。它的主要目标是增强当前的代码或设计，以使其适应新的功能或非功能需求并使其符合新的功能或非功能需求，或者使其更能容忍变化。

可能需要重构的场景示例：

1.  引入新的业务规则，要求将当前设计抽象到一个新的水平；

2.  认识到可以修改当前设计以更好地遵守面向对象设计的[SOLID原则这一事实；](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)

3.  当需要增加代码可测试性时——这与上面的2有关。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T14:11:43.840

> 重构的目标？

打发时间？

说真的，我这样做是为了：

*   当我看到它时避免代码重复（遵循[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则）

*   简化代码（消除不必要的临时复杂性，请参阅[KISS](http://en.wikipedia.org/wiki/KISS_principle)）

*   删除旧的/陈旧的/弃用的代码（清理浪费，一旦旧代码被替换）

*   消除副作用

*   泛化和重用现有代码

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T11:18:01.553

*   降低单个功能的复杂性 - 使测试更容易

*   消除重复代码 - 减少出错的机会

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T11:39:09.437

重构可以有多重激励：

*   提高代码可读性

*   简化代码结构

*   提高可维护性

*   提高可扩展性

开始重构的原因通常取决于您遇到的问题。

如果您扩展您的软件并偶然发现错误并且找不到错误的根源，那么您可能会开始重构以简化代码结构，以便开发人员更容易追踪错误。

有时错误来自未按预期使用的函数/类/...。这表明代码不容易理解或文档记录不充分。

现在，如果你改进文档、代码的可读性和代码的结构，你也会产生更好的可维护性......

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T11:44:47.147

当然，当您确定永远不必再接触一段代码时，就没有必要重构该代码。

但大多数时候，您将不得不再次触摸它，因为您将不得不添加功能、修复错误或优化它。

所以，是的，这当然是为未来的变化铺平道路。代码总是在变化。

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T12:24:47.363

以降低变革成本。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T12:26:03.553

一般来说，我只会重构生产代码以重用它或需要修改时。

例如，出于性能原因，我需要更新一个函数，但没有一个简单的测试接口，所以我将它重构为一个单独的模块，可以更容易地进行单元测试，然后进行更改以便我可以重新运行测试并表明它像以前一样工作。

不需要更改的重构代码是灾难的根源；保证会引入错误。

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T14:26:04.967

**组织。**

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2009-02-02T11:46:42.167

对我来说：**性能**。

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2009-02-02T11:50:14.407

简而言之……为了消除代码的臭味。

# .net - 使用 SQLite 和 WinForms 2.0 C# 的编码问题

> ID：498670
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T11:25:11.073
> 
>         
> 
> 标签：.net, winforms, sqlite, encoding

我正在使用 .NET 2.0 开发 WinForms 应用程序，并尝试使用 SQLite 作为数据库解决方案。我的主要问题是当数据是非英语语言（在我的情况下是希腊语）时，我无法在 WinForm 中查看数据库中的数据。

出于数据库管理的目的，我使用[SQLite 管理员](http://sqliteadmin.orbmu2k.de/)，它完全没有问题以希腊语返回数据。但是当我在表单中的 DataGridView 中加载数据时，我得到了那些可怕的“缺少字符”方形符号。

为了与数据库通信，我使用[System.Data.SQLite](http://sqlite.phxsoftware.com/)解决方案。

我在这里缺少什么吗？我寻找在数据库中设置默认排序规则但没有想出任何东西，因为 SQLite 不支持 SQL Server 之类的排序规则值（例如 COLLATE Greek_CI_AS）

谢谢

PS 我正在使用 SQLite 3 和 System.Data.SQLite.dll 1.0.60。测试的连接字符串是： 
`Data Source=test.db;UseUTF8Encoding=True;`

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T12:29:41.877

您是从数据库中检索字符串还是字节数组？在内部，SQLite 使用 UTF-8 或 UTF-16 字符串（取决于用于将字符串插入数据库的方法），这是当您使用 sqlite3_column_text 获取字符串值时返回的内容。

另一方面，如果您请求一个 blob，它只会返回底层字节，这可能与您的应用程序期望的字符编码不匹配。

我不确定 ADO 提供程序如何映射到这些底层操作，但在我看来，如果您的文本没有以 unicode 形式返回，或者它是但应用程序以其他方式处理它，那可能就是问题所在谎言。

[http://www.sqlite.org/c3ref/column_blob.html](http://www.sqlite.org/c3ref/column_blob.html)

**编辑：**当我想到它时，尝试在[SQLiteman](http://sqliteman.com/)中打开您的数据库，看看是否有任何区别。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T18:58:58.097

该问题很可能是由 SQLite 管理员引起的。遵循 Mike 的建议后，我还使用 SQLiteman 来测试数据库。当我使用 SQLite 管理员查询我插入的示例数据时，我得到了与使用我的代码相同的“缺少字符”符号。

然后我尝试了相反的方法。我使用 SQLiteman 创建了一个数据库，添加了一些行，并且代码以正确的格式获得了结果。然后我在我的应用程序中添加了一行，结果再次正确。

所以谢谢迈克，你的建议帮助了我。

此外，我绝不想暗示 SQLite 管理员不是一个好的应用程序。但是，它可能与特定情况有问题。再次感谢

# java - 使用 JPA 而不是 Hibernate 设置 JBoss Seam 在 GlassFish 上运行有多容易？

> ID：498676
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T11:32:10.403
> 
>         
> 
> 标签：java, hibernate, jpa, glassfish, seam

问题几乎说明了一切——我有兴趣了解如何在 GlassFish（v3 prelude）应用程序服务器而不是 JBoss 上设置 JBoss Seam。此外，我更喜欢 JPA 而不是 Hibernate 的持久性，但看起来 Seam 依赖于 Hibernate（或至少部分依赖），有没有人对这样的堆栈有任何经验？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T17:26:47.147

Seam 不需要 Hibernate，并且最近的 2.x 版本已经过测试和记录，可以在其他应用程序服务器上工作。

我们有一个使用 JPA 的 Seam 应用程序，设置起来没有问题。我不使用 GlassFish，但 Seam 手册中有一节介绍[在 GlassFish 上部署 JPA 示例](http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/glassfish.html#jpa-glassfish-section)，这听起来像是您需要的。

# asp.net-mvc - ASP.NET MVC 应用程序中 MS Ajax 与 jQuery 的优缺点？

> ID：498680
> 
>         
> 
> 赞同：17
> 
>         
> 
> 时间：2009-01-31T11:35:53.517
> 
>         
> 
> 标签：asp.net-mvc, ajax, asp.net-ajax

现在 RC1 出来了，我需要一劳永逸地决定是使用 MS Ajax 库还是只使用 jQuery 来处理 AJAX 请求。该应用程序是一个新应用程序。本质上，我决定的方式是我是否从 Microsoft 库中获得任何我不会从 jQuery获得的**显着好处。**我已经加载了 jQuery，我最关心的是文件大小的额外开销。

据我所知——唯一的好处确实是有类似的助手`Ajax.BeginForm`，但也许这些在某些时候可以与 jQuery 一起使用？我的一位政府雇员朋友今天还告诉我，MS Ajax 库中有很多错误 - 这让我很担心。

随着微软现在正式[与 jQuery 成为朋友](http://weblogs.asp.net/scottgu/archive/2008/09/28/jquery-and-microsoft.aspx)，我不会太担心他们将来会做任何事情来通过增强自己的库来将 jQuery 抛在脑后。

我真的不太了解 MS Ajax 究竟为我做了什么。有没有一定的利弊。还是支持“更新面板”只是 90% 的膨胀？

我还发现非常有趣的是，[ASP.NET MVC in Action](http://www.manning.com/palermo/)书只是跳过了 MS Ajax 库并直接跳到了 jQuery 中：

> 在本章中，读者将了解 ajax 技术如何以比 Web 窗体更无缝的方式应用于 ASP.NET MVC。读者将看到如何利用一个日益流行的轻量级 JavaScript 库，称为 jQuery。
> 
>   
>   
> 
> （来自AJAX 的[免费示例](http://www.manning.com/palermo/palermo_meapch9_sample.pdf)章节）

非常感谢听到任何人关于他们与两者合作的经历，特别是在以下附加问题上：

*   在两个库之间转换代码是否容易 - 假设相对简单的 ajax 要求？

*   在任一库中调试明显更好或更快

*   有人知道 ASP.NET 4.0 的进展情况以及任何可能对 MVC 有益的 AJAX 库计划吗？

*   简而言之，除了发送请求并将响应粘贴在 DIV 中之外，MS AJAX 还能为 MVC 应用程序做什么？

*   我如何做相当于`Ajax.BeginForm(...)`和使用 jQuery ？

*   你的交易杀手是什么？

*   大多数人都在用什么？

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2009-01-31T12:09:06.523

就个人而言，我会坚持使用 JQuery。MS AJAX 在大小方面是相当重量级的，你可以用 JQuery 做很多事情。至于转换代码是否容易，这取决于您使用了多少 MS AJAX 东西。我认为从一个调试到另一个调试并没有太大的区别。您将拥有一个更大的 JQuery 用户社区，可以从中提取资源。

* * *

## 回答 #2

> 赞同：10
> 
>             
> 
> 时间：2009-01-31T13:20:44.943

您可以（而且我确实）根据需要同时使用两者。当我希望一个特定的表单对 JavaScript 不友好并且我在服务器上生成内容时，我将通过 AjaxHelper 使用 MS AJAX。它在客户端构建了我需要的一切来处理不支持 JavaScript 的浏览器。我只需要在控制器中检测 AJAX/非 AJAX 并根据情况返回部分或完整视图。如果我需要将 AJAX 用作插件的一部分（比如`autocomplete`），那么我将使用 jQuery。关键是我使用最适合我（最容易实现）的工具。当然，我的大多数应用程序都在 Intranet 上运行，所以我不太关心下载的大小。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T20:13:52.033

我还发现了关于 MS 合并库的[jQuery 公告](http://blog.jquery.com/2008/09/28/jquery-microsoft-nokia/)

显然 ：

> 此外，Microsoft 将开发额外的控件或小部件，以在 jQuery 之上运行，这些控件或小部件可轻松部署在您的 .NET 应用程序中。jQuery 帮助器也将包含在 .NET 开发的服务器端部分（除了现有的帮助器），为现有的 ASP.NET AJAX 功能提供补充功能。

所以我认为他们很可能最终会拥有 jQuery 助手，这些助手完全反映了 MS 东西的 AJAX 助手。

我想我会采取的解决方案是使用 Html.BeginForm，然后拦截提交按钮以使用 jQuery。我并不特别担心没有 javascript 的人会失去功能，但这样做也没有那么难。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2011-06-24T02:22:20.223

JQuery 比 Ajax 更容易编码，开销问题可以通过添加更多内存而不是流式处理代码来解决。尽管我只是一个初学者，但 Ajax 对我来说没有任何意义。在处理了过于苛刻的 Ajax 语法之后，jQuery 就像一股清新的空气。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2012-02-17T19:28:52.330

好吧，我在 MS Ajax 框架中发现了一件不能用 jQuery 优雅地完成的事情。用户控件构建 MS Ajax 是非常面向对象的。这不能用 jQuery 轻松完成。例如，假设您正在构建一个“地址”用户控件，它将包含地址 1、地址 2、城市、州、邮政编码和国家/地区。您可以使用 jQuery 和 Ajax 构建此控件，但 Ajax 库提供的好处是它将分隔地址控件。您可以在该控件上定义一个函数“reset()”，该函数将重置地址控件的内容。假设您希望“reset()”将 address1、address2、City 设置为空字符串，但将 State 设置为“AL”，将 Country 设置为 USA。您在 (. js) 文件，该函数将与您的地址控制相关联。jQuery 也是不可能的。您定义的任何函数在范围内都是全局的，并且没有简单的方法来绑定该函数地址控制。您可以很好地调用表单上文本框控件的“重置”功能！！！

So if you want to create a pure object oriented user controls then i guess better choice is using MS Ajax framework.

# c# - String.Contains() 是否比 String.IndexOf() 快？

> ID：498686
> 
>         
> 
> 赞同：116
> 
>         
> 
> 时间：2009-01-31T11:42:36.950
> 
>         
> 
> 标签：c#, .net, asp.net, performance, string

我有一个大约 2000 个字符的字符串缓冲区，需要检查缓冲区是否包含特定字符串。

将为每个 web 请求检查 ASP.NET 2.0 webapp。

有谁知道[String.Contains 方法](http://msdn.microsoft.com/en-us/library/dy85x1sa(VS.80).aspx)是否比[String.IndexOf 方法](http://msdn.microsoft.com/en-us/library/system.string.indexof(VS.80).aspx)执行得更好？

```
 // 2000 characters in s1, search token in s2
    string s1 = "Many characters. The quick brown fox jumps over the lazy dog"; 
    string s2 = "fox";
    bool b;
    b = s1.Contains(s2);
    int i;
    i = s1.IndexOf(s2); 
```

[有趣的事实](http://www.cl.cam.ac.uk/~mgk25/ucs/examples/quickbrown.txt) 

* * *

## 回答 #1

> 赞同：182
> 
>             
> 
> 时间：2009-01-31T12:08:31.670

`Contains`调用`IndexOf`：

```
public bool Contains(string value)
{
    return (this.IndexOf(value, StringComparison.Ordinal) >= 0);
} 
```

其中调用`CompareInfo.IndexOf`，最终使用 CLR 实现。

如果您想查看如何在 CLR 中比较字符串，[这将向您展示](https://github.com/gbarnett/shared-source-cli-2.0/blob/master/clr/src/vm/comstring.cpp)（查找*CaseInsensitiveCompHelper*）。

`IndexOf(string)`没有选项并`Contains()`使用序数比较（逐字节比较，而不是尝试执行智能比较，例如，e 与 é）。

所以`IndexOf`会稍微快一点（理论上），因为`IndexOf`直接使用来自 kernel32.dll 的 FindNLSString 进行字符串搜索（反射器的力量！）。

**为 .NET 4.0 更新**- *IndexOf 不再使用序数比较，因此 Contains 可以更快。请参阅下面的评论。*

* * *

## 回答 #2

> 赞同：11
> 
>             
> 
> 时间：2009-01-31T14:10:35.123

Contains(s2) 比 IndexOf(s2) 快很多倍（在我的计算机中是 10 倍），因为 Contains 使用 StringComparison.Ordinal 比 IndexOf 默认执行的文化敏感搜索要快（但在 .net 4.0 [http 中可能会发生变化： //davesbox.com/archive/2008/11/12/break-changes-to-the-string-class.aspx](http://davesbox.com/archive/2008/11/12/breaking-changes-to-the-string-class.aspx)）。

Contains 在我的测试中与 IndexOf(s2,StringComparison.Ordinal) >= 0 具有完全相同的性能，但它更短并且使您的意图更加明确。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2012-03-13T22:19:35.460

我正在运行一个真实案例（与合成基准相反）

```
 if("=,<=,=>,<>,<,>,!=,==,".IndexOf(tmps)>=0) { 
```

相对

```
 if("=,<=,=>,<>,<,>,!=,==,".Contains(tmps)) { 
```

它是我系统的重要组成部分，执行了 131,953 次（感谢 DotTrace）。

然而**令人震惊的惊喜**，结果却与预期相反。

*   索引为 533 毫秒。

*   包含 266 毫秒。

：-/

net framework 4.0（更新至 2012 年 2 月 13 日）

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T11:59:22.813

通过使用 Reflector，可以看到，Contains 是使用 IndexOf 实现的。这是实现。

```
public bool Contains(string value)
{
   return (this.IndexOf(value, StringComparison.Ordinal) >= 0);
} 
```

所以 Contains 可能比直接调用 IndexOf 慢一点，但我怀疑它对实际性能有什么意义。

* * *

## 回答 #5

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T12:41:57.330

如果您真的想对代码进行微优化，那么最好的方法始终是基准测试。

.net 框架具有出色的秒表实现 - [System.Diagnostics.Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T11:53:11.560

从一点点阅读来看，String.Contains 方法似乎只是简单地调用了 String.IndexOf。不同之处在于 String.Contains 返回一个布尔值，而 String.IndexOf 返回一个整数，其中 (-1) 表示未找到子字符串。  

我建议用 100,000 次左右的迭代编写一个小测试，然后自己看看。如果我猜的话，我会说 IndexOf 可能会稍微快一些，但就像我说的那样，这只是一个猜测。  

Jeff Atwood 在[他的博客](http://www.codinghorror.com/blog/archives/001218.html)上有一篇关于字符串的好文章。它更多的是关于连接，但仍然可能会有所帮助。  

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2010-04-16T11:23:30.190

作为对此的更新，我一直在做一些测试并提供您的输入字符串相当大，然后并行正则表达式是我发现的最快的 C# 方法（假设您有多个我想象的核心）

例如，获取匹配的总数 -

```
needles.AsParallel ( ).Sum ( l => Regex.IsMatch ( haystack , Regex.Escape ( l ) ) ? 1 : 0 ); 
```

希望这可以帮助！

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T11:48:18.687

使用基准库，例如[Jon Skeet 最近的一次尝试](http://msmvps.com/blogs/jon_skeet/archive/2009/01/26/benchmarking-made-easy.aspx)来衡量它。

### [买者自负](http://en.wikipedia.org/wiki/Caveat_emptor)

与所有（微）性能问题一样，这取决于您使用的软件版本、检查数据的详细信息以及调用周围的代码。

作为所有（微）性能问题，第一步必须是获得易于维护的运行版本。然后可以将基准测试、分析和调整应用于测量的瓶颈，而不是猜测。

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2020-09-21T08:00:26.850

今天在一个 1.3 GB 的文本文件上进行了尝试。除其他外，每行都会检查是否存在“@”字符。对 Contains/IndexOf 进行了 17.000.000 次调用。结果：所有 Contains('@') 调用需要 12.5 秒，所有 IndexOf('@') 调用需要 2.5 秒。=> IndexOf 执行速度快 5 倍！！（.Net 4.8）

* * *

## 回答 #10

> 赞同：-9
> 
>             
> 
> 时间：2016-02-12T19:23:54.520

对于仍在阅读本文的任何人，indexOf() 在大多数企业系统上可能会表现得更好，因为 contains() 与 IE 不兼容！

# javascript - 如何在 jquery UI 中构建具有可保存状态的门户页面？

> ID：498701
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T11:51:09.867
> 
>         
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

我知道我应该花更多的时间研究这个问题并在提出问题之前先试一试，但我只有 2 周的时间来建立一个带有门户风格主页的网站（很像[http://www.bbc.co.uk](http://www.bc.co.uk)）。

我对 jQuery 相当熟悉，过去也使用过 jQuery UI 可拖动对象，但我想知道是否有任何教程或最佳实践示例说明如何构建具有多个拖放区的门户以及记住哪些“portlet”具有被拖入某种状态对象中的哪些放置区。

我需要能够使用 $ajax() 调用将状态对象保存到后端，并在用户重新登录到站点时以某种方式重新组织 portlet，大概是通过从后端发送 JSON 状态对象.

只是一些关于从哪里开始的想法会很有用。谢谢

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T12:06:08.477

我最近一直在考虑类似的事情。我能想到的最好的方法是在页面上放置几个“区域”来放置项目。在我的情况下，这些是 3 列。每次将一个块移动到不同的位置时，我都给了每个标识符并使​​用 Ajax 调用来更新该块的新位置。

例如，一个示例数据库表：

```
tbl.blocks:
  userid | blockid | column | placement
     1   |    2    |   1    |     3 
```

其中 column 是一个简单的列标识符，placement 是该列中的位置。我在页面加载时使用了一个查询，该查询按放置顺序加载了块，然后将它们写入。`blockid`指的是块表。

这是我发现看起来相关的教程：http: [//aymanh.com/drag-drop-portal-interface-with-scriptaculous](http://aymanh.com/drag-drop-portal-interface-with-scriptaculous)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T14:04:14.900

我的一个建议是使用后端生成的订购信息来构建页面，其中项目最初位于正确的位置，而不是依赖 javascript 在页面加载时重新排序它们。这将减少显示在用户眼前从默认变为他们选择的顺序的机会。即使关闭了 javascript，它也允许页面正确呈现，尽管它们显然会失去重新排序的能力。

我认为您很擅长使用 AJAX 将订单更改回传给服务器。您可以这样做的唯一其他方法是使用“编辑”模式，允许用户进行更改，然后“保存”以退出编辑模式。保存将回发当前的订单。我更喜欢 AJAX 方式，因为无论如何您都需要 Javascript 来处理拖放操作。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-02-18T04:18:02.510

这是一个非常好的起点 - [http://www.shopdev.co.uk/blog/sortable-lists-using-jquery-ui/](http://www.shopdev.co.uk/blog/sortable-lists-using-jquery-ui/)。还可以在此处查看此参考 - [http://docs.jquery.com/UI/Sortable](http://docs.jquery.com/UI/Sortable)。使用来自两个站点的信息，您可以尝试以下操作：

```
<div id='#left_sidebar'>
  <div id='box1'>somestuff</div>
  <div id='box2'>otherstuff</div>
</div>

$(#left_sidebar).sortable({
  update: function() {
     alert($("#left_sidebar").sortable("toArray"));
  }
}); 
```

你可以使用'serialize'而不是'toArray'。接下来，您需要使用 jquery/ajax 将数组（或字符串）发送到后端 - 尝试类似：

```
$.post(
  "backend_script.php", 
  $("#left_sidebar").sortable("toArray"), 
  onready_function()
); 
```

该行应该替换上面代码中的警报 - 当您确定警报显示您想要看到的内容（并保存）时。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2010-11-29T18:15:53.357

查看[jQuery.portal 插件](http://sourceforge.net/projects/jqportal/)：它内置了对保存状态的支持。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2012-01-09T07:54:58.947

要构建类似界面的自定义门户，您可以使用放置在三列布局中的简单 HTML div 元素。例如

```
 <ul id="col1">
    <li><div id="portlet1">...content...</div></li>
    <li><div id="portlet2">...content...</div></li>
</ul>
<ul id="col2">
    <li><div id="portlet3">...content...</div></li>
    <li><div id="portlet4">...content...</div></li>
</ul>
<ul id="col3">
    <li><div id="portlet5">...content...</div></li>
    <li><div id="portlet6">...content...</div></li>
</ul> 
```

使用 JQuery **sortable()** API 并使用占位符值对所有**li**元素进行排序，该**占位符**值实际上显示了放置元素的位置。排序完成后，使用**onDrop()** API 保存每个小部件的位置。在这种情况下，您可以将其保存如下：

```
portlet1 -- 1,1 (row,column)
portlet2 -- 2,1 
portlet3 -- 1,2 
portlet4 -- 2,2 
portlet3 -- 1,3 
portlet3 -- 2,3 
```

这些位置可以通过计算 DOM 中可排序元素的位置来获得。检索到这些位置后，可以将其保存在自定义数据库中，也可以在浏览器中离线保存（使用 HTML5 localStorage）。下次访问时，可以根据检索到的行和列值重新绘制 portlet。

希望这会有所帮助.. 可以在[http://network.nature.com/workbench](http://network.nature.com/workbench)找到一个可行的示例（您需要注册并登录才能在重新定位后保存小部件）

# c - 创建一个将数据发送到 sprintf 和普通 printf 的 my_printf？

> ID：498705
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T11:53:27.397
> 
>         
> 
> 标签：c, linux, gcc, printf

我正在使用 printf 和编写调用普通 printf 的 my_printf(...) 和将结果发送到特殊函数的 sprintf 的想法。（我在考虑 sprintf 因为它在大多数平台上的行为就像 printf 一样）。

我的想法是写一个小宏来做到这一点：

```
#define my_printf(X, Y...) do{ printf(X, ## Y); \
    char* 数据 = malloc(strlen(X)*sizeof(char)); \
    sprintf（数据，X，##Y）；\
    其他打印（数据）；\
    免费（数据）；}同时（0）

```

但是由于 sprintf 可以将字符串扩展为比 X 大得多的大小，因此该方法几乎直接中断。

而且只是添加一个数字做 malloc 似乎是解决问题的错误方法，从那时起我就把问题移到未来和我想要打印一个大表达式的一天......

有没有人对如何解决这个问题有更好的想法？或者我怎么知道 sprintf 结果有多大？

谢谢约翰

* * *

*更新：*我忘记了 printf 返回它打印多少个字符，并且由于我已经在宏中调用 printf ，因此添加一个保存数字的 int 是一件非常容易的事情。

```
#define buf_printf(X, Y...) do{ int len = printf(X, ## Y); \
    char* 数据 = malloc((len+1)*sizeof(char)); \
    sprintf（数据，X，##Y）；\
    其他打印（数据）；\
    免费（数据）；}同时（0）

```

*更新：*我正在考虑这个问题，也许使用一个看起来很像 ehemient 建议的正常功能是个好主意。那里的关键似乎是不同 printf 函数（vprintf、vsprintf 和 vsnprintf）的 v 版本。感谢您指出了这一点。

再次感谢约翰

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-01-31T12:02:26.893

使用 snprintf 计算大小。从手册页：

" 如果输出由于此限制而被截断，则返回值是在有足够空间可用的情况下将写入最终字符串的字符数（不包括尾随的 '\0'）

snprintf 是 C99 的标准。如果您只有 C89 编译器，请查看文档：预标准版本可能不会返回您想要的值。再次根据手册页，2.1 版之前的 glibc 如果输出被截断，则返回 -1，而不是所需的大小。

顺便说一句，sizeof(char) 在每个 C 实现中总是被定义为 1 :-)

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T12:02:15.520

最好的方法是使用可变参数。创建一个与 printf() 具有相同原型的函数，并使用 varargs 函数将数据传递给 sprintf 以填充所需的缓冲区，并在返回之前将该缓冲区传递给 printf("%s")。

许多早期的实现对最低级别的 printf() 调用都有 4K 限制，但我会选择更多。您可能只需要设置一个上限并坚持下去。

我们在日志系统中使用的一个技巧是使用 printf() 将数据写入 /dev/null 句柄。由于 printf() 返回写入的字符数，然后我们使用它来分配缓冲区。但这不是很有效，因为它涉及两次调用 printf() 类型的函数。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-02-01T08:50:09.560

由于您使用的是 Linux，我建议您使用`asprintf()`它 - 它是为您分配字符串的 GNU 扩展。多亏了 C99 可变参数宏，您不需要弄乱可变参数。

所以你的宏看起来像：

```
#define MY_PRINT(...) do { \
                          char *data; \
                          asprintf(&data, __VA_ARGS__); \
                          printf("%s", data); \
                          other_print(data); \
                          free(data); \
                      } while (0) 
```

注意！这是仅限 C99 和 GNU 的代码

**编辑：**现在它将只评估一次宏参数，因此使用 ("%d", i++) 之类的调用宏将正常工作。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-02-01T05:15:58.897

如果您总是在一个系统上运行`glibc`（即 Linux 和任何其他具有 GNU 用户空间的操作系统），`asprintf`那么行为就像`sprintf`但可以自动处理分配本身。

```
int my_printf(const char *fmt, ...) {
    char *buf = NULL;
    int len;
    va_list ap;

    va_start(ap, &fmt);
    len = vasprintf(&buf, fmt, ap);
    va_end(ap);

    if (len < 0) {
        /* error: allocation failed */
        return len;
    }

    puts(buf);
    other_print(buf);

    free(buf);
    return len;
} 
```

Pax 的答案更便携，但不是打印到`/dev/null`，这是一个更好的技巧：通过 POSIX，`snprintf`可以给定一个`NULL`缓冲区和`0`大小，它会返回它会写多少——但显然它实际上不会写任何东西.

```
int my_printf(const char *fmt, ...) {
    char *buf;
    int len, len2;
    va_list ap;

    va_start(ap, &fmt);
    len = vsnprintf(NULL, 0, fmt, ap);
    va_end(ap);

    buf = malloc(len + 1);
    if (!buf) {
        /* error: allocation failed */
        return -1;
    }

    va_start(ap, &fmt);
    len2 = snprintf(buf, len + 1, fmt, ap);
    buf[len] = '\0';
    va_end(ap);

    /* has another thread been messing with our arguments?
       oh well, nothing we can do about it */
    assert(len == len2);

    puts(buf);
    other_printf(buf);

    free(buf);
    return len;
} 
```

好吧，正如 onebyone 所说，一些旧系统没有兼容的`snprintf`. 不能全部赢...

# nhibernate - 使用 NHibernate 持久化 Blob 流

> ID：498712
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-01-31T11:59:28.570
> 
>         
> 
> 标签：nhibernate, stream, binary-data, blobs

如果我有一个类声明为：

```
public class MyPersistentClass
{
     public int ID  { get; set; } 
     public Stream MyData  {get;set; }
} 
```

如何使用 NHibernate 的映射将 MyData 属性持久化到数据库和从数据库中取出？

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2009-03-12T01:58:39.310

您可以使用自定义类型的 Stream 并根据您的存储需求对其进行映射。[但是，正如我在关于使用 NHibernate 对 BLOB 和 CLOB 进行延迟流式传输的博客系列](http://blog.calyptus.eu/seb/2009/03/large-object-storage-for-nhibernate-and-ddd-part-1-blobs-clobs-and-xlobs/)中提到的那样，使用 Stream 对象存在一些问题。

你真正需要的是一个 Blob 对象，它反过来可以创建一个 Stream 来读取数据。由于 Stream 包含有关您正在读取的位置的信息，并希望将其关闭和处置，因此当直接在域模型中使用时可能会产生一些问题。

我建议您查看[博客系列](http://blog.calyptus.eu/seb/2009/03/large-object-storage-for-nhibernate-and-ddd-part-1-blobs-clobs-and-xlobs/)以及[NHibernate.Lob 项目](https://github.com/calyptus/calyptus.lob)的源代码。它包括针对此类问题的各种映射选项。到目前为止，几乎没有记录，但还有更多。

# mysql - 在 Delphi 中连接到 Mysql 数据库的最佳方法是什么

> ID：498731
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T12:17:37.473
> 
>         
> 
> 标签：mysql, delphi

在 Delphi 中连接到 Mysql 5.1.x 时最好使用什么组件，为什么？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T12:46:54.993

没有其他数据库组件可以击败 DevArt 数据库组件，它们有[MyDac](http://www.devart.com/mydac/)和[UniDac](http://www.devart.com/unidac/)，它们都可以直接访问数据库而无需在客户端机器上安装 mysql 客户端，此外它们与其他组件相比提供了快速的性能和高质量

[MySQL 的数据访问组件](http://www.devart.com/mydac/) 

[通用数据访问组件](http://www.devart.com/unidac/)

并检查上面的页面以了解原因；-)

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T23:19:10.740

你应该看看[AnyDAC](http://www.remobjects.com/anydac.aspx)，它支持 MySQL 和许多其他数据库。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T18:56:48.773

[Devart](http://www.devart.com/mydac/)和[microOLAP](http://www.microolap.com/products/connectivity/mysqldac/)都提供访问 MySQL 数据库的组件。Devart 还为 dbExpress 用户提供[dbExpress 驱动程序。](http://www.devart.com/dbx/)

Bob Swart 在 Lulu 上发布了[Delphi for Win32 VCL Database Development](http://www.lulu.com/content/1165954)，如果您需要任何帮助。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T12:57:27.267

不要忘记 MySQL 的客户端 dll 是 GPL-ed，如果您使用它连接到服务器，您的应用程序必须是 GPL-ed。

有替代方案。直接连接到 MySQL 的组件跳过 GPL 的 dll。[DevArt](http://www.DevArt.com)有这样的组件（direct 和 dbx），在 tory.net 上有可以直接连接的免费组件。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T12:34:52.803

我不使用 MySQL，但如果可以，我更喜欢 dbExpress。它是单向的，这使得它非常快。虽然我最近没有做任何基准测试。

如果 dbExpress 不是你的菜，我找到[了这个 MySQL 访问组件列表](http://delphi.about.com/od/mysql/tp/aatpmysql.htm)。

# java - Java，按值传递，引用变量

> ID：498747
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T12:33:45.067
> 
>         
> 
> 标签：java, reference, pass-by-value

在以下示例中，我无法理解 Java 的“按值传递”操作：

```
public class Numbers {

    static int[] s_ccc = {7};
    static int[] t_ccc = {7};

    public static void calculate(int[] b, int[] c) {

        System.out.println("s_ccc[0] = " + s_ccc[0]); // 7
        System.out.println("t_ccc[0] = " + t_ccc[0]); // 7

        b[0] = b[0] + 9;  
        System.out.println("\nb[0] = " + b[0]); // 16

        c = b;
        System.out.println("c[0] = " + c[0] + "\n"); // 16
    }

    public static void main(String[] args) {

        calculate(s_ccc, t_ccc);

        System.out.println("s_ccc[0] = " + s_ccc[0]);  // 16
        System.out.println("t_ccc[0] = " + t_ccc[0]);  // 7 
    }
} 
```

我知道因为 s_ccc 是一个参考变量，所以当我将它提供给方法 calculate() 并在方法中对其元素进行一些更改时，即使在我离开该方法后更改仍然存在。我认为 t_ccc 也应该如此。它又是一个参考变量，我将它提供给方法calculate()，并在该方法中将t_ccc 的引用更改为s_ccc 的引用。现在 t_ccc 应该是指向一个数组的引用变量，该数组有一个 int 类型的元素等于 16。但是当方法 calculate() 离开时，似乎 t_ccc 指向它的旧对象。为什么会这样？改变不应该也保留吗？毕竟它是一个参考变量。

问候

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T14:22:49.293

这里有一个简单的方法来理解它。

Java 总是传递参数的副本。如果参数是原始类型（例如整数），则被调用的方法将获得原始值的副本。如果参数是引用类型，则被调用的方法会获取引用的副本（**而不是**所引用事物的副本）。

当您的`main`方法开始时，每个`s_ccc`和都`t_ccc`引用一个不同的数组。这是这种情况，括号表示变量，方括号表示实际的数组结构：

```
(s_ccc) ---> [7]
(t_ccc) ---> [7] 
```

假设您的意思是`calculate(s_ccc, t_ccc)`，那么在`calculate`方法的开头：

```
(s_ccc) ---> [7]  <---(b)
(t_ccc) ---> [7]  <---(c) 
```

局部变量`b`和分别是全局变量和`c`的*副本*。`s_ccc``t_ccc`

仍然在`calculcate`，`b[0] = b[0] + 9`完成后：

```
(s_ccc) ---> [16] <---(b)
(t_ccc) ---> [7]  <---(c) 
```

*引用的数组中`b`*的零（唯一）位置已被修改。

`c = b`内的赋值`calculate`产生了这种情况：

```
(s_ccc) ---> [16] <---(b)
               ^------(c)
(t_ccc) ---> [7] 
```

局部引用变量`c`现在包含与 相同的引用`b`。这对全局引用变量没有影响`t_ccc`，它仍然引用与以前相同的数组。

退出时`calculate`，其局部变量（在图表的右侧）消失。全局变量（左侧）未在 中使用`calculate`，因此它们不受影响。最后的情况是：

```
(s_ccc) ---> [16]
(t_ccc) ---> [7] 
```

既没有`c_ccc`也没有`t_ccc`改变；each 仍然引用与以前相同的数组`calculate`。调用`calculate`更改了由 引用的数组的*内容*`s_ccc`，使用对该数组的*复制引用*（在 中`b`）。

局部变量`c`作为 的*副本`t_ccc`*开始并在其中进行操作`calculate`，但这既不改变`t_ccc`自身也不改变它的引用数据。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T12:41:05.333

在较早的问题“ [Java 是否通过引用传递？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference) ”中对 Java 如何传​​递变量进行了扩展讨论。**Java 确实按值**传递对象引用。

在您的代码中，数组（即对象）的引用被传递到`calculate()`. 这些引用是按值传递的，这意味着对`b`and值的任何更改`c`仅在方法内可见（它们实际上只是`s_ccc`and的副本`t_ccc`）。这就是为什么`t_ccc`in`main()`从未受到影响。

为了强化这个概念，一些程序员将方法参数声明为`final`变量：

```
public static void calculate(final int[] b, final int[] c) 
```

现在，编译器甚至不允许您更改`b`or的值`c`。当然，这样做的缺点是您不能再在您的方法中方便地操作它们。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T12:42:06.953

该方法按值接收变量。这些值不能更改（就方法的调用者而言），但其中包含的值可以（如果它是一个对象，或者在这种情况下是一个数组）。

因此，当您更改数组内部的值 b[0] 时，可以在方法外部看到更改。然而线

```
c = b; 
```

将在方法内部更改 c 的值，但在方法外部不会看到该更改，因为 c 的值是按值传递的。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T12:43:33.130

该行`calculate(s_ccc, s_ccc);`表明您实际上并没有对 t_ccc 做任何事情。但是，如果这行已经读取`calculate(s_ccc, t_ccc);`，则效果保持不变。

这是因为您在这里为 c 分配了一个新值：`c = b;`

当为引用参数分配一个新值时，引用丢失了。

这是通过引用变量更改和分配新值之间的区别。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T12:52:43.063

在进入 时`calculate()`，`b`指向`s_ccc`和`c`指向`t_ccc`。如您所见，改变`b[0]`将因此改变。`s_ccc`

然而，任务

```
c = b; 
```

只有指向`c`同一个对象`b`的点，即`s_ccc`。它不会将指向的内容复制到`b`指向的内容`c`。结果，`t_ccc`是不变的。如果您将以下行添加到末尾`calculate():`

```
c[0] = c[0] + 5; 
```

`s_ccc[0]`将是 21 岁。

# biztalk - 我们不能在 Win XP (IIS 5) 中运行 BTSHTTPReceive.dll

> ID：498749
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T12:37:08.663
> 
>         
> 
> 标签：biztalk

我正在尝试在正确设置 bizTalk 的机器上运行 Biztalk Samples\AdaptersUsage\HTTPRequestResponse 的示例。作为 Windows XP，它具有 IIS 5.1，并且在教程 (ms-help://MS.BTS.2006/BTS06CoreDocs/html/81c66f61-d86c-49cf-8d24-21c67c68bc5a.htm) 中它是在第三步创建的应用程序池，但是在IIS 5中没有应用程序池的概念。是不是不能在win xp中运行本教程？

如果不是，我可以在 windows xp 机器上运行 biztalk 应用程序来与 web 服务通信吗？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-02-01T15:56:06.970

您需要遵循稍微不同的过程来配置 IIS 5.0，您需要将虚拟目录隔离级别设置为中或高，并使用组件服务设置身份。

详细步骤见链接

[http://msdn.microsoft.com/en-us/library/aa559072.aspx](http://msdn.microsoft.com/en-us/library/aa559072.aspx)

Saravana Kumar [MVP- BizTalk Server]
 [http://www.biztalk247.com/v1/](http://www.biztalk247.com/v1/) 
[http://blogs.digitaldeposit.net/saravana](http://blogs.digitaldeposit.net/saravana)

# java - Java，无限while循环，增量

> ID：498756
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T12:42:20.497
> 
>         
> 
> 标签：java, infinite-loop, increment

在下面的 Java 示例程序中，我得到了无限循环，我不明白为什么：

```
public class Time {

    public static int next(int v) {
        return v++;
    }

    public static void main(String[] args) {

        int[] z = {3, 2, 1, 0};

        int i = 1;

        while(i < 4) {
            System.out.println(z[i]/z[i]);
            i = next(i);
        }
    }
} 
```

在 while 循环中调用 next() 方法，并且 i 应该每次加 1：next() 应该返回 i++，并且在 while 循环中 i 的值应该加 1。

为什么可能是无限循环的原因？谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2009-01-31T12:43:45.640

您使用后增量。那应该工作：

```
public static int next(int v) {
        return v+1; //or ++v
    } 
```

所以基本上，你的例子中的下一个函数返回相同的数字，而不是增加一个。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2009-01-31T12:52:47.183

v++ 的定义是：

```
Return the current value of v then add one to v 
```

在您的情况下， v 是方法参数，它是 main 中变量 i 的副本，因此该方法只返回传递给它的相同值。v 中的增量值从不使用。

你可以使用 ++v。它的定义是：

```
Add one to v, then return the new value 
```

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T13:20:05.007

这里的区别是后缀与前缀运算符。

例如：

```
int a = 1;
int b = a++; // sets b to to 1 THEN increments a.

// a now equals 2.

int c = ++a; // increments a THEN stores the value in c, c = 3. 
```

调用返回 int++ 的方法不会达到您的预期。这与拥有以下内容不同：

```
while (expression) {
// code...
intValue++;
} 
```

因为在上面的代码块中，增量没有被传递给单独的变量，并且值的完全增量将在退出代码块、后缀或前缀形式之前发生。

```
public static int someMethod(int n) {
return n++;  
} 
```

而上面的代码块将返回 n，然后将其递增。但是由于您的代码将继续为 int n 提供相同的值，因此它将继续返回相同的值，因为它不会增加您的值，而是该方法的局部变量 n。但是，每次您传递一个新值时， n 都会重置并返回相同的内容，从而导致您的无限循环。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T12:48:25.430

您是否有理由不使用更惯用且更易于阅读的内容：

```
for(int i = 0; i < 4; i++){
    System.out.println(z[i]/z[i]);
} 
```

... 甚至：

```
for(int x : z){
    System.out.println(x / x);
} 
```

... ?

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:03:26.037

你应该使用

```
公共静态int next（int v）{
        返回 v + 1;
}

```

使用 v++ 是错误的，因为返回的值是 v 在递增之前的原始值。

此外，在 return 语句中使用 ++v 或 v++ 是不好的风格，因为 ++ 具有修改 v 的副作用，并且表达式中不应该有任何副作用。副作用只能在它们自己的语句中完成，以避免混淆和未定义的评估顺序。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T12:48:34.523

```
public static int next(int v) {
        return ++v;
} 
```

不要忘记数组在 Java 中从索引零开始，除以零会引发异常。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-09-15T06:53:05.377

发布增量工作，但你会得到在数组中使用 '0' 值的异常 bcas。逻辑上 0/0 是不可能的，它是无限的，所以会发生异常，避免除以“0”值

# c++ - 返回 C++ 模板类的具体实例化的工厂方法

> ID：498757
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T12:43:08.573
> 
>         
> 
> 标签：c++, templates, factory

我有一堂课

```
template <unsigned int N>
class StaticVector {
// stuff
}; 
```

如何在此类中声明和定义返回 StaticVector<3> 对象的静态工厂方法，例如  

```
StaticVector<3> create3dVec(double x1, double x2, double x2); 
```

?

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:22:37.357

“我如何在这个类中声明和定义”

在什么班？您已经定义了一个类模板，而不是一个类。您不能调用类模板本身的静态函数，您必须调用作为真实类一部分的特定版本的静态函数。

那么，您希望模板（以及它的所有实例化）具有返回 StaticVector<3> 的函数，还是希望该模板的特定实例化具有返回 StaticVector<3> 的函数？

如果是前者：

```
 template <unsigned int N>
  struct SV {
    int contents[N];
    static SV<3> get3dVec(int x, int y, int z) {
      SV<3> v;
      v.contents[0] = x;
      v.contents[1] = y;
      v.contents[2] = z;
      return v;
    }
  };

  int main() {
    SV<3> v = SV<1>::get3dVec(1,2,3);
  } 
```

为我工作。

如果是后者（您只希望 get3dVec 成为 SV<3> 的成员，而不是所有 SV<whatever> 的成员），那么您需要模板专业化：

```
 template <unsigned int N>
  struct SV {
    int contents[N];
  };

  template<>
  struct SV<3> {
    int contents[3]; // must be re-declared in the specialization
    static SV<3> get3dVec(int x, int y, int z) {
      SV<3> v;
      v.contents[0] = x;
      v.contents[1] = y;
      v.contents[2] = z;
      return v;
    }
  };

  int main() {
    SV<3> v = SV<1>::get3dVec(1,2,3); // compile error
    SV<3> v = SV<3>::get3dVec(1,2,3); // OK
  } 
```

如果除了通过省略基本不相关的模板参数来使调用代码看起来更好之外没有其他原因，我同意 Iraimbilanja 的观点，通常一个自由函数（如果你正在为重用而编写，则在命名空间中）对此更有意义例子。

C++ 模板意味着您在 C++ 中不需要像在 Java 中那样需要静态函数：如果您想要一个“foo”函数为类 Bar 做一件事而为类 Baz 做另一件事，您可以将其声明为函数带有可以是 Bar 或 Baz 的模板参数的模板（可能从函数参数中推断出来，也可能不推断出来），而不是使其成为每个类的静态函数。但是如果你确实希望它是一个静态函数，那么你必须使用一个特定的类来调用它，而不仅仅是一个模板名称。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:07:27.310

就像是 ：

```
template< unsigned int SIZE >
StaticVector< SIZE > createVec( const std::tr1::array< double, SIZE >& values )
{ 
     StaticVector< SIZE > vector;
     for( int i = 0; i < values.size(); ++i ) // here assuming that StaticVector have [] operator to access values on write
     {
         vector[i] = values[i];
     }

     return vector;
} 
```

...或变体肯定会起作用。（没有测试它）

用法是：

```
std::tr1::array< double, 3 > vectorValues = { 10.0, 10.0, 42.0 };

StaticVector<3> vector1 = createVector( vectorValues ); // if the compiler can guess the size from the array information
StaticVector<3> vector2 = createVector<3>( vectorValues ); // if you have to specify the size 
```

另一种方法是将 std::tr1::array 替换为基本数组，但使用原始数组需要您自担风险:)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T15:49:43.910

首先，我相信你原本的意思是返回

```
StaticVector<N> 
```

而不是总是使用 N==3 进行专业化。所以，你想要做的是这样写：

```
template <unsigned int N>
class StaticVector {
public:
    // because of the injected class-name, we can refer to us using
    // StaticVector . That is, we don't need to name all template
    // parameters like StaticVector<N>.
    static StaticVector create3dVec(double x1, double x2, double x2) {
        // create a new, empty, StaticVector
        return StaticVector();
    }

}; 
```

如果您真的想始终返回一个 3dVector，您可能希望将其限制为 N==3，这样例如`StaticVector<4>::create3dVec`就行不通了。您可以使用[**此处**](https://stackoverflow.com/questions/347096/how-can-i-get-a-specialized-template-to-use-the-unspecialized-version-of-a-member/347107#347107)描述的技术来做到这一点。

如果您想让这样的函数`createVec`适用于任何大小，您可能希望将参数替换为数组。你也可以这样做，但这是高级的，需要一些宏技巧与 boost::preprocessor 一起应用。我认为这不值得。下一个 C++ 版本将为此提供*可变参数模板。*无论如何，考虑使用这样的东西：

我认为这只会在这里不必要地使事情复杂化。一个快速的解决方案是使用 boost::fusion::vector 代替，将其放入类模板而不是上面的版本：

```
static StaticVector createVec(double (&values)[N]) {
    // create a new, empty, StaticVector, initializing it
    // with the given array of N values.
    return StaticVector();
} 
```

你可以用它

```
double values[3] = {1, 2, 3};
StaticVector<3> v = StaticVector<3>::createVec(values); 
```

请注意，它通过引用接受数组。你不能给它一个指针。那是因为它与参数的使用相匹配：您也不能为其他方式提供更少或更多的参数。它还将保护您免受以下情况的影响：

```
// oops, values is a null pointer!
StaticVector<3> v = StaticVector<3>::createVec(values); 
```

数组永远不能是空指针。当然，如果您愿意，您可以随时将数组参数更改为指针。这只是我个人的喜好:)

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T17:16:26.260

@litb

我想返回一个三元素向量。原因是这些向量应该是几何实体，所以不需要N太高（我不是弦物理学家，所以我不在11维空间工作）。我想创建一个模板以避免重复代码，但将 1 维、2 维和 3 维向量保留为单独的类型。

# database - 为 CMS 等版本控制系统创建数据库的最佳实践

> ID：498765
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T12:48:31.917
> 
>         
> 
> 标签：database, versioning

我正在使用需要对文档进行版本控制的系统，例如 CMS。

用它的表为它创建数据库的最佳实践和方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T12:52:17.260

我会先看看[MediaWiki](http://upload.wikimedia.org/wikipedia/commons/4/41/Mediawiki-database-schema.png)在他们运行 Wikipedia 的开源项目中是如何做到的。它们都是关于版本控制的。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T13:14:03.647

我更喜欢在第一次添加帖子时以与帖子相同的方式存储新的（新修订），但我有一个名为“childOf”的列，它存储父帖子的 ID，查询看起来像：

```
SELECT * FROM posts WHERE condition=value ORDER BY childOf DESC; 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T12:53:26.667

当我这样做时，我发现拥有如下表结构效果很好：

```
tbl.posts
  postid(PK) | title | category
tbl.revisions
  revisionid(PK) | postid(FK) | authorid(FK) | content | date 
```

可以更改的字段应该进入修订表（例如内容），不会进入帖子表的内容（postid、类别等）。

根据我在上次播客中听到的内容，StackOverflow 做了类似的事情。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2010-02-11T19:01:38.690

根据我的经验，最好有两个不同的表，一个包含不需要版本化的数据，另一个包含需要版本化的数据（正如 Spikolynn 在他/她之前的回答中所说）。

我在只使用一个表时发现的问题是，如果另一个表有一个指向该版本化表的外键，因为每次更新记录时主键都会更改，所以引用会丢失。为了恢复数据，这会导致查询非常复杂且效率低下。  

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2010-07-18T11:35:36.370

Chukc，您可以通过添加一个额外的字段并将其用作 foreignKey 来解决该问题

假设您有帖子：

```
id, revision, name, content 
```

修订将是：

```
id-publish or id-draft or id-revision-N 
```

然后，您将其他表链接到修订 id-publish 而不是 id。只要记住索引它:)

# linq-to-sql - 如何为 linq to sql 属性编写表达式？

> ID：498769
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T12:51:09.620
> 
>         
> 
> 标签：linq-to-sql

我为这个冗长的问题提前道歉。我竭尽全力让我的问题尽可能清晰。请多多包涵。;o) 任何帮助将不胜感激！

我有分支和文本类：

```
class Branch
 int ID
 Text WebDescription
 and a bunch of other properties

class Text
 int ID
 string UK
 string NL
 string FR
 string IT
 and a bunch of other properties as well 
```

我只想以适当的语言显示分支的 ID 及其描述。我只想要一个查询（没有额外的往返），它只检索两个字段（不是整个对象）。

我找到了三个解决方案

通过查询中的对象模型

```
// good: no round trips
// good: clean sql
// bad:  impossible to use the currentUserLanguage parameter
var lang = "NL";
var dbProject = new ProjectDataContext();
var query = from b in dbProject.GetTable<Branch>()
            select new
               {
                 b.ID,
                 WebDescription = b.WebDescriptionObject.NL // <-- problem
               };
var text = query.First().WebDescription; 
```

通过查询后的对象模型

```
// good: no round trips (eager loading of text object)
// good: possible to use the currentUserLanguage parameter
// bad:  loads the *whole* branch and text object, not just two fields
var lang= "NL";
var dbProject = new ProjectDataContext();
var query = from b in dbProject.GetTable<Branch>()
            select new
              {
                b.ID,
                WebDescription = b.GetWebDescriptionAsString(lang)
              };
var text = query.First().WebDescription; 
```

使用表达式

```
// good: I have the feeling I am on the right track
// bad: This doesn't work :o( throws an exception
var lang= "NL";
var dbProject = new ProjectDataContext();
var query = from b in dbProject.GetTable<Branch>()
            select new
              {
                b.ID,
                WebDescription = b.GetWebDescriptionAsExpression(lang)
              };
var text = query.First().WebDescription; 
```

下面是 GetWebDescriptionAsString 和 GetWebDescriptionAsExpression 这两种方法的代码。

```
public string GetWebDescriptionAsString(string lang)
{
  if (lang== "NL") return WebDescriptionObject.NL;
  if (lang== "FR") return WebDescriptionObject.FR;
  if (lang== "IT") return WebDescriptionObject.IT;
  return WebDescriptionObject.UK;
}

public Expression<Func<Branch, string>> GetWebDescriptionAsExpression(string lang)
{
  if (lang== "NL") return b => b.WebDescriptionObject.NL;
  if (lang== "FR") return b => b.WebDescriptionObject.FR;
  if (lang== "IT") return b => b.WebDescriptionObject.IT;
  return b => b.WebDescriptionObject.UK;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:11:25.290

在没有真正回答问题的情况下，最简洁的方法是将 Text 结构更改为更规范的形式，例如：

```
Text
    ID

TextTranslation
    ID
    TextID
    Lang
    TextValue 
```

其中每个文本都有许多翻译，每种语言翻译一个。

查询将变为：

```
var q = 
    from branch in dbProject.Branches
    join text in dbProject.Texts on branch.TextID = text.ID
    join translation in dbProject.TextTranslations on text.ID = translation.TextID
    where translation.Lang == lang
    select new
    {
        branch.ID,
        WebDescription = translation.TextValue
    }; 
```

这种方法还有其他优点，例如添加新语言不会改变模型结构。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:07:24.687

如果您使用存储过程，这将很容易做到。您反对使用 SP 作为解决方案吗？

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:09:28.227

如果存储过程有效，那么我很乐意使用它。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:24:29.287

在不了解您的整个问题的情况下

创建一个这样的存储过程：

```
CREATE PROCEDURE spGetTheTextINeed @Language char(2), @BranchID int
AS
  /* I don't know how your database is structured so you need to write this */
  SELECT MyText from MyTable WHERE Language=@Language and Branch=@BranchID 
```

然后您需要将 sp 添加到您的 DBML 中，然后您可以使用适当的参数调用所需的 sp：

```
var query = myDataContext.spGetTheTextINeed("NL",[your branch number]) 

  Dim str As String 
  str = query.MyText 
```

上面的代码并不准确 - 我不了解您的全部要求，但这应该可以帮助您入门。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:38:09.633

感谢您的及时回复。

我做了一个快速的尝试。UDF 已经在那里了，我只是不知道如何使用它。性能明显下降。第一个解决方案快 3 倍。据我了解，这种方法需要对数据库进行额外的往返。那是对的吗？

```
var query = from b in dbProject.GetTable<Branch>()
            select new
              {
                b.ID,
                WebDescription = db.fGetText(b.WebDescriptionID, (currentUserLanguage))
              }; 
```

# database - 如何将特定的、可变的“订单”保存到数据库中

> ID：498778
> 
>         
> 
> 赞同：30
> 
>         
> 
> 时间：2009-01-31T12:56:41.760
> 
>         
> 
> 标签：database, sorting, database-design

假设我有一些对象，并且我希望用户能够以他们希望的任何方式重新排序它们，例如，通过拖动它们。所以我有

*   起司

*   松饼

*   牛奶

然后用户将“牛奶”拖到顶部，创建新订单

*   牛奶

*   起司

*   松饼

是否有最佳实践如何将这些对象的顺序存储在数据库中？天真的方法可能是只为每个对象存储一个名为“order”的数值，但这对我来说似乎太麻烦了，因为你必须在大多数时间左右打乱 order-values。

* * *

## 回答 #1

> 赞同：23
> 
>             
> 
> 时间：2014-02-04T17:27:53.657

我发现处理这个问题的最好方法是有一个浮点顺序字段。当您在其他两个项目之间移动某些东西时，将该字段设置为其相邻项之间的中间。

这在读取和写入方面都很便宜。唯一的缺点是花车越来越长:)

* * *

## 回答 #2

> 赞同：17
> 
>             
> 
> 时间：2009-01-31T12:58:56.717

您建议的“幼稚”方法也是最佳实践！

* * *

## 回答 #3

> 赞同：13
> 
>             
> 
> 时间：2009-01-31T13:03:15.243

考虑到 Tony Andrews 的回答，您也可以为每个条目存储一个“下一个”索引。然后，当您将它们全部拉入时，请跟随链条走阵列。这使得移动项目更容易，因为您最多只需要触摸两行。

这种方法的缺点是，如果您需要一个子集（例如前 3 个项目），您仍然需要拉入所有项目，或者使用 SQL 循环。因此，它介于更新期间影响所有行或读取期间访问所有项目之间。与以往一样，测量速度并查看哪个更适合您的情况。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T13:19:05.553

特别看托尼安德鲁和马克的答案，似乎我真的只有两个选择：

*   保存“下一个”值，使对象表现得像一个链表（见马克的回答）

    这样，改变顺序很便宜，但我必须检索项目，*然后*按它们的“下一个”值对它们进行排序，这价格昂贵

*   保存“订单”值（请参阅 Tony Andrew 的回答）

    这使得检索便宜但保存新订单可能很昂贵，因为在最坏的情况下，我必须更改所有订单值。cletus 指出，可以使用 2^n 形式的大数作为阶乘数。

*Meta：*所有这些答案都是好的和正确的，我应该选择哪一个是正确的？

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T14:10:29.367

在我的应用程序中，读取操作将比写入更频繁地发生。使用数值来指示排序顺序并处理重新排序项目的成本。您可以按正确的顺序有效地检索项目以用于显示目的（在典型的应用程序中这种情况比重新排序更频繁），这一事实足以弥补这一点。

此外，如前所述，如果您检索数据的子集（过滤类型或其他内容），其余项目仍处于正确的排序顺序。

记住咒语 KISS

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T13:02:15.697

如果您想让它们以相同的顺序重新显示并且您希望它们能够随时重新排序，我认为您无法避免在数据库中存储一些指示显示优先级的值。我已经使用您描述的方法来订购常见问题解答中的项目，与赠款相关的研究人员，菜单中项目的顺序，......

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:03:54.353

是的，在关系数据库中没有顺序，这是基本概念之一。所以没有数值或类似的东西是没有办法的。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2020-06-16T22:59:53.930

您可以使用以前的 ID，每次新插入都将最后插入的行 ID 设置为以前的 ID，如下所示，

```
table, td {
  border: .2px solid black
}
```

```
<table>
  <tr>
    <td>ID</td>
    <td>NAME</td>
    <td>PREV_ID</td>
  </tr>
  <tr>
    <td>1</td>
    <td>first_item</td>
    <td><i>&lt;null&gt;</i></td>
  </tr>
  <tr>
    <td>2</td>
    <td>second_item</td>
    <td>1</td>
  </tr>
  <tr>
    <td>3</td>
    <td>thid_item</td>
    <td>2</td>
  </tr>
</table>
```

任何时候您使用最后一行 ID 轻松重新排序，如果您在每次新插入时都使用下一个 ID，则需要更新前一个，如果您在任何更新中使用排序顺序，则必须更新多行。现在可用于选择的 postgreSQL 递归查询

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2020-11-17T03:58:58.660

从理论上讲，如果您想以某个值获取特定元素，或者只是某种**B-Tree**来存储值，则理论上您可以使用[Order Statistic Tree 。](https://en.wikipedia.org/wiki/Order_statistic_tree)如果它们发生变化，那么在最坏的情况下，您正在更改项目。如果您有 30,000 件商品，则只需更改 4 或 5 件或它们即可保持订单。**`O(log n)`**

 **# c++ - 在 C++ 中将队列实例化为类成员

> ID：498783
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T13:01:34.763
> 
>         
> 
> 标签：c++, oop

假设我需要一个类来包装其他对象的优先级队列（意味着队列是该类的成员），并另外赋予它一些额外的功能。

我不太确定定义该向量的最佳方法是什么，主要是如何实例化它。

目前我在头文件中有这样的东西：

```
// in SomeClass.h:
class SomeClass
{
    public:
        SomeClass(); // constructor
            // other methods
    private:
        std::priority_queue<OtherClass> queue;
}; 
```

而源文件是这样的：

```
// in SomeClass.cpp
SomeClass::SomeClass():
    queue() // removed the constructor, no need to explicitly call it
    {}

// other methods 
```

* * *

**编辑：**根据雷的回答删除了电话。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T13:06:21.057

写吧：

```
SomeClass::SomeClass():
    queue() { } 
```

C++ 知道从那里自动调用构造函数而无需任何参数。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T13:12:14.897

您的成员是一个实例，但您正在做的是尝试使用指向新分配实例的指针初始化该实例。要么将初始化保留为空（正如 Ray 指出的那样），要么将其完全排除在构造函数的初始化列表之外。

```
SomeClass::SomeClass() {} 
```

具有与初始化相同的队列

```
SomeClass::SomeClass() : queue() {} 
```

如果您真的想使用 new 在堆上分配它，那么您的成员需要在标头中声明为：

```
private:
            std::priority_queue<OtherClass>* queue; 
```

但我建议不要这样做，除非您打算稍后让某个其他类接管同一队列实例的所有权，并且不希望 SomeClass 的析构函数释放它。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-01T06:56:11.800

以 Michel 的示例为基础，如果您真的希望将 pq 分配在堆上，您最好使用

```
`boost::smart_ptr<std::priority_queue<OtherClass> > queue;` 
```

或者作为最后的手段，如果您无法访问提升

```
`std::auto_ptr<std::priority_queue<OtherClass> > queue;` 
```

# c - 有符号到无符号转换

> ID：498805
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-01-31T13:11:34.367
> 
>         
> 
> 标签：c

> **可能重复：**
> 
>   [一个谜语（C 语言）](https://stackoverflow.com/questions/5611724/a-riddle-in-c)

看到这个代码

```
 #define TOTAL_ELEMENTS (sizeof(array) / sizeof(array[0])) 

  int array[] = {23,34,12,17,204,99,16}; 

  int main() 

  { 

      int d; 

      for(d=-1;d <= TOTAL_ELEMENTS-2;d++) 
          printf("%d\n",array[d+1]); 

      return 0;

  } 
```

现在这个循环不会运行。sizeof() 将返回一个无符号值，因此 TOTAL_ELEMENTS 具有一个无符号值。现在，进入 for 循环，请告诉我一元运算符 '-' 是否适用于有符号的 int 2 或隐式转换为无符号然后 '-' 运算符起作用。

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-01-31T13:34:01.327

在您的示例中， **d**在比较中转换为*unsigned int*。但是 -1 不能表示为*无符号*整数值，所以它被转换为 UINT_MAX。为了避免这种行为，您可以通过添加*(int)*将比较的右侧转换为带符号的*int*。

 *有关C 中整数转换的详细信息，请参阅[了解整数转换规则。](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T13:34:36.740

d <= TOTAL_ELEMENTS-2 中没有一元运算符。

TOTAL_ELEMENTS-2 简化为带有二元运算符 - 的表达式。该表达式然后变为无符号，因为它的操作数之一是无符号的。

在 d <= TOTAL_ELEMENTS-2 的情况下，d 的类型也出于同样的原因转换为 unsigned int。

该标准的相关部分是第 6.3.1.8#1 (ISO/IEC 9899:1999) 部分，其中说：

“否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。”

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T13:55:58.553

是`d`的，由于提升，该表达式中也有一个无符号类型，这就是循环失败的原因。

但是，问题是 C 编译器是否“认为”：

`(unsigned) ((unsigned) 5 - (unsigned) 2)`

即将 2 提升为无符号，或者：

`(unsigned) ((unsigned) 5 - (signed) 2)`

即减法取两种类型的操作数。当然，没关系，因为这对两者来说都是相同的操作。但是，重点是减法将返回一种类型的值，因此理论上它只能接受该类型的参数。所以它是第一个（unsigned int 2）。

PS (-2) 是一元的，而 (5 - 2) 是二元的。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-02-01T05:20:54.613

看，'-' 运算符是一元的，这是一个愚蠢的事情。忘记它。它是二进制 '-'，我意识到。

当 2 转换为 unsigned int 时，它变为 unsigned 2 ，因此 TOTAL_ELEMENTS-2 的值等于 unsigned 5 ，然后当 d 转换为 unsigned int 时，它得到一个很大的正值，

因此循环失败。

这是发生在这里吗？

是的，这段代码不是我写的，这是我在网上找到的一些 c 谜题。谢谢大家。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:28:35.317

我怀疑 的 无符号类型`sizeof()`会传播到表达式`TOTAL_ELEMENTS-2`，然后传播到 . 的两个操作数`d <= TOTAL_ELEMENTS-2`。在解决问题之前插入`(int)`juste 。`TOTAL_ELEMENTS`

# sql - 是否有以机器可读形式公开的美国各州列表？

> ID：498823
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-01-31T13:23:13.923
> 
>         
> 
> 标签：sql, csv, list, lookup

我在哪里可以找到表格中的美国州列表以导入我的数据库？

SQL 将是理想的，否则 CSV 或其他一些平面文件格式就可以了。

编辑：填写两个字母的州代码

* * *

## 回答 #1

> 赞同：19
> 
>             
> 
> 时间：2009-01-31T13:27:18.953

几周前我需要这个并将它作为 SQL 和制表符分隔放在我的博客上。数据来源于一月初的维基百科，所以应该是最新的。

美国各州：[http ://www.john.geek.nz/index.php/2009/01/sql-tips-list-of-us-states/](http://www.john.geek.nz/index.php/2009/01/sql-tips-list-of-us-states/)

如果我需要添加列或删除某些字段，我会使用 Worlds Simplest Code Generator - [http://secretgeek.net/wscg.asp](http://secretgeek.net/wscg.asp)

我也完成了世界各国和国际拨号代码。

国家：[http](http://www.john.geek.nz/index.php/2009/01/sql-tips-list-of-countries/)
 ://www.john.geek.nz/index.php/2009/01/sql-tips-list-of-countries/ 
IDC 的：[http ://www.john.geek.nz/index.php/ 2009/01/sql-tips-list-of-international-dialling-codes-idcs/](http://www.john.geek.nz/index.php/2009/01/sql-tips-list-of-international-dialling-codes-idcs/)

编辑：新：[新西兰的城镇](http://www.john.geek.nz/index.php/2009/01/sql-tips-list-of-new-zealand-towns-and-cities/)

* * *

## 回答 #2

> 赞同：16
> 
>             
> 
> 时间：2009-01-31T14:21:58.843

根据您需要状态的原因，值得记住的是有超过 50 个有效的状态代码。对于部署在美国以外的人来说，遇到不允许使用 AE 和 AP 等完全有效的州代码的地址输入的网站是很烦人的。更好的资源是[USPS](https://www.usps.com/send/official-abbreviations.htm)。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T13:29:06.143

将这些剪切/粘贴到记事本中，然后导入..应该很容易 - 毕竟只有 50 个：

```
 Alabama
 Alaska
 Arizona
 Arkansas
 California
 Colorado
 Connecticut
 Delaware
 Florida
 Georgia
 Hawaii
 Idaho
 Illinois
 Indiana
 Iowa
 Kansas
 Kentucky
 Louisiana
 Maine
 Maryland
 Massachusetts
 Michigan
 Minnesota
 Mississippi
 Missouri
 Montana
 Nebraska
 Nevada
 New Hampshire
 New Jersey
 New Mexico
 New York
 North Carolina
 North Dakota
 Ohio
 Oklahoma
 Oregon
 Pennsylvania
 Rhode Island
 South Carolina
 South Dakota
 Tennessee
 Texas
 Utah
 Vermont
 Virginia
 Washington
 West Virginia
 Wisconsin
 Wyoming 
```

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T13:27:24.210

出于兴趣：由于只有 50 个而且它们很少更改，您难道不能[从源](http://en.wikipedia.org/wiki/U.S._states)手动创建这样的列表并将其放在公共网络空间上吗？

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2014-02-12T23:54:32.890

作为对@cspoe7 敏锐观察的回应，这里有一个查询，其中包含所有有效状态及其根据 USPS 的缩写。我将它们按类别（美国官方州、哥伦比亚特区、美国领土、军事“州”）排序，然后按字母顺序排序。

```
INSERT INTO State (Name, Abbreviation)
VALUES
('Alabama','AL'), -- States
('Alaska','AK'),
('Arizona','AZ'),
('Arkansas','AR'),
('California','CA'),
('Colorado','CO'),
('Connecticut','CT'),
('Delaware','DE'),
('Florida','FL'),
('Georgia','GA'),
('Hawaii','HI'),
('Idaho','ID'),
('Illinois','IL'),
('Indiana','IN'),
('Iowa','IA'),
('Kansas','KS'),
('Kentucky','KY'),
('Louisiana','LA'),
('Maine','ME'),
('Maryland','MD'),
('Massachusetts','MA'),
('Michigan','MI'),
('Minnesota','MN'),
('Mississippi','MS'),
('Missouri','MO'),
('Montana','MT'),
('Nebraska','NE'),
('Nevada','NV'),
('New Hampshire','NH'),
('New Jersey','NJ'),
('New Mexico','NM'),
('New York','NY'),
('North Carolina','NC'),
('North Dakota','ND'),
('Ohio','OH'),
('Oklahoma','OK'),
('Oregon','OR'),
('Pennsylvania','PA'),
('Rhode Island','RI'),
('South Carolina','SC'),
('South Dakota','SD'),
('Tennessee','TN'),
('Texas','TX'),
('Utah','UT'),
('Vermont','VT'),
('Virginia','VA'),
('Washington','WA'),
('West Virginia','WV'),
('Wisconsin','WI'),
('Wyoming','WY'),
('District of Columbia','DC'),
('American Samoa','AS'), -- Territories
('Federated States of Micronesia','FM'),
('Marshall Islands','MH'),
('Northern Mariana Islands','MP'),
('Palau','PW'),
('Puerto Rico','PR'),
('Virgin Islands','VI'),
('Armed Forces Africa','AE'), -- Armed Forces
('Armed Forces Americas','AA'),
('Armed Forces Canada','AE'),
('Armed Forces Europe','AE'),
('Armed Forces Middle East','AE'),
('Armed Forces Pacific','AP') 
```

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:33:34.650

如果您需要记住它们，[让 Wakko 帮助您](http://uk.youtube.com/watch?v=sNUDDaEOvuY):)

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:34:54.850

[您可以在http://www.freebase.com/](http://www.freebase.com/)上下载很多列表。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-03T19:57:55.950

[http://www.geonames.org/export/](http://www.geonames.org/export/)

GeoNames 地理数据库可根据知识共享署名许可免费下载。它包含超过 800 万个地名，由 650 万个独特的特征组成，其中 220 万个人口稠密的地方和 180 万个备用名称。所有要素都分类为九个要素类之一，并进一步细分为 645 个要素代码中的一个。（更多统计数据...）。这些数据可以通过一些网络服务和每日数据库导出免费访问。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-02-03T20:09:01.777

您可以使用[google sets](http://labs.google.com/sets)列出所有状态以及或多或少的任何内容的列表。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2017-04-04T18:24:40.533

如果您只需要 52 个状态的 SQL 服务器脚本，您可以使用以下查询：已解决

```
INSERT INTO
 States ( StateName )
VALUES
    ( 'Alabama'),
    ( 'Alaska'),
    ( 'Arizona'),
    ( 'Arkansas'),
    ( 'California'),
    ( 'Colorado'),
    ( 'Connecticut'),
    ( 'Delaware'),
    ( 'District of Columbia'),
    ( 'Florida'),
    ( 'Georgia'),
    ( 'Hawaii'),
    ( 'Idaho'),
    ( 'Illinois'),
    ( 'Indiana'),
    ( 'Iowa'),
    ( 'Kansas'),
    ( 'Kentucky'),
    ( 'Louisiana'),
    ( 'Maine'),
    ( 'Maryland'),
    ( 'Massachusetts'),
    ( 'Michigan'),
    ( 'Minnesota'),
    ( 'Mississippi'),
    ( 'Missouri'),
    ( 'Montana'),
    ( 'Nebraska'),
    ( 'Nevada'),
    ( 'New Hampshire'),
    ( 'New Jersey'),
    ( 'New Mexico'),
    ( 'New York'),
    ( 'North Carolina'),
    ( 'North Dakota'),
    ( 'Ohio'),
    ( 'Oklahoma'),
    ( 'Oregon'),
    ( 'Pennsylvania'),
    ( 'Puerto Rico'),
    ( 'Rhode Island'),
    ( 'South Carolina'),
    ( 'South Dakota'),
    ( 'Tennessee'),
    ( 'Texas'),
    ( 'Utah'),
    ( 'Vermont'),
    ( 'Virginia'),
    ( 'Washington'),
    ( 'West Virginia'),
    ( 'Wisconsin'),
    ( 'Wyoming'); 
```

* * *

## 回答 #11

> 赞同：-1
> 
>             
> 
> 时间：2017-02-19T17:22:53.093

我只是要把这个美国 bash/linux 格式的列表放在这里，这样我可以节省一些时间：

```
alabama|alaska|arizona|arkansas|california|colorado|connecticut|delaware|florida|georgia|hawaii|idaho|illinois|indiana|iowa|kansas|kentucky|louisiana|maine|maryland|massachusetts|michigan|minnesota|mississippi|missouri|montana|nebraska|nevada|newhampshire|newjersey|newmexico|newyork|northcarolina|northdakota|ohio|oklahoma|oregon|pennsylvania|rhodeisland|southcarolina|southdakota|tennessee|texas|utah|vermont|virginia|washington|westvirginia|wisconsin|wyoming 
```

# c# - 如何解决这个涉及 C# 中的 BackgroundWorkers 的问题？

> ID：498831
> 
>         
> 
> 赞同：-3
> 
>         
> 
> 时间：2009-01-31T13:29:01.260
> 
>         
> 
> 标签：c#, multithreading, user-interface, file-io

我有一个 CopyFile 和 Directory 项目。但是当我开始复制 Gui 时，它就冻结了。我无法对文件复制做任何事情。所以我在 BackgroundWorker Component 找到了我的解决方案。但我对这个组件也有问题。

有 3 个单选按钮和命令按钮。当我单击命令按钮时，它正在检查是否`radiobutton1`已检查，否则是否已`radiobutton2`检查，否则是否`radiobutton3`已检查。如果`radiobutton1`选中，做很多事情，或者如果`radiobutton2`选中，做另一件事，等等。3 个单选按钮有 3 个后台工作人员。当我检查`radiobutton1`时，`backgroundworker1`dowork 事件工作。当我检查`radiobutton2`时，`backgroundworker2`dowork 事件工作。ETC...

我的问题是当我检查`radiobutton1`并单击命令按钮时。开始`backgroundworker1`做工作事件，但它也继续控制是否`radiobutton2`选中。它没有停止，所以我遇到了错误。我的代码如下：

```
private void button1_Click(object sender, EventArgs e)
{
    if (radioButton1.Checked)
    {
        backgroundWorker1.RunWorkerAsync();
    }

    if (radioButton2.Checked)
    {
        StreamReader sr = new StreamReader(Application.StartupPath + @"\hakimler.txt");

        while ((satir = sr.ReadLine()) != null)
        {
            try
            {
                bool copy = CopyDirectory(DosyaYolu.kaynak, @"\\" + satir + @"" + DosyaYolu.hedef, true);
                if (copy)
                {
                    kopya += 1;
                }
                else
                {
                    sw.WriteLine(satir);
                }
            }
            catch (Exception)
            {

            }
        }

        sw.Close();
        MessageBox.Show("İşlem tamamlandı", "İşlem Sonu", MessageBoxButtons.OK, MessageBoxIcon.Information);
        lblkopya.Text = "Başarıyla tamamlanan iş sayısı : " + kopya.ToString();
        return;
    }

    if (chkPersonel.Checked == true)
    {
        StreamReader sr = new StreamReader(Application.StartupPath + @"\personel.txt");

        while ((satir = sr.ReadLine()) != null)
        {
            try
            {
                bool copy = CopyDirectory(DosyaYolu.kaynak, @"\\ab04500-" + satir + @"" + DosyaYolu.hedef, true);
                //bool copy = CopyDirectory(Application.StartupPath + @"\TELEFON REHBERİ", @"\\" + satir + @"\c$\Documents and Settings\All Users\Start Menu", true);
                if (copy)
                {
                    kopya += 1;
                }
                else
                {
                    sw.WriteLine(satir);
                }
            }
            catch (Exception)
            {

            }
        }

        sw.Close();

        MessageBox.Show("İşlem tamamlandı", "İşlem Sonu", MessageBoxButtons.OK, MessageBoxIcon.Information);
        lblkopya.Text = "Başarıyla tamamlanan iş sayısı : " + kopya.ToString();
        return;
    }
    else
    {
        if (txtBilgisayar.Text == "" && txtDongu.Text == "")
        {
            MessageBox.Show("Boşlukları dolduralım bi zahmet :@", "Bilgisayar Kodlarını girelim lütfen!", MessageBoxButtons.OK, MessageBoxIcon.Warning);
            return;
        }

        bilgisayar = Convert.ToInt32(txtBilgisayar.Text);
        dongu = Convert.ToInt32(txtDongu.Text);

        for (int i = bilgisayar; i <= dongu; i++)
        {
            try
            {
                bool copy = CopyDirectory(DosyaYolu.kaynak, @"\\ab04500-" + bilgisayar + @"" + DosyaYolu.hedef, true);
                if (copy)
                {
                    kopya += 1;
                }
                else
                {
                sw.WriteLine(satir);
                }
            }
            catch (Exception)
            {

            }

            if (i == dongu)
            {
                sw.Close();
                MessageBox.Show("İşlem tamamlandı", "İşlem Sonu", MessageBoxButtons.OK, MessageBoxIcon.Information);
                lblkopya.Text = "Başarıyla tamamlanan iş sayısı : " + kopya.ToString();
            }

            bilgisayar += 1;
        }

}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    sw = new StreamWriter(DateTime.Today.ToShortDateString().ToString() + "_ulasmayanlar.txt", true);
    StreamReader sr = new StreamReader(Application.StartupPath + @"\savcilar.txt");

    while ((satir = sr.ReadLine()) != null)
    {
        try
        {
            bool copy = CopyDirectory(DosyaYolu.kaynak, @"\\" + satir + @"" + DosyaYolu.hedef, true);
            //bool copy = CopyDirectory(Application.StartupPath + @"\TELEFON REHBERİ", @"\\" + satir + @"\c$\Documents and Settings\All Users\Start Menu", true);
            if (copy)
            {
                kopya += 1;
            }
            else
            {
                sw.WriteLine(satir);
            }
        }
        catch (Exception)
        {

        }
    }
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    sw.Close();

    MessageBox.Show("İşlem tamamlandı", "İşlem Sonu", MessageBoxButtons.OK, MessageBoxIcon.Information);
    lblkopya.Text = "Başarıyla tamamlanan iş sayısı : " + kopya.ToString();
} 
```

* * *

如果radiobutton1检查或不检查，如果检查为true，则它的控制开始bgworkers做工作事件，如果radiobutton2检查或不检查，它会继续如果radiobutton3检查或没有blabla当它看到radiobutton1检查为true时它不会停止。

* * *

是的，我想停止控制另一个单选按钮的检查是否为真。如果单选**按钮 1 的检查为真**，则仅后台工作人员执行事件并停止。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T14:43:04.667

我不太确定你的问题到底是什么，但在你的代码中，如果你`radioButton1`被选中，那么后台工作人员会做这件事，否则不会。这不是你想要的吗？

我没有看到您提到的其他单选按钮的任何代码。

* * *

啊，所以你想在你检查另一个单选按钮时停止后台工作人员？在您的`dowork()`方法中，您必须检查是否存在`bg.CancellationPending == true`并退出该方法。

在初始化 BG 工作器后，您还必须设置`WorkerSupportsCancellation`为 true。

# javascript - 为什么 Javascript 没有真正的竞争对手？

> ID：498833
> 
>         
> 
> 赞同：19
> 
>         
> 
> 时间：2009-01-31T13:30:16.577
> 
>         
> 
> 标签：javascript

也许我只是不知道竞争对手，但是当谈到浏览器和 DOM 中的客户端脚本时，似乎就是 Javascript。我知道有 VBScript，但它甚至与 JS 不在同一个球场（对于初学者来说，甚至不是跨平台的）。

我只是好奇这是怎么来的。肯定会有一种新的语言来取代 Javascript 的普遍愿望：从头开始构建以完成 Javascript 近来弯曲和塑造的所有事情（看看对 JS 库的依赖）。

* * *

## 回答 #1

> 赞同：31
> 
>             
> 
> 时间：2009-01-31T13:49:44.760

势头。JavaScript 已经存在了 15 年左右，浏览器制造商已经工作了 15 年左右，以使其在他们的浏览器中工作。

如果出现竞争对手，它需要真正带来新的东西，以说服每个人 a) 采用它，b) 忍受锁定所有旧浏览器（如 IE7、Firefox 3.0、Chrome 1.0 等）的用户。 c) 找到所有现有库的替代品，如 jQuery、prototype、extJS 等。

简而言之：我们不需要另一个标准，让我们改进 JavaScript 并建立在已经存在的丰富基础上，而不是从石器时代重新开始。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2009-01-31T15:06:38.147

有！浮现在脑海中的是 Flash、ActiveX 和 Java……但这些都有其缺点。主要是安全性和与浏览器/DOM 的集成。

Flash 和 Java 生活在它们自己的小世界中，设计上（并解决安全问题）。他们不能改变他们周围的 HTML。ActiveX 可以访问 DOM，还可以访问您计算机上的所有其他内容。

JavaScript 似乎在灵活性和安全性之间找到了一个很好的平衡点，它可以轻松地交互和改变页面 HTML/CSS，做“安全”的网络，有一个不错的标准库（它有 JSON、XmlHttpRequest'sih 网络、DOM 操作之类的东西， 等等）。最重要的是，它基本上可以在所有现代浏览器、所有平台上以一致的方式使用（与 CSS 相比）

JavaScript 有问题，但没什么大不了的。最大的是性能。在 Digg 上加载评论页面并观察您的 CPU 使用情况。很有可能它会 100% 占用一个 CPU 内核。有一些项目可以改进这一点，比如[SquirrelFish](http://webkit.org/blog/189/announcing-squirrelfish/)、[TraceMonkey](https://wiki.mozilla.org/JavaScript:TraceMonkey)和其他奇怪的名字。但性能足以完成一些非常令人印象深刻的事情（例如 Google 电子表格）。

基本上，JavaScript 很棒，而且它的缺点几乎没有其他竞争对手那么大。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T16:46:21.347

JavaScript 之所以获胜，是因为它是由 Netscape 在其市场份额超过 90% 的时期推出的。IE等浏览器只好也支持。

如果要引入一种新语言，要么必须通过所有主要浏览器供应商之间的协议，要么必须在单个浏览器有足够的市场份额来推动它通过的时期。

几年前，当 IE 拥有极大的市场份额时（在 Firefox 和 Safari 兴起之前），微软可能已经成功了，但他们却选择了（出于战略原因）让浏览器停滞不前。

今天，一种新语言至少需要 Mozilla、IE 和 Safari 之间达成一致才能获得牵引力，我认为这不太可能。浏览器供应商已经在 J​​avaScript 的优化、兼容性测试等方面投入了大量资源——他们为什么要从头开始使用一种全新的语言——并且必须在未来几十年内同时支持两种语言？成本大大超过任何好处。

无论如何，相信从零开始设计的新语言会比 JavaScript 好很多是非常不现实的。

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T14:14:20.373

给我看另一种不依赖库的语言？

C、C++、C#、VBs ……都依赖于库。唯一的区别是它们通常带有一组标准的库。

那么我们真正想要的是一套标准的库吗？我们目前得到的是一系列库集（JQuery、prototype、extjs、mootools 等）。这是一件好事，因为我们的开发人员可以选择适合我们需求的。此外，这些库可以在不更改客户端组件的情况下被包含和发展。

我想不出Javascript 中没有缺少**引人注目的语言功能。**通过引人注目，我的意思是非常重要，以至于我愿意疏远那些不支持它的浏览器。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T14:37:07.050

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T13:39:13.953

客户端脚本还有其他语言，但是 AFAIK，没有一个被集成到浏览器中。

Flash 和 Silverlight 都有自己的语言。Flash 有 ActionScript，而 Silverlight 有很多和所有在 DLR 下工作的东西，包括 Python 和 Ruby。

*关于为什么*的第二点，更具体地说，您提到对 JS 库的依赖是该语言的一个缺陷；库很受欢迎，不是因为语言坏了，而是因为标准 API 坏了。如此伟大的库的存在建立在语言的力量之上。

JavaScript 并没有什么特别的问题，它有一些直到最近还是深奥或学术的特性。例如一流的功能。

此外，普遍/大规模现有运行时部署是一个非常引人注目的功能。;)

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T13:41:03.043

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T13:44:54.410

我认为具有类似 C 语法的 Javascript（ECMAScript）之所以如此受欢迎，是因为 C 的一些原因是：

*   语言关键字数量相对较少（更容易学习）。

*   简洁高效的语法（快速编写）。

*   通过不污染基本语言的外部库和 API（即浏览器 DOM、FilesystemObject 等）轻松扩展。

创建一种将提供许多“内置”当前库的新语言总是有风险的，因为它开始限制该语言的未来适用性并使学习基础语言变得更加困难。  

对于客户端浏览器语言，这将更加成问题，因为语言设计者不可能知道将来如何使用该语言。

我认为 Javascript 语言在它目前作为连接许多其他客户端技术的“粘合剂”的角色中很好。  

没有其他竞争对手，因为虽然 Javascript 并不完美，但它可以胜任。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:36:37.670

我猜是因为浏览器实现它的需求必须很大。

毕竟，处理和运行 JavaScript 的是浏览器，您必须拥有大量使用该语言的网站才能使浏览器对实现它感兴趣。如果一开始没有浏览器支持，那么没有人会使用它。

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T13:40:41.470

我想说这是因为客户端 Web 开发仍然是一个非常年轻的编程分支。如果您现在才看它，自从我们转向更快的“intertubes”以来，它已经变得更加普遍：）而且我们不再使用调制解调器了。

而基于 clent 的 Web 开发的问题在于，他将使用什么平台并不取决于开发人员，而是取决于浏览器制造商。他们变化缓慢。

在我看来，VB 脚本的消亡是它的 VB-innes。太多不必要的东西。至于javascript，它会成熟，但它是一个开始。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T16:23:55.663

浏览器支持。如果它不是 MS 技术，它很可能不会进入 IE。如果它不在 IE 中，那么没有人可以使用它。如果它是一种 MS 技术，那么很可能只有 IE 有权使用它，因为它是封闭源代码和专有的。如果只有 IE 支持它，那么只有一些开发人员会使用它。

为了挑战 JavaScript，它必须在所有主要的 Web 浏览器中都一样容易且更一致地工作。如果没有浏览器支持，任何新的客户端 Web 技术都注定会失败。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T13:36:28.843

我认为这与标准化有关，因为在上一次浏览器之战（即诉 netscape）期间有两个，Netscape 的 ECMA（如果你知道这是 JavaScript 的真名，给你 +1 Geek 点）和微软的 JScript，显然 ECMA (JavaScript) 胜出并成为事实上的标准。

现在，我们正在进行另一场浏览器大战，并且 2 个（如果算上 Chrome 12% FFS，则为 3 个）主要竞争对手 3 中的每一个都完全（有一些边缘情况）支持 JavaScript。

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T16:34:24.410

我的猜测是它无处不在并且易于集成到任何新的用户代理项目中。它内置于几乎所有浏览器中，因此您无需下载/安装/配置任何内容即可运行它。一旦您查看台式机（wii、iphone、windows mobile、n95 等）的用户代理，任何竞争者的可用性都会很快枯竭 - 因此您为 html 和 javascript 编写代码，因为它大部分时间都可以工作。

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T16:43:53.673

我同意 Michael 的观点，我们应该改进 Javascript，不要担心竞争对手，因为不会有任何竞争者，事实上，即使 Javascript 2.0 似乎还远未实现。

由于 Javascript 是一种模棱两可的语言，我们能够创建库 (jQuery) 甚至抽象 (Objective-J)，而不必担心 Javascript 的核心问题。

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2009-08-08T21:40:03.323

这么多年后，我们甚至没有在所有浏览器中实现相同的 CSS，JavaScript 也是如此，IE 有一个模型，其余浏览器有另一个模型（我的意思是像事件处理程序和附加事件）。

If new competitor comes, it has no chance, neither it has so much time as css and javascript had.

# c++ - 关于派生标准异常类的问题

> ID：498835
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-01-31T13:31:55.870
> 
>         
> 
> 标签：c++, exception

```
/* user-defined exception class derived from a standard class for exceptions*/

class MyProblem : public std::exception {

public:

    ...

    MyProblem(...) { //special constructor
    }

    virtual const char* what() const throw() {
    //what() function
    ...
    }

};

...

void f() {
...

//create an exception object and throw it

throw MyProblem(...);

...

} 
```

我的问题是为什么在what（）之后有一个“const throw（）”？通常情况下，如果有 throw() ，则意味着 throw() 之前的函数可以抛出异常。但是，为什么这里有 throw 呢？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-01-31T13:35:13.243

空括号`"throw()"`表示该函数不会抛出。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-01-31T16:52:50.850

**const**是 throw() 的一个单独问题。

这表明这是一个 const 方法。因此，调用此方法不会改变对象的状态。

**throw()**表示该方法不会抛出任何异常。  

对于该方法的**用户**来说，该方法只会通过正常方式返回，无需担心调用产生异常。

对于该方法的**实施者**来说，还有更多需要担心的事情。

与 Java 不同，这不是编译时约束，而是运行时约束。如果实现者编写函数时意外地从方法中抛出异常，那么运行时将停止应用程序死机（没有展开堆栈，没有析构函数等）。

但惯例是实施者将采取额外的预防措施来捕获所有内部异常。

**PS**

您可能想从 std::runtime_error 派生

（来自 Comment@onebyone.livejournal.com）：不完全是。

no throw 说明符被积极使用。它是异常安全的指示，表明该方法提供了[不抛出保证](https://stackoverflow.com/questions/88573/should-i-use-an-exception-specifier-in-c/89790#89790) 

另一方面，没有使用其他异常说明符，因为它们太危险了。如果你弄错了，它会导致应用程序通过 (std::unexpected) 终止。默认操作是应用程序终止而不展开堆栈并且不使用对象析构函数进行清理。在 MHOP 中，这几乎是不可取的。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T16:41:48.670

`const`限定函数`what()`，表示它不会修改异常对象的内部结构。

这`throw()`意味着它也不会引发异常 - 正如 OneByOne 和 Checkers 所指出的那样。

这两个词在很大程度上是不相关的，即使它们在签名中彼此相邻。

# ruby-on-rails - 您如何阅读现有的 Rails 项目？

> ID：498857
> 
>         
> 
> 赞同：15
> 
>         
> 
> 时间：2009-01-31T13:49:54.867
> 
>         
> 
> 标签：ruby-on-rails, ruby

当您开始处理现有的 Rails 项目时，您需要采取哪些步骤来理解代码？你从哪里开始？在深入了解控制器、模型、助手和视图之前，您使用什么来获得高级视图？您是否有任何有助于加快流程的特定技术、技巧或工具？

请不要用“Learn Rails & Ruby”来回应（就像[最后一个](https://stackoverflow.com/questions/397601/how-to-read-source-code-of-rails-sample-project)问这个问题的人得到的回应之一——他也没有得到太多回应他的问题，所以我想我会再问一次并提示更多） . 我对自己的代码很满意。整理别人的东西让我很头疼，我花了很长时间去摸索。  

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-01-31T20:37:16.917

看看模型。如果应用程序写得很好，这应该会给你一个领域模型的图片，这就是有趣的逻辑应该存在的地方。我还查看了模型的测试。

只需使用 Rails 应用程序并观察 URL ，控制器/视图的实现方式就*应该很明显了。*

不幸的是，在很多情况下，控制器甚至视图中存在过多的逻辑。这意味着您也必须查看这些目录。不幸的是，对这些层的测试往往不太清楚。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T14:30:21.837

首先，我使用该应用程序，注意有趣的控制器和动作名称。

然后我开始阅读这些控制器的代码，并在必要时阅读相关模型。视图通常不太重要。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2016-06-22T19:16:32.973

与迄今为止的许多人不同，我实际上不认为测试是开始的地方。我认为他们太狭窄了，太专注了。这就像试图通过首先放大分子内力和量子力学来理解基本的物理/力学一样。我还认为您过于依赖编写良好的测试，并且根据我的经验，很多人没有编写足够的测试或编写糟糕的测试（这并不能准确地了解代码实际上应该做什么）。

1）我认为首先要做的是了解该应用程序到底做了什么。使用它，至少要有足够长的时间来了解它的主要目的是什么，不同类型的数据可能是什么，你可以执行哪些操作，最重要的是，***为什么***。

2）你需要退后一步，看看大局。我认为最好的方法是从`schema.rb`. 这告诉你一些非常重要的事情：

*   这个项目的词汇/概念是什么。这个应用程序中的“用户”实际上是什么意思？为什么应用程序同时具有“用户”和“帐户”模型，它们有何不同/相关？

*   您可以通过查看了解有哪些模型，`app/models`但这实际上会告诉您每个模型包含哪些数据。

*   感谢`*_id`字段，您将了解模型之间的关联，这有助于您了解它们是如何组合在一起的。

我将通过查看每个模型的`*.rb`文件（希望是）评论、验证、关联以及与每个模型相关的任何其他逻辑来跟进这一点。留意可能存在于`lib/`.

3) 我个人会简单地看一下，`routes.rb`因为它会告诉你两个关键的事情：对应用程序中所有操作的简要调查，以及，如果路由和控制器/操作的命名和深思熟虑，快速了解不同功能可能存在的位置。

* * *

此时，您可能已经准备好深入研究需要学习的特定内容。找到您最感兴趣的功能的控制器并将其打开。开始阅读相关操作，看看涉及哪些模型，如果你愿意，***现在可以开始破解开放测试。***

不要忘记使用其他工具：Ruby/Rails 调试器、浏览器开发工具、日志等。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T14:15:24.583

我想说看看测试（或如果项目使用 RSpec，则规范）以从高层次上了解应用程序应该做什么。一旦您从顶层了解了模型/视图/控制器的预期行为方式，您就可以深入研究实现。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T14:21:23.477

如果 Rails 项目处于某种稳定状态，那么我一直非常喜欢使用调试器来帮助浏览代码库。我将启动浏览器并开始与应用程序交互，然后定位某些功能并在关联函数的开头设置断点。有了这些，我只需研究进入函数的参数和返回的值，以便更好地了解正在发生的事情。一旦你适应了，你可以稍微修改一下功能，以确保你了解正在发生的事情。仅仅对代码进行一些静态分析可能很麻烦！祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T20:47:01.360

我可以考虑两个原因来查看我以前没有参与过的现有应用程序：我需要进行更改或者我想了解一个或多个方面，因为我正在考虑将它们用作更改的输入考虑制作另一个应用程序。在第二种情况下，我包括阅读教育/启蒙。

特别是 MVC 模式的一个真正好处，通常是许多 Web 应用程序，它们很容易拆分为请求/响应对，这在某种程度上可以被孤立地理解。因此，您可以从一次互动开始，并从中加深理解。

当需要修改或扩展现有代码时，我应该对第一个更改将是什么有一个很好的了解——如果不是，那么我可能还不应该对代码进行愚弄！在 Rails 应用程序中，更改最有可能涉及视图、模型或两者的组合，我应该能够相当快地识别相关项目。如果有测试，我会检查它们是否运行，然后尝试编写一个暴露缺失功能的测试，然后我们就走了。如果没有测试，那就有点棘手了——我会担心我可能会无意中破坏某些东西：我会考虑添加测试来让自己更有信心，这反过来又会开始建立对以下领域的一些了解学习。我应该很快就能进入[红绿重构](http://en.wikipedia.org/wiki/Test-driven_development)循环，

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-02-01T01:07:06.060

运行测试。:-)

如果你幸运的话，它将建立在 RSpec 之上，并且无论实现如何，它都会描述行为。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-02-02T13:00:11.940

1.  我`rake test`在终端中运行

2.  如果环境没有加载，我会查看堆栈跟踪以确定发生了什么，然后我修复它以便环境加载并再次运行测试

3.  我启动服务器并在浏览器中打开应用程序。环顾四周。

4.  开始处理手头的任务。

5.  如果代码摇摆不定，我很高兴。如果代码很糟糕，我[会为了乐趣和利润而伤害它](http://goruco2008.confreaks.com/04_davis.html)。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-02-02T22:56:04.453

除了已经发布的运行规范和分解 MVC 的提示之外，我还喜欢：

```
rake routes 
```

作为获取应用程序中所有路线的高级视图的另一种方式

```
./script/console 
```

rails irb 控制台仍然是我最喜欢检查模型和模型方法的方式。抓取一些记录并在 irb 中使用它们。我知道它在开发和测试过程中对我有帮助。

* * *

## 回答 #10

> 赞同：-1
> 
>             
> 
> 时间：2009-02-02T05:18:30.593

查看文档，一些项目有很好的文档。理解别人的代码有点难，但是试试看……阅读代码；-)

# sql - 插入引用其他两个表的第三个表时，如何检查两个表之间的约束？

> ID：498865
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T13:58:43.570
> 
>         
> 
> 标签：sql, sql-server, database-design, foreign-keys, check-constraints

考虑这个示例模式：

```
Customer ( int CustomerId pk, .... )

Employee ( int EmployeeId pk,
           int CustomerId references Customer.CustomerId, .... )

WorkItem ( int WorkItemId pk,
           int CustomerId references Customer.CustomerId,
           null int EmployeeId references Employee.EmployeeId, .... ) 
```

基本上，三个表：

*   具有主键和一些附加列的客户表

*   一个员工表有一个主键，一个外键约束引用客户表的主键，代表客户的一个员工。

*   工作项表，其中存储为客户完成的工作，以及有关为其执行工作的特定员工的信息。

我的问题是。在添加新工作项时，我如何在数据库级别测试员工是否实际上与客户相关联。

例如，如果 Scott（员工）在 Microsoft（客户）工作，而 Jeff（员工）在 StackOverflow（客户）工作，我如何防止有人将工作项添加到数据库中，客户 = Microsoft，员工 = Jeff，哪个没有意义？

我可以使用检查约束或外键来完成它，还是需要一个触发器来手动测试它？

应该提到我使用的是 SQL Server 2008。

**更新：**我应该添加 WorkItem.EmployeeId 可以为空。

谢谢，埃吉尔。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T14:09:43.517

复合列（CustomerId，EmployeeId）上的外键不起作用吗？

```
ALTER TABLE WorkItem
ADD CONSTRAINT FK_Customer_Employee FOREIGN KEY (CustomerId, EmployeeId)
    REFERENCES Employee (CustomerId, EmployeeId); 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T14:50:13.623

您可以通过创建一个跨越这些表并强制各个表的集体约束的视图“WITH SCHEMABINDING”来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T14:33:34.093

为什么您希望employeeId 为null int WorkItem？也许您应该添加另一个表以避免这种特殊的奇怪情况。据我所知，最简单的做法是在 workItem 中添加对employeeid 的唯一约束，如果您想要的话，甚至可能在customerId 上添加唯一约束。

添加跨越多个表的约束的更一般的方法是定义一个应该始终为空的视图，并添加它为空的约束。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T15:06:03.607

你想在这里建模什么？

1.  您是一家承包机构或类似机构，并且您有一堆（在一段时间内）分配给客户的承包商。

2.  您实际上是在存储有关其他公司员工的信息（例如，您可能正在提供外包工资单服务）。

`Employee`在情况 (1) 中，您的表格似乎有问题。特别是当 Scott 与 MS 的合同到期并且他与其他人签约时，您无法保留历史数据，因为您需要更改`CustomerId`. 这也使所有`WorkItem`s 无效。相反，您应该有第四个表，例如，`CustomerEmployee`用于存储它。然后`WorkItem`应该引用该表。

在情况 (2) 中，您在 Employee 上的主键实际上应该是`CustomerId`, `EmployeeId`。两个客户可以有相同的员工 ID 号。然后 Kieron 的外键将起作用。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2011-10-14T16:30:14.227

我最近传到类似的情况，考虑架构： Table company (id_cia PK) Table product_group (id_cia FK to company, id_group PK) Table products (id_group FK to product_group, id_product PK, id_used_by_the_client null)

规则：数据库必须为公司的每个产品只允许一个 id_used_by_the_client，但该字段可以为空。例子：

插入公司 (1) = 允许

插入公司 (2) = 允许

插入 product_group (1, 1) = 允许

插入 product_group (1,2) = 允许

插入 product_group (2,3) = 允许

插入产品值 (1, 1, null) = 允许

插入产品值 (1, 2, null) = 允许

插入产品值 (1, 3, 1) = 允许

插入产品值 (1, 4, 1) = 不允许，在属于公司 1 的组 1 中已经存在 id_used_by_the_client = 1。

插入产品值 (2, 4, 1) = 不允许，在属于公司 1 的组 2 中已经存在 id_used_by_the_client = 1。

插入产品值 (3, 4, 1) = 允许，在属于公司 2 的组 3 中没有 id_used_by_the_client = 1。

我决定使用触发器来控制这种完整性。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T14:31:26.390

任何一个：  

*   将 EmployeeID 列设为 Employee 的主键（也可能是自动 ID），并将 EmployeeID 作为外键存储在 WorkItem 记录中，而不是将 Employee 和 Customer ID 存储在 WorkItem 中。您可以通过 Employee 表加入 Customer 表来检索 WorkItem 的 Customer 详细信息。

或者：  

*   使 WorkItem 的 EmployeeID 和 CustomerID 列成为 Employee 的复合外键。

我个人赞成第一种方法。

# image - 图片上传服务 - 图片位置和图片标识符

> ID：498868
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T14:00:25.160
> 
>         
> 
> 标签：image, file, upload, directory, file-upload

我想创建一个图片上传服务（是的，我知道 imageshack、photobucket、flickr 等）:)

我只看到 imageshack 以相同的方式显示图像所在的目录名称（“img294”、“1646”） - 我想这样做。

[http://img294.imageshack.us/img294/1646/**jquery](http://img294.imageshack.us/) **kd5** ****** . jpg

1）如果我采用此实施，是否有任何安全问题我应该注意？

2) 这些网站如何提供简短的唯一标识符（“kd5”）？

感谢大家的任何建议和帮助。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T14:10:29.710

对于初学者来说，除非您希望目录是公共的，否则将虚拟 index.html 文件放在那里，或者只限制公共用户对这些目录的访问。

至于唯一标识符，有很多方法可以解决这个问题......我最喜欢使用的一些信息块：

*   UNIX 时间（如果运行基于 Unix 的服务器）

*   文件的 md5 块

*   伪随机数

*   原始文件名的一部分

有了这些和许多其他信息，您应该很容易防止服务器上出现重复的图像名称冲突，您可以收集尽可能多的信息并将它们连接成文件名的字符串。md5 也可以放在数据库中，以帮助进行重复图像检测，这也可以节省磁盘空间。  

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T14:47:14.660

我可以向你保证他们都使用[URL 重写](http://en.wikipedia.org/wiki/URL_rewriting)。这也有助于解决安全问题。

# .net - 序列化不作为属性公开的状态

> ID：498876
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T14:09:22.393
> 
>         
> 
> 标签：.net, web-services, serialization

我有序列化的问题。所讨论的类代表一个网络数据包，并具有一个用于有效负载的相关字节数组，该数组可能为空。

我根据 Microsoft 框架设计指南建议使用 GetData 和 SetData 方法公开了这一点，因为为了防止奇怪的串扰，读取和写入数组需要复制它而不是传递引用。指南建议在对象创建等重大影响时获取/设置，这就是我所做的。

不幸的是，这导致内部成员没有被序列化。该成员被标记为**protected**。除了将其作为公共属性公开之外，当对象通过 Web 服务从服务器传递到客户端时，如何使它被序列化？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T14:35:32.747

（编辑：假设网络使用；原始问题中的协议不清楚）

你可以使用 WCF 吗？`DataContractSerializer`支持非公开会员：

```
[DataContract]
class Foo {
   [DataMember] // can also be used on a field - not just properties
   private int Bar {get;set;} // or internal or protected
} 
```

如果不是，您将不得不简单地将其视为 DTO，并将该属性公开。

其他选项 - 二进制序列化？BinaryFormatter 不能在平台之间移植（因此不是所有 Web 服务的理想选择），但[协议缓冲区](http://code.google.com/p/protobuf-net/)之类的东西更友好。但是没有 WDSL 支持，也没有任何 IPC 堆栈（它只是原始数据）。

# java - 哪些库支持 Java 6 ServiceLoader 工具（META-INF/服务）？

> ID：498892
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T14:20:41.810
> 
>         
> 
> 标签：java, dependencies, jdk1.6

我想知道 Java 6 中（现已正式支持）[ServiceLoader](http://java.sun.com/javase/6/docs/api/java/util/ServiceLoader.html)工具的采用率是多少。我想开始使用它作为查找依赖项的首选方式。显然，如果 jar 已经附带了必要的配置文件，这将变得容易得多。

只是四处逛逛，我很高兴看到 MySQL JDBC 驱动程序有“META-INF/services”（至少在 mysql-connector-j 的 v5.1 中）。

我很想知道有哪些其他主要/广泛使用的库可以提供此功能。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2010-05-29T18:53:18.447

Hibernate、PostgreSQL JDBC 仅举两例。

# java - Java Web 项目结构最佳实践

> ID：498917
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-01-31T14:37:36.567
> 
>         
> 
> 标签：java, model-view-controller, project, structure, packages

我正在开始一个使用 Hibernate 和标准 MVC 架构的新 Java Web 项目。我刚刚开始布局项目结构，在此过程中，我开始环顾四周，看看这方面是否有任何标准，关于控制器应该去哪里以及通常布置所有内容的最佳方式。但是，我还没有真正找到任何指导方针。

所以我很想知道的是

*   有人知道 Java Web 项目布局的最佳实践指南吗？

*   是否有人对不同类型的项目有一套特定的硬性规则？

*   人们是否倾向于按表示层、业务层和应用程序等不同层来拆分包？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-01-31T20:33:44.833

这实际上取决于您的 Web 框架。

例如，如果您使用 Wicket，java 文件和网页共存于同一目录中，而在大多数其他框架中，页面（.jsp 文件或任何您的演示引擎）和代码隐藏内容（java 文件）是完全分开的。

因此，请阅读框架随附的文档（Spring MVC、Struts、JSF 等）。

另一个好的建议是使用 Maven Archetypes 为您的特定框架生成骨架。一些 Web 框架（例如 seam）甚至有自己的代码生成工具，为您的 Web 项目奠定了基础。

我对 src 目录的唯一好建议（Yoni 没有提到）是根据业务目的而不是根据类型/层制作包

这意味着包

*   com.mycompany.myproject.customers

*   com.mycompany.myproject.departments

*   com.mycompany.myproject.billing

*   com.mycompany.myproject.reports

*   com.mycompany.myproject.admin

并不是

*   com.mycompany.myproject.entities

*   com.mycompany.myproject.tables

*   com.mycompany.myproject.graphs

*   com.mycompany.myproject.dialogs

*   com.mycompany.myproject.servlets

第二种结构过于通用，倾向于解决包含不相关内容的大型包并且难以维护。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T17:33:53.573

为了继续我之前的回答，我有很多网络项目。在所有这些中， src 下的结构或多或少是相同的。这些包大致分为 3 个逻辑层。

正如您所说，首先是表示层，用于 servlet、应用程序侦听器和帮助程序。

其次，有一个层用于hibernate模型/数据库访问层。第三层为业务逻辑。然而，有时这些层之间的界限并不清晰。如果您使用休眠进行数据库访问，则模型由休眠类定义，因此我将它们与 dao 对象放在同一区域。例如，com.sample.model 保存休眠数据对象，com.sample.model.dao 保存dao 对象。

如果使用直接的 jdbc（通常使用 Spring），那么有时我发现将数据对象放置在更靠近业务逻辑层而不是 db 访问层更方便。

（其余的东西通常属于业务层）。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T14:54:30.713

首先，要遵循流行的ide，ala Eclipse，Netbeans等的常规结构。以Eclipse为例，一切都已经安排好了WEB-INF和META-INF文件夹，因此打包和部署很容易。类源代码（通常在 src 下）会自动复制到 WEB-INF/classes。还有一些其他的考虑：

1.  如果您使用的是 MVC，那么您可能不需要直接访问您的 JSP。如果是这样，出于安全原因，请将 JSP 源代码保留在 WEB-INF/jsp 下。

2.  同样，将自定义标签文件保存在 WEB-INF/tags 下。

3.  在 js 文件夹中保留 javascript 文件，在 style 文件夹中保留 css 文件等。所有文件夹应与 WEB-INF 处于同一级别以模拟真实部署。

4.  最好根据层将代码分成包。显然，您的 Hibernate daos 不需要与您的 servlet 在同一个包中。

5.  如果您最终在同一个包中包含太多 servlet，请考虑根据功能对它们进行子打包，但它们有一个共同的祖先包是很好的 - 它有助于提高可读性。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2010-11-23T05:48:27.933

> [Java 网页结构](http://java.sun.com/blueprints/code/projectconventions.html)

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2012-04-14T04:46:24.367

使用[Maven webapp 原型布局。](http://maven.apache.org/archetype/maven-archetype-bundles/maven-archetype-webapp/)

```
project
|-- pom.xml
`-- src
    `-- main
        |-- java
        `-- webapp
            |-- WEB-INF
            |   `-- web.xml
            `-- index.jsp 
```

我`java`在这里的示例中包含了该文件夹，这可能很明显，但由于某种原因，它在上面的链接中被遗漏了。

# paypal - WPS中的PayPal“金额”格式是什么？

> ID：498920
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T14:39:39.837
> 
>         
> 
> 标签：paypal, format, numbers

PayPal 网站支付标准 (WPS) 表单在“金额”字段中允许的格式是什么？小数点必须是“。”，还是取决于货币？必须总是有两位小数，还是也可以有三位（对于具有如此小的提名的货币）或没有（对于具有恶性通货膨胀的货币）？

我知道这应该是 PayPal 的文档/论坛的问题，但第一个有很大的改进空间（至少可以说），第二个像熟睡的蜗牛一样快。我在那里[发布了一个问题](http://www.paypaldeveloper.com/pdn/board/message?board.id=basicpayments&message.id=33343)，但我预计不会在大约两周内得到任何答复。希望这里的人会有一个想法。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-08-01T15:38:36.160

看起来它不依赖于货币，API 最多需要两 (2) 个小数位，并带有句点分隔符。

> `amount`
> 
> [...] 限制：值必须是正数。没有货币符号。必须有两位小数，小数分隔符必须是句点 (.)，可选的千位分隔符必须是逗号 (,)。

[网站支付标准按钮管理器 API 概述](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ButtonMgrAPIIntro)

# ruby-on-rails - 我的网站必须支持多种语言，如何在 Rails 中路由？

> ID：498928
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T14:44:04.463
> 
>         
> 
> 标签：ruby-on-rails, routing

我有几个资源，我想以某种方式在标题中有一个 :lang 参数。所以 /en/posts/ 将使用 params[:lang] == en 指向 posts_controller/index。

这通常是怎么做的？必须在每个链接上添加 ?lang=en 看起来很难看，而且感觉非常不规范。

我想你知道我在说什么，即使我不是很清楚，这里的规范是什么？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T15:06:52.433

一种方法是：

```
map.resources :yourresources, :path_prefix => '/:lang' 
```

您还可以添加语言参数过滤器：

```
map.resources :yourresources, :path_prefix => '/:lang', :lang => /(en|de|jp)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-02-01T21:42:00.500

似乎为 Rails 2.3 计划的最新功能就在您的小巷：[http ://afreshcup.com/2009/02/01/rails-23-localized-views/](http://afreshcup.com/2009/02/01/rails-23-localized-views/)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-02-02T00:08:11.983

您不应该完全避开路由，并根据浏览器的 HTTP Accept-Language 标头设置语言吗？[见这里](http://github.com/iain/http_accept_language/tree/master)。

我想您应该为您的用户提供更改语言的选项，然后将该值存储在 cookie 中，然后可以在`before_filter`.

为什么要这样做？好吧，“HTTP 最佳实践”指出每个资源都应该有一个 URI。一篇文章仍然是同一篇文章，无论是西班牙语还是英语，所以应该有相同的 URI。`site.com/en/article`和`site.com/es/article`明显不是同一个URI，违反了这个原则

# visual-studio - 在 Visual Studio 安装项目中安装 100 个文件的最简单方法是什么

> ID：498932
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T14:50:28.677
> 
>         
> 
> 标签：visual-studio, r, setup-project

我有一个标准的 c# 应用程序，它充当“R”统计引擎的 GUI 前端。“R”由大约 50 个不同文件夹中的大约 600 个文件组成，可以通过 xcopy 部署在机器上“安装”。

我想将 R 引擎和我的 c# gui 打包到一个 setup.exe 中，这样用户就不需要先安装 R，然后再安装我的 c# 应用程序。

我知道我可以制作一个安装项目，然后一个一个地添加 R 文件，但是添加所有 600 个文件将非常乏味！

有没有更简单的方法来做我想做的事？我可以添加单个R文件夹并自动添加子文件夹和文件以节省我将它们一一添加吗？或者也许在我的设置项目中执行一个解压缩过程，这将一次性解压缩 R 引擎？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-08-03T05:05:08.480

您可以简单地将 Windows 资源管理器中的文件夹拖放到安装程序 vdproj 的文件系统视图中。层次结构中的所有文件和文件夹都将添加到您的设置项目中。

提示：如果文件夹在 SVN 或类似的源代码管理中，请在执行此操作之前删除所有隐藏文件夹！如果您有 PowerShell，请查看

```
get-childitem . -include _svn -force -recurse | foreach ($_) {remove-item -recurse -force $_.fullname} 
```

或者，您始终可以使用 Windows 搜索来查找层次结构中的所有隐藏目录并将它们从结果窗口中删除。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-04T15:12:59.503

我无法计算出项目文件，所以我最后做的是压缩我想要部署的所有文件，将 zip 文件添加到应用程序并创建一个自定义安装程序类来解压缩它们（使用 CSharp ziplib）

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2011-02-10T14:58:54.397

我认为Badjer是其中的大部分。

If your 600 files are part of a project and the "Build action" for each of these is set as content you can add all of these by simply:

1.  Going to the setup project

2.  Selecting Add > Project Output

3.  Selecting the project the files belong to from the drop down

4.  Selecting the "Content Files" option from the list below 

5.  Clicking OK.

You can check the files will be added to the appropriate place by going to View > File System on the setup project and checking that the content files output is being added to the correct folder. 

The files will be added to the install directory in the same hierarchy as they are specified in the project they belong to. 

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T15:03:43.003

看看项目文件。我相信是基于文本的。您可能可以通过一些复制粘贴替换直接在其中插入文件路径。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2010-01-29T20:26:49.447

您可以尝试的一件事是将 R 文件作为内容添加到 C# 项目中 - 然后安装项目可以为您复制它们（确保您配置安装文件以从项目中复制内容文件，而不仅仅是主要输出） .

您可以手动将 R 文件夹添加到项目中，也可以设置脚本来修改 .csproj 文件（它只是一个 XML 文件） - 内容项由这些节点表示：

```
<Content Include="myfile" /> 
```

# c# - .net 中 ics 文件的解析器

> ID：498938
> 
>         
> 
> 赞同：13
> 
>         
> 
> 时间：2009-01-31T14:57:20.300
> 
>         
> 
> 标签：c#, calendar, icalendar

我正在尝试找出获取 ics 文件并将其转换为可以放入数据库的格式的最佳方法。谁能推荐如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-01-31T22:22:19.483

有一个解析 iCalendar 文件的[示例](http://www.codeproject.com/KB/macros/iCalendar1.aspx)。它基于[DDay.iCal](http://www.ddaysoftware.com/Pages/Projects/DDay.iCal/)库。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-02-02T16:24:14.883

商业 .NET 库 Aspose.iCal 完成了这项工作

[http://www.aspose.com/community/blogs/salman.sarfraz/archive/2008/11/21/where-is-aspose-icalendar.aspx](http://www.aspose.com/community/blogs/salman.sarfraz/archive/2008/11/21/where-is-aspose-icalendar.aspx)（以前是[http://www.aspose.com/categories /file-format-components/aspose.network-for-.net/default.aspx](http://www.aspose.com/categories/file-format-components/aspose.network-for-.net/default.aspx) )

或者这个开源解析器（没试过）

[http://sourceforge.net/projects/icalparser/](http://sourceforge.net/projects/icalparser/)

这个在线 iCal 验证器就派上用场了

[http://severinghaus.org/projects/icv/](http://severinghaus.org/projects/icv/)

问候，坦伯格

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2016-12-29T07:24:19.603

我使用了[https://github.com/der-Daniel/ical.NET](https://github.com/der-Daniel/ical.NET)，它也可以在 Nuget 上找到。

# java - 基于选择更改事件的不同表单操作

> ID：498943
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-01-31T15:00:26.193
> 
>         
> 
> 标签：java, beehive, netui

我正在使用 Apache BeeHive。我的 JSP 包含一个带有下拉框 (<netui:select>) 和提交按钮 (<netui:button>) 的表单 (<netui:form>)。当按下提交按钮时，将提交表单的默认操作（“doAction1”）。  **我希望从下拉列表中选择一个选项时提交不同的操作（“doAction2”）。**   （参见图 1）。

我的第一个想法是创建一个 JavaScript 函数，将表单的*动作*属性更改为新的动作名称，然后提交表单（参见图 2），但这不起作用。我发现标签将“doAction1”转换为完整的 URL，如`http://localhost:7001/app/doAction1.do`.

我传递给 JavaScript submitForm(form, newAction) 方法的“doAction2”字符串无法将“doAction2”转换为适当的 URL（它可以，但只能以笨拙的方式）。我去寻找可以将普通操作名称转换为 URL 的 netui 标记，但我找不到。

那么，实现这一目标的正确方法是什么？

***图 1 - JSP 代码片段***

```
<netui:form action="doAction1" method="post">
    <netui:select dataSource="actionForm.field1"
                  optionsDataSource="${actionForm.field1Selections}"
                  onChange="submitForm(this.form, 'doAction2')"/>

    <p/>
    <netui:button>Submit</netui:button>
</netui:form> 
```

***图 2 - 更改表单操作和提交表单的 JavaScript 函数***

```
<netui:scriptBlock placement="before">

    function submitForm(form, newAction) {
        form.action = newAction;
        form.submit();              
    }

</netui:scriptBlock> 
```

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2011-10-01T08:18:18.993

```
function submitForm(form, newAction) {
    form.action = newAction + ".do";
    form.submit();                  
} 
```

或者

```
<c:url var="newActionUrl" value="/the/path/to/the/action/doAction2.do"/>

<netui:select dataSource="actionForm.field1"
              optionsDataSource="${actionForm.field1Selections}"
              onChange="submitForm(this.form, '${newActionUrl}')"/> 
```

# php - PHP 常量不存在：注意

> ID：498946
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T15:01:43.210
> 
>         
> 
> 标签：php, error-handling, constants

我想在我的 PHP 应用程序中使用常量作为配置变量，只有当常量不存在时（无论出于何种原因）它才会向我发出通知，但我希望这是一个错误（或异常），就像当我尝试回显一个不存在的变量时。

在不使用单独的函数来获取常量值的情况下是否可能，如下所示：

```
echo $non_existing_variable; // Error
echo NON_EXISTING_CONSTANT; // Now also an error 
```

一直在寻找，但找不到任何东西。

对我来说似乎有点合乎逻辑，当我尝试使用不存在的变量时，代码执行会立即退出并引发错误，为什么不使用常量呢？

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-01-31T15:05:34.043

我建议使用[定义](http://php.net/manual/en/function.defined.php)它你应该能够做类似的事情

```
if (defined('CONSTANT')) {
    echo CONSTANT;
} else {
    throw new Exception('Undefined Constant.');
} 
```

编辑：

正如我在下面的评论中所说，使用此方法的替代方法是使用自定义错误处理程序，通过使用[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)您应该能够捕捉到通知并采取行动。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-02-01T20:12:44.347

您可能会编写自己的错误处理程序。更多信息在这里：

[http://php.net/manual/en/errorfunc.examples.php](http://php.net/manual/en/errorfunc.examples.php)

[http://www.w3schools.com/php/php_error.asp](http://www.w3schools.com/php/php_error.asp)

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-02-01T03:50:45.903

您可以创建[一个自定义错误处理](http://php.net/set-error-handler)程序

1.  检查错误是否是通知

2.  检查错误字符串是否包含“未定义的类常量”

3.  如果两者都如此，请抛出您的异常

这会让你得到你想要的。这种方法的问题是您现在负责处理所有错误。PHP 的错误处理将被完全绕过。

另一种方法是定义一个配置类，并使用它的常量

```
class Config{
    const CONFIG_ONE = 42;
}
//will produce a fatal error 
if(Config::CONFIG_TWO){
   //...
} 
```

你会得到一个致命错误，而不是通知，这似乎更正确。不幸的是，如果没有类似的 hijink，您将无法捕获致命错误（请参阅手册的[set_error_handler](http://php.net/set-error-handler)条目中的注释）。

最后一个选项，与我们开始的方式不同，是创建一个配置单例，其中私有类变量保存您的值。当有人试图访问未定义的配置值时，这使您可以完全编程控制会发生什么，但您确实失去了常量的好处。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-02-01T00:46:22.843

我建议您安装一个错误处理程序，将所有错误（无论级别如何）都转换为异常。您的代码不应有任何错误，无论是警告还是通知。

请参阅：[处理错误作为异常的最佳方法](https://stackoverflow.com/questions/455331/handling-errors-as-exceptions-best-methods/455456#455456)

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T15:06:03.200

使用该[`defined`函数](http://docs.php.net/defined)检查是否存在具有给定名称的常量。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T15:22:03.527

是的，我知道定义的函数，但是每次检查一个常量是否存在是一项相当大的工作，所以我正在寻找某种 php 设置或技巧，而不使用额外的函数来自动抛出错误或异常，而不是常量不存在时的通知。

对我来说似乎是合乎逻辑的，当我尝试使用不存在的变量时，代码执行会立即退出并引发错误，为什么不是常量？

到目前为止感谢（-：

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2020-05-04T15:07:44.643

我遇到了同样的问题，我必须抓住错误的唯一方法是：

```
try {
   echo CONSTANT;
} catch(\Exception $e) {
   // do something else
} 
```

if (defined('CONSTANT')) { ... 对我不起作用！

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2020-10-03T21:27:18.060

如果您在同一个班级中，您可以使用它来访问常量

```
self::CONSTANT 
```

基本上添加 self::

如果您在另一个班级，请使用班级名称来访问它

```
EXAMPLE::CONSTANT 
```

# xaml - XAML：当我明确说要放在底部时，为什么按钮在顶部？

> ID：498961
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-01-31T15:07:40.733
> 
>         
> 
> 标签：xaml

在 XAML 中，我希望按钮位于红色矩形的底部。

我明确地说：

"Horizo​​ntalAlignment="右" 

VerticalAlignment="底部"

它向右，但保持在顶部。这是为什么？

[替代文字 http://tanguay.info/web/external/buttonTop.png](http://tanguay.info/web/external/buttonTop.png)

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="MultiplePages.Page"
    Width="300" Height="150">

    <StackPanel HorizontalAlignment="Stretch" 
        VerticalAlignment="Stretch" Width="300" Height="150" Orientation="Vertical">

        <StackPanel Width="300" Height="100" Background="Blue">
            <TextBlock x:Name="theTextBlock" Text="This is page one. This is page one. This is page one. This is page one. This is page one. This is page one. This is page one. This is page one. This is page one. This is page one. " 
            TextWrapping="Wrap" Height="100" Width="300" HorizontalAlignment="Left"/>
        </StackPanel>

        <StackPanel Width="300" Height="50" Background="Red">

            <Button Name="Switch" Content="Switch Page" Width="100" Height="20"
            HorizontalAlignment="Right" 
            VerticalAlignment="Bottom"/>

        </StackPanel>

    </StackPanel>

</UserControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T18:29:22.340

StackPanel 旨在从它的元素和它的容器中获取它的大小（取决于它的方向），虽然你所做的看起来是正确的，但这不是 StackPanel 的“意图”使用方式。虽然它看起来像是它设置的高度，但它的实际高度（它用于布局子控件）是它的内容（按钮）的大小。StackPanel 有它的用途，但如果您正在做的不是简单的控件堆栈，那么您通常应该使用其他东西。

您可以通过在里面粘贴一个大小的网格来修复它：

```
<StackPanel Width="300" Height="50" Background="Red">
          <Grid Height="50">
            <Button Name="Switch" Content="Switch Page" Width="100" Height="20"
            HorizontalAlignment="Right" VerticalAlignment="Bottom"
            />
          </Grid>
        </StackPanel> 
```

或者，对于该特定布局，您可能希望查看 DockPanel，它的行为将更像您期望的那样。

# javascript - 返回值 javascript UIWebView

> ID：498965
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-01-31T15:10:47.887
> 
>         
> 
> 标签：javascript, iphone

`return "hello"`我正在尝试使用 iPhone SDK获取 javascript 函数的返回值（例如：）。

在 OS X 上，WebView 方法`-stringByEvaluatingJavaScriptFromString`返回一个包含 js 函数返回值的 NSString，但在 iPhone 上没有返回值。

我该如何解决这个问题？

* * *

我找到了一个私有 UIWebViewDelegate 方法

```
- (void)webView:(id)fp8 runJavaScriptAlertPanelWithMessage:(id)fp12 initiatedByFrame:(id)fp16 
```

在 js 脚本中使用 alert() 函数时调用。所以我可以通过调用来获得“返回”值`alert(myReturValue)`。

这并不能解决我的问题，因为我需要公共 SDK 中的一些东西。

* * *

## 回答 #1

> 赞同：29
> 
>             
> 
> 时间：2009-02-03T03:24:41.913

返回字符串是最后一个 Javascript 语句的结果。不要放在**它**`return`前面！

对我有用的最低代码：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectZero];
[self.view addSubview:webView];
NSString *result = [webView stringByEvaluatingJavaScriptFromString:
                    @"function f(){ return \"hello\"; } f();"];
NSLog(@"result: '%@'", result); // 'hello'
[webView release]; 
```

所以我不得不将它添加`UIWebView*`到一个视图中（否则它会在之后崩溃），但不必将任何内容加载到 webview 中。

请注意，最后一条语句只是“ `f();`”，因此返回的字符串将包含 的评估结果`f()`。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2010-06-24T10:11:28.393

当我尝试从谷歌地图 API 调用一些函数时，我遇到了同样的问题。

返回对象有问题，所以我通过函数toString()解决了。

```
NSString *result = [webView stringByEvaluatingJavaScriptFromString:
                @"map.getBounds().toString();"]; 
```

# c# - 子类内置 WinForms 控件？

> ID：498968
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-01-31T15:11:48.820
> 
>         
> 
> 标签：c#, winforms, custom-controls

我在 Visual Studio 中遇到过使用 Add New Inherited User Control 自动生成自定义控件的子类的功能。

但是我还没有找到一个明确的描述，例如如何创建一个 Button 的子类。除了实际的方法之外，我还对 VS 是否为此提供有用的代码生成感兴趣？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T15:21:03.123

您只需创建自己的类来继承您想要子类化的控件。例如：

```
class BetterButton : Button { ...} 
```

那是容易的部分。现在，您可以选择覆盖各种方法或属性，具体取决于您希望使用新控件实现的目标。它可以是任何东西，真的。我经常看到使用的一件事是覆盖 OnPaint 以自定义方式绘制控件；并且仍然获得原始控件的行为。

在 UserControls 方面，我经常看到“父级”UserControl 包含一些 UI 逻辑和基本 UI 元素，而子类控件是父级的细化以供特定用途。

# javascript - 在 JavaScript 中修剪字符串？

> ID：498970
> 
>         
> 
> 赞同：1346
> 
>         
> 
> 时间：2009-01-31T15:12:23.267
> 
>         
> 
> 标签：javascript, string, trim

如何在 JavaScript 中修剪字符串？也就是说，如何在 JavaScript 中删除字符串开头和结尾的所有空格？

* * *

## 回答 #1

> 赞同：926
> 
>             
> 
> 时间：2009-01-31T15:26:30.163

自 IE9+ 以来的所有浏览器都有[`trim()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim)字符串方法：

```
" \n test \n ".trim(); // returns "test" here 
```

对于那些不支持的浏览器`trim()`，你可以使用[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)的这个 polyfill ：

```
if (!String.prototype.trim) {
    (function() {
        // Make sure we trim BOM and NBSP
        var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
        String.prototype.trim = function() {
            return this.replace(rtrim, '');
        };
    })();
} 
```

* * *

也就是说，如果 using `jQuery`,`$.trim(str)`也可用并处理 undefined/null。

* * *

看到这个：

```
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g, '');};

String.prototype.ltrim=function(){return this.replace(/^\s+/,'');};

String.prototype.rtrim=function(){return this.replace(/\s+$/,'');};

String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,'').replace(/\s+/g,' ');}; 
```

* * *

## 回答 #2

> 赞同：482
> 
>             
> 
> 时间：2009-01-31T15:16:43.087

如果您已经在使用该框架，那么来自[jQuery](http://api.jquery.com/jQuery.trim/)的修剪会很方便。

```
$.trim('  your string   '); 
```

我倾向于经常使用 jQuery，所以用它修剪字符串对我来说很自然。但是有可能对 jQuery 有强烈反对吗？:)

* * *

## 回答 #3

> 赞同：165
> 
>             
> 
> 时间：2011-12-15T15:21:41.340

虽然上面有一堆正确的答案，但应该注意的是，JavaScript 中的对象从*ECMAScript 5*`String`开始就有一个本地`.trim()`方法。因此，理想情况下，任何对 trim 方法进行原型设计的尝试都应该首先检查它是否已经存在。

 *```
if(!String.prototype.trim){  
  String.prototype.trim = function(){  
    return this.replace(/^\s+|\s+$/g,'');  
  };  
} 
```

**原生添加于：** 
JavaScript 1.8.1 / ECMAScript 5

因此支持：

火狐：**3.5+**

野生动物园：**5+**

Internet Explorer：**IE9+**（仅限标准模式！）[http://blogs.msdn.com/b/ie/archive/2010/06/25/enhanced-scripting-in-ie9-ecmascript-5-support-and-more .aspx](http://blogs.msdn.com/b/ie/archive/2010/06/25/enhanced-scripting-in-ie9-ecmascript-5-support-and-more.aspx)

铬：**5+**

歌剧：**10.5+**

ECMAScript 5 支持表： http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

* * *

## 回答 #4

> 赞同：129
> 
>             
> 
> 时间：2009-01-31T15:14:23.667

有[很多实现](http://blog.stevenlevithan.com/archives/faster-trim-javascript)可以使用。最明显的似乎是这样的：

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, "");
};

" foo bar ".trim();  // "foo bar" 
```

* * *

## 回答 #5

> 赞同：47
> 
>             
> 
> 时间：2009-01-31T15:15:16.693

简单版在这里[JavaScript trim 的通用功能是什么？](http://www.whadiz.com/what-is.aspx/programming/javascript/javascript-trim)

```
function trim(str) {
        return str.replace(/^\s+|\s+$/g,"");
} 
```

* * *

## 回答 #6

> 赞同：30
> 
>             
> 
> 时间：2012-01-25T11:02:05.623

我知道这个问题三年前就被问过了。现在，`String.trim()`是在 JavaScript 中原生添加的。例如，您可以直接修剪如下，

```
document.getElementById("id").value.trim(); 
```

* * *

## 回答 #7

> 赞同：22
> 
>             
> 
> 时间：2011-08-18T13:38:15.583

如果您使用的是 jQuery，请使用该`jQuery.trim()`函数。例如：

```
if( jQuery.trim(StringVariable) == '') 
```

* * *

## 回答 #8

> 赞同：20
> 
>             
> 
> 时间：2011-03-10T13:38:01.033

*Flagrant Badassery*有 11 种带有基准信息的不同装饰：

[http://blog.stevenlevithan.com/archives/faster-trim-javascript](http://blog.stevenlevithan.com/archives/faster-trim-javascript)

毫不奇怪，基于正则表达式的速度比传统循环慢。

* * *

这是我个人的。这段代码很旧！我为 JavaScript1.1 和 Netscape 3 编写了它，从那以后它只做了轻微的更新。（原来用的String.charAt）

```
/**
 *  Trim string. Actually trims all control characters.
 *  Ignores fancy Unicode spaces. Forces to string.
 */
function trim(str) {
    str = str.toString();
    var begin = 0;
    var end = str.length - 1;
    while (begin <= end && str.charCodeAt(begin) < 33) { ++begin; }
    while (end > begin && str.charCodeAt(end) < 33) { --end; }
    return str.substr(begin, end - begin + 1);
} 
```

* * *

## 回答 #9

> 赞同：15
> 
>             
> 
> 时间：2013-02-23T05:32:23.753

使用原生 JavaScript 方法：[`String.trimLeft()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/TrimLeft)、[`String.trimRight()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/trimRight)和[`String.trim()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/trim).

`String.trim()`[IE9+ 和所有其他主流浏览器都](http://kangax.github.com/es5-compat-table/)支持：

```
'  Hello  '.trim()  //-> 'Hello' 
```

`String.trimLeft()`并且`String.trimRight()`是非标准的，但在[*除 IE 之外*](http://kangax.github.com/es5-compat-table/non-standard/)[的所有主要浏览器中都支持](http://kangax.github.com/es5-compat-table/non-standard/)

 *```
'  Hello  '.trimLeft()   //-> 'Hello  '
'  Hello  '.trimRight()  //-> '  Hello' 
```

IE 支持很容易使用 polyfill，但是：

```
if (!''.trimLeft) {
    String.prototype.trimLeft = function() {
        return this.replace(/^\s+/,'');
    };
    String.prototype.trimRight = function() {
        return this.replace(/\s+$/,'');
    };
    if (!''.trim) {
        String.prototype.trim = function() {
            return this.replace(/^\s+|\s+$/g, '');
        };
    }
} 
```

* * *

## 回答 #10

> 赞同：12
> 
>             
> 
> 时间：2013-03-11T02:46:41.613

```
String.prototype.trim = String.prototype.trim || function () {
    return this.replace(/^\s+|\s+$/g, "");
};

String.prototype.trimLeft = String.prototype.trimLeft || function () {
    return this.replace(/^\s+/, "");
};

String.prototype.trimRight = String.prototype.trimRight || function () {
    return this.replace(/\s+$/, "");
};

String.prototype.trimFull = String.prototype.trimFull || function () {
    return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g, "").replace(/\s+/g, " ");
}; 
```

无耻地从[马特杜雷格那里偷走](https://github.com/duereg/SwimTraining/blob/master/lib/app/swim/string.js)。

* * *

## 回答 #11

> 赞同：7
> 
>             
> 
> 时间：2013-08-01T05:36:24.823

[从Angular js](https://github.com/angular/angular.js/blob/master/src/Angular.js#L455)项目中修剪代码

```
var trim = (function() {

  // if a reference is a `String`.
  function isString(value){
       return typeof value == 'string';
  } 

  // native trim is way faster: http://jsperf.com/angular-trim-test
  // but IE doesn't have it... :-(
  // TODO: we should move this into IE/ES5 polyfill

  if (!String.prototype.trim) {
    return function(value) {
      return isString(value) ? 
         value.replace(/^\s*/, '').replace(/\s*$/, '') : value;
    };
  }

  return function(value) {
    return isString(value) ? value.trim() : value;
  };

})(); 
```

并将其称为`trim(" hello ")`

* * *

## 回答 #12

> 赞同：5
> 
>             
> 
> 时间：2014-07-06T06:43:01.400

使用简单的代码

```
var str = "       Hello World!        ";
alert(str.trim()); 
```

浏览器支持

```
Feature         Chrome  Firefox Internet Explorer   Opera   Safari  Edge
Basic support   (Yes)   3.5     9                   10.5    5       ? 
```

对于旧浏览器添加原型

```
if (!String.prototype.trim) {
  String.prototype.trim = function () {
    return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, '');
  };
} 
```

* * *

## 回答 #13

> 赞同：3
> 
>             
> 
> 时间：2015-10-15T21:20:55.440

这是一个非常简单的方法：

```
function removeSpaces(string){
return string.split(' ').join('');
} 
```

* * *

## 回答 #14

> 赞同：1
> 
>             
> 
> 时间：2012-11-12T13:39:20.343

我有一个使用修剪的库。所以通过使用以下代码解决了它。

```
String.prototype.trim = String.prototype.trim || function(){ return jQuery.trim(this); }; 
```

* * *

## 回答 #15

> 赞同：1
> 
>             
> 
> 时间：2013-07-23T06:42:06.267

早在 2008 年，当 .trim() 函数在 JS 中不可用时，我已经为 trim 编写了这个函数。一些较旧的浏览器仍然不支持 .trim() 函数，我希望这个函数可以帮助某人。

***修剪功能***

```
function trim(str)
{
    var startpatt = /^\s/;
    var endpatt = /\s$/;

    while(str.search(startpatt) == 0)
        str = str.substring(1, str.length);

    while(str.search(endpatt) == str.length-1)
        str = str.substring(0, str.length-1);   

    return str;
} 
```

**解释**：函数 trim() 接受一个字符串对象并删除所有开头和结尾的空格（空格、制表符和换行符）并返回修剪后的字符串。您可以使用此功能修剪表单输入以确保发送有效数据。

以如下方式调用该函数为例。

```
form.elements[i].value = trim(form.elements[i].value); 
```

* * *

## 回答 #16

> 赞同：1
> 
>             
> 
> 时间：2016-06-19T16:02:55.120

你可以使用普通的 JavaScript 来做到这一点：

```
function trimString(str, maxLen) {
if (str.length <= maxLen) {
return str;
}
var trimmed = str.substr(0, maxLen);
return trimmed.substr(0, trimmed.lastIndexOf(' ')) + '…';
}

// Let's test it

sentenceOne = "too short";
sentencetwo = "more than the max length";

console.log(trimString(sentenceOne, 15));
console.log(trimString(sentencetwo, 15)); 
```

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2012-06-22T09:58:39.793

不知道这里可以隐藏什么错误，但我使用这个：

```
var some_string_with_extra_spaces="   goes here    "
console.log(some_string_with_extra_spaces.match(/\S.*\S|\S/)[0]) 
```

或者这个，如果文本包含输入：

```
console.log(some_string_with_extra_spaces.match(/\S[\s\S]*\S|\S/)[0]) 
```

另一个尝试：

```
console.log(some_string_with_extra_spaces.match(/^\s*(.*?)\s*$/)[1]) 
```

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2013-07-14T14:58:11.827

这是在 TypeScript 中：

```
var trim: (input: string) => string = String.prototype.trim
    ? ((input: string) : string => {
        return (input || "").trim();
    })
    : ((input: string) : string => {
        return (input || "").replace(/^\s+|\s+$/g,"");
    }) 
```

如果原生原型不可用，它将回退到正则表达式。

* * *

## 回答 #19

> 赞同：-4
> 
>             
> 
> 时间：2012-02-02T23:22:10.500

我的使用单个正则表达式来查找需要修剪的情况，并使用该正则表达式的结果来确定所需的子字符串边界：

```
var illmatch= /^(\s*)(?:.*?)(\s*)$/
function strip(me){
    var match= illmatch.exec(me)
    if(match && (match[1].length || match[2].length)){
        me= me.substring(match[1].length, p.length-match[2].length)
    }
    return me
} 
```

对此进行的一个设计决策是使用子字符串来执行最终捕获。s/\?:// （进行中间项捕获）并且替换片段变为：

```
 if(match && (match[1].length || match[3].length)){
        me= match[2]
    } 
```

我在这些 impls 中做了两个性能赌注：

1.  子字符串实现是否复制原始字符串的数据？如果是这样，首先，当需要修剪字符串时，会进行双重遍历，首先是正则表达式（可能是部分），其次是子字符串提取。希望子字符串实现仅引用原始字符串，因此子字符串之类的操作几乎可以免费使用。*十指交叉*

2.  正则表达式 impl 中的捕获有多好？中期，即产出价值，可能会很长。我还没有准备好相信所有正则表达式 impls 的捕获不会在几百 KB 的输入捕获时犹豫，但我也没有测试（运行时太多，抱歉！）。第二个总是运行捕获；如果您的引擎可以做到这一点而不会受到影响，也许使用上面的一些绳索技术，请务必使用它！

* * *

## 回答 #20

> 赞同：-7
> 
>             
> 
> 时间：2013-04-24T08:37:48.903

适用于 IE9+ 等浏览器

```
function trim(text) {
    return (text == null) ? '' : ''.trim.call(text);
} 
```

# c# - LinqToSQL - 不支持 SQL 转换

> ID：498986
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-01-31T15:18:49.667
> 
>         
> 
> 标签：c#, linq-to-sql, .net-3.5

今天早上我一直在为 LinqToSQL 的一个问题感到困惑。我将尝试用下面的简短示例进行总结，以解释我的观点。

我有两个数据库表：

```
table Parent
{
   ParentId
}

table Child
{
   ChildId
   ParentId [FK]
   Name
   Age
} 
```

这些在我的项目中具有 LinqToSQL 等效类，但是，我编写了两个我希望我的 UI 使用的自定义模型类，而不是使用 LinqToSQL 类。

我从前端的数据访问通过一个服务类，该服务类又调用一个存储库类，该存储库类通过 linq 查询数据。

在存储库级别，我通过以下方式返回 IQueryable：

```
return from data in _data.Children
       select new CustomModel.Child
       {
          ChildId = data.ChildId,
          ParentId = date.ParentId
       }; 
```

然后，我的服务层在返回该父级的子级列表之前添加了父级的附加查询限制。

```
return _repository.GetAllChildren().Where(c => c.Parent.ParentId == parentId).ToList(); 
```

因此，此时，当我运行所有内容时，由于无法转换自定义模型的 c.Parent 属性，我得到该方法没有支持的 sql 转换错误。[c.Parent 属性是对链接的父模型类的对象引用。]

这一切都说得通，所以我的问题是：

> 您能否为查询过程提供一些规则，将谓词表达式转换为正确的 SQL 片段以在数据库中运行，从而不会触发错误？

到目前为止，我还没有对 linq 做太多的工作，所以如果我没有很好地解释这一点，请原谅我缺乏经验。

此外，对于那些评论我选择的架构的人，我已经对其进行了更改以解决这个问题，我只是在这个阶段玩弄一些想法。我想知道是否有答案以供将来参考。

如果有人可以提供帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T16:31:28.833

首先，它引出了一个问题：为什么存储库会返回 UI 类型？如果 repo 返回数据库类型，这将不是问题。考虑重构，以便 repo 只处理数据模型，并且 UI 在最后（在任何组合之后）进行翻译。

* * *

如果您的意思是“并将其转换为数据库”-基本上，不。可组合查询只能使用在 LINQ-to-SQL 模型中定义的类型，以及少数受支持的标准函数。最近在一个相关问题上出现了类似的情况，[请参见此处](https://stackoverflow.com/questions/323704/cannot-call-methods-on-datetime-and-other-limitations/482956#482956)。

对于某些场景（不寻常的逻辑，但使用 LINQ-to-SQL 模型中定义的类型），您可以在数据库中使用 UDF，并自己编写逻辑（在 TSQL 中） - 但只能使用 LINQ-to-SQL（不是英法）。

如果音量不高，您可以在最后一位使用 LINQ-to-Objects。`.AsEnumerable()`只需在受影响之前添加一个`Where`- 这将在托管 .NET 代码中执行这一点逻辑（但谓词不会在数据库查询中使用）：

```
return _repository.GetAllChildren().AsEnumerable()
            .Where(c => c.Parent.ParentId == parentId).ToList(); 
```

# c# - .NET：寻找性能最好的 log4net appender

> ID：498988
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-01-31T15:19:57.650
> 
>         
> 
> 标签：c#, .net, asp.net, log4net

我们目前正在使用 log4net appender（web.config 片段）：

```
<appender name="FileAppender" type="log4net.Appender.RollingFileAppender"> 
```

寻找使用其他附加程序的经验。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-01-31T16:58:18.170

我以前的公司实际上发现[NLog](http://www.nlog-project.org/)更快。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T16:27:15.300

我们使用`SmtpAppender`ERROR 和 FATAL 级别来“邮寄回家”异常报告。在`ConsoleAppender`控制台中运行 Windows 服务时也是如此。

因为`FileAppender`我们设置`<staticLogFileName value="false" />`以避免滚动到新文件并且文件夹包含大量文件时不断增加的延迟。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-01-31T16:52:21.053

我们还使用 SmtpAppender 来记录致命错误并发送回异常报告，尽管它与自定义错误处理程序一起使用，它还会发送一封包含更多信息的电子邮件，例如页面 url、会话变量、请求值等（因为 SmtpAppender 只发送一些日志和异常详细信息）。

对于基于文件的日志记录，我们使用 RollingFileAppender，并让它每天生成一个新的日志文件，以避免最终产生巨大的日志文件。

对于控制台应用程序，我们使用 ColoredConsoleAppender。

我见过一些使用 AdoNetAppender 的 Web 应用程序，但请避免亲自使用它，因为我不确定性能会有多好，尽管将错误和致命消息记录到数据库中可能是个好主意（这会更少通常比调试消息）。

# delphi - 如何伪造输入以进行表单测试？

> ID：498996
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-01-31T15:26:39.790
> 
>         
> 
> 标签：delphi, events, testing, input

我正在为我的 Delphi 2009 应用程序构建一个测试工具。测试逻辑相当简单。确保表格正常工作被证明有点复杂。我想要一种模拟真实用户输入的方法，打开一个表单，让它认为有一个用户在输入某些东西并在某些地方点击，并确保它反应正确。我确定有办法做到这一点，我只是不知道它是什么。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-01-31T19:56:26.343

DUnit 有**GUITesting.pas**，它扩展了测试，因此您可以将点击、键和文本发送到表单上的控件，但仅此而已。

去年那里提到了 CodeGear 开发人员在内部使用的**[Zombie](http://www.stevetrefethen.com/blog/AutomatedTestingDelphiStyle.aspx)** GUI 测试框架，但自从 Steve 离开 Falafel 后就没有了。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-01-31T21:10:32.747

TestComplete 是一个不错的选择。GUI 测试的另一个商业选项是[SmarteScript](http://www.smartesoft.com/products_smartescript.php)：

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T15:32:10.467

对于.net，有用于 GUI 测试 win 应用程序的[NUnitForms 。](http://nunitforms.sourceforge.net/)虽然不知道delphi的任何开源。

[Test Complete](http://www.automatedqa.com/products/testcomplete/index.asp)可以测试delphi 表单，但它不是免费的。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T16:11:49.153

这有两个部分，首先你如何自动化 GUI，其次我如何“测试”它是否工作/不工作。

首先：要在 Windows 上自动化 GUI，请尝试使用 AutoIT。它是用于控制 Windows 界面、发送键盘输入事件等的免费工具。[http://www.autoitscript.com/autoit3/](http://www.autoitscript.com/autoit3/)

其次：测试是一个很大的领域，我不会尝试给你旋风之旅。但是驱动 GUI 和测试结果的机制可以使用 AutoIT 内置的类似 Basic 的语言来处理，或者将它与 Ruby 和 TestUnit（rubys 内置单元测试框架）等语言结合使用。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-01-31T16:17:44.007

如果那里没有任何 Deliphi 特有的东西，并且您需要一个快速的解决方案，请尝试一些易于学习的脚本解决方案，例如[AutoIt](http://www.autoitscript.com/autoit3/index.shtml)。对于更复杂的脚本，您可以查看[Scripted GUI Testing with Ruby](http://www.pragprog.com/titles/idgtr/scripted-gui-testing-with-ruby)。

但请注意，您不应该通过 GUI 测试太多功能，因为这样的测试很可能会中断。如果您最终需要进行过多的 GUI 测试，您可能需要重新考虑设计：将逻辑与 GUI 分离，并使用一些 xUnit 框架直接测试逻辑。

还可以查看有关[Windows 表单测试自动化](https://stackoverflow.com/questions/72016/windows-forms-test-automation)的类似问题。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-02-03T08:10:07.343

似乎 DUnit 有一些 gui 测试功能：[delphiextreme.com](http://delphixtreme.com/wordpress/?p=181)

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-01-31T15:39:05.443

不完全是您问题的答案，但是 Martin Fowler 有一个关于[GUI 架构](http://martinfowler.com/eaaDev/uiArchs.html)的非常好的页面（当然是恕我直言） ，其中最后一个条目是“Humble View”架构，专门针对测试驱动的软件开发。值得研究。

这当然不会帮助您完成测试所有控件是否正确连接并处理所有必要事件的任务，但它应该有助于最大限度地减少需要测试的 GUI 代码**量**。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2012-02-23T08:36:58.200

[OpenCTF](http://openctf.sourceforge.net/)对你有好处。

**引用：**

> OpenCTF 是 Embarcadero Delphi® 的一个测试框架插件，它自动检查表单（或 DataModules）中的所有组件。
> 
>   
>   
> 
> 它为许多组件必须通过重复测试的大型项目构建自动质量检查提供了一种简单的方法。
> 
>   
>   
> 
> 将 OpenCTF 测试添加到 DUnit 测试套件只需要几行代码。编写您自己的自定义组件测试只需要几秒钟。  
> 
>   
>   
> 
> OpenCTF 基于 DUnit 开源测试框架，并通过专门的测试类和辅助函数对其进行了扩展。

请前往[此处](http://sourceforge.net/projects/openctf/)下载。***** 
```**