# StackOverflow 问答 11282000-11282999

# android - 按钮上的 IllegalStateException

> ID：11282000
> 
> 赞同：1
> 
> 时间：2012-07-01T12:37:13.660
> 
> 标签：android, illegalstateexception

我遇到了这个异常，但描述对我一点帮助都没有：

```
07-01 12:31:09.723: E/AndroidRuntime(12530): java.lang.IllegalStateException: Could not execute method of the activity 
```

抛出它的函数的代码（因为它发生在我单击特定按钮时）是：

```
public void go(View view){
    String ghici = litera.getText().toString();
    cuvAfisat = cuvant.getText().toString();
    litera.setText("");
    if(ghici!="")
        if(cuvAles.contains(ghici)){
            for (int poz = 0; poz < cuvAles.length(); poz ++) {
                cuvAfisat = cuvant.getText().toString();
                if (cuvAles.charAt(poz) == ghici.charAt(0)) {
                    System.out.println(poz);
                    cuvAfisat = cuvAfisat.substring(0, poz*2-1)+ ghici+ cuvAfisat.substring(poz*2+1, cuvAfisat.length());
                    System.out.println(cuvAfisat);
                    cuvant.setText(cuvAfisat);
                }
                }
        }
        else {
            gresite.append(ghici+" ");
            valIncercari--;
            incercari.setText(valIncercari+"");
            if(valIncercari == 0){
                Toast.makeText(this, "Ai pierdut :(", Toast.LENGTH_LONG).show();
                litera.setEnabled(false);
                go.setEnabled(false);

                char[] stringArray = cuvAles.toCharArray(); 
                StringBuilder sb = new StringBuilder();

                for(int index=0; index < stringArray.length; index++) {
                   sb.append(stringArray[index]);
                   sb.append(" ");
                    }
                cuvant.setText(sb);

            }
        }
} 
```

问题是当这条线被删除时它不会这样做，所以我假设这是问题所在：（`cuvAfisat = cuvAfisat.substring(0, poz*2-1)+ ghici+ cuvAfisat.substring(poz*2+1, cuvAfisat.length());`它用来自 cuvAles 的一个字符替换来自 cuvAfisat 的字符，但它在每个字符之间都有空格，所以这就是为什么它有poz * 2。

提前感谢您的帮助！

编辑：

```
07-01 12:31:09.723: E/AndroidRuntime(12530): FATAL EXCEPTION: main
07-01 12:31:09.723: E/AndroidRuntime(12530): java.lang.IllegalStateException: Could not execute method of the activity
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.view.View$1.onClick(View.java:2144)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.view.View.performClick(View.java:2485)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.view.View$PerformClick.run(View.java:9080)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.os.Handler.handleCallback(Handler.java:587)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.os.Looper.loop(Looper.java:123)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.app.ActivityThread.main(ActivityThread.java:3683)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at java.lang.reflect.Method.invokeNative(Native Method)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at java.lang.reflect.Method.invoke(Method.java:507)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at dalvik.system.NativeStart.main(Native Method)
07-01 12:31:09.723: E/AndroidRuntime(12530): Caused by: java.lang.reflect.InvocationTargetException
07-01 12:31:09.723: E/AndroidRuntime(12530):    at java.lang.reflect.Method.invokeNative(Native Method)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at java.lang.reflect.Method.invoke(Method.java:507)
07-01 12:31:09.723: E/AndroidRuntime(12530):    at android.view.View$1.onClick(View.java:2139) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:26:00.720

我不完全理解你在这里想要做什么。

但是逻辑对我来说有点奇怪。

如果 poz = 0 ，以下情况不会失败吗？

```
cuvAfisat.substring(0, poz*2-1) 
```

此外，你能确定 poz 的值吗？

不会`poz*2+1`超过`cuvAfisat.length()`

# php - 规范化的数据库搜索查询

> ID：11282001
> 
> 赞同：1
> 
> 时间：2012-07-01T12:37:17.607
> 
> 标签：php, mysql

我在 MySQL 中有两个表：

`users`

```
Columns:
    1\. id
    2\. username
    3\. email
    4\. password 
```

`users_roles`

```
Columns:
    1\. id
    2\. user
    3\. role 
```

我将角色保存在这样的数组中：

```
array(
    '1' => 'Carpenter',
    '2' => 'Plumber',
    '3' => 'Hair Stylist'
) 
```

在搜索表单中，我有上述角色及其 ID 的复选框。在表单处理脚本中，我有`$roles`一个具有选中角色的数组。

如何查询数据库以搜索具有 Carpenter、Plumber、Hair Stylist 角色之一的用户？

**更新**：这是我提出的查询：

```
SELECT `users`.`id` 
FROM `users`
WHERE 
    `users`.`id` IN 
    ( 
    SELECT `user` FROM `users_roles` WHERE `role` IN ( 1, 2, 3 ) 
    ) 
GROUP BY `users`.`id` 
```

这是实现这一目标的最佳方式吗？还是这必然会导致某些服务器过载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:58:05.613

表是“用户”（如您所见），user_roles（如您所见），然后是“user_roles_link”，其中包含链接两者的 user_id 和 role_id。

要获取属于特定角色的用户，请从您主要要从中获取数据的表（在本例中为“用户”）开始，然后将 user_id “加入”到 user_role_link 表，然后从该表进入user_role 表（由 role_id 链接）。由 role_name 限制（WHERE）。

正如 lanzz 所说，更多的事情就是编写整个解决方案——但这应该足以让你制定出方法。

* * *

编辑：当你开始工作时（即 JOINS），记得检查索引。对关系（连接）很重要，以使它们快速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:16:13.630

更好的方法是添加一个名为角色的表

表角色

列

1.  ID
2.  角色

然后有另一个表将用户映射到他们的角色

表 User_Roles 列

1.  用户身份
2.  Role_ID

User_Roles 表将能够为一个用户存储多个角色，例如：

User_ID RoleID 1 2 1 4

然后在您的查询中，您可以使用一些[加入](http://dev.mysql.com/doc/refman/5.6/en/join.html)魔法。尽管我无法提供更详尽的答案，因为问题非常广泛。

# java - 缓慢改变颜色，Java 图形

> ID：11282003
> 
> 赞同：4
> 
> 时间：2012-07-01T12:37:37.733
> 
> 标签：java, swing, graphics, timer, gradient

我有一个渐变背景，我想慢慢地改变颜色，基本上是让它通过不同的颜色。颜色必须融合所有颜色，我不希望它闪烁颜色，这可能吗？请赐教解决方法，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:52:17.250

真的很难对我的辩护说任何话（无论多么聪明），（尝试并享受）

![在此处输入图像描述](../Images/36f2a8c3a918dcb4ee476788999b60b3.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import java.util.LinkedList;
import java.util.Queue;
import java.util.Random;
import javax.swing.*;

public class GradientPaintWithSwingTimerAndRunnable extends JFrame implements Runnable {

    private static final long serialVersionUID = 1L;
    private Queue<Icon> iconQueue = new LinkedList<Icon>();
    private JLabel label = new JLabel();
    private Random random = new Random();
    private JPanel buttonPanel = new JPanel();
    private JPanel labelPanel = new JPanel();
    private Timer backTtimer;
    private Timer labelTimer;
    private JLabel one = new JLabel("one");
    private JLabel two = new JLabel("two");
    private JLabel three = new JLabel("three");
    private final String[] petStrings = {"Bird", "Cat", "Dog",
        "Rabbit", "Pig", "Fish", "Horse", "Cow", "Bee", "Skunk"};
    private boolean runProcess = true;
    private int index = 1;
    private int index1 = 1;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                GradientPaintWithSwingTimerAndRunnable t = new GradientPaintWithSwingTimerAndRunnable();
            }
        });
    }

    public GradientPaintWithSwingTimerAndRunnable() {
        iconQueue.add(UIManager.getIcon("OptionPane.errorIcon"));
        iconQueue.add(UIManager.getIcon("OptionPane.informationIcon"));
        iconQueue.add(UIManager.getIcon("OptionPane.warningIcon"));
        iconQueue.add(UIManager.getIcon("OptionPane.questionIcon"));

        one.setFont(new Font("Dialog", Font.BOLD, 24));
        one.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        two.setFont(new Font("Dialog", Font.BOLD, 24));
        two.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        three.setFont(new Font("Dialog", Font.BOLD, 10));
        three.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelPanel.setLayout(new GridLayout(0, 3, 4, 4));

        labelPanel.add(one);
        labelPanel.add(two);
        labelPanel.add(three);
        //labelPanel.setBorder(new LineBorder(Color.black, 1));
        labelPanel.setOpaque(false);

        JButton button0 = createButton();
        JButton button1 = createButton();
        JButton button2 = createButton();
        JButton button3 = createButton();

        buttonPanel.setLayout(new GridLayout(0, 4, 4, 4));
        buttonPanel.add(button0);
        buttonPanel.add(button1);
        buttonPanel.add(button2);
        buttonPanel.add(button3);
        //buttonPanel.setBorder(new LineBorder(Color.black, 1));
        buttonPanel.setOpaque(false);

        label.setLayout(new BorderLayout());
        label.add(labelPanel, BorderLayout.NORTH);
        label.add(buttonPanel, BorderLayout.SOUTH);
        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
        label.setPreferredSize(new Dimension(d.width / 3, d.height / 3));

        add(label, BorderLayout.CENTER);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
        startBackground();
        startLabel2();
        new Thread(this).start();
        printWords(); // generating freeze Swing GUI durring EDT
    }

    private JButton createButton() {
        JButton button = new JButton();
        button.setBorderPainted(false);
        button.setBorder(null);
        button.setFocusable(false);
        button.setMargin(new Insets(0, 0, 0, 0));
        button.setContentAreaFilled(false);
        button.setIcon(nextIcon());
        button.setRolloverIcon(nextIcon());
        button.setPressedIcon(nextIcon());
        button.setDisabledIcon(nextIcon());
        nextIcon();
        return button;
    }

    private Icon nextIcon() {
        Icon icon = iconQueue.peek();
        iconQueue.add(iconQueue.remove());
        return icon;
    }

    // Update background at 4/3 Hz
    private void startBackground() {
        backTtimer = new javax.swing.Timer(750, updateBackground());
        backTtimer.start();
        backTtimer.setRepeats(true);
    }

    private Action updateBackground() {
        return new AbstractAction("Background action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                label.setIcon(new ImageIcon(getImage()));
            }
        };
    }

    // Update Label two at 2 Hz
    private void startLabel2() {
        labelTimer = new javax.swing.Timer(500, updateLabel2());
        labelTimer.start();
        labelTimer.setRepeats(true);
    }

    private Action updateLabel2() {
        return new AbstractAction("Label action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                two.setText(petStrings[index]);
                index = (index + 1) % petStrings.length;
            }
        };
    }

    // Update lable one at 3 Hz
    @Override
    public void run() {
        while (runProcess) {
            SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    one.setText(petStrings[index1]);
                    index1 = (index1 + 1) % petStrings.length;
                }
            });
            try {
                Thread.sleep(300);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    // Note: blocks EDT
    private void printWords() {
        for (int i = 0; i < petStrings.length; i++) {
            String word = petStrings[i].toString();
            System.out.println(word);
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            three.setText(word);
        }
        three.setText("<html> Concurency Issues in Swing<br>"
                + " never to use Thread.sleep(int) <br>"
                + " durring EDT, simple to freeze GUI </html>");
    }

    public BufferedImage getImage() {
        int w = label.getWidth();
        int h = label.getHeight();
        GradientPaint gp = new GradientPaint(0f, 0f, new Color(
                127 + random.nextInt(128),
                127 + random.nextInt(128),
                127 + random.nextInt(128)),
                w, w,
                new Color(random.nextInt(128), random.nextInt(128), random.nextInt(128)));
        BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        Graphics2D g2d = bi.createGraphics();
        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
        g2d.setColor(Color.BLACK);
        return bi;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T13:47:33.673

还要考虑`java.awt.image.MemoryImageSource`和 a `javax.swing.Timer`，[在此处](https://stackoverflow.com/a/7546025/230513)和下面进行说明。

![图片](../Images/3f493f0f1cf5ab5e6a413f9109d0e331.png)

# c# - 在 C# 中以特殊格式创建 XML 文件

> ID：11282007
> 
> 赞同：-5
> 
> 时间：2012-07-01T12:38:19.547
> 
> 标签：c#, .net, xml

我想以这种格式使用 C# 创建一个 xml 文件

你可以我吗？

我有一个文件，我想用这种格式创建一个文件。但我不知道我可以用 C# 中的哪些类来做到这一点。

```
<table>
    <independentVar>aero/h_b-mac-ft</independentVar>
    <tableData>
          0             1.229       
          0.1           1.124       
          0.15          1.116       
          0.2           1.124       
          0.3           1.105       
          0.4           1.041       
          0.5           1.034       
          0.6           1.019       
          0.7           1.008       
          0.8           1.003       
          0.9           1.001       
          1             1           
          1.1           1 
    </tableData>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:52:24.273

在 c# 中，有三个最常用的类来创建 XML：

1.  [XmlWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter%28v=vs.71%29.aspx)
2.  [xml文档](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)
3.  [XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

在不了解您的任务背景的情况下很难给您推荐。

您的示例中的另一个挑战是保留空格。默认 XML 设置修剪/忽略空格和换行符，除非您在 XML 元素上指定了一些特殊属性（请参阅：[msdn.microsoft.com/en-us/library/ms256097.aspx](http://msdn.microsoft.com/en-us/library/ms256097.aspx)）。不幸的是，一些应用程序/读者无论如何都会忽略它。

如果您必须使用自己的代码读取 xml，您可以将您的阅读器配置为在任何情况下都保留空白。请参阅：[msdn.microsoft.com/en-us/library/bb387014.aspx](http://msdn.microsoft.com/en-us/library/bb387014.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:44:54.553

在 C# 中创建 xml 内容有很多不同的方法，`System.Xml.Linq`其中一种是：

见这里：http: [//msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)

```
var el = new XElement("Table", 
    new XElement("independentVar", "..."),
    new XElement("tableData", "..."));

el.Save(filename); 
```

# javascript - Backbone.js 视图不呈现 EL

> ID：11282018
> 
> 赞同：3
> 
> 时间：2012-07-01T12:39:08.220
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我遇到了 Backbone.js 视图未呈现的问题。我的代码相当简单，如下所示：

```
TableView = Backbone.View.extend({
    initialize : function() {
        this.render();
    },
    render : function() {
        var template = _.template($("#table_template").html(), {});
        alert(this.el);
        this.el.html('Go');
        //this.el.html(template);
    },
    events: {

    },
}); 
```

这是实例化对象和设置 el 的代码

```
<script type="text/javascript">
            $(document).ready(function() {
                var t  = $("#table_1");
                //This works!!!
                t.html('Test');

                //Passing the element as the el, never works
                var table = new TableView({el : t});
            });
        </script> 
```

除了它总是在控制台中说：你`ncaught TypeError: Object #<HTMLDivElement> has no method 'html' .` 我在这里做错了吗？我正在使用 Jquery.1.7.2，主干 0.9.2，下划线 1.3.3 和 json2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T12:50:45.410

`this.el`是一个元素而不是 jQuery 对象。尝试`$(this.el).html()`或`this.$el.html()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:15:07.827

它应该是

```
var table = new TableView({el : "#table_1"}); 
```

# javascript - 在 Javascript 中对分层数据进行排序（邻接表/平面表）

> ID：11282021
> 
> 赞同：1
> 
> 时间：2012-07-01T12:40:25.577
> 
> 标签：javascript, hierarchical-data

我正在尝试对以下数据进行排序：

```
var data = [
    { path: '/a', order: 0 },
    { path: '/b', order: 1 },
    { path: '/a/d', order: 1 },
    { path: '/a/c', order: 0 }
]; 
```

进入：

```
var expected = [
    { path: '/a', order: 0 },
    { path: '/a/c', order: 0 },
    { path: '/a/d', order: 1 },
    { path: '/b', order: 1 }
]; 
```

我发现了一篇关于分层数据的好帖子：

[在关系数据库中存储分层数据的选项有哪些？](https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database)

从那个问题我想我正在使用一张平板：

> 邻接列表的修改，为每条记录添加一个级别和排名（例如排序）列。

该 SO 问题中的链接已关闭，因此我无法从中获得更多信息。

我设置了一个 JsFiddle 来断言我的排序功能：

[http://jsfiddle.net/U76ch/](http://jsfiddle.net/U76ch/)

我已经尝试了一些方法，但没有一个给出正确的结果。

一个完全不同的解决方案是添加顺序并按字母顺序排序。但是由于结果最终将成为 url，因此拥有 www.example.com/01-products/01-snowboard 有点难看。

**更新**

我创建了一个更复杂的 JSFiddle 示例来展示我正在尝试做的事情：

[http://jsfiddle.net/YSd3d/](http://jsfiddle.net/YSd3d/)

所以我试图按路径排序，但节点应该在它们的级别上按顺序排序。因此，当您按字母顺序排序但最后一个子项按顺序排序时，就像文件系统一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:47:12.477

```
var data = [
    { path: '/a', order: 0 },
    { path: '/b', order: 1 },
    { path: '/a/d', order: 1 },
    { path: '/a/c', order: 0 }
];

data.sort(function(a, b) {
  if (a.path === b.path) {
    return a.order < b.order ? -1 : 1;
  } else {
    return a.path < b.path ? -1 : 1;
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:46:01.277

你能对它做一个简单的排序吗？我不完全理解你在最后一段中的担忧。

```
var result = data.sort(function (a, b) {
  return a.path > b.path;
}); 
```

[http://jsfiddle.net/sftdq/](http://jsfiddle.net/sftdq/)

* * *

编辑。我将您的测试更改为显示 order > abc。在[jsfiddle 示例中工作](http://jsfiddle.net/sftdq/1/)

```
var data = [
    { path: '/a', order: 0 },
    { path: '/b', order: 1 },
    { path: '/a/a', order: 1 },
    { path: '/a/c', order: 0 }
];

var result = data.sort(function (a, b) {
    if( a.order === b.order ){
        return a.path > b.path;
    }
    else {
        return a.order > b.order;
    }
});

var expected = [
    { path: '/a', order: 0 },
    { path: '/a/c', order: 0 },
    { path: '/a/a', order: 1 },
    { path: '/b', order: 1 }
];

if (_.isEqual(result, expected)) {
    alert('Success');       
} else {
    alert('Failed');  
};
​ 
```

# ios - 如何在 iOS 模拟器中触发平移手势？

> ID：11282024
> 
> 赞同：8
> 
> 时间：2012-07-01T12:40:38.720
> 
> 标签：ios, ios-simulator, gesture

对于捏我可以按住 option/alt 键，单击并移动鼠标。什么锅？我用谷歌搜索但找不到答案。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-01T12:44:53.063

`Option`+ `Shift`+ 单击并拖动。

你也可以用它来调整你捏的地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T12:44:31.383

平移只是拖动，对吗？单击模拟器并在按住鼠标的同时移动鼠标。或者您想同时进行两次触摸平移。按住 Shift 键，您可以同时移动两个触点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T12:43:28.767

对于平移手势，您可以拖动视图，单击视图，然后在单击的同时拖动鼠标

# java - 在 android 中借助加速度计移动球

> ID：11282025
> 
> 赞同：0
> 
> 时间：2012-07-01T12:40:52.353
> 
> 标签：java, android, accelerometer

我已经编写了一个代码来借助 android 中的加速度计移动一个球，这样如果它触及 4 个边缘中的任何一个，它就会重新出现在对面的边缘上，我的问题是

1.ball 没有重新出现在对边 2.orientation 改变为 lanscape

这是我的代码

```
 public class Accelerate extends Activity implements SensorEventListener {

float x, y, sensorX, sensorY, a, b, centerX, centerY;
Bitmap ball;
SensorManager sm;
NixSurface ourSurfaceView;

public class NixSurface extends SurfaceView implements Runnable {

    SurfaceHolder ourHolder;
    Thread ourThread = null;
    boolean isRunning = false;

    public NixSurface(Context context) {
        super(context);
        ourHolder = getHolder();

    }

    public void pause() {
        isRunning = false;
        while (true) {
            try {
                ourThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
        ourThread = null;
    }

    public void resume() {
        isRunning = true;
        ourThread = new Thread(this);
        ourThread.start();
    }

    public void run() {
        // TODO Auto-generated method stub
        while (isRunning) {
            if (!ourHolder.getSurface().isValid())
                continue;

            Canvas canvas = ourHolder.lockCanvas();

            canvas.drawRGB(255, 255, 255);
            centerX = canvas.getWidth() / 2;
            centerY = canvas.getHeight() / 2;
            x += sensorX;
            y += sensorY;
            a = centerX + x;
            b = centerY + y;

            if (a > canvas.getWidth())
                a = 0;
            if (b > canvas.getHeight())
                b = 0;
            if (a < 0)
                a = canvas.getWidth();
            if (b < 0)
                b = canvas.getHeight();

            canvas.drawBitmap(ball, a, b, null);
            ourHolder.unlockCanvasAndPost(canvas);
        }
    }

}

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    if (sm.getSensorList(Sensor.TYPE_ACCELEROMETER).size() != 0) {
        Sensor s = sm.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
        sm.registerListener(this, s, SensorManager.SENSOR_DELAY_NORMAL);
    }
    x = y = sensorY = sensorX = 0;
    ball = BitmapFactory.decodeResource(getResources(), R.drawable.nix);
    ourSurfaceView = new NixSurface(this);
    ourSurfaceView.resume();
    setContentView(ourSurfaceView);
}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    sm.unregisterListener(this);
    super.onStop();
}

public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub
    // nothing to do here
}

public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub

    try {
        Thread.sleep(16);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    sensorX = -event.values[0];
    sensorY = event.values[1];
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:13:10.387

我猜您的问题是您假设传感器原点 (x=0,y=0) 是屏幕中心。传感器原点是屏幕的左上角（X 指向左侧，Y 指向下方），因此将 a & b 与`canvas.getWidth()`&进行比较`canvas.getHeight()`是不正确的，因为您已经添加了`centerX`& `centerY`。此外，否定`sensorX`将导致条件`a > canvas.getWidth()`永远不会发生，因为 X 永远不会是负数。

# java - 通过多个类共享一个对象

> ID：11282029
> 
> 赞同：0
> 
> 时间：2012-07-01T12:41:38.460
> 
> 标签：java

我需要在几个类之间共享 1 个实例。Connect 类具有创建 URL 和下载数据的方法，而 ui 是我获取数据以构建 url 的接口（摆动形式）（日期构成 url）。

最好的方法是什么？

想到：

1) 通过以下方式使其全球化：

```
public class Global {

public static  Connect c;
} 
```

2) 在 main() 中创建实例，并通过对象传递它。

```
public static void main(String[] args) throws IOException {

           Connect c = new Connect();   // get url to download from
           ui form = new ui(c);         // the form to get data from 
.
.
. 
```

如果有的话，什么看起来更合理？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:04:00.247

首选方法通常是将实例传递给需要它的任何类的构造函数。这样，就不能猜测是否有人已经设置`Global.c`以及何时应该可以使用。它还清楚地记录了每个类都需要一个`Connect`对象。另一个好处是，如果您的代码发生更改并且您希望您的 UI 类不再依赖于同一个 Global`Connect`实例，您不再需要更改从该全局上下文中提取魔术实例的所有代码，您只需传入一个不同的对象。

搜索“为什么全局变量不好”或“为什么单例访问器不好”这样的内容，你会得到比我的解释更多的细节。它们有一些用途，但如果你能提前避免它们，你可能会省去一些麻烦。与所有事物一样，每个事物都有取舍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:46:51.550

you must be very careful with the first option. As I see it there are a lot of drawbacks here:

*   Its not an object oriented style of programming. It rather smells like old fashioned C code
*   What happens if you should support a lot of such an instances.
*   Now what happens if you need to change them (in fancy terms if these instance are not immutable)?
*   Now what happens if your application goes multi-threaded?

While some of these points are validly applicable to the second solution you've described, in terms of maintainability and readability of your code the first solution is just a mess...

So to me the second one is better.

Hope this helps

# code-analysis - VMS/VAX平台COBOL源码分析工具

> ID：11282030
> 
> 赞同：4
> 
> 时间：2012-07-01T12:41:54.833
> 
> 标签：code-analysis, cobol, vms, itanium

有人可以推荐一个用于分析、改进、查找“死代码”、提供统计信息等的工具，用于 VMS/VAX OS 和 RDB 数据库上的 COBOL 语言源代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:44:52.303

我从未使用过它，但 DecSet 产品套件包括一个名为 PCA - Performance and Coverage Analyser 的产品。这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:51:49.553

一些编译器具有查找死代码的选项，因此您可能已经拥有所需的工具。请记住，在某些情况下代码已经死了，而您无法通过静态源代码分析来判断。

```
if a = 1
    move 'error' to out-message
end-if 
```

如果`a`永远不能为 1，那么这是死代码。静态源代码分析可能找不到这种情况的更复杂的实例，特别是如果 的值`a`来自被分析的程序之外 - 也许是数据库。

[对维基百科上列出](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis)的静态源代码分析工具的*粗略*扫描显示商业产品价格昂贵（数千欧元）。开源工具似乎没有提供太多的 COBOL 覆盖。您可能想自己检查一下，因为我承认我没有进行彻底的评估，而只是扫描了他们的文档。

COBOL 是一种难以解析的语言。

# django - 使 django-social-auth 工作

> ID：11282032
> 
> 赞同：1
> 
> 时间：2012-07-01T12:42:07.423
> 
> 标签：django, django-socialauth

我想在我的网站中使用 django-social-auth，但我对[文档](http://django-social-auth.readthedocs.org/en/latest/)完全感到困惑，我有几个问题：

1.  我怎样才能找到这样的信息：TWITTER_CONSUMER_KEY，TWITTER_CONSUMER_SECRET，FACEBOOK_APP_ID，FACEBOOK_API_SECRET，...，我试图使用这个[文档](http://hueniverse.com/category/oauth/)，但没有结果。
2.  哪里是描述模板和视图部分以处理不同后端身份验证的文档

抱歉！也许我的问题是无稽之谈，但我的文档确实有问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:54:55.447

因为您使用的是 Twitter 和 Facebook 的 API，所以您需要使用它们创建一个应用程序来访问它们各自的 API

`TWITTER_CONSUMER_KEY`并`TWITTER_CONSUMER_SECRET`在您向 Twitter 注册您的应用程序/网站时提供给您：

[https://dev.twitter.com/apps/new](https://dev.twitter.com/apps/new)

当您在 Facebook 注册应用程序时，会向您提供类似`FACEBOOK_APP_ID`的等信息：`FACEBOOK_API_SECRET`

[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

如果您想查看需要创建哪些模板以及哪些设置等，请查看源代码中包含的示例项目

[https://github.com/omab/django-social-auth/tree/master/example](https://github.com/omab/django-social-auth/tree/master/example)

您可以浏览源本身到使用的视图和 url：

[https://github.com/omab/django-social-auth/tree/master/social_auth](https://github.com/omab/django-social-auth/tree/master/social_auth)

# java - Java：让其他线程知道 GUI 是否可以使用

> ID：11282035
> 
> 赞同：2
> 
> 时间：2012-07-01T12:42:11.077
> 
> 标签：java, multithreading, swing, user-interface, ready

我正在编写一个应用程序来解析`XML`文件（连续）并在 GUI（`Swing`）中显示数据。`ParseThread`是在，`CoreProject`而是`GUI`在`GUIProject`。

的开头通过 ItemListener`ParseThread`连接到 a 。`JCheckBoxMenuItem`的值`setSelected()`是在添加到菜单后直接设置的。此时 GUI 不包含`Component`需要`ParseThread`显示已解析数据的内容。

我的解决方案是，`ParseThread`应该等到 GUI 完全构建。我想到了类似 EventQueue 的东西，但我不知道如何编写一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:58:26.527

> 我的解决方案是，ParseThread 应该等到 GUI 完全构建。我想到了类似 EventQueue 的东西，但我不知道如何编写一个。

您[在 Swing 中遇到了 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)问题，您的艰苦而长期运行的任务应该移至后台任务，对于 Swing 有两种可能性

*   （简单易用）使用`Runnable#Thread`，输出到 Swing GUI 必须包装成`invokeLater()`，包括线程安全方法`setText`，`append`ei

*   使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

编辑

请检查我对[Runnable#Thread](https://stackoverflow.com/a/11282106/714968)的可视化，这与连接服务器、解析长文件 ei 是一样的，

> 使用 invokeLater() 在调用之前我无法确定组件是否存在

1.  创建图形用户界面，

2.  显示图形用户界面，

3.  一些`(Swing / Util) Timer`或`user action`调用被/被重定向出的代码，`Swing EventDispatchThread`因此有`Runnable#Thread`或`SwingWorker`

4.  我建议两种最简单的可能方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T13:46:49.407

Ok, I got my problem... The GUI is created like this:

```
EventQueue.invokeAndWait(new Runnable() {

            @Override
            public void run() {
                try {
                    Mainframe frame = new Mainframe();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }); 
```

And at construction of the Object Mainframe this code will be executed:

```
final JCheckBoxMenuItem chckbxmntmParsing = new JCheckBoxMenuItem("Parsing");
    chckbxmntmParsing.setName("mainframe.menu.data.parsing");
    localeChangedListener.add(chckbxmntmParsing);

    chckbxmntmParsing.addItemListener(new ItemListener() {

        @Override
        public void itemStateChanged(ItemEvent e) {
            if (chckbxmntmParsing.isSelected()) {
                parseManager.startParsing();
            } else {
                parseManager.stopParsing();
            }
        }
    });

    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            boolean enabled = false;
            String prop = PropertyManager.get().getProperty("parser.continuousparsing.enabled");
            if (prop != null) {
                if (prop.trim().equals("true") || prop.trim().equals("1")) {
                    enabled = true;
                }
            }
            chckbxmntmParsing.setSelected(enabled);
        }
    }); 
```

So the ParseThread will start after GUI is build.

Sorry for stealing your time

# mysql - 无法创建表 错误号 150

> ID：11282036
> 
> 赞同：0
> 
> 时间：2012-07-01T12:42:19.210
> 
> 标签：mysql, sql, database, errno

这是我的 SQL 脚本

```
CREATE TABLE tracks(
track_id int NOT NULL AUTO_INCREMENT,
account_id int,
track_name varchar(255),
track_path varchar(255),
track_art_path varchar(255),
track_desc text,
primary key(track_id),
FOREIGN KEY (account_id) REFERENCES accounts_profile(accnt_id)
) 
```

我没有看到任何语法错误。一切看起来都很好。我的数据库引擎是 innoDB。但我怎么一直收到这个错误？

```
#1005 - Can't create table 'beatbeast.tracks' (errno: 150) 
```

它没有显示错误所在的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:37:03.630

Errno 150 通常是主表的引用列与引用列的确切数据类型不匹配的结果。在您的情况下，`tracks.account_id`是一个有符号的`INT`，但它引用的列`accounts_profile.accnt_id`是`INT UNSIGNED`。因此，您还必须使用for创建`tracks`表：`INT UNSIGNED``account_id`

```
CREATE TABLE tracks(
  track_id int NOT NULL AUTO_INCREMENT,
  account_id int UNSIGNED,
  track_name varchar(255),
  track_path varchar(255),
  track_art_path varchar(255),
  track_desc text,
  primary key(track_id),
  FOREIGN KEY (account_id) REFERENCES accounts_profile(accnt_id)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:45:43.997

从[文档中](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)：

> 如果 MySQL 从 CREATE TABLE 语句中报告错误号 1005，并且错误消息引用错误 150，则表创建失败，因为未正确形成外键约束。

检查数据类型是否完全`accounts_profile.accnt_id`匹配`tracks.account_id`。目前一个是一个`int`，所以另一个也必须是一个`int`。

此外，文档建议调用：

```
SHOW ENGINE INNODB STATUS 
```

在您收到错误消息以获得更详细的说明后。

# java - 滚动视图中的android图像和按钮

> ID：11282038
> 
> 赞同：0
> 
> 时间：2012-07-01T12:42:43.180
> 
> 标签：java, android, eclipse, android-layout

我正在使用以下配置将图像正确放置在滚动视图中。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars="vertical" >

    <ImageView
        android:id="@+id/textNimbo"
        android:layout_width="match_parent"
        android:layout_height="2492dp"
        android:layout_alignParentRight="true"
        android:src="@drawable/inicio"
        android:adjustViewBounds="true" />

</ScrollView> 
```

但是，我还需要在 scrollView 内和 ImageView 下方设置一个按钮。我在 scrollView 中尝试了相对和线性布局，但没有成功，按钮不可见或图像不适合 scrollView。有什么推荐的配置吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:48:08.007

一个 ScrollView 只能有一个直接子元素。所以要添加一个 Button 和一个 ImageView，你需要这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars="vertical" >

<LinearLayout
        android:id="@+id/layout"
        android:layout_width="fill_parent"
        android"layout_height="fill_parent">

    <ImageView
        android:id="@+id/textNimbo"
        android:layout_width="match_parent"
        android:layout_height="2492dp"
        android:layout_alignParentRight="true"
        android:src="@drawable/inicio"
        android:adjustViewBounds="true" />
   <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-17T17:54:17.517

您也可以使用`ImageButton`I 而不是`ImageView`带有透明`Button`的a

# c++ - 控制台应用程序上对“WinMain@16”的未定义引用

> ID：11282039
> 
> 赞同：1
> 
> 时间：2012-07-01T12:42:46.067
> 
> 标签：c++, winapi, opengl, sdl, codeblocks

> **可能重复：**
> [使用 int main(void) 编译失败；main(int argc, char *argv[]) 成功。为什么？](https://stackoverflow.com/questions/8673378/compiling-with-int-mainvoid-fails-mainint-argc-char-argv-succeeds-why)

我正在使用 OpenGL 和 SDL 制作一个简单的游戏引擎。SDL 和 OpenGL 的所有初始化代码都在一个 dll 中。然后应用程序简单地调用该函数来初始化所有内容。dll 已编译并且没有问题，但是当我尝试编译引用 dll 的应用程序时，它不起作用。它说我有一个未定义的对“WinMain@16”的引用。我最初认为这是因为它被设置为一个 win32 应用程序，我只需要将它交换到控制台应用程序。

原来它已经在控制台应用程序上。那么为什么我会收到这个错误？这是应用程序的代码：

```
#include "GameManager.h"

int main()

{

GameManager gameManager;

gameManager.EngineStartUp(480, 640);

return 0;

} 
```

这是dll的代码：

```
#include "GameManager.h"
#include <iostream>
#include "SDL/SDL.h"
#include "gl/gl.h"
#include "gl/glu.h"

GameManager::GameManager()
{
    //ctor

}

GameManager::~GameManager()
{
    //dtor
}

//Initializes OpenGL and SDL
bool GameManager::EngineStartUp(int WindowHeight, int WindowWidth)
{
   if(SDL_Init(SDL_INIT_EVERYTHING) < 0) {
        return false;
   }
   if((Surf_Display = SDL_SetVideoMode(WindowWidth, WindowHeight, 32, SDL_HWSURFACE | SDL_GL_DOUBLEBUFFER | SDL_OPENGL)) = NULL){
        return false;
   }

   glClearColor(0.415f, 0.432f, 1.0f, 1);
   glClearDepth(1.0f);

   glViewport(0, 0, WindowWidth, WindowHeight);

   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();

   glOrtho(0, WindowWidth, WindowHeight, 0, 1, -1);

   glMatrixMode(GL_MODELVIEW);

   glEnable(GL_TEXTURE_2D);

   glLoadIdentity();

   return true;
} 
```

# asp.net - ServerVariables["REMOTE_HOST"] 返回内部 IP？

> ID：11282045
> 
> 赞同：2
> 
> 时间：2012-07-01T12:44:23.063
> 
> 标签：asp.net, .net, ip, request.servervariables

自从将我的服务器托管更改为新的提供商 (ovh) 后，我无法使用简单的`Request.ServerVariables["REMOTE_HOST"]`. 它总是返回 10.0.1xx.2xx （掩盖了确切的值，不知道这是否重要），这对我来说似乎是一个内部服务器 IP。

调用`Request.ServerVariables["REMOTE_ADDR"]`并`Request.ServerVariables["LOCAL_ADDR"]`给出相同的结果。

如果相关，则从 withing Global.asax 调用代码。

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:31:05.853

我今天对OVH也有同样的问题。

似乎`Request.ServerVariables["HTTP_REMOTE_IP"]`返回了好IP

# java - 通过 Daemon 作为 Standalone 运行 spring

> ID：11282047
> 
> 赞同：1
> 
> 时间：2012-07-01T12:44:24.367
> 
> 标签：java, spring, daemon

我正在尝试通过 Daemon 服务作为独立应用程序运行 Spring。

我已经配置了 run.sh 脚本并添加了所有 Spring jars 框架。

现在我正在尝试以这种方式从守护程序类执行我的起点类：

代码：公共类 FeedDaemon 实现守护进程 { public FeedDaemon() { }

```
protected final static Logger log = LoggerFactory.getLogger(FeedDaemon.class);
protected boolean shouldBeRunning = false;
protected ProviderFactory runner = null;

@Override
public void destroy()
{
    runner = null;
}

@Override
public void init(DaemonContext arg0) throws Exception
{
    runner = new ProviderFactory();
}

public void start() throws RuntimeError, ConfigError
{
    log.info("Starting daemon");
    runner.start();
}

public void stop() throws Exception
{
    log.info("Starting Shutting daemon ...");
    runner.stop();
} 
```

}

代码：

```
package com.spring.test;

import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.spring.aspect.Spring3HelloWorld;
import com.spring.beans.ParkingCar.CarBean;
import com.spring.beans.ParkingCar.CarMaker;
import com.spring.beans.ParkingCar.FourWheelsVechile;
import com.spring.beans.ParkingCar.TwoWheelsVechile;
import com.spring.beans.ParkingCar.Vechile;
import com.spring.beans.ParkingCar.VechileDetails;
import com.spring.beans.calculator.CalculateNumbersHolderBean;
import com.spring.beans.calculator.CalculateStrategyBean;
import com.spring.beans.calculator.CalculatorBean;

public class Spring3HelloWorldTest
{

    static Logger logger = Logger.getLogger(Spring3HelloWorldTest.class);

    public static void execute()
    {
        try
        {   
            ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");
            logger.debug("3");

            Vechile fourWheelsVechile = (FourWheelsVechile) context.getBean("Ambulance");
            fourWheelsVechile.drive();
            CarMaker carMaker = (CarMaker) context.getBean("carMaker");
            CarBean carBean = carMaker.createNewCar();
            carBean.driveCar();
        }
        catch (Throwable e)
        {
            logger.error(e);
        }

    }
} 
```

我得到这个错误：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.commons.daemon.support.DaemonLoader.load(DaemonLoader.java:164)
Caused by: java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
    at com.spring.runner.FeedDaemon.init(FeedDaemon.java:37)
    ... 5 more
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    ... 6 more
Cannot load daemon
Service exit with a return value of 3 
```

那是我的 run.sh 脚本：

export JAVA_HOME=/../FIXGW=/../FIXGW CLASSPATH=$FIXGW/lib/FeedHandler.jar:$FIXGW/lib/FixSpring.jar:$FIXGW/lib/org.springframework.web-sources-3.1.1 .RELEASE.jar:$FIXGW/lib/org.springframework.web.struts-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.web.servlet-sources-3.1.1.RELEASE.jar :$FIXGW/lib/org.springframework.web.portlet-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.test-sources-3.1.1.RELEASE.jar:$FIXGW/lib/ org.springframework.orm-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.jms-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.jdbc-sources- 3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.context.support-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.aspects-sources-3.1.1.RELEASE。 jar:$FIXGW/lib/org.springframework.transaction-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework。oxm-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.instrument-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.instrument.tomcat-sources-3.1。 1.RELEASE.jar:$FIXGW/lib/org.springframework.expression-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.core-sources-3.1.1.RELEASE.jar:$FIXGW /lib/org.springframework.context-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.beans-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.asm -sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.aop-sources-3.1.1.RELEASE.jar:$FIXGW/lib/commons-daemon-1.0.3.jarcore-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.context-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.beans-sources-3.1.1。 RELEASE.jar:$FIXGW/lib/org.springframework.asm-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.aop-sources-3.1.1.RELEASE.jar:$FIXGW/lib /commons-daemon-1.0.3.jarcore-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.context-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.beans-sources-3.1.1。 RELEASE.jar:$FIXGW/lib/org.springframework.asm-sources-3.1.1.RELEASE.jar:$FIXGW/lib/org.springframework.aop-sources-3.1.1.RELEASE.jar:$FIXGW/lib /commons-daemon-1.0.3.jar

cd $FIXGW /../jsvc -user fox \ -XX:+DisableExplicitGC -XX:+UseConcMarkSweepGC -XX:SurvivorRatio=16 \ -Dlog4j.configuration=file:$FIXGW/conf/log4j.properties \ -outfile /dev/ null \ -errfile $FIXGW/logs/error.log \ -verbose -classpath $CLASSPATH \ com.spring.runner.FeedDaemon

任何的想法？

谢谢，雷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:00:12.563

您似乎已经添加了所有包含 Spring java 源代码（未编译代码）的 jar。相反，您应该将未命名为 ...-sources... 的 jar 添加到类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:50:16.380

弹簧罐不在类路径中。检查这个我的[答案](https://stackoverflow.com/questions/11029504/how-to-set-spring-classpath/11029597#11029597)。通过命令行在类路径中添加所有库（当然在你的 shell 脚本中）。

好吧，我现在看到你的问题了。您在类路径中有源文件。这些被提及为`org.springframework.web.servlet-sources-3.1.1.RELEASE.jar`而编译的 jar 被提及为`org.springframework.web.servlet-3.1.1.RELEASE.jar`

# r - create all possible triplet (three at time) combinations in r

> ID：11282050
> 
> 赞同：0
> 
> 时间：2012-07-01T12:44:34.630
> 
> 标签：r, combinations

The following is example data of my case:

```
 mark <- c(paste("M", 1:6, sep = "")); set.seed(123); 
    Ind1 <- c(sample (c("A", "B", "H"), 6, replace = T)); 
    set.seed(1234); Ind2 <- c(sample (c("A", "B", "H"), 6, replace = T));
      set.seed(12345); Ind3 <- c(sample (c("A", "B", "H"), 6, replace = T));
     set.seed (12344); 
    Ind4 <- c(sample (c("A", "B", "H"), 6, replace = T)); 
      set.seed(1234567); Ind5 <- c(sample (c("A", "B", "H"), 6, replace = T));
     myd <- data.frame (mark, Ind1, Ind2, Ind3, Ind4, Ind5) 
```

The data

```
 myd
  mark Ind1 Ind2 Ind3 Ind4 Ind5
1   M1    A    A    H    A    B
2   M2    H    B    H    H    H
3   M3    B    B    H    A    H
4   M4    H    B    H    A    A
5   M5    H    H    B    A    H
6   M6    A    B    A    H    B 
```

I want to compare all possible (triplet - 3 at a time) comparison mark for each variables (columns).

```
M1 & M2 & M3      -> first composition 
M1 & M2 & M4      - > second comparison 
M1 & M2 & M5
M1 & M2 & M6 
M1 & M3 & M4
M1 & M3 & M5
M1 & M3 & M6
M2 & M3 & M4
M2 & M3 & M5
M2 & M3 & M6 
......................so on 
```

Thus for the comparison triplet, loop would be: T = Triplet member, T1 = first, T2 = Second, T3 = Third

```
nevar <- 0

 if (T1 =="A", T2 == "B", T3 == "H"){
      newvar[i] <- 0
      }
       else{
      if (T1 =="A", T2 == "B", T3 == "B"){
       newvar[i] <- 1
       } else {
         if (T1 =="A", T2 == "A", T3 == "H"){
        newvar[i] <- 1
        } else {
        newvar[i] <- "NA"
        }
        }} 
```

How can I achieve this ?

Edit:

```
lets do for Ind1:

first comparison this above list
value of T1 = M1 = "A", T2 = M2 = "H", T3= M3 = "B"
              newvar = "NA"

Similarly second comparison:
T1 = M1 = "A", T2 = M2 = "H",  T3 = M4 = "H"
                newvar = "NA" 
```

M1....M6 rownames (like variable) and I can apply this to all Ind1 ....Ind6, Once look is ready for Ind1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:04:11.117

To create the possible combinations you can use

```
combins<-t(combn(levels(myd$mark)[myd$mark],3)) 
```

you can then create a function say

```
dum.fun<-function(x,myd){
dum.match<-match(x,myd$mark)
dum.str<-""
dum.ans<-c()
for(i in 2:6){
dum.str<-paste(myd[dum.match,i],collapse="")
dum.ans[i-1]<-NA
if(dum.str=="ABH"){
dum.ans[i-1]<-0}else{
if(dum.str=="ABB"||dum.str=="AAH"){
dum.ans[i-1]<-1
}}
}
dum.ans
} 
```

then

```
out<-t(apply(combins,1,dum.fun,myd))
cbind(combins,out)
> head(cbind(combins,out))
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,] "M1" "M2" "M3" NA   "1"  NA   NA   NA  
[2,] "M1" "M2" "M4" NA   "1"  NA   NA   NA  
[3,] "M1" "M2" "M5" NA   "0"  NA   NA   NA  
[4,] "M1" "M2" "M6" NA   "1"  NA   NA   NA  
[5,] "M1" "M3" "M4" "0"  "1"  NA   NA   NA  
[6,] "M1" "M3" "M5" "0"  "0"  NA   NA   NA 
```

for example

its all rather messy but hopefully I have grasped what you wanted.

or with one call

```
t(combn(levels(myd$mark)[myd$mark],3,dum.fun,myd=myd)) 
```

# javascript - 将 Express 2.x 应用程序转换为 Express 3.0 应用程序

> ID：11282053
> 
> 赞同：0
> 
> 时间：2012-07-01T12:45:17.013
> 
> 标签：javascript, node.js, express

我目前正在学习 NodeJs，而 Express 正在尝试将教程应用程序从 Express 2.5.9 转换为 3.0。下面的代码现在抛出错误“500 错误：无法查找视图“视图/登录”。现在 3.0 的渲染方式是什么？

```
apps
  authentication
    views
      login.jade
    routes.coffee
...
server.js 
```

在 routes.coffee

```
routes = (app) ->

  app.get '/login', (req, res) ->
    res.render "views/login",
      title: 'Login'
      stylesheet: 'login'

module.exports = routes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T18:10:40.833

要了解 express 使用哪个目录来查找您的视图，您需要检查视图引擎的以下设置：

```
app.set('views', __dirname + '/some-dir'); 
```

这在 3.x 中没有改变。如果您需要进一步的帮助迁移以下指南可能会很有用：

[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)

# css - ie9边框半径css

> ID：11282054
> 
> 赞同：1
> 
> 时间：2012-07-01T12:45:38.273
> 
> 标签：css, internet-explorer-9

我正在尝试使用以下代码对我的 css 类进行圆角处理

```
border-bottom-right-radius: 5px;
border-bottom-left-radius: 5px; 
```

我一直在阅读与我的问题相关的几篇文章，上面的代码应该没问题，但在我的情况下不会触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:47:54.980

将此作为第一行添加到您的标记中。

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

将此用于边框半径，以更好地与其他浏览器兼容。

```
 -moz-border-right-radius: 5px;
     -webkit-border-right-radius: 5px;
     border-right-radius: 5px;
     -moz-border-left-radius: 5px;
     -webkit-border-left-radius: 5px;
     border-left-radius: 5px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:50:18.560

IE9 使用 CSS3（行业标准）。因此，您的代码应该可以工作。

一个非常常见的问题是，尽管您使用的是 ie9，但它可能正在使用旧版本呈现页面。查看是否错误地启用了兼容模式。您也可以尝试开发者工具 (F12) 并查看文档模式和浏览器模式（在顶部）是否设置为 IE9。

# php - PHP在MySQL数据库中插入空格

> ID：11282058
> 
> 赞同：1
> 
> 时间：2012-07-01T12:46:22.500
> 
> 标签：php, mysql

我有一个 HTML 表单，它将值提交到以下 PHP 文件，该文件将它们插入 MySQL 数据库：

```
<?php
  $con = mysql_connect("*","*","*");
  if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

  mysql_select_db("*", $con);

  $sql="INSERT INTO scores (hometeam, awayteam, result)
  VALUES
  ('" . mysql_real_escape_string($_POST['hometeam']) . "',
   '" . mysql_real_escape_string($_POST['awayteam']) . "',
   '" . mysql_real_escape_string($_POST['result']) . "')";

  if (!mysql_query($sql,$con))
    {
    die('Error: ' . mysql_error());
    }
  echo "1 record added";

  mysql_close($con);
?> 
```

有时 HTML 表单中的输入字段会留空，在这种情况下，我不希望将任何内容插入数据库。我希望该值保持*NULL*。在我这样填写表格的那一刻：

主队：蓝队
客队：[空]
结果：获胜

以下内容被插入到我的数据库中：

主队：蓝队
客队：' '
结果：获胜

我想要插入/不插入的是：

主队：蓝队
客队：*NULL*
结果：获胜

我已经寻找了几个小时的解决方案。任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:51:20.817

不要在查询中引用它们。相反，首先构建变量，并将引号附加到查询之外的转义字符串值，`NULL`如果字符串为空，您可以插入关键字：

```
// If any is not set or empty in the POST, assign the string "NULL" unquoted to a variable
// which will be passed to MySQL as the unquoted NULL keyword.
// Otherwise escape the value from $_POST and surround the escaped value in single quotes
$ateam = !empty($_POST['awayteam']) ? "'" . mysql_real_escape_string($_POST['awayteam']) . "'" : "NULL";
$hteam = !empty($_POST['hometeam']) ? "'" . mysql_real_escape_string($_POST['hometeam']) . "'" : "NULL";
$result = !empty($_POST['result']) ? "'" . mysql_real_escape_string($_POST['result']) . "'" : "NULL";

// Then pass the three variables (already quoted if necessary) directly to the query.
$sql="INSERT INTO scores (hometeam, awayteam, result) VALUES ($hteam, $ateam, $result); 
```

从长远来看，建议开始使用支持预处理语句的 MySQL API，如 PDO 或 MySQLi。它们提供更好的安全性，可以更优雅地处理输入 NULL，并且旧`mysql_*()`功能很快就会被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:52:57.440

在您的代码中，替换：

```
$sql="INSERT INTO scores (hometeam, awayteam, result)
  VALUES
  ('" . mysql_real_escape_string($_POST['hometeam']) . "',
   '" . mysql_real_escape_string($_POST['awayteam']) . "',
   '" . mysql_real_escape_string($_POST['result']) . "')"; 
```

和：

```
if($_POST['awayteam'] == '')
 $awayteam = 'NULL';
else
 $awaytem = "'" . mysql_real_escape_string($_POST['awayteam']) "'";
$sql="INSERT INTO scores (hometeam, awayteam, result)
  VALUES
  ('" . mysql_real_escape_string($_POST['hometeam']) . "',
   " . $awayteam . ",
   '" . mysql_real_escape_string($_POST['result']) . "')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T13:07:12.820

您可以使用 mysql 数据库中的[NULLIF](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_nullif)函数。它的作用是，它需要 2 个参数，如果它们相同，则返回 null。所以基本上你可以改变你的代码如下：

```
 $sql="INSERT INTO scores (hometeam, awayteam, result)
  VALUES
  (NULLIF('" . mysql_real_escape_string($_POST['hometeam']) . "', ''),
   NULLIF('" . mysql_real_escape_string($_POST['awayteam']) . "', ''),
   NULLIF('" . mysql_real_escape_string($_POST['result']) . "', ''))"; 
```

它基本上会检查输入的值是否为 ''（空字符串），如果是这种情况，它将改为在数据库中保存 NULL。您甚至可以在传递给 NULLIF 之前从变量中修剪前导或尾随空格，因此如果有人只在您的输入框中输入空格，它仍然会保存 NULL。

此外，正如迈克尔所说，如果您继续使用 PDO 或 mysqli 扩展，它会更安全、更好。希望我的回答有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T13:00:07.173

或者，如果您有权访问 db，请更改列（可选）并将它们默认设置为 NULL。即，如果在该列中没有插入任何内容，则默认情况下将显示 NULL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T13:04:55.003

为什么不将 ' ' 和其他无效形式的数据替换为 'null'？

或者

检查 $_POST['data'] 是否等于''或''，如果为真，将它们设置为'null'。

此外，不要使用 mysql_real_escape_string，而是使用 PHP 函数“addslashes”。

# objective-c - 设置作为 IBOutletCollection 一部分的 UILabel 文本的正确方法是什么

> ID：11282061
> 
> 赞同：0
> 
> 时间：2012-07-01T12:47:16.813
> 
> 标签：objective-c, ios, uilabel, iboutletcollection

我有一系列构成 IBOutletCollection 一部分的 UILabel

```
@property (strong, nonatomic) IBOutletCollection(UILabel) NSArray *labelCollection; 
```

我已按顺序将 UILabel 的标签设置为 0、1、2、3 ...，并且我已按标签号对 *labelCollection 进行了排序。因此，IBOutletCollection 数组中的对象“0”是带有标签“0”等的 UILabel。

使用以下函数，我可以在特定的 obj/tag 处更新 UILabel 的文本：

```
- (void) updateLabelAtTag:(int)objId {
        [[self.labelCollection objectAtIndex:objId] setText:@"my new text"]; 
    }

} 
```

但是，当您单击 setText 时，这可以正常工作：在 IDE 中，Xcode Quick Help 会抱怨

```
setText:
@property(nonatomic, copy) NSString *text
iOS (2.0 and later) 
Deprecated: Use the textLabel and detailTextLabel properties instead.
The text of the cell.
UITableViewCell.h 
```

对于我的生活，我无法弄清楚 UITableViewCell 与这种情况有什么关系。我当然似乎无法访问 textLabel 或 detailTextLabel 属性。

问题：我是在使用已弃用的属性，还是在这种情况下 Xcode 弄错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:54:41.463

Xcode。我猜测

```
 [(UILabel *)[self.labelCollection objectAtIndex:objId] setText:@"my new text"]; 
```

会让它消失。

# java - 如何使用for循环插入多个值

> ID：11282066
> 
> 赞同：0
> 
> 时间：2012-07-01T12:47:46.127
> 
> 标签：java, android, sqlite

下面的代码适用于 DAO 和 dBhelper 类。我有 3 个表，每个表大约 6 列，但是我厌倦了“玩”每个方法的字段名称（插入、删除等..），并想**使用 for 循环**替换下面的代码，浏览要插入到 dB 中的字段名称和数据。

所以问题是：
如何替换这样的表达式`MySQLiteHelper.COLUMN_ID`，以便`MySQLiteHelper.columnName`我可以将这个 oneliner 嵌入到`for-loop`.

```
private String[] allColumns = {
    MySQLiteHelper.COLUMN_level_1,
    MySQLiteHelper.COLUMN_level_2,
    MySQLiteHelper.COLUMN_level_3
};
String[] mydata = myobject.getData();

// Here I would like to use a for-loop for the following lines
values.put(MySQLiteHelper.COLUMN_level_1, mydata[0]);
values.put(MySQLiteHelper.COLUMN_level_2, mydata[1]);
values.put(MySQLiteHelper.COLUMN_level_3, mydata[2]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:00:00.277

```
private String[] allColumns = {
    MySQLiteHelper.COLUMN_level_1,
    MySQLiteHelper.COLUMN_level_2,
    MySQLiteHelper.COLUMN_level_3
};

String[] mydata = myobject.getData();

for(int i = 0; i < allColums.length(); i++){
    values.put(allColums[i], mydata[i]);
} 
```

# python - 在eclipse中导入包时出现UnresolvedError

> ID：11282074
> 
> 赞同：1
> 
> 时间：2012-07-01T12:48:14.667
> 
> 标签：python, eclipse, pydev

我在 Eclipse 的 PyDev 中**`Unresolved Error`**导入了一个包（[bigfloat](http://packages.python.org/bigfloat/)） 。`import bigfloat`但是，`from bigfloat import *`错误已解决。**这背后的原因是什么？**

我使用easy_install 来下载和安装`bigfloat`包。它不会更新过程中的python_path吗？我也尝试在 pythonpath 属性中将该库添加为外部库，但仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T18:19:40.977

是 PyDev / eclipse IDE 报告的错误，还是运行代码时发生的？

在第一种情况下，这可能是由于 eclipse 缓存了有关您已安装的软件包的信息。

您需要做的是转到“Preferences -> Pydev -> Interpreter - Python”，在其中定义要使用的 python 解释器。删除当前解释器，然后重新添加。

这将导致 eclipse 重新读取所有路径信息，它应该清除错误。

# javascript - 如果选择了特定的单选按钮，如何获取文本框的值？

> ID：11282078
> 
> 赞同：-1
> 
> 时间：2012-07-01T12:48:32.700
> 
> 标签：javascript, jquery, radio-button

我有以下 HTML

```
CHOICE 1
<input type="radio" name="c1" value="0" class="a"> Yes
<input type="radio" name="c1" value="1" class="a"> No
<input type="radio" name="c1" value="2" class="a"> Only <input type="text" id="t1" />
<br />
CHOICE 2
<input type="radio" name="c2" value="0" class="a"> Yes
<input type="radio" name="c2" value="1" class="a"> No
<input type="radio" name="c2" value="2" class="a"> Only
<input type="text" id="t2" />
<br />
CHOICE 3
<input type="radio" name="c3" value="0" class="a"> Yes
<input type="radio" name="c3" value="1" class="a"> No
<input type="radio" name="c3" value="2" class="a"> Only
<input type="text" id="t3"  />
<br />
<button>Press me</button> 
```

如果选择的单选按钮是“仅”，我想获取文本框的值。关于如何做的任何想法？

这是我当前的 jQuery 脚本

```
var arr = new Array();
var rad;
var i = 0;
var id;
$('button').click(function(){

$('input[type="radio"]:checked').each(function(){
rad = $('input[type="radio"]:checked').val();
if(rad == 2){
id = this.id;
arr[i] = $('input[type="text"]#'+id).val();
}
else{
arr[i] = $(this).val();
}
i++;
});
alert(arr);
i = 0;
}); 
```

使用这个脚本只会给我文本框的重复值。“是”和“否”（0 和 1）值不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:57:02.347

单击按钮并选择“仅”单选时，将[.next()](http://jqapi.com/#p=next)输入字段的值打印到控制台。

[jsbin 上的演示](http://jsbin.com/uwunub/2/)

```
 $("button").click(function(){
    $("input[type=radio]:checked").each(function(){
      if($(this).val() == 2) {
        console.log($(this).next("input[type=text]").val());
      }
    });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:51:05.393

很简单。

```
if ( jQuery("input[name='c1']:checked").val() === '2' ) {
    return jQuery("#t1").val();
} 
```

您可以添加一些额外的逻辑来动态生成`c1`和`t1`字符串以使其通用。

# java - 在java中，当使用字符串作为文件路径名时，'\\'和'\'有什么区别

> ID：11282079
> 
> 赞同：1
> 
> 时间：2012-07-01T12:48:42.643
> 
> 标签：java, file-io

例如当我使用 `C:\\a.txt`

它工作正常，但是当我使用 `C:\a.txt`

它不是。

任何人都可以解释两者之间的区别，除了说一个有效而另一个无效。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T12:52:12.100

`\`是用于转义其他特殊字符的特殊字符。因此，如果单个`\`存在，它将被解释为字符串中的特殊字符，但由于没有什么可以转义，因此被认为是“错误用法”。

因此，`\`必须将其转义一秒钟`\`以赋予其字面意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:51:51.407

单个`\`表示对编译器具有特定含义的转义序列。`\\`基本上逃脱了转义序列。因此，如果您键入`C:\a`编译器将`\a`其视为转义序列，这是您不打算的。

[http://docs.oracle.com/javase/tutorial/java/data/characters.html](http://docs.oracle.com/javase/tutorial/java/data/characters.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T12:54:05.290

在 java 中，该**`\`**符号保留用于与其他 char 一起使用以制作特殊符号，例如，

```
\n is new line
\t is a tab 
```

所以如果你**`\`**在其中使用一个喜欢`C:\a.txt`它会认为这`\a`是一个特殊的字符，而使用`\\`将被转换为一个`\`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T12:55:37.047

只是要记住的一句话：`Backslash is NOT a path separator!`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T17:07:37.250

它也很好地使用 File.separator 来获取运行 JVM 的操作系统所需的分隔符 '/' 或 '\' （如果还有其他人，那么我不知道它们）。

# javascript - 执行此脚本时，执行上下文中会发生什么

> ID：11282083
> 
> 赞同：1
> 
> 时间：2012-07-01T12:49:25.447
> 
> 标签：javascript

当我执行以下脚本时，警报语句正在打印函数，为什么会这样？在执行上下文中会发生什么？为什么变量 basicPattern 的未定义值不打印？

```
 function basicPattern(){
    var o = 5;

    return o;
 }

 var basicPattern;
 console.log(basicPattern); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:04:47.493

```
function basicPattern(){
    var o = 5;

    return o;
 }

 var basicPattern;
 console.log(basicPattern); 
```

评估与此相同（忽略 IE 错误）：

```
 var basicPattern;

 basicPattern = function basicPattern(){
    var o = 5;

    return o;
 };

 console.log(basicPattern); 
```

由于`basicPattern`已经声明，再次声明它不会有任何效果，因为声明被提升和合并。如果你有分配`5`它会是这样的：

```
 var basicPattern;

 basicPattern = function basicPattern(){
    var o = 5;

    return o;
 };

 basicPattern = 5;

 console.log(basicPattern); 
```

阅读有关吊装的更多信息：http: [//www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

# android - onPostExecute 从未调用过？

> ID：11282085
> 
> 赞同：2
> 
> 时间：2012-07-01T12:49:52.597
> 
> 标签：android

```
public static class TestTask extends AsyncTask<Void, Integer, Integer> {

    private String stacktrace;

    public TestTask (String stacktrace){

        this.stacktrace = stacktrace;
    }

    @Override
    protected Integer doInBackground(Void... params) {

        try {
            Log.i("async", "doInBackground 1"); //this gets logged
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://xx.xx:8080/android/service.php");
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("action", "logexception"));
            nameValuePairs.add(new BasicNameValuePair("stacktrace", stacktrace));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);
            Log.i("async", "doInBackground 2"); //this gets logged
            return 1;

        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }

    }

    protected void onPreExecute(){
        Log.i("async", "onPreExecute"); //this gets logged
    }

    @Override
    protected void onPostExecute(Integer result) {
        Log.i("async", "onPostExecute"); //this doenst get logged!

    }
} 
```

我一直在检查有关此的其他 SO 线程，但据他们说，据我所知，我的代码看起来是正确的。那为什么我永远达不到`Log.i("async", "onPostExecute");`？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:27:45.700

你`AsyncTask`在`UI`Thread 上创建了吗？其他看起来不错。泛型和注释都很好。

所以可能的问题是你的`doInBackground`方法永远不会返回，因为`onPostExecute`当某些东西返回时会自动调用`doInBackground`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T13:06:39.043

你必须打电话`super`给`onPostExecute()`

所以你的代码应该是这样的：

```
@Override
public void onPostExecute(Integer result) {
    super.onPostExecute(result);
    Log.i("async", "onPostExecute");
} 
```

这应该有效

# node.js - 通过 nvm 安装 node.js v0.8.1 失败

> ID：11282086
> 
> 赞同：3
> 
> 时间：2012-07-01T12:49:55.253
> 
> 标签：node.js, gcc

通过 nvm 安装节点 0.8.1（来自 git 的最新版本）时出现错误，这对我来说没有任何意义；

```
CXX(target) /home/ubuntu/.nvm/src/node-v0.8.1/out/Release/obj.target/v8_base/deps/v8/src/checks.o
g++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.6/README.Bugs> for instructions.
make[1]: *** [/home/ubuntu/.nvm/src/node-    v0.8.1/out/Release/obj.target/v8_base/deps/v8/src/api.o] Error 4
make[1]: *** Waiting for unfinished jobs....
make[1]: Leaving directory `/home/ubuntu/.nvm/src/node-v0.8.1/out'
make: *** [node] Error 2
nvm: install v0.8.1 failed! 
```

以前使用 0.6.18 的所有安装都成功。Python 被迫使用 python2，而 libssl-dev 是 ubuntu11.10 上的最新版本。有人有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T23:02:36.180

我在我的 ec2 实例上[创建了一个交换文件，瞧，编译成功了。](http://digitizor.com/2011/02/06/create-swap-file-ubuntu-linux/)感谢 Alan Curry 的记忆提示。很惊讶没有任何交换开始..

# jetty - Jetty 嵌入 Processing.org，静态资产 + POST

> ID：11282088
> 
> 赞同：0
> 
> 时间：2012-07-01T12:49:58.023
> 
> 标签：jetty, processing, embedded-jetty

我正在尝试将 Jetty 嵌入到处理草图中。到目前为止，我使它能够提供静态文件（Sketch 文件夹中的 html 目录）。

我想用来自其中一个静态页面的用户输入对一个 POST 做出反应。

由于我对 Jetty 一无所知并且来自 PHP 和 Ruby (RoR) Web 编程背景，我对 Jetty 的发展方式感到非常困惑。

我只是想要类似于路线的东西，除了例如

```
"localhost:8080/post?string=whatever" 
```

是一个静态文件。

post?string=whatever 可能会触发处理提交的字符串的函数（在处理中）。

我一直在阅读 Jetty 文档，但到目前为止还不知道该怎么做。

非常感谢您的帮助！

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
import java.io.IOException;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;

String poststr;

void setup() {

  Server server = new Server();
  SelectChannelConnector connector = new SelectChannelConnector();
  connector.setPort(8080);
  server.addConnector(connector);

  ResourceHandler resource_handler = new ResourceHandler();
  resource_handler.setDirectoriesListed(true);
  resource_handler.setWelcomeFiles(new String[] { 
    "index.html"
  }
  );

  resource_handler.setResourceBase(sketchPath("")+"pftf");

  HandlerList handlers = new HandlerList();
  handlers.setHandlers(new Handler[] { 
    resource_handler, new DefaultHandler()
  }
  );
  server.setHandler(handlers);

  try {
    server.start();
    server.join();
  } 
  catch(Exception e) {
  };

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T21:03:00.923

是的，Jetty 一开始可能会很混乱，尤其是当您只想做一些简单的事情（不一定是成熟的 Web 应用程序）时。

完成这项工作的关键是为每个其他处理程序（例如**ResourceHandler**）使用一个**ContextHandler 。**您可以告诉 ContextHandler 它应该响应哪个上下文（即 URL）。在为 ResourceHandler 和您的自定义处理程序（例如**PostHandler**）创建 ContextHandler 之后，您必须将两者都放入**ContextHandlerCollection**（*uff...*）中，以便您的服务器知道存在哪些上下文。

 *******![码头](../Images/c1f840c9db756ff4383d228b5f9cab68.png)

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
import java.io.IOException;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.handler.AbstractHandler;

void setup() {
    /* Configure the http server */
    Server server = new Server();
    SelectChannelConnector connector = new SelectChannelConnector();
    connector.setPort(8080);
    server.addConnector(connector);

    /* Resources */
    ResourceHandler resourceHandler = new ResourceHandler();
    resourceHandler.setDirectoriesListed(true);
    resourceHandler.setWelcomeFiles(new String[] { 
        "index.html"
    }
    );

    resourceHandler.setResourceBase(sketchPath("")+"pftf");
    ContextHandler resourceContext = new ContextHandler();
    resourceContext.setContextPath("/");
    resourceContext.setHandler(resourceHandler);

    /* Post API */
    PostHandler postHandler = new PostHandler();
    ContextHandler postContext = new ContextHandler();
    postContext.setContextPath("/post");
    postContext.setHandler(postHandler);

    ContextHandlerCollection contexts = new ContextHandlerCollection();
    contexts.setHandlers(new Handler[] { 
        resourceContext, postContext
    }
    );

    server.setHandler(contexts);

    /* Start the server (finally)  */

    try {
        server.start();
        server.join();
    } 
    catch(Exception e) {
        println("Could not start http server. Reason: " + e.toString());
    };
}

void printCard(String mtext) {
    println("Printing card with text: " + mtext);
} 
```

您的**PostHandler**可能看起来像这样：

```
public class PostHandler extends AbstractHandler
{
    public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        response.setContentType("text/html;charset=utf-8");

        String stringParameter = request.getParameter("string");

        /* Check if the string parameter is there and not empty */
        if (stringParameter != null && !stringParameter.trim().equals("")) {

            response.setStatus(HttpServletResponse.SC_OK);
            baseRequest.setHandled(true);
            response.getWriter().println("<h1>You sent me: " + stringParameter + "</h1>");

            println("Received a string via /post: " + stringParameter);

            printCard(stringParameter);
        } 
        else {
            // Parameter is missing
            response.setStatus(HttpServletResponse.SC_BAD_REQUEST );
            baseRequest.setHandled(true);
            response.getWriter().println("<h1>Error: Missing string parameter</h1>");

            println("Missing string via /post.");
        }
    }
} 
```*******

# java - 不能从静态上下文引用非静态方法（方法名称（））。为什么？

> ID：11282093
> 
> 赞同：1
> 
> 时间：2012-07-01T12:50:50.390
> 
> 标签：java, object, methods, static, call

我真的很困惑这个！我有 2 个班级，**俱乐部**和**会员资格**。在会员资格中，我有方法**getMonth()**，在俱乐部中，我**加入**了接受参数“月”的方法 - 所以用户输入一个月，然后我希望它返回加入该特定月份的会员资格。

我正在尝试从 Club 类中调用 getMonth() 方法，这样我就可以继续比较月份的整数。但是，当我尝试调用该方法时，我只是得到提到的“不能从静态上下文引用非静态方法 getMonth()”。

基本上，这是什么，我该如何解决？

先感谢您！

俱乐部：

```
public class Club
{
    private ArrayList<Membership> members;
    private int month;

    /**
     * Constructor for objects of class Club
     */
    public Club()
    {
        // Initialise any fields here ...

    }

    /**
     * Add a new member to the club's list of members.
     * @param member The member object to be added.
     */
    public void join(Membership member)
    {
        members.add(member);
    }

    /**
     * @return The number of members (Membership objects) in
     *         the club.
     */
    public int numberOfMembers()
    {
        return members.size();
    }

        /**
    * Determine the number of members who joined in the given month
    * @param month The month we are interested in.
    * @return The number of members
    */
    public int joinedMonth(int month){

        Membership.getMonth();

    }

} 
```

会员资格：

```
public class Membership
{
    // The name of the member.
    private String name;
    // The month in which the membership was taken out.
    public int month;
    // The year in which the membership was taken out.
    private int year;

    /**
     * Constructor for objects of class Membership.
     * @param name The name of the member.
     * @param month The month in which they joined. (1 ... 12)
     * @param year The year in which they joined.
     */
    public Membership(String name, int month, int year)
        throws IllegalArgumentException
    {
        if(month < 1 || month > 12) {
            throw new IllegalArgumentException(
                "Month " + month + " out of range. Must be in the range 1 ... 12");
        }
        this.name = name;
        this.month = month;
        this.year = year;
    }

    /**
     * @return The member's name.
     */
    public String getName()
    {
        return name;
    }

    /**
     * @return The month in which the member joined.
     *         A value in the range 1 ... 12
     */
    public int getMonth()
    {
        return month;
    }

    /**
     * @return The year in which the member joined.
     */
    public int getYear()
    {
        return year;
    }

    /**
     * @return A string representation of this membership.
     */
    public String toString()
    {
        return "Name: " + name +
               " joined in month " +
               month + " of " + year;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:57:03.867

`Membership`是一类。虽然只有在方法是静态的情况下才允许调用方法。你的`getMonth`方法不是静态的，所以你需要一个`Membership`类的实例来调用它。您的`Club`班级中已经有一个实例列表，因此请选择其中一个并调用`getMonth`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T13:40:23.373

可以使用类名访问静态方法。在上面的代码中，您尝试使用类名称**Membership** (Membership.getMonth())访问**getMonth()方法。**但是 getMonth() 的签名是**public int getMonth()** { ... }，这里这个方法不包含任何静态关键字。因此，您会得到*“无法从静态上下文引用非静态方法 getMonth()”。*

 *****为了解决这个问题，我们应该将 public int getMonth() 更改为 public static int getMonth() 或使用您已经为 Membership 类创建的对象。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T13:06:26.933

静态修饰符使方法/字段成为类而不是对象（实例）的一部分。您通过使用类名作为引用（或对象引用，但这是不好的做法）来调用它。如果方法/字段不是静态的，则必须通过对类对象（实例）的引用来调用它。*****

# c# - 按 Enter 时根据其他单元格更新 Datagrid 单元格

> ID：11282096
> 
> 赞同：0
> 
> 时间：2012-07-01T12:51:18.393
> 
> 标签：c#, wpf, xaml, mvvm

`EventToCommand`在用户插入价格和数量后，我正在使用 Galasoft 的代码来更新 Line Total 单元格。当我插入价格、数量并按 Enter 时，请帮我找到适当的方法来更改 Line Total。我试过`InputBindings`了，但不幸的是没有用。

这是我的视图中的 Datagrid XAML：

```
<DataGrid  IsReadOnly="False" x:Name="_StockCardItems"  ItemsSource="{Binding InvoiceDetailsList, Mode=TwoWay}" SelectedItem="{Binding SelectedItem}"  CanUserDeleteRows="True" CanUserAddRows="False">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="CurrentCellChanged">
            <gs:EventToCommand PassEventArgsToCommand="True" Command="{Binding CurrentCellChangedCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <DataGrid.InputBindings>
        <KeyBinding Key="Enter" Command="{Binding CurrentCellChangedCommand}"/>
    </DataGrid.InputBindings>

    <DataGrid.Columns>

        <DataGridTemplateColumn Header="Désignation" Width="400" IsReadOnly="True">
            <DataGridTemplateColumn.CellTemplate  >
                <DataTemplate>
                    <TextBlock Margin="10,2" HorizontalAlignment="Left" Text="{Binding Path=Items.Designation}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="Quantité"  Width="150" IsReadOnly="False">
            <DataGridTemplateColumn.CellTemplate  >
                <DataTemplate>
                    <TextBox  Margin="10,0" HorizontalAlignment="Center" GotKeyboardFocus="TextBox_GotKeyboardFocus" GotMouseCapture="TextBox_GotMouseCapture" IsReadOnly="False"  Text="{Binding Path=Quantity, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource RemoveDoubleZero}}"  />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn   Header="PU"  Width="150" >
            <DataGridTemplateColumn.CellTemplate >
                <DataTemplate>
                    <TextBox  Margin="10,0" HorizontalAlignment="Center" IsReadOnly="False" GotKeyboardFocus="TextBox_GotKeyboardFocus" GotMouseCapture="TextBox_GotMouseCapture"  Text="{Binding Path=UnitePrice, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource RemoveDoubleZero}}"  />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="Montant HT"  Width="150" >
            <DataGridTemplateColumn.CellTemplate >
                <DataTemplate>
                    <TextBlock Margin="10,2" HorizontalAlignment="Right" Text="{Binding Path=Line_Total,Mode=TwoWay,ValidatesOnExceptions=True,ValidatesOnDataErrors=True, StringFormat=n, ConverterCulture=fr-FR}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

    </DataGrid.Columns>
</DataGrid> 
```

这是`CurrentCellChangedCommand`ViewModel 中的执行方法（`SelectedItem`是一个 EF 实体）：

```
private void RecalculateLineTotal()
{
    if (SelectedItem != null)
    SelectedItem.Line_Total = SelectedItem.Quantity * SelectedItem.UnitePrice;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:19:39.557

一段时间后它开始正常工作。我认为这是一些额外的东西阻止了那些按键工作。

# python - 如何将 wx.MessageDialog 居中到框架？

> ID：11282099
> 
> 赞同：0
> 
> 时间：2012-07-01T12:51:34.863
> 
> 标签：python, wxwidgets

我试过设置 dlg.CenterOnParent() 但这不起作用。我认为这是因为我的 MessageDialog 没有将框架设置为父级。在那种情况下，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:02:29.823

当你创建一个 wx 小部件时，创建函数的正常模式是 wx.SomeUIObject(parent, id, ...)。创建对话框时可以设置父级。

# xml - vb.net 中的语音识别没有那个烦人的识别窗口（以及关于识别 XML）

> ID：11282103
> 
> 赞同：0
> 
> 时间：2012-07-01T12:52:01.727
> 
> 标签：xml, vb.net, window, speech-recognition

1.如何在没有那个烦人的识别窗口的情况下启用语音识别，而不必按下那个窗口上的那个按钮？

2.我需要知道如何只识别我创建的 XML 中的单词（以提高准确性）。喜欢：如果我说“红色”并且它不在 XML 中，识别器会将其读取为“面包”或 XML 中的其他内容。

PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:13:51.197

创建识别引擎。

```
Private sr As New Speech.Recognition.SpeechRecognitionEngine() 
```

[将其绑定](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.setinputtodefaultaudiodevice.aspx)到音频设备。

[加载语法](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.loadgrammar)（可能通过`Speech.Recognition.Choices`，从 xml 中读取选项）。

[开始识别](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.recognizeasync)并等待完成（在循环中检查状态或通过处理[事件](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.speechrecognized)）。

# php - 如何在 ajax 加载的内容上附加 jQuery Masonry？

> ID：11282111
> 
> 赞同：1
> 
> 时间：2012-07-01T12:52:34.587
> 
> 标签：php, jquery, css, ajax

我正在使用[Infinite Scroll · jQuery Masonry](http://masonry.desandro.com/index.html)来实现无限滚动，代码在加载（通过 ajax 的内容）时执行得非常好，但问题是在滚动时，它没有给出正确的对齐方式，即没有附加 jQuery Masonry ..如何在 ajax 加载的内容上附加 jQuery Masonry？这是我的索引页代码链接： [http ://chopapp.com/#ty0jcg2g](http://chopapp.com/#ty0jcg2g)

并通过以下方式加载 ajax 内容：http: [//chopapp.com/#efctqpgn](http://chopapp.com/#efctqpgn)

# java - 哪些类应该在 JSF appl 中实现 Serializable？

> ID：11282115
> 
> 赞同：0
> 
> 时间：2012-07-01T12:53:05.673
> 
> 标签：java, jsf, serialization, jsf-2

`implements Serializable`JSF 应用程序中应该使用哪些类，哪些不应该使用？

*   `@SessionScoped @ManagedBean()`
*   `@ViewScoped @ManagedBean()`（我所有的观点都是视域的）
*   `@ApplicationScoped`
*   `@Entity @Table()`
*   `Servlets`
*   `Filters`
*   等等

我应该怎么想，应该考虑什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:15:33.313

这取决于。您需要回答的第一件事是您是否要使用会话序列化。如果您需要序列化，那么会话中的所有内容都需要可序列化。否则你根本不需要它。序列化用于在服务器重新启动时保持会话，或者很少 - 在非常复杂的设置中 - 将它们传输到另一个服务器实例。

某些容器将要求您显式禁用会话序列化，否则它们将生成异常。例如，默认情况下，tomcat 通过服务器重启启用持久会话。

# c# - 在同一张表上映射多对多关系

> ID：11282118
> 
> 赞同：3
> 
> 时间：2012-07-01T12:53:42.543
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在使用 nhibernate 3.3.1 和 fluent-nhibernate 1.3。我尝试用流利的方式映射以下实体：

```
public class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Person> Relations { get; set; }
} 
```

正如你所看到的，我的人与其他一些人有关系。所以我将 DB-Table 建模如下：

```
 | Persons
----+----------------------
 PK | Id int
    | Name nvarchar(100)

    | Relations
----+----------------------
 PK | Id int
 FK | Person1Id int
 FK | Person2Id int 
```

所以我想要一个映射，其中加载了人的关系，无论实际的人被引用为 Person1Id 还是 Person2Id。

流利的可以吗？如果没有，是否可以使用 hbn.xml 映射文件？

谢谢你的帮助，科雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:18:14.500

你不能*直接*映射它。您需要创建两个属性：

```
public virtual IList<Person> Relations1 { get; set; }
public virtual IList<Person> Relations2 { get; set; } 
```

然后创建一个合并它们的投影属性：

```
public virtual IEnumerable<Person> Relations
{
    get { return Relations1.Concat(Relations2); }
} 
```

（我假设你知道如何做第一部分；如果你不知道，请告诉我）

# arduino - 使用 Serial.print 的奇怪初始输出

> ID：11282119
> 
> 赞同：2
> 
> 时间：2012-07-01T12:53:56.690
> 
> 标签：arduino

当我写入串行接口时，当我的草图第一次运行时，我得到了奇怪和意外的输出。输出似乎是应该打印的变体：

例如：

```
String text1 = "foobar";

void setup() {
  Serial.begin(9600);

  Serial.print("\n");
  Serial.print(text1);
}

void loop() {
} 
```

输出结果：

```
fo
foobar 
```

（新行出现在“fo”之前，但我不知道如何包含它）。

因此，应该打印的任何内容的一些变体都会在应该打印的实际文本之前打印。改变输出，改变异常文本（有时是两个字符，有时是三个）。进行不影响输出的更改和重新编译对异常文本没有影响。

我是一个完全的 Arduino 新手（我今天才开始编写自己的代码），但我只能假设这不正常。我正在使用 Freetronics EtherTen 和 1.0 IDE

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:07:09.860

当您在计算机上打开其串行端口时，Arduino 正在重新启动您的草图。所以它打印出来，然后再次初始化。

后

```
Serial.begin(9600); 
```

尝试放置：

```
delay(500) 
```

或者

```
while (!Serial); // while the serial stream is not open, do nothing: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:45:26.660

您可能应该用 0 终止您的字符串。例如： String text1 = "foobar",0;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:35:13.777

正如 Eran W 所指出的，这很可能是串行通信重置问题。[在这里](https://stackoverflow.com/a/10921900/1440715)查看我之前的答案。

当 Arduino 接收到来自 Arduino IDE 以外的大多数设备的串行通信时，它会自动重置。这就是为什么您可以从 IDE 发送但不能从其他任何东西发送的原因。

我有一个 Uno，并在 Reset 和 Ground 之间放置了一个电容器。这是一个包含有关该主题的一些很好信息的页面。
祝你好运。 [http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)

# android - 控制 Android 手机中的摄像头硬件

> ID：11282120
> 
> 赞同：0
> 
> 时间：2012-07-01T12:54:00.620
> 
> 标签：android, camera

我想在我的安卓手机上控制光圈、快门速度和 ISO。有没有办法可以访问硬件功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T03:04:25.747

我不会说*不可能*做到这一点，但实际上不可能以一种适用于所有——甚至*许多*——Android手机的方式来做到这一点。如果您偏离了由 Android API 定义的官方路径，那么您几乎只能靠自己，这基本上是一个嵌入式硬件开发项目。

让我们从基础开始：您需要相机子系统的示意图和图像管道中所有内容的数据表。对于您打算支持的每部手机。在某些情况下，您可能会发现一些手机具有或多或少相同的摄像头子系统（特别是当您谈论在美国销售的运营商特定型号略有不同时），有时您可能会幸运地拥有很多您关心的手机与 Nexus 手机之间的相似性。

这是一个不小的壮举。据我所知，即使是 NEXUS 手机也没有发布官方原理图。流行的手机（尤其是三星和 HTC）通常会发布拆解信息，因此每个人都知道大致的细节（相机模块、视频编码芯片组等），但要弄清楚它们是如何连接在一起的，仍然有很多猜测。

别搞错了——这不是随便的黑客领域。如果 I2C、SPI、MMC 和 iDCT 之类的术语对您来说毫无意义，那么您可能不会走得太远。如果您不了解如何串行读取 CMOS 图像传感器，以及如何使用拜耳阵列生成 RGB 图像，那么您几乎可以肯定是在头上。

这并不意味着您应该认输并放弃……但这确实意味着尝试破解商用 Android 手机上的摄像头可能不是最好的起点。为了完成这样的项目，您需要大量背景知识，并且您确实需要从您控制并拥有适当文档的硬件平台获取这些知识。毫无疑问……在“硬”Android 软件项目的层次结构中，这非常接近列表的顶部。

我的建议（简化和浓缩一点）：购买一个 Raspberry Pi，并学习如何从 GPIO 引脚点亮 LED。然后学习如何通过 74HC595 移位寄存器有选择地点亮 8 个 LED。然后在分线板上购买一个 SPI 寻址的闪存芯片，并学习如何对其进行写入。在某个时候，从 Sparkfun.com 之类的人那里购买具有“串行”（fyi，“串行”！=“rs232”）接口的视频图像传感器，并学习如何一次读取一帧，并转储原始 RGB 数据闪烁。了解如何使用 i2c 读取和写入相机的控制寄存器。此时，您可能已经准备好使用 Android 手机中的相机拍摄单张照片了。

如果您决定从 Android 手机入手，至少现在坚持使用“Nexus”设备，并且在您拥有原理图、数据表和源代码之前不要购买手机（如果您还没有手机）你拥有的。不要以为您可以自己追踪原理图而购买手机。你不会的。至少，除非您是一名研究生并且拥有一个研究生级别的电子实验室（具有 X 射线功能）供您使用。这些芯片和模块大部分是微型BGA。你不会用万用表来追踪它们，而且我所知道的每个 Android 摄像头的大部分低级驱动程序逻辑都隐藏在源不可用的可加载内核模块中。

也就是说，我非常希望看到有人完成这样的项目。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T12:58:31.740

Android 已发布在线培训，其中包含您需要的所有信息： [您可以在此处找到它 - 媒体 API](http://developer.android.com/guide/topics/media/camera.html)

但是，存在局限性，并非所有硬件都支持所有类型的参数。如果我没记错的话，你无法控制快门速度和 ISO。

# winforms - WinForm 组合框 - 表单加载时 SelectedValue 不正确

> ID：11282128
> 
> 赞同：1
> 
> 时间：2012-07-01T12:54:39.020
> 
> 标签：winforms, linq-to-sql, data-binding, combobox, lookup

我的 Windows 窗体包含 1 个绑定到类别绑定源的组合框和 1 个绑定到产品绑定源的数据网格。当我加载表单时，组合框显示类别表中的第一个值，而不是 Products 表中的选定值，当我在 Products 绑定源中更改位置时，我可以在组合框中获得正确的 selectedValue（它显示正确的值）。所以我的问题是第一次加载组合框项目。

我的组合属性：

数据源 = categorybindingsource

显示成员 = 类别名称

值成员 = CategoryID

选定值 = productBindingSource – CategoryID

这是我的代码：

```
NorthwindDataContext dc;
private void Form1_Load(object sender, EventArgs e)
{
    dc = new NorthwindDataContext();
    productBindingSource.DataSource = dc.Products;

    this.categoryIDComboBox.DataSource = dc.Categories;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:26:55.953

尝试颠倒组合框和数据网格的初始化顺序

```
NorthwindDataContext dc; 
private void Form1_Load(object sender, EventArgs e) 
{ 
    dc = new NorthwindDataContext(); 
    this.categoryIDComboBox.DataSource = dc.Categories; 
    productBindingSource.DataSource = dc.Products; 
} 
```

# javascript - 将 Javascript 字符串构建代码移植到 Objective C

> ID：11282131
> 
> 赞同：1
> 
> 时间：2012-07-01T12:55:04.837
> 
> 标签：javascript, objective-c, porting

我在 Javascript 中有这段代码：

```
var f = chr(50) + chr(0) + chr(1) + chr(64) + chr(24) + chr(0) + chr(0) + chr(1) + chr(159) + chr(13) + chr(0) + chr(0) + chr(224) + chr(7);

function chr(AsciiNum) {
    return String.fromCharCode(AsciiNum);
} 
```

`console.log`将其输出为

```
2@
à 
```

长度为 14。

我正在尝试将其移植到Objective C。我尝试执行以下操作：

```
NSString *f = [NSString stringWithFormat:@"%c%c%c%c%c%c%c%c%c%c%c%c%c%c",50, 0 ,1, 64 , 24 , 0 , 0 , 1, 159,  13 , 0 , 0 , 224 , 7]; 
```

但是在使用 NSLog 时，我收到了与 javascript 代码不同的输出：

```
2@ü 
```

我究竟做错了什么？是字符集问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:15:37.550

好吧，您的问题似乎源于 NSString 的 ASCII 支持仅限于严格的 7 位 ASCII 编码，这意味着仅支持 0-127 字符。您必须使用不同的数据类型来存储您的字符，并且不同的数据类型是`unichar`，它支持 2^15-1 正是因为它是`unsigned short`. 但是，您需要将其转换为在 Unicode 中使用此[类别](https://stackoverflow.com/a/1354413/945847)运行的 NSString ：

```
@interface NSString (MNNSStringWithUnichar)
+ (NSString *) stringWithUnichar: (unichar) value;
@end

@implementation NSString (MNNSStringWithUnichar)

+ (NSString *) stringWithUnichar:(unichar) value {
     NSString *str = [NSString stringWithFormat: @"%C", value];
     return str;
}
@end 
```

或者干脆`NSLog(@"%C", value);`

# php - 在将数据发送回之前将数据添加到 ResponseText。

> ID：11282132
> 
> 赞同：0
> 
> 时间：2012-07-01T12:55:22.237
> 
> 标签：php, jquery, xmlhttprequest

我正在使用 JQXHR 将数据发布到我的服务器，然后将其添加到数据库中。当我向数据库添加内容时，我想返回刚刚添加到数据库中的文章的 ID。有没有办法在 Responsetext 被发送回客户端之前添加一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:14:32.790

响应文本是您的 php 文件的输出。这意味着您可以在代码中执行以下操作：

1.  将数据插入数据库
2.  从 db 获取 id
3.  `echo $id;`

# python - 在 django 中访问表单的实例

> ID：11282134
> 
> 赞同：0
> 
> 时间：2012-07-01T12:55:35.160
> 
> 标签：python, django

我有一个表单，它是某个模型 X 的实例。现在，如果我在另一个视图中处理表单提交（POST），我如何在视图中访问表单的实例。一个视图用于创建表单，另一个视图用于创建表单视图用于处理表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:02:44.300

从[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-clean-method)

> 此外，绑定到模型对象的模型表单实例将包含一个 self.instance 属性，该属性使模型表单方法可以访问该特定模型实例。

```
def myview(request):
    if request.method == "POST":
        form = MyModelForm(request.POST,request.FILES)
        # form.instance -- this is the model 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:04:17.200

您可以简单地将表单对象传递给辅助视图：

```
def view_one(request, slug):
    if request.method == 'POST':
        obj = get_object_or_404(Model, slug=slug)
        model_form = MyModelForm(request.POST, instance = obj)
        return view_two(request, form=model_form) 

def view_two(request, form=None):
    if form:
        obj = form.save(commit=False)
        obj.some_attribute = "Foo"
        obj.save()
        return render_to_response(...) 
```

# java - JavaFX 2.0 树视图上下文菜单

> ID：11282136
> 
> 赞同：3
> 
> 时间：2012-07-01T12:55:42.443
> 
> 标签：java, treeview, cell, javafx-2

我目前正在研究 TreeView，并希望实现一个在 TreeCell 上右键单击时弹出的 ContextMenu。我已经研究了这些示例，但我不确定如何将 ContextMenu 设置为在每个单元格上弹出，而不仅仅是那些充满孩子的单元格。

```
Here my code (pretty much the sample code):

Constructor
.
.
.

this.setCellFactory(new Callback<TreeView<String>,TreeCell<String>>()
    {
            @Override
            public TreeCell<String> call(TreeView<String> p) 
            {
                return new TextFieldTreeCellImpl();
            }
        });
    }

    private final class TextFieldTreeCellImpl extends TreeCell<String> 
    {

        private TextField textField;
        private ContextMenu addMenu = new ContextMenu();

        @SuppressWarnings({ "rawtypes", "unchecked" })
    public TextFieldTreeCellImpl() 
        {
            MenuItem addMenuItem = new MenuItem("Add Note");
            addMenu.getItems().add(addMenuItem);
            addMenuItem.setOnAction(new EventHandler() 
            {
                public void handle(Event t) 
                {
                    ImageView noteIcon = new ImageView(new Image(getClass().getResourceAsStream("../icons/note.png")));
            noteIcon.setFitHeight(16);
            noteIcon.setFitWidth(16);

                    TreeItem newNote = new TreeItem<String>("New Note");
                    getTreeItem().getChildren().add(newNote);
                }
            });
        }

        @Override
        public void startEdit() 
        {
            super.startEdit();

            if (textField == null) 
            {
                createTextField();
            }
            setText(null);
            setGraphic(textField);
            textField.selectAll();
        }

        @Override
        public void cancelEdit() 
        {
            super.cancelEdit();

            setText((String) getItem());
            setGraphic(getTreeItem().getGraphic());
        }

        @Override
        public void updateItem(String item, boolean empty) 
        {
            super.updateItem(item, empty);

            if (empty) 
            {
                setText(null);
                setGraphic(null);
            } 
            else
            {
                if (isEditing()) 
                {
                    if (textField != null) 
                    {
                        textField.setText(getString());
                    }
                    setText(null);
                    setGraphic(textField);
                } 
                else 
                {
                    setText(getString());
                    setGraphic(getTreeItem().getGraphic());
                    if (!getTreeItem().isLeaf()&&getTreeItem().getParent()!= null)
                    {
                        setContextMenu(addMenu);
                    }
                }
            }
        }

        private void createTextField() 
        {
            textField = new TextField(getString());
            textField.setOnKeyReleased(new EventHandler<KeyEvent>() 
            {
                @Override
                public void handle(KeyEvent t) 
                {
                    if (t.getCode() == KeyCode.ENTER) 
                    {
                        commitEdit(textField.getText());
                    } 
                    else if (t.getCode() == KeyCode.ESCAPE) 
                    {
                        cancelEdit();
                    }
                }
            });     
        }

        private String getString() 
        {
            return getItem() == null ? "" : getItem().toString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:59:54.640

仅将 contextMenu 显示为“充满子项”的单元格由以下行控制：

```
if (!getTreeItem().isLeaf() && getTreeItem().getParent() != null) {
    setContextMenu(addMenu);
} 
```

删除 if 控件以将 contextMenu 弹出到所有节点/单元格。

# backbone.js - Backbone（可能是 Marionette）应用程序中的多个路由器

> ID：11282145
> 
> 赞同：2
> 
> 时间：2012-07-01T12:57:00.450
> 
> 标签：backbone.js, marionette

我目前已经为我的 Backbone 应用程序（非**[Marionette](https://github.com/derickbailey/backbone.marionette)**）定义了多个路由器。

```
authRouter = new AuthRouter()
usersRouter = new UsersRouter()
...

# then to use them
authRouter.navigate "auth/login"
usersRouter.navigate "users/changePassword" 
```

如您所见，我正在使用变量进行导航。所以我必须知道要调用哪个路由器。是否可以以某种方式将代码组织到单独的类中，但是当我想导航时，只需调用`appRouter.navigate "something"`而不需要知道它是哪个路由器？Marionette 建议不要使用大型路由器，但没有推荐的方式/示例

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T17:09:27.133

如果您查看 Backbone 的注释源代码，您会注意到调用`myRouter.navigate`只不过是一个转发方法调用`Backbone.history.navigate`

[http://backbonejs.org/docs/backbone.html#section-114](http://backbonejs.org/docs/backbone.html#section-114)

所以没有必要为导航方法跟踪路由器。您可以直接调用 Backbone.history.navigate。

`Backbone.history.navigate "auth/login"`

# android - 来自数据库的android列表视图

> ID：11282150
> 
> 赞同：1
> 
> 时间：2012-07-01T12:57:14.023
> 
> 标签：android, database, listview

我的应用程序有 SQLiteDataBase 表有两个字段

1.sender.... 2.message

```
messagedb=context.openOrCreateDatabase("message",0, null);
                    messagedb.execSQL("CREATE TABLE IF NOT EXISTS tab2(sender INT(13),body varchar)");
                    mydb.execSQL("INSERT INTO tab2 VALUES('"+sender+"','"+sb+"')");
//sb contains message 
```

我如何从数据库中填充 ListView

[http://a6.sphotos.ak.fbcdn.net/hphotos-ak-ash4/483993_349052115164919_754938581_n.jpg](http://a6.sphotos.ak.fbcdn.net/hphotos-ak-ash4/483993_349052115164919_754938581_n.jpg)

图片空间包含联系人图片，上方的文本字段包含放置消息的发件人姓名（联系人姓名）......我也希望添加消息接收日期和时间......对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:14:37.707

创建自定义 SimpleCursorAdapter。我认为您足够聪明，可以在数据库中查询所需的列。一旦您的 cusror 准备好，将其传递给自定义适配器。

下面的片段会帮助你。

```
cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI, null,
                null, null, null);

contactList.setAdapter(new MyCursorAdapter(this, R.layout.row, cursor,
                new String[] { ContactsContract.Contacts.DISPLAY_NAME,
                        ContactsContract.Contacts.LAST_TIME_CONTACTED },
                new int[] { R.id.name, R.id.email })); 
```

**MyCursorAdapter.java**

```
public class MyCursorAdapter extends SimpleCursorAdapter {

    private Cursor cursor;
    private int layout;
    private Context context;

    public MyCursorAdapter(Context context, int layout, Cursor cursor,
            String[] from, int[] to) {
        super(context, layout, cursor, from, to);
        this.context = context;
        this.cursor = cursor;
        this.layout = layout;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        cursor.moveToPosition(position);  <---- This is very important.
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(layout, null);
        TextView txtName = (TextView) view.findViewById(R.id.name);
        TextView txtEmail = (TextView) view.findViewById(R.id.email);

        int nameColumnIndex = cursor
                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
        int frequencyColumnIndex = cursor
                .getColumnIndex(ContactsContract.Contacts.TIMES_CONTACTED);

        txtName.setText(cursor.getString(nameColumnIndex));
        txtEmail.setText(cursor.getString(frequencyColumnIndex));
        return view;
    }
} 
```

# java - jsp与hibernate和spring集成出错

> ID：11282157
> 
> 赞同：0
> 
> 时间：2012-07-01T12:58:09.357
> 
> 标签：java, spring, hibernate, jakarta-ee, jsf-2

我想集成spring jsf hibernate。我使用 Maven 和 Eclipse。但我有错误。你能帮帮我吗？应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:task="http://www.springframework.org/schema/task"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.1.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

 <!-- Beans Declaration -->
 <bean id="customer" class="model.Customer"/>

<!-- CustomerBo Declaration -->
 <bean id="CustomerBoImpl" class="bo.CustomerBoImpl">
      <property name="customerDaoImpl" ref="CustomerDaoImpl" />
     </bean>

 <!-- Customer DAO Declaration -->
 <bean id="CustomerDaoImpl" class="dao.CustomerDaoImpl">
  <property name="sessionFactory" ref="SessionFactory" />
 </bean>

 <!-- Data Source Declaration -->
 <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
  <property name="driverClass" value="oracle.jdbc.driver.OracleDriver" />
  <property name="jdbcUrl" value="jdbc:oracle:thin:@Mohsen-PC:1521:mydb" />
  <property name="user" value="system" />
  <property name="password" value="123" />
  <property name="maxPoolSize" value="10" />
  <property name="maxStatements" value="0" />
  <property name="minPoolSize" value="5" />
 </bean>

 <!-- Session Factory Declaration -->
 <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
  <property name="dataSource" ref="DataSource" />
  <property name="annotatedClasses">
   <list>
    <value>model.Customer</value>
   </list>
  </property>
  <property name="hibernateProperties">
   <props>
    <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
    <prop key="hibernate.show_sql">true</prop>
   </props>
  </property>
 </bean>

 <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager"/>

 <!-- Transaction Manager is defined -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
       <property name="sessionFactory" ref="SessionFactory"/>
    </bean>

</beans> 
```

客户管理的bean

```
@ManagedBean(name="CustomerMB")
@RequestScoped
public class Customermanagedbean implements Serializable{
@ManagedProperty(value="#{CustomerBoImpl}")
ICustomerBo customerBoImpl;
List<Customer> CustomerList;
public int customerId;
public String name;
public String address;
public String createdDate;

public ICustomerBo getCustomerBoImpl() {
    return customerBoImpl;
}
public void setCustomerBoImpl(ICustomerBo customerBoImpl) {
    this.customerBoImpl = customerBoImpl;
}

public List<Customer> getCustomerList() {
    return CustomerList;
}
public void setCustomerList(List<Customer> customerList) {
    CustomerList = customerList;
}
public int getCustomerId() {
    return customerId;
}
public void setCustomerId(int customerId) {
    this.customerId = customerId;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getCreatedDate() {
    return createdDate;
}
public void setCreatedDate(String createdDate) {
    this.createdDate = createdDate;
}

} 
```

CustomerBoImpl.java

```
public class CustomerBoImpl implements ICustomerBo{

    ICustomerDao customerDao;

    public void setCustomerDao(ICustomerDao customerDao) {
        this.customerDao = customerDao;
    }

    public ICustomerDao getCustomerDao() {
        return customerDao;
    }

    public void addCustomer(Customer customer){

        getCustomerDao().addCustomer(customer);

    }

    public void updateCustomer(Customer customer){
        getCustomerDao().updateCustomer(customer);
    }

    public void deleteCustomer(Customer customer){
        getCustomerDao().deleteCustomer(customer);
    }
    public List<Customer> findAllCustomer(){

        return getCustomerDao().findAllCustomer();
    }
} 
```

CustomerDaoImpl.java

```
public class CustomerDaoImpl implements ICustomerDao{
    private SessionFactory sessionFactory;
    public SessionFactory getSessionFactory() {
        return sessionFactory;}
    public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
    }

    public void addCustomer(Customer customer){ 
        getSessionFactory().getCurrentSession().save(customer);

    }

    public void updateCustomer(Customer customer){
        getSessionFactory().getCurrentSession().update(customer);
    }

    public void deleteCustomer(Customer customer){
        getSessionFactory().getCurrentSession().delete(customer);
    }

    public List<Customer> findAllCustomer(){

        List list = getSessionFactory().getCurrentSession

().createQuery("from CUSTOMER").list();
        return list;

    }
} 
```

错误：

```
initWebApplicationContext
    SEVERE: Context initialization failed
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'CustomerBoImpl' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'customerDaoImpl' of bean class [bo.CustomerBoImpl]: Bean property 'customerDaoImpl' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1396)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
    Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'customerDaoImpl' of bean class [bo.CustomerBoImpl]: Bean property 'customerDaoImpl' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1064)
        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
        ... 23 more

    Jul 01, 2012 4:54:28 PM org.apache.catalina.core.StandardContext listenerStart
    SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'CustomerBoImpl' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'customerDaoImpl' of bean class [bo.CustomerBoImpl]: Bean property 'customerDaoImpl' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1396)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
    Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'customerDaoImpl' of bean class [bo.CustomerBoImpl]: Bean property 'customerDaoImpl' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1064)
        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
        ... 23 more 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:09:44.240

在您的 ApplicationContext.xml 中，您有

```
<!-- CustomerBo Declaration -->
 <bean id="CustomerBoImpl" class="bo.CustomerBoImpl">
      <property name="customerDaoImpl" ref="CustomerDaoImpl" />
     </bean> 
```

但是`CustomerBoImpl`该类没有具有该名称的字段。相反，它具有`customerDao`.

# iphone - 如何重用函数中生成的多个 UIView 对象

> ID：11282163
> 
> 赞同：0
> 
> 时间：2012-07-01T12:58:37.540
> 
> 标签：iphone, nsmutablearray, uigesturerecognizer

我

我在自定义 scrollView 类的 initierScrollView 函数中生成了多个 UIView 对象。我标记了每个对象并将每个对象插入到 NSMutableArray 对象中。比我将 UIPanGestureRecognizer 与每个视图对象相关联。

```
 -(void)initierScrollView
    {
        int i;
        for (i=0; i<6; i++) {

            UIImage *image = [UIImage imageNamed:@"back.png"];
            UIImageView *bouton = [[UIImageView alloc] initWithImage:image];
            [bouton setTag:i];
            [bouton setFrame:CGRectMake(10+62*i,10,62,55)];
 classementBoutons = [[NSMutableArray alloc] initWithCapacity:40];
            [classementBoutons insertObject:bouton atIndex:i];
            bouton.userInteractionEnabled = YES;

            UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
            //recognizer.delegate = self; 
            [bouton addGestureRecognizer:recognizer];

            [self addSubview:bouton];
    } 
```

现在我正在尝试通过选择通过 Gesture 移动的对象来重用这些对象。我尝试了从 NSMutableArray 中获取每个对象的方法（如头文件下定义的那样），但 Xcode 似乎无法识别它们（没有新动作）。

```
-(IBAction)handlePanGesture:(UIPanGestureRecognizer*)recognizer
{
    NSLog(@"Mouvement ok");
    CGPoint translation = [recognizer translationInView:self];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self];

    if(recognizer.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"voila c'est fait");
        [[classementBoutons objectAtIndex:2]setFrame:CGRectMake(50, 50, 100, 100)];

    }
} 
```

我不知道为什么插入到 Mutable 数组中的对象被取出后无法识别？

感谢您的回复。

胜利者

# iphone - 有没有办法在 iPhone Safari 中标记 Go 按钮？

> ID：11282164
> 
> 赞同：0
> 
> 时间：2012-07-01T12:58:38.330
> 
> 标签：iphone, forms, web, mobile-safari

当焦点放在这个表单的输入上时，iPhone 会显示输入键盘和 Go 按钮，用作提交。是否可以将标签更改为例如“创建”？我尝试了值、标题或名称，但这些都不起作用。

```
<form>
  <input name="foo" type="text"/>
  <input type="submit" name="Create" value="Create" title="Create"/>
</form> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-01T13:55:19.477

不，这样的事情是不可能的。

# java - 如何测试 ActionBar 中的 SearchView？

> ID：11282167
> 
> 赞同：1
> 
> 时间：2012-07-01T12:58:53.983
> 
> 标签：java, android, testing, junit, searchview

我在 JavaDocs 中找不到关于如何使用 Android 测试在菜单中的 SearchView 进行测试的任何示例或帮助。有没有办法做到这一点？

我想`.setQuery("Foo", true)`在我的应用程序中做一个或等效的测试搜索。怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:00:27.887

[根据这个文档](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)

> 注意：虽然折叠您的操作视图是可选的，但我们建议您始终折叠包含 SearchView 的操作视图。另请注意，某些设备提供专用的搜索按钮，如果用户按下搜索按钮，您应该展开搜索操作视图。只需覆盖活动的 onKeyUp() 回调方法，侦听 KEYCODE_SEARCH 事件，然后调用 expandActionView()。

如果您已经为 KEYCODE_SEARCH 事件扩展了 serach 视图，那么应该可以通过使用仪器注入事件来进行测试。

```
public void testSearch() { 
   Instrumentation instrumentation = getInstrumentation(); 
   instrumentation.sendKeyDownUpSync(KeyEvent.KEYCODE_SEARCH); 
   instrumentation.sendCharacterSync(KeyEvent.KEYCODE_F); 
   instrumentation.sendCharacterSync(KeyEvent.KEYCODE_O); 
   instrumentation.sendCharacterSync(KeyEvent.KEYCODE_O);
   //Assert here for whatever you want. 
} 
```

确保您在清单中具有注入权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:21:42.023

我认为您可以使用 monkeyrunner 来做到这一点：http: [//developer.android.com/tools/help/monkeyrunner_concepts.html](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

# css - Twitter Bootstrap：列之间没有边距

> ID：11282168
> 
> 赞同：13
> 
> 时间：2012-07-01T12:58:56.597
> 
> 标签：css, layout, twitter-bootstrap

我想删除引导程序中跨度之间的边距。

一种想法是只用零边距和填充覆盖 css 属性。这是一个例子：http: [//jsfiddle.net/kKEpY/3/](http://jsfiddle.net/kKEpY/3/)

除了左列浮动到右列之外，它都可以工作，但我更喜欢直接引导解决方案。那么 bootstrap 是否提供了一个清除列边距的属性（跨度流体）？

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T16:17:01.043

**更新**：下面的解决方案是指旧版本（< 2.1）：从 v2.1 开始，流体网格是根据正常网格尺寸自动计算的 - 请参阅[github 上的 variables.less](https://github.com/twitter/bootstrap/blob/v2.1.0/less/variables.less#L266)

要获得相同的结果，请将and设置`@gridGutterWidth`为您认为合适的值。`0``@gridColumnWidth``@gridColumns`

* * *

[在那里](http://twitter.github.com/bootstrap/customize.html#variables)，设置

*   `@fluidGridColumnWidth`到`8.333333333%`和
*   `@fluidGridGutterWidth`到`0%`

你可以得到[那个 (jsfiddle)](http://jsfiddle.net/Sherbrow/kKEpY/4/)。

**警告：**生成器似乎根据您的变量和默认变量（我在 jsfiddle 上删除）放置了规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-17T13:17:37.677

我遇到了和你一样的问题，所以这是我在最新的 Bootstrap 版本 2.3.1 上解决这个问题的方法：

首先，您需要使用类“row”向父 div 添加一个“no-space”类，如下所示：

```
<div class="row-fluid no-space">
  <div class="span3">...</div>
  <div class="span3">...</div>
  <div class="span3">...</div>
  <div class="span3">...</div>
</div> 
```

然后根据您想要在该行中的元素数量修改您的 css，如下所示：

```
.no-space [class*="span"]{
  margin-left: 0 !important;
  width: 25% !important; // This is for 4 elements ONLY in the row
} 
```

宽度的数学公式是：

```
100 / number of elements in the row = width. 
```

就我而言，它是 4 个元素，所以它是：

```
100 / 4 = 25%; 
```

如果是 3 个元素，它将是：

```
100 / 3 = 33.3333333333%; 
```

如果您的项目中有多个案例存在此问题，您可能希望向 css 规则添加唯一的 id 或类，以免影响所有案例。

就是这样。无需重新下载引导程序并处理源文件
PS：此方法也适用于响应式设计；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-23T08:40:23.650

上面的答案真的很有帮助，但我的情况有点不同。

我在html中有一个**span4**和一个**span8** div，html代码是这样的：

```
<div class="row">
    <div class="span4">Content of span4</div>
    <div class="span8">Content of span8</div>
</div> 
```

![在此处输入图像描述](../Images/56c5eb46cf5a687cb8bd5d09fa611fd8.png)

为了做到这一点，我不仅应该将**margin-left**重写为 0，而且还必须**自定义 span4 和 span8 的宽度。**所以这是对我有用的代码：

```
.no-space [class*="span"]{
  margin-left: 0 !important;

  &.span8{
      width: 75%;
  }
  &.span4{
      width: 25%;
  }
} 
```

谢谢你的灵感！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:41:59.337

我想在我的 HTML 中使用带边距的跨度和不带边距的跨度。当使用较少时，这很容易。只需创建您自己的 less 文件，将其命名为“no-margin-span.less”，并将其包含在 less 代码中的某个位置。之后，您可以在 html 文件中使用“no-margin-span5”而不是“span5”。这与例如“no-margin-offset5”和“offset5”相同。“no-margin-span.less”文件应包含以下代码：

```
#grid {
    .fluid (@fluidGridColumnWidth, @fluidGridGutterWidth) {

        .no-margin-spanX (@index) when (@index > 0) {
          (~".no-margin-span@{index}") { .no-margin-span(@index); }
          (~'.no-margin-span@{index}:first-child') { .no-margin-spanFirstChild(@index); }
          .no-margin-spanX(@index - 1);
        }
        .no-margin-spanX (0) {}

        .no-margin-offsetX (@index) when (@index > 0) {
          (~'.no-margin-offset@{index}') { .no-margin-offset(@index); }
          .no-margin-offsetX(@index - 1);
        }
        .no-margin-offsetX (0) {}

        .no-margin-offset (@columns) {
          margin-left: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) + (@fluidGridGutterWidth);
          *margin-left: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) - (.5 / @gridRowWidth * 100 * 1%) + @fluidGridGutterWidth - (.5 / @gridRowWidth * 100 * 1%);
        }

        .no-margin-span (@columns) {
            width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) + @fluidGridGutterWidth;
            *width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) - (.5 / @gridRowWidth * 100 * 1%) + (@fluidGridGutterWidth - (.5 / @gridRowWidth * 100 * 1%));
        }

        .no-margin-spanFirstChild (@columns) {
            width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1));
            *width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) - (.5 / @gridRowWidth * 100 * 1%);
        }

        .row-fluid {
            [class*="no-margin-span"] {
                .input-block-level();
                float: left;
                margin-left: 0;
            }

            // generate .no-margin-spanX and .no-margin-offsetX
            .no-margin-spanX (@gridColumns);
            .no-margin-offsetX (@gridColumns);
        }
    }
} 
```

编辑 - 要使此代码具有响应性，请将以下代码添加到“no-margin-span.less”文件中：

```
@media (max-width: 767px) {
    // Make all grid-sized elements block level again
    [class*="no-margin-span"],
    .uneditable-input[class*="no-margin-span"], // Makes uneditable inputs full-width when using grid sizing
    .row-fluid [class*="no-margin-span"],
    [class*="no-margin-span"]:first-child,
    .uneditable-input[class*="no-margin-span"]:first-child, // Makes uneditable inputs full-width when using grid sizing
    .row-fluid [class*="no-margin-span"]:first-child {
        float: none;
        display: block;
        width: 100%;
        margin-left: 0;
        .box-sizing(border-box);
    }
    .no-margin-span12,
    .row-fluid .no-margin-span12 {
        width: 100%;
        .box-sizing(border-box);
    }
    .row-fluid [class*="offset"]:first-child {
        margin-left: 0;
    }

    // FORM FIELDS
    // -----------
    // Make no-margin-span* classes full width
    .input-large,
    .input-xlarge,
    .input-xxlarge,
    input[class*="no-margin-span"],
    select[class*="no-margin-span"],
    textarea[class*="no-margin-span"],
    .uneditable-input {
        .input-block-level();
    }
    // But don't let it screw up prepend/append inputs
    .input-prepend input,
    .input-append input,
    .input-prepend input[class*="no-margin-span"],
    .input-append input[class*="no-margin-span"] {
        display: inline-block; // redeclare so they don't wrap to new lines
        width: auto;
    }
    .controls-row [class*="no-margin-span"] + [class*="no-margin-span"] {
        margin-left: 0;
    }
} 
```

# signalr - SignalR - 在生产中，8 小时后没有响应

> ID：11282169
> 
> 赞同：1
> 
> 时间：2012-07-01T12:59:09.117
> 
> 标签：signalr, self-hosting

在生产中使用 SignalR。启动时一切正常，但 8-9 小时后，服务停止工作，无任何异常，或事件日志中的任何日志信息。

**信息：**

*   在线用户（在这 8-9 小时内使用此服务）：3000
*   在线并发用户最大（同时）：200
*   集线器计数：1（尝试在每种记录方法中使用 catch）

浏览器超时后，它返回“404 not found”。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:43:58.170

您使用的是什么版本的 SignalR？`OutOfMemoryException`您应该使用 v0.5.2，因为以前的版本存在僵尸连接问题，这会导致应用程序池的请求数量达到或超过允许的数量， 从而关闭您的应用程序。

基本上会发生的情况是请求的数量将得到备份（使用性能监视器查看 ASP.NET/{Requests Current, Requests Queued, Requests Rejected} -[请参阅性能调整](https://github.com/SignalR/SignalR/wiki/Performance)）和/或您将最大化您的 IIS 请求并且服务将关闭。您可以手动覆盖它并增加 ASP.NET 的当前请求。我在我们的生产盒上将其增加到大约 20,000 个。

如果您没有最大化您的请求，您的应用程序池可能会由于内存使用量增加或关闭应用程序池的异常数量而关闭。

在 IIS 管理器的管理下，双击配置编辑器。

![在此处输入图像描述](../Images/6dd1640e2c40e1b2978af915ef02cf03.png)

接下来，在顶部，单击`system.applicationHost/applicationPools`然后单击“（集合）”行的 RHS。这将打开您的应用程序池集合编辑器。

![在此处输入图像描述](../Images/2d5dc7e5464c38af99bad2cd09b7085a.png)

选择您的 SignalR 应用程序池并检查底部的属性。在这里，您可以将`periodicRestart/memory`阈值设置为您想要的任何值。

![在此处输入图像描述](../Images/fa69795f04e1b069771e433ab53c2ad8.png)

在我们的应用程序中，由于应用程序的高流量性质，我发现我们可以运行大约 45 分钟。

希望这会有所帮助。

# perl - Getopt::长期缺少参数

> ID：11282179
> 
> 赞同：1
> 
> 时间：2012-07-01T13:01:18.147
> 
> 标签：perl, getopt-long

我编写了一个需要从用户那里获取少量参数的脚本，但在尝试读取我的脚本参数时遇到了问题。

该脚本可以获取`-type`用于在一种文件类型上运行函数的方法，也可以获取用于在所有文件类型上运行的标志`-all`。

```
my $opt = GetOptions (
    'help|h' => \$help,
    'type=s' => \$type,
    'all'    => \$all,
); 
```

我试图考虑用户可以运行的所有错误选项，并发现当用户运行时`myscript.pl -type -all`，模块将 读取`-all`为`-type`字符串。

有什么优雅的方法可以避免这种事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T13:08:31.000

允许`-type`或`-all`，但不能同时允许。或者，删除该`-all`选项，如果`-type`后面跟着`all`，请按照您现在尝试处理的方式处理它`-all`。

```
my $opt = GetOptions (
    'help|h' => \$help,
    'type=s' => \$type,
    'all'    => sub { $type = "all"; },
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T13:11:56.177

使用`'type:s'`代替`'type=s'`并且 -type 的值将是可选的。优雅的？我不知道，但它已经腐烂了。

# magento - Magento 模块卸载

> ID：11282204
> 
> 赞同：4
> 
> 时间：2012-07-01T13:05:04.933
> 
> 标签：magento

magento 有卸载模块的功能吗？

我特别指的是那些修改数据库的模块。所以卸载实际上包括删除模块文件和清理其背后的数据库。

1.  从管理区域自动卸载
2.  卸载模块可以观察的钩子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:10:10.043

**Magento 中没有卸载或回滚机制。**非正式接受的回滚过程是在升级脚本中执行回滚操作。事实上的卸载实践是提供一个删除脚本，以便在删除模块文件后在数据库上运行。

`Mage_Core_Model_Resource_Setup->_getModifySqlFiles()` [自 1.0 版本以来](http://svn.magentocommerce.com/source/branches/1.0/app/code/core/Mage/Core/Model/Resource/Setup.php)，已经有用于回滚和卸载操作的存根代码，但它[尚未在 1.7.0.1 版本中实现](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Model/Resource/Setup.php#L663)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:34:04.910

您可以通过 Magento Connect 管理器运行卸载，删除数据库文件也相对简单。您可能需要查看 config.xml 和 mysql4-install-#.#.#.php sql 安装脚本。您可以在此处找到表名，并在 core_resource 表中找到安装条目。

# eclipse - 运行 junit 会导致 Eclipse 崩溃，java 退出 =1

> ID：11282205
> 
> 赞同：1
> 
> 时间：2012-07-01T13:05:05.527
> 
> 标签：eclipse, junit

**每次我尝试运行一个junit时，我的eclipse都会崩溃。我在搜索问题时尝试了多个开关**

```
-XX:-UseCompressedOops
-XX:CompileCommand=exclude,org/eclipse/cdt/internal/core/dom/parser/cpp/CPPASTFunctionDeclarator,postAccept
-XX:CompileCommand=exclude,org/eclipse/cdt/internal/core/dom/parser/cpp/semantics/CPPSemantics,declaredBefore 
```

1.  也尝试过使用内存大小。
2.  尝试给 -vm arg 指定 jdk javaw

错误日志：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000000fdd032d7, pid=288, tid=512
#
# JRE version: 7.0_05-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.1-b03 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [LPK.dll+0x32d7]  LpkGetTextExtentExPoint+0x14b7
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x00000000022cd000):  JavaThread "main" [_thread_in_native, id=512, stack(0x0000000002490000,0x0000000002590000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x0000000000000020

R
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J  org.eclipse.swt.internal.win32.OS.CallWindowProcW(JJIJJ)J
J  org.eclipse.swt.internal.win32.OS.CallWindowProc(JJIJJ)J
j  org.eclipse.swt.widgets.Text.callWindowProc(JIJJ)J+852
J  org.eclipse.swt.widgets.Control.windowProc(JIJJ)J
j  org.eclipse.swt.widgets.Text.windowProc(JIJJ)J+98
J  org.eclipse.swt.widgets.Display.windowProc(JJJJ)J
v  ~StubRoutines::call_stub
j  org.eclipse.swt.internal.win32.OS.SetWindowTextW(J[C)Z+0
j  org.eclipse.swt.internal.win32.OS.SetWindowText(JLorg/eclipse/swt/internal/win32/TCHAR;)Z+21
j  org.eclipse.swt.widgets.Text.setText(Ljava/lang/String;)V+109
j  org.eclipse.jdt.internal.junit.ui.CounterPanel.setErrorValue(I)V+8
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.refreshCounters()V+117
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.processChangesInUI()V+16
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.access$12(Lorg/eclipse/jdt/internal/junit/ui/TestRunnerViewPart;)V+1
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart$16.run()V+4
j  org.eclipse.swt.widgets.Synchronizer.syncExec(Ljava/lang/Runnable;)V+121
j  org.eclipse.ui.internal.UISynchronizer.syncExec(Ljava/lang/Runnable;)V+91
j  org.eclipse.swt.widgets.Display.syncExec(Ljava/lang/Runnable;)V+64
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.postSyncRunnable(Ljava/lang/Runnable;)V+12
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.postSyncProcessChanges()V+9
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.stopUpdateJobs()V+48
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.setActiveTestRunSession(Lorg/eclipse/jdt/internal/junit/model/TestRunSession;)Lorg/eclipse/jdt/internal/junit/model/TestRunSession;+267
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart.access$2(Lorg/eclipse/jdt/internal/junit/ui/TestRunnerViewPart;Lorg/eclipse/jdt/internal/junit/model/TestRunSession;)Lorg/eclipse/jdt/internal/junit/model/TestRunSession;+2
j  org.eclipse.jdt.internal.junit.ui.TestRunnerViewPart$3.run()V+97
j  org.eclipse.swt.widgets.RunnableLock.run()V+11
j  org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Z)Z+29
j  org.eclipse.swt.widgets.Display.runAsyncMessages(Z)Z+5
j  org.eclipse.swt.widgets.Display.readAndDispatch()Z+91
j  org.eclipse.ui.internal.Workbench.runEventLoop(Lorg/eclipse/jface/window/Window$IExceptionHandler;Lorg/eclipse/swt/widgets/Display;)V+9
j  org.eclipse.ui.internal.Workbench.runUI()I+555
j  org.eclipse.ui.internal.Workbench.access$4(Lorg/eclipse/ui/internal/Workbench;)I+1
j  org.eclipse.ui.internal.Workbench$7.run()V+55
j  org.eclipse.core.databinding.observable.Realm.runWithDefault(Lorg/eclipse/core/databinding/observable/Realm;Ljava/lang/Runnable;)V+12
j  org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Lorg/eclipse/swt/widgets/Display;Lorg/eclipse/ui/application/WorkbenchAdvisor;)I+18
j  org.eclipse.ui.PlatformUI.createAndRunWorkbench(Lorg/eclipse/swt/widgets/Display;Lorg/eclipse/ui/application/WorkbenchAdvisor;)I+2
j  org.eclipse.ui.internal.ide.application.IDEApplication.start(Lorg/eclipse/equinox/app/IApplicationContext;)Ljava/lang/Object;+99
j  org.eclipse.equinox.internal.app.EclipseAppHandle.run(Ljava/lang/Object;)Ljava/lang/Object;+135
j  org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Ljava/lang/Object;)Ljava/lang/Object;+103
j  org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Ljava/lang/Object;)Ljava/lang/Object;+29
j  org.eclipse.core.runtime.adaptor.EclipseStarter.run(Ljava/lang/Object;)Ljava/lang/Object;+149
j  org.eclipse.core.runtime.adaptor.EclipseStarter.run([Ljava/lang/String;Ljava/lang/Runnable;)Ljava/lang/Object;+183
v  ~StubRoutines::call_stub
j  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+0
j  sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+87
j  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+57
j  org.eclipse.equinox.launcher.Main.invokeFramework([Ljava/lang/String;[Ljava/net/URL;)V+211
j  org.eclipse.equinox.launcher.Main.basicRun([Ljava/lang/String;)V+126
j  org.eclipse.equinox.launcher.Main.run([Ljava/lang/String;)I+4
j  org.eclipse.equinox.launcher.Main.main([Ljava/lang/String;)V+10
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )

  eden space 93952K, 32% used [0x00000000f8000000,0x00000000f9dacdb8,0x00000000fdbc0000)
  from space 17792K, 99% used [0x00000000fdbc0000,0x00000000fed18610,0x00000000fed20000)
  to   space 19328K, 0% used [0x00000000fed20000,0x00000000fed20000,0x0000000000000000)
 ParOldGen       total 104192K, used 74689K [0x00000000e8000000, 0x00000000ee5c0000, 0x00000000f8000000)
  object space 104192K, 71% used [0x00000000e8000000,0x00000000ec8f0460,0x00000000ee5c0000)
 PSPermGen       total 102848K, used 62194K [0x00000000d8000000, 0x00000000de470000, 0x00000000e8000000)
  object space 102848K, 60% used [0x00000000d8000000,0x00000000dbcbc880,0x00000000de470000)
Event: 101.873 GC heap after
Heap after GC invocations=23 (full 3):
 PSYoungGen      total 104832K, used 2144K [0x00000000f8000000, 0x0000000000000000, 0x0000000000000000)
  eden space 85504K, 0% used [0x00000000f8000000,0x00000000f8000000,0x00000000fd380000)
  from space 19328K, 11% used [0x00000000fed20000,0x00000000fef38000,0x0000000000000000)
  to   space 22784K, 0% used [0x00000000fd380000,0x00000000fd380000,0x00000000fe9c0000)
 ParOldGen       total 104192K, used 79317K [0x00000000e8000000, 0x00000000ee5c0000, 0x00000000f8000000)
  object space 104192K, 76% used [0x00000000e8000000,0x00000000ecd75428,0x00000000ee5c0000)
 PSPermGen       total 102848K, used 62194K [0x00000000d8000000, 0x00000000de470000, 0x00000000e8000000)
  object space 102848K, 60% used [0x00000000d8000000,0x00000000dbcbc880,0x00000000de470000)
}
Event: 101.873 GC heap before
{Heap before GC invocations=24 (full 4):
 PSYoungGen      total 104832K, used 2144K [0x00000000f8000000, 0x0000000000000000, 0x0000000000000000)
  eden space 85504K, 0% used [0x00000000f8000000,0x00000000f8000000,0x00000000fd380000)
  from space 19328K, 11% used [0x00000000fed20000,0x00000000fef38000,0x0000000000000000)
  to   space 22784K, 0% used [0x00000000fd380000,0x00000000fd380000,0x00000000fe9c0000)
 ParOldGen       total 104192K, used 79317K [0x00000000e8000000, 0x00000000ee5c0000, 0x00000000f8000000)
  object space 104192K, 76% used [0x00000000e8000000,0x00000000ecd75428,0x00000000ee5c0000)
 PSPermGen       total 102848K, used 62194K [0x00000000d8000000, 0x00000000de470000, 0x00000000e8000000)
  object space 102848K, 60% used [0x00000000d8000000,0x00000000dbcbc880,0x00000000de470000)
Event: 102.121 GC heap after
Heap after GC invocations=24 (full 4):
 PSYoungGen      total 104832K, used 0K [0x00000000f8000000, 0x0000000000000000, 0x0000000000000000)
  eden space 85504K, 0% used [0x00000000f8000000,0x00000000f8000000,0x00000000fd380000)
  from space 19328K, 0% used [0x00000000fed20000,0x00000000fed20000,0x0000000000000000)
  to   space 22784K, 0% used [0x00000000fd380000,0x00000000fd380000,0x00000000fe9c0000)
 ParOldGen       total 104192K, used 33208K [0x00000000e8000000, 0x00000000ee5c0000, 0x00000000f8000000)
  object space 104192K, 31% used [0x00000000e8000000,0x00000000ea06e088,0x00000000ee5c0000)
 PSPermGen       total 104576K, used 62193K [0x00000000d8000000, 0x00000000de620000, 0x00000000e8000000)
  object space 104576K, 59% used [0x00000000d8000000,0x00000000dbcbc6d8,0x00000000de620000)
}

Deoptimization events (10 events):
Event: 104.278 Thread 0x000000000b1cb000 Uncommon trap -58 fr.pc 0x00000000029d2f34
Event: 104.839 Thread 0x000000000b1cb000 Uncommon trap -58 fr.pc 0x00000000029f3710
Event: 104.839 Thread 0x000000000b1cb000 Uncommon trap -58 fr.pc 0x00000000029f37b4
Event: 105.275 Thread 0x000000000b1cb000 Uncommon trap -58 fr.pc 0x00000000029f3710
Event: 105.854 Thread 0x00000000022cd000 Uncommon trap -12 fr.pc 0x000000000293e8b8
Event: 106.024 Thread 0x000000000b1cb000 Uncommon trap -34 fr.pc 0x0000000002a2d250
Event: 107.073 Thread 0x00000000022cd000 Uncommon trap -83 fr.pc 0x000000000284ca68
Event: 107.995 Thread 0x000000000a9af800 Uncommon trap -83 fr.pc 0x000000000284e678
Event: 107.998 Thread 0x000000000a9af800 Uncommon trap -83 fr.pc 0x000000000284d9cc
Event: 108.068 Thread 0x000000000b1cb000 Uncommon trap -34 fr.pc 0x0000000002a2d250

Internal exceptions (10 events):
Event: 105.835 Thread 0x00000000022cd000 Threw 0x00000000fafce5f0 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jni.cpp:715
Event: 105.906 Thread 0x00000000022cd000 Threw 0x00000000fb15df98 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jni.cpp:715
Event: 106.992 Thread 0x00000000022cd000 Threw 0x00000000fb2e1cd0 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jni.cpp:715
Event: 107.237 Thread 0x00000000022cd000 Threw 0x00000000fba5efd8 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jni.cpp:715

Events (10 events):
Event: 108.520 Executing VM operation: RevokeBias
Event: 108.520 Executing VM operation: RevokeBias done
Event: 108.521 Executing VM operation: RevokeBias
Event: 108.521 Executing VM operation: RevokeBias done
Event: 108.697 Executing VM operation: RevokeBias
Event: 108.697 Executing VM operation: RevokeBias done
Event: 108.727 Executing VM operation: RevokeBias
Event: 108.728 Executing VM operation: RevokeBias done
Event: 108.728 Executing VM operation: RevokeBias
Event: 108.728 Executing VM operation: RevokeBias done

Dynamic libraries:
0x000000003fea0000 - 0x000000003fed4000     C:\Windows\system32\javaw.exe
0x0000000077b60000 - 0x0000000077d0c000     C:\Windows\SYSTEM32\ntdll.dll
0x0000000077940000 - 0x0000000077a5f000     C:\Windows\system32\kernel32.dll
0x00000000fd610000 - 0x00000000fd67c000     C:\Windows\system32\KERNELBASE.dll
0x00000000fd870000 - 0x00000000fd94b000     C:\Windows\system32\ADVAPI32.dll
0x00000000ff100000 - 0x00000000ff19f000     C:\Windows\system32\msvcrt.dll
0x00000000ff1a0000 - 0x00000000ff1bf000     C:\Windows\SYSTEM32\sechost.dll
0x00000000ff210000 - 0x00000000ff33e000     C:\Windows\system32\RPCRT4.dll
0x0000000077a60000 - 0x0000000077b5a000     C:\Windows\system32\USER32.dll
0x00000000fe020000 - 0x00000000fe087000     C:\Windows\system32\GDI32.dll
0x00000000fdd00000 - 0x00000000fdd0e000     C:\Windows\system32\LPK.dll
0x00000000ff030000 - 0x00000000ff0fa000     C:\Windows\system32\USP10.dll
0x00000000fb990000 - 0x00000000fbb84000     C:\Windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7600.16661_none_fa62ad231704eab7\COMCTL32.dll
0x00000000fdd10000 - 0x00000000fdd81000     C:\Windows\system32\SHLWAPI.dll
0x00000000fd950000 - 0x00000000fd97e000     C:\Windows\system32\IMM32.DLL
0x00000000fdf10000 - 0x00000000fe019000     C:\Windows\system32\MSCTF.dll
0x000000006ad60000 - 0x000000006ae31000     C:\Program Files\Java\jre7\bin\msvcr100.dll
0x000000006a640000 - 0x000000006ad5a000     C:\Program Files\Java\jre7\bin\server\jvm.dll
0x00000000fc960000 - 0x00000000fc969000     C:\Windows\system32\WSOCK32.dll
0x00000000ff1c0000 - 0x00000000ff20d000     C:\Windows\system32\WS2_32.dll
0x00000000fdc50000 - 0x00000000fdc58000     C:\Windows\system32\NSI.dll
0x00000000fbd20000 - 0x00000000fbd5b000     C:\Windows\system32\WINMM.dll
0x0000000077d30000 - 0x0000000077d37000     C:\Windows\system32\PSAPI.DLL
0x0000000073d40000 - 0x0000000073d4f000     C:\Program Files\Java\jre7\bin\verify.dll
0x000000006bf30000 - 0x000000006bf58000     C:\Program Files\Java\jre7\bin\java.dll
0x000000006c470000 - 0x000000006c485000     C:\Program Files\Java\jre7\bin\zip.dll
0x00000000fcd30000 - 0x00000000fcd47000     C:\Windows\system32\CRYPTSP.dll
0x00000000fc910000 - 0x00000000fc957000     C:\Windows\system32\rsaenh.dll
0x00000000fc970000 - 0x00000000fc98e000     C:\Windows\system32\USERENV.dll
0x00000000fd4a0000 - 0x00000000fd4af000     C:\Windows\system32\profapi.dll
0x00000000fd3d0000 - 0x00000000fd3df000     C:\Windows\system32\CRYPTBASE.dll
0x000000006bf70000 - 0x000000006bf89000     C:\Program Files\Java\jre7\bin\net.dll
0x00000000fccd0000 - 0x00000000fcd24000     C:\Windows\system32\mswsock.dll
0x00000000fccc0000 - 0x00000000fccc7000     C:\Windows\System32\wship6.dll
0x00000000faf60000 - 0x00000000faf75000     C:\Windows\system32\NLAapi.dll
0x00000000fcb50000 - 0x00000000fcbab000     C:\Windows\system32\DNSAPI.dll
0x00000000f9080000 - 0x00000000f908b000     C:\Windows\System32\winrnr.dll
0x00000000f9060000 - 0x00000000f9075000     C:\Windows\system32\napinsp.dll
0x00000000f9040000 - 0x00000000f9059000     C:\Windows\system32\pnrpnsp.dll
0x00000000f8fd0000 - 0x00000000f8fe0000     C:\Windows\system32\wshbth.dll
0x00000000723a0000 - 0x00000000723ce000     C:\Program Files\Common Files\Microsoft Shared\Windows Live\WLIDNSP.DLL
0x00000000fc510000 - 0x00000000fc517000     C:\Windows\System32\wshtcpip.dll
0x00000000fa7f0000 - 0x00000000fa817000     C:\Windows\system32\IPHLPAPI.DLL
0x00000000fa7e0000 - 0x00000000fa7eb000     C:\Windows\system32\WINNSI.DLL
0x00000000f87b0000 - 0x00000000f87b8000     C:\Windows\system32\rasadhlp.dll
0x00000000fa620000 - 0x00000000fa673000     C:\Windows\System32\fwpuclnt.dll
0x000000006bf10000 - 0x000000006bf21000     C:\Program Files\Java\jre7\bin\nio.dll
0x0000000072000000 - 0x0000000072012000     C:\Users\ASHISH\Downloads\Technology\eclipse\plugins\org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.2.R36x_v20101222\eclipse_1312.dll
0x00000000fc440000 - 0x00000000fc44c000     C:\Windows\system32\VERSION.dll
0x00000000fbcc0000 - 0x00000000fbd16000     C:\Windows\system32\uxtheme.dll
0x0000000010000000 - 0x0000000010065000     C:\Program Files\WIDCOMM\Bluetooth Software\btmmhook.dll
0x00000000fe090000 - 0x00000000fee17000     C:\Windows\system32\SHELL32.dll
0x00000000fee20000 - 0x00000000ff022000     C:\Windows\system32\ole32.dll
0x00000000fde30000 - 0x00000000fdf07000     C:\Windows\system32\OLEAUT32.dll
0x00000000fdb60000 - 0x00000000fdbf9000     C:\Windows\system32\CLBCatQ.DLL
0x0000000007780000 - 0x000000000781b000     C:\Users\ASHISH\Downloads\Technology\eclipse\configuration\org.eclipse.osgi\bundles\204\1\.cp\swt-win32-3659.dll
0x00000000fdc60000 - 0x00000000fdcf8000     C:\Windows\system32\comdlg32.dll
0x0000000077480000 - 0x00000000775da000     C:\Windows\system32\WININET.dll
0x0000000077d20000 - 0x0000000077d23000     C:\Windows\system32\Normaliz.dll
0x00000000775e0000 - 0x00000000777ef000     C:\Windows\system32\iertutil.dll
0x00000000777f0000 - 0x000000007793d000     C:\Windows\system32\urlmon.dll
0x00000000fb3c0000 - 0x00000000fb3d8000     C:\Windows\system32\dwmapi.dll
0x00000000056e0000 - 0x00000000056fe000     C:\Users\ASHISH\Downloads\Technology\eclipse\configuration\org.eclipse.osgi\bundles\204\1\.cp\swt-gdip-win32-3659.dll
0x00000000fb640000 - 0x00000000fb856000     C:\Windows\WinSxS\amd64_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.7600.17007_none_2b47185a719d6182\gdiplus.dll
0x00000000fb050000 - 0x00000000fb17a000     C:\Windows\system32\WindowsCodecs.dll
0x0000000008800000 - 0x0000000008831000     C:\Program Files\WIDCOMM\Bluetooth Software\btkeyind.dll
0x00000000fb860000 - 0x00000000fb98c000     C:\Windows\system32\propsys.dll
0x00000000f6de0000 - 0x00000000f6faa000     C:\Windows\system32\explorerframe.dll
0x00000000fbb90000 - 0x00000000fbbd3000     C:\Windows\system32\DUser.dll
0x00000000fb540000 - 0x00000000fb632000     C:\Windows\system32\DUI70.dll
0x00000000f3b50000 - 0x00000000f3ba4000     C:\Windows\system32\oleacc.dll
0x00000000fd480000 - 0x00000000fd494000     C:\Windows\system32\RpcRtRemote.dll
0x00000000f61b0000 - 0x00000000f61c1000     C:\Users\ASHISH\Downloads\Technology\eclipse\configuration\org.eclipse.osgi\bundles\42\1\.cp\jWinHttp-1.0.0.dll
0x00000000f8f60000 - 0x00000000f8fcf000     C:\Windows\system32\WINHTTP.dll
0x00000000f8ef0000 - 0x00000000f8f54000     C:\Windows\system32\webio.dll
0x00000000fa5f0000 - 0x00000000fa601000     C:\Windows\system32\dhcpcsvc6.DLL
0x00000000fa5d0000 - 0x00000000fa5e8000     C:\Windows\system32\dhcpcsvc.DLL
0x000000006bee0000 - 0x000000006bf04000     C:\Program Files\Java\jre7\bin\sunec.dll
0x00000000f8450000 - 0x00000000f8457000     C:\Windows\system32\msimg32.dll
0x00000000f3bb0000 - 0x00000000f4618000     C:\Windows\System32\ieframe.dll
0x00000000fd3e0000 - 0x00000000fd472000     C:\Windows\system32\SXS.DLL
0x00000000fd370000 - 0x00000000fd3c7000     C:\Windows\system32\apphelp.dll
0x0000000060040000 - 0x000000006113c000     C:\Windows\System32\mshtml.dll
0x00000000fd0b0000 - 0x00000000fd0bb000     C:\Windows\System32\Secur32.dll
0x00000000fd330000 - 0x00000000fd355000     C:\Windows\system32\SSPICLI.DLL
0x00000000fbc40000 - 0x00000000fbc6d000     C:\Windows\system32\ntmarta.dll
0x00000000fdc00000 - 0x00000000fdc50000     C:\Windows\system32\WLDAP32.dll
0x00000000fb480000 - 0x00000000fb48e000     C:\Windows\system32\msimtf.dll
0x00000000f5b80000 - 0x00000000f5bba000     C:\Windows\system32\msls31.dll
0x00000000fd980000 - 0x00000000fdb57000     C:\Windows\system32\setupapi.dll
0x00000000fd830000 - 0x00000000fd866000     C:\Windows\system32\CFGMGR32.dll
0x00000000fd550000 - 0x00000000fd56a000     C:\Windows\system32\DEVOBJ.dll
0x00000000ec8c0000 - 0x00000000ec9a2000     C:\Windows\system32\d2d1.dll
0x00000000eab40000 - 0x00000000eacbd000     C:\Windows\system32\DWrite.dll
0x00000000f70e0000 - 0x00000000f7187000     C:\Windows\system32\dxgi.dll
0x00000000fd680000 - 0x00000000fd6ba000     C:\Windows\system32\WINTRUST.dll
0x00000000fd6c0000 - 0x00000000fd826000     C:\Windows\system32\CRYPT32.dll
0x00000000fd540000 - 0x00000000fd54f000     C:\Windows\system32\MSASN1.dll
0x00000000f72d0000 - 0x00000000f7304000     C:\Windows\system32\d3d10_1.dll
0x00000000f7190000 - 0x00000000f71e5000     C:\Windows\system32\d3d10_1core.dll
0x00000000f4d60000 - 0x00000000f4d9b000     C:\Windows\system32\MLANG.dll
0x00000000fad50000 - 0x00000000fadb2000     C:\Windows\system32\RASAPI32.dll
0x00000000fabe0000 - 0x00000000fabfc000     C:\Windows\system32\rasman.dll
0x00000000fabc0000 - 0x00000000fabd1000     C:\Windows\system32\rtutils.dll
0x00000000ea830000 - 0x00000000ea96d000     C:\Windows\system32\d3d10.dll
0x00000000f3ae0000 - 0x00000000f3b2b000     C:\Windows\system32\d3d10core.dll
0x00000000f89d0000 - 0x00000000f89d9000     C:\Windows\system32\sensapi.dll
0x00000000ea070000 - 0x00000000ea2a8000     C:\Windows\System32\jscript9.dll
0x000000006b810000 - 0x000000006b8db000     C:\Windows\System32\jscript.dll
0x000000006b7c0000 - 0x000000006b80a000     C:\Windows\System32\Dxtrans.dll
0x00000000faef0000 - 0x00000000faf09000     C:\Windows\System32\ATL.DLL
0x00000000f6270000 - 0x00000000f627e000     C:\Windows\system32\ddrawex.dll
0x00000000ec7c0000 - 0x00000000ec8b1000     C:\Windows\system32\DDRAW.dll
0x00000000f6230000 - 0x00000000f6238000     C:\Windows\system32\DCIMAN32.dll
0x000000006a5c0000 - 0x000000006a632000     C:\Windows\System32\Dxtmsft.dll
0x000000000ff70000 - 0x000000000fffc000     C:\Program Files\WIDCOMM\Bluetooth Software\btncopy.dll
0x00000000f7ea0000 - 0x00000000f7f20000     C:\Windows\system32\ntshrui.dll
0x00000000fcff0000 - 0x00000000fd013000     C:\Windows\system32\srvcli.dll
0x00000000f8370000 - 0x00000000f837f000     C:\Windows\system32\cscapi.dll
0x00000000faec0000 - 0x00000000faecb000     C:\Windows\system32\slc.dll
0x0000000071c10000 - 0x0000000071c20000     C:\Program Files\TortoiseSVN\bin\TortoiseStub.dll
0x0000000071b40000 - 0x0000000071bbb000     C:\Program Files\TortoiseSVN\bin\TortoiseSVN.dll
0x00000000f7ad0000 - 0x00000000f7e9c000     C:\Program Files\TortoiseSVN\bin\libsvn_tsvn.dll
0x00000000719b0000 - 0x00000000719db000     C:\Program Files\TortoiseSVN\bin\libapr_tsvn.dll
0x0000000071780000 - 0x00000000717c1000     C:\Program Files\TortoiseSVN\bin\libaprutil_tsvn.dll
0x00000000f7ac0000 - 0x00000000f7ad0000     C:\Program Files\TortoiseSVN\bin\intl3_tsvn.dll
0x00000000f7aa0000 - 0x00000000f7aba000     C:\Program Files\TortoiseSVN\bin\libsasl.dll
0x00000000716e0000 - 0x0000000071778000     C:\Windows\system32\MSVCP100.dll

VM Arguments:
jvm_args: -Dosgi.requiredJavaVersion=1.5 -Xms40m -Xmx384m -XX:MaxPermSize=256m 
java_command: C:\Users\ASHISH\Downloads\Technology\eclipse\\plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar -os win32 -ws win32 -arch x86_64 -showsplash -launcher C:\Users\ASHISH\Downloads\Technology\eclipse\eclipse.exe -name Eclipse --launcher.library C:\Users\ASHISH\Downloads\Technology\eclipse\\plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.2.R36x_v20101222\eclipse_1312.dll -startup C:\Users\ASHISH\Downloads\Technology\eclipse\\plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar -exitdata 112c_58 -product org.eclipse.epp.package.java.product -vm C:\Windows\system32\javaw.exe -vmargs -Dosgi.requiredJavaVersion=1.5 -Xms40m -Xmx384m -XX:MaxPermSize=256m -jar C:\Users\ASHISH\Downloads\Technology\eclipse\\plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.7.0
PATH=C:\Program Files (x86)\RSA SecurID Token Common;ommonProgramFiles\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Broadcom\Broadcom 802.11\Driver;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\Hewlett-Packard\HP SimplePass Identity Protection\x64;C:\Program Files (x86)\Hewlett-Packard\HP SimplePass Identity Protection\;C:\Users\ASHISH\Downloads\software\apache-ant-1.8.2\bin;C:\Users\ASHISH\Downloads\Technology\open-source\apache-maven-3.0.4\bin;C:\Program Files\Java\jdk1.7.0\bin;C:\Program Files\TortoiseSVN\bin;C:\Users\ASHISH\Downloads\Technology\installations\gradle-1.0-rc-3/bin;
USERNAME=ASHISH
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 37 Stepping 5, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 7 , 64 bit Build 7600 

CPU:total 4 (2 cores per cpu, 2 threads per core) family 6 model 37 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht, tsc, tscinvbit

Memory: 4k page, physical 3987312k(1328476k free), swap 7972720k(4857692k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (23.1-b03) for windows-amd64 JRE (1.7.0_05-b05), built on May 15 2012 18:09:30 by "java_re" with unknown MS VC++:1600

time: Sun Jul 01 19:30:56 2012
elapsed time: 108 seconds 
```

请让我知道是否有人遇到类似的问题及其解决方案

# twitter - 服务器未从 twitter 检索 GET 状态/user_timeline 信息

> ID：11282206
> 
> 赞同：0
> 
> 时间：2012-07-01T13:05:06.477
> 
> 标签：twitter, feed, timeline

我正在尝试创建一个简单的小部件来检索用户提要，我已将我的应用程序完全设置为使用 @anywhere 以及 Twitter API 的 OAuth 功能。

我遇到的问题是当我尝试检索用户的推文并将它们再次写入文本文件时。我这样做的代码如下

```
 <?php

    $cache = dirname(__FILE__) . '/../cache/twitter-json.txt';
    $data = file_get_contents('http://api.twitter.com/1/statuses/user_timeline/screen_name.json?count=3&include_rts=true&include_entities=true'); 

    $cachefile = fopen($cache, 'wb');
        fwrite($cachefile,utf8_encode($data));
        fclose($cachefile);
?> 
```

好的，现在当我在本地运行应用程序时，这段代码运行良好，但由于某种原因，当我将它部署到服务器时它不起作用。它在服务器上创建缓存文件以及我添加的任何测试数据，以检查文件写入过程是否有效。

我没有自己设置服务器它由外部公司运行我只是使用 ftp 命令来部署 Web 应用程序

任何帮助和想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:35:06.143

与您的主机核实 - 出于安全原因，他们几乎肯定不允许使用 file_get_contents。

你的选择是

1.  要求他们通过将 php.ini 编辑为 allow_url_fopen 来启用它
2.  使用 cURL 拨打电话

这是在 php 中使用 curl 的基本示例

```
$url = "http://api.twitter.com/1/statuses/user_timeline/screen_name.json?count=3&include_rts=true&include_entities=true"
$curl_handle=curl_init();
curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);
curl_setopt($curl_handle,CURLOPT_URL,$url);
$data = curl_exec($curl_handle);
curl_close($curl_handle); 
```

# sql - Sql命令如何切换一张表中的记录？

> ID：11282207
> 
> 赞同：0
> 
> 时间：2012-07-01T13:05:07.077
> 
> 标签：sql, sqlite

我对数据库开发人员有这样的问题。我有一个有两列的表，第一列是 ID，第二列是 Year(2002,2003,2004...它是字符串)。我想通过切换记录来更新它们。一开始是这样的。

```
ID    Year
1     2002
2     2003
3     2004 
```

我想把它们换成这样。

```
ID    Year
1     2003
2     2002
3     2004 
```

请注意我的年份专栏是独一无二的。所以我尝试了这样的事情，但对我没有用。

```
SqlCeCommand sss = new SqlCeCommand("Update Year Set Year='" + Year1 + "' Where Year='" + Year2 + "'", MainWindow._Conn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:10:34.080

考虑设置`id`为小于或等于的年数：

```
update   YourTable
set      id = 
         (
         select  count(*)
         from    YourTable yt2
         where   yt2.Year <= YourTable.year
         ) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!7/10848/3/1)

# python - 如何使用python获取保存在文件中的cookie？

> ID：11282214
> 
> 赞同：0
> 
> 时间：2012-07-01T13:07:12.373
> 
> 标签：python

我有两种方法

```
 def save_cookie(): 
      cookie = cookielib.MozillaCookieJar('cookie.txt') 
      opener = urllib2.build_opener(HTTPCookieProcessor(cookie)) 
      req = urllib2.Request(url=targeturl,headers=targetheaders) 
      opener.open(req) 
      cookie.save(ignore_discard=True,ignore_expires=True) 

  def get_cookie(): 
      cookie = cookielib.MozillaCookieJar() 
      print cookie.load(filename='cookie.txt').name 
```

第一种方法是从响应中将 cookie 保存在文件中。我想使用第二种方法从文件中获取 cookie，但是**cookie.load(filename='cookie.txt')**的类型是 None 所以...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:40:47.337

调用后`cookie.load()`，遍历`cookie`对象依次获取每个cookie：

```
for acookie in cookie:
    print acookie.name, acookie.value 
```

对评论 #1 的回应：

> cookie 的类型是 None！所以它什么也不打印。看起来文件没有加载成功。

`cookie.load()`不返回任何值。它要么成功，要么抛出异常。因此，您不能以原始程序尝试使用它的方式使用它，如下所示：

```
 print cookie.load(filename='cookie.txt').name 
```

将该行更改为：

```
 cookie.load(filename='cookie.txt') 
```

然后做：

```
 for acookie in cookie:
        print acookie 
```

如果仍然没有显示任何 cookie，请查看**cookie.txt**文件的内容。如果它不包含任何 cookie 数据，则问题出在尝试收集 cookie 的程序部分，而不是尝试显示它们的部分。（您确定来自该 URL 的响应包含 cookie 吗？）

如果**cookie.txt**`get_cookie()`文件确实包含 cookie，那么请更新您的问题以显示该文件的内容和您的函数 的最新来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T08:17:03.800

打印 cookie.load(filename='cookie.txt')

function--load() 的值为 none。我认为你应该这样做：

cookie.load('cookie.txt')

打印 cookie.name

# javascript - 是否可以在 JavaScript 中使用 @"text" 将多行字符串分配给 C# 中的变量？

> ID：11282217
> 
> 赞同：0
> 
> 时间：2012-07-01T13:07:50.470
> 
> 标签：javascript, text, multiline

> **可能重复：**
> [如何创建多行字符串](https://stackoverflow.com/questions/805107/how-to-create-multiline-strings)

在 c# 中，我可以这样做：

```
string str = @"asd 
dsa 
blah blah blah"; 
```

我怎样才能在 JavaScript 中做同样的事情？+ 每个字符串都是坏主意...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T13:11:21.170

`\`在每一行的末尾添加一个反斜杠：

```
var string = "Hello\
              world\
              this\
              is\
              a string!"; 
```

# python - Bottle web 框架 - 如何停止？

> ID：11282218
> 
> 赞同：29
> 
> 时间：2012-07-01T13:07:59.950
> 
> 标签：python, bottle

在没有线程或子进程的情况下启动瓶子网络服务器时，没有问题。退出瓶子应用程序 -> `CTRL`+ `c`。

在一个线程中，如何以**编程**方式停止瓶子网络服务器？

我在文档中没有找到`stop()`方法或类似的东西。有原因吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T09:30:48.770

对于默认（WSGIRef）服务器，这就是我所做的（实际上这是 Vikram Pudi 建议的更清洁的方法）：

```
from bottle import Bottle, ServerAdapter

class MyWSGIRefServer(ServerAdapter):
    server = None

    def run(self, handler):
        from wsgiref.simple_server import make_server, WSGIRequestHandler
        if self.quiet:
            class QuietHandler(WSGIRequestHandler):
                def log_request(*args, **kw): pass
            self.options['handler_class'] = QuietHandler
        self.server = make_server(self.host, self.port, handler, **self.options)
        self.server.serve_forever()

    def stop(self):
        # self.server.server_close() <--- alternative but causes bad fd exception
        self.server.shutdown()

app = Bottle()

@app.route('/')
def index():
    return 'Hello world'

@app.route('/stop')  # not working from here, it has to come from another thread
def stopit():
    server.stop()  

server = MyWSGIRefServer(port=80)
try:
    app.run(server=server)
except:
    print('Bye') 
```

当我想从另一个线程停止瓶子应用程序时，我执行以下操作：

```
server.stop() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-15T04:28:21.730

我无法从请求中关闭瓶子服务器，因为瓶子似乎在子进程中运行请求。

我最终发现解决方案是：

```
sys.stderr.close() 
```

在请求内部（被传递到瓶子服务器并取消它）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-03T04:51:32.683

迈克答案的更新版本。

```
from bottlepy.bottle import WSGIRefServer, run
from threading import Thread
import time

class MyServer(WSGIRefServer):
    def run(self, app): # pragma: no cover
        from wsgiref.simple_server import WSGIRequestHandler, WSGIServer
        from wsgiref.simple_server import make_server
        import socket

        class FixedHandler(WSGIRequestHandler):
            def address_string(self): # Prevent reverse DNS lookups please.
                return self.client_address[0]
            def log_request(*args, **kw):
                if not self.quiet:
                    return WSGIRequestHandler.log_request(*args, **kw)

        handler_cls = self.options.get('handler_class', FixedHandler)
        server_cls  = self.options.get('server_class', WSGIServer)

        if ':' in self.host: # Fix wsgiref for IPv6 addresses.
            if getattr(server_cls, 'address_family') == socket.AF_INET:
                class server_cls(server_cls):
                    address_family = socket.AF_INET6

        srv = make_server(self.host, self.port, app, server_cls, handler_cls)
        self.srv = srv ### THIS IS THE ONLY CHANGE TO THE ORIGINAL CLASS METHOD!
        srv.serve_forever()

    def shutdown(self): ### ADD SHUTDOWN METHOD.
        self.srv.shutdown()
        # self.server.server_close()

def begin():
    run(server=server)

server = MyServer(host="localhost", port=8088)
Thread(target=begin).start()
time.sleep(2) # Shut down server after 2 seconds
server.shutdown() 
```

WSGIRefServer 类被完全复制，只添加了 1 行到 run() 方法。还要添加一个简单的 shutdown() 方法。不幸的是，这是必要的，因为瓶子创建 run() 方法的方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T14:56:16.823

您可以通过在调用 start 之前将 daemon 属性设置为 True 来使您的线程成为守护程序。

```
mythread = threading.Thread()
mythread.daemon = True
mythread.start() 
```

每当它运行的主线程被杀死或死亡时，一个守护线程就会停止。唯一的问题是您将无法让线程在退出时运行任何代码，如果线程正在执行某项操作，它将立即停止，而无法完成它正在运行的方法。

Python 中没有办法真正显式地停止线程。如果您想更好地控制停止服务器，您应该从[多](http://docs.python.org/library/multiprocessing.html)进程模块中查看 Python[进程。](http://docs.python.org/library/multiprocessing.html#the-process-class)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T06:49:01.587

由于瓶子不提供机制，因此需要破解。如果您使用默认的 WSGI 服务器，这可能是最干净的一个：

在 Bottle 的代码中，WSGI 服务器以以下方式启动：

```
srv.serve_forever() 
```

如果您已经在自己的线程中启动了瓶子，您可以使用以下方法停止它：

```
srv.shutdown() 
```

要访问代码中的 srv 变量，您需要编辑瓶子源代码并使其成为全局变量。更改瓶子代码后，它看起来像：

```
srv = None #make srv global
class WSGIRefServer(ServerAdapter):
    def run(self, handler): # pragma: no cover
        global srv #make srv global
        ... 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-20T15:07:34.140

这是一个选项：提供自定义服务器（与默认值相同），它记录自己：

```
import bottle

class WSGI(bottle.WSGIRefServer):
    instances = []

    def run(self, *args, **kw):
        self.instances.append(self)
        super(WSGI, self).run(*args, **kw)

# some other thread:
bottle.run(host=ip_address, port=12345, server=WSGI)

# control thread:
logging.warn("servers are %s", WSGI.instances) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-02T00:42:34.743

这个同样笨拙的 hack 的优点是不需要你从 bottle.py 复制粘贴任何代码：

```
# The global server instance.                                                                                             
server = None

def setup_monkey_patch_for_server_shutdown():
    """Setup globals to steal access to the server reference.                                                             
    This is required to initiate shutdown, unfortunately.                                                                 
    (Bottle could easily remedy that.)"""

    # Save the original function.                                                                                         
    from wsgiref.simple_server import make_server

    # Create a decorator that will save the server upon start.                                                            
    def stealing_make_server(*args, **kw):
        global server
        server = make_server(*args, **kw)
        return server

    # Patch up wsgiref itself with the decorated function.                                                                
    import wsgiref.simple_server
    wsgiref.simple_server.make_server = stealing_make_server

setup_monkey_patch_for_server_shutdown()

def shutdown():
    """Request for the server to shutdown."""
    server.shutdown() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-01T13:30:56.963

我想瓶子网络服务器永远运行，直到它终止。没有类似的方法`stop()`。

但是你可以做这样的事情：

```
from bottle import route, run
import threading, time, os, signal, sys, operator

class MyThread(threading.Thread):
    def __init__(self, target, *args):
        threading.Thread.__init__(self, target=target, args=args)
        self.start()

class Watcher:
    def __init__(self):
        self.child = os.fork()
        if self.child == 0:
            return
        else:
            self.watch()

    def watch(self):
        try:
            os.wait()
        except KeyboardInterrupt:
            print 'KeyBoardInterrupt'
            self.kill()
        sys.exit()

    def kill(self):
        try:
            os.kill(self.child, signal.SIGKILL)
        except OSError: pass

def background_process():
    while 1:
        print('background thread running')
        time.sleep(1)

@route('/hello/:name')
def index(name='World'):
    return '<b>Hello %s!</b>' % name

def main():
    Watcher()
    MyThread(background_process)

    run(host='localhost', port=8080)

if __name__ == "__main__":
    main() 
```

然后你可以`Watcher.kill()`在你需要杀死你的服务器时使用。

这是`run()`瓶子的功能代码：

尝试：app = app 或 default_app() if isinstance(app, basestring): app = load_app(app) if not callable(app): raise ValueError("Application is not callable: %r" % app)

```
 for plugin in plugins or []:
        app.install(plugin)

    if server in server_names:
        server = server_names.get(server)
    if isinstance(server, basestring):
        server = load(server)
    if isinstance(server, type):
        server = server(host=host, port=port, **kargs)
    if not isinstance(server, ServerAdapter):
        raise ValueError("Unknown or unsupported server: %r" % server)

    server.quiet = server.quiet or quiet
    if not server.quiet:
        stderr("Bottle server starting up (using %s)...\n" % repr(server))
        stderr("Listening on http://%s:%d/\n" % (server.host, server.port))
        stderr("Hit Ctrl-C to quit.\n\n")

    if reloader:
        lockfile = os.environ.get('BOTTLE_LOCKFILE')
        bgcheck = FileCheckerThread(lockfile, interval)
        with bgcheck:
            server.run(app)
        if bgcheck.status == 'reload':
            sys.exit(3)
    else:
        server.run(app)
except KeyboardInterrupt:
    pass
except (SyntaxError, ImportError):
    if not reloader: raise
    if not getattr(server, 'quiet', False): print_exc()
    sys.exit(3)
finally:
    if not getattr(server, 'quiet', False): stderr('Shutdown...\n') 
```

`run`如您所见，除了一些例外，没有其他方法可以摆脱循环。该`server.run`功能取决于您使用的服务器，但`quit`无论如何都没有通用的方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-05T12:02:03.087

这与[sepero](https://stackoverflow.com/questions/11282218/bottle-web-framework-how-to-stop/19749945#19749945)和[mike](https://stackoverflow.com/questions/11282218/bottle-web-framework-how-to-stop/16056443#16056443)的答案完全相同，但现在使用 Bottle 0.13+ 版本要简单得多：

```
from bottle import W, run, route
from threading import Thread
import time

@route('/')
def index():
    return 'Hello world'

def shutdown():
    time.sleep(5)
    server.srv.shutdown()

server = WSGIRefServer(port=80)
Thread(target=shutdown).start()
run(server=server) 
```

也相关：[https](https://github.com/bottlepy/bottle/issues/1229) ://github.com/bottlepy/bottle/issues/1229和[https://github.com/bottlepy/bottle/issues/1230](https://github.com/bottlepy/bottle/issues/1230)。

* * *

另一个使用路由[http://localhost/stop](http://localhost/stop)进行关闭的示例：

```
from bottle import WSGIRefServer, run, route
from threading import Thread

@route('/')
def index():
    return 'Hello world'

@route('/stop')
def stopit():
    Thread(target=shutdown).start()

def shutdown():
    server.srv.shutdown()

server = WSGIRefServer(port=80)
run(server=server) 
```

PS：它至少需要Bottle 0.13dev。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-27T14:49:29.283

我发现这个解决方案是最简单的，但它确实需要安装“psutil”包才能获得当前进程。它还需要“信号”模块，但这是标准库的一部分。

```
@route('/shutdown')
def shutdown():
    current_process = psutil.Process()
    current_process.send_signal(signal.CTRL_C_EVENT)
    return 'Shutting down the web server' 
```

希望这对某人有用！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-11-23T03:21:43.190

Bottle 服务器的控制台日志告诉我们，官方关闭服务器的方式是“Hit Ctrl-C”：

```
Bottle v0.12.19 server starting up (using WSGIRefServer())...
Listening on http://localhost:8080/
Hit Ctrl-C to quit. 
```

为什么不简单地以**编程**方式遵循它？

点击“Ctrl-C”只不过是向进程发送 SIGINT，我们可以通过内置模块来实现它：

1.  使用 os.getpid() 获取当前 PID。
2.  使用 os.kill() 终止进程。请记住传递 SIGINT，因此它与“Hit Ctrl-C”完全相同。
3.  将“kill”包装在另一个线程中并在几秒钟后启动它，这样客户端就不会出错。

这是服务器代码：

```
from bottle import route, run
import os
import signal
from threading import Thread
import time

@route('/hello')
def return_hello():
    return 'Hello'

@route('/stop')
def handle_stop_request():
    # Handle "stop server" request from client: start a new thread to stop the server
    Thread(target=shutdown_server).start()
    return ''

def shutdown_server():
    time.sleep(2)
    pid = os.getpid()  # Get process ID of the current Python script
    os.kill(pid, signal.SIGINT)
    # Kill the current script process with SIGINT, which does same as "Ctrl-C"

run(host='localhost', port=8080) 
```

这是客户端代码：

```
import requests

def request_service(service_key):
    url = f'http://127.0.0.1:8080/{service_key}'
    response = requests.get(url)
    content = response.content.decode('utf-8')
    print(content)

request_service('hello')
request_service('stop') 
```

请注意，在函数“handle_stop_request”中，我们并没有立即停止服务器，而是启动了一个线程然后返回空字符串。通过这种机制，当客户端请求“http://127.0.0.1:8080/stop”时，可以正常得到响应（空字符串）。之后，服务器将关闭。如果我们在函数“handle_stop_request”中关闭服务器，服务器将在返回客户端之前关闭连接，因此客户端将收到“ConnectionError”。

服务器端输出：

```
Bottle v0.12.19 server starting up (using WSGIRefServer())...
Listening on http://localhost:8080/
Hit Ctrl-C to quit.

127.0.0.1 - - [23/Nov/2021 11:18:08] "GET /hello HTTP/1.1" 200 5
127.0.0.1 - - [23/Nov/2021 11:18:08] "GET /stop HTTP/1.1" 200 0 
```

客户端输出：

```
Hello 
```

该代码在 Python 3.7 和 Bottle 0.12 下进行了测试。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-12-13T16:01:17.530

这个问题在我的谷歌搜索中排名第一，所以我将发布我的答案：

当使用 Bottle() 类启动服务器时，它有一个方法 close() 来停止服务器。从源代码：

> """ 关闭应用程序和所有已安装的插件。"""

例如：

```
class Server:
    def __init__(self, host, port):
        self._host = host
        self._port = port
        self._app = Bottle()
    def stop(self):
        # close ws server
        self._app.close()
    def foo(self):
        # More methods, routes... 
```

调用 stop 方法将停止服务器。

# java - 为什么 String 类是不可变的，即使它有一个名为“hash”的非最终字段

> ID：11282219
> 
> 赞同：22
> 
> 时间：2012-07-01T13:08:08.590
> 
> 标签：java, string, immutability

我正在阅读Joshua Bloch的[Effective Java的第 15 条。](http://books.google.co.in/books/about/Effective_Java.html?id=Ft8t0S4VjmwC&redir_esc=y)在谈到“最小化可变性”的第 15 条中，他提到了使对象不可变的五个规则。其中之一是使所有字段最终。这是规则：

> **使所有字段最终确定**：这以系统强制执行的方式清楚地表达了您的意图。此外，如果对新创建实例的引用在没有同步的情况下从一个线程传递到另一个线程，则必须确保行为正确，如内存模型 [JLS, 17.5; 格茨06 16]。

我知道 String 类是不可变类的一个例子。通过[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String)，我发现它实际上有一个不是 final 的 hash 实例。

```
//Cache the hash code for the string
private int hash; // Default to 0 
```

那么 String 是如何变得不可变的呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-01T13:16:35.613

这句话解释了为什么这不是最终的：

> //缓存字符串的哈希码

这是一个缓存。如果您不调用`hashCode`，则不会设置它的值。它可以在创建字符串期间设置，但这意味着更长的创建时间，对于您可能不需要的功能（哈希码）。另一方面，每次询问时计算哈希值会很浪费，因为字符串是*不可变*的，并且哈希码永远不会改变。

有一个非最终字段的事实确实与您引用的定义有些矛盾，但在这里它不是对象接口的一部分。它只是一个内部实现细节，对字符串的可变性（作为字符容器）没有影响。

编辑 - 由于大众需求，完成我的回答：虽然`hash`不是公共接口的直接部分，但它可能会影响该接口的行为，如`hashCode`返回其值。现在，由于`hashCode`不是同步的`hash`，如果多个线程同时使用该方法，则可能会多次设置。但是，设置为的值`hash`始终是稳定计算的结果，它仅依赖于最终字段（`value`和`offset`）`count`。因此，哈希的每次计算都会产生完全相同的结果。对于外部用户来说，这就像`hash`计算一次一样 - 就像每次都计算出来一样，作为`hashCode`要求它始终如一地为给定值返回相同的结果。底线，即使`hash`不是最终的，它的可变性对外部查看者永远是不可见的，因此可以认为该类是不可变的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-01T13:15:59.823

`String`是不可变的，因为就其用户而言，它永远不能被修改，并且对于所有线程来说总是相同的。

`hashCode()``hashCode()`使用活泼的单检查习语（EJ item 71）计算，它是安全的，因为如果意外计算不止一次，它不会伤害任何人。

使所有字段最终化是使类不可变的最简单和最简单的方法，但它不是严格要求的。只要所有方法都返回相同的东西，无论哪个线程何时调用它，这个类就是不可变的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T13:12:59.023

即使 String 是不可变的，它*也可以*通过反射来改变。如果您将哈希设为最终结果，那么如果发生这种情况，您可能会搞砸事情。哈希字段的不同之处在于它主要用作缓存，一种加快计算速度的方法，`hashCode()`并且应该真正将其视为计算字段，而不是常量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T00:54:26.347

在许多情况下，逻辑上不可变的类对于相同的*可观察状态*有几种不同的表示，并且类的实例能够在它们之间切换可能会有所帮助。从散列字段为零的字符串返回的散列码值将与如果散列字段保存先前的散列码调用的结果将返回的值相同。因此，将哈希值从前者更改为后者不会改变对象的可观察状态，但会导致未来的操作运行得更快。

以这些方式编码的最大困难是

1.  如果一个对象从持有对某个特定不可变对象的引用更改为持有对具有相同语义内容的不同对象的引用，则这种更改不应影响持有该引用的对象的可观察状态，但如果结果是假定相同的对象并不是真正相同的，可能会发生坏事，特别是如果假定假定持有引用的对象可以替代其他语义相同的对象。
2.  即使没有任何对象“相同”的错误，仍然可能存在看起来与进行替换的线程相同的对象可能与其他线程不同的危险。这种情况不太可能发生，但如果确实发生，影响可能会非常糟糕。

尽管如此，替换不可变对象还是有一些优势的。例如，如果一个程序将比较许多包含长字符串的对象，其中许多对象虽然是单独生成的，但彼此相同，则使用 a`WeakDictionary`构建一个不同的字符串实例池可能很有用，并替换任何发现与池中的字符串相同，并引用池副本。这样做会导致许多相同的字符串被映射到同一个字符串，从而极大地加速了它们之间可能进行的任何未来比较。当然，如前所述，对象在逻辑上是不可变的，正确地进行比较是非常重要的。这方面的任何问题都可能将本应进行的优化变成一团糟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T13:11:40.840

创建一个不可变的对象你需要使类最终和它的所有成员最终，这样一旦对象被装箱，就没有人可以修改它的状态。您可以通过将成员设置为非最终但私有并且除了在构造函数中之外不修改它们**来实现相同的功能。**

**编辑：**

注意：当对字符串进行哈希处理时，Java 也会在哈希属性中缓存哈希值，但 **前提是结果不为零。**

# java - 运行时嵌套类的 java.lang.NoClassDefFoundError？（依赖问题？）

> ID：11282221
> 
> 赞同：2
> 
> 时间：2012-07-01T13:08:42.450
> 
> 标签：java, jetty

好的，情况如下：

我有三个文件： 1\. TScan.java 2\. Test.java 3\. ScanServlet.java

我在 TScan.java 文件中编写了我的邮件类 TScan，在该类中，有一个嵌套类（不是子类），称为 TEntry。TScan 有一个用于测试的 main() 和其他使用嵌套 TEntry 类的方法，没有问题。

此外，Test.java 是一个更高级的测试程序，它使用 TScan.java 中的项目，包括没有问题的 TScan 和 TEntry 类。TScan.java 和 Test.java 是在 Eclipse 中开发和测试的（它也可以从命令行编译/运行）。

所以 TScan 正在发挥作用，我想将它包含在 webapp 中。安装了Jetty，写了ScanServlet.java，在Jetty中运行，没有问题。

我开始引用 TScan，它开始为 TScan 给出上述错误。更改 ClassPath 以包含 TScan.class 文件不起作用，所以我制作了一个 JAR 文件并将其粘贴在 WebApp 的 WEB-INF/lib/ 文件夹中，现在 ScanServlet 编译 filen，并且似乎在运行时找到了 TScan -time，但是它在运行时给出 NoClassDefFounfError TScan$TEntry。这对我来说没有意义，因为： 1\. 显然它现在正在寻找 TScan 类（因为它没有在编译或运行时抱怨它） 2\. TScan.java 文件中发生错误（TEntry 不是直接引用，TScan 除外），它在单机模式下运行良好！3.我把TEntry公开了，还是不行。

我发现了很多关于 NoClassDefFoundError 的问题，但没有一个涉及嵌套类，尤其是 Jetty。

请记住，我更习惯于 Delphi，如果它编译，它就会运行。（和 ABAP 或多或少相同）。

如果有人有解决方案，我会很高兴，否则，我正在考虑：

*   将整个 TScan 复制粘贴到 ScanServlet 中（如果它在同一个文件中，找到它应该没有问题！）（不是非常模块化）
*   将 TEntry 移动到单独的 .java 文件中的单独类中？（干净地提取可能会很痛苦）。
*   让 ScanServlet 作为命令行程序调用 TScan.Java。（减缓...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:27:43.857

您是如何创建 jar 文件的，它是否在正确的文件夹中包含 TScan$TEntry.class？
内部或嵌套类仍会生成您需要发布的 .class 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:16:27.243

看起来您是一瘸一拐的，因为您没有使用任何正式的构建工具，这些工具将严格和惯例应用于您的开发。在弄乱什么在哪里以及如何管理你的少数类之前......开始使用一个真正的构建系统，它会生成一个包含你需要的 jar 文件。Maven、Ant、Buildr，等等……应用一些约定或配置的东西。不要利用任何 IDE 为您提供的任何东西来编译或导出应该可以运行的东西……你不能相信任何那个铺位。

通过适当的构建机制和理想的声明性依赖等，您可以以迭代方式解决您的问题以解决 NCDFE。我的 2 美分至少

[编辑] 关于您的具体问题，我怀疑您遇到了 webapp 类加载器配置。默认情况下，/lib 中的类不会暴露给 webapp 上下文。您需要将 webapp 上下文中的 setParentLoaderPriority 设置为 true 或将您的类捆绑为 war 文件。还可以在 cli 上使用 --dry-run 来帮助整理 jetty 正在加载的 jar 文件。

# jquery - 如何从项目选择更改的下拉列表中仅删除一项“--选择年份--”？

> ID：11282224
> 
> 赞同：0
> 
> 时间：2012-07-01T13:08:49.940
> 
> 标签：jquery, asp.net-mvc

我在 mvc 应用程序中绑定了一个下拉菜单，其中“-- select year --”作为第一个元素，在从下拉列表中选择一个项目时，我想从下拉列表中删除“-- select year --”项目。如何做到这一点？

下面的代码从下拉列表中删除所有项目......这里需要进行什么更改，

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#Year').change(function () {
            var yearsSelect = $('#Year');
            debugger;
            yearsSelect.empty();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:10:27.183

```
$('option:first', yearsSelect).remove(); 
```

或者如果您想删除具有空值的值（这是`DropDownListFor`助手用于默认值的值）：

```
$('option[value=""]', yearsSelect).remove(); 
```

# ruby-on-rails-3 - 如何在 FactoryGirl 3.3 中为 has_many 关联设置子参数？

> ID：11282226
> 
> 赞同：0
> 
> 时间：2012-07-01T13:09:15.840
> 
> 标签：ruby-on-rails-3, rspec2, factory-bot

我们的 rails 应用程序中有 user 和 user_level 。用户 has_many user_levels。我们构建 FactoryGirl 数据集如下：

```
 factory :user_level do 
    position             "admin"
    user
  end

  factory :user do 
    login                 'testuser'
    password              "password1"

    #user_levels
    after(:build) do |user|
      user.user_levels << FactoryGirl.build(:user_level, :user => user)
    end
  end 
```

问题是如何将user_level中的位置重新设置为sales？以下没有工作：

```
 ul = FactoryGirl.attributes_for(:user_level, :position => 'admin')
  user = FactoryGirl.create(:user, :login => 'test', :password => 'password', 
                            :user_levels => ul) 
```

错误是“未定义的方法'每个'”。替换`attributes_for`为`build`会产生相同的错误。为工厂重置 user_level 位置的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:16:45.710

有几种方法可以在用户级别重置子参数。

1.  添加带有重置参数的第二个用户级别（或更多），同时保留在 after(:build) 回调中定义的默认用户级别。

FactoryGirl 如下：

```
 factory :user_level do 
    position             "admin"
    user_id               1
  end

  factory :user do 
    login                 'testuser'
    password              "password1"

    #user_levels
    after(:build) do |user|
      user.user_levels << FactoryGirl.build(:user_level, :user => user)
    end
  end

ul = FactoryGirl.build(:user_level, :position => 'sales')
user = FactoryGirl.create(:user, :user_levels => [ul]) 
```

上面创建的用户将有两个职位，一个是默认的'admin'，第二个是'sales'的职位，这是一个重置职位值的职位。

1.  user_level 需要输入到用户创建中。所有 user_level 参数都可用于重置。

FactoryGirl 如下（用户没有回调）：

```
 factory :user_level do 
    position             "admin"
    user_id               1
  end

  factory :user do 
    login                 'testuser'
    password              "password1"
  end

ul = FactoryGirl.build(:user_level, :position => 'sales')
user = FactoryGirl.create(:user, :user_levels => [ul]) 
```

上面创建的用户将只有一个职位“销售”。您可以根据需要在用户创建中自由添加更多用户级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:50:45.457

您的错误与 FactoryGirl 无关，而是与纯导轨有关。您正在将单个模型实例添加到 :has_many 关系中，该关系应由数组提供，因此请尝试：

```
ul = FactoryGirl.attributes_for(:user_level, :position => 'admin')
user = FactoryGirl.create(:user, :login => 'test', :password => 'password', 
                        :user_levels => [ul]) 
```

# iphone - 如何强制 iCloud 与核心数据进行同步？

> ID：11282229
> 
> 赞同：5
> 
> 时间：2012-07-01T13:09:24.993
> 
> 标签：iphone, ios5, icloud

我正在使用带有核心数据的 iCloud 来同步我的应用程序的数据。

我尝试了一切，最后它完美地工作。

但我有一个问题。

有什么方法可以让 iCloud 同步吗？

它在应用程序开始时同步，但在其他时间。好像是随机同步的。我自己找不到处理的方法。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-29T04:49:00.437

我想出了如何强制核心数据存储同步到 iCloud。您只需“触摸” Ubiquity 文件系统中 Data 文件夹中的任何收据文件。下面的代码将执行此操作。要强制同步，请调用 syncCloud 方法。对于它找到的每个“收据”文件，它会将文件修改时间戳更新为当前时间，本质上是对文件进行“触摸”。一旦发生这种情况，iCloud 将检查并同步所有需要在 iCloud 中同步的核心数据文件。据我所知，当您选择“触发 iCloud 同步”选项时，模拟器或 Xcode 就是这样做的。

```
@property (strong, nonatomic) NSMetadataQuery  *query;

-(void) init
{
    self.query = [[NSMetadataQuery alloc] init];

    [[NSNotificationCenter defaultCenter] addObserver: self
                                             selector: @selector(didFinishMetadataQuery)
                                                 name: NSMetadataQueryDidFinishGatheringNotification
                                               object: self.query];
}

-(void) didFinishMetadataQuery
{
    // Query completed so mark it as completed
    [self.query stopQuery];

    // For each receipt, set the modification date to now to force an iCloud sync
    for(NSMetadataItem *item in self.query.results)
    {
        [[NSFileManager defaultManager] setAttributes: @{NSFileModificationDate:[NSDate date]}
                                         ofItemAtPath: [[item valueForAttribute: NSMetadataItemURLKey] path]
                                                error: nil];
    }
}

-(void) syncCloud
{
    // Look for files in the ubiquity container data folders
    [self.query setSearchScopes:@[NSMetadataQueryUbiquitousDataScope]];

    // Look for any files named "receipt*"
    [self.query setPredicate:[NSPredicate predicateWithFormat:@"%K like 'receipt*'", NSMetadataItemFSNameKey]];

    // Start the query on the main thread
    dispatch_async(dispatch_get_main_queue(), ^{
        BOOL startedQuery = [self.query startQuery];
        if (!startedQuery)
        {
            NSLog(@"Failed to start query.\n");
            return;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:11:27.270

您必须使用此方法强制将任何 NSURL 项目缓存在 iCloud 中：

```
- (BOOL)addBackupAttributeToItemAtURL:(NSURL *)URL
{
    NSLog(@"URL: %@", URL);
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: NO]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    return success;
} 
```

您需要在 Documents 或 Library 目录中下载/创建的每个目录和文件上启动此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:46:31.633

我不相信您可以控制使用 iCloud 和核心数据时同步发生的时间。使用 UIDocument 和 iCloud，我使用 startDownloadingUbiquitousItemAtURL 取得了不同程度的成功，但对于核心数据，我认为没有任何等价物——但我很想听到有人告诉我……

# java - 用户输入后JSP页面不会移动另一个页面

> ID：11282231
> 
> 赞同：0
> 
> 时间：2012-07-01T13:09:42.403
> 
> 标签：java, mysql, jsp, jdbc

我试图从一个 JSP 页面移动到另一个，但在用户点击名称和密码后，它只是停留在同一页面。这是完整的代码：

**这里是 index.jsp：我从这个页面开始**

```
<%@ page language="java" contentType="text/html; charset=windows-1255"
    pageEncoding="windows-1255"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<title>Insert title here</title>
</head>
<body>
<form action="LoginServlet" method="POST">
        First Name: <input type="text" name="firstName" size="20"><br>
        Last Name: <input type="text" name="lastName" size="20">
        <br><br>
        <input type="submit" value="Submit">
</form> 

</body>
</html> 
```

**这是 student.jsp ：我想移到这个页面**

```
<%@ page contentType="text/html; charset=utf-8" language="java"%>
<jsp:useBean id="userBean" class="UserBean" scope="session" />
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet"  type="text/css" href="css/style2.css" />
<title>Student Access Details</title>
</head>

<body>
<table>
    <tr>
        <td rowspan="4" class="align_top"><img src="img/photo.jpg" width="120" height="120" /></td>
        <td class="align_top">Student name: </td>
        <td class="bold"><%= userBean.getFirstName() %> <%= userBean.getLastName() %></td>
    </tr>
    <tr>
        <td class="align_top">University ID: </td>
        <td><%= userBean.getUid() %></td>
    </tr>       
    <tr>
        <td class="align_top">Address: </td>
        <td><%= userBean.getAddress1() %><br />
            <%if(userBean.getAddress2() != null)
                {%>
                <%= userBean.getAddress2() %><br /><%}%>            
            <%= userBean.getCity() %><br />
            <%= userBean.getPostCode() %><br />
        </td>
    </tr>
    <tr>
        <td class="align_top">Contact: </td>
        <td>Tel: <%= userBean.getPhone() %><br />
            Email: <%= userBean.getEmail() %>
        </td>
    </tr>            
</table>
</body>
</html> 
```

我正在使用`Tomcat ,JDBC , XAMPP and MySQL`.

当我从浏览器运行这一行时：`http://localhost:8080/MyFirstServlet`

我进入此页面并点击`homer`& `simpson`：![第一页](../Images/bb9a55aa922d8164b98a65bfb3b6e7bf.png)

然后我就呆在同一页上，在这里：

![第二张图片 - 同一页](../Images/8cf3116014891b3a211d49e47de27c59.png)

知道我做错了什么吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:59:00.403

您的 validate(...) 方法将始终为 homer 和 simpson 返回 false ，尝试其他用户名/密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T11:59:47.900

在 HTML 表单中的 HTML 代码操作参数中使用适当的操作，以将表单提交到它应该去的地方

而不是更改动作参数值并尝试

```
<form action="LoginServlet" method="POST"> 
```

用这个

```
<form action="student.jsp" method="POST"> 
```

# objective-c - 在iphone中捕获和检索图像？

> ID：11282235
> 
> 赞同：0
> 
> 时间：2012-07-01T13:10:02.647
> 
> 标签：objective-c, ios, ios5

我是 iOS 5.0 的新手，

我想知道，

有什么方法可以从相机捕获图像并在 iOS 的应用程序中检索它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:12:16.580

看看[相机编程指南](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/TakingPicturesAndMovies.html)。

# powerbuilder - Powerbuilder 12.5 数据库连接初学者教程

> ID：11282239
> 
> 赞同：1
> 
> 时间：2012-07-01T13:10:48.923
> 
> 标签：powerbuilder, sqlconnection

我对 powerbuilder 12.5 相当陌生，我找不到太多关于 SQL 2008 数据库管理的教程。我需要通过 VB.NET vs2008 中的代码连接到它

* * *

Dim con As New SqlConnection Con.connectionstring = "Data Source=servername;Initial Catalog=user;Integrated Security=True"

* * *

我需要选择、插入、更新和删除数据...关于代码示例的任何帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T13:50:16.047

**数据窗口**

大多数使用 PB 的数据库工作都是使用数据窗口完成的。创建新数据窗口后，您可以在其中设置您的选择语句。

然后，将数据窗口控件添加到表单中，并将控件设置为使用您创建的数据窗口（使用属性窗口甚至在代码中）。

然后在您的代码中，您可以通过数据窗口控件检索数据并发出命令，它将自动为您处理插入、更新和删除 sql 语句。

例如：

```
dw_1.retrieve() // dw_1 is the name of the datawindow control 

// insert a row
dw_1.insertrow(0) 

// delete a row
dw_1.deleterow(1)

// update all changed rows
dw_1.update(true, true) 
```

（有关括号中值含义的更多信息，请参阅 PB 帮助）

**数据库连接**

PowerBuilder 有一个可以使用的内置事务对象，称为 sqlca：

```
sqlca.dbms = "SNC SQL Native Client(OLE DB)"
sqlca.servername = "servername"
sqlca.dbparm = "Database='user',Provider='SQLNCLI10',Identity='@@IDENTITY',TrustedConnection=1" 
```

然后连接到这个数据库你做：

```
connect using sqlca; 
```

您可以通过以下方式断开连接：

```
disconnect using sqlca; 
```

# .net - 从集合 htmlagilitypack 中选择子节点

> ID：11282246
> 
> 赞同：1
> 
> 时间：2012-07-01T13:11:54.453
> 
> 标签：.net, html-parsing, html-agility-pack

我有这个 hap 代码，它试图从节点的主集合中选择子节点

```
Dim items As HtmlNodeCollection = doc.DocumentNode.SelectNodes("//channel/item")

 For Each item In items
   link = item.SelectSingleNode("//link")
   title = item.SelectSingleNode("//title")
 next 
```

xml是

```
<rss version="2.0">
<channel>
    <title>title title</title>
<link>http://www.link.com</link>
<description>long decription</description>
<item>
    <title>title title</title>
    <link>http://www.link.com/</link>
    <description> description</description>
    </item>
    <item>
    <title>title title</title>
    <link>http://www.link.com/</link>
    <description> description</description>
    </item>
    <item>
    <title>title title</title>
    <link>http://www.link.com/</link>
    <description> description</description>
    </item>
</channel>
</rss> 
```

但我没有得到每个项目的相应节点标题和项目下的链接。我在哪里弄错了？

我本来可以做的

```
Dim links As HtmlNodeCollection = doc.DocumentNode.SelectNodes("//channel/item/link")
Dim titles As HtmlNodeCollection = doc.DocumentNode.SelectNodes("//channel/item/title") 
```

但我需要每个项目的链接和标题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:10:37.747

在我看来，这就像 HtmlAgilityPack 中的一个错误。我只有检索元素的问题`InnerText`，`link`而不是其他元素。对于那个，文本被发现是它的兄弟，至少不是孩子。

无论如何，这不会是 HtmlAgilityPack 中遇到的第一个错误，所以我们应该忍受它:)。

**选择：**

使用 an`XmlDocument`因为这里不涉及 HTML。那是一个 XML。

```
static void Main(string[] args)
{
    XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.LoadXml(ConsoleApplication3.Properties.Settings.Default.RSS);

    var items = xmlDoc.SelectNodes("//channel/item");
    foreach (var item in items)
    {
        XmlNode node = (XmlNode)item;
        var link = node.SelectSingleNode("//link");
        var title = node.SelectSingleNode("//title");

        if (link != null)
        {
            Console.WriteLine(link.InnerText);
        }
        if (title != null)
        {
            Console.WriteLine(title.InnerText);
        }
    }

    Console.ReadKey();
} 
```

**输出：**

> [http://www.link.com](http://www.link.com)
> 
> 标题标题
> 
> [http://www.link.com](http://www.link.com)
> 
> 标题标题
> 
> [http://www.link.com](http://www.link.com)
> 
> 标题标题

# java - 在 Web 感知和门户 Spring 上下文中为 @Scope 定义的有效值在哪里？

> ID：11282247
> 
> 赞同：8
> 
> 时间：2012-07-01T13:11:54.570
> 
> 标签：java, annotations, scope, spring-3

以下允许在 Spring 3.0 中声明单例 bean：

```
@Bean
@Scope(BeanDefinition.SCOPE_SINGLETON)
private void setBean1(Bean1 b1) {
    this.b1 = b1;
} 
```

但是，`BeanDefinition`没有为请求、会话和全局会话定义范围值。这些在哪里定义？否则，我应该使用和`@Scope("request")`吗？`@Scope("session")``@Scope("global session")`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T13:28:50.307

`BeanDefinition`只有`SCOPE_SINGLETON`和`SCOPE_PROTOTYPE`。

仅适用于 Web 应用程序的其他范围在`org.springframework.web.context.WebApplicationContext`.

可以在[常量字段值](http://static.springsource.org/spring/docs/3.0.x/api/constant-values.html#org.springframework.beans.factory.config.ConfigurableBeanFactory.SCOPE_SINGLETON)的 javadoc 中找到有用的常量列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T13:23:16.213

如果需要，您可以使用字符串文字（尽管全局会话将是“globalSession”）。

或者，您可以使用定义在[`WebApplicationContext`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/WebApplicationContext.html).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-24T05:58:39.993

没有一个地方可以定义所有范围名称，并且并非所有范围名称都有常量：

*   单例 -> ConfigurableBeanFactory#SCOPE_SINGLETON
*   原型 -> ConfigurableBeanFactory#SCOPE_PROTOTYPE
*   请求 -> WebApplicationContext#SCOPE_REQUEST
*   会话-> WebApplicationContext#SCOPE_SESSION
*   应用程序-> WebApplicationContext#SCOPE_APPLICATION
*   websocket -> 未定义（至少我没有找到）

# multithreading - Websphere Server 线程挂起

> ID：11282249
> 
> 赞同：0
> 
> 时间：2012-07-01T13:11:56.700
> 
> 标签：multithreading, websphere, h2, hung

我们有一个应用程序，我们使用 H2 嵌入式数据库来存储数据。我们有一个同步写入方法，它执行数据库插入。由于 H2 DB 是一个小型 Java 嵌入式 DB，我们在 write 方法上使用“同步”来处理嵌入式 DB 中的事务管理，而不是 DB。

但是在重负载期间，我们可以看到写线程被挂起。我们不确定该线程正在挂起哪个资源。

请看这段代码：

```
public synchronized int write(IEvent event)  {
  String methodName = "write";
  Connection conn  = null;
  PreparedStatement updtStmt = null;
  Statement stmt = null;
  ResultSet rSet = null;
  int status = 0;
  try {
    dbConnect.checkDBSizeExceed();
    conn = dbConnect.getConnection();
    updtStmt =  conn.prepareStatement(insertQuery);
    updtStmt.setString(1, (String) event.getAttributeValue());
       ......
    updtStmt.setString(30, (String) event.getAttributeValue());
    updtStmt.setBoolean(31, false);
    status = updtStmt.executeUpdate();
  }catch(SQLException ex){
    logger.log(methodName,logger.print(ex),Logger.ERROR);
  } catch(Exception ex){
    logger.log(methodName,logger.print(ex),Logger.ERROR);
  } finally {
    try {
      if (updtStmt != null)
        updtStmt.close();
      if (conn != null)
        conn.close();
    }catch(SQLException ex) {
      logger.log(methodName,logger.print(ex),Logger.ERROR);
      return status;
    }
    return status;
  }
} 
```

我们有多种写入方法可以访问这个数据库。从代码中我们可以看到代码很简单。但是我们不确定资源被锁定在哪里。

另一个问题是（Websphere）system.out 中的线程转储，我们可以看到线程堆栈跟踪如下。

```
[6/15/12 3:13:38:225 EDT] 00000032 ThreadMonitor W   WSVR0605W: Thread "WebContainer : 3" (00000066) has been active for 632062 milliseconds and may be hung.  There is/are 2 
thread(s) in total in the server that may be hung.
    at com.xxxx.eaws.di.agent.handlers.AuditEmbeddedDBHandler.store(Unknown Source)
    at com.xxxx.eaws.di.agent.eventlogger.2LoggerImpl.logEvent(Unknown Source)
    at com.xxxx.eecs.eventlogger.EventLoggerAdapter.logAuditEvent(EventLoggerAdapter.java:682)
    at com.xxxx.eecs.eventlogger.EventLoggerAdapter.logEvent(EventLoggerAdapter.java:320)
    at com.xxxx.eecs.eventlogger.EventLogger.logEventInternal(EventLogger.java:330)
    at com.xxxx.eecs.eventlogger.EventLogger.logEvent(EventLogger.java:283)
    at com.ibm.wps.auth.impl.ImplicitLoginFilterChainImpl.login(ImplicitLoginFilterChainImpl.java:55)
    at com.ibm.wps.auth.impl.AuthenticationFilterChainHandlerImpl.invokeImplicitLoginFilterChain(AuthenticationFilterChainHandlerImpl.java:393)
    at com.ibm.wps.auth.impl.InitialAuthenticationHandlerImpl.checkAuthentication(InitialAuthenticationHandlerImpl.java:204)
    at com.ibm.wps.state.phases.PhaseManagerImpl.callInitialAuthenticationHandler(PhaseManagerImpl.java:240) 
```

在上面的堆栈跟踪中，我需要知道堆栈跟踪中出现“未知来源”的原因。这些 jar 在类路径中可用，我们在类路径中也有 H2.jar。我们不确定为什么，如果线程在 H2 中挂起，我们无法获取线程堆栈跟踪。

如果不是，我还需要知道为什么线程堆栈跟踪显示“未知来源”。

感谢你的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T10:33:13.273

它看起来像 conn = dbConnect.getConnection(); 正在等待超过 60000 毫秒。

WAS 抛出的错误是因为资源适配器有一个机制轮询周期。它被认为是轮询企业信息系统 (EIS) 事件存储以查找新入站事件的速率（以毫秒为单位）。轮询周期以固定速率建立，这意味着如果轮询周期的执行因任何原因延迟，将立即发生下一个周期以“赶上”。在轮询期间，轮询线程将处于休眠状态。一旦时间计算为 60000 毫秒，WebSphere Application Server 线程监视器就会将此轮询线程视为挂起并抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:13:48.807

你在用ejb吗？你如何获得连接？它是由aop服务器注入的吗？你从 jndi 检索它吗？您不应该同步该方法。即使它是嵌入式数据库，您也应该依赖应用服务器设施。即使您的数据库在内存中，您也需要将连接配置为数据源。如果要在数据库上进行序列化写入，则需要将连接池配置为序列化的 ansi 隔离级别（[有 4 个 ansi 隔离级别](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)）。通过这种方式，您应该在没有同步的托管环境（应用服务器）中获得相同的效果，这应该避免在应用服务器内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T02:57:46.307

未知来源通常意味着行号可用。

编译时，编译器可以添加调试信息，如行号。如果它们不在 JAR 或 .class 文件中，则 JVM 无法为您提供该信息。

高温高压

# php - PHP fopen 无法创建文件

> ID：11282250
> 
> 赞同：2
> 
> 时间：2012-07-01T13:11:58.410
> 
> 标签：php, fopen, permission-denied

我有一个 PHP 语言的函数，可以在请求时创建一个 xml 文件。

```
if(($file= fopen("./include/catalogo.xml", "w"))==false){echo 'non creo il file'; return false;} 
```

无法创建“catalogo.xml”，权限被拒绝。我知道我应该尝试更改权限，但是如果文件不存在怎么办？或者，有没有我忽略的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:19:42.553

我认为您可能忽略了**目录**（./include）的权限。

我假设您正在通过网络服务器和 Linux（例如 Apache）运行这个 PHP - 在这种情况下，尝试创建文件的用户帐户将是“apache”或“www-data”（或无论您的网络服务器在哪个用户下运行）。

在您的服务器上 - 查看 ./include 的权限 - 您需要执行以下两项操作之一：

a) 使 ./include 世界可写（因此“apache”用户现在可以在其中创建一个文件）。

b) 将 ./include 的所有者或组更改为“apache”，以便它可以在其中创建一个文件。

您的 PHP 很好 - 这是它试图在其中创建文件的文件夹的权限，而不是。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-01T13:18:59.170

您必须更改目录“include”的所有权并将其设置为 Web 服务器的用户，并将权限设置为合理的值：

```
$ sudo chow www-data include 
$ sudo chmod 755 include 
```

如果您不知道您的网络服务器由哪个用户运行，您可以在全球范围内打开包含目录权限：

```
$ sudo chmod 1777 include 
```

创建**catalogo.xml**后，您检查**包含**目录：

```
$ sudo ls -al include
-rwxr-xr-x   1 http web     4096 May  5 15:37 catalogo-xml 
```

现在您可以更改目录“include”的所有权并将其设置为 Web 服务器的用户（http）并将权限重置为合理的值：

```
$ sudo chow http include 
$ sudo chmod 755 include 
```

另见 chmod、chown 和 ls 的手册：

```
$ man chmod
$ man chown
$ man ls 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-01T13:21:55.190

如果您使用终端并转到将在其中创建文件的文件夹的父级，该文件夹是包含文件夹的父级，然后输入命令：

```
chmod 777 include 
```

这应该会更改此文件夹的权限，因此您不会再收到权限被拒绝错误。如果你尝试这个命令：

```
chmod -R 777 include 
```

# tfsbuild - TFS 未复制到 _PublishedWebsites\MyWeb\bin

> ID：11282252
> 
> 赞同：1
> 
> 时间：2012-07-01T13:12:08.140
> 
> 标签：tfsbuild

我有一个基于 TFS 的 MVC 解决方案。该解决方案确实在没有错误或警告的情况下构建，但第一个引用的 .dll (Antlr3.Runtime.dll) 没有被复制到 _PublishedWebsites\MySolution.MyWeb\bin 文件夹中。

.dll 出现在 droplocation MySolution_20120629.11 中，但没有放在已发布网站的 bin 目录中。如果我从解决方案中取出 Antlr3.Runtime.dll，那么这个问题就会发生在网站引用的下一个 dll 上（Castle.Core.dll）。如果我将 Antlr3.Runtime.dll 放入解决方案中，则 Castle.Core.dll 会重新出现在 bin 文件夹中。

连接这两个 dll 的最明显的事情是它们是网站引用的第一个 dll。

我不知道如何调试或下一步看哪里。任何有关如何找到问题的提示将不胜感激。

笔记：

*   使用 TFS2012 RC。
*   我看不到日志文件中报告的任何问题。
*   复制本地设置为 true。

# html - 背景渐变+单个背景图片

> ID：11282254
> 
> 赞同：3
> 
> 时间：2012-07-01T13:12:18.110
> 
> 标签：html, css

以下 CSS 未显示背景图像：

```
 background: -webkit-linear-gradient(#fcfcfc,#cbcbcb);
    background-image: url("../images/new/account-dropdown.png") no-repeat 100%; 
```

我将如何正确执行上述操作？

仍然没有收到有效的正确答案......与此同时，我正在使用一个`<img>`绝对位于渐变上方的附加标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:25:52.970

RichardTowers 很接近，但渐变需要在图像之前：

```
 background-image:  -webkit-linear-gradient(top, #444444, #999999), url("../images/new/account-dropdown.png") no-repeat 100%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:58:08.327

尝试赋予 z-index 属性以在另一个背景上显示一个背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:04:58.097

尝试这个：

```
background-image: url("../images/new/account-dropdown.png");
background-size: 100%;
background-origin: content; 
```

# java - 如何以与 JFrame 相同的方式为 Android 编写应用程序

> ID：11282255
> 
> 赞同：0
> 
> 时间：2012-07-01T13:12:23.317
> 
> 标签：java, android, layout

我为 Eclipse 安装了适用于 Android 的 ADT 插件，但我不喜欢它。

我想以我想要的方式使用我自己的网格布局并通过代码设计窗口（与 Java 中的 JFrame 相同，因为我已经知道如何做到这一点）而不是通过单击和拖动。

如何在 Android 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:01:32.100

虽然我不认为用 java 编写 UI 代码是一个好主意，但这里是你的做法。

首先，您需要查看[Android 参考](http://developer.android.com/reference/android/view/View.html)文档中的`android.view.*`和`android.widget.*`包。

Xml 对应于一个`View`（或子类）的所有内容。因此，如果您`LinearLayout`在 Xml 中看到，那么还会有一个[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html) java 组件。

因此，在您的`Activity's` `onCreate()`方法中，通常您只需设置内容资源 xml 视图，您可以实例化一个 Widget 并直接设置它。

```
public void onCreate(Bundle state) {
   TextView tv = new TextView();
   tv.setText("Hellow World);
   setContentView(tv);
} 
```

您可能还需要设置 the `LayoutPararms`，因为大多数小部件需要知道它们是否应该包装内容或填充父级。

许多布局小部件类似于 Swing 容器，即它们接受子级，因此您可以使用另一个视图调用 addChild() 来创建小部件层次结构。

这应该足以让你开始。

作为最后一点，我想重申，虽然您可以用 Java 代码构建完整的 UI，但 Xml 布局确实提供了一些其他好处。例如，Xml 布局允许您支持多种屏幕尺寸或不同的布局（横向与纵向等），这在 Java 中很难做到（但并非不可能）。此外，您可能会想，因为视图是在 Xml 中，所以在设备上创建它们会“很慢”。但是，Android 对 Xml 资源进行了优化，实际上，我认为它们在编译到您的 App 时甚至都不是 Xml。因此，资源 Xml 文件非常高效，直接为视图编写 Java 代码可能不会在性能方面获得太多额外收益。

# jquery - 如何查找元素内部是否有 h1 元素？

> ID：11282258
> 
> 赞同：0
> 
> 时间：2012-07-01T13:12:26.330
> 
> 标签：jquery

我有以下内容：

```
$('#content') 
```

我想要检查它里面是否有一个 h1 元素。如果有，那么我想做以下事情：

```
$('#content').buildTableOfContent(); 
```

有没有办法可以使用 jQuery 进行检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:13:24.233

像这样的东西应该工作：

```
if ($("#content h1").length > 0) {
    $("#content").buildTableOfContent();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:16:03.773

多亏了丰富的 jQuery API，它可以在一行中完成：

```
$('#content:has(h1)').buildTableOfContent(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:29:32.857

如果你不关注 jQuery，这只是

```
if (document.getElementById("content").getElementsByTagName("H1")[0]) {
    ...build TOC...
} 
```

# itk - 当我有一条骨架线和每个像素半径时，如何使用 ITK 扩展到正常容器？

> ID：11282262
> 
> 赞同：0
> 
> 时间：2012-07-01T13:13:30.887
> 
> 标签：itk

我对血管进行了细化手术，现在我正在尝试重建它。

当我有每个像素的骨架线和半径值时，如何将它们扩展到 ITK 中的正常血管？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T10:59:11.103

免责声明：这可能会很慢，但由于没有建议其他答案，所以你去吧。

由于您的问题并未表明这一点，我假设您在谈论 2D 图像，但以下方法也可以扩展到 3D。这就是我的做法：

1.  创建具有零填充像素值的空白图像
2.  创建磁盘/球体[ShapedNeighborhoodIterator](http://www.itk.org/Doxygen/html/classitk_1_1ShapedNeighborhoodIterator.html)的多个实例，每个实例在空白图像上具有不同的半径（从血管宽度直方图中选择最常见的半径）。
3.  访问二进制骨架图像中的每个像素。当您遇到白色（血管骨架）像素时，请回忆该像素处的血管半径。
4.  如果您已经有该半径值的 ShapedNeighborhoodIterator，请将迭代器带到空白图像中的像素位置，并填充以该像素为中心的白色像素圆盘/球体。如果您没有该半径值的 ShapedNeighborhoodIterator，请创建一个并执行相同的操作。

完成对骨架化图像的迭代后，您将在另一张图像中拥有一棵重建的树。请注意，第 2 步是可选的，但会帮助您实现更快的计算。

# java - 如何从java类外部调用私有方法

> ID：11282265
> 
> 赞同：29
> 
> 时间：2012-07-01T13:14:14.990
> 
> 标签：java, reflection, call, private

我有一个`Dummy`类，它有一个名为`sayHello`. 我想`sayHello`从外面打电话`Dummy`。我认为反射应该是可能的，但我得到了一个`IllegalAccessException`. 有任何想法吗？？？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-01T13:16:13.570

在使用`setAccessible(true)`它的方法之前在你的 Method 对象上使用`invoke`。

```
import java.lang.reflect.*;
class Dummy{
    private void foo(){
        System.out.println("hello foo()");
    }
}

class Test{
    public static void main(String[] args) throws Exception {
        Dummy d = new Dummy();
        Method m = Dummy.class.getDeclaredMethod("foo");
        //m.invoke(d);// throws java.lang.IllegalAccessException
        m.setAccessible(true);// Abracadabra 
        m.invoke(d);// now its OK
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-01T13:17:43.977

首先，您必须获取类，这非常简单，然后使用名称获取方法，`getDeclaredMethod`然后您需要将该方法设置为可通过对象`setAccessible`上的方法访问。`Method`

```
 Class<?> clazz = Class.forName("test.Dummy");

    Method m = clazz.getDeclaredMethod("sayHello");

    m.setAccessible(true);

    m.invoke(new Dummy()); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-01T13:19:53.280

```
method = object.getClass().getDeclaredMethod(methodName);
method.setAccessible(true);
method.invoke(object); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-23T14:00:09.580

如果您想将任何参数传递给私有函数，您可以将其作为调用函数的第二个、第三个......参数传递。以下是示例代码。

```
Method meth = obj.getClass().getDeclaredMethod("getMyName", String.class);
meth.setAccessible(true);
String name = (String) meth.invoke(obj, "Green Goblin"); 
```

你可以[在这里看到完整的例子](http://keyurj.blogspot.in/2014/01/how-to-call-private-function-of-another.html)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-06-09T13:14:07.863

Example of accessing private method(with parameter) using java reflection as follows :

```
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
class Test
{
    private void call(int n)  //private method
    {
        System.out.println("in call()  n: "+ n);
    }
}
public class Sample
{
    public static void main(String args[]) throws ClassNotFoundException,   NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchFieldException
    {
        Class c=Class.forName("Test");  //specify class name in quotes
        Object obj=c.newInstance();

        //----Accessing private Method
        Method m=c.getDeclaredMethod("call",new Class[]{int.class}); //getting method with parameters
        m.setAccessible(true);
        m.invoke(obj,7);
    }
} 
```

# ios - 在 MKMapView 上用图案图像画线

> ID：11282271
> 
> 赞同：3
> 
> 时间：2012-07-01T13:14:50.513
> 
> 标签：ios, mkmapview, mkoverlay

我尝试`MKMapView`用图案图像在 a 上画一条线。绘图是通过添加自定义`MKMapOverlay`视图来完成的。

我能够画出线条，但似乎只使用图案图像的左侧最上面的像素而不是整个图像来完成绘图。

这是我的绘图程序：

```
void drawPatternCellCallback(void *info, CGContextRef cgContext)
{
    UIImage *patternImage = [UIImage imageNamed:@"tmpLine"];
    CGContextDrawImage(cgContext, CGRectMake(0, 0, patternImage.size.width, patternImage.size.height), patternImage.CGImage);

}

- (void)drawMapRect:(MKMapRect)mapRect
          zoomScale:(MKZoomScale)zoomScale
          inContext:(CGContextRef)context
{
    float alpha = 1;        
    float tileW = 6.0f;
    float tileH = 4.0f;
    CGFloat lineWidth = MKRoadWidthAtZoomScale(zoomScale)*2;
    CGMutablePathRef path = CGPathCreateMutable();

    if (path != nil)

    {
        //setup styles
        CGContextSetRGBStrokeColor(context, 0.0f, 0.0f, 1.0f, 0.5f);

        const CGPatternCallbacks kPatternCallbacks = {0, drawPatternCellCallback, NULL};
        CGPatternRef strokePattern = CGPatternCreate(
                                                     NULL,
                                                     CGRectMake(0, 0, tileW, tileH), 
                                                     CGAffineTransformIdentity,
                                                     tileW, // horizontal spacing
                                                     tileH,// vertical spacing
                                                     kCGPatternTilingConstantSpacing,
                                                     true,
                                                     &kPatternCallbacks);
        //color sapce
        CGColorSpaceRef patternSpace = CGColorSpaceCreatePattern(NULL);
        CGContextSetStrokeColorSpace(context, patternSpace);

        //pattern
        CGContextSetStrokePattern(context, strokePattern, &alpha);

        //joins/ends
        CGContextSetLineJoin(context, kCGLineJoinMiter);
        CGContextSetLineCap(context, kCGLineCapButt);
        CGContextSetLineWidth(context, lineWidth);

        //OK, let's draw it
        CGPoint firstCGPoint = [self pointForMapPoint:self.point1];    
        CGPoint lastCGPoint = [self pointForMapPoint:self.point2];
        CGPathMoveToPoint(path, NULL, lastCGPoint.x, lastCGPoint.y);    
        CGPathAddLineToPoint(path, NULL, firstCGPoint.x, firstCGPoint.y);
        CGContextAddPath(context, path);
        CGContextStrokePath(context);

        //house hold
        CGPathRelease(path);
        CGPatternRelease(strokePattern);
        CGColorSpaceRelease(patternSpace);
    }
} 
```

知道有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T12:20:47.513

我最终采用了完全不同的策略。而不是通过自己的叠加层添加，我现在依赖`MKPolyLine`.

使用以下代码，我可以在 a 上添加一条从 A 点到 B 点的伪动画线`MKMapView`。

该代码在 MKMapViews 中添加了几个叠加层，但稍有延迟，给人一种动画的印象

不是最漂亮的解决方案！- 但它看起来相当不错:-)

```
/*start the animation*/
-(void)plotRouteOnMap
{
    [self.mapView removeOverlays:self.mapView.overlays];
    //calculate a number locations between the two locations
    self.points = [self getPointsOnRouteFrom:<FROM_LOCATION>
                                          to:<TO_LOCATION>
                                   onMapView:self.mapView]; 
    [self addOverlaysFromPointsWithStartFrom:[NSNumber numberWithInt:1]];
}

/*convert a CGPoint to a CLLocation according to a mapView*/
- (CLLocation*)pointToLocation:(MKMapView *)mapView fromPoint:(CGPoint)fromPoint
{
    CLLocationCoordinate2D coord = [mapView convertPoint:fromPoint toCoordinateFromView:mapView];
    return [[[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude] autorelease];
}

/*get a list of Location objects between from and to*/
-(NSArray*)getPointsOnRouteFrom:(CLLocation*)from to:(CLLocation*)to onMapView:(MKMapView*)mapView
{
    int NUMBER_OF_PIXELS_TO_SKIP =10; //lower number will give a more smooth animation, but will result in more layers 
    NSMutableArray *ret = [NSMutableArray array];
    CGPoint fromPoint = [mapView convertCoordinate:from.coordinate toPointToView:mapView];
    CGPoint toPoint = [mapView convertCoordinate:to.coordinate toPointToView:mapView];

    NSArray *allPixels = [self getAllPointsFromPoint:fromPoint toPoint:toPoint];
    for (int i = 0 ; i < [allPixels count] ; i+=NUMBER_OF_PIXELS_TO_SKIP) {
        NSValue *pointVal = [allPixels objectAtIndex:i];
        [ret addObject:[self pointToLocation:mapView fromPoint:[pointVal CGPointValue]]];  
    } 
    [ret addObject:[self pointToLocation:mapView fromPoint:toPoint]];  
    return ret;
}

/*calulate alle pixels from point to toPint*/
-(NSArray*)getAllPointsFromPoint:(CGPoint)fPoint toPoint:(CGPoint)tPoint
{
    /*Simplyfied implementation of Bresenham's line algoritme */
    NSMutableArray *ret = [NSMutableArray array];
    float deltaX = fabsf(tPoint.x - fPoint.x);
    float deltaY = fabsf(tPoint.y - fPoint.y);
    float x = fPoint.x;
    float y = fPoint.y;
    float err = deltaX-deltaY;

    float sx = -0.5;
    float sy = -0.5;
    if(fPoint.x<tPoint.x)
        sx = 0.5;

    if(fPoint.y<tPoint.y)
        sy = 0.5;
    do {
        [ret addObject:[NSValue valueWithCGPoint:CGPointMake(x, y)]];
        float e = 2*err;
        if(e > -deltaY)
        {
            err -=deltaY;
            x +=sx; 
        }
        if(e < deltaX)
        {
            err +=deltaX;
            y+=sy;
        }
    } while (round(x)  != round(tPoint.x) && round(y) != round(tPoint.y));
    [ret addObject:[NSValue valueWithCGPoint:tPoint]];//add final point
    return ret;

}

/*add a poly line overlay to mapview which start at position 0 and end in 'end' in the array points*/
-(void)addOverlaysFromPointsWithStartFrom:(NSNumber*)end
{
    int intEnd = [end intValue];

    //construct polyline view from start
    CLLocationCoordinate2D *locations = malloc(sizeof(CLLocationCoordinate2D)*2); 
    CLLocation *loc1 = (CLLocation*)[points objectAtIndex:0];
    CLLocation *loc2= (CLLocation*)[points objectAtIndex:intEnd];
    locations[0] = loc1.coordinate;
    locations[1] = loc2.coordinate;
    MKPolyline *line = [MKPolyline polylineWithCoordinates:locations count:2]; 
    [self.mapView addOverlay:line];

    if((intEnd+1) < [points count])//add more overlays after delays unless this is the endpoint
    {        
        [self performSelector:@selector(addOverlaysFromPointsWithStartFrom:) withObject:[NSNumber numberWithInt:intEnd + 1] afterDelay:0.01];
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-12T16:28:38.547

**已接受答案的**Swift版本****

 **使用 MKOverlayRenderer 将图像添加为叠加层

```
func addLayersOfAnimatingOverlay() {
        let sourcePoint = // enter as CLLocation
        let destinationPoint =  // enter as CLLocation
        let pointsCoordinatesArray = self.getLocationArrayFrom(startLocation: sourcePoint, endLocation: destinationPoint)
            //add overlay on above coordinates
        DispatchQueue.main.async{
            self.addDirectionOverlayInMap(locationArray: self.pointsCoordinates1, title: "1")
        } 
```

在 MKPolyline 中获取坐标

```
 func getLocationArrayFrom(startLocation: CLLocation, endLocation: CLLocation) -> [CLLocationCoordinate2D] {
            var coordinatesArray: [CLLocationCoordinate2D] = []
            if let points = helperClass.getPointsOnRoute(from: startLocation, to: endLocation, on: mapView) {
                for point in points {
                    let coordinate  = point.coordinate
                    coordinatesArray.append(coordinate)
                }
            }
            return coordinatesArray
        }

    //MARK: get cordinates from line
        func getPointsOnRoute(from: CLLocation?, to: CLLocation?, on mapView: MKMapView?) -> [CLLocation]? {
            let NUMBER_OF_PIXELS_TO_SKIP: Int = 120
            //lower number will give a more smooth animation, but will result in more layers
            var ret = [Any]()

            var fromPoint: CGPoint? = nil
            if let aCoordinate = from?.coordinate {
                fromPoint = mapView?.convert(aCoordinate, toPointTo: mapView)
            }
            var toPoint: CGPoint? = nil
            if let aCoordinate = to?.coordinate {
                toPoint = mapView?.convert(aCoordinate, toPointTo: mapView)
            }
            let allPixels = getAllPoints(from: fromPoint!, to: toPoint!)
            var i = 0
            while i < (allPixels?.count)! {
                let pointVal = allPixels![i] as? NSValue
                ret.append(point(toLocation: mapView, from: (pointVal?.cgPointValue)!)!)
                i += NUMBER_OF_PIXELS_TO_SKIP
            }
            ret.append(point(toLocation: mapView, from: toPoint!)!)
            return ret as? [CLLocation]
        }

/**convert a CGPoint to a CLLocation according to a mapView*/
    func point(toLocation mapView: MKMapView?, from fromPoint: CGPoint) -> CLLocation? {
        let coord: CLLocationCoordinate2D? = mapView?.convert(fromPoint, toCoordinateFrom: mapView)
        return CLLocation(latitude: coord?.latitude ?? 0, longitude: coord?.longitude ?? 0)
    }

    func getAllPoints(from fPoint: CGPoint, to tPoint: CGPoint) -> [Any]? {
        /*Simplyfied implementation of Bresenham's line algoritme */
        var ret = [AnyHashable]()
        let deltaX: Float = fabsf(Float(tPoint.x - fPoint.x))
        let deltaY: Float = fabsf(Float(tPoint.y - fPoint.y))
        var x: Float = Float(fPoint.x)
        var y: Float = Float(fPoint.y)
        var err: Float = deltaX - deltaY
        var sx: Float = -0.5
        var sy: Float = -0.5
        if fPoint.x < tPoint.x {
            sx = 0.5
        }
        if fPoint.y < tPoint.y {
            sy = 0.5
        }
        repeat {
            ret.append(NSValue(cgPoint: CGPoint(x: CGFloat(x), y: CGFloat(y))))
            let e: Float = 2 * err
            if e > -deltaY {
                err -= deltaY
                x += sx
            }
            if e < deltaX {
                err += deltaX
                y += sy
            }
        } while round(Float(x)) != round(Float(tPoint.x)) && round(Float(y)) != round(Float(tPoint.y))
        ret.append(NSValue(cgPoint: tPoint))
        //add final point
        return ret
    } 
```

这将产生以下效果（无动画） [![在此处输入图像描述](../Images/2551fe03d81eca4449c50fd283eee4b8.png)](https://i.stack.imgur.com/7Teun.gif)

该项目可以在[这里找到](https://github.com/abin0992/AnimatedMapOverlay)**

# iphone - naturalSize 从 AVURLAsset 返回错误的方向

> ID：11282283
> 
> 赞同：5
> 
> 时间：2012-07-01T13:16:31.930
> 
> 标签：iphone, xcode, video, avfoundation, avurlasset

我使用 [此处][1] 找到的代码将图像附加到使用`UIImagePickerController`.

视频是纵向的并且播放良好，但是一旦我使用`AVURLASSet`它转向横向而不是纵向，我找不到原因？

任何人都可以指出我正确的方向吗？

我的代码：

```
-(IBAction)addWaterMark:(id)sender {
 AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:[NSURL fileURLWithPath:tempPath] options:nil];
AVMutableComposition* mixComposition = [AVMutableComposition composition];

AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo  preferredTrackID:kCMPersistentTrackID_Invalid];
AVAssetTrack *clipVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) 
                               ofTrack:clipVideoTrack
                                atTime:kCMTimeZero error:nil];

[compositionVideoTrack setPreferredTransform:[[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] preferredTransform]]; 

CGSize videoSize = [videoAsset naturalSize]; 
NSLog(@"%f %f",videoSize.width,videoSize.height);
} 
```

此时我得到 480,360 而不是 temppath 的正确大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:47:58.177

[在这里](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)找到了描述如何使用 AVfoundation 介绍编辑和操作视频的详细教程

> 如果它们是横向的，我们可以使用我们提供的 naturalSize 属性，但如果它们是纵向的，我们必须翻转 naturalSize 以便宽度现在是高度，反之亦然

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T19:42:39.860

我在这里留下了正确的代码以防其他人需要，尽管您选择了自己的答案作为正确的答案。

```
//readout the size of video
AVAssetTrack *vT = nil;
if ([[asset tracksWithMediaType:AVMediaTypeVideo] count] != 0)
{
    vT = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
}
if (vT != nil)
{
    orgWidth = vT.naturalSize.width;
    orgHeight = vT.naturalSize.height;
}

//check the orientation
CGAffineTransform txf = [vT preferredTransform];
if ((width == txf.tx && height == txf.ty)|(txf.tx == 0 && txf.ty == 0))
{
    //Landscape
}
else
{ 
    //Portrait
} 
```

# javascript - 超级鱼孩子中的文本缩进继承

> ID：11282285
> 
> 赞同：0
> 
> 时间：2012-07-01T13:17:09.030
> 
> 标签：javascript, css, superfish

我正在尝试用图像而不是文本替换我网站的顶级导航。到目前为止，我有这个，它将文本隐藏在屏幕外并为特定菜单项放置图像。

`#menu-item-982 a { background: url('image.png'); text-indent: -9999px; }`

问题在于，superfish 中的子菜单项，它们没有自己的单独图像，而只是常规的文本菜单项，因此继承了 text-indent 属性。

使用以下内容不会重置子文本缩进。

`.sub-menu li a { text-indent: 0px; }`

简而言之，如何在超级鱼菜单的顶层使用图像，同时为二级和三级弹出菜单使用文本菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:32:17.417

试着让你的`.sub-menu li a`更具体

这是一篇关于特异性的好文章：http: [//coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

或者

尝试使用重要！对于那个 CSS 属性

```
.sub-menu li a { text-indent: 0px !important; } 
```

# haskell - 需要帮助理解 Haskell 的惰性求值行为

> ID：11282289
> 
> 赞同：7
> 
> 时间：2012-07-01T13:17:50.863
> 
> 标签：haskell, lazy-evaluation

我已经编写了两个版本的 nqueens 问题，我认为它们应该具有相似的效率，但事实并非如此。我认为这是由于 Haskell 的懒惰评估行为。有人可以解释一下它在以下示例中的工作原理吗，

```
nqueens1 n 1 = [[i] | i <- [1..n]]
nqueens1 n k = [ i:q | i <- [1..n], q <- (nqueens1 n (k - 1)), isSafe i q k]

isSafe i q n  = isSafeHelper i (zip q [(n-1),(n-2)..1]) 
         where isSafeHelper i []  = True
               isSafeHelper i (x:xs) = (i /= fst x) && abs(i - (fst x)) /= abs(n - (snd x)) && 
                                       isSafeHelper i xs
nqueens2 n 1 = [[i] | i <- [1..n]]
nqueens2 n k = [ i:q | i <- [1..n], q <- boards, isSafe i q k]
           where boards = nqueens2  n (k-1) 
```

您可以通过调用 nqueens1 8 8 或 nqueens2 8 8 来评估它们，以评估它是否适合 8 号板。

虽然 nqueens2 的工作效率很高，但 nqueens1 存在性能问题。我相信这是因为递归调用 (nqueens n (k-1)) 被多次评估。根据我对 Haskells 懒惰评估的理解，情况并非如此。

请帮助我理解这种行为。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T13:35:57.157

是的，递归调用被多次评估。具体来说，它对 的每个值进行一次评估`i`。

如果你想避免这种情况，你可以重新排列生成器，使`q <-`部分出现在`i <-`部分之前：

```
[ i:q | q <- nqueens2 n (k - 1), i <- [1..n], isSafe i q k] 
```

但是，这将改变结果的顺序。如果这不可接受，您可以使用`let`一次计算递归调用的结果，然后像这样使用它：

```
[ i:q | let rec = nqueens2 n (k - 1), i <- [1..n], q <- rec, isSafe i q k] 
```

# spring - 我怎样才能使用拦截方法使用它的过滤器，而不是命名空间？

> ID：11282291
> 
> 赞同：0
> 
> 时间：2012-07-01T13:18:40.043
> 
> 标签：spring, spring-security, intercept

我正在尝试在我的应用程序（使用弹簧安全）中添加一些没有命名空间的拦截方法。

所以这就是我所做的：
首先，我向 filter-chain-map 添加了一个名为“methodSecurityInterceptor”的过滤器，如您所见：

```
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
    <security:filter-chain-map path-type="ant">
        <sec:filter-chain pattern="/css/**" filters="none" />
        <sec:filter-chain pattern="/images/**" filters="none" />
        <sec:filter-chain pattern="/login.jsp*" filters="none" />
        <sec:filter-chain pattern="/**"
            filters="
        ConcurrentSessionFilter,
        securityContextPersistenceFilter,
        sessionManagementFilter,
        authenticationProcessingFilter,
        exceptionTranslationFilter,
        filterSecurityInterceptor,
        methodSecurityInterceptor,
        logoutFilter" />
    </security:filter-chain-map>
</bean> 
```

然后我这样介绍它的bean：

```
<bean id="methodSecurityInterceptor"
class="org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="accessDecisionManager" ref="accessDecisionManager" />
    <property name="securityMetadataSource" ref="MyMethodMetdataSource">

    </property>
</bean> 

<bean id="MyMethodMetdataSource" class="com.datx.dao.MyMethodMetdataSource">
</bean> 
```

我的 MyMethodMetadataSource 是这样实现的：

```
public class MyMethodMetdataSource extends AbstractMethodSecurityMetadataSource{

@Override
public Collection<ConfigAttribute> getAttributes(Method arg0, Class<?> arg1) {

    String url = arg0.getName();
    List<ConfigAttribute> attributes = new ArrayList<ConfigAttribute>();

    attributes = getAttributesByURL2(url); //Here is my function which
                                           //returns corresponding roles

    return attributes;
}
    @Override
public Collection<ConfigAttribute> getAllConfigAttributes() {
    // TODO Auto-generated method stub
    return null;
} 
```

显然我不允许使用***methodSecurityInterceptor***因为它不是过滤器！
所以我该怎么做？
我读过[这篇](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#aop-alliance)文章，但我不知道如何将*它与 Spring AOP 的代理机制之一*一起使用！

所以...有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:00:30.490

[我之前给您](https://github.com/SpringSource/spring-security/blob/master/config/src/test/java/org/springframework/security/intercept/method/aopalliance/MethodSecurityInterceptorWithAopConfigTests.java)的示例非常简单，您可以在不使用命名空间`<global-method-security>`元素的情况下制作它。

将 Spring 的[AOP 命名空间](http://static.springsource.org/spring/docs/3.1.0.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#aop-schema)与要保护的方法匹配的切入点使用：

```
<aop:config>
  <aop:pointcut id='targetMethods' expression='execution(* org.springframework.security.TargetObject.*(..))'/>
  <aop:advisor advice-ref='securityInterceptor' pointcut-ref='targetMethods' />
</aop:config> 
```

并将安全拦截器声明为 bean：

```
<bean id='target' class='org.springframework.security.TargetObject'/>
<bean id='securityInterceptor' class='org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor' autowire='byType' >
   <property name='securityMetadataSource' ref="yourSecurityMetadataSource"/>
</bean> 
```

然后，在调用该方法之前，对该 bean 的外部调用将通过安全拦截器进行路由。

如果您以前没有使用过 AOP，我建议您检查源代码并尝试在调试器中运行测试以了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T05:07:29.833

幸运的是，我找到了这个问题的答案。
不能将过滤器用于拦截方法。所以我建议改用代理。

所以这是解决方案：
将过滤器链改回正常状态：

```
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
<security:filter-chain-map path-type="ant">
    <sec:filter-chain pattern="/css/**" filters="none" />
    <sec:filter-chain pattern="/images/**" filters="none" />
    <sec:filter-chain pattern="/login.jsp*" filters="none" />
    <sec:filter-chain pattern="/**"
        filters="
    ConcurrentSessionFilter,
    securityContextPersistenceFilter,
    sessionManagementFilter,
    authenticationProcessingFilter,
    exceptionTranslationFilter,
    filterSecurityInterceptor,
    logoutFilter" />
</security:filter-chain-map> 
```

看看我在那里做了什么？我删除了方法SecurityInterceptor。

然后添加一个代理：

```
<bean id="autoProxyCreator" class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
    <property name="interceptorNames">
        <list>
            <value>methodSecurityInterceptor</value> <!-- Responsible for checking roles and accesspaths -->
        </list>
    </property>
    <property name="beanNames">
        <list>
            <value>Manager2</value> <!--The Class that I want to protect its methods -->
        </list>
    </property>
</bean> 
```

当然，我们也必须将这些 bean 添加到应用程序上下文中：

```
<bean id="methodSecurityInterceptor"
    class="org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor">
        <property name="authenticationManager" ref="authenticationManager" />
        <property name="accessDecisionManager" ref="accessDecisionManager" />
        <property name="securityMetadataSource" ref="MyMethodMetdataSource">            
        </property>
    </bean>
<bean id="MyMethodMetdataSource" class="com.datx.dao.MyMethodMetdataSource">
</bean> 
```

我们开始 :)

现在 Manager2.java 中的每个方法都将检查每个方法调用。

# xml - XML 解析器错误：实体未在所有浏览器中定义

> ID：11282292
> 
> 赞同：1
> 
> 时间：2012-07-01T13:18:42.817
> 
> 标签：xml, parsing, entity

我编写了一个简单的 XML 文件和一个包含实体的 DTD 文件，但是当我想在浏览器中检查它时，我收到了以下消息：

XML 解析器错误：未定义实体。
地址：file:///Users/Mike/Documents/fb.xml
第 8 行第 22 列

我试图找到答案，大多数是指 Firefox 的附加问题。但是，我在带有 Firefox、Chrome 和 Safari 的 Mac OS X 10.7 以及带有 Firefox 和 Chrome 的 Windows 7 上收到此消息。IE什么都不做。（Mac 上的 Opera 没有给我消息，但也没有显示文本替换。）

这是我的文件。
DTD：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT example (some_list) >
<!ELEMENT some_list (item+)>
<!ELEMENT item (element1, element2)>
<!ELEMENT element1 (#PCDATA) >
<!ELEMENT element2 (#PCDATA) >
<!ENTITY entity1 "1234567890" > 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE some_list SYSTEM "Allgemeine_Entities.dtd">
<some_list>
    <item>
        <element1>Some Text</element1>
        <element2>more Text and &entity1;</element2>
    </item>
</some_list> 
```

由于问题出现在我所有的浏览器中，我认为这不是特定于浏览器的问题。

感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:35:01.087

最近的浏览器大多不会[加载外部 DTD](http://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28XML%29#Schema_technologies)

# android - “呼叫未发送”弹出窗口

> ID：11282293
> 
> 赞同：1
> 
> 时间：2012-07-01T13:18:52.993
> 
> 标签：android, call, galaxy

我对阻止和传递呼叫有一个令人沮丧的问题。

我的应用流程如下：

1.  接收 的意图的广播接收器 BR `NEW_OUTGOING_CALL`，停止呼叫（由`setResultData(null);`）并启动服务 S。
2.  S 决定是否调用（并显示一个对话框）。如果它决定用标志来`startActivity()`调用它`ACTION_CALL`。`NEW_TASK`（并放置一些标识符，以便下次 BR 收到它时不会阻止它。

到目前为止，此流程运行良好，**但在 Galaxy S3 上存在问题**：

1.  它只会阻止调用 - 新调用的 startActivity() 不起作用。
2.  我认为这是因为系统仍在处理第一个请求并放弃了新呼叫。
3.  我试图调用 abortBroadcast(); 来自 BR，但我收到“未发送呼叫”oppup，这意味着系统仍在处理该意图
4.  我通过在服务中设置后延迟成功地获得了所需的功能，因此两次调用之间会有一点时间跨度。

**我可以在不延迟新呼叫的情况下实现所需的功能吗？**

# javascript - 我们可以在多大程度上依赖 Javascript？

> ID：11282295
> 
> 赞同：-1
> 
> 时间：2012-07-01T13:19:07.860
> 
> 标签：javascript, javascript-events

我正在开发一个项目并尝试使用 javascript 在插入数据库之前验证用户输入的所有输入。

我们可以完全依赖 Javascript 进行用户输入验证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:20:22.537

不; 你绝对不能。
攻击者可以禁用 Javascript。

攻击者甚至可以发送原始 HTTP 请求，这样 Javascript 就不会首先进入图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:21:03.427

任何人都可以在不使用浏览器的情况下向您的服务器发出请求，更不用说 javascript。你不能**依赖**javascript 做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-18T13:36:43.253

现在，在提出这个问题 3 年后，我想添加一个答案。所有答案都假定验证 Javascript 正在客户端上运行（当时可能也是这种情况）。

如今，Javascript 也可以是服务器上使用的语言。在这种情况下，这是完全可以的。攻击者无法禁用该部分。

但是其他答案所解决的要点仍然有效：不能仅允许在客户端进行数据验证。

.

# javascript - 如果数字超过 10，则将数字重置为 1

> ID：11282297
> 
> 赞同：-2
> 
> 时间：2012-07-01T13:19:23.630
> 
> 标签：javascript, jquery

`num`是一个在 1 到 9 之间动态变化的变量。

我必须更新 HTML 中的值，例如假设`num`是 6，

我需要将第一个字段设置为 6，第二个字段设置为 7，第三个字段设置为 8，依此类推

在简单版本中，**6、7、8、9、1、2、3、4、5**

```
$("#one").text(num);
....
$("#nine").text(num+8); 
```

编辑：抱歉混淆

```
$("#one").text(num);
$("#two").text(num+1);
....
$("#nine").text(num+8); 
```

例如，on 的值`$("#nine")`是 6+8 = 14，而它应该是 5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:22:20.023

您正在寻找模数运算符，`%`

在这种情况下，类似于：

```
$("#nine").text(1+num%9); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:37:53.310

```
var num = 6;
$("#one") .text(((num + (-1)) % 9)) + 1);
$("#two") .text(((num + 0 ) % 9) + 1);
.
.
.
$("#nine").text(((num + 7) % 9)) + 1); 
```

# html - css z-index 问题（块中块）

> ID：11282298
> 
> 赞同：0
> 
> 时间：2012-07-01T13:19:23.677
> 
> 标签：html, css

HTML：

```
<div class="entry-wrapper">
<div class="entry-paper"></div>
some content goes here
</div> 
```

CSS：

```
.entry-wrapper {
    background: white;
    margin: 0 0 1.625em;
    padding: 1.625em;
    position: relative;
    box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4), inset 0 0 50px rgba(0, 0, 0, 0.1);
}

.entry-paper {
    background: white;
    height: 100%;
    width: 99%;
    position: absolute;
    left: 2px;
    top: 3px;
    z-index: -1;
    box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);
}

.entry-paper::before, .entry-paper::after {
    position: absolute;
    width: 40%;
    height: 10px;
    content: ' ';
    left: 12px;
    bottom: 2px;
    background: red;
    -webkit-transform: skew(-5deg) rotate(-5deg);
    -moz-transform: skew(-5deg) rotate(-5deg);
    -ms-transform: skew(-5deg) rotate(-5deg);
    -o-transform: skew(-5deg) rotate(-5deg);
    transform: skew(-5deg) rotate(-5deg);
    z-index: -1;
}

.entry-paper::after {
    left: auto;
    right: 12px;
    -webkit-transform: skew(5deg) rotate(5deg);
    -moz-transform: skew(5deg) rotate(5deg);
    -ms-transform: skew(5deg) rotate(5deg);
    -o-transform: skew(5deg) rotate(5deg);
    transform: skew(5deg) rotate(5deg);
} 
```

我需要将红色块放置在 .entry-paper 块下。这是链接，伙计们 - [http://layot.prestatrend.com/?page_id=2](http://layot.prestatrend.com/?page_id=2)不知道该怎么做。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:50:14.540

如果目标是在 .entry-wrapper 和 .entry-paper 下方显示红色块：

*   改变：`.entry-paper::`到`.entry-wrapper:`
*   将 z-index 更改为`.entry-wrapper:before, .entry-wrapper:after`-2（任何小于 z-index 的值`.entry-paper`）
*   调整底部值`.entry-wrapper:before, .entry-wrapper:after`（可能为 -3px 左右）

[jsfiddle 演示](http://jsfiddle.net/rrnBc/3/)

**编辑1：**

它似乎没有造成任何伤害，但`::`for`before`和`after`应该改为`:`. 显然浏览器忽略了 extra `:`，但它可能会在某些时候造成麻烦。

# css - 浮动右下的 CSS

> ID：11282299
> 
> 赞同：0
> 
> 时间：2012-07-01T13:19:33.210
> 
> 标签：css, css-float

我希望我能很好地解释这一点。我有一个具有 style="float: right;" 的 div 在这个 div 中，我有一个包含一些编辑器字段的表格。但现在我想要两个文本编辑器框（在 .NET MVC3 @Html.TextAreaFor 中）位于这些编辑字段下。但是发生的情况是文本编辑器框出现在页面中间的某个位置，而不是在右侧浮动编辑器字段下方。如何使文本编辑器出现在右侧浮动编辑器字段下？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:06:17.637

我通过将右对齐的 div 放在两个单元格的右单元格中解决了这个问题，我给了 100% 宽度的一个行表。这会强制下一个带有文本编辑器字段的视图适合此表，因为它的宽度为 100%。它不是很优雅，但现在可以解决问题。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:56:42.247

尝试应用`overflow:hidden`到`div`with float right 的父级，假设必须在它下面的块不在同一个父级中。但这肯定有助于查看您的标记。

# dojo - 刷新增强网格保留客户端过滤器

> ID：11282302
> 
> 赞同：1
> 
> 时间：2012-07-01T13:20:05.847
> 
> 标签：dojo, dojox.grid

我们如何在应用过滤器后刷新增强网格，保留过滤器查询？做 grid.setFilter() 清除过滤器。有什么方法可以访问网格中的所有活动过滤器，以提供类似 grid.setFilter(activefilters)?????

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:01:45.490

嗯.....我自己得到了答案，

它的 grid.getFilter() 给出了当前的过滤器

grid.setFilter(grid.getFilter());

使用当前过滤器刷新网格..

就这么简单:)

# glsl - 读取渲染图像进行后处理时，WebGLRenderTarget 中的 Alpha 通道全部为 1.0

> ID：11282303
> 
> 赞同：1
> 
> 时间：2012-07-01T13:20:14.590
> 
> 标签：glsl, webgl, three.js, texture2d

我正在使用 Three.js 将世界渲染到 WebGLRenderTarget。我的世界没有填满整个屏幕，因此具有透明背景。目的是提供 alpha 通道感知图像效果。

1.  我将世界渲染到 WebGLRenderTarget 缓冲区

2.  我尝试通过从缓冲区读取并写入真实屏幕来对此进行后处理

我的后处理功能取决于 alpha 通道。但是，看起来 Three.JS 后处理着色器无法正确读取 alpha 通道 - 无论我尝试将什么值放入 WebGLRenderTarget，它都是 1.0。

演示问题的简单方法。

我创建了一个渲染目标：

```
 var rtParameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat};

        for(var i=0; i<this.bufferCount; i++) {
            this.buffers[i] = new THREE.WebGLRenderTarget(this.width, this.height, rtParameters);
        } 
```

我将缓冲区设置 alpha 清除为 0.3::

```
 function clear(buf) {
            // For debugging purposes we set clear color alpha
            renderer.setClearColor(new THREE.Color(0xff00ff), 0.3);
            renderer.clearTarget(buf, true, true, true);
        }

        // Clean up both buffers for the start
        clear(buffers[0]); 
```

然后我将此缓冲区用作读取缓冲区并在我的后处理片段着色器函数中渲染到屏幕（ThreeJS 后处理示例）：

```
 "void main() {",

                    // texture is the buffer I rendered before
                    "vec4 sample = texture2D( texture, vUv);",

                    // Everything goes to white (1.0) when trying to visualize the
                    // alpha channel of previously rendered WebGLTarget.
                    // It should get value 0.3 - slight gray
                    "gl_FragColor = vec4(sample.a, sample.a, sample.a, 1.0);",
            "}" 
```

其他颜色值被正确读取。如果我`vec4(sample.r, sample.g, sample.b, 1.0)`按预期直接使用它。

*   清除 WebGLRenderTarget 的 alpha 通道是否有问题？

*   将 alpha 值读取为将 WebGLRenderTarget 作为 GLSL 着色器中 2D 图像后处理的纹理是否存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:12:03.673

这是一个实现我相信你正在努力实现的小提琴。

[http://jsfiddle.net/6vK6W/3/](http://jsfiddle.net/6vK6W/3/)

# c++ - 模板库的编译器内存消耗（boost + Eigen）

> ID：11282305
> 
> 赞同：1
> 
> 时间：2012-07-01T13:20:24.863
> 
> 标签：c++, visual-studio, templates, boost, eigen

我正在编写一个使用 boost::accumulators 和 Eigen 线性代数库的模板算法。编译时，Visual Studio 编译器 (cl.exe)，内存消耗峰值超过 2.5GB 的 RAM，我的 PC（Windows 7 32 位，3GB 虚拟地址空间）变得无响应（很长一段时间：~1 分钟） . 这些编译单元的二进制文件 (.obj) 为 10-20MB。

我的问题（不针对这些特定库）

1.  这是大量使用模板的代码的正常行为吗？
2.  有什么办法可以减少内存需求和编译时间？
3.  如果问题没有好的解决方案，为什么设计编程语言的人不解决这个问题？了解 C++ 的人越多，他们就越可能使用模板，并生成难以编译的代码和臃肿的二进制文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:14:18.457

> 如果问题没有好的解决方案，为什么设计编程语言的人不解决这个问题？

因为没有好的解决方案，*句号*。

您所说的问题与 C++ 无关。这是来自 C 的人工制品 - 旧的“翻译单元”。解决这个问题需要重新编译模型。C++ 委员会多年来一直试图在*不*破坏现有 C++ 的每一行的情况下实现这一点（这是一个更大的考虑因素），但这不是一个微不足道的问题。修复它需要巨大的改变。

此外，Clang 具有*更好*的性能，并且配备可变参数模板的 GCC 的新版本也可以做到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T14:14:47.467

1.  是的。编译模板是消耗内存的。有些实现比其他实现更糟糕。以我个人的经验，在 GCC、MSVC 和 Clang 中，后者最擅长管理其内存使用。

2.  您可以将庞大的源文件拆分为几个较小的源文件。这将通过几个编译步骤来平衡负载。

3.  设计编程语言的人只关心实现很少，给编译器编写者足够的自由来超越和竞争。或吸。

# c++ - C++匿名结构指针赋值

> ID：11282306
> 
> 赞同：4
> 
> 时间：2012-07-01T13:20:38.123
> 
> 标签：c++, pointers, casting, anonymous-types, compiler-theory

所以*不*，这不是做事的最佳方式。但是，*为了理论上*，如何​​将指针值成功分配给匿名结构的指针？

```
#pragma pack(push,1)
    struct
    {
        __int16 sHd1;
        __int16 sHd2;
    } *oTwoShort;
#pragma pack(pop)

    oTwoShort = (unsigned char*)msg; // C-Error 
```

产生：

> 错误 C2440：'='：无法从 'unsigned char *' 转换为 '<unnamed-type-oTwoShort> *'

该示例假定`msg`它本身是一个有效的指针。

这可能吗？由于您没有实际类型，您甚至可以进行类型转换吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T13:31:22.853

您可以通过以下方式获取类型`decltype`：

```
oTwoShort = reinterpret_cast<decltype(oTwoShort)>(msg); 
```

这是在 C++11 中添加的，因此它不适用于较旧的编译器。[`BOOST_PROTO_DECLTYPE`](http://www.boost.org/doc/libs/1_47_0/boost/proto/detail/decltype.hpp)Boost 有一个与旧编译器大致相同的 ( ) 实现。它有一些限制（例如，如果有记忆，每个作用域只能使用一次），但总比没有好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-01T13:31:06.393

我认为你必须使用 C++11 `decltype`：

```
oTwoShort = reinterpret_cast<decltype(oTwoShort)>(msg); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-01T13:30:17.537

```
reinterpret_cast<unsigned char*&>(oTwoShort) = reinterpret_cast<unsigned char*>(msg); 
```

但是，真的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-24T20:25:19.383

如前所述，您不能进行指针转换，但可以这样做：

```
memcpy(&oTwoShort,&msg,sizeof(void*)); 
```

# javascript - 使用 javascript 中的表单发布将字符串作为文件上传

> ID：11282307
> 
> 赞同：1
> 
> 时间：2012-07-01T13:20:51.837
> 
> 标签：javascript, form-post

我想在不使用文件输入的情况下伪造文件上传。该文件的内容是从一个字符串生成的。即我想将一些字符串发布到内容类型为“multipart/form-data”的服务器。

但是服务器具有不同的域并且不支持 CORS，因此我无法使用 XMLHttpRequest。是否可以只使用普通形式的帖子来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:19:55.033

这实际上是一个很好的问题。以我的拙见，由于以下各种原因，您正在寻找的东西是不可能的：

*   你肯定可以有一个像这样的 HTML 表单：

    ```
    <form ....>
    <input id="blah" type="input" name="nameblah" ..>
    ...
    </form> 
    ```

    但正如您所知，您确实无法访问/修改所选文件的“内容”。直接的解决方案是使用隐藏字段作为替代并设置`enctype=multipart/form-data`，但对于隐藏字段，浏览器不会设置正确的`Content-Disposition`标题。

*   您可以进行 AJAX 调用，在其中手动构建整个请求正文，但正如您已经指出的那样，这将是一个跨域调用。通常的绕过技术适用。

解决方案是让提供 HTML 的服务器为您完成 skydrive 请求。在这种情况下，您将使用 HTML 表单或 javascript 上传文件。然后该文件将被“转发”到 skydrive 服务器。

如果您尝试通过 Javascript，请确保`multipart/form-data`正确获取格式。这是[RFC](http://www.ietf.org/rfc/rfc2388.txt)

# android - 如何在 oncheckedchanged 中停止线程？

> ID：11282312
> 
> 赞同：1
> 
> 时间：2012-07-01T13:21:33.623
> 
> 标签：android

好吧，当我将切换按钮按到 ON 时，我可以启动线程并且它工作正常，该线程是启动音频记录和音轨。但是当我关闭切换按钮时我无法停止线程......因为我不能做线程。停止......我想做的只是停止录音和音轨......如果有任何方法可以启动/停止它们/ o 制作线程也可以。另外，由于我无法停止线程，所以当我执行切换按钮 ON - OFF - ON 时，它会出错，因为无法启动线程 2 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:28:02.613

也许你可以使用一个变量并检查函数是否运行，如果它的状态，像这样：

```
 tbs = (ToggleButton) findViewById(R.id.tbS);
   boolean stopThread = false;
    tbs.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        // TODO Auto-generated method stub
        if (isChecked) {

            thread.start();
            } else {
          stopThread = true;
        }

    }
});
      Thread thread = new Thread() {
public void run() {
    isRecording = true;
    android.os.Process
            .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
    int buffersize = AudioRecord.getMinBufferSize(8000,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT);
    arec = new AudioRecord(MediaRecorder.AudioSource.MIC, 11025,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT, buffersize);
    int bufferzize = AudioTrack.getMinBufferSize(11025,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT);
    atrack = new AudioTrack(AudioManager.STREAM_MUSIC, 11025,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT, bufferzize,
            AudioTrack.MODE_STREAM);
    atrack.setPlaybackRate(11025);
    byte[] buffer = new byte[buffersize];
    if (arec.getState() == AudioRecord.STATE_INITIALIZED)
        arec.startRecording();
    if (atrack.getState() == AudioTrack.STATE_INITIALIZED)
        atrack.play();
    while (isRecording) {
        arec.read(buffer, 0, buffersize);
        atrack.write(buffer, 0, buffer.length);
    }

    if(stopThread)
        return;
}

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:31:32.997

在这种情况下，我更喜欢处理程序。

他们有两个特点

```
Handler audioHandler = new Handler();

audioHandler.post(startAudio);   // Starts the operations

audioHandler.removeCallbacks(startAudio); //Stops the Operation 
```

以下代码段将为您提供帮助。

```
package org.sample;

import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioRecord;
import android.media.AudioTrack;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Handler;
import android.widget.CompoundButton;
import android.widget.ToggleButton;

public class SampleActivity extends Activity {

    private Handler audioHandler;
    private Runnable startAudio;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        audioHandler = new Handler();

        startAudio = new Runnable() {

            @Override
            public void run() {
                isRecording = true;
                android.os.Process
                        .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
                int buffersize = AudioRecord.getMinBufferSize(8000,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT);
                arec = new AudioRecord(MediaRecorder.AudioSource.MIC, 11025,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT, buffersize);
                int bufferzize = AudioTrack.getMinBufferSize(11025,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT);
                atrack = new AudioTrack(AudioManager.STREAM_MUSIC, 11025,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT, bufferzize,
                        AudioTrack.MODE_STREAM);
                atrack.setPlaybackRate(11025);
                byte[] buffer = new byte[buffersize];
                if (arec.getState() == AudioRecord.STATE_INITIALIZED)
                    arec.startRecording();
                if (atrack.getState() == AudioTrack.STATE_INITIALIZED)
                    atrack.play();
                while (isRecording) {
                    arec.read(buffer, 0, buffersize);
                    atrack.write(buffer, 0, buffer.length);
                }

                audioHandler.post(startAudio);

            }
        };

        tbs = (ToggleButton) findViewById(R.id.tbS);
        tbs.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                // TODO Auto-generated method stub
                if (isChecked) {
                    audioHandler.post(startAudio);
                } else {
                    audioHandler.removeCallbacks(startAudio);
                }

            }
        });

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T13:43:18.317

`stop()`Thread的方法已被**弃用**（因为它本质上是不安全的），java 提供了另一种停止 Thread 的方法。这是一个非常简单的方法，如官方链接中所述：

[http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)

您是否尝试将`isRecording`变量设为全局变量，然后更改其状态：

```
 isRecording = false;

 Thread thread;

 Runnable r = new Runnable() {
public void run() {
    isRecording = true;
    android.os.Process
            .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
    int buffersize = AudioRecord.getMinBufferSize(8000,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT);
    arec = new AudioRecord(MediaRecorder.AudioSource.MIC, 11025,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT, buffersize);
    int bufferzize = AudioTrack.getMinBufferSize(11025,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT);
    atrack = new AudioTrack(AudioManager.STREAM_MUSIC, 11025,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT, bufferzize,
            AudioTrack.MODE_STREAM);
    atrack.setPlaybackRate(11025);
    byte[] buffer = new byte[buffersize];
    if (arec.getState() == AudioRecord.STATE_INITIALIZED)
        arec.startRecording();
    if (atrack.getState() == AudioTrack.STATE_INITIALIZED)
        atrack.play();
    while (isRecording) {
        arec.read(buffer, 0, buffersize);
        atrack.write(buffer, 0, buffer.length);
    }
}

};

tbs = (ToggleButton) findViewById(R.id.tbS);
tbs.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        // TODO Auto-generated method stub
        if (isChecked) {
            thread = new Thread(r)
            thread.start();
            } else {
          isRecording = false;
          thread = null;
        }

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T14:16:30.217

只要存在，线程就`isRecording`存在`true`。因此，您可以根据需要`final StringBuilder`使用它来操纵值`isRecording`。

```
 final StringBuilder isRecording=new StringBuilder("t");
Thread thread = new Thread() {
            public void run() {

                android.os.Process
                        .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
                int buffersize = AudioRecord.getMinBufferSize(8000,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT);
                arec = new AudioRecord(MediaRecorder.AudioSource.MIC, 11025,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT, buffersize);
                int bufferzize = AudioTrack.getMinBufferSize(11025,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT);
                atrack = new AudioTrack(AudioManager.STREAM_MUSIC, 11025,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT, bufferzize,
                        AudioTrack.MODE_STREAM);
                atrack.setPlaybackRate(11025);
                byte[] buffer = new byte[buffersize];
                if (arec.getState() == AudioRecord.STATE_INITIALIZED)
                    arec.startRecording();
                if (atrack.getState() == AudioTrack.STATE_INITIALIZED)
                    atrack.play();
                while (isRecording.toString().equals("t")) {
                    arec.read(buffer, 0, buffersize);
                    atrack.write(buffer, 0, buffer.length);
                }
            }

        };
    tbs = (ToggleButton) findViewById(R.id.tbS);
        tbs.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                // TODO Auto-generated method stub
                if (isChecked) {
                    isRecording.replace(0,0,"t");
                    thread.start();
                    } else {
                isRecording.replace(0,0,"f")
                }

            }
        }); 
```

# entity-framework - 如何将实体框架日期转换为没有时间部分的 SQL Server 日期

> ID：11282315
> 
> 赞同：3
> 
> 时间：2012-07-01T13:22:10.617
> 
> 标签：entity-framework, casting

我有一个日期值`'2012/01/01 12:36:55'`，我想从中过滤 SQL Server`date`值`'2012/01/01'`

我可以`convert('2012/01/01 12:36:55', date, 102)`在 SQL Server 中获得`'2012/01/01'`价值。

问题是：当我的源对象仍然是 Queryable 时，如何转换`2012/01/01 12:36:55`EF LINQ 查询中的日期以获取值？`'2012/01/01'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T09:24:26.827

我在 System.Data.Objects 命名空间中使用 EntityFunctions 类，效果很好

[http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx) http://msdn.microsoft.com/en-us/library/bb738626.aspx

# vim - 在 Vim 中编辑文件名中带有单引号的文件

> ID：11282319
> 
> 赞同：0
> 
> 时间：2012-07-01T13:22:30.117
> 
> 标签：vim, gnome-terminal, terminator

我在 Vim 中遇到了一个奇怪的问题。我想将一个文件从我的桌面或文件管理器拖放到 Vim 中并进行编辑。Gvim 正确地处理了这个行为。

当我尝试在控制台 Vim 中做同样的事情时，会插入文件名的路径。例如，如果我拖放文件 /home/myuser/foo.matic，它会将文本字符串 '/home/myuser/foo.matic' 应用到当前缓冲区。

如果我输入 :edit，然后拖放文件名，Vim 会将 '/home/myuser/foo.matic' 视为一个新目录。

我相信这里的问题是文件路径前后的引号。这些似乎是由 gnome-terminal 和终止符插入的。拖放时有没有办法从文件名中去除这些引号？或者，Vim 有没有办法忽略引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:43:02.830

你不能让 vim 自己的`:e`命令来做你需要的，但你可以定义你自己的。下面列出了最直接的解决方案 - 让 shell 解析 shell 打算解析的内容：

```
command -nargs=? -bang -bar E :execute "e<bang> ".fnameescape(system("echo -n ".<q-args>)) 
```

. 此命令仅接受`:e[!] {file}`变体，不接受`+cmd`和`++opts`允许。

# php - php文件中的8个空格如何使apache崩溃？

> ID：11282321
> 
> 赞同：4
> 
> 时间：2012-07-01T13:22:36.487
> 
> 标签：php, apache, zend-framework, crash

我从事项目，使用 Zend Framework 开发并决定在家做一些工作，但我遇到了一个奇怪的问题：当我在本地机器上打开该网站的主页时，它立即关闭连接并弹出 Windows 错误，说apache 崩溃了（但实际上不是）。

因此，通过切换到项目的另一个修订版，我发现问题发生了，当 Zend Framework 文件之一（实际上是 Zend_Auth 类）在其中一种方法中有 8 个缩进空间时（我们团队的某个人修改了该文件，然后删除了他的变化，在那里留下空间）。

有趣的事情：如果我删除或添加空格到行，这会发生，网站正常工作，如果我返回这 8 个空格，它将再次被破坏。

我的规格：

Windows 7 Apache 2.2.22（来自 www.apachelounge.com）作为服务安装（从系统用户帐户运行）PHP 5.3

编辑：如果有人感兴趣，这些空间在文件 Auth.php（Zend_Auth 类）中的第 118 行。您可以在您的项目中尝试使用您的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:30:28.713

这是在黑暗中开枪，但这是你遇到的一个奇怪的问题：这可能是[“布什隐瞒事实”](http://en.wikipedia.org/wiki/Bush_hid_the_facts)惊喜的案例吗？（另见[这个 SO question](https://stackoverflow.com/questions/2699014/file-output-in-python-giving-me-garbage)）。有点像它，因为添加或删除空格会使问题消失……而且您确实说您正在运行 Windows。

# linux - 高级 Shell 脚本菜单

> ID：11282322
> 
> 赞同：0
> 
> 时间：2012-07-01T13:22:38.947
> 
> 标签：linux, menu, shell

我正在编写一个菜单驱动的 shell 脚本，我现在有是/否菜单。

我想要一个像下面这样的菜单：

```
 1) All                     [ ]    
    2) Config web server       [ ]
    3) Add Source files        [X]
    4) Restart Services        [ ]
    5) Apply file permissions  [ ] 
```

然后，用户应该能够使用箭头键上下导航并按空格键进行选择。按回车键应该继续。

你们有没有人从任何开源安装脚本中看到过这样的菜单，或者知道如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:24:55.763

您也许可以使用[Zenity](http://en.wikipedia.org/wiki/Zenity)使用对话框来实现类似的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:28:39.883

bash 具有`select`内置函数（交互性不强，您需要输入要选择的项目的编号）。然后`whiptail`是一个涉及更多的命令，但会完全按照您的意愿行事。

# java - 如何在 java swing 应用程序中包含 sphinx 4

> ID：11282325
> 
> 赞同：0
> 
> 时间：2012-07-01T13:23:08.030
> 
> 标签：java, swing, netbeans, gson, cmusphinx

谁能告诉我如何将 sphinx4 包含到我的 java swing 项目中，而且我无法找到如何安装 gson 和 json .. 我正在使用 netbeans 7.1.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:41:21.060

哇，我在 6 年前的论文项目中使用了 sphinx4！

不幸的是，我现在不记得太多了，但你可以从[这里下载](http://sourceforge.net/projects/cmusphinx/files/sphinx4/)

提取 jar 并将其添加到您的类路径中。一旦 jar 在类路径上，您应该能够像[这样运行示例应用程序](http://cmusphinx.sourceforge.net/sphinx4/doc/ProgrammersGuide.html)

你不需要安装 json - json 是一种语言，你可以使用 gson 来解析它。[您可以从此处](http://code.google.com/p/google-gson/downloads/list)下载 gson jar并将其添加到您的类路径中。

# opengl - OpenGL拾取并找到纹理的命中点

> ID：11282327
> 
> 赞同：0
> 
> 时间：2012-07-01T13:23:20.667
> 
> 标签：opengl, picking, raycasting

我目前正在研究使用射线进行采摘。我可以找到选择了哪个模型，但是如何检索选择的纹理上的位置？在这种情况下，我说的是四边形。

编辑：另外，如果我想检查命中点是否透明/半透明，我最好用着色器检查吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:53:19.927

I figure by splitting the quad after getting the specific quad id, then picking again, will give me a point on the quad.

# html - 在 Mobile Safari (iOS 5)、横向和纵向中固定和居中的背景图像

> ID：11282328
> 
> 赞同：0
> 
> 时间：2012-07-01T13:23:23.573
> 
> 标签：html, css, ios5, mobile-safari, background-image

我知道这里有人问过这样的问题，但是很多现有问题的答案现在已经过时了。我需要的是以下内容：最好只有​​ CSS 和 HTML 的网页，具有固定且居中的背景图像。我使用的背景图像的尺寸是 1024x1024，其想法是图像将在横向和纵向模式下覆盖屏幕。背景图像也必须是固定的，这意味着如果页面上的内容滚动，背景图像不会随着内容滚动。

我有一个*几乎*可以工作的解决方案：

**CSS：**

```
#background {
    background-image: url('background.jpg');
    background-position:center; 
    background-repeat: no-repeat;
    width: 100%; 
    height: 100%; 
    position: fixed; 
    z-index: 0; 
} 
```

**HTML：**

```
<body>
    <div id="background"></div>
    <!-- content here -->
</body> 
```

此解决方案在纵向模式下运行良好；固定和居中都可以正常工作。但是当我将 ipad 设置为横向模式时，背景图像不会立即调整大小以填充新宽度，而是在右侧显示一个白色垂直条纹。当我滚动内容时，背景图像会调整大小并正确填充宽度。

有谁知道为什么只有在滚动页面内容时才会调整背景大小，并且有谁知道如何使其正常工作？我只对 iOS 5 中的这个工作感兴趣，所以答案不必考虑其他浏览器或 iOS 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:06:05.020

我想我能帮上忙。我也是移动设计的新手，但立即在移动 Safari 中遇到了空白问题......

尝试使用 CSS 属性`min-width`并`min-height`设置为 100%，或以像素为单位的背景图像大小。这应该强制视口（即呈现白色空间的原因）始终遵守背景图像的大小（横向和纵向）。

此外，您还可以尝试应用`margin: 0`到 HTML 或 BODY 元素。

希望它有效！

PS 你可能在你的 HTML 中也需要这个标签：

```
<meta name="viewport" content="width=device-width"> 
```

但同样，我是新手，所以我不确定它是否有必要。

# mysql - mysql查询按标签选择

> ID：11282337
> 
> 赞同：1
> 
> 时间：2012-07-01T13:25:44.370
> 
> 标签：mysql, select

我有一个包含 3 个包含内容的表的数据库，我需要根据标签查询从中获取内容。

表格如下所示：

```
nv_entries:
id - title - year - etc..

nv_tags:
id - entrieid - tag

nv_images:
id - entrieid - source 
```

假设我想要所有带有“rousseau”标签和“fuzz”标签的条目。之后，图像也应该加入其中 entrieid = entrieid。

这可能可以通过一个查询来完成，但我不知道如何。

```
$query = "SELECT * from nv_entries WHERE ??? 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:56:07.640

由于条目和标签之间存在一对多关系，因此您必须在标签表上使用数据透视表。简单地说 where tag = 'x" 和 tag = 'y" 是行不通的，因为引擎会逐行查看这个，所以 tag 不能同时具有这两个值。因此，基本上您可以旋转，为每个条目分配标志，以说明该条目是否已被视为具有您正在寻找的标签值。

```
SELECT * 
FROM nv_entries entries 
JOIN (
    SELECT entrieid, 
           COUNT(CASE WHEN (tag = 'rousseau') THEN 1 ELSE null END) has_rousseau,
           COUNT(CASE WHEN (tag = 'fuzz') THEN 1 ELSE null END) has_fuzz
    FROM nv_tags
    GROUP BY entrieid
    HAVING has_rousseau != 0 and has_fuzz != 0
    ) tags ON (entries.id = tags.entrieid)
JOIN nv_images images ON (tags.entrieid = images.entrieid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:30:44.483

```
SELECT * FROM
nv_entries entries
INNER JOIN nv_tags tags ON  tags.entrieid = entries.id
INNER JOIN nv_images imgs ON imgs.entrieid = entries.id
WHERE tags.tag IN('rousseau','fuzz') 
```

但这将从三个表中提取所有数据。指定相对于表格的标签以避免冗余标签作为entrieid。

# windows - 可以在 Windows 8 Release Preview 中将 Metro 风格的应用程序捕捉到屏幕大小的一半吗？

> ID：11282339
> 
> 赞同：1
> 
> 时间：2012-07-01T13:25:51.827
> 
> 标签：windows, windows-8, microsoft-metro

是否可以在 Windows 8 Release Preview 中将 Metro 风格的应用程序捕捉到**屏幕**大小的一半？

在屏幕尺寸为 1920x1080 或 2560x1440 的台式机/笔记本电脑上，是否可以通过注册表或任何其他 hack 将 Metro 应用程序的大小/捕捉到恰好屏幕尺寸一半的“桌面应用程序”旁边……因为它在观看时非常方便电视/视频。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:53:39.060

不，无论整体屏幕分辨率如何，它都限制为 320 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:42:50.290

快照大小是固定的，即 320 像素宽。然而，填充视图不是固定的。填充视图基本上是 FullScreenLandscape - 320 像素（快照视图） - 20 像素（分隔符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T14:02:54.763

不，所有视图（快照、填充、完整）都是固定的。

[回复MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/eb103757-6a74-41e8-9bf2-fd24262ccec3)中有关调整屏幕分辨率的相关（不同）问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T02:18:20.480

不，尺寸是固定的。

您必须确保您的应用程序继续在快照视图和填充视图中工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T19:20:18.200

@LZH 大小固定是什么意思？显然它不是固定的。我可以支持不同的分辨率。因此，当我更改屏幕的分辨率大小时，快照视图大小是固定的（即 320 像素）。剩下的是填充视图。所以显然填充视图的大小是不固定的。

看看这个链接。 [http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx) 请阅读说明。它说填充视图是 1024 相对像素宽或更大..

[http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx) 此链接为您提供所有存在“捕捉和填充视图”的屏幕尺寸！

# c# - 从文本文件读取时应用程序崩溃

> ID：11282340
> 
> 赞同：0
> 
> 时间：2012-07-01T13:25:54.893
> 
> 标签：c#, windows-phone-7, text-files, streamreader

我试图`List<Image>`通过从文本文件中读取每一行的名称来填充 a 。文本文件如下所示：

```
image0
image1
image2
image
... 
```

以下代码使我的程序完全崩溃并使 Visual Studio 冻结。

```
int counter = 0;
string line = string.Empty;
StreamReader file = new StreamReader("ItemFile.txt");

while ((line = file.ReadLine()) != null)
{
     imageCollection.Add(new Image());
     imageCollection[counter].Source = new BitmapImage(new Uri("Images/" + line + ".png", UriKind.Relative));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:57:06.780

您不能在 WP7 上使用标准读/写机制。您必须使用 IsolatedStorage 类来做到这一点：

```
IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("ItemFile.txt", FileMode.Open, FileAccess.Read);
using (StreamReader reader = new StreamReader(fileStream))
{    //Visualize the text data in a TextBlock text
    while ((line = reader .ReadLine()) != null)
    {
         imageCollection.Add(new Image());
         imageCollection[counter].Source = new BitmapImage(new Uri("Images/" + line + ".png", UriKind.Relative));
    }
} 
```

如果您想从安装期间作为项目一部分添加到设备的文件中读取文本，请查看以下问题：[如何从项目文件夹中读取文件？](https://stackoverflow.com/questions/6531968/how-to-read-files-from-project-folders)

# python - 在 Django 中测试 django-rq ( python-rq ) 的最佳实践

> ID：11282346
> 
> 赞同：14
> 
> 时间：2012-07-01T13:27:04.510
> 
> 标签：python, django, testing, python-rq

我将开始在我的项目中使用 django-rq。

> Django 与 RQ 集成，这是一个基于 Redis 的 Python 队列库。

测试使用 RQ 的 django 应用程序的最佳实践是什么？

例如，如果我想将我的应用程序作为黑盒进行测试，在用户执行一些操作后，我想执行当前队列中的所有作业，然后检查我的数据库中的所有结果。我怎样才能在我的 django-tests 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T02:22:58.537

我刚刚发现[`django-rq`](https://github.com/ui/django-rq)，它允许您在测试环境中启动一个工作人员，该工作人员执行队列中的任何任务然后退出。

```
from django.test impor TestCase
from django_rq import get_worker

class MyTest(TestCase):
    def test_something_that_creates_jobs(self):
        ...                      # Stuff that init jobs.
        get_worker().work(burst=True)  # Processes all jobs then stop.
        ...                      # Asserts that the job stuff is done. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T19:07:31.807

我把我的`rq`测试分成几部分。

1.  测试我是否正确地将东西添加到队列中（使用模拟）。
2.  假设如果某些东西被添加到队列中，它最终会被处理。(`rq`的测试套件应该涵盖这一点)。
3.  测试，给定正确的输入，我的任务按预期工作。（正常代码测试）。

正在测试的代码：

```
def handle(self, *args, **options):
    uid = options.get('user_id')

    # @@@ Need to exclude out users who have gotten an email within $window
    # days.
    if uid is None:
        uids = User.objects.filter(is_active=True, userprofile__waitlisted=False).values_list('id', flat=True)
    else:
        uids = [uid]

    q = rq.Queue(connection=redis.Redis())

    for user_id in uids:
        q.enqueue(mail_user, user_id) 
```

我的测试：

```
class DjangoMailUsersTest(DjangoTestCase):
    def setUp(self):
        self.cmd = MailUserCommand()

    @patch('redis.Redis')
    @patch('rq.Queue')
    def test_no_userid_queues_all_userids(self, queue, _):
        u1 = UserF.create(userprofile__waitlisted=False)
        u2 = UserF.create(userprofile__waitlisted=False)
        self.cmd.handle()
        self.assertItemsEqual(queue.return_value.enqueue.mock_calls,
                              [call(ANY, u1.pk), call(ANY, u2.pk)])

    @patch('redis.Redis')
    @patch('rq.Queue')
    def test_waitlisted_people_excluded(self, queue, _):
        u1 = UserF.create(userprofile__waitlisted=False)
        UserF.create(userprofile__waitlisted=True)
        self.cmd.handle()
        self.assertItemsEqual(queue.return_value.enqueue.mock_calls, [call(ANY, u1.pk)]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T01:53:25.173

我提交[了一个补丁](https://github.com/ui/django-rq/commit/a57ee600a18a9c7cc796efc0cbe2d8a1eab4909c)，可以让你这样做：

```
from django.test impor TestCase
from django_rq import get_queue

class MyTest(TestCase):
    def test_something_that_creates_jobs(self):
        queue = get_queue(async=False)
        queue.enqueue(func) # func will be executed right away
        # Test for job completion 
```

这应该使测试 RQ 作业更容易。希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-22T22:37:40.070

我为这个案例所做的是检测我是否正在测试，并在测试期间使用 fakeredis。最后，在测试本身中，我将 redis worker 任务排入同步模式：

首先，定义一个检测您是否正在测试的函数：

```
TESTING = len(sys.argv) > 1 and sys.argv[1] == 'test'

def am_testing():
    return TESTING 
```

然后在使用redis排队任务的文件中，以这种方式管理队列。如果需要，您可以扩展 get_queue 以指定队列名称：

```
if am_testing():
    from fakeredis import FakeStrictRedis 
    from rq import Queue
    def get_queue():
        return Queue(connection=FakeStrictRedis())

else:
    import django_rq
    def get_queue():
        return django_rq.get_queue() 
```

然后，像这样将您的任务排入队列：

```
queue = get_queue()
queue.enqueue(task_mytask, arg1, arg2) 
```

最后，在您的测试程序中，以同步模式运行您正在测试的任务，以便它与您的测试在同一进程中运行。作为实践，我首先清除 fakeredis 队列，但我认为没有必要，因为没有工人：

```
from rq import Queue
from fakeredis import FakeStrictRedis

FakeStrictRedis().flushall()
queue = Queue(async=False, connection=FakeStrictRedis())
queue.enqueue(task_mytask, arg1, arg2) 
```

我的 settings.py 有正常的 django_redis 设置，所以 django_rq.getqueue() 在部署时使用这些：

```
RQ_QUEUES = {
    'default': {
        'HOST': env_var('REDIS_HOST'),
        'PORT': 6379,
        'DB': 0,
        # 'PASSWORD': 'some-password',
        'DEFAULT_TIMEOUT': 360,
    },
    'high': {
        'HOST': env_var('REDIS_HOST'),
        'PORT': 6379,
        'DB': 0,
        'DEFAULT_TIMEOUT': 500,
    },
    'low': {
        'HOST': env_var('REDIS_HOST'),
        'PORT': 6379,
        'DB': 0,
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T12:07:43.320

当队列中仍有作业时，您需要暂停测试。为此，您可以检查`Queue.is_empty()`，如果队列中仍有作业，则暂停执行：

```
import time
from django.utils.unittest import TestCase
import django_rq

class TestQueue(TestCase):

def test_something(self):
    # simulate some User actions which will queue up some tasks

    # Wait for the queued tasks to run
    queue = django_rq.get_queue('default')
    while not queue.is_empty():
        time.sleep(5) # adjust this depending on how long your tasks take to execute

    # queued tasks are done, check state of the DB
    self.assert(.....) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-31T18:31:00.097

以防万一这对任何人都有帮助。我使用带有自定义模拟对象的补丁来执行将立即运行的入队

```
#patch django_rq.get_queue
with patch('django_rq.get_queue', return_value=MockBulkJobGetQueue()) as mock_django_rq_get_queue:
    #Perform web operation that starts job. In my case a post to a url 
```

然后模拟对象只有一种方法：

```
class MockBulkJobGetQueue(object):

    def enqueue(self, f, *args, **kwargs):
        # Call the function
        f(
            **kwargs.pop('kwargs', None)
        ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T13:03:38.990

我遇到了同样的问题。此外，我在我的作业中执行了一些邮件功能，然后想检查 Django 测试邮箱是否有任何电子邮件。但是，由于使用 Django RQ，作业不会在与 Django 测试相同的上下文中执行，因此发送的电子邮件不会最终进入测试邮箱。

因此我需要在相同的上下文中执行作业。这可以通过以下方式实现：

```
from django_rq import get_queue
queue = get_queue('default')
queue.enqueue(some_job_callable)

# execute input watcher
jobs = queue.get_jobs()

# execute in the same context as test
while jobs:
    for job in jobs:
        queue.remove(job)
        job.perform()
    jobs = queue.get_jobs()

# check no jobs left in queue
assert not jobs 
```

在这里，您只需从队列中获取所有作业并直接在测试中执行它们。可以在 TestCase 类中很好地实现这一点并重用此功能。

# php - 在.. wordpress 中找不到类“SoapClient”

> ID：11282349
> 
> 赞同：0
> 
> 时间：2012-07-01T13:27:14.273
> 
> 标签：php, wordpress

我收到此错误：

```
Fatal error: Class 'SoapClient' not found in /hoe/roits/wp.com/wp-content/plugins/Aggmges/classitle.php on line 51 
```

据我了解，Worpress 似乎没有安装最新的 php。我可以做些什么来安装最新的 php 或使它的 SoapClient 可以在 worpress 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:54:20.730

[http://php.net/manual/en/soap.installation.php](http://php.net/manual/en/soap.installation.php)

如果没有，请安装 php soap 模块，并确保在 php.ini 中启用

# string - Excel 字符串 - 使用 VBA 搜索和排序

> ID：11282350
> 
> 赞同：1
> 
> 时间：2012-07-01T13:27:29.057
> 
> 标签：string, excel, vba, pivot

为我的任务寻找起点。

情况：

我有三个具有相同结构的 Excel 工作表，其中包含以下列：

```
|ID|SubID|SubName|Description|Link1|Link2|
|1|1|SubName 1|Desc SubName1|P00001|P00002|
|1|2|SubName 2|Desc SubName2|P00002|P00003|
|2|1|SubName 1|Desc SubName1|P00001|P00002| 
```

这里有一行在一个单元格内包含多个 P-Number：

```
|3|1|SubName 1|Desc SubName1|P00001,P00002,P00003|P00001,P00002| 
```

我现在想查看 Link1 列，并将这些值与前三列按排序顺序放置到“Link1”工作表中，如下所示：

```
|P-Number|ID|SubID|SubName|
|P00001|1|1|SubName 1|
|P00001|2|1|SubName 1|
|P00001|3|1|SubName 1|
|P00002|1|2|SubName 2|
|P00002|3|1|SubName 1|
|P00003|3|1|SubName 1| 
```

我想对 Link2 列做同样的事情，也将值放置到单独的工作表中。

下一步是将新工作表的 P 编号与一个类似于链接的字符串连接起来。这就是我迄今为止的工作。另一个想法是使 SubName 可单击并让它跳转到三个工作表之一中的相应名称。

我不确定宏是否是正确的选择，或者数据透视表也可以解决问题。

任何想法表示赞赏。谢谢。

**更新**：我试图将这个概念合并到我的主宏中，在那里我还处理上面提到的列。但是，由于我有几个循环贯穿这部分，因此输出行将被列的最后一个 P 编号覆盖。我使用这个子：

```
 Sub PrintArray(Data As Variant, Cl As Range)
    Cl.Resize(UBound(Data, 1), UBound(Data, 2)) = Data
  End Sub 
```

这要求测试：

```
PrintArray NewArray, ActiveWorkbook.Worksheets("Link 1").Range("A2") 
```

如何在不必在代码中使用循环的情况下将每个 P 编号“保存”到新工作表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:54:01.133

数据透视表不能将 1 个单元格拆分为多行，因此 VBA 解决方案的起点是：

1.  将输入范围加载到数组中 ( `my_array = Range(...).Value2`)
2.  对于每一行，拆分 Link1 ( `link_array = Split(my_array(current_row, 5), ",")`)
3.  对于每个链接，将链接和其他值附加到结果数组中
4.  将结果放在工作表上
5.  对结果范围进行排序

# android - 如何以编程方式取消设置默认主屏幕？

> ID：11282351
> 
> 赞同：1
> 
> 时间：2012-07-01T13:27:33.287
> 
> 标签：android, android-intent

我有一个像主屏幕一样的活动。我的问题是如何以编程方式询问用户希望哪个主屏幕成为默认屏幕？我不想将我的主屏幕设置为默认值，而是向用户显示对话框以选择他想要的主屏幕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T13:35:15.980

> 我的回答是如何以编程方式询问用户希望哪个主屏幕成为默认屏幕？

唯一的方法是通过启动`ACTION_MAIN`/`CATEGORY_HOME`活动来触发主屏幕出现。如果要在您的主屏幕、设备默认主屏幕和其他屏幕之间做出选择，用户将获得一个选择器，并且能够选择要显示的主屏幕。他们还将获得“将此作为此操作的默认设置”复选框。但是，这也具有将用户带到他们选择的主屏幕的效果，并且他们不必设置默认值。

我的建议是让你别管这个。无论如何，他们下次按下 HOME 按钮时会看到这个选择器，然后他们会期望转到他们选择的主屏幕。

# php - HTMLHelper addCrumb 方法不可用

> ID：11282355
> 
> 赞同：0
> 
> 时间：2012-07-01T13:27:50.030
> 
> 标签：php, cakephp, html-helper

我想在我的布局中使用 addCrumb 方法来自动添加控制器链接。我试过了，但布局中的 Html-Helper-Object 不包含 addCrumb 函数。然后我尝试在我的 AppController 中使用 beforeFilter 中的函数来设置链接，但这也不起作用（没有给出错误）。最后我尝试使用一个元素来实现这一点，但这并没有起作用（找不到错误方法）。

我正在使用 CakePHP 2.0 - 有没有人想办法解决我的问题（无需手动更改 *.ctp 文件）？

PS：在我的特定 .ctp 文件中使用 $this->html->addCrumb() 效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:31:16.367

要访问诸如 addCrumb 之类的 HTML 帮助器方法，您必须确保为要在其中使用它的任何操作加载帮助器。只需`$this->helpers[] = 'Html';`在您的控制器中执行（在一个操作中或在您的 AppController 中通用地添加它）。

# plone - Overlay 表示验证错误后重新加载时未定义 jQuery

> ID：11282359
> 
> 赞同：3
> 
> 时间：2012-07-01T13:28:21.513
> 
> 标签：plone

我有一个带有 JavaScript 的表单视图，它在加载时隐藏了它的一些字段。如果在我提交时出现验证错误，则表单会按照应有的错误消息重新加载。重新加载后，脚本被执行并且字段也被隐藏。

但是当我使用表单作为覆盖时，它会失败。我打开覆盖，执行脚本并隐藏字段。我发布表单，出现验证错误，并重新加载表单并显示错误消息，但这次隐藏字段的脚本没有执行。

Firebug 说四次没有定义 jQuery。但是错误不在我的代码中，而是在plone生成的javascript中。该表单有四个日期字段，它们生成产生错误的内联代码：

```
<script type="text/javascript">
    if (jQuery().dateinput) { ... }
</script> 
```

在这种情况下重新加载表单后，我该怎么做才能执行我的脚本？

我正在使用克隆 4.1.4。

提前致谢。

# java - OpenJDK7 与 Oracle JDK 的更新

> ID：11282360
> 
> 赞同：1
> 
> 时间：2012-07-01T13:28:24.830
> 
> 标签：java, openjdk, java-7

这个问题的答案：[OpenJDK 的 Java 7 更新在哪里？](https://stackoverflow.com/questions/8562293/where-are-the-java-7-updates-for-openjdk)断言 OpenJDK 和 Oracle JDK 有不同的更新策略。尤其是 Oracle JDK 的安全更新并不总是移植到 OpenJDK。通过查看 JDK7 u5 的 Oracles Release Notes，我并没有变得更聪明。此处列出的与 OpenJDK 相关的错误之一 (7166687) 可以在 OpenJDK 的提交消息中找到。但是我找不到任何我搜索过的 CVE 编号。它们与 OpenJDK 无关吗？我错过了什么？

长话短说：OpenJDK 7 和 Oracle JDK 7 是否获得相同的更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:51:38.747

我对您链接到的问题的答案的阅读是 OpenJDK*没有*更新。

或者至少，除非规范发生变化，否则 Oracle 不会发布任何新的 OpenJDK 版本，因此大概不会对其源代码做出任何贡献。任何关于 OpenJDK 的工作都必须来自非 Oracle 社区的贡献。

# javascript - 在鼠标按下期间获取鼠标位置？

> ID：11282366
> 
> 赞同：12
> 
> 时间：2012-07-01T13:28:57.487
> 
> 标签：javascript, jquery

按住按钮时如何连续获取鼠标的位置？

我知道我可以做到：

```
<element onclick="functionName(event)"></element>
<script>
function functionName(e){
e.pageX
e.pageY
//do stuff
}
</script> 
```

而且我知道您可以使用 onmousedown 事件，但是在仍然按住按钮的同时如何连续获取位置？

奇怪的是，我在任何地方都找不到这个。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-01T13:42:04.003

无论如何，我建议使用`mousemove`事件并检查`which`事件属性是否等于`1`（即按下鼠标左键）：

```
$("element").on("mousemove", function(e) {
    if (e.which == 1) {
        console.log(e.pageX + " / " + e.pageY);
    }
});​ 
```

**演示：http:** [//jsfiddle.net/HBZBQ/](http://jsfiddle.net/HBZBQ/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T13:43:20.983

[这](http://jsfiddle.net/uXqB3/)是给你的 JSFiddle。您需要将鼠标按钮的状态存储在一个变量中。

jQuery：

```
$(document).ready(function() {
    $(document).mousedown(function() {
        $(this).data('mousedown', true);
    });
    $(document).mouseup(function() {
        $(this).data('mousedown', false);
    });

    $(document).mousemove(function(e) {
        if($(this).data('mousedown')) {
            $('body').text('X: ' + e.pageX + ', Y: ' + e.pageY);
        }
    });
});​ 
```

在这里，我将鼠标按钮的向上或向下状态存储在`document`using 中`$(document).data()`。我本可以使用全局变量，但以这种方式存储它会使代码更简洁。

在您的`$.mousemove()`功能中，仅当鼠标按下时才执行您想要的操作。在上面的代码中，我只是打印鼠标的位置。

# android - 可点击的网站图像不适用于 iphone 和 android 设备

> ID：11282367
> 
> 赞同：2
> 
> 时间：2012-07-01T13:29:06.900
> 
> 标签：android, iphone, html, image, clickable

我为我的网站使用平台 virb.com，但在让我的可点击图像在 iPhone 和 Android 移动设备上工作时遇到问题。有些链接有时会起作用，然后它们根本不起作用。这会影响网站上的两个页面 - 这是我为可点击图像创建的页面链接和 HTML 代码。

[http://stonewalters.com/world-keeps-turning](http://stonewalters.com/world-keeps-turning)

```
<div align="left"><img src="http://dl.dropbox.com/u/31856944/Virb/Splash_Title.png" target="_blank" title="World Keeps Turning - New Single" />
<div><img src="http://dl.dropbox.com/u/31856944/Virb/splash_body-2.jpg" usemap="#Map" height="391px" width="620px" /><map name="Map" id="Map">
<area shape="rect" coords="373,351,616,388" href="http://stonewalters.com/download-to-unlock" target="_blank" title="Download to unlock new music from Stone!" />
</map>
</div>

<div><img src="http://dl.dropbox.com/u/31856944/Virb/splash_share-2.png" usemap="#Map 2" height="31px" width="620px" /><map name="Map" id="Map 2">
<area shape="rect" coords="306,0,457,29" <a class="labs_facebook" href="http://api.awe.sm/url/share?channel=facebook&v=2&key=67967a8b27d8923cccd8531514f22fdac3921f86162e7c45708a0fefa509faab&tool=w80Xzb&url=http%3A%2F%2Flabs.topspin.net%2Flinkbuilder%2Fconfirm.php%3Fsessionid%3D72a01b48b5198ffc16827b270b8586b4%26fb%3D2&campaign=stonewalters-worldkeepsturning-72a01b48b5198ffc16827b270b8586b4" target="_blank" title="Share on Facebook" /></a>
<area shape="rect" coords="462,0,613,29" <a class="labs_twitter" href="http://api.awe.sm/url/share?channel=twitter&v=2&key=67967a8b27d8923cccd8531514f22fdac3921f86162e7c45708a0fefa509faab&tool=w80Xzb&url=http%3A%2F%2Flabs.topspin.net%2Flinkbuilder%2Fconfirm.php%3Fsessionid%3D72a01b48b5198ffc16827b270b8586b4%26fb%3D2&destination=http://twitter.com/share?text=Check+out+Stone%27s+latest+song+%27World+Keeps+Turning%27+and+get+a+free+download+of+it+now%21+ -%26url=AWESM_TARGET%26via=StoneWalters&campaign=stonewalters-worldkeepsturning-72a01b48b5198ffc16827b270b8586b4" target="_blank" title="Share on Twitter" /></a>
</map>
</div> 
```

[http://stonewalters.com/download-to-unlock](http://stonewalters.com/download-to-unlock)

```
<div align="center"><img src= "http://dl.dropbox.com/u/31856944/Virb/body_download-to-unlock-top-610.png" width="610px" height="252px" usemap="#Map"/></a>
<br>
<br>
</div>
<div align="center">
<script type="text/javascript" src="http://cdn.topspin.net/javascripts/topspin_core.js?aId=1336&timestamp=1341070107"></script><div class="topspin-widget topspin-widget-email-for-media"><object type="application/x-shockwave-flash" width="300" height="80" id="TSWidget153863" data="http://cdn.topspin.net/widgets/email2/swf/TSEmailMediaWidget.swf?timestamp=1341070107" bgColor="#000000">  <param value="always" name="allowScriptAccess" />  <param name="allowfullscreen" value="true" />  <param name="quality" value="high" />  <param name="movie" value="http://cdn.topspin.net/widgets/email2/swf/TSEmailMediaWidget.swf?timestamp=1341070107" />  <param name="flashvars" value="widget_id=http://cdn.topspin.net/api/v1/artist/1336/email_for_media/153863?timestamp=1341070107&amp;theme=white&amp;highlightColor=0x000000" /></object></div>
<div align="center"><img src="http://dl.dropbox.com/u/31856944/Virb/body_download-to-unlock-bottom-610.png" width="610px" height="417px" usemap="#Map 2" /></div>
<map name="Map" id="Map">
<area shape="rect" coords="138,25,474,49" href="http://www.stonewalters.com/download-to-unlock" title="Download to unlock music & join Stone's Inner Circle"/>
</map>
<map name="Map" id="Map 2">
<area shape="rect" coords="500,0,608,30" href="http://www.stonewalters.com/world-keeps-turning" title="World Keeps Turning - New Single"/>
<area shape="rect" coords="228,321,396,368" href="https://www.e-junkie.com/ecom/gb.php?c=cart&i=SIC_WKT&cl=217252&ejc=2" target="ej_ejc" class="ec_ejc_thkbx" onClick="javascript:return EJEJC_lc(this);" target="_blank" title="Join Stone's Inner Circle"/>
<area shape="rect" coords="500,386,608,416" href="http://www.stonewalters.com/world-keeps-turning" title="World Keeps Turning - New Single"/>
</map>
</div> 
```

上面的代码在 PC 或 MAC 上查看网站时有效，所以我不确定是什么导致了问题。任何建议/意见将不胜感激，因为我不知道还能做什么。谢谢！

直接使用上面的代码，如果我将代码放在这里：

```
<map name="Map" id="Map 2" style="cursor:pointer"> 
```

无法识别此地图中每个图像的坐标。整个图像（包含 3 个坐标）成为一个可点击的大图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:44:44.230

Mobile Safari 将触摸事件传递给那些明显可触摸的东西，例如链接或按钮。但是，如果您使用 Javascript 将触摸事件添加到其他 html 元素（如`<img>`or`<div>`标记），您可以通过设置样式让 Safari 知道它是可触摸的：

```
cursor:pointer; 
```

在元素上或元素上的 css 类中。

如果您可以将 css 类添加到您的文件之一，则可以在 head 部分执行类似的操作：

```
<script>
    .mobil-click-element {
        pointer:cursor;
    }
</script>

 // Then put the class on the element you want to be clickable
 <div class="mobil-click-element">some other html</div> 
```

如果您无法编辑 css，您可以将样式直接放在元素上，如下所示

```
 <img style="cursor:pointer" ... /> 
```

# javascript - 使用 Jquery 的非触发事件

> ID：11282371
> 
> 赞同：0
> 
> 时间：2012-07-01T13:29:49.177
> 
> 标签：javascript, jquery

我在使用 jquery 时遇到了一个奇怪的问题。我在隐藏的 div 中有一个 div。我脚本中的第一个事件包括单击一个按钮，以将隐藏的 div 中的 div 附加到 DOM 中的 div 中。在这个阶段，新的 div apoending 被 chrome 检查器正确检测到。但是当我点击它时，什么也没有发生。这是代码：

```
<div id="toappend" class="class">to append to</div>
<button>button</button>
<div class=invisible>
    <div id="id">hello world</div>
</div> 

<script>

    $('button').click(function{
        $('#toappend').append($('#id'));
    }); 

    $('#id').click(function{
        $('.class').removeClass();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T13:31:17.703

您的函数出现语法错误：

```
$('button').click(function{
$('#id').click(function{
//                     ^------------ missing () 
```

**应该：**

```
$('button').click(function (){
$('#id').click(function (){
//                      ^ ------------- Here they are. 
```

如果您查看控制台，您会在那里看到错误。

[**现场演示**](http://jsfiddle.net/rHADp/)

# mysql - EC2 Amazon Linux AMI MySQL CPU @ 62% 空闲时？

> ID：11282376
> 
> 赞同：3
> 
> 时间：2012-07-01T13:30:37.007
> 
> 标签：mysql, linux, amazon-ec2, cpu-usage

我在 Amazon Linux AMI 上运行 MySQL。没有任何关联。没有使用 MySQL 的连接和运行其他应用程序。它完全处于空闲状态，但是，`top`是否报告 mysql 正在使用 62% 的 CPU？为什么会发生这种情况，我该如何解决？

```
Cpu(s):  0.2%us,  0.2%sy,  0.0%ni, 97.8%id,  0.0%wa,  0.0%hi,  0.0%si,  1.7%st
Mem:   1738504k total,   390708k used,  1347796k free,    56888k buffers
Swap:   917500k total,        0k used,   917500k free,   229804k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 2959 mysql     20   0  466m  39m 5244 S 62.2  2.3   4:00.67 mysqld
    1 root      20   0 19252 1504 1212 S  0.0  0.1   0:00.20 init
    2 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kthreadd 
```

没有连接...

```
mysql> show processlist;
+----+------+-----------+------+---------+------+-------+------------------+
| Id | User | Host      | db   | Command | Time | State | Info             |
+----+------+-----------+------+---------+------+-------+------------------+
|  5 | root | localhost | NULL | Query   |    0 | NULL  | show processlist |
+----+------+-----------+------+---------+------+-------+------------------+ 
```

更新：我的问题肯定与 Lead Second 错误有关。向[nico-ekito 致敬](https://stackoverflow.com/users/320180/nico-ekito)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:50:32.197

我唯一能想到的就是以 root 用户身份使用 strace 检查 mysqld 到底在做什么：

```
 strace -p 2959 
```

通常，strace 应该立即阻塞并显示对 select() 的调用，因为 mysqld 应该正在等待连接。

调用应该是这样的：

```
 select(SOCKETNO, [OTHER_FDs], NULL, NULL, NULL) 
```

尤其重要的是第四个参数，它是一个超时时间。如果为 NULL，则表示 mysqld 将一直休眠，直到有人连接。如果不为NULL，则表示mysqld会等待指定的时间，然后做一些维护工作。一个非常小的时间间隔可以解释 CPU 消耗。

我相信 MySQL 总是使用 NULL（无限）超时。这是有道理的，这就是我现在能够达到的 mysqlds 的行为方式。

但是，可能有一些连接处理问题会阻止 select 再次休眠。检查此行为是在 mysqld 启动时出现，还是在有人连接后出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:46:20.153

结束这个问题。我的问题确实与闰秒惨败有关。

# php - 获取完整的 URL 地址

> ID：11282380
> 
> 赞同：0
> 
> 时间：2012-07-01T13:30:48.437
> 
> 标签：php, url

我想在 php 脚本中获取完整的 URL 地址，请告诉我，这段代码总是给出正确的 URL？或者在某些情况下，这段代码给了我们错误的 URL？

```
 if (empty($_SERVER['HTTPS'])) {
 $s = "";
 }
 else {
 $s = "s";
 }
 $url =  "http".$s."://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:34:31.417

我认为假设您使用标准端口 80 应该没问题，否则您可能也想包含它。

```
$uri = 'http'. ($_SERVER['HTTPS'] ? 's' : null) .'://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:36:32.537

你忘记了端口号。这是接收当前页面 URL 的完整功能代码。

```
function selfURL() {
  $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : "";
  $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s;
  $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);
  return $protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI'];
} 
```

# c# - 使用类似的操作数

> ID：11282383
> 
> 赞同：1
> 
> 时间：2012-07-01T13:31:10.700
> 
> 标签：c#, ms-access, ms-access-2007

我有这个 sql 查询

```
"select * from table where name like ?" 
```

但我希望它可以作为

```
"select * from table where name like ?*  " 
```

请问是什么查询

我正在使用 c# 访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:41:12.733

添加`*`到您的参数。即，而不是

```
myCommand.Parameters.AddWithValue("@search", searchValue); 
```

利用

```
myCommand.Parameters.AddWithValue("@search", searchValue + "*"); 
```

保持你的 SQL 不变。

如果要进行通配符搜索（而不是“文字`*`”），请注意 ADO.NET 使用`%`，而不是`*`：

```
myCommand.Parameters.AddWithValue("@search", searchValue + "%"); 
```

# r - R中的KL散度使用以2为底的对数

> ID：11282385
> 
> 赞同：1
> 
> 时间：2012-07-01T13:31:17.437
> 
> 标签：r

我想在 R 中找到两个分布的 JS 散度。[维基百科](http://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)说 Jensen-Shannon 散度以 1 为界，因为其中一个使用以 2 为底的对数。我希望我得到的 JS 分歧介于 0 和 1 之间。我在 R 中使用 KLdiv 函数来查找 JS：

> ```
> JSD(P || Q)= 1/2*D(P || M) + 1/2*D(Q || M) 
> ```
> 
> 其中 Kullback–Leibler 散度 KLdiv(P,M) = D(P || M)

但我想指定我需要以 2 为底的对数。看起来 KLdiv 不允许我指定要使用的日志。关于如何做到这一点的任何线索？

好的，这是在 2 个分布之间查找 JSdivergence 的 R 代码..

```
library(flexmix)
m <- 0.5 *(dist1 + dist2) #JSD(P||Q)=0.5*D(P||M) + 0.5*D(Q||M), where M=0.5*(P+Q)
Dpm <- KLdiv(cbind(dist1,m))
Dqm <- KLdiv(cbind(m,dist2))
js <- 0.5*Dpm + 0.5*Dqm 
```

我想要一个介于 0 和 1 之间的 JS 值，根据[wiki](http://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)，只有当我采用以 2 为底的对数时才有可能。如何使用现有的 R 代码执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T18:13:07.977

一般来说，它认为

![在此处输入图像描述](../Images/055cf273a50e3cbfa38f79a7240c9418.png)

这意味着如果您想计算 b 以 a 为底的对数，但您只有一个函数可以计算任何数字以 x 为底的对数，您仍然可以轻松地获得该数字以 a 为底的对数。

因此：

![在此处输入图像描述](../Images/260714054e81bfe3395168e1e29a2f92.png)

因此，如果您想确定关于基数 x 的 KL 散度，您只需将计算与基数的 KL 散度的结果除以`e`x 到基数的对数 `e`（或 KLdiv 的实现使用的任何基数）。

顺便说一句，您忘记提及您使用的是哪个 KLdiv 函数。

其次，通过查看您的 R 代码，我认为您可能想重新阅读 JS 分歧，特别是 M 的定义。

# actionscript-3 - 时间 慢/加速 上电

> ID：11282390
> 
> 赞同：0
> 
> 时间：2012-07-01T13:31:30.890
> 
> 标签：actionscript-3, flash, scripting

我正在创建一个收集游戏，并且我想创建一个时间慢/加速通电。关于如何在 Flash/AS3 中做到这一点的任何想法？

我想到的一种方法是简单地改变帧速率。我可以减慢帧速率。但是当我尝试将帧速率提高到 60 以上时，Flash 将其限制为 60。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T18:00:19.113

我喜欢做基于时间的运动而不是基于帧的运动，以获得更好的一致性。一般概念是检查帧之间经过的时间量，并以此为基础移动，而不是可以交替的帧（例如，您可以有 60FPS 一段时间，然后它会减慢到 30FPS）。例如，您可以根据移动所经过的时间进行简单的计算，`player.x += player.speed * timeDiff`但是如果帧之间经过的时间恰好非常大，则可能会导致奇怪的情况（例如，由于您正在移动，玩家最终可能会错过很多碰撞他在一个大动作中）。相反，我喜欢使用游戏循环根据帧之间经过的时间量移动玩家 X 次，确保正确检查碰撞和任何其他游戏循环事件。

这也有一个优点，就是容易调整速度。

这是基本概念：

```
private var speedMultiplier:int = 100;//100 normal speed, 0 paused
private var currRealTime:int = getTimer();
private var currGameTime:int = currRealTime;
private var globalLastTime:int = currRealTime;      
private var totalTimeDiffRemainder:int = 0;
private var loopTime:int = 20;//every 20 ms run our actions

public function getGameTimer():int
{           
    return currGameTime;
}       

private function updateGameTime():void
{
    var realTime:int = getTimer();
    currGameTime = currGameTime + speedMultiplier/100*(realTime - currRealTime);
    currRealTime = realTime;
}

private function runEvents(event:Event):void
{//ENTER_FRAME event
    var totalTimeDiff:int = getGameTimer() - globalLastTime + totalTimeDiffRemainder;
    globalLastTime = getGameTimer();
    while (totalTimeDiff > loopTime)
    {//every 20 ms run all our actions          
        totalTimeDiff -= loopTime;
        //run all your game loop events here, such as collision checks
    }
    totalTimeDiffRemainder = totalTimeDiff;
    updateGameTime();
} 
```

因此，每次 ENTER_FRAME 事件触发时，我们将检查自上次 ENTER_FRAME 事件以来经过的时间，然后每 20 毫秒运行一次我们的操作，并将剩余时间传递给下一个 ENTER_FRAME 事件。例如，如果自上次 ENTER_FRAME 以来已经 47 毫秒，我们将运行我们的操作两次并将剩余的 7 毫秒传递给下一个 ENTER_FRAME 事件。

为了暂停、减慢或加速游戏，您所要做的就是修改 speedMultiplier。将 speedMultiplier 更改为 0 会暂停游戏，50 是半速，100 是正常速度，200 是双速，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:12:13.500

我相信执行此操作的一般方法是使用类似 MVC 的设置，其中您的模型保存游戏元素的所有数据（角色位置/方向、敌人、动态地图元素），然后控制器正在修改模型。通过控制器以这种方式修改模型，您可以将乘数添加到模型中，并在控制器更新模型以获取“物理”或其他修改游戏中的动态元素时使用乘数。

大致：

模型

```
public var speedMultiplier:Number=1;
public var playerXSpeed:Number;
public var playerYSpeed:Number; 
```

控制器（我假设您创建了一个控制器类并将视图传递给构造函数，并正在监听来自控制器中视图的事件）。

```
private function enterFrame_handler(event:Event):void
{
    var playerSprite:Sprite = mainView.playerSprite;
    playerSprite.x += playerXSpeed*speedMultiplier; //only problem I can see here is your player skipping past certain elements, to avoid this you could use a loop to make each motion and do checks but it's more CPU intensive
    //var enemySprites:Vector<EnemySprite>;
    //other game physics here, reduce speed due to drag, fix any invalid values etc.
} 
```

**编辑**

实际上，在考虑这一点时，虽然我通常喜欢自己使用 MVC 设置，因为它允许一个单独的精灵来完成所有的绘图；您也可以使用此处显示的 speedMultiplier 的相同概念，而不必更改任何软件模式。如果您最终需要使用循环来执行此操作，因为您需要它检查它在对象移动时会碰到的每个点，您可能需要将默认 speedMultiplier 设置为 10 这样您可以将其设置为 1通过所有相同的检查来获得 1/10 的速度，因为它会在 10 是正常速度时获得（这里再次唯一的问题是它必须为每次更新执行 10 次任何计算，在这种情况下，您可能想要使用计时器而不是帧速率来控制整体计算速度）。

# javascript - IE8 在 pasteHtml 后更改 href

> ID：11282392
> 
> 赞同：1
> 
> 时间：2012-07-01T13:31:50.280
> 
> 标签：javascript, internet-explorer

在 IE8 中的 designMode 激活 iframe 中插入链接 (a) 元素时，我必须解决以下问题：

可以说我有这个字符串：

```
<a href="test" target="_self">totest</a> 
```

当使用 pasteHtml() 插入时，IE8 将其变为：

```
<A href="http://servername/pathToScript/test" target=_self>totest</A> 
```

我不希望服务器路径只有我提供的href（测试）我想我可以使用replace（）方法来删除服务器路径，但是有没有更通用的解决方案可以以某种方式关闭它或其他什么？

# glsl - 在像素着色器中可以实现什么样的模糊？

> ID：11282394
> 
> 赞同：10
> 
> 时间：2012-07-01T13:32:22.363
> 
> 标签：glsl, shader, gpu, hlsl, pixel-shader

高斯、框、径向、定向、运动模糊、缩放模糊等

我读到高斯模糊可以在可以在像素着色器中实现的通道中分解，但找不到任何样本。

是否可以假设任何与自身以外的像素相关的效果都不能在像素着色器中实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T13:56:47.607

只要您能够将信息传递给着色器，您就可以实现一切。

在这种情况下，诀窍是执行多次渲染。最终着色器将采用一定数量的采样器，即非模糊源，用于计算模糊值。

例如，可以使用多个纹理来模拟基于累积缓冲区的效果。

* * *

要实现高斯模糊，请将场景渲染到帧缓冲区对象上，并在颜色附件上附加纹理。这是第一关。

作为第二遍，渲染一个带纹理的四边形，其中纹理是在第一步中生成的。纹理坐标从顶点阶段传递到片段阶段，在四边形上插值。确实，每个片段都有纹理坐标；为每个坐标应用偏移量以获取基础坐标周围的文本，并执行高斯模糊。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T11:06:31.850

用于后处理效果的通用“管道”

```
setRenderTarget(myRenderTarget); // or FBO in GL
drawAwsomeScene();

setdefaultRenderTarget();   // draw to screen...

blurShader.use();
// shader needs to know what is the size of one pixel on the screen
blurShader.uniform2f("texelSize", 1/screenW, 1/screenH);

// set the texture with scene rendered...
setRenderTargetTexture();

drawFullScreenQuad();

// other effects... 
```

有用的模糊示例/教程：[http ://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/](http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T14:40:03.057

我实现了一个通用的卷积片段着色器（像素着色器）

```
#version 120

uniform sampler2D texUnit;
uniform float[9] conMatrix;
uniform float conWeight;
uniform vec2 conPixel;

void main(void)
{
    vec4 color = vec4(0.0);
    vec2 texCoord = gl_TexCoord[0].st;
    vec2 offset = conPixel * 1.5;
    vec2 start = texCoord - offset;
    vec2 current = start;

    for (int i = 0; i < 9; i++)
    {
        color += texture2D( texUnit, current ) * conMatrix[i]; 

        current.x += conPixel.x;
        if (i == 2 || i == 5) {
            current.x = start.x;
            current.y += conPixel.y; 
        }
    }

    gl_FragColor = color * conWeight;
} 
```

对于模糊：

```
where conPixel is {1/screen width, 1/screen height}
where conMatrix is {1.0, 1.0, 1.0, 1.0, 1.0, 1.0,  1.0, 1.0, 1.0}
where conWeight is 1.0 / 9.0
where texUnit is 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-25T09:47:35.593

实现场景模糊效果的常见实现是[高斯模糊](https://en.wikipedia.org/wiki/Gaussian_blur)，通过 2 次后处理实现。
这是一个近似值，它首先在第 1 遍中沿 X 轴模糊，在第 2 遍中沿 Y 轴模糊（反之亦然）。这为强模糊带来了更好的性能。
模糊着色器使用[正态（或高斯）分布](https://en.wikipedia.org/wiki/Normal_distribution)。对于 2 个通道，使用相同的着色器程序，2 个通道具有单独的方向设置，存储在 uniform 中`vec2 u_dir`。模糊效果的强度可以随着`float u_sigma`[0.0, 1.0] 范围内的 uniform 变量而变化。
场景被写入帧缓冲区，纹理绑定到颜色平面。屏幕空间通道使用纹理作为输入以沿 X 轴模糊输出。X 轴模糊通道写入另一个帧缓冲区，纹理绑定到其颜色平面。此纹理用作输入，用于沿 Y 轴的最终模糊过程。
模糊算法的详细描述可以在[OpenGL es 2.0 Gaussian blur on triangle](https://stackoverflow.com/questions/44779142/opengl-es-2-0-gaussian-blur-on-triangle)或[LeranOpenGL-Gaussian blur](https://learnopengl.com/Advanced-Lighting/Bloom)问题的答案中找到。

*模糊*顶点着色器

```
#version 330

in  vec2 inPos;
out vec2 pos;

void main()
{
    pos = inPos;
    gl_Position = vec4( inPos, 0.0, 1.0 );
} 
```

*模糊*片段着色器

```
#version 330

in vec2 pos;

uniform sampler2D u_texture;
uniform vec2      u_textureSize;
uniform float     u_sigma;
uniform vec2      u_dir;

float CalcGauss( float x, float sigma )
{
    if ( sigma <= 0.0 )
        return 0.0;
  return exp( -(x*x) / (2.0 * sigma) ) / (2.0 * 3.14157 * sigma);
}

void main()
{
    vec2 texC     = pos.st * 0.5 + 0.5;
    vec4 texCol   = texture2D( u_texture, texC );
    vec4 gaussCol = vec4( texCol.rgb, 1.0 );
    vec2 step     = u_dir / u_textureSize;
    for ( int i = 1; i <= 32; ++ i )
    {
        float weight = CalcGauss( float(i) / 32.0, u_sigma * 0.5 );
        if ( weight < 1.0/255.0 )
            break;
        texCol    = texture2D( u_texture, texC + step * float(i) );
        gaussCol += vec4( texCol.rgb * weight, weight );
        texCol    = texture2D( u_texture, texC - step * float(i) );
        gaussCol += vec4( texCol.rgb * weight, weight );
    }
    gaussCol.rgb = clamp( gaussCol.rgb / gaussCol.w, 0.0, 1.0 );
    gl_FragColor = vec4( gaussCol.rgb, 1.0 );
} 
```

另请参阅以下问题的答案：

*   [暂停时的快速高斯模糊](https://stackoverflow.com/questions/46745199/fast-gaussian-blur-at-pause)
*   [OpenGL es 2.0 三角形上的高斯模糊](https://stackoverflow.com/questions/44779142/opengl-es-2-0-gaussian-blur-on-triangle)
*   [如何在 OpenGL ES 2.0 中获得“发光”着色器效果？](https://stackoverflow.com/questions/8166384/how-to-get-a-glow-shader-effect-in-opengl-es-2-0)

查看 WebGL 示例：

```
var readInput = true;
function changeEventHandler(event){
readInput = true;
}

(function loadscene() {

var resize, gl, progDraw, progBlur, vp_size, blurFB;
var canvas;
var camera;
var bufCube = {};
var bufQuad = {};
var shininess = 10.0;
var glow = 10.0;
var sigma = 0.8;
var radius = 1.0;

function render(deltaMS){

    if ( readInput ) {
        //readInput = false;
        var sliderScale = 100;
        sigma     = document.getElementById( "sigma" ).value / sliderScale;
        radius    = document.getElementById( "radius" ).value / sliderScale;
    }

    vp_size = [canvas.width, canvas.height];
    camera.Update( vp_size );

    gl.enable( gl.DEPTH_TEST );
    gl.clearColor( 0.0, 0.0, 0.0, 1.0 );
    gl.clear( gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT );

    // set up framebuffer
    gl.bindFramebuffer( gl.FRAMEBUFFER, blurFB[0] );
    gl.viewport( 0, 0, blurFB[0].width, blurFB[0].height );
    gl.clear( gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT );

    // setup view projection and model
    var prjMat = camera.Perspective();
    var viewMat = camera.Orbit();
    var modelMat = IdentM44();
    modelMat = camera.AutoModelMatrix();

    // set up draw shader
    ShProg.Use( progDraw.prog );
    ShProg.SetM44( progDraw.prog, "u_projectionMat44", prjMat );
    ShProg.SetM44( progDraw.prog, "u_modelViewMat44", Multiply(viewMat, modelMat) );
    ShProg.SetF1( progDraw.prog, "u_shininess", shininess );

    // draw scene
    VertexBuffer.Draw( bufCube );

    // set blur-X framebuffer and bind frambuffer texture
    gl.bindFramebuffer( gl.FRAMEBUFFER, blurFB[1] );
    gl.viewport( 0, 0, blurFB[1].width, blurFB[1].height );
    gl.clear( gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT );
    var texUnit = 1;
    gl.activeTexture( gl.TEXTURE0 + texUnit );
    gl.bindTexture( gl.TEXTURE_2D, blurFB[0].color0_texture );

    // set up blur-X shader
    ShProg.Use( progBlur.prog );
    ShProg.SetI1( progBlur.prog, "u_texture", texUnit )
    ShProg.SetF2( progBlur.prog, "u_textureSize", vp_size );
    ShProg.SetF1( progBlur.prog, "u_sigma", sigma )
    ShProg.SetF1( progBlur.prog, "u_radius", radius )
    ShProg.SetF2( progBlur.prog, "u_dir", [1.0, 0.0] )

    // draw full screen space
    gl.enableVertexAttribArray( progBlur.inPos );
    gl.bindBuffer( gl.ARRAY_BUFFER, bufQuad.pos );
    gl.vertexAttribPointer( progBlur.inPos, 2, gl.FLOAT, false, 0, 0 ); 
    gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, bufQuad.inx );
    gl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );
    gl.disableVertexAttribArray( progBlur.inPos );

    // reset framebuffer and bind frambuffer texture
    gl.bindFramebuffer( gl.FRAMEBUFFER, null );
    gl.viewport( 0, 0, vp_size[0], vp_size[1] );
    gl.clear( gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT );
    texUnit = 2;
    gl.activeTexture( gl.TEXTURE0 + texUnit );
    gl.bindTexture( gl.TEXTURE_2D, blurFB[1].color0_texture );

    // set up pst process shader
    ShProg.SetI1( progBlur.prog, "u_texture", texUnit )
    ShProg.SetF1( progBlur.prog, "u_radius", radius )
    ShProg.SetF2( progBlur.prog, "u_dir", [0.0, 1.0] )

    // draw full screen space
    gl.enableVertexAttribArray( progBlur.inPos );
    gl.bindBuffer( gl.ARRAY_BUFFER, bufQuad.pos );
    gl.vertexAttribPointer( progBlur.inPos, 2, gl.FLOAT, false, 0, 0 ); 
    gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, bufQuad.inx );
    gl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );
    gl.disableVertexAttribArray( progBlur.inPos );

    requestAnimationFrame(render);
}

function initScene() {

    canvas = document.getElementById( "canvas");
    gl = canvas.getContext( "experimental-webgl" );
    if ( !gl )
        return null;

    progDraw = {}
    progDraw.prog = ShProg.Create( 
    [ { source : "draw-shader-vs", stage : gl.VERTEX_SHADER },
        { source : "draw-shader-fs", stage : gl.FRAGMENT_SHADER }
    ] );
    if ( !progDraw.prog )
        return null;
    progDraw.inPos = gl.getAttribLocation( progDraw.prog, "inPos" );
    progDraw.inNV  = gl.getAttribLocation( progDraw.prog, "inNV" );
    progDraw.inCol = gl.getAttribLocation( progDraw.prog, "inCol" );

    progBlur = {}
    progBlur.prog = ShProg.Create( 
    [ { source : "post-shader-vs", stage : gl.VERTEX_SHADER },
        { source : "blur-shader-fs", stage : gl.FRAGMENT_SHADER }
    ] );
    progBlur.inPos = gl.getAttribLocation( progBlur.prog, "inPos" );
    if ( !progBlur.prog )
        return;    

    // create cube
    var cubePos = [
    -1.0, -1.0,  1.0,  1.0, -1.0,  1.0,  1.0,  1.0,  1.0, -1.0,  1.0,  1.0,
    -1.0, -1.0, -1.0,  1.0, -1.0, -1.0,  1.0,  1.0, -1.0, -1.0,  1.0, -1.0 ];
    var cubeCol = [ 1.0, 0.0, 0.0, 1.0, 0.5, 0.0, 1.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0 ];
    var cubeHlpInx = [ 0, 1, 2, 3, 1, 5, 6, 2, 5, 4, 7, 6, 4, 0, 3, 7, 3, 2, 6, 7, 1, 0, 4, 5 ];  
    var cubePosData = [];
    for ( var i = 0; i < cubeHlpInx.length; ++ i ) {
    cubePosData.push( cubePos[cubeHlpInx[i]*3], cubePos[cubeHlpInx[i]*3+1], cubePos[cubeHlpInx[i]*3+2] );
    }
    var cubeNVData = [];
    for ( var i1 = 0; i1 < cubeHlpInx.length; i1 += 4 ) {
    var nv = [0, 0, 0];
    for ( i2 = 0; i2 < 4; ++ i2 ) {
        var i = i1 + i2;
        nv[0] += cubePosData[i*3]; nv[1] += cubePosData[i*3+1]; nv[2] += cubePosData[i*3+2];
    }
    for ( i2 = 0; i2 < 4; ++ i2 )
    cubeNVData.push( nv[0], nv[1], nv[2] );
    }
    var cubeColData = [];
    for ( var is = 0; is < 6; ++ is ) {
    for ( var ip = 0; ip < 4; ++ ip ) {
        cubeColData.push( cubeCol[is*3], cubeCol[is*3+1], cubeCol[is*3+2] ); 
    }
    }
    var cubeInxData = [];
    for ( var i = 0; i < cubeHlpInx.length; i += 4 ) {
    cubeInxData.push( i, i+1, i+2, i, i+2, i+3 );   
    }
    bufCube = VertexBuffer.Create(
    [ { data : cubePosData, attrSize : 3, attrLoc : progDraw.inPos },
    { data : cubeNVData,  attrSize : 3, attrLoc : progDraw.inNV },
    { data : cubeColData, attrSize : 3, attrLoc : progDraw.inCol } ],
    cubeInxData );

    bufQuad.pos = gl.createBuffer();
    gl.bindBuffer( gl.ARRAY_BUFFER, bufQuad.pos );
    gl.bufferData( gl.ARRAY_BUFFER, new Float32Array( [ -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0 ] ), gl.STATIC_DRAW );
    bufQuad.inx = gl.createBuffer();
    gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, bufQuad.inx );
    gl.bufferData( gl.ELEMENT_ARRAY_BUFFER, new Uint16Array( [ 0, 1, 2, 0, 2, 3 ] ), gl.STATIC_DRAW );  

    camera = new Camera( [0, 3, 0.0], [0, 0, 0], [0, 0, 1], 90, vp_size, 0.5, 100 );

    window.onresize = resize;
    resize();
    requestAnimationFrame(render);
}

function resize() {
    //vp_size = [gl.drawingBufferWidth, gl.drawingBufferHeight];
    vp_size = [window.innerWidth, window.innerHeight]
    //vp_size = [256, 256]
    canvas.width = vp_size[0];
    canvas.height = vp_size[1];

    var fbsize = Math.max(vp_size[0], vp_size[1]);
    fbsize = 1 << 31 - Math.clz32(fbsize); // nearest power of 2

    blurFB = [];
    for ( var i = 0; i < 2; ++ i ) {
        fb = gl.createFramebuffer();
        fb.width = fbsize;
        fb.height = fbsize;
        gl.bindFramebuffer( gl.FRAMEBUFFER, fb );
        fb.color0_texture = gl.createTexture();
        gl.bindTexture( gl.TEXTURE_2D, fb.color0_texture );
        gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );
        gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );
        gl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, fb.width, fb.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );
        fb.renderbuffer = gl.createRenderbuffer();
        gl.bindRenderbuffer( gl.RENDERBUFFER, fb.renderbuffer );
        gl.renderbufferStorage( gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, fb.width, fb.height );
        gl.framebufferTexture2D( gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, fb.color0_texture, 0 );
        gl.framebufferRenderbuffer( gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, fb.renderbuffer );
        gl.bindTexture( gl.TEXTURE_2D, null );
        gl.bindRenderbuffer( gl.RENDERBUFFER, null );
        gl.bindFramebuffer( gl.FRAMEBUFFER, null );
        blurFB.push( fb );
    }
}

function Fract( val ) { 
    return val - Math.trunc( val );
}
function CalcAng( deltaTime, intervall ) {
    return Fract( deltaTime / (1000*intervall) ) * 2.0 * Math.PI;
}
function CalcMove( deltaTime, intervall, range ) {
    var pos = self.Fract( deltaTime / (1000*intervall) ) * 2.0
    var pos = pos < 1.0 ? pos : (2.0-pos)
    return range[0] + (range[1] - range[0]) * pos;
}    
function EllipticalPosition( a, b, angRag ) {
    var a_b = a * a - b * b
    var ea = (a_b <= 0) ? 0 : Math.sqrt( a_b );
    var eb = (a_b >= 0) ? 0 : Math.sqrt( -a_b );
    return [ a * Math.sin( angRag ) - ea, b * Math.cos( angRag ) - eb, 0 ];
}

function IdentM44() {
    return [ 1, 0, 0, 0,    0, 1, 0, 0,    0, 0, 1, 0,    0, 0, 0, 1 ];
};

function RotateAxis(matA, angRad, axis) {
    var aMap = [ [1, 2], [2, 0], [0, 1] ];
    var a0 = aMap[axis][0], a1 = aMap[axis][1]; 
    var sinAng = Math.sin(angRad), cosAng = Math.cos(angRad);
    var matB = matA.slice(0);
    for ( var i = 0; i < 3; ++ i ) {
        matB[a0*4+i] = matA[a0*4+i] * cosAng + matA[a1*4+i] * sinAng;
        matB[a1*4+i] = matA[a0*4+i] * -sinAng + matA[a1*4+i] * cosAng;
    }
    return matB;
}

function Rotate(matA, angRad, axis) {
    var s = Math.sin(angRad), c = Math.cos(angRad);
    var x = axis[0], y = axis[1], z = axis[2]; 
    matB = [
        x*x*(1-c)+c,   x*y*(1-c)-z*s, x*z*(1-c)+y*s, 0,
        y*x*(1-c)+z*s, y*y*(1-c)+c,   y*z*(1-c)-x*s, 0,
        z*x*(1-c)-y*s, z*y*(1-c)+x*s, z*z*(1-c)+c,   0,
        0,             0,             0,             1 ];
    return Multiply(matA, matB);
}    

function Multiply(matA, matB) {
    matC = IdentM44();
    for (var i0=0; i0<4; ++i0 )
        for (var i1=0; i1<4; ++i1 )
            matC[i0*4+i1] = matB[i0*4+0] * matA[0*4+i1] + matB[i0*4+1] * matA[1*4+i1] + matB[i0*4+2] * matA[2*4+i1] + matB[i0*4+3] * matA[3*4+i1]  
    return matC;
}

function Cross( a, b ) { return [ a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0], 0.0 ]; }
function Dot( a, b ) { return a[0]*b[0] + a[1]*b[1] + a[2]*b[2]; }
function Normalize( v ) {
    var len = Math.sqrt( v[0] * v[0] + v[1] * v[1] + v[2] * v[2] );
    return [ v[0] / len, v[1] / len, v[2] / len ];
}

Camera = function( pos, target, up, fov_y, vp, near, far ) {
this.Time = function() { return Date.now(); }
this.pos = pos;
this.target = target;
this.up = up;
this.fov_y = fov_y;
this.vp = vp;
this.near = near;
this.far = far;
this.orbit_mat = this.current_orbit_mat = this.model_mat = this.current_model_mat = IdentM44();
this.mouse_drag = this.auto_spin = false;
this.auto_rotate = true;
this.mouse_start = [0, 0];
this.mouse_drag_axis = [0, 0, 0];
this.mouse_drag_angle = 0;
this.mouse_drag_time = 0;
this.drag_start_T = this.rotate_start_T = this.Time();
this.Ortho = function() {
    var fn = this.far + this.near;
    var f_n = this.far - this.near;
    var w = this.vp[0];
    var h = this.vp[1];
    return [
        2/w, 0,   0,       0,
        0,   2/h, 0,       0,
        0,   0,   -2/f_n,  0,
        0,   0,   -fn/f_n, 1 ];
};  
this.Perspective = function() {
    var n = this.near;
    var f = this.far;
    var fn = f + n;
    var f_n = f - n;
    var r = this.vp[0] / this.vp[1];
    var t = 1 / Math.tan( Math.PI * this.fov_y / 360 );
    return [
        t/r, 0, 0,          0,
        0,   t, 0,          0,
        0,   0, -fn/f_n,   -1,
        0,   0, -2*f*n/f_n, 0 ];
}; 
this.LookAt = function() {
    var mz = Normalize( [ this.pos[0]-this.target[0], this.pos[1]-this.target[1], this.pos[2]-this.target[2] ] );
    var mx = Normalize( Cross( this.up, mz ) );
    var my = Normalize( Cross( mz, mx ) );
    var tx = Dot( mx, this.pos );
    var ty = Dot( my, this.pos );
    var tz = Dot( [-mz[0], -mz[1], -mz[2]], this.pos ); 
    return [mx[0], my[0], mz[0], 0, mx[1], my[1], mz[1], 0, mx[2], my[2], mz[2], 0, tx, ty, tz, 1]; 
};
this.Orbit = function() {
    return Multiply(this.LookAt(), this.OrbitMatrix());
}; 
this.OrbitMatrix = function() {
    return (this.mouse_drag || (this.auto_rotate && this.auto_spin)) ? Multiply(this.current_orbit_mat, this.orbit_mat) : this.orbit_mat;
};
this.AutoModelMatrix = function() {
    return this.auto_rotate ? Multiply(this.current_model_mat, this.model_mat) : this.model_mat;
};
this.Update = function(vp_size) {
    if (vp_size)
        this.vp = vp_size;
    var current_T = this.Time();
    this.current_model_mat = IdentM44()
    if (this.mouse_drag) {
        this.current_orbit_mat = Rotate(IdentM44(), this.mouse_drag_angle, this.mouse_drag_axis);
    } else if (this.auto_rotate) {
        if (this.auto_spin ) {
            if (this.mouse_drag_time > 0 ) {
                var angle = this.mouse_drag_angle * (current_T - this.rotate_start_T) / this.mouse_drag_time;
                this.current_orbit_mat = Rotate(IdentM44(), angle, this.mouse_drag_axis);
            }
        } else {
            var auto_angle_x = Fract( (current_T - this.rotate_start_T) / 13000.0 ) * 2.0 * Math.PI;
            var auto_angle_y = Fract( (current_T - this.rotate_start_T) / 17000.0 ) * 2.0 * Math.PI;
            this.current_model_mat = RotateAxis( this.current_model_mat, auto_angle_x, 0 );
            this.current_model_mat = RotateAxis( this.current_model_mat, auto_angle_y, 1 );
        }
    }
};
this.ChangeMotionMode = function(drag, spin, auto ) {
    var new_drag = drag;
    var new_auto = new_drag ? false : auto;
    var new_spin = new_auto ? spin : false;
    change = this.mouse_drag != new_drag || this.auto_rotate != new_auto || this.auto_spin != new_spin; 
    if (!change)
        return;
    if (new_drag && !this.mouse_drag) {
        this.drag_start_T = this.Time();
        this.mouse_drag_angle = 0.0;
        this.mouse_drag_time = 0;
    }
    if (new_auto && !this.auto_rotate)
        this.rotate_start_T = this.Time();
    this.mouse_drag = new_drag; 
    this.auto_rotate = new_auto;  
    this.auto_spin = new_spin;
    this.orbit_mat = Multiply(this.current_orbit_mat, this.orbit_mat);
    this.current_orbit_mat = IdentM44();
    this.model_mat = Multiply(this.current_model_mat, this.model_mat);
    this.current_model_mat = IdentM44();
};
this.OnMouseDown = function( event ) {
    var rect = gl.canvas.getBoundingClientRect();
    if ( event.clientX < rect.left || event.clientX > rect.right ) return;
    if ( event.clientY < rect.top || event.clientY > rect.bottom ) return;
    if (event.button == 0) { // left button
        this.mouse_start = [event.clientX, event.clientY]; 
        this.ChangeMotionMode( true, false, false );
    }
};
this.OnMouseUp = function( event ) {
    if (event.button == 0) { // left button
        this.ChangeMotionMode( false, true, true );
    } else if (event.button == 1) {// middle button
        this.ChangeMotionMode( false, false, !this.auto_rotate );
    }
};
this.OnMouseMove = function( event ) {
    var dx = (event.clientX-this.mouse_start[0]) / this.vp[0];
    var dy = (event.clientY-this.mouse_start[1]) / this.vp[1];
    var len = Math.sqrt(dx*dx + dy*dy);
    if (this.mouse_drag && len > 0) {
        this.mouse_drag_angle = Math.PI*len;
        this.mouse_drag_axis = [dy/len, 0, -dx/len];
        this.mouse_drag_time = this.Time() - this.drag_start_T;
    }
};

this.domElement = document;
var cam = this;
//this.domElement.addEventListener( 'contextmenu', function(e) { event.preventDefault(); }, false );
this.domElement.addEventListener( 'mousedown', function(e) { cam.OnMouseDown(e) }, false );
this.domElement.addEventListener( 'mouseup', function(e) { cam.OnMouseUp(e) }, false );
this.domElement.addEventListener( 'mousemove', function(e) { cam.OnMouseMove(e) }, false );
//this.domElement.addEventListener( 'mousewheel', hid_events.onMouseWheel, false );
//this.domElement.addEventListener( 'DOMMouseScroll', hid_events.onMouseWheel, false ); // firefox
}

var ShProg = {};
ShProg.Create = function( shaderList ) {
    var shaderObjs = [];
    for ( var i_sh = 0; i_sh < shaderList.length; ++ i_sh ) {
        var shderObj = this.Compile( shaderList[i_sh].source, shaderList[i_sh].stage );
        if ( shderObj == 0 )
            return 0;
        shaderObjs.push( shderObj );
    }
    var progObj = this.Link( shaderObjs )
    if ( progObj != 0 ) {
        progObj.attrInx = {};
        var noOfAttributes = gl.getProgramParameter( progObj, gl.ACTIVE_ATTRIBUTES );
        for ( var i_n = 0; i_n < noOfAttributes; ++ i_n ) {
            var name = gl.getActiveAttrib( progObj, i_n ).name;
            progObj.attrInx[name] = gl.getAttribLocation( progObj, name );
        }
        progObj.uniLoc = {};
        var noOfUniforms = gl.getProgramParameter( progObj, gl.ACTIVE_UNIFORMS );
        for ( var i_n = 0; i_n < noOfUniforms; ++ i_n ) {
            var name = gl.getActiveUniform( progObj, i_n ).name;
            progObj.uniLoc[name] = gl.getUniformLocation( progObj, name );
        }
    }
    return progObj;
}
ShProg.AttrI = function( progObj, name ) { return progObj.attrInx[name]; } 
ShProg.UniformL = function( progObj, name ) { return progObj.uniLoc[name]; } 
ShProg.Use = function( progObj ) { gl.useProgram( progObj ); } 
ShProg.SetI1  = function( progObj, name, val ) { if(progObj.uniLoc[name]) gl.uniform1i( progObj.uniLoc[name], val ); }
ShProg.SetF1  = function( progObj, name, val ) { if(progObj.uniLoc[name]) gl.uniform1f( progObj.uniLoc[name], val ); }
ShProg.SetF2  = function( progObj, name, arr ) { if(progObj.uniLoc[name]) gl.uniform2fv( progObj.uniLoc[name], arr ); }
ShProg.SetF3  = function( progObj, name, arr ) { if(progObj.uniLoc[name]) gl.uniform3fv( progObj.uniLoc[name], arr ); }
ShProg.SetF4  = function( progObj, name, arr ) { if(progObj.uniLoc[name]) gl.uniform4fv( progObj.uniLoc[name], arr ); }
ShProg.SetM33 = function( progObj, name, mat ) { if(progObj.uniLoc[name]) gl.uniformMatrix3fv( progObj.uniLoc[name], false, mat ); }
ShProg.SetM44 = function( progObj, name, mat ) { if(progObj.uniLoc[name]) gl.uniformMatrix4fv( progObj.uniLoc[name], false, mat ); }
ShProg.Compile = function( source, shaderStage ) {
    var shaderScript = document.getElementById(source);
    if (shaderScript)
    source = shaderScript.text;
    var shaderObj = gl.createShader( shaderStage );
    gl.shaderSource( shaderObj, source );
    gl.compileShader( shaderObj );
    var status = gl.getShaderParameter( shaderObj, gl.COMPILE_STATUS );
    if ( !status ) alert(gl.getShaderInfoLog(shaderObj));
    return status ? shaderObj : null;
} 
ShProg.Link = function( shaderObjs ) {
    var prog = gl.createProgram();
    for ( var i_sh = 0; i_sh < shaderObjs.length; ++ i_sh )
        gl.attachShader( prog, shaderObjs[i_sh] );
    gl.linkProgram( prog );
    status = gl.getProgramParameter( prog, gl.LINK_STATUS );
    if ( !status ) alert("Could not initialise shaders");
    gl.useProgram( null );
    return status ? prog : null;
}

var VertexBuffer = {
Create: function(attribs, indices) {
    var buffer = { buf: [], attr: [], inx: gl.createBuffer(), inxLen: indices.length };
    for (var i=0; i<attribs.length; ++i) {
        buffer.buf.push(gl.createBuffer());
        buffer.attr.push({ size : attribs[i].attrSize, loc : attribs[i].attrLoc });
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.buf[i]);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array( attribs[i].data ), gl.STATIC_DRAW);
    }
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer.inx);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array( indices ), gl.STATIC_DRAW);
    gl.bindBuffer(gl.ARRAY_BUFFER, null);
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
    return buffer;
},
Draw: function(bufObj) {
    for (var i=0; i<bufObj.buf.length; ++i) {
        gl.bindBuffer(gl.ARRAY_BUFFER, bufObj.buf[i]);
        gl.vertexAttribPointer(bufObj.attr[i].loc, bufObj.attr[i].size, gl.FLOAT, false, 0, 0);
        gl.enableVertexAttribArray( bufObj.attr[i].loc);
    }
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufObj.inx);
    gl.drawElements(bufObj.primitve_type ? bufObj.primitve_type : gl.TRIANGLES, bufObj.inxLen, gl.UNSIGNED_SHORT, 0);
    for (var i=0; i<bufObj.buf.length; ++i)
       gl.disableVertexAttribArray(bufObj.attr[i].loc);
    gl.bindBuffer( gl.ARRAY_BUFFER, null );
    gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, null );
} };

initScene();

})();
```

```
html,body { margin: 0; overflow: hidden; }
#gui { position : absolute; top : 0; left : 0; }
```

```
<script id="draw-shader-vs" type="x-shader/x-vertex">
precision mediump float;

attribute vec3 inPos;
attribute vec3 inNV;
attribute vec3 inCol;

varying vec3 vertPos;
varying vec3 vertNV;
varying vec3 vertCol;

uniform mat4 u_projectionMat44;
uniform mat4 u_modelViewMat44;

void main()
{
    vertNV      = mat3( u_modelViewMat44 ) * normalize( inNV );
    vertCol     = inCol;
    vec4 pos    = u_modelViewMat44 * vec4( inPos, 1.0 );
    vertPos     = pos.xyz / pos.w;
    gl_Position = u_projectionMat44 * pos;
}
</script>

<script id="draw-shader-fs" type="x-shader/x-fragment">
precision mediump float;

varying vec3 vertPos;
varying vec3 vertNV;
varying vec3 vertCol;

uniform float u_shininess;

void main()
{
    vec3 color = vertCol;
    vec3  normalV  = normalize( vertNV );
    vec3  eyeV     = normalize( -vertPos );
    vec3  halfV    = normalize( eyeV + normalV );
    float NdotH    = max( 0.0, dot( normalV, halfV ) );
    float shineFac = ( u_shininess + 2.0 ) * pow( NdotH, u_shininess ) / ( 2.0 * 3.14159265 );
    gl_FragColor   = vec4( color.rgb * (0.2 + NdotH), 1.0 );
} 
</script>

<script id="post-shader-vs" type="x-shader/x-vertex">
precision mediump float;

attribute vec2 inPos;

varying   vec2 pos;

void main()
{
    pos = inPos;
    gl_Position = vec4( inPos, 0.0, 1.0 );
}
</script>

<script id="blur-shader-fs" type="x-shader/x-fragment">
precision mediump float;

varying vec2 pos;

uniform sampler2D u_texture;
uniform vec2      u_textureSize;
uniform float     u_sigma;
uniform float     u_radius;
uniform vec2      u_dir;

float CalcGauss( float x, float sigma )
{
    if ( sigma <= 0.0 )
        return 0.0;
  return exp( -(x*x) / (2.0 * sigma) ) / (2.0 * 3.14157 * sigma);
}

void main()
{
    vec2 texC     = pos.st * 0.5 + 0.5;
    vec4 texCol   = texture2D( u_texture, texC );
    vec4 gaussCol = vec4( texCol.rgb, 1.0 );
    vec2 step     = u_dir / u_textureSize;
    for ( int i = 1; i <= 32; ++ i )
    {
        float weight = CalcGauss( float(i) / 32.0, u_sigma * 0.5 );
        if ( weight < 1.0/255.0 )
            break;
        texCol    = texture2D( u_texture, texC + u_radius * step * float(i) );
        gaussCol += vec4( texCol.rgb * weight, weight );
        texCol    = texture2D( u_texture, texC - u_radius * step * float(i) );
        gaussCol += vec4( texCol.rgb * weight, weight );
    }
    gaussCol.rgb = clamp( gaussCol.rgb / gaussCol.w, 0.0, 1.0 );
    gl_FragColor = vec4( gaussCol.rgb, 1.0 );
}
</script>

<div>
<form id="gui" name="inputs">
<table>
<tr> <td> <font color= #CCF>radius</font> </td> 
        <td> <input type="range" id="radius" min="1" max="1000" value="350" onchange="changeEventHandler(event);"/></td> </tr>
<tr> <td> <font color= #CCF>blur</font> </td> 
        <td> <input type="range" id="sigma" min="1" max="100" value="5" onchange="changeEventHandler(event);"/></td> </tr>
</table>
</form>
</div>

<canvas id="canvas" style="border: none;"></canvas>
```

# jquery-ui - jQuery-UI：单击时可拖动到顶部，如对话框

> ID：11282395
> 
> 赞同：0
> 
> 时间：2012-07-01T13:32:24.163
> 
> 标签：jquery-ui

当单击 jQuery-UI 对话框时，它会自动移动到任何其他 UI 元素的顶部。如何为 jQuery-UI 可拖动对象复制这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:15:46.967

使用堆栈选项大致解决了它：

```
stack: '.ui-dialog' 
```

但是，它在单击时不起作用。无论如何，有时查看文档确实会有所帮助。;-)

# linux - Makefile 中的变量泄漏

> ID：11282398
> 
> 赞同：1
> 
> 时间：2012-07-01T13:33:05.503
> 
> 标签：linux, gcc, makefile, gnu-make

我有两个makefile，它们包含在一个主makefile中。在第二个 makefile 中有以下规则：

```
$(MAKEFILE2_OBJS): CFLAGS += -fPIC 
```

据我了解，当我编写这样的规则时，-fPIC 将仅针对 MAKEFILE2_OBJS 添加到 CFLAGS。但是当我使用隐式规则编译 MAKEFILE1_OBJS 时，CFLAGS 具有来自第二个 makefile 的 -fPIC 标志。

为什么会这样？

主要生成文件：

```
CC := gcc
LD := gcc
AS := nasm
DEPEND := ./depend.sh

CFLAGS += -Wall -Werror -I. -g -DNDEBUG -masm=intel
ASFLAGS += -f elf64
LDFLAGS +=

TARGET := arora
MODULES := utils stage1 stage2

all: $(TARGET)

$(TARGET): stage1/arora-stage1 stage2/arora-stage2

SRCS :=
ERROR_FILES :=
OBJS :=
DEPS :=
OUTPUTS :=

include $(wildcard $(patsubst %,%/*.mk,$(MODULES)))

OBJS += $(SRCS:.c=.o)
DEPS += $(SRCS:.c=.d)
OUTPUTS += $(OBJS) $(DEPS) $(TARGET)

include $(DEPS)

%.d: %.c
    $(DEPEND) `dirname $*` $(CFLAGS) $*.c > $@

.PHONY: clean
clean:
    rm -f $(OUTPUTS) 
```

生成文件1：

```
STAGE1_ASM_SRCS := $(wildcard $(DIR)/*/*.s)
STAGE1_ASM_OBJS := $(STAGE1_ASM_SRCS:.s=.o)

STAGE1_C_SRCS := $(wildcard $(DIR)/*/*.c)
STAGE1_C_OBJS := $(STAGE1_C_SRCS:.c=.o)
STAGE1_C_DEPS := $(STAGE1_C_OBJS:.o=.d)
STAGE1_SRCS := $(STAGE1_ASM_SRCS) $(STAGE1_C_SRCS)
STAGE1_OBJS := $(STAGE1_ASM_OBJS) $(STAGE1_C_OBJS)

SRCS += $(STAGE1_C_SRCS)
ERROR_FILES += $(wildcard $(DIR)/*/*_errors.hx)
OUTPUTS += $(patsubst %,$(DIR)/%, linker_script.lds stage1.elf stage1_exec.bin stage1_data.bin stage1_main.bin arora-main-overwritten arora-exec-free-space-overwritten arora-stage1 original-definitions original-definitions.h) $(STAGE1_ASM_OBJS)

STAGE1_INCLUDE_PATH := $(DIR)

$(STAGE1_C_OBJS) $(STAGE1_C_DEPS): CFLAGS += -fno-stack-protector -nostdlib -I$(STAGE1_INCLUDE_PATH)

# hack
include $(DIR)/original-definitions

.PHONY: $(DIR)/stage1
$(DIR)/stage1: $(DIR)/arora-stage1 $(DIR)/arora-main-overwritten $(DIR)/arora-exec-free-space-overwritten $(DIR)/original-definitions $(DIR)/original-definitions.h

$(DIR)/original-definitions.h: $(DIR)/original-definitions $(DIR)/create_original_definitions_header.sh
    $(lastword $^) $< > $@

$(DIR)/original-definitions: $(DIR)/arora-original $(DIR)/extract-definitions.sh
    $(lastword $^) $< > $@

$(DIR)/arora-stage1: $(DIR)/stage1_main.bin $(DIR)/stage1_exec.bin $(DIR)/stage1_data.bin $(DIR)/arora-original
    cat $(lastword $^) > $@ && dd if=$< of=$@ bs=c seek=$(ARORA_MAIN_FILE_OFFSET) conv=notrunc && dd if=$(word 2, $^) of=$@ bs=c seek=$(ARORA_EXEC_FREE_SPACE_FILE_OFFSET) conv=notrunc && dd if=$(word 3, $^) of=$@ bs=c seek=$$(($(ARORA_EXEC_FREE_SPACE_FILE_OFFSET) + $$(wc -c $(word 2, $^) | awk '{print $$1}'))) conv=notrunc && chmod +x $@

$(DIR)/arora-main-overwritten: $(DIR)/arora-original $(DIR)/stage1_main.bin
    dd if=$< of=$@ bs=c skip=$(ARORA_MAIN_FILE_OFFSET) count=$$(wc -c $(lastword $^) | awk '{print $$1}')

$(DIR)/arora-exec-free-space-overwritten: $(DIR)/arora-original $(DIR)/stage1_exec.bin
    dd if=$< of=$@ bs=c skip=$(ARORA_EXEC_FREE_SPACE_FILE_OFFSET) count=$$(wc -c $(lastword $^) | awk '{print $$1}')

$(DIR)/arora-data-free-space-overwritten: $(DIR)/arora-original $(DIR)/stage1_exec.bin $(DIR)/stage1_data.bin
    dd if=$< of=$@ bs=c skip=$$(($(ARORA_EXEC_FREE_SPACE_FILE_OFFSET) + $$(wc -c $(word 2, $^) | awk '{print $$1}'))) count=$$(wc -c $(lastword $^) | awk '{print $$1}')

$(DIR)/stage1_main.bin: $(DIR)/stage1.elf
    objcopy -j .arora_main -O binary $^ $@

$(DIR)/stage1_exec.bin: $(DIR)/stage1.elf
    objcopy -j .arora_exec_free_space -O binary $^ $@ 

$(DIR)/stage1_data.bin: $(DIR)/stage1.elf
    objcopy -j .arora_data_free_space -O binary $^ $@

$(DIR)/stage1.elf: $(STAGE1_OBJS) utils/libpluginutils.a $(DIR)/linker_script.lds
    $(LD) $(STAGE1_OBJS) utils/libpluginutils.a -o $@ $(LDFLAGS) -ldl -nostdlib -T $(lastword $^)

$(DIR)/linker_script.lds: $(DIR)/linker_script.lds.template
    echo stage1_main will be at $(ARORA_MAIN_ADDRESS), the exec will be at $(ARORA_EXEC_FREE_SPACE_ADDRESS), the data will be after the exec. && sed s/ARORA_MAIN_ADDRESS/$(ARORA_MAIN_ADDRESS)/ $^ | sed s/ARORA_EXEC_FREE_SPACE_ADDRESS/$(ARORA_EXEC_FREE_SPACE_ADDRESS)/ | sed s/ARORA_DATA_LOADING_FREE_SPACE_ADDRESS/$(ARORA_DATA_LOADING_FREE_SPACE_ADDRESS)/  > $@ 
```

生成文件2：

```
DIR := $(patsubst %/,%,$(dir $(lastword $(MAKEFILE_LIST))))

STAGE2_SRCS := $(wildcard $(DIR)/*/*.c)
STAGE2_OBJS := $(STAGE2_SRCS:.c=.o) $(DIR)/overwritten/main-overwritten.o $(DIR)/overwritten/exec-free-space-overwritten.o $(patsubst %.s, %.o, $(wildcard $(DIR)/*/*.s))
STAGE2_DEPS := $(STAGE2_OBJS:.o=.d)

SRCS += $(STAGE2_SRCS)
ERROR_FILES += $(DIR)/stage2_errors.hx

OBJS += $(DIR)/overwritten/main-overwritten.o $(DIR)/overwritten/exec-free-space-overwritten.o
OUTPUTS += $(DIR)/stage2.so $(DIR)/overwritten/exec-free-space-overwritten.h $(DIR)/overwritten/main-overwritten.h $(DIR)/arora-stage2

.PHONY: $(DIR)/stage2
$(DIR)/stage2:  $(DIR)/arora-stage2

$(DIR)/arora-stage2: stage1/arora-stage1 $(DIR)/stage2.so
    cat $^ > $@ && chmod +x $@

$(DIR)/stage2.so: LDFLAGS += -shared
$(DIR)/stage2.so: $(STAGE2_OBJS) utils/libpluginutils.a
    $(LD) $(LDFLAGS) $^ -o $@ 

$(STAGE2_OBJS): CFLAGS += -fPIC

$(DIR)/overwritten/main-overwritten.o: stage1/arora-main-overwritten
    objcopy -F elf64-x86-64 -B i386 -I binary $^ $@

$(DIR)/overwritten/exec-free-space-overwritten.o: stage1/arora-exec-free-space-overwritten
    objcopy -F elf64-x86-64 -B i386 -I binary $^ $@

$(DIR)/overwritten/data-free-space-overwritten.o: stage1/arora-data-free-space-overwritten
    objcopy -F elf64-x86-64 -B i386 -I binary $^ $@

$(DIR)/overwritten/main-overwritten.h: $(DIR)/overwritten/main-overwritten.o $(DIR)/create_objcopy_header.sh
    $(lastword $^) $< > $@

$(DIR)/overwritten/exec-free-space-overwritten.h: $(DIR)/overwritten/exec-free-space-overwritten.o $(DIR)/create_objcopy_header.sh
    $(lastword $^) $< > $@

$(DIR)/overwritten/data-free-space-overwritten.h: $(DIR)/overwritten/data-free-space-overwritten.o $(DIR)/create_objcopy_header.sh
    $(lastword $^) $< > $@ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:23:03.833

GNU make 在开始评估规则之前将整个 Makefile（以及所有包含的 Makefile）读入内存。规则命令中的变量在规则执行时展开，而不是在读取时展开。请参见以下示例：

```
VAR = aaa

all:
    @echo $(VAR)

VAR += bbb 
```

“make”产生输出“aaa bbb”，因为当执行“all”规则时，$(VAR) 具有该值。

如果 Makefile 包含其他文件，则所有内容都被视为一个大 Makefile。

# cucumber - Cucumber：如何在不同的转换中使用相同的正则表达式？

> ID：11282400
> 
> 赞同：7
> 
> 时间：2012-07-01T13:33:37.773
> 
> 标签：cucumber, transform

我有以下变换：

```
Transform /^"([^"]+)" Phase$/ do |name|
  # Returns the phase named 'name',
  # or raises an exception if it doesn't exist
end 
```

它适用于这样的步骤定义：

```
Then /("(?:[^"]+)" Phase) should do something/ do |phase|
  # Should fail if the specified phase doesn't exist
end 
```

我还有以下使用相同`"([^"]+)" Phase`模式的步骤定义：

```
Given /("([^"]+)" Phase) follows ("([^"]+)" Phase)/ do |pre, post|
  # Should create the specified phases 
end 
```

如果指定的阶段不存在，我不希望步骤定义失败。我想改为创建阶段。

我想创建一个转换，它将为我创建阶段以稍微干燥步骤定义，但我不能这样做，因为我已经有了上面提到的具有完全相同的正则表达式的转换。

基本上，如果它是一个步骤，我想创建阶段，如果不是，我想`Given`提高失败。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:18:35.330

如果正则表达式相同，那么您实际上没有选项来区分行为。确定你是否在一个`Given`步骤中*可能*是可能的，但即使是这样，这也将是一些非常隐蔽的魔法，有可能让未来的读者和场景作者感到惊讶……

最简单、最能体现意图的方法是在步骤语言中明确说明短语的性质，然后你可以有 2 个明确分离的转换，例如

```
EXISTING_PHASE = Transform /^existing Phase "([^"]+)"$/ do |phase|
    # raise error if it doesn't exist
end

UNEXISTING_PHASE = Transform /^unknown Phase "([^"]+)"$/ do |phase|
    # create the phase if it doesn't exist
end 
```

# python - 我可以在 python 单元测试中伪造/模拟我的模拟对象的类型吗

> ID：11282401
> 
> 赞同：36
> 
> 时间：2012-07-01T13:33:38.040
> 
> 标签：python, unit-testing, mocking

在我的 python 代码中，我检查其中一个参数的类型以确保它是我期望的类型。例如：

```
def myfunction(dbConnection):
    if (type(dbConnection)<>bpgsql.Connection):
        r['error'] += ' invalid database connection' 
```

我想通过一个模拟连接进行测试。有没有办法让模拟对象假装是正确的类型？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-01T15:16:16.430

恕我直言，看来你们不太对劲！

我可以像说的那样使用鸭子打字，但是有一种方法可以做我最初打算做的事情：

来自[http://docs.python.org/dev/library/unittest.mock.html](http://docs.python.org/dev/library/unittest.mock.html)

使用类或实例作为`spec`或`spec_set`能够通过 isintance 测试的模拟对象：

```
>>>
>>> mock = Mock(spec=SomeClass)
>>> isinstance(mock, SomeClass)
True
>>> mock = Mock(spec_set=SomeClass())
>>> isinstance(mock, SomeClass)
True 
```

所以我的示例代码如下：

```
m = mock.MagicMock(spec=bpgsql.Connection)
isinstance(m, bpgsql.Connection) 
```

这返回 True

综上所述，我并不是在争论在 python 中进行严格的类型检查，我说如果你需要检查它，你可以做到，它也适用于测试和模拟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T13:40:54.167

这或多或少正是您不应该强制执行严格类型检查的原因！您应该从代码中完全删除该行。

如果您不想这样做，请编写一个具有您想要的属性的抽象基类 ( `.connect()`, `.cursor()`, ...?) 并检查`isinstance`它。

[aaages也`<>`已过时。使用`!=`.]

# mysql - 简单的 MySQL Join 替换外键

> ID：11282403
> 
> 赞同：0
> 
> 时间：2012-07-01T13:34:02.690
> 
> 标签：mysql, join

我有 2 张桌子，门票和状态。门票具有对应于 state.id 的外键状态

```
SELECT tickets.id AS 'Ticket Id', 
       state.description AS 'State'
FROM tickets 
LEFT JOIN state ON tickets.state = state.id
WHERE tickets.id = 1; 
```

因此，如果我在门票中有一排 ticket.id = 1 和 ticket.state = 1 并且我在 state.id = 1 和 state.description = 'Open' 的状态中有一行

如何获得结果 Ticket Id = 1，State = Open？

编辑：这确实有效，由于某种原因状态表是空的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:42:54.090

在我看来，这就是你从你写的查询中得到的......？

如果您想从您的数据库中获得确切的结果“Ticked Id =1，State = Open”，请查看 concat() 函数。如果您想将状态直接放入您的票证表中，我将首先添加一个新列，然后使用更新查询对其进行更新，然后删除旧的票证.state 列。或者，也许您真正需要的是使用上述查询定义的视图。

创建视图 ticketstate 作为 SELECT ticket.id ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:41:51.990

这好像

```
SELECT tickets.id AS 'Ticket Id', 
       state.description AS 'State'
FROM tickets 
LEFT JOIN state ON tickets.state = state.id
WHERE tickets.id = 1 and state.state = 'open'; 
```

# javascript - HTML5 Canvas 页面在 IE9 中挂起

> ID：11282411
> 
> 赞同：1
> 
> 时间：2012-07-01T13:36:13.000
> 
> 标签：javascript, html, canvas, internet-explorer-9, html5-canvas

[TimingCharts.com](http://timingcharts.com/)在 FireFox、Chrome、Safari 和 Android 设备中加载，但在 IE9 中挂起。如果我按 F12 并单击开发人员设置中的任何内容，例如调试、浏览器模式、图像等，然后页面将加载。只要我让浏览器保持打开状态，页面就会继续正常工作。如果我关闭浏览器并重新进入，我必须再次执行 f12 过程。

一些用户已经确认他们有同样的问题。有人可以告诉我我需要做什么才能使此页面正确加载吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:31:48.737

哈我知道为什么。我在 IE9 测试版中为此向 Microsoft 发送了错误报告！他们从来没有回复:-(

您的页面上有一个`console.log`，除非开发人员工具打开，否则会破坏 IE9。这是一个非常愚蠢的错误，因为一旦您使用开发人员工具进行调查，错误就会消失！

您可以通过像这样包装您的语句来使其始终有效：

```
if (window.console !== undefined && window.console.log !== undefined) {
  console.log('some console output');
} 
```

那应该让 IE9 再次工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:56:41.400

感谢西蒙的指导！在使用您的示例一段时间后，我决定...

```
<head>
    <script type="text/javascript">
    if (!window.console) console = {log: function() {}};
    </script>
</head> 
```

这似乎解决了这个问题。我真的很感谢你的帮助。

# javascript - 异常大的 WebKit 通知

> ID：11282415
> 
> 赞同：5
> 
> 时间：2012-07-01T13:36:42.190
> 
> 标签：javascript, jquery, webkit, google-chrome-extension, notifications

我正在开发一个 Chrome 扩展程序，我注意到 Chrome 开始对我的通知做一些奇怪的事情。

![展品 A](../Images/134162564214643a5505eb67fd466a84.png)

我说的是巨大的空白（通知高度应该在蓝条结束）。

前段时间不是这样，它开始在新的 Chrome 版本中发生。

无论如何，这可能是什么原因？

扩展的源代码在[http://github.com/Maxorq/LastPlug](http://github.com/Maxorq/LastPlug)

最有趣的部分是：

**[js/notifications.js](https://github.com/Maxorq/LastPlug/blob/master/js/notification.js)**

```
$('#title').html(decodeURIComponent($.url().param('title')));
$('#message').html(decodeURIComponent($.url().param('message')));
$('#avatar').attr('src', $.url().param('avatar'));
$('#color').addClass("color_" + $.url().param('color')); 
```

**[通知.html](https://github.com/Maxorq/LastPlug/blob/master/notification.html)**

```
<div id="content">
<img id="avatar" width="32" height="32" src="img/icon.png" />
<span id="title">Title</span><br />
<span id="message">Message</span>
</div> 
```

**[js/background.js](https://github.com/Maxorq/LastPlug/blob/master/js/background.js)**

```
var notification = webkitNotifications.createHTMLNotification('notification.html?title=' + title + '&message=' + message + '&avatar=' + avatar + '&color=' + color);

notification.show(); 
```

我从这里使用 jQuery URL Parser：[https ://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)

代码有点复杂，这里就不一一贴了；想知道其他人是否对大量通知有同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:26:32.867

我不确定这是否适用于您的情况......但是每当我在 chrome 中遇到带有大空格的错误时，添加`<!doctype html>`标签而不是仅仅`<html>`解决问题。不知道为什么，但确实如此。希望这可以帮助：）

# vb.net - VB.NET sendkey 函数 - 无法最小化应用程序

> ID：11282416
> 
> 赞同：0
> 
> 时间：2012-07-01T13:36:46.173
> 
> 标签：vb.net, winforms, sendkeys

我知道 sendkeys 函数不是更改文本框文本的正确方法

我只是想尝试这个函数虽然这个函数**不是有效**
的 让我说我得到`form`了`textbox``timer`

```
Timer1.Interval = 1000 
```

Timer1.Tick：

```
textbox1.Focus()
sendkeys.Send("123") 
```

现在**evrey 第二个计时器将密钥发送到我的文本框中。**

如果我**最小化**我的应用程序应用程序将密钥发送到**EvreyWhere**
假设我打开记事本然后运行我的应用程序应用程序将密钥发送到**记事本**而**不是我的应用程序我**

怎样才能只将密钥发送到我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:01:59.410

问题是一旦您的应用程序被最小化，它就不再是活动的应用程序。[`SendKeys`](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys%28v=vs.100%29.aspx)发送到**活动应用程序**。查看此[*论坛链接*](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/af8a092e-e8ec-42f5-9a72-fdfd63b31bb8)以获取可能的选项

从上面的链接：

> 使用 SendKeys 将击键和击键组合发送到活动应用程序。这个类不能被实例化。要将击键发送到类并立即继续您的程序流程，请使用发送。要等待按键启动的任何进程，请使用 SendWait。

# php - Handlebarsjs PHP 渲染

> ID：11282417
> 
> 赞同：26
> 
> 时间：2012-07-01T13:36:57.413
> 
> 标签：php, handlebars.js

我想知道是否有什么东西可以让 php 在服务器端呈现 Handlebarsjs 模板。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-28T15:05:25.143

我开始一个新项目来完成这项任务，它在这里：

[https://github.com/XaminProject/handlebars.php](https://github.com/XaminProject/handlebars.php)

没有经过太多测试，但它足够可用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-27T18:01:00.523

[lightncdy](https://github.com/zordius/lightncandy)是一个纯 PHP 库，支持几乎所有车把功能*（不需要 PECL 库）*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T06:03:25.877

试试[mustache.php](https://github.com/bobthecow/mustache.php)，它不一样，但 handlebarsjs 是基于它的，所以它非常相似。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-15T05:33:11.853

这在很大程度上取决于您如何处理 Handlebars 模板。您是否将它们嵌入到 HTML 中？您是单独加载它们吗？您是否将它们保存在本地然后编译？如果您要嵌入 HTML，则只需在其中放置一些 PHP 标记即可。

如果单独加载它们，则必须在 PHP 中加载模板文件（例如：file_get_contents、fopen/fread）、处理所需的信息，然后再次保存文件（例如：file_put_contents、fopen/fwrite）。

PHP 可以渲染任何东西。只需放置您的 PHP 打开/关闭标签并施展您的魔法。

# wcf - 如何制作作用于“生产者\消费者队列”的 WCF 服务？

> ID：11282421
> 
> 赞同：0
> 
> 时间：2012-07-01T13:37:18.060
> 
> 标签：wcf, triggers, producer-consumer

我有一个 WCF 服务，有多个客户端连接到它并订阅事件。

我还有一个在后台运行的**工作线程**，以及托管的 WCF 服务，执行操作并将项目推送到**'Producer\Consumer Queue'**。

当队列中有项目时，如何使 WCF 服务采取行动，以便它可以从队列中提取项目，对其进行分析 - 并将消息发布给所有订阅的客户端？

我知道 WCF 服务会对从连接的客户端调用的操作做出反应，但是当项目排队进入此队列时，我如何让它做出响应？

*如果可能的话，我将不胜感激任何可以用简单的代码示例回答的人。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:51:19.587

最简单的是，您需要一个事件，您的 wcf 服务可以从队列中订阅入队事件，并在引发事件后开始处理消息。对于非通用队列，您可以重写 Enqueue 方法以引发 OnChanged 事件。

```
public override void Enqueue(object obj)
{
    base.Enqueue(obj);
    OnChanged(EventArgs.Empty);
} 
```

有关如何从通用队列中引发事件的更多详细信息，请参见[此处](https://stackoverflow.com/questions/531438/c-triggering-an-event-when-an-object-is-added-to-a-queue)

```
//from worker thread
queue.Enqueue(some_object);

//in wcf you could probably do something like this
queue.OnChanged +=  ProcessMessage;

public void ProcessMessage(object sender, EventArgs e)
{
     lock(lock_object)
     {
          var some_object = queue.Dequeue;
          //processing logic and broadcasting to client
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T18:30:07.400

这是我的想法，这可能不是最好的，但它是一个开始。要为您的方案实现所需的功能，请创建两个 WCF 服务。第一个服务将被称为 QueueService，它基本上持有和管理您的队列。第二个服务称为 PublisherService，这个服务的目的是在队列中添加/删除新项目时由 QeueService 通知。要实现这一点，您必须使用双工通道（应用发布订阅模式[http://msdn.microsoft.com/en-us/library/ms752254.aspx](http://msdn.microsoft.com/en-us/library/ms752254.aspx))，其中 PublisherService 充当 QueueService 的客户端。现在关于将要使用 PublisherService 的客户...我不确定您到目前为止使用了什么技术。您是使用双工通道还是连续流从 PublisherService 获取数据？(http://blog.john-thiriet.com/en/2011/08/using-reactive-extensions-for-a-push-based-client-server-communication-with-silverlight-and-wcf/)

# php - 如何将 mysql 记录传递给 php 并确保它是 UTF-8 编码的

> ID：11282423
> 
> 赞同：0
> 
> 时间：2012-07-01T13:37:23.200
> 
> 标签：php, mysql, utf-8

我有一个问题，我的数据在 mysql 数据库中定义为 UTF-8。但是当我将它传递给 php 并将其格式化为 JSON 时，我没有得到 utf-8 符号。

我已经把标题 utf-8

```
header("Content-type: application/json; charset=UTF-8"); 
```

接下来我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:46:18.550

> 接下来我能做什么？

您可以用这个替换整个脚本

```
<?php
header("Content-type: application/json; charset=UTF-8");
printf('{chr:"%s"}', "\xc6\x94");// Ɣ  http://www.fileformat.info/info/unicode/char/0194/index.htm 
```

然后尝试使用它。如果一切正常，则意味着您在 db 中的数据不是 utf8，或者您检索它的方式不保留 utf8。

# ruby-on-rails - Rails：调用保存后数据库未更新

> ID：11282431
> 
> 赞同：0
> 
> 时间：2012-07-01T13:38:19.133
> 
> 标签：ruby-on-rails, activerecord, associations

我试图在两个对象之间创建关联并将更改保存到数据库。我在通知中包含了对对象的调用，以测试它是否在将 true 传递给 if 语句后保存。当我检查数据库中是否确实发生了更新时，没有任何变化。

requests_controller.rb

```
class RequestsController < ApplicationController
   before_filter :load_requestable

   def accept
     @request = Request.find(params[:id])
     @request.profile.send("#{@belongs_to}=",@requestable)

     if @request.save
        redirect_to [@requestable, :requests], notice: "Request Accepted #{@request.profile.send("#{@belongs_to}").name}"
     else
       render :new
     end
   end

private

  def load_requestable
    klass = [Company, Profile].detect { |c| params["#{c.name.underscore}_id"]}
    @requestable = klass.find(params["#{klass.name.underscore}_id"])
    @belongs_to = klass.to_s.downcase
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:40:39.240

尝试直接保存配置文件（因为您正在修改它，而不是请求对象）

```
if @request.profile.save
  # redirect 
```

# javascript - Webgl Angle 循环真的很慢

> ID：11282432
> 
> 赞同：2
> 
> 时间：2012-07-01T13:38:24.313
> 
> 标签：javascript, opengl-es, glsl, webgl, angle

我这里有一些 glsl，它就像一个魅力。仅编译需要 3 分钟或其他时间。我知道这是由于角度问题，Angle 是一个软件，可以将 opengl es 2.0 代码转换为用于 windows 系统上的 webgl 的 directX 9。如果我禁用角度，它会在一秒钟内编译。有谁知道为什么嵌套循环的角度太慢了。如果有解决办法？我的意思是我不能让每个着色器的每个人都等待超过一分钟。

```
for ( int b = 0; b < numberOfSplitpoints; b++ ) {
    if ( cameraDepth > splitPoints[b] && cameraDepth < splitPoints[b+1] ) {
        const float numberOfSplitpoints = float( NUMBER_OF_SPLIT_POINTS - 1 );
        vec4 projCoords = v_projTextureCoords[b];

        projCoords /= projCoords.w;
        projCoords = 0.5 * projCoords + 0.5;

        float shadowDepth = projCoords.z;

        projCoords.x /= numberOfSplitpoints;
        projCoords.x += float(b) / numberOfSplitpoints;

        for( int x = 0; x < fullkernelSize; x++ ) {
            for( int y = 0; y < fullkernelSize; y++ ) {
                vec2 pointer = vec2( float(x-kernelsize) / 3072.0, float(y-kernelsize) / 1024.0 );
                float convolution = kernel[x] * kernel[y];
                vec4 color = texture2D(shadowMapSampler, projCoords.xy+pointer);

                if(encodeDepth( color ) + shadowBias > shadowDepth) {
                    light += convolution;
                } else {
                    light += convolution * 0.6;
                }
            }
        } 
    }
}

vec2 random = normalize(texture2D(randomSampler, screenSize * uv / 64.0).xy * 2.0 - 1.0);
float ambiantAmount = 0.0;

const int kernel = 4;

float offset = ssoasampleRad / depth;

for(int x = 0; x<kernel; x++) {

    vec2 a  = reflect(directions[x], random) * offset;

    vec2 b  = vec2( a.x *0.707 - a.y*0.707, 
                    a.x*0.707 + a.y*0.707 );

    ambiantAmount += abientOcclusion(uv, a*0.25, position, normal);
    ambiantAmount += abientOcclusion(uv, b*0.50, position, normal);
    ambiantAmount += abientOcclusion(uv, a*0.75, position, normal);
    ambiantAmount += abientOcclusion(uv, b, position, normal);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T10:07:59.287

GLSL ES 没有将 while 循环和“动态”有界 for 循环定义为强制性的。ANGLE 利用这一点并进行广泛的循环展开：如果有`for ( int b = 0; b < numberOfSplitpoints; b++ )`，则`numberOfSplitpoints`必须是常量表达式，否则着色器将无法编译。

循环展开应该允许本机着色器优化器进行更多优化并最小化分歧，但是（在您的代码中）如果您有`numberOfSplitpoints`并且`fullkernelSize`非常大，展开的代码可能会变得非常长（最里面的代码将重复`numberOfSplitpoints*fullkernelSize*fullkernelSize`多次)，这可能会导致优化器和编译器陷入各种麻烦。

# database - MsAccess 中的减号查询

> ID：11282433
> 
> 赞同：1
> 
> 时间：2012-07-01T13:38:47.523
> 
> 标签：database, ms-access

MS ACCESS 中减号查询的正确语法是什么

> 我想比较 2 个查询的整个结果集，而不仅仅是键列比较

例如：

> hello 表数据：id,name,address
> 
> hello1 表数据：new_id,new_name,new_address

我想找出在任何列中都有更改数据的所有客户。

我给出了以下查询。它失败了

```
select h.* from hello h
minus
select h1.* from hello1 h1 
```

请让我知道正确的查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:47:44.673

One possibility is NOT IN. There is no such thing as a minus query in MS Access.

```
select h.* from hello h
WHERE uniqueid NOT IN
(select uniqueid from hello1 h1) 
```

For a purely sql solution, you need, say:

```
SELECT t.* FROM Table t
LEFT JOIN NewTable n
ON t.ID = n.ID
WHERE t.Field1 & "" <> n.Field1 & ""
   OR t.Field2 & "" <> n.Field2 & "" 
```

However, it is easier using VBA.

# php - Magento 按实体 ID 降序排序

> ID：11282434
> 
> 赞同：0
> 
> 时间：2012-07-01T13:38:49.917
> 
> 标签：php, magento

我希望修改默认的 Magento (1.6) 目录排序以添加**按产品实体 ID 排序**的选项，然后将其设为默认排序。

（在 StackOverflow 和 Google 上进行了搜索，但只能找到适用于旧 Magento 版本或编辑核心文件的解决方案。）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:33:08.677

这个[http://blog.chapagain.com.np/magento-join-filter-select-and-sort-attributes-fields-and-tables/](http://blog.chapagain.com.np/magento-join-filter-select-and-sort-attributes-fields-and-tables/)是一篇很好的文章，它提供了有关如何过滤和排序集合的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T13:20:44.933

在不更改任何核心文件的情况下进行此操作的最佳方法是复制位于以下位置的 Toolbar.php 文件：

```
/app/code/core/Mage/Catalog/Block/Product/List/Toolbar.php 
```

然后在下面创建一个新的目录路径（如果你还没有创建一个）：

```
/app/code/local/Mage/Catalog/Block/Product/List/Toolbar.php 
```

现在从第 232 行替换以下内容：

```
 if ($this->getCurrentOrder()) {
        $this->_collection->setOrder($this->getCurrentOrder(), $this->getCurrentDirection());
    } 
```

至

```
if ($this->getCurrentOrder()) {
if(($this->getCurrentOrder())=='position'){ //defines the sort option
//sort by entity_id (descending)
$this->_collection->addAttributeToSort('entity_id','desc');
} else {
$this->_collection->setOrder($this->getCurrentOrder(),$this->getCurrentDirection());
}
} 
```

最后，在您的 Magento 后端重新索引和刷新缓存并准备就绪。

# c++ - 为什么 range-for 找不到我的 std::istream_iterator 的 begin 和 end 重载？

> ID：11282437
> 
> 赞同：11
> 
> 时间：2012-07-01T13:39:03.980
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, istream-iterator

我有这样的代码

```
std::ifstream file(filename, std::ios_base::in);
if(file.good())
{
    file.imbue(std::locale(std::locale(), new delimeter_tokens()));
    for(auto& entry : std::istream_iterator<std::string>(file))
    {
        std::cout << entry << std::endl;    
    }
}
file.close(); 
```

其中`std::istream_iterator<std::string>`和 `begin()`定义`end()` 如下

```
template<class T>
std::istream_iterator<T> begin(std::istream_iterator<T>& stream)
{
    return stream;
}

template<class T>
std::istream_iterator<T> end(std::istream_iterator<T>& stream)
{
    return std::istream_iterator<T>();
} 
```

这也是**Mark Nelson**在 Dobb 博士的文章中所写的[内容](http://www.drdobbs.com/cpp/auto-types-and-range-based-for-statement/232900460?pgno=2)。唉，代码无法在我的 Visual Studio 2012 上编译并显示错误消息

> 错误 C3312：找不到类型“std::istream_iterator<_Ty>”的可调用“开始”函数

和

> 错误 C3312：找不到类型“std::istream_iterator<_Ty>”的可调用“结束”函数

**问题：**有什么我没有注意到的，编译器中的错误（不太可能，但以防万一）或者......嗯，有什么想法吗？

[正如Xeo](https://stackoverflow.com/users/500104/xeo) 所建议的那样，这个问题得到了很大的清理。为了提供更多背景和参考，这与我在 Stackoverflow 上的[另一个问题](https://stackoverflow.com/questions/11269678/how-to-capture-0-2-groups-in-c-regular-expressions-and-print-them)有关，我想知道如何使基于行的解析比通常的循环更干净。从互联网上进行了一些编码和检查，我有一个工作草图如下

```
std::ifstream file(filename, std::ios_base::in);
if(file.good())
{               
    file.imbue(std::locale(std::locale(), new delimeter_tokens()));
    for(auto& entry : istream_range<std::string>(file)
    {
        std::cout << entry << std::endl;    
    }
}
file.close(); 
```

但我试图纠正一些轻微的障碍。我认为写成无法编译的代码看起来会更自然，而不像

```
for(auto& entry : istream_range<std::string>(file) 
```

请注意不同的迭代器。**demeter_tokens**的定义就像[Nawaz](https://stackoverflow.com/users/415784/nawaz)[在这里](https://stackoverflow.com/questions/5607589/right-way-to-split-an-stdstring-into-a-vectorstring)展示的那样（代码不重复），而**istream_range**的定义就像代码综合博客中[的一样](http://www.codesynthesis.com/~boris/blog/2012/05/16/cxx11-range-based-for-loop/)。我认为 begin 和 end 实现应该可以工作，正如前面提到的代码合成博客文章中所宣传的那样

> 最后一条规则（回退到独立的 begin() 和 end() 函数）允许我们以非侵入方式将现有容器调整为基于范围的 for 循环接口。

因此，我的问题具有所有（ir）相关背景。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T14:14:00.913

`T foo[N]`如果对原生数组 ( ) 和成员`begin`/的特殊处理`end`没有产生任何结果，则 Ranged-for 依赖于 ADL 。

`§6.5.4 [stmt.ranged] p1`

> *   否则，*begin-expr*和*end-expr*分别是`begin(__range)`和`end(__range)`，**其中`begin`和`end`使用参数相关查找 (3.4.2) 进行查找**。出于此名称查找的目的，命名空间`std`是一个关联的命名空间。

您的问题是，关联的命名空间`std::istream_iterator`是（显然）`namespace std`，而不是全局命名空间。

`§3.4.2 [basic.lookup.argdep] p2`

> 对于函数调用中的每个参数类型`T`，有一组零个或多个关联的命名空间和一组零个或多个关联的类需要考虑。命名空间和类的集合完全由函数参数的类型决定 [...]。
> 
> *   如果`T`是基本类型，则其关联的命名空间和类集都是空的。
> *   **如果`T`是类类型**（包括联合），其关联的类是：类本身；它所属的类别(如有的话)；及其直接和间接基类。**其关联名称空间是其关联类是其成员的名称空间。**此外，如果 T 是类模板特化，则其关联的命名空间和类还包括：与为模板类型参数提供的模板参数的类型相关的命名空间和类 [...]。

请注意第二个项目符号的最后（引用）部分。这基本上意味着使用一个作为全局命名空间成员的类作为模板参数可以使代码工作：

```
#include <iterator>
#include <iostream>

template<class T>
std::istream_iterator<T> begin(std::istream_iterator<T> is){
  return is;
}
template<class T>
std::istream_iterator<T> end(std::istream_iterator<T>){
  return std::istream_iterator<T>();
}

struct foo{};

std::istream& operator>>(std::istream& is, foo){
  return is;
}

int main(){
  for(foo f : std::istream_iterator<foo>(std::cin))
  //                                ^^^
  // make global namespace one of the associated namespaces
    ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:56:12.507

由于参数依赖查找，编译器尝试在命名空间中查找`begin()`和。如果你把你的函数放在那里，代码就会编译。`end()``std`

由于名称查找在 C++ 中是一个复杂的问题，我不完全确定编译器的行为是否正确。

# php - 通过 URL 将 PHP 变量传递给外部表单

> ID：11282440
> 
> 赞同：0
> 
> 时间：2012-07-01T13:39:34.190
> 
> 标签：php, javascript, variables, global-variables

我想知道是否有人可以帮助我。

我`Session variable`在 HTML 表单中捕获 a ，如下所示：

```
$lid = $_SESSION['lid']; 
```

从这个主要的 HTML 表单中，使用以下代码行，然后我使用“mysqlajaxtableeditor”软件加载一个外部 ajax 表：

```
</script> 
 <!-- Set ajax url -->
        <script type="text/javascript">
            trackHistory = false;
            var ajaxUrl = 'Example3.php';
        </script>

<body id="page2" onload="toAjaxTableEditor('update_html','');"> 
```

我想要做的是`Session variable`从主窗体中捕获并将其传递给外部 ajax 表。

我已经阅读了该网站上的许多帖子，希望能够从中解决我的问题，但我似乎无法传递价值。

根据我的阅读，我在我的主要表单上尝试了以下内容： `var ajaxUrl = 'Example3.php?lid=$lid';`，然后在接收 AJAX 表脚本中，`$lid = $_GET['lid'];`但它不起作用，我不确定我哪里出错了。

有关其他信息，我在下面发布了 AJAX 表代码：

```
class Example1 extends Common
{
    function initiateEditor()
   {
      $tableColumns['findid'] = array('display_text' => 'Find ID', 'perms' => 'TV');
      $tableColumns['dateoftrip'] = array('display_text' => 'Date of Trip', 'perms' => 'ETV');
      $tableColumns['finddescription'] = array('display_text' => 'Find Description', 'perms' => 'ETV');
      $tableColumns['detectorname'] = array('display_text' => 'Detector Used', 'perms' => 'EVT');
      $tableColumns['searchheadname'] = array('display_text' => 'Search Head Used', 'perms' => 'ETV');
      $tableColumns['pasref'] = array('display_text' => 'PAS Ref.', 'perms' => 'ETV');

      $tableName = 'finds';
      $primaryCol = 'findid';
      $errorFun = array(&$this,'logError');
      $permissions = 'EID';

      require_once('php/AjaxTableEditor.php');
      $this->Editor = new AjaxTableEditor($tableName,$primaryCol,$errorFun,$permissions,$tableColumns);
      $this->Editor->setConfig('tableInfo','cellpadding="1" width="800" class="mateTable"');
      $this->Editor->setConfig('tableTitle','');
      $this->Editor->setConfig('orderByColumn','dateoftrip');
      $this->Editor->setConfig('editRowTitle','Edit Details');
      $this->Editor->setConfig('iconTitle','Edit Find Details');
   }

   function Example1()
   {
      if(isset($_POST['json']))
      {
         session_start();
         $this->mysqlConnect();
         if(ini_get('magic_quotes_gpc'))
         {
            $_POST['json'] = stripslashes($_POST['json']);
         }
         if(function_exists('json_decode'))
         {
            $data = json_decode($_POST['json']);
         }
         else
         {
            require_once('php/JSON.php');
            $js = new Services_JSON();
            $data = $js->decode($_POST['json']);
         }
         if(empty($data->info) && strlen(trim($data->info)) == 0)
         {
            $data->info = '';
         }
         $this->initiateEditor();
         $this->Editor->main($data->action,$data->info);
         if(function_exists('json_encode'))
         {
            echo json_encode($this->Editor->retArr);
         }
         else
         {
            echo $js->encode($this->Editor->retArr);
         }

      }
   }
}
$lte = new Example1();
?> 
```

我只是想知道是否有人可以看看这个，让我知道我哪里出错了？

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:57:36.443

经过大量的工作和搜索互联网，我找到了解决方案。

在 HMTL 页面中，我写道：

```
 <!-- Set ajax url -->
        <script type="text/javascript">
            trackHistory = false;
            var ajaxUrl = 'ajaxtable.php?lid=$lid';
        </script>
<body id="page2" onload="toAjaxTableEditor('update_html','');"> 
```

在我收到的 AJAX 表编辑器软件脚本中，我写道：

```
function initiateEditor()
{
    $tableColumns['locationid'] = array('display_text' => '', 'perms' => '','data_filters' => array('filters' => array("='".$_SESSION['lid']."'")), 'default' => $_SESSION['lid']); 
```

我希望这对将来的某人有所帮助。

亲切的问候

# sql - 动态搜索给定表的列

> ID：11282441
> 
> 赞同：0
> 
> 时间：2012-07-01T13:39:43.567
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures, dynamic-sql

我需要为我正在构建的 java 应用程序创建一个搜索，用户可以在其中根据他们当前正在查看的表和他们提供的搜索词搜索 SQL 数据库。起初我打算做这样简单的事情：

```
SELECT * FROM <table name> WHERE CAST((SELECT COLUMN_NAME 
  FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '<table name>') 
  AS VARCHAR) LIKE '%<search term>%' 
```

但是该子查询返回多个结果，因此我尝试创建一个过程来遍历给定表中的所有列，并将任何相关字段放入结果表中，如下所示：

```
CREATE PROC sp_search
    @tblname VARCHAR(4000),
    @term VARCHAR(4000)
AS
    SET nocount on
    SELECT COLUMN_NAME 
    INTO #tempcolumns
    FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @tblname

    ALTER TABLE #tempcolumns
    ADD printed BIT,
        num SMALLINT IDENTITY

    UPDATE #tempcolumns
        SET printed = 0

    DECLARE @colname VARCHAR(4000),
        @num SMALLINT
    WHILE EXISTS(SELECT MIN(num) FROM #tempcolumns WHERE printed = 0)
    BEGIN
        SELECT @num = MIN(num) 
            FROM #tempcolumns 
            WHERE printed = 0
        SELECT @colname = COLUMN_NAME 
            FROM #tempcolumns 
            WHERE num = @num
        SELECT * INTO #results FROM @tblname WHERE CAST(@colname AS VARCHAR) 
                    LIKE '%' + @term + '%' --this is where I'm having trouble
        UPDATE #tempcolumns
            SET printed = 1
            WHERE @num = num

    END

    SELECT * FROM #results
GO 
```

这有两个问题：首先是它以某种方式陷入了无限循环，其次我无法从@tblname 中选择任何内容。我也尝试过使用动态 sql，但我不知道如何从中获得结果，或者这是否可能。

这是我在大学做的一项任务，经过数小时的努力，我已经得到了这个结果。有什么办法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:47:34.353

您进入了一个无限循环，因为`EXISTS(SELECT MIN(num) FROM #tempcolumns WHERE printed = 0)`即使没有匹配项也将始终返回一行 - 您需要`EXISTS (SELECT * ....`改为

要使用动态 SQL，您需要构建要运行的 SQL 语句的字符串 (varchar)，然后使用`EXEC`

例如：

```
 declare @s varchar(max)
 select @s = 'SELECT * FROM mytable '
 Exec (@s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:30:57.177

1.  您只需要搜索实际包含字符串的列，而不是表中的所有列（可能包括整数、日期、GUID 等）。
2.  您根本不需要#temp 表（当然也不需要##temp 表）。
3.  您需要使用动态 SQL（尽管我不确定到目前为止这是否是您课程的一部分）。
4.  我发现[遵循一些](https://sqlblog.org/2008/10/30/my-stored-procedure-best-practices-checklist)您已经违反的简单约定是有益的：
    *   `PROCEDURE`不使用`PROC`- 它不是“prock”，而是“存储过程”。
    *   [引用任何对象时使用`dbo.`（或备用模式）前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)。
    *   将您的程序主体包裹在`BEGIN`/中`END`。
    *   大量使用元音。您是否节省了那么多击键，更不用说时间，说`@tblname`而不是`@tablename`or `@table_name`？我不是在为特定的约定而战，而是以牺牲可读性为代价来保存字符在 70 年代失去了它的魅力。
    *   不要`sp_`为存储过程使用前缀 - 此前缀在 SQL Server 中具有特殊含义。为它的作用命名过程。它不需要前缀，就像我们知道它们是表一样，即使没有`tbl`前缀。如果您确实需要一个前缀，请使用另一个前缀，`usp_`或者`proc_`，但我个人认为该前缀不会为您提供任何您还没有的信息。
    *   由于表是使用 Unicode 存储的（您的某些列可能也是），您的参数应该是`NVARCHAR`，而不是`VARCHAR`. 并且标识符的上限为 128 个字符，因此没有理由支持超过 257 个字符的`@tablename`.
    *   [用分号终止语句](https://sqlblog.org/2009/09/03/ladies-and-gentlemen-start-your-semi-colons)。
    *   [使用目录视图而不是`INFORMATION_SCHEMA`](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)- 尽管后者是您的教授可能已经教过并且可能期望的。

```
CREATE PROCEDURE dbo.SearchTable
    @tablename NVARCHAR(257),
    @term      NVARCHAR(4000)
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX);

    SET @sql = N'SELECT * FROM ' + @tablename + ' WHERE 1 = 0'; 

    SELECT @sql = @sql + ' 
      OR ' + c.name + ' LIKE ''%' + REPLACE(@term, '''', '''''') + '%'''
    FROM 
      sys.all_columns AS c
    INNER JOIN 
      sys.types AS t
      ON c.system_type_id = t.system_type_id
      AND c.user_type_id = t.user_type_id
    WHERE 
      c.[object_id] = OBJECT_ID(@tablename)
      AND t.name IN (N'sysname', N'char', N'nchar', 
        N'varchar', N'nvarchar', N'text', N'ntext');

    PRINT @sql;

    -- EXEC sp_executesql @sql;
END
GO 
```

当您很高兴它正在输出`SELECT`您所追求的查询时，注释掉`PRINT`并取消注释`EXEC`.

# objective-c - 当键盘出现在 iOS 中时，将 UIView 上移

> ID：11282449
> 
> 赞同：74
> 
> 时间：2012-07-01T13:41:45.517
> 
> 标签：objective-c, ios, xcode, uiview, uiviewcontroller

我有一个 UIView，它不在 UIScrollView 内。当键盘出现时，我想上移我的视图。在我尝试使用此解决方案之前：[当键盘存在时，如何使 UITextField 向上移动？](https://stackoverflow.com/questions/1126726/how-to-make-a-uitextfield-move-up-when-keyboard-is-present).

它工作正常。但是在文本字段中插入数据后，它会将我带到另一个视图，当我回到这个页面时，它只是在跳跃，我看不到我的文本字段。这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2014-01-21T11:37:58.627

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
}

#pragma mark - keyboard movements
- (void)keyboardWillShow:(NSNotification *)notification
{
    CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    [UIView animateWithDuration:0.3 animations:^{
        CGRect f = self.view.frame;
        f.origin.y = -keyboardSize.height;
        self.view.frame = f;
    }];
}

-(void)keyboardWillHide:(NSNotification *)notification
{
    [UIView animateWithDuration:0.3 animations:^{
        CGRect f = self.view.frame;
        f.origin.y = 0.0f;
        self.view.frame = f;
    }];
} 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-07-01T13:53:56.710

使用以下代码来显示和隐藏键盘

```
//Declare a delegate, assign your textField to the delegate and then include these methods

-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];
    return YES;
}

- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];

    [self.view endEditing:YES];
    return YES;
}

- (void)keyboardDidShow:(NSNotification *)notification
{
    // Assign new frame to your view 
    [self.view setFrame:CGRectMake(0,-110,320,460)]; //here taken -110 for example i.e. your view will be scrolled to -110\. change its value according to your requirement.

}

-(void)keyboardDidHide:(NSNotification *)notification
{
    [self.view setFrame:CGRectMake(0,0,320,460)];
} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-07-01T13:53:33.273

我写了一个小类别`UIView`来管理临时滚动的东西，而不需要将整个东西包装成`UIScrollView`. 我在这里使用动词“滚动”可能并不理想，因为它可能会让您认为涉及滚动视图，而实际上没有——我们只是在为 a `UIView`（或`UIView`子类）的位置设置动画。

其中嵌入了许多适合我的表单和布局的神奇数字，可能不适合您的，因此我鼓励对其进行调整以适应您的特定需求。

UIView+FormScroll.h：

```
#import <Foundation/Foundation.h>

@interface UIView (FormScroll) 

-(void)scrollToY:(float)y;
-(void)scrollToView:(UIView *)view;
-(void)scrollElement:(UIView *)view toPoint:(float)y;

@end 
```

UIView+FormScroll.m:

```
#import "UIView+FormScroll.h"

@implementation UIView (FormScroll)

-(void)scrollToY:(float)y
{

    [UIView beginAnimations:@"registerScroll" context:NULL];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:0.4];
    self.transform = CGAffineTransformMakeTranslation(0, y);
    [UIView commitAnimations];

}

-(void)scrollToView:(UIView *)view
{
    CGRect theFrame = view.frame;
    float y = theFrame.origin.y - 15;
    y -= (y/1.7);
    [self scrollToY:-y];
}

-(void)scrollElement:(UIView *)view toPoint:(float)y
{
    CGRect theFrame = view.frame;
    float orig_y = theFrame.origin.y;
    float diff = y - orig_y;
    if (diff < 0) {
        [self scrollToY:diff];
    }
    else {
        [self scrollToY:0];
    }

}

@end 
```

将其导入您的 UIViewController，然后您可以执行

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self.view scrollToView:textField];
}

-(void) textFieldDidEndEditing:(UITextField *)textField
{
    [self.view scrollToY:0];
    [textField resignFirstResponder];
} 
```

...管他呢。该类别为您提供了三种很好的方法来调整视图的位置。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2016-05-03T11:57:25.523

将视图绑定到键盘也是一个选项（请参阅答案底部的 GIF）

## 斯威夫特 4

使用扩展：（未经过全面测试）

```
extension UIView{
    func bindToKeyboard(){
        NotificationCenter.default.addObserver(self, selector: #selector(UIView.keyboardWillChange(notification:)), name: Notification.Name.UIKeyboardWillChangeFrame, object: nil)
    }

    func unbindToKeyboard(){
        NotificationCenter.default.removeObserver(self, name: Notification.Name.UIKeyboardWillChangeFrame, object: nil)
    }
    @objc
    func keyboardWillChange(notification: Notification) {
        let duration = notification.userInfo![UIKeyboardAnimationDurationUserInfoKey] as! Double
        let curve = notification.userInfo![UIKeyboardAnimationCurveUserInfoKey] as! UInt
        let curFrame = (notification.userInfo![UIKeyboardFrameBeginUserInfoKey] as! NSValue).cgRectValue
        let targetFrame = (notification.userInfo![UIKeyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
        let deltaY = targetFrame.origin.y - curFrame.origin.y

        UIView.animateKeyframes(withDuration: duration, delay: 0.0, options: UIViewKeyframeAnimationOptions(rawValue: curve), animations: {
            self.frame.origin.y+=deltaY

        },completion: nil)

    }
} 
```

## 斯威夫特 2 + 3

使用扩展：

```
extension UIView{
    func bindToKeyboard(){
        NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(UIView.keyboardWillChange(_:)), name: UIKeyboardWillChangeFrameNotification, object: nil)
    }

    func keyboardWillChange(notification: NSNotification) {

        let duration = notification.userInfo![UIKeyboardAnimationDurationUserInfoKey] as! Double
        let curve = notification.userInfo![UIKeyboardAnimationCurveUserInfoKey] as! UInt
        let curFrame = (notification.userInfo![UIKeyboardFrameBeginUserInfoKey] as! NSValue).CGRectValue()
        let targetFrame = (notification.userInfo![UIKeyboardFrameEndUserInfoKey] as! NSValue).CGRectValue()
        let deltaY = targetFrame.origin.y - curFrame.origin.y

        UIView.animateKeyframesWithDuration(duration, delay: 0.0, options: UIViewKeyframeAnimationOptions(rawValue: curve), animations: {
                self.frame.origin.y+=deltaY

        },completion: nil)

    }  
} 
```

用法：

```
// view did load...
textField.bindToKeyboard() 
```

...

```
// view unload
textField.unbindToKeyboard() 
```

结果：
[![在此处输入图像描述](../Images/b11d523391f73bb234e6adb304fe63be.png)](https://i.stack.imgur.com/1CW5i.gif)

**重要**
不要忘记在视图卸载时移除观察者

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-02-26T21:19:03.960

> 我发现[Duncs 的答案](https://stackoverflow.com/a/21257034/2668226)非常有用，您可以在下面找到我自己的（重构）版本：

* * *

### 主要变化

1.  现在**动态获取键盘大小**，而不是硬编码值
2.  将 UIView 动画提取到它自己的方法中以[防止重复代码](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)
3.  允许将持续时间传递到方法中，而不是硬编码

* * *

```
- (void)viewWillAppear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
}

- (void)viewWillDisappear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
} 
```

* * *

```
- (void)keyboardWillShow:(NSNotification *)notification {
    CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;

    float newVerticalPosition = -keyboardSize.height;

    [self moveFrameToVerticalPosition:newVerticalPosition forDuration:0.3f];
}

- (void)keyboardWillHide:(NSNotification *)notification {
    [self moveFrameToVerticalPosition:0.0f forDuration:0.3f];
}

- (void)moveFrameToVerticalPosition:(float)position forDuration:(float)duration {
    CGRect frame = self.view.frame;
    frame.origin.y = position;

    [UIView animateWithDuration:duration animations:^{
        self.view.frame = frame;
    }];
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-03-06T21:20:05.230

基于 Daniel Krom 的解决方案。这是**swift 3.0**中的版本。与**AutoLayout**配合得很好，并在键盘出现时移动整个视图。

```
extension UIView {

    func bindToKeyboard(){
        NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillChange), name: NSNotification.Name.UIKeyboardWillChangeFrame, object: nil)
    }

    func unbindFromKeyboard(){
        NotificationCenter.default.removeObserver(self, name: NSNotification.Name.UIKeyboardWillChangeFrame, object: nil)
    }

    @objc
    func keyboardWillChange(notification: NSNotification) {

        guard let userInfo = notification.userInfo else { return }

        let duration = userInfo[UIKeyboardAnimationDurationUserInfoKey] as! Double
        let curve = userInfo[UIKeyboardAnimationCurveUserInfoKey] as! UInt
        let curFrame = (userInfo[UIKeyboardFrameBeginUserInfoKey] as! NSValue).cgRectValue
        let targetFrame = (userInfo[UIKeyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
        let deltaY = targetFrame.origin.y - curFrame.origin.y

        UIView.animateKeyframes(withDuration: duration, delay: 0.0, options: UIViewKeyframeAnimationOptions(rawValue: curve), animations: {
            self.frame.origin.y += deltaY
        })
    }  
} 
```

使用方法： 添加`bindToKeyboard`功能`viewDidLoad`如下：

```
override func viewDidLoad() {
    super.viewDidLoad()

    view.bindToKeyboard()
} 
```

`unbindFromKeyboard`并在 deinit 中添加函数：

```
deinit {
    view.unbindFromKeyboard()
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-06-20T16:52:09.910

# 斯威夫特 5

上面丹尼尔克罗姆回答的更新版本：

```
extension UIView {

    func bindToKeyboard() {
        NotificationCenter.default.addObserver(
            self,
            selector: #selector(UIView.keyboardWillChange(notification:)),
            name: UIResponder.keyboardWillChangeFrameNotification,
            object: nil
        )
    }

    func unbindToKeyboard() {
        NotificationCenter.default.removeObserver(
            self,
            name: UIResponder.keyboardWillChangeFrameNotification,
            object: nil
        )
    }

    @objc func keyboardWillChange(notification: Notification) {
        let duration = notification.userInfo![UIResponder.keyboardAnimationDurationUserInfoKey] as! Double
        let curve = notification.userInfo![UIResponder.keyboardAnimationCurveUserInfoKey] as! UInt
        let curFrame = (notification.userInfo![UIResponder.keyboardFrameBeginUserInfoKey] as! NSValue).cgRectValue
        let targetFrame = (notification.userInfo![UIResponder.keyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
        let deltaY = targetFrame.origin.y - curFrame.origin.y

        UIView.animateKeyframes(withDuration: duration, delay: 0.0, options: UIView.KeyframeAnimationOptions(rawValue: curve), animations: {
            self.frame.origin.y += deltaY
        })
    }

} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-04-07T13:15:28.317

对于与 KeyBoard 相关的所有问题，只需使用 IQKeyBoardManager 即可。 [https://github.com/hackiftekhar/IQKeyboardManager](https://github.com/hackiftekhar/IQKeyboardManager)。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-04-16T09:07:22.460

试试这个：-

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector (keyboardDidShow:)
                                                 name: UIKeyboardDidShowNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector (keyboardDidHide:)
                                                 name: UIKeyboardDidHideNotification object:nil];

-(void) keyboardDidShow: (NSNotification *)notif
    {
        CGSize keyboardSize = [[[notif userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
        UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, keyboardSize.height+[self getTableView].tableFooterView.frame.size.height, 0.0);

        [self getTableView].contentInset = contentInsets;
        [self getTableView].scrollIndicatorInsets = contentInsets;

        CGRect rect = self.frame; rect.size.height -= keyboardSize.height;
        if (!CGRectContainsPoint(rect, self.frame.origin))
        {
            CGPoint scrollPoint = CGPointMake(0.0, self.frame.origin.y - (keyboardSize.height - self.frame.size.height));
            [[self getTableView] setContentOffset:scrollPoint animated:YES];
        }
    }

-(void) keyboardDidHide: (NSNotification *)notif
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    [self getTableView].contentInset = contentInsets;
    [self getTableView].scrollIndicatorInsets = contentInsets;
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-08-17T05:20:57.183

基于[theDunc 的回答](https://stackoverflow.com/questions/11282449/move-uiview-up-when-the-keyboard-appears-in-ios/21257034#21257034)，但使用 Swift 和 Autolayout 编写。

```
@IBOutlet weak var bottomConstraint: NSLayoutConstraint! // connect the bottom of the view you want to move to the bottom layout guide

override func viewWillAppear(animated: Bool) {
    super.viewWillAppear(animated)
    NSNotificationCenter.defaultCenter().addObserver(self,
                                                     selector: #selector(ConversationViewController.keyboardWillShow(_:)),
                                                     name: UIKeyboardWillShowNotification,
                                                     object: nil)

    NSNotificationCenter.defaultCenter().addObserver(self,
                                                     selector: #selector(ConversationViewController.keyboardWillHide(_:)),
                                                     name: UIKeyboardWillHideNotification,
                                                     object: nil)
}

override func viewWillDisappear(animated: Bool) {
    NSNotificationCenter.defaultCenter().removeObserver(self, name: UIKeyboardWillShowNotification, object: nil)
    NSNotificationCenter.defaultCenter().removeObserver(self, name: UIKeyboardWillHideNotification, object: nil)
    super.viewWillDisappear(animated)
}

// MARK: - Keyboard events

func keyboardWillShow(notification: NSNotification) {
    if let userInfo = notification.userInfo,
        keyboardFrame = userInfo[UIKeyboardFrameBeginUserInfoKey]
    {
        let keyboardSize = keyboardFrame.CGRectValue().size
        self.bottomConstraint.constant = keyboardSize.height
        UIView.animateWithDuration(0.3) {
            self.view.layoutIfNeeded()
        }
    }
}

func keyboardWillHide(notification: NSNotification) {
    self.bottomConstraint.constant = 0
    UIView.animateWithDuration(0.3) {
        self.view.layoutIfNeeded()
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-04-03T02:07:22.223

我已经实现了一个自定义控制器，它动态计算键盘的大小，当它出现和消失时滚动 textFields，即使在设备旋转期间也是如此。适用于所有 iOS 设备。只需简单地继承控制器即可拥有您需要的东西。您可以在以下链接中找到所有说明：[https ://github.com/mikthebig/ios-textfield-scroll](https://github.com/mikthebig/ios-textfield-scroll)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-10-25T10:53:35.943

不添加观察者通知的简单解决方案

```
-(void)setViewMovedUp:(BOOL)movedUp
{
    [UIView beginAnimations:nil context:NULL];

    [UIView setAnimationDuration:0.3]; // if you want to slide up the view

    CGRect rect = self.view.frame;

    if (movedUp)
    {
        // 1\. move the view's origin up so that the text field that will be hidden come above the keyboard
        // 2\. increase the size of the view so that the area behind the keyboard is covered up.
        rect.origin.y -= kOFFSET_FOR_KEYBOARD;
        rect.size.height += kOFFSET_FOR_KEYBOARD;
    }
    else
    {
        // revert back to the normal state.
        rect.origin.y += kOFFSET_FOR_KEYBOARD;
        rect.size.height -= kOFFSET_FOR_KEYBOARD;
    }
    self.view.frame = rect;

    [UIView commitAnimations];
}

-(void)textFieldDidEndEditing:(UITextField *)sender
{
     if  (self.view.frame.origin.y >= 0)
        {
            [self setViewMovedUp:NO];
        }
}

-(void)textFieldDidBeginEditing:(UITextField *)sender
{
        //move the main view, so that the keyboard does not hide it.
        if  (self.view.frame.origin.y >= 0)
        {
            [self setViewMovedUp:YES];
        }
} 
```

在哪里

```
#define kOFFSET_FOR_KEYBOARD 80.0 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-07-28T20:50:39.057

干得好。不过，我已将此代码与 UIView 一起使用。您应该能够对滚动视图进行这些调整。

```
 func addKeyboardNotifications() {
        NotificationCenter.default.addObserver(self,
                                               selector: #selector(keyboardWillShow(notification:)),
                                               name: NSNotification.Name.UIKeyboardWillShow, object: nil)
        NotificationCenter.default.addObserver(self,
                                               selector: #selector(keyboardWillHide(notification:)),
                                               name: NSNotification.Name.UIKeyboardWillHide, object: nil)
    }

    func keyboardWillShow(notification: NSNotification) {

        if let keyboardSize = (notification.userInfo?[UIKeyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue {
            let duration = notification.userInfo![UIKeyboardAnimationDurationUserInfoKey] as! Double
// if using constraints            
// bottomViewBottomSpaceConstraint.constant = keyboardSize.height
self.view.frame.origin.y -= keyboardSize.height
            UIView.animate(withDuration: duration) {
                self.view.layoutIfNeeded()
            }
        }
    }
    func keyboardWillHide(notification: NSNotification) {

        let duration = notification.userInfo![UIKeyboardAnimationDurationUserInfoKey] as! Double
//if using constraint
//        bottomViewBottomSpaceConstraint.constant = 0
self.view.frame.origin.y = 0
        UIView.animate(withDuration: duration) {
            self.view.layoutIfNeeded()
        }
    } 
```

不要忘记在正确的位置删除通知。

```
func removeKeyboardNotifications() {
    NotificationCenter.default.removeObserver(self, name: NSNotification.Name.UIKeyboardWillShow, object: nil)
    NotificationCenter.default.removeObserver(self, name: NSNotification.Name.UIKeyboardWillHide, object: nil)
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-01-25T20:07:54.157

**斯威夫特 4**

```
NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillChange), name: .UIKeyboardWillChangeFrame, object: nil)

@objc func keyboardWillChange(notification: NSNotification) {

        let duration = notification.userInfo![UIKeyboardAnimationDurationUserInfoKey] as! Double
        let curve = notification.userInfo![UIKeyboardAnimationCurveUserInfoKey] as! UInt
        let curFrame = (notification.userInfo![UIKeyboardFrameBeginUserInfoKey] as! NSValue).cgRectValue
        let targetFrame = (notification.userInfo![UIKeyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
        let deltaY = targetFrame.origin.y - curFrame.origin.y

        UIView.animateKeyframes(withDuration: duration, delay: 0.0, options: UIViewKeyframeAnimationOptions(rawValue: curve), animations: {
            self.YourView.frame.origin.y+=deltaY
        },completion: nil)
    } 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-03-12T16:31:38.047

万一有人在**Swift**中寻找解决方案，请将其放入您的代码中：

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShow(notification:)), name: .UIKeyboardWillShow, object: nil)
    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillHide(notification:)), name: .UIKeyboardWillHide, object: nil)
}

override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)

    NotificationCenter.default.removeObserver(self, name: .UIKeyboardWillShow, object: nil)
    NotificationCenter.default.removeObserver(self, name: .UIKeyboardWillHide, object: nil)
}

@objc func keyboardWillShow(notification: Notification) {
    if let userInfo = notification.userInfo {
        if let keyboardSize = (userInfo[UIKeyboardFrameBeginUserInfoKey] as? NSValue)?.cgRectValue {
            UIView.animate(withDuration: 0.3) {
                var alteredFrame = self.view.frame
                alteredFrame.origin.y = -keyboardSize.height
                self.view.frame = alteredFrame
            }
        }
    }
}

@objc func keyboardWillHide(notification: Notification) {
    UIView.animate(withDuration: 0.3) {
        var alteredFrame = self.view.frame
        alteredFrame.origin.y = 0.0
        self.view.frame = alteredFrame
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-08T06:56:43.863

如果它在表格的单元格中（即使是），它可以**轻松自动**地完成。`textfield``table.scrollable = NO`

**注意**：桌子的位置和大小必​​须合理。例如：

*   如果表格的 y 位置是从视图底部算起的 100，则 300 高度的键盘将与整个表格重叠。
*   如果 table's`height = 10`和`textfield`in 它必须在键盘出现时向上滚动 100 才能可见，则该文本字段将超出表格的范围。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-04-20T16:23:06.987

声明一个委托，将您的文本字段分配给委托，然后包含这些方法。

假设您有一个包含电子邮件和密码文本字段的登录表单，此代码将非常适合：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    [self.emailTextField resignFirstResponder];
    [self.passwordTextField resignFirstResponder];

}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {

    if (self.emailTextField == textField) {
        [self.passwordTextField becomeFirstResponder];
    } else {
        [self.emailTextField resignFirstResponder];
        [self.passwordTextField resignFirstResponder];
    }
    return NO;
}
- (void)viewWillAppear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
}

- (void)viewWillDisappear:(BOOL)animated {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
}

#pragma mark - keyboard movements
- (void)keyboardWillShow:(NSNotification *)notification
{
    CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    [UIView animateWithDuration:0.3 animations:^{
        CGRect f = self.view.frame;
        f.origin.y = -0.5f * keyboardSize.height;
        self.view.frame = f;
    }];
}

-(void)keyboardWillHide:(NSNotification *)notification
{
    [UIView animateWithDuration:0.3 animations:^{
        CGRect f = self.view.frame;
        f.origin.y = 0.0f;
        self.view.frame = f;
    }];
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-04-28T17:22:39.317

我刚刚创建了一个轻量级键盘处理程序来跟随键盘框架。

用法：

```
 self.keyboardHandler = [EDKeyboardHandler new];

  [self.keyboardHandler listenWithBlock:^(KeyboardInfo *model)
  {
    //adjust view positions according to keyboard position here
  }]; 
```

并且 KeyboardInfo 模型具有以下属性：

```
typedef enum : NSUInteger {
    KeyboardStatusDidShow,
    KeyboardStatusWillShow,
    KeyboardStatusDidHide,
    KeyboardStatusWillHide,
} KeyboardStatus;

@interface KeyboardInfo:NSObject

@property (nonatomic,readonly) NSTimeInterval animationDuration;
@property (nonatomic,readonly) CGRect keyboardFrame;
@property (nonatomic,readonly) NSInteger animationCurve;
@property (nonatomic,readonly) KeyboardStatus status;

@end 
```

检查[GitHub](https://github.com/merend/EDKeyboardHandler)项目以获取详细信息和 cocoaPods 集成。

# sencha-touch-2 - SenchaSDKTools-2.0.0-beta3-windows 命令不起作用

> ID：11282455
> 
> 赞同：2
> 
> 时间：2012-07-01T13:42:09.723
> 
> 标签：sencha-touch-2

我已经在我的 windows Xp 32 位上安装了 SenchaSDKTools-2.0.0-beta3-windows。以下是我在命令提示符下运行的命令。

```
C:\Program Files\SenchaSDKTools-2.0.0-beta3>sencha app create MyApp c:\xampp\htdocs\sencha\myapp\ 
```

给出以下错误

> [错误] 当前工作目录 (C:\Program Files\SenchaSDKTools-2.0.0-beta3>) 不是有效的 SDK 目录。请在执行此命令之前“cd”到 SDK 目录。

环境变量已按照以下方式设置。

变量名：路径值：C:\Program Files\SenchaSDKTools-2.0.0-beta3

谁能弄清楚这个过程到底出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:52:37.930

****** *** **** *Sencha Touch 设置指南步骤（在 Window 中）******* *** *********

 ****1.  下载 Sencha Touch SDK 工具。（http://www.sencha.com/products/touch/download/ --> SDK Tools Beta for Developers）。运行 .exe 文件。它会将工具安装到默认路径。（即C:\Program Files\SenchaSDKTools-2.0.0-beta3）

2.  下载 Sencha Touch SDK。（下载根据 GPL 许可的开源版本文件。）。

3.  提取您在第 2 步中下载的 SDK。

4.  打开命令行终端（开始-> 运行-> 键入 cmd）。将目录路径更改为您刚刚在步骤 3 中提取的 SDK 路径。

5.  验证 Sencha Command 在您的机器上是否正常工作。所以输入煎茶。例如 sdkPath>sencha

    *   您将看到带有其他 sencha 命令详细信息的“Sencha Command v2.0.2”消息。
6.  通过键入以下内容在您的 Web 目录中创建应用程序。例如 sdkpath> sencha app create firstSenchaApp "path/ to/ www"

    （如果您的计算机中安装了 tomcat 7，请将路径指定为 \apache-tomcat-7.0.30-windows-x86\apache-tomcat-7.0.30\webapps） 注意：目录路径名中不能有空格。_（下划线），-（桌面）是允许的。

7.  如果在第 6 步中没有生成 app。可能有错误。有以下几种：

    *   如果出现错误消息“sencha' is not Recognized as an internal or external command, operable program or batch file.”，请按照以下步骤进行故障排除： SDK Tools 目录的路径被添加到系统的 PATH 环境变量中。从终端，运行 echo $PATH 或 echo %PATH% 。

        SDK 工具目录应显示在输出的一部分中。如果不是这种情况，请将其手动添加到您的 PATH 中。环境变量 SENCHA_SDK_TOOLS_{version} 设置，值为上述安装目录的绝对路径。例如：如果安装的版本是'2.0.0-beta2'，则必须设置一个SENCHA_SDK_TOOLS_2_0_0_BETA2。从终端运行 echo $SENCHA_SDK_TOOLS_2_0_0_BETA2 或 echo %SENCHA_SDK_TOOLS_2_0_0_BETA2% 在 Windows 上。

    如果输出为空，请手动设置环境变量。

    *   当前工作目录错误
    *   一个常见的错误是没有在有效的 SDK 目录或应用程序目录中运行 Sencha 命令。如果当前目录不是 SDK 或应用程序目录，“sencha”命令将回退到向后兼容模式。从 SDK Tools 版本“2.0.0-beta2”开始，您应该在这种情况下看到一个明确的警告：“当前工作目录 (...) 不是可识别的 Sencha SDK 或应用程序文件夹。在向后兼容模式下运行。” 因此，在这种情况下，请按照上面提到的正确步骤进行操作。参考： [http ://www.sencha.com/forum/showthread.php?192169-Important-SDK-Tools-Sencha-Command-Update](http://www.sencha.com/forum/showthread.php?192169-Important-SDK-Tools-Sencha-Command-Update)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:52:40.040

我认为您遇到了与我相同的问题；我试图从包含 sencha.bat 的文件夹中运行“sencha app create ...”。相反，您需要从 sencha-touch-2.0.1.1 文件夹（其中包含 .senchasdk 文件）运行“sencha app create...”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:47:29.357

请参阅[此先前的 SO 问题](https://stackoverflow.com/questions/13291742/warn-the-current-working-directory-c-xampp-htdocs-sencha-folder-is-not-a-re?lq=1)！拯救我的日子。

顺便说一句，如果您无法将 sencha-cmd 提取到 sdk 工具，请尝试在其他位置提取并将文件夹 [3.0.0.250] 复制到您的 sdk 工具 > [bin] 文件夹。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:09:07.063

您需要复制一个不可见的文件，名为`.senchasdk`. 确保它在文件夹中。****

# google-app-engine - 如何在 GAE 中使用投影？

> ID：11282456
> 
> 赞同：0
> 
> 时间：2012-07-01T13:42:10.007
> 
> 标签：google-app-engine, google-cloud-datastore

我有以下代码：

```
employees = Employee.all()
employees.projection('first_name')
employees.filter('passport_id =', passport_id)
employees.order('-added')
results = employees.fetch(5) 
```

不允许第二行：

```
AttributeError: 'Query' object has no attribute 'projection' 
```

另一种方法也返回错误：

```
 employees = db.Query(Employee, projection=('first_name'))
TypeError: __init__() got an unexpected keyword argument 'projection' 
```

但是，如果我正确阅读[了文档](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_projection)，则应该支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:11:35.203

您正在运行哪个版本的 AppEngine SDK？[在1.6.5 版本](http://googleappengine.blogspot.co.il/2012/04/app-engine-165-released.html)中添加了投影查询

# python - 如何在 MongoDB/Python/Django 中按名字和姓氏搜索用户

> ID：11282457
> 
> 赞同：0
> 
> 时间：2012-07-01T13:42:32.060
> 
> 标签：python, algorithm, mongodb, search

我正在使用 MongoDB 来存储数百万个用户文档。
每个文档都有一个`first_name`和`last_name`键（列）。
网站的访问者有一个*文本*框，用于为用户查询数据库。
我的目标是这样的输入：
`John Doe`并且 应该返回一个可能的名称列表，例如：、、、等......意思是
`Doe John`， 应该返回不区分名字/姓氏和“类似声音”的名字。
`Dow Jones`

`John Doe``Doe John``Dow Jones``Joan Doe``Johan Dow`

如何才能做到这一点？

编辑：我不必在数据库引擎中这样做。应用程序级别的搜索也是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:42:33.823

有许多[语音算法](http://en.wikipedia.org/wiki/Phonetic_algorithm)与实现“听起来像”匹配相关。这些具有不同的有效性，具体取决于文化差异，例如拼写、发音和名称语料库中使用的语言。

最近的一篇文章[Using Fuzzy Matching to Search by Sound with Python](http://www.doughellmann.com/articles/how-tos/phonetic-hashing/index.html)提供了一些可用选项的有用概述：

*   [声讯](http://en.wikipedia.org/wiki/Soundex)
*   [纽约证券交易所](http://en.wikipedia.org/wiki/NYSIIS)
*   [变音器](http://en.wikipedia.org/wiki/Metaphone)

# java - 如何在 Apache Velocity 中使用内部循环来解析 XML

> ID：11282458
> 
> 赞同：0
> 
> 时间：2012-07-01T13:42:35.623
> 
> 标签：java, xml, templates, velocity

我将开发一个 eclipse 插件来生成简单的 Java 源代码。最初我需要将 XML 文件转换为 Java 类代码。我从互联网上找到了 Apache Velocity，现在我正在玩一些简单的东西。这是我的输入 XML 文件：

```
<?xml version= "1.0" encoding= "UTF-8" ?> 
<Content> 
<Class name= "Customer"  acc_modif="public"> 
<attributes>
 <attribute attribute_type= "String" attribute_name= "studentName"  attribute_acc_modifer="public"/> 
 <attribute attribute_type= "int"  attribute_name= "age"  attribute_acc_modifer="public"/> 
</attributes>

<constructors>
    <constructor con_acc_modifer="public" con_name="Student">

            <para para_type="String" para_name="studentName"/>
            <para para_type="int" para_name="age"/>
    </constructor>

    <constructor con_acc_modifer="public" con_name="Student">

            <para para_type="String" para_name="studentName"/>
            <para para_type="int" para_name="age"/>

    </constructor>
</constructors>
</Class> 

</Content> 
```

这是我的模板文件：

```
## class .vm 
##apachi-3

import java.util.*; 

$class.acc_modif class $class.name { 

#foreach ( $att in $class.attributes ) 
   $att.attribute_acc_modifer $att.attribute_type $att.attribute_name; 
#end

#foreach ( $con in $class.constructors ) 
   $con.con_acc_modifer $con.con_name ( $con.para_type $con.para_name ) { ## Not working :(
}       
#end 
} 
```

输出是这样的：

```
import java.util.*; 

public class Customer { 

public String studentName; 
public int age; 

public Student ( $con.para_type $con.para_name ) {   }       
public Student ( $con.para_type $con.para_name ) {   }       

} 
```

学生构造函数不工作。我想我需要在括号内使用另一个循环而不是**"$con.para_type $con.para_name"** 但我不知道如何在这里使用另一个循环（我是 Apache Velocity 的菜鸟）。
速度大师请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:50:49.983

看看你是如何在它下面有一个带有孩子的`<constructors>`标签的？`<constructor>`

你的孩子需要`<paras>`父母`<para>`。没有它你会很艰难。

一旦你有了它，只需重复你已经执行过的技巧。

我想知道当 JAXB 是 JDK 的一部分时为什么需要这个。我还想知道为什么简单地编写课程会是一件如此困难的事情。这是您认为“自动化”解决方案会更好的情况之一吗?

```
<?xml version= "1.0" encoding= "UTF-8" ?> 
<Content> 
<Class name= "Customer"  acc_modif="public"> 
<attributes>
 <attribute attribute_type= "String" attribute_name= "studentName"  attribute_acc_modifer="public"/> 
 <attribute attribute_type= "int"  attribute_name= "age"  attribute_acc_modifer="public"/> 
</attributes>

<constructors>
    <constructor con_acc_modifer="public" con_name="Student">
        <parameters>
            <para para_type="String" para_name="studentName"/>
            <para para_type="int" para_name="age"/>
        </parameters>
    </constructor>

    <constructor con_acc_modifer="public" con_name="Student">
        <parameters>
            <para para_type="String" para_name="studentName"/>
            <para para_type="int" para_name="age"/>
        </parameters>
    </constructor>
</constructors>
</Class> 

</Content> 
```

我会说您对大小写的使用不一致。选择一个并坚持下去。

还有你的模板：

```
## class .vm 
##apachi-3

import java.util.*; 

$class.acc_modif class $class.name { 

#foreach ( $att in $class.attributes ) 
   $att.attribute_acc_modifer $att.attribute_type $att.attribute_name; 
#end

#foreach ( $con in $class.constructors ) 
   $con.con_acc_modifer $con.con_name ( 
   #foreach ($parameter in $parameters) # Not 100% sure of notation; I'll leave that for you
       $con.para_type, $con.para_name
   #end  
   ) {
}       
#end 
} 
```

# rows - 如何获取多行值

> ID：11282461
> 
> 赞同：0
> 
> 时间：2012-07-01T13:42:58.097
> 
> 标签：rows

这是我旧帖子的延续问题。如果您想查看下图的代码，请点击以下链接，请解决我的问题。

[如何将两个列值相乘并在每行的末尾显示其结果？](https://stackoverflow.com/questions/11202617/how-to-multiply-two-column-values-and-display-its-result-at-the-end-of-each-row/11203135)

stackoverflow.com/questions/11202617/how-to-multiply-two-column-values-and-display-its-result-at-the-end-of-each-row/11203135

**图片**

[http://www.koolfree.com/ImageUpload/uploads/1341093148.jpg](http://www.koolfree.com/ImageUpload/uploads/1341093148.jpg)

**问题**

我附上了截图的链接。请查看屏幕截图并告诉我如何为每个用户 ID 添加多个作业？

例如，屏幕截图的**用户 ID 为 216020**，用户有两个**Job Locations**行，即**Civil**和**Office Work**，它有两个**Salary**行，即**150**和**200**，它有两个**Allowance**行，即**0**和**0**，它有两个**Days**行，即**17**和**13**，最后它有两**行**，即**1950**和**2600**（总计是通过工资和天数相乘产生的）并且在表的末尾有总计。我无法为每个用户 ID 获取多个行值。请告诉我如何获取每个用户 ID 的这些行值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:20:16.490

Given MyTable of ID,A1,A2,B1,B2,C1,C2

then it's just something like

```
Select ID,A1 AS Value1 ,B1 as Value2 ,C1 AS Value3
From MyTable
Union All
Select ID,A2,B2,C2
From MyTable 
```

Surely???

# c# - 使用 C# 在 Gridview 中添加多个网格

> ID：11282462
> 
> 赞同：0
> 
> 时间：2012-07-01T13:43:01.083
> 
> 标签：c#, xaml, microsoft-metro, visual-studio-2012

如果我错了，请道歉，我是 Metro 应用程序的新手，我需要多个网格适合单个网格视图，这可以通过以下代码使用 XAML 完成

```
<GridView x:Name="qw" Width="1052" Height="554" HorizontalAlignment="Left" Background="Black">
       <Grid Background="White" Height="284" Width="270"/>
       <Grid Background="White" Height="284" Width="270"/>
       <Grid Background="White" Height="284" Width="270"/>
       <Grid Background="White" Height="284" Width="270"/>
       <Grid Background="White" Height="284" Width="270"/>
</GridView> 
```

但我想在 C# 中做到这一点，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:57:48.887

您可以声明一个数据模板（具有 Grid），并将 ItemsSource 绑定到 ViewModel 的某个集合属性。

GridView 中的网格与 ViewModel 集合中的项目一样多。

XAML 代码

```
 < GridView x:Name="qw" ItemsSource="{Binding Items}" Width="1052" Height="554" HorizontalAlignment="Left" Background="Black">
            < GridView.ItemTemplate>
                < DataTemplate>
                    < Grid Background="White" Height="284" Width="270"/>
                </DataTemplate>
            </GridView.ItemTemplate>
        </GridView> 
```

查看型号代码

```
public ObservableCollection<String> Items { get; set; }
...
Items = new ObservableCollection<string>();
this.Items.Add("Item 1");
this.Items.Add("Item 1");
this.Items.Add("Item 1");
this.Items.Add("Item 1"); 
```

# public-key-encryption - 如果端口 443 是开放的，这是否意味着远程主机有证书？

> ID：11282469
> 
> 赞同：0
> 
> 时间：2012-07-01T13:43:44.790
> 
> 标签：public-key-encryption, network-security

我知道如果端口 443 是开放的，这意味着远程主机支持加密流量的安全协议 https，因此，远程主机具有私钥和公钥对。

但我的问题是：如果我知道远程主机的 443 端口是开放的，这是否肯定意味着远程主机有证书？是否有可能有一个远程主机，它的私钥/公钥对根本没有证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:48:42.550

我可以在端口 443 上运行我想要的任何东西。我也可以在它上运行 http（没有's'）。

所以，答案是否定的！这并不意味着该主机具有证书。甚至没有公钥/私钥系统。

# java - 在java代码中使用python库

> ID：11282470
> 
> 赞同：0
> 
> 时间：2012-07-01T13:43:57.557
> 
> 标签：java, python, jython

有一些名为[pymorphy](http://packages.python.org/pymorphy/)的库是用 python 编写的。不幸的是，对于 java，没有任何具有类似功能的库 - 俄语语言的自然语言处理。所以我需要从Java代码中调用一些pymorphy库的方法。

首先，我尝试用 Jython 解决这个问题。但是我花了 2 天的时间并没有实现目标，因为 python 模块 cdb、bsddb3、sqlite 是用 C 编写的，它们不能与 Jython 一起使用。

现在我想运行一些带有pymorphy的python轻量级服务器来处理来自Java代码的请求。

我怎样才能以最大的生产性能实现这种 java-python 交互？还是有更简单的方法从java调用python？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:01:41.477

试试 Jepp，“Java 嵌入式 Python”。[http://jepp.sourceforge.net/](http://jepp.sourceforge.net/)

除了小型项目，我没有使用过它，但它可以像宣传的那样工作，允许人们从 Java 透明地调用 CPython。如果您遇到相反的问题，需要从 CPython 调用 Java，请务必查看 JPype。我已经广泛使用它并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:47:35.313

我认为这些库（cdb、bsddb3、sqlite）在[https://code.google.com/p/django-jython/](https://code.google.com/p/django-jython/)中有一个 jython 实现，请查看

# wordpress - 如何在页面中放置小部件

> ID：11282471
> 
> 赞同：0
> 
> 时间：2012-07-01T13:43:58.400
> 
> 标签：wordpress, wordpress-theming

我是 wordpress 的新手，我正在尝试弄清楚菜单与小部件的关系。有没有办法可以将小部件添加到页面？不是在侧边栏上，而是在页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:16:00.170

恐怕不容易 :( 但是，WordPress 中的“侧边栏”可以是您网站中的任何容器。它不一定需要在页面的一侧。您可以在 functions.php中使用[register_sidebar()](http://codex.wordpress.org/register_sidebar)文件以创建一个新的侧边栏，然后只需使用[dynamic_sidebar()](http://codex.wordpress.org/dynamic_sidebar)在新侧边栏中显示小部件。将侧边栏放在页面一侧的是您的 CSS。如果您这样看，您可以改用 CSS 来制作例如水平的“侧边栏”。“侧边栏”的名称很可能在未来的某个时候发生变化，以更好地反映这一点。

# php - PHP/JavaScript check/uncheck working in FF but not working in IE

> ID：11282472
> 
> 赞同：2
> 
> 时间：2012-07-01T13:44:02.750
> 
> 标签：php, javascript, checkbox, incompatibility

I got stuck with a simple piece of functionality which seems not to work on different browsers.

My need is to have a single checkbox (master checkbox) with a function to check/uncheck other checkboxes (children checkboxes). When the master checkbox is clicked, it's own state has to be transferred to a list of other checkboxes. For example: If the master checkbox is not checked and gets clicked (and therefore selected), all the child checkboxes should get selected as well.

The code below works excellent in Firefox 13.0.1, but not in Internet Explorer 9.

All the code below is in the same file:

JavaScript

```
<script type="text/javascript">
    function toggle(source) {   
        checkboxes = document.getElementsByName('cb[]');
        for each(var checkbox in checkboxes)
            checkbox.checked = checkbox.checked == true ? false : true;
    }
</script> 
```

The Checkbox which is clicked for check and uncheck

```
<td width="3%"><input name="cb_all" type="checkbox" id="cb_all" onClick="toggle(this)"></td> 
```

One single row

```
<td><input name="cb[]" type="checkbox" value="<?php echo $user->id;?>" id="cb[]"></td> 
```

I like to believe that the solution should be a simple one, but after spending half a day of searching it would be very nice to have some help. Can you please help me with this one?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:52:08.750

这是因为 Internet Explorer 没有名为`getElementsByName`. 解决方法是使用并检查每一个，您可以在[http://webbugtrack.blogspot.com/2007/08/bug-411-getelementsbyname-doesnt-work.html](http://webbugtrack.blogspot.com/2007/08/bug-411-getelementsbyname-doesnt-work.html)`getElementsByTagName`获得更多信息

# browser - Autoit proxy IE object

> ID：11282476
> 
> 赞同：0
> 
> 时间：2012-07-01T13:44:46.247
> 
> 标签：browser, proxy, ip, autoit

I'd like to use a proxy to mask my ip surfing the net an autoit browser! This is my code:

```
#NoTrayIcon
#include <GUIConstants.au3>
#Include <IE.au3>
#include <GUIConstantsEx.au3>
GUICreate("Web Browser By EMP£!!",800,600)
GUISetBkColor(0x808080)
GUISetState(@SW_SHOW)
$Edit=GUICtrlCreateInput("http://www.whatismyip.com/",20,20,500,20)
$Vai=GUICtrlCreateButton("SURF!!!",600,10,150,50)
$oIE = ObjCreate("Shell.Explorer.2")
GUICtrlCreateObj($oIE, 10, 90,780, 500)
$ret = HttpSetProxy(2,"61.163.78.51:3128")
If $ret == 0 Then
    MsgBox(0, "Proxy", "Proxy Error")
    Exit
EndIf
While 1
 $msg=GUIGetMsg()
     Switch $msg
     Case $Vai
$Link=GUICtrlRead($Edit)
_IENavigate($oIE,($Link))
   GUICtrlSetData($Edit,$Link)
  Case $GUI_EVENT_CLOSE
   Exit
       EndSwitch
WEnd 
```

I navigate on [http://www.whatismyip.com/](http://www.whatismyip.com/) and i can see my real ip address! I'd like to hide a proxy!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:53:43.813

该`HttpSetProxy`功能仅适用于`InetGet`，对 Internet Explorer 设置没有影响。要为 Internet Explorer 窗口制作代理，您需要更改 Internet Explorer 设置。

我会这样做的方式是这样的：

```
#include <GUIConstants.au3>
#include <IE.au3>
#include <GUIConstantsEx.au3>

Global Const $sInetSettingsKey = "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings"

GUICreate("Web Browser By EMP£!!", 800, 600)
GUISetBkColor(0x808080)
GUISetState(@SW_SHOW)
$Edit = GUICtrlCreateInput("http://www.whatismyip.com/", 20, 20, 500, 20)
$Vai = GUICtrlCreateButton("SURF!!!", 600, 10, 150, 50)
$oIE = ObjCreate("Shell.Explorer.2")
GUICtrlCreateObj($oIE, 10, 90, 780, 500)

MySetProxy("61.163.78.51:3128")

While 1
    $msg = GUIGetMsg()
    Switch $msg
        Case $Vai
            $Link = GUICtrlRead($Edit)
            _IENavigate($oIE, ($Link))
            GUICtrlSetData($Edit, $Link)
        Case $GUI_EVENT_CLOSE
            ExitLoop
    EndSwitch
WEnd

MySetProxy()

Func MySetProxy($sProxy = "", $fEnable = True)
    Local Static $sPrev = ""
    Local Static $fWasEnabled = False

    If $sProxy = "" Then
        If $sPrev <> "" Then __setProxyInfo($fWasEnabled, $sPrev)
    Else
        If $sPrev = "" Then
            $sPrev = RegRead($sInetSettingsKey, "ProxyServer")
            $fWasEnabled = RegRead($sInetSettingsKey, "ProxyEnable")
        EndIf

        __setProxyInfo($fEnable, $sProxy)
    EndIf
EndFunc

Func __setProxyInfo($fEnabled, $sProxy)
    RegWrite($sInetSettingsKey, "ProxyEnable", "REG_DWORD", 1)
    RegWrite($sInetSettingsKey, "ProxyServer", "REG_SZ", $sProxy)
EndFunc 
```

`whatismyip.com`不过不太喜欢。但是IP地址肯定变了。

# jquery - jquery datepicker 允许日期小于 minDate

> ID：11282477
> 
> 赞同：4
> 
> 时间：2012-07-01T13:44:49.093
> 
> 标签：jquery, datepicker, jquery-ui-datepicker

我有一个日期选择器，它不能通过编辑框允许今天之前的日期。

```
var dateOptions = { 
  dateFormat: "mm/dd/yy", 
  constrainInput: true, 
  gotoCurrent: true, 
  minDate: new Date()
};

$('.date').datepicker(dateOptions);
$('.date').datepicker('setDate', new Date()); 
```

在 html 中它被实现为：

```
<label class="text14"><strong>Depart</strong></label>
<input type="text" id="tbDTimeOne" maxlength="10" size="10" name="tbDTimeOne" class="colum130 date" /> <img src="images/calendar.png" style="margin-left:-25px;" /> 
```

好的，这就是发生的事情。页面被渲染，onready 函数被调用，日期输入被设置为今天的日期，用户选项卡/点击日期输入，日历弹出，用户通过键盘编辑现有日期并将其设置为之前的日期今天，用户标签到下一个字段。接受并显示的输入是 minDate 之前的日期。

有什么办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:09:49.120

Datepicker 不限制键盘输入（参见[http://bugs.jqueryui.com/ticket/6917](http://bugs.jqueryui.com/ticket/6917)）

```
$('.date').attr('readonly', 'readonly'); 
```

将是一个解决方案，但是您将失去手动输入文本的可能性。如果您需要保留此功能，您仍然可以验证输入 [http://keith-wood.name/uiDatepickerValidation.html](http://keith-wood.name/uiDatepickerValidation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:09:40.357

[http://docs.jquery.com/UI/Datepicker#option-minDate](http://docs.jquery.com/UI/Datepicker#option-minDate)

```
minDate: new Date(2011,12,30) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T17:16:23.623

另一种可能的选择是使用输入掩码。使用输入/jQuery，您可以使用 .Mask 原型并强制用户输入您正在寻找的有效日期格式。您还可以使用 moment.js 库来使用自定义的验证组合。

```
$(".someClass").mask("00/00/0000"); 
```

这将强制日期为 2017 年 1 月 1 日，而不是 1/1/1，这会使 JS 中的日期值混淆。

# c# - 使用 c#.net 时服务状态显示为启动为什么未启动

> ID：11282478
> 
> 赞同：1
> 
> 时间：2012-07-01T13:44:51.927
> 
> 标签：c#, timer

这里我使用的是窗口服务，使用一个逻辑，因为在 app.config 中配置的帮助下，我的服务在 24 小时内只能工作一次。

例如：我会在应用程序配置中提到小时为“10”，所以每天我的服务将在 10 时钟前运行

但问题是当我启动我的服务时，它抛出一个错误为 1053（及时时尚错误），状态显示为在 services.msc 中启动，在右键单击的弹出窗口中不再显示启动和重新启动功能

想知道它是否完美地完成了这项工作，正好十点钟。

为什么它没有显示为已启动，为什么它会抛出错误？

我已经粘贴了下面的示例代码，如果我做错了什么，请告知

启动方法

```
protected override void OnStart(string[] args)
{
     DateTime tenAM = DateTime.Today.AddHours(strSETHOST);

     if (DateTime.Now > tenAM)
          tenAM = tenAM.AddDays(1);

     // calculate milliseconds until the next 10:00 AM.  
     int timeToFirstExecution = (int)tenAM.Subtract(DateTime.Now).TotalMilliseconds;

     // calculate the number of milliseconds in 24 hours.   
     int timeBetweenCalls = (int)new TimeSpan(24, 0, 0).TotalMilliseconds;

     TimerCallback methodToExecute = kickstart;

     // start the timer.  The timer will execute "ProcessFile" when the number of seconds between now and   
     // the next 10:00 AM elapse.  After that, it will execute every 24 hours.   
     System.Threading.Timer timer = new System.Threading.Timer(methodToExecute, null, timeToFirstExecution, timeBetweenCalls);

     Thread.Sleep(Timeout.Infinite);

 }

 protected override void OnStop()
 {
 }

 public static void kickstart(object nowtime)
 {

      Service1  foo = new Service1();
      foo.Startjob();
 }

 private void Startjob()
 {
      using (TransactionScope scope = new TransactionScope(TransactionScopeOption.RequiresNew)) // Transaction Scope Started
      {
           if ((threadPURGE == null) || (threadPURGE.ThreadState == System.Threading.ThreadState.Stopped) || (threadPURGE.ThreadState == System.Threading.ThreadState.Unstarted) || (threadPURGE.ThreadState == System.Threading.ThreadState.Aborted))
           {
                threadPURGE = new Thread(new ThreadStart(DynamicThreadGen));  // Thread Initialize for ITD 
           }

           try
           {
                if ((threadPURGE == null) || (threadPURGE.ThreadState == System.Threading.ThreadState.Stopped) || (threadPURGE.ThreadState == System.Threading.ThreadState.Unstarted) || (threadPURGE.ThreadState == System.Threading.ThreadState.Aborted))
                {
                     threadPURGE.Start();  // Thread Started for ITD 
                }

           }
           catch (Exception ex)
           {
                string err = ex.Message.ToString();
           }
           finally
           {
                scope.Complete();
           }
      }

 }

 private void DynamicThreadGen()
 {
     /// service work 
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:00:06.350

您需要允许您的`OnStart`方法在 Windows 分配的超时时间内完成，否则 Windows 无法判断它已启动。坚持`Timer`在一个类字段中，这样它就不会被垃圾收集和处理，然后放弃`Thread.Sleep`

# xml - Retaining "<" while applying XSLT to an xml

> ID：11282479
> 
> 赞同：0
> 
> 时间：2012-07-01T13:46:23.477
> 
> 标签：xml, cocoa, xslt, xml-parsing

I am using the XML->XHTL conversion for printing a model based window. What I do is to convert my model into a well formed xml. And then applying xsl to it.

A few attributes in my model have large text value. Occasionally this text may contain, "<" and ">". Whenever such text appears, the text between "<" and ">" is skipped. For example, if my text is "`This <item name> belongs to me.`" The output I get is "`This belongs to me.`" <item name> is skipped. It looks like these characters in the attribute's value are also identified as the beginning and end of xml tags. They get converted to &lt; and &gt;. And so the value is not printed.

Can anyone please tell me, how can i retain the angular brackets in the attribute's value in output as well? Any help is greatly appreciated.

Thanks, Sahitya

P.S.-I am a newbie to xml handling and xsl as well.

XML with the CData section: "`<descriptionText><![CDATA[This <item name> belongs to me.]]></descriptionText>`"

XSL excerpt: `<tr><td><xsl:value-of select="descriptionText" disable-output-escaping="yes"/></td></tr>`

expectedOutput: `This <item name> belongs to me.`

ActualOutput: `This belongs to me.`

**EDIT:**

For implementing the print functionality at the application level, I am using the APIs of WebFrameLoadDelegate and NSPrintOperation. Once the webview is created successfully, the delegate API,

`- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame;`

of the printer class, is called. Please see the implementation of this API below:

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame
{
    NSPrintInfo *pi = [NSPrintInfo sharedPrintInfo];
    if ([NSPrintInfo defaultPrinter])
    {
        [pi setPrinter:[NSPrintInfo defaultPrinter]]; 
    }
    [pi setTopMargin:5.0];
    [pi setLeftMargin:5.0];
    [pi setBottomMargin:10.0];
    [pi setRightMargin:5.0];
    [pi setHorizontalPagination:NSFitPagination];
    [pi setVerticalPagination:NSFitPagination];
    [pi setVerticallyCentered:YES];
    [pi setHorizontallyCentered:YES];
    [[self.webView preferences] setAutosaves: NO];
    [[self.webView preferences] setShouldPrintBackgrounds:YES];
    NSPrintOperation *printOperation = [[[self.webView mainFrame] frameView] printOperationWithPrintInfo:pi];
    [printOperation runOperationModalForWindow:self.window delegate:self.delegate didRunSelector:self.callbackSelector contextInfo:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:59:09.613

如果你

1.  将包含`<`和`&`in的文本包装`CDATA`在 XML 输入中
2.  不要使用*_*`disable-output-escaping`

然后的输出`This <item name> belongs to me`将是`This &lt;item name&gt; belongs to me`，浏览器将正确显示为`This <item name> belongs to me.`

如果打开*，* `disable-output-escaping`则生成的 HTML 将为`This <item name> belongs to me`，并且浏览器会认为`<item name>`是未定义的 HTML 标记并跳过它，如您所描述的。

**编辑**

这是一个功能齐全的示例：

**simple.xml（输入）**

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="simple.xslt"?>
<simple>
    <![CDATA[This <item name> belongs to me.]]>
</simple> 
```

**简单的.xslt**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:value-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

**输出**（在浏览器中打开 xml 时）

```
This <item name> belongs to me. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:51:38.643

HTML 文本中不能有尖括号，它们需要转义为 > 和 <。我希望 CDATA 部分解决了转换为 HTML 的问题，但是当您查看 HTML 时，浏览器会忽略它不理解的标签。

# java - Change EditText Visibility To Hidden

> ID：11282480
> 
> 赞同：0
> 
> 时间：2012-07-01T13:46:31.910
> 
> 标签：java, android

I want to change EditText visibility to hidden when a button click. I write a code, but it doesn't work. How can I do it?

This is my code:

```
public void onClick(View view) {
        if(((Button)findViewById(R.id.login)).getId() == ((Button)view).getId())
            findViewById(R.id.google_account).setVisibility(0); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T13:49:46.113

0 表示`visible`。

最好使用常量：

`View.VISIBLE`,`View.GONE`或`View.INVISIBL`.

[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:48:51.603

Try this `findViewById(R.id.google_account).setVisibility(View.GONE);` And here is the full [documentation](http://developer.android.com/reference/android/view/View.html#GONE).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T13:48:55.320

Try to set EditText `View.GONE` as:

```
EditText txtx=(EditText)findViewById(R.id.google_account);
txtx.setVisibility(View.GONE); 
```

or

```
findViewById(R.id.google_account).setVisibility(View.GONE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T13:49:48.720

```
public void onClick(View view) {
        if((Button)findViewById(R.id.login) == view)
            findViewById(R.id.google_account).setVisibility(View.GONE); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T17:07:18.647

我们有像`View.INVISIBLE`, `View.VISIBLE`,一样的常量`View.GONE`，我们也可以使用像 Visible = 0 , Gone = 8 等整数常量...

例如：

```
public void onClick(View view) {
        if(((Button)findViewById(R.id.login)).getId() == ((Button)view).getId())
            findViewById(R.id.google_account).setVisibility(View.GONE); 

                                  OR

            findViewById(R.id.google_account).setVisibility(View.INVISIBLE); 
} 
```

# php - 我想通过电子邮件将 PDF 作为使用 FPDF 创建的附件发送。但依恋从来没有通过

> ID：11282481
> 
> 赞同：1
> 
> 时间：2012-07-01T13:46:37.400
> 
> 标签：php, sql, email, fpdf

我已经编写了以下代码来生成 pdf 并且我生成的 pdf 很好并显示了，然后在第二部分中我编写了代码来自动生成邮件并发送，但没有响应.. 建议？提前致谢 ：）

```
 <?php

    require('fpdf.php');

    //Connect to your database
    $link = mysql_connect('xxxxx');
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }

    //Create new pdf file
    $pdf=new FPDF();

    //Open file
    $pdf->Open();

    //Disable automatic page break
    $pdf->SetAutoPageBreak(true);

    //Add first page
    $pdf->AddPage();

    //set initial y axis position per page
    $y_axis_initial = 25;

    //print column titles for the actual page
    $pdf->SetFillColor(232, 232, 232);
    $pdf->SetFont('Arial', 'B', 12);
    $pdf->SetY($y_axis_initial);
    $pdf->SetX(5);
    /*$pdf->Cell(30, 6, 'CODE', 1, 0, 'L', 1);
    $pdf->Cell(30, 6, 'NAME', 1, 0, 'L', 1);
    $pdf->Cell(30, 6, 'PRICE', 1, 0, 'R', 1);*/

    $y_axis = $y_axis + $row_height;

    //Select the Products you want to show in your PDF file
    /*$result=mysql_query('select Code,Name,Price from Products ORDER BY Code',$link);*/

    mysql_select_db("brainoidultrafb", $link);
    $q = "SELECT qr_topics,start_of,differential_dia,things_not,investigations,risks FROM qr_table";
    $result = mysql_query ($q, $link);

    //initialize counter
    $i = 0;

    //Set maximum rows per page
    $max = 25;

    //Set Row Height
    $row_height = 80;
    $pdf->Cell(33, 6, '  ', 1, 0, 'L', 1);
    $pdf->Cell(33, 6, 'Starting off', 1, 0, 'L', 1);
    $pdf->Cell(33, 6, 'Differential diagnosis', 1, 0, 'L', 1);
    $pdf->Cell(33, 6, 'Not to miss', 1, 0, 'L', 1);
    $pdf->Cell(33, 6, 'Investigations', 1, 0, 'L', 1);
    $pdf->Cell(33, 6, 'Risks', 1, 0, 'L', 1);

    $y_axis =(35);

    while($row = mysql_fetch_array($result))
    {

        $cad = $row['qr_topics'];
        $pad = $row['start_of'];
        $nad = $row['differential_dia'];
        $vad = $row['things_not'];
        $sad = $row['investigations'];
        $tad = $row['risks'];

        $pdf->SetY($y_axis);
        $pdf->SetX(5);
        $pdf->Cell(33,80,$cad,1,0,'L',1);
        $pdf->Cell(33,80,$pad,1,0,'L',1);
        $pdf->Cell(33,80,$nad,1,0,'L',1);
        $pdf->Cell(33,80,$vad,1,0,'L',1);
        $pdf->Cell(33,80,$sad,1,0,'L',1);
        $pdf->Cell(33,80,$tad,1,0,'L',1);

        //Go to next row
        $y_axis = $y_axis + $row_height;
        $i = $i + 1;
    }

    mysql_close($link);

    //Send file
    //$pdf->Output();

    //email test

    // email stuff (change data below)
    $to = "aneeshyyyy@gmail.com"; 
    $from = "aneeshxxxx@gmail.com"; 
    $subject = "Patient Report"; 
    $message = "<p>Please see the attachment.</p>";

    // a random hash will be necessary to send mixed content
    $separator = md5(time());

    // carriage return type (we use a PHP end of line constant)
    $eol = PHP_EOL;

    // attachment name
    $filename = "test.pdf";

    // encode data (puts attachment in proper format)
    $pdfdoc = $pdf->Output("", "S");
    $attachment = chunk_split(base64_encode($pdfdoc));

    // main header
    $headers  = "From: ".$from.$eol;
    $headers .= "MIME-Version: 1.0".$eol; 
    $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

    // no more headers after this, we start the body! //

    $body = "--".$separator.$eol;
    $body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
    $body .= "This is a MIME encoded message.".$eol;

    // message
    $body .= "--".$separator.$eol;
    $body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
    $body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
    $body .= $message.$eol;

    // attachment
    $body .= "--".$separator.$eol;
    $body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
    $body .= "Content-Transfer-Encoding: base64".$eol;
    $body .= "Content-Disposition: attachment".$eol.$eol;
    $body .= $attachment.$eol;
    $body .= "--".$separator."--";

    // send message
    mail($to, $subject, $body, $headers);

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:04:36.037

找到解决方案及其工作非常好，将上面的代码更改如下

```
 // email stuff (change data below)
$to = "saxxxx@gmail.com"; 
$from = "aneexxxxx@gmail.com"; 
$subject = "Patient detials with pdf attachment"; 
$message = "<p>Please see the attachment.</p>";

// a random hash will be necessary to send mixed content
$separator = md5(time());

// carriage return type (we use a PHP end of line constant)
$eol = PHP_EOL;

// attachment name
$filename = "patientdetials.pdf";

// encode data (puts attachment in proper format)
$pdfdoc = $pdf->Output("", "S");
$attachment = chunk_split(base64_encode($pdfdoc));

// main header (multipart mandatory)
$headers = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol;
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;

//NOTICE I changed $headers to $body!!

$body .= "Content-Transfer-Encoding: 7bit".$eol;
$body .= "This is a MIME encoded message.".$eol; //had one more .$eol

// message
$body .= "--".$separator.$eol;
$body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$body .= $message.$eol; //had one more .$eol

// attachment
$body .= "--".$separator.$eol;
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol;
$body .= "Content-Transfer-Encoding: base64".$eol;
$body .= "Content-Disposition: attachment".$eol.$eol;
$body .= $attachment.$eol;
$body .= "--".$separator."--";

// send message NOTICE I replaced "" with $body
mail($to, $subject, $body, $headers);
?> 
```

# c# - Replace a DataTable in a DataSet

> ID：11282487
> 
> 赞同：1
> 
> 时间：2012-07-01T13:47:11.963
> 
> 标签：c#, database, dataset, dataadapter

-*Changed the question into a different simpler form*-

Please review this piece of code :

"Given Error" **Error :**

*Update unable to find TableMapping['Table'] or DataTable 'Table'.*

The DataSet is Strongly typed, We have a DataTable "dtNew" *[Made from a list "ListProducts", (No matter here !)]*

one column's name in the database differs from the list's field : "Title" should mapped with the column : "TitleInDb"

```
SqlCeDataAdapter Adapter;
DsProducts Ds1Products ; // Strongly Typed
DataTable dtNew = new DataTable("Products");
DataColumn dc;
DataRow[] updRows;
// Fields : Name , Title, Price

dc = new DataColumn("Name", typeof(string));
dtNew.Columns.Add(dc);
dc = new DataColumn("TitleInDb", typeof(string)); // The difference is by a reason
dtNew.Columns.Add(dc);
dc = new DataColumn("Price", typeof(string));
dtNew.Columns.Add(dc);
dtNew = updRows.CopyToDataTable();
Ds1Products.Tables.Add(dtNew);

// The Problems appear here :
// The Iteration is just for debugging phase and watching the changes which the columns are same 
   as before
foreach (var col in dtNew.Columns)
{
    Console.WriteLine(col.ToString());
    Console.WriteLine(col.GetType());
}

// New Table is there, But here will come the Error
Adapter.Update(Ds1Products); 
```

* * *

Running this, Iterating through the new columns I see that there is no change to the "Products" table which I thought should have been deleted at that time. Also the name of the new table `"dtNew"` seems to be `"table1"`

**Additional Notes :** It uses Sql Compact 3.5 **The code is just a piece of code, Showing the exact problem !**

*please review the code and give your ideas on this, I'm trying to make the whole database based on a refreshed Table (or DataRows[] )*

**Edit :** **Replace a DataTable in a DataSet :** It means remove the first DataTable and Create new one and place it in ! Couldn't say easier ... (Based on a comment)

# php - Test Gearman/MySQL - Persistence Layer

> ID：11282490
> 
> 赞同：2
> 
> 时间：2012-07-01T13:47:25.903
> 
> 标签：php, mysql, gearman, drizzle

Running Fedora, PHP/Gearman/MySQL/Drizzle.

Built Gearman/Drizzle from source, and have the process running on a linux/fedora box. I created the mysql test table, and can see that the Gearman Daemon instance can access/interface with the mysql service. I'm running the Gearman and mysql processes on the same box, using TCP.

When Gearman is started, and points to the MySQL account, I can see the initial select statements in the DEBUG information that's displayed as the Gearman process runs.

However, I'm not sure what I need to do to actually test that a job from the Client is stored in the mysql Table.

I created a test client that replicates the Gearman Client/Worker "Review" test, that normally works if the worker is running, and ran the client without the worker. I see in the DEBUG process that the client connects with the Gearman daemon, but when I examine the mysql table, nothing is in the table.

So my question really boils down to determining what I need to do to actually be able to see/ensure that jobs/data is really written to the actual mysql table.

Is there a given flag, method to call somewhere to establish that data is to be stored in the mysql table if not processed by the worker? Shouldn't a job be stored in the table, and then removed once it's processed? Or am I missing something in the flow?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T22:48:28.953

[http://gearman.org/manual/job_server/#persistent_queues](http://gearman.org/manual/job_server/#persistent_queues)

我想你正在寻找的是：

```
gearmand --queue-type=mysql --mysql-host=hostname 
```

# javascript - Is there a wordpress plugin to make a slideshow like this one?

> ID：11282494
> 
> 赞同：0
> 
> 时间：2012-07-01T13:47:59.650
> 
> 标签：javascript, image, wordpress, html, slideshow

I'm looking for a wordpress plugin to produce a slideshow for use on the front page of a website. It should work as closely as possible to the one on here: [http://www.cit.lasmit.co.uk/](http://www.cit.lasmit.co.uk/)

Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:53:31.827

检查这个插件 [Easy Roter](http://www.dwuser.com/easyrotator/wordpress/)

另外： [考虑](http://workshop.rs/2010/05/coin-slider-4-wordpress/)

# java - Datanucleus 中的预处理语句 - MySQL

> ID：11282498
> 
> 赞同：1
> 
> 时间：2012-07-01T13:48:48.140
> 
> 标签：java, mysql, jdo, datanucleus

Datanucleus（使用 JDO）在处理 MySQL 时可以使用准备语句吗？
如果是这样 - 我该如何启用它？
是否默认开启？

**编辑：**
我忘了提：我正在使用 DataNucleus 2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:18:46.303

显然它默认使用那些（对于 RDBMS）。它还会用什么？

# ios - iOS - Open email in Calendar or Reminder

> ID：11282501
> 
> 赞同：0
> 
> 时间：2012-07-01T13:49:04.880
> 
> 标签：ios, email

Is it possible to create an extension to mail.app to open an email in say Calendar and/or Reminders

For example, create an "open in" function that opens a new calendar event and populates the notes section of the calendar event with the body text from the email?

If an extension is not possible, would it be possible to write an email client that could do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:42:36.957

AFAIK 无法为 mail.app 创建扩展。通过编写电子邮件客户端，您可以在应用程序中获取电子邮件正文并传递此信息日历或提醒。

# java - Java 网络爬虫库

> ID：11282503
> 
> 赞同：21
> 
> 时间：2012-07-01T13:49:42.493
> 
> 标签：java, web-crawler

我想为实验制作一个基于 Java 的网络爬虫。我听说如果这是您的第一次，那么用 Java 制作 Web Crawler 是不错的选择。但是，我有两个重要的问题。

1.  我的程序将如何“访问”或“连接”到网页？请作简要说明。（我了解从硬件到软件的抽象层的基础知识，这里我对Java抽象感兴趣）

2.  我应该使用哪些库？我假设我需要一个用于连接网页的库、一个用于 HTTP/HTTPS 协议的库和一个用于 HTML 解析的库。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-18T01:46:19.430

Crawler4j 是最适合您的解决方案，

[Crawler4j](https://github.com/yasserg/crawler4j)是一个开源的 Java 爬虫，它提供了一个简单的 Web 爬虫界面。5分钟搞定一个多线程网络爬虫！

也[参观。](http://cuneytyesilkaya.blogspot.com/2012/01/web-crawler-tools.html)了解更多基于 Java 的网络爬虫工具和每个工具的简要说明。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-01T13:51:35.860

这就是您的程序“访问”或“连接”到网页的方式。

```
 URL url;
    InputStream is = null;
    DataInputStream dis;
    String line;

    try {
        url = new URL("http://stackoverflow.com/");
        is = url.openStream();  // throws an IOException
        dis = new DataInputStream(new BufferedInputStream(is));

        while ((line = dis.readLine()) != null) {
            System.out.println(line);
        }
    } catch (MalformedURLException mue) {
         mue.printStackTrace();
    } catch (IOException ioe) {
         ioe.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException ioe) {
            // nothing to see here
        }
    } 
```

这将下载html页面的源代码。

对于 HTML 解析，请参阅[此](http://htmlparser.sourceforge.net/)

还要看看[jSpider](http://j-spider.sourceforge.net/)和[jsoup](http://jsoup.org/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-24T07:40:19.060

现在包含许多基于 Java 的 HTML 解析器，支持访问和解析 HTML 页面。

*   [汤](http://jsoup.org/)
*   [Jaunt API](http://jaunt-api.com/)
*   [HtmlCleaner](http://htmlcleaner.sourceforge.net/)
*   [JTidy](http://jtidy.sourceforge.net/)
*   [NekoHTML](http://nekohtml.sourceforge.net/)
*   [标签汤](http://ccil.org/~cowan/XML/tagsoup/)

[这是](http://en.wikipedia.org/wiki/Comparison_of_HTML_parsers)带有基本比较的 HTML 解析器的完整列表。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T14:37:22.487

对于解析内容，我使用的是[Apache Tika](http://tika.apache.org/)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-05T09:25:23.477

如果您想了解如何完成，请查看这些现有项目：

*   [阿帕奇纳奇](https://wiki.apache.org/nutch/FrontPage#What_is_Apache_Nutch.3F)
*   [爬虫4j](https://github.com/yasserg/crawler4j)
*   [壁虎](https://github.com/xtuhcy/gecco)
*   [Norconex HTTP 收集器](https://www.norconex.com/collectors/collector-http/flow)
*   [vidageek 爬虫](https://github.com/vidageek/crawler)
*   [网络魔术](https://github.com/code4craft/webmagic)
*   [Webmuncher](https://github.com/dadepo/Webmuncher)

典型的爬虫过程是一个循环，包括获取、解析、链接提取和输出处理（存储、索引）。虽然魔鬼在细节中，即如何“礼貌”和尊重`robots.txt`、元标记、重定向、速率限制、URL 规范化、无限深度、重试、重访等。

[![Norconex HTTP 收集器流程图](../Images/79bd0c1289dd3ebdc794bad2285507b3.png)](https://i.stack.imgur.com/xv6c2.png)

^(*流程图由[Norconex HTTP 收集器](https://www.norconex.com/collectors/collector-http/flow)提供。*)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-03T11:56:18.367

我想出了另一种解决方案，建议没有人提及。有一个名为[Selenum](https://www.seleniumhq.org/)的库，它是一个开源自动化测试工具，用于自动化 Web 应用程序以进行测试，但当然不仅限于此。您可以编写一个网络爬虫，并像人类一样从这个自动化测试工具中受益。

作为说明，我将为您提供一个快速教程，以更好地了解它是如何工作的。如果您对阅读这篇文章感到无聊，请观看此[视频](https://youtu.be/8YktQ-2Do1Q)以了解该库可以提供哪些功能来抓取网页。

## 硒成分

首先，Selenium 由各种组件组成，这些组件共存于一个独特的进程中，并在 java 程序上执行它们的操作。这个主要组件称为 Webdriver，它必须包含在您的程序中才能使其正常工作。

在此处访问以下[站点](https://chromedriver.chromium.org/downloads)并下载适用于您的计算机操作系统（Windows、Linux 或 MacOS）的最新版本。它是一个包含 chromedriver.exe 的 ZIP 存档。将其保存在您的计算机上，然后将其解压缩到一个方便的位置，就像**C:\WebDrivers\User\chromedriver.exe**我们稍后将在 java 程序中使用这个位置。

下一步是引入 jar 库。假设您正在使用 maven 项目来构建 java 程序，您需要将以下依赖项添加到您的 pom.xml

```
<dependency>
 <groupId>org.seleniumhq.selenium</groupId>
 <artifactId>selenium-java</artifactId>
 <version>3.8.1</version>
</dependency> 
```

## Selenium Web 驱动程序设置

让我们开始使用 Selenium。第一步是创建一个 ChromeDriver 实例：

```
System.setProperty("webdriver.chrome.driver", "C:\WebDrivers\User\chromedriver.exe);
WebDriver driver = new ChromeDriver(); 
```

现在是深入研究代码的时候了。以下示例显示了一个简单的程序，它打开一个网页并提取一些有用的 Html 组件。这很容易理解，因为它的注释清楚地解释了这些步骤。请看一下以了解如何捕获对象

```
//Launch website
      driver.navigate().to("http://www.calculator.net/");

      //Maximize the browser
      driver.manage().window().maximize();

      // Click on Math Calculators
      driver.findElement(By.xpath(".//*[@id = 'menu']/div[3]/a")).click();

      // Click on Percent Calculators
      driver.findElement(By.xpath(".//*[@id = 'menu']/div[4]/div[3]/a")).click();

      // Enter value 10 in the first number of the percent Calculator
      driver.findElement(By.id("cpar1")).sendKeys("10");

      // Enter value 50 in the second number of the percent Calculator
      driver.findElement(By.id("cpar2")).sendKeys("50");

      // Click Calculate Button
      driver.findElement(By.xpath(".//*[@id = 'content']/table/tbody/tr[2]/td/input[2]")).click();

      // Get the Result Text based on its xpath
      String result =
         driver.findElement(By.xpath(".//*[@id = 'content']/p[2]/font/b")).getText();

      // Print a Log In message to the screen
      System.out.println(" The Result is " + result); 
```

完成工作后，可以使用以下命令关闭浏览器窗口：

```
driver.quit(); 
```

## Selenium 浏览器选项

当你使用这个库时，你可以实现太多的功能，例如，假设你使用的是 chrome，你可以在你的代码中添加

```
ChromeOptions options = new ChromeOptions(); 
```

看看我们如何使用 WebDriver 使用 ChromeOptions 打开 Chrome 扩展

```
options.addExtensions(new File("src\test\resources\extensions\extension.crx")); 
```

这是为了使用隐身模式

```
options.addArguments("--incognito"); 
```

这个用于禁用 javascript 和信息栏

```
options.addArguments("--disable-infobars");
options.addArguments("--disable-javascript"); 
```

如果您想让浏览器静默抓取并在后台隐藏浏览器抓取，则此选项

```
options.addArguments("--headless"); 
```

一旦你完成了它

```
WebDriver driver = new ChromeDriver(options); 
```

总而言之，让我们看看 Selenium 必须提供什么，并使其成为与迄今为止在这篇文章中提出的其他解决方案相比的独特选择。

*   语言和框架支持
*   开源可用性
*   多浏览器支持
*   跨各种操作系统的支持
*   易于实施
*   可重用性和集成
*   并行测试执行和更快的上市
*   易于学习和使用
*   不断更新

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-01T13:58:45.310

我建议您使用[HttpClient 库](http://hc.apache.org/httpcomponents-client-ga/)。[您可以在此处](http://hc.apache.org/httpcomponents-client-ga/examples.html)找到示例。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-02-22T01:02:43.367

我更喜欢 crawler4j。Crawler4j 是一个开源的 Java 爬虫，它提供了一个简单的 Web 爬虫界面。您可以在几个小时内设置一个多线程网络爬虫。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-01-03T12:19:42.820

我认为[jsoup](http://jsoup.org/)比其他的更好，jsoup 可以在 Java 1.5 及更高版本、Scala、Android、OSGi 和 Google App Engine 上运行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-01T18:06:08.843

你可以 explore.apache droid 或 apache nutch 来感受一下基于 java 的爬虫

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-18T17:50:25.587

虽然主要用于单元测试 Web 应用程序，但 HttpUnit 会遍历网站、单击链接、分析表格和表单元素，并为您提供有关所有页面的元数据。我将它用于 Web Crawling，而不仅仅是用于单元测试。- [http://httpunit.sourceforge.net/](http://httpunit.sourceforge.net/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-26T07:04:27.610

以下是可用爬虫的列表：

[https://java-source.net/open-source/crawlers](https://java-source.net/open-source/crawlers)

但我建议使用[Apache Nutch](http://nutch.apache.org/)

# node.js - Express.js 博客应用程序——格式化日期

> ID：11282507
> 
> 赞同：0
> 
> 时间：2012-07-01T13:50:18.630
> 
> 标签：node.js, express, momentjs

我正在学习 Node.js/Express.js，作为一个实验，我正在尝试构建一个小型博客应用程序。

我渲染页面，传递文章：

```
response.render('index.jade', {
    title: 'Blog'
  , locals: {
      articles: articles
  }
}); 
```

这是我的 Jade 模板：

```
h1= title
section
  h1 Articles
  ul
  each article in articles
    li
      a(href='/article/' + article.slug)= article.title
      span  at #{article.created_at} 
```

这将显示带有标题和日期的文章列表。但是，我需要一种将日期格式化为更易读的格式的方法。我发现了允许你这样做的库，但我真正的问题是我应该如何将它集成到我的模板中？我可以将 moment 模块传递给模板并在那里格式化日期，或者我可以在路由中对其进行格式化并将其添加到`article`对象中。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:19:36.617

我的应用程序中有以下助手：

```
date: function (date) {
  return moment(date).format('YYYY/MM/DD HH:mm:ss');
},

fromNow: function(date) { 
  return moment(date).fromNow(); 
} 
```

这可能取决于您的应用程序，但我没有看到需要在我的网站上使用不同的日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:54:06.107

如果您想要更少和干净的代码，我会添加到模板中。如果您想要性能，请在路线本身中对其进行格式化。

# mongodb - 两个区别mongodb Query？

> ID：11282508
> 
> 赞同：0
> 
> 时间：2012-07-01T13:50:19.623
> 
> 标签：mongodb, nosql

蒙古数据库：

1：集合如 {'num':1}{'num':2}{'num':3}{'num':4}

在我的程序中：

```
list=[1,2,3,4]
db.collection.find({'num':{"$in":list}})

for i in list:
    db.collection.find({'num':i}) 
```

这两种方法有什么区别（性能）吗？

如果我有这样的场景：collection 比如 collection1:{'num':1}{'num':2}{'num':3}{'num':4}

集合2：{'n':1}{'n':2}{'n':3}{'n':4}

```
nums=db.collection1.find() 
```

1：

```
for num in nums:
    db.collection2.find({'n':num}) 
```

2：

```
list=[]
for num in nums:
    list.append(num)
db.collection2.find({'n':{"$in":list}}) 
```

这两种方法有什么区别（性能）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:57:39.533

第一个将整个搜索查询一次发送到数据库，并在一个连接中搜索 [1,2,3,4]。

第二个打开连接，搜索 1，返回结果，然后通过网络返回，搜索 2，等等。**这个应该更慢。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:02:22.973

是的，一般来说，由于多种因素，您会产生差异：

*   正如 Sergio 所观察到的，“一次通话”方法需要更少的网络往返。如果您的列表很大，网络速度较慢，并且会按顺序访问整个表，则此选项将运行得更快。
*   另一方面，如果您正在搜索的字段上有索引，则单个查询将运行得更快。如果您有一个小列表、快速的网络和较慢的整体数据库访问，那么现在可能是第二个选项运行得更快。

根据实际发生的情况（即，如果您的集合中的文档也有巨大的有效负载，因此直接访问它们而不是通过索引访问它们会更昂贵；或者有多少记录；等等），您可能会遇到不同级别的性能，但你不能说一般来说哪种方法更方便。

此外，差异受数据库大小、是否分片等因素的影响。

坦率地说，在现实世界中的大型数据库上，我宁愿在不同的负载条件下运行几次这两个版本，然后……给它们计时。有太多因素在起作用，网络往返只是其中之一。

如果您正在设计一个系统，请仔细确定您的假设（包括增长和扩展）。很容易想出一个解决方案，当事情很小的时候运行得非常快，当数据库增长或者如果它可能被移动到云中时，它就会变成糖浆。

# asp.net - 嵌套查询中的 ESQL 聚合`COUNT()`

> ID：11282511
> 
> 赞同：0
> 
> 时间：2012-07-01T13:50:39.600
> 
> 标签：asp.net, count, aggregate-functions, entity-sql

我有一个带有 SQL 的 url 参数的 ASP.NET 页面获取请求，用于 AJAX 以获取 JSON 响应。

例如：`url: 'GridService.aspx?query=SELECT VALUE s.Name, s.Email FROM ModelContainer.StudentSet AS s'`将获得`Name`和的信息`Email`。

为了使用[jqGrid](http://www.trirand.com/blog/)实现分页，我必须将此查询的总数添加到 JSON 响应中。

但以下查询不适用于 ESQL：

```
SELECT VALUE COUNT(0) FROM (SELECT VALUE s.Name, s.Email FROM ModelContainer.StudentSet AS s) 
```

这是因为在子查询中选择了两列。以下方法可以工作：

```
SELECT VALUE COUNT(0) FROM (SELECT VALUE s FROM ModelContainer.StudentSet AS s) 
```

由于**我不想选择不必要的列**，我想知道是否有人可以举一个使前一个工作的例子。请注意，PK`Name`也不是。`Email`

# objective-c - JSON格式问题

> ID：11282515
> 
> 赞同：0
> 
> 时间：2012-07-01T13:50:54.597
> 
> 标签：objective-c, json, restkit

我是 Web 服务的新手，并且 GET 工作正常。当我尝试发布时，我正在发送这个 JSON 字符串：

```
{"frequency":"None","leader":"test@test.com"} 
```

但是服务器期望这样：

```
{ 
    "meta": 
       {"limit": 20, "total_count": 2}, 
    "objects": 
       [{"frequency": "None", "leader": "jsmith@gmail.com"},
        {"frequency": "None", "leader": "jsmith@gmail.com"}]
} 
```

在我的 NewMeetingRK 对象中，我试图映射到“对象”，如下所示：

```
mgr.serializationMIMEType = RKMIMETypeJSON;

RKObjectMapping* newmtg = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];

    [newmtg mapKeyPath: @"frequency"     toAttribute:@"repeat"      ];
    [newmtg mapKeyPath: @"leader"     toAttribute:@"leader"      ];

RKObjectMapping* newmtgSerializeMapping = [newmtg inverseMapping];
    [mgr.mappingProvider setSerializationMapping:newmtgSerializeMapping forClass:[NewMeetingRK class]];
[mgr.mappingProvider setMapping:newmtgSerializeMapping forKeyPath:@"objects"];

[mgr.router routeClass:[NewMeetingRK class] toResourcePath:@"" forMethod:RKRequestMethodPOST]; 
```

这是行不通的。我尝试将 toResourcePath 更改为 @"/objects" 但这也不起作用。知道如何将值发送到服务器上的第二组 JSON 值吗？

- -编辑 - -

正如@HotLicks 指出的那样，我错过了数组 - 谢谢。但我仍然无法让我的带有 JSON 值的简单帖子正常工作。
我可以用 RKClient 做一些简单的事情来代替 RKObjectManager 吗？

```
client = [RKClient clientWithBaseURL:[RKURL URLWithBaseURLString:@"https://appzute.appspot.com"]];
NSLog(@"I am your RKClient singleton : %@", [RKClient sharedClient]); 
client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;
[client setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

NSMutableArray *meetingArray = [NSMutableArray arrayWithCapacity:100];  
[meetingArray addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:
                         self.leaderEmail.text, @"leader", 
                         self.repeatLabel.text, @"frequency", 
                         nil]];
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:meetingArray, @"objects", nil];

NSString *jsonString = [jsonDictionary JSONRepresentation];
NSLog (@"jsonString is: %@",jsonString);
[client post:@"/api/meeting/?format=json&username=testuser@test.com&api_key=sdf7asd87fs8df78sdf" params:jsonString delegate:self]; 
```

jsonString 的值看起来很完美： {"objects":[{"leader":"me@me.com","frequency":"None"}]} 问题是 params:jsonString 无效，因为它需要对象不是字符串。但是如果我使用 params: jsonDictionary 然后我得到这个日志文件： Sent RKRequest: objects[][leader]=me%40me.com&objects[][frequency]=None I restkit.network:RKRequest.m:676 Status Code: 500

我可能做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:39:17.473

不熟悉那个 JSON 工具包，但通常你要做的是创建两个字典，一个用于你的每个“对象”，将它们放在一个数组中（你的“对象”数组）。然后为您的“元”信息创建一个字典。最后，创建一个包含“元”信息和“对象”数组的字典。

JSON 几乎完美地映射到 NSDictionary/NSArray，因此实际上不需要使用使用“包装器”对象的工具包。

# php - PHP-MYSQL 根据期限显示不同的颜色

> ID：11282523
> 
> 赞同：1
> 
> 时间：2012-07-01T13:51:53.420
> 
> 标签：php, mysql, date, time, colors

如何根据建立到 mysql 数据库数据中的截止日期显示不同的 div 背景颜色？

即Mysql日期：10-10-2012

`display background-color: #FF9999`如果今天是从“之前”到 1-10-2012
`display background-color: #FF0000`如果今天是从 1-10-2012 到 10-10-2012
`display background-color: #FFFFFF`如果今天是从 10-10-2012 到“之后”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:13:34.213

例如（未经测试）：

在您的样式表中定义：

```
.before { background-color: #FF9999; } 
.current { background-color: #FF0000; } 
.after { background-color: #FFFFFF; } 
```

在你的 php 中：

```
$iNow = time();
$iDeadline = strtotime($sMySqlDate);
$iAfter = strtotime('+1 day', $iDeadline);
$iBefore = strtotime('-10 days', $iDeadline);
$sClass = ($iNow >= $iAfter ? 'after' : ($iNow < $iBefore ? 'before' : 'current'));
echo '<div class="' . $sClass . '">...</div>'; 
```

=== 更新 ===

从 mysql 数据库中读取时间戳：

```
$sSql = "SELECT `closedate` FROM `table`";
$rResult = mysql_query($sSql);
if (!$rResult) {
    echo "Could not successfully run query ($sSql) from DB: " . mysql_error();
    exit;
}

$aRow = mysql_fetch_assoc($rResult);
$sMySqlDate = $aRow['closedate'];
mysql_free_result($rResult); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:14:57.193

您可以使用[`date()`](http://www.php.net/manual/en/function.date.php)和的组合[`strtotime()`](http://php.net/manual/en/function.strtotime.php)。在我的示例中，我假设您在某种 SQL 查询结果中有日期，例如`$result['date']`，它是而`2012-10-10`不是`10-10-2012`.

```
$date = strtotime($result['date']);
$before = strtotime('2012-01-01');
$after = strtotime('2012-12-31');

$today = strtotime(date(Y-m-d));

if($today >= $before && $today < strtotime('2012-10-01')){
    echo 'display background-color: #FF9999';
}
elseif($today >= strtotime('2012-10-01') && $today <= strtotime('2012-10-10')){
    echo 'display background-color: #FF0000';
}
elseif($today > strtotime('2012-10-10') && $today <= $after){
    echo 'display background-color: #FFFFFF';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:06:43.820

从数据库中获取当前日期的时间戳和日期的时间戳，然后进行比较。使用 strtotime 函数。

例子：

```
$date1 = strtotime('01-07-2012');
$date2 = strtotime('01-02-2009');

if($date1 > $date2) echo 'The first date was before second one.'; 
```

# drupal - 使用数据表创建一个 drupal 页面

> ID：11282539
> 
> 赞同：1
> 
> 时间：2012-07-01T13:54:15.067
> 
> 标签：drupal

我想做的事：

1.  设置数据模式并将 .csv 数据导入 drupal
2.  创建一个显示表中数据的drupal页面

有没有现有的模块可以完成类似的任务？

PS：我使用的是drupal 7.x 版本。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:39:18.283

首先根据您的架构创建一个内容类型。

然后使用 Feeds 模块 ( [http://drupal.org/project/feeds](http://drupal.org/project/feeds) ) 从 CSV 导入数据。

使用视图 ( [http://drupal.org/project/views](http://drupal.org/project/views) ) 创建数据表。

# perl - 匹配的行（带有正则表达式）被写入两个输出文件，但它应该只被写入一个输出文件..

> ID：11282542
> 
> 赞同：1
> 
> 时间：2012-07-01T13:54:59.213
> 
> 标签：perl

我有一个包含多行的制表符分隔的文本文件。我编写了一个脚本，在其中将行分配给一个数组，然后我通过正则表达式在数组中搜索，以找到符合某些条件的行。找到匹配项后，我将其写入 Output1。在遍历所有列出的 if 语句（正则表达式）并且仍然不满足条件后，该行被写入输出 2。

在匹配标准和写入输出 1 时，我 100% 工作，但这是我的问题所在：匹配的行也被写入输出 2，以及不匹配的行。我可能犯了一个愚蠢的错误，但我真的看不到它。如果有人可以看看并帮助我，我会非常感激..

非常感谢！:)

```
Inputfile sample:
skool   school
losieshuis  pension
prys    prijs
eeu    eeuw
lys lijs
water   water
outoritêr   outoritaire

#!/usr/bin/perl-w
use strict;
use warnings;
use open ':utf8';
use autodie;

open OSWNM, "<SecondWordsNotMatched.txt";
open ONIC, ">Output1NonIdenticalCognates.txt";
open ONC, ">Output2NonCognates.txt";

while (my $line = <OSWNM>)
{
    chomp $line;        
    my @Row = $line;

    for (my $x = 0; $x <= $#Row; $x++)
    {
        my $RowWord = $Row[$x];

#Match: anything, followed by 'y' or 'lê' or 'ê', followed by anything, followed by 
a tab, followed by anything, followed by 'ij' or 'leggen' or 'e', followed by anything

      if ($RowWord =~ /(.*)(y|lê|ê)(.*)(\t)(.*)(ij|leggen|e)(.*)/)
      {
        print ONIC "$RowWord\n";
      }

#Match: anything, followed by 'eeu', followed by 'e' or 's', optional, followed by 
anyhitng, followed by a tab, followed by anything, followed by 'eeuw', followed by 'en', optional

      if ($RowWord =~ /(.*)(eeu)(e|s)?(\t)(.*)(eeuw)(en)?/)
    {
        print ONIC "$RowWord\n";
      }

      else
    {
        print ONC "$RowWord\n";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:09:34.857

在你的循环中，你基本上有：

```
if (A) {
  output to file1
}

if (B) {
  output to file1
} else {
  output to file2
} 
```

所以你会`output to file2`得到任何不满足的东西`B`（不管是否`A`满足），并输出同时满足`A`和`B`两次满足的东西`file1`。

如果不打算输出两次，则应将逻辑修改为：

```
if (A or B) {
  output to file1
} else {
  output to file2
} 
```

或者：

```
if (A) {
  output to file1
} elsif (B) {
  output to file1
} else {
  output to file2
} 
```

（第二个版本允许您对`A`和`B`案例进行不同的处理。）

如果打算使用双重输出，您可以执行以下操作：

```
my $output_to_file2 = 1;

if (A) {
  output to file1
  $output_to_file2 = 0;
}

if (B) {
  output to file1
  $output_to_file2 = 0;
}

if ($output_to_file2) {
  output to file2
} 
```

# javascript - 在 Linux、服务器端缩小和加入 CSS 和 JS 文件

> ID：11282546
> 
> 赞同：2
> 
> 时间：2012-07-01T13:55:53.377
> 
> 标签：javascript, css, linux, command-line, minify

例如，在我的项目中，我有这样的结构：

```
/public/js/src/ /* many jquery plugins there */
/public/css/src/ /* many css files there, that describe different things */ 
```

进行更改后，我想在命令行中输入如下内容：

```
root@hostname:/var/www/test/public# ./build 
```

这将生成两个文件：

```
/public/css/build.css - all files from /public/css/src/ folder with minified source
/public/js/build.js - all files from /public/js/src folder with minified source 
```

* * *

目前我正在使用较少的 css，它正在节点上工作。我想有一个脚本可以做所有事情，对于 css 和 javascript。您能否建议“构建”开发源 javascript 和 css 文件的最佳方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T14:56:14.930

您可以使用[YUI 压缩器](https://github.com/yui/yuicompressor/)。我确信它也适用于 Linux。它从命令行工作。[在这里阅读](https://github.com/yui/yuicompressor/blob/master/README.md)它是如何工作的。

例子：

```
java -jar yuicompressor-x.y.z.jar myfile.js -o myfile-min.js --charset utf-8 
```

我相信您可以设置一个简单的 Bash 脚本，通过使用参数作为输入来执行两个命令，一个用于 CSS，另一个用于 JS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-18T19:34:29.847

YUI-Compressor 可以在任何 Ubuntu 版本中作为一个包使用。

```
apt-get install yui-compressor 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T15:11:51.063

您可以使用 Apache ANT 和 YUI Compressor 来设置您自己的构建过程。您可以使用一个命令来缩小所有 JS 和 CSS 文件。

编辑：如果您想要一个示例项目，请尝试 H5bp 的 ant 构建脚本[http://html5boilerplate.com/](http://html5boilerplate.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-13T12:47:37.480

我知道这是一个老问题，但对于那些通过谷歌来到这里的人来说。您可以轻松地为此使用 Compass。

```
compass compile --output-style compressed --force 
```

更多信息：[http ://compass-style.org/help/tutorials/production-css/](http://compass-style.org/help/tutorials/production-css/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-08T23:57:06.077

使用 ACCSS 进行 css 压缩，它的压缩率比 YUI-Compressors 好，而且它是用 c 语言编写的，带有 automake 安装，因此几乎可以移植到每个系统。

像上面一样，你可以使用一个shell脚本来组合less和accss。accss 支持从标准输入读取，因此您可以将它们与

`lessc styles.less | accss > out.css`

它还具有严格的兼容性选项，尤其是对于 Internet Explorer。

[https://github.com/acwtools/accss](https://github.com/acwtools/accss)

# c# - 如何使此 NHibernate QueryOver 查询返回空组的行

> ID：11282553
> 
> 赞同：0
> 
> 时间：2012-07-01T13:56:53.770
> 
> 标签：c#, nhibernate, group-by, queryover

以下 NHibernate QueryOver 查询正在计算给定日期范围内每个月的应用程序数量。

但是，对于没有任何应用程序的月份，我没有得到任何结果，但我实际上希望这些月份返回 Count = 0。

那么我将如何更改查询以在其中没有任何应用程序的月份也返回一行？

```
DateTimeOffset endDate = DateTimeOffset.Now;
DateTimeOffset startDate = endDate.AddMonths(-12);

var result = Session.QueryOver<Application>()
    .WhereRestrictionOn(c => c.SubmissionDate).IsBetween(startDate).And(endDate)
    .SelectList(list => list
        .Select(Projections.SqlGroupProjection(
            "YEAR(SubmissionDate) As [Year]",
            "YEAR(SubmissionDate)",
            new[] { "YEAR" },
            new IType[] { NHibernateUtil.Int32 }))
        .Select(Projections.SqlGroupProjection(
            "MONTH(SubmissionDate) As [Month]",
            "MONTH(SubmissionDate)",
            new[] { "MONTH" },
            new IType[] { NHibernateUtil.Int32 }))
        .SelectCount(x => x.Id))
    .OrderBy(Projections.SqlFunction(
        "YEAR",
        NHibernateUtil.Int32,
        Projections.Property<Application>(item => item.SubmissionDate))).Asc
    .ThenBy(Projections.SqlFunction(
        "MONTH",
        NHibernateUtil.Int32,
        Projections.Property<Application>(item => item.SubmissionDate))).Asc
    .List<object[]>()
    .Select(n => new
    {
        Year = n[0],
        Month = n[1],
        Count = (int)n[2]
    })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:27:17.323

更新：带着你的想法`DateTime.AddMonths()`变得更短

```
 DateTime lastMonth = startdate;
    var unionresults = result.SelectMany(r =>
    {
        var actualDate = new DateTime(r.Year, r.Month, 1);

        var results = Enumerable.Repeat(1, Months)
            .Select(i => lastMonth.AddMonths(i))
            .TakeWhile(date => date < actualDate)
            .Select(date => new { Year = date.Year, Month = date.Month, Count = 0 })
            .Concat(new[] { r });

        lastMonth = actualDate;

        return results;
    }); 
```

原来的：

我认为您必须在查询后添加该数据。这是一个使用 linq 填写缺失月份的示例

```
var result = <query>;

int lastMonth = 1;
var unionresults = result.SelectMany(r =>
{
    var results = new[] { r }.AsEnumerable();

    if (lastMonth > r.Month)
    {
        results = Enumerable.Range(lastMonth, 12 - lastMonth).Select(month => new { Year = r.Year, Month = month, Count = 0 })
            .Concat(Enumerable.Range(1, r.Month).Select(month => new { Year = r.Year, Month = month, Count = 0 }))
            .Concat(results);
    }
    else if (lastMonth < r.Month)
    {
        results = Enumerable.Range(lastMonth, r.Month - lastMonth)
            .Select(month => new { Year = r.Year, Month = month, Count = 0 })
            .Concat(results);
    }

    lastMonth = r.Month + 1;
    if (lastMonth > 12)
    {
        lastMonth = 1;
    }

    return results;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:33:32.197

它不能通过一些简单的改变来完成。由 QueryOver() 生成的 SQL 查询首先无法计算不存在的内容。您可能可以使用虚拟/临时表（取决于 DBMS）使用 UNION 或 JOIN 来执行此操作，但这会使查询过于复杂。

我建议在您的查询之后添加一个循环，该循环遍历列表，将元素复制到新列表并将任何不存在的月份添加到该新列表中。像这样的东西：

```
class YearMonthCount
{
    public int Year { get; set; }
    public int Month { get; set; }
    public int Count { get; set; }
}

// Start and End dates
DateTime startDate = new DateTime(2011, 9, 1);
DateTime endDate = new DateTime(2012, 6, 1);
// this would be a sample of the QueryOver() result
List<YearMonthCount> result = new List<YearMonthCount>();
result.Add(new YearMonthCount { Year = 2011, Month = 10, Count = 2 });
result.Add(new YearMonthCount { Year = 2011, Month = 11, Count = 3 });
result.Add(new YearMonthCount { Year = 2012, Month = 1, Count = 4 });
result.Add(new YearMonthCount { Year = 2012, Month = 2, Count = 1 });
result.Add(new YearMonthCount { Year = 2012, Month = 4, Count = 1 });
result.Add(new YearMonthCount { Year = 2012, Month = 5, Count = 1 });

int i = 0;
List<YearMonthCount> result2 = new List<YearMonthCount>();
// iterate through result list, add any missing entry
while (startDate <= endDate)
{
    bool addNewEntry = true;
    // check to avoid OutOfBoundsException
    if (i < result.Count)
    {
        DateTime listDate = new DateTime(result[i].Year, result[i].Month, 1);
        if (startDate == listDate)
        {
            // entry is in the QueryOver result -> add this
            result2.Add(result[i]);
            i++;
            addNewEntry = false;
        }
    }
    if (addNewEntry)
    {
        // entry is not in the QueryOver result -> add a new entry
        result2.Add(new YearMonthCount { 
            Year = startDate.Year, Month = startDate.Month, Count = 0 });
    }
    startDate = startDate.AddMonths(1);
} 
```

这可能可以更优雅地完成，但它可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:41:15.553

感谢所有的答案，这就是我最终这样做的方式：

```
DateTime endDate = DateTime.Now;
DateTime startDate = endDate.AddMonths(-Months);

var result = Session.QueryOver<Application>()
    .WhereRestrictionOn(c => c.SubmissionDate).IsBetween(startDate).And(endDate)
    .SelectList(list => list
        .Select(Projections.SqlGroupProjection(
        "YEAR(SubmissionDate) As [Year]",
        "YEAR(SubmissionDate)",
        new[] { "YEAR" },
        new IType[] { NHibernateUtil.Int32 }))
    .Select(Projections.SqlGroupProjection(
        "MONTH(SubmissionDate) As [Month]",
        "MONTH(SubmissionDate)",
        new[] { "MONTH" },
        new IType[] { NHibernateUtil.Int32 }))
    .SelectCount(x => x.Id))
    .List<object[]>()
    .Select(n => new
    {
        Year = (int)n[0],
        Month = (int)n[1],
        Count = (int)n[2]
    }).ToList();

var finalResult = result
    .Union(
        Enumerable.Range(0, Months - 1).Select(n => new
        {
            Year = startDate.AddMonths(n).Year,
            Month = startDate.AddMonths(n).Month,
            Count = 0
        })
        .Where(n => !result.Any(r => r.Year == n.Year && r.Month == n.Month)))
    .OrderBy(n => n.Year).ThenBy(n => n.Month); 
```

# html - 不需要的内容掉在图像下

> ID：11282561
> 
> 赞同：1
> 
> 时间：2012-07-01T13:57:40.780
> 
> 标签：html, css

我在图像旁边有文字（现在是红色方块）。当我使窗口变得非常小时，文本会出现在图像下方，我不希望这种情况发生。

超好的：

![在此处输入图像描述](../Images/0f5d0c6acd1e0faf9bad07d565c836b0.png)

坏的：

![在此处输入图像描述](../Images/0a5fda2c19edad7460b3d62f3845710e.png)

如何预防？

```
<div class="entrie">
                <img class="entrieImage" src="images/img01.png"/>

                <div class="entrieInfo">
                    <div class="band">Green</div>
                    <div class="album">...</div>
                    <div class="label">ATCO</div>
                    <div class="year">1966</div>
                    -
                    <div class="tags">rousseau, green, woodsy, band photo, 12IN, tree, civilization, Atco, 1960's, Fuzz
                    </div>
                </div>

            </div> 
```

-

```
.entrie {
    float: left;
    margin-bottom: 40px;
    position: relative;
}

.entrieInfo {
    width: 200px;
    float: left;
    margin-left: 10px;
    margin-right: -45px;
    position: relative;
    z-index: 2;

}

.entrieImage {
    /* if you only set the width then the height will be set automaticly proportional*/
    width: 300px;
    height: 300px;
    float: left;
    position: relative;
    z-index: 1;
    background: red;
} 
```

这里有一个 js fiddle 以便于测试：

[http://jsfiddle.net/K4RFU/](http://jsfiddle.net/K4RFU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:05:04.373

您可以`min-width`在`.entrie`其上设置足够大以包含其内容的 a。

# google-maps - 使用 Google 地图、Stamen Tiles（现有的瓦片库）和 Require.js？

> ID：11282566
> 
> 赞同：4
> 
> 时间：2012-07-01T13:59:27.247
> 
> 标签：google-maps, requirejs, stamen-maps

我正在尝试编写一个模块来在 Require.js 下加载雄蕊平铺图，但我不确定如何最好地将它与 Require 一起使用。

如果您以前没有看过 Stamen 地图，他们的网站位于[Stamen Maps](http://maps.stamen.com/)。

这是地图视图**view.js的代码**

```
define([
  'jquery',
  'underscore',
  'backbone',
  'maps',
  'text!templates/map/view.html'
], function($, _, Backbone, maps, mapTemplate){
  var mapView = Backbone.View.extend({
    el: $(".map"),
    displayMap: function() {
      this.options = {
        center: new maps.LatLng(-37.8, 144.9),
        zoom: 11,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        scrollwheel: false
      };
      this.render();
    },
    render: function(){
      var compiledTemplate = _.template(mapTemplate);
      var $el = $(this.el);
      $el.html(compiledTemplate);
      this.map = new maps.Map($el.find('.map').get(0), this.options);
    }
  });
  return new mapView;
}); 
```

我正在加载以下模块的地图 API：

**地图.js**

```
define(['google!maps/3/sensor=false'], function() { 
  return google.maps;
}); 
```

哪个有**google.js的依赖**

```
define(['http://www.google.com/jsapi?key=THE_API_KEY&callback=define'], { 
  load: function( name, req, load, config ) { 
    if (config.isBuild) {
      onLoad(null);
    } else {
      var request = name.split('/'); 
      google.load(request[0], request[1], { 
        callback: load, 
        language: 'en', 
        other_params: ((typeof request[2] === 'string')?request[2]:'') 
      });
    }
  } 
}); 
```

问题是 Stamen 地图图层似乎可以直接编辑 Google Maps 实例。你可以在这里看到雄蕊地图的实现：http://maps.stamen.com/js/tile.stamen.js? [v1.1.1](http://maps.stamen.com/js/tile.stamen.js?v1.1.1)

```
google.maps.StamenMapType = function(name) {
  //Implementation
} 
```

它似乎依赖于全局 google.maps 对象，我认为这是问题所在。

我不确定如何最好地将 Stamen 插件重写为对 require.js 友好，或者如果我需要，我真的很想使用它。除非我从 Require.js 中取出 Google 地图和 Stamen 并正常加载它们（就像我对 Modernizr 所做的那样），但我更愿意尝试以 Require.js 的方式进行操作。如果有这样的事情。

任何建议或提示将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T19:07:08.480

我负责 tile.stamen.js。对不起，头痛。

这里的问题是我们的脚本需要访问 Google Maps 命名空间 ( `google.maps`)，以便它可以创建`StamenMapType`类并让它继承 Google 的`ImageMapType`. 如果您绝对*需要*使用 RequireJS（我不建议这样做，正是因为它使简单的东西变得很尴尬），您需要重写 tile.stamen.js 的整个 Google 特定部分（第 155-177 行）看起来像这样：

```
exports.makeStamenMapType = function(name, gmaps) {
    if (!gmaps) gmaps = google.maps;
    var provider = getProvider(name);
    return new gmaps.ImageMapType({
        "getTileUrl": function(coord, zoom) {
            var index = (zoom + coord.x + coord.y) % SUBDOMAINS.length;
            return [
                provider.url
                    .replace("{S}", SUBDOMAINS[index])
                    .replace("{Z}", zoom)
                    .replace("{X}", coord.x)
                    .replace("{Y}", coord.y)
            ];
        },
        "tileSize": new gmaps.Size(256, 256),
        "name":     name,
        "minZoom":  provider.minZoom,
        "maxZoom":  provider.maxZoom
    });
}; 
```

然后你会使用：

```
var toner = makeStamenMapType("toner", gmaps); 
```

`gmaps`您需要的 Google Maps API 对象在哪里。

# groovy - 如何在 Soapui Pro 4.5.0 中使用 groovy 处理 Excel 数据源？

> ID：11282568
> 
> 赞同：0
> 
> 时间：2012-07-01T13:59:53.127
> 
> 标签：groovy, automation, soapui

我在 SoapUI Pro 4.5.0 工具中使用带有 Excel 文件的数据源。它在 SoapUI Pro 4.5.0 工具中手动执行时工作正常。但是我需要通过脚本（Groovy）来执行这个过程。这意味着，从 excel 获取输入并将它们分配给 Datasource 选项。

可能吗？

我在示例中使用了以下 URL。

[http://www.webservicex.com/CurrencyConvertor.asmx?wsdl](http://www.webservicex.com/CurrencyConvertor.asmx?wsdl)

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-01T20:02:08.677

我想你可以使用 JDBC。

这是一个 Excel JDBC 驱动程序：http: [//sourceforge.net/projects/xlsql/](http://sourceforge.net/projects/xlsql/)

您可能需要将 JAR 添加到 /bin/ext 并调用 registerjdbcdriver： http: [//www.soapui.org/Scripting-Properties/tips-a-tricks.html#10-use-a-jdbc-driver-from -inside-a-groovy-script](http://www.soapui.org/Scripting-Properties/tips-a-tricks.html#10-use-a-jdbc-driver-from-inside-a-groovy-script)

# javascript - Jquery 移动页脚不会调整为屏幕大小

> ID：11282570
> 
> 赞同：0
> 
> 时间：2012-07-01T14:00:27.887
> 
> 标签：javascript, jquery, jquery-mobile

我的 jquery 移动页面中的页脚有问题。屏幕边缘和页脚边缘之间总是有一些空间。在我网站的其他页面中，该空间不存在。那么，有人知道我能做些什么吗？页脚中间有一个 iframe，但在其他页面上，它也在那里。这是页脚的代码，有人知道为什么会这样吗？

```
document.write (
<div data-role="footer"> 
<div align="center"><iframe width="320" height="50" frameborder="0" src="http://scoutline.3owl.com/test/rss/ads.html" scrolling="no"></iframe></div>
</div> 
```

（在实际代码中，每行前有一个 '，每行后有一个 '+，但堆栈溢出不会显示我的代码。）

在此先感谢 Jan Thiemen

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:57:03.693

我访问了[http://scoutline.3owl.com/test/rss/ads.html](http://scoutline.3owl.com/test/rss/ads.html)并从那里找到了您页面的源代码。

您当前将页脚放置在内容中，这就是它被限制为宽度的 90% 的原因。在它前面添加另一个，你就可以开始了。（是的，我的意思是添加，因为我找不到 data-role=page 的结束 div）。

我做了一个 jsfiddle [http://jsfiddle.net/YeBGS/](http://jsfiddle.net/YeBGS/)

# mysql - ORDER BY 在 MySQL 语句中分别正数和负数

> ID：11282571
> 
> 赞同：5
> 
> 时间：2012-07-01T14:00:55.747
> 
> 标签：mysql, sql, sql-order-by

我有一个 MySQL 表，并希望按以下顺序根据列值返回行：

*   如果列 >=0，则为第一个升序
*   如果列 <0，则降序排列

例如 0,2,4,7,-2,-3,-5

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-01T14:05:44.660

可以用[SIGN将正数排在最前面，然后用](http://www.w3resource.com/mysql/mathematical-functions/mysql-sign-function.php)[ABS](http://www.w3resource.com/mysql/mathematical-functions/mysql-abs-function.php)取绝对值，得到想要的 ASC/DESC。

```
SELECT * FROM theTable
ORDER BY SIGN(col) DESC, ABS(col) 
```

**编辑**

正如 Nahuel 指出的那样，上面将 0 排序到正负之间的中间。要将它们与正数分组，您可以使用 a`CASE`代替（或者，如果您的列只是整数，则稍微神奇`SIGN(col + 1)`）

```
SELECT * FROM theTable
ORDER BY 
    CASE WHEN col >= 0 THEN 1 ELSE 2 END,
    ABS(col) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T14:04:15.123

```
SELECT columnName1 FROM Tbl
WHERE columnName1 >= 0
ORDER BY columnName1 ASC

UNION

SELECT columnName1 FROM Tbl
WHERE columnName1 < 0
ORDER BY columnName1 DESC 
```

应该管用

# makefile - 为多个规则执行一个 make 目标

> ID：11282572
> 
> 赞同：1
> 
> 时间：2012-07-01T14:01:07.167
> 
> 标签：makefile

我有一个库列表，每个库都有 2 个文件（`.so`, `.dll`）。如果两个文件都丢失或其中一个文件丢失，我应该如何创建一个仅执行一次配方的 make 规则。

```
LIBS = alib blib
LIBS_SO = $(patsubst %, %.so, $(LIBS))
LIBS_DLL = $(patsubst %, %.dll, $(LIBS)) 
```

如果我做这个目标

```
$(LIBS_SO) $(LIBS_DSS):
    cp ..... 
```

对于所有可能性，它只复制一次。

如果我这样做：

```
all : $(LIBS_SO) $(LIBS_DSS):
$(LIBS_SO) $(LIBS_DSS):
     cp ..... 
```

我在所有丢失文件的情况下都复制。`alib`如果两个或一个文件`alib.dll`/`alib.so`丢失，我想复制目录；与 相同`blib`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:17:06.013

`LIBS_DSS`您（大概）的意思有一个一致的错字`LIBS_DLL`。

您的第一个“规则”是以下内容的简写：

```
alib.so:
    cp ...
blib.so:
    cp ...
alib.dll:
    cp ...
blib.dll:
    cp ... 
```

因此，当被要求构建时，`make`构建文件中的第一个目标，即`alib.so`. 这就是它执行一次的原因。

第二个版本，当修复删除额外的冒号和错字时，应该可以工作：

```
all: $(LIBS_SO) $(LIBS_DLL)

$(LIBS_SO) $(LIBS_DLL):
     cp ..... 
```

默认规则是`all`; to make确保每个文件`all`、和都存在并且是最新的。它应该为每个丢失的目标执行一次命令。`make``alib.so``blib.so``alib.dll``blib.dll`

如果您运行并行程序，您可能会遇到麻烦`make`；`make -j4`或类似的东西。它可能几乎同时启动四个复制命令来创建每个目标。但在非并行构建中，它将确保`alib.so`是最新的（如果不是，将进行复制）。如果该副本也复制，那么当它确保是最新的`alib.dll`时它不会重新复制。`alib.dll`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:07:27.883

你没有给我们太多信息，但我认为这会做你想要的：

```
all : $(LIBS_SO) $(LIBS_DLL):
%.so %.dll:
    cp $* directory ... 
```

如果`alib.so`和`alib.dll`都缺失，Make 将只执行此规则一次。

**编辑：**感谢 Jonathan Leffler 发现错字。

# d3.js - 在 d3 中旋转和翻译文本的正确方法是什么？

> ID：11282573
> 
> 赞同：3
> 
> 时间：2012-07-01T14:01:19.547
> 
> 标签：d3.js

我有一个包含两个字符串的数组，我希望它们与两个圆圈对齐（参见示例：[http](http://bl.ocks.org/3028447) ://bl.ocks.org/3028447 ）

我目前正在这样做：

```
.attr("transform", function(d, i) { return "translate(" + x(i)+",0) rotate(-45," + x(1)+"," + 0+") "; }) 
```

我确信有一种更简单的方法可以做到这一点，如下所示：

```
.attr("transform", function(d, i) { return "translate(" + x(i)+",0) rotate(-45) "; }) 
```

但是当我使用它时，我得到了这个（[http://bl.ocks.org/3028512](http://bl.ocks.org/3028512)），我不明白为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:37:05.490

您已将转换与*x*和*y*属性相结合：

```
.attr("y", 0)
.attr("x", 60) 
```

这些在变换之前应用（即，在旋转之前），因此文本与圆圈的位置不同。有时这种技术很有用；*x*将文本平行于文本的基线移动。因此，如果您想将文本稍微定位在圆圈之外，您可以将*x*值更改为 6 而不是 60。

# iphone - 从一个选项卡切换到另一个选项卡时，Tab-Bar 应用程序崩溃

> ID：11282575
> 
> 赞同：1
> 
> 时间：2012-07-01T14:01:34.790
> 
> 标签：iphone, crash, uitabbarcontroller, nszombie

我收到此错误：

```
"An Objective-C message was sent to a deallocated object (zombie) at address: 0x118208a0" 
```

当我在我的 5 选项卡应用程序中从一个选项卡切换到另一个选项卡时。

该应用程序的设置方式类似于我们设备上的音乐/iTunes 应用程序：5 个选项卡，每个选项卡都包含一个链接到其他屏幕的 UINavigationController。

仅当我执行以下操作时***才会***发生此崩溃：
-我单击“更多”选项卡-在其中
选择“图像库”选项
-这将打开“ImageGallery”视图控制器（通过“presentModalViewController”-而不是“pushViewController”-但我认为这与导致崩溃没有任何关系）
- 然后我关闭“ImageGallery”（它有一个触发 [self dismissModalViewControllerAnimated:YES] 动作的按钮） - 这让我回到了“更多”选项卡.
-如果我现在切换到“HOME”选项卡——崩溃！

这只发生在我从“更多”选项卡切换到“主页”选项卡时。它不会发生在任何其他选项卡切换上，并且
- 这仅在我访问了“更多”选项卡中的“ImageGallery”之后才会发生。
换句话说，如果我在“更多”中并选择任何其他选项——导航到其他屏幕——*然后*切换到“主页”选项卡——一切都很好。只有在访问“MORE”中的“ImageGallery”并切换到“HOME”（并且只有“HOME”）之后——我才会崩溃。

启用 NSZombies 的仪器显示了这一点： ![在此处输入图像描述](../Images/4111e21f919fef788d0e45950a0ab271.png)

所以这显然发生在从“MORE”视图控制器内部调用“ImageGallery”视图控制器时。但是由于错误是“消息已发送到已释放的对象”，所以没有意义的是为什么/如何/何时将任何类型的消息首先从“HOME”选项卡发送到“ImageGallery”。因为“HOME”选项卡从来没有调用或引用，甚至不知道“ImageGallery”。为什么只有在切换到“HOME”选项卡而不是应用程序中的其他 3 个选项卡时才会发生这种情况？

有任何想法吗？（图像抓取中红色突出显示的线旁边的 86.2% 是什么意思？）

# php - 使用 PHP substr 函数裁剪句子

> ID：11282576
> 
> 赞同：-1
> 
> 时间：2012-07-01T14:01:48.883
> 
> 标签：php, string, formatting, str-replace, substr

我有字符串**1\. Welcome**。

我想将字符串拆分为 2 个字符串：**1** & **Welcome**。

我将如何使用**substr** PHP 函数来实现这一点？

非常感谢您的任何指点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:03:41.020

对于这种特殊情况，最合适的功能是[`explode`](http://php.net/manual/en/function.explode.php)：

```
$str = '1\. Welcome';
$parts = explode('. ', $str);

// explode returns a numerically indexed array, so:
$number = $parts[0];
$title = $parts[1]; 
```

您可以将其与[`list`](http://www.php.net/manual/en/function.list.php)构造结合起来以获得额外的便利：

```
list($number, $title) = explode('. ', $str); 
```

最后，如果标题包含点，最好指定`explode`（限制生成的令牌数量）的第三个参数：

```
list($number, $title) = explode('. ', $str, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:03:25.513

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)是您将获得的最全面的答案。

不过，如果您想以这种方式拆分字符串，我建议您使用`explode`( [http://www.php.net/manual/en/function.explode.php](http://www.php.net/manual/en/function.explode.php) ) 函数。

# node.js - 可以使用 Node.js 模块缓存来创建全局可访问的单例吗？

> ID：11282577
> 
> 赞同：0
> 
> 时间：2012-07-01T14:01:53.190
> 
> 标签：node.js, dependencies, mongoose

在将我的项目拆分为许多 OO 类后，我必须`Model`通过多个构造函数传递对我的实例（包含 Mongoose 模型和模式）的引用。

`Model`在模块内创建类的实例`model.js`然后`model.js`在我需要的任何地方都需要这个模块是不好的做法吗？

像这样的东西：

```
Model = function () { ... }

module.exports = new Model(); 
```

这将依赖 Node 的[模块缓存](http://nodejs.org/api/modules.html#modules_caching)来允许`Model`在文件之间共享相同的实例，就像拥有一个全局单例一样。

或者我应该通过构造函数显式传递依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:34:50.177

不，这不是一个坏习惯。事实上，很多人都是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:06:28.723

我会说是的，这是一种不好的做法，很容易被滥用。它确保了紧密耦合的模块，这意味着如果您离开 mongoose，您将不得不修改每个涉及数据库的文件。出于同样的原因，滥用单例是不好的，这也是不好的。

仅仅因为许多人以特定的方式做某事，并不意味着这是一件好事。

# iphone - UIScrollView 旋转概率

> ID：11282578
> 
> 赞同：0
> 
> 时间：2012-07-01T14:02:07.900
> 
> 标签：iphone, ios, xcode

`UIScrollView`在我的代码中，我以这种方式旋转：

```
[carousel scrollByNumberOfItems:-35 duration:10.7550f];

[NSTimer scheduledTimerWithTimeInterval:10.7550f 
                                 target:self
                               selector:@selector(randomFinal)
                               userInfo:nil
                                repeats:NO]; 
```

而在这部分，scrollView 停止后，它会做一个随机的移动，UP 或 Down：

```
-(void)randomFinal {

    randomBut = arc4random()%5;

    if (randomBut == 0){
 [carousel scrollByNumberOfItems: -1 duration: 4.50f];  
    } else if ( randomBut == 1){
 [carousel scrollByNumberOfItems: 1 duration: 4.50f];  
    } else if (randomBut == 2) {
 [carousel scrollByNumberOfItems: 1 duration: 5.0f];
    } else if (randomBut == 3) {
 [carousel scrollByNumberOfItems: -1 duration: 5.0f];
   } else if (randomBut == 4) {
 [carousel scrollByNumberOfItems:0 duration:0];
    }
} 
```

我需要的是让这`randomFinal`部分以 30% 的概率发生。我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:15:07.140

好吧，您可以编写如下内容：

```
int shouldCallFinal = arc4random()%100;

if(shouldCallFinal <= 70)
{
[NSTimer scheduledTimerWithTimeInterval:10.7550f 
                                 target:self
                               selector:@selector(randomFinal)
                               userInfo:nil
                                repeats:NO]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:18:11.063

你可以试试这个：

```
// arc4random_uniform() returns uniformly distributed random number < than upper_bound.
randomNumber = arc4random_uniform(100 + 1);
if(randomNumber <= 30)
    do something; 
```

调用 arc4random_uniform() 产生的随机数应该是 <= 30, 30% 的时间。

# ruby-on-rails-3 - 通过更改其他项目的状态来保证唯一性

> ID：11282579
> 
> 赞同：0
> 
> 时间：2012-07-01T14:02:10.270
> 
> 标签：ruby-on-rails-3, validation, activerecord, unique

我有一个具有布尔属性的页面模型：is_root。如果此值设置为 true，则该值应该是唯一的，因此通过在一个项目上将此设置为 true，其他将此设置为 true 的项目应设置为 false。它只是交换活动项目。

有没有优雅的“rails”方式来做到这一点？目前我正在使用这个：

```
class Page < ActiveRecord::Base
  attr_accessible :is_root
  before_save :guarantee_uniqueness_of_is_root

  def guarantee_uniqueness_of_is_root
    if self.is_root?
      Page.where(:is_root => true).each do |p|
        p.update_attribute(:is_root, false) if p != self
      end
    end
  end

end 
```

结尾

但这对我来说似乎很丑陋。

谢谢你的帮助 ：）

阿恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:40:22.297

我认为，您正在寻找的并不完全是唯一性:)，但是一次只存在一个根页面，因此当页面被添加为根时，请重置现有的根页面，确保任何时候都只存在一个根页面.

否则，怎么能想象一个布尔列是唯一的：）只有两条记录：）

```
class Page < ActiveRecord::Base
  attr_accessible :is_root
  before_save :ensure_single_root_page

  def ensure_single_root_page
    Page.update_all(:is_root => false) if self.is_root?
  end
end 
```

此外，我建议，如果您可以将根页面 ID 存储在其他地方，例如设置表或这些页面所属的其他表。拥有这样一个布尔列并不好，您知道 is_root 列中的所有值都是假的，只有一个是真的。

# image - 如何删除wordpress帖子中图像的超链接？

> ID：11282580
> 
> 赞同：0
> 
> 时间：2012-07-01T14:02:17.480
> 
> 标签：image, wordpress, hyperlink

这是我在这里的第一个问题。

我需要在 wordpress cms 的帖子中禁用我的图像上的超链接。我在添加图像 2 帖子时知道“无”按钮，但我需要某种过滤器，因为我无法再次重新发布所有 199298931092 帖子以进行更改。

我试图在我的主题的functions.php中为the_contetn过滤器添加一些代码，但我不是那么熟练的php-er，所以它不起作用。任何建议或帮助。[请向http://www.rofltime.com/](http://www.rofltime.com/)致以最诚挚的问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T09:51:25.267

如果您想要内容中的所有图像：

```
function k99_attachment_image_link_void( $content ) {
    $content =
        preg_replace(array('{<a[^>]*><img}','{/></a>}'), array('<img','/>'), $content);
    return $content;
}

add_filter( 'the_content', 'k99_attachment_image_link_void' ); 
```

如果您只想要他内容中的附件：

```
function k99_image_link_void( $content ) {
    $content =
        preg_replace(
            array('{<a(.*?)(wp-att|wp-content\/uploads)[^>]*><img}',
                '{ wp-image-[0-9]*" /></a>}'),
            array('<img','" />'),
            $content
        );
    return $content;
}

    add_filter( 'the_content', 'k99_image_link_void' ); 
```

# java - WordNet - 用于计算距离度量的 Java API

> ID：11282582
> 
> 赞同：0
> 
> 时间：2012-07-01T14:02:45.037
> 
> 标签：java, wordnet

正如标题所暗示的，我正在寻找一个 WordNet Java API，我可以使用它快速测试一些距离度量算法（例如 Resnik、Leacock 和 Chodorow 等）。我已经阅读了 JWNL、JWI 和 RiTa 的文档，但我仍然不确定它们是否实现了这些方法。

我也可以使用一种快速计算密度和/或重量的方法，因为我已经找到了这些算法的公式并且可以自己实现它们。

我需要将它们用于比较一些 WordNet 算法的效率的研究。任何建议将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:10:28.233

我看到这个问题相当老了，我不知道这是否有帮助，但似乎 RiTa 可以处理两个引理之间的某种语义距离： [http ://rednoise.org/rita/wordnet/documentation/riwordnet_method_getdistance.htm](http://rednoise.org/rita/wordnet/documentation/riwordnet_method_getdistance.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:02:49.977

RiTa 似乎只能在 WordNet 版本 3 之前完美运行。

我会推荐Java项目的[WordNet Similarity 。](http://code.google.com/p/ws4j/)他们提供了几种复杂的方法来测量语义相似度。

更新：RiTa-WordNet 版本 034 ( [http://rednoise.org/rita/wordnet](http://rednoise.org/rita/wordnet) ) 包括/支持 WordNet 版本 3.1。

# html - 没有滚动条，但我想要一个

> ID：11282586
> 
> 赞同：1
> 
> 时间：2012-07-01T14:03:16.130
> 
> 标签：html, css, scrollbar

我真的很想为页面设置一个滚动条，因为 atm 的东西就像溢出一样从窗口中消失：设置了隐藏，但我没有使用它。

我可以把我所有的代码放在这里，但我认为 jsfiddle 会更好：

[http://jsfiddle.net/K4RFU/](http://jsfiddle.net/K4RFU/)

我试过了

```
body {
    border: 0;
    padding: 0;
    margin: 0;
    font-family: "Helvetica";
    font-size: 20px;
    overflow: visible;
} 
```

还有滚动，自动，继承，这一切都没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:10:21.387

发生这种情况是因为您为所有内容设置了*固定*位置。

从`entries`元素中删除固定位置会导致出现滚动条。[更新了小提琴](http://jsfiddle.net/K4RFU/1/)。

# jquery - 第一步后的jquery formwizard停止表单插件（ajax）

> ID：11282588
> 
> 赞同：0
> 
> 时间：2012-07-01T14:03:26.710
> 
> 标签：jquery, jqueryform

我使用 jquery 表单向导分两步显示表单。在进行第二步之前，我使用 jquery 表单插件对第 1 步中的表单字段进行 ajax 验证。

我遇到的问题是完整的表单也是使用 ajax 发布的。不是重定向到显示结果的另一个页面，而是在同一页面上获取结果。如何配置表单插件以发布不使用 ajax 的完整表单？

```
<script type="text/javascript">
                    $(function(){
                            $("#Catering").formwizard({
            formPluginEnabled: true,
            validationEnabled: true,
            focusFirstInput : true,
            remoteAjax : {"first" : { // add a remote ajax call when moving next from the second step
                    url : "/validate",
                    dataType : 'json',
                    beforeSend : function(){alert("Starting validation.")},
                    complete : function(){alert("Validation complete.")},
                    success : function(data){
                    if(!(data.geldig)){ // change this value to false in validate.html to simulate successful validation
                    $("#status").fadeTo(500,1,function(){
                    $(this).html(data.errormessage)
                                    });
                            return false; //return false to stop the wizard from going forward to the next step (this will always happen)
                                    }
                            return true; //return true to make the wizard move to the next step
                            }
                    }},
                             }
                            );
            });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:59:21.543

如果您不介意通过表单选项中的 URL 公开您的变量，您可以重定向到任何地方，并且使用表单捕获的变量存储在 $.param(data)

所以我用这部分解决了

```
formOptions: {
    success: function(data){ $("#status").fadeTo(500,1,function(){ $(this).html("You are now registered!").fadeTo(5000, 0); 
    beforeSubmit: function(data){ 

        $("#data").html("data sent to the server: "+ $.param(data) );
        /*HERE YOU MADE THE REDIRECTION WITH THE VARIABLES THROUGHT URL*/
        window.location.href = "http://www.google.com?"+$.param(data);
    },
    dataType: 'json'
 } 
```

所以 beforeSubmit 你所做的就是重定向到带有 URL 参数的任何页面

# xcode - UISlider + UISwipeGestureRecognizer 第一次不工作

> ID：11282591
> 
> 赞同：0
> 
> 时间：2012-07-01T14:03:33.540
> 
> 标签：xcode, delegates, uislider, uiswipegesturerecognizer

在我的主视图控制器中，我有一个 uislider。同时我将 UISwipeGestureRecognizer 分配给 self.view 因为我想检测整个视图上的手势。

问题是每当我滑动滑块时，手势识别器也会捕捉到它，而且滑块的行为很不稳定而且不好。

这是我的代码（手势部分）

```
UISwipeGestureRecognizer* singleSwipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeRight:)];
    [singleSwipeRight setDirection:(UISwipeGestureRecognizerDirectionRight)];
    singleSwipeRight.numberOfTouchesRequired = 1;
    singleSwipeRight.delegate = self;
    [self.view addGestureRecognizer: singleSwipeRight]; 
```

正如我在[HERE](https://stackoverflow.com/questions/4765661/gesture-problem-uiswipegesturerecognizer-uislider)中所读到的，为了防止这种情况，只需实现以下委托：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

    if ([touch.view isKindOfClass:[UISlider class]]) {
        // prevent recognizing touches on the slider
        //NSLog(@"no");
        return NO;
    }
    return YES;

} 
```

但有趣的是，这仅在我第二次滑动 UISlider 时才有效。第一次滑动总是转到手势识别器处理程序。

为什么？以及如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:20:46.537

在您的`shouldReceiveTouch`方法中，添加以下行：

```
NSLog(@"touch.view class = %@", [touch.view className]); 
```

这将指示您初次接触时所获得的类名。

您还应该检查该`phase`物业；您可能只想`YES`在滑动完成后返回（取决于您的应用程序的工作方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:16:21.637

在滑块上添加平移手势识别器并且不指定目标或选择器（它会阻止其他手势识别器工作）将属性设置为 NO 允许滑块正确跟踪。

```
 UIPanGestureRecognizer* panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:nil action:nil];
[slider addGestureRecognizer:panGesture];
panGesture.cancelsTouchesInView = NO; 
```

而已！

# php - PHP：重新排序关联数组

> ID：11282592
> 
> 赞同：11
> 
> 时间：2012-07-01T14:03:35.903
> 
> 标签：php

在 php 中，我希望能够通过将元素移动到数组中的某些位置来重新排序关联数组。不需要排序，只是我选择的重新排序。

例如，假设我有一个关联数组，如下所示：

```
array(
 'a' => 'Element A',
 'b' => 'Element B',
 'c' => 'Element C',
); 
```

在一种情况下，我可能想在 B 之前移动 C 并得到以下结果：

```
array(
 'a' => 'Element A',
 'c' => 'Element C',
 'b' => 'Element B',
); 
```

或者在另一种情况下，我可能想在 A 之前移动 C 并得到以下结果：

```
array(
 'c' => 'Element C',
 'a' => 'Element A',
 'b' => 'Element B',
); 
```

我要展示的只是一种说“嘿，我想将此数组元素移动到另一个数组元素之前”或“嘿，我想移动这个数组元素以确保它位于另一个数组之后”的方法元素'

希望这是有道理的！

提前感谢任何愿意帮助我的人

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T14:11:44.330

例如，对于自定义排序，您可以创建一个数组，该数组是键的所需顺序，然后将值与它们相关联。例子：

```
$input = array("a"=>"Element A","b"=>"Element B","c"=>"Element C");
$order = array("c","a","b");
$out = array();
foreach($order as $k) {
    $out[$k] = $input[$k];
} 
```

中的元素`$out`将按指定的顺序排列。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-23T11:30:57.453

```
$arr = array(
  'a' => 1,
  'b' => 2,
  'move me' => 9,
  'c' => 3,
  'd' => 4,
); 
```

嘿，我想在 ['b'] 之前移动 ['move me']。我只需 4 行代码就可以做到！

```
$i = 0; foreach($arr as &$val) $val = array('sort' => (++$i * 10), 'val' => $val);
$arr['move me']['sort'] = $arr['b']['sort'] - 5;
uasort($arr, function($a, $b) { return $a['sort'] > $b['sort']; });
foreach($arr as &$val) $val = $val['val']; 
```

* * *

我制作了一个易于使用的功能：

```
function move_item(&$ref_arr, $key1, $move, $key2 = null)
{
  $arr = $ref_arr;
  if($key2 == null) $key2 = $key1;
  if(!isset($arr[$key1]) || !isset($arr[$key2])) return false;

  $i = 0; foreach($arr as &$val) $val = array('sort' => (++$i * 10), 'val' => $val);

  if(is_numeric($move))
  {
    if($move == 0 && $key1 == $key2) return true;
    elseif($move == 0) { $tmp = $arr[$key1]['sort']; $arr[$key1]['sort'] = $arr[$key2]['sort']; $arr[$key2]['sort'] = $tmp; }
    else $arr[$key1]['sort'] = $arr[$key2]['sort'] + ($move * 10 + ($key1 == $key2 ? ($move < 0 ? -5 : 5) : 0));
  }
  else
  {
    switch($move)
    {
      case 'up':     $arr[$key1]['sort'] = $arr[$key2]['sort'] - ($key1 == $key2 ? 15 : 5); break;
      case 'down':   $arr[$key1]['sort'] = $arr[$key2]['sort'] + ($key1 == $key2 ? 15 : 5); break;
      case 'top':    $arr[$key1]['sort'] = 5; break;
      case 'bottom': $arr[$key1]['sort'] = $i * 10 + 5; break;
      default: return false;
    }
  }
  uasort($arr, function($a, $b) { return $a['sort'] > $b['sort']; });
  foreach($arr as &$val) $val = $val['val'];
  $ref_arr = $arr;
  return true;
} 
```

例子：

```
move_item($arr, 'move me', 'up'); //move it one up
move_item($arr, 'move me', 'down'); //move it one down
move_item($arr, 'move me', 'top'); //move it to top
move_item($arr, 'move me', 'bottom'); //move it to bottom

move_item($arr, 'move me', -1); //move it one up
move_item($arr, 'move me', 1); //move it one down
move_item($arr, 'move me', 2); //move it two down

move_item($arr, 'move me', 'up', 'b'); //move it before ['b']
move_item($arr, 'move me', -1, 'b'); //move it before ['b']
move_item($arr, 'move me', 'down', 'b'); //move it after ['b']
move_item($arr, 'move me', 1, 'b'); //move it after ['b']
move_item($arr, 'move me', 2, 'b'); //move it two positions after ['b']

//Special syntax, to swap two elements:
move_item($arr, 'a', 0, 'd'); //Swap ['a'] with ['d'] 
```

我希望这可以帮助很多人，因为它是一个很棒的功能！:D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T14:12:05.860

如果你打算交换两个值，你可以做一个这样的函数：

```
function array_swap($key1, $key2, $array) {
        $newArray = array ();
        foreach ($array as $key => $value) {
            if ($key == $key1) {
                $newArray[$key2] = $array[$key2];
            } elseif ($key == $key2) {
                $newArray[$key1] = $array[$key1];
            } else {
                $newArray[$key] = $value;
            }
        }
        return $newArray;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-29T10:01:35.593

这里有很多困难的方法 :) 事实上，您可以利用`array_slice()`.

```
$new_element = array('new_key' => 'value');

// if needed, find the insertion index by key
$index = array_search('key to search', array_keys($old_array));

// add element at index (note the last array_slice argument)
$new_array = array_slice($old_array, 0, $index+1, true) + $new_element + array_slice($old_array, $index+1, null, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T14:14:02.670

`array_splice`不幸的是，它不适用于关联数组，所以这里有点混乱：

```
$keys = array_keys($arr);
$values = array_values($arr);

$keyIndex = array_search($someKey, $keys);
array_splice($keys, $keyIndex, 1);
array_splice($values, $keyIndex, 1);

$insertIndex = 1;
array_splice($keys, $insertIndex, 0, array($someKey));
array_splice($values, $insertIndex, 0, array($arr[$someKey]));

$arr = array_combine($keys, $values); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-14T17:57:51.310

我在这里根据一个答案制作了一个函数。它需要对 assoc 数组的数组进行排序，再加上应该使用它的键数组

```
// $data = array of assoc array
// $newKeysOrder = array("c","a","b");
function resort_assoc_array_by_keys($data, $newKeysOrder) {
  foreach($data as $v) {
    $out = [];
    foreach($newKeysOrder as $k) {
      $out[$k] = $v[$k];
    }  
    $new[] = $out;
  }
  return $new;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-23T07:44:11.697

我最喜欢 luky 的回答，但它需要指定所有的键。大多数时候，您只想在数组的开头订购一部分键。此功能将有助于：

```
function reorder_assoc_array(
  $cur,   // current assoc array 
  $order  // array conaining ordered (subset of) keys in $cur
) {
  $result = [];
  // first copy ordered key/values to result array
  foreach($order as $key) {
    $result[$key] = $cur[$key];
    // unset key in original array
    unset($cur[$key]);
  }
  // ... then copy all remaining keys that were not given in $order
  foreach($cur as $key => $value) {
    $result[$key] = $value;
  }
  return $result;
} 
```

例子：

```
$assoc_arr = [
  'b' => 'bbb',
  'a' => 'aaa',
  'c' => 'ccc',
  'd' => 'ddd'
];

// suppose we want to swap the first two keys and leave the remaining keys as is
$assoc_arr = reorder_assoc_array($assoc_arr, ['a', 'b']);

// ... the order of keys is now a, b, c, d 
```

# c++ - 在 Windows 上存储信息有哪些选择？我应该如何阅读这些信息？

> ID：11282594
> 
> 赞同：2
> 
> 时间：2012-07-01T14:03:52.737
> 
> 标签：c++, c, windows, winapi

在 Windows 上存储信息有哪些选择？

我正在考虑创建一个文件或使用注册表，但如果文件变得太大并且注册表太容易被用户访问，那么文件可能会变得相当烦人。

我不希望最多有 100 个条目，它们看起来像这样。

*约翰香蕉*

*马库斯·苹果*

等等

我意识到这不会产生太大的文件，但我不想每次需要信息时都解析它。我正在考虑在启动时将信息读入应用程序，但这不会造成性能问题吗？或者也许它太小了，除了旧电脑之外没有关系？还有其他选择吗？也许我可以加密信息并将其放入注册表？注册表是否适合放置多个这样的条目？

*请注意，当我编程时，有时在提高效率方面有点过火了。原谅我的无知。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T07:45:26.487

您问*我在 Windows 上存储信息有哪些选择？*基本上，有以下三种主要策略：

1.  使用机器的 Registry 并使用 Registry API 来访问它。
2.  [使用INI 文件格式](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724353%28v=vs.85%29.aspx)的纯文本文件并使用 Private Profile String API 访问它。
3.  使用您自己格式的纯文本文件并使用您自己的文件处理来访问它。

这些策略中的任何一个都将实现您存储数据的目标。

但是，在 Windows 平台上，您必须考虑一个更重要的问题，该问题将为您提供答案：

> *我的应用程序的用户是否想要将他们的数据移动到另一台机器上并在另一台机器上运行我的应用程序？*

如果上述问题的答案是**肯定**的，那么 (2) 或 (3) 将是您的答案，因为将磁盘上的文件从一台机器移动到另一台机器是一项简单的任务。另一方面，将注册表项从一台机器移动到另一台机器对于普通计算机用户来说并不是一项简单的任务，在应用程序中编写函数以将注册表数据库导出到平面文件并重新导入它们也不是一项简单的任务。

在 (2) 和 (3) 中，(2) 是最简单的，因为[Windows 有现有的 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724353%28v=vs.85%29.aspx)可以为您获取文件的内容；(3) 要求你编写自己的例程。最终，它将取决于您希望如何构建数据。

如果上述问题的答案是**否定**的，那么 (1)、(2) 或 (3) 中的任何一个都可以，因为用户不会关心数据是如何存储的。

上述策略都不比其他策略更容易访问（如果您担心用户能够查看您的数据）。如果您担心您的数据是可见的，那么将加密添加到您最终选择的方法中。

# php - 从 MySQL 数据库中检索值时遇到问题

> ID：11282597
> 
> 赞同：0
> 
> 时间：2012-07-01T14:04:12.223
> 
> 标签：php, mysql, database, mysqli

我对使用 MySql 非常陌生，并且无法从我的数据库中检索值。我的印象是我正在以正确的方式进行操作，但我的回声语句没有打印任何内容。

我会很感激一些帮助。我的代码如下。我知道稍后我将不得不添加安全性，例如清理用户输入。

```
<?php
            $email = $_POST['email'];
            $password = $_POST['password'];
            $hashedPass = sha1($password);

            if ((!isset($email)) || (!isset($password))) {
                //Visitor needs to enter a name and password
                echo "Data not provided";
            } else {
                echo "Received details $email and $password <br/>";
                // connect to mysql
                $mysql = mysqli_connect("localhost", "root", "root");
                if(!$mysql) {
                echo "Cannot connect to PHPMyAdmin.";
                exit;
                } else {
                echo "Connected to phpmyadmin <br/>";
                }
            }
            // select the appropriate database
            $selected = mysqli_select_db($mysql, "languageapp");
            if(!$selected) {
                echo "Cannot select database.";
                exit;
            } else {
                echo "DB Selected"; 
            }
            // query the database to see if there is a record which matches
            $query = "select count(*) from user where email = '".$email."' and password = '".$hashedPass."'";
            $result = mysqli_query($mysql, $query);
            if(!$result) {
                echo "Cannot run query.";
                exit;
            }

            $row = mysqli_fetch_row($result);
            $count = $row[0];

            $userdata = mysqli_fetch_array($result, MYSQLI_BOTH);
            echo $userdata[3];
            echo $userdata['firstName'];

            if ($count > 0) {   
                echo "<h1>Login successful!</h1>";
                echo "<p>Welcome.</p>";
                echo "<p>This page is only visible when the correct details are provided.</p>";
            } else {
                // visitor's name and password combination are not correct
                echo "<h1>Login unsuccessful!</h1>";
                echo "<p>You are not authorized to access this system.</p>";
            }
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:33:30.150

我认为问题在于您调用了两次 * *fetch* * 系列函数，这将导致 $userdata 为空。

从文档[mysql_fetch_row](http://www.php.net/manual/en/function.mysql-fetch-row.php)将获取下一行并将内部数据指针向前移动。因此，当您调用 mysqli_fetch_array($result, MYSQLI_BOTH) 并且我认为用户/密码是唯一的时，没有什么可以检索的。您犯的另一个错误是您的 SELECT 没有检索实际的用户数据，而只是检索用户/密码组合的计数。因此，即使您正确获取数据，您的用户数据也将始终不正确。

因此，将您的查询更改为以下内容：

```
 $query = "select * from user where email = '".$email."' and password = '".$hashedPass."' LIMIT 1"; 
```

然后使用 mysql_fetch_array 检查条目是否存在，然后检索用户数据。

# java - 在集成jsf spring hibernate中设置oracle 11g

> ID：11282599
> 
> 赞同：0
> 
> 时间：2012-07-01T14:04:18.440
> 
> 标签：java, hibernate, jakarta-ee, jdbc, oracle11g

我想在我的项目中使用 oracle 11g。我使用 maven、hibernate、spring 和 jsf。但有些不对劲。我有错误。我的 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:task="http://www.springframework.org/schema/task"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.1.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

 <!-- Beans Declaration -->
 <bean id="customer" class="model.Customer"/>

<!-- CustomerBo Declaration -->
 <bean id="CustomerBoImpl" class="bo.CustomerBoImpl">
      <property name="customerDaoImpl" ref="CustomerDaoImpl" />
     </bean>

 <!-- Customer DAO Declaration -->
 <bean id="CustomerDaoImpl" class="dao.CustomerDaoImpl">
  <property name="sessionFactory" ref="SessionFactory" />
 </bean>

 <!-- Data Source Declaration -->
 <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
  <property name="driverClass" value="oracle.jdbc.driver.OracleDriver" />
  <property name="jdbcUrl" value="jdbc:oracle:thin:@Mohsen-PC:1521:mydb" />
  <property name="user" value="system" />
  <property name="password" value="123" />
  <property name="maxPoolSize" value="10" />
  <property name="maxStatements" value="0" />
  <property name="minPoolSize" value="5" />
 </bean>

 <!-- Session Factory Declaration -->
 <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
  <property name="dataSource" ref="DataSource" />
  <property name="annotatedClasses">
   <list>
    <value>model.Customer</value>
   </list>
  </property>
  <property name="hibernateProperties">
   <props>
    <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
    <prop key="hibernate.show_sql">true</prop>
   </props>
  </property>
 </bean>

 <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager"/>

 <!-- Transaction Manager is defined -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
       <property name="sessionFactory" ref="SessionFactory"/>
    </bean>

</beans> 
```

错误：

```
SEVERE: Error while registering Oracle JDBC Diagnosability MBean.
javax.management.MalformedObjectNameException: Invalid character '\n' in value part of property
    at javax.management.ObjectName.construct(Unknown Source)
    at javax.management.ObjectName.<init>(Unknown Source)
    at oracle.jdbc.driver.OracleDriver.registerMBeans(OracleDriver.java:303)
    at oracle.jdbc.driver.OracleDriver$1.run(OracleDriver.java:213)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.jdbc.driver.OracleDriver.<clinit>(OracleDriver.java:209)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.mchange.v2.c3p0.DriverManagerDataSource.ensureDriverLoaded(DriverManagerDataSource.java:101)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:133)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)

Jul 01, 2012 6:24:11 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.Oracle10gDialect
Jul 01, 2012 6:24:11 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
Jul 01, 2012 6:24:11 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
Jul 01, 2012 6:24:11 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Jul 01, 2012 6:24:12 PM org.springframework.orm.hibernate4.HibernateTransactionManager afterPropertiesSet
INFO: Using DataSource [com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -> 1hge15w8oijg1pn1qekqmy|7116eed7, debugUnreturnedConnectionStackTraces -> false, description -> null, driverClass -> oracle.jdbc.driver.OracleDriver, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge15w8oijg1pn1qekqmy|7116eed7, idleConnectionTestPeriod -> 0, initialPoolSize -> 3, jdbcUrl -> jdbc:oracle:thin:@Mohsen-PC:1521:mydb, lastAcquisitionFailureDefaultUser -> null, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 0, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 10, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 5, numHelperThreads -> 3, numThreadsAwaitingCheckoutDefaultUser -> 0, preferredTestQuery -> null, properties -> {user=******, password=******}, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false ]] of Hibernate SessionFactory for HibernateTransactionManager
Jul 01, 2012 6:24:12 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization completed in 4247 ms
Jul 01, 2012 6:24:12 PM com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.0.3 (FCS b03) for context '/SAMPLE'
Jul 01, 2012 6:24:14 PM com.sun.faces.spi.InjectionProviderFactory createInstance
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.
Jul 01, 2012 6:24:14 PM com.sun.faces.config.ConfigureListener$WebConfigResourceMonitor$Monitor <init>
INFO: Monitoring jndi:/localhost/SAMPLE/WEB-INF/faces-config.xml for modifications
Jul 01, 2012 6:24:14 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\Mohsen\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\webapps\docs
Jul 01, 2012 6:24:14 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\Mohsen\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\webapps\examples
Jul 01, 2012 6:24:15 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
Jul 01, 2012 6:24:15 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
Jul 01, 2012 6:24:15 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@2d756ee7')
Jul 01, 2012 6:24:15 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\Mohsen\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\webapps\host-manager
Jul 01, 2012 6:24:15 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\Mohsen\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\webapps\manager
Jul 01, 2012 6:24:15 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-7080"]
Jul 01, 2012 6:24:15 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jul 01, 2012 6:24:15 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 15043 ms
Jul 01, 2012 6:24:34 PM com.sun.faces.application.ActionListenerImpl processAction
SEVERE: org.hibernate.HibernateException: No Session found for current thread
javax.faces.el.EvaluationException: org.hibernate.HibernateException: No Session found for current thread
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
    at javax.faces.component.UICommand.broadcast(UICommand.java:311)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:881)
    at dao.CustomerDaoImpl.addCustomer(CustomerDaoImpl.java:18)
    at bo.CustomerBoImpl.addCustomer(CustomerBoImpl.java:23)
    at managedbean.Customermanagedbean.addCustomer(Customermanagedbean.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:84)
    ... 24 more

Jul 01, 2012 6:24:34 PM com.sun.faces.lifecycle.InvokeApplicationPhase execute
WARNING: #{CustomerMB.addCustomer()}: org.hibernate.HibernateException: No Session found for current thread
javax.faces.FacesException: #{CustomerMB.addCustomer()}: org.hibernate.HibernateException: No Session found for current thread
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:114)
    at javax.faces.component.UICommand.broadcast(UICommand.java:311)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.faces.el.EvaluationException: org.hibernate.HibernateException: No Session found for current thread
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
    ... 23 more
Caused by: org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:881)
    at dao.CustomerDaoImpl.addCustomer(CustomerDaoImpl.java:18)
    at bo.CustomerBoImpl.addCustomer(CustomerBoImpl.java:23)
    at managedbean.Customermanagedbean.addCustomer(Customermanagedbean.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:84)
    ... 24 more 
```

我在 web-inf 和 maven 的 lib 中添加了 ojdbc6 和 c3p0 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:47:39.720

这是一个 Oracle 错误 (#6362104)。请参阅以下页面：

*   [OTN 论坛](https://forums.oracle.com/forums/thread.jspa?threadID=549705&tstart=-1)
*   [罗伯特·斯图普博客](http://www.robert-stupp.de/blog/2008/01/oracle_malicious_11g_data_source_implementation.html)
*   [Oracle 11g 背后的原因](http://codingexplorer.wordpress.com/2009/05/07/the-reason-behind-oracle-11g-severe-error-while-registering-oracle-jdbc-diagnosability-mbean/)

它应该在*ojdbc6.jar* (Oracle 11g R2) 的最新版本中得到修复，并且 Oracle 提供了修补版本。您的版本似乎是*ojdbc6.jar*的早期版本。

# jquery - youtube jQuery Player 适用于收藏夹播放列表，但不适用于其他播放列表

> ID：11282600
> 
> 赞同：0
> 
> 时间：2012-07-01T14:04:23.227
> 
> 标签：jquery, youtube-javascript-api

对于我正在使用的这些示例

youtube.com/user/Google/videos?view=1

一个 jQuery YouTube 播放器（Simone Gianni）在访问“收藏夹”播放列表时可以完美运行

```
$.getJSON('http://gdata.youtube.com/feeds/users/Google/favorites?alt=json-in-script&format=5&callback=?', 
```

[http://jsfiddle.net/hL8zK/3/](http://jsfiddle.net/hL8zK/3/)

但是在访问自定义播放列表时，会填充缩略图，但点击功能不会生成唯一的视频 ID - 我猜在调用自定义播放列表时还有一些额外的元素会阻止生成视频 ID。

```
$.getJSON('http://gdata.youtube.com/feeds/playlists/5400F84F30D9651E?&alt=json-in-script&format=5&callback=?', 
```

[http://jsfiddle.net/hL8zK/5/](http://jsfiddle.net/hL8zK/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:31:56.183

我遇到了同样的问题。经过一番研究，我发现播放列表的视频 ID 有点不同。试试这个 var video id：

```
this.media$group.yt$videoid.$t 
```

和这样的json URL：

```
http://gdata.youtube.com/feeds/api/playlists/5400F84F30D9651E?v=2&alt=json&callback=? 
```

[jsfiddle](http://jsfiddle.net/hL8zK/15/)

# database - 使用可以用角色和元数据装饰的通用表实体创建一个数据库是个好主意吗？

> ID：11282606
> 
> 赞同：0
> 
> 时间：2012-07-01T14:05:11.760
> 
> 标签：database

我一直在考虑创建一个数据库，而不是每个我想要表示的对象都有一个表，而是有一系列通用表，可以让我表示我想要的任何东西，甚至修改（这实际上是我的主要兴趣）与我代表的任何类型的对象相关联的数据。

例如，假设我正在创建一个 Web 应用程序，它可以让人们与美发师预约。我通常会在我的数据库中有以下表格：

*   客户
*   美发师：FK：美发师工作的公司的ID
*   公司
*   约会： FK：该约会的客户和美发师的 ID

但是，如果我们与想要将更多数据与约会相关联的科学美发师打交道（例如，使用的洗发水数量、剪发的克数、剪刀的次数……），会发生什么？

我在想而不是那样，我可以使用下表：

*   实体：代表我想要的任何东西。PK（实体ID）
*   group: 是一个实体（当我创建一个组时，我首先创建一个实体，然后由该组的 FK 引用该实体）。PK(group_id), FK(entity_id)
*   entity_group：每个组可以包含多个实体（因此也可以包含其他组）：PK(entity_id, group_id)。
*   角色：例如管理员、客户、美发师、公司。PK(role_id)
*   entity_role：每个实体可以有多个角色：PK(entity_id, role_id)
*   元数据：包含元数据的名称和类型以及关联的角色和描述其是否强制的标志。PK(metadata_id), FK(metadata_type_id, role_id)
*   metadata_type：包含有关可用元数据类型的信息。PK(metadata_type_id)
*   metadata_value: PK(metadata_value_id), FK(metadata_id)
*   metadata_ *：不同类型的不同表，例如 char、text、integer、double、datetime、date。PK(metadata_* _id)、FK(metadata_value_id) 包含与实体关联的元数据的实际值。
*   entity_metadata：包含与实体相关的数据，例如客户名称、公司地址、... PK(entity_id, metadata_value_id)。使用元数据的类型，可以在相应的表中为该实体选择元数据的实际值。

这将使我拥有一个完全灵活的数据结构，但有一些缺点：

*   选择与实体关联的元数据会返回多行，我必须在我的代码中处理这些行以在我的代码中创建实体的表示。
*   选择多个实体的元数据需要循环与上述相同的过程。
*   选择元数据还需要我为我拥有的每个 metadata_* 表进行选择。

另一方面，它也有一些优势。例如，我没有使用包含许多几乎永远不会填充的字段的客户端表，而是使用我需要的确切行数。

这是个好主意吗？

我希望我已经清楚地表达了我想要实现的目标。我想我不是第一个想知道如何实现这一目标的人，但我无法找到正确的关键字来找到该问题的答案：/

谢谢！

# java - 无法在android中使用httpconnection进行连接

> ID：11282610
> 
> 赞同：4
> 
> 时间：2012-07-01T14:06:12.680
> 
> 标签：java, android, httpconnection

我正在使用 android 2.3.3，我制作了一个运行良好的 rss 阅读器，然后我将那个简单的 rss 阅读器的代码集成到另一个活动中，只需小心复制粘贴，那里没有错误。

问题是当我在我的模拟器上运行应用程序时，它给了我连接异常的错误。然后我通过在 try 块中的每一行之后放置敬酒来发现问题出`httpconnection.connect();`在行。

我在 android 清单中添加了权限，而我的 logcat 给出了`javaio exception:error connecting`.

```
 try {
        HttpURLConnection httpURLConnection = (HttpURLConnection) connection;
        //Toast.makeText(this, "urlconnection passed", Toast.LENGTH_SHORT).show();
        httpURLConnection.setAllowUserInteraction(false);
        httpURLConnection.setInstanceFollowRedirects(true);
        //Toast.makeText(this, "setting response method", Toast.LENGTH_SHORT).show();
        httpURLConnection.setRequestMethod("GET");
        //Toast.makeText(this, "connecting", Toast.LENGTH_SHORT).show();
        httpURLConnection.connect();
        Toast.makeText(this, "on response code", Toast.LENGTH_SHORT).show();
        response = httpURLConnection.getResponseCode();
        //Toast.makeText(this, "response code passed", Toast.LENGTH_SHORT).show();
        if (response == HttpURLConnection.HTTP_OK) {
            //Toast.makeText(this, "OK", Toast.LENGTH_SHORT).show();
            inputStream = httpURLConnection.getInputStream();
        }

    } catch (Exception e) {
        // TODO: handle exception
        throw new IOException("Error connecting");
    } 
```

这里是创建对象的代码：

```
URL url = new URL(UrlString);
URLConnection connection = url.openConnection();
if (!(connection instanceof HttpURLConnection)) 
  throw new IOException("Not a HTTP connection"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:46:29.847

> 它给networkonmainthread异常

这意味着您正在主线程上进行网络操作，这在严格模式下是不允许的。

“在主线程中”通常意味着您在事件处理程序中执行此操作，例如`onResume`,`onPause`或`onClick`OnClickListener 的方法。您可以查看这篇文章（[Painless threading](http://android-developers.blogspot.com/2009/05/painless-threading.html)）以了解问题所在以及为什么不允许这样做。一般来说，如果你在主线程中执行网络操作，它会阻塞GUI事件的处理，如果网络操作很慢，你的应用程序就会没有响应。

[严格模式](http://developer.android.com/reference/android/os/StrictMode.html)出现在 API 级别 9 中，因此这解释了为什么如果 min SDK 版本为 10 会出现问题，以及为什么它适用于 min SDK 版本 8。

您应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或其他方法在后台执行此操作。你可以参考[1](http://android-developers.blogspot.com/2009/05/painless-threading.html)。

# python - 将 BST 转换为排序列表

> ID：11282611
> 
> 赞同：0
> 
> 时间：2012-07-01T14:06:14.387
> 
> 标签：python, algorithm, data-structures, tree

问题似乎很简单。您必须使用相同的树并将右子指针作为列表中的下一个指针。

所以我使用的算法如下：

```
def inorder(node, prev, head):
        if(node == NULL):
            return;
        inorder(node.left, prev, head)

        node.right = prev
        if(!prev):
            head = node
        prev = node 

        inorder(node.right, prev, head) 
```

谁能指出我到底哪里出错了，因为它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:47:58.650

我看到的第一个错误是您正在分配给`head`和`prev`内部，并`inorder`希望这会以某种方式影响之前对. 但事实并非如此。`head``prev``inorder`

相反，您需要做的是获得所需的`inorder`返回信息，然后在父调用中分配它们。

# r - 如何为数值制作漂亮有序的分面标签？

> ID：11282612
> 
> 赞同：2
> 
> 时间：2012-07-01T14:06:19.943
> 
> 标签：r, facets, ggplot2

我经常根据数字变量进行刻面，但我希望刻面标签比简单的数字更具解释性。我通常会创建一个新的标签变量，将数值粘贴到解释性文本中。但是，当值在小数点前有多个位置时，第一个数字用于对因子进行排序。有什么建议可以避免这种情况吗？

```
iris[,1:4]<-iris[,1:4]*10 
```

当鸢尾花在小数点前不超过一个值时，这对鸢尾花来说效果很好。

```
iris$Petal.Width.label<-paste("Petal.Width=", iris$Petal.Width)

iris$Petal.Width.label<-paste("Petal.Width=", iris$Petal.Width)

qplot(data=iris,
      x=Sepal.Length,
      y=Sepal.Width,
      colour=Species)+facet_wrap(~Petal.Width.label) 
```

![带有未排序刻面的图](../Images/6fa6147342aa0cbaf568d7451303609a.png)

相关：
[ggplot：如何更改构面标签？](https://stackoverflow.com/questions/3472980/ggplot-how-to-change-facet-labels)
[如何更改 ggplot 中分面标签的顺序（自定义分面包装标签）](https://stackoverflow.com/questions/5490638/how-to-change-the-order-of-facet-labels-in-ggplot-custom-facet-wrap-labels)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:33:20.100

只需重新编码标签的级别：

```
data(iris)
iris[ , 1:4] <- iris[ , 1:4] * 10
iris$Petal.Width.label <- paste("Petal.Width=", iris$Petal.Width)
# reoder levels by Petal.Width
iris$Petal.Width.label2 <- factor(iris$Petal.Width.label, 
                                  levels = unique(iris$Petal.Width.label[order(iris$Petal.Width)]))
qplot(data = iris,
      x = Sepal.Length,
      y = Sepal.Width,
      colour = Species)+
        facet_wrap( ~Petal.Width.label2) 
```

![在此处输入图像描述](../Images/a07fe1591ce1e0997057dcb316d84a3c.png)

# c# - 如何在 WCF 中的 UriTemplates 中传递对象

> ID：11282613
> 
> 赞同：0
> 
> 时间：2012-07-01T14:06:40.183
> 
> 标签：c#, .net, wcf

下面的代码用于使用 WCF 公开 RESTful 应用程序。在这里，我通过`UriTemplate`在类中使用的对象传递输入`AddDetailsRequest`。

```
[ServiceContract]
public interface IMyRestService
{
    [OperationContract(Name = "AddEmployee")]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "AddEmpDetails/{objReq}")]
    AddDetailsResponse AddEmpDetails(AddDetailsRequest objReq);
} 
```

班级`AddDetailsRequest`

```
[DataContract(Name = "AddDetailsRequest")]
public class AddDetailsRequest
{
    [DataMember(IsRequired = true, Name = "Name")]
    public string Name { get; set; }
    [DataMember(IsRequired = true, Name = "City")]
    public string City { get; set; }
} 
```

我在这里遇到的问题意味着，我无法通过`UriTemplate`. 我想将具有 2 个参数（名称和城市）的对象传递给`UriTemplate`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:40:14.810

WCF UriTemplate 不支持复杂对象。在这种情况下，您必须坚持使用 .NET 中的主要类型。如果您仍想使用复杂对象作为方法的参数，则必须删除 UriTemplate 并使用 JSON 传递您的对象。如果您真的不想删除 UriTemplate 您的最后一个选择是使用字符串参数：

```
AddDetailsResponse AddEmpDetails(string objEncodedReq); 
```

您的序列化对象在哪里`objEncodedReq`（例如 XML 序列化）并使用 Base64 编码。您必须从客户端级别执行此操作。

# objective-c - 谷歌文档文档更新推送通知

> ID：11282615
> 
> 赞同：2
> 
> 时间：2012-07-01T14:07:08.920
> 
> 标签：objective-c, ios, cocoa-touch, sdk, push-notification

我没有推送通知的经验，但我已经使用 iOS 有一段时间了。google docs 文档更新后，如何向用户发送推送通知（即应用程序图标中的小红色“1”，如邮件或消息）？有没有办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:38:02.430

您可以在电子表格上执行此操作，但需要为每个使用您的应用程序的人进行一些设置。

1.  当电子表格被修改时，请按照[这些说明](http://support.google.com/docs/bin/answer.py?hl=en&answer=91588)从 Google 获取通知。
2.  创建一个服务器来保存您的电子邮件用户名和密码，并在 Google 向您发送新修改通知时通知您。
3.  设置您的服务器以与 Apple 的推送通知服务交互（这里有一些信息）
    *   [Apple：本地和推送通知编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)
    *   [Apple：对推送通知进行故障排除](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)
    *   [Mark Aufflick：Apple 推送通知服务简介](http://mark.aufflick.com/files/view/talks/apns.pdf)

这很复杂，但它可以成为一个杀手级应用程序。您还可以使用[GMail API](https://developers.google.com/google-apps/gmail/)来访问用户的收件箱提要。

# jquery - 如何在 div 或其他内容中嵌入表格行并且不破坏 jQuery fadeIn 函数？

> ID：11282617
> 
> 赞同：6
> 
> 时间：2012-07-01T14:07:23.040
> 
> 标签：jquery

我有一个非常具体的问题。

我想使用fadeIn、fadeOut 函数插入一个特定的代码，但是如果我使用嵌入在div 标签中的tr 和td 标签，它就不起作用。

我有这个 JS 部分的代码：

```
var registrationPart = $('div.registration-part');
var loginPart = $('div.login-part');

$('span.logreg.log').click ( function () {

                registrationPart.fadeOut("fast");
                loginPart.fadeIn("slow");

} 
```

这在 html 中：

```
<table class="table">
    <div class="registration-part">
        <tr>
                  <td>registration</td>
            </tr>
    </div>
    <div class="login-part">
        <tr>
                  <td>login</td>
            </tr>
    </div>
</table> 
```

因此，如果 div 中有 tr,td 标签，fadeIn、fadeOut 将不起作用。如果我用 div 或 span 替换它们，一切正常。

有没有办法离开 tr,td ，所以我不需要为 div 制作特定的样式表，所以它看起来像 tr,td 。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-01T14:30:15.360

你所拥有的是**无效的 HTML**，所以它没有呈现你期望的样子。您不能将 a`<div>`放在 a`<table>`中并让它包含`<tr>`元素；您可以在元素`<div>`内包含 a ，`<td>`但这并不能真正帮助您。

如果要定义表格的单独部分，请使用`<tbody>`标记：

HTML

```
<table class="table">
    <tbody class="registration-part">
        <tr>
            <td>registration</td>
        </tr>
    </tbody>
    <tbody class="login-part">
        <tr>
            <td>login</td>
        </tr>
    </tbody>
</table> 
```

JavaScript

```
var registrationPart = $('tbody.registration-part');
var loginPart = $('tbody.login-part');

$('span.logreg.log').click ( function () {
    registrationPart.fadeOut("fast");
    loginPart.fadeIn("slow");
} 
```

如果您使用原始 HTML 查看[此 jsFiddle](http://jsfiddle.net/anthonygrist/vwg6r/)并使用 Firebug 检查表格，您会注意到`<div>`元素位于表格**之前**并且为空，并且不包含您希望它们包含的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:18:53.233

将 div 放在表格单元格内。见这里[http://css-tricks.com/using-divs-inside-tables/](http://css-tricks.com/using-divs-inside-tables/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:20:00.630

为什么要在表格中使用`<div>`标签？你应该驱动你的`<tr>`标签。

请[在这里试试这个小提琴](http://jsfiddle.net/NcNSU/)

祝你今天过得愉快

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T14:26:49.147

```
$('#selector').click(function () {
    $('.registration-part').parent().find('td:first').fadeOut('fast');
    $('.login-part').parent().find('td:last').fadeIn('slow');
}); 
```

# android - 如何在横向模式下隐藏标签图标？

> ID：11282619
> 
> 赞同：0
> 
> 时间：2012-07-01T14:07:31.113
> 
> 标签：android, layout, tabs, android-tabactivity

在横向模式下，选项卡会占用太多高度，我认为如果我可以隐藏图标会更好。

![横向模式](../Images/022dac1a3e00cad010a6d0f00f05c4c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:21:58.157

在这种情况下，我发现以下内容很有用：

```
 <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:gravity="bottom" /> 
```

30 dp 的高度使其刚好足以容纳文本（切断图标），并且将重力设置为底部确保所有文本都可见（否则您最终会在底部和下半部分留出空间）上面的文字）。

# javascript - asp.net IScriptControl $create 命令

> ID：11282621
> 
> 赞同：0
> 
> 时间：2012-07-01T14:07:38.020
> 
> 标签：javascript, asp.net, asp.net-ajax, scriptmanager

我有两个脚本控件（代码非常简化）：

```
class Form : IScriptControl
{
      Panel pnl;
      Button trigger;
      public Form()
      {
           pnl = new Panel();
           trigger = new Button();

           IPresenter p = new Popup();
           p.SetContent(this.pnl);           
           this.Controls.Add(trigger);
      }
}

class Popup : IScriptControl, IPresenter
{
      public void SetContent(Control content)
      {
           this.Controls.Add(content);
      }
} 
```

现在在 HTML 输出中，我看到以下内容（同样非常简化）：

```
<div id="ctrlForm">
    <div id="ctrlPopup">
        <div id="ctrlFormPnl"></div>
    </div>
    <div id="ctrlFormTrigger"></div>
</div> 
```

和脚本：

```
Sys.Application.add_init(function() {
    $create(Form, {"_presenter":"FormPresenter"}, null, null, $get("ctrlForm"));
});
Sys.Application.add_init(function() {
    $create(Popup, {"_isOpen":false}, null, null, $get("ctrlPopup"));
}); 
```

问题：我该怎么做，创建弹出窗口的脚本出现在表单脚本之前的页面上......换句话说，当 ctrlForm 控件的初始化程序执行时，我想获得对表单演示者的引用。

我希望我清楚地解释了我想要做什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:29:23.100

为了归档您的目标，您应该让子控件 在您的控件**之前**向 ScriptManager 注册。

如果您在重写的 Render 方法中使用 ScriptManager 注册您的控件，则可以这样做，**在**调用 base.Render(...) 之后，如下所示：

```
 protected override void Render(HtmlTextWriter writer)
    {
        // Let child controls to register with ScriptManager
        base.Render(writer);

        // Now, when all the nested controls have been registered with ScriptManager
        // We register our control.
        // This way $create statement for this control will be rendered
        // AFTER the child controls' $create 
        if (this.DesignMode == false)
        {
            ScriptManager sm = ScriptManager.GetCurrent(this.Page);
            if (sm != null)
                sm.RegisterScriptDescriptors(this);
        }

   } 
```

# java - 访问数组的速度与 ArrayList Java

> ID：11282623
> 
> 赞同：1
> 
> 时间：2012-07-01T14:07:48.803
> 
> 标签：java, arrays, arraylist

> **可能重复：**
> [Java 中的数组或列表。哪个更快？](https://stackoverflow.com/questions/716597/array-or-list-in-java-which-is-faster)

我开始了一个项目，我将不断地访问一个永远不会改变的 Arraylist。访问 ArrayList 或 Array 会更快吗？速度快多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T14:16:34.887

差异可能不会很明显，因为如果您经常使用 JVM，它很可能会优化调用。而且 using`List`会给你一个更健壮和灵活的代码，所以我个人会使用`List`s.

只有一种方法可以知道：测试它（在阅读了这篇关于[如何测试 Java 应用程序性能的](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)帖子之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:35:06.713

如果它是常量，那么 Enum 怎么样，您可以直接将逻辑添加到枚举实例中。

# java - 为什么Java中的向量必须同步？

> ID：11282627
> 
> 赞同：1
> 
> 时间：2012-07-01T14:08:12.033
> 
> 标签：java, vector

我试图理解为什么 Java 中的向量必须同步。无论我通过谷歌到达哪里，他们都说它是同步的，因为它的元素是同步的，当一个线程正在访问它时，它会阻止其他线程访问。但我真正想知道的是**为什么必须这样？**Java 应该把它留给访问它的人。但是为什么 Java 强制所有访问 vector 的人使用同步数据结构呢？我同意有人说 ArrayList 可以用于我的要求。但我的意思是那个**向量会给我什么？**

谢谢和问候， Rengasami Ramanujam

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T14:13:58.973

历史。

`Vector`是 JDK 1.0 的一部分；`ArrayList`不是。我们了解到，*默认*同步意味着性能不佳，因此当 Java Collections API 出现时它被逆转了。

您仍然可以选择使用 中的方法同步您需要的任何集合`java.util.Collections`，但这是您的选择。

您还应该了解作为`java.util.concurrent`包一部分的集合。同时访问集合当然需要精心设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T14:21:51.207

> 但我的意思是那个向量会给我什么？

这是一个“遗留”类。

除非您特别需要同步列表类，否则`Vector`在编写新代码时不会给您任何帮助。

然而，`Vector`它（仍然）在那里是有充分理由的。原因是允许您运行为使用 Java 1.0 和 Java 1.1 而编写的旧 Java 代码，或者在一些不包含 Java 集合框架的 Java ME 配置文件上运行。而且它必须（仍然）同步，因为如果他们改变了它，任何使用的多线程遗留代码都`Vector`可能中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T14:14:07.230

考虑这个示例，它表明您仍然需要在应用程序代码中使用同步。

```
// BROKEN CODE, needs external synchronization
 // only add an element if the vector is empty
 if(vector.isEmpty())
     vector.add(anElement); 
```

为什么是向量？取决于你在做什么

在内部，ArrayList 和 Vector 都使用 Array 保存它们的内容。在您的程序中使用任何一个时，您都需要牢记这一事实。将元素插入 ArrayList 或 Vector 时，如果对象空间不足，则需要扩展其内部数组。Vector 默认将其数组大小增加一倍，而 ArrayList 将其数组大小增加 50%。根据您使用这些类的方式，您最终可能会在添加新元素时受到很大的性能影响。最好将对象的初始容量设置为程序所需的最大容量。通过仔细设置容量，您可以避免支付稍后调整内部数组大小所需的代价。如果您不知道您将拥有多少数据，但您确实知道它的增长速度，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T14:12:44.000

您不必被迫使用 a`Vector`您也可以使用`ArrayList`s。

如果您使用线程，如果它同步，您会很高兴。如果您的应用程序不使用线程，我会使用比`Vector`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T14:19:05.307

使 Vector 同步正是编写该 Java 库的人决定实现它的方式。ArrayList 和 Vector 都在内部作为数组实现，两者都是动态调整大小的，但 Vector 的大小是`capacityIncrement`当前数组大小的两倍，而对于 ArrayList，它是当前大小的一半。Vector 较慢，因为您必须检查是否有其他线程在另一个线程之前访问它。

如果您需要同步的 List 数据结构，最好`synchronizedList(List list)`从[Collections API 中使用。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T09:38:20.233

如果要同步整个操作序列，请使用 arrayList。像矢量一样同步单个运算符不太安全。

如果不需要线程安全操作，建议使用 ArrayLists。

# sql-server-2008 - 使用 SQL Server 2008 时，如何将 Nhibernate 类型生成器设置为递增？

> ID：11282631
> 
> 赞同：0
> 
> 时间：2012-07-01T14:09:13.670
> 
> 标签：sql-server-2008, nhibernate, nhibernate-mapping

使用 HBM 文件映射我的类型。

我的一门课使用一袋名为`PartnerEnv`. 其中一个字段设置为应使用生成的 id `increment`。出于某种原因，我收到以下错误：

> 无法获取增量生成器的初始值 [SQL：SQL 不可用]
> 内部详细信息：“{”无效的对象名称 'jj.dbo.Partners2Env'。“}”

如果我将生成方法更改为`assigned`一切正常。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:18:21.870

您可以`Id`将`PartnerEnv`表（或任何该表称为）上的列设置为`Identity`列，然后在`.hbm`该类的文件中使用以下内容吗？

```
<id name="Id" type="Int32">
    <column name="Id" />
    <generator class="identity" />
</id> 
```

# ios - 检测 UIScrollView 中的突然滚动停止

> ID：11282641
> 
> 赞同：4
> 
> 时间：2012-07-01T14:10:39.100
> 
> 标签：ios, uiscrollview, uiscrollviewdelegate

我想知道如何使用`UIScrollViewDelegate`来检测滚动视图何时突然停止移动，因为用户在从快速平移启动动量后触摸并按住屏幕。

该`scrollViewDidEndDecelerating:`方法仅在用户抬起手指时针对上述情况触发。但是，如果用户在滚动视图动量期间点击并按住，则此方法不会触发（直到他们抬起手指）。当滚动视图在用户按下时停止时，是否有任何方法可以拦截这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:30:30.223

你试过使用`scrollViewWillBeginDragging`吗？或者（因为文档表明`scrollViewWillBeginDragging`可能不会立即触发）您可以尝试使用`scrollViewDidScroll`并检查用户当前是否正在触摸滚动视图......

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if(scrollView.isTracking){
        //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T01:14:51.290

好吧，当用户*开始*滚动时，您可以设置一个标志，该标志以`scrollViewDidEndDecelerating`. 这样，如果用户在标志被清除之前再次开始滚动，您就会知道他们在减速期间触摸了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T09:47:41.200

您不必实现自己的。

我们的朋友 Apple 已经为您提供了检测情况的方法。

如果需要更多信息，请在此处参考指南：[https ://developer.apple.com/documentation/uikit/uiscrollviewdelegate/1619436-scrollviewdidenddragging](https://developer.apple.com/documentation/uikit/uiscrollviewdelegate/1619436-scrollviewdidenddragging)

```
func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool) {
    if decelerate {
      print("true if scrolling stops, keeping touch on the screen!")
    } else {
      print("false if scrolling stops, detaching touch on the screen")
    }
} 
```

# asp.net-mvc - 如何正确使用 ASP.NET MVC？

> ID：11282643
> 
> 赞同：0
> 
> 时间：2012-07-01T14:11:27.600
> 
> 标签：asp.net-mvc

我目前正在学习 ASP.NET，但与 webforms 相比，我无法弄清楚应该如何使用 ASP.NET MVC。

我通常使用PHP做网站，并且必须学习很多关于webforms的东西：回发、回调、web控件等。但我理解的方式，所有这些都不应该在MVC应用程序中使用，这似乎很奇怪对我来说，因为它们代表了 ASP.NET 框架的许多特性。我想确认以下内容：

*   使用 ASP.NET MVC 时，我应该忘记有关回发和回调的所有内容吗？
*   我应该忘记大多数网络控件吗？（我的意思是控件以 asp 开头：）。它们中的大多数似乎不可用，因为没有像 web 表单中那样的任何“表单”标签。
*   在那种情况下，说 ASP.NET MVC 有点像组织良好的 PHP 是否正确？由于回发机制，Webforms 的工作方式与 PHP 完全不同，但在我看来，MVC 应用程序的设计方式与 PHP 几乎相同。
*   .ascx 用户组件是否仍在 ASP.NET MVC 中使用？
*   脚本管理器和 AJAX 框架呢？
*   我应该像使用 PHP 一样使用 Javascript 吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:15:00.147

> 使用 ASP.NET MVC 时，我应该忘记有关回发和回调的所有内容吗？

*   是的

> 我应该忘记大多数网络控件吗？（我的意思是控件以 asp 开头：）。它们中的大多数似乎不可用，因为没有像 web 表单中那样的任何“表单”标签。

*   是的

> 在那种情况下，说 ASP.NET MVC 有点像组织良好的 PHP 是否正确？由于回发机制，Webforms 的工作方式与 PHP 完全不同，但在我看来，MVC 应用程序的设计方式与 PHP 几乎相同。

*   并不真地

> .ascx 用户组件是否仍在 ASP.NET MVC 中使用？

*   不

> 脚本管理器和 AJAX 框架呢？

*   不

> 我应该像使用 PHP 一样使用 Javascript 吗？

*   也许

ASP.Net MVC 与 WebForms 完全不同。

与 PHP 的比较取决于您如何使用 PHP。

# javascript - jquery beforeunload 提交表单

> ID：11282644
> 
> 赞同：0
> 
> 时间：2012-07-01T14:11:32.760
> 
> 标签：javascript, ajax, jquery

我有一个 form.edit_recipe，我的目标是在页面卸载之前让这个表单成功保存（如果有新数据），而不需要用户提示。

这是 JQ 的关键部分：

```
 $(document).ready(function() {
      $(window).bind('beforeunload', function() {
        if (auto_save_timer) {  // auto_save_timer == true means there are changes
          $("#auto_save_overlay").css('display', 'block');  // shows a spinner
          $(".edit_recipe").submit();
        }
      });
    }); 
```

单击指向下一页的链接时，有时更改会保存，有时则不会，即使在相同的情况和数据集下也是如此。

我 99% 确定我的其他变量和页面上的 JQ 不会影响这一点，但如果需要，我可以使用更多代码示例进行更新。

我迷路了，或者问题是什么，但我觉得这与表单数据被下一页加载中断有关。

有什么建议么？

编辑：感谢到目前为止的建议。我想我应该听从@see163 的建议，也许考虑强迫用户手动按下保存按钮，`alert()`如果有未保存的更改，只需添加一个。这是一种更正统的方法吗？如果`.beforeunload`在 Opera 和 Chrome 中是垃圾，我应该使用哪些 JQuery 事件/操作来实现跨浏览器友好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:58:02.377

unload 和 beforeunload 不能一直在 Opera 中工作，有时也不能在 chrome 中工作。

当心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:08:30.390

在每个链接上，您可以执行以下操作：

```
<a href="javascript:submitForm('URL HERE')">............</a> 
```

然后在你的js中做：

```
 function submitForm(url){
       if (auto_save_timer) {
          $("#auto_save_overlay").css('display', 'block');
          $(".edit_recipe").submit();
          window.location = url;
        }
    } 
```

# ruby - 在 RSpec 中自动共享上下文

> ID：11282647
> 
> 赞同：16
> 
> 时间：2012-07-01T14:11:45.240
> 
> 标签：ruby, rspec

我想在我的规格之间分享一个记忆的方法。所以我尝试使用这样的共享上下文

```
RSpec.configure do |spec|
  spec.shared_context :specs do
    let(:response) { request.execute! }
  end
end

describe 'something' do
  include_context :specs
end 
```

它工作正常。但是我有大约 60 个规范文件，所以我不得不在每个文件中明确地包含上下文。有没有办法为所有示例组自动包含共享上下文（或至少`let`定义）`spec_helper.rb`？

像这样的东西

```
RSpec.configure do |spec|
  spec.include_context :specs
end 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-01T18:30:19.403

您可以通过[configure-class-methods](http://rubydoc.info/gems/rspec-core/RSpec#configure-class_method)和[Configuration](http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration)设置全局`before`挂钩：`RSpec.configure`

```
RSpec.configure {|c| c.before(:all) { do_stuff }} 
```

`let`中不支持`RSpec.configure`，但您*可以*`let`通过将其包含在[SharedContext 模块](http://rubydoc.info/gems/rspec-core/RSpec/Core/SharedContext)中并使用以下方法包含该模块来设置全局`config.before`：

```
module MyLetDeclarations
  extend RSpec::Core::SharedContext
  let(:foo) { Foo.new }
end
RSpec.configure { |c| c.include MyLetDeclarations } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T11:36:26.293

你*几乎*可以这样做：有一个包含模块的机制，模块包含有它自己的回调机制。

例如，假设我们有一个`disconnected`共享上下文，我们想用它来运行我们所有的模型规范，而无需数据库连接。

```
shared_context "disconnected"  do
  before :all do
    ActiveRecord::Base.establish_connection(adapter: :nulldb)
  end

  after :all do
    ActiveRecord::Base.establish_connection(:test)
  end
end 
```

您现在可以创建一个模块，该模块将在包含时包含该上下文。

```
module Disconnected
  def self.included(scope)
    scope.include_context "disconnected"
  end
end 
```

最后，您可以以正常方式将该模块包含到所有规范中（我已经演示了仅对模型执行此操作，只是为了表明您可以），这几乎正是您所要求的。

```
RSpec.configure do |config|
  config.include Disconnected, type: :model
end 
```

这适用于`rspec-core`2.13.0 和`rspec-rails`2.13.0。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-26T07:14:05.970

在 RSpec 3+ 中，这可以通过以下方式实现 - 基于 Jeremy Peterson 的回答。

```
# spec/supprt/users.rb
module SpecUsers
  extend RSpec::SharedContext

  let(:admin_user) do
    create(:user, email: 'admin@example.org')
  end
end

RSpec.configure do |config|
  config.include SpecUsers
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-02T06:54:56.380

另一种方法是[通过元数据自动共享示例](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-context#declare-a-shared-context-and-include-it-with-metadata)。所以：

```
shared_context 'a shared context', a: :b do
  let(:foo) { 'bar' }
end

describe 'an example group', a: :b do
  # I have access to 'foo' variable
end 
```

我使用它的最常见方式是在 rspec-rails 中，根据示例组类型使用一些共享上下文。所以如果你有`config.infer_spec_type_from_file_location!`，你可以简单地做：

```
shared_context 'a shared context', type: :controller do
  let(:foo) { 'bar' }
end

describe SomeController do
  # I have access to 'foo' variable
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-08T10:18:40.060

此外，如果您需要像我一样在规范内的块中使用共享数据的能力`before`，请尝试包含此内容（如果它的 Rails 项目）：

```
module SettingsHelper
  extend ActiveSupport::Concern

  included do
    attr_reader :default_headers

    before :all do
      @default_headers = Hash[
          'HTTP_HOST' => 'test.lvh.me'
        ]
    end

    after :all do
      @default_headers = nil
    end
  end
end

RSpec.configure do |config|
  config.include SettingsHelper
end 
```

或者尝试类似的东西，看看@threedaymonk 的答案。

# php - 我只是在这个 SQL 查询中找不到语法错误

> ID：11282652
> 
> 赞同：1
> 
> 时间：2012-07-01T14:12:40.147
> 
> 标签：php, mysql

你能告诉我这个查询有什么问题吗？我只是找不到错误，这让我发疯。

```
<?php
$query = "INSERT INTO atable (fortlaufend, vorname, nachname, land, email, caption1, caption2, caption3, caption4, caption5, datum) 
VALUES (NULL, 
" . mysql_real_escape_string($_POST[vorname]) . ", 
" . mysql_real_escape_string($_POST[nachname]) . ", 
" . mysql_real_escape_string($_POST[land]) . ", 
" . mysql_real_escape_string($_POST[email]) . ", 
" . mysql_real_escape_string($_POST[caption1]) . ", 
" . mysql_real_escape_string($_POST[caption2]) . ", 
" . mysql_real_escape_string($_POST[caption3]) . ", 
" . mysql_real_escape_string($_POST[caption4]) . ", 
" . mysql_real_escape_string($_POST[caption5]) . ", 
CURRENT_TIMESTAMP)";
?> 
```

'fortlaufend' 是具有 AUTO_INCREMENT 的主索引。mysql_error 是

> 无效查询：您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，以了解在第 3 行的“姓名、姓氏、国家/地区、电子邮件，是什么让这张照片对您特别？，什么”附近使用的正确语法

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:14:41.927

非整数值需要单引号。

```
 <?php
    $query = "INSERT INTO atable (fortlaufend, vorname, nachname, land, email, caption1, caption2, caption3, caption4, caption5, datum) 
    VALUES (NULL, 
    '" . mysql_real_escape_string($_POST[vorname]) . "', 
    '" . mysql_real_escape_string($_POST[nachname]) . "', 
    '" . mysql_real_escape_string($_POST[land]) . "', 
    '" . mysql_real_escape_string($_POST[email]) . "', 
    '" . mysql_real_escape_string($_POST[caption1]) . "', 
    '" . mysql_real_escape_string($_POST[caption2]) . "', 
    '" . mysql_real_escape_string($_POST[caption3]) . "', 
    '" . mysql_real_escape_string($_POST[caption4]) . "', 
    '" . mysql_real_escape_string($_POST[caption5]) . "', 
    CURRENT_TIMESTAMP)";
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:15:01.897

您没有在查询中使用引号。

```
<?php
$query = "INSERT INTO atable (fortlaufend, vorname, nachname, land, email, caption1, caption2, caption3, caption4, caption5, datum) 
VALUES (NULL, 
'" . mysql_real_escape_string($_POST[vorname]) . "', 
'" . mysql_real_escape_string($_POST[nachname]) . "', 
'" . mysql_real_escape_string($_POST[land]) . "', 
'" . mysql_real_escape_string($_POST[email]) . "', 
'" . mysql_real_escape_string($_POST[caption1]) . "', 
'" . mysql_real_escape_string($_POST[caption2]) . "', 
'" . mysql_real_escape_string($_POST[caption3]) . "', 
'" . mysql_real_escape_string($_POST[caption4]) . "', 
'" . mysql_real_escape_string($_POST[caption5]) . "', 
CURRENT_TIMESTAMP)";
?> 
```

# python - python random.shuffle() 在while循环中

> ID：11282655
> 
> 赞同：3
> 
> 时间：2012-07-01T14:12:58.820
> 
> 标签：python, python-3.x

我有一个清单：

```
 k = [1,2,3,4,5] 
```

现在我希望将这个列表的 3 个排列列在另一个列表中，但是当我这样做时：

```
 x = []
    i = 0
    while i < 3:
        random.shuffle(k)
        x.append(k)
        i += 1 
```

我最终得到了 x 中 k 的 3 倍相同排列，如下所示：

```
 x = [[1,3,5,2,4], [1,3,5,2,4], [1,3,5,2,4]] 
```

而不是我想要的，是这样的：

```
 x = [[1,5,4,2,3], [1,3,5,2,4], [5,3,4,1,2]] 
```

请注意，由于收集 k 中的数据以将 k 放入循环中的方式，这是不可能的，因为我知道这可以解决问题。真正的代码是这样的：

```
 def create_random_chromosomes(genes):
        temp_chromosomes = []
        chromosomes = []
        i = 0
        while i < 2000:
            print(genes)
            random.shuffle(genes)
            temp_chromosomes.append(genes)
            i += 1
        print(temp_chromosomes)
        for element in temp_chromosomes:
            if element not in chromosomes:
                chromosomes.append(element)
        return chromosomes 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T14:14:32.360

打乱列表会在原地更改它，并且您正在创建对同一列表的 3 个引用。在改组之前创建列表的*副本：*

```
x = []
for i in range(3):
    kcopy = k[:]
    random.shuffle(kcopy)
    x.append(kcopy) 
```

我也简化了你的循环；只需使用`for i in range(3)`. 或者，将其放在您的完整方法的上下文中：

```
def create_random_chromosomes(genes):
    temp_chromosomes = []
    chromosomes = []
    for i in range(2000):
        print(genes)
        randomgenes = genes[:]
        random.shuffle(randomgenes)
        temp_chromosomes.append(randomgenes)
    print(temp_chromosomes)
    for element in temp_chromosomes:
        if element not in chromosomes:
            chromosomes.append(element)
    return chromosomes 
```

[`set`](http://docs.python.org/py3k/library/stdtypes.html#set-types-set-frozenset)您可以通过使用 a清除欺骗来进一步简化上述操作：

```
def create_random_chromosomes(genes):
    chromosomes = set()
    randomgenes = genes[:]
    for i in range(2000):
        random.shuffle(randomgenes)
        chromosomes.add(tuple(randomgenes))
    return list(chromosomes) 
```

This uses a tuple copy of the random genes list to fit the [hashable](http://docs.python.org/py3k/glossary.html#term-hashable) constraint of set contents.

You can then even ensure that you return 2000 unique items regardless:

```
def create_random_chromosomes(genes):
    chromosomes = set()
    randomgenes = genes[:]
    while len(chromosomes) < 2000:
        random.shuffle(randomgenes)
        chromosomes.add(tuple(randomgenes))
    return list(chromosomes) 
```

# c++ - 在 C++ 类中包装 Winsock 函数

> ID：11282656
> 
> 赞同：1
> 
> 时间：2012-07-01T14:13:01.550
> 
> 标签：c++, oop, winsock2

我见过一些人创建了一种“is-a”关系，如下所示：

```
class TCPClient : public Socket
{
public:
    TCPClient(const std::string& host, unsigned short port);
}; 
```

其中 Socket 类实现了 Winsock 函数，例如 Connect()、Close()、Bind() 等。

**例子**：

*   [示例 1](http://www.leunen.com/fclt/socketcls.html)
*   [示例 2](https://ccrma.stanford.edu/software/stk/TcpClient_8h_source.html)

但这对我是套接字编程的新手来说并不自然。

上面的层次结构是否比下面的“有”对应物更合乎逻辑？

```
class TCPClient
{
public:
    TCPClient(const std::string& host, unsigned short port);
    ....
private:
    Socket m_socket;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:45:54.253

TCPClient 使用套接字或具有套接字，但它本身不是套接字，并且您通常不会期望能够在任何需要套接字的地方替换 TCPClient。因此，公共继承没有意义。

在这种情况下，您*可以*使用私有继承，但是（至少在典型情况下）它可能也没有多大意义。私有继承主要在基类提供至少一个您计划在子类中覆盖的虚函数时才有意义。如果你有一个虚函数并且需要重写它，你别无选择，只能使用继承。不过，我不希望 Socket 类具有虚函数。这通常不适用于这里。

这基本上导致了您的第二个解决方案： TCPClient 应该包含一个 Socket 的实例，而不是使用继承。

但是，我应该补充一点，`Socket`您所展示的类似乎将实际套接字的概念与地址的概念混为一谈。我的第一个套接字课程（*几年*前）就是这样工作的，但从那以后我得出结论，这并不是一个真正理想的设计。我已经确信将地址的概念与套接字本身分开是值得的。虽然我的不太精细，但我发现有趣的是，我想出的东西看起来几乎就像它可能是 Boost ASIO 的原型。它更小更简单，但很多基本想法通常都非常相似。

这引出了我的下一个建议：看看 Boost ASIO。缺乏一个相当具体的理由不这样做，这是我在大多数新代码中建议（并且通常使用）的。尽管（正如我上面所说）这些年来我已经编写了几个套接字类，但我已经有很长一段时间没有在很多（任何？）新代码中使用它们中的任何一个了——它们实际上只有两个可能优于 ASIO . 第一个仅适用于我：因为我在 ASIO 存在之前编写并使用了它们，所以我已经了解它们以及它们是如何工作的。第二个可能类似：至少对我来说，它们看起来更小更简单（但是，这可能只是因为我先使用它们）。即便如此，（例如）使用其他人已经理解的东西的优势很容易胜过那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:25:00.850

使用`has-a`. TCPClient 使用套接字就像人使用电话一样。你会从电话中派生出一个人吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:35:08.523

```
class TCPClient : public Socket
{
public:
    TCPClient(const std::string& host, unsigned short port);
}; 
```

网络套接字不仅用于 TCP/IP，而且如果您打算重用“Socket”类来使用网络套接字实现其他协议，上述设计更适合。例如：

```
class UDPClient : public Socket
{
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T15:08:38.603

我会这么说。套接字是一个抽象，一个文件描述符（UNIX）或句柄（Windows），它具有与之关联的资源并由操作系统管理。如果我们考虑 OSI 模型，套接字非常适合表示层（它表示或描述两个节点之间的通信通道），而使用套接字的程序位于应用层。

考虑到这一点，我宁愿不从套接字继承，除非我实现一种高级套接字（通过类比：C 指针与智能指针）来呈现和处理逻辑连接并以某种方式管理与套接字关联的资源。如果`XYZClient`是一个应用程序，其目标是实现一些业务或数据处理逻辑，我不会将这两个概念混合在一起并使用第二种方法（has-a）。

我会拆分基础架构/资源特定和业务/应用程序特定的逻辑。

# android - Android 应用程序列表

> ID：11282661
> 
> 赞同：1
> 
> 时间：2012-07-01T14:13:55.747
> 
> 标签：android, android-layout, android-intent

我创建了一个应用程序，我想将所有已安装的应用程序列出到自定义列表视图中。bt 不幸的是，活动一开始就崩溃了！任何人都可以帮我解决这个问题！我找不到错误，因为它没有给出任何错误！

应用活动.java

```
package com.ex.layout;

import java.util.List;

import android.app.Activity;
import android.content.pm.PackageInfo;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;

public class AppActivity extends Activity implements OnItemClickListener{

String[] name = getaAppName();
String[] packs = getPackName();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView li = (ListView) findViewById(R.id.applist);
    ListviewAdapet list = new ListviewAdapet(this, name, packs);
    li.setAdapter(list);
    li.setOnItemClickListener(this);
}

public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id) {  
    // TODO Auto-generated method stub  
    Toast.makeText(this,"Title => "+name[position]+"=> n Description"+packs[position], Toast.LENGTH_SHORT).show();  
}  

public String[] getaAppName() {
    List<PackageInfo> apps = getPackageManager().getInstalledPackages(0);
    String appname[] = new String[apps.size()];
    for (int number = 0; number < apps.size(); number++) {
        PackageInfo pack = apps.get(number);
        appname[number] = pack.applicationInfo.loadLabel(getPackageManager()).toString();
    }
    return appname;
}

public String[] getPackName(){
    List<PackageInfo> apps = getPackageManager().getInstalledPackages(0);
    String packnames[] = new String[apps.size()];
    for (int i = 0; i < apps.size(); i++) {
        PackageInfo pack = apps.get(i);
        packnames[i] = pack.packageName;
    }
    return packnames;
}

} 
```

这是下一堂课！它扩展了 baseadapter 以获得输出。listviewadapet.java

```
package com.ex.layout;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class ListviewAdapet extends BaseAdapter{

Activity context;
String[] appname , packname;

public ListviewAdapet(Activity Context, String[] appname , String[] packname) {
    // TODO Auto-generated constructor stub
    super();
    this.appname = appname;
    this.packname = packname;
    this.context = Context;

}

public class Viewholder{
    TextView appname;
    TextView packname;
}

public int getCount(String[] array) {
    // TODO Auto-generated method stub
    int count = array.length;
    return count;
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    Viewholder view;
    LayoutInflater inflator = context.getLayoutInflater();

    if (convertView == null) {
        convertView = inflator.inflate(R.layout.listitem, null);
        view = new Viewholder();
        view.appname = (TextView) convertView.findViewById(R.id.appname);
        view.packname= (TextView) convertView.findViewById(R.id.packagename);
        convertView.setTag(view);
    } else {
        view = (Viewholder) convertView.getTag();
    }

    view.appname.setText(appname[position]);
    view.packname.setText(packname[position]);
    return convertView;
}

public int getCount() {
    // TODO Auto-generated method stub
    return 0;
}

} 
```

请帮我解决这个问题！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:49:21.807

您在代码中犯了两个严重错误。

错误 1

```
String[] name = getaAppName();
String[] packs = getPackName(); 
```

你在 onCreate 之前调用这两个方法。记住`getPackageManager`需要 Activity 上下文。如果你在 onCreate 之前定义它，你会被诅咒的`NullPointerException`

所以改变你的代码

从

```
public class AppActivity extends Activity implements OnItemClickListener{

String[] name = getaAppName();
String[] packs = getPackName();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
```

到

```
public class AppActivity extends Activity implements OnItemClickListener{

    String[] name;
    String[] packs;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        name = getaAppName();
        packs = getPackName(); 
```

错误 2

```
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
} 
```

如果您在此处返回 0，您将获得 Empty list。

所以改成

```
public int getCount() {
        return packname.length;
    } 
```

# c# - 在 wpf 中使用 EntityFramework 模型作为数据上下文

> ID：11282664
> 
> 赞同：1
> 
> 时间：2012-07-01T14:14:02.627
> 
> 标签：c#, wpf, entity-framework, data-binding, multidatatrigger

我正在创建一个简单的 WPF 应用程序，该应用程序需要使用实体框架模型显示/编辑来自 SQL 服务器的数据。我创建了一个小测试窗口来查看事情是如何工作的，我注意到属性更改事件和数据验证是自动实现的。这是我的xml：

```
<Style TargetType="{x:Type Button}">
        <Setter Property="IsEnabled" Value="False"/>
        <Style.Triggers>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding ElementName=txtRibbonCoreSize,Path=(Validation.HasError)}" Value="False"/>
                </MultiDataTrigger.Conditions>
                <Setter Property="IsEnabled" Value="True"/>
            </MultiDataTrigger>
        </Style.Triggers>
    </Style>

<StackPanel>
    <ac:AutoCompleteBox x:Name="txtPrn1" Width="250" HorizontalAlignment="Left"                                
                           ValueMemberBinding="{Binding Converter={StaticResource prnC}}" 
                            FilterMode="Contains"
                            ItemsSource="{Binding PrinterParams}">
        <ac:AutoCompleteBox.TextBoxStyle>
            <Style TargetType="TextBox">
                <Setter Property="FocusManager.FocusedElement" 
                        Value="{Binding RelativeSource={RelativeSource Self}}" />
            </Style>
        </ac:AutoCompleteBox.TextBoxStyle>
        <ac:AutoCompleteBox.ItemTemplate>
            <DataTemplate>
                <TextBlock>
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}{0} - {1}">
                            <Binding Path="Manufacturer"/>
                            <Binding Path="Model"/>
                        </MultiBinding> 
                    </TextBlock.Text>
                </TextBlock>
            </DataTemplate>
        </ac:AutoCompleteBox.ItemTemplate>
    </ac:AutoCompleteBox>
    <TextBox Text="{Binding ElementName=txtPrn1,Path=SelectedItem.MHeight,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
    <Button x:Name="btn1" Content="Accept" Click="btn1_Click"/>
</StackPanel> 
```

这是我的代码：

```
 //instance of EF datamodel object
    DbEntities db = new DbEntities();
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        DataContext = db;
    }

    private void btn1_Click(object sender, RoutedEventArgs e)
    {
        db.SaveChanges();
    } 
```

MHeight 是一个整数，如果我在文本框中输入一个非整数值，它的边框会变成红色并且按钮会被禁用（根据上面的验证样式）。如果我单击按钮，则新数据将正确保存。
EF 模型是否实现了 INotifyPropertyChanged 和 IDataErrorInfo 接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T18:28:40.933

For the `INotifyPropertyChanged` yes it's already implemented , but `IDataErrorInfo` you have to implement it your self.
Your Entities inherit from `EntityObject` which it self inherits from `StructuralObject` which finally implements `INotifyPropertyChanged`

# c# - 缩放绘制曲线

> ID：11282682
> 
> 赞同：2
> 
> 时间：2012-07-01T14:15:35.337
> 
> 标签：c#, math, drawing, gdi+

我正在研究一个数学函数草图程序。用户正在输入函数，程序会解析它们并绘制它们的曲线。我面临一个问题，有些函数的范围间隔很小，例如`sin(x)`只有`cos(x)`间隔`[-1 : 1]`。相比之下，其他一些函数的区间非常大，例如`e^x`，因此它们增长非常快。我正在使用 X 轴值来评估函数以生成 Y 访问值。X 轴值通常固定在 -40 到 40 之间。但是，我不能像 X-access 那样依赖于 Y 访问集的固定值，因为有些函数的 Y 值非常大，而另一些函数的 Y 值非常小。

我试图用乘法\除法来缩放曲线，它在常用函数上运行良好。例如，`sin(x)`正在放大`sin(x) * 3`. 但是，我发现某些函数在乘以一个因子时不会放大，而是函数本身会发生变化。一个例子是`f(x) = sin(log(cosh(sec(-x))))`。

我想找到一种方法将函数曲线缩小\缩小，以便我可以调整它们的 Y 访问最大值、最小值和增量步长值，当然，缩放曲线使其达到最大\最小值 Y 值. 任何数学\编程想法都可以。谢谢

用途：`System.Drawing.Graphics.DrawCurve(Pen pen, PointF[] curve)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T14:42:52.513

转换矩阵对我来说很好。你可以试试看：

```
// Zoom transformation on the Graphics object
float zoomFactor = 1.5f;
Matrix mat = new Matrix();
mat.Scale(zoomFactor, zoomFactor, MatrixOrder.Append); //zoom to 150%
myGraphics.Transform = mat;
// Now draw your points... 
```

**笔记：**

我坚信这种操作（放大和缩小）应该在视图上执行，而不是在模型上。缩放操作应该在图形对象或其他人所说的屏幕上执行。更改您在我脑海中呈现的方法并不干净，因为您正在更改模型，因此绘制了不同的数学函数。

# windows-phone-7 - 英文应用可以在哪些国家销售？

> ID：11282690
> 
> 赞同：1
> 
> 时间：2012-07-01T14:16:45.827
> 
> 标签：windows-phone-7, internationalization

对于英文应用程序，我如何获得可以销售的列表？我找到了很多关于如何国际化、如何获取所有英语国家列表等的信息，但没有找到英语国家列表。

这是一款 XNA 游戏，我很乐意将其提供给全世界，但我无法想象为每种语言创建一组单独的 png，甚至不知道如何进行翻译......所以英语现在是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:18:28.103

在您有 Facebook/Twitter 集成或链接之前，您可以在所有市场上销售它。当然，这取决于内容，但没有一般限制

Twitter/Facebook 在中国是被禁止的，也许在一些阿拉伯国家是被禁止的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:30:52.613

试试[这个](http://www.wolframalpha.com/input/?i=countries%20speaking%20english) `Wolfram`答案。它有每个国家说英语的人数。

# java - 和Engine Physics示例

> ID：11282692
> 
> 赞同：0
> 
> 时间：2012-07-01T14:16:55.823
> 
> 标签：java, android, andengine, physics, game-development

所以，我正在研究 AndEngine PhysicsExample 代码。我想知道这种方法的含义是什么（[http://pastebin.com/Day2hciB](http://pastebin.com/Day2hciB)）：

```
private void addFace(final float pX, final float pY) {
        this.mFaceCount++;
        Debug.d("Faces: " + this.mFaceCount);

        final AnimatedSprite face;
        final Body body;

        if(this.mFaceCount % 4 == 0) {
            face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion, this.getVertexBufferObjectManager());
            body = PhysicsFactory.createBoxBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
        } else if (this.mFaceCount % 4 == 1) {
            face = new AnimatedSprite(pX, pY, this.mCircleFaceTextureRegion, this.getVertexBufferObjectManager());
            body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
        } else if (this.mFaceCount % 4 == 2) {
            face = new AnimatedSprite(pX, pY, this.mTriangleFaceTextureRegion, this.getVertexBufferObjectManager());
            body = PhysicsExample.createTriangleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
        } else {
            face = new AnimatedSprite(pX, pY, this.mHexagonFaceTextureRegion, this.getVertexBufferObjectManager());
            body = PhysicsExample.createHexagonBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
        }

        face.animate(200);

        this.mScene.attachChild(face);
        this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face, body, true, true));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T06:22:28.410

```
private void addFace(final float pX, final float pY) {
            this.mFaceCount++;
            Debug.d("Faces: " + this.mFaceCount);

            final AnimatedSprite face;
            final Body body;

            if(this.mFaceCount % 4 == 0) {
                    face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion, this.getVertexBufferObjectManager());
                    body = PhysicsFactory.createBoxBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
            } else if (this.mFaceCount % 4 == 1) {
                    face = new AnimatedSprite(pX, pY, this.mCircleFaceTextureRegion, this.getVertexBufferObjectManager());
                    body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
            } else if (this.mFaceCount % 4 == 2) {
                    face = new AnimatedSprite(pX, pY, this.mTriangleFaceTextureRegion, this.getVertexBufferObjectManager());
                    body = PhysicsExample.createTriangleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
            } else {
                    face = new AnimatedSprite(pX, pY, this.mHexagonFaceTextureRegion, this.getVertexBufferObjectManager());
                    body = PhysicsExample.createHexagonBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF);
            }

            face.animate(200);

            this.mScene.attachChild(face);
            this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face, body, true, true));
    } 
```

这段代码所做的是根据其形状将主体设置为精灵。每次添加人脸时，mFaceCount 都会给自己加 1。这条线的作用：

```
if(this.mFaceCount % 4 == 0) 
```

是检查除以 4 时的余数是否等于 0（其他为 1、2、3）。所有这一切都是告诉它要添加到场景中的精灵。你会注意到你首先添加了一个正方形，然后是一个圆形，然后是一个三角形，然后是一个六边形。

真正的代码在这些行中：

```
face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion, this.getVertexBufferObjectManager());
                    body = PhysicsFactory.createBoxBody(this.mPhysicsWorld, face, BodyType.DynamicBody, FIXTURE_DEF); 
```

这将创建一个名为 face 的精灵并将一个盒子主体附加到它上面。下一个附上一个圆圈。现在你会注意到接下来的两个是不同的。他们说 PhysicsExample.create 而不是 PhysicsFactory.create。PhysicsExample 是活动，因此他们在 PhysicsExample 中而不是从 PhysicsFactory 调用方法。createTriangleBody 实际上调用了这个方法（稍后在代码中）：

```
private static Body createTriangleBody(final PhysicsWorld pPhysicsWorld, final IAreaShape pAreaShape, final BodyType pBodyType, final FixtureDef pFixtureDef) {
    /* Remember that the vertices are relative to the center-coordinates of the Shape. */
    final float halfWidth = pAreaShape.getWidthScaled() * 0.5f / PIXEL_TO_METER_RATIO_DEFAULT;
    final float halfHeight = pAreaShape.getHeightScaled() * 0.5f / PIXEL_TO_METER_RATIO_DEFAULT;

    final float top = -halfHeight;
    final float bottom = halfHeight;
    final float left = -halfHeight;
    final float centerX = 0;
    final float right = halfWidth;

    final Vector2[] vertices = {
            new Vector2(centerX, top),
            new Vector2(right, bottom),
            new Vector2(left, bottom)
    };

    return PhysicsFactory.createPolygonBody(pPhysicsWorld, pAreaShape, vertices, pBodyType, pFixtureDef);
} 
```

这会在精灵周围创建一个三角形（不要问我如何。我不明白他在这里使用的数学，但我完全复制了它，它适用于大致等边三角形。整个顶点的事情需要一些时间。我不要得到向量！！）。createHexagonMethod 做同样的事情，只是用一个六边形。希望回答你的问题？如果我遗漏了什么，请告诉我。

# android - Android对齐表格的内容

> ID：11282694
> 
> 赞同：1
> 
> 时间：2012-07-01T14:17:07.817
> 
> 标签：android, android-layout

我正在努力让表格单元格的内容左/右对齐。我的代码是：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tableLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableRow
    android:id="@+id/tableRow4"
    android:layout_weight="1" >

    <ImageButton
        android:id="@+id/button_one"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:background="@null"
        android:scaleType="fitCenter"
        android:src="@drawable/button_one" />

    <ImageButton
        android:id="@+id/button_two"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:background="@null"
        android:scaleType="fitCenter"
        android:src="@drawable/button_two" />
</TableRow>
.... 
```

我希望 2 个 ImageButton 在中间紧贴在一起，但目前有一个间隙 - 看起来每个单元格都以内容为中心。表格展开到屏幕的全尺寸，总共有 4 行，与上面相同。我希望图像按钮调整大小以填充屏幕，同时保持它们的纵横比。

我试过在图像按钮上设置重力，但它似乎不起作用（它只移动了几个像素）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:25:57.890

您缺少`android:layout_width="0dp"`按钮，这将允许布局权重起作用，从而使每个按钮平均分配可用空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:26:52.990

想通了，将 scaleType 更改为“fitEnd”和“fitStart”似乎已经成功了。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tableLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" > 
```

```
<ImageButton
    android:id="@+id/button_one"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:adjustViewBounds="true"
    android:background="@null"
    android:scaleType="fitEnd"
    android:src="@drawable/button_one" />

<ImageButton
    android:id="@+id/button_two"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:adjustViewBounds="true"
    android:background="@null"
    android:scaleType="fitStart"
    android:src="@drawable/button_two" /> 
```

……

# assembla - 如何从汇编中删除分叉的存储库

> ID：11282695
> 
> 赞同：1
> 
> 时间：2012-07-01T14:17:09.520
> 
> 标签：assembla, git-fork

我在玩汇编，我通过选择创建了我自己的存储库的分支：

```
Source/Git tab -> Fork network -> Fork -> fork to a new tab in this space 
```

现在，我想删除分叉的存储库，而不删除原始存储库，但我找不到合适的选项。有谁知道我怎样才能删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:45:02.583

您现在应该在您的空间中有 2 个工具。您可以通过以下方式删除辅助工具：管理选项卡 -> 工具 -> 删除可能名为 source/git.2 的第二个工具

# json - 在 as2 中解析 json

> ID：11282702
> 
> 赞同：2
> 
> 时间：2012-07-01T14:17:50.373
> 
> 标签：json, actionscript-2

我需要在 Flash、AS2 中加载和解析一些 JSON。问题是解析器。似乎我无法从对象中得到我想要的东西。它是一个单层对象，在下面您可以看到它看起来像填充了一些虚拟文本。

我的 JSON 对象如下所示：

```
[
{
    data    
},
{
    data
}
] 
```

现在，我如何在 as2 中解析它？这可能吗？我之前只在as3中做过。我认为我需要的是某种代码如何在 as2 中实际加载和解析它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:39:22.903

你可以试试这个（刚刚用 AS2 测试过，似乎有效）：

[http://inner.geek.nz/archives/2007/01/18/loading-json-in-actionscript-2/](http://inner.geek.nz/archives/2007/01/18/loading-json-in-actionscript-2/)

[http://web.archive.org/web/20111014093347/http://inner.geek.nz/uploads/JSON.as](http://web.archive.org/web/20111014093347/http://inner.geek.nz/uploads/JSON.as)

用法：

```
try {
  var o:Object = JSON.parse(jsonStr);
  var s:String = JSON.stringify(obj);
} catch(ex) {
  trace(ex.name + ":" + ex.message + ":" + ex.at + ":" + ex.text);
} 
```

# c# - 用于图表应用程序的 html5/JavaScript 或 WPF/C#

> ID：11282704
> 
> 赞同：3
> 
> 时间：2012-07-01T14:18:07.197
> 
> 标签：c#, javascript, wpf, html

我将开发支持设计 SQL 数据库的图表应用程序。

我有 WPF（大约 2 年）和 html5/js（大约一年）的经验

这应该是一个快速且易于使用的应用程序（在 linux 和 android 上工作只是一个愿望）

我正在寻找建议，我应该使用 WPF 还是 Html5 ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T14:28:12.320

我会选择WPF。

我不认为 WPF 比 HTML 容易得多（感觉这里和那里的设计有点过度），但是 C# 中的原型设计更容易，因为它是一种比 javascript 更丰富的语言。更不用说类型安全的好处了。

# iphone - 如何在矩形中绘制和缩放文本

> ID：11282709
> 
> 赞同：0
> 
> 时间：2012-07-01T14:18:35.070
> 
> 标签：iphone, ios, text, graphics

我的问题很简单。我有一个矩形，例如 (0.0, 0.0, 300, 45)，需要在这个矩形的中心绘制一个字符串，例如“Text”。“文本”的高度必须适合矩形的高度。

困难的部分是：矩形可以缩放。“文本”的大小必须按照矩形的大小进行缩放。

我可以在矩形中心绘制字符串，如下面的编码，但难点是我无法管理更改为矩形大小的“文本”字体大小。

[@"Text" drawInRect:textRect withFont:font];

我想在矩形中绘制文本，而不是标签，用户可以用手指缩放矩形大小，最后，我会在图像上按比例绘制文本，我认为标签不适合那些功能。

有人有好的解决方案吗？

谢谢！

**更新：**

实际上，我需要在大图像上按比例绘制文本，而不仅仅是在 iPhone 屏幕上显示，请看以下代码：

```
UIImageVIew *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320, 320)];

imageView.image = [UIImage imageNamed:@"LargeSizeImage"]; // Image size = 2048 *2048

[self.view addSubview:imageView];

UILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 300, 45)];

textLabel.text = @"Text";

[self.view addSubviews:textLabel];

// Draw text on image

UIGraphicsBeginImageCurrentContext(imageView.image.size);(2048 * 2048)

[imageView.image drawInRect:CGRectMake(0, 0, 2048, 2048)];

CGRect scaleRect = CGRectMake(10 * scaleFactor, 10 *scaleFactor, textLabel.bounds.size.width * scaleFactor, text.Label.bounds.size.height *scaleFactor);

UIFont *font = [UIFont systemOfSize:**?**];

[textLabel.text drawInRect:scaleRect withFont:font]; 
```

……………………………………………………………………………………………………

我的问题是如何确定字体大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:26:47.233

```
UILabel *text = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 300, 45)];
text.backgroundColor = [UIColor clearColor];
text.font = [UIFont systemFontOfSize:45];
text.textAlignment =  UITextAlignmentCenter;
text.text = @"TEXT";
[self.view addSubview:text]; 
```

可能会得到你感兴趣的效果。

编辑

实际上，如果您调整正方形的大小，您可以动态调整文本大小。在您进行调整大小的方法中，只需为 UILabel 添加这些代码行即可触发调整大小。

```
text.frame = CGRectMake(0.0, 0.0, rect.frame.size.width, rect.frame.size.height);
text.font = [UIFont systemFontOfSize:rect.frame.size.height]; 
```

rect 是我用来描述您正在调整大小的矩形的内容。

# java - 在java中生成X个总和不大于Y的十进制数

> ID：11282716
> 
> 赞同：-6
> 
> 时间：2012-07-01T14:20:09.330
> 
> 标签：java, random

我需要生成 6 个浮点数，其总和在 30 到 36 之间。
例如，num1 = 4.40，num2 = 6.20，num3 = 5.20，num4 = 5.30，num5 = 4.80，num6 = 4.70

数字必须在 3.50 到 8 之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:24:44.240

这是一个蛮力解决方案：

```
import java.util.Random;
public class Solution {

    private static Random random = new Random();
    private static double[] arr = new double[6];

    private static double solve() {
        double sum;
        while (true) {
            sum = 0;
            for (int i = 0; i < 6; i++)
                sum += arr[i] = 3.5 + random.nextDouble() * (8 - 3.5);
            if (sum <= 36 && sum >= 30) break;
        }
                    // 2 decimal places
        for (int i = 0; i < 6; i++) {
            arr[i] = (int)(arr[i] * 100);
            arr[i] /= 100;
        }
        return sum;
    }

    public static void main(String[] args) {
        System.out.println("The sum is " + solve() + "\nNumbers:");
        for (double i : arr)
            System.out.println(i);
    }
} 
```

# google-sheets - 如何在 Google 电子表格中增加字符串值？

> ID：11282717
> 
> 赞同：4
> 
> 时间：2012-07-01T14:20:15.557
> 
> 标签：google-sheets

好久不见的潜伏者来报道了！我的问题是我不确定如何增加项目编号。它遵循以下格式：LK0001 下面的行将是 LK0002，下面的行是 LK0003 等等只是似乎找不到它！谢谢！

威杰

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T21:20:22.873

首先，我建议使用以下 ID 构建：

> LK1000

这样，字符 ( `LK`) 可以与整数 ( `1000`) 分开。否则你会面临这样的问题，如果你增加`LK0009`它`1`会变成`LK00010`而不是`LK0010`

ID 需要“硬编码”，表示`=CONCAT`或`=A1+1`或`=MAX(A:A)+1`不允许。

要么输入 LK+max。编号并将 ID 用作文本，或者选择整数并`CONCAT`在需要时使用。

如果您选择使用整数，您可以通过执行以下操作轻松增加它们： ![在此处输入图像描述](../Images/815dfe8ec9b54fd1838041455640bfd0.png)

然后将其向下拖动，产生：
![在此处输入图像描述](../Images/24d9a63a24e4c2fe71da077d49b747ad.png)

我为您准备了一个示例：[如何在 Google 电子表格中增加字符串值？](https://docs.google.com/spreadsheet/ccc?key=0AluAYY6ZHeWYdHR3MzVrcXdrOEVQQURGUXRiSzBiUUE)

# version-control - 混合 WaveMaker/Java 项目 - 怎么做？

> ID：11282718
> 
> 赞同：2
> 
> 时间：2012-07-01T14:20:40.303
> 
> 标签：version-control, code-generation, roundtrip, wavemaker

WaveMaker 是一个生成 Java 和 Javascript 代码的 RAD 工具 - 所以：

1.  哪些文件应该签入版本控制，哪些文件应该被忽略？
2.  如果我想自定义生成的代码会怎样？我的自定义设置会被静默覆盖吗？
3.  自定义代码可以往返返回 WaveMaker 吗？
4.  在 WaveMaker 之外进行的数据库更改会怎样——它们可以往返吗？
5.  如果我对生成的代码进行更改，这会改变问题 1 的答案吗？
6.  或者，是否应该避免直接定制生成的代码？如果是这样，应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T19:40:01.040

以下是您的问题的答案：

Q1。哪些文件应该签入版本控制，哪些文件应该被忽略？

A1。请参阅使用 WaveMaker进行[软件配置管理](http://dev.wavemaker.com/wiki/bin/wmdoc_6.4/Software+Configuration+Management)的文档，其中概述了应签入的文件。其他的都可以忽略。

Q2。如果我想自定义生成的代码会怎样？我的自定义设置会被静默覆盖吗？

A2。WaveMaker Studio 在 Studio 中执行代码，因此您的更改会在开发过程中反映出来，当然，也会在您正在运行的应用程序中执行。您也可以在 WaveMaker 中进一步编辑。

Q3。自定义代码可以往返返回 WaveMaker 吗？

A3。是的，WaveMaker 中的大多数编辑器都有一个“从服务器刷新”按钮，因此如果您在 WaveMaker Studio 之外进行更改，您可以强制 WaveMaker 重新读取文件并加载您最近的代码。如果没有“从服务器刷新”按钮，您可以随时关闭项目并重新打开，这将迫使 WaveMaker 重新读取您的代码。

Q4。在 WaveMaker 之外进行的数据库更改会怎样——它们可以往返吗？

A4。见 A3。

Q5。如果我对生成的代码进行更改，这会改变问题 1 的答案吗？或者，是否应该避免直接定制生成的代码？如果是这样，应该怎么做？

A5。我建议不要编辑为应用程序中的每个页面创建的 widgets.js 文件。如果您编辑，请确保在编辑后重新打开项目。

# ruby-on-rails - 相同控制器动作导轨的不同版本 3

> ID：11282719
> 
> 赞同：0
> 
> 时间：2012-07-01T14:20:44.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, version

我有一个类似的动作：

```
def show
    @p = Post.find(params[:id])
    respond_to do |format|
      format.html
      format.js
    end
  end 
```

我得到一个网址：

```
http://localhost:3000/post/1
http://localhost:3000/post/2
http://localhost:3000/post/3
.
.
. 
```

**对于相同的操作，我想要一个不同的版本，例如：**

```
http://localhost:3000/v1/post/1
http://localhost:3000/v1/post/2
http://localhost:3000/v1/post/3
.
.
. 
```

**我该怎么做？**

我看了一下这个资源：

[https://github.com/bploetz/versionist](https://github.com/bploetz/versionist)

[http://railscasts.com/episodes/350-rest-api-versioning?view=asciicast](http://railscasts.com/episodes/350-rest-api-versioning?view=asciicast)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:28:26.120

我想直接的方法是使用命名空间，例如 V1::PostsController、V2::PostsController 等。

请参阅[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

但是，如果您只是生成一个 API，那么您最好使用[https://github.com/intridea/grape](https://github.com/intridea/grape)，因为它具有版本控制支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:28:51.247

在您的路线文件中，您可以添加类似

`map '/v1/post/:id' => 'yourcontroller#show'`

那将是您现有`resources :post`或其他内容的补充。

# django - 无法在 Django(1.3) 项目中显示图像

> ID：11282721
> 
> 赞同：0
> 
> 时间：2012-07-01T14:21:15.987
> 
> 标签：django, django-templates

我正在制作一个简单的 Django 项目，但我无法在我的页面中显示任何图像。

Django 文档位于[https://docs.djangoproject.com/en/1.3/howto/static-files/#basic-usage](https://docs.djangoproject.com/en/1.3/howto/static-files/#basic-usage)状态

> 基本用法 把你的静态文件放在静态文件能找到它们的地方。
> 
> 默认情况下，这意味着在您的 INSTALLED_APPS 中的应用程序的静态/子目录中。
> 
> 您的项目可能还会包含未绑定到特定应用程序的静态资产。STATICFILES_DIRS 设置是文件系统目录的元组，用于在加载静态文件时检查。这是一个默认为空的搜索路径。请参阅 STATICFILES_DIRS 文档如何扩展此附加路径列表。
> 
> 此外，有关 staticfiles 如何查找文件的详细信息，请参阅 STATICFILES_FINDERS 设置的文档。
> 
> 确保 django.contrib.staticfiles 包含在您的 INSTALLED_APPS 中。
> 
> 对于本地开发，如果您正在使用 runserver 或将 staticfiles_urlpatterns 添加到您的 URLconf，则您已完成设置 - 您的静态文件将自动以 /static/ 的默认（对于新创建的项目）STATIC_URL 提供。
> 
> 您可能需要在模板中引用这些文件。最简单的方法是使用包含的上下文处理器，它允许模板代码如下：
> 
> 有关更多详细信息，请参阅在模板中引用静态文件，包括使用模板标签的替代方法。

所以我在settings.py中做了这个：

```
STATICFILES_DIRS = (
    '/home/abc/django/project1/media/',
) 
```

并启用`'django.contrib.staticfiles',` 在媒体中，我有一个文件夹 img，其中包含各种 jpg 文件。

在我的模板中，我将其作为其中一行：

```
<img src="{{STATIC_URL}}img/{{var}}.jpg"> 
```

当我通过我的视图将 var 传递给这个模板时。

HTML 页面似乎将此标记呈现为`"<img src="img/abc.jpg">`var="abc"。但是我的浏览器拒绝显示图像。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T14:27:35.550

您是否在文档中看到了这部分：

如果`{{ STATIC_URL }}`在您的模板中不起作用，则您可能在呈现模板时没有使用 RequestContext。

您是否还在视图中使用 RequestContext 来呈现模板？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:33:58.223

这是另一种方法：

设置.py：

```
import os
PROJECT_DIR = os.path.dirname(__file__) + '/../'
STATIC_ROOT = os.path.join(PROJECT_DIR, 'media/')
STATIC_URL = '/media/' 
```

在您的模板中：

```
{% load staticfiles %}
<img src="{% static img/foo.jpg %}" /> 
```

如果需要传递变量，请使用前缀方法：

```
{% load staticfiles %}
<img src="{% get_static_prefix %}img/{{var}}.jpg" /> 
```

# c# - 如何在我的程序中使用非常大的字符串（5 亿个字符）？

> ID：11282727
> 
> 赞同：2
> 
> 时间：2012-07-01T14:22:13.640
> 
> 标签：c#, string

我有一个 .txt 文件，其中包含 Pi 的 5 亿位二进制表示。

我需要在我的程序中使用它的字符串表示。我还需要能够在其中搜索子字符串等 - 换句话说，我需要能够将其视为正常大小的字符串。我会尝试找到*很多*子字符串，所以速度是必要的。

我最初的逻辑是简单地将字符串直接复制并粘贴到程序中并将其用作静态变量。但是我无法真正打开 .txt 文件，因此无法复制和粘贴。我的下一次尝试是从文件中读取整个字符串，但我不能在静态方法中执行此操作，而且它需要 WAAAY 太长时间（我实际上不知道确切需要多长时间，我最终关闭了程序）。

是否有可能做到这一点？任何帮助，将不胜感激。

编辑：潜在相关信息：

使用此代码：

```
/// <summary>
    /// Gets a 500 million binary digit representation of Pi.
    /// </summary>
    public static string GetPi()
    {
        //as per http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx
        StreamReader piStream = new StreamReader(@"C:\binaryPi.txt");
        string pi = "";
        string line;

        while ((line = piStream.ReadLine()) != null)
        {
            pi += line;
        }

        return pi;
    } 
```

我得到一个 OutOfMemoryException .. 所以扫描文件实际上似乎是不可能的，除非我遗漏了一些东西..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T14:30:19.277

我建议您制作一个可以处理此类数据的自定义类。

如果文件的内容是 pi 的二进制形式的表示，那么它只是零和一。如果将每个位存储在实际位中，则每个二进制数字使用 1/8 个字节，而如果将其存储为文本，则每个位将使用两个字节。通过以更紧凑的形式存储，您将使用 1/16 的内存。

然后，您的班级将不得不处理您如何在数据中搜索位模式。这将是棘手的部分，但如果您创建八个不同版本的搜索模式，并转移以匹配一个字节中的八个可能位置，则搜索可能比在字符串中搜索更有效。

* * *

### 编辑：

这是一个开始...

```
public class BitList {

  private byte[] _data;
  private int _count;

  public BitList(string fileName) {
    using (FileStream s = File.OpenRead(fileName)) {
      _data = new byte[(s.Length + 7) / 8];
      _count = 0;
      int len;
      byte[] buffer = new byte[4096];
      while ((len = s.Read(buffer, 0, buffer.Length)) > 0) {
        for (int i = 0; i < len; i++) {
          switch (buffer[i]) {
            case 48: Add(0); break;
            case 49: Add(1); break;
          }
        }
      }
    }
  }

  public void Add(int bit) {
    _data[_count / 8] |= (byte)(bit << (_count % 8));
    _count++;
  }

  public int this[int index] {
    get {
      return (_data[index / 8] >> (index % 8)) & 1;
    }
  }

} 
```

（注意：此代码未经测试，但您至少应该了解原理。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T14:46:28.473

因此，有了可用的信息，我只需声明一个位数组（初始大小为 file.length），然后我会打开文件并按 4096 个块读取它，然后你会看到这 4096 个字符

在循环中，您只需执行一个简单的 if text = 1 then set true else set false

这样做直到你到达文件的末尾，然后你将完整的东西放入一个巨大的位数组变量中

从那时起，您只需要找到您的模式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T15:15:49.297

在应用程序中读取文本文件一次，将其转换为位数组，一次一个段，然后写入一个包含以二进制形式保存的数组的新文件。此后，只需使用*真正的*二进制文件。

要进行搜索，您可以创建目标模式的位掩码并将其沿位数组滑动，一次一位，执行按位 XOR 比较位，按位 AND 过滤掉您不关心的位。如果剩下的任何东西都是非零的，那么你就没有匹配项。

试验以确定数据类型之间的性能有何不同。例如，您可以使用字节一次搜索 8 位，也可以使用整数一次搜索 32 位。如果您的模式小于所选数据类型，则按位与丢弃额外的位。较大的模式通过查找初始匹配来处理，然后尝试匹配模式的下一段，依此类推。

**编辑**：可能有帮助的优化。假设您有一个长的（例如大于 128 位的）模式。根据模式构造一个包含 64 个 64 位值的数组：位 0-63、1-64、2-65、...。然后，您可以快速通过尝试将任何数组值与 pi 数组中的每个长整数值匹配。在发生匹配的地方，根据需要检查任何先前的位是否匹配，然后测试后续位。这个想法是充分利用对齐的内存访问。

根据模式长度，组装一个二维移位值数组可能是值得的，这样您就可以轻松地继续匹配移位模式而无需重新计算值。（只需在比赛中转一圈，然后使用相同的移位拾取下一个模式值。）您需要允许在每一端屏蔽未使用的位。请注意，您希望以最短的步幅进行最频繁的数组访问，以充分利用缓存。

[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)结构在摆弄时可能会有一些用处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T14:44:55.387

如果查找多个不同子字符串的速度是关键，那么这里有一种方法可能会给您带来更好的结果。

将其保留在文本文件中。扫描它并构建一棵树，树的顶部有 10 个节点，其中包含数字 0..9。这些节点中的每一个都包含 10 个节点，它们的数字序列，然后是 0..9。顶层是 0..9，下一个是 00..09，..，90..99。接下来是 000..009, ... 990..999。

并且在每个级别，您还将偏移量存储在与其序列匹配的每个出现的文本文件中 - 仅当它没有子级时。无子规则是为了节省大量内存，并且根据定义，每个子节点都包含父序列存在的偏移量。换句话说，如果您正在寻找“123456”，那么“123456789”的出现就是匹配项。

这将使用大量内存，但查找速度会非常快。

**添加：**您可以实施很多技巧来最小化内存使用量。将数字存储为半字节（4 位）。代替树中元素的对象，存储基数的偏移量并将所有内容放入少量固定大小的大型数组中。您可以这样做，因为您创建了一次树，然后它是只读的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T15:17:51.670

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.string.aspx)，内存中 String 对象的最大大小为 2 GB，或大约 10 亿个字符。要分配该大小的字符串，您可能需要 64 位操作系统。由于您正在处理数字，因此仅尝试使用字符串以外的其他数据类型。

# c# - 如何在datagridview中使特定列不可编辑？

> ID：11282729
> 
> 赞同：10
> 
> 时间：2012-07-01T14:22:41.700
> 
> 标签：c#, visual-studio-2010

使用 DataGridView，如何在网格视图本身启用“允许编辑”时使特定列不可编辑？

另外，当 DataGridView 的 ComboBox 中的选定索引发生更改时，如何执行事件？这里，ComboBox 是一种列类型。

另一个问题是，如何使标题标题与中心对齐？我找不到合适的属性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T14:32:38.310

你在这里有几个问题。

> (1) 如何使 DataGridView 中的特定列不可编辑？

[`ReadOnly`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.readonly.aspx)在要使其不可编辑的特定列上设置标志。

```
dataGridView.Columns["YourColumnName"].ReadOnly = true; 
```

> (2) 当DataGridView中ComboBox上的选中索引发生变化时，如何执行事件？

如果它在您的 DataGridView 中，则它不是 ComboBox；它是一个 DataGridViewComboBoxColumn。根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcomboboxcolumn%28v=vs.100%29.aspx)：

> 与 ComboBox 控件不同，DataGridViewComboBoxCell 没有 SelectedIndex 和 SelectedValue 属性。相反，从下拉列表中选择一个值会设置单元格值属性。

这个我不熟悉，因为我自己从未尝试过。看来您想订阅该[`EditingControlShowing`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.editingcontrolshowing.aspx)事件，然后查看[类似](http://generally.wordpress.com/2007/12/07/datagridview-get-selectedindex-of-datagridviewcomboboxcolumn/)的内容是否适合您（稍作调整）。

> (3) 如何使标题标题居中对齐？

设置[HeaderCell.Style.Alignment](http://social.msdn.microsoft.com/Forums/en/vblanguage/thread/df6d6a35-f61e-43c8-8cd5-a691529bb486)

```
dataGridView.Columns["YourColumnName"].HeaderCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter; 
```

# c# - 在 https 中下载网页框架源

> ID：11282731
> 
> 赞同：0
> 
> 时间：2012-07-01T14:23:12.077
> 
> 标签：c#, asp.net, https, frame

我可以知道如何下载或加载到文本中以查看 https 中的网页框架源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:27:03.370

它就像下载任何文件一样。

首先下载父页面。使用 DOM 或 XML 获取`src`框架的属性。也从源下载内容。

这是给你的[DOM 教程](http://progzoo.net/wiki/C#%3aNavigating_over_DOM_Tutorial)。

# c++ - 从 qt 类调用的命名空间函数返回到该类

> ID：11282732
> 
> 赞同：0
> 
> 时间：2012-07-01T14:23:24.770
> 
> 标签：c++, qt, namespaces

我有一`CadThread`门课是用来制作我的几何图形的。这个类有一个公共槽`void MakeMesh(cadData aCadData)`，它根据模型类型（来自`aCadData`）（在 MakeMeshStructure.hh 中定义）调用命名空间函数之一：

```
namespace MeshStructure1 {
void MakeMeshStructure  (//parameters... );
}
namespace MeshStructure2 {
void MakeMeshStructure  (//parameters... );
}
namespace MeshStructure3 {
void MakeMeshStructure  (//parameters... 
```

此函数在内部生成形状，例如 MakeMeshStructure3.cc。我想将这些形状返回给在插槽中调用它们的 CadThread 类，例如：

```
void Add_Shape(TopoDS_Shape& shape, Quantity_NameOfColor colorName); 
```

`MakeMeshStructure3`所以当 MakeMeshStructure3 产生一个形状（一次运行产生多个形状）时，我可以从这个插槽（或者可能只是成员函数）将形状发射回主线程。

谁能给我一个如何正确完成的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:49:54.547

我不完全理解您的代码（一个不太抽象的示例可能会有所帮助），但这对我来说听起来像是使用多态性而不是名称空间的好地方。创建一个基`MeshStructure`类，并让所有其他结构子类化它。也使形状多态，因此每个网格结构都会产生不同的形状，但它们都可以通过`Shape`指针或引用来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:14:18.897

如果其中的代码`MakeMeshStructure#.cc`使用的是 Qt，那么我看不出你的问题是什么：只需在那里发出一个信号，即使是从一个临时的 QObject，也可以完成它。

如果meshmaker 代码*不*使用Qt，或者您希望保持Qt 依赖最小，那么只需让代码在堆上生成网格并将其传递给由函数指针调用的函数。该函数可以在网格制作器外部，并且会在它知道的 QObject 实例上发出信号，或者将事件发布到 cad 线程。

# javascript - 设置一个不触发订阅的 knockout.js 可观察对象

> ID：11282733
> 
> 赞同：3
> 
> 时间：2012-07-01T14:23:33.873
> 
> 标签：javascript, knockout.js

如何在不触发任何订阅的情况下设置可观察属性？

我有一个场景是页面加载，进行 ajax 调用以获取一些数据，循环数据，然后将当前选定的项目设置为可观察的。我希望能够在没有任何订阅的情况下设置这个 observable，因为第一次设置这个 observable 被认为是它的初始状态，并且订阅不应该在初始状态下执行。

```
function PlanViewModel() {
    var self = this;

    self.plans = ko.observableArray();
    self.selectedItem = ko.observable();

    self.getAllPlans = function () {
        $.ajax({
            url: "/Backoffice/Home/GetAllPlans",
            type: "POST",
            data: {},
            context: this,
            success: function (result) {
                var planList = this.plans;
                // clear the plan list
                planList.removeAll();
                $.each(result.plans, function () {
                    var planDetail = new PlanDetail(this, self);
                    if (this.IsSelected) {
                        self.selectedItem(planDetail); // how do I set this without the subscriptions firing?
                    }
                    planList.push(planDetail);
                });
            },
            error: function (result) {
                alert("An error occured getting plans.");
            }
        });
    }

    self.selectedItem.subscribe(function (newItem) {
        newItem.repositoryUpdateSelectedPlan();
    } .bind(self));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:33:22.647

你可以像这样重组你的代码：

```
function PlanViewModel() {
    var self = this;

    self.plans = ko.observableArray();

    self.getAllPlans = function () {
        $.ajax({
            // …
            success: function (result) {
                // …
                $.each(result.plans, function () {
                    var planDetail = new PlanDetail(this, self);
                    if (this.IsSelected) {
                        self.selectedItem = ko.observable(planDetail);
                    }
                    planList.push(planDetail);
                });
                if (self.selectedItem === undefined) { 
                    self.selectedItem = ko.observable(); 
                }
                self.selectedItem.subscribe(function (newItem) {
                    newItem.repositoryUpdateSelectedPlan();
                }.bind(self));
            },
            // …
        });
    }
} 
```

也就是说，只有 在达到您想要的初始状态*后才开始 Knockout。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T15:25:33.397

谢谢，我沿着这条路线走，并对其进行了一些修改。selectedItem observable 必须从一开始就在模型上定义，因为它在所有地方都用于绑定，但我确实像您建议的那样移动了订阅部分，效果很好。

```
function PlanViewModel() {
    var self = this;

    var selectedItemSubscription = null;

    self.plans = ko.observableArray();
    self.selectedItem = ko.observable();

    self.getAllPlans = function () {
        $.ajax({
            url: "/Backoffice/Home/GetAllPlans",
            type: "POST",
            data: {},
            context: this,
            success: function (result) {
                var planList = this.plans;
                // clear the plan list
                planList.removeAll();
                $.each(result.plans, function () {
                    var planDetail = new PlanDetail(this, self);
                    if (this.IsSelected) {
                        if (selectedItemSubscription != null)
                            selectedItemSubscription.dispose();

                        self.selectedItem(planDetail);
                    }
                    planList.push(planDetail);
                });

                selectedItemSubscription = self.selectedItem.subscribe(function (newItem) {
                    newItem.repositoryUpdateSelectedPlan();
                }.bind(self));
            },
            error: function (result) {
                alert("An error occured getting plans.");
            }
        });
    }
} 
```

# oracle - PL/SQL 函数参数

> ID：11282735
> 
> 赞同：7
> 
> 时间：2012-07-01T14:23:39.520
> 
> 标签：oracle, plsql

在 PL/SQL 中，下面的代码将失败。它不允许为 varchar2 参数定义大小。你知道为什么吗？我如何解决它？

```
create or replace function logMessage(msg varchar2(2000))
return number as
begin
    null;    
    return 1;
end logMessage;
/ 
```

错误信息是

> 1/33 PLS-00103：在预期以下情况之一时遇到符号“（”：
> 
> := 。) , @ % 默认字符符号 ":=" 被替换为 "(" 以继续。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T14:25:23.257

您可以通过删除大小限制来修复它。不需要：

```
create or replace function logMessage (msg in varchar2)
return number is
begin
    null;    
    return 1;
end logMessage;
/ 
```

我假设您的功能比这稍微复杂一些？

[文档](http://docs.oracle.com/cd/E11882_01/timesten.112/e21642/state.htm#TTSQL291)`create function`中语句的完整语法是：

```
CREATE [OR REPLACE] FUNCTION [Owner.]FunctionName 
     [(arguments [IN|OUT|IN OUT][NOCOPY] DataType [DEFAULT expr][,...])]
     RETURN DataType [InvokerRightsClause] [DETERMINISTIC]
     {IS|AS} 
```

如果您有兴趣，有很多关于细节的信息，但您可能会发现TECH *on* the [Net](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_function.htm#LNPLS01370)[更有](http://www.techonthenet.com/oracle/functions.php)用。

* * *

回答您的第一个问题，即*为什么*我不知道也找不到答案。但是[引用 APC 的话](https://stackoverflow.com/a/3186780/458741)：

> 这很烦人，但这是 PL/SQL 的工作方式，所以我们必须忍受它。

简而言之，您应该在运行时*知道*某事将持续多长时间，因此能够处理它。不过，您可以考虑以下几个选项：

如果你知道你想要消息的长度，你可以定义一个变量，它的默认值是`substr`参数的 a：

```
create or replace function logmessage ( msg in varchar2 ) return number is

   l_msg varchar2(2000) := substr(msg,1,2000);

begin
   return 1;
end; 
```

或者，您可以检查函数本身的长度：

```
create or replace function logmessage ( msg in varchar2 ) return number is

begin

   if length(msg) > 2000 then
      return 0;
   end if;

   return 1;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T14:27:27.710

参数用数据类型声明，但没有数据类型长度或精度。这意味着参数可以声明为 VARCHAR2，但不会使用长度分量声明（VARCHAR2(30) 无效）。

# eclipse - 将 Mahout 的 maven 资源导入 eclipse 时出错

> ID：11282737
> 
> 赞同：2
> 
> 时间：2012-07-01T14:23:56.010
> 
> 标签：eclipse, maven, ant, mahout

我正在尝试将**Mahout**的 Maven 资源导入 Eclipse，但我遇到了这些错误：

![在此处输入图像描述](../Images/c796c3f8150e0b9e19d430a207a5e6d5.png)

我试过谷歌，但它没有帮助。

Eclipse : Helios 服务版本 1

Maven：外部 Maven 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:25:59.093

**编辑**：如果我尝试使用最新的稳定版本（ Mahout 0.7 ）而不是官方网站推荐下载的最新快照，我会遇到同样的错误。

按照这个链接一步一步操作：[https ://cwiki.apache.org/MAHOUT/buildingmahout.html](https://cwiki.apache.org/MAHOUT/buildingmahout.html)

执行此操作并重新导入 mahout 后，您注意到的这些错误就会消失。

**注意**：在以正确的方式编译代码之前（如上面的链接所述），我已按照此处的说明进行操作：

[http://domengrabec.wordpress.com/2010/12/14/installing-maven-on-eclipse/](http://domengrabec.wordpress.com/2010/12/14/installing-maven-on-eclipse/)

**问**：如果有人可以帮助我解决这个相关问题： [包括核心和数学文件夹 - Eclipse - Hadoop 的 Mahout 数学库类](https://stackoverflow.com/questions/11741037/include-classes-of-mahout-math-libraries-of-both-core-math-folders-eclipse)，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:53:58.197

我通过手动将[https://issues.apache.org/jira/browse/MAHOUT-1043](https://issues.apache.org/jira/browse/MAHOUT-1043)中的补丁应用到 0.7 源来解决它（更改 pom.xml 文件和 src/conf/driver.classes.conf ）

只是一个注释，不要删除 distribution/pom.xml 中的 groupid

启动外部 mvn eclipse:clean 并更新项目。重建工作区时所有错误都消失了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:03:23.157

我认为您需要以不同的方式构建 mahout，首先为 eclipse 安装 m2e 插件，然后您可以创建 maven 项目。之后您可以进行运行配置（包）以确保一切正常。

重要的部分是您在项目中有 pom.xml，因此您必须添加所需的 mahout 依赖项。

您可以通过在 google 上搜索“mahout api 中的依赖项名称”来获取依赖项。

# algorithm - 如何正确组织人员搜索？

> ID：11282742
> 
> 赞同：5
> 
> 时间：2012-07-01T14:25:06.367
> 
> 标签：algorithm, google-cloud-datastore

假设我的数据存储中有人员列表。那里的每个人**可能**有以下字段：

*   姓 （*）
*   名
*   中间名字
*   ID （*）
*   驾驶执照号码 (*)
*   另一个 ID (*)
*   出生日期
*   地区
*   出生地

至少有**一个**标有 (*) 的字段必须存在。

现在用户向我提供了相同的字段列表（并且必须再次提供至少**一个**标有 (*) 的字段）。我应该搜索用户提供的人。但并非所有字段都应匹配。我应该以某种方式向用户显示我在搜索结果中的确定方式。就像是：

*   如果人员与 and 匹配`id`（`last name`并且用户只提供了这两个字段进行搜索），那么我确信结果是正确的（100%）；
*   如果人员与 and 匹配`id`（`last name`并且用户提供了在数据库中找到但未匹配的其他字段），那么我确信结果几乎正确 60%；
*   等等

（数字仅作为示例提供）

我怎样才能组织这样的搜索？有没有标准的算法？我还想尽量减少对数据库的请求数量。

PS 我无法为用户提供数据库中的实际字段值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:47:55.847

听起来您确定匹配质量的逻辑太复杂而无法在数据库层处理。我认为您将通过检索与至少一个强制键匹配的所有记录、计算内存中每个记录的匹配分数并返回最佳分数来获得最佳性能。例如，如果用户向您提供 id、姓氏和出生地，您的查询将类似于：

```
SELECT * FROM users WHERE id = `the_id` OR last_name = `the_last_name`; 
```

如果您有一个非常大的数据集，其中包含许多常见的姓氏，这可能是一个性能问题，但否则我希望不会看到太多的冲突。您可以在 GAE 之外的自己的数据集上检查这一点。`OR`如果所有必填字段必须通过将 更改为来匹配，您还可以获得更好的性能`AND`。

# java - 使用 @Configuration 时出现 NoSuchBeanDefinitionException

> ID：11282743
> 
> 赞同：1
> 
> 时间：2012-07-01T14:25:22.803
> 
> 标签：java, spring, spring-annotations

我的情况很奇怪。我尝试以这种方式使用@Configuration 和@Bean 来创建新bean：

```
package com.spring.beans.ParkingCar;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class CarMaker
{
    @Bean
    public CarBean createNewCar()
    {
        CarBean carBean=new CarBean();
        return carBean;

    }

} 
```

包 com.spring.beans.ParkingCar；

```
import org.apache.log4j.Logger;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class CarBean
{
    private int x = 3;
    static Logger logger = Logger.getLogger(CarBean.class);

    public void driveCar()
    {
        logger.debug("I am driving my car" + x);
    }
} 
```

然后我的测试类看起来像这样：

```
public static void execute()
    {
        try
        {
            PropertyConfigurator.configure("log4j.properties");

            ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");

            CarMaker carMaker = (CarMaker) context.getBean("carMaker");
            CarBean carBean = carMaker.createNewCar();
            carBean.driveCar();
        }
        catch (Throwable e)
        {
            logger.error(e);
        }

    } 
```

我的 applicationContext.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <!-- Must for auto wiring 
    <context:annotation-config />
    -->

    <context:component-scan
         base-package="com.spring.beans.ParkingCar">
   </context:component-scan>

    <aop:aspectj-autoproxy />

    <bean id="Spring3HelloWorldBean" class="com.spring.aspect.Spring3HelloWorld">
        <property name="myname" value="idan" />
    </bean>

    <bean id="SecurityAspect" class="com.spring.aspect.SecurityAspect">
    </bean>

    <bean id="CalculateStrategyBean" class="com.spring.beans.calculator.CalculateStrategyBean">
        <constructor-arg value="plus" />
    </bean>

    <bean id="CalculatorBean" class="com.spring.beans.calculator.CalculatorBean">
        <constructor-arg ref="CalculateStrategyBean" />
        <constructor-arg ref="CalculateNumbersHolderBean" />
    </bean>

    <bean id="CalculateNumbersHolderBean" class="com.spring.beans.calculator.CalculateNumbersHolderBean">
        <constructor-arg value="10" />
        <constructor-arg value="20" />
    </bean>

    <bean id="lisenceDrive" class="com.spring.beans.ParkingCar.LisenceDrive"
        p:carLisenceNum="333" p:isValidateCar="true" />

    <bean id="AmbulancelisenceDrive" class="com.spring.beans.ParkingCar.LisenceDrive"
        p:carLisenceNum="999" p:isValidateCar="false" />

    <bean id="TransitlisenceDrive" class="com.spring.beans.ParkingCar.LisenceDrive"
        p:carLisenceNum="111" p:isValidateCar="false" />

    <bean id="TransitVechileDetails" class="com.spring.beans.ParkingCar.VechileDetails"
        p:modelName="Transit-AS" p:numOfWheels="4" p:year="1992" />

    <!--  Wiring without annotations-->
    <!--

        <bean id="Ambulance"
        class="com.spring.beans.ParkingCar.FourWheelsVechile"
        p:modelName="GMC" p:numOfWheels="4" p:year="1997"
        p:lisenceDrive-ref="AmbulancelisenceDrive" /> <bean id="Bike"
        class="com.spring.beans.ParkingCar.TwoWheelsVechile" autowire="byName"
        p:modelName="T-BIRD" p:numOfWheels="2" p:year="2012" /> <bean
        id="Transit" class="com.spring.beans.ParkingCar.FourWheelsVechile"
        p:lisenceDrive-ref="TransitlisenceDrive" autowire="constructor">
    -->

    <bean id="Ambulance" class="com.spring.beans.ParkingCar.FourWheelsVechile"
        p:modelName="GMC" p:numOfWheels="4" p:year="1997" p:lisenceDrive-ref="AmbulancelisenceDrive" />

    <!--  Wiring with annotations

    <bean id="Bike" class="com.spring.beans.ParkingCar.TwoWheelsVechile"
        autowire="byName" p:modelName="T-BIRD" p:numOfWheels="2" p:year="2012" />

    <bean id="Transit" class="com.spring.beans.ParkingCar.FourWheelsVechile"
        p:lisenceDrive-ref="TransitlisenceDrive">
    </bean>
    -->

</beans> 
```

现在，当我通过 main 在 MyEclipse 上运行它时，它工作得很好。但是当我将它上传到我在 Linux 上运行的独立应用程序时，我得到了：

```
2012-07-01 14:11:21,152 com.spring.test.Spring3HelloWorldTest [ERROR] org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'carMaker' is defined 
```

知道为什么它在那里不起作用吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:32:26.170

[`@Configuration`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Configuration.html)表示一个类声明了一个或多个[`@Bean`](http://static.springsource.org/spring-javaconfig/docs/1.0.0.M4/reference/html/ch02s02.html)方法，同时`@Bean`创建了一个新的 bean，该 bean 的名称与用 . 注释的方法的名称相同`@Bean`。
在您的代码示例 bean 中，名称`createNewCar`将被创建为方法`createNewCar()`方法由`@Bean`.

尝试这个

```
CarBean carBean = (CarBean) context.getBean("createNewCar");
carBean.driveCar(); 
```

有几件事要看

1.  为什么要将类注释`CarBean`为`@Configuration`？它不包含任何bean定义，即。带`@Bean`注释的方法。
2.  为什么要调用`createNewCar()`方法，因为它已经用 注释了`@Bean`？（让 Spring 完成它的工作）

检查此[链接](http://www.roseindia.net/spring/spring3/configuration-spring.shtml)它将帮助您熟悉`@Configuration`和`@Bean`注释。

# osx-lion - 如何使用加速框架执行矩阵逆运算？

> ID：11282746
> 
> 赞同：5
> 
> 时间：2012-07-01T14:25:30.393
> 
> 标签：osx-lion, lapack, accelerate-framework, matrix-inverse

我想找到矩阵的逆矩阵。

我知道这涉及到第一个 LU 因式分解，然后是求逆步骤，但我无法通过搜索苹果的 10.7 文档找到所需的函数！

这似乎是一篇有用的帖子[Symmetric Matrix Inversion in C using CBLAS/LAPACK](https://stackoverflow.com/questions/10719427/symmetric-matrix-inversion-in-c-using-cblas-lapack)，指出应该使用`sgetrf_`and函数。`sgetri_`但是搜索这些术语我在 Xcode 文档中一无所获。

有人有这个矩阵运算的样板代码吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T01:56:34.413

Apple 根本没有记录 LAPACK 代码，我猜是因为他们只是实现了[netlib.org](http://netlib.org)的标准接口。很遗憾，您无法从内置 Xcode 文档中搜索这些函数名称，但解决方案相当简单：只需在 URL 中指定函数名称，例如`dgetrf_()`转到[http://www.netlib.org/ clapack/what/double/dgetrf.c](http://www.netlib.org/clapack/what/double/dgetrf.c)。

要反转矩阵，需要两个 LAPACK 函数：`dgetrf_()`，它执行 LU 分解，并`dgetri_()`获取前一个函数的输出并进行实际的反转。

我使用 Xcode 创建了一个标准的应用程序项目，添加了 Accelerate 框架，创建了两个 C 文件：matinv.h、matinv.c 并编辑了 main.m 文件以删除 Cocoa 内容：

```
// main.m

#import "matinv.h"

int main(int argc, char *argv[])
{
    int N = 3;
    double A[N*N];
    A[0] = 1; A[1] = 1; A[2] = 7;
    A[3] = 1; A[4] = 2; A[5] = 1;
    A[6] = 1; A[7] = 1; A[8] = 3;
    matrix_invert(N, A);
    //        [ -1.25  -1.0  3.25 ]
    // A^-1 = [  0.5       1.0  -1.5  ]
    //        [  0.25   0.0 -0.25 ] 
    return 0;
} 
```

现在头文件，

```
//  matinv.h

int matrix_invert(int N, double *matrix); 
```

然后是源文件，

```
int matrix_invert(int N, double *matrix) {

    int error=0;
    int *pivot = malloc(N*sizeof(int)); // LAPACK requires MIN(M,N), here M==N, so N will do fine.
    double *workspace = malloc(N*sizeof(double));

    /*  LU factorisation */
    dgetrf_(&N, &N, matrix, &N, pivot, &error);

    if (error != 0) {
        NSLog(@"Error 1");
        free(pivot);
        free(workspace);
        return error;
    }

    /*  matrix inversion */
    dgetri_(&N, matrix, &N, pivot, workspace, &N, &error);

    if (error != 0) {
        NSLog(@"Error 2");
        free(pivot);
        free(workspace);
        return error;
    }

    free(pivot);
    free(workspace);
    return error;
} 
```

# ruby-on-rails - Heroku 上的 db:migrate 会改变生产数据库吗？

> ID：11282748
> 
> 赞同：0
> 
> 时间：2012-07-01T14:25:37.660
> 
> 标签：ruby-on-rails, database, postgresql, heroku, sqlite

我正在使用 Heroku 上的一个小应用程序，我想知道是否`heroku run rake db:migrate`会影响生产数据库。有什么想法吗？

我试过`heroku db:pull`了，但拉动在中途停止了（更不用说它搞砸了我的本地数据库）：

```
Schema:         60% |====================================================================================                                                        | ETA:  00:00:16
Saving session to pull_201207010723.dat..
!!! Caught Server Exception
HTTP CODE: 503
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
      <style type="text/css">
        html, body, iframe { margin: 0; padding: 0; height: 100%; }
        iframe { display: block; width: 100%; border: none; }
      </style>
    <title>Application Error</title></head>
    </head>
    <body>
      <iframe src="//s3.amazonaws.com/heroku_pages/error.html">
        <p>Application Error</p>
      </iframe>
    </body>
    </html> 
```

**附加说明：**本地开发数据库是 sqlite3 和生产数据库（按 Heroku 标准是 postgresql）。默认情况下，devel db 就是这样，我找不到一个很好的教程来转换为 postgresql。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:36:37.867

运行`heroku run rake db:migrate`确实会改变你在 Heroku 上的数据库——所以它会改变你的生产数据库。

# .net - 如何在十六进制的汇编文件中找到方法？

> ID：11282749
> 
> 赞同：4
> 
> 时间：2012-07-01T14:25:53.147
> 
> 标签：.net, reflection, hex, .net-assembly

我有一个测试程序集，我想在文件中找到方法

```
[CompilerGenerated]
public bool get_CreateFlash()
{
    return this.cZBH;
} 
```

我使用十六进制编辑器和模板进行搜索

```
2B * 26 16 02 7B * * * * 0A 2B * 06 2A 
```

其中 * 是任何字节，因为我在 ILSpy 等工具中看不到确切的字节。

我找到了 1500 个匹配项，自然是 getter。不同的是在7B * * * *，像这样

```
"2B 02 26 16 02 7B 1D 00 00 04 0A 2B 00 06 2A"
"2B 02 26 16 02 7B 1E 00 00 04 0A 2B 00 06 2A"
...
etc. 
```

我怎样才能找到我需要的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T08:26:43.550

如果您使用 ILDasm（.NET Framework SDK 的一部分），它将显示相应的代码字节。

要显示它们，您需要在显示方法之前选择 View -> Show Bytes。我整理了一个小示例应用程序来测试它，并得到以下结果：

![在 ILDASM 中反汇编一个简单的属性获取器](../Images/04532deeec6f8e9c57cece8fd02745d8.png)

为了使用这些数据，重要的是要知道“|”左边的字节 在 .dll/.exe 中按顺序出现，而右边的则以 little-endian 编码。考虑到这一点，我在 .exe 中搜索了以下内容（请注意，我已突出显示以 little-endian 顺序排列的字节）：

> 00 02 7b **03 00 00 04** 0a 2b **00** 06 2a

在我的（虽然很小）测试可执行文件中，这个字节序列只出现了一次。

请注意，在上面的屏幕截图中，它还表示方法 RVA（相对虚拟地址）。为了将其转换为文件位置，您需要确定可执行文件的布局。有许多可用的 PE 工具，但我使用`dumpbin`Visual Studio 附带的工具来查看 PE 标头 ( `dumpbin /headers <your exe name>`)。此可执行文件的相关数据：

```
第 1 节标题
   .text 名称
    1824 虚拟大小
    2000 虚拟地址（00402000 到 00403823）
    1A00 大小的原始数据
     200 指向原始数据的文件指针（00000200 到 00001BFF）
       0 指向重定位表的文件指针
       0 指向行号的文件指针
       0 搬迁次数
       0 行号数
60000020 个标志
         代码
         执行读取
```

这里，`.text`节的虚拟地址表示为 0x2000，虚拟大小为 0x1824 字节。由于该方法的 RVA 为 0x2464，因此它必须位于此部分中。输出中的“指向原始数据的文件指针”`dumpbin`表明包含我们方法的部分在可执行文件中从 0x200 开始，因此我们可以计算方法在可执行文件中的偏移量为：

```
（方法 RVA - RVA 部分）+ 文件位置
= (0x2464 - 0x2000) + 0x200
= 0x664
```

转到测试可执行文件中的位置 0x664，我们正在寻找的字节确实可以在那里看到（它们并不完全在这个位置，而是在它之后的几个字节，因为在 IL 字节之前有一个小的方法头）。

# objective-c - Facebook graph api request ,,, 在我的朋友信息旁边获取我的信息

> ID：11282759
> 
> 赞同：1
> 
> 时间：2012-07-01T14:27:14.417
> 
> 标签：objective-c, ios, facebook-graph-api

你知道伙计们，这个请求会返回我的朋友信息：

```
requestWithGraphPath:@"me/friends" 
```

但是我是否也可以使用上述请求获取我的信息，或者我应该发送另一个这样的信息：

```
requestWithGraphPath:@"me" 
```

# facebook - FB 交换令牌 api 缺少 redirect_uri

> ID：11282762
> 
> 赞同：14
> 
> 时间：2012-07-01T14:27:33.723
> 
> 标签：facebook, redirect, facebook-oauth

我正在使用这样的 FB 交换令牌 api：

```
https://graph.facebook.com/oauth/access_token?client_id={client_id}8&amp;client_secret={client_secret}}&amp;grant_type=fb_exchange_token&amp;fb_exchange_token={one_hour_token}&amp;redirect_uri=http%3A%2F%2Fotagz.cloudfoundry.com%2FfacebookCallback 
```

我收到以下错误：

> “消息”：“缺少 redirect_uri 参数。”“类型”：“OAuthException”，“代码”：191

我有我的应用程序 URL：otagz.cloudfoundry.com

我知道关于这个主题还有另一个问题，但没有解决方案，它是从 2010 年开始的。

有人知道redirect_uri 有什么问题吗？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-21T07:15:21.617

如果您使用的是 CURL 命令行工具 - 可能您遇到的问题与我相同：只需将 URL 放在引号中即可。请参阅 Facebook 对此错误的回答：[https ://developers.facebook.com/bugs/1374437326120797](https://developers.facebook.com/bugs/1374437326120797)

我不确定 Facebook 是否使用 Stackoverflow 作为官方沟通方式。你会在这里得到更快的答案：[https ://developers.facebook.com/bugs/](https://developers.facebook.com/bugs/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-10-17T12:12:06.007

有同样的问题，通过从 url 中删除空格来解决它（我从 facebook 网站复制了它，参数之间有几个额外的空格）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:52:44.250

我遇到了你的问题，但我设法用下面的方法解决了它。它不需要重定向

假设您已经获得了短期访问令牌

```
$accessToken;

$graph_url = "https://graph.facebook.com/oauth/access_token?client_id=".$your_app_id."&client_secret=".$your_app_secretkey."&grant_type=fb_exchange_token&fb_exchange_token=".$accessToken;

$result = file_get_contents($graph_url);

parse_str($result, $output);

echo $output[access_token];
echo $output[expires]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-09T05:00:31.203

尝试将参数设置`grant_type`为`client_credentials`. URL 会是这样的：`https://graph.facebook.com/v2.8/oauth/access_token?client_id=XXX&client_secret=XXX&fb_exchange_token=XXX&grant_type=client_credentials`

或者让它更具可读性：

```
$q = http_build_query(array(
    'client_id' => $app_id,
    'client_secret' => $app_secret,
    'fb_exchange_token' => $user_token,
    'grant_type' => 'client_credentials'
));
$url = "https://graph.facebook.com/v2.8/oauth/access_token?$q"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-09-29T11:46:35.873

这可能会帮助一些人

不要将结束正斜杠 (/) 放在 url 之后

正确的 URL = [https://graph.facebook.com/oauth/access_token?client_id=](https://graph.facebook.com/oauth/access_token?client_id=...) ...。

错误的 URL = [https://graph.facebook.com/oauth/access_token/?client_id=](https://graph.facebook.com/oauth/access_token/?client_id=..) ..

# visual-studio - 使用 Visual Studio 创建可执行文件/DLL 文件时如何删除私人信息？

> ID：11282767
> 
> 赞同：2
> 
> 时间：2012-07-01T14:28:22.093
> 
> 标签：visual-studio, visual-c++

我用 Visual Studio 2010 创建了一个 DLL 项目。当我`my_project.dll`用记事本打开时，我找到了项目的路径（例如。`D:\Solutions\my_project\my_project_1\lib\Release\my_project.pdb`）

我的老板想删除有关该项目的任何私人信息。

如何在创建可执行文件/DLL 文件时删除私人信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:35:01.817

查看[PDB 文件：每个开发人员必须知道](http://www.wintellect.com/cs/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx)的内容。

无论如何，您可以使用[/PDBALTPATH（使用备用 PDB 路径）](http://msdn.microsoft.com/en-us/library/dd998269.aspx)删除 PDB 文件的路径。

# facebook - 如何使用 FQL 从朋友照片流中获取所有照片？

> ID：11282770
> 
> 赞同：0
> 
> 时间：2012-07-01T14:28:44.590
> 
> 标签：facebook, facebook-fql

此图形 API 调用：

```
https://graph.facebook.com/<userid>/photos 
```

返回用户在其照片流中的所有照片。

我确实知道如何使用 FQL 从朋友相册中获取照片，但这不是我想要的。

如何在 FQL 中完成上述图形调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:27:38.713

您必须从该用户的流中查找它们。

```
SELECT post_id, app_data.photo_ids FROM stream WHERE filter_key IN (
SELECT filter_key FROM stream_filter WHERE uid = me() AND name = 'Photos'
) AND source_id = me() 
```

查看：

流表[https://developers.facebook.com/docs/reference/fql/stream/](https://developers.facebook.com/docs/reference/fql/stream/)

stream_filter 表[https://developers.facebook.com/docs/reference/fql/stream_filter/](https://developers.facebook.com/docs/reference/fql/stream_filter/)

# java - 每次重新部署应用程序以在 Glass Fish 服务器中获取更新的文件内容

> ID：11282778
> 
> 赞同：1
> 
> 时间：2012-07-01T14:29:46.173
> 
> 标签：java, glassfish

我正在使用 web-inf 目录中的 struts2 动态创建 XML 文件并在 jsp 中调用 XML 文件，但我面临的问题是文件在我覆盖它时没有更新，我每次都需要重新部署。我该如何排序出了这个问题，我应该在 Glasssfish 服务器的哪里创建动态文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:42:55.680

动态创建的文件不应保存在应用程序目录中。

您遇到的是正确的，如果这样做，您必须重新部署应用程序。将文件保存在应用程序目录之外的数据目录中。

如果您的应用程序部署在集群环境中，您必须确保集群中的所有服务器都可以访问数据目录。

# mysql - Django / MySQL：如何进行自治事务（仅提交查询子集）？

> ID：11282779
> 
> 赞同：4
> 
> 时间：2012-07-01T14:29:59.067
> 
> 标签：mysql, django, transactions

我正在使用 Django 和 MySQL。我需要能够做在 Oracle 中称为自治事务的事情，即只提交事务的一部分（或者，更确切地说，在事务中具有事务）。我在两种情况下都需要这个（尽管我认为解决方案是相同的）：

1.  错误记录。我在错误表中记录错误并希望提交这些插入，即使我回滚所有其他事务。

2.  我使用一个表来创建一个序列（使用 TABLE 序列和 LAST_INSERT_ID()，如下所述：http: [//dev.mysql.com/doc/refman/5.0/en/information-functions.html](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html)）。我想获取/更新这个序列，然后提交语句，从而为需要该序列的其他事务解锁表。即使我回滚其他事务，如果表增加也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:36:25.353

有趣的主题，显然 mysql 中没有这样的东西，但是有人建议使用（针对您的日志表问题）myisam 表，因此由于它是外部事务，因此无论如何都会发布数据。

* * *

我正在添加第二个答案，因为我刚刚想出了这个替代方案：您可以做的是处理来自与数据库中另一个用户的另一个连接的日志事务。

Mysql 处理每个用户的连接池，因此它永远不会对主要操作和日志操作使用相同的连接，从而允许您独立提交日志连接。

# c - 在 C 代码中解析 .txt 文件

> ID：11282784
> 
> 赞同：1
> 
> 时间：2012-07-01T14:31:00.667
> 
> 标签：c, parsing, scanf

我必须像这样解析一个 .txt 文件

```
autore: sempronio, caio; titolo: ; editore: ; luogo_pubblicazione: ; anno: 0; prestito: 0-1-1900; collocazione: ; descrizione_fisica: ; nota: ; 
```

在`fscanf`C 代码中。我在通话中尝试了一些格式`fscanf`，但它们都不起作用......

编辑：

> a = fscanf(fp, "autore: %s");

这是我第一次尝试；'autore'、'titolo'、'editore' 等模式不能被`fscanf()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:36:46.473

一般来说，尝试解析输入`fscanf`并不是一个好主意，因为如果输入不符合预期，就很难优雅地恢复。通常最好将输入读入内部缓冲区（使用`fread`或`fgets`），然后在那里解析（使用`sscanf`、`strtok`等`strtol`）。关于哪些函数最好的细节取决于输入格式的定义（你没有给我们；示例输入*不能替代*正式规范）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:23:35.803

下面展示了如何使用`strtok`：

```
char* item;
char* input; // fill it with fgets

for (item = strtok(input, ";"); item != NULL; item = strtok(NULL, ";"))
{
    // item loops through the following:
    // "autore: sempronio, caio"
    // " titolo: "
    // " editore: "
    // ...
} 
```

下面展示了如何使用`sscanf`：

```
char tag[20];
int chars = -1;

if (sscanf(item, " %19[^:]: %n", tag, &chars) == 1 && chars >= 0)
{
    printf("%s is %s\n", tag, item + chars);
} 
```

在这里，格式字符串由以下内容组成：

*   (space) - 告诉解析器丢弃空格
*   19 - 标签中的最大字节数/字符数
*   [^:] - 告诉解析器读取直到遇到冒号字符
*   : - 告诉解析器丢弃冒号字符
*   （空白） - 如上
*   %n - 告诉解析器报告它读取的字节数（检查 &chars）

如果有意外输入，字符数不会更新，因此您必须`-1`在解析每个项目之前将其设置为。

# android - Android：连接有效网址时出现错误 404

> ID：11282789
> 
> 赞同：0
> 
> 时间：2012-07-01T14:32:41.160
> 
> 标签：android, http-status-code-404, httpurlconnection

我正在尝试使用以下代码连接有效的 URL，但出现 404 错误...

```
URL url = new URL(urlString);
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.setRequestMethod("GET");
urlConnection.setConnectTimeout(ConnectivityHelper.CONNECT_TIMEOUT);
urlConnection.setReadTimeout(ConnectivityHelper.READ_TIMEOUT);
urlConnection.setRequestProperty("Accept-Encoding", "gzip, deflate"); 
```

当我打电话

```
urlConnection.getInputStream() 
```

我崩溃了，因为 httpResponse 代码是 404

我不明白的是该网址确实存在：[http](http://www.plongeurs.tv/xml/itunes.xml) : //www.plongeurs.tv/xml/itunes.xml 我使用 wget 跟踪它，我得到了

```
--2012-07-01 16:24:52--  http://www.plongeurs.tv/xml/itunes.xml
Résolution de www.plongeurs.tv (www.plongeurs.tv)... 94.23.134.238
Connexion vers www.plongeurs.tv (www.plongeurs.tv)|94.23.134.238|:80... connecté.
requête HTTP transmise, en attente de la réponse... 200 OK 
```

为什么我的应用程序出现 404 错误？仅供参考，这是我发现有此问题的唯一网址，在使用 1000 多个 rss 提要对其进行测试后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:38:36.990

我不相信，我只是尝试指定一个用户代理，现在它可以工作了！

connection.setRequestProperty("用户代理", "mozilla");

# android - 由于未知原因，应用程序启动时出现空指针异常

> ID：11282790
> 
> 赞同：2
> 
> 时间：2012-07-01T14:33:00.613
> 
> 标签：android, exception, nullpointerexception

```
07-01 17:47:23.517: E/AndroidRuntime(932): FATAL EXCEPTION: main
07-01 17:47:23.517: E/AndroidRuntime(932): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3938)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.ActivityThread.access$1300(ActivityThread.java:123)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.os.Looper.loop(Looper.java:137)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-01 17:47:23.517: E/AndroidRuntime(932):  at java.lang.reflect.Method.invokeNative(Native Method)
07-01 17:47:23.517: E/AndroidRuntime(932):  at java.lang.reflect.Method.invoke(Method.java:511)
07-01 17:47:23.517: E/AndroidRuntime(932):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-01 17:47:23.517: E/AndroidRuntime(932):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-01 17:47:23.517: E/AndroidRuntime(932):  at dalvik.system.NativeStart.main(Native Method)
07-01 17:47:23.517: E/AndroidRuntime(932): Caused by: java.lang.NullPointerException
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
07-01 17:47:23.517: E/AndroidRuntime(932):  at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
07-01 17:47:23.517: E/AndroidRuntime(932):  ... 11 more 
```

启动应用程序时出现上述错误。此错误并非总是发生，而是偶尔发生一次（每 20-30 次启动一次），并且不会连续发生两次

谁能告诉我这个错误是从什么代码（xml或java）生成的以及如何解决它？
这是我的代码：

```
public class ProjectBunkitActivity extends Activity {
    Integer z=0,k,i=0;
    static String s1;
    static String s2;
    static String s3;
    static int cpd=0;
    int day,month,year;

    String [] p1,p2,p3,p4,p5,p6;
    String so[]=new String[12];
    String subj1[]=new String[20];

    static String subj2[]=null;
    String s,sn;

    Button b1,b2,b3;
    Button add,sub;
    Button btn;
    EditText t1,t2,t3;
    Exception x;
    LinearLayout linearlayout;
    DatePicker datePicker;
    Date picdate;

    static int pos=0;

    /** Called when the activity is first created. */
    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SharedPreferences prefsfile = getSharedPreferences("myfile",0); 
        linearlayout=(LinearLayout)findViewById(R.id.leny);
        t3=(EditText)findViewById(R.id.cls2);

        if( prefsfile.getInt("cpd",0)!=0 && prefsfile.getInt("nos",0)!=0 && Timetablledisplay.flag==0 ){

            Intent i=new Intent(ProjectBunkitActivity.this,Timetablledisplay.class);
            ProjectBunkitActivity.cpd=prefsfile.getInt("cpd", 0);
            ProjectBunkitActivity.pos=prefsfile.getInt("nos", 0);
            startActivity(i);

            finish();

        }
        else{

            Timetablledisplay.flag=1;

        }

        b1=(Button)findViewById(R.id.btn);

        datePicker = (DatePicker) findViewById(R.id.datePicker1);

        t1=(EditText)findViewById(R.id.tdys);
        t2=(EditText)findViewById(R.id.cls1);

        add=(Button)findViewById(R.id.sub1);
        sub=(Button)findViewById(R.id.add);

        datepicupdate();

        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                    s1=t1.getText().toString();
                    s2=t2.getText().toString();
                    s3=t3.getText().toString();
                if(s1.compareTo("")!=0 && s2.compareTo("")!=0 && linearlayout.getChildCount()!=0){

                    s1=t1.getText().toString();
                    s2=t2.getText().toString();
                    s3=t3.getText().toString();
                    cpd=Integer.parseInt(s2);

                    int l=0;
                    pos=linearlayout.getChildCount(); 
                    String subj[]=new String[pos];
                    try{

                        for(int j=0;j<pos;j++) 
                        {   

                            EditText edt1=(EditText)findViewById(j);
                            sn=edt1.getText().toString();
                            subj[l++]=sn;

                        }

                    }
                    catch(Exception e)
                    {

                    }  

                    subj2=subj;

                    Toast toast=Toast.makeText(ProjectBunkitActivity.this,subj2[0],Toast.LENGTH_SHORT);
                    toast.show();

                    Intent i=new Intent(ProjectBunkitActivity.this,TimetableEdit.class);
                    i.putExtra("course",s1);
                    i.putExtra("classes", s2);
                    i.putExtra("days", s3);
                    i.putExtra("subject",subj);
                    startActivity(i);

                }else {

                    Toast toast=Toast.makeText(ProjectBunkitActivity.this,"Please fill all field before proceeding",Toast.LENGTH_SHORT);
                    toast.show();

                }

            }
        });

        add.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                try{
                    pos=linearlayout.getChildCount(); 
                    EditText edt=(EditText) new EditText(getApplicationContext());
                    edt.setId(pos);
                    pos++;
                    s=String.valueOf(pos);
                    edt.setHint("Enter the subject name");
                    linearlayout.addView(edt);

                }
                catch(Exception e)
                {

                }
            }
        });   

        sub.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try{

                    pos=linearlayout.getChildCount(); 
                    s=String.valueOf(pos);
                    linearlayout.removeViewAt(pos-1);
                    pos--;

                }catch(Exception n){

                }
            }  

        });

    }

    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub

    }

    private void datepicupdate() {
        // TODO Auto-generated method stub
        try{

            if(year!=0){

                datePicker.updateDate(year, month, day);

            }

        }catch (Exception e) {
            // TODO: handle exception

        }

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        try{
            int jaz=Integer.parseInt(t2.getText().toString());

            day = datePicker.getDayOfMonth();
            month = datePicker.getMonth();
            year = datePicker.getYear();

            SharedPreferences.Editor editor = getSharedPreferences("myfile",0).edit();
            editor.putString("text", t1.getText().toString());
            editor.putInt("cpd", jaz);
            editor.putInt("nos", linearlayout.getChildCount());
            editor.putInt("day",day);
            editor.putInt("month",month);
            editor.putInt("year",year);

            if(pos==0)
            {

                pos=linearlayout.getChildCount();

            }

            editor.putInt("pos",pos);   

            int l=0;
            try{

                for(int j=0;j<=pos-1;j++) 
                {   

                    EditText edt1=(EditText)findViewById(j);
                    sn=edt1.getText().toString();
                    editor.putString("sub0"+l,sn);
                    l++;

                }
            }
            catch(Exception e)
            {

            } 

            editor.commit();
        }catch (Exception e) {
            // TODO: handle exception
        }

    }

    @Override
    protected void onRestart() {
        // TODO Auto-generated method stub
        super.onRestart();

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        try{

            SharedPreferences prefs = getSharedPreferences("myfile",0); 
            String restoredText = prefs.getString("text", null); 

            String[] sw=new String[prefs.getInt("cpd",0)];

            cpd = prefs.getInt("cpd", 0);
            int restoredText2= prefs.getInt("nos", 0);
            int pos1=prefs.getInt("pos",2);
            int l=0;
            if (restoredText != null) {
                t1.setText(restoredText, EditText.BufferType.EDITABLE);
                t2.setText(""+cpd, EditText.BufferType.EDITABLE);
                t3.setText(""+restoredText2, EditText.BufferType.EDITABLE);
                day= prefs.getInt("day", 1);
                month= prefs.getInt("month", 1);
                year= prefs.getInt("year",2012);

                datepicupdate();

                linearlayout.removeAllViews();
                for(int j=0;j<=pos1-1;j++) 
                {    

                    sw[l]=prefs.getString("sub0"+l,null); 

                    EditText edt1=(EditText) new EditText(getApplicationContext());
                    edt1.setId(j);
                    edt1.setHint("Enter the subject name");
                    edt1.setText(sw[l]);
                    linearlayout.addView(edt1);
                    l++;

                } 

            }

        }catch (Exception e) {
            // TODO: handle exception

        }
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();

    }

} 
```

# sharepoint - Dataware house中的Cubes和Dimensions有2个数据库

> ID：11282793
> 
> 赞同：-1
> 
> 时间：2012-07-01T14:33:23.040
> 
> 标签：sharepoint, ssas

我有两个关系数据库（Oracle 和 DB2），每个都在独立服务器中，并且具有相似的（例如：oracle 中的 customerName 和 DB2 中的 custName 是“John”）数据，但模式不同，我有只读权限“只需选择声明“。我需要从两个数据库创建数据仓库，并使用带有连接模型的多维数据集和维度。我如何在我的环境中做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:43:00.067

为了在 SharePoint 2010 中使用性能点服务的最佳功能，您需要一个 SQL Server Analysis Services 多维数据集。这要求您将这两个数据库导入 SQL Server 数据库（现在称为“数据仓库”），将数据转换为适当的[星型模式](http://en.wikipedia.org/wiki/Star_schema)，然后使用[Business Intelligence Development Studio](http://msdn.microsoft.com/en-us/library/ms173767%28v=sql.105%29.aspx)为您的数据创建适当的多维数据集。

# mysql - MySQL - 显示博客档案：2012 年 3 月、2012 年 4 月、2012 年 5 月

> ID：11282795
> 
> 赞同：1
> 
> 时间：2012-07-01T14:33:57.403
> 
> 标签：mysql, sql

我已经建立了一个博客，现在想按月和年显示存档博客文章的列表，但要进行计数，如下所示：

```
January 2012  ---  1,054
February 2012 ---  403
March 2012 ------  972
April 2012 ------  103
... 
```

我有一个名为“blog_articles”的表，其中包含以下主要字段：

```
article_id  INT
published   DATETIME 
```

做这个的最好方式是什么？我应该使用我的服务器端语言 (VBScript/ASP) 来循环几个月，为每一个单独的 SQL 计数查询还是我应该做所有这一切都是 MySQL？如果你在 MySQL 中说全部，你能建议一些东西来帮助我吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:37:35.457

您可以使用此查询然后遍历记录集

```
Select CONCAT( MONTHNAME(published) , ' ' , YEAR(published)) as monthyear, count(*) from blog_articles GROUP by CONCAT( MONTHNAME(published) , ' ' , YEAR(published)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T14:39:38.600

尝试这个：：

选择 CONCAT( MONTH(published) , ' ' , YEAR(published)) 作为monthyear, count(*) from blog_articles GROUP by YEAR(published), MONTH(published)

# c++ - 指向指针向量的指针映射错误

> ID：11282797
> 
> 赞同：0
> 
> 时间：2012-07-01T14:34:03.140
> 
> 标签：c++

这个会有点刺痛：\。这是我的地图声明：

```
std::map<std::string, std::shared_ptr<std::vector<std::shared_ptr<BaseEntity> > > > m_EntityByClassList; 
```

真的，它这么长的唯一原因是智能指针声明，几乎就是这样：

```
std::map<std::string, std::vector<BaseEntity *> *> m_EntityByClassList; 
```

虽然读起来还是很痛苦。这是我的问题。当我尝试将对象插入地图中的新向量时，出现“试图读取访问冲突”运行时错误。

产生此错误的代码块是这样的，

```
for(;;)
    {
        file >> classname;
        if(file.eof())
            break;
        m_EntityList.push_back( m_factory.createInstance(classname));
        m_EntityList.back()->Initialize();
        m_EntityList.back()->GetParams(file);
        m_EntityByNameList[m_EntityList.back()->GetName()] = m_EntityList.back();
        m_EntityByClassList[classname]->push_back(m_EntityList.back());
    } 
```

现在是的，肯定有很多代码我在这里省略了，主要是因为这里有 35 或 36 个对象和文件进入这个简介，所以我只想列出相关的东西。file 是`std::ifstream`一个打开的文件， classname 是 an `std::string`， m_EntityList 是 a `std::vector<std::shared_ptr<BaseEntity> >`（不应该重要）， m_EntityByNameList 是具有索引类型`std::string`和对象类型`std::shared_ptr<BaseEntity>`（也应该不重要）的映射，然后是上面的映射。最后一个上面的所有陈述都完全正确，结果经过验证。如果省略最后一行，它会编译并工作得很好。

所以这个问题与其余文件无关，只是关于尝试向地图添加矢量并向其添加对象。如果您觉得您还需要其他任何东西，请询问，我会考虑将其张贴在这里。发布所有内容很容易是 4000-4500 行。

Annnnyway，我从中学到的关于地图的知识[是](http://www.cplusplus.com/reference/stl/map/operator%5B%5D/)，使用带有尚未存在的索引的 [ ] 运算符将为您创建一个索引以及该索引处的默认构造对象。所以我从中得到的是，`std::shared_ptr<std::vector<std::shared_ptr<BaseEntity> > >`将在索引类名处创建一个，这意味着我应该能够访问该向量，无论它是事先创建的还是之前创建的。那么有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:50:48.383

在地图上使用`operator[]`不存在的键确实会插入一个新的`shared_ptr`. 但是，您没有考虑到 new`shared_ptr`将是空的（即空指针），因此取消引用它会导致未定义的行为。不会创建新向量 - 因为您使用的是指向向量的指针，所以您需要自己分配一个新向量。

如果您的地图的值类型是向量本身而不是指向它的指针，它将按照您的预期自动创建。

# google-bigquery - BigQuery 查询/分析定价如何运作？

> ID：11282798
> 
> 赞同：3
> 
> 时间：2012-07-01T14:34:15.283
> 
> 标签：google-bigquery

我有一个包含大约 3400 万行的[BigQuery](http://en.wikipedia.org/wiki/BigQuery)表（它会在几个月内增长到 ~500M）。我得到了存储定价，但我并不真正了解查询/分析定价的工作原理。

例如，如果我运行一个简单选择的查询，它从大约 20 条记录中返回 3 列，它表示已处理 644 MB。即使我删除了`where`子句中的列或条件，它仍然显示我正在处理 6xx MB 的数据。

有趣的是，如果我从表中运行 select count(*)，它会报告 0 个字节已处理。

BigQuery 的用例之一是创建仪表板和临时报告。但是，如果针对该表进行的每两个查询要花费 0.03 美元，我看不出这如何可行。

我错过了什么吗？是否有减少为简单数据访问处理的数据量的策略？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T02:54:05.583

请参阅[BigQuery 定价文档](https://developers.google.com/bigquery/docs/pricing#table)。基本上，您需要为所访问的列的全部大小付费，因为每个 BigQuery 查询都会读取提到的每一列。例如，

```
select foo, bar from table1 where foo=1 
```

将向您收取访问 table1 中 foo 和 bar 列的整个大小的费用。

COUNT(*) 读取表元数据以获取计数，因此它不需要任何成本。

降低成本的一种方法是将数据拆分为多个表。您可以通过指示逗号分隔的表（如 中）在单个查询中组合表`select foo from table1,table2`。您还可以缓存结果（BigQuery 不会自行进行任何缓存）。

# map - Clojure 映射键，键名中带有空格

> ID：11282806
> 
> 赞同：10
> 
> 时间：2012-07-01T14:35:30.447
> 
> 标签：map, clojure

我对 Clojure 很陌生。我有一个来自数据库的结果映射，它包含关键值，例如：

```
{:Unique Product ID "09876" :ProductName "XYZ"} 
```

我想从地图中检索值，但在获取唯一产品 ID 时遇到问题。

```
ProductID (str ( map-name ":Unique Product ID")) 
```

产品名称可以正常使用：

```
ProductName (str ( map-name :ProductName")) 
```

我不确定如何处理 Product ID 字段键中的空格。我应该如何从地图中检索该键的值？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T15:09:51.020

尝试（关键字“唯一产品 ID”）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-04T23:04:55.733

空格*不是*关键字中的有效字符，您正在尝试做一些几乎肯定会在未来引起痛苦的事情。

请注意，关键字函数不会验证它的输入，所以恐怕@jeff-johnston 是不正确的。

在这里进行冗长的讨论：

[https://groups.google.com/d/topic/clojure/WvXYkvLoQhI/discussion](https://groups.google.com/d/topic/clojure/WvXYkvLoQhI/discussion)

clojuredocs 在讨论后更新了新的文档字符串，请参见此处：

[http://clojuredocs.org/clojure_core/clojure.core/keyword](http://clojuredocs.org/clojure_core/clojure.core/keyword)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-01T22:08:05.410

您可以`(keyword)`按照 Jeff 的指示使用，但我认为，如果您将从数据库查询返回的映射转换为键没有空格的映射，我认为一般情况下会更好。我发现此功能可用于以下目的：

```
(defn despace [m] 
  (zipmap (map #(keyword (clojure.string/replace (name %) " " "_")) (keys m))
          (vals m))) 
```

然后使用下划线代替空格：

```
(:Unique_Product_ID (despace {(keyword "Unique Product ID") "09876" :ProductName "XYZ"}))
#=> "09876" 
```

# php - 将选择值传递给 PHP：$_POST 为空

> ID：11282807
> 
> 赞同：0
> 
> 时间：2012-07-01T14:35:48.370
> 
> 标签：php, jquery

我在这里阅读了很多讨论以找到我的问题的解决方案（例如：[如何使用 post 或 get 在表单中传递选择列表的 id 值？](https://stackoverflow.com/questions/7322847/how-to-pass-the-id-value-of-a-select-list-in-a-form-using-post-or-get)）但对我来说不起作用。

我有一个表格，每行都有一个表格：

```
<select name="form_type" class="textselect">
        <?php foreach($SContentType as $key => $val){ ?>
         <option value="<?php echo $key ?>" <?php if($thisObjs[$k]['type']==$key) echo "SELECTED" ?>><?php echo $val ?></option>
        <?php } ?>
</select> 
```

当我尝试获取该`$_POST`值时，我拥有除`Select`.

这是我的`$_POST`印刷品

```
 Array ( 
      [a] => ACT_ARTICLES 
      [p] => SUBACT_MODIMAGE 
      [form_id] => 6454
      [obj_id] => 8754 
      [form_description] => ) 
```

如您所见，除了 form_type（选择的变量）之外，我拥有表单的所有变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:32:37.920

根据选择框的定义，您的代码应该可以正常工作。它是否放置在`<form>`和`</form>`标签内？

它可能与您的多个表行有关。尝试做：

```
<select name="form_type[]"> 
```

现在出现了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:22:53.507

当您将问题标记为 jquery 时，这是一种 jquery 方法。`..`用于您想为更具体的 DOM 元素提供的任何特定类或 id 。

```
$(".textselect .. option:selected").text() 
```

# javascript - 检测样式表是否无法加载（不适用于 Firefox）

> ID：11282808
> 
> 赞同：3
> 
> 时间：2012-07-01T14:35:49.817
> 
> 标签：javascript, jquery, css, loading, conditional-statements

我拼凑了一个来自不同来源的脚本，这有助于我在样式表无法加载时设置一些备用方案（特别是对我而言，Pictos 服务器并不总是可靠的）。

这很好用，但由于某种原因在 Firefox 上失败，它不处理 if 语句中的任何内容。我已经尝试通过 JSHint 运行它，但没有出现任何严重的问题。

有任何想法吗？

```
$(document).ready(function(){
    $.each(document.styleSheets, function(i,sheet){
      if(sheet.href==='http://get.pictos.cc/fonts/357/9') {
        var rules = sheet.rules ? sheet.rules : sheet.cssRules; // Assign the stylesheet rules to a variable for testing

        $('body').addClass('pictos-working');
        $('.pictos-fallback').hide(); // Hide fallbacks

        // If the stylesheet fails to load...
        if (rules.length === 0) {
            $('.pictos').hide(); // Hide Pictos tags so we don't get random letters
            $('body').removeClass('pictos-working'); // Remove 'working' class
            $('.pictos-fallback').show(); // Show fallbacks
        }
     }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:40:58.537

您的样式表检测方法不可靠。`cssRules`是`null`当样式表来自不同的域时，因为[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

不是通过对象检测 css 规则的存在，而是`cssRules`检查是否应用了样式表中的规则：

```
if ($('selector').css('property') === 'expectedvalue') {
    // Loaded
} else {
    // Not loaded.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:45:18.643

只是一些可能有帮助的改进建议：

为什么嵌套if？由于您只有两种情况，请使用 if then else .. 当文件未加载时，您确定 cssRules 为零吗？也许有一些标题或元数据加载..你在哪里找到这个属性？

我刚刚发现的东西：[http ://www.quirksmode.org/dom/w3c_css.html](http://www.quirksmode.org/dom/w3c_css.html)

# php - php比较日期

> ID：11282809
> 
> 赞同：0
> 
> 时间：2012-07-01T14:35:56.287
> 
> 标签：php, mysql, pdo

我有两个字段的表

```
competition {stateTime, endTime} 
```

当我插入该表时，我想确保我要插入的值不在该表中任何行的周期内，我键入此函数（PDO 数据库）

```
function isCompetitionInAnotherCompetition($startTime, $endTime) {
        $query = "SELECT * FROM competition";
        $sth = $this->db->prepare($query);
        $sth->execute(array());
        while ($row = $sth->fetch()) {
            if ($startTime >= $row['startTime'] && $startTime <= $row['endTime'])
                return true;
            if ($endTime >= $row['startTime'] && $endTime <= $row['endTime'])
                return true;
        }
        return false;
    } 
```

但效果不好，数据库中的每个日期都是`yyyy-mm-dd`，例如`2012-01-15`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:15:35.153

我可以建议不要编写一个函数来测试存在并返回一个返回记录的布尔值，这样你以后可以测试是否没有返回记录，但如果有的话，你可以在需要时使用它们。正如 Alvin Wong 建议的那样，你可以`BETWEEN`在你的 sql 中使用，所以你会得到这样的东西。

```
function getCompetitionsBetween($startTime, $endTime) {     

    $startTime = date("Y-m-d", $startTime);
    $endTome = date("Y-m-d", $startTime);

    $query = "SELECT * FROM competition 
               WHERE start_time BETWEEN ? AND ? 
               OR end_time BETWEEN ? AND ?";

    $sth = $this->db->prepare( $query );

    $sth->execute( array($startTime, $endTime, $startTime, $endTime) );

    return $sth->fetchAll();
} 
```

后来/其他地方

```
$competitions = getCompetitionsBetween($startTime, $endTime);

if (empty(competitions)) {
    $this->save();
} else {
    echo ('sorry the following competitions conflict with these dates');
    foreach($competitions as $k => $v) {
        echo ($k . ':' . $v);
    }
} 
```

# iphone - 如何向 Game Center 提交带一位小数的分数？

> ID：11282812
> 
> 赞同：-3
> 
> 时间：2012-07-01T14:36:33.450
> 
> 标签：iphone, objective-c, ios, xcode, game-center

我想将我的小数点后分数发送到 Game Center。我可以这样做吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:48:55.687

您只能将 64 位整数作为分数提交到排行榜。从[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/LeaderBoards/LeaderBoards.html)中：

> 对于 Game Center，分数只是您的应用程序报告的 64 位整数值。您可以自由决定分数的含义，以及您的应用程序如何计算它。当您准备好将排行榜添加到您的应用程序时，您可以在 iTunes Connect 上配置排行榜，以告知 Game Center 应如何格式化得分并将其显示给玩家。此外，您还提供本地化字符串，以便分数可以以不同的语言正确显示。在 iTunes Connect 中配置排行榜的一个关键优势是 Game Center 应用程序可以显示您的游戏得分，而无需您编写任何代码。

该文档页面应该告诉您有关格式化您的分数的信息。听起来为了显示类似浮动的乐谱，您必须修改 iTunes Connect 中的格式设置。

尝试这个 ：

```
- (IBAction)setScore 
{      
     float score = (float)self.currentScore / 100.0f;
     currentScoreLabel.text = [NSString stringWithFormat: @"%f", score]; 
     NSLog(@"%lld", self.currentScore);
} 
```

# linux - linux下高级mp3播放器库

> ID：11282817
> 
> 赞同：0
> 
> 时间：2012-07-01T14:37:19.177
> 
> 标签：linux, embedded, mp3

我需要在基于 Linux 的嵌入式应用程序中添加一些 mp3 文件播放功能。到目前为止，我使用了系统调用 ( `mpg123 -qm list of mp3 files`)。但是现在我没有播放列表的所有元素，只有在我准备好前一个时才能获得下一个。使用 mpg123 意味着我在轨道之间有一些愚蠢的噪音，因为我总是必须重新启动 mpg123 二进制文件。

我四处寻找一些图书馆，发现了 libmad、lame、sdl 和 co。但一开始处理它们似乎有点过于复杂。我发现 fmod (http://www.fmod.org/index.php/download) 库易于使用。但它只能以二进制格式提供，这不适合我基于 ARM 的目标（更不用说许可问题）。有人知道任何能够播放类似于 fmod 的 mp3 文件的类似开源库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:50:50.090

`mpg123`有一个[API](http://www.mpg123.de/api/)，也许你可以使用它而不是调用二进制文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:57:51.353

[好的，最后在 houbysoft 的提示的帮助下，我在这里](http://hzqtc.github.com/2012/05/play-mp3-with-libmpg123-and-libao.html)找到了一个使用 libmpg123 和 libao 的解决方案，并且通过一些调整，我设法获得了非常流畅的逐个文件播放。谢谢提示！

# scheme - 这两个 Scheme 函数有什么区别？

> ID：11282821
> 
> 赞同：1
> 
> 时间：2012-07-01T14:38:09.653
> 
> 标签：scheme, the-little-schemer

1.  ```
    (define self-add
    (let ((x 0))
      (lambda ()
        (set! x (+ x 1))
        x))) 
    ```

> (自加) => 1
> 
> (自加) => 2
> 
> (自加) => 3
> 
> (自加) => 4

```
 (define self-add1
    (lambda ()
      (let ((x 0))
        (set! x (+ x 1))
        x))) 
```

> (自加1) => 1
> 
> (自加1) => 1
> 
> (自加1) => 1

请告诉我如何理解以上两个功能之间的区别？提前非常感谢！最好的祝福。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T15:21:57.183

第一个函数定义了一个`x`具有初始值的局部变量`0`，*然后*将 lambda 特殊形式绑定到名称`self-add`- 所以`x`被 lambda“包围”（这就是为什么我们说 lambda from 表现为[**闭包**](http://en.wikipedia.org/wiki/Closure_(computer_science))）并且将是*相同*的对于所有的调用`self-add`（你可以说它`x`被 记住了`self-add`），每次调用它的值`x`都会加一。

第二个函数将 lambda 绑定到过程，*然后*`x`在 lambda 内部定义一个局部变量-`x`每次调用时都会重新定义，并且对于所有调用`self-add1`都将*不同*`x`：因此永远不会被“记住”，`self-add1`并且每次过程都重新创建被调用，初始化`0`然后递增，总是返回 value `1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:53:08.813

第一个功能是*闭包*。您在函数的词法范围内创建`x`变量，并且该变量在调用之间保持其值。

附加信息：

*   [http://en.wikipedia.org/wiki/Closure_(computer_science)](http://en.wikipedia.org/wiki/Closure_(computer_science))
*   [什么是词法作用域？](https://stackoverflow.com/questions/1047454/what-is-lexical-scope)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:02:05.710

第一个函数是一个闭包，而第二个函数每次都简单地返回相同的函数，这使得 x = 0 然后加一个并返回结果。

# php - 从 drupal 7 模块输出动态 php 内容

> ID：11282822
> 
> 赞同：2
> 
> 时间：2012-07-01T14:38:14.807
> 
> 标签：php, drupal-7

我在 Drupal 7 中编写了一个模块来输出项目管理应用程序的概览页面。但是我不确定如何在块输出中引用 php 变量。该块内容将通过主内容区域显示。

我最初认为我可以做这样的事情（即完整路径表示图像的路径，该图像将根据返回的数据库查询动态变化）。

```
$block['content'] = ("<div><p>Overview stuff <?php echo $fullPath?></p></div>"); 
```

但是 php 元素没有通过，我认为这不是正确的方法。我还没有任何使用 .tpl.php 文件的经验，但这可能是要走的路。我已经在谷歌上检查了一个解决方案，目前正在浏览文档，但还没有找到任何东西。

谁能给我一个想法，我应该怎么做？

非常感谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:46:46.780

我会做类似的事情

```
 $block['content'] = array(
     '#markup' => t('Overview stuff') . ' ' . $fullPath,
     '#prefix' => '<div><p>',
     '#suffix' => '</p></div>',
 ); 
```

# php - 使用正则表达式替换搜索 MySQL 数据库

> ID：11282824
> 
> 赞同：2
> 
> 时间：2012-07-01T14:38:23.623
> 
> 标签：php, mysql, regex, search

我想制作一个产品搜索引擎，用户输入产品代码并返回结果，这很容易。

但是，我希望能够补偿看起来像字母的数字，反之亦然。

例如，用户键入 6O12l，但产品代码实际上是 60121。

我需要在 SQL 查询中添加什么来恢复所有带有 6O12l 和/或 60121 的产品？

* * *

到目前为止，我有这个不起作用，无论我输入什么，它每次都会返回相同的结果：

```
$searchString = $_POST['query'] ;
$searchString = preg_replace('#\W#', '', $searchString);

$firstLetter = substr($searchString, 0, 1) ;

include("db.php") ;

$result = $dbh->prepare("SELECT productCode
                     FROM products
                     WHERE productCodeREGEXP '6[O0]12[1l]'
                     AND productCode LIKE '$firstLetter%'") ;
$result->execute() ;

while($row = $result->fetch(PDO::FETCH_ASSOC)) {
echo $row['productCode'].'<br />' ;
} 
```

* * *

我设法让它工作，但我遇到了一个新问题。

我正在使用 str_replace 将字母替换为用户查询字符串中的数字，反之亦然，但它仅适用于其中一个，而不适用于两者：

```
$qString = str_replace(array('o', 'l', '0', '1'), array('[O0]', '[1l]', '[O0]', '[1l]'), $searchString) ; 
```

这给了我一个错误的输出，例如 A[[1l]l]BC 而不是 A[1l]BC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:42:13.397

用这个：

```
SELECT * from products
where code REGEXP '6[O0]12[1l]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:43:02.233

你有带字母的产品代码吗？您可以在运行查询之前将查询字符串转换为所有数字。这是最容易做的事情，而且比测试两者都要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T14:46:32.983

您无法使用正则表达式有效地搜索数据库。但是，您可以转换您的数据以便以规范化的形式存储，并使用规范化的查询字符串进行搜索，例如所有`O`' 到零，`I`以及`l`' 到一个等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:05:13.147

我解决了：D

作为参考，我在 PHP.net 上找到了这个函数：

```
function search_replace($s,$r,$sql)
{ $e = '/('.implode('|',array_map('preg_quote', $s)).')/';
$r = array_combine($s,$r);
return preg_replace_callback($e, function($v) use ($s,$r) { return $r[$v[1]]; },$sql);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-16T12:31:05.130

另外一个选项

```
// regex expresssion 
// str_replace goes in order, first change letters to numbers, then change to the regex
// 6012ol becomes 6[0O][1l]2[0O][1l]
$regexString = str_replace(array('o', 'l', '0', '1'), array('0', '1', '[0O]', '[1l]'), $searchString);

// like expression, allows the database to make the initial filter, _ is the single character match
// 6012ol becomes 6__2__
$likeString = str_replace(array('o', 'l', '0', '1'), '_'), $searchString);

$filt1 = "(productCode LIKE '$likeString%')"; // last % allows for partial matches
$filt2 = "(productCode REGEXP '$regexString')";

// now query, with the like filter first
$dbh->prepare("SELECT productCode
                      FROM products
                      WHERE $filt1 AND $filt2
              ") ; 
```

# php - 匹配查询字符串的正则表达式包括数组

> ID：11282826
> 
> 赞同：2
> 
> 时间：2012-07-01T14:38:39.087
> 
> 标签：php, regex

```
preg_match(#(?:([a-zA-Z-]+):)?(?://(?:([a-zA-Z0-9_!$&\'()*+,;=._~%-]+)(?::([a-zA-Z0-9_!$&\'()*+,;=._~%-]*))?@)?([a-zA-Z0-9-._]+)(?::([0-9]*))?)?([a-zA-Z0-9_!$&\'()*@+,:;=._~/%-]*)(?:\\?([0-9a-zA-Z!$&\'()*@+,:;=._~%-]*))?(?:\\#(.*))?#, $uri, $m)); 
```

上面的正则表达式用于匹配 url，结果应该是 m[1] = scheme m[2] = user m[3] = pass m[4] = host m[5] = port m[6] =路径 m[7] = 查询字符串 m[8] = 片段

它运行良好，除非 queryString 包含数组，例如： ?ar[k1]=v1&ar[k2]=v2

我的问题是： 1\. 正则表达式中锐利 # 的含义是什么 2.如何修改正则表达式以使其匹配 queryString 包含数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T14:42:06.337

您最好使用[`parse_url`](http://www.php.net/parse_url), 捕获查询字符串，然后您可以使用它[`parse_str`](http://www.php.net/parse_str)来获取键 - > 值对数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:00:27.720

1.正则表达式中的尖锐（＃2nd）表示[URL的一部分](http://en.wikipedia.org/wiki/Uniform_resource_locator)

scheme://username:password@domain:port/path?query_string `#`fragment_id

2.[解析一个 URL](http://php.net/manual/en/function.parse-url.php)并返回它的组件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T14:41:03.950

改用`parse_str`： http: [//php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

这完全符合您的要求并且是内置的，最重要的是，没有正则表达式（看看那个怪物）：s。

顺便直接回答你的问题，`#`只是正则表达式的分隔符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T15:24:30.637

这个正则表达式似乎非常严格地根据[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)调整 URI 的语法，这实际上不允许纯文本`[`或[查询](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)`]`内部：

> ```
>  query       = *( pchar / "/" / "?" )
>   pchar       = unreserved / pct-encoded / sub-delims / ":" / "@"
>   unreserved  = ALPHA / DIGIT / "-" / "." / "_" / "~"
>   pct-encoded = "%" HEXDIG HEXDIG
>   sub-delims  = "!" / "$" / "&" / "'" / "(" / ")"
>               / "*" / "+" / "," / ";" / "=" 
> ```

现在，如果您也想允许这些字符，请将其用于现有正则表达式中的查询部分：

```
… (?:\\?([0-9a-zA-Z!$&\'()*@+,:;=._~%[\]-]*))? … 
```

# jquery - 带有输入更新的 Jquery 序列化

> ID：11282827
> 
> 赞同：0
> 
> 时间：2012-07-01T14:38:42.697
> 
> 标签：jquery, forms, serialization

我对 jquery 和序列化方法有疑问。

我有一个表格，我通过`$.ajax`方法发送。在这种方法中，我使用`serialize();`. 在我调用序列化之前，我使用了一个修改 2 个输入文本值的函数，但是在序列化 2 个输入时会发送旧值。

这是我的代码。

```
$('#formANAGRAFICA3').submit(function() { 
    codeAddress();
    var $form = $('#formANAGRAFICA3'); 
    $.ajax({
        type: 'post',
        data : $form.serialize(),
        url: $form.attr( 'action' ),
        success: function(data, textStatus, jqXHR) {
            $('#editANAGRAFICA3').show();
        }
    });
    return false;
});

function codeAddress() { 
    var address = 'my value';
    geocoder.geocode( {'address': address}, function(results, status) { 
        if (status == google.maps.GeocoderStatus.OK) { 
            var pos = results[0].geometry.location;
            map.setCenter(pos);
            marker.setPosition(pos);
            document.getElementById("aTitle33").value = pos.lat(); 
            document.getElementById("aTitle34").value = pos.lng();
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
} 
```

当它发送表单时，接收到的数据不会更新，即使我使用该`codeAddress`函数修改了输入文本值。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:25:12.067

`codeAddress()`不会立即修改您*的*输入字段。相反，它会发出一个 AJAX（异步）请求，并在响应到来时更新您的输入。与此同时，您的其余代码将照常进行。

作为时间线：

1.  称呼`codeAddress()`
2.  向 Google 地图发出 AJAX 请求
3.  从返回`codeAddress()`
4.  序列化并提交表单
5.  谷歌的回应回来了。
6.  输入被修改，来不及在表单提交中使用。

`geocoder.geocode()`解决方案是在提交表单之前等待完成。

```
geocoder.geocode( { 'address': address}, function(results, status) {
    // Modify inputs
    // Submit form
} 
```

# jquery - 水平 Jquery 菜单 - 试图停止动画队列

> ID：11282830
> 
> 赞同：1
> 
> 时间：2012-07-01T14:38:54.213
> 
> 标签：jquery, css, menu, jquery-animate, submenu

您好，我正在尝试制作水平菜单。子菜单也是水平的。子菜单应该在悬停时淡入并在鼠标离开时淡出。

我的问题是 Jquery 制作了这些动画队列的东西，这会杀死我的菜单。也许如果你看看[jsfiddle](http://jsfiddle.net/gEpvG/1/)你就会明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:07:02.643

你想停止哪个元素？改用这个：

```
$("#nav li").hover(function () {
    $(this).children("ul").stop(true, true).fadeIn("slow");
    },
    function(){
    $(this).children("ul").stop(true, true).fadeOut("slow");
}); 
```

[jsFiddle](http://jsfiddle.net/gEpvG/2/)

# javascript - 我的网站出现 Firefox 缓存问题

> ID：11282840
> 
> 赞同：0
> 
> 时间：2012-07-01T14:39:52.370
> 
> 标签：javascript, css, firefox

我已经开始为客户[www.ifixboilers.com](http://www.ifixboilers.com)建立一个站点。这是一个简单的基于表单的网站，有三个选项，当有人点击其中一个选项时，我使用 JS 来更改其中一个表单的 CSS 位置。一旦表单出现，表单的各个部分都需要填写，但是如果他们希望返回主页，可以单击“返回”按钮，该按钮使用 JS 将 CSS 更改为再次隐藏到表单，允许他们选择不同的表格或重新阅读主页。

问题出在 FireFox 上——当他们点击返回按钮时，没有一个首页是可点击的。就像表格仍然存在但不可见。只有当我按`Ctrl`+`F5`几次时它才变得可见。

在所有其他浏览器中，这不是问题吗？我搜索了很多关于缓存清除的 Stack Overflow 帖子，我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:54:44.497

事实是您的表单仍然在按钮上方，只是它的不透明度已设置为 0。您应该尝试在 fadeOut 动画结束时完全隐藏表单（如使用 CSS“display:none”属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:47:50.243

您是否尝试将这些中的任何一个添加到您的标记中？

1.  `<meta http-equiv="Cache-control" content="no-cache">`
2.  `<meta http-equiv="Cache-control" content="no-store">`
3.  `<meta http-equiv="Cache-control" content="must-revalidate">`
4.  `<meta http-equiv="pragma" content="no-cache">`
5.  `<meta name="expires" content="0">`

虽然FF3仍然是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:09:15.693

在动画结束时将 z-index 设置为 -1 或将 display 设置为 none。否则，您将无法单击“通过”该 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T17:47:16.303

让我的 JS 正常工作的唯一方法是将`<a>`标签更改为`<input type="button">`，然后使用 css 设置它们的样式。

问题出在这个

```
<ul>
<li id="fix"><a href="#" onclick="showF1();">fix</a></li><!--fixForm.html-->
<li id="serv"><a href="#" onclick="showF2();">serv</a></li><!--serviceForm.html-->
<li id="cont"><a href="#" onclick="showF3();">cu</a></li><!--contactUs.html-->
</ul> 
```

FireFox 将“#”视为页面锚并将 URL 更改为 www.ifixboilers.com/#，因此将锚更改为按钮解决了我的问题。

```
<div id="buttons">
<input type="button" name="fix" id="fix" onclick="showF1();" /><!--fixForm.html-->
<input type="button" name="serv" id="serv" onclick="showF2();" /><!--serviceForm.html-->
<input type="button" name="cont" id="cont" onclick="showF3();" /><!--contactUs.html-->
</div> 
```

# glassfish - Glassfish asadmin 列出正在运行的应用程序的端口

> ID：11282842
> 
> 赞同：0
> 
> 时间：2012-07-01T14:40:09.210
> 
> 标签：glassfish, asadmin

I'm using Glassfish 3+ and deploying the applications to application server. My glassfish instance's port not "8080". when i enter the Glassfish Admin Console and going to Running Applications , i can see the port number which works. For example : 43888\. How i can see the port numbers running applications on command prompt? Which asadmin command with?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:18:56.740

快速而肮脏的方法是使用以下命令（在 UNIX/Linux 上）：

```
asadmin get '*' | egrep -i '[._]port[=.][1-9v]' | sort 
```

这将为您提供域中正在使用的大多数端口值。

# php - 从数据库中提取文本时，如何在 php 中的每个句号后添加换行符？

> ID：11282843
> 
> 赞同：0
> 
> 时间：2012-07-01T14:40:11.497
> 
> 标签：php, expression, add, line-breaks

我的一个表格中有一个很长的描述文本，但文本都聚集在一起。我需要一种让 PHP 找到每个句号并在其后添加换行符的方法，这样我就可以将描述视为一个列表。

更好的解决方案是添加一个

*   在每个句子的开头添加标签，并让每个句子以所以我实际上可以添加要点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:42:52.060

您可以使用[str_replace](http://php.net/manual/en/function.str-replace.php)函数将每次出现的句点替换为句点加换行符。如果您正在呈现 HTML，则换行符可能是`<br/>`标签。

# ruby-on-rails - 将一个控制器重定向到另一个控制器

> ID：11282846
> 
> 赞同：16
> 
> 时间：2012-07-01T14:40:41.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有两个控制器用户和电影。所有，我想做的，从 user#something 重定向到 movie#something。是否可以？？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-21T11:49:08.520

```
redirect_to controller: :controllername, action: :actionname' 
```

其中 controllername 是您的控制器的名称，而 actionname 是您的操作的名称。这适用于 rails 4，但也适用于旧版本的 rails

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-01T14:41:39.783

是的。查看redirect_to。 [http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)

# javascript - iScroll 4 – 恢复默认/原生缩放功能

> ID：11282850
> 
> 赞同：0
> 
> 时间：2012-07-01T14:41:05.510
> 
> 标签：javascript, html, iscroll4, touchmove

我有一个设置，其中我的可滚动容器占据了视口的全部宽度和高度。我使用 iScroll 在背景图像上滚动内容。到目前为止工作正常，我没有找到更好的解决方案来固定背景图像（任何想法都会很棒:)）。问题是，我不能再放大页面了，因为 iScroll 为可滚动容器禁用了它，在这种情况下是整个屏幕。有没有办法恢复原生缩放功能？我也会采取“绝望”的解决方案，它会修改 iScroll 库甚至另一个用于滚动的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:59:06.383

对于大多数移动设备，您将无法获得本机缩放，因为 iScroll 会覆盖 touchstart 和 touchmove 事件。但是，您可以通过打开[缩放选项](http://cubiq.org/iscroll-4#attachment_126)来获得它的模拟版本。

[从文档中](http://cubiq.org/iscroll-4)：

```
var myScroll = new iScroll('wrapper', { zoom: true }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:53:18.160

所以我找到了一个非常好的解决方案，它内置在 iOS5 中：

```
overflow: scroll;
-webkit-overflow-scrolling: touch; 
```

这对我的案子起到了作用。不需要额外的滚动库，它具有与以前相同的功能（动量滚动、调整大小等）。

# unix - 如何连接来自三个不同电子表格的数据？

> ID：11282851
> 
> 赞同：0
> 
> 时间：2012-07-01T14:41:17.520
> 
> 标签：unix

我有 3 个 tsv 文件，其中包含有关我员工的不同数据。我可以将这些数据与出现在每个文件中的员工的姓氏和名字结合起来。

我想在一个电子表格中收集每个员工的所有数据。

（我不能只复制/过去列，因为某些员工不在文件号 2 中，而是在文件号 3 中）。

所以我认为 - 我是一个初学者 - 一个脚本可以做到这一点，对于每个员工（一行），从新 tsv 文件中的文件中收集尽可能多的数据。

编辑。我所拥有的示例（实际上，每个文件大约有 300 行，一些员工不在所有文件中）。

**文件 1**

```
 john      hudson     03/03    male
     mary      kate       34/04    female
     harry     loup       01/01    male 
```

**文件 2**

```
 harry     loup     1200$ 
```

**文件 3**

```
 mary     kate     atlanta 
```

**我想要的是 ：**

```
 column1    colum2    column3     column4    column5    column6
    john       hudson     03/03      male
    mary       kate       34/04      female    atlanta
    harry      loup       01/01      male                 1200$ 
```

这对我有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:19:07.710

如果您熟悉 SQL，那么您可以使用 perl [DBD::CSV](http://search.cpan.org/perldoc?DBD%3A%3ACSV)模块轻松完成这项工作。但这也取决于您是否愿意编写 perl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:50:30.280

使用这个 python 脚本：

```
import sys, re

r=[]
i = 0
res = []
for f in sys.argv[1:]:
    r.append({})
    for l in open(f):
        a,b = re.split('\s+', l.rstrip(), 1)
        r[i][a] = b
        if i == 0:
            res += [a]
    i += 1

for l in res:
    print l," ".join(r[k].get(l, '-') for k in range(i)) 
```

该脚本将每个文件加载到字典中（第一列用作键）。然后脚本遍历第一个文件中第一列的值，并从字典（从其他文件创建）中写入对应的值。

使用示例：

```
$ cat 1.txt 
user1 100
user2 200
user3 300
$ cat 2.txt 
user2 2200
user3 2300
$ cat 3.txt 
user1 1
user3 3
$ python 1.py [123].txt
user1 100 - 1
user2 200 2200 -
user3 300 2300 3 
```

# ios - 使用 iOS 客户端 ID 时，Google API 无法进行身份验证

> ID：11282853
> 
> 赞同：5
> 
> 时间：2012-07-01T14:41:54.887
> 
> 标签：ios, google-api, oauth-2.0

我正在尝试将 Google Data API 集成到我的应用程序中。我正在使用此处提供的 ObjC 包装器：

[http://code.google.com/p/gdata-objectivec-client](http://code.google.com/p/gdata-objectivec-client)

但我在身份验证方面遇到了一些问题。基本上我按照这里描述的步骤进行操作：

[http://code.google.com/p/gtm-oauth2/wiki/Introduction#Signing_In_to_Google_Services](http://code.google.com/p/gtm-oauth2/wiki/Introduction#Signing_In_to_Google_Services)

我在 API 控制台上创建了一个项目，并为已安装的应用程序添加了两个客户端 ID：一个是“其他”平台，另一个是“iOS”，其中捆绑 ID 已适当设置（尽管我暂时将 appstore id 保留为 0 ）。现在是有趣的部分。

与上述包装库捆绑的 YouTubeSample 应用程序和我的 iOS 应用程序都与属于“其他”平台的客户端 ID 完美配合，`invalid_client`当我切换 iOS 的 ID 时，它们都返回 400 错误。我已经仔细检查了客户端 ID 和机密，一切都是正确的。当然，iOS 应用程序已获得正确的捆绑 ID。

那么，我在这里错过了一些微不足道的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:14:50.327

是否有理由需要使用 iOS 类型的 id/secret 对而不是其他类型的对？也许我遗漏了一些东西，但链接的文档声明不使用 iOS 类型的客户端 ID：

> 在控制台中，创建一个项目，然后点击左侧栏中的“API 访问”。为已安装的应用程序（不是 Web 应用程序）类型其他（不是 iOS）创建一个新的客户端 ID。这将提供与控制器一起使用的客户端 ID 和秘密字符串。

控制器在发送请求时可能不会将自己标识为 iOS 应用程序，Google 可能会在收到 iOS id/secret 对时进行检查。

# ruby - RMagick 的 color_histogram 产生不同于散列的结果

> ID：11282856
> 
> 赞同：0
> 
> 时间：2012-07-01T14:42:08.363
> 
> 标签：ruby, hash, imagemagick, histogram, rmagick

我一直在使用 RMagick 的[color_histogram](http://www.simplesystems.org/RMagick/doc/image1.html#color_histogram)方法来获得量化的 8 位图像中的颜色直方图。

然而，虽然我应该得到从这个方法返回的哈希值，但我得到了一些奇怪的东西。检查“哈希”时 IRB 的输出如下所示：

`=> {red=1907, green=1893, blue=2716, opacity=0=>25801, red=21141, green=14902, blue=13109, opacity=0=>3744, red=35552, green=15344, blue=8229, opacity=0=>1427, red=48734, green=19120, blue=8539, opacity=0=>1280, red=62091, green=22662, blue=8733, opacity=0=>75158, red=57917, green=33805, blue=24932, opacity=0=>275, red=47046, green=39657, blue=37365, opacity=0=>1873, red=64379, green=64336, blue=64330, opacity=0=>10442}`

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T19:55:29.370

阅读文档为`color_histogram`您找到解释：

> **散列中的每个键都是一个像素**，代表图像中出现的一种颜色。与键关联的值是该颜色在图像中出现的次数。

进一步看你会发现[Pixel 是一个类](http://www.simplesystems.org/RMagick/doc/struct.html#Pixel)。所以这解释了奇怪的输出。散列中的每个键都是 class `Pixel`。所以当你看到：

```
{ red=1907, green=1893, blue=2716, opacity=0 => 25801 } 
```

你真正看到的是：

```
{ Pixel => histogram_count } 
```

或者：

```
{ Pixel(red=1907, green=1893, blue=2716, opacity=0) => 25801 } 
```

打印输出只是稍微压缩了输出，`irb`因此在您意识到发生了什么之前很难阅读。

# date - 将 TimeSK 替换为时间维度中的 Date。我可以同时使用吗？

> ID：11282861
> 
> 赞同：0
> 
> 时间：2012-07-01T14:42:16.460
> 
> 标签：date, ssas

我正在修改时间维度。除了整数 TimeId 之外，我还添加了 Day 作为日期列并使其成为键。

我的度量值组仍然通过 Timeid 链接到时间维度。我正在一一改变维度的使用。我取了第一个维度组并添加了 Day 列。但是**，我无法在新的 Day 列上重新链接 Facts 和 dimTime**。当我将粒度属性从 TimeId 更改为 Day 时，我只能选择

*   年
*   季键
*   月份键

维度列。

1.  是否可以通过 TimeIdSK （使用是关键）和其他按天列（使用是常规的）链接一些事实表？链接时我可以使用两列吗？当我浏览时间维度时，我只看到通过 Day 列链接的度量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:38:40.933

在维度设计器中，转到 Day 属性的属性。确保其 Usage 属性设置为 Key（并将 TimeId 的 Usage 属性更改为 Regular）。同样对于 Day 属性，请确保 KeyColumn 属性设置为 Day。

# php - PHP PDO 执行标准函数

> ID：11282862
> 
> 赞同：0
> 
> 时间：2012-07-01T14:42:16.540
> 
> 标签：php, function, pdo, die

PDO 的新手。这是我的功能。我们已连接到数据库，一切正常，但调用此函数时会杀死要执行的 PHP 的其余部分。显然它有问题。

```
$dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);
        global $dbh;

        /*** set the error reporting attribute ***/
        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

function selectall($table){
            $stmt = $dbh->prepare("SELECT * FROM :table");
            $stmt->bindParam(':table', $table, PDO::PARAM_STR,20);
            $stmt->execute();
            $result = $stmt->fetchAll();
            return $result;
        } 
```

在这样的页面上调用：

```
<?php $telephones = selectall('telephone'); foreach($telephones as $telephones) { echo $telephone['title'].', '; } ?> 
```

/// 编辑 - 我已经尝试了你所有的方法，并且在页面上调用该函数时仍然中断。这是整个代码。出于测试目的稍作修改。

```
try { 

        $dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);

        /*** set the error reporting attribute ***/
        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        $sql = "SELECT * FROM system";
        foreach ($dbh->query($sql) as $row)
            {
            $url = $row['url'];
            $election = $row['election'];
            $election_date = $row['election_date'];
            $sitename = $row['sitename'];
            }

        //FUNCTION

        function selectall($table){
            global $dbh;
             $sql = "SELECT * FROM telephone";
            foreach ($dbh->query($sql) as $row){
                print $row['title'] .' - '. $row['name'] . '<br />';
            }
        }

        /** close database connections **/
        $dbh = null;

    }

    catch(PDOException $e) { 

        echo $e->getMessage(); 

    } 
```

函数外的代码，即。反映表系统的那个工作正常但是函数内部的那个在稍后作为函数调用时会在调用后杀死所有内容并且没有执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:50:31.953

我认为问题是：`$telephones as $telephones`

试试这个：

```
$telephones = selectall('telephone'); foreach($telephones as $telephone) { echo $telephone['title'].', '; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:52:37.803

当您尝试将未定义的变量 ( `$dbh`) 用作对象时，您的第二行会生成一个致命错误。

您需要像这样从全局范围导入它：

```
global $dbh; 
```

或将其作为参数传递给函数。

修复此问题后，您的代码仍然无法工作，因为您不能将参数用于标识符（表或列名，甚至在限制和偏移中）。不幸的是，您必须在那里使用字符串连接。

# java - Android、I/O 和 XML Jdom

> ID：11282867
> 
> 赞同：0
> 
> 时间：2012-07-01T14:43:07.493
> 
> 标签：java, android, xml

我有一个位于 assets 文件夹中的 XML 文件。XML 文件被解析为 Object 没有问题（这意味着 XML 是 100% 正确的）。

现在我正在做的是将 XML 文件从资产文件夹复制到内部存储。当我尝试从内部存储器打开复制的 XML 文件时，我总是遇到异常。

```
org.jdom.input.JDOMParseException: Error on line 660: At line 660, column 8: not well-formed (invalid token) 
```

调用此行时：

```
Document doc = (Document) builder.build(xmlStream); (Where xmlStream is InputStream argument) 
```

该文件似乎被复制得很好，因为我带了`xmlStream`-argument，将其转换为String，然后将其打印到屏幕上，看起来很好。他们在这里的关键是异常总是说文件的最后一个位置是错误的。因此，文件底部结束标记的最后一个字符是“>”，位于第 660 行第 8 行。

复制操作

```
public  class  InternalMemory {
  private static Context mContext;
  public  static String INTERNAL_PATH;
  static {
    mContext = App.getContext();
    INTERNAL_PATH = mContext.getApplicationContext().getFilesDir().toString();
  }
  public static void SaveStream(InputStream is,String folder,String fileName) {
    String path = INTERNAL_PATH + "/"+folder+"/";
    File file = new File(path);
    file.mkdirs();
    path += fileName;
    OutputStream os;
    try {
      os = new BufferedOutputStream(new FileOutputStream(path,true));
      write(is,os);
      os.flush();
      os.close();
    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
  private static void write(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
      out.write(buffer, 0, read);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:09:11.210

好的，像往常一样..没有注意到我正在附加文件

os = new BufferedOutputStream(new FileOutputStream(path,true));

应该是 os = new BufferedOutputStream(new FileOutputStream(path,false));

谢谢大家

# c++ - 我在这个 CG 程序上做错了吗？

> ID：11282868
> 
> 赞同：7
> 
> 时间：2012-07-01T14:43:13.730
> 
> 标签：c++, shader, ogre3d, ogre, cg

我使用 Ogre3D 作为图形引擎。

我手动创建了一个工作正常的网格，uvs 是正确的并且设置为表示网格坐标（对于这个例子，网格是 10 x 10）

我在顶点程序中什么都不做，并且有一个非常简单的片段程序。我已经包含了两个程序和材料文件来解释。

我的问题是，即使将过滤设置为无，颜色似乎也与我的原始图像不同（这只是我使用的测试图像，因为我在食人魔中手动创建纹理时遇到问题）。事实证明，问题不在于我在 ogre 中的代码，而更可能与材质文件或片段/顶点程序有关。

我还包括左侧输出的屏幕截图和右侧的原始图像。片段着色器还在顶部绘制了一个简单的网格，因此我可以确保正确传递 uv 坐标。他们似乎是。

![在此处输入图像描述](../Images/0d626035b069b12cbc6657afb53800c4.png)

任何见解都将不胜感激，因为我真的不确定我做错了什么。

材料文件：

```
// CG Vertex shader definition
vertex_program PlainTexture_VS cg            
{
    // Look in this source file for shader code
    source GameObjStandard.cg
    // Use this function for the vertex shader            
    entry_point main_plain_texture_vp    
    // Compile the shader to vs_1_1 format    
    profiles arbvp1       

    // This block saves us from manually setting parameters in code
    default_params                    
    {
        // Ogre will put the worldviewproj into our 'worldViewProj' parameter for us.
        param_named_auto worldViewProj worldviewproj_matrix        
        // Note that 'worldViewProj' is a parameter in the cg code.
    }
}

// CG Pixel shader definition
fragment_program PlainTexture_PS cg            
{
    // Look in this source file for shader code
    source GameObjStandard.cg        
    // Use this function for the pixel shader    
    entry_point main_plain_texture_fp    
    // Compile to ps_1_1 format    
    profiles arbfp1             
}

material PlainTexture
{
    // Material has one technique
    technique                  
    {
        // This technique has one pass
        pass                   
        {
            // Make this pass use the vertex shader defined above
            vertex_program_ref PlainTexture_VS    
            {
            }
            // Make this pass use the pixel shader defined above
            fragment_program_ref PlainTexture_PS    
            {
            }
            texture_unit 0
            {
                filtering none
                // This pass will use this 2D texture as its input
                texture test.png 2d        
            }
            texture_unit 1
            {
                texture textureatlas.png 2d
                tex_address_mode clamp
                filtering none
            }
        }
    }
} 
```

CG文件：

```
void main_plain_texture_vp(
    // Vertex Inputs
    float4 position        : POSITION,    // Vertex position in model space
    float2 texCoord0    : TEXCOORD0,    // Texture UV set 0

    // Outputs
    out float4 oPosition    : POSITION,    // Transformed vertex position
    out float2 uv0        : TEXCOORD0,    // UV0

    // Model Level Inputs
    uniform float4x4 worldViewProj)
{
    // Calculate output position
    oPosition = mul(worldViewProj, position);

    // Simply copy the input vertex UV to the output
    uv0 = texCoord0;
}

void main_plain_texture_fp(
    // Pixel Inputs
    float2 uv0        : TEXCOORD0,    // UV interpolated for current pixel

    // Outputs
    out float4 color    : COLOR,    // Output color we want to write

    // Model Level Inputs
    uniform sampler2D Tex0: TEXUNIT0,

uniform sampler2D Tex1: TEXUNIT1)        // Texture we're going to use
{

//get the index position by truncating the uv coordinates
float2 flooredIndexes = floor(uv0);

if((uv0.x > 0.9 && uv0.x < 1.1)
|| (uv0.x > 1.9 && uv0.x < 2.1)
|| (uv0.x > 2.9 && uv0.x < 3.1)
|| (uv0.x > 3.9 && uv0.x < 4.1)
|| (uv0.x > 4.9 && uv0.x < 5.1)
|| (uv0.x > 5.9 && uv0.x < 6.1)
|| (uv0.x > 6.9 && uv0.x < 7.1)
|| (uv0.x > 7.9 && uv0.x < 8.1)
|| (uv0.x > 8.9 && uv0.x < 9.1)) {
   float4 color1 = {1.0,0,0,0};
   color = color1;
} else if((uv0.y > 0.9 && uv0.y < 1.1)
|| (uv0.y > 1.9 && uv0.y < 2.1)
|| (uv0.y > 2.9 && uv0.y < 3.1)
|| (uv0.y > 3.9 && uv0.y < 4.1)
|| (uv0.y > 4.9 && uv0.y < 5.1)
|| (uv0.y > 5.9 && uv0.y < 6.1)
|| (uv0.y > 6.9 && uv0.y < 7.1)
|| (uv0.y > 7.9 && uv0.y < 8.1)
|| (uv0.y > 8.9 && uv0.y < 9.1)) {
   float4 color1 = {1.0,0,0,0};
   color = color1;
} else {
   //get the colour of the index texture Tex0 at this floored coordinate
   float4 indexColour = tex2D(Tex0, (1.0/10)*flooredIndexes);
   color = indexColour;
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T13:37:14.460

好的，自从我发现我的问题的解决方案不幸没有上线以来已经有一段时间了，所以希望这可以帮助任何有类似问题的人。

创建任何纹理时，您应该始终将纹理设置为以纹素为单位的大小，`2^n * 2^m`其中*m*和*n*是纹理的宽度和高度。这是我的第一个错误，虽然我当时没有意识到。

我没有发现这一点的原因是因为我的主要纹理图集基于此原理，并且是 1024 x 1024 纹理。我没有考虑的是我作为纹理索引创建的纹理的大小。由于我的地图是 10 x 10，我为索引创建了一个 10 x 10 的纹理，这是我假设然后以某种方式拉伸（不确定它在后端如何工作）为 16 x 16 或 8 x 8，混合纹素在一起，因为它做到了。

给我线索的第一件事是，当我在 Photoshop 中缩放画布时，发现它创建的混合颜色与我在 ogre3d 输出中得到的颜色相同。

反正继续..

一旦我弄清楚了这一点，我就可以在 Ogre 中创建纹理并将其传递如下

```
//Create index material
Ogre::TexturePtr indexTexture = Ogre::TextureManager::getSingleton().createManual("indexTexture","General",Ogre::TextureType::TEX_TYPE_2D, 16, 16, 0, Ogre::PixelFormat::PF_BYTE_BGRA, Ogre::TU_DEFAULT);

Ogre::HardwarePixelBufferSharedPtr pixelBuffer = indexTexture->getBuffer();
pixelBuffer->lock(Ogre::HardwareBuffer::HBL_NORMAL);

const Ogre::PixelBox& pixelBox = pixelBuffer->getCurrentLock();
Ogre::uint8* pDest = static_cast<Ogre::uint8*>(pixelBox.data);

Ogre::uint8 counter = 0;
for (size_t j = 0; j < 16; j++) {
for(size_t i = 0; i < 16; i++)
{       
        if(i==8 || i==7) {
    *pDest++ = 3;   // B
    *pDest++ = 0;   // G
    *pDest++ = 0;   // R
    *pDest++ = 0;   // A
    } else {
    *pDest++ = 1;   // B 
    *pDest++ = 0;   // G
    *pDest++ = 0;   // R
    *pDest++ = 0;   // A
    }
    counter++;
}
}

pixelBuffer->unlock(); 
```

所以现在我有了一个纹理，可以用作索引，其中包含一些我添加的值用于测试，这些值最终将在运行时通过单击图块来填充。

现在要传递这个纹理，我必须将它传递给正确的技术并传递我的材料，这样做如下：

```
Ogre::MaterialPtr material = Ogre::MaterialPtr(Ogre::MaterialManager::getSingleton().getByName("PlainTexture"));
float mapSize = 16;
float tas = 2;
material->getTechnique(0)->getPass(0)->getFragmentProgramParameters()->setNamedConstant("mapSize",mapSize);
material->getTechnique(0)->getPass(0)->getFragmentProgramParameters()->setNamedConstant("tas",tas);
material->getTechnique(0)->getPass(0)->getTextureUnitState(0)->setTextureName("indexTexture"); 
```

这也传递了两个值，*mapSize*是贴图本身的大小（假设它是一个正方形），*tas*是纹理图集大小（图集宽度上不同纹理正方形的数量）。

为了让我的材料能够理解我刚刚传入的内容，我需要稍微修改我的材料文件，如下所示：

```
// CG Pixel shader definition
fragment_program PlainTexture_PS cg            
{
    source GameObjStandard.cg    
    entry_point main_plain_texture_fp 
    profiles arbfp1 
default_params
{
    param_named tas float
    param_named 
}            
} 
```

我的通行证也稍微重新定义了

```
pass                   
{
                    // Make this pass use the vertex shader defined above
    vertex_program_ref PlainTexture_VS    
    {
    }
                    // Make this pass use the pixel shader defined above
    fragment_program_ref PlainTexture_PS    
    {
    }
    texture_unit 0
    {
        filtering none        
    }
texture_unit 1
{
    texture textureatlas.png 2d
    tex_address_mode clamp
    filtering anisotropic
}
} 
```

然后我重写了 cg 纹理片段程序以考虑我所做的更改。

```
void main_plain_texture_fp(
    float2 uv0 : TEXCOORD0,    // UV interpolated for current pixel
    out float4 color    : COLOR,    // Output color we want to write
uniform float tas,
uniform float mapSize,

    // Model Level Inputs
    uniform sampler2D Tex0: TEXUNIT0,
uniform sampler2D Tex1: TEXUNIT1)
{
//get the index position by truncating the uv coordinates
float2 flooredIndexes = floor(uv0);

//get the colour of the index texture Tex0 at this floored coordinate
float4 indexColour = tex2D(Tex0, ((1.0/mapSize) * flooredIndexes)+(0.5/mapSize));

//calculate the uv offset required for texture atlas range = 0 - 255
float indexValue = (255 * indexColour.b) + (255 * indexColour.g) + (255 * indexColour.r);

//float indexValue = (tas * tas) - indexValue0;

if(indexValue < tas*tas) {
    float row = floor(indexValue/tas);
    float col = frac(indexValue/tas) * tas;

    float uvFraction = 1.0/tas;

    float uBase = col * uvFraction;
    float vBase =  1 - ((tas - row) * uvFraction);

    float uOffset = frac(uv0.x)/tas;
    float vOffset = (frac(uv0.y))/tas;

    float uNew = uBase + uOffset;
    float vNew = vBase + vOffset;

    float2 uvNew = {uNew, vNew};

    if(frac(uv0.x) > 0.99 || frac(uv0.x) < 0.01) {
    float4 color1 = {1,1,1,0};
    color = (0.2*color1) + (0.8*tex2D(Tex1,uvNew));
    } else if(frac(uv0.y) > 0.99 || frac(uv0.y) < 0.01) {
    float4 color1 = {1,1,1,0};
    color = (0.2*color1) + (0.8*tex2D(Tex1,uvNew));
    } else {
    color = tex2D(Tex1,uvNew);
    }

} else {
    float4 color2 = {0.0,0,0,0};
    color = color2;
}
} 
```

这会从纹理图集中计算所需的正确纹素，它还会通过组合 80% 纹素颜色和 20% 白色在顶部覆盖一个微弱的网格。

如果纹理图集没有索引纹理指定的颜色索引，那么它只会输出黑色（这主要是因为它很容易发现。

下面是使用 2 x 2 纹理图集的输出示例。

![在此处输入图像描述](../Images/0549ec5de3690ade9d88ed0352eba6a2.png)

# java - 使用 gdata-java-client 获取 Picasa 的图片直接 URL

> ID：11282869
> 
> 赞同：1
> 
> 时间：2012-07-01T14:43:33.340
> 
> 标签：java, gdata-api, picasa

我将图像上传到 Picasa 并得到响应：

```
PhotoEntry returnedPhoto = myService.insert(feedUrl, PhotoEntry.class, myMedia); 
```

现在我想提取图像的直接 URL。如果我做...

```
for (Link link : returnedPhoto.getLinks()) {
    System.out.println(link.getHref());
} 
```

...我得到正确的 URL，但它们是间接的，例如，`https://picasaweb.google.com/data/feed/api/user/blablabla`这样的 URL 指向的不是图像文件，而是指向内部包含此图像的 Picasa 页面。

我想要得到的是这样的 URL：`https://lh4.googleusercontent.com/blablabla/blablabla/blabla/bla/my_image.jpg`

我发现.Net 用户可以使用一些“PicasaQuery”类来做到这一点。但我想这个类只存在于.Net 版本中，因为我在 gdata-java-library 中找不到它。如何以其他方式提取图像的直接 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:06:52.480

也许[这个答案](https://stackoverflow.com/a/9379813/1492977)会对你有所帮助。

```
PhotoEntry returnedPhoto = myService.insert(feedUrl, PhotoEntry.class, myMedia);
String href = returnedPhoto.getHtmlLink().getHref();
if (returnedPhoto.getMediaContents().size() > 0) {
  href = returnedPhoto.getMediaContents().get(0).getUrl();
}
System.out.println(href); 
```

# barcode - EAN/GTIN 条码产品标识符 - 条码到产品名称

> ID：11282870
> 
> 赞同：11
> 
> 时间：2012-07-01T14:43:43.113
> 
> 标签：barcode

有谁知道可以将 EAN/GTIN 条形码转换为产品名称的良好在线 API（如果可能的话，还有什么额外的东西，例如类别？）

我一直找不到成功率高的，下面是我家周围刚扫描的物品的一些条形码（没有什么稀有或晦涩难懂的）

示例条形码：

```
5010186014550
20411336
21048753
5449000000996
5051413363249 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:40:26.363

试试这个： http: [//openean.kaufkauf.net/](http://openean.kaufkauf.net/)

*   这是它的 API 链接：http: [//openean.kaufkauf.net/api.php](http://openean.kaufkauf.net/api.php)

或者这个： http: [//www.codecheck.info/](http://www.codecheck.info/)

两者都是德语，但语言无关紧要，EAN 是 EAN :)。
在那里试试你的条形码，也许数据库包含你的 EAN。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-31T13:19:28.160

这个数据库似乎更大：

[ean-search.org](http://www.ean-search.org/)

他们还有一个 REST API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T14:21:02.530

这是来自挪威的综合报告：http: [//glnservice1.gs1.no/GS1GepirClient/GepirClient.aspx](http://glnservice1.gs1.no/GS1GepirClient/GepirClient.aspx)

问候阿恩芬

# file - Nodejs模块查找文件？

> ID：11282880
> 
> 赞同：8
> 
> 时间：2012-07-01T14:45:14.353
> 
> 标签：file, node.js, module, finder

我搜索一个模块以在 nodejs 中查找文件。

我想要类似的东西：

```
var finder = require('finder');
var path = finder.find('/path/to/*.js'); 
```

然后 path 是一个数组，例如：

```
/path/to/file.js
/path/to/sub/file.js
... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T22:32:36.547

除了@pksunkara 回答：

*   [https://github.com/isaacs/node-glob](https://github.com/isaacs/node-glob)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T14:53:36.400

*   [https://github.com/zzak/gsub](https://github.com/zzak/gsub)
*   [https://github.com/dvv/meta-fs](https://github.com/dvv/meta-fs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-06T16:16:38.803

对于支持回调的简单搜索，您可以使用： [https ://github.com/yuanchuan/find](https://github.com/yuanchuan/find)

或者，您可以使用`filehound`支持异步（回调、承诺）和同步调用的哪个。此外，您可以指定多个搜索条件，如文件扩展名、大小等

例子：

```
const Filehound = require('filehound');

const files = Filehound.create()
   .ext('js')
   .findSync();

console.log(files) // json files 
```

回购： [https ://github.com/nspragg/filehound](https://github.com/nspragg/filehound)

API 文档： [https ://nspragg.github.io/filehound/](https://nspragg.github.io/filehound/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-25T15:18:30.137

[fs-jetpack](https://github.com/szwacz/fs-jetpack)可以通过非常简单的方式做到这一点：

```
const jetpack = require("fs-jetpack");

// sync way
const files = jetpack.find("my_folder", { matching: "*.js" });
console.log(files);

// or async way
jetpack.findAsync("my_folder", { matching: "*.js" }).then(files => {
  console.log(files);
}); 
```

# javascript - Javascript 无法自动提交表单

> ID：11282883
> 
> 赞同：0
> 
> 时间：2012-07-01T14:45:36.647
> 
> 标签：javascript, facebook

我有一个代码，我想在 Facebook 返回用户详细信息后 5 秒自动提交。但是代码无法自动提交。我找不到错误。我的代码如下所示

```
<?php 
   //some php functions to process the submitted form
 ?>       
        <div>
            <div id="fb-root"></div>        
            <script type="text/javascript">
                window.fbAsyncInit = function() {
                    FB.init({appId: 'xxxxxxxxxxxxxxxx', status: true, cookie: true, xfbml: true});
                    /* All the events registered */
                    FB.Event.subscribe('auth.login', function(response) {
                       login();
                    });
                    FB.Event.subscribe('auth.logout', function(response) {

                        logout();
                    });
                    FB.getLoginStatus(function(response) {
                        if (response.session) {
                            login();
                        }
                    });
                    FB.getLoginStatus(function(response) {
                        login();
                        logout();
                    });
                };
                (function() {
                    var e = document.createElement('script');
                    e.type = 'text/javascript';
                    e.src = document.location.protocol +
                        '//connect.facebook.net/en_US/all.js';
                    e.async = true;
                    document.getElementById('fb-root').appendChild(e);
                }());

                function login(){
                    FB.api('/me',function(response) {

                        if(typeof response.name != 'undefined')
                        {
                            document.getElementById('hideDiv').style.visibility = 'hidden';                      
                            document.signupForm.first_name.value=response.first_name;
                            document.signupForm.last_name.value=response.last_name;
                            document.signupForm.username.value=response.username;
                            document.signupForm.email.value=response.email;

                        }

                    });
                }

                function logout(){
                    //document.getElementById('login').style.display = "none";
                }

                setTimeout("document.signupForm.submit();",5000); //5 seconds

            </script>
           <form id="signupForm" name="signupForm" class="phorm2" action="" method="post">
                <h3>Sign up</h3>
                <div id="hideDiv">Get details from Facebook
                    <fb:login-button autologoutlink="true" perms="email,user_birthday,status_update,publish_stream"></fb:login-button>
                </div>
                <br>
                <label class="short" for="first_name">First Name</label>
                <input type="text" name="first_name" id="first_name" />
                <br>
                <label class="short" for="last_name">Last Name</label>
                <input type="text" name="last_name" id="last_name" />
                <br>
                <label class="short" for="username">Username</label>
                <input type="text" name="username" id="username" /> 
                <br>
                <label class="short" for="email">Email</label>
                <input type="text" name="email" id="email"/>
                <br>
                <label class="short" for="submit">&nbsp;</label>
                <input type="submit" name="submit" value="Sign me up" class="Cart66ButtonPrimary" />
            </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:56:46.740

您的代码在加载头后立即运行，当时没有表单。

从当前位置删除此行

```
setTimeout("document.signupForm.submit();",5000); //5 seconds 
```

并在这里添加，

```
FB.api('/me',function(response) { 
    if(typeof response.name != 'undefined'){
        document.getElementById('hideDiv').style.visibility = 'hidden';                      
        document.signupForm.first_name.value=response.first_name;
        document.signupForm.last_name.value=response.last_name;
        document.signupForm.username.value=response.username;
        document.signupForm.email.value=response.email; 
    }
   setTimeout(function(){
       document.signupForm.submit();
   },5000); //5 seconds  
    // Never put a string in as parameter in  setTimeout
}); 
```

# javascript - 为网页中的特定内容指定不同的声音

> ID：11282884
> 
> 赞同：8
> 
> 时间：2012-07-01T14:46:01.087
> 
> 标签：javascript, css, accessibility, text-to-speech, blind

我试图找到有关编写盲人可以访问的网页的信息，但还没有找到很多有用的信息。具体来说，我正在寻找的是如何给屏幕阅读器一般的具体说明，关于如何阅读我的页面内容。我知道覆盖屏幕阅读器的用户设置可能会被视为一种烦恼，但是，我希望能够访问的内容是诗歌、戏剧、故事和其他类型的创意写作。由于在同一个文档中经常有许多不同的角色在说话，如果我有一种方法可以指定屏幕阅读器声音的不同特征，以便让盲人（或任何人）有机会听到声音，那就太好了区分不同的说话字符。马上，

内容示例可能是：

> 布伦达：嘿，吉米！这是怎么回事？
> 
> 吉米：布伦达！看看！你听起来像个女人，我听起来像个男人！
> 
> 慢孩子：哦……我听起来很慢……

那么，我有什么方法可以定义标签、属性或以某种方式将脚本附加到元素上，以更改网页中特定内容的说话声音？为了在 IE 和 Firefox 中以类似的方式呈现语音文本，是否有定义我可以使用的标准？原生浏览器支持怎么样，我看过一些用于屏幕阅读的插件，但我很好奇 IE 或 Firefox 中是否有任何文本到语音支持，所以我不必安装插件。

**更新：黑客在 Firefox 中的做法：**

如果找到更简单的方法，请给出更好的答案！

这里有一些有希望的东西......引用“speak.js”：

> “speak.js 是 eSpeak 的一个端口，一个开源语音合成器，使用 Emscripten 从 C++ 到 JavaScript。”

[Mozilla 开发博客上关于 speak.js 的](http://hacks.mozilla.org/2011/08/speak-js-text-to-speech-on-the-web/)文章。

[speak.js 的 GitHub 页面](https://github.com/kripken/speak.js)上的来源：kripken/speak.js 引用自 readme.markdown：

> “选项
> 
> 您还可以通过调用 speak() 来指定一些选项
> 
> `speak('hello world', { option1: value1, option2: value2 .. })`
> 
> 可用选项有：
> 
> ```
> amplitude: How loud the voice will be (default: 100)
> pitch: The voice pitch (default: 50)
> speed: The speed at which to talk (words per minute) (default: 175)
> voice: Which voice to use 
>        (for a non-default voice, requires you to build speak.js
>        to include the proper data. See Language Support
>        below) (default: en/en-us)
> wordgap: Additional gap between words in 10 ms units (default: 0)
> noWorker: Do not use a web worker (see below in 'Architecture') 
> ```
> 
> 例如
> 
> `speak('hello world', { pitch: 100 })`
> 
> 会用非常高的声音说话。”

**笔记：**

目前这只适用于 Firefox。虽然这不是我想要的，但似乎完全可以使用 javascript 来解析 HTML 并使用属性来触发带有我想要的任何选项的“speak”命令。这将需要一些工作，但最终我可能会得到一个可以尝试在上下文中阅读页面的机器人！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:30:19.757

目前我能指出的唯一方向是[http://www.w3.org/TR/CSS21/aural.html](http://www.w3.org/TR/CSS21/aural.html)和[http://www.w3.org/TR/css3-speech/#aural-model](http://www.w3.org/TR/css3-speech/#aural-model) .

对于屏幕阅读器等辅助技术的优化，在野外并没有很多真正有用的资源。但也许其他一些比我知识渊博的成员能够提供更大的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T08:49:28.390

我面临着类似的挑战。（我想使用语音“字符”来区分不同类型内容的语义）。

我非常喜欢 eSpeak，并在我们让配音演员加入之前广泛使用它来制作语音内容的原型。因此，我发现 speak.js 是一项非常有趣的工作。

但是，我会警惕自己滚动的可访问性解决方案，因为我知道屏幕阅读器用户通常对语音设置（速度、音高、音色、性别、口音等）有非常具体的偏好。

如果您确实按照您建议的方式进行，请确保您的用户可以轻松调整设置（就像他们可以使用大多数屏幕阅读器软件一样），并且这些设置在访问之间保存（例如使用 cookie）。这似乎需要做很多工作才能正确完成。如果你有时间和预算，那就太好了！

现在我要去访问那些 css3 语音链接。

# asp.net - Http 处理程序没有在 asp.net 中被调用？

> ID：11282885
> 
> 赞同：1
> 
> 时间：2012-07-01T14:46:02.443
> 
> 标签：asp.net

我有在 Visual web developer express 中打开的网站。

在 web.config 中，我定义了一个处理程序 B。

```
 <add verb="GET,POST" path="*/faq*" validate="false" type="DefaultRedirectHandler" /> 
```

如何指定在这个环境中是一个 dll 的位置 DefaultRedirectHandler？我创建了一个 handler.dll，其中包含从 bin 目录中的 IHttpHandler 派生的类 B，但有迹象表明它没有被使用。

另外，我试过

```
<system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <handlers>
            <add name="ASP Wild" path="*" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="None" preCondition="classicMode,runtimeVersionv4.0,bitness32" />
          <add name="SampleHandler" verb="*"
         path="*"
         type="DefaultRedirectHandler,handler.dll"
         resourceType="Unspecified" />

        </handlers> 
```

如果在其他地方调用此处理程序，是否有一些日志可以查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:02:32.893

添加处理程序时，您应该完全限定其类型。包括名称空间以及您的类型名称。

```
<httpHandlers>
  <add verb="*" path="*"
    type="MyHandlerAssembly.With.A.NameSpace.IISHandler1, MyHandlerAssembly" />
</httpHandlers> 
```

[如何：注册 HTTP 处理程序](http://msdn.microsoft.com/en-us/library/46c5ddfy.aspx)

您的处理程序所在的程序集必须存在于您的 Web 应用程序的 bin 目录或系统程序集缓存中。

有关 HttpHandler 的配置的更多详细信息，请参阅以下内容。

[为 httpHandlers 添加元素（ASP.NET 设置架构）](http://msdn.microsoft.com/en-us/library/7d6sws33.aspx)

请记住，默认添加了许多 ASP.NET 处理程序，并由系统 machine.config 和根 web.config（在您的 .NET 库目录中）定义。如果这些处理程序中的任何一个与您的路径匹配，则可以首先执行它们。如果他们关闭响应，那么您的处理程序可能永远不会被执行。

编辑：

至于调试服务器上正在发生的事情（即按什么顺序调用哪些处理程序），您可能有兴趣查看[Glimpse](http://getglimpse.com/About)。

# c++ - 严格的别名警告，创建对 unsigned char 数组 + 偏移量的 uint32_t 引用

> ID：11282886
> 
> 赞同：3
> 
> 时间：2012-07-01T14:46:03.807
> 
> 标签：c++, c++11, g++, gcc-warning

使用 GNU GCC 4.7.0+，我收到了一些严格的别名警告，我想解决这些问题。

我有一个有效载荷（来自硬件）：

```
unsigned char payload[davidlt::PAYLOAD_SIZE]; 
```

我有这条线：

```
*(uint32_t*)(payload + davidlt::DATA_OFFSET) = (pid & davidlt::PID_MASK) << davidlt::PID_SHIFT; 
```

这将创建一个指向有效负载中特定位置的指针，并且 4 个字节被解释为`uint32_t`. `uint32_t`在有效负载中计算和替换新的值类型。

我得到：

```
warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] 
```

我希望通过使用来解决它`reinterpret_cast`，但我得到了同样的警告。

```
*reinterpret_cast<uint32_t *>(payload + davidlt::DATA_OFFSET) = (pid & davidlt::PID_MASK) << davidlt::PID_SHIFT; 
```

据我了解，您可以将任何数据转换为`char`or `unsigned char`，这是允许的，但这仅适用于一种方式。

一种解决方案是制作一个`union`. 难道没有其他方法可以创建对`unsigned char`数据的不同类型的引用吗？

谢谢！大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T16:55:51.873

是的，允许以 char 或 unsigned char 形式查看数据，但反之则不行。

相反，在这种情况下，您应该使用 memcpy。您的行获取一个`pid`值，对其进行屏蔽、移动，然后将其插入到有效负载中。直接翻译为：

```
unsigned char payload[davidlt::PAYLOAD_SIZE];

uint32_t payload_pid = (pid & davidlt::PID_MASK) << davidlt::PID_SHIFT;

std::memcpy(payload + davidlt::DATA_OFFSET, &payload_pid, sizeof payload_pid); 
```

另一种选择是将有效负载创建为具有适当大小和成员的标准布局类型，然后将其视为无符号字符数组。假设您可以控制创建有效负载：

```
struct Payload {
    ...
    uint32_t pid;
    ...
} payload;

payload.pid = (pid & davidlt::PID_MASK) << davidlt::PID_SHIFT;

static_assert(davidlt::PAYLOAD_SIZE == sizeof(Payload), "");

unsigned char (&payload_as_char)[davidlt::PAYLOAD_SIZE] = reinterpret_cast<unsigned char (&)[davidlt::PAYLOAD_SIZE]>(&payload); 
```

这并没有违反严格的别名规则，因为它现在正朝着正确的方向发展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:04:39.073

您可以做的是创建一个数组`uint32_t`。通过这种方式，您可以访问它们，`uint32_t`也可以访问它们`unsigned char`：这不违反别名规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T14:48:13.977

联合也将是未定义的行为。您只能`char`在这方面使用 - 不允许使用其他类型，包括`unsigned char`.

# plugins - 试图将 hwnd 与 Microsoft Office 中的 Office 文档相关联

> ID：11282887
> 
> 赞同：2
> 
> 时间：2012-07-01T14:46:08.440
> 
> 标签：plugins, ms-office, reverse-engineering, windbg

我有一个非常密集的 Office 插件。

除了标准的 Office 可扩展性点之外，我还挂钩了许多 Win32 API，例如 kernel32!CreateFileW、ole32!StgCreateStorageEx 等（我正在使用 IAT 挂钩）。

但是，我无法解决的一个问题（尽管不知何故无法解决）是从 hwnd 获得指向 Document 接口的指针。

但是，我注意到 Office（在所有程序、所有版本中）在 GWL_USERDATA 的 Windows 存储中放置了一个指针（可能指向内部对象）。

我怎么知道这是一个指向对象的指针？因为它的第一个 DWORD 是指向看起来像 v-table 的指针（一堆地址，都以'push ebp，move ebp，esp'开头）。此外，这个 v-table 的前 3 个方法似乎具有 IUnknown 逻辑（第一个方法调用 MsoHrSimpleQueryInterface2，第二个方法执行“inc”并返回递增的值，第三个方法似乎执行通常的 Release 逻辑）。

然而，我无法取得更大的进步。我正在尝试对这个对象进行各种 QueryInterface 调用，并且我正在尝试阅读其他方法——但运气不佳。

我想知道是否有人曾在这条道路上取得过更好的成绩？

# jpa - 嵌入式 Glassfish SQL 语句失败

> ID：11282889
> 
> 赞同：0
> 
> 时间：2012-07-01T14:46:10.820
> 
> 标签：jpa, glassfish, derby

我开发了一些单元测试，但所有 SQL 语句都失败了，你能看看这个日志和配置吗？

> 2012 年 7 月 1 日下午 4:33:05 org.glassfish.persistence.common.Java2DBProcessorHelper executeDDLs 警告：PER01000：得到 SQLException 执行语句“CREATE TABLE CAR (ID BIGINT NOT NULL, BRAND VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255 )、FUEL VARCHAR(255) NOT NU\ LL、GEARBOX VARCHAR(255) NOT NULL、KILOMETERS INTEGER NOT NULL、MODEL VARCHAR(255) NOT NULL、PRICE INTEGER NOT NULL、TYPE VARCHAR(255) NOT NULL、YEAR INTEGER NOT NULL , EQUIPM\ ENT_ID BIGINT, SECURITY_ID BIGINT, PRIMARY KEY (ID))”：java.sql.SQLSyntaxErrorException：语法错误：在第 1 行第 263 列遇到“YEAR”。2012 年 7 月 1 日下午 4:33:05 org.glassfish .persistence.common.Java2DBProcessorHelper executeDDLs WARNING: PER01000: Got SQLException execution statement "CREATE TABLE VEHICLE (ID BIGINT NOT NULL, MAKE VARCHAR(255) NOT NULL,MODEL VARCHAR(255) NOT NULL, TRIM VARCHAR(255) \ NOT NULL, YEAR INTEGER NOT NULL, PRIMARY KEY (ID))”：java.sql.SQLSyntaxErrorException：语法错误：在第 1 行第 100 列遇到“TRIM”。 2012 年 7 月 1 日下午 4:33:06 org.glassfish.persistence.common.Java2DBProcessorHelper executeDDLs 警告：PER01000：得到 SQLException 执行语句“ALTER TABLE CAR ADD CONSTRAINT FK_CAR_SECURITY_ID FOREIGN KEY (SECURITY_ID) REFERENCES SECURITY (ID)”：java.sql .SQLSy\ ntaxErrorException: 'ALTER TABLE' 不能在 'CAR' 上执行，因为它不存在。2012 年 7 月 1 日下午 4:33:06 org.glassfish.persistence.common.Java2DBProcessorHelper executeDDLs 警告：PER01000：得到 SQLException 执行语句"ALTER TABLE CAR ADD CONSTRAINT CAR_EQUIPMENT_ID FOREIGN KEY (EQUIPMENT_ID) REFERENCES EQUIPMENT (ID)": java.sql.SQLSy\ ntaxErrorException: 'ALTER TABLE' 不能在 'CAR' 上执行，因为它不存在。2012 年 7 月 1 日 4:33 :06 PM com.sun.ejb.containers.BaseContainer initializeHome 信息：EJB5181：EJB VehicleEJB 的可移植 JNDI 名称：[java:global/classes/VehicleEJB!com.thevehiclelist.VehicleEJB, java:global/classes/VehicleEJB] 7 月 1 日， 2012 下午 4:33:06 com.sun.ejb.containers.BaseContainer initializeHome 信息：EJB5181：EJB BookEJB 的可移植 JNDI 名称：[java:global/classes/BookEJB!se.while_se.BookEJB，java:global/classes/BookEJB ] 2012 年 7 月 1 日下午 4:33:06 com.sun.ejb.containers.BaseContainer initializeHome 信息：EJB5181：EJB CarEJB 的可移植 JNDI 名称：[java:global/classes/CarEJB，java：global/classes/CarEJB!se.while_se.CarEJB] 2012 年 7 月 1 日下午 4:33:07 org.eclipse.persistence.session.file:/tmp/gfembed468260415984552053tmp/applications/classes/_carcmsPU 警告：本地异常堆栈：异常 [ EclipseLink-4002]（Eclipse Persistence Services - 2.3.2.v20111125-r10461）：org.eclipse.persistence.exceptions.DatabaseException 内部异常：java.sql.SQLSyntaxErrorException：语法错误：在第 1 行第 39 列遇到“TRIM”。错误代码：20000 调用：INSERT INTO VEHICLE (ID, MAKE, MODEL, TRIM, YEAR) VALUES (?, ?, ?, ?, ?) bind => [5 个参数绑定] 查询：InsertObjectQuery(Vehicle [id=1, year=2007, make=Volvo, model=V70, trim=2.4D]) 在 org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333) 在 org.eclipse.persistence.internal。databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:644) 在 org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535) 在 org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession. java:1717) 在 org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:253) 在 org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207) 在 org.eclipse .persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193) 在 org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.insertObject(DatasourceCallQueryMechanism.java:342) 在 org.eclipse.persistence.internal。query.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:162) 在 org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:177) 在 org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.insertObjectForWrite(DatabaseQueryMechanism. java:472) 在 org.eclipse.persistence.queries.InsertObjectQuery.executeCommit(InsertObjectQuery.java:80) 在 org.eclipse.persistence.queries.InsertObjectQuery.executeCommitWithChangeSet(InsertObjectQuery.java:90) 在 org.eclipse.persistence.internal .queries.DatabaseQueryMechanism.executeWriteWithChangeSet(DatabaseQueryMechanism.java:287) 在 org.eclipse.persistence.queries.WriteObjectQuery.executeDatabaseQuery(WriteObjectQuery.java:58) 在 org.eclipse.persistence.queries.DatabaseQuery。在 org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108) 在 org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:743) 执行(DatabaseQuery.java:844) .persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85) 在 org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)executeInUnitOfWork(ObjectLevelModifyQuery.java:85) 在 org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)executeInUnitOfWork(ObjectLevelModifyQuery.java:85) 在 org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)

我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">

    <persistence-unit name="carcmsPU" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/__default</jta-data-source>

        <class>se.while_se.Book</class>
        <class>se.while_se.Car</class>
        <class>com.thevehiclelist.Vehicle</class>

        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:derby:MyTestDb;create=true" />
            <property name="javax.persistence.jdbc.user" value="" />
            <property name="javax.persistence.jdbc.password" value="" />
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />

        </properties>
    </persistence-unit>
</persistence> 
```

还有我的 pom.xml

```
<dependencies>
                <dependency>
                    <groupId>junit</groupId>
                    <artifactId>junit</artifactId>
                    <version>4.8.1</version>
                    <scope>test</scope>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.persistence</groupId>
                    <artifactId>javax.persistence</artifactId>
                    <version>2.0.0</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.persistence</groupId>
                    <artifactId>eclipselink</artifactId>
                    <version>2.3.2</version>
                </dependency>
                <dependency>
                    <groupId>org.glassfish.main.extras</groupId>
                    <artifactId>glassfish-embedded-all</artifactId>
                    <version>3.1.2</version>
                    <scope>provided</scope>
                </dependency>
                <dependency>
                    <groupId>org.apache.derby</groupId>
                    <artifactId>derby</artifactId>
                    <version>10.8.2.2</version>
                    <scope>provided</scope>
                </dependency>

            </dependencies> 
```

我不知道它可能是什么，尝试了很多谷歌搜索，但没有找到任何关于这个东西的参考代码。你能看看我的配置有什么问题或建议我获取一些文档吗？

最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:52:33.273

第一个错误是您尝试创建一个名为 YEAR 的列，但 YEAR 是 Derby 中的保留字。您应该选择另一个列名。第二个是您尝试创建一个 TRIM 列，也是一个保留字。这里还要选择另一个列名。

据我所知，剩余的错误是由创建第一个表期间的失败引起的。

首先手动创建表并使用您的 IDE 创建相应的持久性类可能更容易且不易出错（Netbeans 使这非常容易，我假设其他 IDE 具有类似的功能）。

还有一件事：为了避免自动创建 255 个字符宽的 varchar 列，您可以在注释中添加所需的长度。在那里，您还可以修复数据库列名。例如，在 db 中有一个 32 字符宽的非空列称为内部修剪，但在代码中修剪：

```
@Column(name = "INTERIORTRIM", nullable = false, length=32)
private String trim; 
```

# android - Android manifest.xml 问题

> ID：11282894
> 
> 赞同：0
> 
> 时间：2012-07-01T14:46:38.347
> 
> 标签：android, xml

在此之后：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)在编辑 Android Manifest.xml 文件时我很困惑。它说该文件应包含以下内容：

```
<application ... >
    <activity android:name="com.example.myapp.DisplayMessageActivity" />
     ...
    </application> 
```

我的 android manifest.xml 看起来像这样：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.nick.myfirstapp"
        android:versionCode="1"
        android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <application android:label="@string/app_name">
       <activity android:name="com.nick.myfirstapp.DisplayMessageActivity" />
        ...
    </application>

</manifest> 
```

当我运行应用程序时，一切都很好，除了它说：“没有找到启动器活动！启动只会同步设备上的应用程序包！” 这是 android manifest.xml 文件中缺少的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:50:07.360

在 AndroidManifest.xml 中声明您的活动，如在启动器中显示为：

```
<application android:label="@string/app_name">
       <activity android:name="com.nick.myfirstapp.DisplayMessageActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

有关更多信息，请参阅我们如何在 Launcher 中设置活动：

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:52:28.587

您需要将清单更改为以下内容。这样做会告诉 Android 您希望使用您的图标在启动器中显示此 Activity。

```
<application android:label="@string/app_name" android:icon="drawable icon resource here">
       <activity android:name="com.nick.myfirstapp.DisplayMessageActivity" android:label="Your Label">
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

在文档中，用于`...`显示您的正常代码位于此处。您正在做的事情对于非启动器活动很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:52:50.563

您缺少启动器意图，因此应用程序在开始时找不到要启动的活动。

您需要像这样布置活动：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T13:46:58.923

```
package="com.example.myfirstapp"

android:versionCode="1"

android:versionName="1.0" >

<uses-sdk

    android:minSdkVersion="8"

    android:targetSdkVersion="17" />

<application

    android:allowBackup="true"

    android:icon="@drawable/ic_launcher"

    android:label="@string/app_name"

    android:theme="@style/AppTheme" >

    <activity

        android:name="com.example.myfirstapp.DisplayMessageActivity"

        android:label="@string/app_name" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>

    </activity>

</application> 
```

# android - Android从媒体播放器中删除快进和快退按钮

> ID：11282895
> 
> 赞同：6
> 
> 时间：2012-07-01T14:46:38.767
> 
> 标签：android, mediacontroller

我想从 Android 的媒体控制器中删除快进和快退按钮。谁能帮我这个？我想在我的主要活动中做这件事。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-11-11T06:18:48.173

创建 MediaController 时，请确保在构造函数中将布尔值设置为**false**：

```
MediaController mediaController = new MediaController(this, false); 
```

从[文档](http://developer.android.com/reference/android/widget/MediaController.html)中：

> 除非使用 MediaController(Context, boolean) 构造函数将布尔值设置为 false，否则将显示“倒带”和“快进”按钮

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T15:00:28.863

如果您尝试从 MediaPlayer 中删除不属于您的应用程序的按钮，这是不可能的。你不能乱用其他应用程序的代码。其中一些可能允许您在启动它们时将其作为额外的意图传递，但大多数可能不会。

如果它是您应用程序的一部分，只需注释掉与按钮相关的代码即可。

编辑：来自[MediaController](http://developer.android.com/reference/android/widget/MediaController.html)文档：

*   除非使用 MediaController(Context, boolean) 构造函数将布尔值设置为 false，否则将显示“倒带”和“快进”按钮

所以你需要做的就是在构造函数中传递 false 。

# objective-c - 在 iOS/OS X 上获取系统启动的准确时间

> ID：11282897
> 
> 赞同：9
> 
> 时间：2012-07-01T14:46:46.453
> 
> 标签：objective-c, ios, macos, time, uptime

是否有 API 来获取`NSDate`或`NSTimeInterval`表示系统启动的时间？某些 API，例如`[NSProcessInfo systemUptime]`Core Motion 和自启动后的返回时间。我需要将这些正常运行时间值与`NSDate`s 精确关联到大约一毫秒。

自启动以来的时间表面上提供了更高的精度，但很容易看出它`NSDate`已经提供了大约 100 纳秒的精度，而任何低于微秒的时间都只是测量中断延迟和 PCB 时钟抖动。

显而易见的是从当前时间中减去正常运行时间`[NSDate date]`。但这假设两个系统调用之间的时间没有变化，这很难实现。此外，如果线程在调用之间被抢占，一切都会被抛弃。解决方法是多次重复该过程并使用最小的结果，但是很糟糕。

`NSDate`必须有一个主偏移量，用于从系统正常运行时间生成具有当前时间的对象，真的没有办法获得吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T14:56:23.183

在 OSX 中，您可以使用[sysctl()](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/sysctl.3.html#//apple_ref/doc/man/3/sysctl)。这就是 OSX Unix 实用程序的`uptime`工作方式。 [源代码](http://www.opensource.apple.com/source/shell_cmds/shell_cmds-149/w/w.c?txt)可用 - 搜索`boottime`.

不过，公平的警告，在 iOS 中，我不知道这是否可行。

**更新：**找到一些代码:)

```
#include <sys/types.h>
#include <sys/sysctl.h>  

#define MIB_SIZE 2  

int mib[MIB_SIZE];
size_t size;
struct timeval  boottime;

mib[0] = CTL_KERN;
mib[1] = KERN_BOOTTIME;
size = sizeof(boottime);
if (sysctl(mib, MIB_SIZE, &boottime, &size, NULL, 0) != -1)
{
    // successful call
    NSDate* bootDate = [NSDate dateWithTimeIntervalSince1970:
                               boottime.tv_sec + boottime.tv_usec / 1.e6];
} 
```

看看这是否有效...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:58:39.867

接受的答案 using`systcl`有效，但 for 返回的值`sysctl`，`KERN_BOOTTIME`至少在我的测试（达尔文内核版本 11.4.2）中，总是以整秒为单位（微秒字段`tv_usec`, 为 0）。这意味着生成的时间可能最多 1 秒，这不是很准确。

此外，将该值与从 和 之间的差异通过实验得出的值进行比较后`REALTIME_CLOCK`，`CALENDAR_CLOCK`它们有时会相差几秒钟，因此尚不清楚该`KERN_BOOTTIME`值是否与正常运行时间时钟的时基完全对应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T12:49:37.703

There is another way. It could give result slightly different (less or more) than [accepted answer](https://stackoverflow.com/a/11282984/751932)

I have compared them. I get difference -7 second for OSX 10.9.3 and +2 second for iOS 7.1.1

As i understand this way gives same result if wall clock changed, but accepted answer gives different results if wall clock changed...

Here code:

```
static CFAbsoluteTime getKernelTaskStartTime(void) {
    enum { MICROSECONDS_IN_SEC = 1000 * 1000 };
    struct kinfo_proc   info;
    bzero(&info, sizeof(info));

    // Initialize mib, which tells sysctl the info we want, in this case
    // we're looking for information about a specific process ID = 0.
    int mib[] = {CTL_KERN, KERN_PROC, KERN_PROC_PID, 0};

    // Call sysctl.
    size_t size = sizeof(info);
    const int sysctlResult = sysctl(mib, COUNT_ARRAY_ELEMS(mib), &info, &size, NULL, 0);
    assert(0 != sysctlResult);

    const struct timeval * timeVal = &(info.kp_proc.p_starttime);
    NSTimeInterval result = -kCFAbsoluteTimeIntervalSince1970;
    result += timeVal->tv_sec;
    result += timeVal->tv_usec / (double)MICROSECONDS_IN_SEC;
    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-03T13:51:32.803

参考这个类别

**NSDate+BootTime.h**

```
#import <Foundation/Foundation.h>

@interface NSDate (BootTime)

+ (NSDate *)bootTime;

+ (NSTimeInterval)bootTimeTimeIntervalSinceReferenceDate;

@end 
```

**NSDate+BootTime.m**

```
#import "NSDate+BootTime.h"

#include <sys/types.h>
#include <sys/sysctl.h>

@implementation NSDate (BootTime)

+ (NSDate *)bootTime {
    return [NSDate dateWithTimeIntervalSinceReferenceDate:[NSDate bootTimeTimeIntervalSinceReferenceDate]];
}

+ (NSTimeInterval)bootTimeTimeIntervalSinceReferenceDate {
    return getKernelTaskStartTime();
}

////////////////////////////////////////////////////////////////////////
#pragma mark - Private
////////////////////////////////////////////////////////////////////////

#define COUNT_ARRAY_ELEMS(arr) sizeof(arr)/sizeof(arr[0])

static CFAbsoluteTime getKernelTaskStartTime(void) {
    enum { MICROSECONDS_IN_SEC = 1000 * 1000 };
    struct kinfo_proc   info;
    bzero(&info, sizeof(info));

    // Initialize mib, which tells sysctl the info we want, in this case
    // we're looking for information about a specific process ID = 0.
    int mib[] = {CTL_KERN, KERN_PROC, KERN_PROC_PID, 0};

    // Call sysctl.
    size_t size = sizeof(info);
    const int sysctlResult = sysctl(mib, COUNT_ARRAY_ELEMS(mib), &info, &size, NULL, 0);
    if (sysctlResult != -1) {

        const struct timeval * timeVal = &(info.kp_proc.p_starttime);
        NSTimeInterval result = -kCFAbsoluteTimeIntervalSince1970;
        result += timeVal->tv_sec;
        result += timeVal->tv_usec / (double)MICROSECONDS_IN_SEC;
        return result;

    }

    return 0;
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T15:15:20.767

与 NSDate 不同，mach/mach_time.h 中的例程保证单调递增。

# c - 内存屏障和缓存刷新

> ID：11282899
> 
> 赞同：11
> 
> 时间：2012-07-01T14:47:05.537
> 
> 标签：c, caching, memory-barriers

即使缓存刷新，是否有任何实现内存屏障的拱门？我读到内存屏障仅影响 CPU 重新排序，但我阅读了与内存屏障相关的语句：*确保所有 cpu 都会看到值...*，但对我来说，这意味着缓存刷新/失效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T15:30:31.163

在几乎所有现代架构上，缓存（如 L1 和 L2 缓存）都由硬件确保一致。无需刷新任何缓存以使内存对其他 CPU 可见。

可以假设一个系统在硬件中缓存不一致，但它看起来与当前运行 Windows 和 Linux 等操作系统的系统完全不同。

这些架构需要内存屏障来做三件事：

1.  CPU 可能会预取因在另一个内核上的写入而无效的读取。必须防止这种情况。（虽然在 x86 上，这在硬件中是被阻止的。预取被锁定到 L1 高速缓存行，因此如果另一个 CPU 使高速缓存行无效，预取也将无效。）

2.  CPU 可能会“发布”写入，但尚未将它们放入其 L1 缓存中。这些写入必须至少完成到 L1 缓存。

3.  CPU 可能会在内存屏障的一侧重新排序读取和写入，而在另一侧进行读取和写入。根据内存屏障的类型，必须禁止其中一些重新排序。（例如，`read x; read y;`不能确保读取按该顺序发生。但`read x; memory_barrier(); read y;`通常会。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T14:53:01.053

内存屏障的确切影响取决于特定的架构

> CPU 采用了可能导致乱序执行的性能优化。内存操作（加载和存储）的重新排序通常不会在单个执行线程中引起注意，但除非仔细控制，否则会导致并发程序和设备驱动程序出现不可预知的行为。排序约束的确切性质取决于硬件，并由体系结构的内存排序模型定义。一些架构提供了多个障碍来执行不同的排序约束。

[http://en.wikipedia.org/wiki/Memory_barrier](http://en.wikipedia.org/wiki/Memory_barrier)

当前的英特尔架构确保所有 CPU 的自动缓存一致性，而无需显式使用内存屏障或缓存刷新指令。

> 在对称多处理器 (SMP) 系统中，每个处理器都有一个本地缓存。内存系统必须保证高速缓存的一致性。当不同处理器上的线程修改驻留在同一高速缓存行上的变量时，就会发生错误共享。这会使缓存行无效并强制更新，这会损害性能。

[http://software.intel.com/en-us/articles/avoiding-and-identifying-false-sharing-among-threads/](http://software.intel.com/en-us/articles/avoiding-and-identifying-false-sharing-among-threads/)

# opengl-es - glClear（GL_DEPTH_BUFFER_BIT）的目的是什么

> ID：11282905
> 
> 赞同：7
> 
> 时间：2012-07-01T14:48:08.307
> 
> 标签：opengl-es, opengl-es-2.0

使用Opengl绘制场景图的时候，看到总有一个glClear(GL_DEPTH_BUFFER_BIT)，这是什么目的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T15:05:07.317

它清除深度缓冲区。深度缓冲区是帧缓冲区的一部分，它使图元被前面的其他图元遮挡。在不清除深度缓冲区的情况下，您将绘制到先前绘图的深度结构中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:25:31.997

将物体绘制到屏幕上时，首先要考虑屏幕（平面）与物体之间的距离。该距离值存储为 Z 值（Z 缓冲区）。如果平面和对象之间存在另一个对象B，则Z值用于确定应该在该像素上绘制哪个对象。所以你应该明白为什么我们每次初始化程序时都需要清空Z-buffer。这样，我们可以确保 Z-buffer 值中没有存储不正确的值，这些值可能会被意外绘制到屏幕上。

# google-app-engine - 是否可以在 GAE .filter() 中使用 OR 语句？

> ID：11282908
> 
> 赞同：1
> 
> 时间：2012-07-01T14:48:22.057
> 
> 标签：google-app-engine, google-cloud-datastore

例如，如果我想通过护照号码**或**驾驶执照号码进行搜索，我应该如何替换以下代码：

```
employees.filter('passport_id =', passport_id)
employees.filter('dlicense_id =', dlicense_id) 
```

或者，我应该改用两个查询吗？

那我该如何合并结果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:18:13.950

[不，根据文档](https://developers.google.com/appengine/docs/python/datastore/gqlreference#Syntax)，您不能使用 OR

> 可选的 WHERE 子句将结果集过滤到满足一个或多个条件的实体。每个条件都使用比较运算符将实体的属性与值进行比较。如果使用 AND 关键字给出多个条件，则实体必须满足查询返回的所有条件。GQL 没有 OR 运算符。但是，它确实有一个 IN 运算符，它提供了有限的 OR 形式。

关于您的第二个问题，这里有一篇关于 Google Groups 的[帖子](https://groups.google.com/forum/?fromgroups#!topic/google-appengine/qyrkJLAxo_g)，可以帮助您合并结果。

# hadoop - 用 mapreduce 术语为很长的关键字列表表达类似 grep 的算法

> ID：11282910
> 
> 赞同：1
> 
> 时间：2012-07-01T14:48:36.257
> 
> 标签：hadoop, mapreduce

我无法用 mapreduce 术语表达算法。

我有两个大的输入文本文件：我们称第一个文件为“R”，第二个文件为“P”。R 通常比 P 大得多，但两者都很大。

在非 mapreduce 方法中，P 的内容将被加载到内存中（散列），然后我们将开始迭代 R 中的所有行。R 中的行只是字符串，我们想检查是否有任何子字符串在 R 中匹配 P 中的任何字符串。

该问题与在大文件中查找单词非常相似，问题是单词列表非常大，因此您无法在地图例程中对它们进行硬编码。

我遇到的问题是我不知道如何确保 P 文件的所有拆分最终在每个 R 文件拆分的映射作业中结束。所以，假设这些分裂：

```
R = R1, R2, R3;
P = P1, P2 
```

6 个地图作业必须包含这些拆分：

```
(R1, P1) (R1, P2);
(R2, P1) (R2, P2);
(R3, P1) (R3, P2); 
```

你会如何用 mapreduce 术语表达这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:32:08.120

我花了一些时间来解决这个问题，并提出了几个解决方案。第一个基于 hadoop 流，第二个使用原生 java。

对于第一个解决方案，我使用了 ruby​​ 的一个有趣的特性。如果`__END__`在代码末尾添加关键字，则之后的所有文本都将由解释器通过全局变量 DATA 公开。这个变量是一个 File 对象。例子：

```
$ cat /tmp/foo.rb
puts DATA.read

__END__
Hello World!
$ ruby /tmp/foo.rb
Hello World! 
```

我们将使用文件 R 作为输入（它将分布在 HDFS 文件系统中）。我们遍历 P 文件并在遍历一定数量的行之后，将它们添加到映射器脚本的末尾。然后，我们将作业提交到 hadoop 集群。我们不断迭代 P 的内容，直到我们用完所有行。多个作业将根据每个作业的行数和 P 的大小发送到集群。

这是我实施的一种很好的方法，而且效果很好。不过我觉得不是特别优雅。我们可以通过在 java 中编写本机 mapreduce 应用程序来做得更好。

使用本机 Java 应用程序时，我们可以完全访问 hadoop HDFS API。这意味着我们可以从代码中读取文件的内容。这是我认为流式传输时不可用的东西。

我们采用类似于流式方法的方法，但是一旦我们遍历了一定数量的行，我们就会将它们发送到 hadoop 集群，而不是将其附加到代码中。我们可以在安排工作的代码中做到这一点。

然后，运行与我们对 P 的拆分数量一样多的作业的问题。特定作业中的所有映射器将加载某个拆分并使用它来计算 R 的拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:21:28.527

好问题。

我能想到的一种快速方法是将 P 文件拆分为多个文件并运行多个 MR 作业，每次拆分 P 文件和完整的 R 文件作为输入。

# .htaccess - .htaccess 重定向目录树中的所有 .shtml 文件，不理会其他文件

> ID：11282911
> 
> 赞同：1
> 
> 时间：2012-07-01T14:48:44.213
> 
> 标签：.htaccess, redirect

我在重定向/重写方面很糟糕。我在网站的特定子目录树中有许多 .shtml 文件，我想要 301 到 .html。所有其他 .shtml 文件都应保留。使用 Apache，RewriteEngine 已打开。

具体来说，将`www.domain.com/homes/cityname/file.shtml`许多城市和文件更改为 .html。`homes`子目录是不变的。

`www.domain.com/status.shtml`保持原状，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:07:36.617

尝试：

```
RedirectMatch 301 ^/homes/(.*)\.shtml /homes/$1.html 
```

如果您更愿意使用 mod_rewrite 而不是 mod_alias：

```
RewriteRule ^homes/(.*)\.shtml /homes/$1.html [R=301] 
```

# c# - 我从数据库中获取结果的 SQL 查询不起作用

> ID：11282913
> 
> 赞同：-2
> 
> 时间：2012-07-01T14:48:48.377
> 
> 标签：c#, sql

我正在尝试从`Users`表中获取所有列，并将其存储`holder`为数组，以便我可以从中访问所有行。但问题是当我在代码中设置断点时，`holder`变量只显示值`Webmatrix.Data.Database`，这是为什么呢？

```
@{
    var db = Database.Open("test");
    var holder = db.QuerySingle("SELECT * FROM Users WHERE id = 1");
} 
```

这显然是错误的，所以请纠正我的错误:) 谢谢！

（*编辑以包含我实际代码中的第二个双引号，但在这个问题中错过了*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:54:26.617

您的查询缺少右双引号 ( `"`)。以下将起作用：

```
@{
    var db = Database.Open("test");
    var holder = db.QuerySingle("SELECT * FROM Users WHERE id = 1");
} 
```

# iphone - 是否可以访问原始 iphone 音频输出？

> ID：11282919
> 
> 赞同：2
> 
> 时间：2012-07-01T14:49:15.087
> 
> 标签：iphone, ios, audio

是否可以从 iphone 音频输出访问原始 PCM 数据？

我知道我可以嵌入 MP3 并使用 AudioUnit。但是，如果用户在后台从他们的 iTunes 库中播放音乐，是否可以访问该音频数据？

这是一个显示视觉效果的应用程序，它对音乐做出反应。

据我所知，这是不可能的，但这只是因为根本找不到任何信息，而不是实际确认无法完成。

如果无法从 ipod 访问音频流，是否可以从应用程序内的媒体播放器访问原始音频输出，或者根本不允许访问 iTunes 库中的原始音频数据？

**编辑**：我发现了这个问题：[iOS - Access output audio from background program](https://stackoverflow.com/questions/7340947/ios-access-output-audio-from-background-program?rq=1)，这表示我无法从后台应用程序访问音频。但是，如果我在应用程序中播放它，是否可以从 iTunes 库中获取音频数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:12:59.363

如果您的应用正在播放原始音频 PCM 样本，那么您的应用可以访问这些样本。一个应用程序无权访问另一个应用程序（包括音乐播放器）通过任何公共 API 播放的音频样本。

应用程序可以使用 AVAssetReader 和 Writer 将 iTunes 库中的 mp3 文件转换为原始音频 (WAV) 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:27:29.993

我正忙于编写类似的代码，据我所知，需要一个 AUGraph，即从记录器中提取的硬件。您必须从用户使用 Apple 的 MPMediaPickerViewController 选择的轨道中获取 MPMediaItem 的 URL。然后将 URL 与 Core-Audio 一起使用。Core-Audio 是一头野兽。

# ruby - 我无法安装 rcov，makefile 警告 124 和 130

> ID：11282922
> 
> 赞同：0
> 
> 时间：2012-07-01T14:49:31.787
> 
> 标签：ruby, rubygems, gem, makefile

我无法安装 rcov gem ;-( 我使用的是 BitNami Redmine，Windows 7。

```
gem install rcov 
```

结果：

```
 Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing rcov:
        ERROR: Failed to build gem native extension.

        "C:/Program Files/BitNami Redmine Stack/ruby/bin/ruby.exe" extconf.rb
creating Makefile

make
Makefile:130: warning: overriding commands for target `C:/Program'
Makefile:124: warning: ignoring old commands for target `C:/Program'
Makefile:130: warning: overriding commands for target `Files/BitNami'
Makefile:124: warning: ignoring old commands for target `Files/BitNami'
Makefile:130: warning: overriding commands for target `Redmine'
Makefile:124: warning: ignoring old commands for target `Redmine'
make: *** No rule to make target `ruby.h', needed by `callsite.o'.  Stop.

Gem files will remain installed in C:/Program Files/BitNami Redmine Stack/ruby/l
ib/ruby/gems/1.8/gems/rcov-1.0.0 for inspection.
Results logged to C:/Program Files/BitNami Redmine Stack/ruby/lib/ruby/gems/1.8/
gems/rcov-1.0.0/ext/rcovrt/gem_make.out 
```

在此消息之前，BitNami 告诉我安装 DevKit。我安装了 DevKit，编辑了 confiy.yml（-C:/Program Files/BitNami Redmine Stack/ruby——也许这是我的错，因为我没有写“”）并开始安装 DevKit。一切都很好，但无法安装 gem。在我看来，将 Redmine 安装到带有空格的文件夹中是一个非常糟糕的主意。

我搜索了一个解决方案，但没有一个解决方案起作用;-(

解决方案 1：我将 BitNami 路径替换为 X，尝试安装，但没有成功。解决方案 2：使用 Microsoft C++ Express 建议 (http://minimalbugs.com/questions/how-to-install-gem-rcov-on-windows) 解决方案 3：旧版本的 rcov（如 0.9.11）也没有不工作

如果我尝试安装 rdiscount gem，我会遇到类似的错误（Makefile 130 / 124 / ... C:/Program/...）。

现在我需要帮助 ;-)

我的宝石：

```
*** LOCAL GEMS ***

actionmailer (3.2.6, 2.3.14)
actionpack (3.2.6, 2.3.14)
activemodel (3.2.6)
activerecord (3.2.6, 2.3.14)
activeresource (3.2.6, 2.3.14)
activesupport (3.2.6, 2.3.14)
addressable (2.2.8)
after_commit (1.0.10)
allison (2.0.3)
arel (3.0.2)
aws-sdk (1.5.5, 1.5.2)
bcrypt-ruby (3.0.1 x86-mingw32)
bluecloth (2.1.0 x86-mingw32)
builder (3.0.0, 2.1.2)
bundler (1.1.4, 1.0.21)
capistrano (2.12.0, 2.9.0)
capybara (1.1.2)
cgi_multipart_eof_fix (2.5.0)
childprocess (0.3.3)
coderay (1.0.7, 1.0.6)
crack (0.3.1)
cucumber (1.2.1, 0.9.4)
cucumber-rails (1.3.0, 0.3.2)
daemons (1.1.8, 1.0.10)
delayed_job (3.0.3, 2.0.7)
diff-lcs (1.1.3, 1.1.2)
echoe (4.5.6)
edavis10-object_daddy (0.4.3)
erubis (2.7.0)
eventmachine (0.12.10)
fastercsv (1.5.5, 1.5.4)
ffi (1.0.9 x86-mingw32)
gem_plugin (0.2.3)
gemcutter (0.7.1)
gherkin (2.11.1 x86-mingw32, 2.2.9 x86-mingw32)
gruff (0.3.6)
highline (1.6.13, 1.6.8)
hike (1.2.1)
hoe (3.0.6, 2.12.4)
hpricot (0.8.5 i386-mswin32)
httparty (0.8.3, 0.8.1)
i18n (0.6.0, 0.4.2)
journey (1.0.4, 1.0.3)
json (1.4.6 x86-mingw32)
json_pure (1.7.3, 1.6.3)
libwebsocket (0.1.3)
mail (2.4.4)
memcache-client (1.8.5)
metaclass (0.0.1)
mime-types (1.19, 1.18)
mini_magick (3.4, 3.3)
mocha (0.11.4, 0.10.5)
mongrel (1.1.5 x86-mingw32)
mongrel_cluster (1.0.5)
mongrel_service (0.4.0)
multi_json (1.3.6, 1.1.0)
multi_xml (0.5.1, 0.4.1)
mysql (2.8.1 x86-mingw32)
needle (1.3.0)
net-ldap (0.3.1)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.5.2, 2.2.1)
net-ssh-gateway (1.1.0)
nokogiri (1.5.5 x86-mingw32, 1.5.0 x86-mingw32, 1.4.4 x86-mingw32)
polyglot (0.3.3)
prototype-rails (3.2.1)
rack (1.4.1, 1.1.3)
rack-cache (1.2)
rack-openid (1.3.1)
rack-ssl (1.3.2)
rack-test (0.6.1, 0.5.7)
rails (3.2.6, 2.3.14)
rails_analyzer_tools (1.4.0)
railties (3.2.6)
rake (0.9.2.2)
rake-compiler (0.8.1, 0.7.9)
rdoc (3.12, 3.11)
RedCloth (4.2.9 x86-mingw32)
riddle (1.5.2, 1.5.0)
rmagick (2.12.0)
rspec (2.10.0, 2.7.0)
rspec-core (2.10.1, 2.7.1)
rspec-expectations (2.10.0, 2.7.0)
rspec-mocks (2.10.1, 2.7.0)
ruby-openid (2.1.8)
rubyforge (2.0.4)
rubyzip (0.9.9)
selenium-webdriver (2.24.0)
simplecov (0.6.4)
simplecov-html (0.5.3)
sprockets (2.4.3, 2.1.3, 2.1.2)
sqlite3 (1.3.6 x86-mingw32, 1.3.5 x86-mingw32)
sqlite3-ruby (1.3.2 x86-mingw32)
subexec (0.2.2, 0.1.0)
SyslogLogger (1.4.1, 1.4.0)
term-ansicolor (1.0.7)
thin (1.3.1)
thinking-sphinx (2.0.12, 1.4.10)
thor (0.15.3, 0.14.6)
tilt (1.3.3)
treetop (1.4.10, 1.4.5)
tzinfo (0.3.33)
uuidtools (2.1.2)
webrat (0.7.3)
xpath (0.1.4)
yard (0.8.2.1, 0.8.1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:01:56.943

我有同样的错误。一切都通过更改 Bitnami Redmine Stack 的安装位置自行解决。默认位置是 C:\Program Files\Bitnami Redmine Stack\

DevKit 中包含的“make”无法处理路径名中的空格。我将 bitnami 堆栈安装到 C:\BitNamiRedmine\，现在一切正常。

1.  将 Bitname Redmine 安装到没有空格的路径，例如`C:\BitNamiRedmine\`
2.  下载 Ruby 开发工具包 -> [http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)
3.  将 DevKit 解压到 C:\BitNamiRedmine\ruby\devkit\
4.  `use_redmine.bat`
5.  `cd ruby\devkit`
6.  跑`ruby dk.rb init`
7.  `- "C:/BitNamiRedmine/ruby"`在 DevKit 文件夹中的 config.yml 中添加 » «（不带 »«，重要提示：正斜杠！）
8.  跑`ruby dk.rb install`
9.  完毕！

现在您可以导航到您的 apps/redmine/htdocs 文件夹并运行`gem install rcov`. 在 Windows Server 2008 R2 上测试。

# c++ - 在调用vector::assign()之前调用vector::reserve()会更好吗？

> ID：11282923
> 
> 赞同：9
> 
> 时间：2012-07-01T14:49:35.807
> 
> 标签：c++, stl

我知道使用“保留”来避免不必要的重新分配是一个好习惯（有效 STL 的第 14 项）：

```
std::vector<int> v1;
v1.reserve(1000);

for (int i = 0; i < 1000; i++)
    v1.push_back(i); 
```

当您调用assign时是否适用相同的规则？

```
std::vector<int> v2;
//v2.reserve(v1.size()); // Better to do this?
v2.assign(v1.begin(), v1.end()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T14:53:20.207

如果什么时候`v1`你`std::vector`真的不需要它，因为编译器/stl 知道里面有多少项目`v2`（并且`reserve`在复制实际数据之前需要的数量本身）。

但是，对于一般情况，如果输入容器 ( ) 不知道有多少项目，并且您手头有数量`reserve`，则提前确定所需数量可能是有意义的。`v1`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-01T16:05:04.427

是否调用`reserve`取决于：

*   迭代器类型：对于输入迭代器，实现无法猜测大小
*   库的质量：它可能不专门用于“更好”的迭代器
*   性能是否值得降低可维护性

让我们按顺序取 3 点。

*1) 迭代器类型*

该`assign`方法采用两个迭代器，它们至少必须符合`InputIterator`模型。问题是这个模型代表了纯粹的来源（比如来自网络的字节）：你可以从中消费两次。结果，给定两个`InputIterator`，如果不提取数据就无法计算它们之间的距离（除非您根本不想要数据，但这不是 assign 的目的），因此您不能先“保留”。

至少`std::distance`需要`FowardIterator`.

*2) 实施质量*

我不认为标准实际上要求“更好的”迭代器（至少是模型`ForwardIterator`）执行`assign`两次遍历范围。在受内存带宽限制的计算中（想象在磁带上读取该信息，倒带时间非常慢），这实际上会更昂贵。

但是，许多实现（例如 libc++，见下文）将专门`assign`化，以便在存在时`ForwardIterator`首先调用`std::distance`以在必要时保留正确的内存量。

注意：顺便说一句，这同样适用于大量插入。

*3) 维护负担*

我会注意到，尽管可能有所收获，但您（可能在不知不觉中）在这里复制了信息。

```
size_t size = std::distance(begin, end);

if (begin != end) ++begin; // new line

v.reserve(size);
v.assign(begin, end); 
```

看看新行的出现如何突然使代码稍微不正确？并不是说它不起作用，而是声称的优化不再那么正确：您现在预留太多了！

*就我个人而言，我相信我的标准库实现会做正确的事情。写它们的人比我有更多的经验。*

如果它确实是您的应用程序中已确定的瓶颈，您可以随时尝试自己的方式。只需编写一个`reserve_and_assign`方法以使其显而易见，并衡量它是否更好。

* * *

作为参考，这里是 libc++ 的实现，[取自这里](http://llvm.org/svn/llvm-project/libcxx/trunk/include/vector)：

```
template <class _Tp, class _Allocator>
template <class _InputIterator>
typename enable_if
<
     __is_input_iterator  <_InputIterator>::value &&
    !__is_forward_iterator<_InputIterator>::value,
    void
>::type
vector<_Tp, _Allocator>::assign(_InputIterator __first, _InputIterator __last)
{
    clear();
    for (; __first != __last; ++__first)
        push_back(*__first);
}

template <class _Tp, class _Allocator>
template <class _ForwardIterator>
typename enable_if
<
    __is_forward_iterator<_ForwardIterator>::value,
    void
>::type
vector<_Tp, _Allocator>::assign(_ForwardIterator __first, _ForwardIterator __last)
{
    typename iterator_traits<_ForwardIterator>::difference_type __new_size = _VSTD::distance(__first, __last);
    if (static_cast<size_type>(__new_size) <= capacity())
    {
        _ForwardIterator __mid = __last;
        bool __growing = false;
        if (static_cast<size_type>(__new_size) > size())
        {
            __growing = true;
            __mid =  __first;
            _VSTD::advance(__mid, size());
        }
        pointer __m = _VSTD::copy(__first, __mid, this->__begin_);
        if (__growing)
            __construct_at_end(__mid, __last);
        else
            this->__destruct_at_end(__m);
    }
    else
    {
        deallocate();
        allocate(__recommend(static_cast<size_type>(__new_size)));
        __construct_at_end(__first, __last);
    }
} 
```

# python - 如何用 __init__.py 组织代码？

> ID：11282924
> 
> 赞同：4
> 
> 时间：2012-07-01T14:49:49.197
> 
> 标签：python, google-app-engine, organization

我刚刚开始使用谷歌应用引擎，并且一直在寻找良好的实践和代码组织。我的大部分问题都来自于`__init__.py`.

我当前的测试结构看起来像

```
/website
  main.py
  /pages
    __init__.py #1
    blog.py
    hello2.py
    hello.py
    /sub
      __init__.py #2
      base.py 
```

我正在尝试使用 main.py 作为一个文件，它只指向 /pages 和 /pages/sub 中的所有内容。/pages 中的大多数模块共享几乎所有相同的导入（例如 import urllib），有没有办法定义 /pages 中的所有内容都导入我想要的内容，而不是将其添加到每个单独的模块中？

目前在`__init__.py`＃1我有

```
from sub.base import * 
```

然而我的模块 blog.py 说 BaseHandler（base.py 中的一个函数）没有定义。我的最终目标是拥有类似...

```
main.py
from pages import *
#be able to call any function in /pages without having to do blog.func1() or hello.func2()
#rather just func1() and func2() 
```

并且能够共享 in`/pages`中模块的通用导入`__init__.py`。这样他们就可以共享例如 urllib 和 base.py 中的所有函数。感谢您花时间阅读这篇文章，我期待您的见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T17:06:06.680

听起来您认为`__init__.py`它是包中其他模块的初始化程序。它不是。它变成`pages`一个包（允许它的文件和子目录成为模块），当你的程序调用`import pages`. 想象一下，它被命名`pages.py`了。

因此，如果您真的想将所有内容转储到同一个命名空间中，则 init #2 可以包含 `from base import *`（它将将所有内容导入`base`到 的命名空间中`sub`），并且`blog.py`可以包含`from sub import *`. 知道了？

# javascript - 双重触发 onblur 事件

> ID：11282925
> 
> 赞同：2
> 
> 时间：2012-07-01T14:49:49.467
> 
> 标签：javascript, jquery, ajax

我有javascript代码，应该在焦点转移时执行一次。一切正常，但是由于某种奇怪的原因，这段代码被执行了两次，因此我给出了两个警报窗口。

```
$(document).ready(function() {
    $('#username').blur(function() {

        var formData = {
            "username":$('#username').val()
        };

        $.ajax({
            url:'check.php',
            type:'POST',
            data:'jsonData=' + $.toJSON(formData),
            success: function(res) {
                alert(res);
            }

        });
    });
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:55:35.277

*当浏览器窗口*失去焦点时，某些浏览器（Chrome，可能是 Safari）会触发单独的“模糊”事件。这对我来说似乎是一个错误，我不知道可以做些什么。

详细说明：如果你有一个“模糊”处理程序`<input>`，并且它有焦点，然后你在浏览器窗口外单击（或 ALT-TAB 到另一个应用程序），那么 Chrome 会触发*两个*“模糊”事件。这两个事件看起来几乎相同，因此很难判断您是否应该注意。

我最好的建议是在“焦点”和“模糊”上切换一些“类”值或某些东西，并忽略看起来不处于正确“我只是集中”状态的“模糊”。

[这是我在该问题上发布的问题。](https://stackoverflow.com/questions/9649966/chrome-maybe-safari-fires-blur-twice-on-input-fields-when-browser-loses-foc)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T07:35:21.890

我将此代码移到#username div 之前，一切正常。

# linux - 是否可以从sched_entity中找到对应的task_struct？

> ID：11282927
> 
> 赞同：4
> 
> 时间：2012-07-01T14:49:53.777
> 
> 标签：linux, linux-kernel, scheduler

我知道如果我们有 task_struct，我们可以得到包含的 sched_entity，因为它是任务结构中的一个字段。但是我们可以在给定 shed_entity 的情况下获得指向 task_struct 的指针吗？以下是 sched_entity 结构：

```
struct sched_entity {
    struct load_weight  load;       /* for load-balancing */
    struct rb_node      run_node;
    struct list_head    group_node;
    unsigned int        on_rq;

    u64         exec_start;
    u64         sum_exec_runtime;
    u64         vruntime;
    u64         prev_sum_exec_runtime;

    u64         nr_migrations;

#ifdef CONFIG_SCHEDSTATS
    struct sched_statistics statistics;
#endif

#ifdef CONFIG_FAIR_GROUP_SCHED
    struct sched_entity *parent;
    /* rq on which this entity is (to be) queued: */
    struct cfs_rq       *cfs_rq;
    /* rq "owned" by this entity/group: */
    struct cfs_rq       *my_q;
#endif
}; 
```

似乎没有地方可以得到task_struct。我的最终目标是使用这个 shed_entity 获得包含任务的任务 group_leader 的 sched_entity ：>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T16:48:03.313

Linux 内核代码提供了一种标准方法来获取指向结构中包含的元素的指针，并返回指向包含结构的指针：[`container_of`](http://lxr.linux.no/linux+v3.4.4/include/linux/kernel.h#L673)宏，在整个内核中广泛使用。

在这种情况下，如果你有一个`struct sched_entity *foo`，你可以得到封闭`task_struct`：

```
struct task_struct *task = container_of(foo, struct task_struct, se); 
```

（显然，只有当您确定原始`struct sched_entity *`指针指向 a`struct sched_entity`内的 a时，这才是安全的`struct task_struct`，所以要小心......）

# c - gcc 分支预测

> ID：11282938
> 
> 赞同：0
> 
> 时间：2012-07-01T14:51:02.840
> 
> 标签：c, gcc, assembly, branch-prediction

这是我的演示程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int cmp(const void *d1, const void *d2)
{
    int a, b;

    a = *(int const *) d1;
    b = *(int const *) d2;

    if (a > b)
        return 1;
    else if (a == b)
        return 0;

    return -1;
}

int main()
{
    int seed = time(NULL);
    srandom(seed);

    int i, n, max = 32768, a[max];

    for (n=0; n < max; n++) {

        int r = random() % 256;
        a[n] = r;

    }

    qsort(a, max, sizeof(int), cmp);

    clock_t beg = clock();

    long long int sum = 0;

    for (i=0; i < 20000; i++) 
    {
        for (n=0; n < max; n++) {
            if (a[n] >= 128)
                sum += a[n];
        }
    }

    clock_t end = clock();

    double sec = (end - beg) / CLOCKS_PER_SEC;

    printf("sec: %f\n", sec);
    printf("sum: %lld\n", sum);

    return 0;
}

unsorted
sec: 5.000000
sum: 63043880000

sorted
sec: 1.000000
sum: 62925420000 
```

这是该程序两个版本的程序集差异，一个有`qsort`一个没有：

```
--- unsorted.s  
+++ sorted.s    
@@ -58,7 +58,7 @@
    shrl    $4, %eax
    sall    $4, %eax
    subl    %eax, %esp
-   leal    4(%esp), %eax
+   leal    16(%esp), %eax
    addl    $15, %eax
    shrl    $4, %eax
    sall    $4, %eax
@@ -83,6 +83,13 @@
    movl    -16(%ebp), %eax
    cmpl    -24(%ebp), %eax
    jl  .L7
+   movl    -24(%ebp), %eax
+   movl    $cmp, 12(%esp)
+   movl    $4, 8(%esp)
+   movl    %eax, 4(%esp)
+   movl    -32(%ebp), %eax
+   movl    %eax, (%esp)
+   call    qsort
    movl    $0, -48(%ebp)
    movl    $0, -44(%ebp)
    movl    $0, -12(%ebp) 
```

据我了解汇编输出，排序后的版本由于将值传递给了更多的代码`qsort`，但我没有看到任何分支优化/预测/任何东西。也许我看错了方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:52:29.340

分支预测不是您在汇编代码级别看到的；它是由 CPU 自己完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-24T20:52:57.873

> ### [内置函数](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)：long`__builtin_expect (long exp, long c)`
> 
> 您可以使用`__builtin_expect`为编译器提供分支预测信息。***一般来说，您应该更喜欢为此 ( `-fprofile-arcs`)***使用实际的配置文件反馈，因为众所周知，程序员不善于预测他们的程序实际执行情况。但是，有些应用程序很难收集这些数据。
> 
> 返回值是 的值`exp`，它应该是一个*整数表达式*。内置的语义是期望 `exp == c`. 例如：
> 
> ```
> if (__builtin_expect (x, 0))
>   foo (); 
> ```
> 
> 表示我们不希望跟注`foo`，因为我们`x`希望*为零*。由于您仅限于 的*积分表达式*，`exp`因此您应该使用诸如
> 
> ```
> if (__builtin_expect (ptr != NULL, 1))
>   foo (*ptr); 
> ```
> 
> 在测试*指针*或*浮点*值时。

### ***否则分支预测由处理器确定...***

> [分支预测](https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-optimization-manual.pdf#G3.1116080)预测分支目标并使处理器能够在知道分支真实执行路径之前很久就开始执行指令。所有分支都使用分支预测单元 (BPU) 进行预测。该单元不仅根据分支的 EIP，还根据执行到达该 EIP 的执行路径来预测目标地址。BPU 可以有效地预测以下分支类型：
> 
> • 条件分支。
> 
> • 直接呼叫和跳转。
> 
> • 间接调用和跳转。
> 
> • 退货。

* * *

> [微架构试图通过将最可能的分支输入管道并推测性地执行它来克服这个问题。](http://www.agner.org/optimize/microarchitecture.pdf#%5B%7B%22num%22%3A30%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22XYZ%22%7D%2C87%2C785%2C0%5D)

### *[...使用各种分支预测方法](http://www.agner.org/optimize/microarchitecture.pdf#%5B%7B%22num%22%3A30%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22XYZ%22%7D%2C87%2C296%2C0%5D)。*

# java - m2eclipse search 只搜索本地仓库

> ID：11282943
> 
> 赞同：1
> 
> 时间：2012-07-01T14:51:32.643
> 
> 标签：java, eclipse, maven, m2eclipse

我在 Springsource Tool Suite 中安装了 m2eclipse。我安装了 m2eclipse 指向的 Maven 3.0.3。当我尝试搜索新工件时 - 使用 Maven > 添加依赖项，它似乎只显示来自我本地存储库的结果。如果我在我的 POM 中手动输入一个新的依赖项，eclipse 将解决它（将它拉到我项目的类路径中）。由于某种原因，仅搜索不起作用。我知道有很多关于这个主题的类似帖子，但没有一个能解决我的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:18:18.440

好的，找到了解决方案：

[http://paulbunting.wordpress.com/2010/12/22/spring-tool-suite-sts-m2eclipse-add-dependency-not-working/](http://paulbunting.wordpress.com/2010/12/22/spring-tool-suite-sts-m2eclipse-add-dependency-not-working/)

# user-agent - 什么是三星 s3 用户代理？

> ID：11282944
> 
> 赞同：10
> 
> 时间：2012-07-01T14:51:35.123
> 
> 标签：user-agent, samsung-mobile

我试图找出三星 Galaxy S3 的用户代理是什么。

我没有设备，所以我无法测试自己。用户代理将被我的 Web 服务器识别。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T08:06:57.703

Mozilla/5.0 (Linux; U; Android 4.0.4; en-gb; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T17:46:43.280

[我的用户代理是什么？](http://whatsmyuseragent.com/)是一个很好的工具，可以用来确定当前浏览器的用户代理是什么。只需在您想要 UA 的任何设备的浏览器中导航到它。

如果您没有要测试的设备，该站点也有一个通用用户代理部分。确定要测试的 UA 后，您可以使用[User Agent-Switcher for Chrome](https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg)插件让 Chrome 模仿该 UA。

**完全披露：我不为创建这些工具的人工作或不认识创建这些工具的人，只是想我会与社区分享一些我使用的工具:)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-30T04:14:01.713

*   没有特定设备的用户代理之类的东西。
*   用户代理依赖于用于访问 Web 服务器的客户端（例如 Web 浏览器）
*   用户代理也因运行的 Android 版本而异
*   您至少需要查找特定浏览器的用户代理字符串（例如默认的 Android 浏览器或 Chrome）
*   此外，Android 中的应用程序都在自己的 VM 中运行，称为“Dalvik”。在某些情况下，可以在 http 标头中报告 Dalvik 用户代理字符串。

# android - 如何使用一个游标从数据库中检索 2 列数据

> ID：11282945
> 
> 赞同：2
> 
> 时间：2012-07-01T14:51:37.640
> 
> 标签：android, database, cursor

我如何使用一个游标从数据库中检索 2 列数据....现在我一次使用 2 个游标，例如

```
ArrayList<String> sender_array = new ArrayList<String>();
ArrayList<String> body_array = new ArrayList<String>();

messagedb=ListView.this.openOrCreateDatabase("message",0, null);
    messagedb.execSQL("CREATE TABLE IF NOT EXISTS tab2(sender INT(13),body varchar)");

Cursor  cur1=mydb.rawQuery("select * from tab2", null);

    while(cur.moveToNext())
    {
        String sender1=cur.getString(cur.getColumnIndex("sender"));
                    sender_array.add(sender1);
    }
    cur1.close();
Cursor  cur2=mydb.rawQuery("select * from tab2", null);

    while(cur.moveToNext())
    {
        String body1=cur.getString(cur.getColumnIndex("body"));
                    body_array.add(body1);
    }
    cur2.close();

    messagedb.close(); 
```

如何使用一个光标弹出列表视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:26:06.800

```
Cursor  cur=mydb.rawQuery("select sender, body from tab2", null);
while(cur.moveToNext())
{
    String sender = cur.getString(0);
    String body = cur.getString(1);
}
cur.close(); 
```

或者这更安全，如果您决定稍后更改列顺序

```
Cursor  cur=mydb.rawQuery("select sender, body from tab2", null);
while(cur.moveToNext())
{
    String sender = cur.getString(cur.getColumnIndex("sender"));
    String body = cur.getString(cur.getColumnIndex("body"));
}
cur.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:05:09.527

使用一个光标，如下所示：

```
Cursor  cur=mydb.rawQuery("select sender, body from tab2", null); 
```

**更新：**

不需要 ArrayList，可以直接将 Cursor 加载到 SimpleCursorAdapter 并使用此适配器将数据加载到 ListView

```
SimpleCursorAdapter (Context context, int layout, Cursor c, String[] from, int[] to) 
```

然后将适配器设置为 ListView：

```
ListView.setAdapter(your_SimpleCursorAdapter) 
```

# php - 为什么 $_POST 数组为空？

> ID：11282952
> 
> 赞同：0
> 
> 时间：2012-07-01T14:52:49.967
> 
> 标签：php, post

我有以下代码：

```
<?php
    define('ENVIRONMENT', 'tests');
    $_POST['id']='AccountPagesView.a_book/45';
    $_POST['old_value']='1';
    $_POST['value']='2';
    header("Location: http://localhost/index.php/welcome/update_record");
?> 
```

我需要在这个脚本中设置 $_POST 数组并通过 url 加载脚本。但是来自 url 的脚本告诉我 $_POST 数组为空。为什么？如何设置 $_POST 数组并通过 url 将其发送到脚本？先感谢您。

更新：我有一些必须测试的代码，并且 url 上有一些脚本`"http://localhost/index.php/welcome/update_record"`，它使用 $_POST 数组中的值；所以，我不能改变这个脚本，我想测试它。我该怎么做？

更新2：

```
<?php
    //include ('\application\controllers\welcome.php');
    define('ENVIRONMENT', 'tests');
    $_POST_DATA=array();
    $_POST_DATA['id']='AccountPagesView.a_book/45';
    $_POST_DATA['old_value']='1';
    $_POST_DATA['value']='2';
    $ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, 'http://localhost/index.php/welcome/update_record');
    curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST_DATA);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_exec($ch);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:53:25.507

你不能。重定向将始终导致通过 GET 加载目标页面。

但是，您可以使用会话来存储这些值。在两个页面上调用`session_start();`并使用超全局数组`$_SESSION`而不是`$_POST`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:19:46.017

我相信这是您需要在不使用 JS 的情况下将 POST 值从一个 PHP 脚本发送到另一个脚本，如果您绝对不想使用`$_SESSION`，尽管这是您应该使用的。

```
$ch = curl_init();
$data = array('id' => 'AccountPagesView.a_book/45', 'old_value' => '1', 'value' => '2',);

curl_setopt($ch, CURLOPT_URL, 'http://path-to/other.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_exec($ch); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:23:39.390

这是应该使用 $_SESSION 的主要原因之一。请参阅此其他问题以获取解释：[PHP - Pass POST variables with header()?](https://stackoverflow.com/questions/2447211/php-pass-post-variables-with-header)

```
<?php
session_start();
define('ENVIRONMENT', 'tests');
$_SESSION['id']='AccountPagesView.a_book/45';
$_SESSION['old_value']='1';
$_SESSION['value']='2';
header("Location: http://localhost/index.php/welcome/update_record"); 
```

然后在 index.php/welcome/update_record

```
<?php
session_start();
define('ENVIRONMENT', 'tests');
$id = $_SESSION['id'];
$old_value =  $_SESSION['old_value'];
$value = $_SESSION['value'];

//do something 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T16:19:59.323

两个答案。如果以下方法不起作用：

```
<?php
    define('ENVIRONMENT', 'tests');
    $_POST['id']='AccountPagesView.a_book/45';
    $_POST['old_value']='1';
    $_POST['value']='2';
    require("/index.php/welcome/update_record");
?> 
```

*（我对页面 URL 有点吃惊。）*

然后：

当您坚持 POST 时（您有权要求），您可以执行以下操作：

```
<html>
  <head>
  </head>
  <body>
    <form action="/index.php/welcome/update_record" method="post">
      <input type="hidden" name="id" value="AccountPagesView.a_book/45">
      <input type="hidden" name="old_value" value="1">
      <input type="hidden" name="value" value="2">
      <input type="hidden" name="ENVIRONMENT" value="tests">
    </form>
    <script type="text/javascript">
       document.forms[0].submit();
    </script>
  </body>
</html> 
```

环境的定义需要以某种方式解决。

如果目标脚本使用 $_REQUEST，即 $_POST + $_GET (io $_POST)，那么您执行 HTTP GET URL：`...-?id=...&old_value=1&value=2`这将是最简单的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T14:53:36.277

`$_POST`只有通过方法发送请求时才存在`POST`，这意味着发送了表单。

你可以`$_SESSION`改用。

# node.js - 强尼五号：董事会还没准备好

> ID：11282954
> 
> 赞同：4
> 
> 时间：2012-07-01T14:52:57.953
> 
> 标签：node.js, arduino, johnny-five

我以前让我的 Arduino 套件在与 Breakout 相同的硬件上工作，但想切换到[Johnny Five](https://github.com/rwldrn/johnny-five)。[我的硬件与来自http://weblog.bocoup.com/javascript-arduino-programming-with-nodejs/](http://weblog.bocoup.com/javascript-arduino-programming-with-nodejs/)的简单单 LED 布局连接，但运行基本 LED 频闪演示无法按预期工作：

```
var five = require("johnny-five"),
    board, led;

board = new five.Board();

board.on("ready", function() {
  console.log('ready');
  led = new five.Led(13);
  led.strobe(100);
}); 
```

回报：

```
1341154189666 Board Connecting... 
1341154189697 Serial Found possible serial port cu.usbmodem621
1341154189699 Board -> Serialport connected cu.usbmodem621
1341154191570 Repl Successfully Connected 
```

我在没有 LED 频闪的情况下直接进入 Firmata REPL，并且`board.ready`是`false`.

关于为什么 board.ready 回调不会触发的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-30T00:35:27.793

在 Windows 上，有时您必须指定哪个**COM 端口**。刷新firmata时收到以下错误：

```
avrdude: stk500_getsync(): not in sync: resp=0x00 
```

1.  将 Arduino UI 更改为指向另一个 COM 端口（在我的情况下为 COM4）

    工具 -> 串口 -> COM4

2.  将此添加到您的 johnny-5 启动代码中：

    `var five = require("johnny-five"); board = new five.Board({ port: "COM4" }); board.on("ready", ...);`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T19:28:46.663

我和 johnny-5 在我的 Arduino Uno R3 上遇到了同样的问题。要修复它，我必须更新 StandardFirmata。

1.  下载最新的[Arduino 软件](http://www.arduino.cc/en/Main/Software)（在编写 1.0.2 时）
2.  安装并打开 Arduino 应用程序
3.  将 Arduino 连接到计算机（通过 USB）
4.  在菜单中，选择文件 > 示例 > Firmata > StandardFirmata
5.  按下上传按钮

完成后，我可以使用firmata 连接到电路板，并按预期触发就绪事件。我必须对我所有的 Arduino 执行相同的过程才能让它们工作。

# php - WAMP 2.2e - phpmyadmin 致命错误：超过 30 秒的最大执行时间

> ID：11282958
> 
> 赞同：5
> 
> 时间：2012-07-01T14:53:12.153
> 
> 标签：php, phpmyadmin, wamp

当我尝试打开 phpmyadmin 时，所有服务都在运行（wamp 图标为绿色），我收到此错误。似乎有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T15:32:45.400

您可以设置最大执行时间，就像@HanhNghien 在您的**php.ini**中的评论中所说的那样。

```
max_execution_time = 120
max_input_time = 120 
```

但我认为更好的问题是为什么需要 phpmyadmin 这么多时间。也许你应该检查你的 apache 日志并检查是否有一些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:02:16.630

我在 phpmyadmin 中的变量部分通过为超时设置一个非常高的数字来解决这个问题。它不接受'0'。

# c# - 在 C# 中创建线程

> ID：11282960
> 
> 赞同：0
> 
> 时间：2012-07-01T14:53:25.203
> 
> 标签：c#, .net

好的，所以我有以下代码：

```
public partial class Form1 : Form
{
    private void FileWatcher_Created(object sender, System.IO.FileSystemEventArgs e)
    {
        ListViewItem newFile = new ListViewItem(new string[] { e.FullPath.ToString(), e.ChangeType.ToString() }, -1);
        newFile.Tag = e.FullPath.ToString();
        FileList.Items.Add(newFile);
    }

    private void CopyButton_Click(object sender, EventArgs e)
    {
        BackgroundWorker backgroundWorker1 = new BackgroundWorker();
        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.ProgressChanged +=
          new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        int TotalFiles = FileList.CheckedItems.Count;;
        int CurrentFile = 1;
        foreach (ListViewItem CheckedFile in FileList.CheckedItems)
        {
            backgroundWorker1.ReportProgress((CurrentFile / TotalFiles) * 100);
            string FileBuilder = Settings.Default.Destination + Path.GetFileName(CheckedFile.Tag.ToString());
            if (File.Exists(FileBuilder) == false)
            {
                File.Copy(CheckedFile.Tag.ToString(), FileBuilder);
            }
            CurrentFile++;
        }
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        CopyProgressBar.Value = e.ProgressPercentage;
    }
} 
```

它一直告诉我DoWork事件中的报告进度方法在当前上下文中不存在，有人知道为什么吗？如果这是一个菜鸟错误，请原谅我，我是新人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:55:21.607

`backgroundWorker1`是一个*局部*变量。
它不存在于`CopyButton_Click`.

您可以将其放在类字段中，也可以从`sender`参数中强制转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T14:58:11.220

```
private void CopyButton_Click(object sender, EventArgs e)
    {
        BackgroundWorker backgroundWorker1 = new BackgroundWorker();
        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        backgroundWorker1.RunWorkerAsync();
    } 
```

你 BackgroundWorker 在 start 方法上是 init 并在完成时处理

尝试在课堂上声明 BackgroundWorker

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using FileWatchDog.Properties;
using System.Text.RegularExpressions;

namespace FileWatchDog
{
public partial class Form1 : Form
{
    BackgroundWorker backgroundWorker1;
    public Form1()
    {
        InitializeComponent();

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void FileWatcher_Created(object sender, System.IO.FileSystemEventArgs e)
    {
        ListViewItem newFile = new ListViewItem(new string[] { e.FullPath.ToString(), e.ChangeType.ToString() }, -1);
        newFile.Tag = e.FullPath.ToString();
        FileList.Items.Add(newFile);
    }

    private void CopyButton_Click(object sender, EventArgs e)
    {
        backgroundWorker1 = new BackgroundWorker();
        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        int TotalFiles = FileList.CheckedItems.Count;;
        int CurrentFile = 1;
        foreach (ListViewItem CheckedFile in FileList.CheckedItems)
        {
            backgroundWorker1.ReportProgress((CurrentFile / TotalFiles) * 100);
            string FileBuilder = Settings.Default.Destination + Path.GetFileName(CheckedFile.Tag.ToString());
            if (File.Exists(FileBuilder) == false)
            {
                File.Copy(CheckedFile.Tag.ToString(), FileBuilder);
            }
            CurrentFile++;
        }
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        CopyProgressBar.Value = e.ProgressPercentage;

    }
  }
} 
```

# javascript - 如何在javascript中编写jquery“is”方法

> ID：11282968
> 
> 赞同：-1
> 
> 时间：2012-07-01T14:54:27.347
> 
> 标签：javascript, jquery

我想知道如何仅使用 javascript 编写 jQuery is 方法？

您不能使用任何第三方库。只有浏览器提供的javascript。

仅供参考`is`jQuery 中的方法：

> 根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:58:59.763

如果您需要对旧浏览器的支持，您应该使用 jQuery。这应该适用于 IE9、Firefox 和 Chrome。

```
//returns true if element matches selector or if element is equal to the node passed as selector
function is( elem, selector ) {
    var div = document.createElement("div");
    var matchesSelector = div.webkitMatchesSelector || div.mozMatchesSelector || div.msMatchesSelector;
    return typeof selector == "string" ? matchesSelector.call( elem, selector ) : selector === elem;
}
//returns true if any elements in the array/nodelist "is" selector
function anyIs( elems, selector ) {
    var l = elems.length, i;

    for( i = 0; i < l; ++i ) {
        if( is( elems[i], selector ) ) {
            return true;
        }
    }
    return false;
}

is(document.createElement("div"), "div")
//true
is(document.createElement("div"), "li")
//false
anyIs(document.getElementsByTagName("div"), document.getElementsByTagName("div")[3])
//true
anyIs(document.getElementsByTagName("div"), "div")
//true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:17:27.247

```
function is( elem, selector ) {
    var sel = elem.ownerDocument.querySelectorAll( selector );
    return [].some.call( sel, function( el ) {
        return elem === el;
    } );
} 
```

`true`如果任何元素匹配，将返回。

# ruby-on-rails - 在 Heroku 上部署后使用 github 开发 Rails

> ID：11282972
> 
> 赞同：0
> 
> 时间：2012-07-01T14:54:49.643
> 
> 标签：ruby-on-rails, deployment, heroku, github, assets

我有一个 Rails 3.2.3 应用程序，我在`github`.Today 上托管。今天我将它部署在 Heroku 上。

在部署期间，我对`Gemfile`.

*   运行`rake assets:precompile`生成 /public/assets 文件夹。

*   我必须添加这些更改并将其提交到本地存储库，以便通过运行推送到 heroku`git push heroku master`

部署很好，但现在我的开发环境是这样的：

```
# On branch master
# Your branch is ahead of 'origin/master' by 2 commits. 
```

这些是我为部署在 heroku（运行预编译和其他一些东西）上所做的更改，我不想在我的存储库中存在这些更改`github`。我该如何继续我的开发（能够继续推进`github`）并不断更新变化`heroku`）？

澄清：`public/assets`已生成并应添加到本地 repo 以推送到 heroku。所以我不能把它放在 .gitignore 但我不希望它被推送到 github 上。最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:42:07.520

我不确定你为什么要`rake assets:precompile`在开发中运行。你在调试什么吗？一般来说，最好不要将已编译的资产提交到您的仓库，因为它们是生成的内容。

在 Heroku 上，您可以选择在 slug 编译期间预编译您的资产。尽管部署速度稍慢*，但这使得回购更干净。*只需删除`public/assets`，让 Heroku 知道该怎么做。另外，请确保将以下行添加到`config/application.rb`：

```
config.assets.initialize_on_precompile = false 
```

[https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

# mysql - sql查询返回不正确的结果

> ID：11282973
> 
> 赞同：2
> 
> 时间：2012-07-01T14:54:49.687
> 
> 标签：mysql

我有一个 mysql 数据库，其中存储了一些产品的报价文件，这些产品清楚地定义了每种产品的价格，还有一个合同表，用于存储合同详细信息以及它所属的客户代码和报价代码。我有以下查询，看看报价单的总价是多少写在发票上：

```
select
   sum(sqproducts.price * sqproducts.quantity) as 'total-price',
   squotations.currency as 'currency'
from
  sqproducts,
  ccontracts,
  squotations
where 
  sqproducts.contracted=1
  AND squotations.code=sqproducts.quotation_code
  AND sqproducts.quotation_code=ccontracts.squotation_code
  AND sqproducts.quotation_code='QUOT/2012/1'
group by
  currency 
```

![以下是 sqproducts 表（关于报价中命名的产品的详细信息）](../Images/12c4d840a469410a282f63afcbac4041.png)

![但我得到的这个结果是不正确的（它必须是 1500 美元）](../Images/ca555de7bdf89ec39ef9fed61ea1c320.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:13:49.737

它是盲目的，试试这个：

```
select
   sum(sqproducts.price * sqproducts.quantity) as 'total-price',
   squotations.currency as 'currency'
from
  sqproducts 
inner join squotations on (squotations.code=sqproducts.quotation_code)
inner join ccontracts on (sqproducts.quotation_code=ccontracts.squotation_code)

where 
  sqproducts.contracted=1
  AND sqproducts.quotation_code='QUOT/2012/1'
group by
  squotations.currency 
```

# php - 如何在文档上找到一个字符串然后回显该字符串？

> ID：11282975
> 
> 赞同：1
> 
> 时间：2012-07-01T14:54:57.090
> 
> 标签：php, string, document, file-get-contents

你如何在文档上找到一个字符串然后回显该字符串？

例如，

文件：

```
blah blah result.php?whatiwanttoecho blah 
```

或者：

```
blahhh result.php?whatiwanttoecho blah blah blah 
```

总会有'result.php？在我想要回应之前。

我正在寻找的最终结果：

```
$doc = "./doc.txt";

$doccontents = file_get_contents($file); 
```

然后我需要帮助的代码的最终结果是：

```
$result = 'whatiwanttoecho';
echo $result; 
```

希望这是有道理的。谢谢 （：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:17:01.683

嗨，

尝试此代码中的示例：

```
$doccontents = 'blahhh result.php?whatiwanttoecho blah blah blah';
$rgxp = '/result.php\?([^ ]+)/i';
if(preg_match($rgxp, $doccontents, $mc)) $result = $mc[1];
else $result = 'No match';
echo $result;      // whatiwanttoecho 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:10:51.953

```
<?php
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);
$string= 'blah blah result.php?whatiwanttoecho blah';
$string= 'blahhh result.php?whatiwanttoecho blah blah blah';
preg_match_all('/result\.php\?([.\w\W]*?)[\s\n]/ui', $string, $matches);
foreach(end($matches) as $key=> $value){
    print '<pre>'.print_r($value, 1).'</pre>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:13:44.707

如何首先使用两部分爆炸完整的字符串，`$array =explode("?",$fullstring,2)`然后使用爆炸字符串的第二部分，`$urstring = explode(" ",$array[1],2)`最后回显你想要的字符串`echo $urstring[0];`？希望这能解决你的问题

# jquery-ui-dialog - JQuery UI 对话框（'open'）不适用于选择器

> ID：11282976
> 
> 赞同：0
> 
> 时间：2012-07-01T14:55:08.773
> 
> 标签：jquery-ui-dialog

我可以使用以下内容创建一个 jquery ui 对话框：

```
 $("#dialogs .add_entry").dialog
    ({
         height: 500, 
         width: 750, 
         autoOpen: false, 
         stack: true, 
         show: "fade", 
         resizable: true, 
         title: "Add Entry", 
         modal: true
    });

    <div id="dialogs">
        <div class="add_entry">Test</div>
    </div> 
```

但是当我后来使用 $("#dialogs .add_entry").dialog("open"); 打开对话框没有任何反应（没有 js 错误）。我认为它与选择器相关，将 autoOpen 切换为 true 会显示对话框。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:59:40.750

试试这个：

```
$("#dialogs > .add_entry") 
```

或者

```
$("#dialogs").children(".add_entry") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:11:37.710

```
$(function(){
    $element = $("#dialogs .add_entry");
    $element.dialog({
        height:500,
        width:750,
        stack: true, 
        show: "fade", 
        resizable: true, 
        title: "Add Entry", 
        autoOpen:false, 
        modal: true
    });
    $element.dialog("open");
}); 
```

如果放置在元素之前，这将起作用。后不起作用。也不能使用 out 变量，没有包装函数也不能工作......多么有问题的函数。

# c++ - 可以在VS2010中获取VS2012标准库吗

> ID：11282977
> 
> 赞同：0
> 
> 时间：2012-07-01T14:55:20.267
> 
> 标签：c++, multithreading, visual-studio-2010, c++11, visual-studio-2012

我可以在 VS 2010 中获得 VS 2012 标准库吗？

VS 2012 具有 C++11 的优点，例如线程。
我认为安装 VS2012 redist 并用 VS2012 替换 include 和 lib 文件夹的内容就足够了。

有人做过吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T15:34:04.637

不。

原因：ABI、标准一致性和编译库所必需的编译器技巧等...

不同的可再发行组件不会让您获得开发文件。重命名其中的 DLL 可能会在运行时为您提供新库，但如果您尝试这样做，它很可能会崩溃和烧毁。

* * *

看来我没有让自己足够清楚：**不要这样做！**它不起作用，如果它似乎起作用，你要么没有使用任何值得麻烦的东西，要么你依靠的是步行定时炸弹。更不用说许可问题了。

# python - 如何使用 Scipy 从 3D 体积中提取任意 2D 切片？

> ID：11282988
> 
> 赞同：3
> 
> 时间：2012-07-01T14:56:31.190
> 
> 标签：python, scipy, volume, slice

我正在使用 Scipy 从 3D 数据（矢量 200x200x200）渲染平面。我可以通过 2 个向量或向量和一个角度来指定想要的平面。我想从这个 3D 体积中提取这样一个任意切片。我在 Matlab 中找到了如何做到这一点： http: [//www.mathworks.com/help/techdoc/ref/slice.html](http://www.mathworks.com/help/techdoc/ref/slice.html) 如何在 Scipy 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:18:23.013

您可以使用[scipy.ndimage.interpolation.rotate](http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.ndimage.interpolation.rotate.html)将 3d 数组旋转到您想要的任何角度（它使用样条插值），然后您可以从中取出切片。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T11:02:37.157

def extract_slice(data, triplet):
"""
算法：
1\. 找到平面与数据框边缘的交点
2\. 对于这些点，找到面向轴的 b-box
3\. 找到“后” trans (A,T ) 从 R2 到 R3，例如 X' = AX + T
使用 (0,0), (0,h), (w,0) 很容易计算
4\. 对每个值使用 trans （使用三线性插值）在 2D (w,h) 图像中
"""

我相信作为这个项目的一部分，我会在几个月内正确发布代码。

# php - 返回给定 id 的所有行值

> ID：11282990
> 
> 赞同：1
> 
> 时间：2012-07-01T14:56:45.870
> 
> 标签：php, mysql, rows

如何返回给定 id 的所有行值？

```
require('dbc.php');

mysql_select_db($db);

$result = mysql_query("SELECT * FROM about WHERE id=".$_GET['id']);
$row = mysql_fetch_assoc($result);
echo $row['content']; // return all values instead of just content 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T14:58:46.120

您可以使用`mysql_fetch_row`然后`implode`数组：

```
echo implode(",",mysql_fetch_row($result)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:14:08.693

以下将起作用：

```
while ($row = mysql_fetch_assoc ($result) ) {

    foreach($row as $column => $value){
        echo "Row: $column - $value<br />";
    }
} 
```

但是，出于安全和性能目的，我建议您迁移到 MySQLi。完成后，您可以使用：

```
$all_rows = mysqli_fetch_all ($result, MYSQLI_ASSOC); 
```

您可以遍历它或调用`implode`它以返回值。