# StackOverflow 问答 12005000-12005999

# javascript - 使用构造函数从文本框输出值 - 原型

> ID：12005001
> 
> 赞同：0
> 
> 时间：2012-08-17T11:35:18.517
> 
> 标签：javascript

单击按钮（John）时，我试图在文本框中输出插入的值。目前我刚刚在这里添加了默认值（John= new Player(30,"England",3)); 但我希望从文本框中选择这些值。请告知我将如何去做。我尝试从文本框中获取值并分配给变量（x，y，z在脚本中注释掉）并在此处传递（John = new Player（x，y，z））；但它似乎没有用。

```
Age : <input type = "text" id = "test1" /><br>
County : <input type = "text" id = "test2" /><br>
Rank: <input type = "text" id = "test3" /><br>

<button type="button" onclick="John.myPlayer()">John</button>

<br>

<br>
<div id = "box"></div>
<br>

<script type="text/javascript">

// var x = document.getElementById('test1').value;
// var y = document.getElementById('test2').value;
// var z = document.getElementById('test3').value);

function Player(a,c,r){
this.age=a;
this.country=c;
this.rank=r;
}

Player.prototype.myPlayer = function(){

document.getElementById('box').innerHTML = "John is from " + this.country + " he is       " + this.age + " years old and his rank is " + this.rank;

}

John= new Player(30,"England",3);

John.myPlayer()

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:43:09.923

我的建议是创建一个在 onclick 事件上调用的函数，并从那里的文本框中读取值，然后创建一个新的 Player 实例。

```
<button type="button" onclick="createNewPlayer()">John</button> 
```

在javascript中：

```
function createNewPlayer() {

  var x = document.getElementById('test1').value;
  var y = document.getElementById('test2').value;
  var z = document.getElementById('test3').value);

  John= new Player(x, y, z);
  John.myPlayer()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:48:32.050

请像这样尝试..

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
    function show(){

        var age = document.getElementById('test1').value;
        var country = document.getElementById('test2').value;
        var rank = document.getElementById('test3').value;

        John = new Player(age, country, rank);
        John.myPlayer();
    }
    Player.prototype.myPlayer = function() {
        var output = "John is from " + this.country + " he is " + this.age + " years old and his rank is " + this.rank;
        document.getElementById('box').innerHTML = output;
}

    function Player(a,c,r){
        this.age=a;
        this.country=c;
        this.rank=r;
    }

    </script>
</head>

<body>

    Age : <input type = "text" id = "test1" /><br>
    County : <input type = "text" id = "test2" /><br>
    Rank: <input type = "text" id = "test3" /><br>

    <div id="box">
    </div>

    <button type="button" onclick="show()">John</button>

</body>
</html> 
```

# php - 将旧用户迁移到 symfony2

> ID：12005004
> 
> 赞同：15
> 
> 时间：2012-08-17T11:35:31.290
> 
> 标签：php, authentication, symfony, migration, expressionengine

我正在从表达式引擎迁移到 symfony2，并且正在寻找迁移用户密码的最佳方法。目标是让旧用户使用其现有凭据登录，而新用户的密码则以默认方式创建。

我查看了自定义身份验证提供程序和自定义用户提供程序，并考虑是否为旧用户创建单独的实体，但我不知道实现上述目标的最佳方式/设计是什么。

供参考：

*   据我所知，表达式引擎只是使用 sha1 加密密码，仅此而已。
*   我目前正在使用 FOSUserBundle。

任何人都可以建议我解决方案吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-22T14:36:49.447

弄清楚了！

创建自定义编码器并使用 FOSAdvancedEncoder 捆绑包选择合适的编码器。

**1\. 创建编码器**

```
 <?php

    namespace Acme\MyBundle\Security\Encoder;

    use Symfony\Component\Security\Core\Encoder\PasswordEncoderInterface;

    class LegacyEncoder implements PasswordEncoderInterface {

        public function encodePassword($raw, $salt)
        {
            // Your Custom encoder logic
            return $something 
        }

        public function isPasswordValid($encoded, $raw, $salt)
        {
            return $encoded === $this->encodePassword($raw, $salt);
        }

    } 
```

**2\. 将您的编码器注册为服务**

```
services:
    acme.legacy_encoder:
        class: Acme\MyBundle\Security\Encoder\LegacyEncoder 
```

**3\. 安装 FOSAdvancedEncoderBundle**

看这里：[https ://github.com/friendsofsymfony/FOSAdvancedEncoderBundle/blob/master/Resources/doc/index.md](https://github.com/friendsofsymfony/FOSAdvancedEncoderBundle/blob/master/Resources/doc/index.md)

**4\. 配置你的编码器**

在`app/config.yml`：

```
fos_advanced_encoder:
    encoders:
        FOS\UserBundle\Model\UserInterface: sha512
        legacy_encoder:
            id: acme.legacy_encoder 
```

**5\. 在你的用户类中实现编码器感知接口**

```
use FOS\AdvancedEncoderBundle\Security\Encoder\EncoderAwareInterface;
use FOS\UserBundle\Entity\User as BaseUser;

class User extends BaseUser implements EncoderAwareInterface {

  ...

  public function getEncoderName() {

      if($this->islegacy()) {
          return "legacy_encoder";
      }

      return NULL;
  }

} 
```

如果用户是旧用户，请记住添加一个布尔字段来管理。

就是这样。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-22T12:32:25.443

也许关于[将成员从 ExpressionEngine 导出到 Wordpress](https://stackoverflow.com/questions/10104019/export-expressionengine-members-to-wordpress)的线程会对您有所帮助。

除了将自定义查询的结果导出到 FOSUserBundle 结构之外，我没有看到任何困难。

要记住的重要事项：

*   正如[Derek Hogue](https://stackoverflow.com/users/174299/derek-hogue)在该线程中指出的那样，用户很可能不得不重置密码
*   您必须非常了解这两种结构**才能**正确导入数据

# trigger.io - Trigger.io 日志记录配置错误

> ID：12005006
> 
> 赞同：1
> 
> 时间：2012-08-17T11:35:41.340
> 
> 标签：trigger.io

`config.json`根据[Trigger.io 文档](http://docs.trigger.io/en/v1.4/modules/logging.html)，我添加了以下内容：

```
"modules": {
    "logging": {
        "level": ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"]
    }
} 
```

当我运行时，`forge build`我收到以下错误：

```
[  ERROR] Forge API call to app/fe491ecee6fb11e19ada12313d1adcbe/template went wrong: Value [u'DEBUG', u'INFO', u'WARNING', u'ERROR', u'CRITICAL'] for field 'level' is not of type string 
```

文档是错误的还是我误读了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:23:18.053

您必须选择文档中给出的数组选项之一，例如：

```
"modules": {
    "logging": {
        "level": "DEBUG"
    }
} 
```

# dotnetnuke - 是否可以在 dnn 模块中的 c# 代码中获取 ascx 页面的所有图像？

> ID：12005026
> 
> 赞同：0
> 
> 时间：2012-08-17T11:37:24.530
> 
> 标签：dotnetnuke

嗨，我正在开发 dnn 模块，我想读取 ascx 页面中的所有图像以返回我的模块并显示模块中的所有图像。是否有可能做到这一点 dotnetnuke 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:18:47.977

不管 dotnetnuke 是什么，这都是一个 asp.net 问题。这是stackoverflow上一个问题的答案，也是您的问题的答案：

[https://stackoverflow.com/a/4955836/261560](https://stackoverflow.com/a/4955836/261560)

# c# - 桌面应用程序的身份验证

> ID：12005027
> 
> 赞同：2
> 
> 时间：2012-08-17T11:37:24.643
> 
> 标签：c#, .net, mysql, authentication

首先，我看了一下她关于这个问题的每一个相关话题。然而，他们都没有成功地完全回答我的问题。

目前我正在开发一个用 C#/wpf 编码的桌面应用程序，它需要 MySQL 连接来进行身份验证和存储用户自定义列表等。

但是，问题在于，显然允许每个人远程连接到 MySQL 数据库并不是一个好的做法。此外，我当前的主机需要将 IP 列入白名单，然后才能连接到数据库。

我对此有什么选择？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:45:49.777

您应该考虑创建一个 Web 服务 (SOAP)、http web-api (REST) 或其他一些中间件来抽象您的数据存储。

这有以下好处：

*   允许您将大部分业务逻辑从桌面应用程序移到中间件中
*   允许您将业务逻辑排除在可能成为瓶颈的 sql 之外
*   允许您在不重新分发桌面应用程序的情况下更新业务逻辑（如果您无法直接控制所有桌面，则更容易）。
*   允许您控制身份验证（许多 Web 服务器都有自己的模块、身份验证方法）。您的应用程序将在其自己的服务帐户下控制访问和访问存储。
*   允许您完成更改数据存储（假设将来您将一些存储在 sql 中，一些存储在 mongodb 中，一些存储在云存储中 - 再次，无需更新所有桌面。
*   允许您扩展前端，甚至可能扩展后端存储（例如，读/写数据库副本）

如果您已经在使用 C#，那么新的 MVC4 web-api 应该很合适。在这里阅读更多：

[http://www.asp.net/web-api](http://www.asp.net/web-api)

如果您走这条路，您可以控制服务中的访问，并让您的服务通过连接字符串中的凭据访问数据库，或者如果您使用 IIS，应用程序池上的凭据映射到您的站点。

如果您要交付您的桌面应用程序（您没有托管数据库），那么如果您的客户不想安装/管理 IIS，您也可以在它自己的 exe 中自行托管 web-api。

最后，如果您的 mysql 在线，您的中间件可能在云中（天蓝色等...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:56:40.507

创建一个 Web 服务，例如使用 WCF 或 MVC Web API，您的应用程序可以在其中传递其凭据并进行身份验证。我建议使用 https 来保证传输安全。

# java - 与 Java 中的 C++ 指针相同

> ID：12005032
> 
> 赞同：-9
> 
> 时间：2012-08-17T11:37:34.783
> 
> 标签：java, c++, pointers

Java中有没有类似于C++指针的东西？如果有，我想知道它是什么。你能给我一些例子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T11:40:44.030

Java 的指针（语言规范如此称呼，而我相信 Java 程序员大多将它们称为“引用”）不支持*指针算法*。

而且Java没有办法做指针运算。

如果你想在 Java 中做这些低级的事情，一种方法是使用 JNI（Java 本地接口）来访问用 C 或 C++ 编写的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:55:47.317

Java 对象模型与 C++ 不同：

*   在 C++ 中，对于每种*类型*，您都可以拥有该类型的变量。此外，对于每个非引用类型`T`，都有一个类型`T&`，您可以拥有该类型的变量（但引用永远不是对象）。

*   在 Java 中，作为类类型的类型永远不能是变量的类型。类类型的对象*只能*动态存在，并且声明为类型的变量`T`（其中`T`是类类型）总是隐含地对对象的*跟踪引用*。（让我们忽略这个讨论的原始类型。）

在这两种语言中，变量都是有作用域的。但是，在 C++ 中，您可以利用作用域生命周期，因为生命周期结束的对象会自动调用析构函数。在 Java 中，唯一的变量是引用，并且它们超出范围会做一些非常不同的事情：它通知内存管理器他们正在跟踪的对象现在少了一个引用；如果没有剩余的基础引用，则该对象有资格进行（非确定性）收集。

如果愿意，您可以将 Java 中的类类型变量等同于 C++ 中的指针：

```
// Java:
{
    Foo x = new Foo();
    x = new Foo();      // no assignment in Java!
}

// C++:
{
    Foo * px = new Foo;
    px = new Foo;       // ... leaks the previous object
} 
```

# asp.net - 如何从 MasterPage 动态设置 SiteMap 的标题？

> ID：12005035
> 
> 赞同：0
> 
> 时间：2012-08-17T11:37:36.080
> 
> 标签：asp.net, sitemap

在我的 Web.sitemap 中，我有以下内容：

```
<siteMapNode url="~/Groups/ViewGroups.aspx" urlRoute="groups/{PostId}/{PostTitle}" />
</siteMapNode> 
```

在我的 MasterPage 中，我实现了**ItemDataBound**事件来尝试设置动态实现母版页的每个页面的标题，但由于某种原因没有设置标题。

```
protected void SiteMapPath1_ItemDataBound(object sender, SiteMapNodeItemEventArgs e)
{
    string CurrentNodeTitle = GetTitleFromDatabase();

    if (e.Item.ItemType == SiteMapNodeItemType.Current) {
         e.Item.SiteMapNode.Title = CurrentNodeTitle;
    }
} 
```

我也在 ItemCreated 事件中尝试过这个，但它仍然没有工作。

如果我在 Web.sitemap 中设置标题，那么它可以完美运行，但是当我使用**e.Item.SiteMapNode.Title = CurrentNodeTitle;设置它时** 标题未定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:32:50.250

尝试这个。

```
private string currentKey = SiteMap.CurrentNode.Key
protected void SiteMapPath1_ItemDataBound(object sender, MenuEventArgs e)
{
    string CurrentNodeTitle = GetTitleFromDatabase();

    if (e.Item.DataPath == currentKey){
         e.Item.Text = CurrentNodeTitle;
    }
} 
```

编辑说明：

它应该是 MenuEventArgs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T10:26:22.183

这个问题现在大约有6年了，一个答案是完全错误的，应该删除。我很难找到答案——它并不像我预期的那样直截了当，但答案仍然很简单。

使用命名空间中的**静态** `SiteMap`类`SiteMapResolve`事件`System.Web`（不是您的 SiteMapPath 实例！），您可以动态操作 URL 和标题。

就我而言，我有一个自定义本地化方法，可以从数据库中检索本地化字符串。站点地图标题包含用于识别字符串的键。这是我的母版页背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    // ...

    SiteMap.SiteMapResolve += (o, args) =>
    {
        if (SiteMap.CurrentNode == null)
            return null;

        SiteMapNode currentNode = SiteMap.CurrentNode.Clone(true);
        currentNode.Title = SessionObject.LocalizeText(currentNode.Title);

        SiteMapNode tempNode = currentNode;
        while (tempNode.ParentNode != null)
        {
            tempNode = tempNode.ParentNode;
            tempNode.Title = SessionObject.LocalizeText(tempNode.Title);
        }

        return currentNode;
    };

    // ...
} 
```

然后在您的母版页 ASPX（或者可能是任何使用此母版页的 ASPX 页面）中，您可以添加`<asp:SiteMapPath runat="server" ... />`它，它应该由 SiteMapResolve 事件处理。

# android - 将画布添加到相对布局

> ID：12005038
> 
> 赞同：2
> 
> 时间：2012-08-17T11:37:59.807
> 
> 标签：android, android-layout

目前我正在编写一个程序，该程序应该将图像添加到画布，然后将该画布添加到相对布局。我遇到的问题是，当我调用它时，会显示布局，但不会在布局上绘制画布。

```
canvas = (RelativeLayout) findViewById(R.id.canvasLayout);                  
imageCanvas = new Canvas();
mainImage = BitmapFactory.decodeResource(getResources(), R.drawable.image);

imageCanvas.drawBitmap(mainImage, 50, 50, null);

imageCanvas.drawColor(Color.BLACK);
canvas.draw(imageCanvas); 
```

这是试图将图像添加到画布然后将画布添加到布局的代码。

我完全不知道该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:08:52.190

您正在使用的 canvas.draw(imageCanvas) 调用实际上将画布（RelativeLayout）绘制到 imageCanvas（Canvas 对象）上 - 可能不是您想要的。我建议有几种方法可以将drawable放到RelativeLayout上：

第一个是创建一个 ImageView，将其图像设置为您的可绘制对象，然后将其添加到布局中。根据您是否希望在运行时动态添加图像，您实际上可以在 xml 图形设计器中执行此操作。这可能是最好的方法，因为它可以让您控制图像的大小以及图像的缩放/裁剪方式。

如果您想为布局设置背景，我相信您实际上可以将 RelativeLayout 的 Background 属性直接设置为可绘制对象 - 虽然这不允许对图像的缩放进行太多控制。

最后，为了完全控制如何绘制 RelativeLayout，您可以在任何视图中重写 OnDraw 方法。android系统在需要刷新视图时调用此方法。如果您最终使用它，创建一个自定义视图类，然后将其*放置在*RelativeLayout 中可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:53:34.710

```
canvas = (RelativeLayout) findViewById(R.id.canvasLayout);                  
imageCanvas = new Canvas();

mainImage = BitmapFactory.decodeResource(getResources(), R.drawable.image);

imageCanvas.drawBitmap(mainImage, 50, 50, null);

canvas.addView(imageCanvas); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:06:40.317

以下将以编程方式从位图资源中将图像添加到您的布局中，这听起来像是您想要做的。例如，如果您需要在该图像上绘图，则需要通过扩展 ImageView 并覆盖 onDraw() 来制作自定义组件。

```
canvas = (RelativeLayout) findViewById(R.id.canvasLayout);                  
imageView = new ImageView(getApplicationContext());
mainImage = BitmapFactory.decodeResource(getResources(), R.drawable.image);
imageView.setImageBitmap( mainImage );
canvas.addView( imageView ); 
```

# asp.net - 升级到 ASP.net MVC 4 RTM 的程序集冲突

> ID：12005039
> 
> 赞同：0
> 
> 时间：2012-08-17T11:37:59.933
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我刚刚将我的项目从 ASP.net MVC 4 RC 升级到 RTM，但我现在收到此错误：

> 错误 45 程序集 'StudioMvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 使用 'System.Net.Http.Formatting, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 版本高于引用程序集 'System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' d:\projects\StudioPlatform\StudioMvc\StudioMvc\bin\StudioMvc.dll StudioMvc.WebApi.Tests

.csproj 文件中的引用是：

```
<Reference Include="System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\packages\Microsoft.AspNet.WebApi.Client.4.1.0-alpha-120809\lib\net40\System.Net.Http.Formatting.dll</HintPath>
</Reference> 
```

我尝试将那里的版本更改为 4.1.0.0 但无济于事（相同的错误消息）。知道我接下来应该做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:17:51.690

尝试更新为：

```
<Reference Include="System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <HintPath>..\packages\Microsoft.AspNet.WebApi.Client.4.0.20505.0\lib\net40\System.Net.Http.Formatting.dll</HintPath>
</Reference> 
```

如果这不起作用，请从 NuGet 重新安装 Web API。

# database - Phonegap 离线数据库

> ID：12005042
> 
> 赞同：33
> 
> 时间：2012-08-17T11:38:18.253
> 
> 标签：database, sqlite, cordova, phonegap-plugins

我想将用户手机中的一些**大型**离线数据（超过 100 MB）存储在**加密**数据库中。如果可能的话，我还想分发预先填充的数据库。我也看到[了这个](http://gauravstomar.blogspot.com/2011/08/prepopulate-sqlite-in-phonegap.html)。

我知道[webdatabase](http://docs.phonegap.com/en/1.0.0/phonegap_storage_storage.md.html)的事情，但是因为它已经[贬值](http://dev.w3.org/html5/webdatabase/)了，所以建议我不要使用它。

我也见过一些第三方插件，比如[SQLite Plugin](https://github.com/chbrody/Cordova-SQLitePlugin)，但它只适用于 iOS 和 Android 设备，但我针对 4 个平台（ios、android、blackberry、windows）

除了写下我自己的解决方案之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-04T12:50:21.817

我最近做了一个需要这个的应用程序，针对相同的操作系统。您可以使用 2 个数据库的组合：

**1.本地存储::**

*检查本地存储*

```
function supports_html5_storage() {
  try {
    return 'localStorage' in window && window['localStorage'] !== null;
  } catch (e) {
    return false;
  }
} 
```

*将项目设置为 LocalStorage*

```
localStorage.setItem("bar", foo); 
```

或者

```
localStorage["bar"] = foo; 
```

*从 LocalStorage 获取项目*

```
var foo = localStorage.getItem("bar"); 
```

或者

```
var foo = localStorage["bar"]; 
```

**2\. SQLite 数据库（更方便，更持久）**

*设置你的数据库*

```
var shortName = 'BHCAppDB'; 
var version = '1.0'; 
var displayName = 'BHCAppDB'; 
var maxSize = 65535; 
if (!window.openDatabase){ 
     alert('!! Databases are not supported in this Device !! \n\n We are sorry for the inconvenience and are currently working on a version that will work on your phone'); 
}
db = openDatabase(shortName, version, displayName,maxSize);
createAllTables(db); 
```

*创建您的表格*

```
function createAllTables(db){
    db.transaction(function(transaction){
        transaction.executeSql("CREATE TABLE IF NOT EXISTS Profile(id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT, gender TEXT,age INTEGER)");
} 
```

*执行 SQL 查询*

```
transaction(function(transaction){
        var rowCount = 'SELECT * FROM Profile';
        transaction.executeSql(rowCount,[],function(transaction,result){
            if(result.rows.length == 0){
                var sqlString = 'INSERT INTO Profile (name,gender,age) VALUES("自己","Female",18)';
                transaction.executeSql(sqlString);

            }
        });
    }); 
```

编辑::我忘了添加最后一个选项:)

**3\. 所有设备上的原生存储**

这是Phonegap最好的部分。您可以使用 Phonegap 插件调用在所有设备上调用本机插件类。在调用过程中，您可以将参数传递给类，并且本机类可以将您的数据存储在操作系统本身中。

例如 :: 在 iOS 中，您创建一个插件 .h 和 .m 类并将其注册到 Cordova.plist 文件。完成后，您需要使用 Phonegap 从 JavaScript 向该类发送调用。一旦使用 NSDictionary 或任何其他 NSArray 类型接收到参数，您就可以调用 CoreData 类来存储无限量的数据。你永远不会耗尽内存。

这也可以对所有其他操作系统以类似的方式完成:)

对于加密，请尝试以下操作 :: [SQLCipher](http://sqlcipher.net)

以下是有关使用现有 SQLite 数据库的一些附加信息。在此示例中，encrypted.db 是您创建和编译的全新数据库。

```
ATTACH DATABASE 'encrypted.db' AS encrypted KEY 'secret'; -- create a new encrypted database
CREATE TABLE encrypted.t1(a,b); -- recreate the schema in the new database (you can inspect all objects using SELECT * FROM sqlite_master)
INSERT INTO encrypted.t1 SELECT * FROM t1; -- copy data from the existing tables to the new tables in the encrypted database
DETACH DATABASE encrypted; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T18:51:12.743

[在 Web 数据库的W3C](http://dev.w3.org/html5/webdatabase/)规范中提到，Web 应用程序工作组继续致力于其他两个与存储相关的规范：[Web 存储](http://www.w3.org/TR/webstorage/)和[索引数据库 API](http://www.w3.org/TR/IndexedDB/)。

所以 webdatabase 规范不再有效，但其他两个规范是有效的。

Web Storage 可用于在用户浏览器中本地存储数据。有以下目标可以实现：

*   localStorage 存储没有过期日期的数据
*   sessionStorage 存储一个会话的数据

不建议您使用 Web 存储（超过 100MB），因为 W3C 规范提到：

> 建议对每个源使用 5 兆字节的任意限制。

在我看来，SQLite 是最好的可用选项，因为它是一个进程内库，它实现了一个自包含、无服务器、零配置、事务性 SQL 数据库引擎。此外，[SQLite 限制](http://www.sqlite.org/limits.html)似乎可以满足您的需求：

> SQLITE_MAX_PAGE_COUNT 的最大可能设置为 2147483646。当与最大页面大小 65536 一起使用时，这使 SQLite 数据库的最大大小约为 140 TB。

关于您的加密要求，您应该考虑作为 SQLite 扩展的[SQLCipher 。](https://guardianproject.info/code/sqlcipher/)

> SQLCipher 是一个 SQLite 扩展，它为数据库文件提供透明的 256 位 AES 加密。迄今为止，它已由 Zetetic LLC 开源、赞助和维护。在移动领域，SQLCipher 在 Apple 的 iOS 以及诺基亚/QT 中得到了广泛的应用相当长的一段时间。

另一种选择是在写入和读取数据库时加密和解密数据。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:15:05.067

我正在开发的移动应用程序也有类似的要求。它需要离线访问包含近 500,000 个不同零件的零件表。该表的源是通过定义明确的 GET URL 获取其 JSON 从服务器中提取的。

我考虑过 Indexed DB，但 iOS 和 Android 中的移动浏览器不支持这一点。Web 本地存储不是一个选项，因为它有 5 MB 的硬性限制。因此，我决定使用 Web SQL 数据库标准 ( [http://www.w3.org/TR/webdatabase/](http://www.w3.org/TR/webdatabase/) )，尽管它已被弃用。到目前为止，我使用 Web SQL 数据库的经验非常好。数据库操作在我支持的移动设备（iPad 2、iPad 3、摩托罗拉 Xyboard、三星 Galaxy Tab 2）上执行得非常好并且非常可靠。此外，Phonegap 公开了一个 JavaScript API 以使用此标准（请参阅[http://docs.phonegap.com/en/2.5.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.5.0/cordova_storage_storage.md.html#Storage)）。

我编写了一个 Java 实用程序，将下载的 JSON 数据转换为 SQLite 数据库，该数据库的文件打包为 Android APK 或 iOS 应用程序包的一部分。

当我的 Phonegap 移动应用程序启动时，它使用本机代码检查应用程序的私有数据目录是否存在 SQLite 数据库文件。如果文件不存在，本机代码会从应用程序包中复制数据库文件。

我的实现基于我在下面的链接中找到的示例代码。我希望这有帮助。如果您对我的特定实施有任何疑问，请告诉我。

[http://gauravstomar.blogspot.com/2011/08/prepopulate-sqlite-in-phonegap.html](http://gauravstomar.blogspot.com/2011/08/prepopulate-sqlite-in-phonegap.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-25T10:57:49.277

我尝试使用[LokiJS](http://lokijs.org/#/)作为本地数据库，发现它对非关系数据很有帮助。在我的情况下，我检索使用 MongoDB 在服务器上存储的数据，但这取决于您系统的性质

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T20:52:02.323

查看这些问题/答案：

*   [在 iOS 中离线打开和存储加密文档](https://stackoverflow.com/questions/11930503/opening-and-storing-encrypted-documents-offline-in-ios)

*   [PhoneGap / Apache Cordova 是否提出加密 SQLite 数据库的 API](https://stackoverflow.com/questions/11792365/does-phonegap-apache-cordova-propose-an-api-for-encrypted-sqlite-database)

*   [使用 Mono Touch 时，我还可以为标准 Window 应用程序打包吗？](https://stackoverflow.com/questions/11753401/when-using-mono-touch-can-i-also-package-for-a-standard-window-application)

# c# - 如何通过代码设置水晶报表的准确长度？

> ID：12005047
> 
> 赞同：2
> 
> 时间：2012-08-17T11:38:37.387
> 
> 标签：c#, printing, crystal-reports

我有一个用 Crystal Rerports 12x8.5 英寸设计的报告。我将我的 OKI 3320 打印机驱动程序设置为这个尺寸。现在，当我使用 C# 代码打印报告时，**页面长度比撕下位置短半英寸。我得把纸卷起来撕下来。**我们可以通过代码更改任何设置以准确到达撕下位置吗？

```
 ReportDocument oReportDocument = new ReportDocument();
            oReportDocument.Load(reportPath + "\\OutDkt.rpt");

            List<TblOutDocket> lstDockets = new List<TblOutDocket>();
            lstDockets.Add(oTblOutDocket);
            oReportDocument.SetDataSource(lstDockets);

            oReportDocument.PrintOptions.PrinterName = LocalPrintServer.GetDefaultPrintQueue().FullName;
            oReportDocument.PrintToPrinter(1, false, 0, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:54:38.160

当您使用自定义页面大小时，您似乎需要专门指定页面设置。根据此[链接](http://social.msdn.microsoft.com/Forums/zh/vscrystalreports/thread/d000c32e-a3ea-4bb3-a110-bf1d51ed5212)，您可以通过设置 PageSettings 命名空间来实现这一点。

> 当您想使用 id 大于 118（Windows 编码的纸张尺寸）的纸张尺寸时，您必须将纸张尺寸的 id 提供给 PrintOptions.PaperSource。显然，您需要将其投射到 CrystalDecisions.Shared.PaperSource 我这样做：
> 
> ReportDocument.PrintOptions.PaperSource = (CrystalDecisions.Shared.PaperSource)m_PageSettings.PaperSource.RawKind;
> 
> ReportDocument.PrintOptions.PaperSize = (CrystalDecisions.Shared.PaperSize)m_PageSettings.PaperSize.RawKind;
> 
> 其中 m_PageSettings 是我的 System.Drawing.PageSettings 指定正确的 PaperSize

# javascript - html5 canvas toDataURL 返回空白图片

> ID：12005049
> 
> 赞同：5
> 
> 时间：2012-08-17T11:38:48.230
> 
> 标签：javascript, html, html5-canvas

我正在使用以下代码绘制画布并使用 toDataUrl 将其保存为 png 图像。

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      function loadImages(sources, callback) {
        var images = {};
        var loadedImages = 0;
        var numImages = 0;
        // get num of sources
        for(var src in sources) {
          numImages++;
        }
        for(var src in sources) {
          images[src] = new Image();
          images[src].onload = function() {
            if(++loadedImages >= numImages) {
              callback(images);
            }
          };
          images[src].src = sources[src];
        }
      }

      window.onload = function(images) {
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");

        var sources = {
          darthVader: "http://a1.sphotos.ak.fbcdn.net/hphotos-ak-snc6/228564_449431448422343_1996991887_n.jpg",
          yoda: "http://a4.sphotos.ak.fbcdn.net/hphotos-ak-snc7/427489_449423165089838_503188418_n.jpg"
        };

        loadImages(sources, function(images) {
          context.drawImage(images.darthVader, 250, 30, 250, 250);
          context.drawImage(images.yoda, 530, 30, 250, 250);
        });

// save canvas image as data url (png format by default)
        var dataURL = canvas.toDataURL();

        // set canvasImg image src to dataURL
        // so it can be saved as an image
        document.getElementById("canvasImg").src = dataURL;
};

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="850" height="315"></canvas>
<img id="canvasImg" alt="Right click to save me!">
  </body>
</html> 
```

但我的 png 图像显示为空白图像。我只看到一个空白的白色图像。我搜索了这个，但什么也没找到。我正在使用 php 和 chrome 浏览器。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:44:30.823

您首先调用，然后在*调用*`loadImages`后立即获取数据 URL 。但是，正如您的实现所示，调用它只会启动加载过程；当所有图像*都已加载*时调用回调，这是将来的某个时间。`loadImages` *`loadImages`*

 **目前你得到一个空白图像，因为图像还没有加载，所以你的回调还没有被调用，结果你的画布仍然是空的。

简而言之，依赖于已加载图像的所有内容（例如您的预期`toDataURL`结果）都应在实际加载这些图像时执行 - 因此在回调中。

```
loadImages(sources, function(images) {
  context.drawImage(images.darthVader, 250, 30, 250, 250);
  context.drawImage(images.yoda, 530, 30, 250, 250);

  var dataURL = canvas.toDataURL();
  document.getElementById("canvasImg").src = dataURL;
}); 
```**

# facebook-graph-api - 从当前用户到组的我/提要中的条目

> ID：12005052
> 
> 赞同：1
> 
> 时间：2012-08-17T11:38:58.827
> 
> 标签：facebook-graph-api, feed

最近 me/feed 开始包含当前用户发送到组的条目。id 字段对这些条目无效，仅返回“false”。

将 id 的第一部分更改为“to”中提到的那个会给出一个有效的条目。这可能是一个很好的解决方法，除非无法立即知道哪些帖子是正常的，哪些帖子是发给群组的。

我确实注意到，在组的帖子上，有一个未记录的额外字段“版本”。有谁知道这个字段是什么意思？

示例条目：

```
 ...
  "id": "1188060277_343671429042688", 
  "from": {
    "name": "My Name", 
    "id": "1188060277"
  }, 
  "to": {
    "data": [
      {
        "version": 1, 
        "name": "Group Name", 
        "id": "194744830602016"
      }
    ]
  },
  ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:40:38.713

希望这可以帮助 ：）

团体

用户所属的组。

用户组或朋友组。

包含版本（old-0 或新 Group-1）、名称、id、管理员（如果用户是组的管理员）和书签顺序（在主页上的组书签列表中的什么位置，组为用户显示）。

[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)

# linux - 在 Linux 上存储 Qt 应用程序数据文件 - 权限不足

> ID：12005053
> 
> 赞同：0
> 
> 时间：2012-08-17T11:39:16.160
> 
> 标签：linux, qt, permissions

我有应该在多个平台上工作的 Qt 应用程序。这些平台之一是 Linux。我是 Linux 世界的新手。

我的应用程序需要创建和管理一组数据文件。在阅读了一些关于 linux 目录结构的链接后，我决定将数据文件存储在 /var/myapp 目录及其子目录中。

这是问题所在：如果我的应用程序在没有超级用户权限的情况下运行，那么它无权创建 /var/myapp 目录。即使我将手动创建目录（使用 sudo），我的应用程序也无权在其中写入文件。

是否可以从 Qt 代码临时提升应用程序的权限以创建 /var/myapp 目录并在那里写入文件？

或者可能在 Linux 目录结构中的另一个位置默认可用于存储应用程序的数据文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:57:29.697

只有 root 可以在 /var 中创建目录。如果您的应用程序需要 /var 下的子目录，则需要在安装期间创建它（通常以 root 权限运行），并适当地对其进行 chmod：为可能运行您的应用程序的用户创建一个组，放入`/var/myapp`该组，然后 chmod它到`770`；或者只是 chmod 目录以`777`允许每个人访问它。如果您想阻止普通用户写入，请改用 755 或 750。（对于数据文件，不要设置执行位：这里的适当权限是 666/660/644/640）。代替八进制三元组，您可能更喜欢 chmod 更复杂的助记符语法，例如为拥有用户 ( ) 和组 ( )`chmod ug+x filename`添加 ( `+`) 执行位 ( `x`) 。`filename``u``g`

但是，/var 不一定是最佳选择：/var 通常用于易失性数据（临时文件等），以及预计会频繁更改的内容（邮件、日志文件等）。其他数据应进入：

*   `/usr/share/{appname}`用于系统范围的数据文件和资源
*   `/etc/{appname}`用于系统范围的配置文件
*   `~/.{appname}`（旧约定）或`~/.config/{appname}`每个用户的配置文件
*   `/var/tmp/{appname}`对于临时文件

此外，您想让`/usr`前缀可配置；大多数发行版都保留`/usr`包管理的文件，除了`/usr/local`，它镜像`/usr`发行版外安装（因此在这种情况下，您的系统范围的资源进入`/usr/local/share`而不是`/usr/share`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:20:18.777

您可以在没有安装脚本的情况下分发它，但您必须告诉他们以 root 身份运行一次......或者如果应用程序的系统范围数据文件不存在，则使用 gksudo/kdesudo 以 root 身份运行该应用程序。
不过，习惯是制作一个包含所有必要文件的包（.deb、.rpm，甚至是用户自己提取的 .tar.gz）。

但是 linux（以及 OS X）是多用户系统。您确定您的文件属于 /var 或 /usr 吗？如果您说它们是在运行时创建的，它们不依赖于用户输入吗？在这种情况下，您需要将它们放在用户主目录 (getenv("HOME")) 内的某个目录中。

# python - Swig/Python 检测到内存泄漏

> ID：12005055
> 
> 赞同：1
> 
> 时间：2012-08-17T11:39:24.400
> 
> 标签：python, swig, maya

我尝试使用 Python 学习 Maya (3d Software) API，但遇到了一些问题。

```
class Foo (node):
    def __init__ (self, arg):
        if isinstance (arg, str):
            fGlobal = OpenMaya.MGlobal()
            fGlobal.selectByName (arg , OpenMaya.MGlobal.kReplaceList)
            selected = OpenMaya.MSelectionList()
            fGlobal.getActiveSelectionList(selected);
            obj = OpenMaya.MObject()
            selected.getDependNode(0,obj)
        else :
            obj = arg 
```

每次我使用这个类时，Maya 都会向我返回一条警告消息。

> swig/python 检测到“MGlobal *”类型的内存泄漏，没有找到析构函数。

有人知道这是什么意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:30:13.567

我找到了解决方案，似乎[MGobal](http://download.autodesk.com/us/maya/2010help/api/class_m_global.html)类是静态的。

# javascript - JQuery/JavaScript - 突出显示输入或文本区域中的部分文本

> ID：12005057
> 
> 赞同：1
> 
> 时间：2012-08-17T11:39:35.473
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 Javascript 或 JQuery 在 HTML 中突出显示输入文本字段的一部分](https://stackoverflow.com/questions/10341843/how-to-highlight-a-part-part-of-an-input-text-field-in-html-using-javascript-or)

有谁知道如何在`input[type=text]`or中突出显示某些文本`textarea`？是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:05:37.203

你必须`div`在你的后面放置一个`textarea`，然后根据它的文本设置它的样式。
**备注**：

*   将您的设置`textarea` `background-color`为透明以查看您的`highlighter`颜色。
*   您`highlighter`必须与您的样式和文本内容相同，`textarea`才能将其`span`放在正确的位置。
*   将您的`highlighter`文本设置为与其背景相同的颜色，否则您会看到`<b>`效果，对于`span`.

**html**：

```
<div class="highlighter">some text <span>highlighted</span> some text</div>
<textarea>some text highlighted some text</textarea> 
```

**CSS**：

```
.highlighter, textarea {
    width: 400px;
    height: 300px;
    font-size: 10pt;
    font-family: 'verdana';
}

.highlighter {
    position: absolute;
    padding: 1px;
    margin-left: 1px;
    color: white;
}

.highlighter span {
    background: red;
    color: red;
}

textarea {
    position: relative;
    background-color: transparent;
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/9Y99F/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:49:22.083

此代码片段向您展示了如何：

```
window.onload = function() {
    var message = document.getElementById('message');
    // Select a portion of text
    createSelection(message, 0, 5);

    // get the selected portion of text
    var selectedText = message.value.substring(message.selectionStart, message.selectionEnd);
    alert(selectedText);
};

function createSelection(field, start, end) {
    if( field.createTextRange ) {
        var selRange = field.createTextRange();
        selRange.collapse(true);
        selRange.moveStart('character', start);
        selRange.moveEnd('character', end);
        selRange.select();
    } else if( field.setSelectionRange ) {
        field.setSelectionRange(start, end);
    } else if( field.selectionStart ) {
        field.selectionStart = start;
        field.selectionEnd = end;
    }
    field.focus();
} 
```

# java - 使用 Ant 构建 Struts 应用程序时出错

> ID：12005063
> 
> 赞同：1
> 
> 时间：2012-08-17T11:39:55.093
> 
> 标签：java, eclipse, ant, struts2

在尝试构建我的 Struts 应用程序时，我收到以下错误：

```
compile:
    [javac] /media/Data/Struts 2/2012-05-02/Struts/src/Build.xml:5: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 2 source files
    [javac] MyAction.java:5: package org.apache.struts2.interceptor does not exist
    [javac] import org.apache.struts2.interceptor.SessionAware;
    [javac]                                      ^
    [javac] MyAction.java:7: package com.opensymphony.xwork2 does not exist
    [javac] import com.opensymphony.xwork2.ActionSupport;
    [javac]                               ^
    [javac] MyAction.java:10: cannot find symbol
    [javac] symbol: class ActionSupport
    [javac] public class MyAction extends ActionSupport implements SessionAware {
    [javac]                               ^
    [javac] MyAction.java:10: cannot find symbol
    [javac] symbol: class SessionAware
    [javac] public class MyAction extends ActionSupport implements SessionAware {
    [javac]                                                        ^
    [javac] MyAction.java:22: cannot find symbol
    [javac] symbol  : method addActionError(java.lang.String)
    [javac] location: class com.sp.action.MyAction
    [javac]         addActionError("invalid");
    [javac]         ^
    [javac] MyAction.java:47: cannot find symbol
    [javac] symbol  : method addActionError(java.lang.String)
    [javac] location: class com.sp.action.MyAction
    [javac]             addActionError("User Name ,pass cannot be error");
    [javac]             ^
    [javac] MyAction.java:43: method does not override or implement a method from a supertype
    [javac]     @Override
    [javac]     ^
    [javac] 7 errors

BUILD FAILED 
```

我的包层次结构是`src/com/sp/action/*.java`和`src/com/sp/domain/*.java`

我的构建文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="strutsComple" default="compile">
    <target name="compile">
        <fileset dir="/media/Data/Works/struts-2.3.1.2/lib/" includes="*.jar"/>
        <javac srcdir="./com/sp/"/>
    </target>
</project> 
```

我已经将两个必需的 jar 添加到我的 Eclipse 文件夹中。

有人可以指出我所缺少的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:48:13.770

你的 ant 构建文件*太*简单了。将 struts jar 导入 eclipse 对您的 ant 构建没有任何作用。您需要在 build.xml 中为 javac 配置一个类路径。

```
<fileset dir="/media/Data/Works/struts-2.3.1.2/lib/" includes="*.jar"/>
<javac srcdir="./com/sp/"/> 
```

应该成为

```
<javac srcdir="./com/sp/">
    <classpath>
        <fileset dir="/media/Data/Works/struts-2.3.1.2/lib/" includes="*.jar"/>
    </classpath>
</javac> 
```

请参阅此答案以获取另一个示例[让 Ant <javac> 识别类路径](https://stackoverflow.com/questions/722774/getting-ant-javac-to-recognise-a-classpath)

另请参阅[javac](http://ant.apache.org/manual/Tasks/javac.html)任务的文档。

# drupal - Drupal：如何覆盖来自贡献模块的函数

> ID：12005065
> 
> 赞同：1
> 
> 时间：2012-08-17T11:40:03.873
> 
> 标签：drupal, drupal-modules, drupal-commerce

我正在使用一个为 Drupal Commerce 项目构建价格表的模块。有一个格式化表格标题的函数：

```
/**
 * Helper function that takes care of the quantity displayed in the headers of 
 * the price table.
 */
function commerce_price_table_display_quantity_headers($item) {
  // Set the quantity text to unlimited if it's -1.
  $max_qty = $item['max_qty'] == -1 ? t('Unlimited') : $item['max_qty'];
  // If max and min qtys are the same, only show one.
  if ($item['min_qty'] == $max_qty) {
    $quantity_text = $item['min_qty'];
  }
  else {
    $quantity_text = $item['min_qty'] . ' - ' . $max_qty;
  }
  return $quantity_text;
} 
```

如您所见，这不是一个主题函数，我可以在 template.php 中覆盖它，但我可以调整一些输出。

**我怎样才能重新定义这个函数，以便我可以砍掉和改变一些东西？**

*到目前为止我的工作...*

到目前为止，我尝试将它创建为一个单独的模块，并进行一些细微的更改以显示它是否正常工作，但它并没有覆盖任何输出。

**信息文件**

```
; $id$
name = Price Table: Tweaked Display
description = A different layout for the price table as shown on the product display nodes
package = Commerce (contrib)
core = 7.x

dependencies[] = commerce_product
dependencies[] = commerce_price
dependencies[] = commerce_price_table 
```

**模块文件**

```
 /**
 * Override of the helper function that takes care of the quantity displayed in the headers of 
 * the price table.
 */
function commerce_table_tweak_display_quantity_headers($item) {
  // Set the quantity text to unlimited if it's -1.
  $max_qty = $item['max_qty'] == -1 ? t('Unlimited gnhh') : $item['max_qty'];
  // If max and min qtys are the same, only show one.
  if ($item['min_qty'] == $max_qty) {
    $quantity_text = $item['min_qty'];
  }
  else {
    $quantity_text = $item['min_qty'] . ' - this is working - ' . $max_qty;
  }
  return $quantity_text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:50:41.850

我相信大多数drupal模块都有一个hook_function（或者至少是可挂钩的）我不做太多，所以我会搜索drupal api以了解如何挂钩函数以及你的模块是否支持它。

# java - 在java程序上执行adb命令

> ID：12005067
> 
> 赞同：0
> 
> 时间：2012-08-17T11:40:16.960
> 
> 标签：java, android, adb, executable-jar

我制作了一个 java 工具，它调用某些 adb 命令从市场下载应用程序。当我把它变成一个可运行的 JAR 时，它在我制作它的系统中执行得很好，但是当我在其他系统上尝试它时，adb 命令只是无法执行任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:41:43.990

AFAIK 可执行 jar 不适用于 android。Sun Java 和 Android 不兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:36:05.940

您是否在解决方案中包含了 Adb 可执行文件和相关的 dll？您应该包括它有两个主要原因：

1.  如果系统没有android sdk，就没有adb
2.  adb 的路径可能因一台计算机而异。

# android - Android视图寻呼机：如何区分用户和程序化滑动？

> ID：12005069
> 
> 赞同：5
> 
> 时间：2012-08-17T11:40:22.353
> 
> 标签：android, android-viewpager, swipe

我`ViewPager.setCurrentItem()`习惯每隔几秒钟自动滑动到下一页。一旦用户开始自己刷卡，我想禁用它。据我所知，`OnPageChangedListener`无论滑动是否来自用户，都会以相同的方式触发。似乎`beginFakeDrag()`有帮助，但它需要拖动指定数量的像素，这是不切实际的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T11:56:33.177

你熟悉[SCROLL_STATE_DRAGGING](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#SCROLL_STATE_DRAGGING)吗？它表示用户当前正在拖动寻呼机。

**例子**

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int position) { 
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        if (state == ViewPager.SCROLL_STATE_DRAGGING) {
            // User has dragged
        }
    }
}); 
```

# knockout.js - 使用 Knockout Validator 添加 CSS 类

> ID：12005072
> 
> 赞同：15
> 
> 时间：2012-08-17T11:40:39.803
> 
> 标签：knockout.js, knockout-validation

我想向视图中的`select`元素添加 CSS 类，我的视图模型有一个属性，我使用 Knockout-Validation 扩展了该属性：

```
self.selectedRootCause = ko.observable().extend({
    required: true
}); 
```

然后我`select`是这样的：

```
<form data-bind="submit: closeComplaint" method="post"> 
    <select data-bind="options: rootCauses, 
                            optionsText: 'RootCauseText', 
                            value: selectedRootCause, 
                            optionsCaption: 'Choose..',
                            validationOptions: { errorElementClass: 
                                                 'input-validation-error' }">
    </select>

    <input type="submit" value="Close Complaint" />
</form> 
```

我的`closeComplaint`功能如下所示：

```
self.closeComplaint = function () {
    if (self.errors().length == 0) {
        $.ajax({
            url: '@Url.Action("CloseComplaint")',
            data: new DetailsComplaintAdmin(self.currentComplaint(),
                                        self.selectedRootCause().RootCauseId
                ),
            success: function (data) {
                console.log(data);
            }
        });
    }
} 
```

只是为了完成，这是我的`self.errors()`功能：

```
self.errors = ko.validation.group(self); 
```

问题是当我提交表单时，该类`input-validation-error`似乎没有添加到我的输入中？`select`有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T14:44:39.923

签出此[链接](https://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration)

它说您必须设置 `decorateElement`为`true`将 CSS 类应用于输入标签。
因此，当我全局应用该参数时，它可以工作：

```
ko.validation.configure({ 
    decorateElement : true
}); 
```

签出这个 jsfiddle[演示](http://jsfiddle.net/gurkavcu/cxTZJ/)

**注意**：在 Knockout Validation 库的更新版本中，`decorateElement`配置选项已重命名为`decorateInputElement`（[详细信息](https://github.com/Knockout-Contrib/Knockout-Validation/wiki/Configuration)）

# git - 如何找到哪个提交在 git 中引入了特定行？还是有更好的选择？

> ID：12005075
> 
> 赞同：5
> 
> 时间：2012-08-17T11:41:01.240
> 
> 标签：git

想象一个 git 项目中的一个类，它经历了 1000 次提交，一遍又一遍地重新访问。我有没有机会检查何时（在哪个提交处）将特定的代码行引入类？

如果没有，是否有其他方法可以替代每次提交以找到我特别感兴趣的行集？

泰。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T12:24:13.900

特定的代码行？就像你提前知道线路是什么？当然有可能。事实上，这很愚蠢。只需使用镐搜索选项`git log`：

```
-S<string>
    Look for differences that introduce or remove an instance of <string>. Note that this is different than the string simply appearing in diff output;
    see the pickaxe entry in gitdiffcore(7) for more details. 
```

假设类是`public class Foo {`，您可以找到每个触及该字符串的提交：

```
git log -S"public class Foo" 
```

如果您想将其限制为特定文件，只需使用标准`--`语法：

```
git log -S"public class Foo" -- Foo.java 
```

一般来说，使用这个：

```
git log -S<string> [-- <file>] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:49:39.540

您可以`git bisect`在引入某些代码时使用回溯（请参阅[http://git-scm.com/book/en/Git-Tools-Debugging-with-Git](http://git-scm.com/book/en/Git-Tools-Debugging-with-Git)）并且可以使用此技术每次检查代码然后看看这条线是否还存在。这使得搜索 O(log n) 而不是 O(n)，从而为您节省了大量时间......

如果您想知道*最后一次*编辑一行的时间，您可以使用`git blame`.

# jquery - 为单击的不同类动态更改文本 - Jquery 灯箱插件

> ID：12005076
> 
> 赞同：0
> 
> 时间：2012-08-17T11:41:02.033
> 
> 标签：jquery, css

我在一个项目中使用[jquery 灯箱](http://leandrovieira.com/projects/jquery/lightbox/)，我想对其进行一些自定义......基本上，我在每个弹出灯箱放大图像的顶部添加一个标题。现在标题将根据包含图像的锚标记的类而改变。我有 3 个班级，每个班级都有不同的标题文本。

现在这是我的[JSfiddle](http://jsfiddle.net/KwJQt/6/)，看看我在尝试什么......

如您所见，当灯箱动画被激活时，“我的文本”标题在转到不同 a-tag 类的图像时不会改变......

有什么建议么？看我的JS代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:44:54.853

使用[hasClass](http://api.jquery.com/hasClass/)而不是 .is。Jquery hasClass 是一个布尔类型

```
$(function() {
   $('#gallery a').lightBox();

   var A = "Text for A";
   var B = "Text for B";
   var C = "Text for C";   
   $('#gallery').find('a').click(function (){

   if ($(this).haClass('classA')) {
          $('#lightbox-title-data-span1').html(A);
        };
   if ($(this).haClass('classB')) {
             $('#lightbox-title-data-span1').html(B);
        };

   if ($(this).haClass('classC')) {
             $('#lightbox-title-data-span1').html(C);
        };

       })

});​ 
```

# sql - 使用存储过程从 CSV 字符串的一列中获取所有值

> ID：12005078
> 
> 赞同：0
> 
> 时间：2012-08-17T11:41:12.783
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures, csv

在存储过程中，我需要将整个 CSV 文件作为字符串，然后在一个“列”中挑选出所有值，以对数据库进行进一步查询。

我不能使用保存的文档 - 所以我认为排除了 openrowset，整个事情必须在存储过程中完成。

花了几个小时谷歌搜索和尝试，但可以找到一个好的答案。一种可能是[http://www.tainyan.com/articles/entry-32/converting-csv-to-sql-data-table-with-stored-procedure.html](http://www.tainyan.com/articles/entry-32/converting-csv-to-sql-data-table-with-stored-procedure.html)但它不起作用，我可以找到错误。

请问这个应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:34:28.683

我不太喜欢这个，但它会起作用，前提是您的 csv 列保持在同一列索引。我会警惕这个的表现，但它可能会奏效。

在此处查看小提琴：[http ://sqlfiddle.com/#!3/336b7/1](http://sqlfiddle.com/#!3/336b7/1)

基本上将您的 csv 文件转换为 xml，转换为 xml 类型，然后对 xml 执行查询。

# bash - 使用 awk 或 bash 减去两列的值

> ID：12005080
> 
> 赞同：9
> 
> 时间：2012-08-17T11:41:20.857
> 
> 标签：bash, awk

我有一些文本文件，如下所示。我想减去第 2 列和第 4 列的值，并且需要为输出创建一个新列。

```
co1  co2   co3    co4

r1  15.2  13.0   21.4
r2  23    15     15.7
r3  14    8      12 
```

期望的输出

```
co1  co2   co3   co4   diff.    

r1  15.2  13.0   21.4   -6.2
r2  23    15     15.7   7.3
r3  14    8      12     2 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T11:46:45.513

注意：您可以将 awk 命令全部放在一行上，但这更整洁（如果需要，更透明且更易于修改）。

这个`so.awk`脚本：

```
NR==1{print $0, "   diff.\n"}
NR>2{printf("%s\t%5.1f\n", $0, $2-$4)} 
```

给出：

```
co1  co2   co3   co4     diff.

r1  15.2  13.0   21.4    -6.2
r2  23    15     15.7     7.3
r3  14    8      12       2.0 
```

鉴于文件中的数据`data.txt`发出此命令：

```
 awk -f so.awk data.txt 
```

（您可能需要调整格式以满足您的确切需求）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T12:08:56.777

这个单线工作：

```
awk 'NR == 1 { $5 = "diff." } NR >= 3 { $5 = $2 - $4 } 1' <input.txt 
```

它给：

```
co1 co2 co3 co4 diff.

r1 15.2 13.0 21.4 -6.2
r2 23 15 15.7 7.3
r3 14 8 12 2 
```

如果您想按选项卡分隔字段，这就是您想要的：

```
awk 'BEGIN { OFS = "\t" } NR == 1 { $5 = "diff." } NR >= 3 { $5 = $2 - $4 } 1' <input.txt 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-24T14:41:03.410

如果您没有标题，则可以简化 Taku Miyakawa 的单行：

```
awk '{ $5 = $2 - $4 } 1' input.txt > inputdiff.txt 
```

或使用制表符分隔：

```
awk 'BEGIN { OFS = "\t" } { $5 = $2 - $4 } 1' input.txt > inputdiff.txt 
```

# c# - 文本框焦点检查

> ID：12005082
> 
> 赞同：7
> 
> 时间：2012-08-17T11:41:25.683
> 
> 标签：c#, winforms

我有一个带有 3 个文本框和按钮作为拨号盘的 win 应用程序表单（它是一个触摸屏应用程序）.​​..

当按下拨号盘按钮时，我想检查这 3 个文本框中的哪一个具有焦点，并将文本附加到它。

就像是：

```
if (tbx1.Focused == true)
{
   tbx1.Text += "0";
}
else if (tbx2.Focused == true)
{
   tbx2.Text += "0";
}
else
{
   tbx3.Text += "0";
} 
```

但这不起作用......它一直将文本附加到 tbx3 。有什么建议么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T11:44:01.483

当您单击按钮时会出现问题，按钮将获得焦点，而不是您的任何文本框。

您可以做的是订阅[LostFocus](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.lostfocus.aspx)事件并记住最后获得焦点的文本框。

就像是：

```
private TextBox lastFocused;
private void load(object sender, EventArgs e){
    foreach (TextBox box in new TextBox[] { txtBox1, txtBox2, txtBox3 }){
        box.LostFocus += textBoxFocusLost;
    }
}

private void textBoxFocusLost(object sender, EventArgs e){
    lastFocused = (TextBox)sender;
} 
```

# java - 如何从 javascript 访问签名小程序方法

> ID：12005086
> 
> 赞同：1
> 
> 时间：2012-08-17T11:41:34.170
> 
> 标签：java, javascript, jakarta-ee, applet, signed-applet

我想从 javascript 访问签名小程序方法；因此我创建了一个 html 文件，如：

**.html 文件：**

```
<script type="text/javascript">
function uploadFileApp(){   
    document.applets[0].FileCooserApp();
    document.uploadAppletFile.FileCooserApp();      
}
</script>
<html>
<h1>Applet Demo</h1>
<body>
<applet name="uploadAppletFile" code="TestApplet.class" archive="FileUpload.jar" width="400" height="300"></applet>
<input type="button" name="button" onclick="uploadFileApp();" value="Button"/>
</body>
</html> 
```

**小程序类：**

```
public class TestApplet extends JApplet{
    public TestApplet() {
    }   
    public String FileCooserApp(){
        JFileChooser chooser = new JFileChooser();
        chooser.showOpenDialog(null);
        File file = chooser.getSelectedFile();
        String path = file.getAbsolutePath();
        return path;
    }   
 } 
```

正如我在我的 html 文件中显示的那样，我使用两种方式来访问小程序方法，但是当我单击按钮时，没有任何动作会执行。和控制台什么也没显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:54:04.857

全部在 html 中

```
<object id="uploadAppletFile"
   classid="java:com/company/package/TestApplet.class"
   type="application/x-java-applet" 
   archive="FileUpload.jar"  
   height="0" width="0">
   <param name="code" value="com/company/package/TestApplet.class" /> 
   <param name="archive" value="FileUpload.jar" />
</object> 

<script type="text/javascript">
function uploadFileApp(){   
    uploadAppletFile.FileCooserApp();
}
</script> 
```

# sql - 通过 XML 传递给 SQL

> ID：12005088
> 
> 赞同：1
> 
> 时间：2012-08-17T11:41:38.567
> 
> 标签：sql, xml, database, import

我需要解析我的 XML 文件并将解析的 XML 保存到 SQL 数据库。我的 XML 内容有几个标签`<goods_item>`。如果它只包含一个标签，它工作正常。但其他方面也有错误。

SQL查询：

```
declare @insert nvarchar(4000), @pathname varchar(200), @xml xml
set @pathname = 'D:\Tests\price1.xml'
create table #tmp_xml(xmldata xml)
set @insert = 'INSERT INTO #tmp_xml(xmldata) SELECT bulkcolumn 
      FROM OPENROWSET (BULK N''' + @pathname+ ''', SINGLE_BLOB) AS data'
exec sp_executesql @insert
select @xml = xmldata from #tmp_xml

INSERT INTO XML_import
SELECT 
Tbl.Col.value('goods_level[1]','int'),
Tbl.Col.value('goods_isgroup[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_code[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_name[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_parent[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_art[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_buhart[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_inpack[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_packtxt[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_country[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_gtd[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_nds[1]', 'NVARCHAR(50)'),
Tbl.Col.value('goods_unit[1]', 'NVARCHAR(50)')
FROM @xml.nodes('//goods_item') Tbl(Col)

drop table #tmp_xml 
```

和 XML：

```
<data_exchange>

<goods_item>
<goods_level>1</goods_level>
<goods_isgroup>1</goods_isgroup>
<goods_code>51852</goods_code>
<goods_name></goods_name>
<goods_parent></goods_parent>
<goods_art></goods_art>
<goods_buhart></goods_buhart>
<goods_inpack>0</goods_inpack>
<goods_packtxt></goods_packtxt>
<goods_country></goods_country>
<goods_gtd></goods_gtd>
<goods_nds>0</goods_nds>
<goods_unit></goods_unit>
</goods_item>

<goods_item>
<goods_level>1</goods_level>
<goods_isgroup>1</goods_isgroup>
<goods_code>51852</goods_code>
<goods_name></goods_name>
<goods_parent></goods_parent>
<goods_art></goods_art>
<goods_buhart></goods_buhart>
<goods_inpack>0</goods_inpack>
<goods_packtxt></goods_packtxt>
<goods_country></goods_country>
<goods_gtd></goods_gtd>
<goods_nds>0</goods_nds>
<goods_unit></goods_unit>
</goods_item>

<goods_item>
<goods_level>1</goods_level>
<goods_isgroup>1</goods_isgroup>
<goods_code>51852</goods_code>
<goods_name></goods_name>
<goods_parent></goods_parent>
<goods_art></goods_art>
<goods_buhart></goods_buhart>
<goods_inpack>0</goods_inpack>
<goods_packtxt></goods_packtxt>
<goods_country></goods_country>
<goods_gtd></goods_gtd>
<goods_nds>0</goods_nds>
<goods_unit></goods_unit>
</goods_item>

</data_exchange> 
```

这是我的第一个 SQL 项目，也许我很笨 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:28:14.377

如果我是你，我会把代码改成这样：干杯

```
Declare @Xml    Xml

Select  @Xml    =   Convert(Xml, bulkcolumn )
    From    OpenRowSet  (
        Bulk    N'D:\Tests\price1.xml'
    ,   Single_Blob
    );

If  (
    Object_Id('XML_import') Is  Null
)   Select  Tbl.Col.value('goods_level[1]',     'Int')
    ,   Tbl.Col.value('goods_isgroup[1]',   'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_code[1]',      'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_name[1]',      'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_parent[1]',    'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_art[1]',       'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_buhart[1]',    'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_inpack[1]',    'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_packtxt[1]',   'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_country[1]',   'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_gtd[1]',       'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_nds[1]',       'NVARCHAR(50)')
    ,   Tbl.Col.value('goods_unit[1]',      'NVARCHAR(50)')
        Into    XML_import
        From    @Xml.nodes('//goods_item')  Tbl(Col)
Else    Insert  XML_import
        Select  Tbl.Col.value('goods_level[1]',     'Int')
        ,   Tbl.Col.value('goods_isgroup[1]',   'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_code[1]',      'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_name[1]',      'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_parent[1]',    'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_art[1]',       'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_buhart[1]',    'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_inpack[1]',    'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_packtxt[1]',   'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_country[1]',   'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_gtd[1]',       'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_nds[1]',       'NVARCHAR(50)')
        ,   Tbl.Col.value('goods_unit[1]',      'NVARCHAR(50)')
            From    @Xml.nodes('//goods_item')  Tbl(Col) 
```

# android - 当我使用扩展 OrmLiteBaseActivity 时，类在 android 上找不到异常

> ID：12005089
> 
> 赞同：1
> 
> 时间：2012-08-17T11:41:38.413
> 
> 标签：android, ormlite

当我使用扩展`OrmLiteBaseActivity<Database>`而不是扩展时`Activity` ，我的`logcat`.

```
08-17 17:05:28.497: W/dalvikvm(8818): Unable to resolve superclass of Lcom/example/sample/MainActivity; (427)
08-17 17:05:28.537: W/dalvikvm(8818): Link of class 'Lcom/example/sample/MainActivity;' failed
08-17 17:05:28.537: D/AndroidRuntime(8818): Shutting down VM
08-17 17:05:28.568: W/dalvikvm(8818): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-17 17:05:28.608: E/AndroidRuntime(8818): FATAL EXCEPTION: main
08-17 17:05:28.608: E/AndroidRuntime(8818): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.sample/com.example.sample.MainActivity}: java.lang.ClassNotFoundException: com.example.sample.MainActivity
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.os.Looper.loop(Looper.java:137)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at java.lang.reflect.Method.invokeNative(Native Method)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at java.lang.reflect.Method.invoke(Method.java:511)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at dalvik.system.NativeStart.main(Native Method)
08-17 17:05:28.608: E/AndroidRuntime(8818): Caused by: java.lang.ClassNotFoundException: com.example.sample.MainActivity
08-17 17:05:28.608: E/AndroidRuntime(8818):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
08-17 17:05:28.608: E/AndroidRuntime(8818):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
08-17 17:05:28.608: E/AndroidRuntime(8818):     ... 11 more
08-17 17:05:28.678: I/dalvikvm(8818): threadid=3: reacting to signal 3
08-17 17:05:28.847: I/dalvikvm(8818): Wrote stack traces to '/data/anr/traces.txt'
08-17 17:05:29.177: I/dalvikvm(8818): threadid=3: reacting to signal 3
08-17 17:05:29.217: I/dalvikvm(8818): Wrote stack traces to '/data/anr/traces.txt'
08-17 17:05:29.397: I/dalvikvm(8818): threadid=3: reacting to signal 3
08-17 17:05:29.417: I/dalvikvm(8818): Wrote stack traces to '/data/anr/traces.txt'
08-17 17:05:30.738: I/Process(8818): Sending signal. PID: 8818 SIG: 9 
```

但是如果我使用`activity`我不会收到任何错误，并且应用程序运行良好这里是我的主类的代码

```
 public class MainActivity extends OrmLiteBaseActivity<Database> {
Button fromdatabase, fromsdcard;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    fromdatabase = (Button) findViewById(R.id.loadfromdatabase);
    fromsdcard = (Button) findViewById(R.id.loadfromsd);

    fromdatabase.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent in = new Intent(MainActivity.this, ListViewer.class);
            startActivity(in);
        }
    });
    fromsdcard.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent in = new Intent(MainActivity.this, ListViewer.class);
            startActivity(in);
        }
    });
}
  } 
```

数据库类

```
public class Database extends OrmLiteSqliteOpenHelper {

private static final String DATABASE_NAME = "imagetester";

private static final int DATABASE_VERSION = 1;

public Database(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) {
    try {
        Log.i(Database.class.getName(), "onCreate");
        TableUtils.createTable(connectionSource, image.class);

    } catch (SQLException e) {
        Log.e(Database.class.getName(), "Can't create database", e);
        throw new RuntimeException(e);
    }
    RuntimeExceptionDao<image, Integer> dao = getSimpleDataDao();
    for(int i=0;i<5;i++)
    {
    image simple = new image(i);
    dao.create(simple);
    }

}
private RuntimeExceptionDao<image, Integer> getSimpleDataDao() {
    return getRuntimeExceptionDao(image.class);
}

@Override
public void onUpgrade(SQLiteDatabase arg0, ConnectionSource arg1, int arg2,
        int arg3) {
    // TODO Auto-generated method stub

}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:08:10.067

外部 Jar 创建名为 libs 的文件夹时出现问题，并在该文件夹中复制并粘贴所有需要的 jar 文件。工作！ [这个链接有帮助](https://stackoverflow.com/a/10046725/1289716)

# amazon-s3 - Paperclip/AWS S3：即使文件已正确上传到 S3，附件 url 始终是默认值

> ID：12005092
> 
> 赞同：0
> 
> 时间：2012-08-17T11:41:55.707
> 
> 标签：amazon-s3, paperclip

当我创建用户模型时，avatar.png 文件会在定义的路径中正确上传到 S3。问题是，当我尝试“读取/下载” user.avatar.url 时，它总是给出默认路径，即默认头像。

我的 user.rb 有这个：

```
attr_accessible :avatar

has_attached_file :avatar,
        :storage => :s3,
        :bucket => "/avatars",
        :s3_credentials => {
          :access_key_id     => ENV['S3_KEY'],
          :secret_access_key => ENV['S3_SECRET']
        },
        :path => "/avatars/:filename",
        :default_url => "https://s3.amazonaws.com/avatars/default.png" 
```

在我看来，我有：

```
user.avatar.url  #<--- Which outputs https://s3.amazonaws.com/avatars/default.png 
```

任何想法如何获得正确的 url 和正确的头像（在 S3 中确实存在）？

或者如何调试附件搜索路径（即回形针搜索文件的路径）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:58:14.230

问题是附件文件名属性没有被保存，这是由于这一行：

```
attr_accessor :avatar_file_name 
```

删除该行解决了问题。

# objective-c - 未使用 NSAnimationContext 调用 CAAnimation animationDidStop

> ID：12005097
> 
> 赞同：0
> 
> 时间：2012-08-17T11:42:06.067
> 
> 标签：objective-c, macos, cocoa, delegates, caanimation

我正在使用这段代码为 NSScrollView 滚动制作动画：

```
 [NSAnimationContext beginGrouping];
    NSClipView* clipView = [self contentView];
    NSPoint newOrigin = [clipView bounds].origin;
    newOrigin.x = page*kGalleryWidth;
    [[clipView animator] setBoundsOrigin:newOrigin];
    [NSAnimationContext endGrouping]; 
```

现在我正在尝试获取触发动画结束的事件。我已经阅读了几行代码，使用 CAAnimation，我很容易实现它，但我做不到。

我已经尝试了以下代码：

```
CAAnimation *moveAnimation = [[self.contentView animationForKey:@"frameOrigin"] copy];
moveAnimation.delegate = self;
[self.contentView setAnimations:[NSDictionary dictionaryWithObject:moveAnimation forKey:@"frameOrigin"]]; 
```

*   (void)animationDidStop:(CAAnimation *)动画完成:(BOOL)flag{

    NSLog(@"停止！");

}

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:21:15.417

```
[UIView beginAnimations:@"goback" context:nil];
[UIView setAnimationDuration:0.3f];
[UIView setAnimationBeginsFromCurrentState:NO];
dragOperation.draggable.center =dragOperation.initialPoint;
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector: @selector(animationDidStop:finished:context:)];
UIView commitAnimations];

-(void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
    [self.layer removeAnimationForKey:@"goback"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:16:43.330

您可以使用此功能：

```
[[NSAnimationContext currentContext] setCompletionHandler:<#(void (^)(void))completionHandler#>]

 [NSAnimationContext beginGrouping];
    [[NSAnimationContext currentContext] setCompletionHandler:^{
        NSLog(@"animation stop!");
    }];
    NSClipView* clipView = [self contentView];
    NSPoint newOrigin = [clipView bounds].origin;
    newOrigin.x = page*kGalleryWidth;
    [[clipView animator] setBoundsOrigin:newOrigin];
    [NSAnimationContext endGrouping]; 
```

# java - 当 Action 类位于单独的 jar 文件中时，Struts 2 验证失败

> ID：12005098
> 
> 赞同：2
> 
> 时间：2012-08-17T11:42:08.483
> 
> 标签：java, jakarta-ee, maven, struts

我有一个 Maven 多模块项目。

```
project-services (service layer..above the dao layer)
project-controller (My Action classes sits in this module)
project-web (all jsps, view artificats) 
```

问题是我在包中有一个有效的 DefaultProjectsAction-validation.xml 和 DefaultProjectsAction.java 以及属性文件。

所有这些模块，当部署war文件时，将位于/WEB-INF/lib中。我在 struts.xml 中使用默认包。所有文件均已正确设置。正确检查文件名的拼写错误。如果验证 xml 文件在单独的 jar 中，我的 struts 验证是否有效。我在某个地方读到他们说它应该在 WEB-INF/classes/ 中。这是我的struts表单无法验证的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:45:36.573

好吧，自从我开始研究这个问题以来，已经过了 48 小时，女士们，先生们，已经找到了解决方案。

将 struts 2 动作类放在一个单独的模块上，并且验证设置必须像这样。

```
project-controller (will have action classes for Struts 2 in this case)
 - com.pack.UserAction.java 
```

解决方案是在 project-web 模块中创建一个源文件夹 src/main/resources/com/pack（Maven 项目）并将 UserAction-validation.xml 放在那里。像这样

```
project-web (views, jsps, properties files and set-up files)
 - src/main/resources/com/pack/UserAction-validation.xml 
```

该文件将被复制到 /WEB-INF/classes/com/pack （动作类包应形成路径）并在构建项目时

# eclipse - 使用 eclipse juno 和 maven 集成将 Web 应用程序发布到 glassfish 时缺少 jars

> ID：12005101
> 
> 赞同：0
> 
> 时间：2012-08-17T11:42:16.073
> 
> 标签：eclipse, glassfish, maven-3

我将 eclipse juno 与 GlassFish Server Open Source Edition 3(java EE6)、m2e 和 maven 3.0.4 一起使用。当我通过“mvn package”命令创建一个war文件并将其部署到glassfish时，war文件工作得很好。

但是，当我从 Eclipse 的服务器视图将 Web 应用程序发布到 glassfish 时，Web 应用程序会失败。我猜这个失败的原因是没有正确配置从 eclipse 发布以从我的 maven 存储库中获取 jar，然后 eclipseApps//WEB-INF/lib 目录中的 jar 文件丢失。

将 web 应用程序发布到 glassfish 时，我可以将 eclipse 配置为使用 maven 配置吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:12:48.137

我找到了答案“无论如何我通过在 [Eclipse Helios SR2 的 Glassfish 部署中添加以下行属性 > 部署程序集：/target/myapp/WEB-INF/lib -> WEB-INF/lib 来解决了这个问题”失败](https://stackoverflow.com/questions/5154828/glassfish-deployment-out-of-eclipse-helios-sr2-fails)

谢谢。

# emacs - 如何在增量搜索中启用退格？

> ID：12005103
> 
> 赞同：4
> 
> 时间：2012-08-17T11:42:22.150
> 
> 标签：emacs, putty, emacs23

如何改变这种行为：

1.  `C-s`— 开始增量搜索
2.  type `word`— 错误打印最后一个字符
3.  `Backspace`——哎呀！增量搜索消失了，我实际上从缓冲区中删除了 1 个字符。

到那个：

1.  `C-s`— 开始增量搜索
2.  `word`— 错误打印最后一个字符
3.  `Backspace`— 删除最后一个`d`字符
4.  输入`k`——`work`正确，然后继续搜索

我通过 PuTTY 中的 SSH 在文本终端中运行 Emacs。

操作系统版本：2.6.16.60-0.58.1.1882.3.PTF.638363-smp #1 SMP Wed Dec 2 12:27:56 UTC 2009 x86_64 x86_64 x86_64 GNU/Linux

Emacs 版本：2010-07-16 的 GNU Emacs 23.2.1 (x86_64-unknown-linux-gnu, GTK+ Version 2.14.6)

使用该`-q`选项，`Backspace`PuTTY 发送的只是`C-h`，它的行为类似于`C-h`，但在我的`.emacs`文件中我绑定到`delete-backward-char`：

```
(global-set-key [(control h)] 'delete-backward-char) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:01:43.287

试试这个：

```
(define-key isearch-mode-map [(control h)] 'isearch-delete-char) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:55:47.097

您应该做的是将 PuTTY 配置为发送`C-?`（字节 127）`Backspace`而不是`C-h`（字节 8）。这是在大多数情况下效果最好的设置。请参阅 [PuTTY 手册](http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter4.html#config-backspace)。

如果`C-h`由于某些其他应用程序无法运行而将 PuTTY 设置更改为发送，请检查服务器上的终端设置是否正确。该设置通常会被正确地自动检测到，但有时您可能需要添加`stty erase '^?'`到服务器上的 shell 配置文件（`.bashrc`或类似文件）中。

如果你真的必须有`Backspace`send `C-h`，那么全局重新绑定`C-h`是不够的。相反，添加`(normal-erase-is-backspace-mode 1)`到您的`.emacs`. 请参阅[Emacs 手册](http://www.gnu.org/software/emacs/manual/html_node/emacs/DEL-Does-Not-Delete.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:15:42.803

你应该如何使用 Emacs：

1.  Cs - 开始增量搜索
2.  输入**单词**- 最后一个字符打印错误
3.  **我**- 进入 minibuffer 中的编辑搜索词事物模式 :-)
4.  更正错字
5.  Cs - 继续增量搜索

# iphone - iphone：从文档目录文件夹复制或移动文件

> ID：12005104
> 
> 赞同：2
> 
> 时间：2012-08-17T11:42:27.470
> 
> 标签：iphone, ios

这是我的代码。

```
NSArray *pathSong = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *toPath = [[pathSong objectAtIndex:0] stringByAppendingPathComponent:@"Songs"];
    NSString *fromPath=[[pathSong objectAtIndex:0] stringByAppendingPathComponent:@"abc"];
    NSString *strdestination = [fromPath stringByAppendingPathComponent:@"sg.mp3"];
    NSError *Error;
    if([[NSFileManager defaultManager]fileExistsAtPath:strdestination]){
        if([[NSFileManager defaultManager]copyItemAtPath:strdestination toPath:toPath error:&Error]==NO){
            UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"copy" message:[NSString stringWithFormat:@"%@",Error] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [Alert show];
        }
        else{
            UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"Not copy" message:[NSString stringWithFormat:@"%@",Error] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [Alert show];
        }
    } 
```

我收到错误徽标：

> 错误域 = NSCocoaErrorDominCode = 516“操作无法完成。（可可箭头 516。）”用户信息 = 0x681abf0
> 
> NSUnderlyingError =0x681b920 "操作无法完成。文件存在"

abc 文件夹中没有歌曲名称“sg.mp3”，但我仍然收到文件存在错误。不知道我哪里做错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T17:31:19.290

您的代码中有两个问题：

1.  如果文件已经存在，您需要删除它
2.  您需要为目标文件指定一个名称，这意味着如果您使用如下：

`NSString *toPath = [[pathSong objectAtIndex:0] stringByAppendingPathComponent:@"Songs"];`

和

```
[[NSFileManager defaultManager]copyItemAtPath:strdestination toPath:toPath error:&Error]; 
```

然后如果发生复制，它会将 Sg.mp3 文件复制为无任何类型的歌曲。

所以你需要这样写：

```
NSArray *pathSong = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *tempPath = [[pathSong objectAtIndex:0] stringByAppendingPathComponent:@"Songs"];
NSString *toPath = [tempPath stringByAppendingPathComponent:@"yourFileName.mp3"];
NSString *fromPath = [[pathSong objectAtIndex:0] stringByAppendingPathComponent:@"abc"];
NSString *strdestination = [fromPath stringByAppendingPathComponent:@"sg.mp3"];
NSError *Error = nil;

if([[NSFileManager defaultManager]fileExistsAtPath:strdestination])
{

  if([[NSFileManager defaultManager]copyItemAtPath:strdestination toPath:toPath error:&Error]==NO)
   {
       UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"copy" message:[NSString stringWithFormat:@"%@",Error] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
       [Alert show];
   }
   else
   {
      [fileManager removeItemAtPath:strdestination error:NULL];
       UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"Not copy" message:[NSString stringWithFormat:@"%@",Error] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
       [Alert show];
   }
} 
```

如果目标文件存在，此代码将删除该文件，然后将文件夹复制到`sg.mp3`具有名称的文件夹`abc``Songs``yourFileName.mp3`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T12:50:01.283

借鉴 Midhun MP 的答案，这里有一个帮手

```
BOOL moveFile(NSString *srcPath, NSString *dstPath)
{
    NSLog(@"moving %@ -> %@", srcPath, dstPath);

    NSFileManager *fm = [NSFileManager defaultManager];
    if ([fm fileExistsAtPath:dstPath])
    {
        // in my usecase this is a hard error, bolt to prevent overwriting
        return NO;
    }

    if ([fm fileExistsAtPath:srcPath])
    {
        NSError *error = nil;
        NSString *destDir = [dstPath stringByDeletingLastPathComponent];
        [fm createDirectoryAtPath:destDir withIntermediateDirectories:YES attributes:nil error:nil];

        if ([[NSFileManager defaultManager] copyItemAtPath:srcPath toPath:dstPath error:&error]==NO)
        {
            NSLog(@"failure declassing %@", srcPath);
            return NO;
        }
        else
        {
            [fm removeItemAtPath:srcPath error:NULL]; // gr8t success
            return YES;
        }
    }

    return NO;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:48:58.877

我认为这是因为您试图用您的副本覆盖文件。

检查您的权限掩码，尝试使用缓存而不是文档目录。

你的意思是`if(!fileExistsAtPath)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:50:50.050

您需要删除已经存在的文件：

```
NSArray *pathSong = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *toPath = [[pathSong objectAtIndex:0] stringByAppendingPathComponent:@"Songs"];
NSString *fromPath=[[pathSong objectAtIndex:0] stringByAppendingPathComponent:@"abc"];
NSString *strdestination = [fromPath stringByAppendingPathComponent:@"sg.mp3"];
NSError *Error;

//DELETE THE FILE AT THE LOCATION YOU'RE COPYING TO
NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager removeItemAtPath:strdestination error:NULL];

if([[NSFileManager defaultManager]copyItemAtPath:strdestination toPath:toPath error:&Error]==NO){
        UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"copy" message:[NSString stringWithFormat:@"%@",Error] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [Alert show];
    }
else{
        UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"Not copy" message:[NSString stringWithFormat:@"%@",Error] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [Alert show];
    } 
```

# c# - 访问同一应用程序中两个 .csproj 文件之间的函数

> ID：12005106
> 
> 赞同：1
> 
> 时间：2012-08-17T11:42:34.010
> 
> 标签：c#, .net, api, csproj

我将 Codeplex 的 Managed WiFi 站点提供的 WLAN API 合并到我的 C# 项目（Windows 窗体应用程序）中。在 API 中，提供了不同的函数来检索机器当前 WiFi 配置文件的各个方面。我只对检索下面函数中给出的 RSSI 强度感兴趣。然后，我想获取该值并将其粘贴在表单上的文本框中。

（视觉工作室 2008）

在 WlanAPI.cs 文件中，我感兴趣的函数是这样存在的：

```
 namespace NativeWifi
{
   public class WlanClient
{
    /// <summary>
    /// Represents a Wifi network interface.
    /// </summary>
    public class WlanInterface
    {

                   /// <summary>
        /// Gets the RSSI.
        /// </summary>
        /// <value>The RSSI.</value>
        /// <remarks>Not supported on Windows XP SP2.</remarks>
        public int RSSI
        {
            get
            {
                return GetInterfaceInt(Wlan.WlanIntfOpcode.RSSI);
            }
        } 
```

在 myApp.cs 中，我有一个简单命名为“wifi”的文本框，它将显示当前的 RSSI。我在 myApp.cs 标头中包含：“使用 NativeWifi”，但似乎无法从 WlanAPI.csproj 中的 RSSI 函数获取数据。该项目构建和编译得很好。我只是想获得 RSSI 值。

在 myApp.cs 我有一个声明，大意是：

```
wifi.Text = (GetInterfaceInt(Wlan.WlanIntfOpcode.RSSI)); //app form txt_box=RSSI value 
```

我知道这是不正确的，但显示了我正在尝试做的事情。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:21:31.147

你应该能够解决你所面临的问题

1.  添加对 WlanAPI.dll 或 WlanAPI 项目的引用（如果将其添加到解决方案中）
2.  使用如下代码：

    ```
    Using NativeWifi;

    Class MyAPP : Form
    {

      public void PrintRSSI()
      {

          WlanClient client = new WlanClient();
          var interfaces = client.Interfaces;

          //Now chose an interface out of all the available interfaces. Usually there would be zero or 1 interfaces available
          if(interfaces.Length > 0)
          {
              //Select first available interface. A more complicated logic can present the list of available interfaces to the user and and then display RSSI for the selected interface
              wifi.Text = interfaces[0].RSSI.ToString();
          }
       }

     //Other code for the class
    } 
    ```

# python - Python - 无法构建 PyCPUID

> ID：12005109
> 
> 赞同：2
> 
> 时间：2012-08-17T11:42:43.507
> 
> 标签：python, gcc, mingw32, mingw-w64

我花了很多时间尝试构建[PyCPUID](http://pypi.python.org/pypi/PyCPUID#downloads)

我在使用 Python 2.7 64 位的 Windows 7 64 位上。我已经安装了 cygwin，所以我可以尝试使用这个命令进行构建

```
python setup.py build -c mingw32 
```

这导致

```
error: command 'gcc' failed: Permission denied 
```

是的，我正在使用管理员权限运行。（mingw32 也是 32 位编译器吗？）我也尝试从 cygwin 终端运行它。

我知道 c:\cygwin\bin\gcc.exe 是符号链接或其他东西在 Windows 上的一些问题，所以我将 gcc-3.exe 重命名为 gcc，这让我更进一步，但那失败了

```
$ python setup.py build -c mingw32
running build
running build_py
running egg_info
writing requirements to PyCPUID.egg-info\requires.txt
writing PyCPUID.egg-info\PKG-INFO
writing top-level names to PyCPUID.egg-info\top_level.txt
writing dependency_links to PyCPUID.egg-info\dependency_links.txt
reading manifest file 'PyCPUID.egg-info\SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no previously-included files found matching 'requirements-jenkins.txt'
no previously-included directories found matching 'doc\build'
warning: no previously-included files found matching '.bzr'
warning: no previously-included files found matching 'build'
warning: no previously-included files found matching 'dist'
warning: no previously-included files found matching 'jenkins'
warning: no previously-included files found matching '.coverage'
warning: no previously-included files found matching 'coverage.xml'
warning: no previously-included files found matching 'nosetests.xml'
writing manifest file 'PyCPUID.egg-info\SOURCES.txt'
running build_ext
building 'pycpuid._pycpuid' extension
C:\cygwin\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Python27\PC -c pycpuid/_pycpuid.c -o build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.o
writing build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.def
C:\cygwin\bin\gcc.exe -mno-cygwin -shared -s build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.o build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.def -LC:\Python27\libs -LC:\Python27\PCbuild\amd64 -lpython27 -lmsvcr90 -o build\lib.win-amd64-2.7\pycpuid\_pycpuid.pyd
build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.o:_pycpuid.c:(.text+0x2e): undefined reference to `__imp__PyArg_ParseTuple'
build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.o:_pycpuid.c:(.text+0x6a): undefined reference to `__imp__Py_BuildValue'
build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.o:_pycpuid.c:(.text+0xa7): undefined reference to `__imp__Py_InitModule4'
/usr/bin/ld: build\temp.win-amd64-2.7\Release\pycpuid\_pycpuid.o: bad reloc address 0x0 in section `.data'
collect2: ld returned 1 exit status
error: command 'gcc' failed with exit status 1 
```

而我现在完全不知所措。有任何想法吗？

# wordpress - Wordpress - 如何创建最喜欢的帖子功能

> ID：12005110
> 
> 赞同：0
> 
> 时间：2012-08-17T11:42:53.783
> 
> 标签：wordpress

我希望我的用户能够将帖子标记为收藏。我尝试了 wp-favorite-posts 插件，但它不起作用。我将帖子标记为收藏夹，刷新页面后它就消失了。此外，如果我将 {{wp-favorite-posts}} 放到页面上，它只会显示文本。所以我想创建自己的解决方案，但不知道如何。我从未编辑过 WP 数据库，但我有丰富的 PHP mySQL 经验。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:48:28.543

您可以使用 post_meta。您可以将“最喜欢的”方面存储为附加到每个帖子的自定义字段。您不需要手动编辑数据库（即通过 mySQL）。

当您想要显示收藏的帖子时，请运行自定义查询，该查询仅显示具有您指定的特定自定义字段的帖子。

# c++ - 在类中初始化空数组

> ID：12005112
> 
> 赞同：1
> 
> 时间：2012-08-17T11:42:58.360
> 
> 标签：c++, arrays, class, initialization

我刚刚尝试过：

```
class Test
{

public:
        int iArray[][];

} 
```

……这不可能吗？我必须设置一个恒定值吗？

喜欢：

```
class Test
{
public:
       const int iArray[5][4];
} 
```

我想稍后定义 [x][y]，只要有展示位置。否则它不会是“动态的”，我不想使用向量，因为我希望能够通过“X”和“Y”访问值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:15:59.960

我认为实现这一目标的更好方法是使用指针。你可以这样做。

```
#include <cstdlib>
#include <iostream>

using namespace std;

class PointerTest {

    private:
        int** array;
        int x, y;
    public :
        void setValue(int row, int col,int value);
        int getValue(int row, int col);
        PointerTest(int row, int col);
       ~PointerTest() {
    for(int i=0;i<x;i++) {
        delete array[y];
    }
        }

};
PointerTest::PointerTest(int row, int col) {
    x=row, y=col;
    for(int i=0;i<row;i++) {
        *array=new int[col];
    }
}

void PointerTest::setValue(int row, int col, int value) {
    *(array[row])=value;
}

int PointerTest::getValue(int row, int col) {
    return *(array[row]);
}

int main(int argc, char *argv[])
{
    PointerTest* t=new PointerTest(4,5);
    t->setValue(0,0,464);
    cout<<"The value in array: "<<t->getValue(0,0)<<endl;

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T11:46:26.753

将 std::vector 放入向量中怎么样？

```
std::vector< std::vector< const int > > iArray; 
```

在 C++ 中使用“普通”数组的理由并不多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T11:51:55.600

关于什么

```
tempalte <int N1, int N2> class Test
{
public:
  int iArray[N1][N2];
}; 
```

?

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T11:46:36.517

如果您想`int iArray[][];`稍后决定大小，则可以使用`vector< vector<int> > iArray;`.

另一种方法是使用 nested `new[]`，这有点复杂。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-17T11:48:15.203

不，这是不可能的。但是你可以在你的类中有一个指针，比如

```
int **ptr; 
```

然后在构造函数或任何地方为您的数组分配内存

```
ptr = (int **)malloc( the size you want ); 
```

或使用 C++ 中的“new[]”-运算符。

但是如果您使用的是 C++ .. 最好的方法是使用：

```
std::vector< std::vector< int >> array; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T11:51:30.787

```
class Test
{
public:
  Test()
  {
    iArray = new int*[5];
    for(int i = 0; i < 5; i++)
      iArray[i] = new int[4];
  }
  ~Test()
  {
    for(int i = 0; i < 5; i++)
      delete[] iArray[i];
    delete[] iArray;
  }
  int** iArray;
}; 
```

将允许您在运行时分配一个 2d int 数组（在此示例中为 5x4），但老实说，我会使用其他一些海报所指出的向量，您无需担心之后释放内存你用新做的。

# c# - 用于从数据库中检索过滤器值的重构方法

> ID：12005118
> 
> 赞同：0
> 
> 时间：2012-08-17T11:43:18.300
> 
> 标签：c#, entity-framework, linq-to-sql, refactoring

我正在使用 .Net Framework 4、mvc 3 和实体框架（最新稳定版）

在索引页面上，我希望能够过滤每一列。LINQ 使用 distinct() 方法为每一列检索过滤器值。我还没有找到一种重用为每一列检索这些值的方法的好方法——它们基本上是相等的，唯一区别它们的是所使用的列名，因此使用一种方法而不是几种方法会很棒。

```
public List<string> GetLevels()
{
    return _db.Logs.Select(l => l.Level).Distinct().ToList();
}

public List<string> GetOrders()
{
    return _db.Logs.Select(l => l.Order).Distinct().ToList();
} 
```

如何使用要从中检索数据的列名注入 lambda 表达式？像这样的东西：

```
public List<string> GetFilterValues(string columName)
{
    return _db.Logs.Select(l => l.columnName).Distinct.ToList();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T11:52:14.360

您可以编写一个函数，该函数采用一个表达式来选择您想要的属性：

```
public List<T> GetLogProperties<T>(Expression<Func<Log, T>> selector)
{
    return _db.Logs.Select(selector).Distinct().ToList();
}

public List<string> GetLevels()
{
    return GetLogProperties(l => l.Level);
} 
```

编辑：如果要从字符串列创建投影，则必须自己构建表达式：

```
public List<string> GetFilterValues(string columnName)
{
    var paramExpr = Expression.Parameter(typeof(Log), "l");
    var propExpr = Expression.Property(paramExpr, columnName);
    var lambdaExpr = Expression.Lambda<Func<Log, string>>(propExpr, paramExpr);

    return _db.Logs.Select(lambdaExpr).Distinct().ToList();
}

List<string> levels = GetFilterValues("Level"); 
```

请注意，如果具有给定名称的属性不是属性，这将引发异常`string`。

# android - 如何在 ICS 中添加首选项

> ID：12005121
> 
> 赞同：4
> 
> 时间：2012-08-17T11:33:45.473
> 
> 标签：android

我需要在`ICS`using中添加首选项`addPreferencesFromResource()`。
它在 中显示为已弃用`ICS`。
我在 xml 文件夹中添加了一个首选项布局，但这无法添加到首选项活动中。

我怎样才能添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:57:35.150

在 API 级别 11 及更高版本上，该计划供您使用`PreferenceFragments`来调用`addPreferencesFromResource()`. 您可以[在`PreferenceActivity`](http://developer.android.com/reference/android/preference/PreferenceActivity.html).

如果您尝试支持`PreferenceFragment`API 级别 11+，但仍支持旧设备，则需要执行该文档中显示的内容*并*`addPreferencesFromResource()`直接在您的... 中调用，`PreferenceActivity`但仅当您使用旧设备时。即使`addPreferencesFromResource()`标记为已弃用，但这并不意味着它不起作用，更重要的是，它是您在 API 级别 10 及以下*的唯一选择。*

[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Prefs/FragmentsBC)，我在其中演示了支持 API 级别 11 样式的片段和`PreferenceActivity`来自单个源集的经典片段。

# symfony - 将电子邮件正文设置为 html 格式

> ID：12005125
> 
> 赞同：0
> 
> 时间：2012-08-17T11:43:51.967
> 
> 标签：symfony

我有以下代码来发送邮件

```
use Ens\NewBundle\Controller\Services\MyMailers as MyMailers;

function NotificationOnSignUp($z)
{
    $x = new MyMailers;
    $x->setToloc($z['to']);
    $x->setFromloc('ucerturohit@gmail.com');
    $x->setSubject('Wonderful world');
    $x->setBody('Hello world');

    $z = $x->mail();

    if($z==1) {
        $name = 'success';
    } else {
        $name = 'failed';
    }

    return $x->render('EnsNewBundle:Email:ind.html.twig', array('name' => $name));
    // return $z;  
} 
```

我想将模板文件设置`ind.html.twig`为邮件的正文。此功能不在控制器中，我不想使用任何服务。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-07T07:51:51.077

我想我的答案延迟了 2 年，但也许对其他人来说这会有所帮助：这是一个特殊的 Sf2 包，用于从 twig 模板[Symfony2-MailerBundle](https://github.com/umbrella-web/Symfony2-MailerBundle)发送邮件。
该捆绑包还允许在配置文件中设置发送参数，并且您不必在每次要构建和发送电子邮件时都传递它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:52:38.153

您可以使用以下方法获取渲染模板所产生的字符串：

```
$container->get('templating')->render('EnsNewBundle:Email:ind.html.twig', array('name' => $name)) 
```

# python - Python os.path.abspath 意外结果

> ID：12005129
> 
> 赞同：0
> 
> 时间：2012-08-17T11:44:25.650
> 
> 标签：python, python-3.x, python-2.6

当我开始这样的程序时

```
python Script.py 
```

abspath 像那样返回

```
os.path.abspath("../../house/kitchen") == "/ex1/ex2/house/kitchen" 
```

但是当我这样开始时，我得到了

```
python ex3/Script.py 
os.path.abspath("../../house/kitchen") == "/house/kitchen" 
```

我想我需要将工作地点设置为脚本所在的位置，但如何做到这一点。

```
os.chdir(os.path.dirname(os.path.realpath(sys.argv[0]))) 
```

这解决了我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:55:20.257

当给定一个相对路径参数时，abspath 从你的当前目录开始，而不是脚本的当前目录，所以如果你的当前目录改变了输出改变。

# rest - 如何使用类似 REST 的后端构建 EmberJS 应用程序？

> ID：12005132
> 
> 赞同：0
> 
> 时间：2012-08-17T11:44:35.120
> 
> 标签：rest, ember.js

我没有详细研究过 BackboneJS 或 EmberJS，但据我所知，BackboneJS 可以与 REST 后端无缝协作。而 EmberJS 似乎没有任何我可以开箱即用的东西。

谁能提供任何建议如何使用 EmberJS 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:25:20.200

如果您只需要一个简单的 REST 适配器而没有太多复杂性，那么

[https://github.com/cerebris/ember-rest](https://github.com/cerebris/ember-rest)

非常适合这份工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:45:51.910

我在 InfoQ 上写了一篇关于 Ember.js 的文章，其中介绍了基础知识。这篇文章使用了 Ember 0.9.5，所以并不是所有的东西都可以使用最新的 Ember 1.0-pre 版本。

它介绍了 Ember 应用程序的基本结构以及 Ember Data 的基础知识。

[http://www.infoq.com/articles/emberjs](http://www.infoq.com/articles/emberjs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:07:57.113

我认为您正在寻找类似 Ember-rails 的东西

[https://github.com/emberjs/ember-rails](https://github.com/emberjs/ember-rails)

# android - addview() 中的屏幕方向

> ID：12005133
> 
> 赞同：0
> 
> 时间：2012-08-17T11:44:40.967
> 
> 标签：android, android-layout, android-view

我通过 addView() 添加视图，并且我想将该视图上的屏幕方向阻止为纵向。我试过了：

```
WindowManager.LayoutParams params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.FILL_PARENT,
            WindowManager.LayoutParams.FILL_PARENT,
            WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                    | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
                    | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                    | WindowManager.LayoutParams.FLAG_FULLSCREEN,
            PixelFormat.TRANSLUCENT);
    params.gravity = Gravity.CENTER | Gravity.TOP;
    params.screenOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;

    LinearLayout glass = new LinearLayout(this);
    glass.setBackgroundResource(R.drawable.glass6);

    WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
    wm.addView(glass, params); 
```

它不起作用。我该怎么做？另外，我怎样才能使我的新视图在应用程序关闭后不会消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:06:08.200

尝试这个

```
glass.setOrintation(Configuration.ORIENTATION_LANDSCAPE) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T11:55:07.143

在您的清单文件中使用`android:screenOrientation="landscape"`or android:screenOrientation="portrait"。限制您的活动在`portrait`or`landscape`模式下查看。

# sql - 多对多关系的 SQL 查询

> ID：12005134
> 
> 赞同：0
> 
> 时间：2012-08-17T11:44:47.803
> 
> 标签：sql

我有以下架构：

```
Photo [id, name]

Gallery [id, name]

PhotoGallery [photo_id, gallery_id] 
```

每张照片可以属于许多画廊。我需要进行一个 SQL (MySQL) 查询，它允许我显示不属于某些画廊的所有不同照片（按 id 分组）。例如我们有以下数据：

```
Photo
------
1 bunny
2 rabbit
3 eagle

Gallery
-----
1 bunnies
2 rabbits
3 birds

PhotoGallery
-----
1 1
1 2
2 2
3 3 
```

我想选择所有不属于画廊“兔子”的照片。

结果应该是：

2 兔子

有什么建议么？查询也应该很快，因为我在数据库中有大约 10,000,000 张照片。图库可以包含 300,000 张照片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:47:32.193

```
SELECT *
FROM photos
WHERE photoID NOT IN (select photoid from photogalleries where galleryid=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:50:39.427

```
SELECT 
      p.*
FROM 
      photos p LEFT OUTER JOIN PhotoGallery pg on p.id = pg.photoid
WHERE 
      pg.photoid IS NULL AND pg.galleryid = 1 
```

# asp.net-mvc-3 - 流利的验证规则上界没有对应的规则

> ID：12005135
> 
> 赞同：1
> 
> 时间：2012-08-17T11:44:49.540
> 
> 标签：asp.net-mvc-3, fluentvalidation

我有奇怪的问题。ModelState 有错误。但我对此没有规定。没有过滤器，验证器文件中没有规则。

我的代码。视图模型：

```
[Validator(typeof(TestValidation))]
public class PayerPayRateViewModel 
{

    public int TestId { get; set; }

    public bool AllServices { get; set; }

    public int ParentEntityId { get; set; }
} 
```

验证器

```
 public class TestValidation : BaseEntityRepositoryValidator<Core.Domain.Model.Entities.Payer, PayerPayRateViewModel>
{
    public TestValidation()
    {
        RuleFor(x => x.ParentEntityId).Must(CheckUniqueService);
    }

    protected bool CheckUniqueService(PayerPayRateViewModel model, int value)
    {
        if (model.AllServices)
        {
            return true;
        }

        return false;          
    }      
} 
```

如果我有值为 0 的 TestId，我会得到“ **TestId: Field is required** ”。

当我从 Viewmodel 类中删除验证属性时，我得到“ **A value is required.** ”错误。

为什么会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:48:31.937

因为您试图将空字符串绑定到不可为空的类型。如果您希望发生这种情况，请使用可为空的类型：

```
[Validator(typeof(TestValidation))]
public class PayerPayRateViewModel 
{
    public int? TestId { get; set; }

    public bool AllServices { get; set; }

    public int ParentEntityId { get; set; }
} 
```

默认情况下，有一个隐式的Required 属性应用于所有不可为空的类型（想想整数、日期时间、小数......）。

顺便说一句，您可以禁用此默认行为：

```
DataAnnotationsModelValidatorProvider
    .AddImplicitRequiredAttributeForValueTypes = false; 
```

# linux - CentOS mod_fastcgi

> ID：12005137
> 
> 赞同：4
> 
> 时间：2012-08-17T11:44:53.640
> 
> 标签：linux, centos, mod-fastcgi

我有安装了 CentOS 6.2 的服务器，带有来自 remi repos 的 nginx 和 php-fpm

httpd 也安装了，但是当我尝试安装 mod_fastcgi yum sais 时没有可用的 pachage

我怎样才能安装 mod_fastcgi ？？？谷歌搜索不同的网站说这个命令

```
yum install mod_fastcgi 
```

必须安装这个包。但是百胜说：

```
Loaded plugins: fastestmirror, priorities
Loading mirror speeds from cached hostfile
 * epel: mirror.cogentco.com
 * remi: remi-mirror.dedipower.com
196 packages excluded due to repository priority protections
Setting up Install Process
No package mod_fastcgi available.
Error: Nothing to do 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-28T15:25:31.350

似乎没有任何官方软件包`mod_fastcgi`。似乎 RedHat 更喜欢您使用`mod_fcgid`，但它缺少一个重要功能，即使用外部 FastCGI 服务器进程（不由 Apache 管理）的能力，例如 PHP-FPM。

从[http://www.garron.me/en/linux/apache-mpm-worker-php-fpm-mysql-centos.html](http://www.garron.me/en/linux/apache-mpm-worker-php-fpm-mysql-centos.html)，我发现您可以`mod_fastcgi`从 RPMForge/RepoForge 存储库下载非官方的 RPM：

```
sudo rpm --import http://dag.wieers.com/rpm/packages/RPM-GPG-KEY.dag.txt
sudo rpm -ivh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm
sudo yum install mod_fastcgi 
```

我对它们进行了轻微的测试，它们对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T00:30:02.513

您应该能够从源代码进行安装。尝试按照此处的说明进行操作： [http ://www.cyberciti.biz/tips/rhel-centos-fedora-apache2-fastcgi-php-configuration.html](http://www.cyberciti.biz/tips/rhel-centos-fedora-apache2-fastcgi-php-configuration.html)

我已经在 Centos 上成功使用了这些说明。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-19T21:18:34.080

`mod_fcgid`从 epel 存储库安装

```
# yum --enablerepo=epel info mod_fcgid
Available Packages
Name       : mod_fcgid
Arch       : x86_64
Version    : 2.2
Release    : 11.el5
Size       : 58 k
Repo       : epel
Summary    : Apache2 module for high-performance server-side scripting
URL        : http://fastcgi.coremail.cn/
License    : GPL+
Description: mod_fcgid is a binary-compatible alternative to the Apache module mod_fastcgi.
           : mod_fcgid has a new process management strategy, which concentrates on reducing
           : the number of fastcgi servers, and kicking out corrupt fastcgi servers as soon
           : as possible. 
```

# mysql - 为什么我的带有子查询和 JOIN 的 SELECT 这么慢？

> ID：12005139
> 
> 赞同：2
> 
> 时间：2012-08-17T11:44:54.133
> 
> 标签：mysql, performance, join, subquery, innodb

此查询需要 10 秒才能完成。但是当我手动执行子查询并将`t1.id`限制更改为该列表时，它会在 0.00 秒内完成。我该怎么做才能让 MySQL 更快地执行查询？

```
SELECT t1.col1, t2.col2, t3.col3
FROM t1, t2, t3
WHERE  t1.t2id = t2.id AND t1.t3id = t3.id
AND t1.id IN ( SELECT id FROM t4 WHERE blah = 123 ) 
```

另外，为什么会这样？我想 MySQL 在过滤 t1.id 之前以某种方式连接了所有三个表。

t1、t2 和 t3 分别包含 3000、15 和 80 行。子查询返回 2-10 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:53:07.723

尝试使用“INNER JOIN”而不是“IN”功能。这样您的 sql 指令将更具执行性。

```
SELECT t1.col1, t2.col2, t3.col3
FROM ((t1 INNER JOIN t2 ON t1.t2id = t2.id) INNER JOIN t3 ON t1.t3id = t3.id) INNER JOIN t4 ON t1.id = t4.id
WHERE t4.blah = 123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:52:54.510

重写不带子查询的查询：

```
SELECT t1.col1, t2.col2, t3.col3
FROM t1, t2, t3, (SELECT id FROM t4 WHERE blah = 123) AS t4
WHERE  t1.t2id = t2.id AND t1.t3id = t3.id
AND t1.id=t4.id 
```

确保您对子句中使用的字段有索引`WHERE`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:04:53.123

如果您运行`EXPLAIN`您的语句，您可能会看到 MySql 在磁盘上创建了一个临时表：如果内联选择（您的`IN`术语）中的数据足够大，通常会发生这种情况。

简而言之：

a) 用于`EXPLAIN`查看数据库中发生了什么（并查看此行为如何随着数据的增加而变化）

b）如果可以的话，避免内联子查询

c) 请记住，MySql 只有一个嵌套循环连接算法可供使用（其他数据库也使用哈希连接和合并连接算法）所以你可能会看到较小的数据集进行“较少”解析，但是当你达到了一个临界点。

# c++ - 大型嵌套向量的高效内存分配

> ID：12005142
> 
> 赞同：1
> 
> 时间：2012-08-17T11:44:56.953
> 
> 标签：c++, optimization, memory-management

我正在创建一个存储在嵌套向量中的巨大矩阵：

```
typedef vector<vector<pair<unsigned int, char>>> Matrix; 
```

外部向量最终将包含约 400.000 个向量，每个向量最多包含约 220 对（大多数包含较少）。这需要大约 1GB 的 RAM，并且是这样完成的：

```
Matrix matrix;
for (unsigned int i = 0; i < rows; i++) {
    vector<pair<unsigned int, char>> row;
    for (unsigned int j = 0; j < cols; j++) {
        // ...calculations...
        row.push_back( pair<unsigned int, char>(x, y) );
    }
    matrix.push_back(row);
} 
```

前 20% 的速度非常快，但外部向量增长得越大，整个过程的速度就越慢。我很确定可以进行一些优化，但我不是该领域的专家。有什么简单的技巧可以加快速度吗？或者我的尝试有什么重大错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T11:46:46.233

最好只使用单个一维向量并在某些函数/类中包装行、列索引。这样可以保证整个矩阵的内存是连续的。

而不是预先`push_back`分配整个矩阵：

```
std::vector<pair<unsigned int, char>> matrix(rows * cols); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:36:42.943

我将从明显的优化开始。如果您在开始填充值（或可用上限）之前知道行数，则只需事先保留空间。push_back 大量值时花费的最多时间是重新分配内存和复制已包含的值。

```
Matrix matrix(rows);
for(unsigned i = 0; i < rows; i++) {
    vector<pair<unsigned int, char>> row(cols);
    for(unsigned j; j < cols; j++) {
        row[j] = // value
    }
    matrix[i] = row;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T10:11:32.403

使用 VS 2010 编译器，以下结果效果最佳：

```
Matrix matrix;
matrix.reserve(rows);

vector<pair<unsigned int, char>> row;
row.reserve(cols);

for (unsigned int i = 0; i < rows; i++) {
    for (unsigned int j = 0; j < cols; j++) {
        // ...calculations...
        row.push_back( pair<unsigned int, char>(x, y) );
    }
    matrix.push_back(row);
    row.clear();
} 
```

与创建一个每次为“cols”条目分配内存的新向量相比，只创建一个用于构建所有行的向量消耗的内存要少得多。不太清楚为什么会这样。

但是，我接受 Andreas 的回答，因为这只是针对我的具体情况的解决方案，而他的回答提供了此类优化所需的一般信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T12:20:59.087

问题是当外部向量增长时会复制大量数据。考虑将您的 typedef 更改为

```
typedef vector< shared_ptr< vector<pair<unsigned int, char>> > > Matrix; 
```

并`matrix.reserve(rows)`在你开始用值填充它之前做。

# javascript - 做一些事情，当滚动 div

> ID：12005146
> 
> 赞同：-2
> 
> 时间：2012-08-17T11:45:19.923
> 
> 标签：javascript, jquery, scroll

在我的页面上，我将一个带有类容器的 div 附加到`#grid`（一个 div）。

现在我希望在滚动这个容器 div 时“做点什么”。

我试过这段代码，但没有用：

```
$('.container').scroll(function(){
  //do something
}); 
```

和

```
$('.container').live('scroll',function(){
  //do something
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:00:45.650

试试这个代码......

```
$('#grid div.container').unbind('scroll');
$('#grid div.container').bind('scroll', function(e) {
//Do something 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:52:19.507

[http://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

通常，您需要在窗口或某种`overflow:scroll`具有滚动条的 div/etc 上滚动（例如 iFrame）。似乎您正在将其随机应用于一类事物。尝试将其附加到窗口。

```
$(window).scroll(function () { 
    alert("we're scrolling");
}); 
```

[带有 div #id 的 jsFiddle 演示](http://jsfiddle.net/vuJq9/)

# c# - 将包含 DataBindings 的程序集混淆到内部类属性

> ID：12005151
> 
> 赞同：2
> 
> 时间：2012-08-17T11:45:50.067
> 
> 标签：c#, wpf, data-binding, internal, dotfuscator

我有一个带有 ViewModel 类作为 DataContext 的 UserControl：

XAML

```
<UserControl ... >    
    <TextBox Text="{Binding ViewModelProperty}"/>
</UserControl> 
```

代码隐藏：

```
namespace DotfuscatorTest.UserControl.View
{
   using ViewModel;
   public partial class UserControlView
   {
      public UserControlView()
      {
         InitializeComponent();
         DataContext = new UserControlViewModel();         
      }
   }
} 
```

视图模型类：

```
namespace DotfuscatorTest.UserControl.ViewModel
{
   internal class UserControlViewModel
   {
      private string viewModelProperty = "hello world";

      public string ViewModelProperty
      {
        get { return viewModelProperty; }
        set { viewModelProperty = value; }
      }
   }
} 
```

此示例运行良好（数据绑定工作正常）。但是现在，当我使用 Dotfuscator（版本 4.9.7750）混淆这个程序集时，绑定不起作用。如果我将 UserControlViewModel 类公开，则应用程序在混淆后也可以正常运行。

据我了解，Dotfuscator 在公开时不会更改属性的名称，但如果是私有类或内部类，则会更改它。

我现在的问题是，你如何处理这个问题。我认为在 DataBindings 中使用具有属性的内部类很常见，不是吗？或者有没有办法配置Dotfuscator？

提前致谢， rhe1980

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:59:45.847

默认情况下，Dotfuscator 执行属性名称混淆（重命名），这会破坏 XAML 绑定。它将尝试通过重命名 XAML 中的绑定目标来纠正此问题，但并不总是成功，就像在这种情况下一样。在不更改代码的情况下更正此问题的最简单方法是在 Dotfuscator 中添加重命名排除项。您应该能够查看“重命名”选项卡并从重命名中排除有问题的 ViewModel。

# javascript - 用于在 Firefox 中删除空格但在 IE 和 chrome 中无法正常工作的 javascript 代码

> ID：12005152
> 
> 赞同：0
> 
> 时间：2012-08-17T11:45:50.430
> 
> 标签：javascript, internet-explorer, firefox

我编写了一个简单的 javascript 代码来从文本框中删除空格。这在 Firefox 中运行良好。它甚至可以在 IE 和 Chrome 中运行，但是有一个小问题。如果我尝试使用键盘上的左箭头键将光标移动到文本框的左侧，则在文本框中给出值后，它只会从右侧穿过第一个字符然后停止。这是我的代码：

```
<script>
function fixme(element)
{
    if(element.value != '')
    {
        var val = element.value;
        var pattern = new RegExp('[ ]+', 'g');
        val = val.replace(pattern, '');
        element.value = val;
    }
}
</script>

<input type="text" onkeydown="fixme(this)" onblur="fixme(this)"/> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:56:34.203

```
function fixme(element) {
    if(element.value != '') {
        var val = element.value;
        val = val.replace(/\s/g, '');
        if (val != element.value) element.value = val;
    }
}

<input type="text" onkeyup="fixme(this)" onblur="fixme(this)" /> 
```

修改了您的函数以仅在固定值与输入的值不同时更改文本输入的 value 属性，试一试。

[**小提琴**](http://jsfiddle.net/ult_combo/SPgMG/)

但是，如果您的用户不应该在文本输入中键入空格，您可以简单地阻止他们这样做：

```
function nospace(e) {
    e = e || window.event;
    return e.keyCode !== 32;
}

<input type="text" onkeydown="return nospace(event)" onkeyup="fixme(this)" onblur="fixme(this)" /> 
```

保留您以前的功能，以防用户将文本粘贴/拖动到文本输入。

[**小提琴**](http://jsfiddle.net/ult_combo/SPgMG/1/)

# java - Java正则表达式捕获方括号中包含管道字符的文本

> ID：12005155
> 
> 赞同：-1
> 
> 时间：2012-08-17T11:45:59.507
> 
> 标签：java, regex

我想在方括号中获取包含管道字符的文本。

例如来自：

```
"ERROR|appLogger|[File|name|upload<failed on server:5645>]Execution Failed[check server address][com.package.file.upload]" 
```

我想提取：

```
"File|name|upload<failed on server:5645>" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:53:13.790

**编辑：**小修正以捕捉类似的东西`[|]`。

试试这个：

```
\[(([^\]]*\|[^\]]*))\] 
```

[在这里](http://regexr.com?31s77)查看它的实际应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:50:16.853

这是正则表达式

```
(?<=\[).*?\|.*?\|.*?(?=\]) 
```

# html - 我正在使用砖石，它没有给容器提供适当的高度，这就是为什么里面的瓷砖放错了

> ID：12005156
> 
> 赞同：4
> 
> 时间：2012-08-17T11:46:01.350
> 
> 标签：html, css, jquery-masonry

我正在使用 masonry 来显示内容，masonry.desandro.com，问题是它没有为容器提供适当的高度，好像你知道，masonry 动态地为容器提供高度和内部项目的边距样式，但它不能作为它应该。这是砌体js。

```
$(function(){
      $('#ItemContainer').masonry({
        // options
        itemSelector : '.item'
      });
    }); 
```

这是我的 html 骨架

```
<html><body>
<div id="content">
  <ul id="ItemContainer">
    <li class="item">here li content with block style</li>
    ....more li's
  </ul>
</div>
</body></html> 
```

但是当我为每个 li 设置高度时，它工作正常，但是其中的图像可以有任何高度，所以我必须保持它的高度为自动。第二行项目在第一个的前一半重叠，第三个在第二个，依此类推......每次它给 ItemContainer 提供 426px 的高度。

在这里我上传了我的代码... www.testingmycode.comuv.com/rough2.html ...请结帐。它显示不需要的行为，按重新加载，瓷砖排列就像 MS windows 中的纸牌游戏一样，当你调整窗口大小时，它们排列正确......按浏览器的重新加载按钮 2-3 次，调整窗口大小以查看它们. 请结帐。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T00:10:17.877

我看不到您的代码，但您必须使用该`imagesLoaded()`方法。

```
var $container = $('#container');
$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector : '.item',
    columnWidth : 240
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:50:16.420

我认为这是清除 div 的问题..

将此代码放在代码中的某些位置并检查..

```
<div style="clear:both"></div> 
```

如果您在某处使用了 float，通常会发生这种情况，并且一旦您放置它就会正常工作

# javascript - Backbone.js 比较器功能无法正常工作

> ID：12005162
> 
> 赞同：1
> 
> 时间：2012-08-17T11:46:30.103
> 
> 标签：javascript, backbone.js

我在 oder 中使用以下代码来确保将模型添加到基于它们的`created_at`unix 时间的集合中。较新的项目应该在较旧的项目之前。

```
comparator: function(a, b) {
    var time_a = a.get('created_at_time');
    var time_b = b.get('created_at_time');

    if(time_a < time_b) return -1;
    else if(time_a > time_b) return 1;
    else return 0; // time_a === time_b
} 
```

由于某些原因，无论如何都会以错误的顺序退回物品。关于解决方案的任何想法？我正在使用 Backbone.js。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:58:12.877

来自[Backbone.Collection.comparator() 文档](http://backbonejs.org/#Collection-comparator)

> 比较器函数可以定义为 sortBy（传递一个接受单个参数的函数）或排序（传递一个需要两个参数的比较器函数）。

*如果您选择sortBy*解决方案，我认为您的情况会更好：

```
comparator: function( model ) {
  return model.get('created_at_time');
} 
```

如果您想要*相反*的顺序，只需使用数字版本乘以`-1`.

### 更新

无论如何，您的代码工作正常，请检查[工作 jsFiddel](http://jsfiddle.net/fguillen/QEqzy/)，所以问题可能出在其他地方。

# android - Android autoLink="phone" 以编程方式？

> ID：12005164
> 
> 赞同：0
> 
> 时间：2012-08-17T11:46:36.420
> 
> 标签：android, android-intent

我需要具有与 xml autoLink="phone" 中相同的按钮功能。

目前我可以在按下按钮时拨打电话，但我无法打开拨号器的电话号码。

所以我不希望按钮立即调用。我希望用户在拨号器上有号码，并且能够在拨号前修改号码。

如何使用 Java 制作这种功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:52:45.623

喔好吧。

我需要更改`ACTION_CALL`为`ACTION_DIAL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:01:44.503

```
 <TextView
        android:id="@+id/tvphoneValue"
        android:layout_width="112dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:autoLink="phone"
        android:maxEms="15"
        android:text="number you want to call" /> 
```

# android - Android - 签名的应用程序强制关闭，但未签名的 .apk 没有

> ID：12005167
> 
> 赞同：1
> 
> 时间：2012-08-17T11:46:44.680
> 
> 标签：android, package

我正在导出我签名的应用程序，它会强制关闭。但通常同一应用程序的未签名版本可以正常工作。我该如何解决这个问题？

有什么建议么？

这是我的应用程序日志

```
08-17 14:58:00.000: V/AlarmManager(132): --- from triggerAlarmsLocked operation: 

com.acer.android.widget.digitalclock
08-17 14:58:00.000: I/AlarmManager(132): ----Alarm type: 1Second:1345215600.0
08-17 14:58:00.000: I/AlarmManager(132): Alarm type : 1, from setRepeating operation : android
08-17 14:58:00.000: I/AlarmManager(132): ----Alarm type: 1Second:1345215540.0
08-17 14:58:00.170: V/AlarmManager(132): --- from triggerAlarmsLocked operation: com.google.android.gsf
08-17 14:58:00.170: I/AlarmManager(132): ----Alarm type: 0Second:1345216639.530000000
08-17 14:58:01.040: D/Finsky(643): [1] 5.onFinished: Installation state replication succeeded.
08-17 14:58:02.700: D/AndroidRuntime(6545): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
08-17 14:58:02.700: D/AndroidRuntime(6545): CheckJNI is OFF
08-17 14:58:02.810: D/AndroidRuntime(6545): Calling main entry com.android.commands.pm.Pm
08-17 14:58:02.810: D/AndroidRuntime(6545): Shutting down VM
08-17 14:58:02.810: I/AndroidRuntime(6545): NOTE: attach of thread 'Binder Thread #3' failed
08-17 14:58:02.820: D/dalvikvm(6545): GC_CONCURRENT freed 99K, 87% free 337K/2560K, paused 0ms+0ms
08-17 14:58:02.820: D/dalvikvm(6545): Debugger has detached; object registry had 1 entries
08-17 14:58:04.000: D/AndroidRuntime(6556): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
08-17 14:58:04.000: D/AndroidRuntime(6556): CheckJNI is OFF
08-17 14:58:04.130: D/AndroidRuntime(6556): Calling main entry com.android.commands.pm.Pm
08-17 14:58:04.170: D/dalvikvm(819): GC_EXPLICIT freed 76K, 11% free 6338K/7047K, paused 2ms+2ms
08-17 14:58:04.170: W/ActivityManager(132): No content provider found for: 
08-17 14:58:04.190: D/PackageParser(132): Scanning package: /data/app/vmdl1300267645.tmp
08-17 14:58:04.190: W/ActivityManager(132): No content provider found for: 
08-17 14:58:04.440: D/dalvikvm(132): GC_CONCURRENT freed 1889K, 38% free 17760K/28359K, paused 2ms+6ms
08-17 14:58:04.450: D/PackageManager(132): Scanning package air.com.cepall.bilgiyarismasi
08-17 14:58:04.450: I/PackageManager(132): Unpacking native libraries for /data/app/air.com.cepall.bilgiyarismasi-1.apk
08-17 14:58:04.590: D/dalvikvm(6565): DexOpt: load 10ms, verify+opt 87ms
08-17 14:58:04.640: D/PackageManager(132):   Activities: air.com.cepall.bilgiyarismasi.BilgiYarismasiActivity air.com.cepall.bilgiyarismasi.SoruGonderSayfasi air.com.cepall.bilgiyarismasi.KategoriSayfasi air.com.cepall.bilgiyarismasi.YarismaSayfasi air.com.cepall.bilgiyarismasi.OyunBittiSayfasi air.com.cepall.bilgiyarismasi.AyarlarSayfasi air.com.cepall.bilgiyarismasi.SkorGonderSayfasi air.com.cepall.bilgiyarismasi.SkorGonderildiSayfasi air.com.cepall.bilgiyarismasi.OdulluYarismaSayfasi air.com.cepall.bilgiyarismasi.FacebookLib
08-17 14:58:04.640: I/ActivityManager(132): Force stopping package air.com.cepall.bilgiyarismasi uid=10077
08-17 14:58:04.740: D/PackageManager(132): New package installed in /data/app/air.com.cepall.bilgiyarismasi-1.apk
08-17 14:58:04.920: D/PackageManager(132): generateServicesMap(android.accounts.AccountAuthenticator): 4 services unchanged
08-17 14:58:04.940: I/Launcher(216): setLoadOnResume
08-17 14:58:04.950: D/GTalkService(257): [GTalkService.1] handlePackageInstalled: re-initialize providers
08-17 14:58:04.950: D/GTalkService(257): [RawStanzaProvidersMgr] ##### searchProvidersFromIntent
08-17 14:58:04.970: I/AlarmManager(132): Alarm type : 0, from setRepeating operation : com.android.vending
08-17 14:58:04.970: D/PackageManager(132): generateServicesMap(android.content.SyncAdapter): 13 services unchanged
08-17 14:58:04.970: I/AlarmManager(132): ----Alarm type: 0Second:1345215499.982000000
08-17 14:58:04.980: I/AccountTypeManager(280): Loaded meta-data for 3 account types, 2 accounts in 5ms
08-17 14:58:05.020: D/dalvikvm(280): GC_CONCURRENT freed 380K, 9% free 6831K/7495K, paused 37ms+13ms
08-17 14:58:05.190: D/dalvikvm(132): GC_EXPLICIT freed 1148K, 38% free 17834K/28359K, paused 5ms+13ms
08-17 14:58:05.190: D/AndroidRuntime(6556): Shutting down VM
08-17 14:58:05.200: D/dalvikvm(6556): GC_CONCURRENT freed 100K, 87% free 341K/2560K, paused 1ms+1ms
08-17 14:58:05.200: D/jdwp(6556): Got wake-up signal, bailing out of select
08-17 14:58:05.200: D/dalvikvm(6556): Debugger has detached; object registry had 1 entries
08-17 14:58:05.210: I/AndroidRuntime(6556): NOTE: attach of thread 'Binder Thread #3' failed
08-17 14:58:05.300: D/BatteryService(132): level:12 scale:100 status:3 health:2 present:true voltage: 3675 temperature: 309 technology: Li-ion AC powered:false USB powered:false icon:17302707 invalid charger:0
08-17 14:58:05.360: D/dalvikvm(216): GC_CONCURRENT freed 2654K, 45% free 13381K/24007K, paused 2ms+5ms
08-17 14:58:05.370: D/AndroidRuntime(6571): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
08-17 14:58:05.370: D/AndroidRuntime(6571): CheckJNI is OFF
08-17 14:58:05.510: D/AndroidRuntime(6571): Calling main entry com.android.commands.am.Am
08-17 14:58:05.510: I/ActivityManager(132): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=air.com.cepall.bilgiyarismasi/.BilgiYarismasiActivity } from pid 6571
08-17 14:58:05.530: D/AndroidRuntime(6571): Shutting down VM
08-17 14:58:05.530: I/AndroidRuntime(6571): NOTE: attach of thread 'Binder Thread #3' failed
08-17 14:58:05.540: D/dalvikvm(216): GC_CONCURRENT freed 1927K, 44% free 13500K/24007K, paused 2ms+10ms
08-17 14:58:05.540: D/dalvikvm(6571): GC_CONCURRENT freed 102K, 86% free 368K/2560K, paused 1ms+1ms
08-17 14:58:05.540: D/jdwp(6571): Got wake-up signal, bailing out of select
08-17 14:58:05.540: D/dalvikvm(6571): Debugger has detached; object registry had 1 entries
08-17 14:58:05.550: I/ActivityManager(132): Start proc air.com.cepall.bilgiyarismasi for activity air.com.cepall.bilgiyarismasi/.BilgiYarismasiActivity: pid=6580 uid=10077 gids={3003}
08-17 14:58:05.620: D/TabletStatusBar(186): lights on
08-17 14:58:05.680: D/dalvikvm(6580): GC_FOR_ALLOC freed 40K, 5% free 6360K/6659K, paused 31ms
08-17 14:58:05.690: I/dalvikvm-heap(6580): Grow heap (frag case) to 7.775MB for 1536016-byte allocation
08-17 14:58:05.770: D/dalvikvm(6580): GC_CONCURRENT freed 0K, 5% free 7860K/8199K, paused 2ms+3ms
08-17 14:58:05.830: D/dalvikvm(216): GC_CONCURRENT freed 1730K, 43% free 13778K/24007K, paused 2ms+9ms
08-17 14:58:05.870: D/dalvikvm(6580): GC_FOR_ALLOC freed 27K, 3% free 8004K/8199K, paused 33ms
08-17 14:58:05.940: D/dalvikvm(6580): GC_CONCURRENT freed 43K, 3% free 8528K/8711K, paused 3ms+5ms
08-17 14:58:05.990: I/ActivityManager(132): Starting: Intent { cmp=air.com.cepall.bilgiyarismasi/.AyarlarSayfasi (has extras) } from pid 6580
08-17 14:58:06.040: D/HAL(6580): [HAL] hw_get_module:share library path:/system/lib/hw/gralloc.tegra.so
08-17 14:58:06.360: I/ActivityManager(132): Displayed air.com.cepall.bilgiyarismasi/.AyarlarSayfasi: +317ms (total +817ms)
08-17 14:58:06.360: D/TabletStatusBar(186): lights on
08-17 14:58:06.380: I/ActivityManager(132): No longer want com.metago.astro (pid 6019): hidden #16
08-17 14:58:08.250: D/dalvikvm(6580): GC_CONCURRENT freed 236K, 5% free 8952K/9351K, paused 2ms+2ms
08-17 14:58:12.220: D/dalvikvm(829): GC_EXPLICIT freed 79K, 6% free 7199K/7623K, paused 4ms+2ms
08-17 14:58:12.530: D/TabletStatusBar(186): lights on
08-17 14:58:12.540: W/InputManagerService(132): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@41ccb688 (uid=1000 pid=6176)
08-17 14:58:12.740: D/dalvikvm(205): GC_FOR_ALLOC freed 2497K, 30% free 7589K/10695K, paused 29ms
08-17 14:58:12.740: I/dalvikvm-heap(205): Grow heap (frag case) to 9.271MB for 1848336-byte allocation
08-17 14:58:12.780: D/dalvikvm(205): GC_CONCURRENT freed 0K, 13% free 9394K/10695K, paused 3ms+2ms
08-17 14:58:17.820: D/dalvikvm(879): GC_EXPLICIT freed 33K, 6% free 6506K/6919K, paused 14ms+2ms
08-17 14:58:19.970: V/AlarmManager(132): --- from triggerAlarmsLocked operation: com.google.android.gsf
08-17 14:58:19.970: I/AlarmManager(132): ----Alarm type: 0Second:1345216639.530000000
08-17 14:58:20.130: D/Finsky(643): [1] 5.onFinished: Installation state replication succeeded. 
```

# c++ - QMainWindow centralWidget 边框

> ID：12005174
> 
> 赞同：2
> 
> 时间：2012-08-17T11:46:57.923
> 
> 标签：c++, windows, qt, qt4

我有一个 QMainWindow，其中心小部件已设置为查看黑色场景的 QGraphicsView（用于测试目的）。请注意，在下面的代码中，我使用了从 QGraphicsView 派生的类，称为 CQtGlView，它仅重新实现了 resizeEvent 函数。

不管我是不是直接加视图，

```
CQtMainWindow::CQtMainWindow() {
  m_glView = new CQtGlView();
  setCentralWidget(m_glView);
} 
```

或将其粘贴在虚拟小部件中边距为 0 的布局中，

```
CQtMainWindow::CQtMainWindow() {
  m_glView = new CQtGlView();

  QWidget* dummy = new QWidget();
  QHBoxLayout* l = new QHBoxLayout();
  l->setContentsMargins(0,0,0,0);
  l->addWidget(m_glView);
  dummy->setLayout(l);

  setCentralWidget(dummy);
} 
```

我在小部件周围出现了不需要的灰色边框。

下面的屏幕截图说明了这个问题，在我的场景和 Windows 航空边框之间可见。

![centralWidget 周围的边框](../Images/afee2c3e159f2025e2a474f6d5e20ce6.png)

如果我的应用程序不允许切换到全屏，这将不是问题。一旦屏幕的其余部分为黑色，边框非常明显。

该区域可能代表中央小部件外部的 DockWidgetAreas。

除了不使用 QMainWindow 之外，我还能做些什么来解决这个问题？（由于我使用了菜单栏、工具栏和状态栏，所以不受欢迎。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:05:02.187

事实证明，QGraphicsView 派生自 QFrame，我认为它只是一个 QWidget。

这个问题的解决方法是调用[setFrameStyle](http://doc.qt.nokia.com/4.7-snapshot/qframe.html#setFrameStyle) (QFrame::NoFrame); 在我的 QGraphicsView 子类的构造函数中。或者如果它不是子类，

`m_glView->setFrameStyle(QFrame::NoFrame);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:05:58.480

您是否在 QGraphicsView 上尝试过 setFrameShape(QFrame::NoFrame) ？

# windows-phone-7 - 非线性导航服务

> ID：12005176
> 
> 赞同：0
> 
> 时间：2012-08-17T11:47:04.830
> 
> 标签：windows-phone-7, navigation, app-hub

我正在创建一个具有开始按钮的应用程序，该按钮可让您从应用程序中的任何位置进入开始页面。

但是，当我只是导航到起始页时，返回导航堆栈会受到伤害。

寻找解决方案我找到了 NonLinearNavigationService。问题是下载链接是针对应用程序中心的，它（现在，因为我们有新的更好的应用程序中心）将我重定向到主页，而无处可去。我也未能使用内置搜索引擎在应用程序中心找到它。

有谁知道我可以从哪里得到它？

或者也许是导航循环的另一种解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:04:05.573

如果导航的唯一非线性部分是主页按钮，则可以在循环中使用[NavigationService.RemoveBackEntry()](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.removebackentry%28v=vs.92%29.aspx)直到它引发`InvalidOperationException`主页按钮事件。当`InvalidOperationException`引发 BackStack 时，BackStack 为空，并且下一次单击后退按钮退出应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:54:09.550

通常不建议在 WP7 中使用线性导航，因为硬件后退按钮和手机其余部分的 UX，因此您可能应该构建您的应用程序以避免这种情况。但是它应该通过认证过程。

这是另一个类似的问题[In-App Home Button to Navigate to MainPage allowed?](https://stackoverflow.com/questions/6361490/wp7-in-app-home-button-to-navigate-to-mainpage-allowed) 和一篇关于循环导航的文章，其中提到了您正在谈论的 NonLinearNavigationService [http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-应用程序.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-applications.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:13:47.320

如果您使用 RemoveBackEntry()，条目会以编程方式从后台堆栈中清除，因此您不必处理实际浏览页面以将其弹出堆栈的副作用。

非线性导航服务有效地完成了您所尝试的工作。它调用 GoBack() 来遍历堆栈。它为防止闪烁所做的额外工作是使根框架透明。看到这个问题：

[按下后退按钮时跳过一页，WP7](https://stackoverflow.com/questions/7109805/skip-a-page-when-the-back-button-is-pressed-wp7)

我不想将您的问题称为重复问题，因为我认为在 Mango 出现之前，这可能是需要使用的解决方案。现在 RemoveBackEntry() 已添加到 NavigationService，我认为使用它可能是更好的方法。

# visual-studio-2010 - 如果 XP SP3 丢失，安装程序中的消息

> ID：12005178
> 
> 赞同：2
> 
> 时间：2012-08-17T11:47:17.600
> 
> 标签：visual-studio-2010, setup-project

我在 VS2012 中有一个用于 C#/WPF 应用程序的工作设置项目，包括 .NET Framework 4.0 的设置（如果缺少）。在 Windows XP 机器上，如果未安装 SP3，我发现此设置会失败。

我知道它失败了，因为缺少 SP3，但我不喜欢的是设置只是说“失败”。所以我想要一个解决方案，告诉用户需要 SP3。

这是我的问题：

1.  是否可以在我的设置中设置类似目标要求的内容，以便设置会告诉用户需要 SP3？
2.  或者，如果 1\. 不可行，我可以在我的设置中还包括 XP SP3 吗？（注意，安装程序也应该适用于 Vista 和 Win7）？
3.  或者您知道使用 VS2010 安装项目的另一个解决方案吗？

我似乎无法在我的 VS2010 安装项目中设置所需的 Windows 操作系统。

# entity-framework - 具有相同键的两个实体与自跟踪实体的 EF 4.0 错误

> ID：12005186
> 
> 赞同：0
> 
> 时间：2012-08-17T11:47:52.023
> 
> 标签：entity-framework, self-tracking-entities

我有两张表，我在其中保存了人与人之间的关系。我想要层次结构，所以我的两个表是：

```
Persons
-----------
IDPerson
Name

PersonRelation
-----------------
IDPersonRelation
IDPerson
IDRootPerson
IDParentPerson
Left
Right
Deep 
```

IDPerson 是一个自动数字，而 IDRelation 是其他自动数字。

然后，在 SQL Server 中，我创建了 3 个关系：

1) PersonRelation.IDPerson = Persons.IDPerson 2) PersonRelation.IDPersonRoot = Persons.IDPerson 3) PersonRelation.IDPersonParent = Persons.IDPerson

有了第一个关系，我想知道层次树的实际节点的人的信息（姓名，电话...）

对于第二个关系，我想要属于实际节点的那种树的根的信息。

有了三个房地产，我想要父母。

嗯，这就是要有一个想法，最重要的是我有两个表，三个关系，因为是问题的原因。层次结构是这样的。

好吧，现在使用 EF，我使用以下代码来查看这是否有效：

```
Persons person1 = new Persons();
person1.Name= "person01";

PersonRelation1 relation1 = new PersonRelations();
relation1.Left = 1;
relation.Right = 2;
relation.Deep = 0;
person1.PersonRelations.Add(relation1);

//I am using self tracking entities, so I apply changes
miContext.ApplyChanges<Persons>("Persons", person1);
miContext.SaveChanges(); 
```

这很好用，但是如果我尝试添加两个人及其关系，那么我在 saveChanges 中遇到问题，它说存在两个具有相同键的实体。代码如下：

```
Persons person1 = new Persons();
person1.Name= "person01";

PersonRelation1 relation1 = new PersonRelations();
relation1.Left = 1;
relation.Right = 2;
relation.Deep = 0;
person1.PersonRelations.Add(relation1);

Persons person2 = new Persons();
person2.Name= "person02";

PersonRelation2 relation2 = new PersonRelations();
relation2.Left = 1;
relation2.Right = 2;
relation2.Deep = 0;
person2.PersonRelations.Add(relation2);

//I am using self tracking entities, so I aply changes
miContext.ApplyChanges<Persons>("Persons", person1);
miContext.ApplyChanges<Persons>("Persons", person2);
miContext.SaveChanges(); 
```

为什么一个寄存器可以工作，而当我尝试添加两个或更多时我会遇到问题？因为我正在尝试两个添加两个不同的实体。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:50:10.823

好吧，问题是我需要将 PersonRelation 添加到 Person 实体的三个集合中，所以我需要执行以下操作：

```
Persons person1 = new Persons();
person1.Name= "person01";

PersonRelation1 relation1 = new PersonRelations();
relation1.Left = 1;
relation.Right = 2;
relation.Deep = 0;
person1.PersonRelations.Add(relation1);
person1.PersonRelations1.Add(relation1);
person1.PersonRelations2.Add(relation1);

Persons person2 = new Persons();
person2.Name= "person02";

PersonRelation2 relation2 = new PersonRelations();
relation2.Left = 1;
relation2.Right = 2;
relation2.Deep = 0;
person2.PersonRelations.Add(relation2);
person2.PersonRelations1.Add(relation2);
person2.PersonRelations2.Add(relation2);

miContext.ApplyChanges<Persons>("Persons", person1);
miContext.ApplyChanges<Persons>("Persons", person2);
miContext.SaveChanges(); 
```

我的意思是，Person 实体有 3 个集合，每个关系一个，需要将 PersonRelation 实体添加到这三个集合中。

谢谢。

# ios - ios 将 UIScrollView 滚动条颜色更改为不同颜色

> ID：12005187
> 
> 赞同：33
> 
> 时间：2012-08-17T11:47:56.607
> 
> 标签：ios, uiscrollview

我们如何将 UIScrollview 的滚动指示器的颜色更改为蓝色、绿色等？

我知道我们可以把它改成白色，黑色。但除了这些颜色。

非常感谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-17T11:56:33.283

不幸的是，你不能，当然你总是可以自己动手。这些是您的选择：

> **UIScrollViewIndicatorStyleDefault：**
> 
> 滚动指示器的默认样式，黑色带白色边框。这种风格适用于任何内容背景。
> 
> **UIScrollViewIndicatorStyleBlack：**
> 
> 一种黑色且小于默认样式的指示器样式。这种风格适合白色内容背景。
> 
> **UIScrollViewIndicatorStyleWhite：**
> 
> 指示器的样式是白色的并且比默认样式小。这种风格适合黑色内容背景。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-10-18T09:20:38.120

这是更安全的**Swift 3**方法：

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let verticalIndicator = scrollView.subviews.last as? UIImageView
    verticalIndicator?.backgroundColor = UIColor.green
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-02-25T11:45:31.623

> 两个 UIScrollView 指示器都是 UIScrollView 的子视图。因此，我们可以访问 UIScrollView 的子视图并更改子视图的属性。

**1 .添加 UIScrollViewDelegate**

```
@interface ViewController : UIViewController<UIScrollViewDelegate>
@end 
```

**2.在实现部分添加scrollViewDidScroll**

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView1
{
    //get refrence of vertical indicator
    UIImageView *verticalIndicator = ((UIImageView *)[scrollView.subviews objectAtIndex:(scrollView.subviews.count-1)]);
    //set color to vertical indicator
    [verticalIndicator setBackgroundColor:[UIColor redColor]];

    //get refrence of horizontal indicator
    UIImageView *horizontalIndicator = ((UIImageView *)[scrollView.subviews objectAtIndex:(scrollView.subviews.count-2)]);
    //set color to horizontal indicator
    [horizontalIndicator setBackgroundColor:[UIColor blueColor]];
} 
```

> 注意：- 因为每次滚动时这些指标都会更新（意味着重置为默认值）。所以，我们把这段代码放在 scrollViewDidScroll 委托方法中。

![在此处输入图像描述](../Images/83a9911677e07a032e506acf8ef149e5.png) **[GitHub 上提供的演示 - https://github.com/developerinsider/UIScrollViewIndicatorColor](https://github.com/developerinsider/UIScrollViewIndicatorColor)**

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-04-22T15:17:14.957

根据@Alex ( [https://stackoverflow.com/a/58415249/3876285](https://stackoverflow.com/a/58415249/3876285) ) 的回答，我发布了一些改进以更改滚动指示器的颜色。

```
extension UIScrollView {

    var scrollIndicators: (horizontal: UIView?, vertical: UIView?) {

        guard self.subviews.count >= 2 else {
            return (horizontal: nil, vertical: nil)
        }

        func viewCanBeScrollIndicator(view: UIView) -> Bool {
            let viewClassName = NSStringFromClass(type(of: view))
            if viewClassName == "_UIScrollViewScrollIndicator" || viewClassName == "UIImageView" {
                return true
            }
            return false
        }

        let horizontalScrollViewIndicatorPosition = self.subviews.count - 2
        let verticalScrollViewIndicatorPosition = self.subviews.count - 1

        var horizontalScrollIndicator: UIView?
        var verticalScrollIndicator: UIView?

        let viewForHorizontalScrollViewIndicator = self.subviews[horizontalScrollViewIndicatorPosition]
        if viewCanBeScrollIndicator(view: viewForHorizontalScrollViewIndicator) {
            horizontalScrollIndicator = viewForHorizontalScrollViewIndicator.subviews[0]
        }

        let viewForVerticalScrollViewIndicator = self.subviews[verticalScrollViewIndicatorPosition]
        if viewCanBeScrollIndicator(view: viewForVerticalScrollViewIndicator) {
            verticalScrollIndicator = viewForVerticalScrollViewIndicator.subviews[0]
        }
        return (horizontal: horizontalScrollIndicator, vertical: verticalScrollIndicator)
    }

} 
```

如果不添加`.subviews[0]`，您将获得更深的视图，并且当您尝试更改指示器的颜色时，会出现奇怪的白色效果。那是因为它前面还有另一个视图：

[![在此处输入图像描述](../Images/f34960b2073cff4d1fc3180b149ab7d2.png)](https://i.stack.imgur.com/CpNOt.png)

通过添加`.subviews[0]`到每个指标视图，一旦您尝试通过调用更改颜色：

```
override func scrollViewDidScroll(_ scrollView: UIScrollView) {
    DispatchQueue.main.async() {
        scrollView.scrollIndicators.vertical?.backgroundColor = UIColor.yourcolor
    }
} 
```

您将访问第一个视图并正确更改颜色：

[![在此处输入图像描述](../Images/6dbca2fbc770183b5b6c1b5b93dab067.png)](https://i.stack.imgur.com/3W6oQ.png)

感谢@Alex，他发布了一个很棒的解决方案

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-10-14T12:24:52.927

在**IOS 13**

试试这个

```
func scrollViewDidScroll(_ scrollView: UIScrollView){

        if #available(iOS 13, *) {
            (scrollView.subviews[(scrollView.subviews.count - 1)].subviews[0]).backgroundColor = UIColor.themeColor(1.0) //verticalIndicator
            (scrollView.subviews[(scrollView.subviews.count - 2)].subviews[0]).backgroundColor = UIColor.themeColor(1.0) //horizontalIndicator
        } else {
            if let verticalIndicator: UIImageView = (scrollView.subviews[(scrollView.subviews.count - 1)] as? UIImageView) {
                verticalIndicator.backgroundColor = UIColor.themeColor(1.0)
            }

            if let horizontalIndicator: UIImageView = (scrollView.subviews[(scrollView.subviews.count - 2)] as? UIImageView) {
                horizontalIndicator.backgroundColor = UIColor.themeColor(1.0)
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-08T10:37:03.133

**斯威夫特 2.0：**

添加 UIScrollView 委托。

```
func scrollViewDidScroll(scrollView: UIScrollView){
let verticalIndicator: UIImageView = (scrollView.subviews[(scrollView.subviews.count - 1)] as! UIImageView)
verticalIndicator.backgroundColor = UIColor.greenColor()

let horizontalIndicator: UIImageView = (scrollView.subviews[(scrollView.subviews.count - 2)] as! UIImageView)
horizontalIndicator.backgroundColor = UIColor.blueColor()
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-17T10:55:24.020

试试这个它肯定会帮助你

```
 for ( UIView *view in scrollBar.subviews ) {

       if (view.tag == 0 && [view isKindOfClass:UIImageView.class])
       {
        UIImageView *imageView      = (UIImageView *)view;
        imageView.backgroundColor   = [UIColor yellowColor];
       }
    } 
```

**解释**：UIScrollBar 是子视图的集合。这里滚动条指示器（垂直/水平）是子视图之一，它是一个 UIImageView。因此，如果我们为 UIImageView 设置自定义颜色，它会影响滚动条指示器。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-18T07:35:18.463

您可以更改指示器的图像，但您应该重复执行此操作

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
    self.chageScrollIndicator()
}

func chageScrollIndicator (){
    if let indicator = self.collection.subviews.last as? UIImageView {
        let edge = UIEdgeInsets(top: 1.25,
                                left: 0,
                                bottom: 1.25,
                                right: 0)
        indicator.image = UIImage(named: "ScrollIndicator")?.withRenderingMode(.alwaysTemplate).resizableImage(withCapInsets: edge)
        indicator.tintColor = UIConfiguration.textColor
    }
} 
```

您可以使用这 2 个图像作为模板： [![将此图像用于@2x](../Images/58ed8a9d97cfceab517f94c59550c567.png)](https://i.stack.imgur.com/tqCHU.png) [![将此图像用于@3x](../Images/e0a954592a5c6ec44171995c5d1ff930.png)](https://i.stack.imgur.com/tqCHU.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-16T14:03:35.100

在**IOS 13**

由于 iOS13 滚动指示器有类 _UIScrollViewScrollIndicator，而不是 UIImageView。

许多人使用的代码像

```
let verticalIndicator: UIImageView = (scrollView.subviews[(scrollView.subviews.count - 1)] as! UIImageView) 
```

这不是一个好主意，因为他们承诺最后一个子视图将是 UIImageView :)。现在不是，他们可能会崩溃。

您可以尝试以下代码来获取 scrollView 指标：

```
extension UIScrollView {

    var scrollIndicators: (horizontal: UIView?, vertical: UIView?) {

        guard self.subviews.count >= 2 else {
            return (horizontal: nil, vertical: nil)
        }

        func viewCanBeScrollIndicator(view: UIView) -> Bool {
            let viewClassName = NSStringFromClass(type(of: view))
            if viewClassName == "_UIScrollViewScrollIndicator" || viewClassName == "UIImageView" {
                return true
            }
            return false
        }

        let horizontalScrollViewIndicatorPosition = self.subviews.count - 2
        let verticalScrollViewIndicatorPosition = self.subviews.count - 1

        var horizontalScrollIndicator: UIView?
        var verticalScrollIndicator: UIView?

        let viewForHorizontalScrollViewIndicator = self.subviews[horizontalScrollViewIndicatorPosition]
        if viewCanBeScrollIndicator(view: viewForHorizontalScrollViewIndicator) {
            horizontalScrollIndicator = viewForHorizontalScrollViewIndicator
        }

        let viewForVerticalScrollViewIndicator = self.subviews[verticalScrollViewIndicatorPosition]
        if viewCanBeScrollIndicator(view: viewForVerticalScrollViewIndicator) {
            verticalScrollIndicator = viewForVerticalScrollViewIndicator
        }
        return (horizontal: horizontalScrollIndicator, vertical: verticalScrollIndicator)
    }

} 
```

如果您只需要一个（h 或 v 指示器） - 最好削减此功能并只保留您需要的一个（以提高性能）。

此外，最好在 DispatchQueue 中调用 update func，以保持滚动的平滑度。

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
   DispatchQueue.main.async {
       scrollView.updateCustomScrollIndicatorView()
   }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-09-02T10:48:22.013

**这是滚动条颜色的改变方式：**

```
 //scroll view  
    UIScrollView *scView = [[UIScrollView alloc] init];  
    scView.frame = self.view.bounds; //scroll view occupies full parent views  
    scView.contentSize = CGSizeMake(400, 800);  
    scView.backgroundColor = [UIColor lightGrayColor];  
    scView.indicatorStyle = UIScrollViewIndicatorStyleBlack;  
    scView.showsHorizontalScrollIndicator = NO;  
    scView.showsVerticalScrollIndicator = YES;  
    scView.scrollEnabled = YES;  
    [self.view addSubview: scView]; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-09T14:28:22.800

如果你也想添加图片，这里是 Swift 3 的代码

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let verticalIndicator = scrollView.subviews.last as? UIImageView
    verticalIndicator?.image = UIImage(named: "imageName")
} 
```

这也适用于 UITableView 和 UICollectionView。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-15T10:16:46.767

我最近遇到了同样的问题，所以我决定为它写一个类别。

[https://github.com/stefanceriu/UIScrollView-ScrollerAdditions](https://github.com/stefanceriu/UIScrollView-ScrollerAdditions)

```
[someScrollView setVerticalScrollerTintColor:someColor]; 
[someScrollView setHorizontalScrollerTintColor:someColor];` 
```

它将它与原始图像混合，因此只有颜色会改变。另一方面，也可以对其进行修改以提供自定义图像供滚动条使用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-17T01:46:48.037

不久前我写了一篇关于这个的文章。不幸的是，此条的颜色由预定义的图像定义，因此如果您要更改条的颜色，则需要进行一些额外的工作。看看下面的链接，你肯定会在这里找到答案，因为我试图解决同样的问题。

[http://leonov.co/2011/04/uiscrollviews-scrollbars-customization/](http://leonov.co/2011/04/uiscrollviews-scrollbars-customization/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-28T05:48:08.897

至于 iOS 13 的子视图发生了变化，所以添加了简单的 if，解决了这个问题。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 13.0) {
    UIView *verticalIndicator = [scrollView.subviews lastObject];
    verticalIndicator.backgroundColor = [UIColor redColor];
} else {
    UIImageView *verticalIndicator = [scrollView.subviews lastObject];
    verticalIndicator.backgroundColor = [UIColor redColor];
}
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-10-31T10:38:19.410

这是我在 Swift 4 中所做的，类似于以前的答案。在我的情况下，我将图像重新着色为不可见，设置正确的角半径并且只执行一次此过程。

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let color = UIColor.red
    guard
        let verticalIndicator = scrollView.subviews.last as? UIImageView,
        verticalIndicator.backgroundColor != color,
        verticalIndicator.image?.renderingMode != .alwaysTemplate
    else { return }
    verticalIndicator.layer.masksToBounds = true
    verticalIndicator.layer.cornerRadius = verticalIndicator.frame.width / 2
    verticalIndicator.backgroundColor = color
    verticalIndicator.image = verticalIndicator.image?.withRenderingMode(.alwaysTemplate)
    verticalIndicator.tintColor = .clear
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-10T06:10:41.420

请在 iOS 渲染器上使用以下代码

```
 private bool _layouted;
 public override void LayoutSubviews()
 {
       base.LayoutSubviews();
       if (!_layouted)
       {
            this.Layer.BorderColor = UIColor.Red.CGColor;
            var Verticalbar = (UIImageView)this.Subviews[this.Subviews.Length - 1];

            Verticalbar.BackgroundColor = Color.FromHex("#0099ff").ToUIColor();
            var Horizontlebar = (UIImageView)this.Subviews[this.Subviews.Length - 2];

            Horizontlebar.BackgroundColor = Color.FromHex("#0099ff").ToUIColor();
            _layouted = true;
       }
} 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2012-08-17T11:55:21.287

您可以使用自定义 UIScrollView 滚动条在滚动条中实现颜色。更多详情请看[这里](http://leonov.co/2011/04/uiscrollviews-scrollbars-customization/)

# drupal - 使用 Apache Shiro 在自定义 Java Web 应用程序与 Drupal 之间进行 SSO 集成

> ID：12005189
> 
> 赞同：0
> 
> 时间：2012-08-17T11:47:58.013
> 
> 标签：drupal, single-sign-on, shiro

我有一个使用 Java (Java EE)、spring 和 Hibernate 开发的 Web 应用程序。我们计划使用 Apache Shiro 进行角色和访问管理。我们的客户要求之一是使用一些 CMS 功能以及已选择 Drupal 的 Web 应用程序。由于所有用户都是在基于 Java 的 Web 应用程序中创建的，因此我们希望在 Java Web 应用程序和 Drupal 之间启用单点登录。

启用 SSO 后，Web 应用程序的用户应该能够访问在 Drupal 中创建的页面（静态内容、博客等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:08:25.213

您最好的选择可能是使用[CAS](http://www.jasig.org/cas/)来处理 Drupal 和 Shiro 的 SSO。Drupal 有一个[CAS 模块](http://drupal.org/project/cas/)，Shiro 也可以配置为一个[CAS 客户端](http://shiro.apache.org/cas.html)。您没有提供任何关于您的用户帐户的维护方式的详细信息，但理想情况下，此类数据将保存在诸如 OpenLDAP 或 Active Directory 之类的目录系统中。

# c# - 从c#中的最后一个对象开始循环

> ID：12005191
> 
> 赞同：1
> 
> 时间：2012-08-17T11:48:09.650
> 
> 标签：c#, asp.net, asp.net-mvc-3, foreach

如何从 c# 中的最后一个位置对象循环对象列表。在这里，我有 asp.net mvc 3 应用程序，如果目录不可用，我需要根据可用的类别创建目录以上传路径。但是类别对象列表的顺序相反，其中子类别位于第一位。我想在父类别中创建子类别的文件夹。所以我想以相反的顺序开始循环，或者是否有任何函数可以反转类别对象的列表。我有以下 foreach 循环：

```
 foreach (var item in parentcategory)
    {   
        categorypath += item.CategoryName + "/" ;
    } 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T11:49:29.820

最简单但不是最有效的解决方案是：

```
parentcategory.Reverse();
foreach (var item in parentcategory)
{   
    categorypath += item.CategoryName + "/" ;
} 
```

或者：

```
for (int i=parentcategory.Count-1; i>=0; i--)
{   
    var item = parentcategory[i];
    categorypath += item.CategoryName + "/" ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:01:09.067

您实际上不必反向循环。

```
foreach (var item in parentcategory)
{   
    categorypath = item.CategoryName + "/" + categorypath;
} 
```

效率不是很高，但它确实有效。

您也可以考虑使用 System.IO.Path。

```
var categorypath = Path.Combine(categories.Reverse().ToArray()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:01:29.950

除了附加到字符串之外，您还可以预先添加：

```
foreach (var item in parentcategory)
    {   
        categorypath = item.CategoryName + "/" + categorypath;
    } 
```

请注意，在目前提供的所有解决方案中，生成的字符串都有一个尾随“/”。

# android - 是否有任何适用于 android 的 Infragistics 工具？

> ID：12005192
> 
> 赞同：0
> 
> 时间：2012-08-17T11:48:11.527
> 
> 标签：android, charts, infragistics

是否有任何 Infragistics 工具可用于在 android 中创建图表？

或者

谁能告诉如何在android中创建图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:41:06.333

Infragistics 有一套名为 Iguana 的免费 Android 控件。其中有一个版本的数据图表。您可以在[http://www.infragistics.com/products/android/下载它](http://www.infragistics.com/products/android/)

# django - Django 管理界面多上传图像并将它们与相册相关联

> ID：12005195
> 
> 赞同：1
> 
> 时间：2012-08-17T11:48:14.173
> 
> 标签：django, django-forms, django-admin, django-templates

目前我正在尝试在我的管理界面中进行多重上传。我正在使用 Luril Garmash 在他的博客中提供的代码：http://garmoncheg.blogspot.de/2011/07/django-creating-multi-upload-form.html [他](http://garmoncheg.blogspot.de/2011/07/django-creating-multi-upload-form.html) 正在使用非常好的 jQuery 插件从多个上传文件Sebastian Tschan： [http](http://blueimp.github.com/jQuery-File-Upload/) ://blueimp.github.com/jQuery-File-Upload/ 我也是。

好的，这是我的结构：

模型.py：

```
class Photoalbum(models.Model):
    event = models.OneToOneField(Event, help_text="Liste der Events ohne Fotoalbum")
    date = models.DateField(auto_now=True)
    facebook = models.BooleanField()

class PhotoalbumImage(models.Model):
    album = models.ForeignKey(Photoalbum, related_name='images', null=True)
    filename = models.CharField(max_length=60, blank=True, null=True, editable=False)
    image = models.FileField(upload_to=storage, editable=False)
    key_data = models.CharField(max_length=90, unique=True, blank=True, null=True, editable=False)
    upload_date = models.DateTimeField(auto_now=True) 
```

我扩展了 Photoalbum 的 change_form.html 模板，以便在 Photoalbum 模型的添加/更改站点上显示 jQuery 多上传表单。

这是视图逻辑：

视图.py：

```
 def multiuploader(request):

    #getting file data for farther manipulations
    file = request.FILES[u'files[]']
    wrapped_file = UploadedFile(file)
    filename = wrapped_file.name
    file_size = wrapped_file.file.size
    log.info ('Got file: "%s"' % str(filename))

    #writing file manually into model
    #because we don't need form of any type.
    image = PhotoalbumImage()
    image.filename=str(filename)
    image.image=file
    image.key_data = image.key_generate
    image.save()
    log.info('File saving done')

    #getting thumbnail url using sorl-thumbnail
    im = get_thumbnail(image, "80x80", quality=50)
    thumb_url = im.url

    #settings imports
    try:
        file_delete_url = settings.MULTI_FILE_DELETE_URL+'/'
        file_url = settings.MULTI_IMAGE_URL+'/'+image.key_data+'/'
    except AttributeError:
        file_delete_url = 'multi_delete/'
        file_url = 'multi_image/'+image.key_data+'/'

    #generating json response array
    result = []
    result.append({"id":image.id,
                   "name":filename, 
                   "size":file_size, 
                   "url":file_url, 
                   "thumbnail_url":thumb_url,
                   "delete_url":file_delete_url+str(image.pk)+'/', 
                   "delete_type":"POST",})
    response_data = json.dumps(result)

    #checking for json data type
    #big thanks to Guy Shapiro
    if "application/json" in request.META['HTTP_ACCEPT_ENCODING']:
        mimetype = 'application/json'
    else:
        mimetype = 'text/plain'
    return HttpResponse(response_data, mimetype=mimetype)
else: #GET
    return HttpResponse('Only POST accepted') 
```

插件上传的每个文件都会调用此方法。注意：文件上传通过单击“开始上传”将文件与相册分开保存到文件系统和数据库。

注意：我的相册添加/更改模板在顶部显示我的相册图像的多重上传器，带有“添加文件”和“开始上传”，在底部显示相册的表单字段，底部带有标准 django 管理保存按钮。抱歉，我无法提供图片，因为在我现在所在的地方，我的连接非常非常慢（太慢了）。

这就是我的问题开始的重点：文件已保存，但相册没有。我需要一种保存方法将相册的正确主键作为外键保存到每个保存的文件中。我的第一个想法是处理会话的这个问题，将所有保存的文件 ID 保存到一个列表中，并在相册的 post_save 信号中，获取这些 ID 并将正确的相册 ID 保存到这些文件中。但我认为不应访问模型中的会话。我的第二个想法是创建一个临时模型，例如 UploadedPhotos，我在其中存储所有文件 ID，并在相册的 post_save 信号上获取这些 ID。

这只是感觉不对。我认为满足我需求的最安全方法是在创建相册后上传文件（在相册模型中单击保存后）。然后相册的主键将存在，我可以将其保存到每个文件中。但我没有任何想法让这个工作。

非常感谢您提前提供的帮助。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:35:32.390

好的，我通过在相册模型中使用上传和保存的照片 ID 填充隐藏的表单字段来满足我的要求。该字段是一个字符字段，我将所有 id 放入其中并用“//”分隔它们并在相册的 post_save 信号上对其进行解析。

# django - Django South 向后迁移模型文件

> ID：12005200
> 
> 赞同：1
> 
> 时间：2012-08-17T11:48:29.337
> 
> 标签：django, django-south

我正在使用 South 进行迁移。我似乎无法确定 South 是否也可以用来修改模型本身。返回到以前的模型状态后，我是否要手动更改代码？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:42:08.990

South 不会修改您的`models.py`. 它只会改变数据库。它通常与版本控制软件（例如 git）结合使用，可以让您恢复您`models.py`的匹配南方迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:46:08.587

> 我要手动更改代码吗？

是的。南修改模型代码对我来说似乎不是一个好主意。只有您知道由于您的迁移，确切的代码在哪里发生了变化。

对我来说，我执行了几次向后迁移，并且在大多数情况下不希望模型更改为之前的状态。

# cucumber - 运行测试 Cucumber/Watir 时出现超时错误

> ID：12005208
> 
> 赞同：8
> 
> 时间：2012-08-17T11:49:06.370
> 
> 标签：cucumber, watir-webdriver

我希望有人可以帮助我解决我在运行黄瓜测试时遇到的问题。

我收到以下错误：

```
 Timeout::Error (Timeout::Error)
      C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill'
      C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
      C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
      C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1293:in `request'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'
      C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1284:in `request'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in `response_for'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:242:in `getScreenshot'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:34:in `screenshot_as'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `block in save_screenshot'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `open'
      C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `save_screenshot' 
```

有谁知道是什么原因造成的？

此错误在我的测试套件执行期间随机发生。在套件中，我将有大约 150 个场景，我已经看到这个错误发生在不同的阶段。例如，可能发生在场景 50 或场景 100。我通过来自 Jenkins 的 rake 文件或通过 cmd 窗口运行我的测试，但如果我使用任何一种方法都会发生错误。

我们这里的测试站点可能有点不稳定，而且这里可能会出现奇怪的超时，这可能是意料之中的。但是，一旦此错误开始发生，该错误发生的测试之后的所有其他测试都将出现相同的问题。我的场景都不是相互依赖的。每个场景通常都从一个步骤开始`I go to the homepage`——在我的`.rb`文件中的这一步中，我已经`@browser.cookies.clear`包含了，因此前一个场景中应该没有剩余的数据。

有没有其他人遇到过这种情况，如果有，您采取了哪些步骤对其进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:46:47.267

我最近有同样的问题。由于我看不到您的代码，我不确定到底发生了什么，但使用某种类型的救援应该可以。我的问题是使用无头浏览器并抢救......

```
 begin
    browser = Watir::Browser.start site
  rescue Timeout::Error
    puts "Timeout Rescue"
  retry 
```

让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T15:41:19.283

这是一个重复的问题

[javascript 表单上的超时仅在 Jenkins 上运行 Cucumber](https://stackoverflow.com/questions/12952132/timeout-on-javascript-form-only-running-cucumber-on-jenkins)

其他问题的答案是解决问题。

# powershell - 如何使用 Powershell 命令将一堆外部工具添加到 Visual Studio IDE 中？

> ID：12005212
> 
> 赞同：1
> 
> 时间：2012-08-17T11:49:23.090
> 
> 标签：powershell, visual-studio-extensions

我可以通过使用 Visual Studio IDE 中提供的外部工具手动添加第三方工具。但我的要求是，需要通过执行 powershell 脚本来添加更多工具。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:05:59.920

是的，您可以使用[StudioShell](http://studioshell.codeplex.com/)来处理 Visual Studio 的 DTE 对象。有关一些示例，请参见[此处](http://studioshell.codeplex.com/wikipage?title=Examples&referringTitle=Documentation)和[此处](http://basbossink.github.com/2011-12-19/ps4.netdevs-5-extending-vs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-13T18:10:01.163

[您也可以使用导出的 xml 文件来执行此操作，或者只是在您的 powershell 脚本中创建，就像在此处](https://stackoverflow.com/questions/21340057/powershell-script-to-auto-add-visual-studio-external-tools-menu-options)所做的那样

它的基本要点：

```
param($installPath, $toolsPath, $package, $project)

# Determine fully qualified path to a temp file
$fileName = [System.IO.Path]::GetTempPath() + [System.Guid]::NewGuid().ToString() + ".vssettings"; 

# Create User Settings file:
'<UserSettings>
    <ApplicationIdentity version="9.0"/>
    <ToolsOptions/>
    <Category name="Environment_Group" RegisteredName="Environment_Group">
        <Category name="Environment_ExternalTools" Category="{E8FAE9E8-FBA2-4474-B134-AB0FFCFB291D}" Package="{DA9FB551-C724-11d0-AE1F-00A0C90FFFC3}" RegisteredName="Environment_ExternalTools" PackageName="Visual Studio Environment Package">
            <PropertyValue name="Launch Powershell.Command">powershell.exe</PropertyValue>
            <PropertyValue name="Launch Powershell.Arguments">"&amp; ''$(ProjectDir)\Myscript.ps1''"</PropertyValue>
            <PropertyValue name="Launch Powershell.InitialDirectory">"$(ProjectDir)"</PropertyValue>
            <PropertyValue name="Launch Powershell.SourceKeyName"/>
            <PropertyValue name="Launch Powershell.UseOutputWindow">true</PropertyValue>
            <PropertyValue name="Launch Powershell.PromptForArguments">false</PropertyValue>
            <PropertyValue name="Launch Powershell.CloseOnExit">true</PropertyValue>
            <PropertyValue name="Launch Powershell.IsGUIapp">false</PropertyValue>
            <PropertyValue name="Launch Powershell.SaveAllDocs">true</PropertyValue>
            <PropertyValue name="Launch Powershell.UseTaskList">false</PropertyValue>
            <PropertyValue name="Launch Powershell.Unicode">false</PropertyValue>
            <PropertyValue name="Launch Powershell.Package">{00000000-0000-0000-0000-000000000000}</PropertyValue>
            <PropertyValue name="Launch Powershell.NameID">0</PropertyValue>
            <PropertyValue name="ToolNames">Launch Powershell</PropertyValue>
        </Category>
    </Category>
</UserSettings>' >> $fileName

# Perform the import of the custom tool
$project.DTE.ExecuteCommand("Tools.ImportandExportSettings", "/import:""$fileName""");

"--Remove file"
Remove-Item -path $fileName 
```

**注意：**为了使用 Visual Studio DTE，您需要使用第三方扩展，例如 PSCX（PowerShell 社区扩展）

# javascript - 将 Facebook 相册嵌入网站

> ID：12005215
> 
> 赞同：0
> 
> 时间：2012-08-17T11:49:56.903
> 
> 标签：javascript, jquery, html, facebook-graph-api

我已经使用图形 api 来获取相册，我将所有相册都放到了我的网站中，但是当我刷新页面时相册的位置会发生变化。为什么会发生？

我在这里附上我的脚本。

```
<script>
$(document).ready(function() {
  var albumIdsUrl = "https://graph.facebook.com/<myname>/albums?callback=?";

  $.getJSON(albumIdsUrl, function(data) {
       var len = data.data.length;
       for(var i=0;i<len;i++){
            var aid = data.data[i].id;
            getAlbumCoverPhoto(data.data[i].cover_photo, data.data[i].id, data.data[i].name, data.data[i].count);
       }
    }); 

});

function getAlbumCoverPhoto(coverPhoto, albumId, albumName, count) {
        var coverPhotoUrl = "https://graph.facebook.com/" + coverPhoto + "?callback=?";
            $.getJSON(coverPhotoUrl, function(coverPhotoData) {
                if(typeof(coverPhotoData.picture)!="undefined"){
                        htmlData = '<li><figure><a class="imageLink" href="fb_album_photos.html?id='+ albumId + '"><img src="' + coverPhotoData.picture + '" /></a></figure><figcaption>'+albumName+'</br>'+count+' Photos</figcaption></li>';
                        $('#FBalbum').append(htmlData);
                }
            });             
    }  
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:48:32.903

返回的数据并不总是以相同的顺序排列，因此如果您想要一致的结果，则需要对其进行排序。

这似乎运作良好（但可以稍微清理一下）：

```
 $.getJSON(albumIdsUrl, function(data) {
   var len = data.data.length;
   data.data.sort(function(a, b)
    {
        if (a.id == b.id) return 0;
        if (a.id < b.id)
            return -1;
        else
            return 1;
    });
   for(var i=0;i<len;i++){
        var aid = data.data[i].id;
        getAlbumCoverPhoto(data.data[i].cover_photo, data.data[i].id, data.data[i].name, data.data[i].count);
   }
}); 
```

# captcha - PHP 4.3.X 的验证码脚本

> ID：12005220
> 
> 赞同：0
> 
> 时间：2012-08-17T11:50:35.200
> 
> 标签：captcha, recaptcha, php4

我安装了 php 4 并且我正在使用 recaptcha 作为验证码，但它对用户不太友好，所以我正在寻找任何用户友好、易于实现且**必须与 php 4.3.x 兼容的验证码脚本。**

或者有什么方法可以**自定义recaptcha**，使其变得**用户友好**并且不像现在那么复杂。并且**字符长度应为 3 或 4 max**。我搜索了很多验证码，它们符合我的要求，但与 php4 不兼容。

# vb.net - 使用 timer.tick 时简单的计时器/警报滞后

> ID：12005222
> 
> 赞同：0
> 
> 时间：2012-08-17T11:50:45.867
> 
> 标签：vb.net, timer

我为自己制作了一个简单的计时器/闹钟桌面应用程序，但它并不能很好地工作。

我使用 timer.tick 从 System.Now 检查当前时间，并每秒与硬编码时间进行比较。这适用于 1 个闹钟时间，但对于多个闹钟，执行多个比较时时钟开始滞后。

是否有制作计时器/闹钟的标准方法？

我认为拥有 timer.tick 比让无限循环执行比较更好（我可能完全错了），你会怎么做？

谢谢。

# java - 如何在我的 Java Web 应用程序中使用 Alfresco Sharepoint 协议

> ID：12005225
> 
> 赞同：1
> 
> 时间：2012-08-17T11:50:57.620
> 
> 标签：java, sharepoint, web-applications, alfresco

我有一个现有的 Java Web 应用程序，其中包含 Microsoft Office 格式的文档和电子表格文件。
我想提供类似 Sharepoint 的在线编辑功能，以允许用户在 Word 和 Excel 中编辑文件并将它们保存到服务器。

我尝试[使用](https://stackoverflow.com/questions/7160494/how-to-use-alfresco-edit-online-functionality-from-spring-mvc-application)从 Alfresco 生成的编辑链接，但它仅适用于 IE。
那么我必须使用一些跨浏览器库来支持 ActiveXObject 吗？
或者有什么简单的方法可以将来自 Alfresco 的文档编辑链接嵌入到我的 Web 应用程序中？

为了让协议可以访问文档：
我是否必须使用 Alfresco 服务来上传我的文档？
或者我可以将 Alfresco 服务器或 Alfresco 的 VTI Jetty 服务器嵌入到我的应用程序中以提供我的文档吗？

* * *

**编辑**

所以没有任何跨浏览器的 ActiveX
看了 Alfresco 的[action.js](http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/slingshot/source/web/components/documentlibrary/actions.js)后，发现有一个叫 Sharepoint 插件的东西。
我现在生成编辑链接没有问题

* * *

**编辑 2**

Microsoft Office 可与普通 WebDAV 服务器正常工作，因此无需在我的 Web 应用程序中嵌入 Alfresco

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:46:27.633

浏览器中应该不需要任何特殊代码。正如 Gagravarr 所说，当客户端上安装了 Office 时，链接应该可以正常工作。

尽管可以这样做，但您很可能不想在您的应用程序中嵌入一个 Alfresco 存储库（有或没有 Jetty）并使用其 CMIS 和/或 RESTful HTTP 接口来处理内容。嵌入存储库意味着引入各种依赖项。我在你的场景中看不到任何推理。

# android - Android逻辑问题

> ID：12005227
> 
> 赞同：0
> 
> 时间：2012-08-17T11:51:11.690
> 
> 标签：android, null, logic

我目前正在学习 Android 并编写一个应用程序来帮助我完成工作。我使用这个优秀的网站已经有一段时间了，总的来说，经过大量的研究，它帮助我理解了大多数概念。

我想我会问我的第一个问题，因为我确信它会有一个简单的答案 - 以下语句中的逻辑没有按预期工作：

```
protected void onListItemClick(ListView l, View v, final int pos, final long id){

    Cursor cursor = (Cursor) rmDbHelper.fetchInspection(id);
    String inspectionRef = cursor.getString(cursor.getColumnIndex(
            RMDbAdapter.INSPECTION_REF));
    String companyName = cursor.getString(cursor.getColumnIndex(
            RMDbAdapter.INSPECTION_COMPANY));

    if (inspectionRef == null && companyName == null){
        inspectionDialogueText = "(Inspection Reference unknown, Company Name unknown)";    
    }
    else if (inspectionRef != null && companyName == null) {
        inspectionDialogueText = "(" + inspectionRef + ", Company Name unknown)";
        }
    else if (inspectionRef == null && companyName != null) {
        inspectionDialogueText = "(Inspection Reference unknown, " + companyName + ")";
    }
    else {
        inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")";
    } 
```

我不确定我是否应该在 if 语句中使用 null 或 "" 但无论哪种方式它都不起作用，因为它只打印inspectionRef 和 companyName 而不管它们是否包含任何内容..

对不起，如果我只是一个笨蛋！

非常感谢，

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:30:38.303

Android 有一个很好的[实用方法](http://developer.android.com/reference/android/text/TextUtils.html)来检查空 ( `""`) 和`null` `Strings`

```
TextUtils.isEmpty(str) 
```

它只是`(str == null || str.length() == 0)`但它为您节省了一些代码。

如果要过滤掉仅包含空格 ( `" "`) 的字符串，可以添加`trim()`

```
if (str == null || str.trim().length() == 0) { /* it's empty! */ } 
```

如果您使用的是 Java 1.6 `str.length() == 0`，则可以替换为`str.isEmpty()`

例如，您的代码可以替换为

```
if (TextUtils.isEmpty(inspectionRef)){
    inspectionRef = "Inspection Reference unknown";
}
if (TextUtils.isEmpty(companyName)){
    companyName = "Company Name unknown";
}
// here both strings have either a real value or the "does not exist"-text
String inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")"; 
```

* * *

如果你在你的代码中使用那段逻辑，你可以把它放在一些实用方法中

```
/** returns maybeEmpty if not empty, fallback otherwise */
private static String notEmpty(String maybeEmpty, String fallback) {
    return TextUtils.isEmpty(maybeEmpty) ? fallback : maybeEmpty;
} 
```

并像使用它一样

```
String inspectionRef = notEmpty(cursor.getString(cursor.getColumnIndex(
        RMDbAdapter.INSPECTION_REF)), "Inspection Reference unknown");
String companyName = notEmpty(cursor.getString(cursor.getColumnIndex(
        RMDbAdapter.INSPECTION_COMPANY)), "Company Name unknown");

inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")"; 
```

# c# - 使用 Silverlight MediaElement 播放播放列表 (.pls)

> ID：12005228
> 
> 赞同：0
> 
> 时间：2012-08-17T11:51:15.640
> 
> 标签：c#, silverlight, mediaelement

我开始学习一些 Silverlight 编程来为 Windows 8 编写一些东西，还没有用它或音频做很多事情，但我正在尝试使用`MediaElement`.

我试过了：

```
OutputMedia.Source=new Uri("http://provisioning.streamtheworld.com/pls/KISWFM.pls",UriKind.Absolute);
OutputMedia.Play(); 
```

但我没有听到任何播放，所以我不得不假设它不起作用:)

任何人都可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T20:23:52.470

试试[https://shoutcastmss.codeplex.com/](https://shoutcastmss.codeplex.com/)

> Shoutcast MediaStreamSource 是 Silverlight 的 Shoutcast 协议的 MediaStreamSource 实现。此 MediaStreamSource 允许 Silverlight 4+ OOB 和 Windows Phone 7 应用程序使用 MediaElement 使用 Shoutcast 流。
> 
> 目前，Windows Phone 支持 Mp3 和 AAC+ Shoutcast 流。但是，Desktop Silverlight 仅支持 Mp3。
> 
> M3u 和 PLS 播放列表支持也有限（即有些未经测试）。
> 
> 请使用以下内容报告播放 Shoutcast 流的任何问题： * 问题流的 URI * 问题描述 * 从 Shoutcast MediaStreamSource 返回（或不返回！）的错误

# c# - 在 C# 中插入 XML 节点并获取 NullReferenceException

> ID：12005231
> 
> 赞同：0
> 
> 时间：2012-08-17T11:51:29.937
> 
> 标签：c#, xml, nullreferenceexception

感谢您抽出宝贵的时间来帮助我！

我目前有两个问题，我认为一个导致另一个。基本上我试图在现有的 XML 文件中插入一个额外的节点，然后用来自 dataGridView 的数据填充它。这是我要更改的 XML，我需要添加“语言”标签：

```
<stentry>
  <index>28</index>
  <sid>PARAM_TITLE1</sid>
  <val>
    <en>Param 1</en>
    <es>parÃ¡metro 1</es>
    ***<Language>String<language>***
  </val>
  <params>
    <fontref>187</fontref>
    <numref>0</numref>
    <clip>FALSE</clip>
    <include>FALSE</include>
    <protected>FALSE</protected>
    <cwidth>-1</cwidth>
    <dwidth>0</dwidth>
  </params>
</stentry> 
```

但是我也面临标签在其他地方使用的问题：

```
<module>
  ..
  <color>
    <name>DIALOG</name>
    <val>ffd4dbee</val>
   <id>41a</id>
  </color>
  <color>
    <name>WIDGET_FILL</name>
    <val>ffc0c0c0</val>
    <id>41c</id>
 </color>
 ..
</module> 
```

目前我正在使用这种方法插入数据：

```
int n = 0;

XmlNodeList nodeList = xDoc.GetElementsByTagName("val");
foreach (XmlNode node in nodeList)
{
    if (node.OuterXml.Contains("val"))
    {
        XmlElement newElement = xDoc.CreateElement(tag);
        **string data = dataGridView1.Rows[n].Cells[3].Value.ToString();**
        XmlText txtVal = xDoc.CreateTextNode(data);
        XmlNode parent1 = node.ParentNode;
        parent1.AppendChild(newElement);
        parent1.LastChild.AppendChild(txtVal);
        n++;
    }
} 
```

问题是目前我在突出显示的行上得到一个 NullReferenceException 。我相信这是因为在需要的位置之前将数据放入了不正确的标签中。因此，当它尝试将数据放在需要的地方时，该值为空。但是我不是100％的，所以我来寻求帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:55:30.083

如果您突出显示的行抛出 a`NullReferenceException`则不是您的 XML 有问题，而是您访问`dataGridView1`. 在该行上放置一个断点，当你点击它时，检查链下的属性以查看它的`null`位置。这应该可以帮助您了解确切的问题出在哪里。当断点位于该行时，您可以通过依次将鼠标悬停在每个属性上来执行此操作。

# java - 数据库不适用于 2.2，适用于 2.3 及更高版本

> ID：12005235
> 
> 赞同：0
> 
> 时间：2012-08-17T11:51:45.327
> 
> 标签：java, android

我的应用程序在 2.3 和更高版本上运行良好的 bt 在 2.0 或 2.2 上它会给出错误，如“android sqlite 返回错误代码 1 没有这样的表”请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:54:07.867

请从该 android 2.2 版本的设备或模拟器上卸载以前的应用程序，然后再次检查。我认为您更新了数据库，因此会出现此问题。

# mysql - 框架在生产数据库表中没有看到新列？

> ID：12005245
> 
> 赞同：0
> 
> 时间：2012-08-17T11:52:14.517
> 
> 标签：mysql, cakephp-2.1

我用 CakePHP 创建了一个网站，负责展示我的简历。我想添加一个新功能，如果我仍然在某家公司工作，它应该显示文本：“直到现在”，如果不应该显示正确的日期。问题是，当我向名为的数据库添加新列**`isActive`**并将值**1**设置为其中一个条目（其他条目具有值**0**）时，页面显示所有条目的值 0 。此问题发生在生产服务器上。在我的开发服务器上一切正常。

看法：

```
 <?php 
          if ($experience['Experience']['isActive'] == 0  ) {
            echo $this->Time->format('Y.m', $experience['Experience']['dateEnd']);
            /*tmp*/ echo $experience['Experience']['isActive'];
          } else if($experience['Experience']['isActive'] == 1){
            echo 'until now';
          }  
        ?> 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:57:59.383

CakePHP 缓存表结构。删除缓存，世界上一切都会好起来的。

> 如果在调试级别为 0 时更改数据库模式，这些模型缓存将不会被刷新；如果在进行数据库更改后出现错误或意外行为，可能的解决方法是：

```
rm -f app/tmp/cache/models/* 
```

[正如这里](http://blog.mediarain.com/2009/09/the-dark-side-of-cakephp%E2%80%99s-automagic/)所讨论的。

# c# - 在 type="file" html 元素上设置要上传的文件

> ID：12005249
> 
> 赞同：-1
> 
> 时间：2012-08-17T11:52:32.813
> 
> 标签：c#, html, vb.net, upload, input-type-file

我已经研究了几天了，但在可能的方法上没有取得任何进展。

以编程方式，我已经能够调用“选择要上传的文件”对话框，但是每当它输入文件和路径并尝试提交它时，它都不会接受输入值。

```
WebBrowser.Document.GetElementById("field-file").InvokeMember("click") 
```

允许 .click() 方法触发。

每当我提交它时，它都会给我一个必须填写该字段的错误。在提交之前我需要调用另一个事件吗？

据我了解，出于安全原因，此输入类型的值属性被禁用 - 但肯定只是寻找解决方法的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:02:34.000

正如您所说的“出于安全原因”。因此，不应该有解决方法。否则，这将是一个安全漏洞，这[不是故意](https://developer.mozilla.org/en-US/docs/HTML/Element/Input#File_inputs)的，而且肯定会被修复。

另一方面，W3C 定义[如下](http://www.w3.org/TR/html401/interact/forms.html#h-17.4.1)：

> 用户代理可以使用 value 属性的值作为初始文件名。

但我不知道任何当前支持此功能的浏览器。

# iphone - NSURLConnection 间歇性故障 iPhone 设备在 LAN 上

> ID：12005252
> 
> 赞同：0
> 
> 时间：2012-08-17T11:52:41.693
> 
> 标签：iphone, ios

我正在使用 NSURLConnection 与 LAN 上的 Web 服务进行通信。使用 Xcode Simulator 时，一切都按预期工作。但是，当使用 iPhone 时，连接大多会超时（但并非总是如此）。

iPhone通过wifi连接到局域网。我可以使用 Safari 持续浏览 Web 服务器（托管 Web 服务）。

但是，该应用程序大多失败。它在`didFailWithError`报告“请求超时”的函数中返回。

该应用程序将间歇性地成功（行为完全符合预期）。我看不出成功或失败的模式。它可能会失败几次，然后成功然后再次失败（无需重新启动应用程序）。我估计有 90% 以上的失败率。

Web 服务*始终*接收请求并*始终*响应。似乎故障发生在设备未接收或处理响应的情况下。

我看不到我的网络有明显问题。当然没有IP地址冲突。

我对应用程序、Apple、Xcode 和 iPhone 完全陌生。所以这对你来说可能是非常明显的事情。有什么想法可以解决这个问题吗？

我目前用于开发的环境如下：

*   Mac OS X (10.7.4)
*   Xcode 4（针对 4.3）
*   iPhone 3GS (5.1.1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:53:05.047

显然我不能给你绝对的答案，但希望能帮助你找出问题所在。

首先，您需要审查您的网络服务。将 JPEG 图像放在公共 Dropbox 文件夹中。现在尝试使用您的代码下载该图像并使用 Safari 查看它。如果 Safari 可以工作，但您的代码不能，那么您知道您的代码是问题所在。

如果两者都失败，那么手机可能有一个坏的收发器，或者你的 WIFI 网络可能是不稳定的。将手机带到某个公共 WIFI 位置并重新进行测试。如果两者在第二个网络上仍然失败，则手机可能有缺陷。

如果在所有情况下 Safari 都可以工作，但您的代码不能，那么请尽可能多地发布您的代码。另外，如果使用异步接口，你会被重定向吗？要求提供证件？等等。我倾向于添加每个 NSURLConnection 委托方法并至少添加一个日志，以便您知道发生了什么 - 即记录所有响应。您还可以从响应中获取 html 返回码：

```
assert([response isKindOfClass:[NSHTTPURLResponse class]]);
NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response; 
htmlStatus = [httpResponse statusCode];
if(htmlStatus != 200) NSLog(@"Server Response code %i", htmlStatus); 
```

# java - Java：打印调用到控制台的每个方法？

> ID：12005253
> 
> 赞同：4
> 
> 时间：2012-08-17T11:52:42.637
> 
> 标签：java, debugging

我需要了解一个相当大的 Java 项目。我用 eclipse 浏览它并使用调用层次结构和所有，但这并没有让我完全了解项目运行时发生的事情（它是一个 web 服务）。

是否有可能将带有参数的每个方法调用打印到控制台？基本上是一些东西

```
System.out.println("methodName, params: " + param1.toString()); 
```

在我的每一种方法中。例如，某种提供这种框架的框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:55:47.353

您应该尝试使用[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)(AOP)。

这是一个或多或少做你想要的例子：[How to use AOP with AspectJ for logging?](https://stackoverflow.com/questions/8839077/how-to-use-aop-with-aspectj-for-logging)

# arrays - 使用向量索引多维 Fortran 数组

> ID：12005254
> 
> 赞同：11
> 
> 时间：2012-08-17T11:52:42.707
> 
> 标签：arrays, fortran

在现代 Fortran 中是否可以使用向量来索引多维数组？也就是说，给定，说，

```
integer, dimension(3) :: index = [4,6,9]
double precision, dimension(10,10,10) :: data 
```

`data(4,6,9)`有没有比写作更好（更通用）的访问方式`data(index(1), index(2), index(3))`？不必对`data`数组的等级进行硬编码会很好。

（天真地我想写`data(index)`，但当然这实际上意味着不同的东西 - 子集“收集” - 要求`data`本身是一个排名第一的数组。）

[对于它的价值，这与JavaScript 中的索引数组的多维索引](https://stackoverflow.com/questions/11019269/multidimensional-index-by-array-of-indices-in-javascript)本质上是相同的问题，但在 Fortran 中。不幸的是，那里的聪明答案不适用于预定义的数组等级。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T15:24:19.973

不。我能想到的所有解决方法都是可怕的黑客，你最好编写一个函数来接受`data`和`index`作为参数并吐出你想要的元素。

但是，您可能能够使用现代 Fortran 的数组等级重新映射功能来做完全相反的事情，这可能会满足您对数组等级进行快速和松散操作的愿望。

鉴于声明

```
double precision, dimension(1000), target :: data 
```

你可以定义一个 rank-3 指针

```
double precision, pointer :: index_3d(:,:,:) 
```

然后像这样设置：

```
index_3d(1:10,1:10,1:10) => data 
```

嘿 presto，您现在可以同时使用 rank-3 和 rank-1 索引`data`，这与您想要做的很接近。我还没有在愤怒中使用它，但是一些简单的测试并没有发现任何严重的问题。

# symfony - 使用自定义命令运行 symfony 操作

> ID：12005255
> 
> 赞同：0
> 
> 时间：2012-08-17T11:52:44.767
> 
> 标签：symfony, console, command, action, bundle

我创建了一个自定义命令：

```
class CrawlCommand extends ContainerAwareCommand{

    protected function configure(){
        $this->setName('crawler:crawl')
             ->setDescription('Command for crawling content');    
    }

    protected function execute(InputInterface $input, OutputInterface $output){
        $msg = 'hello';
        $output->writeln($msg);
    }
} 
```

请告诉我，如何在执行功能中执行操作？行动呼吁`CrawlerBundle:Index:index`。没有服务，只需像浏览器一样运行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:54:27.083

如果您想直接从命令调用操作 - 这意味着它有问题。在控制器中，您应该尽可能少地实现逻辑，您应该创建服务并将逻辑放在那里。

有几个原因，例如。这样单元测试就更容易了，你的代码也更清晰易读。此外，在您的 CrawlCommand 案例中使用服务非常简单。

# exception - 尝试通过插件注册加载插件时出错。工具

> ID：12005257
> 
> 赞同：1
> 
> 时间：2012-08-17T11:52:47.290
> 
> 标签：exception, dynamics-crm, dynamics-crm-2011

到目前为止的步骤：

*   从 MS 下载的注册工具
*   建成
*   部署到 CRM 应用服务器（Win2k8 机器）
*   使用部署管理员帐户加载并登录
*   添加新程序集
*   浏览插件库
*   按打开
*   错误！

    未处理的异常：System.IO.FileLoadException：无法加载文件或程序集“file:///C:\crmtools\PluginRegTool\PluginRegTool_1708_New_From_SDK\PluginRegistration.exe”或其依赖项之一。不支持操作。（来自 HRESULT 的异常：0x80131515）

内部异常说：

```
System.NotSupportedException: An attempt was made to load an assembly from a network location which would have caused the assembly to be sandboxed in previous versions of the .NET Framework. 
This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous. 
If this load is not intended to sandbox the assembly, please enable the loadFromRemoteSources switch. See http://go.microsoft.com/fwlink/?LinkId=155569 for more information. 
```

我正在加载的插件库与 PluginRegTool（我之前所说的 CRM 应用服务器）位于同一个盒子上。regtool 位于 c:\ 驱动器上的文件夹下，插件库位于 \\server\bin\assembly 下

用这个把我的头发拉出来，以前一定做过100次！

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:11:57.310

排序它

*   右键插件注册工具exe文件
*   点击属性
*   文件已被“阻止”-右键单击并按“取消阻止”

瞧！

一位压力较小的 CRM 开发人员！

希望这对其他人有帮助。

编辑：值得一提的是，这又发生了，这次是实际的插件库。似乎是从其他机器传输文件导致了这个问题。如果有人对原因有更详细的解释，我很想获得有关此的更多信息。

# iphone - removeFromSuperview 不起作用

> ID：12005261
> 
> 赞同：12
> 
> 时间：2012-08-17T11:52:56.887
> 
> 标签：iphone, objective-c, xcode, uiview

我需要能够从视图中删除一个按钮并添加一个不同的按钮。我的代码如下所示：

```
-(void)UpdatePromoBanner:(NSString*)value{
    [button setTitle:@"newer text" forState:UIControlStateNormal];
    for (UIView *subView in emptyViewController.view.subviews)
    {
        if(subView.tag == 99) {
            //--remove button and add an updated one
            NSLog(@"Remove button?");
            [subView removeFromSuperview];
            //[subView.superview addSubview:button];
        }
    }
    NSLog(@"event called");

}

-(void)AddPromoBannerToBottom:(UIView*)view {

    button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self 
               action:@selector(aMethod:)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:lblForBannerButton forState:UIControlStateNormal];
    button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
    button.tag = 99;

    [view addSubview:button];
} 
```

emptyViewController 只是一个普通的空视图控制器。我在中间添加一个按钮。我点击了检查标签的 NSLog ok，但视图没有被删除。我应该提到我正在使用每 5 秒触发一次 updatepromobanner 的线程。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-17T11:58:02.250

奥斯卡是对的。您必须更新主线程上的界面。想我会添加一些代码来帮助。

代替：

```
[subView removeFromSuperview]; 
```

和：

```
[subView performSelectorOnMainThread:@selector(removeFromSuperview) withObject:nil waitUntilDone:NO]; 
```

而且我认为你应该很好地去而不改变任何其他东西。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-17T11:54:40.283

您无法使用辅助线程更新 UI，每当您的线程进行 UI 更新时，您必须调用主线程。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-07T07:59:25.037

```
dispatch_async(dispatch_get_main_queue(), ^{
         [subView removeFromSuperview];
}); 
```

记住在主线程中更新 UI :)

# silverlight - 在 Windows Phone 7 中创建可选择和可删除项目列表的最佳方法

> ID：12005264
> 
> 赞同：1
> 
> 时间：2012-08-17T11:53:11.907
> 
> 标签：silverlight, windows-phone-7, xaml

我想解决一个看似简单的任务。我想创建一个文本条目列表，其中每个条目都是可选的（并导致导航到另一个页面），并且当用户将手指放在一个项目上时，我想要一个带有单个选项的上下文菜单来删除该项目。这是 WP 应用程序中非常常见的模式。例如，浏览器使用收藏夹执行此操作。

现在我在项目模板中有一个带有文本块的列表框，我在 SelectionChanged 事件中开始导航：

```
<ListBox Name="lbSnippets" SelectionChanged="lbSnippets_SelectionChanged">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}"></TextBlock>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ListBox> 
```

我可以想出几种方法来解决保持问题，但没有一种方法适合我。例如，我可以处理 TextBlock 上的 Hold 事件，但随后我将不得不挖掘与此 TextBlock 相关的项目。有些东西告诉我应该有更好的方法来做到这一点，因为它很常见。解决此任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:46:50.653

[WP7](http://silverlight.codeplex.com/releases/view/75888)的Silverlight 工具包包括一个`ContextMenu`控件。

您可以通过 nuget 安装工具包：`PM> Install-Package SilverlightToolkitWP`

然后，您将 ContextMenus 添加到基本上任何控件：

```
<DataTemplate>
    <TextBlock Text="{Binding}">
        <toolkit:ContextMenuService.ContextMenu>
            <toolkit:ContextMenu>
                <toolkit:MenuItem Header="Delete" 
                                  Command="{Binding YourDeleteCommand}"/>
            </toolkit:ContextMenu>
        </toolkit:ContextMenuService.ContextMenu>
    </TextBlock>
</DataTemplate> 
```

`toolkit`xml命名空间在哪里：

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

您可以从本文开始了解 ContextMenu 控件：

[深入了解 WP7 ContextMenu | 第 1 部分：关键概念和 API](http://windowsphonegeek.com/articles/WP7-ContextMenu-in-depth--Part1-key-concepts-and-API)

# c# - 无法使用 LINQ 找到元数据文件“.dll”

> ID：12005267
> 
> 赞同：0
> 
> 时间：2012-08-17T11:53:14.180
> 
> 标签：c#, asp.net, visual-studio-2010, linq, web-applications

我有这种方法，首先，它从数据库（连接表）中获取所有数据，然后使用搜索属性和搜索关键字过滤结果，如下所示。在我使用 LINQ 添加 switch ... case 之前，一切都很好，我收到错误“找不到元数据 .dll”。显然，错误来自它，但我不知道错误是什么，我对 LINQ 很陌生。

```
public IPagedList<dynamic> Execute(int pageIndex, int pageSize, string searchProperty, string searchKeyword)
{
     IQueryable<dynamic> dokumente;
     dokumente = session.Query<Dokument>().Select(dokument =>  
                 new {Beschreibung = dokument.Beschreibung,                            
                      Link =  dokument.Link,
                      Dokumenttyp = dokument.Dokumenttyp.Bezeichnung,                            
                     }).ToList().AsQueryable();

     if (!string.IsNullOrEmpty(searchProperty))
     {
         switch (searchProperty)
         {
             case "Beschreibung":
                 dokumente = dokumente.Where(x => x.Beschreibung == searchKeyword);
                 break;
             case "Link":
                 dokumente = dokumente.Where(x => x.Link == searchKeyword);
                 break;
             case "Dokumenttyp":
                 dokumente = dokumente.Where(x => x.Dokumenttyp == searchKeyword);
                 break;                
         }
     }          
     return new PagedList<dynamic>(dokumente, pageIndex, pageSize);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:05:23.377

这不是您的代码中的错误，它与您的打包和配置有关。尝试重新启动 Visual Studio，或者如果所有其他方法都失败，请重新组合您的解决方案。

另请参阅：[在 Visual Studio 中找不到元数据文件“...\Release\project.dll”](https://stackoverflow.com/questions/898559/metadata-file-release-project-dll-could-not-be-found-in-visual-studio)

# jquery - jQuery IE9 使用 ajax 重新填充选择选项

> ID：12005268
> 
> 赞同：0
> 
> 时间：2012-08-17T11:53:17.930
> 
> 标签：jquery, internet-explorer-9

以下代码在非 IE 浏览器中完美运行。 **请注意，前三个选项是通过 jQuery 添加的。**

```
<select id="mySelect" name="mySelect">
  <option value="1">MyVal1</option>
  <option value="2">MyVal2</option>
  <option value="3">MyVal3</option>
</select> 
```

我清除了选项，以便添加新选项：

```
// my new values has the proper values of [{"Id": 4, "Text" : "MyVal4"}, {"Id": 5, "Text": "MyVal5"}]
$("#mySelect").empty();
for (var i = 0; i < myNewVals.length; i++) {            
  $("#mySelect").append('<option value="' + myNewVals[i].Id + '">' + myNewVals[i].Text + '</option');
} 
```

它在我第一次尝试填充它时起作用，但此后的每一次，它都会用相同的值重新填充下拉列表。为什么在尝试重新制作选项时会忽略新值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:29:51.603

最好使用 JSON 数组，试试这样：

```
<script>
    $(document).ready(function () {
        var myNewVals = { 4: 'Myval4', 5: 'Myval5' };

        $("#popButton").bind('click', function (event) {

            $("#mySelect").empty(); 
            $.each(myNewVals, function(val, text) {
                $("#mySelect").append($('<option></option>').val(val).html(text))
            });
        });
    });
</script>

<select id="mySelect" name="mySelect">
    <option value="1">MyVal1</option>
    <option value="2">MyVal2</option>
    <option value="3">MyVal3</option>
</select>
<input type="button" id="popButton" value="Populate!" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:36:44.900

问题是因为我试图从下拉列表中删除禁用的属性。如果我在重新填充之间禁用它，它似乎可以工作。非常愚蠢的错误。

# matlab - 如何在 MATLAB 中使用 ezplot 有效地绘制隐式曲线和曲面？

> ID：12005270
> 
> 赞同：1
> 
> 时间：2012-08-17T11:53:24.200
> 
> 标签：matlab, plot, implicit, curve

我需要使用它的一般形式绘制一个 2D 椭圆`(x-c)'A(x-c)=1`

我想知道如何在 MATLAB 中使用[ezplot](http://www.mathworks.nl/help/techdoc/ref/ezplot.html)有效地做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T11:53:24.200

这个答案适用于几乎任何可以在 MATLAB 中表述为隐式曲面/曲线的问题。我将在椭圆上演示它。

**精简版：**

```
A = [5 4; 4 5]    
c = [1; 2]    
elFunc = @(A11,A22,A12,A21,c1,c2,x,y) (c1-x).*(A11*(c1-x)+A21*(c2-y))+(c2-y).*(A12*(c1-x)+A22*(c2-y))-1    
ezplot(@(x,y) elFunc(A(1,1),A(2,2),A(1,2),A(2,1),c(1),c(2),x,y), [0 2 0 4]) 
```

**长版：**

椭圆可以以最一般的形式（对于任何维度）隐式写为

```
(x-c)'A(x-c) = 1 or (x-c)'A(x-c)-1 = 0 
```

其中 x,c 在 R^n 中，A 是一个 nxn 矩阵。

为了把它变成 MATLAB 可以使用的形式，我们可以使用符号工具箱。对于二维椭圆，我们写：

```
syms A11 A12 A21 A22 c1 c2 x y real
impl = ([x y]-[c1 c2])*[A11 A12; A21 A22]*([x;y]-[c1;c2])-1 
```

这会产生以下输出：

```
(c1 - x)*(A11*(c1 - x) + A21*(c2 - y)) + (c2 - y)*(A12*(c1 - x) + A22*(c2 - y)) - 1 
```

我们不再需要符号工具箱，所以我们只需复制字符串，通过添加点运算符版本对其进行矢量化并将其转换为函数

```
elFunc = @(A11,A22,A12,A21,c1,c2,x,y) (c1-x).*(A11*(c1-x)+A21*(c2-y))+(c2-y).*(A12*(c1-x)+A22*(c2-y))-1 
```

现在我们可以使用 ezplot 来绘制我们的曲线。ezplot 假设当你给它一个函数句柄时，它需要求解 func = 0 所以我们的曲线已经由 elFunc 以隐式格式描述。剩下要做的就是定义我们希望 ezplot 尝试绘制曲线的域。以下示例演示了结果：

```
A = [5 4; 4 5]    
    c = [1; 2]    
    elFunc = @(A11,A22,A12,A21,c1,c2,x,y) (c1-x).*(A11*(c1-x)+A21*(c2-y))+(c2-y).*(A12*(c1-x)+A22*(c2-y))-1    
    ezplot(@(x,y) elFunc(A(1,1),A(2,2),A(1,2),A(2,1),c(1),c(2),x,y), [0 2 0 4]) 
```

![由 ezplot 在 MATLAB 中绘制的椭圆](../Images/81574f79b1c06e49a92eb88224f0a3fe.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:37:57.427

这个答案与@twerdster 的答案完全相同，只是符号有点更多 Matlabby：

```
A = [5 4; 4 5];
c = [1 2];

elFunc = @(x,y) sum(([x(:)-c(1) y(:)-c(2)] * A) .* [x(:)-c(1) y(:)-c(2)], 2) - 1;
ezplot(elFunc, [0 2 0 4]) 
```

最后一点：正如我们的两个答案已经表明的那样，`ezplot`适用于**易于绘制**的事物。椭圆已经处于对于匿名函数和`ezplot`.

一般来说，我建议你避免使用`ezplot`任何比它更难的东西`ezplot(@(x)sin(x).*cos(2*x))`。`function`练习并流利使用s 和`plot()`,`surf()`和朋友会更有成效。

# java - 用于绘制图形的 Android 数据存储

> ID：12005281
> 
> 赞同：0
> 
> 时间：2012-08-17T11:54:09.880
> 
> 标签：java, android

在我的 android 应用程序中，我需要绘制一个图表，显示最近 2 小时的数据以 30 秒的间隔更新。

我也想更新文件上的数据。在任何时候，数据文件都应该只包含最近 2 小时的数据。最好的方法是什么，因为两小时后，每秒必须从文件顶部删除一个数据元素，并将新数据添加到文件底部，并且文件数据应该从第一行开始。

有人可以建议我，存储数据的最佳方式。这样我就可以同时从中读取并同时绘制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:12:29.117

由于您一次只需要 120*2 = 240 个条目，并且每个条目只有 12 个字节（3 个浮点数）。我只会使用数组列表。

```
ArrayList<Float> dataX = ArrayList<Float>();//for one of the three floats 
```

然后添加新条目

```
if( dataX.getSize() < 240 ){
    dataX.add( value );
}else{
    dataX.remove(0);//remove oldest
    dataX.add( value );
} 
```

以上可能需要一些调整，将其视为伪代码。

[编辑] 您可以将列表的类型更改为 Float[] 并将所有三组浮点数存储在一个数组列表中，但您可能希望能够独立访问每组数据，我不知道。

# asp.net-mvc - 控制订单属性由 ASP.NET MVC IModelBinder 填充

> ID：12005287
> 
> 赞同：1
> 
> 时间：2012-08-17T11:54:28.517
> 
> 标签：asp.net-mvc, model-binding

在我的自定义 ASP.NET MVC ModelBinder 中，我必须绑定 MyType 类型的对象：

```
public class MyType
{
  public TypeEnum Type { get; set; }
  public string Tag { get; set; } // To be set when Type == TypeEnum.Type123
} 
```

在上面的伪代码中，您可以看到我希望仅在“Type”为 Type123 时设置属性“Tag”。

我的自定义 ModelBinder 像这样：

```
public class CustomModelBinder : DefaultModelBinder
{
  protected override void BindProperty(ControllerContext cc, ModelBindingContext mbc, PropertyDescriptor pd)
  {
    var propInfo = bindingContext.Model.GetType().GetProperty(propertyDescriptor.Name);
    switch (propertyDescriptor.Name)
    {
      case "Type": // ....
        var type = (TypeEnum)controllerContext.HttpContext.Request.Form["Type"].ToString();
        propInfo.SetValue(bindingContext.Model, name, null);
        break;
      case "Tag": // ...
        if (bindingContext.Model.Type == TypeEnum.Type123) { // Fill 'Tag' }
        break;
  }
} 
```

我遇到的问题是，在我的自定义 ModelBinder 中，我无法控制 ASP.NET MVC 绑定属性的顺序。

您知道如何指定 ASP.NET MV 填充属性的顺序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:10:17.137

您可以尝试覆盖该`BindModel`方法：

```
public class MyTypeModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var model = (MyType)base.BindModel(controllerContext, bindingContext);
        if (model.Type != TypeEnum.Type123)
        {
            model.Tag = null;
        }
        return model;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:10:02.070

您可以在自定义模型绑定器中尝试此操作：

```
 protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
    {
        var formCollection = new FormCollection(controllerContext.HttpContext.Request.Form);
        base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
    } 
```

然后从 formCollection 中提取您需要的内容。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T07:58:40.917

您可以重写该[`GetModelProperties`](https://msdn.microsoft.com/en-us/library/dd470147(v=vs.100).aspx)方法并促进该[`System.ComponentModel.PropertyDescriptorCollection.Sort(string[])`](https://msdn.microsoft.com/en-us/library/dy711ak6(v=vs.100).aspx)方法对属性进行重新排序（请注意，此方法有几个重载）。在您的情况下，这应该会给您带来预期的结果：

```
protected override PropertyDescriptorCollection GetModelProperties(
    ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        return base.GetModelProperties(controllerContext, bindingContext)
            .Sort(new[] { "Type", "Tag" });
    } 
```

# c# - 关键字“FROM”和“AS”附近的语法不正确

> ID：12005288
> 
> 赞同：-3
> 
> 时间：2012-08-17T11:54:29.217
> 
> 标签：c#, sql-server, syntax

```
string sqlQueryString = " SELECT g.code AS GoodCode, g.name AS GoodName, " +
"msr.name AS MsrName, sm.min_quan AS KolMin, sm.max_quan AS KolMax, " +
"sm.quan AS KolNal, ord.prc AS EdPrice, s.name AS Sklad, m.name AS Mol, " +
"k.code AS KodDost, k.name AS NameDost " +
"FROM N_GOODS_{0} AS g INNER JOIN " +
"G_SMGS_{0} AS sm ON g.id = sm.good_id INNER JOIN " +
"N_KNTRS_{0} AS k ON g.id = k.id INNER JOIN " +
"N_PRC_LISTS_{0} AS pr ON g.id = pr.id INNER JOIN " +
"G_ORDD_{0} AS ord ON sm.smg_id = ord.smg_id INNER JOIN " +
"N_MOLS_{0} AS m ON sm.mol_id = m.id INNER JOIN " +
"N_STORS_{0} AS s ON sm.stor_id = s.id INNER JOIN " +
"N_MSRS_{0} AS msr ON g.id = m.id";
sqlQueryString = String.Format(sqlQueryString, dbLink.CurrentFirm.Id);

return " ( " + sqlQueryString + " ) AS t"; 
```

这是一个 sql 查询的字符串，我正在尝试在一段 c# 代码中执行此操作。然而，我花了一整天的时间试图让它发挥作用。这是我得到的错误：

```
关键字“FROM”附近的语法不正确。
关键字“AS”附近的语法不正确。

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T11:57:50.247

尝试：

```
return "SELECT * FROM ( " + sqlQueryString + " ) AS t"; 
```

此外，您应该尝试在`return`语句上设置断点。获取`sqlQueryString`那里的值并尝试直接在 SQL Server Management Studio 中运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:05:14.403

首先，这可能不是一个 C# 问题，只是说您可能应该学习...

```
string strSql = @"SELECT * 
                   FROM TABLE"; 
```

语法，以便 1.) 你可以取消所有的`" +`东西和 2.) 你可以从 isql 客户端剪切和粘贴一些东西。

所以你真正想做的是...

1.  通过在最后一行设置断点在 IDE 中进行调试，
2.  将光标悬停在`sqlQueryString`,
3.  右键单击`sqlQueryString`出现的“浮动”（我把鼠标放在上面`strReturn`，浮动出现了。右键单击`strReturn`出现在上方的浮动 - 蓝色矩形就是你想要的）

![来自 var 的 Visual Studio 的 floater](../Images/020f105e3af0c1f628479c4987a4c1a7.png)

4.  选择复制*值*的选项。
5.  将带有 ' 内容的剪贴板粘贴`sqlQueryString`到记事本、gvim 等中。
6.  **让我们知道那是什么意思。**
7.  然后准确地告诉我们[当您直接对数据库运行该语句时会发生什么](https://stackoverflow.com/a/1706257/1028230)。

您还可以让我们了解您预期会发生什么[基于之前对数据库运行原始查询，也许]。

然后接受即使是我们中最好的人偶尔也会浪费一两个小时用 SQL 做一些愚蠢的事情。;^) 然而，有了以上信息，我们可能会帮助减少一点。

**编辑：** 相反，如果正如您的评论所建议的那样，查询在直接针对（MS-SQL Server？）运行时有效，那么当您针对数据库运行它时，C# 问题可能会出现*在此代码之后。*首先执行上述操作并确保 sqlQueryString 中的内容是您针对 db 运行的内容。

**EDIT2：**将调试步骤制成项目符号列表，以使它们更加明显。不要只是告诉我们它有效；告诉我们里面有什么`sqlQueryString`。 **但是，再次与第一次编辑一样，如果该字符串没问题，您的问题可能会在稍后出现在您的 C# 代码中。**

您是否立即对数据库进行攻击？那个代码是什么样子的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:12:41.010

看起来问题出在最后的 return 语句中。

`( SELECT foo FROM bar ) AS baz;` 它本身不是一个有效的 SQL 语句，它是一个片段。

正如@Yuck 建议的那样，请尝试`SELECT * FROM ( " + sqlQueryString + " ) AS t";`。

# c# - 从 IronPython 调用带有可变参数的 CLR 方法

> ID：12005290
> 
> 赞同：1
> 
> 时间：2012-08-17T11:54:32.767
> 
> 标签：c#, ironpython

我正在使用 Iron Python 作为添加的“免费”工具来测试将通信包装到某些自定义硬件的 API，以便非开发团队可以通过 python 使用硬件。

但是我不知道如何让 .NET`void func(params object[] args)`映射到 Python `def (*args)`。

这里有一些代码来解释。

我有一种允许注入日志回调以格式化和处理消息的类型，它遵循 Console.WriteLine 和 Debug.WriteLine 的签名。

```
public class Engine
{
    Action<string, object[]> _logger;
    public void Run()
    {
        Log("Hello '{0}'", "world");
    }
    public void SetLog(Action<string, object[]> logger)
    {
        _logger = logger;
    }
    void Log(string msg, params object[] args)
    {
        _logger(msg, args);
    }
} 
```

在我的 IronPython 代码中

```
import clr
from System import *
from System.IO import Path
clr.AddReferenceToFileAndPath(Path.GetFullPath(r"MyAssembly.dll"))
from MyNamespace import *

def logger(msg, *args):
    print( String.Format(msg, args))
    print( String.Format(msg, list(args)))
    print( String.Format(msg, [args]))
    a=[]
    for i in args:
        a.append(i)
    print( String.Format(msg, a) )

e = Engine()
e.SetLog(logger)
e.Run() 
```

输出

```
Hello '('world',)'
Hello 'IronPython.Runtime.List'
Hello 'IronPython.Runtime.List'
Hello 'IronPython.Runtime.List' 
```

我想

```
Hello 'world' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:26:40.830

因为[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)将您的铁 python 对象（第一个输出案例的元组，最后三个的列表）作为单个对象处理，并且不知道您希望在`params object[]`获得意外输出时使用 python 集合。`def logger`调用时会隐式创建单个 python 对象/元组。

根据您的实际用例/风格，您可以用不同的方式解决这个问题。

像 Jeff 在他的回答中解释的那样，最 Python 的方式是在他们的调用站点上扩展参数：

```
def logger(msg, *args):
    print( String.Format(msg, *args) ) 
```

如果您`logger`仅从 CLR 调用作为实现，则`Action<string, object[]>`您可能只有`args`一个类型的（非变量）参数，`object[]`例如

```
def logger(msg, args):
    print( String.Format(msg, args) ) 
```

如果您也想`logger`使用可变参数从 python 调用（并且您不介意来回转换），您可以这样做

```
def logger(msg, *args):
    print( String.Format(msg, Array[object](args)) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:44:56.457

除非我误解了你的问题，否则这应该有效：

```
def logger(msg, *args):
    print(String.Format(msg, *args)) 
```

# c - 什么是 char (*arrs)[rowSize] = malloc(bytesPerTable);

> ID：12005295
> 
> 赞同：2
> 
> 时间：2012-08-17T11:54:56.737
> 
> 标签：c

在另一个问题的答案中看到了这一点：

```
char (*arrs)[rowSize] = malloc(bytesPerTable); 
```

什么是arr？/ 为什么有括号 / 这个声明的描述是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:56:19.227

> 什么是 arr？这个声明的描述是什么？

它是一个指向 s 数组的指针，与`rowSize` `char`指向 a 的指针大不相同`char`。

> 为什么有括号

因为没有它们，它将是一个指向`char`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:08:13.073

`int *a[10]`- 这意味着，`a`是一个由 10 个元素组成的数组，元素类型是`int *`变量的大小，`a`在 32 位机器中为 40 字节，在 64 位机器中为 80 字节。

`int (*a)[10]`- 这意味着，`a`是一个指针变量，它的大小将是 4 个字节（或 8 个字节），它可以保存一个`int`大小数组的地址，`10`如下所示。

```
int (*a)[10] = NULL;
int b[10] = {0};
a = &b; 
```

# android - 如何从 .java 文件闪屏访问 Monodroid 资源

> ID：12005296
> 
> 赞同：1
> 
> 时间：2012-08-17T11:55:01.527
> 
> 标签：android, android-layout, resources, xamarin.android

我正在尝试在 Visual Studio 的 Monodroid 应用程序中实现 .java 启动画面，无论如何我希望启动画面从资源布局中获取它的内容视图。我试图这样得到它：

```
setContentView(R.layout.AppSplash); 
```

还尝试过：

```
setContentView(Resource.layout.AppSplash); 
```

并且：

```
setContentView("@layout/AppSplash"); 
```

我收到这样的错误消息：

```
package R does not exist 
```

其中 R 更改资源或：

```
cannot find symbol
symbol  : method setContentView(java.lang.String)
location: class SwimmerTimesCalc.SplashActivity
    setContentView("@layout/AppSplash"); 
```

当我尝试 @layout/AppSplash 选项时

如何访问 Monodroid 资源来设置启动画面的布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:23:10.117

[这](http://docs.xamarin.com/android/tutorials/Creating_a_Splash_Screen)应该可以帮助您入门。

如果您想使用专门用于创建自己的启动屏幕的布局，然后使用该资源在您的活动中显示它，那么您可以使用类似这样的东西。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/SplashScreenLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<ImageView
    android:id="@+id/SplashDefault"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:scaleType="centerCrop" />
</RelativeLayout> 
```

然后在您的活动中，您可以设置内容视图。

```
 protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        SetContentView(Resource.Layout.SplashLayout);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:58:41.173

我想出了如何访问资源，因为调试器无法访问资源我去了生成的资源文件，该文件位于 \obj[This can be debug or release]\android\src 下的项目文件夹中，它被称为 R。虽然浏览该文件我发现我试图使用这样的布局：

```
public static final int appsplash1=0x7f030002; 
```

我从那里获取资源值 0x7f030002 并像这样使用它：

```
setContentView(0x7f030002); 
```

无论如何，由于资源文件是自动生成的，因此在此之前添加另一个按字母顺序排列的布局可能需要再次执行此过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:08:10.207

这里有同样的问题。可以通过它的名称和文件夹在运行时找到资源的 id，如下所示：

```
int iconResourceId = context.getResources().getIdentifier("icon", "drawable", context.getPackageName()); 
```

因此，在 Java 文件中，可以使用这样的查找而不是 R.drawable.icon 并且它会起作用。

然而，这比较慢（因为查找在 Android 上的实现效率低下）并且仍然会将资源的名称硬编码为字符串。如果在 Mono 项目中移动或重命名资源，Java 文件不会知道这一点。

此外，必须以小写形式键入所有资源名称，因为 Mono 将名称从 .NET 样式（如“Icon.png”）转换为 Android 样式“icon.png”。

# jquery-mobile - Pagebeforeshow 未在第二次更改页面事件时触发

> ID：12005305
> 
> 赞同：0
> 
> 时间：2012-08-17T11:55:28.307
> 
> 标签：jquery-mobile

在 Jquery mobile-1.1.1 pagebeforechange 中，pagebeforeshow 事件未触发 $mobile.changepage 的第二次调用。

**从主页：**

```
function scan() {
        window.plugins.barcodeScanner.scan(function(result) {
                alert("Barcode-->"+result.text);
            barcode=result.text;
            $.mobile.changePage("scan.html",{reloadPage:true,transition: "none"});
        }, function(error) {
            alert("Scanning failed: " + error);
        });
} 
```

**页面加载：**

```
$("#scan_page").live("pagebeforeshow",function(event){
        alert("Scan page Init");
            loadScannedItems();
});

function loadScannedItems()
{
    //append scanned items to list
    // called Scan() again
} 
```

**pagebeforeshow**事件在页面加载第一次时触发，我再次去扫描函数调用 changePage，但 pagebeforeshow 没有触发。这段代码有什么问题？

还动态创建了带有 data-role="button" 的按钮。但它仍然显示为链接？

# c# - 在运行时更改椭圆颜色

> ID：12005314
> 
> 赞同：0
> 
> 时间：2012-08-17T11:56:15.380
> 
> 标签：c#, wpf, multithreading

我没有经常使用 wpf，并认为在运行时更改椭圆的颜色将是一个简单的过程。我有一个 FileWatcher，在创建的事件中，我想将椭圆的颜色更改为一种颜色，然后再变回来，创建一个闪烁的效果。（created是椭圆，br4是xaml中定义的纯色画笔）

```
 public void watcherCreated(object seneder, FileSystemEventArgs e)
    {

        Application.Current.Resources["br4"] = new SolidColorBrush(Colors.Green);
        created.Fill = (SolidColorBrush)Application.Current.Resources["br4"];

    } 
```

一旦在触发事件的路径中创建文件，我就会收到此错误：无效操作异常调用线程无法访问此对象，因为不同的线程拥有它。我一直在寻找使用 freeze() 方法的解决方案，但没有成功。

```
 created.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(
            delegate()
            {
                Application.Current.Resources["br4"] = new SolidColorBrush(Colors.Green);
                created.Fill = (SolidColorBrush)Application.Current.Resources["br4"];
            }
        )); 
```

收到谢谢评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:00:18.993

您只能从创建它们的同一线程访问 UI 元素。

您应该使用 Dispatcher.Invoke 或 Dispatcher.BeginInvoke 在 UI 线程上调用一个委托……然后您可以在其中访问“已创建”元素的“填充”属性。

有关问题的说明，请参阅此链接：

*   [http://www.switchonthecode.com/tutorials/working-with-the-wpf-dispatcher](http://www.switchonthecode.com/tutorials/working-with-the-wpf-dispatcher)

而不是尝试在 UI 中设置不断变化的颜色......您可以做的是在您的 ViewModel 上公开一个包含状态的属性。

当您的 FileWatcher 通知您新创建的文件（通过调用 watcherCreated 方法）时，您只需在 ViewModel 中设置该状态。

在您的 UI 中...使用带有转换器的绑定来绑定到您的 ViewModel 中的 state 属性。转换器将根据状态确定要使用的画笔，例如，如果状态为 1，则返回绿色画笔，如果状态为 0，则返回红色画笔。

要将状态重置回“关闭”位置......您可以有一个计时器，在 1 秒后等......将状态值设置回关闭。

通过这样做....您将状态与 UI 分开。

如果将来您想要一种更复杂的方式在 UI 中显示状态...例如，有一个动画（使用 StoryBoards/Visual State Manager）逐渐从绿色变回红色...那么您可以拥有该动画再次基于 ViewModel 中的状态触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:07:46.993

> 在 WPF 中，所有 UI 控件都在不同的线程中加载，而您的应用程序在单独的线程中运行。
> 
> 因此，请认为您收到此错误是因为您的应用程序（**主线程**）正在尝试访问**UIThread**中的 Elipse 。这是不允许的，因为线程不能直接访问彼此的对象。
> 
> 因此 WPF 引入了调度程序对象。使用以下

```
if (this.Dispatcher.Thread != System.Threading.Thread.CurrentThread)
{
    this.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal,
        new Action(
            delegate()
            {
                Application.Current.Resources["br4"] = new SolidColorBrush(Colors.Green);
                created.Fill = (SolidColorBrush)Application.Current.Resources["br4"];
            }
            ));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:05:02.680

更简单的解决方案是在 UI 线程本身上设置 created.Fill。您将不需要 Dispatcher.Invoke 或 Dispatcher.BeginInvoke。

# iphone - selectRowAtIndexPath 仅在 allowedMultipleSelection 为 YES 时有效

> ID：12005315
> 
> 赞同：3
> 
> 时间：2012-08-17T11:56:16.520
> 
> 标签：iphone, ios, uitableview, ios5

我有一个`UITableViewController`根据用户先前的选择动态填充的。在某些情况下，用户应该能够选择表中的多行，但在其他情况下，他不应该。无论哪种情况，我都想自动选择第一行，但我发现它只在我有`allowsMultipleSelection = YES`.

以下代码在期间调用`-(void)viewDidLoad`

```
switch(self.field)
{
    case people:
       self.options = (NSArray *)[data objectForKey:@"People"];
       self.tableView.allowsMultipleSelection = YES;
       enter code here break;
    case place:
        self.options = (NSArray *)[data objectForKey:@"Places"];
        self.tableView.allowsMultipleSelection = NO;
        break;
    case reason:
        self.options = (NSArray *)[data objectForKey:@"Reasons"];
        self.tableView.allowsMultipleSelection = NO;
        break;
}

[self.tableView reloadData];
NSIndexPath *zeroPath = [NSIndexPath indexPathForRow:0 inSection:0];
[self.tableView selectRowAtIndexPath:zeroPath animated:NO scrollPosition:UITableViewScrollPositionNone]; 
```

这适用于“人”案例，但不适用于其他案例。我尝试设置`allowMultipleSelection`为`YES`并解决了选择问题，但在应用程序逻辑方面它是不可接受的。

我是否缺少有关这些功能如何工作的信息？如何以编程方式在单个选择表中选择一行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T12:54:27.223

使用模板中的以下内容进行了修复：

```
// Uncomment the following line to preserve selection between presentations.
self.clearsSelectionOnViewWillAppear = NO; 
```

仍然不确定为什么它以前不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:45:47.473

```
for (NSIndexPath *indexPath in [self.tableView indexPathsForSelectedRows]) {
    [self.tableView deselectRowAtIndexPath:indexPath animated:NO];
}
[self.tableView selectRowAtIndexPath:zeroPath animated:NO scrollPosition:UITableViewScrollPositionNone]; 
```

# visual-studio-2010 - 构建后 SET 命令和 %variable% 错误

> ID：12005318
> 
> 赞同：8
> 
> 时间：2012-08-17T11:56:31.187
> 
> 标签：visual-studio-2010, command-line, batch-file, post-build-event

我是一批新手，我可能犯了一个错误。但我有以下构建后事件：

```
IF $(ConfigurationName) == Release (
    SET RELEASEPATH = "C:\Users\Synercoder\Documents\Visual Studio 2010\Releases\$(ProjectName)"
    IF NOT EXIST  %RELEASEPATH% (
        GOTO MAKEDIR
    ) ELSE (
        GOTO DIREXISTS
    )
    :MAKEDIR
    MKDIR %RELEASEPATH%
    :DIREXISTS
    COPY /Y "$(TargetDir)$(ProjectName).dll" "%RELEASEPATH%\$(ProjectName).dll"
    COPY /Y "$(TargetDir)$(ProjectName).pdb" "%RELEASEPATH%\$(ProjectName).pdb"
) 
```

但这会因代码 255 而失败。如果我将所有的替换`%RELEASEPATH%`为实际路径，它就可以工作。我查看了`SET`命令，我认为我使用它是正确的......但就像我说的我是一个批处理新手。

任何线索为什么这在我的情况下失败？

如果我使用以下代码，这是我的输出：

```
SET RELEASEPATH = test
ECHO "%RELEASEPATH%"
SET RELEASEPATH = "test"
ECHO "%RELEASEPATH%" 
```

输出：

```
""
"" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T12:08:05.433

首先，空间很重要！如果我是你，我会删除“，并且仅在使用 var 时添加它们。

```
SET RELEASEPATH=C:\Users\Synercoder\Documents\Visual Studio 2010\Releases\$(ProjectName)

IF NOT EXIST  "%RELEASEPATH%" MKDIR "%RELEASEPATH%" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T13:02:56.027

我的解决方案如下：

```
SET RELEASEPATH=%USERPROFILE%\Documents\Visual Studio 2010\Releases\$(ProjectName)
IF $(ConfigurationName) == Release (
    IF NOT EXIST %RELEASEPATH% (
        MKDIR "%RELEASEPATH%"
    ) 
    COPY /Y "$(TargetDir)$(ProjectName).dll" "%RELEASEPATH%\$(ProjectName).dll"
    COPY /Y "$(TargetDir)$(ProjectName).pdb" "%RELEASEPATH%\$(ProjectName).pdb"
) 
```

# java - 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1000000 at question2.main(problem2.java:17)

> ID：12005323
> 
> 赞同：1
> 
> 时间：2012-08-17T11:56:37.887
> 
> 标签：java, arrays, indexoutofboundsexception

我收到以下错误，我不知道为什么。我尝试查找它，但我没有找到解决方案。

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1000000 at question2.main(problem2.java:17)

这是我的代码：

```
//Each new term in the Fibonacci sequence is generated by adding the previous two terms.
//By starting with 1 and 2, the first 10 terms will be:
//1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
//By considering the terms in the Fibonacci sequence whose values do not exceed four million, 
//find the sum of the even-valued terms.

public class problem2 {
    public static void main(String[] args) {
        int []a = new int[1000000];
        a[0] = 1;
        a[1] = 2;
        int sum=0;

        int i=2;
        while(a[i]<=4000000){
            a[i] = a[i-1] + a[i-2];
            i++;
        }

        for(int j=0;j<i;j++){
            sum = sum + a[j];
        }

        System.out.println("The sum is: " + sum);
        System.out.println("\nThere are " + i + " numbers in the sequence.\n");
        System.out.println("This are all the numbers in the sequence:");

        for(int j=0;j<i;j++){
            if(j+1==i){
                System.out.print(a[j] + ".");
                break;
            }

            System.out.print(a[j] + ", ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:02:58.737

此错误是由于在达到循环终止条件`i`之前达到 1000000（数组的大小）造成的。`a[i]`而不是测试你的值，`a[i]`你应该使用这样的 for 循环：

```
 for (i=2; i<a.length; i++){
        a[i] = a[i-1] + a[i-2];
    } 
```

此外，您应该使用 type`long`而不是 int 的项目，`a`因为值变得如此之大以至于它们溢出 int 类型并环绕为负值，例如：

```
1872856136
1063031469
-1359079691
-296048222
-1655127913
-1951176135
688663248 
```

编辑：事实上，使用包含 1000000 个元素的数组甚至 a`long`都不够大 - 如果你真的需要这么大的值，你将不得不使用[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:10:11.777

问题不在于`int[]`.

您的 while 循环不断检查是否`a[i]`小于`4000000`while`i`变量已经是前面的一个索引。每个循环都会有`a[i] == 0`.

此更改将为您修复代码：

```
int i=1;
while(a[i]<=4000000){
    i++;
    a[i] = a[i-1] + a[i-2];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:58:43.440

您的数组`a`包含 1,000,000 个元素，从零开始。当你在这里循环它们时：

```
while(a[i]<=4000000) 
```

您超出了索引容量。第一个超出容量的索引是 1,000,000，因此出现错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T12:02:17.303

在您的 while 循环中，您在检查是否完成之前增加 i 。每当评估该条件时，都会对*您要计算*的元素进行评估- 但那里还没有任何内容。

这意味着您的 while 循环永远不会终止 - 并最终`i`变为 1,000,000，此时`a[i]`无法再评估，导致抛出此异常 - 因为中的最后一个元素`a`是`a[999999]`。

您可以通过多种方式解决此问题；最清晰的方法是从 1 开始，并在分配给*之前*`i`将其递增。*`a[i]`*

 *顺便说一句，固定大小的数组通常是一个糟糕的选择，而可变大小的列表`ArrayList<E>`是一个更好的选择——尽管在这种特殊情况下，由于逻辑错误，最终只会导致 OutOfMemoryException。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T11:59:58.443

问题就在这里

```
while(a[i]<=4000000) 
```

在你的情况下，你可以这样做

```
while(i < a.length && a[i]<=4000000 ){
    a[i] = a[i-1] + a[i-2];
    i++;        
} 
```

你的程序将完美运行..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T12:01:55.620

添加额外条件 `while(i < a.length && a[i]<=4000000)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T12:02:37.153

问题出在while循环中，查看条件

```
while(a[i]<=4000000) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T12:07:12.770

正如其他人指出的那样。你可以这样做：

```
 int i=2;
for(;i<a.length && a[i]<=4000000;i++)
{
     a[i] = a[i-1] + a[i-2];

} 
```

它检查该值是否小于 400000，并且索引应小于 100000。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-01T11:40:42.650

```
import java.util.Scanner;

public class FibonacciSequence {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int[] a = new int[40000000];
        Scanner b = new Scanner(System.in);
        System.out.println("Enter Two Numbers From Which You Want To Start Fibonacci Sequence.");
        a[0] = b.nextInt();
        a[1] = b.nextInt();
        for(int i = 2; i <= 10; i++) {
            a[i] = (a[i-2] + a[i-1]);
        }
        System.out.println("The fibonacci Sequence is: ");
        int sum = 0;
        for(int j = 0; j <= 10; j++) {
            System.out.println(a[j] + ", ");
            sum += a[j];
        }
        System.out.println("The Sum of the fibonacci sequence: " + sum);
    }

} 
```*

# gpl - 如果我运行生成一些代码并在我的应用程序中使用代码的 GPLv2 Python 脚本，它是否被视为“衍生”工作？

> ID：12005326
> 
> 赞同：0
> 
> 时间：2012-08-17T11:56:46.020
> 
> 标签：gpl

例如，我想使用这个 Python 脚本：[Generic Perfect Hash Generator](http://ilan.schnell-web.net/prog/perfect-hash/)来生成一个完美的哈希函数。

但我有点困惑：如果我使用它生成的代码并将脚本与程序的源代码一起重新分发，我是否也应该根据 GPL 的条款分发我的程序（目前它在 Apache 2.0 下）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:03:02.293

除了 IANAL：

这取决于。如果程序的输出包含在生成器的源代码中逐字定义的常量的重要部分，那么这些部分也属于 GPL，因此，您将它们合并到的任何程序也必须属于 GPL。

但是，代码生成器的许可条款通常明确地将程序的输出排除在 GPL 条款之外；例如，野牛就采用了这条路线。毕竟，受保护的存根通常不是很有趣，也不会以重要的方式对生成的代码库做出贡献。

您可以咨询律师寻求法律建议，但更便宜（且更有希望）的途径是要求作者澄清。最有可能的是，如果没有豁免，作者根本不认为这是一个问题，只是在标准 GPL 下发布它而没有考虑太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T15:29:03.677

这在此处的 GPL 常见问题解答中有所介绍：[https ://www.gnu.org/licenses/gpl-faq.html#WhatCaseIsOutputGPL](https://www.gnu.org/licenses/gpl-faq.html#WhatCaseIsOutputGPL)

所以对于 GNU 人来说，事情已经解决了。律师当然可能不同意。

# linux - nohup 和现在的区别

> ID：12005331
> 
> 赞同：3
> 
> 时间：2012-08-17T11:56:55.143
> 
> 标签：linux, scheduling, nohup, at-job

*似乎nohup*和*at now*没有区别，但也许有微妙之处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:00:06.010

不同之处在于`now`运行一个可以响应`HUP`信号`nohup`的命令，而运行一个对信号免疫的命令`HUP`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:08:42.673

埃德·希尔是对的。但另一个区别是，运行的东西`nohup`仍然有一个控制终端，而运行的东西`at now`没有。

除此之外，将某些内容设置为后台`nohup`会使其立即运行，而`at now`只是将某些内容排队等待下次[`atrun(8)`](http://www.freebsd.org/cgi/man.cgi?query=atrun)运行。在 BSD unix 中，(FreeBSD/OpenBSD) at 作业由`atrun`定期启动`cron`（或`launchd`在 OSX 中）启动。在 Linux 中， at 作业由 at 自己的守护进程运行，`atd`默认情况下它每 60 秒启动一次作业。

其他风格的 unix 可能有不同的策略，但在大多数情况下，您可能会发现由 启动的作业`at now`不如使用`nohup`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T12:08:25.110

nohup 告诉系统即使在您注销后也继续运行。at 用于在将来的某个时间执行一个命令或多个命令。

# wpf - WPF 应用程序抛出“EnumConverter 无法从 System.Boolean 转换。” app.Run 函数中的异常

> ID：12005333
> 
> 赞同：0
> 
> 时间：2012-08-17T11:57:03.983
> 
> 标签：wpf

我在 MainWindow.xaml 中有一个带有 MainView.xaml 的 WPF 应用程序。当我启动应用程序时，它会抛出标题中提到的消息异常。当我尝试调试它时，我发现它在这一行中抛出：

```
 app.InitializeComponent()      
 app.Run() 
```

在 Application.g.vb 文件中，它是自动生成的。但由于异常只有这条消息，没有内部异常，我对它试图转换的枚举值的信息非常有限。另外，它似乎（直接）与 WPF 组件组合无关，因为通常对于这类问题，异常会在每个 Window 或 UserControl 的 InitializeComponent() 函数调用中引发。但这不会发生。我的 MainWindow 和 MainView 都正确组合（当然我相信它们里面有一些错误，但我的意思是 .NET 没有找到它们）。谁能指出我从哪里开始调试这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:45:58.343

原来是我的一个转换器有这个问题。实际上我有一个通用的布尔转换器，它可以转换真或假以给出给定的 TrueValue 和 FalseValue。但是 Convert 函数中存在一些错误，因此它实际上不会将布尔值转换为给定类型的枚举值。

# jpa-2.0 - 如何为 Selenium WebDriver 测试用例连接 JDBC 连接池？

> ID：12005334
> 
> 赞同：2
> 
> 时间：2012-08-17T11:57:05.980
> 
> 标签：jpa-2.0, ejb-3.0, selenium-rc, selenium-webdriver

我正在开发一个 Maven 应用程序。我正在使用 JPA 和 EJB。我需要为 Selenium-WebDriver 测试用例连接一个 JDBC 连接池。由于我想使用单独的数据库进行测试。

使用 Selenium-WebDriver 进行测试时，如何指定要使用的连接池？是否需要任何配置？在 domain.xml 中，我可以配置连接池的属性，例如“数据库名称”、“端口”、“用户名”、“密码”等。但我想知道如何调用此连接池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:05:12.793

将数据库连接设置与 selenium-webdriver 代码分开。无需将 JPA/EJB 连接池与 selenium 代码耦合。如果需要，创建自己的框架来使用 selenium-webdriver 执行数据库操作。

# asp.net - asp.net 动态加载

> ID：12005335
> 
> 赞同：1
> 
> 时间：2012-08-17T11:57:11.153
> 
> 标签：asp.net, sql, sql-server, database, sql-server-2005

当我尝试使用 asp.net 中的数据网格视图动态加载我的页面时，我的数据库连接出现了一些问题，我收到了一些错误，例如：-

> 建立与服务器的连接时发生错误。连接到 SQL Server 2005 时，此故障可能是由于在默认设置下 SQL Server 不允许远程连接造成的。提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:01:58.120

查看[如何配置 SQL Server 2005 以允许远程连接](http://support.microsoft.com/kb/914277)和[SQL Server 论坛中的此线程](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/2a8f2e64-74cf-46f2-b2be-bbb08b1502cb/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:05:24.797

在 SQl Server 配置管理器上启用命名管道：

![在此处输入图像描述](../Images/096afc1e59b21630301ba1b1d3feee18.png)

[这里](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)有一个更复杂的解释

# c# - 无法将列元素设置为超链接

> ID：12005336
> 
> 赞同：0
> 
> 时间：2012-08-17T11:57:14.587
> 
> 标签：c#, asp.net, gridview

我正在尝试将第一列元素设置为重定向到另一个页面的超链接。但无论我尝试什么，它似乎都不起作用。

```
reportTable.Rows[i].Cells[1].Text = report.reportId.ToString();
                TableCell tCell = new TableCell();

                tCell.Controls.Add(new LiteralControl(" report.reportId.ToString      ()"));
                // Create Hyperlink Web Server control and add to cell
                System.Web.UI.WebControls.HyperLink h = new HyperLink();
                h.Text = reportTable.Rows[i].Cells[1].Text = report.reportId.ToString();
                h.NavigateUrl = "~/manage.aspx";
                tCell.Controls.Add(h);

                reportTable.Rows[i].Cells[2].Text = bench.mechId;
                reportTable.Rows[i].Cells[3].Text = bench.elecId;
                reportTable.Rows[i].Cells[4].Text = bench.name; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:01:38.913

asp.net Grid 和数据控件非常适合数据绑定。

他们还提供可以定制的项目模板，包括链接、下拉列表等。

不要通过手动创建所有控件来填充您的网格。这完全违背了使用网格的目的。

例如：

```
 <asp:GridView ID="ReportsGridView" 
  DataSourceID="ReportsDataSource"
  AllowPaging="true" 
  AutoGenerateColumns="false" 
  runat="server">
  <Columns>
    <asp:TemplateField>
      <ItemTemplate>
        <asp:LinkButton runat="server"
          ID="RedirectButton"
          CommandName="Manage"
          PostBackUrl="~/manage.aspx"
          Text="Manage" />
      </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField DataField="Name" 
      HeaderText="Report Name"/> 
  </Columns>
</asp:GridView> 
```

# php - 从 php 中的对象数组中删除对象？

> ID：12005343
> 
> 赞同：0
> 
> 时间：2012-08-17T11:57:40.143
> 
> 标签：php

例如，假设我有一个名为 $list 的对象数组，如下所示：

```
<(stdClass)#16 (3) {
  ["1"]=>
  <(8) "50504496"
  ["2"]=>
  <(8) "12435374"
  ["3"]=>
  <(8) "12436374" 
```

我在对象数组上做一个 foreach 并删除它们，如果它们存在于数据库中，即

```
 foreach($list as $l){

    //do the query

    if( it exists){
      //remove from objects: this is where i need help!!
      }
   } 
```

我有数据库逻辑，我只是​​想知道如何删除对象，我在想也许我应该创建一个新对象并将它们添加到他们身上。谢谢 }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:00:42.987

用途：未设置

```
foreach($list as $key => $obj){
  if( exists .. ) {
      unset($list[$key]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:01:29.643

运行您的查询，如果它返回`>0`行数，那么您有一个结果，用于`unset($object->$var)`取消设置变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:04:25.300

试试看：

```
 foreach($list as $li)
    {
        if($li)
        {
            //copy into another array.
        }
    } 
```

我想它可能很简单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:37:50.197

试试看：$i=0;

```
 foreach($list as $li)
  {
      if($li)
      {
          $b[i] = $li;
          $i++;
      }
   } 
```

数组 '$b' 将保存 $list 中不为空的值

# unix - Solaris 出错 - ld：致命：库 -luutil：未找到

> ID：12005354
> 
> 赞同：0
> 
> 时间：2012-08-17T11:58:25.467
> 
> 标签：unix, gcc, compiler-errors, solaris, zfs

大家好，希望你们中的一些solaris向导能够为我指明正确的方向......

背景：我正在编译一个使用一些 zfs CLI 代码的程序。（在这里找到：[https](https://github.com/illumos/illumos-gate/tree/master/usr/src/cmd/zfs) ://github.com/illumos/illumos-gate/tree/master/usr/src/cmd/zfs ）

问题： `libuutil.so.1`存在`/usr/lib`但如果我尝试像这样编译......

> $ gcc -lzfs -L/usr/lib -luutil -lnvpair
> 
> ld：致命：库-luutil：未找到

任何人都可以建议修复吗？还是找不到lib的原因？

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:52:14.167

您需要链接到 libuutil.so 库。正如 Ben van Gompel 所指出的帖子和这篇帖子中所解释的那样：
[https](https://blogs.oracle.com/mandalika/entry/quick_fix_to_the_linker)
://blogs.oracle.com/mandalika/entry/quick_fix_to_the_linker 您需要这样做：
`ln -s /usr/lib/libuutil.so.1 /usr/lib/libuutil.so`
这是因为 ld 仅查找以 .所以，不是数量。这是一种简单的机制，可以让编译过程使用一个库的多个版本（版本由末尾的数字指定）。

# mercurial - 如何在远程托管环境中使用主存储库和子存储库维护稳定/默认配置？

> ID：12005368
> 
> 赞同：1
> 
> 时间：2012-08-17T11:59:47.460
> 
> 标签：mercurial, bitbucket, subrepos, kiln

我有一个应用程序“myapp”，它使用与其他应用程序“common”和“common-www”通用的两个模块。

这些在主存储库中排列为[薄壳](https://www.mercurial-scm.org/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)

```
myapp-master
    myapp
    common
    common-www 
```

每个子存储库都设置为具有“生产”和“主干”存储库的[稳定/默认](http://stevelosh.com/blog/2010/05/mercurial-workflows-stable-default/)配置。

稳定（“生产”）上的瘦壳主控的 .hgsub 文件是：

```
myapp = https://myhostingprovider/repos/myapp/grp/production
common = https://myhostingprovider/repos/common/grp/production
common-www = https://myhostingprovider/repos/common-www/grp/production 
```

主存储库本身位于：

```
https://myhostingprovider/repos/myapp/master/production 
```

这很棒——我有一个主存储库，在应用程序和子模块中具有一致的版本控制。

问题在于能够维护主存储库的稳定/默认视图，因为 .hgsub 文件需要指向不同的存储库：

```
myapp = https://myhostingprovider/repos/myapp/grp/trunk
common = https://myhostingprovider/repos/common/grp/trunk
common-www = https://myhostingprovider/repos/common-www/grp/trunk 
```

由于我必须在 .hgsub 文件中放置绝对路径，因此我最终得到了两个完全独立的瘦壳主存储库——一个用于开发，一个用于生产——并且无法在发布周期内将更改从开发推送到生产。

这种用于远程托管的主存储库方法是共享库的典型方法吗？您能否推荐另一种工作方式（关于 hgsub 路径是绝对路径的远程托管）？

任何想法非常感谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:15:46.297

我正在考虑的另一个选择是忽略[关于瘦壳存储库的建议，](https://www.mercurial-scm.org/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)并为每个从主项目**稳定存储库直接引用的依赖模块提供****默认**URL 。

 ****myapp（“稳定”存储库）**

```
myapp (stable)
    contrib
        common (default)
        common-www (default)
        module x (default)
        module y (default)
        ...
    src
        myapp-specific source (stable version) 
```

**myapp（“默认”存储库）**

```
myapp (default)
    contrib
        common (default)
        common-www (default)
        module x (default)
        module y (default)
        ...
    src
        myapp-specific source (default version) 
```

所以 - 这些将是直接相关的存储库，我们可以在开发和生产之间推/拉。

显然存在一个问题，即“稳定”应用程序具有指向“默认”存储库的子存储库。但是，由于主存储库不会自动将子存储库更新到最新版本，因此可以手动处理。在对“common”的稳定版本进行更新之后，子存储库将手动更新为正确的修订版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T02:40:35.937

1）您的设置完全可以按原样使用。当您想要合并开发和生产之间的代码更改时，您可以单独合并受影响的子存储库，因此从主干到 myapp 的生产。而且很常见。和常见的 www。这种方法技术含量低，并且合并是在普通回购之间进行的，所以直截了当 Mercurial。

这两个主存储库仍然在开发/生产分支中的应用程序和模块之间提供一致的版本控制，但不直接用于合并。

我自己使用这种方法。你做了三个合并而不是一个超级合并，但好处是每个合并都易于执行和理解。

2) .hgsub 引用不必是绝对的，因为您使用的是 repo 托管。事实上，对 shell 主存储库的建议是所有 hgsub 引用都是微不足道的，比如 foo=foo。

[https://www.mercurial-scm.org/wiki/Subrepository#Use_.27trivial.27_subrepo_paths_where_possible](https://www.mercurial-scm.org/wiki/Subrepository#Use_.27trivial.27_subrepo_paths_where_possible)

相对引用始终相对于主存储库，因此琐碎的引用要求远程服务器上的布局与本地沙坑上的布局相匹配。

例如，您可以在服务器上：

```
myapp-production-master
    myapp
    common
    common-www
myapp-trunk-master
    myapp
    common
    common-www 
```

3) 作为替代方案，我使用稍微不同的布局，这会导致非平凡的 .hgsub 引用，但可以轻松地在主项目之间混合和匹配子存储库。

在服务器上，我按分支对事物进行分组。创建一个新分支实际上只是复制文件夹。我在源代码库旁边有（多个）主项目。例如，在服务器上，生产分支文件夹可能如下所示：

```
production
    myapp
    common
    common-www
    specific-mac
    specific-win
    myapp-mac-master
    myapp-win-master 
```

myapp-mac-master 的 .hgsub 看起来像

```
myapp = ../myapp
common = ../common
common-www = ../common-www
specific-mac = ../specific-mac 
```

当我克隆出 production/myapp-mac-master 时，我进入了本地磁盘：

```
myapp-mac-master
    myapp
    common
    common-www
    specific-mac 
```**

# c - 是否所有 C 编译器都严格遵循运算符优先顺序

> ID：12005369
> 
> 赞同：0
> 
> 时间：2012-08-17T11:59:50.940
> 
> 标签：c, compiler-construction, programming-languages, operators

我正在编写 c 程序，它将在世界上大多数 C 编译器（windows、linux、solaris、mac、aix、hpux、vxworks（arm、ppc、mips...）、windriver linux 等编译器中编译。 )

如果我根据C标准[运算符优先级编写程序会好吗](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:02:31.380

是的，会好的。

但是，如果有疑问，请使用括号！

```
int a = 2 * 3 / 4;   /* 0 or 1 ? */
int b = (2 * 3) / 4; /* definitely 1 */
int c = 2 * (3 / 4); /* definitely 0 */ 
```

有多余的括号比错误的结果要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:59:56.217

是的。

一般来说，语言几乎从不保留未指定的解析，因为根据规范进行解析对于语言设计者来说相当容易，并且解析不会影响结果程序的性能。

# php - javascript中的json解码

> ID：12005370
> 
> 赞同：0
> 
> 时间：2012-08-17T11:59:54.703
> 
> 标签：php, arrays, json

我已经在 json 对象中编码了我需要的数据，但我想将 json 对象解码为 javscript 数组，我的 json 编码对象是：

```
{"product_id":"62","product_quantity":"65"} 
```

但是我想在我的 java 脚本中使用这个 json 并希望它可用于 java 脚本数组

所以如果我这样做：

```
var arr = new Array()
arr = <?php json_decode('$json_object',TRUE); ?>; 
```

但是，当我检查我的页面源时，我得到 null 即 arr = 我如何将转换为数组的 json 对象分配给 java 脚本数组？进一步如何从 java 脚本数组访问 json 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:02:55.773

`json_decode`返回一个 PHP 数据结构。如果要将其序列化为 JavaScript 数据结构，则必须将其传递`json_encode`（然后实际上`echo`是它返回的字符串）。

请注意，`json_encode`输出的 JavaScript 数据结构可以安全地注入`<script>`HTML 文档中的元素。并非所有 JSON 都可以安全地执行此操作（PHP 添加了额外的转义序列，并将转换纯字符串、数字、空值等（它们本身不是合法的 JSON）。

请注意，`arr`如果您要立即将其他内容分配给`arr`.

另请注意，这`'$json_object'`将为您提供一个以字符开头的字符串`$`，然后是变量的名称。PHP 中的单引号字符串不会被插值。

```
var arr;
arr = <?php echo json_encode(json_decode($json_object,TRUE)); ?>; 
```

另请注意，此 JSON：

```
{"product_id":"62","product_quantity":"65"} 
```

将转换为 PHP*关联*数组或 JavaScript*对象*（**不是**数组）。

所以给定这个PHP：

```
<?php
    $json_object = '{"product_id":"62","product_quantity":"65"}';
?>
<script>
    var arr;
    arr = <?php echo json_encode(json_decode($json_object,TRUE)); ?>;
    alert(arr.product_id);
</script> 
```

你得到这个输出：

```
<script>
    var arr;
    arr = {"product_id":"62","product_quantity":"65"};
    alert(arr.product_id);
</script> 
```

*运行时会发出62*警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:10:59.777

您可以将 JSON 对象推送到 javascript 数组中并遍历数组，选择您需要的适当字段。修复..

```
 var json = {"product_id":"62","product_quantity":"65"}; 
    var array = new Array();
    array.push(json);   
    for(var i = 0; i < array.length; i++){
       console.log(array[i].product_id)
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:11:24.717

好的，开始：

PHP 生成的 json 字符串可以在 Javascript 中作为 Object 使用。如果您将变量声明为以数组开头，则它可能会发生冲突。

无论如何这应该工作：

```
<?php 
$error_fields_structure = array(
     'product_id' => 4531
    ,'main_product_quantity' => 2
);

$json_object = json_encode($error_fields_structure);
?>

<html>
    <head>
        <script>
            var jsonstring = <?php echo (isset($json_object) ? $json_object : 'nothing here'); ?>

            for( var i in jsonstring ){
                alert( i +' == ' +jsonstring[i] );
            }
        </script>
    </head>

    <body>

    </body>
</html> 
```

# javascript - JS文件没有加载第一页加载？

> ID：12005373
> 
> 赞同：0
> 
> 时间：2012-08-17T12:00:06.237
> 
> 标签：javascript, jquery, html, css

在文件 (index.shtml) 上执行脚本包含时，页面不会执行它应该执行的任务（在页面底部显示一个 div）。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="cookiesJs/jquery.cookie.js"></script>
<script src="cookiesJs/c.js"></script> 
```

我必须重新加载页面才能使脚本生效。如何第一次加载脚本？以前从未遇到过这个问题。

出现的脚本：

```
document.write('<style type="text/css">a{text-decoration: none;}#cookieMessage {font-family: Arial, Helvetica, sans-serif;color: #222;background-color: #D1D3D4;padding: 8px;height: auto;position: fixed;width:200px;margin: 0px 0px 0 0;bottom:0px;right:10px;border:#FFF 2px solid;border-bottom:0px;padding: 0px 8px 8px 8px;-moz-border-radius-topleft: 8px;-moz-border-radius-topright: 8px;-webkit-border-top-left-radius: 8px;-webkit-border-top-right-radius: 8px;border-top-right-radius: 8px;border-top-left-radius: 8px;text-align:left;overflow:hidden;z-index:999999;}#cookieMessage h6 {font-size: 14px;text-transform: uppercase;padding: 0px;margin-top: 8px;margin-right: 0px;margin-bottom: 5px;margin-left: 0px;color: #222;}#cookieMessage img {border:0px;}#cookieMessage p {text-align: left;font-size: 11px;padding: 0px;margin-top: 0px;margin-right: 0px;margin-bottom: 2px;margin-left: 0px;color: #222;}#cookieMessage p a {color: #333;}#cookieMessage h6 a {color: #333;text-decoration: none;}#arrow{margin-top: -20px;}</style>');
$(document).ready(function(){
    $("#polup").toggle(function(){
        $("#cookieMessage").animate({height:120},500);
        $("#arrow").animate({height:0},160);
    },function(){
        $("#cookieMessage").animate({height:22},500);
        $("#arrow").animate({height:14},160);
    });
});

var accepted = get_cookie("accepted");
if(accepted == null){
    document.cookie = "accepted=no; path=/"; // initialize the cookie
}

function accept(){
    // when the client clicks accept
    $("#cookieMessage").fadeOut();
    $.cookie("accepted", "yes", {
       expires : 360,           //expires in 10 days
       path    : '/',          //The value of the path attribute of the cookie 
    });
}
function get_cookie ( cookie_name )
// method to retrieve a cookie based upon its name entered
    {
      var results = document.cookie.match ( '(^|;) ?' + cookie_name + '=([^;]*)(;|$)' );

      if ( results )
        return ( unescape ( results[2] ) );
      else
        return null;
    }
var x = get_cookie("consentCookie");

        if((x == null) && (accepted == "no")){
        //if the cookie does not exist it is the users first time on the page
        document.cookie = "consentCookie=no; path=/";
        var policy = '<div id="cookieMessage"><h6>Cookie Policy</h6><p>Our website uses cookies. By using our website and agreeing to this policy, you consent to our use of cookies. <a href="cookie_policy.php">Find out more about cookies.</a></p><p><a href="#" onclick="accept();"><img src="cookiesJs/cookieimg/cookie.gif" width="20" height="20" alt="cookie" style="margin-bottom:-5px;" /> I accept</a></p></div>';
        document.write(policy);
    }else if((x == "no") && (accepted == "no")){
        // if they have visited before but not accepted
        document.write('<div id="cookieMessage">');
        var policy = '<a href="#_" id="polup"><h6>Cookie Policy</h6> <img id="arrow" align="right" src="cookiesJs/cookieimg/arrow.gif" width="18" height="14" alt="arrow" /></a></h6>';
        document.write(policy);
        document.write('<p>Our website uses cookies. By using our website and agreeing to this policy, you consent to our use of cookies.</p><p><a href="cookie_policy.php">Find out more about cookies.</a></p><p><a href="#" onclick="accept();"><img src="cookiesJs/cookieimg/cookie.gif" width="20" height="20" alt="cookie" style="margin-bottom:-5px;" /> I accept</a></p></div>');
        $("#cookieMessage").css("height","20");
    }else{
        //if they  have visited and accepted
        document.write('<div id="cookieMessage" style="display: none"><h6>Cookie Policy</h6></div>');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:19:52.333

真的是脚本没有被执行吗？如果收到警报框，您是否尝试过警报？

在我看来，您的问题可能与在第一页加载时没有 cookie 的事实有关，您在代码中设置了它，但我相信您只能在下次加载页面时才能阅读它。您可以检查 cookie，如果不存在，设置 cookie，以编程方式重新加载并运行其余代码。

# c++ - debian linux c++ 如何制作按键刹车无限循环

> ID：12005374
> 
> 赞同：0
> 
> 时间：2012-08-17T12:00:09.210
> 
> 标签：c++, linux, getchar

当我按下键盘上的“q”键时，我想要一个无限循环中断。我没有意识到的问题：标准 getchar 等待用户输入并按下回车键，从而停止执行循环。

我解决了“输入”问题，但循环仍然停止并等待输入。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <unistd.h>
#include <termios.h>

int getch(void); // Declare of new function

int main (void) { char x;

do 
{ 
   if (x = getch())
      printf ("Got It! \n!); 
   else 
   { 
      delay(2000);
      printf ("Not yet\n!); 
   }

}while x != 'q');

return 0;
}

int getch(void)
{
int ch;
struct termios oldt;
struct termios newt;

tcgetattr(STDIN_FILENO, &oldt);
newt = oldt;
newt.c_lflag &= ~(ICANON | ECHO);
tcsetattr(STDIN_FILENO, TCSANOW, &newt);
ch = getchar();
tcsetattr(STDIN_FILENO, TCSANOW, &oldt);
return ch;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:21:30.610

我必须执行以下操作才能使其正常工作，感谢您的输入！！

```
#include <stdio.h> 
#include <stdlib.h> 
#include <stdint.h> 
#include <unistd.h> 
#include <termios.h> 
#include <fcntl.h>

int getch(void); // Declare of new function 

int main (void) 
{ 

char x; 

do  
{  
x = getch();
        if (x != EOF)
        {
            printf ("\r%s\n", "Got something:");
            printf ("it's %c!",x); //  %c - for character %d - for ascii number   
}else  
   {  
      delay(2000); 
      printf ("Not yet\n!);  
   } 

}while x != 'q'); 

return 0; 
} 

int getch(void)
{
    int ch;
    struct termios oldt;
    struct termios newt;
    long oldf;
    long newf;

    tcgetattr(STDIN_FILENO, &oldt);             /* Store old settings */
    newt = oldt;
    newt.c_lflag &= ~(ICANON | ECHO);           /* Make one change to old settings in new settings */
    tcsetattr(STDIN_FILENO, TCSANOW, &newt);    /* Apply the changes immediatly */

    oldf = fcntl(STDIN_FILENO, F_GETFL, 0);
    newf = oldf | O_NONBLOCK;
    fcntl(STDIN_FILENO, F_SETFL, newf);

    ch = getchar();
    fcntl(STDIN_FILENO, F_SETFL, oldf);
    tcsetattr(STDIN_FILENO, TCSANOW, &oldt);    /* Reapply the old settings */
    return ch;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:11:01.080

您可以从设备中读取它们：

```
#define INPUT_QUEUE "/dev/input/event0"
#define EVENT_LEN 16

void readEventLine(FILE * in, char * data) {    //read input key stream
  int i;
  for(i = 0; i <= 15; i++) {    //each key press will trigger 16 characters of data,    describing the event
    data[i] = (char) fgetc(in);
  }
}

int readKeyPress() {

  FILE * input;
  char data[EVENT_LEN];

  input = fopen(INPUT_QUEUE, "r+");
  readEventLine(input, data);
} 
```

只需调用类似这样的东西，而不是你的 getch。

改编自[http://www.cplusplus.com/forum/unices/8206/](http://www.cplusplus.com/forum/unices/8206/)

# c# - 是否可以在 LocalSystem 帐户下运行控制台应用程序？

> ID：12005378
> 
> 赞同：5
> 
> 时间：2012-08-17T12:00:14.997
> 
> 标签：c#, console-application, impersonation, localsystem

是否可以在 C# 中以编程方式在 LocalSystem 帐户下运行控制台应用程序？

如果是，我该怎么做？

如果不是，为什么不呢？

谢谢

# ruby - 如何在 Ruby 中获取从“a”到“z”的字符代码？

> ID：12005381
> 
> 赞同：0
> 
> 时间：2012-08-17T12:00:19.913
> 
> 标签：ruby, string, character

这就是我目前所拥有的。但是，`?e`显示字符的字符代码而`e`不是变量 e。如何解决？谢谢。

```
('a'..'z').each {|e| puts ?e} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:08:37.177

如果你真的想输出它们：

```
(?a..?z).each { |c| puts c.ord } 
```

如果您只需要 26 个数字的数组。

```
(?a..?z).map(&:ord) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:06:14.067

尝试这个

```
('a'..'z').each {|e| puts e.ord.to_s} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T01:57:17.243

甚至：

```
puts ('a'.ord..'z'.ord).to_a 
```

# ruby - 使用 if 表达式的 Ruby 赋值产生 nil

> ID：12005382
> 
> 赞同：0
> 
> 时间：2012-08-17T12:00:22.660
> 
> 标签：ruby, if-statement, expression, variable-assignment

在 Ruby 中，如果返回非零值，我的函数`func`将返回。我会以某种方式期望返回的值。换句话说，即使它没有执行，它也会获得赋值的值：`nil``myfunction1``func``rc`

```
def func
    rc = myfunction1
    rc = myfunction2 if rc.nil?
end 
```

如果我对此进行增强`func`，那么`func`就像我期望的那样工作：

```
def func
    rc = myfunction1
    rc = myfunction2 if rc.nil?
    rc
end 
```

这是简化版本，您可以自己尝试一下：

```
def func
    rc = 3
    rc = myfunction2 if rc.nil?  # returns nil but rc has value 3
end 
```

这种行为是否有具体原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:02:45.493

让我们逐步完成您的简化示例：

1.  你设置`rc`为3。
2.  在下一行中，您检查 if `rc`is `nil`，它显然不是。
3.  因此不会执行分配，并且由于没有`else`分支，因此表达式的计算结果为`nil`。
4.  由于这是方法中的最后一个表达式，因此`nil`返回。

如果你想`rc`在任何情况下返回，你必须求助于你的第二种形式或像这样编写整个方法：

```
def func
  myfunction1 || myfunction2
end 
```

这显然只有在`false`不是 的可能返回值时才有效`myfunction1`。如果是，您可以这样做：

```
def func
  rc = myfunction1
  rc.nil? ? myfunction2 : rc
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:14:50.937

```
if cond then expr end 
```

如果 cond 为假则返回 nil，如果 cond 为真则返回 expr 的值。

```
if cond then expr_if else expr_else end 
```

如果 cond 为假，将返回 expr_else。

这就是为什么一个人可以做（例如）

```
value = if den != 0 then
         val / den
      else 0
      end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-22T16:40:45.373

在您的第一个定义中`func`，最后一行没有定义的`else`部分`if`，因此它相当于：

```
if rc.nil? then
  rc = function2
else
  nil
end 
```

您可以使用保护子句来实现您想要的结果：

```
def func
  rc = function1
  return rc unless rc.nil?
  function2
end 
```

# sql-server-2008 - 在 SQL Server 中使用单个查询更新两个表

> ID：12005383
> 
> 赞同：1
> 
> 时间：2012-08-17T12:00:23.250
> 
> 标签：sql-server-2008, tsql

我需要更新一些存储在两个表中的信息。要更新其中一个表，必须与另一个表进行 JOIN。我想知道，如果我可以用一个查询来更新两者。一些帖子建议使用触发器。我希望有另一种方法，因为我必须用 C# 来做。我还看到其他帖子说可以使用这样的东西：

```
update pd, pr
set pd.Name = 'Test',
pr.Date = '2012-07-31',
from prDetail pd
left join pr on pd.ID = pr.ID
where pd.Code = '45007'
and pr = '2019'
and pr.Item = '1' 
```

这对我不起作用（它显示此错误：）`Incorrect syntax near ','`。这可以通过某种方式实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:02:01.047

不。

您一次只能更新一个表。

将您的更新分成两个更新查询，如有必要，将它们包装在一个事务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:12:32.517

是的，正如@podiluska 所说，您一次只能更新一张表。您还可以使用事务来通过单个事务执行两个查询。

否则，如果您的表/关系具有依赖关系（外键和主键）关系，那么您可以使用`cascade`选项。

别的，

您可以使用`Trigger`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:21:16.343

不，一次更新两个是不可能的，但您可以考虑将其包装在一个存储过程中并调用它。如果可能，您应该尽量避免触发此类事件。

# html - IdexedDB - Firefox 14 和 Chrome 21

> ID：12005391
> 
> 赞同：0
> 
> 时间：2012-08-17T12:00:56.610
> 
> 标签：html, indexeddb

我一直在使用[此](https://developer.mozilla.org/en-US/docs/IndexedDB)代码来使用 indexedDB api。在 FF 14 中运行良好。但在 Chrome (v.21) 中，我遇到了一些错误。目前我的 createObjectStore 命令有问题：

```
db.createObjectStore(objectStoreName, { keyPath: 'id', autoIncrement: true }); 
```

是因为 Chrome 使用的规格与 FF 不同吗？有些方法仍然不同吗？

谢谢

```
this.init = function (successCallback) {

        var openRequest = indexedDB.open(dbName);

        openRequest.onupgradeneeded = function (e) {

            db = e.target.result;

            if (!db.objectStoreNames.contains(objectStoreName)) {
                console.log('Create objectstore');
                db.createObjectStore(objectStoreName, { keyPath: 'id', autoIncrement: true });
            }

            successCallback(e);

        };

        openRequest.onsuccess = function (e) {

            db = e.target.result;

            db.onerror = function (event) {
                console.log("Database error: " + event.target.errorCode);
            };

            successCallback(e);

        };

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:25:45.767

你得到什么错误？

FF和chrome的区别在于FF使用onupgradeneeded回调，chrome使用setVersion方法改变数据库结构

```
var req = indexedDB.open("name");
req.onsuccess = function(e){
    var db = req.result.db;
    var upgradereq = db.setVersion("1")
    upgradereq.onsuccess = function(event){
       upgradereq.result.db.createObjectStore("objectStoreName");
    }
} 
```

# python - 用 pyside 初始化一个空白的 QImage

> ID：12005394
> 
> 赞同：1
> 
> 时间：2012-08-17T12:01:08.280
> 
> 标签：python, qt, pyside

我试图在 pyside gui 中初始化一个空白 QImage 小部件，但它抛出错误，我无法从文档中弄清楚我应该做什么，有谁知道我需要做什么步骤才能让这个 QImage 小部件工作

```
import sys
from PySide import QtGui, QtCore
import os

class ms_ImageViewer(QtGui.QWidget):

    def __init__(self):
        super(ms_ImageViewer, self).__init__()
        self.initUI()

    def initUI(self):               

        main_layout = QtGui.QVBoxLayout()
        self.setLayout(main_layout)

        self.image = QtGui.QImage(50, 50, QtGui.QImage.Format_Indexed8)
        self.image.fill(QtGui.qRgb(50,50,50))
        button = QtGui.QPushButton('select file', self)
        main_layout.addWidget(button)
        main_layout.addWidget(self.image)

        self.setGeometry(300, 300, 600, 30)
        self.setWindowTitle('ms_image_viewer')    
        self.show()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = ms_ImageViewer()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

这是我得到的错误：

```
 /projects/Mayaseed/src/tools/ms_image_viewer.py 
    Traceback (most recent call last):
      File "/projects/Mayaseed/src/tools/ms_image_viewer.py", line 34, in <module>
        main()
      File "/projects/Mayaseed/src/tools/ms_image_viewer.py", line 29, in main
        ex = ms_ImageViewer()
      File "/projects/Mayaseed/src/tools/ms_image_viewer.py", line 9, in __init__
        self.initUI()
      File "/projects/Mayaseed/src/tools/ms_image_viewer.py", line 20, in initUI
        main_layout.addWidget(self.image)
    TypeError: 'PySide.QtGui.QBoxLayout.addWidget' called with wrong argument types:
      PySide.QtGui.QBoxLayout.addWidget(PySide.QtGui.QImage)
    Supported signatures:
      PySide.QtGui.QBoxLayout.addWidget(PySide.QtGui.QWidget, int = 0, PySide.QtCore.Qt.Alignment = 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:10:11.160

编辑：给出这个答案时，问题与现在不同......

fill 需要一个 int 参数而不是 QColor 元素。

利用        

```
self.image.fill(qRgb(50,50,50)) 
```

代替

```
self.image.fill(QtGui.QColor(50,50,50)) 
```

我希望这在 pyside 上的工作方式与在 c++ 中的工作方式完全相同。这是文档：[http ://doc.qt.nokia.com/4.7-snapshot/qcolor.html#qRgb](http://doc.qt.nokia.com/4.7-snapshot/qcolor.html#qRgb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:08:17.320

主要问题是 QImage 不是小部件，因此无法将其添加到布局中。下面是使用红色背景初始化 Qimage 并将其放置在 QLabel 小部件中的代码。我还将图像格式更改为 ARGB32，以便使用 4 x 8 位的 Alpha、红色、绿色和蓝色值对图像进行格式化。

```
import sys
from PySide import QtGui, QtCore
import os

class ms_ImageViewer(QtGui.QWidget):

    def __init__(self):
        super(ms_ImageViewer, self).__init__()
        self.initUI()

    def initUI(self):               

        main_layout = QtGui.QVBoxLayout()
        self.setLayout(main_layout)

        self.image = QtGui.QImage(100, 150, QtGui.QImage.Format_ARGB32)
        intial_color = QtGui.qRgb(189, 149, 39)
        self.image.fill(QtGui.qRgb(255,0,0))
        # self.image.load('/projects/test.png')
        image_label = QtGui.QLabel(" ")
        image_label.setPixmap(QtGui.QPixmap.fromImage(self.image))
        button = QtGui.QPushButton('select file', self)
        main_layout.addWidget(button)
        main_layout.addWidget(image_label)

        self.setGeometry(300, 300, 600, 30)
        self.setWindowTitle('ms_image_viewer')    
        self.show()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = ms_ImageViewer()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

# javascript - jQuery 网站预加载器，例如 Tuts+（示例网站）

> ID：12005398
> 
> 赞同：1
> 
> 时间：2012-08-17T12:01:11.250
> 
> 标签：javascript, jquery, html, css, preloader

[我试图找到一个 jQuery 插件，它可以实现与本网站示例](http://hub.tutsplus.com)类似的预加载效果，经过深入研究，我找不到任何有用的东西。任何人都可以建议一个可以实现这一目标的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:52:28.137

转到您的[示例](http://hub.tutsplus.com/)页面并使用 firebug 检查它...如果您`class="ready"`从 body 标记中删除，那么您将看到覆盖在整个页面上的实际 div。

所以它就是一个具有透明度的 div 和一个位于中心的具有非常高的 z-index 的图像。

当所有内容都加载到下面时，您会触发 div 的隐藏......并且页面就在那里。

您可以在 dom 准备好或超时等后触发隐藏...

# java - 如何不在检票口中渲染组件

> ID：12005400
> 
> 赞同：1
> 
> 时间：2012-08-17T12:01:27.240
> 
> 标签：java, wicket

我在 html 中有播放器表：[table]

当它为空时，如何隐藏或不呈现此表？我尝试在 java 代码中添加 if 条件，并且仅当存在某些值时才将此表添加到页面中，但随后 wicket 抛出异常，他无法找到具有此 ID 的组件。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:08:39.350

如果没有可用的日期，您可以覆盖 isVisible() 函数并返回 false。但是，这个函数会被调用几次，所以如果确定数据是否可用（比如访问数据库），你可以调用 setVisible(boolean) 函数。

如果没有可用数据，另一种选择是用 EmptyPanel 交换中继器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:09:13.623

它抛出异常是因为 html 标记期望组件存在。即你必须添加它。

如果要隐藏整个面板，则使用 E​​mptyPanel 将隐藏整个面板。

如果面板中只有一个组件，您也可以使用 component.setVisible(false) 隐藏它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T12:05:14.157

您可以使用已在 java 中使用的相同条件，但不是不将表格添加到页面，而是使用 table.setVisible(false)。

另一种方法是覆盖 setVisible() 和 isVisible() 方法，但我认为不建议这样做（参见[此处](http://www.devproof.org/wicket_best_practice)）

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T18:42:47.787

正如其他用户指出的那样，不建议覆盖 isVisible() ，因为在渲染组件之前会多次调用此函数。您应该改写 onConfigure() 并将决定您的表是否必须可见的代码放入其中。onConfigure() 每个请求只调用一次。

# algorithm - 哈希表中的开放寻址是否仅对搜索有用？元素首先是如何进入 HashTable 的？

> ID：12005405
> 
> 赞同：0
> 
> 时间：2012-08-17T12:01:44.283
> 
> 标签：algorithm, data-structures, hashtable, hash

来自[关于开放寻址的维基百科链接](http://en.wikipedia.org/wiki/Open_addressing)：

> 开放寻址或封闭哈希是哈希表中解决冲突的一种方法。使用这种方法，通过探测或搜索数组中的替代位置（探测序列）来解决哈希冲突，直到找到目标记录或找到未使用的数组槽，这表明在桌子。[1](http://en.wikipedia.org/wiki/Open_addressing) .

我对此有两个问题。

1.  使用花哨的术语*开放寻址*和*封闭散列*的直觉是什么？
2.  这种开放寻址方法是否仅对搜索有用，也对插入有用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-29T20:35:24.237

我参加聚会有点晚了，但是术语封闭哈希是指项目是“封闭”的，即包含在哈希表数组中，它们不像链接那样存储在外部（也容易混淆地称为开放哈希） .

如果您阅读 CLRS 的第 270 页，则将开放寻址与插入以及搜索一起使用，它在那里进行了描述。

# ruby-on-rails - Rails.cache.clear 某些键名？

> ID：12005412
> 
> 赞同：77
> 
> 时间：2012-08-17T12:02:05.290
> 
> 标签：ruby-on-rails, caching, memcached, dalli

是否有可能以某种方式运行`Rails.cache.clear`并且只清除具有特定名称/字符串的键？

我不想清除整个缓存...只是`blog/post`名称中带有字符串的键（即`blog/post/1`, `blog/post/2`）。

我正在使用[dalli](https://github.com/mperham/dalli)和 memcached 作为我的缓存并运行 Rails 3.0.6。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-08-17T12:23:03.987

这就是您可以写入缓存的方式 -

```
Rails.cache.write('key', 'value', :time_to_idle => 60.seconds, :timeToLive => 600.seconds) 
```

为了从缓存中删除，您可以使用`delete`操作 -

```
Rails.cache.delete('key') 
```

删除多个键 -

```
Rails.cache.delete_if {|k, v| k =~ 'key' } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-17T15:16:51.480

回答我自己的问题......似乎鉴于我正在使用 memcached，我实际上不能使用`delete_if`或者`delete_matched`因为 memcached 不支持按模式（[1](https://github.com/mperham/dalli/issues/40#issuecomment-530318)）枚举或查询键。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-14T08:17:36.730

您可以使用[https://github.com/Phobos98/dalli-delete-matched](https://github.com/Phobos98/dalli-delete-matched) gem，它`delete_matched`为带有 memcached 的 dalli 存储添加了一个简单的方法实现。

# iphone - UIView 与许多 TableView

> ID：12005415
> 
> 赞同：0
> 
> 时间：2012-08-17T12:02:15.837
> 
> 标签：iphone, objective-c, ios

我有带 Button_1 的 ViewController_1：

```
@interface ViewController_1 : UIViewController  <UITableViewDataSource, UITableViewDelegate>
{ 
  IBOutlet UIView *secondView;
  UITableView *myTable;
}

- (IBAction)buttonPressed:(id)sender; 
```

所有 tableView 委托方法都在 ViewController_1.m 中实现

在 ViewController_1.xib 我有 2 个视图（ViewController_1 和 secondView 的视图）： ![在此处输入图像描述](../Images/06f1aad4203fbf7e9acc817192703f97.png)

当我触摸 Button_1 时，我将 secondView 添加为 myTable 的子视图：

```
- (IBAction)buttonPressed:(id)sender
   {
     [self.view addSubview:secondView];
   } 
```

如何实现带有表的 secondView 及其方法（DataSource）已在单独的类中实现？因为如果我有，例如，10 个按钮？？？那么在 ViewController_1 中就会有很多代码！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:40:46.677

我建议您采取`SecondViewController`而不是查看。当你点击按钮然后导航到那个`SecondViewController`. 就像你说的那样，有几个按钮反过来导致隐藏取消隐藏其他几个视图。那么你将很难管理。是的，会有很多很多的编码和标志。

如果你喜欢添加视图，那么你可以保留`SecondViewController`as `UIViewController`。在那里执行所有表数据源/委托方法并

同时将其添加到 ViewController_1

试试下面的代码

```
- (IBAction)buttonPressed:(id)sender
{
   [self.view addSubview:secondViewController.view];
} 
```

# java - Java将int转换为十六进制并再次转换回来

> ID：12005424
> 
> 赞同：85
> 
> 时间：2012-08-17T12:02:43.497
> 
> 标签：java, string, hex

我有以下代码...

```
int Val=-32768;
String Hex=Integer.toHexString(Val); 
```

这相当于`ffff8000`

```
int FirstAttempt=Integer.parseInt(Hex,16); // Error "Invalid Int"
int SecondAttempt=Integer.decode("0x"+Hex);  // Error "Invalid Int" 
```

因此，最初，它将值 -32768 转换为十六进制字符串 ffff8000，但随后无法将十六进制字符串转换回整数。

它按`.Net`我的预期工作，并且`returns -32768`.

我知道我可以编写自己的小方法来自己转换它，但我只是想知道我是否遗漏了什么，或者这是否真的是一个错误？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-17T12:12:00.473

```
int val = -32768;
String hex = Integer.toHexString(val);

int parsedResult = (int) Long.parseLong(hex, 16);
System.out.println(parsedResult); 
```

这就是你可以做到的。

它不能按您的方式工作的原因：`Integer.parseInt`采用带符号的 int，而`toHexString`产生无符号的结果。因此，如果您插入高于 的`0x7FFFFFF`内容，则会自动抛出错误。如果您将其解析为`long`，它仍将被签名。但是当你将它转换回 int 时，它会溢出到正确的值。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-08-17T12:12:51.487

它溢出，因为数字是负数。

试试这个，它会工作：

```
int n = (int) Long.parseLong("ffff8000", 16); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-08-17T12:10:26.963

*   `int`到十六进制：

    ```
    Integer.toHexString(intValue); 
    ```

*   十六进制到`int`：

    ```
    Integer.valueOf(hexString, 16).intValue(); 
    ```

您可能还想使用`long`代替`int`（如果值不符合`int`界限）：

*   十六进制到`long`：

    ```
    Long.valueOf(hexString, 16).longValue() 
    ```

*   `long`到十六进制

    ```
    Long.toHexString(longValue) 
    ```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-03-04T19:09:38.227

值得一提的是，Java 8 有这些方法，`Integer.parseUnsignedInt`并且`Long.parseUnsignedLong`可以满足您的需求，具体来说：

`Integer.parseUnsignedInt("ffff8000",16) == -32768`

这个名字有点令人困惑，因为它从十六进制字符串中解析一个有符号整数，但它确实有效。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-17T12:16:02.057

尝试使用 BigInteger 类，它可以工作。

```
int Val=-32768;
String Hex=Integer.toHexString(Val);

//int FirstAttempt=Integer.parseInt(Hex,16); // Error "Invalid Int"
//int SecondAttempt=Integer.decode("0x"+Hex);  // Error "Invalid Int"
BigInteger i = new BigInteger(Hex,16);
System.out.println(i.intValue()); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-06-06T11:44:11.123

由于 Integer.toHexString(byte/integer) 在您尝试转换有符号字节（如 UTF-16 解码字符）时不起作用，因此您必须使用：

```
Integer.toString(byte/integer, 16); 
```

或者

```
String.format("%02X", byte/integer); 
```

反向你可以使用

```
Integer.parseInt(hexString, 16); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-17T12:16:15.807

Java的parseInt方法实际上是一堆吃“假”十六进制的代码：如果你想翻译-32768，你应该把绝对值转换成十六进制，然后在字符串前面加上'-'。

有一个 Integer.java 文件示例：

```
public static int parseInt(String s, int radix) 
```

描述非常明确：

```
* Parses the string argument as a signed integer in the radix 
* specified by the second argument. The characters in the string 
...
...
* parseInt("0", 10) returns 0
* parseInt("473", 10) returns 473
* parseInt("-0", 10) returns 0
* parseInt("-FF", 16) returns -255 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-09T17:25:24.770

使用`Integer.toHexString(...)`是一个很好的答案。不过个人比较喜欢用`String.format(...)`。

试试这个样本作为测试。

```
byte[] values = new byte[64];
Arrays.fill(values, (byte)8);  //Fills array with 8 just for test
String valuesStr = "";
for(int i = 0; i < values.length; i++)
    valuesStr += String.format("0x%02x", values[i] & 0xff) + " ";
valuesStr.trim(); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-02-23T15:13:01.423

下面的代码可以工作：

```
int a=-32768;
String a1=Integer.toHexString(a);
int parsedResult=(int)Long.parseLong(a1,16);
System.out.println("Parsed Value is " +parsedResult); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-17T13:01:20.913

呵呵，好奇。我认为这是一个“故意的错误”，可以这么说。

根本原因是 Integer 类的编写方式。基本上， parseInt 针对正数进行了“优化”。当它解析字符串时，它会累积地构建结果，但会被否定。然后它翻转最终结果的符号。

例子：

66 = 0x42

解析为：

```
4*(-1) = -4
-4 * 16 = -64 (hex 4 parsed)

-64 - 2 = -66 (hex 2 parsed)

return -66 * (-1) = 66 
```

现在，让我们看一下您的示例 FFFF8000

```
16*(-1) = -16 (first F parsed)
-16*16 = -256 

-256 - 16 = -272 (second F parsed)
-272 * 16 = -4352 

-4352 - 16 = -4368 (third F parsed)
-4352 * 16 = -69888

-69888 - 16 = -69904 (forth F parsed)
-69904 * 16 = -1118464 

-1118464 - 8 = -1118472 (8 parsed)
-1118464 * 16 = -17895552 

-17895552 - 0 = -17895552 (first 0 parsed)
Here it blows up since -17895552 < -Integer.MAX_VALUE / 16 (-134217728). 
Attempting to execute the next logical step in the chain (-17895552 * 16)
would cause an integer overflow error. 
```

编辑（添加）：为了使 parseInt() 能够“一致地”为 -Integer.MAX_VALUE <= n <= Integer.MAX_VALUE 工作，他们必须在达到 -Integer.MAX_VALUE 时实现逻辑“旋转”累积结果，从整数范围的最大值开始并从那里继续向下。他们为什么不这样做，必须先询问 Josh Bloch 或最初实施它的人。这可能只是一个优化。

然而，

```
Hex=Integer.toHexString(Integer.MAX_VALUE);
System.out.println(Hex);
System.out.println(Integer.parseInt(Hex.toUpperCase(), 16)); 
```

工作得很好，正是因为这个原因。在 Integer 的源代码中，您可以找到此评论。

```
// Accumulating negatively avoids surprises near MAX_VALUE 
```

# c# - SelectMany Count 生成显式 sql 语句

> ID：12005431
> 
> 赞同：0
> 
> 时间：2012-08-17T12:03:05.657
> 
> 标签：c#, database, linq, entity-framework

我有这样的结构：

```
public class Tag
{
        public int TagId { get; set; }
        public virtual ICollection<Vacancy> Vacancies { get; set; }
        // ...
}

public class Vacancy
{
        public int VacancyId { get; set; }
        public virtual ICollection<Tag> Tags { get; set; }
        // ...
} 
```

这些实体通过 EF / Code First 方法映射到 MS SQL。

之后，我以某种方式从上下文（基于用户查询）中获取标签列表：

```
List<Tag> userSelectedTags = ...; 
```

我想计算这些标签包含多少空缺：

```
int count = userSelectedTags.SelectMany(t => t.Vacancies).Count(); 
```

它工作正常，但似乎这个查询没有得到很好的优化。当我遇到探查器时，我得到了这个：

```
exec sp_executesql N'SELECT 
[Extent2].[VacancyId] AS [VacancyId], 
[Extent2].[Title] AS [Title], 
[Extent2].[Salary] AS [Salary], 

...props... etc...

FROM  [dbo].[VacancyTagVacancies] AS [Extent1]
INNER JOIN [dbo].[Vacancies] AS [Extent2] ON [Extent1].[Vacancy_VacancyId] = [Extent2].[VacancyId]
WHERE [Extent1].[VacancyTag_VacancyTagId] = @EntityKeyValue1',N'@EntityKeyValue1 int',@EntityKeyValue1=1 
```

换句话说，它不使用 COUNT sql 关键字，而只是返回整个集合并在 SQL Server 之外进行计算。

如何优化 LINQ 查询以便在此处使用 COUNT 而不是全选？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:30:32.307

您`userSelectedTags`不是查询，这意味着`t.Vacancies`成为对客户端属性的引用，在枚举时会检索`Vacancies`该特定`Tag`. 然后`Count`在客户端运行。

您需要从服务器端开始：

```
int count = (
    from tag in context.Tags
    where userSelectedTags.Contains(tag)
    from v in tag.Vacancies
    select v).Count(); 
```

如果这还不起作用，您*可能*需要制作 a`userSelectedTagIds`而不是。`userSelectedTags`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:14:28.203

一种方法是像这样直接执行 SQL：

```
string nativeSQLQuery = "SELECT count(*) FROM <tables join>";

var queryResult = ctx.ExecuteStoreQuery<int>(nativeSQLQuery); 
```

# uitableview - 不希望最后一个 UITableViewCell 的高度用作后续空白单元格的高度

> ID：12005432
> 
> 赞同：1
> 
> 时间：2012-08-17T12:03:06.933
> 
> 标签：uitableview, height

我有一个表格视图。当一个单元格被点击时，它会动画它的扩展以显示其他选项。实际上，[这就是我所做的](https://github.com/pachun/Nested-Table)。问题是，如果点击最后一个单元格，则所有后续（空白）单元格都采用最后一个单元格的高度。我不希望这种情况发生。这很丑陋，坦率地说没有意义。我尝试在 heightForRowAtIndexPath 中添加条件。这不起作用。我不喜欢 hack，但是如果你发现一些具体的东西，比如在最后创建一个不可见的单元格之类的东西，请告诉我。我目前正在寻找，

# sql - 是否有一个与 FK 也是 PK 的 1 对 1 关系的表？

> ID：12005435
> 
> 赞同：0
> 
> 时间：2012-08-17T12:03:40.160
> 
> 标签：sql, database-design, foreign-keys, foreign-key-relationship

我有一张名为 Player 的桌子

*   玩家ID (PK)
*   更多专栏

我想创建另一个与名为 PlayerExtraInfo 的 Player具有**1 对 1关系的表以包含一些列。**所以我有几个选择：

1.  无需创建新表，而是将 PlayerExtraInfo 列添加到 Player 表

2.  创建 PlayerExtraInfo 表并在 Player 表中有一个 FK。

    **玩家**表

    *   玩家ID (PK)
    *   更多专栏
    *   PlayerExtraInfoID (FK)

    **PlayerExtraInfo**表

    *   PlayerExtraInfo (PK)
    *   更多专栏
3.  相反：PlayerExtraInfo 包含一个 FK 到 Player 表。为了确保关系保持 1 对 1，我添加了一个独特的约束。

    **玩家**表

    *   玩家ID (PK)
    *   更多专栏

    **PlayerExtraInfo**表

    *   PlayerExtraInfo (PK)
    *   更多专栏
    *   PlayerID（FK，唯一）
4.  类似于选项 3，但将 PK 和 FK 合二为一。在这种情况下，我的外键也成为主键：

    **玩家**表

    *   玩家ID (PK)
    *   更多专栏

    **PlayerExtraInfo**表

    *   玩家ID（PK，FK）
    *   更多专栏

我知道选项 1、2 是正确的，但由于性能问题，我是选项 3 或 4 的选项。考虑到这 3 和 4 选项，我对选项 4 产生了一些疑问：所以我的问题是：

*   **选项 3 和 4 是否正确？**
*   **选项 4 是否破坏任何正常形式？**
*   **还有其他我没有想到的选择吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:06:01.050

当用另一个表扩展一个表时，使用主键作为外键绝对没问题（并且也推荐）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:27:38.587

虽然选项 2、3、4 是正确的，但我认为选项 1 是能够提供最佳性能的选项。即使使用聚集索引，额外的连接也是额外的连接。此外，外键会降低目标表的性能（我承认大量外键会降低它的性能，而不是一个外键）。

Except the case where the extended table will have but a fraction of the main table's records, or the case where you would like the 2 tables on different partitions, I cannot think of a reason to have that table split into peaces.

# python - Python - 设置 .pop() 行为

> ID：12005436
> 
> 赞同：2
> 
> 时间：2012-08-17T12:03:41.503
> 
> 标签：python, python-2.7

这是我在 Python 集中注意到的奇怪之处。我读到集合中没有顺序，但它确实从 0 到 79 以及后来从 79 到 127 弹出较低的元素。它不再弹出较低的元素。只有在 128 进入 79 之后才会弹出。为什么会这样？

有没有其他方法可以在 Python 中使用有序数据结构？为什么它是从 0 到 79 而不是从 79 到 127 的最低值？

```
>>s = set()
>>s.add(72)
>> s.add(74)
>> s.add(76)
>> s.pop()
72
>> s.add(79)
>> s.pop()
74
>> s.add(81)
>> s
set([81, 76, 79])
>> s.pop()
76
>> s.add(83)
>> s
set([81, 83, 79])
>> s.add(85)
>> s
set([81, 83, 85, 79])
>> s.pop()
81
>> s
set([83, 85, 79]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:58:43.597

根据字典中元素的插入和删除，存在“一致的”内部排序。请参阅：[http ://docs.python.org/library/stdtypes.html#dict.items](http://docs.python.org/library/stdtypes.html#dict.items)

据我所知，集合使用相同的散列实现，并且很可能具有相同的排序效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:15:40.747

为什么它从 0 到 79 而不是从 79 到 128 弹出最低？
不，排序不是随机的，而是完全任意的。python 集中没有特定的顺序。考虑一下：

```
>>> s.add(14)
>>> s.add(11)
>>> s.add(3)
>>> s.add(13)
>>> s.add(2)

>>> s.pop()
13
>>> s.pop()
14
>>> s.pop()
2
>>> s.pop()
3
>>> s.pop()
11 
```

这不符合您的结论。（这次发生在 14 ）

# facebook - express.static 无法响应 POST 请求

> ID：12005442
> 
> 赞同：2
> 
> 时间：2012-08-17T12:04:23.320
> 
> 标签：facebook, node.js, express, facebook-credits

我有一个新手问题。我有一个 flash facebook 应用程序，它使用 facebook 积分。我使用 express 框架来提供包含 application.swf 的静态 html 文件。

这就是我配置快递的方式：

```
var app = express();

app.configure(function(){
    app.use(express.methodOverride());
    app.use(express.bodyParser());
    app.use(express.logger());
    app.use(app.router);

    // Redirections for default pages
    app.all("/", function(req, res) { res.redirect("/index.html"); });
    app.all("/facebook", function(req, res) { res.redirect("/facebook/index.html"); });

    // Serve static files
    app.all("*", express.static('/my/static/files/directory'));
    app.use(express.errorHandler({
        dumpExceptions: true,
        showStack: true
    }));
});

require('http').createServer(app).listen(80);
require('https').createServer({
    key: fs.readFileSync('./certs/www.app.org/www.app.org.key'),
    cert: fs.readFileSync('./certs/www.app.org/www_app_org.crt'),
    ca: fs.readFileSync('./certs/www.app.org/www_app_org.ca-bundle'),
}, app).listen(443); 
```

我使用这种结构在 http 和 https 请求上为我的应用程序提供服务。当传入的 http 请求类型为 GET 时，它运行良好。

但是，当用户在应用程序中购买商品时，facebook 会向我的应用程序发送 POST 请求。问题是当收到对静态文件目录的 POST 请求时 express 抛出 404 错误。

PS：POST 请求被发送到相同的 url，这对 GET 请求非常有效。

以下是监测结果：

```
node_local:httpserver 88.250.59.159 - - [Fri, 17 Aug 2012 11:51:09 GMT] "POST /facebook/index.html HTTP/1.1" 404 - "-" "Apache-HttpClient/4.1.3 (java 1.5)"

node_local:httpserver 88.250.59.159 - - [Fri, 17 Aug 2012 11:50:59 GMT] "GET /facebook/index.html HTTP/1.1" 200 5892 "-" "Apache-HttpClient/4.1.3 (java 1.5)" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:24:02.700

是否使用静态中间件无关紧要`all`，它会对请求类型执行独立于路由器的检查，以查看它是`POST`还是`HEAD`. 所以，不要在 app.all 中使用它，只需放在 app.use 调用中即可。它应该在应用程序堆栈中，而不是路由器中。

您可以在请求进入静态中间件之前拦截请求，只需在静态**之前**添加另一个中间件，这样就足够了：

```
app.post("/facebook/index.html", function(req, res, next) {
  req.method = "GET";
  next();
}); 
```

我没有对此进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:13:02.487

我从事过这样的项目，首先你必须检查“facebook可以访问你的服务器吗？”。这意味着您的服务器必须可以通过端口 80 或 8080 访问互联网。

# sparql - 使用 SPARQL 从 DBpedia 获取有关足球运动员的数据

> ID：12005449
> 
> 赞同：2
> 
> 时间：2012-08-17T12:04:54.120
> 
> 标签：sparql, dbpedia

我以前从未使用过 DBpedia/SPARQL。

如何进行查询以选择所有（或前 100 名）足球运动员，同时选择他们的出生日期、比赛位置和身高。如果可能的话，我希望结果是 JSON 格式：D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:19:44.470

```
SELECT * WHERE {
  ?player a <http://dbpedia.org/ontology/SoccerPlayer> .
  ?player <http://dbpedia.org/ontology/birthDate> ?birthDate .
  ?player <http://dbpedia.org/ontology/Person/height> ?height .
  ?player <http://dbpedia.org/ontology/position> ?position .
} 
```

选择所有 ?player 的足球运动员，有 ?birthDate 的，有 ?height 的，有 ?position 的，并返回所有结果。我认为这是您需要的查询。至于结果格式，你可以从endpoint中选择，不知道是不是你想要的。

# caching - symfony2 中的缓存

> ID：12005458
> 
> 赞同：2
> 
> 时间：2012-08-17T12:05:22.817
> 
> 标签：caching, symfony

我有一张表 configuration_variables(name,value)。它包含我的 symfony 应用程序的配置变量，例如 reset-password-link-expiration-time。由于这些配置变量很少更改，我想将其缓存在一个临时文件夹中（app/cache 是正确的位置吗？）。

我怎样才能在 symfony2 中做到这一点？

我试过[如何在 Symfony 2 中缓存？](https://stackoverflow.com/questions/8893081/how-to-cache-in-symfony-2). 但我认为它不适合我的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:46:20.960

您可以创建一个缓存预热器[http://blog.servergrove.com/2012/04/18/how-to-create-a-cache-warmer-in-symfony2/](http://blog.servergrove.com/2012/04/18/how-to-create-a-cache-warmer-in-symfony2/)将配置缓存在文件中。您可以使用[http://php.net/manual/fr/function.var-export.php](http://php.net/manual/fr/function.var-export.php)将数据导出到文件或序列化。

然后，创建一个使用文件中数据的服务。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-17T12:53:54.043

对于这么小的事情，您应该考虑使用[Redis](http://redis.io/)来满足您的需求。将此类数据保存在文件中是一个坏习惯，Redis 为您提供了处理数据存储的极快速度。

> Redis 是一个开源的高级键值存储。它通常被称为数据结构服务器，因为键可以包含字符串、散列、列表、集合和排序集合。

您也可以将[SncRedisBundle](https://github.com/snc/SncRedisBundle)与它配对使用。

# javascript - date.setHours(-1) 的正确行为是什么？

> ID：12005476
> 
> 赞同：1
> 
> 时间：2012-08-17T12:06:44.360
> 
> 标签：javascript, date, datetime

我有以下代码：

```
var date = new Date(2010,09,09); //09.10.2010 00:00
date.setHours(-1); //sets the date to 08.10.2010 23:00
```

调用`date.setHours(-1);`将日期设置为前一天的 23:00（至少对于 Opera 和 Chrome）。

这合法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:14:06.237

它不仅合法，而且是*必需*的。

该行为在[ECMAScript 规范](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.34)15.9.5.34 节中正式定义：

> **Date.prototype.setHours (小时 [, min [, sec [, ms ] ] ] )**
> 
> 如果未指定*min*，则其行为就像使用 value 指定了*min***`getMinutes()`**一样。
> 
> 如果未指定*sec*，则其行为就像使用 value 指定了*sec***`getSeconds()`**一样。
> 
> 如果未指定*ms*，则其行为就像使用 value 指定*ms***`getMilliseconds()`**一样。
> 
> 1.  令*t*为 LocalTime（此时间值）的结果。
> 2.  设*h*为 ToNumber(*小时*)。
> 3.  如果未指定*min*，则令*m*为 MinFromTime( *t* )；否则，令*m*为 ToNumber( *min* )。
> 4.  如果未指定*sec*，则令*s*为 SecFromTime( *t* )；否则，设*s*为 ToNumber( *sec* )。
> 5.  如果未指定*ms*，则让*milli*为 msFromTime( *t* )；否则，设*milli*为ToNumber( *ms* )。
> 6.  设*日期*为 MakeDate(Day( *t* ), MakeTime( *h* , *m* , *s* , *milli* ))。
> 7.  让*你*成为 TimeClip（UTC（*日期*））。
> 8.  将此 Date 对象的 [[PrimitiveValue]] 内部属性设置为*u*。
> 9.  还*你*

并且在步骤 6 中使用的规范`MakeTime`最终通过将各个部分相乘来计算毫秒偏移量。参数的边界没有先决条件（除了它们是有限的），因此负数小时是合法的，并且会导致负数结果。

因此，总体结果，即午夜 +（-1 小时），确实需要是前一天的 23:00 才能符合规范。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:10:40.700

是的，这实际上是规范所规定的，所以如果没有，这将是一个“非法”的实现。

实际计算发生在[`MakeDate`](http://es5.github.com/#x15.9.1.13). 日期转换为毫秒，-1 小时也是如此。然后添加这些。添加负数会做减法，因此您会得到更早的日期。

> 如果`day`不是有限的或`time`不是有限的，则返回`NaN`。
> 
> 返回`day`× `msPerDay`+ `time`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:10:39.037

向律师寻求合法性。但你可能想做：

`date.setHours(date.getHours()-1);`

把它做好 - 正如你所期望的那样。

也许值得一提的是，`setDate(-1)`不要*按照*你期望的方式工作。`setMonth(-1)``setYear(-1)`

# content-management-system - 内容中的 silverstripe 后端换行符不会显示在前端

> ID：12005479
> 
> 赞同：1
> 
> 时间：2012-08-17T12:06:56.577
> 
> 标签：content-management-system, silverstripe

我在编辑页面视图的 Silverstripe 后端有一个 textareaField...要插入的文本包含换行符。如果我保存页面，文本会在 textareaField 中正确显示并带有换行符。换行符肯定会正确保存到数据库中。但是如何在前端正确显示文本？它总是在一行中输出而没有换行符。

我已经尝试过 $Text.RAW, $Text.XML,... 没有任何效果。

感谢您的帮助，亲切的问候，弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:47:14.980

假设您使用的是 3.0，这是一个错误。你可以在这里看到它[http://open.silverstripe.org/ticket/7596](http://open.silverstripe.org/ticket/7596)

一种解决方法是在您的文本字段上编写您自己的调用 nl2br 的函数。

这是一个例子：

```
public function NiceDescription () {
     return (nl2br  (Convert::raw2xml ($this->Description), true));
} 
```

您可以将“描述”替换为您的文本属性的名称。

然后在您的模板文件中，如果您需要显示描述字段，您将调用该函数：

```
$NiceDescription 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:54:08.663

要在 html 中直观地呈现换行符，您需要将它们转换为`<BR>`标签。见[http://php.net/manual/de/function.nl2br.php](http://php.net/manual/de/function.nl2br.php)

# c++ - 将命令行的输出逐行读取到c ++中的字符串向量中

> ID：12005481
> 
> 赞同：3
> 
> 时间：2012-08-17T12:06:57.030
> 
> 标签：c++, linux

我需要将 bash 命令的输出逐行读入字符串向量。我用 ifstream 尝试了这段代码，但它给出了错误。我必须用什么来解析它们而不是 ifstream？

```
using namespace std;

int main()
{
  vector<string> text_file;
  string cmd = "ls";

  FILE* stream=popen(cmd.c_str(), "r");
  ifstream ifs( stream );

  string temp;
  while(getline(ifs, temp))
     text_file.push_back(temp);
  for (int i=0; i<text_file.size(); i++)
      cout<<text_file[i]<<endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:05:09.900

I think you would like to use GNU library function [getline](https://www.gnu.org/software/libc/manual/html_node/Line-Input.html)

```
int main ()
{
    vector<string> text_file;
    FILE *stream = popen ("ls", "r");
    char *ptr = NULL;
    size_t len;
    string str;

    while (getline (&ptr, &len, stream) != -1)
    {
        str = ptr;
        text_file.push_back (str);
    }
    for (size_t i = 0; i < text_file.size(); ++i)
        cout << text_file[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:14:07.713

您不能将 CI/O 与 C++ iostream 工具一起使用。如果你真的想使用，你需要通过[read](http://linux.die.net/man/3/read)`popen`来访问它的结果。

如果`ls`真的是你想做的， 试试[Boost.Filesystem 。](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/index.htm)

```
#include <boost/filesystem.hpp>
#include <vector>

int main()
{
  namespace bfs = boost::filesystem;
  bfs::directory_iterator it{bfs::path{"/tmp"}};
  for(bfs::directory_iterator it{bfs::path{"/tmp"}}; it != bfs::directory_iterator{}; ++it) { 
    std::cout << *it << std::endl;
  }

  return 0;
} 
```

# mongodb - 按搜索词相似度对结果进行排序

> ID：12005490
> 
> 赞同：4
> 
> 时间：2012-08-17T12:07:36.460
> 
> 标签：mongodb, sql-order-by, similarity

我有这个用户集合：

```
{
    "_id" : ObjectId("501faa18a34feb05890004f2"),
    "username" : "joanarocha",
}
{
    "_id" : ObjectId("501faa19a34feb05890005d3"),
    "username" : "cristianarodrigues",
}
{
    "_id" : ObjectId("501faa19a34feb05890006d8"),
    "username" : "anarocha",
} 
```

当我查询时：**`db.users.find({'username': /anaro/i})`**结果按自然顺序（插入顺序）排序。

我想按相似性搜索词顺序对它们进行排序。在这种情况下，结果应按以下顺序返回：

> ```
> {
>     "_id" : ObjectId("501faa19a34feb05890006d8"),
>     "username" : "anarocha",
> }
> {
>     "_id" : ObjectId("501faa18a34feb05890004f2"),
>     "username" : "joanarocha",
> }
> {
>     "_id" : ObjectId("501faa19a34feb05890005d3"),
>     "username" : "cristianarodrigues",
> } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:25:05.217

遗憾的是，MongoDB 默认不支持全文搜索排名。

首先，您需要一个算法来计算字符串之间的相似度。请参阅以下链接：

[字符串相似度算法？](https://stackoverflow.com/questions/3576211/string-similarity-algorithims)

[字符串相似度 -> Levenshtein 距离](https://stackoverflow.com/questions/11675034/string-similarity-levenshtein-distance)

然后，您需要使用该算法编写一个[javascript 函数](http://andrew.hedges.name/experiments/levenshtein/)来比较两个字符串以将其传递到您的查询中。请参阅以下链接以了解如何实现这一目标：

[Mongo复杂排序？](https://stackoverflow.com/questions/3212919/mongo-complex-sorting)

# android - Android 无法通过我的应用程序将图像附加到 Facebook、Twitter、电子邮件。请建议

> ID：12005491
> 
> 赞同：0
> 
> 时间：2012-08-17T12:07:40.863
> 
> 标签：android, facebook, twitter, android-assets

我正在制作一个照片库应用程序，我尝试在其中从资产文件夹加载图像。我成功地做到了这一点。

现在我想通过电子邮件、脸书和推特分享图像（单个而不是多个）。这就是我的问题开始的地方。我可以通过我的应用程序发布一条普通的消息，但我无法发布我的图片或附上我的图片。我不知道该怎么做。我尝试了很多教程，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:09:28.897

您必须先将图像上传到互联网上的某个地方，以便 Facebook 可以下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:11:02.013

对于 facebook，请使用您可以从 Internet 获得的 Facebook APi，

[在 android 的 twitter 和 facebook 上分享文本/图像](https://stackoverflow.com/questions/11540239/share-text-image-on-twitter-and-facebook-in-android/11540405#11540405)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T15:17:55.933

给你它对我有用：

```
final Session session = Session.getActiveSession();
if (session != null){
// check publish permissions here
// if there is no permission request it and return;
//else if there is permission
logMessage("Has permission go on");
        final Bundle postParams = new Bundle();
        if(File("yourImagePath").exists())
        {
            byte[] data = null;
                    File screenShotFile = new File("yourImagePath");
            logMessage("getting screenShot here");
            FileInputStream fis = new FileInputStream(screenShotFile);
            Bitmap bitmap = BitmapFactory.decodeStream(fis);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            data = baos.toByteArray();  
            postParams.putByteArray("picture", data);

           logMessage("added pic as byte array to params");
        }
        postParams.putString("name", "Post name");
        postParams.putString("caption", "caption");
        postParams.putString("description", "desc");
        postParams.putString("link", "http://www....");
            final Request.Callback callback= new Request.Callback() {
            public void onCompleted(Response response) 
            {
                FacebookRequestError error;
                try {
                    error = response.getError();
                    if (error != null) 
                    {
                        makeToast(error.getErrorMessage());
                        logMessage(error.getErrorMessage());
                    } 
                    else 
                    {
                        // no errors so delete image here
                        if(screenShotFile != null)
                        {
                            screenShotFile.delete();
                            logMessage("deleted");
                            screenShotFile = null;
                        }
                    }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                logMessage(response.toString());
            }
        };
Request request = new Request(session, "me/photos", postParams, 
                              HttpMethod.POST, callback);
                    RequestAsyncTask task = new RequestAsyncTask(request);
                    task.execute();
logMessage("made feed request check");
         } 
```

# c# - 如何从 C# 管理 IIS？

> ID：12005492
> 
> 赞同：6
> 
> 时间：2012-08-17T12:07:44.633
> 
> 标签：c#, .net, iis-7

我想编写一个服务来为我完成一些 IIS 管理任务，比如创建虚拟目录或添加新应用程序。

是否可以通过 C# 应用程序或 WCF 服务对 IIS 进行一些管理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:13:17.510

看起来您可以使用[Microsoft.Web.Administration api](http://msdn.microsoft.com/en-us/library/microsoft.web.administration%28VS.90%29.aspx)使用 IIS 7+ 完成大多数任务。这能满足你的要求吗？

# c# - ASP CreateUser 向导创建按钮在下一步之前添加用户

> ID：12005499
> 
> 赞同：0
> 
> 时间：2012-08-17T12:08:05.687
> 
> 标签：c#, asp.net, createuserwizard

我正在为我们公司开发一个网站，使其他公司的用户能够直接从我们公司订购。我已经分配了用户角色，并根据注册期间的一些选择以编程方式分配了它们。我添加了一个使用 CreateUserWizard 表单的页面，并添加了一个步骤来从客户那里收集更多信息（特别是公司名称，以便我们知道允许他们订购哪些部件）。问题是，一旦有人填写了第一个注册过程并单击“创建用户”，用户就会在那里创建，并将他们引导到我收集公司信息的下一步。如果用户中止进程，用户帐户仍会创建，并且不会分配给用户组。CreateUserWizard 的最后一页（步骤）有一个完成按钮，它根据第二步中的一些选择将它们分配给用户组。在注册过程实际完成之前，如何防止用户被添加？这是我到目前为止在幕后的代码。

```
protected void RegisterUser_FinishButtonClick(object sender, WizardNavigationEventArgs e)
{
    if (companyddl.SelectedValue == ""){
         errorlbl.Text = "Please Select A Company You Will Be Ordering Parts From.";

         MembershipCreateStatus createStatus = new MembershipCreateStatus();
         MembershipUser newUser = System.Web.Security.Membership.CreateUser(RegisterUser.UserName, RegisterUser.Password, RegisterUser.Email,
                                  RegisterUser.Question, RegisterUser.Answer, true, out createStatus);

         if (companyddl.SelectedValue == "SF")
             Roles.AddUserToRole(RegisterUser.UserName, "user_sf");
         if (companyddl.SelectedValue == "TL")
             Roles.AddUserToRole(RegisterUser.UserName, "user_tl");
         if (companyddl.SelectedValue == "" && companytxt.Text != "OurCompany")
             Roles.AddUserToRole(RegisterUser.UserName, "user");
         if ((companytxt.Text == "OurCompany" || companytxt.Text == "OurCompany, Inc.") && companyddl.SelectedValue == "")
             Roles.AddUserToRole(RegisterUser.UserName, "manager");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:13:13.813

您应该保存到临时位置（会话、数据库中的临时表或其他），然后在最后一步中批处理所有输入/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:22:20.560

我不确定您的代码在做什么......它似乎正在执行验证，但随后继续创建用户。不应该是：

```
protected void RegisterUser_FinishButtonClick(object sender, WizardNavigationEventArgs e)
{
    if (companyddl.SelectedValue == ""){
         errorlbl.Text = "Please Select A Company You Will Be Ordering Parts From.";
         return;
    }

    MembershipCreateStatus createStatus = new MembershipCreateStatus();
    MembershipUser newUser = System.Web.Security.Membership.CreateUser(RegisterUser.UserName, RegisterUser.Password, RegisterUser.Email, RegisterUser.Question, RegisterUser.Answer, true, out createStatus);

    if (companyddl.SelectedValue == "SF")
        Roles.AddUserToRole(RegisterUser.UserName, "user_sf");
    if (companyddl.SelectedValue == "TL")
        Roles.AddUserToRole(RegisterUser.UserName, "user_tl");
    if (companyddl.SelectedValue == "" && companytxt.Text != "OurCompany")
        Roles.AddUserToRole(RegisterUser.UserName, "user");
    if ((companytxt.Text == "OurCompany" || companytxt.Text == "OurCompany, Inc.") && companyddl.SelectedValue == "")
        Roles.AddUserToRole(RegisterUser.UserName, "manager");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:36:14.143

我找到了解决方案。我刚刚更改了向导中的注册步骤，所以它首先会询问公司和其他信息，然后是用户名、密码等。

# java - 如何从动态创建的 JTable 中获取价值

> ID：12005500
> 
> 赞同：0
> 
> 时间：2012-08-17T12:08:10.567
> 
> 标签：java, swing, variables, jtable

我是 JTable 的新手。我已经动态创建了一个 JTable，但我不知道如何从该动态 JTable 中获取数据。

JTable 在 MouseListener 内的匿名类中创建，在匿名类中。我无法访问匿名类之外的 JTable。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:09:19.320

数据驻留在 TableModel 中；要获得这个，你调用[getModel()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#getModel%28%29)。
然后使用[getValueAt(int,int)](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableModel.html#getValueAt%28int,%20int%29)获取特定单元格的值。

您说您只能访问匿名类中的 JTable。
所以 JTable 的范围就是那个匿名类。与其在匿名类中声明 JTable，不如让 JTable 成为封闭类的字段。然后你就可以访问它了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:09:28.370

利用：

[table.getValueAt(行, 列);](http://docs.oracle.com/javase/1.7/docs/api/javax/swing/JTable.html#getValueAt%28int,%20int%29)

# html - CSS 设置在 IE 9 中无法正常工作

> ID：12005506
> 
> 赞同：0
> 
> 时间：2012-08-17T12:08:37.543
> 
> 标签：html, css

我正在设置元素的顶部和左侧属性，但它在 IE 9 中无法正常工作。但它在 Google Chrome 和 Firefox 中运行良好。

所以我想在 CSS 中为 IE 使用一些过滤器，它会显式地设置 IE 的值。我怎样才能做到这一点？

例如，像 Ii 一样使用这个过滤器：

```
background: -ms-linear-gradient(top,  #a90329 0%,#8f0222 44%,#6d0019 100%); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:14:13.623

根据[CanIUse.com](http://caniuse.com/#search=gradient)，IE9 不支持渐变

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:11:10.057

查看特定于浏览器的条件注释 - [http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:13:11.183

试试这个可能对你有用

```
#myDiv {
  background: -ms-linear-gradient(top,  #a90329 0%,#8f0222 44%,#6d0019 100%);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFFFF', endColorstr='#FFE6E6E6', GradientType=0);

  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
} 
```

这可能会帮助你[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:18:36.167

您也可以使用支持 IE9 的渐变生成器：- [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T12:21:18.670

查看[http://abouthalf.com/2011/10/04/updated-ie9-gradients-with-rounded-corners/](http://abouthalf.com/2011/10/04/updated-ie9-gradients-with-rounded-corners/)链接。愿这能解决你的问题

# python - python如何克服全局解释器锁

> ID：12005515
> 
> 赞同：0
> 
> 时间：2012-08-17T12:09:13.097
> 
> 标签：python

我已经实现了使用 python 从清除任务服务器中提取数据的工具。我需要在 clearquest 中进行大量搜索，所以我使用线程实现了它。为此，我尝试为每个线程打开单独的 clearquest 会话。当我尝试运行它时，出现运行时错误，并且没有正确打开 clearquest 会话。

我在互联网上做了一些研究，发现这是因为 python 中的 Global Interpretor Lock。我想知道如何克服这个 GIL ......任何想法将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:11:16.437

不使用线程，而是使用不同的进程并使用某种 IPC 在每个进程之间进行通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:15:42.330

我认为您不会因为 GIL 而出现 RuntimeErrors。你可以粘贴回溯吗？如果您有一些不可重入的代码关键部分，您将不得不使用一些并发原语来隔离它们。

GIL 的主要问题是它会强制序列化计算。结果是吞吐量和扩展性降低。

# iphone - 防止应用程序崩溃

> ID：12005516
> 
> 赞同：1
> 
> 时间：2012-08-17T12:09:14.283
> 
> 标签：iphone, ios, exception, crash

是否可以防止应用程序崩溃？

在许多应用程序中，我遇到了很多崩溃，但有时很难找到崩溃的原因，找到解决方案变得很耗时。

我只是想知道是否有任何代码片段可以为您提供崩溃原因，或者我们可以使用@try-@catch 阻止它。

如果可以通过@try-@catch 避免，那么我应该如何、在哪里放置 try-catch？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T12:26:49.023

可以通过分析崩溃、诊断原因以及编写或修改代码来防止崩溃来防止崩溃。

不幸的是，软件开发不仅仅是最初的打字。测试和错误修复是您花费大量时间的地方。如果这对你来说太乏味了，我推荐一个不同的职业，因为就是这样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-17T13:34:25.857

我一直在寻找这个解决方案。可以使用以下方法打印更具描述性的跟踪。我认为这可以帮助找到正确的原因。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);     
}

void uncaughtExceptionHandler(NSException *exception) {

     NSLog(@"CRASH: %@", exception);
     NSLog(@"Stack Trace: %@", [exception callStackSymbols]);         
} 
```

无法防止应用程序崩溃。但是我们可以使用它获得更详细的跟踪日志。我接受我的问题被错误地提出和不清楚。很抱歉不清楚。

我又在这上面花时间。最后我得到了文章和演示，它将在您的应用程序中捕获您的异常或 BAD_ACCESS。因此，这对于所有开发人员在他们的应用程序中提供诸如 SUBMIT BUG 之类的功能非常有帮助，因此每当用户遇到任何异常时，他们都可以继续或退出或向开发人员提交崩溃报告。它真的很有帮助。我将在我的所有项目中实施。

> 这是马特·加拉格尔的文章
> 
> [http://cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html](http://cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html)

感谢马特·加拉格尔。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T21:13:29.400

您可以使用 try-catch-finally 块来避免应用程序崩溃，如下所示：

```
 -(void)functionInsideWhichAppIsCrashing
    {

       @try 
    {
      //Your crashing code goes here
    }

    @catch ( NSException *e )
     {
    NSLog(@"Crash Reason:@"%@", [e reason]);
               }

@finally {// Do whatever you want to do in crash situation
                   }

} 
```

# eclipse - Linux 中的 log4j-jms.properties 在哪里？

> ID：12005518
> 
> 赞同：-1
> 
> 时间：2012-08-17T12:09:24.660
> 
> 标签：eclipse, log4j, jasper-reports, jms

我正在尝试用 Swing 编译一个简单的 Java 应用程序。它显示了来自 sql 查询的 jList。这样可行。

我有一个按钮，可以使用我已经做过的 .jrmxl 将选择导出到报告中。该文件适用于连接。

问题是我需要包含 Jasperreports 功能。

我收到了消息

> log4j：错误无法读取配置文件 [log4j-jms.properties]。java.io.FileNotFoundException: log4j-jms.properties (没有这样的文件或 > 目录)

我发现的最接近答案的问题是：

[如何在 Eclipse 中设置 log4j.properties？](https://stackoverflow.com/questions/11930606/how-to-set-log4j-properties-in-eclipse)

但**我找不到*log4j-jms.properties*在哪里**。

我正在使用 Xubuntu 11.04 和 Eclipse 3.7.2。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:39:02.250

尝试将以下内容放入文件夹`log4j-jms.properties`根目录中的文件中`src`：

```
# Root logger option
log4j.rootLogger=FATAL

#configuring the JMS appender
log4j.appender.JMS=org.apache.log4j.net.JMSAppender 
```

或者，尝试创建与上面相同的文件，但没有内容？

另一个建议：我**[建议](https://stackoverflow.com/questions/3066199/eclipse-break-when-exception-is-thrown)**为 `java.io.FileNotFoundException`. 然后，当它被命中时，您可以在调试视图中看到调用跟踪，并且就在命中异常断点的位置之前，您可以看到`log4j-jms.properties`正在寻找的路径。

# php - yii 框架在 mac 中不起作用

> ID：12005519
> 
> 赞同：4
> 
> 时间：2012-08-17T12:09:25.247
> 
> 标签：php, yii, xampp, htdocs

在终端中使用 yii 框架创建项目时`applications/xampp/htdocs`，显示错误为`permission denied`. 我可以在所有其他文件夹中创建项目。

这是我编写的终端命令：

```
% php yii/framework/yiic.php webapp /Applications/XAMPP/htdocs/pjt_1 
```

显示的错误是

```
PHP Error[2]: mkdir(): Permission denied
    in file /Applications/yii/framework/console/CConsoleCommand.php at line 457
#0 /Applications/yii/framework/console/CConsoleCommand.php(457): mkdir()
#1 /Applications/yii/framework/console/CConsoleCommand.php(455): WebAppCommand->ensureDirectory()
#2 /Applications/yii/framework/console/CConsoleCommand.php(366): WebAppCommand->ensureDirectory()
#3 /Applications/yii/framework/cli/commands/WebAppCommand.php(96): WebAppCommand->copyFiles()
#4 /Applications/yii/framework/console/CConsoleCommandRunner.php(68): WebAppCommand->run()
#5 /Applications/yii/framework/console/CConsoleApplication.php(92): CConsoleCommandRunner->run()
#6 /Applications/yii/framework/base/CApplication.php(162): CConsoleApplication->processRequest()
#7 /Applications/yii/framework/yiic.php(34): CConsoleApplication->run() 
```

我应该怎么做才能允许访问 xampp 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:03:32.173

右键单击 pjt_1 文件夹并选择“获取信息”。

在弹出窗口中选择“共享和权限”选项卡。

如果它还没有这样说，作为一个实验，将“每个人”旁边的权限更改为“读写”。然后再次尝试从终端创建您的 Yii 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-20T21:03:44.797

```
sudo yii/framework/yiic webapp pjt_1 
```

# selenium - 使用 RobotFramework 运行测试用例时出现 Selenium 导入错误

> ID：12005524
> 
> 赞同：5
> 
> 时间：2012-08-17T12:09:33.157
> 
> 标签：selenium, selenium-webdriver, robotframework

当我尝试在 RobotFramework 中运行测试用例时，出现以下错误。我安装了 Selenium2Library，但看起来 RF 找不到它。SeleniumLibrary 一切正常。

Selenium2Library 安装在 C:\Python27\lib\site-packages 中。我卸载并安装了几次以确保安装正确。安装过程中没有错误。

任何想法在哪里寻找问题？

这是错误：

```
c:\testing>pybot testone.txt
[ ERROR ] Error in file 'c:\testing\testone.txt' in table 'Settings': Importing test library 'Selenium2Library' failed: ImportError: No module named selenium
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\Selenium2Library\__init__.py", line 2, in <module>
    from keywords import *
  File "C:\Python27\lib\site-packages\Selenium2Library\keywords\__init__.py", line 3, in <module>
    from _browsermanagement import _BrowserManagementKeywords
  File "C:\Python27\lib\site-packages\Selenium2Library\keywords\_browsermanagement.py", line 4, in <module>
    from selenium import webdriver
PYTHONPATH:
  C:\Python27\lib\site-packages\robot\libraries
  C:\Python27\lib\site-packages
  C:\Windows\system32\python27.zip
  C:\Python27\DLLs
  C:\Python27\lib
  C:\Python27\lib\plat-win
  C:\Python27\lib\lib-tk
  C:\Python27
  C:\Python27\lib\site-packages\wx-2.8-msw-unicode 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T20:49:10.363

通过删除 Selenium2Library 文件夹并使用 pip 命令重新安装它（安装所有必要的包）解决了这个问题。

```
pip install robotframework-selenium2library 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-07T10:24:30.043

我也有类似的问题。我正在运行 Python 3.7 和 3.8，因为 RIDE 不适用于 3.8。

我之前为 Python 3.8 安装了机器人框架，之后我在 3.7 上安装了所有东西。当我从 3.8 卸载机器人框架（以及与之相关的每个包）并仅在 Python 3.7 上安装每个包时，**问题就得到了解决。**

# unix - 使用 rpm 或 yum 擦除多个包

> ID：12005526
> 
> 赞同：17
> 
> 时间：2012-08-17T12:10:10.357
> 
> 标签：unix, rpm, yum

我被授予访问安装了 50+ php rpms 的服务器的权限。我正在尝试将它们全部删除。

基本上，我试图结合这两个命令：

```
rpm -qa | grep 'php' 
```

和

```
rpm --erase 
```

我对管道和重定向了解一点，但我不知道如何将它们用于此目的。请帮忙。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-03-10T22:46:31.630

## 使用`yum`

列出并删除指定的包及其所有依赖项，但需要`y/N`确认：

```
yum remove 'php*' 
```

要绕过确认，请替换`yum`为`yum -y`。

## 使用`rpm`

[本节以twalburg](https://stackoverflow.com/a/12009218/832230)和[Ricardo](https://stackoverflow.com/a/16769089/832230)的答案为基础。

列出安装了哪些 RPM：

```
rpm -qa 'php*'
rpm -qa | grep '^php'  # Alternative listing. 
```

列出哪些 RPM 将被擦除，而不是实际擦除它们：

```
rpm -e --test -vv $(rpm -qa 'php*') 2>&1 | grep '^D:     erase:' 
```

在 Amazon Linux 上，您可能需要`grep '^D: ========== ---'`改用。

如果上述命令未列出相关 RPM，请调查错误：

```
rpm -e --test -vv $(rpm -qa 'php*') 
```

擦除这些 RPM：

```
rpm -e $(rpm -qa 'php*') 
```

确认擦除：

```
rpm -qa 'php*' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T15:15:30.617

这项工作的常用工具是[`xargs`](http://linux.die.net/man/1/xargs)：

```
rpm -qa | grep 'php' | xargs rpm -e 
```

这将调用`rpm -e`标准输入中命名的所有包`xargs`作为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:02:39.720

另一种选择是直接使用命令`rpm -qa | grep ...`中的输出`rpm --erase`：

```
rpm --erase `rpm -qa | grep php` 
```

也许不适用于`php`您引用的情况，但是如果该方法决定将列表拆分为多个调用，并且第一个列表包含作为后续列表中包的依赖项的包，则该`xargs`方法可能会遇到问题。`rpm -e`当然，如果您要同时删除这么多包，您可能还有其他需要考虑的事情......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T08:23:37.843

列出：

```
rpm -qa | grep 'php' 
```

删除已安装的列出和过滤：

```
rpm -e $(rpm -qa |grep 'php') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-05T20:11:43.660

我今天有这个。如果没有 --allmatches，使用 --justdb 和 --noscripts rpm 参数是不够的，仅此而已。

```
[root@localhost ~]# rpm -ev --allmatches --justdb <the-package-name> 
```

[https://mcvictech.blogspot.com/2011/10/rpm-error-specifies-multiple-packages.html](https://mcvictech.blogspot.com/2011/10/rpm-error-specifies-multiple-packages.html)

# php - 如何从数组中提取和删除选定的变量？

> ID：12005528
> 
> 赞同：2
> 
> 时间：2012-08-17T12:10:10.207
> 
> 标签：php, arrays

我有以下数组：

```
$var_array = array(
 "length"  => 5,
 "breadth"  => 5,
 "color" => "blue",
 "size"  => "medium",
 "shape" => "square"); 
```

如何通过指定键从数组中提取选定的变量？

例如，如果我指定`breadth`and `size`，我会得到：

```
$breadth = 5;
$size = "medium";
$var_array = array(
 "length"  => 5,
 "color" => "blue",
 "shape" => "square"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:16:51.277

解决方案：

```
$keys = array('breadth', 'size');  // which keys do you want to extract?

foreach($keys as $key) {
    $newArr[$key] = $var_array[$key];  // put'em in newArr
    unset($var_array[$key]);
}
extract($newArr);   // extract them to convert keys to variables
unset($newArr);   // unset newArr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:27:00.820

[`array_diff_key`](http://php.net/array_diff_key)和[`array_intersect_key`](http://php.net/array_intersect_key)：

```
$array  = array(
  'breadth' => 1, 
  'size' => 2, 
  'length' => 3,
  'colour' => 4,
  'shape' => 5
);

$keys      = array('breadth', 'size');
$new_array = array_intersect_key($array, array_flip($keys));
$array     = array_diff_key($array, $new_array); 
```

将产生：

```
// $new_array
array(2) {
 ["breadth"] => int(1)
 ["size"]    => int(2)
}

// $array
array(3) {
 ["length"] => int(3)
 ["colour"] => int(4)
 ["shape"]  => int(5)
} 
```

如果要将它们放入局部变量中，可以执行以下操作：

```
list($length, $colour, $shape) = array_values($new_array); 
```

或者一个不太清楚的版本：

```
extract($new_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:16:57.593

Goldenparrot 已经提供了一个很好的答案，但是如果您想要一个不使用 foreach 的解决方案，您可以使用[array_intersect_key](http://www.php.net/manual/en/function.array-intersect-key.php)代替：

```
$var_array = array(...)
$keysToExtract = array('breadth', 'size');
extract(array_intersect_key($var_array, array_fill_keys($keysToExtract, true)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:25:48.053

试试这个

```
$var_array = array(
 "length"  => 5,
 "breadth"  => 5,
 "color" => "blue",
 "size"  => "medium",
 "shape" => "square");

reset($var_array);
$myarray =array();

while (list($key, $val) = each($var_array))
{
  if($key!='length' && $key!='size' )
  {
    $myarray[$key] =  $val;

  }else{

   echo "$key => $val<br />";

 }

} 
```

输出

```
size=> medium
breadth => 5

Array
(
    [color] => blue
    [length] => 5
    [shape] => square
) 
```

# ruby-on-rails - 无法获取与状态消息相关的照片

> ID：12005532
> 
> 赞同：0
> 
> 时间：2012-08-17T12:10:31.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在构建一个 Rails 3.2.6 应用程序，我有一个关于关联的问题。我正在使用 Transloadit 上传和处理图像，处理完成后，我得到一个 assembly_id，我将其保存在 Photo 模型和 Status 模型中。

1.  一张 Status has_one 照片。

2.  照片属于一种状态。

*这就是设置。*

1.  一个事件可以有许多状态消息
2.  状态消息属于一个事件，可以有一张照片

通常我会在 Photo 中输入 status_id，但我已经通过将程序集 id 保存到 Status 对象来替换它。

我知道我可以得到这样的图像：

```
p = Photo.find_by_assembly_id (s.assembly_id) 
```

但我需要能够做到这一点并获得照片（而不仅仅是状态数据）：

```
@event.statuses 
```

或许像这样

```
@event.statuses.includes(:photo) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:57:10.473

尝试使用
`@event = Event.find(params[:id]).includes(:status => :photo)`
# 或 .includes(:statuses => :photos)`

# javascript - 均匀分布元素

> ID：12005544
> 
> 赞同：1
> 
> 时间：2012-08-17T12:11:07.620
> 
> 标签：javascript, math, geometry

我需要计算具有固定宽度的元素中具有可变宽度和高度的元素的位置。它就像 Pinterest 板，但元素宽度可变（它不是由块的内容决定的，在我的情况下，块有两种大小 - 170x140 或 140x170），所以我不能使用列。

[这是所需结果的视觉示例](https://www.dropbox.com/s/qhan08mmmc9lqvp/distribute.jpg?m)

浮动不是一种选择，因为它会产生太大的间隙。display:inline 和 display:inline-block 也不会产生所需的结果。

好像有一个数学算法，每个盒子的位置是怎么计算的？

计算将在 Javascript 中完成。

# mysql - 按 .58 等 mysql 值排序

> ID：12005546
> 
> 赞同：1
> 
> 时间：2012-08-17T12:11:11.337
> 
> 标签：mysql

`carat`字段包含类似`.58`(0.58) 的值。我需要按 carat 顺序获取所有记录。我试着和演员一起玩，但没有运气，这可能吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:21:53.333

如果`carat`是文本字段，那么这应该工作：

`ORDER BY carat*(1.0);`

```
ORDER BY CAST(carat AS DECIMAL(33,22)); 
```

# playframework - Play20 嵌入外部 js 文件

> ID：12005549
> 
> 赞同：0
> 
> 时间：2012-08-17T12:11:26.593
> 
> 标签：playframework, playframework-2.0

从我的 play20 应用程序中，我需要生成一个包含所有外部 .css/.js/等的 HTML 文件。

要生成 HTML 文件，我使用 views.html.MyView(Parameter).toString()

但我需要更换：

```
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/bootstrap.css")"> 
```

和

```
<script type="text/javascript" charset="utf-8"> 
  @icludeTextFrom(routes.Assets.at("stylesheets/bootstrap.css"))
  This function should read the bootstrap.css file and embed it's content here.
</script> 
```

Play 2.0 中是否有一些功能可以嵌入其他文件，还是我必须手动复制文件的内容？

谢谢费边

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:21:29.017

是的，有以下功能：

```
<link rel="stylesheet" href="http://somedomain.tld/somescript.js">
<script type="text/javascript" charset="utf-8"> 
    Bootstrap code
</script> 
```

换句话说：使用`src='@routes...'`不是强制性的，它只是一个助手，你也可以用静态文件替换。您还可以将任何您想要的内容添加到您的视图中，因为这是**您的**视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:22:41.097

我现在添加了一个小函数，它将添加外部文件的内容。

```
@embed(what:String) = @{
  import java.io.File
  scala.io.Source.fromFile(new File(".").getCanonicalPath() + "/public/" + what).mkString("")
} 
```

像这样使用：

```
<style type="text/css">
  @embed("stylesheets/bootstrap.min.css")
 </style> 
```

# c# - 继承中的循环泛型类型 - 为什么它有效？

> ID：12005550
> 
> 赞同：3
> 
> 时间：2012-08-17T12:11:31.113
> 
> 标签：c#, generics, inheritance, circular-dependency

考虑以下：

```
public class EntityBase<TEntity>
{
    public virtual void DoSomethingWhereINeedToKnowAboutTheEntityType()
    {
    }
}

public class PersonEntity : EntityBase<PersonEntity>
{
    public override void DoSomethingWhereINeedToKnowAboutTheEntityType()
    {
    }
} 
```

我将它添加到代码中并运行它，它工作正常，但我很惊讶我可以继承一个定义基于继承类的类。

当我尝试它时，我期望它不会编译，或者一旦实际调用就会失败。

您可以使用界面执行类似的操作：

```
public interface IEntityBase<TEntity>
{}

public class PersonEntity : IEntityBase<PersonEntity>
{} 
```

实际上，我已经使用界面将我的代码从前者切换到了后者，但我仍然很好奇为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:15:44.873

它之所以有效，是因为它没有理由不起作用。`EntityBase<PersonEntity>`不继承自`PersonEntity`，它仅引用类型。基类知道自己的派生类没有技术问题。这也有效（即使这个具体的例子是个坏主意）：

```
public class A
{
    public B AsB()
    {
        return this as B;
    }
}

public class B : A
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:26:12.893

> 我很惊讶我可以继承一个定义基于继承类的类。

小心-您继承的是一个定义**涉及任意`Type`**, 的类。所有这些都是合法的：

```
class O : EntityBase<object>
class S : EntityBase<String>
class Q : EntityBase<Q> 
```

您在定义中所说的`EntityBase`只是`TEntity`应该是一种**类型**-嗯，`PersonEntity`是一种类型，不是吗？那么为什么它不应该有资格成为一个`TEntity`？没有理由不这样做 - 所以它有效。

您可能关心定义的*顺序*，但请记住，在编译单元中，所有内容都“立即”定义 - 没有任何意义`PersonEntity`需要在其他任何东西（包括它自己！）可以引用它之前“编译” . 事实上，你甚至被允许

```
class A : EntityBase<B>
class B : EntityBase<A> 
```

**如果**需要这样的事情，任何可以想象的“编译顺序”都无法工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:26:51.550

一个非常简单的例子是通用接口`IComparable<T>`。通常，您可以这样实现它：

```
class MyClass : IComparable<MyClass> {/*...*/} 
```

通用模板的这种实现只是说`MyClass`对象可以与其他`MyClass`对象进行比较。如您所见，心智模型没有问题。我可以很好地理解一个类的概念，它的对象可以在它们之间进行比较，而无需了解该类的任何其他内容。

这里的重点是模板参数只是由泛型类或接口使用，但它们根本不需要通过继承来关联。`IComparable<MyClass>`不继承自`MyClass`. 所以不存在循环。

# node.js - 手表可以搭配翡翠吗？

> ID：12005554
> 
> 赞同：5
> 
> 时间：2012-08-17T12:11:42.440
> 
> 标签：node.js, pug

我想看我的玉文件并编译它们，但它似乎不起作用

```
jade client/jade --watch --out public 
```

当我改变`client/jade/draft.jade`它不会重新编译。我看到一个帖子，说它不适用于目录？还没修好？有解决方法吗？我必须手动观看所有文件吗？

[https://groups.google.com/d/msg/jadejs/p_slRuISjVg/lL_uxgD6uB0J](https://groups.google.com/d/msg/jadejs/p_slRuISjVg/lL_uxgD6uB0J)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T07:03:00.090

你现在所说的“观察目录的变化”。如果从目录中添加或删除文件，它将重新编译所有文件。但是，因为它只监视目录（实际上只是一个文件本身）而不是目录中的文件，因此更改其中一个文件不会触发编译。

观看所有玉文件`client/jade`

```
$ jade --watch client/jade/*.jade --out public 
```

这并没有真正监视目录，它只是扩展了jade 命令以监视启动时存在的所有jade 文件，而不必将它们全部输入。如果您在开始手表后添加文件，则需要重新启动它。

# python - Python - 在字符串中查找数字

> ID：12005558
> 
> 赞同：15
> 
> 时间：2012-08-17T12:12:10.537
> 
> 标签：python

```
def get_digits(str1):
    c = ""

    for i in str1:
        if i.isdigit():
            c += i
            return c 
```

以上是我使用的代码，问题是它只返回字符串的第一个数字。为此，我必须同时保留 for 循环和 return 语句。任何人都知道如何修复？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-17T12:19:00.863

正如其他人所说，你的缩进有语义问题，但你不必编写这样的函数来做到这一点，一种更pythonic的方法是：

```
def get_digits(text):
    return filter(str.isdigit, text) 
```

在口译员上：

```
>>> filter(str.isdigit, "lol123")
'123' 
```

## 一些忠告

当人们展示“更快”的方法时，请务必自己测试：

```
from timeit import Timer

def get_digits1(text):
    c = ""
    for i in text:
        if i.isdigit():
            c += i
    return c

def get_digits2(text):
    return filter(str.isdigit, text)

def get_digits3(text):
    return ''.join(c for c in text if c.isdigit())

if __name__ == '__main__':
    count = 5000000
    t = Timer("get_digits1('abcdef123456789ghijklmnopq123456789')", "from __main__ import get_digits1")
    print t.timeit(number=count)

    t = Timer("get_digits2('abcdef123456789ghijklmnopq123456789')", "from __main__ import get_digits2")
    print t.timeit(number=count)

    t = Timer("get_digits3('abcdef123456789ghijklmnopq123456789')", "from __main__ import get_digits3")
    print t.timeit(number=count)

~# python tit.py
19.990989106  # Your original solution
16.7035926379 # My solution
24.8638381019 # Accepted solution 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-17T12:16:45.253

您的缩进有点无聊（Python 中的缩进非常重要）。更好的：

```
def get_digits(str1):
    c = ""
    for i in str1:
        if i.isdigit():
            c += i
    return c 
```

使用[生成器表达式](http://docs.python.org/tutorial/classes.html#generator-expressions)的更短更快的解决方案：

```
''.join(c for c in my_string if c.isdigit()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T12:15:47.500

这是因为您的`return`语句在 for 循环内，所以它在第一个 true`if`条件后返回并停止。

```
 def get_digits(str1):
      c = ""
      for i in str1:
        if i.isdigit():
            c += i
      return c 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T12:15:07.593

有一个缩进问题，当它找到第一个数字时返回，与当前缩进一样，它被解释为语句内部的语句，它需要与被视为外部语句`if`的语句平行。`for``for`

```
def get_digits(str1):
    c = ""

    for i in str1:
        if i.isdigit():
            c += i

    return c

digits = get_digits("abd1m4m3m22mmmbb4")
print(digits) 
```

与您的不正确代码等效的花括号是：

```
def get_digits(str1){
    c = ""

    for i in str1 {
        if i.isdigit(){
            c += i
            return c    # Notice the error here
        }
    }
} 
```

并且当更正代码以将 return 语句与 对齐时`for`，等效为：

```
def get_digits(str1){
        c = ""

        for i in str1 {
            if i.isdigit(){
                c += i               
            }
        }
        return c    # Correct as required
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T12:15:37.947

您的代码几乎没问题，*除了*需要将`return`语句移动到您的`for`-loop 级别。

```
def get_digits(str1):
    c = ""
    for i in str1:
        if i.isdigit():
            c += i
    return c   ## <--- moved to correct level 
```

所以，现在：

```
get_digits('this35ad77asd5') 
```

产量：

```
'35775' 
```

*说明*：

以前，您的函数*只*返回第一个数字，因为当它找到一个时，`if`语句就被执行了`return`（导致您从函数返回，这意味着您没有继续查看字符串）。

如您所见，空格/缩进在 Python 中*确实很重要（与许多其他语言不同）。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T12:16:26.890

当然它只返回第一个数字，你明确告诉 Python 一旦你有一个数字就返回。

更改`return`语句的缩进，它应该可以工作：

```
def get_digits(str1):
    c = ""

    for i in str1:
        if i.isdigit():
            c += i

    # Note the indentation here
    return c 
```

# c# - 使用 Array.Sort() 进行浮点排序

> ID：12005559
> 
> 赞同：2
> 
> 时间：2012-08-17T12:12:11.993
> 
> 标签：c#, .net, arrays, sorting

我需要在 C# 中对`float`. 我使用委托并对`Array.Sort`它们进行排序，但似乎我不能使用`float`.

转换为时如何保持这些浮点数的精度`int`？

是否可以使用`Array.Sort`with`float`而不是`int`return？

不使用 LINQ。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T12:33:57.820

`Array.Sort<T>(T[] array, Comparison<T> comparison)`不限于任何类型，只要您提供正确的比较委托。比较委托应该返回包含比较操作结果的整数值，而不是要与某物进行比较的值。例如，如果你有一个`X`带有`float`property的类`Property`，你可以像这样对它们进行排序：

```
public sealed class X
{
    public float Property { get; set; }
}

static void Test()
{
    var arr = new X[]
    {
        new X { Property = 5.5f },
        new X { Property = 2.5f },
        new X { Property = 6.5f },
        new X { Property = 1.2f },
    };
    Array.Sort(arr, (a, b) => a.Property.CompareTo(b.Property));
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T12:16:04.397

您可以使用 LINQ OrderBy 扩展方法

```
var arr = new[] { 1.3f, 1.4f };
arr.OrderBy( a => a ).ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T12:16:08.507

你可以使用 LINQ 吗？

```
arrayOfFloats = arrayOfFloats.OrderBy(x => x); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T12:19:27.563

最好的变体是使用 radixsort，查看更多信息

[C# 中的浮点数是否有良好的基数排序实现](https://stackoverflow.com/questions/2685035/is-there-a-good-radixsort-implementation-for-floats-in-c-sharp)

祝你好运

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T12:24:08.907

我猜您正在使用一些较旧的 .Net 版本，因为在您的一条评论中您曾询问您不想使用 LINQ。

在这种情况下**是的，可以使用`Array.Sort`**

```
float[] myfloatarray = new float[5];

Array.Sort(myfloatarray); 
```

这将使用

```
Array.Sort<T>(T[] array); 
```

这不使用任何仅限 LINQ 的泛型，并且在 .Net 2.0 中可用。

[在此处阅读有关 Array.Sort 的信息](http://msdn.microsoft.com/en-us/library/system.array.sort%28v=vs.80%29.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T12:37:56.603

也许您将`T`允许为任何东西的“in”类型与`Comparison<T>`必须为的委托的返回类型混淆了`int`？

这工作正常：

```
float[] arr = { 2.3f, 1.1f, 9.0f, 6.6f, };
Array.Sort(arr, (x, y) => SomeMethodReturningInt(x, y)); 
```

在这种情况下，第二个参数 to`Sort`是 a 。`Comparison<float>`在 lambda 中，`x`并且`y`是`float`s。

# php - 使用 Web 服务从数据库中获取数据时出现问题

> ID：12005561
> 
> 赞同：3
> 
> 时间：2012-08-17T12:12:21.337
> 
> 标签：php, web-services, rest

我创建了 Web 服务以从古吉拉特语（其他语言）的数据库中获取数据。

当我在浏览器中访问 Web 服务的 URL 时，我得到“????????????” 而不是真实数据。

请帮我摆脱它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:25:33.703

你必须设置编码

```
ini_set('default_charset', 'utf-8'); 
```

在您的网络服务 php 文件上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:25:02.840

Rahul bhai，先尝试运行这个脚本：

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "test");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* change character set to utf8 */
if (!$mysqli->set_charset("utf8")) {
    printf("Error loading character set utf8: %s\n", $mysqli->error);
} else {
    printf("Current character set: %s\n", $mysqli->character_set_name());
}

$mysqli->close();
? 
```

如果您可以修改网络服务，请尝试将 charset 设置为`utf-8`如上所示，或浏览 stackoverflow 以查找类似问题，其中用户要求设置 charset 等

# ruby-on-rails - 关于 Rails 模型中的一对一关系

> ID：12005563
> 
> 赞同：0
> 
> 时间：2012-08-17T12:12:25.957
> 
> 标签：ruby-on-rails, models, relationship, one-to-one

我有三个模型

```
class Vehicle < ActiveRecord::Base
 has_one:driver ,:through=>:vehicle_driver
end

class Vehicle_Driver < ActiveRecord::Base
 belongs_to:vehicle
 belongs_to:driver
end 
```

只有 vehicle_id 和 driver_id

```
class Driver < ActiveRecord::Base
 has_one:vehicle_driver
end 
```

我想做的是

*   独立登记车辆

*   独立注册驱动程序

*   然后将驾驶员分配给车辆，这样一辆车**只能分配一名驾驶员**，反之亦然

并进一步

*   如果我将司机分配给另一辆车，则必须删除其早期关系

这可能从上述关系...？？？？？？

任何帮助将不胜感激..

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:25:20.743

1.  为什么是中间类，它与您的要求相矛盾，所以将其删除。

2.  因此，只需让 Vehicle 和 Driver 模型都使用 has_one 。如果它们不相互指向，它会生成可能导致问题的重复关系。所以最好的办法是只有一个“has_one”关系，并执行@vehicle.find_by_driver 来测试驾驶员是否已经分配了车辆。

3.  保存关系时，还要更新另一个关系： 3a @vehicle.driver = @driver 3b @vehicle.driver.vehicle = @vehicle # 强制使它们指向彼此。

4.  在 Vehicle 模型中，添加一个方法或范围以返回 driver 为 nil 的车辆列表。4a Vehicle.all.where(:driver.nil?) # 从我的脑海中，只是为了给出一个想法

如果要删除车辆的关系，请执行 5a @vehicle.driver.vehicle = nil 5b @vehicle.driver = nil

希望这可以帮助您朝着正确的方向前进。

# java - 如何在 android 中从内部和外部 SD 卡播放 mp3 文件？

> ID：12005566
> 
> 赞同：5
> 
> 时间：2012-08-17T12:12:28.803
> 
> 标签：java, android, android-sdcard

我正在开发一个 mp3 播放器应用程序，它可以播放内部 SD 卡内任何位置的 .mp3 文件。

我使用以下代码来获取内部存储中存在的 .mp3 文件。

```
ArrayList<File> inFiles = new ArrayList<File>();
File list[] = file.listFiles();
//Log.i("DIR", "PATH" +file.getPath());
for (int i = 0; i < list.length; i++) 
{
    // myList.add( list[i].getName() );
    File temp_file = new File(file.getAbsolutePath(),list[i].getName());
    //Log.i("DIR", "PATH" +temp_file.getAbsolutePath());
    if (temp_file.listFiles() != null) 
    {
        //Log.i("inside", "call fn");
        listfiles(temp_file);

    }
    else 
    {
        if (list[i].getName().toLowerCase().contains(".mp3"))
        {
            inFiles.add(list[i]);
        //Log.e("Music", list[i].getName());
        }
    }
} 
```

我如何同样从外部 SD 卡获取 .mp3 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:27:42.213

您可以使用以下代码获取外部 sdcard 的根目录

```
File root = Environment.getExternalStorageDirectory(); 
```

现在您可以执行与内部操作相同的操作

```
ArrayList<File> inFiles = new ArrayList<File>();
File list[] = root.listFiles(); // here use the root object of File class to the list of files and directory from the external storage
//Log.i("DIR", "PATH" +file.getPath());
for (int i = 0; i < list.length; i++) 
{
    // myList.add( list[i].getName() );
    File temp_file = new File(file.getAbsolutePath(),list[i].getName());
    //Log.i("DIR", "PATH" +temp_file.getAbsolutePath());
    if (temp_file.listFiles() != null) 
    {
        //Log.i("inside", "call fn");
        listfiles(temp_file);

    }
    else 
    {
        if (list[i].getName().toLowerCase().contains(".mp3"))
        {
            inFiles.add(list[i]);
        //Log.e("Music", list[i].getName());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:16:44.060

尝试使用这个：

```
File root = Environment.getExternalStorageDirectory(); 
```

这将为您提供外部存储的根，前提是有一个。然后您可以过滤掉不是 .mp3 的文件

还可以考虑看看这个：[List all of one file type on Android device?](https://stackoverflow.com/questions/5298858/list-all-of-one-file-type-on-android-device)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:16:48.117

要获取对位于以下位置的文件的引用：sdcard/music/song.mp3：

```
File file = Environment.getExternalStorageDirectory()+"/music/song.mp3"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-10T04:47:23.903

```
import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.HashMap;

    enter code here

import android.os.Environment;

public class SongsManager {

    final String MEDIA_PATH = Environment.getExternalStorageDirectory()``
            .getPath() + "/";
    private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    private String mp3Pattern = ".mp3";
    // Constructor
    public SongsManager(){

    }

    /**
     * Function to read all mp3 files from sdcard
     * and store the details in ArrayList
     * */
    public ArrayList<HashMap<String, String>> getPlayList(){
         System.out.println(MEDIA_PATH);
            if (MEDIA_PATH != null) {
                File home = new File(MEDIA_PATH);
                File[] listFiles = home.listFiles();
                if (listFiles != null && listFiles.length > 0) {
                    for (File file : listFiles) {
                        System.out.println(file.getAbsolutePath());
                        if (file.isDirectory()) {
                            scanDirectory(file);
                        } else {
                            addSongToList(file);
                        }
                    }
                }
            }
            // return songs list array
            return songsList;
        }

        private void scanDirectory(File directory) {
            if (directory != null) {
                File[] listFiles = directory.listFiles();
                if (listFiles != null && listFiles.length > 0) {
                    for (File file : listFiles) {
                        if (file.isDirectory()) {
                            scanDirectory(file);
                        } else {
                            addSongToList(file);
                        }

                    }
                }
            }
        }

        private void addSongToList(File song) {
            if (song.getName().endsWith(mp3Pattern)) {
                HashMap<String, String> songMap = new HashMap<String, String>();
                songMap.put("songTitle",
                        song.getName().substring(0, (song.getName().length() - 4)));
                songMap.put("songPath", song.getPath());

                // Adding each song to SongList
                songsList.add(songMap);
            }
        }
    /**
     * Class to filter files which are having .mp3 extension
     * */
    class FileExtensionFilter implements FilenameFilter {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".mp3") || name.endsWith(".MP3"));
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-25T15:13:40.290

对 Tushar Gupta 代码的轻微修改。这对我来说很好。我有完整的音乐播放器代码

```
import android.os.Environment;
import java.io.File;
import java.io.FilenameFilter;
import java.util.ArrayList;
import java.util.HashMap;
public class SongsManager {

        final String MEDIA_PATH = Environment.getExternalStorageDirectory().getPath() + "/";
        private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        private String mp3Pattern = ".mp3";
        // Constructor
        public SongsManager(){

        }

        /**
         * Function to read all mp3 files from sdcard
         * and store the details in ArrayList
         * */
        public ArrayList<HashMap<String, String>> getPlayList(){
            System.out.println(MEDIA_PATH);
            if (MEDIA_PATH != null) {
                File home = new File(MEDIA_PATH);
                File[] listFiles = home.listFiles();
                if (listFiles != null && listFiles.length > 0) {
                    for (File file : listFiles) {
                        System.out.println(file.getAbsolutePath());
                        if (file.isDirectory()) {
                            scanDirectory(file);
                        } else {
                            addSongToList(file);
                        }
                    }
                }
            }
            // return songs list array
            return songsList;
        }

        private void scanDirectory(File directory) {
            if (directory != null) {
                File[] listFiles = directory.listFiles();
                if (listFiles != null && listFiles.length > 0) {
                    for (File file : listFiles) {
                        if (file.isDirectory()) {
                            scanDirectory(file);
                        } else {
                            addSongToList(file);
                        }

                    }
                }
            }
        }

        private void addSongToList(File song) {
            if (song.getName().endsWith(mp3Pattern)) {
                HashMap<String, String> songMap = new HashMap<String, String>();
                songMap.put("songTitle",
                        song.getName().substring(0, (song.getName().length() - 4)));
                songMap.put("songPath", song.getPath());

                // Adding each song to SongList
                songsList.add(songMap);
            }
        }
        /**
         * Class to filter files which are having .mp3 extension
         * */
        class FileExtensionFilter implements FilenameFilter {
            public boolean accept(File dir, String name) {
                return (name.endsWith(".mp3") || name.endsWith(".MP3"));
            }
        }
    } 
```

# asp.net-mvc-3 - EF：实体应该有业务逻辑吗？

> ID：12005568
> 
> 赞同：2
> 
> 时间：2012-08-17T12:12:32.837
> 
> 标签：asp.net-mvc-3, entity-framework, entity

我想知道，实体是否应该能够保存对上下文的更改？或者有与该特定实体相关的业务逻辑？例如：

```
ActionResult ResetPassword(UserViewModel viewModel)
{
   var user = userCollection.GetUser(viewModel.Username);
   user.ResetPassword();
} 
```

在哪里：

```
class User : Entity
{
      public string Password{ get; set; }

      public ResetPassword()
      {
           Password = ""
           context.SaveChanges();
      }
} 
```

我觉得这有点奇怪，因为实体会引用上下文。我不确定这是否可行 - 或者是否建议这样做。但是我想在一个域上工作，我不必担心保存更改，在更高级别等。我怎样才能做到这一点？

谢谢！

**更新**

我已经更新了我的示例 - 希望它现在更清楚一点:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:40:16.227

根据[域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)域对象应该有行为。

你一定要读[这本书](https://rads.stackoverflow.com/amzn/click/com/0321125215)：

![在此处输入图像描述](../Images/4780838c3ad62a36c371549b716b521b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:18:11.423

我会将我的实体保留为**POCO**（普通旧类对象，只有属性的类），并有一个**存储库**执行插入/更新之类的方法。

我可以将我的实体保存在一个单独的类库中，并在不同的地方（甚至在不同的项目中）使用它，并使用不同的存储库实现。

在[本](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)教程中很好地解释了如何在使用实体框架的 MVC 项目上执行**存储库和工作单元模式**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:18:23.613

您可能需要考虑`UnitOfWork`控制器和实体之间的模式。

[http://martinfowler.com/eaaCatalog/unitOfWork.html](http://martinfowler.com/eaaCatalog/unitOfWork.html)

# struts2 - 如何在显示标签struts2中显示两个列表

> ID：12005569
> 
> 赞同：1
> 
> 时间：2012-08-17T12:12:33.603
> 
> 标签：struts2

如何在显示标签struts2中显示两个列表

```
<display:table  id="employeeList" name="employeeList" requestURI="/viewEmployeeAction">
<display:column property="employeeNo" title="EMPLOYEE_NO" sortable="true"/>

<display:column property="firstName+' '+lastName" title="EMP_NAME" sortable="true"/>

<display:column property="joiningDate" title="JOINING_DATE"  sortable="true"/>
<display:setProperty name="paging.banner.placement" value="bottom"/>
</display:table> 
```

第 3 行的问题，我想在一列中连接两个字段并显示它。

任何人给我解决方案提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:17:47.013

一种解决方案是写

```
<display:column title="EMP_NAME" >
    <c:out value="${employeeList.firstName}"/> <c:out value="${employeeList.lastName}"/>
</display:column> 
```

问题是它不能排序。

要解决这个问题，您可能需要在 Employee 类中创建一个新的 getter，如下所示：

```
public String getFullName(){
    return firstName + " " + lastName;
} 
```

然后将其用于：

```
<display:column property="fullName" title="EMP_NAME" sortable="true"/> 
```

我还没有测试过第二个解决方案，但我认为它可以解决问题，并且希望是可排序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T12:22:46.343

```
<display:table name="<%=terminalList%>"  class="displaytagstyle" id="terminaltable" sort="list" style="width:100%">    

<display:column title="TERMINAL NUMBER" href="<%=editPath%>" paramId="paramid" paramProperty="trmnum" sortable="true">
                                    ${terminaltable.trmnum} ${terminaltable.unLocationCode1}
 </display:column> 
```

# javascript - 每个字母单击一次

> ID：12005571
> 
> 赞同：1
> 
> 时间：2012-08-17T12:12:42.213
> 
> 标签：javascript, jquery

在我的游戏中，您必须单击字母来拼写单词。单击一个字母时，它会动画到网格中单词所在的区域。

当我单击一个字母并动画到单元格时，我可以单击多个。我将如何限制每个单元格只有一个字母。

我在想也许只要动画需要禁用点击功能，但我不知道我将如何实现这一点。

有人可以指出我正确的方向吗？

这是点击事件...

```
$('.drag').on('click', function(e) {
e.preventDefault();

var target = $('.drop-box.spellword:not(.occupied):first');
var targetPos = target.position();
var currentPos = $(this).offset();
var b = $(this);

if (target.length) {
    $(".minibutton").prop("disabled", true);
    b.clone().addClass(
    b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target);
        target.addClass("occupied");
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:23:36.077

*一旦动画完成*，看起来你给目标一个名为“occupied”的类。您不能在单击字母后立即给它“占用”类吗？

```
if (target.length) {
        target.addClass("occupied"); // add immediately here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:24:17.933

我认为您可以`addClass()`从动画回调中移动该方法，因此如果您单击两次，您将不会获得相同的单元格，例如：

```
 var target = $('.drop-box.spellword:not(.occupied):first').addClass("occupied"); 
```

如果课程不影响您的风格，这只是可行的想法。

其他方式是使用标志，因此在事件开始时，您会在动画开始和回调时询问`if(!animating)`并设置。`animating = true``animating = flase`

最后，要启用和禁用点击事件，您可以使用您的代码创建一个单独的函数，例如

```
var clickEventHandler = function(e) {
    $('.drag').off("click")
    //your current code
    $('.drag').on(clickEventHandler);
}

$('.drag').on('click',  clickEventHandler); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:27:10.410

如果您为字母提供了单独的 ID，则可以在动画进行时通过 jQuery 使用 $('#letterId').removeAttr('onclick') 删除 click 属性 - 之后，您可以在必要时重新激活该属性。

希望这可以帮助。格雷茨，卢波

# c# - 属性 C# VS2010 的特定自动格式

> ID：12005575
> 
> 赞同：2
> 
> 时间：2012-08-17T12:13:04.723
> 
> 标签：c#, visual-studio-2010, autoformatting

我正在使用VS2010。

使用 '}' 时的自动格式化对我来说非常有用，但是最近我一直在研究图书馆时感到很痛苦。

如果我使用这条线：

```
public Single ExampleProperty { get; set; } 
```

它自动格式化为：

```
public Single ExampleProperty
{
    get;
    set;
} 
```

我怎样才能阻止这种情况发生？我不想禁用自动格式化，我只想启用“允许在单行上定义属性”之类的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:21:22.000

工具 -> 选项 -> 文本编辑器 -> C# -> 格式化 -> 换行 -> 将块留在单行

这应该是您正在寻找的

# java - 直接在java中初始化对象

> ID：12005584
> 
> 赞同：35
> 
> 时间：2012-08-17T12:13:13.557
> 
> 标签：java, object, initialization

是否可以直接初始化对象，就像我们可以在 java 中使用 String 类一样：

如：

```
String str="something..."; 
```

我想为我的自定义类做同样的事情：

```
class MyData{
public String name;
public int age;
} 
```

有可能吗

```
MyClass obj1={"name",24}; 
```

或者

```
MyClass obj1="name",24; 
```

初始化对象？或者怎么可能！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-17T12:15:26.670

通常，您会使用构造函数，但您不必这样做！

这是构造函数版本：

```
public class MyData {
    private String name;
    private int age;

    public MyData(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // getter/setter methods for your fields
} 
```

像这样使用：

```
MyData myData = new MyData("foo", 10); 
```

但是，如果您的字段是`protected`or `public`，如您的示例中所示，您可以在*不*定义构造函数的情况下执行此操作。这是java中最接近您想要的方式：

```
// Adding special code for pedants showing the class without a constuctor
public class MyData {
    public String name;
    public int age;
}

// this is an "anonymous class"
MyData myData = new MyData() {
    {
        // this is an "initializer block", which executes on construction
        name = "foo";
        age = 10;
    }
}; 
```

瞧！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-28T06:50:59.143

如果你有一个类人：

```
public class Person {

    private String lastName;
    private String firstName;

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

} 
```

您实际上可以创建一个新的 Person 对象并使用以下内容初始化其 firstName 和 lastName：

```
 Person person = new Person(){{
     setFirstName("My FirstName");
     setLastName("MyLastName");
 }} 
```

这在使用 Java 代码而不是 XML 配置定义 Spring 配置时经常使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T12:16:18.343

您必须为对象创建一个构造函数方法，该方法接受您想要值的字段的参数。

例子：

```
public myClass( int age, String name)
{
   this.age = age;
   this.name = name;
} 
```

然后在课堂上你想要这个：

```
myClass class = new myClass(24, "name"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T12:21:42.873

> ***我知道使用构造函数，但是是否存在任何替代方法？***

不，没有构造函数的替代品。

这基本上是该语言的基本保证之一。除了通过其构造函数之外，无法通过任何其他方式构造对象，并且除了通常的`new ConstructorName(...)`.

我能想出的最接近的想法是有一个名为say的静态工厂方法`mc`：

```
class MyClass {
    ...
    public static mc(String name, int age) {
        return new MyClass(name, age);
    }
} 
```

然后做

```
import static some.pkg.MyClass.mc;

...

MyClass obj1 = mc("name",24); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T12:15:14.437

可以使用关键字 new 和使用构造函数，但不像 String 那样，这是一种非常特殊的对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T12:16:33.210

```
class MyData{

    public MyData(String name, int age) {
        this.name = name;
        this.age = age;
    }
    public String name;
    public int age;
    } 
```

然后你可以用这种方式实例化你的类：

```
MyData myData = new MyData("name", 24); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-09T20:51:52.177

以下是您想要的，但不是您期望的方式。

所以在一个调用 MyData 的类中，你会使用

```
Public MyData x = new MyData();
@PostConstruct public void init() {
     x.setName("Fering");
     x.setAge(18);
} 
```

因此，一旦对象被信任，这些命令就会运行，这允许您在其他任何东西运行之前填充对象。

因此，您不必使用匿名子类或创建新的构造函数，您只需获取该类，然后使用它的函数，然后再进行其他任何操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-16T07:38:50.527

```
 package com.company;

public class InitializationOfObject {
    int a ;
    int b ;

    InitializationOfObject(){
    }

    InitializationOfObject( int r , int n){
        this.a = r;
        this.b = n;
        System.out.println("Object initialization by constructor  ");
    }

    void methodInitialization(int k, int m){
        System.out.println("object initialization via method");
        this.a = k;
        this.b = m;
    }

    void display(){
        System.out.println("k = " +a+ "m = "+b);
    }

    public static void main(String... arg){
        InitializationOfObject io = new InitializationOfObject();
        InitializationOfObject io2 = new InitializationOfObject(45,65);
        io.a = io2.a;
        io.b = io2.b;
        io.display();

        io.methodInitialization(34,56);
        io.display();

        io.a = 12;
        io.b = 24;
        System.out.println("object initialization via refrence");
        System.out.println("a = "+io.a+" "+ " b ="+io.b);
    }

} 
```

//由构造函数初始化对象

```
k = 45m = 65 
```

通过方法初始化对象

```
k = 34m = 56 
```

通过引用初始化对象

```
a = 12  b =24 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-19T13:12:57.530

There are two types of Constructors in java.

1.  Default constructor
2.  Parameterized constructor

You should create a [parameterized constructor](https://beginnersbook.com/2014/01/parameterized-constructor-in-java-example/) to create your object.

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-08-17T12:43:45.607

在对象初始化期间，Java 中的构造函数（以及 new 运算符）没有替代品。你提到过

> 字符串 str = "某事"

您可以通过这种方式初始化字符串，因为 String 是 java 中的文字。只有文字可以这样初始化。一个复合对象不能被初始化，而只能用带有构造函数的new操作符来实例化。

# php - 使用 PDO 抓取行

> ID：12005588
> 
> 赞同：0
> 
> 时间：2012-08-17T12:13:22.300
> 
> 标签：php, web, count, pdo, rows

我正在尝试查看我的数据库中的表中是否已经存在一行。如果有一行，则 php 将重定向到不同的页面。如果没有一行，它会留在那里。这是我拥有的代码：

```
$sched_ex = $db->prepare("SELECT COUNT(1) FROM sched WHERE uid = '$uid'");
$sched_ex->execute();

if($sched_ex == 0) { ... } else { redirect } 
```

我是 PDO 的新手，不确定我需要做什么才能使其正常工作。

编辑：

```
$sched_ex = $db->prepare("SELECT COUNT(1) FROM sched WHERE uid = :uid");
$sched_ex->execute(array(':uid' => $uid));

if($sched_ex->fetchColumn() == 0) { a lot of html }
else {
?>
<script langauge="javascript">
    window.location="../"
</script>
<?php
} 
```

标头不起作用，所以我使用了 JavaScript。不过，我怀疑这是问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:15:35.270

首先，使用绑定参数来保护自己免受注入攻击：

```
$sched_ex = $db->prepare("SELECT COUNT(1) FROM sched WHERE uid = :uid");
$sched_ex->execute(array(':uid' => $uid)); 
```

其次，关于你的问题：

```
if($sched_ex->fetchColumn() == 0) { ... } else { redirect } 
```

（见：[http](http://www.php.net/manual/en/pdostatement.fetchcolumn.php) ://www.php.net/manual/en/pdostatement.fetchcolumn.php ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:16:29.607

您可以使用[rowcount](http://au.php.net/manual/en/pdostatement.rowcount.php)函数找出有多少行（如果查询返回任何内容），那么您将需要实际获取他的数据。

但在那一点上，来自文档：

*对于大多数数据库，PDOStatement::rowCount() 不返回受 SELECT 语句影响的行数。相反，使用 PDO::query() 发出`SELECT COUNT(*)`与预期 SELECT 语句具有相同谓词的语句，然后使用 PDOStatement::fetchColumn() 检索将返回的行数。然后，您的应用程序可以执行正确的操作。*

您需要在执行后[获取](http://au.php.net/manual/en/pdostatement.fetch.php)行：

```
$dbh = new PDO($this->mySQLAccessData->hostname, $this->mySQLAccessData->username, $this->mySQLAccessData->password);
$stmt = $dbh->query($sql);
$stmt->setFetchMode(PDO::FETCH_INTO, new kpiData);
$dataCount=0;
foreach($stmt as $kpiData)
{
    $arrKPIData[$dataCount]['year']=$kpiData->year;
    $arrKPIData[$dataCount]['month']=$kpiData->month;
    $dataCount++;
    unset($stmt);
} 
```

# javascript - 从另一个 iframe 刷新父 iframe

> ID：12005595
> 
> 赞同：0
> 
> 时间：2012-08-17T12:14:25.497
> 
> 标签：javascript, iframe, parent, reload

我想用 javascript 从另一个 iframe 刷新父母的 iframe。更多详情：

```
 ---------->iframe1(name:iframesubmit)
 |
 paraent
 |
 ---------->iframe2----->iframe3 
```

iframe3 刷新 iframe1。

我试过：

```
parent.window.iframesubmit.location.reload(); 
```

但刷新父级而不是父级的 iframe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:41:47.557

那应该是：

```
parent.parent.iframesubmit.location.reload(); //iframe2 > parent (grand parent) 
```

理想...

```
parent.parent.document.getElementById('iframesubmit').location.reload(); 
```

# javascript - 奇怪的变量范围问题

> ID：12005597
> 
> 赞同：0
> 
> 时间：2012-08-17T12:14:31.830
> 
> 标签：javascript, scope

我不太确定为什么会发生这种情况，如果有人可以向我解释这一点，那就太好了。

所以我得到了以下代码：

```
var text = 'yes';
(function f() {
    alert(text);
})(); 
```

它会按预期提示“是”。但如果我像这样扩展它：

```
var text = 'yes';
(function f() {
    alert(text);
    var text = 'no';
})(); 
```

我非常希望这也会提醒“是”，然后覆盖本地范围内的文本变量。但相反，它会发出未定义的警报。

这是在当前的 Chrome 和 Firefox 中测试的，所以这似乎是一种想要的行为？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:16:23.287

变量（和函数）声明被**[提升到](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)**范围的顶部。所以你的代码相当于：

```
var text = 'yes';
(function f() {
    var text;    // shadows the outer variable; initialised with `undefined` 
    alert(text); // still undefined
    text = 'no'; // now it has the value 'no'
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:16:21.307

您将其声明为该范围内的新变量，因此它不会覆盖。尝试：

```
var text = 'yes';
(function f() {
    alert(text);
    text = 'no';
})(); 
```

[演示](http://jsfiddle.net/mht7k/)

# tabs - 折叠表中的图标箭头位置 - Twitter Bootstrap

> ID：12005598
> 
> 赞同：1
> 
> 时间：2012-08-17T12:14:39.310
> 
> 标签：tabs, twitter-bootstrap, collapse

我对 Twitter Bootstrap 中的字体图标和折叠选项卡有疑问。

**我的目标是将图标箭头向下**可视化为默认而不是**向上**，我不想看到第一个折叠选项卡默认打开。

然后，当我单击**向下的图标箭头时，**该图标必须切换开关。

我想我真的很接近它，看看这个例子。

[http://jsfiddle.net/2D3V5/1/](http://jsfiddle.net/2D3V5/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:55:19.100

因此，在关闭所有选项卡的情况下加载手风琴可以通过以下方式实现：

```
$('.collapse').collapse("hide"); 
```

然后你只需要改变图标的​​类：

```
<i class="icon-arrow-down"></i> 
```

然后，您应该将箭头默认指向下方，并在打开选项卡时将箭头指向上方。

在 JS 中似乎有一些奇怪的事情发生在折叠的时候，有时当你打开和关闭标签时，文本没有正确隐藏，我在一个普通的页面上尝试了这个，它似乎工作正常。

# maven - maven-failsafe-plugin 没有执行我的集成测试

> ID：12005600
> 
> 赞同：2
> 
> 时间：2012-08-17T12:14:47.010
> 
> 标签：maven, integration, testng, maven-surefire-plugin, maven-failsafe-plugin

咆哮我实际pom的一部分。集成测试的 Testng 测试已在 @Test 注释中分配了一个“集成”组。为了做小测试，我没有在测试阶段排除“集成”组。

当使用例如 mvn verify 或 mvn install 构建时，集成测试在测试阶段执行，而不是在验证或集成测试阶段执行。运行的测试数仍然为 0。不知何故，它们没有被拾取。有人知道可能出了什么问题吗？

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12.1</version>
    <configuration>
      <skip>false</skip>
    </configuration>
  </plugin>
  <plugin>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.12.1</version>
    <executions>
      <execution>
        <id>integration-test</id>
        <phase>integration-test</phase>
        <goals>
          <goal>integration-test</goal>
        </goals>
        <configuration>
          <skip>false</skip>
          <excludedGroups>unit</excludedGroups>
        </configuration>
      </execution>
      <execution>
        <id>verify</id>
        <phase>verify</phase>
        <goals>
          <goal>verify</goal>
        </goals>
        <configuration>
          <skip>false</skip>
          <excludedGroups>unit</excludedGroups>
        </configuration>
      </execution>
    </executions>
    <configuration>
      <skip>false</skip>
      <excludedGroups>unit</excludedGroups>
    </configuration>
  </plugin> 
```

> 更新：将 TestNG 添加为故障安全插件的依赖项无济于事

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T22:37:55.183

默认情况下，maven-failsafe-plugin 仅包含匹配[以下模式](https://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#includes)的文件：

```
<includes>
 <include>**/IT*.java</include>
 <include>**/*IT.java</include>
 <include>**/*ITCase.java</include>
</includes> 
```

你是如何命名你的测试类的？

# php - 如何使用 SharePoint Online 对 PHP 应用程序进行身份验证？

> ID：12005601
> 
> 赞同：9
> 
> 时间：2012-08-17T12:14:46.877
> 
> 标签：php, sharepoint, authentication, single-sign-on, office365

我们有需要身份验证的 PHP 应用程序，对于运行 SharePoint 的客户，我们希望提供某种 SSO 服务，以便用户可以使用他们的 SharePoint 凭据（我们对 Google Apps、CAS、.. .)

注意：显然，我们的应用程序没有托管在与 SharePoint 相同的域/场所

我找不到关于它的文献，所以欢迎任何指针！

注意：我们希望实现适当的层级身份验证机制，以便用户可以通过键入 URL 直接登录我们的应用程序，并选择使用 SharePoint 登录，就像您使用 OAuth 等一样......

提前致谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-02T16:56:07.240

SharePoint Online (SPO) 支持 *基于声明的身份验证*。

下图演示了如何在 SPO 中执行身份验证：

![在此处输入图像描述](../Images/2d2f031cbada5a72cb23c49035b04b88.png)

根据[这篇文章](http://allthatjs.com/2012/03/28/remote-authentication-in-sharepoint-online/)，身份验证过程包括以下步骤：

> 脚步：
> 
> 1.  向 STS 发送 SAML 请求
> 2.  接收 SAML 响应
> 3.  将安全令牌发送到 SharePoint Online
> 4.  接收认证cookies
> 5.  发送请求，包括身份验证 cookie

* * *

[phpSPO - PHP 的 SharePoint 客户端](https://github.com/vgrem/phpSPO)支持 SPO 身份验证。

> 该库为 PHP 应用程序提供了 SharePoint Online (SPO) 客户端。它允许您使用基于 SharePoint 2013 REST/OData 的 API 对 SharePoint 数据执行 CRUD 操作。

## 例子

如何在 SharePoint Online (SPO) 中执行身份验证：

```
try {
    $client = new SPOClient($url);
    $client->signIn($username,$password);
    echo 'You have authenticated successfully\n';
}
catch (Exception $e) {
    echo 'Authentication failed: ',  $e->getMessage(), "\n";
} 
```

以下示例演示了如何对 SharePoint 列表数据执行 CRUD 操作：

```
<?php

require_once 'SPOClient.php';

$username = 'username@tenant.onmicrosoft.com';
$password = 'password';
$url = "https://tenant.sharepoint.com/";

$client = new SPOClient($url);
$client->signIn($username,$password);

//Get Tasks list
$listTitle = 'Tasks';
$list = $client->getList($listTitle);

//Create a Task item
$itemProperties = array('Title' => 'Order Approval', 'Body' => 'Order approval task');
$taskItem = $list->addItem($itemProperties);
print "Task '{$taskItem->Title}' has been created succesfully.\r\n";

$itemId = $taskItem->Id;
//Update a Task item
$itemProperties = array('PercentComplete' => 1);
$list->updateItem($itemId,$itemProperties);

//Delete a Task item
$list->deleteItem($itemId);

?> 
```

## 参考

[适用于 PHP 的 SharePoint Online 客户端](http://blog.vgrem.com/2014/05/31/sharepoint-online-client-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T19:08:47.000

不确定您是否仍需要这方面的帮助 - Sharepoint 通常设置为与 Active Directory (AD/LDAP) 同步。因此，如果您的用户使用 sharepoint 并且正在通过他们的 Active Directory 登录在他们的公司内部进行身份验证，那么您可能想要查看的是针对 LDAP 验证您的应用程序（并使用电子邮件地址或域 ID 作为用户名）

这里有更多信息： [Authenticating in PHP using LDAP through Active Directory](https://stackoverflow.com/questions/171519/authenticating-in-php-using-ldap-through-active-directory)

# android - 如何在android的相对布局中的特定点添加自定义视图？

> ID：12005602
> 
> 赞同：0
> 
> 时间：2012-08-17T12:14:50.847
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/07cdb90115335d41c381560cc89f60f4.png)您好正在开发带有图形视图的 android 应用程序。我有一个开源图形应用程序来用图形线显示我的值。这是我在添加视图时遇到的问题。我无法使用相对布局正确添加我的自定义视图。在这里，我附上了我的自定义视图对齐方式。

在该图像中，第 1 点是我尝试添加 mt 自定义视图时的结果。但我需要添加它，如 2\. 部分所示。我的自定义视图如 3 中所示。我得到该行以 x,y 开始并以 x,y 值结束。我尝试了该值，但我得到了 2 部分的结果。请给我任何建议或让我知道是否需要任何对齐。

我的代码就像

```
View View v1=infalter.inflate(R.layout.bullet, null);
RelativeLayout.LayoutParams rl=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
rl.setMargins(myX,myY, 0, 0);
mRelative.addView(v1,rl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:30:20.783

你正在为你得到的 x, y 点设置边距，所以视图将从左上角的 x, y 开始，这就是你得到的。你想对齐视图的底部中心，所以你需要计算这个。

所以：

顶部= y - viewHeight

左= x - viewWidth/2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:23:03.073

我不知道您的 myX 和 myY 值是什么，但看起来您正试图将右上角与分别应用于右侧和顶部的 x 和 y 边距对齐。如果确实如此，您可能最好使用以下方法：

```
 rl.setMargins(0, 0, myX, myY);
        rl.addRule(RelativeLayout.ALIGN_PARENT_RIGHT); 
```

setMargins 的参数顺序如下：左、上、右、下。如果您的 myX 值是右边距并且您希望对象右对齐，则上面的代码将指定这两个首选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:23:17.860

在使用相对布局来提供帮助屏幕覆盖时，我遇到了奇怪的事情，不得不设置相对于右下角而不是左上角的边距。所以我有一个规则来对齐底部和右边的视图+边距。

也许这会有所帮助。

# android - 在自定义视图中访问标准布局属性

> ID：12005603
> 
> 赞同：0
> 
> 时间：2012-08-17T12:15:01.953
> 
> 标签：android, android-layout, attributes

我想从传递给我的自定义视图的构造函数的标准属性中提取宽度规范和高度规范，这样当我想显示在活动锁定中旋转为纵向的视图时，我可以调整它们并作为新的布局参数传回。

我无法找到需要传递的 intarray 中的静态 int 值的名称以获取这些原始值。他们在哪里？

```
public static final int[] stdatts = {valForandroid:layout_width,...height,...gravity};
TypedArray natts = getContext().getResources().obtainAttributes(attrs, stdatts);
int widset = natts.getInteger(valForandroid:layout_width, 0);
int hitset = ....;
int gravset = .....;
if (orientIsV) 
  FrameLayout.LayoutParams reset = new FrameLayout.LayoutParams (widset, hitset, gravset);
else 
  FrameLayout.LayoutParams reset = new FrameLayout.LayoutParams (hitset, widset, gravset); 
```

通过查看我实际通过的属性数组，我可以很容易地找到这些值，但这显然是一个非常肮脏且不可靠的修复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:18:27.477

不是我预期的答案——我放弃了尝试以这种方式处理这个问题——数据格式很难理解。这是扩展的 relativelayout 类的部分代码，该类旋转，保持其中的所有内容不变，它还保持左/右对齐正确并正确处理触摸事件。例如，它将允许嵌套的 Seekbar 位于任何方向，从而避免了对特殊情况下的 seekbar 的需要。

```
public void setOrientation() {
  if (rSource == RotateSetBy.globalStatic) {
    currRotate = PootleViewExtras.deviceOrient;
  }
  boolean isVert = currRotate == Orientations.up || currRotate == Orientations.down;
  if (lockSize > 0 && widthAtt < 0 && heightAtt < 0) {
    int lws = 0;
    int lhs = 0;
    if (isVert) {
      lws = widthAtt;
      lhs = heightAtt;
    } else {
      lhs = widthAtt;
      lws = heightAtt;
    }
    int setgrav = gravityAtt & 0x11; // messy but seems to do the right things
    if   (currRotate == Orientations.down ) {
      if ((gravityAtt & 0x2) != 0) setgrav |= 0x4;
      if ((gravityAtt & 0x4) != 0) setgrav |= 0x2;
      if ((gravityAtt & 0x20) != 0) setgrav |= 0x40;
      if ((gravityAtt & 0x40) != 0) setgrav |= 0x20;
    } else {
      setgrav = gravityAtt;
    }  

    FrameLayout.LayoutParams reset = new FrameLayout.LayoutParams (lws, lhs, setgrav);
    this.setLayoutParams(reset);
  }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

  boolean isVert = currRotate == Orientations.up || currRotate == Orientations.down;
  if (isVert)  {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    lastWidth = this.getMeasuredWidth();
    lastHeight = this.getMeasuredHeight();
  } else {
    super.onMeasure(heightMeasureSpec, widthMeasureSpec);
    lastHeight = this.getMeasuredWidth();
    lastWidth = this.getMeasuredHeight();
  }
  setMeasuredDimension(lastWidth,lastHeight);
  switch (currRotate) {
    case up:
      mForward.reset();
      mForward.postRotate(0);
      mForward.invert(mReverse); 
      break;
    case right:
      mForward.reset();
      mForward.postRotate(90,lastWidth/2,lastWidth/2);
      mForward.invert(mReverse); 
      break;
    case down:
      mForward.reset();
      mForward.postRotate(180,lastWidth/2,lastHeight/2);
      mForward.invert(mReverse); 
      break;
    case left:
      mForward.reset();
      mForward.postRotate(-90,lastHeight/2,lastHeight/2);
      mForward.invert(mReverse);
      break;
  }
}

@Override
protected void dispatchDraw(Canvas canvas) {
  if (currRotate == Orientations.up) {
    super.dispatchDraw(canvas);
  } else {
    canvas.save();
    canvas.concat(mForward);
    super.dispatchDraw(canvas);
    canvas.restore();
  }
}

@Override
public boolean dispatchTouchEvent(MotionEvent event) {
//    if (currRotate == Orientations.up){
//      return super.dispatchTouchEvent(event);
//    } else {
  final float[] temp = mTemp;
  temp[0] = event.getX();
  temp[1] = event.getY();

  mReverse.mapPoints(temp);
  event.setLocation(temp[0], temp[1]);
  return super.dispatchTouchEvent(event);
//    } 
```

# ibm-mq - 如何在多个远程客户端之间共享 Websphere MQ QM 和监听器？

> ID：12005608
> 
> 赞同：2
> 
> 时间：2012-08-17T12:15:25.377
> 
> 标签：ibm-mq

为了利用系统资源，我需要在多个客户端之间共享一个 QM 及其侦听器。

我关心的是安全 - 访问控制。由于所有客户端都可以访问侦听器端口，因此我无法使用防火墙来管理访问权限。

我如何确保客户只能访问共享 QM 下的特定队列？我知道我可以将 MCAUSER 分配给客户端级别的频道，但是，是什么让客户端只能连接到特定的频道？

我已将 MCAUSER 分配给频道并设置权限。现在，从客户端 java JMS API，我如何连接到该特定通道，以及什么禁止其他客户端连接到该特定通道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:14:58.150

你在正确的轨道上。我建议阅读 IBM 会议的安全演示作为背景。转到[此页面](http://t-rob.net/links)并向下滚动一下。

请记住，客户端可以指定任何频道名称，*而*不是您为其配置的频道名称，因此除了在一个频道上设置 MCAUSER 之外，您还需要在*所有*频道上设置它。频道命名`SYSTEM.DEF.*`并`SYSTEM.AUTO.*`应使用不能用作 valis 用户 ID 的 MCAUSER 禁用。我们目前建议使用`MCAUSER('*NOACCESS')`，因为`*NOACCESS`它是 WMQ V7.1 及更高版本中的保留字。

现在您已经阻止了未使用的通道，您需要安排将客户端连接映射到它们各自的用户 ID。您执行此操作的方式会有所不同，具体取决于您拥有的 WMQ QMgr 版本。在 V7.0 及更早版本中，它需要退出。[MrMQ.dk 的BlockIP2](http://mrmq.dk)出口是社区多年来做出的贡献，由 IBM 员工拥有和维护。在 V7.1 及更高版本中，BlockIP2 中的功能已在 WMQ 中作为 CHLAUTH 规则本地实现。

具体来说，出口或 V7.1 中的 CHLAUTH 规则允许您将连接客户端的断言 ID、IP 地址或 SSL 可分辨名称映射到用户 ID，以便在建立通道连接时放入 MCAUSER。

如果您需要验证用户 ID 和密码，那么您需要编写或购买出口来执行此操作。WMQ 和 BlockIP2 目前都不会验证 ID 和密码。但是，Capitalware 等业务合作伙伴出售的出口就是这样做的。如果您希望编写这样的出口，BlockIP2 源代码是一个不错的起点。

# javascript - Javascript C++ 绑定？

> ID：12005610
> 
> 赞同：11
> 
> 时间：2012-08-17T12:15:28.967
> 
> 标签：javascript, c++

我有一些 C++ 代码，我想向 Web 应用程序的客户端公开。理想情况下，我想为我的 C++ 类编写 Javascript 包装器对象，以便我可以在客户端使用它们。

这是以前做过的吗？有没有人有一个链接来展示如何实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T03:05:38.780

有一个库可以将 C++ 代码转换为 javascript，它可能会有所帮助： [emscripten](https://github.com/kripken/emscripten/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:28:16.810

Libjspp 基于 C++ 模板的包装器，用于嵌入和扩展 Javascript 引擎 spidermonkey 1 。8\. 5个及以上

蜘蛛猴？是 Mozilla Project 的 Javascript/ECMAScript 引擎。

Libjspp 允许 C++ 开发者嵌入 SpiderMonkey？简单轻松地进入他们的应用程序。Libjspp 允许在同一进程中运行多个 Javascript 引擎，这适合每个线程一个引擎 para dime，这有助于实现真正的 parallisim。Libjspp 也无法阻止用户在引擎中运行多个线程。

[http://code.google.com/p/libjspp/](http://code.google.com/p/libjspp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:01:56.373

我想[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)就是你想要的。您需要使用某种框架在服务器端包装您的函数。我还没有使用它，但[这个](http://xmlrpc-c.sourceforge.net/)看起来很有希望。

在客户端，您使用代理对象来分派函数调用。通信通常通过 XML-RPC 或 JSON-RPC 处理。我使用[了这个客户端框架](http://ajaxrpc.com/)并且很满意，但我相信你会[发现很多其他](https://stackoverflow.com/questions/1143772/what-is-the-best-javascript-xml-rpc-client-library)的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-22T16:45:56.700

这是一个古老的话题，但是，我现在处于确切的情况，并且我在网上找到的所有解决方案都很复杂或过时。

最近，我遇到了一个支持 V8 引擎的库（包括新的隔离 API，它使我发现 90% 的库都过时了）并提供了很好的曝光和交互 API。

[https://github.com/QuartzTechnologies/v8bridge](https://github.com/QuartzTechnologies/v8bridge)

我希望我的解决方案能帮助任何人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-17T21:06:50.890

有一个相对较新的库用于执行此操作，称为[nbind](https://github.com/charto/nbind)。也许那会适合你？它对我来说看起来非常好，我正要开始使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T12:26:59.647

如果 C++ 代码必须在客户端上，那么对于 Web 应用程序来说没有简单的方法可以做到这一点。解决方案可能涉及为您想要支持的浏览器编写插件，然后可以从 javascript 代码访问这些插件。

例如，如果您需要将其用于客户端应用程序，则另一种情况。这样的事情已经完成，涉及将您的应用程序链接到（或从外部运行）与例如铬库或任何其他 javascript 执行引擎。这样，您可以创建与 C++ 类的绑定并使用来自 javascript 的此类对象，反之亦然。请注意，这也不是一个简单的解决方案，可能需要付出很大的努力才能实施（也需要额外的资源）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T12:30:18.613

例如，您可以将 C++ 类包装在 PHP 或 Python 中，然后通过 HTTP 实现 API 以访问所需的函数。

或者，如果您坚持将函数公开为 JavaScript，您可以尝试使用 Node.js，并创建一个 C++ 插件来包装您的类。请参阅此处的 Node.js 文档：[http ://nodejs.org/api/addons.html#addons_wrapping_c_objects](http://nodejs.org/api/addons.html#addons_wrapping_c_objects)

但无论哪种方式，我认为都不要避免创建某种 API（HTTP SOAP、XML RPC）来访问服务器上的功能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T12:23:13.353

我想你想要一个 C++ JSON 解析器。你应该可以在这里找到一个[http://www.json.org/](http://www.json.org/)。它可能无法满足您的所有需求，因为它只是序列化和反序列化 C++ 对象而没有任何行为，但它应该足够好。有关一些讨论，请参阅[https://stackoverflow.com/questions/245973/whats-the-best-c-json-parser](https://stackoverflow.com/questions/245973/whats-the-best-c-json-parser)。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-02-18T11:14:43.363

虽然[QML](http://doc.qt.io/qt-5/qtqml-index.html)不完全是 Javascript，但[Qt](http://qt-project.org/)也不是纯 C++，但它们一起做的看起来就像你需要的一样

# ruby-on-rails - 如何在不影响页面加载的情况下在后台运行延迟的作业插入 - Rails

> ID：12005616
> 
> 赞同：-1
> 
> 时间：2012-08-17T12:15:44.740
> 
> 标签：ruby-on-rails, ruby, delayed-job

我有一个 RoR 应用程序，例如发布问题的答案。如果用户回答了问题，则通知消息将发送给所有用户，这些用户将问题列入观察名单、跟踪问题的人以及问题的所有者。我正在使用延迟作业来创建通知消息。因此，在创建答案时，有许多插入到延迟的作业表中，这会减慢页面加载速度。创建答案后，重定向到问题显示页面需要更多时间。

目前我正在使用 AJAX 请求插入答案表。AJAX 请求完成后，有没有办法在后台插入延迟作业表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:08:52.703

正如我们一直试图在评论中说的：

听起来你有类似的东西：

```
User.all.each do |user|
  user.delay.some_long_operation
end 
```

这最终会在延迟作业中插入大量行。我们建议将代码重构为延迟的作业本身，大致如下：

```
def delayed_operation
  User.all.each do |user|
    user.some_long_operation
  end
end

self.delay.delayed_operation 
```

显然，您必须适应它，并且可能将其`delayed_operation`放入模型库的某个地方，可能作为类方法......但关键是将`delay`调用放在大查询和循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:32:00.857

我真的建议在一个单独的过程中这样做。为什么用户要等待这些元操作？坚持提供结果页面，只通知你的服务器必须做的事情。

创建一个单独的模型 PostponedAction 以构建“待办事项”操作列表。如果您发布答案，请向此数据库添加一个 PostponedAction，并带有答案 ID 的参数。然后将结果返回给用户。

使用单独的进程（cron 作业）来读取 PostponedAction 项并处理这些项。将它们标记为“已处理”或在成功处理时删除。这样，用户就不会被缓慢的服务器进程所困扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:42:32.153

除了您目前拥有的电子邮件工作之外，还可以发明另一种类型的工作来处理这些工作的创建。

```
def email_all
  User.all.each do |user|
    user.delay.email_one()
  end
end

def email_one
  # do the emailing
end

self.delay.email_all() 
```

这样，用户操作只会在他们看到响应之前触发一次插入。您还可以跟踪单个作业。

# svn - 仅构建颠覆客户端

> ID：12005618
> 
> 赞同：1
> 
> 时间：2012-08-17T12:15:49.520
> 
> 标签：svn, client, debian

我需要在 Debian 5.0 上更新 subversion 客户端，并决定从源代码构建客户端。但是带参数的配置`--without-berkeley-db --without-apache --without-apxs --without-swig --with-ssl`返回错误：

> 检查 APR... no configure: WARNING: APR not found 找不到 Apache Portable Runtime (APR) 库。

如果我使用参数 --without-apr 运行配置工具，则会收到 ext 错误：

> 检查 APR... 配置：错误：--with-apr 需要提供目录或文件

我必须打印哪些参数仅用于构建客户端，没有服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:20:51.533

我找到了另一个解决方案：

```
sudo echo "deb http://opensource.wandisco.com/ubuntu lucid svn17" > /etc/apt/sources.list.d/svn.list
sudo wget -q http://opensource.wandisco.com/wandisco-debian.gpg -O- | sudo apt-key add -
sudo apt-get update
sudo apt-get install subversion` 
```

# javascript - 是否可以使用javascript获取从浏览器访问的上一页的URL

> ID：12005620
> 
> 赞同：2
> 
> 时间：2012-08-17T12:15:55.750
> 
> 标签：javascript, url

我在 A 页。

现在我点击页面 A 并重定向到页面 B。现在我点击页面 B 并重定向到页面 A。

这里我想知道页面B的url。

我试过 document.referrer 但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:25:13.607

document.referrer 在用户单击链接以导航到当前页面时起作用，但我认为当您在 Javascript 函数中进行手动重定向时它不起作用。

我能想到的唯一方法是在用户被重定向到当前页面之前存储页面的 URL。

您可以将其存储在隐藏形式或 cookie 中。

这个问题之前也有人问过，值得在这里快速阅读。[你如何在 Javascript 中获取以前的 url？](https://stackoverflow.com/questions/3528324/how-do-you-get-the-previous-url-in-javascript)

我从中提取了这个 cookie 示例来向您展示我的意思。

```
$.cookie("previousUrl", window.location.href, {path:"/"}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:25:54.327

您无法*知道*上一页的 URL，但您可以使用链接到它

```
window.history.back(); 
```

或者

```
window.history.go(-1); 
```

如果您想知道*是否*有上一页，请检查

```
window.history.length; 
```

如果大于 0，则有上一页。请参阅[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

# excel - VBA控制功能区？

> ID：12005621
> 
> 赞同：3
> 
> 时间：2012-08-17T12:15:58.137
> 
> 标签：excel, ribbon, vba

我正在为 Excel 2010 创建 VBA 加载项，并使用“ [Microsoft Office 自定义 UI 编辑器](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/08/07/7293.aspx)”工具创建自己的功能区。但是，我希望用户可以选择在不显示功能区或显示功能区的不同部分的情况下加载我的加载项。

使用菜单，我知道您可以完全以编程方式控制它们，但功能区的工作方式似乎有所不同。

VBA 中有没有办法在启动时*不*加载我的`customUI.xml`功能区选项卡？
有没有办法在运行时从这些选项卡中删除（或添加项目）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T14:19:49.763

这里有关于这个主题的大量帮助[Awesome Ribbon Help](http://www.rondebruin.nl/win/section2.htm)。我认为您对第 2 点和第 3 点特别感兴趣。

# java - 如何使用硬编码的 html 页面发送 servlet 响应？

> ID：12005626
> 
> 赞同：0
> 
> 时间：2012-08-17T12:16:05.533
> 
> 标签：java, jakarta-ee, servlets

我想用硬编码但动态的 html 响应来响应 url 请求。

有比以下方式更好的方法吗？

```
public void doGet(HttpServletRequest request,
        HttpServletResponse response)
{
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();

    out.println("<html>");
    out.println("<head>");
    out.println("<title>Hola</title>");
    //
} 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:18:29.240

一种方法是在您的 servlet 中转发响应：

```
getServletContext().getRequestDispatcher("mypage.html").forward(request, response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:34:46.863

不清楚您所说的“硬编码但动态的 html 响应”是什么意思。

如果你的意思是你有一些现有的 HTML 文件，并且想根据请求参数选择一个，那么你的 servlet 可以使用[Class.getResourceAsStream()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)来加载文件。您需要将文件打包到类路径中，如果您使用 Maven 之类的工具，这很容易，而使用 Ant 之类的工具则稍微困难一些，如果您只是从 Eclipse 或命令行进行构建，则很难维护。

如果您的意思是您有一个模板文件并想以某种方式更改内容，请使用[JSP](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro.html#wp100465)。

# internet-explorer - IE 8：背景大小：自动 100%，工作解决方案？

> ID：12005637
> 
> 赞同：0
> 
> 时间：2012-08-17T12:16:32.250
> 
> 标签：internet-explorer, background, css

我试图在 div 中有一个 100% 的背景高度，并在 x 轴上重复 bg。

使用此代码，它适用于大多数现代浏览器：

```
background: url(/img/bg.jpg);
background-size: auto 100%; 
```

但是背景大小不适用于 IE <= 8。所以我正在寻找一种解决方案来让它至少在 IE 8 上工作。

我知道 IE 过滤器代码，但这只会在它的容器 div 中拉伸 bg。但我需要bg重复。

有什么可行的解决方案吗？也许用 jQuery？填充物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:39:34.527

不支持背景大小。在这种情况下，我做的一个 css 技巧是拥有一个真实的图像并设置为背景。假设您的所有内容都适合一个名为`<div id="myLargeBGDiv">`.

你需要制作那个 div`position: relative;` 然后你制作一个绝对定位的图像并将其设置为`top: 0;`and `left: 0;`。

然后，您还将内容 div 放在那里，`position: relative;`同时在图像和内容 div 上设置 z-index。

这是一个示例。

**CSS**

```
<style type="text/css">
    /*This stretches by width. Set the element's height to 100% where needed. It will work that way as well.*/
    #myLargeBgDiv {position:relative;width:100%;}

    #stretchMe {position:absolute;top:0;left:0;width:100%;height:auto;z-index:33;}

    #myContentDiv {position:relative;z-index:50;}
</style> 
```

**HTML**

```
<!--html-->
<div id="myLargeBgDiv">
   <img id="stretchMe" src="path/to/image.png" />
   <div id="myContentDiv">
      THIS IS SOME CONTENT THAT GOES OVER THE IMAGE CREATING THE EFFECT OF BG IMAGE
   </div>
 </div> 
```

在绝对位置不会将元素“关闭”的旧浏览器中，您可能还需要“myContentDiv”作为绝对位置，但这会限制您在内容高度方面看到的限制。之前进行测试以确保它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:22:48.703

查看此链接[IE 8: background-size fix](https://stackoverflow.com/questions/4885145/ie-8-background-size-fix)

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale')"; 
```

# textbox - 如何在 C++/CX 上为 Windows Metro Style 应用程序编写文本框控件？

> ID：12005640
> 
> 赞同：1
> 
> 时间：2012-08-17T12:16:33.690
> 
> 标签：textbox, microsoft-metro, ui-automation, soft-keyboard, c++-cx

我需要为 Metro Style 应用程序编写一个文本框控件。当我的应用程序在平板电脑上运行时，我需要这个文本框可以调用触摸键盘。

微软建议我：

> 如果您正在编写自定义文本控件（无论是否在 Xaml 中），您需要确保它支持 UI 自动化 TextPattern 和 ValuePatterns 并关注更改事件

和

> 您将需要提供一个支持 ITextProvider 和 IValueProvider 的 AutomationPeer。

但我无法弄清楚我实际上需要做什么。我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T06:42:51.713

您需要实现一个 UI 自动化提供程序；特别是，您需要实现一个服务器端提供程序。从[UI Automation Provider Programmer's Guide](http://msdn.microsoft.com/en-us/library/windows/desktop/ee671596%28v=vs.85%29.aspx)开始，并特别注意[Document Content Provider Sample](http://go.microsoft.com/fwlink/p/?linkid=241458)，因为它演示了如何实现 TextPattern。在 samples/ui/uiautomation 目录中有更多示例作为[Windows 8 SDK的一部分。](http://go.microsoft.com/fwlink/?LinkID=226658)[此外，这里](http://www.code-magazine.com/Article.aspx?quickid=0810112)还有一个关于服务器端介绍的快速介绍，由 UI 自动化的一位架构师编写。

# c++ - C/C++ 中的运算符优先级和关联性

> ID：12005642
> 
> 赞同：4
> 
> 时间：2012-08-17T12:16:39.550
> 
> 标签：c++, c, operator-precedence, associativity

[[请注意，这与运算符优先级](https://stackoverflow.com/questions/4897934/operator-precedence-and)无关。 () 和 ++ ，[未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)，[为什么这些构造（使用 ++）未定义的行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)和数百个类似的问题在这里]

* * *

**很快**：标准是否保证了**关联**性？

**详细示例**：来自[维基百科](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)的文章运算符优先级，`operator*`并且`operator/`具有相同的优先级并且它们是`Left-to-right`运算符。这是否意味着，*该标准**保证***，这：

```
int res = x / y * z / t; 
```

将被评估为

```
int res = ( ( x / y ) * z ) / t; 
```

或者它的实现定义？

如果有保障，可以报价吗？

* * *

[只是出于好奇，我总是在这些情况下写括号。]
[准备删除问题，如果有这样的问题。]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:20:01.883

来自最新公开的[草稿](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)

**5.6 乘法运算符 [expr.mul]**

> 1 乘法运算符 *、/ 和 % 从左到右分组。
> 
> ```
> multiplicative-expression:
> pm-expression
> multiplicative-expression * pm-expression
> multiplicative-expression / pm-expression
> multiplicative-expression % pm-expression 
> ```

所以解析会像：

```
int res = x / y * z / t;
int res = (x / y * z) / t;
int res = ((x / y) * z) / t; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T12:19:39.820

n3337 5.6/1

**乘法运算符 *、/ 和 % 从左到右分组。**

阅读 5 par 标准。

# c++ - 将 RAII 结构作为二维数组传递给函数

> ID：12005643
> 
> 赞同：0
> 
> 时间：2012-08-17T12:16:42.567
> 
> 标签：c++, multidimensional-array

有一个函数，接受二维数组：

```
void foo ( double ** p ) 
{ /*writing some data into p*/ } 
```

我不想将原始二维数组传递给这个函数，因为我不想管理内存调用`new`和`delete`. 另外我不想将函数签名更改为`void foo ( std::vector< std::vector<double> >& )`. 而且我不能`foo`作为模板函数（在我的项目中它是一个 COM 接口方法）。

我想传递一些 RAII 对象来装饰它，比如

```
void foo ( double * p ){}
std::vectore<double> v(10);
p( &v[0] ); 
```

有没有办法为二维数组做到这一点？我试过

```
std::vector< std::vector<int> > v;
foo( &v[0][0] ) 
```

和

```
std::vector< std::tr1::shared_ptr<int> > v; 
```

但我得到编译错误`error C2664 - cannot convert parameter`。

另外，在这种情况下，可以确定函数内部的原始地址算术可以正常工作吗？

没有 C++11，二维数组的大小是已知的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:23:38.757

一种可能的解决方案是更改：

```
std::vector< std::vector<int> > v;
foo( &v[0][0] ) 
```

到

```
std::vector< std::vector<int> > v;
std::vector<int*> v_ptr;
for (...) {
    v_ptr[i] = &v[i][0];
}
foo( &v_ptr[0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T09:36:36.137

尽管 Andreas 已经回答了您的问题，解决了您的特定问题，但我想指出，尽管这有效，但可能不是您想要做的。

当您使用 C++（而不是更容易使用的语言）时，我假设您关心性能。在这种情况下，您的方法很可能从一开始就是错误的，因为它`double**`表示数组数组（或者更确切地说*可以表示*）而不是 2D 数组。为什么这很糟糕？因为，就像`std::vector< std::vector<int> >`示例一样，需要多次分配，并且生成的内存是不连续的（这对缓存不利），这与`double array[N][M]`.

对于 2D 数组，您实际上应该使用具有索引计算的 1D 数组，这对缓存更加友好。这当然不允许`[x][y]`- 样式索引（相反，您必须使用`[x+N*y]`or `[y+M*x]`，这取决于您选择“Fortran 顺序”或“C 顺序”），但可以避免缓存问题，并且只需要一次分配（和一个简单的`double*`指针）。

如果您要迭代数组的所有元素，如

```
for(unsigned x = 0; x < N; ++x) for(unsigned y = 0; y < M; ++y)
{
    unsigned idx = y + M * x;
    p[idx] = bar(x, y); // equivalent to p[x][y] = bar(x,y) in the array-of-arrays case
} 
```

您甚至可以避免乘法，因为这基本上只是一个 1D 迭代，并额外生成了 2D 索引

```
for(unsigned x = 0, idx = 0; x < N; ++x) for(unsigned y = 0; y < M; ++y, ++idx)
{
    p[idx] = bar(x, y);
} 
```

# ajax - rails 通过 jquery 插入 ajax

> ID：12005651
> 
> 赞同：0
> 
> 时间：2012-08-17T12:17:02.580
> 
> 标签：ajax, ruby-on-rails-3

再会！我正在尝试在我的 rails 测试应用程序中实现 ajax。我的控制器代码 app/controllers/admin/data

```
class Admin::DataController < ApplicationController
...  
  def ajax
   if  params[:ajax] == 'list'
 @responce = Admin::Datum.all
   else
     @responce ={error: true}
   end
    respond_to do |format|
      # format.html { redirect_to @user }
      # format.js
      format.json { render json: @responce }
    end
  end
    end 
```

index.js.erb

```
alert('1');
$.post('/admin/data/ajax',{ajax:'list'},function(responce){
alert('2');
console.log(responce);
}
); 
```

你能帮我确定我必须在 ajax 中使用的 url 来访问 ajax 方法吗？或任何其他帮助都非常受欢迎！

**更新 1 更新了初始代码以表示更复杂的问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:02:45.823

我添加到 routes.rb

```
 match 'admin/data/ajax' => 'Admin::Data#ajax' 
```

可以是任何网址，这是您在 jquery 中编写的内容。它有效！

# php - Magento - 后端 - 尝试查看订单时出错

> ID：12005652
> 
> 赞同：1
> 
> 时间：2012-08-17T12:17:05.403
> 
> 标签：php, mysql, magento, memcached

当我想在我的 Magento 商店（后端）中查看订单时，我收到此错误：

注意：未定义的索引：第 40 行 /home/users/[username]/[domain]/app/design/adminhtml/default/default/template/sales/order/totals/tax.phtml 中的百分比

这是一个新错误，以前没有发生过。我最近没有安装任何扩展（安装最新的扩展后一切仍然有效）。

开发服务器没有这个问题。实时和开发之间的唯一区别是实时服务器使用 memcached，而开发服务器不使用。（开发有最新的文件，现场也是如此。开发数据库是现场数据库的新副本）

我已经清除了实时服务器上的缓存，但问题并没有消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T04:00:36.143

这只显示：

*   对于包含可配置产品的订单
*   如果配置选项 sales -> tax -> orders display settings -> display full tax summary 为 ON
*   如果您的 PHP 错误报告设置会显示通知

它已在 Magento 1.7 中修复。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-17T12:51:15.820

查看 index.php 并更改

```
error_reporting(E_ALL | E_STRICT); 
```

至

```
error_reporting(0); 
```

这应该隐藏通知，但也会隐藏（可能）重要通知。

# lua - 子弹的lua绑定

> ID：12005653
> 
> 赞同：0
> 
> 时间：2012-08-17T12:17:18.320
> 
> 标签：lua, swig, bullet

libbullet 是否有任何 lua 绑定？

尝试使用 swig 并简单地`%include`输入 BulletDynamicsCommon.h：

```
%module ybullet 
%{
  #include <btBulletDynamicsCommon.h>
%}
%include "%BULLET_inc_path%/btBulletDynamicsCommon.h" 
```

但这不起作用，因为它还只包含其他文件，这些文件被 swig 忽略：

```
ybullet/helloWorld.lua:4: attempt to call field 'btDbvtBroadphase' (a nil value) 
```

我的 lua 文件是从[http://bulletphysics.org/mediawiki-1.5.8/index.php/Hello_World移植的](http://bulletphysics.org/mediawiki-1.5.8/index.php/Hello_World)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:44:09.577

找到了一种使用 swig 和 zsh 脚本自动`%include`从头文件中提取 s 的方法：[https ://github.com/nonchip/YEngine/blob/master/ybullet/ybullet.i.tpl](https://github.com/nonchip/YEngine/blob/master/ybullet/ybullet.i.tpl)

# api - 如何使用 Unfuddle API 获取文件？

> ID：12005654
> 
> 赞同：1
> 
> 时间：2012-08-17T12:17:23.797
> 
> 标签：api, http, unfuddle

正如您即将看到的那样，我是网络编程的新手。

我正在尝试使用他们的 API 定期从 Unfuddle 检索文件。我尝试了他们的第一个代码示例，它似乎从我的`HTTP GET`调用中返回了有效信息，但我不知道如何使用这些信息将特定文件放到我的硬盘上。这是怎么做到的？

这是我的确切 HTTP GET 调用和响应（密码被替换除外）：

```
bmihura@bmihura-PC ~
$ curl -i -u bmihra:password -X GET \
>   -H 'Accept: application/xml' \
>   'http://spowertech.unfuddle.com/api/v1/projects/projects.xml'
HTTP/1.1 302 Found
Server: nginx/1.0.5
Date: Fri, 17 Aug 2012 11:53:23 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.8
Vary: Accept-Encoding
Cache-Control: no-cache
Set-Cookie: authenticated=; domain=.unfuddle.com; path=/; expires=Thu, 01-Jan-19                               70 00:00:00 GMT
Set-Cookie: authenticated=false; path=/; expires=Fri, 17-Aug-2012 13:51:24 GMT
Set-Cookie: unfuddle_secure=; domain=.unfuddle.com; path=/; expires=Thu, 01-Jan-               1970 00:00:00 GMT
Set-Cookie: _unfuddle_session=; domain=.unfuddle.com; path=/; expires=Thu, 01-Ja               n-1970 00:00:00 GMT
Set-Cookie: _unfuddle_session=BAh7BjoPc2Vzc2lvbl9pZCIlZGIzOTlmMTcxZGIwZjE4MDRhZW               RkZGVmOGI4YjIxNzM%3D--0833ed386e5cd62894bb8dd787d856545897df35; path=/; expires=                           Fri, 17-Aug-2012 13:53:24 GMT; HttpOnly
Location: https://spowertech.unfuddle.com/projects/projects
Content-Length: 115
Status: 302

<html><body>You are being <a href="https://spowertech.unfuddle.com/projects/proj               ects">redirected</a>.</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:29:10.270

You need to use https instead of http in the url at the bottom - i.e.

```
curl -i -u bmihra:password -X GET \
   -H 'Accept: application/xml' \
   'https://spowertech.unfuddle.com/api/v1/projects/projects.xml' 
```

In addition, to get it to work via my windows machine I had to replace the ' with " in the -H and remove the ' around the url. So I ended up using

```
curl -i -u bmihra:password -X GET \
   -H "Accept: application/xml" \
   https://spowertech.unfuddle.com/api/v1/projects/projects.xml 
```

Hope that helps!

# ruby-on-rails - 从狂欢商务中的购买中导出 xml 文件中的数据

> ID：12005656
> 
> 赞同：0
> 
> 时间：2012-08-17T12:17:26.987
> 
> 标签：ruby-on-rails, ruby, xml, export, spree

我需要将 spree commerce 中的购买数据导出到 xml。这个想法是，当购买完成时，数据（名称、用户名、产品）应该自动导出到 xml 文件中。我是 ruby​​/rails 和 spree 的新手，不知道该怎么做 - 谁能帮我解决这个问题？

使用：ruby 1.9.3p194 Rails 3.2.7 Spree 1.1.3

谢谢雷托

数据交换将通过 SOAP 接口完成 - 我只需要生成 xml 文件，其余部分将由其他部分完成 感谢 Reto

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:37:33.133

RoR 允许您以您选择的格式呈现数据：html、xml、json 等。您可以在控制器中所需操作的 respond_to 块中添加以下内容：

```
format.xml  { render :xml => @purchase.to_xml, :only => [:name, :username, :product] } 
```

考虑到您的购买对象具有所需的字段并且您只需要显示这些字段，您可以执行与上述示例类似的操作。
:only 选项采用模型属性数组，您的 xml 将仅显示这些属性。
有关更多选项，请参阅[此文档](http://api.rubyonrails.org/classes/ActiveRecord/Serialization.html#M001145)。

此 xml 将通过 URL 提供：www.your-website.com/your-action.xml。

# c# - 不同用户之间存在相同的会话值

> ID：12005657
> 
> 赞同：0
> 
> 时间：2012-08-17T12:17:27.823
> 
> 标签：c#, asp.net

我正在开发 Intranet Web 应用程序。在 Global.asax 文件的 session_start 事件中，我使用 user.identity 获取域身份并将其放入会话值中。现在我有一个母版页，我正在访问该会话值以显示用户名。

我正在使用 Windows 身份验证和身份模拟真实。但是在发布之后，首先登录系统的用户名会显示给所有人。

我无法找出原因。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:27:19.763

没有一些示例代码很难确定问题，但我可以猜到发生了什么。

您是否了解打开一个新的 Web 浏览器选项卡，或者只是在同一个选项卡中打开相同的 URL 可能会启动一个新会话？

会话状态作为 cookie 保存在客户端（Web 浏览器）中，并且同一浏览器会话中的任何选项卡或窗口（如果您关闭并重新打开浏览器就会结束）共享它。换句话说：**所有选项卡或相同的浏览器会话窗口将在服务器端共享相同的会话状态**。

# .net - C++ CLI .NET 中的月历

> ID：12005660
> 
> 赞同：0
> 
> 时间：2012-08-17T12:17:44.373
> 
> 标签：.net, c++-cli

我正在尝试制作`MonthCalendar`，`C++ CLI`并且我发现了如何做到这一点，但是当我运行我的应用程序时，有四个`MonthCalendars`. 我只想要一个，我找不到任何方法来改变它。只有我能做的就是改变日历（`smaller == less calendars`）的大小。我应该怎么做才能制作`"n"`我想要的大小的日历？

制作类的实例：

```
this->kalendarz = gcnew System::Windows::Forms::MonthCalendar(); 
```

初始化对象：

```
this->kalendarz = gcnew System::Windows::Forms::MonthCalendar();
this->kalendarz->AnnuallyBoldedDates = gcnew cli::array < System::DateTime >(1)
                { System::DateTime(2004,7,4,0,0,0,0)};
this->kalendarz->CalendarDimensions = System::Drawing::Size(2,2);
this->kalendarz->Location = System::Drawing::Point(1,30);
this->kalendarz->MaxSelectionCount = 365;
this->kalendarz->MonthlyBoldedDates = gcnew cli::array < System::DateTime  >(2)
{ System::DateTime(2004,7,4,0,0,0,0), System::DateTime(2004,7,4,0,0,0,0) };
this->kalendarz->Name = L"kalendarz";
this->kalendarz->ShowWeekNumbers = true;
this->kalendarz->Size = System::Drawing::Size(210,297);
this->kalendarz->TabIndex = 3; 
```

================

```
this->kalendarz->Size = System::Drawing::Size(410,297); == 4 calendars
this->kalendarz->Size = System::Drawing::Size(210,297); == 2 calendars 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:28:21.777

[`MonthCalendar.SetCalendarDimensions`](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar.setcalendardimensions.aspx)应该得到你想要的：

```
this->kalendarz->SetCalendarDimensions(1, 1); 
```

它设置应显示的月份的行数和列数。应该和这个一样：

```
this->kalendarz->CalendarDimensions = System::Drawing::Size(1, 1); 
```

...我刚刚注意到您`2,2`在示例中已设置为，因此只需将其更改为`1,1`.

# ruby-on-rails-3 - 如何在太阳黑子 solr 中进行简单的布尔查询

> ID：12005661
> 
> 赞同：3
> 
> 时间：2012-08-17T12:17:51.260
> 
> 标签：ruby-on-rails-3, solr, search-engine, sunspot-rails

```
>>> marketing = User.search do |s|
>>>     s.fulltext "Marketing"
>>> end
>>> marketing.total
1448

>>> sales = User.search do |s|
>>>     s.fulltext "Sales"
>>> end
>>> sales.total
567

>>> marketing_and_sales = User.search do |s|
>>>     s.fulltext "Marketing AND Sales"
>>> end
>>> marketing_and_sales.total
945

>>> marketing_or_sales = User.search do |s|
>>>     s.fulltext "Marketing OR Sales"
>>> end
>>> marketing_or_sales.total
945  

<Sunspot::Search:{:fq=>["type:User"], :q=>"Marketing AND Sales", :fl=>"* score",      :qf=>"textfield1 textfield2 textfield3", :defType=>"dismax", :start=>0, :rows=>30}> 
```

我想要简单的布尔查询来处理太阳黑子轨道，我尝试了很多可能性，而不是简单地接受它。

AND 和 NOT 似乎按照 dismax 配置工作。我怎样才能使 OR 查询工作。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:50:33.103

我想到了。您可以使用 any_of 和 all_of 指定搜索条件的范围。尽管 all_of 除非在 any_of 中使用，否则不起作用。这是链接[http://sunspot.github.com/docs/Sunspot/DSL/Scope.html#all_of-instance_method](http://sunspot.github.com/docs/Sunspot/DSL/Scope.html#all_of-instance_method)

```
>>> marketing_or_sales = User.search do |s|
>>>     s.any_of do 
>>>         s.fulltext "Marketing"
>>>         s.fulltext "Sales"
>>>     end
>>> end
>>> marketing_or_sales.total
945 
```

# javascript - 用于复杂内容的 Javascript 3d 类轮播

> ID：12005662
> 
> 赞同：0
> 
> 时间：2012-08-17T12:17:55.047
> 
> 标签：javascript, jquery, carousel

我今天花了大约 7 个小时，试图：

a) 使用密集的 javascript 和 CSS3 功能创建我自己的轮播（[请参阅此 pastebin](http://pastebin.com/cDqqf6xi)）

b) 设置和集成[FredHQ 的 Roundabout 插件](http://fredhq.com/projects/roundabout)

c) 设置并集成[来自 Prof Cloud 的 Cloud Carousel 插件](http://www.professorcloud.com/mainsite/carousel.htm)

两种第三方解决方案都被尝试过，因为我无法自己完成我想要的。不幸的是，这两种解决方案都不能按照我要求的方式工作。两者在显示图像方面都很棒，但我需要显示更复杂的内容，一个风格很重的 DIV，里面有多个封装的 DIV，有透明度的 PNG 等等。

FredHQ 的版本不起作用，因为它没有缩放我的 DIV 中的内容。甚至文本都没有被缩放，直到我删除了 font-size 参数，但这是我需要正确布局的东西。Cloud 版本仅适用于图像。

我碰壁了，我似乎找不到任何其他解决方案。似乎“轮播”这个词用于幻灯片和滑块，所以我找到了数百个这样的解决方案，但没有一个像我需要的那样工作。

我需要的是降低其他对象的不透明度，而中心对象则完全不透明。此外，进一步的对象应按某些比例因子按比例缩小。它不一定是 3D（甚至不需要），但由于缩放，它看起来像 3D。

它不一定是 jQuery，尽管如果它可能是一个好主意。

有谁知道或谁能指出我正确的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:44:53.830

你看过[monete](https://github.com/jackmoore/monte/blob/master/jquery.monte.js) (git), [http://www.jacklmoore.com/monte](http://www.jacklmoore.com/monte)吗？184线。不确定您是否会找到更容易挖掘的东西并使其按您的方式工作。数百种解决方案？所以我会认为你也看过[循环插件](http://jquery.malsup.com/cycle/)。这可能是最成熟和最强大的之一。您在问题中提出了很多要求，而这类问题会在一段时间后使人们筋疲力尽。就这样。

您可能找不到完全符合您需求的任何东西，您必须自己推出或雇用某人。如果你得到一些东西并回来寻求具体的帮助，你会好得多。

# ruby-on-rails - 使用 link_to 发布以创建操作

> ID：12005672
> 
> 赞同：0
> 
> 时间：2012-08-17T12:18:51.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试使用 link_to 链接发布到我的注册控制器。

我有`<%= link_to "Register for Period", registration_path(period_id: period.id), :method => :post %>`

这会生成一个链接，例如：`http://localhost:3000/registrations/6?period_id=25`其中 6 是 event_id。我需要将 period_id 和 user_id 保存到注册数据库。

我在浏览器中收到以下错误：`No route matches [POST] "/registrations/6"`

我究竟做错了什么？

路线：

```
Mavens::Application.routes.draw do

  devise_for :users

  resources :events
  resources :periods
  resources :products
  resources :cart_rows
  resources :product_requests
  resources :inqueries
  resources :registrations
   match '/profile',  to: 'static_pages#profile'

  root :to => 'static_pages#home'

  get "static_pages/home"
  get "static_pages/about"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:34:54.910

如果你把你的`routes.rb`：

```
resources :registrations do
  member do
    post :save_period
  end
end 
```

在您的链接中：

```
<%= link_to "Register for period", 
  save_period_registration_path(id: @registration.id, period_id: period.id), :method => :post %> 
```

您将有一条与您的请求相匹配的路线。
当你只有一个`resources :registrations`规则时`routes.rb`，只会创建默认的 restful 路由，并且没有`POST`默认创建的单个资源。
我相信您将不得不阅读有关 CSRF 令牌的一些内容，因为如果您的`protect_from_forgery`上有一个 ，那么来自单个链接的`application_controller`这个`POST`请求可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:35:05.813

您的 routes.rb 缺少所需的路径。这是一条标准路径，因此添加“资源：注册”会起作用。

如果更复杂，请发布您的 routes.rb，我们可以告诉您要添加什么。

# sql-server - SQL Server：插入一个新行作为 ID 1

> ID：12005673
> 
> 赞同：0
> 
> 时间：2012-08-17T12:18:58.537
> 
> 标签：sql-server, tsql

我有一个名为的表`ComplaintCodes`，其中包含大约 15 行和 2 列：`ComplaintCodeId`和`ComplaintCodeText`.

我想在该表中插入一个新行，但将其 ID 设置为 1，这也将为所有已经存在的 ID 添加 1。这可能吗？

## 编辑

使用 SQL Server 并且`ComplaintCodeId`是一个身份/PK 列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:21:09.163

可以作为两个单独的 DML 语句，一个更新 ID 的 UPDATE 和一个后续的 INSERT。但是，如果您在另一个表中使用 ID 作为外键当然会失败，因此您需要找到一种方法来更新所有相关表。

你为什么要这样做呢？建议您退后一步，重新考虑导致您遇到此问题的设计决策。

是的，正如 podiluska 在他/她（/its！）评论中所说，请指定您在问题和/或标签中使用的 DBMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:22:36.740

```
update <table> set ComplaintCodeId =ComplaintCodeId +1

insert into <table>
select 1,'other column' 
```

**编辑**：

如果它是一个 PK+Identity 列，那么这样做是一个非常糟糕的主意。您无法更新身份列..

您可以执行以下操作，而不是更新：

```
select row_number() over (order by ComplaintCodeId desc) as row_num,
       ComplaintCodeId 
from table 
```

并使用 row_num 而不是 ComplaintCodeId

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:03:49.163

经过一番思考，在我看来，解决您问题的最佳方法是将PK更改为非身份。然后，您可以将值设置为您想要的任何值。

我仍然认为使用显示顺序列（这是我认为您会关心表中顺序的唯一原因）将是一个很好的解决方案，但是如果您真的希望 PK 顺序成为显示顺序，那么更改PK到非身份将是一个很好的长期解决方案，因为您将来不会遇到这些问题。

# objective-c - 带有 UISearchDisplay 和复选标记的 UITableView

> ID：12005678
> 
> 赞同：0
> 
> 时间：2012-08-17T12:19:23.367
> 
> 标签：objective-c, uitableview, ios5, uisearchdisplaycontroller

我有一个带有 Searchdisplay 的 TableView，当用户在单元格上进行选项卡时，单元格附件类型在无和复选标记之间切换。当我只使用表格视图时，效果很好。但是当我在使用搜索显示时选择一个单元格时，选择不会应用于“正常”表格视图。

迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:26:50.750

你能告诉我或告诉我你在桌子上显示的数据类型吗？你在使用一个简单的数组吗？我有解决这个问题的方法。

现在我在设置检查标记时给你一个提示，你需要在原始数组中进行更改。如何？你什么时候解释它。然后我可以给你一个很好的方法来做到这一点。

# java - 自动生成的邮件

> ID：12005680
> 
> 赞同：2
> 
> 时间：2012-08-17T12:19:36.107
> 
> 标签：java, jsp, jakarta-ee, servlets

也许这种问题属于不问范畴，但为了应用我必须问。所以请原谅我。

在登录时，我发现（假设）如果我不记得我的密码，那么我必须输入我的电子邮件 ID，然后自动生成的回复来自该托管站点

1.  用于生成另一个新密码的新链接或
2.  只需发送密码（这意味着密码未加密，我猜）作为回复。

看源代码很难预测，但我想知道（如果他们使用 jsp）那么这个自动生成的邮件使用了哪个协议，还有什么其他事情要记住来实现这一点，同时我也在制作一个应用程序用于自动生成的邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:40:24.803

我在java中使用javax.mail api完成了这个

谷歌使用java发送邮件...

在模板或资源文件中定义邮件内容，并在用户单击忘记密码链接时发送邮件。

它仅使用 SMTP 协议。

# iphone - 按属性（数字）对实体进行排序，在负数之后等于 0

> ID：12005685
> 
> 赞同：0
> 
> 时间：2012-08-17T12:19:51.737
> 
> 标签：iphone, objective-c, ios, sorting, nsfetchedresultscontroller

情况：带有“联系人”实体和“总和”属性的 CoreData 数据库（正数或负数或 0）

目标：具有 3 个部分的 tableviewcontroller，第一个正面第二个负面第三个（零）“存档”

到目前为止：使用@selector(compare:) 对描述符进行排序（没有谓词，因为需要所有联系人的列表）

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Contact"];

request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"moneySum" ascending:YES selector:@selector(compare:)]];
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:self.database.managedObjectContext
                                                                      sectionNameKeyPath:@"sectionName"
                                                                               cacheName:nil]; 
```

并在联系实体的类别中：

```
- (NSString *)sectionName {

    [self willAccessValueForKey:@"sectionName"];
    NSString *sectionName;
    double value = [[self valueForKey:@"moneySum"] doubleValue];

    if      (value > 0) sectionName = POS_SECTION;
    else if (value < 0) sectionName = NEG_SECTION;
    else                sectionName = ARCHIVE_SECTION;

    [self didAccessValueForKey:@"sectionName"];
    return sectionName;
} 
```

我现在确实得到了 3 个类别，但它显然是在中间对它们进行排序，而不是在最后。

我考虑在 sortDescriptors 数组中添加第二个 sortDescriptor（在比较之前：一个），但对我来说最直观的方法（isEqualToNumber:) 显然不起作用，因为我无法指定任何参数（@selector (..:)）还是我错了？

抱歉，这对整个编码来说都是全新的 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:03:56.803

来自“核心数据编程指南”：

> ...总而言之，如果您直接执行 fetch，则通常不应将基于 Objective-C 的谓词或排序描述符添加到 fetch 请求中。相反，您应该将这些应用于获取的结果。

这意味着您不能在获取请求中使用自定义排序描述符。您必须在实体中存储一个附加（非瞬态）属性，例如“0”、“1”、“2”用于正/负/零和。

然后，您可以将此属性用于排序描述符*和*，`sectionNameKeyPath`您不需要临时属性“sectionName”。

然后从“0”、“1”、“2”到实际节标题的映射在`tableView:titleForHeaderInSection:`.

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { 
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.controller sections] objectAtIndex:section];
    int order = [[sectionInfo name] intValue];
    if (order == 0)
        return @"POSITIVE SECTION";
    else if (order == 1)
        return @"NEGATIVE SECTION";
    else
        return @"ARCHIVE SECTION";
} 
```

# javascript - 复杂选择器在 jQuery 1.8 中中断，但在 1.7.2 中有效

> ID：12005688
> 
> 赞同：2
> 
> 时间：2012-08-17T12:19:59.437
> 
> 标签：javascript, jquery, sizzle

我有一些这样的 HTML（是的，这有点奇怪，但它是一个现有的项目）：

```
<table>
<tr id="21.30---22.00">
    <td class='51'>Text</td>
</tr>
</table>​ 
```

还有一些像这样的JS：

```
$(document).ready(function(){
    var time = "21.30---22.00";

    // jQuery needs . to be escaped to \\.
    // Regex needs \ to be escaped as \\. 
    // JS needs \ to be escaped as \\.

    time = time.replace(/\./g,'\\\\\\.');

    $("tr#" + time + " td.51").css("color","blue");
});​ 
```

实际上，时间字符串是由一些 JSON 生成的，因此是一种奇怪的方式。

这在以前的 jQuery 版本中有效，但在 1.8 中没有，可能是由于 Sizzle 的变化。这是它不起作用的示例：

jQuery 1.7.2：http: [//jsfiddle.net/VnA4m/](http://jsfiddle.net/VnA4m/)

jQuery 1.8：http: [//jsfiddle.net/VnA4m/1/](http://jsfiddle.net/VnA4m/1/)

关于如何从我`time = "21.30---22.00"`的选择器获得适用于 1.8 的选择器的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:24:03.660

试试这段代码---它将使用属性选择器进行选择

```
$("[id='21.30---22.00']").foo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:24:14.063

正则表达式不需要转义`\`s - 正则表达式中唯一的东西是`.`. 此外，jQuery 的要求是它必须接收斜线；这就是为什么您需要两个以便 JavaScript 解释器不使用它的原因。

所以，`\\.`应该足够了：http: [//jsfiddle.net/VnA4m/2/](http://jsfiddle.net/VnA4m/2/)。这也适用于 jQuery 1.7.2 - 我不确定为什么多余的斜线实际上在那里工作。看起来这是一个错误 -`\\\\.`失败，`\\\\\\.`再次工作......

# windows-phone-7 - Inotify propertychanged 不更新

> ID：12005691
> 
> 赞同：0
> 
> 时间：2012-08-17T12:20:05.657
> 
> 标签：windows-phone-7, observablecollection, inotifypropertychanged

我有一个实现 inotifypropertychaned 的类。

```
public class Item : INotifyPropertyChanged
{

    public event PropertyChangedEventHandler PropertyChanged;

    private string _name = string.Empty;

    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            this._name = value;
            onPropertyChanged(this, "Name");
        }
    }

    private void onPropertyChanged(object sender, string property)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(sender, new PropertyChangedEventArgs(property));

        }
    }
} 
```

在 UI 中，我有一个文本框，其中当长度超过时会发生 textchanged 事件，并更新绑定上述类的可观察集合的 UI（网格）。但用户界面没有更新。

```
 ObservableCollection<Item> lstItem = null;

private void textBox1_TextChanged(object sender, EventArgs e)

    {
        try
        {
            if (textBox1.Text.Length > 4)
            {
                Item obj = new Item();
            obj.Name = textBox1.Text;
            lstItem = new ObservableCollection<Item>();
            dataGridView1.DataSource = lstItem;
            }
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex.Message.ToString());
        }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:27:34.593

看看这段代码：

```
Item obj = new Item();
obj.Name = textBox1.Text;
lstItem = new ObservableCollection<Item>();
dataGridView1.DataSource = lstItem; 
```

您每次都将数据源设置为一个*空集合*`Item`，并且您正在创建一个新集合，然后再次将其丢弃。您是否打算将该项目添加到集合中？

```
lstItem = new ObservableCollection<Item> { obj }; 
```

（目前还不清楚您是否*应该*创建一个新集合甚至一个新项目 - 也许您应该使用类似的东西：

```
lstItem[0].Name = textBox1.Text; 
```

反而？）

# java - 需要监听变化的具有 Collection 的属性的通用 Java 类设计

> ID：12005692
> 
> 赞同：0
> 
> 时间：2012-08-17T12:20:05.783
> 
> 标签：java, class, implementation

全部，

希望是一个简单的问题。我正在考虑实现一个包含许多集合和 HashMap 的类的最佳方法，在这些集合和 HashMap 中，类需要知道它们何时**在类之外**被修改- 即添加/删除/更改的项目。目前，每个集合/哈希图都需要在我的班级中公开为公共 getter。

所以我的基本课程如下所示......

```
public class MyClass {

    protected final HashMap<String, String> _values = new HashMap<String, String>();
    protected final ArrayList<MyOtherClass> _other = new ArrayList<MyOtherClass>();
    protected final ArrayList<MyOtherClass2> _other2 = new ArrayList<MyOtherClass2>();

    // ... implementation

    public HashMap<String, String> getValues() {
        return _values;
    }

    public ArrayList<MyOtherClass> getMyOtherClassList() {
        return _other;
    }

    public ArrayList<MyOtherClass2> getMyOtherClassList2() {
        return _other2;
    }

    public String getContent() {
        // build the content based on other/other2...
        StringBuilder sb = new StringBuilder();
        // iterate through both collections to build content...
        // ...
        return sb.toString();
    }
}

public getMyOtherClass {
    public String name;   // has getter and setter
    public String value;  // has getter and setter
}

public getMyOtherClass2 {
    public String name;   // has getter and setter
    public String value;  // has getter and setter
    public String somethingElse;  // has getter and setter
} 
```

我想根据内容的长度向 _values 添加一个键/值，即-

```
_values.add("Length", getContent().length); 
```

因此，长度值是动态的，基于添加到 _other 和 _other2 的内容。

这样做的问题是使用公共 getter 公开 _values 和 _other 是类之外的任何东西都可以修改它们。该类将不知道项目是否已被修改。

我能想到的几个解决方案是使集合/哈希图只读-但这会引发运行时异常-如果是这种情况，我希望编译器指示它们是只读的并抛出异常，但我不不知道这是否可能。

另一种方法是为每个集合/映射添加添加/删除并相应地更新 Length 属性 - 但同样，如果 MyOtherClass 中的值发生变化，MyClass 仍然不会知道它。

或者编写我自己的 Hashmap/List/Collection 以确定何时添加/删除项目，并且可能在 getMyOtherClass 上具有属性更改侦听器 getMyOtherClass2。

有什么好的解决方案吗？

谢谢，

安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:36:24.890

在这种情况下，您可以利用[观察者](http://sourcemaking.com/design_patterns/observer)设计模式的一些基础知识让对象“监视”地图并注册对它们进行的每次更改。

创建一个包含 Map 的对象和另一个包含 List 的对象，因此，由于您有 1 个地图和 2 个列表，因此您将拥有 3 个“可观察”对象。让我们将类命名为“ObservableMap”和“ObservableList”。您甚至可以创建一个抽象类“ObservableObject”并使用前面提到的类对其进行扩展。

这些对象不会覆盖 Map/List 实现，它们只会充当包装器，通过包装您要跟踪的方法来注册状态并派生调用以修改集合。例如，我将发布一些 ObservableMap 类的代码（我正在实例化地图，`<String,String>`但如果它适合你，你也可以在这里使用泛型）。

```
public Class ObservableMap extends ObservableObject{
    private Map<String,String> map = new LinkedHashMap<String,String>();
    private Watcher observer = new Watcher();

    //Example of one of the wrapper methods (the other ones are like this one)
    public void putObject(String key, String value) {
        watcher.notifyPut(); //You can name the method the way you like and even pass
                             //the new key/value pair to identify what has been added.
        map.put(key,value);
    }
} 
```

在这里，Watcher 类是注册 canges 的类。它可以是一个全新的对象（如本例所示），或者您可以创建一个接口并在您现有的类中实现它，以便能够将其设置为 Observable 对象的观察者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:23:05.480

覆盖`map/list`实现并将回调插入到`add/update/remove`触发父更新函数的方法中。
直接创建对实现的引用也是一种不好的形式 - 这更好（阅读多态性以进行推理）：

```
private Map<String,String> myMap = new HashMap<String,String>();
private List<String> myList = new List<String>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:48:07.227

不是 100% 确定你在问什么。如果您尝试跟踪两个类的属性更改，您可能希望，正如其他人提到的那样，实现观察者模式并在 set 方法中发出通知。我已成功用于实现撤消机制的另一种方法是使用 aspectJ 或其他一些 AOP（面向方面​​编程）工具来拦截 set 方法并以这种方式执行所需的通知/更新。

或者定义一个只提供对 getXXX 操作的访问并从您的模型中返回这些操作的接口，这样就不会更改数据。

# java - 如何将 bean 注入作用域实现？

> ID：12005693
> 
> 赞同：12
> 
> 时间：2012-08-17T12:20:08.123
> 
> 标签：java, spring, dependency-injection, scope

我正在编写自己的作用域（即实现的类`org.springframework.beans.factory.config.Scope`），我需要注入一些 bean。我怎么做？

背景：Spring 必须首先创建所有范围 bean，以便我可以定义哪些 bean 进入范围。但是我首先需要构建范围的 bean 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:03:13.723

我想出了这个似乎很安全的解决方法，但我想听听评论（或者我的回答可能会给你一些更好的想法）：

1.  定义范围并给它设置器（而不是使用`@Autowired`）
2.  创建一个“范围配置器”bean：

    ```
    public CustomScopeConfigurer {
        @Autowired private Foo foo;
        private CustomScope scope;

        public CustomScopeConfigurer( CustomScope scope ) {
            this.scope = scope;
        }

        @PostConstruct
        public void initScope() {
            scope.setFoo( foo );
        }
    } 
    ```

    此配置器 bean 不能是惰性的。

推理：

1.  范围本身不能使用自动装配，因为它是在第一个 bean 之前创建的。虽然它可能会在以后创建，但您可以确定它将在所有其他 bean 之前创建。所以自动装配不能可靠地工作。

2.  配置器 bean 将与所有其他 bean 一起创建，但在范围之后。所以自动装配会为它工作。

3.  由于配置器 bean 不是惰性初始化的，它将在应用程序的其余部分可以看到应用程序上下文之前创建。这意味着`@Scope("custom")`此时不能创建范围的任何 bean（即带有 的 bean） - 范围不能是“活动的”，但是 -> Spring 不会尝试将任何 bean 放入其中。

4.  作用域本身通常在某处创建为静态常量。这就是为什么我们必须将它作为参数传递给构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-29T13:22:47.360

你可以很简单地做到这一点。

考虑以下自定义范围类：

```
package com.way2learn;

import java.util.Map;

import org.springframework.beans.factory.ObjectFactory;
import org.springframework.beans.factory.config.Scope;

public class MyCustomScope implements Scope{

    private Map<String, Object> scope;

    public void setScope(Map<String, Object> scope) {
        this.scope = scope;
    }

    @Override
    public Object get(String name, ObjectFactory<?> objectFactory) {
        checkAndClear();
        Object bean=scope.get(name);
        if(bean==null){
            bean=objectFactory.getObject();
            scope.put(name,bean);
        }
        return bean;
    }
    private void checkAndClear() {
        //Some logic to check condition and clear the scope
    }
    //optional methods
    @Override
    public Object remove(String name) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void registerDestructionCallback(String name, Runnable callback) {

    }

    @Override
    public Object resolveContextualObject(String key) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public String getConversationId() {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

它依赖于`java.util.Map`.

您不能自动装配使用`@Autowired`它作为`@Autowired`注释`AutoWiredAnnotationBeanPostProcessor`仅在之后工作。

但自定义范围将在之前注册`AutoWiredAnnotationBeanPostProcessor`。

因此，您可以手动注入`Map`类`MyCustomScope`，如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.1.xsd">

        <util:map key-type="java.lang.String" value-type="java.lang.Object" id="custScopeMap"/>

        <bean id="myCustomScope" class="com.way2learn.MyCustomScope">
            <property name="scope" ref="custScopeMap"/>
        </bean>

        <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
            <property name="scopes">
                <map>
                    <entry key="myScope" value-ref="myCustomScope"/>
                </map>
            </property>
        </bean>

</beans> 
```

我尝试过这个。它工作正常。我在`Aaron Digulla's`答案中发现了一个错误，即

考虑以下场景：`Spring's CustomScopeConfigurer`将创建第一个 bean，立即创建`CustomScope`bean，现在我们的自定义范围已准备好使用。一段时间`Aaron Digulla's CustomScopeConfigurer`后将创建将 foo 初始化为`CustomScope`. 但是，如果在创建 bean 之后`CustomScope registration`和之前创建了一些自定义范围的 bean，会发生`Aaron Digulla's CustomScopeConfigurer`什么？对于那些 bean，bean 中不会有 foo `CustomScope`。

# php - 奇怪的 PHP 重定向行为 - 所有 if 语句都可以正常工作，而 else 语句会覆盖并成为默认重定向

> ID：12005695
> 
> 赞同：0
> 
> 时间：2012-08-17T12:20:12.437
> 
> 标签：php, redirect, http-status-code-301, if-statement

我有一个简单的问题，对于这里的大多数人来说应该很简单。在一个网站上，我通过一个名为 visit.php 的简单 PHP 重定向来重定向我的所有链接

我正在像这样格式化我的出站重定向..

```
visit.php?url=google.com
visit.php?url=yahoo.com
visit.php?url=aol.com 
```

然后我的visit.php看起来像这样......

```
<?php
$url = htmlspecialchars($_GET['url']);

if($url == 'google.com'){
header("Location: http://google.com");
}

if($url == 'yahoo.com'){
header("Location: http://yahoo.com");
}

if($url == 'aol.com'){
header("Location: http://aol.com");
}

else {
header("Location: http://mydomain.com/404");
} 
```

我遇到的问题是 else 语句。当我从脚本中删除它时，一切都按预期工作。当我把它放进去时（所以任何拼写错误都会重定向到 404），它会覆盖我在脚本中定义的所有链接并重定向到 404。

我遇到的另一个问题是不使用 ?url= 变量时。如果我网站上的用户将链接复制到他们的剪贴板并将其更改为除 ?url= 之外的任何内容，我想重定向到 404。我尝试用来完成此操作的代码如下所示...

```
if(!isset($_GET['url'])){
header("Location: http://mydomain.com/404");
} 
```

我的逻辑是……如果没有设置 ?url= 变量，只需重定向到 404，因为肯定有人在玩。如果有人加载 visit.php?id=blah 它应该只是重定向到 404。

但是，我没有得到预期的行为。总的来说，我对 PHP 和编程很陌生……所以如果这些问题是幼儿园级别的，请原谅我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:22:41.783

您应该使用`if`//构造`else if`，`else`否则 else 语句仅附加到最后一个`if`.

当最后一个条件`if`不满足时，它自然会执行该`else`子句。

## 您的初始方法（已更正）：

```
<?php
$url = htmlspecialchars($_GET['url']);

if($url == 'google.com'){
    header("Location: http://google.com");
}

else if($url == 'yahoo.com'){
    header("Location: http://yahoo.com");
}

else if($url == 'aol.com'){
    header("Location: http://aol.com");
}

else {
    header("Location: http://mydomain.com/404");
} 
```

## 通常的做法：

```
 <?php
$url = htmlspecialchars($_GET['url']);

if($url == 'google.com'){
    header("Location: http://google.com");
    exit;
}

if($url == 'yahoo.com'){
    header("Location: http://yahoo.com");
    exit;
}

if($url == 'aol.com'){
    header("Location: http://aol.com");
    exit;
}

header("Location: http://mydomain.com/404");
exit; 
```

## 最佳（推荐）方法：

```
switch($url) {
    case 'google.com':
        header("Location: http://google.com");
        break;
    case 'yahoo.com':
        header("Location: http://yahoo.com");
        break;
    case 'aol.com':
        header("Location: http://aol.com");
        break;
    default:
        header("Location: http://mydomain.com/404");
        break;
} 
```

## 嗯......更好的是：

```
$list_of_places = array(
    'google.com',
    'yahoo.com',
    'aol.com'
);

if(in_array($url, $list_of_places)) {
    header("Location: http://".$url);
    exit;
}
else {
    header("Location: http://mydomain.com/404");
    exit;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:23:34.523

发出后代码继续执行`header('Location: ...')`。后续标头会覆盖先前设置的标头。如果您不想进一步执行任何操作，则需要*停止代码执行：*

```
header(...);
exit; 
```

此外，`else`only 适用于 last `if`，因为这些语句没有链接在一起。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T12:25:59.303

它应该是

```
<?php
$url = htmlspecialchars($_GET['url']);

if($url == 'google.com'){
header("Location: http://google.com");
}

else if($url == 'yahoo.com'){
header("Location: http://yahoo.com");
}

else if($url == 'aol.com'){
header("Location: http://aol.com");
}

else {
header("Location: http://mydomain.com/404");
}
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T12:28:30.330

作为一个懒惰的程序员，我建议将您的代码重写为

```
 $url = htmlspecialchars(!empty($_GET['url'])?$_GET['url']:"");

    switch($url)
    {

      case 'google.com': 
         header("Location: http://google.com");
         break;
      case 'yahoo.com': 
         header("Location: http://yahoo.com");
         break;
      case 'aol.com': 
         header("Location: http://aol.com");
         break;
      default:
         header("Location: http://mydomain.com/404");
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-17T12:29:33.417

`if else`如果只是`if`（因为您正在执行最后一个“else”语句），请使用：

```
<?php
    $url = htmlspecialchars($_GET['url']);
    if($url == 'google.com'){
        header("Location: http://google.com");
    } else if ($url == 'yahoo.com') {
        header("Location: http://yahoo.com");
    } else if ($url == 'aol.com'){
        header("Location: http://aol.com");
    } else {
        header("Location: http://mydomain.com/404");
    }
?> 
```

或者使用 switch 语句：

```
<?php
    $url = htmlspecialchars($_GET['url']);
    switch ($url) {
        case 'google.com':
            header("Location: http://google.com");
            break;
        case 'yahoo.com':
            header("Location: http://yahoo.com");
            break;
        case 'aol.com':
            header("Location: http://aol.com");
            break;
        default:
            header("Location: http://mydomain.com/404");
    }
?> 
```

使用这些解决方案中的任何一个，如果您`$url`不等于您希望它等于的值，则用户将被定向到您的 404 页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T12:59:17.437

好的，我发现了“如果尝试使用不同的键，则重定向到 404”问题（只需在第一个声明中添加错误控制运算符）。

我的代码现在看起来像这样......

```
<?php

$url = @htmlspecialchars($_GET['url']);

if(!isset($_GET['url'])){
header("Location: http://mydomain.com/404");
exit;
}

elseif($url == 'google.com'){
header("Location: http://google.com");
exit;
}

elseif($url == 'yahoo.com'){
header("Location: http://yahoo.com");
exit;
}

elseif($url == 'aol.com'){
header("Location: http://aol.com");
exit;
}

else{
header("Location: http://mydomain.com/404");
exit;
} 
```

# highcharts - highcharts - 更改系列数据后的缩放问题

> ID：12005711
> 
> 赞同：1
> 
> 时间：2012-08-17T12:21:35.220
> 
> 标签：highcharts, zooming

有一个奇怪的行为 ar 甚至可能是 highcharts 中的错误。如果我在图表缩放时更改系列数据，我不能再缩放它了:(((

以下是重现的步骤

1.  转到[http://jsfiddle.net/CXKmD/2/](http://jsfiddle.net/CXKmD/2/)
2.  使用鼠标缩放图表
3.  单击“更改”按钮更改图表数据
4.  尝试使用鼠标再次缩放

问题是在这些步骤之后**event.xAxis**未定义，因此我们无法获得鼠标缩放选择的最小/最大值。

是否有任何解决方法可以让图表在缩放状态下更改其数据，然后进一步缩放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:15:35.990

不是错误您不必要地将时间戳转换为日期对象，而 setExteremeMethod 需要时间戳，而现在您正在传递一个日期。将您的代码更改为此并且它有效

```
if (event.xAxis[0]) {
    startDt = event.xAxis[0].min;
    endDt = event.xAxis[0].max;
} 
```

小提琴@ [http://jsfiddle.net/jugal/tdkwy/](http://jsfiddle.net/jugal/tdkwy/)

# android - Android，opencsv并写入资产文件

> ID：12005714
> 
> 赞同：0
> 
> 时间：2012-08-17T12:21:54.050
> 
> 标签：android, csv, assets, opencsv

我可以使用 opencsv 从 assets 文件夹中的 csv 文件中读取。但是，写入文件有点神秘。

我执行以下操作以在 /assets 文件夹中打开一个文件以供阅读：

```
CSVReader reader = new CSVReader(new InputStreamReader(getAssets().open("shoppinglists.csv"))); 
```

如何打开文件进行写作，以及如何进行写作？使用 getAssets() 来访问文件接缝干净，所以我也想用它来阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:24:59.290

您可能无法写入资产文件，因为它是 APK 的一部分。

如果我是您，我会将资产文件复制到您的临时目录并根据需要写入该副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:24:28.947

Assets 文件夹存在于打包的 apk 中。它是只读的。所以你不能写它。

# c# - 时间：2019-01-10 标签：c#setListBoxtoRTL

> ID：12005719
> 
> 赞同：0
> 
> 时间：2012-08-17T12:22:26.327
> 
> 标签：c#, listbox, right-to-left

作为在 ListBox 中为文本着色的尝试，我发现了本指南[C#：更改列表框项目颜色](https://stackoverflow.com/questions/6896151/c-sharp-change-listbox-items-color)（我在 Visual Studio 2012 上使用 Windows 窗体应用程序）。代码正在工作，但问题是我想在从右到左模式下使用文本框，但是当我在 ListBox 设置中更改它时它不起作用，所以我假设它需要以某种方式在代码中更改，这就是我需要你帮助的原因。非常感谢你！阿隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:33:52.077

您的 y 位置为 0，因此每次插入消息时它都位于左侧。要将其放在右侧，您需要重新计算位置。

看下面的例子。

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
{
    MyListBoxItem item = listBox1.Items[e.Index] as MyListBoxItem; // Get the current item and cast it to MyListBoxItem
    if (item != null)
    {
        e.Graphics.DrawString( // Draw the appropriate text in the ListBox
                   item.Message, // The message linked to the item
                   listBox1.Font, // Take the font from the listbox
                   new SolidBrush(item.ItemColor), // Set the color 
                   width - 4, // X pixel coordinate
                   e.Index * listBox1.ItemHeight,
                   new StringFormat(StringFormatFlags.DirectionRightToLeft)); // Y pixel coordinate.  Multiply the index by the ItemHeight defined in the listbox.                
    }
    else
    {
        // The item isn't a MyListBoxItem, do something about it
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:20:24.103

列表框本身是左对齐的，您无法在 UIR 编辑器中更改它。您可以在创建要传递给列表框的字符串时应用适当的对齐元素：请参阅`InsertListItem`函数的项目标签参数的在线帮助。所有转义码都将应用于您插入到列表框中的每一行；无法将默认格式样式应用于控件。

# wpf - 将选项卡顺序限制为单个用户控件 (WPF)

> ID：12005723
> 
> 赞同：6
> 
> 时间：2012-08-17T12:22:42.310
> 
> 标签：wpf, user-controls, tabs

目前我有一个带有自定义 UserControl 的 WPF 项目。此控件包含一个网格，其中包含多个表单类型元素（复选框、文本框、组合框等）。该控件被设计为作为一个表单来查看和操作，但是它被放置在一个拖动画布中，这就是为什么它需要是一个 UserControl 而不是一个窗口。

问题是元素之间的选项卡导航需要限制在此控件中，因此当我在控件中的最后一个元素上单击“Tab”键时，键盘会聚焦控件中的第一个元素。目前，它超出了控制范围，进入了应用程序中的下一个可选项卡元素。

除了手动捕获关键事件之外，还有其他方法可以将选项卡导航限制为单个 WPF 用户控件吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T12:25:50.740

在你的用户控件上试试这个：

```
KeyboardNavigation.TabNavigation="Cycle" 
```

这将确保当到达用户控件中的最后一个元素时，下一次按 Tab 键将循环回到开头。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigation.tabnavigation%28v=vs.100%29.aspx)。

# c++ - 如何遍历地图向量中的地图？

> ID：12005727
> 
> 赞同：3
> 
> 时间：2012-08-17T12:22:57.957
> 
> 标签：c++, vector, iterator, maps

用 C++ 编写的代码

环境：微软Visual Studio

我有一个地图矢量。首先，我想遍历第一个映射，获取它的“第一个”和“第二个”并将它们保存在我构建的其他结构中（向量映射）。然后我将遍历我的“地图矢量”中的左侧地图并做同样的事情......

这是我的地图矢量：

```
typedef vector<map<string,unsigned int>> myvec; 
```

这是应该完成工作的函数：

```
void Coogle::make_index(const myvec& the_vec)
{
    //SCAN THE FIRST MAP
    map<string,unsigned int>::iterator map_iter;
    index::iterator idx_iter = the_index.begin();
    for(map_iter=the_vec[0].begin(); map_iter!=the_vec[0].end(); ++map_iter)
    {

    }
} 
```

'for' 循环应该遍历向量中的第一个映射。我声明了一个地图迭代器，因为我需要它来遍历地图！正确的？为什么它不起作用？

错误：

> IntelliSense：没有运算符“=”与这些操作数匹配

非常感谢 ！！！

* * *

好的，现在我确定了这个迭代器：

```
index::iterator idx_iter = the_index.begin(); 
```

这是我的“索引”：

```
typedef map<string,vector<unsigned int>> index; 
```

在提到的“for”循环中，我执行了以下操作：

```
 for(map_iter=the_vec[0].begin(); map_iter!=the_vec[0].end(); ++map_iter)
    {
        /*#1*/ idx_iter->first = map_iter->first;
        /*#2*/ idx_iter->second[0] = map_iter->second;
        /*#3*/ idx_iter++;
    } 
```

＃2似乎还可以。但是＃1会产生错误：

> IntelliSense：没有运算符“=”与这些操作数匹配

它和之前的错误一样，所以我猜这是一个类似的问题。是吗？

**编辑：**更清楚地说，我想做的是将**const myvec& the_vec**添加到我的索引的“i”位置（在本例中为“0”）。

再次 ：

```
typedef vector<map<string,unsigned int>> myvec;
typedef map<string,vector<unsigned int>> index; 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:42:15.007

`the_vec`作为对常量的引用传递，因此您需要`const_iterator`：

```
map<string,unsigned int>::const_iterator map_iter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:26:54.450

要回答您的第二个问题，您不能修改地图中的键，因为它们需要保持有序。如果要替换索引中的所有元素，那么最好先清除它，然后添加新元素：

```
the_index.clear();
for(map_iter=the_vec[0].begin(); map_iter!=the_vec[0].end(); ++map_iter)
{
    the_index[map_iter->first].push_back(map_iter->second);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T16:43:20.853

这是一种遍历`map`包含 s 的键和s 的`string`s 值的a 的方法：`vector``string`

```
for( map<string, vector<string>>::iterator ii = timeZonesMap.begin(); ii != timeZonesMap.end(); ++ii)
{
    cout << ii->first << ": " << endl;
    for(std::vector<string>::iterator it = ii->second.begin(); it != ii->second.end(); ++it) {
        std::cout << *it << endl;
    }
} 
```

希望这对将来的人有所帮助

# php - 在我的页面上添加链接打印图标

> ID：12005728
> 
> 赞同：0
> 
> 时间：2012-08-17T12:23:01.603
> 
> 标签：php, facebook, plugins

我想在mysite的文章标题旁边添加微小的（10x10）facebook，linkedin，打印图标，一旦用户点击它就会完成任务（即facebook：它将文章标题作为新闻添加到该用户的facebook）如何才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:34:17.360

您似乎可以使用 AddThis。 [http://www.addthis.com](http://www.addthis.com)

您可以选择用户可以共享您的内容的媒体类型。Facebook 和 LinkedIn 是一些默认设置。

# javascript - 设置使用javascript的onclick

> ID：12005733
> 
> 赞同：3
> 
> 时间：2012-08-17T12:23:04.353
> 
> 标签：javascript, jquery, javascript-events, onclick

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:28:58.790

首先：jQuery 中的所有类型的选择器，以美元符号和括号开头：$()
其次：您需要关闭语句`;`
最后：最好在调用函数之前定义函数，而不是依赖 javascript为您将它们提升到顶部。这也将使 jslint 验证，而反之则不会！

因此，没有错误的代码如下所示：

```
function toJavascriptLinks(element){
    element.href="#";
    element.onclick     = function(){alert('Yeah!');};
    console.log(element);
}

$('div').children("a").each(function(i, element){toJavascriptLinks(element);}); 
```

请参阅[此小提琴](http://jsfiddle.net/ak7pk/)以获取工作演示。

祝你好运！！

* * *

**关于您更新的问题：**
这是对您的问题的更新。

您在 console.log 中看不到 onclick，因为您在 dom 中设置了 onclick 事件。如果您想在 console.log 中查看 onclick，您可以使用以下方法添加函数 STRING：
`element.setAttribute('onclick', 'your function string');`

假设在您的 html 中，您有：

```
<a id="link_a" href="http://www.google.com">link 1</a>
<a id="link_b" href="http://www.duckduckgo.com">link 2</a> 
```

你有这个javascript：

```
var lnkA=document.getElementById("link_a");
var lnkB=document.getElementById("link_b");

lnkA.onclick=function(){alert(this.innerHTML);};
lnkB.setAttribute('onclick','alert(this.innerHTML);');

console.log(lnkA.outerHTML);
console.log(lnkB.outerHTML); 
```

然后 console.log 将包含：

```
<a id="link_a" href="http://www.google.com">link 1</a>
<a onclick="alert(this.innerHTML);" id="link_b" href="http://www.duckduckgo.com">link 2</a> 
```

有关此解释的实时示例， 请参见[this fiddle 。](http://jsfiddle.net/zGuJ9/)

我还认为您已经在使用某种形式的 jQuery（您不知道），因为您使用了`.children("div#myDiv")`. 据我所知，这不是普通的 javascript。而且我认为普通的香草 javascript 和 jQuery 都不会从普通的 html 字符串中选择那些 id 为“myDiv”的 div，因此更新中的代码*无法*完成这项工作。

最后，调整我对您更新的问题的回答和对在解析的 html 源中可见的 onclick 事件的期望：

```
var htmlString='<div id="myDiv"><a href="http://www.google.com">link 1</a><a href="http://www.duckduckgo.com">link 2</a></div><div id="otherDiv"><a href="http://www.asdf.com">link 3</a><a href="http://www.yahoo.com">link 4</a></div>';

function toJavascriptLinks(element){
    element.href="#";
    element.setAttribute('onclick','console.log("Yeah!");');
    console.log(element.outerHTML);
}

//no innerHTML on documentFragment allowed, yet on it's children it's allowed
var frag = document.createDocumentFragment().appendChild( document.createElement('div') );
frag.innerHTML=htmlString;

var $div = $(frag).children('div#myDiv');

$($div).children("a").each(function(i, element){toJavascriptLinks(element);});

var outp=document.getElementById("output");
outp.innerHTML=frag.innerHTML; 
```

请参阅[此更新的小提琴](http://jsfiddle.net/ak7pk/4/)以查看它的实际效果。

这就留下了一个问题：到底为什么要在变量名前面放置“忍者”$-signs？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:37:02.700

这正是调试器显示 HTML 元素的方式。它没有显示所有属性 - 特别是因为您将 DOM**属性** `onclick`设置为函数引用，它不能显示为采用字符串的 HTML**属性(** `onclick`~~无法使用 JavaScript 设置 AFAIK~~见卢克的评论）。

试试看`console.log(element.onclick);`，它应该显示类似`function() {...}`.

还是事件句柄不起作用？

顺便说一句，你有什么理由不使用 jQuery 来设置 href 和处理程序？

```
$div.children("a").attr('href', '#').click(function(){console.log('Yeah!')}); 
```

* * *

还有一件事：在大多数控制台中，您可以单击`<a href="#">`它，它将显示 DOM 属性，其中应包括事件处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:48:23.533

我真的会为此使用**jQuery**，这很简单。

```
​$(function() {
    $("div > a ").attr("href", "#").click(function(e) {
        e.preventDefault();
        doSomething();
    });
});

var doSomething = function() {
    alert("Woah, it works!");
} 
```

请参阅以下 jsfiddle 的实际操作：http: [//jsfiddle.net/SsXtt/1/](http://jsfiddle.net/SsXtt/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:27:33.110

你确定元素是正确的吗？这对我有用。

```
<a id="mylink">Test</a>
<script>
    document.getElementById("mylink").onclick = function() {
        alert("Works");
    };
</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T12:26:57.847

函数需要在字符串中，尝试添加引号？

# css - Twitter Bootstrap - 固定背景

> ID：12005736
> 
> 赞同：1
> 
> 时间：2012-08-17T12:23:06.487
> 
> 标签：css, twitter-bootstrap

我设法为我的网站添加了自定义背景。我在 bootstrap.css 中更改了正文

```
body {
  margin: 0;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    background-image: url("../images/norn-race.jpg");
    background-repeat:no-repeat;
    background-attachment:fixed;
  font-size: 13px;
  line-height: 18px;
  color: #333333;
  background-color: #ffffff;
} 
```

我的问题是它没有响应，如果我放大背景会变大，如果我缩小背景会变小，但在不同的分辨率下它应该始终是相同的大小。

我的错误在哪里？

我还应该添加背景仅在左侧和右侧可见。目前我只是使用大背景来覆盖所有内容，这是不必要的，因为我的内容隐藏了 80%。

在左侧和右侧显示图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:33:55.333

当您的图像在内容中时，响应式图像工作，也就是 a `<img src="" alt="">`，而不是设置为 background-image

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T10:44:41.547

检查响应式设计背景大小的背景大小属性

# ruby-on-rails-3 - 在 Ruby on Rails 中替换变音符号

> ID：12005739
> 
> 赞同：0
> 
> 时间：2012-08-17T12:23:18.110
> 
> 标签：ruby-on-rails-3, diacritics

我在保存数据之前调用了一个方法，并希望像这样替换字符串中的变音符号：

```
def replace_chars
self.slug = self.slug.gsub(/[äöüß]/) do |match|
  case match
    when "ä" 'ae'
    when "ö" 'oe'
    when "ü" 'ue'
    when "ß" 'ss'
  end
end
end 
```

我的问题是，我想将新字符串保存到 slug 中。我怎样才能做到这一点？

非常感谢，

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:32:22.040

您可以使用 gsub! 节省一点代码！我还添加了 then 以使其（我相信）符合 1.9 标准。

```
def replace_chars 
  self.slug.gsub!(/[äöüß]/) do |match|
    case match
    when "ä" then 'ae'
    when "ö" then 'oe'
    when "ü" then 'ue'
    when "ß" then 'ss'
    end
  end
end 
```

# iphone - 如何在 AppDelegate iPhone 应用程序中使用@protocol？

> ID：12005740
> 
> 赞同：1
> 
> 时间：2012-08-17T12:23:17.563
> 
> 标签：iphone, objective-c, ios, xcode4.2, protocols

我正在使用 5 个屏幕的 iPhone 应用程序。我想刷新 UITabBarController 中第 4 个屏幕中的值。我在 AppDelegate 中添加了@protocol，但它没有调用。这是我第一次使用@protocol，你能帮我解决这个问题吗？

在**AppDelegate.h**

```
@protocol ReloadViewControllerDelegate <NSObject>

-(void) refreshViewController:(NSString *)result;

@end

id refreshViewControllerDelegate;

@property (nonatomic, retain) id refreshViewControllerDelegate; 
```

我已经合成了。

在**AppDelegare.m中**

```
@synthesize refreshViewControllerDelegate;

if ([refreshViewControllerDelegate conformsToProtocol:@protocol(ReloadViewControllerDelegate)]) 
{
   [refreshViewControllerDelegate performSelectorOnMainThread:@selector(refreshViewController:) withObject:@"YES" waitUntilDone:NO];                
}// Control not come inside of if Condition.... From here i want to update the fourthViewController.. 
```

但是`control not go inside of the if condition`。你能指导我哪里做错了吗？

在我的**第四个 ViewController.h**

```
#import "AppDelegate"

@interface fourthViewController : UIViewController <ReloadViewControllerDelegate> 
```

在我的**第四个 ViewController.m**

```
-(void) refreshViewController:(NSString *)result
{
    NSLog(@"Result : %@", result);
} 
```

谁能帮我做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:33:09.887

您需要像这样声明您的委托：

```
@property (nonatomic, weak) IBOutlet id<ReloadViewControllerDelegate> delegate; 
```

id 可以工作，但是通过使用 <>，您可以确保您分配的委托实际上正在实现协议，您可能仍然需要确保它响应选择器，但前提是某些方法被声明为

```
@optional 
```

确保你合成它，最重要的是确保你设置它，它不是零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:06:35.943

您收到警告是因为您将委托键入为`id`. An`id`是泛型类型，这意味着编译器不知道哪些方法或属性可能可用。为了消除您的警告，将您的委托声明为 NSObject：

```
@property (nonatomic, retain) NSObject <ReloadViewControllerDelegate> *refreshViewControllerDelegate; 
```

通过声明为 NSObject，编译器现在知道 NSObject 拥有的所有方法，然后您可以调用：

```
-performSelectorOnMainThread:withObject:waitUntilDone: 
```

在你的代表身上没有警告。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:41:51.303

试试这个：

```
@protocol ReloadViewControllerDelegate <NSObject>

-(void) refreshViewController:(NSString *)result;

@end

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (weak) id <ReloadViewControllerDelegate>refreshViewControllerDelegate;
@end 
```

在 AppDelegate.m

```
@implementation AppDelegate
@synthesize window, refreshViewControllerDelegate;

... 
```

> 这里 Tab4ViewController 是类的名称。

```
 if ([Tab4ViewController conformsToProtocol:@protocol(ReloadViewControllerDelegate)]) 
    {
       [refreshViewControllerDelegate performSelectorOnMainThread:@selector(refreshViewController:) withObject:@"YES" waitUntilDone:NO];                
    }

...
@end

#import "AppDelegate.h"

@interface Tab4ViewController<ReloadViewControllerDelegate>
...
@end

@implementation Tab4ViewController

...
appDelegate.refreshViewControllerDelegate = self;
...

@end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-17T12:32:18.193

您正在调用此代码：

```
if ([refreshViewControllerDelegate conformsToProtocol:@protocol(ReloadViewControllerDelegate)]) 
```

但这`refreshViewControllerDelegate`是不是：

```
id refreshViewControllerDelegate; 
```

`conformsToProtocol`检查对象是否声明它符合协议，而您的则不。如果要指定对协议的符合性，您需要：

```
id<ReloadViewControllerDelegate> refreshViewControllerDelegate; 
```

**编辑**

好的，关于`performSelectorOnMainThread`问题...该方法在 NSThread 的类别中提供，并且未在 NSObject 协议中声明。所以，如果你想调用它，那么你需要将你的类型声明为 NSObject，它符合你的协议。

```
NSObject<ReloadViewControllerDelegate> refreshViewControllerDelegate; 
```

**编辑**

好的，看起来这不是一个关于使用协议的简单问题，而是一个完整的教程。由于 SO 不是这样的地方，我将尝试给出一个简短的...

协议是一个接口声明。

```
@protocol ReloadChatViewControllerDelegate <NSObject>
- (void)refreshViewController:(NSString *)result;
@end 
```

那就是说镇上有一个新协议，名称`ReloadChatViewControllerDelegate`和它也符合`NSObject`协议。任何采用新协议的类都必须提供`refreshViewController`. 您可以通过放入一个`@optional`部分来使协议方法成为可选方法。

```
@protocol ReloadChatViewControllerDelegate <NSObject>
- (void)refreshViewController:(NSString *)result;
@optional
- (void)optRefresh;
@end 
```

现在，让我们将协议的采用留到以后。假设您正在编写通用代码，并且您只想知道给定的对象是否符合协议，如果符合，请在其上调用方法。就像是...

```
@interface Bar : NSObject
@property (nonatomic, weak) NSObject<ReloadChatViewControllerDelegate>  *refreshViewControllerDelegate;
- (void)blarg;
@end 
```

现在，Bar 类提供了一个委托属性，以便它可以提供一些对象来帮助它完成一些工作。但是，该委托对象必须至少是`NSObject`, 并且符合`ReloadChatViewControllerDelegate`协议。

现在，ObjC（和 C）是相当宽松的，所以你可以强制一个对象是你想要的任何类型，但是你应该得到你得到的崩溃。现在，当`blarg`被调用时，会通知委托人做一些工作。

由于委托的属性类型已经表明它符合给定的协议，因此无需检查是否符合。我们可以调用委托方法。请注意，我们必须查看对象是否实现了任何可选的协议方法。

```
@implementation Bar
@synthesize refreshViewControllerDelegate = _refreshViewControllerDelegate;
- (void)blarg {
    // Do something, then invoke the delegate
    [self.refreshViewControllerDelegate
        performSelectorOnMainThread:@selector(refreshViewController:)
                         withObject:@"YES"
                      waitUntilDone:NO];
    if ([self.refreshViewControllerDelegate respondsToSelector:@selector(optRefresh)]) {
        [self.refreshViewControllerDelegate optRefresh];
    }
}
@end 
```

但是，如果您想成为通用的，并接受任何对象作为委托（也许您想让委托符合某个给定的协议是可选的），那么您可以接受一个普通的`id`，然后检查它是否符合。在这种情况下，您可以将您的委托声明为一个 id（或其他类型）。

```
@property (nonatomic, weak) id refreshViewControllerDelegate; 
```

现在，在您的代码中，您需要检查一致性。

```
- (void)blarg {
    // Do something, then invoke the delegate
    if ([self.refreshViewControllerDelegate
            conformsToProtocol:@protocol(ReloadChatViewControllerDelegate)]) {
        [self.refreshViewControllerDelegate
            performSelectorOnMainThread:@selector(refreshViewController:)
                             withObject:@"YES" waitUntilDone:NO];
        if ([self.refreshViewControllerDelegate
                respondsToSelector:@selector(optRefresh)]) {
            [self.refreshViewControllerDelegate optRefresh];
        }
    }
} 
```

好的，现在您已经定义了一个协议，并且您有调用该协议上的方法的代码。两个警告。

首先，必须将委托设置为一个对象。 `nil`将响应`false`任何方法，因此它当然不会遵守，也不会在发送任何消息时做任何事情。

其次，您必须确保您的委托声明符合协议。仅仅实现这些方法**是不**符合的。如果一个类没有明确指定它符合协议，那么`conformsToProtocol`即使它实现了协议的方法，它也会返回 false。

所以，让我们指定一些符合协议的类作为我们的委托。

```
@interface Foo : NSObject<ReloadChatViewControllerDelegate>
- (void)refreshViewController:(NSString *)result;
@end
@implementation Foo
- (void)refreshViewController:(NSString *)result {
    NSLog(@"Look, ma, I'm refreshed with %@", result);
}
@end 
```

它符合协议，提供强制方法的实现，省略可选方法。

现在，如果你运行这段代码，你应该会看到这段奇妙的代码。

```
Foo *foo = [[Foo alloc] init];
Bar *bar = [[Bar alloc] init];
bar.refreshViewControllerDelegate = foo;
[bar blarg]; 
```

# css - 制作 png 格式所需的所有图标图片可以节省多少内存？

> ID：12005745
> 
> 赞同：2
> 
> 时间：2012-08-17T12:23:34.360
> 
> 标签：css, image, png, loading

像 facebook、google plus 这样的网站在一张图片中有完整的图像使用这种方法可以节省多少字节的内存

![在此处输入图像描述](../Images/0c96494653c3f2a24ddb05a745d31fb6.png)

![在此处输入图像描述](../Images/7a2bae35a6a4a591ca471dbc18ed5083.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T12:25:31.320

您没有节省任何内存。您正在节省带宽，因为您向服务器发出的 HTTP 请求更少。

正如评论部分所指出的那样，`@iccthedral`您实际上是在节省字节，因为您现在有一个图像 => 已保存字节的总数 = `numberOfPictures * sizeof(pngHeader)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:35:55.527

通过这个调用`CSS Image Spriting`我们可以将我们的 HTTP 请求保存到服务器。如果我们将使用此方法，那么我们的一个 HTTP 请求将转到服务器并通过`CSS Image Spriting`. 所以现在我们大多数人都在使用这种方法：

阅读更多关于[`CSS Image Spriting`](http://css-tricks.com/css-sprites/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:25:42.067

这些图像称为[CSS 图像精灵](http://www.w3schools.com/css/css_image_sprites.asp)。它们用于最小化服务器请求，而不是节省内存。

此外，您可能会考虑使用 SVG 图标，它的重量稍重一些，但如果您需要不同尺寸的相同图标，可以有效地使用它来节省空间。这是一个很好的阅读材料：[SVG 的分辨率独立性](http://coding.smashingmagazine.com/2012/01/16/resolution-independence-with-svg/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T12:26:38.247

这不是节省多少内存的问题，而是通过将图像放入精灵中来“**不做”多少http请求。**网站将加载更快

图像上的 kb 量将 +- 保持不变，单独或精灵

# php - 选择框中的php if else语句

> ID：12005747
> 
> 赞同：3
> 
> 时间：2012-08-17T12:23:37.357
> 
> 标签：php, mysql, html

我正在开发一个允许用户创建文章的文章，但是对于管理员有一些限制，我将其标识为 SgroupId 1。现在当我使用我的管理员代码登录时，我意识到我仍然无法发布所有内容，除了我在 loadTypeUsers 中确定的内容。我知道我得到了 Sgroup1 的值，因为管理面板加载在下面的栏中。此外，当我回显该值时，我会得到 1 的回报，这应该没问题。

但是当我尝试在弹出窗口中加载下拉列表时，它不会给我完整的列表。相反，它只加载我在 LoadTypeUsers 中指定的列表。有人可以帮我吗？

提前致谢。

〜多夫

```
function MakeArticleTypeDropdown(){
        echo "<select name='ArticleTypeId'>";

        if($SgroupId == 1 || $SgroupId == 1){ 
            $results = LoadType();
        }
        else
        {
            $results = LoadTypeUsers();
        }

        while($row = mysql_fetch_array($results)){
            echo "<option value='".$row['ArticleTypeId']."'>"
                            .$row['ArticleTypeName']."</option>";
        }
        echo "</select>";
    } 
```

这包含在 ArticleFunction.php 文件中

```
function LoadTypeUsers(){
    $query = "SELECT * FROM Articletype limit 1,3;";
    $resultaat=SendQuery($query);
    return $resultaat;
}

    function LoadType(){
    $query = "SELECT * FROM Articletype;";
    $resultaat=SendQuery($query);
    return $resultaat;
} 
```

这隐藏在 Sentry.php 文件中

```
session_start();
$UserName = $_SESSION['username'];

$result = mysql_query("select * from user where username='".$UserName."'");
while($row = mysql_fetch_array($result)){
                $UserId = $row['UserId'];
                $CharacterName = $row['CharacterName'];
                $UserName = $row['UserName'];
                $SgroupId = $row['SgroupId'];
            }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:29:10.387

首先，我没有看到您传递`$SgroupId`to的值`MakeArticleTypeDropdown()`。也许您有范围问题，并且您正在检查未在函数内设置的变量 $SgroupId？

第二：`($SgroupId == 1 || $SgroupId == 1)`那是`||`为了什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:30:46.027

$SgroupId 未在函数 MakeArticleTypeDropdown() 中定义，因此它始终处于 else 条件。尝试如下操作

```
MakeArticleTypeDropdown($SgroupId)
{
//-----------your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:28:11.307

我认为该`LIMIT`条款应该是一个`WHERE`条款。

IE

`SELECT * FROM Articletype WHERE SgroupId = 1 OR SgroupId = 3`

也许这条线

```
if($SgroupId == 1 || $SgroupId == 1){ 
```

应该读

```
if($SgroupId == 1 || $SgroupId == 3){ 
```

# c++ - 如何推断函子返回值的类型？

> ID：12005749
> 
> 赞同：15
> 
> 时间：2012-08-17T12:23:40.340
> 
> 标签：c++, templates, c++11

我想编写一个模板函数，它接受 2 个值和一个仿函数或 lambda。该函数使用这些值调用函子并返回结果。

```
template <typename T, typename Fn> 
_ReturnTypeOfPred_ Apply(T x, T y, Fn fn)
  {
  return fn(x, y);
  } 
```

问题：我怎样才能定义返回类型`Apply`等于返回类型`Fn`？它不一定等于`T`，就像这个函子的例子一样

```
template <typename T> 
auto Sum(T x, T y) -> decltype(x+y)
  {
  return x+y;
  } 
```

**更新**

第一个例子过于简单化了。这个应该工作吗？

```
template <typename TContainer, typename Fn> 
auto Apply(const TContainer& x, const TContainer& y, Fn fn) -> decltype(fn(x.front(), y.front()))
  {
  return fn(x.front(), y.front());
  } 
```

如果我重复返回类型的`return`表达式，它总是有效吗？`decltype`有没有更优雅的方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T12:25:07.217

你快到了；只需使用`decltype`：

```
template <typename T, typename Fn> 
auto Apply(T x, T y, Fn fn) -> decltype(fn(x, y))
{
  return fn(x, y);
} 
```

您可以使用`std::result_of`（[std::result_of 和 decltype 之间的区别](https://stackoverflow.com/questions/2689709/difference-between-stdresult-of-and-decltype)）但是为什么要麻烦呢？

```
template <typename T, typename Fn> 
typename std::result_of<Fn, T, T>::type Apply(T x, T y, Fn fn)
{
  return fn(x, y);
} 
```

* * *

关于后续问题：对于一个函数

```
auto fn(<args>) -> <return-type> { return <expression>; } 
```

替换通常`return-type`会*起作用*，但容易出错。例如，考虑：`decltype(<expression>)`

 *```
auto f(char c) -> decltype(std::string() += c) { return std::string() += c; } 
```

这`decltype`将产生`std::string &`，您的函数将返回对本地的左值引用！这必须更改为：

```
auto f(char c) -> std::remove_reference<decltype(std::string() += c)>::type {
    return std::string() += c;
} 
```

在其他情况下，`<expression>`可能会产生一个不可返回的值，例如不可复制、包含 lambda 等。*

# windows-8 - Windows 8 定期磁贴未更新

> ID：12005750
> 
> 赞同：1
> 
> 时间：2012-08-17T12:23:50.270
> 
> 标签：windows-8

我为 Windows 8 定期磁贴更新创建了一个动态页面。瓷砖的网址是：

[http://www.dealsapiens.co.uk/ws/xml.aspx?action=tile](http://www.dealsapiens.co.uk/ws/xml.aspx?action=tile)

所以我尝试使用以下代码：

```
// update the tile poll URI
var notifications = Windows.UI.Notifications;
var polledUri = new Windows.Foundation.Uri("http://www.dealsapiens.co.uk/ws/xml.aspx?action=tile");
var recurrence = notifications.PeriodicUpdateRecurrence.hour;
var tileUpdater = notifications.TileUpdateManager.createTileUpdaterForApplication();
tileUpdater.startPeriodicUpdate(polledUri, recurrence); 
```

但是，当我运行并停止添加并转到开始菜单时，我看不到平铺图像，它只是呈现黑色平铺。有任何想法吗？我的 tile XML 有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:39:39.247

在您的模板中，您使用了无效的 id 属性值。id 对应于磁贴内的位置。对于方形瓷砖，id 应为 1；对于您的宽瓷砖，您需要 1 到 5 的 ID，每个对应于该图像应占据的瓷砖区域。

我已经调整了您的磁贴 XML 并将其托管在[http://jimoneil.blob.core.windows.net/tiles/dealsapiens.xml](http://jimoneil.blob.core.windows.net/tiles/dealsapiens.xml) - 试一试。它对我有用。

# jsp - 需要在单个jsp页面中有两个不相关的表，用默认值和一个提交按钮填充字段

> ID：12005759
> 
> 赞同：0
> 
> 时间：2012-08-17T12:24:11.377
> 
> 标签：jsp, spring-webflow, modelattribute

我有一个 Jsp 页面，如果选中了复选框，则会显示 div 标签。Jsp页面有一个带有modelattribute的表单，而div标签有另一个带有不同modelattribute的表单。我需要使用来自表 2 的默认值填充 Div 标记表单的字段。 Jsp 页面填充有表 1。

我的 jsp 页面很好，运行良好。问题出在我的 Div 标签表单上。我每当我使用`<form:input path="something"....>`jsp 页面时都没有显示。我应该只有一个提交按钮。在提交表单 1（jsp 页面）和表单 2（div 标签）上，应将它们的值保存到各自的表中。

最好的方法是什么？在这种情况下如何使用子流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:20:06.940

如何创建一个包含 2 个对象的 Pair 类？或使用列表或地图？

# r - R中的调查加权随机效应Logit模型

> ID：12005766
> 
> 赞同：4
> 
> 时间：2012-08-17T12:24:43.073
> 
> 标签：r, model, statistics, modeling, random-effects

我正在尝试使用包含使用调查数据的随机效应的模型来预测二元结果。我在下面包含了对抽样设计的描述，因此请随时评论我的调查加权方法。我的主要问题是如何在调查加权模型中包含随机效应。这是到目前为止的代码：

```
# Libraries
library(survey)
# Make dataframe object where d is the working dataframe
dfobj <- svydesign((id = ~cluster+household, strata = ~interaction(region, urban)  weights = ~chweight, strata = ~strata, data = d)

# Run a logit model
formula1 <- stunting ~ modern_toilet + diarrhoea + fever + insurance + sex + age + region_code
model1 <- svyglm(formula=formula1,design=dfobj,family = quasibinomial) 
```

我希望随机效应出现在该地区。谢谢，

取样说明：

MICS 2006 使用了两阶段分层样本设计。在抽样的第一阶段，选择了 300 个普查普查区（124 个城市和 176 个农村普查区）。这些是为 GLSS 5 选择的 660 个 EA（281 个城市和 379 个农村）的子样本。每个区域的集群是使用系统抽样选择的，其概率与其规模成正比。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T02:11:27.733

This isn't available in the survey package and I'm fairly sure it isn't available in R.

There are techniques for generalised linear mixed model fitting with survey data when the clusters for the random effects are the same as the sampling units. There are implementations in Stata (-gllamm-) and MLwin and possibly others.

Design-based inference for mixed models is an area of current research.

# c# - 删除记录并有条件地删除其他LINQ

> ID：12005767
> 
> 赞同：1
> 
> 时间：2012-08-17T12:24:43.947
> 
> 标签：c#, .net, linq, linq-to-sql

假设我在[LINQ to SQL](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_SQL)中有以下类：

```
Module
{
    long MID    // PK
    string Name
}

ModuleBlock
{
    long MID      // FK
    long BID      // FK
}

Block
{
    long BID      // PK
    string Info
}

BlockLanguage
{
    long BID      // FK
    long LID      // FK
}

Language
{
    long LID      // FK
    string Language
} 
```

现在，我想删除一组 moduleBlocks

```
var toBeDeletedModuleBlocks = // Query, select ModuleBlocks to be deleted 
```

toBeDeletedModuleBlocks 的查询可以是任意的，只要它选择 ModuleBlocks。

对于每个在 ModuleBlocks 被删除后在 ModuleBlock 内有 0 个外键 (BID) 的块，我想删除该块。

因此，基本上，如果 Blocks 中存在 BID 而 ModuleBlock 中不存在，我想删除该 Block。

并删除每个带有 FK(BID) 的 BlockLanguage，即要删除的块的 PK(BID)。

这必须通过数据上下文上的***一个***submitChanges 来实现。我已经为此工作了一个小时，但我只是缺乏[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)知识来查询我需要删除的所有内容。

最后，我希望能够做到这一点：

```
var toBeDeletedModuleBlocks =
    from moduleBlocks in context.ModuleBlocks
    where block.MID == 5 // assume block with MID = 5 exists
    select moduleBlocks

// Count of each block referenced by ModuleStrings
var allBlocksCount = 
   from moduleBlock in context.ModuleBlocks
   join block in context.Blocks on ModuleBlock.bID equals block.Bid
   group by block by block.BID into counter
   select new
   {
      BID = counter.Key,
      Count = counter.Count()
   };

// Count of each block that is going to be deleted, in this case it has a maximum of 1 (one module in each where).
var theseBlocksCount =
   from moduleBlock in context.ModuleBlocks
   join block in context.Blocks on ModuleBlock.bID equals block.Bid
   where moduleStrings.MID == 5 // 5 again, these are going to be deleted
   groub by 
   select new
   {
      BID = count.Key
      Count = counter.Count()
   } 
```

现在我想比较 allBlocksCount 和 theseBlockscount，如果 Count 彼此相等，这意味着 BlockString 中将剩下 0 个引用，所以我想要一个查询，它可以为我提供 allBlocksCount && theseBlocksCount 中计数的所有块 (BID)是平等的。

但我不知道足够的 LINQ 来进行该查询。如果我知道如何进行该查询，我可以填写**toBeDeletedBlocks**和**toBeDeletedBlockLanguages**

然后我可以做到这一点。

```
Context.ModuleBlocks.DeleteAllOnSubmit(toBeDeletedModuleBlocks);
Context.Blocks.DeleteAllOnSubmit(toBeDeletedBlocks);
Context.BlockLanguages.DeleteAllOnSubmit(toBeDeletedBlockLanguages);
Context.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:50:58.893

> 因此，基本上，如果 Blocks 中存在 BID 而 ModuleBlock 中不存在，我想删除该 Block。

```
var blocksWithoutModules =
    from block in db.Blocks
    where !db.ModuleBlocks.Any(m => m.Block == block)
    select block; 
```

> 并删除每个带有 FK(BID) 的 BlockLanguage，即要删除的块的 PK(BID)

```
var languagesToDelete =
    from block in blocksWithoutModules
    select block.Language; 
```

> 这必须发生在数据上下文上的 ONE submitChanges

`Block`您可以使用以下方法一次性删除实体集合：

```
db.Blocks.DeleteAllOnSubmit(blocksWithoutModules);
db.Languages.DeleteAllOnSubmit(languagesToDelete);

db.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:02:59.057

我不确定这是否可行，但这是您想要的逻辑，对吗？

```
var remainingBlockIds = context.ModuleBlocks.Except(toBeDeletedModuleBlocks)
                                            .Select(mb => mb.BID)
                                            .Distinct();
var toBeDeletedBlocks = context.Blocks.Where(b => remainingBlockIds.Contains(b.BID) == false);
var toBeDeletedBlockIds = toBeDeletedBlocks.Select(b => b.BID);
var toBeDeletedBlockLanguages = context.BlockLanguages.Where(bl => toBeDeletedBlockIds.Contains(bl.BID));
// Then delete toBeDeletedModuleBlocks, toBeDeletedBlocks, and toBeDeletedBlockLanguages 
```

这是删除 BlockLanguages 的替代逻辑。它会删除所有没有现有 Block 的 BlockLanguages，无论 Block 是否刚刚被删除。优点是它只依赖于剩余的BlockIds。

```
var toBeDeletedBlockLanguages = context.BlockLanguages.Where(bl => remainingBlockIds.Contains(bl.BID) == false); 
```

# java - 使用泛型避免 instanceof

> ID：12005769
> 
> 赞同：1
> 
> 时间：2012-08-17T12:24:56.747
> 
> 标签：java, generics

我需要添加到子属性列表（ProductOption 和 ProductAttribute）中，这些子属性是名为 Product 的父对象的属性。这三个类都扩展了一个抽象类 CMS。

我想一般地调用方法“attachChildToParent”，但我通过推迟`instanceof`和强制转换到产品来延迟不可避免的事情。

有没有办法我可以通用地写这个，这样我就可以避免演员表？

去测试：

```
package puzzler;

import java.util.ArrayList;
import java.util.List;

public class Tester {
    public static void main(String[] args) {
        Product p = new Product();
        ProductAttribute pa = new ProductAttribute();
        ProductOffering po = new ProductOffering();

        List<ProductAttribute> lpa = new ArrayList<ProductAttribute>();
        List<ProductOffering> lpo = new ArrayList<ProductOffering>();

        attachChildToParent(lpa, p);
    }

    static void attachChildToParent(List<? extends CMS> listChild, Product parent) {
        for (CMS cmsItem : listChild) {
            parent.attach(cmsItem);         
        }
    }
} 
```

产品类（父）

```
package puzzler;

import java.util.List;

abstract class CMS {
    String node;
}
public class Product extends CMS {
    List<ProductAttribute> lpa;
    List<ProductOffering> lpo;

    public List<ProductAttribute> getLpa() {
        return lpa;
    }

    public void setLpa(List<ProductAttribute> lpa) {
        this.lpa = lpa;
    }

    public List<ProductOffering> getLpo() {
        return lpo;
    }

    public void setLpo(List<ProductOffering> lpo) {
        this.lpo = lpo;
    }

    public void attach(ProductAttribute childNode) {
        this.getLpa().add(childNode);
    }

    public void attach(ProductOffering childNode) {
        this.getLpo().add(childNode);
    }

    //  I want to avoid this.  Defeats the purpose of generics.
    public void attach(CMS cms) {
        if (cms instanceof ProductOffering) {
            this.getLpo().add((ProductOffering) cms);
        } else         {
            if (cms instanceof ProductAttribute) {
                this.getLpa().add((ProductAttribute) cms);
            }
        }
    }
} 
```

儿童班 1

```
package puzzler;

import puzzler.CMS;

public class ProductAttribute extends CMS {
    String node;

    public String getNode() {
        return node;
    }

    public void setNode(String node) {
        this.node = node;
    }
} 
```

儿童班 2

```
package puzzler;

import puzzler.CMS;

public class ProductOffering extends CMS {
    String node;

    public String getNode() {
        return node;
    }

    public void setNode(String node) {
        this.node = node;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:31:09.237

您可以使用访问者模式解决强制转换问题：在您的`CMS`类中，添加一个新的（抽象）方法`attachTo(Product parent)`。在每一个子类中，都可以实现这个方法在父类上调用attach，正确的函数就会被解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:35:38.263

委托给子类：

```
public void attach(CMS cms) {
    cms.callAdd(this);

} 
```

在 CMS 上添加：

```
public abstract void callAdd(Product product); 
```

在 ProductOffering 上添加：

```
public void callAdd(Product product) {
   getLpo().add(this)       
} 
```

ProductAttribute 的类似...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:33:36.477

覆盖？

```
public void attach(ProductOffering cms) {
   this.getLpo().add(cms);
}

public void attach(ProductAttribute cms) {
   this.getLpa().add(cms);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:35:39.300

有一些方法可以避免这种情况，但不能使用泛型。泛型允许您编写允许避免强制转换的代码，但是当您需要避免`instanceof`. 主要原因是所有具有泛型类型的变量都被视为`Object`内部变量。

这就是为什么编译器`attach(CMS)`在您调用它时使用泛型方法的原因`attachChildToParent()`： 要附加的子项的类型将是`CMS`- 编译器无法保留您在调用时使用的类型`attachChildToParent()`。

唯一的解决方案是在孩子中编写一个附加方法：

```
public class ProductAttribute extends CMS {
    @Override
    public void attachTo( Product p ) {
        p.getLpo().add( this );
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T13:08:28.887

泛型不能解决你的问题。由于之后您会丢失实例特定信息，`<? extends CMS>`因此 List 中的所有元素都是`CMS`唯一的子元素。

为什么不添加简单的方法，它将两个列表都作为参数，适合您的设计并解决您的问题，它也很有效

```
public void attach(List<ProductAttribute> lpa, List<ProductOffering> lpo) {
    this.lpa.addAll(lpa);
    this.lpo.addAll(lpo);
} 
```

# php - 如何在 ubuntu 上安装 iF.SVNAdmin

> ID：12005780
> 
> 赞同：0
> 
> 时间：2012-08-17T12:25:22.183
> 
> 标签：php, svn, ubuntu, open-basedir

根据[http://en.wikipedia.org/wiki/Comparison_of_Subversion_clients](http://en.wikipedia.org/wiki/Comparison_of_Subversion_clients)，网络界面[iF.SVNAdmin](http://svnadmin.insanefactory.com/)可以安装在 linux 操作系统上。

我想将它用作运行 apache 和 php（产品网站上仅列出的两个要求）的 ubuntu vserver 上的颠覆存储库的 Web 界面，但我无法输入 svn 可执行文件的路径。

在配置模板中有 svn.exe 和 svnadmin.exe 的路径 - 看起来只像 windows。

是否可以在 ubuntu 上使用 iF.SVNAdmin，如果可以：如何？

// 编辑：我终于明白了：linux svn 和 svnadmin 二进制文件（/usr/bin/svn 和 /usr/bin/svnadmin）的路径不仅需要在 config.ini 中配置（我所做的），但路径 /usr/bin/ 必须在 php open_basedir 配置中。至少现在打开了配置屏幕，我可以继续配置 If.SVNAdmin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:52:13.697

出于结束的原因，再次回答：

*   可以在 Ubuntu 上安装 iF.SVNAdmin
*   apache 用户需要访问 svn 和 svnadmin 二进制文件（位于 /usr/bin/）
*   二进制文件必须在 php open_basedir 路径中。

# php - 如何使用 PHP 通过 HTTP PUT 接收文件

> ID：12005790
> 
> 赞同：32
> 
> 时间：2012-08-17T12:25:54.783
> 
> 标签：php, file, http, put

这是困扰我一段时间的事情。我正在构建一个 RESTful API，它必须在某些情况下接收文件。

使用时`HTTP POST`，我们可以读取`data from $_POST`和`files from $_FILES`。

使用时`HTTP GET`，我们可以读取`data from $_GET`和`files from $_FILES`。

但是，在使用 时`HTTP PUT`，AFAIK 读取数据的唯一方法是使用`php://input stream`.

一切都很好，直到我想通过 HTTP PUT 发送文件。现在 php://input 流不再按预期工作，因为它也有一个文件。

以下是我目前在 PUT 请求中读取数据的方式：

（只要没有发布文件就可以很好地工作）

```
$handle  = fopen('php://input', 'r');
$rawData = '';
while ($chunk = fread($handle, 1024)) {
    $rawData .= $chunk;
}

parse_str($rawData, $data); 
```

当我然后输出 rawData 时，它显示

```
-----ZENDHTTPCLIENT-44cf242ea3173cfa0b97f80c68608c4c
Content-Disposition: form-data; name="image_01"; filename="lorem-ipsum.png"
Content-Type: image/png; charset=binary

�PNG
���...etc etc...
���,
-----ZENDHTTPCLIENT-8e4c65a6678d3ef287a07eb1da6a5380
Content-Disposition: form-data; name="testkey"

testvalue
-----ZENDHTTPCLIENT-8e4c65a6678d3ef287a07eb1da6a5380
Content-Disposition: form-data; name="otherkey"

othervalue 
```

有谁知道如何通过 HTTP PUT 正确接收文件，或者如何从 php://input 流中解析文件？

**===== 更新#1 =====**

我只尝试了上述方法，不知道我还能做什么。

使用这种方法我没有得到任何错误，除了我没有得到发布的数据和文件的预期结果。

**===== 更新 #2 =====**

我正在使用 Zend_Http_Client 发送这个测试请求，如下所示：（到目前为止 Zend_Http_Client 没有任何问题）

```
$client = new Zend_Http_Client();
$client->setConfig(array(
    'strict'       => false,
    'maxredirects' => 0,
    'timeout'      => 30)
);
$client->setUri( 'http://...' );
$client->setMethod(Zend_Http_Client::PUT);
$client->setFileUpload( dirname(__FILE__) . '/files/lorem-ipsum.png', 'image_01');
$client->setParameterPost(array('testkey' => 'testvalue', 'otherkey' => 'othervalue');
$client->setHeaders(array(
    'api_key'    => '...',
    'identity'   => '...',
    'credential' => '...'
)); 
```

**===== 解决方案 =====**

结果我做了一些错误的假设，主要是 HTTP PUT 类似于 HTTP POST。正如您在下面看到的，DaveRandom 向我解释说 HTTP PUT 并不意味着在同一个请求上传输多个文件。

我现在已经将表单数据从正文转移到 url 查询字符串。正文现在包含单个文件的内容。

有关更多信息，请阅读 DaveRandom 的答案。这是史诗。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-17T13:00:14.777

您显示的数据并未描述有效的 PUT 请求正文（嗯，它*可以*，但我非常怀疑）。它显示的是`multipart/form-data`请求正文 - 通过 HTML 表单通过 HTTP POST 上传文件时使用的 MIME 类型。

PUT 请求应该完全补充对 GET 请求的响应——它们向您发送消息正文中的文件内容，仅此而已。

本质上，我要说的是，接收错误文件的不是您的代码，而是发出请求的代码-客户端代码不正确，而不是您在此处显示的代码（尽管`parse_str()`调用毫无意义锻炼）。

如果您解释客户端是什么（浏览器、其他服务器上的脚本等），那么我可以帮助您更进一步。实际上，您描述的请求正文的适当请求方法是 POST，而不是 PUT。

* * *

让我们从这个问题退后一步，看看一般的 HTTP 协议 - 特别是客户端请求端 - 希望这将帮助您了解所有这些应该如何工作。首先，有一点历史（如果您对此不感兴趣，请随意跳过本节）。

***历史***

HTTP 最初被设计为一种从远程服务器检索 HTML 文档的机制。起初，它只有效地支持 GET 方法，即客户端通过名称请求文档，服务器将其返回给客户端。HTTP 的第一个公共规范，标记为 HTTP 0.9，出现在 1991 年 - 如果您有兴趣，可以在[此处](http://www.w3.org/Protocols/HTTP/AsImplemented.html)阅读。

HTTP 1.0 规范（在 1996 年与[RFC 1945](https://www.rfc-editor.org/rfc/rfc1945)一起正式制定）大大扩展了协议的功能，添加了 HEAD 和 POST 方法。由于响应格式的变化，它不向后兼容 HTTP 0.9 - 添加了响应代码，以及以 MIME 格式标头的形式包含返回文档的元数据的能力 - 键/值数据对。HTTP 1.0 还从 HTML 中抽象出协议，允许以其他格式传输文件和数据。

HTTP 1.1 是当今几乎完全使用的协议形式，它建立在 HTTP 1.0 之上，旨在向后兼容 HTTP 1.0 实现。它于 1999 年通过[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)标准化。如果您是使用 HTTP 的开发人员，请了解此文档 - 它是您的圣经。完全理解它会让你比不理解它的同龄人有相当大的优势。

***已经进入正题***

HTTP 工作在请求-响应架构上——客户端向服务器发送请求消息，服务器向客户端返回响应消息。

请求消息包括一个 METHOD、一个 URI 和可选的一些 HEADERS。请求方法是这个问题所涉及的，所以我将在这里最深入地介绍它——但首先，当我们谈论请求 URI 时，准确理解我们的意思很重要。

URI 是我们请求的资源在服务器上的位置。通常，这由一个*路径*组件和一个可选的*查询字符串*组成。在某些情况下也可能存在其他组件，但为了简单起见，我们现在将忽略它们。

假设您`http://server.domain.tld/path/to/document.ext?key=value`在浏览器的地址栏中键入内容。浏览器拆解这个字符串，并确定它需要在 连接到 HTTP 服务器`server.domain.tld`，并在 请求文件`/path/to/document.ext?key=value`。

生成的 HTTP 1.1 请求将（至少）如下所示：

```
GET /path/to/document.ext?key=value HTTP/1.1
Host: server.domain.tld 
```

请求的第一部分是单词`GET`——这是请求方法。下一部分是我们请求的文件的路径——这是请求 URI。在第一行的末尾是一个标识符，指示正在使用的协议版本。在下一行中，您可以看到一个 MIME 格式的标题，称为`Host`. HTTP 1.1 要求`Host:`标头包含在每个请求中。这是唯一正确的标题。

请求 URI 分为两部分 - 问号左边的所有内容`?`都是*路径*，它右边的所有内容都是*查询字符串*。

***请求方法***

RFC 2616 (HTTP/1.1) 定义了[8 种请求方法](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6)。

`OPTIONS`

OPTIONS 方法很少使用。它旨在作为一种机制，用于在尝试使用服务器可能提供的服务之前确定服务器支持哪种功能。

在我的脑海中，我能想到的唯一一个相当常见的用法是在 Microsoft Office 中直接通过 HTTP 从 Internet Explorer 打开文档时 - Office 将向服务器发送一个 OPTIONS 请求以确定它是否支持特定 URI 的 PUT 方法，如果支持，它将以允许用户将他们对文档的更改直接保存回远程服务器的方式打开文档。此功能紧密集成在这些特定的 Microsoft 应用程序中。

`GET`

这是迄今为止在日常使用中最常见的方法。每次您在 Web 浏览器中加载常规文档时，它都会是一个 GET 请求。

GET 方法请求服务器返回一个特定的文档。应该传输到服务器的唯一数据是服务器需要确定应该返回哪个文档的信息。这可以包括服务器可以用来动态生成文档的信息，该文档以请求 URI 中的标题和/或查询字符串的形式发送。当我们讨论这个主题时 - Cookie 是在请求​​标头中发送的。

`HEAD`

此方法与 GET 方法相同，但有一个区别 - 服务器不会返回请求的文档，如果只返回将包含在响应中的标头。例如，这对于确定是否存在特定文档而不必传输和处理整个文档很有用。

`POST`

这是第二种最常用的方法，可以说是最复杂的方法。POST 方法请求几乎专门用于调用服务器上可能更改其状态的某些操作。

与 GET 和 HEAD 不同，POST 请求可以（并且通常确实）在请求消息的正文中包含一些数据。此数据可以是任何格式，但最常见的是查询字符串（与请求 URI 中显示的格式相同）或多部分消息，可以与文件附件一起传递键/值对。

许多 HTML 表单使用 POST 方法。为了从浏览器上传文件，您需要对表单使用 POST 方法。

POST 方法在语义上与 RESTful API 不兼容，因为它不是[幂等](http://en.wikipedia.org/wiki/Idempotence)的。也就是说，第二个相同的 POST 请求可能会导致服务器状态的进一步变化。这与 REST 的“无状态”约束相矛盾。

`PUT`

这直接补充了 GET。如果 GET 请求指示服务器应在响应正文中的请求 URI 指定的位置返回文档，则 PUT 方法指示服务器应将数据存储在请求正文中由请求 URI 指定的位置。

`DELETE`

这表明服务器应该在请求 URI 指示的位置销毁文档。由于相当明显的原因，很少有面向 Internet 的 HTTP 服务器实现会在收到 DELETE 请求时执行任何操作。

`TRACE`

这提供了一种应用层级别的机制，允许客户端在请求到达目标服务器时检查它发送的请求。这对于确定客户端和目标服务器之间的任何代理服务器可能对请求消息产生的影响非常有用。

`CONNECT`

HTTP 1.1 保留了 CONNECT 方法的名称，但没有定义它的用法，甚至没有定义它的用途。一些代理服务器实现已经使用 CONNECT 方法来促进 HTTP 隧道。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T12:30:17.133

我从未尝试过使用 PUT（GET POST 和 FILES 足以满足我的需要），但这个示例来自 php 文档，因此它可能对您有所帮助（http://php.net/manual/en/features.file-upload.放置方法.php）：

```
<?php
/* PUT data comes in on the stdin stream */
$putdata = fopen("php://input", "r");

/* Open a file for writing */
$fp = fopen("myputfile.ext", "w");

/* Read the data 1 KB at a time
   and write to the file */
while ($data = fread($putdata, 1024))
  fwrite($fp, $data);

/* Close the streams */
fclose($fp);
fclose($putdata);
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-19T04:16:01.010

这是我发现最有用的解决方案。

`$put = array(); parse_str(file_get_contents('php://input'), $put);`

`$put`将是一个数组，就像您以前在 中看到的一样`$_POST`，除了现在您可以遵循真正的 REST HTTP 协议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-18T16:28:35.233

使用 POST 并包含一个 X- 标头来指示实际方法（在本例中为 PUT）。通常这是绕过防火墙的工作方式，防火墙不允许使用 GET 和 POST 以外的方法。只需声明 PHP 错误（因为它拒绝处理多部分 PUT 有效负载，所以它是错误的），然后像对待过时/严苛的防火墙一样对待它。

关于 PUT 相对于 GET 的含义的意见只是意见。HTTP 没有这样的要求。它只是声明“等效”.. 由设计人员确定“等效”的含义。如果您的设计可以接受多文件上传 PUT 并为同一资源的后续 GET 生成“等效”表示，那么无论从技术上还是从哲学上来说，使用 HTTP 规范都很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T12:30:39.457

只需按照[DOC](http://php.net/manual/en/features.file-upload.put-method.php#example-345)中的说明进行操作即可：

```
<?php
/* PUT data comes in on the stdin stream */
$putdata = fopen("php://input", "r");

/* Open a file for writing */
$fp = fopen("myputfile.ext", "w");

/* Read the data 1 KB at a time
   and write to the file */
while ($data = fread($putdata, 1024))
  fwrite($fp, $data);

/* Close the streams */
fclose($fp);
fclose($putdata);
?> 
```

这**应该**读取 PUT 流上的整个文件并将其保存在本地，然后你可以用它做你想做的事。

# linux - 系统重新启动时自动启动星号

> ID：12005791
> 
> 赞同：1
> 
> 时间：2012-08-17T12:25:55.583
> 
> 标签：linux, service, centos, asterisk

我已经在 linux centOS 6.2 上安装了 asterisk 1.4。而且我还输入了在**/etc/rc.local**中以星号开头的条目`/usr/bin/asterisk`。但它没有奏效。当系统启动时，它显示星号服务已经启动，但实际上它没有工作，即命令`asterisk-vvvvr`不起作用。

如果我在启动系统后手动启动该服务，它可以完美运行。**有人可以通过rc.local**文件告诉为什么星号不起作用，我可以在系统启动时自动启动星号。

提前致谢。PS：我已经通过谷歌搜索尝试了很多方法，但仍然存在问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T05:12:06.450

要获得正确的初始化脚本并启用星号在引导时自动启动：更改到星号源目录并执行以下操作：

```
make config
chkconfig asterisk on 
```

之后，您可以重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T16:55:14.443

one subtle assumption here: to enable asterisk automatically on bootup, you have to be root and issue the command, ckhconfig (from olivecoder's steps)

$ sudo chkconfig asterisk on

*   to verify that asterisk is indeed turned on, you should see something like

$ chkconfig |grep asterisk

asterisk 0:off 1:off 2:on 3:on 4:on 5:on 6:off

*   to start the service w/o rebooting, you can try

$ sudo service asterisk start

*   finally, to run the cli

$ sudo asterisk -rvvv

--- you should get something like this:

remus*CLI>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T11:07:27.797

只需转到拥有所有星号二进制文件的星号目录并运行以下命令即可。

就我而言，我的星号二进制文件位于。

`/usr/src/asterisk.`

`root@asterisk#`进行配置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-23T21:24:52.057

SELinux 也可能是个问题。

在此处查看[此 Stackoverflow 帖子](https://stackoverflow.com/questions/2800924/asterisk-unable-to-connect-to-remote-asterisk-does-var-run-asterisk-ctl-exis)，其中说：

如果您启用了 SELINUX，它将阻止创建此文件。您需要将其关闭。

```
vi /etc/selinux/config
set SELINUX=disabled
reboot 
```

# android - 在图库中添加带有按钮的文本视图

> ID：12005793
> 
> 赞同：0
> 
> 时间：2012-08-17T12:26:03.550
> 
> 标签：android, android-layout, android-intent

我正在处理一个包含画廊中一些图像的项目，我想添加带有按钮的文本，该按钮会根据所选图像进行更改。我怎样才能添加这个？

这是代码：

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

 public class GalleryView extends Activity {
Integer[] pics = {
        R.drawable.antartica1,
        R.drawable.antartica2,
        R.drawable.antartica3,
        R.drawable.antartica4,
        R.drawable.antartica5,
        R.drawable.antartica6,
        R.drawable.antartica7,
        R.drawable.antartica8,
        R.drawable.antartica9,
        R.drawable.antartica10
};
ImageView imageView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Gallery ga = (Gallery)findViewById(R.id.Gallery01);
    ga.setAdapter(new ImageAdapter(this));

    imageView = (ImageView)findViewById(R.id.ImageView01);
    ga.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Toast.makeText(getBaseContext(), 
                    "You have selected picture " + (arg2+1) + " of Antartica", 
                    Toast.LENGTH_SHORT).show();
            imageView.setImageResource(pics[arg2]);

        }

    });

}

public class ImageAdapter extends BaseAdapter {

    private Context ctx;
    int imageBackground;

    public ImageAdapter(Context c) {
        ctx = c;
        TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
        imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
        ta.recycle();
    }

    public int getCount() {

        return pics.length;
    }

    public Object getItem(int arg0) {

        return arg0;
    }

    public long getItemId(int arg0) {

        return arg0;
    }

    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageView iv = new ImageView(ctx);
        iv.setImageResource(pics[arg0]);
        iv.setScaleType(ImageView.ScaleType.FIT_XY);
        iv.setLayoutParams(new Gallery.LayoutParams(150,120));
        iv.setBackgroundResource(imageBackground);
        return iv;
    }

}
} 
```

xml:

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<Gallery 
android:id="@+id/Gallery01" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"></Gallery>
<ImageView 
android:id="@+id/ImageView01" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"></ImageView>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:42:29.470

好吧，您可以制作自己的自定义图库，其中每个图像都可以在网格视图中查看，然后是缩略图下方的文本视图和一个按钮（可能需要删除图像）。

要从存储卡动态查看图像，您必须实现 ArrayList 或者您可以采用其他集合框架的产品..

我做了同样的事情，它对我的​​工作，希望也能和你一起工作。

# xml - XSL：如何将子字符串放入 xsl:attribute - url 地址的一部分

> ID：12005794
> 
> 赞同：1
> 
> 时间：2012-08-17T12:26:06.457
> 
> 标签：xml, sharepoint, xslt

我在 Sharepoint 上编写自定义搜索结果页面。我遇到了 XSLT 的问题。

SP 的搜索结果类似于：

```
<Result>
...
<url>http://server/_bdc/name/source.aspx?id=444</url>
...
</Result> 
```

但我想创建自己的链接，从这个 url 变量我只想剪切 id (444)：

```
<a href="http://mynewlink/page.aspx?id=444">MyResult</a> 
```

我尝试了类似的东西（基于标准 SP 模板）

```
...
<a>
<xsl:attribute name="href">        
{concat('http://mynewlink/page.aspx?id=', substring-after("{url}", "="))}
</xsl:attribute>
</a>
... 
```

但它没有用 - 我不知道这个连接放在哪里......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:45:32.653

**您的代码“几乎”正确，首先替换**：

```
"{url}" 
```

**与**：

```
url 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
    <a href=
       "http://mynewlink/page.aspx?id={substring-after(url,'=')}">MyResult</a>
 </xsl:template>
</xsl:stylesheet> 
```

**当这应用于提供的 XML 文档时**：

```
<Result>
 ...
 <url>http://server/_bdc/name/source.aspx?id=444</url>
 ...
</Result> 
```

**产生了想要的正确结果：**

```
<a href="http://mynewlink/page.aspx?id=444">MyResult</a> 
```

# python - 如何过滤掉Python中全为0的列？

> ID：12005797
> 
> 赞同：7
> 
> 时间：2012-08-17T12:26:12.567
> 
> 标签：python

我有一些需要过滤的结构。有没有办法在 Python 中很好地做到这一点？

我有一种丑陋的做法，但我想清理它：

```
original_header = ['a','b','c']
original_rows = [[1,0,1], [0,0,0], [1,0,0]]

processed_header, processed_rows = some_cool_utility(original_header, original_rows)

assert_equals(['a', 'c'], processed_header)
assert_equals([[1,1], [0,0], [1,0]], processed_rows) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:33:15.333

```
original_header = ['a','b','c']
original_rows = [[1,0,1], [0,0,0], [1,0,0]]

#transpose rows to get columns
columns = zip(*original_rows)

#build list which is true if the column should be kept (is not a column of all zeros)  
not_all_zero = [  any(x) for x in columns ]

#filter the lists based on columns
processed_header = [x for i,x in enumerate(original_header) if not_all_zero[i] ]
processed_columns = [ x for i,x in enumerate(columns) if not_all_zero[i] ]

#transpose the remaining columns back into rows.
processed_rows = zip(*processed_columns)

print (processed_header)  #['a', 'c']
print (processed_rows)    #[(1, 1), (0, 0), (1, 0)] 
```

请注意，这将返回*元组*列表而不是列表列表。如果你真的需要一个列表列表，你可以`processed_rows = map(list, processed_rows)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T12:42:48.237

使用[NumPy](http://numpy.scipy.org/)

```
import numpy as np

original_rows = np.asarray([[1,0,1], [0,0,0], [1,0,0]])
original_labels = np.asarray(["a", "b", "c"])

# Get locations where columns are all zeros.
nonzero_cols = np.any(original_rows!=0, axis=0)

# Get data only where column is not all zeros.
nonzero_data = original_rows[:, nonzero_cols]
nonzero_labels = original_labels[nonzero_cols] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T12:36:34.650

这应该有效：

```
>>> original_header = ['a','b','c']
>>> original_rows = [[1,0,1], [0,0,0], [1,0,0]]
>>> row_major = zip(*original_rows)
>>> filtered = [(h, col) 
...             for h, col 
...             in zip(original_header, row_major) 
...             if any(col)]
>>> header, rows = zip(*filtered)
>>> header
('a', 'c')
>>> rows
((1, 0, 1), (1, 0, 0))
>>> zip(*rows)
[(1, 1), (0, 0), (1, 0)]
>>> 
```

[**编辑：**固定；列表理解添加了`filtered`一个额外的转置，我并没有真正认真地看]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T12:46:34.030

如果您不拘泥于数据的格式，将数据存储为字典会使这变得更简单：

```
original_header = ['a','b','c']
original_rows = [[1,0,1], [0,0,0], [1,0,0]]

# Restructure data into easier-to-process dict
to_dict = dict(zip(original_header, zip(*original_rows)))
print to_dict # {'a': (1, 0, 1), 'b': (0, 0, 0), 'c': (1, 0, 0)}

# Filter out keys with all-zero values
filtered_dict = {k:v for (k, v) in dictify.items()
                 if not all(x==0 for x in v)}

print filtered_dict # Output: {'a': (1, 0, 1), 'c': (1, 0, 0)} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T15:11:20.740

仅作记录：

```
def some_cool_utility(header, rows):
    data = [element for element in zip(header, rows) if any(element[1])]
    head, rows = zip(*data)
    return head, rows 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T12:46:04.110

以下作品：

```
all_rows = original_rows[:] #make a copy
all_rows.insert(0, original_header)

all_columns = list(zip(*all_rows)) #transpose
filtered_columns = [col for col in all_columns if any(col[1:])] #remove columns that only contain 0's
filtered_rows = [list(tp) for tp in zip(*filtered_columns)] #transpose back, convert each element to a list

processed_header = filtered_rows[0]
processed_rows = filtered_rows[1:] 
```

# javascript - 如何在 javascript 文件函数中找到 Radnotification id

> ID：12005803
> 
> 赞同：0
> 
> 时间：2012-08-17T12:26:41.150
> 
> 标签：javascript, asp.net, telerik, rad-controls

我在我的项目中使用 radcontrols 并且我想限制 radTextboxes 不应该允许特殊字符所以我在我的 aspx 页面中使用脚本函数它工作正常，但我想在整个项目中使用它所以我想维护一个我想使用该函数的 javascript 文件，因此请帮助我了解如何将文本框 ID 和通知 ID 传递给函数。这是我的代码

aspx

脚本文件

```
function valueChangedHandler(sender, eArgs) {alert("Done");
    var pattern = /^[a-zA-Z0-9\s]*$/;
    var value = sender.get_value();
    var matchArray = value.match(pattern);
    if (matchArray == null) {
        var notification = $find("<%=lblNotification.ClientID %>");
        notification.set_text('Enter AlphaNumerics Only!');
        notification.show();
        sender.clear();
        sender.focus();
        exit();
    }

} 
```

通知代码

```
 <telerik:RadNotification runat="server" BorderColor="Black" BorderStyle="Solid" BackColor="ActiveBorder" BorderWidth="4" EnableRoundedCorners="true" EnableShadow="true" ID="lblNotification" Position="BottomRight" ShowCloseButton="true" Opacity="90" Title="Result" VisibleTitlebar="False">

            </telerik:RadNotification> 
```

以上工作正常，但我没有收到通知消息，所以告诉我如何传递通知 ID。举个小例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:52:57.263

您根本不能在外部 JS 文件中使用服务器代码块。服务器仅在 aspx/ascx 文件中解析它们。您可以做的是在页面上声明一个函数，该函数具有将返回所需引用的通知：

```
function getNotification(){
     return $find("<%=lblNotification.ClientID %>");
} 
```

然后你的 JS 文件中的函数会调用这个函数：

```
var notification = getNotification(); 
```

还有其他在外部文件中使用 ClientID 的方法，例如在页面的全局变量中创建一个数组，但是如果您不想依赖硬编码的 ID，它们将在页面中包含代码。好吧，您也可以从代码隐藏中注入脚本，但差别不大。

# vb.net - 如何在 VB.net 中连接到本地网络上的 Access 数据库？

> ID：12005804
> 
> 赞同：0
> 
> 时间：2012-08-17T12:26:43.353
> 
> 标签：vb.net, ms-access, database-connection

我的 MS 访问数据库位于此处：

```
http://192.168.202.1/dbname.mdb 
```

LAN 网络中的其他计算机已安装 VB.net 软件。

我如何连接到这个数据库？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:25:16.323

Actually, your terminology you using is wrong. You don't connect to a word file. You don't connect to a power point file.

So you have to keep in mind here you are not really connecting to some text file or mdb file that just happens to be sitting on a hard drive.

You are thus simply opening a file.

I mean it is silly to say we connect to a word file, or we connect to a Power point file. So in the case of the office suite and those basic simple files that resides on the disk drive?

We are talking about plane Jane windows file.

A horse is a horse is a horse.

A file is a file is a file.

So you don't connect to the jpg file sitting on the hard drive, you OPEN the jpg file. So if you talking about your current setup it best to use the correct terminology here. You are not connecting to that Access mdb file, but are in fact opening a plane Jane windows file. If you look close at your connection string, it will ALWAYS have a fully qualified windows path name in it that resolves to a file sitting on a folder.

So if you place that file on some server, say web server, then then you still faced with having to open that windows file. This is NOT ANY different then wanting to open a power point file. That means if you going to connect over the internet then you need to EXTEND the windows file system (this means you will need some kind of VPN). At the end of the day, if you cannot use windows networking to brwose and open the folder where that file resides, then you cannot open that file with Access (or more specific in your case the JET data engine).

So for example, if the server where the file resides is a non windows box, say Linux, then you need to "add or use" or "install" the windows file and networking system on that box. A common choice in Linux is to install and run Samba on that computer.

Keep in mind that in the case of using SQL server, then you are connecting to a SERVICE running ON THAT server. In this case then you not opening a file on the remote box, but are simply using a socket (tp/ip) connection to some service. So you not just opening a silly old windows file that happens to be a mdb file on that system in this case.

So as such when you use FTP or http, these are not real "windows" networking systems that allow you to open + use a plane Jane windows file.

So as such, just keep in mind the concept here that you are NOT connecting to some file, but you are just going to OPEN the file. You need to be able to OPEN the file, and you need to be using the windows networking system to do this open file in the case of Access. I mean, you don't have to install Access(JET) on the target computer. You don't have to install Power Point on the target computer to open a power point file. So you are ONLY opening a file that just happens to be on some other computer.

As such, your path name of http: is not allowed since that is now using http, and not windows file/networking system. As such a path name has nothing to do with windows networking and opening of a simple file sitting on the hard disk. So HTTP or FTP etc. are not based on windows networking and file system.

I don’t think this basic concept is too hard to grasp, but at the end of the day the concept you need to grasp and learn is that when you open a windows file sitting in a folder on the hard drive, then then will you need the windows file system to open such files. The idea and concept of opening a file in a folder might be new to you, but it is a basic requirement and understanding you need to solve this issue.

As noted, you can consider a VPN, but I explain why such a setup is not going to work in this article:

Using a wan with ms-access? How fast, how far? [http://www.kallal.ca/Wan/Wans.html](http://www.kallal.ca/Wan/Wans.html)

I suppose another possibility would be to consider the new web publishing ability that Access has. In the following video note how I switch to running the Access application 100% in the browser. The resulting application does not need any ActiveX or Silverlight. So the web pages run + work fine on my smartphone and even my iPad.

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

So you can use the new web publishing feature, and that would allow one to use http: to use the application.

# iphone - PhoneGap: mediaRec.startRecord(); 不在cordova-1.7.0中工作

> ID：12005805
> 
> 赞同：0
> 
> 时间：2012-08-17T12:26:47.970
> 
> 标签：iphone, cordova

我正在尝试使用 phoneGap(cordova 1.7.0) 录制示例音频，但它无法正常工作。

这是代码

```
 function startRecord() {
    var src = "testrecord.wav";
    alert("startRecord: "+src);
    navigator.mediaRec = new Media(src, onSuccessRecord, onErrorRecord);

    // Record audio
    navigator.mediaRec.startRecord();

    // Stop recording after 10 sec
    var recTime = 0;
    var recInterval = setInterval(function() {
                                  recTime = recTime + 1;
                                  //setAudioPosition(recTime + " sec");
                                  if (recTime >= 10) {
                                  clearInterval(recInterval);
                                  navigator.mediaRec.stopRecord();
                                  }

                                  }, 1000);
    }

function onSuccessRecord() {

    //alert("recordAudio():Audio Success");
    var src = "testrecord.wav";
    playRecordedAudio(src);

}

function playRecordedAudio(src) {

    // Create Media object from src
    //alert("play: "+src);
    navigator.my_media = new Media(src, onSuccessPlay, onErrorRecord);

    // Play audio
    navigator.my_media.play();

}
// onError Callback 
//

function onSuccessPlay() {
    console.log("playAudio():Audio Success");
}

function onErrorRecord(error) {
    alert('code: '    + error.code    + '\n' + 
          'message: ' + error.message + '\n');
    } 
```

我已经在 xcode 模拟器中尝试过，它运行良好，但在 iphone 中没有，有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:14:26.483

对于 iphone，录制文件（在您的情况下为 testrecord.wav）必须在您开始录制之前存在。[使用 Phonegap File API](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html)确保它存在。

# java - 从 Java 连接到托管在虚拟机中的 MYSQL 数据库

> ID：12005808
> 
> 赞同：1
> 
> 时间：2012-08-17T12:26:50.507
> 
> 标签：java, mysql, jdbc

我试图连接到托管在虚拟机中的 MySQL 数据库，但它对我不起作用。

这是我的设置：

*   最新的 Ubuntu Server 女巫 Apache2 mysql 已安装并且正在运行
*   数据库“反馈”，表“测试”设置并填充测试数据
*   网络适​​配器已桥接。服务器的 IP 是（如果我输入 ifconfig）10.0.0.1，我的电脑的 IP 是 10.0.0.4。
*   手动打开了 3306 端口。jar mysql 连接器 java 5.1.21-bin.jar 是一个引用库

这是Java代码：

```
import java.sql.*;

public class Main {

  public static void main(String[] args) {

    try {

        Class.forName("com.mysql.jdbc.Driver").newInstance();
        System.out.println("Sucess");
        Connection con = DriverManager.getConnection("jdbc:mysql://10.0.0.1/feedback","root","myrootpassword");

        con.setReadOnly(true);

    } catch (Exception e) {

        System.err.print("NO CONNECTION");
    }

  }
} 
```

我希望有人可以帮助解决这个问题，因为我正在研究这个问题一段时间。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:33:36.307

只有两个想法：

*   MySQL 是否配置为侦听所有地址而不仅仅是本地地址？bind-address 配置指令的值是多少？0.0.0.0 表示“侦听所有接口”，而 127.0.0.1 表示“侦听 localhost 接口，仅用于从该主机访问”。
*   也许您可以在 catch 语句中提取有关该问题的一些详细信息？

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:37:21.703

如果我正确理解了一个问题，要连接 VM 数据库，请检查以下步骤

1.jdbc:mysql://10.0.0.1/feedback。

2.确保没有防火墙阻止对3306端口的访问。

3.确保您正在连接的用户被允许从这个特定的主机名连接。

# php - 由于 ZEND_NUM_ARGS() 宏而无法构建扩展

> ID：12005825
> 
> 赞同：-1
> 
> 时间：2012-08-17T12:27:58.960
> 
> 标签：php, c, php-internals

我正在编写小型 php 扩展并且在构建它时遇到问题。编码：

```
PHP_RINIT_FUNCTION(pstat)
{
    int argc = ZEND_NUM_ARGS();
    return SUCCESS;
} 
```

在 make 上出现错误：

```
.... /ext/pstat/pstat.c:122:31: error: 'ht' undeclared (first use in this function) 
```

ZEND_NUM_ARGS() 是 Zend_API.h 中的一个宏

```
#define ZEND_NUM_ARGS()     (ht) 
```

但什么是'ht'？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:35:39.827

你为什么在这里使用`ZEND_NUM_ARGS()`？这是请求初始化函数，不会接收任何用户提供的参数。

* * *

通常但不总是`ht`用于表示哈希表。

`ZEND_NUM_ARGS()`通常在使用`PHP_FUNCTION`宏定义的函数中使用，以获取从 PHP 脚本传递给内部函数的参数数量。

* * *

如果您从宏中追溯，`PHP_FUNCTION`您最终会看到在内部函数定义中使用的以下标准参数集。

```
#define INTERNAL_FUNCTION_PARAMETERS int ht, zval *return_value, zval **return_value_ptr, zval *this_ptr, int return_value_used TSRMLS_DC 
```

如您所见，此定义包括`ht`int。

的参数`PHP_RINIT_FUNCTION`不包括`ht`。

```
#define INIT_FUNC_ARGS      int type, int module_number TSRMLS_DC 
```

# javascript - Javascript自定义滚动条

> ID：12005826
> 
> 赞同：0
> 
> 时间：2012-08-17T12:28:09.593
> 
> 标签：javascript, css

我有以下代码用于显示自定义滚动条。这里显示了一些背景，而不是这个我需要显示一个 1px 细线图像。我该怎么做？我正在使用 TinyScroller

CSS：

```
#wrapper_1 {width:99%; height:600px; padding:2px}
#scroll_1 {position:relative; width:99%; height:600px; overflow:auto}
#scrollcontent_1 {position:absolute; width:94%; z-index:200}
#scrollbar_1 {float:right; position:relative; border:0; display:none; width:15px; height:600px; z-index:100; background:url(images/scroll-bg.png)}
.scroller_1 {position:relative; top:0; cursor:pointer; border:0; width:15px; background-image:url(images/scroller.png); background-position:50% 50%; background-repeat:no-repeat}
.buttonclick_1 {} 
```

代码：

```
<div id="wrapper_1">
<div id="scroll_1">
<div id="scrollcontent_1">
<h1>TinyScroller</h1>
<p>test message</p>
</div>
<div id="scrollbar_1">
<div id="scroller_1" class="scroller_1"></div>
</div>
</div>
</div>
<script type="text/javascript"> 
TINY.scroller.init('scroll_1','scrollcontent_1','scrollbar_1','scroller_1','buttonclick_1');
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:35:10.830

好吧，如果你在 Chrome 中，你可以使用普通的 CSS：

```
::-webkit-scrollbar {
    width: 15px;
    height: 15px;
}

::-webkit-scrollbar-track {
    background-clip: padding-box;
    border: solid transparent;
    border-width: 0 0 0 4px;
}

::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, .2);
    background-clip: padding-box;
    border: solid transparent;
    border-width: 1px 1px 1px 6px;
    min-height: 28px;
    padding: 100px 0 0;
    box-shadow: inset 1px 1px 0 rgba(0, 0, 0, .1),inset 0 -1px 0 rgba(0, 0, 0, .07);
}

::-webkit-scrollbar-corner {
    background: transparent;
}

::-webkit-scrollbar-button {
    display: none;
} 
```

演示： http: [//jsfiddle.net/maniator/ysgBy/](http://jsfiddle.net/maniator/ysgBy/)
要查看的站点：[http://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:41:59.453

根据文档 [http://www.scriptiny.com/2009/09/javascript-scrollable-div/](http://www.scriptiny.com/2009/09/javascript-scrollable-div/)

我认为您的 html 不正确。尝试类似：

```
<div id="wrapper_1">

<div id="scroll_1">
    <div id="scrollcontent_1">
        <h1>TinyScroller</h1>
        <p>test message</p>
    </div>
    <div id="scrollbar_1">
        <div id="scroller"></div>
    </div>
</div> 
```

# android - 单个活动渲染两个视图

> ID：12005830
> 
> 赞同：0
> 
> 时间：2012-08-17T12:28:21.810
> 
> 标签：android

我将布局分成两半，左侧是所有按钮。布局的右侧应显示按钮单击活动。我正在使用 android 2.2，这尤其适用于超大屏幕，因为在小屏幕中，主要活动只有按钮，单击按钮会进入新活动，但对于超大屏幕，所有这些图像和按钮看起来都非常小，所以现在分开布局左侧用于按钮，右侧用于呈现这些特定活动。任何指针或代码示例都会非常有帮助。

在 android 2.2 中尝试过 Fragments，但 Fragments 仅在 android 3 之后才有效。所以期待您的回复。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:29:27.940

Fragments api 在发布后几乎立即被反向移植。使用来自 Android 开发者博客的以下博文中的信息，在您支持低于 3.0 的 API 版本的应用中使用此库

[http://android-developers.blogspot.com/2011/03/fragments-for-all.html](http://android-developers.blogspot.com/2011/03/fragments-for-all.html)

**编辑**

这是一个更好的图片链接和更详细的说明

[http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/](http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/)

# android - 如何将多个选定的值发送到android中的数据库查询？

> ID：12005837
> 
> 赞同：0
> 
> 时间：2012-08-17T12:28:47.253
> 
> 标签：android

在我之前的项目中，我保留了单选按钮，如果选择了任何单选按钮（主题），我会动态地将特定的 id 发送到查询。但是现在我需要保留复选框而不是单选按钮，这意味着可以进行多选。因此，如果选择了多个复选框，我如何将 id 发送到查询以检索数据。

从 my_id = 92 的 mytable 中选择 *

在上面的查询中，代替 92 我正在动态传递值。但是现在如果我选择了多个复选框，那么如何将值动态发送到查询以及如何显示数据库表中的数据。

任何人都可以帮助我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:08:49.043

您可以尝试类似`SELECT * FROM mytable WHERE my_id IN (92,93,94)`，在括号中添加任意数量的 id。

现在有趣的部分是如何动态构建该字符串。我的建议是在你的 id 列表上使用迭代来构建一个字符串。

```
String whereClause = "my_id IN (";

for (String id : idList) {

    if (whereClause.charAt(whereClause.length - 1) != "(") {
        whereClause += ",";
    }

    whereClause += id;
}        

whereClause += ")"; 
```

一旦你建立了这个字符串，你可以将它作为`selection`参数传递给你的数据库查询方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:33:13.147

怎么样`SELECT * FROM mytable WHERE my_id = 92 OR my_id = 93`？

您还应该使用 Android 提供的 API，如下所示：

```
 final Cursor c = mDb.query(true, "mytable",
            new String[] { "name, description, title" }, // columns
            "myid = ? OR myid = ?", // WHERE
            new String[] { "92", "93" }, // WHERE args
            null, // GROUPBY ***
            null, // HAVING ***
            null, // ORDER BY ***
            null); // LIMIT 
```

# jquery - jQuery: mouseenter, mouseover, mouseleave, mouseout on select

> ID：12005838
> 
> 赞同：3
> 
> 时间：2012-08-17T12:28:54.130
> 
> 标签：jquery, mouseevent, mouseover, mouseenter, mouseleave

我有一个这样的选择框：

```
<select id="se">
   <option>An option</option>
   <option>Another option</option>
</select> 
```

当用户在选择框上输入鼠标时，我想显示一个文本，如果用户用鼠标离开该区域，我想隐藏。像这样：

```
jQuery('#se').mouseover(function(){
   someThing.show();
}).mouseout(function(){
   someThing.hide();
}); 
```

第一步工作正常。当我输入选择框时，将显示文本。当我现在单击选择框以选择一个选项时，当我将鼠标悬停在一个选项上时将触发“mouseout”事件 - 但选项元素在选择元素中......我不知道为什么，但是 jQuery似乎认为我不在选择框中。

是否有任何解决方案，无需更改 HTML 代码？

**编辑：**我试过 mouseenter、mouseover、mouseout、mouseleave ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T12:34:01.017

使用变量`isFocus`

JavaScript/Jquery：

```
var isFocus = false;
jQuery('#se').mouseover(function(){
   someThing.show();
}).mouseout(function(){
    if(!isFocus)
    {
       someThing.hide();
    }
}).focus(function(){
    isFocus = true;
}).blur(function(){
    someThing.hide();
    isFocus = false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:45:41.567

试试这个：

```
var $someThing = $('#something')
var stop;

jQuery('#se').hover(function(){
    $someThing.stop().fadeIn();
    clearTimeout(stop)
}, function(){
     stop = setTimeout(function(){
          $someThing.stop().fadeOut();
     }, 2000)
}); 
```

[小提琴](http://jsfiddle.net/Pnm7J/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:02:35.213

如果您想要一个纯 JS 解决方案，真正保持鼠标悬停事件触发选项的最简单方法是`<div>`按照艾伦的建议将其包装为 a 。

我会简单地快速浏览[`.wrap() method`](http://api.jquery.com/wrap/)一下您的所有`<select>`'，然后在它们周围自动添加一个 div。然后像这样设置一个实时 mouseover/mouseout 事件：

[jsFiddle 演示](http://jsfiddle.net/pnkMX/1/)

```
$('select').wrap('<div class="seWrapper" />');

$(document).on('mouseover', '.seWrapper', function (e) {
        console.log('mouseIN');
});

$(document).on('mouseout', '.seWrapper', function (e) {
        console.log('mouseOUT');
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:17:42.290

单击时，取消绑定 mouseout 事件和 mouseover，绑定 mouseout 事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-28T20:32:35.480

我使用了一个计时器来防止触发 mouseleave 事件。它工作得很好。

```
var timeoutOver;

$("#btn").mouseenter(function () {

    clearInterval(timeoutOver);
    //over event

}).mouseleave(function () {

    timeoutOverPeriod = setTimeout(function() {
            //out event
            $("my-select").blur();
    }, 500);

}); 
```

# microsoft-metro - AppBarButtonStyle 对 ToggleButton 控件不可靠

> ID：12005843
> 
> 赞同：3
> 
> 时间：2012-08-17T12:29:12.727
> 
> 标签：microsoft-metro, windows-runtime, winrt-xaml, windows-store

尽管 StandardStyles.xaml-ResourceDictionary 的 AppBarButtonStyle 的注释指出它可以用于 Buttons 和 ToggleButtons，但它对于 ToggleButton 控件的行为并不可靠。

应用于 ToggleButton，缺少大纲，并且在某些情况下，未选中状态将呈现为已选中。此外，该样式引用了一个名为“BackgroundCheckedGlyph”的元素，该元素未定义并在 AppBar 中使用时会导致调试错误。

是否有人已经为 Buttons 和 ToggleButtons 找到或建立了一个工作样式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:10:41.693

RTM 中的 StandardStyles.xaml 和 ToggleButtons 显然存在一些问题。

虽然 HCL 试图解决这个问题是一个好的开始，但 HCL 自己承认仍然存在一些问题。

在 MS 修复此问题之前，我认为最好为 ToggleButtons 使用完全独立的样式。[在这个 MS 论坛页面](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/c95b40da-25a2-40c6-b143-ea818c86ef59?prof=required)上有一个工作风格，我在下面复制了它 - 到目前为止，它似乎运行良好。

```
<Style x:Key="ToggleAppBarButtonStyle" TargetType="ToggleButton">
    <Setter Property="Foreground" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
    <Setter Property="VerticalAlignment" Value="Stretch"/>
    <Setter Property="FontFamily" Value="Segoe UI Symbol"/>
    <Setter Property="FontWeight" Value="Normal"/>
    <Setter Property="FontSize" Value="20"/>
    <Setter Property="AutomationProperties.ItemType" Value="App Bar ToggleButton"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Grid x:Name="RootGrid" Width="100" Background="Transparent">
                    <StackPanel VerticalAlignment="Top" Margin="0,12,0,11">
                        <Grid Width="40" Height="40" Margin="0,0,0,5" HorizontalAlignment="Center">
                            <TextBlock x:Name="BackgroundGlyph" Text="&#xE0A8;" FontFamily="Segoe UI Symbol" FontSize="53.333" Margin="-4,-19,0,0" Foreground="{StaticResource AppBarItemBackgroundThemeBrush}"/>
                            <TextBlock x:Name="OutlineGlyph" Text="&#xE0A7;" FontFamily="Segoe UI Symbol" FontSize="53.333" Margin="-4,-19,0,0"/>
                            <ContentPresenter x:Name="Content" HorizontalAlignment="Center" Margin="-1,-1,0,0" VerticalAlignment="Center"/>
                        </Grid>
                        <TextBlock
                            x:Name="TextLabel"
                            Text="{TemplateBinding AutomationProperties.Name}"
                            Foreground="{StaticResource AppBarItemForegroundThemeBrush}"
                            Margin="0,0,2,0"
                            FontSize="12"
                            TextAlignment="Center"
                            Width="88"
                            MaxHeight="32"
                            TextTrimming="WordEllipsis"
                            Style="{StaticResource BasicTextStyle}"/>
                    </StackPanel>
                    <Rectangle
                            x:Name="FocusVisualWhite"
                            IsHitTestVisible="False"
                            Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
                            StrokeEndLineCap="Square"
                            StrokeDashArray="1,1"
                            Opacity="0"
                            StrokeDashOffset="1.5"/>
                    <Rectangle
                            x:Name="FocusVisualBlack"
                            IsHitTestVisible="False"
                            Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}"
                            StrokeEndLineCap="Square"
                            StrokeDashArray="1,1"
                            Opacity="0"
                            StrokeDashOffset="0.5"/>

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPointerOverBackgroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPointerOverForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed"/>
                            <VisualState x:Name="Disabled"/>
                            <VisualState x:Name="Checked">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OutlineGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPressedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="CheckedPointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OutlineGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPressedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="CheckedPressed"/>
                            <VisualState x:Name="CheckedDisabled"/>
                            <VisualState x:Name="Indeterminate"/>
                            <VisualState x:Name="IndeterminatePointerOver"/>
                            <VisualState x:Name="IndeterminatePressed"/>
                            <VisualState x:Name="IndeterminateDisabled"/>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation
                                            Storyboard.TargetName="FocusVisualWhite"
                                            Storyboard.TargetProperty="Opacity"
                                            To="1"
                                            Duration="0"/>
                                    <DoubleAnimation
                                            Storyboard.TargetName="FocusVisualBlack"
                                            Storyboard.TargetProperty="Opacity"
                                            To="1"
                                            Duration="0"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused" />
                            <VisualState x:Name="PointerFocused" />
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T06:54:15.213

我发现如果我手动设置 ToggleButton 的 VisualState，那么样式就可以正常工作（在添加缺少的 TextBlock 之后）。不知道为什么这有效（或者为什么它一开始就不起作用......）

有关更多信息，请参阅[此帖子](http://www.visuallylocated.com/post/2012/09/04/Fixing-the-VisualState-of-your-AppBar-ToggleButton.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:09:00.260

这是我自己尝试修复样式的结果。它似乎有效（我在“Light”主题和“HighContrast”主题中查看过它。我发现了一些小缺点，但在我看来它比原来的更好。
如果我在这方面投入更多时间，我会发布改进的版本。如果您使用此样式并自行改进，请随时更改我的版本。

```
<Style x:Key="AppBarButtonStyle" TargetType="ButtonBase">
    <Setter Property="Foreground" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
    <Setter Property="VerticalAlignment" Value="Stretch"/>
    <Setter Property="FontFamily" Value="Segoe UI Symbol"/>
    <Setter Property="FontWeight" Value="Normal"/>
    <Setter Property="FontSize" Value="20"/>
    <Setter Property="AutomationProperties.ItemType" Value="App Bar Button"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ButtonBase">
                <Grid x:Name="RootGrid" Width="100" Background="Transparent">
                    <StackPanel VerticalAlignment="Top" Margin="0,12,0,11">
                        <Grid Width="40" Height="40" Margin="0,0,0,5" HorizontalAlignment="Center">
                            <TextBlock x:Name="BackgroundGlyph" Text="&#xE0A8;" FontFamily="Segoe UI Symbol" FontSize="53.333" Margin="-4,-19,0,0" Foreground="{StaticResource AppBarItemBackgroundThemeBrush}"/>

                            <!-- The following TextBlock seemed to be missing in the original template -->
                            <TextBlock x:Name="BackgroundCheckedGlyph" Visibility="Collapsed" Text="&#xE0A8;" FontFamily="Segoe UI Symbol" FontSize="53.333" Margin="-4,-19,0,0" Foreground="{StaticResource AppBarItemForegroundThemeBrush}"/>

                            <TextBlock x:Name="OutlineGlyph" Text="&#xE0A7;" FontFamily="Segoe UI Symbol" FontSize="53.333" Margin="-4,-19,0,0"/>
                            <ContentPresenter x:Name="Content" HorizontalAlignment="Center" Margin="-1,-1,0,0" VerticalAlignment="Center"/>
                        </Grid>
                        <TextBlock
                            x:Name="TextLabel"
                            Text="{TemplateBinding AutomationProperties.Name}"
                            Foreground="{StaticResource AppBarItemForegroundThemeBrush}"
                            Margin="0,0,2,0"
                            FontSize="12"
                            TextAlignment="Center"
                            Width="88"
                            MaxHeight="32"
                            TextTrimming="WordEllipsis"
                            Style="{StaticResource BasicTextStyle}"/>
                    </StackPanel>
                    <Rectangle
                            x:Name="FocusVisualWhite"
                            IsHitTestVisible="False"
                            Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
                            StrokeEndLineCap="Square"
                            StrokeDashArray="1,1"
                            Opacity="0"
                            StrokeDashOffset="1.5"/>
                    <Rectangle
                            x:Name="FocusVisualBlack"
                            IsHitTestVisible="False"
                            Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}"
                            StrokeEndLineCap="Square"
                            StrokeDashArray="1,1"
                            Opacity="0"
                            StrokeDashOffset="0.5"/>

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="ApplicationViewStates">
                            <VisualState x:Name="FullScreenLandscape"/>
                            <VisualState x:Name="Filled"/>
                            <VisualState x:Name="FullScreenPortrait">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="Visibility">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="Width">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="60"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Snapped">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="Visibility">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="Width">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="60"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">                                    
                                <!-- The following animations are here, because I was not able to reset the Glyphs states in the Unchecked state.
                                     I hope that this does not produces any sideeffects  -->
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundCheckedGlyph" Storyboard.TargetProperty="Visibility">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                                    </ObjectAnimationUsingKeyFrames>                                        
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPointerOverBackgroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>

                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundCheckedGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPointerOverBackgroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>

                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPointerOverForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OutlineGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>

                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundCheckedGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>

                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPressedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OutlineGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemDisabledForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemDisabledForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TextLabel" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemDisabledForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation
                                            Storyboard.TargetName="FocusVisualWhite"
                                            Storyboard.TargetProperty="Opacity"
                                            To="1"
                                            Duration="0"/>
                                    <DoubleAnimation
                                            Storyboard.TargetName="FocusVisualBlack"
                                            Storyboard.TargetProperty="Opacity"
                                            To="1"
                                            Duration="0"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused" />
                            <VisualState x:Name="PointerFocused" />
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="CheckStates">
                            <VisualState x:Name="Checked">
                                <Storyboard>                                        
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundCheckedGlyph" Storyboard.TargetProperty="Visibility">                                            
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>                                            
                                    </ObjectAnimationUsingKeyFrames>

                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">                                            
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppBarItemPressedForegroundThemeBrush}"/>                                            
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unchecked"><!-- This state seems to me as not working. Am I right? -->                                          
                            </VisualState>
                            <VisualState x:Name="Indeterminate">                                    

                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# java - 从不同类中提取通用数据

> ID：12005844
> 
> 赞同：0
> 
> 时间：2012-08-17T12:29:15.603
> 
> 标签：java, class, generics, import

我有以下问题，想知道是否有有效的解决方案。（我正在使用 Java）

想象一下，您有多个不同类型的类在具有不同名称的变量中保存相同的数据，并考虑这一点。

这里有一个例子：想象有三个经验值作为容器类中的成员

1.  短色
2.  整数大小
3.  字符串形状

并考虑这两个类

1.  第一类
2.  类2

class1 有三个成员变量作为经验值：

1.  短 rgb_color -> 对应颜色
2.  long bigness -> 对应于 bigness
3.  字符串轮廓 -> 对应于形状

class2 有三个成员变量作为经验值：

*   int cmyk -> 对应颜色
*   int greatness -> 对应于 bigness
*   字符串 shapecountour -> 对应于形状

如您所见，名称不同。因此，如果我想将第一类和第二类的值导入到容器类中，我需要自行转换每个参数以便将其添加到容器类中，因此我需要键入，因为有成员变量（这里 6 ) 例如，请参阅此导入函数的伪代码：

```
public void import(class1 class){
   this.color = (short) class.rgb_color;
   this.size = (int) class.bigness;
   this.shape = (String) class.contour;
}
public void import(class2 class){
   this.color = (short) class.cmyk;
   this.size = (int) class.greatness;
   this.shape = (String) class.shapecontour;
} 
```

现在想象一下有更多参数的问题。是否有一种通用的方法来解决导入问题，以便为每个成员一个一个地进行导入？

谢谢您的帮助。

编辑：已经感谢您的快速回答。正如我所说，我不能修改 class1 和 class2。

我检查了反射，他们有这个例子来改变字段。

```
public class Book {
    public long chapters = 0;
    public String[] characters = { "Alice", "White Rabbit" };
    public Tweedle twin = Tweedle.DEE;

    public static void main(String... args) {
    Book book = new Book();
    String fmt = "%6S:  %-12s = %s%n";

    try {
        Class<?> c = book.getClass();

        Field chap = c.getDeclaredField("chapters");
        out.format(fmt, "before", "chapters", book.chapters);
        chap.setLong(book, 12);
        out.format(fmt, "after", "chapters", chap.getLong(book));

        Field chars = c.getDeclaredField("characters");
        out.format(fmt, "before", "characters",
               Arrays.asList(book.characters));
        String[] newChars = { "Queen", "King" };
        chars.set(book, newChars);
        out.format(fmt, "after", "characters",
               Arrays.asList(book.characters));

        Field t = c.getDeclaredField("twin");
        out.format(fmt, "before", "twin", book.twin);
        t.set(book, Tweedle.DUM);
        out.format(fmt, "after", "twin", t.get(book));

        // production code should handle these exceptions more gracefully
    } catch (NoSuchFieldException x) {
        x.printStackTrace();
    } catch (IllegalAccessException x) {
        x.printStackTrace();
    }
    }
} 
```

但我仍然需要按名称调用每个变量，例如“章节”。我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:09:25.197

您有两种选择来解决此问题：

1.  改变设计，如上所述。似乎某些基类（具有这三个字段）的继承应该可以正常工作。
2.  如果你没有办法修改这两个类 (class1, class2) => 无论如何你必须指定字段之间的映射。直接的方法是您选择转换器。其他选项是使用 annotations/xml/etc 定义映射。并使用一些映射工具。这些对话有一个很好的清单：

[java对象到对象映射的任何工具？](https://stackoverflow.com/questions/1432764/any-tool-for-java-object-to-object-mapping)

推土机对我来说似乎是最有前途的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:43:51.907

你为什么不这样做改变你的设计：创建一个父类并将这些参数拉入父类，并让你的 Class1，Class2 扩展新的父类。现在访问这些参数。

```
class BaseClass{
    short color;
    int size;
    String shape;
}

class  Class1 extends BaseClass{
-----Other Class Properties----------   
}

class Class2 extends BaseClass{
-----Other Class Properties----------   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:38:58.163

您可以使用[java 反射 api](http://docs.oracle.com/javase/tutorial/reflect/member/fieldTypes.html)来获取可用字段的列表，然后按类型匹配它们。

# ios - UIImageView 图像自动缩放

> ID：12005846
> 
> 赞同：1
> 
> 时间：2012-08-17T12:29:20.980
> 
> 标签：ios, image-scaling

我有自定义 UITableViewCell 和 4 UIImageViews 它。我在 UIImageView.image 中设置了不同大小的图像，但我想按比例缩放它（没有黑线顶部/底部和左/右。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:50:00.033

您可以使用 contentMode 属性来缩放图像。

如果您想将图像放入 imageview 框架中以适应其纵横比，请设置

imageView.contentMode = UIViewContentModeScaleAspectFit。也尝试使用 AspectFill。

设置imageView的backgroundColor为clearColor；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-23T13:13:56.433

```
func resizeImage(image: UIImage) -> UIImage {

    let UpdateWidth = setBannerHeighWidthDynamically(image: image).width
    let newHeight = setBannerHeighWidthDynamically(image: image).height
    UIGraphicsBeginImageContext(CGSize(width: UpdateWidth, height: newHeight))
    image.draw(in: CGRect(x: 0.0, y: 0.0, width: UpdateWidth, height: newHeight))
    let newImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()
    return newImage!
}
 func setBannerHeighWidthDynamically(image: UIImage)->(width:CGFloat, height:CGFloat)
{
    let img_original_height = image.size.height
    let img_original_width = image.size.width

    if (img_original_height < img_original_width) {

        let width = getScreenMesure(isLandScap: true)
        let height = CGFloat(img_original_height) * width / CGFloat(img_original_width)

        return (width, height)

    }else{
        //best result 4/5
        var height = getScreenMesure(isLandScap: false) * 2 / 3
        if (CGFloat(img_original_height) >= height) {

            var width = CGFloat(img_original_width) * height / CGFloat(img_original_height)
            if (width > getScreenMesure(isLandScap: true)){
                width = getScreenMesure(isLandScap: true)
                height = (width * CGFloat(img_original_height)) / CGFloat(img_original_width);
                return (width, height)

            }else{
                return (width, height)

            }

        }else{
            var width = (CGFloat(img_original_width) * height) / CGFloat(img_original_height);
            if (width > getScreenMesure(isLandScap: true)) {
                width = getScreenMesure(isLandScap: true)
                height = (width * CGFloat(img_original_height)) / CGFloat(img_original_width);
                return (width, height)
            }else{
                return (width, height)
            }
        }
    }
}
func getScreenMesure(isLandScap:Bool)->CGFloat{
    if isLandScap{
        return UIScreen.main.bounds.size.width
    }else{
        return UIScreen.main.bounds.size.height
    }
} 
```

你可以这样打电话。

`let PropotionalImage = self.resizeImage(image: UIImage(named: "YourImageName"))`

# c# - RichTextBox 水平滚动不起作用

> ID：12005851
> 
> 赞同：7
> 
> 时间：2012-08-17T12:29:33.933
> 
> 标签：c#, winforms, scrollbar, richtextbox, windows-forms-designer

我有一行 readOnly RichTextBox 禁用了 wordWrap，我以编程方式添加了一行很长的文本。

但是水平滚动条不会出现，即使我设置`ScrollBars`为`ForcedHorizontal`.

我怎样才能解决这个问题？

如果我使用键盘上的箭头键，我可以浏览整行，但这只会让事情变得更糟。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-14T08:03:44.793

尝试解决它

```
 Multiline = True
    WordWrap = False 
```

更改此属性以允许多行功能并允许水平滚动

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:36:27.760

我可以重现这种行为

```
MultiLine = false 
```

如果我将此属性更改为 True 滚动条会按预期显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-14T23:36:28.883

这对我有用：

```
WordWrap = false;
ScrollBars = RichTextBoxScrollBars.Both; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-20T10:54:00.020

我遇到了垂直滚动条的问题。如果富文本框位于 TabPage 等任何控件内，则在这种情况下，您需要为 RickTextbox 设置停靠 == 填充。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-23T12:46:27.693

您必须将 Multiline 属性设置为 true。从 MSDN 检查此文本：

> 在 RichTextBox 控件中显示滚动条 将 Multiline 属性设置为 true。如果 Multiline 属性设置为 false，则不会显示任何类型的滚动条，包括水平滚动条。
> 
> 将 ScrollBars 属性设置为 RichTextBoxScrollBars 枚举的适当值。

# android - 如何从 Android 应用程序中的 web 视图禁用复制、粘贴和选择工具栏

> ID：12005852
> 
> 赞同：6
> 
> 时间：2012-08-17T12:29:48.927
> 
> 标签：android, webview

如何从 Android 应用程序中的 web 视图禁用复制、粘贴和选择工具栏？

我正在制作一个应用程序，它实际上是“webview”一个在 Javascripts 和 Jquery 上工作的网站。

所以我想知道是否可以禁用复制粘贴工具栏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-13T10:21:15.380

禁用 WebView 上的所有触摸事件

```
mWebView.setOnLongClickListener(new OnLongClickListener() {
@Override
public boolean onLongClick(View v) {
    return true;
}
});
mWebView.setLongClickable(false); 
```

# c - LabWindows 中的实时数据过滤？

> ID：12005855
> 
> 赞同：0
> 
> 时间：2012-08-17T12:29:56.070
> 
> 标签：c, filter, real-time, signal-processing, labwindows

我的陀螺仪正在发送我需要实时过滤的数据。数据很短，有 4 个元素向量，每秒发送 25 次。我该如何过滤这个？我在 LabWindow 的文档中找到的所有函数都需要一个完整的数据数组，然后生成一个相同长度的过滤数组（这看起来有点……奇怪）。如何使用这个奇怪的功能过滤我的数据？

### 例如，我想：

1.  过滤第一个数据集
2.  移位 1
3.  过滤新数据集，只取输出数组的最后一个元素

如果我没记错的话，这就是使用 FIR 滤波器进行滤波的样子——将信号与滤波器系数进行卷积，移动一个样本并再次进行卷积。

本吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T17:18:05.840

我无法访问 LabWindows/CVI 实时模块，因此看不到您所指的函数原型。如果您提供更具体的信息，您可能会获得有关如何使用呼叫的更具体的想法。

关于 FIR 滤波器的 C 实现的想法，请看**[这里](https://stackoverflow.com/questions/14997850/fir-filter-implementation-in-c-programming)**

# android - 无法将 Sherlock 库添加到 Eclipse

> ID：12005856
> 
> 赞同：0
> 
> 时间：2012-08-17T12:30:04.950
> 
> 标签：android, eclipse, actionbarsherlock

我无法从 ScerlockActionBar 库创建项目，因为它由于某种原因处于非活动状态：

![在此处输入图像描述](../Images/afbd9dce1610ce1a26a1f4f7c637f70b.png)

任何想法 - 为什么会发生？我以前从源代码创建过项目，一切都很好，但现在不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:30:57.503

这意味着它已经被添加。只需在eclipse中寻找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:09:07.797

project.properties 文件丢失。

# html - 我可以将 HTML 页面的一部分导出为 SVG 图像吗？

> ID：12005860
> 
> 赞同：64
> 
> 时间：2012-08-17T12:30:17.233
> 
> 标签：html, browser, svg, rendering

我需要一个维基百科导航框的矢量图像。不幸的是，Inkscape 无法打开 HTML 文件，而且 Opera 和 Chromium 都无法将页面保存为 SVG。谷歌搜索，谷歌搜索，还有更多的谷歌搜索没有结果。特别是，“HTML2svg”似乎意味着 HTML 与其中的 SVG 图像“对话”的功能。有人如何将 HTML 转换为 SVG，无论是整个页面还是页面上的 div？我需要样式化的 HTML、CSS 等等。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-11-17T00:20:04.210

我遇到了同样的需求，并发现了以下免费实用程序，它们承诺这是可能的：

1.  **WebVector**是一个 HTML 到 SVG 或 PNG 的转换器。它将 HTML 文档转换为 SVG 格式的矢量图像或 PNG 格式的位图图像。标准矢量图形 (SVG) 文件可以通过 Inkscape 等各种矢量图形编辑器进行进一步编辑。
    [http://cssbox.sourceforge.net/webvector/](http://cssbox.sourceforge.net/webvector/)

2.  **CutyCapt**是一个小型的跨平台命令行实用程序，用于将 WebKit 的网页渲染捕获为各种矢量和位图格式，包括 SVG、PDF、PS、PNG、JPEG、TIFF、GIF 和 BMP。有关基于 Internet Explorer 的类似工具，请参见 IECapt。
    [http://cutycapt.sourceforge.net/](http://cutycapt.sourceforge.net/)

3.  **wkhtmltopdf**和**wkhtmltoimage**是开源 (LGPL) 命令行工具，可使用 QT Webkit 渲染引擎将 HTML 渲染为 PDF 和各种图像格式。这些完全“无头”运行，不需要显示或显示服务。如果您喜欢这种东西，还有一个 C 库。
    [http://wkhtmltopdf.org/](http://wkhtmltopdf.org/)

--

未回答的问题：我知道您可以使用[rasterize.js](http://cburgmer.github.io/rasterizeHTML.js/)之类的东西将 DOM 对象渲染为`<canvas>`. 具体来说，WebKit 本身能否用于输出 Web 内容和 HTML 片段的“像素完美”可编辑 SVG？对于图书馆来说，这是一项相对简单的任务还是要复杂得多？

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-07-30T02:44:34.937

我设法找到一个可以为您进行转换的网站。您所要做的就是将 HTML 粘贴到换行符之间，然后它会完成其余的工作。网址是：[http ://www.hiqpdf.com/demo/ConvertHtmlToSvg.aspx](http://www.hiqpdf.com/demo/ConvertHtmlToSvg.aspx)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-28T16:46:47.557

你可以试试[wkhtmltoimage](http://wkhtmltopdf.org/)它可以将 HTML 转换为 SVG 和许多不同的格式

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-20T09:14:29.787

尝试了 xthexder 的建议：打印到文件。（然后将 PDF 转换为 SVG。）我在 Linux 下尝试了 Opera、Firefox 和 Chromium；概述如下。真的很遗憾 Opera 的错误。

我已经制作了这个答案社区维基；欢迎添加其他操作系统。

## 歌剧 11.61 (Linux)

*   支持打印到 SVG(!)、PDF 和 PS
*   使用作者样式表（除非您从“视图”菜单中选择不同的样式表，或禁用 CSS）
*   使用 PDF 和 PS 输出，文件中没有文字！这很奇怪，一定是一个错误。
*   如果我选择 SVG 输出，Opera 会生成一个`.svg`文件，但会在其中写入 PostScript 代码。:-(

## 火狐 11.0 (Linux)

*   支持打印到PDF和PS
*   忽略作者样式表，以黑白打印
*   使用较大尺寸的 DejaVu Serif 字体

## 铬 17 (Linux)

*   仅支持打印到 PDF
*   忽略作者样式表，以黑白打印
*   使用 Times New Roman

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-25T04:20:00.563

正如接受的答案中提到的，[wkhtmltoimage](https://wkhtmltopdf.org)库是一个不错的解决方案，尽管它并不总是完美的。起初我对如何使用它有点困惑，所以我想分享我目前的工作流程：

1.  安装 wkhtmltopdf 并将其添加到您的路径 env var
2.  打开您的网络应用程序并将其置于您想要捕获的任何状态
3.  使用[SingleFile 浏览器扩展](https://github.com/gildas-lormeau/SingleFile)对其进行静态 html 快照
4.  跑`wkhtmltoimage mySnapshot.html mySnapshot.svg`
5.  在 Inkscape 中打开它，取消组合图像并提取您感兴趣的现在矢量化页面的部分

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-11T08:51:31.830

我使用的最简单的方法是从 Google Chrome 以 PDF 格式打印网站，通常使用最大的页面大小、纵向模式和选中的背景图形。有时它有一些小错误，但它比其他答案中的所有解决方案都要好得多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-23T21:12:04.343

您可以在 svg 中使用 foreignObject 在 svg 中定义 html 元素。

```
 <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
  <foreignObject x="20" y="20" width="160" height="160">
    <div xmlns="http://www.w3.org/1999/xhtml">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      Sed mollis mollis mi ut ultricies. Nullam magna ipsum,
      porta vel dui convallis, rutrum imperdiet eros. Aliquam
      erat volutpat.
    </div>
  </foreignObject>
</svg>
```

如果你想将你的 html 元素转换为 svg 元素，比如 rect、text、image，你可以使用 htmlsvg.js 来做到这一点。

现场演示： [https ://htmlsvg.netlify.app/](https://htmlsvg.netlify.app/)

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2015-09-27T15:56:14.747

你可以试试[http://www.letime.net/alpha/glm.html](http://www.letime.net/alpha/glm.html)

它在 css3 中对 HTML5 进行文本绘制

# asp.net-2.0 - ASP.NET 2.0、SQL Server Express 2008、Sync Framework 1.0 C# 最简单的场景示例

> ID：12005864
> 
> 赞同：2
> 
> 时间：2012-08-17T12:30:30.753
> 
> 标签：asp.net-2.0, microsoft-sync-framework, sql-server-2008-express

今天是个好日子，

我知道，我所说的版本现在已经过时了，但这是我在工作场所坚持使用的工具。这是我在 StackOverflow 上的第一个问题，我希望我能得到正确的格式，呵呵 ;-) 请原谅我的长文，我习惯于提供很多细节，从某种意义上说，我觉得我的细节越多提供更准确的答案可能是;-)

在 IT 领域工作近 10 年以来，我总是能够通过谷歌搜索精心挑选的关键字和表达式来找到我的问题的答案（即我的问题的解决方案）。好吧，看起来前面提到的 Sync Framework 要么对 Internet 社区不太熟悉，要么对于大多数凡人来说，尝试理解其最简单的概念真的很痛苦。经过广泛的研究，我必须找到一个使用 Sync Framework 1.0 和 C# 语言同步 SQL Express 的单个简单示例，甚至在 MSDN 上都没有！我对 ASP.NET / C# 相当陌生，但我了解这些概念，并且我有一个可以正常工作的 Web 应用程序，可以成功地从 SQL Server 2008 数据库存储和检索数据。客户已经使用了两年了。我们现在要求客户端能够使他们的数据脱机并能够脱机更新，然后与服务器同步。UPDATE、INSERT 和 DELETE 将在两端发生。

我试图找到的非常简单（或者我认为）：使用 SQL Server 更改跟踪信息（不是自定义更改跟踪）来同步服务器（SQL Server 2008）和客户端计算机（SQL Server 2008 Express，不是精简版）。最简单的情况是包含几列的单个表。我对理解 SQL Server 部分相当有信心，并且我已经准备好数据库的两端以接收来自客户端 Web 应用程序的同步请求（启用更改跟踪，PrimaryKeyID 具有数据类型 GUID，服务器上的应用程序用户帐户具有 VIEW_CHANGE_TRACKING 权限等）

我知道 Web 应用程序充当两者之间的接口并管理同步会话（在 C# 中）。我很天真地认为唯一剩下要做的就是提供两个连接字符串，告诉要同步哪些表并指定双向同步。显然，这比那个更复杂嘿嘿。在一次绝望的尝试中，我尝试将我的代码基于 Microsoft 的以下代码并将其调整为 SQL Express（该示例适用于 Compact）。我差点认输，可耻地低下头:-(

[http://msdn.microsoft.com/en-us/library/bb726015%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb726015%28v=sql.100%29.aspx)

基于上述（第二部分“使用 SQL Server 更改跟踪的完整示例”），我删除了我不需要的所有内容：与密码、统计信息和对数据应用更改的代码相关的内容。为了清楚起见，我还删除了 MS 的众多评论行。我已经在 SSMS 中执行脚本的两端手动应用了 SQL Server 本身的更改（因此必须生成更改跟踪信息，并且在 Web 应用程序请求同步时可用）。问题1：我这样说有错吗？最后，我更改了一些东西以尝试使用与 SQL Express 相关的对象而不是 Compact。

问题 2：Microsoft 的代码显然能够判断它是该副本的初始（第一次）同步还是后续同步。我不知道它怎么可能！

最后，以最简单的形式留下的代码如下（带有问题 3、4、5 ;-)，但显示了一些错误。我非常感谢您的帮助。欢迎任何意见和/或建议。我敢肯定，如果/当这个问题得到解决，它将使很多人受益。我将继续研究它（老板不会给我选择;-)我保证如果我成功同步，我会在这里发布解决方案！

谢谢，祝大家有美好的一天！

最亲切的问候，

关注

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Text;
using System.Text.RegularExpressions;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

using System.IO;
//using System.Data.SqlServerCe;
using Microsoft.Synchronization;
using Microsoft.Synchronization.Data;
using Microsoft.Synchronization.Data.Server;
//using Microsoft.Synchronization.Data.SqlServerCe;

namespace some_namespace
{
public class SyncProgram
{
    public SyncProgram()
    {
           // empty constructor
    }

    public static bool MainSync() // Entry point, say, called by a Sync button on an ASPX page.
    {
        bool boolSyncRes = false; // tells whether sync was a success or not

        // Initial sync: they create a new instance of the Orchestrator.
        ZyxySyncOrchestrator zyxySyncOrchestrator = new ZyxySyncOrchestrator();

        // Subsequent synchronization.
        // They don't. there was only irrelevant stats stuff here.

        boolSyncRes = true;
        return boolSyncRes;

            }
}

public class ZyxySyncOrchestrator : SyncOrchestrator
{
    public ZyxySyncOrchestrator()
    {
       Utility util = new Utility();

       this.LocalProvider = new ZyxyServerSyncProvider(); // QUESTION 3: ??? cannot implicitly convert type DbServerSyncProvider to Microsoft.Synchronization.SyncProvider

        //Instantiate a server synchronization provider and specify it
        //as the remote provider for this synchronization agent.
       this.RemoteProvider = new ZyxyServerSyncProvider(); // cannot implicitly convert type DbServerSyncProvider to Microsoft.Synchronization.SyncProvider

        // QUESTION 4: Is the following code actually creating the base (user) table ZyxySync
        // (as opposed to its change tracking metadata table)??
        // I wasn't sure whether this part of the code on Microsoft's webpage was part of 
        // populating the db with sample data and structure or if it's really meant to deal with 
        // the change tracking metadata.
        SyncTable zyxySyncTable = new SyncTable("ZyxySync");
        zyxySyncTable.CreationOption = TableCreationOption.DropExistingOrCreateNewTable;
        zyxySyncTable.SyncDirection = SyncDirection.DownloadOnly;
        this.Configuration.SyncTables.Add(zyxySyncTable);

    }
}

//Create a class that is derived from Microsoft.Synchronization.Server.DbServerSyncProvider.
public class ZyxyServerSyncProvider : DbServerSyncProvider
{
    public ZyxyServerSyncProvider()
    {
        Utility util = new Utility();
        SqlConnection serverConn = new SqlConnection(util.ServerConnString);
        this.Connection = serverConn;

        //Retrieve a new anchor value from the server. We use a timestamp value
        //that is retrieved and stored in the client database.
        //During each sync the new and last anchor values are used to determine the set of changes
         SqlCommand selectNewAnchorCommand = new SqlCommand();
        string newAnchorVariable = "@" + SyncSession.SyncNewReceivedAnchor;
        selectNewAnchorCommand.CommandText =
            "SELECT " + newAnchorVariable + " = change_tracking_current_version()";
        selectNewAnchorCommand.Parameters.Add(newAnchorVariable, SqlDbType.BigInt);
        selectNewAnchorCommand.Parameters[newAnchorVariable].Direction = ParameterDirection.Output;
        selectNewAnchorCommand.Connection = serverConn;
        this.SelectNewAnchorCommand = selectNewAnchorCommand;

        //Create a SyncAdapter for the ZyxySync table by using 
        //the SqlSyncAdapterBuilder.
       //   Specify a name for the SyncAdapter that matches the
        //    the name specified for the corresponding SyncTable.
          SqlSyncAdapterBuilder zyxyBuilder = new SqlSyncAdapterBuilder(serverConn);

        zyxyBuilder.TableName = "dbo.ZyxySync";
        zyxyBuilder.ChangeTrackingType = ChangeTrackingType.SqlServerChangeTracking;

        SyncAdapter zyxySyncAdapter = zyxyBuilder.ToSyncAdapter();
        zyxySyncAdapter.TableName = "ZyxySync";
        this.SyncAdapters.Add(zyxySyncAdapter);

    }
}

  // Class derived from Microsoft.Synchronization.Data.Server.DbServerSyncProvider
// QUESTION 5: Or should have I used the two below? I believe they only apply to SQL Compact... 
//Microsoft.Synchronization.Data.ClientSyncProvider
//Microsoft.Synchronization.Data.ServerSyncProvider
//http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.clientsyncprovider%28v=sql.100%29.aspx
//http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.server.dbserversyncprovider%28d=printer,v=sql.100%29.aspx

public class ZyxyClientSyncProvider : DbServerSyncProvider
{

    public ZyxyClientSyncProvider()
    {
        Utility util = new Utility();
        SqlConnection clientConn = new SqlConnection(util.ClientConnString);
        this.Connection = clientConn;
    }
}

public class Utility
{
    public string ClientConnString
    {
       get { return @"Data Source=localhost\LocalExpressInstance;Initial Catalog=DatabaseName;User ID=UserName;Password=WontTellYou;"; }
    }

    public string ServerConnString
    {
          get { return @" Data Source=ServerName\ServerInstance;Initial Catalog=DatabaseName;User ID=UserName;Password=WontTellYou;"; }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:55:09.137

SyncOrchestrator 不能与 DBServerSyncProvider 一起使用。

在 Sync Framework 中，有两种类型的数据库提供者：离线提供者和点对点/协作提供者。（他们都在离线场景中工作，所以这很混乱）。

离线提供程序用于中心辐射型拓扑。只有客户端会跟踪同步的内容。服务器甚至不知道它的同步部分。这与 Visual Studio 中的本地数据库缓存项目项使用的提供程序相同。开箱即用的唯一受支持的数据库是 SqlCeClientSyncProvider 和 DBServerSyncProvider，并使用 SyncAgent 进行同步。

点对点提供程序可用于点对点同步以及中心辐射方案。每个对等点都维护有关同步内容的元数据。这使用了更新的 SyncOrchestrator/SqlCeSyncProvider/SqlSyncProvider（适用于 SQL Server、Express、LocalDB 和 SQL Azure）。这使用自定义更改跟踪。

您不能互换 SyncAgent 和 SyncOrchestrator 使用的提供程序。您可以重复使用 SQL 命令，因为它们在跟踪、选择、应用更改和记录同步内容​​的方式上有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:19:25.003

好的，我设法使它工作，所以这是一个有效的简单代码示例（无论如何在我的情况下）。除了上述步骤（启用Change Tracking、设置正确的用户权限等），我不明白的还有以下几点：

1）我发现我可以设置它，以便同步框架和同步会话都在客户端进行管理。在不依赖服务器上安装的内容的情况下，我能够使用 SF 2.1 而不是旧的 1.0。这有很大帮助。

2) 在准备同步会话时，必须首先提供数据库，以便它准备好进行同步。我所做的是使用客户端连接字符串运行以下 C#（以便它提供客户端数据库），然后使用服务器连接字符串再次运行它（以便它提供服务器数据库）。这是一个运行一次的程序（在双方）来准备数据库。您不会为您建立的每个同步会话运行它。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Collections;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Text.RegularExpressions;
using System.Security.Principal;
using System.IO;

using Microsoft.Synchronization;
using Microsoft.Synchronization.Data;
using Microsoft.Synchronization.Data.Server;
using Microsoft.Synchronization.Data.SqlServer;  // SF 2.1
using Microsoft.Synchronization.SimpleProviders; // SF 2.1
using Microsoft.Synchronization.MetadataStorage; // SF 2.1

// ZYXY: Based on:
// http://msdn.microsoft.com/en-us/library/ff928603.aspx
// NOTES:
// - Microsoft Sync Framework 2.1 redistributable package must be installed on Client computers but is not required on the Server, as long as a server-side synchronization setup is performed by a client computer.
// This is a run once program.

namespace DISS_Database_Sync_Provisioning_Console
{
class Program
{
    static void Main(string[] args)
    {

        SqlConnection sqlConn = new SqlConnection("Data Source=ServerName\\InstanceName;Initial Catalog=SomeDatabase;User ID=SOmeUser;Password=SomePassword;");

     Console.Write("Provisioning database...");

        // define a new scope named DISS_Sync_Scope
        DbSyncScopeDescription scopeDesc = new DbSyncScopeDescription("DISS_Sync_Scope");

        // get the description of the ZyxySync table
        DbSyncTableDescription tableDesc = SqlSyncDescriptionBuilder.GetDescriptionForTable("dbo.ZyxySync", sqlConn);

        // add the table description to the sync scope definition
        scopeDesc.Tables.Add(tableDesc);

        // create a server scope provisioning object based on the DISS_Sync_Scope
        SqlSyncScopeProvisioning sqlProvision = new SqlSyncScopeProvisioning(sqlConn, scopeDesc);

        // skipping the creation of base table since table already exists
        sqlProvision.SetCreateTableDefault(DbSyncCreationOption.Skip);

        // start the provisioning process
        sqlProvision.Apply();

        sqlConn.Close();
        sqlConn.Dispose();

        Console.Write("\nDatabase has been successfully configured for synchronization. Please press any key to exit.");
        Console.Read();

    }
}
} 
```

3) 下面是每次启动同步时运行的代码（例如，当用户在其 Web 应用程序中单击“同步”按钮时。）

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Text;
using System.Text.RegularExpressions;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

using System.Security.Principal;

using System.IO;
using Microsoft.Synchronization;
using Microsoft.Synchronization.Data;
using Microsoft.Synchronization.Data.Server;
using Microsoft.Synchronization.Data.SqlServer;  // SF 2.1
using Microsoft.Synchronization.SimpleProviders; // SF 2.1
using Microsoft.Synchronization.MetadataStorage; // SF 2.1

namespace diss_ssmb
{

public class SyncProgram
{

    public SyncProgram()
    {
           // empty constructor
    }

    public static bool MainSync() // Entry point, say, called by a Sync button on an ASPX page.
    {
        bool boolSyncRes = false; // tells whether sync was a success or not

        // Initial sync: they create a new instance of the Orchestrator.
        ZyxySyncOrchestrator zyxySyncOrchestrator = new ZyxySyncOrchestrator();

        // Subsequent synchronization.
        // They don't. there was only irrelevant stats stuff here.

        boolSyncRes = true;
        return boolSyncRes;

            }
}

public class ZyxySyncOrchestrator : SyncOrchestrator
{
    public ZyxySyncOrchestrator()
    {
       Utility util = new Utility();

       this.LocalProvider = new ZyxyClientSyncProvider();

        //Instantiate a server synchronization provider and specify it
        //as the remote provider for this synchronization agent.
       this.RemoteProvider = new ZyxyServerSyncProvider();

       SyncTable zyxySyncTable = new SyncTable("ZyxySync");
        zyxySyncTable.CreationOption = TableCreationOption.DropExistingOrCreateNewTable;
        zyxySyncTable.SyncDirection = SyncDirection.Bidirectional;
    //    this.Configuration.SyncTables.Add(zyxySyncTable);
        this.Synchronize();
    }
}

public class ZyxyServerSyncProvider : SqlSyncProvider
{
    public ZyxyServerSyncProvider()
    {
        Utility util = new Utility();
        SqlConnection serverConn = new SqlConnection(util.ServerConnString);
        this.Connection = serverConn;
        this.ScopeName = "DISS_Sync_Scope";
        //Retrieve a new anchor value from the server. We use a timestamp value
        //that is retrieved and stored in the client database.
        //During each sync the new and last anchor values are used to determine the set of changes
         SqlCommand selectNewAnchorCommand = new SqlCommand();
        string newAnchorVariable = "@" + SyncSession.SyncNewReceivedAnchor;
        selectNewAnchorCommand.CommandText =
            "SELECT " + newAnchorVariable + " = change_tracking_current_version()";
        selectNewAnchorCommand.Parameters.Add(newAnchorVariable, SqlDbType.BigInt);
        selectNewAnchorCommand.Parameters[newAnchorVariable].Direction = ParameterDirection.Output;
        selectNewAnchorCommand.Connection = serverConn;
       // this.SelectNewAnchorCommand = selectNewAnchorCommand; // SF 2.1 commented out because SelectNewAnchorCommand isn't there.

        SqlSyncAdapterBuilder zyxyBuilder = new SqlSyncAdapterBuilder(serverConn);

        zyxyBuilder.TableName = "dbo.ZyxySync";
        zyxyBuilder.ChangeTrackingType = ChangeTrackingType.SqlServerChangeTracking;

        SyncAdapter zyxySyncAdapter = zyxyBuilder.ToSyncAdapter();
        zyxySyncAdapter.TableName = "ZyxySync";
        //    this.SyncAdapters.Add(zyxySyncAdapter); // SF 2.1 commented out because SelectNewAnchorCommand isn't there.

    }
}

public class ZyxyClientSyncProvider : SqlSyncProvider

{

    public ZyxyClientSyncProvider()
    {
        Utility util = new Utility();
        SqlConnection clientConn = new SqlConnection(util.ClientConnString);
        this.Connection = clientConn;
        this.ScopeName = "DISS_Sync_Scope";
    }
}

public class Utility
{
    public string ClientConnString
    {
       get { return @"Some connection string such as in the above code sample"; }
    }

    public string ServerConnString
    {
        get { return @"Some serverconnection string such as in the above code sample";     }
    }
}
} 
```

4) 当两个连续同步会话之间的两端同时发生 INSERT、UPDATE 和 DELETE 时，上述成功双向同步，但是，当不必解决冲突时（例如，当在两端更新相同的记录时）。如果有必须解决的冲突，我还需要做进一步的测试。默认情况下，同步框架如何解决此类冲突？我假设我们可以调整这些设置以告诉它根据以下任一条件确定获胜者... - 时间戳值 - 副本 ID - 用户角色 - 交易类型 - ...

无论如何，我真的希望对某人有所帮助，因为我很难从网上弄清楚！祝你好运！

关注

# mysql - 超过 1 个 DB 的 Excel 工作表中的数据

> ID：12005868
> 
> 赞同：1
> 
> 时间：2012-08-17T12:30:41.227
> 
> 标签：mysql

我们在基于数据库的 excel 表（从 mysql 返回数据）中有一个查询，请参见下面的示例 DSN：

```
DATABASE=myDB;DESCRIPTION=myDB;DSN=myDB-dsn;OPTION=0;PORT=3306;SERVER=myServer;UID=user1; 
```

只要它来自多个表但来自单个数据库，它就可以令人满意地工作。

是否可以通过从 2 个数据库进行查询来获取 Excel 工作表中的数据？

我可以创建 2 个单独的 DSN，2 个单独的查询，但挑战是：如果这 2 个 DB 上有一个公共字段（不相关），我们可以返回 1 个查询和 1 个数据吗？可以在不涉及任何手动复制粘贴的情况下完成整个过程吗？如果是 Oracle，我听说 DBLinks 可以提供帮助，但似乎在 MySQL 中不可用。 **更新** 我正在寻找更像：

```
SELECT A.*, B.* FROM db1.table1 A LEFT JOIN db2.table1 B ON A.id = B.id 
```

不确定这种参考是否可行。即使通过查询它会起作用，但我不确定如何为此定义 DSN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:38:14.510

您可以访问另一个数据库的表，例如

```
SELECT cols FROM DBNAME.TABLE_NAME 
```

将此作为 myDB 中的过程并从 myDB 调用它

# xcode - 未在 xcode 的左窗格中显示错误详细信息

> ID：12005875
> 
> 赞同：3
> 
> 时间：2012-08-17T12:31:03.230
> 
> 标签：xcode

当我在模拟器上运行应用程序时它工作正常但是当我使用开发人员配置文件在设备上安装时它给出错误并显示构建失败。但是当尝试查看错误详细信息时它没有显示任何内容。我不知道是什么问题..

请帮我。

提前致谢！![在此处输入图像描述](../Images/b08f19c41f3a6f5f4e60e4591d9e9fd1.png)

# mysql - ERROR 1193 (HY000): 创建触发器时未知系统变量

> ID：12005879
> 
> 赞同：0
> 
> 时间：2012-08-17T12:31:14.467
> 
> 标签：mysql, triggers

大家好，我打算为 MySQL 表创建一个触发器，以便在将值插入表后，将列`exp_sales`设置为`qnty_received`值 * sell_price 但我收到此错误：

> 错误 1193 (HY000): 未知系统变量 'exp_sales'

这是我的查询：

```
delimiter $$
Create trigger tsales after insert on Store_info_table
for each row
set exp_sales = qnty_received * selling_price;
END$$ 
```

有什么问题，创建触发器的最佳方法是什么，以便在插入数量和销售价格后，字段`exp_sales(Total)`更新为正确的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:38:52.683

如果我不正确地理解`exp_sales`是您要更新的列名：

```
delimiter $$
Create trigger tsales after insert on Store_info_table
for each row
    update Store_info_table
    set exp_sales = NEW.qnty_received * NEW.selling_price
    where id = NEW.id;
END$$ 
```

更好的方法是使用[INSERT INTO ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)

```
INSERT INTO table_name(...)VALUES(...) 
       ON DUPLICATE KEY SET exp_sales = qnty_received * selling_price; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:33:00.577

如果我理解正确，您想在插入后更新记录的字段。尝试

```
delimiter $$
Create trigger tsales after insert on Store_info_table
for each row
begin
    UPDATE Store_info_table 
    SET exp_sales = NEW.qnty_received * NEW.selling_price
    WHERE id = NEW.id;
END;
$$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:52:22.057

你没有忘记 NEW 关键字吗？

试试这个——

```
SET NEW.exp_sales = NEW.qnty_received * NEW.selling_price; 
```

但是，我认为你不应该这样做，因为你总是可以在 SELECT 查询中计算“总”值。

# jpa - 分页不适用于首次加载时延迟加载的数据表

> ID：12005883
> 
> 赞同：0
> 
> 时间：2012-08-17T12:31:52.577
> 
> 标签：jpa, jsf-2, primefaces

我正在使用 JPA 命名查询来加载延迟加载的数据表。并设置 first 和 Max 结果，如下所示。

```
Query query = entityManager.createNamedQuery("StudyplanCategory.findByStatusAndLimit");
int end=(start*pageNumber);
query.setParameter("status", status);
query.setParameter("start", start);
query.setParameter("end", end);
query.setMaxResults(end - start); 
```

加载方法如下：

```
public List<StudyplanCategory> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters) {  
                List<StudyplanCategory> data = new ArrayList<StudyplanCategory>();
                //System.out.println("Page First Value:"+first+"PageSize Value:"+pageSize);
                datasource=categoryService.findDynaEditStudyPlan("NOT_USER_SPECIFIC",first,pageSize);
                //filter  
                for(StudyplanCategory studyplanCategory : datasource) {  
                    boolean match = true;  
                    for(Iterator<String> it = filters.keySet().iterator(); it.hasNext();) {  
                        try {  
                            String filterProperty = it.next();  
                            String filterValue = filters.get(filterProperty).toLowerCase();  
                            String fieldValue = String.valueOf(studyplanCategory.getClass().getDeclaredField(filterProperty).get(studyplanCategory)).toLowerCase();  
                            //System.out.println("fieldValue............."+fieldValue);
                            if(filterValue == null || fieldValue.startsWith(filterValue)) {  
                                match = true;  
                            }  
                            else {  
                                match = false;  
                                break;  
                            }  
                        } catch(Exception e) {  
                            match = false;  
                            System.out.println("The Exception occured at"+e);
                        }   
                    }  

                    if(match) {  
                        data.add(studyplanCategory);  
                    }  
                }  

                //sort  
                if(sortField != null) {  
                    Collections.sort(data, new LazySorter(sortField, sortOrder));  
                }  

                //rowCount  
                int dataSize = data.size();  
                this.setRowCount(dataSize);  

                //paginate  
                if(dataSize > pageSize) {  
                    try {  
                        return data.subList(first, first + pageSize);  
                    }  
                    catch(IndexOutOfBoundsException e) {  
                        return data.subList(first, first + (dataSize % pageSize));  
                    }  
                }  
                else {  
                    return data;  
                }  
            } 
```

但是当加载表时，下一步按钮不活动，因为我只加载加载第一页所需的那些数据。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:42:21.840

您需要触发另一个设置总行数的查询。基本上，在`LazyDataModel#load()`：

```
public List<StudyplanCategory> load(...) {
    setRowCount(studyplanCategoryService.count());
    return studyplanCategoryService.list(...);
} 
```

* * *

**与具体问题无关**，您实际上应该使用[`Query#setFirstResult()`](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setFirstResult%28int%29)设置第一条记录索引。

# c - 如何告诉链接器在头文件中包含一个库

> ID：12005885
> 
> 赞同：1
> 
> 时间：2012-08-17T12:32:03.413
> 
> 标签：c, file, header, linker

我正在使用 Pelles C IDE，对于某些项目，必须告诉链接器包含某个库，例如`Ws2_32.lib`. 目前我正在开发一个我经常在许多项目中重用的函数，所以我决定为它制作一个头文件。有没有办法告诉链接器从头文件中包含某个库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:39:43.057

你已经链接了图书馆，别无他法。

如果编译器是 linux 中的 gcc，您可以`libtemp.so`像这样 链接库，然后在运行可执行文件之前添加到`gcc youfile.c -ltemp` 的路径`libtemp.so``LD_LIBRARY_PATH`

在您的 IDE 中，您可以配置相同的内容。

# c - 从一组映射到另一组

> ID：12005888
> 
> 赞同：2
> 
> 时间：2012-08-17T12:32:16.167
> 
> 标签：c, algorithm, data-structures

我有一组连续整数值和相应的一组非连续值，例如：

```
0 -> 22
1 -> 712
2 -> 53
3 -> 12323
... 
```

等等。

项目的数量非常大（大约 10^9...10^10），因此不能只使用普通数组。

是否存在能够从第一个值快速映射到另一个具有中等内存需求的数据结构？例如：

```
ret = map(0); // returns 22
ret = map(3); // returns 12323 
```

**编辑**：这个集合中的值实际上是使用伪随机数生成器生成的，所以不可能建议一些特定的分布。问题是 - 是否可以降低内存要求（可能是以查找速度为代价）？我的意思是使用“完美哈希”之类的东西——生成这种“完美哈希”所需的时间并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:52:55.603

由于您的范围是连续的，因此显而易见的解决方案是将您的值存储在连续的 int[] 中。那么值 i 是`arr[i]`。作为 PRNG 生成的值，将很难应用进一步的压缩。

另一种以时间换空间的解决方案是存储 RNG 的种子并即时重新计算。通过存储中间种子，这种方法可以及时改进，并在空间上恶化。即密钥 1000、2000 等的种子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:52:40.770

如果您的函数范围是由伪随机数生成器按顺序生成的一组数字，那么您可以将序列压缩到生成序列的代码以及开始前 PRNG 的状态。例如，包含 pi 的十进制扩展的（无限）数字系列很容易（并且在技术上是无限地）压缩为代码以生成该系列；您的系列可以被视为几乎相同的一个例子。

因此，如果您愿意等待很长时间以获取系列中的最后一个元素，则可以通过将系列不写入数据结构而是写入函数来获得非常好的压缩。那是您的时间/空间权衡范围的一端。

在频谱的另一端是所有数字的数组。这会占用大量空间，但可以非常快速地 ( `O(1)`) 访问集合中的任何所需元素。出于各种原因，这似乎对您没有吸引力，但我不确定比数组更聪明的数据结构是否会节省大量空间，或者就此而言是否节省时间。

我看到的一个明显的解决方案是每隔一段时间保存一组 PRNG 的中间状态，因此您的“数据”结构将变为：

```
ret(0) = prng(seed, other_parameters, ...)
ret(10^5-1)  = prng(seed', other_parameters, ...)
ret(2*(10^5)-1) = prng(seed'', other_parameters, ...) 
```

等等，然后，要获取元素 9765，例如，您读取（PRNG 的状态）`ret(0)`并在其后生成第 9765 个伪随机数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:35:23.270

好的，所以目的是用速度换取更少的内存使用。

想象一下，您有某种填充数组的循环。

```
int array[intendedArraySize];

seed = 3;
for (size_t z = 0; z < intendedArraySize; z++)
{
     array[z] = some_int_psn_generator(seed);
} 
```

之后您可以显示这些值。

```
for (size_t z = 0; z < intendedArraySize; z++)
{
    std::cout << z << " " << array[z] << std::endl;
} 
```

如果确实如此，请考虑完全丢弃数组，只需每次重新计算值即可。

```
for (size_t z = 0; z < intendedArraySize; z++)
{
    std::cout << z << " " << some_int_psn_generator(z) << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:52:06.850

您可以通过*准确*使用每个值所需的位数来节省一些空间。例如，如果您的值只有 24 位，您可以在 32 位整数上保存一个字节。也就是说，您可以节省的内存只有这么多。

在 64 位机器上，将`mmap()`文件存储到内存地址是可行的，因此可以通过使用磁盘存储来克服物理内存限制，但要以性能为代价。

但是，既然您提到使用伪随机生成器来生成值，那么仅存储特定索引的 RNG 种子并根据需要计算其余值怎么样？例如，您可以存储索引 0、100、200...的种子，并通过将 RNG 重新播种为 100 并调用生成器函数 3 次来计算例如 102。

这种方法会大大减少所需的内存（在本例中为 100），并且您可以通过捆绑或缓存查询来降低性能成本。

# asp.net - 产生枢轴结构

> ID：12005890
> 
> 赞同：0
> 
> 时间：2012-08-17T12:32:19.490
> 
> 标签：asp.net, sql, sql-server, pivot

我正在向您发送我一团糟的详细信息。下面我描述。

原始表结构。

```
ID 日期 TimeLogged(Hrs) 用户名
1 2012 年 10 月 8 日 5.50 布拜
2 2012 年 11 月 8 日 2.30 布拜
3 2012 年 10 月 8 日 3.30 巴努
4 2012 年 11 月 8 日 7.30 巴努

```

我想要如下结果。用户名应该是动态的。可能是很多用户。用户名将来自数据库表。我想在 Gridview(Front End) 中显示详细信息。请广泛解释，因为我是开发新手。

```
日期 Bubai Bhanu 总计
2012 年 10 月 8 日 5.30 3 8\. 30
2012 年 11 月 8 日 2.30 7.30 10
  总计 8 10.30 18.30

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:38:13.843

您可以[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)为此使用 a，静态或动态。您可以将此代码放在存储过程中并用它填充您的数据网格。

**Static Pivot**（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/366ca/2)）这意味着您将对所有值进行硬编码：

```
select convert(char(10), dt, 101), [Bubai], [Bhanu], ([Bubai] + [Bhanu]) total
from
(
    select dt, timelogged, username
    from test
)x
pivot
(
    sum(timelogged)
    for username in ([Bubai], [Bhanu])
)p
union all
select 'total', sum([Bubai]), sum([Bhanu]), sum([Bubai] +[Bhanu])
from
(
    select dt, timelogged, username
    from test
)x
pivot
(
    sum(timelogged)
    for username in ([Bubai], [Bhanu])
)p 
```

**Dynamic Pivot**（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/366ca/3)），这将获得在运行时转换的字段列表：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @totalCol AS NVARCHAR(MAX),
    @totalRow AS NVARCHAR(MAX)

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.username) 
            FROM test c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

SET @totalCol = STUFF((SELECT distinct '+' + QUOTENAME(c.username) 
            FROM test c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

SET @totalRow = STUFF((SELECT distinct ',Sum(' + QUOTENAME(c.username) + ')'
            FROM test c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT convert(char(10), dt, 101), ' + @cols + ', '+@totalCol +' total from 
            (
                select dt, timelogged, username
                from test
           ) x
            pivot 
            (
                sum(timelogged)
                for username in  (' + @cols + ')
            ) p 
            union all
            select ''total'', '+ @totalRow +', sum('+@totalCol+')
            from
            (
                select dt, timelogged, username
                from test
            )x
            pivot
            (
                sum(timelogged)
                for username in (' + @cols + ')
            )p'

execute(@query) 
```

这两者都会产生相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:16:51.200

@NikolaMarkovinović 是对的，您应该使用透视查询获得所需的结果，问题是您必须知道要透视的列中的值

```
SELECT Date , [Bunbai] , [Bhanu] , ..., /* This names have to be known, the same as in the IN part of the PIVOT */
/* You can even do this */
[Bunbai]+[Bhanu] AS Total
FROM ( <SELECT query that produces the data> ) AS T
PIVOT ( SUM( TimeLoggedHours ) FOR UserName
IN ( [Bunbai] , [Bhanu] , ... ) 
/* You can't write some subquery inside the IN, columns names have to be known */
) AS pvt 
```

，您将需要在您的代码中编写一个动态查询方法，首先获取列的名称，然后将它们添加到查询的标题和 PIVOT 的 IN 部分。

要在底部添加总计，只需编写相同的查询，但在生成数据的查询中，而不是日期选择“总计”并使用 UNION ALL

希望这可以帮助。

# php - 完成表单后如何使用 AJAX 重定向并在其他页面上显示数据

> ID：12005894
> 
> 赞同：-1
> 
> 时间：2012-08-17T12:32:40.590
> 
> 标签：php, javascript, ajax, forms, redirect

我创建了一个带有验证的表单，在一个人填写完整的表单后，我想将他重定向到一个新页面，在该页面显示他填写的数据。

但是，单击发送按钮后，此当前代码仍保留在同一页面上。

如何将发送数据发送到另一个页面，如 result.php？

表格的一部分

```
<form id="ContactForm" action="">
<tr>
<td class="left_td">Contactpersoon<font size="-2" style="vertical-align:top;">*</font></td><td><input id="contactpersoon" name="contactpersoon" class="inplaceError" maxlength="120" type="text" class="error" autocomplete="off" onFocus="window.scrollTo(0, 0);"/><span class="error" style="display:none; margin-left:40px;"></span></td>
</tr>
<input type="button" class="button_verzenden black" id="send" value="VERSTUUR" /><input type="hidden" id="newcontact" name="newcontact" value="1"></input>
</form> 
```

（这是 JAVASCRIPT）

```
$(document).ready(function() {
contact.initEventHandlers();
});
var contact = {
    initEventHandlers   : function() {
        /* clicking the submit form */
        $('#send').bind('click',function(event){
            $('#loader').show();
            setTimeout('contact.ContactFormSubmit()',500);
        });
        /* remove messages when user wants to correct (focus on the input) */

$('.inplaceError,.foutmelding_antwoorden',$('#ContactForm')).bind('focus',function(){
            var $this       = $(this);
            var $error_elem = $this.next();
            if($error_elem.length)
                $error_elem.fadeOut(function(){$(this).empty()});
            $('#success_message').empty();  
        });
        /* user presses enter - submits form */
        $('#ContactForm input,#ContactForm textarea').keypress(function (e) {
            if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {  

$("#send").click();
                return false;  
            } 
            else  
                return true;  
        });
    },
    ContactFormSubmit   : function() {
        $.ajax({
               type     : 'POST',
               url      : 'php/contact.php?ts='+new Date().getTime(),
               dataType : 'json',
               data     : $('#ContactForm').serialize(),
               success  : function(data,textStatus){
                              //hide the ajax loader
                              $('#loader').hide();
                              if(data.result == '1'){
                                   //show success message
                                   $('#midden').remove();
                                   var tekst = $('input[name=vraag1_antwoorden]:checked').val();
                                   $('#succes_A_div span').html(tekst);

                                   var tekst = $('input[name=vraag2_antwoorden]:checked').val();
                                   $('#succes_B_div span').html(tekst);

                                   //ook nog nodig om het echt te tonen?
                                   $('#succes_A_div').show()
                                   $('#succes_B_div').show()

                                } 
                              else if(data.result == '-1'){
                                  for(var i=0; i < data.errors.length; ++i ){
                                      if(data.errors[i].value!='') {
                                        var elm = $("#"+data.errors[i].name);
                                        // we gaan kijken welk soort element elm is.
                                        // wanneer dat element een span is, moeten we geen nieuwe span meer aanmaken...
                                        switch (elm[0].tagName.toLowerCase()) {
                                          case 'span':
                                            elm.html(data.errors[i].value).fadeIn();
                                            break;
                                          default:
                                            elm.next().html('<span class="foutmelding_quiz">'+data.errors[i].value+'</span>').fadeIn();
                                            break;
                                        }
                                      }

                                          $("#"+data.errors[i].name).next().html('<span class="foutmelding_antwoorden">'+data.errors[i].value+'</span>').fadeIn();
                                  }
                              }                       
                          },
               error    : function(data,textStatus){}
        });
    }  
}; 
```

（这是联系人。PHP）

```
<?php
require_once("db.php");                 /* Database Class */
require_once('utils/is_email.php');     /* Email Validation Script */

/* Handle Ajax Request */
if(isset($_POST['newcontact'])){
    $contact = new Contact();
    unset($contact);
}
else{
    header('Location: ../result.php');
}

/* Class Contact */
class Contact{

private $db;                        /* the database obj */

private $errors         = array();  /* holds error messages */
private $num_errors;                /* number of errors in submitted form */

public function __construct(){
    $this->db = new DB();
    if(isset($_POST['newcontact']))
        $this->processNewMessage();
    else
        header("Location: ../result.php");
}

public function processNewMessage(){

    $contactpersoon     = $_POST['contactpersoon'];     
    $bedrijfsnaam       = $_POST['bedrijfsnaam'];
    $telefoon           = $_POST['telefoon'];
    $email              = $_POST['email'];
    $vraag1_antwoorden  = $_POST['vraag1_antwoorden'];
    $vraag2_antwoorden  = $_POST['vraag2_antwoorden'];

    /* Server Side Data Validation */

    /* Contactpersoon Validation */
    if(!$contactpersoon || mb_strlen($contactpersoon = trim($contactpersoon)) == 0)
        $this->setError('contactpersoon', 'Vul uw contactpersoon in');
    else if(mb_strlen(trim($contactpersoon)) > 120)
        $this->setError('contactpersoon', 'Te lang! 120 karakters max.');

    /* Bedrijfsnaam Validation */
        if(!$bedrijfsnaam || mb_strlen($bedrijfsnaam = trim($bedrijfsnaam)) == 0)
        $this->setError('bedrijfsnaam', 'Vul uw bedrijfsnaam in');
    else if(mb_strlen(trim($bedrijfsnaam)) > 120)
        $this->setError('bedrijfsnaam', 'Te lang! 120 karakters max.');

        /* Telefoon Validation */
        if(!$telefoon || mb_strlen($telefoon = trim($telefoon)) == 0)
        $this->setError('telefoon', 'Vul uw telefoonnummer in');
    else if(mb_strlen(trim($telefoon)) > 120)
        $this->setError('telefoon', 'Te lang! 120 karakters max.');

        /* Vraag 1 Validation */
        if(!$vraag1_antwoorden || mb_strlen($vraag1_antwoorden = trim($vraag1_antwoorden)) == 0)
        $this->setError('vraag1_antwoorden', 'Selecteer een antwoord a.u.b.');

        /* Vraag 2 Validation */
        if(!$vraag2_antwoorden || mb_strlen($vraag2_antwoorden = trim($vraag2_antwoorden)) == 0)
        $this->setError('vraag2_antwoorden', 'Selecteer een antwoord a.u.b.');

        /* Email Validation */
    if(!$email || mb_strlen($email = trim($email)) == 0)
        $this->setError('email','Vul uw e-mail in');
    else{
        if(!is_email($email))
            $this->setError('email', 'Vul een correct email adres in');
        else if(mb_strlen($email) > 120)
            $this->setError('email', 'Te lang! 120 karakters max.');
    }

    /* Errors exist */
    if($this->countErrors() > 0){
        $json = array(
            'result' => -1, 
            'errors' => array(
                            array('name' => 'contactpersoon'    ,'value' => $this->error_value('contactpersoon')),
                            array('name' => 'bedrijfsnaam'  ,'value' => $this->error_value('bedrijfsnaam')),
                            array('name' => 'email'     ,'value' => $this->error_value('email')),                               
                            array('name' => 'telefoon'  ,'value' => $this->error_value('telefoon')),
                            array('name' => 'vraag1_antwoorden' ,'value' => $this->error_value('vraag1_antwoorden')),
                            array('name' => 'vraag2_antwoorden' ,'value' => $this->error_value('vraag2_antwoorden')),
                        )
            );              
        $encoded = json_encode($json);
        echo $encoded;
        unset($encoded);
    }
    /* No errors, insert in db*/
    else{
        if(($ret = $this->db->dbNewMessage($contactpersoon, $bedrijfsnaam, $email, $telefoon, $vraag1_antwoorden, $vraag2_antwoorden)) > 0){
            $json = array('result'      => 1); 
            if(SEND_EMAIL)
                $this->sendEmail($contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden);
        }   
        else
            $json = array('result'      => -2); /* something went wrong in database insertion  */
        $encoded = json_encode($json);
        echo $encoded;
        unset($encoded);
    }
}

public function sendEmail($contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden){
    /* Just format the email text the way you want ... */
    $message_body   = "<div style=\"font-size:12px; font-weight:normal;\">Hallo,<br><br>"
                                ."Het volgende bedrijf heeft zich zojuist aangemeld:</div><br>"
                                ."<table cellpadding=\"1\" cellspacing=\"1\" width=\"550px\"><tr><td style=\"font-size:12px; color:#000000\">Bedrijfsnaam:</td><td style=\"font-size:12px; color:#000000\">".$bedrijfsnaam."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Contactpersoon:</td><td style=\"font-size:12px; color:#000000\">".$contactpersoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Telefoonnummer:</td><td style=\"font-size:12px; color:#000000\">".$telefoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">E-mail:</td><td style=\"font-size:12px; color:#000000\">".$email."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 1:</td><td style=\"font-size:12px; color:#000000\">".$vraag1_antwoorden."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 2:</td><td style=\"font-size:12px; color:#000000\">".$vraag2_antwoorden."</td></tr></table><br>";

        // Geef GELDIGE adressen op
        // Een korte benaming voor jouw website
        $website_naam = 'Aanmelding';
        // Jouw eigen geldige emailadres
        $eigen_emailadres = 'EMAIL';
        // Een geldig emailadres voor errors
        $error_emailadres = 'EMAIL';
        // De naam van de verzender
        $naam_verzender = ''.$bedrijfsnaam.'';
        // Het geldige emailadres van de afzender
        $email_verzender = ''.$email.'';
        // Een geldig emailadres of helemaal leeg laten
        $bcc_emailadres = '';
        // HTML mail? True/False
        $html = true;

        // De headers samenstellen
        $headers     = 'From: ' . $website_naam . ' <' . $eigen_emailadres . '>' . PHP_EOL;
        $headers    .= 'Reply-To: ' . $naam_verzender . ' <' . $email_verzender . '>' . PHP_EOL;
        $headers    .= 'Return-Path: Mail-Error <' . $error_emailadres . '>' . PHP_EOL;
        $headers    .= ($bcc_emailadres != '') ? 'Bcc: ' . $bcc_emailadres . PHP_EOL : '';
        $headers    .= 'X-Mailer: PHP/' . phpversion() . PHP_EOL;
        $headers    .= 'X-Priority: Normal' . PHP_EOL;
        $headers    .= ($html) ? 'MIME-Version: 1.0' . PHP_EOL : '';
        $headers    .= ($html) ? 'Content-type: text/html; charset=iso-8859-1' . PHP_EOL : '';

        mail(EMAIL_TO,MESSAGE_SUBJECT,$message_body,$headers);

}

public function setError($field, $errmsg){
    $this->errors[$field]   = $errmsg;
    $this->num_errors       = count($this->errors);
}

public function error_value($field){
    if(array_key_exists($field,$this->errors))
        return $this->errors[$field];
    else
        return '';
}

public function countErrors(){
    return $this->num_errors;
}
};
?> 
```

更新问题 20-08-2012

有谁知道是否可以使用以下代码解决此问题：

```
 <input type="hidden" name="redirect_to" value="http://redirect.to.com"> 
```

和

```
$redirect_to = apply_filters('login_redirect', $redirect_to, isset( $_REQUEST['redirect_to'] ) ? $_REQUEST['redirect_to'] : '', $user); 
```

（来源：[点击表单提交按钮时重定向](https://stackoverflow.com/questions/10776202/redirect-when-form-submit-button-is-clicked)）

如果可能的话，我需要在哪里放置此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:38:14.167

您还没有说初始表单在哪个页面上，但是如果是`php/contact.php`，那么这就是它保持在同一页面上的原因。基本上，您只需将`jQuery.ajax()`调用 POST 中的 URL 更改为其他页面。请注意，这要求您将所有表单处理代码移动到该其他页面（如果它当前位于）中`php/contact.php`（我怀疑它是）。

# java - 从静态方法完成 FragmentActivity

> ID：12005895
> 
> 赞同：2
> 
> 时间：2012-08-17T12:32:42.913
> 
> 标签：java, android, exception, casting

我正在尝试完成从静态方法`class`扩展而来的方法：-`FragmentActivity`

```
private static void myFinish(Context context,Activity activity) {
    [some code]
    activity.finish();
} 
```

从这个方法： -

```
private static void remove(Context context) {
        myFinish(context, ((Activity) context).getParent());
} 
```

此代码`compiles`但给了我一个错误：-

```
java.lang.ClassCastException: android.app.Application cannot be cast to android.app.Activity 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T10:08:09.567

我找到了一个简单的解决方案。宣布：

```
Activity activity; 
```

在 onCreate 中：

```
activity = this; 
```

然后

```
activity.finish(); 
```

做这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:35:40.400

我想你想`FragmentActivity`从你的一个片段中完成你的..

这就是它的工作原理：

`getActivity().finish();`

如果你在它`FragmentActivity`本身，你可以使用`finish()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-14T23:17:41.707

这对我有用。我希望这有帮助。

```
((Activity)context).finish(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-06T13:11:14.290

创建一个活动 EmptyActivity ，通过 Intent 调用一个 EmptyActivity ，只需完成 EmptyActivity 但将 android:noHistory="true" 放入清单中的 EmptyActivity

# java - java EE6 JSF 表示层和逻辑层如何交互？

> ID：12005896
> 
> 赞同：0
> 
> 时间：2012-08-17T12:32:46.197
> 
> 标签：java, jsf, jakarta-ee

谁能告诉我 JSF 组件如何调用 Java 方法？它与使用托管 Bean 作为我的“JSON”/模型调用 Javascript 函数相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:07:48.997

（除了发现 C 怪物及其居住在错误的社会公共区域的严重歪曲以及所有阿斯伯格症候群）你在谈论... net.sf.json.util.JSONBuilder；并将 bean 转换为 google 制作的 JSON GSON 库和 API

Java 方法在 JSF 页面内通过称为“EL”“表达式语言”的标准 JSP/JSF 页面语言语法调用。JSF 是一种特殊的“Java 服务器框架”，它的语法与 JSP 类型的 EL 非常相似，但两者在初始符号符号上略有不同。在 jsp 中它以“$”开头，在 JSF 中它以“#”开头。如果您使用的是 Java EE 服务器，那么它是一样的。

# backbone.js - 如何在 Backbone 中对集合进行排序

> ID：12005898
> 
> 赞同：0
> 
> 时间：2012-08-17T12:32:48.813
> 
> 标签：backbone.js

我想在将集合传递给模板之前对其进行排序。我在视图的渲染功能中使用

```
CollectionForTelplate : this.Collection 
```

我做 fetch as

```
var self = this;
//fetch done here
if (Collection.length > 0) {
    _.each(Collection, function(Model) {
        JSON.stringify(Model);
    }, this);
};
self.Collection = Collection;
self.render; 
```

1.  有没有其他方法可以将集合传递给模板？
2.  你如何根据模型的字符串字段对集合进行排序，比如 Model.name ？我尝试在集合中编写一个比较器并在视图中编写一个排序函数，但不幸的是；它对我不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:43:05.983

实现你`Collection`的`compatarator`功能，在[文档](http://backbonejs.org/#Collection-comparator)中定义为

> 如果您定义了一个比较器，它将用于按排序顺序维护集合。

这样，您的收藏将在添加、删除等之后自动按排序顺序保存。您可以将其实现为`sort`

```
comparator: function(model1, model2) {
  if (model1 comes before model 2) {
    return -1;
  } else if (model1 is equal to model 2) {
    return 0;
  } else { // model1 comes after model 2
    return 1;
  }
} 
```

或者`sortBy`

```
comparator: function(model) {
  // Return some numeral or string attribute and it will be ordered by it
  // == smaller numbers come first / strings are sorted into alphabet order
  return model.get('someAttribute');
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:29:08.393

> 有没有其他方法可以将集合传递给模板？

是的，收藏有一个[`toJSON() method`](http://documentcloud.github.com/backbone/#Collection-toJSON)，所以你可以简单地做类似的事情

```
render: function() {
  this._template({list: this.toJSON()}); //assuming your template is already compiled
  return this;
} 
```

> 你如何根据模型的字符串字段对集合进行排序，比如 Model.name ？我尝试在集合中编写一个比较器并在视图中编写一个排序函数，但不幸的是；它对我不起作用

您可以简单地在集合上定义[比较器函数，它应该保持自身排序，这是文档中给出的示例](http://documentcloud.github.com/backbone/#Collection-comparator)

```
chapters.comparator = function(chapter) {
  return chapter.get("page");
}; 
```

# c - c程序（linux）：获取命令行输出到变量并过滤数据

> ID：12005902
> 
> 赞同：0
> 
> 时间：2012-08-17T12:33:00.483
> 
> 标签：c, command-line, variable-assignment

我有运行以下命令的 ac 程序：

```
system("sudo grep '' /sys/class/dmi/id/board_*") 
```

并在命令行上给出输出。

我希望将输出存储在 c 程序中的某个变量中，以便我可以过滤`board_serial`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:16:16.210

看看[popen](http://pubs.opengroup.org/onlinepubs/009695399/functions/popen.html)。这是一个简单的示例，说明如何使用它来捕获程序输出：

```
#include<stdio.h>

int main()
{
    FILE *p;
    p = popen("ls -l", "r");

    if(!p) {
        fprintf(stderr, "Error opening pipe.\n");
        return 1;
    }

    while(!feof(p)) {
        printf("%c", fgetc(p));
    }

    if (pclose(p) == -1) {
        fprintf(stderr," Error!\n");
        return 1;
    }

    return 0;
} 
```

但是，看起来您只是想从文件中读取一些值，对吗？我宁愿只打开（[`fopen()`](http://en.cppreference.com/w/c/io/fopen)）其中包含值的文件并将这些值读取到我的 C 程序中的变量中。尝试这样的事情（只是一个简单的例子）：

```
#include<stdio.h>
#include<stdlib.h>

#define MAX 100

int main()
{
    FILE *fp;
    char result[MAX];
    int i;
    char c;

    fp = fopen("/sys/class/dmi/id/board_name", "r");

    if(!fp) {
        fprintf(stderr, "Error opening file.\n");
        return 1;
    }

    i = 0;
    while((c = fgetc(fp)) != EOF) {
        result[i] = c;
        i++;
    }
    result[i] = '\0';

    printf("%s", result);
    i = atoi(result);
    printf("%d", i);

    if (fclose(fp) == -1) {
        fprintf(stderr," Error closing file!\n");
        return 1;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:27:23.100

使用 dup 或 dup2 将标准输出 fd 复制到文件 fd

[男人 dup/dup2](http://www.kernel.org/doc/man-pages/online/pages/man2/dup.2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:56:37.863

最简单的方法是将输出重定向到文件并读取该文件以解析输出。

```
system("sudo grep '' /sys/class/dmi/id/board_* 1>out.txt 2>err.txt");
fd_out = fopen("out.txt", "r");
fd_err = fopen("err.txt", "r"); 
```

或者你可以使用`popen`函数。

```
fd_out = popen("sudo grep '' /sys/class/dmi/id/board_*", "r"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:15:24.323

是的，popen 绝对是最好的选择。看看这里

```
 http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html 
```

# objective-c - 隐藏搜索显示控制器的表格视图

> ID：12005903
> 
> 赞同：3
> 
> 时间：2012-08-17T12:33:04.700
> 
> 标签：objective-c, ios, uisearchdisplaycontroller

我想让搜索显示控制器以这种方式工作：

当用户按下搜索字段时，它会上升到顶部并显示键盘。通常会发生这种情况，但是当用户键入某些内容时，会显示表格视图。

我不想在用户打字时做任何事情，当他按下时`Search`我这样做：

```
 [_searchController setActive:NO animated:YES]; 
```

并在我的自定义创建表视图中加载数据。

我怎么能做这种功能。

编辑。我找到了一些解决方案：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    savedSearchTerm = searchString;

    [controller.searchResultsTableView setBackgroundColor:[UIColor colorWithWhite:0.0 alpha:0.8]];
    [controller.searchResultsTableView setRowHeight:800];
    [controller.searchResultsTableView setScrollEnabled:NO];
    return NO;
} 
```

也许有人有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:07:30.447

您可以设置的`hidden`属性`searchResultsTableView`

```
controller.searchResultsTableView.hidden = YES; 
```

每当您想要它返回时，只需将其设置`hidden`为 NO 并将其放在前面，以防它已经显示

```
controller.searchResultsTableView.hidden = NO;
[controller.searchResultsTableView.superview bringSubviewToFront:controller.searchResultsTableView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T07:51:25.917

```
[self.searchDisplayController setActive:NO]; 
```

# html - 谷歌在 HTML 页面中绘制？

> ID：12005906
> 
> 赞同：1
> 
> 时间：2012-08-17T12:33:10.683
> 
> 标签：html, drawable, draw

我需要制作一个可以使用多边形绘制建筑物（在 2D 视图中）的网页。最好的解决方案是将 Google Draw 嵌入到 HTML 页面中。

我怎么能那样做？

也欢迎其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:40:42.427

您可以使用 jquery：http: [//jsfiddle.net/FlameTrap/CNx8H/](http://jsfiddle.net/FlameTrap/CNx8H/)

# cloud - 有没有在云上扩展 Mule ESB 的解决方案（亚马逊首选）？

> ID：12005912
> 
> 赞同：1
> 
> 时间：2012-08-17T12:33:30.987
> 
> 标签：cloud, amazon, scaling, mule, autoscaling

1）请向我推荐 Mule ESB 的任何云类似物。

2）是否有任何解决方案可以在云上缩放（自动缩放）Mule ESB（亚马逊首选）？（例如，如果我将使用 EC2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:45:12.133

[CloudHub](https://cloudhub.io)是 Mule 的事实上的云服务。它不支持自动缩放 AFAIK，但您可以使用简单的滑块轻松控制已部署节点的数量。它还公开了一个完整的 API，因此您可以以编程方式控制已部署的应用程序并对其进行扩展。

# android - Android 自定义微调器 (NoDefaultSpinner) 提示从视图中截断

> ID：12005915
> 
> 赞同：0
> 
> 时间：2012-08-17T12:33:35.637
> 
> 标签：android, android-layout, spinner, prompt

我已经实现了一个自定义微调器，其中没有进行初始默认选择。NoDefaultSpinner 的代码来自这篇文章[https://stackoverflow.com/a/3427058/1257074](https://stackoverflow.com/a/3427058/1257074)

问题是，如果 Layout Width = wrap_content 小于 Prompt 文本的宽度，则在 xml 布局文件中为此微调器定义的 Prompt 会被截断。见下文。

![NoDefaultSpinner 截止](../Images/9fa7a6b1d8f4e78032450db447cc71d2.png)

一种解决方案是在 xml 文件中为自定义微调器定义一个宽度，但不幸的是微调器是在代码中动态生成的。

请问有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:58:11.427

刚结束动态改变宽度：

```
RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) s1.getLayoutParams();
lp.width = 400;
s1.setLayoutParams(lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:05:20.240

您可以尝试在微调器中覆盖[onMeasure(int,int)](http://developer.android.com/reference/android/view/View.html#onMeasure%28int,%20int%29)，并使用特殊情况“如果未选择任何内容”来正确调整它的大小。

膨胀xml时或多或少是做什么的。

# objective-c - iphone iOS中的肥皂网络服务访问

> ID：12005923
> 
> 赞同：0
> 
> 时间：2012-08-17T12:34:17.740
> 
> 标签：objective-c, web-services, soap, iphone

我需要帮助以访问 iOS 中的 Web 服务（以下 Web 服务代码）。我尝试实现肥皂网络服务来访问网络服务，但它返回错误的结果。我直接给出用户名和密码并尝试访问，但访问此服务所需的 base64 加密字符串（例如，用户名将以加密类型给出，如 NSString *Username=@"username:password"; ）。此用户名可以转换为base64 加密，然后访问Web 服务。我不知道如何设置 AuthHeader 的标头和用于访问以下 Web 服务的凭据标签。所以任何人都可以帮助我如何在 iPhone 上实现波纹管网络服务。

```
SOAP 1.1
The following is a sample SOAP 1.1 request and response. The placeholders shown need to be replaced with actual values.
POST /Test_Express/Service.asmx HTTP/1.1
Host: external.test.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/LoginValidation"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <AuthHeader xmlns="http://tempuri.org/">
      <credentials>string</credentials>
    </AuthHeader>
  </soap:Header>
  <soap:Body>
    <LoginValidation xmlns="http://tempuri.org/">
      <username>string</username>
      <password>string</password>
    </LoginValidation>
  </soap:Body>
</soap:Envelope>
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <LoginValidationResponse xmlns="http://tempuri.org/">
      <LoginValidationResult>string</LoginValidationResult>
    </LoginValidationResponse>
  </soap:Body>
</soap:Envelope>
SOAP 1.2
The following is a sample SOAP 1.2 request and response. The placeholders shown need to be replaced with actual values.
POST /Test_Express/Service.asmx HTTP/1.1
Host: external.test.com
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Header>
    <AuthHeader xmlns="http://tempuri.org/">
      <credentials>string</credentials>
    </AuthHeader>
  </soap12:Header>
  <soap12:Body>
    <LoginValidation xmlns="http://tempuri.org/">
      <username>string</username>
      <password>string</password>
    </LoginValidation>
  </soap12:Body>
</soap12:Envelope>
HTTP/1.1 200 OK
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <LoginValidationResponse xmlns="http://tempuri.org/">
      <LoginValidationResult>string</LoginValidationResult>
    </LoginValidationResponse>
  </soap12:Body>
</soap12:Envelope>
HTTP GET
The following is a sample HTTP GET request and response. The placeholders shown need to be replaced with actual values.
GET /Test_Express/Service.asmx/LoginValidation?username=string&password=string HTTP/1.1
Host: external.test.com
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">string</string>
HTTP POST
The following is a sample HTTP POST request and response. The placeholders shown need to be replaced with actual values.
POST /Test_Express/Service.asmx/LoginValidation HTTP/1.1
Host: external.test.com
Content-Type: application/x-www-form-urlencoded
Content-Length: length

username=string&password=string
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">string</string> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:38:26.363

我建议您从这里开始：[SOAP iOS generator](http://sudzc.com/)这将允许您以一种干净简单的方式与您的 SOAP Web 服务进行通信。

# c# - 访问路径...被拒绝

> ID：12005924
> 
> 赞同：5
> 
> 时间：2012-08-17T12:34:18.857
> 
> 标签：c#, access-denied, directory-permissions

好吧，我已经看到很多关于这件事的问题，但仍然没有人回答我的问题。事实上，我看到的每一个问题都不尽相同，这个访问问题似乎真的在困扰程序员。

请查看代码：

```
DirectoryInfo Dir1 = Directory.CreateDirectory(Desktop + "\\DIR1");
DirectoryInfo Dir2 = Directory.CreateDirectory(Desktop + "\\DIR2");
//* Lets Create a couple of SubDirs in DIR1
for (int i = 0; i < 5; i++)
{
  // this will create 5 SubDirs in DIR1, named Sub1, Sub2 ... Sub5.
  Dir1.CreateSubdirectory("Sub" + (i + 1).ToString()); 
  //* lets create 5 text files in each SubDir:
  for (int j = 0; j < 5; j++)
  {
    File.Create(Dir1.FullName + "\\Sub"+(i+1).ToString() + "\\text"+(j+1).ToString() + ".txt"); 
  }
}

//* Lets Move all what we created in DIR1 to DIR2 (THIS IS WHERE I'M GETTING THE EXCEPTION
Directory.Move(Dir1.FullName, Dir2.FullName + "\\DIR1");
// I also Tried Dir1.MoveTo(Dir2.FullName + "\\DIR1"); 
```

堆栈跟踪：

```
at System.IO.DirectoryInfo.MoveTo(String destDirName)
at Directory_Class.Program.Main(String[] args) in c:\users\vexe\documents\visual studio 2010\Projects\Directory_Class\Directory_Class\Program.cs:line 207
at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

当然，我尝试了通常的做法：

```
DirectorySecurity DirSec = Dir1.GetAccessControl();
string user = Environment.UserName;
DirSec.ResetAccessRule(new FileSystemAccessRule(user, FileSystemRights.FullControl, AccessControlType.Allow));
Dir1.SetAccessControl(DirSec); 
```

但是一点都没变！

我还尝试手动更改权限，方法是右键单击 dir1 -> 属性 -> 安全 -> 编辑 -> 添加 -> 键入每个人（在输入对象名称中选择） -> 确定 -> 对每个人的完全控制。（我还看到我的用户帐户也拥有完全控制权）

任何提示将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T13:07:07.187

虽然这是一个拒绝访问异常，但听起来文本文件正在使用中并且无法移动，因为存在对该文件的打开引用。

[File.Create](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)方法返回一个 FileStream 对象，我认为在修改文件之前必须关闭/处置该对象。

为您的内部循环尝试以下操作：

```
 for (int j = 0; j < 5; j++)
  {
    using(var fs = File.Create(Dir1.FullName + "\\Sub"+(i+1).ToString() + "\\text"+(j+1).ToString() + ".txt"))
    {
        //fs.WriteByte(...);
        fs.Close();
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:09:59.610

首先，您应该使用 Path.Combine 而不是进行字符串连接。
其次，堆栈跟踪不如抛出的异常有用。

我想你的问题可以通过这样做来解决：

```
Directory.Move(Dir1.FullName, Dir2.FullName); 
```

如果这样可以解决问题，那么问题出在您尝试将其移动到的 DIR1 子目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:11:06.923

作为调试，您应该在两个文件夹上设置故障审核（在高级安全设置下）。只需设置每个人都审核所有故障，然后再次尝试您的操作。根据您正在运行的操作系统版本，您应该获取用于操作的用户帐户以及缺少的权限。还要确保没有在文件夹上设置拒绝权限，因为它们会覆盖所有其他权限。您将需要查看安全事件日志。如果操作没有失败审核，则不是权限问题。

# cocos2d-iphone - 如何对许多玩家进行许多对象之间的碰撞检测

> ID：12005929
> 
> 赞同：0
> 
> 时间：2012-08-17T12:34:43.107
> 
> 标签：cocos2d-iphone, collision-detection

我在游戏中有 3-4 名玩家和许多物体（如石头、树、仙人掌等）。我必须找到物体和玩家之间的碰撞检测。

用速度性能找到物体和玩家之间的碰撞的最简单方法是什么。

如果我将步进移动的玩家位置传递给对象类以查找碰撞检测，则可能会降低性能（each_step_of_player * all_objects）。

我的另一个想法是，我将为 Object 类中的每个对象编写一个调度函数，并且对于每个调度函数调用，我将检查与所有玩家位置 (Object * all_players) 的碰撞。这个关于速度性能的想法如何？

任何其他想法将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:24:04.023

您可以使用基于网格的碰撞检测。

将屏幕分成方形单元格，每个单元格至少与最大对象一样大（这很重要）。根据对象中心的位置，每个对象都分配有一个单元格。移动对象时，会将其重新分配给相应的单元格。现在您不必检查一个对象与*所有*其他对象是否发生碰撞，只需检查其单元格和相邻单元格中的对象即可。

# json - 从 JSP 发送到 jQuery 时的适当 JSON 日期格式

> ID：12005930
> 
> 赞同：0
> 
> 时间：2012-08-17T12:34:48.683
> 
> 标签：json, jsp, datetime-format

由于 JSON 格式没有标准化日期子格式，这个任务完全由程序员来完成，对吧？

当从 PHP 向 Javascript 发送日期并返回时，我以 UNIX 时间戳格式（自 1970 年 1 月 1 日以来的秒数）将日期作为单个整数发送。

在服务器上：

```
$now = new DateTime('now');
$now->getTimestamp(); 
```

在客户端：

```
.success : function (data)
{
    var date = new Date(data * 1000);
} 
```

从 JSP 发送日期的最佳格式是什么？（我是 JSP 和 Java 新手）。

1.  显然，它必须使用 Java 原生类以及 Javascript Date 对象进行简单的编码/解码。
2.  溢出应该没有任何问题（我担心在 2038 年之后我的 PHP 代码会中断）。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T02:35:14.673

> new Date(milliseconds) //milliseconds since 1970/01/01 - 所以你已经解决了你自己的问题。我个人更喜欢使用 yyyy-mm-dd hh:ii:ss 格式，因为它可读且不同于英国和美国格式。

# objective-c - 枚举按位掩码限制

> ID：12005933
> 
> 赞同：0
> 
> 时间：2012-08-17T12:35:08.410
> 
> 标签：objective-c, c, enums

我试图用位掩码枚举文件类型，以便在按位 OR 上快速轻松地区分：

```
typedef enum {

    FileTypeDirectory = 1,
    FileTypePIX = 2,
    FileTypeJPG = 4,
    FileTypePNG = 8,
    FileTypeGIF = 16,
    FileTypeHTML = 32,
    FileTypeXML = 64,
    FileTypeTXT = 128,
    FileTypePDF = 256,  
    FileTypePPTX = 512,

    FileTypeAll = 1023

} FileType; 
```

我的 OR 手术一直有效，直到 128，之后它失败了。64 位 Mac OSX 上的枚举是否仅限于字节数据类型？(2^7=128)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:17:40.087

C 中的所有`enum` *常量*都是类型`int`而不是枚举本身的类型。因此，限制不在于`enum`变量的存储大小，而在于`int`.

我不太了解objective-c（因为它也被标记了），但它不应该与C有太大的偏差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:36:57.347

我不太确定您是如何使用`OR`运算符的，但它适用于我的`typedef`.

```
FileType _fileType = FileTypeGIF | FileTypePDF | FileTypePPTX;
NSLog(@"filetype is : %d", _fileType); 
```

结果是：

```
filetype is : 784 
```

这是正确的值，因为`16 + 256 + 512`正是`784`。

* * *

（仅**在真机上测试过**。）

# c - 分段函数计算

> ID：12005934
> 
> 赞同：-4
> 
> 时间：2012-08-17T12:35:08.553
> 
> 标签：c

输入 n，计算 f(n)，精确保留小数点后 2 位。 ![分段函数](../Images/e7305b2e15b2e61d1d8d3d30fbad21e9.png)

示例：输入 5 输出：15.00

（欢迎对下面的代码进行改进/建议）这是我到目前为止的想法；

```
#include <stdio.h>
#include <math.h>

int main() {
    float m;

    scanf("%f", &m);
    if (m < 0)
        m = abs(m);

    else if (m < 2)
        m = sqrt(m + 1);

    else if (m < 4)
        m = pow(m + 2, 5);

    else if (m >= 4)
        m = (m * 2);
    m = m + 5;

    printf("%1.2f", m);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:36:54.377

你最后`if`的陈述是错误的，必须是

```
else if (m >= 4)
{
    m = (m * 2);
    m = m + 5;
} 
```

否则，`m = m + 5;`不在`if`“主体”之外，将在每种情况下执行（适用于所有条件）

或者，你可以写

```
else if (m >= 4)
    m = m * 2 + 5; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:37:36.103

你需要在你的最后一个其他人周围戴上大括号

```
 else if (m >= 4) {
    m = (m * 2);
    m = m + 5;
 } 
```

代替

```
 else if (m >= 4)
    m = (m * 2);
m = m + 5; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T12:42:29.780

`if`您应该对所有块使用大括号。这样你就可以避免像你最后一个案例中的错误，应该是：

```
} else if (m >= 4) {
    m = (m * 2);
    m = m + 5;
} 
```

甚至更好：

```
} else if (m >= 4) {
    m = (m * 2) + 5;
} 
```

另外，第一种情况可以写成：

```
if (m < 0) {
    m = -m;
} else if ... 
```

尽管这实际上是对原始公式的优化，并且可能会或可能不会根据编译器及其选项而提高性能。

# iphone - 在 UIScrollview 中加载太多图像时应用程序崩溃

> ID：12005935
> 
> 赞同：1
> 
> 时间：2012-08-17T12:35:09.237
> 
> 标签：iphone, objective-c, uiscrollview, crash

我正在创建一个应用程序，它正在加载 56 张总大小约为 200MB 的图像，当我在 UIScrollView 中显示所有这些图像时，应用程序花费的时间太长（大约 6 分钟）并且有时会崩溃。

请建议我一种使用 UIView 进行整理并一次加载 1 个图像的方法。图像保存在应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:07:16.503

在 UIScrollView 中加载这么多图像是非常糟糕的做法。每当您处理如此多的内容时，您应该考虑使用 UITableViews 或为以这种方式处理加载图像而构建的库。

实际上，我不久前写了一个 iOS 画廊，FGallery，你可以在[这里](https://github.com/gdavis/FGallery-iPhone)找到。

即使使用后台线程，当您的应用程序只显示一个时，一次将 56 个图像加载到内存中也是不好的。这会导致崩溃、锁定和整体糟糕的用户体验。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:16:21.470

如果您的图像视图大小为 320*416 像素，则计算内存大小可能为 320*416*200/1000000 = ~27 MB。

更好的选择是将图像缩放到 320 *416 像素：

```
- (UIImage *)imageByScalingProportionallyToSize:(CGSize)targetSize;

- (UIImage *)imageByScalingProportionallyToSize:(CGSize)targetSize {

    UIImage *sourceImage = self;
    UIImage *newImage = nil;

    CGSize imageSize = sourceImage.size;
    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;

    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;

    CGFloat scaleFactor = 0.0;
    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;

    CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

    if (CGSizeEqualToSize(imageSize, targetSize) == NO) {

        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor &lt; heightFactor) 
            scaleFactor = widthFactor;
        else
            scaleFactor = heightFactor;

        scaledWidth  = width * scaleFactor;
        scaledHeight = height * scaleFactor;

        // center the image

        if (widthFactor &lt; heightFactor) {
            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5; 
        } else if (widthFactor &gt; heightFactor) {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
    }

    // this is actually the interesting part:

    UIGraphicsBeginImageContext(targetSize);

    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.origin = thumbnailPoint;
    thumbnailRect.size.width  = scaledWidth;
    thumbnailRect.size.height = scaledHeight;

    [sourceImage drawInRect:thumbnailRect];

    newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    if(newImage == nil) NSLog(@"could not scale image");

    return newImage ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T12:49:29.607

您需要做的是实现 NSOperationQueue 以预加载图像并将其设置为第一部分的图像数量。在 NSOperationQueue 中，您应该将 MaxNumberOfConcurenceOperations 设置为一个小数字。

下一步 - 你应该优化你的图像！

如果您有 56 张大约 200MB 的图像，那么您的图像的大小超过 3MB。您应该使用图形功能为您的图像创建缩略图。生成的缩略图应小于 100KB。将所有图像存储在文件系统中。

还有最后一个，最好不要把所有的 UIImageView 都存到内存中。相反，请使用像 UITableView 中使用的按需加载技术。

# iphone - 使用 sharekit 从 iOS 应用程序在 Facebook 上共享文本

> ID：12005937
> 
> 赞同：0
> 
> 时间：2012-08-17T12:35:11.860
> 
> 标签：iphone, objective-c, facebook, sharekit

我想使用 sharekit 在 facebook 上分享一些文本。我找到了很多解决方案，但没有一个对我有用。
我在我的项目中导入了 sharekit 和框架。现在我想直接分享文字：@“大家好”（我的意思是不要从选项中选择：邮件，推特，脸书。当我按下按钮分享时，它应该在脸书上分享文字，如果有必要，请询问登录）。
如果您告诉我填写 facebook 的 SHKConfig.h 文件需要哪些字段，我也会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:02:37.993

分享文字

```
+ (SHKItem *)text:(NSString *)text;
//text - The text you want to share
NSString *someText = @"This is a blurb of text I highlighted from a document.";
SHKItem *item = [SHKItem text:someText]; 
```

[您可以下载 ShareKit 源文件并在此处](http://mobile.tutsplus.com/tutorials/iphone/sharekit/)观看 ShareKit 官方项目概述视频

[您可以在此处](http://www.getsharekit.com/docs/#text)阅读 ShareKit 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:46:29.617

用下面的代码`DefaultSHKConfigurator.m`替换方法`defaultFavoriteTextSharers`

```
- (NSArray*)defaultFavoriteTextSharers {
    return [NSArray arrayWithObjects:@"SHKFacebook", nil];
} 
```

# asp.net - Internet Explorer 9 中奇怪的 Ajax / Jquery 行为

> ID：12005938
> 
> 赞同：1
> 
> 时间：2012-08-17T12:35:14.917
> 
> 标签：asp.net, internet-explorer, jquery

我在 javascript 函数中有一个 ajax 调用，它用结果更新 div。此函数每 2 秒调用一次。

```
function RefreshNbrMsg() { 
   $.ajax({ 
      url: 'helper/NewMessages.aspx', 
      success: function (data) { 
         $('#nbr_msg').empty().append(data); 
      } 
   }); 
} 

$(document).ready(function () { 
   setInterval(RefreshNbrMsg, 2000); 
}); 
```

我的问题是它可以与 Chrome 完美配合，但不能与 IE 配合使用。在 IE 中，div 不会更新。

我没有任何脚本错误或消息。我可以在网络分析器中看到 ajax 调用每 2 秒完成一次。

/helper/NewMessages.aspx GET 304 text/html 108 B < 1 ms JS 库 XMLHttpRequest

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:05:23.637

尝试这个 ：

```
 function RefreshNbrMsg() {
        $.ajax({
           cache: false,
           url: 'helper/NewMessages.aspx',
           success: function (data) 
           {
                $('#nbr_msg').empty().append(data);
           }
        });
    }

    $(document).ready(function () {
        setInterval(RefreshNbrMsg, 2000);
    }); 
```

# ruby - bundler：找不到命令：rakep --- 在构建 emberjs 待办事项时

> ID：12005940
> 
> 赞同：0
> 
> 时间：2012-08-17T12:35:23.623
> 
> 标签：ruby, rake

我正在尝试从[https://github.com/emberjs/todos](https://github.com/emberjs/todos)构建 emberjs todos ...。在执行命令**bundle exec rakep build**时，出现以下错误

```
**bundler: command not found: rakep**

**Install missing gem executables with 'bundle install'** 
```

我正在使用 Ruby 1.9.3，并且我已经包含了所需的 gem

捆绑包中包含的宝石：

```
 * bundler (1.0.22
  * chunky_png (1.2
  * compass (0.12.2
  * fssm (0.2.9)
  * json (1.5.4)
  * rack (1.4.1)
  * rake (0.9.2.2)
  * rake-pipeline (0.6.0)
  * rake-pipeline-web-filters(0.6.0)
  * sass (3.2.1)
  * thor (0.14.6) 
```

任何人都可以帮助追踪错误吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T21:05:15.860

我意识到这个问题*真的很老*，这可能不是一个直接的答案，但我遇到了一个类似的问题，试图让 ember_phonegap_starter 模板启动并运行（它在网络广播的某个时候使用 rakep 服务器）。

作为一个完整的 Ruby 新手，只对 ember.js 感兴趣，而不是学习另一个生态系统，我最终根据 Yuhuda Katz 的回答（[链接](https://stackoverflow.com/questions/8558062/setting-up-rake-pipeline-for-use-with-handlebars-alongside-google-app-engine)）和一些反复试验拼凑了一些命令。有人可能能够进一步完善这个答案。我在 Windows 7 机器上的步骤：

1.  从[Ruby 安装程序](http://rubyinstaller.org/downloads/)站点安装 Ruby 2.0.0。
2.  下载 Ruby 开发工具包。
3.  将开发工具包复制到 c:\ruby200 目录并从那里运行 .exe。
4.  在 c:\ruby200 目录中打开命令提示符并键入：

    > ruby dk.rb 初始化
    > 
    > ruby dk.rb 安装

5.  现在安装 rakep 和朋友：

    > gem 安装 rake 管道
    > 
    > gem install rake-pipeline-web-filters
    > 
    > 宝石安装架
    > 
    > 宝石安装理发师

6.  此时，我能够从命令行运行 rakep。我不知道安装所有其他位对于您尝试做的事情是必要的。

# python - 在某些字符串上匹配正则表达式的 URL 非常慢

> ID：12005945
> 
> 赞同：3
> 
> 时间：2012-08-17T12:35:52.887
> 
> 标签：python, regex, url, performance

这是我在某个字符串中查找 URL 的正则表达式（我需要域的组，因为进一步的操作是基于域的），我注意到在这个示例中的某些字符串“fffffffff”非常慢，有什么明显的我遗漏了吗？

```
>>> URL_ALLOWED = r"[a-z0-9$-_.+!*'(),%]"
>>> URL_RE = re.compile(
...     r'(?:(?:https?|ftp):\/\/)?'  # protocol
...     r'(?:www.)?' # www
...     r'('  # host - start
...         r'(?:'
...             r'[a-z0-9]'  # first character of domain('-' not allowed)
...             r'(?:'
...                 r'[a-z0-0-]*'  #  characters in the middle of domain
...                 r'[a-z0-9]' #  last character of domain('-' not allowed)
...             r')*'
...             r'\.'  # dot before next part of domain name
...         r')+'
...         r'[a-z]{2,10}'  # TLD
...         r'|'  # OR
...         r'(?:[0-9]{1,3}\.){3}[0-9]{1,3}'  # IP address
...     r')' # host - end
...     r'(?::[0-9]+)?'  # port
...     r'(?:\/%(allowed_chars)s+/?)*'  # path
...     r'(?:\?(?:%(allowed_chars)s+=%(allowed_chars)s+&)*'  # GET params
...     r'%(allowed_chars)s+=%(allowed_chars)s+)?'  # last GET param
...     r'(?:#[^\s]*)?' % {  # anchor
...         'allowed_chars': URL_ALLOWED
...     },
...     re.IGNORECASE
... )
>>> from time import time
>>> strings = [
...     'foo bar baz',
...     'blah blah blah blah blah blah',
...     'f' * 10,
...     'f' * 20,
...     'f' * 30,
...     'f' * 40,
... ]
>>> def t():
...     for string in strings:
...             t1 = time()
...             URL_RE.findall(string)
...             print string, time() - t1
... 
>>> t()
foo bar baz 3.91006469727e-05
blah blah blah blah blah blah 6.98566436768e-05
ffffffffff 0.000313997268677
ffffffffffffffffffff 0.183916091919
ffffffffffffffffffffffffffffff 178.445468903 
```

是的，我知道还有另一种解决方案可以使用非常简单的正则表达式（例如包含点的单词）并稍后使用 urlparse 来获取域，但是当我们在 URL 中没有协议时，urlparse 无法按预期工作：

```
>>> urlparse('example.com')
ParseResult(scheme='', netloc='', path='example.com', params='', query='', fragment='')
>>> urlparse('http://example.com')
ParseResult(scheme='http', netloc='example.com', path='', params='', query='', fragment='')
>>> urlparse('example.com/test/test')
ParseResult(scheme='', netloc='', path='example.com/test/test', params='', query='', fragment='')
>>> urlparse('http://example.com/test/test')
ParseResult(scheme='http', netloc='example.com', path='/test/test', params='', query='', fragment='')
>>> urlparse('example.com:1234/test/test')
ParseResult(scheme='example.com', netloc='', path='1234/test/test', params='', query='', fragment='')
>>> urlparse('http://example.com:1234/test/test')
ParseResult(scheme='http', netloc='example.com:1234', path='/test/test', params='', query='', fragment='') 
```

是的，预先添加 http:// 也是一个解决方案（我仍然不能 100% 确定是否没有其他 urlparse 问题）但我很好奇这个正则表达式有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:59:12.097

我认为这是因为这部分

```
...         r'(?:'
...             r'[a-z0-9]'  # first character of domain('-' not allowed)
...             r'(?:'
...                 r'[a-z0-0-]*'  #  characters in the middle of domain
...                 r'[a-z0-9]' #  last character of domain('-' not allowed)
...             r')*'
...             r'\.'  # dot before next part of domain name
...         r')+' 
```

如果 set_of_symbols#1 和 set_of_symbols#2 具有相同的符号，则不应使用这样的构造 ([set_of_symbols#1]*[set_of_symbols#2])*。

请尝试使用以下代码：

```
...         r'(?:'
...             r'[a-z0-9]'  # first character of domain('-' not allowed)
...             r'[a-z0-0-]*'  #  characters in the middle of domain
...             r'(?<=[a-z0-9])' #  last character of domain('-' not allowed)
...             r'\.'  # dot before next part of domain name
...         r')+' 
```

它应该工作得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:01:11.073

仅供参考，您还可以使用 re.VERBOSE 标志使其更具可读性

```
 URL_RE = re.compile(r"""
    (?:(?:https?|ftp):\/\/)?                            # protocol
    (?:www.)?                                           # www
    (                                                   # host - start
        (?:
            [a-z0-9]                                    # first character of domain('-' not allowed)
            (?:
                [a-z0-0-]*                              #  characters in the middle of domain
                [a-z0-9]                                #  last character of domain('-' not allowed)
            )*
            \.                                          # dot before next part of domain name
        )+
        [a-z]{2,10}                                     # TLD
        |                                               # OR
        (?:[0-9]{1,3}\.){3}[0-9]{1,3}                   # IP address
    )                                                   # host - end
    (?::[0-9]+)?                                        # port
    (?:\/%(allowed_chars)s+/?)*                         # path
    (?:\?(?:%(allowed_chars)s+=%(allowed_chars)s+&)*    # GET params
    %(allowed_chars)s+=%(allowed_chars)s+)?             # last GET param
    (?:#[^\s]*)?
""" % {  # anchor
         'allowed_chars': URL_ALLOWED
     },
     re.IGNORECASE|re.VERBOSE
 ) 
```

# perl - 如何调试在另一个 perlscript 中使用的 perl 脚本？

> ID：12005946
> 
> 赞同：2
> 
> 时间：2012-08-17T12:35:54.110
> 
> 标签：perl, debugging

如何调试在另一个 perlscript 中使用的 perl 脚本。我们可以分别调试。是否可以一步调试？

前任：

```
!/user/bin/perl

my $param= 8;

my @res=\`perl extract.pl $config`;

print "The results is ....  @res\n"; 
```

同样，我们可以调试在 shell 脚本中使用的 perl 脚本吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T15:48:23.310

动态解决方案：

```
my $dswitch = $INC{"perl5db.pl"} ? "-d" : "";
my @res=`perl $dswitch extract.pl $config`; 
```

`$INC{"perl5db.pl"}`使用调试器时为真，不使用时为假。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:41:55.507

您可以将`-d`switch 添加到您正在调用的脚本的 shebang 行：

```
#!/usr/bin/perl -d 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T13:27:28.953

要做的“正确”事情是更改您的设计，这样您就不会通过系统命令调用其他脚本。然后你将有一个单一的调试环境。

最好的设计是将 extract.pl 制作成一个模块。

您还可以使用该`do`命令从其他文件导入代码：`do 'extract.pl'`. 那么唯一需要改变的可能就是你传入的方式`$config`。

这两种方法中的任何一种都非常易于实施，并且对于持续开发还有其他好处。也许您有充分的理由不这样做，但如果您还没有这样做，我会先考虑这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T13:06:30.047

只需调试`extract.pl`传入的值`$config`。如果您不知道它是什么，那么古老的 printf 将为您做到这一点。

```
say "\$config='$config'"; 
```

然后做：

```
perl -d extract.pl 'Stuff that printed in config'. 
```

由于两者是隔离的进程，因此唯一的通信是命令行上传递的内容和被调用脚本打印的内容。所以被调用的脚本*应该*能够在没有调用脚本的情况下进行测试。（除非你设置了某种 IPC 或共享内存或类似的东西。）

# c# - 孩子继承父母的外貌

> ID：12005948
> 
> 赞同：4
> 
> 时间：2012-08-17T12:35:55.617
> 
> 标签：c#, winforms, custom-controls, containers, onpaint

我使用[ContainerControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.aspx)作为基础创建了一个简单的自定义面板。我添加了自定义属性来创建边框和渐变背景。如果我覆盖 OnPaint 和 OnPaintBackground，则父级的所有子控件都会继承渐变和边框样式。作为一种解决方法，我使用了父母 BackgroundImage 属性，它工作正常，但有一些随机的怪癖。必须有更好的方法来解决这个问题，但我没有找到解决方案。是否有任何通过 Interop 或其他 C# 方法来解决此问题的 Window API 函数？如果是这样，请提供一个例子。

**编辑！**这是被复制的样式（丑陋的例子，但很重要）：

![在此处输入图像描述](../Images/b205ce20793a61a3c90efccfefa12fc7.png)

**编辑 2！**这是一个简单的硬编码 ContainerControl，没有所有属性、设计器属性等。

```
public class Container : ContainerControl
{
    protected override void OnPaintBackground( PaintEventArgs e )
    {
        using ( var brush = new LinearGradientBrush( e.ClipRectangle, Color.Red, Color.Blue, LinearGradientMode.Vertical ) )
        {
            e.Graphics.FillRectangle( brush, e.ClipRectangle );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:40:46.040

如果`Label`创建控件时将其`BackColor`属性设置为`Color.Transparent`，它将最终调用其父级的`OnPaintBackground()`实现。

如果您像这样修改 Jon 的示例：

```
var label = new Label { 
    Text = "Label",
    Location = new Point(20, 50),
    BackColor = Color.Transparent
}; 
```

然后您将重现该问题。

但是，有一个简单的解决方法。问题来自您创建线性渐变画笔的方式。由于您传递`e.ClipRectangle`给它的构造函数，渐变的形状将根据正在呈现的控件（容器或标签）而有所不同。另一方面，如果您传递容器的[ClientRectangle](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.clientrectangle.aspx)，那么渐变将始终具有相同的形状，结果应该是您正在寻找的结果：

```
protected override void OnPaintBackground(PaintEventArgs e)
{
    using (var brush = new LinearGradientBrush(ClientRectangle,
           Color.Red, Color.Blue, LinearGradientMode.Vertical)) {
        e.Graphics.FillRectangle(brush, e.ClipRectangle);
    }
} 
```

结果是：

![在此处输入图像描述](../Images/a2eccdfe518845109d0b0ad48f23272c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:53:42.577

初始化控件创建/加载的属性

然后“INVALIDATE”控件强制重绘控件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:01:09.487

我不能简单地在我的 Windows 7 机器上重现这个 - 这表明它可能是您在设计器中设置的属性之一。简短而完整的程序：

```
using System;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Windows.Forms;

public class GradientContainer : ContainerControl
{
    protected override void OnPaintBackground(PaintEventArgs e)
    {
        using (var brush = new LinearGradientBrush(e.ClipRectangle, 
                       Color.Red, Color.Blue, LinearGradientMode.Vertical))
        {
            e.Graphics.FillRectangle(brush, e.ClipRectangle);
        }
    }
}

class Test
{
    static void Main()
    {
        var label = new Label { 
            Text = "Label",
            Location = new Point(20, 50)
        };
        var container = new GradientContainer {
            Size = new Size(200, 200),
            Location = new Point(0, 0),
            Controls = { label }
        };        

        Form form = new Form {
            Controls = { container },
            Size = new Size(300, 300)
        };
        Application.Run(form);
    } 
} 
```

结果：

![标签没有渐变](../Images/67a5ab58d8718e5fbfc518e8c3291eef.png)

# c# - 如何在 WPF 中显示数据表？

> ID：12005950
> 
> 赞同：0
> 
> 时间：2012-08-17T12:36:05.307
> 
> 标签：c#, .net, wpf, xaml

这是我第二次使用[Windows Presentation Foundation](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)。

这就是我所拥有的。首先，我将[JSON](http://en.wikipedia.org/wiki/JSON) List<Tuple<int,date>> 对象存储在一个变量中，我可能需要将其进一步分解为一个字符串以在[XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)中显示数据。显示应该有一个用于 int 值的列和一个用于相应日期值的列。

**问题**

我很难弄清楚要使用哪种类型的控件来显示数据，例如列表视图、文本框等。显示数据的最佳选择是什么？

控件最终将需要一个滚动条，因为我将加入更多相同类型的 JSON 数组对象，只是与相邻的列。

如果不清楚，或者需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:39:27.287

你应该去，`DataGrid`因为它里面有行和列，并且可以直接提供一个集合作为它的数据源。

# assembly - 汇编语言程序中标签的放置

> ID：12005952
> 
> 赞同：0
> 
> 时间：2012-08-17T12:36:22.893
> 
> 标签：assembly

地址位置的标签可以放在汇编语言程序的中间吗？喜欢

```
 ORG 100
100      LDA SUB
101      CMA
102 SUB, DEC -23
103      INC
104      ADD MIN
105 MIN, DEC 83
106      STA DIF
107 DIF, HEX 0
108      HLT
         END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:34:13.953

我想这取决于您的汇编程序，但是使用 nasm、fasm、yasm、masm 和 gnu 作为，是的，您可以，并且您通常使用 jmp 目标等标签。

具体来说，普通标签的使用类似于`static`C 中的函数。

在 NASM 中，您标记的那些`global labelname`是从对象中导出的，可以从其他编译单元引用并由链接器链接起来。

nasm 的语法是：

```
global myfunc

myfunc:

    <stuff>

myotherlabel:

    <stuff>

    jne myotherlabel

    <stuff> 
```

# ajax - 通过敲除js中的ajax jQuery调用的MVC RedirectToAction不起作用

> ID：12005954
> 
> 赞同：9
> 
> 时间：2012-08-17T12:36:25.177
> 
> 标签：ajax, asp.net-mvc-3, knockout.js

我正在构建一个 MVC3 Web 应用程序，并且正在使用 knockoutjs。应用程序中有两个视图。SetUpNewCompany 和 ManageAccount。要设置新公司，用户首先输入帐号并单击搜索。如果帐号已经存在，用户可以单击按钮进入 ManageAccount 视图。在 SetUpNewCompanyController 中，我使用 RedirectToAction 方法进行重定向。但是，执行 ManageAccount 中的 Index2 操作时，不会显示视图。如果我输入完整的 URL，则会显示视图。

SetUpNewCompanyController.cs

```
[HttpPost]
 public RedirectToRouteResult RedirectToManageAccount(string accountNumber)
 {
        return RedirectToAction("Index2", new RouteValueDictionary(new {controller=
            "ManageAccount", companyId = "7e96b930-a786-44dd-8576-052ce608e38f" }));
 } 
```

当单击按钮时，上面的函数由下面的函数调用

```
self.redirectToManageAccount = function () {
        var accountNumber = "7e96b930-a786-44dd-8576-052ce608e38f";
        $.ajax({
            type: "POST",
            url: "/SetUpNewCompany/RedirectToManageAccount",
            data: { accountNumber: accountNumber },
            success: function (data) {
            },
            error: function () {
            }
        });
 } 
```

ManageAccountController.cs

```
public ActionResult Index2(String companyId)
    {
        var viewModel = new Models.Index();

        List<String> compList = new List<String>();
        compList.Add("MyCompany");

        List<String> usersList = new List<String>();
        usersList.Add("User1");

        viewModel.Users = usersList;
        viewModel.Companies = compList;
        viewModel.CompanyId = companyId;
        viewModel.Role = "Role1";

        return View("ManageAccount",viewModel);
    } 
```

生成的 URL 是

```
http://localhost:53897/ManageAccount/Index2?companyId=7e96b930-a786-44dd-8576-
052ce608e38f 
```

Firebug 中的控制台窗口显示

```
GET http://localhost:53897/ManageAccount/Index2?companyId=7e96b930-a786-44dd-8576-
052ce608e38f 200 OK and the spinner keeps spinng 
```

另外，如何获取下面的 URL 而不是带有查询字符串的 URL

```
http://localhost:53897/ManageAccount/Index2/7e96b930-a786-44dd-8576-052ce608e38f 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T13:02:15.103

由于您使用 AJAX 调用`RedirectToManageAccount`操作方法，因此您有责任自己处理其响应，并且由于您的`success`处理程序函数是空的，因此您实际上忽略了作为响应到达的任何内容。

如果您想从 AJAX 响应处理程序中强制重定向，我建议

1.  修改您的操作方法如下

    ```
    [HttpPost]
    public ActionResult RedirectToManageAccount(string accountNumber)
    {
        var redirectUrl = new UrlHelper(Request.RequestContext).Action("Index2", "ManageAccount", new { companyId = "7e96b930-a786-44dd-8576-052ce608e38f" });
        return Json(new { Url = redirectUrl });
    } 
    ```

2.  以这种方式更新您的 AJAX 调用

    ```
    self.redirectToManageAccount = function () {
      var accountNumber = "7e96b930-a786-44dd-8576-052ce608e38f";
      $.ajax({ type: "POST",
               url: "/SetUpNewCompany/RedirectToManageAccount",
               data: { accountNumber: accountNumber },
               dataType: 'json',
               success: function (response) {
                   window.location.href = response.Url;
               },
               error: function () {
               }
      });
    } 
    ```

至于你的第二个问题：

> 另外，如何获取下面的 URL 而不是带有查询字符串的 URL `http://localhost:53897/ManageAccount/Index2/7e96b930-a786-44dd-8576-052ce608e38f`

`RegisterRoutes()`您只需在函数中为此 URL 定义适当的路由条目：

```
routes.MapRoute(null,
                "ManageAccount/Index2/{companyId}",
                new { controller = "ManageAccount",
                      action = "Index2" }                            
); 
```

* * *

**编辑**：由于您的 AJAX 调用仅用于调用导致重定向的操作方法，您可以通过以下方式简化它，前提是您在这一点（在客户端）`companyId`已经知道：

```
self.redirectToManageAccount = function () {
    var companyId = "12345";
    window.location.href = '@(Html.ActionUri("Index2", "ManageAccount"))?companyId=' + companyId;
} 
```

我使用这种扩展方法的地方

```
public static string ActionUri(this HtmlHelper html, string action, string controller)
{
    return new UrlHelper(html.ViewContext.RequestContext).Action(action, controller);
} 
```

# c++ - static const 与 const static

> ID：12005959
> 
> 赞同：56
> 
> 时间：2012-08-17T12:36:42.403
> 
> 标签：c++, class, constants

我不明白我的 C++ 类中这两个语句之间的区别：

```
class MyClass {
  public:
  private:
     static const int var = 0;            // Option 1
     const static int var = 0;            // Option 2
}; 
```

b/w 选项 1 和选项 2 有什么区别？他们都编译。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-17T12:41:39.167

它们的意思完全相同。您可以自由选择您认为更容易阅读的内容。

在 C 语言中，您*应该*放在`static`开头，但这还不是必需的。我不确定 C++ 在这方面是否遵循 C。

> 6.11.5 存储类说明符
> 
> 1 将存储类说明符放置在声明中声明说明符的开头以外的位置已过时。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-08-17T12:57:32.000

`static`, `const`（无论如何）和类型（例如`int`）都是声明说明符的一部分。 *从历史上看*，声明说明符是关键字和类型名称的无序列表，因此：

```
static unsigned int const var;
static unsigned const int var;
static int unsigned const var;
static int const unsigned var;
static const unsigned int var;
static const int unsigned var;
unsigned static int const var;
unsigned static const int var;
unsigned int static const var;
unsigned int const static var;
unsigned const static int var;
unsigned const int static var;
int static unsigned const var;
int static const unsigned var;
int unsigned static const var;
int unsigned const static var;
int const static unsigned var;
int const unsigned static var;
const static unsigned int var;
const static int unsigned var;
const unsigned static int var;
const unsigned int static var;
const int static unsigned var;
const int unsigned static var; 
```

都是合法的，都意味着同样的事情。

我认为在 C 和 C++ 中仍然是这种情况，但如果我没记错的话，C 已经不赞成将存储类说明符 ( `static`) 放在任何位置，但放在开头。无论如何，这几乎是一个普遍的约定，因此您通常应该将`static` (and`extern`等) 放在开头。

还要注意，无序仅适用于声明说明符。在随后的声明符中，cv-qualifier(s)*必须*遵循它们所限定的；出于正交性的原因，您通常应该始终将 cv 限定符放在它们修改的内容之后（即`int const`，而不是`const int`）。

最后，在类型之前显示类型修饰符似乎是一种普遍的约定，在长度修饰符（`signed`或 `unsigned`）之前带有符号修饰符`short`（`long`或`long long`）。`int`删除if 修饰符也相当频繁，所以人们写`unsigned`, 而不是`unsigned int`, 和 `long`, 而不是`long int`。然而，这远非普遍。

鉴于此，上面的声明的第一种编写方式是首选，尽管删除`int`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-17T12:52:26.693

他们是一样的。但我总是会选择选项 1，原因很简单，即当它们定义数据类型时，它们并列时更适合关键字`const`和拟合。`int`其中关键字`static`定义了该变量的可访问性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T12:43:26.010

他们是一样的。请参阅此讨论：[http ://bytes.com/topic/c/answers/140177-const-static-vs-static-const](http://bytes.com/topic/c/answers/140177-const-static-vs-static-const)

# windows - 维姆。对保存在 Windows 中的文件进行编码的问题

> ID：12005971
> 
> 赞同：1
> 
> 时间：2012-08-17T12:37:13.403
> 
> 标签：windows, vim, encoding

每次在 Windows 中为某些文件夹保存文件后，我都会有��个字符。对于其他一些文件夹 - 一切都很好。我找不到一切都很好的文件夹和保存有坏结局的文件的文件夹之间的区别。所以我`dos2unix`每次都必须在我的linux虚拟机上运行修改过的文件。由于这些文件是`javascript`- 这很烦人！

帮帮我，在哪里挖？如何避免在文件末尾出现���字符？

`:set fileencoding=utf-8`没有帮助。

通常 vim 用于 dos 文件 -`[dos]`缓冲区窗口底部的标签 - 在我的情况下一切都很好，`[dos]`那里没有标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:04:54.750

这看起来更像是文件格式问题而不是编码问题。我建议将此添加到您的`~/_vimrc`：

```
set fileformat=unix
set fileformats=unix,dos
set nobinary 
```

您可以在中找到更多详细信息`:help fileformat`

# jsf-2 - 如何在 PrimeFaces 中以编程方式创建对话框？

> ID：12005976
> 
> 赞同：3
> 
> 时间：2012-08-17T12:37:38.107
> 
> 标签：jsf-2, primefaces

如何在 Primefaces 中以编程方式创建对话框？

我有一个名为 tree.xhtml 的页面，其中包含`<p:tree/>`一个树节点和一个带有右键单击上下文菜单选项的选择`bean.edit()`方法。

当用户单击该`bean.edit()`方法时，我希望该方法以编程方式显示一个对话框，并且我希望能够创建输入元素或具有多个元素和一个提交按钮的下拉组合框。我已经查看了用户指南，但没有看到这样的示例，所以我希望你们可以在这里告诉我如何操作。

提前谢谢了。

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:00:28.843

如果您想以编程方式触发对话框的显示，您可以使用该`visible`属性来执行此操作：

您在 xhtml 中的对话框：

```
<h:form id="myForm">
    <p:dialog id="myDialog" header="The Dialog" visible="#{backingBean.showDialog}">  
    ...
    </p:dialog>
</h:form> 
```

你的支持bean：

```
@ManagedBean
@RequestScoped
public class BackingBean{
    private boolean showDialog;

    public void displayDialog() {
        showDialog = true;
    }

    public boolean getShowDialog() {
        return showDialog;
    }
} 
```

您的触发器，例如命令按钮：

```
<p:commandButton value="Show dialog" action="#{backingBean.displayDialog}" update=":myForm" /> 
```

# shopify - 如何在shopify结帐页面的第2步上预先填写选择运输方式下拉菜单？

> ID：12005981
> 
> 赞同：2
> 
> 时间：2012-08-17T12:37:56.770
> 
> 标签：shopify

我想标题几乎解释了我想要做什么。

问题是我们必须根据运输方式提供一些选项，因此我们为此开发了一个自定义应用程序，并在结帐页面上提供了选项。（下面的屏幕截图）

![在此处输入图像描述](../Images/b3774be6ee8305d48a3dd533c1863618.png)

现在，当用户点击结帐并进入 Shopify 结帐页面时，他必须在结帐页面的第 2 步再次选择运输方式。

![在此处输入图像描述](../Images/e1d129b7eb2cc04bfa10a014c716ac40.png)

那么有没有办法根据用户的选择预先填写所选的运输方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:15:36.737

您不能使用自己的代码对结帐进行编程。所以简短的回答可能不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T18:04:03.540

我遇到了这个确切的问题。我们的商店提供免费的本地送货或 FedEx 送货服务。如果用户在购物车页面选择 FedEx 送货，则 Shopify 结帐页面默认选择“本地免费送货”。

我通过在 Shopify 中创建一个名为“免费送货”的假冒产品来解决这个问题。然后，如果用户选择本地送货，我会使用 Shopify 购物车 API 将此商品添加到用户的购物车中。我将“免费送货”产品的重量设置为 1000 磅。然后，我将“免费本地送货”运输方式设置为对 1000 - 9999 磅有效。常规 FedEx 递送适用于不超过 999 磅的订单。

这是一个严重的黑客攻击，但似乎有效。用户仍然会在结帐时看到送货方式下拉菜单，但根据购物车页面上选择的送货方式，只有正确的选项可用。

Shopify Ajax API（用于将商品添加到购物车）： [http ://docs.shopify.com/support/your-website/themes/can-i-use-ajax-api](http://docs.shopify.com/support/your-website/themes/can-i-use-ajax-api)

注意：在将虚假免费送货商品添加到购物车时，我还必须通过一些 javascript 扭曲来向购物车页面添加一个新的“updates[]”表单字段。如果没有此字段，Shopify 会抱怨在提交购物车表单时收到错误数量的更新数量。

# ios - 关闭 modalViewController 并呈现另一个的方法

> ID：12005984
> 
> 赞同：0
> 
> 时间：2012-08-17T12:38:09.143
> 
> 标签：ios, modalviewcontroller

问题是：我有`modalViewController`一个按钮可以触发 IBAction，如下所示：

```
-(IBAction)myMethod
{
    [self dismissModalViewControllerAnimated:YES];

    if([delegate respondsToSelector:@selector(presentOtherModalView)])
    {
        [delegate presentOtherModalView];
    } 
} 
```

在作为委托的根视图中，`modalViewController`我已经实现了`presentOtherModalView`委托方法，它看起来像这样：

```
 -(void)presentOtherModalView
{

     AnotherViewController *viewInstance = [[AnotherViewController alloc]initWithNibName:@"AnotherViewController" bundle:nil];

     viewInstance.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

     [self presentModalViewController:viewInstance animated:YES];

    [viewInstance release];
} 
```

问题是第二个`modalViewController`没有被呈现。它给了我信息`wait_fences: failed to receive reply: 10004003`......应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:53:39.230

因为它们是在彼此之后执行的（它们不会等待视图消失/出现），所以它不会被执行。因为屏幕上一次只能有一个 ModalViewController，所以您必须先等待另一个 ModalViewController 消失，然后才能将下一个 ModalViewController 放到屏幕上。

你可以按照自己的方式创造性地做到这一点，但我这样做的方式是这样的：

```
[self dismissModalViewControllerAnimated:YES];
self.isModalViewControllerNeeded = YES; 
```

然后在底层的 ViewController 中，在 viewDidAppear 方法中，我这样做：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    if (self.isModalViewControllerNeeded) {
        [self presentModalViewController:viewInstance animated:YES];
        self.isModalViewControllerNeeded = NO;
    }
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:47:46.587

这是因为`dismissModalViewControllerAnimated`动画关闭需要一些时间，并且您在关闭第一个模态视图之前调用另一个视图作为模态视图呈现，因此呈现模态视图调用被拒绝。当您完全关闭后不在视图上时，您不应该执行动画，只有您可以调用另一个视图。要解决此问题，请使用时间间隔在 2 或 3 秒后调用当前模式视图，或使用完成块`dismissModalViewControllerAnimated`

您可以通过使用它来实现它

```
[delegate performSelector:@selector(presentOtherModalView) withObject:nil afterDelay:3]; 
```

# ruby-on-rails - 特定区间/范围内的映射数组

> ID：12005988
> 
> 赞同：0
> 
> 时间：2012-08-17T12:38:16.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

为什么映射不使用此函数更改数组：

```
array[1..5].map! { |part| "<p>#{part}</p>" } 
```

我知道我可以将 array[1..5] 分配给结果，但可能有更好的方法来做到这一点。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:41:45.553

> ### [](*args)
> 
> 返回一个填充了给定对象的新数组。
> 
> [资源](http://www.ruby-doc.org/core-1.9.3/Array.html#method-c-5B-5D)

因此，您实际上是在应用`map!`该范围的新数组，而不是实际数组。

分配是必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:42:30.767

好吧，它*确实*改变了数组。您只是没有看到它，因为您从未将数组分配给任何东西，因此它将立即再次被垃圾收集。

# wordpress - Having issue with WordPress wp_enqueue_style

> ID：12005989
> 
> 赞同：0
> 
> 时间：2012-08-17T12:38:22.217
> 
> 标签：wordpress, wordpress-theming

I am building a full design into `WordPress` for the first time and I am trying to load in stylesheets and script files but all I seem to be getting is the text output of the location.

What I have is below..

```
wp_enqueue_style('reset', bloginfo('template_url') . '/reset.css');
wp_enqueue_style('style', bloginfo('stylesheet_url'), array('reset'));
wp_enqueue_style('rhino', bloginfo('template_url') . '/rhinoslider-1.05.css', array('reset','style')); 
```

Do I need to put this inside the `link` tags or something? I thought it would do it all itself; as what's the point loading it that way if it doesn't do it itself? I know it makes sure the same file isn't included twice or something, but if you have to include the link tags yourself and then WP decides not to include the file then you are left with blank link tags!?

Lastly, should I set these up beforehand so I can just call them via their handles? If so, where? `functions.php?`

**Edit:** I also tried putting the below in my themes `functions.php` file but got the same results.

```
add_action( 'after_setup_theme', 'mmw_new_theme_setup' );

function mmw_new_theme_setup() {

    /* Add theme support for post formats. */   
    add_theme_support( 'post-formats' );

    /* Add theme support for post thumbnails. */    
    add_theme_support( 'post-thumbnails' );

    /* Add theme support for automatic feed links. */   
    add_theme_support( 'automatic-feed-links' );

    /* Add theme support for menus. */  
    add_theme_support( 'menus' );

    /* Load style files on the 'wp_enqueue_scripts' action hook. */
    add_action( 'wp_enqueue_scripts', 'mmw_new_load_styles' );

}

function mmw_new_load_styles() {

    $foo = bloginfo('template_url') . '/reset.css';
    $bar = bloginfo('template_url') . '/rhinoslider-1.05.css';

    wp_enqueue_style('reset', $foo);
    wp_enqueue_style('style', bloginfo('stylesheet_url'), array('reset'));
    wp_enqueue_style('rhino', $bar, array('reset','style'));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:55:52.197

When storing values in a variable via PHP use:

> get_bloginfo()

So your new function would now look like:

```
function mmw_new_load_styles() {

    $foo = get_bloginfo('template_url') . '/reset.css';
    $bar = get_bloginfo('template_url') . '/rhinoslider-1.05.css';

    wp_enqueue_style('reset', $foo);
    wp_enqueue_style('style', bloginfo('stylesheet_url'), array('reset'));
    wp_enqueue_style('rhino', $bar, array('reset','style'));

} 
```

And be more semantic! It makes code for beginners easier to look at. ($foo could be $resetCssUrl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:15:42.143

I was having similar issues.

The register / enqueue scripts are so that you can globally assign your functions to load in the correct order. You can call them from the page that your working in but it is considered better practice do it this way.

My template has a functions.php but its nealry empty! It sepreates the scripts into 7 subchapters, theme-options, theme-functions, themes-js, etc. Here is my themes.js.php file but this could quite easily placed in your file inside your wp-content/themes/functions.php [My themes-js.php file](http://snippi.com/s/xgfqts4)

# mysql - MySQL：比较日期字符串？

> ID：12005992
> 
> 赞同：3
> 
> 时间：2012-08-17T12:38:34.587
> 
> 标签：mysql, date

我有一列是一个字符串，它包含这样的值：`11.05.2012 05:22:12`

现在我想获取该列中包含 a`date <= 30.09.2011`的所有行。我试过

```
DATE_FORMAT(my_column_with_the_string_date, "%Y-%m-%d") <= '2011-09-30' 
```

但这失败了（不返回任何结果）。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T12:43:07.007

您需要的是`STR_TO_DATE()`功能。

```
SELECT
*
FROM yourTable
WHERE
STR_TO_DATE(my_column_with_the_string_date, '%d.%m.%Y') <= '2011-09-30' 
```

[在此处](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_str-to-date)阅读更多相关信息。

# java - Java/Eclipse：如何为 JUnit 测试配置运行配置的类路径？

> ID：12005993
> 
> 赞同：3
> 
> 时间：2012-08-17T12:38:38.220
> 
> 标签：java, eclipse, junit, classpath

我有一个具有以下目录结构的 Eclipse 项目：

```
MyProj/
    src/main/java/
        com.me.myproject.widgets
            Widget.java
    src/main/config
        widget-config.xml
    src/test/java
        com.me.myproject.widgets
            WidgetTest.java
    src/test/config
        widget-test-config.xml 
```

该类`Widget`从类路径上的任何位置读取其配置 (XML) 文件并使用它来配置其属性。

当我`WidgetTest`右键单击文件并转到`Run As >> JUnit Test`. 我假设我必须将它作为自定义的*运行配置*实际运行，并使用它自己配置的类路径，但我不确定这一点，因为我以前从未这样做过。

有谁知道我如何让自定义运行配置`WidgetTest.java`作为 JUnit 测试运行，并成功放置`src/test/config/widget-test-config.xml`在类路径上？提前致谢！

请注意，这个问题**不是**关于如何从运行时类路径中读取资源，而是关于如何首先在 Eclipse 的 JUnit Run Config 类路径中获取它！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T12:50:42.027

我的印象是，只要您有`src/test/config/widget-test-config.xml`Eclipse 认为是源文件夹的内容，它就应该已经在类路径中。

src/test 是 Eclipse 的源文件夹吗？如果是这样并且您仍然遇到问题，请尝试以下实验：

如果将 widget-test-config.xml 复制到 src 根目录下，Widget 类可以读取它吗？

## 如果是

那么这是测试文件夹不在类路径上的问题，您可能想尝试像这样手动添加它。

右键单击 WidgetTest 并选择`Run As -> Junit Test`。这应该会自动创建一个可在`Run -> Run Configurations`. 您修改它的 Classpath 条目以添加包含 .xml 文件的项目，如下所示：

![在此处输入图像描述](../Images/8413f9ce0c2dd1b71dbd67119d1d0bca.png)

## 如果不

如果，即使在将 .xml 文件移动到 src 根目录（即默认包）之后，您的小部件类也无法读取它，那么还有其他问题。在这种情况下，如果您可以在尝试读取 .xml 文件的 WidgetTest 中提供代码片段，那就太好了。

# 工作代码

这是一些工作代码：

```
public class A {

    @Test
    public void test() {
        InputStream stream = A.class.getResourceAsStream("/SomeTextFile.txt");
        System.out.println(stream != null);
        stream = Test.class.getClassLoader()
            .getResourceAsStream("SomeTextFile.txt");
        System.out.println(stream != null);
    }

} 
```

以上在一个简单的 JAVA 项目中对我有用并且运行良好。（运行良好意味着在控制台上打印“真实”）

我正在为您创建一个 GITHub 存储库，以便您轻松地试用此代码。

## 带有测试项目的 GIT Hub 存储库

您应该能够在**[此](https://github.com/ajorpheus/stack-overflow/zipball/master)**zip 中导入项目并查看代码是否正常工作。右键单击 Test 类`A`并单击`Run As -> Junit Test`，您应该`true`会在控制台中看到两个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:50:13.657

如果您的 WidgetTest 类是作为 JUnit 测试编写的，eclipse 将尝试自动将其作为 Junit 测试运行。如果没有，您应该右键单击包资源管理器中的类，选择运行方式 >> 运行配置 >> 选择 Junit

要运行 Junit 测试：

*   在 JUnit3 中，该类应实现 TestCase 并且所有方法名称应以“test”开头

*   在 JUnit4 中，所有方法之前都应该有一个 @Test 注解

将该配置文件放置在类路径中：如上所述设置运行配置时，转到右上方窗格中的“参数”选项卡，并在 VM 参数中指定类路径：

```
 -cp .:/path/to/the/config/file 
```

但是，如果该文件位于源目录的包中，则它应该自动包含在类路径中。

# c# - 如何根据 numericupdown 值设置计时器？

> ID：12005995
> 
> 赞同：1
> 
> 时间：2012-08-17T12:38:49.613
> 
> 标签：c#, timer, numericupdown

我有一个程序设置有 3 个 numericupdowns。它们的名称是 secondsN、minutesN 和 hoursN。我想根据 numericupdowns 的值设置一个计时器。

示例：如果 secondsN 的值为 3，那么我希望将时钟设置为 3 秒，我认为是 3000 毫秒。

那么我该怎么做呢？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T12:41:54.023

您可以将它们组合成一个`TimeSpan`. 然后使用该`TotalMilliseconds`属性。

```
int numberOfHours, numberOfMinutes, numberOfSeconds;
var timeSpan = new TimeSpan(numberOfHours, numberOfMinutes, numberOfSeconds);
myTimer.Interval = timeSpan.TotalMilliseconds; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:42:23.780

怎么样

```
Timespan ts = new Timespan(
              Convert.ToInt32(value_from_hoursN), 
              Convert.ToInt32(value_from_minutesN),
              Convert.ToInt32(value_from_secondsN));

Then double interval  = ts.TotalMilliSeconds; 
```

# split - 图像标题和拆分的排版问题

> ID：12005999
> 
> 赞同：1
> 
> 时间：2012-08-17T12:38:57.897
> 
> 标签：split, typo3, typoscript

我遇到了挑战，从现在开始就找不到解决方案。

```
renderObj = COA
renderObj {
    10 = TEXT
    10 {
        cObjNum = 1
        field = image
        split {
            token = ,
            cObjNum = |*| 10 || 20 |*|
            10.current = 1
            10.wrap = <li><a href="#"><img ref="uploads/pics/|" src=
            20.current = 1
            20.wrap = "uploads/pics/|" /></a><span>{CAPTION-GOES-HERE}</span></li>
        }
    }
} 
```

如您所见，我拆分了图像，第一个是 jQuery 对象“ref”，第二个是 Preview-Image。现在我需要得到两个图像之一的标题，不管哪个。

我真的很高兴我能得到的每一个小提示。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:20:54.657

没有测试它，但我想应该可以完成这项工作。

```
renderObj = COA
renderObj {
    10 = TEXT
    10 {
        field = image
        split {
            token = ,
            cObjNum = 1
            1.current = 1
            1 {
              10 = TEXT
              10.value = <img ref="uploads/pics/{current:1}" src="uploads/pics/{current:1}" />
              10.insertData = 1
              10.wrap = <a href="#">|</a>
              20 = TEXT
              20.field = field_name_where_your_captions_are
              20.listNum.data = REGISTER:SPLIT_COUNT
              20.wrap  = <span>|</span>
              wrap = <li>|</li>
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:57:50.260

它有点长，因为我试图将它划分为逻辑结构并使用`IMG_RESOURCE`对象，即使它们在您的情况下不是必需的（尽管如果您将来想对这些图像进行一些处理，您将需要它）。

```
renderObj = COA
renderObj {
  wrap = <li>|</li>

  10 = COA
  10 {
    wrap = <a href="#"><img|/></a>

    10 = IMG_RESOURCE
    10 {
      file {
        import = uploads/pics/
        import.field = image
        import.listNum = 0
      }
      stdWrap.noTrimWrap = | ref="|"
    }

    20 = IMG_RESOURCE
    20 {
      file {
        import = uploads/pics/
        import.field = image
        import.listNum = 1
      }
      stdWrap.noTrimWrap = | src="|" |
    }
  }

  20 = TEXT
  20 {
    field = imagecaption
    listNum = 0
    listNum.splitChar = 10
    wrap = <span>|</span>
  }
} 
```