# StackOverflow 问答 11696000-11696999

# android - 在 Eclipse Juno 中升级 Ant

> ID：11696001
> 
> 赞同：0
> 
> 时间：2012-07-27T21:39:09.177
> 
> 标签：android, ant, code-coverage

我正在尝试运行测试并获得我开发的 Android 应用程序的覆盖率，因为这是出于研究目的，我还希望能够获得被调用的 Android 源代码的覆盖率以及我正在测试的应用程序的覆盖率. [我在我提出的另一个问题](https://stackoverflow.com/questions/11677754/eclipse-with-adt-junit-test-not-running-with-eclemma)上遵循了一些建议，目前正在尝试使用 Ant。

我跑了

```
ant emma debug install test 
```

在我的测试中，但它给了我以下错误：

```
BUILD FAILED
/scratch/android-sdk-linux/tools/ant/build.xml:377: The Android Ant-based build
system requires Ant 1.8.0 or later. Current version is 1.7.1 
```

我上网直接从Apache官网安装了最新版本的Ant，现在发现需要升级SDK目录下的Ant版本。我不只是简单地复制和粘贴，因为我有一种感觉，在调用上述命令时可能会调用配置中的路径。

我想知道是否有办法专门更新Android SDK中包含的Ant版本？

谢谢。

编辑：我尝试将 Eclipse Juno 中的 Ant 类路径更改为存储 Ant 1.8.4 版本的位置。但是，我仍然收到当前版本 1.7.1 的错误。在这一点上，我确信我可能需要在 Eclipse 中的某个地方更改设置才能使其正常工作，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:50:16.377

我不确定，如果我们只是使用不同的 SDK，但我的 android SDK 本身不包含任何蚂蚁 :)

只是一些 ant 构建文件，但使用的是正常安装的 ant。因此，我假设您在升级 ant 时做错了。如果您在控制台中输入，`ant -v`它应该会打印出版本。只要此版本不大于或等于 1.8.0，升级就会出现问题。

# css - 背景图像居中和 div 元素位置基于相对于主 bg 图像的百分比

> ID：11696003
> 
> 赞同：0
> 
> 时间：2012-07-27T21:39:18.583
> 
> 标签：css, css-position, center, percentage

我有一个 CSS 背景图像，无论浏览器大小如何，它都会保持居中。使用的图像不会拉伸浏览器的整个宽度。在这种情况下，我需要我也放置在 CSS 中的 div 以及背景图像和链接，以保持它们相对于背景图像的位置，无论浏览器大小如何，都保持居中。

我已经涉足了。

```
position:relative; 
```

但它级联所有元素并且不允许我正在寻找的特定定位。这是我正在使用的代码。我感谢对我的新手问题的任何见解，并期待了解它如何表现得更好。

当在不同大小的浏览器上查看这段代码时，背景图像不跨越整个宽度，元素会四处移动，因为它们被设置为百分比。我需要他们留在原地，但要以背景为中心。我不确定如何用 CSS 编写它，并且已经为此苦苦挣扎了一段时间。感谢您对此特定问题的任何指导。

```
body {
    background:#000 url(bg.jpg) no-repeat center 0;
}
#logo {
    margin: 0px 11%;
    padding: 0;
    position:absolute;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:21:01.773

尝试将要放在它旁边的元素分组到一个 div ~say container~ 中，并将背景设置为 div。然后将 div ~container~ 位置设置为相对并居中。

然后使用 ~container~div 的绝对位置和左上右下属性对齐其他元素。

这是它的代码

```
 <div id="container">
     <div id="element1"></div>
     <div id="element1"></div>
 </div>

<style type="text/css">
  #container {
      background:#000 url(bg.jpg) no-repeat center 0;
      width: 800px; height: 400px
      position: relative;
      top: 50%; left: 50%;
      margin-top: -200px; margin-left: -400px }
  #element1 {
      position: absolute;
      top: -30px; left: -20px;}
  #element2 {
      position: absolute;
      top: 410px; left: 820px;}
</style> 
```

# wpf - “测量”的性能问题

> ID：11696008
> 
> 赞同：3
> 
> 时间：2012-07-27T21:39:59.253
> 
> 标签：wpf, performance, c#-4.0, gpu, performance-testing

我在我的应用程序中遇到了性能问题。本质上，我单击一个按钮，列表中填充了数据绑定数据（由于大量数据，这是虚拟化的），然后单击另一个按钮，该按钮将向关联的列表视图中添加一行。我之所以含糊不清，是因为我认为有必要说明 UI 中实际发生的事情有多么少。

这是我所知道的：

*   我在运行 Win 7 Pro 的强大开发计算机上，也没有在具有不错规格的 XP SP3 机器上看到这个问题。我只在运行 Win 7 企业版、4 GB RAM 和 Core i5 CPU（比 XP 台式机强大得多）的特定品牌笔记本电脑（联想 ThinkPad）上看到它。
*   由于上述发现，我不认为这是代码问题。
*   我使用 Microsoft 的 PerfView 工具进行了分析，并注意到我认为**对 UIElement.Measure 的大量调用**（我们的代码从未直接调用过），这是我在其他机器上分析时看不到的。
*   笔记本电脑的分辨率为 1360x780，所以我认为可能是小分辨率导致 GPU 不必要地渲染控件，因为我可能正在执行一些数据绑定（这可能解释了对 Measure() 的大量调用）。我将笔记本电脑的显示屏扩展到我的 24 英寸显示器，但没有看到任何改进。

现在我假设问题出在 GPU 上。我已经更新了驱动程序，没有任何改进。

1.  即使我认为这不是代码问题，是否有相当于“SuspendLayout()”的WPF
2.  有没有办法分析 GPU 性能以查看它是否在某些过程中受到锤击
3.  （远景）有没有人遇到过类似的性能问题，似乎是特定于计算机的，以及如何追踪它们的建议？

对不起，如果这是一个模糊的问题。我试图使其符合 SO 的使用要求。如果您想了解更多信息，请告诉我。

就像附录一样：该程序使用的是 WPF，C# 4.0，问题似乎与 Telerik 控件有关（尽管我不认为它们是可疑的，因为我们在其他地方使用它们没有问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:24:27.607

原来它是由一个已知​​的微软问题引起的。我会试着解释，但我不会。主要是我做不到。

[关于修复的文章](http://social.msdn.microsoft.com/Forums/en/windowsaccessibilityandautomation/thread/6c4465e2-207c-4277-a67f-e0f55eff0110)（参见 Viðar 于 2010 年 8 月 3 日发布的帖子）：

Microsoft 修补程序站点：http: [//support.microsoft.com/kb/2484841/en-us](http://support.microsoft.com/kb/2484841/en-us)

修复： http: [//archive.msdn.microsoft.com/KB2484841/Release/ProjectReleases.aspx? ReleaseId=5583](http://archive.msdn.microsoft.com/KB2484841/Release/ProjectReleases.aspx?ReleaseId=5583)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-12T21:56:17.460

**1.回答**

为了防止`MeasureOverride`来自 WPF 的猖獗调用`ContextLayoutManager`：

```
protected override void OnChildDesiredSizeChanged(UIElement el)
{
    /* base.OnChildDesiredSizeChanged(el); */       // avoid rampant remeasuring
} 
```

**2.相关引用**

> [**`UIElement.OnChildDesiredSizeChanged(UIElement) Method`**](https://docs.microsoft.com/en-us/dotnet/api/system.windows.uielement.onchilddesiredsizechanged) **...**
> 该`OnChildDesiredSizeChanged(UIElement)`方法具有调用`InvalidateMeasure()`自身的默认实现。一个典型的实现是：做你自己的元素支持的任何优化，然后通常`OnChildDesiredSizeChanged(UIElement)`从代码分支的*a̲t̲ l̲e̲a̲s̲t̲ o̲n̲e̲调用 base ...*

...这意味着（和事实）是，对于由其任何***一个***子级发起的任何单个父级布局传递，父`MeasureOverride`级将被额外调用一次 - 并且可能是额外的 - 为其***每个***子级调用一次尺寸也发生了变化。

**3\. 讨论**

在多个孩子“同时”改变他们的大小的情况下，父母通常会在***第一次***调用期间完全检测并考虑*所有*孩子之间的新整体布局。这是**WPF**中的标准做法，并且通过故意排除某些特定触发子项的任何指示来鼓励。除了在最常见的情况下没有这样的孩子（有关详细信息，请参见[上面的链接](https://docs.microsoft.com/en-us/dotnet/api/system.windows.uielement.onchilddesiredsizechanged)）这一事实之外，它还使尝试任何类型的“部分布局”的代码变得繁琐。*但大多数情况下，为什么在没有首先获得所有*最新可用测量值的情况下进行任何布局计算？****`MeasureOverride(…)`****

 *****所以我们看到，在一个`MeasureOverride`调用之后，由恰好是“第一个”的任何一个孩子触发（这不重要），父母的布局实际上应该是关于其***所有***最新的孩子大小信息的最终布局。但这并不意味着任何排队`OnChildDesiredSizeChanged`的通知——对于其他大小也发生了变化的孩子——已经消失了。这些调用仍在父进程中等待处理，除非明确放弃虚拟基本调用（*如项目符号 #1 所示*），否则每个调用都会生成一个额外的、现在无关的`MeasureOverride`调用。

**4\. 警告**

此处显示的代码禁用*a̲l̲l̲*子发起的度量无效，这适用于父母故意禁止此类更改或天生就已经知道它们的情况。这并不少见；例如，它包括任何始终完全确定和强制其子级大小的父级，或更一般地，任何仅`DesiredSize`在其自己的度量传递期间采用其子级的值的父级。重要的是仅*由其自己*的父级充分保证对父级的测量。

父母可能希望取消*一些*儿童发起的措施通知而保留/允许其他通知的情况自然将取决于其他特定情况。看起来比较晦涩，这里就不一一赘述了。*****

# objective-c - Objective-C - 如何获取日期格式化程序以在时区偏移中添加冒号

> ID：11696009
> 
> 赞同：2
> 
> 时间：2012-07-27T21:40:17.447
> 
> 标签：objective-c, ios, nsdate

我正在尝试格式化日期以匹配服务器端预期的格式。

*   通缉：1985-01-24T00:00:00-07:00
*   得到：1985-01-24T00:00:00-0700
*   使用：yyyy-MM-dd'T'HH:mm:ssZZZ

我可以使用日期格式技巧来获取该冒号吗？

这是我的代码。_birthdate 是生日选择器提供的日期：

```
NSDate *birthdate = (NSDate *)resultObject;
[_birthdate setNewTitle:[IRDate mmddyyFromNSDate:birthdate]];            

//Set server-ready birthdate format
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZ"];
serverFormattedBirthDate = [formatter stringFromDate:birthdate];

NSLog(@"Birthdate: %@", serverFormattedBirthDate); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:45:37.927

根据[Date Format Specifiers](http://unicode.org/reports/tr35/#Date_Format_Patterns)文档，看起来您需要 5 `Z`。这会让你得到类似的东西`"-08:00"`。

* * *

啊哈，我明白你在说什么。如果你在 OS X 10.8 上运行格式化，你会得到你期望的字符串。但是，如果您在 iOS 5.1 上运行格式化，您将在字符串中获得额外的“GMT”。

我猜想在最新版本的 CLDR 中基础数据发生了变化。在那种情况下，我不确定正确的答案是什么。

# objective-c - 防止自定义 MFMailComposeViewController 背景图像

> ID：11696010
> 
> 赞同：0
> 
> 时间：2012-07-27T21:40:19.810
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationbar, mfmailcomposeviewcontroller

目前，我们正在使用这段代码在整个应用程序中自定义 UINavigationBar 背景图像：

```
@implementation UINavigationBar(MyExtensions)

- (UIImage *)barBackground {
    return [UIImage imageNamed:@"GlobalTitleBackground.png"];
}

- (void)didMoveToSuperview {
    //iOS5 only
    if ([self respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)])
    {
        [self setBackgroundImage:[self barBackground] forBarMetrics:UIBarMetricsDefault];
    }
}

//this doesn't work on iOS5 but is needed for iOS4 and earlier
- (void)drawRect:(CGRect)rect {
    //draw image
    [[self barBackground] drawInRect:rect];
}

@end 
```

一般来说，这很好用。我遇到的问题是，当我创建 MFMailComposeViewController 时，它的背景也会被自定义。

因此，考虑到我现在拥有的代码，是否有可能对**除 MFMailComposeViewController 创建的 UINavigationBar 之外的**所有 UINavigationBars 进行自定义？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:07:51.200

一种解决方案是使用 view.tag 属性过滤掉特定的导航控制器。

当您创建 MFMailComposeViewController 以向导航栏添加标签时。

例如：

```
//In other VC
MFMailController *mailVC = [[MFMailController alloc] init];
mailVC.navigationBar.tag = 5678;

//In @implementation UINavigationBar(MyExtensions)
- (UIImage *)barBackground {
    if (self.tag != 5678)
        return [UIImage imageNamed:@"GlobalTitleBackground.png"];
    }
    return nil;
} 
```

# c# - 在页面之间传递大量数据不会在 wp7 中加载页面

> ID：11696012
> 
> 赞同：0
> 
> 时间：2012-07-27T21:40:48.920
> 
> 标签：c#, windows-phone-7, parameter-passing, textblock

我正在尝试将页面之间的一些文本传递给文本块。它适用于少量数据，但页面不会加载大量数据。

第 1 页：

```
NavigationService.Navigate(new Uri("/Pages/DetailPage.xaml?gameGuide=" + gameGuide, UriKind.Relative)); 
```

第2页：

```
if (NavigationContext.QueryString.TryGetValue("gameGuide", out gameGuide))
    guideTxtBlk.Text = gameGuide; 
```

数据源来自我下载到第 1 页的 XML 文件。

以下是有效的数据量：

> 在“Project Nova”关卡中，与英国人战斗并逃跑后，必须设置炸药。确保在种植之前清除所有敌人。杀死第一个房间的敌人后应该有一把莫辛纳甘枪。这应该可以帮助您清除第二个房间的敌人，尤其是较高走道上的敌人。您可以通过金属光栅拍摄。设置炸药后，射击突出显示的光束并出去。当你出去的时候，在你右边的门外会有一个敌人，另一个在你的左边。杀死这两个，然后冲向人行道。会有更多的敌人爬上船，但你应该没有问题杀死他们并继续前进。最后一个敌人应该在高处，所以要预先警告。如果您在此运行期间的任何时间死亡，

这是一个不起作用的：

> 这是在招募难度下最容易做到的，并且在“大规模杀伤性武器”级别上完成。您将控制 SR71 飞机上的调度员和地面上的一名士兵，不时在他们之间切换。要放大，请按 (LT)，要缩小，请按 (RT)。要命令你的小队去哪里，请在该位置按 (A)。使用 (LS) 在该区域周围移动光标。在屏幕上找到小队后，您将获得一个位于您东边的插入点，标记为“1602”。在您听到车辆从北方进来后，您将被告知将您的团队放入标有“安全屋”的建筑物中。用 (A) 选择安全屋。您将被置于士兵的场景中，以杀死进入房屋的敌人。在与进入大楼的敌人相遇后，您将被重新交到调度员手中。确保所有 4 名队友都在屏幕上存活。在此之后，选择安全屋大楼的背面。在右侧，您会看到桶旁边有两个敌人。滚动这些敌人并使用 (A) 选择它们，让您的团队攻击它们。在它们的正后方是一个客观点。选择目标点，以便您的团队移动到该位置。之后，您将在该插入点下方获得另一个插入点。您将在当前位置和目标点之间看到灌木丛。选择带有 (A) 的灌木，让您的团队移动到那里（您应该距离插入点 500-600 远）。在他们移动后，您的派遣会立即告诉您一大群敌人正在附近。您将被告知按住（RS）以使您的团队进入俯卧位置并且不会被敌人看到。搞定一切后，将您的团队移动到他们正前方的目标，您将获得一个标有“兵营”的目标。屏幕上的标线应变为红色，因此使用 (A) 选择兵营以使其移动到位。现在您将重新回到士兵的视野中。消灭在建筑物内发现的所有敌人，并确保在前面尽可能多地承受向您和您的队友射击的火力。在这一切结束时，你应该让你的所有四个队友都和你在一起。您需要清理最后一个房间，放置并引爆 C4 并使其穿过军营。离开军营后，您将获得一个新的插入点，所以在那里指导你的团队。当您到达建筑物外的第二个插入点时，您已经安全地引导了小队而没有杀死他们。确保在您控制您的团队时，没有任何车辆将您视为您的团队在地面上行驶将立即被淘汰。如果他们被淘汰，您将需要重新开始整个任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:05:13.397

URI 有一个最大长度。我认为它大约是 2000 个字符。您可能应该采用不同的方法在页面之间传递数据。使用全局变量，将数据放在 ViewModel 中，或者从 PhoneApplicationService/IsolatedStorage 保存和检索是一些选项。

# qtwebkit - 如何检测来自 QtWebKit 的表单重置按钮的点击？

> ID：11696014
> 
> 赞同：0
> 
> 时间：2012-07-27T21:40:57.063
> 
> 标签：qtwebkit

查看**QtWebKit API**中的信号，我没有找到任何对我来说似乎是我正在寻找的东西。

*   [`QWebView`](http://qt-project.org/doc/qt-4.8/qwebview.html)
    *   `linkClicked()`似乎是最接近的，但重置按钮没有链接，并且绝对不指向 URL。
*   [`QWebPage`](http://qt-project.org/doc/qt-4.8/qwebpage.html)
    *   我考虑了以下信号（根据它们的名称判断），但根据它们的描述，它们都不符合我的目的：`contentsChanged()`, `contentsChanged()`, `contentsChanged()`, `selectionChanged()`。
*   [`QWebFrame`](http://qt-project.org/doc/qt-4.8/qwebframe.html)
    *   它的任何信号都不符合我的目的。
*   [`QWebElement`](http://qt-project.org/doc/qt-4.8/qwebelement.html)
    *   在这里，我可以看到如何获取表示按钮的对象，但它没有任何信号。

我想点击重置按钮，以便在数据被清除之前将数据存储在表单中，以便以后恢复。

目前，我确实设法将按钮作为对象检索`QWebElementCollection`，`QWebElement`并且可以修改它们，但我不知道如何让它们在单击时发送信号或类似的东西。

```
// Get reset buttons.
QWebElementCollection inputResets = mainFrame()->documentElement().findAll("input[type=reset]");
inputResets += mainFrame()->documentElement().findAll("button[type=reset]");

// Change their text (just a test).
foreach(QWebElement element, inputResets)
{
    element.setPlainText("Worked!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:12:44.323

好吧，我得到了它，虽然我不认为这是最好的方法：

```
bool EventFilter::eventFilter(QObject* object, QEvent* event)
{
    if (event->type() == QEvent::MouseButtonRelease)
    {
        QMouseEvent *mouseEvent = static_cast<QMouseEvent *>(event);
        if (mouseEvent->button() == Qt::LeftButton)
        {
            QWebView *view = dynamic_cast<QWebView*>(object);

            QPoint pos = view->mapFromGlobal(mouseEvent->globalPos());

            QWebFrame *frame = view->page()->frameAt(mouseEvent->pos());
            if (frame != NULL)
            {
                // Get the existing reset buttons.
                QWebElementCollection inputResets = frame->documentElement().findAll("input[type=reset]");
                inputResets += frame->documentElement().findAll("button[type=reset]");

                // Check if any of them is at the clicked position.
                foreach(QWebElement element, inputResets)
                {
                    if (element.geometry().contains(pos))
                    {
                        qDebug() << "Clicked element tag:" << element.localName();

                        return QObject::eventFilter(object, event);
                    }
                }
            }
        }
    }

    return QObject::eventFilter(object, event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T23:04:04.440

您可能可以使用[Qt WebKit Bridge](http://doc.qt.io/qt-5/qtwebkit-bridge.html)完成此操作。

# iphone - Custom UITableViewCell SubView Initialisation?

> ID：11696017
> 
> 赞同：0
> 
> 时间：2012-07-27T21:41:20.353
> 
> 标签：iphone, objective-c, uitableview

Rather than for example doing this:

`UILabel *lbl = [[UILabel alloc] init];`

In the `cellForRowAtIndexPath` which I have discovered it VERY slow and can cause scrolling on your table view to stutter, where would I initialise my subviews such as labels?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:25:22.627

I believe it's better to do that in a subclass of UITableViewCell. By doing so, it will be recycled with the cell.

Besides, it could be useful to set UITableViewCell and, as much as possible, its subviews' opaque to YES.

Check this two posts for more information: [1](https://stackoverflow.com/questions/6172158/how-can-i-speed-up-a-uitableview?lq=1), [2](https://stackoverflow.com/questions/1352479/tricks-for-improving-iphone-uitableview-scrolling-performance)

# java - 将 Djava.net.preferIPv4Stack 设置为始终为真

> ID：11696019
> 
> 赞同：4
> 
> 时间：2012-07-27T21:41:42.637
> 
> 标签：java, ipv6, java-7, minecraft

使用 Java 7 Update 5 总是会导致 Java 应用程序复杂化（对我来说，尤其是 MineCraft），因为它尝试使用 IPv6。禁用 IPv6 根本无法保存。

我发现的每一条信息都在说要使用批处理文件来告诉 java 使用“-Djava.net.preferIPv4Stack=true”参数启动程序。这确实解决了我的问题，但我不想从批处理文件开始。

有没有办法为 Java 7 全局设置这个？我已经转到 Java 选项卡中的 Java 控制面板，并将“-Djava.net.preferIPv4Stack=true”设置为 Java 7 的运行时参数，但它什么也没做。

帮助我，你是我唯一的希望。我真的很想停止使用 Java 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T10:54:33.000

我在办公室的开发箱也有同样的 IPv6 问题。

从控制面板进入环境变量对话框，创建一个名为 JAVA_OPTS 的新系统变量，并将值设置为 -Djava.net.preferIPv4Stack=true。

# windows - 安装后永无止境的“您必须重新启动计算机才能应用这些更改”

> ID：11696021
> 
> 赞同：0
> 
> 时间：2012-07-27T21:41:43.733
> 
> 标签：windows, winapi, registry, windows-installer

我正在开发一个驱动程序安装程序，安装后总是会留下一条消息“您必须重新启动计算机才能应用这些更改”，并带有“立即重新启动”和“稍后重新启动”选项。我认为这是由未清除的注册表值引起的，但我不知道是什么值或什么键会导致这种情况。无论计算机重新启动多少次，警告都不会消失。如果有人可以指出我在注册表中的正确位置，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:58:54.350

您可以在安装前和安装后将整个注册表导出到文本文件中并`windiff`在这些文件上运行。这些文件将是巨大的，但在你的日子里，你知道硬盘。这可能会给你一个线索。

# dart - Dart - 第二次点击事件检测

> ID：11696027
> 
> 赞同：0
> 
> 时间：2012-07-27T21:42:14.783
> 
> 标签：dart

```
var modify = document.queryAll("#tab");

  for(var i=0; i<modify.length; i++)
  {
    modify[i].on.click.add((Event e) => show_content(i));
  }
// code for hide_content() 
```

我有两个函数 show_content() 和 hide_content()，它们在 div 上运行，我无法检测到第二次点击 div 以触发 hide_content()。我试过用信号量 - 没有运气

```
<div id="tab"> </div>
<div id="content"> </div>

<div id="tab"> </div>
<div id="content"> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:28:10.267

`queryAll`用于非唯一元素。使用`queryAll`带有 ID 的唯一元素`tab`没有任何意义。您应该使用`query('#tab')`仅获得单个的位置`DivElement`作为其返回值。

但是我不确定，我理解你的问题，但如果你需要一个切换按钮，你可能正在寻找这样的东西：

```
DivElement uniqeDiv;

void toggle() {
 if(uniqeDiv.hidden) {
   // uniqeDiv.hidden = false;
   show();
 } else {
   // uniqeDiv.hidden = true;
   hide(); 
 }
}

void main() { 
  uniqeDiv = query('#tab');
  uniqeDiv.on.click.add((Event e) => toggle());
} 
```

# database - 使用 Java、PrimeFaces 和 jsf 使用 ContentFlow

> ID：11696028
> 
> 赞同：0
> 
> 时间：2012-07-27T21:42:17.583
> 
> 标签：database, servlets, jsf-2, primefaces, bytearray

我正在使用 ContentFlow (http://www.jacksasylum.eu/ContentFlow/index.php) 来显示来自使用 Java、PrimeFaces 和 jsf 的数据库中的图像。我正在使用图像 servlet 来帮助呈现我的图像字节数组。

这在使用我的图像列表进行初始页面加载时是成功的，但是在我的图像列表更改后（使用数据表过滤器的结果），我找不到使用新图像列表重新加载/刷新 ContentFlow 的方法。

此刷新在没有实现 ContentFlow 的情况下成功运行，但它似乎要么在 Javascript 中的幕后做某事破坏了这一点，要么它不能很好地与图像 servlet 一起使用（有时我得到一个 IllegalStateException）。我很难找到任何人来帮助解决这个问题。

这是我的堆栈跟踪...

```
Error Rendering View[/index.xhtml]: java.lang.IllegalStateException: Cannot create a session after the response has been committed
at org.apache.catalina.connector.Request.doGetSession(Request.java:2636) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.connector.Request.getSession(Request.java:2375) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:841) [jbossweb-7.0.10.Final.jar:]
at com.sun.faces.context.ExternalContextImpl.getSession(ExternalContextImpl.java:155) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at javax.faces.context.ExternalContextWrapper.getSession(ExternalContextWrapper.java:396) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at com.sun.faces.renderkit.ServerSideStateHelper.writeState(ServerSideStateHelper.java:175) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_32] 
```

ImgServlet.java

```
/**
   * Servlet implementation class ImgServlet
   */
    @WebServlet(name = "ImgServlet", urlPatterns = {"/ImgServlet/*"})
    public class ImgServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Inject
    Screenshot model;
        @PersistenceUnit(unitName = "primary")
    private EntityManagerFactory emf; 

    public ImgServlet() {
        super();
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        PrintWriter writer = response.getWriter();
        ServletContext sc = getServletContext();

        String classString = "Screenshot";
        String idString = request.getParameter("id");

        if (classString == null || classString.isEmpty() || idString == null || idString.isEmpty()) {
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        Long id = Long.parseLong(idString.trim());
        PhotoInterface entry = null;

        EntityManager em = null;

        try {
            em = emf.createEntityManager();
        } catch (Throwable e1) {
            e1.printStackTrace();
        } 

        try {
            entry = em.find(Screenshot.class, id);
        } catch (Exception ex) {
            //Log.log(ex.getMessage());
        }

        if (entry == null) {
            response.sendError(HttpServletResponse.SC_NOT_FOUND); // 404.
            return;
        }

        ServletOutputStream out = null;

        try {
            response.reset();

             // It works ok without setting any of these...
            //response.setContentType(image.getContentType());
            //response.setHeader("Content-Length", String.valueOf(image.getLength()));
            //response.setHeader("Content-Disposition", "inline; filename=\"" + image.getName() + "\"");
            response.setContentType("image/png");

            out = response.getOutputStream();

            if (entry.getPng() != null && entry.getPng().length != 0) {
                out.write(entry.getPng());
                getServletContext().log("Found png!!");
            }
            else 
                getServletContext().log("png is NULL!!!");
        } catch (IOException e) {
            getServletContext().log("Error finding png!!!");
        } finally {
            close(out);
        }

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    private static void close(Closeable resource) {
        if (resource != null) {
            try {
                resource.close();
            } catch (IOException e) {
                // Do your thing with the exception. Print it, log it or mail it.
            }
        }
    }
} 
```

ContentFlow 制作 ContentFlow 的 Javascript 文件可以在[http://www.jacksasylum.eu/ContentFlow/download.php](http://www.jacksasylum.eu/ContentFlow/download.php)查看没有足够的空间在这里包含它。

获取数据表选择列表后，这段 xhtml 代码将起作用。此外，尝试使用过滤数据表过滤结果列表。ContentFlow div 未在此处实现...

```
<p:commandButton id="viewDetails" value="View Selected Screenshots" icon="ui-icon-search"  
                             update=":form:imgBlock"/> 

          <p:outputPanel id="imgBlock" layout="block"> 
             <a4j:repeat var="img" value="#{screenshotListProducer.selectedScreenshots}">
               <img src="ImgServlet?id=#{img.id}" title="#{img.time}"/>
             </a4j:repeat>
          </p:outputPanel> 
```

用 ContentFlow div 封装后，这段 xhtml 代码不起作用。一定是在幕后发生了一些我只是不明白的事情......

```
<p:commandButton id="viewDetails" value="View Selected Screenshots" icon="ui-icon-search"  
                             update=":form:imgBlock"/> 

          <p:outputPanel id="imgBlock" layout="block"> 
           <div class="ContentFlow" id="ContentFlow">
            <div class="flow">
             <a4j:repeat var="img" value="#{screenshotListProducer.selectedScreenshots}">
              <div class="item">
               <img src="ImgServlet?id=#{img.id}" title="#{img.time}"/>
              </div>
             </a4j:repeat>
            </div>
           </div>
          </p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:08:58.497

我自己想通了。创建了一个成功刷新 ContentFlow 的自定义 Javascript 函数。

# c++ - 为什么类成员函数具有相同名称的影子自由函数？

> ID：11696029
> 
> 赞同：13
> 
> 时间：2012-07-27T21:42:30.363
> 
> 标签：c++, overloading, member-functions, name-lookup, name-hiding

[最近我注意到](https://stackoverflow.com/a/11695164/1554020)成员函数在类中**完全*隐藏***了具有相同名称的自由函数。我的意思是完全不考虑重载决议的每个具有相同名称的自由函数。我可以理解为什么它是这样完成的：

```
void f();

struct S
{
    void f();

    void g()
    {
        f(); // calls S::f instead of ::f
    }
}; 
```

在函数具有相同签名的情况下，它唯一自然的变量作用域工作方式相同。但是为什么要禁止自由函数具有不同签名的明确调用，如下所示：

```
void f();

struct S
{
    void f(int x);

    void g()
    {
        f(); // fails to compile attempting to call S::f, which has wrong signature
    }
}; 
```

我不是在问如何从类内部调用*阴影*自由函数。我想知道的是这个设计背后的基本原理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T22:03:36.077

对于非限定名称查找，一次只考虑一个范围，如果在该范围内的搜索没有产生任何结果，则搜索下一个更高的范围。在您的情况下，仅`S`搜索 ' 范围。

> 但是为什么要禁止自由函数具有不同签名的明确调用，如下所示：

问题是*名称查找*只关心名称和*标识符*。它完全没有意识到您想要调用一个函数，它只看到一个标识符。如果您只使用`auto x = f;`，则会发生相同的名称查找，并且如果您这样想，那么您有很好的理由只希望在非常有限的范围内进行搜索。其他任何事情都会让用户感到惊讶。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T22:45:42.537

有一个特殊的，非常令人惊讶的规则（但它不适用于您的示例）指出，一旦通过名称查找找到**类成员名称**，就不会搜索名称空间范围：

```
#include <string>

struct C {
    std::string s;

    explicit C (std::string);

    void swap (C& rhs) {
        swap (s, rhs.s); // error: swap is C::swap
    }   
};

void swap (C& lhs, C& rhs) {
    swap (lhs.s, rhs.s); // std::swap(string,string)
} 
```

IMO，这太疯狂了。

> 但是为什么要禁止自由函数具有不同签名的明确调用，如下所示：

名称查找发生在重载解析之前：

*   如果查找不明确，则不会进行重载解析。
*   如果通过名称查找没有找到可行的函数，则不会尝试其他轮次查找。

**规则足够复杂**，在重载和名称查找之间没有“反馈”。我建议简化（例如删除成员隐藏命名空间范围名称规则，并删除不明确的名称查找）而不是复杂化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T21:50:17.837

我无法提供权威的答案（也许有人记得当时委员会的引述`Design and Evolution of C++`或实际上已经在委员会中），但我的第一个猜测是在你展示的情况下完全失败。很容易忘记在某个时间有多少东西在范围内。此外，重载解析可能非常复杂，并且可能存在默认参数和转换。因此，在这种情况下，我宁愿拥有最有限的范围，以始终确定到底调用了什么。

# java - 逆向工程升级到 Hibernate 3.6 错误

> ID：11696033
> 
> 赞同：4
> 
> 时间：2012-07-27T21:43:01.623
> 
> 标签：java, spring, hibernate, hibernate3

我在各种网站上发现了一些似乎涉及这个问题的线程，但我没有运气。似乎它根本无法完成。我得到了 `Caused by: java.lang.IncompatibleClassChangeError: Found interface org.hibernate.cfg.Mappings, but class was expected`错误。查看[此线程](https://forum.hibernate.org/viewtopic.php?f=6&t=1004766)中显示的[兼容性矩阵。](https://community.jboss.org/wiki/HibernateCompatibilityMatrix)除非我降级，否则我似乎无法使用 reveng。但这似乎不对。

当我开始升级一切正常时，现在我遇到了同样的错误。我确保在我的类路径上没有两个同名的不同 jar。我有以下罐子：

```
commons-logging-1.0.4.jar
dom4j-1.6.1.jar
hibernate3.jar
hibernate-tools.jar    
slf4j-api-1.6.6.jar
slf4j-log4j12-1.6.6.jar
sqljdbc4.jar
other various jars not dealing with hibernate.. 
```

这是完整的堆栈跟踪：

```
 ...   
    hibernatetool
    Executing Hibernate Tool with a JDBC Configuration (for reverse engineering)
    1\. task: hbm2hbmxml (Generates a set of hbm.xml files)     java.lang.IncompatibleClassChangeError: Found interface org.hibernate.cfg.Mappings, but class was expected
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:116)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.ant.execution.AntMain2.main(AntMain2.java:29)
Caused by: java.lang.IncompatibleClassChangeError: Found interface org.hibernate.cfg.Mappings, but class was expected
    at org.hibernate.cfg.reveng.MappingsDatabaseCollector.getTable(MappingsDatabaseCollector.java:25)
    at org.hibernate.cfg.reveng.JDBCReader.processTables(JDBCReader.java:535)
    at org.hibernate.cfg.reveng.JDBCReader.readDatabaseSchema(JDBCReader.java:74)
    at org.hibernate.cfg.reveng.JDBCReader.readDatabaseSchema(JDBCReader.java:860)
    at org.hibernate.cfg.JDBCBinder.readDatabaseSchema(JDBCBinder.java:121)
    at org.hibernate.cfg.JDBCBinder.readFromDatabase(JDBCBinder.java:94)
    ... 
```

蚂蚁：

```
<taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask" classpathref="classpath" />
...
 <hibernatetool>
    <jdbcconfiguration configurationfile="${conf.dir}/${dbName}_hibernate-template.cfg.xml" packagename="myPackageName" revengfile="${conf.dir}/hibernate.reveng.xml" reversestrategy="com.capitaliq.loader.dev.codegen.HibernateReverseStrategy" detectmanytomany="false" />
    <hbm2hbmxml destdir="${srcGen.dir}" />
    <!-- Generate new hibernate.cfg.xml including new POJOs-->
    <!--'destdir' is relative to 'packagename' configuration-->
    <hbm2cfgxml ejb3="false" destdir="${conf.dir}" />
</hibernatetool>

<!-- Generate java POJOs from mapping files-->
<hibernatetool> <!--Line 384-->
    <configuration configurationfile="${conf.dir}/${dbName}_hibernate-template.cfg.xml">
        <fileset dir="${orm.pkg.dir}">
            <include name="**/*.hbm.xml" />
        </fileset>
    </configuration>
    <!--'destdir' is relative to 'packagename' configuration-->
    <hbm2java jdk5="true" ejb3="false" destdir="${srcGen.dir}" />
</hibernatetool> 
```

任何帮助都会很棒；这台电脑即将被扔掉。多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:32:59.243

根据这个[链接。Max](https://forum.hibernate.org/viewtopic.php?f=6&t=1008336)是 hibernate 的贡献者之一，他说（靠近线程底部）：

“问题在于 Hibernate 3.6 从类到接口有一个类更改，这意味着它与 Hibernate Tools 源代码兼容但二进制不兼容。

这加上其他二进制更改会导致此问题，并记录在[https://issues.jboss.org/browse/JBIDE-8071](https://issues.jboss.org/browse/JBIDE-8071)

***因此，“解决方法”是当您需要使用休眠工具生成代码时，不要在类路径中包含休眠 3.6；之后生成的代码可以与 3.6 一起使用。***

挑战在于，如果我们添加 3.6 支持，我们也会失去 3.3-3.5 支持。因此，目前我们不会更新，但会尝试看看我们能做些什么。”

看来我正在尝试做不可能的事情。虽然我很高兴我终于有了答案，但我很遗憾地说这不是我希望的答案。

不能将两个 jar 放在同一个类路径上，即使它们相互依赖。如果你想对一些hibernate代码进行逆向工程，最好不要使用hibernate 3.6版！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:23:34.470

jar 名称不同的事实并不意味着它们不能包含完全相同的类。

Hibernate 和 SLF4J 通常只需要使用一个 jar。其他 jars 通常包含来自大型主 jar 的部分类，并且可能包含一些用于特定任务的额外类。

我会首先删除`hibernate-tools.jar`，`slf4j-api-1.6.6.jar`甚至可能`commons-logging-1.0.4.jar`，然后看看你`ClassNotFoundException`是否可以添加特定的所需 jar。

# html - CSS 定位 2 个移位的列

> ID：11696038
> 
> 赞同：1
> 
> 时间：2012-07-27T21:43:29.770
> 
> 标签：html, css

首先，是否有一个关于定位元素的好教程，它真正解释了发生了什么？我读了很多，但无法掌握它。

我遇到的具体问题如下：

我有一个标题 div 元素（红色），下面有 2 列（白色和绿色）。通常使用 float:left; 我可以将元素彼此相邻放置。但现在我想要一个（白色的）在所示的标题上方移动一点。

使用负值的相对定位，我可以在正确的位置获得白色的，但如何定位第二列。调整浏览器大小时，它会变得一团糟。

```
#Column1
{
  float: left;
  position: relative;
  top: -140px;
  background-color: #FFFFFF;
  left: 70px;
  width: 280px;
  min-height: 500px;
  padding: 10px;
}

#Column2
{
  float: left;   
  width: 800px;
  background-color: #00FF00;
} 
```

![DIV 位置以图形方式解释](../Images/b99651225f2202ce947739ce47095ebe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:51:40.310

我只想在这里吐口水：

HTML

```
<div id="red"></div>
<div id="white"></div>
<div id="green"></div> 
```

CSS

```
#red {
    width: 100%;
    float: left;
    height: 100px;
    position: relative;
    background-color: #f00;
}
#white {
    width: 20%;
    float: left;
    margin-left: 4%;
    margin-top: -40px;
    position: relative;
    background-color: #fff;
    height: 400px;
}
#green {
    width: 76%;
    float: left;
    position: relative;
    background-color: #0f0;
    height: 400px;
} 
```

它有效吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:54:02.583

你可以只使用负边距

[http://jsfiddle.net/gAKAK/](http://jsfiddle.net/gAKAK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T22:00:41.943

这是[JSFiddle](http://jsfiddle.net/Q3Xz6/9/)，它使用 position **absolute**演示了没有浮动的布局。根据我的经验，绝对位置更加灵活，并且适用于这种布局，尤其是当您想使用顶部、右侧、底部和左侧*停靠元素时。*在某些情况下，您需要回退使用浮点数，但在这种情况下不需要。

使用浮动来浮动它周围的东西并定位绝对来停靠东西。

**的HTML**

```
<div id="Header">header</div>
<div id="Column1">Left</div>
<div id="Column2">Right</div> 
```

**CSS**

```
#Header {
  background-color: red;
  height: 200px;
}
#Column1 {
  position: relative;
  background-color: #FFFFFF;
  top: -140px; left: 70px;
  width: 280px;
  min-height: 500px;
}
#Column2 {
  position: absolute;   
  background-color: #00FF00;
  left: 350px; top: 200px; right: 0;
  min-height: 360px;
}​ 
```

**更新从****JSFiddle中的**[.more](http://jsfiddle.net/Q3Xz6/9/)类中删除 display:none并看到容器也很灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:03:15.040

这是一个复杂的请求，所以不要因为无法弄清楚而感到难过。您不必`width`为此解决方案设置侧边栏以外的任何内容；我的解决方案依赖于一个不常见的用法`overflow: hidden`来实现这一点。

[http://jsfiddle.net/Wexcode/uBQEu/](http://jsfiddle.net/Wexcode/uBQEu/)

HTML：

```
<div id="header"></div>
<div id="white"></div>
<div id="green"></div> 
```

CSS：

```
#header { 
    background: red;
    height: 70px;
    border: 1px solid #000; }
#white {
    background: #fff;
    float: left;
    margin: -30px 0 0 70px;
    width: 100px;
    height: 230px;
    border: 1px solid #000; }
#green { 
    background: green;
    overflow: hidden; 
    height: 201px;
    border: 1px solid #000;
    border-top: 0;
    border-left: 0; } 
```

# ruby - RubyGem 下载量似乎人为地高。是否有从 RubyGems.org 下载的机器人？

> ID：11696044
> 
> 赞同：22
> 
> 时间：2012-07-27T21:43:55.430
> 
> 标签：ruby, rubygems, gem

两天前我刚刚上传了一个 RubyGem。它做的不多，但它是 Facebook Graph API 的一部分的包装器。今天好奇的查了一下gem的下载量，300左右，非常的高。我想知道机器人是否从 RubyGems.org 下载，或者实际上我的 gem 是否有可能被开发人员下载了 300 多次？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T06:22:33.457

每个人都知道这`bundle install`有点慢。所以有人可以考虑在本地保留 ruby​​gems 镜像。

这个任务有宝石：[https ://github.com/rubygems/rubygems-mirror](https://github.com/rubygems/rubygems-mirror)

所以这就是下载量高的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:01:42.893

我确信机器人会影响计数。我发布了我在一天左右的时间里编写的 gem 的几个更新和版本冲突。然后最高版本数月保持不变。宝石还没有真正流行起来。如果我查看下载统计信息，那么几个小时内仅是最新版本的版本的总数（和下载模式）与几个月和几个月来一直是最新版本的 gem 版本的总数（和下载模式）相似。

也就是说，我的总数达到了 30 左右的峰值，所以也许那里有一些真正的用户。如果您想确定，请快速改进并升级版本并比较使用趋势。

# objective-c - 当已经完全放大时，如何强制 UIScrollView 完全忽略放大手势？

> ID：11696045
> 
> 赞同：0
> 
> 时间：2012-07-27T21:44:01.057
> 
> 标签：objective-c, ios, uiscrollview

当已经完全放大时，如何强制 UIScrollView 忽略捏打开手势？

我遇到的问题是您可以在缩放时拖动滚动视图，即使当前禁用滚动也是如此。如果已经完全放大，我想阻止这种情况发生，但仍然允许缩小手势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:27:17.250

尝试`_scrollView.bouncesZoom = NO;`

# sql - SQL Server 2008 存储过程 - 优化器认为我的参数可以为空

> ID：11696052
> 
> 赞同：3
> 
> 时间：2012-07-27T21:44:44.710
> 
> 标签：sql, sql-server-2008, stored-procedures, parameters, null

优化器似乎对 varchar 参数的可空性感到困惑，我不确定我是否理解原因。我正在使用 SQL Server 2008 顺便说一句。所有被查询的列都被索引。TDate 列是一个聚集的分区索引。FooValue 列是索引的、不可为空的列。

例子：

```
CREATE PROCEDURE dbo.MyExample_sp @SDate DATETIME, @EDate DATETIME, @FooValue VARCHAR(50)
AS
SET NOCOUNT ON

--To avoid parameter spoofing / sniffing
DECLARE @sDate1 DATETIME, @eDate1 DATETIME
SET @sDate1 = @sDate
SET @eDate1 = @eDate

SELECT
    fd.Col1,
    fd.Col2,
    fd.TDate,
    fl.FooValue,
    fd.AccountNum
FROM dbo.FooData fd
INNER JOIN dbo.FooLookup fl
    ON fl.FL_ID = fd.FL_ID
WHERE fd.TDate >= @sDate1
    AND fd.TDate < @eDate1
    AND fl.FooValue = @FooValue 
```

将其作为查询运行按预期工作。所有索引都是搜索，没有欺骗等。通过执行 sproc 运行它需要 20 倍的时间 - 相同的查询 - 相同的参数。但是，如果我进行以下更改（最后一行），一切都会再次运行。

```
CREATE PROCEDURE dbo.MyExample_sp @SDate DATETIME, @EDate DATETIME, @FooValue VARCHAR(50)
AS
SET NOCOUNT ON

--To avoid parameter spoofing / sniffing
DECLARE @sDate1, @eDate1
SET @sDate1 = @sDate
SET @eDate1 = @eDate

SELECT
    fd.Col1,
    fd.Col2,
    fd.TDate,
    fl.FooValue,
    fd.AccountNum
FROM dbo.FooData fd
INNER JOIN dbo.FooLookup fl
    ON fl.FL_ID = fd.FL_ID
WHERE fd.TDate >= @sDate1
    AND fd.TDate < @eDate1
    AND fl.FooValue = ISNULL(@FooValue, 'testthis') 
```

就像优化器对参数是否可以为空感到困惑？此外，向参数添加默认值没有任何区别。除非我使用 = isnull(@parameter, 'some constant')，否则 sproc 仍然需要永远运行

我很高兴我明白了这一点。但是，我想了解为什么会发生这种情况，以及是否有更优雅的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:38:04.373

**回复：可为空的变量**

T-SQL 中的变量没有可为空的概念，您可以使用 ? 在 c# 中将变量定义为可为空的方式。如果存储过程中有参数，最终用户可以将他或她想要的任何内容传递到存储过程中，无论是实值还是空值。

**回复：查询计划**

将被缓存的查询计划是在您第一次调用此存储过程时生成的查询计划。所以如果您在第一次运行它时为 @FooValue 传递了一个空值，那么它将针对 @ 进行优化FooValue = null。

有一个[OPTIMIZE FOR](http://www.mssqltips.com/sqlservertip/1354/optimize-parameter-driven-queries-with-sql-server-optimize-for-hint/)提示，您可以使用它来优化查询以获取其他值：

或者您可以使用[WITH RECOMPILE](http://sqltutorials.blogspot.com/2008/03/with-recompile-re-compile-execution.html)，这将强制在每次运行存储过程时重新生成查询计划。

显然，在使用这些类型的提示时需要权衡取舍，因此请确保在使用它们之前了解它们。

# apache-flex - Flex声音采样率

> ID：11696054
> 
> 赞同：0
> 
> 时间：2012-07-27T21:44:49.823
> 
> 标签：apache-flex, audio, sample-rate

我有一些高质量的录音，我想在 flex 应用程序中使用。

我试图用 GoldWave 保存 22050 HZ 和 64BIT Stereo 的声音，但奇怪的是我在 FLEX 中收到了这个错误：“不支持的采样率 32000HZ”。我 10000% 确定我使用 GoldWave 保存了 22050HZ 64BIT Stereo 的声音。我这样做了2次。

如果我以比上述更低的采样率保存声音，它们可以工作，但质量会丢失。

谁能告诉我使用什么软件使声音与 FLEX 兼容，以及我应该使用什么频率和比特率来保持大部分质量？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:34:54.480

我怀疑您的问题与保存为 64 位有关，这是非常不标准的，并且可能会使其中一个程序感到困惑。尝试一些更标准的 16 位整数，如果这不起作用，则使用完全标准的东西，例如 44,100 kHz。

# c# - 如何验证日期时间格式？

> ID：11696060
> 
> 赞同：22
> 
> 时间：2012-07-27T21:45:14.273
> 
> 标签：c#, validation, datetime

我想让用户输入 DateTime 格式，但我需要验证它以检查它是否可以接受。用户可以输入“yyyy-MM-dd”，这很好，但他们也可以输入“MM/yyyyMM/ddd”或任何其他组合。有没有办法验证这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-27T21:48:39.433

你在寻找这样的东西吗？

```
DateTime expectedDate;
if (!DateTime.TryParse("07/27/2012", out expectedDate))
{
    Console.Write("Luke I am not your datetime.... NOOO!!!!!!!!!!!!!!");
} 
```

如果您的用户知道所需的确切格式...

```
string[] formats = { "MM/dd/yyyy", "M/d/yyyy", "M/dd/yyyy", "MM/d/yyyy" };
DateTime expectedDate;
if (!DateTime.TryParseExact("07/27/2012", formats, new CultureInfo("en-US"), 
                            DateTimeStyles.None, out expectedDate))
{
    Console.Write("Thank you Mario, but the DateTime is in another format.");
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T22:00:07.607

我不知道有什么方法可以实际验证他们输入的格式，因为有时您想故意包含可以转换为任何内容的字符。您可能会考虑的一件事是允许用户通过显示他们输入的格式转换为的预览来进行自我验证。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-04T18:18:22.267

我假设您想知道指定的格式字符串是否有效...

为此，您可以往返：

```
private bool IsValidDateFormat(string dateFormat)
{
    try
    {
        String dts=DateTime.Now.ToString(dateFormat, CultureInfo.InvariantCulture);
        DateTime.ParseExact(dts, dateFormat, CultureInfo.InvariantCulture);
        return true;
    }
    catch (Exception)
    {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-27T21:54:43.363

除非我记错了，否则唯一无效的 DateTime 格式字符串是一个字符长。您可以假设任何 2 个或更多字符的 DateTime 格式字符串都是有效的。

```
DateTime.ParseExact("qq", "qq", null) == DateTime.Today
DateTime.ParseExact("myy", "501", null) == "05/01/2001" 
```

[标准（1 个字符）](http://msdn.microsoft.com/en-us/library/az4se3k1)
[自定义（>1 个字符）](http://msdn.microsoft.com/en-us/library/8kb3ddd4)

作为参考，允许使用单个字符串作为格式：

```
d,D,f,F,g,G,m,M,o,O,r,R,s,T,u,U,y,Y 
```

任何其他字符，例如`q`，本身都是无效的。所有其他字符串都将成功解析为格式化字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T21:58:40.067

你不谈论你的验证策略。无论如何，您应该使用涉及正则表达式的东西，而不是应用允许的模式。这将有助于反对形式有效性..然后您必须注意实际内容并确保根据月、日和年的值是正确的。

无论如何，有几个人建议使用 DateTime.TryParse() 方法让基板照顾你。但是无论如何您都必须指定格式！所以没有魔法！否则你会模棱两可

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-23T08:15:33.550

这对我有用-

```
try
{
  String formattedDate = DateTime.Now.ToString(dateFormat);
  DateTime.Parse(formattedDate);
  return true;
}
catch (Exception)
{
  return false;
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-01-28T12:36:21.783

我的解决方案是将输入字段标记为只读，并允许用户仅通过[jqueryui datepicker](https://jqueryui.com/datepicker/)更改值。

它很直观。您可以指定您的首选格式，并且只需要验证这一种格式。

否则你可能真的遇到麻烦了。在美国，您将如何处理“ **02/03/2020** ”，您将其解释为**2 月 3 日**，但对于南美洲，它绝对**是 3 月 2 日**。全球还有很多其他的日期格式。

# android - 由于权限错误，Android App 报告“未安装”

> ID：11696067
> 
> 赞同：0
> 
> 时间：2012-07-27T21:46:14.780
> 
> 标签：android, eclipse, android-manifest

在平板电脑上，我安装了一个在 Ubuntu 下的 Eclipse 中开发的 apk。该应用程序可在 AVD 上运行，并且已安装在手机上并可以正常工作。apk 的安装没有错误，但是在启动应用程序时它会给出“未安装”的 toast 消息。

在 aLogCat 输出中，我看到启动器的 WRITE_EXTERNAL_STORAGE 权限拒绝消息。请注意，当我启动应用程序时，USB 连接未连接。

此外，我注意到 aLogCat 中的以下行，并且注意到“-1”已添加到包名称中。

> ```
>  New package installed in /data/app/com.company.AppName-1.apk 
> ```

在清单中的行

> ```
>  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
>    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" /> 
> ```

在清单块中，并且

> ```
>  <android:permission="android.permission.WRITE_EXTERNAL_STORAGE"> 
> ```

在应用程序块中。

为什么这适用于 Android 2.3 手机和 Android 4.0.3 AVD，但不适用于 Android 4.0.3 平板电脑？

平台信息：Eclipse 3.7.2，平板电脑：Yarvik TAB461EUK；使用“ES文件资源管理器”安装

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:52:30.020

尝试从应用程序块中删除权限。我不确定，但根据个人经验，ICS 不支持已在主块中定义的应用程序块中的权限属性。它继承自主块。请告诉这是否解决了问题。

我不知道为什么它可以在 AVD 上运行，可能是因为 AVD 没有任何外部存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:38:26.707

相关文档：

`http://developer.android.com/guide/topics/manifest/manifest-intro.html`仅描述主清单块的权限元素（现在）

[每个版本的更改](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)状态：

> HONEYCOMB：当应用程序需要访问其组件之一（活动、接收器、服务、提供者）的权限时，当应用程序想要访问自己的组件时，不再强制执行此权限。这意味着它可能需要对它本身并不持有的组件的权限，并且仍然可以访问该组件。

[活动](http://developer.android.com/guide/topics/manifest/activity-element.html#prmsn)状态：

> 客户端启动活动或以其他方式使其响应意图时必须具有的权限的名称。如果 startActivity() 或 startActivityForResult() 的调用者没有被授予指定的权限，它的意图将不会传递给活动。
> 
> 如果未设置此属性，则元素的权限属性设置的权限适用于活动。如果两个属性都没有设置，则活动不受权限保护。

我不是很清楚

# ruby-on-rails-3 - 为子模型构建字段

> ID：11696068
> 
> 赞同：0
> 
> 时间：2012-07-27T21:46:28.157
> 
> 标签：ruby-on-rails-3, activerecord

我有一个名为`Person`拥有的模型`Venue`。课程如下：

应用程序/模型/person.rb

```
class Person < ActiveRecord::Base
     attr_acessible :height
     has_one :venue
end 
```

应用程序/模型/venue.rb

```
class Venue < ActiveRecord::Base
     attr_acessible :location
end 
```

现在，如果我想制作一个表格，如果`Person`没有，它会是这样的`has_one` `Venue`：

```
<%= form_for :person do |f| %>
    <%= f.text_field :height %>
<% end %> 
```

如果我想用这个表单`Venue`为此创建对象，我该怎么做？`Person`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:11:43.153

弄清楚了。在这种情况下，您将使用`fields_for`模拟子模型的字段呈现。

# hashmap - 遍历表番石榴

> ID：11696071
> 
> 赞同：3
> 
> 时间：2012-07-27T21:47:15.467
> 
> 标签：hashmap, guava

我已经将表番石榴用于我的 3D 哈希实现，我只是想知道如何迭代它并获取值。我现在的表中有以下内容.. 我只需要遍历它并打印行、列、值的值

```
 A1000|B100|8
  A104|B10|6 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T21:57:28.430

```
for (Table.Cell<String, String, Integer> cell : table.cellSet()) {
    System.out.println(cell.getRowKey 
                       + "|"
                       + cell.getColumnKey() 
                       + "|" 
                       + cell.getValue());
} 
```

[javadoc](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/index.html)会告诉你，以及链接的[用户指南文章](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table)。

# sql - Teradata - 具有相应日期的数据集的最大值

> ID：11696073
> 
> 赞同：1
> 
> 时间：2012-07-27T21:47:28.750
> 
> 标签：sql, teradata

这可能很明显，我似乎无法让它正常工作。假设我有一张过去一年中每天的各种服务器及其 CPU 百分比的表格。我基本上想说：

“对于每个服务器名称，显示此服务器命中的最大 CPU 值（来自此数据集）以及它发生的相应日期”

所以理想情况下，我会得到如下结果：

服务器 1 52.34% 3/16/2012 服务器2
48.76%
4/15/2012 服务器3 98.32% 6/16/2012
等等。

当我尝试这样做时，我不能使用 group by 否则它只会显示每个日期：

从 cpu_values 组中选择 servername, date, max(cpu) by 1,2 order by 1,2;

这当然只是给了我每个服务器和每个日期.. 子查询？分区？任何援助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:37:41.833

您可以使用`row_number()`OLAP 窗口功能：

```
 select   servername
          , cpu
          , date 
   from     cpu_values
   qualify  row_number() over (partition by servername
                               order by cpu desc) = 1 
```

请注意，您不需要 GROUP BY 或 ORDER BY 子句。PARTITION 子句类似于 GROUP BY，而 ORDER BY 子句对每个分区内的行进行排序（在本例中按 cpu 降序排列）。“=1”部分选择满足条件的单行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:55:38.230

子查询将是最简单的解决方案：

```
SELECT
    S.Name, Peak.PeakUsage, MIN(S.Date) AS Date
FROM
    ServerHistory AS S
    INNER JOIN
        (
        SELECT
            ID, MAX(CPUUsage) AS PeakUsage
        FROM
            ServerHistory
        WHERE
            Date BETWEEN X AND Y
        GROUP BY
            ID
        ) AS Peak ON S.ID = Peak.ID
GROUP BY
    S.Name, Peak.PeakUsage 
```

PS，下一次，你可能想用“SQL”标记。那里的 Teradata 人员相对较少，但可以帮助解决基本 SQL 问题的人很多。

# python - Python - 将元组列表转换为字符串列表

> ID：11696078
> 
> 赞同：9
> 
> 时间：2012-07-27T21:48:18.920
> 
> 标签：python

我有一个看起来像这样的元组列表：

```
[('this', 'is'), ('is', 'the'), ('the', 'first'), ('first', 'document'), ('document', '.')] 
```

将每个标记用空格分隔的最pythonic和最有效的方法是什么：

```
['this is', 'is the', 'the first', 'first document', 'document .'] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T21:49:53.300

非常简单：

```
[ "%s %s" % x for x in l ] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T21:51:26.457

使用`map()`和`join()`：

```
tuple_list = [('this', 'is'), ('is', 'the'), ('the', 'first'), ('first', 'document'), ('document', '.')]

string_list = map(' '.join, tuple_list) 
```

正如inspectorG4dget 指出的那样，列表推导是最 Pythonic 的方式：

```
string_list = [' '.join(item) for item in tuple_list] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T22:13:55.803

这样做：

```
>>> l=[('this', 'is'), ('is', 'the'), ('the', 'first'), 
('first', 'document'), ('document', '.')]
>>> ['{} {}'.format(x,y) for x,y in l]
['this is', 'is the', 'the first', 'first document', 'document .'] 
```

如果您的元组是可变长度（甚至不是），您也可以这样做：

```
>>> [('{} '*len(t)).format(*t).strip() for t in [('1',),('1','2'),('1','2','3')]]
['1', '1 2', '1 2 3']   #etc 
```

或者，可能还是最好的：

```
>>> [' '.join(t) for t in [('1',),('1','2'),('1','2','3'),('1','2','3','4')]]
['1', '1 2', '1 2 3', '1 2 3 4'] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-20T03:15:10.797

我强烈建议您避免使用`%s`. 从 Python 3.6 开始，添加了[f 字符串](https://docs.python.org/3/tutorial/inputoutput.html#formatted-string-literals)，因此您可以按如下方式利用此功能：

```
[f'{" ".join(e)}' for e in l] 
```

如果您使用的是以前版本的 Python 3.6，您还可以`%s`通过使用以下`format`函数来避免使用：

```
print(['{joined}'.format(joined=' '.join(e)) for e in l]) # before Python 3.6 
```

**选择：**

假设每个元组中有 2 个元素，您可以使用以下内容：

```
# Python 3.6+
[f'{first} {second}' for first, second in l]

# Before Python 3.6
['{first} {second}'.format(first=first, second=second) for first, second in l] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-20T07:01:11.480

假设列表是：

您可以使用***列表理解 + join()***

```
li = [('this', 'is'), ('is', 'the'), ('the', 'first'), ('first', 'document'), ('document', '.')] 
```

您需要做的就是：

```
[' '.join(x) for x in li] 
```

您也可以使用***map() + join()***

```
list(map(' '.join, li)) 
```

结果 ：

```
['this is', 'is the', 'the first', 'first document', 'document .'] 
```

# c# - 执行用户指定的功能/方法

> ID：11696079
> 
> 赞同：2
> 
> 时间：2012-07-27T21:48:19.167
> 
> 标签：c#

我想知道，如果.net 中有一个类可以在运行时调用函数/方法...

例如：

输入要调用的方法名称：sum(10,20)

我的 Ideia 的代码示例是这样的：

```
class Program
{
    static void sum(int a, int b)
    {
        Console.WriteLine("{0}", a + b);
    }

    static void Main(string[] args)
    {
        Console.Write("Enter with a method name to call: ");
        string a = Convert.ToString(Console.ReadLine());

        // SAMPLE OF IDEA
        ProcessMacro PrM = new ProcessMacro(a);
    }
} 
```

那么，有可能做到这一点吗？如果是，我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:53:06.890

据我了解你的问题。你想要一个`eval`函数之类的东西。字符串到代码？正如 asawyer 所说，可以使用反射

查看

[C# 评估函数](http://www.codeproject.com/Articles/13335/C-Eval-Function)

# javascript - datepicker 和动态表不使用 jQuery 函数

> ID：11696081
> 
> 赞同：0
> 
> 时间：2012-07-27T21:48:37.550
> 
> 标签：javascript, jquery

我在这里阅读了很多关于我的问题的帖子，但我还没有找到解决方案，可能是因为我不是 JQuery 之王......

这是一个非常简单的例子：

[例子](http://dianamahe.free.fr/test_tableaucalendrier2en.php)

当我尝试添加新行时，日期选择器不起作用。我不知道该怎么办。我使用这个函数在我的表中添加一个新行。（实际上，我有一个包含许多表格的 html 页面，并且每个表格我都使用 datepicker）

```
 var champ_date_arrivee = document.createElement('input');
champ_date_arrivee.setAttribute('type','text');
champ_date_arrivee.setAttribute('size','10');
champ_date_arrivee.setAttribute('name','date_t');
champ_date_arrivee.setAttribute('value','');
champ_date_arrivee.setAttribute('id','date_t');
champ_date_arrivee.className='champ_date_input_tableau';
newCell1.appendChild(champ_date_arrivee); 
```

这个日期选择器的代码：

```
$(document).ready(function(){

 $.datepicker.setDefaults($.datepicker.regional['fr']);
 $('.champ_date_input_tableau').datepicker({ /* action sur class date */

    dateFormat: 'dd-mm-yy',
    changeMonth: true,
    changeYear: true,
    yearRange: "c-70:c+70",
    clickInput:true,
 });

}); 
```

如您所见，我使用类名 champ_date_input_tableau，因为我不知道如何以其他方式进行。

我试过这个：

```
 var champ_date_arrivee = document.createElement('input');
champ_date_arrivee.setAttribute('type','text');
champ_date_arrivee.setAttribute('size','10');
champ_date_arrivee.setAttribute('name','date_t');
champ_date_arrivee.setAttribute('value','');
champ_date_arrivee.setAttribute('id','date_t');
champ_date_arrivee.className='champ_date_input_tableau';
    $(champ_date_arrivee).datepicker({
    dateFormat: 'dd-mm-yy',
    changeMonth: true,
    changeYear: true,
    yearRange: "c-70:c+70",
});
newCell1.appendChild(champ_date_arrivee); 
```

你在这个链接上有结果[这个尝试](http://dianamahe.free.fr/test_tableaucalendrier4.php) 它不起作用。

我知道我必须使用这样的代码，但是如何？

```
 jQuery('.date-pick').removeClass('hasDatepicker').datepicker({
dateFormat: 'mm-dd-yy'
}); 
```

你是我最后的机会...

对不起我的英语，我是法国人。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:09:12.843

你真的不需要`.on()`,`.delegate()`或`.live()`. 如果您只需将 Datepicker 添加到`ajoutLigneAuTableauTransfert()`函数的底部，它就足够聪明了。因为您在应用 datepicker 后正在修改 ID 属性，所以它搞砸了。执行后专门调用 datepicker 插件`majNumLignesTabTransfert('ajout');`

(1) 删除您在 中的两个加倍电话`ajoutLigneAuTableauTransfert()`。(2) 我还注意到您在最后一个配置选项的末尾添加了逗号，这在 IE 中将失败，并且从技术上讲是 javascript 中的语法错误。(3) 在之后添加 datepicker 调用`majNumLignesTabTransfert('ajout');`

这是我描述的显示它工作的变化。在 javascript 注释中查找`// ANT-MOD`指标。

[http://jsfiddle.net/dfDNu/](http://jsfiddle.net/dfDNu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:39:51.787

好的，你需要使用 jQuery 的[`live()`](http://api.jquery.com/live/)方法，所以

```
$('.champ_date_input_tableau').live('focusin', function() {
    $(this).datepicker();
});​ 
```

现在继续添加更多元素，`live`也会将其绑定到新元素。

**编辑：**

据说它已`live`被弃用，但我相信有一些类似的东西叫做`on`. 因此，如果您对始终使用最新版本非常谨慎，请继续使用该版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:40:05.177

您的代码不起作用的原因是，当您的页面加载时，日期选择器仅连接到已经存在的表单项目，但不会应用于新项目。添加新行时，您需要确保在刚刚添加的特定项目上调用 .datepicker() 函数。

根据 Dorian 的回答，您可以动态执行此操作，但是，[请勿使用 LIVE](http://bitovi.com/blog/2011/04/why-you-should-never-use-jquery-live.html)。（阅读文章以了解有关它的各种问题的解释。从 jQuery 1.7 开始，它已被弃用。）相反，您需要查看 on() 函数。像这样的东西应该工作：

```
$('#BlocFormulaire').on('click', '.champ_date_input_tableau', function() {
   $(this).datepicker();
}); 
```

# javascript - 过滤融合表查询的当前值

> ID：11696084
> 
> 赞同：0
> 
> 时间：2012-07-27T21:48:43.037
> 
> 标签：javascript, google-maps, google-fusion-tables

在很多帮助下，我创建了这张地图，其中包含从查询到融合表的数据。

[http://www.vciregionmap.com](http://www.vciregionmap.com)

我现在被要求在地图中添加一个品牌过滤器，当用户选择新的区域和地区时，该过滤器会过滤并保留所选的过滤值。

因此，如果我选择 - Region > NorthEast，然后选择 Bentley，则只会显示那些 Bentley 位置，如果我随后切换到 Region SouthEast，第 61 区，它仍将仅显示 Bentley 位置，直到我重置地图。

我在选择菜单中有品牌过滤器并且过滤器工作，但不是按当前位置或值，我不知道如何重置品牌选择以返回所有品牌。我在这里有一个使用不同代码的版本：http: [//vciregionmap.com/_old/](http://vciregionmap.com/_old/)

这是我现在使用的功能：

```
 function filterBrand(term) {
 layer.setOptions({query:{select:'Brand',
                       from:FT_TableID,
                       where:"Brand = '"+term+"'"
                       }

});
var queryStr = "SELECT 'Brand', 'Brand' FROM "+FT_TableID+" WHERE Brand = '"+term+"'";

}

google.maps.event.addDomListener(document.getElementById('brand-select'),
        'change', function() {
          updateMap(layer, tableId, Brand);
    });

google.maps.event.addDomListener(window, 'load', initialize); 
```

# php - 如何使用 PHP 在浏览器中显示 CSV 文件的内容

> ID：11696089
> 
> 赞同：0
> 
> 时间：2012-07-27T21:49:28.483
> 
> 标签：php, mysql

我想选择一个文件并在浏览器中显示其内容。谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:18:38.997

这是一个读取 csv 文件内容并将其显示为表格的库。它基本上是一个类。如果您有面向对象的概念，则可以使用它。查看我的答案

[Codeigniter REST CSV 导入到 mysql](https://stackoverflow.com/questions/11337221/codeigniter-rest-csv-import-to-mysql/11339125#11339125)

# asp.net - 人们使用什么来设计用于 Visual Studio 的 css？

> ID：11696090
> 
> 赞同：0
> 
> 时间：2012-07-27T21:49:35.247
> 
> 标签：asp.net, css

我将使用 asp.net 设计一个站点，在观看了教程以了解将要做什么之后，到了视频刚刚说“将您的 css 文件放入项目中”的地步，所以那里用于设计实际 CSS 的常见应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:50:50.603

Adobe Photoshop 或 Microsoft 表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:00:50.580

首先，学习使用 css 编译器，它让生活更轻松，在我看来你可以更直观地编写 css

[http://compass-style.org/](http://compass-style.org/)

其次，手写css（或SASS/LESS）。从早期的 Dreamweaver 时代开始，设计师已经走了很长一段路，但根据我的经验，你将花费同样多的时间，如果不是更多，追踪自动生成的不起作用的东西，而不是你从头开始编写并测试它使用 Chrome（或您喜欢的其他浏览器内 CSS 调试器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T14:52:43.313

他们可能指的是 asp.net 中的一个主题。在 App_Themes 文件夹中创建主题。（当你去添加新项目时，ASP.Net 文件夹）这使你可以使路径分配更简单。然后，您可以将您的皮肤、图像（在图像文件夹中）与所有样式表一起放置。然后，您可以将所有页面设置为在 web.config 文件中使用该主题。如果您使用根 web.config 文件，那么它将为您的整个站点执行此操作。您可以将其 `<pages styleSheetTheme="MyTheme">` 链接到您的 head 标签中，因为主题中的所有样式表都将被继承。（这是拖放，将 .css 文件拖放到您的主题中然后使用该主题的所有页面都继承 css。）稍后您甚至可以动态更改主题。

希望这可以帮助您完成您所寻找的工作，如果不是从我所学到的知识中了解 ASP.net 站点如何工作的话。我只是在学习自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:11:38.527

您不需要应用程序来为您编写 css。只需[给自己买一本](http://www.amazon.co.uk/s/ref=sr_nr_scat_266239_ln?rh=n:266239,k%3acss&keywords=css&ie=UTF8&qid=1344416938&scn=266239&h=8f3009005d767a400e89704c266cac517d885f7a)关于 CSS 的书或阅读一些[在线教程](http://webdesign.about.com/od/xhtml/u/htmlcssxml.htm?nl=1#s6)来帮助您入门。

然后创建一个并自己编写代码。这样你就可以完全控制正在发生的事情。这并不意味着您不会花一些时间来追踪奇怪的行为，但这都是学习曲线的一部分。

# html - 制作由多个下拉菜单组成的表格

> ID：11696094
> 
> 赞同：-1
> 
> 时间：2012-07-27T21:49:48.203
> 
> 标签：html, drop-down-menu, hyperlink

*我目前正在用html*制作一个带有一系列下拉菜单的网页。该网站在这里：[http ://tc.met.psu.edu/tcgengifs/index2.html](http://tc.met.psu.edu/tcgengifs/index2.html)

我正在使用以下代码制作下拉菜单

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
       function getUrl() {
              var part12 = document.getElementById("firstChoice2").value;
              var part22 = document.getElementById("secondChoice2").value;
              var part32 = document.getElementById("thirdChoice2").value;
               return "http://tc.met.psu.edu/tcgengifs/CMC/"+part12+"/"+part22+part32;
}
      function gotoSelection() {
         var urlToGoTo = getUrl();
         alert(urlToGoTo);
        //location.href=urlToGoTo;

      function setupLink() {
      var urlToGoTo = getUrl();
      document.getElementById("gotoLink").href=UrlToGoTo;
          }
 </script>
</head>
 <body onload="setupLink();">
<div id=leftcol>
<select id =firstChoice2 onchange="setupLink();">
    <option value=2012072600>2012072600</option>
    <option value=2012072512>2012072512</option>
</select>
</div>
<body>
<div id=leftcencol>
<select id =secondChoice2 onchange="setupLink();">
<option value=rain>Rainfall</option>
<option value=slp>Sea Level Pressure</option>
<option value=850virt>850mb Virtual Temperature</option>
</select>
</div>
<div id=rightcencol>
 <select id =thirdChoice2 onchange="setupLink();">
     <option value=.anim.html>Animation</option>
     <option value=0.png>000hr</option>
     <option value=1.png>006hr</option>
     <option value=2.png>012hr</option>
</select>
</div>
<div id=rightcol>
<a id="gotoLink" href="">Submit</a> 
```

我的问题是我需要多次使用此代码（经过修改），但是当我这样做时，每个系列的 3 个下拉菜单的提交按钮会将我带到最后一段代码旨在将我带到的站点. 如何分隔代码，以便三个下拉列表的第一个系列不受任何其他系列的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:50:44.870

您的第二个函数 gotoSelection() 缺少右括号，但这不是导致您的问题的原因。

您将 URL 传递回锚点的方式是不正确的尝试；

```
document.getElementById("gotoLink").setAttribute("href",urlToGoTo); 
```

在您的 setupLink() 函数中替换该行；

```
document.getElementById("gotoLink").href=UrlToGoTo; 
```

# php - 使用隐藏字段进行帖子编辑的安全问题

> ID：11696098
> 
> 赞同：0
> 
> 时间：2012-07-27T21:49:55.920
> 
> 标签：php, codeigniter

所以我有一个用于编辑帖子的页面。假设用户访问 site.dev/post/edit/104 以获取一个表单，其中填充了数据库中该帖子的所有数据。

我将帖子 ID 存储在一个隐藏字段中，以便更容易访问我在页面上拥有的一些 ajax 组件。

现在，我可以打开 FireBug 并在隐藏字段中更改帖子 ID 没问题。如何阻止恶意用户编写一个简单的脚本来更改帖子 ID 并用他们在该表单中填写的任何内容覆盖数据库中的每个帖子 ID？

当然，用户必须经过身份验证才能访问该页面，并且我在服务器端进行验证以确保帖子 ID 和其他字段具有可接受的值，但只要帖子 ID 是整数，它就会更新商场。我想这仍然是一个问题，它是由 URL 中的查询字符串传递的，但是页面至少会加载所有内容。

我对此有点困惑，我现在真的想不出一个更“安全”的替代方案。有什么方法可以防止这种情况吗？

如果有任何与之相关的建议，我正在使用 Codeigniter 进行构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:33:53.920

为了使您的变量更安全，您可以使用 CI 的加密类。您只需在配置文件中设置加密密钥，在控制器中加载库并使用以下代码加密 ID：

```
$id = 1;
$encrypted_id = $this->encrypt->encode($id); 
```

因此，当您打印 URL 时，不是直接将 id 打印为整数，而是打印 encrypted_id。用户将不知道这意味着什么，只要它没有您的密钥，它就无法解码 id：D

当您收到编码后的 id 时，您可以使用加密类的 decode() 方法对其进行解码。

欲了解更多信息，请访问： [http ://codeigniter.com/user_guide/libraries/encryption.html](http://codeigniter.com/user_guide/libraries/encryption.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:58:52.903

如果您谈论的是管理员页面，那么就没有真正的安全问题，如果管理员想要更改任何帖子，他/她无论如何都可以这样做。

如果它是一个用户页面，用户可以在其中更改他/她自己的帖子，那么您可以简单地检查是否是经过身份验证的用户首先发布了帖子。

核心原则；有一种方法可以随时检查哪个用户发送了请求，其余的取决于您的接收脚本来验证。为此，您不能相信用户如实说出他/她是谁（即，您不能将用户 ID 保存在隐藏的帖子字段中，因此如果您使用 ajax 请求，请使用会话 ID 或类似名称） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:18:18.370

一般来说，用户输入是不可信的。没有任何机制可以阻止用户更改发送到服务器的内容。必须为每个请求验证所有数据。在这种情况下，这意味着检查帖子 ID 是否有效以及用户是否有权对其进行编辑。只要您执行这些检查，用户是否发送手工制作的请求实际上并不重要，因为他无法通过正常使用您的网站做任何事情。

当然，这意味着您需要一种方法来识别哪个用户发送了特定请求。如果您为此目的使用会话 ID，则必须确保它们是随机生成的，以便用户无法猜测属于其他用户的有效 ID。

# api - 带有消息“通过的适配器不是 HTTP 连接适配器”的“Zend_Http_Client_Exception”

> ID：11696106
> 
> 赞同：1
> 
> 时间：2012-07-27T21:50:19.480
> 
> 标签：api, zend-framework, upload, youtube

这让我发疯了。我真的很讨厌发布问题，但“来了”。

我能够使用 Zend Gdata API for You Tube 上传视频。“一个视频”...

自从我收到此错误以来：

```
Fatal error: Uncaught exception 'Zend_Http_Client_Exception' with message
'Passed adapter is not a HTTP connection adapter'
in ../pathtoapp/Zend/Http/Client.php:926

Stack trace:
    #0 ../pathtoapp/Zend/library/Zend/Gdata/HttpClient.php(275): Zend_Http_Client->setAdapter(Object(__PHP_Incomplete_Class))
    #1 ../pathtoapp/Zend/library/Zend/Gdata/App.php(692): Zend_Gdata_HttpClient->setAdapter(Object(__PHP_Incomplete_Class))
    #2 ../pathtoapp/Zend/library/Zend/Gdata.php(219): Zend_Gdata_App->performHttpRequest('POST', 'http://uploads....', Array, Object(Zend_Gdata_MediaMimeStream), 'multipart/relat...', NULL)
    #3 ../pathtoapp/Zend/library/Zend/Gdata/App.php(910): Zend_Gdata->performHttpRequest('POST', 'http://uploads....', Array, Object(Zend_Gdata_MediaMimeStream), 'multipart/relat...')
    #4 /home/spotya/public_html/devblogpost/php/Zend/library/Zend/Gdata/App.php(985): Zend_Gdata_App-> in ../pathtoapp/Zend/library/Zend/Http/Client.php on line 926 
```

我发现的类似帖子已经解决了这个问题，但他们的解决方案对我不起作用。

我的代码：

```
error_reporting(E_ALL);
require_once('Zend/Loader.php');
require_once('../../includes/defines.php');

Zend_Loader::loadClass('Zend_Gdata_HttpClient');
$client = new Zend_Gdata_HttpClient();

$developerKey = '';
$applicationID = '';
$clientID = '';

$sql = "SELECT * FROM `you_tube_credentials` WHERE `user_id` = '1'";
$auth = $db->FetchAssoc($db->Query($sql));
if($auth['id'] == '') // If Auth Key not stored in DB get one
{
        $authenticationURL= 'https://www.google.com/accounts/ClientLogin';
        Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
        $httpClient = Zend_Gdata_ClientLogin::getHttpClient(
                          $username = '',
                          $password = '',
                          $service = 'youtube',
                          $client = null,
                          $source = 'My Videos', // a short string identifying your application
                          $loginToken = null,
                          $loginCaptcha = null,
                          $authenticationURL
                       );
    $httpClient_ser = serialize($httpClient);
    $sql = "INSERT INTO `you_tube_credentials` (`user_id`,`user_name`,`password`,`application`,`developer_key`,`http_client`)
                        VALUES
            (1,'social@spotya.com','XXXXXXX','Spotya Videos','".$db->Escape($developerKey)."','".$db->Escape($httpClient_ser)."')";
    $db->Query($sql);
    header('location: youtube.php');
}
else
{
    $httpClient = unserialize($auth['http_client']);
}
$sql = "SELECT * FROM `video_cue` WHERE `posted` < 4 AND `post_datetime` < '".date('Y-m-d H:i:m')."'";

$result = $db->Query($sql);
while($row = $db->FetchAssoc($result))
{
    $transactionid = time();
    Zend_Loader::loadClass('Zend_Gdata_YouTube');

    $yt = new Zend_Gdata_YouTube($httpClient,"Spotya Videos",$clientID,$developerKey);

    // create a new VideoEntry object
    $myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();

    // create a new Zend_Gdata_App_MediaFileSource object
    $filesource = $yt->newMediaFileSource(realpath('/pathtovideo/video_auto_upload/'.$row['file_name']));
    //$filesource = $yt->newMediaFileSource(realpath('Wildlife.mp4'));

    $filesource->setContentType('video/mp4');
    // set slug header
    $filesource->setSlug($row['file_name']);

    // add the filesource to the video entry
    $myVideoEntry->setMediaSource($filesource);

    $myVideoEntry->setVideoTitle($row['title']);
    $myVideoEntry->setVideoDescription($row['description']);
    // The category must be a valid YouTube category!
    $myVideoEntry->setVideoCategory('Education');

    // Set keywords. Please note that this must be a comma-separated string
    // and that individual keywords cannot contain whitespace
    $myVideoEntry->SetVideoTags($row['tags']);

    // upload URI for the currently authenticated user
    $uploadUrl = 'http://uploads.gdata.youtube.com/feeds/api/users/default/uploads';
    // try to upload the video, catching a Zend_Gdata_App_HttpException, 
    // if available, or just a regular Zend_Gdata_App_Exception otherwise

      $sql = "INSERT INTO `video_post_log` (`transactionid`,`sent`,`status`)
          VALUES ('".$transactionid."',
                  '".$db->Escape(serialize($myVideoEntry))."',
                  'Initialized')";
    $db->Query($sql);
    try
    {
        $result = $yt->insertEntry($myVideoEntry, $uploadUrl, 'Zend_Gdata_YouTube_VideoEntry');
    }
    catch (Zend_Gdata_App_HttpException $httpException)
    {
        $result = $httpException->getRawResponseBody();
    }
    catch (Zend_Gdata_App_Exception $e)
    {
        $result = $e->getMessage();
    }

    if(is_array($result) == true || is_object($result) == true)
    {
        if(strpos($result,'xml') === false)
        {
            $result = serialize($result);
        }
    }
    $sql = "UPDATE `video_post_log` SET `result`= '".$db->Escape($result)."',`status` = 'Complete' WHERE `transactionid` = '".$transactionid."'";
    $db->Query($sql);
    $sql = "UPDATE `video_cue` SET `posted`=`posted`+1 WHERE `file_name` = '".$row['file_name']."'";
    $db->Query($sql);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:05:00.710

我在堆栈跟踪中注意到了这一点：

```
Zend_Gdata_HttpClient->setAdapter(Object(__PHP_Incomplete_Class)) 
```

注意它是如何说它正在将一个`__PHP_Incomplete_Class`对象传递给`setAdapter`.

我的猜测是，当您从数据库中提取对象并对其进行反序列化时，您正在反序列化的类不会被加载，这就是它成为`__PHP_Incomplete_Class`对象的原因。

在尝试从数据库中反序列化 HTTP 客户端之前，请尝试添加此代码：

```
else
{
    Zend_Loader_Autoloader::autoload('Zend_Gdata_HttpClient');
    $httpClient = unserialize($auth['http_client']);
} 
```

通过预加载类，当你调用反序列化时，它应该作为一个`Zend_Gdata_HttpClient`而不是不完整的类出来。

如果这不起作用，请尝试加载`Zend_Http_Client`，因为这是`Zend_Gdata_HttpClient`扩展的内容。

**编辑：**也尝试使用较新的自动加载器；代替：

```
require_once('Zend/Loader.php');
Zend_Loader::loadClass('Zend_Gdata_HttpClient'); 
```

和：

```
require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_Loader_Autoloader::getInstance(); // this sets up the ZF autoloader

Zend_Loader_Autoloader::autoload('Zend_Gdata_HttpClient'); 
```

# iphone - 无法保留 CGPath 对象（出现警告）

> ID：11696107
> 
> 赞同：1
> 
> 时间：2012-07-27T21:50:25.677
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

我有一个实例变量`CGMutablePathRef _mutablePath`，我设置为`@property (nonatomic) CGMutablePathRef mutablePath;`. 我重写了setter方法：

```
- (void) setMutablePath:(CGMutablePathRef)mutablePath
{
    if (_mutablePath)
    {
        CGPathRelease(_mutablePath);
        _mutablePath = NULL;
    }

    _mutablePath = CGPathRetain(mutablePath);
} 
```

但是我在这一行收到警告：上面`_mutablePath = CGPathRetain(mutablePath);`写着：

```
Assigning to 'CGMutablePathRef' (aka 'struct CGPath *') from 'CGPathRef' (aka 'const struct CGPath *') discards qualifiers 
```

为什么这行不通？当我这样做时，这似乎适用于 CT（核心文本）对象。我尝试了一堆不同的演员阵容，但无法让错误消失，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:55:27.753

`CGPathRetain()`被声明为

```
CGPathRef CGPathRetain(CGPathRef path); 
```

这意味着它返回 a`CGPathRef`而不是 a `CGMutablePathRef`。`CGMutablePathRef`在将结果分配给您的`_mutablePath`ivar之前，您应该将结果转换回。

# ember.js - 没有静态路径的 Emberjs 绑定？

> ID：11696108
> 
> 赞同：1
> 
> 时间：2012-07-27T21:50:32.140
> 
> 标签：ember.js

我在一个函数中有两个可用的 ember 对象，但我似乎无法弄清楚如何在它们之间创建绑定，因为我无法通过静态路径引用它们。这些对象在 javascript 函数中被引用为`var a`和。`var b`

当我无法引用其中一个对象`App.controller.content`或类似对象时，如何在两个对象之间创建绑定？

或者，我可以通过一些静态路径引用 ArrayControllers 内容中的特定 ember 对象吗？我已经在这两个对象上尝试了 getPath 方法的许多变体，但似乎无法让它返回有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:25:11.943

所有路径都必须相对于“this”（无论对象是什么，或者应用中的内容），或者如您所说，全局路径。但是，一旦您进入您提到的功能，就没有什么能阻止您设置相对路径。

```
a.set('b': b);

a.set('someMethod', function(){
    return this.getPath('b.methodName');
}.property('b.methodName')); 
```

一旦它们相互引用，您就可以将相对路径添加到您的心脏内容中。我宁愿这样做而不是创建具有相对范围的方法，这样您就不会错过任何更新值。

我创建了一个简单的[jsfiddle](http://jsfiddle.net/scispear/uFKwz/)来向您展示我的意思。我通常会创建一个视图等，但试图将其保持在几行。

话虽如此，我觉得您应该能够通过在绑定上设置 _to 或 _from 直接在对象之间绑定。但是通过该代码，似乎一切都是相对的和基于路径的。也许转换的东西会在框架的 1.0 版本中发生变化。

# php - 为 Zend Framework 2 做准备（命名空间控制器）

> ID：11696109
> 
> 赞同：1
> 
> 时间：2012-07-27T21:50:46.877
> 
> 标签：php, zend-framework, namespaces, zend-framework2

随着 Zend Framework 2 的稳定版本即将出现，我们一直在慢慢实现一些 ZF2 组件、更改约定、实现命名空间等。在迁移之前让我们所有的控制器命名空间会很好，只是为了简单的事情，但我还没有找到实现这个目标的好方法。

有人对 ZF1 中的控制器命名空间有什么建议吗？此时我不介意编辑 ZF1 库文件。

```
namespace Product;

use Zend_Controller_Action as AbstractActionController;

class IndexController extends AbstractActionController
{} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:21:45.513

花了一段时间，但我发现这可以通过自定义调度程序完成：

```
<?php

namespace Webjawns\Controller\Dispatcher;

use Zend_Controller_Dispatcher_Standard as Dispatcher;

class Standard extends Dispatcher
{
    /**
     * Format action class name
     *
     * @param string $moduleName Name of the current module
     * @param string $className Name of the action class
     * @return string Formatted class name
     */
    public function formatClassName($moduleName, $className)
    {
        return $this->formatModuleName($moduleName) . '\Controller\\' . $className;
    }

    /**
     * Convert a class name to a filename
     *
     * @param string $class
     * @return string
     */
    public function classToFilename($class)
    {
        return str_replace('\\', DIRECTORY_SEPARATOR, $class) . '.php';
    }
} 
```

然后在应用程序入口点的某处：

```
Zend_Controller_Front::getInstance()->setDispatcher(
    new \Webjawns\Controller\Dispatcher\Standard()); 
```

# linux - 使用分隔符分隔 awk 文件

> ID：11696111
> 
> 赞同：1
> 
> 时间：2012-07-27T21:50:49.680
> 
> 标签：linux, shell, awk

给定这个输入文件：

```
SectionMarker and some random text here
this is the text in section 1 
this is the text in section 1
this is the text in section 1
etc
SectionMarker and some random text here also
this is the text in section 2 
this is the text in section 2
this is the text in section 2
etc
SectionMarker and some random text too
this is the text in section 3 
this is the text in section 3
this is the text in section 3
etc 
```

如何使用 awk 或 sed 或其他方法将此文件拆分为几部分？

这是我尝试过的，但没有奏效：

```
awk -vRS='\SectionMarker[:print:]\n' 'NR==1 {print}' ./data.log 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:16:16.690

这个单线应该可以完成这项工作：

```
 awk '{x+=($0~/^SectionMarker/)?1:0}x<2' data.log 
```

测试

```
kent$  cat data.log
SectionMarker and some random text here
this is the text in section 1 
this is the text in section 1
this is the text in section 1
etc
SectionMarker and some random text here also
this is the text in section 2 
this is the text in section 2
this is the text in section 2
etc
SectionMarker and some random text too
this is the text in section 3 
this is the text in section 3
this is the text in section 3
etc

kent$  awk '{x+=($0~/^SectionMarker/)?1:0}x<2' data.log
SectionMarker and some random text here
this is the text in section 1 
this is the text in section 1
this is the text in section 1
etc 
```

我不知道你想抓住你真正问题的多少部分。你可以放在`exit;`那个在线网站上，让 awk 不处理整个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:33:08.577

这是使用`awk`和读取分隔符的一种方式。我添加了一个名为 的额外变量`var`，它可用于轻松选择所需的“部分”。例如，当 时`var=2`，将打印第 2 节。IE：

```
awk -v var=2 -v RS='SectionMarker[^\n]*' -v FS='\n' 'NR == var + 1 { for (i=2; i<NF; i++) print $i }' file.txt 
```

印刷：

```
this is the text in section 2 
this is the text in section 2
this is the text in section 2
etc 
```

高温高压

# centos - Centos 上的 yum 停留在“加载的插件：fastestmirror”

> ID：11696113
> 
> 赞同：20
> 
> 时间：2012-07-27T21:51:10.963
> 
> 标签：centos, yum

在 Centos 上尝试使用 yum 安装软件包时，该命令卡在第一部分：

```
loaded plugins: fastestmirror 
```

我试过了：

1.  删除 /var/cache/yum/timedhosts.txt[查看建议](https://superuser.com/questions/384963/yum-hangs-and-wont-respond)
2.  百胜更新百胜
3.  确保没有其他进程正在运行并删除 /var/run/yum.pid
4.  yum clean all[查看建议](https://serverfault.com/questions/271248/yum-stucks-on-update-centos-5-6)
5.  检查 DNS 是否适用于 /etc/yum.repos.d/*.repo 文件中的所有服务器
6.  在 vi /etc/yum/pluginconf.d/fastestmirror.conf 中设置启用标志 // enabled=0[见建议](http://www.adminspoint.com/server-administration/355-yum-disable-fastestmirror-plugin-centos.html)

...仍然有问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T22:35:59.820

对我来说，最终修复它的是：

```
rm -f /var/lib/rpm/__*
rpm --rebuilddb -v -v 
```

然后重新运行我最初尝试运行的 yum 命令。

它在以下位置卡住了大约一分钟：

```
Determining fastest mirrors 
```

...但后来它没有错误地完成

[在这里推荐](http://www.webhostingtalk.com/showthread.php?t=1049988)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-13T01:19:19.877

为我工作：（[+](http://www.webhostingtalk.com/showthread.php?t=1049988)）

编辑以下文件。

```
/etc/yum/pluginconf.d/fastestmirror.conf 
```

更改`enabled=1`为`enabled=0`禁用最快的morror 插件。

那应该解决它。

您无需重新启动任何内容即可使该更改生效。再次运行 yum。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-28T06:21:48.183

如果您仅使用 ipv4 地址但 ipv6 地址处于活动状态。禁用 ipv6 地址，然后重试。

```
#vi /etc/sysctl.conf 

net.ipv6.conf.eth0.disable_ipv6 = 1

#sysctl -p 
```

# ajax - Ajax 世界中的任何视图状态需求

> ID：11696114
> 
> 赞同：0
> 
> 时间：2012-07-27T21:51:16.993
> 
> 标签：ajax, client-server, viewstate, updating

我想创建必须完全启用 ajax 的页面，并且我觉得不需要视图状态，并且在使用 ajax 时更新视图状态非常令人困惑。我不想使用更新面板。我想使用 ajax 手动更新我的 aspx 页面，这样做让我惊呆了。在这种情况下，我应该使用 asp.net 控件。asp.net 的整个模型看起来很笨拙。服务器和客户端试图对糟糕的 html 页面施加不同的标准。请帮助这已成为我的噩梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:57:31.763

如果您使用的是 asp.net 控件，并且由于您提到了 viewstate，我认为您正在构建一个 webforms 应用程序。.net 控件需要 viewstate、scriptmanager 和所有的花里胡哨。

但是，如果您想保持一切轻量级，我建议使用 asmx 服务并从客户端调用这些服务。这样您就不需要使用任何视图状态、.net 控件或脚本管理器。

# xcode - Visual Studio 代码片段存根

> ID：11696116
> 
> 赞同：0
> 
> 时间：2012-07-27T21:51:25.057
> 
> 标签：xcode, token, code-snippets

VS 是否具有代码片段功能，您可以在片段中插入占位符/存根/标记，在展开初始快捷方式后，您可以在标记之间切换标记？

如果您熟悉 Xcode，则 Xcode 的方法自动完成功能会在您使用制表符完成方法后为每个方法参数插入一个标记。

用 VS 来做这件事会很好。我知道 VS 允许您使用 XML 文件制作自己的片段，但是有没有办法获得该令牌？这将使实现方法存根、类存根等变得容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:53:46.850

您所有问题的答案都是肯定的！VS 包含一个片段功能。您可以在这里阅读所有相关信息：http: [//msdn.microsoft.com/en-us/library/ms165392 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms165392(v=vs.80).aspx)

# mysql - 仅返回 Mysql 查询中的特定行

> ID：11696121
> 
> 赞同：0
> 
> 时间：2012-07-27T21:51:54.313
> 
> 标签：mysql

我的应用程序是我正在编写的视频游戏，我正在尝试编写一个脚本来在地图上移动我的生物。所以我试图返回唯一的 spawn_id、posx、posy 组合（每个唯一组合只有 1 行）返回哪个 id 是我的关键字段并不重要。

```
SELECT id,spawn_id,posx,posy,land,movelimit,next_turn FROM `game_moblist` WHERE 1 GROUP BY spawn_id,posx,posy 
```

所以给定数据

```
id spawn_id posx posy
1  1        55   55
2  1        55   55
3  1        110  55 
```

查询应该返回第 1 行和第 3 行（或者 2 和 3 并不重要），但不是 1,2 和 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:01:55.893

您快到了。

```
SELECT
    spawn_id, posx, posy, MIN(id) AS Id
FROM
    game_moblist
GROUP BY
    spawn_id, posx, posy 
```

您也可以只返回 ID 列表，然后在其他查询中加入：

```
SELECT
    MIN(id) AS Id
FROM
    game_moblist
GROUP BY
    spawn_id, posx, posy 
```

# c#-4.0 - 我需要服务总线来处理简单的异步命令吗？

> ID：11696122
> 
> 赞同：0
> 
> 时间：2012-07-27T21:51:56.617
> 
> 标签：c#-4.0, domain-driven-design, cqrs, message-bus

我的系统使用带有单独处理程序的命令模式。我的命令在当前处理所有正在处理的命令的 CommandService 上执行。

我有某些命令至少会执行其中一项缓慢的操作：

1.  发送电子邮件
2.  生成 PDF
3.  发送传真
4.  与第 3 方 Web 服务交互

我希望所有这些命令都在进程外处理，以便 UI 更加灵活。

我应该只为这些命令使用消息总线，还是应该调用进程内命令处理程序`BeginInvoke()`？

# 编辑 - 附加信息

该系统的用户数量很少（在忙碌的一天可能有 100 个并发用户），因此队列可能永远不会变得很长。这里的主要内容是减少发送带有附件 PDF（相关命令）的电子邮件时 UI 被阻止的时间。员工必须在一天内多次执行该命令。

考虑到整个情况，我想我现在要考虑`BeginInvoke()`以下几个原因：

1.  必须触摸所有 UI 交互以确保它们的行为就像命令成功一样。“您需要发送此文档”的提醒在 UI 中的多个位置，并且在发送报告后会刷新整页。
2.  这是我客户繁忙季节的中间时间（他们在夏季完成了超过 50% 的年度业务），所以此时引入一个我不熟悉的全新基础架构对我来说似乎并不明智管理.

但是知道我现在所知道的，在一个新系统上，我会从一开始就使用服务总线来处理任何慢速命令（实际上每个系统都需要发送电子邮件）并设计 UI，以便更容易地从同步切换命令到异步处理。在实现中，这基本上意味着每个 POST 都是 AJAX 并在 UI 中执行一个动作，就好像它成功了一样。（例如，查看 Facebook 如何处理评论。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:15:13.997

可能更多的是可靠性问题，将您推向消息总线。您会看到，如果您的原始事务（执行 BeginInvoke 的事务）成功，然后在您调用的中途服务器崩溃，您的系统将没有内存，它仍然需要发送电子邮件或生成 PDF .

消息总线将能够将第二个事务回滚到队列中，以便当服务器再次启动时，它会再次发送电子邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T23:14:21.747

两种解决方案都有其优点和缺点。

*   BeginInvoke 是非常简单的解决方案，其语义与直接通过命令调用处理程序相同。但是这个解决方案取决于线程基础设施：最大线程数、由于并发访问 IO 资源而导致的冻结线程等。
*   MessageBus 是非常灵活且功能强大的解决方案，您可以在其中控制命令处理过程的各个方面。但是它为您的应用程序引入了另一个抽象层，如果更简单意味着更好，这将是一个过度工程

我建议估计您的系统负载要求、这些后台任务的数量、增长因素等，并据此做出决定。

但在我个人看来，引入适用于 80% 案例的总线解决方案。您可以引入一个简单的总线实现，如果需要，可以在下一次迭代中进行扩展。

# core-data - 没有 UI 的应用程序中 NSManagedObjects 的基本方法

> ID：11696123
> 
> 赞同：0
> 
> 时间：2012-07-27T21:52:04.340
> 
> 标签：core-data, nsmanagedobjectcontext

我正在编写一个客户端/服务器 Cocoa 应用程序。应用程序服务器没有 UI。为了简化这个问题，请考虑通过 CFNetwork 流（不是 Web 应用程序）移动数据。每个 iOS 客户端都可以请求 OSX 应用服务器执行的任务，例如：

*   获取并返回一条记录或一组记录
*   创建记录
*   更新记录

我看到了 UI 示例，其中 NSManagedObjectContext 数据由 NSObjectController/NSArrayController 管理并绑定到视图。

我不会在服务器上拥有视图，并且我知道我不应该将此功能移动到 AppDelegate 中。

我应该使用什么方法？例如，我是否应该创建每个类都响应一组相关的客户端请求，其中每个类都拥有与其工作单元相关的 NSManagedObjectContext？原谅我的伪代码：

```
@interface AccountManagement : NSObject
NSManagedObjectContext *contextAccounts;
-(void)fetchAccounts;
-(void)createAccount;
-(void)updateAccount;
@end

@interface SiteManagement : NSObject
NSManagedObjectContext *contextAccounts;
-(void)fetchSite;
-(void)createSite;
-(void)updateSite;
@end 
```

我也在努力了解 NSArrayController 是如何适应这种结构的，也许我不需要一个，因为没有 UI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:20:23.040

我认为您的`NSObject`派生类完全符合目标。您所做的与示例中的完全相同，只是省略了 UI 部分。

顺便说一句，你的两个类原型似乎有点多余（只是一个不同的实体）。我相信它们可以合二为一。

# c# - 我可以让标准货币格式使用负号而不是括号吗？

> ID：11696130
> 
> 赞同：22
> 
> 时间：2012-07-27T21:52:31.240
> 
> 标签：c#, asp.net

在我的项目中有很多地方我尝试使用内置`{0:C}`货币格式显示货币。如果该数字为负数，则将其包围在括号中的值。我希望它改用负号。

我的 web.config 的文化设置为`auto`，它解析为`en-US`.

理想的解决方案是一些全局 web.config 或其他设置，这将使`{0:C}`显示成为`en-US`文化的负面标志，但我也愿意接受其他不太棒的解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T21:59:43.520

您必须指定正确的[`NumberFormatInfo.CurrencyNegativePattern`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern.aspx)，这可能是 1。

```
Decimal dec = new Decimal(-1234.4321);
CultureInfo culture = CultureInfo.CreateSpecificCulture("en-US");
culture.NumberFormat.CurrencyNegativePattern = 1; 
String str = String.Format(culture, "{0:C}", dec);
Console.Write(str); 
```

演示：http: [//ideone.com/HxSqT](http://ideone.com/HxSqT)

输出：

```
-$1,234.43 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-27T22:17:07.393

我认为这里的答案组合会让你更接近你想要的。

```
protected void Application_BeginRequest()
{
    var ci = CultureInfo.GetCultureInfo("en-US");

    if (Thread.CurrentThread.CurrentCulture.DisplayName == ci.DisplayName)
    {
        ci = CultureInfo.CreateSpecificCulture("en-US");
        ci.NumberFormat.CurrencyNegativePattern = 1;
        Thread.CurrentThread.CurrentCulture = ci;
        Thread.CurrentThread.CurrentUICulture = ci;
    }
} 
```

如果你不想有任何代码来处理这样的单一文化......我相信你需要建立自己的文化......[检查这个问题](https://stackoverflow.com/questions/1167331/how-to-change-default-culture-settings-in-a-net-web-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:57:19.277

据我了解你的问题。

您想根据文化显示货币格式。

每次您做特定于文化的事情时，.NET 都会查看`Thread.CurrentThread.CurrentCulture`和`Thread.CurrentThread.CurrentUICulture`.

您可以在 ASP.NET 中的 global.asax`BeginRequest`方法中设置所需的区域性。

```
protected void Application_BeginRequest()
{
    var ci = CultureInfo.GetCultureInfo("en-US"); // put the culture you want in here

    Thread.CurrentThread.CurrentCulture = ci;
    Thread.CurrentThread.CurrentUICulture = ci;
} 
```

# couchdb - 在 CouchDB 验证方法中创建或更改文档

> ID：11696135
> 
> 赞同：1
> 
> 时间：2012-07-27T21:52:56.257
> 
> 标签：couchdb

我需要对不同的文档属性实施唯一约束，主要思想是拥有一个包含所有值的文档，当用户创建新文档时，我检查文档属性并将两个文档保存在 validate 方法中。

是否可以在 validate 方法中选择或更新其他文档，还是只有*oldDoc*和*newDoc*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:18:02.507

如[文档更新验证文档](http://wiki.apache.org/couchdb/Document_Update_Validation)中所述，传递给（即可用）验证函数的唯一内容是旧文档、新文档、用户上下文和数据库的安全对象。

# magento - Magento Connect Manager 抛出“没有发布，跳过”错误

> ID：11696136
> 
> 赞同：1
> 
> 时间：2012-07-27T21:52:57.953
> 
> 标签：magento

我正在寻找安装一个 Magento 扩展，每当我输入扩展密钥时，它都会向我抛出错误：

```
community/gtspeed_by_gossamer_threads: No releases for 'gtspeed_by_gossamer_threads', skipping 
```

许多人已经发布了关于这个完全相同的问题，并且能够通过切换他们的首选状态以匹配扩展的版本来修复它。这对我不起作用。我尝试过使用 Alpha、Beta 和 Stable，但没有任何效果。我认为它可能与这个特定的扩展包有关，但我尝试安装一些其他扩展并抛出相同的错误，即使直接从 MCM 界面重新安装 Mage_Downloader 包也是如此。上传包文件也没有这样做。

有没有其他人遇到过这个问题，或者知道如何解决这个问题？这更令人沮丧，因为我之前已经安装了扩展，我想这可能是一个相对简单的配置更改。我目前正在运行 Magento v. 1.7.0.2 和 MCM v. 1.7.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:21:11.460

我发现出了什么问题，或者更恰当地说，是我如何错误地配置了 Connect Manager。我尝试了 downloader/ 目录的许多权限配置，通过 pear 安装，手动解压扩展包（我仍然不清楚为什么这不起作用）。问题在于连接通道协议——它被设置为 FTP 而不是 HTTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:02:10.827

检查您尝试安装的版本，因为您使用的是最新版本的 Magento，因此如果该模块可用，则需要安装 2.0 版。

很高兴帮助你:)

# objective-c - 呈现模态视图控制器时对开始/结束外观转换的不平衡调用

> ID：11696137
> 
> 赞同：0
> 
> 时间：2012-07-27T21:53:01.803
> 
> 标签：objective-c, ios, uikit, viewcontroller

我正在向我的应用程序添加一个帮助覆盖视图，类似于 Fandango 的帮助视图，并且在控制台中收到一条奇怪的消息。该应用程序不会崩溃，但我认为当我的另一个视图尚未完全完成时呈现模态视图可能会导致问题。

我在控制台中收到的消息是：对 .

这是我在我的应用程序中所做的：didFinishLaunchingWithOptions：

```
- (BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[NSUserDefaults standardUserDefaults] registerDefaults:
        [NSDictionary dictionaryWithContentsOfFile:
            [[NSBundle mainBundle] pathForResource:@"Defaults" ofType:@"plist"]]];

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"showHelpOverlay"]) {
        [self.viewController presentHelpOverlayViewController];
    }
} 
```

也许我应该在 viewDidLoad 的主视图控制器中调用我的方法或其他什么？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:57:31.367

是的。这是正确的。

你可以这样做，或者

使用 nstimer 调用 presentHelpOverlayViewController 有一些延迟

# php - php包含打印'1'

> ID：11696139
> 
> 赞同：2
> 
> 时间：2012-07-27T21:53:09.087
> 
> 标签：php, include

> **可能重复：**
> [php包含打印1](https://stackoverflow.com/questions/5086695/php-include-prints-1)

```
$html = '<div class="subscribe_user"><span id="question1"><a href="#" id="subscribe_link" data-category="'.$category.'">
                Subscribe to comments made on '.$category.'</a></span></div>' . include(SUBSCRIBE_USER_BASE_DIR . '/includes/av_subscribe_form.php'); 
```

这个包含文件是一个带有一些 PHP 变量的 HTML 表单。

我通过插件返回 $html：

```
return $html; 
```

但我无法摆脱附加到输出的“1”。当然这意味着输入文件是成功的，但是我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T21:55:51.987

由于您可能希望处理 PHP 并将输出存储在变量中，因此这可以解决问题：

```
ob_start();
include(SUBSCRIBE_USER_BASE_DIR . '/includes/av_subscribe_form.php');
$include = ob_get_clean();

$html = '<div class="subscribe_user"><span id="question1"><a href="#" id="subscribe_link" data-category="'.$category.'">
                    Subscribe to comments made on '.$category.'</a></span></div>' . $include; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T22:03:46.843

好的，`include`结合使用`return string`至少感觉是一种非常不寻常的方式来做到这一点。

首先想象一下这种情况：

### 返回.php：

```
$html = 'blah blah blah';
return $html; 
```

### 测试.php：

```
$html = 'foo';
$html .= include( 'return.php') . 'bar'; 
```

想想看；）您包含的脚本应该覆盖全局变量。执行此操作时，您必须非常小心不要覆盖任何内容。

我强烈建议你宁愿为此使用函数、类、插件（这么多选项）而不是使用`return $string`，但首先尝试重命名变量。

你确定你使用的是 return 而不是 echo （在表单脚本中）？仅使用普通的 html 与 using 相同`echo`，您必须使用`return`才能像那样使用它，看看[Example #5 include 和 return 语句](http://php.net/manual/en/function.include.php)。

可能`file_get_contents('form')`是适合您的解决方案。

### 根据您的评论：

如果你有这样的文件：

**表格.php：**

```
<form><blah blah blah></form> 
```

这相当于拥有：

```
<?php
echo '<form><blah blah blah></form>';
return 1; 
```

如果你能做到：

```
<?php
$html = '<form><blah blah blah></form>'; 
```

最后还是会有隐含`return 1`的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:57:29.730

编辑`/includes/av_subscribe_form.php`及其`return`内容。然后它会返回你想要的而不是`1`成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T21:56:50.070

你应该这样做（如果你的包含返回一些东西，否则，只包含，不要附加）：

```
$html = '...';
$return = include(SUBSCRIBE_USER_BASE_DIR . '/includes/av_subscribe_form.php');
$html .= $return; 
```

这在[PHP 文档](http://php.net/manual/en/function.include.php)中也有说明（请参阅处理返回）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T21:59:11.930

您正在将 include 的结果连接到您的 string`$html`中。

您可以执行以下操作：

```
$var = (include 'file.php');
$html = '<div class="subscribe_user"><span id="question1"><a href="#" id="subscribe_link" data-category="'.$category.'">
            Subscribe to comments made on '.$category.'</a></span></div>'. $var; 
```

您不能为变量分配 include 的函数版本的值，`include();`。参见[示例 4](http://www.php.net/manual/en/function.include.php)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T22:01:26.810

如果成功包含，include 返回 1，但理论上它应该在 case 中返回内容而不是 1。检查页面是否包含： http: [//php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

有实际内容吗？或者你只得到一个“1”？

你也可以这样做：

```
ob_start();
include("my_file.html");
$content = ob_get_contents();
echo $output; //prints the html content 
```

检查包含文件中是否写出任何内容

# qt - 如何制作一个标题为两行的 QGroupBox？

> ID：11696143
> 
> 赞同：2
> 
> 时间：2012-07-27T21:53:20.250
> 
> 标签：qt

我尝试使用在两行之间嵌入 \n 的字符串，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:02:30.913

换行符似乎有效：

```
#include <QtGui>

int main(int argc, char **argv)
{
    QApplication a(argc, argv);

    QGroupBox gb("This is the first line\nAnd this is line 2\nAnd 3");
    gb.show();

    return a.exec();
} 
```

在 Mac 上用 Qt 4.8 和 Qt 5 给我这个：

![在此处输入图像描述](../Images/9eab5c0fbce899a0692dc0938af1e3f9.png)

# jquery - 折叠时向下移动按钮展开

> ID：11696146
> 
> 赞同：-1
> 
> 时间：2012-07-27T21:53:23.450
> 
> 标签：jquery, html, css

所以我有代码让我的列表下拉和备份。现在我希望按钮可以双向使用。我设法把它弄下来，但备份不太好。我试图将按钮添加到带有列表的公共 div 中，但它不起作用，因为单击时间后按钮消失了。所以我真的想让它尽可能有风格，如果可能的话，添加一个慢动作效果和加载效果会很棒。

这是代码

html

```
<div id="right-column-sidebar">
    <ol>
        <li><a href="#">Title 1</a></li>
        <li><a href="#">Title 2</a></li>
        <li><a href="#">Title 3</a></li>
        <li><a href="#">Title 4</a></li>
        <li><a href="#">Title 5</a></li>
        <li><a href="#">Title 6</a></li>
        <li><a href="#">Title 7</a></li>
        <li><a href="#">Title 8</a></li>
        <li><a href="#">Title 9</a></li>
        <li><a href="#">Title 10</a></li>
        <li><a href="#">Title 11</a></li>
        <li><a href="#">Title 12</a></li>
        <li><a href="#">Title 13</a></li>
        <li><a href="#">Title 14</a></li>
        <li><a href="#">Title 15</a></li>
        <li><a href="#">Title 16</a></li>
        <li><a href="#">Title 17</a></li>
        <li><a href="#">Title 18</a></li>
        <li><a href="#">Title 19</a></li>
        <li><a href="#">Title 20</a></li>
    </ol>
</div> 
```

CSS

```
div#right-column-sidebar{
    position: absolute; 
    right: -140px;
}

div#right-column-sidebar ol{
    position:absolute; 
    right: 150px;
    margin: 10px 0 10px 10px;
    font-size: 20px;
    color: red;
    list-style-type:none
}

div#right-column-sidebar ol li {
    list-style-type:none;
    margin: 10px 0 10px 0; 
    border-bottom: 1px dotted grey; 
    width: 200px; display: block;
}

div#right-column-sidebar ol li a{
    font-size: 60%; color: blue;margin-left: 20px
}
div#right-column-sidebar ol li:nth-child(11){
    margin-left:0;
}      
div#right-column-sidebar ol li a:hover{
    text-decoration: underline;
}

a.button {
    border: 1px solid lightgrey;no-repeat scroll top right;
    color: #444;
    display: block;
    float: left;
    font: normal 12px arial, sans-serif;
    height: 24px;
    margin-right: 6px;
    padding-right: 18px; /* sliding doors padding */
    text-decoration: none;
}

a.button span {
    display: block;
    line-height: 14px;
    padding: 5px 0 5px 18px;
} 
```

jQuery

```
$(function(){
    $('div#right-column-sidebar ol li:gt(9)').hide();
    $('a.button').click( function() { 
        $('div#right-column-sidebar ol li:gt(9)').toggle(); 
        $('a.button').addClass('change-height');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:19:59.150

你想要类似的东西 - [http://jsfiddle.net/7CxG8/](http://jsfiddle.net/7CxG8/)吗？

我`position: absolute`从 中删除了 ，`ol`因此按钮意识到/响应了`ol`.

要获得“慢动作效果”，您只需传递一个数字作为 jquerys 切换函数的参数（3000 = 3s） - 它可以工作，但它不是您可以获得的最佳效果。我通常使用 css 过渡/动画创建自己的效果。

# javascript - jQuery 从 html 单元格中读取值

> ID：11696151
> 
> 赞同：0
> 
> 时间：2012-07-27T21:54:04.177
> 
> 标签：javascript, jquery

我想知道从 jQuery 中的 html 表中读取值的正确方法是什么？这是我的 HTML 代码：

```
<table>
<tr>
<td id="final">[['1.48E+02', '1.79E+03', '2.16E+04', '2.61E+05', '3.15E+06', '3.81E+07', '4.60E+08', '5.56E+09', '6.72E+10', '8.12E+11'], ['1.20E+01', '1.48E+02', '1.79E+03', '2.16E+04', '2.61E+05', '3.15E+06', '3.81E+07', '4.60E+08', '5.56E+09', '6.72E+10']]</td>
</tr>
</table> 
```

jQuery选择器：

```
var s1 = $.parseJSON($('#final').text());
// I have tried .val(), .html(), but those did not work. 
```

# 但是，如果我的 HTML 是以这种方式编写的，那么 jquery 代码可以工作：

```
<table>
<tr>
<td id="final">[[148.0, 1788.0, 21604.0, 261036.0, 3154036.0, 38109468.0, 460467652.0, 5563721292.0, 67225123156.0, 812265199164.0], [12.0, 148.0, 1788.0, 21604.0, 261036.0, 3154036.0, 38109468.0, 460467652.0, 5563721292.0, 67225123156.0]]</td>
</tr>
</table> 
```

任何人都可以帮助我处理第一个 HTML 情况的 jquery 代码吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:01:19.247

您可以尝试使用 eval：

```
var s1 = eval($('#final').text()); 
```

[JsFiddle 示例](http://jsfiddle.net/shawn31313/dVJVD/)

我发现 eval 只要您控制放入 eval 中的内容，就不会太糟糕。

[评估函数。](http://www.w3schools.com/jsref/jsref_eval.asp)

哦，另外，请注意，如果您不想使用它，请记住，在 JSON 中您不能使用单引号，否则它不会解析。您可以随时在此处检查有效的 JSON：http: [//jsonformatter.curiousconcept.com](http://jsonformatter.curiousconcept.com)。它会告诉你 JSON 中的所有错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T21:57:37.187

那是因为`[['1.48E+02', '1.79E+03', '2.16E+04', '2.61E+05', '3.15E+06', '3.81E+07', '4.60E+08', '5.56E+09', '6.72E+10', '8.12E+11'], ['1.20E+01', '1.48E+02', '1.79E+03', '2.16E+04', '2.61E+05', '3.15E+06', '3.81E+07', '4.60E+08', '5.56E+09', '6.72E+10']]`不是JSON，你必须用它`"`来表示字符串，没有单引号它们是数字。见[http://json.org](http://json.org)

# facebook-graph-api - Facebook Graph API 中的搜索结果显示

> ID：11696153
> 
> 赞同：0
> 
> 时间：2012-07-27T21:54:07.373
> 
> 标签：facebook-graph-api, facebook-c#-sdk

您好我目前正在使用 C# SDK 研究 Facebook Graph API 的搜索功能。

由于 C# SDK 源代码没有为此提供任何示例，因此我在下面的 web 上找到了，效果很好。

```
Dictionary<string, object> searchParams = new Dictionary<string, object>();
searchParams.Add("type", "post");
searchParams.Add("q", "olympic");
FacebookClient fbClient = new FacebookClient(token);
var rslt = fbClient.Get("/search", searchParams); 
```

我得到了 rslt，我可以在双引号中看到带有许多不同参数的字符串以及许多方括号和圆括号。

有没有人知道是否有正确的方法来显示这个结果？我不是在猜测手动解析，而是在 Facebook 库中放入某种方法或使用某种转换媒体直接查看..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:50:48.793

我不想回答我自己的问题，但是为了任何有类似问题的人。

我发现了两个相关的帖子，意识到我正在处理的是 JSON 格式。

他们鼓励使用 JObject、JSON.NET。

[在 C# 中解析 Facebook Open Graph API JSON 响应](https://stackoverflow.com/questions/3248267/parsing-facebook-open-graph-api-json-response-in-c-sharp)

[如何使用 C# 解析 JSON？](https://stackoverflow.com/questions/6620165/how-to-parse-json-in-c)

# audio - Mixed In Key 如何确定曲目的调？

> ID：11696161
> 
> 赞同：2
> 
> 时间：2012-07-27T21:55:17.600
> 
> 标签：audio

Mixed in Key 是一款分析 mp3 并确定歌曲调的软件，例如它会运行并告诉您歌曲大致是 F 小调还是 A 大调。

目的是帮助[https://en.wikipedia.org/wiki/Harmonic_mixing](https://en.wikipedia.org/wiki/Harmonic_mixing)

是否有从 PCM 波形推断密钥的标准算法？

警告：这里的音乐理论和信号处理新手：

是否像使用 DFT 并尝试将最常见的频率映射到音符，并将最主要的音符视为关键一样简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:36:42.793

它可能不是那么简单，但您建议的路径很可能是其中的一部分。

您可能需要评估许多音符以推断调号，然后评估最常见的和弦以区分大调和小调，或者可以想象，格里高利圣歌和一些爵士乐中使用的所有模态调，而不是只查看最常见的音符.

Mixed in Key 声称拥有专利算法，因此专利搜索可能会出现一些信息。

谷歌发现了一个看起来很有趣的[会议期刊引文](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=1385971)，但要获得这篇文章，你必须向 IEEE 支付一些费用，而我对此并没有足够的兴趣来花钱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:47:32.800

我对 Mixed in Key 专利的摘要的阅读是，它们确定了主要的音高和它们出现的顺序，并将其与其他录音的​​数据库进行比较，但我没有读过摘要：

[http://www.faqs.org/patents/app/20080314231](http://www.faqs.org/patents/app/20080314231)

我听说过对流行音乐的非正式研究表明，最常见的和弦通常不是“根”或键，而是“主调”。Dominant 是一个音乐理论术语，表示键中第二个最重要的音符/和弦：高于根音的五分之一。所以如果你听到的大部分是 E，这首歌可能是 E，但更可能是 A。这并不能告诉你大调还是小调，而且还不足以确定，所以 Mixed in Key 的看音序的技术显然更胜一筹.

# node.js - Node.js 安装 Synology ds212+ 错误

> ID：11696162
> 
> 赞同：3
> 
> 时间：2012-07-27T21:55:17.937
> 
> 标签：node.js, installation, environment

我目前正在我的 Synology ds212+ 上安装 Node.js 环境，但在运行 line 命令时出现问题。

当我试图做

> ./configure --prefix=/opt/node --without-snapshot

终端给我这个错误：

> Node.js 配置错误：找不到可接受的 C 编译器！
> 
> ```
>  Please make sure you have a C compiler installed on your system and/or
>     consider adjusting the CC environment variable if you installed
>     it in a non-standard prefix. 
> ```

问题是我安装了 gcc，当我使用 gcc -v 时，终端返回我编译器的当前版本。

在 Synology 环境中安装时是否有人遇到此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:29:04.337

我刚遇到这个问题，只需`ln -s /opt/bin/gcc /opt/bin/cc`让它工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T05:59:10.340

我认为问题在于 gcc 通常安装在 Synology 上的一个奇怪位置（/opt/bin/gcc）。为其配置正确的名称似乎有效。

```
CC=/opt/bin/gcc ./configure --prefix=/opt/node --without-snapshot 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:15:26.057

所以，我自己想通了。要做的是执行这一行：

```
git checkout v0.4.11
cp /opt/lib/libssl.so.0.9.8 /usr/lib
cp /opt/lib/libcrypto.so.0.9.8 /usr/lib 
```

现在您可以进行 make 和 make 安装了。

玩得开心。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-09T12:00:58.887

你需要在你的 MAC 上安装一个 gcc 编译器。请按照此处的说明进行操作：

[http://www.mkyong.com/mac/how-to-install-gcc-compiler-on-mac-os-x/](http://www.mkyong.com/mac/how-to-install-gcc-compiler-on-mac-os-x/)

# javascript - 以两种不同的方式使用函数

> ID：11696163
> 
> 赞同：0
> 
> 时间：2012-07-27T21:55:17.597
> 
> 标签：javascript, function

我正在创建一个附加到其他函数的函数。

喜欢：

```
string("Hi").capitilize()//returns hi 
```

我希望能够以两种不同的方式使用 $$.string。1是将其附加到功能上。第二个是单独的功能：

```
string("Hi") 
```

假设只是返回 Hi。但我得到的是：`[object Object]`

允许我执行第一个，附加到函数的主要代码是：

```
var g = function (a) { 
        this._string = typeof a == "string" ? a : a.toString();
        return a;
}
var string = function (a) {
            return new g(a);
} 
```

然后我有另一个变量，其中包含所有函数，然后将它与原型绑定。

如果我只有 string("Hi") 并且如果添加它们仍然允许函数工作，是否可以让它只返回字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:02:35.997

基本问题是函数无法判断其返回值的去向。在评估运算符时，您的函数调用已经结束`.`，因此您的代码此时无法进行任何操作。

现在，您可以做的是返回一个`toString()`在其原型上有实现的对象，这样当您的对象用于将被视为字符串的情况时，它会适当地转换。

```
var g = function (a) { 
        this._string = typeof a == "string" ? a : a.toString();
        return a;
}
g.prototype.toString = function() {
  return this._string;
}
var string = function (a) {
            return new g(a);
}
alert( new string("Hi") ); 
```

# php - iframe 从父级获取/发布数据

> ID：11696169
> 
> 赞同：1
> 
> 时间：2012-07-27T21:55:38.123
> 
> 标签：php, javascript, html, iframe, get

是否可以让 iframe 从父框架读取 post-data 或 get-data？

例如：如果我当前的 URL 是 www.site.com/parent_frame.html?url=www.frame.com/nav1/nav2/child_frame.html

嵌入在父站点中的框架是否可以设置为加载 www.frame.com/nav1/nav2/child_frame.html。

我可以访问这两个域，但不能在父页面上使用除 html 和 javascript 之外的任何内容。子页面可以访问 PHP、javascript、HTML。

我知道将 URL 放入 get/post 数据的安全风险，显然孩子会在加载之前验证该 URL 是否在适当的范围内，我只需要一些建议/指导，如果这可能的话.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:03:23.830

这可能对您有帮助：[Calling a parent window function from an iframe](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function)

虽然这没有在 GET/POST 数据中设置任何内容，但它是一种在 iframe 中使用 JavaScript 来访问父框架/页面中的 JavaScript 的方法。

# ios - iOS 4.3.3 上的 GKNotificationBanner

> ID：11696173
> 
> 赞同：0
> 
> 时间：2012-07-27T21:56:05.470
> 
> 标签：ios, ios5, crash, app-store

我在我的 iOS 4.1+ 应用程序中使用框架 GKAchievementNotification (https://github.com/typeoneerror/GKAchievementNotification)。此应用程序已获得 Apple 批准（在应用商店中），但似乎在 iOS 4.3.3 上崩溃。崩溃日志如下：

```
OS Version:      iPhone OS 4.3.3 (8J3)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000001, 0xe7ffdefe
Crashed Thread:  0

Dyld Error Message:
  Symbol not found: _OBJC_CLASS_$_GKNotificationBanner
  Referenced from: /var/mobile/Applications/08289A0B-7AD3-4E37-B29F-A EDFE97B7ACA/PolarDefense.app/PolarDefense
  Expected in: /System/Library/Frameworks/GameKit.framework/GameKit
  in /var/mobile/Applications/08289A0B-7AD3-4E37-B29F-AEDFE97B7ACA/PolarDefense.app/PolarDefense
  Dyld Version: 191.3 
```

似乎框架没有正确丢弃它不支持的 iOS 版本的 GKNotificationBanner（5.0 之前的 iOS）。

我假设错误在于以下代码，您认为它有什么问题？

```
@implementation GKAchievementHandler(private)
- (void)displayNotification:(GKAchievementNotification *)notification {
 #if __IPHONE_OS_VERSION_MAX_ALLOWED >= 50000
  if ([GKNotificationBanner class]) {
    [GKNotificationBanner showBannerWithTitle:notification.title 
                                      message:notification.message
                            completionHandler:^{
                                [self didHideAchievementNotification:notification];
                            }
     ];
  } else
 #endif
  {
    [_topView addSubview:notification];
    [notification animateIn];
  }
}
@end 
```

GKNotificationBanner 在其他几个地方被引用，但总是被 #if __IPHONE_OS_VERSION_MAX_ALLOWED >= 50000 包围

那么它是怎么崩溃的呢？（为什么只在发布模式下？）

部署目标是 4.1。我现在读到，仅在 4.2 中支持对类是否存在的运行时检查。这可能是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:21:22.963

该`#if`语句将在编译时而不是在运行时解析，并检查 Base SDK 版本而不是部署版本。由于您使用最新的 iOS 版本进行构建，因此无论在哪个 iOS 版本上运行，都将始终执行此代码。

您可以在运行时检查可用性，例如：

```
id GKNotificationBannerClass = NSClassFromString(@"GKNotificationBanner");
if (GKNotificationBannerClass) {
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:36:51.343

认为这可能与我需要与 GameKit 的链接有关。将其更改为弱并提交到App Store（第三次）。

# mysql - MySQL 错误 1054 在 Where 子句中

> ID：11696176
> 
> 赞同：-1
> 
> 时间：2012-07-27T21:56:23.113
> 
> 标签：mysql, sql, database

下面的 SQL 查询一直很适合我：

```
DELETE FROM zNMall1r.* WHERE zNMall1r.Phone = DoNotCall.Phone 
```

当我尝试执行时，它返回错误 1054：

```
17:51:01    DELETE zNMall1r.* FROM zNMall1r WHERE zNMall1r.Phone = Phone.DoNotCall  
Error Code: 1054\. Unknown column 'Phone.DoNotCall' in 'where clause'    0.078 sec 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:00:49.183

错误消息非常清楚，它表示您的子句`DoNotCall.Phone`中有一个未知列 ( ) 。`WHERE`

这是在另一张桌子上，你想`JOIN`在桌子上吗？

如果是这样，那么您将需要执行以下操作：

```
DELETE z
FROM zNMall1r z
INNER JOIN DoNotcall o
   ON z.yourIdcol = o.yourIdCol
WHERE z.Phone = o.Phone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:01:12.153

您尚未加入名为 的表`DoNotcall`。MySQL 不会搜索其所有数据库来尝试找到该列，因此您会收到此错误。

# javascript - 带有 webkit 和 PhoneGap 的 iPhone 原生应用程序之间的区别？

> ID：11696177
> 
> 赞同：2
> 
> 时间：2012-07-27T21:56:41.007
> 
> 标签：javascript, objective-c, cordova, webkit

在使用 PhoneGap 与基于 Objective-C 的 iPhone 应用程序（即本机应用程序）进行`webview`调用以加载 html/js/css 内容时，主要区别是什么？

PhoneGap 做`uiwebview`吗？根据我对 PhoneGap 的理解，确实如此，但我正在寻求澄清。

最终，我想构建一个*混合*iPhone 应用程序，*同时*使用Objective-C 和 html/js/css？一个吸引人的方法是利用 Objective-C 在后台与服务器通信，并利用 html/js/css 来构建视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T23:23:34.407

PhoneGap 应用程序与基于 Objective-C 的应用程序进行调用之间的主要区别在于`webview`PhoneGap 提供的 javscript 函数库，可利用本机功能*而*无需编写本机 Objective-C 代码。

PhoneGap 利用 iOS 库中的类是绝对正确的，`UIWebView`但请记住 PhoneGap 的吸引力在于能够在*多个平台上利用**单个代码库*。

 *PhoneGap 确实可以实现混合 Objective-C 和 html/js/css 应用程序。如果您查看 PhoneGap 为 iOS 平台生成的内容，它只是一个带有大量 Objective-C 的模板应用程序，您只需要创建一个流程来实现您的应用程序所需的结构。

但请记住，PhoneGap 最大的吸引力在于能够使用单一代码库构建跨平台应用程序。如果您希望在 Android 或 WindowsPhone 上启动，您在 Objective-C 中编写的所有内容都需要重新编写。

### 其他注意事项

您可能还想查看[jQueryMobile](http://jquerymobile.com/)，它是一个非常棒的移动 Web 框架，可以很好地与 PhoneGap 配合使用。*[Master Mobile Web Apps with jQuery Mobile](http://store.elated.com/)*中有一章很好地概述了这一点。*

# html - CSS 3d 透视关闭

> ID：11696181
> 
> 赞同：0
> 
> 时间：2012-07-27T21:57:06.133
> 
> 标签：html, dom, css, perspective

我正在尝试摆脱 css 中的 3d 变换函数。我此时的代码几乎是直接从教程中复制而来的，因为无论我多么努力，我似乎​​都无法让它正常工作。它应该如何看待的链接是：[http ://desandro.github.com/3dtransforms/examples/card-01.html](http://desandro.github.com/3dtransforms/examples/card-01.html)

我的代码是：

```
<html>
    <head>
        <style media="screen">      
            .container  {
                width: 200px;
                height: 260px;
                position: relative;
                -webkit-perspective: 800;
                }
            #card {
                width: 100%;
                height: 100%;
                position: absolute;
                -webkit-transform-style: preserve-3D;
                -webkit-transition: -webkit-transform 2s;
                }
            #card figure  {
                display: block;
                position: absolute;
                width: 100%;
                height: 100%;
                -webkit-backface-visibility: hidden;
                }
            #card .face1  {
                background: red;
                }
            #card .face2  {
                background: blue;
                -webkit-transform: rotateY(180deg);
                }
            #card:hover  {
                -webkit-transform: rotateY(180deg);
                }
        </style>
    </head>

    <body>
        <section class="container">
            <div id="card">
                <figure class="face1">1</figure>
                <figure class="face2">2</figure>
            </div>
        </section>
    </body>
</html> 
```

就像我在教程中逐字逐句地说的那样，我唯一改变的是使用悬停而不是按钮。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:07:16.590

添加`margin: 0`到`figure`s。该示例有一个应用它的外部样式表，因此不是很明显它是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:54:41.730

嘿，有两个文件 utils.js 和 flip.js .. 包括它们，并在你的 css 中使用

```
-webkit-transform-style
-moz-transform-style
-o-transform-style
transform-style 
```

这样您的 3d 转换将在每个浏览器中呈现... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:13:42.807

翻转的初始化不是用 CSS 完成的。它是通过文件“flip-card.js”用 Javascript 完成的：

```
var init = function() {
  var card = document.getElementById('card');

  document.getElementById('flip').addEventListener( 'click', function(){
    card.toggleClassName('flipped');
  }, false);
};

window.addEventListener('DOMContentLoaded', init, false); 
```

这需要更改 onHover 事件处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:14:43.743

有一个包含数字的容器，将数字放在容器中，为它们添加规则：（`margin: 0px;`默认情况下它不是 0）。

# jquery - 获取满足两个不同后代选择器标准的“最深”元素

> ID：11696190
> 
> 赞同：1
> 
> 时间：2012-07-27T21:57:31.773
> 
> 标签：jquery, performance, jquery-selectors, filtering, dom-traversal

我正在编写一个用户脚本，它检测“运送到”任意设计的地址表单并解析其内容。为此，我需要找到`tr`包含地址标签（例如“名称”、“地址 1”等）和相应`input`字段的表单“行”（可能是元素也可能不是元素）标签。例如，在以下代码段中：

```
<div>
<label>MaidenName</label>
<table><tbody>
    <tr>
        <td><label>FirstName</label></td>
        <td><input value = "Bob"></td>
    </tr>
    <tr>
        <td><label>LastName</label></td>
        <td><input value = "Smith"></td>
    </tr>
    <tr>
        <td><label>CompanyName</label></td>
        <td><input value = "Ink Inc"></td>
    </tr>
</tbody></table>
</div> 
```

我想匹配所有`tr`元素，因为它们每个都包含一个“名称”标签和一个输入字段。但是，我不想匹配`div`“MaidenName”标签，因为它的范围比为表内字段找到的匹配范围更广。

我当前查找这些行（通常是`div`元素而不是元素`tr`）的算法是：

*   查找具有适当“名称”标签的所有节点
*   在每个节点的 DOM 中向上工作，直到找到一个作为输入字段祖先的节点
*   然后删除我遍历到达那里的孩子，只留下集合的父元素。

从我正在使用的端口翻译，JQuery Javascript 如下所示：

```
// set up my two lists
var labelNodes = getLabelNodes();
var nodesWithAddress = 
    $().find("input[type='text']:visible, select:visible");

var pathToCommonParents = getLabelNodes()
    .parentsUntil(nodesWithAddressChildren.parents()).parent();

// keep the highest-level nodes, so we only have the common paths - 
//not the nodes between it and the labels.
return combinedNodeSet.filter(
    function (index) {return $(this).find(combinedNodeSet).length == 0}); 
```

这行得通……但是所有这些遍历和比较开销绝对会破坏我的表现（这可能需要*五秒钟*或更长时间。）

有什么更好的方法来实现这一点？我认为下面的伪代码会更好，但我可能是错的，我不知道如何实现它：

```
var filteredSet = $().find(*).hasAnyOf(labelNodes).hasAnyOf(nodesWithAddress);
return filteredSet.hasNoneOf(filteredSet); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:41:36.077

## 更新

我找到了一个更好的解决方案（见修订）我认为这对你来说非常有用。

```
function getMySpeacialElements() {
    var aSpeacialElements = [];
    $("label").each(function() {
        var oParent = $(this).parent(),
            oSpeacial = oParent.parent();
        oSpeacial.children("*").each(function() {
            if ($(this).children("input").length) {
                aSpeacialElements.push(oSpeacial[0]);
            }
        });
    });
    return aSpeacialElements;
} 
```

​</p>

**[现场演示](http://jsfiddle.net/EL7CZ/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:35:11.460

概括 micha 的答案，以便它可以以独立于页面的方式查看（不同的标签和嵌套级别）：

```
var labelNodes = getLabelNodes();
var returnNodes = $();

var regexAncestors = labelNodes.parent();

while (regexAncestors.length){
    regexAncestors = regexAncestors.not("body");
    var commonParentNodes = regexAncestors.has("input[type='text']:visible, select:visible");
    returnNodes.add(commonParentNodes);
    regexAncestors = regexAncestors.not(commonParentNodes).parent();
}
return returnNodes; 
```

# css - 用css改变svg图像的颜色

> ID：11696191
> 
> 赞同：4
> 
> 时间：2012-07-27T21:57:32.657
> 
> 标签：css, html, vector, svg

我的页面上有一个 svg 图像，其中包括：

```
<img src="image.svg" class="arrow"/> 
```

*   我想用css改变它的颜色。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:17:48.670

有[`hue-rotate`](http://www.html5rocks.com/en/tutorials/filters/understanding-css/#toc-what)，但还[没有真正支持](http://caniuse.com/#feat=css-filters)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:06:52.867

你不能。如果您尝试将其设置为翻转图像，请使用更改后的颜色创建一个新的 SVG 图像，然后[查看此代码](http://joemaller.com/js-singleroll.shtml)以使用 JavaScript 使其成为翻转图像。

如果您不将其用作翻转，那么我不能再做任何事情了。

# matlab - 使用 > 10 个参数八度调用 fsolve

> ID：11696199
> 
> 赞同：-1
> 
> 时间：2012-07-27T21:58:46.190
> 
> 标签：matlab, octave, mathematical-optimization

我需要用 11 个变量调用 fsolve，但由于某种原因，每当我给它超过 10 个变量时，它就会开始表现异常。这是一个例子。

```
function y = focal_fun (x)

y(1) = x(1) - 1;
y(2) = x(2) - 2;
y(3) = x(3) - 3;
y(4) = x(4) - 4;
y(5) = x(5) - 5;
y(6) = x(6) - 6;
y(7) = x(7) - 7;
y(8) = x(8) - 8;
y(9) = x(9) - 9;
y(10) = x(10) - 10;

endfunction 
```

其次是

```
x0 = [.1;.2;.3;.4;.5;.6;.7;.8;.9;1];
[x, fval, info] = fsolve ("fun", x0) 
```

完美运行。如果我附加

```
y(11) = x(11) - 11; 
```

到我的功能和调用

```
x0 = [.1;.2;.3;.4;.5;.6;.7;.8;.9;1;1.1];
[x, fval, info] = fsolve ("fun", x0) 
```

在给我以下错误之前，它会迭代几次对 fun 的调用（每次调用它时我都可以愉快地写入控制台）。

```
dyld: lazy symbol binding failed: Symbol not found: _lsame_
  Referenced from: /Applications/Octave.app/Contents/Resources/lib/libqrupdate.1.dylib
  Expected in: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib

dyld: Symbol not found: _lsame_
  Referenced from: /Applications/Octave.app/Contents/Resources/lib/libqrupdate.1.dylib
  Expected in: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib

panic: Trace/BPT trap: 5 -- stopping myself...
attempting to save variables to octave-core'...
save to `octave-core' complete
/usr/local/bin/octave: line 68:  2620 Trace/BPT trap: 5       OCTAVE_HOME="${OCTAVE_HOME}" PATH="${PATH}" DYLD_LIBRARY_PATH="${DYLD_LIBRARY_PATH}" CC="${CC}" CXX="${CXX}" CFLAGS="${CFLAGS}" CPPFLAGS="${CPPFLAGS}" CXXFLAGS="${CXXFLAGS}" FFLAGS="${FFLAGS}" LDFLAGS="${LDFLAGS}" DL_LDFLAGS="${DL_LDFLAGS}" SED="$SED" MAGICK_HOME="${ROOT}" FONTCONFIG_PATH="${ROOT}/etc/fonts" "${ROOT}/bin/octave-3.4.0" "$@" 
```

据我所知， fsolve 的文档并不限制参数的数量。有人可以告诉我这是一个错误，还是我的八度安装错误？现在我在 Mountain Lion 上运行了 3.4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:07:37.643

非常感谢 Isaac 和 Amro，我将我的版本更改为 3.2.0 并且没有任何问题。一定只是那个版本的一个错误。

# c# - 同时解压一个流

> ID：11696200
> 
> 赞同：1
> 
> 时间：2012-07-27T21:58:48.060
> 
> 标签：c#, .net, concurrency, f#, compression

.NET 允许通过将流包装在另一个流中来对其进行解压缩。但是，我认为这是串行实现的。是否有可能使这个并发，以便在读取下一个块时可以完成最后一个块的解压缩？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:41:23.703

不能以这种方式使用内置的流压缩类。例如，您不能分解解压缩一次压缩的流所涉及的工作（即没有分解成工作块）。

这个问题是在 MSDN 杂志上提出的，Stephen Toub 回答了这个问题，他提出了一个解决方案。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/magazine/cc163290.aspx](http://msdn.microsoft.com/en-us/magazine/cc163290.aspx)

# file-upload - 上传文件后Nginx上传进度模块报错

> ID：11696203
> 
> 赞同：0
> 
> 时间：2012-07-27T21:59:00.337
> 
> 标签：file-upload, nginx

当我使用nginx上传进度模块上传文件时，文件开始正常上传，然后我得到上传了多少的进度，但是当文件上传完成时我得到错误（`({ "state" : "error", "status" : 17523466568084 });`）

好吧，我的疯狂猜测是，在我的配置中指定了 `upload_pass /upload;`我没有的后端，并且每次它最后上传文件时，它都会尝试获取此后端并给我错误，因为它不存在。我试图注释掉这一行，但后来我从 nginx 得到另一个错误（**“track_uploads”指令 track_upload 应该是该位置的最后一个指令，在 /etc/nginx/sites-enabled/web-files 中的 proxy_pass 或 fastcgi_pass 之后。 com:52** )。

1）**所以**第一个问题是错误是什么？

2）**其次**是如何获取从 nginx 传递到后端的那些参数。

也许有人有任何想法是怎么回事。

我的 nginx 配置：

```
http {
   ...
   upload_progress upload 2m;

server {

    listen 80;
    server_name   mydomain;

    root /home/cha0s/web-files;
    index index.php;

    location ~ \.php$ {
      include /etc/nginx/fastcgi_params;
      fastcgi_pass 127.0.0.1:9000;
      fastcgi_param SCRIPT_FILENAME /home/cha0s/web-files$fastcgi_script_name;
      fastcgi_param PATH_INFO $fastcgi_script_name;

    }

    location ~ ^/files/(.*)$ {
            alias /home/cha0s/$1;
            internal;
    }

    location = /upload/share {
      client_max_body_size 250m;

      #Specify backend location/url and directory for file upload
      upload_pass /upload;
      upload_store /tmp;

      # Declare variables which are passed to backend
      upload_set_form_field $upload_field_name.name "$upload_file_name";
      upload_set_form_field $upload_field_name.content_type "$upload_content_type";
      upload_set_form_field $upload_field_name.path "$upload_tmp_path";

      upload_aggregate_form_field "$upload_field_name.md5" "$upload_file_md5";
      upload_aggregate_form_field "$upload_field_name.size" "$upload_file_size";

      # Delete uploaded file on error
      upload_cleanup 400 404 499 500-505;

      # Limit upload speed
      upload_limit_rate 8k;

      track_uploads upload 1m;
    }

    location = /upload/status {
      report_uploads upload;
    }

}
} 
```

我的test.php：

```
<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <script>
      function add() {
        if (parseInt(document.getElementById('count').getAttribute('value')) < 8) {
          var input = document.createElement('input');
          input.setAttribute('type','file');
          input.setAttribute('multiple','');
          input.setAttribute('name','file[]');
          document.getElementById('multiple').appendChild(input);
          document.getElementById('multiple').appendChild(document.createElement('br'));
          document.getElementById('count').setAttribute('value',parseInt(document.getElementById('count').getAttribute('value'))+1);
        }
        else {
          alert('Можно загрузить не более 8 файлов за раз.');
        }
      }
      function progress() {
        var ms = new Date().getTime() / 1000;
        rq = 0;
        id = "";
        for (i = 0; i < 32; i++) {
          id += Math.floor(Math.random() * 16).toString(16);
        }
        document.getElementById('upload').action = "/upload/share?X-Progress-ID=" + id;
        document.getElementById('status').style.display = 'block'
        interval = window.setInterval(function () { fetch(id, ms); }, 1000);
        return true;
      }
      function fetch(id, ms) {
        var fetch = new XMLHttpRequest();
        fetch.open("GET", "/upload/status", 1);
        fetch.setRequestHeader("X-Progress-ID", id);
        fetch.onreadystatechange = function () {
          if (fetch.readyState == 4) {
            if (fetch.status == 200) {
              var now = new Date().getTime() / 1000;
              var upload = eval(fetch.responseText);
              if (upload.state == 'uploading') {
                var diff = upload.size - upload.received;
                var rate = upload.received / upload.size;
                var elapsed = now - ms;
                var speed = upload.received - rq; rq = upload.received;
                var remaining = (upload.size - upload.received) / speed;
                var uReceived = parseInt(upload.received) + ' bytes';
                var uDiff = parseInt(diff) + ' bytes';
                var tTotal = parseInt(elapsed + remaining) + ' secs';
                var tElapsed = parseInt(elapsed) + ' secs';
                var tRemaining = parseInt(remaining) + ' secs';
                var percent = Math.round(100*rate) + '%';
                var uSpeed = speed + ' bytes/sec';
                document.getElementById('length').firstChild.nodeValue = parseInt(upload.size) + ' bytes';
                document.getElementById('sent').firstChild.nodeValue = uReceived;
                document.getElementById('offset').firstChild.nodeValue = uDiff;
                document.getElementById('total').firstChild.nodeValue = tTotal;
                document.getElementById('elapsed').firstChild.nodeValue = tElapsed;
                document.getElementById('remaining').firstChild.nodeValue = tRemaining;
                document.getElementById('speed').firstChild.nodeValue = uSpeed;
                document.getElementById('bar').firstChild.nodeValue = percent;
                document.getElementById('bar').style.width = percent
              }
              else {
                window.clearTimeout(interval);
              }
            }
          }
        }
        fetch.send(null);
      }
    </script>
  </head>
  <body>
    <form method="post" enctype="multipart/form-data" id="upload" onsubmit="progress();">
      <input type="hidden" id="count" value="1" />
      <div id="multiple">
        <input type="file" name="file[]" multiple /><br>
      </div>
      <input type="submit">
      <a href="#" onclick="add();">add();</a>
    </form>
    <div id="status" style="display: none;">
      <table width="100%"> 
        <tr><th></th><th>загрузка</th><th>осталось</th><th>всего</th></tr>
        <tr><td>время:</td><td id="elapsed">∞&lt;/td><td id="remaining">∞&lt;/td><td id="total">∞&lt;/td></tr>
        <tr><td>размер:</td><td id="sent">0 b</td><td id="offset">0 b</td><td id="length">0 b</td></tr>
        <tr><td>скорость:</td><td id="speed">n/a</td></tr>
      </table>
      <div style="border: 1px solid #c0c0c0;">
        <div style="background: #c0c0c0; width: 0%; text-align: right;" id="bar">0%</div>
      </div>
      <a href="#" onclick="if (confirm('Вы точно хотите отменить загрузку?')) window.location = '/'" id="cancel">cancel_upload();</a>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:33:45.557

正如我们已经讨论过的： `upload_pass /upload.php;` ;-)

# php - PDO 和 PHP/MySQL：PDO 的预处理语句到底有什么问题？

> ID：11696212
> 
> 赞同：4
> 
> 时间：2012-07-27T22:00:14.723
> 
> 标签：php, mysql, pdo

我知道这个标题听起来很荒谬，但我已经做了几个小时的研究，只是发现 PDO 最终是有缺陷的，没有明显的解决方案……我致力于为一个开放的人。我也愿意接受我的代码有缺陷。

使用 PHP 5.2/Ubuntu，此代码有效（不使用准备好的语句/打开注入）：

```
$sql ="SELECT COUNT(*) FROM property p
INNER JOIN property_attribute pa ON p.property_id = pa.property_id
INNER JOIN property_area pc ON p.property_id = pc.property_id
WHERE pa.attribute_value_id
    IN (
        SELECT av.attribute_value_id
        FROM attribute_value av
        INNER JOIN attribute a ON av.attribute_id = a.attribute_id
        WHERE a.name LIKE '$attributes'
        AND av.value LIKE '$values'
    ) 
ORDER BY p.price ASC";
$params = array();
$rHowManyPages = Listings::HowManyPages($sql, $params); 
```

但是，使用 PDO 的精彩准备语句：

```
$sql ='SELECT COUNT(*) FROM property p
INNER JOIN property_attribute pa ON p.property_id = pa.property_id
INNER JOIN property_area pc ON p.property_id = pc.property_id
WHERE pa.attribute_value_id
    IN (
        SELECT av.attribute_value_id
        FROM attribute_value av
        INNER JOIN attribute a ON av.attribute_id = a.attribute_id
        WHERE a.name LIKE :attributes
        AND av.value LIKE :values
    ) 
ORDER BY p.price ASC';
$params = array(':attributes' => $attributes, ':values' => $values);
$rHowManyPages = Listings::HowManyPages($sql, $params); 
```

它工作，有点。这是 Spartanic 的疯狂部分：五分之一的刷新相同的数据被传递，PDO 给出了这个错误：

```
TEXT: SQLSTATE[HY093]: Invalid parameter number 
```

是随机的！如何以及为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T22:19:36.147

为命名参数提供的值之一是否可能包含问号？我遇到了一个问题，但那是很久以前的事了。（我当然希望他们现在会解决这个问题。）

以我有限的经验，PDO 对“命名参数”的支持有些粗略。

一方面，您不能在语句的多个位置使用相同的命名参数，每个命名参数的占位符名称必须是唯一的，并且只能使用一次。这让命名论点的一大好处就彻底消失了。

我相信我在值中遇到问号字符的问题，以及无法多次引用命名参数（我尚未确认）是由于 PDO“命名参数”支持是事后的补充支持位置论点；本质上，看起来“命名参数”正在被翻译成位置参数。

当命名参数包含下划线字符时，我也遇到了一些奇怪的问题。

我的解决方法是（ACCCKKK！）使用位置参数而不是命名参数。

（尽管我讨厌使用位置参数，但它对我有用。）

（我在您显示的代码中没有看到任何错误可以解释观察到的行为。显然，您没有显示其他代码。）

此外，您可能想要验证您的`$params`数组是否仅包含两个元素；当我的数组有一个“额外的”不匹配元素时，我收到了同样的错误消息。再一次，在我的代码中，我退回到只使用标量，并分别绑定每个标量，而不是让 PDO 把它搞砸。（对我来说这不是问题，这是我在 Perl DBI 中过于熟悉的模式。我没有解决问题，而是解决了这些问题。）

* * *

**注意：**通过位置参数，我的意思是使用问号代替名称：

```
 $sql = " ...
  WHERE a.name LIKE ?
    AND av.value LIKE ?
 ... ";

$sth->bindParam(1, $attributes);
$sth->bindParam(2, $values); 
```

# asp.net - 在 Asp.Net 中，我将如何确定哪个验证器控件已将 Page.IsValid 设置为 false？

> ID：11696213
> 
> 赞同：3
> 
> 时间：2012-07-27T22:00:15.150
> 
> 标签：asp.net, validation, postback

我有一个带有许多`RequiredFieldValidator`s 的巨大表单，我如何以编程方式确定哪个控件将`IsValid`属性设置为`Page`to `false`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T22:13:41.357

在服务器端，您可以查看`Validators`属性以查找所有`IValidator`实例。然后，您只需测试哪些不是`.IsValid`.

```
var notValidValidators = Page.Validators.Cast<IValidator>().Where(v => !v.IsValid); 
```

在客户端，它是相似的。有一个 JavaScript 数组`Page_Validators`，每个数组都有一个`isvalid`属性。

```
var notValidValidators = Page_Validators.filter(function(v) { return !v.isvalid; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T22:09:48.553

您可以检查`.IsValid`各个验证器的属性。

如果它是`RequiredFieldValidator`，则如果控件仍然无效，则用户不应该能够回发。你想做什么？

# c++ - OCCI C++ 应用程序的 Visual Studio 调试运行时错误

> ID：11696215
> 
> 赞同：2
> 
> 时间：2012-07-27T22:00:20.137
> 
> 标签：c++, runtime-error, visual-studio-debugging, oracle11gr2, occi

我正在使用 Visual Studio 开发一个使用 OCCI 查询 Oracle 11g 数据库的 C++ 程序。目前这是一个非常简单的程序，只进行一次查询，但我一直遇到运行时错误。我首先尝试在 VS2010 中开发这个，下载 11.2.0.3 OCCI 文件，我得到一个与不在 oci.dll 中的 heap-alloc 过程的入口点相关的错误。我的印象是这个错误可能是因为我的 Oracle 客户端是 11.2.0.1。

由于出于支持原因无法将客户端升级到更高版本，我决定回退到使用 Visual Studio 2005，因为我在 Oracle 的 OCCI 文档中读到 vc8 版本的 OCCI 库和 DLL 已经安装在 11g 中客户。所以我将我的 C++/OCCI 程序移到 VS 2005，现在我得到一个不同的调试运行时错误：一个错误消息框说“应用程序无法正确初始化”，并且来自 VS 输出窗口中加载程序的消息说“ldrpWalkImportDescriptor () 未能探测 [ORACLE CLIENT DIR]\oci\lib\msvc\vc8\oraocci11d.dll 的清单，ntstatus 0xc0150002" 我没有看到 oraocci11d.dll 的清单文件，所以我很茫然如何解决这个问题。任何更精通 OCCI 的 VS 设置的人可以提出建议吗？提前致谢...

谢尔顿

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:15:55.910

我注意到这里的一些 OCCI 问题没有得到解答，所以我觉得有义务解释我是如何解决我的问题的 :) 正如 OCCI 线程中经常提到的那样，关键是下载适当版本的 Oracle Instant Client。我曾尝试使用已安装的运行时客户端中的文件，但该客户端的版本号为 11.2.0.1，而 VS2010 的 OCCI 需要 11.2.0.2 或 11.2.0.3 的版本。所以我最终为 OCCI 和 Instant Client 下载了 11.2.0.2 版本，因为**版本号必须匹配**才能正常工作......

之后，只需设置 PATH 环境变量并将 Visual Studio 项目配置为指向包含 OCCI DLL、库和包含文件的目录，并将 TNS_ADMIN 环境变量设置为指向包含TNSNAMES.ORA 文件，它定义了我要连接的数据库。有关此设置的分步说明，请参阅 Mark Williams 的此[博客文章](http://oradim.blogspot.com/2009/07/getting-started-with-occi-windows.html)。尽管这篇文章是为 Visual Studio 2008 编写的，但 2010 的过程仍然相同，只是版本不同#s...

谢尔顿

# javascript - 将 YYYY/MM/DD 转换为有效格式

> ID：11696216
> 
> 赞同：0
> 
> 时间：2012-07-27T22:00:36.233
> 
> 标签：javascript, date, titanium

我有一个来自 Java 服务器的日期格式如下：

`YYYY/MM/DD 00:00:00.0`

这是 JavaScript 不接受的格式。所以，我这样做：

```
var startDate = '2012-07-27 00:00:00.0';
startDate = startDate.substring(0, 10); 
```

然后亲切地返回`2012-07-27`。（注：我试过有时间和没有）

但是，然后我想将其转换为可用于比较两个日期的日期格式。所以，我执行这个：

```
startDate = new Date(startDate); 
```

最后，它在日志中返回：`Invalid Date`

因此，为了比较日期，如下所示：

```
if(currentDate > startDate) 
```

我需要能够将我拥有的格式转换为可以接受的格式，这样我就可以比较每个不同的日期。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:06:11.000

您的字符串格式不兼容，这就是 new Date(datestring) 不起作用的原因。您可以使用 Regex 自己解析字符串并创建一个新的 Date 对象，其中包含 year、month、date、minute 和 second 的明确值。查看 [Date.parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)的有效格式

或在解析字符串示例后使用此[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC将是](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC)

```
gmtDate = new Date(Date.UTC(2012, 07, 27, 0, 0, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:12:14.417

你可以使用[Zetafleets - javascript dateparse for iso 8601](http://zetafleet.com/blog/javascript-dateparse-for-iso-8601)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:15:17.783

如果允许使用 javascript 库，则可以使用 datejs (datejs.com) 和 Date.parseExact() 函数：

```
Date.parseExact(startDate, "yyyy/MM/dd") 
```

或者，如果您不能或不喜欢为此目的使用库，则可以封装自定义逻辑，以使用正则表达式将此字符串转换为正确的日期，例如 ama2 通过以下方式建议：

```
Date.parseExact = function(dateString, format) { ... your implementation here } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T22:23:08.920

如果您的日期使用 24 小时制，而不是上午/下午 12 小时制，并且它们始终采用该精确格式，则直接字符串比较将产生正确的结果。换句话说，

```
'2012-07-27 00:00:00.0' > '2012-07-26 00:00:00.0' === true
'2012-07-27 00:00:00.0' > '2012-07-26 23:59:99.9' === true
'2012-07-27 10:00:00.0' > '2012-07-27 12:00:00.0' === false 
```

有时最简单的方法就在您面前；）

# php - 为什么下划线在 PSR-0 标准中被转换为目录分隔符？

> ID：11696219
> 
> 赞同：6
> 
> 时间：2012-07-27T22:00:44.160
> 
> 标签：php, psr-0

PSR-0 ( [https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md) ) 标准规定类名中的下划线应转换为目录分隔符对应的文件名。

对我来说，这似乎不是一个好主意，因为当不知道标准的人在类名中无辜地使用下划线并且突然自动加载器找不到类并且出现各种奇怪的错误时，它会产生很多错误（参见这个stackoverflow问题例如：[Symfony2.1 mapping error: class_parents()](https://stackoverflow.com/questions/11686922/symfony2-1-mapping-error-class-parents) )

所以我想这个“功能”一定有某种原因（与某些库的历史兼容性？）。我的问题是：有人知道为什么在 PSR-0 标准中引入了这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T22:02:57.143

在 PHP 还不支持命名空间的时候使用了下划线。一个“正确”的组织项目遵循与目录结构相同的命名空间约定。

在项目中组织文件只是一些一般的“规则”。

因此，如果您的目录结构为：

```
root
  Name
    Package
      MyClass.php 
```

人们曾经这样做：

```
class Name_Package_MyClass {} 
```

但是现在我们有了命名空间，它变成了：

```
namespace Name\Package;

class MyClass { } 
```

这只是编码风格指南，可确保每个人都做同样的事情。

所以 PSR-0 所做的是将旧的和新的命名空间样式映射到文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:05:07.987

PHP supports namespaces since version 5.3, earlier the most common convention was to use underscore as namespace (directory) separator, e.g.: `My_Project_ClassName` was mapped as `/path/to/my/My/Project/ClassName`. I believe that backwards compatibility is the main reason.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T08:24:05.853

Keep in mind that the PSR-0 standard was written for a few specific projects and not necessarily the best option for your own project. As it says on their site: "If other folks want to adopt what we’re doing they are welcome to do so, but that is not the aim." PSR-0 is very restrictive, I wouldn't choose to use it just because other people are. Consider what you actually want from your project and whether it will be beneficial for you.

# objective-c - 设置指针（手）光标 Objective-C

> ID：11696225
> 
> 赞同：0
> 
> 时间：2012-07-27T22:01:11.507
> 
> 标签：objective-c, mouse-cursor, nscursor

当我将鼠标悬停在对象上时，如何将光标设置为指向手。我试过`[NSCursor pointingHandCursor];`了，但没有用:(

我可以像这样隐藏它， `[NSCursor hide];`但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:30:20.973

`[NSCursor pointingHandCursor];`返回游标实例。

您必须使用适当的方法设置 if`[[NSCursor pointingHandCursor]set]`

# django - 在 Tastypie 中将过滤器组合到一个查询中

> ID：11696229
> 
> 赞同：5
> 
> 时间：2012-07-27T22:01:31.170
> 
> 标签：django, tastypie

> **可能重复：**
> [Django Tastypie 高级过滤：如何使用 Q 对象进行复杂查找](https://stackoverflow.com/questions/10021749/django-tastypie-advanced-filtering-how-to-do-complex-lookups-with-q-objects)

我有一个美味的模型资源，看起来像这样：

```
class TaggedResource(ModelResource):
    tags = ListField()
    user = fields.ForeignKey(UserProfileResource, 'user')

    class Meta:
        queryset = Media.objects.all().order_by('-timestamp')
        authorization = MediaAuthorization()
        detail_allowed_methods = ['get', 'post', 'put', 'delete','patch']

    filtering = {
        #'user': ALL_WITH_RELATIONS,
        #exact is date, lt is less than lte less than equal to, etc
        'timestamp': ['exact', 'range', 'lt', 'lte', 'gte', 'gt'],
        'social_source': ALL,
        'media_type': ALL,
        'comment': ['exact', 'startswith', 'endswith', 'contains'],
        'media_text': ['exact', 'startswith', 'endswith', 'contains'],
    } 
```

我需要在过滤器之间有一个 OR 运算符，并且希望将查询组合成一个参数。例如，我想返回包含从评论字段或 media_text 字段过滤的单词“test”的对象。

这将是理想的：http:mysite.com/api/v1/tagged?q=test

其中 'q' 对两个字段执行 OR 过滤器。

这是可行的吗？

更新：这是我正在使用高级过滤器进行的工作，但我不确定如何获得 OR 语句：

```
def build_filters(self, filters=None):
    if filters is None:
        filters = {}

    orm_filters = super(TaggedResource, self).build_filters(filters)

    if 'q' in filters:
        orm_filters['comment__contains'] = filters['q']
        orm_filters['media_text__contains'] = filters['q'] 
    return orm_filters 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T09:32:18.527

你通过覆盖 build_filters 做正确的事，你可以使用 django 的 Q 类进行 AND/OR 查询，我在这里回答了一个类似的问题

[具有多个值的美味过滤](https://stackoverflow.com/questions/11436229/tastypie-filtering-with-multiple-values/11438100#11438100)

这是另一个有趣的：

[Tastypie 否定过滤器](https://stackoverflow.com/questions/9675127/tastypie-negation-filter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:56:07.040

我建议查看[高级过滤](http://django-tastypie.readthedocs.org/en/latest/resources.html#advanced-filtering)，即使我不确定它是否可行。但是，如果您覆盖 build_filters，您就可以访问整个资源，并且可能定义这样的过滤器，这些过滤器不仅限于字段。

# c - ARM 内联汇编的 GCC 错误消息：预期 ARM 寄存器

> ID：11696232
> 
> 赞同：3
> 
> 时间：2012-07-27T22:01:59.533
> 
> 标签：c, gcc, arm, inline-assembly

下面是我用 C 和内联汇编编写的一段代码，用于将一些`short`值从数组加载`blk`到 ARM`R`寄存器。

```
...
short *blk; 
... //blk memory allocation and initialization
short tmp0, tmp1, tmp2;
asm volatile (
"ldrh %[tmp0], [%0]\n\t"
"ldrh %[tmp1], [%1]\n\t"
"ldrh %[tmp2], [%2]\n\t"
: [tmp0] "=r" (tmp0), [tmp1] "=r" (tmp1), [tmp2] "=r" (tmp2)
: "m" (blk[0])  , "m" (blk[8]), "m" (blk[8*2])
: 
); 
```

我从 arm gcc 4.6 收到此错误消息

```
/tmp/ccDEBLCN.s:266: Error: ARM register expected -- `ldrh r3,[[r5,#0]]' 
```

GCC 抱怨`ldrh %[tmp2], [%2]`线路，但我不明白为什么。我看了一下`LDRH`指令，在我看来我的指令模板是正确的。

```
Load memory halfword [15:0] from register address + 5-bit immediate offset
LDRH <Rd>, [<Rn>, #<immed_5> * 2] 
```

顺便说一句，这是我用来编译它的命令：

```
arm-none-linux-gnueabi-gcc -O2 -march=armv7-a -mthumb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:18:24.947

```
asm (
"ldrh %[tmp0], %[ref0]\n\t"
"ldrh %[tmp1], %[ref1]\n\t"
"ldrh %[tmp2], %[ref2]\n\t"
: [tmp0] "=&r" (tmp0), [tmp1] "=&r" (tmp1), [tmp2] "=r" (tmp2)
: [ref0] "m" (blk[0])  , [ref1] "m" (blk[8]), [ref2] "m" (blk[8*2])
: 
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:24:07.523

看起来编译器可能会抱怨您的代码实际上没有做任何事情。这真的是你的本意吗？

```
...
short *blk; 
... //blk memory allocation and initialization
short tmp0, tmp1, tmp2;
asm volatile (
"ldrh r0,[%[BLK]]\n\t"
"ldrh r1,[%[BLK], #8]\n\t"
"ldrh r2,[%[BLK], #16]\n\t"
"strh r0,[%tmp0] \n\t"
"strh r1,[%tmp1] \n\t"
"strh r2,[%tmp2] \n\t"
: [tmp0] "r" (tmp0), [tmp1] "r" (tmp1), [tmp2] "r" (tmp2), [BLK] "r" (blk)
: "r0", "r1", "r2"
: 
); 
```

# php - 自定义服务器应用程序所需的内部 IP 地址 - PHP SERVER 变量

> ID：11696250
> 
> 赞同：2
> 
> 时间：2012-07-27T22:04:17.393
> 
> 标签：php, ip-address

我读过这个：

[如何获取我的系统的 IP 地址](https://stackoverflow.com/questions/4447716/how-to-get-the-my-systems-ip-address)

但这并没有真正解决我的根本问题。我需要在内部网络上获取客户端 IP，例如，`192.168.1.7`以便我知道服务器是否正在从内部位置访问。

我正在更新一些前一段时间由其他人构建的代码，这个代码片段就在那里：

```
$octet = explode(".", getenv("REMOTE_ADDR"), 4);

if($octet[0] != 192 && $octet[1] != 168 && $octet[2] != 1) { 
    die("You are unable to view this page from your current location."); 
} 
```

这看起来像是在测试该内部 IP，但在另一个具有类似代码的页面上，我收到了`die`消息。该代码实际上显示我的 IP 不是`192.168.1.7`（此代码实际上显示了 ISP 给我的静态 IP）：

```
if($octet[0] != 192 && $octet[1] != 168 && $octet[2] != 1) { 
    die("You are unable to view this page from your current location: " . getenv("REMOTE_ADDR")); 
} 
```

我有点困惑，因为这段代码过去似乎有效，但现在不行。我不完全确定它什么时候停止工作，但根据我看到的代码，它一开始就不应该工作。

**笔记**

我还应该提到，所有需要访问该服务器的客户端都是内部的（大部分）。这是一个带有自定义许可证密钥模块的 CRM。我希望只有`192.168.1.0`网络上的那些客户端可以访问这些 PHP 页面。但棘手的部分是，有一种方法可以在如下位置使用 DNS 从外部访问 CRM 的非关键系统部分：

`crm.my-domain.com`

可以说，那些从网络外部访问 CRM 的客户不应该访问关键模块；只有网络上的那些客户端`192.168.1.0`才能看到密钥。因此，如果我可以获得内部 IP，我可以对其进行测试并显示页面。

**笔记2**

我在网络中运行 DNS，并且我在路由器上有一个端口转发到有问题的服务器`<internal_ip>`上的端口`80`。

DNS 有这样的 A 记录：

```
crm_servername    A    192.168.1.20 
```

它有一个`CNAME`：

```
crm    CNAME    crm_servername.my-domain.com 
```

我是否需要更多，或者这对我有用吗？目前我可以通过子域地址访问有问题的服务器，但是当我访问有问题的页面时，它仍然显示一个外部 IP，`non-192.168.1.x`...

我的问题是，如何设置我的 DNS 区域文件，以便当我在本地网络上时，我去一个 IP 上的服务器，例如 192.168.1.20，我留在网络中并且不会被路由出去然后再回来？看来我要从 ISP 静态 IP 出去然后进来，而服务器认为是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:12:52.297

如果您将其更改为以下代码，您可能会使此代码更好地工作：

```
function is_local($ip) {
    $octet = explode('.', $ip);

    return ($octet[0] == '10' ||
        ($octet[0] == '172' && ((int)$octet[1] >=16 && (int)$octet[1] <= 31)) ||
        ($octet[0] == '192' && $octet[1] == '168')
    );
} 
```

此代码将检查 IP 地址是否属于任何[私有网络](http://en.wikipedia.org/wiki/Private_network)范围，这意味着您的客户端是内部的或通过 VPN 连接的。

这可能会解决您的问题，或者可能过于广泛。如果您的 IP 显示为来自您的 ISP 的 IP，那么当您认为您在本地网络上时，您可能不在本地网络上，或者您正在端口转发到内部网络，因此仍将远程 IP 地址显示给服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:07:27.673

您无法从服务器变量中获取该信息，因为服务器无法知道此信息。

唯一的方法是询问网络浏览器（例如，通过使用 Java 小程序）。然而，获取这些信息充其量是不可靠的。

看：

[在浏览器中获取本地 IP 地址的非服务器端方法？](https://stackoverflow.com/questions/2138538/non-server-side-method-of-getting-local-ip-address-in-browser)

[从 java applet 获取正确的本地 IP 地址](https://stackoverflow.com/questions/1510526/get-the-correct-local-ip-adress-from-java-applet)

[http://www.webdeveloper.com/forum/showthread.php?threadid=242538](http://www.webdeveloper.com/forum/showthread.php?threadid=242538)

# c++ - 使用 SendInput 锁定计算机

> ID：11696253
> 
> 赞同：2
> 
> 时间：2012-07-27T22:04:37.887
> 
> 标签：c++, windows, sendinput

我想通过 C++ 使用 SendInput 来锁定计算机（`Windows+L`）。我创建了`SendInput`用于发送 VK 的简单 keyDown / keyUp 函数。在 keyUp 上，它添加了`flag 0x0002`

我可以模拟我的 Tab 键、我的 Windows 键，现在我尝试用模拟的击键来锁定我的计算机。我发送以下消息：

```
key down:  0x5B (win key)
key down:  0x4C (L)
key up:    0x4C (L)
key up:    0x5B (win key) 
```

我的问题：什么也没发生:-(

有人知道解决方案是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:17:05.413

如果我没记错的话，您将无法使用`SendInput()`(or `keybd_event()`) 执行此操作，因为它只是将键注入键盘输入缓冲区，但特殊的键序列（如`CTRL+ALT+DEL`,`WIN+L`等）在较低层运行，之前由操作系统解释键被放入输入缓冲区。

锁定计算机的正确方法是改用该[`LockWorkStation()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376875.aspx)功能。

# javascript - 使用 turn.js 我试图让角落的第一页在加载时已经翻转

> ID：11696263
> 
> 赞同：1
> 
> 时间：2012-07-27T22:05:47.033
> 
> 标签：javascript, jquery, javascript-events

我的 turn.js 设置类似于您在此处看到的方式：http: [//demo.tutorialzine.com/2012/03/instagram-magazine-php-jquery/](http://demo.tutorialzine.com/2012/03/instagram-magazine-php-jquery/)

我希望首页的右上角已经弯曲，就好像我在页面加载后立即将鼠标悬停在它上面一样。

我是 JS 的新手，所以查看[https://github.com/blasten/turn.js/wiki/Reference](https://github.com/blasten/turn.js/wiki/Reference)并大胆猜测我写了这个

```
document.getElementById('magazine').onload = function() 
{    
    $('#magazine').turn('tr', 1);
} 
```

除了让我难堪之外，这当然没有任何作用。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:40:37.357

这是您设置选项的方式：

```
$(function() 
{    
    $('#magazine').turn({ tr : 1 });
}); 
```

可悲的是 tr 不是一个选择，所以它无济于事。我不相信有一个选项可以做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T14:52:03.713

希望页面加载时代码会显示“剥离”页面：

```
$('#magazine').turn({gradients: true, acceleration: true});
$('#magazine').turn('peel', 'br'); 
```

见参考：

[http://www.turnjs.com/docs/Method:_peel](http://www.turnjs.com/docs/Method:_peel)

# javascript - 复选框不选中

> ID：11696268
> 
> 赞同：1
> 
> 时间：2012-07-27T22:06:40.670
> 
> 标签：javascript, jquery, checkbox

我有一些带有相关字段的复选框，标记如下：

```
<div class="job-position" id="bartending">
    <div>
        <input type="checkbox" id="bartending-checkbox" name="bartending" value="Bartending" />
        Bartending
        <br />
        <span class="experience"></span>
        <!-- html here completed with jquery -->
    </div>
<div class="reference">Reference 
        <span class="instructions">(Name &amp; Phone)</span>
        <br />
        <input type="text" name="bartending-reference" />
    </div>
</div> 
```

还有一些像这样的jQuery：

```
$('input:checkbox').toggle(function(event){
    var jobPositionId=event.target.id
    $('div.job-position' + '#' + jobPositionId + ' select' + ',' + 'div.job-position' + '#' + jobPositionId + ' div.reference')
        .fadeIn(200);
    $('input#' + jobPositionId).parent('div').find('span.experience').html(some html here);

},function(event){
     var jobPositionId=event.target.id
     $('div.job-position' + '#' + jobPositionId + ' select' + ',' + 'div.job-position' + '#' + jobPositionId + ' div.reference')
         .fadeOut(200);
     $('input#' + jobPositionId).parent('div').find('span.experience').html('');
}); 
```

当复选框被选中时，jquery 淡入一个元素并将一些 html 写入 . 唯一的问题是，当您单击复选框时，该复选框不会收到“检查”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:16:14.863

尝试以下操作：

```
$('input:checkbox').change(function(event){
    if (this.checked) {
        var jobPositionId = event.target.id
        $('div.job-position' + '#' + jobPositionId + ' select' + ',' + 'div.job-position' + '#' + jobPositionId + ' div.reference').fadeIn(200);
        $('input#' + jobPositionId).parent('div').find('span.experience').html("some html here");
    }  else {
        var jobPositionId=event.target.id
        $('div.job-position' + '#' + jobPositionId + ' select' + ',' + 'div.job-position' + '#' + jobPositionId + ' div.reference').fadeOut(200);
        $('input#' + jobPositionId).parent('div').find('span.experience').html('');
    }
}); 
```

[演示](http://jsfiddle.net/AHzYR/)

请注意，`toggle()`已弃用。

# iphone - iPhone：两个 RootViewController 之间的淡入淡出过渡

> ID：11696277
> 
> 赞同：10
> 
> 时间：2012-07-27T22:07:37.937
> 
> 标签：iphone, ios, xamarin.ios, transition

`Obj-C`或者`MonoTouch C#`答案很好。

初始 UIWindow 的 RootViewController 是一个简单的登录屏幕。

```
window.RootViewController = loginScreen; 
```

登录后，我将 Root 设置为主应用程序

```
window.RootViewController = theAppScreen; 
```

在这种情况下，如何在两个 RootViewController 之间进行淡入淡出转换？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-28T01:23:18.687

我可能会建议一种不同的方法来为您制作动画。*只需先*转到`theAppScreen`控制器，如果您需要用户登录，请让它执行（如果您希望它看起来像直接进入登录屏幕，则不必为此步骤设置动画）。这样，当您成功登录后， loginScreen 就可以将动画返回到 main 。（显然，如果你想要淡入淡出效果，不要忘记将控制器设置为。）*`presentViewController``loginScreen``dismissViewControllerAnimated``theAppScreen``modalTransitionStyle``UIModalTransitionStyleCrossDissolve`*

 *如果你一心想要改变你的`rootViewController`，我能想到的唯一方法（我不喜欢它）就是做这样的事情：

```
MainAppViewController *controller = [[MainAppViewController alloc] initWithNibName:@"MainAppViewController" bundle:nil];

// animate the modal presentation

controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

[self.window.rootViewController presentViewController:controller 
                                             animated:YES
                                           completion:^{

    // and then get rid of it as a modal

    [controller dismissViewControllerAnimated:NO completion:nil];

    // and set it as your rootview controller

    self.window.rootViewController = controller;
}]; 
```

第一种技术对我来说似乎更干净。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T02:02:46.873

这是@Robert Ryan 技术的 MT 代码（尽管我同意他的建议，这`theAppScreen`可能是“正确的” `RootViewController`）：

```
void DissolveIn (UIWindow window, UIViewController newController)
{
  newController.ModalTransitionStyle = UIModalTransitionStyle.CrossDissolve;
  window.RootViewController.PresentViewController (newController, true, () => 
  {
    window.RootViewController.DismissViewController (false, null);
    window.RootViewController = newController;
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T01:31:34.453

你可以这样做：

```
window.RootViewController = theAppScreen;

loginScreen.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[theAppScreen presentModalViewController:loginScreen animated:NO]; 
```

loginScreen 可以在完成后自行关闭：`[self dismissModalViewControllerAnimated:YES];`

第一个动画上的 NO 将使 loginScreen 出现，而​​其下方的 theAppScreen 没有任何可见性。完成时的动画 = YES 将提供交叉溶解。*

# ruby-on-rails - 如何从 Rails 控制器设置 js var？

> ID：11696286
> 
> 赞同：0
> 
> 时间：2012-07-27T22:08:35.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 2 个控制器呈现单个视图，我需要根据我的控制器更改视图。我的想法是在我的视图中有一个 JS var，我可以根据调用的控制器进行设置。

为了更彻底地解释我的解释，我需要在 var 中设置一个字符串值，这样我就可以像这样使用它（在 application.js 上的一段 JS 中）：

```
if (value_i_set_in_controller == "controller1") {
   // do something
} else {
   // do something else
} 
```

有什么提示吗？直到知道我一直很容易找到 Rails。

# 编辑

我需要解释一下。

我的 application.js 中有一些 js 渲染了一些对象。

```
$('#calendar').fullCalendar({
...
    // a future calendar might have many sources.
    eventSources: [{
        url: '/DYNAMIC_PATH',
        color: 'yellow',
        textColor: 'black',
        ignoreTimezone: true
    }], 
```

我只是通过使用日历视图来呈现它：

```
<div id='calendar'></div> 
```

我正在考虑在日历视图中做这样的事情：

```
<div id='calendar'></div>

<script type="text/javascript">
  var calendar_source = <% @dyn_path %>;
</script> 
```

显然它不起作用......这样我就可以在我的 js 中读取 calendar_source var 并使用它来正确设置 eventSources。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:45:42.837

我认为您只是缺少引号：

```
<script type="text/javascript">
  var calendar_source = '<%= @dyn_path %>';
</script> 
```

无论如何，我经常需要这种分配，它完美地工作:) 如果它仍然不起作用，请查看生成的代码和 JS 控制台（firebug，chrome 调试器......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:19:56.483

做就是了：

```
if (<%= @your_value.to_json %> == "controller1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:44:14.110

不知道这是否是一种干净的方法，但它是这样的：

在我的 application.js 我放

```
 eventSources: [{
        url: '/events/' + $('#calendar_event_path').data("value"),
        color: 'yellow',
        textColor: 'black',
        ignoreTimezone: true
    }], 
```

然后在每个控制器中设置一个如下值：

```
@calendar_event_path = "company_events_index" 
```

然后我的观点是这样的：

```
<div id='calendar'></div>

<div id='calendar_event_path' data-value='<%= @calendar_event_path %>'></div> 
```

# php - ajax 代码期间的 Javascript 使用

> ID：11696289
> 
> 赞同：1
> 
> 时间：2012-07-27T22:08:54.507
> 
> 标签：php, javascript, ajax

我正在更新问题。为了简化情况，我在**index.php**文件中有这个脚本

```
<form name="f" action="index.php" method="post">
    <input type="button" name="but" id="but" value="Retrieve">
    <div id="div"></div>
    <input type="submit" name="ok">
</form>

<script type="text/javascript">
document.getElementById("but").onclick = function(){
    var http = false;
    if (window.XMLHttpRequest){
        http = new XMLHttpRequest();
    } else {
        http = new ActiveXObject("Microsoft.XMLHttp");
    }
    if (http){
        http.open("POST","other.php",true);
        http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        http.onreadystatechange = function(){
            if (http.status==200 && http.readyState==4){
                document.getElementById("div").innerHTML = http.responseText;
            }
        };
        http.send(null);
    }
};
document.getElementById("y").onclick = function(){
    alert("okaaay");
};
</script> 
```

并有**other.php**文件与下面的脚本

```
<?php
echo "<input type='text' name='y' id='y'>";
?> 
```

Ajax 脚本工作得很好，但我的问题是，当在 index.php 页面中检索这个标记的输入元素时，使用第二个 JavaScript 代码我无法操作它，请帮助，谢谢 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:12:23.710

更改代码，以便在 other.php 的响应返回后设置“y”onclick，如下所示：

```
 http.onreadystatechange = function(){
        if (http.status==200 && http.readyState==4){
            document.getElementById("div").innerHTML = http.responseText;
            document.getElementById("y").onclick = function(){
              alert("okaaay");
            };
        }
    }; 
```

否则，您将在尚不存在的元素上设置该事件处理程序:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:12:56.923

相反，我认为您应该只发回一些信息：

```
$response = json_encode( array('type'=>'text','name'=>'y','id'=>'y') );
print $response; 
```

然后，当您收到它（作为 application/json 类型）时，使用 javascript 创建一个 type 的新元素`input`，然后使用您收到的 json 为其提供所需的属性。一旦它被创建并存储在一个变量中，将该元素放在你的 div 中。

# objective-c - iOS编程：如何识别用户画的是圆圈还是十字？

> ID：11696290
> 
> 赞同：0
> 
> 时间：2012-07-27T22:08:55.520
> 
> 标签：objective-c, ios, uigesturerecognizer

好吧，我是 iOS 开发的新手，所以我决定从一个简单的游戏开始：井字游戏

我添加了一些困难，让用户自由地绘制他们的标记：一个圆圈或一个十字，而不是从一个包含这些标记的插槽中挑选它们，就像在现实世界中我们使用笔和一块玩这个游戏一样纸。

现在的问题是我怎么知道用户在黑板上画的是圆圈还是十字？任何建议或参考链接表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:41:56.710

不用抬起手指就可以画圆。如果开始（触地）结束（触地）彼此相当接近，并且您在点之间有相当多的距离，那么您就有一个圆圈。您可以通过计算主要和次要半径来改进这一点，并查看这些点如何适合具有这些半径的椭圆。

如果您考虑触地和向上操作，则交叉它由两个绘图操作组成。检查起点和终点之间的距离是否相当大。当他画第二条线时，检查它们是否相交。如果它们相交，则很可能是一个十字架。您可以通过检查点与从第一点到最后一点的线的拟合程度来进一步改进（触地向上）

这是一种简单的检查方法。当然，在某些情况下，这种方法可能会失败。但是除非你想进入更复杂的东西，否则这应该工作得很好。

# c# - 从 BIN 读取时将十六进制值转换为字符串

> ID：11696291
> 
> 赞同：0
> 
> 时间：2012-07-27T22:09:04.553
> 
> 标签：c#, parsing, binary

我正在用 C# 编写一个程序来修改和操作用于汽车计算的二进制文件...当我只是尝试向用户显示某个地址的十六进制值时遇到了一个问题（我已经让程序修改该文件是必要的，现在我正试图让它对用户更加友好）我已经让程序以十六进制将整个文件写入文本框，但由于某种原因，我在尝试显示一个值时遇到了问题。这是代码，你可以看到我已经注释掉了用于显示整个文件的部分......

```
// Opens the stream, notice that this case only has.Read appended to it, we
// don't want to harm the original binary file
using (FileStream stream = new FileStream(chosenFile, FileMode.Open, FileAccess.Read))
{
    // returns the number of bytes in the file...
    size = (int)stream.Length; 
    // Initializes the array in which to store the data bytes...
    data = new byte[size];
    // Writes the binary data to a particular file...
    // In this case the data[] array
    stream.Read(data, 0, size); 
    progressBar1.Maximum = size;

    // Prints the original binary file...
    while (printCount < size) 
    {
        int i = data[printCount];
        // Formats the data to the same format as the hex editor...
        // not sure exactly why it works...
        // string h = i.ToString("x2"); 
        // richTextBox1.Text += h + "-";

        if (printCount1 == 15)
        {
            // richTextBox1.AppendText(Environment.NewLine);
            printCount1 = 0;
        }
        if (stream.Position == 32)
        {
            pinByte1 = i.ToString("x2");
        }
        if (stream.Position == 33)
        {

            pinByte2 = i.ToString();
            // Now stores the reversed location of the two,
            // convert to decimal for pin...
            pin = pinByte2 + pinByte1;

        }

        printCount++;
        printCount1++;
        progressBar1.Increment(1);

        textBox1.Text = "Please wait, reading original BIN...";
    }
    textBox1.Clear();
    textBox1.Text = "Your file has been read, proceed to unlock...";
    textBox2.Text += pinByte1;
    textBox3.Text += pinByte2;
    textBox6.Text += pin;
} 
```

# javascript - 如何在 Google 地图中制作覆盖世界的多边形？

> ID：11696292
> 
> 赞同：0
> 
> 时间：2012-07-27T22:09:16.167
> 
> 标签：javascript, google-maps, google-maps-api-3

我想制作一个覆盖世界的多边形，并有第二条路径，以便从中切出一个形状。我很难确定要使用的正确纬度/经度值，并且填充了“内部多边形”，而不是被打孔。有任何想法吗？我正在使用 Google Maps 3 javascript API。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:27:28.560

这是[一个覆盖除弗吉尼亚以外的世界的 kml 文件](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_nosidebar.html?lat=37.155939&lng=-79.497071&zoom=6&type=m&filename=http://www.geocodezip.com/geoxml3_test/virginia_inverted_kml.xml)

```
<MultiGeometry>
<Polygon>
<outerBoundaryIs> <!-- covers the whole world -->
<LinearRing>
<coordinates>
180,85 90,85 0,85 -90,85 -180,85 -180,0 -180,-85 -90,-85 0,-85 90,-85 180,-85 180,0 180,85
</coordinates>
</LinearRing>
</outerBoundaryIs>
<innerBoundaryIs>  <!-- hole -->
<LinearRing>
<coordinates>-75.914,36.576,0.0 ... 
```

要使“内部多边形”不被填充，它的路径必须以与外部路径相反的方向缠绕。我有一个可以在 kml 上运行的[缠绕计算器](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linkto.html?filename=http://www.geocodezip.com/geoxml3_test/Polygon_with_holesA.xml)，以及一个[帮助从 kml 反转多边形缠绕的](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/crues_450_windingFix_kml.xml)页面（不是非常用户友好）

# c++ - 为什么包含指令在头文件之上？

> ID：11696294
> 
> 赞同：7
> 
> 时间：2012-07-27T22:09:19.237
> 
> 标签：c++, c, include

曾经在一个编程课上有人告诉我，C++ 通过让程序员在功能块中的任何位置声明其变量，实现了更好的可读性。这样，变量与处理它的代码部分组合在一起。

为什么我们不对包含做同样的事情？换句话说，为什么不鼓励将包含文件放在实际使用它的定义旁边？

```
parser::parser()
{
  // some initialization goes there which does not make use of regex
}

#include <boost/regex.hpp>
parser::start()
{
  // here we need to use boost regex to parse the document
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T22:17:42.933

造成这种情况的原因之一是`#include`无上下文，它们只是纯文本包含，并且将其放在代码中间可能会产生一些不良影响。例如，假设您有一个命名空间，并且此文件中的所有代码都属于该命名空间：

```
// Include on demand:
namespace ns {
   void f() {} // does not need anything
//... lots of other lines of code
#include <vector>
   void g() { std::vector<int> v; }
} 
```

现在这甚至可能编译得很好......而且是错误的。因为包含在命名空间内，所以文件的内容被转储到里面`ns`，并且包含的​​文件声明/定义`::ns::std::vector`。因为它只是标头，它甚至可能编译得很好，只有当您尝试在具有不同子系统（在不同命名空间中）的接口中使用它时才会失败 - 这可以修复，您只需要关闭所有上下文，添加包含并重新打开相同的上下文...

在其他情况下，您的翻译单元中的代码实际上可能会影响包含。例如，考虑您`using namespace`在翻译单元中添加了一个指令。此后包含的任何标头都将具有该`using namespace`指令，这也可能产生不良影响。

它也可能以不同的方式更容易出错。考虑两个定义了`f`for`int`和不同重载的头文件`double`。您可以`int`在文件开头添加一个（比如版本）并使用它，然后添加另一个并使用它。现在，如果您`f(5.0)`在包含第二个标头的行上方调用，则该`int`版本将被调用——此时编译器只有重载可用——这将是一个难以捕捉的错误。完全相同的代码行在文件的不同位置将具有完全不同的含义（诚然，情况已经如此，但在文件中的声明中，更容易*找到*哪个是被拾取的以及为什么）

通常，包含声明您将在组件中使用的元素，将它们放在顶部可以快速浏览依赖项列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T22:19:04.197

想象一下以下文件：

```
#include <someheader>

namespace myns {
  void foo() {
  }

  void bar() {
    // call something from someheader:
    func();
  }
} 
```

`#include <someheader>`靠近使用点可能很诱人。*如果*您改为编写以下内容，那就太好了：

```
namespace myns {
  void foo() {
  }
}

#include <someheader>

namespace myns {      
  void bar() {
    // call something from someheader:
    func();
  }
} 
```

`#ifdef`问题出在中/大型文件中，根据您的缩进样式，很容易跟踪您在命名空间（和其他s）内的嵌套深度。您可能稍后再回来并决定四处移动，或添加另一个嵌套命名空间。

所以，如果你`#include`总是写在顶部，你永远不会因为不小心写下类似的东西而被咬：

```
namespace myns {
  void foo() {
  }

// Whoops, this shouldn't be inside myns at all!
#include <someheader>

  void bar() {
    // call something from someheader:
    func();
  }
} 
```

这将介于错误和非常错误之间，具体取决于`<someheader>`. （例如，您可以通过违反具有多个定义的 ODR 来结束 UB，尽管这些定义在其他方面合法且相同的令牌序列匹配不同的功能，因此违反了 § 3.2.5）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:11:15.643

不鼓励这样做，因为大多数程序员习惯于在文件顶部包含。我认为习惯的力量，并与 99% 的现有代码保持一致。

当我个人想查看包含哪些标题时，我只查看顶部。在某些可疑的特殊（谢天谢地）情况下，我可能会在整个文件中查找包含内容。

对于编译器来说，无论如何都没有区别。

# git - 拒绝主 -> 主（非快进）

> ID：11696295
> 
> 赞同：283
> 
> 时间：2012-07-27T22:09:23.837
> 
> 标签：git, push

我正在尝试推送我的项目（新存储库中的所有文件）。我按照这些步骤进行操作，但是当我推动时出现`git push -u origin master`此错误：

```
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:asantoya/projectnewbies.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

我多次收到此错误，无法弄清楚该怎么做。

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2013-05-04T12:59:15.373

**注意：**这绝不是 git 的推荐用法。这将覆盖遥控器上的更改。仅当您 100% 知道应将本地更改推送到远程主机时才执行此操作。

⚠️试试这个：`git push -f origin master`

* * *

## 回答 #2

> 赞同：196
> 
> 时间：2012-07-27T22:25:27.557

正如错误消息所说：`git pull`在你尝试之前`git push`。显然您的本地分支与您的跟踪分支不同步。

根据项目规则和您的工作流程，您可能还想使用`git pull --rebase`.

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-13T23:52:45.603

我刚刚收到此错误。

我在创建本地 git 存储库后创建了一个 github 存储库，因此我需要在推送到 github 之前接受对本地的更改。在这种情况下，唯一的变化是创建 github 存储库时作为可选步骤创建的自述文件。

```
git pull https://github.com/*username*/*repository*.git master 
```

存储库 URL 是从项目 github 页面上的此处获取的：

![在此处输入图像描述](../Images/be86d4aeaaa3ffca13e7f111b5df0bce.png)

然后我重新初始化（这可能不需要）

```
git init
git add .
git commit -m "update" 
```

然后推：

```
git push 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-04-30T09:05:07.003

如果`git pull`没有帮助，那么您可能已经推送了您的更改（A），之后又`git commit --amend`添加了一些更改（B）。因此，git 认为您可能会丢失历史记录 - 尽管 B 包含来自 A 的所有更改，但它会将 B 解释为不同的提交。

```
 B
            /
        ---X---A 
```

如果之后没有人更改 repo `A`，那么您可以这样做`git push --force`。

`A`但是，如果在其他人之后有更改：

```
 B
            /
        ---X---A---C 
```

那么您必须将人员从更改`A`为`B`（`C`-> `D`）。

```
 B---D
            /
        ---X---A---C 
```

或手动解决问题。我还没想好怎么做。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-09-16T15:12:24.777

使用这个命令：

`git pull --allow-unrelated-histories <nick name of repository> <branch name>`

像：

`git pull --allow-unrelated-histories origin master`

当项目没有任何共同祖先时会发生此错误。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-12-07T09:55:00.007

我在 github 中创建了新的 repo，我遇到了同样的问题，但是在拉取时也有问题，所以这对我有用。

> 但是在已经有很多代码的仓库中不建议这样做，因为这可能会搞砸一切

```
git push origin master --force 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-09-15T12:45:06.460

**警告：**

寻求“ `git pull`”并不**总是**一个解决方案，所以要小心。如果您有意更改了存储库历史记录，您可能会遇到这个问题（Q 中提到的问题）。在这种情况下，git 会将您的历史更改与远程存储库中的新更改混淆。因此，您应该选择`git push --force`，因为调用`git pull`会故意撤消您对历史记录所做的所有更改。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-03-20T16:55:09.740

这是因为您在 master 中做了一些更改，所以项目要求您先拉取。如果你想推它，你可以通过输入以下内容来使用蛮力：

```
git push -f origin master 
```

请记住首先提交您的更改：

```
git add .
git commit -m "Your commit message" 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-03-25T15:10:49.807

试试这个命令：“git pull origin master”

它对我有用。

检查此链接：[https ://help.github.com/articles/dealing-with-non-fast-forward-errors](https://help.github.com/articles/dealing-with-non-fast-forward-errors)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-09-03T21:04:18.930

你需要做

```
git branch 
```

如果输出类似于：

```
* (no branch)
master 
```

然后做

```
git checkout master 
```

确保您没有任何待处理的提交，因为签出将丢失所有未提交的更改。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-02-10T11:52:09.233

！[拒绝] master -> master（非快进）

不要惊慌，这非常容易解决。您所要做的就是发出拉动，您的分支将快进：

**$ git pull myrepo master**

然后重试你的推送，一切都应该没问题：

**$ git push github 大师**

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-08-17T18:17:21.460

当我在开发分支上并且我的主分支没有最新更新时，这发生在我身上。

因此，当我尝试从开发分支进行 git push 时，我遇到了该错误。

我通过切换到 master 分支，git pull 来修复它，然后回到开发分支和 git push。

```
$ git fetch && git checkout master
$ git pull
$ git fetch && git checkout develop
$ git push 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-03-06T04:02:41.780

我的遥控器与本地不同步，所以这对我有用

```
git pull --rebase 
```

并确保当你`git pull`再次这样做时，它应该说已经是最新的，现在你准备好推送到原点了

假设你已经`git remote add origin remote repository URL`

做

```
git push origin master 
```

截图说明了一切 [![在此处输入图像描述](../Images/8b490ac61278c0c90af91dd0515c7899.png)](https://i.stack.imgur.com/2EMlw.png)

## 或者你可以这样做

1.  git stash（临时存储未提交的工作）
2.  git pull（使本地和远程同步）
3.  git stash pop（取回未提交的更改）
4.  git 推送

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-09-03T13:10:07.033

我在开发机器上遇到了这个问题。`dev`树枝推得很好，但树枝`master`给了我（在`git push`树枝上时`dev`）：

```
! [rejected]        master -> master (non-fast-forward) 
```

所以我尝试了：

```
git checkout master
git pull 
```

这给了我：

```
You asked me to pull without telling me which branch you
want to merge with, and 'branch.master.merge' in
your configuration file does not tell me, either. 
```

我发现 master 分支丢失`.git/config`并添加：

```
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

之后在分支`git push`上也工作得很好。`dev`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-12-22T12:39:26.633

我有同样的问题。我使用 Git Totoise。只需右键单击 -> TotoiseGit -> 清理。现在你可以推送到 Github 它对我来说很好：D

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-04-04T19:51:46.997

这是因为您对其主节点进行了冲突更改。而你的存储服务器无法用这些话告诉你，所以它给出了这个错误，因为这不是他为你处理这些冲突的问题，所以他要求你自己做。作为 ？

1-`git pull` 这会将您的代码从您的存储库合并到您的站点主代码。因此显示了冲突。

2-处理这些手动冲突。

3-

```
git push origin master 
```

很快，你的问题已经解决了。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-03-29T07:58:34.427

这也可能是由于在为 Repo 命名时引起的一些名称错误引起的。如果上述任何答案都不起作用。这对我有用：

删除该存储库并创建一个新存储库，然后再次尝试以下命令：

```
cd 'Local Directory Path'
git remote add origin *your_git_name.git*
git push -u origin master 
```

如果添加原点显示已经存在，请改用：

```
git remote set-url origin *your_git_name.git* 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-03-26T04:27:39.470

我唯一能够解决此问题的是删除本地和 git repo 并在两端再次创建相同的。现在工作正常。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-03-11T00:11:53.470

如果有人在尝试推送到 heroku 时遇到此错误，那么只需将 'origin' 替换为 'heroku'，如下所示： git push -f heroku master

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-03-20T18:29:06.487

试试这个，在我的情况下它有效

> `git rebase --abort`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-10-02T05:57:50.753

我也遇到了同样的错误，但我通过获取它的 URL 轻松解决了它

```
git fetch origin Your repository origin 
```

然后只需应用命令

```
git push -f origin master 
```

你会得到一个好的结果

# javascript - 向所有具有水印类的输入元素添加水印

> ID：11696296
> 
> 赞同：2
> 
> 时间：2012-07-27T22:09:40.820
> 
> 标签：javascript, jquery

好吧，我有这个代码：

jQuery

```
//add watermark effect to the specified input box
//get the
var wm = $("input.watermark").attr("title");
$("input.watermark").watermark(wm);
//end 
```

上面的代码应该将标题中的水印基础添加到具有水印类的输入元素中。现在我在想的是让代码更容易和简单，并实现一种有效的方法来做到这一点，但我只是不知道如何。在我的想法中，jquery 的“每个”函数应该能够做到这一点，但我不知道如何做到这一点，所以请帮忙，如果有其他方法可以做到这一点，请建议或推荐。无论如何，我对想法、建议和建议持开放态度。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:12:22.690

您`placeholder`现在可以相当依赖地使用该属性。由于很多原因，它要优越得多。不过，IE 8- 仍然需要 JS 处理。

```
$("input.watermark").each(function () {
   $(this).watermark(this.title);
}); 
```

# mysql - 寻找类似于缓存的东西

> ID：11696304
> 
> 赞同：0
> 
> 时间：2012-07-27T22:11:03.237
> 
> 标签：mysql, ruby-on-rails

我有一个查询需要大约一分钟才能完成，因为它处理大量数据，但我也想将结果放在网站上。显而易见的结论是缓存它（对吗？），但随着时间的推移数据会发生变化，我需要一种方法来自动重新制作缓存页面，可能每 24 小时一次。

有人可以指出我该怎么做吗？

编辑：我想做一个“前 10 名”类型的东西，所以它不显示问题所在的页面，而是显示查询运行所需的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:42:08.057

想一点超出查询。如果您的目标是允许用户查看大量数据，那么请随心所欲地获取这些数据，而不是与将淹没您的 UI 的怪物查询作斗争。结果不仅看起来更好，而且速度更快。

我对这种模式的个人技巧是[DataTables](http://www.datatables.net)。它是一个网格，允许您使用 Ajaxed 查询（内置）在用户想要查看的时间从查询中获取数据“块”。它可以通过对代码的一些简单添加来排序、分页、过滤、限制甚至搜索。它甚至还有一个插件可以将结果导出为 excel、pdf 等。

Datatables 拥有而其他人没有的最大的东西是一个称为“流水线”的概念，它允许您获得要显示的数量（比如 20）以及向前和/或向后的额外数量。这使您仍然可以进行可管理的查询，但不必每次用户点击“下一页”时都点击数据库

我有一个处理数百万条记录的应用程序。对所有数据进行一次查询是不可能的......这将花费太长时间。然而，一次抓取 25 个是闪电般的速度，不需要任何技巧。数据表启动后，我只是对查询进行了性能调整，在需要的地方进行了一些索引，瞧……很棒的响应式应用程序。

这是一个简单的例子：

```
<table id="example"></table>

$('#example').dataTable( {
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "/processing/file.php"
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:44:34.687

使用允许在一定时间后自动过期的缓存存储。

Memcached 做到了，我猜 Redis 也是！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T19:33:54.433

使用 24 小时 TTL（到期）缓存查询结果可能会正常工作。假设这是页面的一块，请使用片段缓存。

您可以按照说明设置 memcached 或 redis 来存储缓存。您可以做的另一件事是设置每 24 小时（或根据需要）预热缓存的作业，这样不幸的用户就不必为您生成缓存。

如果您根据数据库中的状态或更改知道缓存何时过期，则可以根据该状态使缓存过期。很多时候，我使用 created at 或 updated at 字段作为缓存键的一部分来协助此过程。

envy labs 和 new relic 的缩放轨道截屏视频中有一些好东西。[http://railslab.newrelic.com/scaling-rails](http://railslab.newrelic.com/scaling-rails)，有点过时但原理还是一样的。

此外，请查看缓存导轨指南。[http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html)

最后，确保索引设置正确，在此处使用 thinkbots 帖子：[http ://robots.thoughtbot.com/post/163627511/a-grand-piano-for-your-violin](http://robots.thoughtbot.com/post/163627511/a-grand-piano-for-your-violin)

在我的手机上打字所以对错别字表示歉意。

# opengl - SDL_ttf 和 OpenGL 调整大小，在文本边缘获取伪影

> ID：11696306
> 
> 赞同：1
> 
> 时间：2012-07-27T22:11:09.640
> 
> 标签：opengl, text, sdl, truetype, artifacts

我正在使用 SDL_ttf 使用 OpenGL 渲染文本。但是，我在文本边缘得到了令人讨厌的伪影：

[![人工制品](../Images/d2b29e98a02b1a6a7356ed3276599326.png)](https://i.stack.imgur.com/tCWKB.png)

这是代码：

```
#include <string>
#include "SDL.h"
#include "SDL_opengl.h"
#include <SDL_ttf.h>

using namespace std;

#define WINDOW_WIDTH 1280
#define WINDOW_HEIGHT 1024

struct Color
{
    unsigned char R, G, B, A;

    Color(unsigned char r, unsigned char g, unsigned char b, unsigned char a) : 
        R(r), G(g), B(b), A(a)
    {}
};

void DrawRectangle(int left, int right, int top, int bottom, Color c, GLuint Texture);
void DrawTextGL(int left, int top, TTF_Font* font, string text);
GLuint SDLSurfaceToTexture(SDL_Surface* surface);

int main(int argc, char** argv)
{
    SDL_Init(SDL_INIT_VIDEO);   
    SDL_Surface* screen = SDL_SetVideoMode(WINDOW_WIDTH, WINDOW_HEIGHT, 32, SDL_OPENGL);
    TTF_Init();

    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 0);
    glEnable(GL_TEXTURE_2D);
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glViewport(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT);
    glClear(GL_COLOR_BUFFER_BIT);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0f, WINDOW_WIDTH, WINDOW_HEIGHT, 0.0f, -1.0f, 1.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    // Enabling transparency
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 

    SDL_Surface* temp = SDL_LoadBMP("New Bitmap Image.bmp");
    GLuint WhiteTexture = SDLSurfaceToTexture(temp);

    TTF_Font* Font;
    Font = TTF_OpenFont("FreeSerif.ttf", 36);
    DrawRectangle(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT, Color(0, 0, 0, 255), WhiteTexture);
    SDL_GL_SwapBuffers();
    DrawTextGL(300, 300, Font, "graveyard");
    DrawTextGL(600, 600, Font, "graveyard");

    SDL_GL_SwapBuffers();
    system("pause");
    SDL_Quit();
    return 0;
}

void DrawRectangle(int left, int right, int top, int bottom, Color c, GLuint Texture)
{
    glBindTexture(GL_TEXTURE_2D, Texture);

    glColor4f(c.R/255.0f, c.G/255.0f, c.B/255.0f, c.A/255.0f);

    glBegin(GL_QUADS);

    //Top-left vertex (corner) 
    glTexCoord2i(0, 0);
    glVertex2f(GLfloat(left), GLfloat(top));

    //Top-right vertex (corner)
    glTexCoord2i(1, 0);
    glVertex2f(GLfloat(right), GLfloat(top));

    //Bottom-right vertex (corner)
    glTexCoord2i(1, 1);
    glVertex2f(GLfloat(right), GLfloat(bottom));

    //Bottom-left vertex (corner)
    glTexCoord2i(0, 1);
    glVertex2f(GLfloat(left), GLfloat(bottom));

    glEnd();
}

void DrawTextGL(int left, int top, TTF_Font* font, string text)
{
    SDL_Color color = {255, 255, 255, 255};
    SDL_Surface* textSurface;
    textSurface = TTF_RenderText_Blended(font, text.c_str(), color);
    GLuint Texture = SDLSurfaceToTexture(textSurface);

    DrawRectangle(left, left + 260, top, top + 80, Color(255, 255, 255, 255), Texture);

    SDL_FreeSurface(textSurface);
    glDeleteTextures(1, &Texture);
}

GLuint SDLSurfaceToTexture(SDL_Surface* surface)
{
    GLuint texture;
    GLint nOfColors;
    GLenum texture_format;

    // get the number of channels in the SDL surface
    nOfColors = surface->format->BytesPerPixel;

    if (nOfColors == 4)     // contains an alpha channel
    {
        if (surface->format->Rmask == 0x000000ff)
            texture_format = GL_RGBA;
        else
            texture_format = GL_BGRA;
    } 
    else if (nOfColors == 3)
    {
        if (surface->format->Rmask == 0x000000ff)
            texture_format = GL_RGB;
        else
            texture_format = GL_BGR;
    }
    else
    {
        printf("Picture with less than 24-bit color depth detected.\n");
        return 0;
    }

    // Have OpenGL generate a texture object handle for us
    glGenTextures(1, &texture);

    // Bind the texture object
    glBindTexture(GL_TEXTURE_2D, texture); 

    // Set the texture's stretching properties
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    // Edit the texture object's image data using the information SDL_Surface gives us
    glTexImage2D(GL_TEXTURE_2D, 0, nOfColors, surface->w, surface->h, 0,
    texture_format, GL_UNSIGNED_BYTE, surface->pixels);

    // Bind the texture to which subsequent calls refer to
    glBindTexture(GL_TEXTURE_2D, texture);

    return texture;
} 
```

“New Bitmap Image.bmp”只是一个包含一个白色像素的位图。“FreeSerif.ttf”是取自[这里](http://ftp.gnu.org/gnu/freefont/freefont-ttf-20120503.zip)的字体。

# javascript - 同时动画和添加类

> ID：11696310
> 
> 赞同：0
> 
> 时间：2012-07-27T22:11:49.503
> 
> 标签：javascript, jquery, css, jquery-animate

我正在尝试为动画添加一个具有`top`和`left`属性的类，但`div`只是在没有动画的情况下转移到添加的类属性。

```
#myClass.move {
    top:100px;
    left:100px; 
} 
```

目标是在添加类时正确发生动画，并根据添加的类的属性进行动画处理。

```
var shiftTop = parseInt($(".move").css("top")); 
var shiftLeft = parseInt($(".move").css("left")); 

$("#myClass").addClass("move").animate({top: "-="+shiftTop, left: "-="+shiftLeft}, 1000, function() {}); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:26:01.650

使用[**jQueryUI**](http://docs.jquery.com/UI/Effects/addClass)。

[演示在这里](http://jsfiddle.net/tg37u/)

```
$("#myClass").click(function() {
    $(this).addClass("move", 1000);
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T22:22:13.220

```
$('#myClass').animate({top: "-="+shiftTop, left: "-="+shiftLeft}, 1000, function() {
    $(this).addClass('#myClass');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T22:26:04.307

是的，有可能：

**在动画之前添加类**：
`$("#myClass").addClass("move").animate({top: "-="+shiftTop, left: "-="+shiftLeft}, 1000);`
[**演示**](http://jsfiddle.net/kb2yJ/2/)

**在动画之后添加类**：

```
$("#myClass").animate({top: "-="+shiftTop, left: "-="+shiftLeft}, 1000, function() {
    $(this).addClass('move');
}); 
```

[**演示**](http://jsfiddle.net/kb2yJ/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:27:18.287

我假设`.move`您的文档中已经有一个带有类的元素，可以从中读取`shiftTop`和`shiftLeft`值。

如果您需要做的只是更改`top`和`left`属性，则可以完全删除该`addClass`步骤，因为该`animate`函数将它们内联。如果您确实需要之后应用的类，请在`animate`回调中进行。

根据您的兼容性要求，您也可以使用[过渡](http://www.w3schools.com/css3/css3_transitions.asp)完全使用 CSS 来完成此操作。

# c# - GTK 中密码字符的等价物#

> ID：11696311
> 
> 赞同：0
> 
> 时间：2012-07-27T22:11:53.180
> 
> 标签：c#, linux, gtk, gtk#

我正在将 WinForms 应用程序移植到 GTK#。在 WinForms 版本中，我有一个密码字符为“*”的文本框，但不幸的是，我似乎无法在 GTK# 中复制它。任何帮助将不胜感激。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-17T15:19:01.373

对于仍在寻找这个答案的人，这里就是。

对于任何给定的条目，如果您将成员“可见性”设置为“假”，您将获得隐藏字符，例如：

所以

```
foo.Visibility = false; 
```

![在此处输入图像描述](../Images/849f231c2a4b68a689b8305cb65e310c.png)

# joomla - 在我的一个 joomla 网站中按 Shift+a = 全选？

> ID：11696313
> 
> 赞同：1
> 
> 时间：2012-07-27T22:12:10.137
> 
> 标签：joomla, content-management-system, editor, shift

我们的一个客户遇到了一个问题 - 每次她按`Shift`+ `a`（获取大写字母`A`）时，它都会选择文章中的所有内容，就像您要按`Ctrl`+一样`a`。它不会在他们的其他 Joomla 上执行此操作！网站。我在我的电脑上复制了这个问题，所以它不仅仅是一个有问题的键盘。

这可能是某个地方的php问题吗？有没有其他人发生在他们身上？它在 Joomla 中！2.5.5 所以它也是最新的版本。

这个问题让客户很恼火，因为他们最终选择了所有内容，并继续输入，这会删除所有内容。除了我说的“只需按下大写锁定，然后在完成后再次按下”，我们不知道该怎么做。

这也只发生在 Chrome 中，而不是 Firefox，尽管我们真的不希望她离开 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:18:29.673

显然Joomla 内容编辑器中存在一个[令人尴尬的错误，该错误已于 6 月 29 日在 JCE 2.2.1.2 中修复](http://www.joomlacontenteditor.net/news/item/jce-2212-released)

```
This update fixes a bug introduced in TinyMCE 3.5.4 where SHIFT + A in Chrome would select all content instead of creating an uppercase A. 
```

更新 JCE 有望摆脱这种烦人的行为。

# javascript - jQuery 递归函数调用和 Javascript 的 setInterval 有区别吗？

> ID：11696320
> 
> 赞同：-1
> 
> 时间：2012-07-27T22:12:41.500
> 
> 标签：javascript, jquery, recursion, jquery-animate, setinterval

我正在制作一些波浪图像以缓慢反复地上下移动，以赋予它更生动的感觉，我发现了 Javascript 的 setInterval()。这非常适合每 5.3 秒（以略微不同的速度）上下动画我的不同波浪图像。

```
self.setInterval("waves()",5300);

function waves() {  
$('.waves1').animate({
    bottom: '-5px'
}, 2000);
$('.waves1').animate({
    bottom: '7px'
}, 3000);

$('.waves2').animate({
    bottom: '-5px'
}, 2200);
$('.waves2').animate({
    bottom: '7px'
}, 2800);

$('.waves3').animate({
    bottom: '-5px'
}, 1800);
$('.waves3').animate({
    bottom: '7px'
}, 3200);
} 
```

在实现这个之后，我还发现你可以只使用一个递归的 jQuery 函数来保持动画的继续。例如：

```
function animateWaves() {
   $('.waves1').animate({ top: '+=15' },
                        { duration: 2000, easing: "linear" })
               .animate({ top: '-=15' },
                        { duration: 3000, easing: "linear",
                          complete: animateWaves });
}

$(function() {
    animateWaves();
}); 
```

一个（递归或setInterval）比另一个有什么优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:16:24.900

这不是真正的递归。它是函数内部的自引用，但它**只是**一个引用，而不是函数调用。当动画完成时，框架稍后会进行函数调用。

递归涉及活动函数调用的“堆栈”，一个在另一个之上。（在相互交织的相互递归函数的情况下，可能存在干预活动函数。）这里不是这种情况。当基于传递给`.animate()`调用的引用进行调用时，对“animateWaves”的外部调用将已完成。

请注意，jQuery 动画机制还使用了浏览器的计时器机制。如果你仍然在使用这个库，你最好让它为你处理重复。

# php - For While 循环脚本暂停/重启以在 max_execution_time 下运行

> ID：11696322
> 
> 赞同：1
> 
> 时间：2012-07-27T22:12:53.603
> 
> 标签：php

我以手动方式执行此操作，但我认为可能有更自动的方式来执行此操作。下面的脚本必须在每个文件夹中调整 1000 个文件夹的大小，总共有超过 100K 的图像（不是每个文件夹中的 100K）。我只有两分钟的 max_execution_time 来运行它。它可以在两分钟内完成大约 10 个文件夹。但是，实际上我只是希望脚本在两分钟结束之前暂停......然后从它停止的地方重新开始......希望重新启动它是 max_execution_time。我不知道 sleep() 是否可以做到这一点 - sleep 可能会计入执行时间，不确定。

手动方法是将 $count 变量增加 10，然后将 while 循环中的 i$ 也增加 10。因此，它将从中断的地方开始，一次处理 10 个文件夹。刷新以运行它。目前我也没有 cron 访问权限。

这是脚本...

```
class DevTestHelper {

//This will Go through all full size images and resize images into requested folder
function resizeGalleryImages($destFolder, $width, $height, $isCrop = false) {

$count = 1000;

$source = JPATH_SITE."/images/gallery/full";
$dest = JPATH_SITE."/images/gallery/".$destFolder;

echo 'Processing Images<br>';

//Loop through all 1000 folders 0 to 999 in the /full dir
for($i=0; $i < $count;$i++) {
    $iPath = $source.'/'.$i;
    if(is_dir($iPath)) {

            $h = opendir($iPath);
            //Loop through all the files in numbered folder
            while ($entry = readdir($h)) {

         //only read files
                if ($entry != "." && $entry != ".." &&        !is_dir($entry)) {
          $img = new GImage($source.'/'.$i.'/'.$entry);

                    $tmp = $img->resize($width, $height, true, 3);

                    if($isCrop) {
                        $tmpWidth = $tmp->getWidth();
                        $tmpHeight = $tmp->getHeight();

                        $xOffset = ($tmpWidth - $width) / 2;
                        $yOffset = ($tmpHeight - $height) / 2;

                        $tmp->crop($width, $height, $xOffset, $yOffset, false, 3);
                    }

                    $destination = $dest.'/'.$i.'/'.$entry;

                    if(!$tmp->toFile($destination)) {
                        echo 'error in creating resized image at: '.$destination.'<br>';
                  }

                 //echo $entry.'<br>';
        }

            }

        echo 'Processed: '.$i.' Folder<br>';

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:20:42.300

你有几个不同的选择：

1.  有一个填充队列的脚本和另一个处理队列的脚本。
2.  生成多个工作脚本以并行处理处理
3.  每次调整大小后，在循环中使用 set_time_limit(x) 延长脚本超时时间，这样只要数据处理成功，它将继续运行

# php - date_differenc 不工作

> ID：11696326
> 
> 赞同：-1
> 
> 时间：2012-07-27T22:13:32.883
> 
> 标签：php, datediff

我遇到以下错误**“致命错误：无法在第 334 行重新声明 D:\xampp\htdocs\DHatch\front\myprofile.php 中的 date_diff()”**

我的 date_diff() 函数是

```
function date_diff($d1, $d2){
    $d1 = (is_string($d1) ? strtotime($d1) : $d1);
    $d2 = (is_string($d2) ? strtotime($d2) : $d2);

    $diff_secs = abs($d1 - $d2);
    $base_year = min(date("Y", $d1), date("Y", $d2));

    $diff = mktime(0, 0, $diff_secs, 1, 1, $base_year);
    $diffArray = array(
        "years" => date("Y", $diff) - $base_year,
        "months_total" => (date("Y", $diff) - $base_year) * 12 + date("n", $diff) - 1,
        "months" => date("n", $diff) - 1,
        "days_total" => floor($diff_secs / (3600 * 24)),
        "days" => date("j", $diff) - 1,
        "hours_total" => floor($diff_secs / 3600),
        "hours" => date("G", $diff),
        "minutes_total" => floor($diff_secs / 60),
        "minutes" => (int) date("i", $diff),
        "seconds_total" => $diff_secs,
        "seconds" => (int) date("s", $diff)
    );
    if($diffArray['days'] > 0){
        if($diffArray['days'] == 1){
            $days = '1 day';
        }else{
            $days = $diffArray['days'] . ' days';
        }
        return $days . ' and ' . $diffArray['hours'] . ' hours ago';
    }else if($diffArray['hours'] > 0){
        if($diffArray['hours'] == 1){
            $hours = '1 hour';
        }else{
            $hours = $diffArray['hours'] . ' hours';
        }
        return $hours . ' and ' . $diffArray['minutes'] . ' minutes ago';
    }else if($diffArray['minutes'] > 0){
        if($diffArray['minutes'] == 1){
            $minutes = '1 minute';
        }else{
            $minutes = $diffArray['minutes'] . ' minutes';
        }
        return $minutes . ' and ' . $diffArray['seconds'] . ' seconds ago';
    }else{
        return 'Less than a minute ago';
    }
} 
```

在**第 334 行**，这个函数有一个右括号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:16:00.347

`date_diff`已经在 PHP 中了。您必须将其命名为其他名称或仅使用该名称。

# node.js - 在节点上安装 bcrypt 时出现 ELIFECYCLE 错误。CXX 错误？

> ID：11696327
> 
> 赞同：1
> 
> 时间：2012-07-27T22:13:40.130
> 
> 标签：node.js, compiler-construction

安装 OS X Mountain Lion 和 XCode 后，我收到此错误：

```
Jonathans-MacBook-Air:fme jong$ npm install bcrypt
npm http GET https://registry.npmjs.org/bcrypt/0.7.0
npm http 304 https://registry.npmjs.org/bcrypt/0.7.0
npm http GET https://registry.npmjs.org/bindings/1.0.0
npm http 304 https://registry.npmjs.org/bindings/1.0.0

> bcrypt@0.7.0 install /Users/jong/Workspace/fme/node_modules/bcrypt
> node-gyp rebuild

  CXX(target) Release/obj.target/bcrypt_lib/src/blowfish.o
make: c++: No such file or directory
make: *** [Release/obj.target/bcrypt_lib/src/blowfish.o] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:215:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:674:10)
gyp ERR! System Darwin 12.0.0
gyp ERR! command "node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /Users/jong/Workspace/fme/node_modules/bcrypt
gyp ERR! node -v v0.8.4
gyp ERR! node-gyp -v v0.6.1
gyp ERR! not ok 
npm ERR! bcrypt@0.7.0 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! 
npm ERR! Failed at the bcrypt@0.7.0 install script.
npm ERR! This is most likely a problem with the bcrypt package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls bcrypt
npm ERR! There is likely additional logging output above.

npm ERR! System Darwin 12.0.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "bcrypt"
npm ERR! cwd /Users/jong/Workspace/fme
npm ERR! node -v v0.8.4
npm ERR! npm -v 1.1.45
npm ERR! code ELIFECYCLE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/jong/Workspace/fme/npm-debug.log
npm ERR! not ok code 0 
```

我有一种感觉，它不知道要使用哪个编译器。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:02:18.857

显然我只需要从 XCode 的下载面板安装命令行工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T16:45:49.757

问题可能是您的 Node.Js 版本为 0.10，并且某些模块仅适用于以前的 0.8.22 版本，您可以在此处获取：http: [//blog.nodejs.org/2013/03/06/node-v0- 8-22-稳定/](http://blog.nodejs.org/2013/03/06/node-v0-8-22-stable/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T00:57:41.197

xCode 默认不捆绑命令行工具。Apple 在其[文档](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html)中对此进行了解释。

# google-chrome - CSS 使用 :not 选择器和边框

> ID：11696329
> 
> 赞同：1
> 
> 时间：2012-07-27T22:13:40.650
> 
> 标签：google-chrome, css, css-selectors

我有一些像这样的CSS：

```
table.varTabs th
{
    border-collapse: collapse;
    border-bottom: #637356 2px solid;   
}

table.varTabs th.active
{
    border-collapse: collapse;
    border-bottom: #637356 0px solid;
} 
```

这在我的表格中用于显示和隐藏我的 th 下的边框（这是表格顶部的选项卡）。所以在 Firefox 中，当活动在类中时，它可以正常工作，它从基本 css 获得的底部边框被删除。但我的 Chrome 版本并没有这样发生。

如何使用 CSS 选择在类中没有活动的 table.varTabs th？（我想要一种 CSS 方法，而不是 JQuery 或在 HTML 中添加非活动类）。

在 Chrome 中（不正确）：[http](http://screencast.com/t/sqJfWS6S) ://screencast.com/t/sqJfWS6S 在 Firefox 中（正确）：[http ://screencast.com/t/kXPHPV6Hyao](http://screencast.com/t/kXPHPV6Hyao)

请参阅使用变量下的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:17:28.033

`table.varTabs th:not(.active)`

但这应该只在支持 css3 的环境下工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:57:00.753

由于不知何故有一个 Chrome 错误，我这样做了，它奏效了：

```
table.varTabs th
{
    border-collapse: collapse;
    border-bottom: #637356 2px solid;   
}

table.varTabs th.active
{
    border-collapse: collapse;
    border-bottom: #fff 2px solid;
} 
```

创建一个白色边框以覆盖白色背景上的另一个边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:18:25.063

您可以`table.varTabs th`在 CSS 规则中定位，然后将`table.varTabs th.active`规则放在它之后以覆盖您想要为活动类更改的任何内容。`:not`这样做时无需使用，并且与非常旧的浏览器兼容。

```
table.varTabs th {
   /* regular and default rules here */
}

table.varTabs th.active {
   /* .active override rules here */
} 
```

# android - Android GCM - “处理接收到的数据”

> ID：11696334
> 
> 赞同：4
> 
> 时间：2012-07-27T22:13:56.200
> 
> 标签：android, google-cloud-messaging

[GCM的](http://pages.citebite.com/e3s6b5w4ecev)Android 文档说明

> 数据参数中的密钥对值，它们在此意图中可作为额外的，键是额外的名称。

```
private void handleMessage(Intent intent) {
    // server sent 2 key-value pairs, score and time
    String score = intent.getExtra("score");
    String time = intent.getExtra("time");
    // generates a system notification to display the score and time
} 
```

但是 intent.getExtra() 方法不接受参数

```
public Bundle getExtras ()

Since: API Level 1
Retrieves a map of extended data from the intent.

Returns
the map of all extras previously added with putExtra(), or null if none have been added. 
```

**我的问题**

如何从`onMessage()`方法中的 GCM 消息中检索“字符串”？

附言`onMessage(Context context, Intent intent): Called when your server sends a message to GCM, and GCM delivers it to the device. If the message has a payload, its contents are available as extras in the intent.`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T22:37:53.727

你应该使用：

```
intent.getExtras().getString("score");
intent.getExtras().getString("time"); 
```

注意类型，它可以是：

```
intent.getExtras().getInt("myvar"); 
```

或者其他一些类型。看看[Bundle](http://developer.android.com/reference/android/os/Bundle.html)。

# facebook-social-plugins - 将 fb:recommendations-bar 建议限制在域内的子目录中

> ID：11696336
> 
> 赞同：0
> 
> 时间：2012-07-27T22:14:02.120
> 
> 标签：facebook-social-plugins, xfbml, facebook-recommendations

有没有办法将`<fb:recommendations-bar>`建议限制在域内的子目录中？作为一个大学俱乐部，我们有一个子目录，可以在与所有其他校园团体相同的域空间内使用。但我们希望将推荐框建议保留在我们自己的网站中，该网站位于我们的校园组子目录中。推荐我们网站空间之外的页面会适得其反。

# c++ - 尝试在 os x 上构建 opencv 时出错

> ID：11696337
> 
> 赞同：0
> 
> 时间：2012-07-27T22:14:08.910
> 
> 标签：c++, python, opencv

我正在尝试在 OS X 10.6.8 上构建 OpenCV。我下载了源代码，然后创建了一个构建目录，然后运行 ​​ccmake 进行配置，然后运行 ​​cmake。当我运行 make 时，我得到以下输出：

```
[laptop] build$ pwd
/Users/jesse.aldridge/OpenCV-2.4.2/build
[laptop] build$ make
...
[ 92%] Built target opencv_perf_photo_pch_dephelp
[ 92%] Built target pch_Generate_opencv_perf_photo
[ 93%] Built target opencv_perf_photo
[ 93%] Built target opencv_test_photo_pch_dephelp
[ 94%] Built target pch_Generate_opencv_test_photo
[ 94%] Built target opencv_test_photo
Linking CXX shared library ../../lib/cv2.so
Undefined symbols for architecture x86_64:
  "_PyGILState_Ensure", referenced from:
      OnMouse(int, int, int, int, void*)in cv2.cpp.o
      OnChange(int, void*)in cv2.cpp.o
      NumpyAllocator::allocate(int, int const*, int, int*&, unsigned char*&, unsigned char*&, unsigned long*)in cv2.cpp.o
      NumpyAllocator::deallocate(int*, unsigned char*, unsigned char*)in cv2.cpp.o
  "_PyGILState_Release", referenced from:
      OnMouse(int, int, int, int, void*)in cv2.cpp.o
      OnChange(int, void*)in cv2.cpp.o
      NumpyAllocator::allocate(int, int const*, int, int*&, unsigned char*&, unsigned char*&, unsigned long*)in cv2.cpp.o
      NumpyAllocator::deallocate(int*, unsigned char*, unsigned char*)in cv2.cpp.o

  ...a bunch of similar errors 
```

我对 C++ 没有太多经验，所以我不确定这个错误是怎么回事。有小费吗？

这是完整的输出： [https ://gist.github.com/3190726](https://gist.github.com/3190726)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:10:22.947

进入`build`目录后，以下是命令：

```
cmake -G "Unix Makefiles" ..
make -j8
sudo make install 
```

这一直对我有用。不要忘记 cmake 命令末尾的两个点。首先尝试一下，如果有效，您可以尝试更改 ccmake 中的选项。您不应该在 cmake 之前运行 ccmake。它只是 cmake 的一个交互式前端。如果您使用 ccmake 生成 make 文件，则不应运行 cmake。直接从 ccmake 去制作。

# python - 返回前向 ParseResults 添加外部信息

> ID：11696338
> 
> 赞同：0
> 
> 时间：2012-07-27T22:14:24.473
> 
> 标签：python, pyparsing

我想在返回之前向 ParseResults 添加外部信息。我将解析结果返回为 asXML()。将外部数据表示为字典，以便在最终解析时解析为 XML。

这是从 pyparsing import 添加外部数据之前的代码 *

```
# a hypothetical outer parser, with an unparsed SkipTo element
color = oneOf("red orange yellow green blue purple")
expression = SkipTo("XXX") + Literal("XXX").setResultsName('ex') + color.setResultsName('color')

data = "JUNK 100 200 10 XXX green"
print expression.parseString(data).dump()

# main grammar
def minorgrammar(toks):
    # a simple inner grammar
    integer = Word(nums)
    grammar2 = integer("A").setResultsName('A') + integer("B").setResultsName('B') + integer("C").setResultsName('C')

    # use scanString to find the inner grammar
    # (since we just want the first occurrence, we can use next
    # instead of a for loop with a break)
    t,s,e = next(grammar2.scanString(toks[0],maxMatches=1))

    # remove 0'th element from toks
    del toks[0]

    # return a new ParseResults, the sum of t and everything 
    # in toks after toks[0] was removed
    return t + toks

grammar1 = expression.setParseAction(minorgrammar)
x = grammar1.parseString(data).asXML("main")
print x 
```

* * *

输出是

```
<main>
  <A>100</A>
  <B>200</B>
  <C>10</C>
  <ex>XXX</ex>
  <color>green</color>
</main> 
```

* * *

添加外部数据后的代码

```
 ...
    external_data = {'name':'omar', 'age':'40'}

    return t + toks + ParseResults(external_data)

grammar1 = expression.setParseAction(minorgrammar)

x = grammar1.parseString(data).asXML("main")

print x 
```

## 输出

```
<main>
  <A>100</A>
  <B>200</B>
  <C>10</C>
  <ex>XXX</ex>
  <color>green</color>
  <ITEM>{&apos;age&apos;: &apos;40&apos;, &apos;name&apos;: &apos;omar&apos;}</ITEM>
</main> 
```

* * *

我想要表格中的输出

```
<main>
  <A>100</A>
  <B>200</B>
  <C>10</C>
  <ex>XXX</ex>
  <color>green</color>
  <name>omar</name>
  <age>40</age>
</main> 
```

该代码中的错误是什么？比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:05:35.800

一个问题是这个片段：

```
external_data = {'name':'omar', 'age':'40'}
return t + toks + ParseResults(external_data) 
```

ParseResults 将 dict 作为构造函数参数，但我认为它不会做你想做的事 - 它只是将 dict 分配为第 0 个元素，并且不分配任何结果名称。

您*可以*使用其 dict 样式分配将命名值分配给 ParseResults：

```
pr = ParseResults(['omar','40'])
for k,v in external_data.items():
    pr[k] = v 
```

看看这是否能让你更接近你想要的格式。

编辑：嗯，似乎 asXML 对如何将命名结果添加到 ParseResults 更挑剔，而不仅仅是设置名称。这将更好地工作：

```
def addNamedResult(pr, value, name):
    addpr = ParseResults([value])
    addpr[name] = value
    pr += addpr 
```

然后在您的解析操作中，使用它们的名称添加值：

```
addNamedResult(toks, 'omar', 'name')
addNamedResult(toks, '40', 'age') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:32:04.177

非常感谢保罗。我修改了您的函数以添加数据字典

```
...
external_data = {'name':'omar', 'age':'40'}
return t + toks +  addDicResult(external_data)
...

def addDicResult(dict):
     pr = ParseResults([])
     for k, v in dict.items():
         addpr = ParseResults([v])
         addpr[k] = v
         pr += addpr
     return pr

The output
<main>
  <A>100</A>
  <B>200</B>
  <C>10</C>
  <ex>XXX</ex>
  <color>green</color>
  <age>40</age>
  <name>omar</name>
</main> 
```

# javascript - jquery 从 6 个表单中只选择一个收音机

> ID：11696339
> 
> 赞同：1
> 
> 时间：2012-07-27T22:14:27.510
> 
> 标签：javascript, jquery, html, forms, radio-button

我有 6 个表格，每个表格有 2 个单选按钮。

我希望用户体验是，他们一次只能选择 1 个单选按钮。因此，当他们遍历另一个表单并检查单选按钮时。所有其他单选按钮将取消选择。

这是我迄今为止的尝试。

```
$(document).ready(function () {                 
  $('input[type=radio]').prop('checked', false);

  $('input[type=radio]').each(function (i) {                        
    $(this).not($('radio:checked')).prop('checked', false);                     
  });                   
}); 
```

我的想法是在开始时取消选择所有按钮。但在那之后我对我的逻辑感到困惑。

我想说

如果选中此收音机，请取消选中所有其他收音机。

虽然在英语中它适合一个句子，但我怎样才能将它放入 jquery 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T22:18:04.633

```
$('input[type=radio]').on('change', function(){
    $('input[type=radio]').not(this).prop('checked', false);
}); 
```

[小提琴](http://jsfiddle.net/vtNFR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:18:16.163

本质上你不能“取消点击”一个单选按钮 - 所以你所要做的就是在“点击”事件上，取消选择所有单选元素并选择被点击的那个。

```
$('input[type=radio]').on('click',function(e){
   $('input[type=radio]').prop('checked','');
   $(this).prop('checked','checked');
   e.preventDefault();
}); 
```

## [jsFiddle](http://jsfiddle.net/3xD7V/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:28:32.420

试试这个（见演示：http: [//jsfiddle.net/3xD7V/1/](http://jsfiddle.net/3xD7V/1/)）：

```
$(document).ready(function () {
  $('input[type=radio]').prop('checked', false);
  $('input[type=radio]:first').prop('checked', true)

  $('input[type=radio]').click(function (event) {
    $('input[type=radio]').prop('checked', false);
    $(this).prop('checked', true);

    event.preventDefault();
  });
}); 
```

# html - 保持 buddypress 管理栏固定在页面顶部

> ID：11696342
> 
> 赞同：0
> 
> 时间：2012-07-27T22:15:02.167
> 
> 标签：html, css, wordpress, buddypress

我刚刚在我的 wordpress 支持的网站上安装了 buddypress，我想在您向下滚动时阻止管理栏跟随屏幕。如何让它在页面顶部保持静止并在向下滚动时让它消失？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:23:58.180

在不知道他们如何实现它的情况下......留在窗口中的项目可以通过具有`position: fixed; top: 0`类型语法的 css 处理。将位置更改`absolute`为可能是最直接的更改；当滚动到顶部时，它将变为仅卡在顶部，而不是始终卡在顶部。或者有很多方法可以通过 javascript 来实现。你知道它是如何工作的吗？尝试在浏览器中检查元素（firefox 或 chrome 中的 firebug）并检查哪些 css 规则应用于标题。或者至少发布一个网址。

# java - 只有一个元素的列表的名称是什么

> ID：11696344
> 
> 赞同：6
> 
> 时间：2012-07-27T22:15:11.067
> 
> 标签：java, list

只有一个元素的列表的“正式”名称是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T22:16:06.223

Java`Collections`将此称为单例列表，尽管我不认为这是一个正式名称。

[public static List singletonList(T o)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList%28T%29) *返回一个只包含指定对象的不可变列表。返回的列表是可序列化的。*

我更喜欢“单元素列表”。

**编辑**：看来单例是单个元素集[的有效数学术语。](https://en.wikipedia.org/wiki/Singleton_%28mathematics%29)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T22:24:02.433

我将其称为数学中的`unitList`（以避免与[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)混淆）仅包含单个元素的集合*也*称为[单位集](http://en.wikipedia.org/wiki/Singleton_%28mathematics%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T22:31:16.293

你*可以*称它为单例，因为对于只有一个元素的*集合来说，这是正确的数学术语。*然而，单例一词在计算机科学中的使用方式不同，通常指的是一个对象，在程序执行期间的任何给定时间都只有一个实例，因此它可能会产生误导或混淆，因此我会避免将它用于一个元素集。

在数学中，只有一个元素的集合也称为*单位集*。这是一个我会去的名字。

# firefox - 使用文件夹启动 Firefox 扩展

> ID：11696349
> 
> 赞同：0
> 
> 时间：2012-07-27T22:15:58.617
> 
> 标签：firefox, firefox-addon, firefox-5

我是 Firefox 扩展开发的新手。我已经完成了一些基本[教程](https://developer.mozilla.org/en/Creating_a_status_bar_extension)。当我按照教程中所示将文件夹放入配置文件文件夹/扩展文件夹或配置文件文件夹时，重新启动后扩展安装没有任何变化。然后，我也完成了本[教程](https://developer.mozilla.org/en/Building_an_Extension)。我也尝试使用指针对象。这对我也不起作用。我使用的 Firefox 版本是 14.0.1，当我尝试安装 ESPN Crickinfo（您可以在线找到扩展）扩展时，它也无法正常工作。我什至无法打开此扩展程序的选项页面。对这个问题有什么建议？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:46:59.097

尝试使用新的配置文件[http://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles](http://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles)

# android - Android-sdk-osx 修订版 20 hello world 不是开箱即用的

> ID：11696356
> 
> 赞同：0
> 
> 时间：2012-07-27T22:16:18.563
> 
> 标签：android, macos

运行 android-sdk-osx 修订版 20（附加 XML Schema #5，存储库 XML Schema #7（无论是什么）），我以推荐的方式生成默认应用程序，然后尝试在调试模式下运行它，如此处所述：http: [//developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html)

```
ant debug
. . .

[apkbuilder] Creating AndroidHelloWorld-debug-unaligned.apk and signing it with a debug key...

BUILD FAILED
/Users/dsw/android-sdk-macosx/tools/ant/build.xml:920: The following error occurred while executing this line:
/Users/dsw/android-sdk-macosx/tools/ant/build.xml:931: The following error occurred while executing this line:
/Users/dsw/android-sdk-macosx/tools/ant/build.xml:295: com.android.sdklib.build.ApkCreationException: Debug Certificate expired on 3/2/10 8:46 PM
    at com.android.sdklib.build.ApkBuilder.getDebugKey(ApkBuilder.java:283)
    at com.android.sdklib.build.ApkBuilder.<init>(ApkBuilder.java:390)
    at com.android.ant.ApkBuilderTask.execute(ApkBuilderTask.java:334)
. . . 
```

坦率地说，我对 Google 的期望会更好。任何人都知道如何更新调试证书（真的，我需要一个证书才能在本地运行吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:49:06.053

调试密钥用于在创建后 365 天过期。它们现在在创建后 30 年到期。删除调试密钥库，Eclipse 将为您构建一个新密钥库。

在 Preferences>>Android>>Build 下找到位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:09:05.127

如果您没有运行 Eclipse，则答案（根据 Krylez 为 Eclipse 的此线程中的其他答案修改）是：

```
rm $HOME/.android/debug.keystore 
```

然后再次构建。

# ios - iOS 如何用 searchString 填充 NSMutableArray？

> ID：11696358
> 
> 赞同：-2
> 
> 时间：2012-07-27T22:16:40.327
> 
> 标签：ios, search, nsmutablearray, uisearchbar

当用户单击按钮“x”到可变数组时，我想`searchString`从 UISearchBar 收集所有内容，但是它没有被添加到 self.historyList 中......

在方法中：

```
 - (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchString
        {
            self.ss = searchBar.text;

//this is initialized in viewDidLoad method
            //self.addSSFort = [[NSMutableArray alloc]init];

            [self.addSSFort addObject: self.ss];

            NSLog (@"addSSFort contains %@", self.addSSFort);

            //NSMutableArray *historyList = [[[NSMutableArray alloc]init]retain];
//this one is initialized in viewDidLoad method
            //self.historyList = [[NSMutableArray alloc]init];

            if ([self.ss length] == 0)
            {
        // here it is never being added
                [self.historyList addObject:[self.addSSFort objectAtIndex:[self.addSSFort count]-1]];
            }
    } 
```

编辑 ：

```
self.addSSFort contains:

x
xc
xco
xcod
xcode <- I want to add this to self.historyList
""
t
tr
tre
tree <- I want to add this to self.historyList
"" 
```

但 self.historyList 包含：

```
""
"" 
```

我希望它包含：

```
xcode
tree 
```

我使用这个语句`if ([self.ss length] == 0)`，因为它告诉我用户点击了“x”来删除 searchString，并告诉我他/她已经完成了当前的 searchString。我知道 ARC，但我是为 iOS 3 > iOS 5 的用户这样做的。

编辑2：

啊，我已经解决了这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:55:30.470

这是您的示例的伪代码：

```
get text
add text to array
if text is empty string:
    add empty string to history 
```

这真的是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:59:34.880

也许我不明白你想做什么，但你有

```
If ([self.ss length] == 0)
{
        [self.historyList addObject:[self.addSSFort objectAtIndex:[self.addSSFort count]-1]];
} 
```

如果搜索栏中有文本，则 self.ss 的长度不会为 0。您的“If”语句阻塞了将对象添加到 self.historyList 的行。您是否在将字符串对象添加到 historyList 的行上放置了一个断点，以查看您是否到达那里？

附带说明一下，如果您使用 ARC，则不需要保留。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-28T06:30:06.683

它应该是：

```
[self.historyList addObject:[self.addSSFort objectAtIndex:[self.addSSFort count]-2]]; 
```

代替：

```
[self.historyList addObject:[self.addSSFort objectAtIndex:[self.addSSFort count]-1]]; 
```

# asp.net - 使用数据库的 ASP.NET 登录验证

> ID：11696359
> 
> 赞同：0
> 
> 时间：2012-07-27T22:16:42.017
> 
> 标签：asp.net, database, login, sqldatasource

我已经登录了我的 asp 页面请求名称/密码和按钮。

我创建了到我的数据库的连接字符串，并在以下位置`SqlDataSource`进行了查询`SqlDataSource`：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
     ConnectionString="<%$ ConnectionStrings:CarRentalConnectionString %>" 
     SelectCommand="SELECT * FROM [Customers] WHERE (([UserName] = @UserName) AND ([PassWord] = @PassWord))">
     <SelectParameters>
        <asp:ControlParameter ControlID="uname" Name="UserName" PropertyName="Text" Type="String" />
        <asp:ControlParameter ControlID="pass" Name="PassWord" PropertyName="Text" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

我的问题是我不知道如何激活/执行它以及如何获取从查询返回的数据？

我有一种感觉我走错了路（希望是错的）

希望你们中的一个可以给我一个提示或指出我正确的方向:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:54:18.690

使用 SqlDataSource 是不合适的，因为您不是简单地以声明性方式检索数据。您需要以程序方式定义用户验证（而非验证）逻辑。

通常的方法如下。请注意，您应该散列您的密码，而不是以明文形式存储它们。为简洁起见，省略了哈希盐腌。

```
public static Boolean Authenticate(String userName, String password) {

    using(SqlConnection c = new SqlConnection("myConnectionString")
    using(SqlCommand cmd = c.CreateCommand()) {
        c.Open();
        cmd.CommandText = "SELECT UserName, PasswordHash, OtherDataEtc FROM Users WHERE UserName = @userName";

        cmd.Parameters.Add("@userName", SqlDbType.Varchar, 50).Value = userEnteredUserName;

        using(SqlDataReader rdr = cmd.ExecuteReader()) {
            if( !rdr.Read() ) return false; // no matching user found

            Byte[] passwordHash = rdr.GetBytes( 1 );
            Byte[] hash = Hash( userEnteredPassword ); // Use at least SHA1
            return Array.Equals( passwordHash, hash );
        }
    }
}

// Usage in ASP.NET:

public override OnPageLoad(Object sender, EventArgs e) {
    if( IsPostBack ) {
        Validate();
        if( IsValid ) {
            Boolean auth = Authenticate( this.userName, this.password ); // member textbox controls
            if( auth ) {
                FormsAuthentication.SetAuthCookie( this.userName, true );
                FormsAuthentication.RedirectFromLoginPage("somewhere", true);
            } else {
                Response.Redirect("loginFailedPage");
            }
        }
    }
} 
```

# delegates - 在 MKMapView 的子类中不调用 MKMapViewDelegate

> ID：11696364
> 
> 赞同：0
> 
> 时间：2012-07-27T22:17:20.857
> 
> 标签：delegates, mkmapview, subclass, mkmapviewdelegate

我是 Objective C 的新手，但学得很快。我的项目非常完整，我已经实现了比委托等更好的类。

我正在使用 MKMapView 在地图上显示内容。我还需要用户单击将返回一些信息的 Pins，但我确实希望 MKViewMap 在发送信息之前进行一些估计。

因此，我对 MKMapView 进行了子类化，并且正在使用此类进行显示。但我没有接到代表的电话。当我以标准方式使用 MKViewMap 时，它可以正常工作。这是一些代码。子类有一个委托协议，这很好用

// .h 文件

```
#import < MapKit/MapKit.h >

@protocol MyMapViewDelegate < NSObject >

@required

- (void) ReturnAddressToHail:(NSString*) FullAddresse andNumber:(NSString*) FullNumber;
- (void) ReturnSelectedDriverHash:(NSString*) DriverHash;
@end

@interface MyMapViewClass : MKMapView < MKMapViewDelegate >

{

id < MyMapViewDelegate > delegate;

CLLocationCoordinate2D mapCenter;
NSDictionary *Info;
CLLocation * ClientNewLocation;

}

@property (retain) id delegate; 
```

// .m 文件

```
#import "MyMapViewClass.h"
#import "NSObject+MapAnnotationHelper.h"

@implementation MyMapViewClass

@synthesize geoCoder;
@synthesize delegate;

self.delegate = self;

-(void) mapView:(MKMapView *) mapView regionDidChangeAnimated:(BOOL)animated

{

(void) self.updateAddress;
NSLog(@"regionchange delegate");

} 
```

后者永远不会被调用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:32:46.657

我相信你有你的理由，但文档声明你不应该 subclass `MKMapView`，而是使用委托来改变它的行为。可能有一种更简单的方法来做你正在做的任何事情。

> 尽管您不应该继承 MKMapView 类本身，但您可以通过提供委托对象来获取有关地图视图行为的信息。

# javascript - 导出 WebSQL 数据

> ID：11696365
> 
> 赞同：2
> 
> 时间：2012-07-27T22:17:22.077
> 
> 标签：javascript, html, sqlite, local-storage

WebSQL 的主要问题之一是它容易丢失数据。每次浏览器历史记录被删除时，存储在 WebSQL 表中的数据也会被删除。有什么方法可以导出/下载 WebSQL 数据或将其写入文件，仅使用 Javascript 来防止数据丢失？我知道您无法从 JavaScript 访问文件系统，所以这甚至可能吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:02:02.160

您可以将所有数据放入一个 JavaScript 变量中，然后再放入`document.location`它。

HTML：

```
<a href="javascript:onDownload();">Download</a> 
```

JavaScript：

```
function onDownload() {
    document.location = 'data:Application/octet-stream,' +
                         encodeURIComponent(dataToDownload);
} 
```

（取自这篇博文：[如何从 JavaScript 下载数据作为文件](http://blogs.adobe.com/cantrell/archives/2012/01/how-to-download-data-as-a-file-from-javascript.html)）

# php - Joomla PHP 下载对话框动态图片无效

> ID：11696373
> 
> 赞同：1
> 
> 时间：2012-07-27T22:17:50.670
> 
> 标签：php, joomla, joomla2.5, joomla1.7, joomla1.6

我是 Joomla 和 PHP 开发的新手，所以请多多包涵。

在测验后提取一些简单的数据以绘制证书图像。我需要用户单击链接并下载该图像。

再一次，我可以在 Joomla 之外得到一些工作，但在内部却不行。我什至还没有得到动态创建的图像，并且只遇到了静态图像的问题，即下载的文件无效。

这是我能够在 Joomla 之外使用模板预览作为现有图像的一个脚本：

```
<?php
header("Content-type: image/png");  
header('Content-Disposition: attachment; filename="template_preview.png"');  
readfile('template_preview.png'); 
```

下载的时候图片是正确的。

但是，在我的 Joomla 文件中：

```
<?php defined('_JEXEC') or die;
require_once("includes/variables_certificate.php"); 
header("Content-type: image/png");  
header("Content-Type: application/octet-stream");  
header('Content-Disposition: attachment; filename="template_preview.png"');  
$filename = JPATH_SITE.'/templates/'.$this->template.'/template_preview.png';  
readfile($filename); 
```

我得到一个无效的图像。这甚至还不是我要提取动态图像的部分：/

有任何想法吗？

我可以从 Joomla 中找到的唯一其他线程在这里，并且不是完全相同的问题： [强制在 PHP 中下载文件 - 在 Joomla 框架内](https://stackoverflow.com/questions/4149020/forcing-file-download-in-php-inside-joomla-framework) 还遵循了这里的一堆示例：http: [//php.net/manual/en/function。头文件.php](http://php.net/manual/en/function.header.php)

提前谢谢大家！

`#############################################`

部分解决方案适用于静态图像（感谢@Chris！），但试图让动态图像工作

下载.php：

```
<?php
require_once("includes/variables_certificate.php");
defined('_JEXEC') or die;
// $filename = JPATH_SITE.'/templates/'.$this->template.'/template_preview.png'; //works
$filename = JURI::root().'index.php?tmpl=certgenerator&quizmod='.$quizmod; //Not working

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="certificate.png"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($filename));
ob_clean();
flush();
readfile($filename);
exit; 
```

和 certgenerator.php：

```
defined('_JEXEC') or die;
require_once("includes/variables_certificate.php");

$image_file = JPATH_SITE.'templates/'.$this->template.'/images/certificate_page.png'; 
$my_img = imagecreatefrompng ($image_file);
$font_size_big = 24;
$text_color = imagecolorallocate( $my_img, 0, 255, 0 );
$font_file = JPATH_SITE.'templates/'.$this->template.'/FelipaRegular.ttf';  

imagefttext( $my_img, $font_size_big, 0, 55, 75, $text_color, $font_file, "why u no work"); //if commented out image displays but not font obviously, as it's written now it returns a blank page
imagestring( $my_img, 4, 30, 25, "works", $text_color ); //works but doesn't include font

header( "Content-type: image/png" );
imagepng( $my_img );

imagecolordeallocate( $text_color );
imagedestroy( $my_img ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:57:05.773

使用输出缓冲并将文件刷新到浏览器。可能还想确保`defined('_JEXEC')`返回 true。

```
<?php
require_once("includes/variables_certificate.php");
defined('_JEXEC') or die;
$filename = JPATH_SITE.'/templates/'.$this->template.'/template_preview.png';

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($filename));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($filename));
ob_clean();
flush();
readfile($filename);
exit; 
```

# objective-c - 哪个是重用数组的更好方法：实例化一个数组，释放它，重新实例化，还是只清除数组的对象？

> ID：11696381
> 
> 赞同：0
> 
> 时间：2012-07-27T22:18:13.443
> 
> 标签：objective-c, memory-management, nsarray

对于测验应用程序，我有一个类将数据存储在与特定问题相关的数组中。当用户继续下一个问题时，我需要空数据数组。

如果我做类似的事情会更好吗

```
[class release]; //assume that I properly release the arrays and their objects

[class alloc] init]; 
```

或者

`[arrays removeAllObjects];`

或未提及的替代方法？

我觉得如果我使用第一个解决方案，我的代码会更简单，但我担心我会占用太多内存，因为该过程会执行多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:45:36.420

使用简单的解决方案。在你遇到（测量！）问题开始优化之后，而不是之前。

如果您没有看到任何低效率，那么想知道什么更有效是没有意义的。

# iis-7 - 为 IIS 7.* 创建一个模块

> ID：11696387
> 
> 赞同：0
> 
> 时间：2012-07-27T22:18:42.240
> 
> 标签：iis-7, module

我目前正在尝试为 IIS 创建一个 UI 模块。我计划在 IIS 7 及更高版本上使用它。

我遵循了几个不同的教程。

在第一次失败后，我使用此链接中的源代码进行测试。 [为 IIS7 创建 UI 模块以查看当前请求](http://blogs.msdn.com/b/tess/archive/2008/08/28/creating-a-ui-module-for-iis7-to-watch-current-requests.aspx)

我在这里做了更多查看 [如何创建简单的 IIS 管理器模块](http://learn.iis.net/page.aspx/269/how-to-create-a-simple-iis-manager-module/)

我的最终目标是在 IIS 中有一个按钮（就像在第一个链接中一样）。

我正在将程序集放入 GAC ( `%windir%/assembly`)，我检查了这一点。然后我添加了

```
<add name="CurrentRequestsUI" type="CurrentRequestsUI.RequestModuleProvider, CurrentRequestsUI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=269f1cc1a4bf892b" /> 
```

在我的 management.config (%windir%/System32/inetsrv/config) 的 moduleProviders 部分中

然后添加`<add name="CurrentRequestsUI" />`到同一文件的模块部分。

现在，我只是在使用示例源来查看是否可以在开始我的项目之前让它工作。如果我在错误的地方发布此内容，我深表歉意。如果您希望我提供更多信息，请询问，我会提供。

我的问题是如何向 IIS 添加自定义 UI 模块？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:48:08.000

我一直`administration.config`在 Visual Studio 和 Notepad++（32 位应用程序）中编辑该文件，但随后我在记事本（64 位应用程序）中打开了“相同”文件。在记事本中进行更改会在正确的文件中进行更改。

打开 Notepad++ 和 Visual Studio 2010 等 32 位应用程序打开了错误的文件

```
%windir%/SysWOW64/inetsrv/administration.config 
```

打开记事本等 64 位应用程序打开了正确的文件

```
%windir%/System32/inetsrv/administration.config 
```

# java - 在 Grails (Groovy) 和 Java 类之间传递域类的最佳实践？

> ID：11696388
> 
> 赞同：3
> 
> 时间：2012-07-27T22:18:54.147
> 
> 标签：java, grails, groovy

我有一个 Grails 服务，它调用一个用 Java 编写的实用程序类。Java 实用程序类需要使用和操作用 Grails 编写的域类，这些域类会传递给它。最后，输出需要是 Grails 中的域类，而不是 java 对象。

所以基本上：Grails 域类输入 -> 由 Java 实用程序类操作 -> Grails 域类输出到 Grails 服务并转发到控制器。

处理上述情况的最佳做法是什么？我应该在 Java 中编写相同的值对象吗？我想我不能直接在 Java 类中操作 Grails 域类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:57:35.687

您可以直接将其发送到 Java 类。

需要注意的一件事是，您应该知道您的对象从当前的 Hibernate 会话中分离出来。如果是这种情况，您可能需要将其附加回（`merge()`例如使用）到另一个 Hibernate 会话，然后再继续。

# c# - 获取 StackPanel 的子项中具有特定条件的项目的计数

> ID：11696391
> 
> 赞同：0
> 
> 时间：2012-07-27T22:19:19.267
> 
> 标签：c#, wpf, linq

我有一个`UserControl`我创建的自定义

```
public class MyObject : UserControl
{
    public MyObject()
    {

    }
    public bool IsFinished { get; set; }
} 
```

我添加了让我们说 10(will be dynamic)到 StackPanel 和我设置为 true`MyObject`的所有其他项目。`IsFinished`

```
private void DoSomething()
{
    StackPanel panel = new StackPanel();
    for (int i = 0; i <= 10; i++)
    {
        int rem = 0;
        Math.DivRem(i, 2, out rem);
        MyObject newObj = new MyObject();
        if (rem == 0)
        {
            newObj.IsFinished = true;
        }
        panel.Children.Add(newObj);
    }
} 
```

现在我可以添加以下内容并得到我正在寻找的答案 (5)

```
int FinishedItems = 0;
foreach (object o in panel.Children)
{
    if (o.GetType() == typeof(MyObject))
    {
        if (((MyObject)o).IsFinished)
        {
            FinishedItems++;
        }
    }
} 
```

2个问题：

A. 有没有更雄辩的方式？也许`Linq`我还在学习如何使用它。据我了解，这就是 LINQ 在技术上所做的。

B. 我对 LINQ 有什么误解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:24:27.083

所以你要计算成品：

```
int FinishedItems = panel.Children.OfType<MyObject>()
                         .Count(mo => mo.IsFinished); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T22:24:37.347

你可以试试：

```
int FinishedItems = panel.Children.OfType<MyObject>().Where(mo=>mo.IsFinished).Count(); 
```

# c++ - OpenCV 2.4 CascadeClassified detectMultiScale 参数

> ID：11696393
> 
> 赞同：0
> 
> 时间：2012-07-27T22:19:29.733
> 
> 标签：c++, opencv, haar-wavelet

我正在查看 objectdetect 样本，并在我用人行天桥的相机拍摄的一些镜头上尝试了几个身体检测级联（*haarcascade_fullbody/haarcascade_upperbody/haarcascade_lowerbody,haarcascade_mcs_upperbody*）。到目前为止一切都很好，但这是一项要求很高的功能。

我认为如果我通过最小/最大尺寸可能会运行得更顺畅，因为我的相机总是在同一个地方并且我找出了最小/最大边界框。不幸的是，我在尝试这样做时遇到了语法错误：

```
//my call
body.detectMultiScale( gray, bodies, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, cv::Size(30, 30),cv::Size(0,0),cv::Size(5,13),cv::Size(45,80));
//errors:
main.cpp:43: error: no matching function for call to 'cv::CascadeClassifier::detectMultiScale(cv::Mat&, std::vector<cv::Rect_<int>, std::allocator<cv::Rect_<int> > >&, double, int, int, cv::Size, cv::Size, cv::Size, cv::Size)'
/opt/local/include/opencv2/objdetect/objdetect.hpp:383: note: candidates are: virtual void cv::CascadeClassifier::detectMultiScale(const cv::Mat&, std::vector<cv::Rect_<int>, std::allocator<cv::Rect_<int> > >&, double, int, int, cv::Size, cv::Size)
/opt/local/include/opencv2/objdetect/objdetect.hpp:393: note:                 virtual void cv::CascadeClassifier::detectMultiScale(const cv::Mat&, std::vector<cv::Rect_<int>, std::allocator<cv::Rect_<int> > >&, std::vector<int, std::allocator<int> >&, std::vector<double, std::allocator<double> >&, double, int, int, cv::Size, cv::Size, bool) 
```

我只是添加了两个`cv::Size`对象作为最小值最大值，但老实说我不确定：

1.  当文档将它们列为 ints 时，为什么前面的参数也是 Size() 对象？
2.  我是在查看错误的文档还是以错误的方式查看文档？

> C++: void CascadeClassifier::detectMultiScale(const Mat& image, vector& objects, double scaleFactor=1.1, int minNeighbors=3, int flags=0, Size minSize=Size(), Size maxSize=Size())

来自文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:56:00.417

看来我传递了错误的论点。这有效：

```
body.detectMultiScale(gray,bodies,1.1,3,3,cv::Size(5,13),cv::Size(45,80)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T08:36:30.017

在我的情况下面临同样的问题。以下线路对我有用。如果您考虑，我只提供最小尺寸`cv::Size(45,80)`。我仍在调查其他参数，但这目前正在工作。

```
haar_cascade.detectMultiScale(gray,faces,1.1,3,3,cv::Size(45,80)); 
```

# php - Xpath 并在同一表行中选择不同的信息

> ID：11696398
> 
> 赞同：3
> 
> 时间：2012-07-27T22:20:11.793
> 
> 标签：php, dom, xpath

我有一个 xpath 查询，它从表行返回 td （宽度为 60）的描述。每个查询我拉 0 到 30 行。

```
$textTags = $xpath->query( '//table/tr/td[@width=60]' ); 
```

每个表格行看起来像这样

```
<tr>
<td width=60 bgcolor='#ffffcc'><b>Description</b></td>
<td align=center width=80><img src='http://></td>
<td width=50 bgcolor='#ffffcc' align=center><b>1</b></td>
<td bgcolor='#ffffcc'><b>Toy</b></td>
<input type='hidden'  name='obj_id_3' value='20885'><input type='hidden' name='oldcost_3'  value='0'></td>
<td align=center bgcolor='#ffffcc'><input type='text' name='cost_3' size=6 maxlength=5 value='0'></td>
<td width=180 bgcolor='#ffffcc'><i>more text</i></td>
<td width=40 bgcolor='#ffffcc' align=center><select name=back_to_inv[20885]>
<tr>this continues on a max of 30 times</tr> 
```

我通过一个循环来获取此信息：

```
foreach ( $textTags as $tag ){
$item = $tag->nodeValue;
} 
```

我得到了我需要的描述文本。但是，有一个带有 a`name=obj_id_3`和 a的“隐藏”输入类型`value=20885`，我需要通过每个相应的通道获得。另外，我如何获得那些隐藏的输入值，它们是我正在查看的当前 tr 的一部分？每个 tr 只有 1 条我需要访问的记录，因此我不必担心多条记录，您在上面看到的表格是每个表格的外观，减去唯一的描述和隐藏的名称和值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:08:00.520

您可以只使用 or 来单独查询输入。就像是

```
$xpath->query("//table/tr/td[@width=60]|//table/tr/input[contains(@id, 'obj_id')]"); 
```

# javascript - 在 ajax 分页视图中显示 adsense 的问题 (cakephp)

> ID：11696399
> 
> 赞同：0
> 
> 时间：2012-07-27T22:20:16.647
> 
> 标签：javascript, ajax, cakephp, adsense

到目前为止，每当我将脚本标签设置到视图中时，该标签将显示在其他使用 AJAX 的视图中，该脚本根本不会被执行。有人知道解决方法吗？我是 AJAX 和 CakePHP 的新手。

由于 Stackoverflow 不允许我发布我的问题，我将进一步解释我的脚本问题。

我有我的控制器：`images`，它显示了很多图像，然后我有我的图像类别（控制器：）`categories`，它显示了所有不同图像的类别。

如果您继续并拉动类别的索引视图，您会看到这个人正在加载一个 div，其中显示图像的分页内容（来自图像控制器）以及在每个图像之间（来自每页分页 3 个图像的页面）我有来自 Google 或 smowtion 的脚本标签，未显示或执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:00:40.903

可能是由于页面加载后的内容数量过多或您的广告来源的限制而导致某些 Javascript 未执行。Google 的 adsense 程序需要特定的访问权限才能使用 ajax 加载的内容。

# .net - 安装 .NET 3.5 框架的问题

> ID：11696401
> 
> 赞同：0
> 
> 时间：2012-07-27T22:20:20.937
> 
> 标签：.net, windows-7

我目前在我的工作计算机（运行 Windows 7）上安装 .NET 3.5 框架时遇到问题，想知道是否有人有任何建议。目前，我已经尝试了我们共享驱动器中的 dotnetfx35 文件，并尝试从 Microsoft 网站[http://www.microsoft.com/en-us/download/details.aspx?id=21](http://www.microsoft.com/en-us/download/details.aspx?id=21)下载 dotNetFx35setup 文件。我还在 2010 之上安装了 Visual Studio 2008，因为我知道 3.5 附带。然而，这些都没有奏效。如果我检查 Program Files 和 Program Files(x86) 目录中的 Microsoft.NET 文件夹，我看不到它已安装。我还检查了 regedit 并看到 2.0、3.0 和 4.0，但没有 3.5。任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:24:16.747

Windows 7 内置 3.5。转到添加/删除程序，然后单击“打开或关闭 Windows 功能”，选中“Microsoft .NET Framework 3.5.1”复选框

![在此处输入图像描述](../Images/dc6c3c4395e77ba3f50043c2e5c3628b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T23:14:01.563

打开和关闭功能对某些用户不起作用。它不适合我。我发现工作如下： 1\. 我将 Windows ISO 复制到 USB 驱动器上；2\. 我挂载了映像（右键单击它，选择“挂载”），然后 3\. 在 dos 提示符下运行以下命令：Dism /online /enable-feature /featurename:NetFX3 /All /Source:D: \sources\sxs /LimitAccess 确保我将驱动器号替换为我计算机上 ISO 所在的位置。

每次都有效:)

# php - Mysql 类型隐藏类型转换

> ID：11696402
> 
> 赞同：1
> 
> 时间：2012-07-27T22:20:23.900
> 
> 标签：php, mysql

我正在尝试改进一个旧系统（很久以前写的），其中每个 mysql 查询都是从字符串粘合的。所以那个查询的例子看起来像

```
"SELECT * FROM User WHERE id > '3'" 
```

id 列当然是 bigint 和 PK。

mysql 在 id 应该是 int 值的查询中对 '3' 做了什么？我假设它被视为一个字符串（由于''）所以这个值在mysql的分析/优化过程中被转换为int。我对吗？

//更新我可能问错了方式。有两种处理方法。

1.  （快速）Mysql 自动检测到 id 应该是 int 并将查询重写/转换为

    ```
     SELECT * FROM User WHERE id > 3 
    ```

    在将其发送到数据库引擎之前

2.  （难以置信）Mysql 确实

    ```
    SELECT * FROM 
    ```

    然后在循环中应用条件 WHERE id > '3' 并将其转换为每一行

我只是想确定第二种选择是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:23:32.417

MySQL 会自动将其转换为正确的列类型。如果由于某种原因不能，它将引发错误。

在参数可能来自不安全来源（用户、外部 API）的任何情况下，请确保使用 PDO 或 MySQLi 准备好的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:31:59.067

MySQL 总是将字符串转换为一个数字进行比较，在这种情况下这是正确的做法（它将使用列上的索引来查找值）。
如果您的列是一个字符串，并且您将它与一个整数常量进行比较，MySQL 会将列转换为一个整数并且不使用索引。

# hash - 用于数据完整性和重复数据删除的最佳散列算法有哪些？

> ID：11696403
> 
> 赞同：8
> 
> 时间：2012-07-27T22:20:29.587
> 
> 标签：hash, data-integrity, deduplication

我正在尝试对其中包含二进制数据的大量文件进行哈希处理，以便：（1）将来检查是否损坏，以及（2）消除重复文件（可能具有完全不同的名称和其他元数据）。

我知道 md5 和 sha1 及其亲戚，但我的理解是这些是为安全而设计的，因此故意放慢速度以降低暴力攻击的功效。相反，我希望算法尽可能快地运行，同时尽可能地减少冲突。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T21:22:07.887

你是最正确的。如果您的系统没有任何对手，考虑到它们的安全属性，使用加密散列函数是过度的。

* * *

冲突取决于您的哈希函数的**位数***b和您估计要计算***的哈希值**N 的数量。学术文献认为这种冲突概率必须低于硬件错误概率，因此与逐字节比较数据 [ [ref1](http://www.usenix.org/event/osdi02/tech/full_papers/cox/cox.pdf) , [ref2](http://www.google.com/url?sa=t&rct=j&q=%20/%20o%20deduplication%20:%20utilizing%20content%20similarity%20to%20improve%20i%20/%20o&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http://static.usenix.org/event/fast10/tech/full_papers/koller.pdf&ei=Tl2EUMWoAsexhAfN0ICoDQ&usg=AFQjCNE9df4OTqGfZMpGQswTA_WJe3ajoA) , [ref3](http://www.google.com/url?sa=t&rct=j&q=a%20low-bandwidth%20network%20file%20system&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://pdos.csail.mit.edu/papers/lbfs:sosp01/lbfs.pdf&ei=c12EUJuAE8KwhAfx5oDYCg&usg=AFQjCNGruQudFexU2uWuroWiUonL9OPOXg) , ref4 , [ref5](http://www.google.com/url?sa=t&rct=j&q=venti%20:%20a%20new%20approach%20to%20archival%20storage&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http://www.stanford.edu/class/cs240/readings/venti-fast.pdf&ei=p12EUO7qGMiXhQf48oDAAQ&usg=AFQjCNFbmbNw5wSJ7NTB7Ga8rq8rzcIrag) ]相比，与散列函数发生冲突的可能性更[小。](http://dl.acm.org/citation.cfm?id=1970348.197035)硬件错误概率在*2^-12*和*2^-15* [ [ref6](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=703881&contentType=Journals%20&%20Magazines&queryText=Design%20Of%20Error%20Correction%20Systems%20For%20Disk%20Drives) ] 的范围内。如果您希望生成*N=2^q*哈希值，那么您的碰撞概率可以由这个方程给出，它已经考虑了[生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)：
![方程](../Images/32af517d5d7a5917f1c93331228c4345.png)

**哈希函数的位数与其计算复杂度成正比。** 因此，您有兴趣找到一个尽可能少的哈希函数，同时能够将冲突概率保持在可接受的值。

* * *

以下是有关如何进行该分析的示例：

*   假设您有***f*** *=2^15 个文件；*
*   每个文件**lf**的平均大小为*2^20 字节*；
*   您假装将每个文件分成平均大小**lc**等于*2^10 字节*的块；
*   每个文件将被分成***c*** *=lf/lc=2^10 个块*；

*   然后您将散列**q** = f*c =2^25 个对象。

*根据该等式，几种散列大小的冲突概率如下：*

*   P(hash=64 bits) = 2^(2*25-64+1) = 2^-13 (小于2^-12)
*   P(hash=128 bits) = 2^(2*25-128+1) 2^-77 (远小于 2^-12)

现在你只需要决定你将使用哪个 64 位或 128 位的非加密哈希函数，知道 64 位它非常接近硬件错误概率（但会更快），而 128 位是一个更安全的选择（虽然更慢）。

* * *

您可以在下面找到一个从非加密哈希函数的维基百科中删除的小列表。我知道 Murmurhash3，它比任何加密哈希函数都快得多：

1.  [Fowler–Noll–Vo](http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function)：32、64、128、256、512 和 1024 位
2.  [詹金斯](http://en.wikipedia.org/wiki/Jenkins_hash_function)：64 位和 128 位
3.  [MurmurHash](http://en.wikipedia.org/wiki/MurmurHash)：32、64、128 和 160 位
4.  [CityHash](http://en.wikipedia.org/wiki/CityHash)：64、128 和 256 位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:43:05.007

MD5 和 SHA1 不是为安全而设计的，不，所以它们不是特别安全，因此也不是很慢。我自己（使用 Python）使用 MD5 进行重复数据删除，性能还不错。

[这篇文章](http://codahale.com/how-to-safely-store-a-password/)声称今天的机器可以计算每秒 330 MB 数据的 MD5 哈希。

SHA-1 被开发为 MD5 的更安全替代方案，当时发现您可以制作与 MD5 哈希值相同的输入，但我认为出于您的目的，MD5 可以正常工作。它确实对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T21:25:25.880

如果安全性不是您关心的问题，您可以采用安全散列函数之一并减少轮数。这使得密码学上不健全但仍然非常适合平等测试。

绞肉非常强大。它有80轮。尝试减少到​​10个左右。

或者使用 AES 和 XOR 一起加密输出块。AES 在现代 CPU 上进行了硬件加速，速度非常快。

# java - Java中的正则表达式：查找给定子字符串集后面的数字

> ID：11696410
> 
> 赞同：1
> 
> 时间：2012-07-27T22:21:10.547
> 
> 标签：java, regex, substring

我有许多格式松散的字符串，如下所示：

```
String blah =  "Blah bleh bluh Id. 24 bleh" ;

String bleh = "Foo Bar Foo Id 24" ;

String foo =  "Blah Foo Bleh Bar Tag.93 foo" ;

String bar ="Junk Jibberish Id.93" ; 
```

在我有一些文本的地方，最后是一组可能的标识符（ID、Id、标识符、标签等）中的一些字符串，然后是没有空格、句点和空格，只是一个句点，或者只是一个空格，然后是一些数字（1-4 位），之后可能还有更多文本

我想以“id93”或“tag93”或“id24”等格式捕获子字符串。

我知道这是一个特定的问题，但我没有一致的单个字符来分隔我试图捕获的数据。

我应该遵循什么正则表达式模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:27:41.907

`\b(id|tag)\.?\s*(\d{1,4})\b`使用带有不区分大小写修饰符的正则表达式模式并加入组 1 和 2。

* * *

***编辑：*** Java 正则表达式格式：`\\b(id|tag)\\.?\\s*(\\d{1,4})\\b`

# android - 从 Android 库项目中引用宿主项目字符串

> ID：11696411
> 
> 赞同：0
> 
> 时间：2012-07-27T22:21:16.407
> 
> 标签：android

我正在将开发人员工具 SDK 构建为 Android 库项目。我想让主机应用程序开发人员不是在代码中而是在 XML 文件中配置我的 SDK。我考虑在清单中放置一些配置字符串，但这并不安全。所以我想让主机开发人员在主机应用程序中定义一些字符串。问题是，我的库项目似乎看不到主机应用程序中定义的字符串。我无法在编译期间从我的库项目中引用宿主项目中定义的资源 ID，即使它们合并在一起并停留在同一个 DEX 中。

有没有办法从库项目中读取宿主项目中定义的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:25:13.873

好的，看起来您可以在库项目和宿主应用程序项目中定义具有相同名称的资源。这将允许编译继续进行，并且宿主应用程序资源将覆盖库项目资源。

# android - 谷歌文档 PDF 查看器

> ID：11696415
> 
> 赞同：2
> 
> 时间：2012-07-27T22:21:32.400
> 
> 标签：android, pdf

根据许多人的建议，我正在尝试使用 goolge docs 在 WebView 中显示 pdf。

这是我的代码：

```
@SuppressLint("SetJavaScriptEnabled")
public void setDocumentPath(final String path) {
    WebView webView = (WebView) findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginsEnabled(true);
    webView.loadUrl("https://docs.google.com/viewer?url=http://www.selab.isti.cnr.it/ws-mate/example.pdf");
} 
```

PDF 只是我在网上找到的一些示例。它在我的浏览器中运行，但在我的 android 模拟器和设备上显示“网页不可用”。

两者都运行 android 4.0。

有什么明显的我失踪了吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:51:19.443

如果有人在类似的情况下撞墙，那就是忘记权限的情况。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# ios - 如何在使用 inputView 后显示键盘

> ID：11696419
> 
> 赞同：7
> 
> 时间：2012-07-27T22:21:53.423
> 
> 标签：ios, xcode, uitextfield, uipickerview, inputview

我曾经为我`inputView`的 显示，但我对其他功能使用相同的。使用后如何显示标准键盘？`uipickerview``textfield``textfield``inputView``textfield`

```
textfield.inputView = pickrView; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T22:36:54.040

只是

`textfield.inputView = nil;`

为我工作

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-15T00:06:37.207

正如Pavel Kaljunen所说，你只需要将inputView设置为nil，但是当键盘已经可见时，你必须先resignFirstResponder，将inputView设置为nil，然后再次成为FirstResponder。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.35];

[yourTextField resignFirstResponder];
yourTextField.inputView = nil;
[yourTextField becomeFirstResponder];

[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:11:39.407

我认为这段代码也许可以工作

```
 [textField.inputView addTarget:self action:@selector(doTest) forControlEvents:UIControlEventTouchUpInside];

- (void)doTest
{
  if([textFiled isFirstResponder])
  {
    [textFiled resignFirstResponder];
  }
  else
  {
    [textFiled becomeFirstResponder];
  }
} 
```

# algorithm - Nutch 2 内部发生了什么？

> ID：11696422
> 
> 赞同：5
> 
> 时间：2012-07-27T22:22:19.653
> 
> 标签：algorithm, analysis, nutch, infrastructure

我渴望知道（并且必须知道）nutch 及其用于获取、分类、...（通常是爬行）的算法（因为它与我的项目有关）。
我读[了这个](http://wiki.apache.org/nutch/Nutch2Crawling)材料，但有点难以理解。
有没有人可以以完整且易于理解的方式向我解释这一点？
提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-28T06:24:55.057

# 简答

简而言之，他们开发了一种网络爬虫，旨在非常有效地从多台计算机环境中爬取网络（但也可以在单台计算机上运行）。

您可以开始爬网，而无需知道他们是如何实现的。

您引用的页面描述了它是如何实现的。

# 背后的技术

他们使用 Hadoop，这是一个开源 Java 项目，其设计与 MapReduce 相同。MapReduce 是 Google 用来抓取和组织网络的技术。

我参加了一些关于 MapReduce/Hadoop 的讲座，不幸的是，我不知道此时是否有人可以用完整且易于理解的方式来解释它（它们有点相反）。

查看[MapReduce](http://en.wikipedia.org/wiki/MapReduce)的维基百科页面。

基本思想是将作业发送到主节点，主节点将工作分解并发送（映射）到执行其分配的子任务的各个工作节点（其他计算机或线程），然后发送将子结果返回给法师。

一旦主节点获得所有子结果（或一些子结果），它就会开始将它们组合（减少它们）到最终答案中。

所有这些任务都是同时完成的，并且每台计算机都被分配了适当的工作量以使其始终处于占用状态。

# 如何爬行

由4个工作组成：

1.  产生
2.  拿来
3.  解析
4.  更新数据库

## *产生

从包含您要开始抓取的页面的网页列表开始：“Webtable”。

主节点将该列表中的所有页面发送到其从属节点（但如果两个页面具有相同的域，则它们将被发送到同一个从属节点）。

从站获取其分配的网页并且：

1.  这已经生成了吗？如果是这样，请跳过它。
2.  规范化 URL，因为“http://www.google.com/”和“http://www.google.com/../”实际上是同一个网页。
3.  将初始分数与网页一起返回给 Master。

（Master在将网页发送给它的从属时对网页进行分区，以便它们同时完成）

Master 现在选择 topN（也许用户只想从 10 个初始页面开始），并将它们标记为在 webtable 中选择。

## *拿来

Master 查看 webtable 中的每个 URL，将标记的 URL 映射到 slave 以处理它们。

从站从 Internet 获取每个 URL 的速度与 Internet 连接允许的速度一样快，它们为每个域都有一个队列。

他们将 URL 与网页的 HTML 文本一起返回给 Master。

## *解析

Master 查看 webtable 中的每个网页，如果它被标记为 fetched，则将其发送给它的 slave 进行解析。

从站首先检查它是否已经被不同的从站解析，如果是则跳过它。

否则，它会解析网页并将结果保存到 webtable。

## *更新数据库

Master 查看 webtable 中的每个网页，将解析后的行发送给它的 slave。

从站接收这些解析后的 URL，根据远离这些页面的链接数（以及这些链接附近的文本）为它们计算分数，并将 URL 和分数发送回主站（当它得到时按分数排序由于分区而回到主控器）。

主人根据从其他页面到这些页面的链接数计算和更新网页分数。

主人将这一切存储到数据库中。

# 重复

当页面被解析时，这些网页的链接被添加到 webtable 中。您现在可以仅在尚未查看的页面上重复此过程，以继续扩展您访问过的页面。经过以上四个步骤的足够迭代，最终您将到达大部分 Internet。

# 结论

MapReduce 是一个很酷的系统。

为了使其尽可能高效，我们付出了很多努力。

他们可以处理在工作过程中出现故障的计算机并将工作重新分配给其他从站。他们可以处理一些比其他奴隶更快的奴隶。

Master 可以决定在自己的机器上执行 slave 的任务，而不是将其发送给 slave，如果这样会更有效率的话。通讯网络非常先进。

MapReduce 允许您编写简单的代码：

定义一个 Mapper、一个可选的 Partitioner 和一个 Reducer。

然后让 MapReduce 弄清楚如何最好地利用它可以访问的所有计算机资源来做到这一点，即使它是一台互联网连接速度较慢的计算机或 kila 集群。（甚至可能是巨型集群）。

# xml - 使用 xmlstarlet 将 XML 从一个文件插入另一个文件？

> ID：11696424
> 
> 赞同：1
> 
> 时间：2012-07-27T22:22:38.970
> 
> 标签：xml, insert, xmlstarlet

有没有办法使用 xmlstarlet 将 XML 从一个文件插入另一个文件，或者我是否将一堆 -s 命令串在一起？我有一个相当大的块要插入。我会更好地写一些带有那个块的xsl吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:35:00.430

> 我会更好地写一些带有那个块的xsl吗？

我认为您最好使用 XSL；[document()](http://www.w3.org/TR/xslt#function-document)函数允许您从另一个文件中获取 XML。xmlstarlet 的 ed 子命令无法访问[document()](http://www.w3.org/TR/xslt#function-document)并且它缺少访问其他文件的方法。

# ant - Jenkins/Hudson 的工作推动了 Mercurial 的变化

> ID：11696425
> 
> 赞同：1
> 
> 时间：2012-07-27T22:22:47.237
> 
> 标签：ant, mercurial, jenkins, automation, push

我有一个 Jenkins/Hudson，它增加了一些模块的一些版本号，以准备将 NetBeans 更新中心发布到 Sourceforge。[我正在尝试使用ant4hg](http://ant4hg.free.fr) ant 任务将这些更改推送到存储库中，但遇到了一些问题。这是与此相关的任务的一部分：

```
 <change files here>
    <hg cmd="commit" dir="." message="${message}" user="${hg.user}">
        <dirset dir="./">
            <include name="**/*.mf"/>
        </dirset>
    </hg>
    <hg cmd="push" dir=".">
        <auth user="${hg.user}" password="${hg.password}" />
    </hg> 
```

[您可以在此处](https://sourceforge.net/apps/mantisbt/ant4hg/view.php?id=13)查看相关的错误。无论如何，詹金斯/哈德森有没有更好的方法来做到这一点？提前致谢！

**编辑**

我试图推动改变，但它不起作用。我尝试使用文档中指定的命令：

```
 <hg cmd="push" dir=".">
        <auth user="${hg.user}" password="${hg.password}" />
    </hg> 
```

但我得到：

```
$ hg push
pushing to javydreamercsw@bitbucket.org/javydreamercsw/simple-marauroa-rcp">https://javydreamercsw@bitbucket.org/javydreamercsw/simple-marauroa-rcp [javydreamercsw@bitbucket.org/javydreamercsw/simple-marauroa-rcp" target="_blank">^]
pushing subrepo Card Game Interface to javydreamercsw@bitbucket.org/javydreamercsw/card-game-interface">https://javydreamercsw@bitbucket.org/javydreamercsw/card-game-interface [javydreamercsw@bitbucket.org/javydreamercsw/card-game-interface" target="_blank">^]
searching for changes
no changes found
pushing subrepo Simple Marauroa Java to https://bitbucket.org/javydreamercsw/simple-marauroa-java [^]
searching for changes
no changes found
pushing subrepo jWrestling to https://bitbucket.org/javydreamercsw/jwrestling [^]
searching for changes
no changes found
searching for changes
[ERROR] hg > abort: http authorization required
Result: 255
[ERROR] FAIL TO EXECUTE : hg push (255)
Z:\NetBeans\Simple Marauroa\Marauroa Application Manager\build.xml:680: FAIL TO EXECUTE : hg push (255) 
```

如果我从 NetBeans 和/或 TortoisHg 执行此操作，它可以工作。我以为我提供了错误的凭据，但我知道它们是正确的。

在该命令之前，我做了一个提交，我得到了这个输出：

$ hg commit --include * */* .mf --user xxxxx --message "Update versions for dailybuilds" Z:\NetBeans\Simple Marauroa\Marauroa Application Manager

我也将相同的用户传递给 push 命令，并添加正确的密码。

# javascript - 嵌入在 Iframe 中的文本区域在 designMode = On 时变得不可编辑

> ID：11696426
> 
> 赞同：1
> 
> 时间：2012-07-27T22:22:51.513
> 
> 标签：javascript, iframe, textarea, text-editor

如您所见，下面我有两个旨在使文本变为粗体的函数：**doRichEditCommand()**和**SetToBold()**。

我的目标是，首先，让**doRichEditCommand()**在嵌入的*textarea*`iframe`中工作，因为它可以在所有主要浏览器上完美运行，然后让像**SetToBold()这样的****execCommand**函数工作，因为我不确定它们是否交叉- 在*iframe*中时的浏览器。

 ***为了使第一个功能起作用，我启用**了 designMode**。但是，启用它后，*textarea*变得不可编辑。

如何修改下面的代码，以便我的函数可以在`textarea`嵌入的`iframe`?

在此先感谢您的帮助。

```
<html>
<head>
<script type="text/javascript">

function getIFrameDocument(aID){
// if contentDocument exists, W3C compliant (Mozilla)
if (document.getElementById(aID).contentDocument){
return document.getElementById(aID).contentDocument;
} else {
// IE
return document.frames[aID].document;
 }
}

function load(){
getIFrameDocument("editorWindow").designMode = "On";
}

function doRichEditCommand(aName, aArg){
getIFrameDocument('editorWindow').execCommand(aName,false, aArg);
document.getElementById('editorWindow').contentWindow.focus()
} 

function SetToBold () {
        document.execCommand ('bold', false, null);
    }
</script>
</head>
<body onload="load()">
  <iframe id="editorWindow" src="you.php"></iframe>
  <button onclick="doRichEditCommand('bold')" style="font-weight:bold;">B</button>
  <button onclick="SetToBold();">Bold</button>
</body>
</html> 
```

PS 我没有包含“you.php”，因为它只是必要的标签和文本区域。***

# mongodb - Mongo：找到最后n个插入集合的快速方法

> ID：11696429
> 
> 赞同：1
> 
> 时间：2012-07-27T22:23:08.587
> 
> 标签：mongodb

我正在运行如下查询：

```
db.sales.find({location: "LLLA", 
               created_at: {$gt: ISODate('2012-07-27T00:00:00Z')}}).
         sort({created_at: -1}).limit(3) 
```

此查询按预期工作，但执行速度不够快。我在 location 字段上有一个索引，在 created_at 字段上有一个单独的索引。如果您发现我在这里遗漏了一些明显的东西以使其更快，请告诉我。

感谢您在这方面的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:49:44.947

Mongo 不会为给定的查询使用两个索引，如果你想过滤`location`和排序，`created_at`你可以添加一个复合索引：

```
db.sales.ensureIndex({location: 1, created_at: -1}) 
```

当您遇到此类问题时，您应该运行`explain`您的查询。排序尤其会导致索引的非直观复杂性，并且该`explain`命令有时可以清楚地说明原因。

还值得注意的是，您通常可以按`_id`近似插入时间进行排序（假设自动生成的`ObjectId`值），但这不会像复合索引那样帮助您，因为您正在过滤附加字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:35:39.410

只需使用 ID：

```
db.sales.find({location: "LLLA"}).sort({_id: -1}).limit(3) 
```

# eclipse - 在 Eclipse 中调试挂毯应用程序

> ID：11696430
> 
> 赞同：3
> 
> 时间：2012-07-27T22:23:22.383
> 
> 标签：eclipse, debugging, tapestry

我正在本地 Eclipse 沙箱中使用 Tapestry 5.3 框架。当我跳入断点时，有些事情让我很烦。由于缺少行号属性，我总是收到 Eclipse 无法安装断点的消息：

![Eclipse断点警告截图](../Images/f21794fbccb83c72ccc1fa686ae9ecc7.png)

我知道 Tapestry 正在用我的 java 类做一些神奇的事情，根据我看到 Tapestry 正在处理代理对象的消息（见类名）。其实我对挂毯生成的代理类不感兴趣。我只想跳入我班级的断点。我的问题是如何解决断点问题并隐藏挂毯的魔力？

我正在使用带有 Maven 集成的 Eclipse Juno，应用程序由 Tomcat 7、Tapestry 5.3.4 和 jdk6 运行。

# c++ - 在不安装的情况下使用 libcurl

> ID：11696435
> 
> 赞同：0
> 
> 时间：2012-07-27T22:24:13.627
> 
> 标签：c++, c, curl, libcurl

如何在我的项目中使用 libcurl 而无需在系统上实际安装或 curl？

我想让我的源代码可移植，这样任何开发人员都可以复制包含所有源代码和其他文件的文件夹，运行`make`和编译程序，而无需系统级安装。

我正在寻找适用于 Linux 和 Windows（dll？）的（可能是单独的）解决方案。如果可能，请提供一些标准/官方解决方案而不是破解（我想接受有关链接第三方库的教育）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:33:49.847

您可能想从 libcurl 构建一个静态库并重新链接它。应该非常简单，并且每个操作系统上的过程几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:35:02.580

我已经使用 Visual Studio 在 Windows 上使用它，在 Windows 下你需要做的就是：

*   下载源
*   使用 CMake 生成项目文件（使用 Visual Studio 时）。
*   构建库，将构建 3 个文件：libcurl.lib、libcurl_imp.lib 和 libcurl.dll
*   在您的项目中包含 curl.h 并将路径添加到您的 .lib 文件
*   构建您的程序，将 libcurl.dll 放在可执行文件夹中，它就可以工作了。

在 Linux 上，它应该是一个类似的过程，构建库并将它们包含在您的源代码中。

# node.js - node.js MongoDB查询不返回结果

> ID：11696444
> 
> 赞同：13
> 
> 时间：2012-07-27T22:24:47.983
> 
> 标签：node.js, mongodb

我在玩 mongodb 并将一些测试数据 {name:"david"} 输入到“用户”集合中。我通过键入使用 mongo shell 验证了数据在 MongoDB 中

```
db.users.find() 
```

结果：

```
{ "name":"david" } 
```

在 node.js 脚本中，以下代码：

```
db.open(function(err, db) {
    if (!err) {
        console.log("db opened!");
    }
    else {
        console.log(err);
    }
    db.collection('users', function(err, collection) {
        collection.find({}, function(err, cursor) {
            cursor.each(function(err, item) {
                console.log(item);
            });
        });
    });
    db.close();
}); 
```

不返回任何结果

我没有看到任何错误，也没有错误返回。请指教

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T00:24:40.873

您实际上是在集合中的数据返回之前关闭数据库连接。

```
db.collection('users', function(err, collection) {
  collection.find({}, function(err, cursor) {
    cursor.each(function(err, item) {
      console.log(item);
    });

    // our collection has returned, now we can close the database
    db.close();
  });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T06:36:04.670

正如 CJohn 正确指出的那样，您在检索数据之前关闭了数据库连接。我知道它看起来不像，但 Node 结构和回调就是这种情况。正确处理此问题的代码是：

```
db.open(function(err, db) {
    if (err) return console.log('error opening db, err = ', err);

    console.log("db opened!");

    db.collection('users', function(err, collection) {
        if (err) return console.log('error opening users collection, err = ', err);

        collection.find({}, function(err, cursor) {
            if (err) return console.log('error initiating find on users, err = ', err);

            cursor.each(function(err, item) {
                // watch for both errors and the end of the data
                if (err || ! item) {
                    // display (or do something more interesting) with the error
                    if (err) console.log('error walking data, err = ', err);

                    // close the connection when done OR on error
                    db.close();

                    return;
                }
                console.log(item);
            });
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T22:34:20.673

这种模式在我的 node/mongo 示例中运行良好。该函数被传递一个回调，该回调接受错误，集合。它获取“用户”集合，如果成功，则针对集合调用 find 并将其转换为数组，但您也可以在游标上进行迭代。

**在 db.collection 和 connection.find 调用中，您没有检查错误和处理。你只是在公开电话中这样做。**

此外，您不应该调用 db.close() 特别是如果您使用[连接池选项](http://technosophos.com/node/255)打开（您不想在每次调用时打开和关闭连接）。如果您确实想关闭，请在回调内关闭。

就像是：

```
var server = new Server(host, port, {auto_reconnect: true, poolSize: 5}, {});

MyStore.prototype.getUsers = function(callback) {
server.open(function(err, db) {
    if (err) {
        callback(err);
    }
    else {
        db.collection('users', function(err, collection) {
            if( err )
                callback(err);
            else {
                collection.find().toArray(function(err, users) {
                    if (err) {
                        callback(err)
                    } else {
                        callback(null, users);
                    }
                });
            }
        }
    }}); 
```

这是关于 node + mongo 的另一个教程，可能会有所帮助： [http ://howtonode.org/express-mongodb](http://howtonode.org/express-mongodb)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-07T06:55:21.600

尝试将您的节点升级到最新版本。

```
sudo npm cache clean -f
sudo npm install -g n
sudo n stable 
```

0.4 版可能无法正常工作。

# url - 将csv文件制作成url

> ID：11696446
> 
> 赞同：0
> 
> 时间：2012-07-27T22:24:55.243
> 
> 标签：url, csv

我有一个服务器和一个域名。我想向他们上传一个 csv 文件，以便能够将其视为 url。例如，如果我的域是 www.example.com，如果我输入地址 www.example .com/file.csv 向我显示文件的内容

有什么想法可以将我的 csv 文件作为我的域的 url 吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:54:06.267

将 CSV 文件上传到[Solr](http://lucene.apache.org/solr/)索引怎么样？这种替代解决方案的优点是它可以使您的数据可搜索。

可以使用简单的 HTTP POST 操作上传数据。Linux [curl](http://linux.about.com/od/commands/l/blcmdl1_curl.htm)命令可以按如下方式使用：

```
curl 'http://localhost:8983/solr/update/csv?separator=;&commit=true' -H 'Content-type:text/plain; charset=utf-8' --data-binary @data.csv 
```

这是示例实现的相关答案：

*   [创建报告并上传到服务器以供下载](https://stackoverflow.com/questions/8459619/create-report-and-upload-to-server-for-download/8462145#8462145)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:37:53.483

我不完全确定这是您要问的，但是如果您希望用户能够单击[http://www.example.com/file.csv](http://www.example.com/file.csv)的链接并将文件的内容显示在浏览器而不是提示下载，请尝试将 MIME 类型添加到您的服务器以用于 CSV 作为`text/plain`.

这适用，但我正在运行 IIS 7。我不知道它在其他 Web 服务器上的效果如何。

# objective-c - objective-c 移动触摸太快

> ID：11696447
> 
> 赞同：0
> 
> 时间：2012-07-27T22:24:59.617
> 
> 标签：objective-c, multi-touch

我正在做绘图应用程序，我有以下问题。我有一组应该在屏幕上绘制的点。在 `(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;`我在数组中添加触摸点并重绘视图。但问题是当我移动手指太快时，没有连续添加点：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:52:54.687

I would make a CGPoint for last touch and one for current touch, then calculate the distance. If the distance is to far (meaning that the user moved to fast), draw dots in between them.

# android - Android 应用的防干扰

> ID：11696454
> 
> 赞同：2
> 
> 时间：2012-07-27T22:25:41.907
> 
> 标签：android, airplane

我们收到了为我们的一款应用程序提供防分心功能的请求。这个想法是，在应用程序的某些部分，用户不希望被来电、警报或其他任何事情打断。我不知道这可以完成多少，或者关闭所有此类行为是否甚至是一个“好公民”。

我们知道，在应用程序的“无干扰”部分（离开这些部分时撤消）我们可以做两件事：

1.  将振铃器置于振动或静音模式。据我们所知，这不会关闭来电和短信通知的屏幕弹出窗口。因此，此选项并不是特别有效。（它可以帮助用户不分散附近的任何人的注意力，但不会分散注意力。）
2.  进入飞行模式（如此[处](https://stackoverflow.com/questions/9666253/implement-airplane-mode-in-android)所述）。这是相当激烈的，因为它切断了互联网连接。当这生效时，我们的应用程序目前不需要连接，但将来可能会改变。我们还没有尝试实现这一点，但对于[它是否在应用程序级别是可控的，显然存在疑问](https://stackoverflow.com/a/8939128/535871)。

这些都不是 100% 令人满意的，也没有解决警报之类的问题。我们可以在我们的应用程序中实施其他反干扰技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:22:04.387

我发现了一些可以处理电话（拒绝来电）的开源项目。但是对于警报，我认为这是不可能的。因为系统管理警报，我猜你不能与这样的管理者互动。

# javascript - 无法识别 JQuery 点击事件

> ID：11696455
> 
> 赞同：0
> 
> 时间：2012-07-27T22:25:59.210
> 
> 标签：javascript, jquery, ajax, events

我正在开发一个包含一个 HTML 页面的网站。HTML 页面将充当所有 XMLHttpRequests 的外壳。我有两个下拉菜单，第一个选择填充第二部分，第二个选择填充`<ol>`列表元素。这是**HTML**（*格式化以适应分配的时间*）：

```
<!DOCTYPE html>
<?php
//Get user Device
require_once 'Mobile_Detect.php';
$detect = new Mobile_Detect();
$layout = ($detect->isMobile() ? ($detect->isTablet() ? 'tablet' : 'mobile') : 'desktop');
$thisPage = $_GET['mod'];
?>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/plantSeed.js"></script>
<script type="text/javascript">pageExecute.init("<? echo $thisPage; ?>");</script>

<link rel="stylesheet" href="css/modstyles.css" type="text/css" media="screen">

<meta charset="utf-8">

<title id="browserTitle"></title>

<script src="js/jquery-ui-1.8.21.custom.min.js"></script>
<script src="js/modernizr.js"></script>

</head>
<body>
<header id="mainHeader">
<div id="pageTitle">

    <!--   -->
</div>
<script type="text/javascript"> pageExecute.populatePageTitle(); </script>
<div id="imgInfoTxtHead">
    <h3 class="imgInfoTxt">Ag-01a</h3>

    <p><i>Catheter Angiography</i></p>
</div>
</header>
<section id="mainSection">
<div id="largeImages">
     <!-- Image Holder ...
</div>
<!-- End largeImages -->
<div id="leftMenu" class="ui-resizable">
    <div id="menuHideBar"></div>
    <div id="addHolder">

        <!-- Quick Pick By Name Section -->
        <h3><a href="#">Quick Pick By Name</a></h3>

        <div id="quickPickName">
            <form action="#">
                <div>
                    <!-- TODO: Change to JQuery dropdown -->
                    <label for="areaSelect">Area Selection</label><br/>
                    <select id="areaSelect"></select><br/>
                    <label for="slideSelect">Slide Selection</label><br/>
                    <select id="slideSelect"></select>

                </div>
            </form>
            <script type="text/javascript">
                pageExecute.populateAreasDropDown();
            </script>

        </div>

        <!-- Quick Pick By Image Section --> ...

        <!-- Notes Section --> ...

        <!-- Quiz Section --> ...

<!-- END leftMenu -->
</section>
<!-- END mainSection -->

<footer id="mainFooter">

  ....

</footer>
<!-- Scripts -->

<script>

$(".ddByArea").click(function () {
    pageExecute.rebuild($(this).attr("value"));
});

$(".ddByName").click(function () {
    alert(pageExecute.identifiers);
   // pageExecute.populateIdentifiers($(this).attr("value"));
});

 </script>

 <script type="text/javascript">
 $(document).ready(function () {
    $("*").addClass("<? echo $layout ?>");
});
</script>
</body>
</html> 
```

无论出于何种原因，最后一个 $.click() 都不起作用。没有弹出警报。上面的点击事件确实有效，没有问题。所以这让我相信它与秩序无关。这是贯穿脚本的 pageExecute 对象：

**JS**

```
var pageExecute = {

identifiers:new Array(),
set:new Array(),
slide:"",
slideTitle:"",
slideType:"",
area:new Array(),
page:"",
selectedArea:"",
selectedIdent:"",
selectedSlide:"",

init:function (thisPage) {

  //Populate Area Data from XML
    var areaData = "./XML/Areas.xml";
    var areaRequest = pageExecute.createXMLHttpRequest();
    pageExecute.requestData(areaRequest, areaData, null, "area");

   //Populate General Page Info from XML
    var generalPageData = "";
    if (thisPage != ""){
        generalPageData = "./XML/" + thisPage + ".xml";
    } else {
        generalPageData = "./XML/" + pageExecute.area[0] + ".xml";
    }
    var generalRequest = pageExecute.createXMLHttpRequest();
    pageExecute.requestData(generalRequest, generalPageData, null, "general");

},

requestData:function (request, URL, data, orders) {
    if (request) {
        request.open('GET', URL, false);
        request.onreadystatechange = function () {

            if (request.readyState == 4) {
                if (request.status == 200) {

                    var response = request.responseXML;

                    if (orders == "area") {

                        var rawAreas = response.getElementsByTagName("Areas")[0].childNodes[0].nodeValue;
                        var splitAreas = rawAreas.split(',');
                        var sortedAreas = splitAreas.sort();

                        for (var i = 0; i < splitAreas.length; i++) {
                            pageExecute.area[i] = sortedAreas[i];
                        }

                    }
                    else if (orders == "general") {

                        //Pull page title from XML
                        pageExecute.page = response.getElementsByTagName("Area")[0].childNodes[0].nodeValue;
                        //Pull all slides from XML
                        var rawSet = response.getElementsByTagName("Slide");
                        for(var j = 0; j < rawSet.length; j++){
                        pageExecute.set[j] = rawSet[j].childNodes[0].nodeValue;
                        }
                        pageExecute.slideType = response.getElementsByTagName("Type")[0].childNodes[0].nodeValue;

                    } else if (orders == "slides"){

                    }else if (orders == "identifiers"){

                       var rawIdent = response.getElementsByTagName("Slide").nodeValue(pageExecute.selectedSlide.substring(0,pageExecute.selectedSlide.indexOf(" "))).getElementsByTagName("Identifier");

                        for (var k = 0; k < rawIdent.length; k++){
                            pageExecute.identifiers[k]=rawIdent[k].childNodes[0].nodeValue;
                        }
                    }

                    }

                } else {
                    alert('There was a problem retrieving the data: \n' + request.statusText);
                    request = null;
                }
        };
        request.send(data);
        request.abort();
    } else {
        alert("Sorry, there was an error loading this information!");
    }
},

createXMLHttpRequest:function () {
    var request = false;
    if (window.XMLHttpRequest) {
        if (typeof XMLHttpRequest == "undefined") {
            var xhrNames = ["MSXML2.XMLHTTP.6.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"];
            for (var i = 0; i < xhrNames.length; i++) {
                try {
                    request = new ActiveXObject(xhrNames[i]);
                    break;
                } catch (e) {
                    request = false;
                }
            }
        } else {
            request = new XMLHttpRequest();
        }
    }
    return request;
},

populateAreasDropDown:function () {

    for (var i = 0; i < pageExecute.area.length; i++) {
        $("<option class='ddByArea' value='" + pageExecute.area[i] + "'>" + pageExecute.area[i] + "</option>").appendTo("#areaSelect");
    }

},

populateSlidesDropDown:function (thisArea) {

    var slideRequest = pageExecute.createXMLHttpRequest();
    pageExecute.requestData(slideRequest, "./XML/" + thisArea + ".xml", null, "slides");

    for (var i = 0; i < pageExecute.set.length; i++) {
        $("<option class='ddByName' value='" + pageExecute.set[i] + "'>" + pageExecute.set[i] + " - " + pageExecute.slideTitle + "</option>").appendTo("#slideSelect");
    }

},

populateIdentifiers:function(thisSlide){

    pageExecute.selectedSlide = thisSlide;

    var identData = "./XML/" + pageExecute.selectedArea.substring(0, pageExecute.selectedArea.indexOf(" ")) + ".xml";
    var identRequest = pageExecute.createXMLHttpRequest();
    pageExecute.requestData(identRequest, identData, null, "identifiers");

    for(var l = 0; l < pageExecute.identifiers; l++){
    $("#identList").append("<li>" + pageExecute.identifiers[l] + "</li>")
    }

},

populatePageTitle: function(){

    $("#browserTitle").append(pageExecute.slideType + ": " + pageExecute.page);
    $("#pageTitle").append("<h3>" + pageExecute.slideType + ": " + pageExecute.page + "</h3>");

    var firstSlide = pageExecute.set[0];
    var lastSlide = pageExecute.set[pageExecute.set.length - 1];

    $("#pageTitle").append("<p><i>" + firstSlide + " through " + lastSlide + "</i></p>")
},

rebuild: function(thisArea){

   pageExecute.selectedArea = thisArea;
   var trimArea = thisArea.substring(0, thisArea.indexOf(" "));

    pageExecute.init(trimArea);

    //Rebuild Page information

   $("#browserTitle").html(pageExecute.slideType + ": " + pageExecute.page);
   $("#pageTitle h3").html(pageExecute.slideType + ": " + pageExecute.page);

    var firstSlide = pageExecute.set[0];
    var lastSlide = pageExecute.set[pageExecute.set.length - 1];
    $("#pageTitle p").html("<i>" + firstSlide + " through " + lastSlide + "</i>");

    //Remove existing options from the slides dropdown and add new.
    $(".ddByName").remove();

    pageExecute.populateIdentifiers(pageExecute.slide[0])

}

}; 
```

我为长度道歉，我试图减少尽可能多的脂肪。任何想法为什么最后一次点击上方的点击事件甚至可以工作（ddByAreaclass），但最后一个没有（ddbyName 类）？这两个项目都是使用 pageExecute 脚本创建的。感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:15:17.680

*我有两个下拉菜单的第一个选择填充第二部分.....*

我想这将填充第一个下拉列表：

```
<script type="text/javascript">
   pageExecute.populateAreasDropDown();
</script> 
```

...当页面加载时。

当用户选择一个选项时，第二个下拉列表将被填充，因此当您调用时，第二个下拉列表的选项不可用`$(".ddByName").click()`

解决方案：在末尾绑定第二个点击功能`pageExecute.populateSlidesDropDown()`

# sas - 调查数据stata代码对应sas代码？

> ID：11696459
> 
> 赞同：0
> 
> 时间：2012-07-27T22:26:09.910
> 
> 标签：sas, stata

我对调查数据有 2 个问题：

1、**svy:tab**和 **svy,subpop(XX): tab**有什么区别？如果先使用子组，则使用**svy:tab**。

2，我们是否有对应的**SAS代码**为**svy，subpop（XX）：tab**？

提前感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:35:48.220

subpop() 选项意味着仅针对由 XX 标识的单个子总体计算估计值，该子总体不等于 0 且未丢失。对于一个简单的二进制 XX 变量，这将等价于 XX==1。使用 subpop() 的原因是仅添加“如果 XX==1”限制通常无法为子总体生成正确的方差估计。但是，如果您只是用制表符查看比例，那应该没有什么不同，因为这些是点估计。[您可以在此处](http://www.agecon.ksu.edu/support/Stata11Manual/svy.pdf)找到更多详细信息（包括公式）。我不确定等效的 SAS 代码是什么。

# javascript - 通过 Jquery 将项目添加到 HTML 选择

> ID：11696460
> 
> 赞同：-1
> 
> 时间：2012-07-27T22:26:57.617
> 
> 标签：javascript, jquery, html, html-select

我希望能够允许用户在 HTML 选择下拉列表中添加自己的选项。除了获取值并在选择菜单下创建“选项”的部分之外，我编写了大部分代码。

*HTML*

```
<li id="add_1_parent">
    <div>
        <select width="100" class="add_select add_referral">
            <option value="">Incorporation</option>
            <option value="">Corporation</option>
            <option value="">Limited Liability Corporation</option>
            <option value="">Sole Proprietor</option>
        </select>
        <a href="#" id="add_1_child">Add</a>
    </div>    
</li> 
```

*JS*

```
$(document).ready(function() {
    $('#add_1_child').click(function() {
        $('#add_1_parent').append('<input id="add_1_foster_add" class="add_input" type="text" size="50" class="" value="" maxlength="255"/><a href="#" id="add_1_foster_child">Add</a>');
    });
    $('#add_1_foster').click(function() {
        // Add the value to the select HTML here..?
    });
}); 
```

[http://jsfiddle.net/HWRWv/](http://jsfiddle.net/HWRWv/)

单击`"Add"`按钮时，它需要显示一个文本框。

当您单击定义的第二个添加时，`"add_1_foster_child"`它需要将值从 中取出`input`，将其变为菜单`<option>`下的一个。`select`

我不知道该怎么做是从中获取值`input`并将其放入`select`菜单中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T22:29:26.993

您可以简单地通过使用该`.append()`函数并构造所需 HTML 的字符串来添加项目。让 jQuery 为您添加它。

```
var option_value = 42;
var option_text = "Meaning to life the Universe and Everything";
$('#select_id').append('<option value="'+option_value+'">'+option_text+'</option>'); 
```

[如评论中所述](https://stackoverflow.com/questions/11696460/add-item-to-html-select-via-jquery#comment15510999_11696480)，您绝对应该采取一些预防措施来防止您的用户添加可能会影响您网站布局的条目 - 例如，如果有人要输入一些实际的 HTML 代码。感谢[@Jason](https://stackoverflow.com/users/108893/jason)的洞察力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:53:54.940

我猜这就是你所追求的：

```
$(document).ready(function() {
    $('#add_1_child').on('click', function() {
        var html = '<div class="add_container"><input class="add_input" type="text" size="50" maxlength="255"/><a href="#" class="add_link">Add</a></div>';
        $('#add_1_parent').append(html);
    });

    $('#add_1_parent').on('click', '.add_link',function() {
        var option = $('<option value="">'+$(this).prev('.add_input').val()+'</option>');
        $('.add_select').append(option);
        $('.add_container').remove(); //removes the add input after submission, optional ?
    });
});​ 
```

[小提琴](http://jsfiddle.net/HWRWv/4/)

# android - 用 Android JNI 和 iOS 封装的 C/C++ 应用程序示例

> ID：11696465
> 
> 赞同：0
> 
> 时间：2012-07-27T22:28:02.763
> 
> 标签：android, c++, ios, c, java-native-interface

我正在寻找一个使用相同代码通过 JNI 和 iOS 在 Android 上运行的 C/C++ 应用程序示例

理想情况下，我可以挑选出某种开源 github 项目，或者可能是教程的一部分

希望集体意识至少可以在这里引导我朝着正确的方向前进。我们可以问例子对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:30:15.347

在您的评论中，您提到想要图形化的东西。查看[Cocos2D-X](http://www.cocos2d-x.org/)，一个具有各种实现（iOS 和 Android 是两个）的 C++ 游戏引擎。

# log4j - 在 log4j 中为所有类设置日志级别

> ID：11696467
> 
> 赞同：0
> 
> 时间：2012-07-27T22:28:15.873
> 
> 标签：log4j

有没有办法为 log4j 包中的所有类设置日志级别？我不想在 log4j.properties 中为我的包中的每个类添加一行

因此，如果我有一个包，例如：com.my.package 和该包中的 class1、class2、class3，是否有一种简洁的方法来设置

```
log4j.logger.com.my.package.class1=INFO
log4j.logger.com.my.package.class2=INFO
log4j.logger.com.my.package.class3=INFO 
```

我试过了：

```
log4j.logger.com.my.package.*=INFO but that does not seem to work. 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:30:48.667

尝试`log4j.logger.com.my.package=INFO`

# email - SEAM：简单的电子邮件 mailto 链接

> ID：11696468
> 
> 赞同：0
> 
> 时间：2012-07-27T22:28:23.170
> 
> 标签：email, jsf, seam

这可能是一个简单的问题，但我只是找不到我正在寻找的答案。我有一个 Seam facelet 页面，我想要一个字符串（即电子邮件地址）显示为链接，按下该链接时，打开用户本地电子邮件程序，其中电子邮件地址位于 to 行

这是我到目前为止所拥有的（语法也不正确）：

> ```
>  <ui:define name="results">
>                 <a:form>
>                     <rich:dataTable
>                     var="_item"
>                     value="#{myView.addressBean.items}"
>                     <rich:column>
>                             <f:facet name="header">Type</f:facet>
>                             <h:outputText value="#{_item.address.addressDescription}"/>
>                         </rich:column>
>                     <rich:column>
>                             <f:facet name="header">Info</f:facet>
>                             <h:outputText value="#{_item.address.addressType.type eq 'email' ? [<a href="'mailto:' + #{_item.address.addressInfo}">#{_item.address.addressInfo}</a>]  : _item.address.addressInfo}"/>
>                         </rich:column>
>                     </rich:dataTable>
>                 </a:form>
>             </ui:define> 
> ```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:36:38.687

只需使用一个[`ui:fragment`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/ui/fragment.html)（或一个`h:panelGroup`），而不是`h:outputText`，像这样：

```
<ui:fragment rendered="#{_item.address.addressType.type == 'email'}">
    <a href="mailto:#{_item.address.addressInfo}">#{_item.address.addressInfo}</a>
</ui:fragment> 
```

# php - PHP - 像 MP3TAG 一样的数组的正则表达式

> ID：11696470
> 
> 赞同：0
> 
> 时间：2012-07-27T22:28:28.463
> 
> 标签：php, regex, arrays

我想问一下如何使用像mp3tag这样的字符串模式将字符串转换为数组

%ALBUM% - %SOMETHING% - %SOMETHING%，“ - ”是非静态的自定义字符。

如果我没有明确表示我希望自定义 sting 使其成为一个数组，但该模式是自定义的而不是静态的

这在php中是否可行，如果可以，如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:35:02.110

```
$str = "%ALBUM% & %SOMETHING% (ノ゜-゜)ノ ︵ ┬──┬ %SOMETHING%,";
preg_match_all("/%([a-z]+)%/i", $str, $matches);

var_dump($matches); 
```

输出

```
array(2) {
  [0]=>
  array(3) {
    [0]=>
    string(7) "%ALBUM%"
    [1]=>
    string(11) "%SOMETHING%"
    [2]=>
    string(11) "%SOMETHING%"
  }
  [1]=>
  array(3) {
    [0]=>
    string(5) "ALBUM"
    [1]=>
    string(9) "SOMETHING"
    [2]=>
    string(9) "SOMETHING"
  }
} 
```

# python - 寻找（）函数？

> ID：11696472
> 
> 赞同：146
> 
> 时间：2012-07-27T22:28:47.233
> 
> 标签：python

请原谅我在这里的困惑，但我已经阅读了关于 python 中的 seek() 函数的文档（在不得不使用它之后），虽然它帮助了我，但我仍然对它的实际含义有点困惑，任何解释都很多感谢，谢谢。

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2012-07-27T22:38:48.347

关于`seek()`没有太多的担心。

首先，它在对打开的文件进行操作时很有用。

需要注意的是，它的语法如下：

```
fp.seek(offset, from_what) 
```

`fp`您正在使用的文件指针在哪里；`offset`表示您将移动多少个位置；`from_what`定义您的参考点：

*   **0**：表示您的参考点是文件的**开头**
*   **1**：表示您的参考点是**当前**文件位置
*   **2**：表示您的参考点是文件的**结尾**

如果省略，则`from_what`默认为 0。

永远不要忘记，在管理文件时，该文件中总会有一个您当前正在处理的位置。刚打开时，该位置是文件的开头，但是当您使用它时，您可能会前进。
`seek`当您需要`walk`沿着该打开的文件移动时，它将对您有用，就像您要进入的路径一样。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-07-27T22:34:39.023

打开文件时，系统会指向文件的开头。您所做的任何读取或写入操作都会从一开始就发生。一个`seek()`操作将该指针移动到文件的其他部分，以便您可以在该位置读取或写入。

因此，如果您想读取整个文件但跳过前 20 个字节，请打开文件，`seek(20)`移动到要开始读取的位置，然后继续读取文件。

或者说您想每 10 个字节读取一次，您可以编写一个循环来执行`seek(9, 1)`（相对于当前位置向前移动 9 个字节），`read(1)`（读取一个字节），重复。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-10T23:24:44.300

`seek`函数 expect是以字节为单位的**偏移量。**

# Ascii 文件示例：

因此，如果您有一个包含以下内容的文本文件：

**简单的.txt**

```
abc 
```

您可以跳转**1 个字节**以跳过第一个字符，如下所示：

```
fp = open('simple.txt', 'r')
fp.seek(1)
print fp.readline()
>>> bc 
```

# 二进制文件示例收集宽度：

```
fp = open('afile.png', 'rb')
fp.seek(16)
print 'width: {0}'.format(struct.unpack('>i', fp.read(4))[0])
print 'height: ', struct.unpack('>i', fp.read(4))[0] 
```

> **注意：**一旦您调用`read`，您将更改读取头的位置，其行为类似于`seek`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-10T20:55:37.563

对于字符串，忘记使用 WHENCE：使用 f.seek(0) 定位到文件的开头，使用 f.seek(len(f)+1) 定位到文件的末尾。使用 open(file, "r+") 读取/写入文件中的任何位置。如果您使用“a+”，则无论您将光标放在哪里，您都只能在文件末尾写入（追加）。

# iphone - 使用 OAuth 获取访问令牌

> ID：11696474
> 
> 赞同：1
> 
> 时间：2012-07-27T22:28:59.053
> 
> 标签：iphone, objective-c, ios, ipad, oauth

我正在尝试解决从 Instapaper 获取访问令牌的 OAuth 问题，它在他们的网站上说他们**没有请求令牌/授权工作流程**，他们说这与 twitter 所做的非常相似，所以这里是我做了什么：

```
- (void)getXAuthAccessToken
{
    OAConsumer *consumer = [[[OAConsumer alloc] initWithKey:CONSUMER_KEY secret:CONSUMER_SECRET] autorelease];

    OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:[NSURL URLWithString:INSTAPAPER_CLIENT_OAUTH_URL]
                                                                   consumer:consumer
                                                                      token:nil // xAuth needs no request token?
                                                                      realm:nil   // our service provider doesn't specify a realm
                                                          signatureProvider:nil]; // use the default method, HMAC-SHA1

    [request setHTTPMethod:@"POST"];

    [request setParameters:[NSArray arrayWithObjects:
                            [OARequestParameter requestParameterWithName:@"x_auth_mode" value:@"client_auth"],
                            [OARequestParameter requestParameterWithName:@"x_auth_username" value:self.username],
                            [OARequestParameter requestParameterWithName:@"x_auth_password" value:self.password],
                            nil]];      

     [request prepare];
    AFHTTPRequestOperation *requestOAuth = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [requestOAuth setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
        NSLog(@"RESPONSE OBJECT IS %@", responseObject);
    }failure:^(AFHTTPRequestOperation *operation, NSError *error){
        NSLog(@"ERROR IS %@", error);
    }];

    [requestOAuth start];

} 
```

知道为什么这不断给我一个 401 吗？

事实证明，我必须先根据此请求致电准备。但是我不能像现在看到的那样读取 responseData 只是二进制文件..我怎样才能将它转换为人类可读的？

编辑：

设置参数将参数放在标题中：

```
- (void)setParameters:(NSArray *)parameters 
{
    NSMutableString *encodedParameterPairs = [NSMutableString stringWithCapacity:256];

    int position = 1;
    for (OARequestParameter *requestParameter in parameters) 
    {
        [encodedParameterPairs appendString:[requestParameter URLEncodedNameValuePair]];
        if (position < [parameters count])
            [encodedParameterPairs appendString:@"&"];

        position++;
    }

    if ([[self HTTPMethod] isEqualToString:@"GET"] || [[self HTTPMethod] isEqualToString:@"DELETE"])
        [self setURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@?%@", [[self URL] URLStringWithoutQuery], encodedParameterPairs]]];
    else 
    {
        // POST, PUT
        NSData *postData = [encodedParameterPairs dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
        [self setHTTPBody:postData];
        [self setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
        [self setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:38:49.303

阅读 Instapaper API 文档后，您似乎需要在请求中提供令牌。

该页面在这里： http: [//www.instapaper.com/main/request_oauth_consumer_token](http://www.instapaper.com/main/request_oauth_consumer_token)

# jquery - 将背景图像缩放到浏览器的大小

> ID：11696476
> 
> 赞同：0
> 
> 时间：2012-07-27T22:29:08.200
> 
> 标签：jquery, css, browser, resize

嗨，我正在尝试用他们的大黑白图像来实现这个网站的功能：http: [//oldbarbershop.com.au/](http://oldbarbershop.com.au/)

当您从角落调整浏览器窗口的大小时，图像会调整大小，以便整个图片按比例填充整个框架。这是否需要特定的 jquery 插件？还是 CSS3？我见过许多解决方案，例如设置图像背景大小：100%，但这些解决方案并不完全“调整大小”，而只是填充整个框架。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:43:42.547

尝试[`background-size: cover`](https://developer.mozilla.org/en/CSS/background-size)

> 规定背景图片在保证两个尺寸都大于等于背景定位区域对应尺寸的情况下，应尽可能缩小"

# android - 应用程序未显示在 Google Play 中

> ID：11696478
> 
> 赞同：0
> 
> 时间：2012-07-27T22:29:17.563
> 
> 标签：android

我大约在 10 到 15 分钟前发布了我的应用程序，但它仍然没有出现在 Google Play 中。我试图转到该应用程序的直接页面，但这甚至不会出现。在 Google Developer Console 上，它说该应用程序已发布。有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:32:41.953

等一下 :) 我的应用在发布后的几个小时内就出现了。您的应用将在这里：[https ://play.google.com/store/apps/details?id=com.yourapp.package](https://play.google.com/store/apps/details?id=com.yourapp.package)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T22:33:03.403

稍等一下:) 可能需要一些时间来传播。

# css - div 和 div 内的垂直居中图像

> ID：11696482
> 
> 赞同：1
> 
> 时间：2012-07-27T22:29:47.130
> 
> 标签：css, html

我是使用 div 的新手，所以我不太擅长使用它们。我正在制作一个音乐博客，我希望用户能够看到帖子的图片，以及两侧的箭头可以转到下一个或上一个帖子。我无法将我的父 div 中的箭头居中。

我在网上搜索了一些东西，但似乎没有任何效果。这是我用于简单测试的 css...

```
#picture_wrapper {
  width:550px;
  background-color:#00F;
  float:left;
}

#picture_container {
  width: 500px;
  float: left;
  padding-left:5px;
  padding-right:5px;
}

#left_arrow_container {
  float: left;
  top:50%;
  width: 20px;
  height:100%;
  background-color: #F00;
}

#right_arrow_container {
  float: right;
  top:50%;
  width: 20px;
  height:100%;
  background-color: #F00;
} 
```

我将箭头 div 的背景颜色设置为红色，并且我认为使用此代码整个右侧和左侧都是红色的，但事实并非如此。只有我图像周围的区域是红色的。这是我正在使用的 html。

```
<div id="picture_wrapper">
  <div id="left_arrow_container"><img src = 'http://www.startingtofeelit.com/images/slider_left_arrow.png' width = '20' height = '34px'/></div>
  <div id="picture_container"><center><img src = 'http://www.startingtofeelit.com/wp-content/uploads/2012/07/DIIV+zachacry+cole+smith2.jpg' width = '500' /></center></div>
  <div id="right_arrow_container"><img src = 'http://www.startingtofeelit.com/images/slider_right_arrow.png' width = '20' /></div>
</div> 
```

这是它现在在我的 Dreamweaver 上的显示方式... [pic1 http://www.startingtofeelit.com/images/pic1.png](http://www.startingtofeelit.com/images/pic1.png)

这是我或多或少希望它显示的方式... [pic2 http://www.startingtofeelit.com/images/pic2.png](http://www.startingtofeelit.com/images/pic2.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:34:31.840

听起来像是一份工作`vertical-align: middle;`。

[http://jsfiddle.net/Wexcode/Lp5M9/2/](http://jsfiddle.net/Wexcode/Lp5M9/2/)

```
#picture_wrapper { 
    background: #F00;
    float: left;
    font-size: 0;
    white-space: nowrap; }
#left_arrow_container, #right_arrow_container {
    height: 100%;
    vertical-align: middle;
    display: inline-block; }
#picture_container {
    background: #00F;
    padding: 0 5px;
    vertical-align: middle;
    display: inline-block; } 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:35:28.830

我更喜欢使用绝对位置和相对位置:)，几乎是我看到你试图在你的 CSS 中实现的，为了让顶部、左侧、右侧和底部工作，你必须设置一个位置（绝对、相对或固定）并使用你的箭头作为背景

[http://jsfiddle.net/wQqfp/2/](http://jsfiddle.net/wQqfp/2/)

# f# - 类型没有 null 作为正确的值

> ID：11696484
> 
> 赞同：29
> 
> 时间：2012-07-27T22:30:17.803
> 
> 标签：f#

对于示例程序：

```
type public MyClass(reasonForLiving:string) =
    member x.ReasonForLiving with get() = reasonForLiving

let classFactory () = MyClass("up to you")
let live () =
    let instance = classFactory()
    if instance = null then raise(System.Exception("null is not living... that's why OO languages die from bugs"))
    instance 
```

*当我将此类用作隐式类型函数的返回值并将其与null*进行比较时，出现错误“'MyClass' 类型没有 null 作为正确的值” （b/c 与 C# 依赖注入的兼容性要求我不能依赖 F# 选项类型）。

我可以通过将空检查更改为：

```
if instance :> obj = null then 
```

但是，我知道（“感觉”）这完全是“错误的”。特别是当我考虑 MyClass 是一个不需要装箱的引用类型时（从 C# 背景说）。

我已经阅读了“F# 值限制”以及它如何影响类型推断，但我似乎无法看到它如何应用于这种场景。

**问：还有其他方法可以做到这一点吗？**

*除了＃1：*我找到了一个更简单的方法来获取错误......

```
type public MyClass(reasonForLiving:string) =
    member x.ReasonForLiving with get() = reasonForLiving
let nullMyClass : MyClass = null 
```

*除了＃2：*我确实尝试了 System.Nullable 没有考虑...... MyClass 是一个引用类型，而不是 Nullable<_> 需要的值类型（结构）。所以，只是让我放心，我真的在处理引用类型，让我想知道为什么对象强制转换突然使这项工作有效。

**更新：**对于任何感兴趣的人，我将其用作具有以下三个功能的 Common Service Locator 的一种解决方案。每个请求的服务都必须支持*null*，因此如果服务类是在 F# 中定义的，则需要添加`[<AllowNullLiteral>]`：

```
let private getServiceLocator () =
    try Some(Microsoft.Practices.ServiceLocation.ServiceLocator.Current)
    with | _ -> None

let private getService serviceFactory =
    let serviceLocator = getServiceLocator()
    let service = match serviceLocator with 
                  | None -> serviceFactory()
                  | _ -> 
                    match serviceLocator.Value.GetInstance<'a>() with
                    | null -> serviceFactory()
                    | svc -> svc
    match service with
    | null -> None
    | _ -> Some(service)

let private getRequiredService serviceFactory =
    let service = getService serviceFactory
    match service with
    | None -> raise(MissingServiceException(""))
    | _ -> service.Value 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-27T22:32:07.830

使用[`[<AllowNullLiteral>]`](http://msdn.microsoft.com/en-us/library/ee353608.aspx)属性：

```
[<AllowNullLiteral>]
type public MyClass(reasonForLiving:string) =
    member x.ReasonForLiving with get() = reasonForLiving 
```

默认情况下，F# 类型不允许 null（感谢上帝！）。此属性对于与其他 .NET 语言的互操作很有用，并允许与 null 进行分配/比较。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-27T23:39:58.083

该`AllowNullLiteral`属性的问题在于，除了允许您将对象与 null 进行比较之外，它还可以*将*您的对象设置*为*null。

假设这对于您的用例来说是不可取的，有一个简单的替代方案，具有不可观察的性能影响：

```
let inline isNull (x:^T when ^T : not struct) = obj.ReferenceEquals (x, null) 
```

然后与其做`if instance = null then`，不如做`if isNull instance then`。

这适用于任何引用类型（包括记录和 DU），但不会引入将 F# 类型的对象从 F# 设置为 null 的可能性——两全其美。

# apache2 - 可以找到php.ini文件

> ID：11696485
> 
> 赞同：4
> 
> 时间：2012-07-27T22:30:20.477
> 
> 标签：apache2, php

我已在 Windows Vista 上的 Apache 2 上将 PHP 5.2.17 安装到目录 c:\Web\Webserver\PHP5\

但是 phpinfo 显示配置文件路径是 c:\Windows 并且加载的配置文件是（无）。

httpd.conf 有以下几行：

```
LoadModule php5_module "c:/Web/WebServer/PHP5/php5apache2_2.dll"
AddHandler application/x-httpd-php .php
PHPIniDir 'c:\Web\Webserver\PHP5\' 
```

Windows 控制面板显示路径环境变量包括我的安装目录（在路径的前面），并且 PHPRC 变量也指向我的安装目录。

那么为什么要在 c:\Windows 中寻找 php.ini 呢？

如果我将 php.ini 的副本放在 c:\Windows 中，它仍然说找不到它。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:34:48.907

尝试从 windows 中的搜索中搜索 php.ini

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:10:24.197

你确定`PHPRC`是*系统*变量，而不是*用户*变量？

你重启了吗？

您是否安装了 Sysinternals Process Explorer，并右键单击 Apache 进程以验证`PHPRC`参数是否在环境中（通过“属性”选项卡）。

你考虑过Linux吗？:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-29T21:44:22.567

上面的答案很好，但没有解决我们遇到的问题。

正如其他人提到的（当场），我创建了一个文件：

```
<?php
phpinfo(); 
?> 
```

所以效果很好。但是，它显示“（无）”

那么你在哪里找到（无）！？

当然，你找不到不存在的东西。

答案实际上是，你没有 php.ini；你需要创建它。

就我而言，在 Windows 上，您只需转到安装 php 的位置；我已经安装了它，`c:\php`我相信它在其他平台上会是相同的步骤。

然后，从命令行，powershell for ex，键入： `notepad c:\php\php.ini`

告诉它是的，您确实想创建它，然后首先添加您需要的任何更改。以我为例：

```
extension_dir = "c:\php\ext"
extension=mysqli
upload_max_filesize = 25M
post_max_size = 13M
max_execution_time = 300 
```

然后保存。固定的！

顺便说一句 - 如果您执行“新建文件”然后“另存为”，记事本将（不是这样）将您的文件重命名为 php.ini.txt。

# javascript - node-canvas：以隔行/逐行方式输出 PNG 文件

> ID：11696488
> 
> 赞同：1
> 
> 时间：2012-07-27T22:30:50.237
> 
> 标签：javascript, node.js, libpng

`node-canvas`是依赖于 Cairo 的 HTML5 画布库的 Node.js 版本。我的应用程序根据发送到应用程序的数据创建了一堆 PNG 文件。

`node-canvas`提供两个函数`toBuffer()`，`toDataURL()`将原始 PNG 或 Base64 编码的 PNG 输出到我可以发送到浏览器的字符串。但是，无法在库中添加对隔行扫描的支持。

我想扩展库的功能并添加对隔行扫描 PNG 的支持。我有一个字符串中的原始 PNG 数据，还有一个图像的像素数组（如果需要）。我不了解 PNG 编码的工作原理。有人可以指出我需要用来转换我拥有的数据（非隔行原始 PNG 数据或像素数组）并将其转换为隔行/逐行 PNG 的算法吗？

这是我正在构建的用于绘制复杂方程的图形计算器应用程序的必要步骤。与为我的应用程序从上到下加载的非隔行 PNG 相比，拥有一个快速出现并随着时间的推移而锐化的模糊图像会很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:08:39.350

您无法将非隔行扫描的原始 PNG 数据转换为隔行扫描的 PNG 流。隔行与非隔行 PNG 是两种不同的 PNG 编码方式（它们在像素流排序上基本不同，但之后应用了过滤器压缩，因此您不能简单地更改最终流以在隔行和非隔行之间切换隔行扫描模式）。生成隔行扫描 PNG 是 PNG 编码器的工作，该编码器用于从原始图像像素写入您的 PNG 文件（或流）。

不过，我建议您不要使用隔行扫描图像。压缩效率受到影响（特别是 PNG），用户体验的优势至少值得商榷。[参见例如](http://www.codinghorror.com/blog/2007/03/getting-the-most-out-of-png.html)。今天，很少使用隔行扫描 PNG。

# javascript - 如何在 Rails 3.1.4 中使用 FormBuilder.new 构建表单构建器对象

> ID：11696496
> 
> 赞同：1
> 
> 时间：2012-07-27T22:31:44.417
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我们需要在控制器中使用 FormBuilder.new 创建一个表单构建器对象。这是我们现在正在做的事情：

```
@f = ActionView::Helpers::FormBuilder.new(:invoice, @invoice, self, {}, proc {} ) 
```

有一个错误说：

```
ActionView::Template::Error (undefined method `fields_for' "invoiceController.." 
```

我们认为 @f 不是表单构建器对象，这就是为什么 fields_for 无法识别的原因。问题似乎与定义中的当前视图的 self 参数有关。使用 FormBuilder 构建表单构建器对象的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:53:05.283

你不打算让它与控制器中的这些参数一起工作的原因是你为'template'参数调用'self'，它实际上只是模板......来自模板内。在控制器中，self 是控制器，而不是模板。

# c++ - C++ - 创建虚拟函数以打印调试消息的最佳方式

> ID：11696498
> 
> 赞同：0
> 
> 时间：2012-07-27T22:31:45.553
> 
> 标签：c++, debugging, virtual

> **可能重复：**
> [纯虚函数和抽象类](https://stackoverflow.com/questions/3185954/pure-virtual-function-and-abstract-class)

我有一个类，我想创建一个用于打印调试信息的虚函数。任何继承这个类的类都必须实现这个虚函数。这样，不同的类可以将调试消息打印到不同的输出设备，例如`std::cout`标签、文件等。

基类不会知道消息的目的地。但我不知道最好的方法来做到这一点。我正在考虑使用`printf()`可以打印任意数量参数的东西。但我不知道那会实现什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:08:57.250

您提出的方法有一个缺点。每个派生类都必须自己实现类似 printf 的设施。这似乎不是一项非常有成效的活动，并且会使基类使用起来非常烦人。

在代码方面，让基类要求派生类提供 debug 可能不那么繁琐`ostream`。或者，您可以默认为`cerr`.

```
class Base {
protected:
    virtual std::ostream & debug_stream () const { return std::cerr; }
    //...
}; 
```

然后，外部用户`Base`可以将信息插入`debug_stream`.

如果您坚持使用 printf 样式语法，则接口可能会返回 a `FILE *`：

```
class Base {
protected:
    virtual FILE * debug_file () const { return stderr; }
    //...
}; 
```

因此，例如，派生类可以这样做：

```
class Derived : public Base {
    static std::ofstream dbgstream;
    std::ostream & debug_stream () const { return dbgstream; }
    //...
};

std::ofstream Derived::dbgstream("/tmp/derived.dbg"); 
```

然后，如果一个人可以正确访问基类接口，

```
void foo (Base *b) {
    //...do something with b
    b->debug_stream()
        << __FILE__ << ":" << __LINE__ << " foo did something"
        << std::endl;
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:42:29.320

我会这样做

```
class Base
{
   virtual int debugfn(const std::string& msg) const = 0;
}; 
```

即，不要将`printf`（生成格式化字符串并将其发送到标准输出）的功能与调试功能混为一谈。让它把一个已经完成的字符串作为它的参数，并让派生类决定如何处理它。如果需要，`int`可以是错误代码，否则只需 return `void`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:14:11.913

我会做这样的事情：

```
class Base 
{ 
protected:
   virtual int doDebug(const std::string& Msg) const = 0; 

public:
   int Debug(const char* MsgFmt, ...) const; 
}; 

int Base::Debug(const char* MsgFmt, ...) const
{
    std::string sMsg;
    va_list args;

    va_start(args, MsgFmt);
    int len = vsnprintf(NULL, 0, MsgFmt, args);
    if (len > 0)
    {
        sMsg.resize(len);
        vsnprintf(&sMsg[0], len + 1, MsgFmt, args);
    }
    va_end(args);

    return doDebug(sMsg); 
} 
```

这样，您仍然可以为调用者提供灵活的格式，但派生类不必担心这一点，因为它们只给出了预先格式化的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T23:40:41.467

这里的基本思想是使用一个受保护的虚函数，它将一个字符串作为要打印/记录的错误/日志/调试消息。然后，您的基类公开一个非虚函数（或一组函数）来构造将馈送到受保护虚函数的字符串。要实际创建字符串，您可以使用多种方法中的一种，以 printf 的样式（使用可变参数或可变参数模板 (C++11)）或以标准 iostream 的样式。这是后一类的一个解决方案：

```
class BaseDebugOutput {
  protected:
    virtual void printMessage(const std::string& aMsg) = 0;

  private:
    std::stringstream temp_stream;
  public:
    virtual ~BaseDebugOutput() { };

    // One << operator for any type.
    template <typename T>
    BaseDebugOutput& operator<<(const T& value) {
      temp_stream << value;
      return *this;
    };

    typedef std::basic_ostream< std::stringstream::char_type,
                                std::stringstream::traits_type >& 
              (*ostream_function_ptr)(
                std::basic_ostream< std::stringstream::char_type,
                                    std::stringstream::traits_type >&);

    // One << operator for things like std::endl.
    BaseDebugOutput& operator<<(ostream_function_ptr p) {
      if(p == ostream_function_ptr(std::endl)) {
        // if the user outputted an end-line, then print the entry:
        temp_stream << std::endl;
        std::string temp_msg;
        std::getline(temp_stream,temp_msg);
        // call the protected virtual function:
        printMessage(temp_msg);
      } else {
        temp_stream << p;
      };
      return *this;
    };
}; 
```

一个示例派生类将是：

```
class CErrDebugOutput : public BaseDebugOutput {
  protected:
    virtual void printMessage(const std::string& aMsg) {
      std::cerr << "Error reported with message: '" << aMsg << "'." << std::endl;
    };
}; 
```

用例看起来像这样：

```
int main() {
  BaseDebugOutput* debug_output = new CErrDebugOutput;

  (*debug_output) << "The answer is: " << 42 << "!" << std::endl;

  delete debug_output;
  return;
}; 
```

上述设置的一个优点是，除了错误消息之外，您几乎可以插入任何您想要的内容，例如时间戳，或者只是添加“错误：”字符串或其他任何内容，这样您就不必在您发出消息的地方（呼叫站点）一直重复这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T00:55:56.483

我可能没有理解这个问题，因为在所有其他答案中都没有提供想到的最简单的东西......如果意图是为所有层次结构提供一个单一的入口点来打印信息，那么这是最简单的方法：

```
class base {
public:
   virtual std::ostream& print( std::ostream& /*...*/ ) const = 0;
};
std::ostream& operator<<( std::ostream& o, base const & b ) {
   return b.print( o );
} 
```

之所以有注释`/*...*/`，是因为与`operator<<`签名不固定不同，因此您可以传递额外的参数来控制格式（例如，`bool single_line`-- `int indent`if`!single_line`插入前导空格，`int verbosity`以控制是否仅打印对象的公共状态或还有辅助数据...）以产生更丰富的输出。

通过单个实现（和转发功能），您可以将对象打印到流中，并以一种方式生成带有程序状态的日志以进行调试。

另一方面，如果您的意思是派生类在不同时间点打印有关其状态的调试消息的解决方案，那么您不能真正多态地做到这一点，因为派生类型决定记录消息以及何时采取. 在这种情况下，只需拉出一个日志库并使用它。如果日志级别低于消息的类型（即，如果您配置为仅记录警告，则调试日志（不会生成）的成本非常小），则通用日志库在运行时的成本非常低。

# validation - 仅使用 Google Apps 脚本粘贴数据验证

> ID：11696499
> 
> 赞同：1
> 
> 时间：2012-07-27T22:31:53.513
> 
> 标签：validation, google-apps-script, google-sheets

这应该是一个简单的是或否。是否可以*仅*使用 Google Apps 脚本粘贴数据验证？

我想要做的是让代码从活动单元格上方的行中复制数据验证，然后将数据验证粘贴到活动单元格的行中。

我试过copyTo：

```
function updateFormat() {
  var rowNumber = SpreadsheetApp.getActiveSpreadsheet().getActiveSelection().getRow();
  var rowAbove = rowNumber -1 ;
  var targetRange = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getRange(rowNumber, 1, 1, 36);      
  var templateRange = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getRange(rowAbove, 1, 1, 36);

  templateRange.copyTo(targetRange);
} 
```

但是 - 显然 - 复制了数据验证*和*上面行的*内容*，这不是目标。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:48:52.410

添加 optArgument {formatOnly:true} 有效（[请参阅参考资料](https://developers.google.com/apps-script/class_range#copyTo)）。所以

```
templateRange.copyTo(targetRange); 
```

变成

```
templateRange.copyTo(targetRange, {formatOnly:true}); 
```

我稍微重构了您的代码并使用以下方法进行了测试：

```
function updateFormat() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var rowNumber = sheet.getActiveSelection().getRow();
  var rowAbove = rowNumber -1 ;
  var maxCols = sheet.getMaxColumns();
  var rangeToCopy = sheet.getRange(rowAbove, 1, 1, maxCols);
  rangeToCopy.copyTo(sheet.getRange(rowNumber, 1, 1, maxCols), {formatOnly:true});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T08:11:40.560

仅作记录，我认为有一个[新的验证类](https://developers.google.com/apps-script/reference/spreadsheet/data-validation#copy%28%29)来解决这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:17:14.767

不。

但作为一种解决方法，您可以`targetRange`在将模板复制到其上之前读取您的所有其他值、公式和格式，然后使用它们的特定公式恢复它们，例如`setFormula`，`setValue`等等。基本上只留下模板中的数据验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-05T19:21:53.453

有一个 copyTo 的变体，它只粘贴数据验证：

`copyTo(destination, SpreadsheetApp.CopyPasteType.PASTE_DATA_VALIDATION)`

根据您的具体情况，而不是

```
templateRange.copyTo(targetRange); 
```

采用

```
templateRange.copyTo(targetRange, SpreadsheetApp.CopyPasteType.PASTE_DATA_VALIDATION); 
```

参考。[range#copytodestination-copypastetype-转置](https://developers.google.com/apps-script/reference/spreadsheet/range#copytodestination-copypastetype-transposed)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-27T19:43:40.707

```
/**
 * Copia en la fila nueva el formato y validaciones de la fila maestra, es decir, 
 * la cabecera si index = 1 o la que prefiramos, si no expecificamos index, cuando 
 * insertamos al final coge de maestra la anterior y al principo coge la siguiente.
 * @example function onEdit() { updateRules(); }
 **/
function sheetRowRules(index)
{
  var spread = SpreadsheetApp.getActive();
  var sheet  = SpreadsheetApp.getActiveSheet();
  var row   = sheet.getActiveCell().getRowIndex();
  var cols  = sheet.getMaxColumns();

  if (index)
    var i = index;
  else if (row > 2)
    var i = row-1; // anterior
  else
    var i = row+1; // siguiente a la cabecera
  var rg     = sheet.getRange(i, 1, 1, cols);
  var rango  = sheet.getRange(row, 1, 1, cols);

  // Copia el formato del anterior registro al actual y fórmulas de celdas para conservar validaciones de datos
  rg.copyTo(rango, {formatOnly:true});
  var formulas = rg.getFormulasR1C1().toString().split(",");

  //rango.setFormulasR1C1(formulas); // borra los valores, por eso así:
  for (var n = 0; n < formulas.length; i++)
  {
    if (formulas[n].length)
    {
      var col = n+1;
      var rango  = sheet.getRange(row, col, 1, 1);
      rango.setFormulaR1C1(formulas[n]);
    }
  }
  spread.toast("Formatos y fórmulas del replicados de "+i+" al registro "+row);
} 
```

# java - 如何在 Netbeans 7.1.2 中设置 ${user} 的值？

> ID：11696503
> 
> 赞同：6
> 
> 时间：2012-07-27T22:32:18.887
> 
> 标签：java, netbeans, netbeans-7

我想替换 Netbeans 中 ${user} 的默认值。帮助文件说

> 定义参数：
> 
> 1.  在 IDE 的菜单栏中，选择“工具”>“模板”。模板管理器打开。
>     
>     
> 2.  展开其他类别。双击属性。User.properties 文件在编辑器中打开。
>     
>     
> 3.  定义一个参数。例如，定义 ${user} 参数以将您的姓名添加到您创建的模板中。语法是“user=LorumIpsum@mycompany.com”。展开代码模板时，该模板中所有出现的 ${user} 都将替换为“LorumIpsum@mycompany.com”。
>     
>     
> 4.  使用语法 name=value 添加任意数量的附加参数。

在第 2 步中，双击“属性”不执行任何操作。我尝试在编辑器中打开属性模板并添加“用户”属性。我还尝试将基于属性模板的文件添加到项目中。当我创建一个新文件时，这些都没有改变输出。

如何在 Netbeans 7.1.2 中执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T22:32:18.887

在我撰写这个问题时，我找到了解决方案，并希望将其发布在这里以供其他人参考。Netbeans 帮助文件中的说明不正确。步骤 2 应更改如下：

> 1.  ...
>     
>     
> 2.  展开其他类别。*单击设置按钮。*User.properties 文件在编辑器中打开。

我希望这对将来的某人有用。

# iphone - 如何将SubView的Frame坐标系转换为Self View的坐标系

> ID：11696508
> 
> 赞同：31
> 
> 时间：2012-07-27T22:32:41.813
> 
> 标签：iphone, objective-c, ios

我以编程方式在其中创建了一个 scrollView 和一些按钮。当我单击任何按钮时，必须显示一个弹出框。

我的按钮在 self.view 中的来源就像 (100,11) 和 scrollView (9,11) 内部，而 scrowView 在 self.view 的某个地方。弹出框显示在 (9,11) 中，但正确的是 (100,11)。我尝试使用转换但没有成功。

```
-(IBAction)showPopover:(id)sender{
//... implemented popover above

//Wrong Origin:
NSLog(@"wrong x:%f y:%f",[sender frame].origin.x, [sender frame].origin.y);

//Transform to correct
CGRect frame = [self.view convertRect:[sender frame] toView:nil];

//Shoulf be right, but is not...
NSLog(@"new x:%f y:%f",frame.origin.x, frame.origin.y);
} 
```

有人帮我吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-27T22:39:30.483

视图的框架已经在父视图的坐标系中。因此，如果您的设置`self.view`包含`scrollview`contains `sender`：

```
CGRect frame = [sender.superview convertRect:sender.frame toView:self.view];

// or, better:

CGRect frame = [sender convertRect:sender.bounds toView:self.view]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-05-10T09:32:26.330

**迅速：**

```
let frame = sender.convert(sender.bounds, to: self.view) 
```

# kdtree - 使用 vlfeat 的慢速 kd 树查询，更快的替代方案？

> ID：11696510
> 
> 赞同：2
> 
> 时间：2012-07-27T22:32:58.287
> 
> 标签：kdtree, vlfeat

我正在使用 vlfeat 的 kdtree，它实现了 FLANN 的 kd-tree，据说它可以处理高维数据。但是，现在我有一个从 128x15000 数据集构建的 kdtree，并且对任何内容的 kd 树查询都已减慢到 8 秒。这是kd-trees的极限吗？FLANN 也应该是一个更快优化的 kdtree...

我现在还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:24:13.760

尝试使用 David M. Mount 和 Sunil Arya ANN（近似最近邻搜索）

[http://www.cs.umd.edu/~mount/ANN/](http://www.cs.umd.edu/~mount/ANN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T16:17:04.050

真的有那么慢吗？您使用什么参数/设置？

除此之外，我可以推荐[FLANN](http://www.%C2%ADcs.%C2%ADubc.%C2%ADca/%C2%AD~mariusm/%C2%ADindex.%C2%ADphp/%C2%ADFLANN/%C2%ADFLANN)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T06:15:12.047

VLFeat 实现了 FLANN 建议的算法（多个随机树和分层 k 均值树）。也许对于您的情况，算法选择或参数集（或两者）不正确。尝试原始的 FLANN 或 OpenCV 的 FLANN 实现（好吧，或者基于 VLFeat 实现自己的）以获得正确的算法和参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T20:03:55.493

我的猜测是您一次查询一个数据点。也许您想一次将所有查询作为矩阵发送，例如文档中的这个函数调用：

```
[index, distance] = vl_kdtreequery(kdtree, X, Q, 'NumNeighbors', 10, 'MaxComparisons', 15); 
```

请注意，它将数量限制`MaxComparisons`为 15，这是实现快速性能的关键部分。

# javascript - 信用卡信息的正则表达式不应允许字符

> ID：11696512
> 
> 赞同：1
> 
> 时间：2012-07-27T22:33:19.640
> 
> 标签：javascript, regex

我正在使用正则表达式来检查以 VISA`^4[0-9]{15}$`开头且长度为 16 位的信用卡信息。`4`

此表达式接受错误的信用卡号`4141414141414141aa`，因为它接受有效信用卡号末尾的字母字符。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:39:54.450

如果您使用 Java，则锚点不是`^`and `$`，而是`\A`and `\z`，因此您的正则表达式将是

```
"\\A4[0-9]{15}\\z" 
```

或者

```
"\\A4\\d{15}\\z" 
```

* * *

在 Javascript 中，锚点确实应该是`^`并`$`制作正则表达式：

```
/^4\d{15}$/ 
```

在我的 Firebug Javascript 控制台中测试：

```
>>> var val1='4141414141414141';
>>> var val2='4141414141414141aa';
>>> /^4\d{15}$/.test(val1);
true
>>> /^4\d{15}$/.test(val2);
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T07:58:19.550

您可以使用`\b`来匹配 JavaScript 中单词的开头和结尾。所以它可以是：

```
if (/\b4\d{12}(?:\d{3})?\b/.test(subject)) {
    // Successful match

} else {
    // No match

} 
```

根据[http://tools.twainscanning.com/getmyregex](http://tools.twainscanning.com/getmyregex)

# php - 使用通配符取消设置带有前缀 (php) 的会话？

> ID：11696516
> 
> 赞同：2
> 
> 时间：2012-07-27T22:33:37.153
> 
> 标签：php, session

我正在使用 PHP 设置所有以 cont_ 开头的会话变量，所以`$_SESSION['cont_`......现在我不能使用`$_SESSION['cont']['subvariable'];`与服务器相关的特定原因。我试过这样做`unset($_SESSION['cont_'*];`，但这会给出错误。

最好的方法是无需设置即可做到这一点`$_SESSION['cont']['var'];`？

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T22:38:05.913

```
foreach($_SESSION as $key => $val){
    if(substr($key,0,5) === "cont_"){
        unset($_SESSION[$key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T22:38:26.757

您必须遍历数组，找到以开头的数组`cont_`并取消设置。

```
foreach ($_SESSION as $key => $val) {
    if (preg_match('/$cont_/', $key)) {
        unset($_SESSION[$key]);
    }
} 
```

# php - wordpress 试图在循环外完全使用全局 $wpdb ......有人知道怎么做吗？

> ID：11696517
> 
> 赞同：0
> 
> 时间：2012-07-27T22:33:41.060
> 
> 标签：php, ajax, wordpress

我正在制作一个插件 - 大多数插件文件都在循环中，并且全局 $wpdb 没有问题，但是我现在可以使用 ajax 以一种我需要 onsuccess 消息返回到变量的方式。如果我在循环内的页面上这样做。由于插件的工作方式，ajax 返回的消息是整个页面。

所以我必须创建一个不在插件框架内的单独页面。然后将ajax发送到该页面

我的问题是因为它是一个单独的页面，它不包含 WP 的文件或函数，因此我无法使用全局 $wpdb。

任何人都知道我需要包含什么才能使用它？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:12:03.987

好吧，没有考虑到这一点。可能有更好的方法可以做到这一点，但我就是这样做的。

```
define('WP_USE_THEMES', false);
require '/x/x/x/blog_main_dir/wp-blog-header.php'; 
```

我通过使用找到了真实的位置

```
dirname(__FILE__); 
```

和 pregmatch_replace 削减我不需要的东西..

是的，有更好的方法，但这是一种适用于我的问题的快速方法。

只是为了澄清这个解决方案适用于我，它可能不适用于其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T01:41:33.520

（我知道这已经晚了 2 年，但万一有人搜索这个......）

```
//Tells WordPress to only load the very basic components
define( 'SHORTINIT', true );

//Include the database code
require_once( $_SERVER['DOCUMENT_ROOT'] . '/wp-load.php' );

//Now use the database
echo $wpdb->prefix; 
```

# java - 当数组设置为较低的值时，如何让我的程序生成警报

> ID：11696520
> 
> 赞同：-2
> 
> 时间：2012-07-27T22:34:00.563
> 
> 标签：java, swing

我开发了一个程序来监控路由器流量，当流量低于阈值时，我的 java 程序会触发警报。每 30 秒（定时器）我通过 snmp 从路由器获取一个流量值，并将每个值存储在数组中。我的问题是，当出现中断时，文本文件中显示的值为 +/- 0.0，文本文件颜色变为红色，但几分钟后文本字段的颜色变为绿色，文本文件的值仍然很低。你能帮我管理这种情况并让我的文本字段保持红色或黄色，直到流量恢复。下面是我的代码：

```
//sum of the array    
public float sumArray(float arr[]){
    int j;
    float sum = 0;
    for(j = 0; j < arr.length; j++){
        sum = sum + arr[j];
    }
    return sum;
}
// method generating alert  
public void blade1() {
     //arr1 to made average of valCalOut = valFinalOut
 arr1 = new float[3];
     //arr2 calculate the threhsold it's the average of valCalOut
 arr2 = new float[10];  
        // fill the arr1 with valCalOut
        if ( i1 <= arr1.length ){           
            arr1[i1] = valCalOut;
            i1 ++;

         }else{
             i1 =0;
             arr1B1[i1] = valCalOut;
             i1++;
         }
        //sum arr1 to get valFinalOut
        if (index1 <= 3){
                valFinalOut = sumArray(arr1) / index1 ;
                index1++;
            }else{
                valFinalOut = sumArray(arr1) / 3 ;
          }
        // fill arr2 with valCalOut 
        if ( i2 < arr2.length ){            
            arr2[i2] = valCalOut;
            i2 ++;

         }else{
             i2 =0;
             arr2[i2] = valCalOut;
             i2++;
         }  
                    // sum arr2 to calculate the threshold(is average of valCalOut)
        if (index2 <= 10){
            averageVal = sumArray(arr2) / index2 ;
            index2++;
        }else{
            averageVal = sumArray(arr2) / 10;
        }

        threshold = averageVal - (averageVal * dropRatio);

    txtout.setText(Float.toString(valFinalOut));
        txtav.setText(Float.toString(averageVal));
    txtth.setText(Float.toString(threshold));

                if (valFinalOut < threshold ) {
                    if (txtout.getBackground() == Color.YELLOW) {
                                            //btnreset pressed txtout turned yellow
                            stopAlarm();
                    } else {
                         btnreset.setEnabled(true);
                         txtout.setBackground(Color.RED);
                         btnreset.setEnabled(true);
                         playAlarm();
                         textArea.append(dateTime()+" : Traffic dropped, Bandwith : " + valFinalOut + " Mbps, Average : "+averageVal+  " Mbps, Threshold : " +threshold+ " Mbps,  Please check ! \n "); 
                                                }
                } else {
                            txtout.setBackground(Color.GREEN);
                    btnreset.setEnabled(false);
                }       
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:52:51.210

我将平均时间增加了 30 分钟而不是 5 分钟，因此我的数组有更多的值，并且包含 60 个值而不是 10 个值。所以现在警报一直是红色的，直到交通真正恢复。谢谢大家。

# gradle - 如何将参数从命令行传递到 Gradle

> ID：11696521
> 
> 赞同：115
> 
> 时间：2012-07-27T22:34:01.863
> 
> 标签：gradle, gradle-task, gradle-properties

我正在尝试将参数从命令行传递给 java 类。我关注了这篇文章：[http](http://gradle.1045684.n5.nabble.com/Gradle-application-plugin-question-td5539555.html) : //gradle.1045684.n5.nabble.com/Gradle-application-plugin-question-td5539555.html 但代码对我不起作用（也许它不适用于JavaExec？）。这是我尝试过的：

```
task listTests(type:JavaExec){
    main = "util.TestGroupScanner"
    classpath = sourceSets.util.runtimeClasspath
    // this works...
    args 'demo'
    /*
    // this does not work!
    if (project.hasProperty("group")){
        args group
    }
    */
} 
```

上述硬编码 args 值的输出为：

```
C:\ws\svn\sqe\sandbox\selenium2forbg\testgradle>g listTests
:compileUtilJava UP-TO-DATE
:processUtilResources UP-TO-DATE
:utilClasses UP-TO-DATE
:listTests
Received argument: demo

BUILD SUCCESSFUL

Total time: 13.422 secs 
```

但是，一旦我将代码更改为使用 hasProperty 部分并在命令行上将“demo”作为参数传递，就会得到 NullPointerException：

```
C:\ws\svn\sqe\sandbox\selenium2forbg\testgradle>g listTests -Pgroup=demo -s

FAILURE: Build failed with an exception.

* Where:
Build file 'C:\ws\svn\sqe\sandbox\selenium2forbg\testgradle\build.gradle' line:25

* What went wrong:
A problem occurred evaluating root project 'testgradle'.
> java.lang.NullPointerException (no error message)

* Try:
Run with --info or --debug option to get more log output.

* Exception is:
org.gradle.api.GradleScriptException: A problem occurred evaluating root project
 'testgradle'.
    at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:54)
    at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:127)
    at org.gradle.configuration.BuildScriptProcessor.evaluate(BuildScriptProcessor.java:38) 
```

[http://gradle.1045684.n5.nabble.com/file/n5709919/testgradle.zip](http://gradle.1045684.n5.nabble.com/file/n5709919/testgradle.zip)上有一个简单的测试项目可以说明问题。

这是使用 Gradle 1.0-rc-3。NullPointer 来自这行代码：

```
args group 
```

我在任务定义之前添加了以下分配，但它并没有改变结果：

```
group = hasProperty('group') ? group : 'nosuchgroup' 
```

任何有关如何将命令行参数传递给 gradle 的指针表示赞赏。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-27T22:50:50.937

`project.group`是预定义的属性。使用`-P`，您只能设置*未*预定义的项目属性。或者，您可以设置 Java 系统属性 ( `-D`)。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-10-08T19:48:01.053

基于 Peter N 的回答，这是一个示例，说明如何添加（可选）用户指定的参数以传递给 Java 主用于 JavaExec 任务（因为他引用的原因，您不能手动设置“args”属性。）

将此添加到任务中：

```
task(runProgram, type: JavaExec) {

  [...]

  if (project.hasProperty('myargs')) {
      args(myargs.split(','))
  } 
```

...并像这样在命令行运行

```
% ./gradlew runProgram '-Pmyargs=-x,7,--no-kidding,/Users/rogers/tests/file.txt' 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-03-28T17:22:31.477

我的程序有两个参数，args[0] 和 args[1]：

```
public static void main(String[] args) throws Exception {
    System.out.println(args);
    String host = args[0];
    System.out.println(host);
    int port = Integer.parseInt(args[1]); 
```

我的 build.gradle

```
run {
    if ( project.hasProperty("appArgsWhatEverIWant") ) {
        args Eval.me(appArgsWhatEverIWant)
    }
} 
```

我的终端提示：

```
gradle run  -PappArgsWhatEverIWant="['localhost','8080']" 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2018-11-24T23:32:53.157

从 Gradle 4.9 开始，应用程序插件可以理解`--args`选项，因此传递参数非常简单：

*构建.gradle*

```
plugins {
    id 'application'
}

mainClassName = "my.App" 
```

*src/main/java/my/App.java*

```
public class App {
    public static void main(String[] args) {
        System.out.println(args);
    }
} 
```

*重击*

```
./gradlew run --args='This string will be passed into my.App#main arguments' 
```

或在 Windows 中，使用双引号：

```
gradlew run --args="This string will be passed into my.App#main arguments" 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2019-05-15T21:53:34.543

您可以在 Gradle 中使用自定义命令行选项：

```
./gradlew printPet --pet="Puppies!" 
```

自定义命令行选项是 Gradle 5.0 中的一个[孵化功能](https://docs.gradle.org/current/userguide/feature_lifecycle.html)，但在 Gradle 6.0 中公开。

# Java解决方案

[请按照此处](https://docs.gradle.org/current/userguide/custom_tasks.html#sec:declaring_and_using_command_line_options)的说明进行操作：

```
import org.gradle.api.tasks.options.Option;

public class PrintPet extends DefaultTask {
    private String pet;

    @Option(option = "pet", description = "Name of the cute pet you would like to print out!")
    public void setPet(String pet) {
        this.pet = pet;
    }

    @Input
    public String getPet() {
        return pet;
    }

    @TaskAction
    public void print() {
        getLogger().quiet("'{}' are awesome!", pet);
    }
} 
```

然后注册它：

```
task printPet(type: PrintPet) 
```

现在你可以这样做：

```
./gradlew printPet --pet="Puppies!" 
```

输出：

> 小狗！是真棒！

# Kotlin 解决方案

```
open class PrintPet : DefaultTask() {

    @Suppress("UnstableApiUsage")
    @set:Option(option = "pet", description = "The cute pet you would like to print out")
    @get:Input
    var pet: String = ""

    @TaskAction
    fun print() {    
        println("$pet are awesome!")
    }
} 
```

然后注册任务：

```
tasks.register<PrintPet>("printPet") 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-10-02T13:34:48.090

如果您需要检查并设置**一个参数**，您的`build.gradle`文件将如下所示：

```
....

def coverageThreshold = 0.15

if (project.hasProperty('threshold')) {
    coverageThreshold = project.property('threshold').toString().toBigDecimal()
}

//print the value of variable
println("Coverage Threshold: $coverageThreshold")
... 
```

以及 windows 中的 Sample 命令：

> gradlew clean test -Pthreshold=0.25

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-09-20T18:51:31.077

我编写了一段代码，将命令行参数置于 gradle 期望的格式中。

```
// this method creates a command line arguments
def setCommandLineArguments(commandLineArgs) {
    // remove spaces 
    def arguments = commandLineArgs.tokenize()

            // create a string that can be used by Eval 
            def cla = "["
            // go through the list to get each argument
            arguments.each {
                    cla += "'" + "${it}" + "',"
            }

    // remove last "," add "]" and set the args 
    return cla.substring(0, cla.lastIndexOf(',')) + "]"
} 
```

我的任务如下所示：

```
task runProgram(type: JavaExec) {
    if ( project.hasProperty("commandLineArgs") ) {
            args Eval.me( setCommandLineArguments(commandLineArgs) )
    }
} 
```

要从命令行传递参数，请运行以下命令：

```
gradle runProgram -PcommandLineArgs="arg1 arg2 arg3 arg4" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-04-16T16:32:25.113

这里有一个很好的例子：

[https://kb.novaordis.com/index.php/Gradle_Pass_Configuration_on_Command_Line](https://kb.novaordis.com/index.php/Gradle_Pass_Configuration_on_Command_Line)

您可以传递参数然后在 ext 变量中提供默认值的详细信息，如下所示：

```
gradle -Dmy_app.color=blue 
```

然后在 Gradle 中引用为：

```
ext {
   color = System.getProperty("my_app.color", "red");
} 
```

然后在您的构建脚本中的任何地方，您都可以将其作为课程引用，您可以在任何地方将其引用为`project.ext.color`

更多提示：[https ://kb.novaordis.com/index.php/Gradle_Variables_and_Properties](https://kb.novaordis.com/index.php/Gradle_Variables_and_Properties)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-12T16:53:50.353

这是 Kotlin DSL (build.gradle.kts) 的解决方案。

我首先尝试将变量作为属性获取，如果`null`尝试从操作系统环境变量中获取它。

```
tasks.create("MyCustomTask") {
    val songName = properties["songName"]
        ?: System.getenv("SONG_NAME")
        ?: error("""Property "songName" or environment variable "SONG_NAME" not found""")

    // OR getting the property with 'by'. Did not work for me!
    // For this approach, name of the variable should be the same as the property name
    // val songName: String? by properties

    println("The song name: $songName")
} 
```

然后我们可以从命令行传递一个属性值：

```
./gradlew MyCustomTask -PsongName="Black Forest" 
```

我们还可以添加一个以我们想要的值命名的环境变量`SONG_NAME`并运行任务：

```
./gradlew MyCustomTask 
```

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2016-04-01T07:16:05.863

从命令行传递一个 url 将你的 url 保存在 app gradle 文件中，如下 **resValue "string", "url", CommonUrl**

并在 gradle.properties 文件中提供如下参数 **CommonUrl="把你的 url 放在这里或者可能是空的"**

并从命令行传递一个命令，如下所示 **gradle assembleRelease -Pcommanurl=put your URL here**

# google-api - Google OAuth 2：令牌请求上的 response_type 错误

> ID：11696526
> 
> 赞同：10
> 
> 时间：2012-07-27T22:34:46.790
> 
> 标签：google-api, oauth-2.0

我正在尝试为 OAuth 响应令牌返回 OAuth 2 响应代码。但是，我的请求返回以下错误，该错误在 google 中的结果为零。我尝试更改`response_type`为“令牌”而不是“代码”，但这也不起作用。

> OAuth 2 参数只能有一个值：response_type

请求详情：

```
scope=https://www.googleapis.com/auth/userinfo.email
client_secret=_____
response_type=code
grant_type=authorization_code
redirect_uri=http://localhost/folder/
client_id=____.apps.googleusercontent.com
code=_____ 
```

我将此第二步有效载荷发送到`POST https://accounts.google.com/o/oauth2/auth`

**我的请求有什么问题？**

## 编辑

我刚刚意识到有`https://accounts.google.com/o/oauth2/token`应该用于此请求的 URL。但是，现在更改为该 URL 会给出：

```
HTTP/1.0 400 Bad Request
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Date: Fri, 27 Jul 2012 22:44:35 GMT
Content-Type: application/json
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE

{
  "error" : "invalid_request"
} 
```

## 编辑 2

像上面那样删除`response_type`和更改 URL 解决了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T22:51:23.770

收到授权码后，您必须向“/o/oauth2/token”询问访问令牌。此请求不接受“范围”和“响应类型”参数。有关更多详细信息，请参阅[Google 文档](https://developers.google.com/accounts/docs/OAuth2WebServer#handlingtheresponse)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T08:12:40.573

在尝试了几种方法后，进行 OAUTH2 调用所需的参数是 redirect_uri、response_type、scope、client_id。我根据收到的错误报告继续调试 oauth 调用。

# ajax - Yii ajax 回调

> ID：11696536
> 
> 赞同：1
> 
> 时间：2012-07-27T22:36:48.413
> 
> 标签：ajax, yii

我有一个依赖下拉列表，我通过 ajax 填充。我想在ajax完成后调用一个函数。我怎样才能做到这一点？

```
echo Chtml::dropDownList('optAudioSura', $strAudioSuraTemp, $suraOptions,
                            array(
                                'ajax' => array(
                                    'type'=>'POST', //request type
                                    'url'=>CController::createUrl('QuText/audioFiles'), //url to call.
                                    'update'=>'#optAudio', 
                                    'data'=>'js:jQuery(this).serialize()',
                                    )
                                )); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:54:54.157

向 ajax 添加成功函数，例如：

```
echo Chtml::dropDownList('optAudioSura', $strAudioSuraTemp, $suraOptions,
                        array(
                            'ajax' => array(
                                'type'=>'POST', //request type
                                'url'=>CController::createUrl('QuText/audioFiles'), //url to call.
                                'update'=>'#optAudio', 
                                'data'=>'js:jQuery(this).serialize()',
                                'success'=>'function(data) {
                                               // function code here
                                           }',
                                )
                            )); 
```

# php - PHP 内存缓存连接

> ID：11696546
> 
> 赞同：7
> 
> 时间：2012-07-27T22:37:59.237
> 
> 标签：php, memcached, scalability

我有一个页面，成千上万的用户可以同时点击一个方法。我确实有以下代码，我每次都连接。由于这将转到单独的内存缓存服务器，这会导致速度变慢有没有办法只连接一次并重用该连接？每次请求后我都必须关闭连接吗？

```
$primary_connected = $memcache_primary->connect($primary_memcache_server, 11211);
if($primary_connected){
        $data = $memcache_primary->get($key);
        if ($data != NULL) {
            return data;
        }
 }
else{
/////Get data from database 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T22:43:13.327

如果您使用的是[PHP memcached](http://php.net/memcached)类（`d`末尾带有 的，不是`memcache`），那么是的，您可以打开一个持久连接。

您可以将持久 ID 传递给将打开持久连接的构造函数，并且使用相同持久 ID 的后续实例将使用该连接。

```
$memcached = new Memcached('method_name_or_persistent_identifier');
$memcached->addServer(...);
// use it 
```

希望有帮助。

有关[`Memcached::__construct()`](http://www.php.net/manual/en/memcached.construct.php)更多详细信息，请参阅。

# javascript - 是否可以通过 Javascript 遍历 stdin 中的每个单词？

> ID：11696549
> 
> 赞同：1
> 
> 时间：2012-07-27T22:38:21.467
> 
> 标签：javascript, stdin, loops

我需要知道是否可以将通过 stdin 输入的每个单词迭代到使用 JavaScript 的程序中。如果是这样，我可以得到有关如何做到这一点的任何线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:27:22.103

使用[节点](http://nodejs.org/)：

```
var stdin = process.openStdin();
var buf = '';

stdin.on('data', function(d) {
    buf += d.toString(); // when data is received on stdin, stash it in a string buffer
                         // call toString because d is actually a Buffer (raw bytes)
    pump(); // then process the buffer
});

function pump() {
    var pos;

    while ((pos = buf.indexOf(' ')) >= 0) { // keep going while there's a space somewhere in the buffer
        if (pos == 0) { // if there's more than one space in a row, the buffer will now start with a space
            buf = buf.slice(1); // discard it
            continue; // so that the next iteration will start with data
        }
        word(buf.slice(0,pos)); // hand off the word
        buf = buf.slice(pos+1); // and slice the processed data off the buffer
    }
}

function word(w) { // here's where we do something with a word
    console.log(w);
} 
```

处理 stdin 比简单的字符串复杂得多，`split`因为 Node 将 stdin 呈现为 a [`Stream`](http://nodejs.org/api/stream.html#stream_stream)（它将输入数据块作为[`Buffer`](http://nodejs.org/api/buffer.html#buffer_buffer)s 发出），而不是字符串。（它对网络流和文件 I/O 做同样的事情。）

这是一件好事，因为标准输入可以任意大。考虑一下如果您将一个数 GB 的文件通过管道传输到您的脚本中会发生什么。如果它首先将标准输入加载到一个字符串中，它首先会花费很长时间，然后当你用完 RAM（特别是进程地址空间）时会崩溃。

通过将标准输入作为流处理，您能够以良好的性能处理任意大的输入，因为您的脚本一次只处理小块数据。缺点显然是增加了复杂性。

上面的代码适用于任何大小的输入，并且如果单词在块之间被切成两半，则不会中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:56:07.780

假设您使用的环境具有`console.log`并且标准输入是字符串，那么您可以执行此操作。

输入：

```
var stdin = "I hate to write more than enough.";

stdin.split(/\s/g).forEach(function(word){
    console.log(word)
}); 
```

输出：

```
I
hate
to
write
more
than
enough. 
```

# tsql - SQL Server - 当数据库生成主键时如何在 INSERTED 中查找记录

> ID：11696556
> 
> 赞同：1
> 
> 时间：2012-07-27T22:39:00.130
> 
> 标签：tsql, sql-server-2008-r2, identity

我以前从来没有在 StackOverflow 上发布过问题，因为我总是可以通过搜索在这里找到答案。只是这一次，我想我有一个真正的笨蛋......

* * *

我正在编写代码来自动化将数据从一个 SQL Server 数据库移动到另一个数据库的过程。我有一些非常标准的 SQL Server 数据库，它们的一些表之间具有外键关系。直截了当的东西。我的要求之一是需要一举复制整个表，而不是遍历行或使用游标。另一个要求是我必须在 SQL 中执行此操作，没有 SSIS 或其他外部助手。

例如：

```
INSERT INTO TargetDatabase.dbo.MasterTable 
SELECT * FROM SourceDatabase.dbo.MasterTable 
```

这很容易。然后，一旦移动了 MasterTable 中的数据，我就会移动子表的数据。

```
INSERT INTO TargetDatabase.dbo.ChildTable 
SELECT * FROM SourceDatabase.dbo.ChildTable 
```

当然，实际上我使用更明确的 SQL……就像我专门命名所有字段和类似的东西，但这只是一个简化版本。无论如何，到目前为止一切都很好，除了......

问题是主表的主键被定义为一个*身份*字段。因此，当我插入 MasterTable 时，新表的主键由数据库计算。因此，为了解决这个问题，我尝试使用 OUTPUT INTO 语句将更新的值放入 Temp 表中：

```
INSERT INTO TargetDatabase.dbo.MasterTable 
OUPUT INSERTED.* INTO @MyTempTable
SELECT * FROM SourceDatabase.dbo.MasterTable 
```

所以这就是一切崩溃的地方。由于数据库更改了主键，我到底如何确定临时表中的哪条记录与源表中的原始记录匹配？

你看到问题了吗？我知道新 ID 是什么，只是不知道如何可靠地将它与原始记录匹配。SQL 服务器允许我输出 INSERTED 值，但不允许我在 INSERTED 值旁边输出 FROM TABLE 值。我用触发器试过了，我用SP试过了，总是有同样的问题。

如果我一次只更新一条记录，我可以轻松地将我的 INSERTED 值与我试图插入的原始记录匹配以查看旧主键值和新主键值，但我有这个要求批量执行。

有任何想法吗？

PS：我不允许更改目标或源表的表结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:03:37.803

您可以使用[MERGE](http://technet.microsoft.com/en-us/library/bb510625.aspx?ppud=4)。

```
declare @Source table (SourceID int identity(1,2), SourceName varchar(50))
declare @Target table (TargetID int identity(2,2), TargetName varchar(50))

insert into @Source values ('Row 1'), ('Row 2')

merge @Target as T
using @Source as S
on 0=1
when not matched then
  insert (TargetName) values (SourceName)
output inserted.TargetID, S.SourceID; 
```

结果：

```
TargetID    SourceID
----------- -----------
2           1
4           3 
```

Adam Machanic 在这篇博文中介绍：[输出博士或：我如何学会停止担心并爱上 MERGE](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/24/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:46:53.403

为了说明我在评论中提到的内容：

```
SET IDENTITY_INSERT TargetDatabase.dbo.MasterTable  ON

INSERT INTO TargetDatabase.dbo.MasterTable  (IdentityColumn, OtherColumn1, OtherColumn2, ...)
SELECT IdentityColumn, OtherColumn1, OtherColumn2, ... 
FROM SourceDatabase.dbo.MasterTable  

SET IDENTITY_INSERT TargetDatabase.dbo.MasterTable  OFF 
```

好的，因为这对您不起作用（目标表中的预先存在的值），如何为两个表中的 id 值添加一个固定增量（偏移量）（使用当前的最大 id 值）。假设两个表中的标识列都是“id”：

```
DECLARE @incr int
BEGIN TRAN
SELECT @incr = max(id)
FROM TargetDatabase.dbo.MasterTable AS m WITH (TABLOCKX, HOLDLOCK)

SET IDENTITY_INSERT TargetDatabase.dbo.MasterTable ON

INSERT INTO TargetDatabase.dbo.MasterTable (id{, othercolumns...})
SELECT id+@incr{, othercolumns...}
FROM SourceDatabase.dbo.MasterTable

SET IDENTITY_INSERT TargetDatabase.dbo.MasterTable OFF

INSERT INTO TargetDatabase.dbo.ChildTable (id{, othercolumns...})
SELECT id+@incr{, othercolumns...} 
FROM SourceDatabase.dbo.ChildTable

COMMIT TRAN 
```

# mysql - MYSQL 计数不正确

> ID：11696557
> 
> 赞同：-1
> 
> 时间：2012-07-27T22:39:12.167
> 
> 标签：mysql, sql, count

```
SELECT
b.cID,
b.ID,
Count(r.userRead) AS readCount,
COUNT(DISTINCT r.userID) AS UserCount,
Count(c.userDownload) AS downloadCount,
COUNT(DISTINCT c.userID) AS userDownloadCount
FROM
 book AS b
  INNER JOIN book_event AS r ON r.bookID=s.ID AND r.bookRead = 1
  INNER JOIN book_event as c ON c.bookID=s.ID AND c.bookDownload = 1
WHERE
 b.cID = 1011
GROUP BY
 b.ID
ORDER BY
 b.ID DESC 
```

此 SQL 查询输出（计数的问题）

```
+-----------+-----+-----------+-----------------+--------------+-------------------+
| cID       | ID  | readCount | UserCount       | downloadCount| userDownloadCount |
+-----------+-----+-----------+-----------------+--------------+-------------------+
|      1011 | 278 |      3168 |              67 |         3168 |                19 |
|      1011 | 272 |      9918 |             122 |         9918 |                41 |
|      1011 | 241 |     31694 |              99 |        31694 |                38 |
+-----------+-----+-----------+-----------------+--------------+-------------------+
3 rows in set 
```

实际价值

```
+-----------+-----+-----------+-----------------+--------------+-------------------+
| cID       | ID  | readCount | UserCount       | downloadCount| userDownloadCount |
+-----------+-----+-----------+-----------------+--------------+-------------------+
|      1011 | 278 |       133 |              67 |           24 |                19 |
|      1011 | 272 |       174 |             122 |           57 |                41 |
|      1011 | 241 |       299 |              99 |          106 |                38 |
+-----------+-----+-----------+-----------------+--------------+-------------------+ 
```

book_event（表）

```
+-----+--------+----------+--------------+
| ID  | userID | userRead | userDownload |
+-----+--------+----------+--------------+
| 278 |   5169 | 1        | 0            |
| 278 |   5169 | 0        | 1            |
| ... |   .... | .        | .            |
| 278 |   5628 | 1        | 0            |
| 278 |   5162 | 1        | 0            |
+-----+--------+----------+--------------+ 
```

我需要将计数分组为两列。readCount 和 downloadCount 列不正确，但 UserCount、userDownloadCount 列的值正确。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:47:41.547

这是因为您在同一本书上有多个阅读和下载事件，因此您的查询正在生成事件的交叉积。

解决此问题的一个好方法是分别汇总信息。但是，您的查询提供了一个更简单的解决方案。只需加入 book_event 表一次，然后计算不同的事件。

```
SELECT b.cID, b.ID,
       sum(be.bookRead) as readCount,
       count(distinct case when be.bookRead = 1 then be.userId end) as UserCount,
       sum(be.userDownload) as downloadCount,
       count(distinct case when be.userDownload = 1 then be.userId end) as userDownloadCount
FROM book AS b INNER JOIN
     book_event be
     on be.bookID = s.ID
WHERE b.cID = 1011
GROUP BY b.ID, b.cid
ORDER BY b.ID DESC 
```

我将 b.cid 添加到 group by 子句中。在 GROUP BY 的 SELECT 子句中包含所有非聚合值是一种很好的形式。其他数据库强制执行此操作，并且规则是标准 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:50:51.237

我认为您的查询在技术上是错误的（按语法分组），但它与您的问题无关并且适用于 MySQL。

计数问题的最常见原因是没有正确考虑空值 - 但我认为这也不是你的问题。

尝试这个

```
SELECT 
b.cID, 
b.ID, 
sum(distinct coalesce(r.userRead,0)) AS readCount, 
count(DISTINCT r.userID) AS UserCount, 
sum(distinct coalesce(c.userDownload,0)) AS downloadCount, 
count(DISTINCT c.userID) AS userDownloadCount 
FROM 
 book AS b 
  left JOIN book_event AS r ON r.bookID=s.ID AND r.bookRead = 1 
  left JOIN book_event as c ON c.bookID=s.ID AND c.bookDownload = 1 
WHERE 
 b.cID = 1011 
GROUP BY 
 b.cID, b.ID 
ORDER BY 
 b.ID DESC 
```

# asp.net-mvc - 在实时环境中找不到asp.net mvc3路由

> ID：11696560
> 
> 赞同：0
> 
> 时间：2012-07-27T22:39:42.097
> 
> 标签：asp.net-mvc, routes

> **可能重复：**
> [ASP MVC3 - 发布后未找到 HttpPost 操作](https://stackoverflow.com/questions/9029714/asp-mvc3-httppost-action-not-found-after-publish)

我有一个`asp.net mvc3`在调试中完美运行的应用程序。但是，当我发布站点时，其中一条路由的状态为“404 Not Found”。

该路线是`ajax`呼叫的一部分，并像这样提供

```
url: '../Schedule/GetSched' 
```

Global.asax 文件是`MapRoute`这样的：

```
routes.MapRoute(
     "CalView2",
     "Schedule/GetSched",
     new { controller = "Schedule", action = "GetCalendar" }
); 
```

*   为什么它可以在调试中工作，但不能在已发布的站点上工作？
*   我可以提供哪些信息来帮助找到答案？
*   我什至从哪里开始寻找问题的根源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:52:54.397

当然，我在发布问题后立即找到了答案。

这篇文章解释了这一切： [ASP MVC3 - 发布后未找到 HttpPost 操作](https://stackoverflow.com/questions/9029714/asp-mvc3-httppost-action-not-found-after-publish)

# java - 如何在hadoop文件系统上为Java程序设置类路径

> ID：11696563
> 
> 赞同：5
> 
> 时间：2012-07-27T22:40:47.190
> 
> 标签：java, hadoop, classpath

我想弄清楚如何设置引用 HDFS 的类路径？我找不到任何参考。

```
 java -cp "how to reference to HDFS?" com.MyProgram 
```

如果我无法引用 hadoop 文件系统，那么我必须将所有引用的第三方库/jar 复制到每台 hadoop 机器上 $HADOOP_HOME 下的某个位置……但我想通过将文件放入 hadoop 文件系统来避免这种情况。这可能吗？

程序运行的示例hadoop命令行（我的期望是这样的，也许我错了）：

```
hadoop jar $HADOOP_HOME/contrib/streaming/hadoop-streaming-1.0.3.jar -input inputfileDir -output outputfileDir -mapper /home/nanshi/myprog.java -reducer NONE -file /home/nanshi/myprog.java 
```

但是，在上面的命令行中，我如何添加 java 类路径？比如 -cp "/home/nanshi/wiki/Lucene/lib/lucene-core-3.6.0.jar:/home/nanshi/Lucene/bin"

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T05:29:47.593

我想您正在尝试做的是在您的分布式程序中包含第三方库。你可以做很多选择。

选项 1) 我发现的最简单的选项是将所有 jar 放在所有节点上的 $HADOOP_HOME/lib（例如 /usr/local/hadoop-0.22.0/lib）目录中，然后重新启动 jobtracker 和 tasktracker。

选项 2) 为此使用 libjars 选项命令是 hadoop jar -libjars comma_seperated_jars

选项 3) 将 jars 包含在 jar 的 lib 目录中。在创建 jar 时，您必须这样做。

选项 4) 在您的计算机中安装所有 jar，并将它们的位置包含在类路径中。

选项 5）您可以尝试将这些 jar 放入分布式缓存中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T23:08:04.493

您不能将 HDFS 路径添加到您的类路径。java 可执行文件将无法解释如下内容：

```
hdfs://path/to/your/file 
```

*但是可以使用-libjars*选项将第三方库添加到需要这些库的每个任务的类路径中。这意味着您需要有一个所谓的驱动程序类（实现**工具**）来设置和启动您的工作，并在运行该驱动程序类时在命令行上使用 -libjars 选项。反过来，该工具使用 GenericParser 解析您的命令行参数（包括 -libjars），并在 JobClient 的帮助下完成所有必要的工作，将您的 lib 发送到所有需要它们的机器，并将它们设置在那些机器。

除此之外，为了运行 MR 作业，您应该使用位于您的发行版的 bin/ 目录中的 hadoop 脚本。

这是一个示例（使用包含您的作业和驱动程序类的 jar）：

```
 hadoop jar jarfilename.jar DriverClassInTheJar 
 -libjars comma-separated-list-of-libs <input> <output> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-08T07:04:07.057

您可以将 jar 路径指定为
-libjars hdfs://namenode/path_to_jar ，我已将其与 Hive 一起使用。

# php - 在加载器视图方法中获取控制器变量？

> ID：11696564
> 
> 赞同：0
> 
> 时间：2012-07-27T22:40:49.467
> 
> 标签：php, class, object, object-oriented-analysis

我正在构建一个脚本，它有一个静态类，用于加载一些东西，包括文件和视图。

```
class load
{
    public static function view($file_path, $area)
    {
        debug::log('getting view <b>' . $area . $file_path . '</b>.');
        ob_start();
        self::file($file_path, 'areas/' . $area . '/views');
        debug::log('flushing view <b>' . $area . $file_path . '</b>.');
        eturn ob_get_clean();
    }

    public static function file($file, $folder)
    {
        if(is_file($file_path = ROOT . '/' . $folder . '/' . $file)) 
        {
            if(require_once $file_path)
            {
                debug::log('file <b>' . $file_path . '</b> included.');
                return true;
            }
        }
        else
            debug::kill('requested file <b>' . $file_path . '</b> does not exist.');
    }   
} 
```

在控制器中我调用视图方法来获取视图：

```
$html = load::view('public', 'path/to/view/file.php'); 
```

显然，我无法使用这种做法从视图文件中的控制器访问变量，因此我对视图类进行了小修改以捕获变量：

```
public static function view($file_path, $area, $vars = array()) 
```

并添加以下代码行以将键放入 vars：

```
while(list($n_list_var,$v_list_var)=each($vars))
        $$n_list_var = $v_list_var; 
```

但是我再次无法访问变量，因为我使用一种方法来加载文件。

我有一种加载文件的方法，因为我想测试并记录每个文件包含尝试，而不是每次需要包含文件时都重复代码。而且我在加载器类中有加载器视图，因此我将所有此类方法放在一起。我应该放弃使用类来加载文件吗？我应该在控制器的可扩展类上使用加载器视图方法吗？

我不想继续修改我的整个脚本，我想听听一些意见……最好的做法是什么？或者有没有办法解决我的问题？也许使用 __set 和 __get 魔术方法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:01:20.003

为什么不直接将`$vars`参数传递给`load::file()`and `extract( $vars )`（可能将您在内部使用的变量移动`file()`到类变量中以防止它们被覆盖）？

我建议使用`extract()`而不是：

```
while(list($n_list_var,$v_list_var)=each($vars))
    $$n_list_var = $v_list_var; 
```

顺便说一句，给你的班级命名是个好主意`Load`。

# java - 用元素填充 Android 布局

> ID：11696565
> 
> 赞同：0
> 
> 时间：2012-07-27T22:41:26.533
> 
> 标签：java, android, android-layout, layout

为了澄清这一点 - 我想做的是：

a) 打开一个http请求获取一些XML

b) 解析该 XML

c) 给定（固定）数量的元素，在布局中将它们与 bucle 放在一起。

我缺少的是最后一部分。一个例子是“twicca”或只是官方的 Twitter 应用程序，它用推文填充布局。我想做这样的事情。我应该如何进行？

我的第一个想法是创建固定数量的 TextView 并用我希望的内容更改那些 TextView (TextView1, TextView2, ...)。但这听起来不是很专业...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:57:51.463

在 Android 中执行此操作的标准方法是使用[ListView（链接到开发人员指南）](http://developer.android.com/guide/topics/ui/layout/listview.html)，它会根据数据源的需要自动创建尽可能多的项目。大多数示例显示从本地 SQLite 数据库中提取，但是在将 XML 项加载到内存中的数组后，您可以使用[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)作为 ListView 的数据源。

# php - 在 mac 10.5.8 上更新 php 版本

> ID：11696568
> 
> 赞同：0
> 
> 时间：2012-07-27T22:41:36.620
> 
> 标签：php, macos

我试图在 Macbook 版本 10.5.8 上运行 CMS 系统，太旧了。CMS 说它需要 PHP 5.3.2 或更高版本。我想知道如何更新 PHP 版本？我已经下载了该版本，但不知道解压缩后如何处理该文件夹。

任何帮助都会很棒，我比 Mac 更多的 PC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:02:47.540

您可以尝试为 Mac 安装 XAMPP：http: [//www.apachefriends.org/en/xampp-macosx.html——](http://www.apachefriends.org/en/xampp-macosx.html)它只需要 OS 10.4。仅供参考，启动终端并输入`php -v`以查看当前的 PHP 版本。Mac OS 没有内置 MYSQL，所以无论如何你都需要像 XAMPP 这样的东西来运行你的 CMS。

我自己使用 MAMP，但这需要 OS 10.6.x

# sockets - 在 TCP/IP 连接上设置源端口/IP

> ID：11696572
> 
> 赞同：0
> 
> 时间：2012-07-27T22:42:14.263
> 
> 标签：sockets, tcp, winsock, winsock2

我已经设置了一个 TCP/IP 客户端/服务器连接，每次交换请求时都会打开和关闭连接。它完美地工作；客户端应用程序打开连接，发送请求并等待。服务器应用程序接收到请求产生响应并将其发送回并关闭连接。客户端和服务器应用程序会这样做数百次。

现在我正试图进行下一步：设置源 IP 地址和端口。

该代码应该可以在 Linux 和 Windows 上运行，所以 SO_BINDTODEVICE 是毫无疑问的，因为它只在 Linux/Unix 上受支持。

我试图在客户端套接字上绑定源端口和 ANYADRR。它起作用了……有一段时间了。最终它thorws错误10038。我在互联网上阅读了几篇文章，但没有明确的答案......源IP的选择仍然不清楚。

请注意，我在同一个库（无连接 UDP 通信模式）上还有一个单播和多播模式，一个发送者和接收者，我能够在多播模式下设置源端口/IP，单播我没有尝试然而。

无论如何，有人知道有什么可以帮助的吗？我正在使用 WinSock 2.2 并尝试尽可能多地独立于平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:23:39.743

Winsock 错误`10038`是`WSAENOTSOCK`，这意味着您的代码中某处存在错误。您正在尝试使用`SOCKET`未指向有效套接字对象的句柄执行某些操作。`bind()`这与函数本身无关。您正在调用`socket()`但未检查其结果是否有错误，或者您正在尝试使用`SOCKET`已被您的应用程序关闭的句柄，或者您在某处出现内存溢出损坏了您的`SOCKET`句柄。

# php - 实时自动更新的 jQuery/Javascript 计算器（猜测 AJAX）

> ID：11696577
> 
> 赞同：2
> 
> 时间：2012-07-27T22:43:00.810
> 
> 标签：php, javascript, jquery, ajax, forms

我正在寻找创建一个非常简单的计算器，但我需要它在每次击键时更新。我似乎在该特定类别中找不到任何东西。谁能指出我正确的方向？

我正在寻找类似 A*1.325 + B*3.76 的东西，其中 B 是下拉菜单，A 是人们将要填写的文本字段。每次更改下拉菜单或在文本框中注册击键时。

我也会尝试做一些正则表达式，只允许数字或小数点！

非常感谢各位！！！

PS。将使用 PHP/HTML 创建表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:59:24.533

步骤1：

做 jQuery 教程。有趣有趣 :D :D :D [http://docs.jquery.com/Tutorials](http://docs.jquery.com/Tutorials)

第2步：

现在您了解了 jQuery，请注意 jQuery 支持一堆事件处理程序。例如，您可以将点击事件分配给类似于下拉菜单中的项目的内容：

```
$("itemInMyDropDownMenu").click(function(e) {
    doSomeCalculation(parseFloat(this.val()));
} 
```

第 3 步：

选择要使用的正确事件处理程序。`click`（对于下拉菜单）和`keyup`（对于文本字段）听起来充满希望。

第4步：

继续修修补补。你根本不需要 PHP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T23:04:45.813

第一个问题。如果您只需要简单的计算器，为什么还需要 AJAX？AJAX 可以向网页和脚本发送请求，并获取 XML、JSON、html 或简单文本响应。

如果您仍然需要 AJAX，请阅读[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

**实时更新：** 设置要使用的元素的 ID。创建适当的处理程序，该处理程序在字段更改时调用。

```
<input type="text" id="field" value="" onChange="javascript: setA(this)"/>

function setA(obj){
  var a = 0 ;
  if (obj.value)
    a = obj.value ;
   //call any function to calculate anything and send a.
} 
```

如果你想显示一些东西，这里的 id 就派上用场了。

```
<div id="result"></div>
document.getElementById("result").innerHTML = 345 ; //just set to what you need 
```

您可以在不提交表单的情况下充分利用 javascript 构建简单的计算器，因为它可以实时工作。

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T22:55:16.217

在等待回音时，我做了一些研究，发现了一些我认为可以满足我所寻找的代码的代码。整个事情我都想多了！！

```
<html>
<head>
</head>
<body>
<script>
function doMath() {
    var totalparts = parseInt(document.getElementById('parts_input').value);
    var labor = parseInt(document.getElementById('labor_input').value);
    var misc = parseInt(document.getElementById('misc_input').value);
    var subtotal = totalparts + labor + misc;
    var tax = subtotal * .13;
    var total = subtotal + tax;

    document.getElementById('subtotal_input').value = subtotal;
    document.getElementById('tax_input').value = tax;
    document.getElementById('total_input').value = total;
}
</script>

<div>Total Parts: <input type="text" id="parts_input" value="1" readonly="true" /></div>
<div>Labor: <input type="text" id="labor_input" onBlur="doMath();" /></div>
<div>Misc: <input type="text" id="misc_input" onBlur="doMath();" /></div>
<div>Sub Total: <input type="text" id="subtotal_input" readonly="true" /></div>
<div>Tax: <input type="text" id="tax_input" readonly="true" /></div>
<div>Total: <input type="text" id="total_input" readonly="true" /></div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:52:56.560

为此，您不需要也不应该使用 AJAX。相反，您应该这样做：

```
$("#textfieldID, #dropDownMenuID").change(function() {
    var aVal = $("#textFieldID").val() == "" ? 0 : parseFloat($("#textFieldID").val());
    var bVal = $("#dropDownMenuID").val() == "" ? 0 : parseFloat($("#dropDownMenuID").val());
    $("#answerID").text((aVal*1.325 + bVal*3.76).toString());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T22:56:49.073

你试过`onchange="calculator()"`吗？

# grails - Grails 2.1 在 JBoss 上禁用 log4j 配置

> ID：11696579
> 
> 赞同：1
> 
> 时间：2012-07-27T22:43:14.507
> 
> 标签：grails, jboss, log4j

我们最近将我们的应用程序从 Grails 1.3.7 升级到了 2.1，它在 maven 下构建，并对 grails 的 pom 文件和其他与配置和构建相关的文件进行了大量更改，以使事情正常运行。

**这就是问题所在：**当我们的 JBoss 服务器部署我们的 grails war 文件时，似乎有一些东西会导致 log4j 被重新配置，以至于 appserver 从那时起停止所有日志记录（对于任何类）。应用服务器仍然运行良好，但在此行之后没有日志记录：

```
INFO  [org.jboss.web.tomcat.service.deployers.TomcatDeployment] (main) deploy, ctxPath=/our-app 
```

删除我们的 war 文件并重新启动服务器会显示正确的日志记录。

我们的应用服务器有一个`server/default/conf/jboss-log4j.xml`文件，我们在其中指定我们的跨应用 log4j 配置。

我已经尝试从我们的战争中删除 log4j 和 slf4j jar 文件，因为这在过去引起了问题，但这次并没有解决问题。

我还注释掉了可能是罪魁祸首的整个思考`log4j`部分，但这没有任何效果。`grails-app/Config.groovy`

我还尝试删除 grails log4j 插件（通过在 pom 中将其标记为“提供”范围），但这会在部署期间导致以下错误：

```
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/out-app]] (main) Error configuring application listener of class org.codehaus.groovy.grails.plugins.log4j.web.util.Log4jConfigListener
    java.lang.ClassNotFoundException: org.codehaus.groovy.grails.plugins.log4j.web.util.Log4jConfigListener 
```

**知道我可能错过了什么吗？**

我的战争文件的缩写列表如下：

```
WEB-INF/applicationContext.xml
WEB-INF/classes/BootStrap.class
WEB-INF/classes/BuildConfig.class
WEB-INF/classes/Config.class
WEB-INF/classes/DataSource.class
WEB-INF/classes/HibernateGrailsPlugin.class
WEB-INF/classes/UrlMappings.class
WEB-INF/classes/application.properties
WEB-INF/classes/gsp/views.properties
WEB-INF/classes/resources.class
WEB-INF/grails.xml
WEB-INF/jboss-web.xml
WEB-INF/lib/antlr-2.7.7.jar
WEB-INF/lib/aopalliance-1.0.jar
WEB-INF/lib/aspectjrt-1.6.10.jar
WEB-INF/lib/aspectjweaver-1.6.10.jar
WEB-INF/lib/cglib-2.2.jar
WEB-INF/lib/commons-beanutils-1.8.3.jar
WEB-INF/lib/commons-codec-1.5.jar
WEB-INF/lib/commons-collections-3.2.1.jar
WEB-INF/lib/commons-dbcp-1.4.jar
WEB-INF/lib/commons-el-1.0.jar
WEB-INF/lib/commons-fileupload-1.2.2.jar
WEB-INF/lib/commons-io-2.0.1.jar
WEB-INF/lib/commons-lang-2.6.jar
WEB-INF/lib/commons-pool-1.5.6.jar
WEB-INF/lib/commons-validator-1.3.1.jar
WEB-INF/lib/concurrentlinkedhashmap-lru-1.2_jdk5.jar
WEB-INF/lib/dom4j-1.6.1.jar
WEB-INF/lib/ehcache-core-2.4.6.jar
WEB-INF/lib/encryption-1.0.jar
WEB-INF/lib/ezmorph-1.0.6.jar
WEB-INF/lib/grails-bootstrap-2.1.0.jar
WEB-INF/lib/grails-core-2.1.0.jar
WEB-INF/lib/grails-crud-2.1.0.jar
WEB-INF/lib/grails-datastore-core-1.0.9.RELEASE.jar
WEB-INF/lib/grails-datastore-gorm-1.0.9.RELEASE.jar
WEB-INF/lib/grails-datastore-simple-1.0.9.RELEASE.jar
WEB-INF/lib/grails-hibernate-2.1.0.jar
WEB-INF/lib/grails-logging-2.1.0.jar
WEB-INF/lib/grails-plugin-codecs-2.1.0.jar
WEB-INF/lib/grails-plugin-controllers-2.1.0.jar
WEB-INF/lib/grails-plugin-converters-2.1.0.jar
WEB-INF/lib/grails-plugin-datasource-2.1.0.jar
WEB-INF/lib/grails-plugin-domain-class-2.1.0.jar
WEB-INF/lib/grails-plugin-filters-2.1.0.jar
WEB-INF/lib/grails-plugin-gsp-2.1.0.jar
WEB-INF/lib/grails-plugin-i18n-2.1.0.jar
WEB-INF/lib/grails-plugin-log4j-2.1.0.jar
WEB-INF/lib/grails-plugin-mimetypes-2.1.0.jar
WEB-INF/lib/grails-plugin-scaffolding-2.1.0.jar
WEB-INF/lib/grails-plugin-services-2.1.0.jar
WEB-INF/lib/grails-plugin-servlets-2.1.0.jar
WEB-INF/lib/grails-plugin-url-mappings-2.1.0.jar
WEB-INF/lib/grails-plugin-validation-2.1.0.jar
WEB-INF/lib/grails-resources-2.1.0.jar
WEB-INF/lib/grails-spring-2.1.0.jar
WEB-INF/lib/grails-web-2.1.0.jar
WEB-INF/lib/grails-webflow-2.1.0.jar
WEB-INF/lib/groovy-all-1.8.6.jar
WEB-INF/lib/hibernate-ehcache-3.6.10.Final.jar
WEB-INF/lib/hibernate-jpa-2.0-api-1.0.1.Final.jar
WEB-INF/lib/hibernate-validator-4.1.0.Final.jar
WEB-INF/lib/http-builder-0.5.0-RC3.jar
WEB-INF/lib/httpclient-4.0.jar
WEB-INF/lib/httpcore-4.0.1.jar
WEB-INF/lib/json-lib-2.3-jdk15.jar
WEB-INF/lib/jstl-1.1.2.jar
WEB-INF/lib/nekohtml-1.9.9.jar
WEB-INF/lib/oro-2.0.8.jar
WEB-INF/lib/sitemesh-2.4.jar
WEB-INF/lib/spring-aop-3.1.0.RELEASE.jar
WEB-INF/lib/spring-asm-3.1.0.RELEASE.jar
WEB-INF/lib/spring-aspects-3.1.0.RELEASE.jar
WEB-INF/lib/spring-beans-3.1.0.RELEASE.jar
WEB-INF/lib/spring-context-3.1.0.RELEASE.jar
WEB-INF/lib/spring-context-support-3.1.0.RELEASE.jar
WEB-INF/lib/spring-core-3.1.0.RELEASE.jar
WEB-INF/lib/spring-expression-3.1.0.RELEASE.jar
WEB-INF/lib/spring-jdbc-3.1.0.RELEASE.jar
WEB-INF/lib/spring-jms-3.1.0.RELEASE.jar
WEB-INF/lib/spring-orm-3.1.0.RELEASE.jar
WEB-INF/lib/spring-tx-3.1.0.RELEASE.jar
WEB-INF/lib/spring-web-3.1.0.RELEASE.jar
WEB-INF/lib/spring-webmvc-3.1.0.RELEASE.jar
WEB-INF/lib/util-io-1.2-SNAPSHOT.jar
WEB-INF/lib/utils-1.07.00.jar
WEB-INF/lib/validation-api-1.0.0.GA.jar
WEB-INF/lib/xml-resolver-1.2.jar
WEB-INF/lib/xpp3_min-1.1.4c.jar
WEB-INF/lib/zdecimal-3.2.jar
WEB-INF/plugins/hibernate-2.1.0/grails-app/i18n/messages.properties
WEB-INF/plugins/hibernate-2.1.0/plugin.xml
WEB-INF/sitemesh.xml
WEB-INF/web.xml 
```

和 Config.groovy（删除了特定于应用程序的内容）：

```
grails.project.groupId = appName // change this to alter the default package name and Maven publishing destination
grails.mime.file.extensions = true // enables the parsing of file extensions from URLs into the request format
grails.mime.use.accept.header = false
grails.mime.types = [
    all:           '*/*',
    atom:          'application/atom+xml',
    css:           'text/css',
    csv:           'text/csv',
    form:          'application/x-www-form-urlencoded',
    html:          ['text/html','application/xhtml+xml'],
    js:            'text/javascript',
    json:          ['application/json', 'text/json'],
    multipartForm: 'multipart/form-data',
    rss:           'application/rss+xml',
    text:          'text/plain',
    xml:           ['text/xml', 'application/xml']
]
grails.resources.adhoc.patterns = ['/images/*', '/css/*', '/js/*', '/plugins/*']
grails.views.default.codec = "none" // none, html, base64
grails.views.gsp.encoding = "UTF-8"
grails.converters.encoding = "UTF-8"
grails.views.gsp.sitemesh.preprocess = true
grails.scaffolding.templates.domainSuffix = 'Instance'
grails.json.legacy.builder = false
grails.enable.native2ascii = true
grails.logging.jul.usebridge = true
grails.spring.bean.packages = []
grails.hibernate.cache.queries = false
environments {
    production {
        grails.logging.jul.usebridge = false
    }
    development {
        grails.logging.jul.usebridge = true
    }
    test {
        // shouldn't be using this environment
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T00:44:21.540

通过一些调试断点，我能够确定 Grails log4j 插件是罪魁祸首。它似乎在启动时重置全局 log4j 配置。

![grails log4j 插件重置配置](../Images/cccd08669d3f45aaf61578c69bd9b156.png)

我会问一个关于如何禁用它的单独问题。

*   请参阅[如何在 grails 中禁用 log4j 插件？](https://stackoverflow.com/questions/11731730/how-do-disable-log4j-plugin-in-grails)

# android - 安卓键盘问题

> ID：11696581
> 
> 赞同：1
> 
> 时间：2012-07-27T22:43:22.990
> 
> 标签：android, commonsware

这是一个关于 android SIP 的问题（这就是我们在 WP7 上所说的）。请参阅[https://dl.dropbox.com/u/39662979/AndroidEmulator.png](https://dl.dropbox.com/u/39662979/AndroidEmulator.png)上的剪辑。

这是关于 android 开发的 commonsware 书中的一个演示应用程序。它显示经度和纬度的文本框，并显示允许输入数字 0 - 9\. * 和 # 的键盘。当然，经度通常需要一个负数，但是如何输入减号？我已经尝试了所有其他键 - 我能够调出其他字符集但没有减号。

这本书显示一个减号被输入但躲避我。谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T08:29:23.280

在我的 Galaxy S3 上遇到了类似的问题：库存三星键盘的数字小键盘显示数字 0 到 9 加上一个带有句点和减号组合的键：.- 我花了很长时间才发现减号需要双击，而不是长按。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:46:16.927

> 这意味着程序无法正常运行

如果您在配置为英语的设备或模拟器上运行应用程序，则有一个键，用英语称为“减号”（键盘上的右上角按钮）标记，可以否定键入的数字进入`EditText`：

![在此处输入图像描述](../Images/296f9e9646fb73b14b6eda39b5d4e538.png)

您会注意到，在您的屏幕截图中，键盘有所不同：

![在此处输入图像描述](../Images/6448ed976adb4fbd663eb7d284c35de2.png)

部分原因是您的模拟器未配置为英语。它是为其他语言配置的。您可以看出这一点，因为某些键上有中文、日文或一些类似的字符集。

我不确切知道您的设备或模拟器配置为哪种语言。我不知道这些键中的一个是否是否定的，或者导致提供否定的辅助键盘。我的猜测是左下角的键会切换到备用键集，但这只是猜测。

我的建议是让您将模拟器配置为您说的语言。那么，也许键盘对你来说会更容易理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:21:00.703

由于您的语言设置，您的键盘可能没有“-”。我建议您在测试时通过设备设置添加另一个键盘（可能是美式键盘）并切换到美式键盘。

# javascript - Notepad++ 中更好的 Javascript 语法高亮

> ID：11696582
> 
> 赞同：11
> 
> 时间：2012-07-27T22:43:26.003
> 
> 标签：javascript, syntax-highlighting, notepad++

我正在使用 Notepad++ 编写 Javascript 文件。但是那里的语法突出显示并不是那么好。

例如，已知对象（如数组、数字甚至 AJAX 对象）的方法和属性根本不会突出显示。

这可以通过添加插件或其他东西来改善吗？如果可以，您可以为我指定一个插件吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T22:52:32.750

在 Notepad++ 中，您可以转到插件选项卡，然后转到插件管理器，它将显示所有可用和已安装的插件。只需向下滚动列表，直到找到适合您需要的列表并安装它。如果您没有在列表中看到它，我认为您不会在其他任何地方找到它。

# mysql - 更改表命令 MYSQL 后的“更新触发器”

> ID：11696583
> 
> 赞同：0
> 
> 时间：2012-07-27T22:43:29.733
> 
> 标签：mysql, triggers, alter, ddl-trigger

我想知道在 MYSQL 中是否可以在更改表命令之后“更新触发器”（删除并重新创建）？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:45:41.693

不，不是自动的。您只需要手动完成即可。不幸的是，information_schema.TRIGGERS 表也没有任何创建/更改日期时间，因此您甚至无法编写一个 SQL 脚本来识别您可能需要重新创建哪些触发器。

# android - 在 ListView 中显示照片，如何在用户看到列表之前让适配器预加载？

> ID：11696584
> 
> 赞同：3
> 
> 时间：2012-07-27T22:43:29.050
> 
> 标签：android

我需要在列表视图中显示一些照片，这些照片是从列表视图中的 url 中提取的。不幸的是，下载时间存在一些差异。实际下载是在 ListView 的适配器中完成的。这些下载是runOnUIThread。（是的，我知道这是可怕的设计）。所以发生的事情是下载完成时正在显示图像，这导致图像显示缓慢且有点混乱，尽管我正在缓存它们。

我打算重写逻辑，但与此同时，我想知道在实际需要显示照片之前让适配器采取行动。换句话说，我想在我真正打算向用户显示列表之前运行适配器。我怎样才能做到这一点？我希望在用户看到列表之前进行此下载。

换句话说，我需要在用户可以看到列表之前运行适配器中的以下方法：

```
 public View getView(final int position, View convertView, ViewGroup parent) 
 {
     // Inside here I am requesting the photo bitmap from url and setting to ImageView.
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:36:40.087

### 选项 1：在适配器的构造函数中预加载

在适配器的构造函数中，遍历集合列表并将图像发送到您的图像下载器以开始下载。您可以从前 5-10 个开始，或者最多 50 个。如果您的用户可能使用手机，请注意他们的带宽速度/成本，并将您的预加载限制在 20 个左右。

```
/** Constructor of MyAdapter extends ArrayAdapter<Item> */
public MyAdapter(Context context, List<Item> items) {
  super(context, 0, items);

  int limit = Math.min(10, items.size());
  for (int i = 0; i < limit; i++) {
    // don't fetch by position if `items` doesn't support random access
    AsyncImageLoader.prefetchImage(items.get(i).getImageUrl());
  }
} 
```

-*和/或*-

### 选项 2：加载一行时，预加载接下来的几行

在adapter的getView中，预加载下几个item的图片；例如

```
public View getView(int position, View convertView, ViewGroup parent) {
  int limit = Math.min(position + 4, getCount());
  for (int i = position; i < limit; i++) {
    AsyncImageLoader.prefetchImage(getItem(i).getImageUrl());
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T23:31:56.283

实际上，您的列表视图中有`getAdapter`和`setAdapter`接口。在您的情况下，更好的主意是预先创建适配器（创建您自己的`BaseAdapter`）并告诉它开始下载图像。当您决定显示您的列表视图时 - 只需调用`setAdapter`并传递您的适配器。

顺便说一句，每当您有新数据时，请不要忘记`notifyDataSetChanged()`从您的适配器调用。另请注意，所有数据更新都应在 ui 线程中进行；）

这是您设计的最简单解决方案:)。让我知道您对其他选项感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-07T07:05:08.363

您可以使用[picasso 库为 android](http://square.github.io/picasso/)。这是一个很好的图片下载库。您可以使用此代码在适配器中预加载图像。

```
public View getView(int position, View convertView, ViewGroup parent) {

  // Create your view here

  int lastImagePosition = Math.min(position + 4, getCount());

  for (int i = position + 1; i < lastImagePosition; ++i) {
    Picasso.with(getContext()).load(getItem(i)); //getItem() - if your adapter data are image urls
  }

  return createdView;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-13T06:40:14.227

Frescolib 是列表视图中图像的最佳解决方案。如果您只想下载图像并显示它，Fresco 将显示一个占位符，直到它出现。 [http://frescolib.org/docs/getting-started.html#_](http://frescolib.org/docs/getting-started.html#_)

看看实现起来有多容易。

在您的 XML 中，将自定义命名空间添加到顶级元素

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:fresco="http://schemas.android.com/apk/res-auto"
    android:layout_height="match_parent"
    android:layout_width="match_parent"> 
```

然后将 SimpleDraweeView 添加到布局中

```
<com.facebook.drawee.view.SimpleDraweeView
    android:id="@+id/my_image_view"
    android:layout_width="130dp"
    android:layout_height="130dp"
    fresco:placeholderImage="@drawable/my_drawable"
  /> 
```

要显示图像，您只需执行以下操作：

```
Uri uri = Uri.parse("https://raw.githubusercontent.com/facebook/fresco/gh-pages/static/fresco-logo.png");
SimpleDraweeView draweeView = (SimpleDraweeView) findViewById(R.id.my_image_view);
draweeView.setImageURI(uri); 
```

Fresco 完成剩下的工作。

占位符会一直显示，直到图像准备好。当您的视图离开屏幕时，图像将被下载、缓存、显示并从内存中清除。

# objective-c - Objective C 2008 中的代码无法编译

> ID：11696588
> 
> 赞同：0
> 
> 时间：2012-07-27T22:44:01.417
> 
> 标签：objective-c, xcode

我正在通过阅读“Objective C For Dummies”来学习 Objective-C 的基础知识。我正在使用 XCode 4.4，并且试图让一些简单的代码工作。这个问题之前网上有人提过。*但是*- 代码似乎无法使用新版本的 XCode 进行编译。

问题似乎是 NSLog (@"Here is some wonderful text! %i",c); 这会引发“预期表达式”错误。根据之前的表格发布，我已禁用首选项中的自动参考检查，但这仍然失败。

```
#include <stdio.h>

int main(int argc, const char * argv[])
{

    //declare variables
    int a;
    int b;
    int c;

    //set the variables
    a = 2;
    b = 3;

    //Perform the computations
    c = a % b;

    //Output the results
    NSLog (@"Here is some amazing text! %c",c);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:50:51.990

`#import <Foundation/Foundation.h>`在顶部添加，并将其更改`NSLog`为：

```
NSLog (@"Here is some amazing text! %d",c); 
```

因为`%c`并不意味着“一个名为`c`”的变量，而是一个`char`. `%d`表示一个`int`，这就是`c`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T22:48:56.263

您忘记包含 Foundation 标头：

```
#import <Foundation/Foundation.h> 
```

旁注：格式说明符应为`%d`.

# c# - 为 columnSpan 制作转换器

> ID：11696593
> 
> 赞同：0
> 
> 时间：2012-07-27T22:45:30.103
> 
> 标签：c#, windows-phone-7, xaml

我想动态地在 userControl 上做 columnSpan。我创建了转换器类，但它不起作用。你能告诉我如何正确地做吗？谢谢。

我的用户控件上的代码：

```
<TextBlock  x:Name="txtSumary" Grid.Row="0" Grid.Column="1" Text="{Binding summary}"           
   TextWrapping="Wrap"  Style="{StaticResource PhoneTextAccentStyle}" Grid.ColumnSpan="{Binding isSpan, Converter={StaticResource ColumSpanConverter}}"  /> 
```

它是 UserControl.Resources 上的参考

```
<local:VisibilityConverter x:Key="ColumSpanConverter"/> 
```

有转换器类：

```
 public class ColumSpanConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {          
        bool isSpan = (bool)value;
        return isSpan ? 2 : 0;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:56:10.027

转换器引用了错误的转换器：

```
<local:VisibilityConverter x:Key="ColumSpanConverter"/> 
```

应该：

```
<local:ColumSpanConverter x:Key="ColumSpanConverter" /> 
```

# objective-c - 调用方法时 ASIHTTPREQUEST 框架编译错误/链接错误

> ID：11696598
> 
> 赞同：0
> 
> 时间：2012-07-27T22:46:39.050
> 
> 标签：objective-c, ios, asihttprequest, xcode4.3

我正在尝试使用 ASIHTTPREQUEST 库编译一个项目。

我按照说明操作并链接到所有必要的库，并且没有收到任何非编译错误的错误...我被允许尝试编译该项目。

只有当我尝试在我的 .m 中使用此代码时才会出现问题

> NSURL *colorURL = [NSURL URLWithString:@"http://www.colourlovers.com/api/colors?format=json"]; ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:colorURL]; [请求 setDelegate:self]; [请求启动异步];

从本教程：http: [//ios-blog.co.uk/tutorials/parsing-json-on-ios-with-asihttprequest-and-sbjson/](http://ios-blog.co.uk/tutorials/parsing-json-on-ios-with-asihttprequest-and-sbjson/)

> ld /Users/johndoe/Library/Developer/Xcode/DerivedData/round5-bdubuaqrmfeeujdoabfnpkzsctpa/Build/Products/Debug-iphonesimulator/round5.app/round5 normal i386 cd /Users/johndoe/Documents/apps/iphone/corelocationtest/round5 setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin: /usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator。平台/开发者/SDKs/iPhoneSimulator5.1。sdk -L/Users/johndoe/Library/Developer/Xcode/DerivedData/round5-bdubuaqrmfeeujdoabfnpkzsctpa/Build/Products/Debug-iphonesimulator -F/Users/johndoe/Library/Developer/Xcode/DerivedData/round5-bdubuaqrmfeeujdoabfnpkzsctpa/Build/Products/ Debug-iphonesimulator -filelist /Users/johndoe/Library/Developer/Xcode/DerivedData/round5-bdubuaqrmfeeujdoabfnpkzsctpa/Build/Intermediates/round5.build/Debug-iphonesimulator/round5.build/Objects-normal/i386/round5.LinkFileList -mmacosx-版本-min = 10。6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -lz -framework CFNetwork -framework SystemConfiguration -framework MobileCoreServices -framework CoreLocation -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/johndoe/ Library/Developer/Xcode/DerivedData/round5-bdubuaqrmfeeujdoabfnpkzsctpa/Build/Products/Debug-iphonesimulator/round5.app/round5 架构 i386 的未定义符号：“_OBJC_CLASS_$_ASIHTTPRequest”，引用自：round5ViewController.o ld 中的 objc-class-ref ：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）_OBJC_CLASS_$_ASIHTTPRequest”，引用自：round5ViewController.o 中的 objc-class-ref ld：未找到体系结构 i386 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）_OBJC_CLASS_$_ASIHTTPRequest”，引用自：round5ViewController.o 中的 objc-class-ref ld：未找到体系结构 i386 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我不明白这个错误是什么意思：

> 架构 i386 的未定义符号：“_OBJC_CLASS_$_ASIHTTPRequest”，引用自：round5ViewController.o 中的 objc-class-ref ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

真的迷路了……请帮忙！！

PS：我查看了堆栈溢出的其他一些线程，但它们没有引用相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:02:05.387

没关系！！！

重复： [当我使用 ASIHTTPRequest 和 SBJSON 时，iOS 5.1 出错](https://stackoverflow.com/questions/10073273/error-with-ios-5-1-when-i-use-asihttprequest-and-sbjson)

“我会看一下目标中的构建阶段部分。在“编译源”下，确保看到 ASIHTTPRequest 和 SBJson 的 .m 文件。有时当您将外部类拖到项目中时，即使您检查了框将文件复制到您的项目中，它们不会将其放入这些编译源中。当您将文件拖到 Xcode 中时，有一个复选框可以将文件添加到目标。如果未选中，则文件不会进入编译源。删除文件并重新添加它们，确保检查此文件（或者如果您愿意，可以手动添加 .m 文件）。

通过 jmstone

# php - 在 PHP 中替换字符串中相似但不同的部分？

> ID：11696599
> 
> 赞同：3
> 
> 时间：2012-07-27T22:46:46.290
> 
> 标签：php, string, replace, echo

所以我抓住了一个字符串（通常是一个图像位置）。理想情况下，我希望它永远是

```
http://www.mydomain.com/images/cool-nifty-image.png 
```

然而，有时，情况并非总是如此。有时是

```
http://www.mydomain.com/images/cool-lame-image-300x300.png 
```

300x300 与尺寸相关。在上面的例子中，我需要位于

```
http://www.mydomain.com/images/cool-lame-image.png 
```

（是的，它始终存在。）

这很容易，因为它总是三位数。不过，有时也可以

```
 http://www.mydomain.com/images/cool-lame-image-300x99.png 
```

或者

```
 http://www.mydomain.com/images/cool-lame-image-99x99.png 
```

有没有办法找到**“-#x#”**以便我可以找到-100x99 和-875x200？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:49:26.370

你需要一个正则表达式来完成这个任务

```
$img = preg_replace('/-\d+x\d+(\.png)$/', '\1', $img); 
```

# php - 更新到 OSX Mountain Lion 后 PHP mail() 不再有效

> ID：11696609
> 
> 赞同：33
> 
> 时间：2012-07-27T22:48:11.610
> 
> 标签：php, email, xampp, osx-mountain-lion

我昨天刚刚将 OS X 更新为 Mountain Lion，但 php 功能`mail()`不再起作用。

更新前，PHP`mail()`功能正常，Apple 邮件正常。更新后，Apple 邮件可以正常工作，但 PHP`mail()`功能无法正常工作。

网络服务器：XAMPP 1.7.3

我使用此代码来测试`mail()`功能：

```
if (mail($to, $object, $content, "From: ". $from)) 
{ 
    echo 'send '; 
} 
else 
{ 
    echo "not send"; 
} 
```

表明：`not send`

我有什么需要改变的吗？比如 the`php.ini`还是别的什么？

提前致谢。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-07-29T03:52:58.427

最后我找到了解决方案。查看error_log（/Applications/XAMPP/xamppfiles/logs/error_log）后，有错误： **sendmail: fatal: chdir /Library/Server/Mail/Data/spool: No such file or directory**

在终端执行以下操作：

```
sudo mkdir -p /Library/Server/Mail/Data/spool
sudo /usr/sbin/postfix set-permissions
sudo /usr/sbin/postfix start 
```

然后 php mail() 工作！

参考： [https ://apple.stackexchange.com/questions/54051/sendmail-error-on-os-x-mountain-lion](https://apple.stackexchange.com/questions/54051/sendmail-error-on-os-x-mountain-lion)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T07:54:10.837

如上所述创建假脱机文件夹后，我按照这篇文章[OS X 提示中的说明配置了 postfix](http://hints.macworld.com/article.php?story=20081217161612647)

我还必须编辑我的 php.ini sendmail 路径以获得一些额外的开关，特别是

```
sendmail_path=/usr/sbin/sendmail -t -i 
```

# python - python - 按条件排序

> ID：11696610
> 
> 赞同：0
> 
> 时间：2012-07-27T22:48:22.927
> 
> 标签：python, sorting

我在csv上有各种行，但我只想对那些高于0的行进行排序，因为我也有负数，所以我尝试了这个，它似乎不起作用

```
try :
    ligacsv = csv.reader(open('%s/liga.csv', 'r')%BASE_DIR, delimiter='|')

except IOError, e

try:
    ligacsv = csv.reader(open('C:/www/liga.csv', 'r'), delimiter='|')
except: ligacsv=[]

d = sorted(ligacsv, key=lambda x: (int(x[1])>'0'), reverse=False)

for linha in d:
    for i in linha[0:1]]:
        print '<td align="right">%s</td>' %i 
```

我在 html 中输出

是的，我知道它写得不好，我还在学习这门语言。这只是一段代码，让你们大致了解一下。

当它排序时，我得到类似 75 74 50 -30 2 15 等

我希望它是 75 74 50 15 2。没有低于 0 的数字。

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:55:37.393

```
d = sorted([row for row in ligascv if int(row[23])>0],
           key = lambda row: int(row[23]),
           reverse = False) 
```

# java - 带有特殊字符和数据库的java程序

> ID：11696616
> 
> 赞同：1
> 
> 时间：2012-07-27T22:49:18.060
> 
> 标签：java, mysql, database, phpmyadmin, character

首先我知道这个问题是已知的，并且有很多答案，但我的有点不同或不寻常。

所以，我正在使用`Eclipse SDK Version: 3.7.1`，我正在开发将与数据库一起使用的 java 应用程序（JRE 1.7）。

由于应用程序是**克罗地亚语**，我遇到了特殊字符的问题 - **č**、**ć**、**đ**及其插入数据库（mysql dbms，嵌入 xampp）。

但是，我对编码的东西知之甚少，我试图将 DB 设置为`cp1250_croatian_ci`, `UTF8_unicode_ci`, `UTF8_general_ci`, `latin2_croatian_ci`，但遗憾的是我对每个都遇到了同样的问题。（每次连接到数据库后是否必须`SET NAMES utf8`（或类似的东西）？）

另外，我想指出，在 phpMyAdmin中插入（ **č**、**ć**、**đ ）可以正常工作。**

因此，如果我想插入 DB 字符**č**、**ć**、**đ**它们表示为**?** . 所以基本上这意味着编码或字符集或其他东西是问题。

我也在使用 JDBC 驱动程序：`mysql-connector-java-5.1.18-bin` 来自：[docs](http://dev.mysql.com/doc/refman/5.1/en/connector-j.html)

我想提一下，我没有遇到问题，而 DB 托管在 godaddy.com 服务器上

此外，项目文本编码（在 Eclipse 中）设置为“继承自容器（CP1250）”，我也尝试过，`UTF-8`但这对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:50:15.087

我认为你可以按照以下1首先你应该将mysql编码设置为utf-8；2秒当你连接数据库时你应该设置连接属性如下你可以试试这个
`jdbc:mysql://ip:3306/yourDBName?useUnicode=true&amp;characterEncode=UTF-8`

我认为当您使用 jdbc 连接时，您可能会丢失`useUnicode=true&amp;characterEncode=UTF-8`

# ruby-on-rails - 将回形针图像从控制器传递到 rails 中的视图

> ID：11696617
> 
> 赞同：0
> 
> 时间：2012-07-27T22:49:18.697
> 
> 标签：ruby-on-rails, image, paperclip, instance-variables

我有一个模型，它附加了一个图像，我想通过控制器将其传递到视图中。这是我自己尝试过的方式，但它不起作用：

模型：

```
class CustomForm < ActiveRecord:Base
    has_attached_file :background_image,
      :storage => :s3,
      :bucket => "asdf",
      ...

    belongs_to  :project 
```

控制器：

```
class FormsController < ApplicationController
    before_filter :get_project

    def show
        @form = @project.forms.find(params[:id])
        @bg_image = @form.background_image.url
    end

    def get_project
        @project = current_account.projects.find(params[:project_id])
    end 
```

看法：

```
<html>
    <head>
    </head>

    <body>
        <%= image_tag @bg_image %>
    </body>
</html> 
```

这会产生“无法将 nil 转换为字符串”错误并指向“<%= image_tag @bg_image %>”行，我假设 @bg_image 为 nil。那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:23:14.190

Uou 可能需要评估 image_tag 行：

```
<%= eval("image_tag #{@bg_image}") 
```

由于在控制器中设置 @bg_image 并没有保存任何内容，因此您可以轻松地做到这一点。：

```
<%= image_tag @form.background_image.url %> 
```

这可能会更快地渲染一纳秒，并且看起来更干净。

# networking - 可以在 .NET Metro 应用程序中获取网络 MAC 地址吗？

> ID：11696619
> 
> 赞同：1
> 
> 时间：2012-07-27T22:49:31.457
> 
> 标签：networking, windows-8, microsoft-metro, windows-runtime

我需要在 Metro UI 应用程序中获取网络接口的 MAC 地址。据我所知，.NET 4.5 for Metro 应用程序 API 根本不支持这一点。我错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T08:57:10.817

您无法按说法检索 MAC 地址，但您可以检索硬件特定信息来识别机器。

这是讨论该主题的完整 msdn 文章：[Guidance on using the App Specific Hardware ID (ASHWID) to implementation per-device app logic (Windows)](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431)

请注意仅使用您需要的信息而不是完整的 id，因为它可能会根据对您无用的信息（例如 Dock Station 字节）而改变。

这是一个基于几个字节（CPU id、内存大小、磁盘设备的序列号和 bios）计算设备 id 的代码示例：

```
string deviceSerial = string.Empty;
// http://msdn.microsoft.com/en-us/library/windows/apps/jj553431
Windows.System.Profile.HardwareToken hardwareToken = Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null);
using (DataReader dataReader = DataReader.FromBuffer(hardwareToken.Id))
{
    int offset = 0;
    while (offset < hardwareToken.Id.Length)
    {
        byte[] hardwareEntry = new byte[4];
        dataReader.ReadBytes(hardwareEntry);

        // CPU ID of the processor || Size of the memory || Serial number of the disk device || BIOS
        if ((hardwareEntry[0] == 1 || hardwareEntry[0] == 2 || hardwareEntry[0] == 3 || hardwareEntry[0] == 9) && hardwareEntry[1] == 0)
        {
            if (!string.IsNullOrEmpty(deviceSerial))
            {
                deviceSerial += "|";
            }
            deviceSerial += string.Format("{0}.{1}", hardwareEntry[2], hardwareEntry[3]);
        }
        offset += 4;
    }
}

Debug.WriteLine("deviceSerial=" + deviceSerial); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:56:41.127

您被限制从 Metro Style 应用程序访问低级网络信息，因此这对于股票 SDK是**不可能的。**这是设计使然。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-16T23:42:15.177

```
 private void getDeviceInfos()
    {
        Profiles = Windows.Networking.Connectivity.NetworkInformation.GetConnectionProfiles();
        Adapter = Profiles[0].NetworkAdapter;

        Guid AdapterId = Adapter.NetworkAdapterId;
    }
    IReadOnlyList<Windows.Networking.Connectivity.ConnectionProfile> Profiles;
    Windows.Networking.Connectivity.NetworkAdapter Adapter; 
```

# linux - 如何从 tar 站点备份中提取单个文件

> ID：11696620
> 
> 赞同：0
> 
> 时间：2012-07-27T22:49:32.867
> 
> 标签：linux, tar

我有一个大约 200GB(tar) 的网站备份。我只想从此备份中提取一个文件。

关于我如何去做这件事的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T22:53:02.070

首先，您可以执行此操作以获取所有文件名的列表：

```
tar tf archive.tar 
```

然后使用这个命令你可以只提取你想要的文件

```
tar xf archive.tar path/inside/archive/a.txt another/path/b.txt 
```

请注意，您可能需要使用`z`,`j`或其他选项，具体取决于您是否使用了以及使用了何种压缩。

# java - 在 NetBeans GUI Builder 中使用 CardLayout

> ID：11696624
> 
> 赞同：0
> 
> 时间：2012-07-27T22:50:05.553
> 
> 标签：java, swing, netbeans, netbeans-7

我正在使用 NetBeans 7.2.1 GUI 生成器。我可以手动完成所有这些。相反，我正在使用我当前的项目来了解这个工具是如何工作的，以便我可以做出明智的决定，决定将来何时使用它（如果有的话）。

现在借助此处存档的问题，我已经弄清楚如何将 LayoutManager 更改为 CardLayout。我还在布局中添加了三个 JPanel（虽然，似乎有一个错误......也许稍后会提出一个问题）。CardLayout 显示的第一个 JPanel 将有两个按钮。每个按钮都会使 CardLayout 显示其他两个 JPanel 之一。为此，我发现我可以使用[`CardLayout#show(Container, String)`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#show%28java.awt.Container,%20java.lang.String%29).

我需要知道每个 JPanel 的 String 的值是多少。做了一些进一步的研究，我发现 NetBeans 会生成一行代码，例如

```
getContentPane().add(addCardsPanel, "card2"); 
```

所以我可以使用“card2”来显示 addCardsPanel。使用更适用的字符串会很方便。NetBeans 是否允许我将此标识字符串设置为我希望的任何值？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:23:58.090

在`Navigator`窗口中选择所需的面板。

在`Properties`窗口中向下滚动到该`Layout`组。你会看到一个`Card Name`属性。把自己打昏 ;）

# objective-c - 是否可以在 mac 应用程序中执行 shell 命令？

> ID：11696626
> 
> 赞同：1
> 
> 时间：2012-07-27T22:50:13.177
> 
> 标签：objective-c, macos, compilation, ocaml

基本上我想知道我是否可以使用用户系统中已经可用的可执行文件来编译用户在 mac 应用程序中输入的代码（我正在尝试制作一个编译你的代码的 OCaml 文本编辑器）`ocamlc`。我没有任何代码要显示或任何东西，因为我仍在弄清楚是否/如何构建这个 mac 应用程序。不太确定我应该包括哪些其他信息，所以问问。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:07:57.413

您可以使用`Sys.command "<your shell command>"`或`Unix.open_process*`和`Unix.create_process`命令。请参阅`man Sys`和`man Unix`了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T22:53:36.920

在 Objective-C、C 和 C++ 以及许多其他语言中，使用[`system(3)`](http://linux.die.net/man/3/system). 另见：

*   [`exec(3)`](http://linux.die.net/man/3/exec)
*   [`popen(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/popen.3.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T04:49:50.953

如果您使用的是 Objective-C，请查看[NSTask](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)。

如果没有，请查看[popen](http://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man3/popen.3.html)。popen 让你的父进程控制 I/O 流。

# mongodb - MongoDB查询结果排序（数值范围查询）

> ID：11696627
> 
> 赞同：0
> 
> 时间：2012-07-27T22:50:36.313
> 
> 标签：mongodb, mongodb-.net-driver

*这里是 Mongo 新手（在 Windows 上使用 Mongo C# 驱动程序）

嗨，我正在评估 Mongo 是否应用了数字维度的组合。我有数百个数字字段并创建一个布尔查询（我广泛使用 Lucene、Solr 等，因此请原谅这些术语）。Solr 中的结果按**相关性**排序，即沿多个维度最接近的匹配，然后是下一个最接近的匹配，依此类推......

例如：

```
Doc1: 
 - NumField 1 : 9.9
 - NumField 2: 8.2

Doc2:
 - NumField 1 : 5.9
 - NumField 2: 8.9

**Query**
 - NumField 1: Between 7 & 10
 - NumField 2: Between 8 & 10

I would want Doc1 to show up before Doc2. 
```

使用类似的构造查询 Mongo 得到的结果似乎没有相关性排序。有什么方法可以按“相关性”对查询结果进行排序？

ps 我知道总是可以从我的客户端中的游标中订购结果，但如果可能的话，我想在服务器端进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:01:38.950

Mongo 没有任何基于分数的排序，它按照文档的索引顺序返回文档（假设您的查询命中索引）。

您最好的选择可能是在客户端上进行排序。如果您真的非常想在 Mongo 中执行此操作，您可以使用 map/reduce 功能在文档上打分，然后查询输出集合并按分数排序。不过，这可能不是一个好主意。

# asp.net-mvc-3 - 如何在具有复杂表结构的 MVC 中加载相关数据

> ID：11696635
> 
> 赞同：1
> 
> 时间：2012-07-27T22:51:42.927
> 
> 标签：asp.net-mvc-3, linq, dbcontext

为了简洁起见，我将缩短几节课。下面列出了与此问题相关的相关属性/字段。

```
public class AcademicYear
{
    [Key]
    public int AcademicYearId { get; set; }
}

public class Division
{
    public Division()
    {
        this.CareerFields = new HashSet<CareerField>();
    }

    [Key]
    public int    DivisionId     { get; set; }

    // Foreign Keys
    public int    AcademicYearId { get; set; }

    // Navigation Properites
    public virtual AcademicYear AcademicYear { get; set; }

    public virtual ICollection<CareerField> CareerFields { get; set; }
}

public class CareerField
{
    public CareerField()
    {
        this.Clusters    = new HashSet<Cluster>();
    }

    [Key]
    public int    CareerFieldId   { get; set; }

    // Foreign Keys
    public int    AcademicYearId  { get; set; }
    public int    DivisionId      { get; set; }

    // Navigation Properties
    public virtual AcademicYear AcademicYear { get; set; }
    public virtual Division     Division     { get; set; }

    public virtual ICollection<Cluster>    Clusters    { get; set; }
}

public class Cluster
{
    public Cluster()
    {
        this.CareerFields = new HashSet<CareerField>();
    }

    [Key]
    public int ClusterId { get; set; }
    {
        // Foreign Keys
        public int    AcademicYearId { get; set; }

        // Navigation Properties
        public virtual AcademicYear AcademicYear { get; set; }

        public virtual ICollection<CareerField> CareerFields { get; set; }
    }
}

public class Pathway
{
    public Pathway()
    {
        this.CareerMajors = new HashSet<CareerMajor>();
    }

    [Key]
    public int    PathwayId      { get; set; }

    // Foreign Keys
    public int    AcademicYearId { get; set; }
    public int    ClusterId      { get; set; }

    // Navigation Properties
    public virtual AcademicYear AcademicYear { get; set; }
    public virtual Cluster      Cluster      { get; set; }

    public virtual ICollection<CareerMajor> CareerMajors { get; set; }
}

public class CareerMajor
{
    public CareerMajor()
    {
        this.Courses        = new HashSet<Course>();
    }

    [Key]
    public int    CareerMajorId     { get; set; }
    public string FirstYearOffered  { get; set; }

    // Foreign Keys
    public int    AcademicYearId    { get; set; }
    public int    PathwayId         { get; set; }

    // Navigation Properties

    [HiddenInput(DisplayValue = false)]
    public virtual AcademicYear      AcademicYear      { get; set; }
    public virtual Pathway           Pathway           { get; set; }

    public virtual ICollection<Course>         Courses        { get; set; }

}

public class Course
{
    public Course()
    {
        this.CareerMajors  = new HashSet<CareerMajor>();
    }

    [Key]
    public int    CourseId       { get; set; }

    // Foreign Keys
    public int    AcademicYearId { get; set; }
    public int?   InstructorId   { get; set; }

    // Navigation Properties
    public virtual ICollection<CareerMajor>  CareerMajors  { get; set; }

    public virtual AcademicYear AcademicYear { get; set; }
} 
```

我还有一个 ViewModel 类来为我的控制器加载所有这些

```
public class CMSIndex
{
    public IEnumerable<Division> Divisions { get; set; }
    public IEnumerable<CareerField> CareerFields { get; set; }
    public IEnumerable<Cluster> Clusters { get; set; }
    public IEnumerable<Pathway> Pathways { get; set; }
    public IEnumerable<CareerMajor> CareerMajors { get; set; }
    public IEnumerable<Course> Courses { get; set; }
} 
```

我有一个 razor cshtml 页面（自动 CRUD 定义的索引页面），我从 Division 开始，我可以加载相关的 CareerFields。但是，当我尝试加载集群时，我收到错误消息

> “/”应用程序中的服务器错误。值不能为空。参数名称：source 描述：在执行当前web请求的过程中发生了一个未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentNullException：值不能为空。参数名称：来源

这是来自控制器的索引方法（注意注释掉的行也是我尝试过的）

```
public ViewResult Index(Int32? divisionID, Int32? careerFieldID, Int32? clusterID, Int32? pathwayID, Int32? careerMajorID, Int32? courseID)
    {
        var viewModel = new CMSIndex();

        viewModel.Divisions = db.Divisions
            .Include(d => d.AcademicYear)
            .Include(d => d.CareerFields)//
            .Include(d => d.CareerFields.Select(cf => cf.Clusters))
            //.Select(c => c.Clusters.Select(cl => cl.Pathways.Select(p => p.CareerMajors.Select(cm => cm.Courses)))))
            .OrderBy(d => d.DivisionName);

        if (divisionID != null)
        {
            ViewBag.DivisionID = divisionID.Value;
            viewModel.CareerFields = viewModel.Divisions.Where(d => d.DivisionId == divisionID.Value).Single().CareerFields;
        }

        if (careerFieldID != null)
        {
            ViewBag.careerFieldID = careerFieldID.Value;
            //viewModel.Clusters = viewModel.CareerFields.Where(cf => cf.CareerFieldId == careerFieldID.Value).Single().Clusters;
            //viewModel.Clusters = viewModel.CareerFields.SelectMany(cf => cf.Clusters);
            viewModel.Clusters = viewModel.CareerFields.Where(cf => cf.CareerFieldId == careerFieldID.Value).Single().Clusters;
        }

        return View(viewModel);
    } 
```

我正在关注有关加载相关数据的 Contoso 教程。我似乎能够加载 1:m 关系，但我不确定如何使用 m:m 执行此操作（例如 CareerFields 和 Clusters）。

而且，我确实有一个初始化程序，它已经加载了要提取的数据，并且我正在传递一个 ID（例如 careerFieldID）。

抛出异常的地方在线：

```
viewModel.Clusters = viewModel.CareerFields.Where(cf => cf.CareerFieldId == careerFieldID.Value).Single().Clusters; 
```

并且每个评论变体。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:07:56.080

并不是说这是问题所在，但是您是否检查过这些值不为空？在行

```
viewModel.Clusters = viewModel.CareerFields
    .Where(cf => cf.CareerFieldId == careerFieldID.Value).Single().Clusters; 
```

有可能`viewModel.CareerFields`是空的吗？

作为一些旁注：

*   当你有空值时，你的空值检查最好使用他们的 HasValue 方法，例如

    ```
    if (divisionID.HasValue)
    {
        ...
    } 
    ```

*   的使用`Single()`可能有点喜怒无常，如果不存在元素或存在多个元素，可能会引发异常。`First()`可用于处理多个（但如果不匹配则抛出），`SingleOrDefault()`将处理零个或一个结果，`FirstOrDefault()`并将处理大多数事情。

*   您可以通过将您的 lambda 放在单个中来保存表达式，例如

    ```
    viewModel.CareerFields = viewModel.Divisions
        .Single(d => d.DivisionId == divisionID.Value).CareerFields; 
    ```

**编辑：我认为您遇到的问题与**[此答案](https://stackoverflow.com/questions/3858922/code-first-adding-to-collections-how-to-use-code-first-with-repositories)中的问题相同，您是否可以尝试更改您的类集合，以便在为 null 时在 get 中初始化。例如除法

```
public class Division
{
    [Key]
    public int    DivisionId     { get; set; }

    // Foreign Keys
    public int    AcademicYearId { get; set; }

    // Navigation Properites
    public virtual AcademicYear AcademicYear { get; set; }

    private ICollection<CareerField> careerFields;
    public virtual ICollection<CareerField> CareerFields { 
        get { return careerFields ?? (careerFields = new HashSet<CareerField>()); }
        set { careerFields = value; } 
    }
} 
```

无论如何，这实际上是我的首选方法，这给您的代码带来了自己的问题，因为 CareerFields 为空的事实意味着对于给定的部门，没有关联的 CareerFields。这意味着当您的 Single() 调用被命中时，它将抛出异常`The source contains no elements`，因为 CareerFields 将包含一个空的哈希集。这可以通过更改 SingleOrDefault() 来解决。

# python - python在%后显示几个变量

> ID：11696636
> 
> 赞同：2
> 
> 时间：2012-07-27T22:51:45.817
> 
> 标签：python

伙计们，似乎不记得以以下格式显示 2 个或更多变量的正确语法：

```
log.debug ("%s %s " % hostname % processoutput[0]) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:52:56.027

你要

```
 log.debug ("%s %s " % (hostname , processoutput[0])) 
```

一个[元组](http://docs.python.org/library/functions.html#tuple)应该跟在 % 运算符之后，列出所有要格式化为字符串的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T22:52:46.820

```
log.debug("%s %s" % (hostname, processoutput[0])) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T10:15:51.527

你也可以这样做：

```
log.debug('{0} {1}'.format(hostname, processoutput[0])) 
```

乍一看，这可能看起来很复杂，但该`format`功能非常强大。请参阅[文档](http://docs.python.org/library/string.html#format-specification-mini-language)和[示例](http://docs.python.org/library/string.html#format-examples)。

# python - Django self.cleaned_data 不工作

> ID：11696639
> 
> 赞同：1
> 
> 时间：2012-07-27T22:52:17.183
> 
> 标签：python, django, django-forms

我是这项技术的新手，所以如果问题太简单，我会提前道歉。

我正在使用 self.cleaned_data 来获取用户输入的选定数据。它在调用 clean 时有效，但不适用于我的保存方法。

这是代码

表格.py

```
def clean_account_type(self):
    if self.cleaned_data["account_type"] == "select": # **here it works**
        raise forms.ValidationError("Select account type.")

def save(self):
    acc_type = self.cleaned_data["account_type"] # **here it doesn't, (NONE)**

    if acc_type == "test1":
        doSomeStuff() 
```

任何想法为什么当我调用保存时它不起作用？

这是我的意见.py

```
def SignUp(request):
    if request.method == 'POST':
        form = SignUpForm(request.POST)

        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/') 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T22:57:42.353

`clean_<field_name`表单上的方法*必须*返回干净的值或引发`ValidationError`. 来自文档[https://docs.djangoproject.com/en/1.4/ref/forms/validation/](https://docs.djangoproject.com/en/1.4/ref/forms/validation/)

> 就像上面的通用字段 clean() 方法一样，这个方法应该返回清理后的数据，不管它是否改变了任何东西。

简单的改变是

```
def clean_account_type(self):
    account_type = self.cleaned_data["account_type"]
    if account_type == "select":
        raise forms.ValidationError("Select account type.")
    return account_type 
```

# ruby-on-rails-3 - 一个 Facebook “like” 或 Twitter “follow” 系统 - 在 Rails 3 中

> ID：11696643
> 
> 赞同：1
> 
> 时间：2012-07-27T22:52:33.550
> 
> 标签：ruby-on-rails-3, facebook-like, twitter-follow

谁能指出我正确的方向来了解我如何实现一个类似于 facebook 的“like”或 Twitter 的“Follow/Unfollow”系统，我可以在 Rails 中创建？

据我了解，我需要使用 Unobtrusive Javascript。

我有一个 Thing 模型（has_many :likes）和一个 Like 模型（belongs_to :thing）

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:03:26.110

您可以对一个函数进行 ajax 调用，并在该函数中实现您喜欢的任何功能，（在本例中为“follow”），您可以使用：

```
[link_to_function][1] 
```

Incase，您使用的是 rails 3.2.4 并且已弃用，您可以使用（这是来自 jeremy 的评论 [。https](https://gist.github.com/rails/rails/pull/5922#issuecomment-5770442) ://gist.github.com/rails/rails/pull/5922#issuecomment-5770442 ）：

```
module LinkToFunctionHelper
  def link_to_function(name, *args, &block)
     html_options = args.extract_options!.symbolize_keys

     function = block_given? ? update_page(&block) : args[0] || ''
     onclick = "#{"#{html_options[:onclick]}; " if html_options[:onclick]}#{function}; return false;"
     href = html_options[:href] || '#'

     content_tag(:a, name, html_options.merge(:href => href, :onclick => onclick))
  end
end 
```

# mysql - MySQL中如何在多列索引和单列索引之间进行选择

> ID：11696644
> 
> 赞同：-1
> 
> 时间：2012-07-27T22:52:39.110
> 
> 标签：mysql, optimization, indexing

我有一张`users`使用 PRIMARY 键调用的表`users.zbid`。但是，`SELECT`在其上运行的所有查询都包含该`WHERE`子句`cid='$cid' AND zbid='$zbid'`。我应该添加索引`cid`还是多列索引`cid,zbid`？我知道关于 的`WHERE`条款`cid`似乎是多余`zbid`的`PRIMARY`，但它主要是作为预防措施，每个`cid`指定一个不同的论坛，如果出现问题，我不希望每个论坛都受到影响。

其次，我有另一个名为`notifications`. 在此表上运行的唯一查询使用 where 子句`cid='$cid' AND zbid='$zbid'`，我应该将它们都添加为单独的索引还是仅添加一个？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:11:24.880

1.  如果主键 on `users.zdib`，则不需要复合索引（mysql 将使用现有索引 on `zdib`）
2.  如果`cid`以与您的第一个表中类似的方式使用，则不需要复合索引，只需一个索引就足够了`zdib`。否则，将其放在 2 列上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:57:03.010

我认为多列索引会表现更好。

cid,zbid 将需要 1 次搜索

拥有 2 个索引将需要 2 次搜索

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:13:42.357

在第一种情况下，MySQL 将使用 PRIMARY_KEY（你有什么其他的 AND 并不重要）。

在第二种情况下，您应该将它们都添加到一个索引中（假设列是非唯一的），这样会留下更少的结果来过滤。

您还应该检查[覆盖索引](https://stackoverflow.com/questions/62137/what-is-a-covered-index)。但我认为这些不会对你的情况产生影响。

# python - GAE 中的一些正则表达式出错

> ID：11696657
> 
> 赞同：0
> 
> 时间：2012-07-27T22:54:25.177
> 
> 标签：python, regex, google-app-engine

我正在解析 url var 中的 HTML 代码，但我遇到了一个奇怪的问题：

这条线工作正常`pattern = re.compile("\.html$")`，但是当我尝试这个时`pattern = re.compile("ps\.html$")`，函数返回一个奇怪的字符串，显然是空的。我在纯 python 中尝试了相同的代码，并且在两种情况下都可以正常工作，但是当我在 GAE 下运行它时，我遇到了问题。有人可以尝试以下代码吗？谢谢！

```
# -*- encoding: utf-8 -*-
'''
Created on 24/06/2012

@author: nanchet
'''
import re
from HTMLParser import HTMLParser

class psLinkFinder(HTMLParser):
    def handle_starttag(self, tag, attrs):
        if tag == "a":
            pattern = re.compile("\.html$")
            for attr in attrs:
                if attr[0] == "href" and pattern.search(attr[1]):
                    print attr[1]

url = '''
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es">
<head>
</head>
<body>
<div id="wrap">
<div id="header">
 <a href="http://es.kompass.com/">
 <img class="logo"
    src="/live/images/www.kompass.com.png" alt="Kompass - Connects Business to Business" width="208" height="35" />
</a>
</div>
<div id="breadcrumb" itemtype="http://data-vocabulary.org/Breadcrumb" itemscope="">
<a itemprop="url" href="http://es.kompass.com/live/"><span itemprop="title">Directorio de Empresas</span></a>
 >
<a itemprop="url" href=""><span itemprop="title"></span></a> &gt; </div>
<div id="main" class="cpyLst">
<div id="mainLeftColumn">
<h1 class="h1Bg">Maquinaria y equipos de España</h1>
<div class="mainBg">
<div id="box_three_companies">
<p>
    <strong>Maquinaria y bienes de equipo, consiga nuevos contactos</strong><br />
    Trabajar con empresas del sector de maquinaria y equipo es m&aacute;s f&aacute;cil si cuenta con la ayuda de un experto. Kompass le ofrece su gu&iacute;a empresarial con la que podr&aacute; encontrar clientes potenciales. &iquest;Quiere aumentar sus contactos comerciales? No lo dude, d&eacute; sus primeros pasos con Kompass.<br />
    <br />
    <strong>Dos millones de empresas ya conf&iacute;an en nosotros, aprov&eacute;chese de la visibilidad que le ofrecemos</strong><br />
    &iquest;Desea dar a conocer su actividad y sus productos o servicios en el sector de maquinaria y bienes de equipo? Kompass es el intermediario que necesita. &iexcl;Benef&iacute;ciese de nuestros soportes de comunicaci&oacute;n! Inscr&iacute;base y aumente su notoriedad y presencia.<br />
    &nbsp;</p>

        <ul class="lstTopFive">
        <li>
<strong>
<a
    href="/live/es/ES1008294/mulder-y-co--s-a.html">Mulder Y Co., S.A.</a></strong>
<address class="cpyAddress">28830 San Fernando de Henares España</address>
<p class="cpyActivity">
 MYCSA, Mulder y Co., S.A. fu&eacute; constituida en 1978 con la idea de cubrir un vac&iacute;o...</p>
<div class="cpyBtn">
<a
    title="Información detallada acerca de Mulder Y Co., S.A."
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/profile_ES1008294_es/mulder-y-co.-s.a.-ps.html"><img
    alt="Información detallada acerca de Mulder Y Co., S.A." src="/live/images/pWeblink.jpg" /></a>
<a
    title="Envíenos un e-mail"
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/contact_ES1008294_es/mulder-y-co.-s.a..html"><img
    alt="Envíenos un e-mail"
    src="/live/images/pContact.jpg" /></a>
</div>
<div class="clearer"></div>
</li><li>
<strong>
<a
    href="/live/es/ES0015070/comspain-xxi-s-a.html">Comspain XXI, S.A.</a></strong>
<address class="cpyAddress">28015 Madrid España</address>
<p class="cpyActivity">
FABRICACION NACIONAL: MANUTENCI&Oacute;N-MATERIAL VIBRANTE: Extractores - Precribadores -...</p>
<div class="cpyBtn">
<a
    title="Información detallada acerca de Comspain XXI, S.A."
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/profile_ES0015070_es/comspain-xxi-s.a.-ps.html"><img
    alt="Información detallada acerca de Comspain XXI, S.A." src="/live/images/pWeblink.jpg" /></a>
<a
    title="Envíenos un e-mail"
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/contact_ES0015070_es/comspain-xxi-s.a..html"><img
    alt="Envíenos un e-mail"
    src="/live/images/pContact.jpg" /></a>
</div>
<div class="clearer"></div>
</li>
    <li>
<strong>
<a
    href="/live/es/ES1041656/montajes-industriales-eos-s-a.html">Montajes Industriales Eos, S.A.</a></strong>
<address class="cpyAddress">28850 Torrejón de Ardoz España</address>
<p class="cpyActivity">
 MONTAJES INDUSTRIALES EOS  es una empresa fundada en el a&ntilde;o 1989\. Su actividad principal...</p>
<div class="cpyBtn">
<a
    title="Información detallada acerca de Montajes Industriales Eos, S.A."
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/profile_ES1041656_es/montajes-industriales-eos-s.a.-ps.html"><img
    alt="Información detallada acerca de Montajes Industriales Eos, S.A." src="/live/images/pWeblink.jpg" /></a>
<a
    title="Envíenos un e-mail"
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/contact_ES1041656_es/montajes-industriales-eos-s.a..html"><img
    alt="Envíenos un e-mail"
    src="/live/images/pContact.jpg" /></a>
</div>
<div class="clearer"></div>
</li>
<li>
<strong>
<a
    href="/live/es/ES1036232/construcciones-metalicas-albero-s-l.html">Construcciones Met&aacute;licas Albero, S.L.</a></strong>
<address class="cpyAddress">28500 Arganda del Rey España</address>
<p class="cpyActivity">
ESTA EMPRESA CUENTA CON EL PATROCINIO DE LA C&Aacute;MARA DE COMERCIO DE MADRID CONSTRUCCIONES...</p>
<div class="cpyBtn">
<a
    title="Información detallada acerca de Construcciones Metálicas Albero, S.L."
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/profile_ES1036232_es/construcciones-metálicas-albero-s.l.-ps.html"><img
    alt="Información detallada acerca de Construcciones Metálicas Albero, S.L." src="/live/images/pWeblink.jpg" /></a>
<a
    title="Envíenos un e-mail"
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/contact_ES1036232_es/construcciones-metálicas-albero-s.l..html"><img
    alt="Envíenos un e-mail"
    src="/live/images/pContact.jpg" /></a>
</div>
<div class="clearer"></div>
</li>    <script type="text/javascript">
    setNedStatResultList('ES1036232', 'paid','country.ESP','Construcciones Metálicas Albero, S.L.', '3','http://fr.sitestat.com/kompass/kompass-es/s?esp.es.lc.gs.cat.subcat.GSesESP5301.company_list.result.1&amp;user_country=ESP', 'ESP');
    </script>
    <li>
<strong>
<a
    href="/live/es/ES0016818/electricfor-s-a.html">Electricfor, S.A.</a></strong>
<address class="cpyAddress">08191 Rubí España</address>
<p class="cpyActivity">
 Resistencias Resistencias el&eacute;ctricas calefactoras. Resistencias para l&iacute;quidos,...</p>
<div class="cpyBtn">
<a
    title="Información detallada acerca de Electricfor, S.A."
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/profile_ES0016818_es/electricfor-s.a.-ps.html"><img
    alt="Información detallada acerca de Electricfor, S.A." src="/live/images/pWeblink.jpg" /></a>
<a
    title="Envíenos un e-mail"
    onclick="_gaq.push(['_trackPageview', '/exit/KIM']);this.target='_blank';"
    href="http://es.kompass.com/contact_ES0016818_es/electricfor-s.a..html"><img
    alt="Envíenos un e-mail"
    src="/live/images/pContact.jpg" /></a>
</div>
<div class="clearer"></div>
</li>
    </ul>        
<br/><div class="paginationControl"><span class="active">1</span><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-2.html">2</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-3.html">3</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-4.html">4</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-5.html">5</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-6.html">6</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-7.html">7</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-8.html">8</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-9.html">9</a><br/><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-10.html">10</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-20.html">20</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-30.html">30</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-40.html">40</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-50.html">50</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-60.html">60</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-70.html">70</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-80.html">80</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-90.html">90</a><br/><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-100.html">100</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-200.html">200</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-300.html">300</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-400.html">400</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-500.html">500</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-600.html">600</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-700.html">700</a><a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-757.html">757</a></div>
<div class="clearer"></div>
<div style="margin:15px 0"><p>
    Con nuestra gu&iacute;a Kompass, podr&aacute; consultar listados de empresas especializadas en maquinaria y bienes de equipo.&nbsp;Podr&aacute; encontrar&nbsp;resultados precisos en la actividad que necesite.</p>
</div>
</div>
</div></div>

<div id="mainRightColumn">

<div style="text-align:center">
<a class="no_border" href="http://webdemo.kompass.fr/WebDemo_en.html">
</a>
</div>
</div>
</div>
    <div class="sideBox greyBg">
<div class="title">Búsqueda</div>
<div class="margin10">
<ul class="breadcrumb">
        <li><span class='filtreName'>Sectores : </span> <a href="/live/es/g53/fabricacion-industria-1.html">Fabricaci&oacute;n e Industria</a></li><li> <a href="/live/es/g5301/fabricacion-industria/maquinaria-equipos-1.html"><img src="/live/img/commun/puce_tree.png" alt="*"/>Maquinaria y equipos</a></li></ul>
</div>
</div><div class="sideBox greenBg">
<div class="title">Restringir la búsqueda</div>
<div class="margin10 refineSection">
<strong>Comunidad Autónoma</strong>
<ul>
<li><a href='/live/es/g5301resp01/fabricacion-industria/maquinaria-equipos,andalucia-1.html'>Andaluc&iacute;a</a></li><li><a href='/live/es/g5301resp02/fabricacion-industria/maquinaria-equipos,aragon-1.html'>Arag&oacute;n</a></li><li><a href='/live/es/g5301resp03/fabricacion-industria/maquinaria-equipos,asturias-1.html'>Asturias</a></li><li><a href='/live/es/g5301resp04/fabricacion-industria/maquinaria-equipos,baleares-1.html'>Baleares</a></li><li><a href='/live/es/g5301resp05/fabricacion-industria/maquinaria-equipos,canarias-1.html'>Canarias</a></li><li><a href='/live/es/g5301resp08/fabricacion-industria/maquinaria-equipos,cantabria-1.html'>Cantabria</a></li></ul>
<ul id="regionlist">
<li><a href='/live/es/g5301resp09/fabricacion-industria/maquinaria-equipos,castilla-y-leon-1.html'>Castilla y Le&oacute;n</a></li><li><a href='/live/es/g5301resp07/fabricacion-industria/maquinaria-equipos,castilla-la-mancha-1.html'>Castilla-La Mancha</a></li><li><a href='/live/es/g5301resp06/fabricacion-industria/maquinaria-equipos,cataluna-1.html'>Catalu&ntilde;a</a></li><li><a href='/live/es/g5301resp10/fabricacion-industria/maquinaria-equipos,ceuta-y-melilla-1.html'>Ceuta y Melilla</a></li><li><a href='/live/es/g5301resp17/fabricacion-industria/maquinaria-equipos,comunidad-valenciana-1.html'>Comunidad Valenciana</a></li><li><a href='/live/es/g5301resp11/fabricacion-industria/maquinaria-equipos,extremadura-1.html'>Extremadura</a></li><li><a href='/live/es/g5301resp12/fabricacion-industria/maquinaria-equipos,galicia-1.html'>Galicia</a></li><li><a href='/live/es/g5301resp16/fabricacion-industria/maquinaria-equipos,la-rioja-1.html'>La Rioja</a></li><li><a href='/live/es/g5301resp13/fabricacion-industria/maquinaria-equipos,madrid-1.html'>Madrid</a></li><li><a href='/live/es/g5301resp14/fabricacion-industria/maquinaria-equipos,murcia-1.html'>Murcia</a></li><li><a href='/live/es/g5301resp15/fabricacion-industria/maquinaria-equipos,navarra-1.html'>Navarra</a></li><li><a href='/live/es/g5301resp18/fabricacion-industria/maquinaria-equipos,pais-vasco-1.html'>Pa&iacute;s Vasco</a></li></ul>
 <a id="btnregionlist" class="toogleLink">Mostrar todas las regiones</a>
<strong>Sectores</strong>
<ul>
<li><a href='/live/es/g530101/fabricacion-industria/turbinas-motores-maquinas-vapor-1.html'>Turbinas, motores, m&aacute;quinas de vapor</a></li><li><a href='/live/es/g530102/fabricacion-industria/bombas-compresores-equipos-neumaticos-hidraulicos-1.html'>Bombas, compresores, equipos neum&aacute;ticos e hidr&aacute;ulicos </a></li><li><a href='/live/es/g530103/fabricacion-industria/calderas-hornos-quemadores-1.html'>Calderas, hornos y quemadores</a></li><li><a href='/live/es/g530104w40440/fabricacion-industria/intercambiadores-torres-enfriamiento-condensadores-radiadores-1.html'>Intercambiadores, torres de enfriamiento, condensadores y radiadores</a></li><li><a href='/live/es/g530105/fabricacion-industria/fabricas-equipos-ventilacion-calefaccion-aire-acondicionado-1.html'>F&aacute;bricas y equipos de ventilaci&oacute;n, calefacci&oacute;n, aire acondicionado</a></li><li><a href='/live/es/g530106/fabricacion-industria/maquinaria-equipos-agricultura-silvicultura-acuicultura-1.html'>Maquinaria y equipos para la agricultura, silvicultura y acuicultura</a></li></ul>
<ul id="sectorlist">
<li><a href='/live/es/g530107/fabricacion-industria/maquinaria-equipos-las-industrias-agroalimentaria-bebidas-tabaco-1.html'>Maquinaria y equipos para las industrias agroalimentaria, bebidas y tabaco</a></li><li><a href='/live/es/g530108/fabricacion-industria/equipos-industria-quimica-farmaceutica-1.html'>Equipos para la industria qu&iacute;mica y farmace&uacute;tica</a></li><li><a href='/live/es/g530109/fabricacion-industria/equipos-proceso-plastico-caucho-1.html'>Equipos para el proceso de pl&aacute;stico y caucho</a></li><li><a href='/live/es/g530110/fabricacion-industria/maquinaria-equipos-envasado-1.html'>Maquinaria y equipos para el envasado</a></li><li><a href='/live/es/g530111/fabricacion-industria/maquinaria-equipos-textiles-confeccion-cuero-zapateria-1.html'>Maquinaria y equipos para textiles, confecci&oacute;n, cuero y zapater&iacute;a</a></li><li><a href='/live/es/g530112/fabricacion-industria/maquinaria-equipos-fabricar-pasta-papel-1.html'>Maquinaria y equipos para fabricar pasta y papel</a></li><li><a href='/live/es/g530113/fabricacion-industria/maquinaria-equipos-impresion-encuadernacion-1.html'>Maquinaria y equipos para impresi&oacute;n y encuadernaci&oacute;n</a></li><li><a href='/live/es/g530115/fabricacion-industria/maquinaria-equipos-minas-canteras-1.html'>Maquinaria y equipos para minas y canteras </a></li><li><a href='/live/es/g530116/fabricacion-industria/maquinaria-equipos-exploracion-extraccion-aceite-gas-agua-1.html'>Maquinaria y equipos para la exploraci&oacute;n y extracci&oacute;n de aceite, gas y agua</a></li><li><a href='/live/es/g530117/fabricacion-industria/fabricas-equipos-productos-minerales-metalicos-1.html'>F&aacute;bricas y equipos para productos minerales no met&aacute;licos</a></li><li><a href='/live/es/g530118/fabricacion-industria/maquinaria-equipos-construccion-ingenieria-obras-publicas-1.html'>Maquinaria y equipos para la construcci&oacute;n e ingenier&iacute;a de obras p&uacute;blicas</a></li><li><a href='/live/es/g530119/fabricacion-industria/equipamiento-ascensores-elevadores-transporte-industrial-1.html'>Equipamiento para ascensores, elevadores y transporte industrial</a></li><li><a href='/live/es/g530120/fabricacion-industria/fabricas-maquinaria-equipos-metalurgia-metalisteria-1.html'>F&aacute;bricas, maquinaria y equipos para metalurgia y metalister&iacute;a</a></li><li><a href='/live/es/g530121/fabricacion-industria/fabricas-maquinaria-equipos-trabajar-madera-corcho-1.html'>F&aacute;bricas, maquinaria y equipos para trabajar la madera y el corcho</a></li><li><a href='/live/es/g530122/fabricacion-industria/herramientas-trabajar-metal-1.html'>Herramientas para trabajar el metal</a></li><li><a href='/live/es/g530123w47900/fabricacion-industria/instalaciones-maquinaria-equipos-montaje-1.html'>Instalaciones, maquinaria y equipos de montaje</a></li><li><a href='/live/es/g530124w37500/fabricacion-industria/sistemas-automatizacion-servomecanismos-1.html'>Sistemas de automatizaci&oacute;n y servomecanismos</a></li><li><a href='/live/es/g530125/fabricacion-industria/maquinaria-equipos-precision-las-industrias-piedras-preciosas-relojes-joyeria-1.html'>Maquinaria y equipos de precisi&oacute;n para las industrias de piedras preciosas, relojes y joyer&iacute;a</a></li><li><a href='/live/es/g530126/fabricacion-industria/maquinaria-equipos-las-industrias-electrica-electronica-1.html'>Maquinaria y equipos para las industrias el&eacute;ctrica y electr&oacute;nica</a></li><li><a href='/live/es/g530127/fabricacion-industria/maquinaria-equipos-tratamiento-agua-vertidos-aguas-residuales-1.html'>Maquinaria y equipos para el tratamiento del agua, vertidos y aguas residuales</a></li><li><a href='/live/es/g530128/fabricacion-industria/instalaciones-contra-incendio-sistemas-seguridad-1.html'>Instalaciones contra incendio, sistemas de seguridad </a></li><li><a href='/live/es/g530129w40700/fabricacion-industria/maquinaria-equipos-cocinas-hosteleria-1.html'>Maquinaria y equipos para cocinas de hosteler&iacute;a</a></li><li><a href='/live/es/g530130/fabricacion-industria/maquinaria-especializada-usos-industriales-diversos-equipos-pago-previo-tragaperras-maquinas-expendedoras-1.html'>Otras m&aacute;quinas y equipos</a></li></ul>
 <a id="btnsectorlist" class="toogleLink">Mostrar todos los sectores de actividad</a>
<strong>Categorías relacionadas</strong>
<ul>
<li><a href='/live/es/g53019901w84400/fabricacion-industria/proyectos-industriales-llave-mano-1.html'>Proyectos industriales llave en mano</a></li><li><a href='/live/es/g53019902w85720/fabricacion-industria/servicios-ensayo-maquinaria-equipos-1.html'>Servicios de ensayo de maquinaria y equipos</a></li><li><a href='/live/es/g53019903w83200/fabricacion-industria/alquiler-maquinaria-herramientas-equipos-industriales-1.html'>Alquiler de maquinaria, herramientas y equipos industriales</a></li><li><a href='/live/es/g53019904/fabricacion-industria/maquinaria-equipos-comercio-1.html'>Maquinaria y equipos (comercio)</a></li><li><a href='/live/es/g53019905w84800/fabricacion-industria/consultores-ingenieria-mecanica-1.html'>Consultores en ingenier&iacute;a mec&aacute;nica</a></li></ul>
<strong>Otros sectores</strong>
<ul>
<li><a href='/live/es/g5302/fabricacion-industria/metalurgia-metalisteria-productos-metalicos-1.html'>Metalurgia, metalister&iacute;a y productos met&aacute;licos</a></li><li><a href='/live/es/g5303/fabricacion-industria/material-electrico-electronico-1.html'>Material el&eacute;ctrico y electr&oacute;nico </a></li><li><a href='/live/es/g5304/fabricacion-industria/equipos-instrumentos-test-medicion-opticos-precision-1.html'>Equipos e instrumentos para test y medici&oacute;n.

Equipos &oacute;pticos y de precisi&oacute;n.</a></li><li><a href='/live/es/g5305/fabricacion-industria/medios-transporte-1.html'>Medios de transporte </a></li><li><a href='/live/es/g5306/fabricacion-industria/instalaciones-contra-incendio-sistemas-seguridad-1.html'>Instalaciones contra incendio y sistemas de seguridad </a></li><li><a href='/live/es/g5307/fabricacion-industria/equipos-suministros-hospitales-centros-medicos-dentistas-veterinarios-1.html'>Equipos y suministros para hospitales, centros m&eacute;dicos, dentistas y veterinarios </a></li></ul>
<ul id="sectorBrotherlist">
<li><a href='/live/es/g5308/fabricacion-industria/productos-caucho-plasticos-1.html'>Productos de caucho y pl&aacute;sticos </a></li><li><a href='/live/es/g5309/fabricacion-industria/productos-quimicos-farmaceuticos-1.html'>Productos qu&iacute;micos y farmac&eacute;uticos </a></li><li><a href='/live/es/g5310/fabricacion-industria/madera-mobliario-productos-1.html'>Madera, mobliario y productos de madera</a></li><li><a href='/live/es/g5311/fabricacion-industria/productos-minerales-vidrio-ceramicas-1.html'>Productos minerales, vidrio y cer&aacute;micas</a></li><li><a href='/live/es/g5312/fabricacion-industria/alimentos-preparados-bebidas-1.html'>Alimentos preparados y bebidas</a></li><li><a href='/live/es/g5313/fabricacion-industria/productos-tabaco-articulos-fumadores-1.html'>Productos de tabaco y articulos para fumadores </a></li><li><a href='/live/es/g5315/fabricacion-industria/tejidos-ropa-cuero-calzado-1.html'>Tejidos, ropa, cuero, calzado.</a></li><li><a href='/live/es/g5316/fabricacion-industria/papel-productos-1.html'>Papel y productos de papel </a></li><li><a href='/live/es/g5317/fabricacion-industria/servicios-editoriales-1.html'>Servicios editoriales</a></li><li><a href='/live/es/g5318/fabricacion-industria/material-oficina-ordenadores-perifericos-1.html'>Material de oficina. Ordenadores y perif&eacute;ricos. </a></li><li><a href='/live/es/g5319/fabricacion-industria/calefaccion-ventilacion-aire-acondicionado-refrigeracion-1.html'>Calefacci&oacute;n, ventilaci&oacute;n y aire acondicionado, refrigeraci&oacute;n</a></li><li><a href='/live/es/g5320/fabricacion-industria/ingenieria-nuclear-1.html'>Ingenier&iacute;a nuclear </a></li><li><a href='/live/es/g5321/fabricacion-industria/bolsas-sacos-materiales-envasado-equipos-energia-alternativa-1.html'>Otras industrias</a></li></ul>
 <a id="btnsectorBrotherlist" class="toogleLink">Mostrar todos los sectores de actividad</a>
</div>
</div>
<div class="sideBox greyBg">
<div class="title">Buscar por marcas comerciales</div>
<div class="margin10"><ul>
<li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-bomag-1.html'>BOMAG</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-maquinaria-vinas-1.html'>MAQUINARIA VI&Ntilde;AS</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-jevsa-1.html'>JEVSA</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-bison-1.html'>BISON</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-abus-1.html'>ABUS</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-cat-1.html'>CAT</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-3m-1.html'>3M</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-barbothan-1.html'>BARBOTHAN</a></li></ul>
<ul id="tmlist">
<li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-aap-1.html'>AAP</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-burckhardt-compression-1.html'>BURCKHARDT COMPRESSION</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-branson-1.html'>BRANSON</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-elan-1.html'>ELAN</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-tane-1.html'>TAN&Eacute;</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-comspain-1.html'>COMSPAIN</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-ifema-feria-de-madrid-1.html'>IFEMA, FERIA DE MADRID</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-alutop-1.html'>ALUTOP</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-sick-1.html'>SICK</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-cableeater-1.html'>CABLEEATER</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-arvipo-1.html'>ARVIPO</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-tv-95-premier-1.html'>TV 95 PREMIER</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-bacti-sopor-1.html'>BACTI-SOPOR</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-alkitorc-1.html'>ALKITORC</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-cfor-1.html'>CFOR</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-h-s-1.html'>H&amp;S</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-cartepillar-1.html'>CARTEPILLAR</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-mapres-1.html'>MAPRES</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-epsilon-1.html'>EPSILON</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-79-vacio-1.html'>79 VACIO</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-biogon-1.html'>BIOGON</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-bolondi-1.html'>BOLONDI</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-greenfield-1.html'>GREENFIELD</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-hisselektronik-1.html'>HISSELEKTRONIK</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-tane-hermetic-1.html'>TAN&Eacute; HERM&Eacute;TIC</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-aquapanel-1.html'>AQUAPANEL</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-sick-ivp-1.html'>SICK IVP</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-hook-loop-1.html'>HOOK &amp; LOOP</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-conduc-bat-1.html'>CONDUC-BAT</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-mirage-1.html'>MIRAGE</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-case-1.html'>CASE</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-mezclamed-1.html'>MEZCLAMED</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-indexator-1.html'>INDEXATOR</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-aapel-1.html'>AAPEL</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-carbocat-1.html'>CARBOCAT</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-uraca-1.html'>URACA</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-haug-1.html'>HAUG</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-rst-1.html'>RST</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-danogips-1.html'>DANOGIPS</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-sick-maihak-1.html'>SICK MAIHAK</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-wrap-it-ties-1.html'>WRAP-IT-TIES</a></li><li>&raquo; <a class='avec_fleche_noire' href='/live/es/t-peinemann-1.html'>PEINEMANN</a></li></ul>
 <a id="btntmlist" class="toogleLink">Mostrar todas las marcas comerciales</a>
</div>
</div>

</div>
<div id="footer">
<ul>
<li><a class="color_bleu" onclick="this.target='_blank'" href="http://empresas.kompass.com/">Directorio de empresas españolas</a></li>
</ul><div id="address_footer">
<address><strong>Kompass Spain (Central)</strong><br />C/ Explanada, 8\. 1º B. 28040\. Madrid <br/>

Tel&eacute;fono : 917 697 165&nbsp;Fax : 917 697 165</address>
</div>
<div id="copyright">Copyright KOMPASS &copy; 2012</div>
</div>

<div id="contactPlusCard">
<span class="cpCorner es"></span>
<div>
<p class="txt"><strong style="color: red;">¿Busca un producto o servicio específico?</strong><br/><br/><strong>Contact + </strong> selecciona en su base de datos mundial las empresas que se ajustan más a su solicitud.</p>
<p class="btn"><a target="_blank" href="http://www.kompass-int.com/contact_plus/intl/index_form.php?lang=es&pays_franchise=ES">Ir!</a><a style="margin-left:20px" target="_blank" href="http://webdemo.kompass.fr/suppliers-contactPlus/es">Ver la demo</a></p>
</div>
<a class="button close"></a>
<a class="cross close"></a>
</div>
</div>
</body>
</html>
'''
parser = psLinkFinder()
parser.feed(url) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:26:41.263

我想你想要：

```
re.compile(r'ps\.html$') 
```

# python - “对于列表中的项目”- None 项目来自哪里？

> ID：11696660
> 
> 赞同：0
> 
> 时间：2012-07-27T22:54:43.453
> 
> 标签：python

我得到了这个包含一个项目的对象列表。

```
 print self.parameters
    print len(self.parameters)
    for p in self.parameters:
        print p 
```

当我打印出 lsit 的列表和 len 时，我看到了预期的：一项。但是当循环遍历 lsit 我也得到一个 None 项目......！？

```
[<__main__.Parameter object at 0x00000000022D4828>]
1
<__main__.Parameter object at 0x00000000022D4828>
None 
```

这里发生了什么？（是的，我确定，“无”输出来自此打印语句）

* * *

编辑：我正在操作我正在循环的列表：

```
print self.parameters
print len(self.parameters)
for p in self.parameters:
    print p
    (...)
    self.parameters.append(<something that returned None>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:29:01.723

不要这样做。

```
for p in self.parameters:
    print p
    ...
    self.parameters.append(...) # No. 
```

请参阅[在迭代时修改列表](https://stackoverflow.com/questions/1637807/modifying-list-while-iterating)- 基本上，您不应该在迭代时修改某些内容。如果需要，您可以制作副本：

```
for p in list(self.parameters):
    print p
    ...
    self.parameters.append(...) # Okay 
```

# javascript - Chrome扩展，从正文中的关键词建立链接

> ID：11696661
> 
> 赞同：2
> 
> 时间：2012-07-27T22:54:45.410
> 
> 标签：javascript, google-chrome-extension

为了让您了解我的知识库，我是一名计算机工程专业的学生，​​现在暑假在一家医疗公司工作。我几乎没有（几乎零网络代码经验），但这主要是我的工作希望我做的，所以我一直在努力尽快解决所有问题。我在学校使用过很多 C、Verilog 和 C++，所以计算机“语言”并不新鲜，但我很难完全弄清楚这些东西。

无论如何，我的第一个任务是为 Chrome 构建一个扩展，它可以链接到我们的 Asterix 电话服务器。所要做的就是在网页上找到电话号码并将它们变成超链接，超链接将基于点击的电话号码，这部分是微不足道的。

所以，我阅读了关于 HTML、JS、Ajax、Jquery、DOM 等的 W3 Schools 资料。所以在过去的 3 天里我学到了很多 =)

这是我制作的：

在我的情况下，我似乎不需要“backround.html”，因为我需要做的就是在页面加载后运行一个 JS 文件以查找电话号码并将它们转换为链接。

所以我写了一个清单文件和一个 JS 文件来搜索正文中的数字并在其周围放置一个标签（目前正在访问 www.google.com）

好消息是它似乎奏效了。

坏消息是，Gmail 在加载时冻结，使 hotmail 无法连接，无法更新和查看新邮件。

我认为您在进行扩展时甚至无法以这种方式“破坏”网站。

我所有的代码都非常小，所以我只想在这里发布。

**清单.json**

```
 {
  "name": "Typenex Hyperlink-Dialer",

  "version": "1.0",
  "description": "This is a custom built extension for Typenex. This extension identifies phone numbers and allows the user to click the number to initiate a phonecall.",
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],

  "browser_action": {
      "default_title": "Typenex Hyperlink-Dialer",

      "default_icon": "typenex_logo.png"
  },

  "content_scripts" : [
    {
      "matches" : ["http://*/*", "https://*/*"],
      "js" : ["typenex_contentscript.js"],
      "run_at" : "document_idle",
      "all_frames" : false
    }
  ],

  "manifest_version": 2
} 
```

**typenex_contentscript.js**

```
var arrayOfNumbers = [];
alert("hi");
var regex =  /\d*[/-]*[0-9][0-9][0-9][/ -]*[0-9][0-9][0-9][/ -]*[0-9][0-9][0-9][0-9][ ]*/g;
newBody = document.body.innerHTML;
var i = 0;
do
{
    temp = regex.exec(newBody);
    if (temp != null)
        arrayOfNumbers[i] = temp;
    i++
}
while (temp)
for (var i = 0; i < arrayOfNumbers.length; i++)
{
    newBody = newBody.replace(arrayOfNumbers[i], "<a href='http://www.google.com'>" + arrayOfNumbers[i] + "</a>");
}
document.body.innerHTML = newBody; 
```

我很感激我能得到的任何帮助，如果我似乎误解了某些东西，而你知道我能读到的东西可能会很有帮助，我一直在谷歌搜索，但我可能还不够了解问正确的问题。

如果你们中的任何人有更好的方法来解决这个简单的扩展，我是非常开放的=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:51:56.810

我有几次想知道获取文本节点的最佳方法是什么，并打算查看 TreeWalking，所以这次我做到了。以下是我制作的测试页面，我不能说这是否是最好的方法，但可以满足您的需求。

**树行者.html**

```
<html>
  <head>
    <style>
    </style>
    <script src="treewalker.js"></script>
  </head>
  <body>
    <div>This is a div</div>
    <div><div id='testevent'>Test event</div>This is a div 000-000-0000</div>
    <div>This is a div 000-000-0000</div>
     <div>This is<a href='sf'>bleh 000-000-0000 a div</a></div>
  </body>
</html> 
```

**树行者.js**

```
function onLoad() {

  document.querySelector('#testevent').onclick = function() {
    alert('clicked')
  };

  // Here starts the bit for your content script
  var re = /(\d*[/-]*[0-9][0-9][0-9][/ -]*[0-9][0-9][0-9][/ -]*[0-9][0-9][0-9][0-9][ ]*)/g;
  var regs;

  var walker = document.createTreeWalker(
  document.body, NodeFilter.SHOW_TEXT, function(node) {
    if((regs = re.exec(node.textContent))) {
      // make sure the text nodes parent doesnt have an attribute we add to know its allready been highlighted
      if(!node.parentNode.classList.contains('highlighted_text')) {
        var match = document.createElement('A');
        match.appendChild(document.createTextNode(regs[0]));
        match.href = 'http://www.google.com';

        // add an attribute so we know this element is one we added
        // Im using a class so you can target it with css easily
        match.classList.add('highlighted_text');

        var after = node.splitText(regs.index);
        after.nodeValue = after.nodeValue.substring(regs[0].length);
        node.parentNode.insertBefore(match, after);
      }
    }
    return NodeFilter.FILTER_SKIP;
  }, false);

  // Make the walker step through the nodes
  walker.nextNode();

  // and it ends here
}

(function() {
  document.addEventListener("DOMContentLoaded", onLoad);
})(); 
```

**代码被盗**

[http://paul.kinlan.me/dom-treewalker/](http://paul.kinlan.me/dom-treewalker/)
那是我从那里得到 treewalker 代码的地方。他的示例的问题是它在父级上使用 innerHTML 包装了匹配项（很多示例都这样做），这会杀死测试页面中的事件。

[http://www.the-art-of-web.com/javascript/search-highlight/](http://www.the-art-of-web.com/javascript/search-highlight/)
展示了如何正确分割文本节点。据我所知，这是一种更好的方法，但我对 TreeWalker 方法很感兴趣。

**编辑**
我刚刚更新了它，因为如果您运行旧版本（单击下面的编辑链接查看它）在这个新版本中的 html 上失​​败。由于某种原因，我真的不明白它不会包装第二个数字。这个新版本不能像我看到的所有示例那样工作，而且似乎是使用 TreeWalker 的一种滥用方式......但它确实有效！

# javascript - 如何使用 addClass 和延迟执行此 .each() 方法？

> ID：11696666
> 
> 赞同：1
> 
> 时间：2012-07-27T22:55:17.797
> 
> 标签：javascript, jquery, animation, css

我知道 .delay() 方法，但我相信这只适用于将动画添加到队列中。

我正在做的是使用 css3 制作动画“波浪”效果（添加和删除不透明类）。

我希望动画有一个延迟，比如介于 0.3 秒之间，当整个动画完成后，它应该继续循环。动画也应该以“堆叠”的方式开始，这样不是所有的动画都会同时淡入

这是我到目前为止尝试写的，但它不起作用

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.css-pineapple div').each(function(i) {
            addO($(this));
        });
    });

    function addO(element) {
        setTimeout(function() {
            element.addClass('opaque');
        }, 800);
        removeO(element);
    }

    function removeO (element) {
        setTimeout(function() {
            element.removeClass('opaque');
        }, 500);
    }
</script>

<div class="css-pineapple">
    <div class="t1"></div>
    <div class="t2"></div>
    <div class="t3"></div>
    <div class="b1"></div>
    <div class="b2"></div>
    <div class="b3"></div>
    <div class="b4"></div>
    <div class="b5"></div>
    <div class="b6"></div>
    <div class="b7"></div>
    <div class="b8"></div>
    <div class="b9"></div>
    <div class="b10"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:00:13.537

如果没有小提琴或其他需要看的东西，这很难回答，但请尝试：

```
$(document).ready(function(){
    Start($('.css-pineapple div'));
});

function Start(elem) {
    elem.each(function(i, e) {
        setTimeout(function() {
            $(e).addClass('opaque');
            setTimeout(function() {
                $(e).removeClass('opaque');
                if (i>=elem.length-1) Start($('.css-pineapple div'));
            }, 500);
        }, 800*i);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:58:07.937

试试这个：

（对于每个元素，延迟增加 800。）

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.css-pineapple div').each(function(i) {
            addO($(this),800*i);
        });
    });

    function addO(element,delay) {
        setTimeout(function() {
            element.addClass('opaque');
            removeO(element);
        }, delay);
    }

    function removeO (element) {
        setTimeout(function() {
            element.removeClass('opaque');
        }, 500);
    }
</script> 
```

# windows-xp - 如何通过 cmd windows xp 安装 ipv4

> ID：11696668
> 
> 赞同：0
> 
> 时间：2012-07-27T22:55:29.367
> 
> 标签：windows-xp, ipv4

我需要编写一种在 windows xp 上安装 IPV4 的脚本，原因是我有许多带有损坏的 win sock 注册表的电脑，所以微软的修复方法是删除注册键 hklm/system/currentcontolset/services/winsock 和 winsock2 然后运行 netsch ip reset 来创建注册表的 winsock2 部分，然后我需要编写脚本的部分是转到网络适配器属性 goto tcpip 并安装新协议并选择 tcp/ip 并安装它，它使用文件 c:\windows\ inf\nettcpip.inf 然后这会创建 winsock 部分有没有办法编写这部分的脚本？我已经看过但找不到任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:34:37.487

找不到方法，所以使用注册表项

# javascript - jQuery 前置安全性

> ID：11696671
> 
> 赞同：1
> 
> 时间：2012-07-27T22:55:38.340
> 
> 标签：javascript, jquery, security, xss, csrf

这是一个菜鸟问题，如果我有一个不会在任何地方提交的文本区域......

```
 <form onsubmit="return false;">
      <textarea name="new_title_text" id="new_title_text"></textarea>
 </form> 
```

我使用 jQuery 将 textarea 的值添加到 div ...

```
var textValue = $('#new_title_text').val()
$('#myDiv').prepend('<div>' + textValue + '</div>'); 
```

这有任何安全漏洞吗？有人能以某种方式注入 JavaScript 并执行 XSS、CSRF 或任何其他类型的攻击吗？我知道，一旦我将值提交到我的服务器，就需要对其进行检查，但是在提交之前有什么可能发生的吗？

先谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T22:59:03.520

基本上你不能相信任何验证完成的客户端，因为人们可以（很容易）绕过 JavaScript 验证。

在您的服务器上进行适当的验证和清理，并将客户端验证仅用于用户体验，并且不要用明显无效的数据“打扰”您的服务器 - 例如需要值的空字段。

* * *

除非您让您的用户提交一些 PHP 代码或 JavaSctipt 代码以在您网站的其他地方执行，否则您应该是安全的。永远记住**不要**相信来自用户的任何数据。将所有传入数据视为潜在威胁，并在您计划稍后使用时对您处理的任何内容进行清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:18:04.360

> 有人能以某种方式注入 JavaScript 并执行 XSS、CSRF 或任何其他类型的攻击吗

是的。您正在将文本注入到没有 HTML 转义的 HTML 字符串中，因此该字符串 (`<`或`&`) 中的任何元字符都将失败并且可能容易受到注入攻击 (例如`<script>...`)。

问题是那个人是谁？从您当前的代码来看，外部方似乎不可能预先填充文本区域，因此必须是用户攻击自己（不是真正的漏洞）。

因此，您要么需要对进入 HTML 的字符串进行 HTML 转义，要么更好地使用 DOM 样式的访问方法，例如`.text()`和`.attr()`来设置文本内容和属性，而不使用粗略的字符串标记生成。或创建简写：

```
$('#myDiv').prepend(
    $('<div>', {text: $('#new_title_text').val()})
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:26:43.037

基本思想是，是的，在不受信任的数据前面使用是不安全的。然而，可利用性确实取决于场景。如果攻击者可以制作一个导致该脚本以不受信任的值运行的 url，那么您肯定遇到了 XSS 问题。但是，如果用户只能通过输入不安全的数据并单击按钮自己触发此操作，则更安全，但并不完全。这通常被称为 self-xss，有时与点击劫持等一起被利用。

有关不安全 jquery 函数的更多信息，请参阅：[http ://erlend.oftedal.no/blog/?blogid=127](http://erlend.oftedal.no/blog/?blogid=127)

# javascript - 匿名函数并不总是返回值

> ID：11696675
> 
> 赞同：6
> 
> 时间：2012-07-27T22:56:14.110
> 
> 标签：javascript, komodo

我有这样的 JavaScript 代码 =>

```
(function(){
    document.getElementById("element").onclick = function(){
        var r = confirm("Are you sure ?");
        if (r){
            return true;
        } else {
            return false;
        }
    }
})(); 
```

**此脚本有效，但只是给我有关严格警告**的通知，即**匿名函数并不总是返回值**

我对这意味着什么很感兴趣，我怎样才能防止这种情况发生，它会引起任何问题吗？请问有什么想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T22:58:08.213

这不是因为匿名函数，而是因为`else`with`return`是多余的。您不需要它，因为 return 退出函数，如果`if`语句不正确，`return`则将执行默认值。

```
(function(){
    document.getElementById("element").onclick = function(){
        var r = confirm("Are you sure ?");
        if (r){
            return true;
        }
        return false;
    }
})(); 
```

**编辑：**

正如**星云**所说，这可以做得更短：

```
(function(){
    document.getElementById("element").onclick = function(){
        return confirm("Are you sure ?");
    }
})(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T23:58:36.547

实际上，由于脚本中启用了[**严格模式**](http://hacks.mozilla.org/2011/01/ecmascript-5-strict-mode-in-firefox-4/)`strict warning`，您得到了结果，但是如果您的脚本中没有使用“使用严格”，那么我认为，正如您在评论中所说，您正在使用并且很可能您已经安装了支持JavaScript 调试的浏览器端组件。[](http://hacks.mozilla.org/2011/01/ecmascript-5-strict-mode-in-firefox-4/)**`Komodo IDE``Firefox Extension for Debugging`**

 **如果是这样，那么它有一些您可以启用或禁用的设置。要禁用`strict mode warnings`，只需转到**Edit Menu > Preferences > Javascript (from category) 并取消选中 Enable Strict Warning Messages**，就是这样。但是使用`strict mode`是一种很好的编程习惯。下面是帮助你的截图

![在此处输入图像描述](../Images/360b3f0bb3250416a467e2d2f1e90985.png)**

# javascript - # 在带有 Javascript 的 URL 中？

> ID：11696680
> 
> 赞同：1
> 
> 时间：2012-07-27T22:56:47.697
> 
> 标签：javascript, jquery

我正在实现一个带有完全 Ajaxified 接口（jQuery）库的 CMS。一切都通过 Ajax 调用等发生在一个 index.php 文件中。我该怎么做：

```
www.mysite.com/dashboard#statistics 
```

什么时候在统计页面等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:02:27.017

```
document.location.hash = 'statistics'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:04:53.270

`www.mysite.com/dashboard/#!/statistics`会更好 - 这是谷歌提出的格式。[http://searchengineland.com/googles-proposal-for-crawling-ajax-may-be-live-34411](http://searchengineland.com/googles-proposal-for-crawling-ajax-may-be-live-34411)

# javascript - setTimeout 似乎没有调用该函数

> ID：11696685
> 
> 赞同：0
> 
> 时间：2012-07-27T22:57:32.897
> 
> 标签：javascript, settimeout

在我添加 setTimeout 之前，代码运行良好。现在，无论我如何尝试调用 setTimeout ( `setTimeout(function(){fadeOut()},1000);` `setTimeout("fadeOut()",1000);`etc ) 中的函数，它似乎根本无法访问该函数。

我是一个 Javascript 新手，所以任何和所有的帮助都表示感谢 =]

javascript代码：

```
var slideArray = ["slide1","slide2","slide3","slide4","slide5","slide6"];
var currentSlide = null;
var current = null;
var done = false;

function fade(newSlide)
{
    if(currentSlide === null)
    {
        currentSlide = slideArray[0];
        document.getElementById(currentSlide).style.opacity = 1.0;

        for(var i=1;i<slideArray.length;i++)
            document.getElementById(slideArray[i]).style.opacity = 0.0;
    }

    current = document.getElementById(currentSlide);
    done = false;
    do
    {
        window.setTimeout(fadeOut,1000);
    } while(done == false);

    currentSlide = newSlide;
    current = document.getElementById(currentSlide);
    done = false;

    do
    {
        window.setTimeout(fadeIn,1000);
    } while(done == false);
}

function fadeOut()
{
    if(parseFloat(current.style.opacity)-0.1>.0000001)
    {
    current.style.opacity = parseFloat(current.style.opacity) -0.1;
        done = false;
    }
    else
    {
        current.style.opacity = 0.0;
        done = true;
    }
}

function fadeIn()
{
    if(0.9-parseFloat(current.style.opacity)>.0000001)
    {
        current.style.opacity = parseFloat(current.style.opacity)+0.1;
        done = false;
    }
    else
    {
        current.style.opacity = 1.0;
        done = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:16:49.060

你不能使用这个结构：

```
do
{
    window.setTimeout(fadeIn,1000);
} while(done == false); 
```

因为`setTimeout()`稍后运行的代码，你的 done 值永远不会改变，这个循环将永远运行。而且，只要它运行，`setTimeout()`也永远不会触发（因为 javascript 是单线程的）。

相反，如果你没有完成，你应该做的是`setTimeout(fadeIn, 1000)`从函数中启动下一个。`fadeIn()`

```
function fadeOut()
{
    if(parseFloat(current.style.opacity)-0.1>.0000001)
    {
        current.style.opacity = parseFloat(current.style.opacity) -0.1;
        setTimeout(fadeOut, 1000);
    }

    else
    {
        current.style.opacity = 0.0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:12:43.873

请记住，javascript 是单线程的，因此在完成当前脚本运行之前不会调用您的 setTimeout'et 函数。这永远不会发生，因为您处于一个永远不会结束的循环中（直到您从所有这些 setTimeout 中耗尽内存）。只需调用一次 setTimeout 并让函数返回。忘记等待它发生的想法。

# html - 如何在页面重新加载时停留在当前选项卡（选项卡视图）

> ID：11696689
> 
> 赞同：-1
> 
> 时间：2012-07-27T22:57:58.827
> 
> 标签：html, css

重新加载页面时使用tabview时如何留在当前选项卡中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:01:27.327

将有关当前/打开标签的信息添加到 url。
www.example.pl#contact-tab
重新加载后检查哪个选项卡已打开并再次打开它

# ruby-on-rails - rails has_many 通过一个新元素

> ID：11696690
> 
> 赞同：1
> 
> 时间：2012-07-27T22:58:00.107
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有以下模型：

```
class Party < ActiveRecord::Base
  has_many :party_characters
  has_many :characters, :through => :party_characters
  ... 
```

在我的控制器上，我有以下代码：

```
def new
  @party = Party.new
  p @party.characters.any?
  p @party.characters
  p @party.characters.any?
  ... 
```

这会将以下内容写入控制台：

```
true
[]
false 
```

为什么该`any?`方法在打印之前返回true，之后返回false？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:00:10.940

在控制台上尝试了同样的事情，得到了以下结果

```
1.9.3p0 :003 > p = Party.new
 => #<Party id: nil, name: nil, created_at: nil, updated_at: nil> 
1.9.3p0 :004 > p.characters.any?
   (17.9ms)  SELECT COUNT(*) FROM "characters" INNER JOIN "party_characters" ON "characters"."id" = "party_characters"."character_id" WHERE "party_characters"."party_id" IS NULL
 => true 
1.9.3p0 :005 > p.characters
 => [] 
1.9.3p0 :006 > p.characters.any?
 => false 
```

所以我决定检查一下我在party_characters 表上的内容，并找到了具有有效character_id 但派对ID 为零的条目。我删除了这些，一切都按预期工作。

# bash - Bash 脚本在 Ctrl+C 上杀死背景（大）子级

> ID：11696691
> 
> 赞同：5
> 
> 时间：2012-07-27T22:58:03.957
> 
> 标签：bash, shell, process, wait, kill

我有一个 Bash 脚本（Bash 3.2、Mac OS X 10.8），它并行调用多个 Python 脚本，以便更好地利用多个内核。每个 Python 脚本都需要很长时间才能完成。

问题是，如果我在 Bash 脚本中间按 Ctrl+C，Python 脚本实际上并没有被杀死。我怎样才能编写 Bash 脚本，以便杀死它也会杀死它所有的背景孩子？

这是我原来的“简化测试用例”。不幸的是，我似乎已经减少了很多，以至于它不再证明问题了；我的错。

```
set -e

cat >work.py <<EOF
import sys, time
for i in range(10):
    time.sleep(1)
    print "Tick from", sys.argv[1]
EOF

function process {
    python ./work.py $1 &
}

process one
process two
wait 
```

这是一个完整的测试用例，仍然高度简化，但希望这个可以证明问题。它可以在我的机器上重现......但是，两天前我认为*旧*的测试用例可以在我的机器上重现，而今天它绝对不会。

```
#!/bin/bash -e
set -x

cat >work.sh <<EOF
for i in 0 1 2 3 4 5 6 7 8 9; do
    sleep 1; echo "still going"
done
EOF
chmod +x work.sh

function kill_all_jobs { jobs -p | xargs kill; }
trap kill_all_jobs SIGINT

function process {
    ./work.sh $1
}

process one &
wait $!
echo "All done!" 
```

`still going`即使在 Ctrl+C 之后，此代码也会继续打印。但是，如果我将Ctrl+C`&`从外`process`移到内（即：）`./work.sh $1 &`，则 Ctrl+C 将按预期工作。我完全不明白这个！

在我的真实脚本中，`process`包含多个命令，并且命令是长时间运行的，必须按顺序运行；所以我不知道在那种情况下如何“移动`&`内部”。`process`我确信这是可能的，但它必须是不平凡的。

```
$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)
Copyright (C) 2007 Free Software Foundation, Inc. 
```

编辑：非常感谢@AlanCurry 教我一些 Bash 的东西。不幸的是，我仍然不明白我的示例中到底发生了什么，但这实际上是一个有争议的问题，因为 Alan*还*很有帮助地指出，对于我现实世界的并行化问题，Bash 是错误的工具，我应该使用一个简单的生成文件`make -j3`！`make`尽可能并行运行，并且完全理解 Ctrl+C；问题已解决（即使问题未得到解答）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:43:08.650

我知道了！您所要做的就是摆脱那个 python SIGINT 处理程序。

```
cat >work.py <<'EOF'
import sys, time, signal
signal.signal(signal.SIGINT, signal.SIG_DFL)
for i in range(10):
    time.sleep(1)
    print "Tick from", sys.argv[1]
EOF 
chmod +x work.py

function process {
    python ./work.py $1
}

process one &
wait $!
echo "All done!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:41:35.640

你`trap`对我来说很好看：

```
$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)
Copyright (C) 2007 Free Software Foundation, Inc.

$ cat ./thang 
#! /bin/bash
set -e

cat >work.py <<EOF
import sys, time
for i in range(10):
  time.sleep(1)
  print "Tick from", sys.argv[1]
EOF

function process {
  python ./work.py $1 &
}

function killstuff {
  jobs -p | xargs kill
}

trap killstuff SIGINT

process one
process two
wait

$ ./thang 
Tick from one
Tick from two
Tick from one
Tick from two
^C$ ps aux | grep python | grep -v grep
$ 
```

# ruby-on-rails - 路由错误 Ruby on Rails

> ID：11696695
> 
> 赞同：0
> 
> 时间：2012-07-27T22:58:19.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我在 rails 3.2.6 上安装了 ruby​​，当我执行 **rails server**

并访问 127.0.0.1:3000 它可以工作，但是当我生成一个控制器时，例如

**rails 生成控制器主体**

并访问 127.0.0.1:3000/somecontroller，浏览器显示以下错误：路由错误

**没有路由匹配 [GET] "/principal" 尝试运行 rake 路由以获取有关可用路由的更多信息。**

我需要做什么，这可以简单解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:03:13.903

问题是您没有指定任何操作，因此您的控制器“主体”为空，不会创建具有相似名称的视图，也不会创建任何路由。

你需要做：

```
rails generate controller principal index [show] [edit] [update] [create] [destroy] 
```

控制器名称后面的名称是操作名称。既然您以单数形式说控制器“主体”，那么它可能意味着您拥有单一资源。如果您想使用复数形式，请确保您说“controller principals”。

你的路线应该显示：

```
resource :principal [ or :principals or multiple Restful routes ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:07:29.807

您需要编辑**config/routes.rb**以告诉路由器将您的请求路由到哪个控制器。rails 标准是使用 RESTful 路由，在您给出的示例中，这将等同于单个 Principal 资源。因此，您需要添加：

```
resource :principal 
```

为该资源生成一组 RESTful 路由。您可以看到通过执行以下操作生成的路由：

```
rake routes 
```

如果您不关心 REST，那么您可以简单地添加（假设 PrincipalController 有一个 index 方法）：

```
match 'principal' => 'principal_controller#index' 
```

有关路由的更多信息，请查看 Rails 指南中的这一章：

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

您还可以通过将名称作为参数提供给**rails generate controller**命令，同时在控制器和路由中生成方法，例如：

```
rails generate controller principal index 
```

# javascript - Grails：多个 onload ajax 调用，但只有一个打印到控制台

> ID：11696697
> 
> 赞同：2
> 
> 时间：2012-07-27T22:58:52.573
> 
> 标签：javascript, ajax, grails

在我的 grails 模板中，我调用 remoteFunction（使用 jquery 库）onload。为了测试它是否有效，我在操作中写了一个 println。事实证明，它确实有效，但只有一个打印语句通过，而不是控制台中出现多个打印语句，用于我的集合中的多个项目。

这是我的代码片段

普惠制：

```
<figcaption id="secondcap">             
            <img id="changer" src="${resource(dir: "images/images", file: "heart.png")}" onload="${remoteFunction(controller:'user', action: 'hasHearted')}" alt="heart">
</figcaption> 
```

时髦的：

```
def hasHearted = {
    println "Recieved user ID:" 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:06:10.833

我猜你对每个元素都使用相同的图像

> src="${resource(dir: "images/images", file: "heart.png")

所以你的浏览器缓存它并且只调用你的服务器一次。

您可以在 Firebug og chrome 开发工具的网络选项卡中验证这一点。
尝试关闭浏览器缓存 - 在 FF webdeveloper 插件中可以轻松做到这一点。

# android - 在不使用 HTTP 请求的情况下将文件从 android 应用程序保存到谷歌驱动器

> ID：11696702
> 
> 赞同：0
> 
> 时间：2012-07-27T23:00:36.907
> 
> 标签：android, google-drive-api

我想将文件从我的 Android 应用程序保存到 Google 驱动器，但我不想使用 HTTPS 请求。即使用户像本地驱动器一样离线，我也想将我的文件放在 Google 驱动器中。因此，当用户上线时，Google Drive 会自动将此文件上传到云端。

是否存在允许离线上传文件的api？iOS也有相同的API吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:02:05.537

没有 API 可以按照您想要的方式与 Google Drive 客户端交互，抱歉！但是，它就像在文件系统上执行复制或移动操作一样简单。只需询问用户的 Google Drive 位置并将其存储在磁盘上，然后在需要时将文件复制到该目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-29T06:40:48.663

对于在 Stackoverflow 档案中挖掘的人，请注意，可以使用适用于 Android 的 Google Drive API 进行离线驱动器访问。请参阅此处的文档：[https](https://developers.google.com/drive/android/) ://developers.google.com/drive/android/ ...并且肯定也必须有一个适用于 iOS 的文档。

# ruby-on-rails-3 - Rails- 使用 best_in_place gem 对模型本身定义的数组集合进行就地编辑

> ID：11696707
> 
> 赞同：2
> 
> 时间：2012-07-27T23:01:22.093
> 
> 标签：ruby-on-rails-3, inplace-editing, best-in-place

我看过[RailsCasts#302](http://railscasts.com/episodes/302-in-place-editing)，它描述了使用 best_in_place gem 进行就地编辑。那里的性别选项 Ryan 使用 show.html.erb 中的数组并使其成为下拉框（请参阅他明确定义数组的性别部分）。

```
<p>
  <b>Gender:</b>
  <%= best_in_place @user, :gender, type: :select, collection: [["Male", "Male"], ["Female", "Female"], ["", "Unspecified"]] %>
</p> 
```

但我想要的是我在模型本身内部定义了一个数组，例如：（因为我的数组元素并不简单且数量少）

例如：

*用户.rb*

```
class User < ActiveRecord::Base
  def authencity_types
    ['Asian', 'Latin-Hispanic', 'Caucasian']
  end
end 
```

我将如何使用`best_in_place`语法将此数组元素用作下拉列表。

PS：我确实尝试过这样的事情

```
<% @users.each do |user| %>
  <%= best_in_place user, :authencity, type: :select, :collection => User::authencity_types  %>
<% end %> 
```

但它说未定义的方法 authencity_types

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T04:56:10.117

您正在 User 模型上定义一个实例方法，所以试试这个。

```
<% @users.each do |user| %>
  <%= best_in_place user, :authencity, type: :select, :collection => user.authencity_types  %>
<% end %> 
```

或者，您可以将其定义为这样的类方法。

```
class User < ActiveRecord::Base
  def self.authencity_types
    ['Asian', 'Latin-Hispanic', 'Caucasian']
  end
end 
```

或者，如果不需要动态，您可能需要考虑使用常量。

# android - 在新线程中开始上课

> ID：11696710
> 
> 赞同：0
> 
> 时间：2012-07-27T23:01:39.030
> 
> 标签：android, multithreading, email

（API 级别 12）我已经实现了 javax.mail，以便在用户输入登录名和密码后能够发送电子邮件。出于某种原因，我能够运行一次它并且电子邮件消失了。现在我收到一个错误 NetworkOnMainThreadException。我环顾四周，发现您可以像这样开始一个新线程：

```
 Thread onRun = new Thread{
      public void run() {
           try{
               mail.send();
           }catch(Exception e) {
           }
      }
   };
   onRun.Start(); 
```

但是当我添加它时应用程序崩溃了。

有没有办法让类始终在新线程中运行，这样我就永远不会收到错误？谢谢你的帮助。

```
public class Mail extends javax.mail.Authenticator { 
private String _user; 
private String _pass; 

private String[] _to; 
private String _from; 

private String _port; 
private String _sport; 

private String _host; 

private String _subject; 
private String _body; 

private boolean _auth; 

private boolean _debuggable; 

private Multipart _multipart; 

public Mail() { 
_host = ""; // default smtp server 
_port = ""; // default smtp port 
_sport = ""; // default socketfactory port 

_user = ""; // username 
_pass = ""; // password 
_from = ""; // email sent from 
_subject = ""; // email subject 
_body = ""; // email body 

_debuggable = false; // debug mode on or off - default off 
_auth = true; // smtp authentication - default on 

_multipart = new MimeMultipart(); 

// There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
CommandMap.setDefaultCommandMap(mc); 
} 

public Mail(String user, String pass) { 
 this(); 

_user = user; 
_pass = pass; 
} 

public boolean send() throws Exception { 
   Properties props = _setProperties(); 

if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
  Session session = Session.getInstance(props, this); 

  MimeMessage msg = new MimeMessage(session); 

  msg.setFrom(new InternetAddress(_from)); 

  InternetAddress[] addressTo = new InternetAddress[_to.length]; 
  for (int i = 0; i < _to.length; i++) { 
    addressTo[i] = new InternetAddress(_to[i]); 
  } 
    msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

  msg.setSubject(_subject); 
  msg.setSentDate(new Date()); 

  // setup message body 
  BodyPart messageBodyPart = new MimeBodyPart(); 
  messageBodyPart.setText(_body); 
  _multipart.addBodyPart(messageBodyPart); 

  // Put parts in message 
  msg.setContent(_multipart); 

  // send email 
  Transport.send(msg); 

  return true; 
} else { 
  return false; 
} 
} 

public void addAttachment(String filename) throws Exception { 
BodyPart messageBodyPart = new MimeBodyPart(); 
DataSource source = new FileDataSource(filename); 
messageBodyPart.setDataHandler(new DataHandler(source)); 
messageBodyPart.setFileName(filename); 

_multipart.addBodyPart(messageBodyPart); 
} 

@Override 
public PasswordAuthentication getPasswordAuthentication() { 
   return new PasswordAuthentication(_user, _pass); 
} 

private Properties _setProperties() { 
Properties props = new Properties(); 

props.put("mail.smtp.host", _host); 

if(_debuggable) { 
  props.put("mail.debug", "true"); 
} 

if(_auth) { 
  props.put("mail.smtp.auth", "false"); 
} 

props.put("mail.smtp.port", _port); 
props.put("mail.smtp.socketFactory.port", _sport); 
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
props.put("mail.smtp.socketFactory.fallback", "false"); 

return props; 
} 

// the getters and setters 
public String getBody() { 
return _body; 
} 

public void setBody(String _body) { 
this._body = _body; 
} 

public void setTo(String[] toArr) {
  this._to = toArr;
  }

public void setFrom(String string) {
  this._from = string;
  }

public void setSubject(String string) {
  this._subject = string;
  } 

public void setSMTP(String string) {
  this._host = string;
  }

public void setPort(String string) {
  this._port = string;
  } 
public void setSPort(String string) {
  this._sport = string;
  } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:15:25.557

正如异常的名称[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)——你不能在主线程上与网络交互。考虑使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)or [`Service`](http://developer.android.com/reference/android/app/Service.html)。SDK 文件夹中有一些示例代码。

# java - 使用 OR 测试 DynaActionForm 属性是否不为空

> ID：11696711
> 
> 赞同：0
> 
> 时间：2012-07-27T23:01:39.273
> 
> 标签：java, jsp, struts, jstl

我有 dynaActionForm 并且表单中包含两个数组（行程和路线）。

现在我需要通过 OR 来检查我的 jsp 页面中的两个数组是否不为空。

```
<logic:notEmpty property="trip" name="myForm"/>
OR
<logic:notEmpty property="route" name="myForm"/> 
```

我该怎么做以上？我使用 JSTL 尝试了以下操作：

```
<c:if test="${!empty(myForm.trip)}"> </c:if> 
```

它给了我一个错误，说属性“trip”不存在。我相信这是因为我的表单是 DynaActionForm。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:17:03.377

从表单中获取地图，该地图将与 EL 一起使用：

```
<c:if test="${!empty myForm.map.trip or !empty myForm.map.route}"> 
```

# apache - .htaccess 将“/book.php?id=1234”重写为“/book/1234”

> ID：11696718
> 
> 赞同：0
> 
> 时间：2012-07-27T23:03:19.010
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, redirect-loop

这是我到目前为止在我的开发环境中所拥有的：

```
php_value error_log log/php.log
php_value display_errors 1
php_value magic_quotes_gpc Off

RewriteEngine On

# remove slash
RewriteCond %{REQUEST_FILENAME} !-d

# file.php to /file
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteCond %{REQUEST_URI} !^/ajax.php
RewriteRule ^(.+)\.php$ http://localhost/$1 [R=301,L]

# /file to file.php
RewriteRule ^([^/.]+)$ $1.php [L] 
```

我已经尝试了很多此规则的变体，但总是收到 500 错误：

```
RewriteRule ^(.*)$ /book.php?url=$1 [L] 
```

这是在我的 Apache 的 error.log 中：

```
[Fri Jul 27 19:56:51 2012] [error] [client 127.0.0.1] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

我错过了什么，为什么重定向循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:19:30.057

您`RewriteRule`所写的内容似乎与您的问题标题所说的相反。你说你想要`htaccess rewrite /book.php?id=1234 to /book/1234`，但是你的`RewriteRule`：

```
RewriteRule ^(.*)$ /book.php?url=$1 [L] 
```

正在添加查询字符串参数。

下面的 RewriteRule 将重写`rewrite /book.php?id=1234 to /book/1234`

```
RewriteCond %{QUERY_STRING} ^id=([0-9]*)$
RewriteRule ^book\.php$ /book/%1? [L] 
```

另外，如果您真的希望采用另一种方式，即重写`/book/1234`为`/book.php?id=1234`以下内容应该这样做：

```
RewriteRule ^book/(.*)$ /book.php?id=$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-25T07:18:24.400

试试这个！

```
# in htaccess file write this
RewriteEngine on 

RewriteRule ^book/([0-9]+) book.php?id=$i

# and in you html or php file call

book.php?id=$i 
```

逐页

```
book/$i 
```

你完成了。

# c# - 存储库集合

> ID：11696719
> 
> 赞同：1
> 
> 时间：2012-07-27T23:03:19.457
> 
> 标签：c#, generics, collections

是短：

为什么将派生类型添加到集合会通过，但是在尝试添加派生类型的泛型时会失败？

“短”代码：

```
//a generic repository
        public class EfRepository<T> : IRepository<T> where T: BaseCatalogModel{...}

        public CatalogRepository(IRepository<Product> productRepository, IRepository<Category> categoryRepository)
    {
        //This passes
        Dictionary<int, BaseCatalogModel> dic1 = new Dictionary<int, BaseCatalogModel>();
        dic1.Add(1, new Product());
        dic1.Add(2, new Category());
        dic1.Add(3, new BaseCatalogModel());

        //This not. 
        //The error: cannot convert from 'YoYo.Core.Data.Repositories.EfRepository<YoYo.Commerce.Common.Domain.Catalog.Product>' 
        //to 'YoYo.Core.Data.Repositories.EfRepository<YoYo.Commerce.Common.Domain.Catalog.BaseCatalogModel>'
        Dictionary<int, EfRepository<BaseCatalogModel>> dic2 = new Dictionary<int, EfRepository<BaseCatalogModel>>();
        dic2.Add(1, new EfRepository<Product>());
        dic2.Add(2, new EfRepository<Category>());
    } 
```

长期交易：在在线商店工作，我想在目录存储库中保存与管理目录相关的所有存储库的集合。

这个想法是从一个存储库管理整个目录。

存储库集合是字典类型）

我无法将任何 BaseCatalogModel 派生类型存储库添加到集合中。

我很乐意在上述方面获得任何帮助或获得更好实施的建议。

```
public class BaseCatalogModel
{
    public int Id { get; set; }
    ...
}
public class Category:BaseCatalogModel
{
    ...
}
public class Product : BaseCatalogModel
{
    ...
}

public class CatalogRepository : ICatalogRepository 
{
    private readonly Dictionary<Type, IRepository<BaseEntity>> _repositoriesCollection= new Dictionary<Type, IRepository<BaseEntity>>();
    public CatalogRepository(IRepository<Product> productRepository, IRepository<Category> categoryRepository)
    {
        _repositoriesCollection.Add(typeof(Category), categoryRepository); //==> this fails 
        _repositoriesCollection.Add(typeof(Product), productRepository);    //==> this fails
    }

    public T GetCatalogItem<T>(int id) where T : BaseCatalogModel
    {
        //returns a catalog item using type and id
    }

    public IEnumerable<T> GetCatalogItem<T>() where T : BaseCatalogModel
    {
        //returns the entire collection of catalog item
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:27:00.227

所以这是泛型的一个相当普遍的问题。

想象 2 个班级`class Base`和`class A`. `class A`从`Base`.

```
 public class Base { }

    public class A : Base { } 
```

现在考虑`List<T>`。您可以从`List<T>`持有 Base 或 A 的类开始：

```
List<Base> x = new List<Base>(); 
```

和

```
List<A> y = new List<A>(); 
```

一个常见的误解是 y 的类必须是 x 的类的后代，但这不可能是真的，因为 x 有一个类似的方法`Add(Base item)`，而 y 有一个类似的方法`Add(A item)`，编译器不可能保证在 y该接口将与 x 的接口兼容。这是因为如果您将一个实例`List<A>`视为一个实例，`List<Base>`则没有什么可以阻止使用 Base 的实例或 Base 的另一个子类调用 Add。

现在可以保证接口的某些部分是兼容的。它们是返回类 A 实例的任何部分，因为 A 总是可以代替 Base。

如果您的界面仅输出泛型并且您使用的是 .net 4，则有一个简单的解决方案。out 通用修饰符：

```
 public class Example
    {

        private readonly Dictionary<Type, IRepository<Base>> _repositoriesCollection =
            new Dictionary<Type, IRepository<Base>>();

        public void DoSomething()
        {
            _repositoriesCollection.Add(typeof(A), new Repository<A>());
        }
    }

    interface IRepository<out T> where T : Base
    {
        T MakeSomeItem(string info);
        //void AddSomeItem(string info, T itemToAdd); <- this will not 
                                                        // work because T
                                                        // is out - so can't 
                                                        // go in... 
        IEnumerable<T> MakeSomeListOfItems(); // This is OK because 
             // IEnumerable<T> is declared as IEnumerable<out T> in the fx

        //List<T> Something(); <- not ok because List<T> is not List<out T>
    }

    public class Repository<T> : IRepository<T> where T : Base
    {
        public T MakeSomeItem(string info)
        {
            throw new NotImplementedException();
        }

        public IEnumerable<T> MakeSomeListOfItems()
        {
           throw new NotImplementedException();
        }
    }

    public class Base { }

    public class A : Base { } 
```

此解决方案不适用于 2 种情况；当您需要将项目传递到您的界面以及不使用 .net 4 时。

这两种情况也有许多不同的解决方案。

1）我也需要将一个项目传递到接口中，并且我正在使用.net 4 - 只需将其作为 Base 传递，如果您需要维护类型安全，请在其他地方使用通用方法将其包装起来。

```
 interface IRepository<out T> where T : Base
    {
        T MakeSomeItem(string info);
        void AddSomeItem(string info, Base itemToAdd);
    }

    public class Repository<T> : IRepository<T> where T : Base
    {
        public T MakeSomeItem(string info){ throw new NotImplementedException(); }

        public void AddSomeItem(string info, Base itemToAdd)
        {
            T castedItem = (T) itemToAdd; //fails here at 
                                          //run time if not 
                                          // correct type
            AddSomeItem(info, itemToAdd);
        }

        public void AddSomeItem(string info, T itemToAdd)
        {
            /// do it for real...
        }
    } 
```

2) 如果您不使用 .net 4，那么您还可以执行其他操作，强制存储库实现您的接口的 Base 版本：

```
interface IRepository<T> where T : Base
{
    T MakeSomeItem(string info);
    void AddSomeItem(string info, T itemToAdd)
}

public class Repository<T> : IRepository<Base>, IRepository<T> where T : Base
{
    public T MakeSomeItem(string info) { throw new NotImplementedException(); }

    public void AddSomeItem(string info, Base itemToAdd)
    {
        T castedItem = (T) itemToAdd; //fails here at 
                                      //run time if not 
                                      // correct type
        AddSomeItem(info, itemToAdd);
    }

    public void AddSomeItem(string info, T itemToAdd)
    {
        /// do it for real...
    }

    Base IRepository<Base>.MakeSomeItem(string info)
    {
        return MakeSomeItem(info);
    }
} 
```

如果你想保持你的输入是强类型的，你还可以做更多的事情——但我认为我的回答现在已经足够长了。

# ruby-on-rails - 检查电子邮件地址是否作为 Google 帐户有效

> ID：11696721
> 
> 赞同：5
> 
> 时间：2012-07-27T23:03:37.973
> 
> 标签：ruby-on-rails, google-docs, google-docs-api

我正在开发一个应用程序，我们通过 API 与谷歌文档集成。我们通过 API 与系统中注册的各种成员（电子邮件地址）共享这些文档。我们想知道会员（电子邮件地址）是否有可接受的 Google 帐户电子邮件地址。似乎可以通过三种不同的方式将电子邮件地址用作 Google 帐户：

1.  常规 gmail 电子邮件地址（例如，joe@gmail.com）
2.  谷歌应用支持的电子邮件地址（例如，joe@somecompany.com，其中 somecompany.com 使用谷歌应用）
3.  使用普通的旧电子邮件地址（例如 joe@yahoo.com）

在第一次开发解决方案时，我在域名上使用 MX 记录查找，以查看它是否得到 google 的支持。这适用于#1 和#2，但不适用于#3。我们没有意识到用户可以注册一个谷歌帐户并使用他们的“常规”电子邮件地址。有什么方法可以确定电子邮件地址是否是有效的谷歌帐户电子邮件地址，以便当该用户使用该电子邮件地址登录谷歌时，他们可以访问谷歌文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:10:47.850

据我所知，唯一可靠的解决方案是要求用户使用 OpenID（[Google OpenID](https://developers.google.com/accounts/docs/OpenID)）从您的网站登录他们的 Google 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:13:04.233

[你可以使用谷歌的 openid](https://developers.google.com/accounts/docs/OpenID#Parameters)。请参阅 openid.ax.required 参数。本质上，您是在要求 google 告诉您用户的电子邮件地址。我听说谷歌很好地告诉你用户的电子邮件地址。但是，请注意 afaik openid 本身并不要求身份提供者告诉服务提供者（您）这种事情。因此，我不知道谷歌将来是否还会告诉你电子邮件地址。

# c# - 对依赖多种方法的方法进行单元测试

> ID：11696725
> 
> 赞同：1
> 
> 时间：2012-07-27T23:04:18.833
> 
> 标签：c#, unit-testing, c#-4.0, moq

我有一个在单独的类`MethodA`中调用`MethodB`的（一个遵循接口的）。

`MethodB`里面有一个`StreamReader`，所以我将调用重构`new StreamReader()`为一个新的`MethodC`（在同一个类中`MethodB`）。

为了测试`MethodA`，我需要模拟`MethodB`，但我还需要能够通过`MethodB`模拟进行测试`MethodC`。

（我想很明显我有点迷路了。）

```
namespace JimBob.CsvImporter.Entity
{

public interface IIOManager
{
    TextReader ReturnReader(string path);

    int GetNumberOfColumnsInFile(string filePath, List<string> errorMessageList);
}

public class IOManager : IIOManager
{
    //MethodC
    public TextReader ReturnReader(string filePath)
    {
        return new StreamReader(filePath);
    }

    //MethodB
    public int GetNumberOfColumnsInFile(string filePath, List<String> errorMessageList)
    {
        int numberOfColumns = 0;
        string lineElements = null;

        try
        {
            using (StreamReader columnReader = (StreamReader)ReturnReader(filePath))
            {
                lineElements = columnReader.ReadLine();
                string[] columns = lineElements.Split(',');
                numberOfColumns = columns.Length;
            }
            return numberOfColumns;
        }
        catch (Exception ex)
        {
            errorMessageList.Add(ex.Message);
            return -1;
        }
    }
}

public class EntityVerification
{

    private IIOManager _iomgr;

    public EntityVerification(IIOManager ioManager)
    {
        this._iomgr = ioManager;
    }

    //MethodA
    public void ValidateNumberOfColumns(
        string filePath, int userSpecifiedColumnCount, 
         List<String> errorMessageList
   )
    {
        int numberOfColumnsInFile = 
            _iomgr.GetNumberOfColumnsInFile(filePath, errorMessageList);

        if (userSpecifiedColumnCount != numberOfColumnsInFile) errorMessageList.Add(
            "Number of columns specified does not match number present in file.");
    } 
```

目前我的测试如下：

```
 [Test]
    public void GetNumberOfColumnsInFile_ReturnsNumberOfColumns_Returns6()
    {
        Mock<IIOManager> mock = new Mock<IIOManager>();
        mock.Setup(x => x.ReturnReader(It.IsAny<string>())).Returns(
           new StringReader("the,big,fat,dog,ate,cats"));
        EntityVerification testObject = new EntityVerification(mock.Object);
        List<String> errorMessageList = new List<string>();
        int i = testObject.GetNumberOfColumnsInFile("blabla.txt", errorMessageList);
        Assert.AreEqual(i , 6);
    } 
```

但这是在它是实体验证类的一部分时使用的。

我错过了什么吗？任何援助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:56:04.177

在测试中`MethodA`，Mock `MethodB`。在单独的测试中，Mock `MethodC`to test `MethodB`.

的测试`MethodA`独立于 的测试`MethodB`，所以不要想太多。

# scala - (Play 2.0) 为 AnyContent 设置最大 POST 大小

> ID：11696728
> 
> 赞同：15
> 
> 时间：2012-07-27T23:04:54.657
> 
> 标签：scala, playframework-2.0

我在 Play 2.0 中使用 Scala，每当将大数据（超过 100KB）发布到特定端点时，我都会收到 413 错误。它正在使用 anyContent 解析器，并且为此特定 API 使用任何其他解析器是不合理的。

Stack Overflow 上还有其他问题展示了如何增加文本或 JSON 请求的最大 POST 大小。我如何为任何内容执行此操作，或者只是增加项目范围内的限制？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-29T11:00:13.353

**TL;DR**添加`parsers.text.maxLength = 512k`或任何大小到您的`application.conf`

**更新**：在[官方文档中找到](http://www.playframework.org/documentation/2.0/ScalaBodyParsers)

它实际上记录在[API](http://www.playframework.org/documentation/api/2.0.2/scala/index.html#play.api.mvc.BodyParsers$parse$)中，尽管需要一些挖掘才能真正找到它。

展开 DEFAULT_MAX_TEXT_LENGTH 显示文本数据的最大大小可以通过设置来`parsers.text.maxLength`配置`application.conf`。查看源本身，默认值为 100Kb，因此这很可能是您需要设置的。

在一些相关的说明中，我们还有`maxLength`可用于任何 BodyParser 的方法，这意味着对于非文本数据，除非您应用该方法，否则没有上限。事实上，我们可以将它应用到 AnyContent 解析器，如下所示：

```
def foo = Action(parse.maxLength(512 * 1024, parser = parse.anyContent)) { implicit req =>
    req.body match {
        case Left(_) => EntityTooLarge
        case Right(body) => Ok("This is totally not too large")
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T17:10:46.827

请注意那些使用原始解析器的人，将最大值作为参数：

动作（解析.raw（10000 * 1024））

有关详细信息，请参阅 parse.raw 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-15T09:49:32.787

原始正文解析器不会将整个正文缓冲到内存中，它会将正文缓冲到一个点（使用 play.http.parser.maxMemoryBuffer 配置，默认为 100kb），一旦超过，它将正文刷新到文件并开始将其写入文件，但它对写入文件的数据量也有限制，该文件使用 play.http.parser.maxDiskBuffer 进行配置，默认为 10mb。您的 15mb 主体可能超过了该限制，因此您需要相应地增加 play.http.parser.maxDiskBuffer。这一切都在文档中进行了解释。

要回答您关于如何流式传输请求的实际问题，此处提供了用 Java 编写自定义正文解析器的文档：

[https://www.playframework.com/documentation/2.6.x/JavaBodyParsers#Writing-a-custom-body-parser](https://www.playframework.com/documentation/2.6.x/JavaBodyParsers#Writing-a-custom-body-parser)

这解释了您需要了解的关于 Play 正文解析器如何工作以及如何进行流式正文解析的大多数事情，在此答案中复制该文档没有意义。

# javascript - JavaScript 奇怪的替换

> ID：11696732
> 
> 赞同：-1
> 
> 时间：2012-07-27T23:05:38.293
> 
> 标签：javascript

我正在开发一个简单的项目，该项目会在您可以在聊天时使用的图像中生成 Facebook BBCode（或类似的东西）。

这是我的完整代码：

```
<html>
<head>
</head>
<body>
<script type="text/javascript">
function gear()
{
var textArea = document.getElementById("id");
var insertedText = theForm.theText.value;
var charChanger = insertedText.replace(/a/ig, "[[f9.cha]] ").replace(/b/gi, "[[f9.chb]] ").replace(/c/gi, "[[f9.chc]] ").replace(/d/gi, "[[f9.chd]] ").replace(/e/gi, "[[f9.che]] ").replace(/f/gi, "[[f9.chf]] ").replace(/g/gi, "[[f9.chg]] ").replace(/h/gi, "[[f9.chh]] ").replace(/i/gi, "[[f9.chi]] ").replace(/j/gi, "[[f9.chj]] ").replace(/k/gi, "[[f9.chk]] ").replace(/l/gi, "[[f9.chl]] ").replace(/m/gi, "[[f9.chm]] ").replace(/n/gi, "[[f9.chn]] ").replace(/o/gi, "[[f9.cho]] ").replace(/p/gi, "[[f9.chp]] ").replace(/q/gi, "[[f9.chq]] ").replace(/r/gi, "[[f9.chr]] ").replace(/s/gi, "[[f9.chs]] ").replace(/t/gi, "[[f9.cht]] ").replace(/u/gi, "[[f9.chu]] ").replace(/v/gi, "[[f9.chv]] ").replace(/w/gi, "[[f9.chw]] ").replace(/x/gi, "[[f9.chx]] ").replace(/y/gi, "[[f9.chy]] ").replace(/z/gi, "[[f9.chz]] ");

textArea.innerHTML = charChanger;
}
</script>
<div align="center"><form name="theForm">
<textarea rows="5" name="theText" cols="120" onkeyup="gear();"></textarea>
<br>
<textarea readonly id="id" rows="20" cols="120"></textarea>
</form></div>
</body>
</html> 
```

有两个`<textarea>`s。第一个用字符串填充，第二个用它们的替换值替换字符串。

并且该功能在 keyup 事件后开始工作。它应该可以完美地工作，但它会返回一些从字符到 g 的奇怪替换（其余的都在工作）。那么有解决办法吗？或者另一种方式，比如使用数组替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:12:43.490

您不需要更换 100 个，只需一个即可。

```
insertedText.replace(/([a-z])/gi, '[[f9.ch$1]]') 
```

[http://jsfiddle.net/PRYWm/1/](http://jsfiddle.net/PRYWm/1/)

# mysql - MySQL Select/Join 仅返回第一行

> ID：11696733
> 
> 赞同：0
> 
> 时间：2012-07-27T23:05:47.370
> 
> 标签：mysql, select, join, left-join

我有这个`MySQL`查询从我的数据库中返回一些数据，但由于某种原因，它只返回第一行，我做错了什么？

```
SELECT `a`.`id` AS topic_id, `a`.`text` AS topic_text, 
 `a`.`date` AS topic_date, `b`.`name` AS author_name, 
 `b`.`picture` AS author_picture, `b`.`facebook_id` AS author_facebook_id, 
SUM(CASE WHEN c.topic_id IS NOT NULL THEN 1 ELSE 0 END) AS topic_likes_number, 
SUM(CASE WHEN c.topic_id IS NOT NULL AND c.author_id = 1 THEN 1 ELSE 0 END) AS topic_liked, 
SUM(CASE WHEN d.topic_id IS NOT NULL THEN 1 ELSE 0 END) AS topic_dislikes_number, 
SUM(CASE WHEN d.topic_id IS NOT NULL AND c.author_id = 1 THEN 1 ELSE 0 END) AS topic_disliked, 
SUM(CASE WHEN e.topic_id IS NOT NULL THEN 1 ELSE 0 END) AS topic_comments_number
    FROM (`topics` AS a)
    INNER JOIN `users` AS b ON `b`.`id` = `a`.`author_id`
    LEFT JOIN `topics_likes` AS c ON `c`.`topic_id` = `a`.`id`
    LEFT JOIN `topics_dislikes` AS d ON `c`.`topic_id` = `a`.`id`
    LEFT JOIN `comments` AS e ON `e`.`topic_id` = `a`.`id`
    LIMIT 50 
```

这是我所期待的（多个主题）：

```
Array
(
    [0] => Array
        (
            [topic_id] => 1
            [topic_text] => Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            [topic_date] => 0000-00-00 00:00:00
            [author_name] => Claudius Ibn
            [author_picture] => 356a192b7913b04c54574d18c28d46e6395428ab.jpg
            [author_facebook_id] => 100003268692398
            [topic_likes_number] => 1
            [topic_liked] => 1
            [topic_dislikes_number] => 0
            [topic_disliked] => 0
            [topic_comments_number] => 0
        )
    [1] => Array
        (
            [topic_id] => 2
            [topic_text] => Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            [topic_date] => 0000-00-00 00:00:00
            [author_name] => Claudius Ibn
            [author_picture] => 356a192b7913b04c54574d18c28d46e6395428ab.jpg
            [author_facebook_id] => 100003268692398
            [topic_likes_number] => 1
            [topic_liked] => 1
            [topic_dislikes_number] => 0
            [topic_disliked] => 0
            [topic_comments_number] => 0
        )
    [2] => Array
        (
            [topic_id] => 3
            [topic_text] => Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            [topic_date] => 0000-00-00 00:00:00
            [author_name] => Claudius Ibn
            [author_picture] => 356a192b7913b04c54574d18c28d46e6395428ab.jpg
            [author_facebook_id] => 100003268692398
            [topic_likes_number] => 1
            [topic_liked] => 1
            [topic_dislikes_number] => 0
            [topic_disliked] => 0
            [topic_comments_number] => 0
        )
    [...]
) 
```

这就是我得到的（一个主题）：

```
Array
(
    [0] => Array
        (
            [topic_id] => 1
            [topic_text] => Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            [topic_date] => 0000-00-00 00:00:00
            [author_name] => Claudius Ibn
            [author_picture] => 356a192b7913b04c54574d18c28d46e6395428ab.jpg
            [author_facebook_id] => 100003268692398
            [topic_likes_number] => 1
            [topic_liked] => 1
            [topic_dislikes_number] => 0
            [topic_disliked] => 0
            [topic_comments_number] => 0
        )

) 
```

**解决方案：** 只需添加一个 group_by a.id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:07:41.390

这条线似乎是错误的，即使它可能不是你的问题：

```
LEFT JOIN `topics_dislikes` AS d ON `c`.`topic_id` = `a`.`id` 
```

# api - Youtube 字幕示例

> ID：11696735
> 
> 赞同：0
> 
> 时间：2012-07-27T23:06:28.813
> 
> 标签：api, web, youtube, gdata

谁能提供一个如何检索 YouTube 视频字幕的示例？

基于 API 文档，API 请求[https://gdata.youtube.com/feeds/api/videos?q=surfing&caption&v=2](https://gdata.youtube.com/feeds/api/videos?q=surfing&caption&v=2)

返回有关带字幕的冲浪视频列表。

但是，请求列表中的第一个视频

```
https://gdata.youtube.com/feeds/api/videos/bQX4fustG9Q?v=2&key=DEVELOPERKEY 
```

返回不显示任何字幕痕迹的提要

我错过了什么？

有人可以发布一个请求示例来检索该视频的字幕吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:07:34.333

根据[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_captions)，您不需要在初始请求中发送任何特殊参数，而是正常检索视频，然后查找链接`rel=http://gdata.youtube.com/schemas/2007#video.captionTracks`。

请注意，字幕链接仅对视频所有者可见。

# javascript - 重新创建 CSS3 过渡 Cubic-Bezier 曲线

> ID：11696736
> 
> 赞同：8
> 
> 时间：2012-07-27T23:06:29.313
> 
> 标签：javascript, math, css, css-transitions

在 CSS3 过渡中，您可以将计时函数指定为 'cubic-bezier:(0.25, 0.3, 0.8, 1.0)' 在该字符串中，您仅指定沿曲线的点 P1 和 P2 的 XY，因为 P0 和 P3 是始终分别为 (0.0, 0.0) 和 (1.0, 1.0)。

根据 Apple 的网站：x [is] 表示为整体持续时间的一部分，y 表示为整体变化的一部分

我的问题是如何将其映射回 javascript 中的传统一维 T 值？

--

[来自 Apple 文档关于使用过渡制作动画](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/AnimatingCSSTransitions/AnimatingCSSTransitions.html#//apple_ref/doc/uid/TP40008032-CH13-SW8)
![在此处输入图像描述](../Images/cb75897e5b2b49f1d6f311aa0801bf86.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-28T03:03:41.583

稍微浏览一下 webkit-source，以下代码将为 CSS3 过渡中使用的隐式曲线提供正确的 T 值：

[可视化演示 (codepen.io)](http://codepen.io/onedayitwillmake/pen/EHDmw)

希望这对某人有帮助！

```
function loop(){
    var t = (now - animationStartTime) / ( animationDuration*1000 );

    var curve = new UnitBezier(Bx, By, Cx, Cy);
    var t1 = curve.solve(t, UnitBezier.prototype.epsilon);
    var s1 = 1.0-t1;

    // Lerp using solved T
    var finalPosition.x = (startPosition.x * s1) + (endPosition.x * t1);
    var finalPosition.y = (startPosition.y * s1) + (endPosition.y * t1);
}

/**
* Solver for cubic bezier curve with implicit control points at (0,0) and (1.0, 1.0)
*/
function UnitBezier(p1x, p1y, p2x, p2y) {
    // pre-calculate the polynomial coefficients
    // First and last control points are implied to be (0,0) and (1.0, 1.0)
    this.cx = 3.0 * p1x;
    this.bx = 3.0 * (p2x - p1x) - this.cx;
    this.ax = 1.0 - this.cx -this.bx;

    this.cy = 3.0 * p1y;
    this.by = 3.0 * (p2y - p1y) - this.cy;
    this.ay = 1.0 - this.cy - this.by;
}

UnitBezier.prototype.epsilon = 1e-6; // Precision  
UnitBezier.prototype.sampleCurveX = function(t) {
    return ((this.ax * t + this.bx) * t + this.cx) * t;
}
UnitBezier.prototype.sampleCurveY = function (t) {
    return ((this.ay * t + this.by) * t + this.cy) * t;
}
UnitBezier.prototype.sampleCurveDerivativeX = function (t) {
    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;
}

UnitBezier.prototype.solveCurveX = function (x, epsilon) {
    var t0; 
    var t1;
    var t2;
    var x2;
    var d2;
    var i;

    // First try a few iterations of Newton's method -- normally very fast.
    for (t2 = x, i = 0; i < 8; i++) {
        x2 = this.sampleCurveX(t2) - x;
        if (Math.abs (x2) < epsilon)
            return t2;
        d2 = this.sampleCurveDerivativeX(t2);
        if (Math.abs(d2) < epsilon)
            break;
        t2 = t2 - x2 / d2;
    }

    // No solution found - use bi-section
    t0 = 0.0;
    t1 = 1.0;
    t2 = x;

    if (t2 < t0) return t0;
    if (t2 > t1) return t1;

    while (t0 < t1) {
        x2 = this.sampleCurveX(t2);
        if (Math.abs(x2 - x) < epsilon)
            return t2;
        if (x > x2) t0 = t2;
        else t1 = t2;

        t2 = (t1 - t0) * .5 + t0;
    }

    // Give up
    return t2;
}

// Find new T as a function of Y along curve X
UnitBezier.prototype.solve = function (x, epsilon) {
    return this.sampleCurveY( this.solveCurveX(x, epsilon) );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T00:22:14.640

您想找到任何时间值 t [0,1] 的 [0,1] 值吗？三次贝塞尔曲线有一个定义明确的方程。维基百科页面：[http ://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B.C3.A9zier_curves](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B.C3.A9zier_curves)

所以我不必输入他们的（可能是 LaTeX 格式的）公式，我从[http://local.wasp.uwa.edu.au/~pbourke/geometry/bezier/index2.html](http://local.wasp.uwa.edu.au/~pbourke/geometry/bezier/index2.html)复制粘贴了相同的公式. 这也有一个 C 实现，通过快速阅读，应该很容易移植到 javascript：

`B(u) = P0 * ( 1 - u )3 + P1 * 3 * u * ( 1 - u )2 + P2 * 3 * u2 * ( 1 - u ) + P3 * u3`

他在该页面上调用 mu 是您的时间变量 t。

编辑：如果你不想做数学，看起来有人已经用 javascript 编写了一个小型实用程序库来做基本的贝塞尔曲线数学：[https](https://github.com/sporritt/jsBezier) ://github.com/sporritt/jsBezier 。pointOnCurve(curve, location) 看起来正是您所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T01:22:27.000

我已经尝试搜索了很多时间和表格，并且很明显我已经达到了一个简单而快速的目标。诀窍是以这种形式获得三次贝塞尔函数： P(u) = u^3(c0 + 3c1 -3c2 +c3) + u^2(3c0 -6c1 +3c2) + u(-3c0 +3c1) + c0其中 ci 是控制点。另一部分是使用二分搜索从 x 中搜索 y。

```
static public class CubicBezier {
    private BezierCubic bezier = new BezierCubic();
    public CubicBezier(float x1, float y1, float x2, float y2) {
        bezier.set(new Vector3(0,0,0), new Vector3(x1,y1,0), new Vector3(x2,y2,0), new Vector3(1,1,1));
    }
    public float get(float t) {
        float l=0, u=1, s=(u+l)*0.5f;
        float x = bezier.getValueX(s);
        while (Math.abs(t-x) > 0.0001f) {
            if (t > x)  { l = s; }
            else        { u = s; }
            s = (u+l)*0.5f;
            x = bezier.getValueX(s);
        }
        return bezier.getValueY(s);
    }
};

public class BezierCubic {
private float[][] cpoints = new float[4][3];
private float[][] polinom = new float[4][3];

public BezierCubic() {}

public void set(Vector3 c0, Vector3 c1, Vector3 c2, Vector3 c3) {
    setPoint(0, c0);
    setPoint(1, c1);
    setPoint(2, c2);
    setPoint(3, c3);
    generate();
}

public float getValueX(float u) {
    return getValue(0, u);
}

public float getValueY(float u) {
    return getValue(1, u);
}

public float getValueZ(float u) {
    return getValue(2, u);
}

private float getValue(int i, float u) {
    return ((polinom[0][i]*u + polinom[1][i])*u + polinom[2][i])*u + polinom[3][i];
}

private void generate() {
    for (int i=0; i<3; i++) {
        float c0 = cpoints[0][i], c1 = cpoints[1][i], c2 = cpoints[2][i], c3 = cpoints[3][i];
        polinom[0][i] = c0 + 3*(c1 - c2) + c3;
        polinom[1][i] = 3*(c0 - 2*c1 + c2);
        polinom[2][i] = 3*(-c0 + c1);
        polinom[3][i] = c0;
    }
}

private void setPoint(int i, Vector3 v) {
    cpoints[i][0] = v.x;
    cpoints[i][1] = v.y;
    cpoints[i][2] = v.z;
} 
```

}

# c# - 当我添加和删除内存中的某个静态集合时，我是否遇到了内存泄漏？

> ID：11696737
> 
> 赞同：0
> 
> 时间：2012-07-27T23:06:45.490
> 
> 标签：c#, asp.net, memory-management, memory-leaks

我目前有一个类，我在其中存储一个静态集合，该集合在调用某些方法时获取添加和删除的对象。这是当前代码：

```
public class MatchMaker : Hub
    {

    private static HashSet<SoloUser> soloUsers = new HashSet<SoloUser>();

     //Client Requests
    public void findNewPartner(string Name, string Country)
    {

        SoloUser soloUser = soloUsers.Users.FirstOrDefault(s => (s.Name == Name) && (s.Country == Major));
        if (soloUsers.Users.Count > 0){
            Clients.partnerRequestResult(soloUsers.Users.FirstOrDefault());
            soloUsers.Users.Remove(soloUser);
            Process currentProcess = System.Diagnostics.Process.GetCurrentProcess();
            long totalBytesOfMemoryUsed = currentProcess.WorkingSet64;
            Debug.WriteLine("TotalMemoryUsed: " + totalBytesOfMemoryUsed);
        }
        else
        {
            soloUser = new SoloUser { 
                Name = Name,
                Country = Country                       
            };
            soloUsers.Users.Add(soloUser);
            Process currentProcess = System.Diagnostics.Process.GetCurrentProcess();
            long totalBytesOfMemoryUsed = currentProcess.WorkingSet64;
            Debug.WriteLine("TotalMemoryUsed: " + totalBytesOfMemoryUsed);
        }

    }
} 
```

当我运行时：

```
Process currentProcess = System.Diagnostics.Process.GetCurrentProcess();
long totalBytesOfMemoryUsed = currentProcess.WorkingSet64;
Debug.WriteLine("TotalMemoryUsed: " + totalBytesOfMemoryUsed); 
```

从集合中添加或删除一个对象，无论我是否从集合中添加或删除该对象，输出`totalBytesOfMemoryUsed`变得越来越大（每次 2mb），这是由于内存泄漏吗？这甚至是检查内存管理的充分方法吗？当我从集合中移除一个对象时，我需要处理它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:18:06.793

这里可能没有足够的信息来评论内存泄漏，但在一般情况下 - 相信[垃圾收集器](https://stackoverflow.com/questions/233596/best-practice-for-forcing-garbage-collection-in-c-sharp)。
如果您仍然怀疑内存泄漏，请使用内存分析器（例如[ANTS](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)或[dotTrace](http://www.jetbrains.com/profiler/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:15:11.293

`IDisposable`一个很好的做法是在您完成后立即处理任何实现的对象。

鉴于此，您需要记住 .NET 垃圾收集器是不确定的。这意味着您不必事先知道何时进行收集。当运行时需要执行收集时，它会尝试执行该操作。无论如何，你不应该害怕 2mb。让垃圾收集器完成它的工作。

试图通过获取内存工作集或查看 Windows 任务管理器来分析程序的内存使用情况通常是在兔子洞中旅行。在您实际遇到问题后使用内存分析器（例如[ANTS](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)）。

我还建议阅读有关垃圾收集器的 MSDN。你可以从[这里](http://msdn.microsoft.com/en-us/library/ee787088.aspx)开始。

# javascript - 将另一个 html 的正文加载到 jQuery 并存储为 javascript var

> ID：11696738
> 
> 赞同：0
> 
> 时间：2012-07-27T23:06:48.970
> 
> 标签：javascript, jquery, html

我想要做的是读取另一个html的正文内容并将其保存为javascript函数中的var。我目前使用 jQuery 拥有的是`$(id of this document).load(link goes here)`. 例如：

`$("#test").load("/form.cgi?A1=?")`

该表单只有一个包含`<body>some value</body>`

`<a id="test">hello</a>`这个方法很好用，因为我根本不需要使用 DOM。

但是，我想将数据存储到 javascript 变量中。所以，我想我已经完成了一半。有人可以阐明如何做到这一点吗？

理想情况下，类似：

'功能测试） {

var x = $.load(test);

//操作x如parseInt/parseFloat等

} ' 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:56:57.733

建立在codingbiz提供的基础上，这就是我目前所拥有的。它不漂亮，但它确实可以解决问题：

```
$.get( /form.cgi?A1=?, function(data){
    document.getElementById("value").innerHTML = data;
    var y = parseFloat(document.getElementById("value").innerHTML);
    alert(y);
}); 
```

我使用的原因`document.getElementById("value").innerHTML`是删除`<body>`围绕所需值（即`<body>value</body>`）的标签。到目前为止，这是我知道的关于如何正确解析 Int/parseFloat 的唯一方法。如果我不这样做，那么由于 body 标签，它会返回 NaN。如果你有更好的方法，请告诉我。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:14:52.630

```
var x = $("#test").load("/form.cgi?A1=?").html(); 
```

如果您希望 html 文件的内容保持原样，则应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:16:49.143

`.load()`是 的缩写`$.ajax()`，因此，您可以像这样使用普通的 Ajax 请求：

jQuery：

```
var result;
$.ajax({
    type: 'POST',
    url: '/form.cgi?A1=?',
    success: function(data) {
        result = data;
    },
    async: false
    // async to false so that we don't access an empty variable before the request is finished
}); 
```

演示：http: [//jsfiddle.net/SO_AMK/wHXrM/](http://jsfiddle.net/SO_AMK/wHXrM/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T23:18:07.373

你可能想改变你的方法：

```
var myVar = '';
$.get('/form.cgi?A1=?', function(data) {
  myVar = data;
});

alert(myVar); 
```

因为这个ajax调用是在页面加载过程中异步调用的，所以无法`myVar`在回调函数之外访问到的值，并且回调函数没有被调用，myVar的值也没有改变，`alert`执行的语句是为什么你得到空数据。

要保留此答案，请使用`myVar`内部回调函数，如下所示：

```
var myVar = '';
var externalVar = '<p>text</p>';
$.get('/form.cgi?A1=?', function(data) {
  myVar = data;
  //use myVar here for whatever purpose you want it for
  var myNewVar = myVar + ' ' + externalVar;
}); 
```

您可以在回调函数完成后立即使用 的值，`myVar`这可能是 ajax 调用后的 5 秒、30 秒等

```
<input type="button" value="pol" onclick="alert(myVar);" /> //should work 
```

有关更多信息，请参阅我在评论中发布的链接

# c++ - 为什么编译器会警告 setprecision 中的隐式转换？

> ID：11696739
> 
> 赞同：8
> 
> 时间：2012-07-27T23:06:54.103
> 
> 标签：c++

当我编译以下代码时，编译器会给我警告：

```
"Implicit conversion loses integer precision: 'std::streamsize' (aka 'long') to 'int'". 
```

我对这个警告有点困惑，因为我只是尝试保存精度的当前值，以便稍后将其设置回原始值。

```
#include <iomanip>
#include <iostream>

int main() {
  std::streamsize prec = std::cout.precision();
  std::cout << std::setprecision(prec);
} 
```

在这种情况下，保存精度值并稍后将其设置回来的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T23:19:46.060

看起来这只是标准规范中的疏忽。

`ios_base::precision`有两个重载，一个获取，一个设置精度：

```
// returns current precision
streamsize precision() const;

// sets current precision and returns old value
streamsize precision(streamsize prec) const; 
```

所以这段代码不会给你警告：

```
#include <iostream>

int main() {
  std::streamsize prec = std::cout.precision(); // gets
  std::cout.precision(prec); // sets
} 
```

但是，该`setprecision()`函数只需要一个普通的 old `int`：

```
unspecified-type setprecision(int n); 
```

并返回一个未指定的函子，当它被流使用时，`str`具有以下效果：

```
str.precision(n); 
```

在你的情况下，`streamsize`不是`int`（也不一定是），因此是警告。可能应该更改标准，以便`setprecision`'s 参数不是`int`，但是`streamsize`。

您可以`precison()`像上面那样只调用自己，或者假设`int`足够并强制转换。

```
#include <iomanip>
#include <iostream>

int main() {
  std::streamsize prec = std::cout.precision();
  std::cout << std::setprecision(static_cast<int>(prec));
} 
```

*编辑：[显然它被提交修复并且没有达成共识（关闭为非缺陷）](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-closed.html#1148)。*

# javascript - Sencha Touch 2 服务器认证令牌和登录代码

> ID：11696742
> 
> 赞同：0
> 
> 时间：2012-07-27T23:07:18.603
> 
> 标签：javascript, authentication, sencha-touch, extjs

我正在进入 Sencha Touch 2，并为需要登录的网站下载了一些简单的文件。该代码要求我输入身份验证令牌和服务器登录代码，但不知道该怎么做。我以前从未见过这样的事情。

这是代码：

```
Ext.regController('UserSessions', {
store: App.stores.sessions,
new: function() {
    this.destroy();
    var model = new App.models.Session();
    App.views.loginForm.load(model);
    App.views.loginForm.query('#loginFormLoginButton')[0].on({
        tap: function() { this.save(model, App.views.loginForm.getValues(), this); },
        scope: this
    });

    App.views.loginForm.query('#loginFormResetButton')[0].on({
        tap: function() { App.views.loginForm.reset() },
        scope: this
    });

    App.views.viewport.reveal('loginForm');
},

save: function(record, data, form) {
    console.log("Controller.Sessions.save");
    data.authToken = this.getAuthToken();
    record.set(data);
    var errors = record.validate();

    if (errors.isValid()) {
        this.store.create(data);
        console.log("Controller.Sessions.save login success");

        Ext.dispatch({
            controller: 'Main',
            action: 'index'
        });
    } else {
        console.log("Controller.Sessions.save login failed");
        form.showErrors(errors);
    }
},

destroy: function() {
    console.log("Controller.Sessions.destroy");
},

getAuthToken: function() {
    // TODO put your server login code here
    // and set the authToken
    return "notavalidauthtoken";
}
}); 
```

# python - BeautifulSoup：提取 img alt 数据

> ID：11696745
> 
> 赞同：4
> 
> 时间：2012-07-27T23:07:32.663
> 
> 标签：python, html, beautifulsoup, scrape

我有以下图像 html，我正在尝试解析 alt 中的信息。目前我能够成功提取图像。

html（我目前解析的

```
<img class="rslp-p" alt="Sony Cyber-shot DSC-W570 16.1 MP Digital Camera - Silver" src="http://i.ebayimg.com/00/$(KGrHqZ,!j!E5dyh0jTpBO(3yE7Wg!~~_26.JPG?set_id=89040003C1" itemprop="image" /> 
```

我根据解析的内容构造图像名称：

当前代码

```
def main(url, output_folder="~/images"):
         """Download the images at url"""
         soup = bs(urlopen(url))
         parsed = list(urlparse.urlparse(url))
         count = 0
         for image in soup.findAll("img"):
             print image
             count += 1
             print count
             print "Image: %(src)s" % image
             image_url = urlparse.urljoin(url, image['src'])
             filename = image["src"].split("/")[-1].split("?")[0].replace("$",'').replace(".JPG",".jpg").replace("~~_26",str(count)).lstrip("(")
             parsed[2] = image["src"]
             outpath = os.path.join(output_folder, filename)
             urlretrieve(image_url, outpath) 
```

我想做的是提取是

```
alt="Sony Cyber-shot DSC-W570 16.1 MP Digital Camera - Silver" 
```

我还想在提取图像时使用 alt 数据作为文件名。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T23:23:56.077

在你的`for`循环中，你可以通过简单地做

```
image.get('alt', '') 
```

[BeautifulSoup 的文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Parsing%20HTML)（“标签的属性”）对此进行了解释。

# pdf - PDF 文档可以包含具有不同 DPI 的图像吗？

> ID：11696747
> 
> 赞同：5
> 
> 时间：2012-07-27T23:07:39.560
> 
> 标签：pdf, dpi, poppler

这个问题说明了一切。是否存在包含具有不同 dpi（每英寸点数）图像的 PDF 文档？

还是假设如果我知道一张图像的 dpi，我就知道整个文档？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T09:14:46.647

我赞成@ypnos 的回答，这是完全正确的。

但我想通过展示该`pdfimages`实用程序的一个最新的新功能来补充它。

`pdfimages`以前知道能够从 PDF 文件中提取图像（这是它唯一有用的目的）。***但是，现在您也可以使用它来调查有关所用图像的更多详细信息，而无需提取它们。***

`-list`使用下一个命令，我使用新参数查询某个 PDF 文件第 7 页和第 8 页上的所有图像的数据：

```
pdfimages -list -f 7 -l 8 ct-magazin-14-2012.pdf

  页面编号类型宽度高度颜色comp bpc enc interp 对象ID
  -------------------------------------------------- ------------------
     7 0 图像 581 838 rgb 3 8 jpeg no 39 0
     7 1 图像 4 4 RGB 3 8 图像编号 40 0
     7 2 图像 314 332 RGB 3 8 jpx 无 44 0
     7 3 图像 358 430 RGB 3 8 jpx 无 45 0
     7 4 图像 4 4 RGB 3 8 图像编号 46 0
     7 5 图像 4 4 RGB 3 8 图像编号 47 0
     7 6 图像 4 6 RGB 3 8 图像编号 48 0
     7 7 图像 596 462 RGB 3 8 jpx 无 49 0
     7 8 图像 4 6 RGB 3 8 图像编号 50 0
     7 9 图像 4 4 RGB 3 8 图像编号 51 0
     7 10 图像 8 10 RGB 3 8 图像编号 41 0
     7 11 图像 6 6 RGB 3 8 图像编号 42 0
     7 12 图像 113 27 RGB 3 8 jpx 无 43 0
     8 13 图像 582 839 灰色 1 8 jpeg no 2080 0
     8 14 图像 344 364 灰色 1 8 jpx 无 2079 0

```

**但是请注意**：此版本`pdfimages`是来自 Poppler 的版本（来自 XPDF 的版本不**（**还？）支持此新功能）：

```
pdf图像-版本

  pdf图像版本 0.20.2
  版权所有 2005-2012 Poppler 开发者 - http://poppler.freedesktop.org
  版权所有 1996-2011 Glyph & Cog, LLC

```

该`-list`选项首次出现在 2012 年 3 月 1 日发布的 Poppler v0.19.0 中。

现在，上面的列表并没有直接告诉您图像的分辨率（“dpi”）。该值取决于：*此图像在 PDF 页面上呈现的尺寸是多少？*

PDF 可以很容易地在 PDF 文件的不同位置使用相同的图像，在每种情况下使用不同的渲染大小。图像只需要嵌入到 PDF 中一次，但可以多次“通过引用”使用/渲染（低效构造的 PDF 可能仍包含多次相同的图像，但这是一个不同的主题......）

现在让我们弄清楚查看各个列标题可能产生的问题。他们的意思是什么？

**`page`**

*   包含图像的 PDF 中的页码。

**`num`**

*   当前列表的图像编号。

**`type`**

*   图像类型。可能的值是：（`image`不透明图像）、`mask`（单色图像蒙版）、`smask`（软蒙版图像）和`stencil`（用于绘制颜色或图案的单色蒙版图像）。***注意：*** *PDF 中图像的透明度是通过使用两个单独的 PDF 对象创建的：一个用于图像，一个用于遮罩或 smask。属于透明图像的遮罩/遮罩总是直接跟随列表中的图像。*

**`width`**

*   以像素为单位的图像宽度。

**`height`**

*   以像素为单位的图像高度。

**`color`**

*   图像色彩空间。可能的值为`gray`, `rgb`, `cmyk`, `lab`(L*a*b), `icc`(ICC based), `index`(indexed colours), `sep`(separation) 和`devn`(DeviceN)。

**`comp`**

*   图像使用的颜色分量的数量。

**`bpc`**

*   图像使用的每个颜色分量的*位数*。

**`enc`**

*   图像使用的*编码*（压缩）。可能的值是：（`image`光栅图像——可以在内部使用通用`/Flate`或`/LZW`压缩，但不是特殊图像编码）、`jpeg`（JPEG 压缩）、`jpx`（JPEG2000 压缩）、`jbig2`（JBIG2 压缩）和`ccitt`（传真压缩）。

**`interp`**

*   是`yes`在放大图像时是否请求插值。

**`object ID`**

*   文件中图像的 PDF 对象 ID（带有“生成号”）。

* * *

## 更新（2016 年 3 月）

从 Poppler v0.25.0（2013 年 12 月 11 日发布）及更高版本开始，该命令`pdfimages -list`现在包括新列，这些列指示PDF 渲染器在 PDF 页面中显示的每个嵌入图像的自动计算`x-ppi`（水平）和（垂直）分辨率`y-ppi`.

此外，还指出了每个图像（未压缩时）使用的大小（以字节/千字节为单位）及其大小压缩比（嵌入在 PDF 中）。

要显示与上述相同文件的结果（使用 Poppler v0.42.0）：

```
page num type width height color comp bpc enc interp objectID x-ppi y-ppi size ratio
------------------------------------------------------------------------------------
   7  0 image   581   838  rgb     3   8 jpeg   no       39 0    73    73 2107B 0.1%
   7  1 image     4     4  rgb     3   8 image  no       40 0   150   150   54B 112%
   7  2 image   314   332  rgb     3   8 jpx    no       44 0   150   150 19.0K 6.2%
   7  3 image   358   430  rgb     3   8 jpx    no       45 0   150   150 15.7K 3.5%
   7  4 image     4     4  rgb     3   8 image  no       46 0   150   150   62B 129%
   7  5 image     4     4  rgb     3   8 image  no       47 0   150   150   51B 106%
   7  6 image     4     6  rgb     3   8 image  no       48 0   150   150   62B  86%
   7  7 image   596   462  rgb     3   8 jpx    no       49 0   150   150 40.7K 5.0%
   7  8 image     4     6  rgb     3   8 image  no       50 0   150   150   86B 119%
   7  9 image     4     4  rgb     3   8 image  no       51 0   150   150   62B 129%
   7 10 image     8    10  rgb     3   8 image  no       41 0   150   150  157B  65%
   7 11 image     6     6  rgb     3   8 image  no       42 0   150   150   82B  76%
   7 12 image   113    27  rgb     3   8 jpx    no       43 0   151   152 1090B  12%
   8 13 image   582   839  gray    1   8 jpeg   no     2080 0    72    72  319B 0.1%
   8 14 image   344   364  gray    1   8 jpx    no     2079 0   150   150 4325B 3.5% 
```

**`x-ppi`**

*   在 PDF 页面上呈现时图像的水平分辨率（以每英寸像素为单位）。

**`y-ppi`**

*   在 PDF 页面上呈现时图像的垂直分辨率（以每英寸像素为单位）。

**`size`**

*   PDF 文件中嵌入图像的大小。使用以下后缀：“B”字节、“K”千字节、“M”兆字节和“G”千兆字节。

**`ratio`**

*   嵌入图像的压缩比。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T16:56:04.237

使用 Do 运算符绘制图像。传递给此运算符的操作数是图像的名称。图片名称在当前页面的资源字典中查找。图像资源具有宽度（像素列数）和高度（像素行数）。PDF 页面上显示的图像的物理宽度和高度由 Do 运算符时的 CTM（当前变换矩阵）值确定。如果 CTM 等于单位矩阵，则物理宽度和高度将为 1 pt 高和 1 pt 宽。（1 磅等于 1/72 英寸）。通常，CTM 具有将 1x1 pt 正方形转换为更大图像的非恒等值。像素行数和像素列数以及图像的物理扩展决定了图像在 PDF 页面上显示时的分辨率。

示例：图像资源由 300 像素行组成。每行由 400 个像素组成。CTM 等于 [400 0 0 300 100, 100]。图像高度为 300 pts，图像宽度为 400 pts。所以分辨率在两个方向上都是 72 dpi。

简而言之：PDF 规范允许 PDF 包含各种分辨率的图像。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T23:20:55.213

答案是肯定的。DPI 在每个嵌入的图像中都是独立的。

将所有图像的 DPI 重新计算到上限（如果 DPI 之前较低，则保持不变）是某些 DTP 程序的唯一常用技术。但这是可选的。顺便说一句，您还可以将（未更改的）PDF嵌入到PDF中；在这个阶段，你失去了所有可以做出的假设。

# spring - Springframework JavaMailSender 在 OpenJDK1.7 上不再工作

> ID：11696752
> 
> 赞同：1
> 
> 时间：2012-07-27T23:08:41.047
> 
> 标签：spring, jakarta-mail, openjdk, amazon-ses

我有一个像这样的 EmailService 类：

```
package com.helios.service.mail;

import java.util.ArrayList;
import java.util.List;

import javax.mail.MessagingException;
import javax.mail.NoSuchProviderException;
import javax.mail.internet.AddressException;
import javax.mail.internet.MimeMessage;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.MailException;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.mail.javamail.JavaMailSender;

import scala.actors.threadpool.Arrays;
import com.helios.util.PropertiesUtil;

/**
 * The e-mail service contains all you need in order to send E-Mails 
 * successfully
 */
@Service
public class EmailService
{
    // ------------------------------------------------------------------------
    // members
// ------------------------------------------------------------------------

// log4j...
static final Logger logger = Logger.getLogger(EmailService.class);

@Autowired
private JavaMailSender mailSender;

// ------------------------------------------------------------------------
// public usage
// ------------------------------------------------------------------------

/**
 * Send an Email the cool way!
 * @param recipients
 * @param subject
 * @param text
 * @param html
 */
public void sendEmail(List<String> recipients,String subject,
        String text,boolean html)
    throws NoSuchProviderException,AddressException,MessagingException {

    try {
        MimeMessage mimeMessage = mailSender.createMimeMessage();
        MimeMessageHelper messageHelper = new MimeMessageHelper(mimeMessage);
        messageHelper.setFrom(PropertiesUtil.getProperty("mail.defaultsender"));
        messageHelper.setTo(recipients.toArray(new String[recipients.size()]));
        messageHelper.setSubject(subject);
        messageHelper.setText(text, html);
        mailSender.send(mimeMessage);
    }
    catch (MailException ex) {
        logger.error("Fail: "+ex.getMessage());
    }

}
// ------------------------------------------------------------------------
// private usage
// ------------------------------------------------------------------------

// ------------------------------------------------------------------------
// GETTER & SETTER
// ------------------------------------------------------------------------
} 
```

一个 bean 用于配置 mailSender 以通过 Amazon SES 发送

```
 <bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="email-smtp.us-east-1.amazonaws.com" />
    <property name="port" value="465" />
    <property name="protocol" value="smtps" />
    <property name="username" value="..." />
    <property name="password" value="..." />
    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtps.auth">true</prop>
            <prop key="mail.smtp.ssl.enable">true</prop>
            <prop key="mail.transport.protocol">smtps</prop>
            <prop key="mail.debug">true</prop>
        </props>
    </property>
</bean> 
```

现在，如果我在 JDK1.6 下运行 sendEmail 方法，它将正常工作。如果我在 1.7 上运行绝对相同的代码，它将无法工作。

我找不到问题出在哪里。你有什么主意吗？

谢谢！

# python - 从字符串列表中获取值（python）

> ID：11696755
> 
> 赞同：-5
> 
> 时间：2012-07-27T23:09:13.683
> 
> 标签：python

如果我在 python 中有几个字符串的列表，并且每个字符串都包含一个值。如何获取这些值并将它们打印到列表中？示例：字符串可能是“abc def g T = 5 hij”。除数字外，所有字符串都相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:20:37.513

您可以使用正则表达式。假设您的字符串列表被称为`items`：

```
result = [int(re.search(r'\d+', x).group(0)) for x in items] 
```

如果不能保证该值是字符串中唯一的数字，只需使正则表达式更具体；说，

```
re.search(r'T = (\d+)', x).group(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:10:32.603

## 一种方法

使用`split()`字符串上的方法将其拆分为列表。

```
newList = "abc def g T = 5 hij".split() 
```

如果您需要拆分除空格以外的其他内容，请在`split()`. 例如，

```
"abc def g T = 5 hij".split("=")[1] 
```

在等号上拆分字符串。

因此，根据我对您的情况的了解，这样的事情应该可以解决问题：

```
listOfVals = [valStr.split("=")[1] for valStr in strList] 
```

where`listOfVals`是输出列表，`strList`是“几个字符串的列表”。

## 笔记

我应该注意，这仅适用于您想要的数据在 first 和 second 之间的字符串`=`，但是我真的不知道您的字符串的细节。不过，这应该让您了解如何解决问题。

# cognos - Cognos 8.4.1 St9bad_alloc 消息：如何解决？

> ID：11696759
> 
> 赞同：1
> 
> 时间：2012-07-27T23:10:27.957
> 
> 标签：cognos

出于评估目的；我在 Ubuntu 10.04 上安装了 Cognos 8.4.1。内容存储的数据库是带有 AL32 UTF8 字符集的 Oracle 11g。加密密钥存储在本地。环境设置为推荐。

尝试启动服务时，即使在创建内容存储之前，我也会收到以下消息：

CM-CFG-5076 在 Cognos Access Manager 初始化期间发生 Content Manager 配置错误。CAM-AAA-0071 发生内部错误。St9bad_alloc

知道原因吗？

谢谢，

弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:42:31.283

使用受支持的发行版绝对是个好主意。也就是说，如果您停止 cognos，重命名 cogserver.log 文件（默认情况下，该文件位于安装目录下的 /logs 中），再次启动 cognos 并发布生成的日志文件，我们可能会获得有关停止它的更多详细信息。

# c - 将命令行输入字符串解析为char数组

> ID：11696768
> 
> 赞同：0
> 
> 时间：2012-07-27T23:11:33.883
> 
> 标签：c, command-line-arguments

我正在尝试编写一个 C 程序，其中命令行参数的输入格式为`0x1234aabb`.

这绝对是作为 char 出现在程序中的`*[]`。

现在，我想以`char a[]={0x12, 0x34, 0xaa, 0xbb}`.

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:29:44.033

我首先要做的是使用`strtoul`16（十六进制）的基本参数将字符串解析为整数。`unsigned long`保证大小至少为 32 位，因此如果您的所有数字都有 8 个十六进制数字（4 个字节），那么它应该是合适的类型。

一旦你有了你的数字，位移和按位与数字 4 次以提取组成数字的 4 个字节中的每一个。这是一个例子：

```
#include <stdlib.h>
#include <stdio.h>

#define NUM_BYTES 4

int main(void)
{
   char *input = "0x1234aabb";
   unsigned long num = strtoul(input, NULL /* TODO: error checking */, 16);
   unsigned char bytes[NUM_BYTES];
   unsigned i;

   printf("The number is: 0x%lx\n", num);

   /* bytes[0] = LSB, bytes[NUM_BYTES - 1] = MSB */
   for (i = 0; i < NUM_BYTES; i++) {
      bytes[i] = (num >> 8*i) & 0xFF; /* byte = 8 bits, 0xFF = max byte value */
      printf("Byte %u: 0x%x\n", i+1, bytes[i]);
   }

   return 0;
} 
```

输出：

```
The number is: 0x1234aabb
Byte 1: 0xbb
Byte 2: 0xaa
Byte 3: 0x34
Byte 4: 0x12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:39:27.920

如果您知道字符串始终是固定长度（例如，在您的示例中为 10 个字符），那么您可以将字符串分成四个相等的部分，每三个字符长（两个用于数字，一个用于终止符），然后使用`strtoul`on每个部分。如果参数少于十个字符，只填写相关部分，其他部分保留`"00"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:46:12.103

尝试这样的事情来解析任意长度的输入：

```
#include <stdio.h>

int main(int argc, char** argv)
{
    char *input;
    int len;
    int num;
    char *a;
    int i;
    int tmp;

    if (argv < 2)
    {
        printf("No input specified!\n");
        return 0;
    }

    input = argv[1]; // "0x1234aabb"
    if (strncmpi(input, "0x", 2) != 0)
    {
        printf("Bad input!\n");
        return 0;
    }

    printf("Input: %s\n", input);

    input += 2;
    len = strlen(input);
    num = (len / 2) + (len % 2);
    if (num < 1)
    {
        printf("Bad input!\n");
        return 0;
    }

    printf("Number of bytes: %d\n", num);

    a = (char*) calloc(num, sizeof(char));
    if (a == NULL)
    {
        printf("Cannot allocate memory for bytes!\n");
        return 0;
    }

    for (i = 0; i < num; ++i)
    {
        if (sscanf(input, "%2x", &tmp) != 1)
        {
            printf("Byte %d: Illegal byte value '%02s'\n", i+1, input);
            break;
        }

        a[i] = (char) tmp;
        printf("Byte %d: 0x%02x\n", i+1, a[i]);

        input += 2;
    }

    free(a);

    return 0;
} 
```

# perl - 在 Perl 中将字节转换为位序列（二进制）

> ID：11696774
> 
> 赞同：3
> 
> 时间：2012-07-27T23:12:39.340
> 
> 标签：perl, byte, bit

在过去的几个小时里，我一直在思考这个问题。这里有很多类似的问题，但没有完全相同的问题，而且我见过的所有技术似乎都没有奏效。

我有一个从程序中的输入生成的字节序列（整数）——每个字节代表 BMP 图像中像素的红色、绿色或蓝色值。我本质上需要提取每个字节的比特流表示；也就是那个字节的二进制序列。

我一直在使用 and 的许多不同变体`pack()`，`unpack()`但我没有得出正确的结果。

例如：

```
sub convertToBinary {
    my $str = unpack("B32", pack("N", shift));
    return $str;
} 
```

我也试过：

`my $str = unpack("b8", shift);`,

`my $str = unpack("B8", shift);`,

`my $str = unpack("b*", shift);`

以及许多其他变体；他们似乎都没有工作。我不觉得提取一个字节的位模式应该太难了..只有八个'1'或'0'，对吧？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T23:18:46.657

我认为您正在寻找[sprintf](http://perldoc.perl.org/functions/sprintf.html)

```
sub convertToBinary {
  return sprintf '%08b', shift;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T23:55:37.247

根据评论，您实际上想要检查是否设置了字节的最低有效位。

解决方案取决于您所说的字节。

如果你有一个 8 位字符：

```
if (ord("\xAC") & 0x01) 
```

如果您有一个 8 位数字：

```
if (0xAC & 0x01) 
```

* * *

原答案：

听起来你想要一个字节的二进制表示。解决方案取决于您所说的字节。

如果你有一个 8 位字符：

```
unpack('B8', "\xAC")

sprintf('%08b', ord("\xAC"))

sprintf('%08b', unpack('C', "\xAC")) 
```

如果您有一个 8 位数字：

```
sprintf('%08b', 0xAC)

unpack('B8', chr(0xAC))

unpack('B8', pack('C', 0xAC)) 
```

以上所有都产生了字符串`10101100`。

# asp.net - 基于标签可见性的验证

> ID：11696779
> 
> 赞同：0
> 
> 时间：2012-07-27T23:13:03.940
> 
> 标签：asp.net, validation, button, label

我喜欢根据标签的可见性在标签上添加验证，因为如果标签不可见，提交按钮将引发验证消息或错误。

我习惯了工具箱中的验证控件，它不允许这个功能！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:36:58.620

似乎 asp:Label 的可见性设置为 false，asp.net 引擎甚至不会将其放入 DOM。所以你可以签入 javascript，使用`onclick`(html) 按钮的属性来检查标签是否在 DOM 中，并使用 asp.net 的`__doPostBack()`javascript 函数将其回传到服务器（如果存在）：

```
 <script type="text/javascript">
        function testMe()
        {
          var lbl = document.getElementById('lblTest');
          if(lbl == null)
            document.getElementById('msg').innerHTML = "Error";
          else
            __doPostBack('testButton');
        }
      </script>
      <asp:Label ID="lblTest" runat="server" Visible="false" Text="Hello"></asp:Label>
      <button onclick="testMe();">test</button> 
```

老实说，我认为如果标签不存在于 DOM 中会是这样，但 Firebug 透露它实际上`lbl`是. 无论如何，需要注意的一点是，为了让 asp.net 定义该方法，我相信您需要在表单中进行一些控制，并且在代码隐藏中您可以检查导致回发的原因，如下所示：`undefined``null``__doPostBack()``autopostback="true"``Page_Load`

```
if(Request.Form["__EVENTTARGET"] == "testButton") {} 
```

# doctrine-orm - 以一对多关系合并实体与空相关实体

> ID：11696780
> 
> 赞同：4
> 
> 时间：2012-07-27T23:13:04.320
> 
> 标签：doctrine-orm

我有一个使用 JMSSerializer 反序列化的实体。其中一项相关项是 ArrayCollection，当最初创建父对象时，其中没有任何条目。

关系看起来像这样

大会 > 有很多 > HistoryEntries

当我尝试合并 HistoryEntries 为空的 ArrayCollection 的反序列化程序集实体时，出现以下错误

`The given entity of type 'XES\\MpmBundle\\Entity\\History' (unassigned) has no identity/no id values set. It cannot be added to the identity map.`

如何在一个或多个关系没有相关实体的情况下合并和持久化一个实体？

# java - 更改图像按钮的图像

> ID：11696783
> 
> 赞同：0
> 
> 时间：2012-07-27T23:13:46.943
> 
> 标签：java, android, imagebutton

我开始使用android和java。

我尝试制作一个 simon 游戏，但遇到了一些问题。

我写这个是为了显示 simon 按钮序列或玩家按下的按钮：

```
 if (but_num == 1) {
        ib1.setImageResource(R.drawable.bullet_square_green);
        MediaPlayer sound = MediaPlayer.create(this, R.raw.tone_green);
        sound.start();
        for (int x = 1; x < 10000000; x++) { };
        ib1.setImageResource(R.drawable.bullet_ball_green);
    } else if (but_num == 2) { 
```

它应该更改每个图像按钮的图像，播放声音，等待一段时间（对于 {}），然后再次更改图像....

但是效果不好...它播放声音并确实通过bullet_square_xxx改变了图像，但是眼睛看不到图像的变化，只有在没有再次被bullet_ball_xxx改回图像的情况下才能看到变化： -(

我认为这是我的错，因为我编写的代码与 java 不同的代码确实有效……我是初学者，不会用 java 思考……我脑子里已经有了可视化的基本程序结构。

谢谢你，对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:40:15.143

还有另一个线程谈论引入延迟： [How to pause / sleep thread or process in Android?](https://stackoverflow.com/questions/1520887/how-to-pause-sleep-thread-or-process-in-android)

你可以试试这个[我已经从那个线程复制粘贴]：

```
 if (but_num == 1) {
    ib1.setImageResource(R.drawable.bullet_square_green);
    MediaPlayer sound = MediaPlayer.create(this, R.raw.tone_green);
    sound.start();

    // SLEEP 2 SECONDS HERE ...
Handler handler = new Handler(); 
handler.postDelayed(new Runnable() { 
     public void run() { 
         ib1.setImageResource(R.drawable.bullet_ball_green);
     } 
}, 2000);

} else if (but_num == 2) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:27:49.220

这可能是由于事件调度线程的延迟以及空循环甚至可能被编译器忽略的事实，因为它是静态的，很容易预测它对程序没有影响。我的建议是首先在 GUI 上强制重新绘制/更新并使用 Thread.sleep。像这样的东西：

```
if (but_num == 1) {
    ib1.setImageResource(R.drawable.bullet_square_green);
    updateUI(); // if you are somewhere in a class extending any Frame/Panel
    //If you are in other class use mainFrame.repaint(); 
    MediaPlayer sound = MediaPlayer.create(this, R.raw.tone_green);
    sound.start();
    try{
        Trhead.sleep(3000);
    } catch (InterruptedException e) {}
    ib1.setImageResource(R.drawable.bullet_ball_green);
    updateUI(); //only if this effect is delayed too
} else if (but_num == 2) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:31:57.653

好的....我认为延迟是您代码中的问题。由于现在有可用的高速处理器可以在几毫秒内计数到 10000000，我的确实如此。因此，不要使用老式的 for 循环来引入延迟使用

线程.sleep(5000);

这会导致 5 秒的延迟，参数是以毫秒为单位的时间。

# postgresql - HTTP 错误：解析网站时出现 403

> ID：11696784
> 
> 赞同：1
> 
> 时间：2012-07-27T23:13:56.877
> 
> 标签：postgresql, python-2.7, beautifulsoup, mechanize

所以我试图从这个网站[http://dl.acm.org/dl.cfm](http://dl.acm.org/dl.cfm)解析。这个网站不允许网络爬虫，所以我得到了一个`HTTP error: 403 forbidden.`

我正在使用python，所以我尝试使用机械化来填写表格（自动填写表格或单击按钮），但后来我又遇到了同样的错误。

我什至无法使用`urllib2.urlopen()`函数打开 html 页面，它给出了同样的错误。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:29:41.320

如果该网站不允许网络爬虫/机器人，那么您一开始就不应该在该网站上使用机器人。

但要回答您的问题，我怀疑该网站正在阻止 urllib 的默认用户代理。您可能不得不通过制作自己的请求将用户代理欺骗到已知的浏览器。

```
headers = {"User-Agent":"Mozilla/5.0 (X11; U; Linux i686) Gecko/20071127 Firefox/2.0.0.11"}
req = urllib2.Request("http://dl.acm.org/dl.cfm", headers=headers)
urllib2.urlopen(req) 
```

编辑：我测试了这个并且它有效。该网站正在根据用户代理积极阻止，以阻止制作不良的机器人忽略 robots.txt

# javascript - 如何在 js 中读取 div 属性？

> ID：11696788
> 
> 赞同：0
> 
> 时间：2012-07-27T23:14:23.643
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JQuery 获取 HTML 元素的属性？](https://stackoverflow.com/questions/3211326/how-to-get-the-attributes-of-a-html-element-using-jquery)

我有一块 JS，我需要从 div 中读取属性“值”。

我这样做：

```
$('#calendar_event_path') 
```

我得到这个并回答：

```
[<div id=​"calendar_event_path" value=​"company_events_index">​&lt;/div>​] 
```

如何从 div 中获取“company_events_index”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:24:35.167

在你的 html 中使用 data-value 属性

```
<div id=​"calendar_event_path" data-value=​"company_events_index">​&lt;/div> 
```

在 jQuery 中使用 data() 获取它的值

```
var sumthng = $('#calendar_event_path').data("value"); 
```

# c# - 引用数据对象中的项

> ID：11696791
> 
> 赞同：0
> 
> 时间：2012-07-27T23:15:11.120
> 
> 标签：c#, microsoft-metro

我有一个如下所示的 GetItems 方法：

* * *

```
public SampleDataItem GetItem(string uniqueId)
{
        // Simple linear search is acceptable for small data sets
        var matches = _sampleDataSource.AllGroups.SelectMany(group => group.Items).Where((item) => item.UniqueId.Equals(uniqueId));
        if (matches.Count() == 1) return matches.First();
       return null;
} 
```

* * *

当我引用返回的对象时，它不是指向我在数据对象中拥有的实际项目的指针，因此不会更新。有没有更好的方法来访问我的数据对象中的项目的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:24:49.917

通常这是有效的：

```
 private List<Person> _persons = new List<Person> 
        {
            new Person{Age=23,Name="Ram"},
             new Person{Age=43,Name="Rahim"}
        };

 private Person GetPerson(int age)
        {
            return _persons.Where(p => p.Age == age).FirstOrDefault();
        }

 Person p = GetPerson(23);
            p.Name = "Hari"; 
```

它更改了第一项的名称。

# sql-server - SQL Server 查询 MAX 和 Min

> ID：11696792
> 
> 赞同：0
> 
> 时间：2012-07-27T23:15:16.847
> 
> 标签：sql-server, sql-server-2008

我的任务是创建一个 SQL 查询（知识有限），它将显示我白天的最高温度和最低温度。数据库中的信息每 20 秒带有一个带有点值的时间戳。我只想看看每天的最高温度。

我知道如何做 MAX 和 Min：

```
SELECT 
    MIN (pv) As MinimumTemperature
FROM 
    plexxium201.dbo.pv_history

SELECT  
    MAX (pv)
FROM 
    plexxium201.dbo.pv_history 
```

我只是对日期有问题，因为一天每 20 秒就有一个条目。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:19:01.973

```
SELECT MIN (pv) As MinimumTemperature, MAX (pv) as MaxTemp, YEAR(datefield) as year, MONTH(datefield) as month, DAY(datefield) as day
FROM plexxium201.dbo.pv_history
GROUP BY YEAR(datefield), MONTH(datefield), DAY(datefield) 
```

还有一种方法可以通过窗口来做到这一点 - 但我认为这将满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:05:37.893

一个简单的方法是：

```
select cast(pvh.timestamp as date) as date, min(pv) as mintemp, max(pv) as maxtemp
from plexxium201.dbo.pv_history pvh
group by cast(pvh.timestamp as date)
order by 1 
```

在大多数情况下，我更喜欢将日期字段保留为日期，SQL Server 使用“日期”数据类型支持这一点。

# c# - 如何创建“自定义属性”以使其只能应用于“虚拟”方法？

> ID：11696794
> 
> 赞同：1
> 
> 时间：2012-07-27T23:15:25.660
> 
> 标签：c#, .net, custom-attributes

如何创建“自定义属性”以使其只能应用于“虚拟”方法？

这里应该没问题：

```
[OnlyOnVirtual]
public virtual void VirtualMethod()
{
    //do something
} 
```

在这里，我想提出一个编译或执行错误：

```
[OnlyOnVirtual]
public void NonVirtualMethod()
{
    //do something
} 
```

**是否可以创建具有这种限制的“自定义属性”？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:16:31.037

不，不支持这种限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T23:43:43.923

对于这种用法，您不会导致编译错误，但您可以在使用属性方法的任何代码中引发运行时异常。对于使用要求超出编译器可以强制执行的情况，这是一种非常典型的方法。请注意，您不能导致一般的“执行错误”（在执行反射的代码之外），因为属性是元数据，并且仅在代码反映它们时在运行时“使用”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:29:26.203

请参阅`AttributeTargets`有关可以应用属性的类型的枚举。

例子：

```
 [AttributeUsage(AttributeTargets.Class)]
    public class MyAttribute : Attribute
    {

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-19T15:09:48.120

正如下面帖子中提到的，您不能强制编译器将此作为编译步骤进行检查，但您可以在应用程序启动时在运行时检查它 - 只需检查您应用属性的所有方法是否都是虚拟的。

[C# 方法属性强制要求，例如抽象还是静态？](https://stackoverflow.com/questions/9588505/c-sharp-method-attribute-force-requirements-such-as-abstract-or-static)

# clojure - Clojure 评估错误

> ID：11696797
> 
> 赞同：4
> 
> 时间：2012-07-27T23:15:58.370
> 
> 标签：clojure

使用 Clojure 1.2，此代码有效

```
(defn A [] (fn [a] (+ a 2)))
(println ((A) 0))
(println (eval (list (A) 0))) 
```

但以下代码在第三行失败

```
(defn A [b] (fn [a] (+ a b)))
(println ((A 3) 0))
(println (eval (list (A 3) 0))) 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:22:19.713

调用`(list (A 3))`返回列表中的函数：

```
user> (list (A 3) 0)
(#<user$A$fn__2934 user$A$fn__2934@2f09b4cb> 0) 
```

`eval`期望在列表中获得一个符号，并且它正在获得它自己的功能。如果您引用电话，`(A 3)`那么您将获得您寻求的结果

```
user> (println (eval (list '(A 3) 0)))
3
nil 
```

此代码的一部分在调用之前被评估`eval`，然后`eval`正在评估其余部分。更常见的是将 eval 用于带有术语的引用形式或选择性地不引用 ( `~`)。

```
user> (eval '((A 3) 0))
3 
```

或者

```
user> (def my-number 3)
#'user/my-number
user> (eval `((A ~my-number) 0))
3 
```

编辑：关于为什么它使用零参数而失败的问题：

如果您不将它们存储在 vars 中（即使用 defn 定义它们）而是手动内联它们，那么这两种形式似乎都可以工作：

```
user> (def A (fn [b] (fn [a] (+ a b))))
#'user/A
user> (eval (list (A 3) 0))
; Evaluation aborted.
user> (eval (list (fn [b] (fn [a] (+ a b)) 3) 0))
3 
```

# android - 如何一起使用 FLAG_ACTIVITY_REORDER_TO_FRONT 和 onBackPressed()

> ID：11696798
> 
> 赞同：1
> 
> 时间：2012-07-27T23:16:19.700
> 
> 标签：android, android-lifecycle, android-hardware

我正在创建一个向导式应用程序，我需要在其中保持活动 A 和 B 之间的用户数据处于活动状态。A 有一个 Next 软按钮，B 有一个 Back 软按钮。

使用时，`FLAG_ACTIVITY_REORDER_TO_FRONT`我可以在使用软按钮时保持用户数据活跃，因为每个活动都被重用。

但是，当用户从 B 按下 Back 硬按钮时，B 会死掉，因为该硬按钮隐式使用了 finish()。

然后，我尝试在 B 中覆盖`onBackPressed`，添加与我的后退软按钮相同的行为，认为后退硬按钮的行为与前一个按钮完全相同（不是完成 B）。

现在，使用 Back 硬键从 B 回到 A，一切都很好。此时焦点在A，当用户再次按下返回硬按钮时，预期的行为是应用程序离开。

问题是没有发生预期的行为，因为 B 还活着；所以`onBackPressed`在 B 中被覆盖的仍然在听，而是发生了一些其他的行为。

如何`onBackPressed`在 B 中使用覆盖完成收听，以便当焦点在 A 中时应用程序离开？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:16:12.050

考虑按照 Krylez 的评论行事。或者您可能想使用[片段](http://developer.android.com/guide/components/fragments.html)。如果您的目标是早于 3.x 的 SDK，请参阅[支持库](http://developer.android.com/tools/extras/support-library.html)。

SDK 文件夹内有示例项目，使用向导样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:10:48.093

好吧，我可以用一个自然的 Android 解决方案来解决我的问题：

按照 Krylez 的提示，我已经停止使用 FLAG_ACTIVITY_REORDER_TO_FRONT，所以我不再与硬按钮发生冲突，现在我正在回收启动我的向导的 Intent。

在 A 中，我有一个非常常用的方法，当用户按下继续软按钮转到 B 时会调用该方法。活动 A 只是提供信息，因此在转到 B 时不需要将 Intent 的附加信息与用户的数据一起放入，例如这：

```
 /** Called when the user presses the Continue button*/
public void continueButtonOnClick(View view) {

        Intent intent = this.getIntent();
        intent.setClass(this, StepOneRegisterWizardActivity.class);
        startActivity(intent);
} 
```

当activity B 启动时，它总是必须寻找Intent 的extras 中是否有用户的数据可用，像这样：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_step_one_register_wizard);

    // Get the components of the content layout
    usernameEditText = (EditText)findViewById(R.id.usernameEditText);
    passwordEditText = (EditText)findViewById(R.id.passwordEditText);

    getIntentExtras();
}

private void getIntentExtras() {
    Intent intent = this.getIntent();

    Bundle bundle = intent.getExtras();
    if (bundle != null) {
        usernameEditText.setText(bundle.getCharSequence("usernameEditText"));
        passwordEditText.setText(bundle.getCharSequence("passwordEditText"));
    }
} 
```

现在，可能从 B 处，用户按下任何可用的后退按钮（软或硬）返回到 A。在这种情况下，我们需要将用户的数据放入 Intent 的 extras 中，如下所示：

```
 /** Called when the user presses the Back soft button*/
public void backButtonOnClick(View view) {
    onBackPressed();
}

@Override
/** Called when the user presses the Back hard button*/
public void onBackPressed() {
    finish();

    Intent intent = this.getIntent();
    intent.setClass(this, StepZeroRegisterWizardActivity.class);
    intent.putExtra("usernameEditText", usernameEditText.getText());
    intent.putExtra("passwordEditText", passwordEditText.getText());
    startActivity(intent);
} 
```

最后，当用户再次按下 continue 软按钮时，新的 Activity B 将拥有用户上次输入的数据。

我希望它可以帮助某人。

# rest - 服务器应如何响应对 REST API 中无限集合资源的 GET 请求？

> ID：11696800
> 
> 赞同：0
> 
> 时间：2012-07-27T23:16:26.167
> 
> 标签：rest, collections

考虑以下 URI，其中服务器返回对应于第 n 个斐波那契数的表示。

```
GET /fib/0 ==> { value: 0, _links: { next: { href: '/fib/1' } } }
GET /fib/1 ==> { value: 1, _links: { next: { href: '/fib/2' } } }
GET /fib/2 ==> { value: 1, _links: { next: { href: '/fib/3' } } }

...

GET /fib/73 ==> { value: 806515533049393, _links: { next: { href: '/fib/74' } } }

... etc ... 
```

给定对 REST 的严格解释的约束，服务器在收到以下请求时应该返回什么？

```
GET /fib 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:36:22.523

[维基百科](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)说将集合成员作为链接返回，可选地包含每个成员的详细信息。显然，在这种情况下您不能返回整个集合，因为它是无界的。我们使用大型集合构建的 RESTful API 将返回分页的集合。我不知道在您的用例中返回这是否有用，但我看到您正在使用 HAL，所以如果您要使用，链接数据可能看起来像这样：

```
{
   "_links": {
     "self": { "href": "/fib?page=2" },
     "next": { "href": "/fib?page=3" },
     "prev": { "href": "/fib?page=1" },
     "fibs": [ 
        {"href": "/fib/4" },
        {"href": "/fib/5" },
        {"href": "/fib/6" }
   },
} 
```

或者这个用于嵌入式：

```
{
   "_links": {
     "self": { "href": "/fib?page=2" },
     "next": { "href": "/fib?page=3" },
     "prev": { "href": "/fib?page=1" },
   },
   _embedded: {
     "fibs": [
        {
          "_links": {"self": "/fib/4" },
          "value": 2 
        },
        {
          "_links": {"self": "/fib/5" },
          "value": 3 
        },
        {
          "_links": {"self": "/fib/6" },
          "value": 5 
        }
   }
} 
```

您可以在 HAL 规范中看到与此类似的示例：[https ://datatracker.ietf.org/doc/html/draft-kelly-json-hal-00#section-6](https://datatracker.ietf.org/doc/html/draft-kelly-json-hal-00#section-6)

如果用户没有指定`page`查询字符串参数，我们返回第一页。

如果返回集合（分页或全部）没有意义，那么我建议返回 405 Method Not Allowed HTTP 响应代码。如果您也无法将项目（POST）插入到集合中，那么也可能为此返回相同的 405 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:29:01.713

如果没有定义/不存在此类资源，则服务器应返回由 /fib 或 404 表示的资源。资源实际上是什么取决于您的应用程序的域和要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T16:20:07.407

根据 W3 的[Dereferencing HTTP URIs](http://www.w3.org/2001/tag/doc/httpRange-14/2007-05-31/HttpRange-14 "取消引用 HTTP URI")，因为我不能返回无限序列，看起来我应该返回一个`HTTP 303 - See Other`重定向到另一个 URI（例如`/fib/Information`），其中包含有关斐波那契序列的其他相关信息，例如人类可读的描述、计算算法它或聚合的 RDF 描述。我应该支持内容协商以允许消费者选择合适的表示。

# jquery - 如何获取刚刚在 jquery 中删除的 LI 项的 ID？

> ID：11696802
> 
> 赞同：0
> 
> 时间：2012-07-27T23:16:39.643
> 
> 标签：jquery, html, css, jquery-ui

我正在尝试获取已删除的 LI 项目的 ID。下面是我的代码：

```
 // when the user wants to just trash a task compeletely
        $(".ui-icon-trash").on("click", function(e) {
            var id = $(this).parent("li");
            // var idVal = id.getAttribute("id");

            tb_show("Warning!", "#TB_inline?height=100&width=260&inlineId=divDelete", "");
            e.preventDefault();
            $(this).parent("li").remove();
        }); 
```

问题是 id.getAttribute("id") 返回未定义。

我的 LI 属性如下所示：

```
 <li class="ui-widget-content ui-corner-tr" id="1">
            <h5 class="ui-widget-header">Task</h5>
            <img src="graphics/task.png" width="96" height="72" />
            Sample Task
            <a href="" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
            <a href="" title="Delete task" class="ui-icon ui-icon-trash">Delete task</a>
        </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:20:02.890

```
// when the user wants to just trash a task compeletely
    $(".ui-icon-trash").on("click", function(e) {
        var id = $(this).parent("li");
        // var idVal = id.getAttribute("id");

        tb_show("Warning!", "#TB_inline?height=100&width=260&inlineId=divDelete", "");
        e.preventDefault();
        var myVar = $(this).parent("li").attr("id");
        $(this).parent("li").remove();
    }); 
```

myVar 应该返回被删除元素的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:19:54.000

使用 jQuery，您可以这样做：

```
var id = $(this).parent("li").attr('id') 
```

或香草 JS 与 jQ 混合：

```
var id = $(this).parent("li")[0].id 
```

# sql - 使用 Psycopg2 和 Greenplum 数据库获取最后插入的行 ID

> ID：11696805
> 
> 赞同：6
> 
> 时间：2012-07-27T23:16:59.557
> 
> 标签：sql, postgresql, psycopg2, greenplum

如何在 Greenplum 数据库上使用 psycopg2 获取最后插入的行的 ID？

这里有几件我已经尝试过但不起作用的事情。

*   Greenplum 不支持返回。
*   psycopg2 的 cursor.lastrowid 总是返回 0。
*   SELECT nextval() 给了我下一行 id，但也会增加计数器，因此实际插入的行使用不同的 id。
*   不支持 SELECT currval()。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T14:38:56.780

```
def last_insert_id(cursor, table_name, pk_name):
    sequence = "{table_name}_{pk_name}_seq".format(table_name=table_name,
                                                       pk_name=pk_name)
    cursor.execute("SELECT last_value from {sequence}".format(sequence=sequence))
    return cursor.fetchone()[0] 
```

你应该尝试这样的方法来解决你的问题，让它有点通用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:53:38.963

我认为你能得到的最接近的是`select * from seq_name`：

```
dwh=# select * from queue_id_seq;
 sequence_name | last_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
---------------+------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 queue_id_seq  |        127 |            1 | 9223372036854775807 |         1 |           1 |      32 | f         | t 
```

但`last_value`显示任何会话分配的最后一个值

或者，您可以根据“自然主键”回读插入的行

我不会使用 nextval() 因为序列不是无间隙的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:55:00.960

SELECT lastval() 做你想做的事吗？

[根据序列操作函数](http://www.postgresql.org/docs/9.1/static/functions-sequence.html)的postgres（我收集GreenPlum基于）文档，它应该“返回当前会话中nextval最近返回的值”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T17:51:16.797

如果你想插入最后一个 id 你可以做一个基本的 sql 搜索最大 id 号

# android - ContentResolver.SYNC_EXTRAS_EXPEDITED 的行为是否在任何地方定义？

> ID：11696806
> 
> 赞同：2
> 
> 时间：2012-07-27T23:17:06.133
> 
> 标签：android, android-contentresolver

有谁知道 ContentResolver.SYNC_EXTRAS_EXPEDITED 到底*是*做什么的？该常量的 api 文档基本上是空白的。

这听起来像我想要的（先同步提供的帐户，然后再同步其他帐户），但肯定知道总是好的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T11:14:57.793

[您可以在Google 的运行同步适配器指南](https://developer.android.com/training/sync-adapters/running-sync-adapter.html#RunOnDemand)中找到定义。如下：

> **SYNC_EXTRAS_EXPEDITED**
> 
> 强制同步立即开始。如果您不设置此项，系统可能会在运行同步请求之前等待几秒钟，因为它会尝试通过在短时间内安排许多请求来优化电池使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:46:44.927

谷歌同样的话把我送到这里。看到这个答案[立即开始我的同步](https://stackoverflow.com/a/6548585/1833505)。

是的，如果您想立即同步您的应用程序（刷新您的列表）：

```
Bundle extras = new Bundle();
extras.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, true);
extras.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, true);
ContentResolver.requestSync(mAccount,ExampleContract.CONTENT_AUTHORITY,extras); 
```

# node.js - 执行回调时打破 Node.js 中的 Q 承诺？

> ID：11696807
> 
> 赞同：6
> 
> 时间：2012-07-27T23:17:08.597
> 
> 标签：node.js, callback, promise, q

请原谅我对承诺概念的新手。我在 Node.js 中使用 Q 模块。我有一个函数，一旦它执行了所有必要的步骤，它就会调用回调。当我想从 Q 承诺中调用回调函数时，就会出现问题。

我想要的功能是能够在我到达最后一步时调用回调，并且不再处于承诺链中。因此，回调将返回到其原始操作。但是，正如我编写的那样，回调在 promise 的上下文中被调用。此时，如果回调（比如说）抛出错误，它会被此函数中的错误处理程序捕获，这不是我想要的！

```
var updateDataStream = function(data, input, posts, stream, callback) {

    // Pack all the items up...
    Q.ncall(data._packStream, data, posts, stream)
    // Upsert the cache into the database
    .then(function(){
        return Q.ncall(data.upsert, data);
    })
    // buffer the new input
    .then(function(res){
        return Q.ncall(data.buffer, data, input);
    })
    .then(function(final){
        callback(null, final);
    })
    .fail(function(err){
        console.log('OHNOES!!!!!!!',err);
    }).end();
} 
```

在这种情况下，回调函数中发生的错误会导致“OHNOES!!!!!” 待打印……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T03:21:40.583

有一种方法，`nodeify`可以（可选地）跳出 Promise 链并转发到 NodeJS 风格的延续。

```
var updateDataStream = function(data, input, posts, stream, callback) {

    // Pack all the items up...
    return Q.ncall(data._packStream, data, posts, stream)
    // Upsert the cache into the database
    .then(function(){
        return Q.ncall(data.upsert, data);
    })
    // buffer the new input
    .then(function(res){
        return Q.ncall(data.buffer, data, input);
    })
    .nodeify(callback);

} 
```

注意链开头添加的“return”和末尾添加的“nodeify(callback)”。

您的用户根本不需要更明智地使用 Q……除非他们放弃回调，在这种情况下他们会得到一个承诺。

# python - 正则表达式解析文本文档

> ID：11696808
> 
> 赞同：-1
> 
> 时间：2012-07-27T23:17:24.740
> 
> 标签：python, regex

我试图用 !if 和 !endif 解析文本文档。我希望文本没有！if，！endif 和它们之间的文本。

例如：

```
text
!if
text1
!endif
text2 
```

我想让我的输出 = text+text2+..

我试过这样的 re.findall(r'((^(!if.*!endif))+', text)。但它似乎对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:22:49.243

您的正则表达式将是：

```
^!if$.*?^!endif$\s+ 
```

这说：

```
^      - Match the beginning of a line (because of the re.M flag)
!if    - Match !
$      - Match the end of a line (because of the re.M flag)
.*?    - Match any number of characters (non-greedy) (includes line breaks, because of the re.S flag)
^      - Match the beginning of a line (because of the re.M flag)
!endif - Match !endif
$      - Match the end of a line (because of the re.M flag)
\s+    - Match one or more whitespace characters 
```

因此，您应该能够像这样使用它，它将上述正则表达式的所有出现替换为空字符串（无）：

```
import re
s = "text\n!if\ntext1\n!endif\ntext2"
s = re.sub("^!if$.*?^!endif$\s+", "", s, flags=re.S | re.M)
print s 
```

这[将输出](http://ideone.com/yBHzi)：

```
text 
text2 
```

请注意，这明确要求`!if`并且`!endif`位于不同的行上。如果这不是必需的，您可以从正则表达式的中间删除`$`and`^`锚点。

```
^!if.*?!endif$\s+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T23:25:58.753

我可以帮助 sed：

```
sed '/^if$/,/^endif$/ d' 
```

这是 sed 使用的算法：

1.  设置变量 match=False
2.  阅读下一行
3.  检查该行是否等于'if'。如果是这样，设置变量 match=True
4.  如果 match==True，检查当前行是否=='endif'。如果是这样，设置 match=False 并删除当前行 [并跳转到 0] 。
5.  打印当前行
6.  如果不是 EOF ，则跳转到 1

# jquery - 我需要查找一个类是否存在于 div 标签中（注意我只知道类名的一部分）

> ID：11696809
> 
> 赞同：1
> 
> 时间：2012-07-27T23:17:30.310
> 
> 标签：jquery, html, jsp-tags

我在一个 div 容器中有 3 个 div，我遍历它们中的每一个。我需要检查类名是否匹配某个值。问题是我只知道类名的一部分。

eg：我只是以星球大战为例来说明我的情况。我只知道我的类名应该是 R2XX 我如何从下面提到的 3 中检索 R2D2 和 R2D5

```
<div class="DIV_HORZ"> --container div
    <div class="R2D5"></div>
    <div class="C3P0"></div>
    <div class="R2D2"></div>
</div> 
```

**javascript部分：**

```
$(".DIV_HORZ > div[id]").each(function(){
 ***find div whose class matches R2 + something***
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T23:19:37.360

您可以使用[attribute-starts-with 选择器](http://api.jquery.com/attribute-starts-with-selector/)：

```
$('.DIV_HORZ > div[class^="R2"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:32:39.850

除了以选择器开头之外，如果需要，您还可以使用`.each()`循环并使用您自己的自定义代码，包括正则表达式：

```
$(".DIV_HORZ > div[id]").each(function(){
    if (this.id.match(/^R2/) {
        // found a matching id, process the item here
    }
}); 
```

正则表达式或代码显然可以像您希望的那样参与。如果需要，它可以使用仅内置选择器引擎所具有的更多逻辑。

# html - 是否可以排除一个特定 div 容器的所有 css 样式？

> ID：11696810
> 
> 赞同：5
> 
> 时间：2012-07-27T23:17:55.593
> 
> 标签：html, css

我`font-face`在我的网站上使用时遇到问题。在具有自己样式的 html 文件上测试它时，我可以让它工作，但如果我包含其他样式表则不能。

我尝试过覆盖 stle，以不同的顺序放置样式表等等，但没有任何效果。

所以我想知道，是否可以排除所有 CSS 并仅将一个 css 文件中的 css 用于特定的 div 容器？

（不使用`iframe`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:32:07.320

不幸的是，不能从继承的 css 中清除或重置特定容器的样式。您必须手动覆盖所需的每种样式。

您可以做的是您可以命名您的类，而您所需要担心的只是元素样式，您可以在样式表的开头使用默认值定义这些样式。例如，类似：

```
div,table,span,img,p{
    margin: 0;
    padding: 0;
    border: 0;
    font-weight: normal;
    font-style: normal;
    font-size: 100%;
    line-height: 1;
    font-family: inherit;
    text-align: left;
} 
```

您当然可以将*!important*添加到您需要的元素中，并将更多元素添加到列表中。如果您不能信任或不知道将要加载并应用到您的页面的其他样式，我发现最好从空白页开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:21:40.850

你不能。CSS 或 HTML 中没有这样的排除机制。

不过，您真正的问题可能是可以解决的，但您没有描述它。你应该在一个新问题中描述你想要什么，你尝试过什么，以及它是如何失败的。使用真实代码和/或 URL。

# c# - 调用方法会导致“消息：对象引用未设置为对象的实例”。

> ID：11696813
> 
> 赞同：-1
> 
> 时间：2012-07-27T23:18:17.907
> 
> 标签：c#

我无法弄清楚为什么我使用这些方法中的任何一种 (load_qc_form(); enable_qc_form();disable_qc_form();) 我得到“消息：对象引用未设置为对象的实例”。信息。

调用方法如何返回null？

这是我的整个代码。我是 C# 新手，正在尝试更新现有页面。有人能指出我正确的方向吗？

我希望能够从应用程序中的任何位置调用这些方法。

```
 namespace test_page
{
    using System;
    //using System.Windows.Forms;
    using System.Data;
    using System.Drawing;
    using System.Web;
    using System.Web.UI.WebControls;
    using System.Web.UI.HtmlControls;
    using System.Data.SqlClient;

    /// <summary>
    ///     Summary description for ProductionQC.
    /// </summary>
    /// 

    public class hendrix : System.Web.UI.UserControl
    {
        #region class_variable_declarations
        //Test Boxes
        protected System.Web.UI.WebControls.TextBox boxOrder;
        protected System.Web.UI.WebControls.TextBox boxBox;
        protected System.Web.UI.WebControls.TextBox boxPallet;
        protected System.Web.UI.WebControls.TextBox boxPulpTemp;
        protected System.Web.UI.WebControls.TextBox boxComments;
        protected System.Web.UI.WebControls.TextBox boxMajdef1;
        protected System.Web.UI.WebControls.TextBox boxMajdef2;
        protected System.Web.UI.WebControls.TextBox boxMajdef3;
        protected System.Web.UI.WebControls.TextBox boxMindef1;
        protected System.Web.UI.WebControls.TextBox boxMindef2;
        protected System.Web.UI.WebControls.TextBox boxMindef3;
        protected System.Web.UI.WebControls.TextBox boxSamples;
        //drop down lists
        protected System.Web.UI.WebControls.DropDownList listYN;
        protected System.Web.UI.WebControls.DropDownList listMaj1;
        protected System.Web.UI.WebControls.DropDownList listMaj2;
        protected System.Web.UI.WebControls.DropDownList listMaj3;
        protected System.Web.UI.WebControls.DropDownList listMin1;
        protected System.Web.UI.WebControls.DropDownList listMin2;
        protected System.Web.UI.WebControls.DropDownList listMin3;
        protected System.Web.UI.WebControls.DropDownList listRecorder;
        //labels 
        protected System.Web.UI.WebControls.Label lblPalletTag;
        protected System.Web.UI.WebControls.Label lblmajdef1;
        protected System.Web.UI.WebControls.Label lblmajdef2;
        protected System.Web.UI.WebControls.Label lblmajdef3;
        protected System.Web.UI.WebControls.Label lblmindef1;
        protected System.Web.UI.WebControls.Label lblmindef2;
        protected System.Web.UI.WebControls.Label lblmindef3;
        protected System.Web.UI.WebControls.Label lblPulpTemp;
        protected System.Web.UI.WebControls.Label lblComments;
        protected System.Web.UI.WebControls.Label lblPackageCorrect;
        protected System.Web.UI.WebControls.Label lblTotSamples;
        protected System.Web.UI.WebControls.Label lblrecorder;
        //Buttons
        protected System.Web.UI.WebControls.Button btnGo;
        protected System.Web.UI.WebControls.Button btnGo2;
        protected System.Web.UI.WebControls.Button btnGo3;
        protected System.Web.UI.WebControls.Button btnClear;
        //Gridviews
        protected System.Web.UI.WebControls.GridView grdDisplayOrd;
        protected System.Web.UI.WebControls.GridView grdDisplayBox;
        //Data connections - adapters
        protected System.Data.SqlClient.SqlCommand cmdData;
        protected System.Data.SqlClient.SqlConnection sqlConnection1;
        protected System.Data.SqlClient.SqlDataReader dataReader;
        #endregion class_variable_declarations

        private void Page_Load(object sender, System.EventArgs e)
        {
            //initializePage();
            // Put user code to initialize the page here
            if (!this.Page.IsPostBack)
            {
                //load_qc_form();
                //disable_qc_form();

            }

        }

        //private void initializePage()
        // {
        //  throw new NotImplementedException();
        //}

        #region Web Form Designer generated code
        override protected void OnInit(EventArgs e)
        {
            //
            // CODEGEN: This call is required by the ASP.NET Web Form Designer.
            //
            InitializeComponent();
            base.OnInit(e);

        }

        /// <summary>
        ///     Required method for Designer support - do not modify
        ///     the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.sqlConnection1 = new System.Data.SqlClient.SqlConnection();
            this.btnGo.Click += new System.EventHandler(this.btnGo_Click);
            this.btnGo2.Click += new System.EventHandler(this.btnGo2_Click);
           // this.btnGo3.Click += new System.EventHandler(this.btnGo3_Click);
            this.btnClear.Click += new EventHandler(this.btnClear_Click);

            // 
            // sqlConnection1
            // 
            this.sqlConnection1.ConnectionString = "workstation id=\"******";packet size=4096;user id=******;data source=\"******";persis" +
                "t security info=True;initial catalog=****;password=**********";
            this.Load += new System.EventHandler(this.Page_Load);

        }
        #endregion

       // public virtual string DisplayMember { get; set; }
        //get and display order data
        private void btnGo_Click(object sender, System.EventArgs e)
        {

            {

                SqlCommand cmd = new SqlCommand();
                cmd.CommandText = "Select  ord.order_number as Order#,var.description as Description,grd.description as Grade, " +
                                  "size.description as Size,pkg.description as Pkg, ord.container_type as Pallet " +
                                  "FROM t_item_master itm INNER JOIN t_order_detail ord (NOLOCK) ON ord.item_number = itm.item_number " +
                                  "LEFT OUTER JOIN t_package pkg (NOLOCK) ON pkg.package_name = itm.product_package_code " +
                                  "LEFT OUTER JOIN t_grade grd (NOLOCK) ON grd.grade_id = itm.grade_id " +
                                  "LEFT OUTER JOIN t_size size (NOLOCK) ON size.size_id = itm.size_id AND size.package_id = pkg.package_id " +
                                  "LEFT OUTER JOIN t_variety var (NOLOCK) ON var.variety_id = itm.variety_id " +
                                  "WHERE order_number like @order_number";

                cmd.Parameters.Add("@order_number", SqlDbType.VarChar).Value = boxOrder.Text;

                cmd.CommandType = CommandType.Text;
                cmd.Connection = this.sqlConnection1;
                this.sqlConnection1.Open();

                this.grdDisplayOrd.Visible = true;
                SqlDataAdapter adpt = new SqlDataAdapter(cmd);
                DataSet ds = new DataSet();
                adpt.Fill(ds);
                grdDisplayOrd.DataSource = ds;
                grdDisplayOrd.DataBind();

                this.sqlConnection1.Close();
            }

        }
        // get and display box data
        private void btnGo2_Click(object sender, System.EventArgs e)
        {
            {

                load_qc_form();
                SqlCommand cmd = new SqlCommand();
                HyperLink test_link1 = new HyperLink();
                cmd.CommandText = "select " +
                                   "item_number as Item#, " +
                                   "description as Desctiption, " +
                                   "grower_lot as Lot#, " +
                                   "pack_date as Packed " +
                                   "from v_box_data where box_id = @box_id";

                cmd.Parameters.Add("@box_id", SqlDbType.VarChar).Value = boxBox.Text;

                cmd.CommandType = CommandType.Text;
                cmd.Connection = this.sqlConnection1;
                this.sqlConnection1.Open();

                this.grdDisplayBox.Visible = true;
                SqlDataAdapter adpt = new SqlDataAdapter(cmd);
                DataSet ds = new DataSet();
                adpt.Fill(ds);
                grdDisplayBox.DataSource = ds;
                grdDisplayBox.DataBind();

                this.sqlConnection1.Close();
            }
        }
        private void load_qc_form()
        {
            #region declare_variables
           // string pallet_tag;
            //string correct_package;
            //string total_samples;
            //string majdef1;
            //string majdef2;
            //string majdef3;
           // string mindef1;
           // string mindef2;
           // string mindef3;
           // string majcnt1;
           // string majcnt2;
            //string majcnt3;
           // string mincnt1;
           // string mincnt2;
           // string mincnt3;
           // string pulptemp;
           // string comments;
            string recorder;
            #endregion declare_variables

            #region fill_list_recorder
            try
            {
                listRecorder.Items.Clear();

                recorder = "select EMPID,FIRSTNAME+' '+LASTNAME from t_famous_employee " +
                            "where COSTCENTERNAME like 'Quality Control - 2011' " +
                            "and HOMECREWID LIKE 'Shipping' ";

                cmdData = new System.Data.SqlClient.SqlCommand(recorder, this.sqlConnection1);
                cmdData.Connection = this.sqlConnection1;
                this.sqlConnection1.Open();
                SqlDataAdapter da = new SqlDataAdapter(cmdData);
                DataTable dt = new DataTable();
                da.Fill(dt);
                listRecorder.DataBind();

                    listRecorder.DataSource = dt;
                    listRecorder.DataValueField = "EMPID";
                    listRecorder.DataTextField = "FIRSTNAME+' '+LASTNAME";
                    this.listRecorder.Items.Insert(0, "FIRSTNAME+' '+LASTNAME");

            }
            catch (Exception) { }
            this.dataReader.Close();

            #endregion

        }

        private void btnGo3_Click(object sender, System.EventArgs e)
        {
            {

            }

        }

        private void btnClear_Click(object sender, System.EventArgs e)
        {
            {
                this.boxOrder.Text = "";
                this.boxBox.Text = "";
                this.grdDisplayOrd.Visible = false;
                this.grdDisplayBox.Visible = false;
                //disable_qc_form();
            }
        }
        private void enable_qc_form()
        {
             this.listMaj1.Enabled = true;
            this.listMaj2.Enabled = true;
            this.listMaj3.Enabled = true;
            this.listMin1.Enabled = true;
            this.listMin2.Enabled = true;
            this.listMin3.Enabled = true;
            this.listYN.Enabled = true;
            this.listMaj1.Enabled = true;
            this.listMaj2.Enabled = true;
            this.listMaj3.Enabled = true;
            this.listMin1.Enabled = true;
            this.listMin2.Enabled = true;
            this.listMin3.Enabled = true;
            this.boxComments.Enabled = true;
            this.boxMajdef1.Enabled = true;
            this.boxMajdef2.Enabled = true;
            this.boxMajdef3.Enabled = true;
            this.boxMindef1.Enabled = true;
            this.boxMindef2.Enabled = true;
            this.boxMindef3.Enabled = true;
            this.boxPallet.Enabled = true;
            this.boxPulpTemp.Enabled = true;
            this.boxSamples.Enabled = true;
            this.lblComments.Enabled = true;
            this.lblmajdef1.Enabled = true;
            this.lblmajdef2.Enabled = true;
            this.lblmajdef3.Enabled = true;
            this.lblmindef1.Enabled = true;
            this.lblmindef2.Enabled = true;
            this.lblmindef3.Enabled = true;
            this.lblPackageCorrect.Enabled = true;
            this.lblPalletTag.Enabled = true;
            this.lblPulpTemp.Enabled = true;
            this.lblTotSamples.Enabled = true;
        }
        private void disable_qc_form()
        {
                this.listMaj1.Enabled = false;
                this.listMaj2.Enabled = false;
                this.listMaj3.Enabled = false;
                this.listMin1.Enabled = false;
                this.listMin2.Enabled = false;
                this.listMin3.Enabled = false;
                this.listYN.Enabled = false;
                this.listMaj1.Enabled = false;
                this.listMaj2.Enabled = false;
                this.listMaj3.Enabled = false;
                this.listMin1.Enabled = false;
                this.listMin2.Enabled = false;
                this.listMin3.Enabled = false;
                this.boxComments.Enabled = false;
                this.boxMajdef1.Enabled = false;
                this.boxMajdef2.Enabled = false;
                this.boxMajdef3.Enabled = false;
                this.boxMindef1.Enabled = false;
                this.boxMindef2.Enabled = false;
                this.boxMindef3.Enabled = false;
                this.boxPallet.Enabled = false;
                this.boxPulpTemp.Enabled = false;
                this.boxSamples.Enabled = false;
                this.lblComments.Enabled = false;
                this.lblmajdef1.Enabled = false;
                this.lblmajdef2.Enabled = false;
                this.lblmajdef3.Enabled = false;
                this.lblmindef1.Enabled = false;
                this.lblmindef2.Enabled = false;
                this.lblmindef3.Enabled = false;
                this.lblPackageCorrect.Enabled = false;
                this.lblPalletTag.Enabled = false;
                this.lblPulpTemp.Enabled = false;
                this.lblTotSamples.Enabled = false;
            }

        }

    } 
```

所以我需要能够调用该方法来测试我的第一个下拉列表。

预先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:27:02.127

```
this.dataReader.Close(); 
```

dataReader 似乎没有在任何地方创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:36:53.127

我没有看到您的控件在任何地方被初始化，它们可能具有`null`值

```
 protected System.Web.UI.WebControls.TextBox boxOrder;
    protected System.Web.UI.WebControls.TextBox boxBox;
    protected System.Web.UI.WebControls.TextBox boxPallet;
    protected System.Web.UI.WebControls.TextBox boxPulpTemp;
    ... 
```

并且您在方法中引用了它们，例如

```
 private void enable_qc_form()
 {
     this.listMaj1.Enabled = true; //accessing properties (e.g .Enabled) or method of an object that is not 
     this.listMaj2.Enabled = true; //initialised results in Object reference not set
     this.listMaj3.Enabled = true;
     ...
 } 
```

您`InitializeComponent()`没有初始化这些变量。如果您使用设计器，则在将控件添加到 UserControl 时，应该已经为您生成了所需的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:48:38.633

**您必须先创建*（新）*对象才能使用它们**

**更改您的代码**

```
private void InitializeComponent()
{
    this.sqlConnection1 = new System.Data.SqlClient.SqlConnection();
    this.btnGo.Click += new System.EventHandler(this.btnGo_Click);
    this.btnGo2.Click += new System.EventHandler(this.btnGo2_Click);
    // this.btnGo3.Click += new System.EventHandler(this.btnGo3_Click);
    this.btnClear.Click += new EventHandler(this.btnClear_Click);
    ... 
```

**到：**

```
private void InitializeComponent()
{
    this.btnGo = new Button();
    this.btnGo2 = new Button();
    this.btnGo3 = new Button();
    this.btnClear = new Button();
    this.sqlConnection1 = new System.Data.SqlClient.SqlConnection();
    this.btnGo.Click += new System.EventHandler(this.btnGo_Click);
    this.btnGo2.Click += new System.EventHandler(this.btnGo2_Click);
  // this.btnGo3.Click += new System.EventHandler(this.btnGo3_Click);
    this.btnClear.Click += new EventHandler(this.btnClear_Click); 
    ... 
```

***最好将控件从工具栏拖放到 aspx 文件并在 aspx.cs 文件中使用它们***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:30:13.960

问题是表单 ascx 页面中有错字。所以本质上我是在声明一个不存在的盒子！！与大多数编程问题一样，魔鬼在细节中！！感谢大家的帮助。事实证明，我只需要学习如何打字！

# android - 使用 Arduino 和 Android 手机通过网络进行通信

> ID：11696819
> 
> 赞同：0
> 
> 时间：2012-07-27T23:19:15.980
> 
> 标签：android, arduino, ethernet

我正在编写一个 Android 应用程序来通过网络与我的 Arduino 进行通信。Arduino 正在通过 Ethernet [shield](http://www.arduino.cc/en/Main/ArduinoShields)运行 Web 服务器。我附上了我的代码，但我会在这里解释它，这样你就会明白我想要做什么。

Android 发送格式为 的 HTTP 请求`http://192.168.1.148/?Lights=1`。Arduino 收到请求，执行命令（在这种情况下打开一些灯），然后通过简单地发送字符串“Lights=On”来响应 Android 设备。然后，Android 将更改按钮的颜色以通知用户该命令已成功执行。

Arduino 正在获取指令并执行它并发送响应，但我的按钮颜色没有改变。我知道 Android 设备正在获取字符串，因为我添加了一个调试行来将按钮上的文本更改为收到的响应。Android设备的相关代码为：

```
((Button) v).setText(sb.toString()); //This works and the button text changes to "Lights=On".

//Test response and update button
if(sb.toString()=="Lights=On"){
    v.getBackground().setColorFilter(0xFFFFFF00, PorterDuff.Mode.MULTIPLY);
    Drawable d = lightOff.getBackground();
    lightOff.invalidateDrawable(d);
    d.clearColorFilter();
} 
```

Arduino代码是：

```
 if(s=="Lights"){
     switch(client.read()){
         case '0':
             digitalWrite(LightPin,0);
             client.print("Lights=Off");
             //debug
             Serial.println("Lights=Off");
             break;

         case '1':
             digitalWrite(LightPin,1);
             client.print("Lights=On");
             Serial.println("Lights=On");
             break;
     }
 } 
```

如果您需要更多代码来回答这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:54:46.197

要简单地更改按钮的背景颜色：

```
 String state = sb.toString().trim();
            ((Button) v).setText(state);
            if(state.contains("On")){
                v.setBackgroundColor(Color.DKGRAY);
            }
            else
            {
                v.setBackgroundColor(Color.MAGENTA);                    
            } 
```

# ios - xcode 调试编辑器区域

> ID：11696825
> 
> 赞同：0
> 
> 时间：2012-07-27T23:20:05.040
> 
> 标签：ios, xcode, debugging

在 Xcode 中，为什么我的调试编辑器区域会显示这个？

![在此处输入图像描述](../Images/eeb669b8437e4ad274da060d80b63bbf.png)

我该如何解决这个节目，它向我展示了一些更相关/更容易看的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:29:53.780

想通了，只需要转到产品->调试工作流程->确保未选中“调试时显示反汇编”

# php - 为什么使用 MySQL 数据库缓存？

> ID：11696827
> 
> 赞同：4
> 
> 时间：2012-07-27T23:20:30.650
> 
> 标签：php, mysql, database, caching

我目前正在开发两个严重依赖 MySQL 数据库的 iOS 应用程序。它们每个都有自己的 API，由各自的应用程序请求，这些应用程序运行相关查询，请求来自 MySQL 数据库的数据。

查询从简单的、基于用户的或基于“对象”的不同：

```
SELECT `username`, `id`, `full_name` FROM `users` WHERE `id` = 1
INSERT INTO `users` (`full_name`, `username`, `email`, `password`, `signup_method`, `latitude`, `longitude`) VALUES (?, ?, ?, ?, ?, ?, ?)"
SELECT q.*, (SELECT COUNT(a.qid) FROM answers as a WHERE qid=q.id) AS a_count FROM questions as q ORDER BY a_count DESC LIMIT 1, 10 
```

基于位置：

```
SELECT ( 6371 * acos( cos( radians(?) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians(?) ) + sin( radians(?) ) * sin( radians( latitude ) ) ) ) AS distance FROM `users` HAVING distance <= 5 ORDER BY points DESC

SELECT * , (6371 * acos(cos(radians(latitude)) * cos(radians({$values['latitude']})) * cos(radians({$values['longitude']}) - radians(longitude)) + sin(radians(latitude)) * sin(radians({$values['latitude']})))) AS distance FROM `questions` HAVING distance <= ? ORDER by distance LIMIT ?,? 
```

这些查询显然需要时间。尤其是后者，因为它会导致性能强度。

许多服务在其数据库旁边使用缓存层来提高性能。例如：

*   内存缓存
*   雷迪斯
*   和更多。

我的问题是，关于查询，什么时候应该使用缓存，使用缓存有什么好处？

谢谢，

最大限度！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T02:04:34.347

当缓存比从头开始生成结果更便宜时，您应该只缓存。

此成本取决于以下因素：

*   各种服务器和软件的处理能力。也许您的数据库服务器上的容量有限，但另一台服务器上的容量过剩。
*   金钱：购买更强大的硬件是否比构建缓存系统更便宜？
*   从头开始生成结果的 CPU 成本与缓存的 RAM 成本。大多数情况下，数据库服务器受 CPU 限制，而缓存服务器受内存限制。由您决定升级哪个更便宜。
*   从缓存中检索的速度与从数据库中检索的速度。如果，如您所说，查询是耗时的，并且从缓存中获取它们更便宜，那么缓存将加快您的请求。
*   您的缓存项目需要多久刷新一次。如果它们只持续几秒钟，那可能不值得麻烦。
*   具有过期和刷新缓存项目的方法。这通常是一个非常困难的问题。
*   拥有技术知识和时间来管理额外的复杂性。

但始终，从源头开始。你检查过 MySQL 的慢查询日志，看看哪些查询成本高吗？它可以帮助您查看缺少重要索引的位置，以及哪些查询花费的时间出乎意料的长。`[pt-query-digest]`[Percona-Toolkit 中的1](http://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html)可以通过总结此日志文件来提供帮助。在开始缓存之前优化您的数据库。

查看您的查询类型，在我看来缓存结果甚至预热缓存是非常值得的。

缓存的选择当然是很重要的一项。我假设您已经在使用 MySQL 的内置查询缓存？确保它已启用并且分配有足够的内存。像“SELECT username”这样的简单查询无论如何都很便宜，但 MySQL 本身也很容易缓存。但是，内置查询缓存有很多限制，并且查询未缓存或缓存被刷新的原因有很多。例如，简单地跳过带有函数的查询（如基于位置的查询）。阅读文档。

使用像 Redis 这样的缓存可以更好地控制缓存内容、缓存时间以及如何过期。关于如何实现这一点有很多想法，它们也取决于您的应用程序。看看网络。

我建议启用查询缓存，只是因为它简单且便宜并且会有所帮助，而且我肯定会考虑为您的数据库实现内存缓存层。也许像 Solr 这样具有基于位置查询的内置方法的索引服务器值得考虑。我们将它与 MySQL 一起使用。

Memcached 和 Redis 是很好的缓存选择。我个人会选择 Redis，因为它有更多的用例和可选的磁盘持久性，但这完全取决于你。也许您选择的框架有一些可以在应用程序中使用的现有组件。

另一个提示：测量一切。只有知道什么需要时间，您才知道要优化或缓存什么。此外，您的优化结果只有在您再次测量时才会清楚。实现类似[statsd](http://codeascraft.etsy.com/2011/02/15/measure-anything-measure-everything/)的东西并测量应用程序中的各种事件和时间。太多总比不够好。绘制结果并随着时间的推移对其进行分析。你会惊讶于发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:10:42.800

缓存允许您比仅使用 MySQL 查询更快地访问数据库，因为它们非常耗时。在大多数情况下，当 Web 应用程序变大时，数据库将成为其最大的瓶颈，由于查询速度的原因导致大量备份。因此，许多网站和公司将缓存作为一种快速简单的方式来提高从数据库中访问信息的速度。我想说，不要在开发的早期阶段担心它，而是在你有一个工作的 alpha 网站时尝试一下。

# javascript - 在一个对象中返回两个不同的返回值

> ID：11696829
> 
> 赞同：0
> 
> 时间：2012-07-27T23:20:45.853
> 
> 标签：javascript, function, object

我有这个返回对象的函数：

```
String.prototype.test = function(a,b){
    var ob = {};
    ob[a] = b;
    return this || ob
}

//usage
"Test".test('hi','hello'); 
```

如果`.hi`没有附加到测试，我希望它返回字符串。

因此，对于该示例，我需要：

```
"Test".test('hi','hello').hi;//returns: hello 
```

工作，但我还需要：

```
"Test".test('hi','hello'); //returns Test 
```

为了工作，我尝试`||`在退货中使用，但它不起作用。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:23:03.143

不可能使返回值取决于返回值发生的情况。

但是，您可以返回具有`String`属性的对象`hi`：

> **不要在任何生产代码中这样做，它非常丑陋，没有人会想到它。**

```
String.prototype.doStuffThatNobodyExpects = function(a, b) {
    var s = new String(this);
    s[a] = b;
    return s;
}; 
```

> **同样，不要在任何生产代码中这样做，它非常丑陋，没有人会想到它。**

演示：

```
js> var s = 'Test'.doStuffThatNobodyExpects('hi', 'hello');
js> print(s);
Test
js> print(s.hi);
hello 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T23:31:15.810

这是您想要的结构，但是...

```
String.prototype.test = function(a,b){
    this[a]=b;
    return this;
}

//usage
document.write("Test".test('hi','hello'));
document.write("Test".test('hi','hello').hi); 
```

jsFiddle： http: [//jsfiddle.net/XUcYy/](http://jsfiddle.net/XUcYy/) ​</p>

# java - Java/Swing/Mac OSX：使用 ScreenMenuBar 将 JMenu 转换为 JPopupMenu

> ID：11696833
> 
> 赞同：0
> 
> 时间：2012-07-27T23:21:20.040
> 
> 标签：java, macos, swing, jmenu, jpopupmenu

我有一个应用程序，它有一个带有菜单栏的主 GUI，以及另一个全屏框架，这使得主 GUI 的某些部分以全屏独占模式出现。当我处于全屏模式时，我想将菜单栏中的下拉菜单绑定为 jpopupmenu。

Swing 在 JMenu 中提供了 getPopupMenu() 函数。乍一看，这个功能似乎工作正常。我可以将鼠标悬停在菜单项上并移动到并查看子菜单。将鼠标悬停在子菜单上确实会强调子菜单，将鼠标悬停在普通菜单项（或单选按钮菜单项或复选框菜单项）上不会强调该项目。但是，我实际上无法单击菜单项。不过，键盘快捷键确实可以正常工作。该问题与此论坛上提出的问题基本相同（但问题未解决）：

[http://www.java-forums.org/new-java/16463-jmenu-jpopupmenu.html](http://www.java-forums.org/new-java/16463-jmenu-jpopupmenu.html)

如果我在菜单栏初始化并在主 GUI 中使用/显示之后添加一个 JMenuItem（因此在切换到全屏框架时），菜单项实际上是可点击的。该菜单项反过来也可以在主 GUI 的菜单栏中单击。初始化 jMenu 后直接执行 getPopupMenu() 不会改变任何内容。不使用全屏独占模式也不会改变任何问题。

# 编辑

似乎我遗漏了一些重要信息：我正在 Mac OSX 上测试应用程序并使用： `System.setProperty("apple.laf.useScreenMenuBar", "true");`

要制作菜单栏，请使用本机菜单栏。如果我禁用它，弹出菜单将按预期工作。这似乎是 mac java API 中的一个错误？他们有什么克服的方法吗？

我很抱歉忘记提及这一点，我不知道这会影响任何事情（尽管这似乎很明显）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:48:25.680

好的，我可能遗漏了一些东西，但是我很快就将其破解了，没有任何问题

```
public class PopupFrame extends javax.swing.JFrame {

    /**
     * Creates new form PopupFrame
     */
    public PopupFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jMenuBar1 = new javax.swing.JMenuBar();
        mnuFile = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        jMenuItem2 = new javax.swing.JMenuItem();
        jMenuItem3 = new javax.swing.JMenuItem();
        jMenuItem4 = new javax.swing.JMenuItem();
        jMenuItem5 = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                doMouseClicked(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                doMouseClicked(evt);
            }
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                doMouseClicked(evt);
            }
        });

        mnuFile.setText("File");

        jMenuItem1.setText("New");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                doActionPerformed(evt);
            }
        });
        mnuFile.add(jMenuItem1);

        jMenuItem2.setText("Open");
        jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                doActionPerformed(evt);
            }
        });
        mnuFile.add(jMenuItem2);

        jMenuItem3.setText("Save");
        jMenuItem3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                doActionPerformed(evt);
            }
        });
        mnuFile.add(jMenuItem3);

        jMenuItem4.setText("Close");
        jMenuItem4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                doActionPerformed(evt);
            }
        });
        mnuFile.add(jMenuItem4);

        jMenuItem5.setText("Exit");
        jMenuItem5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                doActionPerformed(evt);
            }
        });
        mnuFile.add(jMenuItem5);

        jMenuBar1.add(mnuFile);

        setJMenuBar(jMenuBar1);

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 278, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>

    private void doActionPerformed(java.awt.event.ActionEvent evt) {

        JMenuItem mi = (JMenuItem) evt.getSource();

        JOptionPane.showMessageDialog(this, "Clicked " + mi.getText());

    }

    private void doMouseClicked(java.awt.event.MouseEvent evt) {

        if (evt.isPopupTrigger()) {

            JPopupMenu popupMenu = mnuFile.getPopupMenu();
            popupMenu.show(this, evt.getX(), evt.getY());

        }

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(PopupFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(PopupFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(PopupFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(PopupFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new PopupFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JMenuItem jMenuItem3;
    private javax.swing.JMenuItem jMenuItem4;
    private javax.swing.JMenuItem jMenuItem5;
    private javax.swing.JMenu mnuFile;
    // End of variables declaration
} 
```

我很抱歉，我不得不在我 3 个月大的孩子小睡时把它放在一起，所以它又快又丑：P

**更新**

经过一番尝试，似乎当我们自己调用弹出窗口时，我正在更改弹出窗口的父引用（`invoker`），这意味着当`JMenu`试图显示弹出窗口时，上下文都是错误的。

我将`doActionPerformed`方法更新为如下所示：

```
JOptionPane.showMessageDialog(this, "Clicked " + mi.getText());
JPopupMenu popupMenu = mnuFile.getPopupMenu();
popupMenu.setInvoker(mnuFile); 
```

基本上，休息弹出窗口的客户参考。

# javascript - 正则表达式测试

> ID：11696834
> 
> 赞同：0
> 
> 时间：2012-07-27T23:21:28.183
> 
> 标签：javascript, regex

javascript中的这个正则表达式

```
var foo = RegExp("^https?:\/\/(\w+\.)*youtube\.([a-zA-Z0-9])+"); 
```

将匹配字符串，如：[以下语句返回 true]

```
foo.test("http://www.youtube.com");
foo.test("https://www.youtube.com");
foo.test("http://youtube.com"); 
```

但是如果表达式是，同样的测试会失败：

```
var foo_fail = RegExp("^https?:\/\/(\w+\.)*youtube\.\w+"); 
```

这个 RegExp 应该通过了上述测试，但我看到： foo_fail.test("http://www.youtube.com"); 在 chrome/firebug 控制台上返回 false。这应该返回 true。这个表达式有什么问题？

类似的表达式 if run on perl 返回预期的成功匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T23:27:33.737

您在 : 之前缺少反斜杠`w`：

```
\.\w+ 
```

此外，对于静态正则表达式，*永远不要*使用`[new] RegExp()`语法，而是使用正则表达式文字：

```
var foo = /^https?:\/\/(\w+\.)*youtube\.\w+/; 
```

# jquery - 如何让 jQuery.parseXML 在 node.js 中工作

> ID：11696853
> 
> 赞同：6
> 
> 时间：2012-07-27T23:23:53.330
> 
> 标签：jquery, node.js, xml-parsing, activex

我正在尝试在 node.js 中使用 jQuery parseXml

我收到此错误：

```
Error: Invalid XML: <?xml version="1.0"... 
```

但问题**不**在于 XML

问题出在 node-jquery.js 中：

```
parseXML: function( data ) {
        if ( typeof data !== "string" || !data ) {
            return null;
        }
        var xml, tmp;
        try {
            if ( window.DOMParser ) { // Standard
                tmp = new DOMParser();
                xml = tmp.parseFromString( data , "text/xml" );
            } else { // IE
                xml = new ActiveXObject( "Microsoft.XMLDOM" );
                xml.async = "false";
                xml.loadXML( data );
            }
        } catch( e ) {
            xml = undefined;
        }
        if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
            jQuery.error( "Invalid XML: " + data );
        }
        return xml;
    }, 
```

简单来说，在node.js中，没有**DOMParser**，也没有**ActiveXObject("Microsoft.XMLDOM")**

由于我在 Windows 中工作，我希望 ActiveXObject 可以工作，但不，它没有，jQuery 吞下的实际错误不是无效的 XML，而是 ActiveXObject 没有定义：

```
ReferenceError: ActiveXObject is not defined
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244: 
```

有什么解决方法吗？如何使 jQuery.parseXML 工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T00:55:24.317

我使用[xmldom](https://github.com/jindw/xmldom)取得了巨大的成功。看一看。它似乎像您期望`$.parseXML`的那样解析 xml。我也遇到了 jquery 解析器的问题，并在尝试了一堆之后切换到了这个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-04T03:27:38.457

如果您想继续使用`jQuery.parseXML`而无需对代码进行任何更改（例如，如果您希望能够在客户端和 Node.js 中运行相同的 javascript），则设置起来很容易。[M. Laing 的回答](https://stackoverflow.com/a/11697324/333625)中提到的[xmldom](https://www.npmjs.org/package/xmldom)模块公开了一个构造函数，jQuery 可以像在浏览器中使用[DOMParser一样使用它。](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)这样做的方法如下：`DOMParser`

首先，安装xmldom：

```
npm install xmldom --save 
```

假设您已经在 Node.js 中使用了 jQuery 2.1.x 或更高版本（有关设置说明，请参阅[此存储库](https://github.com/UncoolAJ86/node-jquery)中的自述文件），您现在可以只需要 xmldom 并将其`DOMParser`构造函数公开为全局：

```
global.DOMParser = require('xmldom').DOMParser; 
```

jQuery 现在就能成功了`parseXML`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T23:32:55.310

这看起来是必须在 nodejs 的核心中实现的东西。我建议使用旨在解析 XML 的模块。

[https://github.com/Leonidas-from-XIV/node-xml2js](https://github.com/Leonidas-from-XIV/node-xml2js)

您是否需要 jQuery.parseXML 才能工作，就像您尝试编写代码以跨入浏览器并在服务器上运行一样？

您可以使用 browserify在浏览器中公开[node-](https://github.com/Leonidas-from-XIV/node-xml2js) [xml2js](https://github.com/substack/node-browserify)

还有[libxmljs](https://github.com/polotek/libxmljs)，它似乎比 node-xml2js 更像 XML。

# c# - 如何在 tif 图像中添加 EOFB（传真块结束）

> ID：11696856
> 
> 赞同：2
> 
> 时间：2012-07-27T23:24:14.237
> 
> 标签：c#, .net

我正在使用 CCIT4 压缩创建 tif 图像。此图像没有 EOFB。有人可以帮我如何将此 EOFB 添加到 tif 图像中。或者如何使用 EOFB 信息创建图像。

这是我在没有 EOFB 的情况下生成图像的代码

```
 var tifImg = new Bitmap(500, 500);
        tifImg.SetResolution(200, 200);
        Graphics graphic = Graphics.FromImage(tifImg);
        graphic.FillRectangle(new SolidBrush(Color.White), new Rectangle(0, 0, 500, 500));
        try
        {

                string data = "My data"; 
                Font vrFont = new Font("Verdana", 32, GraphicsUnit.Pixel);
                Size micrSize = TextRenderer.MeasureText(data, vrFont); 
                graphic.DrawString(data, vrFont, new SolidBrush(Color.Black), new Point(10, 100)); 
                Rectangle rectangle = new Rectangle(10, 20, 200, 60);
                graphic.DrawRectangle(new Pen(new SolidBrush(Color.Black)), rectangle);
                SaveImage(tifImg, fileName, appLogger);

        var imageEncoders = System.Drawing.Imaging.ImageCodecInfo.GetImageEncoders().ToList();
        var imageCodecInfo = imageEncoders.FirstOrDefault(o => o.MimeType == "image/tiff");

        var encoderParameter = new System.Drawing.Imaging.EncoderParameters(2);
        encoderParameter.Param[0] = new System.Drawing.Imaging.EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)System.Drawing.Imaging.EncoderValue.CompressionCCITT4);
        encoderParameter.Param[1] = new System.Drawing.Imaging.EncoderParameter(System.Drawing.Imaging.Encoder.SaveFlag, (long)18);

            tifImg.Save(fileName, imageCodecInfo, encoderParameter); 
        }
        catch { throw; }
        finally
        {
            graphic.Dispose();
            tifImg.Dispose();
        } 
```

谢谢，

埃森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:35:08.270

我知道你想要 c#，但是用 java 语言查看[这个类并搜索所有](http://www.java2s.com/Open-Source/Java/6.0-JDK-Modules/Java-Advanced-Imaging/com/sun/media/jai/codecimpl/TIFFFaxEncoder.java.htm)*“addEOFB”*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:58:00.553

这是我在项目中所做的代码。检查这是否对您有帮助。

```
 private void AddEOFB(string imgFileName)
    {
        var fs = new FileStream(imgFileName, FileMode.Append, FileAccess.Write);
        try
        {
            fs.Seek(0, SeekOrigin.End);
            var buf = BitConverter.GetBytes(0x00100100);
            fs.Write(buf, 0, buf.Length);
        }
        catch { throw; }
        finally
        {
            fs.Close();
            fs.Dispose();
        }
    } 
```

# windows-8 - Windows 8 Metro App：来自不同文件的交叉引用 JS 函数

> ID：11696866
> 
> 赞同：0
> 
> 时间：2012-07-27T23:24:52.100
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012

我在从一个到另一个交叉引用 JS 函数时遇到问题。我认为编写 Metro Style 应用程序的建议方法是将函数放入 Microsoft 的 (function () {//code here})() 中。我真的无法从 MS 中找到与此问题相关的任何信息，有人知道该怎么做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:47:18.597

您需要在页面中包含源文件，然后才能调用该函数在另一个文件中。

您可以使用 WinJS.Class.define 以及命名空间创建类等：

```
WinJS.Namespace.define("My.NameSpace", {
    MyClass: WinJS.Class.define(function myConstructor() {
    }, {
       myMemberVar: 1,
       myMemberFn: function (param) {
       }
     }
});
var f = new My.Namespace.MyClass(); 
```

然后，您可以在引用它的其他地方之前包含该文件，并在您认为合适的时候调用它。

# java - 获取 long - a long 的值并将该值存储为 int？

> ID：11696868
> 
> 赞同：0
> 
> 时间：2012-07-27T23:25:21.443
> 
> 标签：java

我`System.currentTimeMillis()`用来获取多个值，然后我从另一个中减去一个以获得两个值之间的差异，然后在 Robot 类的`delay()`方法中使用该值。我需要这个值作为一个整数，因为这是延迟方法将采用的。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T23:27:03.707

如果该`long`值适合`int`，那么您可以像这样简单地转换该值：

```
int someInt = (int) someLong; 
```

（或者，直接作为 amethod 的参数`robot.someMethod((int) someLong);`：）

请注意，an`int`最多可以存储 2147483647（和 2147483647 ms ≈ 24.9 天）的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:50:47.467

正如其他答案和评论所说，如果您不关心可能的溢出，一个简单的类型转换就可以工作。而且您可能*不需要*关心，因为在用户界面方面`2147483647`毫秒是**很长的时间。**

但是，如果您确实需要担心，那么这将更加强大：

```
long time1 = System.currentTimeMillis();
...
long time2 = System.currentTimeMillis();
...
long diff = time2 - time1;
if (diff >= Integer.MIN_VALUE && diff <= Integer.MAX_VALUE) {
    delay((int) diff);
} else {
    throw new SomeException("Delays > 2147483647 milliseconds not supported");
} 
```

还有一个（理论上的）问题，在未来的某个时间，自 1970 年 1 月 1 日以来的毫秒数将不再适合 64 位有符号整数。*但这在数十亿*年内不会发生- [http://en.wikipedia.org/wiki/Year_2038_problem](http://en.wikipedia.org/wiki/Year_2038_problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:49:46.883

作为 aioobe 说

一个简单的类型转换应该可以工作，以防您确定该值实际上总是适合 int。

`int delay_amt = (int)delay_amt_long`

如果没有，那么您将不得不进行一些额外的处理，例如`delay()`多次调用该函数，例如 n+1 次

其中 n=delay_amt_long/max_int_size 和 m=delay_amt_long%max_int_size

其中第 (p+1) 次迭代的延迟时间为 m，因此：

```
delay_amt_long = n*max_int_size + m
```

或者，您可以使用其他方法来专门检测和处理溢出。

# c# - 如何在 RESX 文件的值字段中读取文件名

> ID：11696870
> 
> 赞同：2
> 
> 时间：2012-07-27T23:25:58.673
> 
> 标签：c#, resx

我遇到的问题是当文件名是值时如何遍历资源文件。我第一次尝试使用 DictionaryEntry 也发现了同样的问题。您能否就如何解决此问题提供一些指导？

## 先决条件：

**具有以下字符串资源值的本地资源文件：**

```
Name                 |Value                                   |Comment
-----------------------------------------------------------------------------------------------------
MouseImageUrl2.Text  |protected/images/tutorial/goodwork.gif  |protected/images/tutorial/goodwork.gif 
```

*   **持久性**：嵌入 .resx
*   **类型**：System.String，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089

**以下操作（使用 System.Windows.Forms;）：**

```
ResXResourceReader rsxr = new ResXResourceReader(@"C:\Projects\Working\TFS\Source\Help.aspx.resx");
IEnumerator enumerator = rsxr.GetEnumerator(); 
```

## 细节：

这是我收到的错误（解决方案位于 C:\Projects\Team - SE\Code_PSGDashboard\Development\TAS_LanguageProcessor\TAS_LanguageProcessor）：

```
ResX file Could not find a part of the path 'C:\Projects\Team - SE\Code_PSGDashboard\Development\TAS_LanguageProcessor\TAS_LanguageProcessor\bin\Protected\Images\tutorial\goodwork.gif'. Line 123, position 5\. cannot be parsed. 
```

我正在使用 DictionaryEntry，但提供的代码确实会产生相同的结果。将抛出相同错误的 DictionaryEntry 例程是：

```
ResXResourceReader rsxr = new ResXResourceReader(@"C:\Projects\Working\TFS\Source\Help.aspx.resx");
foreach (DictionaryEntry d in rsxr){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T23:10:10.253

我最终使用的解决方案如下：

```
using System.Collections;
using System.Resources;

/// <summary>   Resource item. </summary>
public static class ResourceItem
{
    /// <summary>
    /// This routine is responsible for getting all the comments from the original files and then
    /// adding them to the new resource files.
    /// </summary>
    /// <param name="inputResX">    The path to the source resx. </param>
    /// <param name="outputResX">   The path to the destination resx. </param>
    /// <returns>   True if changes were made. </returns>
    public static bool CopyComments(string inputResX, string outputResX)
    {
        bool changesMade = false;

        // Populate a Hashtable containing the DataNodes in the output file
        var output = new Hashtable();
        using (var reader = new ResXResourceReader(outputResX))
        {
            reader.UseResXDataNodes = true;
            IEnumerator enumerator = reader.GetEnumerator();
            while (enumerator.MoveNext())
            {
                var entry = (DictionaryEntry)enumerator.Current;

                var dataNode = (ResXDataNode)entry.Value;
                output.Add(dataNode.Name, dataNode);
            }
        }

        // Search the Hashtable for equivalent DataNodes in the input file
        using (var reader = new ResXResourceReader(inputResX))
        {
            reader.UseResXDataNodes = true;
            IEnumerator enumerator = reader.GetEnumerator();
            while (enumerator.MoveNext())
            {
                var entry = (DictionaryEntry)enumerator.Current;

                var inputDataNode = (ResXDataNode)entry.Value;

                if (output.ContainsKey(inputDataNode.Name))
                {
                    var outputDataNode = (ResXDataNode)output[inputDataNode.Name];
                    if (!string.IsNullOrEmpty(inputDataNode.Comment) && outputDataNode.Comment != inputDataNode.Comment)
                    {
                        // Update the output resx’s comments with the input resx’s comments
                        outputDataNode.Comment = inputDataNode.Comment;
                        changesMade = true;
                    }
                }
            }
        }

        if (changesMade)
        {
            // Write the changes back to the output file
            using (var writer = new ResXResourceWriter(outputResX))
            {
                foreach (DictionaryEntry entry in output)
                {
                    writer.AddResource(entry.Key.ToString(), entry.Value);
                }

                writer.Generate();
                writer.Close();
            }
        }

        return changesMade;
    }
} 
```

这使我可以编写新的资源文件并将注释复制到新的资源文件中并保存。

# javascript - 使用javascript在页面加载之前强制选择下拉选项并重新加载页面

> ID：11696877
> 
> 赞同：0
> 
> 时间：2012-07-27T23:26:21.653
> 
> 标签：javascript, dropdownbox

在我们商店的产品列表页面上，我们（面向客户）能够允许某人在下拉框中选择他们的排序方式，其中一个选项是“A 到 Z”。由于我们后端的一些限制，我们无法“强制”页面对“A 到 Z”进行排序，而只能对“最受欢迎”和其他一些选项进行排序。

问题是我们确实希望此特定页面默认按 A 到 Z 排序，并且我们希望它以不干扰访客的方式这样做。因此，脚本必须在页面加载之前触发，从该下拉框中选择 A 到 Z 排序，然后触发页面重新加载（或尽快重新加载页面，这样客户就看不到页面“双重负载”或任何东西）。说得通？

我不知道如何从这个 javascript 开始，但这里是下拉框选项：

```
<div class="sortProductsMain">
<label id="sortById" class="sortProductsHeader">Sort By: </label>
<select id="sortSelection" dojoattachevent="onchange: doSort">
<option id="sortProductsDefault" class="sortProductsDefault" value="sortProductsDefault">Most Popular</option>
<option id="sortProductsHighestRated" class="sortProductsHighestRated" value="sortProductsHighestRated">Highest Rated</option>
<option id="sortProductsNewest" class="sortProductsNewest" value="sortProductsNewest">Newest</option>
<option id="sortProductsAToZ" class="sortProductsAToZ" value="sortProductsAToZ">A-Z</option>
<option id="sortProductsZToA" class="sortProductsZToA" value="sortProductsZToA">Z-A</option>
<option id="sortProductsPriceHighToLow" class="sortProductsPriceHighToLow" value="sortProductsPriceHighToLow">$$$-$</option>
<option id="sortProductsPriceLowToHigh" class="sortProductsPriceLowToHigh" value="sortProductsPriceLowToHigh">$-$$$</option>
</select> 
```

# ruby-on-rails - 选择的插件：多选菜单提示未显示？

> ID：11696886
> 
> 赞同：2
> 
> 时间：2012-07-27T23:29:00.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我[选择的插件](http://harvesthq.github.com/chosen/)选择菜单存在，但当我希望它提示说“选择至少一个类别或创建它”时，它仍然显示“选择某些选项”。

```
<%= f.select :category_ids, Category.all.collect {|c| [c.name, c.id]}, {:prompt => "Select at least one category...."}, { :multiple => true, :class => "category-select" } %> 
```

提示在列表中，而不是像占位符一样直接查看时。我怎么能这样得到它？

**更新**

当我使用`prompt`它时，它实际上将它放在下拉列表中，并且可以选择为一个类别，所以那里是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-15T03:45:58.147

`chosen`我发现这是为多选下拉菜单添加占位符的更简单的解决方案

```
= f.select :category_ids, Category.all.map { |c| [c.name, c.id] },
class: "chosen-select", multiple: true, data: { placeholder: "Categories" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:59:31.757

`getAttribute("data-placeholder")?`对于rails来说，您必须将`placeholder`两行更改为，因此，只需更改两行：

```
return this.form_field.getAttribute("placeholder")?this.default_text=this.form_field.getAttribute("placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match" 
```

# ios - 带有块和保留循环的 ARC

> ID：11696889
> 
> 赞同：1
> 
> 时间：2012-07-27T23:29:13.150
> 
> 标签：ios, memory-management, automatic-ref-counting, afnetworking

我有一个将块作为对象属性的类：

```
@property (nonatomic, readwrite, copy) SFFailureBlock failureBlock; 
```

其中SFFailureBlock：

```
typedef void (^SFFailureBlock)(NSError *error); 
```

我有一个操作也声明为对象属性（AFHTTPRequestOperation），我希望它在完成后调用失败块。

```
 [self.operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    __weak NSError *error = [NSError errorWithDomain:@"com.test" code:100 userInfo:@{@"description": @"zero results"}];
    failureBlock(error);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"nothing");
}]; 
```

我收到一个编译器警告“在此块中强烈捕获 'self' 可能会导致保留周期”。我已经搜索了互联网，但我找不到一个体面的解决方案来解释为什么这会导致保留周期。我不会在任何地方的街区内称呼“自我”。

另一个奇怪的事情是，如果我写'self.failureBlock(error)'，编译器不会给我任何警告！

谁能向我解释发生了什么事？我一定严重遗漏了 ARC 内存管理规则中的某些内容，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:41:44.953

当您在操作块中引用“failureBlock”时，您实际上是在执行“self-> failureBlock” - 所以它隐含地保留了 self。您可以做的是创建一个自动变量 SFFailureBlock xFailureBlock = failureBlock; 上面的self操作，然后在block中使用它。[再一次，你想避免任何 self-> 在该块中的引用。]

# memory - ARM 处理器的内存排序保证是什么？

> ID：11696893
> 
> 赞同：1
> 
> 时间：2012-07-27T23:29:35.123
> 
> 标签：memory, arm

我是ARM的新手。有谁知道我在哪里可以找到概述 ARM 架构的内存排序的文档？例如，我说的是英特尔手册第 8.2 节的 ARM 版本（请参阅[此处](http://www.google.cl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CGcQFjAC&url=http://www.multicoreinfo.com/research/papers/2008/damp08-intel64.pdf&ei=JyQTUKnGKo6o8QTfxYHIDQ&usg=AFQjCNE_VNXAgVGC9NYzHGtyMvdJHkLj1g&sig2=yuRu8RlQIHCDY2Z-dfCbLQ)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:11:40.507

Cortex A9 是第一个内存排序并不简单的 ARM CPU：它具有多核并且具有乱序执行。

最好的选择是[ARM 网站上的文档部分](http://infocenter.arm.com/help/index.jsp)（需要注册）。如果这还不够，他们肯定能够为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T09:07:04.250

这是 ARM 信息中心中的链接，其中说明了内存访问的完整订购要求。希望能帮助到你。

[内存访问的订购要求](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0360f/BABCDDGD.html)

# ruby-on-rails - 选择字段的总和

> ID：11696897
> 
> 赞同：0
> 
> 时间：2012-07-27T23:29:57.743
> 
> 标签：ruby-on-rails, ruby, sqlite, activerecord

那个标题不是很具描述性。我不知道如何缩短我的问题...

假设我有一个`weightlifters`包含`name`、`pounds`、 和`type_of_lift`as 字段的表。该表中有数百个条目。我想检索表中总磅数最高的 10 人。我写了以下内容：

```
Weightlifter.order("pounds DESC").limit(10) 
```

这工作正常，除了我想要累积权重。因此，如果一个人不止一次进入前 10 名，我不希望他的名字被列出两次，我想将权重加在一起并将它们显示为总和。所以如果我有：

```
"Johnny", "300", "Bench"
"Wesley", "295", "Bench"
"Johnny", "280", "Clean"
...
"Timmy", "150", "Curl" 
```

我想显示 580 磅的约翰尼，而不是 300 磅的约翰尼，然后再显示 280 磅的约翰尼。

这是怎么做到的？

Ruby 1.9.3、Rails 3.2.6、SQLite3 3.6.20

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:36:16.510

它应该是这样的

```
Weightlifter.select('name, type_of_lift, sum(pounds) as pounds').
             group('name').
             order("sum(pounds) DESC").
             limit(10) 
```

这是一个很好的指南：[ActiveRecord 查询接口](http://guides.rubyonrails.org/active_record_querying.html#group)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:51:38.270

```
# in your WeightLifter model
class Weightlifter < ActiveRecord

  attr_accessor :weight_total

# WeightLifterController

lifters = []

Weightlifter.order("pounds DESC").each do |lifter| 

  return lifters if lifters.count == 10

  if !lifters.collect{|a| a[:name] }.include?(lifter.name)
    lifters << lifter
    local_lifter = lifters.where(name: lifter.name).first
    local_lifter.weight_total = lifter.weight
  else
    local_lifter = lifters.where(name: lifter.name).first
    local_lifter.weight_total = local_lifter.weight_total + lifter.weight
  end

end 
```

# java - Java Web Start 安全警告替代方案

> ID：11696898
> 
> 赞同：0
> 
> 时间：2012-07-27T23:30:13.693
> 
> 标签：java, security, automation, jnlp, java-web-start

我有一个 shell 脚本可以自动完成很多事情。它需要做的一件事是运行 javaws 脚本。现在它在 shell 脚本中运行如下：

```
javaws /tmp/jnlpgenerator-cli 
```

这会导致弹出安全警告，其中显示：

> 无法验证网站证书。你想继续吗？

这个 shell 脚本是自动化工具的一部分，那么可以做些什么来修改上面的命令，从而不需要用户交互呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:12:23.543

(One of the very few situations where) a policy file might be best. See the following for more information:

*   [Signing Code and Granting It Permissions](http://docs.oracle.com/javase/tutorial/security/toolsign/index.html)
    *   [Set Up a Policy File to Grant the Required Permission](http://docs.oracle.com/javase/tutorial/security/toolsign/rstep3.html)
*   [Policy File Creation and Management](http://docs.oracle.com/javase/7/docs/technotes/guides/security/PolicyGuide.html)
*   [Default Policy Implementation and Policy File Syntax](http://docs.oracle.com/javase/7/docs/technotes/guides/security/PolicyFiles.html)

# zend-framework - 我在哪里可以使用“new Zend_Form()”？

> ID：11696900
> 
> 赞同：0
> 
> 时间：2012-07-27T23:30:23.740
> 
> 标签：zend-framework, zend-form-element

在我的应用程序中，我可以像`$form = new Zend_Form();` 在控制器中看到的那样调用语句，但为什么？如果我们可以使用 application/forms/someform 为什么在控制器中使用它

```
class CustomForm extend Zend_Form
{
    public function init()
    {

    }
} 
```

在控制器中创建表单对吗？这会伤害 MVC 架构吗？我可以在哪里使用`$form = new Zend_Form();`除了控制器以及如何在视图中调用它？我是 Zend 的菜鸟。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:33:31.333

通常您在控制器中创建表单并将其传递给视图。在视图中，您将呈现表单。

# analytics - 如何在不让他们登录的情况下跟踪我的移动应用程序的个人用户的数据？

> ID：11696903
> 
> 赞同：1
> 
> 时间：2012-07-27T23:31:16.347
> 
> 标签：analytics, backend

我想管理我正在创建的手机游戏的用户数据（即他们收集的硬币数量），而不强制他们登录任何东西。换句话说，我希望我的应用程序将游戏统计信息发送到我的后端服务器以存储在数据库中，并且我希望这些游戏统计信息与某种唯一 ID 相关联。我有什么方法可以做到这一点？

我的一些想法是...... 1）使用移动设备的 UDID 2）使用移动设备的 MAC 地址（但这在某些 API 中似乎很难访问）

你的意见？

我在 Google 和 SO 上进行了快速搜索，但可以找到很多。非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:33:47.247

为什么不向服务器请求一个全局唯一 ID，然后将其存储在设备上，就像 cookie 一样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T04:08:54.490

不要跟踪设备硬件 ID，因为手机可能会卖给其他人，然后再安装您的游戏，您就会遇到麻烦。通常建议的做法是跟踪“安装”ID（如果您不使用登录名，然后使用它来识别您的应用程序的特定播放器）。有关更多信息，请参阅 Android 团队的这篇很棒的博客文章（包括 Android 代码片段）：

[http://android-developers.blogspot.com.es/2011/03/identifying-app-installations.html](http://android-developers.blogspot.com.es/2011/03/identifying-app-installations.html)

# jquery - jquery 和 IE8 中的错误

> ID：11696917
> 
> 赞同：0
> 
> 时间：2012-07-27T23:33:43.763
> 
> 标签：jquery, internet-explorer-8

在 IE8 中，网站 guiavivotv.com.br 在滑块中有一个错误。

jQuery替换这个：

```
<span data-value="-1"></span>
<span data-value="+1"></span> 
```

对此：

```
<span data-value="-1"/>
<span data-value="+1"/> 
```

我不知道为什么。这是jquery的错误吗？

我试过使用`replace()`，也没有用。

# php - 使用 PHP GD 计算文本宽度

> ID：11696920
> 
> 赞同：16
> 
> 时间：2012-07-27T23:33:50.920
> 
> 标签：php, fonts, gd

我只是想获取动态文本行的宽度，以添加到使用 GD PHP 生成的图像中。我有点不确定如何。我知道如何使用 imageloadfont() 加载字体，但我可以使用 .ttf 文件吗？我想知道使用 12 号 arial 字体的文本宽度。当我尝试使用我的 ttf 文件时，我收到错误“读取字体错误，字体标题无效”。如果我需要 .gdf 文件，我在哪里可以找到字体大小为 12 的 gdf ​​文件？这是我的代码：

```
$newfont = imageloadfont("../fonts/arial.ttf");
$font_width = imagefontwidth($newfont);
$font_height = imagefontheight($newfont); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-29T14:13:35.360

`imageloadfont()`用于加载用户定义的位图。如果您只想使用 Arial 或任何其他 TrueType 字体 (.ttf) 或 OpenType 字体 (.otf)（GD lib 中对后者的支持是错误的），那么您需要的是[`imagettftext()`](http://es.php.net/manual/en/function.imagettftext.php). 不过，在使用`imagettftext()`图像并将文本写入图像之前，您首先需要知道它是否适合。要知道这一点，你只需要打电话[`imagettfbbox()`](http://es.php.net/manual/en/function.imagettfbbox.php)并将字体大小、文本角度（水平文本为 0）、.ttf 或 .otf 字体文件的路径以及文本字符串传递给它，它将返回一个包含 8 个元素的数组，代表四个点文本的边界框（查看 PHP 手册了解详情）。然后，您可以引用这些数组元素并执行计算，以了解该特定文本字符串将占用的宽度和高度。然后，您可以使用这些值创建具有特定宽度和高度的图像，以允许完整显示文本。

这是一个简单的脚本，可以完成您尝试做的事情以帮助您入门：

```
<?php # Script 1

/*
 * This page creates a simple image.
 * The image makes use of a TrueType font.
 */

// Establish image factors:
$text = 'Sample text';
$font_size = 12; // Font size is in pixels.
$font_file = 'Arial.ttf'; // This is the path to your font file.

// Retrieve bounding box:
$type_space = imagettfbbox($font_size, 0, $font_file, $text);

// Determine image width and height, 10 pixels are added for 5 pixels padding:
$image_width = abs($type_space[4] - $type_space[0]) + 10;
$image_height = abs($type_space[5] - $type_space[1]) + 10;

// Create image:
$image = imagecreatetruecolor($image_width, $image_height);

// Allocate text and background colors (RGB format):
$text_color = imagecolorallocate($image, 255, 255, 255);
$bg_color = imagecolorallocate($image, 0, 0, 0);

// Fill image:
imagefill($image, 0, 0, $bg_color);

// Fix starting x and y coordinates for the text:
$x = 5; // Padding of 5 pixels.
$y = $image_height - 5; // So that the text is vertically centered.

// Add TrueType text to image:
imagettftext($image, $font_size, 0, $x, $y, $text_color, $font_file, $text);

// Generate and send image to browser:
header('Content-type: image/png');
imagepng($image);

// Destroy image in memory to free-up resources:
imagedestroy($image);

?> 
```

相应地更改值以满足您的需求。不要忘记阅读 PHP 手册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T15:08:31.597

使用 GD2，*imagettfbbox*的字体大小需要以 PT 为单位，而不是以像素为单位，并进行以下转换：

> ($fontSizeInPixel * 3) / 4

# html - 在多个页面上链接相同的 HTML

> ID：11696921
> 
> 赞同：4
> 
> 时间：2012-07-27T23:33:55.453
> 
> 标签：html, css

我将如何链接多个页面中使用的相同 HTML，而不是在所有几个页面中添加相同的标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T23:41:58.927

您可以`iframe`在几个页面中的每一个上使用一个`src`通用 HTML 来执行此操作。

也可以在客户端使用 javascript。[`load`](http://api.jquery.com/load/)jQuery 提供了一种方法，使这变得特别容易。您可以使用`jQuery.load()`将 HTML 块添加到不同 HTML 页面的元素中。

例如，如果每个页面都有一个`div`命名`content`：

```
<div id=`contents`></div> 
```

然后您可以在每个页面中执行此操作：

```
$('#content').load('commonContent.html'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T23:36:28.277

它可以从服务器端完成。

如果您使用的是 PHP，则可以使用`include()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T23:37:22.720

可以使用 JavaScript [http://webdesign.about.com/od/javascript/ht/htjsincludehtm.htm](http://webdesign.about.com/od/javascript/ht/htjsincludehtm.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T23:49:06.550

如果 Web 主机允许，服务器端包含 (SSI) 就可以解决问题。因此，要插入文件“common.htm”的内容，只需将其放入每个页面的 html 中：

```
<!–-#include virtual="common.htm” -–&gt; 
```

你可以在这里阅读：[http ://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T23:52:21.797

You should check: [http://www.triadwebcrafters.com/article_server_side_language.cfm](http://www.triadwebcrafters.com/article_server_side_language.cfm) and [Best practice for inserting large chunks of HTML into elements with Javascript?](https://stackoverflow.com/questions/2839844/best-practice-for-inserting-large-chunks-of-html-into-elements-with-javascript)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T16:19:28.537

您可能想研究 asp.net MVC 框架。您在其中有一个共享视图来编写不同页面之间共有的部分。

# wpf - 标签的多个 RadioButton 可见性绑定

> ID：11696924
> 
> 赞同：1
> 
> 时间：2012-07-27T23:34:40.603
> 
> 标签：wpf

我正在使用转换器

```
 <Window.Resources>
    <BooleanToVisibilityConverter x:Key="convVisibility"/>
</Window.Resources> 
```

我有 3 个单选按钮：

```
 <RadioButton Content="PRE" GroupName="Env" Height="16" HorizontalAlignment="Left" Margin="492,167,0,0" Name="radioButton4" VerticalAlignment="Top" />
    <RadioButton Content="POST" GroupName="Env" Height="16" HorizontalAlignment="Left" Margin="558,167,0,0" Name="radioButton5" VerticalAlignment="Top" />
    <RadioButton Content="BOTH" GroupName="Env"  Height="16" HorizontalAlignment="Left" Margin="632,167,0,0" Name="radioButton6" VerticalAlignment="Top" /> 
```

如果选择了radioButton4 或radioButton6，我将尝试显示一个标签。目前可以使用它与 4 一起使用。

```
 <Label Content="PRE" Visibility="{Binding IsChecked, ElementName=radioButton4, Converter={StaticResource convVisibility}}" Height="28" HorizontalAlignment="Left" Margin="57,262,0,0" Name="label7" VerticalAlignment="Top" /> 
```

有没有办法在标签上添加第二个绑定，或者我是 SOL，我在过去一个小时左右尝试过谷歌搜索，并希望它很简单，可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:49:58.017

您可以将 a[`MultiBinding`](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)与自定义[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)一起使用，该转换器是`OR`从绑定到两者的输入值`RadioButtons`。

```
<Label.Visibility>
    <MultiBinding>
        <MultiBinding.Converter>
            <local:LogicalOrConverter />
        </MultiBinding.Converter>
        <Binding Path="IsChecked" ElementName="radioButton4"/>
        <Binding Path="IsChecked" ElementName="radioButton6"/>
    </MultiBinding>
</Label.Visibility> 
```

# coldfusion - ColdFusion 9 的站点范围的错误处理程序不起作用

> ID：11696930
> 
> 赞同：0
> 
> 时间：2012-07-27T23:36:06.660
> 
> 标签：coldfusion, error-handling, coldfusion-9

我有一个错误页面，`anyError.cfm`看起来像这样

```
<!DOCTYPE html>
<html>
    <head>
        <title>Error</title>

    </head>

    <body>
        <p>An error has occurred.</p>
    </body>
</html> 
```

在`Server Settings > Settings > Site-wide Error Handler`我输入的 CF web admin 下`\anyError.cfm`。当我导航到`http://localhost:8500/some-url-that-doesnt-exist`我仍然得到默认的错误页面。所以我的问题是，如何使用 CF9 获得自定义站点范围的错误页面？它不一定必须通过网络管理员。

**编辑：** ![在此处输入图像描述](../Images/2588c2141435e6f02746e51fc3f61fcc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:06:33.420

尝试在站点范围的错误处理程序设置中使用值“anyError.cfm”而不是“\anyError.cfm”。

更新，在看到您对问题的更新后，我现在看到您正在生成 404。这不适用于站点范围的错误处理程序，而是用于旁边缺少的模板处理程序设置。

尝试使用不存在的变量来生成错误，从而导致显示站点范围的错误处理程序。

# mysql - MySql 在文件 STR_TO_DATE 中加载数据返回空白？

> ID：11696934
> 
> 赞同：1
> 
> 时间：2012-07-27T23:36:35.917
> 
> 标签：mysql, csv

我正在从 csv 文件将 1m+ 条记录导入我的表中。使用 load data local infile 方法效果很好。

但是，日期都是不同的格式。一个快速的谷歌引导我到这个功能：

STR_TO_DATE

但是，当我实现它时，我什么也得不到，一个空的插入。这是我的 SQ 缩减为包括一个日期（我有 4 个有相同问题）和通用列名：

```
load data local infile 'myfile.csv' into table `mytable`
fields terminated by '\t'
lines terminated by '\n'
IGNORE 1 LINES

( `column name 1`
, `my second column`
, @temp_date
, `final column`)

SET `Get Date` = STR_TO_DATE(@temp_date, '%c/%e/%Y') 
```

如果我做：

```
SET `Get Date` = @temp_date 
```

csv 中的日期以文件中的格式捕获。但是，当我尝试第一种方法时，我的表格列是空的。我已将列类型从时间戳更改为 varchar (255) 以捕获正在发生的任何事情，但最终，我想捕获 ymd H:i:s （不确定 STR_TO_DATE 是否可以做到这一点？）

我也不确定为什么我需要@符号..谷歌在那里让我失望了。

所以，我的问题是：

1.  为什么我需要 @ 符号才能使用此功能？
2.  数据格式（'%c/%e/%Y'）应该是输入数据的格式还是我想要的输出格式？
3.  我也可以这样记录时间吗？

对不起这个大帖子！

现在回到谷歌...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:47:21.607

**为什么我需要 @ 符号才能使用此功能？**

@ 符号表示您正在使用变量，因此读取的字符串不会立即放入表中，而是放入内存中，让您在插入之前对其进行操作。[http://dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)中的更多信息

**数据格式（'%c/%e/%Y'）应该是输入数据的格式还是我想要的输出格式？**

它是输入数据的格式，更多信息在[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

**我也可以这样记录时间吗？**

只要您选择了正确的格式，您就应该可以，例如

```
STR_TO_DATE(@temp_date,'%c/%e/%Y %h:%i:%s'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T17:45:07.147

我有这个问题。为我解决的问题是确保我在加载文件中考虑了不是分隔符的空格。所以如果 ',' 是分隔符：

...，2012 年 4 月 29 日，...

可能被解释为“2012 年 4 月 29 日”

所以应该是......，2012 年 4 月 29 日，......

# iphone - 应用程序终止后如何在 UIWebView 中显示最后一个 URL

> ID：11696942
> 
> 赞同：-1
> 
> 时间：2012-07-27T23:39:23.380
> 
> 标签：iphone, objective-c

所以我需要帮助的是喜欢制作标签。在应用程序终止后，用户将能够看到他们所在的最后一个 URL。但是这段代码不起作用。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{

    [[NSUserDefaults standardUserDefaults] saveObject: [[request URL] absoluteString] forKey: @"SAVED-URL"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:11:05.007

使用 webview 委托来检索最后一个请求。

`– webView:shouldStartLoadWithRequest:navigationType:`
[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)

保存它，例如。像这样的用户默认值：

`[[NSUserDefaults standardUserDefaults] saveObject: [[request URL] absoluteString] forKey: @"SAVED-URL"];`
[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

应用程序重新启动后，从 Userdefaults 再次加载它并在 webview 中加载它。

# iphone - iPhone 编程——UIView 元素似乎忽略了 Hidden=NO 调用

> ID：11696943
> 
> 赞同：1
> 
> 时间：2012-07-27T23:39:29.800
> 
> 标签：iphone, ios, uiview

使用 XCode 4.4 和 Mountain Lion，

我有一个 UIImageView，在那个视图上，我有一个 UIProgressView 和一个 UIButton。当应用程序启动时，进度视图和按钮都被隐藏，如故事板中设置的那样。然后我尝试取消隐藏它们，首先是在我做某事时的进度条，然后是当我完成时的按钮。我已经为这两个项目打电话，

```
[self.view bringSubviewToFront:saveToCameraRoll]; 
```

尝试将它们放在 UIView 的前面。

问题是，当我以编程方式尝试取消隐藏它们时，它不起作用。我可以打电话：

```
progressBar.hidden = NO;
[self.view bringSubviewToFront:progressBar]; 
```

而这无济于事。

因此，我尝试在情节*提要*中将所有内容设置为可见，然后在控制器加载后以编程方式将所有内容设置为不可见。没有成交; 现在我对 hidden = YES 的调用似乎被忽略了。

然后我删除了所有实际的编程，所以点击按钮应该只会导致按钮和进度条出现，原因可能是主线程变得饥饿并且无法更新。

如何强制元素注意隐藏？

**编辑**：我现在还尝试以编程方式将 alpha 从 1 修改为 0。没有变化。就像我所做的一切都被忽略了。我通过 ctrl-drag 方法将这些项目放入 .m 文件的 @interface 部分；也许我没有更多的委托或接口或任何连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:04:58.553

正如您所说，您将 ivars 与您的 XIB 文件连接起来，您的问题似乎是您正在主线程上做一些事情，这反过来会阻止运行循环，并且您的 UI 不再被重绘。当您通过更改其属性来更新 UI 元素时，这些更改不会立即应用，而是在下一次重新绘制 UI 时发生，这仅在您给主线程 runloop 一个运行机会时才会发生。但是，如果您执行类似以下代码的操作，则更改将永远不会出现：

```
[button setHidden:YES];

[self doSomethingReallyExpensiveAndTimeConsuming];

[button setHidden:NO]; 
```

The result of this code is that the button is set to be hidden, but doesn't get redrawn because the system has no chance to do it and when the system actually has a chance to redraw the UI, the button is already set to be invisible. A fix for this is to either split the work up and schedule it via timers on the main thread, or to use something like GCD to offload the work on a secondary thread (but then you need to make sure that your code is threadsafe!)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:03:55.277

网点是否有可能是零，因为它们没有与 IB 挂钩？如果是这样，任何操纵都不会产生影响。

尝试`NSLog(@"%@", saveToCameraRoll);`

它是空的吗？通过重新连接 IB 中的插座进行修复。如果可行，则 .hidden = NO 将起作用，您可以摆脱为操纵视图层次结构而添加的任何代码。

# .net - Powershell v3 Invoke-WebRequest HTTPS 错误

> ID：11696944
> 
> 赞同：138
> 
> 时间：2012-07-27T23:39:40.867
> 
> 标签：.net, rest, powershell, https

使用 Powershell v3 的 Invoke-WebRequest 和 Invoke-RestMethod 我已成功使用 POST 方法将 json 文件发布到 https 网站。

我正在使用的命令是

```
 $cert=New-Object System.Security.Cryptography.X509Certificates.X509Certificate2("cert.crt")
 Invoke-WebRequest -Uri https://IPADDRESS/resource -Credential $cred -certificate $cert -Body $json -ContentType application/json -Method POST 
```

但是，当我尝试使用 GET 方法时：

```
 Invoke-WebRequest -Uri https://IPADDRESS/resource -Credential $cred -certificate $cert -Method GET 
```

返回以下错误

```
 Invoke-RestMethod : The underlying connection was closed: An unexpected error occurred on a send.
 At line:8 char:11
 + $output = Invoke-RestMethod -Uri https://IPADDRESS/resource -Credential $cred
 +           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest)      [Invoke-RestMethod], WebException
+ FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeRestMethodCommand 
```

我尝试使用以下代码忽略 SSL 证书，但我不确定它是否真的在做任何事情。

```
 [System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true} 
```

有人可以就这里可能出现的问题以及如何解决它提供一些指导吗？

谢谢

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-04-05T19:20:05.170

这种解决方法对我有用： [http ://connect.microsoft.com/PowerShell/feedback/details/419466/new-webserviceproxy-needs-force-parameter-to-ignore-ssl-errors](http://connect.microsoft.com/PowerShell/feedback/details/419466/new-webserviceproxy-needs-force-parameter-to-ignore-ssl-errors)

基本上，在您的 PowerShell 脚本中：

```
add-type @"
    using System.Net;
    using System.Security.Cryptography.X509Certificates;
    public class TrustAllCertsPolicy : ICertificatePolicy {
        public bool CheckValidationResult(
            ServicePoint srvPoint, X509Certificate certificate,
            WebRequest request, int certificateProblem) {
            return true;
        }
    }
"@
[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy

$result = Invoke-WebRequest -Uri "https://IpAddress/resource" 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2017-09-16T13:43:25.643

Lee 的回答很好，但我也遇到了 Web 服务器支持的协议的问题。
在还添加以下行之后，我可以通过 https 请求。正如这个答案中指出的那样[https://stackoverflow.com/a/36266735](https://stackoverflow.com/a/36266735)

```
$AllProtocols = [System.Net.SecurityProtocolType]'Ssl3,Tls,Tls11,Tls12'
[System.Net.ServicePointManager]::SecurityProtocol = $AllProtocols 
```

我对李的代码的完整解决方案。

```
add-type @"
using System.Net;
using System.Security.Cryptography.X509Certificates;
public class TrustAllCertsPolicy : ICertificatePolicy {
    public bool CheckValidationResult(
        ServicePoint srvPoint, X509Certificate certificate,
        WebRequest request, int certificateProblem) {
        return true;
    }
}
"@
$AllProtocols = [System.Net.SecurityProtocolType]'Ssl3,Tls,Tls11,Tls12'
[System.Net.ServicePointManager]::SecurityProtocol = $AllProtocols
[System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-03-19T16:59:51.937

[纯powershell](/questions/tagged/powershell "显示标记为“powershell”的问题")`Add-Type`中的替代实现（没有[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")源代码）：

```
#requires -Version 5
#requires -PSEdition Desktop

class TrustAllCertsPolicy : System.Net.ICertificatePolicy {
    [bool] CheckValidationResult([System.Net.ServicePoint] $a,
                                 [System.Security.Cryptography.X509Certificates.X509Certificate] $b,
                                 [System.Net.WebRequest] $c,
                                 [int] $d) {
        return $true
    }
}
[System.Net.ServicePointManager]::CertificatePolicy = [TrustAllCertsPolicy]::new() 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-31T12:51:12.947

你试过用`System.Net.WebClient`吗？

```
$url = 'https://IPADDRESS/resource'
$wc = New-Object System.Net.WebClient
$wc.Credentials = New-Object System.Net.NetworkCredential("username","password")
$wc.DownloadString($url) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-05-19T08:56:05.063

> 调用-WebRequest“域名”-SkipCertificateCheck

您可以使用**-SkipCertificateCheck**参数将其作为单行命令来实现（此参数仅支持核心 PSEDITION）

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-08-02T19:33:29.487

以下工作对我有用（并使用最新的非弃用方式与 SSL 证书/回调功能进行交互），并且不会尝试在同一个 powershell 会话中多次加载相同的代码：

```
if (-not ([System.Management.Automation.PSTypeName]'ServerCertificateValidationCallback').Type)
{
$certCallback=@"
    using System;
    using System.Net;
    using System.Net.Security;
    using System.Security.Cryptography.X509Certificates;
    public class ServerCertificateValidationCallback
    {
        public static void Ignore()
        {
            if(ServicePointManager.ServerCertificateValidationCallback ==null)
            {
                ServicePointManager.ServerCertificateValidationCallback += 
                    delegate
                    (
                        Object obj, 
                        X509Certificate certificate, 
                        X509Chain chain, 
                        SslPolicyErrors errors
                    )
                    {
                        return true;
                    };
            }
        }
    }
"@
    Add-Type $certCallback
 }
[ServerCertificateValidationCallback]::Ignore(); 
```

这改编自以下文章 [https://d-fens.ch/2013/12/20/nobrainer-ssl-connection-error-when-using-powershell/](https://d-fens.ch/2013/12/20/nobrainer-ssl-connection-error-when-using-powershell/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-26T00:50:20.900

我发现当我使用这个回调函数忽略 SSL 证书时`[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}`

我总是收到错误消息`Invoke-WebRequest : The underlying connection was closed: An unexpected error occurred on a send.`，这听起来像是您得到的结果。

我找到了这个[论坛帖子](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/a260da46-b035-478c-9887-ba5a0a4777a0/)，它引导我使用下面的功能。我在其他代码的范围内运行了一次，它对我有用。

```
`function Ignore-SSLCertificates
{
    $Provider = New-Object Microsoft.CSharp.CSharpCodeProvider
    $Compiler = $Provider.CreateCompiler()
    $Params = New-Object System.CodeDom.Compiler.CompilerParameters
    $Params.GenerateExecutable = $false
    $Params.GenerateInMemory = $true
    $Params.IncludeDebugInformation = $false
    $Params.ReferencedAssemblies.Add("System.DLL") > $null
    $TASource=@'
        namespace Local.ToolkitExtensions.Net.CertificatePolicy
        {
            public class TrustAll : System.Net.ICertificatePolicy
            {
                public bool CheckValidationResult(System.Net.ServicePoint sp,System.Security.Cryptography.X509Certificates.X509Certificate cert, System.Net.WebRequest req, int problem)
                {
                    return true;
                }
            }
        }
'@ 
    $TAResults=$Provider.CompileAssemblyFromSource($Params,$TASource)
    $TAAssembly=$TAResults.CompiledAssembly
    ## We create an instance of TrustAll and attach it to the ServicePointManager
    $TrustAll = $TAAssembly.CreateInstance("Local.ToolkitExtensions.Net.CertificatePolicy.TrustAll")
    [System.Net.ServicePointManager]::CertificatePolicy = $TrustAll
}`
```

* * *

 `## 回答 #8

> 赞同：1
> 
> 时间：2012-08-01T03:21:16.520

我尝试搜索有关 EM7 OpenSource REST API 的文档。到目前为止没有运气。

[http://blog.sciencelogic.com/sciencelogic-em7-the-next-generation/05/2011](http://blog.sciencelogic.com/sciencelogic-em7-the-next-generation/05/2011)

有很多关于 OpenSource REST API 的讨论，但没有指向实际 API 或任何文档的链接。也许是我不耐烦了。

您可以尝试以下几件事

```
$a = Invoke-RestMethod -Uri https://IPADDRESS/resource -Credential $cred -certificate $cert 
$a.Results | ConvertFrom-Json 
```

试试这个看看你是否可以过滤掉你从 API 获得的列

```
$a.Results | ft 
```

或者，您也可以尝试使用它

```
$b = Invoke-WebRequest -Uri https://IPADDRESS/resource -Credential $cred -certificate $cert 
$b.Content | ConvertFrom-Json 
```

卷曲样式标题

```
$b.Headers 
```

我使用 twitter JSON api 测试了 IRM / IWR。

```
$a = Invoke-RestMethod http://search.twitter.com/search.json?q=PowerShell 
```

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-05T22:10:56.220

这些注册表设置会影响 .NET Framework 4+，因此也会影响 PowerShell。设置它们并重新启动任何 PowerShell 会话以使用最新的 TLS，无需重新启动。

```
Set-ItemProperty -Path 'HKLM:\SOFTWARE\Wow6432Node\Microsoft\.NetFramework\v4.0.30319' -Name 'SchUseStrongCrypto' -Value '1' -Type DWord
Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\.NetFramework\v4.0.30319' -Name 'SchUseStrongCrypto' -Value '1' -Type DWord 
```

请参阅[https://docs.microsoft.com/en-us/dotnet/framework/network-programming/tls#schusestrongcrypto](https://docs.microsoft.com/en-us/dotnet/framework/network-programming/tls#schusestrongcrypto)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-05-26T14:37:24.693

1.  运行此命令

New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname {your-site-hostname}

在 powershell 中使用**管理员权限**，这将在 Personal 目录中生成所有证书

2.  要摆脱隐私错误，请选择这些证书，右键单击 → 复制。并粘贴在受信任的根证书颁发机构/证书中。
3.  最后一步是在 IIS 中选择正确的绑定。转到 IIS 网站，选择 Bindings，选择 SNI 复选框并为每个网站设置单独的证书。

**确保网站主机名和证书 dns-name 应该完全匹配**

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-06-21T17:08:37.173

如果您以管理员身份运行它，该错误应该会消失`

# c++ - 分配字符串数组时出现分段错误

> ID：11696945
> 
> 赞同：0
> 
> 时间：2012-07-27T23:39:51.957
> 
> 标签：c++, string, pointers

几天来，我一直试图为一个函数返回一个字符串数组，但无济于事。当我在 StackOverflow 上搜索时，我发现最好有一个参数来分配数组的值。所以，这是我的代码示例（不是实际用法，而是我如何尝试使用该函数的模型）。如果代码有点草率，我很抱歉。我已经用它测试了一段时间。

```
void splitOn(string message, string delim, string***toCh) {

string** rString = new string*;
string lArr[numberOf(message, delim)+1];
for(int index=0; index<numberOf(message, delim)+2; index++) {

    lArr[index]=message.substr(0, message.find(delim)).c_str();

    message = message.substr(message.find(delim)+1, message.length());
rString[index]=&lArr[index];

cout << "IN LOOP "<<*rString[index]<<endl;
}
rString[numberOf(message, string(delim))] = &message;
toCh=&rString;
}

int main(){
string***arr;
splitOn("fox.over.lazy.dog", ".", arr);
cout << **arr[0]<<endl; 
```

笔记：

*   numberOf() 接受一个字符串和一个定界符（字符串），并返回在字符串中找到定界符的次数。

*   字符串来自 std::string

*   lArr（循环内的本地数组）和 *rString 都给出正确的输出。

*   尽管我试图将数组分配给参数，但学习如何返回数组对我来说更有吸引力。

我可以将它与一个文件和 getLine() 一起破解，但我更愿意学习如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:08:08.613

您正在尝试返回局部变量，这将永远无法工作。您和您的调用者需要就如何分配返回值达成一致。在 C++ 中，正如评论者所提到的，这通常是通过传递对向量的引用来为您处理分配来完成的。

在 C 中你有两个选择，你可以让调用者传递足够大的分配，或者在被调用者中多次调用 malloc （不要忘记调用者中的 free 调用！）

例如，如果您传递一个可写字符数组，您可以简单地用空字符覆盖分隔符，将其拆分为单独的字符串，而无需分配新的副本。

# php - 从 IMDb 获得人物和电影/电视剧的奖项

> ID：11696948
> 
> 赞同：0
> 
> 时间：2012-07-27T23:40:06.140
> 
> 标签：php, regex, imdb

我有这些正则表达式来从一个人（例如[Cote de Pablo](http://www.imdb.com/name/nm1580243/)）那里获得奥斯卡奖、胜利和提名。

```
preg_match('/([0-9]+) Oscars/', $url, $oscars);
preg_match('/([0-9]+) ([win|wins]+)/', $url, $wins);
preg_match('/([0-9]+) nominations/', $url, $nominations); 
```

虽然比这三个奖项更多，但我想知道如何用两个分开的正则表达式为一个人和一部电影或电视剧获得所有奖项？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:51:33.027

老实说，您可以复制/粘贴它，但是如果您希望它不断更新它，那就另当别论了。

# android - Android：ProgressDialog 没有立即显示

> ID：11696949
> 
> 赞同：2
> 
> 时间：2012-07-27T23:40:07.083
> 
> 标签：android, multithreading, delay, progressdialog

我在android上显示progressDialog时遇到问题。它确实显示在屏幕上，但在真正显示对话框之前需要几秒钟。

这是我为显示对话框所做的代码

```
Handler saveHandler = new Handler() {

                @Override
                public void handleMessage(Message msg) {
                    GallerySaveActivity.this.Submit(progress);

                    Button btn_next = (Button) findViewById(R.id.btn_next);
                    btn_next.setEnabled(true); 
                }
            };
            progress.showDialog(saveHandler, "", "Accessing Facebook ...");
            Thread progress_thread = new Thread(progress); 
            progress_thread.start(); 
```

我是否必须在 Thread 对象上做任何额外的工作才能立即显示对话框而不会有任何延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:09:38.773

考虑使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)：在 中显示您的对话框[`onPreExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)，并在 中执行您的后台任务[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)。

# cloud-foundry - 我部署到 CloudFoundry，现在怎么办？（原谅我的无知）

> ID：11696954
> 
> 赞同：1
> 
> 时间：2012-07-27T23:41:50.400
> 
> 标签：cloud-foundry

我意识到 CloudFoundry 仍处于测试阶段，我承认在这种级别的云计算方面有点无知，但这是我的问题：我创建了一个应用程序，一切正常，我将它上传到 CF。怎么办？我想在野外启动我的应用程序。我希望用户看不到 CF URL。

这里有一些我知道的部分，但我没有得到完整的图片。

我知道我可以将 URL 映射到应用程序。所以大概这只是一些 DNS 路由发生。但除此之外，在这一点上将农场押在 CF 上是否安全，例如，使用它启动创业公司？什么时候我会意识到我需要迁移到 RackSpace（或其他）之类的东西，是否可以使用我的 CF VM 并移动它？

总的来说，除了快速部署演示应用程序的方法之外，我只是不完全理解我们使用 CF 得到了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:09:22.173

此时，如果您需要自定义域，则需要配置外部代理，然后从那里将流量路由到您的 CF.com URL。[这](http://henryk-konsek.blogspot.co.il/2012/05/custom-domain-for-application-deployed.html)是一个很好的例子。

但 CloudFoundry 的优势在于它是完全开源的。您始终可以将您的应用程序移至兼容的服务提供商，例如[AppFog](http://www.appfog.com/)，只需一个简单的`push`.

您甚至可以在 Rackspace 上部署您自己的 CF 实例/服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:35:30.137

Cloud Foundry 上似乎仍然不支持外部域映射。这是另一个使用在 Google AppEngine 上运行的 Python 反向代理的示例。这很好用。[http://programming.mvergel.com/2011/11/cloud-foundry-and-custom-domain.html](http://programming.mvergel.com/2011/11/cloud-foundry-and-custom-domain.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T01:00:55.390

目前，CloudFoundry.com 不提供域映射。您可能期望它会在未来完全支持的付费版本中这样做，但正如您所注意到的，现在它仍处于测试阶段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T19:06:40.897

对于它的价值，我正在 CloudFoundry 上运行一个启动 B2B 产品。不过，我已经在我们自己的基础架构上部署了开源版本，我密切关注变化，甚至审查其他人的提交。这是对学习和时间的重大投资，但在我看来，这是值得的。

# jquery - jQuery 将新的 .append 元素绑定到函数

> ID：11696960
> 
> 赞同：0
> 
> 时间：2012-07-27T23:42:05.413
> 
> 标签：jquery, function, append, element, bind

在此脚本中，目标是在单击#packet 时附加/生成元素“#sauce”，然后在再次单击#packet 时“触发”。

到目前为止，脚本创建了火灾，然后创建了一个新的“#sauce”，但是新的“#sauce”没有绑定到函数 fireA()。

所以 .on('click' 我认为应该运行两个函数-首先触发#sauce并将新的#sauce附加到#saucebox，这将成为再次单击触发的下一个元素......基本上是弹药重新加载:)

```
 $(document).ready(function() 

    {

$("#rip_tab").click(function () {
      $(this).toggleClass("rip_tab_ripped");
    });  

function fireA() { $("#sauce").removeClass("sauceWait").switchClass("sauce_hide", "sauce1", 200).switchClass("sauce1", "sauce2_fall", 400);}

    $('#packet').on('click', function() {
if ($('#rip_tab').hasClass("rip_tab_ripped")) 

    {       

   var events = [fireA];

   //declare counter
   if(!this.counter) { this.counter = 0; }

   events[this.counter]();
   this.counter = (this.counter + 1) % 3;

}

    });

$(document).on('click','#packet', function () {
$('#saucebox').append('<div id="sauce" class="sauce1 sauce_hide sauceWait sq1"></div>');
$fireA();
});

  }); 
```

如果我使用初始的“#sauce”，它会触发并正确生成另一个“#sauce”，但新的#sauce 不会绑定到函数 fireA()

```
<div id="saucebox">
<div id="sauce" class="sauce1 sauce_hide sauceWait sq1"></div>
</div> 
```

如果没有初始的“#sauce”点击会正确生成另一个“#sauce”，但同样，新的#sauce 不会绑定到函数 fireA()

```
<div id="saucebox">
<div id="sauce" class="sauce1 sauce_hide sauceWait sq1"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:59:07.170

您不能在一个文档中多次使用同一个 ID。您必须选择不同的 ID 或使用其他选择器。 `#sauce`uses `document.getElementById`，它只会选择第一个。 `[id=sauce]`应该选择两者，尽管从 DOM 的角度来看它仍然是错误的。

# nhibernate - 您可以从单个 QueryOver 投影多个聚合吗

> ID：11696962
> 
> 赞同：1
> 
> 时间：2012-07-27T23:42:24.790
> 
> 标签：nhibernate, queryover, nhibernate-projections

我可以在实体集合上创建单个聚合投影

**示例** 返回活跃的商店数量

但是有没有办法在同一个查询中预测一堆不同的总和的数量？

**例子**

活跃的商店数量？

拥有活跃产品的商店数量？

不活跃的商店数量？

然后最终使用 select 方法将这些投影到新属性中。

如果您不能在一个查询中完成所有操作，是否有一种方法可以创建单独的子查询并将它们连接在一起以将它们（作为新属性）投影到一个对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:49:45.857

我不认为您可以使用单个 QueryOver 来做到这一点，因为 QueryOver 只是 Criteria 的包装器。

您可以为此使用[多个标准](http://my.safaribooksonline.com/book/programming/java/9781849513043/queries/ch04lvl1sec06)。创建几个 QueryOver 并使用属性 UnderlyingCriteria 将其添加到 MultiCriteria。

# excel - 如何在 Excel 中使用 VBA 代表另一个日历发送会议请求？

> ID：11696963
> 
> 赞同：4
> 
> 时间：2012-07-27T23:42:51.007
> 
> 标签：excel, calendar, outlook, vba

我第二次发布此请求，因为虽然我收到了 JimmyPena 的回复，但该解决方案没有奏效，而且我似乎无法就发生的事情添加我的评论。VBA 代码位于 Excel 电子表格而非 Outlook 中。

我正在尝试在 Excel 2007 中编写一些 VB 代码，该代码将在电子表格中指定的日期自动从 Outlook 2007 日历向 Excel 电子表格中列出的收件人列表发送会议邀请。这很有用，因为只需单击一下按钮，我就可以在不同的日期向不同的人发送数百个会议请求。使用以下代码从我自己的用户帐户发送时，我可以做到这一点：

```
' Create the Outlook session 
Set myoutlook = CreateObject("Outlook.Application") 
' Create the AppointmentItem 
Set myapt = myoutlook.CreateItem(olAppointmentItem)     ' Set the appointment properties 
With myapt 
    .Subject = " Assessment Centre " 
    .Location = "conference room A" 
    .Start = Cells(5, 24 + j) & " 17:00:00 PM" 
    .Duration = 120 
    .Recipients.Add Cells(i, 1).Value 
    .MeetingStatus = olMeeting 
    ' not necessary if recipients are email addresses 
    'myapt.Recipients.ResolveAll 
    .AllDayEvent = "False" 
    .BusyStatus = "2" 
    .ReminderSet = False 
    .Body = L1 & vbCrLf & vbCrLf & L2 & vbCrLf & vbCrLf & L3 & vbCrLf & vbCrLf & L4 
        .Save 
    .send 
End With 
```

但现在我想从我是代表的虚拟用户帐户发送会议请求，使用类似“sendonbehalfof”的东西，以便虚拟日历存储所有会议邀请，其他代表也可以使用相同的虚拟用户来操作系统用户帐号。这在使用以下代码发送电子邮件时工作正常：

```
Set oApp = CreateObject("Outlook.Application") 
Set oMail = oApp.CreateItem(0) 

With oMail 
    .To = " John.Smith@John_Smith.com " 
    .Subject = "Subject" 
    .Body = "Body" 
    .SentOnBehalfOfName = "Fred.bloggs@fred_blogs.com" 
    .send 
End With 
```

电子邮件会说“我代表 Fred Bloggs”</p>

但我无法让它与日历约会一起使用。

我用'约会'、'会议请求'、sendonbehalfof'等词进行了高低搜索，看来你应该能够用'sendusingaccount'进行约会，但这似乎不起作用（它没有'不会失败，只是忽略指令并像以前一样从我自己的用户帐户发送）。
谁能告诉我该怎么做？. 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:52:18.080

您是否考虑过生成 Internet 日历约会 (ICA) 请求并通过电子邮件发送？我相信该格式包含您可以使用的委托信息。

[这是](http://msdn.microsoft.com/en-us/library/office/bb655909%28v=office.12%29.aspx)一些关于如何添加它的 Microsoft 文档的链接（在 ASP.Net 中，但这不重要），[这里是](http://www.ietf.org/rfc/rfc2445.txt)定义格式的 IETF RFC 的链接。

# javascript - d3 实现适用于 firefox/chrome，但不适用于 iPad

> ID：11696965
> 
> 赞同：1
> 
> 时间：2012-07-27T23:43:10.820
> 
> 标签：javascript, d3.js, cross-browser, circle-pack

所以我有一些源代码使用 d3.json 通过 HTTP 获取请求获取一些 json 并将其可视化......它在 chrome 和 firefox 上运行良好，但是当我尝试在 safari 或 chrome 的移动版本上运行它时，它打破了。在iOS safari上运行时，js遇到空"d"对象时发现空类型错误...

```
<em><!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="d3.v2.js"> 
</script>

<link rel="stylesheet" href="style.css" type="text/css">
<link rel="stylesheet" href="syntax.css" type="text/css">
<link rel="stylesheet" href="pack.css" type="text/css">

</head>

<body>

    <div id="chart"></div>
    <svg width="960" height="960" class="pack">
    <script type="text/javascript">

    setInterval(function(){
        var width = 960,
            height = 960,
            format = d3.format(",d");

        var pack = d3.layout.pack()
            .size([width - 4, height -4])
            .value(function(d) { return d.size; });

        var vis = d3.select("#chart").append("svg")
            .attr("width", width)
            .attr("height", height)
            .attr("class", "pack")
            .append("g")
            .attr("transform", "translate(2, 2)");

        d3.json("http://localhost:8080/cluster", function(json) {       

                //do visualization
                var node = vis.data([json]).selectAll("g.node")
                 .data(pack.nodes)
                 .enter().append("g")
                 .attr("class", function(d) {return d.children ? "node" : "leaf node" ;})
                 .attr("transform", function(d) {return "translate(" + d.x + "," + d.y +")"; });

                node.append("title")
                    .text(function(d) { return d.name + (d.children ? "" : ": " + format(d.size)); });

                node.append("circle")
                .attr("r", function(d) { return d.r; });

                node.filter(function(d) { return !d.children; }).append("text")
                .attr("text-anchor", "middle")
                .attr("dy", ".3em")
                .text(function(d) { return d.name.substring(0, d.r / 3); });

        }
);
                //log
    }, 1000);

        </script>
</body>
</html>

</em> 
```

这就是我使用码头设置服务器的方式......

```
public static void main(String[] args) {
    configureLogger();
    Server server = new Server(PORT);

    ResourceHandler resource_handler = new ResourceHandler();
    resource_handler.setDirectoriesListed(true);
    resource_handler.setWelcomeFiles(new String[]{ "index.html" });

    resource_handler.setResourceBase("src/resources");
    ServletHandler handler = new ServletHandler();
    handler.addServletWithMapping(VisServlet.class, "/cluster");

    HandlerList handlers = new HandlerList();
    handlers.setHandlers(new Handler[] { resource_handler, handler, new DefaultHandler() });
    server.setHandler(handlers);        

    try {
        server.start();
        log.info("Starting server on port " + PORT + "...");
        server.join();
    } catch (Exception ex){
        System.exit(-1);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:15:21.073

`<script>`您似乎在阻止脚本执行的标记之前有一行 HTML 。

```
<svg width="960" height="960" class="pack"> 
```

删除它，它应该可以工作（在 iOS 5.1 上测试）。

请注意，此`<svg>`标记缺少其`xmlns`命名空间 ( `http://www.w3.org/2000/svg`)，因此无论如何都会导致问题。

# bash - Node.js：如何将控制 C 发送到子进程

> ID：11696967
> 
> 赞同：2
> 
> 时间：2012-07-27T23:43:37.923
> 
> 标签：bash, node.js, terminal, control-characters

我正在使用 node.js + socket.io 编写一个类似 web 的 linux shell。像 ls、cd 这样的简单命令运行良好。但是当发出像 ping google.com 这样的命令时，stdout 会无休止地打印。我试图将 Ctrl +C 发送到标准输入，但没有运气。

1）产生“bash”进程

```
spawn = require('child_process').spawn;
var sh = spawn('bash'); 
```

2) 将 bash 标准输出发送到 socket.io

```
sh.stdout.on('data', function(data) {
   console.log('stdout' + data);
   listener.sockets.emit("stdout",new Buffer(data));
}); 
```

3) 将 Ctl C (\x03) 发送到 bash 的标准输入。var listener = io.listen(server);

```
listener.set('log level',1);
listener.sockets.on('connection', function(client){
   client.on('message', function(data){
      if(data === "KILL") {
         console.log('!!!!' + data);
         sh.stdin.write('\x03');
         client.broadcast.send(new Buffer("KILLING "));
         //return;
      };
      console.log(data);
      sh.stdin.write(data+"\n");
      client.broadcast.send(new Buffer("> "+data));
   });
}); 
```

我被困在这一点上。看起来像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:18:12.843

试试`process.kill(sh.pid)`。当我的主进程关闭时，我使用它来杀死集群中的工作人员。`sh.signalCode`应该等于`SIGTERM`。当然，我不知道这是否适用于 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-15T04:56:26.817

试试`stdout.push(null)`。我在节点 12 上尝试过。这不会杀死您的子进程，而是会告诉您输出流没有更多的输入流。

# javascript - r.js 成功完成进程但忽略了一些文件

> ID：11696983
> 
> 赞同：1
> 
> 时间：2012-07-27T23:47:06.047
> 
> 标签：javascript, requirejs, amd

我在我的实现中使用 requirejs 并且我使用 r.js 进行优化。我正在运行以下命令：

```
$ "C:\Program Files\nodejs\node.exe" r.js -o name="system/enduser" out="enduser-built.js" baseUrl=. paths.jquery=em
pty: paths.cookies=empty: paths.errorhandler=empty: paths.jgrowl=empty: paths.recaptcha=empty: paths.blockui=empty: 
```

运行良好，实际上生成了一个文件，其中包含来自不同文件的大量代码。但它以某种方式忽略了一些文件，例如我的文件如下所示：

```
paths: {
        // cdn
        jquery: '//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min',
        jqueryui: '//ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min',
        recaptcha: '//www.google.com/recaptcha/api/js/recaptcha_ajax',

        knockout: 'knockout-latest.debug',
        underscore: 'underscore',
        blockui: 'jquery.blockui',
        jgrowl: 'jquery.jgrowl',
        infuser: 'infuser-amd',
        trafficcop: 'trafficcop-amd',
        async: 'require/async',
        depend: 'require/depend',
        font: 'require/font',
        goog: 'require/goog',
        image: 'require/image',
        json: 'require/json',
        noext: 'require/noext',
        mdown: 'require/mdown',
        propertyParser: 'require/propertyParser',
        markdownConverter: 'require/Markdown.Converter',
        passwordReset:"System/passwordreset",
        //in-house        
        cookies: 'system/cookies',
        errorhandler: 'system/errorhandler'

    },
    priority: ['jquery']
});

require(["order!jquery",
        "order!jqueryui",
        "order!knockout",
        "order!knockout.mapping-latest.debug",
        'order!system/thankyou',
        "koExternalTemplateEngine",
        "system/account",
        "system/passwordReset",
        "system/share",
        "system/utils",
        "system/tos",
        "system/surveys",
        "system/models/survey_ko",
        'system/spinzone',
        'system/facebook',
        'system/dialogs',
        'system/countdown',
        'system/registration',
        'json2',
        'system/ajax',
        'domReady!'],
      function () {
      }); 
```

现在，如您所见，它需要 system/accounts 文件夹中的 Account.js，但未加载。它已经加载了几个文件，但我不确定忽略这些文件的原因是什么。有什么建议么？

# css - 将 div 居中在具有 background-size: cover 属性的 div 中

> ID：11696987
> 
> 赞同：0
> 
> 时间：2012-07-27T23:47:42.827
> 
> 标签：css, html, resize, center

我想在我的背景图像之上居中图像。

#home 是延伸到浏览器大小的背景图像
#hometitle 是我想要在顶部的图像

**我想将#hometitle 居中在我的#home 背景之上，因此无论浏览器的大小如何，它都会被隔开到背景图像的中心。**

我试过 margin: 0 auto; 然后 margin-top: 250px; 紧随其后，但这只会在 250 像素的整个背景图像上方产生一个白色间隙；

位置：绝对；和 top/left 并没有真正的帮助，因为当您调整浏览器大小时，位置将是静态的而不是居中。

```
#home {
height: 1000px;
margin: 0 auto;
-webkit-background-size: cover;
-moz-background-size: cover;
background-size: cover;
background-repeat: no-repeat;
background-position: center center;
background-image: url("images/bigheader.png");
}

#hometitle {
background-image:url(images/title.png);
height: 260px;
width: 435px;
} 
```

HTML：

```
<div id="home">
    <div id="hometitle">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:58:19.363

```
#hometitle {
    background-image:url(images/title.png);
    height: 260px;
    width: 435px;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -130px;
    margin-left: -217px;
} 
```

应该这样做，因为我们将主页标题图像绝对放置在浏览器渲染空间的中心。如果您对图像添加的位置有一些问题

```
body {position: relative;} 
```

这是将元素放置在我经常使用的中心的最简单和最好的技术之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:59:47.633

由于边距折叠，您不能使用相对于 向下`margin-top`移动，但您可以在其上添加顶部填充。`<div id="hometitle">``<div id="home">``<div id="home">`

# excel - 带有汉字的Excel VBA TextStream.writeline

> ID：11696988
> 
> 赞同：1
> 
> 时间：2012-07-27T23:47:43.023
> 
> 标签：excel, vba, filesystemobject

我对 VBA 相当陌生，并且对如何解决执行此代码时收到的“运行时错误'5'：无效的过程调用或参数”错误感到困惑。有问题的单元格有中文字符，代码似乎在英文字母上运行良好。流正在输出到文本文件。（将来应该是一个xml文件，但我仍然没有实现所有正确的格式）

```
Dim fso As New FileSystemObject, stream As TextStream    
Set stream = fso.createTextFile("C:\Users\username\XMLs\" _
   & WS_Src.Cells(c.Row, 5).Value & "_" & WS_Src.Cells(c.Row, 4).Value & "_Feature.xml", True) 
```

...

```
stream.WriteLine "<title>" & vbCrLf & "<![CDATA[ " & WS_Src.Cells(c.Row, 6).Value & "]]>" & vbCrLf   & "</title>" 'error is on this line
stream.Close 
```

谢谢！克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T03:13:35.343

使用`CreateTextFile`方法的语法类似于 `object.CreateTextFile(filename[, overwrite[, unicode]])` . 在哪里：

*   `filename`： 必需的。标识要创建的文件的字符串表达式。
*   `overwrite`选修的。指示是否可以覆盖现有文件的布尔值。如果文件可以被覆盖，则值为 True；如果它不能被覆盖，则为假。如果省略，则不会覆盖现有文件。
*   `unicode`选修的。指示文件是作为 Unicode 文件还是 ASCII 文件创建的布尔值。如果文件创建为 Unicode 文件，则值为 True；如果它是作为 ASCII 文件创建的，则为 False。如果省略，则假定为 ASCII 文件。

而且您在这里省略了最后一个参数，但是传入的文本，being`Chinese`不只是`ASCII`. 相反，您必须为此提供一个`True`值，我的意思是`unicode`参数。这肯定会解决问题。

顺便提一句！我仍然可以在代码中看到一些因素可能会导致其他运行时错误。

*   通过连接单元格值生成文件名时，请确保路径字符串中不存在无效字符，
*   此外，仅将`overwrite`值设置为`true`是不够的，还要确保该文件夹已经存在。否则，该过程将再次被运行时错误捕获。

希望这可以帮助。

# python - 将连续映射到连续的强化学习方法

> ID：11696990
> 
> 赞同：3
> 
> 时间：2012-07-27T23:47:53.997
> 
> 标签：python, machine-learning, reinforcement-learning, economics

我正在建立一个模型，公司必须设定价格并做出生产决策。价格是连续的，决策变量也是如此。（库存，上次销售，价格......）。

我可以使用什么强化学习方法将连续映射到连续？有哪些 python 包？如果没有 python 包，我可以编写一个包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:54:39.773

[PyBrain](http://pybrain.org/)机器学习库正是您要找的。这是神经网络的相当复杂的实现，但是当你理解它时，你会得到一个非常强大的工具。

PyBrain 是一个用于神经网络建模的 Python 库。[PyBrain 的概述](http://pybrain.org/)应该让您了解一个基本概念：在每个时间戳，您为神经网络提供一组连续值并取出另一组连续值。但更重要的是，您可以评估输出并训练您的神经网络。

所有这些步骤——包括网络训练——已经在 PyBrain 中实现。

# php - 使用脚本缓存图像

> ID：11696991
> 
> 赞同：6
> 
> 时间：2012-07-27T23:47:59.120
> 
> 标签：php, javascript, jquery, html, wordpress

我正在使用 TimThumb，这是一个用于调整图像大小的 PHP 脚本。

它缓存图像，我的 Web 应用程序依靠该缓存来正常运行。

当图片没有缓存在服务器上时，它就不能正常工作，我想知道有没有办法强制timthumb缓存一张图片，然后检索它，或者有没有办法使用JavaScript来确保图片首先被缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:55:12.413

为确保浏览器将图像预加载到缓存中，您可以使用一些原生 JavaScript 对象。

```
var imgPreload = new Image();
imgPreload.src = PATH_TO_IMAGE; 
```

现在，当您为`<img>`标签提供`src`与 相同的属性时`PATH_TO_IMAGE`，它已经被浏览器预加载了。

```
<img src="PATH_TO_IMAGE" width="100%" > 
```

* * *

您还可以将一些图像加载到您的 HTML 中，然后简单地使用一些 css 技巧来隐藏它们 -

*   `display:none`

    或者

*   `visibility:hidden`

然后仅在它们完全加载时显示它们。您可以使用该`.load()`功能。只需将它附加到`<img>`标签上 -

```
$("#imageSelector").load(function(){
  // image was fully loaded.
}); 
```

# sql - SQL：检索所有数据库中日期之间的记录

> ID：11696995
> 
> 赞同：3
> 
> 时间：2012-07-27T23:48:41.683
> 
> 标签：sql, sql-server, datetime

我想选择两个日期之间的表中的所有记录。我有一个像这样的查询：

`SELECT * FROM <table> WHERE (thedate BETWEEN DATE('2012-04-01') AND DATE('2012-06-30'))`

这对 HSQL、Oracle、PostgreSQL 来说很好，但由于缺少 Date 函数，它在 SQL Server 中不起作用。有没有办法让它对所有数据库（包括 SQL Server）普遍工作，还是我需要使用像 Hibernate 这样的 ORM（我知道我应该，但我特别问这是否可以在 SQL 中完成）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:33:00.023

据我所知，不需要 Date(...) 。这个例子似乎有效

```
DECLARE @TheDate Date = '2012-07-01';

SELECT 'hello' WHERE (@TheDate BETWEEN '2012-04-01' AND '2012-06-30')
--None returned
SET @TheDate = '2012-05-01'

SELECT 'hello' WHERE (@TheDate BETWEEN '2012-04-01' AND '2012-06-30')
--selects hello 
```

**顺便**说一句，值得用日期时间答案查看[这个问题](https://stackoverflow.com/questions/749615/does-ms-sql-servers-between-include-the-range-boundaries)（将在此处发布以节省精力）

between 语句可能导致日期范围边界问题

```
BETWEEN '01/01/2009' AND '01/31/2009' 
```

真的被解释为

```
BETWEEN '01/01/2009 00:00:00' AND '01/31/2009 00:00:00' 
```

所以会错过 1 月 31 日当天发生的任何事情。在这种情况下，您将不得不使用：

```
myDate >= '01/01/2009 00:00:00' AND myDate < '02/01/2009 00:00:00'  --CORRECT! 
```

或者

```
BETWEEN '01/01/2009 00:00:00' AND '01/31/2009 23:59:59' --WRONG! (see update!) 
```

更新：完全有可能在一天的最后一秒内创建记录，日期时间最晚为 01/01/2009 23:59:59.997！

因此，`BETWEEN (firstday) AND (lastday 23:59:59)`不建议使用该方法。

请改用该`myDate >= (firstday) AND myDate < (Lastday+1)`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:31:55.640

在 sql-server 我想你可能想看看

```
DATEADD ( datepart , number, date )
DATEDIFF ( datepart , startdate , enddate ) 
```

但我认为你正在寻找

```
CAST ( expression AS data_type ) 
```

或者

```
CONVERT ( data_type [ ( length ) ] , expression [ , style ] ) 
```

用法：

```
Select * from myTable where  thedateToCompare >= CONVERT ( datetime , "dd/mm/yy hh:mi:ss:mmmAM" ) and thedateToCompare <= CONVERT ( datetime , "dd/mm/yy hh:mi:ss:mmmAM" ) 
```

可能会改变您的方法的事情是天气您的源“thedate”列类型 datetime、smalldatetime 还是存储在定义为字符串的列中？

您可能想查看[一个链接](http://msdn.microsoft.com/en-us/library/aa226030%28v=sql.80%29)！有关可用于字符串变体的日期时间常量的更多详细信息。

# node.js - 无法从 Mongoose 访问 populate()'d 对象的属性？

> ID：11696996
> 
> 赞同：5
> 
> 时间：2012-07-27T23:49:00.573
> 
> 标签：node.js, mongodb, mongoose

这很奇怪......我正在使用带有 ref 的 populate() 来填充我的模式中的一个数组，但是这些属性是不可访问的。换句话说，架构是这样的：

```
new Model('User',{
    'name': String,
    'installations': [ {type: String, ref: 'Installations'} ],
    'count': Number,
} 
```

当然，Insallations 是另一种模式。

然后我找到并填充一组用户......

```
model.find({count: 0}).populate('installations').exec( function(e, d){
    for(var k in d)
    { 
        var user = d[k];
        for(var i in user.installations)
        {
            console.log(user.installations[i]);
        }
    }
} ); 
```

到目前为止，一切都很好！我看到打印出来的数据很好，如下所示：

```
{ runs: 49,
hardware: 'macbookpro10,1/x86_64',
mode: 'debug',
version: '0.1' } 
```

但是，如果我尝试实际访问这些属性中的任何一个，它们都是未定义的！例如，如果我添加另一个控制台日志：

```
console.log(user.installations[i].mode); 
```

然后我看到这个日志打印了“未定义”。如果我尝试对对象进行操作，如下所示：

```
 Object.keys(user.installations[i]).forEach(function(key) { } ); 
```

然后我得到一个典型的“[TypeError: Object.keys called on non-object]”错误，表明 user.installations[i] 不是对象（即使它被输出到控制台就好像它是一样）。所以，我什至尝试了一些丑陋的东西，比如......

```
var install = JSON.parse(JSON.stringify(user.installations[i]));
console.log(install, install.mode); 
```

而且，第一个输出（安装）是一个很好的对象，包含属性“模式”......但第二个输出是未定义的。

是什么赋予了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T07:07:35.753

最后，我解决了这个...

我试着做一个 console.log(typeof user.installations[i]); 并得到“字符串”作为输出。这看起来很奇怪，因为直接打印对象会创建看起来像普通对象而不是字符串的控制台输出（上图）。所以，我试着做一个 JSON.parse(); 在对象上，但收到错误“SyntaxError: Unexpected token r”

终于，我意识到发生了什么事。我上面描述的“漂亮的控制台输出”是用 \n （换行符）格式化的字符串的结果。无论出于何种原因，我都没有预料到这一点。JSON.parse() 错误是由于 node.js 解析器在尝试解析不带引号的对象键时存在已知的必要性；在这里看到 SO 问题： [为什么 JSON.parse('{"key" : "value"}') 做得很好但 JSON.parse('{key : "value"}') 没有？](https://stackoverflow.com/questions/7026985/why-does-json-parsekey-value-do-just-fine-but-json-parsekey-va).

具体来说，请注意，在我的例子中，JSON 解析器在字符 'r' 上失败，这是“runs”的第一个字符，这是我的 JSON 字符串（上图）中的第一个键。起初我担心我需要一个自定义的 JSON 解析器，但后来我遇到了问题。

回头看看我原来的架构。我使用字符串类型来定义安装引用，因为数组字段将安装的 _id 属性存储为字符串。我假设 .populate() 字段在输出时将对象转换为字符串。

最后，我仔细查看了 Mongoose 文档，并意识到我应该引用基于 Schema.ObjectID 的对象。这解释了一切，但肯定让我在我的模式和其他地方的代码中做一些修复......

# php - 将主模型扩展到不同目录中的子模型

> ID：11696998
> 
> 赞同：0
> 
> 时间：2012-07-27T23:49:16.703
> 
> 标签：php, codeigniter

我一直在这个网站上寻找答案，发现有几个人问过同样的问题，但我还没有找到一个真正说出正确解决方案的人。

我试图弄清楚如何让主模块保存某些变量值，以便我可以在其他模型中相应地访问它们。我在我的计算机上的本地服务器上运行，并且也在使用模块插件。我也在自动加载 master_model。

问题是我收到一条错误消息，指出无法从 users_model 中找到 master_model。

```
$autoload['model'] = array('msgboxes', 'metatags', 'genfunc', 'adverts', 'master_model');

<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

/**
* Master_model
*
* @author   Jeff Davidson
*/

class Master_model extends CI_Model 
{   
    function __construct()
    {
        parent::__construct();
    }

    var $users_table = 'users';
    var $user_profiles_table = 'user_profiles';
    var $user_login_sessions_table = 'user_login_sessions';
    var $user_statuses_table = 'user_statuses';
    var $user_roles_table = 'user_roles';

}

/* End of file master_model.php */
/* Location: ./application/models/master_model.php */

<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

/**
* Users
*
* This model represents user authentication data. It operates the following tables:
* - user account data,
* - user profiles
*
* @package  KOW Auth
* @author   Jeff Davidson
*/

class Users_model extends Master_model
{   
    function __construct()
    {
        parent::__construct();
    }

}

/* End of file users_model.php */
/* Location: ./application/modules/users/models/users_model.php */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:03:49.177

您需要将 放在`Master_model`目录中`application/core`并将以下代码添加到`application/config/config.php`文件中：

```
function __autoload($class)
{
    if(strpos($class, 'CI_') !== 0)
    {
        @include_once( APPPATH . 'core/'. $class . EXT );
    }
} 
```

[在这里](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)阅读更多。