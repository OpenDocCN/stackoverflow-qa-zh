# StackOverflow 问答 10227000-10227999

# asp.net - 无法从只读或禁用的文本框控件 asp.net 中获取值

> ID：10227003
> 
> 赞同：5
> 
> 时间：2012-04-19T11:25:32.860
> 
> 标签：asp.net, .net, null

我使用以下任一方法在 asp.net 中创建了一个不可编辑的控件

```
<asp:TextBox ID="txtStartDate" runat="server" enabled="false"></asp:TextBox>
or
<asp:TextBox ID="txtStartDate" runat="server" readonly="true"></asp:TextBox> 
```

我正在使用 javascript 弹出窗口来填充客户端的文本框。当我尝试在代码隐藏中检索它时，该值始终为空

谁能提出更好的方法

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T11:30:25.777

试试这个

```
<asp:TextBox ID="txtStartDate" runat="server"></asp:TextBox> 
```

代码背后

```
 txtStartDate.Attributes.Add("readonly", "readonly"); 
```

阅读更多关于[如何在后面的代码中检索只读文本框的值](http://www.mindfiresolutions.com/How-to-retrieve-readonly-textboxs-value-in-the-code-behind-924.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-22T01:13:07.933

`<asp:TextBox ID="txtStartDate" runat="server" readonly="true"></asp:TextBox>`

**你可以用这种方式**

`txtStartDate.Text = Request.Form[txtStartDate.UniqueID];`

# cmake - 如何检查 find_package 是否找到了包（增强）

> ID：10227005
> 
> 赞同：23
> 
> 时间：2012-04-19T11:25:36.660
> 
> 标签：cmake

如果 cmake find_package 发现没有安装 boost，我不想添加 boost.cxx。find_package 是否返回一些我可以包装在条件中以编译 boost.cxx 的东西。这是我当前的 cmake 文件：

```
add_executable (complex complex.cxx lexer.cxx boost.cxx ../../src/lili.cxx ../../src/lilu.cxx)

# Make sure the compiler can find all include files
include_directories (../../src) 
include_directories (.)

# Make sure the linker can find all needed libraries
# rt: clock_gettime()
target_link_libraries(complex rt)

# Install example application
install (TARGETS complex
         RUNTIME DESTINATION bin)

IF(UNIX)
    find_package(Boost COMPONENTS system filesystem REQUIRED)

    ## Compiler flags
    if(CMAKE_COMPILER_IS_GNUCXX)
        set(CMAKE_CXX_FLAGS "-O2")
        set(CMAKE_EXE_LINKER_FLAGS "-lsqlite3 -lrt -lpthread")
    endif()

    target_link_libraries(complex 
      ${Boost_FILESYSTEM_LIBRARY}
      ${Boost_SYSTEM_LIBRARY}
      #${PROTOBUF_LIBRARY}
    )
ENDIF(UNIX) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-19T11:49:41.687

如果找到包，`FindXXX`脚本应该设置一个变量。因此，在您的情况下，如果找到提升，它将设置。`<Packagename>_FOUND``TRUE``Boost_FOUND`

编译时`Boost.cxx`，我假设您也需要 Boost 标头，因此您也应该调整包含目录。*

在创建可执行文件之前寻找 Boost。此外，您需要在添加可执行文件之前设置包含目录。

```
IF(UNIX)
    find_package(Boost COMPONENTS system filesystem REQUIRED)
    # IF( Boost_FOUND ) # checking this variable isnt even necessary, since you added
                        # REQUIRED to your call to FIND_PACKAGE
        SET( BOOST_SRC_FILES boost.cxx )
        INCLUDE_DIRECTORIES( ${Boost_INCLUDE_DIRS} ) # you could move this down as well
                                                     # as ${Boost_INCLUDE_DIRS} will be
                                                     # empty if Boost was not found
    # ENDIF()
ENDIF()

add_executable (complex complex.cxx lexer.cxx ${BOOST_SRC_FILES} ../../src/lili.cxx ../../src/lilu.cxx)

# Make sure the compiler can find all include files
include_directories (../../src) 
include_directories (.)
# INCLUDE_DIRECTORIES( ${Boost_INCLUDE_DIRS} ) # alternative location to 
                                               # add include dirs, see above

# Make sure the linker can find all needed libraries
# rt: clock_gettime()
target_link_libraries(complex rt)

# Install example application
install (TARGETS complex
         RUNTIME DESTINATION bin)

IF(UNIX)

    ## Compiler flags
    if(CMAKE_COMPILER_IS_GNUCXX)
        set(CMAKE_CXX_FLAGS "-O2")
        set(CMAKE_EXE_LINKER_FLAGS "-lsqlite3 -lrt -lpthread")
    endif()

    target_link_libraries(complex 
      ${Boost_FILESYSTEM_LIBRARY}
      ${Boost_SYSTEM_LIBRARY}
      #${PROTOBUF_LIBRARY}
    )
ENDIF(UNIX) 
```

后注：由于您`REQUIRED`在查找 Boost 时使用了该标志（因为您只在 Unix 平台上需要它），因此使用*optional-source-files-in-a-variable*技巧就足够了。

`include_directories(...)`（*）感谢您的问题，我刚刚发现无论是在创建目标之前还是之后调用`ADD_EXECUTABLE`都无关紧要，`ADD_LIBRARY`因为目录已添加到同一项目中的所有目标中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T11:41:48.267

是的，如果`find_package(Boost COMPONENTS system filesystem REQUIRED)`成功，`Boost_FOUND`将是真的。

此外，还会有特定于组件的版本，所以`Boost_date_time_FOUND`，`Boost_filesystem_FOUND`等等。

有关更多信息，请运行

```
cmake --help-module FindBoost 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T11:38:08.050

是的，它设置了 variable `Boost_FOUND`。FindBoost.cmake 的示例：

```
 == Using actual libraries from within Boost: ==
#
#   set(Boost_USE_STATIC_LIBS        ON)
#   set(Boost_USE_MULTITHREADED      ON)
#   set(Boost_USE_STATIC_RUNTIME    OFF)
#   find_package( Boost 1.36.0 COMPONENTS date_time filesystem system ... )
#
#   if(Boost_FOUND)
#      include_directories(${Boost_INCLUDE_DIRS})
#      add_executable(foo foo.cc)
#      target_link_libraries(foo ${Boost_LIBRARIES})
#   endif() 
```

# javascript - JQuery 加 location.hash 无限刷新火狐

> ID：10227006
> 
> 赞同：2
> 
> 时间：2012-04-19T11:25:38.850
> 
> 标签：javascript, jquery, firefox

下面的这个脚本适用于 IE9 和 Chrome 18，但在 Firefox 11 上会导致无休止的刷新。

```
<script type="text/javascript">
$(document).ready(function () {
    if (window.location.href.indexOf('#') == -1) {
        window.location.hash = 'Value';
        //window.location.href += 'Value';
    }
});
</script> 
```

此致，

莱谢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:29:28.997

我猜想更改哈希会导致 document.ready 在 Firefox 上再次出现。脚本发现 href 中没有哈希符号，并再次对其进行更改。Presto，无限循环。我会使用这段代码

```
$(document).ready(function () {
    if (window.location.hash.length == 0) {
        window.location.hash = '#Value';
    }
}); 
```

# c# - “你确定吗？” 提示。ViewModel 的一部分还是纯粹的视图？

> ID：10227007
> 
> 赞同：39
> 
> 时间：2012-04-19T11:25:38.963
> 
> 标签：c#, wpf, mvvm

我一直在玩弄“你确定吗？”的位置。在我的 MVVM WPF 应用程序中键入提示。

我倾向于认为这些纯粹是视图的一部分。如果 ViewModel 公开 a `DeleteCommand`，那么我希望该命令立即删除。

要将此类提示集成到 ViewModel 中，它必须公开一个单独`RequestDeleteCommand`的`DeletePromptItem`属性，用于绑定提示，并且还可以兼作显示提示的触发器。

即使这样，也没有什么可以阻止直接调用单元测试`DeleteCommand`，除非我在 ViewModel 中放置特定逻辑以要求`DeletePromptItem`匹配作为参数提供的项目`DeleteCommand`。

然而，在我看来，这一切都只是 ViewModel 中的噪音。该提示更像是一个用户界面问题，以防止误点击等。对我来说，这表明它应该在视图中，并带有确认提示调用 DeleteCommand。

有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T11:32:52.380

*提示*绝对不应该是 ViewModel的一部分，但这并不一定意味着最好的解决方案是将它们硬编码在 View 中（尽管这是一种非常合理的第一种方法）。

我知道有两种选择可以减少 View 和 ViewModel 之间的耦合：使用交互服务和触发交互请求。[两者在这里](http://msdn.microsoft.com/en-us/library/gg405494%28v=pandp.40%29.aspx#sec10)都得到了很好的解释；你可能想看看。

总体思路是抽象异步交互是如何完成的，并使用更类似于基于事件的逻辑*的方式工作，同时允许 ViewModel 表达它希望与用户交互作为操作的一部分*；最终结果是您可以记录此交互并对其进行单元测试。

**编辑：**我应该补充一点，我已经探索过在原型项目中使用 Prism 4 与交互请求，我对结果*非常满意*（通过一些框架代码，您甚至可以完全指定特定交互请求会发生什么XAML！）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T11:27:59.707

> 然而，在我看来，这一切都只是 ViewModel 中的噪音。该提示更像是一个用户界面问题，以防止误点击等。对我来说，这表明它应该在视图中，并带有确认提示调用 DeleteCommand。

我同意; 像这样的提示应该在视图中处理，因为最终视图是用户正在查看和交互的内容，而不是视图模型。一旦你的视图从用户那里获得了`DeleteCommand`应该被调用的确认，然后继续在你的视图模型中调用它。

在我看来，单元测试实际上与用户交互没有任何关系，除非您正在测试视图本身。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T11:43:23.943

在我看来，提示用户包括两部分：

1.  确定是否应显示提示以及应如何处理结果的逻辑
2.  实际显示提示的代码

第 2 部分显然不属于 ViewModel。
但第 1 部分确实属于那里。

为了使这种分离成为可能，我使用了 ViewModel 可以使用的服务，并且我可以为此提供特定于我所处环境（WPF、Silverlight、WP7）的实现。

这导致如下代码：

```
interface IMessageBoxManager
{
    MessageBoxResult ShowMessageBox(string text, string title,
                                    MessageBoxButtons buttons);
}

class MyViewModel
{
    IMessageBoxManager _messageBoxManager;

    // ...

    public void Close()
    {
        if(HasUnsavedChanges)
        {
            var result = _messageBoxManager.ShowMessageBox(
                             "Unsaved changes, save them before close?", 
                             "Confirmation", MessageBoxButtons.YesNoCancel);
            if(result == MessageBoxResult.Yes)
                Save();
            else if(result == MessageBoxResult.Cancel)
                return; // <- Don't close window
            else if(result == MessageBoxResult.No)
                RevertUnsavedChanges();
        }

        TryClose(); // <- Infrastructure method from Caliburn Micro
    }
} 
```

* * *

这种方法不仅可以很容易地用于显示消息框，还可以用于显示其他窗口，如[本答案](https://stackoverflow.com/questions/10225015/how-to-open-a-new-window-using-wpf-respecting-good-practices/10225102#10225102)中所述。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T11:28:24.173

我建议通过管理模式窗口的服务来执行此操作。我很久以前也遇到过这个问题。[这篇](http://blog.roboblob.com/2010/01/19/modal-dialogs-with-mvvm-and-silverlight-4/)博文对我帮助很大。

即使它是一个 Silverlight 帖子，与 wpf 相比，它也不应该有太大差异。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T11:36:41.077

我认为这取决于提示，但一般来说，需要提示用户的代码逻辑通常在视图模型中，例如用户按下按钮删除列表项，在 VM 中触发命令，运行逻辑并且很明显这可能会影响另一个实体，然后用户必须选择他们想要做的事情，此时您应该无法要求视图提示用户，所以我看不到任何其他选择，只能处理它在虚拟机中。这是我一直感到不安的事情，但我只是在我的基础 VM 中编写了一个 Confirm 方法，该方法调用一个对话服务以 dsiplay 提示并返回 true 或 false：

```
 /// <summary>
    /// A method to ask a confirmation question.
    /// </summary>
    /// <param name="messageText">The text to you the user.</param>
    /// <param name="showAreYouSureText">Optional Parameter which determines whether to prefix the message 
    /// text with "Are you sure you want to {0}?".</param>
    /// <returns>True if the user selected "Yes", otherwise false.</returns>
    public Boolean Confirm(String messageText, Boolean? showAreYouSureText = false)
    {
        String message;
        if (showAreYouSureText.HasValue && showAreYouSureText.Value)
            message = String.Format(Resources.AreYouSureMessage, messageText);
        else
            message = messageText;

        return DialogService.ShowMessageBox(this, message, MessageBoxType.Question) == MessageBoxResult.Yes;
    } 
```

对我来说，这是我有时无法在 MVVM 中得到明确答案的灰色交叉领域之一，因此我对其他人的方法很感兴趣。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T11:39:03.870

看看这个：

[MVVM 和确认对话框](http://andrewtokeley.net/archive/2010/07/25/mvvm-and-confirmation-dialogs.aspx)

我在我的视图模型中使用了类似的技术，因为我相信它是视图模型的一部分，询问它是否会继续删除，而不是任何视觉对象或视图。使用所描述的技术，您的模型不会引用任何我不喜欢的视觉参考，而是引用某种调用确认对话框或消息框或其他任何东西的服务。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-19T12:15:43.087

我过去处理它的方式是在需要显示对话框时触发的 ViewModel 中放置一个事件。View 挂钩事件并处理显示确认对话框，并通过其 EventArgs 将结果返回给调用者。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-19T12:35:48.193

我想“你确定吗？” 提示属于视图模型，因为它的**应用程序逻辑**而不是纯 ui 的东西，如动画等。

所以最好的选择是在 deletecommand 执行方法中调用“你确定”[服务对话框](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)。

编辑：视图模型代码

```
 IMessageBox _dialogService;//come to the viewmodel with DI

    public ICommand DeleteCommand
    {
        get
        {
            return this._cmdDelete ?? (this._cmdDelete = new DelegateCommand(this.DeleteCommandExecute, this.CanDeleteCommandExecute));
        }
    } 
```

将逻辑放在execute方法中

```
 private void DeleteCommandExecute()
    {
      if (!this.CanDeleteCommandExecute())
         return;

        var result = this.dialogService.ShowDialog("Are you sure prompt window?", YesNo);

        //check result
        //go on with delete when yes
     } 
```

对话服务可以是您想要的任何东西，但删除前要检查的应用程序逻辑在您的视图模型中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-19T11:28:26.517

就个人而言，我认为这只是视图的一部分，因为没有数据

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-19T11:33:32.170

`EventAggregator`我通过使用模式解决了这类问题。

[你可以在这里](http://www.wintellect.com/CS/blogs/jlikness/archive/2009/09/29/decoupled-childwindow-dialogs-with-prism-in-silverlight-3.aspx)看到它的解释

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-19T16:52:12.260

在将旧的 WinForms 应用程序移植到 WPF 时遇到了这个问题。我认为要记住的重要一点是，WPF 通过在视图模型和带有事件的视图（即，等）之间发出信号来完成它在后台所做的很多`INotifyPropertyChanged.PropertyChanged`事情`INotifyDataErrorInfo.ErrorsChanged`。我对这个问题的解决方案是拿那个例子并用它来运行。在我的视图模型中：

```
/// <summary>
/// Occurs before the record is deleted
/// </summary>
public event CancelEventHandler DeletingRecord;

/// <summary>
/// Occurs before record changes are discarded (i.e. by a New or Close operation)
/// </summary>
public event DiscardingChangesEvent DiscardingChanges; 
```

然后视图可以侦听这些事件，如果需要提示用户，如果指示这样做，则取消事件。

请注意，这`CancelEventHandler`是由框架为您定义的。但是，对于`DiscardingChanges`，您需要一个三态结果来指示您希望如何处理操作（即保存更改、放弃更改或取消您正在执行的操作）。为此，我自己做了一个：

```
public delegate void DiscardingChangesEvent(object sender, DiscardingChangesEventArgs e);

public class DiscardingChangesEventArgs
    {
        public DiscardingChangesOperation Operation { get; set; } = DiscardingChangesOperation.Cancel;
    }

public enum DiscardingChangesOperation
    {
        Save,
        Discard,
        Cancel
    } 
```

我试图想出一个更好的命名约定，但这是我能想到的最好的。

所以，把它付诸实践看起来像这样：

ViewModel（这实际上是我基于 CRUD 的视图模型的基类）：

```
protected virtual void New()
{
    // handle case when model is dirty
    if (ModelIsDirty)
    {
        var args = new DiscardingChangesEventArgs();    // defaults to cancel, so someone will need to handle the event to signal discard/save
        DiscardingChanges?.Invoke(this, args);
        switch (args.Operation)
        {
            case DiscardingChangesOperation.Save:
                if (!SaveInternal()) 
                    return;
                break;
            case DiscardingChangesOperation.Cancel:
                return;
        }
    }

    // continue with New operation
}

protected virtual void Delete()
{
    var args = new CancelEventArgs();
    DeletingRecord?.Invoke(this, args);
    if (args.Cancel)
        return;

    // continue delete operation
} 
```

看法：

```
<UserControl.DataContext>
    <vm:CompanyViewModel DeletingRecord="CompanyViewModel_DeletingRecord" DiscardingChanges="CompanyViewModel_DiscardingChanges"></vm:CompanyViewModel>
</UserControl.DataContext> 
```

查看代码隐藏：

```
private void CompanyViewModel_DeletingRecord(object sender, System.ComponentModel.CancelEventArgs e)
{
    App.HandleRecordDeleting(sender, e);
}

private void CompanyViewModel_DiscardingChanges(object sender, DiscardingChangesEventArgs e)
{
    App.HandleDiscardingChanges(sender, e);
} 
```

还有几个静态方法，它们是每个视图都可以使用的 App 类的一部分：

```
public static void HandleDiscardingChanges(object sender, DiscardingChangesEventArgs e)
{
    switch (MessageBox.Show("Save changes?", "Save", MessageBoxButton.YesNoCancel))
    {
        case MessageBoxResult.Yes:
            e.Operation = DiscardingChangesOperation.Save;
            break;
        case MessageBoxResult.No:
            e.Operation = DiscardingChangesOperation.Discard;
            break;
        case MessageBoxResult.Cancel:
            e.Operation = DiscardingChangesOperation.Cancel;
            break;
        default:
            throw new InvalidEnumArgumentException("Invalid MessageBoxResult returned from MessageBox.Show");
    }
}

public static void HandleRecordDeleting(object sender, CancelEventArgs e)
{
    e.Cancel = MessageBox.Show("Delete current record?", "Delete", MessageBoxButton.YesNo) == MessageBoxResult.No;
} 
```

将对话框集中在这些静态方法中可以让我们稍后轻松地将它们换成自定义对话框。

# git - gitolite 允许未经授权的用户

> ID：10227009
> 
> 赞同：2
> 
> 时间：2012-04-19T11:26:08.293
> 
> 标签：git, gitolite

我已经配置了一个存储库和一组用户。
我已将对该存储库的读取权限授予该组。

但是，当我以组中不存在的用户身份登录时，我能够读取存储库。
它在 gitweb 中列出了该存储库。为什么会这样？

```
@all    = ganeshkumar hariharasubramanian karthigayan kiruthika kuppusamy lakshmanan manojkumar nvivek sathishkumar savithri thangappan thillaiselvan vennila
repo    gitolite-admin
        RW+     =   thillaiselvan

repo    test/thillaiselvan
        RW+     =   thillaiselvan
        R       =   @all

repo    others/admin_testing
                RW+             =   root nagalenoj thillaiselvan 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:47:53.397

`@all`不是有效组的名称。

它是一个特殊的组，允许*任何*用户访问 repo（`gitweb`顺便说一下，包括特殊用户）。
请参阅 Gitolite V3（或“g3”）文档（对 Gitolite V2 仍然有效）：
“[组定义](http://sitaramc.github.com/gitolite/groups.html)”

> ### 特殊群体`@all`
> 
> `@all`是一个特殊的组名，如果您真正的意思是“所有 repos”或“所有用户”，通常使用起来很方便。

换句话说，这不是您要定义的组

```
@all    = user1 user2 ... 
```

它会被忽略。将@all 添加到 repo 意味着任何用户，即使是上述定义中未列出的用户，都被授予访问该 repo 的权限。

# ios5 - 隐藏导航栏时按钮移位/扭曲（旋转后）

> ID：10227012
> 
> 赞同：1
> 
> 时间：2012-04-19T11:26:27.010
> 
> 标签：ios5, rotation, uinavigationbar, quartz-core

我的应用程序有两个与 NavigationController 链接的 ViewController。第一个 NavigationController 有一个带有按钮的视图和一个带有标签的视图。这个视图是一个圆形的旋转菜单，它代表我的主页。视图可以通过 touchesMoved: 上的 CGAffineTransformMakeRotation - QuartzCore （显然它导致问题）旋转。

我只想在这个视图中隐藏 NavigationBar，所以我在 ViewWillAppear 上使用*了*setNavigationBarHidden *:YES*。然后在*ViewWillDisappear*上显示栏。

 **在模拟器上，一切都按预期工作，直到我旋转第一个 ViewController，当我旋转然后单击任何按钮（转到第二个 ViewController）然后单击返回（返回到我的第一个 ViewController），一切都将被[扭曲](https://picasaweb.google.com/lh/photo/FGyplq_SAz0rG1eEKlH8CNMTjNZETYmyPJy0liipFm0?feat=directlink)！。

1.  我试图通过添加*[self.view setBounds:[[UIScreen mainScreen]bounds]];来解决这个问题。**[self.view setFrame:[[UIScreen mainScreen]bounds]];* 在*ViewDidLoad*方法或*ViweWillAppear*中，问题仍然存在。
2.  我尝试在 ViewWillAppear 中将 NavigationBar alpha 设置为 0，并在*ViewWillDisappear 上将*其设置为 1，然后我尝试了*self.navigationController.navigationBar.translucent* = YES 两个选项都没有解决问题。
3.  我尝试在*ViewWillAppear*中以编程方式设置视图、按钮和标签位置，但并没有解决问题。
4.  我怀疑动画，所以我删除了它，但它对问题没有任何影响。

作为初学者，我无法解决这个问题，请帮助！

**ViewController.h**（第一个 ViewController）

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface ViewController : UIViewController

@property (nonatomic, strong) IBOutlet UIView *aView;
@property (nonatomic, strong) IBOutlet UIView *bView;

@property (nonatomic, strong) IBOutlet UIButton *bimg1;
…
@property (strong, nonatomic) IBOutlet UILabel *label1;
…
-(void) rotateTo:(CGFloat)x andY:(CGFloat)y;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@implementation ViewController
@synthesize aView = _aView;
…
@synthesize bimg1 = _bimg1;
…
@synthesize label1 = _label1;
…

static inline double toradians (double degrees) {
return degrees * M_PI/180;
}

-(void)viewDidLoad {
    ![enter image description here][1][super viewDidLoad];
    //Set text font
    [_label1 setFont:[UIFont fontWithName:@"Consolas" size:16]];
…
    [self.view setBounds:[[UIScreen mainScreen]bounds]];
    [self.view setFrame:[[UIScreen mainScreen]bounds]];
}

-(void)viewWillAppear:(BOOL)animated {
    self.navigationController.navigationBar.hidden = YES;
    printf("Aview x: %f     | Aview y: %f \n",self.aView.frame.origin.x, self.aView.frame.origin.y);
    printf("Aview width: %f | Aview height: %f \n",self.aView.frame.size.width,    self.aView.frame.size.height);
}

-(void)viewWillDisappear:(BOOL)animated {
    self.navigationController.navigationBar.hidden = NO;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint LastTouchPoint = [touch locationInView:self.view];
    CGFloat LasTouchx = LastTouchPoint.x;
    CGFloat LasTouchy = LastTouchPoint.y;

    CGPoint CenterPoint = self.view.center;
    CGFloat x = LasTouchx - CenterPoint.x;
    [self rotateTo:x andY:y];
}

-(void) rotateTo:(CGFloat)x andY:(CGFloat)y {
    CGFloat angle = x/y;
    angle = atan(angle);
    angle = angle * 360/M_PI;
    angle *= 0.0174532925;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
    [UIView setAnimationDuration:1];
    self.aView.transform=CGAffineTransformMakeRotation(-angle); 
    self.bView.transform=CGAffineTransformMakeRotation(-angle); 

    self.bimg1.transform=CGAffineTransformMakeRotation(angle);
    self.bimg2.transform=CGAffineTransformMakeRotation(angle);
    self.bimg3.transform=CGAffineTransformMakeRotation(angle);
    self.bimg4.transform=CGAffineTransformMakeRotation(angle);

    self.label1.transform=CGAffineTransformMakeRotation(angle);
    self.label2.transform=CGAffineTransformMakeRotation(angle);
    self.label3.transform=CGAffineTransformMakeRotation(angle);
    self.label4.transform=CGAffineTransformMakeRotation(angle);
    [UIView commitAnimations];
}

- (void)viewDidUnload
{
    [self setBimg1:nil];
    … 
    [self setAView:nil];
    [self setBView:nil];
    [super viewDidUnload];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:14:36.687

是的，我发现了问题......当 NavigationController 是否隐藏时，主视图的自动调整大小正在挤压我的子视图。所以我添加了 self.view.autoresizesSubviews = NO; 到 ViewDidLoad，问题就解决了。**

# wpf - 文本框文本修剪

> ID：10227014
> 
> 赞同：24
> 
> 时间：2012-04-19T11:26:32.627
> 
> 标签：wpf, xaml

我想在(Not a )`TextTrimming`上应用一个选项。**`TextBox`**`TextBlock`

编译器告诉我`TextTrimming`选项不是`Textbox`.

我可以做一个花哨的控件，它是 a `Textblock`，一旦单击它就会变成 a ，反之，一旦失去焦点，它就会变`Textbox`回 a 。`Textblock`

在采用这种方式之前，我想知道是否已经存在内置功能（或者是否有更智能的方法）来允许您这样做？

编辑：我最终想要的`TextBox`是修剪（完整内容将显示在工具提示中）但是当用户选择`TextBox`（进入“编辑模式”）时，将显示完整内容（不修剪）因此，用户将能够修改全文。当`TextBox`失去焦点时（返回“查看模式”），内容将再次被修剪。

谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-19T12:47:17.453

尝试这样的样式（我添加了背景颜色以使更改明显）：

```
 <Style TargetType="TextBox">
      <Setter Property="Background" Value="Yellow" />
      <Style.Triggers>
        <DataTrigger Binding="{Binding IsKeyboardFocused, RelativeSource={RelativeSource Self}}" Value="false">
          <Setter Property="Template">
            <Setter.Value>
              <ControlTemplate TargetType="TextBox">
                <TextBlock Text="{TemplateBinding Text}"  TextTrimming="CharacterEllipsis" Background="Red" />
              </ControlTemplate>
            </Setter.Value>
          </Setter>
        </DataTrigger>
      </Style.Triggers>
    </Style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-06T16:33:22.433

[Dan Puzey 有一个很好的答案](https://stackoverflow.com/a/10228419/975724)，但我想添加更多以使样式`TextBlock` *看起来像*一个`TextBox`。

这是我想出的 XAML 样式：

```
<Style TargetType="TextBox">
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsKeyboardFocused, RelativeSource={RelativeSource Self}}" Value="False">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border BorderThickness="1" CornerRadius="1">
                            <Border.BorderBrush>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#FFABADB3" Offset="0"/>
                                    <GradientStop Color="#FFABADB3" Offset="0.044"/>
                                    <GradientStop Color="#FFE2E3EA" Offset="0.060"/>
                                    <GradientStop Color="#FFE3E9EF" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <TextBlock Padding="4,2,0,0" Text="{TemplateBinding Text}" TextTrimming="CharacterEllipsis"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

这是控件在没有键盘焦点时的样子：

[![TextBlock - 没有键盘焦点](../Images/ed551f535e79f02df858b17703768471.png)](https://i.stack.imgur.com/cDcq6.png)

这是获得键盘焦点后控件的样子：

[![文本框 - 带键盘焦点](../Images/4a056d81e6aee8e4c7a69b12de663ec8.png)](https://i.stack.imgur.com/BNpUh.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:51:35.313

我想你要找的是这个

```
<TextBox Text="{Binding Path=String, Converter={StaticResource StringConverter}, ConverterParameter=Trim:Argument:AnotherArgument}" /> 
```

我希望它有帮助:)

如果需要，它将调用修剪函数并传递任何参数。您还可以使用 split 并将分隔符作为参数传递。

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)找到有关 Binding.Converter 的更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-15T08:48:38.270

[![在此处输入图像描述](../Images/3de8ce2a7b3ba7de35ff5c95a5b8641c.png)](https://i.stack.imgur.com/lE2Zr.png)

[![在此处输入图像描述](../Images/a3f11aad3b0f71d51ca46dd8c044fc34.png)](https://i.stack.imgur.com/8sJpw.png)

我会使用不同的控件模板：当文本框没有聚焦时带有修剪的模板，而文本框聚焦我会使用常规模板来允许文本选择。需要替换 TextBox 控件模板。

```
 <ControlTemplate TargetType="{x:Type TextBox}"
                 x:Key="ControlTemplateTextBoxNormal">
    <Border Background="{TemplateBinding Background}"
            BorderThickness="{TemplateBinding BorderThickness}"
            BorderBrush="{TemplateBinding BorderBrush}">
        <Grid>
            <Border x:Name="ErrorElement"
                    Visibility="Collapsed"
                    BorderThickness="1.25"
                    BorderBrush="{StaticResource BrushError}">
                <Grid>
                    <Polygon x:Name="toolTipCorner"
                             Panel.ZIndex="2"
                             Margin="-1"
                             Points="9,9 9,0 0,0"
                             Fill="{StaticResource BrushError}"
                             HorizontalAlignment="Right"
                             VerticalAlignment="Top">
                        <Polygon.ToolTip>
                            <ToolTip Style="{StaticResource ToolTipStyleError}"
                                     Content="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Polygon.ToolTip>
                    </Polygon>
                </Grid>
            </Border>
            <ScrollViewer x:Name="PART_ContentHost"
                          Padding="{TemplateBinding Padding}"
                          BorderThickness="0"
                          IsTabStop="False"
                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                          TextElement.Foreground="{TemplateBinding Foreground}" />
            <TextBlock Text="{Binding Path=(behaviors:TextBoxBehaviors.WatermarkText), RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type TextBox}}}"
                       IsHitTestVisible="False"
                       Visibility="Collapsed"
                       HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                       VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                       Margin="{TemplateBinding Padding}"
                       Foreground="Gray"
                       x:Name="watermark" />
        </Grid>
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="IsFocused"
                 Value="False">
            <Setter Property="Visibility"
                    TargetName="watermark"
                    Value="Visible" />
        </Trigger>
        <Trigger Property="Validation.HasError"
                 Value="True">
            <Setter Property="Visibility"
                    TargetName="ErrorElement"
                    Value="Visible" />
        </Trigger>
        <!--<Trigger Property="behaviors:TextBoxBehaviors.WatermarkText"
                             Value="True">
                        <Setter Property="Visibility"
                                TargetName="ErrorElement"
                                Value="Visible" />
                    </Trigger>-->

    </ControlTemplate.Triggers>
</ControlTemplate>
 <Style TargetType="{x:Type TextBox}"
       BasedOn="{StaticResource {x:Type TextBox}}"
       x:Key="TextBoxStyleTrimming">
    <Setter Property="BorderThickness"
            Value="1" />
    <Setter Property="Validation.ErrorTemplate"
            Value="{x:Null}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBox}">
                <Border Background="{TemplateBinding Background}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        BorderBrush="{TemplateBinding BorderBrush}">
                    <Grid>
                        <Border x:Name="ErrorElement"
                                Visibility="Collapsed"
                                BorderThickness="1.25"
                                BorderBrush="{StaticResource BrushError}">
                            <Grid>
                                <Polygon x:Name="toolTipCorner"
                                         Panel.ZIndex="2"
                                         Margin="-1"
                                         Points="9,9 9,0 0,0"
                                         Fill="{StaticResource BrushError}"
                                         HorizontalAlignment="Right"
                                         VerticalAlignment="Top">
                                    <Polygon.ToolTip>
                                        <ToolTip Style="{StaticResource ToolTipStyleError}"
                                                 Content="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource TemplatedParent}}" />
                                    </Polygon.ToolTip>
                                </Polygon>
                            </Grid>
                        </Border>
                        <TextBlock Padding="{TemplateBinding Padding}"
                                   Text="{TemplateBinding Text}"
                                   TextTrimming="CharacterEllipsis"
                                   HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                   TextElement.Foreground="{TemplateBinding Foreground}" />
                        <TextBlock Text="{Binding Path=(behaviors:TextBoxBehaviors.WatermarkText), RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type TextBox}}}"
                                   IsHitTestVisible="False"
                                   Visibility="Collapsed"
                                   HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                   Margin="{TemplateBinding Padding}"
                                   Foreground="Gray"
                                   x:Name="watermark" />
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsFocused"
                             Value="False">
                        <Setter Property="Visibility"
                                TargetName="watermark"
                                Value="Visible" />
                    </Trigger>
                    <Trigger Property="Validation.HasError"
                             Value="True">
                        <Setter Property="Visibility"
                                TargetName="ErrorElement"
                                Value="Visible" />
                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsKeyboardFocused"
                 Value="True">
            <Setter Property="Template"
                    Value="{StaticResource ControlTemplateTextBoxNormal}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T12:29:57.213

您可以为您创建一个控件模板，`TextBox`在聚焦时显示通常的编辑器，在`TextBlock`没有聚焦时显示修剪。

# android - 带有没有常规按钮形状的图像的按钮：Android

> ID：10227015
> 
> 赞同：1
> 
> 时间：2012-04-19T11:26:35.203
> 
> 标签：android, uibutton, imagebutton

我有一张我想用作按钮的图像。但我只希望图像作为按钮可见，具有图像的形状（我不想要图像周围的常规按钮，也不想要常规按钮形状）。我怎样才能做到这一点？我可以在不设计自定义按钮的情况下实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:29:48.977

检查[android 开发人员参考](http://developer.android.com/reference/android/widget/ImageButton.html)和[教程自定义按钮](http://developer.android.com/resources/tutorials/views/hello-formstuff.html#CustomButton)。这正是您所需要的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:28:05.147

使用 button.setBackgroundDrawable（或 Resource 等）设置图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:34:11.733

使用 ImageButton 并将背景属性设置为某种颜色，即 #000 并且没有填充

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:36:44.010

```
<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" android:background="@drawable/ic_launcher"/> 
```

# c# - 从后台工作人员访问 ListView

> ID：10227017
> 
> 赞同：0
> 
> 时间：2012-04-19T11:26:52.350
> 
> 标签：c#

嗨，有一个名为 Dlist 的主表单中的 ListView，我有一个后台工作人员来下载文件，在后台工作人员中，我如何在主表单列表视图中编辑子项“进度”？

我的代码：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (obj, e) => WorkerDoWork(link, savepath,Dlist);
worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(progress_complete);
worker.ProgressChanged += new ProgressChangedEventHandler(progress_changed);
worker.RunWorkerAsync();

rivate void WorkerDoWork(string link, string savepath, ListView Dlist)
    {
        // Start Download
        Uri url = new Uri(link);
        System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(url);
        System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
        response.Close();
        Int64 iSize = response.ContentLength;
        Int64 iRunningByteTotal = 0;
        using (System.Net.WebClient client = new System.Net.WebClient())
        {
            using (System.IO.Stream streamRemote = client.OpenRead(new Uri(link)))
            {
                using (Stream streamLocal = new FileStream(savepath, FileMode.Create, FileAccess.Write, FileShare.None))
                {
                    int iByteSize = 0;
                    byte[] byteBuffer = new byte[256];
                    while ((iByteSize = streamRemote.Read(byteBuffer, 0, byteBuffer.Length)) > 0)
                    {
                        streamLocal.Write(byteBuffer, 0, iByteSize);
                        iRunningByteTotal += iByteSize;
                        double dIndex = (double)(iRunningByteTotal);
                        double dTotal = (double)byteBuffer.Length;
                        double dProgressPercentage = (dIndex / dTotal);
                        int iProgressPercentage = (int)(dProgressPercentage * 100);
                        //Dlist.Items[Dlist.Items.IndexOfKey(fileName)].SubItems[2].Text = iProgressPercentage.ToString();
                    }
                    streamLocal.Close();
                }
                streamRemote.Close();
            }
        }
    } 
```

这一行 (//Dlist.Items[Dlist.Items.IndexOfKey(fileName)].SubItems[2].Text = iProgressPercentage.ToString();) 是为了更新列表视图，但我一直在跨线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:42:07.563

我不必担心必须使用委托并从 Do_Work 方法调用它，而是将[BackgroundWorker.WorkerReportsProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workerreportsprogress.aspx)设置为 true 并订阅[BackgroundWorker.ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件。处理该事件将在 UI 线程上发生，您可以通过从参数中提取进度并从那里更新您的 ListView 来使用报告的进度（从 Do_Work 方法调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:40:27.050

为什么不使用 BackgroundWorker.ReportProgress 方法（参见示例部分）？

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:35:59.237

因为 backgroundworker 确实是一个不同的线程，与 UI 线程分开，您需要检查该用户控件是否需要调用。下面是我使用 listView1 作为 Dlist 的一些源代码。

```
 delegate void SetListViewItemCallBack(ListViewItem Item);
    private void AddListViewItem(ListViewItem Item)
    {
        if (this.listView1.InvokeRequired)
        {
            SetListViewItemCallBack d = new SetListViewItemCallBack(AddListViewItem);
            this.Invoke(d, new object[] { Item });
        }
        else
        {
            this.listView1.Items.Add(Item);
        }
    }
    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        DataSet dsInfo = // whatever you want..
        for (int i = 0; i < dsInfo.Tables[0].Rows.Count; i++)
        {
            ListViewItem li = new ListViewItem();
            li.Text = dsInfo.Tables[0].Rows[i]["AXT_Tag"].ToString();
            li.Tag = dsInfo.Tables[0].Rows[i]["AXT_ID"].ToString();
            AddListViewItem(li);
        }
    } 
```

# sql - sql server 中的标识列在技术上是如何工作的？

> ID：10227018
> 
> 赞同：3
> 
> 时间：2012-04-19T11:27:01.877
> 
> 标签：sql, sql-server

在我寻找一种创建唯一增量数字系列的方法时。我考虑了身份列。我不能将它用于我的目的，但它导致了我当前的问题；

**身份在技术上如何在 Sql server 中工作？**

我不是在寻找如何使用它的答案，我知道它会增加每个插入的数字，在删除时留下空白。但我找不到任何文档它是如何生成它的号码的。这是sql server中的表吗？它使用行锁吗？还是其他类型的锁？是锁定吗？它如何防止重复数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:32:54.060

在这些问题/文章中有一些关于内部的有用信息：

[https://dba.stackexchange.com/questions/1635/why-are-denali-sequences-supposed-to-perform-b​​etter-than-identity-columns](https://dba.stackexchange.com/questions/1635/why-are-denali-sequences-supposed-to-perform-better-than-identity-columns)

[http://www.sqlmag.com/article/sql-server/Sequences-Part-2-129205](http://www.sqlmag.com/article/sql-server/Sequences-Part-2-129205)

他们谈论的是 SQL 2012 中引入的 SEQUENCE，但包括一些关于 IDENTITY、差异和实现的信息。不确定这是否完全回答，但恕我直言值得一读。

# javascript - Scorm 活动 - 返回访问的最后一页在 Firefox 中不起作用 - Javascript 问题？

> ID：10227021
> 
> 赞同：1
> 
> 时间：2012-04-19T11:27:34.403
> 
> 标签：javascript, firefox, moodle, scorm, scorm1.2

我使用 Moodle 作为一个平台来保存 SCORM 包。在其中一个包中，我们有一个功能，如果用户退出活动并重新进入，他们将返回到他们上次打开的屏幕。但是，当我单击“确定”以提示您是否要从上次中断的地方继续时，Firefox 会返回一个空白屏幕。

我打开 Firefox Web 控制台，发现两个 javascript 错误：

```
x Scriptloaded is not defined
x map is null 
```

映射为空错误指向这段代码：

```
window.onload = function() { map.PageLoaded(); } 
```

**有谁熟悉这个问题？**它只发生在 Firefox 中。

# objective-c - 如何向 UITableViewCell 的 contentView 添加多个项目

> ID：10227025
> 
> 赞同：0
> 
> 时间：2012-04-19T11:27:58.770
> 
> 标签：objective-c, uitableview

我有一个相当复杂的 UITableViewCell 并且在生产代码中我可以使用以下内容提取选定的 UILabel

```
[[[[[[cell subviews] objectAtIndex:1] subviews] objectAtIndex:0] subviews] objectAtIndex:4]; 
```

一切正常 - 我遇到的问题是当我尝试创建一个简单的单元测试来显示预期如何工作时。

由于某种原因，我无法构建一个在单元格的 contentView 属性中有 2 个项目的场景

所以我可以很容易地得到 [[cell subviews] objectAtIndex:0] 但从来没有 1

在我的测试助手中，我正在执行以下操作来模拟这个（没有运气）

```
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
UIView *view1 = [[UIView alloc] init];
UILabel *label1 = [[UILabel alloc] init];
UIView *view2 = [[UIView alloc] init];
UILabel *label2 = [[UILabel alloc] init];

[view1 addSubview:label1];
[cell.contentView addSubview:view1];

[view2 addSubview:label1];
[view2 addSubview:label2];
[cell.contentView addSubview:view2];

NSLog(@"inside ...%@", [[cell subviews] objectAtIndex:1]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:28:12.863

您不能将 label1 添加到 view1 AND view2，您必须创建两个不同的标签。一个视图只能有一个超级视图，因此当您说`[view2 addSubview:label1];`label1 从 view1 中删除时。

# math - 分割区间

> ID：10227031
> 
> 赞同：0
> 
> 时间：2012-04-19T11:28:09.887
> 
> 标签：math, set, intervals

好的，我需要将一个间隔分成 n 个不相等的子间隔，其间隔长度按递增顺序排列。

假设我有一个区间 (10,90)

我需要 n 个子间隔。假设n = 4

需要子区间如 (10,20), (20,35), (35,55), (55,90)

子区间长度必须按递增顺序

我该怎么做呢？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:17:47.100

您可以使用任何单调递增和凸函数来构建区间。例如，二次函数给了我们这样的表达式：

DividingValue[i=1..n-1] = A + Round(i^2 * (BA)/(n^2))

其中 (A, B) 是您的区间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:30:02.797

例如，您可以选择长度为 1、2、3、...的区间。因此，在拆分 [10, 90] 的示例中，您将拥有`[[10], [11,12], [13,14,15], [16..90]]`.

# c# - 枚举时修改了集合

> ID：10227037
> 
> 赞同：1
> 
> 时间：2012-04-19T11:28:30.993
> 
> 标签：c#, list, thread-safety, action

> **可能重复：**
> [集合已修改；枚举操作可能无法执行](https://stackoverflow.com/questions/604831/collection-was-modified-enumeration-operation-may-not-execute)

我有一个通用列表，我在枚举时执行一些操作。

```
foreach(Action<string> action in actionList) 
{
    if(action != null) {
        action(mystring);
    }
} 
```

现在我得到了这个例外：

```
InvalidOperationException:
Collection was modified; enumeration operation may not execute 
```

如何解决这个问题，我被 .NET 3.5 钉牢了：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:30:33.287

好吧，大概其中一个动作修改了`actionList`，使迭代器无效。避免错误的最简单方法是首先获取列表的副本，例如

```
foreach(Action<string> action in actionList.ToList()) 
{
    if(action != null) {
        action(mystring);                               
    }
} 
```

甚至：

```
foreach (var action in actionList.Where(action => action != null).ToList())
{
    action(mystring);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:32:36.477

您在迭代期间修改了 actionList。它可能是与当前循环或进行修改或另一次迭代的操作方法不同步的第二个线程。所以解决方案可能是：

```
var tmp = new List<Action<string> >(actionList);
foreach(Action<string> action in tmp) 
{
    if(action != null) {
      action(mystring);                               
    }
} 
```

但它仅在操作修改的情况下才有效，在并行线程的情况下，您应该同步列表。

# jquery - 如何允许键盘选项卡专注于 div

> ID：10227038
> 
> 赞同：8
> 
> 时间：2012-04-19T11:28:32.237
> 
> 标签：jquery, jquery-plugins

我做了一个消息框，上面有两个按钮。基本上它是一个 jQuery 插件，具有叠加效果的弹出窗口。但是当出现消息框并且用户按下选项卡按钮时，消息对话框不会聚焦。**那么如果我的消息框出现，我该怎么做，然后焦点自动转到我的消息框？并且当焦点丢失并且用户再次按下选项卡按钮时，它再次返回到我的消息对话框**如果我用鼠标单击消息框然后按下选项卡按钮，那么焦点来到按钮然后消失。这是图像![在此处输入图像描述](../Images/97f81d18418bb7d7a596b6147ee86dec.png)。这是制作盒子的代码。

```
var containerDiv = $("<div></div>", {
    id: config.containerDivID   
}); 

// append all the div to main Div(container)
containerDiv.append(messageDiv, buttonDiv);

centerPopup(config, containerDiv);
loadPopup(config);

function centerPopup(config, container){
    var backgroundPopup = $("<div></div>", {
        id: "backgroundPopup"
    }); //end of  imageDiv   
    $("body").append(backgroundPopup);
    $("body").append(container);
    $("#backgroundPopup").css({
        "height": windowHeight
    });
} //end of  centerPopup()

function loadPopup(config){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#" + config.containerDivID).fadeIn("slow");
        popupStatus = 1;
   }  //end of if
} //end of function loadPopup() 
```

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-05-26T17:07:14.473

`tabindex`是divs的东西。将其设置为零，原生 HTML5 将插入正确的`tabindex`. 请记住，所有小写：

```
<div tabindex=0> Stuff Here </div> 
```

这将允许您使用键盘聚焦 div。

```
<div tabindex=0, autofocus=true> Stuff Here </div>

// select it with

document.querySelector("[autofocus]").focus();

// or with smelly jQuery

$([autofocus]).focus(); 
```

如果您使用的是 jQuery，您可以通过以下方式`div`轻松找到焦点：

```
var $focused = $(':focus'); 
```

然后做一些事情，比如`.click()`：

```
$focused.click() 
```

这将点击那个东西。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-19T11:44:51.667

你不能把焦点放在`div`.

您应该捕获`Tab`按键事件并`Yes`手动将焦点设置在按钮上。

如果`Yes`按钮已经有焦点，那么你应该关注`No`按钮。

```
$('body').live('keydown', function(e) { 
  if (is_dialog_visible) {
    var keyCode = e.keyCode || e.which; 
    if (keyCode == 9) { 
      e.preventDefault(); 
      if (container.find(".yes").is(":focus")) {
        container.find(".no").focus();
      } else {
        container.find(".yes").focus();
      }
    }
  } 
}); 
```

# google-app-engine - 如何从 Blobstore 上传处理程序获取用户的 IP？

> ID：10227042
> 
> 赞同：1
> 
> 时间：2012-04-19T11:28:41.727
> 
> 标签：google-app-engine, python-2.7, blobstore

我试图从我的上传处理程序内部获取用户的 IP，但似乎提供的唯一 IP 是`0.1.0.30`. 有什么方法可以解决这个问题，或者有什么方法可以从上传处理程序内部获取用户的实际 IP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:22:33.887

尝试在通过`create_upload_url()`.

上传处理程序实际上是在上传完成后由 Blobstore 上传逻辑调用的，因此是奇怪的 IP。

# c# - URL 中的空格

> ID：10227045
> 
> 赞同：0
> 
> 时间：2012-04-19T11:28:53.000
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我使用 ASP.Net MVC 3 创建了 yahoo 天气 API 应用程序，当我尝试将邮政编码插入文本字段以找到正确的 xml 时，我想为标准的英国邮政编码留出空白。你能帮我做那件事吗？以下代码`model.PostCode`表示已在模型中声明为字符串的 PostCode 变量。此代码位于控制器文件中。

```
private Boolean LookupWeather(ref RssModels model)
{    
  string WoeidUrl = "http://where.yahooapis.com/v1/places.q('" +
                     model.PostCode +
                     "')?appid=EzZDnOXV34EzJpQ8mX8mc62cYk1Gu21DzUhsLr.4nQ2qz.xffZah.RNq8lObxA--";

  XDocument getWoeid = XDocument.Load(WoeidUrl);

  try
  {
    model.Woied = (int)(from place in getWoeid.Descendants("place")
                        select place.Element("woeid")).FirstOrDefault();
    return true;
  }
  catch
  {
    return false;
  } 
```

如果可以，请帮助我获取如下 URL。 `http://where.yahooapis.com/v1/places.q('mk10%202hn')?appid=EzZDnOXV34EzJpQ8mX8mc62cYk1Gu21DzUhsLr.4nQ2qz.xffZah.RNq8lObxA--`

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:40:30.537

使用[UrlEncode](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

```
string WoeidUrl = "http://where.yahooapis.com/v1/places.q('" 
    + UrlEncode(postCode)
    + "')?appid=EzZDnOXV34EzJpQ8mX8mc62cYk1Gu21DzUhsLr.4nQ2qz.xffZah.RNq8lObxA--"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:33:59.973

浏览器所做的就是用 %20 替换空间，您可以通过使用 Replace 来复制它，尝试：

```
string postCode = model.PostCode.Replace(" ", "%20"); 
```

然后在上面的代码中使用它，如下所示：

```
string WoeidUrl = "http://where.yahooapis.com/v1/places.q('" 
    + postCode
    + "')?appid=EzZDnOXV34EzJpQ8mX8mc62cYk1Gu21DzUhsLr.4nQ2qz.xffZah.RNq8lObxA--"; 
```

# java - 如何将自定义通知类型添加到 jira

> ID：10227047
> 
> 赞同：2
> 
> 时间：2012-04-19T11:29:17.787
> 
> 标签：java, jira, jira-plugin

我在添加自定义“通知类型”时遇到问题（页面上可见的第二列 - [http://host:port/secure/admin/AddNotification!default.jspa](http://host:port/secure/admin/AddNotification!default.jspa)）。我正在使用 jira 4.2，我发现在 Jira 中负责此任务的接口是[http://docs.atlassian.com/software/jira/docs/api/4.2/com/atlassian/jira/notification/NotificationType .html](http://docs.atlassian.com/software/jira/docs/api/4.2/com/atlassian/jira/notification/NotificationType.html)，但是我不知道下一步该做什么。请提供任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:54:12.680

好的，解决方案是扩展类 AbstractNotificationType - 扩展类 ex。MyNotificationType 然后创建另一个类，如下面的代码：

```
 public MyNotificationUpdater() {

    NotificationTypeManager notificationTypeManager = ComponentManager
            .getComponentInstanceOfType(NotificationTypeManager.class);
    Map types = notificationTypeManager.getTypes();
    if (types == null) {            
        types = new HashMap<String, Object>();
    }
    types.put("MyNotificationType", new MyNotificationType());
    notificationTypeManager.setSchemeTypes(types);      
} 
```

# actionscript-3 - as3 中 Papervision3D 的问题

> ID：10227048
> 
> 赞同：0
> 
> 时间：2012-04-19T11:29:22.733
> 
> 标签：actionscript-3, actionscript, 3d, papervision3d

我在 as3 中玩 Papervision3D。我目前被 BitmapEffectLayer 困住了。当我想为对象添加效果时，具有效果的对象将始终呈现在所有内容的前面。这意味着，即使它在 cordinat 系统中的另一个对象后面，它也会被拉到它前面。这是一些源代码，不知道它是否有帮助。

```
spherer = new Sphere(shadedMaterial, 120, 20, 14);
        //spherer.x = 0;
        //spherer.y = 0;
        //spherer.z = 0;

        displayEarth = new DisplayObject3D();
        displayEarth.x =0;
        displayEarth.y = 0;
        displayEarth.z = 0;
        displayEarth.addChild(spherer);

        smallSphere = new Sphere(flatMaterial, 10, 10, 10);

        smallSphere.x = 0;
        smallSphere.z = 130;
        smallSphere.y = 00;

        displayEarth.addChild(smallSphere);
        //scene.addChild(smallSphere);
        scene.addChild(light);

        var partMaterial:ParticleMaterial = new ParticleMaterial(0x000000, 1.0, ParticleMaterial.SHAPE_CIRCLE);
        var part:Particle = new Particle(partMaterial, 3, 0, -150, 30);
        var part2:Particle = new Particle(partMaterial, 3, 0,0,135);
        var partsHolder:Particles = new Particles();
        partsHolder.addParticle(part);
        parrr.push(part);
        partsHolder.addParticle(part2);
        parrr.push(part2);

        var effectLayer:BitmapEffectLayer = new BitmapEffectLayer(viewport, stage.stageWidth, stage.stageHeight, true, 0x000000, BitmapClearMode.CLEAR_PRE);
        effectLayer.drawLayer.blendMode = BlendMode.OVERLAY;

        effectLayer.addDisplayObject3D(smallSphere);
        viewport.containerSprite.addLayer(effectLayer);

        displayEarth.addChild(partsHolder);

        scene.addChild(displayEarth);
        effectLayer.addEffect(new BitmapLayerEffect(new BlurFilter(2,2,2))); 
```

现在，附加到 effectLayer 的“smallSphere”将始终呈现在“sphere”的前面。任何帮助表示赞赏！- 大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:35:57.640

当您将 DisplayObject3D 设置为它自己的图层时（`.useOwnContainer = true;`作为最简单的选项，本质上您会将该 3D 对象渲染到 2D 典型显示列表上的单独 2D 精灵中。使用`ViewportLayer`可以更容易地控制此堆叠/排序，因此请务必阅读通过[Andy Zupko 在 ViewportLayers 上的详细帖子](http://blog.zupko.info/?p=129)。这个想法是，如果您将 3D 对象添加到 2D 渲染层，您将不得不处理排序。例如，您可以检查 3D 对象的 z 位置并基于该排序层如果对象在 3D 中移动很多。在执行此类操作时，您显然会降低速度，因此最好稍微计划一下（例如，场景中什么移动，什么不移动，添加效果的优缺点是什么， ETC。）

此外，记住 Papervision3D 项目已经有一段时间没有更新可能是个好主意。它目前只提供软件渲染（使用 Flash Player 9，我认为部分使用 Flash Player 10 的新绘图 API，但可能不在稳定分支中）。您可能想看看[Away3D](http://away3d.com/)，因为它目前仍在开发中。您可以使用 Flash Player 10 软件渲染 API 甚至是轻量级的 Away3DLite 版本（我认为它比 Papervision3D 更快），但还有使用硬件加速的 Away3D 4.0 版本。

# git - 未附加的 git 存储库？

> ID：10227050
> 
> 赞同：1
> 
> 时间：2012-04-19T11:29:25.307
> 
> 标签：git, github

我有一个在本地运行的文件夹，其中包含一个网站。它非常愉快地在我的计算机上的 xampp 上运行。我知道*过去*已经与 git 挂钩，我继续通过命令行添加、提交和推送我的更改，这一切都像我所有其他 git 存储库一样工作，除了它们在我的 github 仪表板上在线更新以显示何时他们最后一次编辑等。

问题是这个文件夹 Demo 没有更新我的 github 仪表板上所谓的已连接存储库。我已经进行了大量更改，我正在将其提交给某个地方，但它不是我所期望的……它显示最多最近的变化是 4 个多月前！有什么方法可以轻松地重新连接两者吗？我不介意在 github 上显示的 ghost repo 中丢失任何东西，但我不能在本地 Demo 文件夹中丢失任何东西。我很高兴在 git 上做基础知识，但如果发生任何意外情况，我会感到害怕，我会删除所有内容！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:15:04.187

That message means that your local repo has diverged from the GitHub remote repo; that is, there are local commits that don't exist remotely, and vice versa.

If you really don't care what's happened to the remote repo, then you can run `git push -f` to force the push through, but if there are any other repos (yours or anyone else's) that have already pulled the non-local changes that have somehow ended up on GitHub, then this will really screw things up for them! Any changes on GitHub that you don't have locally will be lost.

If in doubt, commit any local changes, make a note of the current HEAD commit ID (you can use `git show` to find it) and then pull down the remote changes, fix any merge conflicts, and push back up. If things go wrong, you can always just `git reset --hard <commit-id>` to go back to where you were before. This route doesn't modify history, so there's no danger of losing anything.

Basically you need to be careful in Git with any operation that modifies the commit history of a repo, which `push -f` does, since it'll potentially lead to inconsistent histories between repos. On the other hand, if you only append to a repo's history (which is what you should be doing, e.g. with `git commit`, `git pull`, `git merge`, etc.) then if it breaks, you can always get it back into a working state just by rewinding to before the offending commits with `git reset`.

* * *

Also, you can see the commits on GitHub that you don't have with `git log origin/master...master`, or `git diff origin/master...master` to see the actual changes (make sure you run `git fetch` first).

# ruby-on-rails-3 - 水豚和formaction

> ID：10227051
> 
> 赞同：3
> 
> 时间：2012-04-19T11:29:25.507
> 
> 标签：ruby-on-rails-3, capybara

我有一个简单的表单，其中包含一个“电子邮件”字段和两个提交按钮。

第一个按钮“下一步”触发表单默认操作：“/登录”。第二个按钮“重置密码”有一个“formaction”元素，可将表单重定向到新的目的地：“/reset_password”。

```
<button type="submit" name="login_button">Next</button>
<button class="secondary_button" type="submit" name="reset_button" formaction="/reset_password">Reset Password</button> 
```

该表单运行良好，但是在使用 Capybara 进行测试时：

```
click_button "Reset Password" 
```

它触发表单的默认操作，而不是正确的操作。我已经确认默认操作是通过以下方式触发的：

```
save_and_show_page 
```

它肯定触发了正确的按钮，但似乎忽略了“formaction”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T12:42:46.153

您可能知道，这是一个 HTML5 属性，因为 Capybara 默认使用 RackTtest 作为其驱动程序/浏览器（这是一个非常准系统，不支持 JS 的驱动程序），它可能根本看不到它。我假设您需要使用像 PhantomJS ( [http://phantomjs.org/index.html](http://phantomjs.org/index.html) ) 这样的无头浏览器进行设置。它支持 HTML5 属性。

# javascript - 如何卸载当前窗口？

> ID：10227064
> 
> 赞同：0
> 
> 时间：2012-04-19T11:30:11.797
> 
> 标签：javascript, javascript-events

我有这个代码：

```
<html><head></head><body>
    <script language="javascript" type="text/javascript">
        function f(){
             //WHAT I HAVE TO PUT HERE?
        }
        function unloadFCT() {
             //CODE WHEN THE WINDOW IS UNLOADED
        }               
        var val = navigator.userAgent.toLowerCase();
        if(val.indexOf("msie") > -1){
             window.attachEvent('onbeforeunload', unloadFCT);
        }
        else{
             window.onunload = unloadFCT;   
        }
</script>
<a href="#" onclick="f()" >Call unloadFCT() function</a>
</body></html> 
```

f() 的目标是执行 unloadFCT() 的代码。

谁能告诉我 f() 的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:35:54.743

/ ***** ** *** ** *** ****** *test1.php* ***** ** *** ** *** ***** /我创建一个简单的例子来理解问题，下面是test1.php文件的内容

```
<html><head></head><body>
<script language="javascript" type="text/javascript">
var xhrHttp;
function getXHRObject() {
   var obj = false;
   try {
      obj = new ActiveXObject("Msxml2.XMLHTTP");
   }
   catch (e) {
      try {
         obj = new ActiveXObject("Microsoft.XMLHTTP");
      }
      catch (e) {
         try {
            obj = new XMLHttpRequest();
         }
         catch (e) {
            return false;
         }
      }
   }
   return obj;
}
function unloadFCT() {
    xhrHttp = getXHRObject();   
    xhrHttp.open("GET", "ajaxCall.php", false);
}       

var val = navigator.userAgent.toLowerCase();
if(val.indexOf("msie") > -1){
    window.attachEvent('onbeforeunload', unloadFCT);
}
else{
    window.onunload = unloadFCT;    
} 
```

当您关闭此窗口时，将在 ajaxCall.php 所在的位置创建一个新文件

/ ***** ** *** ** *** ****** *ajaxCall.php* ***** ** *** ** *** ***** /

```
<?php
    $handle = fopen("myFile_".time().".txt", 'a+');
    fwrite($handle, "simple message..."); 
?> 
```

/ ***** ** *** ** *** ****** *test2.php* ***** ** ***** /

```
<html><head></head><body>
<script language="javascript" type="text/javascript">
var xhrHttp;
function f(){
    unloadFCT();
    window.close();
}
function getXHRObject() {
   var obj = false;
   try {
      obj = new ActiveXObject("Msxml2.XMLHTTP");
   }
   catch (e) {
      try {
         obj = new ActiveXObject("Microsoft.XMLHTTP");
      }
      catch (e) {
         try {
            obj = new XMLHttpRequest();
         }
         catch (e) {
            return false;
         }
      }
   }
   return obj;
}
function unloadFCT() {
    xhrHttp = getXHRObject();   
    xhrHttp.open("GET", "ajaxCall.php", false);
}       
var val = navigator.userAgent.toLowerCase();
if(val.indexOf("msie") > -1){
    window.attachEvent('onbeforeunload', unloadFCT);
}
else{
    window.onunload = unloadFCT;    
} 
```

执行 unloadFCT() 函数的代码并关闭此窗口！！！

/ ***** ** *** ** *** ** *** ** ******问题****** ** *** ** *** ** *** *** /

你能告诉我test2.php有什么问题吗？我希望 f() 函数执行 unloadFCT() 的代码并关闭当前窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:16:03.167

你应该在之后添加 window.close()`unloadFCT();`

# javascript - 需要 JQuery 来标记从数据库中的列表/数组中选中的复选框

> ID：10227065
> 
> 赞同：0
> 
> 时间：2012-04-19T11:30:11.920
> 
> 标签：javascript, jquery, html, forms

使用 SQL 2008 Server 和最新的 JQuery。如果我从数据库中查询一列并获取列表/数组，如何将每个复选框组中的复选框标记为“已选中”？下面的示例复选框组和列表：

类别 '1,7,20' 的列表（Jquery 应标记值为 1,7,10 的复选框） 喜欢 '2,3' 的列表（Jquery 应标记值为 2 和 3 的复选框）

```
<form>
    <input type="checkbox" class="category" name="category" value="14" />Blah
    <input type="checkbox" class="category" name="category" value="1" />Blah1
    <input type="checkbox" class="category" name="category" value="7" />Blah2
    <input type="checkbox" class="category" name="category" value="20" />Blah3
    <input type="checkbox" class="likes" name="likes" value="17" />Apple
    <input type="checkbox" class="likes" name="likes" value="3" />Apple1
    <input type="checkbox" class="likes" name="likes" value="2" />Apple2
    <input type="checkbox" class="likes" name="likes" value="13" />Apple3
</form> 
```

我尝试了以下 JQuery 代码，但它不起作用：

```
$.each(['1,7,20'], function (index, item) {
    if ($('.category').val() === item) {
        $(".category").prop("checked", true);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:32:12.397

您传递的是一个包含单个元素的数组，即 string `1,7,20`，而不是包含三个元素的数组，即 strings和`1`，所以我不确定您为什么期望它能够工作。如果您的输入实际上是字符串，您可以用逗号将其拆分以获取一个数组，其中您的数字作为字符串：`7``20`

```
var myString = '1,7,20';
var myArray = myString.split(','); 
```

然后传递`myArray`给`$.each()`函数调用。

您传递给的函数内部的代码也存在问题`$.each()`。如果你调用`.val()`一个包含多个元素的 jQuery 对象，它通常只会返回第**一个**元素的值。您需要再次遍历元素集合，并使用`this`来引用当前元素。

```
$.each(myArray, function(index, item){
    $('.category').each(function(){
        if(this.value === item) {
            this.checked = true;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:38:52.160

顺便说一句，从语义上讲，您应该使用[filter](http://api.jquery.com/filter/)。您可以做同样的事情，同时提高代码的可读性。

# ios - 我不想在根视图控制器上添加 UInavigationController 和 tabbarcontroller

> ID：10227070
> 
> 赞同：0
> 
> 时间：2012-04-19T11:30:21.680
> 
> 标签：ios

我有一个基于单一视图的应用程序，当它运行时显示 2 个按钮。在点击 1 个按钮时，我想切换到另一个必须是 uinavigationcontroller 的视图，在 2 个按钮上我想切换到 tabbarcontroller 视图。我知道 uinav 和 tabbar 控制器可以做什么。我创建了基于 uinav 和选项卡的项目并研究了所有代码，在互联网上搜索了教程，但我得到的是每个人都告诉我要像这样添加

```
self.window.rootViewController = self.navigationController; 
```

在根视图控制器上。

我**不想**在根视图控制器上添加 UInavigationController 和 tabbarcontroller。请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:06:02.983

@pamy 我可以为您提供完整的源代码，请让我知道您的 Skype id 或其他方式向您发送文件，我不知道如何在 stackoverflow 上发布代码。

我确实写了很多次，但它不接受我的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:37:38.653

然后创建一个`UIViewController`名为 RootViewController 例如，在其视图中添加两个按钮并处理这些按钮的触摸事件。第一个按钮，当被触摸时应该显示你的 UINavigationController，第二个按钮应该显示你的 UITabBarViewController。然后在您的 AppDelegate 的`didFinishLaunchingWithOptions:`方法中初始化您的 RootViewController 并设置 self.window.rootViewController = rootViewController;

**（更新）**
好的，创建一个 SingleView 应用程序。放置按钮并设置这些按钮的出口和操作。您还需要再创建 2 个视图控制器：一个 UINavigationController 和一个 UITabBarController。当第一个按钮被触摸时，在处理触摸的方法中添加：

```
-(void)button1Touched:(id)sender
{
    MyNavivationController *navc = [[MyNavigationController alloc] init];
    [self presentViewController:navc animated:YES completion:nil];
} 
```

您可以对另一个按钮执行相同的操作，但是初始化您的标签栏控制器并执行相同的操作。如果您对这些操作不熟悉，您可以参考有关如何创建视图控制器、处理事件等的文档...

# python - Python 最大函数

> ID：10227074
> 
> 赞同：3
> 
> 时间：2012-04-19T11:30:31.557
> 
> 标签：python, python-2.7, max

当列表中的项目不是同一类型时，max 函数如何工作？

例如以下代码返回 [1,'3']

```
max([1,52,53],[1,'3']) => [1,'3'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:55:11.800

在 Python2 中，不同类型对象的默认比较是使用其类型的*id*进行比较（通过将对象指针转换为整数获得）。这里是源链接：http: [//hg.python.org/cpython/file/2.7/Objects/object.c#l757](http://hg.python.org/cpython/file/2.7/Objects/object.c#l757)

在我的构建中，这是类型的排序：

```
>>> sorted([bool, int, float, long, list, tuple, dict, str, unicode])
[<type 'bool'>, <type 'float'>, <type 'int'>, <type 'list'>, <type 'long'>,
 <type 'dict'>, <type 'str'>, <type 'tuple'>, <type 'unicode'>] 
```

数字（复数除外）具有允许基于数值进行交叉类型比较的比较方法（即可以将浮点数与整数进行比较）。

*None*对象是特殊的。它比其他所有东西都少。

要查看所有内容，请使用*sorted*查看排序：

```
>>> sorted(zoo)
[None, -5, -5.0, 0, 0.0, -0.0, False, True, 10, 10.0, 11.5, {},
 {'abc': 10}, {'lmno': 20}, [], [1, 2], [1, 2, 3], [1, [2, 3]],
 '', u'', 'alpha', u'alpha', 'bingo', 'cat', (), (1, 2), 
 (1, 2, 3), (1, (2, 3)), u'bingo', u'cat'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T11:32:43.443

在 Python 2 中，不同类型的对象使用特殊逻辑~~按类型的字符串表示进行比较。~~有关详细信息，请参阅雷蒙德的[答案](https://stackoverflow.com/a/10227493/406693)。

在 Python 3 中，此代码将引发异常：

```
Traceback (most recent call last):
  File "prog.py", line 1, in <module>
    max([1,52,53],[1,'3'])
TypeError: unorderable types: str() > int() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T11:31:34.510

它执行[操作员](http://docs.python.org/reference/datamodel.html#object.__gt__)对这两个元素所做的[任何事情。`>`](http://docs.python.org/reference/datamodel.html#object.__gt__)

# iphone - MKAnnotations 直到我滚动地图才显示

> ID：10227077
> 
> 赞同：0
> 
> 时间：2012-04-19T11:30:38.990
> 
> 标签：iphone, objective-c, mkmapview, mkannotation

好吧，我有一个带有地图的视图，我在其中加载了一些注释。一切正常，但是当我想删除这些注释并包含其他注释时，它们不会显示，直到我移动（滚动）地图。

有什么建议吗？

编辑：

似乎不是使用这个：

```
[self updateMap]; 
```

我必须使用：

```
[self performSelectorOnMainThread:@selector(updateMap) withObject:nil waitUntilDone:true]; 
```

更新映射我添加新注释的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:34:35.547

在 viewdidload 中使用：

```
- (void)viewDidLoad 
```

{

```
 NSMutableArray* annotations=[[NSMutableArray alloc] init];
    MyAnnotation* myAnnotation = [[MyAnnotation alloc] init];
myAnnotation.coordinate = theCoordinate;
    [annotations addObject:myAnnotation];
    MKMapRect flyTo = MKMapRectNull;
for (id <MKAnnotation> annotation in annotations) 
   {
    NSLog(@"fly to on");
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        if (MKMapRectIsNull(flyTo)) 
        {
               flyTo = pointRect;
        }
        else
        {
               flyTo = MKMapRectUnion(flyTo, pointRect);
       //NSLog(@"else-%@",annotationPoint.x);
        }
     }

// Position the map so that all overlays and annotations are visible on screen.
mapView.visibleMapRect = flyTo; 
```

}

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
```

{ NSLog(@"欢迎进入地图视图注释");

```
// if it's the user location, just return nil.
if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;

// try to dequeue an existing pin view first
static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKPinAnnotationView* pinView = [[[MKPinAnnotationView alloc]
                                 initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
pinView.animatesDrop=YES;
pinView.canShowCallout=YES;
pinView.draggable = NO;
pinView.pinColor=MKPinAnnotationColorGreen;

//button on the right for popup for pins
UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton setTitle:annotation.title forState:UIControlStateNormal];
[rightButton addTarget:self
                action:@selector(showDetails:)
      forControlEvents:UIControlEventTouchUpInside];
pinView.rightCalloutAccessoryView = rightButton;

//zoom button on the left of popup for pins
UIButton* leftButton = [UIButton buttonWithType:UIButtonTypeContactAdd];
[leftButton setTitle:annotation.title forState:UIControlStateNormal];
[leftButton addTarget:self 
               action:@selector(zoomToLocation:) forControlEvents:UIControlEventTouchUpInside];
pinView.leftCalloutAccessoryView = leftButton;

UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"profile.png"]];
pinView.leftCalloutAccessoryView = profileIconView;
[profileIconView release];

return pinView; 
```

}

希望这会有所帮助！！！！！！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:37:40.797

像这样尝试：

```
[mapView removeAnnotations:[mapView annotations]];
NSArray *targetArray = /*YOUR ARRAY NAME with object, containing `latitude`, `longitude` and `title` values*/
for (id *item in targetArray) {
    if (item.latitude && item.longitude) {
        MKPin *pin = [[MKPin alloc] init]; // MKPin is your class which specifies the deledate `MKAnnotation`
        pin.coordinate = CLLocationCoordinate2DMake(item.latitude, item.longitude);
        pin.title = item.title;
        [mapView addAnnotation:pin];
    }
} 
```

# mysql - 为什么导入 SQL 这么慢？

> ID：10227078
> 
> 赞同：43
> 
> 时间：2012-04-19T11:30:46.360
> 
> 标签：mysql, windows, linux

我有一个 SQL 文件，其中包含两个表，总共大约 600,000 行。昨天，我尝试将文件导入到我在 Fedora 16 上的 MySQL 数据库中，导入文件花了 2 个多小时。在我的 Windows PC 上花了 7 分钟。我的 Linux 和 Windows 机器具有完全相同的硬件。我的几个朋友也尝试过，他们也有类似的经历。

我们使用的命令是：`mysql -u root database_name < sql_file.sql`.

为什么速度会有这么大的差异？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-19T11:35:58.550

我敢打赌，Fedora 16 尊重事务/同步语义，而 Windows 没有。如果你算一下，两小时内 600,000 次更新是每分钟 5,000 次。这与磁盘的旋转速度在同一个数量级。

您可以尝试添加`SET autocommit=0;`到导入文件的开头和`COMMIT;`结尾。请参阅[此页面](http://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-bulk-data-loading.html)了解更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T11:41:07.033

为什么不将 .sql 文件作为`BULK INSERT`选项导出并导入，在使用 mysqldump 进行备份时尝试这些选项

`--extended-insert`: 使用多行插入语句

`--quick`：不要缓冲行数据，如果表很大的话很好

**注意：**`max_allowed_packet`在生成 .sql 文件之前，请确保在 my.cnf 文件中增加 =32M 或更多的值。

# java - EL 函数未找到错误

> ID：10227080
> 
> 赞同：1
> 
> 时间：2012-04-19T11:30:57.773
> 
> 标签：java, jsf-2, el

我正在尝试使用带有 jsfbean 参数的自定义 EL 函数调用方法。

```
<c:set var="test1" value="${cx:methodName('para')}" scope="session"/>
        <h:outputText value="#{test1}"/> 
```

我做了以下 id TLD 并将其放入 WEB-INF

```
 <?xml version="1.0" encoding="UTF-8" ?>
    <taglib 
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
        version="2.1">

        <tlib-version>1.0</tlib-version>
        <short-name>Custom_Functions</short-name>
        <uri>http://example.com/functions</uri>

        <function>
            <name>methodName</name>
            <function-class>funcionclass(Jsfbean)</function-class>
            <function-signature>java.lang.String methodName(java.lang.String)</function-signature>
        </function>
    </taglib> 
```

我也在 web.xml 中配置

```
<jsp-config> 
        <taglib> 
               <taglib-uri>http://example.com/functions</taglib-uri> 
               <taglib-location>/WEB-INF/functions.tld</taglib-location> 
        </taglib> 
</jsp-config> 
```

仍然出现 Function not found 错误。

以下是方法代码

```
public static String methodName(String s1) throws Exception
    {
        return "Kshitij";
    } 
```

任何身体都可以提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:21:08.700

您在使用 Facelets 时创建了一个 JSP EL 函数。这是行不通的。另外，您的`<function-class>`声明不正确。它应该指定全限定类名 (FQN)。例如`com.example.FunctionClass`。

将 taglib 文件重命名为`/WEB-INF/functions.taglib.xml`以下更新内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0">
    <namespace>http://example.com/functions</namespace>

    <function>
        <function-name>methodName</function-name>
        <function-class>com.example.FunctionClass</function-class>
        <function-signature>java.lang.String methodName(java.lang.String)</function-signature>
    </function>
</facelet-taglib> 
```

然后你需要注册它`web.xml`按如下方式注册它（不要忘记删除旧的 JSP taglib 注册！）：

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/functions.taglib.xml</param-value>
</context-param> 
```

最后通过以下 XML 命名空间在您的视图中声明它

```
xmlns:cx="http://example.com/functions" 
```

* * *

**与具体问题无关**，有一种替代方法，可能更容易：[安装 JBoss EL](https://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328)。这样，您将能够像在新的 EL 2.2 中一样调用 bean 上的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:37:26.170

您仍然需要在您的 jsp 中包含参考：

```
<%@taglib prefix="cx" uri="http://example.com/functions"%> 
```

# sharepoint - 获取 SharePoint 中可供用户使用的网站列表

> ID：10227087
> 
> 赞同：1
> 
> 时间：2012-04-19T11:31:25.870
> 
> 标签：sharepoint, soap

我一直在尝试使用 sharepoint Web 服务（来自 webs.asmx）GetWebCollection 来获取用户可用的站点列表。我已经使用 sharepoint 成功进行了身份验证，如果我在站点路径中进行硬编码，我可以取回文件。但是，当我尝试使用 GetWebCollection 时出现“403 Forbidden”错误？

需要什么不同的下来？

或者，有什么方法可以告诉用户自动分配到哪个站点？

我在 Objective-C 中通过 SOAP（使用 ASIHTTPRequest）进行连接。

```
- (void)getUrl {

NSURL *url = [NSURL URLWithString:@"https://[server]/_vti_bin/Webs.asmx"];

requestGetSites = [ASIHTTPRequest requestWithURL:url];
[requestGetSites setDelegate:self];

NSString *soapMessage = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<GetWebCollection xmlns=\"http://schemas.microsoft.com/sharepoint/soap\" />\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>";

[requestGetSites setUseCookiePersistence:NO];
[requestGetSites setUsername:@"username"];
[requestGetSites setPassword:@"password"];
[requestGetSites appendPostData:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
[requestGetSites addRequestHeader:@"Content-Type" value:@"text/xml; charset=utf-8"];
[requestGetSites addRequestHeader:@"Host" value:@"[a server]"];
[requestGetSites addRequestHeader:@"SOAPAction" value:@"http://schemas.microsoft.com/sharepoint/soap/GetWebCollection"];

NSLog(@"Request headers are: %@", [[requestGetSites requestHeaders] description]);

[requestGetSites startSynchronous]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:25:38.487

我已经开源了一个用于连接到 SharePoint 的 SharePoint 库，该库位于[http://github.com/woodnathan/SPConnector](http://github.com/woodnathan/SPConnector)

# java - JSON POST 到永远不会到达的服务器

> ID：10227092
> 
> 赞同：0
> 
> 时间：2012-04-19T11:32:04.060
> 
> 标签：java, javascript, json, post, jersey

我在将一些 JSON 发布到使用 Jersey REST 构建的 Web 服务时遇到问题。数据似乎永远不会到达服务器。

整个任务流程有点像这样：

***Javascript POST JSON -> Webserver -> webserver 获取 JSON 并打印出来***

这是应该将 JSON 数据发布到服务器的 Javascript，其路径为`/posttest`：

```
<script type="text/javascript">
$(function() {
    var name = "Tony";
    $.post(
            '/posttest',

            function (data) {
                alert("sune " + data.name);
            });
})
 </script> 
```

我有一个运行所有这些类的网络服务器（Grizzly）：

此类使用 JAX-RS API 来处理使用 JSON 数据的 POST 请求：

```
@Path("/posttest")
public class PostTest {
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response doPost(StatusBean b) {
    System.out.println("---> " + b.getName());
    StatusBean statusBean = new StatusBean();
    return Response.status(Response.Status.ACCEPTED).entity(statusBean).build();
} 
```

这是数据将被序列化到和从中的 bean 的定义：

```
@XmlRootElement
public class StatusBean {
   private String name;

   public StatusBean() {
   }

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name= name;
   }
} 
```

这是在控制台中打印出数据的测试客户端类

```
ClientConfig cc = new DefaultClientConfig();
Client c = Client.create(cc);
WebResource r = c.resource("http://localhost:9998/posttest");
StatusBean post = r.type(MediaType.APPLICATION_JSON_TYPE).post(StatusBean.class, new StatusBean());
System.out.println("--> " + post.getName()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:04:00.050

我只有resteasy而不是jersey的经验，但我会尝试依赖JAX-RS标准。

发生此类错误时，您应该始终更详细地调查 HTTP 响应。在浏览器中打开网络监视器并检查 HTTP 响应代码。我认为你得到一个 405，因为你发送的 JSON 和 StatusBean java 对象不匹配。你的java bean有一个'dat'属性，而你的JSON有一个'name'属性。

还要确保您像 javascript 一样直接序列化 java 对象。这可以使用杰克逊序列化器来实现。要使用它，只需将它包含在您的类路径中。Usgin maven 这可能是：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.8</version>
</dependency> 
```

此链接可能会有所帮助：[http ://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/](http://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:36:41.493

您的 StatusBean 应该有名为的字段`name`，而不是 dat - 它应该与`{"name":"Tony"}`.

顺便提一句。RESTEasy servlet 的 REST 资源映射是什么？在上面的设置中应该是`/*`.

# html - 使用 AppleScript 解析 HTML 源代码

> ID：10227097
> 
> 赞同：1
> 
> 时间：2012-04-19T11:32:20.480
> 
> 标签：html, parsing, applescript, delimiter, automator

我正在尝试解析已在 Automator 中转换为 TXT 文件的 HTML 文件。

我之前使用 Automator 从网站下载了 HTML 文件，现在我正在努力解析源代码。

最好，我只想获取表格的信息，并且需要对 1800 个不同的 HTML 文件重复此操作。

以下是源代码示例：

```
</head>
<body>
<div id="header">
    <div class="wrapper">
        <span class="access">
        <div id="fb-root"></div>

    <span class="access">
     Gold Account: <a class="upgrade" title="Account Details" href="http://www.hedge-professionals.com/account-details.html" >Active </a>       Logged in as Edward&nbsp;&nbsp; | &nbsp;&nbsp;<a href="javascript:void(0);" onclick='logout()' class="logout">Sign Out</a>

    </span>
                                    </span>
    </div><!-- /wrapper -->
</div><!-- /header -->

<div id="masthead">
    <div class="wrapper">   
        <a href="http://www.hedge-professionals.com" ><img src="http://www.hedge-professionals.com/images/hedgep_logo_white.png" alt="Hedge Professionals Database" width="333" height="46" class="logo" border="0" /></a>
        <div id="navigation">
            <ul>
<li ><a href='http://www.hedge-professionals.com/dashboard.html' >Dashboard</a></li>    <li ><a href='http://www.hedge-professionals.com/people.html'class='current' >People</a></li><li ><a href='http://www.hedge-professionals.com/watchlists.html' >My Watchlists</a></li><li ><a href='http://www.hedge-professionals.com/my-searches.html' >My Searches</a></li><li ><a href='http://www.hedge-professionals.com/my-profile.html' >My Profile</a></li></ul>               
        </div><!-- /navigation -->

    </div><!-- /wrapper -->     
</div><!-- /masthead -->

<div id="content">
    <div class="wrapper">
        <div id="main-content">

 <!-- per Project stuff -->
    <span class="section">
                <img src="http://www.hedge-professionals.com/images/people/noimage_53x53.jpg" alt="Christian Sieling" width="52" height="53" class="profile-pic" id="profile-pic-104947"/>
                <h1><span id="profile-name-104947" >Christian Sieling</span></h1>
                                    <ul class="gbutton-group right">
                    <li><a class="gbutton bold pill" href="http://www.hedge-professionals.com/people.html">&laquo; Back </a></li>
                    <li><a class="gbutton bold pill boxy on-click" href="http://www.hedge-professionals.com/addtoWatchlist.php?usr=114752"  id="row-104947" title='Add to Watchlist' >Add to Watchlist</a></li>
                </ul>

                <div style="float:right;padding:3px 3px;text-align:center;margin-top:5px;" >
                <span id="profile-updated-date" >Updated On: 4 Aug, 2010</span><br/>
                <a class="gbutton bold pill" href="http://www.hedge-professionals.com/profile/suggest/people/104947/Christian-Sieling" style="margin:5px;" title='Report Inaccurate Data' >Report Inaccurate Data</a>
                </div>
                                    <h2><span id="profile-details-104947" > at <a href="http://www.hedge-professionals.com/quicksearch/search/Lumix+Capital+Management+Ltd." ><span title='Lumix Capital Management Ltd.' >Lumix Capital Management Ltd.</span></a></span><input type="hidden" name="sub-id" id="sub-id" value="114752"></h2>

            </span>

            <table width="100%" border="0" cellspacing="0" cellpadding="0" id="profile-table">
                                                        <tr>
                    <th>Role</th>
                    <td>
                    <p>Other</p>                            </td>
                </tr>
                <tr>  
                    <th>Organisation Type</th>
                    <td>
                    <p>Asset Manager</p>                        </td>
                </tr>
                <tr>
                    <th>Email</th>
                    <td><a href="mailto:cs@lumixcapital.com" title="cs@lumixcapital.com" >cs@lumixcapital.com</a></td>
                </tr>
                <tr>
                    <th>Website</th>
                    <td><a href="http://www.lumixcapital.com/" target="_new" title="http://www.lumixcapital.com/" >http://www.lumixcapital.com/</a></td>
                </tr>
                <tr>
                    <th>Phone</th>
                    <td>41 78 616 7334</td>
                </tr>
                <tr>
                    <th>Fax</th>
                    <td></td> 
                </tr>
                <tr>
                    <th>Mailing Address</th>
                    <td>Birrenstrasse 30</td>
                </tr>
                <tr>
                    <th>City</th>
                    <td>Schindellegi</td>
                </tr>
                <tr>
                    <th>State</th>
                    <td>CH</td>
                </tr>
                <tr>
                    <th>Country</th>
                    <td>Switzerland</td>
                </tr>
                <tr>
                    <th class="lastrow" >Zip/ Postal Code</th>
                    <td class="lastrow" >8834</td>
                </tr>
        </table>
                </div><!-- /main-content -->
                    <div id="sidebar"  >
                    </div>

            <div id="similar_sidebar" class="similar_refine" >

            </div>
                            </div><!-- /wrapper -->
</div><!-- /content -->

<div id="footer">

</div> 
```

我的 AppleScript 尝试`text item delimiters`以类似的方式提取表：

```
set p to input
set ex to extractBetween(p, "<table>", "</table>") -- extract the URL
to extractBetween(SearchText, startText, endText)
set tid to AppleScript's text item delimiters
set AppleScript's text item delimiters to startText
set endItems to text of text item -1 of SearchText
set AppleScript's text item delimiters to endText
set beginningToEnd to text of text item 1 of endItems
set AppleScript's text item delimiters to tid
return beginningToEnd
end extractBetween 
```

如何从 HTML 文件中解析表格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-11T10:48:39.183

您可以通过 do javascript 命令在 Safari 中利用 HTML 解析器，而不是制作自己的 HTML 解析器。JavaScript 具有处理 HTML 元素和数据的内置功能。

此脚本仅获取页面中第一个表的 HTML：

```
tell application "Safari"
    tell document 1
        set theFirstTableHTML to do JavaScript "document.getElementsByTagName('table')[0].innerHTML"
    end tell
end tell 
```

您可以使用此技术将基本的 DOM 脚本应用到任何页面并获取您想要读取的任何数据。您可以只获取表格单元格的值，或者任何您想要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:36:23.933

你真的很亲近。问题是您的 startText 变量。起始表格标记不在 html 文本中，因此无法找到。开始表格的行实际上是......

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" id="profile-table"> 
```

因此，我修改了您的代码以分两步查找该标签。第一的...

```
<table 
```

然后这个分开...

```
> 
```

通过这种方式，我们可以忽略表格标签附带的所有代码（宽度、边框等），因为我认为它会因文件而异。这样做之后，我们只得到表的代码。试试这个...

```
set p to input
set ex to extractBetween(p, "<table", ">", "</table>")

to extractBetween(SearchText, startText1, startText2, endText)
    set tid to AppleScript's text item delimiters
    set AppleScript's text item delimiters to startText1
    set endItems to text item -1 of SearchText
    set AppleScript's text item delimiters to endText
    set beginningToEnd to text item 1 of endItems
    set AppleScript's text item delimiters to startText2
    set finalText to (text items 2 thru -1 of beginningToEnd) as text
    set AppleScript's text item delimiters to tid
    return finalText
end extractBetween 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:00:08.967

尝试：

```
set xxx to read alias "Mac OS X:Users:paolo:Desktop:paolo.html"
set yyy to do shell script "echo " & quoted form of xxx & " | grep -o \\<table.*table\\>" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-16T09:59:41.357

行之有效的单线奇迹：

告诉应用程序“Safari”将 sourceCode 设置为字符（in 的偏移量`<table`（文档 1 的源作为字符串））到（（文档 1 的源作为字符串的“/table”的偏移量））+（“/table”的计数)) of (source of document 1 as string) as string

# apache - Apache 指令直接从配置中返回一些静态内容

> ID：10227105
> 
> 赞同：0
> 
> 时间：2012-04-19T11:32:44.513
> 
> 标签：apache

我正在寻找 Apache httpd 指令，它会立即返回一些纯文本内容（“系统尚未配置”）或至少立即生成 500 异常（因此我可以使用 ErrorDocument 500 '系统尚未配置'）。

有什么我可以使用的，还是我需要为此使用 dics 上的一些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:56:12.427

使用这个文件：

JK 连接器是一个 Web 服务器组件，用于将 Tomcat 与 Apache 或 IIS 等 Web 服务器隐形集成。Web 服务器和 Tomcat 之间的通信是通过 JK 协议（也称为 AJP 协议）进行的。

[http://tomcat.apache.org/tomcat-4.1-doc/config/jk.html](http://tomcat.apache.org/tomcat-4.1-doc/config/jk.html)

希望它可以帮助你！

编辑：

你也可以看到这个链接：

[http://www.viart.com/activating_friendly_urls.html.html](http://www.viart.com/activating_friendly_urls.html.html)

如果启用了 fURL，如何重定向到 404 自定义页面

要重定向到自定义 404 页面，请执行以下步骤：

*   登录到您的 ViArt Shop 管理控制台。

*   导航到管理 > CMS > 自定义页面并创建 404 自定义页面

单击“更新”以保存更改。

*   通过任何 FTP 客户端程序访问您的站点并打开您的 .htaccess 文件。

*   在文件的最开头插入以下字符串：

ErrorDocument 404 /friendly_url.php - 保存更改并将更新的文件上传到您商店的根文件夹。

*   打开文件'friendly_url.php'（位于根文件夹中）并找到这样的代码：

$is_friendly_url = 假；header("HTTP/1.0 404 Not Found"); header("状态：404 未找到"); 出口;

- 将此代码替换为以下内容：

header("HTTP/1.0 200 OK"); header("状态：200 OK"); set_get_param("页面", '404'); include_once('page.php'); 返回; 其中“404”是您在 ViArt 商店管理控制台中创建的自定义页面的名称。

注意：如果您不想在管理面板中创建自定义 404 页面，请将以下代码添加到您的 'friendly_url.php' 文件中：

$echo_string = implode("",file('http://example.com/404_text.txt')); 回声 $echo_string; 出口; 其中“404_text.txt”是保存在商店根文件夹中的任何空文本文件。

*   将更改保存在“friendly_url.php”文件中，并将更新后的文件上传到您商店的根文件夹。

*   打开您的浏览器并输入如下内容：[http://example.com/404](http://example.com/404)，其中 example.com 等于您的实际站点 URL，而 404 是您的自定义 404 页面的名称。如果您做的一切正确，您将看到您的 404 自定义页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:51:23.257

为所有可能的 URL 的该加错误文档设置创建了一个文件：

```
Alias /katello "/usr/share/katello/public/"
<Location /katello>
  DirectoryIndex not_configured.txt
  ErrorDocument 404 'Katello was not configured yet, please run katello-configure'
</Location> 
```

# javascript - 在 Node.js 中写入 CSV

> ID：10227107
> 
> 赞同：55
> 
> 时间：2012-04-19T11:32:52.733
> 
> 标签：javascript, node.js, csv

我正在努力寻找一种在 Node.js 中将**数据写入 CSV的方法。**

有几个 CSV 插件可用，但它们只“写入”到标准输出。

理想情况下，我想使用循环**逐行编写。**

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-11-08T00:49:27.277

您可以使用 fs ( [https://nodejs.org/api/fs.html#fs_fs_writefile_file_data_options_callback](https://nodejs.org/api/fs.html#fs_fs_writefile_file_data_options_callback) )：

```
var dataToWrite;
var fs = require('fs');

fs.writeFile('form-tracking/formList.csv', dataToWrite, 'utf8', function (err) {
  if (err) {
    console.log('Some error occured - file either not saved or corrupted file saved.');
  } else{
    console.log('It\'s saved!');
  }
}); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-19T12:02:57.993

[`node-csv-parser`](https://github.com/wdavidw/node-csv-parser#readme)( )的文档`npm install csv`特别声明它可以与流一起使用（参见`fromStream`, `toStream`）。所以使用标准输出并不是硬编码的。

其他几个 CSV 解析器也会在您出现时出现`npm search csv`——您可能也想查看它们。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-01-26T14:21:51.257

[这是一个使用csv-stringify](https://github.com/adaltas/node-csv-stringify)将适合内存的数据集写入 csv 文件的简单示例`fs.writeFile`。

```
import stringify from 'csv-stringify';
import fs from 'fs';

let data = [];
let columns = {
  id: 'id',
  name: 'Name'
};

for (var i = 0; i < 10; i++) {
  data.push([i, 'Name ' + i]);
}

stringify(data, { header: true, columns: columns }, (err, output) => {
  if (err) throw err;
  fs.writeFile('my.csv', output, (err) => {
    if (err) throw err;
    console.log('my.csv saved.');
  });
}); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2019-09-20T15:04:31.190

如果你想像你说的那样使用循环，你可以用 Node fs 做这样的事情：

```
let fs = require("fs")

let writeStream = fs.createWriteStream('/path/filename.csv')

someArrayOfObjects.forEach((someObject, index) => {     
    let newLine = []
    newLine.push(someObject.stringPropertyOne)
    newLine.push(someObject.stringPropertyTwo)
    ....

    writeStream.write(newLine.join(',')+ '\n', () => {
        // a line was written to stream
    })
})

writeStream.end()

writeStream.on('finish', () => {
    console.log('finish write stream, moving along')
}).on('error', (err) => {
    console.log(err)
}) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-06-16T00:58:10.423

如果您不想使用除 fs 之外的任何库，则可以手动进行。

```
let fileString = ""
let separator = ","
let fileType = "csv"
let file = `fileExample.${fileType}`

Object.keys(jsonObject[0]).forEach(value=>fileString += `${value}${separator}`)
    fileString = fileString.slice(0, -1)
    fileString += "\n"

    jsonObject.forEach(transaction=>{
        Object.values(transaction).forEach(value=>fileString += `${value}${separator}`)
        fileString = fileString.slice(0, -1)
        fileString += "\n"
    })

fs.writeFileSync(file, fileString, 'utf8') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-25T18:33:06.497

对于那些喜欢[fast-csv](https://www.npmjs.com/package/fast-csv)的人：

```
const { writeToPath } = require('@fast-csv/format');

const path = `${__dirname}/people.csv`;
const data = [{ name: 'Stevie', id: 10 }, { name: 'Ray', id: 20 }];
const options = { headers: true, quoteColumns: true };

writeToPath(path, data, options)
        .on('error', err => console.error(err))
        .on('finish', () => console.log('Done writing.')); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-08T04:25:41.770

**如果您不想使用除 fs 之外的任何库，您可以手动进行。此外，您可以过滤要写入 CSV 文件的数据**

```
router.get('/apiname', (req, res) => {
 const data = arrayOfObject; // you will get from somewhere
 /*
    // Modify old data (New Key Names)
    let modifiedData = data.map(({ oldKey1: newKey1, oldKey2: newKey2, ...rest }) => ({ newKey1, newKey2, ...rest }));
 */
 const path = './test'
 writeToFile(path, data, (result) => {
     // get the result from callback and process
     console.log(result) // success or error
   });
});

writeToFile = (path, data, callback) => {
    fs.writeFile(path, JSON.stringify(data, null, 2), (err) => { // JSON.stringify(data, null, 2) help you to write the data line by line
            if (!err) {
                callback('success');
                // successfull
            }
            else {
                 callback('error');
               // some error (catch this error)
            }
        });
} 
```

# iphone - 如何控制 MPMoviePlayerController 的播放部分

> ID：10227108
> 
> 赞同：4
> 
> 时间：2012-04-19T11:32:53.667
> 
> 标签：iphone, ios, ios5, mpmovieplayercontroller

我正在使用 MPMoviePlayerController 制作应用程序。

我想做特殊的功能。

我想要的功能是这样的。

如果我播放电影，播放器将在几秒钟后停止（例如：30 秒）。

如果我点击播放按钮，播放器必须从 30 秒播放到下一个停止点。

`initialPlaybackTime`为了实现这个功能，我使用 `endPlaybackTime`了`MPMoviePlayerContrller`.

但是，这个功能并没有像我想象的那样工作。

> mplayer.initialPlaybackTime = 0;
> mplayer.endPlaybackTime = 10;
> 
> [mplayer播放]；
> 
> ....
> [播放器暂停];
> 
> ,,,
> 
> mplayer.initialPlaybackTime = 10;
> mplayer.endPlaybackTime = 30;
> [mplayer播放]；

并且，mplayer 从 0 到 10 再次播放，而不是从 10 到 30。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-19T16:23:11.360

这有点晚了，但对于遇到这个问题的任何人来说，似乎 endplaybacktime 和 initialplayback 时间只能为初始化的 mpmovieplayercontroller 设置一次。如果要重置值，则必须销毁 mpmovieplayercontroller 实例并创建一个新实例。

这非常令人失望，我会错吗？如果我是的话，我会喜欢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:55:17.800

`currentPlaybackTime`在重新开始播放之前更改您的代码以设置。请注意，初始化这些属性的顺序很重要。

```
[...]
mplayer.initialPlaybackTime = 10.0;
mplayer.endPlaybackTime = 30.0;
mplayer.currentPlaybackTime = 10.0;
[mplayer play]; 
```

# iphone - NSLog 在 iPhone 上调试时将 unicode 字符输出为垃圾

> ID：10227110
> 
> 赞同：16
> 
> 时间：2012-04-19T11:33:01.030
> 
> 标签：iphone, objective-c, ios, xcode, nsstring

**编辑：** NSLog 输出在模拟器中运行良好，但在连接到真实设备时不起作用。它似乎是一个错误——http: [//openradar.appspot.com/11148883](http://openradar.appspot.com/11148883)。也碰巧它与LLDB有关，将Xcode切换到GDB可以解决问题。JetBrain 的 AppCode 也可以，它与 LLDB 配合得很好。

* * *

我在应用程序中有一堆 unicode 字符串，如果我尝试使用**NSLog(@"%@", aString)**之类的东西输出这些字符串中的任何一个，那么字符串中的所有 ASCII 字符都会被打印出来，但所有的西里尔字母字母会被弄乱，所以而不是

```
newLocation: coordinate:60.019584,30.284954 'Удельная' 
```

我越来越：

```
newLocation: coordinate:60.019584,30.284954 '–ü–æ–∫–ª–æ–Ω–Ω–æ–≥–æ—Ä—Å–∫–∞—è' 
```

使用这种输出进行任何调试都非常困难。而且因为该应用程序仅针对俄罗斯市场，所以我不能只更改语言环境并使用英文字符串。

所以我想知道是否有任何方法可以使 NSLog 与 unicode 字符一起工作？而且我只在寻找某种**单线解决方案**，我知道有一些方法可以编写半页代码并输出 unicode 字符，但我正在寻找更短的东西。理想情况下，我正在寻找一些 NSString 的方法，它可以使它全部工作。例如

```
NSLog(@"%@", [aString someThingThatMakesUnicodeWorkWithXcodeConsole]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:52:13.513

是的，显然您可以创建一个包含并输出西里尔字母的字符串。当我学习Objective-C时，一开始我也遇到了同样的问题（我也在使用俄语单词和类似的东西）。所以解决方案是将字符串转换为其他格式，如下所示：

```
NSString *string = [NSString stringWithCString:"Привет, как дела?" encoding:4];
NSLog(@"%@", string); 
```

或者

```
NSString *string = [NSString stringWithUTF8String:"Этот вариант короче!"];
NSLog(@"%@", string); 
```

希望对你有帮助！

PS 这意味着您需要将您的字符串创建为 C 样式字符串，并将其编码参数设置为 4(UTF-8)。您可以在 NSString 中查看 NSStringEncoding 文档中的所有可用参数列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T12:19:14.200

据我所知，它与某些 Xcode 版本上的 NSLog() 和 LLDB 有关。尝试以下解决方案之一：

*   检查登录 Xcode Organizer >> 设备 >> 你的设备 >> 控制台。
*   如果您使用后者，请使用 GDB 而不是 LLDB 作为调试器。这可以从模式选项中更改。请参考下面“cocos2d man”评论中的步骤。
*   升级到 Xcode 4.3.2。有人说它解决了这个问题，但我自己还没有证实这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:37:52.290

尝试将其转换为 UTF8 字符串。

```
NSString *str = [aString UTF8String]
 NSLog(@"%@", str); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:35:40.477

试着把它像`NSLog(@"%@", aString);`

**编辑 ：**

您可以将其转换为 UTF8 字符串。这可以让你度过难关。

```
NSString *str = [aString UTF8String]; 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-07T07:34:24.993

尝试这个。这个对我有用。

```
NSLog(@"%@", [NSString stringWithCString:[[places description] cStringUsingEncoding:NSASCIIStringEncoding] encoding:NSNonLossyASCIIStringEncoding]); 
```

# android - 如何以编程方式生成的画廊添加到选项卡布局？

> ID：10227115
> 
> 赞同：0
> 
> 时间：2012-04-19T11:33:28.270
> 
> 标签：android, android-layout, tabs

我编写了一个在运行时生成图库的方法。

```
private Gallery createGallery(ImageAdapter imageAdapter) {

    Gallery sampleGallery = new Gallery(getApplicationContext());
    sampleGallery.setLayoutParams(new ViewGroup.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.WRAP_CONTENT));
    sampleGallery.setGravity(Gravity.FILL_VERTICAL);
    sampleGallery.setSpacing(5);
    sampleGallery.setAdapter(imageAdapter);
    sampleGallery.setSelection(1);
    return sampleGallery;

} 
```

然后我创建了一个厨房并尝试将其设置为选项卡布局。

```
final TabHost mTabHost = (TabHost) findViewById(R.id.tabHost);
    mTabHost.setup();
    Gallery tabGallery = createGallery(brkingNewAdapter); // my image adapter
    tabGallery.setId(R.id.gallery_1);
    mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator("TAB 1")
            .setContent(R.id.gallery_1)); 
```

**R.id.gallery_1**定义为[此处](https://stackoverflow.com/questions/3216294/android-programatically-add-id-to-r-id)提及的内容。

我得到一个例外如下。

> 无法创建选项卡内容，因为找不到 ID 为 2130968576 的视图

对此有什么帮助吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:04:05.980

你应该看看[TabContentFactory](http://developer.android.com/reference/android/widget/TabHost.TabContentFactory.html)。

您的解决方案是在方法中实现`TabContentFactory`并返回`Gallery`实例并在.`createTabContent``setContent(TabHost.TabContentFactory contentFactory)``addTab`

```
class GalleryContentFactory implements TabContentFactory{
    private ImageAdapter imageAdapter;
    public GalleryContentFactory(ImageAdapter imageAdapter){
        this.imageAdapter = imageAdapter;
    }
    public View createTabContent(String tag){
        Gallery sampleGallery = new Gallery(getApplicationContext());
        sampleGallery.setLayoutParams(new ViewGroup.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.WRAP_CONTENT));
        sampleGallery.setGravity(Gravity.FILL_VERTICAL);
        sampleGallery.setSpacing(5);
        sampleGallery.setAdapter(imageAdapter);
        sampleGallery.setSelection(1);
        return sampleGallery;
    }
} 
```

并添加到选项卡：

```
GalleryContentFactory galleryFactory = new GalleryContentFactory(brkingNewAdapter);
mTabHost.addTab(mTabHost.newTabSpec("tab_test2").setIndicator("TAB 2")
            .setContent(galleryFactory)); 
```

# javascript - 在 iframe 中调用父页面 JavaScript 函数

> ID：10227118
> 
> 赞同：3
> 
> 时间：2012-04-19T11:33:36.970
> 
> 标签：javascript, jquery, html

我在我的应用程序中使用 iFrame。让我在这里举个例子。我有主页作为

```
<html>
  <head>
    <script src='jquery.js'></script>
    <script>
      function TestFunction()
      {
        var FirstName = $("#first_name").val();
        alert(FirstName);
      }
    </script>
  <head>
  <body>
    Enter First Name: <input type='text' size='20' id='first_name'><br />
    <input type='button' value='Cilck' onclick='TestFunction();'><br />
    <iframe id='test_iframe' src='test_iframe.htm' height='200' width='200'>
    </iframe>
  </body>
</html> 
```

...这可以很好地提醒文本框中输入的任何内容

但是是否可以在 iframe 中调用相同的函数来提醒父页面文本框中存在的值？

假设 test_iframe.htm 代码是这样的

```
<html>
  <head>
  <script src='jquery.js'></script>
  <script>
     function IframeFunction()
     {
        TestFunction(); // I know this wont work.. just an example
     }
  </script>
  <head>
  <body>
    <input type='button' value='Click' onclick='IframeFunction();'>
  </body>
</html> 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:37:50.250

我相信这可以通过“父母”来完成

```
function IframeFunction() 
{ 
   parent.TestFunction(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:37:56.503

```
<html>
  <head>
  <script src='jquery.js'></script>
  <script>
     function IframeFunction()
     {
       parent.TestFunction();  // or top.TestFunction()
     }
  </script>
  <head>
  <body>
    <input type='button' value='Click' onclick='IframeFunction();'>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:42:04.677

```
<a onclick="parent.abc();" href="#" >Call Me </a> 
```

请参见[Window.Parent](https://developer.mozilla.org/en/DOM/window.parent)

返回对当前窗口或子框架的父级的引用。

如果窗口没有父窗口，则其父属性是对自身的引用。

当一个窗口被加载到 、 或 中时，它的父窗口是包含嵌入窗口的元素的窗口。

这个答案取自[stackoverflow](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function/2161402#2161402)

# magento - magento搜索页面上的项目计数

> ID：10227119
> 
> 赞同：0
> 
> 时间：2012-04-19T11:33:39.127
> 
> 标签：magento

当我们在 magento 中搜索产品时，它会在带有寻呼机的搜索页面上显示结果，但我想在不使用 magento 寻呼机的情况下显示项目计数。

我想要一个自定义代码来显示搜索结果中的项目总数。

如果有人得到答案，请更新我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:01:57.600

use $this->getCollection()->count() in your list.phtml file and it counts total products found in search result.

# gwt - playN资产路径错误如何解决？

> ID：10227126
> 
> 赞同：1
> 
> 时间：2012-04-19T11:33:55.320
> 
> 标签：gwt, playn

运行 playN 项目时出现以下错误。

“找不到文件：/myproject/myproject.nocache.js”

此外，我在浏览器中只看到黑屏。

在 MyProjectHtml.java 文件中，我给出的路径为

"platform.assets().setPathPrefix("myproject/");"

我该如何解决这个问题。我没有找到任何名为“nocache”的文件。

注意：我之前的一个问题的答案中的评论会很有用：[如何在本地以生产模式运行我的 playN 游戏？](https://stackoverflow.com/questions/9976427/how-to-run-my-playn-game-in-production-mode-locally)

谢谢你。

已解决：war 下的资源文件夹仅使用 eclipse compile 生成。我创建了一个源文件夹 src/main/resources 并将我的所有资源包移动到它。在它位于 src/main/java 之前。现在它起作用了..！我可以从终端编译并运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:02:57.163

您是通过**Maven** ( `mvn test -Ptest-html`) 还是作为**GWT 项目**( `mvn gwt:run`) 运行项目？

如果您的路径设置正确，第一种情况应该可以工作，但是将它作为 GWT 项目运行对我来说总是失败。

我还建议执行`mvn clean install`, 并查看`.war`文件中包含哪些资源。你的`.nocache.js`文件应该在那里，如果没有，你可能有一个更大的问题（不正确的项目设置）。

## **更新：**

看到您的文件中没有`.nocache.js`文件，您`war`的 Maven 配置有问题。查看是否在您的插件标签中将以下配置添加到您的 HTML pom 中：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <executions>
        <execution>
            <phase>prepare-package</phase>
            <goals>
                <goal>compile</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

`.nocache.js`无论哪种方式，在您在`war`文件中看到 之前，您的 HTML 版本都不会运行。使用新的 PlayN 项目仔细检查您的 Maven 配置，看看哪里有差异。

# asp.net - 处理 WebFaultException 以在标签上显示错误消息

> ID：10227129
> 
> 赞同：0
> 
> 时间：2012-04-19T11:34:06.913
> 
> 标签：asp.net, wcf, rest

在我的 WCF REST 服务中，有一个方法 GetUser(username)，它将

```
throw new WebFaultException<string>("there is no this user", HttpStatusCode.NotFound); 
```

在我的 asp.net 客户端中，我想捕获上述异常并在标签上显示“没有此用户”。但是当我尝试如下编码时：

```
MyServiceClient client = new MyServiceClient;
try
{
    client.GetUser(username);
}
catch (Exception ex)
{
    Label.Text = ex.Message;
} 
```

结果显示消息“NotFound”而不是“没有此用户”。

我该怎么做才能显示“没有此用户”的消息？

* * *

20/4
在我的 REST 服务中：

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "{username}")]
void GetUser(username); 
```

.svc 类：

```
 public void GetUser(username)
    {
        try
        {
            Membership.GetUser(username);
            WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.OK;
        }
        catch (Exception ex)
        {
            throw new WebFaultException<string>("there is no this user", HttpStatusCode.NotFound);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:50:21.210

如果您查看文档，很明显您应该显示.`Detail`而不是`Message`. 你的行应该是：

```
MyServiceClient client = new MyServiceClient;
try
{
    client.GetUser(username);
}
catch (FaultException<string> ex)
{
    var webFaultException = ex as WebFaultException<string>;
    if (webFaultException == null)
    {
       // this shouldn't happen, so bubble-up the error (or wrap it in another exception so you know that it's explicitly failed here.
       rethrow;
    }
    else
    {
      Label.Text = webFaultException.Detail;
    }
} 
```

**编辑：更改异常类型**

此外，您应该捕获`WebFaultException<string>`您感兴趣的特定异常 ( )，而不是碰巧抛出的任何旧异常。特别是，因为你只有`Detail`on`WebFaultException<string>`类型，它不是 on `Exception`。

请参阅[WebFaultException 类](http://msdn.microsoft.com/en-us/library/dd989924.aspx)

# asp.net - 在 MVC3 中返回文件的操作

> ID：10227130
> 
> 赞同：1
> 
> 时间：2012-04-19T11:34:08.967
> 
> 标签：asp.net, asp.net-mvc, vb.net, asp.net-mvc-3, jquery

所以，我没有得到我仍然应该在操作中下载文件的内容。

所以，这是我拥有的控制器。一切似乎都很好，除了我从来没有收到任何文件下载客户端。

```
 <HttpPost()>
    Function meetingCP(idCont As Integer, idOpp As Integer, schedule As String) As FileResult
        Dim id As Integer = 0
        Dim iCSFile As StringBuilder = New StringBuilder()
        Dim startDate As Date = schedule
        Dim endDate As Date = startDate.AddMinutes(30)

        iCSFile.AppendLine("BEGIN:VCALENDAR")
        iCSFile.AppendLine("VERSION:2.0")
        iCSFile.AppendLine("METHOD:REQUEST")

      [bla bla bla]

        iCSFile.AppendLine("DESCRIPTION:Reminder")
        iCSFile.AppendLine("END:VALARM")
        iCSFile.AppendLine("END:VEVENT")
        iCSFile.AppendLine("END:VCALENDAR")

        Dim StreamWriter As StreamWriter = New StreamWriter("C:\MvcApplication4\MvcApplication4\Content\test.ics")
        StreamWriter.WriteLine(iCSFile)
        StreamWriter.Close()

        Return File(iCSFile.ToString, "text/plain", "MeetingRequest.ics")
        'Return File(Encoding.UTF8.GetBytes(iCSFile.ToString()), "text/plain", "MeetingRequest.ics")
    End Function 
```

这个动作是由ajax调用的。这可能是问题吗？

```
function meetCP(idCont, idOpp) {
    var meetCPSelect = ("#meettime" + idCont);
    var dateTime = $(meetCPSelect).val();
    $.ajax({
        url: '@Url.Action("meetingCP")',
        type: 'POST',
        data: { idCont: idCont, idOpp: idOpp, schedule: dateTime },
        success: function (result) { }
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:41:55.187

我不知道，但看起来您正在动态创建文件？如果您有文件的路径，则可以使用与此类似的内容来下载文件。这对我有用：

```
public ActionResult DownloadFile(string path, string fileName) {
    FileContentResult result = null;
    var file = path + fileName;
    if (System.IO.File.Exists(file)) {
        result = new FileContentResult(System.IO.File.ReadAllBytes(file), "application/pdf");
    }
    return result;
} 
```

在您看来，您只需要这样的东西：

```
@Html.ActionLink("Your Filename", "DownloadFile", "YourController", new { path = @item.FileLocation, fileName = @item.CurrentFileName }, new { target = "blank" }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:39:17.347

您不能使用 AJAX 从主 HTML 响应下载文件。

一种方法是使用不可见的 IFrame，使 ajax 调用刷新 iframe 并将 IFrame 的 src 设置为您要发送的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:45:11.713

选项1：使用内置的ActionResults，例如FilePathResult、FileStreamResult、FileContentResult（[http://weblogs.asp.net/rajbk/archive/2010/05/03/actionresult-types-in-mvc2.aspx](http://weblogs.asp.net/rajbk/archive/2010/05/03/actionresult-types-in-mvc2.aspx)）

选项 2：构建自定义 ActionResult 以返回您的 excel 文件（例如：[http](http://www.dotnetcurry.com/ShowArticle.aspx?ID=484&AspxAutoDetectCookieSupport=1) ://www.dotnetcurry.com/ShowArticle.aspx?ID=484&AspxAutoDetectCookieSupport=1 ）

[ASP.NET MVC 如何进行返回文件的操作？](https://stackoverflow.com/questions/3935225/asp-net-mvc-how-to-make-an-action-that-return-a-file)

# php - php：将 10 次相同符号（空格）分配给变量的最佳方法

> ID：10227133
> 
> 赞同：3
> 
> 时间：2012-04-19T11:34:29.807
> 
> 标签：php, string

我们有

```
$symb="_";

$num=10; 
```

我们想要`$ten_symbs`准确`"__________"; // ten symbols "_".` 地将十个“_”分配给最快和/或最好的方法是`$ten_symbs`什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T11:35:46.007

[str_repeat()](http://php.net/manual/en/function.str-repeat.php)：

```
$symbol = '_';
$num    = 10;
echo str_repeat($symbol, $num); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T11:36:14.517

您可以使用[str_repeat](http://php.net/manual/en/function.str-repeat.php)作为：

```
$ten_symbs = str_repeat($symb, $num); 
```

你也可以这样做：

```
$ten_symbs = str_pad('',$num,$symb); 
```

但第一种选择更清洁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T11:36:07.920

在这里寻找 str_repeat()：[http ://www.php.net/manual/de/function.str-repeat.php](http://www.php.net/manual/de/function.str-repeat.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:36:40.010

```
$ten_symbs = '';
for($i=0;$i<$num;$i++) {
   $ten_symbs .= $symb;
} 
```

# jquery - 页面内容由 load() 加载后，页面未调用 Jquery 函数

> ID：10227135
> 
> 赞同：0
> 
> 时间：2012-04-19T11:34:37.343
> 
> 标签：jquery, function, load

我有这个有标签的页面。例如，选项卡 1 中的内容作为默认内容加载。当我单击选项卡 1 时，它会加载如下内容：

```
 $('.options').load('index.php?viewfile='+filee+' .optionsPane', function(data) {
      //inside here i initialized tinymce because the page has tinymce contents.
} 
```

在该选项卡 1 中有一个表格。我有一个 js 页面链接到包含所有功能的页面。我有这个代码。

```
 $(document).ready(function(){
      $('.bottommernuform').submit(function () {
        var idval = $(this).attr('id').toString();
        var idvalarr = idval.split("-");
        var region_name= idvalarr[idvalarr.length-1];
        var publish = $('#regionstate-'+region_name).val();
        var swap = $('#swapregion-'+region_name).val();
        var page_url = $('#page-'+region_name).val();
        $.post("index.php", { publish:publish , swap:swap, region_name:region_name}, 
                            function(data) {
                                //alert(data);

                        });

 return false;
}); 
```

当我在完全加载页面后单击表单提交按钮时，这非常有效。但是，如果我单击从 load() 加载内容的选项卡 1，`$('.bottommernuform').submit()`则不会被调用 .. 它会刷新整个页面。在单击选项卡 1 后，当我尝试将内容保存在 tinymce 中时，它也给了我一个错误。我怎样才能解决这个问题。请给我一个解决方案。非常感谢帮助！});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:37:27.707

这里有两个可能的问题。首先，加载内容`.load()`不会触发`$(document).ready()`，因此在`$(document).ready()`加载新代码后，您的任何代码都不会运行。

其次，当您使用静态事件处理时，例如：

```
$('.bottommernuform').submit(fn) 
```

此事件处理程序仅对`'.bottommernuform'`首次安装事件处理程序时存在的对象有效。这意味着它将不会对将来加载的内容进行操作。

如果您正在动态加载内容，并且您希望以前安装的事件处理程序能够处理该新内容，那么您需要使用委托事件处理，如下所示：

```
$(staticParentSelector).on('submit', '.bottommernuform', fn); 
```

此 jQuery 对象中的选择器必须是动态加载`.bottommernuform`对象的静态父对象（例如，在您的`document.ready()`代码运行时存在并且是所有对象的父`.bottommernuform`对象）。为获得最佳性能，它应该是尽可能接近目标且未动态加载的父级。

另外，请记住，要防止提交操作的默认行为，您应该`return(false)`从提交事件处理程序中。

注意：`.on()`在 v1.7 中被添加到 jQuery。对于 v1.7 之前的版本，您可以使用`.delegate()`which 类似地工作，但参数的顺序不同。

# ruby-on-rails - 使用omniauth-facebook 将sign_in_and_redirect 重定向到特定语言

> ID：10227136
> 
> 赞同：0
> 
> 时间：2012-04-19T11:34:42.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

我正在使用`omniauth-facebook`带有 rails 3.2 的 gem 并设计 2.0。

我有一个网站，有 2 种语言，英语和西班牙语。

[http://localhost:3000/en](http://localhost:3000/en) http://localhost:3000/es

gem 适用于**英语用户**，因为在**omniauth_callbacks_controller.rb**中重定向转到`http://localhost:3000/en`

这是我的 facebook 的**omniauth_callbacks_controller.rb**：

```
def facebook
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)
    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end 
```

然后问题是西班牙用户。如果他们使用`http://localhost:3000/es`回调中的重定向转到`http://localhost:3000/en`

我希望从回调重定向到使用该用户的特定语言。

**我该怎么做？**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T02:06:35.570

我有类似的问题，并没有找到更改回调 url 的方法，但我可以在回调发生时在方法中设置语言环境。

原始网址（具有原始正确的语言环境）存储在`request.env['omniauth.origin']`

因此，在`facebook`方法中从原始 url 中选择语言环境，它与域部分后面的两个字母类似。

我在方法的开头添加了`facebook`：

```
I18n.locale = exctract_locale_from_url(request.env['omniauth.origin']) if request.env['omniauth.origin'] 
```

这`exctract_locale_from_url`是一个可怕的正则表达式:)

```
def exctract_locale_from_url(url)
  url[/^([^\/]*\/\/)?[^\/]+\/(\w{2})(\/.*)?/,2]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:00:11.240

我认为您必须将您的omniauth 配置提取到yaml 文件并将“#{i18n.locale}”插入到回调链接的末尾。

# jquery - 如何关闭 jquery 对话框

> ID：10227138
> 
> 赞同：1
> 
> 时间：2012-04-19T11:35:08.987
> 
> 标签：jquery, jquery-ui, jquery-dialog

这是我在对话框中打开页面 url 的代码。现在我想从实际上在对话框内的页面 default4.aspx 关闭对话框..

在 Default4.aspx 中有按钮名称关闭：现在我想关闭对话框并希望将一些值传递给关闭函数：

```
 close: function(event,ui){
here:
  } 
```

我使用的代码：

```
 $("#pop").load('Default4.aspx').dialog({
             height: 625,
             width: 600,
             modal:true,
             close: function(event,ui){

             //alert(event)
             //Check for Ok or cancle
             // if ok then do something

            // alert(ui);

             }
             }); 
```

任何想法伙计们我怎么能这样做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:14:56.977

只需调用`$("#pop").dialog("close");`Default4.aspx

对于传递参数，您可以使用输入隐藏元素

```
$("#hidden").val("my param value");   
<...> 
var param = $("#hidden").val(); 
```

# javascript - on ie，表达式执行两次

> ID：10227139
> 
> 赞同：-3
> 
> 时间：2012-04-19T11:35:12.840
> 
> 标签：javascript, css, internet-explorer

```
<div style="width:expression(alert('1'));"></div> 
```

如果您在 IE7 中运行此代码，它将执行两次。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:54:07.427

不要使用表达式。表达式解析引擎会经常重新计算它们，以实现最小的上下文变化，包括鼠标移动、每个元素焦点的变化等，从而引入疯狂的开销。对于发生这种情况的每个点也没有明确的文档，因此您通常无法提前计划比基本计算稍微复杂的任何事情。最后，微软将它们标记为已弃用，因此它们甚至无法在未来的 IE 版本中运行。

# python - NameError：全局名称“execfile”未定义尝试在 Google App Engine Launcher 上运行应用程序

> ID：10227142
> 
> 赞同：51
> 
> 时间：2012-04-19T11:35:19.107
> 
> 标签：python, google-app-engine

![谷歌应用引擎启动器](../Images/608a897469edbf1ac2ce93d248049a62.png)

我在 Windows 中收到此错误，我有 3.2 和 2.7 版本的 python。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-19T11:36:35.533

![解决方案](../Images/e45cd166fc5cb071ce8012bdd87e1452.png)

您只需要转到编辑/首选项并指定正确版本的 python 路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T22:51:08.237

我遇到了同样的问题，因为我的系统中安装了 python 27 和 34。您只需将路径从 python 34 更改为 27

# windows - 使用 cmd.exe 将长文件名转换为短文件名 (8.3)

> ID：10227144
> 
> 赞同：31
> 
> 时间：2012-04-19T11:35:37.333
> 
> 标签：windows, batch-file, command-line, long-filenames, short-filenames

我正在尝试在 Windows 上将长文件名转换为短文件名 (8.3)。

带有命令行参数的批处理文件按预期工作：

*短.bat*：

```
@echo OFF
echo %~s1 
```

调用`short.bat C:\Documents and Settings\User\NTUSER.DAT`返回`C:\DOCUM~1\USER\NTUSER.DAT`

但是，我不喜欢为此添加额外的 .bat 文件。我宁愿`cmd.exe`用 ruby​​ 脚本中的整个命令调用。我怎样才能做到这一点？

作为中间步骤，我尝试对批处理文件中的路径进行硬编码，但这不起作用：

*短1.bat*：

```
@echo OFF
SET filename="C:\Documents and Settings\User\NTUSER.DAT"
echo %filename%
echo %~sfilename% 
```

`echo %filename%`有效，但`echo %~sfilename%`出现以下错误：

```
The following usage of the path operator in batch-parameter
substitution is invalid: %~sfilename%

For valid formats type CALL /? or FOR /? 
```

如果*short1.bat*有效，我怎样才能将其转换为可以调用的单线`cmd.exe \c ...`？

还有另一个问题（[如何获取 DOS 路径而不是 Windows 路径](https://stackoverflow.com/questions/4051088)），但是该问题专门询问当前目录的路径。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-19T12:08:20.500

```
cmd /c for %A in ("C:\Documents and Settings\User\NTUSER.DAT") do @echo %~sA 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T12:03:23.467

将 filename.txt 替换为要转换为 8.3 的文件名

```
dir /x filename.txt 
```

然后，您必须使用空格作为分隔符（正则表达式中的 \s）分割结果。然后带有 ~ 的值是您的短文件名。如果您的文件名开头很短，那么您将找不到包含 ~ 的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-10T10:50:31.350

这是一个在注册表中读取“appdata\local”文件夹位置并将其转换为短路径的示例：

```
cls
@echo off
cd /d "%~dp0"
chcp 65001 >nul

for /f "skip=1" %%a in ('"wmic useraccount where name='%USERNAME%' get sid"') do (
    for %%b in (%%a) do set current_SID=%%b
)
set current_username=%USERNAME%
set current_userprofile=%USERPROFILE%

set key_to_read=HKEY_USERS\%current_SID%\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders
set value_to_read=Local AppData
rem If value_to_read contains ? space(s) set tokens to 2+?
for /f "usebackq eol= tokens=3,* delims= " %%a in (`reg query "%key_to_read%" /v "%value_to_read%" 2^>nul ^| find "%value_to_read%"`) do (
    set value_type=%%a
    set data_read=%%b
)
set data_read=%data_read:USERPROFILE=current_userprofile%
call set "data_read=%data_read%"
set current_local_appdata=%data_read%

set current_local_appdata_temp=%current_local_appdata%\Temp
echo %current_local_appdata_temp%

for %%a in ("%current_local_appdata_temp%") do set "current_local_appdata_temp_short=%%~sa"
echo %current_local_appdata_temp_short%

pause
exit 
```

# javascript - 如何在没有浏览器重定向的情况下在幕后执行 jQuery 获取？

> ID：10227154
> 
> 赞同：0
> 
> 时间：2012-04-19T11:36:09.780
> 
> 标签：javascript, jquery

真的很简单，我只想访问一个网址，但我不希望浏览器刷新我认为这会起作用....

```
$.get($('#LanguageSelection').val()); 
```

但这会导致我的浏览器刷新:-(我只想点击 url 就是这样......

# android - Android：UI Thread 的更新非常快

> ID：10227158
> 
> 赞同：4
> 
> 时间：2012-04-19T11:36:19.127
> 
> 标签：android, multithreading, android-imageview, android-ui

我有一个逐帧播放视频的应用程序。这一切都在工作。但是它也需要播放音频，当音频和视频同时运行时，似乎视频落后于音频，
我用来显示视频帧的逻辑如下

```
 ProcessVideoThread(){

  // Read the data from socket, 

  // decode it : this is going to be in side libvpx library, after decoding i am getting raw     
  // bitmap data 

  // After getting raw bitmap data, use some mechanism to update the image, 
  // here i tried runOnUIThread, handler but 

 } 
```

现在发生了什么，似乎 UI 线程更新图像的机会很晚，即 libvpx 需要大约 30 毫秒来解码图像并通过 runOnUIThread，它需要 40 多毫秒来更新图像，但在 UI 线程内我更新它。
谁能告诉我，我怎样才能减少在 UI 线程上更新图像的延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:31:56.910

看起来很有趣。如果我处于您的情况，我会检查以下方法。

1）尝试使用音频和视频线程之间的同步。

2）尝试减少音频滞后的视频帧并减少视频滞后的音频频率。

您可以通过以下方式执行相同操作。

```
int i;
if(i%2==0)
ShowFrame();
else
i++ 
```

这样做会立即将视频速度从 24 降低到 12。因此音频现在将与视频匹配。但是正如我已经向您提到的那样，质量将受到威胁。这种方法称为频率缩放。广泛用于同步音频和视频的方法。

请参阅以下内容以获得清晰的理解以及同步音频和视频的方式。这与 FFMPEG 有关。我不知道您将能够使用多少，但它肯定会帮助您获得一些想法。

[http://dranger.com/ffmpeg/tutorial05.html](http://dranger.com/ffmpeg/tutorial05.html)

祝一切顺利..

# google-maps-api-3 - 有没有办法使用谷歌地理编码器获取特定城市内街道的纬度？

> ID：10227159
> 
> 赞同：1
> 
> 时间：2012-04-19T11:36:25.363
> 
> 标签：google-maps-api-3, geocoding, google-geocoder

我正在编写一个应用程序，它需要在一个城市的街道上放置一个标记。我添加了一个用于搜索这条特定街道的输入（以简化过程，而不必手动拖动和定位街道）。

因此，输入“[Street name], [City]”可以正常工作并完美定位街道。然而，只有“[街道名称]”的中心地图位于街道上，但位于另一个城市。

有没有办法告诉地理编码器在特定城市进行搜索？

最后我可以手动将“，[City]”添加到请求中，但我想知道是否可以通过API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:50:37.113

您可以告诉地理编码器偏向于特定区域： [https ://developers.google.com/maps/documentation/javascript/geocoding#GeocodingViewports](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingViewports)

注意：这并非完全万无一失：它有*偏见*，它不*限制*。所以如果你在一个小村庄里寻找“唐宁街”，它很可能会在伦敦找到唐宁街。

唯一万无一失的办法就是强行进城地址。

# javascript - 加载页面时根据cookie值隐藏div

> ID：10227160
> 
> 赞同：0
> 
> 时间：2012-04-19T11:36:31.633
> 
> 标签：javascript, jquery, asp.net, html

我创建了一个 div 并使用 jquery 来隐藏和显示 div。当用户单击隐藏时，我想隐藏 div 5 分钟，直到用户再次加载页面。我已将状态（无论是否隐藏）保存在 cookie 中。当用户在 5 分钟内第二次加载页面时，应该隐藏 div。我已经尝试了下面的代码，但它不起作用。有人可以帮我吗？

```
<script>
        $(document).ready(function () {
            if (getCookie(hidden) === "yes") {
                $("#divAlert").hide();
                if ($("#Hide").is(":visible")) {
                    $("#Hide").css("visibility", "hidden");
                }

                $("#Show").css("visibility", "visible");
            }

            $("#Hide").click(function () {
                $("#divAlert").hide();
                if ($("#Hide").is(":visible")) {
                    $("#Hide").css("visibility", "hidden");
                }
                setCookie();
                $("#Show").css("visibility", "visible");

            });

            $("#Show").click(function () {
                $("#divAlert").show();

                $("#Hide").css("visibility", "visible");

                if ($("#Show").is(":visible")) {
                    $("#Show").css("visibility", "hidden");
                }
            });           
        });

        function setCookie() {
            var currentDate = new Date();
            document.cookie = "hidden=yes;exppires=" + currentDate.getMinutes() + 1;
        }

        function getCookie(cookiename) {
            var results = document.cookie.match('(^|;) ?' + cookie_name + '=([^;]*)(;|$)');

            if (results)
                return (unescape(results[2]));
            else
                return null;
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:57:34.907

假设您的`getCookie()`和`setCookie()`功能正常工作，这行代码：

```
getCookie(hidden); 
```

应该：

```
getCookie("hidden"); 
```

如果您查看 javascript 错误控制台，您会立即看到此问题，因为这可能是脚本错误。

您的其余代码可以像这样简化：

```
 $(document).ready(function () {
        if (getCookie(hidden) === "yes") {
            $("#divAlert").hide();
            $("#Hide").css("visibility", "hidden");
            $("#Show").css("visibility", "visible");
        }

        $("#Hide").click(function () {
            $("#divAlert").hide();
            $(this).css("visibility", "hidden");
            $("#Show").css("visibility", "visible");
            setCookie();

        });

        $("#Show").click(function () {
            $("#divAlert").show();
            $(this).css("visibility", "hidden");
            $("#Hide").css("visibility", "visible");
        });           
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-03T00:27:01.747

在`getCookie(cookiename)`函数中，它引用`cookie_name`which should be `cookiename`。

# java - java - 服务器接受大量持久的客户端连接

> ID：10227169
> 
> 赞同：1
> 
> 时间：2012-04-19T11:36:41.407
> 
> 标签：java, multithreading, serversocket

我有一个小型服务器，可以接受来自客户端的大量长期连接。在我目前的情况下，服务器为每个接受的连接创建一个新线程，该线程侦听传入数据并返回适当的响应。必须尽快处理来自客户端的传入数据。

当服务器有大约 1000~10000 个连接时，这种情况不是最佳的。我找到了一个使用连接器类来管理不同 SocketChannel 的示例。

[连接器示例](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/example/Ping.java)

但我认为这不适用于我的情况。有人对如何解决这个问题有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:39:56.037

我会建议你使用像 Netty 或 Grizzly 这样的 NIO 框架。它们为您提供了一种简单的方法来处理数千个连接并用有限数量的事件线程威胁它们。

# javascript - Jquery UI 自动完成组合框按钮点击事件

> ID：10227171
> 
> 赞同：15
> 
> 时间：2012-04-19T11:36:43.147
> 
> 标签：javascript, jquery, jquery-ui, combobox, jquery-autocomplete

[使用jquery ui 自动完成创建组合框时，](http://jqueryui.com/demos/autocomplete/#combobox)我遇到了奇怪的行为。每当我单击滚动条滚动浏览结果列表，然后单击我的组合框按钮关闭结果时，结果列表就会关闭，然后再次打开。我希望它关闭菜单。

**复制步骤**

1.  [打开 jsfiddle 演示](http://jsfiddle.net/c7xKU/4/)
2.  在自动完成中输入“i”或点击下拉按钮。
3.  单击垂直滚动以滚动结果
4.  点击下拉按钮

**创建按钮的脚本**

```
 this.button = $("<button type='button'>&nbsp;</button>")
    .attr({ "tabIndex": -1, "title": "Show all items" })
    .insertAfter(input)
    .button({
         icons: {
             primary: "ui-icon-triangle-1-s"
         },
         text: false
    })
    .removeClass("ui-corner-all")
    .addClass("ui-corner-right ui-button-icon")
    .click(function () {

        // when i put breakpoint here, and my focus is not on input, 
        // then this if steatment is false????

        if (input.autocomplete("widget").is(":visible")) {
            input.autocomplete("close");
            return;
        }

        // work around a bug (likely same cause as #5265)
        $(this).blur();

        // pass empty string as value to search for, displaying all results
        input.autocomplete("search", "");
        input.focus();
}); 
```

**CSS（强制长结果菜单滚动）**

```
.ui-autocomplete {
    max-height: 100px;
    overflow-y: auto;
    /* prevent horizontal scrollbar */
    overflow-x: hidden;
    /* add padding to account for vertical scrollbar */
    padding-right: 20px;
}
/* IE 6 doesn't support max-height
 * we use height instead, but this forces the menu to always be this tall
 */
* html .ui-autocomplete {
    height: 100px;
} 
```

即使焦点转移到小部件本身而不是输入元素，我的解决方案也可能关闭小部件？

任何想法如何修改此代码使其行为如此？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:41:56.640

基于自动完成小部件的各种单击和鼠标事件的问题，我想出了这个：**[jsFiddle example](http://jsfiddle.net/j08691/c7xKU/8/)**。

jQuery：

```
var input = $('#txtComplete');

var data = [];
var isOpen = false;

function _init() {
    for (var idx = 0; idx <= 100; idx++) {
        data.push('item: ' + idx);
    };
    input.autocomplete({
        source: data,
        minLength: 0,
        open: function(event, ui) {
            isOpen = true;
        },
        select: function(event, ui) {
            isOpen = false;
        }
    });
}

function afterInit() {
    var button = $("<button type='button'>&nbsp;</button>").attr("tabIndex", -1).attr("title", "Show all items").insertAfter(input).button({
        icons: {
            primary: "ui-icon-triangle-1-s"
        },
        text: false
    }).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function(event) {
        input.focus();
        if (isOpen) {
            input.autocomplete("close");
            isOpen = false;
        } else {
            input.autocomplete("search", "");
            event.stopImmediatePropagation();
        }
    });
}
$(window).click(function() {
    input.autocomplete("close");
    isOpen = false;
});
$(function() {
    _init();
    afterInit();
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T00:51:09.423

问题是由于 jquery ui 自动完成中的解决方法。有一个 mousedown 事件设置可以在某些条件下关闭菜单。在其中一种情况下，它会检查引发 mousedown 的项目是否是自动完成小部件的一部分。如果没有，它会关闭菜单。由于您正在处理组合框行为并且您的按钮不是自动完成小部件的一部分，因此单击按钮会因为此事件而关闭菜单。

[您可以从github 上](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js)的自动完成源代码的第 205 行开始看到违规情况及其原因。在 jquery ui 论坛上提出这个问题可能是值得的，因为他们的组合框演示也有这个错误。

**更新**

*此替换事件基于 jquery-ui 1.8.18。此事件已发生变化，并且很可能会再次发生变化。如果您走这条路，您可能需要在每个版本中手动更新此代码。*

[如果在创建自动完成（ jsfiddle 演示](http://jsfiddle.net/c7xKU/16/)`mousedown`）后运行以下命令单击了组合按钮，则可以修补事件以不关闭菜单。

```
var input = $('#combotextbox').autocomplete(/*options*/);
input.data('autocomplete').menu.element.unbind('mousedown').mousedown(function(event) {
        var self = input.data('autocomplete');
        event.preventDefault();
        // clicking on the scrollbar causes focus to shift to the body
        // but we can't detect a mouseup or a click immediately afterward
        // so we have to track the next mousedown and close the menu if
        // the user clicks somewhere outside of the autocomplete
        var menuElement = self.menu.element[0];
        if (!$(event.target).closest(".ui-menu-item").length) {
            setTimeout(function() {
                $(document).one('mousedown', function(event) {
                    var t = $(event.target);
                    if (event.target !== self.element[0] && event.target !== menuElement && !$.ui.contains(menuElement, event.target) && !t.hasClass('ui-combo-trigger') && !t.parent().hasClass('ui-combo-trigger')) {
                        self.close();
                    }
                });
            }, 1);
        }

        // use another timeout to make sure the blur-event-handler on the input was already triggered
        setTimeout(function() {
            clearTimeout(self.closing);
        }, 13);
    }); 
```

这将删除当前的 mousedown 事件，然后将其添加回来并添加检查以查看触发事件的元素或其父元素（单击按钮或单击按钮内的 ui-icon）是否具有 class `ui-combo-trigger`。

创建按钮的代码相对不变。我们只需要添加新类`ui-combo-trigger`。

```
var button = $("<button type='button'>&nbsp;</button>").attr("tabIndex", -1).attr("title", "Show all items").insertAfter(input).button({
        icons: {
            primary: "ui-icon-triangle-1-s"
        },
        text: false
    }).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon ui-combo-trigger").click(function(event) {

        // when i put breakpoint here, and my focus is not on input, 
        // then this if steatment is false????
        if (input.autocomplete("widget").is(":visible")) {
            input.autocomplete("close"); 

            return;
        }

        // work around a bug (likely same cause as #5265)
        $(this).blur();

        // pass empty string as value to search for, displaying all results
        input.autocomplete("search", "");
        input.focus();
        event.stopImmediatePropagation();
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:19:50.450

试试这个[jsfiddle](http://jsfiddle.net/lakshmipriya/c7xKU/7/)。我想它会帮助你。

```
var input = $('#txtComplete');

var data = [];
var openCheck = false;

function _init() {
    for (var idx = 0; idx <= 100; idx++) {
        data.push('item: ' + idx);
    };
    input.autocomplete({
        source: data,
        minLength: 0,
        open: function(event, ui) {
            openCheck = true;
        },
        select: function(event, ui) {
            openCheck = false;
        }
    });
}

function afterInit() {
    var button = $("<button type='button'>&nbsp;</button>").attr("tabIndex", -1).attr("title", "Show all items").insertAfter(input).button({
        icons: {
            primary: "ui-icon-triangle-1-s"
        },
        text: false
    }).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function(event) {
        if (openCheck) {
            input.autocomplete("close");
            openCheck = false;
        } else {
            input.autocomplete("search", "");
        }
    });
}

$(function() {
    _init();
    afterInit();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T17:12:53.953

布赖恩很好地解释了这个问题。使用 jquery ui 11，您可以执行以下操作：

```
wasOpen = false;
$button
  .mousedown(function() {
     wasOpen = input.autocomplete( "widget" ).is( ":visible" );
    })
   .click(function() {
       input.focus();

        // Close if already visible
        if ( wasOpen ) {
          return;
        } 
```

[请参阅http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)中的示例

# jquery - jQuery 和 XML 的最佳解析方式

> ID：10227180
> 
> 赞同：3
> 
> 时间：2012-04-19T11:37:26.690
> 
> 标签：jquery, xml, parsing

尝试解析来自 Web 服务 vinquery.com 的 XML 结果，通常值在键名之间，例如 hello 但是返回的 XML 是：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<VINquery Version="1.0.0" Report_Type="BASIC" Date="1/19/2012">
    <VIN Number="1ZVFT80N475337065" Status="SUCCESS">
        <Vehicle VINquery_Vehicle_ID="32627" Model_Year="2007" Make="Ford" Model="Mustang" Trim_Level="V6 Deluxe Coupe">
            <Item Key="VINquery_Vehicle_ID" Value="32627" Unit="" />
            <Item Key="Model Year" Value="2007" Unit="" />
            <Item Key="Make" Value="Ford" Unit="" />
            <Item Key="Model" Value="Mustang" Unit="" />
            <Item Key="Trim Level" Value="V6 Deluxe Coupe" Unit="" />
            <Item Key="Manufactured in" Value="UNITED STATES" Unit="" />
            <Item Key="Production Seq. Number" Value="337065" Unit="" />
            <Item Key="Body Style" Value="COUPE 2-DR" Unit="" />
            <Item Key="Engine Type" Value="4.0L V6 SOHC 12V" Unit="" />
            <Item Key="Transmission-short" Value="5A | 5M" Unit="" />
            <Item Key="Transmission-long" Value="5-Speed Automatic | 5-Speed Manual" Unit="" />
            <Item Key="Driveline" Value="RWD" Unit="" />
            <Item Key="Tank" Value="16.00" Unit="gallon" />
            <Item Key="Fuel Economy-city" Value="18 - 19" Unit="miles/gallon" />
            <Item Key="Fuel Economy-highway" Value="26 - 28" Unit="miles/gallon" />
            <Item Key="Anti-Brake System" Value="Non-ABS | 4-Wheel ABS" Unit="" />
            <Item Key="Steering Type" Value="R&amp;P" Unit="" />
            <Item Key="Standard Seating" Value="4" Unit="" />
            <Item Key="Optional Seating" Value="No data" Unit="" />
            <Item Key="Length" Value="187.60" Unit="in." />
            <Item Key="Width" Value="74.00" Unit="in." />
            <Item Key="Height" Value="54.50" Unit="in." />
        </Vehicle>
</VIN>
</VINquery> 
```

`Item Key="Body Style"`获得 say using`$(xml)`或 other的价值的最有效方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:40:57.393

jQuery.parseXML()：[http ://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

```
 var xmlDoc = $.parseXML( xmlstring);     
   $xml = $( xmlDoc );     
   $(xml).find("Item").each(function () {  
      if ($(this).attr("Key") == "Body Style")
      {
           alert($(this).attr("Value"));    
      }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:44:59.280

使用属性过滤器，特别是 attributeEquals 过滤器：

```
$("node[Key='Bob Style']"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:46:39.233

[http://jsbin.com/ukahum/edit#javascript,html](http://jsbin.com/ukahum/edit#javascript,html)

```
var x='<VINquery Version="1.0.0" Report_Type="BASIC" Date="1/19/2012">\
    <VIN Number="1ZVFT80N475337065" Status="SUCCESS">\
        <Vehicle VINquery_Vehicle_ID="32627" Model_Year="2007" Make="Ford" Model="Mustang" Trim_Level="V6 Deluxe Coupe">\
            <Item Key="VINquery_Vehicle_ID" Value="32627" Unit="" />\
            <Item Key="Model Year" Value="2007" Unit="" />\
            <Item Key="Make" Value="Ford" Unit="" />\
            <Item Key="Model" Value="Mustang" Unit="" />\
            <Item Key="Trim Level" Value="V6 Deluxe Coupe" Unit="" />\
            <Item Key="Manufactured in" Value="UNITED STATES" Unit="" />\
            <Item Key="Production Seq. Number" Value="337065" Unit="" />\
            <Item Key="Body Style" Value="COUPE 2-DR" Unit="" />\
            <Item Key="Engine Type" Value="4.0L V6 SOHC 12V" Unit="" />\
            <Item Key="Transmission-short" Value="5A | 5M" Unit="" />\
            <Item Key="Transmission-long" Value="5-Speed Automatic | 5-Speed Manual" Unit="" />\
            <Item Key="Driveline" Value="RWD" Unit="" />\
            <Item Key="Tank" Value="16.00" Unit="gallon" />\
            <Item Key="Fuel Economy-city" Value="18 - 19" Unit="miles/gallon" />\
            <Item Key="Fuel Economy-highway" Value="26 - 28" Unit="miles/gallon" />\
            <Item Key="Anti-Brake System" Value="Non-ABS | 4-Wheel ABS" Unit="" />\
            <Item Key="Steering Type" Value="R&amp;P" Unit="" />\
            <Item Key="Standard Seating" Value="4" Unit="" />\
            <Item Key="Optional Seating" Value="No data" Unit="" />\
            <Item Key="Length" Value="187.60" Unit="in." />\
            <Item Key="Width" Value="74.00" Unit="in." />\
            <Item Key="Height" Value="54.50" Unit="in." />\
        </Vehicle>\
</VIN>\
</VINquery>';

alert($(x).find("Item[Key='Body Style']").attr('Value')); 
```

# sql-server - 无法连接到 Windows Azure 数据库

> ID：10227186
> 
> 赞同：1
> 
> 时间：2012-04-19T11:37:40.780
> 
> 标签：sql-server, azure-sql-database

我正在尝试通过 Visual Studio 连接到 Windows azure 数据库

这是我的步骤：

*   我在服务器资源管理器上按添加连接
*   填写服务器名称.database.windows.net
*   选择使用 SQL 服务器身份验证
*   填写用户名和密码
*   输入数据库名称

当我按确定时，我必须等待一段时间，然后它给出错误 40：无法连接到 sql server。

我的 Azure 服务器设置为接受来自 (0.0.0.0 - 255.255.255.255) 的 IP，MicrosoftServices 也是如此，有人可以帮我解决这个问题吗？我真的被困住了，我已经尝试了我能想到的一切:(

我正在关注本教程： [http ://social.technet.microsoft.com/wiki/contents/articles/2151.windows-azure-and-sql-azure-tutorials-tutorial-2-using-sql-azure-en- us.aspx](http://social.technet.microsoft.com/wiki/contents/articles/2151.windows-azure-and-sql-azure-tutorials-tutorial-2-using-sql-azure-en-us.aspx)

卡在第7步...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:36:09.873

Please make sure the username is correct. You can also try to use the following format:

```
<login>@<server> 
```

In addition, I would like to suggest you to check [http://msdn.microsoft.com/en-us/library/windowsazure/ee336282.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336282.aspx) for some general troubleshooting guidelines about connecting to SQL Azure.

Best Regards,

Ming Xu.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:44:23.743

您需要运行 SQL Server 2008 R2（+ Service Packs）才能通过 SSMS（SQL Server Mgmt Studio）进行连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:45:14.553

您连接的位置是否会阻止端口 1433 上的出站流量/连接？这实际上比人们意识到的要普遍一些。如果您 100% 肯定它没有被阻止，我建议您尝试两件事：a）删除并阅读规则 b）使用您实际来自的 IP 放入更具体的规则。

# ios - 如何在 iOS 中通过 HTTP 请求上传多张图片？

> ID：10227188
> 
> 赞同：0
> 
> 时间：2012-04-19T11:37:41.217
> 
> 标签：ios, cocoa-touch, http, client-server

我正在开发客户端-服务器应用程序。我发现很少有教程如何上传一张图片。但是使用单个请求上传多张图片的最佳方式是什么？我是网络编程的新手，所以我不是常用的方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:42:05.280

我建议使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)或[AFNetworking](http://afnetworking.org/)

两者都有一个您可以使用的网络队列。ASIHTTP 不再被开发，因此如果您想使用正在开发的库，您可以查看 AFNetworking...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:47:16.377

您应该使用[ASIHTTPRequest](https://github.com/pokeb/asi-http-request/tarball/master)库。

然后创建你自己的类来管理你想要的所有请求。这是我的：

```
#import "ASIFormDataRequest.h"

@interface PostRequest : NSObject {
    id localCopy; // to avoid exec_bad_access with arc
    ASIHTTPRequest *getRequest;
    ASIFormDataRequest *postRequest;
}

@property (nonatomic, retain) id delegate;
@property (nonatomic, readwrite) SEL callback;
@property (nonatomic, readwrite) SEL errorCallback;

- (void)performGetRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector;
- (void)performPostRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary dataDictionary:(NSDictionary *)dataDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector;

@end 
```

//

```
#import "PostRequest.h"

@implementation PostRequest

@synthesize delegate;
@synthesize callback, errorCallback;

- (void)performGetRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector {

    localCopy = self;

    self.delegate = requestDelegate;
    self.callback = requestSelector;
    self.errorCallback = errorSelector;

    NSMutableString *requestStringData = [[NSMutableString alloc] init];
    if (stringDictionary)
        for (NSString *key in [stringDictionary allKeys])
            [requestStringData appendFormat:@"%@=%@&", key, [stringDictionary objectForKey:key]];
    NSString *resultString = [requestStringData substringToIndex:[requestStringData length]-1];

    getRequest = [[ASIFormDataRequest alloc] initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@?%@", string, [resultString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]]];
    [getRequest setDelegate:self];
    [getRequest setRequestMethod:@"GET"];

    //NSLog(@"request url = %@", [getRequest.url absoluteString]);
    [getRequest startAsynchronous];
}

- (void)performPostRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary dataDictionary:(NSDictionary *)dataDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector {

    localCopy = self;

    self.delegate = requestDelegate;
    self.callback = requestSelector;
    self.errorCallback = errorSelector;

    NSURL *url = [NSURL URLWithString:string];

    postRequest = [[ASIFormDataRequest alloc] initWithURL:url];
    [postRequest setDelegate:self];
    [postRequest setRequestMethod:@"POST"];

    if (stringDictionary)
        for (NSString *key in [stringDictionary allKeys])
            [postRequest setPostValue:[stringDictionary objectForKey:key] forKey:key];

    if (dataDictionary)
        for (NSString *key in [dataDictionary allKeys])
            [postRequest setData:[dataDictionary objectForKey:key] forKey:key];

    //NSLog(@"request url = %@", [postRequest.url absoluteString]);
    [postRequest startAsynchronous];
}

#pragma mark - ASIHTTPRequest Delegate Implementation

- (void)requestFinished:(ASIHTTPRequest *)crequest {
    NSString *status = [crequest responseString];

    if (self.delegate && self.callback) {
        if([self.delegate respondsToSelector:self.callback])
            [self.delegate performSelectorOnMainThread:self.callback withObject:status waitUntilDone:YES];
        else
            NSLog(@"No response from delegate");
    }
    localCopy = nil;
}
- (void)requestFailed:(ASIHTTPRequest *)crequest {
    if (self.delegate && self.errorCallback) {
        if([self.delegate respondsToSelector:self.errorCallback])
            [self.delegate performSelectorOnMainThread:self.errorCallback withObject:crequest.error waitUntilDone:YES];
        else
            NSLog(@"No response from delegate");
    }
    localCopy = nil;
}

@end 
```

要使用它，只需导入`PostRequest.h`您的`UIViewController`并执行以下操作：

```
[requestManager performGetRequestWithString:tempString stringDictionary:stringDictionary dataDictionary:dataDictionary delegate:self requestSelector:@selector(requestSucceeded:) errorSelector:@selector(requestFailed:)]; 
```

参数：

*   `(NSString *)string`- url 字符串，在哪里发布您的请求；
*   `(NSDictionary *)stringDictionary`- 字典，包含所有文本信息（如姓名、ID 等）；
*   `(NSDictionary *)dataDictionary`- 字典，包含所有数据信息（如照片、文件等）；
*   `(id)requestDelegate`- 委托执行以下选择器；
*   `(SEL)requestSelector`- 选择器，将在成功请求时执行；
*   `(SEL)errorSelector`- 选择器，将在发生错误时执行。

# mongodb - 上传的图片缺少时间戳

> ID：10227193
> 
> 赞同：0
> 
> 时间：2012-04-19T11:37:52.637
> 
> 标签：mongodb, mongoid, carrierwave, timestamp

我的项目中有 mongoid 和carrierwave-mongoid gem（用于用户模型中的头像），并且需要上传图像 URL 中的时间戳。我知道有这个 Wiki 页面（[https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Use-a-timestamp-in-file-names](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Use-a-timestamp-in-file-names)）但有注释“这似乎不是是可靠的。我强烈建议将时间戳保存到数据库并从模型中读取它以生成文件名，而不是使用这种方法。我不知道该怎么做。

我认为 Rails 应该自动或从特定属性生成图像 URL 的时间戳，对吗？所以我不确定这个属性的正确名称是什么，或者使用 Mongoid 和carrierwave-mongoid 的正确方法是什么。

您能否提供一些信息或链接，我可以在其中找到有关此问题的更多信息或有关解决方案的信息。

因为我在 GitHub 上的 repo 是私有的，所以我做了这个 Gist ( [https://gist.github.com/2355128](https://gist.github.com/2355128) )，在那里你可以看到我的用户模型和头像上传器。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:13:49.657

这可能比您想要的答案更通用，但希望它能让您找到合适的解决方案。用于 MongoDB 中默认 _id 字段的唯一 ObjectID 具有“内置”时间戳，BSON::ObjectId 将是您在 Mongoid 中寻找以提取它的内容。

这里也有一篇关于它的文章：

[http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Extractinsertiontimesfromidratherthanhaveaseparatetimestampfield](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Extractinsertiontimesfromidratherthanhavingaseparatetimestampfield)。

因此，您可以使用 ObjectID 周围的包装器来构建您的 URL，并完全避免使用额外的时间戳。

# python - Python - 读取电子表格

> ID：10227200
> 
> 赞同：2
> 
> 时间：2012-04-19T11:38:21.870
> 
> 标签：python, excel

我需要知道的是，我可以让 Python 读取电子表格（最好是 Microsoft Excel），然后解析信息并将其输入到方程式中吗？

这是一个赛马程序，其中几匹马的信息将在一个 Excel 电子表格中，在不同的行或列中。我需要知道我是否可以分别对每匹马进行计算，然后为给定的马计算分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:44:59.927

我的建议是：

1.  将 Excel 文件另存为`csv`逗号分隔值文件，这是一种纯文本格式，更易于使用。
2.  使用 Python 的[内置`csv`模块](http://docs.python.org/library/csv.html)处理 csv 格式的数据。

您可以直接在 Python 中处理 Excel 文件（通过第三方模块[xlwt、xlrd](http://www.python-excel.org/)支持 Excel 2003 格式），但这比使用 CSV 要困难得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:36:50.513

[OpenPyXL](http://packages.python.org/openpyxl/)（“读/写 Excel 2007 xlsx/xlsm 文件的 Python 库”）有一个非常好的 Pythonic API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:44:30.060

使用`xlrd`包。[它在 PyPI 上](http://pypi.python.org/pypi/xlrd)，所以你可以`easy_install xlrd`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:44:11.503

您可以将电子表格导出为 .csv 并将其作为文本文件读入，然后进行处理。我有一种琐碎的感觉，甚至可能有一个 CSV 解析 python 库。

AFAIK 没有 .xls 解析器，尽管我可能错了。

编辑：我错了：http: [//www.python-excel.org/](http://www.python-excel.org/)

# java - 初始化一个 ArrayList 的数组

> ID：10227201
> 
> 赞同：14
> 
> 时间：2012-04-19T11:38:24.757
> 
> 标签：java, arrays, string, arraylist, initialization

如何初始化`Array`of `ArrayList<String>`？

我尝试了这种语法，但没有奏效：

```
ArrayList<String>[] subsection = new ArrayList<String>[4]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T11:44:44.367

你可以这样定义：

```
ArrayList<String>[] lists = (ArrayList<String>[])new ArrayList[10];
    lists[0] = new ArrayList<String>();
    lists[0].add("Hello");
    lists[0].add("World");
    String str1 = lists[0].get(0);
    String str2 = lists[0].get(1);
    System.out.println(str1 + " " + str2); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-19T11:40:30.450

该语法适用于非泛型`ArrayList`. [（想法）](http://ideone.com/usjoB)

但它*不适*用于通用`ArrayList<E>`：[（ideone）](http://ideone.com/800Mw)

这段代码：

```
ArrayList<String>[] subsection = new ArrayList<String>[4]; 
```

给出编译器错误：

```
Main.java:8：通用数组创建
        ArrayList<String>[] 小节 = new ArrayList<String>[4];

```

对于通用版本，请使用`ArrayList<ArrayList<E>>`：

```
ArrayList<ArrayList<String>> subsection = new ArrayList<ArrayList<String>>(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T13:09:05.737

好的，评论后，我想得很好......你的权利，为什么不呢。

弄清楚了。

```
ArrayList[] test = new ArrayList[4];

test[3] = new ArrayList<String>();
test[3].add("HI");

System.out.println(test[3].get(0)); 
```

虽然我会说实话，但我不确定为什么会这样。

一旦您将测试的第一项分配为新集合，它将只允许数组中的所有其他项为该类型。所以你做不到

```
test[3] = new ArrayList<String>();
test[2] = new HashSet<String>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T03:12:57.833

将泛型视为类型澄清过程，您可以将类型化值分配给原始类型的变量，反之亦然。在核心泛型是程序员避免过多类型转换的捷径，这也有助于在编译时捕获一些逻辑错误。在最基本的情况下，ArrayList 将始终隐式包含 Object 类型的项目。

所以

```
test[i] = new ArrayList<String>(); because test[i] has type of ArrayList. 
```

位

```
test[3] = new ArrayList<String>();
test[2] = new HashSet<String>(); 
```

没有工作 - 正如预期的那样，因为 HashSet 根本不是 ArrayList 的子类。泛型在这里无关。去掉泛型，你会看到明显的原因。

然而，

```
test[2] = new ArrayList<String>();
test[3] = new ArrayList<HashSet>(); 
```

会很好地工作，因为这两个项目都是 ArrayLists。

希望这是有道理的...

# oracle - 为什么在查询 odata 服务以获取包含 null 的值时会出现异常？

> ID：10227202
> 
> 赞同：1
> 
> 时间：2012-04-19T11:38:30.477
> 
> 标签：oracle, wcf-data-services, odata

我有一个在 Oracle 数据库之上运行的 OData 服务。我可以这样查询：

```
http://localhost:4930/Oracle.svc/XXKE_L2E_ADDRESSES_V%28%29?
$filter=PARTY_ID eq 10925&$select=* 
```

然后一切正常。

对于以下内容，一切正常（所有字段都不包含空值）：

```
http://localhost:4930/Oracle.svc/XXKE_L2E_ADDRESSES_V%28%29?
$filter=PARTY_ID eq 10925&
$select=ADDRESS_ID,PARTY_ID,CITY,ADDRESS1,PARTY_NAME 
```

但以下失败（ADDRESS2 是一个包含 null 的字段）：

```
http://localhost:4930/Oracle.svc/XXKE_L2E_ADDRESSES_V%28%29?
$filter=PARTY_ID eq 10925&
$select=ADDRESS_ID,PARTY_ID,CITY,ADDRESS1,PARTY_NAME,ADDRESS2 
```

我得到的回应是：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code></code>
  <message xml:lang="pl-PL">An error occurred while processing this request.</message>
  <innererror>
    <message>Value cannot be null.&#xD;
Parameter name: value</message>
    <type>System.ArgumentNullException</type>
    <stacktrace>   at System.Data.Services.WebUtil.CheckArgumentNull[T](T value, String parameterName)&#xD;
   at System.Data.Services.Internal.ProjectedWrapper.set_PropertyNameList(String value)&#xD;
   at lambda_method(Closure , Shaper )&#xD;
   at System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)&#xD;
   at System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext()&#xD;
   at System.Data.Services.Internal.ProjectedWrapper.EnumeratorWrapper.MoveNext()&#xD;
   at System.Data.Services.DataService`1.SerializeResponseBody(RequestDescription description, IDataService dataService)&#xD;
   at System.Data.Services.DataService`1.HandleNonBatchRequest(RequestDescription description)&#xD;
   at System.Data.Services.DataService`1.HandleRequest()</stacktrace>
  </innererror>
</error> 
```

为什么我会收到错误消息？null 有什么问题？当我指定时，我得到它没有问题`$select=*`。如何克服这个问题？

**编辑：**

我发现我面临的问题与此处描述的完全相同：[https](https://forums.oracle.com/forums/thread.jspa?threadID=2362250) ://forums.oracle.com/forums/thread.jspa?threadID=2362250 。我删除了这些字段，所以只有 8 个，然后我可以全选。如果我有 9 个字段，我一次只能选择其中的 6 个。如果我有 10 个字段，我一次只能选择其中的 3 个。

如果有人有解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:58:06.417

来自甲骨文的消息：

“微软已经确定了他们可以解决这个问题的几个潜在修复。甲骨文提供了反馈。我们正在等待听到微软是否同意以及他们计划在哪个版本或补丁中包含修复。”

所以还没有解决方案，但我使用的解决方法是选择所有字段（'*'），然后从代码中选择我感兴趣的字段。至少它有效:)

# java - gwt 和 jaxb 错误

> ID：10227203
> 
> 赞同：1
> 
> 时间：2012-04-19T11:38:34.367
> 
> 标签：java, eclipse, gwt, jaxb

我正在使用带有 gwt 的 eclipse galileo。

我收到以下错误：

```
No source code is available for type javax.xml.namespace.QName; did you forget to inherit a required module?
No source code is available for type javax.xml.bind.JAXBElement<T>; did you forget to inherit a required module? 
```

我尝试将 jaxrpc.jar 添加到库路径，并下载 QName.java 的源代码（我已将其放在 src/javax/xml/namespace/QName.java 中）。但没有任何帮助。

这是让我遇到问题的文件 - 它是自动生成的：

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.1-b02-fcs 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source     schema. 
// Generated on: 2011.08.31 at 06:12:27 PM IDT 
//

package com.company.jaxb.componentCurrentKPIs;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;

/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the com.company.jaxb.componentCurrentKPIs package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

private final static QName _ComponentCurrentKPIs_QNAME = new QName("", "componentCurrentKPIs");

/**
 * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: com.company.jaxb.componentCurrentKPIs
 * 
 */
public ObjectFactory() {
}

/**
 * Create an instance of {@link CurrentKPI }
 * 
 */
public CurrentKPI createCurrentKPI() {
    return new CurrentKPI();
}

/**
 * Create an instance of {@link ComponentCurrentKPIs }
 * 
 */
public ComponentCurrentKPIs createComponentCurrentKPIs() {
    return new ComponentCurrentKPIs();
}

/**
 * Create an instance of {@link JAXBElement }{@code <}{@link ComponentCurrentKPIs }{@code >}}
 * 
 */
@XmlElementDecl(namespace = "", name = "componentCurrentKPIs")
public JAXBElement<ComponentCurrentKPIs> createComponentCurrentKPIs(ComponentCurrentKPIs value) {
    return new JAXBElement<ComponentCurrentKPIs>(_ComponentCurrentKPIs_QNAME, ComponentCurrentKPIs.class, null, value);
    }

} 
```

# javascript - 不在 CSS 中声明？还是绕路？（超级鱼）

> ID：10227210
> 
> 赞同：1
> 
> 时间：2012-04-19T11:39:05.163
> 
> 标签：javascript, html, css, superfish

我试过在网上找到这个没有运气。

我正在使用 superfish 下拉菜单，我需要将顶部的 li 进行四舍五入，但不是 li 的内部有 ul，如果您在这里看到这是演示的测试页面：

jsfiddle：http: [//jsfiddle.net/UdvBC/](http://jsfiddle.net/UdvBC/)

但是我需要说一下..只在顶部应用四舍五入而不是下拉列表中的四舍五入，这可行吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:53:10.413

您正在寻找使用我收集的 :first-child 选择器...

[http://www.w3schools.com/cssref/sel_firstchild.asp](http://www.w3schools.com/cssref/sel_firstchild.asp)

它允许您将特殊的 CSS 应用于第一个项目。 ~~只需确保在应用于所有项目的样式之后应用第一个子选择器，以防止覆盖第一个子属性。~~

例子：

```
ul li { background: red; }
ul li:first-child { background: blue; } 
```

~~以相反的顺序放置它会覆盖第一个子 CSS。~~

编辑：谢谢指正！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:51:42.977

CSS 不能真正接受*not*这样的陈述，所以我建议为两种类型的`li`'s 定义单独的类。

# java - couchdb 的连接池

> ID：10227213
> 
> 赞同：1
> 
> 时间：2012-04-19T11:39:19.347
> 
> 标签：java, couchdb, connection-pooling, pool, object-pooling

我有一个 couchdb 数据库，我正在并行查询它。现在，我想创建一个连接池，因为我在设计中发现了一个瓶颈——我使用了一个 couchd 实例，因此并行化失败了。

我在网上搜索了连接池实现，但我找不到适合 couchdb 的 Java 连接池实现——大多数框架都支持关系数据库。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:59:15.573

我从未使用过 couchdb 连接池，但您可能对此有一些运气：

[http://commons.apache.org/pool/](http://commons.apache.org/pool/)

它允许您汇集任何旧对象，包括连接。不过，它需要几行代码才能让它为你工作。

希望这会有所帮助，内特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:24:19.547

如果您正在寻找一种简单的方法来平衡多个 CouchDB 实例，为什么不使用像 Varnish 这样的 HTTP 负载平衡器呢？[在此处](https://www.varnish-cache.org/trac/wiki/LoadBalancing)查看如何设置简单的循环负载均衡器。如果不需要，您也可以[禁用缓存。](http://anastasiadis.datalive.gr/disable-caching-in-varnish-for-specific-host-and-or-url?pid=0)

# javascript - D3.js子弹图-如何以百分比（n％）而不是仅以值（n）输出范围/ x轴值？

> ID：10227214
> 
> 赞同：1
> 
> 时间：2012-04-19T11:39:26.223
> 
> 标签：javascript, d3.js

[ [http://mbostock.github.com/d3/ex/bullet.html](http://mbostock.github.com/d3/ex/bullet.html) ] 是 D3.js 子弹图示例。在这里，我想以百分比输出值 x 轴。在第一张图表“收入”中：

0% , 50% , 150% , 200% , 250% , 300% 代替 0 , 50 , 150 , 200 , 250 , 300

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-03T18:44:20.217

把它放在 d3.json() 调用的底部

```
//axis label format
svg.selectAll("g.tick").select('text').text(function (t) {
      return t*10 + "%";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:29:45.870

将幅度简单地乘以 10 然后连接一个“%”字符是否足够？

我最好的，

坦率

# c# - GridView：如何设置要显示的行数

> ID：10227218
> 
> 赞同：13
> 
> 时间：2012-04-19T11:39:48.557
> 
> 标签：c#, gridview, rows

我希望我的网格视图只显示 3 行关于如何实现这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T11:43:00.967

[启用分页](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.allowpaging.aspx)并将 GridView 设置[`PageSize`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.pagesize.aspx)为 3。

[如何：在 GridView Web 服务器控件中启用默认分页](http://msdn.microsoft.com/en-us/library/y71xk4a7.aspx)

如果您想限制您的 GridView 仅显示 3 行而不显示分页，您需要使用`DataSource`仅包含 3 条记录的 a（通过 SQL `TOP`--Clause 或`Limit`在 MySQL 或 LINQ 中`Take(3)`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T13:42:54.167

如果您可以限制查询中的记录，那么这是最好的方法。

但是，如果您不能在查询中限制它们......这是另一种方法：

1.  设置“ `allowpaging=true`”和“ `pagesize=X`”（将 X 更改为您希望可见的行数）。
2.  使用自定义 CSS 类分配 pagerstyle。

    <pagerstyle cssclass="hidden" />

3.  将该自定义类设置为：

    .hidden { **可见性：隐藏；显示：无；** }

现在，您的网格将使用分页逻辑，但分页器控件是隐藏的。

它不是最干净/最优雅的，但它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-02T09:14:19.557

在 GridView 中放置 AllowPaging="True" 和 PageSize="3"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:45:05.503

我会保持简单，并确保您的 DataSource 仅提供您需要显示的三行数据。

如果做不到这一点，您可以将`.Visible`all 的属性设置`Rows`为`false`，除了`Rows[0]`through `Rows[2]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T11:46:06.110

我能想到的2种方法......

1.  从查询中获取数据集。
2.  创建列并添加到您的gridview...
3.  单击按钮添加 3 行并保持索引不变
4.  在同一次点击中，清除您的网格并添加接下来的三行......

或者

使用分页！！！！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T00:33:31.613

转到查看并单击网格，然后会打开一个小的叠加层，允许（要求您）输入列的数字。然后预览并点击保存

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-27T09:57:36.210

您可以按如下方式使用中继器。

```
<asp:Repeater ID="Repeater2" runat="server" >
<HeaderTemplate>
<table class="center">
    <tr> 
```

<%#If((Container.ItemIndex <> 0 AndAlso Container.ItemIndex Mod 4 = 0), " ", String.Empty)%> ' PostBackUrl='<%# Container.DataItem("url")%>' >

```
</asp:Repeater> 
```

# android - Handler.dispatchMessage(msg) 和 Handler.sendMessage(msg) 的区别

> ID：10227219
> 
> 赞同：11
> 
> 时间：2012-04-19T11:39:51.840
> 
> 标签：android, handler

当我使用`Handler.dispatchMessage(msg)`时，`handleMessage(Message msg)`将在新线程上运行，但当我使用时`Handler.sendMessage(msg)`，`handleMessage(Message msg)`将在主线程上运行。谁能告诉我它们的区别？

谢谢！

演示：

```
public class MainActivity extends Activity
{
private String TAG = "MainActivity";
private Handler mHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg)
    {
        Log.i(TAG, "Handler:" + Thread.currentThread().getId() + " & arg1=" + msg.arg1);
        super.handleMessage(msg);
    }

};

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.i(TAG, "Main:" + Thread.currentThread().getId());
    testMethod();
}

private void testMethod()
{
    Thread thread = new Thread()
    {
        @Override
        public void run()
        {
            Log.i(TAG, "Thread:" + Thread.currentThread().getId());
            Message msg = mHandler.obtainMessage();
            msg.arg1 = 1;
            mHandler.dispatchMessage(msg);
            Message msg2 = mHandler.obtainMessage();
            msg2.arg1 = 2;
            mHandler.sendMessage(msg2);
        }

    };
    thread.start();
} 
```

}

输出：

```
04-19 11:32:10.452：信息/主要活动（774）：主要：1
04-19 11:32:10.488：信息/MainActivity（774）：线程：8
04-19 11:32:10.492: INFO/MainActivity(774): 处理程序:8 & arg1=1
04-19 11:32:10.635：INFO/MainActivity(774)：处理程序：1 & arg1=2

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T13:18:00.390

`mHandler.dispatchMessage(msg)`就像直接打电话一样`handleMessage(Message msg)`，我不知道什么时候会有用。处理程序的重点是能够将消息发送到其他线程。这就是你所做的`sendMessage`。

编辑：如您所见，它只需要`handleMessage()`您。

```
/**
 * Handle system messages here.
 */
public void dispatchMessage(Message msg) {
    if (msg.callback != null) {
        // callback = the Runnable you can post "instead of" Messages.
        msg.callback.run();
    } else {
        if (mCallback != null) {
            if (mCallback.handleMessage(msg)) {
                return;
            }
        }
        handleMessage(msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-14T10:30:50.230

如果您在主线程中调用，`Handler.dispatchMessage()`则消息在主线程中处理。

如果`Handler.dispatchMessage()`在工作线程中调用 ，则消息在工作线程中处理。

当您调用`Handler.sendMessage(msg)`消息时在创建处理程序的线程中处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-26T15:12:12.880

发送的消息`Handler.sendMessage()`将在您创建的线程上处理`testMethod()`。

发送的消息`Handler.dispatchMessage()`在**`main`**线程上处理。

# php - 删除 Symfony2 范围扩大通知

> ID：10227220
> 
> 赞同：1
> 
> 时间：2012-04-19T11:39:55.300
> 
> 标签：php, dependency-injection, symfony, scope

我试图通过尽可能删除对服务容器的引用来加速我的堆栈。在这种情况下，我只需要请求：

```
email_error_message:
  class: Core\MyBundle\Services\Email\ErrorMessage
        arguments: [ @request, %params ] 
```

然而，这引发了范围扩大的问题。我现在不关心重构代码，我只想通过添加 strict = true 来摆脱警告。但我似乎无法正确使用 YAML 语法：

```
email_error_message:
  class: Core\MyBundle\Services\Email\ErrorMessage
        arguments:
            - { type: service, id: request, strict: false }
            - %params% 
```

这虽然行不​​通。有任何想法吗？

**编辑** 我意识到我可以将此服务的范围更改为请求，但在这种情况下这不是一个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T15:03:28.340

您希望将服务的`request`范围限制在范围内，因为您需要确保传递了正确的`Request`实例 - 例如，如果您是从子请求中使用服务，或者是否通过主请求。将您的服务配置调整为：

```
services:
    email_error_message:
        class: Core\MyBundle\Services\Email\ErrorMessage
        scope: request
        arguments: [ @request, %params% ] 
```

有关更多详细信息，请参阅[文档](http://symfony.com/doc/current/cookbook/service_container/scopes.html#setting-the-scope-in-the-definition)。

**根据您的问题编辑**进行编辑，您无法更改范围。在这种情况下，您的语法应如下所示：

```
services:
    email_error_message:
        class: Core\MyBundle\Services\Email\ErrorMessage
        arguments: [ @request=, %params% ] 
```

带有附加`=`符号。请注意，我在任何地方都没有看到这个引用，它来自于挖掘 DI 容器的代码；-)

# java - Java GUI - MouseListener 和 ActionListener 可以在同一个类中吗？

> ID：10227225
> 
> 赞同：4
> 
> 时间：2012-04-19T11:40:13.163
> 
> 标签：java, swing, user-interface, actionlistener, mouselistener

CircleListener 是我面板类中的一个内部类，它现在涉及 MouseListener 接口。MouseRelased 方法检查单击的区域是否被圆圈包围，如果是，则将该形状设置为选中并删除选中的形状。

现在我需要一个 ActionListener 使用“计时器”对象向这个面板添加随机大小的圆圈。问题：是否可以为 CircleListener 实现“ActionListener”或者为“ActionListener”创建另一个内部类更好？

提前致谢

```
private class CircleListener implements MouseListener
{
    ShapesCanvas canvas;
    ShapeContainer container;
    Shape possibleShape;

    private CircleListener(ShapesCanvas canv, ShapeContainer cont)
    {
        this.canvas = canv;
        this.container = cont;
    }

    public void MouseRelased (MouseEvent e)
    {
        possibleShape = container.contains( e.getX(), e.getY());

        if( possibleShape != null)
        {
            ( (Selectable)possibleShape).setSelected(true);
            container.removeSelected();
        }
        canvas.repaint(); //repaints the last situation
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T11:49:07.363

绝对有可能，只需声明

```
private class CircleListener implements MouseListener, ActionListener 
```

您可以改为创建两个类，这实际上是我更喜欢的，因为这样您就有了两个具有明确定义目的的不同实体。每个实体只负责一个功能。

但是这两种方法都是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:53:35.453

从语法上讲，您可以定义一个实现这两个接口的类。如果它们服务于完全不同的目的，则定义两个类，如果它们共享一些信息，例如圆的半径，则将代码放在一个类中。

我在这里不明白的是，`ActionListener`它响应的是 GUI 事件而不是`Timer`事件

# delphi - 从不同进程中加载 的模块访问接口/对象

> ID：10227226
> 
> 赞同：0
> 
> 时间：2012-04-19T11:40:25.553
> 
> 标签：delphi, dll

我正在处理一个加载在应用程序 A 中的 dll，我想在应用程序 A 和另一个应用程序 B 之间共享接口/对象，所以，想法如下：

[国外应用A] <- [我的dll] <-> [我的应用B]

理想情况下是“以某种方式”将 dll 中的函数重新路由到 [我的应用程序 B]

我对一个优雅的解决方案感兴趣，一个不需要太多妥协的解决方案，想法？

**编辑**：[应用程序 A] 是用 C 编写的，[我的 dll] 和 [应用程序 B] 是用相同的 delphi 版本编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:10:22.737

为什么不在 [My Application B] 中公开一个 [My DLL] 可以访问和转发函数调用的自动化接口？

```
[My Application B]

IMyRemoteInterface = interface(IDispatch)
    ... Ole interface functions here ...
end;

TMyRemoteInterfaceImpl = class(TAutoObject, IMyRemoteInterface)
    ... Implementation gubbins ...
end; 
```

接着

```
[My Application C]

Server = CreateOleObject(MyApplicationB.MyRemoteInterface)
....
Server.DoStuff 
```

显然还有更多的东西，但你明白了要点。

# asp.net-mvc - 与 ASP.NET MVC 3 集成的最佳 javascript UI 框架是什么？

> ID：10227229
> 
> 赞同：0
> 
> 时间：2012-04-19T11:40:27.543
> 
> 标签：asp.net-mvc, javascript, javascript-framework

与 ASP.NET MVC 3 集成的最佳 JavaScript UI 框架是什么？

jQuery 现在是一个必备库，而且...对于 UI 框架，我已经尝试过 www.jqwidgets.com，jquery easy ui 现在我在看 KendoUI...

我的期望是，UI 框架应该是一个加分项，内容（元素）将由 asp.net MVC 生成，UI 框架将使 UI 更好、更友好、更漂亮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:28:43.003

You can try the jQuery UI Extensions for MVC. See here: [http://jmvcui.codeplex.com/](http://jmvcui.codeplex.com/)

# scala - 如何从其他包中引用 scala 枚举

> ID：10227231
> 
> 赞同：4
> 
> 时间：2012-04-19T11:40:30.607
> 
> 标签：scala, playframework-2.0

我无法理解为什么我不能引用 scala 枚举类型。

问题是有时我可以引用枚举：

```
enum(UserStatus) 
```

有时它抱怨无法找到枚举

```
not found: type UserStatus 
```

为什么我有时不能引用 Enumeration 类？

枚举的生成源似乎没问题，并且它与我拥有的另一个枚举一起工作得很好，它住在同一个地方，同样的用法......

有什么建议么？

# 更多信息

枚举的生成源是：

```
public final class models.UserStatus extends java.lang.Object{
    public static final scala.Enumeration$Value Busy();
    public static final scala.Enumeration$Value Free();
    public static final scala.Enumeration$ValueSet$ ValueSet();
    public static final scala.Enumeration$Value withName(java.lang.String);
    public static final scala.Enumeration$Value apply(int);
    public static final int maxId();
    public static final scala.Enumeration$ValueSet values();
    public static final java.lang.String toString();
} 
```

我正在尝试为 play framework 2.0 实现枚举映射器

```
def enumFormat[E <: Enumeration](enum: E): Formatter[E#Value] = new Formatter[E#Value] {
  def bind(key: String, data: Map[String, String]) = {
    Formats.stringFormat.bind(key, data).right.flatMap { s =>
      scala.util.control.Exception.allCatch[E#Value]
        .either(enum.withName(s))
        .left.map(e => Seq(FormError(key, "error.enum", Nil)))
    }
  }
  def unbind(key: String, value: E#Value) = Map(key -> value.toString)
} 
```

而这个调用映射器的方法

```
def enum[E <: Enumeration](enum: E): Mapping[E#Value] = of(enumFormat(enum)) 
```

这意味着映射器在使用表单绑定时会自动在枚举之间进行转换

使用伪代码。

```
package models {
  object UserStatus extends Enumeration {
    val Free = Value("free")
    val Busy = Value("busy")
  }

  case class User(
    status: UserStatus.Value = UserStatus.Free
  )
}

package controllers {
  imports models._
  val userForm = Form(
    mapping(
      "status" -> enum(UserStatus)
    )(User.apply)(User.unapply)
  )
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T21:03:01.843

您的问题可能来自这样一个事实，即在 Scala 中您可以为*type*和*value使用相同的**标识符*。

 **当您编写以下内容时：

```
object Foo extends Enumeration {
  val A, B, C = Value
} 
```

你定义了一个`Foo` **对象**，但你没有定义一个`Foo` **类型**。如果您来自 Java 背景，您可能会觉得这种行为*并不*直观。

那么`Foo`枚举值的类型是什么？它们的类型是`Foo.Value`（称为*路径依赖类型*）。

如果要定义`Foo`与枚举值类型对应的类型，可以给该`Foo.Value`类型起别名：

```
object Foo extends Enumeration {
  type Foo = Value    // Type alias
  val A, B, C = Value
} 
```

现在您可以通过编写来引用枚举类型`Foo.Foo`。您可以导入`Foo`对象的字段以减少语法开销：

```
import Foo._
def bar(foo: Foo): String = foo match {
  case A => "value A"
  case B => "value B"
  case C => "value C"
} 
```

在上面的代码中，第一行指的是`Foo` *对象*，第二行指的是`Foo` *类型*。**

# mvvm - 使用匿名对象（MVVMCross）在 WP7 上将变量从 ViewModel 传递到 ViewModel 时出现 methodAccessException

> ID：10227237
> 
> 赞同：4
> 
> 时间：2012-04-19T11:40:54.843
> 
> 标签：mvvm, windows-phone-7.1, mvvmcross

我已经使用 MVVMCross 创建了一个应用程序，IOS 和 Android 版本正在运行，但是当我尝试“移植”到 WP7 时，我遇到了以下问题：

```
throw methodAccessException.MvxWrap("Problem accessing object - most likely this is caused by an anonymous object being generated as Internal - please see http://stackoverflow.com/questions/8273399/anonymous-types-and-get-accessors-on-wp7-1"); 
```

正如我的其他问题的答案中提到的（在 Android 上），您必须在 WP7 的 AssemblyInfo.cs 中设置 InternalsVisibleTo 属性。所以我做了：

```
[assembly: InternalsVisibleTo("Cirrious.MvvmCross.WindowsPhone")] 
```

但这没有任何区别。我使用以下代码将两个变量从我的 BeckhoffViewModel 发送到我的 BeckhoffSensorViewModel。

BeckhoffViewModel：

```
public IMvxCommand BeckhoffSensor1
{
get
    {
        return new MvxRelayCommand(kvpSens1);
    }
}

private void kvpSens1()
{
    RequestNavigate<BeckhoffSensorViewModel>(new { VarType = "short", Variable = ".countertest" });
} 
```

BeckhoffSensorViewModel：

```
public BeckhoffSensorViewModel(string VarType, string Variable)
{
    _vartype = VarType;
    _variable = Variable;
} 
```

有什么我忽略的吗？我还查看了异常中提到的其他 stackoverflow 主题，但无法真正理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:52:23.823

匿名类肯定会`internal`由编译器创建 - 这就是您需要该行的原因`[assembly: InternalsVisibleTo("Cirrious.MvvmCross.WindowsPhone")]`

您能否检查 AssemblyInfo.cs 文件是否确实链接到项目中（并且这是包含 ViewModel/匿名类代码的项目）？

如果是这种情况，您可以检查`methodAccessException`一下消息是什么吗？

如果这没有帮助，您可以使用 Reflector 之类的工具来检查内核/应用程序程序集上实际存在的 internalVisible 属性吗？

# javascript - ui-scroll listview 扩展通过屏幕切断右边框

> ID：10227241
> 
> 赞同：0
> 
> 时间：2012-04-19T11:41:02.493
> 
> 标签：javascript, jquery, html, jquery-mobile, cordova

我正在使用 html 和 javascript 开发应用程序。我在一页上有一个 ui-scrolllistview，我让它填充好了。但是如果一个单词对于列表视图来说太大了，它只会扩展它的宽度，所以它会离开屏幕。

有没有办法在 ui-scrolllistview 中设置单词或自动换行单词的长度，以便它不会切断 ui-scrolllistview 的右边框？

谢谢

编辑

这是我使用 ui-scrolllist 创建页面的代码

```
<div data-role="page" data-theme="f" id="choose-building">

    <div data-role="header" data-theme="f" data-position="fixed"  data-tap-toggle="false">
    <h1><img src="images/building.png" height="80px"></h1>
        <div data-role="controlgroup" class="ui-btn-right topzero">
        <a href="#" data-rel="back"  data-role="button" data-inline="true"  data-direction="reverse">Back</a>
        <a id="applyFilter" data-role="button" data-inline="true" onClick="pickedBuildings();">Chosen Buildings</a>
        </div>
    </div>

    <div data-role="content" data-scroll="Y" class="ui-scrolllistview" >
        <form>

        <div data-role="fieldcontain">          

            <fieldset data-role="controlgroup" id="CatagoryChooseBuilding" >
            </fieldset>

        </div>
        </form>
    </div>
    <div data-role="footer" data-theme="f" data-position="inline" data-id="main-footer"  data-tap-toggle="false">
        <div data-role="navbar" >
        <ul>
            <li><a href="#home" data-role="button" data-icon="myapp-home" >Home</a></li>
            <li><a href="#page-map" data-role="button" data-icon="myapp-building-a" >Buildings</a></li>
            <li><a href="#more" data-role="button" data-icon="myapp-more" >More</a></li>
        </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:49:13.787

我相信这听起来像你在寻找`text-overflow`和`white-space`可能`overflow`。

您可以使用这些不同的 CSS 属性**在**设置`margins`和`padding`.

```
text-overflow: ellipsis;
white-space: nowrap;
overflow: hidden; 
```

**编辑**：[示例](http://jsfiddle.net/urSSJ/)

您可以调整边距属性，直到您将文本从滚动条移到尽可能远的位置。

**编辑**：如果您想允许框架（根据您的标签的jQuery移动）为您截断它的自动换行，在包含您的文本的最里面的元素上，指定`overflow: visible;`和`white-space:normal;`

如果您没有看到预期的行为变化，请通过“开发人员工具”窗口查看该页面。这些内置在 Chrome 和 IE 中，您可以使用 Firebug for Firefox。这些允许您“即时”测试样式表更改，这听起来像是您获得预期行为所需要的。

# java - 带有 pom.xml 和 web.xml 的 web 项目之间的区别

> ID：10227244
> 
> 赞同：14
> 
> 时间：2012-04-19T11:41:17.173
> 
> 标签：java, jakarta-ee

具有 pom.xml 和 web.xml 的 Java 项目有什么区别？项目可以同时具有这两种配置吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T11:43:09.333

它们完全兼容。事实上，他们执行完全不相关的任务。

`pom.xml`是[Maven 项目的配置文件](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)。它的目标之一是在使用 Maven 时为项目的编译和构建提供帮助。如果对 Maven 不熟悉，可以将其视为 ant`build.xml`文件或`makefile`Make 文件（实际上，它可以提供更多功能）

`web.xml`是 Java EE Web 应用程序部署描述符，您可以在其中指定实例 servlet、servlet 映射和 webapp 的其他方面。

*   来自 Apache Maven 站点的**[Maven 是什么。](http://maven.apache.org/what-is-maven.html)**
*   **[什么是 web.xml 文件，我可以用它做什么？](https://stackoverflow.com/q/2311065/851811)**关于SO的问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-19T11:44:38.197

这两个文件没有任何关系。

*   ***pom.xml*** - Maven 配置文件。控制项目的构建过程
*   ***web.xml*** - Web 应用程序配置文件。控制 Web 应用程序的部署和配置

POM 文件真的不应该与应用程序一起部署，它只是用于构建过程。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-19T11:44:06.097

`web.xml`是项目在某种 servlet 容器（甚至可能是成熟的 Java EE 容器）中运行的指标。

`pom.xml`表示项目是使用[Maven 构建系统构建的](https://maven.apache.org/)。

这两件事是完全正交的，所以任何给定的项目都可以没有，其中之一或两者。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-19T11:43:56.680

Pom 定义了任何依赖库，它是 Maven 的一部分。这告诉 maven 要下载哪些 jar 文件并将其存储在站点的 lib 文件夹中。

Web xml 是您的 Web 项目的配置方式。

当他们做不同的事情时，他们可以共存。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-19T11:46:06.767

POM 代表“项目对象模型”。它是保存在名为 pom.xml 的文件中的 Maven 项目的 XML 表示。[http://maven.apache.org/pom.html](http://maven.apache.org/pom.html)

是的，您可以同时拥有两种配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T11:43:33.327

pom.xml 用于使用 Maven 配置您的项目。

例如，web.xml 用于 Tomcat 下的所有 Java EE 项目。

您可以同时使用两者，Maven 用于编译和部署您的项目，Tomcat 是您的服务器。

# c# - 测试接口的泛型类型参数

> ID：10227249
> 
> 赞同：1
> 
> 时间：2012-04-19T11:41:50.917
> 
> 标签：c#, generics, interface

我有一个通用方法（见下面的代码），如果 T 是一个特定的接口，我想执行一些操作。
显然我可以做一个`typeof(T).IsAssignableFrom(IFoo)`但反射相对较慢，所以我想尽可能避免它。

现在，我知道我不能有另一种带有 a 约束的方法，因为我会得到模棱两可的方法错误，否则我只会这样做。

有没有办法做我想做的事？
我想要这样做的事实是否指向一些架构问题？

```
public T Load<T>(string name)
{
    T result = LoadFromName<T>(name);

    if(T is IFoo) // Obviously doesn't work as T is a type, not a variable
        (result as IFoo).FooMethod();

    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:44:15.643

但是你*有*一个变量 - `result`！有什么问题

```
var asFoo = result as IFoo;
if (asFoo != null)
    asFoo.FooMethod(); 
```

# jquery - 在网站中下载的图像的图像进度条在 FF 中无法使用适当的结果

> ID：10227254
> 
> 赞同：0
> 
> 时间：2012-04-19T11:41:57.673
> 
> 标签：jquery, asp.net, css, ajax, progress-bar

我正在开发一个使用大量图像的项目，很多图像都是 PNG 格式，需要时间下载。我想使用基本的图像背景图像标签，这是一个通用的 gif 文件。

```
.ArticleImgHP
{
  display: block;
  background-image: url('../images/loading-circle.gif');
  background-position: center center;
  background-repeat:no-repeat;
} 
```

ASP.NET HTML（示例：这是转发器控件的一部分。

```
<asp:Image ID="imgTopFourImg2" runat="server" width="170px" height="112px"  CssClass="ArticleImgHP" border="0" ImageUrl='<%# getImagePath(Eval("ArticleThumNailImage")) %>'/> 
```

除了在 Firefox 中提供 Image Container 之外，这在所有浏览器中都可以使用

FireFox 和其他浏览器中的结果如下图所示。 **火狐中的结果** ![火狐中的结果](../Images/89e70652d458cbecc9edd5a4cba41c29.png)

**结果在 IE、Chrome Safari** ![结果在 IE、Chrome Safari](../Images/b1b4a31ec5f2bb8595c137865536ea63.png)

它对我来说工作正常，但我不确定如何隐藏出现在 FF 中的图像图标。在其他浏览器上，它很好地出现。

为正在下载的图像添加进度条的最佳方法是什么，或者我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:54:09.160

正如 Tim B James 建议的那样，您应该隐藏图像直到它被加载。然而，因此，背景图像也将不再可见。你需要一个小的工作来解决这个问题。

这个想法是使用一个包含背景加载图像的容器并将实际图像放在那里。当图像仍在加载（因此不可见）时，它将显示此容器的背景图像。

最初，您将隐藏必须加载的图像（可见性：隐藏）并在该图像上放置一个 onload 事件。onload 函数将使图像可见，一旦加载并自动隐藏容器的背景图像。

上面对解决方案的描述在下面的代码中得到了解决：

```
<html>
<head>
    <title>Test file</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
      function onLoadFunction(img) {
         $(img).css("visibility", "visible"); // Using jQuery
         // img.style.visibility = "visible"; // Using just javascript.
      }
    </script>
    <style>
        img.ArticleImgHP {
            /* Set the width and height to the size of its container */
            width : 100%;
            height : 100%; 
            visibility : hidden;
        }
        div.ArticleImgHP-container { 
            width : 124px;
            height : 124px;
            background-image : url('http://www.speikboden.it/_medien/bilder/loader2.gif');
            background-position: center center;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
    <!-- This container contains the background loading image -->
    <div class="ArticleImgHP-container">
        <!-- An huge image which has to be loaded -->
        <img class="ArticleImgHP" src="http://www.lzsu.com/uploads/Big-Wave-Wallpaper.jpg" onload="onLoadFunction(this);"/>
    </div>
</body>
</html> 
```

# lotus-notes - 破解 Notes 客户端中的 extension.xml

> ID：10227278
> 
> 赞同：2
> 
> 时间：2012-04-19T11:43:29.147
> 
> 标签：lotus-notes, xpinc

在 XPiNC 应用程序中，参数使用 # 而不是 ?param=x¶m2=y 打包到命令行中。不知何故，您可以编辑 extension.xml 以适应它 - 我记得在某个地方看到过，但我再也找不到它了。任何指针？

# c++ - 使用scanf的错误

> ID：10227281
> 
> 赞同：1
> 
> 时间：2012-04-19T11:43:35.303
> 
> 标签：c++, c, scanf

你能说我下面的代码有什么错误吗？

```
 char* line=""; 

printf("Write the line.\n");
scanf("%s",line);
printf(line,"\n"); 
```

我试图从控制台获取一行作为输入。但是每次使用“scanf”时程序都会崩溃。我不想使用任何标准，我完全想避免使用 cin 或 cout。我只是想学习如何使用 scanf() 将整行作为输入。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:46:56.697

您需要为输入字符串分配空间，因为`sscanf()`它本身不能这样做：

```
char line[1024]; 

printf("Write the line.\n");
scanf("%s",line);
printf(line,"\n"); 
```

然而，这是危险的，因为它可能会溢出缓冲区，因此是一个安全问题。改用`std::string`：

```
std::string line;

std::cout << "Write the line." << std::endl;
std::cin >> line;
std::cout << line << std::endl; 
```

或者：

```
std::getline (std::cin, line); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T11:45:49.100

未分配空间`line`您需要执行以下操作

```
char *line = malloc(); 
```

或者

```
Char line[SOME_VALUE]; 
```

当前`line`是指向字符串文字的不良指针。覆盖字符串文字可能会导致**未定义的行为**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T12:04:32.560

scanf() 与行不匹配。%s 匹配一个单词。

```
#include <stdio.h>

int main() {
    char word[101];
    scanf("%100s", word);
    printf("word <%s>\n", word);
    return 0;
} 
```

输入：

```
this is a test 
```

输出：

```
word <this> 
```

匹配行使用`%100[^\n"]`，这意味着 100 个字符不是换行符。

```
#include <stdio.h>

int main() {
    char word[101];
    scanf("%100[^\n]", word);
    printf("word <%s>\n", word);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T11:45:49.643

**您正在尝试更改[字符串文字](http://en.wikipedia.org/wiki/String_literal)**，这在 C 中会导致**未定义的行为**，而在 C++ 中则试图写入 const 内存。

为了克服它，您可能想要分配 a`char[]`并将其分配给`line`- 或者如果它是 C++ - 使用[`std::string`](http://www.cplusplus.com/reference/string/string/)并避免很多痛苦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T11:46:12.927

您应该为以下内容分配足够的内存`line`：

```
char line[100]; 
```

例如。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T14:53:51.353

调用中的`%s`转换说明符`scanf`期望其对应的参数指向一个类型的*可写*缓冲区，该缓冲区大到足以容纳输入。`char [N]``N`

您已初始化`line`为指向字符串字面量`""`。这有两个问题。首先是尝试修改字符串文字的内容会导致*未定义的行为*。语言定义没有指定字符串文字的存储方式*；*它只指定它们的生命周期和可见性，一些平台将它们放在只读内存段中，而另一些平台将它们放在可写数据段中。因此，尝试在一个平台上修改字符串文字的内容可能会由于访问冲突而彻底崩溃，而在另一个平台上可能会正常工作。语言定义没有规定*应该做什么*当您尝试修改字符串文字时发生；事实上，它明确地保留了这种行为*undefined*，因此编译器可以自由地以任何它想要的方式处理这种情况。一般来说，最好总是假设字符串文字是不可写的。

另一个问题是包含字符串文字的数组的大小只能容纳 1 个字符，即 0 终止符。请记住，C 风格的字符串存储为 的简单数组`char`，并且当您添加更多字符时，数组不会自动增长。

您将需要声明`line`为数组`char`或动态分配内存：

```
char line[MAX_INPUT_LEN]; 
```

或者

```
char *line = malloc(INITIAL_INPUT_LEN); 
```

动态分配内存的优点是您可以根据需要调整缓冲区的大小。

为了安全起见，您应该指定要读取的最大字符数；如果您的缓冲区大小可容纳 21 个字符，则将您的`scanf`调用写为

```
scanf("%20s", line); 
```

如果输入流中的字符多于`line`可以容纳的字符，`scanf`则会将这些额外的字符写入后面的内存中`line`，这可能会破坏一些重要的东西。缓冲区溢出是一种常见的恶意软件利用，应该避免。

另外，`%s`不会让你完整；即使使用字段宽度说明符，它也会读取到下一个空格字符。您要么需要使用不同的转换说明符，`%[^\n]`要么`fgets()`改为使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T11:46:15.323

应该指向将保存读取的字符串的字符数组的开头的指针`line`实际上指向其内容不可修改的字符串文字（空字符串）。这会导致未定义的行为，在您的情况下表现为崩溃。

要解决此问题，请将定义更改为：

```
char line[MAX];  // set suitable value for MAX 
```

并将最多 MAX-1 个字符读入`line`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-19T11:47:03.630

改变：

```
char* line=""; 
```

到

```
char line[max_length_of_line_you_expect]; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-04-19T11:49:38.247

`scanf`正在尝试写入比 . 保留的字符更多的字符`line`。正如上面的答案所指出的，尝试保留比您期望的行更多的字符。

# delphi - DBChart 和浮点字段精度

> ID：10227284
> 
> 赞同：1
> 
> 时间：2012-04-19T11:43:51.540
> 
> 标签：delphi, decimal, precision, teechart

我有一个数据库，它是 DBChart 的来源。问题是 DBChart 绘制原始浮点数（15 个数字）的图形，因此它看起来很粗糙。我尝试更改 TFloatField 的 Precision 和 DisplayFormat，但没有帮助。

我希望数据库有很大的精度，所以用户在绘制图形时可以自己选择。因此，在插入之前切割浮动是不愉快的。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:12:25.447

TeeChart Pro 源代码客户可以更改点值数据的“值”类型：Single、Double 和 Extended 修改 TeeDefs.inc，如下[所述](http://www.teechart.net/support/viewtopic.php?f=3&t=12368&p=53309&#p53309)。

# css - 对齐浏览器之间的中心差异

> ID：10227286
> 
> 赞同：1
> 
> 时间：2012-04-19T11:43:59.810
> 
> 标签：css, cross-browser

我想要实现的是将字符串居中同时将其强制到容器 div 的底部，但以下在不同的浏览器中会产生 3 种不同的结果。

```
<style>
         #outer {
            position: relative;
            background-color:blue;
            height: 50px;
            text-align: center;
         }

         #inner {
            bottom: 0px;
            position: absolute;
            background-color:red;
         }
        </style>
    </head>
    <body>
        <div id="outer">
            <span id="inner">
                aaaaaaaaaaaaaaaaaaaaaaa
            </span>
        </div>
    </body> 
```

Chrome 完美地将#inner 居中。Firefox 开始**从**完美的中心向右输出字符串，所以它看起来有点偏移，字符串越长，眼睛越明显。IE 从左侧开始输出文本。

有什么解决方法吗？哪种行为符合标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:52:36.497

嘿，我认为你应该像这样在你的 CSS 中给出 left 和 right :0

```
#inner {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:45:54.817

将 放在`text-align: center;`div#inner 上，然后将其从 div#outer 中移除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:46:30.587

您的内部应该有一个负边距，即元素宽度的 1/2。

```
#inner{
    position:absolute;
    left:50%;
    width:500px;
    margin-left:-250px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:50:55.907

仅当您在其上声明宽度时，才可能将内部元素垂直居中与绝对定位相结合，这仅在它是非内联元素时才有效。

所以你需要这个额外的规则：

```
#inner{
   display:inline-block;
   width:<yourWidth>px;
   margin-left:-<yourWidth/2>px;
   left:50%;
} 
```

或者，您可以执行以下操作：

```
#inner{
   display:block;
   left:0;
   text-align:center;
} 
```

旁注：根据规范 0 可能永远不会有一个单位，所以总是写`top:0;`而不是`top:0px;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T11:51:55.733

好吧，如果 CSS 变得古怪，你可以使用 jQuery。首先使用 CSS 隐藏内容，然后让 jQuery 居中并在加载内容时取消隐藏。像这样的东西应该工作：

```
$(document).ready(function() {
    var newWidth = ($('#outer').width() - $('#inner').width()) / 2;
    $('#inner').css({'visibility': 'visible', 'margin-left': newWidth});
}); 
```

这是未经测试的，但应该适用于任何条件。

# delphi - Indy 8 到 Indy 10 - 什么取代了 TIdLogDebug 组件？

> ID：10227289
> 
> 赞同：0
> 
> 时间：2012-04-19T11:44:12.423
> 
> 标签：delphi, indy, indy10, indy-8

我有一个用 Delphi 6 编写并使用 Indy 8 的项目。我需要将此项目升级到 Delphi 2005 并使用 Indy 10。

在 Delphi 2005 中，当我打开包含旧 Indy 组件的表单时，会出现以下两个错误：

> 属性 OnLogItem 不存在
> 
> 属性目标不存在

这两个错误都与 Indy 的`TIdLogDebug`组件有关。

我听说不是使用 ，而是`TIdLogDebug`必须使用`TIdLogEvent`。但是，该组件没有`OnLogItem`和`Target`属性。

我应该在 Indy 10 的组件中使用什么事件处理程序`TIdLogEvent`来替代 Indy 8 组件的`OnLogItem`事件`TIdLogDebug`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T22:16:02.537

`TIdLogDebug`本身仍然存在于 Indy 10 中，但与 Indy 8 的不同`TIdLogDebug`。 `TIdLogDebug`在 Indy 9 及更高版本中不再具有`Target`属性或`OnLogItem`事件。

Indy 8`TIdLogDebug`是 Indy 唯一的日志记录组件，它支持多种类型的输出 - 文件、调试器和事件。在 Indy 9 中，该功能被拆分为单独`TIdLogFile`的`TIdLogDebug`、 和`TIdLogEvent`组件（并添加了一个新`TIdLogStream`组件）。

在 Indy 9 及更高版本中，该`TIdLogEvent`组件将是正确的替代品。 `TIdLogEvent`有`OnReceived`、`OnSent`和`OnStatus`事件。Indy 8 没有区分不同方向的数据流`TIdLogDebug`，一切都通过单个`OnLogItem`事件汇集。每个数据流方向的日志消息都有不同的前缀。在 Indy 9 及更高版本中，现在每个方向都使用单独的事件，因此无法直接替换旧`OnLogItem`事件。您需要更新代码以适应较新的事件模型。

# c# - 检查 C# 中的有效日期是否无法正常工作

> ID：10227292
> 
> 赞同：1
> 
> 时间：2012-04-19T11:44:19.310
> 
> 标签：c#, validation, date

我正在使用以下函数来确定输入字符串是否为有效日期。

```
public static bool IsDate(string date)
        {
            DateTime Temp;

            if (DateTime.TryParse(date, out Temp))
                return true;
            else
                return false;
        } 
```

问题是当我输入“1997-09”时它返回true。我希望它检查完整的日期，如“1997-08-12”

而且没有固定日期格式。输入也可以是“2012 年 2 月 19 日”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:52:53.783

> And no there is no fix date format. Input could also be "19-Feb-2012"

There must be, otherwise it's nonesense. If you haven't defined how your system must behave you'd better stop coding and take a moment to define it.

You could use the [TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx) method which allows you to specify one or more formats you would like to handle.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:55:34.857

You should establish list of a correct date formats and then check with `DateTime.TryParseExact`, something like this:

```
string format = "yyyy-MM-dd";
DateTime dateTime;
if (DateTime.TryParseExact(dateString, format, CultureInfo.InvariantCulture,
    DateTimeStyles.None, out dateTime)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T11:55:34.843

one easy condition you can add:

```
 public static bool IsDate(string date)
    {
        DateTime Temp;
        return(DateTime.TryParse(date, out Temp)&&date.Length>=10)
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T11:52:21.147

Use DateTime.TryParse, you can specify the format then, more here. [http://msdn.microsoft.com/en-us/library/9h21f14e.aspx](http://msdn.microsoft.com/en-us/library/9h21f14e.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T11:50:54.103

可以直接返回解析结果：

```
public static bool IsDate(string value)
{
    DateTime date;
    return DateTime.TryParse(value, out date);
} 
```

它适用于您提供的格式（至少在当前文化“en-US”时）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T11:51:34.553

要解决此问题，您应该`datetime-format`在您的应用程序中定义 a。

在您访问的任何网页上，如果您看到一个编译表格，您可能也会看到一些日期字段，并且在它附近会出现类似以下内容：

`DD-MM-YYYY`, 或`MM/DD/YY`, 或其他东西。

Define for your application format, make it esplicit for the user and check on correctness according to *your* format.

Just an hypothetic example:

say user inserted a date and you store it into the string like `DD-MM-YYYY`, one of possible choice could be simply say :

```
if(dateTimeUserString.Split('-').Length < 3)
    //not valid string ! 
```

I repeat, this is just an example you should choose more appropriate way for your application.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T11:53:34.510

DateTime.TryParse does have an [overload](http://msdn.microsoft.com/en-us/library/9h21f14e%28v=vs.100%29.aspx) that takes an IFormatProvider to allow specification of custom formats. You may need to define multiple IFormatPrividers to check the various strings you may expect as valid.

Also, rather than the if/else, you could also shorten your code a bit by

```
return DateTime.TryParse(date, out Temp); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-19T12:17:26.517

Your code will run just fine and check the given date string if it can be a valid date using all of the **current culture's** date formats including this `19-Feb-2012` or `1997-09` of yours or even `19 february`.

This makes you flexible in date input.

But if flexibility is not what your are looking for then try to parse for one or more specific formats using `TryParseExact`.

# android - 如何修复 flex android 应用程序水平？

> ID：10227306
> 
> 赞同：0
> 
> 时间：2012-04-19T11:44:55.293
> 
> 标签：android, apache-flex, air

我正在开发一个在 android pad 上运行的应用程序，我需要修复水平布局。我知道使用 java，我可以在 xml 文件中设置属性，但在我的 flex 项目中找不到这样的文件。那么我怎样才能将应用程序水平固定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:47:51.167

AndroidManifest.xml -> 选项卡应用程序 -> 应用程序节点 -> 选择活动并在“屏幕方向”字段中选择横向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:56:46.010

在应用程序的描述符文件中设置为 `<aspectRatio>`。`landscape`您可以直接在 .src 文件夹中找到该文件`yourAppName-app.xml`。

请记住，当前版本的 Flash Builder 存在一个错误，即在 Flash Builder 模拟器中将横向标记的应用程序显示为纵向。但是，如果您部署应用程序，则会设置正确的纵横比。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T11:48:02.380

将 portret 模式的布局放置在 /res/layouts/ 将陆地空间模式的布局放置在 /res/layout-land

布局 xml 必须具有相同的名称，例如 mail.xml

# php - 如何在 PHP 中将数字更改为随机位置

> ID：10227309
> 
> 赞同：0
> 
> 时间：2012-04-19T11:45:01.370
> 
> 标签：php

我将如何将以下数字更改为 php 中的随机位置？

我需要爆炸数字吗？

40,52,78,81,25,83,37,77

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:46:47.970

```
$arr = explode(',', '40,52,78,81,25,83,37,77');
shuffle($arr);
echo implode(',', $arr); 
```

[http://ideone.com/sh2uH](http://ideone.com/sh2uH)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:46:34.823

所以你想打乱数组顺序？使用 PHP 的 shuffle 函数。

[http://php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

编辑：没有意识到你的数字是在一个字符串中。另一个答案总结了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:48:22.687

假设数字在一个字符串中：

```
$numbers = '40,52,78,81,25,83,37,77';
$numbers = explode(',',$numbers);
shuffle($numbers);
$numbers = implode(',',$numbers); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:49:48.153

尝试这样的事情。

```
$string = "40,52,78,81,25,83,37,77";
$numbers = explode(",", $string);
shuffle($numbers);
print_r($numbers); 
```

`explode`将字符串分解成一个数组，通过以下方式分隔条目`,`

`shuffle`将通过引用对数组进行操作并将它们按随机顺序排列

# passwords - OPenLDAP 帐户锁定

> ID：10227315
> 
> 赞同：0
> 
> 时间：2012-04-19T11:45:19.683
> 
> 标签：passwords, openldap

我有 openldap 服务器，许多应用程序正在通过 LDAP 进行身份验证设置。我正在为应用程序使用 Auth 用户，这些应用程序一次又一次地被锁定，因为我必须重置 Auth 用户的密码才能使我的应用程序再次开始身份验证。

我已经为我的 Auth 用户实现了 ppolicy 和异常。这似乎工作了一段时间，但帐户锁定又开始了。我有 5 次错误密码尝试的帐户锁定策略，当我尝试手动输入错误密码超过 5 次时，除了 Auth 用户之外，它工作正常。所以我怀疑帐户锁定可能还有其他一些系统策略可能是 250 +错误的尝试左右......

我只是在寻找一个选项来使 Auth 用户无限制地尝试错误密码。可能吗？是怎么回事？

# c++ - 异常声明中的派生对象类型是否意外？

> ID：10227317
> 
> 赞同：1
> 
> 时间：2012-04-19T11:45:23.773
> 
> 标签：c++, exception-handling

在 C++ 中，在异常声明说明符中，如果我声明了一个基类，然后抛出了一个派生类，这是一个意外异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:51:05.320

> 在 C++ 中，在异常声明说明符中，如果我声明了一个基类，然后抛出了一个派生类，这是一个意外异常吗？

不，这是允许的。

参考： **C++03 15.4 异常规范**

**第 6 段：**

> 一个异常规范可以包含多次相同的类型，并且可以包含通过继承相关的类，即使这样做是多余的。异常规范还可以包括类 std::bad_exception (18.6.2.1)。

第 8 段有一个相关的例子
**：**

```
[Example:
class X { };
class Y { };
class Z: public X { };
class W { };
void f() throw (X, Y)
{
    int n = 0;
    if (n) throw X(); // OK
    if (n) throw Z(); // also OK    <------- Example of the exact scenario you posted
    throw W(); // will call unexpected()
}
—end example] 
```

* * *

请注意，异常规范被认为是失败的实验，大多数编译器都没有正确实现它们。所以避免（而不是）使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:50:55.470

我知道这是可怕的非答案，但请不要使用异常规范：

[http://www.gotw.ca/publications/mill22.htm](http://www.gotw.ca/publications/mill22.htm)

引用相关部分：

> 道德#1：永远不要编写异常规范。
> 
> 道德＃2：除了可能是一个空的，但如果我是你，我什至会避免。

#2 的警告是 C++11 中的“noexcept”。

# shell - Bash：如何在路径中搜索可执行文件？

> ID：10227319
> 
> 赞同：1
> 
> 时间：2012-04-19T11:45:33.257
> 
> 标签：shell, path

我在 /usr/bin 中有一个“gtags”可执行文件，但这是一个旧版本。然后我编译了一个新的 gtags 并且“make install”把它放在 /usr/local/bin 中。然后我删除了 /usr/bin 中的那个。但是当我在 shell 中输入“gtags”时，它告诉我找不到“/usr/bin/gtags”。但是我在 /usr/local/bin 中有一个“gtags”，而 /usr/local/bin 在 PATH 中。另外，在我的 PATH 中，在 /usr/bin 之前搜索了 /usr/local/bin，为什么 shell 只检查 /usr/bin 中的“gtags”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:35:53.183

使用 bash 内置命令`hash`：

```
[root@localhost ~]# touch /bin/test.sh
[root@localhost ~]# chmod 755 /bin/test.sh
[root@localhost ~]# test.sh
[root@localhost ~]# mv /bin/test.sh /usr/local/bin/
[root@localhost ~]# test.sh
-bash: /bin/test.sh: No such file or directory
[root@localhost ~]# hash test.sh
[root@localhost ~]# test.sh 
```

发生这种情况的原因是 bash “缓存”，其中二进制文件位于 $PATH 中，因此它不必在每次想要运行它时都找到它。这是一个性能问题。如果你运行不带参数的“hash”，它会报告它运行了哪些命令，运行了多少次，以及它从哪里运行。

# c# - 客户端的 WCF 服务 - SSL 证书

> ID：10227325
> 
> 赞同：0
> 
> 时间：2012-04-19T11:45:53.590
> 
> 标签：c#, wcf, ssl

我需要什么来保护客户端、服务器、AdminConsole（在另一台客户端计算机上）之间的通信。我有以下情况：

AdminConsole (Client2) 执行一些操作（调用 WCF 服务器）--> WCF 服务器（处理操作并通过另一个 WCF 调用将其传输到特定客户端）--> Client1（在 Windows 服务中使用 WCF 服务）

我是否必须为所有客户端（如 Client1）创建 SSL 证书？-> 那么对于 100 个客户端 = 100 个客户端 SSL 证书？还是仅使用 SSL 证书保护 WCF 服务器就足够了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:00:39.693

在某种程度上，这取决于你想要做什么。

如果您只是想让客户端知道它连接到正确的服务器并使通信保密并保证完整性（没有人可以在您不知情的情况下改变事情），那么您只需要服务器上的 SSL 证书

如果您需要服务器知道客户端是谁以便它可以进行审计/授权，那么客户端必须有某种方式向服务器标识自己。根据您的要求，这里有许多选项，从 Windows 凭据到自定义用户名和密码，从客户端证书到 SAML 令牌

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:49:11.257

您只需要服务器的 SSL 证书 - 每个客户端都不需要一个 :)

# iphone - 自己的视图控制器模板

> ID：10227327
> 
> 赞同：1
> 
> 时间：2012-04-19T11:46:03.040
> 
> 标签：iphone, objective-c, ipad

在这里我想问一个关于 iphone 或 ipad 的视图控制器模板的问题。

问题：我想设计一个带有一些图像的视图控制器并将其作为通用模板，并且也需要将其用作其他视图控制器的模板。（如果需要，还包含一些按钮和标签）

（即）当我调用那个类时，它的组件应该自动继承给调用类。

可能吗？

如果有人回答我合适的或有利的，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:48:08.860

我不知道 adMob 是如何工作的，但是像其他所有东西一样，您可以创建一个 BaseViewController，您可以在其中添加您的 adMob（在 viewDidLoad 方法中），然后所有其他 viewControllers 可以子类这个 BaseViewController。只需调用 [super viewDidLoad]; 在您的 viewControllers 的 viewDidLoad 方法中，您将拥有它...

希望这可以解决您的问题... :) 这是我通常做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:48:42.973

听起来你只需要从一个公共基类派生你的视图控制器。有没有你想做的事情不是继承提供的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:48:50.593

对的，这是可能的。

您需要为您的组件创建 @property 以在其他类中重新使用它们

**在第一类：**

```
@property(nonatomic,retain) NSMutableArray *exercisesArray; 
```

**在类 2 中：**

```
@property(nonatomic,retain) NSMutableArray *array; 
```

nextViewController *start = [[nextViewController alloc]initWithNibName:@"nextViewController" bundle:nil];

next.array = 练习数组

# android - 不知道 BitmapFactory.decodeByteArray 是否可以理解我收到的字节数组

> ID：10227330
> 
> 赞同：0
> 
> 时间：2012-04-19T11:46:07.327
> 
> 标签：android, bitmap

我有这个应用程序，我必须在其中接收字节数组形式的图像。该图像之前已以这种方式发送到服务器：

```
 image = image.createScaledBitmap((Bitmap) extras.get("data"), 380, 400, true);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        imagen.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] byteArray = stream.toByteArray(); 
```

图像被发送到服务器。应用程序的另一部分调用服务器以获取包含图像的 JSON。我将它存储在一个字符串中，然后我用它`string.getBytes()`来获取字节数组，如下所示：

```
byte[] array=stringimage.getbytes(); 
```

数组类似于：119,80,78,71,13,10...

我现在想“好的，我现在使用 BitmapFactory，decodeByteArray 并获取我的位图”，但它返回 null。我开始谷歌搜索并在 Stack Overflow 中查看这里，我看到了解决问题的各种方法。其中之一：

```
image = Bitmap.createBitmap(380, 400, Bitmap.Config.RGB_565);
int row = 0, col = 0;
for (int i = 0; i < array.length; i += 3) {
    image.setPixel(col++, row, array[i + 2] & array[i + 1] & array[i]);

    if (col == 380) {
        col = 0;
        row++;

    }
} 
```

这有点像解码图像并手动设置像素。

它不起作用。

另一个：

```
byte[] array=Base64.decode(fotostring.getBytes(),Base64.DEFAULT); 
```

它不起作用

我的问题是：我必须如何让我负责服务器端的伙伴给我发送阵列？以哪种格式？他没有以任何方式触摸我之前发送给他的图像。他需要做吗？

或者，我必须如何管理字节数组？我不需要“翻译”成另一种格式，decodeByteArray 可以理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:25:37.263

The problem you are facing is because of the encoding / decoding. The byte array that you received from the image is binary and cannot be interpreted as text. For transferring it over a text-based protocol (I assume you would have used HTTP), you will have to encode it into a textual format. The symmetrical operation need to be performed when you receive it from the server.

When you send it to the server, encode in a format (say Base64) and use the same format to decode the received string.

# sql-server-2008 - Fluent Nhibernate 和 Sql Server 私有设置器错误

> ID：10227341
> 
> 赞同：8
> 
> 时间：2012-04-19T11:46:35.360
> 
> 标签：sql-server-2008, fluent-nhibernate, compiler-errors, setter

我正在尝试使用带有 sql server express 的 fluent nhibernate 完成一些第一步，以在我的项目中添加此功能。但是遇到了一些错误。由于我是休眠的新手，有一段时间无法解决问题。我有一个实体

```
Id { get; private set; } 
```

访问器。并且该实体映射到 sql server 中具有标识 {1,1} 列的表。但是在创建会话工厂的过程中，我得到了一个错误：

```
The following types may not be used as proxies:Entity: method set_Id should be 'public/protected virtual' or 'protected internal virtual' 
```

我知道私有设置器用于封装此属性的设置，但是为什么会出现此错误？PS： fluent for nhibernate 网站上的示例正在使用 sqllite db，一切都很好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T14:45:16.383

这是一个让包括我在内的许多 NH/FNH 用户感到悲痛的问题。

直到最近，NHibernate 还允许使用代理对象的私有 setter。但从**NH 3.2 开始，不再允许使用私有设置器**- 正如错误消息所述，它们必须是“'**公共/受保护的虚拟'或'受保护的内部虚拟**'”。

对于现有的许多 FNH/NH 示例代码来说，这是一个重大更改，并且对新手来说尤其令人困惑。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T13:36:07.003

将属性声明为`public virtual int Id { get; protected set; }`。NHibernate 生成的代理对象将能够设置该属性。

另一种解决方案是使用支持字段：

```
private int id;
public int Id
{
  get { return id; }
} 
```

然后使用映射：

```
Map(x => x.Id).Access.CamelCaseField(); 
```

# facebook-graph-api - 从 Facebook 搜索照片和视频

> ID：10227342
> 
> 赞同：0
> 
> 时间：2012-04-19T11:46:36.033
> 
> 标签：facebook-graph-api

我们是否可以像在 flickr 中使用我们搜索照片的标签一样，通过标签作为输入参数从 facebook 搜索公共照片和视频，并且 flickr API 返回照片列表。

任何帮助或建议将不胜感激。

谢谢高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:51:11.213

上次我检查时，上传到 Facebook 的照片没有标签。因此，无法返回与标签匹配的照片。你可以做的是在 Facebook 上搜索群组或应用程序，然后在那里检索公共照片。

搜索 URL 格式为[https://graph.facebook.com/search?q=watermelon&type=post&access_token=AAAAAAITEghMBAHwKSuFoX7OpcyCezYGO1JkVzBaQq6fBdXoHPayxZCxta4EZC0fYSLPjO16Yf9FKOAkhOHrU2ROZCZB9fcbLsDtPFgy67dK5TXOeYJqG](https://graph.facebook.com/search?q=watermelon&type=post&access_token=AAAAAAITEghMBAHwKSuFoX7OpcyCezYGO1JkVzBaQq6fBdXoHPayxZCxta4EZC0fYSLPjO16Yf9FKOAkhOHrU2ROZCZB9fcbLsDtPFgy67dK5TXOeYJqG)，其中 q 是您的查询。更多信息可以在这里找到。[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T03:25:06.660

这是一个应用程序，可让您[搜索 facebook 照片](http://www.searchfacebookphotos.com)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T07:31:56.580

下面的 api 查询将返回带有该 object_id 标记的所有内容。

> https://graph.facebook.com/[object_id]/tagged

这方面的一个例子是寻找所有标记 Heat Ultra Lounge（我正在从事的项目）的东西。要获取使用此标签标记的对象，我将使用以下获取地址并包含 &access_token=[my or my app's access token]。像这样：

> https://graph.facebook.com/118613151504271/tagged?access_token=[youraccesstoken]

# xml - XSLT - 追加同级

> ID：10227347
> 
> 赞同：2
> 
> 时间：2012-04-19T11:46:43.490
> 
> 标签：xml, xslt, append, flat, siblings

我正在尝试使用 XSLT`context-param`作为最后一个兄弟姐妹。没有共同的父元素，所以任务有点难。

我想附加以下元素：

```
<context-param>
    <param-name>miku</param-name>
    <param-value>kawaii</param-value>
</context-param> 
```

作为以下 xml 中的最后一个`context-param`元素（例如，所有`context-param`元素必须彼此相邻，它们不能分散在 xml 中的任何位置）：

```
<web-app>
  <not_interesting_element1/>
  <not_interesting_element2/>

  <context-param>
    <param-name>not_interesting_param_key1</param-name>
    <param-value>kawaii</param-value>
  </context-param>
  <context-param>
    <param-name>not_interesting_param_key2</param-name>
    <param-value>kawaii</param-value>
  </context-param>
  <context-param>
    <param-name>parameterThatsGuaranteedToBeHere</param-name>
    <param-value>someValue</param-value>
  </context-param>

  <not_interesting_element3/>
  <not_interesting_element4/>
  <!-- ... servlets, ... -->
</web-app> 
```

结果应如下所示：

```
<web-app>
  <not_interesting_element1/>
  <not_interesting_element2/>

  <context-param>
    <param-name>not_interesting_param_key1</param-name>
    <param-value>kawaii</param-value>
  </context-param>
  <context-param>
    <param-name>not_interesting_param_key2</param-name>
    <param-value>kawaii</param-value>
  </context-param>
  <context-param>
    <param-name>parameterThatsGuaranteedToBeHere</param-name>
    <param-value>someValue</param-value>
  </context-param>
  <context-param>
      <param-name>miku</param-name>
      <param-value>kawaii</param-value>
  </context-param>

  <not_interesting_element3/>
  <not_interesting_element4/>
  <!-- ... servlets, ... -->
</web-app> 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:20:23.000

**这种转变：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pElemToAdd">
    <context-param>
        <param-name>miku</param-name>
        <param-value>kawaii</param-value>
    </context-param>
 </xsl:param>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="context-param[last()]">
  <xsl:call-template name="identity"/>
  <xsl:copy-of select="$pElemToAdd"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时：**

```
<web-app>
    <not_interesting_element1/>
    <not_interesting_element2/>
    <context-param>
        <param-name>not_interesting_param_key1</param-name>
        <param-value>kawaii</param-value>
    </context-param>
    <context-param>
        <param-name>not_interesting_param_key2</param-name>
        <param-value>kawaii</param-value>
    </context-param>
    <context-param>
        <param-name>parameterThatsGuaranteedToBeHere</param-name>
        <param-value>someValue</param-value>
    </context-param>
    <not_interesting_element3/>
    <not_interesting_element4/>
    <!-- ... servlets, ... -->
</web-app> 
```

**产生想要的正确结果：**

```
<web-app>
   <not_interesting_element1/>
   <not_interesting_element2/>
   <context-param>
      <param-name>not_interesting_param_key1</param-name>
      <param-value>kawaii</param-value>
   </context-param>
   <context-param>
      <param-name>not_interesting_param_key2</param-name>
      <param-value>kawaii</param-value>
   </context-param>
   <context-param>
      <param-name>parameterThatsGuaranteedToBeHere</param-name>
      <param-value>someValue</param-value>
   </context-param>
   <context-param>
      <param-name>miku</param-name>
      <param-value>kawaii</param-value>
   </context-param>
   <not_interesting_element3/>
   <not_interesting_element4/><!-- ... servlets, ... -->
</web-app> 
```

**说明**：

1.  身份规则“按原样”复制每个节点。

2.  有一个模板，覆盖身份模板。此模板匹配作为其父级子级`context-param`的所有元素的最后一个元素。`context-param`

3.  在覆盖模板中执行两个操作；当前节点通过对身份规则的调用被复制；然后将要附加的元素复制到输出。为了方便和灵活，我们假设要附加的元素作为参数传递给转换。

# c - 无法连接 strtok 的输出变量。strcat 和 strtok

> ID：10227353
> 
> 赞同：1
> 
> 时间：2012-04-19T11:47:18.200
> 
> 标签：c, pointers, concatenation, delimiter, strtok

我在这个程序上花了几个小时，并在网上花了几个小时搜索我的方法的替代方案，整个晚上都被崩溃和错误所困扰……

我有几件事想用这段代码实现。首先我会解释我的问题，然后我会发布代码，最后我会解释我对程序的需求。

程序只输出单个单词，而 concatenate 函数什么也不做。这似乎应该足够简单来修复......

我的第一个问题是我似乎无法让 concatenate 函数工作，我使用了不起作用的通用 strcat 函数，我在互联网上找到的另一个版本也没有（该函数在这里使用，它被称为“mystrcat” ）。我想让程序读取一个字符串并删除“分隔符”以创建一个由原始字符串中的每个单词组成的单个字符串。我正在尝试使用 strtok 和 strcat 函数。如果有更简单或更简单的方法，请我全神贯注。

另一个问题，不一定是问题，而是一个丑陋的烂摊子：main 后面的七行。我更喜欢按如下方式初始化我的变量： char variable[amt]; 但是我为 strtok 找到的代码使用了指针，而 strcat 函数的代码使用了指针。从长远来看，更好地理解字符串的指针和地址可能会帮助我。但是，我想以任何必要的方式摆脱其中的一些行。我不能有 6 行仅用于 2 个变量。当我有 10 个变量时，我不希望顶部有 30 行......</p>

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *mystrcat(char *output, char *firstptr);

int main() {

char str[] = "now # is the time for all # good men to come to the # aid of their     country";
char delims[] = "# ";
char resultOrig[70];    //was [20];
char firstOrig[20];
//char *result = NULL, *first = NULL;
char result = resultOrig;    //was result = &resultOrig;
char first = firstOrig;    //was   first = &firstOrig;

first = strtok( str, delims );

while( first != NULL ) {
    mystrcat(resultOrig, firstOrig);
    printf( "%s ", first );
    printf("\n %s  this should be the concat\'d string so far\n", resultOrig);
    first = strtok( NULL, delims );

}
system("pause");
return 0;
}

char *mystrcat(char *resultptr, char *firstptr)
{
char *output = resultptr;

while (*output != '\0')
    output++;
while(*firstptr != '\0')
{
    *output = *firstptr;
    output++;
    firstptr++;
}
*output = '\0';

return output;
} 
```

这现在只是一个测试程序，但我打算将它用于文件列表/数据库。我的文件有下划线、连字符、句号、括号和数字；我想将所有这些都设置为“分隔符”。我正计划通过一个循环，在那里我将删除一个分隔符（每个循环从 _ 更改为 - 到 . 等等）并创建一个字符串，我可能想用空格或句点替换分隔符。有些文件中已经有空格以及我想“分隔”的特殊字符。

我打算通过扫描文本文件来完成所有这些工作。在文件中，我也有一个这种格式的大小：“2,518,6452”。我希望我可以按字母顺序或大小、升序或降序对我的数据库进行排序。这只是一些附加信息，可能有助于了解我上面的具体问题。

下面我包含了一些关于这些名称如何出现的虚构示例。my_file(2009).ext second.File-group1.extls the.third.file-vol30.lmth

我将这篇文章的重点放在：关于如何让连接函数工作或替代 strcat 和/或 strtok 的问题。以及寻求帮助以整理不必要或冗余的代码。

我感谢所有的帮助，甚至感谢所有阅读我帖子的人。

太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:33:09.150

`strcat`如果你使用`first`而不是`firstOrig`在你的循环中会工作。不需要`mystrcat`。可以简化为：

```
#include <stdio.h>
#include <string.h>

int main() {
    char str[] = "now # is the time for all # good men to come to the # aid of their     country";
    char delims[] = "# ";
    char result[100] = "";  /* Original size was too small */
    char* token;
    token = strtok(str, delims);
    while(token != NULL) {
        printf("token = '%s'\n", token);
        strcat(result, token);
        token = strtok(NULL, delims);
    }
    printf("%s\n", result);
    return 0;
} 
```

输出：

```
token = 'now'
token = 'is'
token = 'the'
token = 'time'
token = 'for'
token = 'all'
token = 'good'
token = 'men'
token = 'to'
token = 'come'
token = 'to'
token = 'the'
token = 'aid'
token = 'of'
token = 'their'
token = 'country'
nowisthetimeforallgoodmentocometotheaidoftheircountry 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:54:52.747

您尚未初始化以下两个字符串：

```
char resultOrig[20];
char firstOrig[20]; 
```

并且您正在向它们附加字符。将它们更改为：

```
char resultOrig[20] = "";
char firstOrig[20] = ""; 
```

字符数组的名称也给出了它的起始地址。所以

```
result = &resultOrig;
first = &firstOrig; 
```

应该：

```
result = resultOrig;
first = firstOrig; 
```

改变

```
mystrcat(resultOrig, firstOrig); 
```

至

```
mystrcat(resultOrig, first); 
```

也使`resultOrig`足够大以容纳串联，例如：

```
char resultOrig[100] = ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:35:32.533

这里有几个问题：

1.  来回缺少初始化（正如 codaddict 指出的那样）`resultOrig`。`firstOrig`

2.  `first = &firstOrig`不会做你想做的事。你稍后再做`first = strtok(str, delims)`，它`first`指向`str`. 它不会将数据读入`firstOrig`.

3.  您分配小缓冲区（仅 20 个字节）并尝试用比这更多的内容填充它们。它会溢出堆栈。导致讨厌的错误。

# iphone - 我如何管理 UItableview 中没有行的部分

> ID：10227355
> 
> 赞同：2
> 
> 时间：2012-04-19T11:47:35.750
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我正在开发一个标签栏应用程序，我需要在其中

我有一个表格视图，其中有 9 行（帐户组的名称），它们位于一个数组中。当我选择任何行时，它会打开另一个视图，然后我输入`AcctTitle`并保存它。当我单击在另一个选项卡上时，它会打开一个表格视图，它应该根据帐户组显示行。

我的意思是，当我在上一个选项卡中选择 xxx 组并逐个输入 5 个帐户标题并保存时，在其他选项卡中它应该显示 xxx 组作为部分的标题，并在该部分中显示 5 个标题作为行。

不同的组有不同的行（两个不同的选项卡）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:20:51.367

使用这两种方法

```
//For Number of section
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

//For Number of Cell
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:56:51.703

试用：

```
-(void)viewDidAppear:(BOOL)animated
{
    [tableview reloadData]
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:19:44.377

您只需使用这些方法更改它们都在不同的不同组中的部分值。

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
   {
   if(section==0)
   {
    //what ever you want
   }
   if(section==1)
   {
   //what ever you want
    }
   }

  - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
  {
  if(section==0)
  {
  //what ever you want
    }
  if(section==1)
  {
  //what ever you want
  }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:24:19.187

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T14:03:45.047

定义一个包含您需要显示的部分列表的数组。并且在

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{ return [urSectionlistArray count]} 
```

并且在方法中

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{ return [urSectionlistArray objectAtIndex:section]count]; 
```

根据定义的不同部分定义行数。

你可以在方法中定义标题的标题

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{

return [urSectionlistArray objectAtIndex:section]; 
```

}

你可以试试上面的方法..

# iphone - 在 NSUserdefaults 问题中存储 custom_button？

> ID：10227357
> 
> 赞同：1
> 
> 时间：2012-04-19T11:47:36.050
> 
> 标签：iphone, ipad, nsuserdefaults

我使用以下代码将我的“自定义按钮”存储在 NSUserdefaults 中。但是在将对象转换为 NSdata 时出现错误“[UIImage encodeWithCoder:]: unrecognized selector sent to instance”。这里的“自定义按钮”是 UIButton 类. 有谁知道为什么...？请帮我。

```
 Custom_button *lock11 = (Custom_button*)[menu1 viewWithTag:100];
                 NSLog(@"opened lock1 ========= %@",lock11);
                 lock11.is_menu_lock_opened = YES; 

                 NSData *myEncodedObject = [NSKeyedArchiver archivedDataWithRootObject:lock11]; //[NSKeyedArchiver archivedDataWithRootObject:lock11];
                 [prefs setObject:myEncodedObject forKey:@"set1lock"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:00:45.527

> NSUserDefaults 类提供方便的方法来访问常见类型，例如浮点数、双精度数、整数、布尔值和 URL。默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。如果要存储任何其他类型的对象，通常应该将其归档以创建 NSData 的实例。

不直接映射到属性列表对象的对象`NSData`通过发送编码器并对其内容进行编码来转换。`[UIImage encodeWithCoder:]`. 他们需要遵守`NSCoding`协议才能使其工作。您会发现这`UIImage`在 iOS 5 之前并不能符合 NSCoding 协议。如果您想在 iOS 5 之前进行部署，您必须自己解决一些问题，方法是在您的自定义按钮类中实现 NSCoding 并以不同的方式存储该图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:07:46.667

将此方法实现到您的 Custom_button 类中

所有对象的 initWithCoder 和 encodeWithCoder

```
-(id) initWithCoder: (NSCoder *)coder {

       self = [[CastInnerListData alloc] init];
       if (self != nil) {       
           self.object1 = [coder decodeObjectForKey:@"object1"];
           self.object2 = [coder decodeObjectForKey:@"object2"];    
    }
    return self;
}

-(void) encodeWithCoder: (NSCoder *)coder{

      [coder encodeObject:object1 forKey:@"object1"];
      [coder encodeObject:object2 forKey:@"object2"];
} 
```

[更多详情请点击这里](http://my-ios-experience.blogspot.in/2013/11/save-and-retrieve-custom-object-from.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:54:43.557

好吧，稍微搜索一下就会很快给你答案：

[UIImage encodeWithCoder 识别选择器？](https://stackoverflow.com/questions/6633077/uiimage-encodewithcoder-urecognised-selector)

# php - 如何在其他两个已知字符串之间匹配一个字符串，而不用 REGEX 匹配其他字符串？

> ID：10227358
> 
> 赞同：0
> 
> 时间：2012-04-19T11:47:38.923
> 
> 标签：php, regex

我想在其他两个字符串之间提取一个字符串。字符串恰好在 HTML 标记内，但我想避免讨论我是否应该使用正则表达式解析 HTML（我知道我不应该并且已经解决了 stristr() 的问题，但想知道该怎么做用正则表达式。

一个字符串可能如下所示：

`...uld select &#8220;Apply&#8221; below.<br/><br/><b>Primary Location</b>: United States-Washington-Seattle<br/><b>Travel</b>: Yes, 75 % of the Time <br/><b>Job Type</b>: Standard<br/><b>Region</b>: US Service Lines: ASL - Business Intelligence<br/><b>Job</b>: Business Intelligence<br/><b>Capability Group</b>: Con/Sol - BI&C<br/><br/>LOC:USA`

我有兴趣`<b>Primary Location</b>: United States-Washington-Seattle<br/>`并想提取“美国-华盛顿-西雅图”

我尝试`'(?<=<b>Primary Location</b>:)(.*?)(?=<br/>)'`了在 RegExr 但不是 PHP 中有效的方法：

`preg_match("/(?<=<b>Primary Location</b>:)(.*?)(?=<br/>)/", $description,$matches);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:52:05.390

您用作`/`正则表达式分隔符，因此如果您想逐字匹配或使用不同的分隔符，则需要对其进行转义

```
 preg_match("/(?<=<b>Primary Location</b>:)(.*?)(?=<br/>)/", $description,$matches); 
```

到

```
preg_match("/(?<=<b>Primary Location<\/b>:)(.*?)(?=<br\/>)/", $description,$matches); 
```

或这个

```
preg_match("~(?<=<b>Primary Location</b>:)(.*?)(?=<br/>)~", $description,$matches); 
```

**更新**

我刚刚在 www.writecodeonline.com/php 和

```
$description = "uld select “Apply” below.<br/><br/><b>Primary Location</b>: United States-Washington-Seattle<br/><b>Travel</b>: Yes, 75 % of the Time <br/><b>Job Type</b>: Standard<br/><b>Region</b>: US Service Lines: ASL - Business Intelligence<br/><b>Job</b>: Business Intelligence<br/><b>Capability Group</b>: Con/Sol - BI&C<br/><br/>LOC:USA";
preg_match("~(?<=<b>Primary Location</b>:)(.*?)(?=<br/>)~", $description, $matches);

print_r($matches); 
```

正在工作中。输出：

> 数组（ [0] => 美国-华盛顿-西雅图 [1] => 美国-华盛顿-西雅图）

**您还可以摆脱捕获组并执行**

```
$description = "uld select “Apply” below.<br/><br/><b>Primary Location</b>: United States-Washington-Seattle<br/><b>Travel</b>: Yes, 75 % of the Time <br/><b>Job Type</b>: Standard<br/><b>Region</b>: US Service Lines: ASL - Business Intelligence<br/><b>Job</b>: Business Intelligence<br/><b>Capability Group</b>: Con/Sol - BI&C<br/><br/>LOC:USA";
preg_match("~(?<=<b>Primary Location</b>:).*?(?=<br/>)~", $description, $matches);

print($matches[0]); 
```

输出

> 美国-华盛顿-西雅图

# python - 理解正则表达式

> ID：10227359
> 
> 赞同：2
> 
> 时间：2012-04-19T11:47:50.337
> 
> 标签：python, c, regex, gcc

我正在尝试解析由 gcc 生成的映射文件以获取函数地址。这里有一个可能的 [解决方案](https://stackoverflow.com/questions/48426/whats-the-best-tool-to-graphically-display-memory-layout-from-a-map-file)（python），但它不适合我。

我试图了解所提供的解决方案。它有两个复杂的正则表达式..

```
m = re.search('^\[([0-9 ]+)\]\s+(.+)\s*$',line )
m = re.search('^([0-9A-Fx]+)\s+([0-9A-Fx]+)\s+(\[([ 0-9]+)\]|\w+)\s+(.*?)\s*$', line) 
```

谁能解释一下RE在寻找什么？

是否有任何其他可行的解决方案可以从 gcc 生成的 mapfile 获取函数地址？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T11:54:31.320

```
^\[([0-9 ]+)\]\s+(.+)\s*$

^                  start of the line
\[                 literal [
([0-9 ]+)          group of 0-9 or space, one or more times
\]                 literal ]
\s+                one or more spaces
(.+)               group of anything one or moretimes
\s*                zero or more spaces 
$                  end of line

eg: "[5 5 5] blah"

gives:
    group1 = "5 5 5"
    group2 = blah

^([0-9A-Fx]+)\s+([0-9A-Fx]+)\s+(\[([ 0-9]+)\]|\w+)\s+(.*?)\s*$

^                  start of line
([0-9A-Fx]+)       group of chars one or more times
\s+                one or more spaces
([0-9A-Fx]+)       group of chars one or more times
\s+                one or more spaces
(
    \[             literal [
    ([ 0-9]+)      group of char 1 or more times
    \]             literal [
    |              or
    \w+            word char, one or more times
)
\s+                one or more spaces
(.*?)              any char zero or more times, non greedy
\s*                zero or more spaces
$                  end of line 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T11:56:25.157

调试 Python 正则表达式的一种方法是在创建模式对象时使用未记录的 re.DEBUG 标志。

```
>>> import re
>>> re.compile('^\[([0-9 ]+)\]\s+(.+)\s*$', re.DEBUG)
at at_beginning
literal 91
subpattern 1
  max_repeat 1 65535
    in
      range (48, 57)
      literal 32
literal 93
max_repeat 1 65535
  in
    category category_space
subpattern 2
  max_repeat 1 65535
    any None
max_repeat 0 65535
  in
    category category_space
at at_end
<_sre.SRE_Pattern object at 0x01CE8950> 
```

它显然不是 100% 易于阅读，但如果您对匹配的工作原理有所了解并发现缩进很有帮助，它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:56:59.697

```
pattern1 = re.compile (
r"""
^                       # start of string
\[                      # literal [
([0-9 ]+)               # Collection of numbers and spaces
\]                      # literal ]
\s+                     # whitespace
(.+)                    # any string of at least one character
\s*                     # possible whitespace
$                       # end of string
""", re.VERBOSE )

pattern2 = re.compile (
r"""
^                       # Start of string
([0-9A-Fx]+)            # Collection of hexadecimal digits or 'x'
\s+                     # Whitespace
([0-9A-Fx]+)            # Collection of hexadecimal digits or 'x'
\s+                     # Whitespace
(\[([ 0-9]+)\]|\w+)     # A collection of numbers, or space, inside [] brackets
\s+                     # Whitespace
(.*?)                   # Any string
\s*                     # Possible whitespace
$                       # End of string
""", re.VERBOSE) 
```

这些实际上是写得很糟糕的正则表达式。

我敢打赌，`([0-9A-Fx]+)`子组实际上是为了匹配十六进制数字，例如`0x1234DEADBEEF`. 但是，它们的编写方式也可以与荒谬`xxxxxxxxxx`相匹配。`0x[0-9A-F]+`在这里会更合适。

在第二个正则表达式中还使用了非贪婪匹配`(.*?)`，无论如何这将被迫贪婪，因为正则表达式必须匹配整行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:04:27.267

第一个是：

```
^         start of string
\[        a '['
([0-9 ]+) one or more digits and spaces
\]        a ']'
\s+       whitespace
(.+)      anything
\s*       optional whitespace
$         end of string 
```

例子：

```
"[12345] Hello"
"[06 7] \t Foo.Bar!  " 
```

第二个是：

```
^            start of string
([0-9A-Fx]+) hex digits and x
\s+          whitespace
([0-9A-Fx]+) hex digits and x
\s+          whitespace
(            either:
\[             a '['
([ 0-9]+)      digits and spaces
\]             a ']'
|            or:
\w+            a word
)            end group
\s+          whitespace
(.*?)        optional anything (non-greedy)
\s*          optional whitespace
$            end string 
```

例子：

```
"0xF00 0x1234 [89] Foo"
"78x9 023 Foobar " 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T15:48:17.920

让我给你一个宝贵的链接来找出这些正则表达式。

[点击这个](http://rick.measham.id.au/paste/explain.pl?regex=%5E%5C%5B%28%5B0-9%20%5D%2b%29%5C%5D%5Cs%2b%28.%2b%29%5Cs%2a%24)

您的第一个正则表达式将被解析并解释为：

```
NODE                     EXPLANATION
--------------------------------------------------------------------------------
  ^                        the beginning of the string
--------------------------------------------------------------------------------
  \[                       '['
--------------------------------------------------------------------------------
  (                        group and capture to \1:
--------------------------------------------------------------------------------
    [0-9 ]+                  any character of: '0' to '9', ' ' (1 or
                             more times (matching the most amount
                             possible))
--------------------------------------------------------------------------------
  )                        end of \1
--------------------------------------------------------------------------------
  \]                       ']'
--------------------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
--------------------------------------------------------------------------------
  (                        group and capture to \2:
--------------------------------------------------------------------------------
    .+                       any character except \n (1 or more times
                             (matching the most amount possible))
--------------------------------------------------------------------------------
  )                        end of \2
--------------------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
--------------------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string 
```

我假设您可以弄清楚如何解析第二个。

干杯。

# ios - 用于在本机 Facebook iPhone 应用程序中共享 URL 的自定义 URL 方案

> ID：10227370
> 
> 赞同：11
> 
> 时间：2012-04-19T11:48:27.857
> 
> 标签：ios, facebook

我知道本机 Facebook iPhone 应用程序可用的自定义 URL 方案：

[Facebook iPhone 应用程序支持的所有自定义 URL 方案有哪些？](https://stackoverflow.com/questions/5707722/what-are-all-the-custom-url-schemes-supported-by-the-facebook-iphone-app)

但是我找不到一种方法来以这种方式将 URL 发布到我的墙/时间线，Facebook 会像使用 touch.facebook.com/sharer.php 文件一样收集/显示网站标题和缩略图。

到目前为止我看到的唯一方法是打电话

```
fb://publish/?text=www.domain.com 
```

但这只会发布指向我的时间线的链接，而不是标题、缩略图和网站描述。

有谁知道更好的方法？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-17T22:25:42.703

基本上你有两个选择：

您可以使用此处说明的 Feed Dialog URL Scheme 启动 Safari，也可以使用此处说明[的](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)[Facebook](https://developers.facebook.com/docs/reference/dialogs/feed/) SDK 。

如果您的应用程序尚未与 Facebook 集成，则使用第一个可能更容易。

# jquery - 我可以创建深层 jquery.ui.widget 选项吗？

> ID：10227371
> 
> 赞同：0
> 
> 时间：2012-04-19T11:48:32.683
> 
> 标签：jquery, jquery-ui

创建 jquery.ui.widget 时使用深层嵌套选项是好还是坏？

像下面这样的东西？如果用户想说在初始化后更改 css 中的选项`height`，`outContainer`他们是否必须替换`css`选项中的整个对象？

```
options: {
    views: null,
    transitionTypes: {
        showView: { transition:slide, mode:show},
        hideView: { transition:slide, mode:hide}
    },
    css: {
        outContainer: {
            height: '0',
            display: 'none'
         }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:12:44.537

是的。[http://jsfiddle.net/joeflateau/tryTT/](http://jsfiddle.net/joeflateau/tryTT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:07:32.807

我宁愿有一个好的分段选项对象而不是一个大列表。但是请注意设置好的默认值，因此您不必在初始化时将大对象传递给插件......

至于之后的操作对象：我会让开发人员操作一组“公共”属性，然后对插件进行“重绘”（不是一个全新的对象，而只是一个软重新初始化）。

```
object.css.outContainer.height = "100";
object.redraw(); 
```

# css - css :not()、选择器和选择后代

> ID：10227375
> 
> 赞同：18
> 
> 时间：2012-04-19T11:48:49.277
> 
> 标签：css

假设我有：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test for :not</title>
        <link rel="stylesheet" type="text/css" href="Test.css" />
    </head>
    <body>
        <div class="a">
            <p class="para">This line should be green.</p>
        </div>
        <div class="a">
            <p class="para">This line should also be green.</p>
            <div class="ds">
                <p class="para">This is another line that should be yellow</p>
            </div>
        </div>
    </body>
</html> 
```

我想选择所有元素，`class="para"`但排除那些是那些元素的后代的元素`class="ds"`。我有这个 CSS：

```
.ds { color: grey; border-style:solid; border-width:5px;}

.para {color:yellow;}

.para:not(.ds .para) {color:green; border-style:solid; border-width:5px;} //not working 
```

所以我假设我只能有简单的选择器作为 的一部分`:not(S)`，我不能有`:not (X Y)`. 我在 Chrome (18.0.1025.162 m) 和 Firefox (10) 中运行。有任何想法吗？

**请注意**：查询是更大问题的一部分，我有一些代码（在 gwt 中`class="para"`）从 DOM 中选择元素列表（例如 with ）。但是，我发现了一个错误，该错误需要排除作为特定元素集的后代的元素（例如带有 a 的元素`class="ds"`）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T11:53:04.963

[规范说](http://www.w3.org/TR/css3-selectors/#negation)你可以在里面有任何*简单的选择器*`:not`，其中

> 简单选择器可以是类型选择器、通用选择器、属性选择器、类选择器、ID 选择器或伪类。

所以是的，你不能有后代选择器`:not(X Y)`。还有一个问题是，当使用后代选择器时，您只能表示正数（“当 X 的祖先包含 Y”）而不能表示负数（“当 X 的祖先*不*包含 Y”）；

最实用的解决方案是*反转*CSS 逻辑，使您想要表达的否定变为肯定：

```
.ds .para { background:gold; }
.para { background: green } 
```

**[看到它在行动](http://jsfiddle.net/EqYTv/)**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T11:51:56.957

*具有类“para”的元素不包括具有类“ds”的元素的直接子元素*是：

```
*:not(.ds) > .para 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:55:14.683

我认为您可能以错误的方式接近它。正常`.para`匹配是*绿色*的，其中的匹配`.ds`是黄色的。可以肯定的是，按照您的方式，您需要再次删除边框，但这不是问题。

```
.ds { color: grey; border-style:solid; border-width:5px;}

.para {color:green; border-style:solid; border-width:5px;}

.ds .para {color:yellow; border-style: none; } 
```

这符合我认为解释格式的自然方式。

# uitableview - 如何从 UIViewController 填充表格视图

> ID：10227377
> 
> 赞同：1
> 
> 时间：2012-04-19T11:48:54.720
> 
> 标签：uitableview, ios5, uiviewcontroller

我想在我的滚动视图上添加 4 个 UITableView 并用一些不同的数组填充它们（假设我每个都有一个数组）。我也将此滚动视图添加到我的`self.view`（我在 UIViewController 类上执行此操作）。我如何填充我的 Tableviews 任何人都可以帮忙吗？

**更多细节：**

这是一个屏幕截图； ![在此处输入图像描述](../Images/d556aa5877df57ca612dbb247e08e378.png)

这是我的 UIViewControllerClass 的界面

```
#import <UIKit/UIKit.h>

@interface MainMenu : UIViewController<UITableViewDelegate>

@property (retain, nonatomic) IBOutlet UIScrollView *scrollView;
@property (retain, nonatomic) IBOutlet UITableView *group1;
@property (retain, nonatomic) IBOutlet UITableView *group2;
@property (retain, nonatomic) IBOutlet UITableView *group3;
@property (retain, nonatomic) IBOutlet UITableView *group4;

@end//i drag/dropped from IB, so there is no problem with synthesizes.. 
```

我想用不同的数组填充这些 tableview，如何处理这种情况..？非常感谢

附加说明；我尝试了这样的事情但没有效果：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [group1 dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSArray *array=[NSArray arrayWithObjects:@"one",@"two",@"tree", nil];
    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:06:46.883

伙计，首先您将创建所有 4 个表的 uiviewcontroller de 委托和数据源，然后您将为每个表分配不同的标签..然后您将添加委托和数据源协议...您将实现数据源和委托方法就像普通的 uitableviewcontroller...所有这些方法都接收 Uitableview 参数，因此您将测试此表视图的标记，如：

```
...

if (tableView.tag == 10) {
//implement the table 1
NSArray *array=[NSArray arrayWithObjects:@"one",@"two",@"tree", nil];
cell.textLabel.text = [array objectAtIndex:indexPath.row];

} else if (tableView.tag == 20) {
//implement the table 2
} else if (tableView.tag == 30) {
//implement the table 3
} else if (tableView.tag == 40) {
//implement the table 4
}

return cell; 
```

这样，您将使用相同的方法来执行所有表格视图..

# c# - 强制应用程序具有管理员权限

> ID：10227378
> 
> 赞同：5
> 
> 时间：2012-04-19T11:48:56.273
> 
> 标签：c#, clickonce, privileges, administrator

我需要授予我的应用程序管理员权限，知道它将从用户会话而不是管理员帐户运行。

我在其他网站上看过，但找不到任何有用的东西。

我尝试编辑清单以及其他内容，并插入了以下行：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

这在尝试使用 ClickOnce 发布时给了我一个错误，但在我调试时却没有。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:31:59.240

首先 - 实际上，设计不允许以管理员身份安装和 ClickOnce 应用程序：http: [//msdn.microsoft.com/en-us/library/142dbbz4 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/142dbbz4(v=vs.90).aspx)

看看这篇文章：[http](http://antscode.blogspot.ca/2011/02/running-clickonce-application-as.html) ://antscode.blogspot.ca/2011/02/running-clickonce-application-as.html - 它解释了如何以管理员身份运行 ClickOnce 应用程序。但是——不得不说我已经走过了这条路——而且我运气不太好。我在使用这种方法时遇到了很多麻烦（尝试以管理员权限运行 ClickOnce 应用程序）。据我回忆，最大的问题是自动更新无法正常工作。更不用说非管理员用户可能需要一直输入管理员凭据。

**所以我的建议是重新考虑你的逻辑，并将你需要以管理员身份完成的部分封装在一个单独的 EXE 文件中**- 并让用户非常清楚地知道，当他点击那个按钮时，UAC 提示会出现（可能通过将“盾牌”图标添加到按钮）。在那个 button_click 事件中做这样的事情：

```
// 2\. Run Photoshop action on this image (and wait for the task to complete)
if (string.IsNullOrWhiteSpace(this.PhotoshopEnhanceActionAbsPath) == false)
{
    var pi = new ProcessStartInfo(this.PhotoshopEnhanceActionAbsPath,  "\"" + imgPhotoshopActionAbsPath + "\"");
    pi.UseShellExecute = true;
    pi.Verb = "runas";
    var photoshopAction = Process.Start(pi);
    var success = photoshopAction.WaitForExit();
    if (success == false)
    {
        // do something here
    }                
} 
```

这种方法对我来说效果很好。这里的关键是：

```
pi.UseShellExecute = true;
pi.Verb = "runas"; 
```

它以管理员权限运行您的 EXE - 因此此时将显示 UAC 提示。这里的另一个很好的结果是，用户可能不会在每次使用应用程序时都运行这个特定的逻辑——因此当他们不需要它时，他们不会被提示惹恼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:23:38.670

I'm pretty sure that this behaviour is by design.

ClickOnce apps are designed to be installable without Administrator privileges. It's not possible to elevate them at runtime as this means that effectively a user with no admin rights could install then run the app as admin; this would be a security risk.

# eclipse - 如何将 dojo 加载到 html 文件中以调用 dojox.mobile 函数？

> ID：10227379
> 
> 赞同：1
> 
> 时间：2012-04-19T11:49:00.370
> 
> 标签：eclipse, dojo

好的，所以我对 dojo 还很陌生，我正在尝试制作一个非常简单的示例移动应用程序。我正在使用 eclipse 运行代码，该代码使用 android 模拟器来安装/运行应用程序。我遇到的问题是，我不断收到“未定义require”或“未定义dojo”的未捕获引用错误，导致我的应用程序显示为纯文本，而不是像使用dojox.mobile 小部件的android 应用程序那样格式化.

这是我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,
minimum-scale=1,user-scalable=no"/>
<title>PhoneGap</title>

<!-- DOJO -->

<script src="/assets/www/lib/dojo/dojo/dojo.js" data-dojo-config="isDebug: true, parseOnLoad:true">
</script>

<link rel="stylesheet" href="/assets/www/lib/dojo/dojox/mobile/themes/android/android.css" 
type="text/css" media="screen" title="no title" charset="utf-8">

<script type="text/javascript" charset="utf-8" src="/assets/www/cordova-1.6.0.js"></script>

<script>
require(["dojo"], function(dojo) {
    dojo.require("dojox/mobile")
    dojo.require("dojox/mobile/parser")
});
</script>
</head>

<!-- END DOJO -->

<body>
<!-- ACCIDENT TOOLKIT PAGE -->
<div data-dojo-type="dojox.mobile.View" id="accHelp" selected="true">
    <h1 data-dojo-type="dojox.mobile.Heading">Accident</h1>
    <div class="text">If you are in an accident, you should first move to a safe 
    location. Below are some additional actions you can take:</div>
    <ul data-dojo-type="dojox.mobile.RoundRectList">
        <li data-dojo-type="dojox.mobile.ListItem" 
            onclick="window.location='geo:0,0?q=police';">Call the Police</li>
        <li data-dojo-type="dojox.mobile.ListItem"
            onclick="window.location='geo:0,0?q=towing';">Call for a Tow Truck</li>
        <li data-dojo-type="dojox.mobile.ListItem" moveTo="accInfo" transition="slide"
            onClick="itemClicked();">Exchange Driver Info</li>
        <li data-dojo-type="dojox.mobile.ListItem" moveTo="accInfo" transition="slide"
            onClick="itemClicked();">Record Accident Location</li>
        <li data-dojo-type="dojox.mobile.ListItem" moveTo="accInfo" transition="slide"
            onClick="itemClicked();">Take Photos of Accident</li>
    </ul>
</div>
<!-- EXCHANGE DRIVER INFO PAGE -->
<div data-dojo-type="dojox.mobile.View" id="accInfo">
    <h1 data-dojo-type="dojox.mobile.Heading" back="Accident" moveTo="accHelp"
        onClick="console.log('Going back');">Driver</h1>
    <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Other Driver Info</h2>
</div>

<script>
function itemClicked() {
  console.log("itemClicked()");
}
</script>
</body>
</html> 
```

代码本身有什么问题吗？特别是在我使用脚本 scr... 指向 dojo.js 以及我使用 require 来调用 dojo.mobile 函数的地方。我的印象是，只要 src 指向包树中的正确位置，我将文件复制到哪里并不重要。

我曾尝试使用 Google CDN 调用 dojo.js，但是当我这样做时模拟器会抛出错误，可能是因为它没有使用 Internet 连接？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:25:21.447

尝试从本地 URL 中删除 /assets/www/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:28:56.553

您的 require 语句如下所示：

```
require(["dojo"], function(dojo) {
    dojo.require("dojox/mobile")
    dojo.require("dojox/mobile/parser")
}); 
```

它应该看起来像这样：

```
require([
    "dojo/mobile",
    "dojo/mobile/parser"
],
function(mobile, parser) {
    // your code here;
}); 
```

# facebook - 无法在设计中覆盖 after_omniauth_failure_path_for

> ID：10227380
> 
> 赞同：3
> 
> 时间：2012-04-19T11:49:00.360
> 
> 标签：facebook, ruby-on-rails-3, devise, omniauth

我有我的类 Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController 并且我覆盖了 after_omniauth_failure_path_for 方法：

```
protected
  def after_omniauth_failure_path_for resource
    '/report_failure'
  end 
```

但超级的是被调用的那个。

我怀疑这是因为 passthru 解决方法：

```
 devise_for :users do
    get '/users/auth/:provider'  => 'users/omniauth_callbacks#passthru'
  end 
```

有谁知道如何克服这个问题？我正在使用设计 2.0.4

这是日志文件报告：

```
Started GET "/users/auth/facebook/callback?error_reason=user_denied&error=access_denied&error_description=The+user+denied+your+request." for 77.124.184.115 at 2012-04-19 11:34:46 +0000
Processing by Devise::OmniauthCallbacksController#failure as HTML
  Parameters: {"error_reason"=>"user_denied", "error"=>"access_denied", "error_description"=>"The user denied your request."}
Redirected to http://myapp.com/users/sign_in
Completed 302 Found in 1ms (ActiveRecord: 0.0ms) 
```

编辑：如果我删除了直通重定向，那么它可以工作：

```
#       def  devise_for :users do
#        get '/users/auth/:provider'  => 'users/omniauth_callbacks#passthru'
#      end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-28T11:21:03.437

我`omniauth_callbacks`在我的控制器中正确设置了控制器，`routes.rb`但仍然无法覆盖`failure`or`after_omniauth_failure_path_for`方法。问题是在我的有问题的用户模型之前，我有另一个带有空路径的设计用户模型设置：

```
devise_for :customer_users, path: ''
# [...]
devise_for :users, module: 'users' # using a module instead of controllers 
```

这导致始终匹配[此](https://github.com/heartcombo/devise/blob/f5cc775a5feea51355036175994edbcb5e6af13c/lib/devise/omniauth.rb#L19)设计omniauth 方法`customer_user`中的映射。因此，默认情况下会处理失败：`Devise::OmniauthCallbacksController`

```
Processing by Devise::OmniauthCallbacksController#failure as HTML 
```

可以通过为以下设置非空路径来解决此问题`customer_users`：

```
devise_for :customer_users, path: 'customer'
# or the default
devise_for :customer_users 
```

我希望这有助于以防有人犯同样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:32:09.350

您忘记将`:controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }` 参数添加到 devise_for 路由配置，没有它，omniauth 不知道在失败后重定向到哪个控制器。

顺便说一句，passthru 不是设计的一部分。应该是你自己加的吧？

# javascript - jquery id 属性选择器

> ID：10227398
> 
> 赞同：0
> 
> 时间：2012-04-19T11:49:48.077
> 
> 标签：javascript, jquery, jquery-selectors

我有一个`<div id="mainDIV">`包含`<table>`其中`<thead>`和`<tbody>`标签的其中。

实际上我正在尝试这些选择器

```
$("#mainDIV > tbody").on("click", function(){ 
    alert("test");
} 
```

这样每当我们在 内部单击时，都会`<tbody>`显示该警报。但这不起作用。谁能建议我解决这个问题。

* * *

我尝试了以下一个，但它不起作用......

```
$("#mainDIV  tbody").on("click", function(){ 
    alert("test");
} 
```

这是我的部分代码不起作用..

```
$("#ui-datepicker-div  tbody").on("click", function(){ 
                alert("test");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:51:11.717

您应该使用空格而不是`>`：

```
$("#mainDIV  tbody").on("click", function(){ 
    alert("test");
}); 
```

[**现场演示**](http://jsfiddle.net/9PAYH/8/)

后代选择器 ( `"ancestor descendant"`)[文档](http://api.jquery.com/descendant-selector/)：

> 描述：选择作为给定祖先的后代的所有元素。

子选择器（`"parent > child"`）[文档](http://api.jquery.com/child-selector/)：

> 说明：选择“parent”指定的元素的“child”指定的所有直接子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:51:55.757

```
$('#mainDIV tbody').click(function() {
  alert("test");
}); 
```

# visual-studio-2010 - 如何在 Visual Studio 中使用不兼容的编辑器设置处理开源依赖项？

> ID：10227400
> 
> 赞同：1
> 
> 时间：2012-04-19T11:49:50.540
> 
> 标签：visual-studio-2010, indentation

我的项目依赖于两个开源库。不幸的是，两者都有点欠发达，需要我不断做出贡献。更糟糕的是，其中一个缩进三个空格，另一个缩进四个。

我能做些什么来避免发疯吗？我实际上无法重新格式化其中任何一个，因为这将使我无法合并它们未来的更改 - 更不用说接受我自己的补丁了。每次在两个文件之间切换时，我都无法切换标签宽度设置 - 无论如何都不能手动切换。

人们如何在 Visual Studio 中处理这种情况？有什么改善吗？

# javascript - 使用原型设置按钮的onclick事件？

> ID：10227402
> 
> 赞同：1
> 
> 时间：2012-04-19T11:49:53.380
> 
> 标签：javascript, button, onclick, prototypejs, dom-events

我有这个按钮：

```
<button id="check_button" name ="check_button" type="button" onclick="setLocation('...')">
    <span>check</span>
</button> 
```

现在我知道我可以使用`$('check_button')`例如访问它。有没有办法`setlocation`用原型设置参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:54:01.137

```
function doButtonClick(event, element) {
  console.log('event');
  console.log('element');

  // here, `element` is a reference to the button you clicked.
  var elementId = element.identify();

  // I'm not sure what setLocation takes in as a parameter, but...
  setLocation(elementId);
}

$('check_button').on('click', 'button', doButtonClick); 
```

以下是文档`element.on`：[http ://api.prototypejs.org/dom/Element/prototype/on/](http://api.prototypejs.org/dom/Element/prototype/on/)

这实际上只是一种创建新的快速方法：http `Event.Handler`: [//api.prototypejs.org/dom/Event/on/](http://api.prototypejs.org/dom/Event/on/)

请务必查看第二个文档链接 - 超级有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:14:33.783

是的，

```
$('check_button').observe('click',this.setLocation.bind(this,'...'));

setLocation: function(param)
{
alert(param);
} 
```

这样，参数将始终是您传递的内容。“绑定”是一种拥有这种能力的多种强大方法。

# ruby-on-rails-3 - 灯箱配置问题

> ID：10227405
> 
> 赞同：0
> 
> 时间：2012-04-19T11:50:08.083
> 
> 标签：ruby-on-rails-3, lightbox

我在使用 Lightbox 时遇到问题，具体我不知道。我正在使用 Ruby on Rails 3.2.1 我做了什么：

1.  在 head 部分添加代码：

    ```
    <script src="/Livu_pamatskola/app/assets/javascripts/lightbox/js/jquery-1.7.2.min.js"></script>
    <script src="/Livu_pamatskola/app/assets/javascripts/lightbox/js/lightbox.js"></script>
    <link href="/Livu_pamatskola/app/assets/javascripts/lightbox/css/lightbox.css" rel="stylesheet" /> 
    ```

2.  并在视图中添加了此代码：

    ```
    <a href="/Livu_pamatskola/app/assets/images/image-1.jpg" rel="lightbox" title="my caption">image #1</a> 
    ```

但灯箱根本不起作用。

# sql-server-2008 - SQLServer 2008 - 捕获异常后存储过程的返回值

> ID：10227407
> 
> 赞同：1
> 
> 时间：2012-04-19T11:50:11.537
> 
> 标签：sql-server-2008, try-catch, return-value

鉴于以下 SP ...

```
CREATE PROCEDURE [dbo].[trytest1]

AS

-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

SELECT 'Testing 1'

DECLARE @int1 INTEGER
DECLARE @int2 INTEGER
DECLARE @int3 INTEGER

SET @int1 = 0
SET @int2 = 0

    BEGIN TRY
        SELECT 'Testing 2'

        SET @int3 = @int1 / @int2

        SELECT 'Testing 3'
    END TRY

    BEGIN CATCH
        SELECT 'Testing 4'
    END CATCH

SET @int3 = @int1 + @int2
SELECT 'Testing 5' 
```

执行这个给...

测试 1

测试 2

测试 4

测试 5

返回值 -6

catch 捕获除以零，但是在 catch 块之后继续执行 我很好奇为什么即使查询成功执行并在 trycatch 正常之后继续，返回值是-6。它会永远保持-6吗？

而且，虽然我在这里，只是好奇，是否可以在 Try Block 中继续执行（即选择“测试 3”）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:56:28.930

这是所有异常处理机制的标准行为。您有一个 TRY 和一个 CATCH 以及介于两者之间的代码。如果代码中有异常，它将停止运行并转到 CATCH 块。

如果要`SELECT 'Testing 3'`执行，它必须放在 TRY...CATCH 块之外。

如果您不想在 proc 上执行任何其他操作，则可以将所有内容放在 TRY...CATCH 块上，或者在 catch 块上执行

# foreach - kotlin 中的 foreach

> ID：10227408
> 
> 赞同：22
> 
> 时间：2012-04-19T11:50:19.127
> 
> 标签：foreach, kotlin

我在官方网站上看到了一个例子：

```
fun main(args : Array<String>) {
  args filter {it.length() > 0} foreach {print("Hello, $it!")}
} 
```

但是当我将它复制到idea时，它报告这`foreach`是一个未解决的参考。

什么是正确的代码？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2019-06-05T22:07:16.790

对于像我这样的其他 Kotlin 新手，他们只是想知道如何遍历一个集合，我在[文档](https://kotlinlang.org/docs/tutorials/kotlin-for-py/loops.html)中找到了这个：

```
val names = listOf("Anne", "Peter", "Jeff")
for (name in names) {
    println(name)
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-19T14:01:27.213

它需要一个大写字母`E`，`forEach`即：

```
fun main(args : Array<String>) {
    args.asList().filter { it -> it.length > 0 }.forEach { println("Hello, $it!") }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-18T07:25:52.723

使用此代码：

```
 val nameArrayList = arrayListOf<String>("John", "mark", "mila", "brandy", "Quater") // ArrayList<String>
    nameArrayList.forEach {
        println("Name:$it")
    }

    val nameMutableList= mutableListOf<String>("John", "mark", "mila", "brandy", "Quater") // MutableList<String>
    nameMutableList.forEach {
        println("Name:$it")
    }

    val nameList= listOf<String>("John", "mark", "mila", "brandy", "Quater") // List<String>
    nameList.forEach {
        println("Name:$it")
    } 
```

# java - 接口扩展了另一个接口，但实现了它的方法

> ID：10227410
> 
> 赞同：51
> 
> 时间：2012-04-19T11:50:21.547
> 
> 标签：java, interface, extends, implements

在java中，当一个接口扩展另一个接口时：

1.  为什么要实现它的方法？
2.  当接口不能包含方法体时如何实现其方法
3.  当它扩展另一个接口而不实现它时，它如何实现方法？
4.  一个接口实现另一个接口的目的是什么？

这在Java中有主要概念！

**编辑：**

```
public interface FiresDragEvents {

  void addDragHandler(DragHandler handler);

  void removeDragHandler(DragHandler handler);
}

public interface DragController extends FiresDragEvents {

  void addDragHandler(DragHandler handler);

  void removeDragHandler(DragHandler handler);

  void dragEnd();

  void dragMove();
} 
```

**在 Eclipse 中，除了在`DragController`.**

**当我将鼠标悬停时，它说它实现了该方法！！！**

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-19T12:05:35.247

> 为什么要实现它的方法？当接口不能包含方法体时，它如何实现它的方法？当它扩展另一个接口而不实现它时，它如何实现方法？一个接口实现另一个接口的目的是什么？

接口不实现另一个接口的方法，而只是扩展它们。需要接口扩展的一个示例是：考虑您有一个具有两种方法的车辆接口，`moveForward`但`moveBack`您还需要合并作为车辆但具有一些附加方法的飞机，例如`moveUp`，`moveDown`所以最后你有：

```
public interface IVehicle {
  bool moveForward(int x);
  bool moveBack(int x);
}; 
```

和飞机：

```
public interface IAirplane extends IVehicle {
  bool moveDown(int x);
  bool moveUp(int x);
}; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-19T11:56:36.553

接口定义行为。例如，`Vehicle`接口可能会定义`move()`方法。

Car 是 Vehicle，但具有其他行为。例如，`Car`接口可能会定义`startEngine()`方法。由于 Car 也是 Vehicle，因此`Car`接口扩展了`Vehicle`接口，因此定义了两个方法：（`move()`继承）和`startEngine()`.

Car 接口没有任何方法实现。如果您创建一个实现 Car 的类（大众汽车），它将必须为其接口的所有方法提供实现：`move()`和`startEngine()`.

一个接口不能实现任何其他接口。它只能扩展它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-19T11:56:12.037

ad 1\. 它没有实现它的方法。

ad 4\. 一个接口**扩展**而不是实现另一个接口的目的是构建一个更具体的接口。例如，`SortedMap`是一个扩展`Map`. 对排序方面不感兴趣的客户端可以针对`Map`example 的所有实例进行编码和处理`TreeMap`，它实现了`SortedMap`. 同时，另一个对排序方面感兴趣的客户端可以通过`SortedMap`接口使用这些相同的实例。

在您的示例中，您正在重复超级接口中的方法。虽然合法，但它是不必要的，并且不会改变任何最终结果。无论这些方法是否存在，编译后的代码都将**完全相同。***无论 Eclipse 的悬停说什么，都与接口不实现任何东西*这一基本事实无关。

# matlab - Matlab 网格线在一个轴上具有不同的颜色

> ID：10227412
> 
> 赞同：2
> 
> 时间：2012-04-19T11:50:33.730
> 
> 标签：matlab, gridlines

我已经回顾了之前的问题[，如实线和灰色的小网格](https://stackoverflow.com/questions/6580274/matlab-minor-grid-with-solid-lines-grey-color)中所述，但它并没有帮助我解决我的问题。我的问题与 xticks 有关。我希望我的网格线出现在 xaxis 上的特定点，而其他一些网格线以不同的颜色出现在不同的点。像这样的东西：

```
plot(x,y,'--g')
set(gca,'Xcolor',[0 0 0],'Xtick',[12e3,14e3,18e3,23e3,30e3,37e3,57e3],
set(gca,'Xcolor',[0.5 0.9 0.5],'Xtick',[10e3 16 28e3]); 
```

问题是后面的 xtick 标签会覆盖之前的标签。我想保留以前的 xlabels。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:37:47.133

创建第二个轴。

```
x=-3.14:.1:3.14;
y=sin(x);

h=plot(x,y);
ax1=findobj(gcf,'Type','axes'); %save first axis handle

%set first stype
set(gca,'Xcolor',[0 0 0],'Xtick',[-3,-2,-1,1,2,3],'gridlinestyle','-','xgrid','on')

%create new axis
ax2=axes('position',get(gca,'position'),'Visible', 'on'); 
set(ax2,'YTick',[],'Xcolor','blue','Xtick',[-2.5 0 2.5],'xgrid','on','color','none'); %color none to make the axis transparent
set(ax2,'xlim',get(ax1,'xlim')) %resize 2nd axis to match 1st 
```

产生：

![例子](../Images/11c0a6479657ca0b11ee05c571dd6930.png)

# asp.net - 在日历上设置最小和最大日期？

> ID：10227417
> 
> 赞同：7
> 
> 时间：2012-04-19T11:50:42.140
> 
> 标签：asp.net, .net, vb.net, date, calendar

我再次环顾四周，找不到如何使用 VB 设置允许在 ASP.net 中的日历上选择的最小和最大日期。

我正在使用 Visual Studio 2010，目前它只是一个常规的日历控件......

目前我已经看到了类似的东西：

```
Calendar1.DateMin = DateTime.Now 
```

但是 Visual Basic 似乎不喜欢这样（也许它是 C# 的东西？）......无论如何，如果有办法做到这一点，那将是一个很大的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T12:03:55.510

您需要处理日历的[`DayRender`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.dayrender.aspx)事件：

```
Private MinDate As Date = Date.MinValue
Private MaxDate As Date = Date.MaxValue

Protected Sub Calendar1_DayRender(sender As Object, e As DayRenderEventArgs)Handles Calendar1.DayRender
    If e.Day.Date < MinDate OrElse e.Day.Date > MaxDate Then
        e.Day.IsSelectable = False
    End If
End Sub 
```

然后你可以设置它，例如`Page_Load`：

```
MinDate = Date.Today
MaxDate = MinDate.AddDays(7) 
```

# javascript - 有没有办法在基于 webkit 的浏览器中强制使用 Javascript 垃圾收集器？

> ID：10227422
> 
> 赞同：17
> 
> 时间：2012-04-19T11:50:55.960
> 
> 标签：javascript, firefox, memory-leaks, webkit, garbage-collection

在 Internet Explorer 中，我们可以使用以下方法强制执行 Javascript 垃圾收集：CollectGarbage();

该方法在 Firefox 上未定义。你知道是否有某种等价物吗？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-09-18T21:35:01.417

（不仅仅是将此答案限制为基于 WebKit 的浏览器......）

*   Chrome：如果您从命令行/终端使用 启动它`--js-flags="--expose-gc"`，那么它会提供`window.gc()`.
*   我认为 Firefox 需要单击`about:memory`.
*   歌剧有`window.opera.collect()`。
*   边缘有`window.CollectGarbage()`.
*   野生动物园，未知。

请注意，您不应该手动运行 GC。我只发布了这个，因为它对开发测试很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T17:09:38.200

我一直在尝试强制 GC，似乎不管实际浏览器如何，这样做的相对好方法是运行以下代码：

```
 function gc(max) {
    var arr = [];
    for (var i = 0; i < max; i++) {
      arr.push(i);
    }
    return arr.length;
  }
  for (var i = 0; ; i++) {
    // repeat until you have enough:
    gc(Math.pow(2, i));
  } 
```

当然，一个问题是知道何时停止调用 gc(...)：因为需要一些外部方法来检测 GC 是否成功结束。就我而言，我使用的是嵌入式 WebView，我可以在使用更大的数组强制下一轮之前进行真正的检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T01:37:38.260

我不确定这是否不是题外话，但有一个名为 FreeMemory ( [https://addons.mozilla.org/en-US/firefox/addon/freememory/](https://addons.mozilla.org/en-US/firefox/addon/freememory/) ) 的 firefox 插件可以在没有运行垃圾或循环收集的情况下运行访问 about:memory 窗格，带有可配置的计时器。我相信那里有其他浏览器的替代品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-17T13:15:08.013

Visit `about:memory`.

From page's [documentation on MDN](https://developer.mozilla.org/en-US/docs/Mozilla/Performance/about:memory):

```
about:memory is a special page within Firefox that lets you view, save, 
load, and diff detailed measurements of Firefox's memory usage. It also 
lets you do other memory-related operations like trigger GC and CC 
```

# api - 获取页面->标签的“cutom_image_url”

> ID：10227424
> 
> 赞同：0
> 
> 时间：2012-04-19T11:50:59.713
> 
> 标签：api, facebook-graph-api

在 Facebook 应用程序中进行编辑时，我们在“page->tabs->custom_name”属性中获得“Custom_name”。

同样，在编辑时，我们希望向用户展示他的自定义标签图像。有没有办法在我们的应用程序的编辑模式下为用户检索“custom_image_url”？

由于此属性存在于“更新”方法中，但不存在于“读取”方法中。

谁能帮忙，我们如何从 Graph API 中读取 Tab 的“custom_image_url”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:21:21.080

您可以从页面连接访问作为页面选项卡运行的应用程序`tabs`的图像（图像在`image_url`属性中返回）：

```
http://graph.facebook.com/PAGE_ID/tabs/APP_ID 
```

# file - DOS BATCH：如何比较2个不同文件夹中同名的2个文件的存在？

> ID：10227428
> 
> 赞同：2
> 
> 时间：2012-04-19T11:51:20.360
> 
> 标签：file, batch-file, dos

我想检查一个文件夹中的所有文件，看看它们是否存在于另一个文件夹中。当在第二个文件夹中不存在的第一个文件夹中找到文件时，我希望删除该文件。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:14:11.320

根据需要编辑路径信息（或包含批处理参数 %1 %2），并在确认获得正确结果后删除 DEL 之前的 ECHO。

```
@echo off
setlocal
set "dir1=."
set "dir2=d1"
set tempFile="%temp%\exclude%random%.txt"
dir /b "%dir2%" >%tempFile%
for /f "eol=: delims=" %%F in ('dir /b /a-d "%dir1%" ^| findstr /vixg:%tempFile%') do echo del "%dir1%\%%F"
del %tempFile% 
```

***注意***- 此解决方案只是比较名称。如果两个完全不同的文件具有相同的名称，则它们将被视为相同。

# php - ftp url 的 opendir() 失败

> ID：10227429
> 
> 赞同：0
> 
> 时间：2012-04-19T11:51:22.193
> 
> 标签：php, ftp

我正在尝试从远程服务器打开一个文件夹。我写 ：

```
if ($folderHandle = opendir($folder)) 
```

在哪里`$folder = "ftp://xxx:xxx@xxx.net:21"`

我得到了奇怪的错误`Warning: opendir(ftp://...:21): failed to open dir: operation failed in ... on line 38`

关于我应该从这里去哪里的任何想法？FTP凭据有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:56:09.270

您可以使用 PHP 的[FTP 功能](http://php.net/ftp)远程连接到服务器并获取目录列表：

```
// set up basic connection
$conn_id = ftp_connect('otherserver.example.com'); 

// login with username and password
$login_result = ftp_login($conn_id, 'username', 'password'); 

// check connection
if ((!$conn_id) || (!$login_result)) { 
    echo "FTP connection has failed!";
    exit; 
}

// upload the file
$upload = ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY); 

// check upload status
if (!$upload) { 
    echo "FTP upload has failed!";
} else {
    echo "Uploaded $source_file to $ftp_server as $destination_file";
}

// Retrieve directory listing
$files = ftp_nlist($conn_id, '/remote_dir');

// close the FTP stream 
ftp_close($conn_id); 
```

# javascript - PHP $_GET 但使用 Javascript

> ID：10227441
> 
> 赞同：0
> 
> 时间：2012-04-19T11:52:06.373
> 
> 标签：javascript, get

我能够从具有以下结构的 URL 获取数据 -

```
http://mydomain.com/test.php?word=hello 
```

使用 PHP 我会使用以下

```
$word = $_GET["word"]; 
```

谁能告诉我是否有可能实现相同的目标但使用`JavaScript`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:53:56.570

是的，有可能：

```
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

来源：[使用 Javascript 获取 URL 参数](http://www.netlobo.com/url_query_string_javascript.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:55:41.077

您可以使用 获取这些值`window.location.search`。您可以滚动自己的代码来解析它，也可以使用类似[这个问题](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)的答案的东西。

# html - Perl：删除列表 从段落。HTML解析

> ID：10227443
> 
> 赞同：1
> 
> 时间：2012-04-19T11:52:20.000
> 
> 标签：html, perl, parsing

我有一堆 html 文件，我需要从中提取文本，而不是列表的内容。html就像

```
<html>

    <Head>
        <title>intranet mycompany</title>
    </head>

    <body>
        <div>blah</div>
        <p>the text i need to extract
            <br>
            <ul>
                <li>stuff i don't want.</li>
                <li>more stuff i don't want.</li>
            </ul>More text i need to exctract.</p>
    </body>

</html> 
```

我真的想要一些关于如何从段落中获取文本的建议，而不是从列表中获取文本。任何建议都会受到重视。

问候，琼博。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:02:55.030

```
use strictures;
use HTML::TreeBuilder::XPath qw();
my $dom = HTML::TreeBuilder::XPath->new_from_content(q(<html> … </body>));
my ($ul) = $dom->findnodes('//ul');
$ul->delete;
my $extract = $dom->findvalue('//p');
# " the text i need to extract  More text i need to exctract. " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:36:16.387

这是一种摆脱`<ul>`数据的方法。由于 HTML::Parser 在调用文本处理程序时不知道它在文档中的位置，因此您必须找到某种方法来提供该信息。

只需告诉`start_handler`每个起始元素调用的那个来做一个关于 openend 的注释`<ul>`并`end_handler`删除那个注释。然后，您可以利用您内部的信息，`text_handler`以便它可以跳过内部的文本节点`<ul>s`。

```
#!/usr/bin/perl -w
use strict;
use HTML::Parser;

my $text = '';
my $parser = HTML::Parser->new(
  start_h => [ \&start_handler, "self,tagname" ],
  end_h   => [ \&end_handler,   "self,tagname" ],
  text_h  => [ \&text_handler,  "self,dtext" ],
);

sub start_handler {
  my ($self, $tag) = @_;
  $self->{_private}->{'ul'} = 1 if ( $tag eq 'ul' ); # make a note
}

sub end_handler {
  my ($self, $tag) = @_;
  $self->{_private}->{'ul'} = 0 if ( $tag eq 'ul' ); # remove the note
}

sub text_handler {
  my ($self, $dtext) = @_;
  unless ($self->{_private}->{'ul'}) {
    # only if we're not inside the <ul>
    $text .= $dtext;
  }
}
$parser->parse_file('test.html');
print $text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:06:12.090

看看 CPAN for **HTML Parsers**，你会得到很好的解析器，比如[HTML::TreeBuilder](http://p3rl.org/HTML%3a%3aTreeBuilder)，[HTML::Parser](http://p3rl.org/HTML%3a%3aParser)等。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-19T12:06:16.787

最难的一点是数据跨越多行。如果您要将所有行加入一个大字符串，一个简单的正则表达式，如

```
s/<ul>.*<\/ul>//g 
```

应该这样做。

# php - 设置全局参数 Symfony2

> ID：10227446
> 
> 赞同：1
> 
> 时间：2012-04-19T11:52:23.603
> 
> 标签：php, symfony, fosuserbundle

我正在使用 Symfony2。对于我的应用程序，我需要为此设置一些全局参数。

我在`parameters.ini`文件中将参数定义为：

```
#app/config/parameters.ini

[parameters]
    mailer_auth_mode="login"
    user_thumbnail_path="images/user/thumbnail" 
```

我可以使用以下代码在我的控制器中访问它：

```
$this->container->getParameter('user_thumbnail_path'); 
```

当我使用 FOSUserBundle 并且我有覆盖`ProfileHandler`类并且在这个类中我想使用参数但我不知道如何使用时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T12:16:45.380

创建您自己的处理程序或扩展您想要的处理程序。

将其注册为服务。

```
my.handler:
    class: Acme\MyBundle\Form\Handler\MyHandler
    arguments: ... 
```

然后将服务 id 设置为您要处理的表单的处理程序。

```
fos_user:
    ...
    registration:
        form:
           handler: my.handler 
```

# asp.net - 模块“.dll”已加载，但未找到入口点

> ID：10227448
> 
> 赞同：20
> 
> 时间：2012-04-19T11:52:24.797
> 
> 标签：asp.net, dll, windows-7, regsvr32, component-services

我有一个 DLL，当我运行应用程序时会导致错误。该错误表示该服务未注册。所以我`regsvr32`使用 DLL 的名称运行命令。但这给了我一个错误，现在错误是：

> 模块“mydll.dll”已加载，但未找到入口点“DllRegisterServer”。
> 
> 确保“mydll.dll”是有效的 DLL 或 OCX 文件，然后重试

我在 Windows 7 64 位上工作。在 Windows XP 上它工作正常！有人知道它可能是什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T09:39:40.910

我有这个问题

```
dumpbin /exports mydll.dll 
```

和

```
depends mydll.dll 
```

显示“DllRegisterServer”。

问题是系统中有另一个同名的 DLL。重命名mydll后注册成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:43:12.583

该错误表明 DLL 不是 COM DLL 或已损坏。如果它不是 COM DLL 并且未被应用程序用作 COM DLL，则无需注册它。
从您在问题`(the service is not registered)`中所说的来看，我们似乎在谈论未正确安装的服务。我会尝试重新安装应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T07:54:22.307

为我解决的问题是使用：

> regasm.exe 'xx.dll' /tlb /codebase /register

但是，了解 regasm.exe 和 regsvr.exe 之间的区别很重要：

[RegAsm.exe 和 regsvr32 有什么区别？如何使用 regsvr32 生成 tlb 文件？](https://stackoverflow.com/questions/1163503/what-is-difference-between-regasm-exe-and-regsvr32-how-to-generate-a-tlb-file-u)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-21T15:19:45.617

确保命令提示符窗口具有管理员权限。我使用的是 Windows Server 2012，在命令提示符下使用 regsvr32 时出现错误。我通过从所有程序/Windows 系统/命令提示符中右键单击它并选择“以管理员身份运行”来打开命令提示符，在此窗口中运行 regsvr32 成功加载了 dll 文件。

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2012-06-17T06:40:06.467

我找到了答案：我需要向我的计算机中的服务组件添加一个新应用程序，然后添加正确的 DLL。

谢谢！如果有人有同样的问题，我很乐意提供帮助。

# python - python struct模块 - 解包时的奇数值

> ID：10227451
> 
> 赞同：1
> 
> 时间：2012-04-19T11:52:33.980
> 
> 标签：python, struct, int

我正在尝试获取 b'\x00\x00\x00\x01' 的整数值，我假设它应该是 1。

我已经尝试了几件事来获得这个“1”的值，但我得到的数字非常高。

这是我尝试过的：

```
import struct
from struct import *

#I had 4 int values:
byte1 = 0
byte2 = 0
byte3 = 0
byte4 = 1

#I packed each to one byte (seems weird, one int to 1 byte - so is this correct?)
byte1 = struct.pack('b', byte1) #returns b'\x00'
byte2 = struct.pack('b', byte2)
byte3 = struct.pack('b', byte3)
byte4 = struct.pack('b', byte4) #returns b'\x01'

#Now i place all those bytes in one container
con = byte1+byte2+byte3+byte4 #returns b'\x00\x00\x00\x01'

#hmm ..returns 4 - so seems alright?
len(con) 

#tried several things:
struct.unpack('I', con) #unsigned int - returns 16777216 (what!?)
struct.unpack('i', con) #signed int - returns the same as above
unpack('I', con) #same .. 
```

我的问题; 难道我做错了什么？我理解错了吗？谁能向我解释为什么它不只是显示 '(1,)' ？

如果有另一种方法来获得 int rep。也请告诉我。

感谢您的阅读，以及您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:54:38.560

您将结果解释为小端，但您应该将其解释为大端。尝试

```
>>> con = b'\x00\x00\x00\x01'
>>> struct.unpack('>i', con)
(1,) 
```

使用正确的[字节顺序](http://en.wikipedia.org/wiki/Endianness)。

# xml - XSD 自定义类型声明中的错误

> ID：10227457
> 
> 赞同：0
> 
> 时间：2012-04-19T11:52:54.593
> 
> 标签：xml, xsd

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="Person">
    <xs:complexType>
        <xs:all>
            <xs:element name="address" type="Address"/>
        </xs:all>
    </xs:complexType>
</xs:element>
 <xs:element name="Address">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="line1" type="xs:string"/>
            <xs:element name="line2" type="xs:string"/>
            <xs:element name="state" type="xs:string"/>
            <xs:element name="city" type="xs:string"/>
            <xs:element name="postcode" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
</xs:schema> 
```

在此 XSD 定义中，我无法理解此错误：类型“地址”未定义为此架构或任何包含或导入的架构中的根项目。

我想类型声明是在同一个模式中提供的。但是这个声明有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:10:01.097

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Person">
        <xs:complexType>
            <xs:all>
                <xs:element name="address" type="Address"/>
            </xs:all>
        </xs:complexType>
    </xs:element>
    <xs:complexType name="Address">
        <xs:sequence>
            <xs:element name="line1" type="xs:string"/>
            <xs:element name="line2" type="xs:string"/>
            <xs:element name="state" type="xs:string"/>
            <xs:element name="city" type="xs:string"/>
            <xs:element name="postcode" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:45:48.060

你有一个本地元素声明

```
<xs:element name="address" type="Address"/> 
```

但是没有名称为“地址”的 complexType 定义。

我怀疑元素声明

```
<xs:element name="Address">
    <xs:complexType>
    ... 
```

应该是

```
<xs:complexType name="Address">
   ... 
```

# javascript - Jquery insertBefore和fadeIn

> ID：10227461
> 
> 赞同：0
> 
> 时间：2012-04-19T11:53:09.937
> 
> 标签：javascript, jquery, html

我想用 jquery fadeIn 为我的表格行设置动画。这是我迄今为止编写的一段代码。请告诉我我错在哪里。

```
$("#insert_heading").live("click", function (e) {
    e.preventDefault();
    if ($("#first_msg")) {
        $("#first_msg").fadeOut(500, function () {
            $("#first_msg").remove();
        });
    }
    if (heading_count >= 6) {
        alert("you cannot create more than 6 headings");
        return false;;
    }

    var heading_html = "";
    heading_count++;

    heading_html += '<tr class="heading" id="row_' + heading_count + '">';
    heading_html += '<td align="left">&nbsp;Heading ' + heading_count + ':</td>';
    heading_html += '<td colspan="3" align="left" valign="middle">';
    heading_html += '<input type="text" name="h_' + heading_count + '" class="input validate[required] text-input"/>';
    heading_html += '<td align="left" class="heading_delete">';
    heading_html += '<a href="#" id="del_' + heading_count + '"><img width="16" height="16" title="Delete" src="images/delete_heading.png"></a></td>';
    heading_html += '</td>';
    heading_html += '</tr>';

    $(heading_html).insertBefore("#submit_button").fadeIn("slow");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:11:13.493

代替您提供您正在使用的 HTML，我认为您的`fadeIn`代码的主要问题是您已经添加了元素，并且它已经可见，所以`fadeIn`没有效果。

我设法通过稍微切换执行顺序来完成这项工作。我没有使用 use `insertBefore`，而是使用`append`并将其链接`fadeIn`到新`tr`元素的创建：

```
$('table').append($(heading_html).fadeIn("slow")); 
```

这可以在这里看到：http: [//jsfiddle.net/HZwvA/](http://jsfiddle.net/HZwvA/)

# html - 如何使用javascript检测实时网络摄像头中的手势？

> ID：10227464
> 
> 赞同：24
> 
> 时间：2012-04-19T11:53:24.080
> 
> 标签：html, javascript

我将实时网络摄像头嵌入到 html 页面。现在我想找到手势。如何使用 JavaScript 做到这一点，我不知道。我用谷歌搜索了很多，但没有得到任何好主意来完成这个。那么有人知道这件事吗？这该怎么做。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-05T02:58:24.403

访问网络摄像头需要 HTML5 WebRTC API，该 API 在除 Internet Explorer 或 iOS 之外的大多数现代浏览器中都可用。

**手势检测**可以使用带有[js-objectdetect](https://github.com/mtschirs/js-objectdetect/)或[HAAR.js](https://github.com/foo123/HAAR.js)的 Haar Cascade Classifiers（从 OpenCV 移植）在 JavaScript 中完成。

**在 JavaScript/HTML5 中使用 js-objectdetect 的示例**：打开与闭合手检测（美国手语字母表的“A”手势）

![张开手](../Images/6accbf7156d67f39e438aeac687f20c2.png) ![闭手或](../Images/b0c3fce8a738dc4083f031c37c06e586.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T17:12:55.650

这是一个 JavaScript 手部跟踪演示——它依赖于尚未在所有典型浏览器中启用的 HTML5 功能，它在这里根本无法正常工作，而且我不相信它涵盖了手势，但它可能是一个为您开始：[http ://code.google.com/p/js-handtracking/](http://code.google.com/p/js-handtracking/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T11:59:32.277

你需要有一些运动检测设备（相机），你可以使用 kinect 来获取身体不同部位的运动。您必须在浏览器中发送数据，告诉您可以根据需要在哪些位置操作数据的身体部位和位置

在这里您可以找到如何制作它。[运动检测和渲染](http://kinection.codeplex.com/)

更多关于 kinect[一般信息](http://en.wikipedia.org/wiki/Kinect)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-05T14:15:21.227

虽然这是一个非常古老的问题，但使用快速神经网络和来自网络摄像头的图像进行手部追踪有一些新的机会。在 Javascript 中。我推荐使用 Tensorflow.js 的[Handtrack.js](https://github.com/victordibia/handtrack.js)库。

[![在此处输入图像描述](../Images/689e4756f3679f9dcef05cc96ba9f54b.png)](https://i.stack.imgur.com/70iJp.jpg)

简单的使用示例。

```
<!-- Load the handtrackjs model. -->
<script src="https://cdn.jsdelivr.net/npm/handtrackjs/dist/handtrack.min.js"> </script>

<!-- Replace this with your image. Make sure CORS settings allow reading the image! -->
<img id="img" src="hand.jpg"/> 
<canvas id="canvas" class="border"></canvas>

<!-- Place your code in the script tag below. You can also use an external .js file -->
<script>
  // Notice there is no 'import' statement. 'handTrack' and 'tf' is
  // available on the index-page because of the script tag above.

  const img = document.getElementById('img'); 
  const canvas = document.getElementById('canvas');
  const context = canvas.getContext('2d');

  // Load the model.
  handTrack.load().then(model => {
    // detect objects in the image.
    model.detect(img).then(predictions => {
      console.log('Predictions: ', predictions); 
    });
  });
</script> 
```

[演示](https://victordibia.github.io/handtrack.js/#/) [运行 codepen](https://codepen.io/victordibia/pen/RdWbEY)

[还可以在 python 中](https://github.com/victordibia/handtracking)看到类似的神经网络实现-

免责声明..我维护这两个项目。

# validation - 如何检查恶意用户是否没有从 C# 中的 RadioButtonList 提交禁用的 ListItem？

> ID：10227467
> 
> 赞同：1
> 
> 时间：2012-04-19T11:53:41.677
> 
> 标签：validation, selection, radiobuttonlist

假设我有一个`RadioButtonList`控件：

```
<asp:RadioButtonList ID="rdbSubscriptionType" runat="server">  
      <asp:ListItem Value="Eval" Selected="True">Evaluation</asp:ListItem>  
      <asp:ListItem Value="Monthly" Enabled="false">Monthly Subscription (not available yet)</asp:ListItem>  
      <asp:ListItem Value="Yearly" Enabled="false">Yearly Subscription </asp:ListItem>  
</asp:RadioButtonList> 
```

恶意用户确实可以使用**POST**操作 a `ListItem`with提交到服务器`Enabled = "false"`。我想禁止这种行为。

在服务器端，我可以简单地检查：

```
if( rdbSubscriptionType.SelectedItem.Enabled == true) 
```

但我不确定恶意用户是否也可以使用**Javascript**或类似技术从客户端更改控件的**启用状态。**是否有执行此验证的最佳实践？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:58:12.020

您需要考虑围绕“禁用”某项决定的业务规则。

如果您正在做的唯一检查是基于从前端返回的内容，那么您就有麻烦了。任何人都可以使用 FireBug 更改 html 值并将其发布到服务器。

在您的服务器端代码中，您遵循什么业务规则来确定提交表单的用户是否有权执行任何给定的操作？

您在 html 中说他们不允许按月订阅。你是根据什么商业基础做出这个决定的？一旦您清楚这一点，您就可以将其放入代码中并检查表单何时发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:58:44.530

不，`.Enabled`无法使用 JavaScript 更改属性，您可以使用现有的东西（自己测试以确认）。也就是说，有一种更彻底的设置方法：

使用单独的模型填充 rdbSubscriptionType 项目集合（启用、值和显示文本），然后在服务器端与该模型进行比较，而不是与`asp:RadioButtonList`控件本身进行比较。**

# c++ - 使用带有 ifstream::open 的宽字符串或带有 CreateProcess 的多字节字符串

> ID：10227470
> 
> 赞同：0
> 
> 时间：2012-04-19T11:53:55.187
> 
> 标签：c++, string

我有一段代码，我需要在其中使用带有 ifstream::open 和 CreateProcess 的字符串，例如

```
//in another file
const char* FILENAME = "C:\\...blah blah\\filename.bat"; 
```

* * *

```
// in main app
std::ifstream is;
is.open(FILENAME);
// ...do some writing
is.close();

STARTUPINFO si;
PROCESS_INFORMATION pi;

ZeroMemory( &si, sizeof(si) );
si.cb = sizeof(si);
ZeroMemory( &pi, sizeof(pi) );

std::string cmdLine = "/c " + FILENAME;

if( !CreateProcess( "c:\\Windows\\system32\\cmd.exe", 
    cmdLine.c_str(), NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi) ) 
{       
    return GetLastError();
} 
```

CreateProcess 需要一个 LPCWSTR，因此要将字符串与 CreateProcess 一起使用，我需要将文件名和“cmdLine”声明为 std::wstring，但 ifstream::open 不采用宽字符串...我想不出办法解决这个问题。我似乎总是遇到 unicode 与多字节字符串的问题。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:09:39.620

我假设你定义了`UNICODE`. 您可以更改`STARTUPINFO`to`STARTUPINFOA`和`CreateProcess`to`CreateProcessA`并且它应该可以正常工作（它对我有用）。

我不认为它会喜欢 + 操作。将一个 char 数组显式转换为字符串。

```
std::string cmdLine = (std::string)"/c " + FILENAME; 
```

`FILENAME`最后，如果有空格，您将需要在开头和结尾加上引号。

```
const char FILENAME = "\"C:\\Program Files\\Company\\Program\\program.exe\"";
                        ^           ^                                     ^ 
```

编辑：试着把它放在你的字符串声明下面：

```
char charCmdLine [MAX_PATH + 3]; //"/c " is 3 extra chars
strncpy (charCmdLine, cmdLine.c_str(), MAX_PATH + 3); 
```

然后，使用`charCmdLine`in`CreateProcess`代替`cmdLine.c_str()`.

# android - SDcard删除通知，它是如何完成的？广播还是服务？

> ID：10227486
> 
> 赞同：4
> 
> 时间：2012-04-19T11:54:54.860
> 
> 标签：android, storage, external, sd-card

我需要实现 android 中已经存在的 sd 卡移除通知，我需要知道它是如何完成的？任何示例代码或教程都会有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:02:34.527

您需要使用广播接收器来移除 SD 卡

```
public class MyReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    //If SD Card is Removed it will Come Here

           //Intent service = new Intent(context, WordService.class);
    //context.startService(service);
}
} 
```

在您的 Android 清单文件中添加接收器，如下面的代码。

```
 <receiver android:name="MyReceiver " >
        <intent-filter>
            <action android:name="android.intent.action.MEDIA_EJECT" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:00:24.083

系统广播各种事件的Intents，其中很多是关于SD卡（外部媒体）的状态变化。

所以你只需要为正确的 Intent 设置一个 BroadcastReceiver。查看[此](http://developer.android.com/reference/android/content/Intent.html)页面以供参考。您正在寻找 ACTION_MEDIA_* 操作。

# macos - 如何在 Mac OS X Lion 上通过 Cmake 编译 OpenCV 2.4.0 (beta2)？

> ID：10227487
> 
> 赞同：1
> 
> 时间：2012-04-19T11:54:55.217
> 
> 标签：macos, image-processing, opencv, cmake, computer-vision

我想在我的 Mac OS X Lion 系统上将 Opencv 2.4.0 (beta2) 与 EmguCV 和 MonoDevelop 一起使用。但是我无法通过 Cmake 编译 OpenCV 2.4.0，它显示缺少一些 highgui 的 dylib 文件。

谁能告诉我在 Mac OS X 中编译 OpenCV 2.4.0 的整个配置和过程？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:39:32.207

我从存储库（rev 8301）下载了 OpenCV 2.4.0 源代码，在 Mac OS X 10.7.3 上编译它没有问题：

```
$ svn info
Path: .
URL: http://code.opencv.org/svn/opencv/tags/2.4.0/opencv
Repository Root: http://code.opencv.org/svn/opencv
Repository UUID: c5418bc3-7546-4aae-8bad-fa6f2f3e53e6
Revision: 8301
Node Kind: directory
Schedule: normal
Last Changed Author: marina.kolpakova
Last Changed Rev: 8282
Last Changed Date: 2012-04-30 16:06:37 -0300 (Mon, 30 Apr 2012)

$ mkdir build
$ cd build
$ cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON ..

-- The CXX compiler identification is GNU
-- The C compiler identification is GNU
-- Checking whether CXX compiler has -isysroot
-- Checking whether CXX compiler has -isysroot - yes
-- Checking whether CXX compiler supports OSX deployment target flag
-- Checking whether CXX compiler supports OSX deployment target flag - yes
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Checking whether C compiler has -isysroot
-- Checking whether C compiler has -isysroot - yes
-- Checking whether C compiler supports OSX deployment target flag
-- Checking whether C compiler supports OSX deployment target flag - yes
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detected version of GNU GCC: 42 (402)
-- Extracting svn version, please wait...
-- SVNVERSION:  svn:8301
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of off64_t
-- Check size of off64_t - failed
-- Looking for fseeko
-- Looking for fseeko - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Looking for assert.h
-- Looking for assert.h - found
-- Looking for fcntl.h
-- Looking for fcntl.h - found
-- Looking for io.h
-- Looking for io.h - not found
-- Looking for jbg_newlen
-- Looking for jbg_newlen - not found
-- Looking for mmap
-- Looking for mmap - found
-- Looking for search.h
-- Looking for search.h - found
-- Looking for string.h
-- Looking for string.h - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- checking for module 'libavcodec'
--   found libavcodec, version 52.76.0
-- checking for module 'libavformat'
--   found libavformat, version 52.68.0
-- checking for module 'libavutil'
--   found libavutil, version 50.19.0
-- checking for module 'libswscale'
--   found libswscale, version 0.11.0
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- Found PythonInterp: /usr/bin/python (found suitable version "2.7.1", required is "2.0")
-- Found PythonLibs: /usr/lib/libpython2.7.dylib (Required is at least version "2.7.1")
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named sphinx
-- Could NOT find CUDA: Found unsuitable version "4.0", but required is at least "4.1" (found /usr/local/cuda)
-- 
-- General configuration for OpenCV 2.4.0 =====================================
-- Version control:                 svn:8301
-- 
--   Platform:
--     Host:                        Darwin 11.3.0 i386
--     CMake:                       2.8.6
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++ (ver 4.2.1)
--     C++ flags (Release):         -Wall -pthread -fomit-frame-pointer -msse -msse2 -O3 -DNDEBUG   -DNDEBUG
--     C++ flags (Debug):           -Wall -pthread -fomit-frame-pointer -msse -msse2 -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     C Compiler:                  /usr/bin/gcc
--     C flags (Release):           -Wall -pthread -fomit-frame-pointer -msse -msse2 -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -Wall -pthread -fomit-frame-pointer -msse -msse2 -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     Linker flags (Release):      
--     Linker flags (Debug):        
-- 
--   OpenCV modules:
--     To be built:                 calib3d contrib core features2d flann gpu highgui imgproc legacy ml nonfree objdetect photo python stitching ts video videostab
--     Disabled by user:            -
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java
-- 
--   GUI: 
--     Cocoa:                       YES
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        build (ver 1.2.6)
--     JPEG:                        build (ver 62)
--     PNG:                         build (ver 1.5.9)
--     TIFF:                        build (ver 42)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
-- 
--   Video I/O:                     QTKit
--     FFMPEG:                      YES
--       codec:                     YES (ver Unknown)
--       format:                    YES (ver Unknown)
--       util:                      YES (ver Unknown)
--       swscale:                   YES (ver Unknown)
--       gentoo-style:              YES
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     NO
--     Use Cuda:                    NO
--     Use Eigen:                   NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python (ver 2.7.1)
--     Libraries:                   /usr/lib/libpython2.7.dylib
--     numpy:                       /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include (ver 1.5.1)
--     packages path:               lib/python2.7/site-packages
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /Users/karlphillip/installers/OpenCV-2.4.0/opencv/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
CMake Warning:
  Manually-specified variables were not used by the project:

    BUILD_PYTHON_SUPPORT

-- Build files have been written to: /Users/karlphillip/installers/OpenCV-2.4.0/opencv/build 
```

之后，我执行`make`编译，就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:21:49.887

要消除有关 python 的 sphinx 包的错误，请使用安装它

```
sudo easy_install -U Sphinx 
```

或者，如果您使用 MacPorts：

```
sudo port install py26-sphinx 
```

在检查默认 python 解释器“python --version”的版本之前。在我的示例中，它是 2.6。

# c++ - 如何使用 boost::program_options 解析本身包含开关的命令行参数？

> ID：10227489
> 
> 赞同：0
> 
> 时间：2012-04-19T11:54:58.037
> 
> 标签：c++, boost-program-options

我正在用 C++ 编写一个程序，它是一些基准测试的包装器，其中包含开头的一些设置代码和结尾的 analisys 代码。

我想同时运行两个基准测试。这些的原始命令行是：

```
/path0/benchmark0 -switch0 -switch1 -switch2
/path1/benchmark1 -arg0 -arg1 -arg2 -arg4 
```

我想把这些放在我的包装器的命令行上：

```
wrapper -setup_arg0 -setup_arg1 -analysis_arg0 --command0 /path0/benchmark0 -switch0 -switch1 -switch2 --command1 /path1/benchmark1 -arg0 -arg1 -arg2 -arg4 
```

我想在哪里获得两个`std::vector<std::string>`s，每个`command0`和一个`command1`，包含原始命令行。这就是我的做法（使用`boost::program_options`）：

```
("command0", po::value<std::vector< std::string> >(&command0)->multitoken(), "command line for thread 0")
("command1", po::value<std::vector< std::string> >(&command1)->multitoken(), "command line for thread 1") 
```

这基本上有效。`-`但是，如果基准测试的参数以（就像我见过的大多数程序上的大多数开关一样）开头，则`program_options`尝试将它们解析为包装器开关的一部分，因为它不知道它们应该在`command0`or下组合在一起`command1`。

`program_options`支持吗？如果是这样，怎么做？

* * *

**例子：**

在我工作的地方，有一个惯例是通过像这样“终止”多令牌来做到这一点：

```
wrapper <snip> --command0 /path0/benchmark0 -switch0 -switch1 -switch2 -command0- 
```

`--command0`（在本例中，我以.结尾`-command0-`。）

我怎么能`program_options`像这样处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:59:26.877

我认为最好将`command0`and`command1`的值作为单个字符串。例如，

```
wrapper --command0 "/path0/benchmark0 ..." --command1 "/path1/benchmark1 ..." 
```

是的，还有更多工作要做，因为您必须使用`wordexp`各自的命令字符串（除非您已经将这些字符串直接传递给 shell ;-)），但它更清楚地区分了包装器的内容和被调用的内容命令。

# html - 使用 css 定位图像，使其不会从浏览器创建水平滚动条

> ID：10227491
> 
> 赞同：0
> 
> 时间：2012-04-19T11:55:02.167
> 
> 标签：html, css, image

我正在尝试创建类似于此的内容：http: [//www.solidstudio.it/](http://www.solidstudio.it/)注意地球图像（world_black.png）绝对位于右侧，但即使我的浏览器窗口宽度较小，它也不会创建水平滚动条。怎样才能实现这样的目标？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:57:59.397

添加`overflow-x:hidden`到你的身体：

```
body { overflow-x: hidden; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:00:41.907

尝试使用溢出属性。

溢出：隐藏；

这应该隐藏指定区域之外的内容而不显示滚动条。

# javascript - 浏览器在滚动上加载内容多少是太多了？

> ID：10227495
> 
> 赞同：0
> 
> 时间：2012-04-19T11:55:25.670
> 
> 标签：javascript, ajax, testing, optimization, browser

由于[Google 官方博客](http://googleblog.blogspot.com.es/)、[Twitter](https://twitter.com/#lolz)和[Pinterest](http://pinterest.com/)等网站在每次用户向下滚动时都通过 ajax 加载内容，我想知道多少是太多？在每个浏览器上测试它的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:01:13.263

> *[问“有什么限制”就像问“一杯水有多大”](https://stackoverflow.com/questions/10220530/what-are-the-limits-to-pushing-javascript-performance/10220623#comment13129588_10220623)*
> 
> -罗布G。

你不能也永远不会有一个真正的限制。如果你坚持，限制是：

*   用户浏览器的能力
*   用户硬件
*   用户对堆和处理饥饿导致的日益滞后的 UI 的耐心。

# c - 在调用 stat 之前，我是否需要 fflush 或关闭文件？

> ID：10227497
> 
> 赞同：2
> 
> 时间：2012-04-19T11:55:29.300
> 
> 标签：c, file, stat

打开文件进行写入后：

```
FILE *file = fopen("./file", "w"); 
```

我可以假设文件是​​立即创建的吗？打电话是否安全：

```
 stat( "./file", info); 
```

或者我应该更好：

```
 fflush(file); 
```

或者

```
 fclose(file); 
```

预先？

编辑：在 fopen 调用后假设非 NULL 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:02:26.813

[fopen 手册页](http://pubs.opengroup.org/onlinepubs/007904975/functions/fopen.html)说：

> 如果模式是 w、wb、a、ab、w+、wb+、w+b、a+、ab+ 或 a+b，并且文件以前不存在，则在成功完成后，fopen() 函数将标记更新文件的 st_atime、st_ctime 和 st_mtime 字段以及父目录的 st_ctime 和 st_mtime 字段。

所以我认为在 fopen 调用成功后对文件进行统计是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:10:00.263

是的，从逻辑上讲，我们可以做到。由于打开文件以写入只读文件系统失败。这表明 fopen()/open() 进行了必需的检查。其他确认的方法是通过打开与**open() 的 O_EXCL 标志类似的 x**文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:17:14.310

如果调用[`fopen`](http://pubs.opengroup.org/onlinepubs/007904975/functions/fopen.html)成功，则表示文件已创建。该文件可能不会提交（刷新）到磁盘。但是您不必担心这一点，因为下一次调用[`stat`](http://linux.die.net/man/2/stat)将从内核缓冲区获取文件。

因此，在这种特殊情况下不需要an[`fflush`](http://pubs.opengroup.org/onlinepubs/007904875/functions/fflush.html)或 an 。[`fclose`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fclose.html)

有几次你需要对刷新到磁盘感到头疼的时候是有可能发生系统崩溃的时候。在这种情况下，如果您没有使用类似的方式将数据完全提交到磁盘[`fsync`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fsync.html)，那么下次系统重新启动时可能会丢失数据。

# c++ - 将用 VS 2005 编写的 Net free C++ 代码迁移到 VS2010 中的 Visual C++

> ID：10227507
> 
> 赞同：0
> 
> 时间：2012-04-19T11:56:01.953
> 
> 标签：c++, visual-c++, .net-4.0, migration

我们的 VB6 程序当前调用 C++ dll 中的代码。这个 dll 不需要注册，它只需要一个 .def 文件来指定属性和方法。Vb6 后期绑定到它。该dll是用VS2005编写的，不依赖于Net框架。

由于我们正在将我们的应用程序迁移到 Net4 并且还想用新功能增强 C++ dll，我想知道如何将现有的 C++ 代码迁移到 VC++。我想此后 dll 将愉快地集成到我们已经包含 C# 和 VB.Net 库的解决方案中。

是否有一些关于该计划的注意事项的教程/文档？

编辑：我认为我对 VC++ 有一些基本的误解，认为它可以移植到 100% 托管代码，同时保持 C++ 语法。我得到的答复似乎表明 VC++ 将始终生成本机、非托管代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:34:22.923

从纯 C++ 的角度来看，您应该能够自动将 VS2005 解决方案和项目转换为 VS2010。如果我记得当您将解决方案或项目加载到 VS2010 中时，它会自动为您转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:45:44.663

如果您在 VS2010 中打开 VS2005 项目文件，VS2010 会自动将旧项目转换为新项目格式，并且自动转换将尽最大努力确保一切正确。这通常有效，但并非总是如此。所以这里故事的寓意是，为了安全起见，仔细检查所有新项目的编译器/链接设置。

同样使用 VS2010，您可以在托管代码和本机代码之间获得更好的互操作可能性：P/Invoke 和 C++/CLI。P/Invoke 更简单，但你会发现这些东西可能会编译但在运行时会失败。C++/CLI 更灵活，工作量更大，但在必要时更容易调试互操作。

# app-store - 来自 AppStore 的用户 ID

> ID：10227521
> 
> 赞同：1
> 
> 时间：2012-04-19T11:56:30.613
> 
> 标签：app-store, in-app-purchase

我们实现了应用内购买，但希望接收有关用户的一些信息：用户可以选择不付费预购某些内容。这样我们的服务器就不会无用，我们想强制注册。我们可以提出一些请求并了解他在 AppStore 中使用的用户 id。

还是被禁止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:24:46.763

我没有给你一个可靠的答案，也没有什么可引用的。但我几乎可以肯定这是不允许的。我建议阅读文档，并进行一些研究。

您可能会找到一种获取用户 ID 的方法，但这可能会导致您的应用被拒绝。苹果不喜欢这种行为。

# iphone - 在 iphone 中将 NSData 转换为 UIImage

> ID：10227524
> 
> 赞同：1
> 
> 时间：2012-04-19T11:56:40.130
> 
> 标签：iphone

我想将 nsdata 转换为 uiimage 并在 imageview 中显示。

数据来自这样的数据库

```
NSData *imgdata = [[NSData alloc] initWithBytes:sqlite3_column_blob(cmp_sqlstmt,1)
                                         length:sqlite3_column_bytes(cmp_sqlstmt,1)]; 
```

我试过这段代码

```
UIImage *image=[UIImage imageWithData:imgdata];

//set image to imageview
[img setImage:image]; 
```

但图像未显示。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:45:51.543

这是 JPEG 的代码示例，您可以将压缩设置为十进制从 0 到 1：

```
UIImage *yourimage = [UIImage imageNamed:@"YourImage.png];
NSData *imgData = UIImageJPEGRepresentation(yourImage, 1.0); 
```

编辑：

给你

```
NSData *yourData = somedata
UIImage *yourImage = [UIImage imageWithData:yourData]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-19T12:20:50.363

尝试这个

```
UIImage *imageObj = yourImage

 NSData *imgData = UIImagePNGRepresentation(imageObj);

profileImage.image= [UIImage imageWithData:imgData]; 
```

# iphone - iPhone：日期转换问题

> ID：10227527
> 
> 赞同：0
> 
> 时间：2012-04-19T11:56:53.217
> 
> 标签：iphone

我需要检查一个事件日期，它应该在当前日期和从现在起 60 天之间。使用了下面的代码，但它不能正常工作。请注意，我正在从我的服务器获取这样的事件字符串 - “2012-04-14T16:50:02Z”。

```
// current date
double currDateInMilliSecs = [NSDate timeIntervalSinceReferenceDate] * 1000;    
NSLog(@"currDateInMilliSecs: %f", currDateInMilliSecs);

// sixty days
double sixtydaysvalue = 60.0 * 24.0 * 3600.0 * 1000.0;
NSLog(@"sixtydaysvalue: %f", sixtydaysvalue);
// add current date + sixt days
double sixtyDaysMilliSecsFromCurrDate = currDateInMilliSecs + sixtydaysvalue;
NSLog(@"sixtyDaysMilliSecsFromCurrDate: %f", sixtyDaysMilliSecsFromCurrDate);

// check does the event date between current date + 60 days
NSDateFormatter *df = [[NSDateFormatter alloc] init];
//[df setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
//[df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

// [eventDict objectForKey:@"begin_at"] gives date string like this "2012-04-14T16:50:02Z"  for ex.
NSDate *eventdate = [df dateFromString:[eventDict objectForKey:@"begin_at"]];

NSTimeInterval nowSinceEventDate = [eventdate timeIntervalSince1970];
NSLog(@"nowSinceEventDate: %f", nowSinceEventDate);
double eventDateInMilliSecs = nowSinceEventDate * 1000;
NSLog(@"eventDateInMilliSecs: %f", eventDateInMilliSecs);

// this is not working as expected    
if ( eventDateInMilliSecs<sixtyDaysMilliSecsFromCurrDate && eventDateInMilliSecs>currDateInMilliSecs )
{

}
else
{
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:10:04.240

尝试这个

[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss SSS"];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:04:32.687

尝试这个：

```
NSString *dateString = @"2012-04-14T16:50:02Z";

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
NSDate *eventDate = [formatter dateFromString:dateString];

NSTimeInterval nowSinceEventDate = [eventDate timeIntervalSince1970];
NSLog(@"interval = %f", nowSinceEventDate); 
```

**更新：**

```
NSString *dateString = @"2012-05-21T16:50:02Z";

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
NSDate *eventDate = [formatter dateFromString:dateString];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:60];

NSDate *minDate = [NSDate date];
NSDate *maxDate = [gregorian dateByAddingComponents:components toDate:minDate options:0];

NSLog(@"eventDate interval = %f", [eventDate timeIntervalSince1970]);
NSLog(@"minDate interval = %f", [minDate timeIntervalSince1970]);
NSLog(@"maxDate interval = %f", [maxDate timeIntervalSince1970]);

BOOL isBetween = (([eventDate compare:minDate] == NSOrderedDescending) && ([eventDate compare:maxDate] == NSOrderedAscending));
NSLog(@"isBetween = %d", isBetween); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:01:53.593

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-MM-dd HH:mm:ss:SSS"];
// [eventDict objectForKey:@"begin_at"] gives "2012-04-14T16:50:02Z"
NSDate *eventdate = [df dateFromString:[eventDict objectForKey:@"begin_at"]]; 
```

**[df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];**

***SSS***毫秒

# android - 如何修复 Android 中的 XML 布局？

> ID：10227528
> 
> 赞同：0
> 
> 时间：2012-04-19T11:56:55.170
> 
> 标签：android, android-layout

我正在显示我想要生成的所需布局的图像我是 android 开发的新手我还为此列出了我的 XML ......我可以在其中修复 TextView 和 WebView 但我无法修复左侧的按钮，任何人都可以向我建议我必须做的所需添加以及在我的 XML 文件中的位置。

![在此处输入图像描述](../Images/c5863d753703f443b77ec81f39b6eb9a.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    >

    <TextView 
        android:id="@+id/txtItem1"
        android:text="ITEM"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:textColor="#009966"
        android:background="@drawable/txtbackground"

        />

    <!-- WebView  -->
    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:background="@drawable/image_bg"
        android:layout_marginTop="50dip"
        >

        <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webkit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"

         />
    </LinearLayout>    

</RelativeLayout> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:08:40.203

只需替换以下代码即可。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    >
<RelativeLayout 
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:id="@+id/header"
    >
    <TextView 
        android:id="@+id/txtItem1"
        android:text="ITEM"
        android:layout_alignParentRight="true"
        android:layout_width="wrap_content"
        android:layout_height="50dip"
        android:textColor="#009966"

        />
<Button 
    android:layout_alignParentLeft="true"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:text="Button"
    />

    </RelativeLayout>

    <!-- WebView  -->
    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="3dip"
        android:layout_below="@+id/header"
        android:layout_marginTop="50dip"
        >

        <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webkit"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"

         />
    </LinearLayout>    

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:01:19.707

只需复制并粘贴到您的文件中。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <TextView
        android:id="@+id/txtItem1"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:background="@drawable/txtbackground"
        android:text="ITEM"
        android:textColor="#009966" />
</LinearLayout>

<!-- WebView -->

<LinearLayout
    android:id="@+id/thumbnail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginTop="50dip"
    android:background="@drawable/image_bg"
    android:padding="3dip" >

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webkit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:00:33.123

无需过多了解细节，您的布局应该是这样的：

```
<LinearLayout orientation="horizontal">
  <Button />
  <TextView />
</LinearLayout>
<WebView /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:07:29.570

将此代码复制并粘贴到您的 XML 文件中

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Button" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:layout_marginLeft="39dp"
    android:layout_toRightOf="@+id/button1"
    android:text="TextView" />
 <WebView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webkit"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"

     /> 
```

# java - 如何从 Sublime Text 编辑器调试 Java 应用程序

> ID：10227530
> 
> 赞同：8
> 
> 时间：2012-04-19T11:57:23.283
> 
> 标签：java, debugging, ide, remote-debugging, sublimetext

有时我正在为相当大的 Java 应用程序做简单的修复，我不想为这个任务打开 Eclipse。Eclipse 启动时间很长，并且由于该项目是由大量子项目构建的，无论如何这些子项目都是由 Maven 构建的，因此 Eclipse 需要很长时间才能使用（至少在不耐烦的 Java 开发人员规模上是很长时间的）。

几乎我需要的一切都可以在 Sublime Text 编辑器中完成，但是 Eclipse 的亮点之一是调试器。我的工作流程是：进行修复，然后使用调试器对其运行应用程序（在服务器上）进行测试，以检查一切是否正常。

那么是否有任何 Sublime 插件或其他非 IDE 解决方案可以轻松调试 Java 应用程序。

注意：我看过[这篇文章](https://stackoverflow.com/questions/545056/how-to-debug-java-application-using-vim-gvim)- 它很旧，也许有更好的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:41:50.013

您可以寻找像[JDebugTool](http://www.debugtools.com/)这样的独立 Java 调试器。

或者，您可以简单地创建一个额外的 Eclipse 工作区，其中仅包含远程调试应用程序所需的最低限度（只有一个链接了所有源 jar 的项目）。这个工作区的启动速度将比全面启动快得多。

我从来没有使用过独立的 Java 调试器，而且我个人倾向于尽量减少必须学习的工具数量，并且 Eclipse 的调试器非常好。

# javascript - document.referrer 编码问题

> ID：10227533
> 
> 赞同：0
> 
> 时间：2012-04-19T11:57:28.973
> 
> 标签：javascript, jquery

referrer` 并将值保存在 cookie 中。结果是这样的，带有奇怪的字符：

```
http%3A//www.rzammit.com/props/testpage.asp%3Fadv%3D123%26loc%3D45 
```

如何删除那些奇怪的字符，以便链接正确显示？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:59:27.797

1.  使用 cookie 脚本在返回 cookie 之前将其取消转义或
2.  看这里如何 urldecode：[Javascript 等价于 php 的 urldecode()](https://stackoverflow.com/questions/3431512/javascript-equivalent-to-phps-urldecode)

```
var url = "http%3A//www.rzammit.com/props/testpage.asp%3Fadv%3D123%26loc%3D45";
url = decodeURIComponent(url.replace(/\+/g, ' ')); 
```

* * *

这是我自 90 年代中期以来一直使用的 cookiescript - 免费将 escape 替换为 encodeURIComponent 和 unescape 替换为 decodeURIComponent 以将其带入 2010 年代；）

```
// cookie.js file
var cookieToday = new Date(); 
var expiryDate = new Date(cookieToday.getTime() + (365 * 86400000)); // a year

/* Cookie functions originally by Bill Dortsch */

function setCookie (name,value,expires,path,theDomain,secure) { 
   value = escape(value);
   var theCookie = name + "=" + value + 
   ((expires)    ? "; expires=" + expires.toGMTString() : "") + 
   ((path)       ? "; path="    + path   : "") + 
   ((theDomain)  ? "; domain="  + theDomain : "") + 
   ((secure)     ? "; secure"            : ""); 
   document.cookie = theCookie;
} 

function getCookie(Name) { 
   var search = Name + "=" 
   if (document.cookie.length > 0) { // if there are any cookies 
      var offset = document.cookie.indexOf(search) 
      if (offset != -1) { // if cookie exists 
         offset += search.length 
         // set index of beginning of value 
         var end = document.cookie.indexOf(";", offset) 
         // set index of end of cookie value 
         if (end == -1) end = document.cookie.length 
         return unescape(document.cookie.substring(offset, end)) 
      } 
   } 
} 
function delCookie(name,path,domain) {
   if (getCookie(name)) document.cookie = name + "=" +
      ((path)   ? ";path="   + path   : "") +
      ((domain) ? ";domain=" + domain : "") +
      ";expires=Thu, 01-Jan-70 00:00:01 GMT";
} 
```

# spring-batch - FlatFileItemWriter 产生空白文件

> ID：10227536
> 
> 赞同：1
> 
> 时间：2012-04-19T11:57:35.977
> 
> 标签：spring-batch

我以以下方式使用 FlatFileItemWriter 以生成包含 [id, FirstName] 格式的项目列表的文件-

```
<bean id="FileWriter" class="org.springframework.batch.item.file.FlatFileItemWriter">
    <property name="resource" value="processedtext.txt"/>
    <property name="shouldDeleteIfExists" value="true"/>
    <property name="lineAggregator">
        <bean class="org.springframework.batch.item.file.transform.DelimitedLineAggregator">
            <property name="delimiter" value="-"/>
            <property name="fieldExtractor">
                <bean class="org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor">
                    <property name="names" value="id,firstName"/>
                </bean>
            </property>
        </bean>
    </property>
</bean> 
```

作业以 - 17:19:23,720 INFO main SimpleJobLauncher:111 结束 - 作业：[FlowJob：[name=FileToFileJob]] 已完成，参数如下：[{}] 和以下状态：[COMPLETED]

这里的问题是当我打开文件processedtext.txt 时，它是空白的。

如果出现问题以及如何解决问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-21T16:07:18.663

FaltFileItemWriter 有一个属性，需要使用如下

```
<property name="shouldDeleteIfEmpty" value="true"/> 
```

# sql - Powershell 检查运行状况监视器

> ID：10227537
> 
> 赞同：0
> 
> 时间：2012-04-19T11:57:42.170
> 
> 标签：sql, sql-server, powershell

我有以下代码，我正在尝试使其正常工作，我从此处的链接中获得了以下代码

[http://itknowledgeexchange.techtarget.com/dba/powershell-sql-server-health-check-script/](http://itknowledgeexchange.techtarget.com/dba/powershell-sql-server-health-check-script/)

所以这是我根据需要修改的代码

```
#Create a new Excel object using COM
$Excel = New-Object -ComObject Excel.Application
$Excel.visible = $True
#$Excel.visible = $False

#$workbook = $excel.Workbooks.Open("C:\pac.xlsx")

$Excel = $Excel.Workbooks.Add()
$Sheet = $Excel.Worksheets.Item(1)

#Counter variable for rows

$intRow = 2

#Read thru the contents of the SQL_Servers.txt file
#$servers = Import-Csv "\\pni-vmdbasql\d$\monitoring\inputs\sqltab.txt"
#$servers = Import-Csv "\\ent-pocpacapcx01\d$\monitoring\sqltab.txt"
$servers = Import-Csv "C:\sqltab.txt"

#########################################################
foreach ($entry in $servers)
{
$torp = $entry.TorP
$mon = $entry.monitor
$machine = $entry.server
$errorlog = $entry.errorlog
$os = $entry.os2000
$iname = $entry.Instance
if ($iname -eq "Null")
{
$instance = "$machine"
}
else
{
$instance = "$machine\$iname"
}
if ($torp -eq "Prod")
{
$ServerType = "Production"
}
else
{
$ServerType = "Test"
}
$instance = $instance.toupper()

#########################################################
#foreach ($instance in get-content "C:\SQL_Servers.txt")
#{

#Create column headers
$Sheet.Cells.Item($intRow,1) = "INSTANCE NAME:"
$Sheet.Cells.Item($intRow,2) = $instance
################################################

#This script gets SQL Server database information using PowerShell

[System.Reflection.Assembly]::LoadWithPartialName('Microsoft.SqlServer.SMO') | out-null

# Create an SMO connection to the instance
$s = New-Object ('Microsoft.SqlServer.Management.Smo.Server') $instance

$dbs = $s.Databases

#$dbs | SELECT Name, Collation, CompatibilityLevel, AutoShrink, RecoveryModel, Size, SpaceAvailable

#Formatting using Excel

$version = $s.VersionString

if ($version -like "*9.00.1399*")
{        $sqlversion = "SQL Server 2005 No Service Pack"
}
elseif ($version -like "*9.00.2047*")
{        $sqlversion = "SQL Server 2005 SP1"
}
elseif ($version -like "*9.00.3042*")
{        $sqlversion = "SQL Server 2005 SP2"
}
elseif ($version -like "*9.00.3068*")
{        $sqlversion = "SQL Server 2005 SP2"
}
elseif ($version -like "*9.00.3054*")
{        $sqlversion = "SQL Server 2005 SP2 with Q934458"
}
elseif ($version -like "*9.00.3073*")
{        $sqlversion = "SQL Server 2005 SP2 with Q954606"
}
elseif ($version -like "*9.00.3186*")
{        $sqlversion = "SQL Server 2005 SP2 with Q939562"
}
elseif ($version -like "*9.00.4035*")
{        $sqlversion = "SQL Server 2005 SP3"
}
## SQL Server 2000 Checks
elseif ($version -like "*8.00.194*")
{        $sqlversion = "SQL Server 2000 No SP"
}
elseif ($version -like "*8.00.384*")
{        $sqlversion = "SQL Server 2000 SP1"
}
elseif ($version -like "*8.00.532*")
{        $sqlversion = "SQL Server 2000 SP2"
}
elseif ($version -like "*8.00.760*")
{        $sqlversion = "SQL Server 2000 SP3"
}
elseif ($version -like "*8.00.818*")
{        $sqlversion = "SQL Server 2000 SP3 with MS03-031"
}
elseif ($version -like "*8.00.2039*")
{        $sqlversion = "SQL Server 2000 SP4"
}
elseif ($version -like "*8.00.2040*")
{        $sqlversion = "SQL Server 2000 NoSP with Q274329"
}
elseif ($version -like "*8.00.2050*")
{        $sqlversion = "SQL Server 2000 SP4 with MS08-040"
}
elseif ($version -like "*8.00.2187*")
{        $sqlversion = "SQL Server 2000 SP1 with Q923849"
}
elseif ($version -like "*8.00.2282*")
{        $sqlversion = "SQL Server 2000 QFE"
}
elseif ($version -like "*8.00.3073*")
{        $sqlversion = "SQL Server 2000 SP2 with Q954606"
}
#SQL Server 7
elseif ($version -like "*7.00.1094*")
{        $sqlversion = "SQL Server 7 SP4 with Q815495, Q821279"
}
#SQL Server 2008
elseif ($version -like "*10.0.1442.32*")
{        $sqlversion = "SQL Server 2008 X64 MSDN Beta"
}

else
{        $sqlversion = "Check me $version"
}

$Sheet.Cells.Item($intRow,3) = "Version:"
$Sheet.Cells.Item($intRow,4) = $sqlversion
$Sheet.Cells.Item($intRow,5) = $ServerType
if ($Servertype -eq "Production")
{
$fgColor = 35
}
else
{
$fgColor = 0
}
$Sheet.Cells.item($intRow, 5).Interior.ColorIndex = $fgColor

###########################################################

$Sheet.Cells.Item($intRow,1).Font.Bold = $True
$Sheet.Cells.Item($intRow,2).Font.Bold = $True
$Sheet.Cells.Item($intRow,3).Font.Bold = $True
$Sheet.Cells.Item($intRow,4).Font.Bold = $True
$Sheet.Cells.Item($intRow,5).Font.Bold = $True

##############################################
## Are full and tranlog backups running?
## DB Reindexing running?
##############################################

$intRow ++

$jobsserver = $s.JobServer
$jobs = $jobsserver.Jobs
$ijob = 0
$backjob = 0
$tranjob = 0
foreach ($job in $jobs)
{

if (($job.name -like "*backup*") -and ($job.name -notlike "*Tranlog*"))
{
$backjob = 1
$fullbackup = $job.name
$fullbackupstatus = $job.LastRunOutcome
$fullbackupdate = $job.LastRunDate

}
if ($job.Name -like "*tranlog*"

)
{
$tranjob = 1
$tranlogbackup = $job.name
$tranlogbackupstatus = $job.LastRunOutcome
$tranlogbackupdate = $job.LastRunDate

}
if ($job.Name -like "*index*")
{
$ijob = 1
$rebuildindex = $job.Name
$rebuildindexstatus = $job.LastRunOutcome
$rebuildindexdate = $job.LastRunDate

}
}

## Check to verify full backups are running ##
$dayago = [datetime]::Now.AddDays(-1)
if (($fullbackupstatus -eq "Succeeded") -and ($fullbackupdate -gt $dayago))
{
$fullbackupjob = "Full Backups Running"
}
elseif(($fullbackupstatus -ne "succeeded") -or ($fullbackupdate -lt $dayago))
{
$fullbackupjob = "Full Backups Failing"
}
if ($backjob -eq 0)
{
$fullbackupjob = "No Full Backup Job"
}

## Check to verify that Tranlogs backups are running fine ##
$hourago = [datetime]::Now.AddHours(-1)
if (($tranlogbackupstatus -eq "Succeeded") -and ($tranlogbackupdate -gt $hourago))
{
$tranbackupjob = "Tran Backup Running"

}
if(($tranlogbackupstatus -ne "succeeded") -or ($tranlogbackupdate -lt $hourago))
{
$tranbackupjob = "Tran BackupFailing"
}
if ($tranjob -eq 0)
{
$tranbackupjob = "No Tran Backup Job"
}

$weekago = [datetime]::Now.AddDays(-7)
if (($rebuildindexstatus -eq "Succeeded") -and ($rebuildindexdate -gt $weekago))
{
$indexjob = "Indexing Running"

}
elseif(($rebuildindexstatus -ne "succeeded") -or ($rebuildindexdate -lt $weekago))
{
$indexjob = "Indexing Failing"

}
if ($ijob -eq 0)
{
$indexjob = "No Indexing Job"

}

$Sheet.Cells.Item($intRow,1) = $fullbackupjob
$Sheet.Cells.Item($intRow,2) = $tranbackupjob
$Sheet.Cells.Item($intRow,3) = $indexjob
$Sheet.Cells.Item($intRow,1).Font.Bold = $True
$Sheet.Cells.Item($intRow,2).Font.Bold = $True
$Sheet.Cells.Item($intRow,3).Font.Bold = $True

##############################################

$intRow++

$Sheet.Cells.Item($intRow,1) = "DATABASE NAME"
$Sheet.Cells.Item($intRow,2) = "RECOVERY MODEL"
$Sheet.Cells.Item($intRow,3) = "SIZE (MB)"
$Sheet.Cells.Item($intRow,4) = "SPACE AVAILABLE (MB)"
$Sheet.Cells.Item($intRow,5) = "DATA DRIVE"
$Sheet.Cells.Item($intRow,6) = "SPACE AVAILABLE ON DISK (GB)"
$Sheet.Cells.Item($intRow,7) = "MIRROR STATUS"
$Sheet.Cells.Item($intRow,8) = "LOG SIZE (MB)"

#Format the column headers
for ($col = 1; $col –le 8; $col++)
{
$Sheet.Cells.Item($intRow,$col).Font.Bold = $True
$Sheet.Cells.Item($intRow,$col).Interior.ColorIndex = 48
$Sheet.Cells.Item($intRow,$col).Font.ColorIndex = 34
}

$intRow++
#######################################################
#      #This script gets SQL Server database information using PowerShell
#
#      [System.Reflection.Assembly]::LoadWithPartialName('Microsoft.SqlServer.SMO') | out-null
#
#      # Create an SMO connection to the instance
#      $s = New-Object ('Microsoft.SqlServer.Management.Smo.Server') $instance
#
#      $dbs = $s.Databases
#
#      #$dbs | SELECT Name, Collation, CompatibilityLevel, AutoShrink, RecoveryModel, Size, SpaceAvailable
#
#      #Formatting using Excel

foreach ($db in $dbs)
{
$name = $db.name
$model = $db.recoverymodel
if ($model -eq 1)
{
$modelname = "Full"
}
elseif ($model -eq 2)
{
$modelname = "Bulk Logged"
}
elseif ($model -eq 3)
{
$modelname = "Simple"
}

$logfiles = $db.LogFiles
foreach ($log in $logfiles)
{
$logsize = $log.size/1KB
$logsize = [math]::Round($logsize, 2)
}

#if(($name -ne "master") -and ($name -ne "model")) # -and ($name -ne "msdb"))
#{
#Divide the value of SpaceAvailable by 1KB
$dbSpaceAvailable = $db.SpaceAvailable/1KB

#Format the results to a number with three decimal places
$dbSpaceAvailable = "{0:N3}" -f $dbSpaceAvailable

$Sheet.Cells.Item($intRow, 1) = $db.Name

$Sheet.Cells.Item($intRow, 2) = $modelname
$Sheet.Cells.Item($intRow, 3) = "{0:N3}" -f $db.Size

#Change the background color of the Cell depending on the SpaceAvailable property value
if ($dbSpaceAvailable -eq 0.00)
{
$fgColor = 38
}
else
{
$fgColor = 0
}

$Sheet.Cells.Item($intRow, 4) = $dbSpaceAvailable
$Sheet.Cells.item($intRow, 4).Interior.ColorIndex = $fgColor

$dblocation = $db.primaryfilepath

$dblocation = $dblocation.split(":")

$dbdrive = $dblocation[0]
$drives = Get-WmiObject -ComputerName $machine Win32_LogicalDisk | Where-Object {$_.DriveType -eq 3}
foreach($drive in $drives)
{
$size1 = $drive.size / 1GB
$size = "{0:N2}" -f $size1
$free1 = $drive.freespace / 1GB
$free = "{0:N2}" -f $free1
$ID = $drive.DeviceID
$a = $free1 / $size1 * 100
$b = "{0:N2}" -f $a

if ($dbdrive -eq "C")
{
$fgColor = 38
}
else
{
$fgColor = 0
}

$Sheet.Cells.Item($intRow,5) = $dbdrive
$Sheet.Cells.item($intRow, 5).Interior.ColorIndex = $fgColor

if ($id -like "$dbdrive*")
{

if ($free1 -lt 5)
{
$fgColor = 38
}
else
{
$fgColor = 0
}
if (($ID -eq "C:") -and ($free1 -lt 1))
{
$fgColor = 38
}
$Sheet.Cells.Item($intRow,6) = $free1
$Sheet.Cells.item($intRow, 6).Interior.ColorIndex = $fgColor
}
}
if($version -like "*2000*")
{$mirrorstate = 0}
else
{
$mirrorstate = $db.MirroringStatus
}
if ($mirrorstate -eq 0)
{
$mirror = "No Mirror"
}
if ($mirrorstate -eq 1)
{$mirror = "Suspended"
}
if($mirrorstate -eq 5)
{
$mirror = "Synchronized"
}
if ($mirrorstate -eq 1)
{
$fgcolor = 38
}
else
{
$fgcolor = 0
}
$Sheet.Cells.Item($intRow,7) = $mirror
$Sheet.Cells.item($intRow, 7).Interior.ColorIndex = $fgColor

if ($logsize -gt 500)
{
$fgColor = 38
}
else
{
$fgColor = 0
}
$Sheet.Cells.Item($intRow,8) = $logsize
$Sheet.Cells.item($intRow, 8).Interior.ColorIndex = $fgColor

$intRow ++

#}
}

$intRow ++

}

$Sheet.UsedRange.EntireColumn.AutoFit()
cls

$workbook.saveas("C:\pac.xlsx")
#$excel.Quit()
$WorkBook = $Null
$WorkSheet = $Null
$Excel = $Null
[GC]::Collect() 
```

所以我的 sqltab.txt 文件看起来像这样

```
monitor,Server,Instance,TorP,ErrorLog,Ping
Y,lamaqldev01,lamydevl05,T,, 
```

我收到以下错误，因为我收集它是身份验证错误。那么如何以及在哪里传递 sa 帐户及其密码的参数？

**运行代码时出现错误 1**（这是我所说的身份验证错误）

[![在此处输入图像描述](../Images/d36713465743d4f219327507a5bce777.png)](https://i.stack.imgur.com/H57s0.jpg)

运行代码后error2 [![在此处输入图像描述](../Images/d25928e5a92a0e46f4377929236daec3.png)](https://i.stack.imgur.com/W5R0z.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:33:27.067

`ServerConnection`您可以在代码中创建 SMO 连接（大约第 60 行）时尝试传递一个对象

```
$mySrvConn = new-object Microsoft.SqlServer.Management.Common.ServerConnection
$mySrvConn.ServerInstance=$srvname
$mySrvConn.LoginSecure = $false
$mySrvConn.Login = "username"
$mySrvConn.Password = "password"

$srv = new-object Microsoft.SqlServer.Management.SMO.Server($mySrvConn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:42:51.483

如果您想缩短`if/elseif`用于检查`$version`一点的 70 行代码（使其更容易理解），您可以使用`switch`语句将其减少到 28 行。

你可以这样做：

```
 switch -wildcard ($version)
    {
        "*9.00.1399*" {$sqlversion = "SQL Server 2005 No Service Pack"}
        "*9.00.2047*" {$sqlversion = "SQL Server 2005 SP1"}
        "*9.00.3042*" {$sqlversion = "SQL Server 2005 SP2"}
        "*9.00.3068*" {$sqlversion = "SQL Server 2005 SP2"}
        "*9.00.3054*" {$sqlversion = "SQL Server 2005 SP2 with Q934458"}
        "*9.00.3073*" {$sqlversion = "SQL Server 2005 SP2 with Q954606"}
        "*9.00.3186*" {$sqlversion = "SQL Server 2005 SP2 with Q939562"}
        "*9.00.4035*" {$sqlversion = "SQL Server 2005 SP3"}
            ## SQL Server 2000 Checks
        "*8.00.194*" {$sqlversion = "SQL Server 2000 No SP"}
        "*8.00.384*" {$sqlversion = "SQL Server 2000 SP1"}
        "*8.00.532*" {$sqlversion = "SQL Server 2000 SP2"}
        "*8.00.760*" {$sqlversion = "SQL Server 2000 SP3"}
        "*8.00.818*" {$sqlversion = "SQL Server 2000 SP3 with MS03-031"}
        "*8.00.2039*" {$sqlversion = "SQL Server 2000 SP4"}
        "*8.00.2040*" {$sqlversion = "SQL Server 2000 NoSP with Q274329"}
        "*8.00.2050*" {$sqlversion = "SQL Server 2000 SP4 with MS08-040"}
        "*8.00.2187*" {$sqlversion = "SQL Server 2000 SP1 with Q923849"}
        "*8.00.2282*" {$sqlversion = "SQL Server 2000 QFE"}
        "*8.00.3073*" {$sqlversion = "SQL Server 2000 SP2 with Q954606"}
            #SQL Server 7
        "*7.00.1094*" {$sqlversion = "SQL Server 7 SP4 with Q815495, Q821279"}
            #SQL Server 2008
        "*10.0.1442.32*" {$sqlversion = "SQL Server 2008 X64 MSDN Beta"}
        default {$sqlversion = "Check me $version"}
    } 
```

`Switch`语句可以更轻松地查看您正在检查的内容。您可以将所有长`if/else`语句更改为`switch`，它将教训长度并使其更易于维护。

# android - 使用 getFileStreamPath 确定文件存在——排序工作

> ID：10227543
> 
> 赞同：2
> 
> 时间：2012-04-19T11:58:04.897
> 
> 标签：android

我正在尝试确定 SD 卡上我的应用程序文件夹中是否存在文件。我首先检查文件夹是否存在并处理得很好。接下来我想看看文件是否存在所以我尝试了以下但得到“包含路径分隔符”

```
File file = getBaseContext().getFileStreamPath(ChildFolder + "/LiftData.xml"); 
```

ChildFolder 是正确的路径。我之前设置了它，您可以在调试透视图中正确地看到它。如果我只使用文件名，它不会看到文件并每次都创建它。

```
File file = getBaseContext().getFileStreamPath("LiftData.xml"); 
```

我怀疑这是因为没有任何路径信息，它正在根目录中查找文件。我可以设置基本上下文，但这会起作用吗？这是正确的/好的做法吗？

当我向谷歌寻求帮助时，我没有找到任何好的例子，所以我很抱歉再次打扰你帮助这个 Java 菜鸟。

JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:07:28.473

几点：

*   要获取外部存储上的应用程序文件夹，请调用[`Context.getExternalFilesDir`](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)).

*   不要使用“/”，而是使用常量`File.separator`（或者，更好的是，使用`File`构造函数来组装绝对路径：`File(basePath, "LiftData.xml")`

*   测试文件是否存在[`File.exists`](http://developer.android.com/reference/java/io/File.html#exists())

*   请记住，您的应用需要明确的权限才能访问外部存储，并且您应该通过以下方式检查它是否可用[`Environment.getExternalStorageState`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageState())

# asp.net - “405 方法不允许” - 使用 ASP.NET jQuery ajax POST 时

> ID：10227549
> 
> 赞同：6
> 
> 时间：2012-04-19T11:58:23.220
> 
> 标签：asp.net, jquery, post, http-status-code-405

我已经搜索了与类似问题相关的大量不同的现有 SO 问题，但我无法找到与我的问题相关的任何内容。

我有以下 jQuery 代码：

```
$.ajax({
   url: "Index.aspx/DeclineRequest"
   , type: 'POST'
   , contentType: 'application/json; charset=utf-8'
   , dataType: 'json'
   , data: JSON.stringify({ RequestId: requestId })
}); 
```

我正在使用一种非常相似的技术在另一个 ASP.NET Web 应用程序上发布数据，并且效果很好。但是，此应用程序返回以下错误：

> “网络错误：405 方法不允许 - [http://localhost:57255/](http://localhost:57255/) .....”

我找不到这两个应用程序有什么不同，所以我很困惑为什么这不起作用。

我能想到的这两个应用程序之间的唯一区别是，正在运行的是 .NET 2.0，而无法运行的是 .NET 3.5。

我尝试将以下内容添加到我的`web.config`中，但仍然收到相同的 405 错误：

```
<webServices>
   <protocols>
     <add name="HttpPost"/>     
     <add name="HttpPostLocalhost"/>   
   </protocols>      
</webServices> 
```

我该如何解决这个问题？

**更新 (16:40)：**我已将此应用程序移至 IIS，并且不再返回 405 错误。然而，我们的开发环境只是 localhost。为什么这只会在本地主机上出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T08:52:02.253

也许迟到了，但是，尝试添加到您的 Web.Config 文件中：

```
< handlers >
   ....
       < remove name="WebDAV" />
   ....
< /handlers > 
```

本文解释了可能导致问题的原因：

[http://www.asp.net/web-api/overview/testing-and-debugging/troubleshooting-http-405-errors-after-publishing-web-api-applications](http://www.asp.net/web-api/overview/testing-and-debugging/troubleshooting-http-405-errors-after-publishing-web-api-applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:17:17.367

> POST 方法经常会出现 405 错误。您可能试图在网站上引入某种输入表单，但并非所有 ISP 都允许处理表单所需的 POST 方法。
> 
> 所有 405 错误都可以追溯到 Web 服务器的配置和管理对网站内容的访问的安全性，因此您的 ISP 应该很容易解释。

[http://www.checkupdown.com/status/E405.html](http://www.checkupdown.com/status/E405.html)

我会打开 IIS Logging 来检查请求。也让 Fiddler 看看幕后发生了什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:06:07.883

检查请求你发送到服务器
的参数denseRequest是一个具有`RequesId`OR属性的对象`string`（或其他数据类型）名称`RequestId` 因为在后一种情况下你可以只发送数据`JSON`或纯字符串，`RequestId=requestId`
所以尝试用`JSON.stringify({ RequestId: requestId })`更多的东西替换合适的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:10:52.863

url: "Index.aspx/DeclineRequest" 不应该是 url: "Index.aspx?DeclineRequest" 应该吗？

很抱歉这个相当明显的建议，我以前没有见过这样的网址。你在重写吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T08:22:42.750

我的猜测是：在请求中，您说返回的内容将是 JSON，但是您返回的纯字符串格式不正确...尝试返回正确的 JSON 或将内容类型更改为纯文本以进行测试...

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-12-14T09:47:57.383

从您的代码中删除此代码 dataType: 'json' 并运行

# windows - 如何更改 Outlook 2010 中的“修改日期”

> ID：10227552
> 
> 赞同：2
> 
> 时间：2012-04-19T11:58:26.790
> 
> 标签：windows, outlook, ms-office, mapi

以下操作将更改消息的修改日期/时间：

*   转发
*   回复
*   回复所有人
*   编辑和保存
*   移动或复制

来源（我知道它是旧的，但我认为它是最新的）： http: [//support.microsoft.com/default.aspx ?scid=197981](http://support.microsoft.com/default.aspx?scid=197981)

我们需要更改此日期的条件，例如，仅当更改邮件类别时，日期才会更改。

我的问题：这可能吗？需要使用哪种语言？MAPI?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:11:42.043

创建日期和最后修改日期由商店提供商计算，无法修改。如果您使用的是 PST 提供程序，则可以在进行更改之前回滚系统时钟。

# c# - SignalR for .net 和观察者模式

> ID：10227553
> 
> 赞同：5
> 
> 时间：2012-04-19T11:58:28.930
> 
> 标签：c#, .net, design-patterns, signalr

到目前为止，我已经阅读了很多解释 SignalR 的文章。

搜索得出一个简单的定义：SignalR 可用于开发实时 Web 应用程序

根据 wiki ：实时 Web 应用程序是一组技术和实践，使用户能够在其作者发布信息后立即接收信息，而不是要求他们或他们的软件定期检查源以获取更新。

SignalR 似乎类似于观察者/发布者和订阅者模式，其中客户端订阅服务器，如果事件发生，服务器将通知发送给所有客户端。

所以我的查询是： 1) SignalR 是否基于消息传递模式（即观察者/发布者和订阅者）？

2）如果是，那么当我们已经有一个现有的消息模式 SignalR 时，为什么还要使用另一种消息模式 SignalR。

3) SignalR 与消息传递模式相比有哪些优势（观察者/发布者和订阅者）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-06T23:55:27.627

这个问题已经快4年没有回答了！SignalR 是 Microsoft 推荐的实时应用程序开发解决方案。Http 请求/响应模型要求客户端调用服务器以从服务器获取响应。但是 SignalR 允许服务器将消息推送到客户端，而无需客户端频繁轮询服务器。

**答案 1。**是的，这有观察者/订阅者模式实现。客户端需要先订阅服务器事件。然后服务器向客户端广播（或者它可以向每个客户端发送消息）。

**回答 2 和 3。**我会更实际地回答这个问题，如果您需要向客户端推送通知（如 fb 通知、事件日志等），这将是理想的。.Net 技术堆栈中没有其他类似 SignalR 的技术，它更[有效地](http://www.asp.net/signalr/overview/getting-started/introduction-to-signalr)做到了这一点。

请参阅此[Stock Market](http://www.asp.net/signalr/overview/getting-started/tutorial-server-broadcast-with-signalr)示例应用程序，它如何生成服务器事件并实时传递到客户端。多人游戏和在线聊天是其他一些有用的案例。

# artificial-intelligence - 人工智能 - 模糊系统

> ID：10227554
> 
> 赞同：0
> 
> 时间：2012-04-19T11:58:31.380
> 
> 标签：artificial-intelligence, fuzzy-logic

我有一些练习题和答案如下：

![在此处输入图像描述](../Images/e5e3038a01d9db5c96ca42a5d49cfddc.png)

但是，我不确定为什么问题 1（突出显示）的解决方案以`1-...`- 有人可以解释一下吗？所有`NOT`/`¬`解决方案都以开头，`1-...`如果是，**为什么**？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:13:01.483

这个符号有点混乱，因为它混合了模糊集理论和模糊逻辑。这里`not A`可能意味着模糊集 A 的补集（除了 A，有时写为 A，在字母 A 上方有一个横杠或写为 A^C）。（稍后与您的导师确认）。

函数 \mu_A （LaTeX 语法，我不知道，如何在此处输入希腊符号）是一个函数，它为集合 Aie 分配包含等级 \mu_A(x) = 0.6 表示 x 包含在 A 中并带有等级为 0.6（与 x 是 A 的元素的概率相似但不相同）。\mu_A(x) = 0 表示 x 不是 A 的元素。

因此，如果 A 中 x 的包含等级是某个值 v，那么 A 的补集（这里写为`not A`）中包含等级的自然定义是 1-v（这也类似于概率论：如果概率一个元素在某个集合 A 中的概率是 v，那么该元素在 A 的补集中的概率是 1-v)。

因此，补码的包含函数 \mu_{not A} 可以定义为 \mu_{not A} = 1 - \mu_A。

这个定义与并集 (max) 和交集 (min) 是一致的，因此集合论的通常定律仍然是正确的（如德摩根定律：A 和 B 的并集的补集是 A 和 B 的补集的交集: not(A u B) = (not A) \intersect (not B))。

# html - QtWebkit 中的简单加密/解密

> ID：10227555
> 
> 赞同：1
> 
> 时间：2012-04-19T11:58:33.263
> 
> 标签：html, qt, encryption, qtwebkit, qwebview

我正在使用 QWebView 制作浏览器，我想实现以下目标：

浏览器——->向服务器发送请求——->服务器响应加密的html——->浏览器解密html并显示。

但问题是我无法弄清楚如何在查看收到的 html 之前对其进行解密。我还没有找到任何可以覆盖的信号或虚函数。

我什至尝试更改 QNetworkAccessManager，然后尝试篡改 QNetworkReply，但 QNetworkReply 是只读的。

那么有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:00:39.537

通过 HTTPS 发出请求，让 SSL 为您处理所有加密。

# mysql - MySQL INSERT INTO SELECT JOIN

> ID：10227556
> 
> 赞同：0
> 
> 时间：2012-04-19T11:58:33.483
> 
> 标签：mysql

我正在尝试将旧的 MySQL 基础修改为新的 - 我希望更好。所以我有一个问题，因为我自己无法处理：

我有一张有 5 列的旧表：

```
*table_old*
id | name_1 | name_2 | name_3 | role 
 1 |    aaa |    bbb |    ccc |    g 
 2 |    aaa |    ccc |    ddd |    f 
 3 |    bbb |    aaa |    ddd |    g 
```

等等。

我创建了一个新表来存储具有 2 列的名称值，它看起来像这样：

```
*table_name*
id | name 
 1 |  aaa
 2 |  bbb
 3 |  ccc
 4 |  ddd 
```

因为我使用它角色命名新表（旧表的最后一列），所以我可以创建具有 4 列的新表，因此：

```
*table_g*
id | name_1 | name_2 | name_3
 1 |    aaa |    bbb |    ccc
 2 |    bbb |    aaa |    ddd

*table_f*
id | name_1 | name_2 | name_3
 1 |    aaa |    ccc |    ddd 
```

此外，因为名称可能很长，我更喜欢使用表 2 中的 id 值而不是名称 - 我想得到类似的东西：

```
*table_g*
id | id_1 | id_2 | id_3
 1 |    1 |    2 |    3
 2 |    2 |    1 |    4

*table_f*
id | id_1 | id_2 | id_3
1  |    1 |    3 |    4 
```

我将列的名称从 *name_1* 更改为 *id_1* 等。

现在我正在寻求帮助。我正在尝试使用类似的东西：

```
INSERT INTO `table_g`(`id_1`, `id_2`, `id_3`)
SELECT `table_name`.`id`,`table_name`.`id`,`table_name`.`id`
FROM `table_name` 
  RIGHT JOIN `table_old` ON `table_name`.`name` = `table_old`.`name_1`
  RIGHT JOIN `table_old` ON `table_name`.`name` = `table_old`.`name_2`
  RIGHT JOIN `table_old` ON `table_name`.`name` = `table_old`.`name_3`
WHERE `table_old`.`role` = 'g'; 
```

但这不起作用......如果可以，请提供帮助：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:22:36.093

```
INSERT INTO `table_g`(`id_1`, `id_2`, `id_3`)
SELECT t1.`id`, t2.`id`, t3.`id`
FROM `table_name` tn
  RIGHT JOIN `table_old` t1 ON tn.`name` = t1.`name_1` AND t1.`role` = 'g'
  RIGHT JOIN `table_old` t2 ON tn.`name` = t2.`name_2` AND t2.`role` = 'g'
  RIGHT JOIN `table_old` t3 ON tn.`name` = t3.`name_3` AND t3.`role` = 'g' 
```

乍一看，您的选择有很多模棱两可的地方，所以至少您应该尝试使用上面的代码会发生什么。

# ios - UIPopover 发布 iOS

> ID：10227560
> 
> 赞同：0
> 
> 时间：2012-04-19T11:58:47.057
> 
> 标签：ios, uipopovercontroller

我有`@property(nonatomic,retain) UIPopoverController * popoverController;`

我在我的实现类中创建了我的弹出框。

我用这个：

```
- (void)createPopover:(NavigationController *)tempNavigation {

            UIPopoverController *tempPopover = [[UIPopoverController alloc] initWithContentViewController:tempNavigation];
            self.popoverController = tempPopover;
            [self.popoverController setPopoverContentSize:CGSizeMake(width, height)];
            tempPopover.delegate = self;                

            CGRect selectedRect = [self.tableView rectForRowAtIndexPath:indexPath];             
            [tempPopover presentPopoverFromRect:selectedRect inView:self.tableView permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
            [tempPopover release];
} 
```

在这种方法中，我需要释放我的弹出框

我用这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if (popoverController) {
        [popoverController dismissPopoverAnimated:NO];
        self.popoverController=nil; 
        [popoverController release];
    }
    return YES;
} 
```

我的问题：在这种方法中释放 popover 的正确方法。或者我必须只在 dealloc 方法中释放 popover？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:17:05.287

```
self.popoverController=nil; 
```

调用 setter。鉴于您的属性被声明为保留，这将释放先前的值并保留新的值（在这种情况下，它保留 nil 什么都不做）。

```
[popoverController release]; 
```

在 popoverController 上调用 release 现在是 nil ，它什么都不做。但是你不应该这样做，如果它不是 nil 它将被过度释放（因为下一次你设置 popoverController 属性时也会调用 release ）。

你设置属性的时候也有问题

```
UIPopoverController *tempPopover = [[UIPopoverController alloc] initWithContentViewController:tempNavigation];
self.popoverController = tempPopover; 
```

设置器保留该值，因此您应该自动释放它

```
self.popoverController = [tempPopover autorelease]; 
```

你应该使用ARC :)

# apache - Apache documentroot 其他本地服务器

> ID：10227565
> 
> 赞同：0
> 
> 时间：2012-04-19T11:59:17.663
> 
> 标签：apache, virtualhost

我的 apache2 virtualhost 'httpd.conf' 文件中有一个特定的子域，我想重定向到另一个本地 apache 服务器。我有一个将端口 80 上的所有请求重定向到原始服务器的路由器。

第二台服务器不在不同的全局 IP 地址上，而是在不同的本地 IP 地址上。

我有什么办法可以做到这一点，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:44:58.233

您可以使用 Apache 的代理功能来做到这一点。例如：

```
<VirtualHost *:80>
  ServerName myhostname

  <Location />
    ProxyPass http://address-of-local-server/
    ProxyPassReverse http://address-of-local-server/
  </Location>
</VirtualHost> 
```

这将导致 Apache 将匹配此 VirtualHost 定义的请求代理到另一台服务器并将结果返回给客户端。

这假定您已`mod_proxy`启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:13:23.887

您可以修改代理到由其 IP 地址标识的任何资源，例如

```
<VirtualHost *:80>

ServerName subdomain.domain.com
DocumentRoot /whatever
ProxyRequests Off

    <Proxy *>
    Order deny,allow
    Allow from all
    </Proxy>

    <Location / >
    ProxyPass http://192.168.0.x
    ProxyPassReverse http://192.168.0.x
    </Location>

#...

</VirtualHost> 
```

# java - 获取用于 Android 开发的图像

> ID：10227571
> 
> 赞同：1
> 
> 时间：2012-04-19T11:59:38.270
> 
> 标签：java, android, png, drawable, sprite

我正在为大学项目开发​​游戏，需要获得一些精灵。我在网上搜索过，但似乎只能找到旧的 SNES 风格的。

我正在寻找一个移动的足球（或任何球，但最好是足球）和球员和守门员 PNG 图像。另外，我想知道我是否可以简单地将它们放在 Android 的可绘制资源文件夹中，然后在我的`SurfaceView`?

不过，我想获得比旧主机游戏更好的质量。有谁知道有这样的好网站？

# php - PHP - 如何实时显示 print_r()

> ID：10227576
> 
> 赞同：0
> 
> 时间：2012-04-19T11:59:51.667
> 
> 标签：php

是否可以实时显示 print_r()。现场是指脚本执行时。我不想等待脚本结束来显示它。希望我清楚。预先感谢您的回复。干杯。马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:09:54.033

您可能正在通过像 Apache 这样的网络服务器使用 PHP。

网络服务器已经实现了缓存，它们倾向于以更大的块发送数据。
浏览器也实现了缓存，它们只在完成加载网站时不时刷新数据。
最后，PHP 还内置了缓存。

HTTP 不是为“实时”显示而设计的，它更像是一个静态页面，这就是为什么人们发明了“AJAX”和 Javascript 来在页面加载后轮询更改/实时事件。

你可以做什么：

1.  为了确保来自 PHP 的数据被发送到网络服务器，您可以使用命令`flush()`
    还有一个名为`implicit_flush`您可能想要查找的 php 设置。
2.  网络服务器可能使用 gzip/mod_gzip 来压缩输出。您需要禁用该行为。
    也许会这样做：`@apache_setenv('no-gzip', 1);`
3.  添加一些比纯文本更多的内容，如果您将数据放在一个简单的“表格”中，包括`</table>`它，浏览器更有可能在加载期间显示它。
4.  在 php ini 中查找：
    `output_buffering = Off`
    `zlib.output_compression = Off`
    您也可以在运行时执行此操作（`@ini_set('zlib.output_compression', 0);`）
5.  一些浏览器只有在接收到一定数量的字节时才会显示数据。
    如果我记得正确的 256 字节可能会有所帮助。
    `str_repeat(" ", 256);`（或其他任何东西）

我想补充一点，这些步骤可以帮助解决问题，但根据我的经验，结果并不完美。每个新的浏览器和浏览器版本可能会有所不同。

# .net - .net 中的固定块

> ID：10227577
> 
> 赞同：2
> 
> 时间：2012-04-19T11:59:55.310
> 
> 标签：.net, pointers, garbage-collection, fixed, unsafe

我对何时需要固定块感到有些困惑。我有一个例子，它给了我一个矛盾的场景：

```
enum RoomType { Economy, Buisness, Executive, Deluxe };

struct HotelRoom
{
    public int Number;
    public bool Taken;
    public RoomType Category;

    public void Print()
    {
        String status = Taken ? "Occupied" : "available";
        Console.WriteLine("Room {0} is of {1} class and is currently {2}", Number, Category, status);
    }
} 
```

我做了一个函数，它将指向一个`HotelRoom`

```
private unsafe static void Reserve(HotelRoom* room)
{
    if (room->Taken)
        Console.WriteLine("Cannot reserve room {0}", room->Number);
    else
        room->Taken = true;
} 
```

在主要方法中，我有以下内容：

```
unsafe static void Main(string[] args)
{
    HotelRoom[] myfloor = new HotelRoom[4];
    for (int i = 0; i < myfloor.Length; i++)
    {
        myfloor[i].Number = 501 + i;
        myfloor[i].Taken = false;
        myfloor[i].Category = (RoomType)i;
    }
    HotelRoom Room =  myfloor[1];
    Reserve(&Room);   //I am able to do this without fixed block.
    //Reserve(&myfloor[1]);  //Not able to do this so have to use fixed block below. 

    fixed (HotelRoom* pRoom = &myfloor[1])
    {
        Reserve(pRoom);
    }

    myfloor[1].Print();
    Room.Print();
} 
```

我的困惑是我能做到`Reserve(&Room)`但不能`Reserve(&myfloor[1])`。我认为他们在做同样的事情——将`HotelRoom`结构的内存地址传递给`Reserve`函数。为什么我需`fixed`要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:05:20.080

`Room`是存储在堆栈中的局部变量，而`myfloor`存储在堆中。垃圾收集器可以移动堆中的对象来压缩它（地址会改变），所以你需要“固定”它们。这就是为什么你需要`fixed`声明。

**更新：**

此外，还有一种方法可以在堆中的堆栈上分配内存：

`HotelRoom* fib = stackalloc HotelRoom[4];`

在这种情况下，您将不需要`fixed`声明。

**小声明：**能够做到这一点并不意味着你当然应该这样做。正如其他人已经提到的，这是非常非 .NET 的代码编写方式，所以我只是认为这个问题是理论上的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:07:15.493

这只是一个扔掉的例子吗？

或者...

我猜你正在尝试将 C++ 重写为 C#。您很少需要使用`unsafe`.NET 的主要观点是它是一个托管框架。

除非我在这里完全错了（您的所有代码都可以编写为托管代码），否则您应该阅读非托管代码和托管代码之间的差异，尤其是如何编写来自 C++ 背景的 C#。

看看这些：

[“托管”与“非托管”有什么区别？](https://stackoverflow.com/questions/3563870/what-is-the-difference-between-managed-vs-unmanaged)

[托管代码和非托管代码之间的区别？](http://challagullainfo.blogspot.co.uk/2011/01/difference-between-managed-code-and.html)

[面向 C++ 开发人员的 C#](http://msdn.microsoft.com/en-us/library/yyaad03b%28VS.80%29.aspx)

[.NET 零书](http://www.charlespetzold.com/dotnet/)

（编辑自[C# 书籍或 C++ 开发人员网站 [关闭]](https://stackoverflow.com/questions/1179697/c-sharp-books-or-web-sites-for-c-developers)）

# r - 使用 NP 包的带宽选择

> ID：10227581
> 
> 赞同：1
> 
> 时间：2012-04-19T12:00:30.970
> 
> 标签：r, vector, regression

R 新手，在一个非常简单的任务上遇到问题！我已将几列 .csv 数据读入 R，其中的内容包含自然数加零的变量，并且有缺失值。在尝试使用非参数包后，我有两个问题：首先，如果我使用简单的命令`bw=npregbw(ydat=y, xdat=x, na.omit)`，其中 x 和 y 是列向量，我得到“回归数据和响应数据的数量不匹配”的错误。为什么我会得到这个，因为我在每个向量中有相同数量的元素？

其次，我想使用命令调用数据并告诉 npregbw `bw=npregbw(ydat=y, xdat=ordered(x))`。当我这样做时，我得到的错误是 x 对于 sort.list 必须是原子的。但是 x 怎么不是原子的，它只是一个带有自然数和 NA 的向量？

任何澄清将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:45:04.463

1) y 和 x 中可能有不同数量的 NA。

2）不能确定这一点，因为没有例子。如果是以下类型：

```
 x <- c(3,4,NA,2) 
```

然后`ordered(x)`应该可以正常工作。请举例说明您的情况。

编辑：你当然试过`bw=npregbw(ydat=y, xdat=x)`？`ordered()`使您的向量成为有序因子（参见`?ordered`），它不是原子向量（参见 2.1.1[链接](http://cran.r-project.org/doc/manuals/R-lang.pdf)和`?factor`）

EDIT2：所以问题是子集数据的方式。请注意各种子集化方式的差异。data$x 和 data[,i] （其中 i = x 列的列号）为您提供向量，而 data[c("x")] 和 data[i] 提供数据框。函数需要向量，除非它们调用 data = (your data)。在这种情况下，它们使用列名

# android - 添加使用到主页按钮

> ID：10227584
> 
> 赞同：0
> 
> 时间：2012-04-19T12:00:33.657
> 
> 标签：android

当您按下主页按钮时，它默认会做什么？

我想保留它默认的功能，但要确保它也结束了我的音乐。

例如：

public void onBackPressed() { return;

我禁用了我的后退按钮。

我想让主页按钮完成它的功能，但我想调用我的 this.stopService(new Intent(this, Music.class)); 也在方法中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:02:51.627

> 当您按下主页按钮时，它默认会做什么？

它将主屏幕活动带到前台。

> 我想保留它默认的功能，但要确保它也结束了我的音乐。

停止您的前台活动中的音乐`onPause()`，`onStop()`因为当它失去主屏幕活动的前台时，将调用这些音乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:07:56.913

如果您是在编码意义上谈论-

主页按钮将默认启动器带到前台。

在方法内部使用 super.onPause() 或 super.onStop() 调用 onPause() 或 onStop。

如果您是在字面上谈论与代码无关的内容，那么..

主页按钮启动默认启动器活动，如果您在某些设备上安装了启动器，可以通过设置 > 应用程序 > 管理找到应用程序然后清除默认值来清除它

当音乐停止由开发人员代码决定时，抱歉​​，您无法更改它的工作方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:35:12.143

无法像按下后退按钮那样覆盖“主页”按键。实际上，您不应该过度按下主页键，因为用户按下主页键可以快速进入启动器。即使您尝试覆盖 onKeyDown()，您也会看到 Home 键按下不会调用此函数。

但是按 Home 键肯定会调用您的活动的 onStop()，因此您可以在 onStop() 中停止音乐服务。希望这可以帮助。

# maven - 有没有办法打印多模块 maven 项目的结构？

> ID：10227589
> 
> 赞同：10
> 
> 时间：2012-04-19T12:00:49.317
> 
> 标签：maven, printing, structure, pretty-print, multi-module

我正面临一个相当大的多模块 Maven 项目。我想看看根（父）项目是如何以 groupId:artifactId 的形式由子项目/子项目组成的（可能有一些标识来反映层次结构。

当然，我可以编写自己的插件来获取此打印输出，但我认为货架上肯定有一些可用的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-18T03:58:38.600

你好，迟到的答案，但我已经在 Maven 存储库中添加了一个插件：

```
<dependency>
    <groupId>org.qunix</groupId>
    <artifactId>structure-maven-plugin</artifactId>
    <version>0.0.1</version>
</dependency> 
```

要运行插件，您需要添加到您的 pom 中，如下所示：

```
<build>
        <plugins>

            <plugin>
                <groupId>org.qunix</groupId>
                <artifactId>structure-maven-plugin</artifactId>
                <version>0.0.1</version>
                <inherited>false</inherited>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>
                                printModules
                            </goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>

    </build> 
```

然后输出将如下所示：

```
 [INFO] --- structure-maven-plugin:0.0.1:printModules (default) @ test ---
[INFO] 

Project structure (all modules):

                test
                |
                |__ a
                |
                |__ b
                |
                |
                \__ c
                    |
                    |__ d
                    |
                    |__ e
                    |
                    |__ f 
```

如果要打印模块中的所有文件，请使用目标：**printAll**，或者如果您只想要文件夹，请使用目标：**printFolders**。`<inherited>`意味着不在模块中执行插件，`<ignore>`意味着使用正则表达式模式跳过这些文件。

编辑：永远没有可以从 github 提取的版本：[https ://github.com/buraksarac/MavenStructurePlugin](https://github.com/buraksarac/MavenStructurePlugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:24:54.487

到目前为止我还没有遇到过这样的插件，甚至没有听说过一个。谷歌也不知道，所以很可能你必须编写自己的插件或尝试解析`mvn dependency:tree`或只是反应堆构建顺序，可能使用大量控制台输出流等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:41:59.223

我认为 mvn`dependency:tree`是要走的路。

你应该试试这个：

```
mvn dependency:tree -DoutputFile=target/dependencies.txt
cat target/dependencies.txt | awk -F ':' '{print $1":"$2}' 
```

这样，您将拥有一个带有缩进但没有范围、版本和类型的漂亮依赖树:)

# linux - 在linux脚本中更改用户

> ID：10227590
> 
> 赞同：3
> 
> 时间：2012-04-19T12:00:49.643
> 
> 标签：linux, sh

用户 x 运行脚本。现在我想将脚本中的用户更改为用户 y。

```
#!/bin/sh
whoami
echo password | su y
whoami 
```

但我明白了：

```
x
su: must be run from a terminal
x 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-16T23:45:18.157

这在 bash 脚本中为我工作：

```
whoami;
sudo su $user << BASH
  whoami;
BASH 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T12:07:47.067

Su 不能在 Bash 脚本中运行。但是，您可以使用`sudo -u <user> <command> &&`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-06T10:51:26.310

你可以做：

su - $USER -l -m -c $CMD

-l 提供类似于登录 env 的环境 -m 保留当前环境 -c 运行命令

例如，我也使用它来运行 nohup 命令

su - $USER -l -m -c "nohup $RUN_CMD > "$LOG" 2>&1 >> /dev/null&"

# javascript - 从 jQuery 中的 URL 中提取搜索查询

> ID：10227591
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:00:49.833
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 JavaScript 中获取查询字符串值 在 JavaScript 中](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)
> [解析查询字符串](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)

```
http://www.example.org/search?q=example&another=test&again=more 
```

如何在 jQuery 中创建三个单独的变量，其值为`example`、`test`和`more`？

换句话说，如何根据 URL 在 URL 中的位置（第一、第二、第三等）或基于查询的`&another=`部分（不确定它叫什么）从 URL 中提取查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:08:28.737

我将现有插件用于以下任务：[https ://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:10:10.383

我使用这种方法：

```
var query        = window.location.split('?')[1]; // or http://www.example.org/search?q=example&another=test&again=more
var query_obj    = unserialize(query);

function unserialize(query) {
    var pair, params = {};
    query = query.replace(/^\?/, '').split(/&/);
    for (pair in query) {
        pair = query[pair].split('=');
        params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
    }
    return params;
} 
```

所以你会有你的变量是`query_obj`这样的：`query_obj.test`

不久前我在互联网上找到了该功能，因此我无法提供链接。抱歉，感谢第一个发布它的人。

# mongodb - 根据另一个字段的值更新 mongo 中的文档字段

> ID：10227593
> 
> 赞同：6
> 
> 时间：2012-04-19T12:00:50.573
> 
> 标签：mongodb

假设我有两个字段 F1 和 F2。我想将 F1 更新为`F1 + ", " + F2`. 我可以使用 mongo 中的单个更新命令来执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:02:58.380

不，你不能那样做。您不能在 mongodb 更新中使用表达式。唯一的方法是将该文档获取到客户端，在那里编写新的字段值并发出准备好的更新语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T20:40:10.160

正如 Sergio 所提到的，即使在**2.4.8**版本提出问题一年后，你也不能这样做。但是如果你需要这样做，你可以使用这个

```
db.yourCollection.find({}).forEach(function(doc) {
  doc.F1 = doc.F1 + ", " + doc.F2;
  delete doc.F2;
  db.yourCollection.save(doc);
}); 
```

# php - 如何在 PHP 中从 Oracle 获取单行？

> ID：10227597
> 
> 赞同：3
> 
> 时间：2012-04-19T12:01:12.023
> 
> 标签：php, oracle, row, fetch, oracle-call-interface

我想知道如何在 PHP 中从 Oracle 获取单行？

检查我的脚本-：我想从**ITEM_INFO表中****获取单行**并将该值与变量**$sku**和**$code**进行比较...我应用的逻辑适用于 Mysql 但不适用于 Oracle...

 ******每次 $sku & $code 包含差异。值，所以我只需要将它们与 ITEM_INFO 表进行比较，如果匹配，则更新相同的标志...

```
$query_fetch = "SELECT ITEM_NAME,SITE_CODE FROM app.ITEM_INFO WHERE ITEM_FLAG = 'N'";
$stmt = oci_parse($conn,$query_fetch);
oci_execute($stmt);
while(($row = oci_fetch_array($stmt, OCI_BOTH))) 
{   
    $ITEM_NAME = ($row["ITEM_NAME"]);                       
    $SITE_CODE = ($row["SITE_CODE"]);   

    if(($ITEM_NAME === $sku) && ($SITE_CODE === $code))
    {   
              $query_ora_update = "UPDATE app.ITEM_INFO SET ITEM_FLAG= 'Y', LAST_UPDATE_DATE = sysdate WHERE ITEM_NAME = '$sku' AND SITE_CODE = '$code' AND ITEM_FLAG = 'N' ";
                                            $parse_result = oci_parse($conn,$query_ora_update);
    $result = oci_execute($parse_result);
    oci_commit($conn);
    oci_close($conn);
    }
 } 
```

请指导我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:12:41.060

基本上，您只需要删除`while`循环。

这是应用该更改的代码的重写（+您使用了太多括号，降低了代码的可读性+您应该使用 SQL 绑定来避免注入）：

```
$query_ora_update = "UPDATE app.ITEM_INFO SET ITEM_FLAG= 'Y', LAST_UPDATE_DATE = sysdate WHERE ITEM_FLAG = 'N'";
$parse_result = oci_parse($conn, $query_ora_update);
$result = oci_execute($parse_result);

oci_commit($conn);
oci_close($conn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:33:28.977

要在 Oracle 中获取单行，请在 where 子句中添加以下条件：

```
ROWNUM = 1 
```

不幸的是，无法理解您的其余代码，如果您在更新的 where 子句中已经具有相同的条件，则无法理解为什么“ifs”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:44:25.183

相当于 mysql_fetch_assoc 的 Oracle 是[oci_fetch_assoc](http://php.net/manual/en/function.oci-fetch-assoc.php) :)

```
$parsed = ociparse($conn, $sql);
while ($row = oci_fetch_assoc($parsed))
{
    // your logic here
} 
```******

# linux - make 文件中的 := 和 += 有什么区别？

> ID：10227598
> 
> 赞同：20
> 
> 时间：2012-04-19T12:01:12.867
> 
> 标签：linux, unix, makefile

以下陈述的工作区别是什么？

```
 LDDIRS := -L$(ORACLE_LIB)
 LDDIRS += -L$(ORACLE_LIB) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-09T10:17:12.687

*   := (Simply Expanded Variable) 当变量被定义时，该值被扫描一次并且所有扩展
    对其他变量和函数的任何引用。例如 `x:=foo`
    `y:=$(x) bar`
    `x:=later`
    ，上面等价于
    `y:=foo bar`
    `x:=later`

*   += 用于将更多文本附加到变量，例如
    `objects=main.o foo.o bar.o`
    `objects+=new.o`
    将对象设置为 'main.o foo.o bar.o new.o'

*   = 用于递归扩展变量。值是逐字安装；如果它包含对其他变量的引用，则只要替换此变量，就会扩展这些变量。这称为递归扩展。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-30T02:52:42.407

“=”用于定义递归扩展变量。下面的make文件会打印出“y is later bar”

```
x = foo
y = $(x) bar
x = later

all:;echo "y is" $(y) 
```

":=" 用于定义简单的扩展变量，一劳永逸地扩展。下面的 make 文件将打印出“y is foo bar”

```
x := foo
y := $(x) bar
x := later

all:;echo "y is" $(y) 
```

此外，正如其他人之前指出的那样，您可以在 GNU make 手册的[使用变量](http://www.gnu.org/software/make/manual/make.html#Using-Variables)部分中获得更多详细信息。

希望这可以帮助 ：-）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T12:04:04.967

`:=`*将此处*的变量定义为左侧，`+=`将右侧添加到变量的现有值。`:=`与`=`which 在使用地点评估右侧（而不是在此特定行中）进行比较

您可以在[此处](http://www.gnu.org/software/make/manual/make.html#Using-Variables)查看手册（假设您使用的是 GNU make）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-27T08:13:24.227

```
GNU Make has three assignment operators, ":=" , "=", "?=" and one "+=" for appending 
to the varibles.  

- ":=" performs immediate evaluation of the right-hand side and stores an actual   
  string into the left-hand side. 
  eg: 
  x:=foo
  y:=$(x) bar 
  x:=later
  so above is equivalent to
  y:=foo bar 
  x:=later

  test above example 
  x := foo 
  y := $(x) bar 
  x := later

  all:;echo "y is" $(y)

  output
  ------
  y is foo bar 

- "=" is like a formula definition; it stores the right-hand side in an 
  unevaluated form and then evaluates this form each time the left-hand 
  side is used.

  eg:
  x = foo
  y = $(x) bar
  x = later

  all:;echo "y is" $(y)

  output
  ------
  y is  later foo 
```

*   "?=" 仅在未设置/没有值时分配。例如： KDIR ?= "foo" KDIR ?= "bar" 测试： echo $(KDIR) 将打印 "foo"

    *   "+=" 用于将更多文本附加到变量。例如 objects=main.o foo.o bar.o objects+=new.o

        这会将对象设置为'main.o foo.o bar.o new.o'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T12:06:30.007

从[这个网站](http://www.gnu.org/software/make/manual/make.html#Using-Variables)

[用于放置在页面上](http://www.gnu.org/software/make/manual/make.html#Flavors)的语法链接`:=`

> 简单扩展的变量由使用 ':=' 的行定义（请参阅设置变量）。当变量被定义时，一个简单扩展变量的值被扫描一次，扩展对其他变量和函数的任何引用。简单扩展变量的实际值是扩展您编写的文本的结果。它不包含对其他变量的任何引用；它包含它们在定义此变量时的值。

[用于放置在页面上](http://www.gnu.org/software/make/manual/make.html#Appending)的语法链接`+=`

> 当所讨论的变量以前没有定义过时，'+=' 的作用就像普通的 '='：它定义了一个递归扩展的变量。但是，当有先前的定义时，'+=' 的确切作用取决于您最初定义的变量的风格。有关两种变量的解释，请参阅变量的两种形式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T12:07:15.897

将为`:=`变量设置一次值，即每次使遇到该变量时都不会重新评估它。编译代码时可以对性能产生巨大影响。

`+=`将简单地将一个值添加到变量中。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-04-19T12:04:44.010

用于赋值，`:=`方式与 相同`=`。

`+=`为变量添加一个新值。

# linq - 在 linq 的对象初始化程序中设置参数时传递当前对象

> ID：10227600
> 
> 赞同：0
> 
> 时间：2012-04-19T12:01:13.513
> 
> 标签：linq

```
 var userData = (from u in DB.user_data
                                     join p in DB.users on u.userid equals p.userid
                                     join s in DB.roles on p.roleid equals s.roleid
                                     where u.deptid == 24
                                     select new UserData()
                                     {
                                         userId = u.id,
                                         RoleName = s.Name,
                                         CreateDate = u.Create_date,
                                         Active = u.Active,
                                         ValidTokens = GetTokencount(-- userdata  --) -- how to pass current userdata object here

                                     }).ToList(); 
```

以下是我根据逻辑从中获取用户可用计数的全局方法

```
public int GetTokencount(UserData objUserData)
{

// code to get count goes here 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:10:50.480

简单地说，你不能。当您在对象初始化器中时，当前`UserData`对象尚未初始化，因此您无法引用它。

相反，您可以在创建集合后循环遍历集合，以便`ValidTokens`在每个`UserData`实例上设置您的属性。

# php - str_replace 只做部分工作

> ID：10227603
> 
> 赞同：0
> 
> 时间：2012-04-19T12:01:20.537
> 
> 标签：php, str-replace

有时我会在我的项目中有一个字符串，它只是一个首字母缩写词（即首字母缩写词），它的所有字母都需要大写。

例如。

```
str_replace("Mcg","MCG",$string); 
```

这可以很好地完成工作。但是，有时该字符串会包含一个首字母缩写词，该首字母缩写词也是单词的开头。

例如。

```
str_replace("Wa","WA",$string) 
```

这显然会将“想要”之类的词变成我显然不想要的“想要”。有什么方法我只能更改 2 或 3 个字符的单词吗？我正在考虑将字符串分解成一个数组并从那里开始。还是我应该使用更简单的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:05:29.603

如果效率不是问题，您可以这样做：

```
preg_replace("/\bWa\b/","WA",$string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:05:36.007

使用在[单词边界](http://www.php.net/manual/en/regexp.reference.escape.php)处停止的正则表达式，例如：

```
preg_replace('/(\b)Wa(\b)/', 'WA', $string); 
```

这会将所有出现的 'Wa' 替换为 'WA'，只要它的左右有空格、逗号、点、换行符或完全没有字符（我确定我在那里遗漏了一些字符） .

这比过滤空白（或空格）要好，因为您可能有以下情况：

```
He wants -> He wants
WaT -> WaT
Wa -> WA
Do be do be do Wa. -> Do be do be do WA.
Some Wa -> Some WA
Foo Wa Bar -> Foo WA Bar 
```

# iphone - 如何在 Xcode 中将 Core Data 包含到已创建的 iOS 项目中？

> ID：10227604
> 
> 赞同：6
> 
> 时间：2012-04-19T12:01:30.253
> 
> 标签：iphone, objective-c, xcode, core-data

我忘记包含Core Data，现在我已经完成了一半的项目，现在想包含它。

现在可以包含核心数据吗？如果是这样，谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T12:08:54.040

Xcode 4.3.2 添加核心数据框架。

选择 Target->Summary Pane-> Linked Frameworks & Libraries。

![在此处输入图像描述](../Images/90ffa6f17151f3db5dbc2f996672a252.png)

在上图中已经添加了 CoreData 框架。你可以点击它下面的“+”按钮来添加你选择的框架。

一旦您点击“+”按钮，您将看到下面的图像屏幕。

![在此处输入图像描述](../Images/f2182614ce0972a9d679e0a3db7ed0b8.png)

要向其中添加新文件，请转到文件-> 新文件-> iOS 选项卡-> CoreData 设置。您可以选择您的文件

![在此处输入图像描述](../Images/1bf7d462944d989b73f1e90d4eed1003.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T12:13:35.443

将 CoreData 框架添加到项目中，然后创建一个 .xdatamodeld 文件（File->New->CoreData-> Data Model）。将其命名为数据模型。然后创建一个将处理所有数据持久化操作的单例类：

。H

```
 //
    //  DataAccessLayer.h
    //  
    //
    //  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
    //

    #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>

    @interface DataAccessLayer : NSObject

    @property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
    @property (strong, nonatomic) NSManagedObjectModel *managedObjectModel;
    @property (strong, nonatomic) NSPersistentStoreCoordinator *storeCoordinator;

    + (DataAccessLayer *)sharedInstance;
    - (void)saveContext;

    @end 
```

.m

```
//
//  DataAccessLayer.m
//  
//
//  Created by admin on 2/27/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "DataAccessLayer.h"
@interface DataAccessLayer ()
- (NSURL *)applicationDocumentsDirectory;
@end

@implementation DataAccessLayer
@synthesize storeCoordinator;
@synthesize managedObjectModel;
@synthesize managedObjectContext;

+ (DataAccessLayer *)sharedInstance {
  __strong static DataAccessLayer *sharedInstance = nil;
  static dispatch_once_t onceToken;
  dispatch_once(&onceToken, ^{
    sharedInstance = [[DataAccessLayer alloc] init];
    sharedInstance.storeCoordinator = [sharedInstance persistentStoreCoordinator];
    sharedInstance.managedObjectContext = [sharedInstance managedObjectContext];
  });
  return sharedInstance;
}

#pragma mark - Core Data

- (void)saveContext {
  NSError *error = nil;
  if (managedObjectContext != nil)
  {
    if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
    {
      NSLog(@"error: %@", error.userInfo);
      /*
       Replace this implementation with code to handle the error appropriately.

       abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.
       */
      NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
      UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops!"
                                                      message:@"Something has gone terribly wrong! You need to reinstall the app in order for it to work properly."
                                                     delegate:nil
                                            cancelButtonTitle:@"Close."
                                            otherButtonTitles:nil, nil];
      [alert show];
    } 
  }
}

#pragma mark Core Data stack

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *)managedObjectContext {
  if (managedObjectContext != nil)
  {
    return managedObjectContext;
  }

  if (storeCoordinator != nil)
  {
    self.managedObjectContext = [[NSManagedObjectContext alloc] init];
    [managedObjectContext setPersistentStoreCoordinator:storeCoordinator];
  }
  return managedObjectContext;
}

/**
 Returns the managed object model for the application.
 If the model doesn't already exist, it is created from the application's model.
 */
- (NSManagedObjectModel *)managedObjectModel {
  if (managedObjectModel != nil)
  {
    return managedObjectModel;
  }
  NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DataModel" withExtension:@"momd"];
  self.managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
  return managedObjectModel;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
  if (storeCoordinator != nil)
  {
    return storeCoordinator;
  }

  NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"model.sqlite"];

  NSError *error = nil;
  self.storeCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
  if (![storeCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
  {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.

     Typical reasons for an error here include:
     * The persistent store is not accessible;
     * The schema for the persistent store is incompatible with current managed object model.
     Check the error message to determine what the actual problem was.

     If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
     [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

     Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops!"
                                                    message:@"Something has gone terribly wrong! You need to reinstall the app in order for it to work properly."
                                                   delegate:nil
                                          cancelButtonTitle:@"Close."
                                          otherButtonTitles:nil, nil];
    [alert show];
  }    

  return storeCoordinator;
}

#pragma mark Application's Documents directory

/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory {
  return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T16:52:29.487

[hp iOS Coder](https://stackoverflow.com/a/10227726/403018)和[Eugene](https://stackoverflow.com/a/10227799/403018)的答案都是正确的！

核心数据文件（或项目）配置为：

1.  `.pch`链接并包含核心数据框架（并在项目文件中作为导入语句这样做）
2.  应用程序委托标头 (.h) 包括声明 a`context`和(如上)`model`的属性`coordinator`
3.  的`app delegate`.m 定义`saveContext`, `managedObjectContext`, `managedObjectModel`, `persistentStoreCoordinator`,`applicationDocumentDirectory`函数/方法
4.  一个数据模型，如上

# asp.net - GridView 中的 ButtonField 将 ButtonType 设置为“图像”引发两个 http 帖子（仅限 IE）

> ID：10227605
> 
> 赞同：1
> 
> 时间：2012-04-19T12:01:33.687
> 
> 标签：asp.net, .net, gridview, postback, buttonfield

我面临与[**此处**](http://connect.microsoft.com/VisualStudio/feedback/details/104617/double-postback-using-buttonfield)提到的相同的问题。

在 GridView 中使用 ButtonField 并将 ButtonType 设置为“图像”时，单击它会生成 2 个 http 帖子。对于这些一次点击多次回传，回传的值第一次为“假”，第二次为“真”。如果按钮类型是链接或简单按钮，则行为正常。

```
<asp:ButtonField ButtonType="Image" Text="Delete" CommandName="Delete"
 CausesValidation="false" ImageUrl="../images/Delete.gif" ></asp:ButtonField> 
```

Microsoft 表示这是一个已知问题，尚未修复，解决此问题的方法是使用模板字段，这在大多数情况下是一个很好的解决方案，**但对于我的情况，我不能使用模板字段并且按钮必须是图像类型**。有没有其他方法可以解决这个问题？

**更新**：IE6、7、8所有版本都有同样的问题。如果有一些解决方法，请发布。

**Update2**：'Request.HttpMethod' 的值始终为 'POST'，即使两个回发具有不同的 IsPostback 值。检查这一点可能是一种可能的解决方法，但必须在每个页面上完成，在上述场景中，网格与 ButtonField 列一起使用。有什么比这个更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:09:38.223

如[http://connect.microsoft.com/VisualStudio/feedback/details/104617/double-postback-using-buttonfield中所述](http://connect.microsoft.com/VisualStudio/feedback/details/104617/double-postback-using-buttonfield)

您可以将按钮字段更改为图像按钮

# asp.net - 如果您无法在 SharepPoint 2010 中添加 ASP 包括... 那怎么办？

> ID：10227607
> 
> 赞同：0
> 
> 时间：2012-04-19T12:01:46.657
> 
> 标签：asp.net, sharepoint, sharepoint-2010

我在尝试弄清楚如何在 SharePoint 2010 中实现某种使用 ASP 包含的方法时遇到了非常困难的事情。如果您不能，请帮助我另一种方法。

我找到了解决方案，但我并不完全满意..

============HTML=============

```
 <div class="js-include" title="test.html"></div> 
```

============JQUERY=============

```
$(function () {
//Trigger global pages
$(".js-include").each(function(){
    var inc=$(this);
    $.get(inc.attr("title"), function(data){
        inc.replaceWith(data);
    });
});}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:03:56.090

有关如何使用 XML Web 部件在 SharePoint 中复制指令在 ASP 中完成的内容的示例，请参阅[Sharepoint 中的服务器端包含案例（续）。](http://sharepointallthetime.blogspot.com/2009/06/case-of-server-side-includes-in.html)`<!-- #include file -->`

但是，正如@PaulLeigh 所说，由于 SharePoint 是基于 ASP.NET 构建的，我强烈建议采用母版页和用户控件作为 ASP 样式的服务器端包含的替代品。

# django - 如何解析 urls.py 中的 ?var1=something？

> ID：10227611
> 
> 赞同：0
> 
> 时间：2012-04-19T12:01:57.477
> 
> 标签：django, django-urls

我必须处理这样的链接类型：

```
http://mydomain/?var1=something&var2=something 
```

如何将此重定向到标准 django 视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:38:38.893

GET 参数不会传递给 urls.py (https://docs.djangoproject.com/en/dev/topics/http/urls/)。当您在视图中使用 request.GET 来捕获此参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:40:48.580

GET 参数是自动解析的。因此，在 urls.py 中，您应该在没有这些参数的情况下编写 url，例如`"^$"`（空 url）。或者，例如，对于 url，`http://mydomain/some/path?var1=something&var2=something`您需要`"^some/path$"`在 urls.py中编写。那么在您看来，您将拥有`request.GET["var1"]`， `request.GET["var2"]`如果他们通过了。

# c# - 太空入侵者健康/阵列问题

> ID：10227612
> 
> 赞同：0
> 
> 时间：2012-04-19T12:01:58.070
> 
> 标签：c#, .net, xna

我一直在做一些练习来学习 C#。我一直在做 XNA 并克隆了一个太空入侵者。

到目前为止，一切都很好，但是我在编码时遇到了一些障碍。

问题及支持代码如下：

我排在最前面的入侵者有 2 点生命值，需要 2 次打击才能摧毁并产生更多点数。但是，当一个被击中并被摧毁时，排顶的其余部分将减少到 1 HP，并且需要 1 击才能摧毁 - 这不是我想要的结果。

我怀疑的违规代码是：

```
 if (playerBullet != null && Type1Invaders != null)
        {
            Rectangle rectMissile = new Rectangle((int)playerBullet.getX(), playerBullet.getY(), playerBulletIMG.Width, playerBulletIMG.Height);
            for (int count = 0; count < 11; count++)
            {
                Rectangle rectInvader = new Rectangle(Type1Invaders[count].getX(), Type1Invaders[count].getY(), invader1.Width, invader1.Height);
                if (Type1Invaders[count].getVis() && rectMissile.Intersects(rectInvader))
                {
                    Type1Invaders[count].setHP(Type1Invaders[count].getHP() - 1);
                    shootTimer = 0;
                    if (Type1Invaders[count].getHP() == 0)
                    {
                        explosionInstance.Play();
                        playerBullet = null;
                        Type1Invaders[count].setVis(false);
                        score = score + Type1Invaders[count].getPointValue();

                    }
                }
            }
        } 
```

* * *

我的第二个错误在于我如何连续检测最左边和最右边的入侵者。当整行被销毁时，我得到一个 nullreferenceerror。（那是一场噩梦……）

无论如何，这是有问题的代码

寻找左右最入侵者的方法

```
var LeftMost5 = Type5Invaders.Where(i => i.getVis()).FirstOrDefault();
var RightMost5 = Type5Invaders.Where(i => i.getVis()).LastOrDefault(); 
```

if 语句抛出空错误

```
 if (RightMost5.getX() >= RightGameEdge)
        {
            Type5.setDir(-1);
            for (int count = 0; count < 11; count++)
            {
                invaderMoveInstance5.Play();
                Type5Invaders[count].MoveY(8);
            }
        } 
```

它只发生在最右边，但我可以假设它也会发生在左边——我假设我可以应用相同的逻辑来修复这个错误到左边。

如果这还不够，我可以提供更多信息和片段。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:12:21.303

对于第一个问题。我想当一颗子弹杀死一个入侵者时，你可以说那颗子弹不会杀死另一个入侵者。因此，您可以添加一个`break;`来停止循环。像这样：

```
if (Type1Invaders[count].getVis() && rectMissile.Intersects(rectInvader))
{
  Type1Invaders[count].setHP(Type1Invaders[count].getHP() - 1);
  shootTimer = 0;
  if (Type1Invaders[count].getHP() == 0)
  {
    explosionInstance.Play();
    playerBullet = null;
    Type1Invaders[count].setVis(false);
    score = score + Type1Invaders[count].getPointValue();
  }
  break;
} 
```

* * *

对于第二个错误，如果您的集合为空（在您杀死所有类型 5 入侵者之后） ，该`FirstOrDefault`方法将返回。`null`您只需要检查它是否为空，如下所示：

```
var LeftMost5 = Type5Invaders.Where(i => i.getVis()).FirstOrDefault();
var RightMost5 = Type5Invaders.Where(i => i.getVis()).LastOrDefault();

if(RightMost5 != null)
{
    // this means we have a non-null invader
    if (RightMost5.getX() >= RightGameEdge)
    {
        Type5.setDir(-1);
        for (int count = 0; count < 11; count++)
        {
            invaderMoveInstance5.Play();
            Type5Invaders[count].MoveY(8);
        }
    }
}
else
{
    //this means that the invader does not exist anymore, so we do nothing
} 
```

# android - 无法在 Android 中动态删除 LinearLayout。怎么做？

> ID：10227613
> 
> 赞同：0
> 
> 时间：2012-04-19T12:01:58.287
> 
> 标签：android

```
public void onClick_addContact(View v)
    {
            LinearLayout layout = (LinearLayout) findViewById(R.id.layoutLinear);
            layout.addView(linearlayout(_intMyLineCount));
            _intMyLineCount++;

    }

    private EditText editText(int _intID) {
            EditText editText = new EditText(this);
            editText.setId(_intID);
            editText.setHint("My lines");
            editText.setWidth(180);         

            editTextList.add(editText);
            return editText;
        }

       private TextView textView(int _intID)
        {
            TextView txtviewAll=new TextView(this);
            txtviewAll.setId(_intID);
            txtviewAll.setText("My lines:");        

            textviewList.add(txtviewAll);
            return txtviewAll;
        }

       private Button button(int _intID)
       {
           Button btn = new Button(this);
           btn.setId(_intID);
           btn.setTag("but1");
           btn.setOnClickListener(newContact);

           return btn;

       }

       OnClickListener newContact = new OnClickListener() {
                //onClick view
                public void onClick(View v) {

                    LinearLayout layout =  (LinearLayout)v.getParent();

                    layout.removeViewInLayout(v);
                   // setContentView(layout);

                        _intMyLineCount--;

                                    }

               };

       private LinearLayout linearlayout(int _intID)
        {
            LinearLayout LLMain=new LinearLayout(this);
            LLMain.setId(_intID);       
            LLMain.addView(textView(_intID));
            LLMain.addView(editText(_intID));
            LLMain.addView(button(_intID));
            LLMain.setOrientation(LinearLayout.HORIZONTAL);

            linearlayoutList.add(LLMain);
            return LLMain;

        } 
```

在 newOnContact 监听器中，只有子按钮被删除，而不是包括 textView 和 EditText 的整个线性布局。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:29:04.360

您可以使用 layout.setVisibility(View.INVISIBLE); 或 layout.setVisibility(View.Gone); 从 UI 中删除布局。

View.INVISIBLE 将隐藏视图，但仍会占用空间，而 View.GONE 将删除视图并且不会占用 UI 中的任何空间。

参考[http://developer.android.com/reference/android/view/View.html#attr_android:visibility](http://developer.android.com/reference/android/view/View.html#attr_android:visibility)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:15:23.923

只需使用 GONE 常量：

```
layout.setVisibility(LinearLayout.GONE) 
```

那么你的线性布局将是不可见的，它也不会分配空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:30:05.343

不要将`newContact`onClickListener设置`Button`为 ，而是尝试设置为`LLMain`LinearLayout。因此，如果我没有误解您，您在 中收到的观点就是`onClick`您要删除的观点。`LinearLayout`

# c++ - QML、Qt 4.8：如何同时启用 openGl 和 Chromeless？

> ID：10227614
> 
> 赞同：0
> 
> 时间：2012-04-19T12:02:01.330
> 
> 标签：c++, qt, opengl, qml

所以这是我的主要

```
#include <QtGui/QApplication>
#include <QtOpenGL>
#include <QDeclarativeView>
#include <QDeclarativeEngine>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    // Depending on which is the recommended way for the platform, either use
    // opengl graphics system or paint into QGLWidget.
    #ifdef SHADEREFFECTS_USE_OPENGL_GRAPHICSSYSTEM
        QApplication::setGraphicsSystem("opengl");
    #endif

        QApplication a(argc, argv);

    #ifndef SHADEREFFECTS_USE_OPENGL_GRAPHICSSYSTEM
        QGLFormat format = QGLFormat::defaultFormat();
        format.setSampleBuffers(false);
        format.setSwapInterval(1);
        QGLWidget* glWidget = new QGLWidget(format);
        glWidget->setAutoFillBackground(false);
    #endif

        MainWindow w(glWidget);
    w.show();

    return a.exec();
} 
```

和我用来打开 QML 的文件

```
#include "mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{
    setAttribute(Qt::WA_OpaquePaintEvent);
    setAttribute(Qt::WA_NoSystemBackground);
  setAttribute(Qt::WA_TranslucentBackground);
  setStyleSheet("background:transparent;");
  qmlRegisterType<QGraphicsBlurEffect>("Effects",1,0,"Blur");
  /* turn off window decorations */
  setWindowFlags(Qt::FramelessWindowHint);

  ui = new QDeclarativeView;
  ui->setSource(QUrl("qrc:/assets/ui.qml"));

 // ui->setViewportUpdateMode(QGraphicsView::FullViewportUpdate);

  setCentralWidget(ui);
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

和

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtDeclarative>
#include <QtDeclarative/QDeclarativeView>

namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    QDeclarativeView *ui;
};

#endif // MAINWINDOW_H 
```

我尝试启用 Open GL 但我什么也没看到，当我在 main 中评论我认为必须完成这项工作的行时，我看到了我的 CHROMELESS 窗口，但也

```
Qml debugging is enabled. Only use this in a safe environment!
ShaderEffectItem::paint - OpenGL not available 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:12:15.923

我一直在努力解决同样的问题，但这似乎是不可能的。当父窗口透明时，OpenGL 元素似乎永远不会绘制，看起来 OpenGL 元素只能渲染到窗口中的可见部分，我还没有尝试过，但可以通过绘画来解决这个问题具有几乎完全透明层的主窗口：

```
void MainWindow::paintEvent(QPaintEvent *event)
{
  QPainter painter;

  painter.begin(this);
  painter.fillRect(event->rect(), QBrush(QColor(0, 0, 0, 1)));
  painter.end();
} 
```

从理论上讲，这*应该*为 OpenGL 提供一个可见的父级进行渲染。

~~在您的代码中，您多次调用 QWidget->setAttribute ，因为这会设置一个属性，每次设置属性时它都会覆盖以前的值。您应该将标志合并到一个调用中：~~

~~setAttribute(Qt::WA_TranslucentBackground | Qt::WA_NoSystemBackground | Qt::WA_OpaquePaintEvent);~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:48:28.713

据此：http: [//qt-project.org/faq/answer/opengl_and_translucent_background_do_not_work_together_due_to_a_limitation](http://qt-project.org/faq/answer/opengl_and_translucent_background_do_not_work_together_due_to_a_limitation)

这似乎是不可能的。

# sql-server - 从 Visual FoxPro 应用程序访问远程 SQL Server

> ID：10227615
> 
> 赞同：0
> 
> 时间：2012-04-19T12:02:03.443
> 
> 标签：sql-server, visual-foxpro

亲爱的 StackOverflow 读者，我希望您能关注我的问题之一：

1.  我有一个 Visual Foxpro 应用程序，我在其中访问远程 SQL Server 的存储过程。当我在客户端机器上安装 SQL Express 2008 和 FoxPro 应用程序时，一切正常。

2.  但是，当我没有在客户端计算机上安装 SQL Server 以及可视 FroxPro 应用程序时，我收到错误“SQL Connect Error”，无法建立连接。

3.  他们是否有任何方式我不必在客户端机器上安装整个 SQL Express，我只能安装所需的库。

问候 ProgChd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:40:21.863

您不必安装 SQL Express 本身，但至少要确保您拥有 SQL Express 的 ODBC / OleDB 提供程序。这些可以使用 SQL-Server 连接，这在机器上已经很常见了。

至于您的连接字符串，您是否通过完全限定的 \server\database 托管信息进行连接？

只是为了笑，你可以通过机器的

```
Control Panel
   Administrative Tools
      Data Sources ODBC 
```

并尝试通过 VFP 应用程序手动创建与您尝试执行的 SQLExpress 服务器的 ODBC 连接。如果您无法通过它进行连接，那么 VFP 也不会。将 VFP 应用程序排除在外，只需测试连接即可。

# php - 上传多个文件时如何避免出错？

> ID：10227616
> 
> 赞同：0
> 
> 时间：2012-04-19T12:02:06.120
> 
> 标签：php, jquery

我有一个文件输入，它是一个数组，但我以前不再工作，它似乎对多个文件抛出错误，它只是上传最新的文件。我无法弄清楚我做错了什么。

```
<input type="file" name="userfile[]" id="userfile" class="multi" /> 
```

然后在我的控制器中：

```
$upload_files = $_FILES;
var_dump($upload_files['userfile']['name']);
// get the selected files out of the array
for($i = 0; $i < count($upload_files['userfile']['name']); $i++) {
   $_FILES['userfile'] = array(
      'name' => $upload_files['userfile']['name'][$i],
      'type' => $upload_files['userfile']['type'][$i],
      'tmp_name' => $upload_files['userfile']['tmp_name'][$i],
      'error' => $upload_files['userfile']['error'][$i],
      'size' => $upload_files['userfile']['size'][$i]
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:08:30.513

您正在覆盖`$_FILES['userfile']`数组的每次迭代（这就是为什么只上传最后一个文件的原因）。

每次循环时创建一个新的数组元素。

此外，将您的循环更改为迭代，`$upload_files['userfile']`而不是`$upload_files['userfile']['name']`按照上述评论中的建议进行迭代:)

* * *

只是一个指针 - 最好分配给循环`count($upload_files['userfile'])`之外的变量。`for`如果您的数组只有几个元素，它可能不会有太大的不同，但在处理大型数组时具有巨大的性能优势。

查看[http://www.phpbench.com/](http://www.phpbench.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:20:10.527

您在每次迭代时都覆盖了数组，请尝试以下操作：

> ```
> foreach($upload_files['userfile'] as $i => $file) {
>    $_FILES['userfile_org'][$i] = array(
>       'name' => $file['name'],
>       'type' => $file['type'],
>       'tmp_name' => $file['tmp_name'],
>       'error' => $file['error'],
>       'size' => $file['size']
>    ); 
>   } 
>   echo "<pre>"; var_dump($_FILES['userfile_org']); die; 
> ```

# ruby-on-rails - simple_form gem 并指定分钟输入的可能值

> ID：10227617
> 
> 赞同：1
> 
> 时间：2012-04-19T12:02:18.147
> 
> 标签：ruby-on-rails, datetime, simple-form

我使用 simple_form gem 在我的 view.html.haml 我有代码

```
f.input :integration_deadline, :start_year=> Date.today.year, :end_year =>Date.today.year + 2, :order =>[:month, :day, :year, :hour, :minute], :ampm => true 
```

有没有办法为 :minute 指定可能的值，例如 00,10,20,30,40,50,60 或 00,30

目前它生成带有选项的选择

```
<option value="00">00</option>
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
...
<option value="60">60</option> 
```

相反，我想得到

```
<option value="00">00</option>
<option value="30">30</option> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:49:50.637

像这里添加`:minute_step`选项：

```
f.datetime_select :integration_deadline, ....., minute_step: 30 
```

# java - 有人成功使用emacs调试java内部类吗？

> ID：10227618
> 
> 赞同：2
> 
> 时间：2012-04-19T12:02:25.587
> 
> 标签：java, vim, emacs

我目前使用 vim。但是我发现甚至没有一个插件来调试java内部类。我认为emacs插件更强大。那么有没有人用emacs成功调试过java内部类呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:34:23.920

我会使用我发现效率更高的 IntelliJ。它可以具有智能代码完成、许多重构工具，并且可以建议许多方法来改进您的代码并为您进行更改。

[http://www.jetbrains.com/idea/whatsnew/index.html?fromIndex](http://www.jetbrains.com/idea/whatsnew/index.html?fromIndex)

恕我直言，几乎任何为 Java 设计的 IDE 都会比通用编辑器更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:14:07.670

试试 Eclipse，它是最强大的 IDE 之一。使用 Eclipse 进行调试非常简单，而使用 Emacs 进行调试可能会很麻烦

# python - Twisted Names - 权威服务器 - 多个区域

> ID：10227619
> 
> 赞同：2
> 
> 时间：2012-04-19T12:02:26.930
> 
> 标签：python, dns, twisted

我将尝试创建一个名称扭曲的权威服务器。根据文档，我可以像这样定义一个区域文件：

```
twistd -n dns --pyzone example-domain.com 
```

但是...如何指定多个区域文件？

```
twistd -n dns --pyzone example-domain.com example-domain.net 
```

或者

```
twistd -n dns --pyzone example-domain.com --pyzone example-domain.net 
```

不会工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:42:44.313

为什么说这行不通？

```
twistd -n dns --pyzone example-domain.com --pyzone example-domain.net 
```

我就这样运行一个服务器，为大约十几个不同的区域提供服务。

# javascript - 强制鼠标点击

> ID：10227623
> 
> 赞同：-3
> 
> 时间：2012-04-19T12:02:38.007
> 
> 标签：javascript, jquery, event-handling

好的，我知道这是一个菜鸟问题，但有没有办法强制点击鼠标？更具体地说，假设我想在随机时间触发鼠标单击，但我不知道那段时间鼠标会停留在哪个元素中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:11:07.973

您可以在文档对象上安装根级别的事件处理程序来跟踪鼠标位置，这样您就可以知道鼠标在任何给定时间的位置。您可以使用本文中描述的代码在浏览器中创建事件：[Is it possible to trigger a link's (or any element's) click event through JavaScript?](https://stackoverflow.com/questions/143747/is-it-possible-to-trigger-a-links-or-any-elements-click-event-through-javasc#143771) 从这篇文章中获取信息：http: [//jehiah.cz/a/firing-javascript-events-properly](http://jehiah.cz/a/firing-javascript-events-properly)

通常，创建原始事件并不是解决问题的最有效方式（除非您正在执行某种自动化测试）。通常最好直接调用您想要的函数或直接修改 DOM 对象，而不是尝试通过事件引起更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:06:04.387

不，这不可能完全按照您描述的方式。

您可以收听`mouseenter`所有内容，并始终更新对最后悬停的任何内容的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:06:15.913

您可以使用 mouseover/mouseout 跟踪元素并随时触发其点击处理程序

# asp.net - 构建查询构建器所需的指导

> ID：10227624
> 
> 赞同：0
> 
> 时间：2012-04-19T12:02:50.953
> 
> 标签：asp.net, .net, sql, expression-trees, query-builder

我的任务是构建一个查询构建器，它允许用户输入搜索词并在数据库表中搜索 1 个字段（文本）。应该允许用户在搜索表达式中使用“AND”、“NOT”和“AND NOT”。

我已经研究过使用表达式树来做到这一点，但希望有人有一个如何轻松实现这一点的例子。

我找到了以下链接：http: [//msdn.microsoft.com/en-us/library/bb882637.aspx](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

我遇到的问题是如何找到表达式的根以确保左侧和表达式相等，如果有奇数个运算符很容易找到中间，但如果有偶数，左边应该更大吗？还是对的？或者我应该看看运营商的类型？

任何帮助都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:19:32.490

看看[EasyQuery.NET](http://devtools.korzh.com/query-builder-aspnet/)库。似乎这正是你所需要的。

# facebook - Facebook时间线中的应用程序框？

> ID：10227630
> 
> 赞同：0
> 
> 时间：2012-04-19T12:03:33.437
> 
> 标签：facebook, facebook-timeline

我创建了一个 Facebook 应用程序，它偶尔会向时间线发布信息。在我开发它的过程中，我注意到在某个时间点出现了一个带有我的应用程序标题的框（类似于“朋友”或“活动”框的框）。它包含我的应用程序发布的最后一篇文章的概述。

今天，我注意到这个盒子现在已经从时间线上消失了。

有人知道这些盒子是如何创建的吗？这是 Facebook 自动执行的操作吗？是否可以手动（或以编程方式）将其放回原处？

任何有关这方面的信息都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:09:31.737

只要您使用[Add To Timeline](http://developers.facebook.com/docs/reference/plugins/add-to-timeline/)社交插件或请求`publish_actions`用户许可并发布 OpenGraph 操作，应用程序框就会出现在用户的时间轴中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:35:38.043

只要您定义了聚合，该框将取决于 Facebook 的算法。`Activity (Recent)`通常，我们在用户时间轴上的框中分组活动。但有时其中一个聚合框也会出现在时间轴中 - 不幸的是，没有办法强制它一直出现。

![聚合](../Images/ae36939d5c3ce96d4846e615917f6783.png)

# jakarta-ee - 如何使用 MongoDB 进行版本控制？

> ID：10227633
> 
> 赞同：1
> 
> 时间：2012-04-19T12:03:45.417
> 
> 标签：jakarta-ee, mongodb, spring-mvc, versioning

> **可能重复：**
> [在 MongoDB 中实现数据版本控制的方法](https://stackoverflow.com/questions/4185105/ways-to-implement-data-versioning-in-mongodb)

我正在使用 MongoDB 和 Spring MVC，我需要知道 MongoDB 是否提供了任何功能来对文档进行一些版本控制？

# python - 将 PyCURL 安装到特定版本的 Python

> ID：10227634
> 
> 赞同：1
> 
> 时间：2012-04-19T12:03:50.603
> 
> 标签：python, installation, yum, pycurl

我的 Centos 服务器上有 Python 2.4 和 2.7。我想在 Python 2.7 下使用 PyCURL。我运行了 yum install pycurl，它似乎可以安装，但是当我尝试导入 PyCURL 时，它适用于 Python 2.4，但不适用于 2.7。任何人都可以建议如何将 PyCURL（或任何其他 Python 扩展，因为我认为这是未来的一个问题）安装到特定版本的 python。谢谢 C

------ 灵魂（感谢 gjallar）----------

我没有使用 YUM，而是通过使用我想要的 python 版本运行 setup.py 文件来下载并安装 PyCurl，即

```
sudo python2.7 setup.py install 
```

这仍然不起作用，因为我收到错误消息说我的 libcurl 版本错误

[为了解决这个问题，我从http://curl.haxx.se/download.html](http://curl.haxx.se/download.html)下载了最新的 curl 版本，并按照此处的说明进行安装：http: [//curl.haxx.se/docs/install.html](http://curl.haxx.se/docs/install.html)

可悲的是，当我尝试在 python 中导入 pycurl 时，这仍然不起作用：

```
 File "<stdin>", line 1, in <module>
ImportError: libcurl.so.4: cannot open shared object file: No such file or directory 
```

这又通过执行以下命令解决：

```
export LD_LIBRARY_PATH=/usr/local/lib 
```

正如帖子中所建议的那样： [为什么 Python 找不到位于 sys.path 目录中的共享对象？](https://stackoverflow.com/questions/1099981/why-cant-python-find-shared-objects-that-are-in-directories-in-sys-path) （感谢维奈）

现在它起作用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:55:04.457

为特定 python 版本安装特定应用程序的一种可能途径是使用特定 python 版本进行安装`pip`并使用.`pip``pyCURL`

在您的情况下，这应该通过安装`pip`使用`python2.7`然后运行来工作`pip install pycurl`：

[`distribute`](http://pypi.python.org/pypi/distribute)通过使用 python2.7 解释器运行 setup.py 文件来安装 pip 。

这要求 pycurl 在[PyPi](http://pypi.python.org)中可用- 否则（如果 pycurl 下载包含 setup.py）使用您要为其安装的解释器简单地运行 setup.py 文件。

# java - 基于整数值对java中的两个List（String，Integer）进行排序

> ID：10227635
> 
> 赞同：0
> 
> 时间：2012-04-19T12:03:51.737
> 
> 标签：java, list

我正在开发一个程序，我正在读取文件并提取关键字及其计数。稍后我需要选择频率最高的单词并将它们与关键字匹配。

我已将在文件中找到的所有关键字存储在字符串列表中。我希望根据频率对这些进行排序。因此，如果在索引 17 处我有一个单词“stack”，并且其他整数列表中索引 17 处的值最大，我希望将它们带到位置 1。

我可以使用 collections.sort 对这些进行排序，但它不会处理其他列表。

这是我的代码：

```
while(m.find()) 
    {
        if(keyword.contains(m.group()))
            {
            keywordcount.set(keyword.indexOf(m.group()),keywordcount.get(keyword.indexOf(m.group()))+1);
            //System.out.println("*"+m.group()+":"+keywordcount.get(keyword.indexOf(m.group())));
            }
        else
            {
            keyword.add(m.group());
            int var=keyword.indexOf(m.group());
            //System.out.println(m.group()+":"+var);
            keywordcount.add(var, 1);
            }
        //System.out.println(keyword.size()+"#"+keywordcount.size());                       
    }
    for(int i=0;i<keyword.size();i++)
    {
        System.out.print(keyword.get(i)+ ":" +keywordcount.get(i)+" ");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:05:48.350

通常，人们会将 the`String`和 the`Integer`放在一个类中，然后对该类的实例列表进行排序。

例如

```
class StringCount implements Comparable<StringCount> {
    private final String string;
    private final int count;

    public StringCount(String string, int count) {
        this.string = string;
        this.count = count;
    }

    @Override
    public int compareTo(StringCount right) {
        return this.count < right.count ? -1
             : this.count > right.count ? 1
             : 0;
    }

    // implement equals and hashCode too
    // if a.compareTo(b) == 0, then a.equals(b) should return true.

} 
```

然后，您可以创建一个`List<StringCount>`并调用`Collections.sort(stringCountList)`.

请注意，这会将具有**最低**`StringCount`值的实例放在首位，因此它们按升序排列。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:14:04.523

```
final List<String> words = new ArrayList<>();
final Map<String, Integer> frequencies = new HashMap<>();

while (m.find())  {
    String word = ...extract the word from m...;

    if (!words.contains(word)) words.add(word);

    if (!frequencies.contains(word)) frequencies.put(word, 1);
    else frequencies.put(word, frequencies.get(word) + 1);
}

Collections.sort(words, new Comparator<String>() {
    @Override public int compare(String s1, String s2) {
        int f1 = frequencies.get(s1);
        int f2 = frequencies.get(s2);
        if (f1 < f2) return 1;
        if (f1 > f2) return -1;
        return 0;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:44:11.640

这可能是检查[multisets](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multiset.html "多组")的理想时机。

> 支持顺序无关相等的集合，如 Set，但可能有重复元素。多重集有时也称为包。
> 
> 多重集合中彼此相等的元素称为相同单个元素的出现。一个元素在多重集中出现的总数称为该元素的计数（术语“频率”和“多重性”是等价的，但在此 API 中不使用）。由于元素的计数表示为 int，因此多重集可能永远不会包含超过 Integer.MAX_VALUE 出现的任何一个元素。**

# r - 有效地修改 R 中的列表

> ID：10227644
> 
> 赞同：4
> 
> 时间：2012-04-19T12:04:14.737
> 
> 标签：r, for-loop

我有`foreach`一个循环，它在每个循环中生成一个列表，以及一个`.combine`将它们组合起来的函数，如下所示：

```
mergelists = function(x,xn) {
  padlen = length(x[[1]])
  for (n in names(x)[!names(x) %in% names(xn)])  xn[[n]] = 0
  for (n in names(xn)[!names(xn) %in% names(x)]) xn[[n]] = c(rep(0,padlen), xn[[n]])
  for (idx in names(xn)) { x[[idx]] = c( x[[idx]], xn[[idx]] ) }
  x
} 
```

前两个 for 循环修改新列表 ( `xn`) 以使其与收集结果的列表 ( ) 兼容`x`。最后一个加入`x`并`xn`进入`x`。

我相信我的代码效率低得离谱，因为它重新分配了很多并使用了 for 循环。但我想不出更好的解决方案。有任何想法吗？

更多解释：我事先不知道列表名称（它们是在 foreach 部分进行的引导练习中的模式）。

**例子：**

```
> x
$foo
[1] 3 2

$bar
[1] 3 2 
```

和

```
> xn
$foo
[1] 1

$baz
[1] 1 
```

应该加入

```
> x
$foo
[1] 3 2 1

$bar
[1] 3 2 0

$baz
[1] 0 0 1 
```

就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:15:46.223

如果 foo 和 bar 存在于每个列表中并且按顺序排列，则 mapply 有效。正如@BenBarnes 所建议的那样，有一个预处理步骤来创建 0 使得这是一个可行的选择，即使它们并不存在于任何地方。排序很容易。我已将 0 更改为 NA，因为这似乎更合适。

```
# Make data
x <- list(foo=c(3,2),bar=c(6,7))
xn <- list(foo=c(1),bar=c(1),aught=c(5,2))
lol <- list(x=x,xn=xn)

# Pre-process
allnames <- sort(unique(unlist(lapply(lol, names))))
cleanlist <- function(l,allnames) {
  ret <- l[allnames]
  names(ret) <- allnames
  ret[sapply(ret,is.null)] <- NA
  ret
}
lol <- lapply(lol,cleanlist,allnames=allnames)

# Combine
do.call("mapply", c(c,lol) ) 
```

产生：

```
 aught bar foo
x      NA   6   3
xn1     5   7   2
xn2     2   1   1 
```

**基准测试**

也就是说，如果您希望提高速度，原始版本仍然是最快的，大概是因为它做的最少。但是无环方法非常优雅，可以扩展到任意数量的 x。

```
library(microbenchmark)
microbenchmark( mergelists(lol$x,lol$xn), mergeList2(lol$x,lol$xn), do.call("mapply", c(c,lol) ) )

Unit: microseconds
                          expr       min         lq     median         uq       max
1 do.call("mapply", c(c, lol))   155.048   159.5175   192.0635   195.5555   245.841
2    mergeList2(lol$x, lol$xn) 19938.288 20095.9905 20225.4750 20719.6730 27143.674
3    mergelists(lol$x, lol$xn)    63.416    68.1650    78.0825    84.3680    95.265 
```

![在此处输入图像描述](../Images/4c0a62a0c92766fc3856bcae58e424bb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T15:44:57.703

在我的基准测试中，这种方法比您的方法花费的时间更长，但由于我已经解决了，我想我还是会发布它。这里要加倍努力。如果名称完全未知并且您被迫在函数中填充零`.combine`，您可以尝试以下操作。（也许先在您的迭代子集上尝试一下，看看它是否有效）：

```
library(reshape2)

mergeList2 <- function(x, xn) {
  xDF <- data.frame(ID = seq_along(x[[1]]), x)
  xnDF <- data.frame(ID = seq_along(xn[[1]]) + nrow(xDF), xn)
  meltedX <- melt(xDF, id = "ID")
  meltedXN <- melt(xnDF, id = "ID")
  res <- as.list(dcast(rbind(meltedX, meltedXN), ID ~ variable, 
    fill = 0))[-1]
  return(res)
} 
```

你的例子：

```
mergeList2(list(foo = c(3, 2), bar = c(3, 2)),
  list(foo = 1, baz= 1))

# $foo
# [1] 3 2 1

# $bar
# [1] 3 2 0

# $baz
# [1] 0 0 1 
```

`foreach`用一个例子测试一下

```
set.seed(1)

foreach(dd = 1:10, .combine = mergeList2) %do% {
  theNames <- sample(c("foo", "bar", "baz"), 2)
  ans <- as.list(rpois(2, 4))
  names(ans) <- theNames
  ans
}

# $foo
#  [1] 4 7 2 4 0 2 0 4 5 3

# $baz
#  [1] 7 0 0 5 3 5 3 4 0 5

# $bar
#  [1] 0 5 2 0 5 0 0 0 6 0 
```

# iphone - Titanium.Contacts.showContacts ，按字母顺序排列名字

> ID：10227651
> 
> 赞同：1
> 
> 时间：2012-04-19T12:04:51.577
> 
> 标签：iphone, titanium-mobile

我正在使用 Titanium 开发移动应用程序。我遇到了一个问题，我想在其中显示联系人列表。我使用以下代码显示联系人列表

```
Titanium.Contacts.showContacts({ }); 
```

我正在获取联系人列表，但它以 last name 的排序顺序显示。我希望列表以名字的排序顺序显示。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:07:09.620

有一个属性 Ti.Contacts.CONTACTS_SORT_FIRST_NAME 希望这会有所帮助。还有 CONTACTS_KIND_ORGANIZATION 和 CONTACTS_KIND_PERSON。

```
var g = Ti.Contacts.getAllGroups( );//Getting all the groups on the contacts table

var m = g[0].members();//select a group and check if it has members
Ti.API.info(m)// my group was empty so i have to add people

var p = Ti.Contacts.getAllPeople( )// get all the contacts
for (var i in p){//group and add people to your group
    g[0].add(p[i]);
    Ti.API.info(p[i].firstName);
    Titanium.Contacts.save()// you have to save new changes in IOS
}
g[0].sortedMembers(Ti.Contacts.CONTACTS_SORT_FIRST_NAME);// FINALLY WE CAN SORT

m = g[0].members();//   get the members 

for (var i in m){// verify they are in order
    Ti.API.info(m[i].firstName);
} 
```

# json - Json：生成对象ID而不是真实对象

> ID：10227653
> 
> 赞同：1
> 
> 时间：2012-04-19T12:04:53.370
> 
> 标签：json, jackson

在我的服务器上，我有复杂的对象，但在我的网络客户端中，我想获得这些对象的简单表示。我想用他们的 id 替换对象，例如：

```
@JsonAutoDetect
public class Event{
    private Long id;
private String name;
    private User user;

    @JsonProperty("event_id")
public Long getId() {
     return event_id;
    }
    public String getName() {
     return name;
    }
    public String getUser() {
     return user;
    }
    ....setters
} 
```

生成 Json 时，我会在里面得到 Event 类和用户类 无论如何用用户 ID 替换用户？由于我有许多复杂的对象，我正在寻找一种优雅的方式，比如可能只返回对象 ID 的 User 对象上的注释。

当然，我需要相反的方式。获取 id 并将其转换为对象。

顺便说一句：我正在使用杰克逊

有任何想法吗？

10x 诺姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:00:57.907

您可以公开 Id 的属性并忽略子实体属性，如下所示：

```
class Event {
    private User user;

    public Long getUserId() {
        return user.getId();
    }

    public void setUserId(Long userId) {
        this.user = retrieveUserById(userId); // or any other code         
    }

    @JsonIgnore
    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:02:18.867

这是我的想法如何实现它。您可以在您的财产上使用`@JsonRawValue(true)`注释。`user`这将使杰克逊将`user`对象视为已经序列化的东西。然后只需覆盖类的`.toString()`方法，`User`使其返回它的 id 作为字符串。

所以在你的`Event`课上：

```
public class Event {
    ...
    @JsonRawValue(true)
    private User user;
    ...
} 
```

在你的`User`课堂上：

```
public class User {
    ...
    private Integer id;
    ...
    @Override
    public String toString() {
        return id.toString();
    }
    ...
} 
```

这将导致例如`"user": 5`在您的 json 中（不会在`User`对象序列化值周围添加双引号）。

# resources - ASP.NET MVC - 移动资源后丢失资源

> ID：10227654
> 
> 赞同：0
> 
> 时间：2012-04-19T12:04:54.373
> 
> 标签：resources

将资源文件从 App_GlobalResources 移动到我的自定义资源文件夹后，出现“找不到任何适合指定文化或中性文化的资源...”错误消息。我在运行时收到此消息 - 编译运行良好。我是通过 Visual Studio 的解决方案资源管理器完成的（只需拖放它们），所以我认为 VS 会关心我的资源的真实路径。在 App_GlobalResources 文件夹中创建资源时，我使用了自己的“自定义工具命名空间”和“自定义工具”PublicResXFileCodeGenerator。

那么，如何在不重新添加资源的情况下将我的所有资源都显示出来呢？

# objective-c - Objective-C：id，访问实例属性，合成？

> ID：10227661
> 
> 赞同：5
> 
> 时间：2012-04-19T12:05:24.837
> 
> 标签：objective-c, synthesize

我对 Objective-C 很陌生，我想知道是否有一种简单的方法可以将 id 设置为对象实例（具有合成属性），并直接获取/设置这些属性，例如：

```
id myID = myInstance;

myID.myProperty = something; 
```

其中 myInstance 是一个具有名为 myProperty 的综合属性的对象。当我这样做时：

```
myInstance.myProperty = something; 
```

它可以工作，但是当我将其切换为 id 时，我得到了错误

> 在“_strong id”类型的对象上找不到属性“myProperty”

使用 id 时是否必须手动创建 getter/setter 方法而不是使用 synthesize？因为我似乎确实能够让 id 执行实例方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T12:12:54.003

如果对象**必须**是 type `id`，您可以使用消息（而不是点表示法）来访问 getter/setter：

```
id myID = ...;
NSString *prop = [myID property];
[myID setProperty:@"new value"]; 
```

但是你有更好的选择：

## 声明一个新变量

如果您知道对象的类，只需使用该类型创建一个变量。

```
id myID; // defined elsewhere
MyClass *obj = (MyClass *)myID; // if you know the class, make a variable with that type
obj.property = @"new value"; 
```

## 铸件

使用内联转换来告诉编译器类型是什么，而无需创建新变量。

```
id myID; // defined elsewhere
((MyClass *)myID).property = @"new value"; 
```

## 协议

如果你不知道对象的确切类但你知道它必须实现某些方法，你可以创建一个协议：

```
id<MyProtocol> myID; // the compiler knows the object implements MyProtocol
myID.property = @"new value"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:14:22.627

Properties need more information respect to simple messages. So the answer is.. you can't call a property on an id object. But you can use messages, casting (if you are not sure, use reflection to find out the object type), protocols...

# jquery - jQuery：IE dioes 中的加载图像有时不会淡出

> ID：10227662
> 
> 赞同：0
> 
> 时间：2012-04-19T12:05:29.503
> 
> 标签：jquery, internet-explorer

首先，简单介绍一下代码：

每次加载某些内容时，都会显示一个 loading.icon。内容准备好后，图标会淡出，内容会淡入。很简单，但是IE出现了一些问题。通常，不是每次，只有加载图像和内容都会淡入，而加载图标不会淡出。

有什么想法可以解决吗？

这是代码：

HTML部分：

```
<div class="loaded">
  // some content here
</div>

<div class="loader">
    // Just the loader, addet via the Html-helper of CakePHP
    <?php echo $this->Html->image('ajax-loader.gif'); ?>
</div> 
```

jQuery-部分：

```
$('.loaded').ready(function() {
  $('.loader').fadeOut(fadeSpeed, function() {
    $('.loaded').fadeIn(fadeSpeed);
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:12:46.410

您应该为文档对象调用 .ready 事件：

```
$('document').ready(function() {
  $('.loader').fadeOut([duration] [, easing] [, callback]);
}); 
```

# linux - MongoDB GUI 客户端（跨平台或 Linux）

> ID：10227664
> 
> 赞同：79
> 
> 时间：2012-04-19T12:05:30.377
> 
> 标签：linux, mongodb, user-interface, cross-platform

官方网站上的[MongoDB GUI 客户端应用程序列表](http://www.mongodb.org/display/DOCS/Admin+UIs)已经过时：一些客户端不受支持，一些客户端严重绑定到 .NET，无法在 Linux 上运行。而且它们都缺乏编辑存储文档的能力（即提供只读访问权限）。

我需要一个 GUI 客户端：

1.  适用于 Linux（但不适用于 Web）；
2.  免费;
3.  支持文档编辑。

是否有满足这些要求的应用程序？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-03-27T13:54:20.880

[Robomongo](http://robomongo.org/) - 跨平台 MongoDB GUI 客户端。

更新：Mac OS X 和 Linux（作为 Debian/Ubuntu、RHEL/CentOS 软件包）版本发布。

更新：Robomongo 正式更名并发布了两款不同的产品 Studio 3T 和 Robo 3T。旧的 robomongo 现在称为 Robo 3T。Studio 适合专业人士。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-28T21:18:09.307

试试[umongo](http://edgytech.com/umongo/)，有适用于**Windows、Mac OS X 和 Linux**的版本。

![在此处输入图像描述](../Images/4a931ab78e3ab86c759854d5cbbbbbf4.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-19T13:18:11.363

试试 MonjaDB [http://www.jumperz.net/index.php?i=2&a=0&b=9](http://www.jumperz.net/index.php?i=2&a=0&b=9)

我为自己开发了这个工具。我在 Linux ( Eclipse ) 上使用这个工具。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T12:09:30.897

试试用 php 编写的[Rock Mongo 。](http://rockmongo.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T05:41:45.140

[http://code.google.com/p/greenmangoquery/](http://code.google.com/p/greenmangoquery/) 它使用 java 的轻量级 mongodb 客户端。所以它适用于所有平台，包括linux和windows。

# coldfusion - ColdFusion 变量未正确设置

> ID：10227668
> 
> 赞同：0
> 
> 时间：2012-04-19T12:05:38.113
> 
> 标签：coldfusion

我有一个带有一些 html 元素的表单。它有一个默认选中的复选框。单击提交按钮时，它会根据复选框条件调用 submitForm 函数，它必须执行操作。如果复选框为 Y，则必须执行一个表单操作，如果未选中则执行另一个操作。使用 javascript 我检查了它是否已检查。但我无法为此设置冷融合变量。它总是覆盖变量。下面是代码片段

这是使用的 ColdFusion 变量。这是默认设置为 Y

```
 <cfset form_condn_var = 'Y'/>

 function submitForm(){
  if (document.getElementById('Show_Final_Model').checked) 
  {
form.Show_Final_Model.value = 'Y';
  }
 else{
<cfset form_condn_var = 'N'/>
 }
}

 <cfif '<cfoutput>#form_condn_var#</cfoutput>' eq 'Y'>
<form id="form1" action="test.cfm" method="POST" target="testmain">
 <cfelse>
<form id="form1" action="<cfoutput>#something#</cfoutput>" method="POST" target="_blank" onSubmit="">
</cfif> 
```

它总是将变量 form_condn_var 设置为 N，并且无论条件如何，它都会进入表单的 else 条件。. 但是当我提醒它的值时它是正确的。我也不能使用隐藏变量，因为最初没有调用表单。根据检查的条件，只有它被访问。有人可以告诉我为什么 form_condn_var 会被覆盖，而不管检查的条件如何。或者有没有其他方法可以实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:39:53.183

我不确定我是否正确理解了这个问题，但似乎这种情况可以纯粹在基于表单复选框值结果的条件处理的操作页面上处理。无需根据复选框的值将表单发送到两个不同的操作模板，只需根据复选框表单值的条件处理在操作模板上相应地处理表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:33:18.850

**简短版** 如果我正确理解了您的逻辑，那么您可以将粘贴的所有内容替换为以下内容`<cfif>`

```
<cfif IsDefined('form.Show_Final_Model') AND form.Show_Final_Model EQ 'Y'>
    <form id="form1" action="test.cfm" method="POST" target="testmain">
<cfelse>
    <form id="form1" action="<cfoutput>#something#</cfoutput>" method="POST" target="_blank" onSubmit="">
</cfif> 
```

**解释**

您在这里的主要问题是您在标签之外有 Javascript，其中包含冷融合，并且似乎混淆了每种语言的功能。

首先，Coldfusion 呈现 HTML。对于 Coldfusion 而言，javascript`if`语句只是文本，因此它看到以下逻辑

```
<cfset form_condn_var = 'Y'>
<cfset form_condn_var = 'N'>
<cfif form_condn_var EQ 'Y'>  <!--- form_condn_var === '<cfoutput>#form_condn_var#</cfoutput>' but much cleaner --->
    .......
<cfelse>
    .......
</cfif> 
```

反过来导致以下 HTML 被呈现

```
function submitForm(){
    if (document.getElementById('Show_Final_Model').checked) 
    {
        form.Show_Final_Model.value = 'Y';
    }
    else{

    }
}

<form id="form1" action="<cfoutput>#something#</cfoutput>" method="POST" target="_blank" onSubmit=""> 
```

我怀疑在您的示例中您删除了一些逻辑，否则 Javascript 将作为纯文本输出，因为它不在`<script>`标签内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:01:48.027

如果您要提交复选框，*然后*为下一个表单设置表单操作（表单 2 - 在您选择复选框之后），我认为您想要做的是以下内容：

```
<cfparam name="form.Show_Final_Model" default="N"/>

<cfif form.Show_Final_Model IS 'Y'>
<form id="form1" action="test.cfm" method="POST" target="testmain">
 <cfelse>
<form id="form1" action="<cfoutput>#something#</cfoutput>" 
    method="POST" target="_blank" onSubmit="">
</cfif> 
```

这将在处理程序页面上（提交表单后）。你不需要 JS 函数。

但是，如果您尝试根据复选框的选中或取消选中将表单的操作参数更改为其他内容（换句话说 - 使用相同的表单），那么您的所有代码都需要是 javascript 并且 CF 几乎没有什么可做的用它。设置 2 个变量 - 动作 a 和动作 b，检查选中的表单元素的值并将 form.action 值更改为您想要的任何一个。

但最重要的是要牢记什么是“服务器端”和什么是“客户端”......这就是你犯错的地方。祝你好运 ：）

# jquery - jQuery，没有让自定义验证消息起作用

> ID：10227669
> 
> 赞同：2
> 
> 时间：2012-04-19T12:05:38.817
> 
> 标签：jquery, arrays, validation, jquery-validate, messages

我在表单中有以下字段：

```
<input id="edit-submitted-tel" name="submitted[tel]" value="telefoonnummer (optioneel)" size="4" maxlength="15" class="form-text" type="text"> 
```

我正在使用 jQuery Validate 来检查表单，一切正常，但我似乎无法让我的错误消息自定义每个字段。由于字段名称，下面给出了一个错误，我不知道它应该是什么：

```
$("#form").validate({           
    messages: {
        submitted[tel] : "tel error custom msg"
    }
}); 
```

当它是一个数组时，这应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T06:44:54.370

使用两个引号

```
$("#form").validate({           
    messages: {
        "submitted[tel]" : "tel error custom msg"
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T15:24:02.360

我相信这只是正确[引用](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)您的名字的问题。

从文档中：

> 如果您的表单包含使用不是合法 JavaScript 标识符的名称的字段，则 > 在使用 rules 选项时必须引用这些名称：

```
$("#myform").validate({
  rules: {
    // no quoting necessary
    name: "required",
    // quoting necessary!
    "user[email]": "email",
    // dots need quoting, too!
    "user.address.street": "required"
  }
}); 
```

所以在你的情况下，这应该只是一个问题：

```
$("#form").validate({           
    messages: {
        "submitted[tel]" : "tel error custom msg"
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:46:34.683

分辨率

```
var $params = {debug:false, messages:{}};

var $c_nome = $("#c_nome").attr("name");
$params['messages'][$c_nome] = "O campo de nome é obrigatório";

var $c_email = $("#c_email").attr("name");
$params['messages'][$c_email] = "Por favor insira um e-mail válido";

var $c_assunto = $("#c_assunto").attr("name");
$params['messages'][$c_assunto] = "O campo de assunto é obrigatório";

var $c_msg = $("#c_msg").attr("name");
$params['messages'][$c_msg] = "O campo de mensagem é obrigatório";

$("#form-contato").validate($params); 
```

# facebook - 将整个 Facebook 应用程序放入时间线？

> ID：10227670
> 
> 赞同：1
> 
> 时间：2012-04-19T12:05:42.797
> 
> 标签：facebook, facebook-timeline

对于一个项目，我被要求将一个完整的 Facebook 应用程序放入时间线中。但是，我在 Facebook 参考资料中找不到任何有关此的信息。有人知道是否可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:54:46.510

我相信您的客户想要使用新的[Add To TimeLine](https://www.facebook.com/about/timeline/apps)功能。[这](https://www.facebook.com/help?faq=105925952849619)从用户的角度提供了另一个介绍。

例如，这张图片在时间线上显示了新功能的 Spotify、NetFlix 和 Nike 应用程序实现：

![时间线上的应用](../Images/5279d3cc0346b6ccdd64754a09231b74.png)

[尽管 API文档](https://developers.facebook.com/docs/reference/plugins/add-to-timeline/)有限，但您可以使用 JavaScript SDK 实现基本的“添加到时间线”功能。

您还可以通过将您的应用程序与 Open Graph 集成，为时间轴创建自定义应用程序内容和聚合内容（“本月在 Netflix 上观看的电影”）。Facebook 有[这个](https://developers.facebook.com/docs/opengraph/tutorial/)介绍性教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:13:10.527

可能您正在谈论带有时间轴的页面的页面选项卡应用程序。

阅读[页面选项卡应用程序的教程和](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)[添加到页面对话框](http://developers.facebook.com/docs/reference/dialogs/add_to_page/)的文档。

对于时间轴中的个人资料应用程序，只有专门用于应用程序向用户发布的操作和活动的部分。

# c# - 在 SQL WHERE 子句中使用 C# 日期时间

> ID：10227672
> 
> 赞同：1
> 
> 时间：2012-04-19T12:05:46.913
> 
> 标签：c#, .net, sql

如何将 C# Datetime 转换为等效的 SQL DATE 类型，以便我可以在 WHERE 类中进行简单的相等，而无需参数化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:07:16.397

只需将其转换为 iso 字符串。

**日期和时间**

```
YourDateTime.ToString("yyyy-MM-ddTHH\:mm\:ss.fffffffzzz"); 
```

**仅日期**

```
YourDateTime.ToString("yyyy-MM-dd"); 
```

但我真的鼓励您使用参数化查询**，因为每次您的 T-SQL 查询不同时，您都会生成一个新的 Sql 执行计划**。

如果您使用参数，您将只获得一个计划。这会带来更好的性能。

### 更多信息

*   [参数化查询和性能](http://codebetter.com/davidhayden/2006/01/05/parameterized-queries-and-performance/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:07:51.327

```
yourDateTime.toString("yyyy-MM-dd HH:mm:ss"); 
```

但是使用参数会更好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:19:37.623

我认为其他答案并没有真正理解您的问题（或者我没有）

根据我收集的信息，您在问如何从 C# 转换`DateTime`为 SQLs`Date`类型（不是 sql datetime！）。所有其他答案都包含时间。

如果这是真的，你根本不必担心。SQL`Date`与 .NET 完全兼容，`DateTime`因此只需将其传递给过程即可去除时间部分并正确传递日期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T12:08:29.327

如果你在谈论`SqlDateTime`结构，你可以使用它的构造函数，它接受一个`DateTime` 类型的值：

请参阅 MSDN：[SqlDateTime 构造函数 (DateTime)](http://msdn.microsoft.com/en-us/library/cxsk2s5e%28v=vs.80%29.aspx)

# c# - 如何指定创建数据库的用户？

> ID：10227678
> 
> 赞同：0
> 
> 时间：2012-04-19T12:06:09.783
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4.1, code-first

我有托管。托管给了我数据库的登录名和密码。我使用这些数据可以进入数据库并删除\创建表。

我正在尝试使用代码中的数据创建数据库。

```
public class DataContextInitializer:DropCreateDatabaseAlways<DataContext>
{
    protected override void Seed(DataContext context)
    {

    }
} 
```

在本地一切正常，但是当我在服务器上执行此操作时出现错误

```
CREATE DATABASE permission denied in database 'master'. 
```

我该如何解决？或者只是我的用户无权创建\删除数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:17:43.280

在共享主机上，您可能无权创建数据库（您可以只修改他们为您设置的数据库）。当 Code First 尝试重新创建 db = fail 时，我在 AppHarbor 上使用 Code First 遇到了这个问题。

# excel - 从列确定范围数值范围

> ID：10227685
> 
> 赞同：1
> 
> 时间：2012-04-19T12:06:38.493
> 
> 标签：excel, excel-formula, excel-2007, worksheet-function, sumifs

我`SUMIF`在 sheet2 中使用以下公式：

```
=SUMIF(sheet1'!B1:B200,D7,'sheet1'!F1:F200) 
```

A 列中有一个月，例如 Jan from `A1`to`A200`和 Feb from `A201`to `A300`。我想在 sheet2 的某个单元格中输入 Jan（Feb 或任何其他），然后获取其范围，在这种情况下为 1 到 200。最后，这个范围将被用在`SUMIF`公式中得到结果。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:14:36.250

`=SUMIFS('sheet1'!F1:F200,sheet1'!B1:B200,D7,'sheet1'!A1:A200,"Jan")`应该为 Jan 工作，或者用单元格引用替换该月的硬编码（E7？）

SUMIFS 使用与 SUMIF 不同的序列（参见[示例](http://spreadsheets.about.com/od/excelfunctions/qt/90107sumifs.htm)）。

# mysql - SQL-Server 和 MySQL 的互操作性？

> ID：10227686
> 
> 赞同：6
> 
> 时间：2012-04-19T12:06:41.783
> 
> 标签：mysql, sql, sql-server

我们将从 SQL-Server 2008 后端转到 MySQL 后端。SQL-Server 和 MySQL 之间的互操作性是什么？

我们是否能够跨服务器运行从数据库中引用表的 SQL 查询？

例如，这可能吗： *伪代码*

```
SELECT * 
FROM 
      [SQL2008Server].[databaseA].[DBO].[table1] as t1 
  INNER JOIN 
      [MySQLServer].[databaseB].[dbo].[table2] as t2 
          ON t1.id = t2.fkid 
```

如果没有，您可以推荐哪些选项来跨 SQL-Server 2008 和 MySQL 集成数据？

LINQ 是否会在合并来自 SQL-Server 和 MySQL 的数据方面提供任何帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T12:09:04.670

可以将 MySQL 服务器作为链接服务器添加到 SQL Server 中。

*   [HOWTO：将 SQL Server 链接服务器设置到 MySQL](http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql/)

设置完成后，您可以像这样使用 OPENQUERY 进行查询：

```
SELECT t1.colA, t2.colB
FROM SQLdbName.dbo.tablename AS t1
INNER JOIN OPENQUERY(MySQLlinkedservername, 
                     'SELECT colA, colB FROM tablename') AS t2
ON t1.colA = t2.colA 
```

# php - Doctrine 2.1 - 从集合中移除

> ID：10227690
> 
> 赞同：1
> 
> 时间：2012-04-19T12:06:58.503
> 
> 标签：php, doctrine-orm, doctrine

我正在尝试从父实体中删除评论，我记得在我的上一个网站上这样做了，但现在它不起作用..

我的实体 - 用户

```
namespace Application\Entities;

use Doctrine\ORM\Mapping AS ORM,
    Doctrine\Common\Collections\ArrayCollection;

/**
 * Loan
 *
 * @ORM\Table(name="users")
 * @ORM\Entity
 */
class Users{

    /**
     * @var integer $id
     *
     * @ORM\Column(type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $username
     *
     * @ORM\Column(type="string", length=45, nullable=false)
     */
    private $username;

    /**
     * @var ArrayCollection
     *
     * @ORM\OneToMany(targetEntity="Comments", mappedBy="author", cascade={"persist", "remove"})
     */
    private $comments;

    public function getComments(){

          return $this->comments;              

    } 
```

和我的评论表：

```
 namespace Application\Entities;

    use Doctrine\ORM\Mapping AS ORM,
        Doctrine\Common\Collections\ArrayCollection;

/**
 * Loan
 *
 * @ORM\Table(name="comments")
 * @ORM\Entity
 */
class Comments{

    /**
     * @var integer $id
     *
     * @ORM\Column(type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var integer $user_id
     *
     * @ORM\Column(type="integer", length=15, nullable=false)
     */
    private $user_id

    /**
     * @var Loan
     *
     * @ORM\ManyToOne(targetEntity="Users", inversedBy="comments",cascade={"persist"})
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     * })
     */
    private $author; 
```

这很好，它有效，我在用户存储库中获得了所有称为评论的集合..

现在，当我需要删除时，我通常会这样做：

```
$commentToDelete = $this->em->getRepository('Entities\Comments')->findOneById(375);
$userResults = $this->em->getRepository('Entities\Users')->findOneById(23);
$userResults->getComments()->removeElement($commentToDelete);
$this->em->flush(); 
```

什么都没有删除，也没有抛出异常告诉我它没有。

我学说也刷新了它，检查了数据库，它仍然存在..

**更新：**
在我 removeElement 之后，我循环了用户 id = 23 数据集，并且 id375 的评论数据不存在......所以它从集合中删除它而不是从数据库中删除，我认为`$em->flush()`应该这样做?

请指教
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T02:25:45.247

你需要使用

```
$em->remove($commentToDelete);
$em->flush(); 
```

因为映射保存在注释中，所以您需要在刷新之前删除此实体以删除引用，这会将状态保存到数据库。

# rest - 如何使用 REST api 在 JIRA 中创建子任务

> ID：10227691
> 
> 赞同：0
> 
> 时间：2012-04-19T12:07:00.753
> 
> 标签：rest, jira

如何使用 REST API 创建子任务。我找不到任何文件。

或者有什么方法可以创建一个问题并将其与一些父问题联系起来。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:13:37.737

就像我们创建简单的问题一样，我们需要在我们的 json 字符串中添加 "parent":{"id":"10101"}

# android - android：如何像原生设置应用一样进行设置导航

> ID：10227692
> 
> 赞同：8
> 
> 时间：2012-04-19T12:07:08.597
> 
> 标签：android, android-preferences

如何像 Android 原生设置应用一样为 SwitchReference 进行设置导航？

当你点击 WiFi 区域（不是在开关上）时，它将导航到一个新屏幕：

![点击无线网络](../Images/5e859ddaa88a3cab996e2e1f83aae351.png)

即使我没有点击开关，我的应用程序也只会将开关从 ON 更改为 OFF，反之亦然。

我正在使用`PreferenceFragment`和 xml 作为屏幕。我的偏好是遵循[Android PreferenceFragment 文档](http://developer.android.com/reference/android/preference/PreferenceFragment.html)中的示例。我在 ICS 4.0 API 14 上开发我的应用程序。

有人知道怎么做吗？

**编辑：**

我的 XML 如下所示：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory
        android:layout="@layout/preference_category"
        android:title="User Settings" >
        <SwitchPreference
            android:key="pref_autorun"
            android:layout="@layout/preference"
            android:summary="Autorun SMODE on boot"
            android:title="Autorun SMODE" />
        <SwitchPreference
            android:key="pref_wifi_control"
            android:layout="@layout/preference"
            android:selectable="false"
            android:summary="Controls your Wi-Fi radio automatically based on hotspot availability"
            android:title="Wi-Fi Radio Control" />
    </PreferenceCategory>
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T05:40:12.407

通过查看股票设置应用程序的来源，您可以找到他们是如何做到的。

基本上，他们使用自定义的 ArrayAdapter（很像您对 ListView 所做的）来显示带有 Switch 按钮的行。对于第二个屏幕，他们只需使用 ActionBar 中可用的 CustomView。

我写[了一篇带有示例代码的文章，](http://xgouchet.fr/android/index.php?article4/master-on-off-preferences-with-ice-cream-sandwich)展示了如何在项目中做到这一点。不过要小心，这只能在 API 级别 14 或更高版本中使用，因此如果您针对旧设备，请保留旧样式偏好屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T10:04:06.227

我在这里看到2个问题：1.如何在切换区域外收听偏好点击？2.如何在actionbar中放一个switch？

我会回答问题1：

我创建了一个新`SwitchPreference`类并覆盖了该`onClick`方法什么都不做。这可以防止在开关外部单击时更​​改设置。

```
public class SwitchPreference extends android.preference.SwitchPreference {
    @Override
    protected void onClick() {
    }
} 
```

用法（xml）：

```
<android.util.SwitchPreference
    android:key="whatever"
    android:title="Whatever" /> 
```

用法（java）：

```
SwitchPreference switchPreference = (SwitchPreference) findPreference("whatever");
switchPreference.setOnPreferenceClickListener(new OnPreferenceClickListener() {
    @Override
    public boolean onPreferenceClick(Preference preference) {
        DialogUtils.showToast(Preferences.this, "Clicked outside switch");
        return true;
    }
});
switchPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        DialogUtils.showToast(Preferences.this, "Clicked inside switch and setting changed");
        return true;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-11T18:25:08.080

我试了一下，有点挣扎。我想我会分享我的经验。

起初我尝试了[XGouchet](https://stackoverflow.com/a/11220049/1247248)的答案，因为它的投票最多。该解决方案相当复杂，需要使用非常酷但不适合我正在做的事情的[首选项标头。](http://www.vogella.com/code/ApiDemos/res/xml/preference_headers.html)我决定对我来说最简单的事情就是将我的preferenceFragment 包裹在一个常规片段中，并使用常规视图伪造开关首选项。我挖掘了 android 源以获得偏好并想出了这个

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context="com.lezyne.link.ui.homeScreen.settingsTab.SettingsFragment">

<FrameLayout
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal">

</FrameLayout>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:background="#e1e1e1" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?android:attr/selectableItemBackground"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:orientation="horizontal"
    android:paddingRight="?android:attr/scrollbarSize">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6dip"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_weight="1">

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@android:id/title"
            android:layout_below="@android:id/title"
            android:maxLines="4"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="?android:attr/textColorSecondary" />

    </RelativeLayout>

    <!-- Preference should place its actual preference widget here. -->
    <RelativeLayout
        android:id="@+id/widget_frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_vertical"
        android:orientation="vertical"
        android:paddingEnd="36dp">

        <Switch
            android:thumb="@drawable/switch_inner"
            android:id="@+id/switch1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentEnd="true" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:text="@string/Notifications"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </RelativeLayout>

</LinearLayout>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:background="#e1e1e1" />

 </LinearLayout> 
```

顶部的 FrameLayout 得到一个偏好片段，如下所示

```
 getChildFragmentManager()
            .beginTransaction()
            .replace(R.id.fragment_container, new SettingsPreferencesFragment(), "SettingsPreferencesFragment")
            .commit(); 
```

然后我可以像在任何常规视图中一样分配我的点击侦听器。SettingsPreferencesFragment 只是完全标准的偏好片段。

这个解决方案看起来不错，但后来我注意到平板电脑上出现了奇怪的布局问题。我意识到我很难让这个解决方案在所有设备上看起来都正确，我需要使用真正的 switchPreference 而不是假的。

**============== 解决方案2 ===============**

[AlikElzin-kilaka 的解决方案既](https://stackoverflow.com/a/24487599/1247248)好又简单，但在我尝试时不起作用。我第二次尝试确保我没有做错。我一直在玩，想出了一些似乎有效的东西。他有一个很好的观点

> 这里有2个问题： 1.如何在切换区域外听偏好点击？2.如何在actionbar中放一个switch？

真的只有问题（1）值得回答，因为问题2已经在[这里](https://stackoverflow.com/a/18172766/1247248)和[其他地方得到了回答](https://stackoverflow.com/a/11570995/1247248)

我意识到在首选项中访问视图的唯一方法是创建一个子类并覆盖[onBind](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2_r1/android/preference/Preference.java#Preference.onBindView%28android.view.View%29)。所以我想出了这个 SwitchPreference 的子类，它为作为整个视图的开关创建单独的点击处理程序。它仍然是一个黑客。

```
public class MySwitchPreference extends SwitchPreference {
public MySwitchPreference(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
}

public MySwitchPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
    getView(null,null);

}

public MySwitchPreference(Context context) {
    super(context);
}

public interface SwitchClickListener{
    public void onSwitchClicked(boolean checked);
    public void onPreferenceClicked();
}
private SwitchClickListener listener = null;
public void setSwitchClickListener(SwitchClickListener listener){
    this.listener = listener;
}

public Switch findSwitchWidget(View view){
    if (view instanceof  Switch){
        return (Switch)view;
    }
    if (view instanceof ViewGroup){
        ViewGroup viewGroup = (ViewGroup)view;
        for (int i = 0; i < viewGroup.getChildCount();i++){
            View child = viewGroup.getChildAt(i);
            if (child instanceof ViewGroup){
                Switch result = findSwitchWidget(child);
                if (result!=null) return result;
            }
            if (child instanceof Switch){
                return (Switch)child;
            }
        }
    }
    return null;
}

protected void onBindView (View view){
    super.onBindView(view);

    final Switch switchView = findSwitchWidget(view);
    if (switchView!=null){
        switchView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (listener!=null) listener.onSwitchClicked(switchView.isChecked());
            }
        });
        switchView.setFocusable(true);
        switchView.setEnabled(true);
    }

    view.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (listener!=null) listener.onPreferenceClicked();
        }
    });

}
} 
```

它使用递归函数 findSwitchWidget 遍历树，直到找到 Switch。我宁愿写这样的代码：

```
Switch switchView = view.findViewById(android.R.id.switchView); 
```

但似乎没有办法获得我所知道的内部 id 值。无论如何，一旦我们有了实际的开关，我们就可以为它和容器视图分配监听器。切换首选项不会自动更新，因此需要自己保存首选项。

```
MySwitchPreference switchPreference = (MySwitchPreference) findPreference("whatever");
    switchPreference.setSwitchClickListener(new MySwitchPreference.SwitchClickListener() {
        @Override
        public void onSwitchClicked(boolean checked) {
            //Save the preference value here 
        }

        @Override
        public void onPreferenceClicked() {
            //Launch the new preference screen or activity here
        }
    }); 
```

希望这第二次黑客不会回来咬我。

有人看到这种方法的任何潜在缺陷吗？

我还在 github [https://gist.github.com/marchold/45e22839eb94aa14dfb5上放了一个稍微改进的代码版本](https://gist.github.com/marchold/45e22839eb94aa14dfb5)

# excel - GETPIVOTDATA 公式返回给定月份内项目的总数

> ID：10227703
> 
> 赞同：2
> 
> 时间：2012-04-19T12:07:39.720
> 
> 标签：excel, excel-formula, pivot-table

在我的数据透视表中。我有这样的数据集..

```
 M1     M2     M3
Country     Item

Australia   Item 1   5      3      3
            Item 2   3      6      7
            Item 3   4      6      6
Australia Total      12     15     16

Belgium
            Item 1   4      5      7
            Item 2   5      8      3
            Item 3   3      7      3
Belguim Total        12     20     13 
```

我想要做的是使用 GETPIVOTDATA 函数获取 M1 中第 1 项的总数（即 9）。

我已经能够使用`"Australia Total" "M1"`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:56:02.633

我认为这是可能的，但查看[Excel 2010 帮助](http://office.microsoft.com/en-us/excel-help/getpivotdata-function-HP010342556.aspx)似乎说您只能参考表中某处可见的总数。因此，我认为您需要另一个不包括国家/地区的数据透视表。或者您可以更改上面的一项，以便国家位于项目的右侧。然后将您的 GetPivotData 公式指向那个。

上面链接的 Excel 页面中的特定行是最后一行：“返回 #REF！因为没有 Davolio 的饮料销售总值。”

编辑：如果您想在 GetPivotData 公式中使用变量，此[Contextures 页面](http://www.contextures.com/xlpivot06.html)有一些很棒的提示，尤其是最后关于引用数据字段的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:43:23.543

函数返回只能返回工作表上显示的数字`GETPIVOTDATA`。在这种情况下，解决方案可能是将 Item 字段拖到列中。如果现在显示一个编号为 9 的单元格，您可以检索它。

# collaborative-filtering - 基于用户的协同过滤问题

> ID：10227709
> 
> 赞同：1
> 
> 时间：2012-04-19T12:07:52.060
> 
> 标签：collaborative-filtering

![预言](../Images/d5b817a222a02d20dcfedc65000d4c46.png)

在基于用户的协同过滤中，图片显示了如何预测项目评分的公式。NSa 是用户 a 的最近邻集合。j 是要预测的项目。rij 表示用户 i 在 NSa 中对项目 j 的评分。所以，我的问题是，如果用户 i 从未投票过项目 j 怎么办？如何处理 rij？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:19:07.537

总和实际上是在 NSa 中也评分为 j 的所有用户的总和。这是通常的答案，也以这种方式限制它。当它不存在时，您也可以在此处使用一些虚拟值，例如使用用户 i 的平均评分。我不建议这样做，因为它会在不添加信息的情况下减慢速度。

# php - 正则表达式：测试自定义 URL

> ID：10227712
> 
> 赞同：0
> 
> 时间：2012-04-19T12:08:02.107
> 
> 标签：php, regex, url-rewriting, preg-match

我有一个网站，用户可以在其中使用自己的自定义 URL 创建自己的个人资料页面。例如：`http://www.website.com/MyProfilePage`或`http://www.website.com/JohnnysPage`

**我需要一个只允许aZ 0-9**和**-**（连字符）的正则表达式。没有空格或其他字符。

所以，例如它会...

**在这些字符串上失败**

```
http://www.website.com/MyProfilePage 
My Profile Page 
My.Profile.Page 
My_Profile_Page 
My/Profile/Page 
Katie'sPage 
```

等等等等

**通过这些字符串**

```
MyProfilePage
KatiesPage
MyProfilePage
Davids-Page
TheBestPage-2001 
```

等等等等

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:13:57.947

```
preg_match('/^[a-zA-Z0-9\-]+$/',$string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:15:36.160

[preg_match()](http://www.php.net/manual/en/function.preg-match.php)进行救援：

```
$pattern = '/^[a-zA-Z0-9\-]+$/';
$match = preg_match($pattern, "My.Profile.Page"); // returns false
$match = preg_match($pattern, "MyProfilePage"); // returns true 
```

**[工作演示](http://codepad.viper-7.com/XZQFn8)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:13:36.230

我会简单地说：

```
^[a-zA-Z0-9-]+$ 
```

# php - 关于会话 CodeIgniter 的说明

> ID：10227716
> 
> 赞同：1
> 
> 时间：2012-04-19T12:08:22.300
> 
> 标签：php, codeigniter, session

最近我一直在我的个人机器上工作 2 个不同的 CodeIgniter 项目，我遇到了一个问题。

如果我要在浏览器中同时运行两个项目，并且两个项目要一起使用会话，那么其中一个会话往往会很快超时。（喜欢在 3-10 秒内）

起初我以为我可能有一些逻辑错误，直到我注意到只要我一次只运行一个项目，这个问题就不复存在了。因此，我怀疑一个人不能同时运行两个不同的项目。那是对的吗？

如果是这样，那是否意味着如果我将 2 个项目放在同一个服务器上，也会存在这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T23:26:31.770

[这取决于您在 CI ( http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html) )中的会话设置。
这可以设置在`application/config/config.php`. 只需将`$config['sess_cookie_name']`两个 CI 应用程序中的值更改为不同即可。

# java - Java bufferedreader 在读取行时有时会跳过第一个字符

> ID：10227720
> 
> 赞同：2
> 
> 时间：2012-04-19T12:08:37.457
> 
> 标签：java, bufferedreader

我正在尝试使用缓冲阅读器读取文件，但有时会跳过一行中的第一个字符。这是文件，我正在阅读： http: [//files.moonmana.com/forums/Rectangle.h](http://files.moonmana.com/forums/Rectangle.h)

这是结果，我得到：

```
LINE: #ifndef RECTANGLE_H
LINE: include "Shape.h"
LINE: lass Rectangle : public Shape {
LINE: rivate:
LINE: double _width;
LINE: std::vector<b2Vec2*>* _vertices;
LINE: ublic:
LINE: Rectangle(std::vector<b2Vec2*>* vertices) { _vertices = vertices;};
LINE: void createVertices();
LINE: bool isMimePoint(b2Vec2);
LINE: double getWidth(){return _width;};
LINE: void setWidth(double width);
LINE: void setHeights(double heights);
LINE: ShapeType getType();
LINE: void moveOn( b2Vec2 ,b2Vec2*);
LINE: virtual b2Vec2* getCenter();
LINE: ;
LINE: endif 
```

这是我的源代码：

```
String path = file.getPath();
BufferedReader _br;
    try {
        _br = new BufferedReader(new FileReader(path));

        do {
            System.out.println("LINE: " + _br.readLine());
            lines.add(_br.readLine());
        } while (_br.read() != -1);

        _br.close();
    } catch (Exception e) {
        System.out.println("Error reading file: " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T12:14:18.517

您正在打印每隔一行并保存每隔一行并跳过每隔一行的开头。您在三个地方读取数据并以不同的方式使用它。一旦你有 _br.read() 一个字符，它就不会再次读取它，因此它不会出现在行中。

更好的方法是使用

```
String line;
while((line = _br.readLine()) != null) {
   System.out.println(line);
   lines.add(line);
} 
```

如您所见，它在一个地方读取，并且一致使用该值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:14:59.420

[read-method](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#read%28%29)消耗一个字符，检查 readLine 是否返回[null](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29)。

```
...
String line;
while ((line = _br.readLine()) != null) {
    System.out.println("LINE: " + line);
    lines.add(line);
}
... 
```

# c# - 在 C# 中根据孩子的值对 ArrayList 进行排序

> ID：10227723
> 
> 赞同：0
> 
> 时间：2012-04-19T12:08:40.313
> 
> 标签：c#, arrays, sorting

我有一个`ArrayList`包含多个`String[]`（字符串数组）的。

每个都`String[]`包含一个键：`name`

我想做的是`ArrayList`根据`name`.

使用`Array.Sort`不起作用，因为它无法比较`String[]`。我如何`ArrayList`根据它的值对它`name`进行排序`String[]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:15:12.473

In LINQ:

```
var ordered = arrayList.Cast<String[]>().OrderBy(ar => arr[0]); 
```

Normally it's better to use a strong typed `List<String[]>` instead of an `ArrayList`. When you say *key* it sounds as if you want to have a list of strings for each unique key. Then a `Dictionary<String, String[]>` would be the best choice.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:15:17.773

You should be using a `List<string[]>`. It supports everything that `ArrayList` does, and it is strongly typed.

Using a `List<string[]>`:

```
IEnumerable<string[]> sorted = myList.OrderBy(s => s[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:12:16.207

尝试这个

```
ArrayList arr = new ArrayList();
arr.ToArray().OrderBy(p => p); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:13:00.057

使用[Array.Sort(Array,IComparer)](http://msdn.microsoft.com/en-us/library/aa311216%28v=vs.71%29.aspx)并编写您自己的比较器，在您的 String[] 中查找您的键并比较它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T12:13:28.030

您可以创建`IComparer`一个使用

```
public virtual void Sort(
    IComparer comparer
) 
```

[http://msdn.microsoft.com/en-us/library/0e743hdt.aspx](http://msdn.microsoft.com/en-us/library/0e743hdt.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T12:15:00.260

You can pass to `Array.Sort` either a delegate or a class implementing an interface that implements the custom comparison you need. See some examples [http://bytes.com/topic/c-sharp/answers/235679-two-dimension-array-sort](http://bytes.com/topic/c-sharp/answers/235679-two-dimension-array-sort).

# deployment - 如何从 psake 执行 .bat 文件？

> ID：10227730
> 
> 赞同：3
> 
> 时间：2012-04-19T12:09:06.980
> 
> 标签：deployment, powershell, build, execute, psake

我正在尝试在 powershell psake 脚本中执行 .bat 文件。这可能吗？还是我必须做一个解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T05:09:59.470

尝试以下操作：

```
task CallBatch {
  exec {cmd.exe /c "path\to\my\testscript.bat"}
} 
```

没有必要在 PSake 的 exec {} 函数中包装对 cmd.exe 的调用，但如果这样做，如果批处理返回的不是 0，则构建会失败。

下面的任务总是让构建失败：

```
task Return1FromCmd {
  exec {cmd.exe /c "@exit 1"}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:02:13.823

要从 PowerShell 执行 .bat（或 .cmd）：

foo.bat：

```
@echo off
echo "foo" 
```

foo.ps1：

```
. .\foo.bat
#or
.\foo.bat
#or
& .\foo.bat 
```

然后我们可以运行脚本：

```
D:\dev> .\foo.ps1
"foo" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-14T19:26:59.187

这对我有用：

```
properties {
  $mybat = 'C:\path\tool.bat'
}

task Test -depends ... { 
  "Bla bla"

  Exec { & $mybat }
} 
```

无需直接提及`cmd.exe`——`&`在 Exec 脚本块中使用似乎就足够了。

# c# - 在运行时将从 SQLite 表中获取的脚本放入我的代码中？

> ID：10227733
> 
> 赞同：0
> 
> 时间：2012-04-19T12:09:13.527
> 
> 标签：c#, database, sqlite, codedom

在 sqlite 中，我将函数放在了我正在使用 c# 代码获取的表中。我想在我的代码中运行时使用该函数。（例如：如果我在表格中放置添加两个数字的函数，我希望该代码包含在我的代码中以添加两个数字。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:16:28.593

很久以前我有一个类似的问题。这可能会对您有所帮助：[如何动态评估 C# 表达式？](https://stackoverflow.com/questions/53844/how-can-i-evaluate-a-c-sharp-expression-dynamically)

基本上，它将归结为在运行时使用反射创建一个新程序集，使用`CSharpCodeProvider.CompileAssemblyFromSource`.

我建议您改用动态语言，即使用 IronPython 在 sqlite 中定义您的源代码，然后从 C# 托管 IronPython。这应该更容易做到，但仍然可以让您从这些功能访问应用程序的其余部分。

# jquery - 使用/不使用 parseXML 在 jQuery 中解析 XML？

> ID：10227740
> 
> 赞同：2
> 
> 时间：2012-04-19T12:09:40.333
> 
> 标签：jquery, xml, parsexml

两者都在工作......那我为什么需要`parseXML`？

```
var x='<a>\
<item k="1" p1="aaa" />\
<item k="2" p1="bbb" />\
</a>';

alert($($.parseXML(x)).find("item[k='1']").attr('p1')); //aaa

alert($(x).find("item[k='1']").attr('p1')); //aaa 
```

[http://jsbin.com/ukahum/2/edit](http://jsbin.com/ukahum/2/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:37:03.033

该`$.parseXML`函数将`DOMParser`在 IE 中使用或类似的东西。

因此它将返回一个真正的 xml 对象，因此它将包含诸如 xml 版本 ( `$.parseXML(xml).xmlVersion`) 之类的内容。

如果你有这样的xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<ok>
    <yes>true</yes>
</ok> 
```

并使用你的第二个例子，你会得到这个：

```
[
<!--?xml version="1.0" encoding="UTF-8" ?-->
, 
<ok>​…​&lt;/ok>​
] 
```

因此，如果您现在尝试执行`$(xml).find("ok")`，它将找不到任何东西，因为 ok 是父标签，如果您执行`$(xml).first()`，您将收到一条评论，我认为这不会很好。

但如果您使用的是第一个示例，您将获得一个文档作为父标签：

```
[#document] 
```

所以你可以得到这样的`ok`标签：`$($($.parseXML(xml)).find("ok")`没有问题，也不会有评论作为第一个节点。

# javascript - Backbone.js 散列 URL 在默认值上自动更改

> ID：10227742
> 
> 赞同：0
> 
> 时间：2012-04-19T12:09:50.753
> 
> 标签：javascript, jquery, backbone.js

问题是：当我转到第 2 步时。step2 很好，之后由于某种原因“开始”路线处于活动状态。如何解决这个问题呢？

情景如下。我从第一步开始 -> 进入第 2 步 -> 它呈现 step2view 并立即再次开始路由。这种行为的原因是什么？

下面的短代码。

我有一个带有最少标记的简单页面

```
<div id="contentHolder">
</div> 
```

还有一些骨干的东西

```
 var StateModel = Backbone.Model.extend({
        defaults: { state: "start" }
    });

    var StepModel = Backbone.Model.extend({
        defaults: { selected: [], location: null }
    });

    var WizardView = Backbone.View.extend({
        router: null,

        nestedViewModels: [],

        initialize: function () {
            this.model.bind("change", this.render, this);
            this.render();
        },

        render: function () {
            switch (this.model.get("state")) {
                case "start":
                case "step1":
                    var step1 = new Step1View({el: $("#contentHolder")});
                    break;
                case "step2":
                    var step2 = new Step2View({el: $("#contentHolder")});
                    break;
                case "step3":
                    var step3 = new UploadView({el: $("#contentHolder")});
                    break;
            }
        }
    });

var Step1View = Backbone.View.extend({
       goToStep2: function(){
         router.navigate("!/step2", true);
       }
    });
    var Step2View = Backbone.View.extend({    
    });

//wizard - is a global variable
var Router = Backbone.Router.extend({

    routes: {
        "": "start",
        "!/step1": "step1",
        "!/step2": "step2"
    },

    start: function () {
        wizard.model.set("state", "start");
    },

    step1: function () {
        wizard.model.set("state", "step1");
    }

    step2: function () {
        wizard.model.set("state", "step2");
    }
}); 
```

*只列出了主要代码，跳过了很多辅助代码。确保 - 分配的所有对象。我检查了很多次。*

**UPD：**所有下一个视图渲染到与前一个相同的位置。并且在 Step2 之后由于某种原因将 url 更改为默认值。所以而不是 url...#!/step2 它更改为 url...# 我认为这就是路由器触发“启动”的原因。但我不明白 - 什么东西改变了 url。

**UPD**现在按以下顺序工作：

1.  Step1View.gotoStep2
2.  路由器.step2
3.  WizardView.render
4.  Step2View.initialize
5.  Step2View.render
6.  路由器启动

router.start 显然不应该被调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:03:04.063

**我终于解决了这个问题，现在跳舞胜利夹具）））**
问题是由我的 Step2 按钮引起的。它本身就是一个链接（锚），它有*href="#"*。所以在我按下它并且所有脚本都可以正常工作后，它会将我的 url 更改为 a.href 值。这就是为什么应用默认网址

# android - 如何使用“lookupKey”获取联系人图片？

> ID：10227744
> 
> 赞同：1
> 
> 时间：2012-04-19T12:09:52.760
> 
> 标签：android, android-contacts

我有联系人的查找键，现在我想使用这些查找键将联系人图像作为位图/输入流获取。Android 文档有助于获取图像，但联系人 ID 不是查找键。

```
public InputStream openPhoto(long contactId) {
 Uri contactUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, contactId);
 Uri photoUri = Uri.withAppendedPath(contactUri, Contacts.Photo.CONTENT_DIRECTORY);
 Cursor cursor = getContentResolver().query(photoUri,
      new String[] {Contacts.Photo.PHOTO}, null, null, null);
 if (cursor == null) {
     return null;
 }
 try {
     if (cursor.moveToFirst()) {
         byte[] data = cursor.getBlob(0);
         if (data != null) {
             return new ByteArrayInputStream(data);
         }
     }
 } finally {
     cursor.close();
 }
 return null;
} 
```

从柱子跑到柱子，但没有帮助。谢谢

**编辑日期 04-09-2012**

按照@Sreejith Krishnan R 的建议进行了尝试，但在 logcat 中收到以下异常

```
09-04 03:16:26.359: E/AndroidRuntime(24008): java.lang.IllegalArgumentException: URI: content://com.android.contacts/contacts/lookup/0r272-382C544E2C562C382C4E582C42.2649i11.1987r6285-382C544E2C562C382C4E582C42.1987r6440-382C544E2C562C382C4E582C42.2829r6475-382C544E2C562C382C4E582C42/photo, calling user: com.xyz, calling package:com.xyz
09-04 03:16:26.359: E/AndroidRuntime(24008):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:144)
09-04 03:16:26.359: E/AndroidRuntime(24008):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:49:18.857

[更新] 现在这可以从 API 级别 5 开始使用

```
public Bitmap getAvatar(Context context, String lookupKey){
    Uri uri = getDataUri(context, lookupKey);
    if (uri == null){
        return null;
    }
    Cursor  cursor = context.getContentResolver().query(
            uri,
            new String[] {ContactsContract.Data.DATA15},
            null,
            null,
            null
    );
    if (cursor == null){
        return null;
    }
    try{
        if (cursor.moveToFirst()){
            byte [] bytes = cursor.getBlob(0);
            InputStream inputStream = new ByteArrayInputStream(bytes);
            return BitmapFactory.decodeStream(inputStream);
        }
    } finally {
        cursor.close();
    }
    return null;
}

public Uri getDataUri(Context context, String lookupKey){
    Cursor cursor = context.getContentResolver().query(
            Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey),
            new String[] {ContactsContract.Contacts.PHOTO_ID},
            null,
            null,
            null
    );
    if (cursor == null){
        return null;
    }
    try {
        if (cursor.moveToFirst()){
            long id = cursor.getLong(0);

            /**http://developer.android.com/reference/android/provider/ContactsContract.ContactsColumns.html#PHOTO_ID
             * If PHOTO_ID is null, consult PHOTO_URI or PHOTO_THUMBNAIL_URI,
             * which is a more generic mechanism for referencing the contact photo,
             * especially for contacts returned by non-local directories (see ContactsContract.Directory).
             */

            if (id == 0){
                if (Build.VERSION.SDK_INT < 11){
                    return null;
                }
                return getPhotoThumbnailUri(context, lookupKey);
            }
            return ContentUris.withAppendedId(ContactsContract.Data.CONTENT_URI, id);
        }
    } finally {
        cursor.close();
    }
    return null;
}

//Available only for API level 11+
public Uri getPhotoThumbnailUri(Context context, String lookupKey){
    Cursor cursor = context.getContentResolver().query(
            Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookupKey),
            new String[] {ContactsContract.Contacts.PHOTO_THUMBNAIL_URI},
            null,
            null,
            null
    );
    if (cursor == null){
        return null;
    }
    try{
        if (cursor.moveToFirst()){
            return Uri.parse(cursor.getString(0));
        }
    } finally {
        cursor.close();
    }
    return null;
} 
```

# arrays - CUDA 在共享内存中找到最大值

> ID：10227746
> 
> 赞同：0
> 
> 时间：2012-04-19T12:09:54.623
> 
> 标签：arrays, search, cuda, max, shared

我有一个内核，它产生一个结果值数组，我想有效地找到这些值的最大值。Array 在内核开始时用一些负值（例如 -1）初始化。例如，内核使用 5 个块执行，每个块有 256 个线程。

以下是问题：

1.  由于我的数据，我必须终止无效的线程，所以我有时使用 256 个线程，有时使用 50、20 等等。

2.  在共享内存中写入块的结果，但正如我提到的，一些数组有 50 个结果，一些有 256 个结果......（所以共享数组看起来像这样）8,6,4,9,1,-1,-1 ,-1...

3.  在那种情况下，如何有效地找到一个块中的最大值？

在这些类型的数组上并行归约会很复杂，不是吗？这该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:33:45.620

关于您的算法的信息不足。

你说的n个结果是什么意思？数组中被忽略的值是否设置为 -1 或者您是否使用动态外部共享内存并且线程只写入索引 n（听起来很难实现）？

*   使用固定大小的共享内存并将忽略的值设置为 -1 并仍然执行并行缩减，如果您搜索正最大值并将其填充为 -1 没关系，或者

*   不要终止线程，而是在另一个数组中设置一个标志，如果线程不应该执行进一步的计算并且仍然进行并行归约

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:57:50.983

您可以在内核中进行归约（如 djmj 所说），也可以使用推力来组合仿函数和归约（例如 transform_reduce）。Thrust 包含在 CUDA 工具包中，请参阅[此页面](http://code.google.com/p/thrust/wiki/QuickStartGuide#Reductions)以获取 transform_reduce 的示例。

# java - JPA @ElementCollection @Enumerated 不插入

> ID：10227747
> 
> 赞同：1
> 
> 时间：2012-04-19T12:09:56.573
> 
> 标签：java, hibernate, jpa

我正在尝试实现基本的用户/角色

一个用户可以有零到多个角色。

```
public enum Role {
  ROLE_USER,
  ROLE_ADMIN;
}

@Entity
@Table(name = "USERS")
public class User implements Serializable {

  private static final long serialVersionUID = 2936736450886451500L;
  private Long id;
  private Individual individual;
  private Set<Role> roles = new HashSet<Role>();

  @Id
  @Column(name = "ID")
  @GeneratedValue
  public Long getId() {
    return id;
  }

  @SuppressWarnings("unused")
  private void setId(Long id) {
    this.id = id;
  }

  @ElementCollection(targetClass=Role.class)
  @JoinTable(name = "USER_ROLES", joinColumns = @JoinColumn(name = "USER_ID"))
  @Enumerated(EnumType.STRING)
  @Column(name = "role", nullable = false)
  public Set<Role> getRoles() {
    return roles;
  }

  public void setRoles(Set<Role> roles) {
    this.roles = roles;
  }

  public void addRole(Role role) {
    roles.add(role);
  }

} 
```

我的单元测试

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:/META-INF/spring/resources/resource-context.xml", "classpath:/META-INF/spring/services/persistence-context.xml"})
public class UserDaoJpaImplTest {

@Autowired
UserDao userDao;

@Transactional
@Test
public void testCreate() {
    User user = new User();
    user.setIndividual(new Individual());
    user.addRole(Role.ROLE_USER);
    user.addRole(Role.ROLE_ADMIN);
    userDao.create(user);

    Assert.assertNotSame(user.getId(), 0);
} 
```

问题是，jpa（由 hibernate 支持）没有在 USER_ROLES 表上进行插入（它正在正确地创建它，具有正确的复合 PK（ROLE、USER_ID）和对用户的 FK。

我可以在控制台中看到，用户只完成了一次插入

```
Hibernate: insert into USERS (INDIVIDUAL_ID) values ( ? )
Hibernate: insert into INDIVIDUALS values ( ) 
```

我想我只是错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:52:51.097

在持久性上下文刷新期间将集合元素插入数据库。默认情况下会在测试`SpringJUnit4ClassRunner`后触发回滚`@Transactional`，因此不会发生事务提交时的自动刷新。

您需要使用 or 覆盖此行为`@Rollback(false)`，`@TransactionConfiguraton(defaultRollback = false)`或者仅使用方法触发显式刷新`flush()`。

此外，如果您需要覆盖您应该使用的集合表的默认属性`@CollectionTable`，而不是`@JoinTable`.

# iphone - UIDocument 的非 iCloud 使用

> ID：10227750
> 
> 赞同：5
> 
> 时间：2012-04-19T12:10:04.607
> 
> 标签：iphone, ios, ios5, icloud

当用户禁用 iCloud 时，我正在尝试使用没有 iCloud 的 UIDocument。我有以下代码：

```
NSURL *url;
if (_isiCloudEnabled) {
    NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
    url = [ubiq URLByAppendingPathComponent:[NSString stringWithFormat:@"%f.adoc",[[NSDate date] timeIntervalSince1970]]];
} else {
    NSString *homeDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *newFilePath = [homeDirectoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%f.adoc", [[NSDate date] timeIntervalSince1970]]];
    url = [NSURL URLWithString:newFilePath];
}

ASListyDocument *d = [[ASListyDocument alloc] initWithFileURL:url]; 
```

这段代码给了我错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'must pass a valid file URL to -[UIDocument initWithFileURL:]' 
```

任何想法为什么？我查看了调试器中的 URL——它看起来是有效的。我尝试在模拟器和手机上运行它 - 同样的问题！

顺便说一句，我正在使用 iOS 5.0 的设备上运行，以防万一。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T12:13:58.970

这可能是您正在构建的 URL

```
NSString *homeDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *newFilePath = [homeDirectoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%f.adoc", [[NSDate date] timeIntervalSince1970]]];
url = [NSURL URLWithString:newFilePath]; 
```

实际上不是 URL，而是路径。不要忘记一个有效的 URL 需要一个方案；对于文件，这是“file://”。尝试使用构建文件 URL`[NSURL fileURLWithPath:]`

```
url = [NSURL fileURLWithPath:newFilePath]; 
```

# drupal-7 - Drupal 7 视图上下文过滤器标题覆盖

> ID：10227755
> 
> 赞同：1
> 
> 时间：2012-04-19T12:10:28.557
> 
> 标签：drupal-7, drupal-views

我有一个通过搜索 API 返回搜索结果的视图。它充分地执行了这个用例，我很高兴。为了给可交付成果加冕，我需要添加表单的标题覆盖，该表单`Showing search results for '%1'`最初看起来很简单，但它并没有完全按计划工作。

对于 URL = `mysite.com/search/all?search=wombat`，其中搜索值是从块内的公开表单中收集的，我要么得到：

> 显示“搜索“全部””的搜索结果

或者，如果我`%1`为未出现在 URL 中的主题输入标题覆盖，我会得到：

> 显示 %1 的搜索结果”。我的目标是获得“显示 'wombat' 的搜索结果

标题覆盖的工作原理是它删除了`Search for ...`部分，但替换选择“全部”作为异常值（或我设置为异常值的任何其他值），我需要能够获取查询字符串的值（搜索=袋熊）。

任何人都可以在这里阐明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:11:14.800

问题是您可以用来覆盖标题的 '%1' 和 '%2' 指的是路径的第一个和第二个参数（在 Drupal 术语中），这将是 'search' 和 'all?search=wombat'在你的情况下......

相反，您需要的是“袋熊”本身作为路径组件。

也许您可以通过处理您正在谈论的案例来实现这一点：“主题的标题覆盖没有出现在 URL 中”的案例。上下文过滤器部分中有一个选项（我假设这是您工作的地方），用于在不存在时**提供默认值。**或许您可以在此处使用“ **PHP 代码**”选项，隔离您的“wombat”字符串并将其作为默认上下文过滤器返回，然后您可以通过“%1”访问它。

获取该部分 URL 的 php 代码应如下所示：

```
return htmlentities($_GET['search']); 
```

$_GET() 在 url 中返回该变量的值，而 htmlentities() 只是为了保证它的安全，因为它使用了 url 的一部分，这很容易受到 XSS 的攻击。

查看该组合（1）在不存在时设置默认参数和 2）在标题打印输出中使用新设置的参数）是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T11:14:16.547

我解决了这个问题。使用以下两个钩子，我们可以以编程方式更改过滤器的默认值。

```
<?php
/**
* hook_views_pre_view
* @param type $view
* @param type $display_id
* @param type $args
*/
function MODULE_NAME_views_pre_view(&$view, &$display_id, &$args) {
  if ($view->name == 'VIEW_NAME') {
    $filters = $view->display_handler->get_option('filters');   
    $view->display_handler->override_option('filters', $filters);
  }
}

/**
* hook__views_pre_build
* @param type $view
* @return type
*/
function MODULE_NAME_views_pre_build($view) {
  if ($view->name=='VIEW_NAME') {   
    $view->display['page']->handler->handlers['filter']['filter_field']->value['value'] = 8;
    return $view;
  }    
}
?> 
```

这段代码对我有用。我正在使用drupal 7。

# fiddler - 如何在向用户展示之前询问新的价值？

> ID：10227756
> 
> 赞同：1
> 
> 时间：2012-04-19T12:10:28.963
> 
> 标签：fiddler

我找到了这个示例代码，我可以在其中自动替换页面中的某些内容

```
// If content-type is HTML, then remove all DIV tags
if (oSession.oResponse.headers.ExistsAndContains("Content-Type", "html")){
  // Remove any compression or chunking
  oSession.utilDecodeResponse();

  var oBody = System.Text.Encoding.UTF8.GetString(oSession.responseBodyBytes);

  // Replace all instances of the DIV tag with an empty string
  var oRegEx = /<div[^>]*>(.*?)<\/div>/gi;
  oBody = oBody.replace(oRegEx, "");

  // Set the response body to the div-less string
  oSession.utilSetResponseBody(oBody);
} 
```

但是我怎样才能要求新值，而不是自动替换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:11:53.557

看看这是否适合你

```
if (oSession.uriContains("/yoururl/here")) {
    oSession.utilDecodeResponse();
    var oBody = System.Text.Encoding.UTF8.GetString(oSession.responseBodyBytes);
    var oRegEx = /this text will be replaced everywhere/gi;
    var mydefaulttext = 'new text';
    var mymsgbox = FiddlerScript.prompt('Lets change something', mydefaulttext);
    oBody = oBody.replace(oRegEx, mymsgbox);
    oSession.utilSetResponseBody(oBody);
} 
```

OnBeforeResponse

# r - R：使用 nls 解析时出错

> ID：10227757
> 
> 赞同：2
> 
> 时间：2012-04-19T12:10:32.457
> 
> 标签：r, nls

我正在尝试使用 将高斯峰拟合到 R 中的密度图`nls`。当我使用以下等式时：

```
fit <- nls(den.PA$y~coeffs2 * exp( - ((den.PA$x-coeffs3)/coeffs4)**2 ),
           start=list(coeffs2=1.12e-2, coeffs3=1075, coeffs4=2)) 
```

我收到以下错误：

```
Error in parse(text = x) : <text>:2:0: unexpected end of input
1: ~ 
  ^ 
```

谁能指出我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:40:04.793

尝试

```
fit <- nls(y~coeffs2 * exp( - ((x-coeffs3)/coeffs4)**2 ),data=den.PA,
       start=list(coeffs2=1.12e-2, coeffs3=1075, coeffs4=2)) 
```

# java - 右侧组件上的 JSplitPane 背景图像

> ID：10227758
> 
> 赞同：1
> 
> 时间：2012-04-19T12:10:36.777
> 
> 标签：java, image, swing, paintcomponent, jsplitpane

我有一个 JSplitPane。我想将背景图像添加到 JSplitPane 的左侧。

```
mySplitPane.getLeftComponent 
```

这将返回左侧组件。然后我想在左侧添加图像背景。我想我可以使用`Paint()` 将背景图像设置为 JSplitPane。但我怎样才能在唯一的左侧组件上进行设置。

我的 JSplitPane 左侧有一个 JTable。我想让 JTable 透明。然后显示背景图像。

现在我已经为我的 JTable 设置了背景。我不希望使用 JTable Scroll 滚动背景。这就是为什么我想将背景图像添加到拆分窗格而不是表格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:22:30.417

这可能是你要找的吗？

```
class ImagePanel extends JPanel {
    private Image image;
    public ImagePanel(Image image) {
        this.image = image;
    }
    @Override
    protected void paintComponent(Graphics g) {
       g.drawImage(image, 0, 0, getWidth(), getHeight(), this);
    }
} 
```

**用法：**

```
BufferedImage myImage = ImageIO.load(...);
JPanel leftPanel = new ImagePanel(myImage);

//Add panel to splitpanel
JSplitPane mySplitPane= new JSplitPane(JSplitPane.HORIZONTAL_SPLIT)
mySplitPane.setLeftComponent(leftPanel); 
```

> 上面我创建了一个 JComponent 的子类。覆盖paintComponent(Graphics g) 方法来绘制我想要显示的图像。然后我设置 JPanel 的内容窗格，然后最后将面板传递到拆分窗格的左侧

有关水印背景的更多信息，请参阅[此处](http://java.sun.com/products/jfc/tsc/articles/swing2d/)的示例和代码示例。已编辑

# c# - 无法生成临时类 - 签署程序集时加密失败

> ID：10227763
> 
> 赞同：5
> 
> 时间：2012-04-19T12:10:59.273
> 
> 标签：c#, xmlserializer, sign, sgen

我有一个签名的类库，我想通过 sgen 工具为其创建程序集。但是，当我尝试运行以下命令时出现错误：

> $ sgen.exe /a:testsign.dll /force /compiler:/keyfile:..\..\testsign.pfx /verbose /n
> 错误：无法生成临时类（结果=1）。
> 错误 CS1548：签署程序集 '[...path...]\TestSign.XmlSerializers.dll' 时加密失败 - '错误签署程序集 - - 参数不正确。'
> 
> 如果您需要更多帮助，请输入“sgen /?”。

我检查了[MSDN](http://msdn.microsoft.com/en-us/library/t21abc4c%28VS.80%29.aspx)上的错误，其中指出

> CS1548 在程序集签名失败时发生。这通常是由于无效的密钥文件名、无效的密钥文件路径或损坏的密钥文件造成的。

但是，我刚刚创建了密钥，路径是正确的，据我所知，Visual Studio 2010 不会创建损坏的密钥。

这个问题很容易重现。

1.  使用[此处粘贴](http://dotnetpad.net/ViewPaste/G1LbQutp60Kr6AMniw96bA)的代码创建一个新的类库。
2.  创建两个类，一个`class TestSigning`和一个`class Model`
3.  转到项目属性>签名并检查“签署此程序集”
4.  创建一个新的强名称密钥文件
5.  打开 Visual Studio 命令提示符 (2010)
6.  找到dll并运行`sgen /a:<dllname> [... as above ...]`

我的猜测是密钥文件的公钥。但是我找不到任何关于我如何告知`sgen`我用来保护我的密钥文件的密码的来源。

我不确定如何进行。我在这里查看的其他线程具有相同的错误“标题”`unable to generate temporary class`但不同的错误详细信息，其中没有`Cryptographic failure`（我发现）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:50:11.213

按照[这个线程](https://stackoverflow.com/questions/9766655/xml-serialization-assembly-for-non-web-projects-solved)中的说明解决了这个问题。尽管不是使用该`sgen`工具手动完成的，但它是通过 Visual Studio 完成的。

也就是把上面的例子改成：

1.  和以前一样
2.  和以前一样
3.  和以前一样
4.  和以前一样
5.  转到构建选项卡
6.  将*生成序列化程序*集设置为**开**
7.  右键单击项目并选择*卸载项目*
8.  右键单击项目并选择 *edit nnn.csproj**
9.  将以下代码段粘贴到某处

    ```
    <PropertyGroup>
        <SGenUseProxyTypes>false</SGenUseProxyTypes>
        <SGenPlatformTarget>$(Platform)</SGenPlatformTarget>
    </PropertyGroup> 
    ```

10.  重新加载并构建项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T09:15:43.940

最初，我能够毫无问题地构建项目。当另一个简单的项目无法构建/发布并引发此错误时，这很奇怪。

**在以管理员**身份运行 Visual Studio 后，我能够构建它。

参考：[戈登的3log](http://31og.com/post/cryptographic-failure-while-signing-assembly)

# php - MySQL 调用数据库的次数更少

> ID：10227764
> 
> 赞同：1
> 
> 时间：2012-04-19T12:11:00.370
> 
> 标签：php, mysql

我有下面列出的 3 个单独的 MySQL 查询，有什么方法可以组合它们，这样我就可以获得相同的输出，但只需调用一次数据库（而不是 3 个）

提前致谢

```
 <?php  
$host   = ''; 
$dbUser = '';   
$dbPass = ''; 
$db = ''; 
mysql_connect("$host", "$dbUser", "$dbPass") or die(mysql_error());
mysql_select_db("$db") or die(mysql_error());

$result = mysql_query("SELECT id,cat,extra1,bigimage FROM pp_photos WHERE extra1 = '120' ORDER BY rand() LIMIT 1" ) or die(mysql_error());   
while($row = mysql_fetch_array( $result )) {    
print "<a href=\"http://www.\" target=\"_new\"> <img src=\"ng\"  border=\"0\" ></a>";
}
?> 
<?php  
$host   = ''; 
$dbUser = '';   
$dbPass = ''; 
$db = ''; 
mysql_connect("$host", "$dbUser", "$dbPass") or die(mysql_error());
mysql_select_db("$db") or die(mysql_error());

$result = mysql_query("SELECT id,cat,extra1,bigimage FROM pp_photos WHERE extra1 = 'W599_PTO' ORDER BY rand() LIMIT 1" ) or die(mysql_error());   
while($row = mysql_fetch_array( $result )) {    
print "<a href=\"php">[?]</FONT></a>";
}
?>
<?php  
$host   = ''; 
$dbUser = '';   
$dbPass = ''; 
$db = ''; 
mysql_connect("$host", "$dbUser", "$dbPass") or die(mysql_error());
mysql_select_db("$db") or die(mysql_error());

$result = mysql_query("SELECT id,cat,extra1,extra5,bigimage FROM pp_photos WHERE extra5 = '120rear' ORDER BY rand() LIMIT 1" ) or die(mysql_error());   
while($row = mysql_fetch_array( $result )) {    
print "<a href=\"09\" target=\"_new\"> <img src=\"http://pg\"  border=\"0\" ert\"></a>";
}
?> 
```

我现在已经根据下面提供的帮助编辑了代码......我是 MySQL 的新手，我不确定如何设置过滤器，以便根据“额外 1”字段的值显示任何或所有 3 张图像...

```
 <?php  
$host   = ''; 
$dbUser = '';   
$dbPass = ''; 
$db = ''; 
mysql_connect("$host", "$dbUser", "$dbPass") or die(mysql_error());
mysql_select_db("$db") or die(mysql_error());

$result = mysql_query("
SELECT extra1 
FROM pp_photos 
WHERE extra1 IN('1','10','12') 
GROUP BY extra1" ) 
or die(mysql_error());   
while($row = mysql_fetch_array( $result )) {    
print "<a href=\"h3\" target=\"_new\"> images</a>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:10:40.727

[使用UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)怎么样

```
$query = "
SELECT id,cat,extra1,bigimage FROM pp_photos WHERE extra1 = '120' ORDER BY rand() LIMIT 1
UNION
SELECT id,cat,extra1,bigimage FROM pp_photos WHERE extra1 = 'W599_PTO' ORDER BY rand() LIMIT 1
UNION
SELECT id,cat,extra1,bigimage FROM pp_photos WHERE extra1 = '120rear' ORDER BY rand() LIMIT 1
";
$cats = array(
    '120'      => '503',
    'W599_PTO' => '508',
    '120rear'  => '509'
);
$result = mysql_query($query) or die(mysql_error());   
while($row = mysql_fetch_array( $result )) {    
    print '<a href="http://www.nctfleetlist.co.uk/photos/search.php?keywords='.
          $row['extra1'] .
          '&cat=' .
          $cats[$row['extra1']] .
          '" target="_new"><img src="http://www.nctfleetlist.co.uk/images/camera.png"  border="0" title="photos available"></a>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:15:04.940

```
SELECT id,cat,extra1,bigimage 
FROM pp_photos 
WHERE extra1 IN('W599_PTO','120','120rear') 
GROUP BY extra1 
```

This will give you 3 rows. You need to filter according to some condition to get desired row from 3 rows, order by is not required

# jquery - 查找选中复选框的所有下拉菜单

> ID：10227768
> 
> 赞同：0
> 
> 时间：2012-04-19T12:11:14.320
> 
> 标签：jquery, asp.net, html

我有一个非常简单的结构，如下所示。我在 jquery 中尝试做的是找到选中复选框的所有下拉列表。

```
 <table>
    <tr>
     <td> <asp:DropDownList ID="ddDurationHours" runat="server"/> <td>
     <td>Data<td>
     <td>Data<td>
     <td> <asp:CheckBox runat="server" ID="chkDelete"/> </td>
     <td>Data<td>
    </tr>
    <tr>
     <td><asp:DropDownList ID="ddDurationHours" runat="server"/> </td>
     <td>Data<td>
     <td>Data<td>
     <td>  <asp:CheckBox runat="server" ID="chkDelete"/> </td>
     <td>Data<td>
    </tr>
    </table> 
```

我尝试了几件事，无法全部记住，但我最近的尝试是：

```
var hoursDropdowns = jQuery('select[name*="ddDurationHours"]').closest('tr').find('td:first input[name*="chkDelete"]:checked:enabled'); 
```

有没有人知道我正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:26:59.460

对下拉列表和复选框使用类选择器以获得更简洁的选择器

```
$(".checkboxclass:checked").closet('tr').find('.dropdownclass') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:27:06.497

试试这个：

```
$('select[name*=ddDurationHours]').each(function(){

var len = $(this).parent().parent().find('input[name*=chkDelete]:checked').length;
if(len == 1)
{
    var drd = $(this);
}

}); 
```

如果复选框被选中，那么你得到长度 = 1，你的下拉菜单是 $(this)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:27:25.670

如果您给其中一个包含元素一个类，这可能更容易实现。

例如

```
<tr class="findme">
 <td> <asp:DropDownList ID="ddDurationHours" runat="server"/> <td>
 <td>Data<td>
 <td>Data<td>
 <td> <asp:CheckBox runat="server" ID="chkDelete"/> </td>
 <td>Data<td>
</tr> 
```

然后使用： -

```
$('.findme input:checked') 
```

在您的结构中获取已检查的输入。

您也可以为 CheckBox 提供一个类，但我相当确定在呈现复选框时，ASP .NET 会将其包装在一个跨度中，因此：-

`$('input.findme:checked')`可能不起作用，因为该类应用于跨度，而不是输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:33:41.220

> $("input:checkbox:checked").parent().parent().find("select")

# ios - 在 iOS 中为绘画应用制作橡皮擦工具

> ID：10227769
> 
> 赞同：8
> 
> 时间：2012-04-19T12:11:22.730
> 
> 标签：ios, paint, erase, brush

我正在创建一个绘画应用程序，我想知道如何实现橡皮擦工具。我不想让我的橡皮擦工具绘制白色，因为我想允许用户更改背景颜色。还有，可以设置刷子的硬度吗？如果是，请告诉我如何。

谢谢

这是我到目前为止所做的：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    lastPoint = [touch locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    UIGraphicsBeginImageContext(self.view.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self.view];
UIGraphicsBeginImageContext(self.view.frame.size);
[drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextStrokePath(UIGraphicsGetCurrentContext());
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

lastPoint = currentPoint;
}
- (IBAction)clear:(id)sender {
drawImage.image = nil;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-14T14:36:53.983

好的，这就是我为橡皮擦工具所做的：
我添加了这行代码：
`CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);`

所以代码将是这样的：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self.view];
UIGraphicsBeginImageContext(self.view.frame.size);
[drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

// I add this
CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);

CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), sizeSlider.value);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);

CGContextStrokePath(UIGraphicsGetCurrentContext());
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
lastPoint = currentPoint;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T18:10:02.647

我已经制作了绘画应用程序，它可以在 iTunes “Easy Doodle”应用程序上使用。橡皮擦没有特殊的逻辑。只需获取背景图像的 RGB 值并将其传入

```
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(),R value,G value,B value, 1.0); 
```

根据选择的背景图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-13T10:38:26.007

好的，所以我一直在寻找有关如何创建橡皮擦的解决方案一个星期，我不得不改变我看待它的方式，因为无论我尝试擦除多少次它都会擦除背景图像。

然而，最后我确实找到了一个适合我的解决方案（我可以擦除油漆并且仍然可以感知背景图像未被触及或擦除），并希望它可以帮助其他人。所以这里...

1) 在 UIView 中创建 2 个图像视图 2) 将两个图像视图都设置为您想要的背景图像... 3) 我创建了一个分段控件来确定用户是否要擦除 4) 分段控件时添加了以下功能正在被选中。。

```
 func drawLineForRubber(fromPoint: CGPoint, toPoint: CGPoint) {

    // 1
    UIGraphicsBeginImageContext(view.frame.size)
    let context = UIGraphicsGetCurrentContext()
    mainImageView.image?.drawInRect(CGRect(x: 0, y: 0, width: view.frame.size.width, height: view.frame.size.height))

    // 2
    CGContextMoveToPoint(context, fromPoint.x, fromPoint.y)
    CGContextAddLineToPoint(context, toPoint.x, toPoint.y)

    // 3
    CGContextSetBlendMode(context, CGBlendMode.Clear)
    CGContextSetLineCap(context, CGLineCap.Round)
    CGContextSetLineWidth(context, 10.0)
    //this line is very important as it paints the screen clear
    CGContextSetRGBStrokeColor(context, red, green, blue, 0.0)
    CGContextSetBlendMode(context, CGBlendMode.Clear)

    // 4
    CGContextStrokePath(context)

    // 5
    mainImageView.image = UIGraphicsGetImageFromCurrentImageContext()
    mainImageView.alpha = opacity
    UIGraphicsEndImageContext()

} 
```

正如您将看到的那样，其中有一条线将 CGContextSetRGBStrokeColor 的值设置为 0.0，这很重要，因为当用户擦除油漆时，他正在擦除顶部图像视图中的油漆以及具有透明颜色的油漆。但是，由于您在其下方有另一个图像视图，因此感觉它看起来像是被擦掉而不影响背景图像。

相反，它被擦掉了，但后面的imageview，使它看起来像没有。当您想导出图像时（您可以通过多种方式进行操作，但我使用了以下方法）您已经使用背景图像进行了绘制，只需将两个图像视图结合起来，因为第一个图像视图将具有您绘制的油漆和第二个图像视图将拥有您想要的原始背景图像。

```
 func share() {

    let layer = UIApplication.sharedApplication().keyWindow!.layer
    let scale = UIScreen.mainScreen().scale
    UIGraphicsBeginImageContextWithOptions(layer.frame.size, false, scale); // reconsider size property for your screenshot

    layer.renderInContext(UIGraphicsGetCurrentContext()!)
    let screenshot = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    UIGraphicsBeginImageContext(mainImageView.bounds.size)
    mainImageView.image?.drawInRect(CGRect(x: 0, y: 0,
        width: mainImageView.frame.size.width, height: mainImageView.frame.size.height))

    UIGraphicsEndImageContext()

    let activity = UIActivityViewController(activityItems: [screenshot], applicationActivities: nil)
    presentViewController(activity, animated: true, completion: nil)
} 
```

希望这可以帮助其他人。伙计，我花了很长时间才明白这一点=）

# php - URL 缩短算法

> ID：10227772
> 
> 赞同：1
> 
> 时间：2012-04-19T12:11:35.997
> 
> 标签：php, database, performance, algorithm, url-shortener

我最近为自己购买了一个用于缩短个人 URL 的域。我创建了一个函数来生成 4 个字符的字母数字字符串作为参考。

但

如何检查它们是否已被使用？我无法检查数据库中是否存在每个 URL，或者这只是它的工作方式，我必须这样做？如果是这样，如果我生成了 13.000.000 个 URL（共 14.776.336 个）怎么办。我是否需要继续生成字符串，直到找到一个不在数据库中的字符串？

这看起来不是正确的方法，任何人都可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:28:05.800

我想到的一种内存效率更高且速度更快的方法是遵循。这个问题完全不用数据库就可以解决。这个想法是，您可以将它们存储在内存中，而不是将使用的 url 存储在数据库中。并且由于将它们存储在内存中会占用大量内存，因此我们将使用一个位集（位数组），并且每个 url 只有一个位。

1.  对于您生成的每个随机字符串，为 b/w 0 和最大数 K 的字符串创建一个哈希码。
2.  创建一个位集（基本上是一个位数组）。每当您使用某个 url 时，将相应的哈希码位设置为 1。
3.  每当您生成一个新 url 时，请查看其哈希码位是否已设置。如果是，则丢弃该 url 并生成一个新的。重复这个过程，直到你得到一个未使用的。

这样您就可以永远避免使用 DB，查找速度非常快，并且占用的内存最少。

[我从这个地方](http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps/)借来的想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:27:16.277

一个折中的解决方案是生成一个随机id，如果已经在数据库中，就找第一个比它大的空id。（如果在上述范围内找不到任何空白区域，请绕行。）

如果您不希望 id 不可猜测（如果您只使用 4 个字符，则可能不会），这种方法可以正常工作并且速度很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T15:43:56.543

一种算法是尝试几次找到N个字符的空闲url，如果仍然没有找到，则增加N。从N = 4开始。

# java - 将 long 解析为具有格式的 Date 对象

> ID：10227773
> 
> 赞同：1
> 
> 时间：2012-04-19T12:11:39.180
> 
> 标签：java

我正在尝试做一个函数，它将长毫秒值解析为具有格式的 Date 对象：

```
public static Date parseDate(long millisec, String format) {
    try {
        SimpleDateFormat formatter = new SimpleDateFormat(format);
        Date formattedDate = new Date(millisec);
        formatter.format(formattedDate);
        return formattedDate;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;    
} 
```

我插入函数的格式是这样的：“ `dd-MM-yyyy HH-mm:ss`”我仍然得到这个结果格式：“ `Thu Apr 19 19:51:22 SGT 2012`”

任何想法为什么我会得到这种结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:15:48.090

该格式仅在您输出日期时应用（实际上它用于将日期转换为字符串）。它不会改变日期的内部表示。

在您的情况下，该`formattedDate`对象不会以任何方式受到`format`.

查看字符串表示的一种方法是：

```
String dateString = formatter.format(formattedDate);
System.out.println(dateString); 
```

这就像一个数字的基础。您对数字有许多不同的可视化，例如`101(2)`or `5(10)`，但它们仅在显示数字时才有意义。否则，当您更改基数时，数字本身的值不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:10:37.763

您正在返回一个日期对象，但您需要的是从使用毫秒值创建的创建日期对象返回的格式化日期字符串。

String dateStr = formatter.format(formattedDate); 返回日期Str;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:15:52.243

您返回您的初始日期...改为：

```
return formatter.format(formattedDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:13:52.487

您的问题是`formatter.format(...)`返回 a `String`，这是您应该在函数中返回的内容（您实际上返回了`Date`实例）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T12:14:16.487

This line:

```
formatter.format(formattedDate); 
```

Returns a String (the formatted date). What you return is the Date object (which in itself has no formatting). You should return the String that is returned from the formatter.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T12:14:46.050

You are returning an object of Date. Date is a abstract representation of a point in time, without any information about formatting. You need to return the String you get from the formatter - that is a formatted representation of time (but on the other hand contains no information about the time - you would have to parse it back to get the Date object it represents).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T12:14:46.140

A `Date` has no formatting of its own, it's the `SimpleDateFormat` that does the formatting.

When you call `formatter.format(formattedDate)` it's returning you a `String` which is formatted, but you're ignoring the returned value.

# django - 如何使用 unicode 查询？

> ID：10227774
> 
> 赞同：1
> 
> 时间：2012-04-19T12:11:39.267
> 
> 标签：django, django-queryset

我有这个：

```
letter = None

if request.method == 'GET':
    if 'letter' in request.GET:
        letter = request.GET['letter']

if letter is not None:
    items = MyModel.objects.filter(title__istartswith=letter) 
```

但是对于像 'Ą'、'Ć' 等字符，QuerySet 返回的结果与 'A'、'C' 等一样。

我该怎么做才能工作？

# asp.net-mvc-3 - 为什么@Html.Label() 删除一些字符

> ID：10227775
> 
> 赞同：10
> 
> 时间：2012-04-19T12:11:40.617
> 
> 标签：asp.net-mvc-3, razor

当我在剃刀视图中使用以下代码时，它会渲染`<label for=""> someText</label>`而不是渲染，`<label for="">1\. someText</label>`但我无法弄清楚为什么`1.`在渲染时会被删除。

```
@Html.Label(String.Format("{0}. someText",1)) 
```

编辑：以下代码`<label for="">1# someText</label>`按预期呈现。

```
@Html.Label(String.Format("{0}# someText",1)) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T12:22:18.963

您正在滥用[Html.Label](http://msdn.microsoft.com/en-us/library/gg453833%28v=vs.98%29.aspx)方法。那是为了：

> 返回一个 HTML 标签元素和 由指定表达式表示**的属性的属性名称。**

这就是为什么如果您`.`在第一个参数中有一个点会感到困惑，因为它需要一个属性表达式。

但是，您可以使用第二个重载：

```
@Html.Label("", String.Format("{0}. someText",1)) 
```

或者直接写出 HTML：

```
<label>@String.Format("{0}. someText", 1)</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T09:00:12.707

您可以避免使用“Html Helper's label”并直接使用 html“label”并放置您想要正确显示的任何内容。它还可以节省一些时间；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:31:25.950

您使用的语法是错误的，或者我们可以说这不是通过 RAZOR 语法使用属性的方法。您可以使用它，这可能对您有帮助。

**

```
 @Html.LabelFor(model => model.PropertyName, 
       String.Format("{0}. " + @Model.PropertyName.ToString() + ",1)) 
```

**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-22T21:21:41.370

我将它用于包含双精度（纬度/经度）的数据表，并看到了同样的问题。感谢您的提示（我不允许发表评论）。

对我来说，问题已经解决了..

```
@foreach (var cell in item.ItemArray)
{
  <td>
     @Html.Label("",cell.ToString().Trim())
  </td>
 } 
```

# java - 使用 Java iText API 将 SWT 图像导出为 PDF

> ID：10227778
> 
> 赞同：1
> 
> 时间：2012-04-19T12:12:16.287
> 
> 标签：java, pdf, itext

我有一个 SWT 图像，我想使用 iText API 将此图像导出为 pdf 文件。我尝试将此图像保存在磁盘上，然后使用图像的路径将其导出为 pdf，这需要大量时间来生成 pdf。我也尝试过将 SWT 图像转换为 AWT 图像，然后将其导出为 pdf，这种方法需要更多时间来生成 pdf。我一直在尝试的另一种方法是使用 ImageLoader 对象将图像的原始数据转换为 jpeg byteArrayOutputStream，如下所示：

```
ImageLoader tempLoader = new ImageLoader();
tempLoader.data = new ImageData[] {
    image.getImageData()                    
};
ByteArrayOutputStream bos = new ByteArrayOutputStream();
tempLoader.save(bos, SWT.IMAGE_JPEG); 
```

现在我使用这个 ByteArrayOutputStream 作为输入

```
OutputStream outStream = new FileOutputStream(selectedPathAndName);
Document document = new Document();    
document.setMargins(0,0,0,0);
document.setPageSize(new Rectangle(0,0,width,height));
PdfWriter.getInstance(document, outStream);
document.open(); 
com.itextpdf.text.Image pdfImage = com.itextpdf.text.Image.getInstance(bos.toByteArray());
document.add(pdfImage); 
document.close(); 
```

这会生成具有我设置的宽度和高度的 pdf 文件，但页面似乎是空的。任何建议或任何其他方法都是最受欢迎的。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:57:09.563

看起来您的页面大小为零，请尝试在构造函数中将它们设置为**A4**之类的东西。

`Document document = new Document(PageSize.A4, 50, 50, 50, 50);`

# sql - SQL 给出错误的结果

> ID：10227779
> 
> 赞同：2
> 
> 时间：2012-04-19T12:12:19.447
> 
> 标签：sql, sql-server, sql-server-2008

我只是在回答一个[问题](https://stackoverflow.com/questions/10226900/sql-calculation-not-showing-in-correct-format)

所以我尝试自己计算并检查结果。但我得到的结果总是一个四舍五入的值。为什么 ？？

其实我应该得到**0.1428** ......

![在此处输入图像描述](../Images/d75e6a423de010a9cb800d2f55564ea9.png)

**@每个回答的人**：谢谢大家，根据SO规则我只能接受一个答案，所以接受最早的一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:14:07.137

试试看

```
select 2.0 / 14 
```

如果你使用整数，结果也将是整数。整数不是浮点数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:14:38.780

You are doing [integer division](http://mathworld.wolfram.com/IntegerDivision.html).

At least one of the operands needs to be a float/decimal in order for the whole expression to evaluate to one of those types.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T12:14:42.440

Try this:

```
declare @a float
set @a = 2.0/14.0
select a=@a 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T12:15:02.877

`SELECT 2.0/14`

Need to decimal place to "trigger" the floating point

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-19T12:14:09.290

整数除法的结果`2/14`始终为 0。

试试`2.0/14.0`吧。

# mysql - MySQL遇到特殊字符时不存储一些数据

> ID：10227784
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:12:44.867
> 
> 标签：mysql, special-characters

我有一个用户上传文件的网站，我将它们解析为不同的数组，然后将它们存储在 MySQL 数据库中。问题是一些特殊字符——例如 ø 或其他来自法语的字符——导致序列化数组不能作为一个整体存储。

例如，如果数组是`AAAAAAAAAAAAAøbbbbbbbbbbbbbccccccccccc`，我将进入`AAAAAAAAAAAAA`数据库。其余的将丢失。在我上传序列化数组之前，我`mysql_real_escape_string`先。魔术引号已关闭，并且字符串存储在具有排序规则的数据库中的`Longtext`字段中。`utf8_unicode_ci``utf8_unicode_ci collation`

这是导入字符串的代码：

```
mysql_query("   INSERT INTO logs(uploaderid,date,randomstring,array1,array2,
  array3,array4)
    VALUES(
        '".$_SESSION['id']."',
        NOW(),
        '".mysql_real_escape_string($stringvalue)."',
        '".mysql_real_escape_string(serialize($array1))."',
        '".mysql_real_escape_string(serialize($array2))."',
        '".mysql_real_escape_string(serialize($array3))."',
        '".mysql_real_escape_string(serialize($array4))."'  
    )"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-20T12:35:07.040

最后，我所做的“修复”（不是我想要的方式，但它有效）问题是我将字段从 更改`LONGTEXT`为`LONGBLOBS`.

现在没有附加到数据的排序规则，一切似乎都正常。当然，不利的一面是，我看不到数据库中的数据，因为现在一切都是二进制的，但正如我之前所说，它可以工作！

# django - 向其他APP的管理界面添加对象级别权限（例如auth）

> ID：10227787
> 
> 赞同：1
> 
> 时间：2012-04-19T12:12:56.763
> 
> 标签：django, django-admin

我使用 django-guardian 获取对象级权限。如何将其集成到自己的代码中的文档很好： [http ://packages.python.org/django-guardian/userguide/admin-integration.html](http://packages.python.org/django-guardian/userguide/admin-integration.html)

但是我怎样才能将它添加到其他应用程序的模型中呢？我不想修改例如django.contrib.auth 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:09:44.693

我在 django-reversion 的源代码中找到了解决方案。有一个助手叫做`patch_admin()`. 这是为 django-guardian 修改的代码片段。

```
# Copy of django-reversion helpers.py
def patch_admin(model, admin_site=None):
    """
    Enables version control with full admin integration for a model that has
    already been registered with the django admin site.

    This is excellent for adding version control to existing Django contrib
    applications. 
    """
    admin_site = admin_site or admin.site
    try:
        ModelAdmin = admin_site._registry[model].__class__
    except KeyError:
        raise NotRegistered, "The model %r has not been registered with the admin site." % model
    # Unregister existing admin class.
    admin_site.unregister(model)
    # Register patched admin class.
    class PatchedModelAdmin(GuardedModelAdmin, VersionAdmin, ModelAdmin): # Remove VersionAdmin, if you don't use reversion.
        pass
    admin_site.register(model, PatchedModelAdmin)

from django.contrib.auth.models import Group
patch_admin(Group) 
```

# jquery - 需要增加我从 jQuery datepicker 获得的日期的年份

> ID：10227793
> 
> 赞同：0
> 
> 时间：2012-04-19T12:13:17.050
> 
> 标签：jquery, datepicker

我`mm/dd/yy`从日期选择器获取格式，现在我需要在 a 中显示日期，`div`但在将年份增加 1 之后。例如`04/12/2012`，这是我从 datepicker 中选择的内容，现在我需要将年份部分，即 2012 年增加到 2013 年，并使用 javascript 将其显示给另一个 div。

需要帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:14:34.307

```
 var d = new Date(my_date);
    var next_year = d.getFullYear()+1;
    d.setFullYear(next_year); 
```

会让你和明年约会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:30:00.693

像这样的东西应该工作：

```
var d = new Date(*dateString*);
d.setDate(d.getDate() + 365); 
```

# c - 试图在c中打印一行文本文件

> ID：10227796
> 
> 赞同：1
> 
> 时间：2012-04-19T12:13:28.090
> 
> 标签：c, printf, text-files

我正在尝试从文本文件中打印一行，然后转到下一行并打印，直到没有更多行可打印。这是我到目前为止所拥有的，但它仅在我第一次运行该程序时才有效。

```
void ReadFile(FILE *a)
{
    char line[23];
    while(fgets(line, 22, a) != NULL)
    {
        printf("%s", line);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T12:16:02.470

如果您想对同一个对象多次执行此操作，则需要将*文件指针重置回起点：*`FILE`

```
void ReadFile(FILE *a)
{
    char line[23];
    rewind(a);
    while(fgets(line, 22, a) != NULL)
    {
        printf("%s\n", line);    // Added new line
    }
} 
```

[参考](http://linux.die.net/man/3/rewind)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:16:20.573

你没有`rewind(a)`ing 文件，所以函数的每次迭代都从上次`fgets`离开它的地方开始（EOF，在你的情况下）。

# scons - SCONS 中 C 和 C++ 编译的编译器开关的区别

> ID：10227798
> 
> 赞同：4
> 
> 时间：2012-04-19T12:13:35.420
> 
> 标签：scons

有没有简单的方法。由于各种原因，我们的构建要求我们将不同的 -D 开关传递给我们的 C++ 和 C 编译（或构建中断的位）。scons 似乎给人的印象是您将始终使用相同的开关（只有 CPPDEFS 和 CPPINCLUDES）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:31:58.607

除了使用`CPPDEFINES`SCons`'-D'`以可移植方式为其添加的构造变量之外，您还可以将定义放入`CFLAGS`（仅 c）和`CXXFLAGS`（仅 c++）中。不过，您必须`'-D'`手动添加。

构造`CCFLAGS`变量适用于 c 和 c++ 编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:48:04.007

您还可以为 C 编译创建一个环境，为 C++ 编译创建另一个环境。然后每个环境将具有适当的标志。

# mysql - mysql搜索匹配

> ID：10227801
> 
> 赞同：-2
> 
> 时间：2012-04-19T12:13:43.947
> 
> 标签：mysql

请检查我的下表结构...

```
| id  | r_num   |
+-----+---------+
| 9   | 2011/9  |
+-----+---------+
| 10  | 2012/2  |
+-----+---------+ 
```

并且想要获取给定年份的所有行，我尝试了以下查询......

```
SELECT * from tblr WHERE r_num = 2011; 
```

但是上面的查询没有给出预期的结果，我应该使用 LIKE 还是达到预期结果的最佳方法。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:15:34.973

```
SELECT * from tblr WHERE r_num like '2011%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:15:27.917

这将适用于您的情况-

```
SELECT * from tblr WHERE r_num like '2011/%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:17:25.310

如果您的 r_num 是日期时间类型：

```
SELECT * FROM tblr WHERE r_num >= '2011' AND r_num < '2012'; 
```

别的

```
SELECT * FROM tblr WHERE r_num LIKE '2011%'; 
```

这是一个基本问题，您可以在 mysql 网站上找到许多文档：http: [//dev.mysql.com/doc/refman/5.5/en/select.html](http://dev.mysql.com/doc/refman/5.5/en/select.html)

# c++ - 基类和派生类的友元函数

> ID：10227802
> 
> 赞同：2
> 
> 时间：2012-04-19T12:13:43.877
> 
> 标签：c++, class, friend

我有一个基类 Fraction 和一个派生类 iFraction。Fraction 代表假分数，iFraction 代表混合分数。

```
class Fraction {...};
class iFraction : public Fraction {...}; 
```

现在，我要声明这两个类的友元函数，即convertF。函数 convertF 可以将假分数（Fraction）转换为混合分数（iFraction）。我这样做有多冷？实际上，我想像这样声明函数：

```
friend iFraction convertF (Fraction &Fra); 
```

但是，它不能在基本类 Fraction 中声明。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:16:48.820

由于`friend`关系不是继承的，因此您需要声明`convertF`为两个类的朋友。但是只有当函数需要访问这些类的内部时才需要这个——你确定类的公共接口不够用吗？

试图避免这种双重朋友的另一个原因是它会通过`convertF`.

**更新：**这就是为什么你不能像上面显示的那样声明你的朋友函数的原因。为此，编译器需要知道 while 的完整定义，`iFraction`而它还没有完成基类的定义`Fraction`，这是不可能的。

从技术上讲，它可以通过向前声明`iFraction`. 尽管我仍然认为它不是一个好的解决方案。你确定你的类层次结构是正确的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:17:01.963

为此，您不需要朋友功能。有两种方法可以使用 dynamic_cast 或编写一个转换构造函数，该构造函数接受一个 Fraction 对象并将其转换为 iFraction 对象。我不太确定第二种选择是否是一个好的选择，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:20:45.637

阅读：[http ://www.cprogramming.com/tutorial/friends.html](http://www.cprogramming.com/tutorial/friends.html)

始终尝试首先理解这个概念。

# string - c ++ c_str在字符串末尾添加奇怪的字符

> ID：10227806
> 
> 赞同：2
> 
> 时间：2012-04-19T12:13:51.387
> 
> 标签：string, char, character, c-str

首先让我感谢您花时间阅读本文。

我正在尝试用 C++ 读取文件。目前我有一种方法允许用户在资源管理器中选择一个文件并将其作为“std::string”返回。然后我必须打开这个文件，但我为此使用的方法使用 const char*。因此，我需要从一种转换为另一种。

如果 Windows 中有一种简单的方法可以使用字符串读取文件，那么请告诉我，因为它可以解决我的整个问题。

当我使用 str.c_str() 从字符串转换为 const char* 时，最后会得到很多奇怪的字符。我已经研究了具有相同问题的其他主题，但是对于这些项目，答案似乎都非常具体，或者说只是坚持使用 sting/vector。显然我很乐意这样做，但我没有使用字符串/向量打开文件的方法。

任何帮助表示赞赏:) 发生这种情况的代码和输出粘贴在下面。

****来源***

```
std::string f;

               if (LOWORD(wParam) == 1) {

                       f = openFile();

                       char *fchar = new char[f.size()+1]; // +1 to account for \0 byte

                       //char *fchar = std::vector[1];

                       std::strncpy(fchar, f.c_str(), f.size());

                       file1 = fchar;

                       std::cout<<"string size: " << f.size() << std::endl;
                       std::cout<<"string: " << f << std::endl;
                       std::cout<<"fchar: " << fchar << std::endl;
                       std::cout<<"file1: " << file1 << std::endl;
               } 
```

**输出**

```
 string size: 33
 string: C:\Users\Joseph\Pictures\back_raw
 fchar: C:\Users\Joseph\Pictures\back_raw═²²²²½½½½½½½½¯■
 file1: C:\Users\Joseph\Pictures\back_raw═²²²²½½½½½½½½¯■** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:17:54.903

`std::strncpy()`不在字符串末尾放置 `\0' 字符。请参阅[http://www.cplusplus.com/reference/clibrary/cstring/strncpy/](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)。您还需要复制它：

`std::strncpy(fchar, f.c_str(), f.size() + 1);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:18:23.690

file1 在哪里声明？那么 openFile 呢？（想知道它的返回类型）

您可以尝试手动输入 '\0' 吗？恕我直言，您的 char* 最后只是缺少 \0 ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T21:44:31.723

确保你把 a`\0`放在最后，无论你需要什么。

# javascript - How to recover an active div

> ID：10227820
> 
> 赞同：0
> 
> 时间：2012-04-19T12:14:14.147
> 
> 标签：javascript, jquery

I try to use the jquery flip to display information on an div flip.

[JSFIDDLE](http://jsfiddle.net/AdaKR/)

I have a first div called "workListId", under a second div called "workId". Under the div workId, two another div called "workDataId" and "workFlipId". Under the div workDataId, two another div called "workDescriptionId" and "workURLId"

I have a problem with the div workDescriptionID. If I flip the div in the order, I see the description in order too. But if Iflip the third div(for example), I see the description of the first div.

I think the problem is about this line but I don't know to resolve it :

```
elt.html($('.workData').html()); 
```

So see my code below :

```
$(function(){

  // A - CONSTRUCT THE DIV
  for ( var i in works ){

    // work div
    $('<div/>', {
      'id' : 'workId' + i,
      'class' : 'work'
    }).appendTo("#workListId");
    // workFlip div
    $('<div/>', {
      'id' : 'workFlipId' + i,
      'class' : 'workFlip'
    }).appendTo("#workId" + i);

    // workData div
    $('<div/>', {
      'id' : 'workDataId' + i,
      'class' : 'workData'
    }).appendTo("#workId" + i);

    // workDescription div
    $('<div/>', {
      'id' : 'workDescriptionId' + i,
      'class' : 'workDescription'
    }).appendTo("#workDataId" + i);

    // workURL div
    $('<div/>', {
      'id' : 'workURLId' + i,
      'class' : 'workURL'
    }).appendTo("#workDataId" + i);

    // Insert the content in each div  
    $("#workFlipId" + i).html(path.pathBegin + works[i].image + path.pathEnd);
    $("#workDescriptionId" + i).html('<p>' + works[i].description + '</p>');
    $("#workURLId" + i).html('<a href="' + works[i].website + '">Read more...</a>');

  }//End for

  // B - CONSTRUCT THE DIV FLIP

  /* The code is executed once the DOM is loaded */
  $('.work').bind("click",function(){

    // $(this) point to the clicked .workFlip element (caching it in elem for speed):
    var elt = $(this);

    // data('flipped') is a flag we set when we flip the element:
    if(elt.data('flipped'))
    {
      // If the element has already been flipped, use the revertFlip method
      // defined by the plug-in to revert to the default state automatically:
      elt.revertFlip();

      // Setting the flag:
      elt.data('flipped',true);
    }// End if
    else
    {
      // Using the flip method defined by the plugin:
      elt.flip({
        direction: params.direction,
        color: params.color,
        speed: params.speed,
        onBefore: function(){
          // Insert the contents of the .workData div (hidden from view with display:none)
          // into the clicked .workFlip div before the flipping animation starts:
          elt.html($('.workFlip').siblings('.workData').html());

        }
      });// End $this.flip

      // Setting the flag:
      elt.data('flipped',true);
    }// End else
  });// End function work

});// End function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:35:29.377

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.16.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        eval(function (p, a, c, k, e, r) { e = function (c) { return (c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36)) }; if (!''.replace(/^/, String)) { while (c--) r[e(c)] = k[c] || e(c); k = [function (e) { return r[e] } ]; e = function () { return '\\w+' }; c = 1 }; while (c--) if (k[c]) p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c]); return p } ('(5($){5 H(a){a.1D.1f[a.1E]=1F(a.1G,10)+a.1H}6 j=5(a){1I({1J:"1g.Z.1K 1L 1M",1N:a})};6 k=5(){7(/*@1O!@*/11&&(1P 1Q.1h.1f.1R==="1S"))};6 l={1T:[0,4,4],1U:[1i,4,4],1V:[1j,1j,1W],1X:[0,0,0],1Y:[0,0,4],1Z:[1k,1l,1l],20:[0,4,4],21:[0,0,A],22:[0,A,A],23:[12,12,12],24:[0,13,0],26:[27,28,1m],29:[A,0,A],2a:[2b,1m,2c],2d:[4,1n,0],2e:[2f,2g,2h],2i:[A,0,0],2j:[2k,2l,2m],2n:[2o,0,R],2p:[4,0,4],2q:[4,2r,0],2s:[0,t,0],2t:[2u,0,2v],2w:[1i,1o,1n],2x:[2y,2z,1o],2A:[1p,4,4],2B:[1q,2C,1q],2D:[R,R,R],2E:[4,2F,2G],2H:[4,4,1p],2I:[0,4,0],2J:[4,0,4],2K:[t,0,0],2L:[0,0,t],2M:[t,t,0],2N:[4,1k,0],2O:[4,S,2P],2Q:[t,0,t],2R:[t,0,t],2S:[4,0,0],2T:[S,S,S],2U:[4,4,4],2V:[4,4,0],9:[4,4,4]};6 m=5(a){T(a&&a.1r("#")==-1&&a.1r("(")==-1){7"2W("+l[a].2X()+")"}2Y{7 a}};$.2Z($.30.31,{u:H,v:H,w:H,x:H});$.1s.32=5(){7 U.1t(5(){6 a=$(U);a.Z(a.B(\'1u\'))})};$.1s.Z=5(i){7 U.1t(5(){6 c=$(U),3,$8,C,14,15,16=k();T(c.B(\'V\')){7 11}6 e={I:(5(a){33(a){W"X":7"Y";W"Y":7"X";W"17":7"18";W"18":7"17";34:7"Y"}})(i.I),y:m(i.D)||"#E",D:m(i.y)||c.z("19-D"),1v:c.J(),F:i.F||1w,K:i.K||5(){},L:i.L||5(){},M:i.M||5(){}};c.B(\'1u\',e).B(\'V\',1).B(\'35\',e);3={s:c.s(),n:c.n(),y:m(i.y)||c.z("19-D"),1x:c.z("36-37")||"38",I:i.I||"X",G:m(i.D)||"#E",F:i.F||1w,o:c.1y().o,p:c.1y().p,1z:i.1v||39,9:"9",1a:i.1a||11,K:i.K||5(){},L:i.L||5(){},M:i.M||5(){}};16&&(3.9="#3a");$8=c.z("1b","3b").8(3c).B(\'V\',1).3d("1h").J("").z({1b:"1A",3e:"3f",p:3.p,o:3.o,3g:0,3h:3i});6 f=5(){7{1B:3.9,1x:0,3j:0,u:0,w:0,x:0,v:0,N:3.9,O:3.9,P:3.9,Q:3.9,19:"3k",3l:\'3m\',n:0,s:0}};6 g=5(){6 a=(3.n/13)*25;6 b=f();b.s=3.s;7{"q":b,"1c":{u:0,w:a,x:a,v:0,N:\'#E\',O:\'#E\',o:(3.o+(3.n/2)),p:(3.p-a)},"r":{v:0,u:0,w:0,x:0,N:3.9,O:3.9,o:3.o,p:3.p}}};6 h=5(){6 a=(3.n/13)*25;6 b=f();b.n=3.n;7{"q":b,"1c":{u:a,w:0,x:0,v:a,P:\'#E\',Q:\'#E\',o:3.o-a,p:3.p+(3.s/2)},"r":{u:0,w:0,x:0,v:0,P:3.9,Q:3.9,o:3.o,p:3.p}}};14={"X":5(){6 d=g();d.q.u=3.n;d.q.N=3.y;d.r.v=3.n;d.r.O=3.G;7 d},"Y":5(){6 d=g();d.q.v=3.n;d.q.O=3.y;d.r.u=3.n;d.r.N=3.G;7 d},"17":5(){6 d=h();d.q.w=3.s;d.q.P=3.y;d.r.x=3.s;d.r.Q=3.G;7 d},"18":5(){6 d=h();d.q.x=3.s;d.q.Q=3.y;d.r.w=3.s;d.r.P=3.G;7 d}};C=14[3.I]();16&&(C.q.3n="3o(D="+3.9+")");15=5(){6 a=3.1z;7 a&&a.1g?a.J():a};$8.1d(5(){3.K($8,c);$8.J(\'\').z(C.q);$8.1e()});$8.1C(C.1c,3.F);$8.1d(5(){3.M($8,c);$8.1e()});$8.1C(C.r,3.F);$8.1d(5(){T(!3.1a){c.z({1B:3.G})}c.z({1b:"1A"});6 a=15();T(a){c.J(a)}$8.3p();3.L($8,c);c.3q(\'V\');$8.1e()})})}})(3r);', 62, 214, '|||flipObj|255|function|var|return|clone|transparent||||||||||||||height|top|left|start|second|width|128|borderTopWidth|borderBottomWidth|borderLeftWidth|borderRightWidth|bgColor|css|139|data|dirOption|color|999|speed|toColor|int_prop|direction|html|onBefore|onEnd|onAnimation|borderTopColor|borderBottomColor|borderLeftColor|borderRightColor|211|192|if|this|flipLock|case|tb|bt|flip||false|169|100|dirOptions|newContent|ie6|lr|rl|background|dontChangeColor|visibility|first|queue|dequeue|style|jquery|body|240|245|165|42|107|140|230|224|144|indexOf|fn|each|flipRevertedSettings|content|500|fontSize|offset|target|visible|backgroundColor|animate|elem|prop|parseInt|now|unit|throw|name|js|plugin|error|message|cc_on|typeof|document|maxHeight|undefined|aqua|azure|beige|220|black|blue|brown|cyan|darkblue|darkcyan|darkgrey|darkgreen||darkkhaki|189|183|darkmagenta|darkolivegreen|85|47|darkorange|darkorchid|153|50|204|darkred|darksalmon|233|150|122|darkviolet|148|fuchsia|gold|215|green|indigo|75|130|khaki|lightblue|173|216|lightcyan|lightgreen|238|lightgrey|lightpink|182|193|lightyellow|lime|magenta|maroon|navy|olive|orange|pink|203|purple|violet|red|silver|white|yellow|rgb|toString|else|extend|fx|step|revertFlip|switch|default|flipSettings|font|size|12px|null|123456|hidden|true|appendTo|position|absolute|margin|zIndex|9999|lineHeight|none|borderStyle|solid|filter|chroma|remove|removeData|jQuery'.split('|'), 0, {}))

        $(document).ready(function () {
            //******************* SETTING THE FLIP ********************//
            // direction : Set the direction of the flipped div
            //          lr : Left to right
            //          rl : Right to left
            //          tb : Top to bottom
            //          bt : Bottom to top
            //
            // color : Set the color of your div
            // speed : Set the time speed to flip (default : 300)
            //*********************************************************//
            var params = {
                direction: 'lr',
                color: 'black',
                speed: 220
            };

            //******************* SETTING THE WORKS ********************//
            // title : Set the title of your work
            // image : Set the image of your work
            // description : Set the description of your work
            // website : Set the link of your work or your full size image
            //
            // How to create many works ?
            // Simply copy and paste the lines : " title1 : { ... }, "
            // after your last works and complete the setting.
            //*********************************************************//
            var works = {
                title1: {
                    image: 'facebook.png',
                    description: 'Description One.',
                    website: 'http://www.facebook.com'
                }, // End title1
                title2: {
                    image: 'google.png',
                    description: 'Description Two.',
                    website: 'http://www.google.com'
                }, // End title2
                title3: {
                    image: 'adobe.png',
                    description: 'Description Three.',
                    website: 'http://www.adobe.com'
                }// End title3

            }; // End var works

            //******************* SETTING THE PATH OF WORKS ************//
            // pathBegin : Set the path of your works
            // pathEnd : DOES NOT CHANGE
            //*********************************************************//
            var path = {
                pathBegin: '<img src="img/works/',
                pathEnd: '"/>'
            };

            // A - CONSTRUCT THE DIV
            $.each(works, function (i, work) {

                // work div
                $('<div/>', {
                    'id': 'workId' + i,
                    'class': 'work'
                }).appendTo("#workListId");
                // workFlip div
                $('<div/>', {
                    'id': 'workFlipId' + i,
                    'class': 'workFlip'
                }).appendTo("#workId" + i);

                // workData div
                $('<div/>', {
                    'id': 'workDataId' + i,
                    'class': 'workData'
                }).appendTo("#workId" + i);

                // workDescription div
                $('<div/>', {
                    'id': 'workDescriptionId' + i,
                    'class': 'workDescription'
                }).appendTo("#workDataId" + i);

                // workURL div
                $('<div/>', {
                    'id': 'workURLId' + i,
                    'class': 'workURL'
                }).appendTo("#workDataId" + i);

                // Insert the content in each div    

                $("#workFlipId" + i).html(path.pathBegin + work.image + path.pathEnd);
                $("#workDescriptionId" + i).html('<p>' + work.description + '</p>');
                $("#workURLId" + i).html('<a href="' + work.website + '">Read more...</a>');

            });    //End foreach

            // B - CONSTRUCT THE DIV FLIP

            /* The code is executed once the DOM is loaded */
            $('.work').bind("click", function () {

                // $(this) point to the clicked .workFlip element (caching it in elem for speed):
                var elt = $(this);

                // data('flipped') is a flag we set when we flip the element:
                if (elt.data('flipped')) {
                    // If the element has already been flipped, use the revertFlip method
                    // defined by the plug-in to revert to the default state automatically:
                    elt.revertFlip();

                    // Unsetting the flag:
                    elt.data('flipped', true);
                } // End if
                else {
                    // Using the flip method defined by the plugin:
                    elt.flip({
                        direction: params.direction,
                        color: params.color,
                        speed: params.speed,
                        onBefore: function () {
                            // Insert the contents of the .workData div (hidden from view with display:none)
                            // into the clicked .workFlip div before the flipping animation starts:

                            //elt.html($('.workFlip').siblings('.workData').html());  //This Code Will Take only first div workDescription only.

                            elt.html(elt.find('.workFlip').siblings('.workData').html());

                        }
                    }); // End elt.flip

                    // Setting the flag:
                    elt.data('flipped', true);
                } // End else
            }); // End function work
        });
    </script>
    <style type="text/css">
        *
        {
            /* Resetting the default styles of the page */
            margin: 0;
            padding: 0;
        }

        body
        {
            /* Setting default text color, background and a font stack */
            font-size: 0.825em;
            color: white;
            background-color: #fff;
            font-family: Arial, Helvetica, sans-serif;
        }

        .workList
        {
            position: relative;
            margin: 30px auto;
            width: 950px;
        }

        .work
        {
            width: 180px;
            height: 180px;
            float: left;
            margin: 5px; /* Giving the work div a relative positioning: */
            position: relative;
            cursor: pointer;
        }

        .workFlip
        {
            /*  The work div will be positioned absolutely with respect
        to its parent .work div and fill it in entirely */
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            border: 1px solid #ddd;
            background: url("../img/background.jpg") no-repeat center center #f9f9f9;
        }

        .workFlip:hover
        {
            border: 1px solid #999; /* CSS3 inset shadow: */
            -moz-box-shadow: 0 0 30px #999 inset;
            -webkit-box-shadow: 0 0 30px #999 inset;
            box-shadow: 0 0 30px #999 inset;
        }

        .workFlip img
        {
            /* Centering the logo image in the middle of the workFlip div */
            position: absolute;
            top: 50%;
            left: 50%;
            margin: -70px 0 0 -70px;
        }

        .workData
        {
            /* Hiding the .workData div */
            display: none;
        }

        .workDescription
        {
            font-size: 11px;
            padding: 30px 10px 20px 20px;
            font-style: italic;
        }

        .workURL
        {
            font-size: 10px;
            font-weight: bold;
            padding-left: 20px;
        }

        /* The styles below are only necessary for the styling of the demo page: */

        #main
        {
            position: relative;
            margin: 0 auto;
            width: 100%;
        }

        h1
        {
            padding: 30px 0;
            text-align: center;
            text-shadow: 0 1px 1px white;
            margin-bottom: 30px;
            background: url("../img/page_bg.gif") repeat-x bottom #f8f8f8;
        }

        h1, h2
        {
            font-family: "Myriad Pro" ,Arial,Helvetica,sans-serif;
        }

        h2
        {
            font-size: 14px;
            font-weight: normal;
            text-align: center;
            position: absolute;
            right: 40px;
            top: 40px;
        }

        a, a:visited
        {
            color: #0196e3;
            text-decoration: none;
            outline: none;
        }

        a:hover
        {
            text-decoration: underline;
        }

        a img
        {
            border: none;
        }
    </style>
</head>
<body>
    <header></header>
    <nav></nav>
    <!-- BEGIN CONTENT -->
    <div id="main">
        <!-- Content of portfolio -->
        <div id="workListId" class="workList">
        </div>
    </div>
    <!-- End div id main -->
    <!-- END CONTENT -->
    <footer></footer>
</body>
</html> 
```

# javascript - Css子选择器：first-child，但选择目标选择器中的所有子代

> ID：10227827
> 
> 赞同：0
> 
> 时间：2012-04-19T12:14:33.180
> 
> 标签：javascript, html, css, superfish

不知道标题是不是有点模糊，

但是，假设你有..

```
.topactive a:focus, .topactive a:hover, 
.sf-menu a:active:first-child, .sf-menu li.sfHover:first-child {
} 
```

并在您的 html 中查看：

所有 ul 和 li 类声明；

```
<ul class="sf-menu">
<li class="current">
<p class="topactive"><a href="#a">About Us</a></p>
        <ul class="menu2"><li>submenu</li></ul></li>
    <li>something</li>
        <ul><li>submenu</li></ul>
</ul> 
```

我需要它只针对最左边的 li。

css 是否只选择“示例”，就像在我当前的代码中一样，我不能只明确选择第一级 ul，它只选择 ul 的第一个实例。

我希望这是有道理的，对于任何歧义，我深表歉意，并感谢那些在我的其他问题上提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:20:36.757

要仅选择最顶层的第一级子级，`ul`您需要某种方式来显式引用祖先以及与所述祖先的距离。我建议使用`id`：

```
#idOfTopMostUL > li {
    /* CSS for the first-level li-elements */
}
#idOfTopMostUL ul li {
    /* CSS for other li elements, that are children of ul elements within the ul */
} 
```

这将需要 HTML，例如：

```
<ul id="idOfTopMostUL">
    <li>example
        <ul><li>submenu</li></ul></li>
    <li>something
        <ul><li>submenu</li></ul></li>
</ul> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rTQSb/)。

请注意，我已经更正了您的 HTML（a`ul`不能是另一个`ul`（或`ol`）的直接子代）。

如果您不想或不能给您`ul`的 an`id`您可以引用之外的另一个祖先`ul`（因为第一级`li`元素将比嵌套`li`的元素更接近该祖先）：

```
<div id="parentDiv">
    <ul>
        <li>example
            <ul><li>submenu</li></ul></li>
        <li>something
            <ul><li>submenu</li></ul></li>
    </ul>
</div> 
```

和 CSS：

```
#parentDiv > ul > li {
    /* CSS for the first-level li-elements */
}
#parentDiv ul ul li,
#parentDiv ul li ul li {
    /* CSS for other li elements, that are children of ul elements within the ul */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rTQSb/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:19:42.557

您展示的特定 CSS 没有在您展示给我们的 HTML 中选择任何内容。前两个规则都需要`.topactive`，并且在您的 HTML 中不存在。接下来的两个规则都需要`.sf-menu`，并且也不存在于您的 HTML 中。

如果您只需要对象的第一级子级，`>`请在规则中使用直接子级指示符。

在您实际向我们展示的 HTML 中，您可以使用此 CSS 选择顶级 ul 的所有第一级 li 元素：

```
body > ul > li 
```

但是，在现实世界中，您可能会使用类或 id 指定顶级 ul 对象并执行以下操作：

```
#myTop > li 
```

或者

```
.myTop > li 
```

您将`myTop`类或 id 放在顶级`UL`元素上的位置。

# c# - How to set start parameters and different credentials for multiple instance in windows service installer?

> ID：10227835
> 
> 赞同：0
> 
> 时间：2012-04-19T12:14:48.400
> 
> 标签：c#, .net, service, windows-services, installation

I write a windows service and a installer project using C# with Visual Studio 2010.

This service will get some data from database.

There're more than one database with different windows domain login account.

**I want the installer pass the connection string as a parameters to each service instance**, each instance has different service name.

I look into MSDN and see `OnStart(string[] args)`. It needs to write register keys to make a service run with parameters automatically. **Is there any other easy ways to do that?**

Beside, I set username and password value to null in my installer project. A dialog will be promoted during the installation. **But it's only once. I want to set different credentials for each service instance. So it needs to be promotes many times.**

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:21:42.197

而是根据需要安装尽可能多的实例并使用`connectionStrings`配置文件中的部分。

我有一个通用主机（请参阅：[http](http://shuttle.codeplex.com/SourceControl/changeset/view/ba9750ca1f7a#Shuttle.Core%2fsource%2fShuttle.Core.Host%2fHost.cs) ://shuttle.codeplex.com/SourceControl/changeset/view/ba9750ca1f7a#Shuttle.Core%2fsource%2fShuttle.Core.Host%2fHost.cs ），它允许您轻松实现多个实例服务或将您的代码作为控制台应用程序运行。

高温高压

# php - phpunit：查看哪些测试没有被执行

> ID：10227836
> 
> 赞同：0
> 
> 时间：2012-04-19T12:14:55.060
> 
> 标签：php, phpunit

我有一个很大的 phpunit 测试套件（实际上它是这个特定项目的四个测试套件），执行时，phpunit 显示有 903 个测试：

```
...............................................................  63 / 903 (  6%) 
```

完成后，它会显示结果：

```
OK (901 tests, 1872 assertions) 
```

如您所见，我缺少两个测试。这可能是因为他们的组不正确（我的 phpunit.xml 过滤器组）或者可能有问题。由于测试太多，我不知道如何找到未执行的测试。有什么办法可以得到这个测试的名字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:32:29.867

这种行为的原因是两个以“test”为前缀的私有方法。似乎对于测试的总数，phpunit 考虑了所有以“test”为前缀的方法，无论它们是否可以执行。

`--list-groups`我使用phpunit 上的选项发现了它，这给了我一个名为`__nogroup__`. 仅使用执行此测试`--group __nogroup__`给了我两个私有方法所在的类。

# php - PHP最佳实践：你用过吗？在每个 PHP 语句之后与否？

> ID：10227837
> 
> 赞同：0
> 
> 时间：2012-04-19T12:14:56.347
> 
> 标签：php

我对 PHP 还是很陌生，所以我不想过早养成任何坏习惯。当我将此语句输入 WordPress PHP 文件时：

```
<p>This post was written by <?php the_author(); ?></p> 
```

当我删除分号时它也有效：

```
<p>This post was written by <?php the_author() ?></p> 
```

如果我不在我的 php 语句的末尾使用分号，这是一个不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:18:04.890

我会说你在声明后放了一个分号，所以你应该在这里放一个。尽管在这种情况下您可以省略它，但如果您要在其中添加额外的语句，则必须添加它。我认为这很奇怪：您需要在前一行添加一些内容，因为您添加了额外的语句。令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:19:11.447

据我所知，关闭 php 标记`?>`意味着一个分号，因此单个函数调用不需要，另一方面，这会导致解析错误：

```
<?php do_something() str_repeat('23', 4) ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:19:41.690

这不是必需的，但我认为这也是最佳实践，这样您可以在需要时轻松添加其他行。它也让你养成这样做的习惯。

# java - 为什么我的java代码出现异常后回滚操作没有完成

> ID：10227840
> 
> 赞同：1
> 
> 时间：2012-04-19T12:15:01.900
> 
> 标签：java, mysql, jdbc, transactions, rollback

我有一个 jdbc 代码，其中我在代码中使用了事务管理。以下是代码。我正在使用 Mysql 数据库。

```
public class JdbcConn {
public static void main(String[] args){
    Savepoint spt1 = null;
    Connection con = null;
    try{
        Class.forName("org.gjt.mm.mysql.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost","root","tany");
        con.setAutoCommit(false);
         spt1= con.setSavepoint("svpt1");

        PreparedStatement psmt;
        String query1 = "select city, countryid from querytest.city;";
        psmt=con.prepareStatement(query1);
        ResultSet rs=psmt.executeQuery();
        while(rs.next()){
            String query2 = "insert into sun.city (city,countryid) values('"+rs.getString(1)+"',"+rs.getInt(2)+");";
            psmt=con.prepareStatement(query2);
            psmt.executeUpdate();
        }
        String query3 = "create database `transtest`;";
        psmt=con.prepareStatement(query3);
        psmt.executeUpdate();

        String query4 = "CREATE TABLE `transtest`.`trans` (`id` tinyint(4) NOT NULL auto_increment,`val` int(5) NOT NULL default 0, PRIMARY KEY  (`id`)) ENGINE=MyISAM;";                
        psmt=con.prepareStatement(query4);
        psmt.executeUpdate();

        String query5 = "CREATE TABLE `transtest`.`transone` (`id` tinyint(4) NOT NULL auto_increment,`val` int(5) NOT NULL default 0, PRIMARY KEY  (`id`)) ENGINE=MyISAM;";                
        psmt=con.prepareStatement(query5);
        psmt.executeUpdate();

        String query6 = "CREATE TABLE `transtest`.`transtwo` (`id` tinyint(4) NOT NULL auto_increment,`val` int(5) NOT NULL default 0, PRIMARY KEY  (`id`)) ENGINE=MyISAM;";                
        psmt=con.prepareStatement(query6);
        psmt.executeUpdate();

        for(int i=1;i<=10;i++){
            String query7 = "insert into `transtest`.`transtwo` (`val`) values ("+i*2+");";                
            psmt=con.prepareStatement(query7);
            psmt.executeUpdate();
        }

        String query8 = "insertd into `transtest`.`trans` (`val`) values (500);";                
        psmt=con.prepareStatement(query8);
        psmt.executeUpdate();
        JOptionPane.showMessageDialog(null, "Process completed!");
        con.commit();
        con.setAutoCommit(true);

    }catch(SQLException sqle){
        try {
            con.rollback(spt1);
            JOptionPane.showMessageDialog(null, "Rollback1!");
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        sqle.getMessage();
        sqle.printStackTrace();
    }catch (ClassNotFoundException cnfe) {
        // TODO Auto-generated catch block
        try {
            con.rollback(spt1);
            JOptionPane.showMessageDialog(null, "Rollback2!");
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        cnfe.getMessage();
        cnfe.printStackTrace();
    }catch (Exception e) {
        // TODO Auto-generated catch block
        try {
            con.rollback(spt1);
            JOptionPane.showMessageDialog(null, "Rollback3!");
        } catch (SQLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        e.getMessage();
        e.printStackTrace();
    }

} 
```

}

当 sql 异常出现时，上面的代码不会回滚。query1 中表的架构和 query2 中表的架构相同，但正如您所见，数据库不同。

我只是不知道是否有任何异常出现，为什么它不回滚查询从 query2 到 query7 所做的更改。

我在 query8 中故意犯了一个句法错误作为例外。

请在这个问题上指导我的朋友，并请让我知道我在代码中的错误。

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:22:20.383

这是我的做法：

```
Connection con = null;
boolean ok = false;
try {
    con = DriverManager.getConnection(...);
    ...
    con.commit();
    ok = true;
} catch (...) {
    // diagnose exception 
} 
...
} finally {
    if (con != null) {
        try {
            if (!ok) con.rollback();
        } finally {
           con.close();
        }
    }
} 
```

换句话说，在 finally 块中关闭连接并回滚......并且不要重复代码。

并且不要抓住`Exception`......见下文。

* * *

对问题的评论说：

> 作为一般原则，捕获 Throwable，而不仅仅是 Exception。实际上，catch 只是 Throwable，不需要重复积木。这甚至可以解决你的问题。

捕获`Exception`，尤其`Throwable`是一个坏主意，除非处理异常后的下一个操作是退出应用程序。可能会发生许多潜在的未经检查的异常/错误。您无法知道意外异常的原因是什么，或者应用程序是否可以安全地恢复。

* * *

> 但是我的代码中的问题是它没有将查询完成的事务从 query2 回滚到 query7

可能是因为其中一些语句是非事务性的（例如 CREATE TABLE），并且执行非事务性语句会导致当前事务自动提交。

可能是旧版本的 MySQL 和您使用的 JDBC 驱动程序有问题。“org.gjt.mm.mysql”驱动程序真的很旧，而且我知道早期版本的 MySQL 根本不支持事务。

* * *

正如我所怀疑的，您不能在 MySQL 中回滚 CREATE TABLE。

来源：

*   StackOverflow Q&A[是否可以回滚主要 SQL 数据库中的 CREATE TABLE 和 ALTER TABLE 语句？](https://stackoverflow.com/questions/4692690/is-it-possible-to-roll-back-create-table-and-alter-table-statements-in-major-sql)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:48:29.253

您不能在 MySQL 中回滚 create table 语句，因为它会导致隐式提交。请参阅：[导致隐式提交的语句](http://dev.mysql.com/doc/refman/5.1/en/implicit-commit.html)

# jquery - Json request gives invalid lable while using ajax request

> ID：10227842
> 
> 赞同：0
> 
> 时间：2012-04-19T12:15:03.307
> 
> 标签：jquery, json

I am trying call my remote server to retrieve some json data . i tried the below code

```
$.ajax({
        url : url + "&callback=?",
        dataType : 'json',
        success : function(data) {
            alert(data.results.length);
        }
    }); 
```

if i use the twitter url it works for my remote server url firebug gives invalid lable .But is is an valid json.can any one tell me how to overcome this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:53:41.963

尝试通过 DATA 属性将数据传递到远程服务器：

```
$.ajax({  
    type: "POST",  
    url: url,  
    data: data,
    dataType: "json",
    cache:false,                      
    success: function( data)
    {  
        success_callback( data);
    },  
    error: function( data)
    {
        error_callback( data);
    }
}); 
```

如果您尝试跨服务器进行 ajax 调用（在一台服务器上调用文件，在另一台服务器上接收文件），那么您将不得不查看 JSONP。

# google-analytics - Google Analytics - Tracking different links that point to same URL

> ID：10227843
> 
> 赞同：1
> 
> 时间：2012-04-19T12:15:04.143
> 
> 标签：google-analytics

If I have 3 links on a page that point to the same URL, Google Analytics doesn't seem to differentiate between them. It will tell me the overall percentage of clicks to that URL but not the percentages unique to each of the links.

How do I get GA to tell me which links are most clicked even though they share the same URL?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:21:58.040

最好的办法是使用[事件跟踪](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)，在链接上使用不同的标签来区分它们。

一个问题——`_trackEvent`通过向 Google 请求跟踪像素来工作。如果您在请求有机会完成之前离开页面，则可能不会记录该事件。如果链接未在新窗口中打开，则以下代码通过将链接延迟少量（150 毫秒）来工作

```
<script type="text/javascript">
function trackIt(link, label) {
    _gaq.push(['_trackEvent', 'Link', link.href, label]);
    if (link.target == '_blank') return true
    setTimeout('document.location = "' + link.href + '"', 150);
    return false;
}
</script>
<a href="someURL" onclick="return trackIt(this, 'label1');">link 1</a>
<a href="someURL" onclick="return trackIt(this, 'label2');">link 2</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T04:13:33.703

这个问题的答案可能在被问到之后发生了变化，而且由于这篇文章在搜索结果中的排名很高，如果我不提供这个答案，我就会失职。

Analytics 有一项称为**[增强链接归因](https://support.google.com/analytics/answer/2558867?hl=en)**的功能，它可以分离出页面上具有相同目的地的链接的跟踪统计信息。这解决了这个问题的确切问题。

上面链接的文档很清楚，但简而言之：

*   在您的资源的管理员设置中启用*使用增强的链接归因功能*
*   为您的链接添加`id`属性以将它们彼此区分开来
*   将以下行添加到您的跟踪代码中：
    *   `ga('require', 'linkid');`

请注意，根据文章，启用此功能可能会导致报告生成速度变慢，并且数据存在一些细微差别，但可以随时禁用它。

# windows - 代码签名的 Windows 实现

> ID：10227846
> 
> 赞同：2
> 
> 时间：2012-04-19T12:15:06.123
> 
> 标签：windows, security, code-signing, portable-executable, malware

我找不到有关如何在 Windows 中实现代码签名的任何具体信息（特别是 PE 可执行文件）。我只找到很多关于如何签署应用程序的教程，但这不是我想要的。我正在寻找低级细节。

我正在写一篇关于安全性和数据完整性的文章，但找不到任何信息是否已签名的代码可能被恶意软件“未签名”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:43:28.127

是的，签名可以轻松删除。签名的目的是证明软件的真实性。签名不用于保护代码。

Windows PE 代码签名被正确命名为“Microsoft Authenticode”，谷歌搜索 Authenticode 将为您提供有关内部结构的大量信息。但我想我已经回答了你上面的真正问题。

# c++ - How do I approach this Linux C++ warning? "can't find linker symbol for virtual table for `sockaddr_in'"

> ID：10227847
> 
> 赞同：1
> 
> 时间：2012-04-19T12:15:08.483
> 
> 标签：c++, eclipse, linker-warning

Ubuntu 10.04 32-bit, eclipse, C and C++

I have a program that uses select() to monitor a bunch of TCP and UDP ports. I create those ports in the usual way (socket(), bind(), listen(), accept() etc.) using **sockaddr_in** structures.

The program works fine at the command line. I was using the eclipse debugger to fix a bug (fixed now!) when I noticed the following warning:

```
warning: can't find linker symbol for virtual table for `sockaddr_in' value
warning:   found `operator delete(void*)' instead 
```

Well, after fixing my bug I checked and the warning persisted.

I know that the warnings commence as soon as I enter my ConfigureServer() routine where the ports/sockets get connected. The sockaddr_in structures are declared in the routine and are on the stack. In fact, nothing in the program is yet in the heap. This is a mix of C and C++ with no objects declared or used up to this point.

This is the beginning odf the routine. There are several additional identical bits for other ports.

```
int      configureServer()
{
   sockaddr_in         servAddr; 

   memset(&servAddr, 0, sizeof(servAddr));
   servAddr.sin_family        = AF_INET;        
   servAddr.sin_port          = htons( g_tcpPorts[0].serverPort ); 
   servAddr.sin_addr.s_addr   = htonl(INADDR_ANY); 

   /* Create and initialize the TCP socket */
   if (( g_tcpPorts[0].serverSock = socket(AF_INET, SOCK_STREAM, IPPROTO_IP)) < 0 )
   {
      PLOG( ERROR ) << "failed to acquire a socket for IO Control Server port:  " << g_tcpPorts[0].serverPort;
      return -1;     // caller will CloseAllPorts();
   } 

// ...........
} 
```

So, my question is, how do I debug and track down the cause of these warnings.

Thanks,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:24:29.387

GDB 仍然不够完美，尤其是在调试 C++ 代码时。

在这种情况下，`sockaddr_in`是“普通旧数据”（没有任何 C++ 特性的 C 结构）。它不需要也不应该有任何虚拟表。如果 GDB 不这么认为，那就是 GDB 的问题。

[在 GDB 错误数据库中打开了两个错误，这些错误非常准确](http://sourceware.org/bugzilla/buglist.cgi?quicksearch=warning%3A+can%27t+find+linker+symbol+for+virtual+table)（针对不同的结构/类）。除非它妨碍您的调试，否则我不会太担心它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:03:09.570

在包含声明 sockadd_in 结构的标头之前尝试使用 extern "C"。

```
extern "C"
{
#  include <netinet/in.h>
} 
```

这可能会确保 sockaddr_in 没有或不需要 vtab。

# android - Can't delete file from sdcard

> ID：10227848
> 
> 赞同：0
> 
> 时间：2012-04-19T12:15:11.753
> 
> 标签：android, eclipse

i am using this code

```
public void onClick(DialogInterface dialog, int which) {
                      File dir = new File (Environment.getExternalStorageDirectory() + "/MyApp/MyFolder");
                       if (dir.isDirectory()) 
                       {
                           File file = new File(card.imagePath);
                           file.delete();
                       } 
```

But it is not deleting file from the card. Any ideas why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:23:37.280

Are you sure about file path?

```
File file = new File(card.imagePath);

if(file.isExists()){
             file.delete();
             System.out.print("File exists and delete");
} else{
             System.out.print("File NOT exists");
} 
```

ADD Persmissions ::

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:18:10.487

*   检查文件是否存在
*   检查文件权限，如果您对文件有写权限。

# cryptography - 零知识？证明项目关联

> ID：10227869
> 
> 赞同：0
> 
> 时间：2012-04-19T12:16:11.193
> 
> 标签：cryptography

在密码学方面，我完全是个菜鸟，但我相信这属于“零知识”类别。

我有两条相关的信息：

1.  **标签**- 双方都知道。每个场景唯一。
2.  **身份**- 只有一方知道。可能与多个标签相关联。来自双方都知道的游泳池。

我需要一种方法来防止与关联方改变身份的值。每个场景大约有一百个并发关联。潜在身份池可以相对较小，甚至小于标签的数量。

最原始的选择是将标签和身份哈希在一起，但是对于这么小的潜在身份池，我担心暴力破解哈希是微不足道的......

在这种情况下，越来越多的这些关联将公开。至少到那时我应该可以确认对方没有修改关联。在那之前我真的不需要确认这一点，因为未揭示的关联是不相关的。我只需要阻止知情方在透露时挑剔。

这样的事情甚至可能吗？怎么可能做到？实施起来有多难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:11:34.843

你不应该自己实现这个。你有两方，Alice 和 Bob。ALice 作为（身份，标签）对。Bob 只有标签。爱丽丝想向鲍勃证明她在这对中有一个身份，她没有改变，但她不想向鲍勃透露这个身份。

您想要的是[“具有高效协议的签名方案”](http://www.zurich.ibm.com/~jca/papers/camlys02b.pdf)。我知道没有公开此功能的 API。但是，这些被广泛用于可用于您的目的的匿名凭证系统中。

值得庆幸的是，有两个系统支持这种类型的东西。一个是 IBM [Idemix](http://www.zurich.ibm.com/idemix/)，它使用了上述技术，是您应该首先关注的地方。另一个是微软的[U-Prove](http://www.zurich.ibm.com/idemix/)。

# asp.net-mvc - 基本 MVC：“modelItem =>”做什么？

> ID：10227870
> 
> 赞同：15
> 
> 时间：2012-04-19T12:03:34.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

以下是 Visual Studio 在 MVC 类型的应用程序中经常生成的示例代码行：

```
@Html.DisplayFor(modelItem => item.LastName) 
```

*   我了解剃须刀的工作原理 (the `@`)
*   我了解 Html 是一个具有静态辅助函数的对象，例如`DisplayFor()`
*   我理解`item.LastName`，因为这松散地代表了数据/模型中的一行和一列

...但到底是`modelItem =>`什么？回到我的时代，`=>`曾经是一个被评估为布尔值的运算符。这是什么法术？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T12:13:08.343

你在那里做的是传递一个 lambda 表达式。这些本质上与委托、C 中的函数指针或 Javascript 中的函数相同。你基本上是在告诉 Html DisplayFor “使用这个函数来获取显示项”。您的示例实际上应该是：

```
@Html.DisplayFor(modelItem => modelItem.LastName) 
```

否则，您正试图从外部范围关闭“项目”。如果这是你真正想要做的，那么 modelItem 基本上什么都不做......

请参阅[http://msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-30T15:03:34.447

我刚刚`modelItem`在一些脚手架的 MVC 代码中看到，我想我只是添加到 bunglesticks 答案。

问题中的这段代码可能来自标准的 MVC 脚手架索引视图（其中模型是`IEnumberable<TModel>`），并且围绕它：

```
@foreach (var item in Model) {

} 
```

代码使用了 DisplayFor 的重载：

```
public static MvcHtmlString DisplayFor<TModel, TValue>(
    this HtmlHelper<TModel> html,
    Expression<Func<TModel, TValue>> expression
) 
```

因此，modelItem（正如 bunglestink 所说）什么都不做（结果中没有使用它）。返回 IEnumerable 中该`item.LastName`项目的实际 LastName，`DisplayFor`并将为数据类型生成正确的 html。

# jquery - 使用Jquery在Gridview中设置Textbox的值

> ID：10227872
> 
> 赞同：0
> 
> 时间：2012-04-19T12:16:17.800
> 
> 标签：jquery, asp.net, gridview, webforms

我有一个网格视图`grdtest`。我想使用 JQuery 从出现在锚点单击的模式对话框中更新网格中的文本框。我已经添加了代码，但模式对话框更新了网格中的所有文本框。如何仅更新与锚点位于同一行的文本框？

html代码是

```
<div id="output">
<asp:GridView ID="grdtest" CssClass="grid" Width="20%" AutoGenerateColumns="false" runat="server"
 DataKeyNames="ID" OnRowCreated="grdtest_RowCreated" OnRowCommand="grdtest_RowCommand">
<Columns>
<asp:BoundField DataField="ID" Visible="false" />
<asp:BoundField HeaderText="NAME"  DataField="NAME" ItemStyle-Width="5%"/>
<asp:TemplateField HeaderText="MONTH" ItemStyle-Width="5%">
<ItemTemplate>
<asp:TextBox ID="txtsubject" runat="server" Wrap="true"></asp:TextBox>
</ItemTemplate></asp:TemplateField>
<asp:TemplateField ItemStyle-Width="2%">
<ItemTemplate><a href="#" >Month</a>
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView>
</div>

<div id="overlay" class="web_dialog_overlay"></div>

<div id="dialog" class="web_dialog">
    <table style="width: 100%; border: 0px;" cellpadding="3" cellspacing="0">
        <tr>
            <td class="web_dialog_title">Month Chooser</td>
            <td class="web_dialog_title align_right">
                <a href="#" id="btnClose">Close</a>
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td colspan="2" style="padding-left: 15px;">
                <b>Choose the months from the list </b>
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td colspan="2" style="padding-left: 15px;">
                <div id="months">
                    <input id="month1" name="month" type="checkbox" value="Jan" />January
                    <input id="month2" name="month" type="checkbox" value="Feb" />February
                    <input id="month3" name="month" type="checkbox" value="Mar" />March
                    <input id="month4" name="month" type="checkbox" value="Apr" />April
                    <input id="month5" name="month" type="checkbox" value="May" />May
                </div>
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center;">
                <input id="btnSubmit" type="button" value="Submit" />
            </td>
        </tr>
    </table>
</div>
</form>
</body> 
```

js代码是

```
<script type="text/javascript">

    $(document).ready(function ()
    {
        $("#btnClose").click(function (e)
        {
            HideDialog();
            e.preventDefault();
        });

        $('#btnSubmit').click(function(e)
        {
            var sub = [];
            $(':checkbox:checked').each(function(i){
            sub[i] = $(this).val();
            });
            $("#grdtest").find("input[type=text][id*=txtsubject]").val(sub);
            HideDialog();
            e.preventDefault();
        });

    });

    function ShowDialog(modal)
    {
        $("#overlay").show();
        $("#dialog").fadeIn(300);

        if (modal)
        {
            $("#overlay").unbind("click");
        }
        else
        {
            $("#overlay").click(function (e)
            {
                HideDialog();
            });
        }
    }

    function HideDialog()
    {
        $("#overlay").hide();
        $("#dialog").fadeOut(300);
    } 

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:16:40.050

您可以在链接单击方法中添加一些内容，为文本框提供一个特定的类，您可以稍后将其定位，因此您只能定位一个，例如：

```
$(".openModalLink").click(function(){
    $(this).parent().parent()
        .find("input[type=text][id*=txtsubject]").addClass("ChangeMe");
    ShowDialog();
} 
```

您应该`<a href="#" class="your class name">Month</a>`在 gridview 中添加一个类。在我的情况下，它会是`openModalLink`。然后您的提交功能将如下所示：

```
 $('#btnSubmit').click(function(e)
    {
        var sub = [];
        $(':checkbox:checked').each(function(i){
        sub[i] = $(this).val();
        });
        $("#grdtest").find(".ChangeMe").val(sub);
        HideDialog();
        e.preventDefault();
    }); 
```

并在您的 HideDialog 中从所有文本框中删除特定类。

```
function HideDialog()
{
    $("#overlay").hide();
    $("#dialog").fadeOut(300);
    $("#grdtest").find("input[type=text][id*=txtsubject]").removeClass("ChangeMe");
} 
```

希望这会有所帮助，并且是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T10:06:04.537

您需要先获取文本框的索引。然后使用索引更新值。

我已将以下代码用于我的应用程序。效果很好..

```
$('[id*=txtBindSplitPercent]').change(function () {
            var value = $(this).val();
            index = $(this).closest('tr').index();
            if (value.trim() != '') {
                $(this).val(100);
            }
        }); 
```

# php - PHP cURL HTTP 代码返回 0

> ID：10227879
> 
> 赞同：112
> 
> 时间：2012-04-19T12:16:35.780
> 
> 标签：php, curl

我不明白当我回显 $httpCode 时总是得到 0，当我将 $html_brand 更改为损坏的 url 时，我期待 404。有什么我想念或不知道的吗？谢谢。

```
 //check if url exist
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $html_brand);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$response = curl_exec($ch); 
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

if ($httpCode == 404) {
    echo "The Web Page Cannot Be Found";
    return;
}
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-19T12:50:33.107

如果你连接到服务器，那么你可以从它那里得到一个返回码，否则它会失败并且你得到一个 0。所以如果你尝试连接到“www.google.com/lksdfk”你会得到一个返回码400，如果您直接访问 google.com，您将获得 302（如果您转发到下一页，则为 200...我这样做是因为它转发到 google.com.br，所以您可能不会明白），如果你去“googlecom”你会得到一个0（找不到主机），所以最后一个，没有人发回代码。

使用下面的代码进行了测试。

```
<?php

$html_brand = "www.google.com";
$ch = curl_init();

$options = array(
    CURLOPT_URL            => $html_brand,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_HEADER         => true,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_ENCODING       => "",
    CURLOPT_AUTOREFERER    => true,
    CURLOPT_CONNECTTIMEOUT => 120,
    CURLOPT_TIMEOUT        => 120,
    CURLOPT_MAXREDIRS      => 10,
);
curl_setopt_array( $ch, $options );
$response = curl_exec($ch); 
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

if ( $httpCode != 200 ){
    echo "Return code is {$httpCode} \n"
        .curl_error($ch);
} else {
    echo "<pre>".htmlspecialchars($response)."</pre>";
}

curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-04-19T12:28:30.857

在 curl_exec 之后试试这个，看看有什么问题：

```
print curl_error($ch); 
```

如果它打印出类似“格式错误”的内容，请检查您的 URL 格式。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-20T14:22:09.283

检查[curl_getinfo](http://php.net/manual/en/function.curl-error.php)之后的 curl_error 以找出隐藏的错误。

```
if(curl_errno($ch)){   
    echo 'Curl error: ' . curl_error($ch);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-06-30T10:50:21.587

试试这个：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-19T12:25:48.260

就像[这里](https://stackoverflow.com/a/4513125/266143)和下面所说的，失败的请求（*即找不到服务器*）返回 false，没有 HTTP 状态代码，因为从未收到回复。

打电话[`curl_error()`](http://php.net/manual/en/function.curl-error.php)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-19T10:52:12.457

我有同样的问题，在我的情况下，这是因为 curl_exec 函数在 php.ini 中被禁用。检查日志：

```
PHP Warning:  curl_exec() has been disabled for security reasons in /var/www/***/html/test.php on line 18 
```

解决方案是从服务器配置文件的 php.ini 中禁用的函数中删除 curl_exec。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-19T12:22:45.913

您传递给 $html_brand 的确切内容是什么？

如果它的 URL 语法无效，您很可能会得到 HTTP 代码 0。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-10T01:51:31.043

如果您使用的是 selinux，可能是因为安全限制。尝试将此设置为root：

```
# setsebool -P httpd_can_network_connect on 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-16T19:57:43.090

对我来说，发出 wat 的 URL，直到我编码了 url 参数值，我得到了 http 代码 0。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-24T01:25:04.080

PHP 返回 http 代码 0 的另一个原因是超时。就我而言，我有以下配置：

curl_setopt($http, CURLOPT_TIMEOUT_MS,500);

事实证明，对我指向的端点的请求总是花费超过 500 毫秒，总是超时并且总是返回 http 代码 0。

如果您删除此设置 (CURLOPT_TIMEOUT_MS) 或设置更高的值（在我的情况下为 5000），您将获得实际的 http 代码，在我的情况下为 200（如预期的那样）。

见[https://www.php.net/manual/en/function.curl-setopt.php](https://www.php.net/manual/en/function.curl-setopt.php)

# c - 如何使用 clutter_actor_animate 移动窗口/舞台？

> ID：10227880
> 
> 赞同：0
> 
> 时间：2012-04-19T12:16:46.003
> 
> 标签：c, clutter

> 如何使用 clutter_actor_animate 动画或移动窗口？这是我的代码，它不起作用。

```
clutter_init(&argc, &argv);
ClutterActor stageColor = {0,0,0,255};
ClutterActor *stage = clutter_stage_get_default();
clutter_actor_set_size(stage,512,512);
clutter_stage_set_color(CLUTTER_STAGE(stage),&stage_color);
clutter_actor_animate(stage,CLUTTER_LINEAR, 20000,"x",2500.0,"y",100.0,NULL); 
```

> 顺便说一句，我正在使用 clutter1.0。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:57:06.840

您无法为舞台位置设置动画。

这实际上有两个原因：

*   舞台在场景图中的位置被定义为始终为 (0, 0)，因为舞台是图中的顶级演员。
*   包含舞台的窗口的位置由 Clutter 使用的平台上的窗口系统拥有。

这意味着您应该使用平台自己的 API 来更改包含舞台的窗口的位置。

# javascript - 有没有一种简单的方法可以将 jshint 与 netbeans 集成？

> ID：10227881
> 
> 赞同：6
> 
> 时间：2012-04-19T12:16:49.040
> 
> 标签：javascript, netbeans, integration, jshint

在网上搜索了一个用于 netbeans 的 jshint 插件，但没有找到...

任何人都可以描述或展示一个简单的 jshint 在 netbeans 中集成的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T08:45:49.973

netbeans 没有好的插件。安装节点，使用[grunt](http://gruntjs.com)并开始摇摆！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T15:19:12.393

我认为这可能对你有用：[jshint](https://github.com/LaurentGoderre/netbeans-jshint)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T21:47:55.397

Netbeans 有两个用于 Javascript 代码质量的插件。

> **[JSHist](http://plugins.netbeans.org/plugin/52226/jshint)** : 比较新，是在Dic-2013上添加的，只支持Netbeans 7.4版本

和

> **[JSLint](http://plugins.netbeans.org/plugin/40893/jslint)**：它似乎作为插件工作了一段时间，它是在 2011 年 11 月添加的，最后一次更新是在 2013 年 10 月。支持 Netbeans 的 7.4、7.3、7.2、7.0 版本。

看起来两者都可以手动安装 8.0 版

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T19:10:25.597

最简单的方法是添加[这个](http://plugins.netbeans.org/plugin/40893/jslint) 插件。支持 Netbeans 7.3。

您可以[分叉它](https://github.com/lomatek/netbeans-jslint)并添加 JSHint。

# java - 在多个线程之间共享的大型对象数组。线程安全技术

> ID：10227883
> 
> 赞同：2
> 
> 时间：2012-04-19T12:16:53.727
> 
> 标签：java, multithreading, synchronization

我有一个大型的 ArrayList 对象，类似于以下内容

```
class Entry {
    private String variable1 = null;

    private int variable2 = 0;

    public Entry (String variable1) {
    this.variable1 = variable1;
    }

   /* getters and setters for variable1 and 2 are below */
} 
```

我在 ArrayList 中启动对象，然后创建多个线程。每个线程搜索大量文档以确定 variable1 的内容是否嵌入到文档中。如果是，我想复制条目，特定于线程，类似于下面：

```
public Entry(Entry entry) {
    this(entry.getVariable1())
  } 
```

然后我想更改 Copy 的 variable2 的内容而不是原始内容。总结一下：

1.  对象值在线程之前初始化。
2.  对象由多个线程共享（只读）。
3.  当需要修改对象时，会制作对象的副本并对副本进行更改。

这是我的问题。

1.  variable1 和 variable2 的 getter 和 setter 是否需要同步。由于我只在线程之间共享时读取对象，这似乎是不必要的，但如果我错了，请纠正我。
2.  有没有更好的方法来共享大量信息。（我不想为每个线程复制数组列表，因为它很大，有超过 200K 个对象）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:20:22.437

1.  如果您复制存储在只读共享数组中的对象，则无需同步 getter/setter。

2.  只要列表是只读的，您的方法似乎很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:22:52.943

我会有一个集合，它使用每个线程的本地副本来隐藏原始列表。

```
public class ShadowList<T> {
    private final List<T> original;
    private final List<T> local;

    public ShadowList(List<T> original) {
        this.original = original;
        local = Arrays.<T>asList((T[]) new Object[original.size()]);
    }

    public T get(int n) {
        T t = local.get(n);
        if (t == null)
            t = original.get(n);
        return t;
    }

    public void set(int n, T t) {
        local.set(n, t);
    }
} 
```

# unix - Tar：创建存档排除目录，除了一个

> ID：10227892
> 
> 赞同：12
> 
> 时间：2012-04-19T12:17:20.333
> 
> 标签：unix, gzip, archive, tar

我有一些包含一些文件的目录

```
dir_archive/somedir1
dir_archive/somedir2
dir_archive/somedir3
dir_archive/mydir
dir_archive/mydir/excludedir1
dir_archive/mydir/excludedir2
dir_archive/mydir/excludedir3
dir_archive/mydir/many_other_directories...
dir_archive/mydir/my_archive_dir 
```

我想创建 tar(gz) 存档 dir_archive.tar.gz 并排除所有文件和目录

```
dir_archive/mydir/excludedir1
dir_archive/mydir/excludedir2
dir_archive/mydir/excludedir3
dir_archive/mydir/many_other_directories... 
```

但包括

```
dir_archive/mydir/my_archive_dir 
```

我不想`--exclude`用于每个目录

```
tar cvfz dir_archive.tar.gz --exclude=dir_archive/mydir/excludedir1 --exclude=dir_archive/mydir/excludedir2 --exclude=dir_archive/mydir/excludedir3 
```

我尝试使用`--add-file`，但它不起作用：

```
tar cvfz dir_archive.tar.gz --exclude=dir_archive/mydir --add-file=dir_archive/mydir/my_archive_dir dir_archive 
```

存在一些简单的方法吗？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T14:13:03.460

一种方法是首先排除`mydir`然后附加`my_archive_dir`

```
tar cvf dir_archive.tar --exclude=dir_archive/mydir dir_archive
tar rvf dir_archive.tar dir_archive/mydir/my_archive_dir
gzip dir_archive.tar 
```

不幸的是，附加不适用于压缩档案。

该`--exclude`选项将模式作为参数，因此如果要排除的目录的名称相似，您可以避免它们并仍然包含存档目录

```
tar cvfz dir_archive.tar.gz --exclude=dir_archive/mydir/exclude* dir_archive 
```

也可以创建一个文件，其中包含您想要包含的所有文件的名称，并将该列表提供给 tar 选项`-T`或`--files-from`（或以类似方式列出要排除的文件并提供选项列表`-X`）。

```
文件列表.txt：
dir_archive
dir_archive/temp1
dir_archive/mydir
dir_archive/mydir/temp2
dir_archive/mydir/my_archive_dir
dir_archive/mydir/my_archive_dir/temp7

```

```
tar cvfz dir_archive.tar.gz --no-recursion --files-from filelist.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-01T02:00:45.900

订单事项：

```
$ mkdir -p dir_archive/{somedir{1..3},mydir/{excludedir{1..3},otherone,my_archive_dir}}
$ touch dir_archive/{somedir{1..3},mydir/{excludedir{1..3},otherone,my_archive_dir}}/dir_file.txt
$ tar cvzf dir_archive.tar.gz dir_archive/mydir/my_archive_dir* --exclude "dir_archive/mydir/*" dir_archive
dir_archive/mydir/my_archive_dir/
dir_archive/mydir/my_archive_dir/dir_file.txt
dir_archive/
dir_archive/mydir/
dir_archive/somedir2/
dir_archive/somedir2/dir_file.txt
dir_archive/somedir1/
dir_archive/somedir1/dir_file.txt
dir_archive/somedir3/
dir_archive/somedir3/dir_file.txt 
```

这本质上是在前面更加明确，然后仅将排除应用于父目录。

[从https://unix.stackexchange.com/a/417707/420501](https://unix.stackexchange.com/a/417707/420501)无耻窃取

# android - 从 SD 卡获取 Android 歌曲

> ID：10227895
> 
> 赞同：3
> 
> 时间：2012-04-19T12:17:27.907
> 
> 标签：android, filter, hashmap, android-sdcard, android-mediaplayer

我正在从 SD 卡中取出我的歌曲并将他放到列表视图中。

我正在使用这种方法。但它需要一些时间，如果路径不同，我没有得到那个数据。

所以， **QUE**是否有任何有用的脚本可以显示我所有 SD 卡中的歌曲。如果他们进入 directory/songs 。

```
public ArrayList<HashMap<String, String>> getPlayList(){
        File home = new File(MEDIA_PATH);

        if (home.listFiles(new FileExtensionFilter()).length > 0) {
            for (File file : home.listFiles(new FileExtensionFilter())) {
                HashMap<String, String> song = new HashMap<String, String>();
                song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
                song.put("songPath", file.getPath());

                // Adding each song to SongList
                songsList.add(song);
            }
        }
        // return songs list array
        return songsList;
    }

    class FileExtensionFilter implements FilenameFilter {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".mp3") || name.endsWith(".MP3"));
        }
    } 
```

***请对此发表您的意见。***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:31:07.377

我曾经将 MediaStore 用于我的音乐应用程序，这是一种非常有效和正确的方法来检索数据，然后使用 ListView 显示它。这将检索存储在 SDCard 上任何文件夹中的任何音乐文件。

```
 //your database elect statement 
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
    //your projection statement 
    String[] projection = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ARTIST,
            MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Audio.Media.DURATION,
            MediaStore.Audio.Media.ALBUM_ID
    };
    //query 
    cursor = this.managedQuery(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection,
            selection,
            null,
            null);

    while(cursor.moveToNext()){
            songs.add(cursor.getString(0));
            songs.add(cursor.getString(1));
            songs.add(cursor.getString(2));
            songs.add(cursor.getString(3));
            songs.add(cursor.getString(4));
            songs.add(cursor.getString(5));
            album_id.add((long) cursor.getFloat(6));
    } 
    int a[]= new int[]{R.id.textView1 ,R.id.textView3};//, R.id.textview2};
    ListAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.items, cursor, new String[]{MediaStore.Audio.Media.TITLE,           MediaStore.Audio.Media.ARTIST/*, MediaStore.Audio.Media.DURATION*/} ,a);
            setListAdapter(adapter); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:09:05.300

```
ArrayList<String> names = new ArrayList<String>();
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
    Uri uri;
    int columnIndex;
    String[] projection = { MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Audio.Media.DURATION, MediaStore.Audio.Media.ALBUM_ID };
    ListView lst;
    ArrayAdapter<String> adapter;
    Cursor cursor;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        uri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;

        cursor = this.managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                projection, selection, null, null);

        if (cursor.getCount() == 0) {

            Toast.makeText(getBaseContext(),
                    "cursor value" + cursor.getCount(), Toast.LENGTH_SHORT)
                    .show();
        } else {

            cursor.moveToFirst();
            do {
                names.add(cursor.getString(cursor
                        .getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME)));

            } while (cursor.moveToNext());

            adapter = new ArrayAdapter<String>(Home.this,
                    android.R.layout.simple_list_item_1, names);

            lst.setAdapter(adapter);
        } 
```

我得到光标计数 0 实际上我向 sdcard 添加了一个文件夹，但文件没有出现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T09:17:30.863

请使用此代码来实现此功能。

```
public class SdCardSongsFragment extends Fragment {
public File file;
private List<String> myList;
private List<String> mycountList;
private ListView listView;
private TextView pathTextView;
private String mediapath = new String(Environment.getExternalStorageDirectory().getAbsolutePath());
String selection =MediaStore.Audio.Media.DATA +" like ?";
String[] projection = {MediaStore.Audio.Media.DATA , MediaStore.Audio.Media.DISPLAY_NAME}; 
Cursor cursor2;
//your database elect statement 
String selection2 = MediaStore.Audio.Media.IS_MUSIC + " != 0";
//your projection statement 
String[] projection2= {
        MediaStore.Audio.Media._ID,
        MediaStore.Audio.Media.ARTIST,
        MediaStore.Audio.Media.TITLE,
        MediaStore.Audio.Media.DATA,
        MediaStore.Audio.Media.DISPLAY_NAME,
        MediaStore.Audio.Media.DURATION,
        MediaStore.Audio.Media.ALBUM_ID
};

private final static String[] acceptedExtensions= {"mp3", "mp2", "wav", "flac", "ogg", "au" , "snd", "mid", "midi", "kar"
    , "mga", "aif", "aiff", "aifc", "m3u", "oga", "spx"};

/** Called when the activity is first created. */
@Override

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.activity_sdcrad_song, container, false);

    listView=(ListView) rootView.findViewById(R.id.pathlist);
    pathTextView=(TextView) rootView.findViewById(R.id.path);

    myList = new ArrayList<String>();   
    mycountList= new ArrayList<String>();   
    String root_sd = Environment.getExternalStorageDirectory().toString();
    Log.e("Root",root_sd);

    String state = Environment.getExternalStorageState();
    File list[] = null ;
    /* if ( Environment.MEDIA_MOUNTED.equals(state) || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state) ) {  // we can read the External Storage...
        list=getAllFilesOfDir(Environment.getExternalStorageDirectory());
    }*/

    pathTextView.setText(root_sd);

    file = new File( root_sd ) ;       
    list = file.listFiles(new AudioFilter());
    Log.e("Size of list ","" +list.length);
    //LoadDirectory(root_sd);

    for( int i=0; i< list.length; i++)
    {

        String name=list[i].getName();
        int count =     getAudioFileCount(list[i].getAbsolutePath());
        Log.e("Count : "+count, list[i].getAbsolutePath());
        if(count!=0) {
            myList.add(name);
            mycountList.add(""+count);
        }

    }

    listView.setAdapter(new SDcardSongListAdapter(getActivity(), myList,mycountList ));

    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            File temp_file = new File( file, myList.get( position ) );  

            if( !temp_file.isFile())        
            {

                file = new File( file, myList.get( position ));
                File list[] = file.listFiles(new AudioFilter());

                myList.clear();
                mycountList.clear();
                for( int i=0; i< list.length; i++)
                {
                    String name=list[i].getName();

                    int count =     getAudioFileCount(list[i].getAbsolutePath());
                    Log.e("Count : "+count, list[i].getAbsolutePath());
                    if(count!=0) {
                        myList.add(name);
                        mycountList.add(""+count);
                    }

                }

                pathTextView.setText( file.toString());
                //Toast.makeText(getApplicationContext(), file.toString(), Toast.LENGTH_LONG).show(); 
                listView.setAdapter(new SDcardSongListAdapter(getActivity(), myList,mycountList ));

            }

            else {
                Log.e("Not dirctory ", file.getAbsolutePath());
                Cursor cur=getAudioFileCursor(file.getAbsolutePath());
                Log.e("Cur count ", ""+cur.getCount());
                 MusicUtils.playAll(getActivity(), cur,position);
            }

        }
    });
    return rootView;

}

private int getAudioFileCount(String dirPath) {

     Log.e("Path :  ", dirPath);
    String[] selectionArgs={dirPath+"%"};
    Cursor cursor = getActivity().managedQuery(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection2,
            selection,
            selectionArgs,
            null);

    cursor2=cursor;
    if(cursor!=null)
        Log.e("Cur : ", ""+cursor.getCount());
    return cursor.getCount();
}

private Cursor getAudioFileCursor(String dirPath) {

    String[] selectionArgs={dirPath+"%"};
    Cursor cursor = getActivity().managedQuery(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection2,
            selection,
            selectionArgs,
            null);
    return cursor;
}

public void onBack() {
    String parent="";
    if(file!=null)
        parent = file.getParent().toString();

    file = new File( parent ) ;         
    File list[] = file.listFiles(new AudioFilter());

    myList.clear();
    mycountList.clear();
    for( int i=0; i< list.length; i++)
    {
        String name=list[i].getName();
        int count =     getAudioFileCount(list[i].getAbsolutePath());
        Log.e("Count : "+count, list[i].getAbsolutePath());
        if(count!=0) {
            myList.add(name);
            mycountList.add(""+count);

        }
        /*int count=getAllFilesOfDir(list[i]);
            Log.e("Songs count ",""+count);
            if(count!=0)*/

    }
    pathTextView.setText(parent);
    //  Toast.makeText(getApplicationContext(), parent,          Toast.LENGTH_LONG).show(); 
    listView.setAdapter(new SDcardSongListAdapter(getActivity(), myList,mycountList ));

}

// class to limit the choices shown when browsing to SD card to media files
public class AudioFilter implements FileFilter {

    // only want to see the following audio file types
    private String[] extension = {".aac", ".mp3", ".wav", ".ogg", ".midi", ".3gp", ".mp4", ".m4a", ".amr", ".flac"};

    @Override
    public boolean accept(File pathname) {

        // if we are looking at a directory/file that's not hidden we want to see it so return TRUE
        if ((pathname.isDirectory() || pathname.isFile()) && !pathname.isHidden()){
            return true;
        }

        // loops through and determines the extension of all files in the directory
        // returns TRUE to only show the audio files defined in the String[] extension array
        for (String ext : extension) {
            if (pathname.getName().toLowerCase().endsWith(ext)) {
                return true;
            }
        }

        return false;
    }      
} 
```

}

XML文件代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/title_songs"
android:orientation="vertical" >

<TextView
    android:id="@+id/pathDR"
    android:layout_width="fill_parent"
    android:layout_height="70dp"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="10dp"
    android:gravity="bottom"
    android:text="Directory"
    android:textColor="#ffffff"
    android:textSize="19sp"
    android:typeface="monospace" />

<TextView
    android:id="@+id/path"
    android:layout_width="fill_parent"
    android:layout_height="18dp"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="10dp"
    android:gravity="bottom"
    android:text=""
    android:textColor="#ffffff"
    android:textSize="12sp"
    android:typeface="monospace" />

<View
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:background="#ffffff" />

<ListView
  android:background="@drawable/bg"
    android:id="@+id/pathlist"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ListView>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T11:10:58.937

//试试这个它的工作代码

```
public ArrayList<HashMap<String, String>> getAudioList() {

    ArrayList<HashMap<String, String>> mSongsList = new ArrayList<HashMap<String, String>>();
    Cursor mCursor = getContentResolver().query(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            new String[] { MediaStore.Audio.Media.DISPLAY_NAME,
                    MediaStore.Audio.Media.DATA }, null, null, null);

    int count = mCursor.getCount();
    System.out.println("total no of songs are=" + count);
    HashMap<String, String> songMap;
    while (mCursor.moveToNext()) {
        songMap = new HashMap<String, String>();
        songMap.put(
                "songTitle",
                mCursor.getString(mCursor
                        .getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME)));
        songMap.put("songPath", mCursor.getString(mCursor
                .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA)));
        mSongsList.add(songMap);
    }
    mCursor.close();
    return mSongsList;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T08:53:08.450

这将帮助您使用该播放列表制作列表视图

```
public class PlayListActivity extends ListActivity {
public ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
private Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playlist);
    EditText search = (EditText) findViewById(R.id.et_search_music);
    ListView lv = (ListView) findViewById(android.R.id.list);
    context = PlayListActivity.this;
    ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();
    this.songsList = MusicPlayerActivity.songsList;
    if (this.songsList.size() > 0) {
        final SimpleAdapter adapter = new SimpleAdapter(this,
                this.songsList, R.layout.playlist_item,
                new String[] { "songTitle" }, new int[] { R.id.songTitle });
        setListAdapter(adapter);
        lv.setTextFilterEnabled(true);
        lv = getListView();
        search.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start,
                    int before, int count) {
                adapter.getFilter().filter(s);

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start,
                    int count, int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        });
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                int CurrentSongIndex = position;
                Intent in = new Intent();
                in.putExtra("songIndex", CurrentSongIndex);
                setResult(100, in);
                finish();
            }
        });
    }
} 
```

}

# facebook - 当他/她离开我的网站时如何设置用户状态离线

> ID：10227898
> 
> 赞同：0
> 
> 时间：2012-04-19T12:17:54.000
> 
> 标签：facebook, offline, browser-close

我正在使用 php 开发一个网站。当他通过关闭浏览器而不单击注销按钮离开网站时，我们如何在数据库中将用户状态设置为离线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:31:20.263

```
$(window).bind('beforeunload', function(){
  // Do your AJAX call here to set it to offline
}); 
```

# jquery - 如何在 Jquery 中准备好的文档上运行我的函数

> ID：10227900
> 
> 赞同：0
> 
> 时间：2012-04-19T12:18:00.770
> 
> 标签：jquery, function

我创建了一些 jquery 代码，它获取一些 json 数据并将其显示在页面上。为了重用它，我将它包装在一个函数中：

```
$(function(e) {
var answer;
id = 1;

var question = function() {
    $.getJSON('getjson.php?id=' + id, function(data){
        console.log(data);
    var $htmlString = "";
     $.each(data, function(index) {
        $htmlString += "<h2>" + data[index].question + "</h2>";
                str =  data[index].answer;
                 answer = data[index].answer.split(', ');

    $htmlString += "<ul>";
    for(var index in answer) {

       $htmlString += "<li>" + index + " : " + answer[Math.floor(Math.random() * answer.length)] + "</li>";

    }
    $htmlString += "</ul>";
    });$('#content').html($htmlString);
    });
};
}); 
```

现在，第一次加载页面时，我需要该功能自行运行，然后当我单击“下一步”时，id 会增加并触发该功能。当我使用点击触发器时，上面的功能很好用，但是如何在文档准备好后立即触发它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:19:26.027

你快到了。因为您将一个函数传递给`$()`，所以您连接到一个[`ready`](http://api.jquery.com/ready)处理程序（它是一个[快捷方式](http://api.jquery.com/jQuery/#jQuery3)）。所以只需在最后添加对函数的调用：

```
};

question();

}); 
```

还有，你说过

> 当我使用点击触发器时，上面的功能很好用，但是如何在文档准备好后立即触发它。

...但我没有看到你把它挂在任何地方。如果你不是，你也想这样做，例如：

```
 // Hook up click
    $("selector for elements to click on").click(question);

    // Call right now, since we're in a `ready` handler
    question();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:25:11.133

您还可以使用：

```
$(function(){
  (question = function(){
    // your code
  })();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:23:41.210

```
// Your function definition, which you could minify here or keep in a separate file
...var question...

// Shorthand for the jquery document.ready
$(function() {
    // Code here to call custom functions
}); 
```

# c# - 删除源时如何删除符号链接？

> ID：10227901
> 
> 赞同：1
> 
> 时间：2012-04-19T12:18:04.560
> 
> 标签：c#, .net

我的程序从目的地创建符号链接`D:\source`。符号链接在`D:\Destination`.

当我从源文件夹中删除时，如何删除目标文件夹中的符号链接？

我的程序按时间间隔运行，因此它会扫描源代码并创建符号链接。所以我想它应该在扫描时删除？

# c# - 通过远程活动目录验证用户

> ID：10227904
> 
> 赞同：0
> 
> 时间：2012-04-19T12:18:17.917
> 
> 标签：c#, winforms, active-directory

我有一个奇怪的场景，希望你们能帮忙，我需要使用活动目录验证当前登录的用户，如果他们在网络上，这不是问题，但在某些情况下，他们将在另一个网络上（访问客户），以便他们使用他们需要针对 AD 进行验证的软件。

目前我正在使用以下代码，我是否正确地说这将在本地和远程工作？如果不是，我怎样才能得到它来验证凭据？

```
DomainServer = new ActiveDirectory(Microsoft.Exchange.WebServices.Data.ExchangeVersion.Exchange2010, "LDAP://DOMAIN.NAME", "https://exchange.domain.name/ews/exchange.asmx");
DomainServer.connect();
if (!DomainServer.isConnected())
{
    domain_errors = "Unable to connect to Active Directory.";
}

class ActiveDirectory
    {
        private ExchangeService _ExchangeServer;
        private DirectoryEntry _searchRoot;
        private DirectorySearcher _search;
        private SearchResult _searchresult;
        private ExchangeVersion _ExchangeVer;
        private string _ActiveDirectoryAddress; 
        private string _ActiveDirectoryURL; 

        public ActiveDirectory(ExchangeVersion Ver, string ActiveDirectoryAddress, string ActiveDirectoryURL)
        {
            _ActiveDirectoryURL = ActiveDirectoryURL;            
            _ActiveDirectoryAddress = ActiveDirectoryAddress;
            _ExchangeVer = Ver;            
        }
        public void connect()
        {
            _ExchangeServer = new ExchangeService(_ExchangeVer);
            _ExchangeServer.UseDefaultCredentials = true;
            _ExchangeServer.Url = new Uri(_ActiveDirectoryURL);
            _ExchangeServer.Timeout = 60;
        }
        public bool isConnected()
        {            
            if (_searchRoot.Properties.Count > 0){
                return true;
            } else {
                return false;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:41:19.253

Windows 在本地机器上缓存用户名和密码，以便域用户可以登录，即使机器（例如笔记本电脑）未连接到域。由于 Windows 本质上是为您处理身份验证，因此您真正需要做的就是授权谁可以使用该软件。我能想到几种可能性。

首先，在数据库中，您可以维护一个用户表，其中包含有权访问该软件的用户的 SID 和用户名。当用户执行程序时，检查当前登录用户的 SID 是否在该表中。这样，您可以限制哪些用户可以在不连接到 Active Directory 的情况下实际执行该软件。这也将允许您在数据库级别撤消访问权限。

其次，数据库服务器是否有权访问 Active Directory？如果是这样，请在 AD 中为有权访问此系统的用户创建一个组，然后授予该组在数据库中的访问权限。将数据库连接设置为使用 Windows 身份验证。因此，如果此人在该组中，则他们可以访问数据库。否则，他们不会。然后，您可以通过在该组中添加或删除它们来控制访问，并且安全性将在数据库级别进行控制。

第三（我不喜欢这个），如果你有一个 Web 服务器，运行一个接受用户名和密码的 Web 服务（当然使用 HTTPS），然后使用该 Web 服务通过你的防火墙连接并进行身份验证反对AD。然后，只需将结果返回给您的应用程序。这带来了一些将凭据传递给 Web 服务并通过防火墙打开连接的安全问题。

# c++ - C++（不带 MFC）禁用/灰色菜单项

> ID：10227907
> 
> 赞同：1
> 
> 时间：2012-04-19T12:18:31.583
> 
> 标签：c++, winapi, menu

我的程序试图灰显（和禁用）子菜单项时遇到问题。

我正在寻找的是禁用“运行”项，除非所需的 .ini 条目不为空。

我的代码

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
HMENU hmenu = GetMenu(hWnd);
// Reading in ini
    if (0 == strcmp(webLocation, "")){
    EnableMenuItem(hmenu,ID_WEBSERVICES_RUN,MF_DISABLED | MF_GRAYED);
    WritePrivateProfileString(_T("WEBSERVICES"), _T("Location"), _T("Tool Not Found"), WpathStr);
} 
```

我不确定我是否正确获取了 HMENU，以及为什么此代码无法达到预期的效果。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:23:04.173

你不能只把它放在顶层的 WndProc 中。WndProc 处理事件，窗口是否已经构建。由于许多不同的原因，它会被多次调用。

您的 WndProc 几乎肯定会看起来像一个大开关`message`。你想要的一个是[`WM_INITDIALOG`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645428.aspx)：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
         case WM_INITDIALOG:
             // jump to a new function that reads the .ini
             // and disables the control etc.
             return OnInitDialog(hWnd, wParam, lParam);

         default:
             return DefWindowProc(hWnd, message, wParam, lParam);
    }
} 
```

# java - 将超过 1 个图像组合成一个 gif

> ID：10227913
> 
> 赞同：0
> 
> 时间：2012-04-19T12:19:13.363
> 
> 标签：java, android

我想知道是否可以将超过 1 个图像组合成一个 gif？

所以，基本上你导入 2 张照片并用它们制作一个 gif。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:25:16.530

当然，这是一种方法：

*   将最终图像创建为`new BufferedImage(...)`
*   获取`Graphics`图像上的对象`image.getGraphics()`
*   调用`graphics.drawImage()`您要放在较大图像上的每个图像（您可以使用 加载这些图像`ImageIO`）
*   用于`ImageIO`将输出写`BufferedImage`为 GIF

# database - 表必须接收外键？

> ID：10227914
> 
> 赞同：0
> 
> 时间：2012-04-19T12:19:13.820
> 
> 标签：database, normalization, rdbms

这是一个简单的问题，但我想我总是用错了方法。

我有三个名为*Page* -> *Tag* -> *Attribute*的表。Tag 表接收 Page_Id（外键），Attribute 表接收 Tag_Id（外键）。

**属性表也必须接收 Page_Id？**

我从来没有这样做过，但是我看到了一个数据库 SQL 生成器，所以，我意识到这让所有的工作变得更容易，但这也是正确的方法吗？

* * *

**使用表格的详细信息进行编辑：** Page 表格包含 HTML 页面和一些属性，例如内容、标题、文档类型和 html 页面的所有其他单个元素。

Tag 表包含 html 页面的 HTML 标记，其中包含标记（a、p、br、h1、标题等）和整个标记之类的信息。

Attribute 表包含一个标签的所有属性，就像一个带有键和值的 Map，其中每个条目都是一个属性和一个值。

页面包含多个标签（1：N），标签包含多个属性（1：N）。每个表都包含一个唯一标识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:22:28.623

这是那些“取决于”情况之一 -*从逻辑上讲*，您不需要将值存储在 中`Attribute`，因为您可以通过加入来获取此信息`Tag`。

但是，在某些情况下，无需加入 to 即可从to “跳转”可能对您*很有用*。在这种情况下，您可以包含in ，但您应该添加额外的约束以确保它不会与存储在 中的值不一致。`Attribute``Page``Tag``Page_Id``Attribute``Tag`

* * *

您可以通过在其中声明两个键来强制实现这种一致性`Tag`——您定义的常用键（例如`Tag_Id`），以及 and 上的超级`Tag_Id`键`Page_Id`。然后，您将声明一个`Attribute`包含*两*列的外键约束，并引用此超键。无论您是这样做*而不是*外键约束`Tag_Id`，还是除此之外，也可能是偏好/风格的问题。

* * *

如果`Tag`s 可能会更改`Page`s，那么您通常会将超键的外键声明为`UPDATE CASCADE`发生 an 的外键 - 这样，如果表中发生`Page_Id`更改，则`Tag`该更改将自动应用于`Attribute`表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:24:01.770

没有必要，如果您严格规范化，那么答案应该是“page_id 不应该在表属性上”。但通常需要（用于报告或只是加快某些操作）对表进行非规范化，例如在表上添加一个字段，您可以通过简单的查询（如您的示例中）获得该字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T03:25:53.230

我还没有看到你的表结构，所以我必须继续你的描述。这总是有风险的。

如果您的描述意味着页面和标签之间存在 1:M 关系，并且标签和属性之间存在 1:M 关系，那么起始关系的示例数据应该类似于下表。（起始关系总是包含所有表的所有属性。）我认为

*   page_id 应该标识一个页面，
*   tag_id 应该标识一个标签，并且
*   标记的属性取决于该标记出现的页面。（因此标签和属性之间*不*存在多值依赖关系。）

    ```
    Table_A
    page_id  page_name  tag_id  tag_name  attr_id
    --
    1        page1      1       tag1      attr1
    1        page1      1       tag1      attr2
    1        page1      2       tag2      attr1
    1        page1      2       tag2      attr3
    2        page2      1       tag1      attr1
    2        page2      1       tag1      attr2
    2        page2      2       tag2      attr1
    2        page2      2       tag2      attr2 
    ```

我们已经从您的描述中知道 page_id -> page_name 和 tag_id -> tag_name。（除非你想伤害自己，page_name -> page_id 和 tag_name -> tag_id 也是如此。）所以让我们根据这些知识来设计新表。

```
Table_C
tag_id  tag_name
--
1       tag1
2       tag2

Table_B
page_id  page_name
--
1        page1
2        page2

Table_A
page_id  tag_id  attr_id
--
1        1       attr1
1        1       attr2
1        2       attr1
1        2       attr3
2        1       attr1
2        1       attr2
2        2       attr1
2        2       attr2 
```

Table_A 中保留了哪些功能、多值或连接依赖项？没有了。唯一的候选键是 {page_id, tag_id, attr_id}。我很确定这三个表都至少在 5NF 中。

因此，如果您对起始表进行规范化，您最终会得到“最后一个”表中的 page_id。（顺便说一句，它不再是一个真正的属性表了，是吗？）

# optimization - Haskell：列表/向量/数组性能调优

> ID：10227917
> 
> 赞同：7
> 
> 时间：2012-04-19T12:19:23.300
> 
> 标签：optimization, haskell, data-structures, vector

我正在尝试使用 Haskell 来计算统计物理学中模型的配分函数。这涉及遍历相当大的配置列表并对各种可观察值求和——我希望尽可能高效地做到这一点。

我的代码的当前版本在这里：[https ://gist.github.com/2420539](https://gist.github.com/2420539)

尝试在列表和向量之间进行选择以枚举配置时会发生一些奇怪的事情；特别是，要截断列表，使用`V.toList . V.take (3^n) . V.fromList`(where `V`is `Data.Vector`) 比仅使用更快`take`，这感觉有点违反直觉。在这两种情况下，列表都是惰性评估的。

列表本身是使用`iterate`;构建的 相反，如果我`Vector`尽可能多地使用 s 并通过 using 构建列表`V.iterateN`，那么它再次变得更慢......

我的问题是，有没有办法（除了拼接`V.toList`和`V.fromList`代码中的随机位置）来预测哪个最快？（顺便说一句，我使用`ghc -O2`当前稳定版本编译所有内容。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T12:24:45.610

向量是严格的，并且有*O(1)*个子集（例如*take*）。它们还具有优化的插入和删除。因此，您有时会看到通过动态切换数据结构来提高性能。然而，这通常是错误的方法——将所有数据保存为一种形式或另一种形式会更好。（而且您也在使用 UArrays - 进一步混淆了这个问题）。

一般规则：

*   如果数据很大并且仅以批量方式进行转换，则使用密集、高效的结构（如向量）是有意义的。

*   如果数据很小，并且很少线性遍历，那么列表是有意义的。

请记住，列表和向量上的操作具有不同的复杂性，因此虽然`iterate . replicate`在列表上是*O(n)*，但是是惰性的，但对向量的相同操作不一定会那么有效（您应该更喜欢向量中的内置方法来生成数组）。

一般来说，向量应该总是更适合数值运算。可能您必须使用在列表中执行的不同功能。

我只会坚持使用向量。避免使用 UArray，并避免使用列表作为生成器。

# ios - 圆形 UIPickerView

> ID：10227924
> 
> 赞同：0
> 
> 时间：2012-04-19T12:19:42.437
> 
> 标签：ios, uipickerview

任何人都知道如何在自定义选择器的组件中创建连续值，例如月份轮换日期`UIPickerView`？这是我的源数组数据：

```
self.one =[[NSMutableArray alloc]init];
for (int i=0; i<=101; i++) {
    [one addObject:[NSNumber numberWithInt:i]];
}

//and here my titleforrow method

if (component==0) {
    return [[one objectAtIndex:row] stringValue];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:29:33.203

看看 DialController[在这里](http://dev.doukasd.com/2011/04/infinite-scrolling-dial-control-for-ios/)。

有一个视频和一些示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T06:43:33.907

您可能对此感兴趣[`DLPickerView`](https://github.com/danleechina/DLPickerView)。这个选择器视图可以完全取代`UIPickerView`. 是的，您可以`DLPickerView`循环滚动。并配置许多其他`UIPickerView`没有的新功能。

# c++ - 使用 C++ 构建错误 - 'find_if' 不是 'std' 的成员

> ID：10227928
> 
> 赞同：23
> 
> 时间：2012-04-19T12:19:53.520
> 
> 标签：c++, build

在构建项目时，我收到了这个神秘的错误：

“find_if”不是“std”的成员

find_if() 以这种方式使用：std::find_if(...)。

知道它可能来自哪里吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-19T12:22:19.857

添加包含：

```
#include <algorithm> 
```

到你的实现文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-19T12:21:21.790

你有没有包括标题

```
#include <algorithm> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-19T12:21:35.890

你需要`#include <algorithm>`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-19T12:21:51.640

包含`<algorithm>`头文件：

```
#include <algorithm> 
```

# c - malloc 检查点

> ID：10227932
> 
> 赞同：1
> 
> 时间：2012-04-19T12:20:05.230
> 
> 标签：c, memory-management, malloc

我相信一定有人已经实现了这样的东西！我正在寻找的是能够“检查点”堆状态，然后清除自上一个检查点以来发生的所有分配。基本上，我正在寻找的是 _CrtMemCheck API 的自然推论。

类似的东西（最好是跨平台的）

```
//we save the heap state here in s1
_CrtMemCheckpoint( &s1 );

//allocs and frees

//Get rid of all allocs since checkpoint s1 that have not been freed!
_CrtMemClearAllObjectsSince(&s1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:56:20.320

另一个可能且有趣的解决方案可能是使用 LD_PRELOAD。正如 LD_PRELOAD 的手册页所述，“这可用于选择性地覆盖其他共享库中的函数。”

因此，您可以拥有自己的 malloc 和 free 实现，您可以在其中实现所需的检查，然后调用默认的 malloc 或 free。

您可以在此处查看详细信息：http: [//somethingswhichidintknow.blogspot.com/2009/10/dll-injection.html](http://somethingswhichidintknow.blogspot.com/2009/10/dll-injection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:23:11.837

[您可以使用挂钩](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Hooks-for-Malloc.html)修改 malloc()/free()以记住分配的内存（例如，假设您将新指针记录在指针数组中）。然后你可以有两个功能：

*   `int get_checkpoint()`，返回下一个空闲数组索引，
*   `void free_until(int checkpoint)`，这会将内存从数组中当前存储的指针中向后释放，直到`checkpoint`达到。

这样，您可以执行以下操作：

```
int cpoint = get_checkpoint();
LibraryDoSomething();
free_until(cpoint); 
```

当然，这种技术还是很危险的；调用 C 库函数可能会产生很容易影响的副作用。最好的建议仍然是 Amardeep。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T16:32:50.430

在 C 中没有使用标记/释放内存分配的标准方法。如果您知道所有`malloc`/ `free calls will be used in a LIFO fashion, you may be able to link in your own`malloc `/`free 函数使用类似以下内容的事实：

```
#define MY_HEAP_SIZE 12345678
unsigned char my_mem[MY_HEAP_SIZE];
unsigned char *my_alloc_ptr = my_mem;

void *malloc(size_t size)
{
  void *ret = my_alloc_ptr;
  if (size <= MY_HEAP_SIZE && ((my_alloc_ptr - my_mem)+size) <= MY_HEAP_SIZE)
  {
    my_alloc_ptr += size;
    return (void*)ret;
  }
  else
    return (void*)0;
}

void free(void *ptr)
{
  if (ptr)
    my_alloc_ptr = ptr;
} 
```

这种方法要求每个分配块的开销为零，但调用`free()`任何块也将释放以后分配的所有块。如果外部代码不`malloc/free`按 LIFO 顺序使用，则可以使用另一种方法，但如果在您的代码这样做之前不释放块，则可以`free()`不做任何事情，但有一些其他功能像`free`上面一样。更复杂的变化也是可能的，但在第一种方法就足够的情况下，它的效率是无可匹敌的。非常适合嵌入式系统（尽管我通常将其称为 malloc 以外的其他名称）。

# c# - C#更改父（抽象）类中子类的类型

> ID：10227935
> 
> 赞同：1
> 
> 时间：2012-04-19T12:20:14.567
> 
> 标签：c#, inheritance

代码：

```
abstract class Parent{
    void changeChild(){

    }
}
class Child1: Parent{
}
class Child2: Parent{
}
//-----
Parent parent = new Child1(); //instantiated as Child1
parent.changeChild(); //change type of this class to Child2 
```

所以 parent 应该是 Child2 类的实例。

我知道 Child1 可能与 Child2 不同（更多/更少的字段、方法），但我只想在这个对象上调用构造函数，这是不允许的。

简单的

```
parent = new Child2(); 
```

可以完成，但是有 10 个子类（正在增长），我想把它移到父类中

这在 c# 中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:28:45.967

您不能更改现有对象的类型，但可以创建一个新对象并将其返回。

例子：

```
abstract class Parent{

  Parent ChangeChild<T>() where T : Parent {
    if (typeof(T) == typeof(Child1)) {
      return new Child1(this);
    if (typeof(T) == typeof(Child2)) {
      return new Child2(this);
    } else {
      throw new NotImplementedException("Unhandled type");
    }
  }

}

class Child1: Parent{
  public Child1() {} // create
  public Child1(Parent source) {} // convert
}

class Child2: Parent{
  public Child2() {} // create
  public Child2(Parent source) {} // convert
}

Parent parent = new Child1();
parent = parent.ChangeChild<Child2>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:22:20.207

好吧，如果你只想自动调用那个ctor，应该足以写一些东西，比如

```
class Child1: Child2{
}

class Child2: Parent{
} 
```

所以你有ctor 在构造`Child2`时将被调用。`Child1`但如果是你的，它是完全不同的架构设计。

如果这不是您要的东西，请澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:23:05.820

Automapper 可能是您最好的选择。

```
T changeChild<T>() : Parent{
   // change the type here.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:27:14.290

像这样的东西会起作用吗？

```
abstract class Parent {
    private Parent Proxy;
    public void ChangeChild<T>() where T : Parent, new() {
        Proxy = new T();
    }
} 
```

您必须使用该`Proxy`对象来调用成员和属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T12:35:02.697

你不能这样做。也许你可以创建`Parent`一个包装类

```
class Parent
{
    Parent _child;

    public Parent(Parent child)
    {
        _child = child;
    }

    public void ChangeChild(Parent child)
    {
        _child = child;
    }

    public string AProperty {
        get { return _child.AProperty; }
        set { _child.AProperty = value; }
    }

    public int AMethod(int x)
    {
        return _child.AMethod(x);
    }
} 
```

进而

```
Parent parent = new Parent(new Child1());
parent.AProperty = "hello";
int y = parent.AMethod(55);

parent.ChangeChild(new Child2()); 
```

* * *

注意：父母不应该了解良好的 OO 设计中的特定子项。这确保您可以在以后（例如`Child3`）创建新子代而无需更改`Parent`。

但是，如果这对您来说不是问题，并且您希望父级自动关心更改子级，则更改或重载构造函数

```
 public Parent()
    {
        _child = new Child1();
    } 
```

`ChangeChild`并改变或超载

```
 public void ChangeChild()
    {
       if (_child is Child1) {
           _child = new Child2();
       } else {
           _child = new Child1();
       }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T12:47:56.133

如果您需要在运行时更改某些对象的类型，则不需要继承。你应该在这里使用组合。尝试类似[策略](http://en.wikipedia.org/wiki/Strategy_pattern)（如果`Parent`类代表某种行为）。

```
public class Foo
{
    // provide default value (or inject it via ctor)
    private Parent _parent = new Child1(); 

    public void ChangeChild(Parent parent){
        _parent = parent;
    }

    public void Bar()
    {
        _parent.DoSomething();  
    }
}

public abstract class Parent
{
    public abstract void DoSomething();
}

public class Child1: Parent
{
    public override void DoSomething() { ... }
}

public class Child2: Parent
{
    public override void DoSomething() { ... }
} 
```

现在您可以在运行时更改依赖类型：

```
Foo foo = new Foo(new Child1());
foo.Bar(); // child1 implementation used
foo.ChangeChild(new Child2());
foo.Bar(); // child2 implementation used 
```

# java - 重新连接套接字时重复接收消息

> ID：10227942
> 
> 赞同：1
> 
> 时间：2012-04-19T12:20:36.633
> 
> 标签：java, android, sockets, bufferedreader

我在使用简单的 java 套接字客户端时遇到问题：连接已正确建立，服务器和客户端都接收和发送数据。当客户端失去连接几秒钟时，套接字完成并重新建立。这样做没问题，但是在那一刻，客户端（重新连接之前）收到的最后一条消息（在重新连接之前）再次无缘无故地收到（2 次接收相同的消息）。

**我的代码是：**

*要启动套接字：*

```
Socket sock = new Socket();
sock.bind(null);
InetSocketAddress isa = new InetSocketAddress(serverIPAddress,serverPort);
sock.connect(isa, conectionTimeOut);
sock.setKeepAlive(true);

InputStreamReader isR = new InputStreamReader(sock.getInputStream(), "UTF8");
reader = new BufferedReader(isR);

out = new BufferedWriter(new OutputStreamWriter(
    sock.getOutputStream(), "UTF8")); 
```

*读取数据：*

```
public class IncomingReader implements Runnable {
    String message = "";

    @Override
    public void run() {
        Thread thisThread = Thread.currentThread();
        while (readerThread == thisThread) {
            try {
                while ((message = reader.readLine()) != null) {
                    manageServerMessage(message);
                }
            } catch (IOException e) {
                Log.d(General.TAG, e.getMessage()+" "+e.getCause());
            }
        } 
```

*当连接丢失时：*

```
public void stopSocket() {
    readerThread = null;
    try{
        if (reader != null){
            reader.close();
            reader=null;
        }
    } catch (IOException e) {
        Log.d(General.TAG, e.getMessage()+"    "+e.getCause());
    }
    try{
        if (out != null)
            out.close();
    } catch (IOException e) {
        Log.d(General.TAG, e.getMessage()+" "+e.getCause());
    }
    try{
        if (sock != null){
            sock.close();
            sock=null;
        }
    } catch (IOException e) {
        Log.d(General.TAG, e.getMessage()+"    "+e.getCause());
        sock=null;
    }
    readerThread = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:52:53.043

您如何重新建立您的 Socket 连接？在这个阶段我可以看到两种可能性......

1.  在重新创建连接之前，您并没有完全删除所有“旧”引用。你在创造一个全新的`Socket`吗？`BufferedReader`? `IncomingReader`线？等等。如果您没有重新创建某些东西，它可能会保留以前的值。如果你重用你的`IncomingReader`而不是创建一个新的，它可能仍然具有旧值。

2.  如果连接已关闭，您如何在服务器端处理它？如果您的服务器正在尝试向客户端发送信息，但连接已断开，则服务器可能会在重新建立连接后尝试重新发送最后一条消息。另一种可能性是，如果您的服务器在断开连接时没有关闭（）连接，它也可能会保留一些旧数据。

基本上，尽你所能，你需要确保当连接中断时，与客户端和服务器上的连接相关的所有内容都完全关闭并使用新对象重新创建。如果一切都是一个新的对象，那么就不可能有任何旧数据在周围徘徊以混淆事物。

# jboss7.x - jboss 7的耳塞结构

> ID：10227944
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:20:38.077
> 
> 标签：jboss7.x, ear, build-tools

当我在使用 netbeans 6.9.1 构建的 jboss 7 中部署我的 ear 文件时，我们使用的是 J2EE 1.4、servlet 版本 1.4 和 EJB 版本 2.1。我得到了例外。jboss 7是否有任何特定的部署配置，如果有，请帮助我构建一个可以部署在jboss 7中的合适的ear文件。我有任何构建工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:58:48.913

我刚刚在 jb 6 和 jb7 中测试过，根据以下日志没有发现任何问题：

09:26:15,723 INFO [org.jboss.as.server.deployment]（MSC 服务线程 1-6）JBA S015876：开始部署“mavenproject2-ear-1.0-SNAPSHOT.ear”09:26:15,936 INFO [org .jboss.as.server.deployment]（MSC 服务线程 1-15）JB AS015876：开始部署“mavenproject2-ejb-1.0-SNAPSHOT.jar”09:26:15,936 INFO [org.jboss.as.server.deployment ]（MSC 服务线程 1-8）JBA S015876：开始部署“mavenproject2-web-1.0-SNAPSHOT.war”09:26:17,750 INFO [org.jboss.web]（MSC 服务线程 1-16）JBAS018210：注册环形网络上下文：/mavenproject2-web 09:26:17,754 INFO [org.jboss.as]（MSC 服务线程 1-15）JBAS015951：管理员控制台正在侦听[http://127.0.0.1:9990](http://127.0.0.1:9990) 09:26:17,756 INFO [org.jboss.as]（MSC 服务线程 1-15）JBAS015874：JBoss AS 7.1.1.Final “Brontes”于 27236 毫秒开始 - 已启动 283 个服务中的 202 个（80 个服务是被动的或开启的） -需求）09：26：17,843 INFO [org.jboss.as.server]（DeploymentScanner-threads - 2）JBAS018 559：部署“mavenproject2-ear-1.0-SNAPSHOT.ear”

请注意，这个耳朵是在 netbeans7.1 中以 jboss 6 作为目标服务器创建的，我所做的只是将耳朵复制到 D:\jboss-as-7.1.1.Final\standalone\deployments

# jsf - 在泛型类中注入时 CDI 不起作用 - Java

> ID：10227947
> 
> 赞同：1
> 
> 时间：2012-04-19T12:20:55.940
> 
> 标签：jsf, tomcat, jpa, cdi, jboss-weld

我在tomcat上遇到CDI问题。这是我的代码的一些相关部分：

```
public class JPAUtil {
    private static EntityManagerFactory emf = Persistence.createEntityManagerFactory("unit");

    @Produces @RequestScoped
    public static EntityManager getEntityManager() {
        return emf.createEntityManager();
    }

    public void close(@Disposes EntityManager em) {
        em.close();
    }

} 
```

我的 DAO 课程：

```
public class DAO<T> implements Serializable{

    private final Class<T> classe;

    @Inject
    protected EntityManager em;

    public DAO(Class<T> classe) {
        this.classe = classe;
    }
} 
```

和一个子类：

```
public class UserDao extends DAO<User> implements Serializable{

    public UserDao() {
        super(User.class);
    }
} 
```

由于泛型，我为 DAO 类使用了生产者：

```
public class DAOFactory {

    @Produces
    @SuppressWarnings({ "rawtypes", "unchecked" })
    public DAO createDAO(InjectionPoint injectionPoint) {
        ParameterizedType type = (ParameterizedType) injectionPoint.getType();
        Class classe = (Class) type.getActualTypeArguments()[0];
        return new DAO(classe);
    }
} 
```

在这个例子中：

```
public class Test {
    @Inject UserDAO userDAO;
    @Inject DAO<User> dao;
} 
```

当我尝试使用 UserDAO 类时，一切正常，但是当我使用 DAO 时，EntityManager 仍然为空。有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:20:15.490

在`DAOFactory`使用`new`运算符实例化 DAO 时，如果这样做，CDI 就没有机会在 DAO 实例中注入依赖项。而在`UserDAO`CDI 中管理实体管理器注入。因此，`DAOFactory`您应该在新创建的 DAO 实例中手动设置实体管理器。

# winforms - 输入参数后从 C# 中的外部类获取连接字符串

> ID：10227949
> 
> 赞同：0
> 
> 时间：2012-04-19T12:21:15.360
> 
> 标签：winforms, sql-server-2008, c#-4.0, global-variables, connection-string

我有一个 WinForm，其中有 2 个文本框用于输入服务器名称和数据库，RadioButtons 用于在提供程序之间切换，还有 1 个按钮用于根据输入构建 ConnectionStrings。_ServerName 和 _DatabaseName 是全局变量。我想在表单之外构建连接字符串并将结果返回到我的表单中的标签控件，我的外部类中的代码如下：

```
 public static string _ServerName { get; set; }
    public static string _Base { get; set; }
    public static SqlConnection _Con { get; set; }
    static void ConOption1()
    {
        Global._Con = new SqlConnection();
        Global._Con.ConnectionString = @"data source=" + Global._ServerName + "; initial catalog=" + Global._Base + "; Integrated Security=True";
    } 
```

我的表单（Form1）中的代码是：

```
 private void button1_Click(object sender, EventArgs e)
    {
        Global._ServerName = textBox1.Text;
        Global._Base = textBox2.Text;
        ConOption1();
        label1.Text = Global._Con.ToString();
    } 
```

这里的问题是我无法从 Form1 调用 conOption1 来获取 Label1.text 中的内置字符串，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:32:30.090

您没有标记`ConOption1`为公开。

“我不能调用 conOption1 来获取构建的字符串”到底是什么意思？编译器不仅不会编译您的代码，还会指出确切的问题。因为编译器已经告诉你错误在哪里，所以在 SO“哪里是错误”上问这个问题是没有意义的。

# c# - 忽略 .asp 页面的路由 Asp.Net 4.0 路由

> ID：10227954
> 
> 赞同：1
> 
> 时间：2012-04-19T12:21:22.210
> 
> 标签：c#, asp.net, routing, url-routing, asp.net-4.0

我的 global.asax 中有这个 MapPageRoute：

```
RouteTable.Routes.MapPageRoute("TestPages", "{file}", "~/Test/{file}"); 
```

它基本上说如果请求来自任何文件，它会进入测试文件夹。但是我想限制它，以便仅当 URL 中不存在 asp 扩展名时才执行此规则。因此，如果用户键入 Test.asp，则不应发生 URL 路由。但如果它`http://www.something.com/Test/`应该执行类似这条路线的东西。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:16:19.827

为此，我使用了约束。例子：

```
routes.MapPageRoute("CMS", "{*friendlyUrl}", "~/index.aspx", true, null, new RouteValueDictionary { { "incomingUrl", new CatchallConstraint() } }); 
```

其中 CatchallContraint 是一个必须实现 IRouteConstraint 的类。

在 Match 方法中，只需检查文件扩展名，如果是 asp 扩展名则返回 false。

这是我的实现（vb.net）——它比你需要的多一点，因为它可以在 web.config 中配置，但你明白了。

公共类 CatchallConstraint 实现 System.Web.Routing.IRouteConstraint

```
''' <summary>
''' If AppSettings: CatchallIgnoredExtensions doesn't exist, these are the default extensions to ignore in the catch-all route
''' </summary>
''' <remarks></remarks>
Public Const DefaultIgnoredExtensions As String = ".jpg,.gif,.png"

''' <summary>
''' For the catch-all route, checks the AppSettings: CatchallIgnoredExtensions to determine if the route should be ignored.
''' Generally this is for images - if we got to here that means the image was not found, and there's no need to follow this route
''' </summary>
Public Function Match(ByVal httpContext As System.Web.HttpContextBase, ByVal route As System.Web.Routing.Route, ByVal parameterName As String, ByVal values As System.Web.Routing.RouteValueDictionary, ByVal routeDirection As System.Web.Routing.RouteDirection) As Boolean Implements System.Web.Routing.IRouteConstraint.Match
    If routeDirection = Routing.RouteDirection.IncomingRequest Then
        Dim friendlyUrl As String = Nothing
        If values.TryGetValue("friendlyUrl", friendlyUrl) AndAlso Not String.IsNullOrEmpty(friendlyUrl) Then
            If friendlyUrl.Contains(".") Then
                Dim catchallIgnoredExtensions As String = ConfigurationManager.AppSettings("CatchallIgnoredExtensions")
                ' only set defaults if the setting is not found - user may not want to ignore any extensions
                If catchallIgnoredExtensions Is Nothing Then
                    catchallIgnoredExtensions = DefaultIgnoredExtensions
                End If
                ' replace spaces and period to standardize, surround the extensions in commas for searching
                catchallIgnoredExtensions = "," & catchallIgnoredExtensions.Replace(" ", "").Replace(".", "").ToLowerInvariant() & ","
                Dim extension As String = System.IO.Path.GetExtension(friendlyUrl).Replace(".", "")
                If catchallIgnoredExtensions.Contains("," & extension & ",") Then
                    Return False
                End If
            End If
        End If
    End If
    Return True
End Function 
```

结束类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:52:32.120

要忽略路由，请尝试使用以下命令：

```
RouteTable.Routes.Ignore("{resource}.asp/{*pathInfo}"); 
```

将“.asp”更改为要过滤的类型。

# javascript - 我怎样才能得到谷歌搜索的结果？最好是 Json

> ID：10227955
> 
> 赞同：0
> 
> 时间：2012-04-19T12:21:25.190
> 
> 标签：javascript, google-chrome-extension, google-search

就像 "http://en.wikipedia.org/w/api.php?action=parse&prop=text&format=json&page=" 我可以在 wekipedia 中得到搜索结果。它可以返回一个 Json。

如何在 google 中获得搜索结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:34:52.110

谷歌搜索在这里有一个 api：[https ://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

前 100 次搜索是免费的，额外的 1000 次查询需要 5 美元（例如，如果您一天需要 10,000 次查询，则需要支付 50 美元）。

# php - 奇怪的PHP错误：“解析错误：语法错误，意外的$end”在windows下但在linux下没有

> ID：10227958
> 
> 赞同：1
> 
> 时间：2012-04-19T12:21:30.400
> 
> 标签：php, windows, linux

我在linux下开发了一个完美运行的脚本，

```
php -l 
```

命令说没有错误，确实可以正常执行。但是每当我尝试在 WAMP 下运行它时，我都会得到一个

> 解析错误：语法错误，意外 $end

指向文件末尾的消息！搜了一下，没有发现任何错误，两台机器的PHP版本是一样的！您知道什么可以使脚本在 linux 服务器上运行而不是在 windows 上运行吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T20:38:37.313

我找到了！里面有一个`<?`显示html的代码^^一定是`<?php`. 我想知道为什么windows不知道`<?`标签中的PHP文件！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:24:09.150

这意味着您忘记了`}`代码中的 a 或忘记关闭字符串。

但是不要问错误发生在哪里，为此您需要发布代码:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T12:34:16.513

正如 Andreas 所写，这通常意味着一个块或一个引用没有关闭。

但是你说，代码在 linux 下运行良好——所以这两种设置之间肯定有一些不同......

也许您在某处使用短标签（`<?`而不是`<?php`）并且没有在 WAMP 服务器上启用它们？

unix 和 windows 文件之间的另一个大区别通常是换行符，但我想不出一个代码块，其中换行符只会在 windows 下导致此错误

# php - mysql中的STR_TO_DATE转换

> ID：10227959
> 
> 赞同：1
> 
> 时间：2012-04-19T12:21:35.493
> 
> 标签：php, mysql, sql

我做了这个查询，它在列中选择日期，现在我只想从选定的日期获取年份。

```
SELECT column_Name
FROM table_name
WHERE column_name = STR_TO_DATE( '00/00/0000', '%m/%d/%Y' ) 
```

请解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:29:12.363

试试这个，

```
SELECT * FROM table_name WHERE YEAR(column_name) = 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:36:26.157

这个不清楚的问题的答案应该是

```
SELECT YEAR(STR_TO_DATE( '00/00/0000', '%m/%d/%Y' )) as date from table_name 
```

你应该得到帮助

[http://dev.mysql.com/doc/refman/5.0/en/date-calculations.html](http://dev.mysql.com/doc/refman/5.0/en/date-calculations.html)

# c# - 使用 MSBuild 在 Jenkins 中构建 .net 应用程序

> ID：10227967
> 
> 赞同：36
> 
> 时间：2012-04-19T12:21:59.353
> 
> 标签：c#, .net, msbuild, continuous-integration, jenkins

我有一个基于 .net framework 3.5 的 .net 应用程序，我正在尝试在 Jenkins CI 服务器上构建这个应用程序。我添加了 MSBuild 插件，并添加了 2.0、3.5 和 4.0 版本的 MSBuild 的 .exe 文件的路径。但是我的构建过程因显示以下错误消息而失败。

```
Path To MSBuild.exe: msbuild.exe  
Executing command: cmd.exe /C msbuild.exe Neo.sln && exit %%ERRORLEVEL%%  
[Test project] $ cmd.exe /C msbuild.exe Neo.sln && exit %%ERRORLEVEL%%  
'msbuild.exe' is not recognized as an internal or external command,  
operable program or batch file.  
Build step 'Build a Visual Studio project or solution using MSBuild.' marked uild as failure  
Finished: FAILURE 
```

任何人都可以帮助我......？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-19T12:43:59.407

要使 MSBuild 插件工作，您需要在 Jenkins 管理屏幕中配置插件。

注意：在较新的 Jenkins 版本中，您可以在全局工具配置中找到 MSBuild 配置：

[![在此处输入图像描述](../Images/b505bd06fdceab1aecb42cde647214b2.png)](https://i.stack.imgur.com/4EMRz.jpg)

* * *

![Jenkins MSBuild 安装配置](../Images/4fd3a1062e3d4e8e4a6aca4fc7dec716.png)

请注意“名称”字段，我在其中将此特定配置称为 v4.0.30319。您可以随意称呼它，但理想情况下，该名称会以某种方式指代版本。

您需要稍后在失败的 Jenkins PROJECT 中引用此名称。

注意：黄色警告表示“MSBuild 路径”字段应填充目录名而不是文件名。实际上，您也需要在此处输入文件名（即 msbuild.exe），否则构建步骤将失败。

在失败的 Jenkins 项目中，转到 MSBuild 构建步骤。

构建步骤中的第一个字段是“MSBuild 版本”。如果您在配置任何 MSBuild 版本之前创建了构建步骤，则此处的值为（默认）。

![Jenkins MSBuild 构建步骤，选择了（默认）msbuild 配置](../Images/7b17de0b8f5970ca5366bb06d7701cdb.png)

配置一个或多个 MSBuild 版本后，下拉菜单将填充可用配置。选择您需要的那个。

您可以在这里看到，我现在选择了与上述安装匹配的命名配置。

![Jenkins MSBuild 构建步骤，选择了命名的 msbuild 配置](../Images/ffbcafbcef2496acb161fc60d793a638.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-04T00:39:09.313

```
Jenkins | Manage Jenkins | Configure System 
```

向下滚动到 MSBuild 部分，然后单击 MSBuild 安装

定义 msbuild.exe 的完整路径，在我的系统上我有 3.5 和 v4.0.30319

注意 - 即使在 64 位系统上也要指定 32 位工具的路径，否则您可能会收到错误消息：

> 不支持使用 MSBuild 64 位构建 Windows Phone 应用程序。

所以在詹金斯 - 它可能是例如：

名称：版本 3.5

小路：`C:\Windows\Microsoft.NET\Framework\v3.5\MSBuild.exe`

名称：4.0版

小路：`C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSbuild.exe`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T12:26:28.073

I think you should set an absolute path for "msbuild.exe" in your Jenkins configuration, for example:

```
C:\Windows\Microsoft.NET\Framework\v3.5\msbuild.exe 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-21T08:38:28.707

您还可以将 msbuild.exe 所在的路径添加到运行该特定作业的节点（或多个节点）的 PATH 系统环境变量中。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-19T12:27:08.633

你可以尝试执行

```
%comspec% /k ""c:\Program Files\Microsoft Visual Studio 10.0\VC\vcvarsall.bat"" x86 
```

命令，它将临时更新您的环境路径变量以反映 VS2010 构建环境。在调用 MSBUILD 之前执行此操作，看看会发生什么。我在自己的构建脚本中使用它没有问题。

边注; 在您的 PATH 上拥有多个版本的 MSBUILD 很可能会适得其反。专注于让一个版本工作并从那里开始。

# javascript - jQuery触发一个元素的事件

> ID：10227970
> 
> 赞同：0
> 
> 时间：2012-04-19T12:22:05.080
> 
> 标签：javascript, jquery

我的问题和这个[一样](https://stackoverflow.com/questions/7999806/jquery-how-to-trigger-click-event-on-href-element)

我也遇到了同样的问题，`href`事件'clicked'没有触发。然后我更改为`alt`and element is `span`。这是我的代码

```
<li><h2><span id='aa' alt="#inbox"><span>Inbox</span></span></h2></li> 
```

这条线是我的第二个孩子 `ul`。我想在页面加载时触发/单击此行。

但我想知道如何触发这个跨度的（#aa）点击事件。尝试了以下代码。但没有奏效。
第一次尝试：

```
var href = $('#aa').attr('alt');
      window.location.href =href; // this gave me 404 error 
```

第二次尝试：

```
 $('#aa').trigger("click")   // this has no change 
```

**当点击上述 li>span 时，将执行**编辑功能。**我希望页面加载后自动单击 li 的跨度。[这个问题](https://stackoverflow.com/questions/7999806/jquery-how-to-trigger-click-event-on-href-element)的答案在使用时说明了一些问题`<a href>`。因此，我使用了`span`标签。我使用 jQuery 1.6**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:25:46.577

Your first try gave you a 404 because you tried to change the URL to just `#inbox`. I'm assuming you actually wanted to append the hash to your current URL, in which case you can use the [`location.hash`](https://developer.mozilla.org/en/DOM/window.location) property:

```
window.location.hash = href; 
```

I think you may also want to use an `a` element instead of a `span`, since then it will have this behaviour by default and you won't have to bind click events to handle it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:25:09.667

**Edit** : one more thing you are pointing to url which is works for `A` tag not for `Span` tag, [Jquery how to trigger click event on href element](https://stackoverflow.com/questions/7999806/jquery-how-to-trigger-click-event-on-href-element) this is for A tag which you mention in your question.

there is on issue if you are triggring the click event than you should bind click event with the span than use trigger function to trigger it

Write click event

```
$('#aa').click( function() 
    {
             alert('span clicked');
   }); 
```

Trigger event than

```
$('#aa').trigger("click"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:24:44.620

我认为最简单的解决方案是将跨度更改为锚标记以处理加载后的任何点击，如果您只想将哈希标记添加到当前 url。然后你可以有一点 jquery 来选择你想要的页面加载链接。

```
<!doctype html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        window.location.hash = $('#second').attr('href');
    });
    </script>
</head>
<body>
    <ul>
        <li><a href="#first">First</a></li>
        <li><a href="#second" id="second">Second</a></li>
    </ul>
</body>
</html> 
```

如果这不是您想要的，并且您想在点击时运行更多代码，那么您可以将点击逻辑分离到一个函数中并在页面加载时调用它，如下所示：

```
<!doctype html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        //your function that does stuff on click
        function doStuff(item) {
            window.location.hash = $(item).attr('href');
            //cancel the click
            return false;
        }

        //call the function on page load
        doStuff($('#second'));

        //call the function on click
        $('#nav a').click(function() { doStuff(this); });
    });
    </script>
</head>
<body>
    <ul id="nav">
        <li><a href="#first">First</a></li>
        <li><a href="#second" id="second">Second</a></li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T12:53:11.430

如果我理解正确，这将解决您的问题；

像这样给可点击的属性跨越。

```
$('#aa')
        .bind('click', function () { 
               .....
}); 
```

并在 document.ready 中这样称呼它

```
$('#Control_2').click(); 
```**

# backbone.js - 骨干.js 和后端引擎的需要

> ID：10227971
> 
> 赞同：4
> 
> 时间：2012-04-19T12:22:07.990
> 
> 标签：backbone.js, backend, frontend

这几天阅读backbone.js（文档，示例等），据我所知，这个框架让你可以直接在前端编码，几乎所有的后端引擎，因为你可以构建一个MVC架构. 您可以创建数据模型、控制器等。

我的问题是：如果您已经在前端（引擎）上构建了 MVC 架构，那么您只需要云中的数据库（SQL）就可以从中获取或存储数据，为什么还需要后端引擎（RoR3、Java 等）保存文档数据？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T12:27:52.393

您混淆了前端的两种不同含义，主干框架中的模型无法直接连接到数据库，该模型旨在连接到连接到数据库的 API（这将是您的后端）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:26:43.610

Things you still need to do on the server:

*   authentication
*   authorization
*   data sanitation and filtering

Possiby

*   interact to third parties
*   business logic that involves modules other than UI

etc.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T04:34:33.623

前端 MVC 框架（Backbone、Angular 等）都依赖后端服务来提供数据，比如 Backbone，然后将其用作其模型。

您可以在后端有一个完整的 MVC 模式，它接受请求并吐出一些 JSON 供前端 MVC 框架使用。

如果您只想要一个数据库而不创建服务器，我建议您使用 Google FusionTables - 但您需要 OAuth，甚至可能需要 ClientLogin（取决于）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:27:08.917

因为据我所知 Backbone 使用 RESTful 服务，它需要一个服务器来处理请求：

```
get: to list data from the db
post: to add new stuff to the db
put: to update current data
delete: to remove data from the db. 
```

..如果你愿意，还可以执行各种与服务器相关的东西

例如，我使用基于 Code Igniter 的 Restful 服务器来处理这些东西。从那里您可以选择要使用的数据库。我已经尝试过使用 MySQL 和 MongoDB

# mongodb - Mongo DB 嵌套分片键

> ID：10227982
> 
> 赞同：5
> 
> 时间：2012-04-19T12:22:35.370
> 
> 标签：mongodb, sharding

我有一个关于 Mongo 分片键的问题。我的文档结构如下：

```
{
    "payload": {
        "id": "364e1f2c-6d4c-45fb-af19-841149286d67",
        "name": "John",
    },
    "source": "myApp",
    "version": "1.0",
    "additionalInfo": {
        "time": "2012-04-18T17:32:11+03:00"
    }
} 
```

我希望我的分片键是：payload.name 和 additionalInfo.time。以下命令因语法错误而失败：

```
db.runCommand({ shardcollection : "collection.table", key : {additionalInfo.time: 1, payload.name: 1}}) 
```

是否可以创建这样的分片键或只接受顶级键。另外，如果我尝试插入一个没有分片键字段的文档，插入会失败吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T12:56:45.807

是的，您需要用引号将您的关键字段括起来：

```
db.runCommand({ shardcollection : "collection.table", key : {'additionalInfo.time': 1, 'payload.name': 1}}) 
```

# ios - 音译/转置 NSString 中的字符

> ID：10227984
> 
> 赞同：12
> 
> 时间：2012-04-19T12:22:42.630
> 
> 标签：ios, objective-c, iphone, nsstring, transliteration

我想将西里尔字符串音译为最接近的拉丁语字符串。例如 "матрешка" => "matreshka", "водка" => "伏特加"。因此，理想情况下，我希望在 NSString 或其他已经了解字母表的所有内容并且可以进行对话的地方使用一些现成的方法。

但是，如果 iOS API 中不存在这样的功能，那么我会对 ruby​​ 的**tr**方法之类的东西感到非常满意，它只是使用指定为参数的简单映射替换字符串中的字符。

```
"баба".tr('абвгд', 'abvgd') 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-19T12:43:12.213

尝试`CFStringTransform`使用转换标识符的 CFMutableString 函数`kCFStringTransformToLatin`或使用简单映射创建 NSString 类别。

*由问题海报编辑：*更具体地说，它应该是：

```
NSMutableString *buffer = [@"русский язык" mutableCopy];
CFMutableStringRef bufferRef = (__bridge CFMutableStringRef)buffer;
CFStringTransform(bufferRef, NULL, kCFStringTransformToLatin, false);
NSLog(@"%@", buffer); // outputs "russkij âzyk" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T12:56:48.563

如果您不需要变音符号或口音，您可以致电`CFStringTransform(bufferRef, NULL, kCFStringTransformStripCombiningMarks, false);`

附加文章： http: [//nshipster.com/cfstringtransform/](http://nshipster.com/cfstringtransform/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-24T00:45:51.753

在 Swift 5 中，`String`有一个名为[`applyingTransform(_:reverse:)`](https://developer.apple.com/documentation/swift/stringprotocol/2923391-applyingtransform). `applyingTransform(_:reverse:)`有以下声明：

```
func applyingTransform(_ transform: StringTransform, reverse: Bool) -> String? 
```

以下 Playground 代码显示了如何使用`applyingTransform(_:reverse:)`以将西里尔字母音译为拉丁字母：

```
import Foundation

let string = "матрешка"
let latinString = string.applyingTransform(StringTransform.toLatin, reverse: false)
let noDiacriticString = latinString?.applyingTransform(StringTransform.stripDiacritics, reverse: false)

print(latinString) // prints: Optional("matreška")
print(noDiacriticString) // prints: Optional("matreska") 
```

* * *

作为替代方案，您可以使用 Core Foundation[`CFStringTransform(_:_:_:_:)`](https://developer.apple.com/documentation/corefoundation/1542411-cfstringtransform)功能：

```
import Foundation

let mutableString = NSMutableString(string: "матрешка")

CFStringTransform(mutableString, nil, kCFStringTransformToLatin, false)
print(mutableString) // prints: matreška

CFStringTransform(mutableString, nil, kCFStringTransformStripDiacritics, false)
print(mutableString) // prints: matreska 
```

# php - 使用好友数组时，FB API /me/friends “错误：为 foreach() 提供的参数无效”

> ID：10227985
> 
> 赞同：0
> 
> 时间：2012-04-19T12:22:42.833
> 
> 标签：php, facebook, facebook-graph-api

这是引发上述错误的代码：

```
 $friend_json = $facebook->api('/me/friends');
    $friends = array();
    foreach($friend_json->data as $friend) {
        $friends[] = $friend->name;
    }
    $friend_list = json_encode($friends); 
```

我知道这段代码是有效的，因为当我执行相同的查询时它没有抛出这个错误，而是在使用直接 Graph API URL 和`file_get_contents();`. SDK 已正确安装，因为它用于在同一脚本中成功提取用户数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:48:11.183

尽管`$user_friends`它是一个数组的数组，据我所知，它在 PHP 中被视为一个对象，但它不喜欢我`'->'`用来访问它的子数组，所以我使用了方括号。谢谢你的帮助。

工作代码： $friend_list = $facebook->api('/me/friends');

```
$friends = array();
foreach($friend_list['data'] as $friend) {
    $friends[] = $friend['name'];
}
$friend_list = json_encode($friends); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:35:03.497

尝试这个，

```
$user_friends = $facebook->api('/me/friends');
$friends_details = json_decode(file_get_contents('https://graph.facebook.com/me/friends?access_token=<your access token>']), true);
for($i=0;$i<sizeof($friends_details);$i++){
   $friends_name[] = $friends_details['data'][$i]['name'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:27:50.013

来自的回应`Facebook::api`是`Array`：

```
foreach($friend_json['data'] as $friend) {
  $friends[] = $friend->name;
} 
```

最好添加简单的错误检查。

```
if ($friend_json && isset($friend_json['data'])
  foreach($friend_json['data'] as $friend) {
    $friends[] = $friend->name;
  } 
```

# jboss - JBoss 7.1.1 和 JBoss Web Native

> ID：10227993
> 
> 赞同：7
> 
> 时间：2012-04-19T12:23:10.043
> 
> 标签：jboss, jboss7.x, apr

我正在尝试在 JBoss 7.1.1中启用[JBoss Web Native 库。](http://www.jboss.org/jbossweb/native)我已经阅读[了这个](https://stackoverflow.com/questions/7342926/how-to-load-apr-connector-native-in-jboss-7)问题和答案，并尝试了以下步骤来启用 JBoss 中的本机库，但到目前为止还没有奏效。我在 OS X 上：

*   [从http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-10](http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-10)下载了*macosx*存档
*   将其解压缩到 JBoss 目录中，这样存档的内容就可以在`bin/native`.
*   更新`bin/standalone.conf`以包含库路径：`JAVA_OPTS="$JAVA_OPTS -Djava.library.path=/path/to/jboss-as-7.1.1.Final-native/bin/native:$PATH"`

启动 JBoss，我仍然可以在日志文件中看到以下内容：

```
[org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-1) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080 
```

而不是预期的`Http11AprProtocol`.

我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T13:02:20.913

结果表明，JBoss 7.1.1 不再需要上述步骤，因为本机库现在捆绑在`modules/org/jboss/as/web/main/lib`.

为了*启用*它们，*我**必须*在. 由于某种原因，它在默认配置中设置为*false ：**`standalone.xml`*

 **```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" 
        native="true">
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <virtual-server name="default-host" enable-welcome-root="true">
        <alias name="localhost"/>
        <alias name="example.com"/>
    </virtual-server>
</subsystem> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:45:10.750

**JBOSS EAP 6.0**

检查 JBOSS_HOME 中是否有 modules/org/jboss/as/web/main/lib。如果不是在我的 JBoss EAP 6.0 版本中。

第一的：`yum install tomcat-native.x86_64`

现在您的系统在 /usr/lib64 下有 tomcat 本机库，该库通常位于 java.library.path 中，然后按照 nwinkler 的建议在子系统 web 中设置 native=true：

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" 
    native="true">
<connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
<virtual-server name="default-host" enable-welcome-root="true">
    <alias name="localhost"/>
    <alias name="example.com"/>
</virtual-server> 
```

现在重新启动 JBOSS。

如果没有安装 tomcat 本机库，您会在日志中找到：

```
10:12:31,700 INFO  [org.apache.catalina.core.AprLifecycleListener] (MSC service thread 1-1) The Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/jdk1.6.0_37/jre/lib/amd64/server:/usr/java/jdk1.6.0_37/jre/lib/amd64:/usr/java/jdk1.6.0_37/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
10:12:32,203 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-8) Starting Coyote HTTP/1.1 on http-/127.0.0.1:8080 
```

安装了 tomcat 本机库后，您的日志将写入：

```
10:22:56,147 INFO  [org.apache.coyote.http11.Http11AprProtocol] (MSC service thread 1-5) Starting Coyote HTTP/1.1 on http-/127.0.0.1:8080 
```

**选择**

1) 从 JBoss 网站下载原生库：

```
wget http://downloads.jboss.org/jbossnative/2.0.10.GA/jboss-native-2.0.10-linux2-x64-ssl.tar.gz 
```

2) 解压

```
tar xvzf jboss-native-2.0.10-linux2-x64-ssl.tar.gz 
```

3）为您的本机库创建一个文件夹：

```
 mkdir -p tomcat-native 
```

4) 在新文件夹中移动 bin/native

```
 mv bin/native tomcat-native 
```

5）使您的文件夹对java可见。在standalone.conf 或 domain.conf 中添加这个

```
 JAVA_OPTS="$JAVA_OPTS -Djava.library.path=[the tomcat-native's folder path] 
```**

# c++ - Zero as a function name

> ID：10227997
> 
> 赞同：2
> 
> 时间：2012-04-19T12:23:23.740
> 
> 标签：c++, function, visual-c++, compiler-construction

The following example compiles (VS2010 C++ compiler issues a warning C4353 though) and expression (*) evaluates to `0`:

```
#include <iostream>
#include <string>

int main()
{
   0(1, "test"); // (*) - any number and type of arguments allowed       
   int n = 0(1, "test"); // 0
   std::string str(0(1, "test")); // Debug assertion fails - 0 pointer passed
} 
```

**Is using `0` as a function name allowed/regulated by C++ standard or its resolution is compiler-specific?** I was looking in the N3242 draft but could not find anything related to this. Microsoft compiler obviously resolves such construct (or one with `__noop`) as an integer with value `0`.

warning C4353:

> warning C4353: nonstandard extension used: constant 0 as function expression. Use __noop function intrinsic instead

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:01:42.840

我不知道答案，但我相信我们可以通过谷歌搜索找到它......

查看MSDN，我找到了两个链接：

*   C4353：http: [//msdn.microsoft.com/en-us/library/2a68558f.aspx](http://msdn.microsoft.com/en-us/library/2a68558f.aspx)
*   `__noop`：http: [//msdn.microsoft.com/en-us/library/s6btaxcs.aspx](http://msdn.microsoft.com/en-us/library/s6btaxcs.aspx)

第二个链接解释了`__noop`

> __noop 内部函数指定应忽略函数并解析参数列表，但不为参数生成代码。它旨在用于采用可变数量参数的全局调试函数。

这个例子表明`__noop`调试代码确实非常有趣：

```
#if DEBUG
    #define PRINT printf_s
#else
    #define PRINT __noop
#endif

int main() { PRINT("\nhello\n"); } 
```

同一页面上的另一条评论给出了该`0`函数的历史提示：

> 编译器在编译时将 __noop 内在转换为 0。

我想，曾几何时，这个扩展被称为`0`，而不是`__noop`，后来微软创建了这个`__noop`关键字，因为它比这个东西更容易搜索，更易读，不那么“奇怪” `0`，并且清楚地标记为扩展（因为两个前导下划线，例如 MSVC's`__declspec`或 gcc's `__attribute__`)。

## 结论：怎么`0`办？

*   这是一个扩展名（根据警告消息）
*   这是一个历史性的，已弃用的扩展
*   它的使用已被弃用，取而代之的是`__noop`
*   至少在 VC++2003 时（如果不是之前），它已被弃用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:37:40.487

函数名是标识符，标识符需要以非数字开头（第 2.11 节）：

```
identifier:
    identifier-nondigit
    identifier identifier-nondigit
    identifier digit 
```

# build-process - Specifying solution build order in the MonoDevelop

> ID：10227999
> 
> 赞同：3
> 
> 时间：2012-04-19T12:23:33.160
> 
> 标签：build-process, monodevelop, projects-and-solutions

I have a C# solution being developed with MonoDevelop, there are a number of projects. When the solution is being built, I need to make sure some project A is built after some other project B in the same solution. I can add reference to project B into project A, that's called Project-To-Project reference. This approach does not fit my requirements as B's output gets copied into A's target folder. So, I can not use P2P reference. According to this, [http://monodevelop.com/Documentation/Solutions_and_Projects_explained](http://monodevelop.com/Documentation/Solutions_and_Projects_explained), solution file (*.sln) supports "specifying build order".

Can anyone provide me with any info on how I can specify projects build order on the solution level, without using P2P references?

TIA