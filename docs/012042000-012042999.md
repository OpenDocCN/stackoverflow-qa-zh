# StackOverflow 问答 12042000-12042999

# javascript - Backbone.View 事件未绑定

> ID：12042010
> 
> 赞同：0
> 
> 时间：2012-08-20T17:10:57.970
> 
> 标签：javascript, backbone.js

我试图解决我的应用程序中的主干幻影视图，这是通过为我的所有视图提供一个关闭方法来实现的，该方法从 DOM 中删除视图。在将视图加载为外部模板后，我的视图正在主 div 标记中呈现。在我发现幽灵视图问题之前，该事件被触发了两次，似乎它们根本没有被绑定。

# amazon-ec2 - 如何使用 Amazon AWS 访问 Flask 应用程序

> ID：12042013
> 
> 赞同：1
> 
> 时间：2012-08-20T17:11:10.367
> 
> 标签：amazon-ec2, amazon-web-services, flask

我正在尝试在 Amazon Linux AMI 上运行 Flask 应用程序，因此我执行以下操作：

```
>>> cd /var/www/testapp
>>> python test.py
INFO:werkzeug: * Running on http://127.0.0.1:5000/ 
```

到目前为止看起来不错，我目前正在使用 localtunnel 访问该站点，所以：

```
>>> localtunnel 5000
Port 5000 is now publicly accessible from http://xxxx.localtunnel.com ... 
```

所以 localtunnel 正在做一些事情，使得在 5000 端口上运行的 test.py 可以公开访问。我自己如何做到这一点？

我使用了 ifconfig 并尝试了它在浏览器中的端口 5000 处提供的 IP 地址的不同组合，但它们都不起作用。

编辑：我尝试将弹性 IP 附加到实例并通过那里访问它，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T18:47:18.733

在不知道任何其他信息的情况下，最可能的答案是您的此实例的安全组需要为端口 5000 打开。

如果不是这样，我们将需要更多信息、日志等。

# csv - 波浪号分隔文件

> ID：12042014
> 
> 赞同：1
> 
> 时间：2012-08-20T17:11:15.277
> 
> 标签：csv, dataformat

我需要阅读一个波浪号分隔的文件。

字段由波浪号 (~) 分隔。

但有时会有多个“波浪号”一个接一个（~~~~~~）。

多个波浪号的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:15:55.907

如果它的波浪号`~`分隔文件，那么两个波浪号 ( `~~`) 表示里面的字段是空的 这是根据定义。

如果不是这样，它不是波浪号分隔的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:13:29.817

这很可能只是表明该字段中缺少数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:33:41.977

双波浪号表示该列为空。

您的 bbc 数据已从 AN 获得 14 列。将其放入电子表格并通过选择波浪号作为分隔符拆分为列，您可以看到模式。

# content-management-system - silverstripe 外部认证

> ID：12042015
> 
> 赞同：0
> 
> 时间：2012-08-20T17:11:16.407
> 
> 标签：content-management-system, silverstripe

有一个自定义登录表单可以让用户访问同一页面上的某些内容。到目前为止，这适用于在 SS 数据库中存储为成员的用户，我在登录后检查用户是否在页面类中具有这样的权限：

```
function isAllowed() {
    if (Member::currentUser()) {
        $PresseGroup = DataObject::get_one('Group', "Code = 'presse'");
        $AdminGroup = DataObject::get_one('Group', "Code = 'administrators'");
        if (Member::currentUser()->inGroup($PresseGroup->ID) || Member::currentUser()->inGroup($AdminGroup->ID)) {
            return true;
        }
    }
} 
```

在模板中我刚刚做了这个：

```
<% if isAllowed %>  
SecretContent
<% end_if %> 
```

到目前为止还可以，但现在用户不会存储在 silverstripe 数据库中 - 他们存储在另一台服务器上。

在该外部服务器上正在运行一个接受用户名和密码的小 php 脚本。该脚本只返回用户具有权限：true 或 false。

我正在通过 cURL 调用该脚本。

我打算覆盖 MemberLoginForm 的 dologin 函数。现在我只是想知道如何在登录后检查用户是否获得了权限并显示内容......我试图在页面的控制器中设置一个变量还是应该设置一个会话变量？那是我的尝试（CustomLoginForm 扩展了 MemberLoginForm）：

```
public function dologin($data) {
if(userHasPermission("user1", "pw")==true){
    $this->controller->Test("test");     
}
$link = $this->controller->Link();
$this->performLogin($data);
$this->controller->redirect($link);
} 
```

我希望有人可以帮助我解决这个问题——我知道非常具体的问题。非常感谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:32:20.570

在 SilverStripe 中，您可以创建自定义身份验证器，这意味着用户可以使用存储在其他地方的帐户登录您的网站，甚至可以只使用硬编码的用户和密码。您可以查看[OpenID 身份验证模块](https://github.com/oddnoc/silverstripe-auth_openid/)以获取有关如何执行此操作的示例代码

但是对于您的任务，这甚至可能是一个复杂的解决方案，登录后只需执行类似`Session::set('isAllowed', true);`的操作并检查是否允许用户查看：

```
function isAllowed() {
    if (Member::currentUser()) {
        $PresseGroup = DataObject::get_one('Group', "Code = 'presse'");
        $AdminGroup = DataObject::get_one('Group', "Code = 'administrators'");
        if (Member::currentUser()->inGroup($PresseGroup->ID) || Member::currentUser()->inGroup($AdminGroup->ID)) {
            return true;
        }
    }
    // if Member::currentUser() is not allowed to view, 
    // return the session, which is either set to true or it returns null if not set 
    return Session::get('isAllowed');
} 
```

# java-ee-6 - glassfish 3.1.2 开源版是否包含所有 Java EE 6 组件？

> ID：12042018
> 
> 赞同：0
> 
> 时间：2012-08-20T17:11:29.113
> 
> 标签：java-ee-6, glassfish-3

glassfish 3.1.2 开源版是否包含所有 Java EE 6 组件？我正在尝试找出我的项目依赖项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:28:56.277

取决于您选择的配置文件。Java EE 6 Web 配置文件或完整平台。

快速的 Google 搜索将为您提供功能/组件的比较

# c# - 如何使用 ClickOnce 应用程序打包 MySQL.Data？

> ID：12042024
> 
> 赞同：3
> 
> 时间：2012-08-20T17:11:38.460
> 
> 标签：c#, mysql, dll, clickonce

我正在.NET 4.0 下的 Visual Studio 2012 中编写 C# 应用程序，我正在尝试将 MySQL.Data DLL 与我的可部署文件打包在一起（我相信这是正确的路径）。

这是我的情况：

*   我有一个 Click Once 应用程序，它引用了我的其他项目之一产生的 DLL。
*   参考中的 DLL 使用 MySQL.Data.MySqlClient。
*   MySql.Data.MySqlClient 不附带.NET 包，但必须与 MySQLConnector.NET 一起安装

我可以将 MySql.Data.dll 文件与我的 click once 应用程序捆绑在一起，并引用它，而不是连接器附带的那个吗？更具体地说；如何确保 DLL 与 ClickOnce 一起消失，以及如何确保创建到该 DLL 的相对链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:04:26.917

要将程序集添加到 ClickOnce 部署，有两种情况。

1：您可以直接引用程序集。将程序集添加到主项目。将构建操作设置为“无”。将“复制到输出目录”设置为“不复制”。添加对访问该程序集的任何项目的引用。浏览到您添加到项目中的 dll 并选择它。将“复制本地”设置为真。

2.您没有直接引用程序集。将程序集添加到主项目。将构建操作设置为“无”。将“复制到输出目录”设置为“始终复制”。

有些程序集可以在本地部署（例如 SQLCE），有些则不能（例如 SQL Server Express）。你可以试试看。

您必须考虑许可，以及它们是否允许您包含 dll 而不是安装软件包作为先决条件。有些公司不允许你随意部署他们的产品。（这是一个技术术语。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:13:02.077

将 MySQL.Data Reference 的“copy local”设置更改为“True”。

# php - 位运算符

> ID：12042025
> 
> 赞同：0
> 
> 时间：2012-08-20T17:11:45.153
> 
> 标签：php, operators, bit-manipulation

我想从 Zenphoto 的插件中理解以下代码：

`$plugin_is_filter = 5|ADMIN_PLUGIN|THEME_PLUGIN;`

该片段与上下文脱节。这只是它背后的想法。

`5|ADMIN_PLUGIN|THEME_PLUGIN`权限是按位使用的吗？

什么时候有用？

感谢您的任何提示，链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:13:32.963

是的，这是[按位 OR](http://php.net/manual/en/language.operators.bitwise.php)的一个例子。

当您有兴趣将多个布尔标志打包成一个整数时，通常会使用按位运算。位运算符允许您操作字节的各个位，这意味着 8 位字节可用于存储 8 个不同的布尔值。当使用整个 8 位字节存储单个二进制“是”或“否”被认为是浪费时，这种技术*很有用。*

今天，几乎没有理由更喜欢在 PHP 中使用这种位打包（尤其是像这样的[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)`5`）而不是简单的配置数组。这种技术几乎没有为 PHP 代码增加任何价值，增加了复杂性并降低了可维护性而没有真正的收益。我会非常怀疑任何以这种方式使用位标志的新 PHP 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:15:28.877

当您需要在一个变量中提供一组布尔选项时，位域很有用。例如，PHP 允许您像这样设置错误报告：

```
error_reporting(E_ERROR | E_WARNING | E_PARSE); 
```

在二进制中，这些常量具有以下值：

```
E_ERROR   0001
E_WARNING 0010
E_PARSE   0100 
```

如果您将一组这样的选项组合在一起，您将能够在一个字段中表达设置：

```
E_ERROR | E_WARNING | E_PARSE 0111 
```

然后，您可以检查使用 AND 设置的选项：

```
if ($option & E_ERROR === E_ERROR) {
    // E_ERROR is set, do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:27:07.580

变量 $plugin_is_filter 用于标记要加载的插件。本质上，它被视为对应于枚举集插件的数组位。有关详细信息，请参阅下面的链接。

这解释了[ADMIN_PLUGIN 和 THEME_PLUGIN 是](http://www.zenphoto.org/documentation/core/_global-definitions.php.html)什么。

在页面中搜索“$plugin_is_filter”以获取有关如何使用此变量的简要说明。

[http://www.zenphoto.org/news/zenphoto-plugin-architecture](http://www.zenphoto.org/news/zenphoto-plugin-architecture)

我希望这有帮助。

# java - Eclipse 的 JSP 可视化设计器插件

> ID：12042026
> 
> 赞同：3
> 
> 时间：2012-08-20T17:11:50.190
> 
> 标签：java, eclipse, jsp, plugins

我注意到 NetBeans 6.x 有非常好的可视化网页设计环境

![在此处输入图像描述](../Images/e8bf9c826b9b11305791bf25d3d35ea3.png)

它可以帮助您通过简单的拖放网页组件来设计您的jsp页面。

由于我没有使用 NetBeans，我的问题是：是否有一些 Eclipse 插件可以为我提供类似的可能性？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-22T23:16:35.510

下载并安装[Eclipse WTP并使用](http://download.eclipse.org/webtools/downloads/)[JSF](http://www.eclipse.org/webtools/jsf/docs/tutorial/JSFTools_1_0_tutorial.html)创建项目

# internet-explorer-8 - Twitter Bootstrap 按钮在 IE8 中无响应

> ID：12042028
> 
> 赞同：2
> 
> 时间：2012-08-20T17:12:12.723
> 
> 标签：internet-explorer-8, twitter-bootstrap

IE对我来说是个谜。我的 Web 应用程序可以在 Safari、Firefox、Chrome 甚至 iPhone 和 iPad 上运行，但对于 IE，我根本无法理解遵守给定标准的难度。反正吐槽就够了。

我的 Twitter 引导按钮在 IE8 中完全被忽略了。当我单击任何按钮时，绝对没有任何反应。我在谷歌上找不到任何东西，有人遇到过这个吗？

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:24:02.857

@Kave您仅将纯html上传到jsfiddle-其中包括指向不存在的js的链接（因此在未附加js时很难调试）..

尝试使用 href 而不是这么多按钮.. twitter bootsrap 支持将链接样式设置为看起来像按钮，例如在 twitter bootstrap 的第一页，如下所示：（复制源代码并稍作修改）：

```
<a class="btn btn-success btn-large" href="http://twitter.github.com/bootstrap/base-css.html">Example link with button styles</a> 
```

**编辑：或者，带有 twitter bootstrap 的完整示例（从演示模板修改 - 与英雄单元内的按钮样式链接）** - 复制并粘贴到文件，保存为 testing.html 并使用浏览器打开 - 享受吧！

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bootstrap, from Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://getbootstrap.com/2.3.2/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
          <div class="hero-unit">
            <h1>Hello, world!</h1>
            <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
            <p><a class="btn btn-success btn-large" onclick="alert('its working :)')">Learn more &raquo;</a></p>
          </div>
        </div>
      </div>

      <hr>

      <footer>
        <p>&copy; Company 2012</p>
      </footer>

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://getbootstrap.com/2.3.2/assets/js/jquery.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-transition.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-alert.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-modal.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-tab.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-tooltip.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-popover.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-button.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-collapse.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-carousel.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-typeahead.js"></script>

  </body>
</html> 
```

如果仍然无法正常工作，请确保在重新启动 IE 时单击“允许阻止的内容”，如果弹出询问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T10:14:05.543

允许阻塞内容是指javascript内容，按钮纯CSS代码，问题是IE 6....8对CSS3没有很好的支持。如果您查看 getbootstrao.com 网站，您不会看到他们使用自己的按钮 :)) 最好的解决方案是使用简单的 CSS 创建按钮，如果有人使用 IE 浏览您的网站，他们可能看不到边框半径效果，但他们会找到实际的方形但可以工作的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T11:21:46.040

我遇到了同样的问题并使用这个 jQuery/js 解决了它：

```
<a href="http://www.example.com">
<button class="btn"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Button text</button>
</a>

<!--[if lt IE 9]>

<script>
$(".btn").click(function() {
        var t = $(this).parent();
        window.location.href = t.attr("href");
});
</script>

<!--[if lt IE 9]> 
```

# jquery - 查询 jquery 中的选项卡创建事件？

> ID：12042031
> 
> 赞同：0
> 
> 时间：2012-08-20T17:12:20.513
> 
> 标签：jquery, jquery-tabs

在[http://docs.jquery.com/UI/Tabs#demo](http://docs.jquery.com/UI/Tabs#demo)我发现下面关于在选项卡向导上创建事件的描述。在我看来，两种方式都将回调函数与 create 事件联系起来。但我相信它们的用法一定有一些不同。**是否应该在创建选项卡时使用第一种方法，而在构建选项卡后使用第二种方法？**

//方法1

```
Supply a callback function to handle the create event as an init option.
$( ".selector" ).tabs({
   create: function(event, ui) { ... }
}); 
```

//方法2

```
Bind to the create event by type: tabscreate.
$( ".selector" ).bind( "tabscreate", function(event, ui) {
  ...
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:20:52.070

不，它们是等价的。[它们都使您能够在创建](http://jqueryui.com/demos/tabs/#event-create)选项卡实例时运行代码。我想说第一种方法比第二种方法更常见一些。尽管 jQuery UI 团队中的某个人需要更新对已弃用`.bind()`函数的引用。

# silverlight - Windows Phone 显示 ConnectionSettingsTask 并返回

> ID：12042034
> 
> 赞同：0
> 
> 时间：2012-08-20T17:12:59.373
> 
> 标签：silverlight, windows-phone-7

我现在正在开发一个 Windows Phone 应用程序。

在应用程序中，我正在处理第 1 页的异常，即当没有 wifi 连接时，它会弹出一个 XNA 消息框，用户可以选择打开 WIFI 设置页面。我有以下代码：

```
ConnectionSettingsTask connectionSettingsTask = new ConnectionSettingsTask();

connectionSettingsTask.ConnectionSettingsType = ConnectionSettingsType.WiFi;

connectionSettingsTask.Show(); 
```

但这样做的问题是，当用户点击页面时，他们将导航回第 1 页，`back key`该`wifi settings`页面存在加载问题，无法显示正确的内容。在这种情况下，我希望用户直接转到另一个页面，称之为第 2 页。

那可能吗？谢谢

++++++++++++++++更新

显示 XNA 消息框时是否可以自定义返回键功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:41:50.133

为什么不在 IsNetworkAvailable 检查中处理此代码？这样你就可以完全避免异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:04:09.077

我不太了解 XNA 编码，但我知道如果您从 wifi 连接页面返回到您的应用程序，`OnNavigatedTo`则会调用该函数。尝试根据应用程序流程设置您的代码流程。如果您在构造函数中执行了一些代码，请将其转换为`OnNavigatedTo`反之亦然，这可能会解决您的问题。此外，如果您想切换到另一个页面，请在同一功能`(OnNavigatedTo)`本身中进行。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:45:14.403

也许您可以更改导航行为：http: [//blogs.msdn.com/b/ptorr/archive/2010/08/28/redirecting-an-initial-navigation.aspx](http://blogs.msdn.com/b/ptorr/archive/2010/08/28/redirecting-an-initial-navigation.aspx)

但是建议将两个页面合并在一起（隐藏加载栏并显示主页），因为您会遇到更少的问题......

# php - 是否有命名控制器功能的约定？

> ID：12042038
> 
> 赞同：2
> 
> 时间：2012-08-20T17:13:13.013
> 
> 标签：php, codeigniter, naming-conventions

在 MVC 中，一些控制器函数需要在渲染视图之前访问模型，而其他的只是加载视图。

在博客应用程序中，我有两个功能：

```
public function add_post()
{
    // loads the view for adding a new post
}

public function add_new_post()
{
    // queries database and inserts post
} 
```

我习惯于使用 Java，其中所有方法都有一个高度暗示性的动词来描述该方法应该做什么。因此，我将使用 add_post_view() 代替 add_post()，并且可以使用 add_post() 代替 add_new_post()。

但我担心在末尾添加“视图”似乎是多余的 - 但除此之外，我想知道对于那些喜欢具有高度可读性代码的人来说，约定是什么。您将如何重写这两个函数的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:18:44.337

对于 php，一般来说，没有专门的命名约定，或者我应该说是标准化的。多年来我在几家公司工作过，从 thisismyfunction 到 thisIsMyFunction 再到 this_is_my_function..

不过，我个人的选择是，如果它的内部功能（模型或控制器等）不支持 AJAX，我倾向于使用下划线方法，并在每个功能下方或上方添加几个注释来给我一个想法。但是对于我打算与 AJAX 一起使用的功能，例如在控制器中，我通常会采用驼峰式路线。一般来说，这一切都与您的偏好有关。如果您对下划线更满意，请使用它，如果不是，则使用驼峰式大小写，或任何适合您的方式。

如果这将是一个团队项目，或者可能是一个团队将加入的项目，或者您希望被收购的项目。我想说的是最简单的学习曲线，你想做的最后一件事就是让其他人加入或销售你将不得不花费很长时间培训人们如何阅读你的代码的产品。而不是收集和离开，或者只是让他们开始建造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:19:02.823

使用“瘦”控制器是一种很好的做法，即不要在任何单个控制器上添加太多方法。考虑到这一点，我通常有一个命名良好的控制器，其中只有一个（最多两个）公共方法。通常对应 GET 和 POST。

# java - Java JFrame removeall 挂起应用程序

> ID：12042039
> 
> 赞同：1
> 
> 时间：2012-08-20T17:13:15.797
> 
> 标签：java, swing, concurrency, jframe, event-dispatch-thread

我有以下代码：

```
ActionListener listenerComboVehicle = new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        comboVehicle.removeActionListener(listenerComboVehicle);
        frameCrewSelection.removeAll();
        frameCrewSelection.add(formCrewSelectionForm(SpaceObjectArray.findMannedByName(comboVehicle.getSelectedItem().toString()))); //Create some controls (Jcombobox comboVehicle included) and assign listeners to them.
        formComboCrews(); //Modify JCombobox controls content
    }
}; 
```

我的应用程序挂在以下代码上`EventDispatchThread.java`：

```
void pumpEventsForFilter(int id, Conditional cond, EventFilter filter) {
    addEventFilter(filter);
    while (doDispatch && cond.evaluate()) {
        if (isInterrupted() || !pumpOneEventForFilters(id)) {
            doDispatch = false;
        }
    }
    removeEventFilter(filter);
} 
```

while 循环是无限的，它会挂起我的应用程序。当`.removeAll()`不存在时，应用程序不会挂起，但我会在旧控件上获得新控件。我通过布置一个框架并再次创建它找到了一种解决方法，但它看起来很讨厌。如果需要，将提供其他代码。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T15:30:44.723

从评论中移出以获得更好的视图：

`frameCrewSelection.getContentPane().removeAll(); frameCrewSelection.setContentPane(formCrewSelectionForm(SpaceObjectArray.findMan‌​nedByName(comboVehicle.getSelectedItem().toString())));`

让它工作。

# java - 可键入的 JComboBox

> ID：12042048
> 
> 赞同：2
> 
> 时间：2012-08-20T17:14:13.160
> 
> 标签：java, swing, autocomplete, jcombobox

我确定有人问过这个问题，但我找不到（也许我不知道如何搜索）。

我有`JComboBox`很多价值观，所以浏览所有这些价值观很痛苦。我希望它像浏览器那样改变它的选择：当你输入第一个字母时，比如说`s`，它会选择第一个以 开头的元素`s`，然后如果你快速输入第二个字母，比如说`a`，选择会变成第一个元素从 开始`sa`，以此类推。

只是一个透明的“可输入” `JComboBox`，而不是`JTextField`您开始输入的地方，然后显示下拉选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T17:17:25.967

*   看看[AutoComplete JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968)

*   另一种选择是装饰者`SwingX`

# c#-4.0 - Windows 8 中 Windows 服务上的 Debugger.Launch()

> ID：12042054
> 
> 赞同：6
> 
> 时间：2012-08-20T17:14:45.203
> 
> 标签：c#-4.0, windows-services, windows-8

在我安装 Windows 8 后，这样的完全合法声明不再起作用：

```
#if DEBUG
    Debugger.Launch();
#endif 
```

服务开始忽略那件事。是的，我正在以调试模式构建项目。

如果我将其更改为`Debugger.Break()`- 服务就会失败，并且仍然没有用于附加调试器的对话框。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-29T09:54:54.213

秘诀在于通过以下方式更改 Visual Studio JIT 调试器的注册表项：

```
reg add "HKCR\AppID\{E62A7A31-6025-408E-87F6-81AEB0DC9347}" /v AppIDFlags /t REG_DWORD /d 8 /f 
```

在进行此更改之前，我机器上的值是 0x28。上面将其更改为 0x8。从本质上讲，它删除了 0x20 标志。

如果您搜索 Microsoft 包含文件 (WTypesbase.h)，您会发现以下内容：

```
#define APPIDREGFLAGS_IUSERVER_ACTIVATE_IN_CLIENT_SESSION_ONLY 0x20 
```

进行此更改后，将再次显示 JIT 调试窗口。我相信所有这些都与 Microsoft 所做的各种 session 0 安全更改有关。

来自这篇文章： [http ://forums.arcgis.com/threads/69842-Debugging-your-SOE-on-Windows-8](http://forums.arcgis.com/threads/69842-Debugging-your-SOE-on-Windows-8)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T15:47:37.967

`Debugger.Launch`将启动具有可视 GUI 的应用程序。默认情况下，服务不与桌面交互，因此无法“看到”它们所做的任何事情。

对与桌面交互的支持已逐渐从 Windows 服务中删除（例如，“与桌面交互”选项已从某些服务器版本中删除）。我想他们会继续这种趋势。

Windows 服务本质上不是 GUI 应用程序，它们可以在用户登录桌面之前和之后运行，因此*不能*一直显示 GUI。依赖于在服务中拥有 GUI 的能力通常不是一个好主意。

如果您想做的是调试服务，我建议将其作为常规应用程序运行，以便您可以执行启动和调试等操作。无耻插件：您可以查看[在 Visual Studio](http://bit.ly/LFEk6d)中开发 Windows 服务，以了解编写支持该服务的服务的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:18:19.820

这是 Windows 应用商店应用程序还是桌面应用程序？

尝试右键单击您的项目（如果您拥有 C# 可执行项目）并选择“属性”。然后在选项的左侧边栏中，单击“调试”。在“开始操作”部分中，选中“不启动，但在启动时调试我的代码”复选框。

现在您可以按 F5 并在代码中使用断点运行 Visual Studio，它会等待您启动该过程。然后运行您的应用程序（在 Visual Studio 之外），Visual Studio 将附加调试器。

![属性中的不启动选项](../Images/91ae9c698766dd44f22e3db8b1739448.png)

# python - Python 等价于 LINQ

> ID：12042055
> 
> 赞同：28
> 
> 时间：2012-08-20T17:15:03.357
> 
> 标签：python, functional-programming, iterator, method-chaining, fluent-interface

在 C# 中，使用 LINQ，如果我有 enumeration `enumerable`，我可以这样做：

```
// a: Does the enumerable contain an item that satisfies the lambda?
bool contains = enumerable.Any(lambda);

// b: How many items satisfy the lambda?
int count = enumerable.Count(lambda);

// c: Return an enumerable that contains only distinct elements according to my custom comparer
var distinct = enumerable.Distinct(comparer);

// d: Return the first element that satisfies the lambda, or throws an exception if none
var element = enumerable.First(lambda);

// e: Returns an enumerable containing all the elements except those
// that are also in 'other', equality being defined by my comparer
var except = enumerable.Except(other, comparer); 
```

我听说 Python 的语法比 C# 更简洁（因此效率更高），那么我如何在 Python 中使用相同数量或更少的代码来实现相同的迭代？

注意：如果我不需要 ( `Any`, `Count`, `First`)，我不想将可迭代对象具体化为列表。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T17:19:49.517

以下 Python 行应该等同于您所拥有的（假设`func`或`lambda`在您的代码中返回一个布尔值）：

```
# Any
contains = any(func(x) for x in enumerable)

# Count
count = sum(func(x) for x in enumerable)

# Distinct: since we are using a custom comparer here, we need a loop to keep 
# track of what has been seen already
distinct = []
seen = set()
for x in enumerable:
    comp = comparer(x)
    if not comp in seen:
        seen.add(comp)
        distinct.append(x)

# First
element = next(iter(enumerable))

# Except
except_ = [x for x in enumerable if not comparer(x) in other] 
```

参考：

*   [列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)
*   [生成器表达式](http://docs.python.org/tutorial/classes.html#generator-expressions)
*   [`any()`内置函数](http://docs.python.org/library/functions.html#any)
*   [`sum()`内置函数](http://docs.python.org/library/functions.html#sum)
*   [`set`类型](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset)

请注意，我重命名`lambda`为`func`since`lambda`是 Python 中的一个关键字，出于同样的原因，我重命名`except`为。`except_`

请注意，您也可以使用[`map()`](http://docs.python.org/library/functions.html#map)而不是推导式/生成器，但通常认为它的可读性较差。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-01-17T22:13:45.827

最初的问题是如何在 Python 中使用可迭代实现相同的功能。尽管我很喜欢列表推导，但我仍然发现 LINQ 在许多情况下更具可读性、直观性和简洁性。以下库包装了 Python 可迭代对象，以在 Python*中以相同的 LINQ 语义*实现相同的功能：

*   [py_linq](https://pypi.org/project/py_linq/)
*   [林克](https://pypi.org/project/Linq/)

如果您想坚持使用内置 Python 功能，[这篇博](https://www.c-sharpcorner.com/blogs/linq-in-python-for-c-sharp)文提供了 C# LINQ 功能到内置 Python 命令的相当彻底的映射。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-20T17:20:07.893

我们有生成器表达式和各种函数，用于在可迭代对象上表达任意条件。

```
any(some_function(e) for e in iterable)
sum(1 for e in iterable if some_function(e))
set(iterable)
next(iterable)
(e for e in iterable if not comparer(e) in other) 
```

大致对应于您在惯用 Python 中编写示例的方式。

# c# - 运行时 AppSettings.settings 编辑器对话框

> ID：12042056
> 
> 赞同：0
> 
> 时间：2012-08-20T17:15:09.877
> 
> 标签：c#, .net, winforms, runtime, appsettings

基本上我正在寻找这种类型的项目： http: [//www.codeproject.com/Articles/6160/Application-Configuration-Editor-using-the-Propert](http://www.codeproject.com/Articles/6160/Application-Configuration-Editor-using-the-Propert)

但是对于[应用程序设置](http://msdn.microsoft.com/en-us/library/a65txexh%28v=vs.80%29.aspx)。你听说过吗，能给点建议吗？

基本上用例是，一旦设置，AppSettings 只能从代码中更改，如果您想手动更改任何内容，您的选项非常有限和复杂。

这个想法是允许用户使用“--config”参数运行应用程序，并允许他更改界面中类似于 Visual Studio 自己的编辑器的任何设置：

![在此处输入图像描述](../Images/40c137cdb6c90f94720d2e9d70d5d06a.png)

**编辑**：当然，在运行时唯一可编辑的列应该是值。唯一可见的应该是名称，如下所示：

![在此处输入图像描述](../Images/77ae5d72ec31976c4b363b784275b213.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:07:04.207

哦，没想到，把你的`ApplicationSettingsBase`放进`PropertyGrid.SelectedObject`去就可以编辑了。然后您只需拨打电话`.Save()`即可保存您的设置。

就那么简单。

**编辑**：如果您正在构建这样的编辑器，请考虑使用该方法添加将设置重置为其默认值的按钮`.Reset()`。默认情况下，我指的是您在 Visual Studio 的设计器编辑器中指定的值。

使用此按钮有两个主要问题：

首先，在`.Reset()`调用之后，新的（默认）设置*已经*保存到磁盘，因此没有*明显*的方法可以恢复它们（如果有的话）。因此，请为您的用户做好准备。

其次，您需要调用`.Refresh()`您的`PropertyGrid`，因为它不会刷新其字段（但是当您将光标设置到该字段时，它会刷新，因此不会保存数据，它只是仍绘制在控件上）。

**另一个编辑**：为了使编辑设置的过程更加用户友好，您可能希望将它们组织成组，将名称更改为更具可读性等。

不幸的是，设置对象的代码是自动生成的，这意味着您不能向该类中的属性添加任何属性。幸运的是，您可以通过[编程方式添加这些属性](https://stackoverflow.com/questions/12143650/how-to-add-property-level-attribute-to-the-typedescriptor-at-runtime)。

# compact-framework - .NET 紧凑型框架和 SQL Server Express 2008 R2

> ID：12042058
> 
> 赞同：1
> 
> 时间：2012-08-20T17:15:48.657
> 
> 标签：compact-framework, windows-ce, sql-server-2008r2-express

我在 Windows Embedded Compact Edition 6.0 设备上选择正确的排序规则/语言环境时遇到问题。

我在所述设备上使用 .NET compact framework 2.0。

我在数据库中插入字母 ŠĐČĆŽšđčćž 时遇到困难。我收到 PlatformNotSupported 异常。

CE 设备上的可用区域设置未列出克罗地亚语或类似的任何内容。当我选择 SQL_Latin1_General_CP1_CI_AS 作为数据库/表/列排序规则时，它可以工作（结合设备上的英语（美国）区域设置，但我无法插入以前的字母。

使用 Management Studio 2008 的 Windows 7 台式 PC 的相同排序规则正确地接受所有这些字母。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:20:31.473

我无法在我们较旧的 SQL 2000 Server 上复制它，我当然希望 SQL Express 2008 在处理多语言问题方面比 SQL 2000 有更多的功能。

我使用以下代码作为测试：

```
private const string jp2code = "jp2code.net";

private void Form1_Activated(object sender, EventArgs e) {
  string croatianIn = "ŠĐČĆŽšđčćž";
  string croatianOut = TestCroatian(croatianIn);
  Console.WriteLine(String.Compare(croatianIn, croatianOut));
}

private string TestCroatian(string input) {
  string result = null;
  string sql = "INSERT INTO SUITEMSG (MsgFrom, [Message]) VALUES (@MsgFrom, @Message);";
  using (SqlCommand cmd = new SqlCommand(sql, Data.Connection)) {
    cmd.Parameters.Add("@MsgFrom", jp2code);
    cmd.Parameters.Add("@Message", input);
    cmd.Connection.Open();
    cmd.ExecuteNonQuery();
  }
  sql = "SELECT [Message] FROM SUITEMSG WHERE MsgFrom=@MsgFrom;";
  using (SqlCommand cmd = new SqlCommand(sql, Data.Connection)) {
    cmd.Parameters.Add("@MsgFrom", jp2code);
    cmd.Connection.Open();
    result = cmd.ExecuteScalar().ToString();
  }
  return result;
} 
```

输入和输出都是相同的。

你确定你没有做其他事情吗？

您能否更新您的问题以发布一个简短的代码示例，就像我在上面所做的那样来显示什么不起作用？

# ajax - Meteor 服务器端 ajax

> ID：12042064
> 
> 赞同：4
> 
> 时间：2012-08-20T17:15:56.570
> 
> 标签：ajax, meteor

我正在尝试访问远程服务器 API 并需要进行 ajax 调用。最好从服务器端完成，以免泄露 API 密钥。我将如何用流星做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-16T22:33:41.577

当前的方式似乎是通过[http](http://docs.meteor.com/#http)包。

首先将其添加到您的项目中，如下所示`meteor add http`：然后你可以像这样使用它：

```
var result = HTTP.call("GET", "http://api.twitter.com/xyz",
  {params: {user: userId}}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T23:02:35.073

如果它是一个 REST API，您可能想要使用（[此处](http://docs.meteor.com/#meteor_http_post)`Meteor.http.post`的文档）。就像是：

```
Meteor.http.post(API_URL, {foo: 'bar', other: 'data'}, function(err, result) {
  if (!err)
    // do something with the result.
}); 
```

这也适用于客户端。

# python - 在 Python 库中打包非 Python 文件

> ID：12042071
> 
> 赞同：3
> 
> 时间：2012-08-20T17:16:36.430
> 
> 标签：python, packaging

我正在尝试为[这个项目](https://github.com/tclancy/bluetrain/tree/master/bluetrain)构建一个 Python 包，其中包括 /fixtures 中的 .json 文件和 /templates 中的 *.html 文件。当我根据我的[setup.py](https://github.com/tclancy/bluetrain/blob/master/setup.py)运行打包脚本时，它说它应该在它生成的 MANIFEST 中包含这些文件夹，但输出只是说它正在硬链接它们，当我尝试通过 pip 安装时，它会在以下情况下死掉：

```
Downloading/unpacking bluetrain
  Running setup.py egg_info for package bluetrain
    error: package directory 'bluetrain/fixtures' does not exist
    Complete output from command python setup.py egg_info:
    running egg_info

writing pip-egg-info/bluetrain.egg-info/PKG-INFO
writing top-level names to pip-egg-info/bluetrain.egg-info/top_level.txt
writing dependency_links to pip-egg-info/bluetrain.egg-info/dependency_links.txt
warning: manifest_maker: standard file '-c' not found
error: package directory 'bluetrain/fixtures' does not exist 
```

编辑：看起来这是在 virtualenv 中建立的遗留 crud 的问题，我正在将软件包的后续版本安装到其中。尝试一个干净的 virtualenv 解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:02:41.370

通过创建一个干净的 virtualenv 并尝试从那里构建来解决此问题。看起来原始环境中不断的构建/重建周期留下了遗留文件，这些文件阻止了事情按预期工作。

# android - httppost 安卓问题

> ID：12042072
> 
> 赞同：1
> 
> 时间：2012-08-20T17:16:38.367
> 
> 标签：android, http-post

我知道关于这个主题还有其他帖子，但我一直试图解决这个问题一个星期但无济于事。

这是我通过android连接到服务器的代码：

```
public String postQuery(String queryString, String jsonData, String [][]jsonDataArray){

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("http://myapp.com/app.php");

    String tempLine = "";

    try {

      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
      nameValuePairs.add(new BasicNameValuePair("a_token", "SDFSDF"));
      nameValuePairs.add(new BasicNameValuePair("d_id", "S34S"));

      post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
      HttpResponse response = client.execute(post);

      StatusLine statusLine = response.getStatusLine();
      int statusCode = statusLine.getStatusCode();

      BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

      String line = "";
      while ((line = rd.readLine()) != null) {
        tempLine = tempLine + line;
      }
    } catch (IOException e) {
      e.printStackTrace();
    }
    return tempLine;
} 
```

我服务器上的代码如下所示：

```
Token: <?php echo $_POST["a_token"]; ?><br />
ID: <?php echo $_POST["d_id"]; ?><br />

Let's print out the entire Post:
<?php print_r($_POST); ?> 
```

然后我的 android 活动调用以下内容：

```
String result = serverClient.postQuery(query, jsonData2, jsonData);
Toast.makeText(InterestsActivity.this, "" + result, Toast.LENGTH_SHORT).show(); 
```

然后在我的 android 设备上显示的是：

```
Token:</br>ID:</br>Let's print out the entire Post: Array() 
```

谁能弄清楚为什么我的 Post 数据没有被传输到服务器？提前致谢

# java - java队列接口多态性

> ID：12042073
> 
> 赞同：1
> 
> 时间：2012-08-20T17:17:01.337
> 
> 标签：java, interface, queue, polymorphism

我正在阅读[http://www.docjar.com/html/api/java/util/LinkedList.java.html](http://www.docjar.com/html/api/java/util/LinkedList.java.html)

在 Java 中声明队列时

```
 Queue<Integer> queue = new LinkedList<Integer>(); 
```

幕后发生了什么？因为我看到 queue 是一个只有方法签名的接口，而 LinkedList 并没有直接实现它，所以它如何覆盖这些方法（`add()`、`peek()`、`poll()`、`offer()`和`remove()`）并像那样做多态性？我的意思是你只能访问某些特定的方法，但并不是所有的方法都`LinkedList`不再`public void add(int index, E element)`可用，因为它使队列成为明显的类型。我们也不需要投射它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T17:26:48.313

从JDK的源代码：

```
public class LinkedList<E>
    extends AbstractSequentialList<E>
    implements List<E>, Deque<E>, Cloneable, java.io.Serializable
{ 
```

所以`LinkedList<E>`不直接实现`Queue<E>`，但它确实实现了`Deque<E>`，它扩展了`Queue<E>`：

```
public interface Deque<E> extends Queue<E> { 
```

因此，`LinkedList<E>`继承了 的抽象方法`Queue<E>`。

`LinkedList<E>`像往常一样，重写方法直接定义在- 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:18:45.050

> 因为我看到队列是一个只有方法签名的接口，而 LinkedList 并没有直接实现它

LinkedList 确实实现了一个队列：[http ://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:18:15.587

[`LinkedList`确实执行`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)。当使用接口声明对象时，编译器仅将其视为该类型的对象。但是，由于您无法实例化接口，因此需要将其实例化为实现该接口的类。在这种情况下，您将无法访问 的某些`LinkedList`方法（例如`push()`, `pop()`），因为编译器`queue`将`Queue<Integer>`. 但是，由于它被实例化为 a `LinkedList<Integer>`，并且可以很容易地转换为 a `LinkedList`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T17:19:16.333

参考这个

[http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)

# jsf-2 - Flash Scope 消息不显示为 immediate=true 按钮

> ID：12042077
> 
> 赞同：1
> 
> 时间：2012-08-20T17:17:22.870
> 
> 标签：jsf-2, myfaces

我有以下按钮：

```
<h:commandButton action="#{handler.actionDelete}" value="Delete" immediate="true"/> 
```

作为 handler.actionDelete 的一部分，我正在向 Flash Scope 添加一条消息。

```
public String actionDelete() {
this.service.delete(this.bean);
FacesContext.getCurrentInstance().getExternalContext().getFlash().put("infoMessage","OK");
return "NextPage?faces-redirect=true"; 
```

}

当我按下命令按钮时，我在下一个屏幕上看不到闪烁消息。如果立即设置为 false，我将看到该消息。

我正在使用 MyFaces 2.1.8。

有任何想法吗？

谢谢，路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:16:23.360

我可以重现你的问题。这可能是 MyFaces 中的一个错误。你需要向 MyFaces 的人[报告它。](https://issues.apache.org/jira/browse/MYFACES)

它在 Mojarra 2.1.12 中运行良好。

# spring - Spring事务不回滚

> ID：12042078
> 
> 赞同：0
> 
> 时间：2012-08-20T17:17:23.137
> 
> 标签：spring, transactions, junit, dbunit

我一直在处理 JUnit 测试的项目中使用 Spring 事务管理。我已经让它在我的 JUnit 测试中正常工作，但我无法让它在此之外工作。这是我的基本情况：

我有一个处理 DbUnit 初始化的类，类似于：

```
@TransactionConfiguration( defaultRollback = true )
@Transactional(propagation=Propagation.REQUIRED)
public class DbUnitManagerImpl implements DbUnitManager {

    @Override
    public void initializeDatabase(String location) {
        // Does work to create a dataset from the file at location

        // Calls a function within this class to execute the dbUnit initialization
        runSetUp()
    }

    public void runSetUp() {
       // Executes dbUnit call to initialize database
    }
} 
```

我在两个不同的情况下使用这个类。我在运行 JUnit 测试来初始化数据时使用它，并且我还从网页的支持 Bean 调用这些函数。

JUnit 设置将正确回滚，如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/context/applicationContext-rdCore.xml" })
@TransactionConfiguration( defaultRollback = true )
@Transactional(propagation=Propagation.REQUIRED)
public abstract class BaseDatabaseTest {

    @Autowired private DbUnitManager dbUnitManager;

    @Test
    public void runTest1() {
        dbUnitManager.initializeDatabase("D:\\test.xml");
    }
} 
```

我的支持 bean 以类似的方式工作，但是它允许 DbUnitManagerImpl 执行所有事务。我已经调试了事务正在使用：

```
System.out.println(TransactionSynchronizationManager.isActualTransactionActive()); 
```

在这两种情况下，都显示 true 表示正在启动事务，但回滚仅发生在 JUnit 测试中。支持 bean 如下所示：

```
@Service
@SessionScoped
public class DbUnitInitializerBean {

    @Autowired private DbUnitManager manager;

    /**
     * Initializes the database using the files at <code>location</code>
     */
    public void initializeDatabase() {
        manager.initializeDatabase("D:\\test.xml);
    }
} 
```

几点注意事项：上面提到的三个类显然被剥离了。它们还存在于三个不同的 java 项目中。支持 bean 驻留在具有以下应用程序上下文的 Web 项目中：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:cache="http://www.springframework.org/schema/cache" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <context:annotation-config />
    <cache:annotation-driven />
    <context:component-scan base-package="com.nph.rd.dbunit" />

    <import resource="classpath:/context/applicationContext-rdCore.xml"/>
</beans> 
```

包含 DbUnitManagerImpl 类的测试项目的应用程序上下文如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:cache="http://www.springframework.org/schema/cache" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <context:annotation-config />
    <cache:annotation-driven />

    <import resource="classpath:/context/applicationContext-rdCore.xml"/>

</beans> 
```

主应用程序上下文位于包含我的 JUnit 测试的项目中，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:cache="http://www.springframework.org/schema/cache" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
         http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <context:annotation-config />
    <tx:annotation-driven />

    <context:component-scan base-package="com.nph.rd.dbunit" />
    <context:component-scan base-package="com.nph.dbunit" />

    <bean id="dbUnitManager" class="com.nph.dbunit.dao.impl.DbUnitManagerImpl">
    </bean>

    <!-- allows for ${} replacement in the spring xml configuration from the .properties file on the classpath -->
    <context:property-placeholder location="classpath:/properties/core-system.properties" ignore-unresolvable="true"/>

    <!-- Transaction Manager -->
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <!-- OLTP data source -->
    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${oltp.database.driverClassName}" />
        <property name="url" value="${oltp.database.url}" />
        <property name="username" value="${oltp.database.username}" />
        <property name="password" value="${oltp.database.password}" />
    </bean>

</beans> 
```

基本的最终目标是让我的 DbUnitManager 类在从 Backing Bean 使用它时能够在异常基础上回滚，但无论在我的 JUnit 测试中使用它时，它都会回滚。目前，我将 DbUnitManager 类设置为始终回滚，因为我试图让事务回滚一般工作。在我让它工作之后，我将把它移到异常的基础上回滚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:06:21.923

从您的 DbUnitManagerImpl 中删除以下内容

```
 @TransactionConfiguration( defaultRollback = true ) 
```

此注释仅与 Spring TestRunner 一起使用。默认情况下，Spring TestRunner 将回滚所有事务，因此您可以使用 @TransactionConfiguration 覆盖该行为。

如果您使用的是 Spring TransactionManager（您是），它将自动回滚未捕获的运行时异常。如果要回滚检查的异常，可以在 @Transactional 注释中指定它们或将它们转换为运行时异常。

```
 @Transactional(rollbackFor = SomeCheckedException.class)
 public void someMethod() {} 
```

# ruby-on-rails - 在工厂女孩测试中建立模型协会

> ID：12042081
> 
> 赞同：0
> 
> 时间：2012-08-20T17:17:34.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, factory-bot

这是我的模型中的相关部分：

```
 belongs_to :cart
  belongs_to :product
  validate :quantity, :more_than_stock,  :message => "more than in stock is reserved." 

 def more_than_stock
    errors.add(:quantity, "should be less than in stock") if self.quantity > self.product.stock
  end 
```

我一直在这条线上出错：`errors.add(:quantity, "should be less than in stock") if self.quantity > self.product.stock`关于`.stock`方法。

我不断得到的错误是：`1) Error: test_product_id_must_be_a_number(CartRowTest): NoMethodError: undefined method 'stock' for nil:NilClass`在我的测试中。

在我看来，我的测试套件不知道`.stock`产品上的方法。

但是，这是我的产品工厂：

```
factory :product do
    name 'Cholecap - 100mg'
    limit 3
    stock 10
  end 
```

和我的 cart_row 工厂：

```
 factory :cart_row do
    product
    cart
    quantity 3
  end 
```

这是我的单元测试中引发错误的相关部分：

```
def setup
    @cart_row = FactoryGirl.create(:cart_row)
  end

  test "product_id must not be blank" do
    @cart_row.product_id = "         "
    assert !@cart_row.valid?
  end

test "product_id must be a number" do
     @cart_row.product_id = '234'
    assert !@cart_row.valid?
  end 
```

我需要做什么才能让测试套件知道 .stock 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:38:24.700

因为您将 product_id 设置为无效值，所以您无法让测试套件知道 #stock 方法。如果您真的想让这些测试通过，请尝试以下代码：

```
belongs_to :cart
belongs_to :product
validates_associated :product
validate :quantity, :more_than_stock, message: "more than in stock is reserved." , if: "product.respond_to? :stock"

def more_than_stock
  errors.add(:quantity, "should be less than in stock") if quantity > product.stock
end 
```

# php - 使用和不使用 lang uri 参数设置 Zend 路由器

> ID：12042084
> 
> 赞同：0
> 
> 时间：2012-08-20T17:17:49.170
> 
> 标签：php, zend-framework, multilingual, zend-controller, zend-controller-router

我想知道是否有人可以帮助我解决下一个问题。

我希望能够在有和没有 Uri lang 标志的情况下使用多语言支持设置我的项目，并且还可以使用模块结构。

我的意思是

```
http://mydomain/
http://mydomain/forum
http://mydomain/gallery 
```

使用 Zend_Locale + Zend_Translate 默认值在没有 lang uri 参数的情况下导航 (en)

并且 ：

```
http://mydomain/es
http://mydomain/es/forum
http://mydomain/es/gallery 
```

我已经按照我找到的一些tutos，但我仍然不能这样做。

这是我当前的代码：

我在 bootstrap.php 上设置了 zend _initRoute、_initLocale 和 _initTranslate，如下所示：

```
protected function _initRoutes()
{
    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter();

    $module = new Zend_Controller_Router_Route_Module(
        array(),
        $front->getDispatcher(),
        $front->getRequest()
    );

    $language = new Zend_Controller_Router_Route(
        ':lang',
        array(
            'lang' => 'es'
        )
    );

    /**
      * I didn't chain this route cause doesn't work as I expected, 
      * but this is how I want to be able to navigate.
      *
      **/
    $default = new Zend_Controller_Router_Route(
        ':controller/:action/*', 
        array(
            'lang' => 'es',
            'module' => 'default',
            'controller' => 'index',
            'action' => 'index'
        )
    );

    $chainRoute = new Zend_Controller_Router_Route_Chain();
    $chainRoute->chain($language)
               ->chain($module);

    $router->addRoute('default', $chainRoute);

    return $router;
}

/**
 * 
 * Default locale: es_AR
 */
protected function _initLocale()
{
    $local = new Zend_Locale();
    $local->setDefault('es_AR');
    Zend_Registry::set('Zend_Locale', $local);
}

/**
 * 
 * Inisializacion de los lenguages y el Locale por default
 */
protected function _initTranslate()
{
    $translate = new Zend_Translate(
        'Array', 
        APPLICATION_PATH . "/langs/",
        null, 
        array(
            'scan' => Zend_Translate::LOCALE_DIRECTORY
        )
    );

    Zend_Registry::set('Zend_Translate', $translate);
    $translate->setLocale(Zend_Registry::get('Zend_Locale'));
} 
```

我还注册了下一个语言插件：

```
class MyApp_Controller_Plugin_Language extends Zend_Controller_Plugin_Abstract
{

public function routeShutdown(Zend_Controller_Request_Abstract $request)
{
    $lang = $request->getParam('lang', null);

    $locale = Zend_Registry::get('Zend_Locale');
    $translate = Zend_Registry::get('Zend_Translate');

    if ($translate->isAvailable($lang)) {
        $translate->setLocale($lang);
        $locale->setLocale($lang);
    } else {
        //throw new Zend_Controler_Router_Exception('Translation language is not available', 404);
        $lang = $locale->getLanguage();
        $locale->setLocale($lang);
        $translate->setLocale($lang);
    }

    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter();
    $router->setParam('lang', $lang);
}

} 
```

此外，我还创建了自己的 Url 助手，它由使用“Language_Action_Helper”的 zend url 助手扩展：

```
class Zend_View_Helper_MyUrl extends Zend_View_Helper_Url 
{

protected function _getCurrentLanguage()
{

    return Zend_Controller_Action_HelperBroker::getStaticHelper('Language')
        ->getCurrent();

}

public function myUrl($urlOptions = array(), $name = null, $reset = true, $encode = true)
{
    $urlOptions = array_merge(
        array(
            "lang" => $this->_getCurrentLanguage()
        ),
        $urlOptions
    );

    return parent::url($urlOptions, $name, $reset, $encode);
}

} 
```

然后我创建了一个使用我的 url Helper 的 Anchor 助手：

```
class Zend_View_Helper_Anchor extends Zend_View_Helper_Abstract
{

public function anchor
(
    $anchorText,
    $controller,
    $action,
    Array $params = array()
)
{
    $front = Zend_Controller_Front::getInstance();

    $defaultUrl = array(
        'module'     => $front->getRequest()->getModuleName(),
        'controller' => $controller,
        'action'     => $action
    );

    if (!empty($params)) {
        foreach ($params as $param => $value) {
            $defaultUrl[$param] = $value;
        }
    }
    // using my url helper
    $url = $this->view->myUrl(
        $defaultUrl,
        null,
        true
    );

    $anchor =<<<HTML
    <a href="{$url}">{$anchorText}</a>
    HTML;

    return $anchor;

}

} 
```

这是语言操作助手，用于在我的 url 助手使用的控制器中提供语言。

```
class Controller_Helper_Language extends Zend_Controller_Action_Helper_Abstract 
{

/**
 * 
 * Get Current language
 * 
 * @return mixed string|null
 */
public function getCurrent(){

    if (!Zend_Registry::isRegistered("Zend_Locale"))
        return null;

    return Zend_Registry::get("Zend_Locale")->getLanguage();

}

/** 
 * 
 * Get translator 
 * 
 * @return mixed Zend_Translate|null
 * 
 */
public function getTranslator(){

    if (!Zend_Registry::isRegistered("Zend_Translate"))
        return null;

    return Zend_Registry::get("Zend_Translate");

}

} 
```

我的最终方法是使用这种结构，能够设置标准路线，例如：

```
http://mydomain/forum/:id
http://mydomain/topic/:id
http://mydomain/section/:id
http://mydomain/user/:user 
```

有语言支持。

必须如何配置这些路线以满足我的需求？，我的意思是，我试图做类似的事情：

```
// what may I do here? How do I chain this route with my language router
$topicRoute = new Zend_Controller_Router_Route(
    'topic/:id',
    array(
        'module' => 'default',
        'controller' => 'forum',
        'action' => 'topic',
        'id' => ':id'
    ),
    array(
        'id' => '^[0-9]$'
    )
) 
```

这个路由器配置也给我的导航配置带来了一些问题。当我设置这个路由器，然后导航到 /topic/id 时，当我悬停由 navigation.xml 给出的任何链接时，总是返回这个配置给出的相同 URI。

```
http://mydomain/topic/id 
```

有没有人熟悉这个？，这可能吗？有什么不同的方法来做这样的事情吗？我尝试了一些不同的事情，让我更接近我的目标，但这是我能做到的最接近的......

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T17:43:50.773

更好更干净的方法是使用主机名（例如子域）zend 路由，看看下面

[http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.hostname](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.hostname)

这种方法更简单，对 SEO 也很友好。

# perl - 通过 DBI 获取所有 Oracle 数据源的列表

> ID：12042090
> 
> 赞同：1
> 
> 时间：2012-08-20T17:18:18.133
> 
> 标签：perl, oracle, dbi

我正在创建一个 perl 程序，除了用户名和密码外，用户还必须输入数据库的名称，并且程序使用`DBI->connect`. 我想做的是让程序显示它可以连接到的数据库名称列表，并且用户所要做的就是输入他们的用户名和密码，以便于使用。我查看了数据源的[DBI 文档](http://search.cpan.org/dist/DBI/DBI.pm#data_sources)，认为这是我需要的，但是当我调用`DBI->data_sources('Oracle')`它时，它什么也没返回（但也没有遇到错误）。我看不出这是怎么发生的，因为如果用户提供数据库名称，程序就可以毫无障碍地连接。有什么我做错了，或者我没有得到什么？

是的，我意识到我可以手动打开 tnsnames.ora 文件并解析它。事实上，这就是我首先做的，但我更喜欢使用 DBI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:22:27.803

尝试这个：

```
#!/usr/bin/perl -w

use DBI;

my @drivers = DBI->available_drivers();

die "No drivers found!\n" unless @drivers; # should never happen

foreach my $driver ( @drivers ) {
    print "Driver: $driver\n";
    my @dataSources = DBI->data_sources( $driver );
    foreach my $dataSource ( @dataSources ) {
        print "\tData Source is $dataSource\n";
    }
    print "\n";
} 
```

# c++ - 获取 WinPcap 地址信息时出错

> ID：12042091
> 
> 赞同：0
> 
> 时间：2012-08-20T17:18:19.080
> 
> 标签：c++, winpcap

您好，我在从 WinPcap 驱动程序获取网卡地址信息时遇到问题。我注意到，每当为特定 NIC 启用 IPv6 时，它的地址信息就会变为 0.0.0.0。我怎样才能解决这个问题？

```
pcap_addr* address = GetDeviceAddress(1);

cout<<"IP address "<<iptos(((struct sockaddr_in *)address->addr)->sin_addr.s_addr)<<endl;
/////////////

pcap_addr* GetDeviceAddress(int index)//Gets the name of a device using the zero based index of its location in the list
    {
        int i=0;
            if(pcap_findalldevs_ex(PCAP_SRC_IF_STRING,NULL,&AllDevices,errbuf) != -1)
                for(Iterator=AllDevices;Iterator!=NULL;Iterator=Iterator->next)
                {
                    if(i==index)
                    {
                        return Iterator->addresses;
                    }
                i++;
                }
                return NULL;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:07:06.790

查看地址信息的代码是什么样的？也许它有一个错误，导致它无法正确处理 IPv6 地址。

地址信息可能有*多个*IP 地址——libpcap/WinPcap 的`pcap_findalldevs()`调用和 WinPcap 的`pcap_findalldevs_ex()`调用提供一个指向`pcap_if_t`结构列表的指针，它对应于它找到的每个接口，每个结构都包含一个类型为 的地址信息项的*列表*`struct pcap_addr`。这些地址信息项中的每一个都包括一个网络地址，其类型为`struct sockaddr`; 该结构包括一个名为 的成员`sa_family`，该成员将具有`AF_INET`IPv4 和`AF_INET6`IPv6 的值。如果成员具有值`AF_INET6`，则地址数据将是 128 位的 IPv6 地址，而*不是*32 位的 IPv4 地址。

# jquery - jQuery 表单验证在 IE7 和 IE8 中不起作用

> ID：12042093
> 
> 赞同：0
> 
> 时间：2012-08-20T17:18:26.470
> 
> 标签：jquery, wordpress, internet-explorer-8, internet-explorer-7, jquery-validate

我已经更新了这篇文章。我已经确定问题出在 jquery validate 中，但不知道如何纠正它。我有以下代码来验证注册表单。在 Firefox、Chrome 或 IE9 中，如果用户尝试单击空白表单上的注册按钮，则错误消息会正常显示。在 IE7 或 8 中不会出现错误消息。

这是jQuery：

```
$('#form_register').validate({
messages: {
register_full_name: 'Please enter your name',
register_email: {
required: 'Please enter your email',
email: 'Please enter a valid email address'
},
register_username: {
  required: 'Please choose a username',
  minlength: 'Make it at least 3 characters'
  },
register_password: {
  required: 'Please choose a password',
  minlength: 'Make it at least 6 characters'
   },
register_newsletter: {
  required: 'Please select either Yes or No'
   }
 },
rules: {
  register_password: {
    required: true,
    minlength: 6
  },
  register_username: {
    minlength: 3
    }
   },
  submitHandler: function(){
   submit_register();
   return false;
   }
}); 
```

此警报不会在 IE7 或 IE8 中显示：

```
$.validator.setDefaults({
  errorElement: 'span',
  errorPlacement: function(error, element){
    alert('$.validator.setDefaults');
    $(element.parent('label')).addClass('error');
    error.appendTo( element.parent('label') );
    },
    success: function(label){
    $(label.parent('label')).removeClass('error');
    }
}); 
```

表单位于 PHP 文档中：

```
 <div class="fb-login-button"><?php _e('Connect with Facebook'); ?></div>
        <p class="or"><span class="left"></span><?php _e('or'); ?><span class="right"></span></p>
        <span class="error server"></span>
        <form id="form_register" class="dialog-field" name="form_register" action="<?php bloginfo('url'); ?>/register" method="post" accept-charset="UTF-8">
            <input id="register_nonce" name="register_nonce" type="hidden" value="<?php echo wp_create_nonce( 'register_nonce' ) ?>" />
            <input type="hidden" name="action" value="ic_submit_register" />
            <fieldset class="width4">
                <label class="width2 first hide"><?php _e('Username'); ?>
                    <input id="register_username" name="register_username" type="text" class="text required" value="" placeholder="Username for comments, lookbook" />
                    <p class="note"><?php _e('3 or more alphanumeric characters.'); ?></p>
                </label>
                <div class="clear"></div>
                <label class="width2 first hide"><?php _e('Email'); ?>
                    <input id="register_email" name="register_email" type="text" class="text required email" placeholder="Email Address" value="" />
                </label>
                <div class="clear"></div>
                <label class="width2 first hide"><?php _e('Password'); ?>
                    <input id="register_password" name="register_password" type="password" class="text" data-typetoggle="#register_showme" placeholder="Password" />
                    <p class="note"><?php _e('6 or more alphanumeric characters.'); ?></p>
                </label>
                <label id="showme" class="width2 first">
                    <input id="register_showme" name="register_showme" type="checkbox" /><?php _e('show me'); ?>
                </label>
                <div class="clear"></div>
                <fieldset class="width2 radio">
                    <div class="toggle">
                        <label class="radio">
                            <span><?php _e('Yes'); ?></span>
                            <input type="radio" name="register_newsletter" value="1" class="required">
                        </label>
                        <label class="radio">
                            <span><?php _e('No'); ?></span>
                            <input type="radio" name="register_newsletter" value="0">
                        </label>
                    </div>
                </fieldset>
                <div class="clear"></div>
            </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:32:05.250

这可能无法解决问题，但您的情况看起来很糟糕：

```
if(res!==null || res!=="" || res!=="Username for comments, lookbook") 
```

我想你想要

```
if(res!==null && res!=="" && res!=="Username for comments, lookbook") 
```

因为

```
res !== null or res !== "" 
```

将始终评估为真。

# xcode - 自动布局的烦人问题

> ID：12042096
> 
> 赞同：3
> 
> 时间：2012-08-20T17:18:37.183
> 
> 标签：xcode, cocoa, autolayout

我对自动布局表有一个很烦人的问题，如果我尝试更改一些值、宽度、单击标准或从等于小于或大于禁用的插座更改，比如果我想修改插座我必须重新选择e 做修改...这很烦人，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:52:51.033

不是真正的解决方案，但习惯了适当的键盘快捷键会使工作流程更快一点。

**Cmd-Alt 4**显示属性检查器。

**Cmd-Alt 5**显示尺寸检查器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:20:00.213

我的解决方案是开始以编程方式创建我的视图和窗口。自动布局使在代码中创建控件更加引人注目。

1.  Interface Builder 用户界面是带有自动布局的火车残骸。正确设置东西需要很长时间。经常改变不相关的项目会改变你已经完成的项目，重新开始修复事物的循环......再次。
2.  自动布局消除了在代码中创建控件时使用框架和大小的需要。过去，在代码中创建控件很难调整大小和放置适当的位置。现在使用自动布局格式字符串变得轻而易举
3.  以编程方式创建控件可以让你做一个更干净的 MVC。
4.  以编程方式创建控件使重构更容易。您可以使用常量，而不是在 Interface Builder 中为您的对象属性键入字符串。

# java - Java 中的河内塔仅使用 int[ ][ ]（可以做到吗？）

> ID：12042097
> 
> 赞同：6
> 
> 时间：2012-08-20T17:18:37.437
> 
> 标签：java, algorithm, recursion, towers-of-hanoi

这不是家庭作业，我没有钱上学，所以我一边在高速公路上的收费站轮班工作，一边自学（长夜，顾客很少）。

我正在尝试用 Java 实现 Hanoi Towers 求解器的简单版本。我正在使用堆栈和递归函数，没有咨询外部资源，以便有机会*思考*自己。

`int[][] pegs`我从一个数组数组（我会将光盘放在目标位置数组中。当然，`Stack<Integer>`它是为我执行此操作的数据结构，我不必跟踪任何内容。我编写了这个版本，但对放弃感到消极懒惰；我对伸展我的大脑并*了解*如何使用数组来完成这一切很感兴趣。

是否可以使用来实现此代码`int[][] pegs`？如何？（一个提示就足够了，我只是停留在方法上，确定正确的路径后我可以自己做腿部工作）。

顺便说一句，我编写的代码是“可通过的”Java 还是我在滥用东西？（我仍然不确定是专注于 Java 还是 C++。我有两者的电子书）。

```
package exercises;
import java.util.ArrayList;
import java.util.List;
import java.util.Stack;
public class HanoiTowers {
  private static final int N_DISCS = 6;
  private static final int N_PEGS = 3;
  private static int nMoves = 0;
  private static final int POSITION_END_PEG = N_PEGS - 1;
  private static final int POSITION_START_PEG = 0;
  public static void main(String[] args) {
    List<Stack<Integer>> pegs = new ArrayList<Stack<Integer>>(N_PEGS);
    for (int i = 0; i < N_PEGS; i++) {
      pegs.add(new Stack<Integer>());
    }
    for (int i = 0; i < N_DISCS; i++) {
      pegs.get(POSITION_START_PEG).push(N_DISCS - i);
    }
    printPegs(pegs);
    moveTowers(pegs, POSITION_START_PEG, POSITION_END_PEG, N_DISCS);
    System.out.println(String.format("# moves: %d", nMoves));
  }
  private static void moveTowers(List<Stack<Integer>> pegs, int fromPeg,
      int toPeg, int ofHeight) {
    if (ofHeight <= 0) {
      return;
    }
    int throughPeg = N_PEGS - fromPeg - toPeg; // Kind of a hack?
    moveTowers(pegs, fromPeg, throughPeg, ofHeight - 1);
    pegs.get(toPeg).push(pegs.get(fromPeg).pop());
    nMoves++;
    printPegs(pegs);
    moveTowers(pegs, throughPeg, toPeg, ofHeight - 1);
  }
  private static void printPegs(List<Stack<Integer>> stacks) {
    for (int j = N_DISCS - 1; j >= 0; j--) {
      for (int i = 0; i < N_PEGS; i++) {
        Stack<Integer> stack = stacks.get(i);
        int disc = stack.size() < j + 1 ? 0 : stack.get(j);
        System.out.print(String.format("[%d]", disc));
      }
      System.out.println();
    }
    System.out.println();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:46:58.910

我能想到的使用简单数组的最佳方法是将它们视为钉子，给它们一个等于您拥有的光盘数量的长度，然后，当您使用整数时，使每个位置的值等于光盘的大小，然后要移动它们，您需要从上到下扫描整个钉子（顶部和底部由您决定），当您找到第一个钉子时，将其移动到下一个钉子，这还包括扫描接收钉以寻找合适的位置。

如果要避免扫描挂钩，可以使用附加变量，将最新已知的占用或空闲位置存储在相应挂钩中。

此外，最好的方法是使用列表而不是简单的数组，但这可能是另一个练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T09:08:40.470

我通常的方法不会明确表示挂钩：我只会使用 type 的单个值`int[]`。每个挂钩只是 1 到 3 之间的一个数字，每个圆盘都位于阵列中的固定位置。例如：

```
 *****                                
  *********                       *      
 ***********       ***         ******* 
```

将表示为`{1,1,3,1,2,3}`或`{3,2,1,3,1,1}`，具体取决于您是从最大到最小还是从最小到最大排序。

这种表示的优点：它极大地简化了寻找下一步行动的算法。缺点：它不像大多数人想象的那样接近问题。

使用此表示查找下一步的伪代码，假设圆盘从大到小排列：

```
nextMove (int[] world, int targetPeg) {
  move = no move
  for(int i = 0; i < world.length; i++) {
    if(world[i] != targetPeg) {
      move = from world[i] to targetPeg
      targetPeg = ∈ {1,2,3} ∖ {world[i],targetPeg}
    }
  }
  return move;
} 
```

# android - 使用枚举属性作为 ormlite 列值而不是序数。可能吗？

> ID：12042098
> 
> 赞同：1
> 
> 时间：2012-08-20T17:18:39.220
> 
> 标签：android, ormlite

```
@DatabaseField(dataType=DataType.ENUM_STRING,columnName=TIPO_FIELD_NAME)
private TipoPedido tipo;

public enum TipoPedido {
    REGISTARNOTIFICACAORESPOSTA("Registar Notificação Resposta",SIGLA_TIPO_REGISTARNOTIFICATIORESPOSTA);

    private String tipoName;

    private String tipoValue;

    TipoPedido(String tipoName,String tipoValue){
        this.tipoName=tipoName;
        this.tipoValue=tipoValue;
    }

    public String getTipoName(){
        return tipoName;
    }

    public String getTipoValue(){
        return tipoValue;
    }

} 
```

是否可以使用 tipoValue 枚举属性作为列的值而不是序数？

编辑：这就是我所做的：

创建了 MyEnumPersister 类：

```
public class MyEnumPersister extends EnumStringType{

private static final MyEnumPersister singleTon = new MyEnumPersister();

/**
 * @param sqlType
 * @param classes
 */
protected MyEnumPersister() {

    super(SqlType.STRING, new Class<?>[] { Enum.class });
}

public static MyEnumPersister getSingleton() {
    return singleTon;
}

@Override
public Object javaToSqlArg(FieldType fieldType, Object obj) {

    return ((EstadoPedido)obj).getEstadoValue();
}

@Override
public Object sqlArgToJava(FieldType fieldType, Object sqlArg, int columnPos)
        throws SQLException {

    return PedidoDTO.siglaEstadoPedidoComparator((String)sqlArg);

} 
```

}

在 javatoSqlArg 中，我使用 Enum 中的 getter 直接返回与 estadoValue 对应的字符串。我假设要将它从数据库中返回到枚举，我也需要实现 sqlArgToJava 方法，但我还没有构建它。

edit2：似乎当我对保存数据的表进行查询时，方法 javaToSqlArg 在 sqlArgToJava 之前被调用，为什么？这是查询：

```
public List<PedidoDTO> getPendingRequests(){

    List<PedidoDTO> pendingReq=null;
    QueryBuilder<PedidoDTO, Integer> queryBuild=null;

    try {
        queryBuild=getHelper().getPedidosDao().queryBuilder();
        pendingReq=queryBuild.where().eq(PedidoDTO.ESTADO_FIELD_NAME, PedidoDTO.SIGLA_ESTADO_PENDENTE).query();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return pendingReq;
} 
```

obj 值显示为“P”，这是我在将其插入数据库时​​转换为 sql 的值。没有太多意义......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:06:38.303

默认情况下，ORMLite 存储枚举类型的字符串名称——在您的情况下，它将存储`REGISTARNOTIFICACAORESPOSTA`. 您可以使用以下`ENUM_INTEGER`数据类型覆盖此行为并存储序数值：

```
@DatabaseField(dataType=DataType.ENUM_INTEGER)
private TipoPedido tipo; 
```

这会将`integer`序数值存储在数据库中，而不是字符串。引用文档：

> 字符串名称是默认的（并且建议超过`ENUM_INTEGER`），因为它允许您在列表中的任何位置添加额外的枚举，而不必担心以后必须转换数据。

但是，您似乎想存储`tipoValue`枚举中的字符串。为此，您必须注册一个自定义持久化器。请参阅有关此的文档：

> [http://ormlite.com/docs/custom-persister](http://ormlite.com/docs/custom-persister)

这允许您具体定义如何将 Java 字段转换为数据库表示，反之亦然。两个重要的方法是：

*   [`javaToSqlArg(...)`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/FieldConverter.html#javaToSqlArg%28com.j256.ormlite.field.FieldType,%20java.lang.Object%29)从 Java 转换为数据库格式和
*   [`sqlArgToJava(...)`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/FieldConverter.html#sqlArgToJava%28com.j256.ormlite.field.FieldType,%20java.lang.Object,%20int%29)它从数据库转换回Java。

您可以[`BaseDataType`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/types/BaseDataType.html)从头开始扩展和构建转换器，或者您可以扩展[`EnumStringType`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/types/EnumStringType.html)或[`StringType`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/types/StringType.html)仅覆盖上述重要方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:44:35.683

我使用该`Enum.name()`方法填充 Db 列并将`Enum.valueOf()`值解析回来。恕我直言，我认为永远不应该使用序数。

此外，您可能想看看这个关于存储枚举值标签的内容：

[是否有适用于 Android 的枚举字符串资源查找模式？](https://stackoverflow.com/questions/9742050/is-there-an-enum-string-resource-lookup-pattern-for-android)**强文本**

# file - 使用 phpStorm 添加更多用于部署的文件夹

> ID：12042102
> 
> 赞同：2
> 
> 时间：2012-08-20T17:18:49.407
> 
> 标签：file, ftp, save, phpstorm

我已经通过`View > Remote Host`. 当我按下同步时，新文件夹不会出现在我的本地副本或项目视图中。现在我喜欢拥有可以编辑的本地副本（启用保存时自动同步）。

如何导入这些附加文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T19:11:02.730

这就是我的做法。从“远程主机”选项卡中，右键单击该文件夹并选择“从排除中删除路径”。然后我将远程文件夹拖到它应该在项目（本地）窗格中的位置，并将所有文件复制过来。

我尝试了从已部署的同步，与文档所说的本地同步，但从未做任何事情。以上方法对我有用

# objective-c - JSON返回值在目标C中被错误解析：iOS

> ID：12042103
> 
> 赞同：0
> 
> 时间：2012-08-20T17:18:49.917
> 
> 标签：objective-c, ios, json

```
{"Overviews":
    [
     {"AAAA": [
               {"Generala": "sometext",
                "Generalb": "sometext",
                "Generalc": "sometext"}
              ],
     "BBBB": [
               {"Generala": "sometext",
                "Generalb": "sometext",
                "Generalc": "sometext"}
              ]
      }
     ]
 } 
```

嗨，我使用 SBJson 来解析这个 json。当我分配 NSArray *json = [jsonObject valueForKey:@"Overviews"];。数据的层次结构并不顺利。我使用了一个 NSDictionary、2 个 NSArray 和 1 个 NSString 来解析 Generala。

我的目标是像这样解析数据“Generala”：

```
NSDictionary *data = [overviews valueForObject:@"AAAA"];
NSString *generals = [data valueForObject:@"Generala"]; 
```

我在 json 文件中做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:26:42.417

你那里有多余的数组。Overviews 是一个数组，其中一个元素位于 - 字典中。它应该只是字典。这同样适用于 AAAA 和 BBBB - 它们是包含单个字典的数组，而它们应该只是字典。

基本上，只需删除 JSON 中的所有方括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:40:25.373

您的源是一个条目的字典，该条目包含一个条目的数组，该条目包含两个条目的字典，每个条目包含一个条目的数组，该条目包含三个条目的字典。

我怀疑这正是 JSON 解析器解析它的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T19:52:03.837

```
NSArray *dataArray = [overviews objectForKey:@"AAAA"];
NSDictionary *dataDict = [dataArray objectAtIndex:0];
NSString *generals = [dataDict objectForKey:@"Generala"]; 
```

这将使您获得正确的值，但是正如您所看到的，我必须“硬编码”索引“0”。您可能需要一些逻辑来访问特定的数组。

或将您的 json 更改为：

```
{"Overviews":
     {"AAAA":
               {"Generala": "sometext",
                "Generalb": "sometext",
                "Generalc": "sometext"},
     "BBBB":
               {"Generala": "sometext",
                "Generalb": "sometext",
                "Generalc": "sometext"}
      }
} 
```

并使用： NSDictionary *dataDict = [overviews objectForKey:@"AAAA"]; NSString *string = [dataDict objectForKey:@"Generala"];

# algorithm - 在 O(n) 中对 [0,n^2 - 1] 之间的 n 个数字进行排序？

> ID：12042107
> 
> 赞同：10
> 
> 时间：2012-08-20T17:19:18.753
> 
> 标签：algorithm, sorting, radix-sort

> **可能重复：**
> [长度为 N 的数组可以包含值 1,2,3 ... N^2。是否可以在 O(n) 时间内排序？](https://stackoverflow.com/questions/4238460/an-array-of-length-n-can-contain-values-1-2-3-n2-is-it-possible-to-sort-in)

给定`n`范围内的数字，`[0,n^2 -1]`我们如何在**O(n)**运行时间内对它们进行排序？

我有一种解决方案涉及的感觉`radix sort`，但我仍然缺少一些东西。

`n`数字是整数。

有任何想法吗 ？

**备注**：不是作业！

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:38:17.010

实际时间将取决于您拥有的数据分布，但我会执行以下操作：

*   制作 n 个桶。
*   遍历每个数字并将值为 i 的元素放入存储桶 sqrt(i)。
*   遍历每个桶，并对桶中的每个元素执行基数排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T17:27:57.893

我觉得你运气不好。基数排序是 O(k*n)，其中 k 是位数。在您的情况下，k = log(n^2)，导致 O(n*log(n))。

# objective-c - Cocos2d 2.x 大精灵帧率下降

> ID：12042113
> 
> 赞同：1
> 
> 时间：2012-08-20T17:19:38.180
> 
> 标签：objective-c, cocos2d-iphone, opengl-es-2.0

我最近一直在使用 Cocos2d 2.0，我注意到如果我使用的是屏幕尺寸一半或更大的精灵，帧速率会下降大约 10-20 帧。这很麻烦，因为我需要至少一个全屏精灵作为背景。

我已尽我所能降低绘制调用和纹理内存，但唯一将 fps 提高到 60 的方法是移除背景精灵。

cocos2d 2.0 在制作精灵时有什么不同之处吗？我已经在多种设备（iPad 和 iPhone）上尝试过，它们都有同样的问题。

更新：我注意到精灵本身的大小，而不是它的纹理，正在影响帧速率。如果我在 x 和 y 上将精灵缩放到 0.5，那么我的速度是 60fps。如果我只缩放 x 或 y 轴，那么帧速率会在 50 到 60 之间跳跃（比全屏好 10 fps）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:31:46.967

弄清楚了。我们所要做的就是将场景的 CCLayerColor 变成 CCLayer。鉴于我们使用的是全尺寸背景精灵，因此没有必要在每一帧都重新绘制背景。

# javascript - 使用 HTML/javascript 创建包含表单数据的 CSV 文件并将其保存到 iPad 上的 DropBox

> ID：12042114
> 
> 赞同：1
> 
> 时间：2012-08-20T17:19:41.763
> 
> 标签：javascript, forms, ipad, html, dropbox

我正在尝试使用 HTML5 和 javascript 创建要在 iPad 上离线使用的表单。我想要一个按钮来创建表单数据的 CSV 文件（按日期和时间戳命名）并将其保存到保管箱应用程序（或类似的东西/谷歌驱动器？）。然后我将在未来同步它，将数据解析到数据库中，以便分析数字。

我一直在寻找答案和指南，但我很新，所以我会很感激任何指导。

我发现的一种方法是创建一个表单并创建一个 javascript 来创建一个 URL，使用这些字段来创建一个 DataURI，它会输出一个 CSV 文件。然后，用户将此文件保存到 Dropbox 文件夹。

这是一个很好的方法还是有更简单的方法？

提前致谢！

# grails - 如何在不使用“生成控制器”的情况下确保模型与当前用户绑定？

> ID：12042121
> 
> 赞同：1
> 
> 时间：2012-08-20T17:20:16.347
> 
> 标签：grails, grails-controller

我正在尝试创建我的第一个 Grails 应用程序，我发现许多域模型需要与当前用户绑定。例如，创建的评论必须由当前用户拥有，保存和编辑的配置文件必须是当前用户的，等等。

`generate controller`我每次都开始使用和插入必要的代码。但是，这通常是我目前对这些控制器所做的唯一更改，并且每次都是相同的更改。一定有一种更优雅的方式，感觉更“Grailly”。

到目前为止，我想出的最好的想法是在每个模型中将必须与当前用户绑定的字段命名为完全相同的东西（例如`originatingUser`），然后用户使用过滤器`before`来覆盖当前设置为`originatingUser`当前`User`存储的任何内容在`session`.

这种方法有缺陷吗？有更好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:05:48.450

> `generate controller`我每次都开始使用和插入必要的代码。但是，这通常是我目前对这些控制器所做的唯一更改，并且每次都是相同的更改。一定有一种更优雅的方式，感觉更“Grailly”。

无论您做什么，都不要到处复制/粘贴代码。这与 Grails 无关。只是不要这样做。每次你这样做，上帝都会杀死一只小猫。

如果不了解您在做什么的更多细节，很难说，但我可以看到一些选项

1）如果您需要将实体保留在数据库之外，一旦加载它们，您就可以将它们与用户一起放入会话中。您可以在基本控制器类中编写代码来访问会话以检索“当前”模型实例，然后让所有控制器扩展该控制器。或者您可以选择将会话访问代码放入某种帮助程序中。

2) 1 的问题是它不能很好地扩展。如果您有很多需要保留的物品，我不会将它们放在会话中。在这种情况下，您需要查看您的设计。您真的需要将实例保留在会话中吗？如果您正在检查用户是否拥有正在修改的对象，则可以将该检查放入服务方法中。因此，如果您检查编辑，服务应该做的第一件事是检查用户是否 a) 具有修改实例的必要角色（如果您使用安全性），并且 b) 检查用户是否拥有该实例（或以其他方式可以修改）。

**根据评论进行编辑**

首先，如果您使用的是 Spring Security 插件，您可以[轻松获取当前用户](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html#6.2%20SpringSecurityService)。
如果你走这条路，你需要将安全服务注入你想要获取用户的每个控制器/服务中。

其次，如果您不是，您应该编写一个`SessionHelper`带有静态方法的类，以帮助将所有会话操作代码保存在一个地方（Spring Security 也有这样的助手）。如果您这样做，则可以随时随地获取当前用户。

最后，您应该让用户进入您的服务层。服务应该对持久实例进行所有操作。如果用户只能附加到他们自己的项目，这也有助于以某种方式为特定事物获取错误用户而出现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:08:04.887

如果确实每个对象都需要绑定到用户，您可以修改控制器模板以包含所需的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:26:03.147

> 到目前为止，我提出的最好的想法是在每个模型中将必须与当前用户绑定的字段命名为完全相同的内容（例如 originatingUser），然后在之前使用过滤器来覆盖当前设置为 originatingUser 的任何内容当前用户存储在会话中。
> 
> 这种方法有缺陷吗？有更好的吗？

您可以使用另一种更复杂的方法：AST 转换、注释等，但这是一种简单有效的方法。

顺便问一下，您使用的是 Spring Core Security 插件吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T20:12:40.700

您是否计划推出自己的安全机制？查看 Spring Security 插件（或类似插件）可能更有用。看看您是否可以修改控制器模板以加快该过程。在那些最初的迭代之后，虽然你真的应该尝试拯救一些小猫。

# c# - Gridview 编辑/删除问题

> ID：12042122
> 
> 赞同：0
> 
> 时间：2012-08-20T17:20:18.387
> 
> 标签：c#, asp.net, gridview

我有一个显示在线订单的一些基本信息的网格视图（零件、数量、发货地、请求的日期和运输方式）。当我在网格视图中选择“编辑”或“删除”链接时，由于某种原因，它不会让我做任何一个。这是我所拥有的：

```
protected void Page_Load(object sender, EventArgs e)
    {                          
        table = new DataTable("myTable");
        DataColumn column1 = new DataColumn();
        column1.DataType = typeof(string);
        column1.ColumnName = "Part";
        DataColumn column2 = new DataColumn();
        column2.DataType = typeof(Int32);
        column2.ColumnName = "Quantity";
        DataColumn column3 = new DataColumn();
        column3.DataType = typeof(string);
        column3.ColumnName = "Ship-To";
        DataColumn column4 = new DataColumn();
        column4.DataType = typeof(string);
        column4.ColumnName = "Requested Date";
        DataColumn column5 = new DataColumn();
        column5.DataType = typeof(string);
        column5.ColumnName = "Shipping Method";
        table.Columns.Add(column1);
        table.Columns.Add(column2);
        table.Columns.Add(column3);
        table.Columns.Add(column4);
        table.Columns.Add(column5);
     }

    protected void addbtn_Click(object sender, EventArgs e)
    {
        //assign all variables in form
        part = parttxtbox.Text.ToUpper();
        shipto = shiptotxtbox.Text;
        reqdate = reqdatecal.SelectedDate.ToShortDateString();
        shipmthd = shipddl.SelectedItem.ToString();
        //validate to make sure all fields are in correct format and acceptable for processing
        if ((importlstbx.Items.Contains(item)) && (qtychk == 1) && (shipto.ToString() != "") &&
            (Convert.ToDateTime(reqdate) >= DateTime.Today) && (shipmthd != "-- Select --"))
        {
            validatelbl.Visible = false;
            Session["Part"] += part + "|";
            Session["Quantity"] += qty + "|";
            Session["Ship-To"] += shipto + "|";
            Session["Requested Date"] += reqdate + "|";
            Session["Shipping Method"] += shipddl.SelectedItem.ToString() + "|";
            CreateTable();

            //Clear All Data on Postback
            ClearTextBoxes(Page);
            //ClearDDLBoxes(Page);  
            SetFocus(parttxtbox);
        }
        orderbtn.Visible = true;
    }

    public void CreateTable()
    {
        string[] spart = Session["Part"].ToString().Split('|');
        string[] sqty = Session["Quantity"].ToString().Split('|');
        string[] sship = Session["Ship-To"].ToString().Split('|');
        string[] sdate = Session["Requested Date"].ToString().Split('|');
        string[] smethod = Session["Shipping Method"].ToString().Split('|');
        int recordnum = spart.Length;

        for (int i = 0; i < recordnum - 1; i++)
        {
            DataRow row = table.NewRow();
            row["Part"] = spart[i].ToString();
            row["Quantity"] = sqty[i].ToString();
            row["Ship-To"] = sship[i].ToString();
            row["Requested Date"] = sdate[i].ToString();
            row["Shipping Method"] = smethod[i].ToString();
            table.Rows.Add(row);
        }
        griditems.DataSource = table.DefaultView;
        griditems.DataBind();
    }

    private void BindData()
    {
        griditems.DataSource = table;
        griditems.DataBind();
    }

    protected void griditems_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        griditems.PageIndex = e.NewPageIndex;
        BindData();
    }

    protected void griditems_RowEditing(object sender, GridViewEditEventArgs e)
    {
        //Set the edit index. 
        griditems.EditIndex = e.NewEditIndex;
        //Bind data to the GridView control. 
        BindData();
    }

    protected void griditems_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        //Reset the edit index.
        griditems.EditIndex = -1;
        //Bind data to the GridView control.
        BindData();
    }

    protected void griditems_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        //Retrieve the table from the session object.
        DataTable dt = table;

        //Update the values.
        GridViewRow row = griditems.Rows[e.RowIndex];
        dt.Rows[row.DataItemIndex]["Part"] = ((TextBox)(row.Cells[1].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["Quantity"] = ((TextBox)(row.Cells[2].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["Ship-To"] = ((TextBox)(row.Cells[3].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["Requested Date"] = ((TextBox)(row.Cells[4].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["Shipping Method"] = ((DropDownList)(row.Cells[5].Controls[0])).SelectedItem;

        //Reset the edit index.
        griditems.EditIndex = -1;
        //Bind data to the GridView control.
        BindData();
    }

    protected void griditems_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        //int id = Convert.ToInt32(griditems.DataKeys[e.RowIndex].Values[0].ToString());
        //griditems.DeleteRow(id);
        //BindData();

        //string item = griditems.DataKeys[e.RowIndex].Value.ToString();
        //griditems.DeleteRow(Convert.ToInt32(item));
        //BindData();

        //TextBox FileContentsTextBox = parttxtbox.FindControl("part") as TextBox;
        //FileContentsTextBox.Text = string.Format("You have opted to delete {0}.", item);
        //File.Delete(item);

        //////((DataTable)ViewState["Data"]).Rows.RemoveAt(e.RowIndex);
        //((DataTable)table).Rows.RemoveAt(e.RowIndex);
        //BindData();
        ////griditems.DataSource = ((DataTable)table);
        ////griditems.DataBind();

    }

} 
```

我尝试了很多东西，这就是为什么这么多被注释掉的原因。不用说，它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:08:49.520

```
protected void Page_Load(object sender, EventArgs e)
    {
       if (!Page.IsPostBack)
       {
        //Bind gridview
       }
     } 
```

[http://satindersinght.blogspot.in/2012/08/how-to-addupdate-record-using-gridview.html](http://satindersinght.blogspot.in/2012/08/how-to-addupdate-record-using-gridview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:51:06.057

我终于找到了我的问题的答案。这是允许我在绑定到 DataTable 时删除所选行的代码。

```
protected void griditems_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        DataTable dt = table;
        if (dt.Rows.Count > 0)
        {
            dt.Rows.RemoveAt(e.RowIndex);
            griditems.DataSource = dt;
            BindData();
        } 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:29:39.870

您必须将 ViewState 添加到您的网格并绑定一次（当您发布时，您不会重新创建表）

```
If(! IsPostBack)
{
     //Create table

     table = new DataTable("myTable");
        DataColumn column1 = new DataColumn();
        column1.DataType = typeof(string);
        column1.ColumnName = "Part";
        DataColumn column2 = new DataColumn();
        column2.DataType = typeof(Int32);
        column2.ColumnName = "Quantity";
        DataColumn column3 = new DataColumn();
        column3.DataType = typeof(string);
        column3.ColumnName = "Ship-To";
        DataColumn column4 = new DataColumn();
        column4.DataType = typeof(string);
        column4.ColumnName = "Requested Date";
        DataColumn column5 = new DataColumn();
        column5.DataType = typeof(string);
        column5.ColumnName = "Shipping Method";
        table.Columns.Add(column1);
        table.Columns.Add(column2);
        table.Columns.Add(column3);
        table.Columns.Add(column4);
        table.Columns.Add(column5);

} 
```

2 将 ViewState 添加到您的 gridView

# asp.net - 如何将 httpcontext 对象传递给 Web 服务

> ID：12042129
> 
> 赞同：1
> 
> 时间：2012-08-20T17:21:07.970
> 
> 标签：asp.net, vb.net, web-services, service

您如何将 httpcontext.current 对象传递给 Web 服务并在服务中使用该对象，我收到一条错误消息，说它需要一个字符串 - 这一定是可能的？

```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols

<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class WebService
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Sub doThis(ByVal HC As HttpContext)
        'do something
    End Sub
End Class

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim s As test2.WebService = New test2.WebService
    s.doThis(HttpContext.Current)
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:24:19.223

HttpContext 不是可序列化的，因此不能作为字符串发送。HttpContext 是一个具有其他复杂属性的复杂对象，因此如果您将其序列化，它会相当大（这意味着发送数据会慢很多）。

我相信最好将您需要的信息封装在自定义类中并将其发送到服务。

也就是说，使用可以序列化的简单类型（字符串、整数、双精度等）创建一个类，并用您需要的信息填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:24:46.753

你不能通过`HttpContext` `ByVal`. `ByVal`按值表示，这意味着`HttpContext`需要复制 ' 的值才能传递给您的方法。由于它是一个 [复杂] 对象，因此您不能这样做。相反，您需要传递它`ByRef`，这意味着将对对象的引用传递给您的方法并处理该引用。

# sql - iOS、SQL 数据记录器

> ID：12042132
> 
> 赞同：0
> 
> 时间：2012-08-20T17:21:27.817
> 
> 标签：sql, ios

我不断收到错误，遗憾的是我看不出我做错了什么。`tripname`我想要一个带有插入, `timestamp`, `lat`, `longi`, `accuracy`, and的语句`speed`。已经建好数据库但是不能写成功的SQL语句，请帮忙

这是我的代码：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{

    NSString *databaseDir;
    NSArray *dirPath;
    //get the documents path
    dirPath= NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    databaseDir =[dirPath objectAtIndex:0];
    databasePath=[[NSString alloc]initWithString: [databaseDir stringByAppendingPathComponent:
                                                   @"deathTrail.db" ]];
    sqlite3_stmt *statement;
    const char *dbpath=[databasePath UTF8String];
    if (sqlite3_open(dbpath, &deathTrail)==SQLITE_OK){

        NSString *sql_stmt1=[[NSString alloc] initWithFormat:@"INSERT VALUES INTO LOCATION_POINTS (LATITUDE, LONGITUDE) VALUES (\"%d\", \"%d\")",  newLocation.coordinate.latitude, newLocation.coordinate.longitude];

        const char *insertstmt=[sql_stmt1 UTF8String];
        sqlite3_prepare_v2(deathTrail, insertstmt, -1, &statement,NULL);
        if(sqlite3_step(statement)==SQLITE_DONE) {
            status.text=@"it worked";
        } else {
            status.text=@"it failed";
        }
        sqlite3_finalize(statement);
        sqlite3_close(deathTrail);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:20:03.857

你解决了吗？

如果没有，这里还有一件事要检查。如果您在应用程序的早期执行 SELECT 语句并忘记包含 sqlite3_finalize(statement); 然后插入语句将不起作用。注销 sql err msg 将显示“数据已锁定”。您仍然可以执行更多的 SELECT 语句，但是在任何地方都缺少一个 finalize 语句，并且 INSERTS 将被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:47:43.797

1.  您也应该检查`sqlite3_prepare_v2`命令的结果。

2.  如果要么`sqlite3_step`失败，你应该检查结果，`sqlite3_errmsg`这样你就知道失败了（在这种情况下，因为上面的代码没有明显的问题，我认为这是因为表不存在）。

3.  一般来说，如果您在尝试打开它时知道该数据库应该存在，您应该使用`sqlite_open_v2`(eg `sqlite3_open(dbpath, &deathTrail, SQLITE_OPEN_READWRITE, NULL)`) 这样它就不会为您创建一个空白数据库。或者，如果您希望它创建数据库，则继续使用，但如果该表尚不存在，请`sqlite3_open`确保您正在执行适当的 SQL语句。`CREATE TABLE`

4.  如果您认为它错误地为您创建了一个空白数据库，请不要忘记重置您的模拟器或删除并重新安装程序以确保将删除任何空白数据库。

5.  如果您打算使用捆绑包中的数据库进行读写，请确保以编程方式将数据库从捆绑包复制到文档文件夹。

# android - 用于 ADB 协议的 Ruby gem？

> ID：12042134
> 
> 赞同：1
> 
> 时间：2012-08-20T17:21:38.603
> 
> 标签：android, ruby, adb

我的一位同事认为，有一个 Ruby gem 可以在 Ruby 中实现 ADB 客户端 - 因此允许 Ruby 代码以 OO 方式与 ADB 一起工作，而不仅仅是通过 shell 驱动命令行客户端。他不知道这颗宝石是什么，但他很确定自己见过它。

在搜索了我能想到的所有搜索引擎之后，我不太确定他是否那么确定。:-) 我找不到这样的东西。这听起来很熟悉吗？如果它是一个通过 TCP 端口的简单协议，那么使用 Net::Telnet 或其他东西来实现似乎很容易。我会，但我在任何地方都找不到该协议的规范，当然，如果这已经完成，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:02:15.673

我刚刚遇到了红宝石宝石“android-adb”。这对你有用吗？

[https://rubygems.org/gems/android-adb](https://rubygems.org/gems/android-adb)

# vim - 在我关闭 NerdTree 窗口后，MiniBufExplorer 被激活，而不是以前活动的窗口（在切换 NerdTree 之前）

> ID：12042135
> 
> 赞同：1
> 
> 时间：2012-08-20T17:21:46.397
> 
> 标签：vim, nerdtree, vim-plugin, minibufexplorer

我正在使用 NERDTreeToggle 函数打开 NERDTree 窗口，当我关闭它时（使用相同的函数），miniBufExplorer 会激活，但不是我在打开 NERDTree 之前编辑过的窗口。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:15:38.953

This boils down to the way Vim behaves; when you close a window, Vim does not move to the last active window. Unfortunately, there's no way around this, as it isn't really viable to remember the "last active window" from Vim's perspective; window ids are not constant in vim, so there's no reliable way to script the exact behaviour you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T20:12:50.980

当我查看[插件站点](http://www.vim.org/scripts/script.php?script_id=159)时，我注意到 miniBufExplorer 上次更新是 2004 年。可能它已经过时并且与 vim 7 存在兼容性问题。我建议用[buftabs](http://www.vim.org/scripts/script.php?script_id=1664)替换它，这对我很有用。

# mysql - mysql按2列分组合并结果

> ID：12042136
> 
> 赞同：1
> 
> 时间：2012-08-20T17:21:57.780
> 
> 标签：mysql, group-by, query-optimization

我正在尝试弄清楚我想如何构造这个查询并且遇到了一些困难。

基本上，我试图在 id 表示另一个表中的对象的行中计算最常用的 id，但 id 可以出现在 2 列中。

当我只是将它用于一列时，此查询运行良好：

```
SELECT rb_1,
       Count(*) AS num
FROM   ci_lineups
GROUP  BY rb_1
ORDER  BY Count(*) DESC
LIMIT  10 
```

但是现在我想做一个类似的事情，除了检查一个名为 ass 的列`rb_2`，它可以包含所有的 id `rb_1`。

当我尝试按 2 列分组时，它只是将组视为两列的组合。

如果我使用我的第一个查询两次，每列一次，我可以在 PHP 中编写一个快速脚本来组合和排序计数，但我认为可能有一种方法可以用 MySQL 做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:29:35.217

以下查询应该做你想做的事：

```
SELECT field, sum(cnt)
FROM (
  SELECT rb_1 as field, count(*) as cnt
  FROM ci_lineups
  GROUP BY rb_1
  UNION ALL
  SELECT rb_2 as field, count(*) as cnt
  FROM ci_lineups
  GROUP BY rb_2
)
GROUP BY field
ORDER BY sum(cnt) DESC
LIMIT 10; 
```

# cakephp - Cakephp HABTM 连接插件和核心应用程序

> ID：12042139
> 
> 赞同：0
> 
> 时间：2012-08-20T17:22:25.497
> 
> 标签：cakephp, cakephp-2.2

我在插件上的模型/表和我的核心应用程序中的模型/表之间进行 HABTM 连接时遇到了实际问题。

基本上我的核心应用程序有一个项目模型，我的插件有一个购买模型。

一次购买可以购买许多物品。

我已经定义了表，我插件中的所有表都有前缀 itm_ （表示它们正在处理项目）

该插件称为 itemServices。

连接表是插件的一部分，是 itm_purchases_items

HABTM 代码是（在核心项目上）：

```
'itemServices.Purchase' => array(
  'className' => 'itemServices.Purchase',
  'joinTable' => 'itm_purchases_items',
  'foreignKey' => 'item_id',
  'associationForeignKey' => 'purchase_id',
  'unique' => 'keepExisting',
), 
```

和（在插件中购买）：

```
'Item' => array(
  'className' => 'Item',
  'joinTable' => 'itm_purchases_items',
  'foreignKey' => 'purchase_id',
  'associationForeignKey' => 'item_id',
  'unique' => 'keepExisting',
 ) 
```

我收到 SQL 错误，因为自动生成的查询尝试对连接的一侧使用以下表示法

```
`itm_purchases` AS `itemServices`.`Purchase` 
```

这正在创建一个无效的查询。

关于这样做的正确方法有什么想法吗？

生成的 SQL 是（删除了数据库名称）

```
SELECT `itemServices`.`Purchase`.`id`,
       `itemServices`.`Purchase`.`customer_id`,
       `itemServices`.`Purchase`.`agreement_number`,
       `itemServices`.`Purchase`.`total_value`,
       `itemServices`.`Purchase`.`item_count`,
       `itemServices`.`Purchase`.`created`,
       `itemServices`.`Purchase`.`modified`,
       `purchases_items`.`purchase_id`,
       `purchases_items`.`item_id`,
       `purchases_items`.`created`,
       `purchases_items`.`modified`
FROM
        `itm_purchases` AS `itemServices`.`Purchase` 
JOIN 
        `itm_purchases_items` AS `purchases_items`
ON
       (`purchases_items`.`item_id` = 18 AND `purchases_items`.`purchase_id` = `itemServices`.`Purchase`.`id`) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:32:38.033

发现了问题，

```
'itemServices.Purchase' => array(
  'className' => 'itemServices.Purchase',
  'joinTable' => 'itm_purchases_items',
  'foreignKey' => 'item_id',
  'associationForeignKey' => 'purchase_id',
  'unique' => 'keepExisting',
), 
```

实际上应该是：

```
'Purchase' => array(
  'className' => 'itemServices.Purchase',
  'joinTable' => 'itm_purchases_items',
  'foreignKey' => 'item_id',
  'associationForeignKey' => 'purchase_id',
  'unique' => 'keepExisting',
), 
```

# security - 每次在 VS2012 中打开解决方案时都会重置 IIS express applicationhost.config 安全性

> ID：12042144
> 
> 赞同：10
> 
> 时间：2012-08-20T17:22:51.327
> 
> 标签：security, visual-studio-2012, windows-authentication

我在 VS2012 中开发了一个使用表单身份验证的 MVC4 应用程序。

```
[认证方式=“表格”]
  [forms loginUrl="~/Account/Login" timeout="2880" /]
[/验证]

```

它使用默认的 IIS 8.0 Express。

每次我从 VS 中打开并运行应用程序时，都会收到以下消息：

> HTTP 错误 401.2 - 未经授权
> 
> 由于身份验证标头无效，您无权查看此页面。

我发现要避免出现此屏幕，我必须将 [User Documents]\IISExpress\config 文件夹中 applicationhost.config 文件的 Security 部分的anonymousAuthentication 和 windowsAuthentication 键更改为“true”：

```
[system.web服务器]
  [安全]
    [验证]
      [启用匿名身份验证=“真”/]
      [windowsAuthentication启用=“真”/]
    [/验证]
  [/安全]
[/system.web服务器]

```

但是每次我在 VS 中重新打开解决方案时，键都会重置为 false。

我怎样才能使然后永久设置为真？

我尝试将这些密钥放在应用程序的 web.config 中，但随后收到消息：

> HTTP 错误 500.19 - 内部服务器错误
> 
> 无法访问请求的页面，因为该页面的相关配置数据无效。

有帮助的人吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T12:46:29.997

如果问题是 Visual Studio 在打开解决方案时更新了 applicationhost.config 中的两个设置，您可以通过在解决方案资源管理器中选择项目，查看**属性**窗格（未处于调试模式时可用）和设置为*Enabled*两项*Anonymous Authentication*和*Windows Authentication*。

顺便说一句，在我的情况下，生成 401.2 错误的参数只是*Anonymous Authentication*，您可能想尝试为 Windows Authentication 保留默认值。

（PS，你的帖子解决了 401.2 的问题，真的为我节省了很多时间，非常感谢！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T14:00:53.700

您可以通过更改来编辑 IIS 身份验证模式

1.  \My Documents\IISExpress\config\applicationhost.config 中的 iis 属性

2.  Visual Studio 中的项目属性

第二个选项是你的答案。

带有屏幕截图的完整答案已经在 stackoverflow 上：[https ://stackoverflow.com/a/7168308/2988788](https://stackoverflow.com/a/7168308/2988788)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T03:04:54.093

您通常可以使用您的 Windows 帐户，您的域是您的电脑名称和您的 Windows 帐户/密码。例如 pc-name\username 也将 IISUSR 添加为您的安全设置中的帐户。

# asp.net-mvc - 在 MVC 中使用 EditorTemplate 时如何破译 html 输入字段大小

> ID：12042148
> 
> 赞同：0
> 
> 时间：2012-08-20T17:23:03.010
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在我的项目中使用[Brad Wilsons](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)自定义编辑器模板。但是，我在页面上输入字段的大小似乎与数据库中的列大小不对应。前任。我的文本框显示大小为 5，而实际上我的数据库字段是 varchar(50)。MVC/.NET 如何翻译/解析字段的大小应该是多少？

# ms-access - 将 Excel 中的单元格链接到 Access 表字段

> ID：12042154
> 
> 赞同：0
> 
> 时间：2012-08-20T17:23:43.307
> 
> 标签：ms-access, excel, vba

考虑我在 access 2003 中有一个宏，它使用 transferSpreadsheet 函数将联合查询导出到 excel 2007 电子表格；导出的数据取决于用户输入的日期范围。

现在假设这个 UNION ALL 查询将一个表和一个查询分组。查询是链接表和另一个表的左连接，以添加缺少的字段。

是否可以允许更新excel中的单元格以同时更新三个表（表，查询（2表））中记录的正确字段，这些表是联合的一部分（不能直接编辑，只能使用在一张表中获取所有信息）？如果是这样，有人可以告诉我正确的方法来做到这一点，或者至少在某种程度上引导我朝着正确的方向前进吗？

如果我在 vba 中导出和格式化 excel 文件时，我希望它链接单元格。由于最终用户不知道如何链接单元格。我问是因为该文件是每月生成的，整个月到下个月都会更改，有时在下个月仍然会更新，并且两者都是同时进行的。如果它们链接起来会更容易，这样就不必连续生成excel文件。

使用：

VBA（不是 vb.net）

访问 2003

Excel 2007

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-22T01:46:40.100

kdgwill，在执行您的传输电子表格功能后，您可以执行以下操作。这将获取刚刚保存的电子表格的名称，操作您需要更改的内容，然后使用相同的名称或新名称将其保存回 Excel。根据数据的大小，这种情况发生得非常快。65,000 行数据需要一分钟才能保存文件。即使调用此函数，您也可以将数据添加到表中。使用它，看看您是否可以根据自己的方式操纵它。

```
Dim objExcel            As New Excel.Application
Dim objWB               As Excel.Workbook
Dim objWS               As Excel.Worksheet
Dim objWS2              As Excel.Worksheet
Dim objCell             As Excel.Range

Set objExcel = CreateObject("Excel.Application")
Set objWB = objExcel.Workbooks.Open("path of the original excel file\excelfile.xls")

objWB.Activate
'Do not show the excel window during this operation.  By doing this the processing is faster.
objExcel.Visible = False

sSection = "Open Spreadsheet"
If objWB.Worksheets.Count = 0 Then
    objWB.Worksheets.Add
End If

'Open the first sheet named what ever you want to name it
 Set objWS = objWB.Sheets(1)

objWS.Name = "Name of Spreadsheet"
objWS.Activate

'Change the font to black or anything else you want to change
With objWS
    .Cells.Select
    .Cells.Activate
    .Cells.Font.Size = "12"
    .Cells.Font.Color = 0
    .Cells.Range("A1", "A1").Select
End With

    objExcel.Workbooks(1).SaveAs "path of new excel file to be saved\excelfile.xls"

'Clean up 
objWB.Close
Set objWB = Nothing
Set objExcel = Nothing 
```

# wordpress - WordPress，使用 meta_query orderby

> ID：12042157
> 
> 赞同：1
> 
> 时间：2012-08-20T17:24:02.123
> 
> 标签：wordpress, custom-fields

我正在尝试使用多个自定义字段显示结果，同时按第一个自定义字段（开始日期）对结果进行排序。我看到的建议使我尝试这样做：

```
$args = array(
    'category_name' => 'Events',
    'posts_per_page' => 6,
    'meta_key' => 'startdate',
    'meta_query' => array(
        'relation' => 'OR',
        array(
            'key' => 'startdate',
            'value' => $date,
            'compare' => '>='
        ),
        array(
            'key' => 'closedate',
            'value' => $date,
            'compare' => '>='
        )
    ),
    'orderby' => 'meta_value',
    'order' => 'desc'
); 
```

问题是如果没有 meta_key 参数，结果会默认过滤，即帖子的日期。当我添加 meta_key 参数对结果进行排序时，我会得到每个帖子的 meta_key 等于 startdate。似乎通过添加这些 meta_key 参数，语句完全忽略了 meta_query 数组中的条件。如何在不拉出所有 meta_key 等于 startdate 的帖子的情况下让查询按 startdate 排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:07:37.873

解决方案：

```
$args = array(
'category_name' => 'Events',
'posts_per_page' => 6,
'meta_key' => 'startdate',
'meta_compare' => '>=',
'orderby' => 'meta_value',
'meta_value' => $date,
'order' => 'DESC',
    'meta_query' => array(
        'relation' => 'OR',
        array(
            'key' => 'startdate',
            'value' => $date,
            'compare' => '>='
       ),
        array(
            'key' => 'closedate',
            'value' => $date,
            'compare' => '>='
        )
    )
); 
```

本质上，meta_key 参数在 MySQL 语句中创建了一个连接。连接不受参数的 meta_query 部分中所述条件的影响。[Codex](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)枚举参数以过滤连接。我希望我的结果按 startdate 对所有日期进行排序 >= 变量 $date。通过将**'meta_compare' => '>='**和**'meta_value' => $date**添加到我的 $args 数组中，我能够根据需要过滤结果。

# django - 下载了 Django-1.4.1 并且无法 tar

> ID：12042158
> 
> 赞同：0
> 
> 时间：2012-08-20T17:24:06.337
> 
> 标签：django, gzip, tar

我正在尝试下载/安装 Django，Django 网站上的文档说要下载 Django-1.4.1.tar.gz 文件，然后发出以下命令：

```
$ tar xzvf Django-1.4.1.tar.gz
$ cd Django-1.4.1
$ sudo python setup.py install 
```

当我这样做时，`tar xzvf Django-1.4.1.tar.gz`我得到：

```
$ tar xzvf Django-1.4.1.tar.gz
tar (child): Django-1.4.1.tar.gz: Cannot open: No such file or directory
tar (child): Error is not recoverable: exiting now
tar: Child returned status 2
tar: Error is not recoverable: exiting now 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:46:14.667

您当前的工作目录中似乎`Django-1.4.1.tar.gz`不存在。您可以通过在终端中执行以下命令来验证这一点

```
$ ls -l Django-1.4.1.tar.gz 
```

如果文件存在，那么您将在命令输出中看到一些详细信息，否则您将需要切换到您`Django-1.4.1.tar.gz`首先下载的目录。例如 - 如果您已下载`Django-1.4.1.tar.gz`，`$HOME/Downloads`则在执行之前先切换到该目录`tar`

```
$ cd ~/Downloads 
```

如果一切正确，以下命令应该可以工作 -

```
$ tar xzvf Django-1.4.1.tar.gz
$ cd Django-1.4.1
$ sudo python setup.py install 
```

## 选择

`Django-1.4.1.tar.gz`从命令行本身下载，然后使用`tar`. 尝试以下命令 -

```
$ cd /tmp/
$ wget http://www.djangoproject.com/m/releases/1.4/Django-1.4.1.tar.gz
$ tar xzvf Django-1.4.1.tar.gz
$ cd Django-1.4.1
$ sudo python setup.py install 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:56:09.523

看起来很奇怪，Django-1.4.1.tar.gz 不存在。要么你拼写错误，要么文档中可能有错误（不太可能），也许名称以 .tgz 而不是 .tar.gz 结尾。

或者，您在终端中运行这些命令，该终端的工作目录与下载 tar 文件的目录不同。例如，文件位于 /home/user/Downloads 中，但终端在 /home/user 中打开。检查文件名及其位置。

如果您发现该文件位于 /who/knows/what/dir/Django-1.4.1.tar.gz 中，则可以将第一个命令替换为“tar xzvf /who/knows/what/dir/Django-1.4.1 .tar.gz”，它应该可以工作。

# c# - 在文件搜索期间更新进度条

> ID：12042159
> 
> 赞同：4
> 
> 时间：2012-08-20T17:24:07.190
> 
> 标签：c#, .net, windows-7

这个[问题](https://stackoverflow.com/questions/724148/is-there-a-faster-way-to-scan-through-a-directory-recursively-in-net/724184#724184)提供了一种使用`kernel.dll`递归查找文件属性（例如文件名）的快速方法。问题是报告进度（例如在 Windows 窗体应用程序中）仅限于它当前所在的文件或目录，因为它没有关于预先总文件数的信息。

不过，我知道在 Windows 7 中，如果您使用文件资源管理器搜索文件，它会显示搜索进度条：

![在此处输入图像描述](../Images/72f5076a2eae635870f83e90d3862633.png)

那么他们在这里是怎么做到的呢？此处是否提前知道总文件数？是否可以在上面链接的问题的答案中模仿这种进度报告？如果没有预先的总文件数，我不确定如何做到这一点。

我能找到的最接近的问题是[这个](https://stackoverflow.com/questions/1678432/using-progress-bar-in-file-search)递归方法似乎有一些问题，因为我没有预先计算文件夹数量，而且对于包含许多文件的单个目录来说，这种行为会非常奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:32:08.280

根据您需要获得的准确度，可能有一个简单的两遍解决方案（对于网络驱动器不是最佳的，因此您可能需要在那里进行调整）。

对于第一`n`级目录（比如 4 个，包括驱动器），计算子目录的数量。这通常是一个快速操作，尽管您可以将其调整为仅在存在超过 5 个子目录或类似的子目录时才递归。存储此号码。

当您执行真正的搜索时，请跟踪您已完成`n`的在根步骤内的子目录的数量。使用此数字和存储的计数来估计完成情况。

例如，具有基本结构：

```
C:\
    a\
        1\
            i\
            ii\
            iii\
        2\
        3\
    b\
    c\ 
```

计数*a*，*1*，忽略*i*和兄弟姐妹，计数*2*等。然后，在搜索时，当您完成搜索*3*、*2*、*1*、*a*等时增加条形。

现在，这绝对不是万无一失的。可能存在竞争条件，它不是非常准确，以及各种各样的其他事情。

然而，对于一个低粒度的进度条，它足够接近以至于看起来非常准确。更重要的是，从用户体验的角度来看，使用存储的计数并将进度与之进行比较往往会阻止进度条在过程中途增长。

我实际上在[这里](https://github.com/ssube/VoodooShader/blob/master/Utilities/VoodooUI/ScanForm.cs)的一些代码中使用了这种技术。

最初的构建，下降了 10 个级别，仍然非常快。我不记得它进行了多少测试，但是在搜索 2.5-3 百万个文件时，该栏明显准确，没有很多停顿（尽管只提前检查了 1/1000）。请注意，进度条越短，显示的越准确。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:22:17.433

在后台启动一个线程，计算您正在搜索的目录下的文件。在后台，更新到目前为止统计的文件数。在进度条中使用此计数。一旦此计数大于 1，就可以安全地开始搜索。在计算进度时，如果您的搜索（奇迹般地）超过了您的后台文件计数器，或者如果进度条中偶尔可见的离题是不可接受的，请捏造结果。

这样就剩下找出计算文件的最快方法（考虑 FindFirstFileEx）。在本地驱动器上，可能需要 2 或 3 秒来计算像 Program Files 这样的文件夹。通过网络，它会花费更长的时间，因为使用 FindFirstFileEx，当您只需要文件计数和目录列表时，文件名会被传输。

这一切都假定您将花费更多时间在搜索上，而不仅仅是计算文件。

# vba - 从具有不同颜色文本的 Excel 电子表格中仅删除特定颜色的文本

> ID：12042161
> 
> 赞同：0
> 
> 时间：2012-08-20T17:24:13.827
> 
> 标签：vba, excel

我有一个带有两种颜色文本的电子表格，通常在相同的单元格中。我想运行一个宏，它只从它出现的每个单元格中删除黑色文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:38:11.093

如果您不想使用宏，为什么不使用“查找和选择”工具。转到“替换”。选择“选项”。选择“格式”并选择字体颜色或单元格颜色选项。选择您想要摆脱的颜色，将“替换为”框留空，然后单击“全部替换”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:52:58.553

这应该适合你：

```
Sub ForEachCharacterTextColor()
Dim wbk As Workbook
Dim i As Integer
Set wbk = ThisWorkbook
Set ws = wbk.Sheets(1)

Dim cell As Range

Cells.Select
Selection.NumberFormat = "@"
Range("A1").Select

On Error GoTo MyExitSub

    With ws
        For Each cell In ws.Range("A1:E2000").Cells
            'cell.Value = "'" & cell.Value
            For i = 1 To Len(cell)
                If cell.Characters(i, 1).Font.Color = RGB(0, 0, 0) Then
                    If Len(cell) > 0 Then
                        cell.Characters(i, 1).Delete
                    End If
                    If Len(cell) > 0 Then
                        i = i - 1
                    End If
                End If
            Next i
        Next cell
    End With

MyExitSub:
    If Err.Number > 0 Then
     MsgBox "Some of your cells are numbers formatted as text. You need to convert them to text completely."
     End
    End If
End Sub 
```

祝你好运。- 只要excel不认为您的任何单元格都是数字，它就会起作用。

# sql-server-2008 - 哪些存储过程会更新表？

> ID：12042164
> 
> 赞同：2
> 
> 时间：2012-08-20T17:24:23.590
> 
> 标签：sql-server-2008, tsql

是否可以以某种方式查询数据库以查找更新特定表中数据的所有存储过程？

我在一个名为 Cool Gen 的旧系统上工作过，它做了这个确切的事情，目前我想要类似的东西。

我对使用该表的存储过程不感兴趣（我已经有了那个列表，它很长）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T17:29:56.563

这可能会产生误报，具体取决于表名（可能在注释中或较大对象名的一部分），或者更新某个其他表然后引用该表的存储过程。

```
SELECT OBJECT_NAME([object_id])
  FROM sys.sql_modules
  WHERE LOWER(definition) LIKE '%update%table_name%'; 
```

我发现这比[依赖依赖视图](https://sqlblog.org/2008/09/09/keeping-sysdepends-up-to-date-in-sql-server-2008)更可靠的“第一次扫描” 。

您也可以考虑使用第三方工具，例如[SQL Search](http://www.red-gate.com/products/sql-development/sql-search/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:29:55.133

试试这个

```
Select OBJECT_NAME(object_id) from sys.sql_modules 
             where definition like '%UPDATE <table_name>%' 
```

# matlab - 在矩阵的指定区域中搜索最大值，然后在最大值附近提取矩阵的一部分

> ID：12042166
> 
> 赞同：0
> 
> 时间：2012-08-20T17:24:41.790
> 
> 标签：matlab, matrix, indexing, extract, region

我正在尝试提取矩阵的特定区域，然后找到该区域内的最大值并提取其周围的值以形成一个新的 9x9 矩阵。

这是我迄今为止发现的，我认为需要实施的内容：

```
% extract region
BRegion = B(rowStart:rowEnd, colStart:colEnd);
% find max value and get its index
[value, k] = max(BRegion(:));
[i, j] = ind2sub(size(BRegion), k);
% move indexes to correct spot in matrix 
i = i + rowStart-1;
j = j + colStart-1; 
```

在具有索引的区域中找到最大值后，我如何通过在其周围的 9x9 区域中获取值并使用最大值作为中心来构建新矩阵？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:48:02.687

```
% extract region
rowstart = 300;
rowend = 500;
colstart = 3500;
colend = 4500;
BRegion = B(rowstart:rowend, colstart:colend);

% find max value and get its index
[value, k] = max(BRegion(:)); 
[i, j] = ind2sub(size(BRegion), k);

% move indexes to correct spot in matrix
i = i + rowstart-1;
j = j + colstart-1;

% creates new matrix
new_row_begin = i-4;
new_row_end = i+4;
new_col_begin = j-4;
new_col_end = j+4;

newmat = B(new_row_begin:new_row_end,new_col_begin:new_col_end); 
```

# linux-kernel - Linux中块IO设备中的内存映射

> ID：12042168
> 
> 赞同：3
> 
> 时间：2012-08-20T17:24:49.613
> 
> 标签：linux-kernel, linux-device-driver, memory-mapping, block-device

我正在Linux中进行设备驱动程序开发。我在 Linux 中遇到过设备驱动程序的内存映射。

我试图开发一个 RAM Disk 块设备驱动程序（它从 RAM 中创建虚拟磁盘）。但我不知道如何在这里使用内存映射（只是为了尝试）。

我猜块设备会使用内存映射。

有人可以对此有所了解吗？

另外，如果我们使用 remap_pfn_range 映射用户空间中的内存，那将如何工作？如果用户只是在区域上写了一些东西，它会自动反映在设备内部还是会调用为 I/O 注册的请求函数？

# php - 获取最后一个“-”（破折号）之前的字符

> ID：12042170
> 
> 赞同：3
> 
> 时间：2012-08-20T17:24:55.333
> 
> 标签：php

> **可能重复：**
> [php字符串函数在最后一次出现字符之前获取子字符串](https://stackoverflow.com/questions/5939412/php-string-function-to-get-substring-before-the-last-occurrence-of-a-character)

我有这样的价值`$number= 01-01-02-001000`。

您能告诉我如何将`01-01-02`变量中的部分从 中分离出来`$number`吗？

我想要实现的输出是`01-01-02`

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T17:26:40.527

您需要`-`使用[strrpos()](http://php.net/manual/en/function.strrpos.php)查找最后一次出现的。

```
$output = substr( $number, 0, strrpos( $number, '-' ) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:26:43.077

```
$part = substr($number,0,strrpos($number,"-")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T17:26:57.147

使用[strrpos](http://php.net/strrpos)查找`-`. 然后使用[substr](http://php.net/substr)让一切都达到这一点。

```
$lastPart = substr($number, 0, strrpos($number, '-')); 
```

# ruby-on-rails - *** 检测到 glibc *** /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/bin/ruby：损坏的双链表：0xb5a40260 ***

> ID：12042172
> 
> 赞同：3
> 
> 时间：2012-08-20T17:25:03.823
> 
> 标签：ruby-on-rails, glibc

9.2和rails 3.0.1，我经常遇到错误，我不知道从哪里开始调试。错误之后rails服务器死了。提前感谢任何可以帮助我的人。这是堆栈跟踪：

```
*** glibc detected *** /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/bin/ruby: corrupted double-linked list: 0xb5a40260 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x73e42)[0xb742fe42]
/lib/i386-linux-gnu/libc.so.6(+0x741b8)[0xb74301b8]
/lib/i386-linux-gnu/libc.so.6(+0x74a9d)[0xb7430a9d]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(ruby_xfree+0x1f)[0xb75e1d9f]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x12c3bf)[0xb76a13bf]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x6b4ed)[0xb75e04ed]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_gc_finalize_deferred+0x39)[0xb75e41c9]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x17c611)[0xb76f1611]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x1716c9)[0xb76e66c9]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x167f10)[0xb76dcf10]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16d4d0)[0xb76e24d0]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16ea5a)[0xb76e3a5a]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16f203)[0xb76e4203]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x1713bf)[0xb76e63bf]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x167f10)[0xb76dcf10]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16d4d0)[0xb76e24d0]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_vm_invoke_proc+0xf9)[0xb76e34c9]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x17ced9)[0xb76f1ed9]
/home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x17cfe7)[0xb76f1fe7]
/lib/i386-linux-gnu/libpthread.so.0(+0x6d4c)[0xb73a6d4c]
/lib/i386-linux-gnu/libc.so.6(clone+0x5e)[0xb74a6ace]
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:01 2888317    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
08049000-0804a000 r--p 00000000 08:01 2888317    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
0804a000-0804b000 rw-p 00001000 08:01 2888317    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
0918c000-0bc24000 rw-p 00000000 00:00 0          [heap]
b4100000-b4231000 rw-p 00000000 00:00 0 
b4231000-b4300000 ---p 00000000 00:00 0 
b4300000-b4400000 rw-p 00000000 00:00 0 
b4486000-b4800000 rw-p 00000000 00:00 0 
b4800000-b4a00000 rw-p 00000000 00:00 0 
b4a00000-b4c00000 rw-p 00000000 00:00 0 
b4c00000-b4e00000 rw-p 00000000 00:00 0 
b4e00000-b4e21000 rw-p 00000000 00:00 0 
b4e21000-b4f00000 ---p 00000000 00:00 0 
b4f7f000-b4f80000 ---p 00000000 00:00 0 
b4f80000-b5000000 rw-p 00000000 00:00 0 
b5000000-b5021000 rw-p 00000000 00:00 0 
b5021000-b5100000 ---p 00000000 00:00 0 
b517d000-b51fe000 rw-p 00000000 00:00 0 
b51fe000-b51ff000 ---p 00000000 00:00 0 
b51ff000-b5300000 rw-p 00000000 00:00 0 
b5300000-b5321000 rw-p 00000000 00:00 0 
b5321000-b5400000 ---p 00000000 00:00 0 
b547f000-b5480000 ---p 00000000 00:00 0 
b5480000-b5500000 rw-p 00000000 00:00 0 
b5500000-b5521000 rw-p 00000000 00:00 0 
b5521000-b5600000 ---p 00000000 00:00 0 
b567d000-b56fe000 rw-p 00000000 00:00 0 
b56fe000-b56ff000 ---p 00000000 00:00 0 
b56ff000-b5800000 rw-p 00000000 00:00 0 
b5800000-b5821000 rw-p 00000000 00:00 0 
b5821000-b5900000 ---p 00000000 00:00 0 
b597f000-b5980000 ---p 00000000 00:00 0 
b5980000-b5a00000 rw-p 00000000 00:00 0 
b5a00000-b5af3000 rw-p 00000000 00:00 0 
b5af3000-b5b00000 ---p 00000000 00:00 0 
b5b63000-b5b77000 r-xp 00000000 08:01 4327144    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/trans/single_byte.so
b5b77000-b5b7a000 r--p 00013000 08:01 4327144    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/trans/single_byte.so
b5b7a000-b5b7b000 rw-p 00016000 08:01 4327144    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/trans/single_byte.so
b5b7b000-b5bfc000 rw-p 00000000 00:00 0 
b5bfc000-b5bfd000 ---p 00000000 00:00 0 
b5bfd000-b5cfe000 rw-p 00000000 00:00 0 
b5cfe000-b5cff000 ---p 00000000 00:00 0 
b5cff000-b5e00000 rw-p 00000000 00:00 0 
b5e00000-b5f00000 rw-p 00000000 00:00 0 
b5f00000-b5f28000 r-xp 00000000 08:01 7079939    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/libxml-ruby-2.3.3/lib/libxml_ruby.so
b5f28000-b5f29000 r--p 00027000 08:01 7079939    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/libxml-ruby-2.3.3/lib/libxml_ruby.so
b5f29000-b5f2a000 rw-p 00028000 08:01 7079939    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/libxml-ruby-2.3.3/lib/libxml_ruby.so
b5f2a000-b5f2b000 ---p 00000000 00:00 0 
b5f2b000-b672b000 rw-p 00000000 00:00 0 
b672b000-b67ad000 r-xp 00000000 08:01 19665143   /lib/i386-linux-gnu/libgcrypt.so.11.7.0
b67ad000-b67ae000 r--p 00081000 08:01 19665143   /lib/i386-linux-gnu/libgcrypt.so.11.7.0
b67ae000-b67b0000 rw-p 00082000 08:01 19665143   /lib/i386-linux-gnu/libgcrypt.so.11.7.0
b67b0000-b68f7000 r-xp 00000000 08:01 10225514   /usr/lib/i386-linux-gnu/libxml2.so.2.7.8
b68f7000-b68fb000 r--p 00147000 08:01 10225514   /usr/lib/i386-linux-gnu/libxml2.so.2.7.8
b68fb000-b68fc000 rw-p 0014b000 08:01 10225514   /usr/lib/i386-linux-gnu/libxml2.so.2.7.8
b68fc000-b68fd000 rw-p 00000000 00:00 0 
b68fd000-b6937000 r-xp 00000000 08:01 10225519   /usr/lib/i386-linux-gnu/libxslt.so.1.1.26
b6937000-b6938000 r--p 00039000 08:01 10225519   /usr/lib/i386-linux-gnu/libxslt.so.1.1.26
b6938000-b6939000 rw-p 0003a000 08:01 10225519   /usr/lib/i386-linux-gnu/libxslt.so.1.1.26
b6939000-b694c000 r-xp 00000000 08:01 10225520   /usr/lib/i386-linux-gnu/libexslt.so.0.8.15
b694c000-b694d000 r--p 00012000 08:01 10225520   /usr/lib/i386-linux-gnu/libexslt.so.0.8.15
b694d000-b694e000 rw-p 00013000 08:01 10225520   /usr/lib/i386-linux-gnu/libexslt.so.0.8.15
b6962000-b697b000 r-xp 00000000 08:01 6554470    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/nokogiri-1.5.5/lib/nokogiri/nokogiri.so
b697b000-b697c000 r--p 00018000 08:01 6554470    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/nokogiri-1.5.5/lib/nokogiri/nokogiri.so
b697c000-b697d000 rw-p 00019000 08:01 6554470    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/nokogiri-1.5.5/lib/nokogiri/nokogiri.so
b697d000-b6999000 r-xp 00000000 08:01 19661748   /lib/i386-linux-gnu/libgcc_s.so.1
b6999000-b699a000 r--p 0001b000 08:01 19661748   /lib/i386-linux-gnu/libgcc_s.so.1
b699a000-b699b000 rw-p 0001c000 08:01 19661748   /lib/i386-linux-gnu/libgcc_s.so.1
b699b000-b6c38000 r-xp 00000000 08:01 10227962   /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0
b6c38000-b6c3b000 r--p 0029d000 08:01 10227962   /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0
b6c3b000-b6cb1000 rw-p 002a0000 08:01 10227962   /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0
b6cb1000-b6cb4000 rw-p 00000000 00:00 0 
b6cb4000-b6cb7000 r-xp 00000000 08:01 19661754   /lib/i386-linux-gnu/libgpg-error.so.0.8.0
b6cb7000-b6cb8000 r--p 00002000 08:01 19661754   /lib/i386-linux-gnu/libgpg-error.so.0.8.0
b6cb8000-b6cb9000 rw-p 00003000 08:01 19661754   /lib/i386-linux-gnu/libgpg-error.so.0.8.0
b6cb9000-b6cbf000 r-xp 00000000 08:01 6950172    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so
b6cbf000-b6cc0000 r--p 00005000 08:01 6950172    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so
b6cc0000-b6cc2000 rw-p 00006000 08:01 6950172    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so
b6cc2000-b6cc6000 r-xp 00000000 08:01 4985635    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/racc/cparse.so
b6cc6000-b6cc7000 r--p 00003000 08:01 4985635    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/racc/cparse.so
b6cc7000-b6cc8000 rw-p 00004000 08:01 4985635    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/racc/cparse.so
b6cc8000-b6cdf000 r-xp 00000000 08:01 6687324    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/mysql-2.8.1/lib/mysql_api.so
b6cdf000-b6ce0000 r--p 00016000 08:01 6687324    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/mysql-2.8.1/lib/mysql_api.so
b6ce0000-b6ce1000 rw-p 00017000 08:01 6687324    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/mysql-2.8.1/lib/mysql_api.so
b6ce1000-b6d07000 r-xp 00000000 08:01 3412490    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/socket.so
b6d07000-b6d08000 r--p 00025000 08:01 3412490    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/socket.so
b6d08000-b6d09000 rw-p 00026000 08:01 3412490    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/socket.so
b6d09000-b6d58000 r-xp 00000000 08:01 19666850   /lib/i386-linux-gnu/libssl.so.1.0.0
b6d58000-b6d59000 ---p 0004f000 08:01 19666850   /lib/i386-linux-gnu/libssl.so.1.0.0
b6d59000-b6d5b000 r--p 0004f000 08:01 19666850   /lib/i386-linux-gnu/libssl.so.1.0.0
b6d5b000-b6d5f000 rw-p 00051000 08:01 19666850   /lib/i386-linux-gnu/libssl.so.1.0.0
b6d5f000-b6dab000 r-xp 00000000 08:01 3412485    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/openssl.so
b6dab000-b6dac000 r--p 0004c000 08:01 3412485    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/openssl.so
b6dac000-b6dad000 rw-p 0004d000 08:01 3412485    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/openssl.so
b6dad000-b6dae000 rw-p 00000000 00:00 0 
b6dae000-b6e50000 r-xp 00000000 08:01 10223874   /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6
b6e50000-b6e51000 r--p 000a2000 08:01 10223874   /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6
b6e51000-b6e52000 rw-p 000a3000 08:01 10223874   /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6
b6e52000-b6e53000 rw-p 00000000 00:00 0 
b6e57000-b6e62000 r-xp 00000000 08:01 19661778   /lib/i386-linux-gnu/libnss_files-2.15.so
b6e62000-b6e63000 r--p 0000a000 08:01 19661778   /lib/i386-linux-gnu/libnss_files-2.15.so
b6e63000-b6e64000 rw-p 0000b000 08:01 19661778   /lib/i386-linux-gnu/libnss_files-2.15.so
b6e64000-b6e65000 r-xp 00000000 08:01 3412468    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/fcntl.so
b6e65000-b6e66000 r--p 00000000 08:01 3412468    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/fcntl.so
b6e66000-b6e67000 rw-p 00001000 08:01 3412468    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/fcntl.so
b6e67000-b6e6f000 r-xp 00000000 08:01 6688020    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
b6e6f000-b6e70000 r--p 00007000 08:01 6688020    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
b6e70000-b6e71000 rw-p 00008000 08:01 6688020    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so
b6e71000-b6e78000 r-xp 00000000 08:01 7345360    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/json-1.7.4/lib/json/ext/generator.so
b6e78000-b6e79000 r--p 00007000 08:01 7345360    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/json-1.7.4/lib/json/ext/generator.so
b6e79000-b6e7a000 rw-p 00008000 08:01 7345360    /home/tsvetelina/.rvm/gems/ruby-1.9.2-p290/gems/json-1.7.4/lib/json/ext/generator.so
b6e7a000-b6e7b000 r-xp 00000000 08:01 4199329    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_32le.so
b6e7b000-b6e7c000 r--p 00000000 08:01 4199329    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_32le.so
b6e7c000-b6e7d000 rw-p 00001000 08:01 4199329    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_32le.so
b6e7d000-b6e7e000 r-xp 00000000 08:01 4199333    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_32be.so
b6e7e000-b6e7f000 r--p 00000000 08:01 4199333    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_32be.so
b6e7f000-b6e80000 rw-p 00001000 08:01 4199333    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_32be.so
b6e80000-b6e81000 r-xp 00000000 08:01 4199360    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_16le.so
b6e81000-b6e82000 r--p 00000000 08:01 4199360    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_16le.so
b6e82000-b6e83000 rw-p 00001000 08:01 4199360    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_16le.so
b6e83000-b6e84000 r-xp 00000000 08:01 4199354    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_16be.so
b6e84000-b6e85000 r--p 00000000 08:01 4199354    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_16be.so
b6e85000-b6e86000 rw-p 00001000 08:01 4199354    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/enc/utf_16be.so
b6e86000-b6e94000 r-xp 00000000 08:01 3412474    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/bigdecimal.so
b6e94000-b6e95000 r--p 0000d000 08:01 3412474    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/bigdecimal.so
b6e95000-b6e96000 rw-p 0000e000 08:01 3412474    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/bigdecimal.so
b6e96000-b6ea3000 r-xp 00000000 08:01 3412478    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/zlib.so
b6ea3000-b6ea4000 r--p 0000c000 08:01 3412478    /home/tsvetelina/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/i686-linux/zlib.soAborted (core dumped) 
```

更新：现在错误也发生在 dev 上。在应用程序中有图像缓存。错误导致一种方法：

```
def f_respond_to (merge_result,fieldable)
  respond_to do |format|
        format.html
  format.png do
            i = ImageCaching.new
            updated_at = get_updated_at(fieldable)
            att = i.find_or_destroy_by_uri(request.path,updated_at)
            if(att == nil)
                att = create_new_image(i, merge_result)
            end
            render :text=>i.read(att.uri), :content_type=>att.content_type
  end
  format.pdf do
            redirect_to download_pdf_path(:key=>fieldable.key)
  end
    end
end 
```

# c++ - 套接字c ++中的数据包排序

> ID：12042174
> 
> 赞同：1
> 
> 时间：2012-08-20T17:25:19.223
> 
> 标签：c++, sockets, tcp

我正在为客户端和服务器编写一个 c++ 套接字程序，我应该将数据包保持在特定的顺序，还是保持与发送时相同的顺序？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:29:37.663

TCP 套接字抽象为您提供了双向***可靠的字节流***，因此数据将按照您发送的顺序到达。但需要注意的是，TCP 不知道您的***应用程序级消息边界***- 您必须确保您知道如何在接收端检测和缓冲部分消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:27:30.470

如果您使用 TCP，则数据包排序由它处理。这意味着如果您打开一个套接字并发送 A、B 和 C，那么另一端将接收 A、B 和 C。

另一方面，如果您使用的是 UDP，则没有这样的保证。

# jboss - JBoss AS 6&7 - 需要在 java 应用程序中自动化操作

> ID：12042178
> 
> 赞同：1
> 
> 时间：2012-08-20T17:25:41.840
> 
> 标签：jboss, jboss6.x

我需要能够从 java 应用程序控制 JBoss 操作。在过去的几个小时里，我一直在阅读这件事，似乎 AS6 和 AS7 在这方面存在重大差异。

据我了解，如果我错了，请纠正我，在 AS6 中使用了 Twiddle 工具，在 AS7 中使用 CLI 来通过命令行自动执行操作

我想知道：

1.  有没有办法编写支持这两个版本的 Java 应用程序？

2.  如果我为使用 AS6 和 AS7 编写不同的应用程序，Twiddle 和 CLI 是否允许以下​​操作：

    *   查询服务器配置

    *   部署/启动/停止应用程序

    *   部署数据源

    *   启动/停止服务器

    *   检查应用程序列表

    *   获取应用状态

    *   部署 JMS 资源

    *   添加/删除用户

如果您可以向我推荐好的教程/示例，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:00:44.090

我每天在管理 Java EE 工作中使用这种工具 :)

[它是 BuildProcess](http://sourceforge.net/projects/buildprocess/)，它变成了一个名为[Apache Karaf](http://karaf.apache.org/)的 apache 项目，并且完全可以在这里完成所有您所理解的工作。

有了这个，我可以管理 JBoss / WebLogic / WebSphere for EAR / WAR / JAR 上的部署；实际上没有限制；你甚至可以管理配置文件等的部署……；你可以用它做任何事情。

我用它管理 140 个客户环境。

希望这会有所帮助。

# asp.net-mvc - 通过 JQuery 发布时，Web API 控制器中的 ModelState 为空

> ID：12042180
> 
> 赞同：0
> 
> 时间：2012-08-20T17:25:42.187
> 
> 标签：asp.net-mvc, asp.net-web-api, modelstate

**更新**

经过更多测试后，我发现以下相同的代码在发布到常规控制器时可以正常工作。在这种情况下，ModelState 具有值。发布到**APIController**时问题仍然存在。

我通过 JQuery 发布到 Web API 控制器以更新数据。更新方法有效，但 ModelState 始终为空且 ModelState.IsValid 始终为 true。（我想使用 ModelState 来执行模型属性的服务器端验证）

在我看来，我正在使用 JQuery 发布新的对象值：

```
@model MyProject.mvc.ViewModels.ReportsViewModel

using (Html.BeginForm(null, null, FormMethod.Post, new { id = "myForm" }))
{
   @Html.EditorFor(model => model.Report)

   <button type="submit" onclick="UpdateObject(); return false;">Update</button>
}

<script type="text/javascript">

function UpdateObject() {

    var updatedReport = {
        ID: $("#ID").val(),
        Name: $("#Name").val()
    };

    $.ajax({
        url: "/api/reports/PutReport",
        data: JSON.stringify(updatedReport),
        type: "PUT",
        contentType: "application/json;charset=utf-8"
    });

    return false;
}
</script> 
```

并调用我的 Web API 方法来执行更新操作：

```
public HttpResponseMessage PutReport(报告报告)
{
    // 报告对象在此处正确填充

    // ModelState 没有值，IsValid 始终为真

    如果（模型状态。IsValid）
    {
        // 更新对象
    }
}

```

这是发布到 Web API 方法的正确方法吗？是否需要另一个步骤来填充 ModelState？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:55:22.850

尝试将您的 ajax 调用更改为如下所示：

```
$.ajax({
        url: "/api/reports/PutReport",
        data: { report: JSON.stringify(updatedReport) },
        type: "PUT",
        contentType: "application/json;charset=utf-8"
    }); 
```

模型状态的出现与您没有正确发布数据一样有效（这是我的假设）。希望正确命名数据可以解决这个问题。

# java - 如何将 String[] 参数设置为本机查询？

> ID：12042181
> 
> 赞同：10
> 
> 时间：2012-08-20T17:25:41.920
> 
> 标签：java, postgresql, eclipselink, jpql

这是我的 PostgreSQL 函数：

```
salvarArquivoGeometricoCasoZeroPOINT
(dimensao text,tableName text,tuplas text[],srid text) 
```

它有一个`text[]`参数，我想`String[]`从我的 JPQL 向它传递一个 Java：

```
public String salvarGeometriaCaso0(String[] tuplas,FileDto arquivo){
        Query query =
        em().createNativeQuery("select 
salvarArquivoGeometricoCasoZeroPOINT(?1,?2,?3,?4)");
        query.setParameter(1,arquivo.getGeo());//String
        query.setParameter(2,arquivo.getTable());/String
        query.setParameter(3,tuplas);//String[]
        query.setParameter(4,arquivo.getSrid());//String
        return (String) query.getSingleResult();//function returns a Text, so cast to String
} 
```

上面的代码失败，但有以下异常：

```
ERROR] Internal Exception: org.postgresql.util.PSQLException: Can not infer a SQL
type to use for an instance of [Ljava.lang.String;. 
Use setObject () with an explicit Types value to specify the type to use. 
```

所以我不确定如何从 EclipseLink 调用我的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-09-06T20:15:43.567

我很晚才回答。

这个解决方案是一种使用 postgreSQL 内置函数的解决方法，它肯定对我有用。

[参考博客](https://issue-and-solution.blogspot.de/2016/09/how-to-pass-string-to-postgresql-using.html)

**1) 将字符串数组转换为逗号分隔的字符串**

如果您使用的是 Java8，这很容易。其他选项在[这里](https://stackoverflow.com/questions/6622974/convert-string-to-comma-separated-string-in-java)

```
String commaSeparatedString = String.join(",",stringArray); // Java8 feature 
```

**2) PostgreSQL 内建函数 string_to_array()**

[你可以在这里](https://www.postgresql.org/docs/9.5/static/functions-array.html)找到其他 postgreSQL 数组函数

```
// tableName ( name text, string_array_column_name text[] )

String query = "insert into tableName(name,string_array_column_name ) values(?, string_to_array(?,',') )";

int[] types = new int[] { Types.VARCHAR, Types.VARCHAR};

Object[] psParams = new Object[] {"Dhruvil Thaker",commaSeparatedString };

jdbcTemplate.batchUpdate(query, psParams ,types); // assuming you have jdbctemplate instance 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T02:17:20.013

通过传递 String[] 类型的 Java 数组来进行测试，以`PreparedStatement.setObject(...)`产生您报告的行为。PgJDBC 似乎不接受 Java 数组作为参数`PreparedStatement.setObject()`，无论有无`Types.ARRAY`参数。

## 遵守

JDBC 规范*16.5 "Array Objects"*建议 JDBC`Array`部分存在，因此客户端不必将大数组复制到内存中，它们可以通过引用来使用。我不太确定 JDBC 驱动程序是否需要接受原始 Java 数组作为参数。所有规范代码都引用`java.sql.Array`并且规范清楚地表明数组是通过`Array`附录 B 和其他地方的接口映射的。在快速搜索/阅读中，除了作为参数或将它们作为结果返回之外，我*没有*提到传递原始 Java 数组。`byte[]`

但是，在 §16.5.4 中，JDBC4.2 草案规范如下：

```
A Java array may be passed as an input parameter by calling the method
PreparedSatement.setObject. 
```

尽管那里的所有其余代码都引用了`Array`对象。它们是指`Array`“Java 数组”吗？还是他们的意思是原始的原生 Java 数组`String[]`？

在我看来，客户端应该通过 使用`java.sql.Array`接口`Connection.createArrayOf(...)`，所以 EclipseLink 可能做错了。

## 怎么办

尝试将 EclipseLink 更新到 2.4，希望它使用[通过 java.sql.Array 对象将数组传递给 JDBC 的常用方法](http://docs.oracle.com/javase/tutorial/jdbc/basics/array.html)。

您可能还需要使用[`@Array`](http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_array.htm)EclipseLink 扩展来注释映射。另请参阅[此论坛主题 re 2.3](http://www.eclipse.org/forums/index.php/t/245069/)和[错误 361701](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361701)。

看来您可能必须为 EclipseLink 实现自己的类型处理程序才能覆盖其行为。要通过 PgJDBC 正确设置数组参数，您必须使用：

```
 Array sqlArray = conn.createArrayOf("text", strArray);
    pstmt.setArray(1, sqlArray);
    pstmt.executeUpdate(); 
```

... 其中`conn`and`pstmt`分别是 a`java.sql.Connection`和 a `PreparedStatement`，and`strArray`是一个`String[]`实例。

请参阅[eclipselink wiki 中的自定义数据类型](http://wiki.eclipse.org/Customizing_the_EclipseLink_Application_%28ELUG%29#Creating_Custom_Data_Types)。

在旁注中，使用字符串类型名称来指定数组的数据类型`createArrayOf`似乎有点疯狂，因为`java.sql.Types`. 它使便携性变得更加困难；上面的代码不会在（比如说）Oracle 上运行，因为 Oracle 不想`VARCHAR`作为`text`类型名称。

* * *

注意：单元测试`org/postgresql/test/jdbc2/ArrayTest.java`有`ArrayTest.testSetArray()`，在第 166 行测试：

```
 pstmt.setObject(1, arr);
    pstmt.executeUpdate(); 
```

...但是类型`arr`是`java.sql.Array`，不是`int[]`。它是 JDBC 数组类型，而不是常规的 Java 数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T18:59:42.973

似乎 EclipseLink 没有修复 @Craig Ringer 提到的[错误 361701 。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361701)

将 String[] 作为参数传递的唯一方法是使用没有 EclipseLink 的 JDBC。检查代码。

```
Connection con = ConnectionHelper.getConnection();
        Array tArray = con.createArrayOf("text", tuplas);
        PreparedStatement pstm =
        con.prepareStatement("select salvarArquivoGeometricoCasoZeroPOINT(?,?,?,?)");
        pstm.setString(1,arquivo.getGeoType());
        pstm.setString(2,arquivo.getTable());
        pstm.setArray(3,tArray);
        pstm.setString(4,arquivo.getSrid());
        rs = pstm.executeQuery(); 
```

ConnectionHelper 这是我的 java.sql.Connection 类。

感谢你们的帮助：@Craig Ringer 和 @Matt Ball，谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-11T14:59:06.673

`jdbcTemplate.update`我在不小心使用而不是时遇到了这个错误`jdbcTemplate.batchUpdate`

# apache - htaccess 一个域到另一个域中的特定位置

> ID：12042182
> 
> 赞同：1
> 
> 时间：2012-08-20T17:25:46.117
> 
> 标签：apache, .htaccess, apache2

我想将所有对 two.dev 的请求重定向到 one.dev/node/10，但仍然有 url 读取“two.dev”或至少“two.dev/node/10”。我尝试了以下方法，但出现重定向循环错误。

```
<VirtualHost *:80>
  ServerName two.dev
  ServerAlias *.two.dev
  DocumentRoot /home/websites/one.dev
  Redirect permanent / /node/10/
  <Directory /home/websites/one.dev>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
  </Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:51:41.953

我假设两个域共享相同的文档根目录，因为您的文档根目录位于`/home/websites/one.dev`. 您应该删除该`Redirect`指令，因为它会重定向浏览器并将更改地址栏中的 URL。用这个替换它：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/node/10
RewriteRule ^/(.*)$ /node/10/$1 [L] 
```

# python - django静态文件不起作用

> ID：12042202
> 
> 赞同：14
> 
> 时间：2012-08-20T17:26:58.783
> 
> 标签：python, django

出于某种原因，django 没有提供我的静态文件。

我已经查看了很多解决此问题的方法，但我仍然没有找到解决方案。

这是我的配置：

网址.py

```
urlpatterns = patterns('',
    (r'^$', index),
    (r'^ajax/$', ajax),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': path.join(path.dirname(__file__), 'static')}),
) 
```

设置.py

```
STATIC_ROOT = '/home/aurora/Code/django/test/static/'
STATIC_URL = '/static/'
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
) 
```

当我导航到`http://localhost:8000/static/css/default.css`
我得到这个错误：`'css/default.css' could not be found`

当我导航到`http://localhost:8000/static/`
我得到这个错误：`Directory indexes are not allowed here.`

看起来静态目录正在映射，但子目录没有。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-03-16T22:01:45.827

**开发中：**

*   `STATICFILES_DIRS`应该有所有静态文件所在的所有静态目录

*   `STATIC_URL`应该是`/static/`如果您的文件在本地计算机中，否则将基本 URL 放在这里，例如“http://example.com/”

*   `INSTALLED_APPS`应包括`'django.contrib.staticfiles'`

在模板中，加载 staticfiles 模块：

```
{% load staticfiles %}
..
..
<img src='{% static "images/test.png" %}' alt='img' /> 
```

**生产中：**

*   添加`STATIC_ROOT`Django 用来收集所有静态文件的`STATICFILES_DIRS`内容

*   收集静态文件

```
python manage.py collectstatic [--noinput] 
```

*   将路径添加到 urls.py

```
from . import settings
    ..
    ..
urlpatterns = patterns('',
..
    url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root':settings.STATIC_ROOT)}),)` 
```

更详细的文章如下：

[http://blog.xjtian.com/post/52685286308/serving-static-files-in-django-more-complicated](http://blog.xjtian.com/post/52685286308/serving-static-files-in-django-more-complicated)

[http://agiliq.com/blog/2013/03/serving-static-files-in-django/](http://agiliq.com/blog/2013/03/serving-static-files-in-django/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T17:47:34.543

尝试运行`python manage.py collectstatic`并查看收集静态文件的位置。

将此添加到您的并`urls.py`设置`DEBUG=True``settings.py`

```
if settings.DEBUG:
    urlpatterns += patterns('',
             (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT, 'show_indexes':True}),
         )

    urlpatterns += patterns('',
            (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes':True}),
        ) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-20T17:34:52.393

我认为您不需要 urls.py 中的静态路径，删除它，它应该可以工作。

目前是这样的

```
urlpatterns = patterns('',
    (r'^$', index),
    (r'^ajax/$', ajax),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': path.join(path.dirname(__file__), 'static')}),
) 
```

只需删除 r'^static 行

```
urlpatterns = patterns('',
    (r'^$', index),
    (r'^ajax/$', ajax),
) 
```

至少这是在 django 1.3 及更高版本中完成的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-21T07:37:05.977

你可以做这样的设置

1.  在 settings.py 里面添加静态目录路径

    ```
     STATICFILES_DIRS = [
         BASE_DIR / "static"
     ] 
    ```

    参考：[https ://docs.djangoproject.com/en/3.1/howto/static-files/](https://docs.djangoproject.com/en/3.1/howto/static-files/)

2.  在 urls.py 中添加一行代码

    ```
     urlpatterns += staticfiles_urlpatterns() 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-08T20:53:42.153

```
STATIC_URL = '/static/' 
STATIC_ROOT = os.path.join(BASE_DIR, "static/") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-18T14:49:16.597

我正在使用以下设置：（2021 年 4 月）

*   macos 大肯定
*   代码
*   Ananconda 3（用于环境）

当我尝试使用`http://localhost:8000/static/test.txt`如果在静态文件夹中存在 test.txt 文件来访问我在 Django 中的静态文件时。

1.  `setting.py`然后在您的主项目文件夹中打开文件
2.  最后把这段代码粘贴进去`settings.py`：

```
STATIC_URL = '/static/'

# Added Manually
STATICFILES_DIRS = [
    BASE_DIR / "static",
] 
```

然后重新启动 VS 代码。

# java - 布局背景吃掉所有内存

> ID：12042206
> 
> 赞同：0
> 
> 时间：2012-08-20T17:27:29.033
> 
> 标签：java, android, memory-leaks, drawable

在我的 Android 应用程序中，我有一个带背景的布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/menu_background"
    android:id="@+id/frame"
    >
... 
```

背景图像是png（ldpi为240x400，mdpi为320x480等...）

**我尝试使用 jpg，但它看起来很糟糕，所以将其切换回 png。**

当我更改方向时，它可以正常工作几次，然后应用程序强制关闭并抛出以下错误：

```
dalvikvm-heap(16260): 148960-byte external allocation too large for this process.
VM won't let us allocate ... bytes

java.lang.RuntimeException: Unable to start activity ComponentInfo... 
```

所以，我想我可以通过取消绑定 onDestroy 方法中的可绘制对象来修复它，对吧？好吧，不...我的 onDestroy 中有以下方法：

```
@Override
    protected void onDestroy() {
        super.onDestroy();

        unbindDrawables(findViewById(R.id.frame));

        Runtime.getRuntime().gc();
    }

    private void unbindDrawables(View view) {
        if(view==null)
            return;
        if (view.getBackground() != null) {
            view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
            try{
                ((ViewGroup) view).removeAllViews();
            }catch(UnsupportedOperationException mayHappen) {
                Log.e("Error:", mayHappen.getMessage());
            }
        }
    } 
```

我怎样才能使这项工作？我已经检查了内存泄漏，但没有...

# c++ - Cplex C++ 内存不足错误

> ID：12042210
> 
> 赞同：0
> 
> 时间：2012-08-20T17:27:53.277
> 
> 标签：c++, memory, cplex

我正在使用 C++ 和 cplex 进行一些优化，尽管有大量可用内存，但我仍然遇到内存不足错误。

我调用了函数

```
cplex.setParam(IloCplex::WorkMem, 7000); 
```

它应该为程序分配足够多的内存，但它似乎永远不会全部使用。我的操作系统是 Windows 7 64 位。我在某处读到 32 位系统限制了 GAMS 可以使用的内存量，所以这应该不是问题。但我确实安装了 32 位版本的 cplex。这可能是问题吗？我还让它运行单线程，因为我听说它节省了内存。

# actionscript-3 - AS3 加载多个 FLV

> ID：12042212
> 
> 赞同：0
> 
> 时间：2012-08-20T17:28:10.563
> 
> 标签：actionscript-3, apache-flex, actionscript, flash-cs5

我没有太多运气找到关于这个主题的一些文档：

```
 var videoTexture = new VideoTexture("test.flv",512,512,true,true);
   var textureMaterial = new TextureMaterial(videoTexture);
   var planeGeom = new PlaneGeometry(200,200,1,1,false);
   var planeMesh = new Mesh(planeGeom,textureMaterial);
   planeMesh.z = -100;
   planeMesh.y = 25;
   textureMaterial.smooth = true;
   textureMaterial.alphaBlending = true;
   _container.addChild(planeMesh);
   videoTexture.player.play(); 
```

我将如何为加载事件创建一个监听器，我所有的通用加载器都不起作用，我尝试了一个网络流监听器，但它不断抛出错误......理想情况下，我不能添加孩子，直到我知道它完成......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:23:27.293

我不知道您要添加哪种类型的侦听器，但如果您的视频类没有从事件调度程序扩展，它将无法工作。

无论如何，away3d 确实有 API 文档。没有任何预构建事件对您有帮助吗？

如果您已经从他们的课程扩展，那么您可以按照我的建议保持目标。

如果您在 VideoTexture 类的不同阶段调度从您自己的 Event 类中创建的事件，那么您可以在需要的地方设置侦听器。例如，在 VideoTexture 类中，假设您在 connect() 方法中调度了一个“CONNECT”事件。然后，您可以在您正在学习的课程中收听该特定事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:26:40.337

如果您创建自己的事件，您可以更轻松地设置和侦听触发点。只需扩展 Event 类并创建自己的。

# java - 您可以在正则表达式的匹配末尾追加（添加）空格和/或连字符吗？

> ID：12042217
> 
> 赞同：0
> 
> 时间：2012-08-20T17:28:27.303
> 
> 标签：java, string-formatting

就像问题听起来一样，我想知道您是否可以在所有匹配或某些匹配的末尾附加或添加空格字符

我有正则表达式代码

```
${Brand Name}${Colour}${Product Description}${ID} 
```

它吐出什么

```
Facille SnapBlackTablestop Snapkin Dispenser and Pack of Snapkins4696400

Brand Name:          Facille Snap
Colour:              Black
Product Description: Tablestop Snapkin Dispenser and Pack of Snapkins
ID:                  4696400 
```

我希望正则表达式返回这样的可用文本行

```
Facille Snap - Black Tablestop Snapkin Dispenser and Pack of Snapkins - 4696400 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:40:51.533

这些对我来说看起来不像正则表达式。

根据评论，您可能想要使用它：

`${Brand Name} ${Colour} ${Product Description} - ${ID}`

除此之外，您可以像这样拆分*CamelCase*文本：

```
System.out.println(camelSplit("ThisIsAFunkyCamelString"));

/** Returns a copy of s with a space in front of each capital letter. */

public String camelSplit(String s) {
    if (s == null || s.length < 2) {
        return s;
    }
    return s.substring(0, 1) + s.substring(1).replaceAll("([A-Z])", " $1");
} 
```

注意：上述方法假定应在每个大写字母前添加一个空格。如果您希望它处理诸如`USA`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:57:13.997

将您的格式模式更改为：

```
${Brand Name} ${Colour} ${Product Description} - ${ID} 
```

# eclipse - 如何将标签从 Eclipse 推送到 GitHub？

> ID：12042220
> 
> 赞同：9
> 
> 时间：2012-08-20T17:28:39.083
> 
> 标签：eclipse, git, github, repository, github-api

这是我将标签推送到 GitHub 远程存储库所遵循的步骤。但无法在其他用户的日食上获得标签。（我已成功上传我的存储库并能够提交更改。）

1.  在 Eclipse Package Explorer 中右键单击**Repository 。**
2.  转到**团队 -> 高级 -> 标记**
3.  填写所有详细信息并单击**OK**。这将在我的本地系统中标记。
4.  现在，在 Eclipse 中再次右键单击**Repository 。**
5.  转到**Team -> Show in Repository View**。将出现 Git 存储库窗口。
6.  在其中选择**Tag**并单击**Push Tag**。
7.  输入所有详细信息。我能够在没有任何错误的情况下获得消息窗口。但仍然无法在其他用户的 PC 上获得标记版本。

我还缺少什么？我在 GitHub 上看到了命令提示符版本的帮助。但不想使用它......我只想用 UI 来制作它......

谁能帮帮我....提前谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T22:14:59.073

这是我的设置来模拟你所拥有的。

1.  安装了 Egit 的 OSX 上的 Eclipse Indigo SR2 实例（来自**[此处](http://wiki.eclipse.org/EGit/FAQ#Where_can_I_find_older_releases_of_EGit.3F)**）。这是我将根据您的步骤创建标签的“源”机器。

    1.1 在上面使用**[这个](http://www.vogella.com/articles/EGit/article.html#github)**设置 GITHUB 。

2.  在虚拟机内运行的 Ubuntu 上的 Eclipse Indigo SR2 实例。这是“其他客户端”，一旦标签被推送到 GITHUB，它将尝试获取标签。

我会带着我从这次经历中学到的东西回来。

**更新**

因此，我按照您的步骤在一个 Eclipse 上推送标签，然后从另一个 Eclipse 实例中拉取它。我能够成功地做到这一点。

我创建了一个截屏视频来展示我所做的事情。**[在这里](http://www.youtube.com/watch?v=q6E9alq-5ls)**观看，让我知道它是否让您知道您可能会做哪些不同的事情？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T13:19:23.593

注意：使用[EGit 3.2](https://wiki.eclipse.org/EGit/New_and_Noteworthy/3.2#Features)（2013 年 12 月），您现在可以推送特定标签（代替*所有*标签）。

> 推送标签向导简化了推送一个或多个标签

![https://wiki.eclipse.org/images/0/03/Egit-3.2-PushTagWizard.png](../Images/c3c2ef0ad0ea5a56a211274a1b8e1cbf.png)

# javascript - 使用 d3.js 在 x 轴上显示相对时间

> ID：12042222
> 
> 赞同：2
> 
> 时间：2012-08-20T17:28:45.837
> 
> 标签：javascript, d3.js, nvd3.js

我正在尝试使用 nvd3.js 显示一段时间内的评分（近乎实时；数据每 3 分钟更新一次）。现在数据似乎显示正确，除了 x 轴显示的纪元时间不太可读。如何让 x 轴显示“x 分钟前”而不是纪元时间？

这是我正在使用的代码：

```
nv.addGraph(function() {
  var chart = nv.models.lineChart();

  chart.xAxis
      .axisLabel('Time')
      .tickFormat(d3.format('r'));

  chart.yAxis
      .axisLabel('Rating')
      .tickFormat(d3.format('.2f'));

  d3.select('#chart svg')
      .datum(data())
    .transition().duration(500)
      .call(chart);

  nv.utils.windowResize(chart.update);

  return chart;
});

function data() {
  var data = [ { x: 1345457533, y: -0.0126262626263 },
               { x: 1345457409, y: 0.0224089635854 },
               { x: 1345457288, y: 0.0270935960591 },
               { x: 1345457168, y: -0.0378151260504 },
               { x: 1345457046, y: -0.115789473684 } ]

  return [
    {
      values: data,
      key: "Sample1",
      color: "#232066"
    }
  ];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T20:34:01.730

对使用例如[moment.js](http://momentjs.com/)的标签使用自定义格式函数。类似的东西

```
function myFormat(d) {
  return moment(d * 1000).fromNow();
} 
```

# java - Java servlet - 从 HTML 中检索文本和值选择多个

> ID：12042223
> 
> 赞同：2
> 
> 时间：2012-08-20T17:29:11.587
> 
> 标签：java, jsp, servlets

我的 JSP 页面中有一个 HTML 选择框，它允许进行多项选择。

```
<form action="resources" method="post" >
    <select name="frmSelectedResources" multiple="multiple">
        <option value="1">Bill</option>
        <option value="3">Kathy</option>
        <option value="18">Mike</option>
    </select>
</form> 
```

在我的 Java servlet 中，我可以通过以下方式获取所选资源的值：

```
String[] assignedResources = request.getParameterValues("frmSelectedResources"); 
```

这给了我一个 1,3,18 的字符串数组。但是我怎样才能检索每个这些值的文本呢？

我需要找回这样的东西：（1，Bill），（3，Kathy），（18，Mike）

我正在尝试做的是在我进行表单验证并且用户在表单的其他地方输入数据错误时重建选定资源列表。

提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T05:15:08.090

创建一些字符分隔键，同时填充 SELECT 选项。

```
<form action="resources" method="post" >
    <select name="frmSelectedResources" multiple="multiple">
        <option value="1:Bill">Bill</option>
        <option value="3:Kathy">Kathy</option>
        <option value="18:Mike">Mike</option>
    </select>
</form> 
```

使用它

```
String[] assignedResources = request.getParameterValues("frmSelectedResources");
if (assignedResources != null) {
    for(String item: assignedResources){
        String keyValue[]= item.split(":");
        out.println("Key: " + keyValue[0]);
        out.println("Value: " + keyValue[1]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:30:38.453

您无法从请求参数接收它（除非您明确设置它），浏览器只发送选择项的值而不是标签，它使用标签只是为了显示

有一个从收到的值解析标签的地图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:30:29.277

你只会得到价值。如果你想要文本，其中一种方法可能是将值更改为类似的东西`"1-Bill"`，然后在 servlet 中解析它。

# iphone - 偶尔的“非法尝试在不同上下文中的对象之间建立关系'...'”

> ID：12042227
> 
> 赞同：5
> 
> 时间：2012-08-20T17:29:32.697
> 
> 标签：iphone, ipad, core-data, nsmanagedobjectcontext

我们偶尔会收到来自用户的崩溃报告（我们正在使用崩溃报告程序包，将崩溃发送到我们的服务器）并出现以下错误：

“非法尝试在不同上下文中的对象之间建立关系'...'”

（不同的报告可能有不同的关系，并非所有报告都相同）。

这似乎很容易，除了：

1.  我们的代码中只有一个 NSManagedObject - 来自 App 委托的单例。

2.  除了主线程，我们不使用任何线程。

3.  所有对象都是使用上下文分配的`initWithEntity:insertIntoManagedObjectContext:`（没有一个是通过简单的初始化分配的）。

4.  在我们的测试（数千次运行）中从未发生过错误。

所以基本上我们被困住了。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T17:44:07.030

每当我在主线程中使用 Core Data 时，我都会在任何处理上下文的方法中放置一个 NSAssert，以确保我知道所有事情都在主线程中发生。像这样的东西：

```
NSAssert([NSThread isMainThread], @"This method is not in the main thread"); 
```

尝试使用它来双重/三重/四重检查事情是否在您认为的地方发生。

# matlab - 在 matlab-simulink/stateflow 中调用 C 函数

> ID：12042230
> 
> 赞同：3
> 
> 时间：2012-08-20T17:29:40.957
> 
> 标签：matlab, simulink, stateflow

我在 test.c 中创建了一个 C 函数

```
#include <stdio.h>

int Test()
{
    FILE * fp = fopen("C:\\workspace\\test.txt", "rw");
    fprintf(fp, "test hello world");
    fclose(fp);
    return 10;
} 
```

我在 simulink 的状态流中定义了一个状态。我用了

```
en: Test(); 
```

我在 Tools->Open Simulation Target->Custom Code->Include List of Additional 和 Include Custom C Code in generated（使用绝对路径和文件名）中指定了文件当我尝试运行模型时，出现解析器错误： zh: 测试(); ^ 名为“Test”的函数不是 Stateflow 函数。

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:36:11.417

我自己搞定的。在“生成的包含自定义 C 代码：”-> 头文件选项卡中，我应该将我的头文件指定为

```
#include "test.h" 
```

代替

```
test.h 
```

并且 c 文件应在“包括附加列表”-> 源文件中指定为

```
test.c 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T16:45:47.920

添加对将自定义 C 代码添加到 Stateflow 的在线示例的引用，这将帮助遇到类似问题的其他用户：http: [//www.mathworks.com/support/solutions/en/data/1-1727V/](http://www.mathworks.com/support/solutions/en/data/1-1727V/)

# .net - 更新 asmx Web 服务并使更改对另一个项目可见

> ID：12042232
> 
> 赞同：0
> 
> 时间：2012-08-20T17:29:45.480
> 
> 标签：.net, web-services, asmx

我正在使用一个具有 asmx 服务的网站，其方法装饰如下：

```
 [WebMethod(Description = "Search Method for items of type Foo.")]
        [XmlInclude(typeof(SearchResults))]
        public SearchResults[] FooSearch(//..... 
```

还有另一个 VS 项目具有对此 asmx 服务的服务引用。它还有一个名为“Reference.cs”的文件，顶部有一个样板语句，说明它是一个自动生成的文件等。它有接口和部分类定义，如下所示：

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.1")]
        [System.SerializableAttribute()]
        [System.Diagnostics.DebuggerStepThroughAttribute()]
        [System.ComponentModel.DesignerCategoryAttribute("code")]
        public partial class MyClass: UserAuthentication { 
```

我现在需要更新 asmx 服务并添加一些新方法。完成后，如何将这些更改传达给其他项目？是删除和重新添加服务引用的问题，还是我需要通过某种 wsdl 编译器运行 asmx 的代码隐藏文件，并将生成的文件添加到项目中？我以前从未这样做过，因此感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:31:43.973

> 是否是删除和重新添加服务引用的问题

这肯定是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:31:58.300

Visual Studio 将为您完成工作。只需删除旧的并在 URL 处指向新的，然后您就完成了。

# json - 如何将 JSON 输出的结果解析为数据框？

> ID：12042233
> 
> 赞同：1
> 
> 时间：2012-08-20T17:29:45.693
> 
> 标签：json, r, dataframe

在尝试分析来自主题标签的推文时，我可以通过此调用一次获得 100 个结果。

```
curl -i "http://otter.topsy.com/search.json?q=esa2012&window=a&perpage=100&offset=0" >> esa2012_0.json 
```

产生这样的文件[（](https://dl.dropbox.com/u/2223411/esa2012_0.json)链接中的 JSON 文件）。

我如何将其读入`R`并将其转换为`data.frame`?

到目前为止，我可以像这样跳过前几行（非 JSON）：

```
library(XML)
library(RJSONIO)
file0 <- scan(file = "~/Desktop/data/esa2012_0.json", skip = 18, what= "raw") 
```

但由此产生的读取变得难以强制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:59:27.270

`fromJSON(file0)`应该这样做。

我通常自己运行它`,simplify=FALSE`并构建 data.frame，而不是试图让它为我简化。

`curl`请注意，如果您使用 RCurl 库，则不需要命令行调用：

```
library(RJSONIO)
library(RCurl)
j <- getURL("http://blah?mine=yours")
fromJSON(j) 
```

# vb.net - 如何使用 VB 在 Microsoft (MS) Word 2007 中格式化域代码？

> ID：12042238
> 
> 赞同：0
> 
> 时间：2012-08-20T17:29:57.593
> 
> 标签：vb.net, ms-word

我正在尝试在 MS word 2007 的句子中间插入一个引用书签的域代码。我希望域代码为粗体和斜体，但未能成功使用 vb 格式化域代码。

这就是我所拥有的，它似乎应该可以工作，但事实并非如此。

```
Private WithEvents wordApp As Word.Application = New Word.Application
Private doc As Word.Document = wordApp.Documents.Add()
Dim bmRange As Word.Range = Nothing
Dim s As Word.Selection = wordApp.Selection

With s
  .Style = "Normal"
  .TypeText("THIS IS THE COURSE TITLE")
  .Collapse(Word.WdCollapseDirection.wdCollapseEnd)
  .StartOf(Word.WdUnits.wdSentence, Word.WdMovementType.wdExtend)
  bmRange = .Range
  .Collapse(Word.WdCollapseDirection.wdCollapseEnd)
  .TypeParagraph()
  .Collapse(Word.WdCollapseDirection.wdCollapseEnd)
End With

doc.Bookmarks.Add("CourseTitle", bmRange) 
```

现在书签设置在文档的顶部。假设我们现在是文档的几页。

```
s = wordApp.Selection
With s
   .Style = "Normal"
   .TypeText("This is the first part of the sentence ")
   With .Range
     .Collapse(Word.WdCollapseDirection.wdCollapseEnd)
     .Fields.Add(s.Range, Word.WdFieldType.wdFieldEmpty, "REF CourseTitle", True)
     .Font.Bold = -1
     .Font.Italic = -1
     .Collapse(Word.WdCollapseDirection.wdCollapseEnd)
     .Font.Bold = 0
     .Font.Italic = 0
   End With
   .TypeText(" this is the rest of the sentence.")
End With 
```

这会将域代码放置在我想要的位置，但不会对其进行格式化。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:56:58.023

从您的第二段代码开始，以下内容可能会执行您想要的操作：

```
Dim f as Word.Field
s = wordApp.Selection
With s
   .Style = "Normal"
   .TypeText("This is the first part of the sentence ")
   With .Range
     .Collapse(Word.WdCollapseDirection.wdCollapseEnd)
     f = .Fields.Add(s.Range, Word.WdFieldType.wdFieldEmpty, "REF CourseTitle", True)
     f.Result.Bold = -1
     f.Result.Italic = -1
     .Collapse(Word.WdCollapseDirection.wdCollapseEnd)
   End With
   .TypeText(" this is the rest of the sentence.")
End With 
```

我可能会在代码中更改其他内容，例如在代码的前面从 Selection 中获取 Range 对象，然后优先使用 Selection 对象。（不是必需的，但在 Word 中是一个很好的做法）。

# select - 选择语句中的 SQL 乘法和舍入

> ID：12042240
> 
> 赞同：1
> 
> 时间：2012-08-20T17:30:12.700
> 
> 标签：select, decimal, rounding, sql-function, multiplication

在我的选择语句的一部分中，我想将值四舍五入到小数点后两位。选择有一个乘法，我将一列的值乘以另一列并除以 100。我希望这个值只返回两位小数，但似乎没有任何工作正常。这是我到目前为止所尝试的：

```
 SELECT
     a.Rate AS 'Rate'
     ,a.LoI AS 'Liability'
 ---------------------------------------------------
 ---- Tried Each Of These Seperately ---------------
 ---------------------------------------------------

     CAST(a.Rate * a.LoI / 100, money) AS 'Premium'

     ROUND(a.Rate * a.LoI / 100,2) AS 'Premium'

     CAST((A.Rate * a.LoI / 100), money) AS 'Premium'

     CONVERT(A.Rate * a.LoI / 100, money) AS 'Premium'

FROM tblAspecs a 
```

a.Rate 是一种数据类型`Decimal(10,2)`

a.LoI 属于数据类型`bigint`

我正在使用 Microsoft SQL Server Management Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:46:20.300

选择 cast((123.456 * 2 / 100) 作为十进制 (38,2))

为我工作:) 但这可能不是你想要的？

所以我想你可以试试：

```
SELECT
 a.Rate AS 'Rate'
 ,a.LoI AS 'Liability'
 ,CAST((a.Rate * a.LoI / 100) AS decimal(38,2)) 'Premium' FROM tblAspecs a 
```

# java - ICEPush：在通知上传递参数

> ID：12042245
> 
> 赞同：0
> 
> 时间：2012-08-20T17:30:33.223
> 
> 标签：java, javascript, ajax, icepush

好吧，我了解 ICEPush 的基本功能：客户端订阅，服务器在有新数据时通知订阅者，然后客户端通过 ajax 请求有效负载。这工作得很好，但在某些情况下会出现性能问题。

假设我有一个页面正在跟踪对多个项目的更改。例如，我在名为“ItemChange”的服务器上订阅了一个 ICEPush 事件。每次服务器上的进程更改“Item”实体时，都会触发此“ItemChange”事件。现在假设用户正在跟踪 id 为 2 和 3 的项目，然后服务器上发生更改 id 为 5 的项目的事件。然后服务器将通知“ItemChange”事件，这将使客户端请求一个有效负载，即对它没用，因为它没有跟踪项目 5。这种情况会导致对服务器的大量不必要的调用。

我一直在寻找一种方法来规避这个问题，但我还没有找到任何东西。如果我可以随通知一起发送一个参数，我可以简单地传递更改的项目的 id，因此客户端会知道它是否需要请求有效负载，但似乎没有办法做这个。欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:23:12.317

通常最好的方法是使用多个 PUSHID。您是否将其与 ICEfaces 一起使用？您希望每页有多少项目？项目是否有任何自然分组？

# asp.net-mvc - 使 ASP.NET 捆绑为 CSS 捆绑指定 media=screen

> ID：12042248
> 
> 赞同：44
> 
> 时间：2012-08-20T17:30:54.490
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundling-and-minification, asp.net-optimization

我只是在尝试 ASP.NET 4.5 捆绑和缩小，但遇到了问题。

我有大约 10 个 css 文件，其中 2 个最初是在布局中使用属性 media="screen" 引用的。

由于将 css 添加到包的语法不允许您指定应添加此类属性（这是有道理的，因为该属性将适用于整个包），我希望看到 @Styles.Render 的重载允许我指定 html 属性，就像在其他 Html 帮助程序中一样，但没有。

有一个丑陋的解决方案，因为我知道创建的包的 url，我可以自己制作标签，但我会失去由 ASP.NET 处理的缓存机制，因为它允许它自己呈现标签。

有没有办法做到这一点，我错过了什么？或者这只是设计团队的疏忽？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-10T19:55:23.700

我找到了一个更优雅的解决方案。

我正在使用`Styles.RenderFormat(format, bundle)`.

我有一个`BundlesFormats`带有属性的类，`PRINT`我像这样使用它：

```
public class BundlesFormats
{
    public const string PRINT = @"<link href=""{0}"" rel=""stylesheet"" type=""text/css"" media=""print"" />";
} 
```

在cshtml中：

```
@Styles.RenderFormat(BundlesFormats.PRINT, "~/bundles/Content/print") 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-20T20:19:00.790

好吧，这是一个丑陋的 hack，但希望团队会在下一个版本中添加一个内置的方法来做到这一点。

这就是我解决它的方法，维护缓存字符串并且仍然能够将媒体属性添加到标签中。

```
@{
    var cssMediaBundleUrl = BundleTable.Bundles.ResolveBundleUrl("~/stylesheets/mediacss", true);
}
<link href="@cssMediaBundleUrl" rel="stylesheet" type="text/css" media="screen" /> 
```

猜猜我可以把它变成一个 Html 助手，稍后再编辑。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T22:40:53.913

在不影响调试能力的情况下解决此问题的另一种选择可能是：

```
public static IHtmlString Render(string path, IDictionary<string, object> htmlAttributes)
{
    var attributes = BuildHtmlStringFrom(htmlAttributes);

#if DEBUG
    var originalHtml = Styles.Render(path).ToHtmlString();
    string tagsWithAttributes = originalHtml.Replace("/>", attributes + "/>");
    return MvcHtmlString.Create(tagsWithAttributes);
#endif

    string tagWithAttribute = string.Format(
        "<link rel=\"stylesheet\" href=\"{0}\" type=\"text/css\"{1} />", 
        Styles.Url(path), attributes);

    return MvcHtmlString.Create(tagWithAttribute);
} 
```

我正在做的只是将给定的 html 属性附加到标签的末尾（在调试模式下）或唯一的链接标签的末尾（启用缩小/捆绑时）。

视图中的用法：

```
@Bundles.Render("~/css/print", new { media = "print" }) 
```

其余代码：

```
public static IHtmlString Render(string path, object htmlAttributes)
{
    return Render(path, new RouteValueDictionary(htmlAttributes));
}

private static string BuildHtmlStringFrom(IEnumerable<KeyValuePair<string, object>> htmlAttributes)
{
    var builder = new StringBuilder();

    foreach (var attribute in htmlAttributes)
    {
        builder.AppendFormat(" {0}=\"{1}\"", attribute.Key, attribute.Value);
    }

    return builder.ToString();
} 
```

我写了一篇关于这个主题的博客文章：http: [//danielcorreia.net/blog/quick-start-to-mvc4-bundling/](http://danielcorreia.net/blog/quick-start-to-mvc4-bundling/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T19:04:44.653

不幸的是，目前还没有很好的方法来挂钩标签的呈现方式，我们考虑添加一个挂钩，以便您可以添加自己的方法来呈现每个脚本/样式标签。听起来我们确实需要这样做。添加起来应该很简单，我将创建一个工作项来启用这个场景......

作为一种临时解决方法，如果您愿意失去 Styles.Render 为您提供的调试/发布功能，您可以使用 Styles.Url 呈现对捆绑包的引用，它只会为您提供捆绑包 url，您可以将其嵌入到您的自己的标签。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-13T08:36:44.933

为什么不直接使用@media print？查看[http://www.phpied.com/5-years-later-print-css-still-sucks/](http://www.phpied.com/5-years-later-print-css-still-sucks/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-23T23:45:51.840

## **网络表单解决方案**

**在 BundleConfig.cs 中：**

```
//Print css must be a separate bundle since we are going to render it with a media=print
Bundles.Add(new StyleBundle("~/bundles/printCSS").Include("~/Content/Print.css")); 
```

**母版页：**

```
<asp:Literal runat="server" ID="litCssPrint" /> 
```

**母版页代码文件：**

```
litCssPrint.Text = Styles.RenderFormat(@"<link href=""{0}"" rel=""stylesheet"" type=""text/css"" media=""print"" />", "~/bundles/printCSS").ToHtmlString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-13T17:30:07.750

我进一步接受了[Adam Tal](https://stackoverflow.com/users/1203115/adam-tal)的建议。

我可能过度编码它，但为了可读性，我创建了一个静态类来模仿`Styles.Render`格式。

```
public static class StyleExtensions
{
    public enum Format
    {
        Async,
        Preload,
    }

    public static IHtmlString Render(string contentPath, Format format)
    {
        switch (format)
        {
            case Format.Async:
            return contentPath.ToAsyncFormat();
            case Format.Preload:
            return contentPath.ToPreloadFormat();
            default:
            return new HtmlString(string.Empty);
        }
    }

    public static IHtmlString RenderAsync(string contentPath)
    {
        return contentPath.ToAsyncFormat();
    }

    public static IHtmlString RenderPreload(string contentPath)
    {
        return contentPath.ToPreloadFormat();
    }

    public static IHtmlString ToAsyncFormat(this string contentPath)
    {
        return Styles.RenderFormat("<link rel=\"stylesheet\" type=\"text/css\" href=\"{0}\" media=\"print\" onload=\"this.media='all';this.onload=null;\">", contentPath);
    }

    public static IHtmlString ToPreloadFormat(this string contentPath)
    {
        return Styles.RenderFormat("<link rel=\"preload\" href=\"{0}\" as=\"style\" onload=\"this.rel='stylesheet';this.onload=null;\">", contentPath);
    }
} 
```

我可能会删除直接构造函数或枚举构造函数，并且您也可以将字符串扩展名放入方法中，具体取决于对您更有意义的方法，但您可以相应地调用以下任何一种方式：

```
@StyleExtensions.Render("~/Content/bundle-bootstrap", StyleExtensions.Format.Preload)
@StyleExtensions.Render("https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;700&display=swap", StyleExtensions.Format.Preload)
@StyleExtensions.Render(Url.Content("~/Content/Styles/Primary.min.css"), StyleExtensions.Format.Async) 
```

或者

```
@StyleExtensions.RenderPreload("~/Content/bundle-bootstrap")
@StyleExtensions.RenderPreload("https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;700&display=swap")
@StyleExtensions.RenderAsync(Url.Content("~/Content/Styles/Primary.min.css")) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-11T10:13:33.587

这么复杂，为什么不使用：

```
bundles.Add<StylesheetBundle>("~/Css/site.css", b => b.Media = "screen"); 
```

?

# jquery-ui - 如何使用 jquery UI 获取当前列表？

> ID：12042249
> 
> 赞同：0
> 
> 时间：2012-08-20T17:31:00.670
> 
> 标签：jquery-ui, javascript

我正在使用以下代码：

html:

```
<ul id = "list1" class="connect">
<li>item1</li>
<li>item2</li>
</ul>

<ul id = "list2" class="connect">
<li>item1</li>
<li>item2</li>
</ul> 
```

jQuery：

```
$("#list1, #list2").sortable({
  revert: true,
  connectWith:".connect",
  helper: "clone"
}) 
```

所以我的问题是：是否有可能知道我们是否在第一个列表中进行排序？

我试图仅在 list1 更改时使用函数，或者我们应该在 list1 中进行排序，并在项目从列表更改为其他时使用其他函数。

我希望这很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:42:23.467

您可以访问 this 对象，它会告诉您哪个对象调用了该方法：

```
$("#list1, #list2").sortable({start: function () {
   console.log($(this).attr("id"));            
}});​ 
```

小提琴样本：http: [//jsfiddle.net/2rY3j/4/](http://jsfiddle.net/2rY3j/4/)

# ios - 在接收推送时获取位置

> ID：12042250
> 
> 赞同：0
> 
> 时间：2012-08-20T17:31:04.083
> 
> 标签：ios, core-location

当从服务器发出请求时，是否有替代方法，设备收集位置并将其发送到服务器？

或者 MDM 中有没有这样的 API？

知道“查找我的 iPhone”是如何工作的吗？

任何帮助将不胜感激。

谢谢，

尼廷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:31:08.607

据我所知，没有用于位置信息的 MDM API。

您需要创建一个应用程序并使用 MDM 部署它，并让该应用程序将信息发送回您的服务器，以获得所需的行为。

# ruby-on-rails-3 - Rails rake assets:precompile 产生数百个 jquery.ui.datepicker

> ID：12042256
> 
> 赞同：2
> 
> 时间：2012-08-20T17:31:36.687
> 
> 标签：ruby-on-rails-3, production-environment, jquery-ui-datepicker

我注意到这`rake assets:precompile`在我的生产服务器上需要很长时间，至少 10 多分钟。我去查看我的 public/assets 文件夹，我注意到 jquery.ui.datepicker 有数百种变体。

这是我的终端显示的...

```
$ dir public/assets/jquery.ui.datepicker
Display all 280 possibilities? (y or n) 
```

它的范围从 jquery.ui.datepicker-856....css 通过数百种组合到 jquery.ui.datepicker-zh-TW.js.gz。

我不知道是否所有这些文件都是必要的，但这可能是预编译资产需要这么长时间的部分原因吗？此外，当我将此行添加到我的**production.rb时，我才开始遇到这个问题**

`config.assets.precompile += %w( *.js *.css )`

# windows-8 - Windows 8/Metro 界面的全系统主题性

> ID：12042257
> 
> 赞同：0
> 
> 时间：2012-08-20T17:31:36.977
> 
> 标签：windows-8, microsoft-metro, internals, theming

Windows 8 (Metro) 应用程序通过 css 提供了一些有限的主题性。您可以更改字体、背景颜色等。我想知道是否还有系统范围的主题功能，就像在 Windows XP 中那样（通过 uxtheme.dll 和 .msstyles 文件）？因此，如果在几年内，当 Metro 不再看起来很现代时，人们可以改变所有应用程序的风格，例如让所有按钮都变成圆角。或者让一切看起来像 Holo 主题 (Android) 或 LCARS（计算机在星际迷航中使用的 UI），举一些疯狂的例子。

请注意，我不是在寻找正式的、记录在案的功能——我很确定它不存在。我想知道作为开发人员是否有什么可以吸引我的东西，例如 uxtheme 修补和视觉样式资源编辑对经典 Windows 应用程序的作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:45:15.510

它不存在，我认为我是最好的：Windows 8 风格的应用程序（以前称为 Metro）通常具有非常复杂的设计，其中每个按钮都有一个精确的像素位置。需要大量工作才能使所有部件都能点击并看起来很漂亮，并确保任何传单（例如导航栏）不包含任何非常重要的控件（按钮或信息）。

如果不是创建应用程序的人能够更改其主题，那么布局就不可能保持预期的布局，更不用说应用程序保持美观了。

与 windows xp 样式对比：您实际上可以更改的东西很少：一些标准图标，一些条的颜色。这是可能的，因为这些元素超出了应用程序的设计（通常在顶部）。对于 Metro 应用程序，设计要复杂得多，Windows xp 中的大多数可模板化元素甚至都不存在（它们属于微软“更多内容，更少 chrome”设计指南的“chrome”类别）。

如果您安装了 Windows 8，请浏览应用程序商店并测试一些应用程序。然后再想一想，如何将主题同时应用于您刚刚尝试过的所有应用程序。你会意识到这根本不可行。

# javascript - 如何在实际示例中使用 javascript 模块模式？

> ID：12042260
> 
> 赞同：14
> 
> 时间：2012-08-20T17:31:45.923
> 
> 标签：javascript, jquery, design-patterns, module-pattern

我正在尝试了解 JavaScript 模块模式。我已经看过它应该是什么样子的例子，但我不明白如何使用它。

例如，这里发生了一些事情：

```
$('input#share').on("click", function() {

    $('.loading').html('<img class="remove_loading" src="/graphics/loading.gif" />');

    var message = $(".wallmessage").val();

    if (message == ""){
        $("#messageempty").jmNotify();
        $('.remove_loading').remove();
    } else {
        addMessage(message);
    }

    return false;
});

function addMessage(message)
{
    $.ajax({
        url: '/test',
        type: 'POST',
        dataType: "json",
        data: {'message' : message},
        success: function(data) {
                ...
        },
        error: function() {
            ...
        }
    });
} 
```

我怎样才能使用上面的例子：

```
var myTest = function() {
    var selectId;
    function addMessage () {
        // ...
    }
    return { // public interface
        publicMethod1: function () {
            // all private members are accesible here
        }
    };
};
var start = myTest(); 
```

我在哪里添加点击事件，声明我的变量，`addMessage`使用 ajax 调用添加函数。并调用`addMessage`函数？我必须把所有东西都包起来`$(document).ready(function()`吗？

任何人都可以为我阐明这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T17:47:49.693

这是一个相当自以为是的主题，但我会这样做（不完全了解您的完整应用程序及其功能），有点像这样：

```
var myApp = (function() {

  var someElement = $("#foo"); //some element I know I'll use lots

  var addMessage = function(message) {
    $.ajax({
      url: '/test',
      type: 'POST',
      dataType: "json",
      data: {'message' : message},
      success: function(data) {
              ...
      },
      error: function() {
          ...
      }
    });
  };

  var inputClick = function(event) {
    event.preventDefault();
    //depending on if you'll reuse these selectors throughout the app I might have these as variables
    $('.loading').html('<img class="remove_loading" src="/graphics/loading.gif" />');

    var message = $(".wallmessage").val();

    if (message == ""){
      $("#messageempty").jmNotify();
      $('.remove_loading').remove();
    } else {
      addMessage(message);
    }
  };

  var bindFunctions = function() {
    $("input#share").on("click", inputClick)
  };

  var init = function() {
    bindFunctions();
  };

  return {
    // EDIT: 27/12/16 - need to return init for 'usage' example to work
    init: init,
    addMessage: addMessage
    //anything else you want available
    //through myApp.function()
    //or expose variables here too
  };

})();

//usage

myApp.init(); 
```

您的模式的原始代码是错误的，该函数必须`()`在最后，使其成为*立即调用*的函数，然后执行，通过`return statement`.

您可能希望与我所做的略有不同，这只是一个基本的想法，但我希望它可以帮助您入门。

不久前有人问了一个与此模式有关的问题，[我回答了它，](https://stackoverflow.com/questions/6562679/what-is-the-use-of-return-statement-inside-a-function/6562710#6562710)解释了我们为什么使用该语句`(function() {})();`以及该`return`语句在该上下文中如何工作，如果您对此感到有些困惑，那也可能值得一读。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-20T17:42:03.763

显示模块模式的使用如下：

```
var moduleName = (function () {
    var privateVariable = 'private';

    var privateMethod = function () {
        alert('this is private');
    };

    // this is the "revealed" part of the module
    return { 
        publicVariable: 'public',
        publicMethod: function () {
            alert('this is public');
        }
    };
}()); 
```

您还可以将公共变量/方法定义为私有变量，然后公开对它们的引用，使它们公开。这是一个偏好问题。

在您的示例中，如果您想`addMessage`成为模块的一部分，您可以这样做：

```
var moduleName = (function () {
    // this becomes public due to the reference exposure in the return below
    var addMessage = function () {
        // do whatever
    };

    // this is the "revealed" part of the module
    return { 
        addMessage: addMessage
    };
}());

moduleName.addMessage(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T02:29:30.760

这个想法是通过将代码分成段/模块来减少外部世界的可见性和更好的代码管理。如果您想了解模块化设计模式的真正良好用法以及我们如何从中受益的某种方式，请查看此它。
[http://learn.jquery.com/code-organization/concepts/](http://learn.jquery.com/code-organization/concepts/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-01T11:35:04.323

与 JAVA 不同，Javascript 在属性或方法上没有私有和公共的概念。让我们创建一个名为 person 的对象，它有 2 个属性 firstName 和 lastName，并创建 2 个函数，它们将作为我们的属性的 getter。在 Javascript 中，我们可以将函数创建为对象的属性，并且这些函数可以像任何其他属性一样在任何地方访问。

```
var person={
  "firstName":"Anoop",
  "lastName":"Rai",
  "getFirstName":function(){
    return this.firstName;
  },
  "getLastName":function(){
    return this.lastName;
  }
};
console.log(person.getFirstName());
console.log(person.firstName); 
```

正如预期的那样，上面的代码 11 打印出 Anoop 和 Anoop。嗯，这对面向对象的编程不好。好吧，我们成功地实现了 getter，所以我们还应该有应该是公共范围的 setter，并且属性应该标记为私有范围（什么？？？这些私有和公共概念属于 JAVA、C++ 之类的语言）。我们的意图是好的，让我们应用特定于 Javascript 的概念。我们不想做 person.firstName，我们想要直接阻止对属性的访问。在像 JAVA 这样的语言中，由于私有和公共，我们实现了对属性的受控访问，但在 Javascript 中，一切都是公共的。

Javascript 使用闭包的概念来实现私有和公共之类的东西。这种模式称为模块模式。也就是说，对公共访问隐藏变量。为了实现作用域，请将您的代码包装在一个函数中（请记住，作用域是通过 Javascript 中的函数实现的）。

```
function createPerson(){
  var returnObj={
    "firstName":"Anoop",
    "lastName":"Rai",
    "getFirstName":function(){
      return this.firstName;
    },
    "getLastName":function(){
      return this.lastName;
    }
  };
  return returnObj;
}
var person=createPerson();
console.log(person.getFirstName());
console.log(person.firstName); 
```

现在也在上面的行打印 Anoop 和 Anoop。仍然没有成功。只要属性与对象绑定，就可以直接访问它。让我们解开它。我们创建函数范围的变量（闭包变量）而不是属性。

```
function createPerson(){
  var firstName="Anoop";
  var lastName="Rai";
  var returnObj={
    "getFirstName":function(){
      return firstName;
    },
    "getLastName":function(){
      return lastName;
    }
  };
  return returnObj;
}
var person=createPerson();
console.log(person.getFirstName());
console.log(person.firstName); 
```

Now above lines prints Anoop and undefined. How does this happen? Because of closures, when the functions getFirstName and getLastName was created the functions had the whole scope chain or say pointers to the relevant variables i.e. firstName and lastName. The object returnObj does not remember the variabes but the function objects remembers, because of closures. Looks like we achieved what we wanted to, but one thing is left and that is setters for the controlled access of firstName and lastName. Let’s implement setters.

```
function createPerson(){
  var firstName="Anoop";
  var lastName="Rai";
  var returnObj={
    "getFirstName":function(){
      return firstName;
    },
    "getLastName":function(){
      return lastName;
    },
    "setFirstName":function(name){
      return firstName=name;
    },
    "setLastName":function(name){
      return lastName=name;
    }
  };
  return returnObj;
}
var person=createPerson();
console.log(person.getFirstName());
person.setFirstName("Kumar");
console.log(person.getFirstName()); 
```

We successfully modified firstName but in a controlled manner.

[http://jkoder.com/the-module-pattern-javascript-way-of-hiding-data-in-objects-from-public-access/](http://jkoder.com/the-module-pattern-javascript-way-of-hiding-data-in-objects-from-public-access/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T20:03:53.187

我对 Mootools 有一些经验，但我是 jQuery 新手。我已经阅读了文档，看起来组织代码最聪明的方法是模块模式，所以我正在尝试。然而，这种风格似乎缺少的一件事是任何“自我”的概念，因为 IIFE 中的每个变量都是一个自包含的对象（不是双关语）。

所以......也许这违背了整个目的，但你能做这样的事情，并且仍然让它在模块模式样式有效的所有方面都是“有效的”吗？

```
var feature = ( function () {

    var self = {

        config: {
            option1: 'thing 1',
            option2: 'thing 2'
        },

        init: function (options) {

            // allow overriding the default config
            jQuery.extend( self.config, options );

            self.doSomething();

        },

        doSomething: function () {

        },

    };

    return {
        init: self.init
    }

})(); 
```

我喜欢这个的是我可以使用“self”在内部引用所有的方法和属性。我仍然能够使用“return”对象公开我想要的方法，所以（我猜）没关系。但我是个新手，这看起来很简单（乍一看）很优雅，我一定错过了一个主要问题。它与我从 Mootools 熟悉的 Object Literal 格式共享编码风格。所以也许我正在尝试将一个圆形钉子安装到一个方孔中。也许内部对象文字不是必需的，因为我可以说“doSomething”而不是“self.doSomething()”？是这样吗？

部分我喜欢这个，因为我可以将 $.ajax 的“context”参数设置为“self”，这似乎是一个胜利。

# asp.net - asp.net 转换为母版页，不再看到 div 标签

> ID：12042261
> 
> 赞同：0
> 
> 时间：2012-08-20T17:31:57.227
> 
> 标签：asp.net, master-pages

我有一些页面要转换为使用母版页。现在仅用于 HTML 格式，母版页中还没有对象/代码。

我有一个工作正常的现有页面（如果需要可以发布，但有点长），我添加了一个母版页（就像我在其他几个工作正常的页面上所做的那样），现在我在 div 标签上收到错误（在子页面和对 div 的引用仍在子页面中）错误：

> System.NullReferenceException：对象引用未设置为对象的实例。

我正在使用代码来获取 div 标签： `Control anotherDiv = Page.FindControl("divTrans")`

我知道如何将其转换为使用 Master Page 只需使用 Master.Page ....

但是我如何/如何编写代码以仅使用现有的子页面代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:12:51.703

我必须做嵌套查找控件：

```
Control anotherDiv = this.Master.FindControl("ContentPlaceHolder1").FindControl("divTrans"); 
```

# c - 如何将字符串从文件传递到链表

> ID：12042270
> 
> 赞同：2
> 
> 时间：2012-08-20T17:32:15.190
> 
> 标签：c, file, linked-list, segmentation-fault

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
struct ll
{
    char data[50];
    struct ll *next;
    struct ll *prev;
};
typedef struct ll node;

main()
{
    node *head;node *temp1;node *temp2;
    head = (node *)malloc(sizeof(node));
    temp1 = head;
    FILE *p;
    int n;
    char s[50];
    p = fopen("studentRecords.txt","r");
    while((fscanf(p, "%s", s)) != EOF)
    {
        strcpy(head->data, s);
        head->next = (node *)malloc(sizeof(node));
        head->next = head->next->prev;
        head = head->next;
    }
    head = NULL;
    fclose(p);
    for(temp2 = temp1; temp2->next != NULL; temp2 = temp2->next)
        printf("%s\n", temp2->data);
} 
```

当我运行上面的代码时，输​​出是分段错误。我该如何纠正？我有学生的记录作为`studentRecords.txt`文件中的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:41:20.040

您在`next`初始化之前使用：

```
head->next = (node *)malloc(sizeof(node));
head->next = head->next->prev;             /* head->next->prev is garbage. */
head = head->next;                         /* Now `head` points nowhere. */ 
```

稍后您最终会取消引用该垃圾值。此外，您正在覆盖刚刚从`malloc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:59:33.090

这里的主要问题是声明： `head->next = head->next->prev;`. `head->next->prev`尚未初始化，因此当您`head->next`在下一条语句中将其分配给它时，它不会指向任何有用的东西。当您稍后尝试取消引用此值时，您的程序就会崩溃。你的意思可能是`head->next->prev = head;`.

也就是说，您的代码中还有许多其他值得评论的地方：

1.  使用`int main(void)`而不是`main()`.
2.  不要`malloc`在 C 中将返回值强制转换，这是不必要的并且可以隐藏错误。
3.  `malloc`检查和的返回值`fopen`。
4.  如果您用于`fscanf`读取数据，请注意说明`%s`符只会读取直到遇到空白（在跳过初始空白之后），这可能是您想要的，也可能不是您想要的。此外，为了防止缓冲区溢出，您需要确保不会读取太多数据，`%s`因此始终使用最大字段宽度，即`%49s`. `fgets`并且`sscanf`通常是更好的方法。
5.  不要忘记`free()`动态分配内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:49:42.983

```
head->next = head->next->prev; 
```

这是不正确的！`head->next->prev`指向“上帝甚至知道”的内存块，然后将其分配给`head->next`.

它将破坏其中有用的消息`head->next`并将其替换为垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T17:44:36.447

您必须首先初始化头指针：

```
head = (node *)malloc(sizeof(node));
head->prev = NULL;
head->next = NULL; 
```

要阅读我建议使用 fgets() 的文件：

```
p = fopen("studentRecords.txt","r");
while(!feof(p))
{
    fgets(head->data, 50, p); 
```

通常你分配一个更大的缓冲区（比如 1K，内存通常很便宜），将一行读入缓冲区并检查它是否有效且长度合适。如果不是，您可以发出信息性错误（“第 XXX 行，值 'yyy' 太长”）并中止，或忽略该行并继续。您还可以使用 strdup() 来完全避免该问题，使用带有 *data 的结构而不是 data[50]。您实际上可能会以这种方式最终节省内存。

使用具有较短缓冲区的 fget 可能会导致 52 个字符的行被读取为两个错误记录而没有任何警告。

最后，这里的代码太紧凑了——你再次没有初始化指针：

```
 head->next = (node *)malloc(sizeof(node));
    head->next->prev = NULL;
    head->next->next = NULL; 
```

一旦你在临时缓冲区中有你的行，你应该做的是创建一个新节点，完全初始化它，然后将它作为新的头：

```
 newNode = (node *)malloc(sizeof(node));
    newNode->prev = NULL;
    newNode->next = head;
    head->prev    = newNode;
    // A 
    strncpy(head->data, temp, 50);
    head->data[49] = 0x0;
    // B
    // head->data = strdup(temp);
    head = newNode; 
```

一体式的 head->next = (node*)... 可能看起来很漂亮，但它往往很快就会成为阅读、维护和调试的地狱。而且编译器通常会在很短的时间内输出您梦寐以求的更优化的代码。

# javascript - 如何使用 javascript ajax 请求读取 xml.gz 文件？

> ID：12042273
> 
> 赞同：1
> 
> 时间：2012-08-20T17:32:25.327
> 
> 标签：javascript, xml, gzip

我可以访问 TV Listing API，它以压缩 XML.gz 文件的形式为我提供数据，我想使用 javascript AJAX 调用访问该文件。
每当我尝试向 URL 发出 AJAX 请求时，它都会提示我下载文件，而不是提供它的内容。

是否有任何解决方案可以让我仅使用 javascript 访问文件的 XML 内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:25:06.567

浏览器`gzip`在运行中“透明地”解压缩文件。您不需要为此手动设置任何请求标头，浏览器会根据需要自动添加`Accept-Encoding`标头。

* * *

**重要提示：**`Content-Encoding:gzip`在这种情况下，Web 服务器需要发送适当的响应标头才能使解压缩工作。`Content-Encoding`您可以使用[Firebug](http://getfirebug.com/)进行调试。

* * *

你可以试试这个——

```
$.ajax({
  ...
  headers: { "Accept-Encoding" : "gzip" },
  ...
}); 
```

# rest - RESTEasy 异步作业服务 + Spring MVC？

> ID：12042275
> 
> 赞同：1
> 
> 时间：2012-08-20T17:32:45.333
> 
> 标签：rest, spring-mvc, asynchronous, resteasy

我正在使用 RESTEasy 与 Spring MVC 的集成，如“39.2\. Spring MVC 集成”部分所述 [http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html/RESTEasy_Spring_Integration.html](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html/RESTEasy_Spring_Integration.html)

我想尝试 RESTEasy 的“异步作业服务”实现，如下所述：http: [//docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html/async_job_service.html](http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html/async_job_service.html)

阅读文档，我的假设是 RESTEasy 将拦截请求并以 HTTP 202 进行响应，并执行排队和跟踪工作并创建`.../async/jobs`端点。所以我按照文档中的描述修改了我的 web.xml。这是它的样子：

```
<web-app>

    <context-param>
        <param-name>resteasy.async.job.service.enabled</param-name>
        <param-value>true</param-value>
    </context-param>

    <context-param>
        <param-name>resteasy.async.job.service.base.path</param-name>
        <param-value>/asynch/jobs</param-value>
    </context-param>

    <servlet>
        <servlet-name>springmvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:springmvc-servlet.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>springmvc</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

我试图通过调用我的一项 REST 服务（在 Tomcat 6 下运行）来测试这是否有效：

```
POST http://localhost:8080/myservice?async=true 
```

根据文档，该服务应该返回 HTTP 202，但它返回了正常的 HTTP 200，就好像我在没有`async=true`查询参数的情况下调用了一样。

我的服务没有改变任何其他东西。我错过了什么吗？

顺便说一句，这是服务注释的样子：

```
@Controller
@Path("/")
public class MyServices {

    @POST
    @Produces({MediaType.APPLICATION_XML})
    @Path("myservice")
    public Response createMyResource(@Context UriInfo uri, myResource) {
      // create the resource
      // construct and return a OK Response
    }
} 
```

有没有人成功尝试过这个？如果没有，您是否有另一种易于使用的替代方法来对 RESTEasy RESTful 服务进行异步调用（也适用于在 tomcat 下运行的 Spring）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:56:14.503

尝试`asynch=true`不`async=true`

# php - 将错误记录到文件中（PHP + IIS6 + FastCGI + Win2003 Server）

> ID：12042276
> 
> 赞同：6
> 
> 时间：2012-08-20T17:33:09.967
> 
> 标签：php, iis-6, error-logging

虽然我已经阅读了很多关于这个问题的帖子和页面（如下所示），但我想我在这里遗漏了一些东西。主要问题是：*我的 PHP 错误没有被记录到指定的文件或系统事件日志*中。

[我的 phpinfo() 显示](http://cativaimagem.com.br:8080/info.php)：Windows Server 2003, PHP 5.3.6, log_errors = On, error_log = C:\\errorphp.log

我在php.ini`error_log = C:\Inetpub\logs\php.log`和**php.ini**中都试过了，但都没有效果（一次一个）。`error_log = syslog`

 **我有：

1.  每次 php.ini 更改后重新启动 IIS
2.  授予 IUSR_XXXXX 用户*修改*文件夹和文件的权限
3.  尝试将目录留空并让 PHP 创建文件
4.  头疼。

任何帮助深表感谢。

> 参考：
> 
> *   [PHP 手册 - IIS 6 上的 PHP](http://www.php.net/manual/en/install.windows.iis6.php)
> *   [将 PHP 错误存储在日志文件中](https://stackoverflow.com/questions/10114054/store-php-errors-in-a-log-file)
> *   [IIS PHP 不会将错误记录到日志文件](https://stackoverflow.com/questions/6661688/iis-php-doesnt-log-errors-to-log-file)
> *   [我的 php 错误日志文件为空](https://stackoverflow.com/questions/5284993/my-php-error-log-file-is-empty)
> *   [运行有缺陷的 php 文件导致错误 500](https://serverfault.com/questions/397220/running-a-defect-php-file-cause-error-500)
> *   [将 PHP 记录到 Windows 事件日志](http://www.iis-aid.com/articles/how_to_guides/logging_php_to_windows_event_log)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:44:04.090

就我而言，**设置**

```
fastcgi.logging = 1 
```

**在 php.ini 中**解决了这个问题，我现在确实有日志文件工作（我将文件创建留给 php 本身，*我的目录是空白的*）

我永远不会猜到，正如 php.ini 本身所说的那样（就在所述配置的正上方）

> ; 通过 FastCGI 连接禁用日志记录。PHP 的默认行为是启用此功能。

去搞清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:39:31.433

你

*   检查您的错误报告级别
*   尝试在文档根目录中设置一个日志文件（包括写入权限）以查看是否有任何限制？**

# jquery - 具有多个选项卡的独特选择

> ID：12042277
> 
> 赞同：1
> 
> 时间：2012-08-20T17:33:16.807
> 
> 标签：jquery, if-statement, tabs, each

这是一个选项卡式 UI，可以应用于同一页面上的多个元素。

除了一个错误之外，它可以工作：也就是说，它会显示和隐藏它自己的选项卡，但由于某种原因，当单击第二个选项卡时，它会更改所有选项卡的状态。

```
 <html>
<head>
<title>super tabbed menu</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script>
$(document).ready(function(){

$('.sub').click(
function () {

$('.mydiv', this).show();
$('.sub2\. div').hide();

});

$('.sub2').click(
function () {

$('.mydiv2', this).show();

$('.sub div').hide();       
});

 });

</script>
<style>
.sub{float:left;padding-left:10px;}

.sub2{float:left;padding-left:10px;}
.mydiv{display:none;position:absolute; float:left;}
.mydiv2{display:none;position:absolute;background-color:grey;float:left;}
.showit{display:block}
</style>

</head>
<body>

  <div class="sub">
  <a class="thing" href="#" >this thing will make only one thing appear</a>
    <div class="mydiv">mydiv</div>  
</div>

     <div class="sub2">
     <a class="thing2" href="#" >this thing will make only one thing appear</a>
     <div class="mydiv2">mydiv2</div>  
    </div>

  </div>
<br/>
<br/><br/><br/><br/><br/>
<!--  ************************ -->
  <div class="sub">
  <a class="thing" href="#" >this thing will make only one thing appear</a>
    <div class="mydiv">mydiv</div>  
</div>

     <div class="sub2">
     <a class="thing2" href="#" >this thing will make only one thing appear</a>
     <div class="mydiv2">mydiv2</div>  
    </div>

  </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:18:05.997

问题是 $('.sub2\. div') 将选择所有具有 sub2 类的标签，包括第二个选项卡菜单中的标签，我将选择器更改为 prev() 和 next() 并且它似乎有效。 [http://jsfiddle.net/kswishaq/2yZYT/](http://jsfiddle.net/kswishaq/2yZYT/)

但是，此解决方案的一个限制是 sub2 必须在 sub1 之后。为了解决这个问题，我建议你将标签包装在一个 div 中，这样你就可以调用兄弟姐妹（“sub”）来选择附近的标签。

ps您的 html 代码中有两个额外的标签。

# mysql - 想知道是否可以使用日期函数和 mySQL #1064 错误命名 mySQL 表

> ID：12042278
> 
> 赞同：-1
> 
> 时间：2012-08-20T17:33:20.463
> 
> 标签：mysql

```
Noob Alert. 
```

你好。我正在尝试通过 phpMyAdmin 在 mySQL 中输入此事件。我不确定是否可以使用 YEAR() 和 MONTHNAME() 函数命名该表。甚至在我解决这个问题之前，这个 #1064 错误就已经出现了：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END' at line 14 
```

有人可以指出我做错了什么吗？也可以按照我尝试的方式命名表吗？

```
CREATE EVENT newmonthlytable
ON SCHEDULE EVERY '1' MONTH
STARTS '2012-09-01 00:00:00'
DO
BEGIN
CREATE TABLE IF NOT EXISTS `YEAR()-MONTHNAME()-0-msgs` 
(`msgid` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY, 
`sender` int(11) NOT NULL, 
`reciever` int(11) NOT NULL, 
`sendername` varchar(64) NOT NULL, 
`msg` varchar(512) NOT NULL, 
`tstamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP) 
ENGINE = MyISAM, CHARACTER SET = utf8, COLLATE = utf8_bin
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:23:13.540

有语法错误，要修复它添加';' 在 CREATE TABLE 语句的末尾。

您可以根据需要命名表，但您真的需要吗？最好考虑 db-design，不要从例程创建表。

# makefile - 在 Fedora 中制作 Carmen Robotics 工具包的问题

> ID：12042285
> 
> 赞同：0
> 
> 时间：2012-08-20T17:33:47.003
> 
> 标签：makefile, fedora, robotics, carmen

我在 Fedora 中安装 Carmen Robotics 工具包时遇到了问题；

## 制造：

当我输入时`make`，我收到以下错误消息

```
---- Copying global/carmen-std.ini to carmen.ini 

   ***********
   E X P O R T
   ***********

---- Copying ipc.h to [path]/carmen-0.7.4-beta/include/carmen 
```

...许多类似的行

```
---- Copying param_interface.h to [path]/carmen-0.7.4-beta/include/carmen
Makefile:7: *** missing separator.  Stop.
make: *** [export] Error 255 
```

我搜索了一下，发现这可能是由空格而不是行首的制表符引起的。makefile 的第 7 行附近没有这样的问题。做 make -d 会产生很多输出，最后是：

```
Updating goal targets.... Considering target file `export'.  
File `export' does not exist.  
Finished prerequisites of target file `export'.  
Must remake target `export'.  
Invoking recipe from ../Makefile.rules:285 to update target `export'.  
Putting child 0x174b8e0 (export) PID 5816 on the chain.  
Live child 0x174b8e0 (export) PID 5816  
Reaping winning child 0x174b8e0 PID 5816  
Live child 0x174b8e0 (export) PID 5819  
Reaping winning child 0x174b8e0 PID 5819  
Removing child 0x174b8e0 PID 5819 from chain.  
Successfully remade target file `export'.  
GNU Make 3.82 Built for x86_64-redhat-linux-gnu Copyright (C) 2010  
Free Software Foundation, Inc. License GPLv3+:  
GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>  
This is free software: you are free to change and redistribute it.  
There is NO WARRANTY, to the extent permitted by law.  
Reading makefiles...  
Reading makefile `Makefile'...   
Reading makefile `../Makefile.conf' (search path) (no ~ expansion)...  
Reading makefile `../Makefile.vars' (search path) (no ~ expansion)...  
Makefile:7: *** missing separator.  Stop.  
Reaping losing child 0xda4940 PID 5794   
make: *** [export] Error 255  
Removing child 0xda4940 PID 5794 from chain. 
```

我听说去 Carmen 编译可能是一次糟糕的经历，但我没想到它会给我带来*这么*多麻烦，尤其是因为我过去在另一台计算机上成功地完成了它。

***我什至无法清洁***

有没有人在这个话题上提供圣人智慧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:43:35.420

我从 Make 3.82 降级到 3.81，这个问题就消失了。

# ruby - 如何查看模块或类的 `require`-d 在哪里？

> ID：12042286
> 
> 赞同：0
> 
> 时间：2012-08-20T17:34:16.947
> 
> 标签：ruby

我在寻找特定库在项目中的哪个位置时遇到了麻烦`require`。

有没有可以告诉我文件名和行的方法或技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:42:41.583

您没有提到您正在使用的系统，但您可以使用`grep`or`ack-grep`来完成此任务：

```
ack-grep "require 'simple_form'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:26:14.150

Just off the top of my head, you could monkey patch require and print out `__FILE__` and `__LINE__`

# android - HTML 无法在 Android 中解析

> ID：12042290
> 
> 赞同：1
> 
> 时间：2012-08-20T17:34:52.330
> 
> 标签：android, webkit

我知道 Android 无法解析某些 HTML 元素存在问题，但我的理解是，它在 Android 2.1`strong`及`em`更高版本中已被解析。但在 Android 2.2 上对其进行测试时，标签未解析。是否有已确认的受支持标签列表？

来源：[http ://commonsware.com/blog/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/2010/05/26/html-tags-supported-by-textview.html)

# ruby-on-rails-3 - 试图在 rails 3 中创建一个范围，因为有 habtm 关系

> ID：12042296
> 
> 赞同：3
> 
> 时间：2012-08-20T17:35:19.600
> 
> 标签：ruby-on-rails-3, activerecord, scope, has-and-belongs-to-many

我正在尝试对活动记录进行基本搜索，但由于 has_and_belongs_to_many 关系而遇到麻烦。以下是我创建的记录和范围。

```
Class Section << ActiveRecord::Base
  has_and_belongs_to_many :teachers
  attr_accessible :department, :class_size

  scope :department_scope, lambda { |dept| where("department = ?", dept) }
  scope :teacher_fname_scope, lambda { |n| joins(:teachers) & Teacher.has_first_name(n) }
end

Class Teacher << ActiveRecord::Base
  has_and_belongs_to_many :sections
  attr_accessible :first_name, :last_name

  scope :has_first_name, lambda { |fname| where("first_name = ?", fname) }
end 
```

在 Rails 3.2 中，我正在为我的 Sections 模型创建一个基本搜索。假设我想搜索具有给定名字的教师的所有部分。

我已经使用上面的范围进行了尝试，但我从 *Section.teacher_fname_scope* 得到的只是一个空数组。

（我实际上将有多个字段，让用户还可以搜索部门和类大小等部分字段，因此我可能会创建多个范围并最终将它们链接在一起，例如上述搜索也受部门和类大小的限制，但我的理解是范围是正交的，所以这与上面的问题无关。）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T17:59:45.933

看起来获胜的范围是：

```
Class Section << ActiveRecord::Base
  scope :teacher_fname_scope, lambda { |n| joins(:teachers).("teachers.first_name = ?", n) }
end 
```

[这是有道理的，但鉴于 Ryan Bates 在http://railscasts.com/episodes/215-advanced-queries-in-rails-3?view=asciicast](http://railscasts.com/episodes/215-advanced-queries-in-rails-3?view=asciicast)中谈到的内容，我不明白为什么原版不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T01:47:17.883

这是一个老问题，但既然我跌倒在这里，我会为遇到这个问题的人留下一个答案：

```
class Teacher < ActiveRecord::Base
  scope :by_name, ->(name) { where(first_name: name) }
end

class Section < ActiveRecord::Base
  has_and_belongs_to_many :teachers
  scope :by_teacher_name, ->(name) {
    joins(:teachers).merge(Teacher.by_name(name)) 
   }
end 
```

# c# - 使用 JSON.Net 序列化包含撇号的字符串

> ID：12042302
> 
> 赞同：21
> 
> 时间：2012-08-20T17:35:38.773
> 
> 标签：c#, javascript, json, asp.net-mvc-3, json.net

我使用 JSON.Net 作为 c# 中大型 MVC 3 Web 应用程序和 Razor 视图引擎的序列化程序。对于一个视图中的初始页面加载，使用`@Html.Raw(JsonConvert.SerializeObject(myObject))`.

问题是某些对象的某些值包含撇号（想想像 O'Brien 这样的名字），JSON.Net 不会以任何方式转义或编码。

对存储在数据库中的值进行预编码不是一种选择，因为这会使其他各种过程变得非常复杂。

有没有办法强制 JSON.Net 对它序列化的对象的值进行 HTML 编码，就像你调用内置的 JavaScriptSerializer 时所做的一样`JavaScriptSerializer.Serialize(myObject)`？或者，有没有办法在视图中处理这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-01-09T11:41:09.010

```
JsonSerializerSettings settings = new JsonSerializerSettings
{
    StringEscapeHandling = StringEscapeHandling.EscapeHtml
};

JsonConvert.SerializeObject(obj, settings); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-20T23:01:16.540

尽管在某些情况下，您可能希望将一些 JSON 作为 JavaScript 字符串或 HTML 属性值放入您的页面，但通常您要做的只是将其直接包含到 JavaScript 源代码中，因为 JSON 在之后是有效的 JavaScript 语法全部。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-20T18:24:34.123

您可以像这样创建自定义 JsonConverter：

```
public class EscapeQuoteConverter : JsonConverter 
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer) 
    {
        writer.WriteValue(value.ToString().Replace("'", "\\'"));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) 
    {
        var value = JToken.Load(reader).Value<string>();
        return value.Replace("\\'", "'");
    }

    public override bool CanConvert(Type objectType) 
    {
        return objectType == typeof(string);
    }
} 
```

要仅将其用于 Name 属性，请按属性指定它：

```
public class Person 
{
    [JsonConverter(typeof(EscapeQuoteConverter))]
    public string Name { get; set; } 
} 
```

要将 Converter 应用于所有字符串，请使用：

```
JsonConvert.SerializeObject(person, Formatting.Indented, new EscapeQuoteConverter()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-01T16:52:58.797

使用[System.Web.HttpUtility.HtmlEncode](http://msdn.microsoft.com/en-us/library/73z22y6h%28v=vs.100%29.aspx)

```
HttpUtility.HtmlEncode(JsonConvert.SerializeObject(myObject)) 
```

# c# - 访问其他 Windows 窗体类中的变量

> ID：12042303
> 
> 赞同：3
> 
> 时间：2012-08-20T17:35:47.347
> 
> 标签：c#, windows, forms

如果有人可以帮助我，我将不胜感激。

我有一个 Windows 窗体应用程序，它具有三种形式：form1、form2、form3。form1 在应用程序激活时启动。在form1上，有一个按钮可以调出form2，隐藏form1。还有一个按钮可以调出form3并在form2上隐藏form2。

```
public partial class Form1 : Form
{

    Form2 f2= new Form2();
    public Form1()
    {
        InitializeComponent();
    }
    private void button1_Click(object sender, EventArgs e)
    {
        this.Hide();            
        f2.Show();        
    }
}

public partial class Form2 : Form
{
            Form3 f3 = new Form3();
    private void button1_Click(object sender, EventArgs e)
    {
         this.Hide();
         f3.Show();                
    }
 } 
```

问题在form3上，我试图访问一些在form2中运行时分配了值的变量。我认为由于我将 f2 设为无模式形式，我应该能够通过简单地使用 f2.myvariables 来访问，但是智能感知并没有给我 f2 对象。这是为什么？我找到了一种将这些变量声明为 public static 的方法，因此我可以使用 form2.myvariables 进行访问。这是另一件让我感到困惑的事情。由于所有值都是在运行时分配的，静态变量如何做到这一点？我是 C# 的新手，我已经对此进行了很多搜索，但似乎没有地方能准确回答我的问题。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T17:43:39.257

因此，您在父表单 (form2) 中拥有想要在子表单 (form3) 的方法中访问的信息。

1.  `form3`为它需要的信息创建属性。
2.  创建`form2`它的实例`form3`时应该设置这些属性。

您不应该认为这不是让子表单向其父表单请求信息，而是父表单正在向其子表单提供信息。如果你相应地改变你的思维方式，代码不仅变得更容易编写，而且更符合良好的编码实践（更低的耦合，不向外部暴露比需要更多的信息等）

要创建属性，您可以执行以下操作`form3`：

```
//TODO: give real name; adjust type as needed
public string SomePropertyName { get; set; } 
```

然后`form2`你可以这样做：

```
f3.SomePropertyName = "hello from form2"; 
```

或者

```
f3.SomePropertyName = someVariableInForm2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:35:39.933

男人，

尝试创建Form3的构造函数方法的重载，将来自form2的变量值作为方法参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:40:44.193

如果您已在 Form2 上公开了有问题的变量，那么您的问题是您也已将它们设为`static`. 当您将它们定义为`static`时，您将它们放置在类型 (Form2) 上而不是实例 (f2) 上。

从变量声明中删除静态，它们应该出现在 f2 的智能感知中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T17:46:09.537

> 我认为由于我将 f2 设为无模式形式，我应该能够通过简单地使用 f2.myvariables 来访问，但是智能感知并没有给我 f2 对象。这是为什么？

创建类的实例后，所有声明为 public 的变量和方法都应该可用。只需重新检查您是否已将变量声明为`public`.

> 由于所有值都是在运行时分配的，静态变量如何做到这一点？

不，静态变量和方法是在程序开始时定义的。它们不需要创建实例来引用它们。

# r - 将两个矩阵与 R 中的标准进行比较

> ID：12042309
> 
> 赞同：1
> 
> 时间：2012-08-20T17:36:18.990
> 
> 标签：r, matrix

我有两个矩阵

```
A
2 1 0
0 1 6
1 0 0
B 
1 1 3
4 2 8
2 0 1 
```

我想找出比较满足以下条件的 A 和 B 的元素：

```
if A[i,j] =0 and B[i,j]>0 
```

所以我的结果矩阵应该是

```
C
0 0 3
4 0 0
0 0 1 
```

除了 a 之外，什么是正确的方法来做到这一点`for loop`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T18:29:15.803

常规的逻辑和算术运算符对 R 中的矩阵按元素进行操作。只有 the`%*%`和 kronecker 运算符进行矩阵乘法。此外，您可以使用“[”和“[<-”函数索引矩阵：

```
> C <- B
> C[!( A==0 & B >0) ] <- 0
> C
     [,1] [,2] [,3]
[1,]    0    0    3
[2,]    4    0    0
[3,]    0    0    1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T17:44:43.297

如果这是真的，我不确定你想要哪个元素，所以我假设总和：

```
A <- matrix(c(2, 1, 0, 0, 1, 6, 1, 0, 0),3,3,byrow=TRUE)
B  <- matrix(c(1, 1, 3, 4, 2, 8, 2, 0, 1),3,3,byrow=TRUE)

C <- ifelse(A==0 & B>0, A+B, 0)
     [,1] [,2] [,3]
[1,]    0    0    3
[2,]    4    0    0
[3,]    0    0    1 
```

但更清晰的可能是使用`which`：

```
which(A==0 & B>0, arr.ind=TRUE)
     row col
[1,]   2   1
[2,]   1   3
[3,]   3   3 
```

# 编辑：

请注意，索引矩阵的正确方法是`A[i,j]`代替`A[i][j]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T17:45:04.607

在矩阵上使用简单的比较运算符。

重新创建数据，使用：

```
A <- as.matrix(read.table(text="
2 1 0
0 1 6
1 0 0"))

B <- as.matrix(read.table(text="
1 1 3
4 2 8
2 0 1")) 
```

执行比较：

```
A==0 & B>0
        V1    V2    V3
[1,] FALSE FALSE  TRUE
[2,]  TRUE FALSE FALSE
[3,] FALSE FALSE  TRUE 
```

然后使用`ifelse`：

```
ifelse(A==0 & B>0, B, 0)
     V1 V2 V3
[1,]  0  0  3
[2,]  4  0  0
[3,]  0  0  1 
```

# user-interface - 解决无法从 QT Designer 访问的样式问题

> ID：12042313
> 
> 赞同：0
> 
> 时间：2012-08-20T17:36:39.347
> 
> 标签：user-interface, qt4, pyqt4, qt-designer

我正在研究 QTreeWidget，但在`edit items...`上下文菜单中看不到列大小的属性。所以我想执行此步骤的最简洁方法是将应用程序代码附加到信号（而不是继承）。

我要附加什么信号。更具体地说，我应该附加什么信号来执行应该是视觉样式的一部分的代码，这些代码应该可以从 GUI Builder 编辑，但不是，或者要在 GUI builder 中进行建模。我想我正在寻找一个信号，它是用于进一步造型的一次性信号。

**编辑：**

我想我会坚持继承，如果我不应该，或者如果确实有一次性信号，请发布，并说明优点：D

# magento - Magento | 添加商品后，如何防止立即进入购物车页面？

> ID：12042318
> 
> 赞同：3
> 
> 时间：2012-08-20T17:37:10.303
> 
> 标签：magento, add, cart, shopping

我正在创建我的第一个电子商务网站，我正在使用 Magento 来做，但我不想在添加商品后直接进入购物车页面，我该怎么做？

非常感谢

PS 具体回答我刚开始使用 Magento

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-20T18:40:50.943

这只是一个配置设置。 `System -> Configuration -> Sales tab -> Checkout`然后`in the Shopping Cart tab you set the After Adding a Product Redirect to Shopping Cart`到No. Easy！祝大 M 好运 :)

# connection - 如何确定消息是由 QuickFix 发送的

> ID：12042320
> 
> 赞同：0
> 
> 时间：2012-08-20T17:37:21.480
> 
> 标签：connection, quickfix

实际上我的问题涉及网络连接。假设我的程序正在发送一些消息，而此时网络连接已关闭。我意识到，QuickFix 通过 Application.onLogout 通知我。但我可能会在收到 onLogout 之前调用 Session.sendToTarget。这是一个困难的情况，我需要确切地知道我的信息是否已发送。有没有办法确定这一点？

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:37:11.190

Pelasse 看看这里： [如何确定消息是否通过 QuickFIX 发送](https://stackoverflow.com/questions/11101819/how-to-determine-if-message-is-sent-through-quickfix)

并将您的注意力放在心跳消息上。

# objective-c - 分配后返回null的类的NSString？

> ID：12042321
> 
> 赞同：0
> 
> 时间：2012-08-20T17:37:22.077
> 
> 标签：objective-c, xcode, class, nsstring

我在将值分配给字符串然后将它们取回时遇到问题。该字符串是一个类的属性，因为我需要将它传递给其他视图控制器。（我已经尝试过 Core Data，但它也没有工作，这似乎更简单。）

字符串的类是这样的：

```
.h    
@interface GameInformation : NSObject

@property (nonatomic, retain) NSString *word;
@property (nonatomic, retain) NSString *mode;

@end

.m
@implementation GameInformation

@synthesize mode = _mode;
@synthesize word = _word;

@end 
```

很简单。应用委托中的相关代码：

```
GameInformation *gameInfo = [GameInformation alloc].init;
optionsView.gameInfo = gameInfo;
oneBox.gameInfo = gameInfo;
twoBox.gameInfo = gameInfo; 
```

依此类推，直到我涵盖了所有控制器。选项视图是我设置字符串值并测试这些值的地方。

```
GameInformation *info = [self gameInfo];
UISegmentedControl *selectMode = [self mode];
UISegmentedControl *gameWord = [self word];
if (selectMode.selectedSegmentIndex == 0)
{
    info.mode = @"regular";
} else if (selectMode.selectedSegmentIndex == 1) {
    info.mode = @"wordTap";
}
if (gameWord.selectedSegmentIndex == 0)
{
    info.word = @"regular";
} else if (gameWord.selectedSegmentIndex == 1) {
    info.word = @"hat";
} else if (gameWord.selectedSegmentIndex == 2) {
    info.word = @"dog";
} else if (gameWord.selectedSegmentIndex == 3) {
    info.word = @"book";
} else if (gameWord.selectedSegmentIndex == 4) {
    info.word = @"bus";
} else if (gameWord.selectedSegmentIndex == 5) {
    info.word = @"cup";
} else if (gameWord.selectedSegmentIndex == 6) {
    info.word = @"pig";
}

NSLog(@"%@", info.mode);
NSLog(@"%@", info.word); 
```

当这些被传递时，日志显示为空。我试过 [info setWord:@"regular"]; 和 [info setMode@"regular"]; 但那些也没有用。

我还没有尝试使用一盒、两盒等控制器中的字符串，因为测试返回 null。

所以。我究竟做错了什么？还是我在叫错树？而且，就像我之前说的，尝试为此使用核心数据是行不通的，这似乎是一种更简单的方法。

提前致谢！

编辑：谢谢大家的快速评论！我在信息上做了一个 NSLog，它确实是空的。我还将声明更改为复制而不是保留，并更改了 alloc 语句中的点表示法。alloc 语句位于应用程序委托的 didFinsihLaunchingWithOptions 中。那是错误的地方吗？

再次感谢您的帮助！

# java - 无法理解 IndexOutOfBoundsException

> ID：12042325
> 
> 赞同：0
> 
> 时间：2012-08-20T17:37:54.017
> 
> 标签：java, android, indexoutofboundsexception

我不知道这是否是一个简单的问题，但我就是看不出问题所在。我现在从 Google Play 中的应用程序中收到了三份关于 IndexOutOfBoundsException 的报告`points.get(++i)`。

```
public GameThread(SurfaceHolder sHolder, Context context, Handler handler)
{
    points = new ArrayList<Float>();
    running = true;
    mSurfaceHolder = sHolder;
}
protected void doDraw(Canvas canvas)
{
    Paint p = new Paint();
    p.setStyle(Paint.Style.FILL);
    p.setColor(Color.WHITE);

    for (int i = 0; i < points.size(); i++)
    {
        float x = points.get(i);
        float y = points.get(++i);

        canvas.drawPoint(x, y, p);
    }
}

public boolean onTouchEvent(MotionEvent event)
{   
    float x = event.getX();
    float y = event.getY();

    points.add(x);
    points.add(y);

    return true;
} 
```

它失败的索引是试图访问与其大小相等的位置（实际上一个错误说 `java.lang.IndexOutOfBoundsException: Invalid index 2205, size is 2206`这对我来说根本没有意义），并且它的大小会有所不同。

我能看到这种情况发生的唯一方法是，如果由于某种原因只将一个对象添加到点，我不知道为什么会发生这种情况。`onTouchEvent`不是在自己的线程中运行，是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:43:58.477

问题出在这一行：

```
float y = points.get(++i); 
```

当 时`i = points.size()-1`，您预增量，然后调用`points.get(++i);`。此时，`i = points.size()`=> 越界。只需删除`++`即可修复它。

**编辑** 或者，您可以尝试这种方法：

```
List<Point> points = ...

protected void doDraw(Canvas canvas) {
   Paint p = new Paint();
   p.setStyle(Paint.Style.FILL);
   p.setColor(Color.WHITE);

   for (Point p : points) {
      canvas.drawPoint(p.x, p.y, p);
   }
}

public boolean onTouchEvent(MotionEvent event) {   
   float x = event.getX();
   float y = event.getY();

   points.add(new Point(x, y));

   return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:45:51.970

我会通过让 for 循环构造处理所有变量逻辑来使 for 循环免受此类问题的影响`i`，不要尝试自己做。

```
for (int i = 0; i+1 < points.size(); i+=2){
    float x = points.get(i);
    float y = points.get(i+1);

    canvas.drawPoint(x, y, p);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:41:38.040

您的问题出在您的 for 循环中。虽然第一次访问可以工作，但不能保证第二次访问是正确的。如果您只有一个对象，则循环无法工作，因为您试图访问数组中不存在的下一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T17:44:57.277

假设您的数组长度为**10**

```
 float y = points.get(++i); 
```

你可以用^^^替换这个语句

```
float y = points.get(i+1); 
```

您在这里和这里都增加了 Y 的值

```
for (int i = 0; i < points.size(); i++)
                                   ^^^ 
```

在 for 循环中，它检查是否`i<points.size()`意味着**9**或小于**9**

当您到达**9** 并在 for 循环中您正在访问`points.get(++i);` 它时，您将访问`points.get(10)`<-------- 在这里您会遇到异常

你的arry是**0-9**然后在**10没有元素**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T17:45:32.157

尝试

```
 for (int i = 0; i < points.size()-1; i++) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T17:50:53.563

正确使用您的 Point 对象，例如：

```
Point point = new Point();

point.x = value;
point.y = value; 
```

打印或使用.. 它只是 point.x 和 point.y 仍然。（在 的情况下`android.graphics.Point;`）

如果要存储多个点，可以使用例如 ArrayList

```
ArrayList<Point> pointArray = new ArrayList<Point>();
pointArray.add(new Point(event.getX(), event.getY())); 
```

循环它：

```
 for(Point p : pointArray){
        // do something with p.x and p.y
    } 
```

# java - Richfaces 扩展数据表

> ID：12042329
> 
> 赞同：0
> 
> 时间：2012-08-20T17:38:59.553
> 
> 标签：java, jsf, jakarta-ee, richfaces

是否可以在 RichFaces ExtendedDataTable 中实现分组标题，因为它不支持 rowbreakbefore。

我试过以下

```
<rich:extendedDataTable id="pivotTable" rowIndexVar="rowIndex">
        <c:forEach items="#{richPivotBean.headerRows}" var="columnObject">
            <rich:column breakrowbefore="#{columnobject.startone}"
                colspan="#{columnobject.colspan}" rowspan="#{columnobject.rowspan}">
                <f:facet name="header">
                    <h:outputText value="#{columnobject.colheadertext}" />
                </f:facet>
            </rich:column>
        </c:forEach>
    </rich:extendedDataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:51:19.720

恐怕答案是简单的“否”，您需要使用rich:dataTable 来获得此功能。为什么您使用extendedDataTable 而不是dataTable，通常这将用于滚动或行选择，但我在您的代码中没有看到这方面的证据。

# php - 我的抽象类正在发送输出？

> ID：12042330
> 
> 赞同：0
> 
> 时间：2012-08-20T17:38:59.547
> 
> 标签：php, http-headers, abstract-class

我无法更改标题，因为显然我的抽象类正在开始输出。为什么会开始输出？这是5.4的错误吗？

```
namespace Lume\Abstracts;
abstract class Chain{
    abstract protected static function GetSelf();//the line that is starting output
    abstract protected static function SetSelf();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:46:46.543

您可能在 PHP tags 之前或之后添加了一些空格/换行符。

尝试删除结束标签 ?> 以防万一。

如果这没有帮助，请发布确切的错误和文件代码。

# sql - 如果有一条记录为 0，则在 sql 中选择应该给出 false。可能吗？

> ID：12042331
> 
> 赞同：1
> 
> 时间：2012-08-20T17:38:59.960
> 
> 标签：sql

我正在尝试 SQL Server 2005 中的选择语句。我有“IsConfirmed”和“Amount”列。我的目标是获取每天所有金额的总和以及应该计算的布尔值。如果 IsConfirmed 为 0，则将当天 Isconfirmed 的值为 0，或者如果当天所有记录均为 1，则给我 1。在 sql 中是否有这种解决方案的方法。先感谢您..

```
Select sum(Amount) from RepAmount
where ComID = 1234
group by RD.Date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:46:59.397

```
Select 
   sum(Amount),
   CASE WHEN SUM(CAST(IsConfirmed As int)) = COUNT(*) THEN
     1
   ELSE
     0
   END As IsConfirmed
from RepAmount
where ComID = 1234
group by RD.Date 
```

# linux - Bash 脚本“找不到 fi 行”

> ID：12042335
> 
> 赞同：0
> 
> 时间：2012-08-20T17:39:10.570
> 
> 标签：linux, bash

这是我的第一个 bash 脚本，基本上它只是关闭了我的第二个监视器。但是我一直遇到问题，因为当我运行它时它一直给我错误。

```
#!/bin/bash

read -p "Do you want the 2nd monitor on or off? " ON_OFF

if [$ON_OFF == on]; then
xrandr --output DVI-I-3 --auto --right-of DVI-I-0
echo "done"
fi

if [$ON_OFF == off]; then
xrandr --output DVI-I-3 --off   
echo "done"
fi 
```

当我运行它时，我得到

```
monitor_control.sh: 11: [[off: not found
monitor_control.sh: 16: [[off: not found 
```

谁能向我解释为什么它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T17:44:53.957

您需要在`[`和周围添加空格`]`，因为它们是 bash 中的单独命令。

此外，需要在参数扩展周围使用引号，或者需要使用引号`[[ ]]`代替`[ ]`.

也就是说，您可以使用：

```
if [[ $ON_OFF = on ]] 
```

...或者您可以使用：

```
if [ "$ON_OFF" = on ] 
```

否则如果`$ON_OFF`为空会报错。

最后，最好使用`if ... then ... else ... fi`，例如：

```
if [[ $ON_OFF = on ]]; then
    xrandr --output DVI-I-3 --auto --right-of DVI-I-0
else
    xrandr --output DVI-I-3 --off   
fi
echo "done." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:41:44.300

这应该有效。

```
#!/bin/bash

echo -n "Do you want the 2nd monitor on or off? "
read ON_OFF;

if [ $ON_OFF == "on" ]; then
  xrandr --output DVI-I-3 --auto --right-of DVI-I-0
  echo "done"
fi

if [ $ON_OFF == "off" ]; then
  xrandr --output DVI-I-3 --off
  echo "done"
fi 
```

# visual-c++ - 新程序员需要帮助增加整数。视觉 C++

> ID：12042337
> 
> 赞同：0
> 
> 时间：2012-08-20T17:39:27.663
> 
> 标签：visual-c++, c++-cli, opacity

我目前正忙于为我一直在计划的游戏制作标题屏幕。

表单加载和 TMRopI（计时器）开始计时，增加表单的不透明度，创建淡入效果，并在表单上显示徽标。每次计时器滴答作响，一个整数都会增加 1（或者至少应该如此）。图片框应该在整数达到 150 后变得可见（当整数等于 100 时，表单处于完全不透明状态），在图片更改之前创建一个暂停。唯一的问题是，它似乎完全忽略了我的整数。

```
private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {

             TMRopI->Enabled=true;
         }
private: System::Void TMRopI_Tick(System::Object^  sender, System::EventArgs^  e) {

             int num=0;
             num+=1;
             this->Opacity+=0.01;

             if (num >= 150)
                 PBXtitle->Visible=true;
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:52:23.120

另一种选择是更改 to 的`num`定义`static`。但是，制作`num`类的成员变量是更多的`C++`方法。

```
static int num=0;
num+=1;
this->Opacity+=0.01;

if (num >= 150)
    PBXtitle->Visible=true; 
```

这样，`num`在第一次调用该函数时设置为 0，并在后续调用之间保存它的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:41:37.710

如所写，`num`在方法中将始终为 1 `TMRopI_Tick`。您应该在调用方法中声明它并通过引用将其作为参数传递。或者，正如@Matt 在评论中指出的那样，将其声明为该类的成员。

**编辑**您当前的声明将`num`其创建为局部变量。每次调用方法时都会“创建”它，并在方法结束后立即“销毁”它。因此，每次调用该方法时，它都会从零开始，然后递增到一。例如，如果`TMRopI_Tick`在另一个方法的循环内重复调用，您可以`num`在该调用方法中将其定义为局部变量。然后它将在该方法的持续时间内存在。然后，如果您将它传递给`TMRopI_Tick`（通过引用），它将被递增，并且它的范围（将其视为它的“生命”）将存在于每个调用的整个（和之后）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T17:43:42.690

```
int num=0 
```

每次都将 num 设置为 0，不是吗？

# c++ - GTIFWriteKeys 和 GTIFKeySet libgeotiff 函数 (C++) 的返回值表示什么？

> ID：12042338
> 
> 赞同：1
> 
> 时间：2012-08-20T17:39:29.347
> 
> 标签：c++, geotiff

在（部分）libgeotiff API[文档](http://www.remotesensing.org/geotiff/api/geotiff_8h.html#a3fa3e3e55cf8ddb6aa035b8f17a25f35)中，没有说明以下函数的返回值的含义：

*   GTIFWriteKeys
*   GTIF 密钥集

这些函数将返回哪些可能的返回值？这些值是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:39:29.347

我必须深入研究源代码才能弄清楚这些，我猜其他人可能会从这些信息中受益。简单的答案是，这两个函数都将返回 1 表示成功，0 表示失败。这是直截了当的，但是由于 libtiff 的返回值对各种函数的含义有所不同，我不确定 libgeotiff 将如何处理这些。

# php - 将 MySQL 数组拆分为相等的部分

> ID：12042340
> 
> 赞同：-1
> 
> 时间：2012-08-20T17:39:30.987
> 
> 标签：php, mysql, html-lists

我有一些使用 PHP 的 mySQL 输出，看起来像这样：

```
 $sqlCommand = "SELECT id, linklabel FROM pages WHERE showing='1' ORDER BY id ASC"; 
    $query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error()); 

    $menuDisplay = '';
    while ($row = mysqli_fetch_array($query)) { 
        $pid = $row["id"];
        $linklabel = $row["linklabel"];

        $menuDisplay .= '<li><a href="index.php?pid=' . $pid . '">' . $linklabel . '</a></li>';

    } 
    mysqli_free_result($query); 
```

但我想在三个 UL 之间拆分我的输出，而不是将其全部包含在一个 UL 中。任何想法如何做到这一点？

澄清一下：我有上面的代码输出：

```
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul> 
```

我想要这个输出：

```
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul> 
```

如果项目数量不均匀，最后一个 UL 应该更短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:43:57.087

你的问题很模糊，据你了解，解决问题的一种方法是每次将消息分成三个“子消息”的块。我认为最好的选择是创建一个数组，当它的每个单元格包含一个子消息。您可能会发现此代码很有帮助：

```
 $sqlCommand = "SELECT id, linklabel FROM pages WHERE showing='1' ORDER BY id ASC"; 
    $query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error()); 

    $menuDisplay = '';
    $output_count = 0 ; // count output
    $output_array = array () ; //every 3 loops we'll insert the output to this array
    while ($row = mysqli_fetch_array($query)) { 
        $output_count++ ; //update count value
        $pid = $row["id"];
        $linklabel = $row["linklabel"];
        $menuDisplay .= '<li><a href="index.php?pid=' . $pid . '">' . $linklabel .'</a></li>';
        array_push($output_array, $menuDisplay) ; // insert current message to array
    } 

$arrry_size = sizeof($output_array);
$count = 0 ;
$currentMessage = '' ;
for($i = 0 ; $i < $array_size ; $i++){
    $count ++ ;
    if($count >= $array_size / 3){
        echo $currentMessage ; //you could save it in an array or do whatever you want
        $currentMessage = '' ;
        $count = 0;
       }

   if($count == $array_size-1 ) // in case we've achieved the last index of the array
      echo currentMessage ;
   $currentMessage.= $output_array[$i];
}

    mysqli_free_result($query); 
```

# http - .htaccess 路由到服务器上的子目录？性能/加载时间

> ID：12042347
> 
> 赞同：2
> 
> 时间：2012-08-20T17:39:57.183
> 
> 标签：http, .htaccess, routing, webserver

我想知道是否可以使用 .htaccess 文件将我的域直接路由到我服务器上的子目录？

我从一个普通的 webhoster 购买了一个 webhosting 包，我的 domain.com 连接到我的服务器的根目录。我想知道是否有可能以某种方式将 .htaccess 文件上传到我服务器上的根目录，该文件会自动将 domain.com（/index.php 或 /index.html）路由到 domain.com/some-directory/ ...</p >

当然，我不希望地址栏更新到 domain.com/some-directory。我希望我的常规域只是从子目录而不是我的根目录中获取它的文件。

只是为了更好地了解我的服务器。

同样，当调用 mydomain.com 时，它会从我的服务器上的根目录呈现 index.html（或 .php）。但是我希望 mydomain.com 呈现 /subdirectory/index.html。

如果这是可能的，我该怎么做？这在某种程度上是不是很糟糕？有没有我没有想到的东西，例如，这种方法是否有更长的加载时间或类似的东西？

先感谢您。马特

更新：或者这可以通过我的网络管理面板上的 DNS 设置来实现。我能够编辑所有 DNS 条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:55:52.173

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/some-directory/
RewriteCond %{DOCUMENT_ROOT}/some-directory%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/some-directory%{REQUEST_URI} -d
RewriteRule ^(.*)$ /some-directory/$1 [L] 
```

请记住，如果您尝试访问一个目录并且缺少尾部斜杠，mod_dir 会将浏览器重定向到带有尾部斜杠的 URL，并显示“/some-directory/”。

* * *

编辑

此外， 2`-f`和`-d`条件是为了确保请求实际上是针对存在的资源。这不是必需的，如果您有更多带有重写规则的 htaccess 文件，您可能不想要这些。他们确保如果有人请求一些虚假 URL，404 消息将在目录**之外处理。**`/some-directory/`否则 404 消息将显示以下内容：

> 在此服务器上未找到请求的 URL /some-directory/blahblahblah。

暴露所有东西都在被路由通过`/some-directory/`。

# java - 使用 Java 从字符串中检索月、日和年值

> ID：12042352
> 
> 赞同：15
> 
> 时间：2012-08-20T17:40:28.430
> 
> 标签：java, string, date

如何从字符串中提取日、月和年值 [如 18/08/2012]。我尝试使用 SimpleDateFormat，但它返回一个 Date 对象，并且我观察到所有 Get 方法都已弃用。有没有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T17:44:19.593

我个人会使用[Joda Time](http://joda-time.sf.net)，这让生活变得相当简单。特别是，这意味着您无需担心`Calendar`a 的时区与 a 的时区`SimpleDateFormat`- 您只需解析为 a `LocalDate`，这就是数据*真正*向您显示的内容。这也意味着您不必担心月份是从 0 开始的 :)

Joda Time 使许多日期/时间操作更加愉快。

```
import java.util.*;
import org.joda.time.*;
import org.joda.time.format.*;

public class Test {

    public static void main(String[] args) throws Exception {
        DateTimeFormatter formatter = DateTimeFormat.forPattern("dd/MM/yyyy")
            .withLocale(Locale.UK);

        LocalDate date = formatter.parseLocalDate("18/08/2012");

        System.out.println(date.getYear());  // 2012
        System.out.println(date.getMonthOfYear()); // 8
        System.out.println(date.getDayOfMonth());   // 18
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-20T18:04:12.677

简单地去`String.split()`，

```
String str[] = "18/08/2012".split("/");
int day = Integer.parseInt(str[0]);
int month = Integer.parseInt(str[1]);
..... and so on 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-20T17:58:48.523

这应该让您无需添加外部罐子即可

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");  
Date parse = sdf.parse("18/08/2012");  
Calendar c = Calendar.getInstance();  
c.setTime(parse);  
System.out.println(c.get(Calendar.MONTH) + c.get(Calendar.DATE) + c.get(Calendar.YEAR)); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-20T17:41:45.167

按如下方式创建该日期之外的 java.util.Calendar 对象并提取日期部分：

```
Calendar cal = Calendar.getInstance();
cal.setTime(<date from simple-date-format).
cal.get(Calendar.MONTH); 
```

ETC。，

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-19T21:54:17.230

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-20T17:42:01.050

另一种方法可能是使用[Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)对象`get(Calendar.MONT)`

例子：

```
Calendar cal = Calendar.getInstance();
cal.setTime(dateObj).
cal.get(Calendar.MONTH); 
```

（或者）

您也可以使用[String.split()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-18T09:12:02.473

使用它并传递日期值

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy",Locale.getDefault());
Date parse = sdf.parse("18/01/2018");
Calendar calendar = Calendar.getInstance();
calendar.setTime(parse);
int date = calendar.get(Calendar.DATE);
//+1 Is Important Because if the month is January then coming 0 so Add +1
int month = calendar.get(Calendar.MONTH)+1;
int year = calendar.get(Calendar.YEAR);
System.out.println("Date:"+date +":Month:"+ month + ":Year:"+year); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-25T07:08:03.513

在其中，字符串以元素的形式存储在一个数组中，并且在 split() 函数的帮助下，我将它分离并从数组 str[] 中检索并存储在 3 个不同的变量日、月和年中。

导入 java.util.*；

```
public class date {

    public static void main(String[] args) throws Exception {
        String str[] = "18/08/2012".split("/");
        int day = Integer.parseInt(str[0]);
        int month = Integer.parseInt(str[1]);
        int year = Integer.parseInt(str[2]);
        System.out.println(day);
        System.out.println(month);
        System.out.println(year);
    }
} 
```

# javascript - js中的本地化字符串消息

> ID：12042353
> 
> 赞同：1
> 
> 时间：2012-08-20T17:40:43.390
> 
> 标签：javascript, asp.net-mvc, html.actionlink

我有这样的 mvc actionLink

```
@Html.ActionLink("Delete", "Delete", 
   new { id = item.Id }, 
   new { onclick = "return confirm('Are you sure you wish to delete this article?');" }) 
```

现在，我想将`@Localized.AreYouSure`字符串放入返回确认部分。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:46:39.570

我想这就是你想要/的意思：

```
@Html.ActionLink("Delete", "Delete",
   new { id = item.Id },
   new { onclick = "return confirm('" + Localized.AreYouSure + "');" }) 
```

# algorithm - 动态规划的记忆法或制表法

> ID：12042356
> 
> 赞同：27
> 
> 时间：2012-08-20T17:40:51.417
> 
> 标签：algorithm, recursion, time-complexity, dynamic-programming

有许多问题可以使用动态规划来解决，例如最长递增子序列。这个问题可以用2种方法解决

1.  记忆化（自上而下） - 使用递归解决子问题并将结果存储在某个哈希表中。
2.  制表（自下而上） - 使用迭代方法通过首先解决较小的子问题，然后在执行更大的问题时使用它来解决问题。

我的问题是在时间和空间复杂性方面哪种方法更好？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-20T18:15:59.020

简短的回答：**这取决于问题！**

*记忆化*通常需要更多代码并且不太直接，但在某些问题中具有计算优势，主要是那些您*不需要*计算整个矩阵的所有值即可得出答案的问题。

*制表*更直接，但可能会计算不必要的值。但是，如果您确实需要计算所有值，则此方法通常更快，因为开销较小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:10:04.817

假设您使用相同的递归关系，自上而下的动态编程实现渐近与自下而上相同。然而，由于在记忆中使用递归的开销，自底向上通常更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-25T02:58:10.150

首先了解**什么是动态规划？** 如果手头的问题可以分解为解决方案也是最优的子问题，并且可以组合以达到原始/更大问题的解决方案。对于此类问题，我们可以应用动态规划。它是通过将子问题的结果存储在程序内存中并重用它而不是在以后重新计算它来解决问题的方法。

请记住，动态编程使用的理想情况是，您可以多次重复使用子问题的解决方案，否则，存储结果就没有意义了。

现在，动态规划可以应用于**自下而上的方法（制表）**和**自上而下的方法（记忆）**。

**制表**：我们从计算最小子问题的解决方案开始，一次升级一个级别。基本上遵循自下而上的方法。请注意，我们正在详尽地为每个子问题寻找解决方案，但不知道将来是否真的需要它们。

**记忆**：我们从最初的问题开始，不断地把它分解到一个我们知道解决方案的基本案例。在大多数情况下，这种分解（**自上而下的方法**）是递归的。因此，如果问题是由于递归调用而使用每个步骤的子解决方案，则花费的时间会更慢。但是，如果当时不需要所有子解决方案，则记忆化比制表表现更好。

我发现这个短片很有帮助：[https ://youtu.be/p4VRynhZYIE](https://youtu.be/p4VRynhZYIE)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-08-20T19:57:38.863

如果问题有`overlapping sub-problems`属性，则使用`Memoization`，否则取决于问题

# php - 从另一个浏览器拖放图像以获取 imgur api？

> ID：12042358
> 
> 赞同：1
> 
> 时间：2012-08-20T17:40:55.903
> 
> 标签：php, javascript, jquery, imgur

以下代码来自专门用于在**imgur.com**上上传图像的页面。这是一个来自网络的模型，你可以从你的**电脑上****拖放图像**而没有任何问题。我的问题是：我需要添加什么代码才能从另一个浏览器**拖放图像？**

 ****```
 <!DOCTYPE html>
<html>
<head>
<meta charset="utf8">
<title>Upload</title>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>.

    <style>
    body {text-align: center; padding-top: 100px;}
    div { border: 10px solid black; text-align: center; line-height: 100px; width: 200px; margin: auto; font-size: 40px; display: inline-block;}
    #link, p , div {display: none}
    div {display: inline-block;}
    .uploading div {display: none}
    .uploaded div {display: none}
    .uploading p {display: inline}
    .uploaded #link {display: inline}
    </style>

<script>
window.ondragover = function(e) {e.preventDefault()}
window.ondrop = function(e) {e.preventDefault(); upload(e.dataTransfer.files[0]); }
function upload(file) {

    if (!file || !file.type.match(/image.*/)) return;

    document.body.className = "uploading";

    var fd = new FormData();
    fd.append("image", file);
    fd.append("key", "myapicode");
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://api.imgur.com/2/upload.json");
    xhr.onload = function() {

    document.querySelector("#link").href = JSON.parse(xhr.responseText).upload.links.imgur_page;

    var test = JSON.parse(xhr.responseText).upload.links.imgur_page;

    var dataString = 'content=' + test + '&page=something';
    $.ajax({
    type: "POST",
    url: "upload.img.php",
    data: dataString,
    cache: false,
    success: function(html){
    }
    });
    document.body.className = "uploaded";
    }
    xhr.send(fd);
}
</script>

</head>
<body>

<div>DROP!<button onclick="document.querySelector('input').click()">Or click</button></div>
<input style="visibility:collapse;width:0px;" type="file" onchange="upload(this.files[0])">
<p>Uploading...</p>
<a id="link">Its online!!!</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:52:29.693

并非所有浏览器都支持这一点，但 Firefox 允许您将图像从浏览器拖到另一个浏览器或您的计算机上，而 Chrome 不允许您将图像拖出浏览器。

这个[页面](http://base64img.com/#encode)有一个所谓的 dropzone，在 Chrome 中打开它并在 Firefox 中打开一个图像，您可以将图像直接从 Firefox 拖到 Chrome，但是它似乎无法反过来工作。

[脚本](http://base64img.com/base64.js)注释很好，应该会给你一些想法，拖放的东西基本上是这样设置的：

```
var dropzone;  
    dropzone = document.getElementById("dropzone");  
    dropzone.addEventListener("dragenter", dragin, false);
    dropzone.addEventListener("dragleave", dragout, false);
    dropzone.addEventListener("dragover", stopPropagation, false);
    dropzone.addEventListener("drop", drop, false); 
```

其中`dragin`,`dragout`等`drop`是对您将在脚本中找到的那些事件调用的函数。****

# java - 刷新页面一两次后，我没有看到提交的数据：ArrayList 如何自行为空？

> ID：12042362
> 
> 赞同：0
> 
> 时间：2012-08-20T17:41:24.957
> 
> 标签：java, jsp, arraylist

我必须通过网站的控制面板提交一些链接，它们应该会自动出现在 jsp 页面中，下次用户刷新它时。为此，我在粘贴链接后单击提交按钮，生成一个发布请求并servlet 通过从自身调用 bean 的函数来处理该链接，并将链接存储在 ArrayList 中。

*servlet 的片段*

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
   String link = request.getParameter("song link");
   StoreSongLink store = new StoreSongLink(); // A Bean class
   int ret = store.storeSongLink(link); // calls the bean method
   // if ret is 0,return to the cpanel home page 
```

*豆类*

```
public class StoreSongLink {
public static ArrayList<String> linkList = new ArrayList<String>();

 public int storeSongLink(String link) {
    linkList.add(link);
    return 0;
 }   
} 
```

在此之后，我尝试将提交的链接获取为*（在 jsp 页面中）*：

```
 <%! ArrayList<String> songList = new ArrayList<String>(); %>

       <%
           songList = StoreSongLink.linkList;
       %> 

       <% for (String links : songList){ %>
             <li><%= links%></li>
       <%}%> 
```

我看到链接提交了一两次，然后在我刷新同一页面后它消失了，我看到还没有提交任何链接的消息！为什么会这样？我知道这可能不是最好的方法，但我仍然想这样做。

为什么我刷新页面后看不到提交的链接？ArrayList 中的数据是如何丢失的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:10:23.463

从会话或类似的东西中获取 StoreSongLink 实例。

```
StoreSongLink store = (StoreSongLink)request.getSession().getAttribute("storeSongLink");
if (store == null)
{
   store = new StoreSongLink();
   request.getSession().setAttribute("storeSongLink", store);
} 
```

或者，您可以使用单例模式来创建/获取 StoreSongLink 实例。此外，明智的做法是重构 storeSongLink 方法并避免 JSP 中的 scriptlet。有很多框架将代码和布局分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:46:03.607

您在 servlet 中创建的 StoreSongLink 对象的范围仅限于该特定调用。您将这个对象或其内容存储在哪里？您需要将其放入会话或数据库中，具体取决于您期望的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:05:54.537

看起来您想在每个会话中实例化一次 SongStoreLink 。在创建对象之前，您应该从会话中检索它，如果找到则使用它，否则创建对象并将其保存在会话中。

# git - Cygwin git fork() 拉取错误

> ID：12042363
> 
> 赞同：24
> 
> 时间：2012-08-20T17:41:32.863
> 
> 标签：git, cygwin

基本问题是有时当我这样做时

```
git pull upstream master 
```

我明白了

```
remote: Counting objects: 172, done.
remote: Compressing objects: 100% (57/57), done.
remote: Total 119 (delta 45), reused 95 (delta 21)
      0 [main] git 8660 fork: child -1 - forked process 4520 died unexpectedly, retry 0, exit code -1073741515, errno 11
error: cannot fork() for index-pack: Resource temporarily unavailable
fatal: fetch-pack: unable to fork off index-pack 
```

每次退出代码都是相同的，对象的数量当然会随着进程的数量而变化。我在 Windows 7 上通过 ssh 对 github 进行公钥身份验证。无论有无 ssh-agent，都会发生这种情况。几个月来我一直遇到这个问题，并通过切换到运行 Git Bash (MingW32) 来解决它，每当它出现时（几乎每次都有一些存储库，偶尔或从不使用其他存储库）。但是，我通常更喜欢 Cygwin 环境，并且我的大部分东西都在那里设置，所以当我被迫这样做时，这是一个拖累。

不久前，我看到这篇文章[http://cygwin.com/ml/cygwin/2012-03/msg00025.html](http://cygwin.com/ml/cygwin/2012-03/msg00025.html)并在阅读后希望下次我更新 Cygwin 时该修复程序也能解决我的问题。它没有，但我不确定修复程序是否已发布，但我今天再次更新并且它正在发生。

我注意到网络上有大量关于与 Cygwin git 的 fork() 相关的错误的电子邮件，但没有用于拉取，所以我的问题是，以前有没有人在拉取时看到过这个，是什么原因造成的？有什么方法可以防止它发生（除了修补 git 或 cygwin 或使用其他一些实施课程:)）。

有趣的是，我完全没有看到可以在网络上找到相关 Cygwin/git 邮件的错误。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-12T23:59:26.553

这是在这里解决的：http: [//cygwin.wikia.com/wiki/Rebaseall](http://cygwin.wikia.com/wiki/Rebaseall)

简而言之，关闭所有窗口并运行：

```
C:\cygwin\bin\dash.exe -c '/usr/bin/rebaseall -v' 
```

这解决了与分叉相关的所有问题。我从 emacs 和 git 分叉 aspell 时遇到了问题。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-07T18:58:02.027

好的，我想我应该分享一下。我有同样的问题，但我有一个解决方法。问题似乎是PATH的长度。如果我执行 git pull，我会遇到 fork 失败：

```
$ git pull*强调文本*
      2 [main] git 7384 fork: child -1 - fork 进程 7420 意外死亡，重试 0，退出代码 -1073741515，errno 11
错误：无法 fork() for rev-list：资源暂时不可用
错误：无法运行“git rev-list”
远程：计数对象：728，完成。
远程：压缩对象：100% (456/456)，完成。
 907550 [main] git 7384 fork: child -1 - fork 进程 7436 意外死亡，重试 0，退出代码 -1073741515，errno 11
错误：无法 fork() 用于索引包：资源暂时不可用
致命：提取包：无法分叉索引包

```

但是，如果我在运行 git 之前将 PATH 设置为非常小的值，它会起作用：

```
$ PATH=/usr/bin git pull
远程：计数对象：728，完成。
远程：压缩对象：100% (456/456)，完成。
远程：总计 464（增量 337），重复使用 9（增量 6）
接收对象：100% (464/464)，153.36 KiB，完成。
解决增量：100% (337/337)，完成了 107 个本地对象。
来自 git://cmake.org/cmake

```

如果它适用于你们中的任何人，我会感兴趣吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-23T12:43:46.730

我也遇到了同样的问题，重启系统解决了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-16T20:14:30.153

我知道已经过去了一段时间，但我发现这是使用 MobaXterm 应用程序内置的 cygwin 平台搜索我自己非常相似的问题。正在拉出我不存在的头发试图弄清楚，最后它通过简单的重新启动来修复。

我再次验证了这适用于第二台 Windows 10 机器、新安装的 MobaXterm + git 应用程序以及尝试从 github 存储库中提取。相同的错误：“错误：不能 fork() for index-pack：资源暂时不可用”已实现，并且简单的计算机重启修复了它。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-08-28T04:50:48.790

而不是设置 PATH 变量或使用 git 的完整路径（一次），这应该也可以：

```
git=`which git`
git pull 
```

这会将 git 分配给连续调用的完整路径。现在，如果 git 在另一个程序中使用（比如 make），它就可以了。

# c# - 如何使用 C# 中的 ColdFusion Web 服务？

> ID：12042369
> 
> 赞同：15
> 
> 时间：2012-08-20T17:41:46.340
> 
> 标签：c#, web-services, coldfusion

我正在尝试将 webservice 与 endpoint 一起使用`https://services.example.com/ASP_SecureWebServices.cfc?wsdl`。

在文档中我有这个：

### 要求

```
<authorise>
  <site>xxx</site>
  <login>xxx</login>
  <password>xxx</password>
  <partnerid>xxx</partnerid>
  <wstype>xpt_exhibitors</wstype>
</authorise> 
```

### 认证响应

```
<authorisation>
  <service>getAuthToken</service>
  <authorised>OK</authorised>
  <authtoken>255461</authtoken>
</authorisation> 
```

我以前从未使用过 ColdFusion，所以我不明白如何提出请求。有人可以帮忙吗？

我添加了这样的服务参考：

![截屏](../Images/79b57f0fca89ac6aac74c96426ac1fab.png)

但我没有得到这个方法：

![截屏](../Images/9acb59ff3b40d1310cf3a282626438e0.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T18:24:00.007

您实际上是直接点击 CFC，但您在末尾添加 ?wsdl 以使其实际返回 WSDL。

此外，您希望访问的 CFC 中的所有方法都需要`access="remote"`.

所以你的实际端点会更接近这个：

```
https://services.example.com/ASP_SecureWebServices.cfc?wsdl 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T17:27:55.513

打算出去走走，但我从文档中猜测是您需要访问的方法被称为`authorise`. 考虑到这一点，您将按如下方式调用 Web 服务：

```
https://services.example.com/ASP_SecureWebServices.cfc?method=authorise&site=xxx&login=xxx&password=xxx&partnerid=xxx&wstype=xpt_exhibitors 
```

默认情况下，ColdFusion 会返回一个 WDDX 数据包；如果您想要 JSON，请添加`&returnformat=json`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T17:46:06.960

检查 WSDL 以找出 Web 服务中公开的方法。

# web-services - 303 响应正文中的超链接

> ID：12042376
> 
> 赞同：2
> 
> 时间：2012-08-20T17:42:05.840
> 
> 标签：web-services, http, rest, rfc2616

在 POST 之后进行 303 重定向时，[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.4)提到在响应正文中添加超链接（即 POST 的 303 响应正文，而不是后续 GET 对新创建资源的响应）。

> 10.3.4 303 见其他
> 
> 可以在不同的 URI 下找到对请求的响应，并且应该使用该资源上的 GET 方法来检索。此方法的存在主要是为了允许 POST 激活脚本的输出将用户代理重定向到选定的资源。新的 URI 不是原始请求资源的替代引用。303 响应不能被缓存，但对第二个（重定向）请求的响应可能是可缓存的。
> 
> 不同的 URI 应该由响应中的 Location 字段给出。除非请求方法是 HEAD，否则**响应的实体应该包含一个简短的超文本注释，其中包含指向新 URI 的超链接。**

我对此有两个问题：

1.  是否有任何实现（浏览器或其他）在 303 的主体中使用这样的链接？

2.  如果在正文中添加链接，最合适的链接关系是什么？`rel="self"`, `rel="alternate"`? 两者似乎都不完全合适。我意识到这样的事情可能没有标准的链接关系，如果是这样，那就这样吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:23:40.317

1）我相信所有常见的浏览器都会显示 POST->303 的响应，尽管 GET 可能不是这种情况（参见[http://greenbytes.de/tech/tc/httpredirects/#t303body](http://greenbytes.de/tech/tc/httpredirects/#t303body)）

# actionscript-3 - 如何配置模式弹出窗口以阻止 AIR 移动设备上的 MouseEvent.CLICK？

> ID：12042384
> 
> 赞同：1
> 
> 时间：2012-08-20T17:42:36.050
> 
> 标签：actionscript-3, flash, mobile, air

使用 AIR 3.1 并使用（桌面 AIR）模拟器和 Nook 平板电脑（运行 Android 2.3）进行测试。

我正在使用下面的代码来添加一个模态弹出窗口……</p>

```
PopUpManager.addPopUp( popUp, FlexGlobals.topLevelApplication as DisplayObject, true ); 
```

对于 AIR 的 Web 和桌面版本，上述代码可防止模式弹出窗口下方/后面的按钮或其他东西可点击。但是，在 AIR 移动设备上，可以在模式阻止程序后面单击按钮。

我还尝试通过将 100% 宽度/高度 UIComponent 添加到顶级应用程序然后在其上显示我的弹出窗口来创建自己的模式阻止程序。我在“阻塞器”UIComponent 的图形对象中绘制了一个部分透明的矩形，然后向它添加了一个 MouseEvent.CLICK 侦听器，如下所示：

```
blocker.addEventListener( MouseEvent.CLICK, onMouseClick, true, int.MAX_VALUE );

// Then my handler looked like this
private function onMouseClick( event:Event ):void {
    event.stopImmediatePropagation();
} 
```

我尝试了 TRUE 和 FALSE 的 useCapture 值，但我在 Nook 上看到的行为保持不变。我能够单击模态阻止程序下方的按钮。

我在这里想念什么？我忽略了什么明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:03:24.753

您可以尝试向舞台添加 Mouse_Down 或单击侦听器，然后如果目标不是您的弹出窗口的后代，则停止它的传播。

```
stage.addEventListener(MouseEvent.CLICK,blockClick,true,int.MAX_VALUE,true);

function blockClick(e:MouseEvent):void {
    var curTarget:DisplayObject = e.target as DisplayObject;

    while(curTarget){
        if(curTarget == popup) return;
        curTarget = curTarget.parent;
    }

    e.stopImmediatePropagation();
} 
```

# codeigniter - 为什么 codeigniter $this->load->view 渲染这么慢？

> ID：12042391
> 
> 赞同：0
> 
> 时间：2012-08-20T17:43:08.463
> 
> 标签：codeigniter

我一直在使用 codeigniter，我真的很喜欢它。但由于某种原因，我不确定为什么在我的应用程序的 1 中渲染视图需要 18-23 整秒。好吧，我真的很想知道为什么要花时间来渲染输出。

我很确定这一点，因为我测量了从它到达索引页面到从系统收集/准备数据的时间。一切都花了不少时间。只是这个视图页面的渲染搞砸了 - 随机花费了 19 / 23 秒。

我真的很想了解为什么会这样，并希望获得适当的解决方案来解决相同的问题。

至于现在我正在缓存输出并存储它并使用它，但我也知道它不是那么完整的证明解决方案。必须有一种方法来分析渲染在服务器上花费如此多时间的位置和原因。如果有人知道同样的事情，请在同一时间更新/分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:01:50.197

您是否尝试过使用 XDebug？有很多在线资源可以帮助您了解如何使用它来分析您的 PHP 应用程序，例如Eric Hogue 的[这个](http://erichogue.ca/2011/03/linux/profiling-a-php-application/)。

但是，如果您在控制器和视图中包含了一些示例代码，那么也许我们可以在这种情况下提供一些具体的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:55:19.070

删除一个电话以`$this->carabiner->empty_cache();`加快我们的观点。

# objective-c - tableView:cellForRowAtIndexPath: 永远不会被调用

> ID：12042392
> 
> 赞同：2
> 
> 时间：2012-08-20T17:43:10.487
> 
> 标签：objective-c, cocoa-touch, uitableview

我有一个`UITableView`，命名`tblParentComments`在一个`UIView`类`CBox`中。

我已经明确地**将我的视图设置为我的表视图的数据源和委托**，并且**我的视图确实实现了这些协议**。该方法**`tableView:numberOfRowsInSection:`确实被调用**并返回一个非零值。但是该函数`tableView:cellForRowAtIndexPath:`永远**不会被调用。**

我注意到，如果我将方法`tableView:cellForRowAtIndexPath:`放在注释中，Xcode 不会停止编译，并出现“`tableView:cellForRowAtIndexPath:`需要”之类的错误——应用程序只是运行并显示一个空表。

我不明白。有任何想法吗？这是我的观点的代码：

接口 CBox.h

```
@interface CBox : UIView <UITableViewDelegate, UITableViewDataSource> 
```

在实现文件中：

```
- (id) initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {        
        tblParentComments = [[UITableView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, self.frame.size.width, frame.size.height)];
        tblParentComments.delegate = self;
        tblParentComments.dataSource = self;
        //tblParentComments.userInteractionEnabled = NO;
        tblParentComments.backgroundColor = [UIColor clearColor];
        tblParentComments.separatorStyle = UITableViewCellSeparatorStyleNone;
        tblParentComments.bounces = NO;
        [self addSubview:tblParentComments];
    }
    return self;
}

#pragma mark - UITableViewDelegate + UITableViewDatasource

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"num of rows = %d", parentComents.count);
    return 1;  // I set a non-zero value for test
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 .... // I set a breakpoint here, never been called here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T07:55:30.593

当我阅读上面的评论时，我可以弄清楚几件事：

您可能弄乱了代码的一些结构。您应该始终遵守视图控制器中的协议 - ！不查看。或者，我喜欢做的事情（因为它让我可以更好地控制我的代码并保持事情干净），将协议从视图控制器中分离出来 - 意味着创建新对象（模型对象），它将处理表所需的所有内容并且它将符合表委托和数据源。

如果你明智地组织你的代码，你应该避免你描述的情况。

此外，我相信您可能有 2 个符合表协议的对象，这就是事情变得丑陋的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T07:35:14.133

是的..我有同样的问题......我刚刚找到了解决方案。

在我的课堂上，我使用不同`inits`的参数。

在我`-(void)viewDidLoad`使用`alloc`的表格视图中`CGRectZero`，只有在这种情况下，如果您不设置 UITableView 的 FRAME，则：

*   将被`numberOfRowsInSection`调用

*   `cellForRowAtIndexPath`永远不会被召唤

我刚刚设置了我的**UITableView 框架**，它的工作原理。

# google-apps-script - 谷歌没有定义

> ID：12042393
> 
> 赞同：0
> 
> 时间：2012-08-20T17:43:13.940
> 
> 标签：google-apps-script

我正在尝试创建一个查找 Place 的简单应用程序，但是当我尝试运行它时遇到了 ReferenceError。我当前的代码直接取自谷歌教程，所以我不确定我错过了什么。

```
function myFunction()
{
  var map;
  var service;
  var pyrmont = new google.maps.LatLng(-33.8665433,151.1956316);

  map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: pyrmont,
      zoom: 15
      });

  var request = {
    location: pyrmont,
    radius: '500',
    types: ['store']
    };

  service = new google.maps.places.PlacesService(map);
  service.search(request, callback);
} 
```

我得到的错误是“ReferenceError：“google”未定义。” 在这条线上

```
var pyrmont = new google.maps.LatLng(-33.8665433,151.1956316); 
```

我认为它很简单，比如某种包含，但我不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:10:12.473

Google Apps 脚本与 Javascript 不同。您在此处编写的代码用于 Google Maps 的 JavaScript API。要在 Apps 脚本中使用地图，请使用 Apps 脚本文档中定义的类 - [https://developers.google.com/apps-script/service_maps](https://developers.google.com/apps-script/service_maps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:11:45.000

取自[文档](https://developers.google.com/maps/documentation/javascript/places#loading_the_library)：

Places 服务是一个独立的库，独立于主要的 Maps API JavaScript 代码。要使用此库中包含的功能，您必须首先使用 Maps API 引导 URL 中的库参数加载它：

有关详细信息，请参阅[库概述](https://developers.google.com/maps/documentation/javascript/libraries)。

+1 to Srik 答案：这确实与 Google Apps 脚本无关

# javascript - navigationControl、mapTypeControl 和 scaleControl 位于地图后面

> ID：12042394
> 
> 赞同：5
> 
> 时间：2012-08-20T17:43:25.903
> 
> 标签：javascript, android, html, google-maps

我将制作一个应用程序，其中有一个部分可以在 Google 地图上显示标记的位置。一切正常，但谷歌地图工具喜欢`navigationControl`，`mapTypeControl`并`scaleControl`隐藏在三星 Galaxy Tab 10.1 等设备中（它们似乎隐藏在地图后面）。即使我已经将它们的值更改为 true 但它们仍然隐藏在某些设备中。

这是我所做的：

```
 <--! The HTML -->
       <article class="container">
       .
       .
       .
       ...( some tags go here )

            <section class="span12">
                <div id="mapDiv"> </div>
            </section>

       </article>  

/*The Javascript*/
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">

 function initialize() {
     var position = new google.maps.LatLng(38.89655520572012, -77.03372955322266); 
     var myOptions = {
     zoom: 15,
     center: position,
     mapTypeId: google.maps.MapTypeId.ROADMAP,
     };
     var map = new google.maps.Map(
     document.getElementById("mapDiv"), myOptions);

     var marker = new google.maps.Marker({
     position: position,
     map: map,
     title:"We are here.",
     }); 
     }
</script> 
```

有谁知道他们为什么被隐藏？！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T22:43:50.587

尝试将 {max-width: none;} 添加到您的#mapDiv。我知道 Google Maps API 有时会在响应式设计方面遇到问题。它使用精灵作为控制图像，而 Bootstrap 可能会干扰它。

# sql-server-2008 - 使用 PRINT 的基于文本的简单报告 MS SQL Server 2008

> ID：12042396
> 
> 赞同：0
> 
> 时间：2012-08-20T17:43:31.613
> 
> 标签：sql-server-2008, reporting-services

我几乎完成了我的第一个任务，但最后一个问题让我很难过。

它问：

> 生成故障产品**报告**，显示 2010 年 11 月 7 日因外部损坏而退回的产品

预期的输出是：

> 有缺陷的产品报告
> 
> --------------------------------------
> 
> 产品名称：办公桌
> 
> 客户名称：Simon, Kernel
> 
> 原因：外部损坏
> 
> （1 行受影响）
> 
> ---报告结束---

我现在发现了 SQL，`PRINT`我似乎几乎把它全部归结为 T：

```
DECLARE @ProductName varchar(30)
SET @ProductName =(SELECT MIN(Products.ProductName) FROM Products)

DECLARE @CustomerName varchar(75)
SET @CustomerName =(SELECT MIN(Customers.FirstName+', '+Customers.Surname) 
FROM Customers,CustomerReturns,Products
WHERE CustomerReturns.ReturnDate='2012/07/11'
AND Products.ProductID=CustomerReturns.ProductID
AND Customers.CustomerID=CustomerReturns.CustomerID)

DECLARE @Reason varchar(30)
SET @Reason =(SELECT MIN(CustomerReturns.Reason) 
FROM CustomerReturns,Products,Customers
WHERE CustomerReturns.Reason='Damaged Exterior')

PRINT 'FAULTY PRODUCT REPORT';
PRINT '';
PRINT '---------------------';
PRINT 'Product Name: '+@ProductName;
PRINT 'Customer Name: '+@CustomerName;
PRINT 'Reason: '+@Reason;
PRINT '';
PRINT '---END OF REPORT---'; 
```

我的输出：

> 有缺陷的产品报告
> 
> --------------------------------------
> 
> 产品名称：办公桌
> 
> 客户名称：Simon, Kernel
> 
> 原因：外部损坏
> 
> ---报告结束---

如您所见，我仍然缺少：

> （1 行受影响）

我怎样才能让它看起来没有当然作弊和只是打印它？（因为无论返回多少结果，它都会保持不变）

编辑：

我发现这样做：`SELECT @ProductName...`产生受影响的 1row(s)，这是正确的吗？：

```
PRINT 'FAULTY PRODUCT REPORT';
PRINT '';
PRINT '---------------------';
PRINT 'Product Name: '+@ProductName;
PRINT 'Customer Name: '+@CustomerName;
PRINT 'Reason: '+@Reason;
SELECT @ProductName,@CustomerName,@Reason
PRINT '';
PRINT '---END OF REPORT---'; 
```

EIDT2：

将其更改为：

```
DECLARE @PName varchar(35)
DECLARE @CName varchar(75)
DECLARE @RName varchar(75)
SELECT @PName=Products.ProductName,
 @CName=Customers.FirstName+', '+Customers.Surname ,
 @RName=CustomerReturns.Reason

FROM Products,Customers,CustomerReturns

WHERE CustomerReturns.ReturnDate='2012/09/28'
AND CustomerReturns.Reason='Damaged Exterior'
AND Products.ProductID=CustomerReturns.ProductID
AND Customers.CustomerID=CustomerReturns.CustomerID
PRINT @PName
PRINT @CName
PRINT @RName 
```

但仍然不影响行的东西

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:00:48.687

查询后查看使用该`@@ROWCOUNT`功能。此函数返回受最后一条语句影响的行数。[在此处阅读更多相关信息。](http://msdn.microsoft.com/en-us/library/ms187316.aspx)

使用上面的第二次编辑，您可以执行以下操作：

```
DECLARE @PName varchar(35) 
DECLARE @CName varchar(75) 
DECLARE @RName varchar(75)
DECLARE @rowCount int 
SELECT @PName=Products.ProductName, 
 @CName=Customers.FirstName+', '+Customers.Surname , 
 @RName=CustomerReturns.Reason 

FROM Products,Customers,CustomerReturns 

WHERE CustomerReturns.ReturnDate='2012/09/28' 
AND CustomerReturns.Reason='Damaged Exterior' 
AND Products.ProductID=CustomerReturns.ProductID 
AND Customers.CustomerID=CustomerReturns.CustomerID

SET @rowCount = @@ROWCOUNT

PRINT @PName 
PRINT @CName 
PRINT @RName 
--Use @rowCount in your report. 
```

请注意，您必须在执行查询后立即获取行数。这样，无论你得到多少行，你都会得到正确的数字——避免你提到的“作弊”场景。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:48:25.207

`SELECT`, `UPDATE`,`INSERT`和`DELETE`都使用 Messages 选项卡来输出受操作影响的行数。（`NOCOUNT`标志可能会影响这一点，但我还没有做任何研究来支持这一点）。

您已经确定`SELECT`语句是`(1 rows(s) affected)`文本输出出现的一种方式；但是，生成该输出的方法不止一种。

您当前的查询似乎符合作业要求的大部分内容 - 这可能是将其带到您的讲师并要求澄清他们想要什么的好时机。

# sql-server - 动态创建 Drop Stored Proc 脚本

> ID：12042397
> 
> 赞同：0
> 
> 时间：2012-08-20T17:43:38.403
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我想动态创建一个 Drop/Create Script。为此，我可以计算**Create**部分，如下所示。

```
SELECT definition FROM sys.sql_modules 
```

**我的查询**- 你能为**Drop Stored Proc** Part 推荐一些东西吗？

我正在尝试为**存储过程创建/删除脚本**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T17:50:08.847

```
DECLARE @proc NVARCHAR(511); -- presumably a parameter
SET @proc = N'dbo.sp_help_job';

DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'DROP PROCEDURE ' + @proc + ';
GO
' + definition
FROM sys.sql_modules
WHERE [object_id] = OBJECT_ID(@proc);

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

Pankaj的 join 与`OBJECTPROPERTY`方法的比较：

![在此处输入图像描述](../Images/643d73066074659d9f9da0be6ace485a.png)

点击放大：

[![在此处输入图像描述](../Images/1b710cedeebbe2bf4d6d8424fc5b62fd.png)](https://i.stack.imgur.com/uKGcQ.png)

不要复制并尝试使用第二个屏幕截图中的 OUTPUT。你到底为什么要这样做？这是 SQL Server 查询的参数化版本的内部表示。让我粘贴代码，这样您就不会对我试图向您展示的内容做出无法解释的事情：

```
SELECT OBJECT_NAME(m.[object_id]), m.[object_id]
FROM sys.all_sql_modules AS m
INNER JOIN sys.all_objects AS o
ON m.[object_id] = o.[object_id]
WHERE o.type = N'P';

SELECT OBJECT_NAME([object_id]), [object_id]
FROM sys.all_sql_modules 
WHERE OBJECTPROPERTY([object_id], 'IsProcedure') = 1; 
```

运行这些并在探查器中检查结果。我仍然“错”了Pankaj吗？你想今天再浪费大家的时间吗？

# ruby-on-rails - 如何使用 Ember.js 和 ember-data 创建 has_and_belongs_to_many 关系？

> ID：12042410
> 
> 赞同：7
> 
> 时间：2012-08-20T17:44:22.287
> 
> 标签：ruby-on-rails, ember.js, has-and-belongs-to-many, ember-data

是否可以使用 Ember.js 和 ember-data 创建 hasAndBelongsToMany 关系？

**编辑：**添加了 ActiveRecord 模型示例以进行澄清。

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :tags
end

class Tag < ActiveRecord::Base
  has_and_belongs_to_many :projects
end 
```

我有一个关联表“projects_tags”链接 project_id <=> tag_id。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:10:39.637

在这个例子中，我建议在 Post 中嵌入标签，这样生成的结构看起来像这样

```
{
   title: "some post",
   tags: [ "tag1", "tag2" ]
} 
```

当您不需要对关系具有附加值时，这通常是一种很好的做法。如果您想`Tag`在客户端上拥有模型，您仍然可以通过嵌入来实现。

```
{
   title: "some post",
   tags: [ { name: "first tag" }, { name: "second tag" } ]
} 
```

在这种情况下，您可以将其指定为嵌入关系，例如

```
App.Post = DS.Model.extend({
  title: DS.attr("string"),
  tags: DS.hasMany("App.Tag")
});

App.Tag = DS.Model.extend({
  name: DS.attr("string"),
  post: DS.belongsTo("App.Post")
});

App.store.adapter.serializer.map("App.Tag", {
  tags: { embedded: 'load' }
}); 
```

请记住，嵌入仅适用于 Ember Data 修订版 10。它在 5-9 中不受支持。

**大多数时候，您并不真的想以与在关系数据库中建模相同的方式对所有内容进行建模。**

你应该倾向于 NoSQL-ish JSON，这通常意味着嵌入东西，而不是建立复杂的关联。这样做的原因是您的数据库可以`JOIN`非常有效地进行数据处理，尤其是使用索引，但是通过网络执行此操作是一个坏主意，因为它会导致大量请求。

# c# - 在 asp.net-mvc 中，是什么导致我的模型状态错误？

> ID：12042415
> 
> 赞同：0
> 
> 时间：2012-08-20T17:44:35.750
> 
> 标签：c#, asp.net-mvc, validation, post

我在 asp.net-mvc 页面中发布了一个表单。这是我的控制器操作：

```
 public ActionResult UpdateData(MyFormObject entity)
    {
        bool isValid = IsValid(entity);

        if (!isValid)
        {
            var firstError = ModelState.Values.SelectMany(v => v.Errors).First();
            throw new HttpException(404, firstError.ErrorMessage);
        }
        return Json(BuildResult(entity));
    } 
```

即使帖子通过了我所有的显式验证逻辑，当我检查 ModelState 时，我也会看到错误。当我的任何属性为空时，我在 ModelState 中看到错误。这是我的对象：

```
public class MyFormObject 
{
    public int Id{ get; set; }
    public int TestId{ get; set; }
    public int OtherId{ get; set; }
} 
```

我正在查看 Model.State 并且我看到我的对象中未填充的任何元素的错误。

如果我将其更改为（注意：“？”）

```
public class MyFormObject 
{
    public int? Id{ get; set; }
    public int? TestId{ get; set; }
    public int? OtherId{ get; set; }
} 
```

然后我不再收到任何错误。这里是否有一些我没有设置的默认验证。我试图弄清楚在上面的第一种情况下是什么设置了 ModelState 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:07:05.490

当您定位到将`MyFormObject`类对象作为参数的控制器操作时，MVC 引擎将尝试通过自动模型绑定创建该类的实例。为了创建`MyFormObject`一个需要提供所有这些：

```
public int Id{ get; set; }
public int TestId{ get; set; }
public int OtherId{ get; set; } 
```

如果您至少不提供其中任何一个，它将尝试将 null 分配给相应的属性。( `int`value type) 不支持空值，而支持`int?`。

这在逻辑上是正确的，从长远来看实际上可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:32:35.847

正如@Maxim V. Pavlov 所说，当您发布时，ASP.MVC 引擎将尝试验证模型，即它的类，并且基于您作为示例引用的类，属性不接受 null 或空值，然后它将抛出异常并且 ModelState 将无效。

您可以在此处查看更多信息[@Validating Model Data in an MVC Application](http://msdn.microsoft.com/en-us/library/dd410404%28v=vs.90%29.aspx)和此处[ModelStateDictionary.IsValid 属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary.isvalid%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:50:54.027

您可能正在向 UpdateData 方法提交一个空的 MyFormObject。值类型不能为空，并且**必须**分配一个值。如果值类型缺少值，则它会自动触发必填字段验证。

ASP.NET MVC 甚至有一个属性可以让你调整这种行为，尽管我相信它只会影响客户端验证：

[DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes](http://msdn.microsoft.com/en-us/library/system.web.mvc.dataannotationsmodelvalidatorprovider.addimplicitrequiredattributeforvaluetypes%28v=vs.98%29.aspx)

# python - 使用给定代码页解码字体

> ID：12042417
> 
> 赞同：1
> 
> 时间：2012-08-20T17:44:44.607
> 
> 标签：python, decoding, codepages, afp

如果给定一组用代码页“xzc”编码的文本“abcdefg-foo”，python 中是否可以用代码页解码这些字符？

更具体地说，我们有一个已知的 AFP 代码页 T1V10500。我们提取的字体是从引用此代码页的 AFP 中提取的。我们可以提取引用并构建代码页的路径。

```
codepage="/path/to/codepage/T1V10500"
ascii_encoded_extracted_afp_text=extract_afp_text().decode(codepage).encode("ascii") 
```

这是对我希望实现的目标的过度简化，但我希望了解该概念是否专门在 python 中可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:28:19.050

你应该尝试使用[ICU](http://site.icu-project.org/)

似乎有一个 python 绑定（[http://pypi.python.org/pypi/PyICU/0.8.1）](http://pypi.python.org/pypi/PyICU/0.8.1)

如果您的 AFP 文件中使用的代码页是通用的（而不是自定义的），您可以轻松地使用 ICU 从代码页指定的编码（T1v10500 应该是 CP500 即 IBM EBCDIC International）到 ascii 或您需要的任何编码构建转换器。ICU 是一个很棒的库，用于大多数 IBM AFP 文件工具。

如果你觉得 ICU 太麻烦，不需要处理其他代码页，你可以建立一个简单的从 CP500 到 ASCII 的转换表

# mysql - 时间戳差异并单独获取小时、分钟和秒

> ID：12042418
> 
> 赞同：0
> 
> 时间：2012-08-20T17:44:52.827
> 
> 标签：mysql, time, diff

所以我每行有 2 个表，我用它来获得以分钟为单位的平均时间。

```
SELECT Sec_to_time (Avg (Timestampdiff (second, `survival`, `lastupdate`)))
FROM   main 
```

但我想单独获得小时、分钟和秒，这样我就可以在 php 中回显它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:50:03.883

您可以使用 MySQL [HOUR()、MINUTE() 和 SECOND()](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html)函数将 SEC_TO_TIME 返回的时间分解为其组件。

为了避免重复自己，您可以包装计算：

```
SELECT HOUR(x.timeDiff), MINUTE(x.timeDiff), SECOND(x.timeDiff) 
FROM 
  (
    SELECT Sec_to_time(Avg (Timestampdiff (second, `survival`, `lastupdate`))) as timeDiff
    FROM main
  ) AS x 
```

[SqlFiddle 在这里](http://www.sqlfiddle.com/#!2/d41d8/1448)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:50:46.823

MySql中有hour()、minute()和second()函数。

[http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:38:53.477

尝试：

```
select concat(HOUR(Sec_to_time(Avg (Timestampdiff (second, login_datetime, logout_datetime)))),
  'hr ',
  MINUTE(Sec_to_time(Avg (Timestampdiff (second, login_datetime, logout_datetime)))),
  'min ',
  SECOND(Sec_to_time(Avg (Timestampdiff (second, login_datetime, logout_datetime)))), 
  'sec ') 
as his_time from table_name; 
```

# angularjs - AngularJS $scope 更新后不呈现

> ID：12042422
> 
> 赞同：14
> 
> 时间：2012-08-20T17:44:57.337
> 
> 标签：angularjs

我有一个监听的控制器`$scope.$on`，它会在触发时显示一个弹出窗口。它可以通过其他几个控制器的`$rootScope.$broadcast`方法 100% 地工作。但是其中一个永远不会工作。

控制器获取事件，并设置`$scope`所需的变量，但页面不会更新，即使我触发`$scope.$eval()`. 然后，如果我去另一条路线，`$scope`最终将呈现，并且模态将弹出该路线的顶部。我不知道我是否在 angularjs 中发现了一个错误，或者我错过了一些基本的东西。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-20T18:15:55.790

您可能正在更改`$scope`angular 的外部`$digest()`。尝试替换`code making changes`为`$scope.$apply(function(){ code making changes })`. 有了这个，脏检查应该运行并更新所有内容。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-26T20:43:05.443

我建议使用：

`$scope.$evalAsync(function() { // scope changes here });`

这样你就不会遇到问题，比如当摘要已经在进行中时尝试调用 apply。

# javascript - 获取 IFRAME 相对于窗口的位置

> ID：12042427
> 
> 赞同：3
> 
> 时间：2012-08-20T17:45:18.630
> 
> 标签：javascript, iframe

我在 iframe 中运行 javascript 代码，该 iframe 来自与父窗口不同的域。由于安全问题（跨域），我无法轻松检测框架在窗口内的位置。

但是，我发现如果我在框架中将事件附加到 window.mousemove，我可以获得窗口的 ScreenX/Y 和事件的 ScreenX/Y，这让我可以很好地了解浏览器窗口左上角的偏移量对我来说足够近了 - 我只想检测框架是否以及有多少在视野范围内。

所以我想我可以务实地在 iframe 中触发 window.mousemove()，但是 event.ScreenX/Y 不会被填充。

所以我的问题是：

1) 当框架位于不同的域时，如何从窗口获取 iframe 的绝对偏移量 2) 或者 - 一样好 - 我如何务实地触发填充了 ScreenX/Y 的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:53:45.370

像这样的东西对我有用，但我不确定这是否正是你所要求的。您可能仍需要考虑两件事：

1.  从浏览器滚动偏移，但我认为这个值可供您使用。
2.  浏览器标头差异，我当前获得的值不会扣除浏览器标头使用的高度，也不会扣除左侧的任何填充。不过，有几种方法可以做到这一点。

    a) 创建一个浏览器列表并自动推断出标题可能有多大的最佳猜测。b) 使用 innerHeight 进行一些数学运算，但您仍然需要计算出窗口状态栏（或 unix 或 max）与浏览器标题大小相比有多大。

无论如何，这是我使用的代码：

```
<html>
    <head>
        <title>iframe title</title>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script type="text/javascript">
        jQuery(document).ready(function(){
           $(document).mousemove(function(e){
                var x = e.screenX - e.pageX - window.screenX;
                var y = e.screenY - e.pageY - window.screenY;
              $('#status').html(x +', ' + y );
           }); 
        })
        </script>       
    </head>
    <body id="doc">
        <h2 id="status">0, 0</h2>
    </body>
</html> 
```

# internet-explorer - 谷歌地图嵌入 IE 仅显示 #

> ID：12042430
> 
> 赞同：0
> 
> 时间：2012-08-20T17:45:28.153
> 
> 标签：internet-explorer, google-maps

我已经嵌入了下面的代码并在除 IE 之外的所有浏览器中工作。我认为这是由于 IE 的新 XSS 过滤器，但我不确定。它只显示一个井号标签 (#)，就是这样。我不希望用户必须修改他们的 IE 设置或下载新的浏览器。我宁愿找到一个可以在 IE 中完成这项工作的 hack。

我已经搜索了与此相关的所有其他问题，但没有一个解决方案适合这个确切的问题。您可以查看以下代码：

```
<iframe src="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=%2B14%C2%B0+21'+18.93%22,+-90%C2%B0+34'+19.52%22&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=53.212719,100.810547&amp;t=h&amp;ie=UTF8&amp;ll=14.355258,-90.572089&amp;spn=0.035796,0.055747&amp;z=14&amp;output=embed" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="890" height="300"></iframe> 
```

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:02:12.027

尝试删除 URL 的单引号（'）

[http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=%2B14%C2%B0+21'+18.93%22,+-90%C2%B0+34'+19.52%22&aq =&sll=37.0625,-95.677068&sspn=53.212719,100.810547&t=h&ie=UTF8&ll=14.355258,-90.572089&spn=0.035796,0.055747&z=14&output=embed](http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=%2b14%C2%B0%2021%27%2018.93%22,%20-90%C2%B0%2034%27%2019.52%22&aq=&sll=37.0625,-95.677068&sspn=53.212719,100.810547&t=h&ie=UTF8&ll=14.355258,-90.572089&spn=0.035796,0.055747&z=14&output=embed)

变成

[http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=%2B14%C2%B0+21+18.93%22,+-90%C2%B0+34+19.52%22&aq=&sll =37.0625,-95.677068&sspn=53.212719,100.810547&t=h&ie=UTF8&ll=14.355258,-90.572089&spn=0.035796,0.055747&z=14&output=embed](http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=%2b14%C2%B0%2021%2018.93%22,%20-90%C2%B0%2034%2019.52%22&aq=&sll=37.0625,-95.677068&sspn=53.212719,100.810547&t=h&ie=UTF8&ll=14.355258,-90.572089&spn=0.035796,0.055747&z=14&output=embed)

不知什么原因，IE不喜欢它...

[编辑]

如果问题仍然存在，似乎唯一的解决方案是使用 Gmaps API[这是一个简单的例子](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)

# .net - 如何在 Metro 项目中使用 Visual Studio 并发可视化工具？

> ID：12042432
> 
> 赞同：2
> 
> 时间：2012-08-20T17:45:41.493
> 
> 标签：.net, concurrency, profiling, windows-runtime, visual-studio-2012

我想在 Visual Studio 2012 中使用并发可视化工具来查找 WinRT Metro ui 项目启动期间的并发瓶颈。

我认为主要问题是我不知道启动程序的正确命令。并发可视化工具尚不支持启动 winrt 项目，因此我必须手动指定参数（程序、参数、工作目录）。

目前我正在尝试（使用 %paths% 解包）：

*   程序=%BuildDir%\AppX\%ProjectName%.exe
*   参数=-ServerName:App.AppX2tv...%taken-from-start-screen-shortcut%-...jgr74.mca
*   工作目录=%BuildDir%\AppX\

请注意，并发可视化器在附加已经运行的进程时*确实*可以工作，我已经尝试过了，我似乎无法启动它（这对于捕捉启动阶段很重要）。

# c++ - 如何禁用 C4127 for do {} while(false)

> ID：12042433
> 
> 赞同：9
> 
> 时间：2012-08-20T17:45:50.753
> 
> 标签：c++, visual-c++, compiler-warnings, c4127

> **可能重复：**
> [C/C++：如何使用 do-while(0); 构造没有像 C4127 这样的编译器警告？](https://stackoverflow.com/questions/1946445/c-c-how-to-use-the-do-while0-construct-without-compiler-warnings-like-c412)

```
//file error.h

        #define FAIL(message) \
        do { \
            std::ostringstream ossMsg; \
            ossMsg << message; \
            THROW_EXCEPTION(ossMsg.str());\
        } while (false)

//main.cpp

...

FAIL("invalid parameters"); // <<< warning C4127: conditional expression is constant    

... 
```

如您所见，警告与`do {} while(false)`.

我只能想出以下方法来禁用警告：

```
 #pragma warning( push )
        #pragma warning( disable : 4127 )
        FAIL("invalid parameters");
        #pragma warning( pop ) 
```

但我不喜欢这个解决方案。

我还尝试将这些宏放入 error.h 中而没有效果。

关于如何以体面的方式抑制此警告的任何评论？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T17:51:04.853

该警告是由于`while(false)`. 该[站点](http://cnicholson.net/2009/03/stupid-c-tricks-dowhile0-and-c4127/)提供了如何解决此问题的示例。来自站点的示例（您必须为您的代码重新工作）：

```
#define MULTI_LINE_MACRO_BEGIN do {  
#define MULTI_LINE_MACRO_END \  
    __pragma(warning(push)) \  
    __pragma(warning(disable:4127)) \  
    } while(0) \  
    __pragma(warning(pop))

#define MULTI_LINE_MACRO \  
        MULTI_LINE_MACRO_BEGIN \  
            std::printf("Hello "); \  
            std::printf("world!\n"); \  
        MULTI_LINE_MACRO_END 
```

只需在 BEGIN 和 END 之间插入您的代码：

```
#define FAIL(message) \  
    MULTI_LINE_MACRO_BEGIN \  
        std::ostringstream ossMsg; \
        ossMsg << message; \
        THROW_EXCEPTION(ossMsg.str());\  
    MULTI_LINE_MACRO_END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:50:08.910

1）为什么不只是`THROW_EXCEPTION("invalid parameters")`？
2） `while(true)`最后`break`？

# mysql - MySql查询和GROUP BY，我需要做些什么不同？

> ID：12042435
> 
> 赞同：0
> 
> 时间：2012-08-20T17:45:53.720
> 
> 标签：mysql, sql, join, group-by

现在我有一个 sql 查询，它选择我的销售代表范围，然后加入一个客户表，并计算某些值是否为真。但是，我的查询有效，它忽略了未售出任何客户的销售代表。我希望此查询返回所有销售代表，即使他们没有创建任何符合条件的客户记录。我需要改变什么？

这是我的 SQL 查询的链接：http: [//pastie.org/4557540](http://pastie.org/4557540)（下同）

```
SELECT u.id                                                           AS
       `employee_id`,
       u.`first_name`                                                 AS
       `employee_first_name`,
       u.`last_name`                                                  AS
       `employee_last_name`,
       (SELECT Count(*)
        FROM   saleset s
        WHERE  s.pitchedby_id = `employee_id`
               AND s.pitchstartedat BETWEEN '2012-08-20 00:00:00' AND
                                            '2012-08-20 23:59:59')    AS
       `transfers_taken`,
       Count(IF(c.`saletype_id` IS NOT NULL, 1, NULL))                AS
       `total_closes`,
       Count(IF(c.`saletype_id` = 1, 1, NULL))                        AS
       `regular_sale`,
       Count(IF(c.`saletype_id` = 2, 1, NULL))                        AS
       `postdated_sale`,
       Count(IF(c.`saletype_id` = 4, 1, NULL))                        AS
       `attempted_sale`,
       Count(IF(c.`customerstatus_id` IN ( 8, 18, 23 ), 1, NULL))     AS
       `cancel_status`,
       Count(IF(c.`customerstatus_id` IN ( 1, 12, 13, 24 ), 1, NULL)) AS
       `pending_completion_status`,
       Count(IF(c.`customerstatus_id` IN ( 5, 6, 16 ), 1, NULL))      AS
       `complete_status`,
       Count(IF(c.`customerstatus_id` = 20, 1, NULL))                 AS
       `postdate_pending`,
       Count(IF(c.`customerstatus_id` = 25, 1, NULL))                 AS
       `postdate_declined`
FROM   `user` u
       LEFT JOIN customer c
              ON c.`salesrep_id` = u.id
WHERE  u.id IN ( 39, 65, 76, 96,
                 195, 266, 349, 401,
                 402, 404, 405, 407,
                 411, 412 )
       AND c.`activationdate` BETWEEN
           '2012-08-20 00:00:00' AND '2012-08-20 23:59:59'
GROUP  BY u.`id` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:50:02.623

问题是您正在过滤`WHERE`子句中的客户，在`LEFT JOIN`指定之后，所以没有销售的推销员被排除在外，因为`c.activationdate`是`null`这些记录。

**解决方案是让客户端在**连接条件中进行过滤：

```
(...)
FROM   `user` u
       LEFT JOIN customer c
              ON (c.`salesrep_id` = u.id and
                  u.id IN ( 39, 65, 76, 96, 195, 266, 349, 401,
                            402, 404, 405, 407,
                            411, 412 ) 
                  AND c.`activationdate` BETWEEN
                      '2012-08-20 00:00:00' AND '2012-08-20 23:59:59')

GROUP  BY u.`id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:54:41.837

也许您可以将您与没有销售的销售代表联合起来，然后将它们硬编码为 0。例如：

```
SELECT u.id                                                           AS 
       `employee_id`, 
       u.`first_name`                                                 AS 
       `employee_first_name`, 
       u.`last_name`                                                  AS 
       `employee_last_name`, 
       (SELECT Count(*) 
        FROM   saleset s 
        WHERE  s.pitchedby_id = `employee_id` 
               AND s.pitchstartedat BETWEEN '2012-08-20 00:00:00' AND 
                                            '2012-08-20 23:59:59')    AS 
       `transfers_taken`, 
       Count(IF(c.`saletype_id` IS NOT NULL, 1, NULL))                AS 
       `total_closes`, 
       Count(IF(c.`saletype_id` = 1, 1, NULL))                        AS 
       `regular_sale`, 
       Count(IF(c.`saletype_id` = 2, 1, NULL))                        AS 
       `postdated_sale`, 
       Count(IF(c.`saletype_id` = 4, 1, NULL))                        AS 
       `attempted_sale`, 
       Count(IF(c.`customerstatus_id` IN ( 8, 18, 23 ), 1, NULL))     AS 
       `cancel_status`, 
       Count(IF(c.`customerstatus_id` IN ( 1, 12, 13, 24 ), 1, NULL)) AS 
       `pending_completion_status`, 
       Count(IF(c.`customerstatus_id` IN ( 5, 6, 16 ), 1, NULL))      AS 
       `complete_status`, 
       Count(IF(c.`customerstatus_id` = 20, 1, NULL))                 AS 
       `postdate_pending`, 
       Count(IF(c.`customerstatus_id` = 25, 1, NULL))                 AS 
       `postdate_declined` 
FROM   `user` u 
       INNER JOIN customer c 
              ON c.`salesrep_id` = u.id 
WHERE  u.id IN ( 39, 65, 76, 96, 
                 195, 266, 349, 401, 
                 402, 404, 405, 407, 
                 411, 412 ) 
       AND c.`activationdate` BETWEEN 
           '2012-08-20 00:00:00' AND '2012-08-20 23:59:59' 
GROUP  BY u.`id`
UNION
SELECT u.id                                                           AS 
       `employee_id`, 
       u.`first_name`                                                 AS 
       `employee_first_name`, 
       u.`last_name`                                                  AS 
       `employee_last_name`, 
       0                                                              AS 
       `transfers_taken`, 
       Count(IF(c.`saletype_id` IS NOT NULL, 1, NULL))                AS 
       `total_closes`, 
       Count(IF(c.`saletype_id` = 1, 1, NULL))                        AS 
       `regular_sale`, 
       Count(IF(c.`saletype_id` = 2, 1, NULL))                        AS 
       `postdated_sale`, 
       Count(IF(c.`saletype_id` = 4, 1, NULL))                        AS 
       `attempted_sale`, 
       Count(IF(c.`customerstatus_id` IN ( 8, 18, 23 ), 1, NULL))     AS 
       `cancel_status`, 
       Count(IF(c.`customerstatus_id` IN ( 1, 12, 13, 24 ), 1, NULL)) AS 
       `pending_completion_status`, 
       Count(IF(c.`customerstatus_id` IN ( 5, 6, 16 ), 1, NULL))      AS 
       `complete_status`, 
       Count(IF(c.`customerstatus_id` = 20, 1, NULL))                 AS 
       `postdate_pending`, 
       Count(IF(c.`customerstatus_id` = 25, 1, NULL))                 AS 
       `postdate_declined` 
FROM   `user` u 
       LEFT JOIN customer c 
              ON c.`salesrep_id` = u.id 
WHERE  u.id IN ( 39, 65, 76, 96, 
                 195, 266, 349, 401, 
                 402, 404, 405, 407, 
                 411, 412 ) 
       AND c.`activationdate` BETWEEN 
           '2012-08-20 00:00:00' AND '2012-08-20 23:59:59'
       AND c.`salesrep_id` IS NULL 
GROUP  BY u.`id` 
```

# c# - MailItem.CreationTime 是只读的 - 任何解决方法？

> ID：12042443
> 
> 赞同：1
> 
> 时间：2012-08-20T17:46:19.573
> 
> 标签：c#, outlook, outlook-addin

我最近发布了一个[关于](https://stackoverflow.com/questions/12040239/save-email-upon-send-in-outlook-add-in)在发送电子邮件后保存电子邮件的问题 - 除了一个小细节外，我几乎所有工作都正常。基本上，我能够在它发送之前捕获一封电子邮件，并用它做任何我想做的事情——在我的情况下，保存它。但是，如果您尝试访问该电子邮件的 CreationTime 属性，它会返回 4501 年 1 月 1 日凌晨 12 点。这很可能是因为它实际上还没有被“创建”，因为一旦我的代码完成执行并实际发送，它将在“已发送项目”文件夹中创建。

我想让这个即将发送的 MailItem 保持不变。我想复制它，将副本的 CreationTime 属性更改为 DateTime.Now，然后保存副本，然后让 Outlook 继续发送原件。但是，当我尝试修改 CreationTime 时，我收到一个错误，指出该属性是只读的。有没有办法“闯入”它？或者有什么方法可以强制写入或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:18:18.797

更好的方法是附加到已发送的项目[`Folder.ItemAdd`](http://msdn.microsoft.com/en-us/library/office/ff869609.aspx)，以便您可以在发送后而不是之前保存消息 - 这样您[`MailItem.CreationTime`](http://msdn.microsoft.com/en-us/library/office/ff867230.aspx)应该是准确的。这可能是也可能不是您的选择，但可以缓解问题。

```
Outlook.Folder sentItems = ThisAddIn.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderSentMail) as Outlook.Folder;
sentItems.Items.ItemAdd += new Outlook.ItemsEvents_ItemAddEventHandler(sentItems_ItemAdd);
// ...
void sentItems_ItemAdd(object Item)
{
  var msg = Item as Outlook.MailItem;
  msg.SaveAs(yourPath, Outlook.OlSaveAsType.olMSG);
} 
```

**注意：** *您需要处理正确的 COM 资源处理和错误处理。*

# javascript - 如何获取在 jquery 中选择的项目类别？

> ID：12042445
> 
> 赞同：2
> 
> 时间：2012-08-20T17:46:19.990
> 
> 标签：javascript, jquery

我有 2 个图像 (.field-img) ，包装在一个容器 (.group-container) 中，

每个图像都在一个唯一的字段 id 中，所以我的 tpl 被分解为

```
<div class=group-container>
 <div id=field1>
  <div class=field-img>
 </div></div>
 <div id=field2>
  <div class=field-img>
 </div></div>
</div> 
```

我的js是

```
$(".group-container .field-img").click(function() {
 alert(".group-container .field-img"); 
```

我想要的是自动检测图像是否属于 field1 或 field2。

所以我可以提醒 (".group-container .field1/2 .field-img");

我该怎么做？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:48:11.017

```
$(".group-container .field-img").click(function() {
   var field=$(this).parent().attr('id');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:51:29.360

Izzey 解决方案的替代方法是使用`.closest`以选择器开头的属性（或类名，因为这些 div 更适合拥有一个公共类）

```
$(".group-container .field-img").click(function() {
    var field = $(this).closest("[id^=field]")[0].id;
}); 
```

或者，使用一个共同的类名，

html

```
<div class=group-container>
 <div class="field" id=field1>
  <div class=field-img>
 </div></div>
 <div class="field" id=field2>
  <div class=field-img>
 </div></div>
</div> 
```

js

```
$(".group-container .field-img").click(function() {
    var field = $(this).closest(".field")[0].id;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T17:54:44.977

```
$(".group-container .field-img").click(function() {
   var field = this.parentNode.id;
   alert (".group-container ." + field + " .field-img");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T17:55:31.470

```
$(".group-container .field-img").each(function() {
        $(this).click(function(){   
          var fieldid=$(this).parent().attr('id');
        });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T18:04:17.387

由于一个元素在另一个元素之内，因此单击无论如何都会向上传播，因此您始终可以将单击绑定到父元素并执行以下操作：

```
$('div[id^="field"]').on('click', function() {
    alert(".group-container "+this.id+" .field-img");
}); 
```

[**小提琴**](http://jsfiddle.net/rjR2t/)

甚至动态获取它们：

```
$('div[id^="field"]').on('click', function(e) {
    alert('.'+this.parentNode.className+" "+this.id+" ."+e.target.className);
}); 
```

[**小提琴**](http://jsfiddle.net/rjR2t/1/)

​</p>

# iphone - 沿 y 轴的 Coreplot 图形填充颜色

> ID：12042447
> 
> 赞同：1
> 
> 时间：2012-08-20T17:46:31.327
> 
> 标签：iphone, ios, graph, core-plot

![在此处输入图像描述][1]

谁能告诉我如何在核心图上从 y 轴 4 到 10 以及穿过 x 轴绘制深蓝色蒙版区域，就像我在图中显示的那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T00:32:32.693

Core Plot 称之为“背景限制带”。几个示例应用程序中有示例，包括绘图库。

```
CPTPlotRange *range = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(4.0)
                                                   length:CPTDecimalFromDouble(6.0)];
CPTFill *bandFill = [CPTFill fillWithColor:[CPTColor blueColor]];
[yAxis addBackgroundLimitBand:[CPTLimitBand limitBandWithRange:range
                                                          fill:bandFill]]; 
```

# naming-conventions - 如何检查记事本++中的命名约定违规行为？

> ID：12042448
> 
> 赞同：0
> 
> 时间：2012-08-20T17:46:32.780
> 
> 标签：naming-conventions, notepad++

我们使用 Notepad++ 进行 Java 编码。我们需要遵循一些项目特定的命名约定。例如，`String`应该以 S 和`Map`, M 开头。在 Notepad++ 中，如何在编码时突出显示命名约定中是否存在任何不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:50:16.570

我建议保持您当前的语法高亮约定，但不用于样式检查。

将 checkstyle 与您自己的自定义规则一起使用，并考虑将其添加到您的构建过程中。

# geolocation - 验证用户输入的位置字符串是有效的地理位置吗？

> ID：12042452
> 
> 赞同：1
> 
> 时间：2012-08-20T17:46:54.640
> 
> 标签：geolocation, geocoding, google-geocoding-api

我正在接受应该是地理位置的用户输入。我想验证用户输入的内容是否描述了一个位置——例如，邮政编码、机场代码、街道地址、城市名称等。

显而易见的答案是使用[Google Geocode API](https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests)来请求用户输入并查看我是否得到任何结果。）但是地理编码 ToS 禁止这样做：

> ...地理编码 API 只能与 Google 地图一起使用；禁止在未在地图上显示的情况下对结果进行地理编码。

有人知道替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:43:19.167

雅虎还有一个[地理定位 API](http://developer.yahoo.com/geo/geoplanet/guide/yql-tables.html#geo-places)，它的 TOS 限制较少。通过查询一个位置，如果您收到一个非`null`结果集，那么您就知道它是一个有效的位置。

```
# A query for New York...
http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20geo.places%20where%20text='New+York'&format=json
# Results in a response
{"query":{"count":10,"created":"2013-01-11T18:40:32Z","lang":"en-US","results":{"place":[... places ... ] }}} 
```

然而

```
# A query for junk
http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20geo.places%20where%20text='kqpo234xk'&format=json
# Results in null
{"query":{"count":0,"created":"2013-01-11T18:39:21Z","lang":"en-US","results":null}} 
```

# ios - GLKTextureLoader 如何从图像条加载立方体贴图？

> ID：12042455
> 
> 赞同：0
> 
> 时间：2012-08-20T17:46:58.263
> 
> 标签：ios, opengl-es, glktextureloader

有没有办法在 OpenGL-ES 中使用巨型图像条加载立方体贴图？（或桌面 GL 或扩展，任何东西）

例如，[`GLKTextureLoader`](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html)如果垂直排序，类会立即加载立方体贴图。我想知道这个特性有一些 GL 函数，或者这个类在加载时只是分割纹理。当然，我可以使用这个类，但我想知道在加载长图像提示或为每侧分隔 6 个图像之间哪个更有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:11:49.780

我的猜测是，这个函数确实只是在加载图像文件后将图像分成 6 组面，然后使用这些通过标准立方体贴图调用来生成标准立方体贴图：

```
glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X...)
glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_Y...)
etc 
```

请注意，[GLKTextureLoader 类](https://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html)还定义了 cubeMapWithContentsOfFiles，它允许您指定 6 个单独的图像文件来定义面部纹理。

您可以检查使用 6 文件输入与立方体条输入 (cubeMapWithContentsOfFile) 设置立方体贴图所需的时间。哪个运行得更快取决于加载 6 个文件是否比加载一个大文件并让方法将其拆分更快。否则，我敢打赌这两个函数之间的所有其余代码都是相同的，并使用上述标准立方体贴图纹理调用。

由于 GLKit 是 Apple 专有的，我们不能像使用大多数 OpenGL 函数那样只查看源代码。

# shell - 使用 shell32.dll 声明函数 Excel Vba

> ID：12042458
> 
> 赞同：2
> 
> 时间：2012-08-20T17:47:10.087
> 
> 标签：shell, excel, windows-shell, shellexecute, vba

有人可以告诉我下面的代码发生了什么：

```
'Variables at top of module or some function/sub here

Private Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long

 'some function or sub routine here 
```

这段代码显示了函数声明的位置。我不熟悉 declare 关键字在做什么，也不明白为什么不编译。

当我在寻找通过 vba 在 Internet Explorer 中打开标签的方法时，我得到了这个，但我似乎无法让它工作。

似乎编译器没有将其识别为函数，但我已经看到几个论坛帖子使用此代码而没有任何问题（包括[这个](http://www.vbforums.com/showthread.php?524244-RESOLVED-open-several-tabs-in-internet-explorer)）。

似乎我可能缺少参考，或者可能缺少 dll，但我没有在工具菜单中看到该库作为参考，而且我不知道如何检查我的机器上是否有这个。

如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:42:29.837

API 声明类似于常规变量声明：它必须位于模块的顶部，在任何 Subs/Function 之前。

# google-analytics - “新访客 IE7 及更早版本”与“使用任何其他浏览器的新访客”的 Google Analytics“高级细分”

> ID：12042459
> 
> 赞同：0
> 
> 时间：2012-08-20T17:47:18.660
> 
> 标签：google-analytics, ab-testing

我正在努力在 Google Analytics 中创建 2 个高级细分：

**我想比较“使用 Internet Explorer 7 或更早版本的新访客”与“使用任何其他浏览器的新访客”。**

我正在使用自定义变量运行[服务器端 AB 测试](https://stackoverflow.com/questions/11403778/google-analytics-content-experiments-a-b-testing-server-side-code-without-page-r)（根据使用的变体，值为“A”或“B”）。

两者都应该过滤到“新访问者”的原因是因为我最有兴趣监控我的*注册*表单的成功。

我想将 IE6/7 与现代浏览器进行比较的原因是因为我担心我的注册表单在 IE6/7 上的表现可能会很差。（在我个人的测试中，它看起来不错，但我有理由怀疑我尝试逼近 IE6/7 的尝试是不完美的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:05:17.843

当我刚刚测试它们时，这两个段设置对我有用。

仅适用于 IE6/7 ![在此处输入图像描述](../Images/59b42c1904b3c3de569149b111893f5f.png)

适用于除 IE6/7 之外的所有内容 ![在此处输入图像描述](../Images/b38a298917dab7dc5327c8c78704e83b.png)

# python-2.7 - 斐波那契数列水平打印

> ID：12042461
> 
> 赞同：1
> 
> 时间：2012-08-20T17:47:27.180
> 
> 标签：python-2.7

> **可能重复：**
> [不带换行符打印（打印'a'，）打印一个空格，如何删除？](https://stackoverflow.com/questions/4499073/printing-without-newline-print-a-prints-a-space-how-to-remove)

我需要水平打印斐波那契数列。即，输出必须是这样的斐波那契数列是：0,1,1,2,3,5,8,13。我也不想将其打印为列表。我知道如何垂直打印..但不能用“斐波那契数列是：”水平打印它只来一次..请帮助大家！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:52:24.560

我假设您希望将系列中的所有数字打印在同一行上。

你的代码看起来像这样

```
print 'The Fibonacci series is : ',
for i in xrange(1,10):
    #Calculate the next number 'n' to print
    print n, 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T18:27:49.890

基于 Rajesh 答案的工作解决方案。

```
a,b = 0,1
limit = 40
print 'The Fibonacci series is :', str(a), #str() necessary since 'print 0,' == ''
while(b < limit):
    print b,
    a,b = b,a+b

# output:
# The Fibonacci series is :  0,1,1,2,3,5,8,13,21,34 
```

# iphone - NSPredicate：如何在过滤器中插入特殊字符（@ $ &）

> ID：12042463
> 
> 赞同：0
> 
> 时间：2012-08-20T17:47:31.483
> 
> 标签：iphone, ios, ios5, nspredicate, nspredicateeditor

快速的问题，我`NSPredicate`用来验证密码，我已经将此代码用于用户名：

```
-(BOOL)isUserValid:(NSString *)checkString{
    NSString       *filter = @"[A-Z0-9a-z]{5,40}";
    NSPredicate *evaluator = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", filter];
    return [evaluator evaluateWithObject:checkString];
} 
```

但现在在密码上，我想允许用户使用特殊字符，例如“@”、“$”、“&”、“*”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:03:11.107

我不知道您究竟需要多少个字符或指定的字符允许用户使用。但是，根据您的问题示例，如果您只想允许用户使用`@`, `$`, `&`,`*`字符。参考以下代码。

```
-(BOOL)isUserValid:(NSString *)checkString{
    NSString       *filter = @"[A-Z0-9a-z@$&*]{5,40}";
    NSPredicate *evaluator = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", filter];
    return [evaluator evaluateWithObject:checkString];
} 
```

以下过滤器代码是流行的密码表达式之一。字母数字字符并选择特殊字符。密码也不能以数字、下划线或特殊字符开头，并且必须至少包含一位数字。

> 匹配密码1 | pa$$word2 | 爸！@#$%3
> 
> 密码不匹配 | 第一个密码 | $密码#

```
-(BOOL)isUserValid:(NSString *)checkString{
        NSString       *filter = @"^(?=[^\\d_].*?\\d)\\w(\\w|[!@#$%]){5,40}";
        NSPredicate *evaluator = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", filter];
        return [evaluator evaluateWithObject:checkString];
    } 
```

以及更多关于密码的表达式过滤器。查看网站：[regexlib_password](http://regexlib.com/Search.aspx?k=password&AspxAutoDetectCookieSupport=1)

以下参考是您在工作时会提供帮助。并记住以下关于字符和括号的表达式。

```
Character Classes

.   Matches any character except newline. Will also match newline if single-line mode is enabled.
\s  Matches white space characters.
\S  Matches anything but white space characters.
\d  Matches digits. Equivalent to [0-9].
\D  Matches anything but digits. Equivalent to [^0-9].
\w  Matches letters, digits and underscores. Equivalent to [A-Za-z0-9_].
\W  Matches anything but letters, digits and underscores. Equivalent to [^A-Za-z0-9_].
\xff    Matches ASCII hexadecimal character ff.
\x{ffff}    Matches UTF-8 hexadecimal character ffff.
\cA Matches ASCII control character ^A. Control characters are case insensitive.
\132    Matches ASCII octal character 132.

Bracket Expressions

[adf?%] Matches characters a or d or f or ? or %.
[^adf]  Matches anything but characters a, d and f.
[a-f]   Match any lowercase letter between a and f inclusive.
[A-F]   Match any uppercase letter between A and F inclusive.
[0-9]   Match any digit between 0 and 9 inclusive. Does not support using numbers larger than 9, such as [10-20].

[:upper:]   Matches uppercase letters. Equivalent to A-Z.
[:lower:]   Matches lowercase letters. Equivalent to a-z.
[:alpha:]   Matches letters. Equivalent to A-Za-z.
[:alnum:]   Matches letters and digits. Equivalent to A-Za-z0-9.
[:ascii:]   Matches ASCII characters. Equivalent to \x00-\x7f.
[:word:]    Matches letters, digits and underscores. Equivalent to \w.
[:digit:]   Matches digits. Equivalent to 0-9.
[:xdigit:]  Matches characters that can be used in hexadecimal codes. Equivalent to A-Fa-f0-9.
[:punct:]   Matches punctuation.
[:blank:]   Matches space and tab. Equivalent to [ \t].
[:space:]   Matches space, tab and newline. Equivalent to \s.
[:cntrl:]   Matches control characters. Equivalent to [\x00-\x1F\x7F].
[:graph:]   Matches printed characters. Equivalent to [\x21-\x7E].
[:print:]   Matches printed characters and spaces. Equivalent to [\x21-\x7E ]. 
```

# qt - 如何在 Windows 下链接从 Qt Creator 中的源代码构建的 Qt 库？

> ID：12042467
> 
> 赞同：2
> 
> 时间：2012-08-20T17:47:34.450
> 
> 标签：qt, linker

我在**Windows 7**下运行**Qt Creator 2.4.1**。它适用于以下 SDK 附带的库**`.dll``C:\QtSDK`**

 **最近，我从源代码构建了[4.8.2 库](http://releases.qt-project.org/qt4/source/qt-win-opensource-4.8.2-mingw.exe)`C:\qt-source`，如下所示：

```
configure -platform win32-g++ -no-phonon -no-phonon-backend -no-webkit \
          -fast -debug -opensource -shared -no-qt3support -no-sql-sqlite \
          -no-openvg -no-gif -no-libpng -no-libmng -no-libtiff -no-libjpeg \
          -no-script -no-scripttools -nomake examples -nomake demos -no-xmlpatterns 
mingw32-make 
```

为了链接新库，我`C:\qt-source\4.8.2\bin\qmake.exe`在 Tools > Options > Build & Run > Qt Versions 下添加了 Manual Qt 4.8.2。但是，Qt Creator 似乎仍然从中获取 .dll 库`C:\QtSDK`**

# java - android phonegap 自定义插件需要的建议

> ID：12042470
> 
> 赞同：3
> 
> 时间：2012-08-20T17:47:47.430
> 
> 标签：java, android, printing, phonegap-plugins, stario-sdk

我在 phonegap（html5、JQuery、JS）中开发了一个应用程序，我想开发一个插件来打印到 BT 打印机。

我下载了打印机制造商的 SDK，并使用我在项目中需要的所有方法将适当的 .jar 文件导入到我的项目中。

我按照互联网教程创建了以下插件，以便从 JS 调用打印机制造商 SDK 的 JAVA 方法。

JS

```
var HelloPlugin = {
    callNativeFunction: function (success, fail, resultType) {
        return cordova.exec(success, fail, "com.tricedesigns.HelloPlugin", "nativeAction", [resultType]);
    }
}; 
```

JAVA

```
package com.tricedesigns;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import com.starmicronics.stario.StarIOPort;
import com.starmicronics.stario.StarIOPortException;
import com.starmicronics.stario.StarPrinterStatus;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.util.Log;

public class HelloPlugin extends Plugin {

    public static final String NATIVE_ACTION_STRING="nativeAction";
    public static final String SUCCESS_PARAMETER="success";

    @Override
    public PluginResult execute(String action, JSONArray data, String callbackId) {

        if (NATIVE_ACTION_STRING.equals(action)) {
            this.ctx.runOnUiThread(new Runnable()
            {
                public void run()
                {
                    String resultType = null;
                    StarIOPort port = null;
                    String message = null;
                    String portName = "bt:";
                    String portSettings = "mini";
                    byte[] texttoprint = new byte[]{0x1b, 0x40, 0x1b,0x74,0x0D,(byte) 0x91,(byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95,(byte) 0x96,(byte) 0x97,(byte) 0x98,(byte) 0x99,0x0A,0x0A,0x0A,0x0A,0x0A};

                    try 
                    {
                        port = StarIOPort.getPort(portName, portSettings, 10000);

                        try
                        {
                            Thread.sleep(500);
                        }
                        catch(InterruptedException e) {}

                    }
                    catch (StarIOPortException e)
                    {

                        Builder dialog = new AlertDialog.Builder((Context)ctx);
                        dialog.setNegativeButton("Ok", null);
                        AlertDialog alert = dialog.create();
                        alert.setTitle("Failure");
                        alert.setMessage("Failed to connect to printer");
                        alert.show();
                    }
                    finally
                    {
                        if(port != null)
                        {
                            try 
                            {
                                StarIOPort.releasePort(port);
                            } catch (StarIOPortException e) {}
                        }
                    }
            }
            });
        }
     return null;
    }
} 
```

打印机命令手册说：

GetPort 将用于“打开”打印机端口。使用前面提到的 portName 和 portSettings 的有效输入之一，您可以将连接字符串传递给 StarIO 类，以便它正确设置其私有变量。

```
//The following would be an actual usage of getPort:
StarIOPort port = null;
try
{
port = StarIOPort.getPort(portName, portSettings, 10000);
}
catch (StarIOPortException e)
{
//There was an error opening the port
} 
```

StarIOPort 是 StarIO 的一部分，这将允许您创建一个“端口”句柄。上面的示例显示了正在创建的端口并将其设置为 null，然后在包含 getPort 的下一行中为其分配了实际的端口挂钩。使用 getPort 时始终使用 try, catch。如果端口因为连接问题而无法打开，你的程序就会崩溃，除非你像上面的例子那样使用 try, catch。

上面的插件语法是正确的还是我错过了什么？

当我运行我的应用程序时，即使打印机已打开并连接到我的设备，我总是会收到“无法连接到打印机”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:19:04.827

试试这个：

```
public PluginResult execute(String action, JSONArray data, String callbackId) {
    PluginResult result = null;
    if (PRINT_ACTION.equals(action))
    {
        JSONObject printerStatusJSON = new JSONObject();
        try {
            Boolean prtStatus = false;
            String msg ="Failed to connect to printer";
            String portName = "";
            ArrayList<PortInfo> dvss = PrinterFunctions.getDevices();//BTPortList  = StarIOPort.searchPrinter("BT:");

            if (Looper.myLooper() == null) {
                Looper.prepare();
            }

            for(PortInfo dvs : dvss) {
                Map<String, String> st = PrinterFunctions.CheckStatus(dvs.getPortName(), "mini");//port = StarIOPort.getPort(portName, portSettings, 1000);
                if(st.get("status") == "true") {
                    prtStatus = true;
                    portName = st.get("portName"); 
                    break;
                }
                msg = st.get("message");
            }

            if(!portName.isEmpty()) {
                PrinterFunctions.PrintSomething(portName, data);//MiniPrinterFunctions.PrintSampleReceipt(String portName, JSONArray data);
            }

            printerStatusJSON.put("prtStatus", prtStatus);
            printerStatusJSON.put("message", msg);

            result = new PluginResult(Status.OK, printerStatusJSON);
        } 
        catch (Exception jsonEx) {
            Log.e("YourApplicationName", "Got JSON Exception " + jsonEx.getMessage());
            jsonEx.printStackTrace();
            result = new PluginResult(Status.JSON_EXCEPTION);
        }
    }
    else {
        result = new PluginResult(Status.INVALID_ACTION);
        Log.e(TAG, "Invalid action : " + action);
    }
    return result;
} 
```

# java - 从 android 连接到 MySQL 数据库。没有迹象表明它正在工作/不工作......？

> ID：12042472
> 
> 赞同：1
> 
> 时间：2012-08-20T17:47:59.397
> 
> 标签：java, android, mysql, json

我已经通过两个教程来获取我的这个项目的代码；

[连接到 MySQL 数据库](http://www.helloandroid.com/tutorials/connecting-mysql-database)

[通过 PHP 和 JSON 将 Android 连接到远程 mysql](http://www.gaanza.com/blog/how-to-mysql/)

由于我还是初学者并且同时使用了很多代码，因此我已经学习了一定程度的代码。这是我目前所拥有的：

```
package com.android.history;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class CurrentSeasonDrivers extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.currentseason_drivers);
    }

    //PARSE JSON ETC

    public void parseJSON() {

        String result = "";
        String drivername = "";
        String drivesfor = "";
        InputStream is=null;

    //HTTP POST REQUEST
        try{
                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://192.168.0.13/testdatabase.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
                Toast.makeText(getBaseContext(), "Could not connect", Toast.LENGTH_LONG).show();

        }

        //CONVERT DATA TO STRING
        try{

                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();

                result=sb.toString();

        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
                Toast.makeText(getBaseContext(), "Could not convert result", Toast.LENGTH_LONG).show();
        }

        //PARSE JSON DATA
        try{

                JSONArray jArray = new JSONArray(result);
                JSONObject json_data=null;

                for(int i=0;i<jArray.length();i++){
                    json_data = jArray.getJSONObject(i);

                    drivername=json_data.getString("Driver_full_name");
                    drivesfor=json_data.getString("Drives_for");

                }
        }catch(JSONException e){  
                Log.e("log_tag", "Error parsing data "+e.toString());
                Toast.makeText(getBaseContext(), "Could not parse data", Toast.LENGTH_LONG).show();
        }  

    }
} 
```

现在我没有错误，应用程序工作正常。当我到达这一切都是为之而设的页面时，我什么也没得到。一个空白页。正如您从我的代码中看到的那样，我添加了 toasts 异常，但它们都没有出现。即使我故意关闭我的服务器，这也很奇怪。还有什么我应该做的。正如标题所说，因为 toasts 不起作用，我不知道代码是否真的在做任何事情。我只有一个空白页。

我已将 Internet 添加到我的清单中以允许应用程序访问它。如果我`192.168.0.13/testdatabase.php`通过浏览器访问代码 ( ) 中的 URL，则数据库中的数据显示得很好。

**编辑：**我最终想要的总体结果是显示数据库中的一些数据供我的用户查看。而不是将其作为静态文本放入并且必须更新整个应用程序只是为了更新一些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:58:22.400

您需要在 API 级别 11 或更高级别的单独线程上实现网络连接。看看这个链接：[HTTP Client API level 11 or higher in Android](https://stackoverflow.com/questions/10904225/http-client-api-level-11-or-greater-in-android)。

同样对于 POST 请求，我认为您可以使用以下代码：

```
public String post(String str) {
        String result = "";
        try {
            HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpPost postRequest = new HttpPost(SERVER_ADDRESS);
            StringEntity input = new StringEntity(str);
            input.setContentType("application/json");
            postRequest.setEntity(input);
            HttpResponse response = httpClient.execute(postRequest);
            result = getResult(response).toString();
            httpClient.getConnectionManager().shutdown();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return result;
}

private StringBuilder getResult(HttpResponse response) throws IllegalStateException, IOException {
            StringBuilder result = new StringBuilder();
            BufferedReader br = new BufferedReader(new InputStreamReader((response.getEntity().getContent())), 1024);
            String output;
            while ((output = br.readLine()) != null) 
                result.append(output);

            return result;      
} 
```

# ruby-on-rails - Country_select 设计中的宝石

> ID：12042473
> 
> 赞同：0
> 
> 时间：2012-08-20T17:48:01.113
> 
> 标签：ruby-on-rails

我是 rails 的新手，请告诉 plz 为什么此代码不起作用我使用 gem Devise 进行注册，我想让用户选择他的国家（使用 gem country_select），当我注册新用户时，我输入了表格：

```
<div id='maintitle'><h1>Sign up</h1></div>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
...
<div class='some_fild'>Email*<br />
<%= f.email_field :email %></div>
....
<div class='some_fild'>Confirm<br />
<%= f.password_field :password_confirmation %></div>

???? <---

<div><%= f.submit "Sign up" %></div> 
```

我把我的“用户”数据库表列“国家”

我必须在我的数据库中的“国家”列中的这个选择 seva 中放置什么字符串而不是“????<---”？

我认为是这样的：

```
<%= f.country_select :country, 'select' %> 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:52:13.407

您需要提供要设置的模型和属性 - 在该表单上，您的模型实例存储在内部`resource`，因此您需要：

我使用了[README](https://github.com/stefanpenner/country_select#example)中的示例，它没有提及如何在表单中使用它 - 我假设它是相同的。

# json - 普通表单提交与 JSON

> ID：12042476
> 
> 赞同：26
> 
> 时间：2012-08-20T17:48:04.183
> 
> 标签：json, post

我看到了在客户端获取 JSON 响应和格式化的优势，但是与普通提交相比，使用 JSON 进行表单提交有什么优势吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-23T11:47:07.473

处理 POST 数据时想到的一件事是无用的重复：

例如，在 POST 中，我们有这个：

```
partners[]=Apple&partners[]=Microsoft&partners[]=Activision 
```

我们实际上可以看到，这里有很多重复，就像我们发送 JSON 时一样：

```
{"partners":["Apple","Microsoft","Activision"]} 
```

59 个字符与 47 个字符。在这个小示例中，它看起来微不足道，但这些节省可能会越来越多，甚至几个字节也会为您节省一些数据。当然，在服务器端解析数据，这可以消除差异，但我仍然看到这在处理较慢的连接时有时会有所帮助（看看你，3G 和 EDGE）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-15T17:53:53.313

我没有看到任何关于文件提交的提及，所以我想我会插话。FormData 似乎是通过 AJAX 向服务器提交文件的标准方式。我没有遇到任何使用 JSON 的解决方案，但可能有一种方法可以序列化/反序列化文件......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T18:01:45.410

这可能取决于您的服务器端应用程序。您通常使用 POST 将数据发布到服务器，因此如何格式化下划线数据取决于您希望服务器如何处理它。POST 提供了某种形式的 key->value 协议，而在 JSON 中你可以放更多。您还可以通过将 GET 放在 url 中来传输 json。

您必须将 json 视为一种写入数据的方式，而使用 POST 的正常提交应该为您提供一种传输数据的方式（当然，您可以滥用它的 key->value 功能来排序数据）。

HTTP 之上存在协议，可以帮助您定义 Web 应用程序的接口。一个很好的例子是 RESTfull [http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

特别是对于提交表单，我没有看到任何优势，POST 最初就是为此而设计的。在某些情况下，您不仅要传输表单中的数据，还要传输一些元数据，在这种情况下，json 可能会通过以某种 json 格式编码表单数据（带有元数据）来帮助您，但最后您仍然会滥用 POST 进行传输这个json数据。

希望我回答了你的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T18:15:23.470

我没有看到基本表单提交有任何明显的优势。但是在处理复杂结构时，您将开始意识到组织数据的优势。

因此，如果您有一个简单的联系表格（姓名、电子邮件、消息），请坚持使用普通表格`POST`。但是考虑提交一个完整的用户简历，在你的服务器端脚本中处理大量的变量是非常烦人的。

这是一个将 JSON 与 PHP 结合使用的示例

```
//Here are the submission data
{
    "personalInformation": {
        "name": "hey",
        "age": "20"
    },
    "education": {
        "entry1": {
            "type": "Collage",
            "year": "2012"
        },
        "entry2": {
            "type": "Highschool",
            "year": "2010"
        }
    }
}

$CV_Data = json_decode($_POST['json_form'], true);
$CV_Data['personalInformation']['name'];
$CV_Data['personalInformation']['age'];
//Or you can loop
foreach($CV_Data['education'] as $entry){
   $entry['type'];
   $entry['year'];
} 
```

如您所见，在这里使用 JSON 可以让您更轻松地处理数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T15:50:30.203

我实际上正在努力解决同样的问题。我的用例要求将潜在的复杂树发布到服务器。一些框架能够将二维数组解码为表单属性（Spring WebMVC 是我所知道的）。即便如此，这仅在您发送嵌套数组时的特定情况下对您有所帮助。名称-值-对的固有性质使其不适合传输超过一层深度的树。过去，我使用过一些技巧，例如将 URL 编码的 JSON 作为属性值发送：

```
val0=%7B%22name%22%3A%22value%22%7D&val1=something&val2=something+else 
```

但是，当对象变得更复杂时，这种方法会变得混乱且难以调试。此外，许多框架提供了自动将 JSON 表单 post 映射到对象的工具（例如：Jackson for Java），不利用这些工具似乎很迟钝。

所以最终，选择取决于您发送的对象的复杂性。如果对象仅限于一级深度，则使用直接名称-值-对；如果对象很复杂并且涉及深度嵌套的树，请使用 JSON。

# javascript - 内容淡入背景

> ID：12042481
> 
> 赞同：0
> 
> 时间：2012-08-20T17:48:43.607
> 
> 标签：javascript, jquery, html, css

我在这个网站上工作：http: [//mccraymusic.com/newsite/](http://mccraymusic.com/newsite/)我无法确定如何在背景上正确淡入导航栏点击“进入网站”时背景褪色后。我知道导航栏还没有样式。我很确定我有正确的导航代码来淡入。只是不知道如何让它工作，所以它会在我想要的时候淡入。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:12:30.597

I suspect you need to use a callback in jQuery. Basically, the second function runs AFTER the first has completed.
[http://www.w3schools.com/jquery/jquery_callback.asp](http://www.w3schools.com/jquery/jquery_callback.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:14:45.560

Here is a fiddle of it [http://jsfiddle.net/YL4p7/](http://jsfiddle.net/YL4p7/)

Fadein has a builtin callback, just add you animation into that callback and it will execute after the background has faded in.

also add relative position to #container so that it can be seen over the bg image.

```
$(function() {
    var images = ["black.jpg","bg.jpg"];
    $('<img>').attr({'src':'http://mccraymusic.com/newsite/assets/images/'+images[0],'id':'bg','alt':''}).appendTo('#bg-wrapper').parent().fadeIn(0);

    $('.move').animate({
            top:200,
            left:250,
    });

    $('.entersite').click(function(e) {
        e.preventDefault();
        var image = images[1];
        $('#bg').parent().fadeOut(200, function() {
            $('#bg').attr('src', 'http://mccraymusic.com/newsite/assets/images/'+image); 
              $(this).fadeIn(1000, function() {
                  $('.navbar').fadeIn(1000);
              });
        });
        $('.move').animate({"left": "-=50px", "top": "-=200px"});
    });
});​ 
```

# iphone - 应用程序因巨大的分配而崩溃？

> ID：12042483
> 
> 赞同：0
> 
> 时间：2012-08-20T17:48:55.450
> 
> 标签：iphone, objective-c, ipad, memory-management, cocos2d-iphone

我有一个小游戏，我想在 Instruments 中测试泄漏和分配，但是几秒钟后，它就崩溃了。我提供了一个截图。请看一下。关于我的应用程序的一些信息：在我的初始场景（导致崩溃）中，我使用`CCVideoPlayer`, `CCSpriteBatchNode`, `CCSpriteFrameCache`.

以下是我如何使用它们：

```
//CCVideoPlayer

    NSUserDefaults *uD = [NSUserDefaults standardUserDefaults];

            if([uD boolForKey:@"videoShown"] == NO){
                [CCVideoPlayer setDelegate:self];
                [CCVideoPlayer playMovieWithFile:@"Main.mp4"];
                [uD setBool:YES forKey:@"videoShown"];
            } 
```

和

```
//spriteframecache and batchnode
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"sprites.plist"];
            spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"sprites.png"]; 
```

我不在这个类中使用调度程序。

[http://oi47.tinypic.com/35hmwrb.jpg](http://oi47.tinypic.com/35hmwrb.jpg)

如果您需要更详细的分配截图，请告诉我哪一张，我会上传。谢谢你的帮助。

# c++ - 指针访问冲突问题

> ID：12042484
> 
> 赞同：0
> 
> 时间：2012-08-20T17:48:56.777
> 
> 标签：c++, pointers

我知道出现了很多这样的问题，但我已经尝试/搜索了一切都无济于事。

**更新开始**

测试班

```
#include "stdafx.h"

#include "testerClasser.h"

Tester::Tester(){

}

void Tester::GetNum(int * num){

    int num2 = 6;

    *num = num2;// error thrown here

} 
```

调用 GetNum 函数的示例

```
int _tmain(int argc, _TCHAR* argv[])
{

    int* num = NULL;

    Tester* tester = new Tester();

    tester->GetNum(num);

    return 0;
} 
```

错误 Tester.exe 中 0x77c115de 处的未处理异常：0xC0000005：访问冲突写入位置 0x00000000。 **更新结束**

我有一个方法

`void CCCamera::getEyeXYZ(float *pEyeX, float *pEyeY, float *pEyeZ) {`

 ````
*pEyeX = m_fEyeX;
*pEyeY = m_fEyeY;
*pEyeZ = m_fEyeZ; 
```` 

`}`

我试图调用该方法

```
float* pEyeX = new float(10);
float* pEyeY= new float(10);
float* pEyeZ= new float(10);
this->m_pCamera->getEyeXYZ (pEyeX,pEyeY,pEyeZ); 
```

和

```
float* pEyeX;
float* pEyeY;
float* pEyeZ;
this->m_pCamera->getEyeXYZ (pEyeX,pEyeY,pEyeZ); 
```

甚至

```
 float pEyeX;
float pEyeY;
float pEyeZ;
this->m_pCamera->getEyeXYZ (&pEyeX,&pEyeY,&pEyeZ); 
```

他们显然是我想念的东西，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:48:20.317

在下面的代码中，您试图取消引用函数`NULL`内部的指针`GetNum`。

```
int _tmain(int argc, _TCHAR* argv[])
{

    int* num = NULL;

    Tester* tester = new Tester();

    tester->GetNum(num); //will result in NULL pointer dereference inside GetNum!

    return 0;
} 
```

您需要的很可能是以下内容：

```
int _tmain(int argc, _TCHAR* argv[])
{
    int num = 0;

    Tester* tester = new Tester();

    tester->GetNum(&num); // pass a pointer to local variable

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:56:55.080

首先要做的是找出导致问题的指针。您报告的症状强烈表明您的`this`或`this->m_pCamera`指针有问题。尝试使用参数`pEye...`指针不会有任何区别，因为它们可能与问题完全无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:53:42.137

那么问题是什么？

第一个块有效，第二个块没有（指向“无处”的指针，在编程中实际上并不存在，所以它们只是指向或多或少的随机位置），第三个块又好了。

# jquery-plugins - Jquery Pageslide 不工作

> ID：12042486
> 
> 赞同：1
> 
> 时间：2012-08-20T17:49:07.463
> 
> 标签：jquery-plugins

这似乎根本不是一个复杂的插件，但我无法让它工作 - 它让我发疯。任何帮助，将不胜感激。我确定我错过了一些星期一的细节。

这是网址： [http ://damon9.com/dev/DC/](http://damon9.com/dev/DC/)

单击“恢复”按钮应向右滑动页面

```
<!DOCTYPE HTML>
<html>
<head>
 <script type="text/javascript" src="lib/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.pageslide.js"></script>

<script type ="text/javascript">  <!---  I've tried both of these below and some others -->

$("a#resume_btn").pageslide({ direction: "right", modal: true });

$("#resume_btn").pageslide(); 

</script>
</head>
<body>
<a href="#modal" id="resume_btn"></a>

    <div id="modal" style="display:none">

 <p>This slide uses "modal" option set to "true". When using a modal pageslide, clicking on     the main window will not close the window. You must explicitly call <code>$.pageslide.close()</code>.</p>
        <p><a href="javascript:$.pageslide.close()">Close</a></p>

</div>
</body 
```

css

```
#pageslide {
 /* These styles MUST be included. Do not change. */
 display: none;
 position: absolute;
 position: fixed;
 top: 0;
 height: 100%;
 z-index: 999999;

 /* Specify the width of your pageslide here */
 width: 400px;
 padding: 20px;

 /* These styles are optional, and describe how the pageslide will look */
 background-color: red;
 color: #FFF;
 -webkit-box-shadow: inset 0 0 5px 5px #222;
 -moz-shadow: inset 0 0 5px 5px #222;
 box-shadow: inset 0 0 5px 5px #222;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T07:22:14.120

试着放

```
<script type="text/javascript" src="js/jquery.pageslide.js"></script> 
```

标签前

```
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:31:37.403

尝试这个，

```
 <script type ="text/javascript">  
   $(function(){
    $("a#resume_btn").pageslide({ direction: "right", modal: true });
    $("#resume_btn").pageslide(); 
  });
 </script> 
```

# android - 在应用程序中打开/显示默认拨号器（实际上使用拨号器不向其传递数据）？

> ID：12042489
> 
> 赞同：0
> 
> 时间：2012-08-20T17:49:14.730
> 
> 标签：android, mobile, android-intent, telephony

我在这里看过一些[这样](https://stackoverflow.com/questions/3499550/using-android-dialer-in-3rd-party-app)的帖子，但这似乎并没有达到我的预期（除非我做错了。）我看到的其他帖子要么是关于用自定义拨号器替换拨号器，要么是通过拨号器的输入。

我不想更换拨号器，也不想在用户输入数字的地方传递数据，然后将其发送给拨号器。

我只想在应用程序中引入默认拨号器。例子：

1）用户打开应用程序，他们看到他们的默认拨号器，但标题不同（只是让他们知道他们在我的应用程序内）。他们输入号码，按呼叫它呼叫号码。

2）如果用户在应用程序之外按下他们的呼叫按钮，他们只是在没有我的应用程序的情况下进行正常拨号。所以用户永远不会在（2）中使用我的应用程序。

我认为这很清楚，但如果不是，请告诉我。由于我似乎无法在网上找到任何关于这样做的教程或帖子，这让我想知道这是否违反政策？或者也许担心用户会对他们在做什么感到困惑？我认为通过不同的标题，他们可以知道他们是否正在使用我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T19:23:48.090

> 我只想在应用程序中引入默认拨号器

对不起，但那是不可能的。

> 这让我想知道这是否违反政策？

如果“违反政策”是指“从技术角度来看不可能”，那么是的，这是违反政策的。总的来说，您不能将来自另一个进程的 UI 嵌入到您的进程中。这不是拨号器或您的应用程序所独有的。

# asp.net-mvc - 将局部视图连接到模型

> ID：12042490
> 
> 赞同：0
> 
> 时间：2012-08-20T17:49:15.590
> 
> 标签：asp.net-mvc, partial-views

我对 MVC3 部分视图有点墨守成规。我想要做的是在我的一个页面中有一个局部视图，并将来自局部视图的数据存储在模型中，然后传递回主视图。不过，现在发生的情况是，在提交数据后，返回给控制器的模型将部分视图模型设置为空。

**模型**

```
public class MyModel {
    ...(other variables)...

    [Required]
    [NotMapped]
    public virtual MyPartialView myPartial { get; set; }
} 
```

**看法**

```
@model MvcPartialViewExample.Models.MyModel

@{
    ViewBag.Title = "Create";
}

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>

    ...(other data)...

    @{ 
        Html.RenderPartial("_MyPartialView", Model.MyPartialView, new ViewDataDictionary());
    }
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
      @Html.ActionLink("Back to List", "Index")
 </div> 
```

**控制器**

```
public class MyModelController : Controller
{
    private MyModelContext db = new MyModelContext();

    //
    // GET: /PartialViewTesting/Create

    public ActionResult Create()
    {
        return View(new MyModel());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:55:04.210

如果要将*Model.MyPartialView*对象传回控制器，则需要向控制器添加另一个 Action 方法。应该看起来像这样：

```
[HttpPost]
public ActionResult Create(MyPartialView model)
{
    // handle postback here
} 
```

# php - 具有foreach的复杂多维关联数组过程

> ID：12042496
> 
> 赞同：1
> 
> 时间：2012-08-20T17:49:49.810
> 
> 标签：php, arrays, multidimensional-array, foreach

抱歉，我不得不再次问这个问题，但我在尝试处理这个数组时遇到了问题。我尝试了几种不同的方法，但都没有，这是数组：

```
Array ( 
  [search] => Array ( 
    [response] => Array ( 
      [errors] => 
      [number_of_hotels] => 1 of 1 
    ) 
    [lr_rates] => Array ( 
      [hotel] => Array  ( 
        [hotel_ref] => 3116 
        [hotel_currency] => [U] => USD 
        [hotel_rooms] => Array ( 
          [room] => Array ( 
            [ref] => 6382 
            [type] => 1 
            [type_description] => Standard 
            [sleeps] => 8 
            [rooms_available] => 
            [adults] => 8 
            [children] => 
            [breakfast] => false 
            [dinner] => false 
            [description] => 
            [alternate_description] => 
            [rack_rate] => 82.01 
            [date] => 19/08/201220/08/201221/08/2012
            [numeric_hotelcurrencyprice] => FullFullFull
            [formatted_date] => 19 August 201220 August 201221 August 2012 
            [price] => FullFullFull
            [hotelcurrencyprice] => FullFullFull 
            [numeric_price] => FullFullFull
            [requested_currency] => GBPGBPGBP 
            [numeric_hotelcurrencyprice] => FullFullFull
            [available_online] => false 
            [minimum_nights] => 1 
            [bed_type] => 
            [cancellation_policy] => 
            [cancellation_days] => 
            [cancellation_hours] => 
            [room_terms] => 
          )
          [room] => Array ( 
            [ref] => 6382 
            [type] => 1 
            [type_description] => Standard 
            [sleeps] => 8 
            [rooms_available] => 
            [adults] => 8 
            [children] => 
            [breakfast] => false 
            [dinner] => false 
            [description] => 
            [alternate_description] => 
            [rack_rate] => 82.01 
            [date] => 19/08/201220/08/201221/08/2012
            [numeric_hotelcurrencyprice] => FullFullFull
            [formatted_date] => 19 August 201220 August 201221 August 2012 
            [price] => FullFullFull
            [hotelcurrencyprice] => FullFullFull 
            [numeric_price] => FullFullFull
            [requested_currency] => GBPGBPGBP 
            [numeric_hotelcurrencyprice] => FullFullFull
            [available_online] => false 
            [minimum_nights] => 1 
            [bed_type] => 
            [cancellation_policy] => 
            [cancellation_days] => 
            [cancellation_hours] => 
            [room_terms] => 
          )
        ) 
        [cancellation_type] => First Night Stay Chargeable 
        [cancellation_policy] => 2 Days Prior to Arrival 

        [CityTax] => Array ( 
          [TypeName] => 
          [Value] => 
          [OptedIn] => 
          [IsCityTaxArea] => 
        )
      )
    )
  ) 
) 
```

好的，我需要遍历数组并创建一个循环，因此对于 ROOM 的每个实例，它都会重复该过程。然后我需要从房间数组中提取数据并使用它为每个房间实例填充 MySQL 中的行。

这是我到目前为止打印房间数组中的名称和值的代码。但是，它只获得其中一个房间阵列。**我该怎么做才能阅读所有房间？**我也认为这对于每个人来说太多了，但似乎无法遍历 ['']['']['']... 或仅使用关联名称。

```
foreach($arr['search'] as $lr_rates) {
        foreach($lr_rates['hotel'] as $hotel) {
                   foreach($hotel['room'] as  $field => $value){
                     print $field;print $value;
                          }

             }
      } 
```

值得一提的是，这些数组中的值总是在波动的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:59:27.793

我认为你真的可以稍微简化一下这句话。如果您知道这将永远是结构，那么您可以直接跳入酒店，然后进入房间。

```
foreach($arr['search']['lr_rates']['hotel'] as $hotel) {
      // You can access all of the keys in the hotel array here

      foreach($hotel['hotel_rooms'] as $room) {
          // Do stuff with the room array
      }  
} 
```

我建议您即时构建插入脚本并只调用一次数据库进行写入，或者如果您正在更新然后使用事务。随着房间数量的增加，您将通过大量写入磁盘来减慢脚本速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:00:48.967

数据输出的格式非常糟糕且不可读。我无法真正确定您要做什么。

1.  可能性：内部数组多次`[hotel_rooms] => Array ()`使用该键。`room`由于数组键是唯一的，因此您会覆盖索引处的数据`room`。这就是为什么你只能得到一个房间。

2.  可能性：`rooms`里面有`room`-> 使用递归函数遍历所有房间，如下所示：

    ```
    function handleRoom(array $room) {

        // do something with $room

        if (array_key_exists('room', $room)) {

            handleRoom($room['room']);
        }
    }

    $room = array(
        'some' => 'room',
        'data' => 'and another',
        'room' => array(
            'is' => 'inside',
            'of the' => 'main room',
        ),
    );

    handleRoom($room); 
    ```

# facebook - 如何从 Facebook 页面 URL 获取特定参数？

> ID：12042502
> 
> 赞同：0
> 
> 时间：2012-08-20T17:50:08.240
> 
> 标签：facebook, url, parameters, tabs

好吧，我正在尝试在我的 Facebook 页面选项卡上获取参数。（此页面选项卡会打开我构建的应用程序）。所以我正在尝试做类似**“http://www.facebook.com/mypagename/app_156916377306500?tag=iphone”**的事情，但什么也没发生。任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:05:07.030

从文档中应该清楚如何使用 app_data：

`app_data`是页面标签应用程序的 URL 中唯一的查询字符串参数，它被传递到您的应用程序，它存在于`signed_request`POST 到您的应用程序的页面标签 URL 中，并且需要使用应用程序密钥进行解密（尽管 SDK 会处理这一步适合你）

有关更多信息，请参阅[Page Tab App](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)文档和[signed_request](https://developers.facebook.com/docs/authentication/signed_request/)文档

# android - OGL ES 2.0 正交矩阵结果位置意外

> ID：12042505
> 
> 赞同：1
> 
> 时间：2012-08-20T17:50:32.313
> 
> 标签：android, opengl-es, opengl-es-2.0

我在弄清楚为什么我的三角形没有呈现在预期位置时遇到了一些麻烦。

我想画这个三角形：

```
private float vVertices[] = { 0.0f, 0.0f, 0.0f, 1.0f,
                              1.0f, 1.0f, 0.0f, 1.0f,
                              1.0f, 0.0f, 0.0f, 1.0f}; 
```

首先，我创建一个投影矩阵，如此[处所述](https://stackoverflow.com/questions/9617467/glortho-opengl-es-2-0-variant-how-fix-blank-screen)

```
float aspect_ratio = 800.0f/480.0f; 
ortho_matrix(-aspect_ratio, aspect_ratio, -1.0f, 1.0f, -1.0f, 1.0f, PROJECTION_MATRIX); 
```

然后我创建一个视图矩阵并将这两个相乘：

```
Matrix.setLookAtM(VIEW_MATRIX, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);    
Matrix.multiplyMM(mMVPMatrix, 0, PROJECTION_MATRIX, 0, VIEW_MATRIX, 0); 
```

现在我将 mvpMatrix 发送到我的着色器，

```
String vertexShader = "attribute vec4 vPosition; \n" +
                      "uniform mat4 orthoMatrix;" +
                      "void main()\n" +
                      "{\n" +
                      "    gl_Position = vPosition * orthoMatrix;" +
                      "}"; 
```

其中顶点使用此矩阵进行平移。然而，这不是我所期待的结果。

下图是上述代码的结果： ![错误的三角形位置](../Images/200b68ec7e7e7d82b763e1150bad0c39.png)

我希望三角形的原点位于 0, 0, 0 - 所以在屏幕的中心是这样的： ![预期的三角形位置](../Images/6fdbc2927b10683b9e103b327e78d974.png)

从上面的代码中，谁能告诉我我做错了什么，或者我错过了什么？

*编辑* 好的，似乎坐标以某种方式被镜像了......所以看起来像这样

```
1 ----+---- -1 
```

当我在 ortho_matrix 调用中反转 aspect_ratio 参数时，它看起来是正确的。但为什么这是必要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:20:50.650

您正在向后进行顶点着色器乘法。

它应该是 ：

`gl_Position = orthoMatrix * vPosition;`

# postgresql - 具有相同属性的时区名称在应用于时间戳时会产生不同的结果

> ID：12042506
> 
> 赞同：6
> 
> 时间：2012-08-20T17:50:33.200
> 
> 标签：postgresql, datetime, timezone

我刚刚花了一个小时对这两个表达式的这些结果的差异感到绝望：

```
 db=# SELECT '2012-01-18 1:0 **CET**'::timestamptz AT TIME ZONE 'UTC'
           ,'2012-01-18 1:0 **Europe/Vienna**'::timestamptz AT TIME ZONE 'UTC';
      timezone       |      timezone
---------------------+---------------------
 2012-08-**18** 00:00:00 | 2012-08-**17** 23:00:00 
```

显然，第二个表达式根据 DST 规则减去两个小时，其中第一个仅使用标准偏移量。

我检查了这两个时区名称的目录。它们都在那里并且看起来一样：

```
db=# SELECT * FROM pg_timezone_names WHERE name IN ('CET', 'Europe/Vienna');
     name      | abbrev | utc_offset | is_dst
---------------+--------+------------+--------
 Europe/Vienna | CEST   | 02:00:00   | t
 CET           | CEST   | 02:00:00   | t 
```

我查阅了[有关时区的 PostgreSQL 手册](http://www.postgresql.org/docs/9.1/static/datatype-datetime.html#DATATYPE-TIMEZONES)：

> PostgreSQL 允许您以三种不同的形式指定时区：
> 
> 完整的时区名称，例如 America/New_York。识别的时区名称列在 pg_timezone_names 视图中（参见第 45.67 节）。PostgreSQL 为此使用广泛使用的 zoneinfo 时区数据，因此许多其他软件也可以识别相同的名称。
> 
> 时区缩写，例如 PST。**这样的规范仅定义了与 UTC 的特定偏移量，而全时区名称也可以暗示一组夏令时转换日期规则。**公认的缩写列在 pg_timezone_abbrevs 视图中（参见第 45.66 节）。您不能将配置参数 timezone 或 log_timezone 设置为时区缩写，但您可以在日期/时间输入值和 AT TIME ZONE 运算符中使用缩写。

粗体强调我的。

那么为什么会有差异呢？

### 我的设置（添加了更多详细信息）

*   Debian Squeeze 上的 PostgreSQL 9.1.4（来自[http://backports.debian.org/debian-backports](http://backports.debian.org/debian-backports)的标准挤压反向端口）

*   本地`timezone`设置默认为系统 locale `de_AT.UTF-8`，但应该与示例无关。

```
SELECT version();
                                                version
-------------------------------------------------------------------------------------------------------
 PostgreSQL 9.1.4 on x86_64-unknown-linux-gnu, compiled by gcc-4.4.real (Debian 4.4.5-8) 4.4.5, 64-bit

SHOW timezone_abbreviations;

 timezone_abbreviations
------------------------
 Default 
```

..（我假设）从这个文件加载缩写：/usr/share/postgresql/9.1/timezonesets/Default

我不知道时区名称`CET`的来源。但显然它存在于我的装置中。[对 sqlfiddle](http://www.sqlfiddle.com/#!1/49199/1)的快速测试显示了相同的结果。

我在具有类似设置的两台不同服务器上进行了测试。还有 PostgreSQL 8.4。在所有这些中找到“CET”作为时区*名称。*`pg_timezone_names`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:09:47.473

在我发布这个之后，我运行了另一个查询来检查怀疑：

```
SELECT * FROM pg_timezone_abbrevs
WHERE  abbrev IN ('CEST', 'CET');

 abbrev | utc_offset | is_dst
--------+------------+--------
 CEST   | 02:00:00   | t
 CET    | 01:00:00   | f 
```

事实证明，还有**一个**名为的时区**缩写**`CET`（这是有道理的，“CET”是一个缩写）。似乎 PostgreSQL 选择了缩写而不是全名。因此，即使我`CET`在时区*名称*中找到，表达式 '2012-01-18 1:0 CET'::timestamptz 也会根据时区*缩写*的细微不同规则进行解释。

```
SELECT '2012-01-18 1:0 CEST'::timestamptz(0)
      ,'2012-01-18 1:0 CET'::timestamptz(0)
      ,'2012-01-18 1:0 Europe/Vienna'::timestamptz(0);

      timestamptz       |      timestamptz       |      timestamptz
------------------------+------------------------+------------------------
 2012-01-18 00:00:00+01 | 2012-01-18 01:00:00+01 | 2012-01-18 01:00:00+01

SELECT '2012-08-18 1:0 CEST'::timestamptz(0)
      ,'2012-08-18 1:0 CET'::timestamptz(0)
      ,'2012-08-18 1:0 Europe/Vienna'::timestamptz(0);

      timestamptz       |      timestamptz       |      timestamptz
------------------------+------------------------+------------------------
 2012-08-18 01:00:00+02 | 2012-08-18 02:00:00+02 | 2012-08-18 01:00:00+02 
```

我在时区*名称中发现了 10 个时区**缩写*，但不明白为什么会有这些。目的是什么？

 *其中，`utc_offset`由于 DST 设置，时间偏移 ( ) 在四种情况下不一致：

```
SELECT n.*, a.*
FROM   pg_timezone_names n 
JOIN   pg_timezone_abbrevs a ON  a.abbrev = n.name
WHERE  n.utc_offset <> a.utc_offset;

 name | abbrev | utc_offset | is_dst | abbrev | utc_offset | is_dst
------+--------+------------+--------+--------+------------+--------
 CET  | CEST   | 02:00:00   | t      | CET    | 01:00:00   | f
 EET  | EEST   | 03:00:00   | t      | EET    | 02:00:00   | f
 MET  | MEST   | 02:00:00   | t      | MET    | 01:00:00   | f
 WET  | WEST   | 01:00:00   | t      | WET    | 00:00:00   | f 
```

在这些情况下，人们可能会被愚弄（就像我一样），查找 tz*名称*并找到实际未应用的时间偏移量。这是一个不幸的设计——如果不是错误，至少是**文档错误**。

我在手册中找不到有关如何解决时区*名称*和*缩写*之间的歧义的任何内容。显然缩写优先。

[附录 B.1。日期/时间输入解释](http://www.postgresql.org/docs/current/interactive/datetime-input-rules.html)提到了查找时区缩写，但仍**不清楚**如何识别时区*名称*以及在不明确标记的情况下哪个具有优先权。

> 如果标记是文本字符串，则匹配可能的字符串：
> 
> 对作为时区缩写的令牌执行二进制搜索表查找。

嗯，这句话有一个轻微的暗示，缩写是第一位的，但没有确定的。`abbrev`此外，两个表中都有一列，`pg_timezone_names`并且`pg_timezone_abbrevs`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:27:42.890

时区*缩写*不包括夏令时 (DST) 转换规则的原因是它们往往*暗示*一种状态。在美国中西部，我们在冬季使用 CST（中部标准时间），其余时间使用 CDT（中部夏令时间）。有不使用夏令时的异常区域，因此变得复杂。

PostgreSQL 不维护自己的时区数据，尽管它在每个版本中为那些不提供它的操作系统打包了最新的 Olson 时区数据。通常，PostgreSQL 会使用来自操作系统的时区信息，所以如果您遇到问题，请确保那里有最新版本。

作为参考，在我今天的系统上，我得到了这些结果：

```
test=# SELECT '2012-01-18 1:0 CET'::timestamptz AT TIME ZONE 'UTC'
test-# ,'2012-01-18 1:0 Europe/Vienna'::timestamptz AT TIME ZONE 'UTC';
      时区 | 时区       
---------------------+---------------------
 2012-01-18 00:00:00 | 2012-01-18 00:00:00
(1 行)

test=# SELECT * FROM pg_timezone_names WHERE name IN ('CET', 'Europe/Vienna');
     姓名 | 缩写 | utc_offset | is_dst
---------------+--------+------------+--------
 中考 | CEST | 02:00:00 | 吨
 欧洲/维也纳 | CEST | 02:00:00 | 吨
(2 行)

```

```
test=# SELECT * FROM pg_timezone_abbrevs
test-# WHERE abbrev IN ('CEST', 'CET');
 缩写 | utc_offset | is_dst
--------+------------+--------
 CEST | 02:00:00 | 吨
 中考 | 01:00:00 | F
(2 行)

测试=#选择'2012-01-18 1:0 CEST'::timestamptz(0)
测试-#,'2012-01-18 1:0 CET'::timestamptz(0)
test-# ,'2012-01-18 1:0 Europe/Vienna'::timestamptz(0);
      时间戳 | 时间戳 | 时间戳记       
------------------------------------+------------+ ----------------------
 2012-01-17 17:00:00-06 | 2012-01-17 18:00:00-06 | 2012-01-17 18:00:00-06
(1 行)

测试=#选择'2012-08-18 1:0 CEST'::timestamptz(0)
测试-#,'2012-08-18 1:0 CET'::timestamptz(0)
test-# ,'2012-08-18 1:0 Europe/Vienna'::timestamptz(0);
      时间戳 | 时间戳 | 时间戳记       
------------------------------------+------------+ ----------------------
 2012-08-17 18:00:00-05 | 2012-08-17 19:00:00-05 | 2012-08-17 18:00:00-05
(1 行)

```*

# git - git pre-receive hook - 获取最新代码

> ID：12042507
> 
> 赞同：4
> 
> 时间：2012-08-20T17:50:36.153
> 
> 标签：git, githooks

我正在尝试编写一个`pre-receive hook`for git，它将提取最新版本的正在推送的代码并针对它运行单元测试。我的代码在下面，但是当它到达“git checkout $newrev”时，我得到：

> 远程：致命：参考不是树：188de39ca68e238bcd7ee9842a79397f39a5849e

在接收发生之前，我需要做什么才能结帐正在推送的代码？

```
#!/bin/bash
while read oldrev newrev refname
do
  echo "Preparing to run unit tests for $newrev"
  TEST_DIR=/opt/git/sommersault-push-tests/sommersault

  # check out this version of the code
  unset GIT_DIR
  echo $refname
  cd $TEST_DIR
  git checkout $newrev

  ...do more stuff...
done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-04T23:16:56.757

尽管其他人建议已收到提交，但尚未编写。

我什至会说，预接收挂钩更适合部署后接收挂钩。这就是 Heroku 使用预接收钩子进行部署的原因。如果你的部署没有通过，你可以拒绝提交。

这是一些应该为您解决问题的代码：

```
#!/bin/bash
while read oldrev newrev refname
do
    echo "Preparing to run unit test for $newrev ... "
    git archive $newrev | tar -x -C /tmp/newrev
    cd /tmp/newrev

    echo "Running unit test for $newrev ... "
    # execute your test suite here

    rc=$?

    cd $GIT_DIR
    rm -rf /tmp/newrev
    if [[ $rc != 0 ]] ; then
        echo "Push rejected: Unit test failed on revision $newrev."
        exit $rc
    fi
done

exit 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-01T10:51:48.687

我正在使用这个基于这个[howto](http://codeutopia.net/blog/2011/06/30/how-to-automatically-run-unit-tests-from-a-git-push/)的脚本。仅在选定的分支中执行 phpunit

```
#!/bin/sh

while read oldrev newrev refname
do
    # Only run this script for the dev branch. You can remove this
    # if block if you wish to run it for others as well.
    if [ $refname = "refs/heads/dev" ] ; then
        # Anything echo'd will show up in the console for the person
        # who's doing a push
        echo "Preparing to run phpunit for $newrev ... "

        # Since the repo is bare, we need to put the actual files someplace,
        # so we use the temp dir we chose earlier
        mkdir -p /tmp/$refname
        git archive $newrev | tar -x -C /tmp/$refname

        echo "Running phpunit for $newrev ... "

        # This part is the actual code which is used to run our tests
        # In my case, the phpunit testsuite resides in the tests directory, so go there
        cd /tmp/$refname
        composer install > /dev/null

        # And execute the testsuite, phpunit will send a response error if tests fail
        phpunit --group no-db

        # Clean temp dir
        rm -rf /tmp/$refname
    fi
done

# Everything went OK so we can exit with a zero
exit 0 
```

随意定制...

# colors - 计算所有 HEX 颜色值组合的代码

> ID：12042508
> 
> 赞同：0
> 
> 时间：2012-08-20T17:50:40.613
> 
> 标签：colors, hex

我想创建所有十六进制颜色值组合的完整列表（000000 - FFFFFF）。

是否有代码或脚本可以相当快地生成所有这些？所有 1600 万种颜色？

我什至不知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:24:26.880

这可以用任何语言轻松完成。但这里以 python 为例：

```
for i in range(0x1000000):
   print '%06x,' % i, 
```

# javascript - 与phonegap一起使用时未绑定mootools touchevents

> ID：12042514
> 
> 赞同：0
> 
> 时间：2012-08-20T17:50:58.067
> 
> 标签：javascript, android, cordova, mootools, cordova-2.0.0

我正在使用 mootools 和 phonegap 构建一个 android 示例应用程序。

当我使用 android 浏览器访问我的 html/javascript 时，它工作正常。但是当我用 phonegap 创建一个应用程序时，它会停止监听事件。

```
el.addEvent('mousedown', touchednow.bind(this));
el.addEvent('touchstart', touchednow.bind(this)); 
```

这些行在浏览器中有效，但在 phonegap 中却没有。当我触摸按钮时没有任何反应。我在 touchnow 函数中有简单的警报我正在使用 MooTools 版本 1.2.4 和 phonegap(cordova) 2.0

phonegap 是否会阻止 mootools 监听事件？

请注意其他代码，如 el.setstyles 也适用于 phonegap。这只是不起作用的事件。

# javascript - 我们可以使用 javascript 在 http 请求中添加引荐来源网址吗？

> ID：12042517
> 
> 赞同：1
> 
> 时间：2012-08-20T17:51:21.123
> 
> 标签：javascript, html, csrf, csrf-protection

我正在一个网站上测试 CSRF。该网站通过检查推荐人字段来阻止 CSRF。现在我创建了一个发送请求的 HTML 页面。如何使用 JavaScript 或任何其他方法将引用字段添加到该请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:50:30.640

网页*不*应该能够`Referer`使用 JavaScript 向请求添加标头。但是，根据[Wikipedia](https://en.wikipedia.org/wiki/Cross-site_request_forgery)的说法，依赖`Referer`标头仍然存在一些问题：

*   一些代理会自动去除`Referer`标题。所以它并不总是在那里。

*   网页“可以`Referer`通过从 FTP 或 HTTPS URL 发出请求来抑制标头。”</p>

*   “[O]ld 版本的 Flash（9.0.18 之前）允许恶意 Flash使用 CRLF 注入**生成带有任意 HTTP 请求标头的 GET 或 POST 请求**。”</p>

# windows-phone-7 - 横向截断键盘的原因

> ID：12042522
> 
> 赞同：5
> 
> 时间：2012-08-20T17:51:49.997
> 
> 标签：windows-phone-7

我有一个带有 Pivot 的页面，带有 TextBox 控件。在横向中，SIP（虚拟键盘）向右偏移 42 个像素，因此被剪裁到右侧。

![横向剪切的键盘](../Images/66724d364003834f862a50dcaea237d5.png)

我的另一个应用程序也有类似的页面，没有偏移键盘问题。在我深入研究两者之间的差异之前，有没有人遇到过这个问题？我们可以认为这是 Windows Phone 7.1 的错误吗？

（它也确实发生在真实设备上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:42:35.303

这是windows phone中的一个错误：

如果您将应用栏上的模式属性设置为最小化，然后将其变为横向，则应用栏会弹出。计算出在哪里显示键盘的代码没有意识到这一点，并且显示键盘就好像应用程序栏仍然最小化一样。

我通过随着方向的变化改变应用栏的模式来解决它：

```
private void phoneApplicationPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
{
  if (e.Orientation == PageOrientation.LandscapeLeft || e.Orientation == PageOrientation.LandscapeRight)
  {
    this.ApplicationBar.Mode = Microsoft.Phone.Shell.ApplicationBarMode.Default;
  }
  else
  {
    this.ApplicationBar.Mode = Microsoft.Phone.Shell.ApplicationBarMode.Minimized;
  }
} 
```

这似乎可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:37:59.677

尝试检查代码中某处是否设置了共同的右偏移边距。这是这种行为的最可能原因。

我自己从未经历过这个错误。

# firefox - CSS3 3D 过渡在悬停时更改 Firefox 页面大小

> ID：12042524
> 
> 赞同：0
> 
> 时间：2012-08-20T17:51:59.737
> 
> 标签：firefox, css, css-transitions, css-transforms

我正在创建一个“书架”，其中包含使用 CSS3 变换来旋转 onHover 的书籍。

我的问题是，经过几次悬停后，页面会调整大小并变得更长。我只在 Firefox 12.0 中遇到这个问题。

示例：http: [//jsfiddle.net/49KQk/](http://jsfiddle.net/49KQk/)

```
<div id="most-checked-out-books">

    <div class="f1_container">
        <div class="f1_card">
            <div class="book front face">
                <img src="books/new/harryPotter1.png" alt="Harry Potter (series)" />
            </div>
            <div class="back face center">
                <em>Harry Potter (series)</em>
                <br /><hr />
                By: J.K. Rowling
                <br /><hr />
                Checked Out <b>425</b> Times
                <br /><hr />
                <a href="#" title="Find 'Harry Potter' in PolyCat"><i class="icon-share-alt"></i><br />Find in PolyCAT</a>
            </div>
        </div>
    </div> <!-- END CONTAINER -->

    <div class="f1_container">
        <div class="f1_card">
            <div class="book front face">
                <img src="books/new/ofMiceAndMen.png" alt="Of Mice and Men" />
            </div>
            <div class="back face center">
                <em>Of Mice and Men</em>
                <br /><hr />
                By: John Steinbeck
                <br /><hr />
                Checked Out <b>201</b> Times
                <br /><hr />
                <a href="#" title="Find 'Of Mice and Men' in PolyCat"><i class="icon-share-alt"></i><br />Find in PolyCAT</a>
            </div>
        </div>
    </div> <!-- END CONTAINER -->         

</div><!-- END MCO BOOKS --> 
```

CSS

```
.f1_container {
    height: 214px;
    margin: 0px auto;
    position: relative;
    width: 140px;
    z-index: 1;
    display: inline-block;
    padding: 0 13px 9px 13px;
}

.f1_container {
    -moz-perspective: 1000px;
    -webkit-perspective: 1000px;
    -o-perspective: 1000px;
}

.f1_card {

    -moz-transform-style: preserve-3d;
    -moz-transition: all 0.5s linear 0s;

    -webkit-transform-style: preserve-3d;
    -webkit-transition: all 0.5s linear 0s;

    -o-transform-style: preserve-3d;
    -o-transition: all 0.5s linear 0s;

    transform-style: preserve-3d;
    transition: all 0.5s linear 0s;

    height: 214px;
    width: 140px;
}

.f1_container:hover .f1_card, .f1_container.hover_effect #f1_card {
    -moz-transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    -o-transform: rotateY(180deg);
}

.f1_container:hover .face.back {
    visibility: visible\9;
    height: 214px\9;
    width: 155px\9;
}

.face {
    -moz-backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    -o-backface-visibility: hidden;
    backface-visibility: hidden;

    height: 100%;
    position: absolute;
    width: 100%;

    background-color: blue;
}

.face.back {
    -moz-box-sizing: border-box;
    -moz-transform: rotateY(180deg);

    -webkit-box-sizing: border-box;
    -webkit-transform: rotateY(180deg);

    -o-box-sizing: border-box;
    -o-transform: rotateY(180deg);

    box-sizing: border-box;
    transform: rotateY(180deg);

    background-color: white;
    padding-top: 5px;
    color: #333;
    display: block;
    text-align: center;
    font-family: "MyriadProRegular", sans-serif;

    /* IE HACK */
    visibility: hidden\9;
}

.back hr {
    width: 50%;
    margin-bottom: 10px;
}

.back i {
    font-size: 25px;    
}

.back a {
    font-size: 20px;
    text-decoration: none;
}

.back a:visited {
    color: blue;
}

.book {
    cursor: pointer;
}

.book img {
    height: 214px;
    width: 140px;
} 
```

您可以在悬停一两次后看到整个页面调整大小并且滚动条变小。任何想法如何解决这个错误？

格伦

# mysql - 登录到 sql

> ID：12042527
> 
> 赞同：0
> 
> 时间：2012-08-20T17:52:15.087
> 
> 标签：mysql, mysql5

我是一名学习 sql 的学生，正在做一个在 mySQL 5.5 社区版中设置数据库的任务。给我的命令没有那么详细。这是我到目前为止所做的： 这是我在设置 mySQL 5.5 后被告知要使用的命令。

```
mysql –h localhost –u root -p 
```

这会带回一长串帮助命令。我发现我需要使用： `mysql -u root -p`. 然后我得到有效的密码提示。那启动sql。接下来，我得到了这些语句来创建一个名为 user1 的用户。

```
USE mysql;
create user ‘user1’@’localhost’ identified by ‘user1’;
grant select, insert, update, delete, create, drop, references, execute on *.* to ‘user1’@’localhost’;
exit 
```

我逐行输入这些，它们似乎有效。不返回任何错误。但是，当我尝试使用以下命令启动用户时：

```
Login as user1
mysql –h localhost –u user1 –p
password is user1 
```

当我执行 mysql 行时，我得到一长串帮助命令。

我执行的命令有什么问题，为什么？我最初认为可能是这些命令是为早期版本编写的？我最初被告知要重新安装 mysql 并且没有错误。我得到与重新安装之前相同的结果。如果我需要解释或添加屏幕截图，我很乐意这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:57:01.017

很抱歉没有具体回答您的问题，但我建议您获得一个 mySQL 接口，这会使这一切变得更容易一些。在我的情况下，我仍然偶尔使用终端执行一些查询，但是为了用户管理和获得更好的演示，我使用了[phpMyAdmin](http://www.phpmyadmin.net/)，这使得整个过程更加整洁。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:57:27.080

[http://dev.mysql.com/doc/refman/5.0/en/connecting.html](http://dev.mysql.com/doc/refman/5.0/en/connecting.html)

```
mysql -h localhost -u user1 -ppassword database_name_here 
```

您的另一个选择：

```
mysql -h localhost -u user1 -p database_name_here 
```

但是对于第二个，您必须输入密码。

# javascript - 在 Html 上计算滚动

> ID：12042528
> 
> 赞同：-2
> 
> 时间：2012-08-20T17:52:16.647
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [每次使用 JavaScript/jQuery 滚动时，您能否获取用户的滚动位置？](https://stackoverflow.com/questions/7182375/can-you-get-the-users-scroll-position-every-time-they-scroll-with-javascript-jq)

我正在尝试在 JavaScript/Jquery 中编写有关使用滚动事件的内容。

这是我开始的地方，但我似乎无法弄清楚如何获得滚动值。

> 我正在寻找的是在页面上找到当前滚动位置的类/方法。

任何帮助是极大的赞赏。

```
$(document).ready(function () {
    $(window.parent.document).scroll(function () {

        var scroll_info = X;//X == the method/class of getting scroll value

        if (scroll_info > 40) {
            //show
            $('#ArrowImage').show(1000);
        } else {
            //hide
            $('#ArrowImage').hide(1000);
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:57:40.753

您可能会同时使用 JQuery 的 .prop 和 .scrollTop 方法来检索您尝试滚动的元素的垂直滚动条的位置。这是一个示例，它结合了其中的一些以将文本框滚动到其底部：

```
$('#chatTextContainer').scrollTop(
    $('#chatTextContainer').prop("scrollHeight") ); 
```

要查找当前滚动的顶部，您可以使用以下内容：

```
$(element).prop("scrollTop") 
```

您似乎正在寻找的是：

```
theTop = $("html").scrollTop(); 
```

# php - 如何在 PHP 中使用正则表达式在管道之间提取单词？

> ID：12042531
> 
> 赞同：0
> 
> 时间：2012-08-20T17:52:22.890
> 
> 标签：php, regex

我正在编写一个解析器，我需要使用 php 提取双管道之间的单词

例如，我想从下面的字符串中提取“ipsum”

```
Lorem ||ipsum|| blah 
```

如果双管道之间有多个单词，也应该提取它们

**澄清**

当我说多个词时，我不是这个意思：||另一个词||

我的意思是这个

```
||Word1|| blah blah (newline)
blah ||Word2|| 
```

**说明第 2 部分**

```
the ||quick|| brown fox ||jumps|| over the lazy ||dog|| 
```

应该提取的应该是'quick'，'jumps'和'dog'这三个词

很抱歉造成混乱......下面可能有一些正确的答案，我会在明天上班确认后选择一个:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:54:55.130

简单的怎么办

```
$array = explode('||', $string); 
```

之后，您可能希望使用 trim() 修剪数组值。

另见[http://www.php.net/explode](http://www.php.net/explode)和[http://www.php.net/trim](http://www.php.net/trim)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:55:49.797

这是一个正则表达式解决方案：[http ://regex101.com/r/vE9pY9](http://regex101.com/r/vE9pY9)

```
 /\Q||\E[^|]+\Q||\E/ 
```

不过，这不会接受管道作为单词的一部分。如果这是要求，则必须重新制作正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T17:56:26.077

尝试这个：

```
if(preg_match('/\|\|(.*)\|\|/', $str, $matches) === 1){
    echo $matches[1];
} 
```

或者如果有多个`||`，试试这个：

```
if(preg_match_all('/\|\|(.*?)\|\|/', $str, $matches) !== FALSE){
    print_r($matches[1]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T19:55:21.050

我想我知道你在找什么：

```
\|\|[a-zA-Z0-9]+\|\| 
```

这应该满足您的示例：

```
||Word1|| blah blah (newline)
blah ||Word2|| 
```

挑选出 Word1 和 Word2。

你需要剥掉`||`两边。

`||`除了 KISS，还有一种方法可以使用正则表达式来剥离。通常，以后将这些内容剥离出来更容易阅读和更容易。所以你有一个简单的正则表达式和一个简单的修剪。

希望能帮助到你，

# node.js - Node.js 同步提示

> ID：12042534
> 
> 赞同：10
> 
> 时间：2012-08-20T17:52:52.930
> 
> 标签：node.js, prompt

我正在使用 Node.js 的[提示库](http://github.com/flatiron/prompt)，并且我有以下代码：

```
var fs = require('fs'),
    prompt = require('prompt'),
    toCreate = toCreate.toLowerCase(),
    stats = fs.lstatSync('./' + toCreate);

if(stats.isDirectory()){
    prompt.start();
    var property = {
        name: 'yesno',
        message: 'Directory esistente vuoi continuare lo stesso? (y/n)',
        validator: /y[es]*|n[o]?/,
        warning: 'Must respond yes or no',
        default: 'no'
    };
    prompt.get(property, function(err, result) {                
        if(result === 'no'){
            console.log('Annullato!');
            process.exit(0);
        }
    });
}
console.log("creating ", toCreate);
console.log('\nAll done, exiting'.green.inverse); 
```

如果显示提示，似乎它不会阻止代码执行，但会继续执行，并且会显示控制台的最后两条消息，而我仍然必须回答问题。

有没有办法让它阻塞？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-21T16:27:20.210

不幸的是，使用 flatiron 的提示库，没有办法阻止代码。但是，我可能会建议我自己的[`sync-prompt`](https://github.com/shovon/sync-prompt)库。顾名思义，它允许您同步提示用户输入。

有了它，您只需发出一个函数调用，然后取回用户的命令行输入：

```
var prompt = require('sync-prompt').prompt;

var name = prompt('What is your name? ');
// User enters "Mike".

console.log('Hello, ' + name + '!');
// -> Hello, Mike!

var hidden = true;
var password = prompt('Password: ', hidden);
// User enters a password, but nothing will be written to the screen. 
```

因此，如果您愿意，请尝试一下。

请记住：**不要在 Web 应用程序上使用它**。它应该只用于命令行应用程序。

**更新：根本不要使用这个库。坦率地说，这完全是个笑话。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-12T01:37:26.280

从 Node.js 8 开始，您可以使用 async/await 执行以下操作：

```
const readline = require('readline');

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

function readLineAsync(message) {
  return new Promise((resolve, reject) => {
    rl.question(message, (answer) => {
      resolve(answer);
    });
  });
} 

// Leverages Node.js' awesome async/await functionality
async function demoSynchronousPrompt() {
  var promptInput = await readLineAsync("Give me some input >");
  console.log("Won't be executed until promptInput is received", promptInput);
  rl.close();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T18:01:06.407

由于 Node 中的 IO 不会阻塞，因此您不会找到一种简单的方法来使这样的事情同步。相反，您应该将代码移动到回调中：

```
 ...

  prompt.get(property, function (err, result) {               
    if(result === 'no'){
        console.log('Annullato!');
        process.exit(0);
    }

    console.log("creating ", toCreate);
    console.log('\nAll done, exiting'.green.inverse);
  }); 
```

或者提取它并调用提取的函数：

```
 ...

  prompt.get(property, function (err, result) {               
    if(result === 'no'){
        console.log('Annullato!');
        process.exit(0);
    } else {
        doCreate();
    }
  });

  ...

function doCreate() {
    console.log("creating ", toCreate);
    console.log('\nAll done, exiting'.green.inverse);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-16T20:46:04.450

老问题，我知道，但我刚刚找到了完美的工具。[readline-sync](https://github.com/anseki/readline-sync)为您提供了一种在节点脚本中收集用户输入的同步方式。

它使用起来非常简单，并且不需要任何依赖项（由于 gyp 问题，我无法使用同步提示）。

来自 github 自述文件：

```
var readlineSync = require('readline-sync');

// Wait for user's response.
var userName = readlineSync.question('May I have your name? ');
console.log('Hi ' + userName + '!'); 
```

我与这个项目没有任何关系，但它让我很开心，所以我不得不分享。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-11T16:04:01.020

我遇到了这个线程和所有解决方案：

*   实际上不提供同步提示解决方案
*   已过时，不适用于新版本的节点。

出于这个原因，我创建了[`syncprompt`](https://github.com/cheddar-lang/syncprompt) . 安装它，`npm i --save syncprompt`然后添加：

```
var prompt = require('syncprompt'); 
```

例如，这将允许您执行以下操作：

```
var name = prompt("Please enter your name? "); 
```

它还支持提示输入密码：

```
var topSecretPassword = prompt("Please enter password: ", true); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-01T21:18:24.393

[Vorpal.js](https://github.com/dthree/vorpal)是我创建的一个库，最近刚刚发布。它提供了具有交互式提示的同步命令执行，就像您要求的那样。下面的代码将满足您的要求：

```
var vorpal = require('vorpal')();

vorpal.command('do sync')
  .action(function (args) {
    return 'i have done sync';
  }); 
```

有了上述，提示将在一秒钟后返回（仅在调用回调后）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-29T21:21:07.707

这是无依赖的，同步的，适用于 Windows、Linux 和 OSX：

```
// Synchronously prompt for input
function prompt(message)
{
    // Write message
    process.stdout.write(message);

    // Work out shell command to prompt for a string and echo it to stdout
    let cmd;
    let args;
    if (os.platform() == "win32")
    {
        cmd = 'cmd';
        args = [ '/V:ON', '/C', 'set /p response= && echo !response!' ];
    }
    else
    {
        cmd = 'bash';
        args = [ '-c', 'read response; echo "$response"' ];
    }

    // Pipe stdout back to self so we can read the echoed value
    let opts = { 
        stdio: [ 'inherit', 'pipe', 'inherit' ],
        shell: false,
    };

    // Run it
    return child_process.spawnSync(cmd, args, opts).stdout.toString().trim();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-02T16:30:33.810

```
const buffer = Buffer.alloc(1024);
require("fs").readSync(process.stdin.fd, buffer);
console.log(buffer.toString()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-19T13:55:39.033

您可以使用[提示同步](https://github.com/heapwolf/prompt-sync#readme)

```
const prompt = require('prompt-sync')()

const ans = prompt('How many more times? ') // get input from the user. 
```

PS prompt-sync 行为很奇怪，如果提示信息包含换行符，所以如果你需要多行提示，只需使用`console.log()`：

```
const prompt = require('prompt-sync')()

console.log('How many more times?\n')
const ans = prompt('') // get input from the user. 
```

# macos - 通过 shell 脚本安装 Homebrew

> ID：12042537
> 
> 赞同：3
> 
> 时间：2012-08-20T17:52:56.057
> 
> 标签：macos, bash, homebrew

这一定很容易。我想通过 OS X 上的 shell 脚本安装 Homebrew。

Homebrew 推荐从终端安装，

```
$ ruby <(curl -fsSk https://raw.github.com/mxcl/homebrew/go) 
```

但是如果我将以下内容放入文件*test.sh*，

```
#!/bin/sh
ruby <(curl -fsSk https://raw.github.com/mxcl/homebrew/go) 
```

然后执行它，

```
$ sh test.sh 
```

我收到以下错误：

```
test.sh: line 2: syntax error near unexpected token `('
test.sh: line 2: `ruby <(curl -fsSk https://raw.github.com/mxcl/homebrew/go)' 
```

在 shell 脚本中使用什么正确的语法来使它工作，为什么它与命令行不同？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T17:54:23.990

它在抱怨，因为`sh`没有那种语法，但是`bash`有。改为使用`#!/bin/bash`。

此外，无需使用`sh`命令来执行 shell 脚本（这就是放置 hashbang 的重点！）。只是`chmod +x script.sh`和调用`./script.sh`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:54:42.167

当您以 emulates 方式运行`bash`时，`sh`它`sh`的功能比`bash`（包括您在此处尝试使用的功能）少得多。改为使用`/bin/bash`。

# c - 为什么这个函数返回垃圾值

> ID：12042538
> 
> 赞同：0
> 
> 时间：2012-08-20T17:52:57.853
> 
> 标签：c, function, pointers

我正在编写一个程序并面临以下函数用于返回垃圾值的问题：

```
int* foo(int temp){
   int x = temp;
   return &x;
} 
```

当我将其修改为此时，它工作正常：

```
int* foo(int *temp){
    int *x = temp;
    return x
} 
```

第一个版本有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T17:54:04.900

第一个版本返回对局部变量的引用，该变量`x`的存储仅限于函数`foo`。当函数退出时，`x`就不能再使用了。返回对它的引用是*悬空指针*的一个实例。

在第二个版本中，您实际上只是传入并返回相同的指针值，它指的*是不受*函数生命周期限制的内存。所以即使函数退出后，返回的地址仍然有效。

另一种选择：

```
int *foo(int temp)
{
    int *x = malloc(sizeof(int));
    *x = temp;
    return x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:44:57.720

对于每个函数，都会有一个激活记录，一旦该函数开始执行，它将在堆栈中创建。激活记录也包含所有的局部变量。一旦函数执行完成，该激活记录将被释放。

因此，如果我们返回一个局部变量的地址，则意味着前一个函数的激活记录将被释放内存。取消引用该内存是一种未定义的行为。

在下面的情况下，函数`foo`返回`&x`意味着`p`将保存`func`局部变量的地址`x`。这是有效的。但是如果函数`func`试图重新运行`p`（地址`x`）这是无效的。

```
int* func
{
   int x;
   int *p;
   ...
   p = foo(&x);
   //using p is valid here
   ...
   return p; //This is invalid
}

int* foo(int *temp)
{
   int *x = temp;
   return x //This is valid
} 
```

在下面的情况下，函数`foo`将其局部变量的地址返回`x`给函数`func`。所以`p`将保存`foo`'s 局部变量的地址。所以deferencing`p`是无效的，因为`foo`函数执行已经完成并且它的激活记录被释放了。

```
int* func
{
   int x;
   int *p;
   ...
   p = foo(x);
   //using p is invalid here
   ...
   return p; //This is invalid
}

int* foo(int temp)
{
   int x = temp;
   return &x; //This is also invalid
} 
```

# ajax - 将ajax post发送到控制器的问题

> ID：12042539
> 
> 赞同：1
> 
> 时间：2012-08-20T17:53:02.183
> 
> 标签：ajax, asp.net-mvc, json, asp.net-mvc-3, post

我有一个动作

```
[HttpPost]
    public JsonResult AddLocationsForOrder(List<BuyerOrderLocation> locations, string[] orders)
    {
        // something here
    } 
```

和发送请求的 js 代码：

```
data = { locations: serializedLocations, orders: selector.val() };
     $.ajax({
            url: addLocationUrl,
            success: function (responseText) { Core.responceReceived(responseText, null, null); },
            error: function () { Core.showErrorNotification("Sorry, some error occured. Please contact administrator"); },
            async: false,
            type: 'POST',
            dataType: 'json',
            data: JSON.stringify(data)

        }); 
```

萤火虫的帖子详细信息在这里：

```
locations

"[{"id":225,"country":"United States","countryShort":"US","state":"Iowa","stateShort":"IA","city":null,"zipCode":null,"address":"Douglas, IA, USA","latitude":41.9053851,"longtitude":-93.8349976,"bounds":null,"isDeleted":false,"county":"Boone","radius":0},{"id":226,"country":"United States","countryShort":"US","state":"Iowa","stateShort":"IA","city":null,"zipCode":null,"address":"Iowa, USA","latitude":41.8780025,"longtitude":-93.097702,"bounds":null,"isDeleted":false,"county":null,"radius":0}]"

orders

[ "10440" , "10441" , "10442" ]

0  "10440"

1  "10441"

2  "10442" 
```

和请求标头：

```
 Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Length  830
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  ASP.NET_SessionId=ewtvgwleg5or1lqctinpjv2d; .ASPXAUTH=8414A94FE30B8F8D6FE862259398F39D6F6D2EE995C9EE16549987E2E1291851788CAB75425579F61F70EBE4C7B785B07CB36773894A5B2A513966247AA5B670A25D4AE565796B449912D745EBE5E5E4AB8280902C132FC3D97C0C33BA2C2357372CD9C9EA49983DC4A8E875C6E4D653FA049EC7B0F3824666F35D3838226AA19ACEEC1B8C5716E995966787268313FEF90E2ABBAE989CA682D406EBCE361BB7
Host    local.attorneyboost
Referer http://local.attorneyboost/Order/OrderInfo/10439
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
X-Requested-With    XMLHttpRequest 
```

如您所见，请求类型是“POST”，我在发送到服务器之前是“Jsoning”数据。但在行动中，我得到了参数的空值。我究竟做错了什么？我已经被困在寻找错误上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:11:27.903

在[本文](http://erraticdev.blogspot.ca/2010/12/sending-complex-json-objects-to-aspnet.html)中，他们解释了如何将复杂的 JSON 对象发送到 ASP.NET。希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:36:38.920

您需要在请求中指定数据类型将其发送到服务器。你调用的datatype属性设置服务器响应的格式，设置需要发送到服务器的数据类型需要使用contentType属性

修改用这个调用的ajax

```
 $.ajax({
        url: addLocationUrl,
        success: function (responseText) { Core.responceReceived(responseText, null, null); },
        error: function () { Core.showErrorNotification("Sorry, some error occured. Please contact administrator"); },
        async: false,
        type: 'POST',
        dataType: 'json',
        data: JSON.stringify(data),
        contentType = 'application/json; charset=utf-8'
    }); 
```

您需要在请求中指定数据类型将其发送到服务器。你调用的`datatype`属性设置服务器响应的格式，设置需要发送到服务器的格式的数据类型你需要使用`contentType`属性

# firefox - 响应式网格在 Firefox 或 Opera 中不起作用

> ID：12042541
> 
> 赞同：0
> 
> 时间：2012-08-20T17:53:08.757
> 
> 标签：firefox, opera, responsive-design

出于某种原因，当我在 Firefox 中打开我的网站时，我的响应式网格会中断。我正在使用骨架网格系统，我之前在跨浏览器兼容性方面并没有遇到任何问题，但是我修改了网格（改为 8 列网格而不是 16 列），我想我可能已经破坏了一些东西。

我无法弄清楚，因为我所做的只是删除了其他 8 列的类。

这些列从它们应该的位置开始，但它们很大并且现在延伸到页面之外。

这是现场网站： http: [//nicki.smartbrandidentity.com/](http://nicki.smartbrandidentity.com/)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:01:54.917

如果我是你，我只会使用 16 列布局。使用 column1 时，请使用 column2。这些网格旨在为您提供尽可能多的选项，您不应该将自己限制为只有 8 个。

此外，查看 css，这看起来不像是“响应式”网格。所有的列都以像素为单位。如果您想要一个真正响应迅速的简单网格，请查看柱状网格系统。[http://www.columnal.com/](http://www.columnal.com/)

# java - JSP：为什么我在 EL 变量中得到 0 而不是 null？

> ID：12042543
> 
> 赞同：0
> 
> 时间：2012-08-20T17:53:11.417
> 
> 标签：java, jsp, jakarta-ee, el

在servlet中我这样做：

```
request.setAttribute("field-message", "Message"); 
```

在 JSP 中，我这样做：

```
<p>${field-message}</p> 
```

我在结果 HTML 文件中看到 0 而不是“消息”。

我应该怎么做才能在那里显示“消息”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:44:14.517

```
<p>${field-message}</p> 
```

这是两个属性之间的区别：“字段”和“消息”。两者都是空值，所以差异为零......

要么为属性选择另一个名称，要么使用构造`<p>${requestScope['field-message']}</p>`

# java - gwtent反射java

> ID：12042544
> 
> 赞同：1
> 
> 时间：2012-08-20T17:53:16.933
> 
> 标签：java, gwt, reflection

欢迎，我对“GWTENT”反射有疑问。

如何使用反射创建一个类？

我试过这个：

```
 try {
            ClassType ct = TypeOracle.Instance.getClassType(Klient.class);
            ct.invoke(null, "Klient", null);
        } catch (ReflectionRequiredException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
 ` 
```

打电话给班级：

```
package pl.cba.lukaszbaczek.client.Test;

import com.extjs.gxt.ui.client.widget.Window;
import com.google.gwt.user.client.Element;
import com.gwtent.reflection.client.Reflectable;
import com.gwtent.reflection.client.Reflection;

@Reflectable
public class Klient extends Window implements Reflection {

    @Override
    protected void onRender(Element parent, int index) {
        super.onRender(parent, index);
        setHeading("Klient");
        setSize(600, 600);
    }

    public Klient(){
        super();
        show();

    }
} 
```

但因错误而失败：

```
17:30:59.129 [ERROR] [makerbase] Uncaught exception escaped
com.gwtent.reflection.client.NotFoundException: Klient not found or unimplement? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:02:48.840

如果您在编译成 javascript 的客户端，则不能使用反射。您可以使用 GWT.create(Clazz.class) 但在编译时必须知道类签名。这是由于 javascript 编译器的要求。

这是一个使用生成器进行反射的链接 [你可以在 GWT 客户端中使用 Java Reflection api吗](https://stackoverflow.com/questions/4195233/can-you-use-java-reflection-api-in-gwt-client)

# templates - Joomla 会员网站的建议模板

> ID：12042548
> 
> 赞同：-1
> 
> 时间：2012-08-20T17:53:25.137
> 
> 标签：templates, joomla, membership

我需要使用 Joomla 2.5 建立会员网站

对于会员资格，我使用的是 ossolutions 团队的 Membership Pro 插件。

请向我推荐一个高级模板，用于 Joomla 2.5 会员资格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:55:32.533

我强烈建议浏览[Yootheme](http://yootheme.com)和[Rockettheme](http://rockettheme.com)网站。我一直在我的网站上使用他们的模板，并且永远都会这样做。

Yootheme 演示站点：[http ://www.yootheme.com/demo/](http://www.yootheme.com/demo/)

Rockettheme 演示站点：[http ://demo.rockettheme.com/](http://demo.rockettheme.com/)

我只是发现他们为 Joomla 模板设计带来了一定的独特性，他们的支持一直是一流的。

# c++ - 在 C++ 头文件中定义常量变量

> ID：12042549
> 
> 赞同：91
> 
> 时间：2012-08-20T17:53:35.383
> 
> 标签：c++, header, constants

我正在处理的一个程序有许多适用于所有类的常量。我想制作一个头文件“Constants.h”，并且能够声明所有相关的常量。然后在我的其他课程中，我可以只包括`#include "Constants.h`.

我使用`#ifndef`...`#define ...`语法让它正常工作。但是，我更喜欢使用`const int...`常量的形式。我不太确定怎么做。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-20T18:40:10.033

`const ints`您可以简单地在头文件中定义一系列：

```
// Constants.h
#if !defined(MYLIB_CONSTANTS_H)
#define MYLIB_CONSTANTS_H 1

const int a = 100;
const int b = 0x7f;

#endif 
```

这是因为在 C++ 中，显式声明为 const 而未显式声明 extern 的命名空间范围（包括全局命名空间）的名称具有内部链接，因此当您将翻译单元链接在一起时，这些变量不会导致重复符号。或者，您可以将常量显式声明为静态。

```
static const int a = 100;
static const int b = 0x7f; 
```

这与 C 更兼容，对于可能不熟悉 C++ 链接规则的人来说更具可读性。

如果所有常量都是整数，那么您可以使用的另一种方法是将标识符声明为枚举。

```
enum mylib_constants {
    a = 100;
    b = 0x7f;
}; 
```

所有这些方法都只使用一个标头，并允许将声明的名称用作编译时常量。使用`extern const int`和单独的实现文件可防止将名称用作编译时常量。

* * *

请注意，使某些常量隐式内部链接的规则*确实*适用于指针，就像其他类型的常量一样。棘手的是，将指针标记为`const`需要的语法与大多数人用来制作其他类型 const 的变量的语法略有不同。你需要做：

```
int * const ptr; 
```

制作一个常量指针，以便规则适用于它。

另请注意，这是我更喜欢始终放在`const`type:`int const`而不是`const int`. 我还将变量放在`*`旁边：即`int *ptr;`代替`int* ptr;`（也比较[此](https://www.quora.com/Where-should-I-put-the-asterisk-for-pointers-in-C++-Is-it-int*-ptr-int-*-ptr-or-int-*ptr)讨论）。

我喜欢做这些事情，因为它们反映了 C++ 真正工作的一般情况。替代品 ( `const int`, `int* p`) 只是特殊情况，以使一些简单的事情更具可读性。问题是，当您跳出这些简单案例时，特殊案例的替代方案会变得积极误导。

因此，尽管前面的示例显示了 的常见用法`const`，但我实际上建议人们这样编写它们：

```
int const a = 100;
int const b = 0x7f; 
```

和

```
static int const a = 100;
static int const b = 0x7f; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-12-27T03:44:37.267

为了这种目的，我更喜欢**命名空间。**

选项1 ：

```
#ifndef MYLIB_CONSTANTS_H
#define MYLIB_CONSTANTS_H

//  File Name : LibConstants.hpp    Purpose : Global Constants for Lib Utils
namespace LibConstants
{
  const int CurlTimeOut = 0xFF;     // Just some example
  ...
}
#endif

// source.cpp
#include <LibConstants.hpp>
int value = LibConstants::CurlTimeOut; 
```

选项 2：

```
#ifndef MYLIB_CONSTANTS_H
#define MYLIB_CONSTANTS_H
//  File Name : LibConstants.hpp    Purpose : Global Constants for Lib Utils
namespace CurlConstants
{
  const int CurlTimeOut = 0xFF;     // Just some example
  ...
}

namespace MySQLConstants
{
  const int DBPoolSize = 0xFF;      // Just some example
  ...
}
#endif

// source.cpp
#include <LibConstants.hpp>
int value = CurlConstants::CurlTimeOut;
int val2  = MySQLConstants::DBPoolSize; 
```

而且我永远不会使用 Class 来保存这种类型的 HardCoded Const 变量。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-11-29T14:15:56.937

**C++17`inline`变量**

这个很棒的 C++17 特性使我们能够：

*   方便地为每个常量只使用一个内存地址
*   将其存储为`constexpr`：[如何声明 constexpr extern？](https://stackoverflow.com/questions/30208685/how-to-declare-constexpr-extern)
*   从一个标题在一行中执行

主文件

```
#include <cassert>

#include "notmain.hpp"

int main() {
    // Both files see the same memory address.
    assert(&notmain_i == notmain_func());
    assert(notmain_i == 42);
} 
```

不是main.hpp

```
#ifndef NOTMAIN_HPP
#define NOTMAIN_HPP

inline constexpr int notmain_i = 42;

const int* notmain_func();

#endif 
```

非main.cpp

```
#include "notmain.hpp"

const int* notmain_func() {
    return &notmain_i;
} 
```

编译并运行：

```
g++ -c -o notmain.o -std=c++17 -Wall -Wextra -pedantic notmain.cpp
g++ -c -o main.o -std=c++17 -Wall -Wextra -pedantic main.cpp
g++ -o main -std=c++17 -Wall -Wextra -pedantic main.o notmain.o
./main 
```

[GitHub 上游](https://github.com/cirosantilli/cpp-cheat/tree/085c4b22b1b290a6d033a44958d05054e7e303c7/cpp/inline_variable).

另请参阅：[内联变量如何工作？](https://stackoverflow.com/questions/38043442/how-do-inline-variables-work)

**内联变量的 C++ 标准**

C++ 标准保证地址是相同的。[C++17 N4659 标准草案](https://github.com/cplusplus/draft/blob/master/papers/n4659.pdf) 10.1.6“内联说明符”：

> 6 具有外部链接的内联函数或变量在所有翻译单元中应具有相同的地址。

cppreference [https://en.cppreference.com/w/cpp/language/inline](https://en.cppreference.com/w/cpp/language/inline)解释说如果`static`没有给出，那么它有外部链接。

**内联变量实现**

我们可以观察它是如何实现的：

```
nm main.o notmain.o 
```

其中包含：

```
main.o:
                 U _GLOBAL_OFFSET_TABLE_
                 U _Z12notmain_funcv
0000000000000028 r _ZZ4mainE19__PRETTY_FUNCTION__
                 U __assert_fail
0000000000000000 T main
0000000000000000 u notmain_i

notmain.o:
0000000000000000 T _Z12notmain_funcv
0000000000000000 u notmain_i 
```

并`man nm`说`u`：

> "u" 该符号是唯一的全局符号。这是标准 ELF 符号绑定集的 GNU 扩展。对于这样的符号，动态链接器将确保在整个过程中只有一个具有此名称和类型的符号在使用中。

所以我们看到有一个专门的 ELF 扩展。

**关于“全局”的 C++17 标准草案`const`暗示`static`**

这是引用的内容：[https ://stackoverflow.com/a/12043198/895245](https://stackoverflow.com/a/12043198/895245)

[C++17 n4659标准草案](https://github.com/cplusplus/draft/blob/master/papers/n4659.pdf)6.5“程序与链接”：

> 3 具有命名空间范围 (6.3.6) 的名称如果是
> 
> *   (3.1) — 显式声明为静态的变量、函数或函数模板；或者，
> *   (3.2) — 非 volatile const 限定类型的非内联变量，既没有显式声明 extern，也没有先前声明为具有外部链接；或者
> *   (3.3) — 匿名工会的数据成员。

“命名空间”作用域就是我们俗称的“全局”作用域。

附录 C（资料性）兼容性，C.1.2 第 6 条：“基本概念”给出了从 C 更改的理由：

> 6.5 [还有 10.1.7]
> 
> 更改：显式声明为 const 而未显式声明 extern 的文件范围的名称具有内部链接，而在 C 中它将具有外部链接。
> 
> 理由：因为 const 对象可以在 C++ 中的翻译过程中用作值，所以这个特性敦促程序员为每个 const 对象提供一个显式的初始化程序。此功能允许用户将 const 对象放入包含在多个翻译单元中的源文件中。
> 
> 对原始特征的影响：改变定义明确的特征的语义。
> 
> 转换难度：语义转换。
> 
> 使用范围：很少。

另请参阅：[为什么 const 在 C++ 中暗示内部链接，而在 C 中却没有？](https://stackoverflow.com/questions/998425/why-does-const-imply-internal-linkage-in-c-when-it-doesnt-in-c)

在 GCC 7.4.0、Ubuntu 18.04 中测试。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-08-20T17:58:58.820

如果它包含在多个源文件中，通常不应`const int`在头文件中使用 eg。那是因为每个源文件（从技术上讲是翻译单元）将定义一次变量，因为[全局`const`变量是隐式的 static](https://stackoverflow.com/questions/998425/why-does-const-imply-internal-linkage-in-c-when-it-doesnt-in-c)，占用的内存比需要的多。

相反，您应该有一个特殊的源文件，`Constants.cpp`它实际上定义了变量，然后将变量声明为`extern`在头文件中。

像这样的头文件：

```
// Protect against multiple inclusions in the same source file
#ifndef CONSTANTS_H
#define CONSTANTS_H

extern const int CONSTANT_1;

#endif 
```

这在源文件中：

```
const int CONSTANT_1 = 123; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T17:58:11.657

与其创建一堆全局变量，不如考虑创建一个包含一堆公共静态常量的类。它仍然是全局的，但是通过这种方式，它被包装在一个类中，这样你就知道常量来自哪里，并且它应该是一个常量。

常量.h

```
#ifndef CONSTANTS_H
#define CONSTANTS_H

class GlobalConstants {
  public:
    static const int myConstant;
    static const int myOtherConstant;
};

#endif 
```

常量.cpp

```
#include "Constants.h"

const int GlobalConstants::myConstant = 1;
const int GlobalConstants::myOtherConstant = 3; 
```

然后你可以像这样使用它：

```
#include "Constants.h"

void foo() {
  int foo = GlobalConstants::myConstant;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-03T11:30:42.500

似乎 bames53 的答案可以扩展到在命名空间和类*声明*中定义整数和非整数常量值，即使它们包含在多个源文件中。不必将声明放在头文件中，而将定义放在源文件中。以下示例适用于 Microsoft Visual Studio 2015、OS/390 上的 z/OS V2.2 XL C/C++ 和 GNU/Linux 4.16.14 (Fedora 28) 上的 g++ (GCC) 8.1.1 20180502。请注意，常量仅在包含在多个源文件中的单个头文件中声明/定义。

在 foo.cc 中：

```
#include <cstdio>               // for puts

#include "messages.hh"
#include "bar.hh"
#include "zoo.hh"

int main(int argc, const char* argv[])
{
  puts("Hello!");
  bar();
  zoo();
  puts(Message::third);
  return 0;
} 
```

在messages.hh中：

```
#ifndef MESSAGES_HH
#define MESSAGES_HH

namespace Message {
  char const * const first = "Yes, this is the first message!";
  char const * const second = "This is the second message.";
  char const * const third = "Message #3.";
};

#endif 
```

在 bar.cc 中：

```
#include "messages.hh"
#include <cstdio>

void bar(void)
{
  puts("Wow!");
  printf("bar: %s\n", Message::first);
} 
```

在 zoo.cc 中：

```
#include <cstdio>
#include "messages.hh"

void zoo(void)
{
  printf("zoo: %s\n", Message::second);
} 
```

在 bar.hh 中：

```
#ifndef BAR_HH
#define BAR_HH

#include "messages.hh"

void bar(void);

#endif 
```

在动物园.hh：

```
#ifndef ZOO_HH
#define ZOO_HH

#include "messages.hh"

void zoo(void);

#endif 
```

这会产生以下输出：

```
Hello!
Wow!
bar: Yes, this is the first message!
zoo: This is the second message.
Message #3. 
```

数据类型`char const * const`是指向常量字符数组的常量指针。第一个`const`是必需的，因为（根据 g++）“ISO C++ 禁止将字符串常量转换为 'char*'”。第二个`const`是为了避免由于（然后不够恒定的）常量的多个定义而导致的链接错误。如果您省略其中一个或两个`const`s，您的编译器可能不会抱怨，但源代码的可移植性较差。

# ruby - 呼唤 rbenv gemset

> ID：12042553
> 
> 赞同：0
> 
> 时间：2012-08-20T17:53:53.433
> 
> 标签：ruby, resque, rbenv

在服务器上，我想安装一系列已上传到新创建的 gemset 的 gem。此安装应由 resque 工作人员完成。

创建 gemset 的目的是在类似于用户机器的环境中执行一些上传的 gem。

我不明白 rbenv 是如何工作的 100%，这确实引起了一些头痛。

关于如何解决这个问题的任何想法都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:31:42.087

你应该检查[chgems](https://github.com/postmodern/chgems#readme)。chgems 就像`chroot`RubyGems 一样。chgems 可以生成子 shell 或运行带有`PATH`,的命令`GEM_HOME`，`GEM_PATH`设置为将 gems 安装到`$directory/.gem/$ruby/$version/`.

```
$ chgems $directory gem install $user_gem
$ chgems $directory $user_command 
```

# github - 当您是 GitHub Repo 的贡献者时，如何在 Eclipse 中设置 Egit

> ID：12042558
> 
> 赞同：0
> 
> 时间：2012-08-20T17:54:11.987
> 
> 标签：github, egit

我是使用 Git (VCS) 的新手，但我能够使用我的 GitHub 存储库设置 Egit 并成功地对存储库进行提交等。一位同样不熟悉使用 Git/GitHub 的朋友在被添加为贡献者时在 Egit 中使用相同的存储库时遇到问题。

我的问题是，GitHub repo 的贡献者如何使用 Egit 从 GitHub 获取最新文件并提交项目，以及我们如何使用 Egit 来确保我们都拥有来自 GitHub repo 的更新文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T12:02:12.287

由于你们都有贡献者角色，因此他的机器上的工作流程应该完全相同。我建议安装 Mylyn 和[Mylyn github 连接器](http://marketplace.eclipse.org/content/github-mylyn-connector#.UEH3XorN-4o)，因为通过提供专用的导入向导（文件、导入、git、github），从 github 导入项目变得更加容易。

如果您想使用 SSH 身份验证，最困难的部分可能是设置 SSH 密钥，尤其是在 Windows 上。在这种情况下，您需要在 Eclipse 首选项（常规、网络、SSH）中指定您的密钥文件。

除此之外，你们两个只需要在之后拉取、提交和推送到上游。并不完全需要始终保持最新状态，因为您可以在 git 中轻松合并。

# javascript - 在任何地方通过 twitter 获取 oauth_token 和 oauth_token 秘密

> ID：12042561
> 
> 赞同：1
> 
> 时间：2012-08-20T17:54:23.170
> 
> 标签：javascript, oauth, twitter, twitter-oauth, twitter-anywhere

在任何地方使用 twitter API 登录后，有什么方法可以获取 oauth_token 和 oauth_token_secret？在 Facebook javascript API 中，我可以`FB.getAuthResponse()['accessToken']`获取 access_token。我正在寻找使用 twitter javascript api 获取它的类似方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:14:24.650

Twitter 不使用 OAuth 2。您需要实现一个 OAuth 1 客户端，幸运的是有很多可用的。在 JavaScript 世界中，我更喜欢这个：[https](https://github.com/bytespider/jsOAuth) ://github.com/bytespider/jsOAuth 。

# .htaccess - Drupal MP4 视频无法在 Firefox 中播放

> ID：12042565
> 
> 赞同：0
> 
> 时间：2012-08-20T17:54:25.233
> 
> 标签：.htaccess, video, drupal-7

我已将这两行添加到我们的 htaccess 文件中，但视频显示黑屏，没有找到支持的 MIME 类型和格式的视频：

```
AddType sites/default/files/videos/original/webm .webm
AddType sites/default/files/videos/original/mp4 .mp4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:02:17.027

`sites/default/files/videos/original/webm`并且`sites/default/files/videos/original/mp4`不是哑剧类型。您可能正在寻找`video/webm`和`video/mp4`，分别。

# java - Java嵌套内部类访问外部类变量

> ID：12042573
> 
> 赞同：10
> 
> 时间：2012-08-20T17:55:06.620
> 
> 标签：java, android, opengl-es

嵌套的内部类 ABar 和 BBar 是否可以访问主类的变量？例如：

```
public class Foo {
    public ABar abar = new ABar();
    public BBar bbar = new BBar();
    public int someCounter = 0;

    public class ABar {
        public int i = 0;
        public void someMethod(){
            i++;
            someCounter++;
        }
    }

    public class BBar {
        public void anotherMethod(){
            bbar.someMethod();
            someCounter++;
        }
    }
}
// then called using: //
Foo myFoo = new Foo();
myFoo.bbar.anotherMethod(); 
```

**编辑**

如果我先尝试的话，我输入的代码似乎会起作用；试图在不太具体的情况下寻求帮助。我实际上遇到问题的代码

由于错误“无法对非静态字段阶段进行静态引用”而失败

```
public class Engine {
    public Stage stage = new Stage();
        // ...
    public class Renderer implements GLSurfaceView.Renderer {
        // ...
        @Override
        public void onDrawFrame(GL10 gl) {
            stage.alpha++;
        }
    }

    public class Stage extends MovieClip {
        public float alpha = 0f;
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-20T17:57:31.980

在您的代码中，是的，这是可能的。

> 非静态嵌套类（内部类）可以访问封闭类的其他成员，即使它们被声明为私有。静态嵌套类无权访问封闭类的其他成员。

请参阅：[嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T21:54:55.310

如果您的内部类扩展了外部类，那么它将可以访问外部类的公共和受保护成员。我只是厌倦了它并且它起作用了。这个构造有点奇怪，因为它在类定义中暗示了一种无限循环，但它似乎可以完成这项工作。

# image - 位图图像文件大小

> ID：12042574
> 
> 赞同：0
> 
> 时间：2012-08-20T17:55:09.193
> 
> 标签：image, textures, multimedia

位图图像包含原始数据的纯表示。一个 512x512 的 24 位位图图像（如游戏纹理）的大小应该是 768KB。为什么 512x512 但 8 位而不是 256KB 是 257KB？此外，256x256 8 位图像是 65KB 而不是 64！（66,614 字节而不是 65536 字节）；但对于 24 位，它应该是完全正确的。谢谢...我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:59:19.913

“位图图像”是什么意思？它们确实包含原始数据，但它们也可能包含标题。和/或任何界面告诉您“65 Kb”都可能存在一些舍入错误。64K 图像的确切字节长度是多少？是 65536 字节，还是更多？

# python - 从 multiprocessing.Queue 获得接近 LIFO 行为的干净方法？（甚至只是*不*接近先进先出）

> ID：12042575
> 
> 赞同：9
> 
> 时间：2012-08-20T17:55:09.813
> 
> 标签：python, multiprocessing

有谁知道一种获得接近 LIFO 甚至不接近 FIFO（例如随机）行为的干净方法`multiprocessing.Queue`？

**替代问题：有人可以指出管理背后实际存储结构的线程代码`multiprocessing.Queue`吗？**提供大约 LIFO 访问似乎是微不足道的，但我在试图找到它的兔子洞中迷路了。

笔记：

1.  相信`multiprocessing.Queue` [不保证顺序](http://bugs.python.org/issue4999)。美好的。但它接近先进先出，所以接近 LIFO 会很棒。
2.  在使用它们之前，我可以将所有当前项目从队列中拉出并颠倒顺序，但如果可能的话，我更愿意避免混乱。

* * *

（编辑）澄清：我正在做一个 CPU 绑定模拟，`multiprocessing`因此不能使用来自`Queue`. 由于我几天没有看到任何答案，所以我在上面添加了替代问题。

* * *

`multiprocessing.Queue`如果这是一个问题，下面是接近 FIFO的轻微证据。它只是表明在一个简单的情况下（单线程），它在我的系统上是完美的 FIFO：

```
import multiprocessing as mp
import Queue

q = mp.Queue()

for i in xrange(1000):
    q.put(i)

deltas = []
while True:
    try:
        value1 = q.get(timeout=0.1)
        value2 = q.get(timeout=0.1)
        deltas.append(value2-value1)
    except Queue.Empty:
        break

#positive deltas would indicate the numbers are coming out in increasing order
min_delta, max_delta = min(deltas), max(deltas)
avg_delta = sum(deltas)/len(deltas)

print "min", min_delta
print "max", max_delta
print "avg", avg_delta 
```

打印：最小值、最大值和平均值正好为 1（完美 FIFO）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:48:17.963

我查看了存在`Lib/multiprocessing/queues.py`于我的 Python 安装中的 Queue 类（Python 2.7，但在我简要检查的 Python 3.2 版本中没有什么明显的不同）。这是我理解它的工作原理：

Queue 对象维护了两组对象。一组是所有进程共享的多进程安全原语。其他的由每个进程单独创建和使用。

跨进程对象在`__init__`方法中设置：

1.  一个`Pipe`对象，其两端保存为`self._reader`和`self._writer`。
2.  一个`BoundedSemaphore`对象，它计算（并且可以选择限制）队列中有多少对象。
3.  用于读取管道的`Lock`对象，在非 Windows 平台上用于写入的对象。（我认为这是因为在 Windows 上写入管道本质上是多进程安全的。）

每个进程的对象在`_after_fork`和`_start_thread`方法中设置：

1.  `collections.deque`用于缓冲写入管道的对象。
2.  `threading.condition`用于在缓冲区不为空时发出信号的对象。
3.  执行实际写入的`threading.Thread`对象。它是惰性创建的，因此在给定进程中至少请求一次写入队列之前，它不会存在。
4.  `Finalize`进程结束时清理东西的各种对象。

队列中的A`get`非常简单。你获取读锁，减少信号量，并从管道的读端抓取一个对象。

A`put`比较复杂。它使用多个线程。调用者获取`put`条件的锁，然后将其对象添加到缓冲区并在解锁之前发出条件信号。如果它还没有运行，它还会增加信号量并启动编写器线程。

编写器线程在方法中永远循环（直到取消）`_feed`。如果缓冲区为空，则等待`notempty`条件。然后它从缓冲区中取出一个项目，获取写锁（如果存在）并将该项目写入管道。

* * *

那么，考虑到所有这些，您可以修改它以获得 LIFO 队列吗？这似乎并不容易。管道本质上是 FIFO 对象，虽然 Queue 不能保证整体的 FIFO 行为（由于来自多个进程的写入的异步性质），但它总是主要是 FIFO。

如果您只有一个消费者，您可以`get`从队列中获取对象并将它们添加到您自己的进程本地堆栈中。做一个多消费者堆栈会更难，尽管使用共享内存，一个有限大小的堆栈不会太难。您需要一个锁、一对条件（用于在满状态和空状态下阻塞/发出信号）、一个共享整数值（用于持有的值的数量）和一个适当类型的共享数组（用于值本身）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:10:45.260

Queue 包中有一个[LIFO 队列](http://docs.python.org/library/queue.html#Queue.LifoQueue)（Python 3 中的队列）。这未在 multiprocessing 或 multiprocessing.queues 模块中公开。

将您的行替换`q = mp.Queue()`为`q = Queue.LifoQueue()`并运行打印：最小值、最大值和平均值正好为 -1。

（另外我认为从一个线程中获取项目时，您应该始终获得准确的 FIFO/LIFO 顺序。）

# c# - 使用带有 webBrowser 控件的代理 C#/.net 3.5

> ID：12042591
> 
> 赞同：6
> 
> 时间：2012-08-20T17:56:41.003
> 
> 标签：c#, .net, proxy, webbrowser-control, ip-address

我需要一些已经使用 webBrowser 控件和代理的人的帮助。

我需要的是以下内容。

1 - 为 webBrowser 控件设置代理。2 - 加载特定站点。3 - 在站点上执行例程。4 - 为 webBrowser 控件设置不同的代理。5 - 加载另一个站点。6 - 从点号 3 执行相同的程序。

并且该过程保持这种方式，从代理列表循环，直到所有代理都被使用。

但。我在使用该应用程序时遇到了一些问题。要做到这一点：

1 - 我正在使用附加的代码将代理设置到 webBrowser 控件中，但在执行过程中似乎只工作一次，当我在循环中再次调用它时它就不起作用了，我不明白为什么。

2 - 我在确定页面何时完全加载时遇到问题，我的意思是，当我设置要加载的第一个站点时，我需要程序等到它完成加载，然后对其执行例程，并继续该过程。

希望有人可以帮助我解决这个问题...

/// 我正在使用的函数 -----------------

```
 private void SetProxy(string Proxy)
    {

        MessageBox.Show("Setting :" + Proxy);
        string key = "Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings";

        RegistryKey RegKey = Registry.CurrentUser.OpenSubKey(key, true);
        RegKey.SetValue("ProxyServer", Proxy);
        RegKey.SetValue("ProxyEnable", 1);

    } 
```

// 应用逻辑 --------------------------------------

```
 SetProxy("190.97.219.38:80");
        webBrowser1.Navigate("http://www.whatismyip.com/");
        ExecuteRoutine();

        SetProxy("187.93.77.235:80");
        webBrowser1.Navigate("http://www.whatismyip.com/");
        ExecuteRoutine();

        SetProxy("109.235.49.243:80");
        webBrowser1.Navigate("http://www.whatismyip.com/");
        ExecuteRoutine(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-16T14:22:28.993

也许这个链接很有用：

[http://blogs.msdn.com/b/jpsanders/archive/2011/04/26/how-to-set-the-proxy-for-the-webbrowser-control-in-net.aspx](http://blogs.msdn.com/b/jpsanders/archive/2011/04/26/how-to-set-the-proxy-for-the-webbrowser-control-in-net.aspx)

我测试了代码，它似乎工作。但有两点很重要：

*   它与编译模式“任何 CPU”的项目不兼容（x86 工作正常）
*   仅适用于 HTTP 代理服务器；不适合袜子

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T18:03:15.800

1-我猜webBrowser控件仅在创建代理时检查代理，因此在设置代理后创建一个新控件

2-导航不是阻塞调用，不会等到页面加载，使用`webBrowser.DocumentCompleted`事件

下面的代码应该可以工作（未测试）

```
void Exec(string proxy,string url)
{
    var th = new Thread(() =>
    {
        SetProxy(proxy);
        using (WebBrowser wb = new WebBrowser())
        {
            wb.DocumentCompleted += (sndr, e) =>
            {
                ExecuteRoutine();
                Application.ExitThread();
            };
            wb.Navigate(url);
            Application.Run();
        }
    });
    th.SetApartmentState(ApartmentState.STA);
    th.Start();
    th.Join();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:58:33.923

过去我有一个[类似](https://stackoverflow.com/questions/5326324/will-i-be-able-to-tell-a-hosted-internet-explorer-web-browser-control-to-always)的问题。该问题的[公认答案](https://stackoverflow.com/a/5327181/107625)建议查看此 Microsoft 知识库文章：

**"[如何在 Internet Explorer 下以编程方式查询和设置代理设置](http://support.microsoft.com/kb/226473/en-us)"**

基本上，您必须执行一些 P/Invoke 并调用一些 WinInet DLL 函数。尽管我从未在实际项目中尝试过，但我强烈认为这是要走的路。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-31T12:24:40.170

只是为了让大家知道，这个家伙已经发布了 5 个问题，都在问同样的问题，并且根据他的第一个问题以及他被击倒的严重程度，他似乎正在尝试进行某种类型的网络犯罪。现在，根据我对他的才智的解读，他可能很快就会入狱，但我只是在想，也许我们可以让他知道不可能为服务提供虚构的 IP 地址，从而使他摆脱困境您正在与之通信（因为如果您这样做了，服务将无法联系到您以提供响应）。这是他的娱乐清单：

[https://stackoverflow.com/questions/12045317/how-to-hide-my-ip-address-c-net-3-5](https://stackoverflow.com/questions/12045317/how-to-hide-my-ip-address-c-net-3-5)

[使用带有 webBrowser 控件的代理 C#/.net 3.5](https://stackoverflow.com/questions/12042591/use-a-proxy-with-webbrowser-control-c-net-3-5)

[如何将 ip 地址传递给 webBrowser 控件](https://stackoverflow.com/questions/12038376/how-to-pass-ip-address-to-webbrowser-control)

[如何使用自定义ip地址浏览网页c#/.net](https://stackoverflow.com/questions/12028010/how-to-use-custom-ip-address-to-browse-a-web-page-c-net)

[https://stackoverflow.com/questions/12019890/how-to-load-webpage-using-user-provided-ipaddress-webbrowser-control-c-net](https://stackoverflow.com/questions/12019890/how-to-load-webpage-using-user-provided-ipaddress-webbrowser-control-c-net)

现在，我认为他创建了一个新用户名 user1563019，下面有更多代理/设置问题： [https ://stackoverflow.com/users/1563019/user1563019](https://stackoverflow.com/users/1563019/user1563019)

# javascript - 使用 JavaScript 解码 URL 参数

> ID：12042592
> 
> 赞同：53
> 
> 时间：2012-08-20T17:56:45.260
> 
> 标签：javascript, html, forms, decoding, url-parameters

这应该是一项简单的任务，但我似乎找不到解决方案。

我有一个基本字符串，它作为查询字符串参数传递，如下所示：`This+is+a+message+with+spaces`. 我想使用 JavaScript 将该参数解码为`This is a message with spaces`，但我似乎无法对其进行解码。

我已经尝试过`decodeURI('This+is+a+message+with+spaces')`，但结果仍然包含`+`迹象。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-05-16T12:32:19.083

是的，decodeURIComponent 函数确实不会将 + 转换为空格。因此，您必须使用替换功能替换 + 。

理想情况下，以下解决方案有效。

```
var str_name = 'This+is+a+message+with+spaces';
decodeURIComponent((str_name + '').replace(/\+/g, '%20')); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-07-05T09:16:00.600

就像已经指出的那样，`decodeURI`函数不会转换`+`为空间，***但是***这里有一些值得实现的事情：

*   `decodeURI`旨在用于整个 URI，即它不解码分隔符，如`?`, `&`, `=`,`+`等。
*   `decodeURIComponent`应该使用解码参数
    （值得一看：[decodeURIComponent和decodeURI有什么区别？](https://stackoverflow.com/q/747641/1168156)）
*   您尝试解码的字符串实际上可能包含`+`编码为`%2B`，因此您不应该`+`在转换后替换，因为您可能会丢失`+`您真正想要的迹象，例如`something?num=%2B632+905+123+4567`应该变成：
    `something?num=+632 905 123 4567`
    因为您可能要提取数字：`+632 905 123 4567`

所以正确的做法是：

```
var str = 'something?num=%2B632+905+123+4567';
decodeURIComponent( str.replace(/\+/g, '%20') ); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-08-20T18:07:56.893

加号未编码/解码。要查看 decode 函数是否正常工作，您需要先传递一个编码的 URI。看一看：

```
encodeURI( "http://www.foo.com/bar?foo=foo bar jar" ) 
```

将生成：`http://www.foo.com/bar?foo=foo%20bar%20jar`，即编码的URI。

```
decodeURI( "http://www.foo.com/bar?foo=foo%20bar%20jar" ) 
```

会生成：`http://www.foo.com/bar?foo=foo bar jar`，即解码后的URI。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-06-26T07:00:10.627

下面的代码将解码并以对象的形式为您提供参数

```
export function getParamsFromUrl(url) {
    url = decodeURI(url);
    if (typeof url === 'string') {
        let params = url.split('?');
        let eachParamsArr = params[1].split('&');
        let obj = {};
        if (eachParamsArr && eachParamsArr.length) {
            eachParamsArr.map(param => {
                let keyValuePair = param.split('=')
                let key = keyValuePair[0];
                let value = keyValuePair[1];
                obj[key] = value;
            })
        }
        return obj;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-27T18:48:50.280

我创建了自己的字符串方法来支持所需的编码/解码。这些方法将正确处理 + 编码和解码，允许您在字符串中有加号 (+) 并且仍然将原始空格编码为 +'s。

```
String.prototype.plusEncode = function() {
    return encodeURIComponent(this).replace(/\%20/gm,"+");
}

String.prototype.plusDecode = function() {
    return decodeURIComponent(this.replace(/\+/gm,"%20"));
} 
```

# javascript - Javascript 对象包装器性能

> ID：12042593
> 
> 赞同：0
> 
> 时间：2012-08-20T17:56:48.520
> 
> 标签：javascript, performance

考虑这个测试[http://jsperf.com/query-wrappers](http://jsperf.com/query-wrappers)

有谁知道**为什么“jq wrapper (single)”测试比“直接调用单”测试快 3 倍**？（铬结果）

这对我来说毫无意义 - 我尝试在“单”类中用值 0 替换 this.i，结果变化不大。

我看到的唯一方法是浏览器是否有针对这些情况的某种增强系统......

我真的无法绕过它：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:01:36.127

你的代码很奇怪：

```
function multiple(el){
  this.length = 0;
  for(var i=0;i<this.length;i++) this[this.length++] = el[i];
} 
```

那永远不会做*任何*有用的事情。您将“长度”属性初始化为零，因此后续循环根本不会做任何事情。

代码中的其他地方似乎假设“长度”将被自动管理。但是，这仅适用于 Array 实例，而您的对象则不能。

# php - 无法在 switch/case 条件下设置会话

> ID：12042599
> 
> 赞同：-2
> 
> 时间：2012-08-20T17:57:15.290
> 
> 标签：php, switch-statement

我无法在 switch/case 条件下为 $_SESSION['next'] 设置会话，而 $_SESSION['user_id'] 在条件之前完美工作。脚本运行到 switch/case 条件的每个条件并重定向而不设置 $_SESSION['next']。是否有任何具体原因导致它无法正常工作？如何解决这个问题？

```
require_once ('../src/facebook.php');
require_once ('../src/fbconfig.php');

//Facebook Authentication part
$user_id = $facebook->getUser();

if ($user_id <> '0' && $user_id <> '') {
session_start();
$_SESSION['user_id'] = $user_id;

switch((isset($_GET['page']) ? $_GET['page'] : '')){
    case 'abc';{
        $_SESSION['next'] = 'AAA';
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        exit;}  
    case 'def';{
        $_SESSION['next'] = 'BBB'; 
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        exit;}  
    case 'ghi';{
        $_SESSION['next'] = 'CCC'; 
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        exit;}
    default;{
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        exit;}                                                                                                                                                                              
}   

} else {
echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";   
exit;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:00:13.967

你的开关全错了。[阅读手册](http://php.net/manual/en/control-structures.switch.php)并尝试以下操作：

```
<?php

switch ((isset($_GET['page']) ? $_GET['page'] : '')){
    case 'abc':
        $_SESSION['next'] = 'AAA';
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        break;
    case 'def':
        $_SESSION['next'] = 'BBB';
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        break;
    case 'ghi':
        $_SESSION['next'] = 'CCC';
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        break;
    default:
        echo "<script>top.location.href = 'https://www.example.com/xxx/'</script>";
        break;
} 
```

你`exit`在你的`switch`, 中使用它（除非你希望你的脚本在开关处结束）是一个禁忌。相反，您必须使用`break`关键字。

您还可以为每种情况使用分号和花括号。

```
case 'ghi';{ ... } 
```

***不！***正确使用是

```
case 'ghi':
    .
    .
    .
    break; 
```

**更新：**我刚刚注意到你使用这条线：

```
if ($user_id <> '0' && $user_id <> '') { ... } 
```

`<>`PHP代码在做什么？“不等于”的“标准”运算符`!=`在 PHP 中。正确使用它，否则没有人会想要使用您的代码。

**第二次更新：**你从来没有设置`$_SESSION['next']`在你的`default`情况下。您很可能`switch`总是会遇到这种`default`情况。这将导致您遇到的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:13:27.093

I suggest:

```
if (($user_id != '0') && ($user_id != '')) 
```

(parentheses, and the != operator)

and also a DRYer switch:

```
$page = array_key_exists('page', $_GET) ? $_GET['page'] : '';

switch ($page) {
    case 'abc':
        $next = 'AAA';
        $loc  = 'https://www.example.com/xxx/';
        break;
    case 'def':
        $next = 'BBB';
        $loc  = 'https://www.example.com/yyy/';
        break;
    ... // and so on
}
if (isset($next)) {
    $_SESSION['next'] = $next;
    // If it does not work, you have problems with your session ID, maybe?
}

// I find this syntax easier
print <<<SCRIPT

<script type="text/javascript">
    top.location.href = '$loc';
</script>

SCRIPT;
exit(); 
```

# heroku - 在 Heroku & Getting 上更新 SSL，“Pem 无效/密钥与 PEM 证书不匹配”

> ID：12042605
> 
> 赞同：4
> 
> 时间：2012-08-20T17:57:50.257
> 
> 标签：heroku, ssl-certificate

我看到人们过去在 Heroku 和 SSL 以及匹配 .pem 证书方面遇到过问题（例如：[Heroku SSL error: key doesn't match PEM certificate](https://stackoverflow.com/questions/6931041/heroku-ssl-error-key-doesnt-match-pem-certificate)）。

但是，我们的网站一直运行良好，直到它过期。我们与 GoDaddy 续订并一直遵循此处的说明：http: [//blog.matthodan.com/how-to-setup-heroku-hostname-ssl-with-godaddy](http://blog.matthodan.com/how-to-setup-heroku-hostname-ssl-with-godaddy)

现在奇怪的是，我们不断地得到这个读数——“Pem 无效/密钥与 PEM 证书不匹配”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-05T03:37:52.803

我最近更新了在 godaddy 注册的 heroku 托管域的 ssl 证书。我做了以下事情：-（不要在heroku删除旧证书）

1.  在 godaddy 申请续订信用并使用以前的证书签名请求（csr），选择第三方托管域的选项并提交。
2.  在 Godaddy 颁发证书后，为“Nginx”服务器下载证书。解压压缩文件，cd 进入目录，合并证书。

    `cat 48bcdx31xxxx.crt sf_bundle-g2-g1.crt > combined.crt`

3.  运行证书更新命令`heroku certs:update combined.crt server.key`

4.  通过键入 app_name 确认更改。
5.  检查您的证书`heroku certs:info --app=app_name`

完毕！几秒钟后，应用程序在以前的 ssl 端点 url 上运行。所以，不需要更新dns。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T23:46:15.077

在 GoDaddy 上更新 SSL 证书后，那些难以让您的应用再次在 Heroku 上运行的人。这是我解决问题的方法：

1.  使用以下命令从 Heroku 中删除旧证书

    $ heroku 证书：删除

2.  在 GoDaddy 上更新证书后，下载证书（选择“ngnix”作为 Web 服务器）。

3.  解压缩下载的文件，然后进入终端中的文件夹（您应该看到两个文件 - 在我的情况下，我有一个名称奇怪的文件 82321234a.crt 和 gd_bundle.crt）
4.  在此处运行以下命令以创建新的 CRT 文件：

    $ cat 82321234a.crt gd_bundle.crt > combined.crt

5.  在您的终端中进入您的应用程序的证书文件夹

6.  使用以下命令将新证书添加到 Heroku

    $ heroku certs:添加combined.crt server.key

而且，就是这样！

我希望这有帮助。

# c++ - 如何比较 C++ 中的字符串和归并排序

> ID：12042606
> 
> 赞同：2
> 
> 时间：2012-08-20T17:57:49.960
> 
> 标签：c++, string, compare, mergesort

我将编写一个代码来比较数组中的一些对象并按名称对它们进行排序。

首先如何在 C++ 中比较字符串？在java中很容易 oneString.compareTo(another);

如果您在 C++ 中拥有合并排序，请分享。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:02:29.230

在 C++ 中比较字符串与在 Java 中非常相似——调用方法`compare`而不是`compareTo`. 所以使用`oneString.compare(another);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:02:34.773

您可以将`std::string`成员函数`operator<()`用作`std::sort`（使用 C++11 lambda 表达式）的比较函数。这可能会或可能不会使用归并排序作为实现，但它具有相同的`O(N log N)`复杂性。

```
#include <algorithm>
#include <iostream>
#include <string>
#include <vector>

int main() 
{
        std::vector<std::string> v = { "foo", "bar" };

        std::sort(v.begin(), v.end());

        std::for_each(v.begin(), v.end(), [](std::string const& elem) {
                std::cout << elem << "\n";
        });

        return 0;
} 
```

在[Ideone上输出](http://ideone.com/6sWR6)

# inversion-of-control - IoC、MVC4 Web API 和 HttpParameterBinding/ParameterBindingAttribute

> ID：12042610
> 
> 赞同：1
> 
> 时间：2012-08-20T17:58:06.777
> 
> 标签：inversion-of-control, asp.net-mvc-4, unity-container, asp.net-web-api

我正在使用 ASP.Net MVC 4 RTM Web API。我有一个带有参数的控制器操作，我想通过自定义模型绑定来填充该参数。为此，我创建了一个派生自`System.Web.Http.Controllers.HttpParameterBinding`设置此参数值的类。然后我创建了一个派生的属性类，`System.Web.Http.ParameterBindingAttribute`我用它来装饰我的控制器操作上的参数。

这一切都很好，我的`HttpParameterBinding`班级正在正确填充动作参数。我遇到的问题是我的自定义参数绑定类有一个我想通过我的 IoC 容器（Unity）解决的依赖项。有没有办法覆盖 Web API 创建`HttpParameterBinding`实例的方式，以便我可以从 Unity 构建自定义绑定类依赖项？`BuildUp`通过创建使用 Unity 的方法填充依赖项的自定义过滤器提供程序，我能够对过滤器属性执行类似的操作，但是对于 Web API 的`HttpParameterBindings`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T21:53:55.700

看看这篇文章：[WebAPI中的参数绑定](http://www.asp.net/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api)

它介绍了从 Converters 到 Binder 再到 BinderProviders 的几个不同选项。听起来您可以编写一个`ModelBinderProvider`知道如何提供依赖项的自定义项。如果这在链中还不够高，您可以考虑替换默认`IActionValueBinder`服务。这是一个`DefaultActionValueBinder`实例，您可以扩展或简单地重新实现它。

我还强烈建议下载 WebAPI 源代码，因为它对我遇到的这些问题提供了难以置信的帮助。这是[WebAPI 源代码](https://aspnetwebstack.codeplex.com/SourceControl/latest)。我建议下载它，以便您可以在 VS 中打开它以便于导航。

也可以随意查看[FlitBit](https://fbcore.codeplex.com/)（它非常模块化，不要让包的数量吓到你）！我正在开发一个支持 FlitBit 的 WebAPI 包，特别是 FlitBit.IoC 和 FlitBit.Dto。如果我解决了我的 IoC 问题，我会添加更新，因为它与你的非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:11:35.183

一般来说：要在 Web API 中使用 IoC / Unity，您需要单独设置它。

尝试下载 nuget 包 Unity.WebApi 看看是否有帮助！

# ios - 如何在没有 SecTrustGetTrustResult 的情况下诊断 iOS 上的证书可恢复信任失 败？

> ID：12042618
> 
> 赞同：3
> 
> 时间：2012-08-20T17:58:34.320
> 
> 标签：ios, client, certificate, x509, trust

在向 iOS 应用程序添加客户端证书时，我遇到了证书的可恢复信任失​​败。SecTrustEvaluate的[iOS 文档讨论](https://developer.apple.com/library/ios/#documentation/Security/Reference/certifkeytrustservices/Reference/reference.html#//apple_ref/doc/uid/TP30000157-CH1g-CJBHFGHI)特别建议使用`SecTrustGetTrustResult()`来获取失败的细节，但链接器在引用它时失败。（它不在任何与 iOS 相关的头文件中，也没有针对该功能的特定 iOS 文档，仅在 中提及`SecTrustGetTrustResult`。在另一个[最近的 stackoverflow 问题](https://stackoverflow.com/questions/12034245/is-sectrustgettrustresult-function-in-security-framework-on-ios)中的回复说它在 iOS 上不可用，但没有任何支持细节。 ) 假设它实际上不可用，那么在我的 iOS 代码中获取有关可恢复故障的具体详细信息的正确方法是什么？

（那个 iOS 手册也提到`SecTrustGetCssmResult`了同样的目的。我还没有尝试过，但在 iOS 5.1 头文件中也没有以任何方式提到它，也没有任何专门用于该功能的 iOS 文档条目。此外， Mac OS X 文档，确实有详细信息，将其标记为 - 以及相关`SecTrustGetCssmResultCode`- 已弃用。）

最后说明：由于我们同时运行服务器和客户端，我们使用的是私人制作的证书，我相信我们可以随意重新生成证书。我没有生成我目前使用的那个，所以不确定它的血统书。如果它是相关的，我正在尝试使用带有 iPhone 5.1 或 iPad 5.1 模拟器目标的 Xcode 4.3.3 进行编译。

感谢任何线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-16T12:53:44.360

@constant kSecTrustResultRecoverableTrustFailure 表示可以被用户覆盖的信任策略失败。该值可能由 SecTrustEvaluate 函数返回，但不存储为用户信任设置的一部分。

因此，您似乎可以将其视为 .proceed。

# ios - iOS：在 numberOfRowsInSection 中返回 2 个计数值

> ID：12042620
> 
> 赞同：0
> 
> 时间：2012-08-20T17:58:43.360
> 
> 标签：ios, xcode, count, tableview

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    int count = [entries count];
    if (count == 0) {
        return kCustomRowCount;
    }

    return count;

    int rowCount;
    if (self.isFiltered) {
        rowCount = filteredTableData.count;

    }
    else {
        rowCount = allTableData.count;
    }

    return rowCount;
} 
```

我的问题：需要第一个函数`return count;`将解析后的数据填充到tableView中。第二个`return rowCount;`需要计算过滤的搜索条目。但是当我同时使用两者时，我的应用程序就死了。当我删除第一部分时，搜索似乎无法正常工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:56:34.333

萨沙

听起来您需要使用 UISearchDisplayController。该控制器本质上支持未过滤和过滤（搜索）列表。

然后，您可以在 numberOfRowsInSection 中使用类似以下内容：

```
// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if(tableView == self.searchDisplayController.searchResultsTableView){
        // search view population
        return [self.filteredList count];
    } else {
        return [[self.sectionedList objectAtIndex:section] count];
    }
} 
```

# ios - 导航控制器为零

> ID：12042622
> 
> 赞同：0
> 
> 时间：2012-08-20T17:58:56.653
> 
> 标签：ios, cocoa, uiviewcontroller, uinavigationcontroller

在我的项目世界的根部，我在项目的应用程序委托中声明了一个 UIViewController *viewController。我正在尝试访问视图控制器的 navigationController 字段，以便找到顶部的 ViewController。但是，每次我查看 viewController 的 navigationController 字段时，它都是 nil。很明显我忘了做点什么。想法？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:39:07.077

确保您的导航控制器具有强大的属性。（如下所示：）

```
@property (strong, nonatomic) UINavigationController *navcon; 
```

然后在你的应用委托实现文件中合成它。

```
@synthesize navcon = _navcon; 
```

是的，那么您可以拥有：

```
self.navcon = [[UINavigationController alloc] initWithRootViewController:yourViewController];
[self.window addSubview:self.navcon.view]; 
```

（假设您启用了 ARC）

# c# - 在 Metro 风格应用程序中启动网格视图时显示/隐藏按钮

> ID：12042626
> 
> 赞同：0
> 
> 时间：2012-08-20T17:59:12.333
> 
> 标签：c#, microsoft-metro, windows-runtime

我在我的应用程序中添加了一个网格视图，其中网格绑定到使用 Web 服务检索的文档列表。如果未下载文档，则我需要显示下载按钮，否则显示查看和删除按钮。这需要在启动 gridview 时完成。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:16:10.030

添加 Visibility 属性绑定并指定到 - 反向转换器。因此，如果您有一个布尔属性想要作为可见性逻辑的基础，请使用两个转换器：BoolToVisibilityConverter 和 FalsoBoolToVisibilityConverter。然后将两个控件放在一个网格中，并将每个控件的可见性属性绑定到具有不同转换器的相同布尔值。这将确保对于布尔参数的每个值，仅显示一个对象。这是 xaml 的外观：

```
<Grid>
  <Panel Visibility="{Binding Path=boolProperty, Converter={StaticResource trueToVisibleConverter}}">
    <!-- Here comes the gridview content -->
  </Panel>

  <Panel Visibility="{Binding Path=boolProperty, Converter={StaticResource falseToVisibleConverter}}">
    <!-- Here comes the Download button -->
  </Panel>
</Grid> 
```

并且那里的两个面板都绑定到相同的 boolProperty，无论内容是否下载，它都会显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:17:11.633

尝试使用 Visibility 属性。

# c++ - 如何将守护进程与 Web 服务器连接（例如通过 FastCGI）？

> ID：12042627
> 
> 赞同：1
> 
> 时间：2012-08-20T17:59:13.683
> 
> 标签：c++, comet, fastcgi

我正在用 C++ 编写一个程序，它将一直在后台运行以执行不同的任务 - 一个守护进程。
除了通常的任务之外，Web 应用程序还应与其通信（执行 COMET 模式的 AJAX 请求 = 大量打开但处于休眠状态的连接）。

所以问题是：我应该如何将它连接到 Web 服务器（apache 和 lighttpd 是相关的）？

在我读过的内容中，FastCGI 对这项任务非常有趣，但我读过的所有参考资料都在谈论必要时启动 FastCGI 应用程序的 Web 服务器。这在这里行不通，因为守护进程已经在运行...

我还读到，Web 服务器将通过套接字与 FastCGI 应用程序对话——所以这对我来说可能是一个入口点，守护进程“只”需要与这样的套接字对话。

但是有没有好的图书馆可以用来做这件事？[查看http://cppcms.com/wikipp/en/page/main](http://cppcms.com/wikipp/en/page/main)
的功能对我来说看起来很有趣 - 但在我的情况下可以吗？它是否可以被剥离 - 甚至提供一个 SQL 连接对我的情况来说太重了......

那么你能给我什么建议呢？

PS：性能方面，我认为单线程但异步实现将适用于守护进程 <-> Web 服务器胶水。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:55:12.173

FastCGI 是与 Web 服务器通信的标准协议。所有提到的 Web 服务器都可以通过 fastcgi 与远程守护程序应用程序通信。

[http://cppcms.com/wikipp/en/page/cppcms_1x_tut_web_server_config](http://cppcms.com/wikipp/en/page/cppcms_1x_tut_web_server_config)

此外，如果您正在寻找 Comet 支持，那么 CppCMS 可以为您提供原生支持：

[http://blog.cppcms.com/post/107](http://blog.cppcms.com/post/107)

> 它是否可以被剥离 - 甚至提供一个 SQL 连接对我的情况来说太重了......

CppCMS 库非常小，它也允许减小它的大小：

[http://cppcms.com/wikipp/en/page/cppcms_1x_build#Build.Options](http://cppcms.com/wikipp/en/page/cppcms_1x_build#Build.Options)

SQL 连接 CppDB 也是独立的部分。

> 性能方面，我认为单线程但异步实现将适用于守护进程 <-> Web 服务器粘合。

它是标准 CppCMS 运行模式之一——运行异步 Web 应用程序。

**更新：**

> 在我读过的内容中，FastCGI 对这项任务非常有趣，但我读过的所有参考资料都在谈论必要时启动 FastCGI 应用程序的 Web 服务器。这在这里不起作用，因为守护进程已经在运行..

确实有些网络服务器启动了快速的 cgi 应用程序，但是：

*   Lighttpd 允许同时启动 FastCGI 和 SCGI 应用程序或连接到独立的应用程序
*   Cherokee (AFAIR) 允许同时启动 FastCGI 和 SCGI 应用程序或连接到独立的应用程序
*   阿帕奇：

    *   `mod_fascgi`允许同时启动 FastCGI 应用程序或连接到独立的应用程序
    *   `mod_scgi`连接到独立应用程序 - 不启动应用程序。
    *   `mod_fcgid`总是启动应用程序 - 不适合你

    同样作为一般说明，apache 不适合处理许多空闲连接的模式，因为它使用每个连接的线程（甚至取决于 mpm 的进程）。

*   Nginx - 根本不启动应用程序，但是由于缓冲，fastcgi 目前不是彗星流的最佳选择，所以 SCGI 使用 nginx 会更好（假设您使用的是最新的 nginx 版本）

小提示：SCGI 是一个与 FastCGI*非常*相似但简单得多的协议。

# ruby-on-rails - Link_to 在嵌套资源中进行编辑

> ID：12042633
> 
> 赞同：0
> 
> 时间：2012-08-20T17:59:28.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我对嵌套资源应该如何工作以及如何访问它们感到困惑这里我的模型有问题

```
event                      eventcomments
id                           id
Title                        body
Content                      event_id
... 
```

这是我的路线文件

```
resources :events do
  resources :eventcomments
  end
end 
```

这里的关系

```
Article
  has_many :eventcomments
Comments
  belongs_to event 
```

但是当我在事件的 show.html.erb 中时，我无法获得编辑评论的链接。这里产生了耙子路线

```
edit_event_eventcomment GET    /events/:event_id/eventcomments/:id/edit(.:format) eventcomments#edit 
```

和我的链接

```
<h2>Comments</h2>
<div>
<% @comments.each do |comment| %>
    <div>
      <%= image_tag (comment.customer.avatar).url(:thumb) %>
      <%= comment.customer.incomplete_name %> said: 
      <%= comment.description %>
      <div>Posted: <%= time_ago_in_words(comment.created_at) %></div>
      <% if current_customer.isadmin? %>
        <%= link_to 'Edit', edit_event_eventcomment_path(@event) %>
        <%= link_to 'Destroy', '#' %>
      <% end %>
    </div><br /> 
```

这是我得到的错误

```
NoMethodError in Eventcomments#edit

Showing /home/jean/rail/voyxe/app/views/eventcomments/_form.html.erb where line #1 raised:

undefined method `eventcomment_path' for #<#<Class:0xb5e73d84>:0xb5e7c8f8>
Extracted source (around line #1):

1: <%= form_for(@eventcomment) do |f| %>
2:   <% if @eventcomment.errors.any? %>
3:     <div id="error_explanation">
4:       <h2><%= pluralize(@eventcomment.errors.count, "error") %> prohibited this eventcomment from being saved:</h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:10:33.330

您只是将一个`Event`实例传递给该`edit_event_eventcomment_path`方法，并且您也应该传递该`Eventcomment`实例。

尝试`edit_event_eventcomment_path(@event, comment)`

注意：将您的`Eventcomment`课程重命名`EventComment`为`Comment`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:11:40.073

您的嵌套路由需要两个参数，:event_id 和 :id，如下所示：

```
edit_event_eventcomment_path(@event, comment) 
```

# javascript - 定位事件绑定源

> ID：12042639
> 
> 赞同：0
> 
> 时间：2012-08-20T17:59:59.993
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

我们正在构建一个站点，它有大量的 jQuery 插件和来自多个开发人员的杂项代码。某个地方甚至被文档困住了。（基本上空格键不再有它的默认浏览器使用，即滚动，选择复选框等）使用Chrome的调试工具，起源是jquery-1.7.2.min.js第3行 - 没有太多帮助。

我能够通过`$(document).off('keydown');`在 window.onload 函数的末尾运行来“修复”这个问题，但我非常不喜欢这个修复。

有没有一种*简单*的方法可以找出原始绑定发生的位置？（我的猜测是某些插件在未提供元素时默认为“文档”。）到目前为止我所做的：

通过“keyCode”的源代码搜索并删除了任何捕获空格键的插件。删除了其他不明显的插件。我可以继续这样做，但我正在寻找很多繁重的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:46:54.167

您可以在 chrome 中打开开发人员工具，单击文档正文元素上的检查元素，将右侧面板向下滚动到底部并查看事件侦听器，它可能附加到正文元素或其他一些非常大的容器。检查 keydown 事件下的 listenerBody。

# selenium - selenium grid - 用于列出所有可用节点的 api

> ID：12042640
> 
> 赞同：4
> 
> 时间：2012-08-20T18:00:01.037
> 
> 标签：selenium, selenium-grid

是否有可用的 API 方法来列出和获取 Selenium Hub 的所有注册节点的信息。

我可以使用 /grid/api/proxyid=nodeurl:5555 获取特定节点信息，但似乎无法找到列出所有可用节点的方法。

我在源代码“getAllProxies”中看到了一个函数，但没有看到它的 api 实现。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T13:49:42.020

有一张公开的票。同时，您可以构建和贡献自己的 servlet。我这样做是为了提供此 API 的自定义版本，用于 Mogotest 中的节点监控。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:50:30.167

您可以自己构建一个由 Selenium 供电的方法来检查

```
http://localhost:4444/grid/console 
```

并列出所有节点和可能的会话

不应该那么难

# linux-device-driver - Linux DD 向串口 ttyS0 传递数据

> ID：12042641
> 
> 赞同：1
> 
> 时间：2012-08-20T18:00:03.627
> 
> 标签：linux-device-driver, kernel

嗨，我想将数据从我的 char 设备驱动程序传递到串行端口 ttyS0 ..

我创建了一个简单的 char 驱动程序模块，它可以读写，这是我第一次这样做.. 我正在使用 debian guest os ......

例如

回声“你好”> /dev/mydev

现在，当 /dev/mydev 接收到数据时，它会将字符串更改为类似于“hello too”的内容，并传递给我的串行端口 /dev/ttyS0..

如何更改字符串？.. 是否可以在 mydev 中使用 if 语句？

例如

```
if(string=="hello"){
alterstringTO: hello to;

pass "hello to" /dev/ttyS0;

like echoing in terminal..

echo "hello to" > /dev/ttyS0
} 
```

这可能吗？...还是有其他方法可以做到这一点？

这里有一些代码..

```
ssize_t dev_read(struct file *filp, char *buf, size_t clen, loff_t *f_pos){

short cnt =0;
while(clen && (msg[Pos]!=0))
{
    put_user(msg[Pos],buf++);
    cnt++;
    clen--;
    Pos++;
}
return cnt;

    }

   ssize_t dev_write(struct file *filp, const char *buf, size_t clen, loff_t *f_pos){

short dec = clen-1;
short cnt=0;
memset(msg,0,50);
Pos=0;
while(clen>0)
{
    msg[cnt++] = buf[dec--];
    clen--;
}
return cnt;
    } 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:37:32.517

只是对写入串口的评论：

记住 Linux 的基础，Linux 中的一切都是文件。要从程序写入设备驱动程序，您需要打开文件进行写入，然后您可以 fprintf 任何您想要的数据。您也可以从用户空间执行此操作（推荐方式）

请参阅以下手册页：

*   男人开
*   人读/写
*   人 fprintf
*   男人关闭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:35:33.073

我不确定您要在这里实现什么，因为问题和意图对我来说似乎不清楚。我将提供一些指导，但建议您编辑您的问题并使其更具可读性。

您用于比较字符串的代码段不正确。[您可以在此处](https://stackoverflow.com/questions/3933614/c-string-using-equality-operator-for-comparing-two-strings-for-equality)了解有关如何在 C 中比较字符串的更多信息。

在 C 中更改字符串是您开始使用字符串时学习的基本操作。[这](https://stackoverflow.com/questions/8616105/how-to-replace-a-piece-of-const-char-with-another-string-in-c)应该可以帮助您入门。

最后，请注意内核编程需要格外小心。一个小错误可能会导致崩溃和数据丢失。如果你真的需要，那么这本书[Linux Device Drivers 3rd Edition](http://www.makelinux.net/ldd3/)是免费提供的，可以进一步帮助你。

# asp.net - 为什么 ASP.NET 角色提供程序是基于用户名检查而不是 ID

> ID：12042642
> 
> 赞同：0
> 
> 时间：2012-08-20T18:00:03.590
> 
> 标签：asp.net, asp.net-membership

到目前为止，我已经看到了几个 ASP.NET 角色提供程序的自定义实现，它们都符合基类要求，即角色检查是基于字符串用户名完成的。（例如`IsUserInRole(string username)`）。基于此字符串用户名将是用户实体的唯一键这一事实，是否对角色提供者提出了要求？

我的用户类使用 GUID Id 作为用户实例的唯一标识符。

PS 我知道在设置身份验证 cookie 时我需要使用 thie GUID Id。只是想确保我了解用户名角色关联背后的动机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:15:47.927

很可能是因为从 IPrincipal 获取用户名非常容易。所以你可以轻松做到`IsUserInRole(User.Identity.Name)`

更重要的是，FormsAuthentication 系统必须能够依赖 IPrincipal 在授权级别进行验证，并且唯一可用的信息是用户名。

# php - 将 php 中 json_encode 的结果传递给 javascript，然后传递给另一个 javascript 函数

> ID：12042644
> 
> 赞同：1
> 
> 时间：2012-08-20T18:00:12.800
> 
> 标签：php, javascript, jquery, json

我是这个网站的初学者和新手，我手头有我的项目，非常感谢一些帮助。

我正在使用第三方编写的 JQuery 插件。有3个javascript ieajs，b.js，c.js

**a.js**是 b.js 工作的框架

**b.js**包含一个表单构建器，它包含一个调用存储在**c.js中的名为****selectionOpt的 JSON 数组的函数**

 **b.js中的函数如下

```
createChildren: function () {
        this._super();
        var self = this;

        this.comboselected = new DrawComboBox({
            styles: "comboselected",
            data: Draw.selectionOpt1,
            onChange:function () {
                self.comboselected = self.comboselected.value();
                    }       

   };
 }); 
```

c.js 中的 JSON 数组看起来像这样

```
Draw.selectionOpt1 = [
    {"Id": 1,"data": Blue,"label": "Blue","quantity": 100},
    {"Id": 2,"data": Red,"label": "Red","quantity": 100},
    {"Id": 3,"data": Green,"label": "Green","quantity": 100},
    {"Id": 4,"data": White,"label": "White","quantity": 100},
    ...etc..
    ...etc..
    }
    ]; 
```

我想将原始数据存储在数据库（MySQL）而不是 c.js 中，我目前正在为此苦苦挣扎。我有一个 PHP 脚本，即 api.php，如下所示

```
<?php 

 include 'DB.php';
$con = mysql_connect($host,$user,$pass);
$dbs = mysql_select_db($databaseName, $con);

 $result = mysql_query("SELECT * FROM $tableName");          //query
$colouroptions = Array();                          //fetch result    

while( $obj = mysql_fetch_row($result) ) {  
 $colouroptions[] = $obj;  
}

 echo json_encode($colouroptions);  

?> 
```

此脚本返回以下结果

```
[["1","Red","Red","100"],["2","Blue","Blue","100"],["3","Green","Green","100"], etc, etc.,...[etc, etc, etc, etc]] 
```

Q1：如何从 MySQL 中获取数据并以期望的格式对其进行编码？

```
{"Id": 1,"data": Blue,"label": "Blue","quantity": 100},
{"Id": 2,"data": Red,"label": "Red","quantity": 100},
{"Id": 3,"data": Green,"label": "Green","quantity": 100},

etc etc etc 
```

Q2：如何从b.js调用api.php生成的JSON数组？还是我需要先将其反馈给 c.js？怎么做到呢？

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:11:33.750

用于`mysql_fetch_object`让`json_encode`以对象表示法而不是数组表示法生成 JSON。将数据加载到 JS 中的最简单方法是从 PHP 中回显它，如下所示：

```
<?php
echo '<script type="text/javascript">';
echo 'Draw.selectionOpt1 = ' . json_encode($colouroptions) . ';';
echo '</script>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:15:25.137

如果您使用 jQuery，则 ajax 函数能够通过回调函数传递返回的结果。

```
$.ajax({
  url: 'ajax/test.php',
  dataType: 'json',
  success: function(data) {
    // here you can pass the results to another function
    createChildren(data);
  }
});

createChildren: function (passedData) {
        this._super();
        var self = this;

        this.comboselected = new DrawComboBox({
            styles: "comboselected",
            data: passedData,
            onChange:function () {
                self.comboselected = self.comboselected.value();
                    }       

   };
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:08:04.223

尝试 mysql_fetch_assoc 而不是 mysql_fetch_row。它将创建一个关联数组，该数组将被解析为您想要的 json 格式。

（我不明白你的第二个问题）**

# c# - 无法将参数值从字符串转换为小数

> ID：12042651
> 
> 赞同：4
> 
> 时间：2012-08-20T18:00:26.140
> 
> 标签：c#, .net, sql-server-2008, sqlconnection, sqlcommand

我使用以下代码将 csv 导入我的 sql server 表

```
SqlCommand nonqueryCommand = myConnection.CreateCommand();
nonqueryCommand.CommandText = 
                 "INSERT INTO MYTABLE VALUES(@num1, @num2,@num3,@num4)";

nonqueryCommand.Parameters.Add("@num1",SqlDbType.Decimal);
nonqueryCommand.Parameters.Add("@num2", SqlDbType.Decimal);
nonqueryCommand.Parameters.Add("@num3", SqlDbType.Decimal);
nonqueryCommand.Parameters.Add("@num4", SqlDbType.Decimal);

nonqueryCommand.Parameters["@num1"].Value = crntRecord[0];
nonqueryCommand.Parameters["@num2"].Value = crntRecord[1];
nonqueryCommand.Parameters["@num3"].Value =crntRecord[3];
nonqueryCommand.Parameters["@num4"].Value = crntRecord[4];

nonqueryCommand.ExecuteNonQuery(); 
```

当我在 DDL 中执行代码时，参数 3 和 4 的类型为十进制（9,6），`ExecuteNonQuery`我得到以下异常

> 无法将参数值从字符串转换为小数。

请帮我找出问题tnx。

编辑

crntRecord[3] 中的值看起来像

![在此处输入图像描述](../Images/2c493d23555c60b9eb20a2cdc54ea8c5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:31:53.793

**编辑为使用更安全的解析方法**

你的字符串有你需要去掉的引号。尝试

```
decimal num3;
bool isDecimal = decimal.TryParse(crntRecord[3].Trim(new []{'\"'}), out num3);
if(isDecimal)
    nonqueryCommand.Parameters["@num3"].Value = num3; 
```

我建议对所有小数使用此方法，这意味着将此逻辑放入可重用函数中将是一种上升重构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T18:03:47.060

假设这`crntRecord`是一个字符串数组，您需要先将字符串解析为小数。

前任：

```
nonqueryCommand.Parameters["@num3"].Value = decimal.Parse(crntRecord[3].ToString()); 
```

`crntRecord[3]`请注意，如果不能解析为小数，这将引发异常；如果这是可能发生的情况，请`decimal.TryParse()`改为调查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:03:18.753

尝试

```
nonqueryCommand.Parameters["@num1"].Value = Convert.ToDecimal(crntRecord[0]));
nonqueryCommand.Parameters["@num2"].Value = Convert.ToDecimal(crntRecord[1]);
nonqueryCommand.Parameters["@num3"].Value =Convert.ToDecimal(crntRecord[3]);
nonqueryCommand.Parameters["@num4"].Value = Convert.ToDecimal(crntRecord[4]); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T18:04:10.640

利用

```
nonqueryCommand.Parameters.AddWithValue("@num1", crntRecord[0]); 
```

# android - 支持多种屏幕尺寸，有些东西看起来太小了

> ID：12042653
> 
> 赞同：1
> 
> 时间：2012-08-20T18:00:32.447
> 
> 标签：android, android-layout

我几乎完成了我的应用程序，但是当我在`xlarge`屏幕上进行测试时，发生了一些奇怪的事情。所有`EditText`字段、所有按钮中的文本，甚至 Toast 都相对于屏幕大小显得小得多。几乎就像它们在`normal`屏幕上的大小一样，但由于某种原因，该应用程序没有将它们放大到更大的尺寸以适应屏幕。我的`EditText`字段较大，因为它们使用权重来指定高度，但您在其中键入的文本在较大的屏幕上很小。

令我惊讶的是，即使 Toasts 也没有扩大规模，它们不是 Android 系统的内部东西吗？

我四处搜索，发现我应该在清单中包含这个：

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true" /> 
```

我在`application`标签上方和标签下方都有它`users-sdk`，但仍然没有运气。

知道发生了什么吗？

编辑：我`dp`对一切都使用单位。我以编程方式创建的祝酒词，通常的方式。`normal`它们在屏幕上看起来很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:44:06.823

检查您的自定义或覆盖样式（如果有），它们可能会影响您的 Toast 大小。否则可能会创建自己的 Toast 子类：

[http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView)

在这里你可以找到默认的 Toast 布局，你可以看到它使用了 @style/TextAppearance.Small ，这是一个内置的用户自定义样式：

[如何找到 toast 小部件的布局参数？](https://stackoverflow.com/questions/3619670/how-can-i-find-the-layout-parameters-of-the-toast-widget)

# java - 如何跨应用程序版本在 Google App Engine 上使用联合登录 SSO？

> ID：12042654
> 
> 赞同：1
> 
> 时间：2012-08-20T18:00:33.383
> 
> 标签：java, python, google-app-engine, openid

Google App Engine（Java 和 Python）上的联合登录不会跨应用程序版本转换。`CreateLoginURL`忽略诸如`openid.realm`（这将允许我在域上设置通配符）之类的属性。版本的子域会导致与主应用程序（或不同版本的会话）不同的会话。这是谷歌会话跟踪的缺陷吗？或者这是联合登录中的一个缺陷？还是我做错了什么（或做错了什么）？

听起来我需要自己处理会话和 OpenID 交互来克服这个限制，但我想在重新发明轮子之前 ping Stackoverflow 的人。

欢迎使用 Python 或 Java 中的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:42:57.733

默认 GAE 会话基于不是子域 cookie 的 cookie（在 GAE 生产中其命名为 ACSID 或 SACSID）。

关于子域 cookie：[https ://serverfault.com/questions/153409/can-subdomain-example-com-set-a-cookie-that-c​​an-be-read-by-example-com](https://serverfault.com/questions/153409/can-subdomain-example-com-set-a-cookie-that-can-be-read-by-example-com)

要完成这项工作，您应该编写自己的自定义会话处理程序。

# c++ - 在 C++ 中，在创建对象时，是否隐式使用了 new？

> ID：12042656
> 
> 赞同：6
> 
> 时间：2012-08-20T18:00:42.210
> 
> 标签：c++, oop

当我创建一个类的对象时，比如说，

```
class A {
  public: A() {}
};

A a; 
```

只有构造函数被调用吗？还是`new`隐式使用了运算符？

就像我们必须做的`A* b = new A();`

此外，将`a`和`b`存储在内存中的什么位置？堆栈还是堆？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T18:04:09.577

在第一种情况下，如果`a`不是全局变量，则将其放入堆栈，而`b`将其放入堆中。

在第一种情况下，只调用构造函数。`new`除非你像第二种情况那样明确地调用它，否则永远不会调用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T18:05:32.257

No`new`不会被隐式调用。`new`返回指向创建的对象类型的指针，而构造函数调用没有返回类型。使用创建的对象`new`将存在于堆上。New 将分配内存，然后调用构造函数。在表单中创建的对象`A a`将存在于堆栈中（除非它们是全局变量）。

# linux - linux上的shell脚本无法运行

> ID：12042661
> 
> 赞同：1
> 
> 时间：2012-08-20T18:00:59.540
> 
> 标签：linux, shell, ubuntu

我正在尝试在 Linux Ububtu 12.04 LTS 服务器上运行 shell 脚本。这是我的脚本：

```
#!/bin/bash
PROGRAM=./home/lab/data/setup_exp/Simulator
FILE_PART_PREFIX="/home/lab/data/pcap_partial/h_"
FILE_PART_NUM=3
RECEIVER_SIZE=4096
SENDER_SIZE=4096
BETA=0.25
UPDATE=400
MARKER=20
MODE=5
RESULT_PREFIX="/home/lab/data/setup_exp/size/size_eq4/res_"
time_part=1200
if [ ${time_part} -eq 1200 ];then
 nohup ${PROGRAM} 1 ${FILE_PART_PREFIX}${time_part}.pcap ${RECEIVER_SIZE} ${SENDER_SIZE} ${BETA} ${UPDATE} ${MARKER} ${MODE} >> ${RESULT_PREFIX}${time_part} 2>&1 &
fi
time_part=1500
if [ ${time_part} -eq 1500 ];then
nohup ${PROGRAM} 1 ${FILE_PART_PREFIX}${time_part}.pcap ${RECEIVER_SIZE} ${SENDER_SIZE} ${BETA} ${UPDATE} ${MARKER} ${MODE} >> ${RESULT_PREFIX}${time_part} 2>&1 &
fi
time_part=1900
if [ ${time_part} -eq 1900 ];then
nohup ${PROGRAM} 1 ${FILE_PART_PREFIX}${time_part}.pcap ${RECEIVER_SIZE} ${SENDER_SIZE} ${BETA} ${UPDATE} ${MARKER} ${MODE} >> ${RESULT_PREFIX}${time_part} 2>&1 &
fi 
```

然后，这些是上面脚本目录下的文件和子目录，叫做 sizesetup.sh ：`Simulator size sizesetup.sh` Simulator 和 sizesetup.sh 的权限设置为 755。

此外，Simulator 的输入文件在 下`/home/lab/data/pcap_partial` ，分别命名为 h_1200、h_1500 和 h_1900。

我的问题是我曾经`sh sizesetup.sh`运行此脚本而没有弹出任何错误消息。然而，脚本没有被执行（我使用'top'和'ps'命令来检查脚本的状态）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:37:59.030

这条线在我看来很可疑：

```
PROGRAM=./home/lab/data/setup_exp/Simulator 
```

我不认为领先的点在那里。您可能来自 Windows，听说过在 Linux 上运行程序，您需要像这样调用它：`./program`.

这在技术上是不正确的。造成这种混乱的原因是 Windows 和 Linux 中 PATH 处理的不同。

在 Windows 上，当您尝试执行程序时，首先搜索当前目录，而不管当前目录是否列在`%PATH%`环境变量中。

在 Linux 上，既不隐式搜索当前目录（与 Windows 行为相反），也不默认将当前目录（即`.`）包含在`$PATH`环境变量中。因此，为了执行驻留在当前目录中的程序，您可以像这样调用它：`./program`即明确指定*可执行文件的相对路径*。

`./home/lab/data/setup_exp/Simulator`看起来不像*相对*路径（尽管我可能肯定是错的），因此前导点不应该在那里。

# sql-server-2008 - SQL Server 对象依赖项

> ID：12042662
> 
> 赞同：1
> 
> 时间：2012-08-20T18:01:01.263
> 
> 标签：sql-server-2008

Red Gate 有一些非常好的工具，但我不认为他们的 Dependency Tracker 显示了表是如何受到接触它们的存储过程的影响的。

是否有任何工具可以扫描数据库并确定哪些进程从表中插入、更新或删除记录，而不是仅仅触摸\依赖它们？似乎现在应该存在这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:08:15.780

不，依赖跟踪仍然不完美。原因是过程可以通过动态 SQL 引用表，如果对象被删除并重新创建，依赖关系可能会被破坏（我已经写过[依赖关系如何在这里破坏](https://sqlblog.org/2008/09/09/keeping-sysdepends-up-to-date-in-sql-server-2008)）。我所依赖的最好的“第一次扫描”是：

```
SELECT OBJECT_NAME([object_id]) 
  FROM sys.sql_modules
  WHERE LOWER(definition) LIKE '%table_name%'; 
```

同样，这不会找到使用动态 SQL 构建语句的对象，并且它可能会产生误报，因为它`table_name`可能过于简单并且可能是其他对象或参数名称的一部分，或者仅包含在注释或注释掉的代码中。

您还可以检查使用`sys.dm_exec_cached_plans`相关 DMF/DMV 引用表的计划，但请注意，这不会找到任何已从缓存中推出的计划。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T20:05:19.050

使用 SQL 搜索，您可以搜索列名并找到所有使用它的存储过程。

它是第三方工具，即**[Red Gate SQL Search](http://www.red-gate.com/products/sql-development/sql-search/)**

**特征**

1.  在存储过程、函数、视图等中查找 SQL 文本片段

2.  快速导航到碰巧在服务器上的对象

3.  查找对象的所有引用

希望这会帮助你。

# android - 在 ListView 项目中右对齐 2 TextView

> ID：12042664
> 
> 赞同：1
> 
> 时间：2012-08-20T18:01:08.687
> 
> 标签：android

我有一个包含 2 个 Textview 的列表视图。一个文本视图显示在气泡背景中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <!--    android:background="#FFDBE2ED"-->
 <LinearLayout 
        android:id="@+id/wrapper"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

    <RelativeLayout
        android:id="@+id/wrapper2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
       >
    <!--  android:layout_gravity="center" -->
        <TextView
            android:id="@+id/comment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_marginTop="5dip"
            android:layout_marginRight="5dip"
            android:layout_marginLeft="5dip"
            android:background="@drawable/bubble_yellow"
            android:paddingLeft="10dip"
            android:text="Hello bubbles!"
            android:textColor="@android:color/primary_text_light" />
         <TextView
            android:id="@+id/sender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_margin="0dip"
            android:background="#00dcdcdc"
            android:paddingLeft="10dip"
            android:text="Hello bubbles!"

           android:textColor="#b9dcdcdc"  
            android:layout_below="@+id/comment"
            />

    </RelativeLayout>

    </LinearLayout>

</LinearLayout> 
```

有时我在右边显示 textview，有时在左边

```
public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.listitem_discuss, parent, false);
        }

        wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

        OneMessage coment = getItem(position);

        countryName = (TextView) row.findViewById(R.id.comment);

        countryName.setText(coment.msgText);
        countryName.setGravity(!coment.sentbyuser   ? Gravity.LEFT : Gravity.RIGHT)  ;

        sender = (TextView) row.findViewById(R.id.sender);
        sender.setGravity(Gravity.LEFT)  ;

        countryName.setBackgroundResource(!coment.sentbyuser ? R.drawable.bubble_yellow : R.drawable.bubble_green);
        wrapper.setGravity(!coment.sentbyuser   ? Gravity.LEFT : Gravity.RIGHT);

        return row;
    } 
```

当我在左侧显示 2 textview 时，一切都很好。但是，当我在右侧显示 2 textview 时，我希望 2 Textview 右对齐。但到目前为止，我无法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:18:13.170

`TextView.setGravity()`正在定义如何对子视图进行定位，请参阅[文档](http://developer.android.com/reference/android/widget/TextView.html#setGravity%28int%29)。您想要实际对齐 textView 而不是它的子项。您将要使用该方法，`setLayoutParams()`请参阅[docs](http://developer.android.com/reference/android/view/View.html#setLayoutParams%28android.view.ViewGroup.LayoutParams%29)。我不确定您要对`wrapper`LayoutView 做什么。所以下面的代码可能不是你需要的一切。但这是将视图与相对布局对齐的推荐方法（务实地）。

```
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if (row == null) {
        LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.listitem_discuss, parent, false);
    }

    wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

    OneMessage coment = getItem(position);

    countryName = (TextView) row.findViewById(R.id.comment);

    countryName.setText(coment.msgText);

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    if(!coment.sentbyuser)
    {
        params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    }
    else
    {
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    }

    countryName.setLayoutParams(params);

    return row;
} 
```

如果有第二个视图需要与 countryName 完全对齐，您可以使用以下内容：

```
View yourOtherView = findViewById(R.id.yourOtherView);

RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

params.addRule(RelativeLayout.ALIGN_BELOW, R.id.comment);
params.addRule(RelativeLayout.ALIGN_RIGHT, R.id.comment);

yourOtherView.setLayoutParams(params); 
```

这告诉它在您的评论视图下方对齐它，然后右对齐它。您可能需要使用边距、填充和其他值才能使其完全正确。

祝你好运！

# c# - 列表 其中 T 是自定义对象。按属性删除重复项

> ID：12042666
> 
> 赞同：10
> 
> 时间：2012-08-20T18:01:30.293
> 
> 标签：c#, linq, list, generics

我有一个`List<T>`where T 是一个自定义对象。我的对象都不相等，但有些对象可能具有相等的属性。有什么快速的方法可以通过比较属性来删除重复项？哪些重复项留在列表中并不重要。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-20T18:03:14.253

您可以使用它[`List<T>.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)来有效地执行此操作。

例如，如果你想删除`Foo`属性值为 42 的所有元素，你可以这样做：

```
theList.RemoveAll(i => i.Foo == 42); 
```

如果您尝试按属性制作不同项目的列表，即：仅保留不同的 Foo 项目，我建议您执行以下操作：

```
HashSet<int> elements = new HashSet<int>(); // Type of property

theList.RemoveAll(i => !elements.Add(i.Foo)); 
```

这将跟踪哪些元素是“不同的”并删除所有其他元素。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T18:09:17.607

根据属性值对对象进行分组，然后选择每个组中的第一项。像这样：

```
var distinctObjects = objects
    .GroupBy(x => x.Property)
    .Select(g => g.First()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T18:06:44.923

`IEqualityComparer<T>`您可以创建一个通过比较属性来实现的新类。然后，您可以使用 linq 的`Distinct`方法来获取仅包含唯一元素的 IEnumerable。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:05:20.233

您也可以从这里使用一个非常好的库`http://powercollections.codeplex.com/`并使用`Algorithms.RemoveDuplicates`方法。那个图书馆有更多的收藏品。

# iphone - 刷新视图或删除子视图 ios

> ID：12042670
> 
> 赞同：0
> 
> 时间：2012-08-20T18:01:48.120
> 
> 标签：iphone, objective-c, ios

我正在尝试制作一个用户可以在屏幕上滑动以在帖子之间浏览的场景。帖子既可以是带有文本的图像，也可以只是一个注释，并且视图会根据出现的情况而改变。

获取过程非常完美。无论我向右还是向左滑动，它都会得到正确的帖子。问题是旧视图不会消失并且视图重叠。当您从便笺转到照片时，这尤其令人烦恼，反之亦然，因为尺寸不同...

这是代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSLog(@" GETRESULT %@   POSTNUMBER %d", getResult, postNumber);
Post *postInfo = [[Post alloc] init];

postInfo = [getResult objectAtIndex:postNumber];

UITextView *postText = [[UITextView alloc] init];
imgView = [[UIImageView alloc] init];

NSString *getImageString = postInfo.attachments;
if(getImageString){
    postText = [[UITextView alloc] init];
    postText.text = postInfo.noteText;
    [postText setFrame:CGRectMake(20, 320, 280, 80)];
    NSLog(@"IMG1");
}else {
    postText = [[UITextView alloc] init];
    postText.text = postInfo.noteText;
    [postText setFrame:CGRectMake(20, 10, 280, 240)];
    NSLog(@"TEXT1");
}
[self.view addSubview:postText];
SHOWHUD(self.view);
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

        NSURL *url = [NSURL URLWithString:getImageString];
        NSData *data = [NSData dataWithContentsOfURL:url];
        UIImage *img = [[UIImage alloc] initWithData:data];
        [imgView setFrame:CGRectMake(20, 10, 280, 300)];
        [imgView setContentMode:UIViewContentModeScaleAspectFit];
        [imgView setImage:img];

    dispatch_async(dispatch_get_main_queue(), ^{   
        [self.view addSubview:imgView];
        HIDEHUD(self.view);
    });
});

UISwipeGestureRecognizer *recognizerRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeRight:)];
[[self view] addGestureRecognizer:recognizerRight];

UISwipeGestureRecognizer *recognizerLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeLeft:)];
[recognizerLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
[[self view] addGestureRecognizer:recognizerLeft];

// Do any additional setup after loading the view.
}

- (void)handleSwipeRight:(UISwipeGestureRecognizer *)gestureRecognizer{
NSLog(@"SWIPE RIGHT");
if(postNumber > 0){
    postNumber--;
    Post *postInfo = [[Post alloc] init];

    postInfo = [getResult objectAtIndex:postNumber];

    UITextView *postText = [[UITextView alloc] init];
    imgView = [[UIImageView alloc] init];

    NSString *getImageString = postInfo.attachments;
    if(getImageString){
        [postText removeFromSuperview];
        postText = [[UITextView alloc] init];
        postText.text = postInfo.noteText;
        [postText setFrame:CGRectMake(20, 320, 280, 80)];
        NSLog(@"IMG1");
    }else {
        [postText removeFromSuperview];
        postText = [[UITextView alloc] init];
        postText.text = postInfo.noteText;
        [postText setFrame:CGRectMake(20, 10, 280, 240)];
        NSLog(@"TEXT1");
    }
    [self.view addSubview:postText];
    SHOWHUD(self.view);
    dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        if (getImageString) {

        NSURL *url = [NSURL URLWithString:getImageString];
        NSData *data = [NSData dataWithContentsOfURL:url];
        UIImage *img = [[UIImage alloc] initWithData:data];
        [imgView setFrame:CGRectMake(20, 10, 280, 300)];
        [imgView setContentMode:UIViewContentModeScaleAspectFit];
        [imgView setImage:img];
        }else {
            [imgView removeFromSuperview];
        }
        dispatch_async(dispatch_get_main_queue(), ^{   
            [self.view addSubview:imgView];
            HIDEHUD(self.view);
        });
    });
}

}

- (void)handleSwipeLeft:(UISwipeGestureRecognizer *)gestureRecognizer{
NSLog(@"SWIPE LEFT");
if(postNumber < [getResult count] - 1){
    postNumber++;

    Post *postInfo = [[Post alloc] init];

    postInfo = [getResult objectAtIndex:postNumber];

    UITextView *postText = [[UITextView alloc] init];
    imgView = [[UIImageView alloc] init];

    NSString *getImageString = postInfo.attachments;
    if(getImageString){
        [postText removeFromSuperview];
        postText = [[UITextView alloc] init];
        postText.text = postInfo.noteText;
        [postText setFrame:CGRectMake(20, 320, 280, 80)];
        NSLog(@"IMG1");
    }else {
        [postText removeFromSuperview];
        postText = [[UITextView alloc] init];
        postText.text = postInfo.noteText;
        [postText setFrame:CGRectMake(20, 10, 280, 240)];
        NSLog(@"TEXT1");
    }
    [self.view addSubview:postText];
    SHOWHUD(self.view);
    dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        if(getImageString){
        NSURL *url = [NSURL URLWithString:getImageString];
        NSData *data = [NSData dataWithContentsOfURL:url];
        UIImage *img = [[UIImage alloc] initWithData:data];
        [imgView setFrame:CGRectMake(20, 10, 280, 300)];
        [imgView setContentMode:UIViewContentModeScaleAspectFit];
        [imgView setImage:img];
        }else {
            [imgView removeFromSuperview];
        }
        dispatch_async(dispatch_get_main_queue(), ^{   
            [self.view addSubview:imgView];
            HIDEHUD(self.view);
        });
    });

}
} 
```

起初我只增加了 postNumber 并在滑动操作中调用了 viewDidLoad 。不过，这给了我完全相同的结果……这只是无数次尝试和错误尝试中的一种，很抱歉，这是比较混乱的尝试之一……

如果有人有解决方案，将不胜感激。

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:55:57.303

你试过这个吗？

```
for (UIView * view in self.view.subviews) {
    if ([view isEqual:postText]||[view isEqual:imgView]) {
        [view removeFromSuperview];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:07:51.280

我无法从超级视图中删除变量，因为我是在 viewDidLoad 的新实例中完成的。我在这次调用 viewDidLoad 之前尝试这样做，它成功了！

很抱歉浪费您的时间...

汤姆

# ruby-on-rails - RoR - 访问视图控制器变量

> ID：12042675
> 
> 赞同：0
> 
> 时间：2012-08-20T18:02:02.547
> 
> 标签：ruby-on-rails, variables

我正在尝试从我的数据库中创建项目列表。问题是我无法在我的视图/用户/index.html.erb 中访问来自 users_controller 方法的变量（数组）。我一直在阅读 tuts 和书籍，但他们告诉我要在路上的某个地方迷恋的方式。任何提示/帮助表示赞赏，谢谢。

控制器：

```
class UsersController < ApplicationController
  def index
    render('list')
  end

  def list
    @users = User.all
  end
  def show
    @user = User.find(params[:id])
  end
  def new
    @user = user.new
  end
  def create
    @user = User.new(params[:user])
    if @user.save
      flash[:notice] = "User succesfully created!"
      redirect_to(:action => 'list')
    else
      flash[:notice] = "User couldn't be created!"
      render('new')
    end
  end
end 
```

list.html.erb

```
<table>
    <tr>
    <td>
        <th>Name
    </td>
    <td>
        <th>Password
    </td>
    <td>
        <th>Log status
    </td>
    <td>
        <th>Warning
    </td>
    <td>
        <th>Banned
    </td>
    </tr>

    <% @users.each do |u| %>

    <tr>
        <td><%= u.name %></td>
        <td><%= u.password %></td>
        <td><%= u.log_status %></td>
        <td><%= u.warning %></td>
        <td><%= u.banned %></td>
    </tr>
    <%end%>
</table> 
```

错误：

```
 NoMethodError in Users#index

Showing /home/bogdan/ex/lynda/hW/app/views/users/list.html.erb where line #20 raised:

undefined method `each' for nil:NilClass
Extracted source (around line #20):

17:     </td>
18:     </tr>
19: 
20:     <% @users.each do |u|%>
21: 
22:     <tr>
23:         <td><%= u.name %></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:09:02.543

因为您正在渲染视图而没有在其中使用变量：

快速解决方案：

将此添加到您的索引操作中，然后点击重新加载：

```
 @users = User.all 
```

**详细解答：**

这两种方法是动作（执行光标）转到另一个地方，无论是视图还是动作。这意味着将控制权转移到另一个地方。这些是干式原理的示例，但用途不同。

**“使成为：”**

渲染与仅渲染视图的那部分而不实际再次运行该方法有关。这意味着如果我们使用渲染方法，它会转到相应的视图，因此它不会向服务器发送任何请求，因此速度很快。但它使用该方法中的数据意味着它从哪里渲染。渲染也用于文本、布局、文件、模板。

**“重定向：”**

重定向实际上将您带到页面并从头开始执行操作。当我们调用 redirect_to 方法时，它会转到那个特定的方法，这意味着这个请求会转到服务器，然后转到方法并执行它 Ex:Example

```
 def update 
      @product= Product.find(params[:id]) 
     if @product.update_attributes(params[:name]) 
       redirect_to :action => 'list_users' 
     else 
       render :edit 
     end 
   end 
```

**解释：**

上面的示例如果名称更新转到 list_users 方法，否则返回编辑视图。在此如果更新用户名然后转到列表用户并显示用户列表及其值，如果不更新数据则不返回编辑导致任何验证或任何东西回来查看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:29:05.077

Hmm, Mohit gave the correct answer, but I think it might be too difficult to understand for a novice user.

What he want to tell you, that the 'render' statement will only process the views/users/list.html.erb. It will not call another function (def list), so your variable @users has never been initialized.

To go by the guidelines, remove your 'def list', and move the line @users = User.all to the index action. Then it will work. Try to follow guidelines as much as possible, it will save you lots of work later on...

# c# - 访问 UI 控件时是否应始终使用 Control.InvokeRequired

> ID：12042681
> 
> 赞同：6
> 
> 时间：2012-08-20T18:02:25.297
> 
> 标签：c#, .net, winforms, clr, ui-thread

我们正在使用 WinForms (3.5) 构建一个 .NET 应用程序。

我最近添加了一项新功能，并且在访问某些控件时开始出现奇怪的行为。问题是某些 UI 控件访问只是停止了执行（没有看到异常）。

经过仔细检查（使用 WinDbg），我意识到控件是从 ThreadPool 线程更新的，并且抛出了 CrossThreadMessagingException。

我的问题是——关于如何规避这种行为有什么好的做法吗？

使用 Control.Invoke 方法将访问 UI 控件的每个代码位置都包围起来会非常麻烦，但也可能不可能。

如何将我的代码从应该使用的代码中划分为不应该使用 Invoke 的“安全”代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T19:17:42.097

*如果应用程序设计为多线程，则**可能*会发生跨线程，因此您需要使用 InvokeRequired 检查它，并且在 UI 线程上使用您正在调用 re-Invoke() 本身的方法，或者抛出异常将指示代码使用不当。请记住，在某些情况下 InvokeRequired 将是错误的（主要是当窗口没有句柄或正在/已被处置时）；防止这些情况的最好方法是不要在窗口初始化过程中比 Load() 事件处理程序更早地启动线程，并通过取消窗口创建的后台线程并等待它们关闭来处理 Closing() 事件。

如果应用程序不是多线程的（您没有设置 BackgroundWorkers、TPL 操作、BeginInvoke()ing 委托或 Start()ing 线程），则没有必要。但是，对 InvokeRequired 的调用非常便宜（其背后的逻辑基本上是检查 WinAPI 函数 GetThreadId 和 GetWindowThreadProcessId 返回相同的值），因此如果您预计程序被重组为多线程，则调用方法的以下模式很简单足以实现：

```
//no return value, no parameters; ShowWindow(), HideWindow(), etc
//Understand that many built-in control methods are not virtual and so you can't 
//override them to do this; you must either hide them or ensure the caller is
//checking for cross-threading.
public void MyWindowMethod()
{
   if(InvokeRequired)
      this.Invoke(new Action(MyWindowMethod));
   else
   {
      //main logic
   }
}

//Input but no return; SetTitle("My Title")
public void MyWindowMethod2(string input)
{
   if(InvokeRequired)
      this.Invoke(new Action<string>(MyWindowMethod2), input);
   else
   {
      //main logic
   }
}

//inputs and outputs; custom methods, advanced graphics
public string MyWindowMethod3(string input)
{
   if(InvokeRequired)
      return (string)(this.Invoke(new Func<string, string>(MyWindowMethod3), input));

   //No else required; the return makes it redundant
   //main logic   
} 
```

# javascript - 敲除绑定打印函数文本而不是变量值

> ID：12042685
> 
> 赞同：0
> 
> 时间：2012-08-20T18:02:42.280
> 
> 标签：javascript, knockout.js

我正在用 JS 编写一个小型应用程序，我决定使用 Knockout。除了没有正确打印的单个值之外，一切都运行良好，我不明白为什么。

这是附加错误的 html 视图（viaggio.arrivo 未可视化，并且代替正确值出现了类似“ `function c(){if(0 <arguments.length){if ...`”等的函数代码）

```
<input data-bind="value: viaggio.arrivo"  /> 
```

这就是 javascript 视图模型。代码很长，所以我把它放在一个[jsFiddle](http://jsfiddle.net/mGDwy/)中。

```
 function ViewModel() {
        function Viaggiatore(nome, cognome, eta, citta) {
            var self = this;
            self.nome = nome; self.cognome = cognome;
            self.eta = ko.observable(eta);
            self.citta = ko.observable(citta);
        }
        function Viaggio(viaggiatore, partenza, arrivo, mete) {
            var self = this;
            self.viaggiatore = ko.computed(viaggiatore);
            self.partenza = ko.computed(partenza);
            self.arrivo = ko.observable(arrivo);
            self.mete = ko.computed(mete);
        }

        self.viaggiatore = new Viaggiatore("Mario", "Rossi", 35, "Como");
        self.viaggio = new Viaggio(
            function(){ return self.viaggiatore.nome+" "+self.viaggiatore.cognome; },
            function(){ return self.viaggiatore.citta; },
            "Roma",
            function(){ return "mete" ;}
        );          
    }
    ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:09:34.720

我认为您的参数之一需要括号，如下所示：

```
<p data-bind="text: viaggio.partenza()"></p> 
```

查看更新的小提琴：http: [//jsfiddle.net/mGDwy/2/](http://jsfiddle.net/mGDwy/2/)

# actionscript-3 - MVC控制器和视图关系

> ID：12042688
> 
> 赞同：1
> 
> 时间：2012-08-20T18:02:50.103
> 
> 标签：actionscript-3, model-view-controller, view, controller

首先，我在网络上（包括这个网站）做了很多研究，发现了很多关于模型和控制器如何在 MVC 模式中通信的相互矛盾的信息。这是我的具体问题（我使用的是 AS3），但这是一个一般的 MVC 问题......

我有两个主要组成部分......一个食谱列表和一个显示所选食谱的表单。表单具有编辑状态，允许您编辑配方，然后保存或取消更改。处理对配方所做的更改的最佳方式是什么（使用 MVC 原则）？到目前为止，我让保存按钮触发了一个由控制器捕获的事件。

我应该让保存按钮（视图）传递一个带有当前字段状态的对象以及事件（视图中的一些逻辑）吗？我是否应该允许控制器保持对视图的访问并让控制器自己找出字段中的内容（增加耦合）？每次更改表单中的字段并且控制器跟踪每个字段的状态（大量事件）时是否应该进行事件？还是他们的另一种方式？注意：我不想将字段绑定到模型，因为我只想在单击保存按钮时保存数据。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:37:36.083

我认为这确实是一个数据库问题。我要做的是创建一个存储过程，首先检查配方是否已经存在。如果是，则更新它。如果没有，则添加新配方。（您必须将实体绑定到存储过程。其他 MVC 框架可以做到这一点。我不知道 actionscript）

如果这不是一个选项，那么我想您必须将原始表单缓存在控制器的帮助器类中，然后将其与用户尝试保存的内容进行比较。并让控制器决定是否更新配方。

我认为使用第一种方式更清洁，但我从未使用过 actionscript 所以......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:41:51.283

> 我应该让保存按钮（视图）传递一个带有当前字段状态的对象以及事件（视图中的一些逻辑）吗？

是的，这不是“视图中的逻辑”，它不决定任何事情，只是报告一个动作及其当前状态

> 我是否应该允许控制器保持对视图的访问并让控制器自己找出字段中的内容（增加耦合）？

不，这会变得非常混乱，请在活动中传递 VO

> 每次更改表单中的字段并且控制器跟踪每个字段的状态（大量事件）时是否应该进行事件？

是一个选项，但这基本上与点击保存按钮相同，触发器不同（TextField.onChange），但您可以调度相同的事件（设置是 form = view，使用 VO 调度一个通用事件，而不是每个字段的事件）

> 还是他们的另一种方式？

带有事件的 MVC 流：

1.  onClick save btn：调度一个RecipeEvent.SAVE（从视图中），带有一个包含Recipe数据的VO（值对象）（例如RecipeVO）
2.  控制器捕捉到这一点，并且由于控制器是逻辑所在的位置，它决定如何处理它：更新RecipesModel（直接通过调用模型上的方法，或通过自定义事件，例如RecipeModelEvent.SAVE）
3.  模型存储数据，并调度 RecipeEvent.UPDATE 事件（使用 RecipeVO）
    *   视图会相应更新（检查 RecipeVO.ID 是否相同，更新数据表示，例如标题……）
    *   可选地，控制器可以将数据保存到后端/远程数据库

至于事件监听器：视图监听模型，控制器监听视图。

关于解耦：使用接口（通过使用 IModel，您可以轻松地将模型替换为另一个实现，因为您针对接口而不是实际实现注册事件侦听器）

显然，所有这些都会导致大量注册/删除事件侦听器，并保持对模型/视图/控制器的引用，以便能够注册到适当的实例。另一种方法是使用框架作为 RobotLegs，因为它使中央事件总线可用 + 在视图的中介类中轻松/自动清理事件侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:48:42.580

Colin Moock 在 ActionScript 中关于 MVC 的讲座已经很老了，但仍然是最好的解释之一：[http ://www.moock.org/lectures/mvc/](http://www.moock.org/lectures/mvc/)

Your model should populate your view, and your view should send input events to the controller, which should decide what to do with the input. As g10 says, wait until the save button is clicked and then pass an object with the modified fields up to the controller for processing. The controller can then decide whether or not to accept it, and whether to update an existing model object or create a new one.

# c++ - 带有 MinGW 和 gcc 4.7.1 的 OpenCV 2.4.2

> ID：12042694
> 
> 赞同：1
> 
> 时间：2012-08-20T18:03:21.383
> 
> 标签：c++, opencv

我已经从网站下载了最新的 OpenCV 版本（2.4.2）。我计划为 MinGW 使用最新的 g++ 编译器，即 4.7.1 版。最后一天我一直在尝试编译在以下位置找到的演示： http: [//docs.opencv.org/trunk/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html](http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html)。

现在我在一台 Windows 机器上并通过可执行文件安装它，但我看不出在这种情况下会有什么不同。

我的 CMakeLists.txt 看起来像：

```
project( DisplayImage )
cmake_minimum_required(VERSION 2.8)

SET("OpenCV_DIR" "D:/__dev/opencv/build")

find_package( OpenCV REQUIRED )
add_executable( DisplayImage DisplayImage )
target_link_libraries( DisplayImage ${OpenCV_LIBS} ) 
```

现在，当我编译示例时，我不断收到以下错误：

```
[100%] Building CXX object CMakeFiles/DisplayImage.dir/DisplayImage.cpp.obj
In file included from D:/__dev/opencv/build/include/opencv2/flann/lsh_index.h:49:0,
                 from D:/__dev/opencv/build/include/opencv2/flann/all_indices.h:42,
                 from D:/__dev/opencv/build/include/opencv2/flann/flann_base.hpp:44,
                 from D:/__dev/opencv/build/include/opencv2/flann/flann.hpp:50,
                 from D:/__dev/opencv/build/include/opencv\cv.h:69,
                 from C:\cv_test\DisplayImage.cpp:1:
D:/__dev/opencv/build/include/opencv2/flann/lsh_table.h: In member function 'void cvflann::lsh::LshTable<ElementType>::add(cvflann
::Matrix<T>)':
D:/__dev/opencv/build/include/opencv2/flann/lsh_table.h:196:14: error: 'use_speed_' was not declared in this scope
make[2]: *** [CMakeFiles/DisplayImage.dir/DisplayImage.cpp.obj] Error 1
make[1]: *** [CMakeFiles/DisplayImage.dir/all] Error 2
make: *** [all] Error 2 
```

我知道错误的含义，但无法弄清楚我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:25:50.523

你试过用谷歌搜索你的问题吗？好像没有，很可惜：

1.  [flann/lsh_table.h 中未声明的变量，带有 -std=gnu++0x (Bug #2179)](http://code.opencv.org/issues/2179)
2.  [编译 bgslibrary 时 opencv2/flann/lsh_table.h 中的编译错误](http://answers.opencv.org/question/283/compile-error-in-opencv2flannlsh_tableh-when/)

# sql-server - 在标记中声明参数化查询

> ID：12042700
> 
> 赞同：2
> 
> 时间：2012-08-20T18:03:36.253
> 
> 标签：sql-server, sql-server-2008, asp-classic, parameters

我正在尝试在 ASP-Classic 中转换未参数化的 SQL Server 2008 R2 Express 查询，因此我执行了以下操作（请参见下面的代码），但我一直收到错误消息：

> *对象不支持此属性或方法：“参数”*

有人可以告诉我我做错了什么！

谢谢！

```
<%
' OPEN DATABASE
dim objConn, objRS, objTRS, objUnit
dim strConnection
set objConn = Server.CreateObject("ADODB.Connection")
objConn.ConnectionString = "Driver={SQL Server};Server=MSSQLSrv;Database=DbTest;UID=blablabala;PWD=blablabala"
objConn.Open strConnection
set objRS = Server.CreateObject("ADODB.Recordset")
set objRS.ActiveConnection = objConn
strQuery = "SELECT USERNAME,PASSWORD from CUSTOMERS where EMAIL=?"
objRS.Parameters(0) = Request.QueryString("email")
objRS.Open strQuery
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:45:52.247

如果您尝试使其成为参数查询，则需要先创建命令对象和参数。例如：

```
' create your command object
Const adCmdText = &H0001
Set objCmd = Server.CreateObject("ADODB.Command")
objCmd.ActiveConnection = YourConnectionString
objCmd.CommandType = adCmdText    ' Evaluate as textual definition, not stored procedure

'now create query and add parameters
strQuery = "SELECT USERNAME,PASSWORD from CUSTOMERS where EMAIL=?"  
objCmd.CommandText=strQuery
objCmd.Parameters.Append = objCmd.CreateParameter("ParameterName", ParameterType, adParamInput,   parameterSize, ParameterValue)
SET objRS = objCmd.execute(strSQL)
Set objCmd=Nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T20:55:24.933

参数集合在`command`对象而不是`recordset`.

这是一些有效的 VB6 代码，参数名称并不重要，因为参数顺序很重要。

```
 Dim rst As Recordset
    Dim cmd As ADODB.Command
    Set cmd = New Command

    With cmd
        .CommandText = "SELECT USERNAME,PASSWORD from CUSTOMERS where EMAIL=?" ' this proc also returns factor info
        .CommandType = adCmdText
        Set .ActiveConnection = objconn
        .Parameters.Append .CreateParameter("@Email", adVarChar, adParamInput, 50, "Email")

        Set rst = cmd.Execute
    End With 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T22:11:24.540

你可以这样做：

```
 ' OPEN DATABASE
    dim objConn,objRS,objTRS,objUnit

   Const adCmdText = &H0001

    Set objConn = Server.CreateObject("ADODB.Command") 
    objConn.ActiveConnection = "Driver={SQL Server};Server=MSSQLSrv;Database=DbTest;UID=blablabala;PWD=blablabala"

   objConn.CommandType = adCmdText

    strQuery = "SELECT USERNAME,PASSWORD from CUSTOMERS where EMAIL=?"
    objConn.CommandText=strQuery 
    objConn.Parameters(0) = Request.QueryString("email")
    SET objRS = objConn.execute(strQuery) 
```

# firefox - 通过 id 识别 http 请求/响应

> ID：12042701
> 
> 赞同：0
> 
> 时间：2012-08-20T18:03:42.227
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在使用 Firefox 的 ADD ON SDK (v1.9) 构建一个扩展，它将能够读取所有 HTTP 请求/响应并计算它们加载的时间。这不仅包括主框架，还包括任何其他加载文件（子框架、脚本、css、图像等）。

到目前为止，我可以使用“observer-service”模块来监听：

*   创建 HTTP 请求时的“http-on-modify-request”。
*   收到 HTTP 响应时的“http-on-examine-response”
*   “http-on-examine-cached-response”当 HTTP 响应完全从缓存中接收时
*   “http-on-examine-merged-response”当从缓存部分接收到 HTTP 响应时

我的申请遵循以下顺序：

1.  通过观察者创建和注册请求。
2.  我保存当前时间并将其标记为请求加载的 start_time。
3.  通过其中一个观察者接收和注册请求的响应。
4.  我保存当前时间并使用之前保存的时间来计算请求的加载时间。

**问题：** 我无法链接加载的开始时间和结束时间，因为我找不到将请求与响应联系起来的请求 ID（或其他唯一值）。我目前正在使用请求/响应的 URL 将它们绑定在一起，但这是不正确的，因为如果同时加载两个或多个相等的 url，它将引发“竞争条件”。谷歌浏览器通过提供唯一的 requestId 解决了这个问题，但我在 Firefox 上找不到类似的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:02:17.760

我知道有两种方法可以识别您在此观察者中收到的频道。“旧”解决方案是使用[`nsIWritablePropertyBag`接口](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWritablePropertyBag)将数据附加到通道：

```
var {Ci} = require("chrome");
var channelId = 0;

...

// Attach channel ID to a channel
if (channel instanceof Ci.nsIWritablePropertyBag)
  channel.setProperty("myExtension-channelId", ++channelId);

...

// Read out channel ID for a channel
if (channel instanceof Ci.nsIPropertyBag)
  console.log(channel.getProperty("myExtension-channelId")); 
```

另一种解决方案是使用[`WeakMap`API](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/WeakMap)（仅从 Firefox 13 开始正常工作）：

```
var channelMap = new WeakMap();
var channelId = 0;

...

// Attach channel ID to a channel
channelMap.set(channel, ++channelId);

...

// Read out channel ID for a channel
console.log(channelMap.get(channel)); 
```

我不确定`WeakMap`在附加 SDK 模块的上下文中是否可用，您可能必须从常规 JavaScript 模块中“窃取”它：

```
var {Cu} = require("chrome");
var {WeakMap} = Cu.import("resource://gre/modules/FileUtils.jsm", null); 
```

显然，在这两种情况下，您都可以将比简单数字更多的数据附加到通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:58:15.637

Firebug 通过为这些事件实现一个中央观察者来完成您的想法：

[https://github.com/firebug/firebug/blob/master/extension/modules/firebug-http-observer.js](https://github.com/firebug/firebug/blob/master/extension/modules/firebug-http-observer.js)

这可能是一个很好的起点，尽管Firefox*最终*会默认提供一个更完整的网络监视器/调试器。我想我在某处读到它将基于 Firebug 的。

# android - SQLite UPDATE 语句获取致命异常

> ID：12042702
> 
> 赞同：1
> 
> 时间：2012-08-20T18:03:44.460
> 
> 标签：android, sqlite

我得到这个例外：

```
FATAL EXCEPTION: main android.database.sqlite.SQLiteException: near ".": syntax error: , while compiling: UPDATE items SET I.red='1' FROM items I, feeds F  WHERE I.feedLink=F.link AND F.category='Genel' 
```

从这个声明：

```
UPDATE items 
SET I.red='1' 
FROM items I, feeds F 
WHERE I.feedLink=F.link AND F.category='Genel' 
```

在 Android 中使用 SQLite。我该如何解决这个问题？

> **注意**：项目和提要是我的数据库表的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:11:29.103

试试这个

UPDATE items i SET i.red='1' FROM items i, feeds f WHERE i.feedLink=f.link AND f.category='Genel'

如果不这样做，请尝试将其分成两个查询：

SELECT f.link FROM feed f WHERE f.category='Genel'

然后在以下查询中使用结果：

UPDATE items i SET i.red='1' WHERE i.feedLink IN ([f.link(s) in the result from the prev.query])

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:18:22.557

SQL 更新语法：

```
UPDATE table_name
SET column1=value, column2=value2,...
WHERE some_column=some_value 
```

磨练我认为您要完成的工作：

```
UPDATE items 
SET red='1' 
WHERE feedLink IN 
(SELECT link FROM feeds WHERE category='Genel') 
```

# search - 快速搜索 - 它是什么以及为什么在 Sharepoint 中提到它？

> ID：12042704
> 
> 赞同：1
> 
> 时间：2012-08-20T18:03:46.873
> 
> 标签：search, fastsearch

我最近听说过 FAST Search 并试图理解它。每当我读到它时，都会提到 Sharepoint。

这是一个单独的产品吗？它与 Sharepoint 有什么关系？

我有兴趣了解更多有关它的信息。在 Sharepoint 环境之外，我在哪里可以找到它的学习资源？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:45:33.317

SharePoint 的企业搜索产品不存在，并且有一个非常好的产品，称为 FAST ESP，微软喜欢它的外观，所以他们收购了这家公司。当 SharePoint 2010 推出时，他们使连接更易于配置，并为其提供了 SharePoint 管理 UI *。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T00:13:13.200

Microsoft Sharepoint 2010 具有用于 Intranet 和人员搜索的搜索功能。这是通过集成 MS Sharepoint 和 MS 企业 FAST 实现的。Microsoft FAST 是一种企业搜索产品，可用作任何网站的独立搜索产品。MS Enterprise Search 没有在线文档来源。它可以与另一个企业搜索产品 Endeca 相提并论。

# variables - 为什么变量永远不会减少？

> ID：12042705
> 
> 赞同：0
> 
> 时间：2012-08-20T18:03:50.483
> 
> 标签：variables, python-2.7

```
def complex():
    answer = raw_input("Would you like to run this program?")

    answer = answer.lower()

    money = 5

    if "yes" in answer:
        print money
        money = money - 1
        complex()

    else:
        quit()

complex() 
```

出于某种原因，每次我在 raw_input 中输入“yes”时，它都会吐出 5。但是我希望它吐出 5，然后当我再次键入 yes 时，我希望它吐出 4，然后如果我再次键入 yes，我想让它吐出 3....

我通过使用 Global 语句解决了这个问题：

```
money = 5
def complex():
answer = raw_input("Would you like to run this program?")
answer = answer.lower()

    if "yes" in answer:
        global money
        print money
        money = money - 1
        complex()

    else:
        quit()

complex() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:26:43.607

This is what your procedure is doing :

1.  Get user input
2.  Set variable `money` to 5
3.  Validate if user input value is "yes" and if so print value if variable `money` which is 5.
4.  Set variable `money` to 5 - 1 = 4
5.  Run procedure `complex()`
6.  Get user input
7.  Set variable `money` to 5
8.  Validate if user input value is "yes" and if so print value if variable `money` which is 5.
9.  Set variable `money` to 5 - 1 = 4
10.  Run procedure `complex()`

... etc.

As you can see your procedure is overwriting the desired value (4) with the value of 5 with each iteration that that is why it is not working as you desire.

What you could do is make a loop to run x number of times after `money` has been set to five.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:06:28.170

`money`是`complex`函数的局部变量。

每次调用`complex`函数时都会创建变量。

尝试在方法之前创建变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:06:23.493

在“复杂”函数中，您不断将 money 变量重置为 5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:07:33.520

由于您调用了 complex()，因此一直调用 money = 5 行。要解决此问题，您的递归调用不应包含此设置。或者，使用迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T18:08:18.843

将钱 = 钱 - 1 更改为您使用它太多次的不同变量，它将把钱当作 5

```
print dollars 
dollars = money - 1 
```

# wpf - 将文本框文本绑定到 xml 文件的磁盘路径

> ID：12042706
> 
> 赞同：0
> 
> 时间：2012-08-20T18:03:54.727
> 
> 标签：wpf, xml, data-binding

我设置了一个窗口，显示 xml 文件中的数据，并允许用户更改、保存等。除了我想要一个显示文件路径的文本框或文本块之外，我已经设置了很多东西用户正在使用的当前文件。

我设置了一个名为“xmlData”的 XmlDataProvider，并且我的文本绑定如下：

```
Text="{Binding Path=Source, Source={StaticResource xmlData}}" 
```

我还尝试了上面静态资源的数据上下文，即使我知道数据提供程序中有一个 xml 文件（我可以写入它），两者都只给了我一个空白文本框。我错过了什么还是不能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:07:15.733

问题是它`XmlDataProvider.Source`不是`Uri`一个字符串。所以你会想要做类似的事情：

```
Text="{Binding Path=Source.AbsolutePath, Source={StaticResource xmlData}}" 
```

绝对路径不会给你类似的东西：`C:\My documents\test.xml`但是，它更有可能是类似的东西：`file://c:/my documents/test.xml`。所以你需要找到一种很好的方法来操纵源`Uri`以获得你想要的东西。

您可以做的一件事是使用[Converter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)对其进行解析并返回您想要的内容。

看起来也`Uri.LocalPath`可能会给你你想要的东西，但如果没有测试，我不能 100% 确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:05:34.587

好吧，我想出了一些可行的方法，但这不是我想要的。我最终选择了“老派”。我在后面的代码中的表单上放置了一个标准属性，并带有一个支持变量和 get/set 方法。在 set 方法中，我只是将 text 属性设置为与支持变量相同的值。

我正在等待将此标记为答案，看看是否有人有更好的解决方案。

——我试过的——

在上述回答/对话之后，我尝试将一个转换器插入其中，简单地将值返回，以便我可以在调试器中闯入它并查看传递给转换器的内容。无论我做了什么，我都无法让它达到断点，所以它似乎由于某种原因甚至没有到达转换器。

然后，我尝试在表单本身后面的代码上定义一个依赖属性，并将一个标准属性定义为包装器（其中 get 和 set 只使用依赖属性上的 GetValue 和 SetValue）并使用 relativesource 将文本框文本绑定到该文本框和始祖。基本上我将文本绑定到表单的该属性。然后，每当用户浏览新文件时，我都会使用代码中的包装器更改属性。这在加载时起作用，但是每当我在代码中设置值时，它都不会更新文本框中的文本。我什至使用诊断将绑定跟踪设置为高；我看到它找到了表单并说它绑定到值等，但是每当我点击浏览方法并更改路径时，我都没有输出，文本也没有变化。

就像我说的那样，我所拥有的正在工作，我想这是合理的，但如果有人可以就为什么这不起作用增加洞察力，我会很想知道。我对 WPF 相当陌生，所以我想学会正确地做这些事情......

# grammar - 袖珍狮身人面像使用语法很慢

> ID：12042707
> 
> 赞同：1
> 
> 时间：2012-08-20T18:04:05.273
> 
> 标签：grammar, cmusphinx

我一直在尝试使用 CMU 的 Pocket Sphinx 在 Android 平板电脑上执行语音识别。可以在[此处](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)找到有关执行此操作的教程。我的问题是，如果我使用任何显着大小的语法，识别就会非常缓慢。使用语言模型，我可以获得很好的准确性和速度，所以我的*临时*解决方案是从我的语法生成一个语言模型并使用它。
在我的配置中，我设置了`-bestpath = false`. 在那之后，我不知道如何加快速度。
澄清：我知道大型语法需要很长时间才能初始化，但我认为使用它运行识别应该不需要很长时间。

有没有使用 Pocket Sphinx 和语法的人可以分享他们的经验、配置等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T07:34:02.273

我们按照网上可用的教程在 1Ghz Android 手机上使用了 pocketsphinx（只需进行谷歌搜索）。启动速度非常快，但即使只录了 2 个单词，在停止录制大约 10 秒后它就挂断了。这是使用默认的“hub4”预录语法。

# django - 如何判断 django 用户是否曾经登录过？

> ID：12042711
> 
> 赞同：4
> 
> 时间：2012-08-20T18:04:12.870
> 
> 标签：django, login, registration

我们有一个 Django 项目，每当她打电话给我们时，都会为一个人创建一个用户帐户。该人以后可能会或可能不会使用她的帐户登录我们的网站。

**问题：如何判断用户是否*曾经*登录过我们的网站？**

**澄清：我想为数百名现有用户回答上述问题，而不仅仅是从此时开始创建的新用户。**

**想法1：**检查`User.last_login`。不幸的是，无论用户是否登录，Django 都会在创建用户时进行`last_login`初始化。`datetime.datetime.now()`

**想法2：**检查是否`User.last_login`匹配`User.date_joined`。不幸的是，Django 将这两个字段都初始化*为*，`datetime.now()`它们可能相隔几微秒：

```
In [1]: u = User.objects.create(username="bla")

In [2]: u.date_joined - u.last_login
Out[2]: datetime.timedelta(0, 0, 23) 
```

**我正在使用**的当前 hack：假设用户至少登录过一次*iff* `user.last_login - user.date_joined >= datetime.timedelta(seconds=1)`。

有没有更好的方法来判断用户是否曾经登录过？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-23T14:47:07.853

如果是更新版本的 Django (> 1.8)，你应该使用 User.last_login。这是[文档](https://docs.djangoproject.com/en/1.9/ref/contrib/auth/)所述：

> 上次登录
> 
> 用户上次登录的日期时间。
> 
> 在 Django 1.8 中更改：如果用户从未登录，此字段将为空。以前默认设置为当前日期/时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:55:12.543

`date_joined`当您说和都设置为创建时的当前日期时，我将假设您是对`last_login`的，并且由于某种原因，两个分配之间有足够的时间来创建一个明显的增量。

如果是这种情况，那么您可以接受@LAK 的建议并创建一个[pre_save](https://docs.djangoproject.com/en/dev/ref/signals/#pre-save)（并检查实例的 ID 是否为 0）或[post_save](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)（并检查`created`参数）并手动将该`last_login`字段设置`None`为`date_joined`. 从那里你所有的未来数据都被保存在你似乎鄙视的一秒钟模糊中。

至于您现有的数据，我认为您无法对现有数据做出最佳猜测。我认为做出你所做的假设并没有太大风险。如果您想将其清理为与所有新数据相同，您只需更新数据库以设置`last_login`值。如果您使用的是[South](http://south.aeracode.org/)，这很容易进行数据迁移。否则，您可以在部署新的代码更改后创建一个要运行的脚本。

老实说，我不认为他们偏离了一点点是个问题。只要您假设用户很可能无法在创建帐户的时间范围内登录，似乎没有理由添加一堆额外的工作来强制它完全匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T20:25:06.497

我会用一个`F`对象来`last_login`比较`date_joined`。如果它们相等，则用户从未登录（或至少在初始注册后从未登录，这大约是您可以确定的最佳状态）

```
from django.db.models import F

User.objects.filter(last_login=F('date_joined')) 
```

**更新**

好吧，它在我的环境中成功运行，但我想这两个*可能*会关闭几微秒或更长时间。如果是这种情况，那么我认为您唯一的办法是实际手动检查每个`User`. 如果您需要更高的准确性，您可以对以下内容进行更改，但一般来说，我认为在最初创建计数之后从未登录的用户可以被视为“从未登录”，无论是出于何种意图和目的方式，他们已经放弃了帐户。

```
if user.date_joined.date() == user.last_login.date():
    # do something 
```

如果您需要更高的准确性：

```
date_joined = datetime.combine(user.date_joined.date(), time(user.date_joined.hour, user.date_joined.minute))
last_login = datetime.combine(user.last_login.date(), time(user.last_login.hour, user.last_login.minute))
if date_joined == last_login:
    # do something 
```

这实质上创建了新的日期时间对象，消除了秒和微秒的差异。当然，这里 1 分钟的准确度水平就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T10:32:54.497

`QuerySet`这是一个解决方案，可以按已登录或未登录该站点的用户过滤 a 。

`filter_user_has_used_site()`and`filter_user_hasnt_used_site()`函数适用于`QuerySet`包含`auth.User`.

`filter_resource_has_used_site()`和`filter_resource_hasnt_used_site()`适用于模型具有`ForeignKey`名为`user`to的字段的任何查询集`auth.User`。

它只适用于 mysql，但可以很容易地支持其他数据库引擎。

```
from datetime import timedelta
from django.db import connection

MYSQL = "ABS(TIMESTAMPDIFF(SECOND,auth_user.last_login,auth_user.date_joined))"

def filter_resource_has_used_site(qs):
    """
    Takes a QuerySet of resources and returns a QuerySet only containing
    resources that has logged in to site at least once.
    """
    vendor = connection.vendor
    if vendor == 'mysql':
        # Force the orm to join to auth_user.
        qs = qs.filter(user__username__isnull=False)
        where = "".join([MYSQL, '>1'])
        return qs.extra(where=[where])
    else:
        raise NotImplementedError('Vendor type {} not supported.'.format(
            vendor))

def filter_resource_hasnt_used_site(qs):
    """
    Takes a QuerySet of resources and returns a QuerySet only containing
    resources that never logged in to site.
    """
    vendor = connection.vendor
    if vendor == 'mysql':
        # Force the orm to join to auth_user.
        qs = qs.filter(user__username__isnull=False)
        where = "".join([MYSQL, '<2'])
        return qs.extra(where=[where])
    else:
        raise NotImplementedError('Vendor type {} not supported.'.format(
            vendor))

def filter_user_has_used_site(qs):
    """
    Takes a QuerySet of users and returns a QuerySet only containing
    users that has logged in to site at least once.
    """
    vendor = connection.vendor
    if vendor == 'mysql':
        where = "".join([MYSQL, '>1'])
        return qs.extra(where=[where])
    else:
        raise NotImplementedError('Vendor type {} not supported.'.format(
            vendor))

def filter_user_hasnt_used_site(qs):
    """
    Takes a QuerySet of users and returns a QuerySet only containing
    users that never logged in to site.
    """
    vendor = connection.vendor
    if vendor == 'mysql':
        where = "".join([MYSQL, '<2'])
        return qs.extra(where=[where])
    else:
        raise NotImplementedError('Vendor type {} not supported.'.format(
            vendor))

def user_has_used_site(user):
    """
    Returns if a auth.user has logged into the site.
    """
    return abs(user.last_login - user.date_joined) > timedelta(seconds=1) 
```

# cloudbees - 如何让我的 cloudbees 构建作业访问 ec2 上的外部服务器

> ID：12042716
> 
> 赞同：1
> 
> 时间：2012-08-20T18:04:21.197
> 
> 标签：cloudbees

我有一系列构建作业（在这种情况下使用 maven）想要访问我自己的一些基础设施（例如 MySQL、Cassandra）进行测试——我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:04:21.197

如果您在 EC2 US-East 中运行自己的服务器，则可以按照文章 -[允许访问 EC2 资源打开构建服务安全组](https://go.cloudbees.com/docs/support-kb-articles/DEV-at-cloud/Allowing-Access-to-EC2-Resources-from-CloudBees-Slaves.html)

# python - Python 素数生成器 Numpy

> ID：12042721
> 
> 赞同：0
> 
> 时间：2012-08-20T18:04:33.540
> 
> 标签：python, numpy, generator, fft

我不是程序员，但我正在学习，

有人可以帮我理解 FFT 是什么吗？如何在 python 代码中实现它，例如生成从 1 到 10000 的素数的 python 代码？

也有人建议使用 NumPy，我下载并安装了它，但不知道它的作用。它与FFT有关吗？

任何帮助，将不胜感激。

问候， babsdoc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:21:08.990

好的，我将忽略有关 fft 的所有内容（它与信号处理有关，根本与质数无关）。

最著名的基本和著名的方法是[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。维基百科有一个很好的视觉示例来说明它是如何工作的。

在（未经测试的）Python 中，您可以按如下方式对其进行编码：

```
max_val = 1000
seive = range(max_val)
seive[0] = None  # 1 is not prime!
for x in range(1, max_val):
    if seive[x]:
        print "{prime} is prime.".format(prime = x)
        # now remove multiples of prime x from the seive
        y = 2*x 
        while y <= max_val:
            seive[y] = None
            y = y + x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:44:36.493

使用此处建议的函数[“Python：检查数字是否为素数”](http://www.stealthcopter.com/blog/2009/09/python-checking-if-a-number-is-prime/)

我建议您使用以下代码：

```
def isprime(number):  
if number<=1:  
    return 0  
check=2  
maxneeded=number  
while check<maxneeded+1:  
    maxneeded=number/check  
    if number%check==0:  
        return 0  
    check+=1  
return 1 
prime_list = [i for i in xrange(1,1001) if isprime(i)]
print prime_list

>>> [3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, ... 
```

将 xrange( **1,1001** ) 调整到您想要的范围，您将获得所有素数

# python - 安全地存储密码以在 python 脚本中使用

> ID：12042724
> 
> 赞同：100
> 
> 时间：2012-08-20T18:05:03.807
> 
> 标签：python, security

> **可能重复：**
> [我需要在 Python 中安全地存储用户名和密码，我有哪些选择？](https://stackoverflow.com/questions/7014953/i-need-to-securely-store-a-username-and-password-in-python-what-are-my-options)

我正在寻找一种方法来安全地存储我打算在某些 Python 脚本中使用的密码。我将登录不同的东西，我不想将密码作为明文存储在脚本本身中。

相反，我想知道是否有任何东西能够安全地存储这些密码，然后使用我可以在开始时输入脚本的主密码之类的东西来检索它们。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-21T00:52:29.837

自己知道万能钥匙。不要硬编码。

使用`py-bcrypt`(bcrypt)，强大的散列技术自己生成密码。

基本上你可以做到这一点（一个想法......）

```
import bcrypt
from getpass import getpass
master_secret_key = getpass('tell me the master secret key you are going to use')
salt = bcrypt.gensalt()
combo_password = raw_password + salt + master_secret_key
hashed_password = bcrypt.hashpw(combo_password, salt) 
```

将盐和散列密码保存在某处，因此每当您需要使用密码时，您都在读取加密密码，并针对您再次输入的原始密码进行测试。

这基本上就是这些天登录应该如何工作的方式。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-20T18:47:53.797

我通常有一个`secrets.py`与我的其他 python 脚本分开存储的，并且不受版本控制。然后在需要时，您可以执行`from secrets import <required_pwd_var>`. 通过这种方式，您可以依赖操作系统内置的文件安全系统，而无需重新发明自己的系统。

使用`Base64`编码/解码也是另一种混淆密码的方法，虽然不完全安全

更多信息 -[在 python 脚本中隐藏密码（仅限不安全的混淆）](https://stackoverflow.com/questions/157938/hiding-a-password-in-a-python-script?rq=1)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-21T01:30:19.180

安全的方法是通过 AES 加密您的敏感数据，而加密密钥是通过基于密码的密钥派生函数 (PBE) 派生的，这是用于加密/解密 AES 加密密钥的主密码。

> 主密码->安全密钥->通过密钥加密数据

您可以使用[pbkdf2](https://www.dlitz.net/software/python-pbkdf2/)

```
from PBKDF2 import PBKDF2
from Crypto.Cipher import AES
import os
salt = os.urandom(8)    # 64-bit salt
key = PBKDF2("This passphrase is a secret.", salt).read(32) # 256-bit key
iv = os.urandom(16)     # 128-bit IV
cipher = AES.new(key, AES.MODE_CBC, iv) 
```

确保存储 salt/iv/passphrase ，并使用相同的 salt/iv/passphase 解密

Weblogic 使用类似的方法来保护配置文件中的密码

# c# - 回发后如何在gridview上保持颜色？ASP.NET C#

> ID：12042725
> 
> 赞同：5
> 
> 时间：2012-08-20T18:05:04.347
> 
> 标签：c#, asp.net, gridview, postback

我有一个gridview，我在使用RowDataBound 后更改了一些行颜色......

这是我的网格视图

```
<asp:GridView ID="grdvEventosVendedor" runat="server" AllowPaging="True" 
                AutoGenerateColumns="False" CellPadding="4" DatakeyNames="idCita"
                EmptyDataText="No Hay Eventos Para Este Vendedor" ForeColor="#333333" 
                GridLines="None" AllowSorting="True"
                onpageindexchanging="grdvEventosVendedor_PageIndexChanging" 
                onrowcommand="grdvEventosVendedor_RowCommand" 
                onsorting="grdvEventosVendedor_Sorting" CellSpacing="1" 
                onrowdatabound="grdvEventosVendedor_RowDataBound" >
                <AlternatingRowStyle BackColor="White" ForeColor="#284775"/>

                <Columns>
                    <asp:TemplateField HeaderText="" ItemStyle-Width="35px">
                        <ItemTemplate>
                            <asp:ImageButton ID="imgBtnEdicEvento" runat="server" 
                                CommandArgument='<%# Eval("idCita")%>' CommandName="Edicion" 
                                Height="32px" ImageUrl="~/img/pencil_32.png" Width="32px" />
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="" ItemStyle-Width="35px">
                        <ItemTemplate>
                            <asp:ImageButton ID="imgBtnDelete" runat="server"
                                CommandName="Borrar" 
                                ImageUrl="~/img/1385_Disable_16x16_72.png" 
                                onclientclick="return confirm('¿Desea eliminar el registro?');" 
                                CommandArgument='<%# Eval("idCita")%>' />
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:BoundField DataField="Cliente" HeaderText="Cliente" InsertVisible="False" ReadOnly="True" SortExpression="Cliente" ItemStyle-Width="50px" />
                    <asp:BoundField DataField="Empresa" HeaderText="Empresa" InsertVisible="False" ReadOnly="True" SortExpression="Empresa" ItemStyle-Width="50px"/>
                    <asp:BoundField DataField="Telefono" HeaderText="Telefono" InsertVisible="False" ReadOnly="True" SortExpression="Telefono" ItemStyle-Width="50px"/>
                    <asp:BoundField DataField="Nextel" HeaderText="Nextel" InsertVisible="False" ReadOnly="True" SortExpression="Nextel" ItemStyle-Width="50px"/>
                    <asp:BoundField DataField="Tipo" HeaderText="Tipo" InsertVisible="False" ReadOnly="True" SortExpression="Tipo" ItemStyle-Width="50px"/>
                    <asp:BoundField DataField="Descripcion" HeaderText="Descripcion" InsertVisible="False" ReadOnly="True" SortExpression="Descripcion" ItemStyle-Width="150px"/>

                    <asp:TemplateField HeaderText="Fecha" SortExpression="Fecha" ItemStyle-Width="50px">
                        <ItemTemplate>
                            <asp:Label ID="lblFecha" runat="server" Text='<%#Bind("Fecha", "{0:dd/MM/yyyy}")%>'>
                            </asp:Label>
                        </ItemTemplate>

                        <EditItemTemplate>                                        
                            <asp:TextBox ID="tbxFecha"  runat="server" Text='<%#Bind("Fecha","{0:dd/MM/yyyy}") %>' ValidationGroup="gpEdicionAgenda">
                            </asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>

                    <asp:BoundField DataField="HoraInicio" HeaderText="Hora" InsertVisible="False" ReadOnly="True" SortExpression="HoraInicio" ItemStyle-Width="50px"/>
                    <asp:BoundField DataField="Lugar" HeaderText="Lugar" InsertVisible="False" ReadOnly="True" SortExpression="Lugar" ItemStyle-Width="50px"/>
                    <asp:BoundField DataField="Estado" HeaderText="Estado" InsertVisible="False" ReadOnly="True" SortExpression="Estado" ItemStyle-Width="50px"/>

                    <%--<asp:TemplateField HeaderText="Estado" ItemStyle-Width="50px">
                        <ItemTemplate>
                            <asp:DropDownList ID="dpdListEstado" runat="server" OnSelectedIndexChanged="dpdListEstado_SelectedIndexChanged" AutoPostBack="True" CommandArgument="">
                                <asp:ListItem>Pendiente</asp:ListItem>
                                <asp:ListItem>Atendido</asp:ListItem>
                            </asp:DropDownList>
                        </ItemTemplate>
                    </asp:TemplateField>--%>

                    <asp:TemplateField HeaderText="Atender" ItemStyle-Width="35px">
                        <ItemTemplate>
                            <asp:ImageButton ID="imgBtnAtender" runat="server"
                                CommandArgument='<%# Eval("idCita")%>' CommandName="Atender" 
                                ImageUrl="~/img/activar.png" Width="16px" Height="16px" 
                                onclientclick="return confirm('¿Desea marcar como atendido este registro?');" />
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="CRM" ItemStyle-Width="35px">
                        <ItemTemplate>
                            <asp:ImageButton ID="imgBtnCRM" runat="server"
                                CommandArgument='<%# Eval("IdCliente")%>' CommandName="CRM" 
                                ImageUrl="~/img/go.gif" Width="16px" Height="16px" />
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="VM" ItemStyle-Width="35px">
                        <ItemTemplate>
                            <asp:ImageButton ID="imgBtnVerMas" runat="server"
                                CommandArgument='<%# Eval("IdCliente")%>' CommandName="VerMas" 
                                ImageUrl="~/img/search.png" Width="16px" Height="16px" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>

                <EditRowStyle BackColor="#999999" Font-Size="Small" />
                <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" Font-Size="Larger" />
                <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                <RowStyle BackColor="#F7F6F3" ForeColor="#333333" HorizontalAlign="Center" Font-Size="Small" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <SortedAscendingCellStyle BackColor="#E9E7E2" />
                <SortedAscendingHeaderStyle BackColor="#506C8C" />
                <SortedDescendingCellStyle BackColor="#FFFDF8" />
                <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
            </asp:GridView> 
```

在我的cs中，我有...

```
 private static string strColorUrgente = "#FF525D";
    private static string strColorEnCurso = "#FFDE00";
    private static string strColorHoy = "#3ECF00"; 
```

这是 rowbounddata 函数

```
protected void grdvEventosVendedor_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowIndex >= 0 && e.Row.Cells[11].Text == "Pendiente")
        {
            string strFecha = (e.Row.FindControl("lblFecha") as Label).Text;
            int intYear = Convert.ToInt32(strFecha.Split('/')[2]);
            int intMonth = Convert.ToInt32(strFecha.Split('/')[1]);
            int intDay = Convert.ToInt32(strFecha.Split('/')[0]);
            DateTime dtmFecha = new DateTime(intYear, intMonth, intDay);

            if (dtmFecha < DateTime.Today)
            {
                e.Row.BackColor = Color.FromName(strColorUrgente);
            }

            else if (dtmFecha == DateTime.Today)
            {
                DateTime dtmHoraInicio = Convert.ToDateTime(e.Row.Cells[9].Text);

                if (dtmHoraInicio > DateTime.Now)
                {
                    e.Row.BackColor = Color.FromName(strColorHoy);
                }

                else
                {
                    e.Row.BackColor = Color.FromName(strColorEnCurso);
                }
            }
        }
    } 
```

每当我进入此页面或使用搜索引擎时，我都会使用数据源刷新gridview，当然，会触发RowDataBound ...最终会更改某些行的颜色...

您会注意到，在 gridview 的最后一列中，有一个名为 imgBtnVerMas 的按钮...

按下时会触发以下功能

```
string strMensaje = "";

        try
        {
            //Method that brings back data from a specific client (returns a datatable)
            //intIdCliente was defined in the CommandArgument
            DataTable dtDatosCliente = ConexionBD.GetInstanciaConexionBD().GetClienteEspecifico2(intIdCliente);
            //Assigning to a string a message that needs info from the previous datatable
            strMensaje += "DATOS DEL CLIENTE\\n\\nNombre:\\t" + dtDatosCliente.Rows[0]["Cliente"] + "\\nEmpresa: " + dtDatosCliente.Rows[0]["Empresa"];
        }

        catch
        {
            if (strMensaje == "")
            {
                strMensaje = "Hubo Un Error Al Traer Los Datos Del Cliente";
            }

            else
            {
                strMensaje += "\n\nERROR!!!!!!!";
            }
        }

        ClientScript.RegisterStartupScript(this.GetType(), "Mensaje", "alert('" + strMensaje + "');", true); 
```

之后，显示消息，但是，所有的行颜色都消失了......我想知道......即使在回发之后，我怎样才能保持 gridview 行的颜色......

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T19:00:08.573

您需要在事件`onprerender`而不是 RowDataBound 上设置颜色，因此在 GridView 上设置事件

```
onprerender="gvMyLista_PreRender" 
```

和后面的代码

```
protected void gvMyLista_PreRender(object sender, EventArgs e)
{
   // loop your data, and fix your colors.
   for (int i = 0; i < gvMyLista.Rows.Count; i++)
   {
       // get your data as...
      // gvMyLista.Rows[i].Cells[2].Text
   }
} 
```

# xcode - xcode中的调试变量

> ID：12042730
> 
> 赞同：0
> 
> 时间：2012-08-20T18:05:24.880
> 
> 标签：xcode, debugging

我的代码中的一个变量正在某处被取消分配，我不知道在哪里。我正在尝试调试它，但是要搜索很多代码。

> 有没有办法跟踪一个变量，并显示它在哪里被修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:10:47.327

在 XCode 的调试窗口中右键单击该变量，然后选择“Watch variable”。

或者，使用 gdb： [http ://scottmcpeak.com/memory-errors/](http://scottmcpeak.com/memory-errors/)

这在此处的类似主题中进行了讨论： [Tracking variable or memory change in Xcode?](https://stackoverflow.com/questions/4801175/tracking-variable-or-memory-change-in-xcode)

# unix - 在 Mac OSX 上创建目录的 Unix 脚本 - 不断收到此错误“没有这样的文件或目录”

> ID：12042733
> 
> 赞同：0
> 
> 时间：2012-08-20T18:05:30.617
> 
> 标签：unix, loops, executable, file-permissions

我试图运行一个 UNIX 脚本，它将自动创建目录的过程。我在我的机器上运行 bash shell

这些是我遵循的步骤

1）在我的mac上创建了一个目录：~/unix_scripts

2）创建一个文件：~/unix_scripts/create_dirs.sh

```
 #! /usr/bin/env bash
 for ((i = 9; i<= 13; i++ ))
 do
mkdir ./courses/CPSC340/Notes/$i
echo created directory with name $i
 done 
```

3) 使用此命令更改此文件的文件权限：chmod +x create_dirs.sh

4) 尝试使用以下命令运行此文件：~/unix_scripts >create_dirs.sh

我收到此错误：-bash: ./unix_scripts/create_dirs: No such file or directory

我对此有以下疑问：

1）我做错了什么？我怎样才能让这个东西工作？

2）一旦它工作，我该如何修改脚本，这样

```
- I can pass the beginning index and end index as arguments to the script

- I would like to also pass a prefix as a command line argument so that the directories are named ""prefix_ + (value of i)" 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:13:51.553

change your script:

```
#!/usr/bin/env bash
PREFIX=$1
BEGIN=$2
END=$3
for ((i=BEGIN; i<=END; i++))
do
   DIRNAME=${PREFIX}${i}
   mkdir -p $DIRNAME
   echo created directory with name $DIRNAME
done 
```

and call it correctly:

```
~/unix_scripts/create_dirs.sh "./courses/CPSC340/Notes/" 9 13 
```

please take care to not overwrite it again as commented below and take time to read: [http://tldp.org/LDP/Bash-Beginners-Guide/html/](http://tldp.org/LDP/Bash-Beginners-Guide/html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:09:53.160

您使用重定向，它会覆盖您的脚本。相反，要运行您的脚本，请执行以下操作：

```
~/unix_scripts/create_dirs.sh 
```

`-p`并且，在脚本中，使用 mkdir 的标志创建整个路径：

```
mkdir -p ./courses/CPSC340/Notes/$i 
```

# c# - 带有 winforms 部署的 sqlite 数据库

> ID：12042735
> 
> 赞同：3
> 
> 时间：2012-08-20T18:05:37.097
> 
> 标签：c#, winforms, sqlite, deployment, setup-project

我对使用 C# winforms 应用程序部署 sqlite 数据库相当陌生。我使用以下应用程序文件夹创建了一个安装项目，其中包含主输出（.exe 文件）该程序将 System.Data.sqlite 作为其依赖项。

在常规项目中（未设置），数据库包含在 bin->Debug->Appdata->Test.DB

```
 <connectionStrings>
    <clear />
  <add name="RConnString" connectionString="Data Source=App_Data\Test.db;Compress=True;Version=3"
      providerName="System.Data.Sqlite" />

  </connectionStrings> 
```

安装：数据库及其相关依赖项将在哪里（system.data.sqlite） 目前，该程序安装在 C:\Programfiles... 尚未包含数据库。

什么是运送这个 sqlite Db 的好地方。还有，我该怎么做。我将它放置在安装项目的哪个位置。我需要自定义安装吗？
我们有 Windows XP、Win 7 用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:11:40.183

如果是每个用户的数据，理想的放置位置通常是在漫游配置文件位置下的目录中`C:\Users\john\AppData\MyApplication`。如果它是机器范围的数据（不是特定于用户的），那么它应该放在`C:\ProgramData\MyApplication`.

我不确定您使用的是什么类型的安装程序，但它应该有一种方法可以通用地指定这些位置（即“用户数据目录”或类似的东西）。

您*不想*放置数据库文件的位置与应用程序可执行文件位于相同的安装位置，除非您只是要从中读取。任何要写入的东西都需要放在上述两个位置之一。

# java - 关于优先于接口的枚举

> ID：12042738
> 
> 赞同：2
> 
> 时间：2012-08-20T18:05:51.833
> 
> 标签：java

我仍然不清楚一件事，为什么人们只使用接口来存储常量......当 java 5 提出了它的 Enums 的新功能时......

```
 interface OlympicMedal {
  static final String GOLD = "Gold";
  static final String SILVER = "Silver";
  static final String BRONZE = "Bronze";
} 
```

另一个班级现在正在实施它..

```
public class OlympicAthlete implements OlympicMedal {

  public OlympicAthlete( int aId ){
    //..elided
  }

  //..elided

  public void winEvent( ){
    //the athlete gets a gold medal
    //note the reference is not qualified, as
    //in OlympicMedal.GOLD
    fMedal = GOLD;
  }

  // PRIVATE //
  private String fMedal; //possibly null
} 
```

如上所示，同样的事情也可以通过枚举轻松建立，如果我可以选择存储上面的常量，我应该选择枚举还是接口..！

枚举就像...

```
public enum OlympicMedal {  

   GOLD, SILVER, BRONZ  

} 
```

但是请告知该类现在将如何访问此常量..!!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:09:28.683

只需使用`enum`s。它们使您的代码更加类型安全（而不是像您的示例中那样[“字符串类型化”](https://stackoverflow.com/questions/2349378/new-programming-jargon-you-coined/2444303#2444303)），并且习惯于常见 Java 习惯用法的开发人员更容易阅读和维护。

# 方便的名字

如果您需要更短的名称，静态导入会有所帮助。

```
import static mypackage.MyEnum.*; 
```

在您的示例中，`interface`使用代码

```
package mypackage;

public class OlympicAthlete implements OlympicMedal { ... } 
```

改为使用 an`enum OlympicMedal`将是

```
package mypackage;
import static mypackage.OlympicMedal.*;

public class OlympicAthlete { ... } 
```

# 向后兼容性

如果您需要使用`enum`s 处理旧类文件的 Java 代码，只需传递[`-source 1.5`和`-target 1.4`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javac.html#crosscomp-options)to将s`javac`编译成兼容的东西。`enum`这是有效的，因为`enum`s 只是常规 JS 类的[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)。一个警告：一些支持类 ( `EnumMap`, `EnumSet`) 在 Java <= 1.4 下不可用，因此`-target`不会帮助您很好地集成该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:07:54.517

[枚举](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)仅在 java 1.5 中引入。我猜您发布的代码可能来自 1.5 以上

由于类型安全，枚举是最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:10:28.323

> 为什么人们只使用接口来存储常量

可能是早期 Java 版本的坏习惯？改为
使用`enums`

```
public enum OlympicMedal {  

   GOLD, SILVER, BRONZ  

} 
```

由另一个类访问：

`OlympicMedal medal = OlympicMedal.GOLD;`

或者如果您静态导入`OlympicMedal`

`OlympicMedal medal = GOLD;`

# asp.net - ASP.NET MVC - 多服务器

> ID：12042741
> 
> 赞同：1
> 
> 时间：2012-08-20T18:06:05.660
> 
> 标签：asp.net, asp.net-mvc

我正在使用 ASP.NET MVC 3 和 Fluent NHibernate 开发一个 Web 应用程序，将来我将需要使用多个服务器，因为用户的数量会增加一倍。我该如何使用这种方法，可能吗？如何控制它们之间的会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:30:34.947

当然，这是可能的。为了能够使用会话，您需要从 InProc 模式转移到 SqlServer 或 StateServer。

以下是有关您拥有的所有 SessionState 选项的更多详细信息：http: [//msdn.microsoft.com/en-us/library/ms178586.aspx](http://msdn.microsoft.com/en-us/library/ms178586.aspx)

要使用 SqlServer，请按照本指南中的步骤操作：http: [//support.microsoft.com/kb/317604](http://support.microsoft.com/kb/317604)

另外，请记住，您放入会话中的对象必须标记为`Serializable`，否则它们将无法存储在数据库或状态服务器中。

# javascript - jquery中的清除队列不适用于悬停时延迟显示隐藏

> ID：12042742
> 
> 赞同：2
> 
> 时间：2012-08-20T18:06:09.633
> 
> 标签：javascript, jquery, jquery-ui

最好的方法是查看[http://jsfiddle.net/jDn7X/中的示例](http://jsfiddle.net/jDn7X/)

```
$(".container.a1 div").hover(function(e){
    $(".popup").show(300).css({top: (e.pageY + 15) + "px",left: (e.pageX + 10) +"px"});
},function(){
    $(".popup").hide(300);    
}); 
```

当我移过 div 数组时，弹出窗口不断出现。

```
<div class="container a1">
   <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
</div> 
```

使用**clearQueue**时，行为是随机的。

清除以前的 jquery 计时器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:09:44.207

尝试使用[stop()](http://api.jquery.com/stop/)：

```
$(".container.a1 div, .container.a2 div").hover(
    function(e){
        $(".popup").stop(true,true)
                   .show(300)
                   .css({top: (e.pageY + 15) + "px",left: (e.pageX + 10) +"px"});
    },function(){
        $(".popup").stop(true,true)
                   .hide(300);    
    }
); 
```

[**小提琴**](http://jsfiddle.net/jDn7X/2/)

我可能会做更多这样的事情（见评论）：

```
$(".container.a1, .container.a2").on({
    mouseenter: function(){
        $(".popup").show(300);
    },
    mouseleave: function() {
        $(".popup").hide(300);    
    },
    mousemove: function(e) {
        $(".popup").css({top: (e.pageY + 15) + "px",left: (e.pageX + 10) +"px"})
                   .text('hovering : '+$(e.target).index());
    }
});
​ 
```

[**小提琴**](http://jsfiddle.net/jDn7X/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:18:38.670

我个人认为这是在许多靠近的小元素上使用工具提示的错误方法。

我认为更好的方法是 .hover 整个 .container 然后更改每个元素的内容 onmouseenter 。

[http://jsfiddle.net/lathan/jDn7X/1/](http://jsfiddle.net/lathan/jDn7X/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:11:10.580

做一个快速`.stop()`（[更多信息在这里找到](http://api.jquery.com/stop/)）

`$(".popup").stop().hide(300);`

这会阻止所有先前的动画在相关对象上发生。

[http://jsfiddle.net/jDn7X/4/](http://jsfiddle.net/jDn7X/4/)

# node.js - Express、node.js 和 redis：访问数据的分离函数

> ID：12042744
> 
> 赞同：1
> 
> 时间：2012-08-20T18:06:16.657
> 
> 标签：node.js, express, redis

我试图创建一个文件“users.js”，其中 id 喜欢管理对用户数据的所有 redis 访问。在这个文件中，我有下一个功能，我将用户保存在列表中，然后从他们的键中加载所有用户：

```
exports.getUsers = function(){
    var usrs;
    client.lrange('users', 0, -1, function(err, rep){
        client.mget(rep, function(e,r){
            usrs = r;
        });
    });
    return usrs;
}; 
```

我有另一个文件“admin.js”，我尝试在其中管理管理面板的路由。在这个文件中，我需要 users.js 文件，并调用 users.getUsers() 函数。我希望得到一个包含用户对象的数组，或者至少是包含所有这些对象的字符串。问题是它总是返回“未定义”。

据我了解，正在发生的事情是我尝试在 mget 完成回调之前返回 usrs 变量。但我不知道如何解决。

问题是......我怎样才能让return语句等待mget？有没有其他方法来组织代码并保持数据库访问由字段分隔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:20:17.167

您不能`getUsers`在返回之前等待响应，因此您需要让您的函数支持一个回调参数，当数据准备好时您的函数调用该回调参数：

```
exports.getUsers = function(callback){
    client.lrange('users', 0, -1, function(err, rep){
        client.mget(rep, function(e,usrs){
            callback(e,usrs);
        });
    });
}; 
```

# python - 如何在 Python __doc__ 中使用 windows 文件路径

> ID：12042748
> 
> 赞同：2
> 
> 时间：2012-08-20T18:06:26.560
> 
> 标签：python, windows, filepath, docstring

`__doc__`我喜欢在我的使用字符串中给我的用户一个例子。以下是与我的问题相关的代码的重要部分。

```
# jmetadata.py
'''
usage:     jmetadata.py inDirPath outFilePath
example:   jmetadata.py "\\\\Hal\\hal free agent 1\\backups\\videos\\" out.txt
'''

<...deleted code...>

def forPyWinTests():
    jmetadata("\\\\Hal\\hal free agent 1\\backups\\videos\\", "out.txt")

NUM_ARGS = 2
def main():
    args = sys.argv[1:]
    print args
    if len(args) != NUM_ARGS or "-h" in args or "--help" in args:
        print __doc__
        sys.exit(2)
    jmetadata(args[0], args[1])

if __name__ == '__main__':
    main()
    # print()
    # forPyWinTests() 
```

我期望这种行为：

```
>jmetadata.py
[]

usage:     jmetadata.py inDirPath outFilePath
example:   jmetadata.py "\\Hal\hal free agent 1\backups\videos\" out.txt

> 
```

但是，当我将示例复制到命令行时，我希望程序能够运行。相反，我得到：

```
>jmetadata.py "\\Hal\hal free agent 1\backups\videos\" out.txt
['\\\\Hal\\hal free agent 1\\backups\\videos" out.txt']

usage:     jmetadata.py inDirPath outFilePath
example:   jmetadata.py "\\Hal\hal free agent 1\backups\videos\" out.txt 
```

注意上面的第二行。这是由`print args`里面的命令产生的`main()`。它是说 args 列表只有 1 个元素，`['\\\\Hal\\hal free agent 1\\backups\\videos" out.txt']`而不是 2。这对我来说没有意义。

我通过编写一个 Windows .cmd 文件进行了更多调查。这是 show_args.cmd：

```
rem show_args.cmd
echo %1 
echo %2 
```

这是运行的结果：

```
>show_args.cmd "\\Hal\hal free agent 1\backups\videos\" out.txt

>rem show_args.cmd

>echo "\\Hal\hal free agent 1\backups\videos\"
"\\Hal\hal free agent 1\backups\videos\"

>echo out.txt
out.txt 
```

Windows 似乎将这些项目分开。我难住了。有谁知道这里发生了什么？

我希望有人有一些见解可以分享。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:22:16.230

尝试删除尾部反斜杠。改变这个：

```
jmetadata.py "\\Hal\hal free agent 1\backups\videos\" out.txt 
```

对此：

```
jmetadata.py "\\Hal\hal free agent 1\backups\videos" out.txt 
```

在上面的测试运行中，Python 看到的参数是：

```
['\\\\Hal\\hal free agent 1\\backups\\videos" out.txt'] 
```

尾随退格被解释为转义字符，因为它紧接在 a 之前`"`，这会将您的参数转换为单个字符串（或直到`"`遇到未转义的字符串）。

# jquery - Jquery 方法的 IE 问题

> ID：12042752
> 
> 赞同：3
> 
> 时间：2012-08-20T18:06:44.613
> 
> 标签：jquery

我无法获取元素的 ID。这些代码适用于 FF 和 chrome，但不适用于 IE。任何人都可以帮助我吗？非常感谢

```
<td id='tdID'>
    <img id='test' src='a.jpg' class='imgClass' />
</td> 
```

jQuery

```
$('.imgClass').click(function(){
   ip=$(this).parent().attr('id');          

   //undefined in IE
   console.log(ip);
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:12:05.013

`<td>`s*必须*在 a 内`<table>`。如果不是，大多数浏览器会将它们从 DOM 中删除。因此，这`$(this).parent()`可能不是您认为的元素。

这是一个快速演示：http: [//jsfiddle.net/NTICompass/cyK3h/](http://jsfiddle.net/NTICompass/cyK3h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:32:18.983

使用[prop](http://api.jquery.com/prop/)，而不是[attr](http://api.jquery.com/attr/)

```
$('.imgClass').on("click", function(){
   var id = $(this).parent().prop("id");          
   console.log(id);
}); 
```

另外，如果您更改标记，使用最接近的标记可能更安全

```
$('.imgClass').on("click", function(){
   var id = $(this).closest("td").prop("id");          
   console.log(id);
}); 
```

[jsFiddle](http://jsfiddle.net/YQgAP/)

# javascript - 我可以使用 Flash 验证文件的大小并仍然正常上传吗？

> ID：12042760
> 
> 赞同：0
> 
> 时间：2012-08-20T18:07:43.070
> 
> 标签：javascript, flash, file-upload

想象一下，您有一个允许文件上传的表单。该文件的大小限制为 X MB。当我们想要验证文件的大小时，我们会遇到 Internet Explorer 及其安全功能的问题。

我们认为 Flash 可能是一种解决方案，我们想使用它来检查文件的大小，如果它通过了我们的验证，则允许它与表单的其余部分一起提交。问题是，所有使用 Flash 执行文件验证的代码片段都使用 Flash 发布文件上传。我希望能够一次发布整个表单，因为我的对象取决于一次收到的所有参数。

我的一位同事说上述情况应该是可能的，但我认为不是。是否有其他替代方案，或者是否仅使用 Flash 创建/处理帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:38:31.940

有可能的。我最近制作了一个类似的 Flash 文件。基本上，它检查加载的 swf 的帧速率、文件大小、actionscript 版本和一堆其他东西，然后通过外部接口将其输出到 javascript。

然而，它确实感觉有点笨拙，有很多步骤和异步调用。

当然，首先您必须创建将检查该文件的闪存文件。我没有我做的那个，因为我在家，真的应该在床上 :) 你的解决方案也会有很大不同，但如果你愿意，我可以明天发布。（或者今天晚些时候）

要创建闪存，您将需要 ExternalInterface。可以添加回调，以便您可以通过 javascript 在 Flash 中调用函数。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

然后将 Flash 文件嵌入页面的某个位置。如果我没记错的话，它不能在隐藏的 div 中。

在 swf 具有文件大小后可以调用的页面上创建一个 javascript 函数。

当您想检查文件大小时，调用 swf 中的相关函数（带有文件 url）。

swf 中的函数应该加载文件，然后能够将文件大小输出到 javascript 函数。

# javascript - 显示隐藏内容（维基百科风格）

> ID：12042763
> 
> 赞同：1
> 
> 时间：2012-08-20T18:07:55.550
> 
> 标签：javascript, jquery

我的页面上有很多标题（h1），我想在每个标题之后添加一个“显示/隐藏”功能，以显示后面的特定内容，而不必为每个内容手动添加一个 id 和标题。

我对 jquery 很陌生，这就是我到目前为止所做的。您会注意到，问题在于每个 div 都被显示/隐藏。

jQuery代码：

```
$(document).ready(function(){
  $(&quot;h1&quot;).append(' [&lt;a class=&quot;show-hide&quot;&gt;Show/Hide&lt;/a&gt;]');
  $(&quot;.show-hide&quot;).click(function(){
    $(&quot;div&quot;).slideToggle(&quot;normal&quot;);
  })
}); 
```

和 HTML 代码：

```
<h1>Title 1</h1>
<div>Content 1</div>
<h1>Title 2</h1>
<div>Content 2</div>
<h1>Title 3</h1>
<div>Content 3</div> 
```

它看起来像这样：

```
Title 1 [Show/Hide]
Content 1
Title 2 [Show/Hide]
Content 2
Title 3 [Show/Hide]
Content 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:09:23.010

尝试这个：

```
$('h1').click(function (e) {
    $(this).next().toggle();
}); 
```

这是[小提琴](http://jsfiddle.net/zxExj/)。

单击任何 h1 标签以查看它的实际效果；）

# jquery - 在 ASP .Net MVC 4 页面上使用 jQuery 更改背景图像

> ID：12042768
> 
> 赞同：1
> 
> 时间：2012-08-20T18:08:04.930
> 
> 标签：jquery, asp.net-mvc, css

我正在尝试做一些非常简单的事情，每五秒钟使用 jQuery 更改页面的背景图像。

由于该项目是一个 ASP .Net MVC 4 项目，因此它具有相应的 _Layout 页面、@RenderSection、@RenderBody 以及框架提供的所有这些好东西。所以我的问题是我无法弄清楚我应该定位哪个元素以及如何更改图像。

拼图的部分如下：

在 _Layout.cshtml 文件上：

```
<body>
   <!-- some code that displays the navigation menu links -->

   <div id="body>
      @RenderSection("featured", required: false)
      <section class="content-wrapper main-content clear-fix">
         @RenderBody()
      </section>
   </div>
   <!-- some more code for the footer and some other irrelevant things -->
</body> 
```

我有一个样式表文件，其中包含以下内容：

```
.main-content
{
   background-image: url("../Images/slide-1-728.jpg");
   opacity: 0.3;
} 
```

最后jQuery脚本如下：

```
var backgroundHandler = {
    fileIndex: 1,
    backgroundImageFileName: "slide-1-728.jpg",

    updateBackgroundImage: function () {
        return backgroundHandler.backgroundImageFileName.replace(/-[0-9]+-/, "-" + ++backgroundHandler.fileIndex + "-");
    },

    setBackgroundImage: function () {
        document.body.background = $("#url").val() + backgroundHandler.updateBackgroundImage();
    }
};

$(document).ready(function () {
    setInterval(backgroundHandler.setBackgroundImage, 5000);
}); 
```

背景实际上确实每五秒更新一次，但是在导航菜单所在的部分和最初使用样式表设置的背景图像保持不变。

我尝试执行以下操作，而不是脚本上的 document.body.background 语句：

```
setBackgroundImage: function () {
    var imageUrl = $("#url").val() + backgroundHandler.updateBackgroundImage();
    $(".main-content").css("background-image", imageUrl);
} 
```

但是当我这样做时，似乎什么也没发生，图像没有更新，页面上也没有出现可见的变化。

拼图中缺少的部分是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:15:51.680

分两步解决这个问题。

首先 - 取出背景图像的动态部分......将您的 setBackgroundImage 函数更改为类似

```
$("body").css("background-image", "url(some absolute url to an image);"); 
```

其次 - 重新添加动态片段，确保 imageUrl 变量具有指向其中有效图像的路径。

# ios - 是否可以使用 sqlcipher 在 iOS 上使用全文搜索？

> ID：12042769
> 
> 赞同：3
> 
> 时间：2012-08-20T18:08:06.193
> 
> 标签：ios, sqlite, ios5, sqlcipher

我在谷歌上搜索了很多，我找不到是否可以使用 sqlcipher 在 iOS 上使用全文搜索。

但我找不到任何关于它的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T20:24:39.900

是的，FTS 支持已预先内置在 SQLCipher 商业版二进制文件中，此处提供：

[http://sqlcipher.net/downloads/](http://sqlcipher.net/downloads/)

如果您使用的是社区版，您可以通过对构建逻辑进行一些更改来添加 FTS 支持，如本文所述：

[https://groups.google.com/d/msg/sqlcipher/yIJTYf8RE24/-IC37NU8L4QJ](https://groups.google.com/d/msg/sqlcipher/yIJTYf8RE24/-IC37NU8L4QJ)

# ios - iOS 5，故事板：为每个 UIView 自定义以编程方式创建的 UITableView

> ID：12042770
> 
> 赞同：0
> 
> 时间：2012-08-20T18:08:10.437
> 
> 标签：ios, cocoa-touch, storyboard, uisegmentedcontrol

在情节提要中，我创建了一个 UIViewController 并将两个 UIView 添加到同一个情节提要中。然后添加 UISegmentedControl 以启用这些 UIView 之间的切换。

![在此处输入图像描述](../Images/ce3466d7767951cb24c66f1b725958cd.png)

我用来切换 UIView 的方法：

```
-(IBAction)segmentValueChaged:(id)sender
{
if(self.segment.selectedSegmentIndex==0)
{
    [self.coinageView removeFromSuperview];
    [self.view addSubview:nominalsView];
    [self populateNominals:self.subCountryID];
}
else 
{
    [self.nominalsView removeFromSuperview];
    [self.view addSubview:coinageView];
}
} 
```

以及在 UIView 上添加 UITableView 的方法：

```
-(void)populateNominals:(int)subCountryID
{
UITableView *nominalsTableView=[[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 372) style:UITableViewStylePlain];
//nominalsTableView.dataSource = self;
//nominalsTableView.delegate = self;
[self.nominalsView addSubview:nominalsTableView];
} 
```

这种方法效果很好，我在切换段时弹出了一个表格。

我的问题是，我在哪里可以为每个段（UIView）自定义每个 tableView？问题是我需要两个外观完全不同的表（不同的设计、cellForRowAtIndexPath 和不同的导航，而 didSelectRowAtIndexPath）。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:57:07.930

如果您有“两个外观完全不同的表”，则将每个表视图的数据源和委托设置为不同的对象。意思是为每个表创建一个类/对象，作为表的数据源和委托。通常这些设置为“自我”，但没有什么可以说它们必须是那样。

如果您懒惰并且不关心漂亮的可重用代码，您可以将 if/else 语句放在所有 tableView 委托和 dataSource 调用中，并比较传入的 tableView 变量以查看它是什么表。但这有点难看，很容易搞砸。特别是如果它增长到超过 2 种不同类型的表。

# javascript - 将 Canvas 划分为独立的空间

> ID：12042775
> 
> 赞同：3
> 
> 时间：2012-08-20T18:08:30.573
> 
> 标签：javascript, html, canvas

有没有办法将 Canvas 标签分成几个独立的空间，这样你就可以获得独立的 2d 上下文和每个独立的坐标。例如，如果我想要两次绘制相同的绘图，我可以将画布分成相等的部分，并在每个部分中使用相同的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:49:05.780

我使用了 peachykeen 的建议，创建了两个屏幕外画布，然后将它们作为图像放置在原始画布中，代码如下所示：

```
canvas1 = document.createElement("canvas");
canvas2 = document.createElement("canvas");

//Draw on the canvases

Drawing code

//Add them to the original canvas

if (OriginalCanvas && OriginalCanvas.getContext) {
    var context = OriginalCanvas.getContext('2d');
    if (context) {
        context.drawImage(canvas1, 0, 0, OriginalCanvas.width / 2, OriginalCanvas.height);
        context.drawImage(canvas2, OriginalCanvas.width / 2, 0, OriginalCanvas.width / 2, OriginalCanvas.height);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:16:02.297

我认为在单个画布中以数学方式创建独立的上下文并不难。例如，假设您有一个 1000 x 500 的画布，您想将其分成两个并排的 500 x 500 区域。让您的所有函数调用都采用“区域”参数，然后根据您正在使用的区域使用简单的计算来调整 x 坐标。像这样的东西：

```
function drawLine(fromX, fromY, toX, toY, area) {
    var startX = fromX + (area * 500);
    var startY = fromY;
    var endX = fromX + (area * 500);
    var endY = fromY;
    // draw your line here
} 
```

在这种情况下，当使用左侧区域时，您将使用`area = 0`和`area = 1`作为右侧框。

# ajax - Richfaces 弹出窗口中的“清理”按钮不起作用

> ID：12042777
> 
> 赞同：1
> 
> 时间：2012-08-20T18:08:34.650
> 
> 标签：ajax, jsf, input, popup, richfaces

我的按钮代码是：

```
<h:commandButton value="Clean" action="#{facesBean.cleanFilter()}" >
    <f:ajax execute="@form" render="result id name"/>
</h:commandButton> 
```

我可以看到它调用了我的操作并且我的属性在后台是空的，但是我的表单输入没有被清理。它应该清理两个输入和一个表。桌子被清理了，但我的输入没有。

我已经搜索了一些没有运气的解决方案。

有什么不对？

我的弹出窗口有它自己的文件 popup.xhtml，我通过 ui:include 使用它。这是我的弹出代码：

```
<h:form id="userForm">
    <rich:popupPanel id="popup-user" modal="true" headerClass="popup-header" styleClass="popup" domElementAttachment="form" keepVisualState="true" width="620" autosized="true" top="50">
        <f:facet name="header" >
            <h:outputText value="Search User" />
        </f:facet>
        <f:facet name="controls">
            <h:commandLink>
                <h:graphicImage url="/images/icon-close.png" alt="Close" styleClass="icone-close"/>
                <rich:componentControl target="popup-user" operation="hide" />
            </h:commandLink>
        </f:facet>

        <fieldset>
            <legend class="section">Search User Filter</legend>
            <h:panelGrid styleClass="form" columns="1" cellspacing="0" columnClasses="item">
                <h:panelGroup>
                    <h:outputLabel styleClass="label-form" value="ID" for="id" />
                    <br />
                    <h:inputText id="id" value="#{facesBean.filter.id}" styleClass="textfield" maxlength="8"/>
                </h:panelGroup>
                <h:panelGroup>
                    <h:outputLabel styleClass="label-form" value="Name" for="name" />
                    <br />
                    <h:inputText id="name" value="#{facesBean.filter.name}" styleClass="textfield" />
                </h:panelGroup>
            </h:panelGrid>
        </fieldset>

        <div id="buttons">
            <h:commandButton value="Search" action="#{facesBean.search()}">
                <f:ajax execute="@form" render="result-users" />
            </h:commandButton>
            <h:commandButton value="Clean" action="#{facesBean.clean()}" >
                <f:ajax execute="@form" render="id name result-user"/>
            </h:commandButton> 
        </div>      

        <h:panelGroup id="result-user">
                <rich:dataScroller for="userTable" styleClass="pagination" maxPages="5" boundaryControls="hide" renderIfSinglePage="false" fastControls="hide" stepControls="auto" execute="@form" render="userTable" />
                <rich:dataTable id="userTable" value="#{facesBean.list}" var="user" style="width:600px;" rows="10">
                    <f:facet name="header">
                        <rich:columnGroup>
                            <rich:column styleClass="left" style="width: 5%">
                                <h:outputText value="Action" />
                            </rich:column>
                            <rich:column styleClass="left" style="width: 10%">
                                <h:outputText value="ID" />
                            </rich:column>
                            <rich:column styleClass="left" style="width: 25%">
                                <h:outputText value="Name" />
                            </rich:column>
                            <rich:column styleClass="left" style="width: 25%">
                                <h:outputText value="E-mail" />
                            </rich:column>
                        </rich:columnGroup>
                    </f:facet>

                    <rich:columnGroup>
                        <rich:column>
                            <h:commandButton image="/images/icon-select.png" alt="Select" actionListener="#{mainBean.selectUser(user)}" styleClass="icon-select">
                                <f:ajax execute="@form" render=":form:#{field}" />
                                <rich:componentControl target="popup-user" operation="hide" />
                            </h:commandButton>
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{user.id}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{user.name}" />
                        </rich:column>
                        <rich:column>
                            <h:outputText value="#{user.email}" />
                        </rich:column>
                    </rich:columnGroup>
                </rich:dataTable>
            </h:panelGroup>
        </h:panelGroup>
    </rich:popupPanel>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:49:26.610

在尝试了这么多事情之后，我尝试将我的输入放在 a 之间并更改了我的按钮，并且它起作用了。

它看起来像这样：

```
 <a4j:outputPanel id="search-filter">
     <fieldset>
        <legend class="section">Search User Filter</legend>
        <h:panelGrid styleClass="form" columns="1" cellspacing="0" columnClasses="item">
            <h:panelGroup>
                <h:outputLabel styleClass="label-form" value="ID" for="id" />
                <br />
                <h:inputText id="id" value="#{facesBean.filter.id}" styleClass="textfield" maxlength="8"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:outputLabel styleClass="label-form" value="Name" for="name" />
                <br />
                <h:inputText id="name" value="#{facesBean.filter.name}" styleClass="textfield" />
            </h:panelGroup>
        </h:panelGrid>
    </fieldset>
    </a4j:outputPanel>
    <div id="buttons">
        <h:commandButton value="Search" action="#{facesBean.search()}">
            <f:ajax execute="@form" render="result-users" />
        </h:commandButton>
        <a4j:commandButton value="Clean" action="#{facesBean.clean()}" >
            <f:ajax execute="@form" render="search-filter result-user"/>
        </a4j:commandButton> 
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:49:20.847

感谢您更新您的帖子。我认为你有两个选择：

*   在 popupPanel 内移动表单，或

*   使用丰富：popupPanel domElementAttachment="form" ...

为什么是这样？非常令人困惑的是，popupPanel 在 dom 中被移动为 h:body 标记的子项。所以你写这个结构：

```
<h:body>
  <h:form id="userForm">
    <rich:popupPanel id="popup-user" ...> 
```

它变成了这样：

```
<body>
  <div id="popup-user"> ...
  <form id="userForm"> ... </form> 
```

问题是 popup-user 的内容不再是表单。发生这种情况的原因是需要相对于视口定位对话框以及使用 css 的复杂性。以下是我在调查为什么会这样工作时为自己写的一些笔记：

对话框使用绝对定位将对话框置于视口的中心。它只是一个使用 position: absolute, top: xxpx, left: xxpx 和 display: none 或 block 的 div。对话框占位符内的任何内容都是位置：相对，这意味着“我内部的所有定位元素都应该相对于我的位置定位”。

仅当 div 具有绝对位置并且不嵌套在具有绝对、相对或固定位置的任何标签内时，它才会相对于浏览器窗口定位。否则，它将相对于包含标签定位。

因此，为了实现相对于视口的定位，无论您将对话框（即 div）放在哪里，它都会被重新定位为主体的子项。因此，即使您的对话框在表单内，它也会被移到表单外。这就是为什么如果您想在其中包含按钮和链接，对话框必须具有自己的形式。

# sql - data.table 连接时间

> ID：12042779
> 
> 赞同：3
> 
> 时间：2012-08-20T18:08:45.160
> 
> 标签：sql, r, join, data.table

我`data.table`在 R 中有两个 s：

```
> tables()
     NAME          NROW   MB COLS                                 KEY       
[1,] dtb      2,536,206   68 dte,permno,capm_beta,mkt_beta_bucket permno,dte
[2,] idx_dtb        573    1 dte                                  dte       
[3,] ssd_dtb 58,808,208 1571 dte,permno,xs_ret,mkt_cap            permno,dte
Total: 1,640MB 
```

我想做一个右外连接：`select * from dtb right join ssd_dtb using (permno, dte)`

中的等效命令`data.table`是：

```
mdtb <- dtb[ssd_dtb] 
```

到目前为止，这已经运行了大约 20 分钟。这似乎有点长，因为在 SQL 服务器上运行它通常需要更少的时间。我滥用了包裹吗？

问题回答后编辑：我认为理解为什么我必须做`dtb[ssd_dtb]`而不是做可能会有所帮助`ssd_dtb[dtb]`。我设计了一个简单的例子：

```
> x <- data.table(id=1:5, t=1:15, v=1:15)
> x
    id  t  v
 1:  1  1  1
 2:  2  2  2
 3:  3  3  3
 4:  4  4  4
 5:  5  5  5
 6:  1  6  6
 7:  2  7  7
 8:  3  8  8
 9:  4  9  9
10:  5 10 10
11:  1 11 11
12:  2 12 12
13:  3 13 13
14:  4 14 14
15:  5 15 15
> y <- data.table(id=c(1,1,2,3), t=c(1,2,6,13), v2=41:44)
> y
   id  t v2
1:  1  1 41
2:  1  2 42
3:  2  6 43
4:  3 13 44

> x[y]
   id  t  v v2
1:  1  1  1 41
2:  1  2 NA 42
3:  2  6 NA 43
4:  3 13 13 44
> x[y, nomatch=0]
   id  t  v v2
1:  1  1  1 41
2:  3 13 13 44
> y[x]
    id  t v2  v
 1:  1  1 41  1
 2:  1  6 NA  6
 3:  1 11 NA 11
 4:  2  2 NA  2
 5:  2  7 NA  7
 6:  2 12 NA 12
 7:  3  3 NA  3
 8:  3  8 NA  8
 9:  3 13 44 13
10:  4  4 NA  4
11:  4  9 NA  9
12:  4 14 NA 14
13:  5  5 NA  5
14:  5 10 NA 10
15:  5 15 NA 15
> y[x, nomatch=0]
   id  t v2  v
1:  1  1 41  1
2:  3 13 44 13 
```

编辑 2：上述解决方案 1 请求的输出如下：

```
> Rprof()
> mdtb Rprof(NULL)
> 摘要Rprof()
$by.self
               self.time self.pct total.time total.pct
“[.data.table” 15.36 62.39 24.62 100.00
“.Call” 7.96 32.33 7.96 32.33
“pmin” 0.92 3.74 1.16 4.71
“列表” 0.24 0.97 0.24 0.97
“矢量” 0.14 0.57 0.14 0.57

$by.total
               total.time total.pct self.time self.pct
“[.data.table” 24.62 100.00 15.36 62.39
“[” 24.62 100.00 0.00 0.00
“.Call” 7.96 32.33 7.96 32.33
“pmin” 1.16 4.71 0.92 3.74
“列表” 0.24 0.97 0.24 0.97
“矢量” 0.14 0.57 0.14 0.57
“整数” 0.14 0.57 0.00 0.00

$sample.interval
[1] 0.02

$采样时间
[1] 24.62

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T22:32:29.377

如果我可以在没有可重复示例的情况下猜测，我会尝试。在这种情况下，一些事情确实浮现在脑海中。好问题。

1.  在这种情况下，源中有一个 TODO 可能会导致大幅减速。不过，我不知道它有那么糟糕。如果您知道`dtb`' 的键是唯一的（即`dte`每个中没有重复`permno`），很可能在这里，然后设置`mult="first"`解决它。或者`mult="last"`会是一样的。它所做的是找到组的起点和终点，但是当一个键是唯一的时，所有这些组都只有 1 行。

2.  与您的情况`i`相比，较小的影响可能是该表较大。`x`如果可能，请尝试将查询安排为`i`小于`x`; 即`ssd_dtb[dtb]`而不是`dtb[ssd_dtb]`。时它们将是相同的`nomatch=0`。

如果 1 中的解决方法有帮助，那么如果您可以运行以下命令并将结果发送给我，那就太好了。另外，请提出一个`bug.report(package="data.table")`链接回这个问题。这样，您将在状态更改时获得自动更新。

```
Rprof()
dtb[ssd_dtb]  # reduce size so that this takes 30 seconds or something manageable
Rprof(NULL)
summaryRprof()

Rprof()
dtb[ssd_dtb,mult="first"]  # should be faster than above if my guess is right
Rprof(NULL)
summaryRprof() 
```

# db4o - db4o 的存储和提交使用场景

> ID：12042780
> 
> 赞同：0
> 
> 时间：2012-08-20T18:08:57.533
> 
> 标签：db4o

我发现没有提交的调用存储或没有存储的调用提交都可以将数据写入磁盘。在我看来，store 用于更新容器中的对象或将新创建的 obj 放入容器中。commit 做磁盘写工作。

我没有使用 TP & TA，我设置了足够的 updateDepth & minimumActivationDepth 级别。我观察到，当我调用 store(obj) 时，会调用 java.io.RandomAccessFile 方法。数据应写入磁盘。

那么创建 2 个功能的目的是什么：存储和提交？为什么不只制作一个 api，比如： save() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:00:20.940

这些方法有两个不同的任务：

Store()：告诉 db4o 你想存储/更新这个对象。但是，这仅列出对事务的更改。

Commit()：使所有更改永久化并开始一个新事务。如果没有提交调用，Store 方法将不起作用。（注意 .commit 被 close/dispose 隐式调用）。如果您认为发生了错误或错误，您可以调用 .Rollback 来撤消所有更改。

你可以在网上阅读更多关于交易的信息，还有大量的例子。

这没什么特别的，许多数据库都使用这种语义。几乎所有的 SQL、Object 和其他数据库。

# mysql - 在 MYSQL 中保存 QUARTZ 触发器

> ID：12042782
> 
> 赞同：1
> 
> 时间：2012-08-20T18:09:03.350
> 
> 标签：mysql, quartz-scheduler

我在使用 QUARTZ (2.1.3) 在 Spring (3.1.1) 下将触发器保存到 MySQL 时遇到问题。经过一番调试，我想出了如下流程：

1.  ScheduleFactoryBean.afterPropertiesSet 在启动时调用 registerJobsAndTriggers
2.  this.transactionManager.getTransaction(new DefaultTransactionDefinition())
3.  DataSourceUtils.doGetConnection(dataSource); （在 LocalDataSourceJobStore 类中）
4.  使用步骤 3 中的连接插入触发器和作业详细信息
5.  DataSourceUtils.releaseConnection(con, this.dataSource); （在 LocalDataSourceJobStore 中）
6.  this.transactionManager.commit(transactionStatus) （从第 1 步开始）
7.  commit() 调用 triggerBeforeCompletion（在 AbstractPlatFormTransactionManager 中）
8.  triggerBeforeCompletion 最终调用 connection.close() 因为 referenceCount（在 ConnectionHolder 中）为零（由 releaseConnection 从 1 更改为 0）。
9.  connection.close 触发 ROLLBACK，如 MySQL 端的日志所示。

这是我的配置信息：

```
 <bean id="dataSource.dbcp" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">...</bean>
    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">...</bean>

<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="startupDelay" value="15" />
        <property name="applicationContextSchedulerContextKey" value="applicationContext" />
        <property name="schedulerName" value="mySched" />
        <property name="jobFactory" ref="springBeanJobFactory" />
        <property name="dataSource" ref="dataSource" />
        <property name="transactionManager" ref="transactionManager" />
        <property name="triggers">
            <list>
                    <ref bean="dummyTrigger" />
            </list>
        </property>
        <property name="quartzProperties">
            <props>
                <prop key="org.quartz.scheduler.instanceId">AUTO</prop>
                <prop key="org.quartz.threadPool.threadCount">5</prop>
                <prop key="org.quartz.jobStore.misfireThreshold">60000</prop>
                <prop key="org.quartz.jobStore.driverDelegateClass">org.quartz.impl.jdbcjobstore.StdJDBCDelegate</prop>
            </props>
        </property>
    </bean>
<bean id="dummyTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerFactoryBean">...</bean> 
```

我已经尝试了基于 QUARTZ/Spring/This site 研究的各种配置更改，但并未将触发器保存在 QRTZ 表中。

提前致谢。

# cordova - phonegap 错误：日志标签：dalvikvm，找不到类 'android.webkit.WebResourceResponse'

> ID：12042784
> 
> 赞同：0
> 
> 时间：2012-08-20T18:09:08.517
> 
> 标签：cordova, cordova-2.0.0

使用卡多瓦 2.0.0。编译后应用程序显示错误：

```
Could not find class 'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse. 
```

*   安卓：m​​inSdkVersion="8"
*   使用权限 - 全部

config.xml 是。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:34:58.220

没什么，忽略日志。我相信 2.1.0 Joe 正在防止该方法不存在，因此它应该消失。

# asp.net - web.config 和会员数据库 - 从开发到生产

> ID：12042785
> 
> 赞同：2
> 
> 时间：2012-08-20T18:09:10.040
> 
> 标签：asp.net, .net, web-config, windows-hosting

我正在尝试托管我的第一个 ASP.NET 项目，在通过 FTP 初始上传后，我得到了 SQL 连接错误，所以在进行了一些搜索后，我认为这是我的连接字符串，所以我通过正确放置我的主机信息来修复它：

```
 <add name="orangefreshConnectionString1" connectionString="Data Source=<server>;Initial Catalog=<catalog>;User Id=<user>;Password=<pwd>;" providerName="System.Data.SqlClient" /> 
```

所以这解决了我的问题，我的网站现在已经启动......除了我尝试登录时，我得到另一个 SQL 连接错误。

我在我的网站上使用了 2 个数据库：dbstart 和 ASPNETDB（最后一个用于会员资格）

ASPNETDB 在我的开发 web.config 上被处理为：providers>

```
 <clear />
      <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" applicationName="/" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression=""/>
  </providers> 
```

我知道这里有一些需要更改的地方，但是到目前为止，我的谷歌查询对找到答案没有帮助......

这是我的开发 web.config 内容：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <connectionStrings>
    <add name="orangefreshConnectionString1" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\orangefresh.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient" />
    <add name="orangefreshEntities" connectionString="metadata=res://*/App_Code.Orangefresh.csdl|res://*/App_Code.Orangefresh.ssdl|res://*/App_Code.Orangefresh.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\orangefresh.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <system.web>
    <customErrors mode="Off"/>
      <membership>
          <providers>
              <clear />
              <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" applicationName="/" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression=""/>
          </providers>
      </membership>
    <roleManager enabled="true" />
      <authentication mode="Forms">
          <forms loginUrl="default.aspx"></forms>
      </authentication>
    <pages theme="orangefresh" />
    <compilation debug="false" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
      <buildProviders>
        <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider" />
      </buildProviders>
    </compilation>
    <httpRuntime requestValidationMode="2.0" />
  </system.web>
  <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="João &lt;email@email.com&gt;">
        <network host="host" userName="user" password="pass" />
      </smtp>
    </mailSettings>
  </system.net>
    <location path="Management">
        <system.web>
            <authorization>
                <allow roles="Admin"/>
                <deny users="*"/>
            </authorization>
        </system.web>
    </location>
</configuration> 
```

如何在 web.config 上正确引用我的会员数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:56:15.233

在这里面改变：

```
<add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" applicationName="/" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression=""/> 
```

这

```
connectionStringName="LocalSqlServer" 
```

到

```
connectionStringName="orangefreshConnectionString1" 
```

或者

```
connectionStringName="orangefreshEntities" 
```

我不知道你使用哪个连接来做什么，但这就是需要改变的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:10:29.787

是的，您备份原始 SQL 数据库，然后从顶部恢复。但是您不能只从还原开始。您需要使用该工具进行准备。在 SQL 还原上，您需要检查替换选项。同样在数据库的安全性方面，您可能需要删除并重新添加用户，并且用户可能具有相同的名称但可能不同的内部 ID。

# java - Spring AOP 代理使用

> ID：12042788
> 
> 赞同：1
> 
> 时间：2012-08-20T18:09:19.157
> 
> 标签：java, xml, spring, aop

我尝试使用`AOP`代理在 Spring 框架中引入新方法。但在控制台上我看到了`class cast exeption`。

```
I WorkingException in thread "main" java.lang.ClassCastException: com.proxy.$Proxy11 cannot be cast to com.proxy.Spoker
    at com.proxy.MyAspect.extendsPosibility(MyAspect.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:603)
    at org.springframework.aop.aspectj.AspectJMethodBeforeAdvice.before(AspectJMethodBeforeAdvice.java:39)
    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:49)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at com.proxy.$Proxy11.perform(Unknown Source)
    at com.proxy.TestAOP.main(TestAOP.java:15) 
```

我有课

```
public class TestAOP {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");
        Performer per = (Performer) context.getBean("guitar");
        per.perform();

    }

}

@Component
@Qualifier("guitar")
public class Guitar implements Performer{

    @Override
    public void perform() {
        System.out.println("I PLAY");
    }

} 
```

方面

```
@Aspect
@Component
public class MyAspect {

    @DeclareParents(defaultImpl = Guitar.class, value = "*.SpookerImp")
    @Autowired
    @Qualifier("guitar")
    private Performer guitar;

    @Before("performAll()")
    public void extendsPosibility() {
        System.out.println("I Working");
        ((Spoker)guitar).spook();
    }
    @Pointcut("execution(* *.*())")
    public void performAll() {
    }
}

@Component("SpokerImp")
class SpookerImp implements Spoker {

    @Override
    public void spook() {
        System.out.println("I Spoke");
    }

} 
```

界面

```
interface Performer{
    void perform();

}

interface Spoker {

    void spook();
} 
```

和`Beans.xml`配置文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <aop:aspectj-autoproxy></aop:aspectj-autoproxy>
    <context:annotation-config></context:annotation-config>
    <context:component-scan base-package="com.proxy"></context:component-scan>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:24:02.627

我认为您弄错了，我尝试了以下方法并且有效：

```
@Aspect
@Component
public class MyAspect {

    @DeclareParents(defaultImpl = Guitar.class, value = "com.proxy.SpookerImp")
    private Performer guitar;

} 
```

和这个测试：

```
Spoker spoker = (Spoker)context.getBean("SpokerImp");
spoker.spook();
((Performer)spoker).perform(); 
```

见上文，我正在转换`spoker`为`Performer`. 这就是 DeclareParents 所指示的，对于`SpokerImpl`（值中的那个）的实现，声明`Performer`为具有 in 中的实现的父级`Guitar`。

# ios - iPad 方向失灵

> ID：12042789
> 
> 赞同：0
> 
> 时间：2012-08-20T18:09:20.170
> 
> 标签：ios, ipad, orientation

这让我非常困惑。我在几乎全纵向宽度的页面上有一个滚动视图。里面有 6 个固定高度的滚动视图，几乎是全宽的。这个想法是人们垂直滚动以查看 6 个滚动视图并在每个滚动视图中水平滚动。

我的问题是面向景观。我希望扩展以使用新的水平空间并减少垂直空间，同时 6 个内部滚动视图保持其高度，但也利用增加的宽度。

如果我让 iPad 完成我得到的旋转（基于左上角 = 0,0），主视图情况在 -300、-800 左右并且尺寸没有变化（仍然在 768、1004 左右）。此外，我位于 0,0 的工具栏现在跳到底部。我禁用了状态栏，但是每次更改方向时，状态栏都会返回。

我已经阅读了有关 iPad 方向的所有 stackoverflow。我看过大约 10 个教程/视频，这一切看起来都很奇怪。从理论上讲，我可以用大约十几行代码来修改我的显示，但是旋转太远了，我不确定从哪里开始。

有什么建议吗？OSX Lion、xCode4.4、iPad 3 iOS5 问候 Chris H

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:12:43.917

我假设您已经配置了在 Interface Builder Sizing & Layout 检查器中方向更改时希望所有这些对象发生变异的方式，对吗？

在该检查器中，您可以选择视图中的每个对象如何根据方向发生变化。有弹簧和支柱可以让您决定对象将被锚定在哪里（或是否），或者是否允许对象拉伸其视图。Apple Docs 将为您提供更多信息。

这是显示您需要使用的检查器选项卡的图片： ![在此处输入图像描述](../Images/8d5918c861ad4c17eab19b267665735c.png)

# javascript - IE9“访问被拒绝”错误，访问 IFrame 时

> ID：12042793
> 
> 赞同：3
> 
> 时间：2012-08-20T18:09:35.827
> 
> 标签：javascript, jquery, cross-domain

我的计算机 (localhost) 上有一个 html 页面 ( `test.html`)。在我已`abc.example.com`加载的该页面上的 iframe 中。

我想`abc.example.com`从另一个域访问 iframe 的内容`xyz.example.com`。这是我迄今为止尝试过的：

```
//test.html in abc.example.com
<input type="textbox" />
<input type="submit" value="click_me" />

//Start.html in xyz.example.com

<script type="text/javascript">
  $(document).ready(function() {

    $("#ok").click(function() {
      //using javascript
      var oo = document.getElementById("myFrame");

      document.getElementById("divFrame").innerHTML = 
        oo.contentWindow.document.body.innerHTML;   
    });

  });
</script>

<iframe id="myFrame" src="http://localhost/exam/test.html"></iframe>
<div id="divFrame"></div>
<input type="submit" id="ok" /> 
```

但是当我按下“确定”按钮时，它会引发`"Access is Denied"`错误。在使用 jQuery 模拟 iframe 中的点击时，我也遇到了同样的错误：

```
var btn = window.frames[0].document.getElementsByName('click_me');
btn[0].click(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:14:56.293

In JavaScript you don't have access to frames on a different domain. It's called the [Same origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy). If this was allowed you could, for instance, open a hidden frame to load facebook and google+ and steal everyone's info!

In some cases there is a way around the same origin policy but you need to explicitly whitelist a domain. Like when using [Cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing). So it is possible to dynamically (AJAX/XMLHTTPRequest) fetch data from another domain, but you must control the other domain as well.

# php - 如何让这些链接按钮在此 PHP 代码中正确显示？

> ID：12042807
> 
> 赞同：0
> 
> 时间：2012-08-20T18:10:42.817
> 
> 标签：php, html, css

我正在尝试向 php 脚本添加一些额外的链接。

这是原始代码：

```
 <div id="content-left">
        <h4>Recent Work</h4>
        <?php query_posts('posts_per_page=2&cat=-8,-52,-53,-54'); ?>

        <?php if(have_posts()) : ?><?php while(have_posts()) : the_post(); ?>

        <div class="home-blog-feed">
          <?php the_post_thumbnail(array(130, 70, true)); ?>

            <div class="home-feed-right">
            <span class="home-title"><?php the_title(); ?></span>
            <span class="home-description"><?php echo get_post_meta($post->ID, 'Caption', true); ?></span>
            <span class="home-link"><a href="<?php the_permalink() ?>">View Gallery</a></span>
            </div>
        </div>
        <?php endwhile; ?>
        <a href="http://www.mysite.com/blog/" class="button feed">View More</a>
<?php endif; ?> 
```

该代码产生以下输出：

![截屏](../Images/7c0b0ef63f7d68f8c090c1860e1a9d48.png)

我正在尝试在“查看更多”按钮下方添加两个额外的按钮。当我添加代码时，按钮出现在父 div 的顶部，最终出现在“最近的工作”和第一张图片的后面。

我是 php 新手，任何关于为什么它没有出现在“查看更多”按钮下方的帮助将不胜感激。我尝试使用 echo 命令和 '\n' 来创建中断，但它没有生效。

此外，这是我尝试在“查看更多”按钮下方添加的编码按钮的示例：

```
<a class="large-button" href="http://www.mysite.com/my-specified-page/">View Page</a> 
```

这是页面：

[http://www.aimeehurstphotography.com/wedding-photography-2/](http://www.aimeehurstphotography.com/wedding-photography-2/)

这是左侧内容输出的 CSS：

```
#content-left {
width:330px;
float:left;
height:auto;
padding:0;
margin:0;}

.home-blog-feed {
    width:100%;
    height:auto;
    float:left;
    padding:0 0 10px 0;
    margin-bottom:7px;}
.home-blog-feed img {
    text-align:left;
    float:left;
    margin:0 18px 0 0;
    vertical-align:top;
    border:#CCC solid 1px;
    padding:5px;
    background:#FFFFFF;}

    .home-feed-right {
        width:170px;
        float:left;}

    .home-title {
        font-weight:bold;
        width:100%;
        display:block;
        margin-bottom:5px;
        font-family:Arial, Helvetica, sans-serif;
        font-size:14px;}
    .home-description {
        font-weight:normal;
        font-family:Arial, Helvetica, sans-serif;
        font-size:12px;
        padding:0;
        display:block;
        margin:0 0 5px 0;
        color:#666;
    }
    .home-link a {
        font-weight:normal;
        font-family:Arial, Helvetica, sans-serif;
        font-size:12px;
        display:block;
        color:#008080;
    }
    .home-link a:hover {
        color:#960;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:25:53.967

Sounds like a float problem. Try adding a

```
<br style="clear:both;" /> 
```

between the two buttons. Of course, you can and should add a stylesheet class for that purpose.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:56:49.390

你可以使用这样的代码： `<a href="http://www.mysite.com/blog/" class="button feed" style="float:left">View More</a><br /> <a class="large-button" href="http://www.mysite.com/my-specified-page/" style="float:left">View Page</a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:40:33.887

您需要更改要获取的帖子数量。在页面上添加另外 2 个项目时，我没有发现任何问题。

```
<?php query_posts('posts_per_page=4&cat=-8,-52,-53,-54'); ?> 
```

# android - 召回方法而不是召回活动android

> ID：12042811
> 
> 赞同：-1
> 
> 时间：2012-08-20T18:11:01.290
> 
> 标签：android

这是两个音频和视频队列。我希望他们重复 7 次。

但是 for 循环和 while 循环不起作用。似乎所有的信誉都会并行执行。

我也能回忆起`Activity`。

但我想要一种方法来调用音频和视频本身多次（例如 7 次）一个接一个。

任何帮助表示赞赏。

这是我的代码的一部分：

```
Public boolean dispatchTouchEvent(MotionEvent ev) {
            SharedPreferences appSettings = PreferenceManager.getDefaultSharedPreferences(this);
                boolean doAudio= appSettings.getBoolean("audioCue", true);
                boolean doVideo= appSettings.getBoolean("videoCue", true);
                String audioFreqS = appSettings.getString("audioFrequency", "400");
                float audioFrequency = (float)Integer.parseInt(audioFreqS);
            String audioLoudnessS = appSettings.getString("audioLoudness", "100");
                float audioLoudness = ((float)Integer.parseInt(audioLoudnessS))/100.0f;

        // determine whether estimation or cue mode is active
        if (!currentlyEstimating) {
            if (ev.getAction() == MotionEvent.ACTION_DOWN) {
                    Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

                // determine random timespan for cue(s)
                initCueLength();

                // use video cue, i.e. display colored block for the specified time

                    if (doVideo) {
                            switch         (Integer.parseInt(appSettings.getString("cueBackgroundColor", "1"))) {
                        case 1: 
                            videoLayout.setBackgroundColor(Color.WHITE);
                            break;
                        case 2:
                                 videoLayout.setBackgroundColor(Color.RED);
                            break;
                    case 3:       
                        videoLayout.setBackgroundColor(Color.GREEN);       
                            break;
                        case 4:    
                             videoLayout.setBackgroundColor(Color.BLUE);
                            break;
                        case 5:    
                               videoLayout.setBackgroundColor(Color.YELLOW);
                            break;
                        default:      
                        videoLayout.setBackgroundColor(Color.WHITE);       
                            }
                        // after the delay specified for postDelayed, set background to black
                        Handler handler = new Handler();
                        handler.postDelayed(new Runnable()
                        {
                            public void run()
                            {
                                videoLayout.setBackgroundColor(Color.BLACK);      
                            }
                        }, cueLength);
                        loopnum++;
                        }

                    if (doAudio) {
                                // TODO integrate sound playing
                            final SoundGenerator task=new SoundGenerator();       
                        task.keepPlaying(true);
                        task.setLoudness(audioLoudness);
                        // start sound generator with the specified frequency (Hz)
                        task.execute(audioFrequency);
                        Handler handler = new Handler();
                        handler.postDelayed(new Runnable()
                        {
                                public void run()
                            {
                                    task.keepPlaying(false);
                                }
                        }, cueLength);
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:31:13.757

播放音频和视频是异步完成的，所以如果你只是循环播放，你最终会并行播放 7 次声音。您可能会在播放结束时触发重复，例如声音，传递一个递减的计数器并在计数器达到 0 时停止重复。

# iis - IIS 将子域重写为另一个子域

> ID：12042812
> 
> 赞同：0
> 
> 时间：2012-08-20T18:11:04.603
> 
> 标签：iis, isapi-rewrite

我有一个网站，比如 www.xyz.com 我有另一个网站托管 app.xyz.com

我正在考虑将所有子域请求重定向到 app.xyz.com。

例如 a.xyz.com - app.xyz.com

b.xyz.com - app.xyz.com

c.xyz.com - app.xyz.com

浏览器中的url需要保持a.xyz.com、b.xyz.com或者c.xyz.com

你能帮我完成所涉及的步骤吗？DNS需要做什么，IIS需要写什么重写规则。（为此，我不想为每个条目创建任何文件夹、子域、绑定规则等。）

以上内容是否适用于 http 和 https ？

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:37:15.020

如果您正确设置了 www.xyz.com，您可以简单地使用以下 ISAPI_Rewrite 规则来解决此问题：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP:Host} ^(?!www\.).+$ [NC]
RewriteCond %{HTTP:Host} ^[^.]+\.xyz\.com$ [NC]
RewriteRule .* http://app.xyz.com [NC,R=301,L] 
```

# javascript - 元素未正确附加到 div 框

> ID：12042815
> 
> 赞同：0
> 
> 时间：2012-08-20T18:11:18.353
> 
> 标签：javascript, jquery, jquery-ui-draggable

我试图让我的 div 框内容附加到空框中，然后恢复到我的可排序中。看起来很简单，希望有人能看到我看不到的东西。代码在这里 --> [http://jsfiddle.net/Awh3G/61/](http://jsfiddle.net/Awh3G/61/)

稍后，我想实现加载滚动。如果有想法，我愿意倾听

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:26:03.027

首先，你的 li 都有相同的 ID。那是无效的。

为了使可排序的还原，您使用还原选项。

为了附加值，您可以使用他们给您的 ui 变量。

阅读此页面：http: [//jqueryui.com/demos/droppable/#event-drop](http://jqueryui.com/demos/droppable/#event-drop)

读完之后，你可以在这里看到它的暗示：http://jsfiddle.net/lathan/Awh3G/ [62](http://jsfiddle.net/lathan/Awh3G/62/) / `

```
$('.sorting').sortable({
    cursor: 'pointer',
    tolerance: 'pointer',
    scroll: false,
    revert: true
});

$('#dropin').droppable({
    hoverClass: 'border',
    tolerance: 'touch',
    drop: function(e,ui) {
        $('#dropin').append(ui.draggable.html() + '<br/>');
    }
}); 
```

# jquery - jQuery 下拉菜单关闭打开的主题

> ID：12042816
> 
> 赞同：1
> 
> 时间：2012-08-20T18:11:19.207
> 
> 标签：jquery

请参阅[http://www.laerdalmail.com/dev/discoversimulation/needs/#](http://www.laerdalmail.com/dev/discoversimulation/needs/#)以获取相关菜单的示例：当一个主题被点击，并且一个子菜单下拉时，是否有可能有任何其他打开的主题自动关闭？下面，我包含了处理下拉列表以供查看的函数。

```
function Reveal(a, orig_height) {
    var ul = a.parentNode.getElementsByTagName("ul").item(0);

    $(ul).animate({
        height: 'toggle',
        opacity: 'toggle'
    }, 'slow', function() {
        if ($(ul.parentNode).height() < orig_height) {
            $(a).css('backgroundPosition', '0 0');
        }
    });
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:16:20.203

您应该考虑使用[jquery UI 手风琴](http://jqueryui.com/demos/accordion/)，它会让您更轻松，并且动画更流畅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:16:43.407

您可以在功能开始时关闭所有父母，然后打开触发的父母。

# python - 2 张表格张贴到同一个地方。一个有效，另一个无效

> ID：12042818
> 
> 赞同：0
> 
> 时间：2012-08-20T18:11:21.987
> 
> 标签：python, django, django-forms

我在同一个模板中有 2 个表单。一个将国家标签添加到当前用户配置文件中，另一个添加兴趣标签。两种形式都发布到同一个 url。两个标签字段都通过自动完成过滤，因此两个字段都有相应的内容。国家输入将返回国家列表等。

当我通过国家标签字段搜索时，我可以添加一个国家标签。惊人的！但是，当尝试添加兴趣时，spinner.gif 被激活，但在我的控制台中，帖子返回 404，因此没有添加实际的兴趣标签。

**模板：**其他形式相同，只需将 ids: 替换`Country`为`Interest`.

```
<form id="addCountryTagForm" class="add_tags_form" method="POST" action="/tag/add/"> 
     {% csrf_token %}
     <input id="country-tag-input" class="input-text inline required tag-select" name="tagname" type="hidden" />
     <button class="btn addtag" type="submit" id="addCountryTag">
           <span>Add</span>
      </button> 
</form> 
```

**阿贾克斯：**

```
$('.add_tags_form').submit(function(e) {
     var $this = $(this);
     var $loader = $('<div class="tag-loader"><img src="/static/images/misc/spinner.gif" /></div>');
     $this.append($loader);

     e.preventDefault();
     var action = $this.attr("action");

     result = $.ajax({
          url: action,
          data: {
               'csrfmiddlewaretoken':$('input[name^="csrfmiddlewaretoken"]').val(),
               'tagname':$('input[name^="tagname"]').val()
           },
           type: "POST",
           success: function(data) {
                $('.tag-section').load('/account/tag-section/');
                $('input[name^="tagname"]').val('');
                $loader.remove();
           },
           error: function(jqXHR, textStatus, errorThrown) {
                $loader.remove();
           }
       });
       return false;
 }); 
```

我真的不知道为什么这不起作用。我想要实现的目标是不是遥不可及？发布到同一个 url 的 2 个表单不能在同一个模板中工作吗？如果有人能提供洞察力，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:11:08.390

你需要给你的按钮一个`name`属性。通过检查按下的按钮的名称，您可以在一个页面上发布两个表单。这可以这样做：

**技术1**

```
...
if form.is_valid():
    if "button1" in request.POST:
        # do things for form 1
    elif "button2" in request.POST:
        # do things for form 2
... 
```

**技巧2**

`name`根据您正在查看`country`或更改隐藏字段的属性`interest`。

您也没有以最好的方式将 jQuery 与 Django 一起使用。如，您在提交信息时没有使用`views.py`或文件。`forms.py`看看这个使用 jQuery 和 Django 的答案：[如何使用 JQuery 和 Django (ajax + HttpResponse)？](https://stackoverflow.com/questions/1527641/how-to-use-jquery-and-django-ajax-httpresponse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:57:17.637

尝试在设置中将DEBUG设置为True，通过控制台（或Firebug）查看结果404页面；404 错误可能不是由缺少 URL 引起的，而是由视图拒绝输入引起的，调试信息可以帮助查明原因。

一个可能的原因可能是任何代码填充`<input id="country-tag-input">`. 如果 id 变为`interest-tag-input`，这可能会导致标签的值未设置，从而向 Django 发送一个空的标签名。

# c++ - 如何编写类型特征`is_container`或`is_vector`？

> ID：12042824
> 
> 赞同：36
> 
> 时间：2012-08-20T18:11:40.110
> 
> 标签：c++, templates, sfinae, enable-if

是否可以编写一个类型特征，其值对于所有常见的 STL 结构（例如，、、、`vector`... `set`）都为真`map`？

首先，我想编写一个类型特征，它对 a 为真，`vector`否则为假。我试过这个，但它没有编译：

```
template<class T, typename Enable = void>
struct is_vector {
  static bool const value = false;
};

template<class T, class U>
struct is_vector<T, typename boost::enable_if<boost::is_same<T, std::vector<U> > >::type> {
  static bool const value = true;
}; 
```

错误消息是`template parameters not used in partial specialization: U`。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-07-03T12:37:11.943

看，另一个基于 SFINAE 的用于检测类似 STL 的容器的解决方案：

```
template<typename T, typename _ = void>
struct is_container : std::false_type {};

template<typename... Ts>
struct is_container_helper {};

template<typename T>
struct is_container<
        T,
        std::conditional_t<
            false,
            is_container_helper<
                typename T::value_type,
                typename T::size_type,
                typename T::allocator_type,
                typename T::iterator,
                typename T::const_iterator,
                decltype(std::declval<T>().size()),
                decltype(std::declval<T>().begin()),
                decltype(std::declval<T>().end()),
                decltype(std::declval<T>().cbegin()),
                decltype(std::declval<T>().cend())
                >,
            void
            >
        > : public std::true_type {}; 
```

当然，您可以更改要检查的方法和类型。

如果您只想检测 STL 容器（这意味着`std::vector`,`std::list`等），您应该执行类似的[操作](https://stackoverflow.com/a/31105859/2842166)。

更新。正如@Deduplicator 所指出的，容器可能不符合 AllocatorAwareContainer 要求（例如：）`std::array<T, N>`。这就是为什么`T::allocator_type`不需要检查的原因。但是您可以以类似的方式检查任何/所有[容器要求。](https://en.cppreference.com/w/cpp/named_req/Container)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-20T18:31:07.357

实际上，经过反复试验，我发现它很简单：

```
template<class T>
struct is_vector<std::vector<T> > {
  static bool const value = true;
}; 
```

我仍然想知道如何写一个更通用的`is_container`. 我必须手动列出所有类型吗？

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-20T18:26:54.727

You would say that it should be simpler than that...

```
template <typename T, typename _ = void>
struct is_vector { 
    static const bool value = false;
};
template <typename T>
struct is_vector< T,
                  typename enable_if<
                      is_same<T,
                              std::vector< typename T::value_type,
                                           typename T::allocator_type >
                             >::value
                  >::type
                >
{
    static const bool value = true;
}; 
```

... But I am not really sure of whether that is *simpler* or not.

In C++11 you can use type aliases (I think, untested):

```
template <typename T>
using is_vector = is_same<T, std::vector< typename T::value_type,
                                          typename T::allocator_type > >; 
```

The problem with your approach is that the type `U` is non-deducible in the context where it is used.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-20T22:00:37.660

为什么不对 is_container 做这样的事情呢？

```
template <typename Container>
struct is_container : std::false_type { };

template <typename... Ts> struct is_container<std::list<Ts...> > : std::true_type { };
template <typename... Ts> struct is_container<std::vector<Ts...> > : std::true_type { };
// ... 
```

这样，用户可以通过部分专业化来添加自己的容器。至于 is_vector 等，只需像我上面那样使用部分特化，但仅限于一种容器类型，而不是很多。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-20T19:06:37.913

虽然此处尝试猜测类是否为容器的其他答案可能对您有用，但我想向您展示一种替代方法，即命名您想要为其返回 true 的类型。您可以使用它来构建任意`is_(something)`特征类型。

```
template<class T> struct is_container : public std::false_type {};

template<class T, class Alloc> 
struct is_container<std::vector<T, Alloc>> : public std::true_type {};

template<class K, class T, class Comp, class Alloc> 
struct is_container<std::map<K, T, Comp, Alloc>> : public std::true_type {}; 
```

等等。

您将需要包含`<type_traits>`您添加到规则中的任何类。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-20T18:32:40.283

```
template <typename T>
struct is_container {

    template <
       typename U,
       typename I = typename U::const_iterator
    >   
    static int8_t      test(U* u); 

    template <typename U>
    static int16_t     test(...);

    enum { value  =  sizeof test <typename std::remove_cv<T>::type> (0) == 1 };
};

template<typename T, size_t N>  
struct  is_container <std::array<T,N>>    : std::true_type { }; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-27T08:34:49.663

快进到 2018 年和 C++17，我非常敢于改进 @Frank 的答案

```
// clang++ prog.cc -Wall -Wextra -std=c++17

 #include <iostream>
 #include <vector>

 namespace dbj {
    template<class T>
      struct is_vector {
        using type = T ;
        constexpr static bool value = false;
   };

   template<class T>
      struct is_vector<std::vector<T>> {
        using type = std::vector<T> ;
        constexpr  static bool value = true;
   };

  // and the two "olbigatory" aliases
  template< typename T>
     inline constexpr bool is_vector_v = is_vector<T>::value ;

 template< typename T>
    using is_vector_t = typename is_vector<T>::type ;

 } // dbj

   int main()
{
   using namespace dbj;
     std::cout << std::boolalpha;
     std::cout << is_vector_v<std::vector<int>> << std::endl ;
     std::cout << is_vector_v<int> << std::endl ;
}   /*  Created 2018 by dbj@dbj.org  */ 
```

“[证明布丁”](https://wandbox.org/permlink/cv5u9bZlwHbWWQpk)。有更好的方法可以做到这一点，但这适用于`std::vector`.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-12-20T20:41:41.613

我喜欢检测某物是否是容器的方法是查找`data()`成员`size()`函数。像这样：

```
template <typename T, typename = void>
struct is_container : std::false_type {};

template <typename T>
struct is_container<T
   , std::void_t<decltype(std::declval<T>().data())
      , decltype(std::declval<T>().size())>> : std::true_type {}; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-09T02:53:54.167

我们也可以使用**概念**。我用*GCC 10.1* flag编译了这个`-std=c++20`。

```
 #include<concepts>

template<typename T>
concept is_container = requires (T a)
{ 
    a.begin(); 
    // Uncomment both lines for vectors only
    // a.data(); // arrays and vectors
    // a.reserve(1); // narrowed down to vectors

}; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-30T14:13:33.013

在我们的项目中，我们仍然没有设法迁移到支持 C++11 的编译器，因此对于容器对象的 type_traits，我必须编写一个简单的 boost 样式帮助器：

```
template<typename Cont> struct is_std_container: boost::false_type {};
template<typename T, typename A> 
struct is_std_container<std::vector<T,A> >: boost::true_type {};
template<typename T, typename A> 
struct is_std_container<std::list<T,A> >: boost::true_type {};
template<typename T, typename A> 
struct is_std_container<std::deque<T,A> >: boost::true_type {};
template<typename K, typename C, typename A> 
struct is_std_container<std::set<K,C,A> >: boost::true_type {};
template<typename K, typename T, typename C, typename A> 
struct is_std_container<std::map<K,T,C,A> >: boost::true_type {};

template<typename Cont> struct is_std_sequence: boost::false_type {};
template<typename T, typename A> 
struct is_std_sequence<std::vector<T,A> >: boost::true_type {};
template<typename T, typename A> 
struct is_std_sequence<std::list<T,A> >: boost::true_type {};
template<typename T, typename A> 
struct is_std_sequence<std::deque<T,A> >: boost::true_type {}; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-15T07:09:07.007

如果您还想让它适用于 const std::vector，则可以使用以下命令：

```
namespace local {

template<typename T, typename _ = void>
struct isVector: std::false_type {
};

template<typename T>
struct isVector<T,
        typename std::enable_if<
                std::is_same<typename std::decay<T>::type, std::vector<typename std::decay<T>::type::value_type, typename std::decay<T>::type::allocator_type> >::value>::type> : std::true_type {
};

}

TEST(TypeTraitTest, testIsVector) {
    ASSERT_TRUE(local::isVector<std::vector<int>>::value);
    ASSERT_TRUE(local::isVector<const std::vector<int>>::value);

    ASSERT_FALSE(local::isVector<std::list<int>>::value);
    ASSERT_FALSE(local::isVector<int>::value);

    std::vector<uint8_t> output;
    std::vector<uint8_t> &output2 = output;
    EXPECT_TRUE(core::isVector<decltype(output)>::value);
    EXPECT_TRUE(core::isVector<decltype(output2)>::value);
} 
```

如果没有 std::remove_cv 调用，第二个 ASSERT_TRUE 将失败。但这当然取决于您的需求。这里的事情是，根据规范， std::is_same 检查 const 和 volatile 是否也匹配。

# c - 简单的 linux 应用程序读取错误的 tty？

> ID：12042827
> 
> 赞同：0
> 
> 时间：2012-08-20T18:11:53.607
> 
> 标签：c, linux, serial-port

显然是 Linux 串行编程的新手。

如果我使用 minicom 或 termie 的 /dev/ttyS4，我可以通过零调制解调器电缆与另一台 PC 通信。使用此处的代码，当我运行程序时，我没有收到来自远程 pc 的字符，而是看到来自本地键盘的输入。我猜这是一个简单的配置错误，但我没有看到。

见解赞赏！

```
#include <stdio.h>   /* Standard input/output definitions */
#include <string.h>  /* String function definitions */
#include <unistd.h>  /* UNIX standard function definitions */
#include <fcntl.h>   /* File control definitions */
#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

//const char NAK = 0x15;
char THE_PORT[] =  "/dev/ttyS4";
unsigned char m_messagebuf[255] ;

int main()
{
    int retval, fd, bwritten;   
    unsigned char m_recbuf[4];
    unsigned char m_sendbuf[73] ;       
    unsigned char haltchar = 0x1d;
    unsigned char c;
    char* p = 0;

    m_sendbuf[0] =  0x15;

    strcpy(m_messagebuf, "testing ");
    strcat(m_messagebuf, THE_PORT);
    printf("%s\n", m_messagebuf);
    sleep(1);

    //return(0);
    if (fd = open_port() < 0)
    {
        printf("oops...\n");
        return(0);
    }

    printf( "opened %s\n", THE_PORT);
    sleep(1);

    if (ConfigurePort(fd) < 0)
    {
        printf("oops...\n");
        return 0;
    }
    printf("configured %s\n", THE_PORT);
    sleep(1);

    while( 1)
    {
        printf("waiting for %s\n", THE_PORT);
        if ((retval = read(fd, &c, 1)) > 0)
        {
            printf("read %d from port : \n", retval);
            //m_recbuf[retval] = '0';
            printf("%c\n", c);

        }
        else
        {
            printf("Read 0 or  -1 from port (%d)\n", retval);
        }
        sleep(1);

        //bwritten = write(fd, (void *)&m_sendbuf, 1);
        //printf("wrote %d to port\n", bwritten);
    }       
    printf("Done.\n");
    close(fd);
    return 0;   

}

int ConfigurePort(int fd)
{   
    struct termios options;

    if ( tcgetattr(fd, &options) < 0)
    {

        perror(strcat("config_port: Unable to get attribs for ", THE_PORT));
        return -1;      
    }
    if (memset(&options, 0, sizeof(options)) < 0)
    {
        sprintf(m_messagebuf, "config_port: Unable to clear settings %s\n", THE_PORT);
        perror(m_messagebuf);
        return -1;
    }

    // 9600
    cfsetispeed(&options, B9600);
    cfsetospeed(&options, B9600);
    // N81
    options.c_cflag &= ~PARENB;
    options.c_cflag &= ~CSTOPB;
    options.c_cflag &= ~CSIZE;
    options.c_cflag |= CS8;
    // flow control OFF
    //options.c_cflag &= ~CNEW_RTSCTS;    
    // enable resd, keep owner
    options.c_cflag |= (CLOCAL | CREAD);

    // local options for raw input    
   options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG);
    // raw output
    options.c_oflag &= ~OPOST;

    // raw input    
    options.c_iflag = INPCK | ISTRIP | IGNCR | IGNBRK;
    options.c_iflag &=  ~(IXON | IXOFF | IXANY);

    options.c_cc[VINTR]    = 0;     /* Ctrl-c */ 
    options.c_cc[VQUIT]    = 0;     /* Ctrl-\ */
    options.c_cc[VERASE]   = 0;     /* del */
    options.c_cc[VKILL]    = 0;     /* @ */
    options.c_cc[VEOF]     = 0;     /* Ctrl-d */
    options.c_cc[VSWTC]    = 0;     /* '\0' */
    options.c_cc[VSTART]   = 0;     /* Ctrl-q */ 
    options.c_cc[VSTOP]    = 0;     /* Ctrl-s */
    options.c_cc[VSUSP]    = 0;     /* Ctrl-z */
    options.c_cc[VEOL]     = 0;     /* '\0' */
    options.c_cc[VREPRINT] = 0;     /* Ctrl-r */
    options.c_cc[VDISCARD] = 0;     /* Ctrl-u */
    options.c_cc[VWERASE]  = 0;     /* Ctrl-w */
    options.c_cc[VLNEXT]   = 0;     /* Ctrl-v */
    options.c_cc[VEOL2]    = 0;     /* '\0' */

    options.c_cc[VMIN] = 1;     /* blocking read until 1 character arrives */
    options.c_cc[VTIME] = 0;        /* inter-character timer unused */

    //Set the new options for the port...      
    if (tcsetattr(fd, TCSAFLUSH, &options) < 0)
    {
        sprintf(m_messagebuf, "config_port: Unable to configure %s\n", THE_PORT);
        perror(m_messagebuf);
        return -1;
    }       
}

/*
 * Returns the file descriptor on success or -1 on error.
 */
int open_port(void)
{
      int fd; /* File descriptor for the port */

      fd = open(THE_PORT, O_RDWR | O_NOCTTY  | O_NDELAY | O_NONBLOCK); 
      if (fd == -1)
      {
            sprintf(m_messagebuf, "open_port: Unable to open %s\n", THE_PORT);
            perror(m_messagebuf);
            return -1;
      }       
     return (fd);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:13:42.133

```
if (fd = open_port() < 0) 
```

相当于

```
if (fd = (open_port() < 0)) 
```

and`<`运算符返回`0`or `1`，这不是您想要的文件描述符。

你可能想做：

```
if ((fd = open_port()) < 0) 
```

反而。

另一个问题：您的函数`ConfigurePort`末尾没有默认返回值（最终`}`）。没有返回值意味着它返回一个不确定的值，读取这个值是未定义的行为。

# python - 如何在 django 中集中登录 OpenID？

> ID：12042830
> 
> 赞同：2
> 
> 时间：2012-08-20T18:12:06.617
> 
> 标签：python, database, django, openid, django-sites

我已将我的 Django 应用程序拆分为两个具有不同数据库的站点。我使用**OpenID** ( `python_openid-2.2.5`) 进行身份验证/注册，但站点 A 的用户与***站点******B***不同。

如何在不同数据库上运行的应用程序之间集中登录？

而且我想要一个仅用于 OpenID 的数据库。我[在 Plaxo 看过 Joseph Smarr 的这篇文章](http://www.netvivs.com/openid-recipe/)和这个[stackoverflow 问题](https://stackoverflow.com/questions/4395190/how-do-stackexchange-sites-associate-user-accounts-and-openid-logins)，但我不知道这是否与 python 相同。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:57:46.410

您可以使用[**django-cas - CAS（中央身份验证服务）**](https://bitbucket.org/cpcc/django-cas/overview)，这是我用于集中式身份验证系统的内容

# variables - PowerShell：刷新存储在变量中的日期

> ID：12042831
> 
> 赞同：1
> 
> 时间：2012-08-20T18:12:26.890
> 
> 标签：variables, powershell, refresh

我有以下变量在我的许多脚本中用于日志记录：

`$uDate = get-date -format "ddd MM/dd/yyyy HH:mm:ss"`

唯一的问题是日期从不刷新，只显示声明变量的日期/时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:37:46.800

在不了解更多信息的情况下，也许“现在”声明一个新定义的函数？

```
function now()
{ 
  get-date -format "ddd MM/dd/yyyy HH:mm:ss"
} 
```

甚至直接使用 C#：

```
[datetime]::Now.ToString("ddd MM/dd/yyyy HH:mm:ss") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T18:47:10.013

这不应该用变量来完成。变量应该存储数据，而不是采取行动。所以正确的方法是创建一个函数，以您想要的格式返回当前日期。

但是...如果您想获得真正的hack-tastic，您可以通过在对变量的所有读取设置断点来做到这一点。断点的 -Action 会将变量的值重置为当前时间。

```
$rightNow = Get-Date
Set-PSBreakpoint -Variable rightNow -Mode Read -Action { $global:rightNow = Get-Date } 
```

测试...

```
PS > $rightnow

Monday, August 20, 2012 11:46:04 AM

PS > $rightnow

Monday, August 20, 2012 11:46:09 AM 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:32:33.813

Greg Wojan 说得对，要给你最好的答案，我们需要知道你真正想要完成什么。我假设您想要一个每次尝试使用它时都会神奇地自我更新的变量。据我所知，这在PS中是不可能的。我能想到的最接近的是做这样的事情：

```
$uDate = {get-date -format "ddd MM/dd/yyyy HH:mm:ss"}
"The date now is $($uDate.Invoke())"
Start-Sleep -Seconds 30
"And now it is $($uDate.Invoke())" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T18:47:20.560

有一种方法可以在每次使用时自动更新变量。在 PoshCode 上查看[New-](http://poshcode.org/2750) TiedVariable。Joel Bennett 继续给人留下深刻印象。:-) 它有其局限性，已记录在案，但确实工作得很好。

基本上，它只是一个围绕@latkin 提供的答案的函数。

# php - jQuery AJAX 在去服务器的路上处理字符编码

> ID：12042832
> 
> 赞同：2
> 
> 时间：2012-08-20T18:12:26.667
> 
> 标签：php, javascript, jquery, character-encoding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:20:10.917

`PHP`在将序列化位保存到数据库之前，您是否尝试过将其解析为字符串？

```
parse_str($_POST['field_name'], $php_variable_name); 
```

并`$php_variable_name`在您的插入查询中使用？

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:39:26.710

这似乎是 jQuery 的 serialize() 方法的一个普遍问题。

有一篇文章提出了解决方案，但请务必阅读评论。

[http://forum.jquery.com/topic/serialize-problem-with-latin-1-iso-8859-1-and-solution](http://forum.jquery.com/topic/serialize-problem-with-latin-1-iso-8859-1-and-solution)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:29:55.607

JQuery 内部使用encodeURIComponent，无论如何，所有数据都以UTF-8 传输。再试一次 iconv，但使用 UTF-8 转换器。

```
$f = iconv('UTF-8', 'ISO-8859-1', $_POST['f']); 
```

请注意，MySql 对所有传递的数据进行另一次转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T16:07:51.620

似乎 Javascript 的 encodeURIComponent() 对字符的编码不同于实际的表单提交。最终重写了 javascript encodeURIComponent 函数来解决这个问题......不是最高效的解决方案，但没有其他解决方案出现：

```
var encodeURIComponent = ( function() {
    var encodeURIComponentOriginal = encodeURIComponent;
    return function ( input ) {
        var toReplace = [
            '%E2%80%9A',
            '%E2%80%A6',
            '%E2%80%98',
            '%E2%80%99',
            '%E2%80%9C',
            '%E2%80%9D',
            '%E2%80%93',
            '%E2%80%94',
            '%E2%84%A2',
            '%C2%A9',
            '%C2%AE',
        ];
        var replaceWith = [
            '%82', // ‚
            '%85', // …
            '%91', // '
            '%92', // '
            '%93', // "
            '%94', // "
            '%96', // –
            '%97', // —
            '%99', // ™
            '%A9', // ©
            '%AE', // ®
        ];               

        var output = encodeURIComponentOriginal( input );

        var length = toReplace.length;

        for ( var i = 0; i < length; i++ ) {
            var regexp = new RegExp( toReplace[i], 'g' );
            output = output.replace( regexp , replaceWith[i] );
        } 

        return output;
    };
} )(); 
```

# spring - Spring and testing with TestContextFramework

> ID：12042834
> 
> 赞同：0
> 
> 时间：2012-08-20T18:12:30.963
> 
> 标签：spring, testing, junit

I wanted to write few unit tests for my application that uses Spring MVC. I read the manual page at the Spring home page:`http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html` and it seems that this Spring testing framework could be really useful.

But here are the questions:

1.If I understand it right, to use any of the annotations for testing like `@ContextConfiguration` I need to use `@RunWith(SpringJUnit4ClassRunner.class)`? But is it possible to use two runners (probably not), I just wondered if one can use Spring runner and mockito one, because I am using mockito to mock normal objects.

2.I have a question about loading xml context files with `@ContextConfiguration`. I have my .xml files in `src/main/webapp/WEB-INF/spring`, how can I load them using `ContextConfiguration`? I tried

```
@ContextConfiguration(locations="/webapp/WEB-INF/spring/root-context.xml")
@ContextConfiguration(locations="webapp/WEB-INF/spring/root-context.xml")
@ContextConfiguration(locations="/WEB-INF/spring/root-context.xml")
@ContextConfiguration(locations="WEB-INF/spring/root-context.xml")
@ContextConfiguration(locations="/src/main/webapp/WEB-INF/spring/root-context.xml")
@ContextConfiguration(locations="src/main/webapp/WEB-INF/spring/root-context.xml") 
```

but I always get `class path resource [some_path] cannot be opened because it does not exist`.I am wondering then what path should I use?

EDIT: the second problem was that WEB-INF is not in the classpath, here is the topic that helped me [Location of spring-context.xml](https://stackoverflow.com/questions/10385452/location-of-spring-context-xml)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:20:44.563

1.  不，你不能有两个`@RunWith`，相反，你应该使用 Mockito 提供的其他方式来创建一个 Mock 替身。

2.  指定多个位置的方法是这样的：

    ```
    @ContextConfiguration(locations={"first.xml", "second.xml"}) 
    ```

# c - Are there any tool to parse a C file and show my code layout in a treeview, so I can easily tell which #defines a function depends on to be compiled?

> ID：12042836
> 
> 赞同：3
> 
> 时间：2012-08-20T18:13:01.907
> 
> 标签：c, preprocessor

The question is pretty straight forward. I'm currently using Source Insight, but its parsing of preprocessor macros is not perfect. I need a reliable tool to show me the treeview of nested `#ifdef` and `#if` macros.

I'm writing a new function, and I need to know in which "scope" to put it, to avoid cluttering the global namespace when the `#define`s this function depends on aren't defined.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:15:11.473

任何支持代码折叠的编辑器或 IDE 都应该允许您折叠和展开代码块。我个人喜欢使用[Eclipse](http://eclipse.org/cdt/)，因为它会更进一步并自动确定哪些`#ifdef`块是非活动的。非活动代码显示为灰色并自动折叠。Eclipse 还会标记某些类型的错误，例如未定义的标识符。这也应该对您的情况有所帮助，因为如果您在错误的“范围”中编写了一个函数并且它使用了一个由于 原因而当前不可用的函数，`#ifdef`IDE 会将函数调用标记为“对未定义函数的调用”。

# javascript - 在 Internet Explorer 中下载数据 URI 文件

> ID：12042847
> 
> 赞同：3
> 
> 时间：2012-08-20T18:13:59.363
> 
> 标签：javascript, internet-explorer, safari, data-uri

我有一个基于 Web 的应用程序，并且正在寻找一种方法让用户从 websql 表中下载他们的数据。有人建议使用似乎适用于除 Internet Explorer 之外的所有浏览器的数据 URI。我采用的方法是将所有数据存储在一个变量中，并使用 text/csv MIME-Type 和 charset=UTF-8 字符集编码：

```
document.location.href = 'data:text/csv;charset=UTF-8,' + encodeURIComponent(info); 
```

但是，当我单击 Internet Explorer 9 中的链接时，它说该页面无法显示。任何想法如何让它在 IE 中工作？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T20:49:46.257

IE8 和 IE9 仅支持图像的数据 URI。在此处阅读有关 IE 对数据 URI 支持的更多信息：

[http://msdn.microsoft.com/en-us/library/cc848897(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc848897(v=vs.85).aspx)

编辑：您可以尝试一些针对 IE 的 flash hack。将数据传递到闪存。使用 AS3 启动下载。

# jquery - Any ideas regarding sending a HTML form with a flash file attachment to server?

> ID：12042850
> 
> 赞同：0
> 
> 时间：2012-08-20T18:14:26.413
> 
> 标签：jquery, html, forms, flash, uploading

My development continues and I have moved forward much to my surprise in Flash and JS/HTML.

I have a question for those that have more experience.

I have a web application that consists of members and I want them to be able to send a voice recording to one another. I developed a flash voice recorder that lets the user record a message, play it back, then attach it to the message form much like a email you can attach a file and it will be in the memory until the user hits 'send'. The adding of a voice recording to the message is optional.

My question is, I have the html form and in the lower corner of the form lies my flash recorder. What would be the best strategy so that I can:

Once the user presses send, the recorder checks to see if there was any recording.

If there was no recording, send the message via AJAX normally.

If there WAS a recording, send the message like before and also have flash attach the data with it.

I have been searching and I find online many flash uploaders, flash forms etc..

I guess what I want is that the message be HTML for those users that don't want to send a recording or cannot for some reason use flash. In otherwords the message would be a combination of data from an HTML form and data (if any) from the flash in one shot, or the best way.

But if the recorder is active then have it attached to the POST along with the message in a smooth way.

I imagine that this involves some logic and sending JS calls to the Flash then back but I am not sure of how would be the best approach to this. Can someone guide me or if you know of any good tutorials.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:27:00.893

我认为从 SWF 中提取数据并将其作为同一个 POST 的一部分发送并不容易。最好的办法是在提交时遵循以下逻辑：

1.  对 SWF 进行 JS 调用以查看它是否有录音。如果没有，请发送仅包含文本的普通 AJAX（或同步）帖子。
2.  如果 SWF 有录音，请对其进行 JS 调用，要求其上传录音。此调用应包括将与录音一起发送的唯一消息密钥。SWF 将文件异步上传到一个特殊的 URI。
3.  通过 AJAX 或同步 POST 发送文本以及唯一的消息密钥，并使用标志或特定 POST URI 指示它具有关联的记录。
4.  在服务器端，当您收到录音或带有相关录音的文本时，请等到您收到两半信息后再将其发送给收件人。

该逻辑不包括错误处理或有关从 Flash 上传数据的详细信息，但您似乎可以控制这些部分。

# google-chrome-extension - 用于解析 Google 结果的 Chrome 扩展程序不起作用

> ID：12042852
> 
> 赞同：3
> 
> 时间：2012-08-20T18:14:30.090
> 
> 标签：google-chrome-extension

我一直在试验 Chrome 扩展机制，并试图编写一个可以操纵 Google 结果的扩展（添加评论、屏幕截图、网站图标等）

到目前为止，我已经设法编写了一个使用 RegEx 将 imgs 添加到链接的代码，并且工作正常。

问题是它不适用于 Google 结果。[我在这里](https://stackoverflow.com/questions/9180689/chrome-extension-to-parse-google-search-results)读到它的发生是因为页面没有完全加载；所以我添加了一个“DOMContentLoaded”监听器，但没有帮助。

这是我的代码（内容脚本）：

```
function parse_google()  {
document.body.innerHTML = document.body.innerHTML.replace(
        new RegExp("<a href=\"(.*)\"(.*)</a>", "g"),
        "<img src=\"http://<path-to-img.gif>\" /><a href=\"$1\"$2</a>"
    );
alert("boooya!");
};
alert("content script: before");
document.addEventListener('DOMContentLoaded', parse_google(), false);    
alert("content script: end"); 
```

我收到所有“警报”，但它不适用于谷歌。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T23:49:54.077

“DOMContentLoaded”是指页面的静态HTML，但是Google的搜索结果是使用AJAX获取的，因此在触发“DOMContentLoaded”事件时还不存在。

您可以改用**[MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)**来观察根节点及其后代上的“childList”DOM 突变。
（如果你选择这种方法，**[mutation-summary 库](https://code.google.com/p/mutation-summary/)**可能会派上用场。）

经过（非常浅的）搜索后，我发现（至少对我而言）谷歌将其结果放在了一个`div`带有**id** `search`的地方。以下是执行以下操作的示例扩展的代码：

1.  注册一个 MutationObserver 来检测插入`div#search`到 DOM 中的 od。

2.  注册一个 MutationObserver 以检测“childList”`div#search`及其后代的变化。

3.  每当`<a>`添加节点时，函数都会遍历相关节点并修改链接。`<script>`（脚本出于显而易见的原因忽略了元素。

此示例扩展名仅将链接的文本包含在 中`~~`，但您可以轻松更改它以执行您需要的任何操作。

**清单.json：**

```
{
    "manifest_version": 2,
    "name":    "Test Extension",
    "version": "0.0",

    "content_scripts": [{
        "matches": [
            ...
            "*://www.google.gr/*",
            "*://www.google.com/*"
        ],
        "js":         ["content.js"],
        "run_at":     "document_end",
        "all_frames": false
    }],

} 
```

**内容.js：**

```
console.log("Injected...");

/* MutationObserver configuration data: Listen for "childList"
 * mutations in the specified element and its descendants */
var config = {
    childList: true,
    subtree: true
};
var regex = /<a.*?>[^<]*<\/a>/;

/* Traverse 'rootNode' and its descendants and modify '<a>' tags */
function modifyLinks(rootNode) {
    var nodes = [rootNode];
    while (nodes.length > 0) {
        var node = nodes.shift();
        if (node.tagName == "A") {
            /* Modify the '<a>' element */
            node.innerHTML = "~~" + node.innerHTML + "~~";
        } else {
            /* If the current node has children, queue them for further
             * processing, ignoring any '<script>' tags. */
            [].slice.call(node.children).forEach(function(childNode) {
                if (childNode.tagName != "SCRIPT") {
                    nodes.push(childNode);
                }
            });
        }
    }
}

/* Observer1: Looks for 'div.search' */
var observer1 = new MutationObserver(function(mutations) {
    /* For each MutationRecord in 'mutations'... */
    mutations.some(function(mutation) {
        /* ...if nodes have beed added... */
        if (mutation.addedNodes && (mutation.addedNodes.length > 0)) {
            /* ...look for 'div#search' */
            var node = mutation.target.querySelector("div#search");
            if (node) {
                /* 'div#search' found; stop observer 1 and start observer 2 */
                observer1.disconnect();
                observer2.observe(node, config);

                if (regex.test(node.innerHTML)) {
                    /* Modify any '<a>' elements already in the current node */
                    modifyLinks(node);
                }
                return true;
            }
        }
    });
});

/* Observer2: Listens for '<a>' elements insertion */
var observer2 = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        if (mutation.addedNodes) {
            [].slice.call(mutation.addedNodes).forEach(function(node) {
                /* If 'node' or any of its desctants are '<a>'... */
                if (regex.test(node.outerHTML)) {
                    /* ...do something with them */
                    modifyLinks(node);
                }
            });
        }
    });
});

/* Start observing 'body' for 'div#search' */
observer1.observe(document.body, config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T13:14:34.127

我刚刚写了一个操作谷歌搜索结果的扩展。似乎问题在于结果几乎总是通过 AJAX 获取。我使用[MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)定期检查结果的变化。有两种类型的 Google 搜索页面（到目前为止我遇到过）：标准和 Google Instant。对于标准页面，您需要观察正文元素（您可以使用选择器“#gsr”），但对于 Google Instant，您只需查找包含的 DIV（“#search”）。您将需要观察 childList 和 subtree 突变。

（根据@ExpertSystem 的评论编辑）

# c# - “MapHttpRoute”和“MapRoute”的区别？

> ID：12042853
> 
> 赞同：70
> 
> 时间：2012-08-20T18:14:30.290
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

为什么将“MapRoute”用于“默认”路由，而将“MapHttpRoute”用于“DefaultApi”路由？

```
routes.MapHttpRoute(
  name: "DefaultApi",
  routeTemplate: "api/{controller}/{action}"
);

routes.MapRoute(
  name: "Default",
  url: "{controller}/{action}/{id}",
  defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-20T18:33:31.243

如果您在 ASP.NET 之上使用 Web API，它们最终都将在同一个底层 ASP.NET 路由表上运行 - 但是正如正确指出的那样，从用户的角度来看，您调用两种不同的方法来注册路由。

路由是这样设计的，以便在 ASP.NET 之外托管时，Web API 不必依赖 System.Web。

请记住，Web API 根本不位于 MVC、Web 窗体或 ASP.NET 之上。它可以托管在 Web 上下文 (ASP.NET) 中，但也可以是自托管的（控制台、WPF 等），甚至可以托管在内存中（不使用端口，对于轻量级端到端测试很有用）。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-20T18:27:27.293

`MapRoute`用于“普通” ASP.NET MVC 控制器，而`MapHttpRoute`用于 Web API 控制器。

# objective-c - 在视图控制器之间传递图像

> ID：12042855
> 
> 赞同：1
> 
> 时间：2012-08-20T18:14:38.187
> 
> 标签：objective-c, ios, image, cocoa-touch

首先，我是 XCode 和编程新手，而且我的英语并不完美。我有 2 个视图控制器，L1ViewController 和 ImageViewController。在 L1ViewController 中，我有几个以图像为背景的按钮。我想要做的是，当您单击一个按钮时，该操作会将密码和图像传递给 Image View 控制器。在 ImageViewController 中，我有一个 UITextfield 和一个 UIImageView。传递密码字符串工作正常。但是通过图像似乎比我想象的要难。UIImageView 不显示图像。

在我的 L1ViewController.h 我创建了一个

```
 -(IBAction)img1; 
```

在我的 L1ViewController.m 中，这是传递图像和密码字符串的代码：

```
 -(IBAction)img1;
{
ImageViewController *img = [[ImageViewController alloc] initWithImage:[UIImage imageNamed:@"myimage.jpg"] AndAnswerString:@"mypassword"];   
[self presentModalViewController:img animated:NO];
} 
```

在我的 ImageViewController 我有这个代码来接收字符串和图像：

```
-(id)initWithImage:(UIImage *)inImage AndAnswerString:(NSString *)inAnswerString
{
    if (self = [super init])
    {
        [inImage release];
        [self setImage:inImage];
        [self setAnswerString:inAnswerString];

    }
    return self;
} 
-(void)setImage:(UIImage *)inImage
{
[inImage release];
[logoField setImage:inImage]; 
}

-(void)setAnswerString:(NSString *)inAnswerString
{
answerString = inAnswerString;
} 
```

在我的 ImageViewController.h 我有

```
@interface ImageViewController : UIViewController { 
IBOutlet UITextField *answerField;
IBOutlet UIImageView *logoField;

NSString *answerString;
 }

@property (nonatomic, retain)NSString *logo;
-(id)initWithImage:(UIImage *)inImage AndAnswerString:(NSString *)inAnswerString;
-(void)setImage:(UIImage *)inImage;
-(void)setAnswerString:(NSString *)inAnswerString;

-(IBAction)enterAnswer;
-(IBAction)back; 
```

为什么我的答案字符串工作正常但显示我的 ImageViewController 没有图像？同样，我是 XCode 的新手，也许这只是一个愚蠢的错误。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:23:29.297

当你的视图控制器被初始化时，视图还没有被加载。（这发生在您的`viewDidLoad:`方法被调用之前。）保存字符串是有效的，因为您没有尝试将其直接放入`answerField`，但是对于图像，您尝试`logoField`过早更新。

如果文本有效，则您必须在某处分配`answerString`给`answerField`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:30:00.163

您已发布“inImage” - 在您使用之前，请删除代码“[inImage release];” 从所有功能中，使用该图像后释放它

所以新代码是..以下

```
 -(id)initWithImage:(UIImage *)inImage AndAnswerString:(NSString *)inAnswerString
{
if (self = [super init])
{
    //[inImage release];
    [self setImage:inImage];
    [self setAnswerString:inAnswerString];

}
return self;
} 
-(void)setImage:(UIImage *)inImage
{
[logoField setImage:inImage]; 
[inImage release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T19:12:15.337

好的..我认为您必须将其作为 id 传递，而不是 UIImage 女巫不起作用：在您的 secondUIViewController.h 中：

```
@property (nonatomic, strong) id image; 
```

在 secondViewController.m

```
@synthesize image = _image; 
```

# php - Javascript for循环中的PHP计数器

> ID：12042857
> 
> 赞同：-1
> 
> 时间：2012-08-20T18:14:51.110
> 
> 标签：php, javascript, html

我正在尝试实现一个 javascript for 循环，其中一个 php 变量正在计数（phpVar++）每个循环。然而，从 0 开始的变量总是以 1 结束，即使循环循环了多次。

这不可能吗？

```
<script>
    <?php  $totalMarkers=0; ?>
    for (var i = 0; i < markers.length; i++) {
      <?php $totalMarkers=$totalMarkers+1; ?>
    }
    <?php echo $totalMarkers ?>   //this always prints "1"
</script> 
```

我正在尝试这样做，以便可以在 HTML 正文的不同位置打印 $totalMarkers。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T18:18:28.750

Javascript 在客户端计算机上执行，PHP 在服务器上执行。因此，在页面完全加载到用户浏览器中之前，您的循环不会运行——此时，不会执行任何 PHP。

呈现该页面时，流程如下：

`<script>`<-- 从字面上获取输出

`<?php $totalMarkers=0; ?>`<-- 没有输出

`for (var i = 0; i < markers.length; i++) {`<-- 按字面意思输出

`<?php $totalMarkers=$totalMarkers+1; ?>`<-- 没有输出

`}`< -- 按字面意思输出

`<?php echo $totalMarkers ?>`<-- 输出 1

`</script>`<-- 按字面意思输出

如果您要查看源代码，您会看到：

```
<script>
    for (var i = 0; i < markers.length; i++) {
    }
    1   //this always prints "1"
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T18:18:52.173

PHP 在*服务器*上运行。JavaScript 在*浏览器*中运行。

您的服务器运行 PHP，然后将其发送到您的浏览器：

```
<script>
        for (var i = 0; i < markers.length; i++) {
      }
    1</script> 
```

JavaScript 影响 PHP 的唯一方法是使用 AJAX 或类似方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T18:18:44.733

PHP 运行服务器端，JavaScript 运行客户端（忽略 Node.JS 等）

您的浏览器收到的 HTML 如下所示：

```
<script>
    for (var i = 0; i < markers.length; i++) {
    }
    1   //this always prints "1"
</script> 
```

所以，我不确定你想在这里完成什么，但你必须记住 PHP 和 JavaScript 不能直接交互。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T18:19:47.767

你不能像那样混合 PHP 和 JavaScript。它不是那样工作的。

PHP在 JavaScript*之前运行。*所以，这些行：

*   `<?php $totalMarkers=0; ?>`
*   `<?php $totalMarkers=$totalMarkers+1; ?>`
*   `<?php echo $totalMarkers ?>`

在您的浏览器看到它*之前*运行。

您的浏览器只会看到：

```
for (var i = 0; i < markers.length; i++) {
}
1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T18:18:53.543

不，这是不可能的——如果不使用一堆看起来完全不适合你的 AJAX 就不行。PHP 在执行任何 JavaScript 之前就已执行。PHP 是服务器端的，JavaScript 是客户端的。因此，JavaScript 无法控制 PHP。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T18:19:48.630

你不能那样做。PHP 是一个超文本预处理器。它在任何 Javascript 代码**之前执行。**您实际拥有的代码需要 $totalMarkers 并将其初始化为 0。然后它添加一个然后它回显......它将始终为 "1" ！

如果您想使用 PHP 操作它，您需要使用 Javascript 变量进行计数，然后将其发送到服务器。

# javascript - Create tree hierarchy from csv in d3.js

> ID：12042858
> 
> 赞同：5
> 
> 时间：2012-08-20T18:14:53.380
> 
> 标签：javascript, csv, charts, d3.js

I've read a number of questions on similar subjects, but none of the answers seem to work for my use case (or I'm just really confused).

I have a csv file dump from a database and I want to show the data's hierarchy using the Dendrogram example found here [http://mbostock.github.com/d3/ex/cluster.html](http://mbostock.github.com/d3/ex/cluster.html)

My csv file looks like this:

```
groupGenre,basicGenre,value
Maps,Atlases (Geographic),10
Catalogs,Auction catalogs,28
No larger group,Academic dissertations,451
No larger group,Account books,1
No larger group,Acrostics,56
No larger group,Addresses,62
No larger group,Advertisements,790
No larger group,Allegories,35
No larger group,Almanacs,3401
No larger group,Alphabets,100
No larger group,Anagrams,4
No larger group,Anthologies,133
No larger group,Anti-slavery literature,1

```

where value is the number of books published in that genre.

Here is the code I've adapted and now revised based on suggestions below It can also be found at [http://dev.stg.brown.edu/projects/Egan/Vis/tree/tree.html](http://dev.stg.brown.edu/projects/Egan/Vis/tree/tree.html)

```
var width = 960,
    height = 2000;

var tree = d3.layout.tree()
    .size([height, width - 160]);

var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.y, d.x]; });

var vis = d3.select("#chart").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(40, 0)");

d3.csv("../data/genreNested.csv", function(csv) {

  var nodes = tree.nodes(makeTree(csv));

  var link = vis.selectAll("path.link")
      .data(tree.links(nodes))
    .enter().append("path")
      .attr("class", "link")
      .attr("d", diagonal);

  var node = vis.selectAll("g.node")
      .data(nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })

  node.append("circle")
      .attr("r", 4.5);

  node.append("text")
      .attr("dx", function(d) { return d.values ? -8 : 8; })
      .attr("dy", 3)
      .attr("text-anchor", function(d) { return d.values ? "end" : "start"; })
      .text(function(d) { return d.key; });
});

//NEW Function to Build Tree from CSV data
function makeTree(nodes) {
    var nodeByGenre = {};

    //index nodes by genre in case they are out of order
    nodes.forEach(function(d) {
        nodeByGenre[d.basicGenre] = d;
    });

    //Lazily compute children.
    nodes.forEach(function(d) {
        var groupGenre = nodeByGenre[d.groupGenre];
        if (groupGenre.children) groupGenre.children.push(d);
        else groupGenre.children = [d]
    });

    return {"name": "genres", "children": nodes[0]}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:29:21.107

The first issue looks to be that you are passing a function to `entries` instead of an array which it is expecting as per [the docs](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_nest). Try passing the parameter `csv` to the `entries` method instead.

```
function makeTree(csv) {
   var data = d3.nest()
        .key(function(d) {return d.genre; })
        .key(function(d) {return d.groupGenre; })
        .entries(csv);

   return data;
} 
```

The second issue is that your `makeTree` function is not returning a tree structure like `tree.nodes` is expecting, see docs [here](https://github.com/mbostock/d3/wiki/Tree-Layout#wiki-nodes). You want to create an object like the following with your `makeTree` method.

```
 var root = 
 {
 "basicGenre": "Maps",
 "value" : 5,
 "children": [
  {
   "basicGenre": "Atlases (Geographic)",
   "value" : 10
   "children": [
    {
     "basicGenre": "Atlases 1",
     "children": []
    },
    {
     "basicGenre": "Atlases 2",
     "children": []
    }
   ]
  }
 ]
} 
```

Basically you need to create a tree like heiarchary based on the `groupGenre` and `basicGenre` all underneath some all encompassing root node.

You may also want to look at the [this SO question](https://stackoverflow.com/questions/11934862/d3-use-nest-function-to-turn-flat-data-with-parent-key-into-a-hierarchy) as it deals with creating a proper object to pass to `tree.nodes`.

Here is a working **[JSFiddle](http://jsfiddle.net/brantolsen/cNaCD/)** using your updated code.

# c# - 获取特定位置的控制台背景

> ID：12042859
> 
> 赞同：0
> 
> 时间：2012-08-20T18:14:53.887
> 
> 标签：c#, .net, console

我有一个用 C# 编写的非常简单的控制台应用程序。打印文本时更改背景和前景色非常容易，但我想知道是否有一种简单的方法可以确定特定位置的背景和前景色。

这不是必要的功能，所以我对P-Invoke等不感兴趣。如果不能在1分钟内完成，那我就离开它。

**编辑**

我正在寻找类似的东西

```
Console.GetBackground(0,0); 
```

我在 MSDN 文档中没有看到类似的东西，但我希望我可能错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:22:40.533

[在这里](http://msdn.microsoft.com/en-us/library/system.console.foregroundcolor.aspx)寻找前景色，[在这里](http://msdn.microsoft.com/en-us/library/system.console.backgroundcolor.aspx)寻找背景。并`setcursorposition`用于改变控制台位置。

希望它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T01:28:35.570

.NET 中没有内置功能能够提供以前在控制台中任意位置使用的前景色和背景色。

感谢offlinehacker提供了Windows API 文档[链接的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682091%28v=vs.85%29.aspx)[评论。](https://stackoverflow.com/questions/12042859/get-the-console-background-at-a-particular-position/12042961#comment16083314_12042961)虽然这可能提供了一个解决方案，但实施对我来说太复杂了。（我放弃了努力，但如果成本效益比发生变化，我可能会再试一次。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:31:08.907

好吧，你可以创建一个类来获取控制台的宽度和高度，映射每个可能的坐标，然后跟踪每个颜色变化和颜色变化的坐标。这样，您就可以遍历到您感兴趣的点，然后查看控制台的颜色。

实施起来不会是一件很长的事情，我认为......认为可能有更好的方法。

# php - GET ID 在mysql中查找并显示信息

> ID：12042861
> 
> 赞同：0
> 
> 时间：2012-08-20T18:15:05.823
> 
> 标签：php, get, get-request

我正在尝试使用 GET id 从 mysql 数据库中获取信息。我使用以下代码来检查 id 是什么。

```
 $qry    = "SELECT name,country FROM databasetable WHERE uid=$id"; 
```

我收到错误，这意味着它找不到具有指定 uid 的任何条目。如果我将 uid 更改为仅数字，那么它可以查找它。示例： ?id=1000000000 工作正常， ?id=1kKV0LEfMi 。找不到请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:19:18.163

您需要在 $id 周围添加引号以允许查询中的字符串

```
$qry= "SELECT name,country FROM databasetable WHERE uid='$id'"; 
```

顺便提一句。你为什么要这样做`$id = htmlspecialchars($_GET['id']);`？

这应该是`$id = mysql_escape_string($_GET['id']);`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:19:27.790

```
 '$id'  <-- first put the variable in single quotes. good practice. 
```

其次，如果您不使用特殊字符，请将其删除，因为这可能是您的问题。尝试剥离 html 特殊字符并重试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:21:09.490

您需要将查询更改为在 uid 值周围加上单引号，如下所示

```
$qry = "SELECT name,country FROM databasetable WHERE uid='$id'"; 
```

话虽如此，您还确实需要考虑使用较新的 MySQL 连接支持（而不是 mysql_* 函数），并且您需要学习如何转义数据以防止 SQL 注入。

# ruby - 将stderr和stdout重定向回终端？

> ID：12042873
> 
> 赞同：3
> 
> 时间：2012-08-20T18:16:00.053
> 
> 标签：ruby

目前，我有：

```
$stdout.sync = true
$stderr.sync = true
orig_stdout = $stdout.clone
orig_stderr = $stderr.clone
$stdout.reopen("log.txt","w")
$stderr.reopen("log.txt","w")

#Run some processes that I want to hide from user view

$stdout.reopen(orig_stdout)
$stderr.reopen(orig_stderr)

#Display feedback on processes completing and continue with Ruby program. 
end 
```

但是，当我运行它时，Ruby 不会将 stdout 和 stderr 发送回终端。直到程序进程被杀死，它们才会被显示，然后它们会显示在终端上。

有没有办法立即将 stdout 和 stderr 交换回终端？谢谢

# 编辑：

在#Run 一些我想从用户视图中隐藏的进程中，我还需要在这些进程中用户输入 svn 用户名和 svn 密码。这就是程序不会输出回终端的原因。

我仍然需要能够将所有输出重定向到“log.txt”文件并再次返回，但需要实现 svn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-18T19:09:28.287

这是一个老问题，我发现自己处于同样的境地。我编写了一个扩展和`File`覆盖方法的 Multi-IO 类，我还确保了它的线程安全：`write` `puts``close`

```
require 'singleton'

class MultiIO < File
  include Singleton 
  @@targets = []
  @@mutex = Mutex.new

  def self.instance
    self.open('/dev/null','w+')
  end

  def puts(str)
    write "#{str}\n"
  end

  def write(str)
    @@mutex.synchronize do 
      @@targets.each { |t| t.write str; flush }
    end
  end

  def setTargets(targets)
    raise 'setTargets is a one-off operation' unless @@targets.length < 1
    targets.each do |t|
       @@targets.push STDOUT.clone if t == STDOUT 
       @@targets.push STDERR.clone if t == STDERR
       break if t == STDOUT or t == STDERR  
       @@targets.push(File.open(t,'w+'))
    end
    self
  end

  def close
    @@targets.each {|t| f.close}
  end
end

STDOUT.reopen MultiIO.instance.setTargets(['/tmp/1.log',STDOUT,STDERR])
STDERR.reopen STDOUT 

threads = []

5.times.each do |i| 
  threads.push( 
    Thread.new do
      10000.times.each do |j|
        STDOUT.puts "out#{i}:#{j}"
      end
    end
  )
end

5.times.each do |i| 
  threads.push( 
    Thread.new do
      10000.times.each do |j|
        STDERR.puts "err#{i}:#{j}"
      end
    end
  )
end

threads.each {|t| t.join} 
```

# c#-4.0 - 如何将文本框传递给类属性

> ID：12042876
> 
> 赞同：0
> 
> 时间：2012-08-20T18:16:17.817
> 
> 标签：c#-4.0

我有`Class1`一个属性的下一节课：

```
TextBox nsender;

public TextBox Nsender
{
  get { return nsender; }
  set { nsender = value; }
} 
```

我使用这段代码：

```
Class1 c=new Class1{Nsender=TextBox1}; 
```

但`Nsender`仍然`Null`。

# apache - 在 iis 或 .htaccess 中重定向时隐藏 URL 和数字证书问题

> ID：12042879
> 
> 赞同：0
> 
> 时间：2012-08-20T18:16:33.167
> 
> 标签：apache, .htaccess, redirect, iis-6, reverse-proxy

我有一个页面是**helpdesk.xxx.com**，我需要将其重定向到外部 URL **https://xxx.dyndns.org:49551** 到目前为止，它可以使用此代码

```
RewriteEngine on

AddHandler application/x-httpd-php5s .php

RewriteCond %{HTTP_HOST} ^helpdesk\.xxx\.com$
RewriteRule ^/?$ "https\:\/\/xxx\.dyndns\.org\:\49551" [L] 
```

问题是我需要当用户访问**helpdesk.xxx.com**时，url 在 redirect 之后不会保持不变。

我需要网址保持不变或至少我可以隐藏端口

1.  我尝试使用 iframe，但数字证书有问题，所有浏览器都阻止了该页面
2.  我尝试在 .htaccess 文件中使用反向代理，但我不知道我在做什么
3.  作为外部 dns，我可以管理 php 的配置文件，我只能使用 php 中的 .htaccess 或我自己域中的 iis 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:32:38.190

当`https://xxx.dyndns.org:49551`它在重写规则的目标中时，它告诉 apache 将浏览器重定向到新的 URL。这意味着浏览器地址栏中的 URL 会发生变化。您需要使用反向代理。

理想情况下，您确实希望使用[`ProxyPass`](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)and之类的指令`ProxyPassMatch`，因为您还可以将它们与`ProxyPassReverse`代理传递 cookie 指令配对。后一个指令允许重写位置字段，因此当发送到的请求`https://xxx.dyndns.org:49551`最终作为重定向返回时，重定向的位置将被重写`helpdesk.xxx.com`而不是代理位置。与 cookie 域和路径相同。但是，这些指令只能进入服务器或虚拟主机配置，而不能进入 htaccess 文件。因此，如果您无权访问这些内容，则需要依赖 mod_rewrite。

所以 mod_rewrite 有一个`P`可以使用的标志。它告诉重写引擎将反向代理请求传递给 mod_proxy。这应该可以正常工作，但您不会得到任何位置重写或 mod_proxy 的 cookie 重写。因此，您只需要更改规则以`P`在方括号中包含 a ：

```
RewriteRule ^/?$ "https\:\/\/xxx\.dyndns\.org\:\49551" [L,P] 
```

除非您加载了 mod_proxy 模块，否则这将不起作用。

# git - 确定 cvs2git 如何转换 CVS 树

> ID：12042882
> 
> 赞同：1
> 
> 时间：2012-08-20T18:16:39.177
> 
> 标签：git, cvs2git

我成功地转换并导入了 git 中包含单个 CVS 项目的 8 年历史的 CVS 主树。我试图弄清楚 cvs2git 转换对各个 CVS 存储库做了什么。

幸运的是，我仍然拥有主 CVS 树并且还没有部署任何东西，所以我可以再次执行此操作。我正在寻找可以让我探索我转换的内容的 git 命令，这样我就可以判断我是否应该分别转换每个 CVS 存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:26:37.907

您可以通过针对您的子项目之一`cvs2git`发布来验证所做的事情：`git log`

```
git log -- <directory> 
```

如果该命令返回完整的历史记录，则将`cvs2git`所有子项目合并为一个。根据您的评论，情况似乎如此。

你现在有一个选择：破坏回购或保持结合？这并不总是一个明确的决定，在 CVS 中破坏 repo 的动机与在 git 中不同。

我建议您试用新的 git 存储库几周，不要将其分解为子模块、子树或嵌套存储库。这将使您熟悉常见的 git 命令，并让您尝试一些很棒的 git 功能`git bisect`，例如在嵌套项目时更难使用。此外，我怀疑与 CVS 相比，您会发现分支和合并非常容易。您可能根本不需要破坏存储库。

如果您决定要这样做，请阅读[有关该主题的其他一些答案。](https://softwareengineering.stackexchange.com/q/161293/57052)拆分回购本身很容易。这是来自 github的[简单教程。](https://help.github.com/articles/splitting-a-subpath-out-into-a-new-repo)一个快速的谷歌搜索会出现更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:18:41.900

我刚刚使用 cvs2git 转换了一个有 8 年历史的 CVS 存储库。我发现在生成的存储库中使用“gitk --all”可以让我很好地了解转换是如何进行的。所以，我会向你推荐这个命令。

但是，我没有将整个 CVS 存储库转换为单个 Git 存储库。正如你的，我的 CVS 存储库实际上有几个不同的项目。每个项目都在不同的目录中。所以，我进行了几次转换，每个项目一个。您只需将 cvs2git 指向您感兴趣的 CVS 存储库的特定子目录。它会将目录历史转换为 Git 存储库。所以，我最终得到了几个 Git 存储库，每个项目一个，这为每个存储库提供了更好的历史记录。我建议你也试试这种方法。

# sql-server-2008 - 升级 SQL Server Management Studio Express 2008

> ID：12042887
> 
> 赞同：0
> 
> 时间：2012-08-20T18:17:04.780
> 
> 标签：sql-server-2008

我安装了带有高级服务的 SQL Server 2008 Express R2。我还安装了 SQL Server 2005 标准版

我已将 SQL Server 2008 R2 开发人员版安装到新的报告引擎 - 我在安装选项中选择了管理工作室...

但 Management Studio 仍然是 Express 版本，我无法连接到报告服务器分析服务

我已经通过 SQL Server 安装程序尝试了所有可能的路线，但没有一个允许我更改、删除或添加 Management Studio。

我非常希望避免卸载和重新安装所有内容，如果有人知道单独更新 Management Studio 的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:32:59.470

谢天谢地，我不需要专门针对 SQL Express 进行测试。

我将我的 Express 实例升级到了开发人员版。

完成此操作后，当我转到添加功能时 - 管理工作室高级功能的复选框 - 以前是只读的，现在可以选中。

我检查了它，完成了向导，现在我有一个工作的 Management Studio

# jquery - 使用 jQuery 隐藏输入字段后如何正确定位 HTML5 表单验证错误消息？

> ID：12042889
> 
> 赞同：2
> 
> 时间：2012-08-20T18:17:18.730
> 
> 标签：jquery, html, symfony, symfony-forms, jquery-tokeninput

我有一个带有输入“文本”字段的 Symfony2 表单，我用 jQuery 隐藏它以在其位置使用自动完成字段（输入字段的 css 设置为：“显示：无”）。鉴于该字段是必需的，当我尝试提交表单而不进行选择时，我会收到预期的验证错误消息。但是，我遇到的问题是 HTML5 客户端验证错误显示（冒泡）在浏览器窗口之外（附在左下角），而不是自动完成字段所在的位置。发生这种情况是因为设置错误气泡位置的输入字段被隐藏了。

有没有一种简单的方法可以将错误气泡（来自 HTML5 表单验证）附加到另一个元素，以便它显示在正确的位置？也许将它附加到输入字段的标签而不是小部件？还是使用 jQuery 插件创建的“ul”元素？为了提供一点上下文，我使用了[Loopj Tokeninput jQuery 插件](http://loopj.com/jquery-tokeninput/)，它创建了一个“ul”元素来代替表单的输入“文本”字段（将后者的样式设置为“显示：无”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:51:57.350

这与 Symfony 无关，但与 HTML5 客户端验证有关。

您可以在表单上指定 novalidate 属性以关闭整个表单的客户端验证并滚动您自己的验证错误：

```
<form method="post" action="/foo" novalidate></form> 
```

有关其他选项，请参阅此问题：[禁用 HTML5 表单元素的验证](https://stackoverflow.com/questions/3090369/disable-validation-of-html5-form-elements)

# .net - 十进制 tetbox 的最大长度

> ID：12042892
> 
> 赞同：1
> 
> 时间：2012-08-20T18:17:34.467
> 
> 标签：.net, regex, vb.net

我想创建一个允许用户键入十进制值的文本框。现在要注意的是，我想将 maxlength 赋予整数部分（小数点前的值）所以当我说 maxlength 是 5

用户可以输入

```
.12
12345
12345.67 
```

用户应该无法进入

```
123456
123456.78 
```

我正在处理文本框按键以限制字母

```
If Not Char.IsControl(e.KeyChar) AndAlso Not Char.IsDigit(e.KeyChar) AndAlso e.KeyChar <> "."c Then
    e.Handled = True
End If

' only allow one decimal point
If e.KeyChar = "."c AndAlso TryCast(sender, TextBox).Text.IndexOf("."c) > -1 Then
    e.Handled = True
End If 
```

有人可以帮我解决这个 maxlength 部分吗？感谢任何帮助和指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:22:11.173

您将无法使用该`MaxLength`属性执行此操作，文本框只是在查看`String.Length`，而您想要实际将字符串解析为十进制值并对其进行一些边界检查。

您需要在按键事件中执行此操作。最简单的做法是执行以下操作：

```
var value = Decimal.Parse(textBox1.Text);
if(value >= 99999)
     e.Handled = true; 
```

这不是您可能想要的确切算法，但您明白了。

# silverlight - Silverlight DataPager 从不给我大于 1 的页数。

> ID：12042893
> 
> 赞同：0
> 
> 时间：2012-08-20T18:17:34.997
> 
> 标签：silverlight, pagination

我已经决定 RIA 服务的局限性太大，我正在尝试扮演我自己的服务器端分页的角色。我早就切换到普通的旧 WCF。一切都进行得很顺利。具有讽刺意味的是，我唯一的问题是前端。我正在尝试使`DataPager`控件正常工作。我本可以（而且似乎应该）创建了自己的`DataPager`控件，但我不想花时间写出像现在这样好的东西`DataPager`（控件本身，而不是客户端查询的废话）。显然，我面临的麻烦是在寻呼机中设置页数。数据寻呼机似乎自动绑定到 RIA 服务。我已经尝试创建一个实现`IEnumerable`和`IEnumerable<T>`只引用一个计数（即返回默认值（T）的n）。我试过使用整数数组。所有这些技术都非常浪费，更重要的是，它们不起作用。我已经到了编写自己的数据寻呼机比使用这个要快得多的地步。所以我想我会问我做错了什么（即，尽管我知道最终我的错误在于使用这个控件而根本没有心爱的 RIA 客户端查询）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:27:47.767

我想到了。我没有使用`PagedCollectionView`.

# eclipse - 将 Git 存储库视为 Eclipse 中的常规项目

> ID：12042898
> 
> 赞同：0
> 
> 时间：2012-08-20T18:18:07.257
> 
> 标签：eclipse, debugging, github

我最近在 Github 上创建了一个新的存储库。我想使用 Eclipse Juno 编辑和运行/测试它。我已经成功导入它并遵循了与 EGit 一起使用的所有说明，但由于某种原因，每当我尝试在 Eclipse 上的 Git 存储库中调试或运行文件时，它都会强制我执行“Ant Build”（随后告诉我不可以找到 Ant 构建文件）。我在网上找到了一个解决方案，该解决方案涉及更改文件/存储库的调试首选项，但是当我在我的存储库中打开文件的首选项时，我找不到任何与调试相关的内容。

有谁知道如何让 Eclipse 在调试和运行方面像对待常规项目一样对待 Git 存储库？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:00:55.603

我猜您的项目没有被识别为 Java 项目。您将需要对文件进行更改`.project`并添加一个`.classpath`文件。

在您的`.project`文件中，将其添加到以下`buildSpec`部分：

```
<buildCommand>
    <name>org.eclipse.jdt.core.javabuilder</name>
    <arguments>
    </arguments>
</buildCommand> 
```

如果没有`buildSpec`部分，则添加以下内容：

```
<buildSpec>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
</buildSpec> 
```

并创建一个简单的`.classpath`文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
  <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
  <classpathentry kind="src" path="src"/>
  <classpathentry kind="output" path="bin"/>
</classpath> 
```

一旦你有了它，你可以在`Project`->中对其进行更改`Java Build`。

# mysql - 如何获取用户完成的帖子数量

> ID：12042902
> 
> 赞同：-3
> 
> 时间：2012-08-20T18:18:13.547
> 
> 标签：mysql, sql, phpmyadmin

这是我的问题：我有 4 个表，其中包含用户完成的帖子（例如 CatA、CatB、CatC 和 CatD，每个表都包含 created_by 列）。我的要求是从表中获取所有可用的用户`USER`以及帖子计数（帖子的总和）。

我正在努力寻找过去 2 天的答案，但我仍然一无所知。

任何想法都非常感谢。

* * *

```
SELECT    u.username,
          a.cnt + b.cnt + c.cnt + d.cnt AS total_posts
FROM      users u
LEFT JOIN (SELECT created_by, COUNT(*) AS cnt FROM CatA GROUP BY created_by) a
          ON u.id = a.created_by
LEFT JOIN (SELECT created_by, COUNT(*) AS cnt FROM CatB GROUP BY created_by) b
          ON u.id = b.created_by
LEFT JOIN (SELECT created_by, COUNT(*) AS cnt FROM CatC GROUP BY created_by) c
          ON u.id = c.created_by
LEFT JOIN (SELECT created_by, COUNT(*) AS cnt FROM CatD GROUP BY created_by) d
          ON u.id = d.created_by
ORDER BY total_posts DESC 
```

这会返回我在顶部的总帖子数（与用户帖子数无关），如下所示，而不是每个用户的帖子数

> 用户名 | 用户1 | 用户2 | 用户 3 总帖子
> | 11020（帖子总数）| 空 | 空 | 等等

更多信息：

```
SELECT created_by, COUNT(*) AS cnt FROM CatA GROUP BY created_by 
```

这让我回想起：

> created_by | 22 | 26 | 88 | 90
> 厘米 | 6 | 20 | 15 | 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:25:02.353

因此，您似乎为每个类别都有一个单独的表（顺便说一句，这实际上不是最优化的设计）。您可以做的是获取所有用户的帖子数：

```
SELECT    u.*,
          a.cnt + b.cnt + c.cnt + d.cnt AS total_posts
FROM      users u
LEFT JOIN (SELECT user_id, COUNT(*) AS cnt FROM CatA GROUP BY user_id) a
          ON u.user_id = a.user_id
LEFT JOIN (SELECT user_id, COUNT(*) AS cnt FROM CatB GROUP BY user_id) b
          ON u.user_id = b.user_id
LEFT JOIN (SELECT user_id, COUNT(*) AS cnt FROM CatC GROUP BY user_id) c
          ON u.user_id = c.user_id
LEFT JOIN (SELECT user_id, COUNT(*) AS cnt FROM CatD GROUP BY user_id) d
          ON u.user_id = d.user_id 
```

# django - 一页上的Django注册和密码重置

> ID：12042906
> 
> 赞同：0
> 
> 时间：2012-08-20T18:18:24.653
> 
> 标签：django, django-views, django-login

有没有办法只创建一个页面用于登录和重置密码？

我尝试在模板中使用以下代码创建两个表单页面：

```
<form action="" method="post" id="formLoginIndex">
{% csrf_token %}
<div id="elogin">
    <p><label for="id_username">Login</label>
       {{ form.username }}</p>
    <p><label for="id_password">Пароль</label>
       {{ form.password }}</p>
</div>
    <p class="submit">
        <button type="submit" class="enter">Enter</button>
        {% if next %}
        <input type="hidden" name="next" value="{{ next }}" />
        {% else %}
        <input type="hidden" name="next" value="/electricity/" />
        {% endif %} 
        <button class="forgot" type="button" onclick="$('#forgotten').toggle('normal');">Forgot password?</button>
    </p>
</form>
<div id="forgotten"> 
    <form action="/reset/done/" method="post" id="formForgot">
    {% csrf_token %}
            <p>
            <label for="id_username_forgot">Login</label>
            <input id="id_username_forgot" type="text" name="username" maxlength="30" />
            </p>
            <p>
            <label for="id_email">e-mail</label>
            <input id="id_email" type="text" name="email" maxlength="40" />
            </p>
            <p class="submit">
            <button class="remember" type="submit">Reset</button>
            </p>
    </form>
</div> 
```

和网址：

```
url(r'^login/$', 'django.contrib.auth.views.login'),
url(r'^reset/done/$', 'django.contrib.auth.views.password_reset_done'), 
```

但是仅适用于登录功能。重置不起作用。显然是我做错了。

那么我应该以某种方式将views.password_reset 加载到同一页面中，或者甚至在身份验证视图中重写django，还是有另一种常见的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:47:42.350

关键是您需要一个表单来显示，`PasswordResetForm`并且它的操作应该设置为指向`reset/`
当通过方法提交此表单时`POST`，它被重定向到参数 post_change_redirect 指向的位置，并且您可以在那里向用户显示密码已经改变了。
（如果表单评估为正确，否则，它将重新呈现表单并显示错误）

```
url(r'^reset/$', password_reset, 
        {'template_name':'your_template',   
      'post_change_redirect':'/reset/done/', 
        'extra_context':{'argument':'to tempate'}}, name='some_name'),
url(r'^reset/done/', password_reset_done,   
        {'template_name':'the template to show a success message', 
        'extra_context':{'message':'your password is changed successfully'}},), 
```

查看此函数的默认值，它提供了一些关于它如何工作的很酷的信息，如果没有给出它的默认值：

```
 password_reset  (request, is_admin_site=False,
                 template_name='registration/password_reset_form.html',
                 email_template_name='registration/password_reset_email.html',
                 subject_template_name='registration/password_reset_subject.txt',
                 password_reset_form=PasswordResetForm,
                 token_generator=default_token_generator,
                 post_reset_redirect=None,
                 from_email=None,
                 current_app=None,
                 extra_context=None) 
```

# java - 如何使用 JFreeChart 生成平滑曲线图？

> ID：12042912
> 
> 赞同：3
> 
> 时间：2012-08-20T18:18:44.733
> 
> 标签：java, jfreechart

我正在使用 jfree 图表生成折线图，但我能够生成看起来不太好的折线图。我想生成如下图像

![图片](../Images/3194578da8748276caa61015093967c0.png)

有人可以提出任何解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:35:31.030

如果您已经有折线图，则必须将使用的渲染器更改为`XYSplineRenderer`. 请参阅[此处](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYSplineRenderer.html)的 javadocs 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:41:51.130

[`ArcTest`](https://stackoverflow.com/a/6620017/230513)展示了如何使用[`XYShapeAnnotation`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/XYShapeAnnotation.html)可以是 any[`Shape`](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html)的。

# c# - 使用 c# 检测用户是否是 Windows 8 中的管理员

> ID：12042916
> 
> 赞同：3
> 
> 时间：2012-08-20T18:18:53.687
> 
> 标签：c#, authorization, windows-8

我有一些适用于大多数 Windows 版本的代码来检测当前用户是否以管理员身份运行。我看到我们的客户使用组策略的问题，这不起作用。现在我已将我的工作站升级到 Windows 8，并且代码不再有效。这是代码：

```
[DllImport("advapi32.dll")]
private static extern int LogonUser(String lpszUserName, String lpszDomain, String lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken);
private const int Logon32LogonInteractive = 2;
private const int Logon32ProviderDefault = 0;

public void Run() {
    var _token;    
    LogonUser(Username, Domain, Password, Logon32LogonInteractive, Logon32ProviderDefault, ref _token);
     _windowsIdentity = new WindowsIdentity(_token);
     WindowsPrincipal myPrincipal = new WindowsPrincipal(_windowsIdentity);
     var isAdmin = myPrincipal.IsInRole(WindowsBuiltInRole.Administrator);
} 
```

在这种情况下，当 isAdmin 应该为真时，它是假的。如果有人知道进行此检查的正确方法，该方法适用于所有版本的 Windows，那就太好了。如果有人知道如何更改此代码以便它在使用组策略的域中工作，那就更好了。

我试图从我的班级复制适当的代码。显然这不会编译，但如果我错过了什么，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:20:41.393

如果在 Windows Vista 及更高版本上启用了 UAC，您的代码将不起作用。[引用](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsbuiltinrole)文档：

> **注意：**在 Windows Vista 中，用户帐户控制 (UAC) 确定用户的权限。如果您是 Built-in Administrators 组的成员，则会为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。默认情况下，您是标准用户角色。当您尝试执行需要管理权限的任务时，您可以使用“同意”对话框动态提升您的角色。执行 IsInRole 方法的代码不显示同意对话框。如果您是标准用户角色，即使您在内置管理员组中，代码也会返回 false。在执行代码之前，您可以通过右键单击应用程序图标并指示您要以管理员身份运行来提升您的权限。

`isAdmin`除非用户运行提升，否则将为假。您可能会看到这个问题：[在 .NET/C# 中测试进程是否具有更多管理权限](https://stackoverflow.com/questions/1089046/in-net-c-test-if-user-is-an-administrative-user)。

您可以尝试对您想要做的特定事情使用命令式或声明式**安全要求，而不是检查组成员身份。**如果您缺少所需的权限，这些将引发 SecurityException，您可以捕获并处理这些权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:55:08.083

尝试将 Logon32LogonInteractive 值更改为 3 - 这是 NETWORK_LOGON

# excel - 连接一个字符串，然后使用 ="concatenated string" 执行字符串语句

> ID：12042917
> 
> 赞同：3
> 
> 时间：2012-08-20T18:18:59.827
> 
> 标签：excel, excel-formula

我正在尝试创建一个字符串然后执行它。我的意思是，将“A”和“20”连接起来，然后在该单元格中获取 A20 的值。

例子：

```
="A" & "20" -> doesn't work

=(CONCATENATE("A", "20")) -> doesn't work 
```

excel有执行功能吗？例子

```
=EXECUTE("string value") 
```

所以我可以创建一个字符串，它的执行类似于我输入`=string`值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T18:29:07.697

不确定您要做什么 - 但如果您要获取单元格 A20 中的值，那么您想要这样做：

```
=INDIRECT((CONCATENATE("A", "20")),TRUE) 
```

如果您只是尝试连接这两个字符串，那么您正在做的事情很好 - 它应该可以工作。

如果您尝试将“A20”的字符串值插入单元格，那么您需要使用公式在单元格上复制和粘贴特殊值 - 这会将您的函数简单地转换为它们的实际结果值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:24:45.450

'Indirect' 函数正是您要寻找的： `=INDIRECT(CONCATENATE("A","20"))` 它返回文本字符串的引用。这是一篇关于该功能的好 MSDN 文章：http: [//support.microsoft.com/kb/151323](http://support.microsoft.com/kb/151323)

# sql-server - WHERE 子句中的 SQL Server Case 语句

> ID：12042918
> 
> 赞同：1
> 
> 时间：2012-08-20T18:19:03.737
> 
> 标签：sql-server, sql-server-2008, tsql, case

我试图在 WHERE 子句中搜索 CaseStatement。但我没有发现与我的情况相似的情况。

下面是我在 WHERE 子句中带有 CASE 语句的 SQL 语句。如果**PartName = B**，那么我应该应用（**RecoveraleFlag = 1**）条件以及其他条件。Else 此条件不适用，但所有其他条件应保留。

```
FROM Rec.Communications A
          INNER JOIN REC.CommunicationTypes B ON A.CommunicationTypeKey = B.CommunicationTypeKey   
          INNER JOIN occ.Cases c ON a.CaseId = c.CaseId
          INNER JOIN occ.Claims cl on a.CaseId = cl.CaseId
          INNER JOIN ops.Concepts d ON c.ConceptKey = d.ConceptKey
          INNER JOIN OPS.Regions f ON d.MODSRegionKey = f.MODSRegionKey 
          INNER JOIN COM.RepriceRequestOccurrences e ON a.CommunicationId = e.CommunicationId
          INNER JOIN occ.Providers prv ON c.MODSProviderKey = prv.MODSProviderKey
  WHERE 
**(
    CASE WHEN f.PartName = 'B' and e.RecoverableFlag = 1 then 1
    ELSE 0
  END
  ) = 1**
  AND 
  b.CommunicationTypeCode = 'RREQ'
      AND f.Region = @Region
      AND a.CurrentFlag = 1 
```

如果 Partname = B，则 where 子句中的 Case 语句可以正常工作。对于 Partname A，这将是 0=1 -**始终为 false**。因此，它不返回任何数据。任何人都可以提供任何替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:22:15.937

作为一个案例陈述，你可以这样写：

```
CASE WHEN f.PartName = 'B' and e.RecoverableFlag = 1 then 1
     WHEN f.ParName = 'A' then 1
     ELSE 0   END   ) = 1 
```

这是你想要的逻辑吗？

许多人会认为 case 语句在这里无关紧要，而是使用：

```
WHERE ((f.PartName = 'B' and e.RecoverableFlag = 1) or (f.partName <> 'B')) . . . 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T18:22:05.623

```
WHERE 
    (
        f.PartName <> 'B' 
        OR e.RecoverableFlag = 1
    )
    AND b.CommunicationTypeCode = 'RREQ'
    AND f.Region = @Region
    AND a.CurrentFlag = 1 
```

您可能会发现阅读[德摩根定律](https://en.wikipedia.org/wiki/De_Morgan%27s_laws)很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:29:25.740

我认为您根本不需要案例陈述。以下应该可以工作...

```
 WHERE  f.PartName = 'B' 
     And e.RecoverableFlag = 1 
     AND b.CommunicationTypeCode = 'RREQ'       
     AND f.Region = @Region       
     AND a.CurrentFlag = 1 
```

但是，如果您想在 where 子句中使用 case 语句，请尝试将其放在列名中比较运算符的“另一端”，以便查询可以在不进行表扫描的情况下对其进行处理......例如，

```
 Where f.Partname = 
       Case b.CommunicationTypeCode 
          When 'RREQ' Then 'B' 
          When 'NOTREQ' Then 'C'
          When 'OPT' Then 'D' 
          Else 'F' End 
```

# javascript - 如果 .htaccess 文件中只写了一行代码，我所有的 css 和 js 都不起作用，如何解决？

> ID：12042919
> 
> 赞同：-3
> 
> 时间：2012-08-20T18:19:09.800
> 
> 标签：javascript, css, .htaccess, external

如果 .htaccess 文件中只写了一行代码，我所有的 css 和 js 外部文件都不起作用（它们没有被浏览器读取或被浏览器错误地读取），如何修复它？如果我在 .htaccess 中写一行，是否有某种配置会删除所有以前的 mime？

**详情**：

服务器：Apache
Mimes 工作：所有 html、htm 和 php 文件都工作。
到目前为止失败的 mime：css 和 js。它们目前被加载为带有强制标题的 php 文件。
.htaccess 中的文本：我不需要在 htaccess 上写任何具体的内容，任何代码的任何单行都会使 css 和 js 失败。（单行代码示例：“ServerSignature Off”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:22:12.640

例如，如果该行恰好是缩小脚本的 RewriteURL，那么它不会发送正确的 Content-Type 标头，那么是的，它可能只是：D

# prolog - 如何绕过将空列表分配给 [X|L] 形式的过程参数？

> ID：12042923
> 
> 赞同：1
> 
> 时间：2012-08-20T18:19:21.290
> 
> 标签：prolog

我有以下程序：

```
% finds all members in sorted list L1 that are not in the sorted L2 
%   and puts them in NL
make_list(L1,L2,NL):-
    make_list(L1,L2,NL,x).
make_list([],_,[],_):-!.

% X represents the last value parsed from L1
make_list(L1,[],L2,X):-!,
    make_list(L1,[99999999],L2,X).

make_list([X1|L1],[X2|L2],[X3|NewL],Last):-
    (
        (X1<X2,
         X1 \= Last,
         X3=X1,!,
         make_list(L1,[X2|L2],NewL,X1);
         X1<X2,!,
         make_list(L1,[X2|L2],[X3|NewL],X1)
         )
    );
    (
        X1=X2,!,
        make_list(L1,[X2|L2],[X3|NewL],*)
    );
    make_list([X1|L1],L2,[X3|NewL],*). 
```

我的问题是，当最后一个值相同（即：）`?- make_list([1,2],[2],L).`时，代码不起作用，因为

```
make_list([X1|L1],L2,[X3|NewL],*). 
```

和

```
make_list(L1,[X2|L2],[X3|NewL],*) 
```

它将包含至少一个变量（第三个列表）的列表传递给`make_list([],_,[],_)`. 有一条注释说明了程序的作用。如何让代码做它应该做的事情？

我还在这里问了一个关于相同但完全不起作用的代码的问题：[括号是如何工作的？](https://stackoverflow.com/questions/11915425/how-do-parenthesis-work).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:57:38.893

解决此问题时应考虑六种互斥情况：

1.  您用完了两个列表中的元素
2.  您在第一个列表中用完了元素，但在第二个列表中没有
3.  第二个列表中的元素用完了，但第一个列表中没有
4.  两个列表都至少有一个元素，并且头部元素匹配
5.  两个列表都至少有一个元素，并且第一个列表的头元素更小
6.  两个列表都至少有一个元素，并且第一个列表的头元素更大

这六种组合涵盖了您需要编写的规则。

前两种情况可以由一条规则涵盖：

```
make_list([], _, []). 
```

这意味着如果第一个列表为空，则不会有任何内容可添加到输出列表中。

第三种情况也很简单：如果第二个列表为空，则输出与第一个列表相同：

```
make_list(L1, [], L1). 
```

案例四稍微不那么琐碎：如果头统一，同时放下它们，并解决一个较小的子问题：

```
make_list([H|T1], [H|T2], NL) :-
    make_list(T1, T2, NL). 
```

案例五将第一个列表的头部插入到输出中，案例六跳过第二个列表的头部：

```
make_list([H1|T1], [H2|T2], NL) :-
    H1 < H2,
    make_list(T1, [H2|T2], N2),
    NL = [H1|N2].

make_list([H1|T1], [H2|T2], NL) :-
    H1 > H2,
    make_list([H1|T1], T2, NL). 
```

请注意，当第一个列表包含重复项且第二个列表不包含相应元素的重复项时，此解决方案无法按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:41:06.437

```
% finds all members in sorted list L1 that are not in the sorted L2 
% and puts them in NL

make_list(L1,L2,NL):-
    make_list(L1,L2,NL,x).

make_list([],_,[],_):-!.

% X represents the last value parsed from L1
make_list(L1,[],L2,X):-!,
    make_list(L1,[99999999],L2,X). 
```

这里的问题是`NewL`，`[X3|NewL]`当`L1`为空时，由于无法分配`make_list([],_,[],_):-!.`而失败`[X3|NewL]``[]`

```
make_list([X1|L1],[X2|L2],NewL,Last):-
    X1<X2,
    X1 \= Last,
    NewL = [X3|NewL2],X3=X1,
    make_list(L1,[X2|L2],NewL2,X1),!
    ;
    X1<X2,
    make_list(L1,[X2|L2],NewL,X1),!.

make_list([X1|L1],[X1|L2],NewL,Last):-!,
    make_list(L1,[X1|L2],NewL,Last). 
```

接下来的两种情况是 when `X1>X2`,`X2`无论如何都会被忽略，`X1`仅当`X1=Last`

```
make_list([X1|L1],[_|L2],NewL,X1):-!, % X1>X2
    make_list(L1,L2,NewL,X1).

make_list([X1|L1],[_|L2],NewL,Last):- % X1>X2
    make_list([X1|L1],L2,NewL,Last). 
```

# javascript - 将值从 C++ 发送到 javascript

> ID：12042924
> 
> 赞同：0
> 
> 时间：2012-08-20T18:19:23.030
> 
> 标签：javascript, c++

我对如何解决我的问题有很多疑问。我需要每 500 毫秒将 C++ 中的字符串值传递给 javascript 网页。

我在 C++ 中创建了一个 Windows 窗体，并在 500 毫秒内配置了一个用于发送此字符串的计时器。但我不知道如何将此字符串发送到 javascript 页面...

我正在学习javascript和C++ ...

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:22:01.267

您不能直接从 C++ 程序发送到 JavaScript 页面。JavaScript 需要与它的服务器进行通信 - 定期或使用更实时的方式，如 Web 套接字。然后，服务器可以将任何更新发送到 JavaScript 页面。

为了让您的 C++ 程序与页面通信，它需要将更新发送到服务器，服务器可以将它们传递到页面。

# javascript - 使用 Json 和 Flickr 拉取最新图片和图片描述

> ID：12042927
> 
> 赞同：1
> 
> 时间：2012-08-20T18:19:27.713
> 
> 标签：javascript, html, json, flickr

我一直在使用这个脚本来获取最新的 flickr 图像。

```
<script>
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
{
tags: "mount rainier",
tagmode: "any",
format: "json"
},
function(data) {
$.each(data.items, function(i,item){
  $("<img/>").attr("src", item.media.m).appendTo("#images");
  if ( i == 3 ) return false;
});
});</script> 
```

虽然它非常适合显示带有特定标签的最新图像，但我一直在尝试提取最新的图片描述并给它一个 div id。

我已经尝试过并且失败了。我能够显示一个标题。不幸的是，标题是第一个不是图像的 Json 结果。

谢谢

# css - Firefox css线性渐变属性超过部分div而不是整个div？

> ID：12042929
> 
> 赞同：0
> 
> 时间：2012-08-20T18:19:44.887
> 
> 标签：css, gradient

请看下面的图片。请注意，Chrome 中的内部渐变如何从上到下仅渗透 10 像素，而在 Firefox 中，渐变渗透到整个 div。

我想让 Firefox 渐变表现得像 Chrome 渐变。

Firefox 有没有办法做到这一点？

以下是我的 Chrome 和 Firefox 的 CSS 代码。

```
background: -webkit-gradient(linear, 0 0, 0 10, from(#F5F6F7), to(white));
background: -moz-linear-gradient(top, #F5F6F7, white); 
```

**铬合金** ![铬合金](../Images/73b4561f818e3b8a47d4a4186fc97518.png)

**火狐** ![火狐](../Images/23808b40cd5250a58f92395856d28d1f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:30:57.840

我想你可能正在寻找这样的东西：

```
background: -moz-linear-gradient(top, #CCC 0%, #FFFFFF 10%); 
```

您只是缺少*颜色停止*参数。

现场演示：http: [//jsfiddle.net/kd8Vf/3/](http://jsfiddle.net/kd8Vf/3/)

我将颜色更改为#CCC，将背景更改为黑色，以便您看得更清楚。相应地更改颜色。

另请参阅：[https ://developer.mozilla.org/en-US/docs/CSS/linear-gradient](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:25:04.343

像这样的东西：[渐变示例](http://www.colorzilla.com/gradient-editor/#034769+0,63add0+10,ffffff+27;Custom)

```
 background: #034769;
background: -moz-linear-gradient(top, #034769 0%, #63add0 10%, #ffffff 27%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#034769), color-stop(10%,#63add0), color-stop(27%,#ffffff));
background: -webkit-linear-gradient(top, #034769 0%,#63add0 10%,#ffffff 27%);
background: -o-linear-gradient(top, #034769 0%,#63add0 10%,#ffffff 27%);
background: -ms-linear-gradient(top, #034769 0%,#63add0 10%,#ffffff 27%);
background: linear-gradient(to bottom, #034769 0%,#63add0 10%,#ffffff 27%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#034769', endColorstr='#ffffff',GradientType=0 ); 
```

# python - PyAPNS SSL3_WRITE_PENDING 错误

> ID：12042932
> 
> 赞同：2
> 
> 时间：2012-08-20T18:19:57.597
> 
> 标签：python, ios, apple-push-notifications

我在我的应用演示中使用 PyAPNS 模块和 Bottle 框架向所有注册的设备发送推送通知。一开始一切正常，我遵循了 PyAPNS 的手册。但是一段时间后，我的服务在服务器的后台运行，我开始收到错误：

SSLError: [Errno 1] _ssl.c:1217: error:1409F07F:SSL routines:SSL3_WRITE_PENDING:bad write retry

重新启动服务后一切正常。我该怎么办？或者我应该如何在后台运行这样的服务？（现在我只是在另一个屏幕上运行它）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T05:14:41.603

我在使用这个库时遇到了同样的问题（我假设你实际上正在使用[https://github.com/simonwhitaker/PyAPNs](https://github.com/simonwhitaker/PyAPNs)，这就是我正在使用的。至少还有一个其他的库那里有一个相似的名字，但我认为你不会使用它）。

AFAIK 当您使用简单的通知服务时，APNS 服务器可能会挂断您，原因包括：使用不正确的令牌、请求格式错误等。或者如果您的网络连接中断或您的连接可能会中断。PyAPNS 代码现在不能非常优雅地处理这样的挂断，即使它已关闭，它也会尝试重新使用套接字。我看到 SSL3_WRITE_PENDING 错误的经验是，我总是会在套接字上看到诸如“错误：[Errno 110] 连接超时”之类的错误，然后当 PyAPNS 尝试重新使用套接字时，我会收到 SSL3_WRITE_PENDING 错误。

如果您看到服务器挂断，并且想知道它为什么这样做，那么使用增强版的 APNS 会有所帮助，这样服务器就会写回有关您做错了什么的信息。

碰巧的是，目前有一个拉取请求（https://github.com/simonwhitaker/PyAPNs/pull/23/files），它既使 PyAPNS 使用增强的 APNS 又更优雅地处理断开连接。您会看到我对该拉取请求发表了评论，并创建了我自己的 PyAPNS 分支，它以最适合我的用例的方式处理断开连接。

因此，您可以使用拉取请求中的代码来找出 APNS 服务器挂断您的原因。和/或您可以使用它来简化故障恢复，因此如果抛出异常，您只需重试发送，而不必重新创建 APNS 对象。

希望拉取请求将很快合并到 master （可能包括我的更改）。

# cuda - 如何测量 CUDA 中的流式多处理器使用/空闲时间？

> ID：12042934
> 
> 赞同：0
> 
> 时间：2012-08-20T18:20:03.010
> 
> 标签：cuda, profiling, multiprocessor

一个简单的问题，真的：我有一个内核，它以每个流式多处理器 (SM) 可能的最大块数运行，并且想知道理论上我可以从中提取多少性能。理想情况下，我想知道空闲的 SM 周期的百分比，即所有扭曲都在内存访问时被阻塞。

我真的只是对找到那个号码感兴趣。我*不*想要的是

*   关于增加入住率的一般提示。我正在使用我能获得的所有入住率，即使我设法获得更多性能，它也不会告诉我理论上还有多少可能。
*   如何计算理论峰值 GFlops。我的计算不是以 FP 为中心的，还有很多整数算术和逻辑也在进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T03:39:55.613

# javascript - 如何在 Jquery 中重绘所有 UI 组件

> ID：12042943
> 
> 赞同：0
> 
> 时间：2012-08-20T18:21:20.743
> 
> 标签：javascript, jquery, jsplumb

我有几个 div 使用端点连接彼此连接。当我进行放大或缩小时，我需要重新绘制所有 UI 组件。UI 组件是使用 jsPlumb 库（基于 jquery/javascript）绘制的。jsplumb 中有一种方法可以强制重绘，但它并没有按照我想要的方式工作。这就是我想要做的。

```
 $("div#explanation .plus").click(function(){
        jsPlumb.repaintEverything();
            var strongFont = parseFloat($("div.window strong").css('font-size'));
            var newStrongFont = strongFont + 2;
            $("div.window ").animate({
                    'height':'+=20px', 'width':'+=20px'
                },"medium");

            $("div.window strong").animate({
                    fontSize:newStrongFont
                },"medium");

    //This is not working       
            jsPlumb.repaintEverything();
            jsPlumb.repaintEverything();
            //I am calling here another function to repaint the div windows one by one
            repaintWindows();

     });
        var repaintWindows = function(){
            var jjl;
            for(jjl=1;jjl<=xmlLength;jjl++)
            {
                var windo = "window"+jjl;
                //alert("Window is ::"+windo);

                jsPlumb.repaint(windo);
                alert("Window is ::"+windo);
                //_addEndpoints(wind, ["LeftMiddle", "BottomCenter"], ["TopCenter", "RightMiddle"]);
            }
            alert("the value of jjl is ::"+jjl+" \nThe value of xmlLength is::"+xmlLength);
        }; 
```

这里的问题是如果我删除

```
 //alert("Window is ::"+windo); 
```

从 for 循环的 repaintWindows 方法中，窗口在下一个调用循环期间被重新绘制。我希望重绘同时工作。如果我保持警报，那么它会同时重新绘制窗口。同样，最后我不希望那里有任何警报。有人可以告诉我我哪里出错了。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:24:07.643

不确定，但试试这个

```
 $(window).resize(function() {
  jsPlumb.repaintEverything();
 }); 
```

# html - 如何让我的图标与矩形显示在同一行？

> ID：12042945
> 
> 赞同：0
> 
> 时间：2012-08-20T18:21:42.303
> 
> 标签：html, css

我试图让黑色 x 标记显示在与第二个绿色矩形相同的行上。我尝试使用 display: inline，但它仍然不会显示在同一行。有人可以帮忙吗？

[http://jsfiddle.net/a4Cg4/1/](http://jsfiddle.net/a4Cg4/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:44:09.090

在 HTML 代码中，如果我理解您想要实现的目标，则必须将标记移动到将要浮动的元素内。

然后你使用不推荐使用的属性`align="center"`，它在尝试定位标记时使一切变得复杂......尽管如此，这里有一个小提琴：http: [//jsfiddle.net/PhilippeVay/a4Cg4/5/](http://jsfiddle.net/PhilippeVay/a4Cg4/5/) （修改后的CSS在顶部，第一和第二条规则）

与您的问题无关，但仍然：每个 HTML img 都需要一个 alt 属性，即使它对于装饰图像是空的（或者当周围文本等上下文已经说明了图像所代表的内容时）。我将它添加到 HTML 代码中。

# javascript - 用 'this' 定义的函数，但在没有 'this' 的情况下执行

> ID：12042946
> 
> 赞同：4
> 
> 时间：2012-08-20T18:21:45.837
> 
> 标签：javascript

我期待“taco”函数的第二次调用会生成运行时错误，因为我没有使用“this”关键字调用它：

```
function foo() {
    var bar = "baz";

    this.taco = function() {
        console.log(bar);
    };
    this.taco();
    taco(); // I expected a runtime error here.     
}

foo(); 
```

但是，事实并非如此。

这是相同代码的小提琴：http: [//jsfiddle.net/phillipkregg/gdFxU/226/](http://jsfiddle.net/phillipkregg/gdFxU/226/)

JavaScript 是否在这里使用某种类型的隐式上下文管理？

只是好奇，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T18:27:52.263

原因是当您调用 时`foo()`，您是在`window`对象范围内调用它。这意味着在 的内部`foo()`， 的值`this`设置为`window`。

因此，`this.taco()`is 实际上`window.taco()`与 相同`taco()`。换句话说，`taco()`是一个全局函数，因此无论您将其称为 as `taco()`、 as`window.taco()`还是 as `this.taco()`when `this`is ，它都可以工作`window`。

如果您`taco()`像这样涉及一个新对象，其中`this`设置为的新实例`foo`并且不等于`window`，那么您会得到预期的运行时错误：

```
function foo() {
    var bar = "baz";

    this.taco = function() {
        console.log(this);
        console.log(bar);
    };
    this.taco();
    taco(); // I expected a runtime error here.     
}

var x = new foo(); 
```

示例：http: [//jsfiddle.net/jfriend00/3LkxU/](http://jsfiddle.net/jfriend00/3LkxU/)

* * *

如果您对 的值感到困惑`this`，可以使用以下 javascript 规则来确定 的值`this`：

1.  `new`如果您使用like调用函数`x = new foo()`，则会创建一个新实例，`foo`并将值`this`设置为函数内部的该对象，并且默认情况`foo()`下会返回该新实例。`foo()`

2.  如果您通常调用任何`foo()`函数如 这就是您原始示例中发生的情况。`this``window``this``undefined`

3.  如果您调用具有对象引用的方法`obj.foo()`，`this`则将被设置为`obj`对象。

4.  如果您使用`.apply()`or进行函数调用`.call()`，那么您可以专门控制使用or`this`的第一个参数设置的值。例如：将调用函数并设置指向对象的指针。`.apply()``.call()``foo.call(obj)``foo()``this``obj`

5.  如果您不在任何函数调用中（例如在全局范围内），那么`this`将是全局对象（`window`在浏览器中）或`undefined`处于严格模式。

6.  与上述所有规则一样，`this`由调用者调用您的方式控制，而不是函数/方法的定义方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:26:17.177

原因是`this`在 foo() 中，当它按原样调用时，将引用一个全局对象。这意味着`taco`函数将在全局范围内引入。

要获得您想要的功能，请改用`new foo()`语法。然后`this`将引用一个新对象，该`taco`属性将被赋予一个新值（函数）。直接打电话`taco`会给你一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:30:42.310

```
foo(); // equals window.foo() , `this` equals `window` and `this.taco` equals `window.taco` and `window.taco`  equals `taco` as it is global

new foo(); //creates a new object. this will give error because here `this.taco` is not `taco` 
```

# c++ - 根据条件替换指令

> ID：12042950
> 
> 赞同：1
> 
> 时间：2012-08-20T18:22:00.867
> 
> 标签：c++, optimization, for-loop

我有两个 for 循环，我想将它们写在一个函数中。问题是它仅在一条指令上有所不同

```
for (int i = 1; i <= fin_cabecera - 1 ; i++ ){
    buffer[i] &= 0xfe;
    if (bitsLetraRestantes < 0) {
        bitsLetraRestantes = 7;
        mask = 0x80;
        letra = sms[++indiceLetra]; //*differs here*
    }
    char c = (letra & mask) >> bitsLetraRestantes--;
    mask >>= 1;
    buffer[i] ^= c; 
} 
```

和另外一个

```
for (int i = datos_fichero; i <= tamanio_en_bits + datos_fichero; i++){
    buffer[i] &= 0xfe;
    if (bitsLetraRestantes < 0) {
        bitsLetraRestantes = 7;
        mask = 0x80;
        f.read(&letra, 1);  //*differs here*
    }
    char c = (letra & mask) >> bitsLetraRestantes--;
    mask >>= 1;
    buffer[i] ^= c; 
} 
```

我是这样想的：

```
void write_bit_by_bit(unsigned char buffer[], int from, int to, bool type) {
    for (int i = to; i <= from; i++) {
        buffer[i] &= 0xfe;
        if (bitsLetraRestantes < 0) {
            bitsLetraRestantes = 7;
            mask = 0x80;
            type ? (letra = sms[++indiceLetra]) : f.read(&letra, 1);
        }
        char c = (letra & mask) >> bitsLetraRestantes--;
        mask >>= 1;
        buffer[i] ^= c;
    }
} 
```

但我认为必须有更好的方法。

语境：

我会给出更多的上下文（我会在我的语言限制范围内尽可能地解释它）。我每次都必须读取一个字节，因为该`Buffer`变量代表一个图像像素。`sms`是必须隐藏在图像中的消息，并且`letra`是该消息的单个字符。为了不修改图像的方面，每个字符的每一位都必须写入每个像素的最后一位。让我给你和例子。

`letra = 'H' // 01001000 in binary`

`buffer[0] = 255 // white pixel 11111111`

为了隐藏 H 字符，我需要 8 个像素：

结果将如下所示：

```
buffer[0] //11111110, 
buffer[1] //11111111 
buffer[2] //11111110 
buffer[3] //11111110 
buffer[4] //11111111 
buffer[5] //11111110 
buffer[6]//11111110 
buffer[7]//11111110 
```

The H is hidden in the last bit of the image. I hope I explained well.

[Solution]

Thanks to @anatolyg I've rewrited the code and now works just as I wanted. Here is how it looks:

```
void write_bit_by_bit(unsigned char buffer[], ifstream& f,int from, int to, char sms[], bool type){

unsigned short int indiceLetra        = 0;
short int bitsLetraRestantes          = 7;
unsigned char mask                    = 0x80; //Empezamos por el bit más significativo (10000000)

char* file_buffer;

if(type){ //Write file data
    int number_of_bytes_to_read = get_file_size(f);
    file_buffer = new char[number_of_bytes_to_read];
    f.read(file_buffer, number_of_bytes_to_read);
}

const char* place_to_get_stuff_from = type ? file_buffer : sms;
char letra = place_to_get_stuff_from[0];

for (int i = from; i <= to; i++) {
    buffer[i] &= 0xfe; //hacemos 0 último bit con máscara 11111110
    //TODO: Hacer con dos for
    if (bitsLetraRestantes < 0) {
        bitsLetraRestantes = 7;
        mask = 0x80;
        letra = place_to_get_stuff_from[++indiceLetra];//letra = sms[++indiceLetra];
    }
    char c = (letra & mask) >> bitsLetraRestantes--;
    mask >>= 1;
    buffer[i] ^= c; //Almacenamos en el ultimo bit del pixel el valor del caracter
}
}

int ocultar(unsigned char buffer[],int tamImage, char sms[], int tamSms){
ifstream f(sms);
if (f) {
    strcpy(sms,basename(sms));
    buffer[0] = 0xff;
    int fin_cabecera = strlen(sms)*8 + 1;
    buffer[fin_cabecera] = 0xff;

    write_bit_by_bit(buffer, f, 1, fin_cabecera -1, sms, WRITE_FILE_NAME);

    int tamanio_en_bits = get_file_size(f) * 8;

    int datos_fichero = fin_cabecera + 1;
    write_bit_by_bit(buffer, f, datos_fichero, tamanio_en_bits + datos_fichero, sms, WRITE_FILE_DATA);

    unsigned char fin_contenido = 0xff;

    short int bitsLetraRestantes          = 7;
    unsigned char mask            = 0x80; 

    for (int i = tamanio_en_bits + datos_fichero + 1;
            i < tamanio_en_bits + datos_fichero + 1 + 8; i++) {
        buffer[i] &= 0xfe;
        char c = (fin_contenido & mask) >> bitsLetraRestantes--;
        mask >>= 1;
        buffer[i] ^= c; 
    }

}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:03:42.293

Since you are talking about optimization here, consider performing the `read` outside the loop. This will be a major optimization (reading 10 bytes at once must be quicker than reading 1 byte 10 times). This will require an additional buffer for (the file?) `f`.

```
if (!type)
{
    char f_buffer[ENOUGH_SPACE];
    number = calc_number_of_bytes_to_read();
    f.read(f_buffer, number);
}
for (...) {
    // your code
} 
```

After you have done this, your original question is easy to answer:

```
const char* place_to_get_stuff_from = type ? sms : f_buffer;
for (...) {
        ...
        letra = place_to_get_stuff_from[++indiceLetra];
        ...
} 
```

# language-agnostic - 什么是嵌入式脚本语言？

> ID：12042955
> 
> 赞同：13
> 
> 时间：2012-08-20T18:22:15.480
> 
> 标签：language-agnostic, scripting-language

什么是嵌入式脚本语言？与领域特定语言相比，它有哪些优势？

“已经设计了许多语言，目的是通过嵌入应用程序来替换特定于应用程序的脚本语言。” -[脚本语言（维基）](http://en.wikipedia.org/wiki/Scripting_language)

[Javascript.NET](https://github.com/JavascriptNet/Javascript.Net)就是这样一个例子。例如，它可以用来代替[c#](http://www.ecma-international.org/publications/standards/Ecma-334.htm)。但是，脚本语言和嵌入式脚本语言之间的区别是什么？此外，为什么 javascript 比 C# 或任何其他特定领域的语言更受欢迎？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T18:30:02.790

嵌入式脚本语言将是可以嵌入到应用程序中的脚本语言（或更具体地说，是这种语言的解释器）。因此，解释器有一个 API，可用于将其集成到应用程序中，允许脚本控制应用程序的全部或部分。

优点是应用程序开发人员只需提供与语言的接口；他们不必实现实际的语言。这允许使用更复杂和功能更丰富的语言，因为没有开发时间（从应用程序开发人员的角度来看）。

对于用户来说，这意味着他们知道脚本语言的优缺点、怪癖和好处，前提是我们谈论的是一种常用的语言。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T18:31:29.803

对于您的核心业务，您可能不应该使用嵌入式语言，但使用嵌入式语言还有其他好处。最重要的是，根据我的经验，拥有一种易于使用的语言是有益的，其他用户可以在该语言上针对您的系统进行构建。虽然理论上可以通过正确定义接口来针对您的系统进行构建，但让没有经验的人使用 JavaScript 和 Lua 会更加用户友好，而不必设置整个环境以在 .NET 中进行部署。

当然，热插拔嵌入式语言很容易，并且可以大大加快您的测试速度；也可以在不重新加载应用程序的情况下立即看到您的更改，因为您只需为该嵌入式语言重新加载一个小型虚拟机。

我个人使用它来允许人们针对游戏编写辅助脚本。

# box-api - 我应该忽略 Box API 响应中的 HTTP 状态代码吗？

> ID：12042960
> 
> 赞同：0
> 
> 时间：2012-08-20T18:22:36.417
> 
> 标签：box-api

我最近注意到，当我尝试上传一个名称已存在的文件时，Box 返回一个错误，HTTP 状态代码为 201（已创建），但错误 JSON 的“状态”成员为 409（冲突）。

我应该忽略实际的 HTTP 状态代码，而是将 JSON 的值视为权威状态代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:39:46.063

暂时，您应该忽略 HTTP 状态代码。我们允许在一个请求中上传多个文件，每个文件都可以有不同的结果。假设我在一个请求中上传了 3 个文件：

上传 1 => 错误名称上传 2 => 成功上传 3 => 错误文件

201 在这里没有意义，但 400 也没有。在我们找到更好的解决方案之前，您应该解析每个返回的文件对象以查看上传的结果。

# c++ - 调试 QT TimerEvent 时 GDB 崩溃

> ID：12042962
> 
> 赞同：1
> 
> 时间：2012-08-20T18:22:41.373
> 
> 标签：c++, qt, gdb, qt-creator

* * *

## **问题**

我在应用程序的 timerEvent 函数内部调试时遇到了困难。当应用程序能够运行时，如果我在甚至像下面这样简单的东西中设置断点，我会收到一条错误消息，指出：“gdb 进程崩溃。”

```
void MyClass::timerEvent (QTimerEvent *e) {
    std::cout << "TIMER!";
} 
```

我通过 pastebin[在这里包含了一个调试器日志。](http://pastebin.com/WSSh8CNV)

* * *

## **尝试**

为了尝试解决这个问题，我尝试使用每个版本的 QT-creator 迭代升级 gdb，但无济于事。

我在用：

*   Linux ubuntu-x86 2.6.32-42-generic #95-Ubuntu 10.04LTS SMP i686 GNU/Linux
*   QT 创建者（版本 2.4 到 2.5.2）
*   以“x86-linux-generic-elf-32bit”为目标的 gdb（7.1 到 7.5）
*   pythongdb (7.2)

* * *

## **问题**

我的问题是双重的，即：

*   是什么导致 gdb 崩溃？

和

*   我该怎么做才能让它发挥作用？

如果做不到这一点，我想知道：我还应该在哪里寻找更多的崩溃细节？

* * *

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:00:37.587

确保您的 QT 库是最新的。尽管新的 QT-creator 将通过他们提供的方便的 .bin 文件安装，但它是使用较新的 QT 库构建的，并希望它们到位。如果他们不是，那么...

此外，如果您没有将 gdb 安装到 QT-creator 可以找到它的标准目录之一，请确保通过 tools->options->build 和 run->toolchains 将其手动添加到您的工具链中。

# c# - SignalR 服务器错误与多个客户端

> ID：12042965
> 
> 赞同：0
> 
> 时间：2012-08-20T18:23:05.773
> 
> 标签：c#, signalr, signalr-hub

我有一个带有登录方法的 SignalR LoginHub。

我有一个连接并成功调用登录的客户端。然后我重新启动我的客户端并重新连接并再次成功调用登录。一旦我这样做，服务器端就会开始每隔 10 秒在点上抛出以下错误：

`An exception of type 'System.NullReferenceException' occurred in System.Web.dll and wasn't handled before a managed/native boundary`

仅当我的登录函数尝试调用客户端函数（例如`Clients.SendMessage("test")`. 如果我删除 SendMessage 广播，则没有错误！

登录中心：

```
public class LoginHub : Hub
    {
        public void Login(AuthenticationObject _authObject)
        {
            Clients.SendTestMessage("woo");
        }
} 
```

# html - 双向 CSS 过渡

> ID：12042968
> 
> 赞同：0
> 
> 时间：2012-08-20T18:23:10.600
> 
> 标签：html, google-chrome, css-transitions

我正在使用基于[此演示](http://html5-demos.appspot.com/static/css/flexbox/index.html)的供应商前缀 css 转换，目前它似乎仅适用于 Chrome 22+。我正在尝试将按钮（主页、联系人、关于）变成悬停时的下拉菜单。我想避免使用 javascript，看看我是否可以用 CSS 来完成这一切。

如果我将 z-index 设置为较低的数字 (-999) 并在悬停时将其更改为较高的数字 (999)，它会淡入，并使用过渡将不透明度从 0 更改为 1。

```
nav > div div {
    z-index: -999;
    opacity: 0;
    -webkit-transition: opacity 1s ease-in-out;
}
nav > div:hover div {
    z-index: 999;
    opacity: 1;
} 
```

[请参阅此处](http://jsfiddle.net/CsC9y/)的小提琴。

问题是它不会淡出。如果我将过渡更改为也延迟 z-index 的更改，那么它将淡出，但不会在 ( `-webkit-transition: opacity 1s ease-in-out, z-index 0 linear 1s`) 中。[在这里](http://jsfiddle.net/CsC9y/1/)对 Fiddle 进行修改。

本质上，不透明度褪色效果很好，但是 z-index 在一个方向或另一个方向上移动得太快了。如果我根本不使用 z-index，那么当我将鼠标悬停在“悬停我”按钮下方而不是*它上面**时*，它将打开菜单。[这是另一个 Fiddle](http://jsfiddle.net/CsC9y/2/)展示了这种情况。

有没有办法让一个从 A 点到 B 点的过渡，另一个从 B 点到 A 点的过渡？我已经尝试在`:hover`元素上放置一个单独的过渡，但据我所知它只是覆盖了第一个（好像没有从“不悬停”到“悬停”的过渡）。

TL;DR：有没有办法修改[this](http://jsfiddle.net/CsC9y/)、[this](http://jsfiddle.net/CsC9y/1/)或[this](http://jsfiddle.net/CsC9y/2/)以在悬停在“Hover Me”按钮（不只是靠近）（不使用 JavaScript）上时进行平滑过渡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:34:51.087

看看这个[小提琴](http://jsfiddle.net/CsC9y/3/)。不确定它是否符合您的要求，但我更改了以下内容...

**CSS**

```
nav > div > div {
  z-index: -999;
  position: absolute;
  opacity: 0;
  -webkit-transition: opacity 1s ease-in-out, z-index 0 linear 1s;
  -moz-transition: opacity 1s ease-in-out, z-index 0 linear 1s;
  -ms-transition: opacity 1s ease-in-out, z-index 0 linear 1s;
  -o-transition: opacity 1s ease-in-out, z-index 0 linear 1s;
}
nav > div:hover > div {
  z-index: 999;
  opacity: 1;
  -webkit-transition: opacity 1s ease-in-out, z-index 0 linear 0;
  -moz-transition: opacity 1s ease-in-out, z-index 0 linear 0;
  -ms-transition: opacity 1s ease-in-out, z-index 0 linear 0;
  -o-transition: opacity 1s ease-in-out, z-index 0 linear 0;
} 
```

我也添加了到悬停状态的转换，但延迟为 0。

# iphone - 如何添加未选择选项卡的 uitab 栏控制器？

> ID：12042974
> 
> 赞同：0
> 
> 时间：2012-08-20T18:23:46.133
> 
> 标签：iphone, objective-c

我添加了一个 UITabBarController。我的要求是显示带有标签栏控制器的视图。但该视图不是标签栏项目的一部分。例如我的标签栏包含 3 个标签

1.  联系人

2.  相机

3.  历史

通常，如果我们添加标签栏控制器联系人将被选中，并且该视图将自动显示。但我不想那样...

我用 [tabBarcontroller setSelectedViewController=nil];

我能够获得一个选项卡蝙蝠，其中未选择选项卡。但是当我试图选择一个标签项时它不起作用..我想我将 selectedViewController 设置为 nil。有没有其他方法可以满足我的要求...？

请清楚地解释你的答案..我是iphone应用程序开发的新手..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:01:11.223

呈现一个不属于您的标签栏控制器的视图控制器，并在其底部放置一个标签栏图像/按钮，类似于您的标签栏。当您从该视图控制器中收到按下按钮的消息时，请在屏幕上显示该选项卡。

# mysql - 新表插入触发器

> ID：12042975
> 
> 赞同：0
> 
> 时间：2012-08-20T18:23:48.570
> 
> 标签：mysql, triggers

我有 2 个表，Organization 和 State（它在哪里）。每个组织都有一个状态。我现在想为表 State 实现一个 Integer 列，该列跟踪其中有多少组织。有点像每当一个新组织被插入到 Organizations 表中时，更新相应 State 表中的整数列，其中 org.state_id = state_id。

这可以使用触发器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:40:02.677

与其跟踪计算列，不如只根据需要计算所需的内容。因此，如果您有这两个表：

```
organization(id, name, state_id)

state(id, name) 
```

如下查询获取计数：

```
SELECT s.name, COUNT(*) AS organization_count
  FROM state s JOIN organization o ON (s.id = o.state_id)
  GROUP BY s.name 
```

这避免了完整性问题。如果您正在处理数十万条记录或在报告环境中操作，那么您可能需要考虑计算信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:47:11.770

我同意[Glenn 的回答](https://stackoverflow.com/a/12043195/482758)，即在所有条件相同的情况下，按需是一个更好的解决方案，但答案是，是的，它可以通过触发器来完成。非常简单地。

```
CREATE TRIGGER organization_trigger_insert AFTER INSERT ON organization
    FOR EACH ROW BEGIN
        UPDATE state SET total = total + 1 WHERE NEW.state_id = state_id;
    END;

CREATE TRIGGER organization_trigger_delete BEFORE DELETE ON organization
    FOR EACH ROW BEGIN
        UPDATE state SET total = total - 1 WHERE OLD.state_id = state_id;
    END; 
```

[演示](http://sqlfiddle.com/#!2/0959f/2)

# java - 访问线程并在 Thread 类中运行方法

> ID：12042976
> 
> 赞同：0
> 
> 时间：2012-08-20T18:23:55.353
> 
> 标签：java, multithreading, class

这是我的代码：

```
public class DJ {
    static Thread djThread = new DJPlayThread();

    public static void play(){
        djThread.start();
    }
} 
```

但是一旦该线程启动，我如何运行`DJPlayThread`类内部的方法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:30:47.583

这是一个简单的示例，说明如何按照您的要求进行操作：

```
public class ThreadControl {

    public static void main(String[] args) {
        MyRunnable myRunnable = new MyRunnable("MyRunnable");
        Thread thread = new Thread(myRunnable);
        thread.setDaemon(true);
        thread.start();

        myRunnable.whoAmI();//call method from within thread

        try {
            Thread.sleep(6000);
        } catch (InterruptedException e) {
        }
        myRunnable.isStopped.set(true);//stop thread
    }

 static class MyRunnable implements Runnable {
        public String threadName;
        public AtomicBoolean isStopped=new AtomicBoolean(false);

        public MyRunnable() {
        }

        public MyRunnable(String threadName) {
            this.threadName = threadName;
        }

        public void run() {
            System.out.println("Thread started, threadName=" + this.threadName + ", hashCode="
                    + this.hashCode());

            while (!this.isStopped.get()) {
                try {
                    Thread.sleep(3000);
                } catch (InterruptedException e) {
                }
                System.out.println("Thread looping, threadName=" + this.threadName + ", hashCode="
                        + this.hashCode());
            }
        }

        public void whoAmI() {
            System.out.println("whoAmI, threadName=" + this.threadName + ", hashCode="
                    + this.hashCode());
        }

    }

} 
```

*   [http://www.coderanch.com/t/549659/java/java/you-access-methods-thread-target](http://www.coderanch.com/t/549659/java/java/you-access-methods-thread-target)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T18:52:31.320

```
public class DJ {
    private DJPlayThread djThread = new DJPlayThread();

    public void play() throws InterruptedException {
        djThread.start();

        Thread.sleep(10000);

        djThread.stopMusic();
    }

    public static void main(String[] args){
        try{
            new DJ().play();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

public class DJPlayThread extends Thread{

    private AtomicBoolean running = new AtomicBoolean(true);

    @Override
    public void run() {
        while(running.get()){
            System.out.println("Playing Music");
            try {
                sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public void stopMusic(){
        //be careful about thread safety here
        running.set(false);
    }
} 
```

应该打印出来：

```
Playing Music 
Playing Music 
Playing Music 
Playing Music 
Playing Music
Playing Music 
Playing Music 
Playing Music 
Playing Music 
Playing Music 
```

在线程之间交换信息时要非常小心线程安全。跨线程上下文访问和修改变量时会发生一些奇怪的事情。

# c# - 返回数据时 WCF 失败

> ID：12042981
> 
> 赞同：1
> 
> 时间：2012-08-20T18:24:11.810
> 
> 标签：c#, wcf, return

我第一次涉足 WCF。该课程`HardDrive`会收集大量有关本地连接驱动器的 WMI 信息。出于某种原因，当它试图返回`List<HardDrive>`给客户端时，我得到

> *基础连接已关闭：连接意外关闭。*

这是那些完全无用的错误消息之一。

我已经完成了一步一步的调试，所以我*知道*当它试图将列表返回给客户端时它会崩溃。我只是不知道*为什么*。

我最好的猜测是与返回列表的大小有关，但是......它不会那么大，我不认为？

我已经测试了这个返回一个基本字符串，它工作正常。

```
namespace FCopyDataService
{
    public class FCopyDataService : IFCopyDataService
    {
        public List<HardDrive> GetAllHardDrives()
        {
            return HardDrive.GetHardDrives(); //this returns quite happily
        }

        public List<Partition> GetAllPartitions(HardDrive currentDrive)
        {
            return HardDrive.GetPartitions(currentDrive);
        }
    }
} 
```

我使用以下方法从客户端调用它：

```
private void button1_Click(object sender, EventArgs e)
{
    FCopyDataServiceClient drives = new FCopyDataServiceClient();
    drives.Open(); //checks it's open
    List<HardDrive> receivedDrives = drives.GetAllHardDrives(); //crashes here
} 
```

我的服务配置：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="102400" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

还有我的客户端配置，有些奇怪，因为我一直在努力解决这个问题。

```
<system.serviceModel>
          <bindings>
               <basicHttpBinding>
                    <binding name="BasicHttpBinding_IFCopyDataService" closeTimeout="00:01:00"
                         openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                         allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                         maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                         messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                         useDefaultWebProxy="true">
                         <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                         <security mode="None">
                              <transport clientCredentialType="None" proxyCredentialType="None"
                                   realm="" />
                              <message clientCredentialType="UserName" algorithmSuite="Default" />
                         </security>
                    </binding>
               </basicHttpBinding>
          </bindings>
          <client>
               <endpoint address="http://localhost:19140/FCopyDataService.svc"
                    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IFCopyDataService"
                    contract="FCopyDataService.IFCopyDataService" name="BasicHttpBinding_IFCopyDataService" />
          </client>
       <behaviors>
         <endpointBehaviors>
           <behavior>
             <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
           </behavior>
         </endpointBehaviors>
         <serviceBehaviors>
           <behavior >
             <serviceDebug includeExceptionDetailInFaults="true" />
             <serviceMetadata httpGetEnabled="true" />
             <dataContractSerializer maxItemsInObjectGraph="2147483647" />
           </behavior>
         </serviceBehaviors>
       </behaviors>
    </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:17:11.287

该类`HardDrive`必须被序列化，但它还包含对`Partitions`.

所以我更改`Partitions`为包含`[DataContract(IsReference=true)]`和删除`HardDrives`一个`[DataMember]`分区，这似乎对我的目的起到了作用，但我觉得这不是最好的答案。

# security - 基本的安全用户密码存储工作流程

> ID：12042982
> 
> 赞同：1
> 
> 时间：2012-08-20T18:24:25.230
> 
> 标签：security, passwords

给定一个原始密码

1.  创造一种独特的盐
2.  将其附加到原始密码
3.  brcypt / SHA512 这个组合使用随时间变化的一次性密钥
4.  将加密的密码和盐存储在用户表中

验证身份

1.  将盐附加到原始密码
2.  bcrypt / SHA512 组合验证
3.  根据 db 散列值检查散列值

在验证部分，如果当前密钥不再相同怎么办？我是否应该始终保留旧密钥列表并对其进行迭代以验证该旧密码是否是使用其中一个旧密钥生成的？如果验证者返回 true，我将更新新的加密密码。

另外，我怎样才能确定盐对每个用户的每个密码都是唯一的？

这就是我需要做的吗？

有什么遗漏吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:33:37.950

确保盐是唯一的很容易 - 您可以将用户名和密码最后更改的时间散列在一起。

至于加密，只有当您出于某种原因想要存储用户密码时才需要这样做，而不仅仅是能够验证它。只存储密码和盐的哈希值更常见也更安全。不需要密钥，即使攻击者破坏了数据库，他们也将难以恢复密码。唯一的缺点是你不能告诉用户他们的密码，你只能重置他们。

# mysql - NAVICAT - 我无法数据传输我的存储过程和视图

> ID：12042985
> 
> 赞同：0
> 
> 时间：2012-08-20T18:24:31.877
> 
> 标签：mysql, database, navicat

我正在尝试使用 DATA TRANSFER 将远程数据库传输到本地主机虚拟机。VM 上的数据库名称与远程数据库的名称相同。

我的问题是视图/存储过程的复选框变暗了，我无法选择我的 SP。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T14:22:59.203

SP 和视图不是数据，它们是数据库结构的一部分。Navicat Premium for MySQL 有一个称为结构同步的选项。它在工具菜单中。从那里您可以找到比较表、视图、函数和事件的选项。比较你的数据库后，Navicat 创建 SQL 以在远程服务器上重新创建这些对象。如果您只想同步一些对象，您可以勾选要运行的语句。

# java - 鼠标光标消失

> ID：12042988
> 
> 赞同：5
> 
> 时间：2012-08-20T18:24:40.410
> 
> 标签：java, eclipse, jakarta-ee, eclipse-indigo

由于某种原因，Eclipse 中的鼠标光标正在消失。

我可以看到我可以移动到下一行，它通过通常的颜色变化向我显示，但光标本身是不可见的。当我启动 eclipse 时，我可以看到光标，但是一旦初始化完成，光标又被隐藏了。

当我从 Eclipse Indigo 切换到 Juno 和其他版本时，也发生了同样的事情。我不知道该怎么办。

关于什么可能是错的任何指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:49:43.607

Anuj，请尝试以下常见嫌疑人之一是否可以解决问题：

1.  切换到新的工作区并检查问题是否再次出现在那里。

    *   如果它没有重新出现，那么您正在处理一个损坏的工作区。如果你从一个新的工作空间开始，会失去很多吗？
    *   如果是这样，那么它可能是一个吵闹的 Eclipse 插件。下一个合乎逻辑的步骤将是全新的 Eclipse 安装（我会推荐 Eclipse Indigo for Java Devs 可从**[此处](http://www.eclipse.org/downloads/packages/release/indigo/sr2)**下载）
2.  如果问题在全新的 Eclipse + 新工作空间中仍然存在，那么我们需要扩大搜索范围并包括 OS / JDK 问题。在我们讨论的同时，您使用的是哪个操作系统、JDK 和 Eclipse 版本？

## 备份“工作”的 Eclipse 设置

一旦问题得到解决（例如通过进行全新的 Eclipse 安装），我强烈建议备份以下内容：

1.  Eclipse 安装目录（这样你就可以得到你安装的所有插件）
2.  工作区目录。

这样您就可以轻松地恢复`working`您的设置版本。

# html - 自定义下拉菜单

> ID：12042994
> 
> 赞同：0
> 
> 时间：2012-08-20T18:24:55.543
> 
> 标签：html, css

这是我正在处理的下拉菜单。

```
<select id="frames" onchange="updateDisplay()" class="styled-select">    
    <OPTION value="ravi">ravi</OPTION>
    <OPTION value="steve">steve</OPTION>
    <OPTION value="robert">robert</OPTION>

</select>​ 
```

和CSS

```
select {
background-color:#232323;
    border-color:#232323;
    border-width:1px;
    color:white;
};​ 
```

[http://jsfiddle.net/ravi007/ZWwgW/3/](http://jsfiddle.net/ravi007/ZWwgW/3/)

我正在尝试为下拉菜单添加灰色背景。我部分成功了。

我未能将灰色添加到带有箭头的小按钮。我也想让那个箭头变成白色。

单击时，我在下拉菜单周围看到默认的黄色边框。有没有办法让它变蓝

谷歌搜索时，我注意到按钮部分与浏览器有关。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:33:12.340

您还必须为 LI 元素添加背景。这只是某些浏览器 IIRC 中的问题。

```
select, select > option {
    background-color:#232323;
    border-color:#232323;
    border-width:1px;
    color:white;    
} 
```

[演示](http://jsfiddle.net/rlemon/ZWwgW/4/)

至于“边框”颜色 - 你确定这不是“轮廓”吗？你试过改变`outline-color: blue;`吗？[带大纲的演示。](http://jsfiddle.net/rlemon/ZWwgW/5/)

这是 LI 在 Linux (Ubuntu) 上的 Chrome 中获取背景颜色的区别[http://jsfiddle.net/rlemon/ZWwgW/7/](http://jsfiddle.net/rlemon/ZWwgW/7/)
![在此处输入图像描述](../Images/2ca8b874e3a5ad825e54e2a501c0ab0f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:48:01.573

您无法更改箭头，但可以使其看起来像已使用图像更改。

这是一个简单的技巧，看看这个[**例子**](http://jsfiddle.net/2Z5ag/)

不完全是您想要的，但很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:35:32.060

遗憾的是，您将无法使用 CSS 更改该箭头，因为它是由您使用的浏览器呈现的。我唯一能想到的就是使用[这个 JQuery 库](http://www.filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/)（[示例](http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html)）

对于边框，我认为您将能够像这样访问它（此边框仅由 safari 等某些浏览器呈现）：

```
select::-moz-focus-inner {
  border-color: blue;
} 
```

如果你在谈论大纲，你可以简单地做：

```
select{
outline-color: blue;
} 
```

# c++ - 混合数字类 istream 问题

> ID：12042995
> 
> 赞同：1
> 
> 时间：2012-08-20T18:25:00.130
> 
> 标签：c++, operator-overloading, iostream, fractions, iomanip

我在夏天给自己布置了一些作业，我完成了 98% 的项目由于这个问题而陷入停顿。

我有一门叫做混合的课程。它包含整数、分子和分母的成员数据。我需要重载所有常用运算符，以允许混合类型对象的乘法、加法、比较和流式传输。除了 >> （提取运算符）之外，我已经重载了所有运算符。

读入的所有混合数字的格式为： **整数分子/分母**

例如：1 2/3、0 7/8、-3 18/5、0 -1/89

标题：`friend istream& operator>> (istream &, Mixed);`

CPP 文件：`istream& operator>> (istream &in, Mixed m) {...}`

对于作业，我仅限于 iostream 和 iomanip 库。我的计划是从流中读取值并将它们分配给临时 int 变量（w，n，d），然后我将使用 Mixed 构造函数来创建对象 m。不幸的是，我想不出一种方法来分离分子和分母。它们都是整数，但它们之间有一个字符 (/)。

*   我不能将 getline() 与它的分隔符一起使用，因为它将数据分配给一个 char 数组，我不相信我可以在没有另一个库的情况下将其转换为 int。
*   出于同样的原因，我不能使用 char 数组然后对其进行分段。
*   我不能在 get() 和 peek() 中使用 while 循环，因为我认为我不能将 char 数组转换为 int。
*   我不能使用字符串或 c 字符串然后对其进行分段，因为这需要外部库。

再一次，我需要只使用 iostream 和 iomanip 将像“22/34”这样的值拆分为 22 和 34。我忽略了一些相当明显的方法吗？有没有办法使用指针隐式转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:36:55.933

您可以先提取提名者，然后是分隔字符，然后是分母。

举例说明：

```
istream& operator>> (istream &in, Mixed &m) {
    int num, denom;
    char separ;

    in >> num;
    in.get(separ);
    if (separ != '/')
      in.setstate(ios::failbit);
    in >> denom;

    if (in) {
      // All extraction worked
      m.numerator = num;
      m.denominator = denom;
    }

    return in;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:40:01.357

> 再一次，我需要只使用 iostream 和 iomanip 将像“22/34”这样的值拆分为 22 和 34。

难道你不能只读取第一个整数，`get`用来获取下一个字符，然后读取第二个整数吗？像这样的东西：

```
#include <iostream>

int main() {
    using std::cin;
    using std::cout;

    int num;
    int den;

    while(cin) {
        cin >> num;
        if (cin.get() != '/') {
            // handle error
        }   
        cin >> den;

        cout << num << "/" << den << std::endl;
    }   

    return 0;
} 
```

然后，您可以确保在两个整数之间读取的字符是 a `'/'`，如果不是，则适当处理。